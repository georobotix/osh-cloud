"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[8214],{14072:function(t,e,r){r.d(e,{Z:function(){return h}});var n=r(9335),i=r(22525),s=r(82610);const a={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},o={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class h{static getBytesPerElement(t){const e=(0,n.vN)(t.type||5126);return e.BYTES_PER_ELEMENT}static getBytesPerVertex(t){(0,i.h)(t.size);const e=(0,n.vN)(t.type||5126);return e.BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return new h(...[a,...e])}constructor(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return h.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return h.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=(0,s.k)("Accessor",t,o),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}},53478:function(t,e,r){r.d(e,{Z:function(){return f}});var n=r(87577),i=r(14072),s=r(9335),a=r(1418),o=r(22525),h=r(82610);const l=10,c={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},u={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:c},d={removedProps:c};class f extends n.Z{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/i.Z.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/i.Z.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=(0,h.k)("Buffer",t,u),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=(0,h.k)("Buffer",t,d),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new i.Z(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:r=0,srcOffset:n=0}=t,i=t.byteLength||t.length;(0,o.h)(e);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==n||void 0!==i?((0,a.KQ)(this.gl),this.gl.bufferSubData(this.target,r,e,n,i)):this.gl.bufferSubData(s,r,e),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:r=0,writeOffset:n=0,size:i}=t;const{gl:s}=this;return(0,a.KQ)(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,n,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:r=0,length:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.KQ)(this.gl);const i=(0,s.vN)(this.accessor.type||5126,{clamped:!1}),h=this._getAvailableElementCount(e),l=r;let c,u;t?(u=t.length,c=u-l):(c=Math.min(h,n||h),u=l+c);const d=Math.min(h,c);return n=n||d,(0,o.h)(n<=d),t=t||new i(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,r,n),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:r=0,size:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==n?this.gl.bindBufferRange(t,e,this.handle,r,n):((0,o.h)(0===r),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=35345===t||35982===t;return r?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(l,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;(0,o.h)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,this.usage),this.gl.bufferSubData(n,e,t),this.gl.bindBuffer(n,null),this.debugData=t.slice(0,l),this.bytesUsed=r,this._trackAllocatedMemory(r);const a=(0,s.O)(t);return(0,o.h)(a),this.setAccessor(new i.Z(this.accessor,{type:a})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,o.h)(t>=0),this._trackDeallocatedMemory();let r=t;0===t&&(r=new Float32Array(0));const n=this._getTarget();return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,e),this.gl.bindBuffer(n,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=(0,s.vN)(this.accessor.type||5126,{clamped:!1}),r=t/e.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(t){this.accessor.type||this.setAccessor(new i.Z(this.accessor,{type:(0,s.O)(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return a.cM.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return a.cM.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return a.cM.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return a.cM.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new i.Z(this.accessor,t),this}}},26047:function(t,e,r){r.d(e,{$:function(){return g},Z:function(){return f}});var n=r(1418),i=r(22525);const s=256,a=1024,o=16384,h=6144,l=6145,c=6146,u=34041,d="clear: bad arguments";function f(t){let{framebuffer:e=null,color:r=null,depth:h=null,stencil:l=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c={};e&&(c.framebuffer=e);let u=0;r&&(u|=o,!0!==r&&(c.clearColor=r)),h&&(u|=s,!0!==h&&(c.clearDepth=h)),l&&(u|=a,!0!==h&&(c.clearStencil=h)),(0,i.h)(0!==u,d),(0,n.s8)(t,c,(()=>{t.clear(u)}))}function g(t){let{framebuffer:e=null,buffer:r=h,drawBuffer:s=0,value:a=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.KQ)(t),(0,n.s8)(t,{framebuffer:e},(()=>{switch(r){case h:switch(a.constructor){case Int32Array:t.clearBufferiv(r,s,a);break;case Uint32Array:t.clearBufferuiv(r,s,a);break;case Float32Array:default:t.clearBufferfv(r,s,a)}break;case l:t.clearBufferfv(l,0,[a]);break;case c:t.clearBufferiv(c,0,[a]);break;case u:const[e,n]=a;t.clearBufferfi(u,0,e,n);break;default:(0,i.h)(!1,d)}}))}},81913:function(t,e,r){r.d(e,{Km:function(){return u},Lv:function(){return d},z6:function(){return c}});var n=r(53849),i=r(35008),s=r(1418),a=r(9335),o=r(22525);function h(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,o.h)(!1),0}}var l=r(73462);function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:h=null,sourceWidth:l,sourceHeight:c,sourceType:u}=e;const{framebuffer:d,deleteFramebuffer:m}=f(t);(0,o.h)(d);const{gl:b,handle:p,attachments:_}=d;l=l||d.width,c=c||d.height,36064===s&&null===p&&(s=1028),(0,o.h)(_[s]),u=u||_[s].type,h=g(h,u,i,l,c),u=u||(0,a.O)(h);const y=b.bindFramebuffer(36160,p);return b.readPixels(r,n,l,c,i,u,h),b.bindFramebuffer(36160,y||null),m&&d.delete(),h}function u(t){let{sourceAttachment:e=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c(t,{sourceAttachment:e}),{width:i,height:s}=t;while(s>r)({data:n,width:i,height:s}=(0,a.KS)({data:n,width:i,height:s}));(0,a.c$)({data:n,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const h=o.getContext("2d"),l=h.createImageData(i,s);return l.data.set(n),h.putImageData(l,0,0),o.toDataURL()}function d(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:n=0,sourceY:a=0,targetMipmaplevel:h=0,targetInternalFormat:l=6408}=r;let{targetX:c,targetY:u,targetZ:d,width:g,height:m}=r;const{framebuffer:b,deleteFramebuffer:p}=f(t);(0,o.h)(b);const{gl:_,handle:y}=b,A="undefined"!==typeof c||"undefined"!==typeof u||"undefined"!==typeof d;c=c||0,u=u||0,d=d||0;const T=_.bindFramebuffer(36160,y);(0,o.h)(e);let v=null;if(e instanceof i.Z&&(v=e,g=Number.isFinite(g)?g:v.width,m=Number.isFinite(m)?m:v.height,v.bind(0),e=v.target),A)switch(e){case 3553:case 34067:_.copyTexSubImage2D(e,h,c,u,n,a,g,m);break;case 35866:case 32879:const t=(0,s.KQ)(_);t.copyTexSubImage3D(e,h,c,u,d,n,a,g,m);break;default:}else _.copyTexImage2D(e,h,l,n,a,g,m,0);return v&&v.unbind(),_.bindFramebuffer(36160,T||null),p&&b.delete(),v}function f(t){return t instanceof n.Z?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:(0,l.Y)(t),deleteFramebuffer:!0}}function g(t,e,r,n,i){if(t)return t;e=e||5121;const s=(0,a.vN)(e,{clamped:!1}),o=h(r);return new s(n*i*o)}},53849:function(t,e,r){r.d(e,{Z:function(){return f}});var n=r(1418),i=r(87577),s=r(51621),a=r(94041),o=r(26047),h=r(81913),l=r(44211),c=r(79579),u=r(22525);const d="Multiple render targets not supported";class f extends i.Z{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:n}=e;let i=!0;return r&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),n&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new f(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=(0,n.KQ)(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=(0,n.KQ)(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:r=1,attachments:n=null,color:i=!0,depth:s=!0,stencil:a=!1,check:o=!0,readBuffer:h,drawBuffers:l}=t;if((0,u.h)(e>=0&&r>=0,"Width and height need to be integers"),this.width=e,this.height=r,n)for(const c in n){const t=n[c],i=Array.isArray(t)?t[0]:t;i.resize({width:e,height:r})}else n=this._createDefaultAttachments(i,s,a,e,r);this.update({clearAttachments:!0,attachments:n,readBuffer:h,drawBuffers:l}),n&&o&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:r,drawBuffers:n,clearAttachments:i=!1,resizeAttachments:s=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:s});const{gl:a}=this,o=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),n&&this._setDrawBuffers(n),a.bindFramebuffer(36160,o||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:r}=t;if(null===this.handle)return(0,u.h)(void 0===e&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),e!==this.width&&r!==this.height&&n.cM.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(r))();for(const n in this.attachments)this.attachments[n].resize({width:e,height:r});return this.width=e,this.height=r,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};e&&Object.keys(this.attachments).forEach((t=>{n[t]=null})),Object.assign(n,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const s in n){(0,u.h)(void 0!==s,"Misspelled framebuffer binding point?");const t=Number(s),e=n[t];let i=e;if(i)if(i instanceof a.Z)this._attachRenderbuffer({attachment:t,renderbuffer:i});else if(Array.isArray(e)){const[r,n=0,s=0]=e;i=r,this._attachTexture({attachment:t,texture:r,layer:n,level:s})}else this._attachTexture({attachment:t,texture:i,layer:0,level:0});else this._unattach(t);r&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(m(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),r=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),r}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:r,stencil:n,drawBuffers:i=[]}=t,s=this.gl.bindFramebuffer(36160,this.handle);return(e||r||n)&&(0,o.Z)(this.gl,{color:e,depth:r,stencil:n}),i.forEach(((t,e)=>{(0,o.$)(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return n.cM.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return n.cM.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return n.cM.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return n.cM.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return n.cM.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return n.cM.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:r=0,y:i=0,width:s,height:a}=t;const o=(0,n.KQ)(this.gl),h=o.bindFramebuffer(36008,this.handle),l=0===r&&0===i&&void 0===s&&void 0===a;return l?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,r,i,s,a),o.bindFramebuffer(36008,h),this}getAttachmentParameter(t,e,r){let n=this._getAttachmentParameterFallback(e);return null===n&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),r&&n>1e3&&(n=(0,c.km)(this.gl,n)),n}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const n={};for(const i of r){const r=e?(0,c.km)(this.gl,i):i;n[r]=this.getAttachmentParameter(t,i,e)}return n}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),r={};for(const n of e){const e=Number(n),i=t?(0,c.km)(this.gl,e):e;r[i]=this.getAttachmentParameters(e,t)}return r}show(){return"undefined"!==typeof window&&window.open((0,h.Km)(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>n.cM.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);const r=(0,h.Km)(this,{targetMaxHeight:100});return n.cM.image({logLevel:t,message:e,image:r},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,r,n,i){let o=null;return t&&(o=o||{},o[36064]=new s.Z(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:n,height:i,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),e&&r?(o=o||{},o[33306]=new a.Z(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:n,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new a.Z(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:n,height:i}),this.ownResources.push(o[36096])):r&&(0,u.h)(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof a.Z?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:r}=t;const{gl:n}=this;n.framebufferRenderbuffer(36160,e,36161,r.handle),this.attachments[e]=r}_attachTexture(t){let{attachment:e=36064,texture:r,layer:i,level:s}=t;const{gl:a}=this;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:const t=(0,n.KQ)(a);t.framebufferTextureLayer(36160,e,r.target,s,i);break;case 34067:const o=g(i);a.framebufferTexture2D(36160,e,o,r.handle,s);break;case 3553:a.framebufferTexture2D(36160,e,3553,r.handle,s);break;default:(0,u.h)(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[e]=r}_setReadBuffer(t){const e=(0,n.vd)(this.gl);e?e.readBuffer(t):(0,u.h)(36064===t||1029===t,d),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,r=(0,n.KQ)(e);if(r)r.drawBuffers(t);else{const r=e.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(t):(0,u.h)(1===t.length&&(36064===t[0]||1029===t[0]),d)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=(0,l.N$)(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function g(t){return t<34069?t+34069:t}function m(t){const e=f.STATUS||{};return e[t]||"Framebuffer error ".concat(t)}const b=[36049,36048,33296,33298,33299,33300,33301,33302,33303];f.ATTACHMENT_PARAMETERS=b},75433:function(t,e,r){r.d(e,{Z:function(){return W}});var n=r(87577),i=r(35008),s=r(53849),a=r(1418),o=r(94041),h=r(22525);const l={[5126]:w.bind(null,"uniform1fv",m,1,B),[35664]:w.bind(null,"uniform2fv",m,2,B),[35665]:w.bind(null,"uniform3fv",m,3,B),[35666]:w.bind(null,"uniform4fv",m,4,B),[5124]:w.bind(null,"uniform1iv",b,1,B),[35667]:w.bind(null,"uniform2iv",b,2,B),[35668]:w.bind(null,"uniform3iv",b,3,B),[35669]:w.bind(null,"uniform4iv",b,4,B),[35670]:w.bind(null,"uniform1iv",b,1,B),[35671]:w.bind(null,"uniform2iv",b,2,B),[35672]:w.bind(null,"uniform3iv",b,3,B),[35673]:w.bind(null,"uniform4iv",b,4,B),[35674]:w.bind(null,"uniformMatrix2fv",m,4,F),[35675]:w.bind(null,"uniformMatrix3fv",m,9,F),[35676]:w.bind(null,"uniformMatrix4fv",m,16,F),[35678]:x,[35680]:x,[5125]:w.bind(null,"uniform1uiv",p,1,B),[36294]:w.bind(null,"uniform2uiv",p,2,B),[36295]:w.bind(null,"uniform3uiv",p,3,B),[36296]:w.bind(null,"uniform4uiv",p,4,B),[35685]:w.bind(null,"uniformMatrix2x3fv",m,6,F),[35686]:w.bind(null,"uniformMatrix2x4fv",m,8,F),[35687]:w.bind(null,"uniformMatrix3x2fv",m,6,F),[35688]:w.bind(null,"uniformMatrix3x4fv",m,12,F),[35689]:w.bind(null,"uniformMatrix4x2fv",m,8,F),[35690]:w.bind(null,"uniformMatrix4x3fv",m,12,F),[35678]:x,[35680]:x,[35679]:x,[35682]:x,[36289]:x,[36292]:x,[36293]:x,[36298]:x,[36299]:x,[36300]:x,[36303]:x,[36306]:x,[36307]:x,[36308]:x,[36311]:x},c={},u={},d={},f=[0];function g(t,e,r,n){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(f[0]=t,t=f);const i=t.length;if(i%e&&a.cM.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof r)return t;let s=n[i];s||(s=new r(i),n[i]=s);for(let a=0;a<i;a++)s[a]=t[a];return s}function m(t,e){return g(t,e,Float32Array,c)}function b(t,e){return g(t,e,Int32Array,u)}function p(t,e){return g(t,e,Uint32Array,d)}function _(t,e,r){const n=l[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,t,e)}function y(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,r=t.match(e);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function A(t,e,r){for(const n in t){const i=t[n],s=!r||Boolean(r[n]);if(s&&!T(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(n),i),new Error("".concat(e," Bad uniform ").concat(n))}return!0}function T(t){return Array.isArray(t)||ArrayBuffer.isView(t)?E(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof i.Z||(t instanceof o.Z||t instanceof s.Z&&Boolean(t.texture))))}function v(t,e,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(t[e]){const n=t[e];for(let t=0,e=r.length;t<e;++t)n[t]=r[t]}else t[e]=r.slice();else t[e]=r}function E(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let r=0;r<e;++r)if(!Number.isFinite(t[r]))return!1;return!0}function x(){let t=null;return(e,r,n)=>{const i=t!==n;return i&&(e.uniform1i(r,n),t=n),i}}function w(t,e,r,n){let i=null,s=null;return(a,o,l)=>{const c=e(l,r),u=c.length;let d=!1;if(null===i)i=new Float32Array(u),s=u,d=!0;else{(0,h.h)(s===u,"Uniform length cannot change.");for(let t=0;t<u;++t)if(c[t]!==i[t]){d=!0;break}}return d&&(n(a,t,o,c),i.set(c)),d}}function B(t,e,r,n){t[e](r,n)}function F(t,e,r,n){t[e](r,!1,n)}function I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=t.match(r);return n?n[1]:e}const L=35632,S=35633;function P(t){switch(t){case L:return"fragment";case S:return"vertex";default:return"unknown type"}}function R(t,e,r,n){const i=t.split(/\r?\n/),s={},a={},o=n||I(e)||"(unnamed)",h="".concat(P(r)," shader ").concat(o);for(let c=0;c<i.length;c++){const e=i[c];if(e.length<=1)continue;const r=e.split(":"),n=r[0],o=parseInt(r[2],10);if(isNaN(o))throw new Error("GLSL compilation error in ".concat(h,": ").concat(t));"WARNING"!==n?s[o]=e:a[o]=e}const l=M(e);return{shaderName:h,errors:O(s,l),warnings:O(a,l)}}function O(t,e){let r="";for(let n=0;n<e.length;n++){const i=e[n];if((t[n+3]||t[n+2]||t[n+1])&&(r+="".concat(i,"\n"),t[n+1])){const e=t[n+1],i=e.split(":",3),s=i[0],a=parseInt(i[1],10)||0,o=e.substring(i.join(":").length+1).trim();r+=D("^^^ ".concat(s,": ").concat(o,"\n\n"),a)}}return r}function M(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const n=t.split(/\r?\n/),i=String(n.length+e-1).length;return n.map(((t,n)=>{const s=String(n+e),a=s.length,o=D(s,i-a);return o+r+t}))}function D(t,e){let r="";for(let n=0;n<e;++n)r+=" ";return"".concat(r).concat(t)}var N=r(74538);const C="Shader: GLSL source code must be a JavaScript string";class U extends n.Z{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,h.h)(!1),"unknown"}}constructor(t,e){(0,a.JD)(t),(0,h.h)("string"===typeof e.source,C);const r=I(e.source,null)||e.id||(0,N.hQ)("unnamed ".concat(U.getTypeName(e.shaderType)));super(t,{id:r}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const r=I(e,null);r&&(this.id=(0,N.hQ)(r)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(U.getTypeName(this.shaderType),":").concat(this.id)}getName(){return I(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);const e=this.getParameter(35713);if(!e){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:r,warnings:n}=R(t,this.source,this.shaderType,this.id);throw a.cM.error("GLSL compilation errors in ".concat(e,"\n").concat(r))(),a.cM.warn("GLSL compilation warnings in ".concat(e,"\n").concat(n))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class k extends U{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class z extends U{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}var H=r(14072),V=r(38522);class Z{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,r=e.getProgramParameter(t.handle,35721);for(let n=0;n<r;n++){const{name:r,type:i,size:s}=e.getActiveAttrib(t.handle,n),a=e.getAttribLocation(t.handle,r);a>=0&&this._addAttribute(a,r,i,s)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!(0,a.D0)(e))return;const r=e.getProgramParameter(t.handle,35971);for(let n=0;n<r;n++){const{name:r,type:i,size:s}=e.getTransformFeedbackVarying(t.handle,n);this._addVarying(n,r,i,s)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,r,n){const{type:i,components:s}=(0,V.hJ)(r),a={type:i,size:n*s};this._inferProperties(t,e,a);const o={location:t,name:e,accessor:new H.Z(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[t]=o,this.attributeInfosByName[o.name]=o}_inferProperties(t,e,r){/instance/i.test(e)&&(r.divisor=1)}_addVarying(t,e,r,n){const{type:i,components:s}=(0,V.hJ)(r),a=new H.Z({type:i,size:n*s}),o={location:t,name:e,accessor:a};this.varyingInfos.push(o),this.varyingInfosByName[o.name]=o}}var G=r(79579);const X=4,j=35981,Q=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class W extends n.Z{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",Q),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:r,fs:n,varyings:i,bufferMode:s=j}=t;return this.hash=e||"",this.vs="string"===typeof r?new k(this.gl,{id:"".concat(t.id,"-vs"),source:r}):r,this.fs="string"===typeof n?new z(this.gl,{id:"".concat(t.id,"-fs"),source:n}):n,(0,h.h)(this.vs instanceof k),(0,h.h)(this.fs instanceof z),this.uniforms={},this._textureUniforms={},i&&i.length>0&&((0,a.KQ)(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Z(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:r=4,vertexCount:n,offset:i=0,start:s,end:o,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:d=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:b={},uniforms:p,samplers:_}=t;if((p||_)&&(a.cM.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(p||{})),a.cM.priority>=e){const t=m?m.id:"default",i="mode=".concat((0,G.km)(this.gl,r)," verts=").concat(n," ")+"instances=".concat(u," indexType=").concat((0,G.km)(this.gl,c)," ")+"isInstanced=".concat(d," isIndexed=").concat(l," ")+"Framebuffer=".concat(t);a.cM.log(e,i)()}return(0,h.h)(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===n||d&&0===u)&&(f.bindForDraw(n,u,(()=>{if(void 0!==m&&(b=Object.assign({},b,{framebuffer:m})),g){const t=(0,V.$Z)(r);g.begin(t)}this._bindTextures(),(0,a.s8)(this.gl,b,(()=>{l&&d?this.gl2.drawElementsInstanced(r,n,c,i,u):l&&(0,a.D0)(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(r,s,o,n,c,i):l?this.gl.drawElements(r,n,c,i):d?this.gl2.drawArraysInstanced(r,i,n,u):this.gl.drawArrays(r,i,n)})),g&&g.end()})),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.cM.priority>=2&&A(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const r=t[e],n=this._uniformSetters[e];if(n){let t=r,a=!1;if(t instanceof s.Z&&(t=t.texture),t instanceof i.Z)if(a=this.uniforms[e]!==r,a){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);const r=t,{textureIndex:i}=n;r.bind(i),t=i,this._textureUniforms[e]=r}else t=n.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(n(t)||a)&&v(this.uniforms,e,r)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const r=this._textureUniforms[e];r.update(),t=t&&r.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),r={};for(const n of e){const t=this.gl.getShaderParameter(this.handle,35663);switch(t){case 35633:r.vs=new k({handle:n});break;case 35632:r.fs=new z({handle:n});break;default:}}return r}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=(0,N.hQ)(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),a.cM.time(X,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),a.cM.timeEnd(X,"linkProgram for ".concat(this._getName()))(),t.debug||a.cM.level>0){const e=t.getProgramParameter(this.handle,35714);if(!e)throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);const r=t.getProgramParameter(this.handle,35715);if(!r)throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const r=this.gl.getActiveUniform(this.handle,e),{name:n}=y(r.name);let i=t.getUniformLocation(this.handle,n);if(this._uniformSetters[n]=_(t,i,r),r.size>1)for(let e=0;e<r.size;e++)i=t.getUniformLocation(this.handle,"".concat(n,"[").concat(e,"]")),this._uniformSetters["".concat(n,"[").concat(e,"]")]=_(t,i,r)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}},14178:function(t,e,r){r.d(e,{Z:function(){return m}});var n=r(87577),i=r(44211),s=r(6948),a=r(1418),o=r(22525);const h=34918,l=34919,c=35007,u=36795,d=35976,f=35887,g=36202;class m extends n.Z{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=(0,a.D0)(t),n=(0,i.ag)(t,s.h.TIMER_QUERY);let h=r||n;for(const i of e)switch(i){case"queries":h=h&&r;break;case"timers":h=h&&n;break;default:(0,o.h)(!1)}return h}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(c)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?g:f)}beginTransformFeedbackQuery(){return this.begin(d)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,l);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(u)}getResult(){return this.gl2.getQueryParameter(this.handle,h)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((r,n)=>{const i=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):e++>t?(n("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return m.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}},94041:function(t,e,r){r.d(e,{Z:function(){return l}});var n=r(87577);const i="EXT_color_buffer_float";var s={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:i,bpp:2},[33327]:{gl2:i,bpp:4},[34842]:{gl2:i,bpp:8},[33326]:{gl2:i,bpp:4},[33328]:{gl2:i,bpp:8},[34836]:{gl2:i,bpp:16},[35898]:{gl2:i,bpp:4}},a=r(1418),o=r(22525);function h(t,e,r){const n=r[e];if(!n)return!1;const i=(0,a.D0)(t)&&n.gl2||n.gl1;return"string"===typeof i?t.getExtension(i):i}class l extends n.Z{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||h(t,e,s)}static getSamplesForFormat(t,e){let{format:r}=e;return t.getInternalformatParameter(36161,r,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:r=1,height:n=1,samples:i=0}=t;return(0,o.h)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&(0,a.D0)(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,r,n):this.gl.renderbufferStorage(36161,e,r,n),this.format=e,this.width=r,this.height=n,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*s[this.format].bpp),this}resize(t){let{width:e,height:r}=t;return e!==this.width||r!==this.height?this.initialize({width:e,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);const e=this.gl.getRenderbufferParameter(36161,t);return e}}},87577:function(t,e,r){r.d(e,{Z:function(){return c}});var n=r(1418),i=r(49835),s=r(79579),a=r(22525),o=r(74538),h=r(37469);const l="Resource subclass must define virtual methods";class c{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.JD)(t);const{id:r,userData:i={}}=e;this.gl=t,this.gl2=t,this.id=r||(0,o.hQ)(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=(0,s.sF)(this.gl,t),(0,a.h)(t);const r=this.constructor.PARAMETERS||{},i=r[t];if(i){const t=(0,n.D0)(this.gl),e=(!("webgl2"in i)||t)&&(!("extension"in i)||this.gl.getExtension(i.extension));if(!e){const e=i.webgl1,r="webgl2"in i?i.webgl2:i.webgl1,n=t?r:e;return n}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:r}=t,i=this.constructor.PARAMETERS||{},a=(0,n.D0)(this.gl),o={},h=e||Object.keys(i);for(const n of h){const e=i[n],h=e&&(!("webgl2"in e)||a)&&(!("extension"in e)||this.gl.getExtension(e.extension));if(h){const i=r?(0,s.km)(this.gl,n):n;o[i]=this.getParameter(n,t),r&&"GLenum"===e.type&&(o[i]=(0,s.km)(this.gl,o[i]))}}return o}setParameter(t,e){t=(0,s.sF)(this.gl,t),(0,a.h)(t);const r=this.constructor.PARAMETERS||{},i=r[t];if(i){const t=(0,n.D0)(this.gl),r=(!("webgl2"in i)||t)&&(!("extension"in i)||this.gl.getExtension(i.extension));if(!r)throw new Error("Parameter not available on this platform");"GLenum"===i.type&&(e=(0,s.sF)(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,r){return(0,h.F)(this,t,e,r)}initialize(t){}_createHandle(){throw new Error(l)}_deleteHandle(){throw new Error(l)}_bindHandle(t){throw new Error(l)}_getOptsFromHandle(){throw new Error(l)}_getParameter(t,e){throw new Error(l)}_setParameter(t,e){throw new Error(l)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=i.lR.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag],e=i.lR.get("Resource Counts");e.get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=i.lR.get("Memory Usage".concat(r));n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=i.lR.get("Memory Usage".concat(e));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength)}}},51621:function(t,e,r){r.d(e,{Z:function(){return h}});var n=r(1418),i=r(35008),s=r(22525);let a="";function o(t,e){return(0,s.h)("string"===typeof t),t=a+t,new Promise(((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){n(i)}}))}class h extends i.Z{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return i.Z.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.JD)(t),(e instanceof Promise||"string"===typeof e)&&(e={data:e}),"string"===typeof e.data&&(e=Object.assign({},e,{data:o(e.data)})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}},33889:function(t,e,r){r.d(e,{C:function(){return s},KR:function(){return h},ae:function(){return i},br:function(){return o},pH:function(){return a}});var n=r(1418);const i={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},s={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},a={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function o(t,e){const r=i[e];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;const s=(0,n.D0)(t)&&r.gl2||r.gl1;return"string"===typeof s?t.getExtension(s):s}function h(t,e){const r=i[e];switch(r&&r.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},35008:function(t,e,r){r.d(e,{Z:function(){return u}});var n=r(1418),i=r(87577),s=r(53478),a=r(33889),o=r(22525),h=r(74538);const l=[9729,9728],c=globalThis.WebGLBuffer||function(){};class u extends i.Z{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:r,linearFiltering:n}=e;let i=!0;return r&&(i=i&&(0,a.br)(t,r),i=i&&(!n||(0,a.KR)(t,r))),i}constructor(t,e){const{id:r=(0,h.hQ)("texture"),handle:n,target:i}=e;super(t,{id:r,handle:n}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const r="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(r&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:i=null,format:s=6408,border:a=0,recreate:o=!1,parameters:h={},pixelStore:l={},textureUnit:c}=t;e||(e=i);let{width:u,height:d,dataFormat:f,type:g,compressed:m=!1,mipmaps:b=!0}=t;const{depth:p=0}=t;return({width:u,height:d,compressed:m,dataFormat:f,type:g}=this._deduceParameters({format:s,type:g,dataFormat:f,compressed:m,data:e,width:u,height:d})),this.width=u,this.height=d,this.depth=p,this.format=s,this.type=g,this.dataFormat=f,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),b&&this._isNPOT()&&(n.cM.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),b=!1,this._updateForNPOT(h)),this.mipmaps=b,this.setImageData({data:e,width:u,height:d,depth:p,format:s,type:g,dataFormat:f,border:a,mipmaps:b,parameters:l,compressed:m}),b&&this.generateMipmap(),this.setParameters(h),o&&(this.data=e),r&&(this._video={video:e,parameters:h,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:r}=this._video;if(r===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:r,mipmaps:n=!1}=t;return r!==this.width||e!==this.height?this.initialize({width:r,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:n}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(n.cM.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),(0,n.s8)(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:r=null,level:i=0,format:s=this.format,border:h=this.border,offset:l=0,parameters:c={}}=t;let{data:u=null,type:d=this.type,width:f=this.width,height:g=this.height,dataFormat:m=this.dataFormat,compressed:b=!1}=t;u||(u=r),({type:d,dataFormat:m,compressed:b,width:f,height:g}=this._deduceParameters({format:s,type:d,dataFormat:m,compressed:b,data:u,width:f,height:g}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let _,y=null;({data:u,dataType:y}=this._getDataType({data:u,compressed:b}));let A=0;if((0,n.s8)(this.gl,c,(()=>{switch(y){case"null":p.texImage2D(e,i,s,f,g,h,m,d,u);break;case"typed-array":p.texImage2D(e,i,s,f,g,h,m,d,u,l);break;case"buffer":_=(0,n.KQ)(p),_.bindBuffer(35052,u.handle||u),_.texImage2D(e,i,s,f,g,h,m,d,l),_.bindBuffer(35052,null);break;case"browser-object":(0,n.D0)(p)?p.texImage2D(e,i,s,f,g,h,m,d,u):p.texImage2D(e,i,s,m,d,u);break;case"compressed":for(const[t,r]of u.entries())p.compressedTexImage2D(e,t,r.format,r.width,r.height,h,r.data),A+=r.levelSize;break;default:(0,o.h)(!1,"Unknown image data type")}})),"compressed"===y)this._trackAllocatedMemory(A,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=a.C[this.dataFormat]||4,e=a.pH[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:r=null,data:i=null,x:a=0,y:h=0,width:l=this.width,height:u=this.height,level:d=0,format:f=this.format,type:g=this.type,dataFormat:m=this.dataFormat,compressed:b=!1,offset:p=0,border:_=this.border,parameters:y={}}=t;if(({type:g,dataFormat:m,compressed:b,width:l,height:u}=this._deduceParameters({format:f,type:g,dataFormat:m,compressed:b,data:i,width:l,height:u})),(0,o.h)(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const t=i;i=t.data,l=t.shape[0],u=t.shape[1]}i instanceof s.Z&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),(0,n.s8)(this.gl,y,(()=>{if(b)this.gl.compressedTexSubImage2D(e,d,a,h,l,u,f,i);else if(null===i)this.gl.texSubImage2D(e,d,a,h,l,u,m,g,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,d,a,h,l,u,m,g,i,p);else if(i instanceof c){const t=(0,n.KQ)(this.gl);t.bindBuffer(35052,i),t.texSubImage2D(e,d,a,h,l,u,m,g,p),t.bindBuffer(35052,null)}else if((0,n.D0)(this.gl)){const t=(0,n.KQ)(this.gl);t.texSubImage2D(e,d,a,h,l,u,m,g,i)}else this.gl.texSubImage2D(e,d,a,h,m,g,i)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return n.cM.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:r=!1}=t;return r?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof s.Z?{data:e.handle,dataType:"buffer"}:e instanceof c?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:r}=t;let{width:n,height:i,dataFormat:s,type:o,compressed:h}=t;const l=a.ae[e];return s=s||l&&l.dataFormat,o=o||l&&l.types[0],h=h||l&&l.compressed,({width:n,height:i}=this._deduceImageSize(r,n,i)),{dataFormat:s,type:o,compressed:h,width:n,height:i,format:e,data:r}}_deduceImageSize(t,e,r){let n;return n="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:r}:{width:e>=0?e:1,height:r>=0?r:1},(0,o.h)(n,"Could not deduced texture size"),(0,o.h)(void 0===e||n.width===e,"Deduced texture width does not match supplied width"),(0,o.h)(void 0===r||n.height===r,"Deduced texture height does not match supplied height"),n}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:(0,o.h)(!1);break;default:this.gl.texParameteri(this.target,t,e);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(0,n.D0)(this.gl)&&(!(!this.width||!this.height)&&(!(0,h.wt)(this.width)||!(0,h.wt)(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===l.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071);break;default:break}return e}}},51053:function(t,e,r){r.d(e,{Z:function(){return o}});var n=r(1418),i=r(87577),s=r(53478),a=r(74538);class o extends i.Z{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return(0,n.D0)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.KQ)(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,a.nK)(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const r=this._getVaryingIndex(t),{buffer:i,byteSize:s,byteOffset:a}=this._getBufferParams(e);return r<0?(this.unused[t]=i,n.cM.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[r]=e,this.bindOnUse||this._bindBuffer(r,i,a,s),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,r,n;return t instanceof s.Z===!1?(n=t.buffer,r=t.byteSize,e=t.byteOffset):n=t,void 0===e&&void 0===r||(e=e||0,r=r||n.byteLength-e),{buffer:n,byteOffset:e,byteSize:r}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:r,byteOffset:n}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,n,r)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==n?this.gl.bindBufferRange(35982,t,i,r,n):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}},55045:function(t,e,r){r.d(e,{Z:function(){return y}});var n=r(1418),i=r(14072),s=r(53478),a=r(87577);let o=null;function h(t){return(!o||o.byteLength<t)&&(o=new ArrayBuffer(t)),o}function l(t,e){const r=h(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function c(t){let{target:e,source:r,start:n=0,count:i=1}=t;const s=r.length,a=i*s;let o=0;for(let h=n;o<s;o++)e[h++]=r[o];while(o<a)o<a-o?(e.copyWithin(n+o,n,n+o),o*=2):(e.copyWithin(n+o,n,n+a-o),o=a);return e}var u=r(22525),d=r(3485);const f="elements must be GL.ELEMENT_ARRAY_BUFFER";class g extends a.Z{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.constantAttributeZero||((0,n.D0)(t)||"Chrome"===(0,d.Z)())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new g(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return g.MAX_ATTRIBUTES=g.MAX_ATTRIBUTES||t.getParameter(34921),g.MAX_ATTRIBUTES}static setConstant(t,e,r){switch(r.constructor){case Float32Array:g._setConstantFloatArray(t,e,r);break;case Int32Array:g._setConstantIntArray(t,e,r);break;case Uint32Array:g._setConstantUintArray(t,e,r);break;default:(0,u.h)(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return g.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,u.h)(!t||34963===t.target,f),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,r){if(34963===e.target)return this.setElementBuffer(e,r);const{size:i,type:s,stride:a,offset:o,normalized:h,integer:l,divisor:c}=r,{gl:d,gl2:f}=this;return t=Number(t),this.bind((()=>{d.bindBuffer(34962,e.handle),l?((0,u.h)((0,n.D0)(d)),f.vertexAttribIPointer(t,i,s,a,o)):d.vertexAttribPointer(t,i,s,h,a,o),d.enableVertexAttribArray(t),f.vertexAttribDivisor(t,c||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=!e&&0===t&&!g.isSupported(this.gl,{constantAttributeZero:!0});return r||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const r=this._normalizeConstantArrayValue(e),n=r.byteLength*t,i=r.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new s.Z(this.gl,n),a=a||this.buffer.reallocate(n),a=a||!this._compareConstantArrayValues(r,this.bufferValue),a){const t=l(e.constructor,i);c({target:t,source:r,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}static _setConstantFloatArray(t,e,r){switch(r.length){case 1:t.vertexAttrib1fv(e,r);break;case 2:t.vertexAttrib2fv(e,r);break;case 3:t.vertexAttrib3fv(e,r);break;case 4:t.vertexAttrib4fv(e,r);break;default:(0,u.h)(!1)}}static _setConstantIntArray(t,e,r){switch((0,u.h)((0,n.D0)(t)),r.length){case 1:t.vertexAttribI1iv(e,r);break;case 2:t.vertexAttribI2iv(e,r);break;case 3:t.vertexAttribI3iv(e,r);break;case 4:t.vertexAttribI4iv(e,r);break;default:(0,u.h)(!1)}}static _setConstantUintArray(t,e,r){switch((0,u.h)((0,n.D0)(t)),r.length){case 1:t.vertexAttribI1uiv(e,r);break;case 2:t.vertexAttribI2uiv(e,r);break;case 3:t.vertexAttribI3uiv(e,r);break;case 4:t.vertexAttribI4uiv(e,r);break;default:(0,u.h)(!1)}}_createHandle(){const t=this.gl;return t.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:r}=e;return(0,u.h)(Number.isFinite(r)),this.bind((()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(r,t);default:return this.gl.getVertexAttrib(r,t)}}))}}var m=r(37469);const b="VertexArray: attributes must be Buffers or constants (i.e. typed array)",p=/^(.+)__LOCATION_([0-9]+)$/,_=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class y{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.id||e.program&&e.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new g(t),(0,m.F)(this,"VertexArray","v6.0",_),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const r=t[e];this._setAttribute(e,r)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,r);const{location:n,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,r);return n>=0&&(this.values[n]=e,this.accessors[n]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(n,e,i)),this}setConstant(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:n,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},r));return n>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[n]=e,this.accessors[n]=i,this.clearDrawParams(),this.vertexArrayObject.enable(n,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new s.Z(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof s.Z&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof s.Z&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,r){let n;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),n=r()})),n}_resolveLocationAndAccessor(t,e,r,s){const a={location:-1,accessor:null},{location:o,name:h}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,n.cM.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),a;const l=this._getAttributeInfo(h||o);if(!l)return a;const c=this.accessors[o]||{},d=i.Z.resolve(l.accessor,c,r,s),{size:f,type:g}=d;return(0,u.h)(Number.isFinite(f)&&Number.isFinite(g)),{location:o,accessor:d}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const r=p.exec(t),n=r?r[1]:t,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(n)+i,name:n}:{location:-1}}_setAttribute(t,e){if(e instanceof s.Z)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof s.Z){const r=e[0],n=e[1];this.setBuffer(t,r,n)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const r=e;this.setConstant(t,r)}else{if(!(e.buffer instanceof s.Z))throw new Error(b);{const r=e;this.setBuffer(t,r.buffer,r)}}}_setConstantAttributes(t,e){const r=Math.max(0|t,0|e);let n=this.values[0];ArrayBuffer.isView(n)&&this._setConstantAttributeZero(n,r);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)n=this.values[i],ArrayBuffer.isView(n)&&this._setConstantAttribute(i,n)}_setConstantAttributeZero(t,e){if(g.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const r=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(t,e){g.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const r=this.values[e],n=this.accessors[e];if(!r)return;const{divisor:i}=n,a=i>0;if(t.isInstanced=t.isInstanced||a,r instanceof s.Z){const e=r;if(a){const r=e.getVertexCount(n);t.instanceCount=Math.min(t.instanceCount,r)}else{const r=e.getVertexCount(n);t.vertexCount=Math.min(t.vertexCount,r)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.cM.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}},3124:function(t,e,r){r.d(e,{n:function(){return i}});var n=r(38522);function i(t){const e={},r="Accessors for ".concat(t.id);for(const n of t.attributeInfos)if(n){const t=s(n);e["in ".concat(t)]={[r]:JSON.stringify(n.accessor)}}for(const n of t.varyingInfos)if(n){const t=s(n);e["out ".concat(t)]={[r]:JSON.stringify(n.accessor)}}return e}function s(t){const{type:e,size:r}=t.accessor,i=(0,n.jG)(e,r);return i?"".concat(i.name," ").concat(t.name):t.name}},49258:function(t,e,r){r.d(e,{d:function(){return s}});var n=r(22525),i=r(89561);function s(t){let{header:e="Uniforms",program:r,uniforms:s,undefinedOnly:o=!1}=t;(0,n.h)(r);const h=".*_.*",l=".*Matrix",c=r._uniformSetters,u={},d=Object.keys(c).sort();let f=0;for(const n of d)n.match(h)||n.match(l)||a({table:u,header:e,uniforms:s,uniformName:n,undefinedOnly:o})&&f++;for(const n of d)n.match(l)&&a({table:u,header:e,uniforms:s,uniformName:n,undefinedOnly:o})&&f++;for(const n of d)u[n]||a({table:u,header:e,uniforms:s,uniformName:n,undefinedOnly:o})&&f++;let g=0;const m={};if(!o)for(const n in s){const t=s[n];u[n]||(g++,m[n]={Type:"NOT USED: ".concat(t),[e]:(0,i.B)(t)})}return{table:u,count:f,unusedTable:m,unusedCount:g}}function a(t){let{table:e,header:r,uniforms:n,uniformName:s,undefinedOnly:a}=t;const h=n[s],l=o(h);return(!a||!l)&&(e[s]={[r]:l?(0,i.B)(h):"N/A","Uniform Type":l?h:"NOT PROVIDED"},!0)}function o(t){return void 0!==t&&null!==t}},61713:function(t,e,r){r.d(e,{L:function(){return o}});var n=r(53478),i=r(79579),s=r(38522),a=r(89561);function o(t){let{vertexArray:e,header:r="Attributes"}=t;if(!e.configuration)return{};const n={};e.elements&&(n.ELEMENT_ARRAY_BUFFER=h(e,e.elements,null,r));const i=e.values;for(const s in i){const t=e._getAttributeInfo(s);if(t){let a="".concat(s,": ").concat(t.name);const o=e.accessors[t.location];o&&(a="".concat(s,": ").concat(l(t.name,o))),n[a]=h(e,i[s],o,r)}}return n}function h(t,e,r,s){const{gl:o}=t;if(!e)return{[s]:"null","Format ":"N/A"};let h,l,c,u="NOT PROVIDED",d=1,f=0,g=0;if(r&&(u=r.type,d=r.size,u=String(u).replace("Array",""),h=-1!==u.indexOf("nt")),e instanceof n.Z){const t=e,{data:n,changed:m}=t.getDebugData();let b;if(l=m?"*":"",c=n,g=t.byteLength,f=g/n.BYTES_PER_ELEMENT/d,r){const t=r.divisor>0;b="".concat(t?"I ":"P "," ").concat(f," (x").concat(d,"=").concat(g," bytes ").concat((0,i.km)(o,u),")")}else h=!0,b="".concat(g," bytes");return{[s]:"".concat(l).concat((0,a.B)(c,{size:d,isInteger:h})),"Format ":b}}return c=e,d=e.length,u=String(e.constructor.name).replace("Array",""),h=-1!==u.indexOf("nt"),{[s]:"".concat((0,a.B)(c,{size:d,isInteger:h})," (constant)"),"Format ":"".concat(d,"x").concat(u," (constant)")}}function l(t,e){const{type:r,size:n}=e,i=(0,s.jG)(r,n);return i?"".concat(t," (").concat(i.name,")"):t}},44211:function(t,e,r){r.d(e,{N$:function(){return l},U6:function(){return o},ag:function(){return h}});var n=r(6948),i=r(1418),s=r(22525);const a=2;function o(t,e){return h(t,e)}function h(t,e){return e=Array.isArray(e)?e:[e],e.every((e=>c(t,e)))}function l(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in n.Z)void 0===t.luma.caps[e]&&(t.luma.caps[e]=c(t,e));return t.luma.caps}function c(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=u(t,e)),t.luma.caps[e]||i.cM.log(a,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function u(t,e){const r=n.Z[e];let a;(0,s.h)(r,e);const o=(0,i.D0)(t)&&r[1]||r[0];if("function"===typeof o)a=o(t);else if(Array.isArray(o)){a=!0;for(const e of o)a=a&&Boolean(t.getExtension(e))}else"string"===typeof o?a=Boolean(t.getExtension(o)):"boolean"===typeof o?a=o:(0,s.h)(!1);return a}},6948:function(t,e,r){r.d(e,{h:function(){return s}});var n=r(53849),i=r(51621);const s={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function a(t){const e=new i.Z(t,{format:6408,type:5126,dataFormat:6408}),r=new n.Z(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),s=r.getStatus();return e.delete(),r.delete(),36053===s}e["Z"]={[s.WEBGL2]:[!1,!0],[s.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[s.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[s.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[s.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[s.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[s.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[s.FLOAT_BLEND]:["EXT_float_blend"],[s.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[s.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[s.TEXTURE_FLOAT]:["OES_texture_float",!0],[s.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[s.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[s.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[s.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[s.COLOR_ATTACHMENT_RGBA32F]:[a,"EXT_color_buffer_float"],[s.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[s.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[s.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[s.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[s.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[s.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]}},27588:function(t,e,r){function n(t){let e=100;const r=t.match(/[^\s]+/g);if(r.length>=2&&"#version"===r[0]){const t=parseInt(r[1],10);Number.isFinite(t)&&(e=t)}return e}r.d(e,{Z:function(){return n}})},49835:function(t,e,r){r.d(e,{lR:function(){return l}});var n=r(1418),i=r(50009),s=r(93370);const a="8.5.19",o="set luma.log.level=1 (or higher) to trace rendering";class h{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new i.jk({id:t})),this.stats.get(t)}}const l=new h;if(globalThis.luma&&globalThis.luma.VERSION!==a)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(a));globalThis.luma||((0,s.Z)()&&n.cM.log(1,"luma.gl ".concat(a," - ").concat(o))(),globalThis.luma=globalThis.luma||{VERSION:a,version:a,log:n.cM,stats:l,globals:{modules:{},nodeIO:{}}});globalThis.luma},22525:function(t,e,r){function n(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}r.d(e,{h:function(){return n}})},82610:function(t,e,r){r.d(e,{k:function(){return i}});var n=r(1418);function i(t,e,r){const{removedProps:i={},deprecatedProps:s={},replacedProps:a={}}=r;for(const h in i)if(h in e){const e=i[h],r=e?"".concat(t,".").concat(i[h]):"N/A";n.cM.removed("".concat(t,".").concat(h),r)()}for(const h in s)if(h in e){const e=s[h];n.cM.deprecated("".concat(t,".").concat(h),"".concat(t,".").concat(e))()}let o=null;for(const h in a)if(h in e){const r=a[h];n.cM.deprecated("".concat(t,".").concat(h),"".concat(t,".").concat(r))(),o=o||Object.assign({},e),o[r]=e[h],delete o[h]}return o||e}},89561:function(t,e,r){function n(t,e){const{maxElts:r=16,size:n=1}=e;let s="[";for(let o=0;o<t.length&&o<r;++o)o>0&&(s+=",".concat(o%n===0?" ":"")),s+=i(t[o],e);const a=t.length>r?"...":"]";return"".concat(s).concat(a)}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=1e-16,{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return n(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<r)return i?"0":"0.";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const s=t.toPrecision(2),a=s.indexOf(".0");return a===s.length-2?s.slice(0,-1):s}r.d(e,{B:function(){return i}})},37469:function(t,e,r){r.d(e,{F:function(){return i}});var n=r(1418);function i(t,e,r,i){const s="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),a=Object.getPrototypeOf(t);i.forEach((t=>{a.methodName||(a[t]=()=>{throw n.cM.removed("Calling removed method ".concat(e,".").concat(t,": "),s)(),new Error(t)})}))}},74538:function(t,e,r){r.d(e,{hQ:function(){return s},nK:function(){return o},wt:function(){return a}});var n=r(22525);const i={};function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";i[t]=i[t]||1;const e=i[t]++;return"".concat(t,"-").concat(e)}function a(t){return(0,n.h)("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function o(t){let e=!0;for(const r in t){e=!1;break}return e}},38522:function(t,e,r){r.d(e,{$Z:function(){return H},hJ:function(){return V},jG:function(){return Z}});var n=r(22525);const i=5120,s=5121,a=5122,o=5123,h=0,l=1,c=2,u=3,d=4,f=5,g=6,m=5126,b=35664,p=35665,_=35666,y=5124,A=35667,T=35668,v=35669,E=5125,x=36294,w=36295,B=36296,F=35670,I=35671,L=35672,S=35673,P=35674,R=35675,O=35676,M=35685,D=35686,N=35687,C=35688,U=35689,k=35690,z={[m]:[m,1,"float"],[b]:[m,2,"vec2"],[p]:[m,3,"vec3"],[_]:[m,4,"vec4"],[y]:[y,1,"int"],[A]:[y,2,"ivec2"],[T]:[y,3,"ivec3"],[v]:[y,4,"ivec4"],[E]:[E,1,"uint"],[x]:[E,2,"uvec2"],[w]:[E,3,"uvec3"],[B]:[E,4,"uvec4"],[F]:[m,1,"bool"],[I]:[m,2,"bvec2"],[L]:[m,3,"bvec3"],[S]:[m,4,"bvec4"],[P]:[m,8,"mat2"],[M]:[m,8,"mat2x3"],[D]:[m,8,"mat2x4"],[R]:[m,12,"mat3"],[N]:[m,12,"mat3x2"],[C]:[m,12,"mat3x4"],[O]:[m,16,"mat4"],[U]:[m,16,"mat4x2"],[k]:[m,16,"mat4x3"]};function H(t){switch(t){case h:return h;case l:return l;case u:return l;case c:return l;case d:return d;case f:return d;case g:return d;default:return(0,n.h)(!1),0}}function V(t){const e=z[t];if(!e)return null;const[r,n]=e;return{type:r,components:n}}function Z(t,e){switch(t){case i:case s:case a:case o:t=m;break;default:}for(const r in z){const[n,i,s]=z[r];if(n===t&&i===e)return{glType:r,name:s}}return null}},79579:function(t,e,r){r.d(e,{km:function(){return s},sF:function(){return i}});var n=r(22525);function i(t,e){if("string"!==typeof e)return e;const r=Number(e);if(!isNaN(r))return r;e=e.replace(/^.*\./,"");const i=t[e];return(0,n.h)(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function s(t,e){e=Number(e);for(const r in t)if(t[r]===e)return"GL.".concat(r);return String(e)}},37178:function(t,e,r){function n(t){return"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function i(t){return"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}r.d(e,{U:function(){return n},W:function(){return i}})},73462:function(t,e,r){r.d(e,{h:function(){return f},Y:function(){return g}});var n=r(51621),i=r(1418),s=r(35008);const a=[34069,34070,34071,34072,34073,34074];class o extends s.Z{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.JD)(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(r)})),this}subImage(t){let{face:e,data:r,x:n=0,y:i=0,mipmapLevel:s=0}=t;return this._subImage({target:e,data:r,x:n,y:i,mipmapLevel:s})}async setCubeMapImageData(t){let{width:e,height:r,pixels:n,data:s,border:o=0,format:h=6408,type:l=5121}=t;const{gl:c}=this,u=n||s,d=await Promise.all(a.map((t=>{const e=u[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),a.forEach(((t,n)=>{d[n].length>1&&!1!==this.opts.mipmaps&&i.cM.warn("".concat(this.id," has mipmap and multiple LODs."))(),d[n].forEach(((n,i)=>{e&&r?c.texImage2D(t,i,h,e,r,o,h,l,n):c.texImage2D(t,i,h,h,l,n)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:r,height:n,pixels:i,data:s,border:a=0,format:o=6408,type:h=5121}=t,{gl:l}=this,c=i||s;return this.bind(),c instanceof Promise?c.then((r=>this.setImageDataForFace(Object.assign({},t,{face:e,data:r,pixels:r})))):this.width||this.height?l.texImage2D(e,0,o,r,n,a,o,h,c):l.texImage2D(e,0,o,o,h,c),this}}o.FACES=a;var h=r(33889),l=r(53478);class c extends s.Z{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return(0,i.D0)(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.KQ)(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:r=6408,width:n,height:s,depth:a=1,border:o=0,format:c,type:u=5121,offset:d=0,data:f,parameters:g={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,i.s8)(this.gl,g,(()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,e,r,n,s,a,o,c,u,f),f instanceof l.Z&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,e,r,n,s,a,o,c,u,d))})),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const t=h.C[this.dataFormat]||4,e=h.pH[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}var u=r(53849),d=r(22525);function f(t,e){(0,d.h)(t instanceof n.Z||t instanceof o||t instanceof c);const r=t.constructor,{gl:i,width:s,height:a,format:h,type:l,dataFormat:u,border:f,mipmaps:g}=t,m=Object.assign({width:s,height:a,format:h,type:l,dataFormat:u,border:f,mipmaps:g},e);return new r(i,m)}function g(t,e){const{gl:r,width:n,height:i,id:s}=t,a=new u.Z(r,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:n,height:i,attachments:{[36064]:t}}));return a}},9335:function(t,e,r){r.d(e,{KS:function(){return o},O:function(){return i},c$:function(){return a},vN:function(){return s}});const n="Failed to deduce GL constant from typed array";function i(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(n)}}function s(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(t){let{data:e,width:r,height:n,bytesPerPixel:i=4,temp:s}=t;const a=r*i;s=s||new Uint8Array(a);for(let o=0;o<n/2;++o){const t=o*a,r=(n-o-1)*a;s.set(e.subarray(t,t+a)),e.copyWithin(t,r,r+a),e.set(s,r)}}function o(t){let{data:e,width:r,height:n}=t;const i=Math.round(r/2),s=Math.round(n/2),a=new Uint8Array(i*s*4);for(let o=0;o<s;o++)for(let t=0;t<i;t++)for(let n=0;n<4;n++)a[4*(o*i+t)+n]=e[4*(2*o*r+2*t)+n];return{data:a,width:i,height:s}}},39875:function(t,e,r){r.d(e,{Z:function(){return i}});const n=1e20;class i{constructor({fontSize:t=24,buffer:e=3,radius:r=8,cutoff:n=.25,fontFamily:i="sans-serif",fontWeight:s="normal",fontStyle:a="normal"}={}){this.buffer=e,this.cutoff=n,this.radius=r;const o=this.size=t+4*e,h=this._createCanvas(o),l=this.ctx=h.getContext("2d",{willReadFrequently:!0});l.font=`${a} ${s} ${t}px ${i}`,l.textBaseline="alphabetic",l.textAlign="left",l.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:a,actualBoundingBoxRight:o}=this.ctx.measureText(t),h=Math.ceil(r),l=0,c=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-a))),u=Math.min(this.size-this.buffer,h+Math.ceil(i)),d=c+2*this.buffer,f=u+2*this.buffer,g=Math.max(d*f,0),m=new Uint8ClampedArray(g),b={data:m,width:d,height:f,glyphWidth:c,glyphHeight:u,glyphTop:h,glyphLeft:l,glyphAdvance:e};if(0===c||0===u)return b;const{ctx:p,buffer:_,gridInner:y,gridOuter:A}=this;p.clearRect(_,_,c,u),p.fillText(t,_,_+h);const T=p.getImageData(_,_,c,u);A.fill(n,0,g),y.fill(0,0,g);for(let s=0;s<u;s++)for(let t=0;t<c;t++){const e=T.data[4*(s*c+t)+3]/255;if(0===e)continue;const r=(s+_)*d+t+_;if(1===e)A[r]=0,y[r]=n;else{const t=.5-e;A[r]=t>0?t*t:0,y[r]=t<0?t*t:0}}s(A,0,0,d,f,d,this.f,this.v,this.z),s(y,_,_,c,u,d,this.f,this.v,this.z);for(let n=0;n<g;n++){const t=Math.sqrt(A[n])-Math.sqrt(y[n]);m[n]=Math.round(255-255*(t/this.radius+this.cutoff))}return b}}function s(t,e,r,n,i,s,o,h,l){for(let c=e;c<e+n;c++)a(t,r*s+c,s,i,o,h,l);for(let c=r;c<r+i;c++)a(t,c*s+e,1,n,o,h,l)}function a(t,e,r,i,s,a,o){a[0]=0,o[0]=-n,o[1]=n,s[0]=t[e];for(let h=1,l=0,c=0;h<i;h++){s[h]=t[e+h*r];const i=h*h;do{const t=a[l];c=(s[h]-s[t]+i-t*t)/(h-t)/2}while(c<=o[l]&&--l>-1);l++,a[l]=h,o[l]=c,o[l+1]=n}for(let n=0,h=0;n<i;n++){while(o[h+1]<n)h++;const i=a[h],l=n-i;t[e+n*r]=s[i]+l*l}}}}]);
//# sourceMappingURL=chunk-vendors-54f09f6f-legacy.0341e4ab.js.map