"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[6568],{4157:function(e,t,i){var n=i(11491),r=i(60216),o=i(59947),a=i(39960),l=i(52975),s=i(62200),d=i(82982),c=i(12572),u=i(14459),h=i(8962),p=i(78318),Z=i(78757),f=i(68985),m=i(9407),v=i(4260),g=i(60473),y=i(92564),_=i(13222),w=i(44011),k=i(11249),C=i(20174),b=i(19069),x=i(612),E=i(70265),M=i(47890),T=i(69516),O=i(3081),P=i(42956);function S(e){return r.Z.fromDegrees(e[0],e[1],e[2])}var L,N={"urn:ogc:def:crs:OGC:1.3:CRS84":S,"EPSG:4326":S,"urn:ogc:def:crs:EPSG::4326":S},I={},R={},U=48,A=o.Z.ROYALBLUE,B=o.Z.YELLOW,D=2,G=o.Z.fromBytes(255,255,0,100),W=!1,V={small:24,medium:48,large:64},F=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function K(e,t){var i="";for(var n in e)if(e.hasOwnProperty(n)){if(n===t||-1!==F.indexOf(n))continue;var r=e[n];(0,d.Z)(r)&&(i+="object"===typeof r?"<tr><th>"+n+"</th><td>"+K(r)+"</td></tr>":"<tr><th>"+n+"</th><td>"+r+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i}function j(e,t,i){var n;return function(r,o){return(0,d.Z)(n)||(n=e(t,i)),n}}function H(e,t){return new k.Z(j(K,e,t),!0)}function q(e,t,i){var n=e.id;if((0,d.Z)(n)&&"Feature"===e.type){var r=2,o=n;while((0,d.Z)(t.getById(o)))o=n+"_"+r,r++;n=o}else n=(0,a.Z)();var l=t.getOrCreateEntity(n),s=e.properties;if((0,d.Z)(s)){var c;l.properties=s;var u=s.title;if((0,d.Z)(u))l.name=u,c="title";else{var h=Number.MAX_VALUE;for(var p in s)if(s.hasOwnProperty(p)&&s[p]){var Z=p.toLowerCase();if(h>1&&"title"===Z){h=1,c=p;break}h>2&&"name"===Z?(h=2,c=p):h>3&&/title/i.test(p)?(h=3,c=p):h>4&&/name/i.test(p)&&(h=4,c=p)}(0,d.Z)(c)&&(l.name=s[c])}var f=s.description;null!==f&&(l.description=(0,d.Z)(f)?new x.Z(f):i(s,c))}return l}function z(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)i[n]=t(e[n]);return i}var X={Feature:$,FeatureCollection:Q,GeometryCollection:J,LineString:re,MultiLineString:oe,MultiPoint:ie,MultiPolygon:se,Point:te,Polygon:le,Topology:de},Y={GeometryCollection:J,LineString:re,MultiLineString:oe,MultiPoint:ie,MultiPolygon:se,Point:te,Polygon:le,Topology:de};function $(e,t,i,n,r){if(null!==t.geometry){if(!(0,d.Z)(t.geometry))throw new m.Z("feature.geometry is required.");var o=t.geometry.type,a=Y[o];if(!(0,d.Z)(a))throw new m.Z("Unknown geometry type: "+o);a(e,t,t.geometry,n,r)}else q(t,e._entityCollection,r.describe)}function Q(e,t,i,n,r){for(var o=t.features,a=0,l=o.length;a<l;a++)$(e,o[a],void 0,n,r)}function J(e,t,i,n,r){for(var o=i.geometries,a=0,l=o.length;a<l;a++){var s=o[a],c=s.type,u=Y[c];if(!(0,d.Z)(u))throw new m.Z("Unknown geometry type: "+c);u(e,t,s,n,r)}}function ee(e,t,i,n,r){var a,l=r.markerSymbol,c=r.markerColor,u=r.markerSize,h=t.properties;if((0,d.Z)(h)){var p=h["marker-color"];(0,d.Z)(p)&&(c=o.Z.fromCssColorString(p)),u=(0,s.Z)(V[h["marker-size"]],u);var Z=h["marker-symbol"];(0,d.Z)(Z)&&(l=Z)}a=(0,d.Z)(l)?1===l.length?e._pinBuilder.fromText(l.toUpperCase(),c,u):e._pinBuilder.fromMakiIconId(l,c,u):e._pinBuilder.fromColor(c,u);var f=new w.Z;f.verticalOrigin=new x.Z(g.Z.BOTTOM),2===n.length&&r.clampToGround&&(f.heightReference=v.Z.CLAMP_TO_GROUND);var m=q(t,e._entityCollection,r.describe);m.billboard=f,m.position=new b.Z(i(n));var y=(0,_.Z)(a).then((function(e){f.image=new x.Z(e)})).otherwise((function(){f.image=new x.Z(e._pinBuilder.fromColor(c,u))}));e._promises.push(y)}function te(e,t,i,n,r){ee(e,t,n,i.coordinates,r)}function ie(e,t,i,n,r){for(var o=i.coordinates,a=0;a<o.length;a++)ee(e,t,n,o[a],r)}function ne(e,t,i,r,a){var l=a.strokeMaterialProperty,s=a.strokeWidthProperty,c=t.properties;if((0,d.Z)(c)){var u,h=c["stroke-width"];(0,d.Z)(h)&&(s=new x.Z(h));var p=c.stroke;(0,d.Z)(p)&&(u=o.Z.fromCssColorString(p));var Z=c["stroke-opacity"];(0,d.Z)(Z)&&1!==Z&&((0,d.Z)(u)||(u=l.color.clone()),u.alpha=Z),(0,d.Z)(u)&&(l=new C.Z(u))}var f=q(t,e._entityCollection,a.describe),m=new P.Z;f.polyline=m,m.clampToGround=a.clampToGround,m.material=l,m.width=s,m.positions=new x.Z(z(r,i)),m.arcType=n.Z.RHUMB}function re(e,t,i,n,r){ne(e,t,n,i.coordinates,r)}function oe(e,t,i,n,r){for(var o=i.coordinates,a=0;a<o.length;a++)ne(e,t,n,o[a],r)}function ae(e,t,i,r,a){if(0!==r.length&&0!==r[0].length){var l=a.strokeMaterialProperty.color,s=a.fillMaterialProperty,c=a.strokeWidthProperty,u=t.properties;if((0,d.Z)(u)){var h,p=u["stroke-width"];(0,d.Z)(p)&&(c=new x.Z(p));var f=u.stroke;(0,d.Z)(f)&&(h=o.Z.fromCssColorString(f));var m,v=u["stroke-opacity"];(0,d.Z)(v)&&1!==v&&((0,d.Z)(h)||(h=a.strokeMaterialProperty.color.clone()),h.alpha=v),(0,d.Z)(h)&&(l=new x.Z(h));var g=u.fill;(0,d.Z)(g)&&(m=o.Z.fromCssColorString(g),m.alpha=s.color.alpha),v=u["fill-opacity"],(0,d.Z)(v)&&v!==s.color.alpha&&((0,d.Z)(m)||(m=s.color.clone()),m.alpha=v),(0,d.Z)(m)&&(s=new C.Z(m))}var y=new O.Z;y.outline=new x.Z(!0),y.outlineColor=l,y.outlineWidth=c,y.material=s,y.arcType=n.Z.RHUMB;for(var _=[],w=1,k=r.length;w<k;w++)_.push(new Z.Z(z(r[w],i)));var b=r[0];y.hierarchy=new x.Z(new Z.Z(z(b,i),_)),b[0].length>2?y.perPositionHeight=new x.Z(!0):a.clampToGround||(y.height=0);var E=q(t,e._entityCollection,a.describe);E.polygon=y}}function le(e,t,i,n,r){ae(e,t,n,i.coordinates,r)}function se(e,t,i,n,r){for(var o=i.coordinates,a=0;a<o.length;a++)ae(e,t,n,o[a],r)}function de(e,t,i,n,r){for(var o in i.objects)if(i.objects.hasOwnProperty(o)){var a=y.Z.feature(i,i.objects[o]),l=X[a.type];l(e,a,a,n,r)}}function ce(e){this._name=e,this._changed=new u.Z,this._error=new u.Z,this._isLoading=!1,this._loading=new u.Z,this._entityCollection=new T.Z(this),this._promises=[],this._pinBuilder=new p.Z,this._entityCluster=new M.Z,this._credit=void 0,this._resourceCredits=[]}function ue(e,t,i,n){var r;(0,d.Z)(n)&&(r=(0,h.Z)(n)),(0,d.Z)(r)&&e._name!==r&&(e._name=r,e._changed.raiseEvent(e));var o=X[t.type];if(!(0,d.Z)(o))throw new m.Z("Unsupported GeoJSON object type: "+t.type);var a=t.crs,l=null!==a?S:null;if((0,d.Z)(a)){if(!(0,d.Z)(a.properties))throw new m.Z("crs.properties is undefined.");var s=a.properties;if("name"===a.type){if(l=N[s.name],!(0,d.Z)(l))throw new m.Z("Unknown crs name: "+s.name)}else if("link"===a.type){var c=I[s.href];if((0,d.Z)(c)||(c=R[s.type]),!(0,d.Z)(c))throw new m.Z("Unable to resolve crs link: "+JSON.stringify(s));l=c(s)}else{if("EPSG"!==a.type)throw new m.Z("Unknown crs type: "+a.type);if(l=N["EPSG:"+s.code],!(0,d.Z)(l))throw new m.Z("Unknown crs EPSG code: "+s.code)}}return(0,_.Z)(l,(function(n){return e._entityCollection.removeAll(),null!==n&&o(e,t,t,n,i),_.Z.all(e._promises,(function(){return e._promises.length=0,E.Z.setLoading(e,!1),e}))}))}ce.load=function(e,t){return(new ce).load(e,t)},Object.defineProperties(ce,{markerSize:{get:function(){return U},set:function(e){U=e}},markerSymbol:{get:function(){return L},set:function(e){L=e}},markerColor:{get:function(){return A},set:function(e){A=e}},stroke:{get:function(){return B},set:function(e){B=e}},strokeWidth:{get:function(){return D},set:function(e){D=e}},fill:{get:function(){return G},set:function(e){G=e}},clampToGround:{get:function(){return W},set:function(e){W=e}},crsNames:{get:function(){return N}},crsLinkHrefs:{get:function(){return I}},crsLinkTypes:{get:function(){return R}}}),Object.defineProperties(ce.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,d.Z)(e))throw new c.Z("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),ce.prototype.load=function(e,t){if(!(0,d.Z)(e))throw new c.Z("data is required.");E.Z.setLoading(this,!0),t=(0,s.Z)(t,s.Z.EMPTY_OBJECT);var i=t.credit;"string"===typeof i&&(i=new l.Z(i)),this._credit=i;var n=e,r=t.sourceUri;if("string"===typeof e||e instanceof f.Z){e=f.Z.createIfNeeded(e),n=e.fetchJson(),r=(0,s.Z)(r,e.getUrlComponent());var o=this._resourceCredits,a=e.credits;if((0,d.Z)(a))for(var u=a.length,h=0;h<u;h++)o.push(a[h])}t={describe:(0,s.Z)(t.describe,H),markerSize:(0,s.Z)(t.markerSize,U),markerSymbol:(0,s.Z)(t.markerSymbol,L),markerColor:(0,s.Z)(t.markerColor,A),strokeWidthProperty:new x.Z((0,s.Z)(t.strokeWidth,D)),strokeMaterialProperty:new C.Z((0,s.Z)(t.stroke,B)),fillMaterialProperty:new C.Z((0,s.Z)(t.fill,G)),clampToGround:(0,s.Z)(t.clampToGround,W)};var p=this;return(0,_.Z)(n,(function(e){return ue(p,e,t,r)})).otherwise((function(e){return E.Z.setLoading(p,!1),p._error.raiseEvent(p,e),console.log(e),_.Z.reject(e)}))},ce.prototype.update=function(e){return!0}},17045:function(e,t,i){var n=i(66553),r=i(59947),o=i(62200),a=i(82982),l=i(86511),s=i(12572),d=i(47861),c=i(14459),u=i(22841),h=i(27671),p=i(73001),Z=i(34125),f=i(20174),m=i(612),v=i(11895),g=i(40112),y=new f.Z(r.Z.WHITE),_=new m.Z(!0),w=new m.Z(!0),k=new m.Z(!1),C=new m.Z(r.Z.BLACK),b=new m.Z(Z.Z.DISABLED),x=new m.Z(new d.Z),E=new m.Z(p.Z.BOTH);function M(e){n.Z.defined("options.entity",e.entity),n.Z.defined("options.scene",e.scene),n.Z.defined("options.geometryOptions",e.geometryOptions),n.Z.defined("options.geometryPropertyName",e.geometryPropertyName),n.Z.defined("options.observedPropertyNames",e.observedPropertyNames);var t=e.entity,i=e.geometryPropertyName;this._entity=t,this._scene=e.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new c.Z,this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=e.geometryOptions,this._geometryPropertyName=i,this._id=i+"-"+t.id,this._observedPropertyNames=e.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=v.Z.supportsMaterialsforEntitiesOnTerrain(e.scene)}Object.defineProperties(M.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,a.Z)(this._entity.availability)&&g.Z.isConstant(this._showProperty)&&g.Z.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!(0,a.Z)(this._entity.availability)&&g.Z.isConstant(this._showProperty)&&g.Z.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}}),M.prototype.isOutlineVisible=function(e){var t=this._entity,i=this._outlineEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e);return(0,o.Z)(i,!1)},M.prototype.isFilled=function(e){var t=this._entity,i=this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e);return(0,o.Z)(i,!1)},M.prototype.createFillGeometryInstance=s.Z.throwInstantiationError,M.prototype.createOutlineGeometryInstance=s.Z.throwInstantiationError,M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){(0,l.Z)(this)},M.prototype._isHidden=function(e,t){var i=t.show;return(0,a.Z)(i)&&i.isConstant&&!i.getValue(u.Z.MINIMUM_VALUE)},M.prototype._isOnTerrain=function(e,t){return!1},M.prototype._getIsClosed=function(e){return!0},M.prototype._isDynamic=s.Z.throwInstantiationError,M.prototype._setStaticOptions=s.Z.throwInstantiationError,M.prototype._onEntityPropertyChanged=function(e,t,i,n){if(-1!==this._observedPropertyNames.indexOf(t)){var r=this._entity[this._geometryPropertyName];if((0,a.Z)(r)){var l=r.fill,s=!(0,a.Z)(l)||!l.isConstant||l.getValue(u.Z.MINIMUM_VALUE),d=r.outline,c=(0,a.Z)(d);if(c&&d.isConstant&&(c=d.getValue(u.Z.MINIMUM_VALUE)),s||c){var p=r.show;if(this._isHidden(e,r))(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));else{this._materialProperty=(0,o.Z)(r.material,y),this._fillProperty=(0,o.Z)(l,w),this._showProperty=(0,o.Z)(p,_),this._showOutlineProperty=(0,o.Z)(r.outline,k),this._outlineColorProperty=c?(0,o.Z)(r.outlineColor,C):void 0,this._shadowsProperty=(0,o.Z)(r.shadows,b),this._distanceDisplayConditionProperty=(0,o.Z)(r.distanceDisplayCondition,x),this._classificationTypeProperty=(0,o.Z)(r.classificationType,E),this._fillEnabled=s;var Z=this._isOnTerrain(e,r)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof f.Z);if(c&&Z&&((0,h.Z)(h.Z.geometryOutlines),c=!1),this._onTerrain=Z,this._outlineEnabled=c,this._isDynamic(e,r))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(e,r),this._isClosed=this._getIsClosed(this._options);var m=r.outlineWidth;this._outlineWidth=(0,a.Z)(m)?m.getValue(u.Z.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}}}else(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this))}else(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this))}},M.prototype.createDynamicUpdater=function(e,t){if(n.Z.defined("primitives",e),n.Z.defined("groundPrimitives",t),!this._dynamic)throw new s.Z("This instance does not represent dynamic geometry.");return new this.constructor.DynamicGeometryUpdater(this,e,t)},t["Z"]=M},60500:function(e,t,i){var n=i(8629),r=i(48243),o=i(66553),a=i(62200),l=i(82982),s=i(86511),d=i(14459),c=i(79539),u=i(73001),h=i(79158),p=i(64060),Z=i(34125),f=i(69895),m=i(52777),v=i(20174),g=i(91166),y=i(43894),_=i(22425),w=i(28698),k=i(16884),C=i(11895),b=i(397),x=i(62373),E=i(24818),M=i(54749),T=i(81189),O=i(30487),P=i(4371),S=i(65249),L=i(29596),N=i(97167),I=[],R=[m.Z,y.Z,g.Z,w.Z,k.Z,b.Z,x.Z,E.Z,M.Z,N.Z];function U(e,t){this.entity=e,this.scene=t;var i=new Array(R.length),n=new d.Z;function r(e){n.raiseEvent(e)}for(var o=new c.Z,a=0;a<i.length;a++){var l=new R[a](e,t);o.add(l.geometryChanged,r),i[a]=l}this.updaters=i,this.geometryChanged=n,this.eventHelper=o,this._removeEntitySubscription=e.definitionChanged.addEventListener(U.prototype._onEntityPropertyChanged,this)}function A(e,t,i,r){o.Z.defined("scene",e),o.Z.defined("entityCollection",t),i=(0,a.Z)(i,e.primitives),r=(0,a.Z)(r,e.groundPrimitives),this._scene=e,this._primitives=i,this._groundPrimitives=r,this._entityCollection=void 0,this._addedObjects=new n.Z,this._removedObjects=new n.Z,this._changedObjects=new n.Z;var l=Z.Z.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*l),this._closedColorBatches=new Array(2*l),this._closedMaterialBatches=new Array(2*l),this._openColorBatches=new Array(2*l),this._openMaterialBatches=new Array(2*l);var s,d=C.Z.supportsMaterialsforEntitiesOnTerrain(e);for(this._supportsMaterialsforEntitiesOnTerrain=d,s=0;s<l;++s)this._outlineBatches[s]=new L.Z(i,e,s,!1),this._outlineBatches[l+s]=new L.Z(i,e,s,!0),this._closedColorBatches[s]=new T.Z(i,p.Z,void 0,!0,s,!0),this._closedColorBatches[l+s]=new T.Z(i,p.Z,void 0,!0,s,!1),this._closedMaterialBatches[s]=new O.Z(i,h.Z,void 0,!0,s,!0),this._closedMaterialBatches[l+s]=new O.Z(i,h.Z,void 0,!0,s,!1),this._openColorBatches[s]=new T.Z(i,p.Z,void 0,!1,s,!0),this._openColorBatches[l+s]=new T.Z(i,p.Z,void 0,!1,s,!1),this._openMaterialBatches[s]=new O.Z(i,h.Z,void 0,!1,s,!0),this._openMaterialBatches[l+s]=new O.Z(i,h.Z,void 0,!1,s,!1);var c=u.Z.NUMBER_OF_CLASSIFICATION_TYPES,f=new Array(c),m=[];if(d)for(s=0;s<c;++s)m.push(new S.Z(r,s,h.Z)),f[s]=new P.Z(r,s);else for(s=0;s<c;++s)f[s]=new P.Z(r,s);this._groundColorBatches=f,this._groundMaterialBatches=m,this._dynamicBatch=new _.Z(i,r),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new n.Z,this._updaterSets=new n.Z,this._entityCollection=t,t.collectionChanged.addEventListener(A.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,I)}U.prototype._onEntityPropertyChanged=function(e,t,i,n){for(var r=this.updaters,o=0;o<r.length;o++)r[o]._onEntityPropertyChanged(e,t,i,n)},U.prototype.forEach=function(e){for(var t=this.updaters,i=0;i<t.length;i++)e(t[i])},U.prototype.destroy=function(){this.eventHelper.removeAll();for(var e=this.updaters,t=0;t<e.length;t++)e[t].destroy();this._removeEntitySubscription(),(0,s.Z)(this)},A.prototype.update=function(e){o.Z.defined("time",e);var t,i,n,r,a=this._addedObjects,l=a.values,s=this._removedObjects,d=s.values,c=this._changedObjects,u=c.values,h=this;for(t=u.length-1;t>-1;t--)i=u[t],n=i.id,r=this._updaterSets.get(n),r.entity===i?r.forEach((function(t){h._removeUpdater(t),h._insertUpdaterIntoBatch(e,t)})):(d.push(i),l.push(i));for(t=d.length-1;t>-1;t--)i=d[t],n=i.id,r=this._updaterSets.get(n),r.forEach(this._removeUpdater.bind(this)),r.destroy(),this._updaterSets.remove(n),this._subscriptions.get(n)(),this._subscriptions.remove(n);for(t=l.length-1;t>-1;t--)i=l[t],n=i.id,r=new U(i,this._scene),this._updaterSets.set(n,r),r.forEach((function(t){h._insertUpdaterIntoBatch(e,t)})),this._subscriptions.set(n,r.geometryChanged.addEventListener(A._onGeometryChanged,this));a.removeAll(),s.removeAll(),c.removeAll();var p=!0,Z=this._batches,f=Z.length;for(t=0;t<f;t++)p=Z[t].update(e)&&p;return p};var B=[],D=new r.Z;A.prototype.getBoundingSphere=function(e,t){o.Z.defined("entity",e),o.Z.defined("result",t);for(var i=B,n=D,a=0,l=f.Z.DONE,s=this._batches,d=s.length,c=e.id,u=this._updaterSets.get(c).updaters,h=0;h<u.length;h++)for(var p=u[h],Z=0;Z<d;Z++){if(l=s[Z].getBoundingSphere(p,n),l===f.Z.PENDING)return f.Z.PENDING;l===f.Z.DONE&&(i[a]=r.Z.clone(n,i[a]),a++)}return 0===a?f.Z.FAILED:(i.length=a,r.Z.fromBoundingSpheres(i,t),f.Z.DONE)},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){var e;this._entityCollection.collectionChanged.removeEventListener(A.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();var t=this._batches,i=t.length;for(e=0;e<i;e++)t[e].removeAllPrimitives();var n=this._subscriptions.values;for(i=n.length,e=0;e<i;e++)n[e]();this._subscriptions.removeAll();var r=this._updaterSets.values;for(i=r.length,e=0;e<i;e++)r[e].destroy();return this._updaterSets.removeAll(),(0,s.Z)(this)},A.prototype._removeUpdater=function(e){for(var t=this._batches,i=t.length,n=0;n<i;n++)t[n].remove(e)},A.prototype._insertUpdaterIntoBatch=function(e,t){if(t.isDynamic)this._dynamicBatch.add(e,t);else{var i;(t.outlineEnabled||t.fillEnabled)&&(i=t.shadowsProperty.getValue(e));var n=Z.Z.NUMBER_OF_SHADOW_MODES;if(t.outlineEnabled&&((0,l.Z)(t.terrainOffsetProperty)?this._outlineBatches[n+i].add(e,t):this._outlineBatches[i].add(e,t)),t.fillEnabled)if(t.onTerrain){var r=t.classificationTypeProperty.getValue(e);t.fillMaterialProperty instanceof v.Z?this._groundColorBatches[r].add(e,t):this._groundMaterialBatches[r].add(e,t)}else t.isClosed?t.fillMaterialProperty instanceof v.Z?(0,l.Z)(t.terrainOffsetProperty)?this._closedColorBatches[n+i].add(e,t):this._closedColorBatches[i].add(e,t):(0,l.Z)(t.terrainOffsetProperty)?this._closedMaterialBatches[n+i].add(e,t):this._closedMaterialBatches[i].add(e,t):t.fillMaterialProperty instanceof v.Z?(0,l.Z)(t.terrainOffsetProperty)?this._openColorBatches[n+i].add(e,t):this._openColorBatches[i].add(e,t):(0,l.Z)(t.terrainOffsetProperty)?this._openMaterialBatches[n+i].add(e,t):this._openMaterialBatches[i].add(e,t)}},A._onGeometryChanged=function(e){var t=this._removedObjects,i=this._changedObjects,n=e.entity,r=n.id;(0,l.Z)(t.get(r))||(0,l.Z)(i.get(r))||i.set(r,n)},A.prototype._onCollectionChanged=function(e,t,i){var n,r,o,a=this._addedObjects,l=this._removedObjects,s=this._changedObjects;for(n=i.length-1;n>-1;n--)o=i[n],r=o.id,a.remove(r)||(l.set(r,o),s.remove(r));for(n=t.length-1;n>-1;n--)o=t[n],r=o.id,l.remove(r)?s.set(r,o):a.set(r,o)},t["Z"]=A},84903:function(e,t,i){var n=i(60838),r=i(59947),o=i(62200),a=i(82982),l=i(14459),s=i(90203),d=i(40112),c=r.Z.WHITE,u=.1,h=new n.Z(8,8),p=new n.Z(0,0),Z=new n.Z(1,1);function f(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this._definitionChanged=new l.Z,this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=e.color,this.cellAlpha=e.cellAlpha,this.lineCount=e.lineCount,this.lineThickness=e.lineThickness,this.lineOffset=e.lineOffset}Object.defineProperties(f.prototype,{isConstant:{get:function(){return d.Z.isConstant(this._color)&&d.Z.isConstant(this._cellAlpha)&&d.Z.isConstant(this._lineCount)&&d.Z.isConstant(this._lineThickness)&&d.Z.isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,s.Z)("color"),cellAlpha:(0,s.Z)("cellAlpha"),lineCount:(0,s.Z)("lineCount"),lineThickness:(0,s.Z)("lineThickness"),lineOffset:(0,s.Z)("lineOffset")}),f.prototype.getType=function(e){return"Grid"},f.prototype.getValue=function(e,t){return(0,a.Z)(t)||(t={}),t.color=d.Z.getValueOrClonedDefault(this._color,e,c,t.color),t.cellAlpha=d.Z.getValueOrDefault(this._cellAlpha,e,u),t.lineCount=d.Z.getValueOrClonedDefault(this._lineCount,e,h,t.lineCount),t.lineThickness=d.Z.getValueOrClonedDefault(this._lineThickness,e,Z,t.lineThickness),t.lineOffset=d.Z.getValueOrClonedDefault(this._lineOffset,e,p,t.lineOffset),t},f.prototype.equals=function(e){return this===e||e instanceof f&&d.Z.equals(this._color,e._color)&&d.Z.equals(this._cellAlpha,e._cellAlpha)&&d.Z.equals(this._lineCount,e._lineCount)&&d.Z.equals(this._lineThickness,e._lineThickness)&&d.Z.equals(this._lineOffset,e._lineOffset)},t["Z"]=f},8254:function(e,t,i){var n=i(66553),r=i(62200),o=i(82982),a=i(12572),l=i(87379),s=i(27671),d=i(47780),c=i(4260),u=i(11249),h=i(612),p=i(17045),Z=i(18743),f=new h.Z(0);function m(e){p.Z.call(this,e),this._zIndex=0,this._terrainOffsetProperty=void 0}(0,o.Z)(Object.create)&&(m.prototype=Object.create(p.Z.prototype),m.prototype.constructor=m),Object.defineProperties(m.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),m.prototype._isOnTerrain=function(e,t){return this._fillEnabled&&!(0,o.Z)(t.height)&&!(0,o.Z)(t.extrudedHeight)&&d.Z.isSupported(this._scene)},m.prototype._getIsClosed=function(e){var t=e.height,i=e.extrudedHeight;return 0===t||(0,o.Z)(i)&&i!==t},m.prototype._computeCenter=a.Z.throwInstantiationError,m.prototype._onEntityPropertyChanged=function(e,t,i,n){if(p.Z.prototype._onEntityPropertyChanged.call(this,e,t,i,n),-1!==this._observedPropertyNames.indexOf(t)){var a=this._entity[this._geometryPropertyName];if((0,o.Z)(a)){(0,o.Z)(a.zIndex)&&((0,o.Z)(a.height)||(0,o.Z)(a.extrudedHeight))&&(0,s.Z)(s.Z.geometryZIndex),this._zIndex=(0,r.Z)(a.zIndex,f),(0,o.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);var l=a.heightReference,d=a.extrudedHeightReference;if((0,o.Z)(l)||(0,o.Z)(d)){var c=new u.Z(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new Z.Z(this._scene,c,l,d)}}}},m.prototype.destroy=function(){(0,o.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),p.Z.prototype.destroy.call(this)},m.getGeometryHeight=function(e,t){if(n.Z.defined("heightReference",t),(0,o.Z)(e))return t!==c.Z.CLAMP_TO_GROUND?e:0;t!==c.Z.NONE&&(0,s.Z)(s.Z.geometryHeightReference)},m.getGeometryExtrudedHeight=function(e,t){if(n.Z.defined("extrudedHeightReference",t),(0,o.Z)(e))return t!==c.Z.CLAMP_TO_GROUND?e:m.CLAMP_TO_GROUND;t!==c.Z.NONE&&(0,s.Z)(s.Z.geometryExtrudedHeightReference)},m.CLAMP_TO_GROUND="clamp",m.computeGeometryOffsetAttribute=function(e,t,i,n){(0,o.Z)(e)&&(0,o.Z)(t)||(t=c.Z.NONE),(0,o.Z)(i)&&(0,o.Z)(n)||(n=c.Z.NONE);var r=0;return t!==c.Z.NONE&&r++,n===c.Z.RELATIVE_TO_GROUND&&r++,2===r?l.Z.ALL:1===r?l.Z.TOP:void 0},t["Z"]=m},33796:function(e,t,i){var n=i(60838),r=i(59947),o=i(62200),a=i(82982),l=i(14459),s=i(90203),d=i(40112),c=new n.Z(1,1),u=!1,h=r.Z.WHITE;function p(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this._definitionChanged=new l.Z,this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._transparent=void 0,this._transparentSubscription=void 0,this.image=e.image,this.repeat=e.repeat,this.color=e.color,this.transparent=e.transparent}Object.defineProperties(p.prototype,{isConstant:{get:function(){return d.Z.isConstant(this._image)&&d.Z.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:(0,s.Z)("image"),repeat:(0,s.Z)("repeat"),color:(0,s.Z)("color"),transparent:(0,s.Z)("transparent")}),p.prototype.getType=function(e){return"Image"},p.prototype.getValue=function(e,t){return(0,a.Z)(t)||(t={}),t.image=d.Z.getValueOrUndefined(this._image,e),t.repeat=d.Z.getValueOrClonedDefault(this._repeat,e,c,t.repeat),t.color=d.Z.getValueOrClonedDefault(this._color,e,h,t.color),d.Z.getValueOrDefault(this._transparent,e,u)&&(t.color.alpha=Math.min(.99,t.color.alpha)),t},p.prototype.equals=function(e){return this===e||e instanceof p&&d.Z.equals(this._image,e._image)&&d.Z.equals(this._repeat,e._repeat)&&d.Z.equals(this._color,e._color)&&d.Z.equals(this._transparent,e._transparent)},t["Z"]=p},25320:function(e,t,i){var n=i(11491),r=i(8629),o=i(88108),a=i(60838),l=i(60216),s=i(51688),d=i(44159),c=i(96627),u=i(83856),h=i(59947),p=i(39960),Z=i(52975),f=i(62200),m=i(82982),v=i(12572),g=i(50491),y=i(14459),_=i(83931),w=i(8962),k=i(59081),C=i(99819),b=i(57674),x=i(22841),E=i(55293),M=i(99417),T=i(15720),O=i(53411),P=i(27671),S=i(78318),L=i(78757),N=i(95037),I=i(96190),R=i(68985),U=i(9407),A=i(77808),B=i(46026),D=i(4260),G=i(62919),W=i(81208),V=i(89917),F=i(99574),K=i(93922),j=i(13222),H=i(92678),q=i(44011),z=i(74254),X=i(70265),Y=i(91419),$=i(11895),Q=i(47890),J=i(69516);function ee(e,t){this.position=e,this.headingPitchRoll=t}var te=ee;function ie(e,t){this.position=e,this.headingPitchRange=t}var ne,re=ie,oe=i(20217),ae=i(98826),le=i(86729),se=i(71550),de=i(51426),ce=i(3081),ue=i(42956),he=i(92961),pe=i(85441),Ze=i(57547),fe=i(87207),me=i(42098),ve=i(36811),ge=i(65269),ye={avi:"video/x-msvideo",bmp:"image/bmp",bz2:"application/x-bzip2",chm:"application/vnd.ms-htmlhelp",css:"text/css",csv:"text/csv",doc:"application/msword",dvi:"application/x-dvi",eps:"application/postscript",flv:"video/x-flv",gif:"image/gif",gz:"application/x-gzip",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",jnlp:"application/x-java-jnlp-file",jpeg:"image/jpeg",jpg:"image/jpeg",m3u:"audio/x-mpegurl",m4v:"video/mp4",mathml:"application/mathml+xml",mid:"audio/midi",midi:"audio/midi",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",mp4v:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",ogg:"application/ogg",pdf:"application/pdf",png:"image/png",pps:"application/vnd.ms-powerpoint",ppt:"application/vnd.ms-powerpoint",ps:"application/postscript",qt:"video/quicktime",rdf:"application/rdf+xml",rss:"application/rss+xml",rtf:"application/rtf",svg:"image/svg+xml",swf:"application/x-shockwave-flash",text:"text/plain",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/x-wav",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",xml:"application/xml",zip:"application/zip",detectFromFilename:function(e){var t=e.toLowerCase();return t=(0,_.Z)(t),ye[t]}};"undefined"!==typeof DOMParser&&(ne=new DOMParser);var _e=new F.Z({stripPrefix:!1,email:!1,replaceFn:function(e){if(!e.protocolUrlMatch)return!1}}),we=32,ke=2414016,Ce=1,be=16093e3,xe=.1,Ee=[null,void 0,"http://www.opengis.net/kml/2.2","http://earth.google.com/kml/2.2","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.0"],Me=["http://www.google.com/kml/ext/2.2"],Te=["http://www.w3.org/2005/Atom"],Oe={kml:Ee,gx:Me,atom:Te,kmlgx:Ee.concat(Me)},Pe={Document:Lt,Folder:Nt,Placemark:It,NetworkLink:$t,GroundOverlay:Vt,PhotoOverlay:Ft,ScreenOverlay:Ft,Tour:Ut};function Se(e){this._dataSource=e,this._deferred=j.Z.defer(),this._stack=[],this._promises=[],this._timeoutSet=!1,this._used=!1,this._started=0,this._timeThreshold=1e3}function Le(e){var t=e.slice(0,Math.min(4,e.size)),i=j.Z.defer(),n=new FileReader;return n.addEventListener("load",(function(){i.resolve(1347093252===new DataView(n.result).getUint32(0,!1))})),n.addEventListener("error",(function(){i.reject(n.error)})),n.readAsArrayBuffer(t),i.promise}function Ne(e){var t=j.Z.defer(),i=new FileReader;return i.addEventListener("load",(function(){t.resolve(i.result)})),i.addEventListener("error",(function(){t.reject(i.error)})),i.readAsText(e),t.promise}function Ie(e){var t,i,n,r,o={xsi:"http://www.w3.org/2001/XMLSchema-instance"};for(var a in o)o.hasOwnProperty(a)&&(n=RegExp("[< ]"+a+":"),r="xmlns:"+a+"=",n.test(e)&&-1===e.indexOf(r)&&((0,m.Z)(t)||(t=e.substr(0,e.indexOf("<kml")+4),i=e.substr(t.length)),t+=" "+r+'"'+o[a]+'"'));return(0,m.Z)(t)&&(e=t+i),e}function Re(e){var t,i,n,r=e.indexOf("xmlns:"),o=e.indexOf(">",r);while(-1!==r&&r<o)t=e.slice(r,e.indexOf('"',r)),i=r,r=e.indexOf(t,r+1),-1!==r?(n=e.indexOf('"',e.indexOf('"',r)+1),e=e.slice(0,r-1)+e.slice(n+1,e.length),r=e.indexOf("xmlns:",i-1)):r=e.indexOf("xmlns:",i+1);return e}function Ue(e,t){return(0,j.Z)(e.getData(new H.Z.TextWriter)).then((function(e){e=Ie(e),e=Re(e),t.kml=ne.parseFromString(e,"application/xml")}))}function Ae(e,t){var i=(0,f.Z)(ye.detectFromFilename(e.filename),"application/octet-stream");return(0,j.Z)(e.getData(new H.Z.Data64URIWriter(i))).then((function(i){t[e.filename]=i}))}function Be(e,t,i,n){for(var r=n.keys,o=new K.Z("."),a=e.querySelectorAll(t),l=0;l<a.length;l++){var s=a[l],d=s.getAttribute(i),c=new K.Z(d),u=c.absoluteTo(o).toString(),h=r.indexOf(u);if(-1!==h){var p=r[h];s.setAttribute(i,n[p]),"a"===t&&null===s.getAttribute("download")&&s.setAttribute("download",p)}}}function De(e,t,i,n){for(var r=e.querySelectorAll(t),o=0;o<r.length;o++){var a=r[o],l=a.getAttribute(i),s=Qe(l,n);a.setAttribute(i,s.url)}}function Ge(e,t,i){var n=je(e,"id");n=(0,m.Z)(n)&&0!==n.length?n:(0,p.Z)(),(0,m.Z)(i)&&(n=i+n);var r=t.getById(n);return(0,m.Z)(r)&&(n=(0,p.Z)(),(0,m.Z)(i)&&(n=i+n)),r=t.add(new $.Z({id:n})),(0,m.Z)(r.kml)||(r.addProperty("kml"),r.kml=new ai),r}function We(e,t){return"absolute"===e||"relativeToGround"===e||"relativeToSeaFloor"===t}function Ve(e,t){if(!(0,m.Z)(e))return l.Z.fromDegrees(0,0,0,t);var i=e.match(/[^\s,\n]+/g);if(!(0,m.Z)(i))return l.Z.fromDegrees(0,0,0,t);var n=parseFloat(i[0]),r=parseFloat(i[1]),o=parseFloat(i[2]);return n=isNaN(n)?0:n,r=isNaN(r)?0:r,o=isNaN(o)?0:o,l.Z.fromDegrees(n,r,o,t)}function Fe(e,t){if((0,m.Z)(e)){var i=e.textContent.match(/[^\s\n]+/g);if((0,m.Z)(i)){for(var n=i.length,r=new Array(n),o=0,a=0;a<n;a++)r[o++]=Ve(i[a],t);return r}}}function Ke(e,t){if((0,m.Z)(e)){var i=e.getAttribute(t);if(null!==i){var n=parseFloat(i);return isNaN(n)?void 0:n}}}function je(e,t){if((0,m.Z)(e)){var i=e.getAttribute(t);return null!==i?i:void 0}}function He(e,t,i){if((0,m.Z)(e))for(var n=e.childNodes,r=n.length,o=0;o<r;o++){var a=n[o];if(a.localName===t&&-1!==i.indexOf(a.namespaceURI))return a}}function qe(e,t,i){if((0,m.Z)(e)){for(var n=[],r=e.getElementsByTagNameNS("*",t),o=r.length,a=0;a<o;a++){var l=r[a];l.localName===t&&-1!==i.indexOf(l.namespaceURI)&&n.push(l)}return n}}function ze(e,t,i){if(!(0,m.Z)(e))return[];for(var n=[],r=e.childNodes,o=r.length,a=0;a<o;a++){var l=r[a];l.localName===t&&-1!==i.indexOf(l.namespaceURI)&&n.push(l)}return n}function Xe(e,t,i){var n=He(e,t,i);if((0,m.Z)(n)){var r=parseFloat(n.textContent);return isNaN(r)?void 0:r}}function Ye(e,t,i){var n=He(e,t,i);if((0,m.Z)(n))return n.textContent.trim()}function $e(e,t,i){var n=He(e,t,i);if((0,m.Z)(n)){var r=n.textContent.trim();return"1"===r||/^true$/i.test(r)}}function Qe(e,t,i){if((0,m.Z)(e)){var n;if((0,m.Z)(i)){e=e.replace(/\\/g,"/");var r=i[e];if((0,m.Z)(r))n=new R.Z({url:r});else{var o=new K.Z(t.getUrlComponent()),a=new K.Z(e);r=i[a.absoluteTo(o)],(0,m.Z)(r)&&(n=new R.Z({url:r}))}}return(0,m.Z)(n)||(n=t.getDerivedResource({url:e})),n}}Object.defineProperties(Se.prototype,{dataSource:{get:function(){return this._dataSource}}}),Se.prototype.addNodes=function(e,t){this._stack.push({nodes:e,index:0,processingData:t}),this._used=!0},Se.prototype.addPromise=function(e){this._promises.push(e)},Se.prototype.wait=function(){var e=this._deferred;return this._used||e.resolve(),j.Z.join(e.promise,j.Z.all(this._promises))},Se.prototype.process=function(){var e=1===this._stack.length;return e&&(this._started=ii._getTimestamp()),this._process(e)},Se.prototype._giveUpTime=function(){if(!this._timeoutSet){this._timeoutSet=!0,this._timeThreshold=50;var e=this;setTimeout((function(){e._timeoutSet=!1,e._started=ii._getTimestamp(),e._process(!0)}),0)}},Se.prototype._nextNode=function(){var e=this._stack,t=e[e.length-1],i=t.index,n=t.nodes;if(i!==n.length)return++t.index,n[i]},Se.prototype._pop=function(){var e=this._stack;return e.pop(),0!==e.length||(this._deferred.resolve(),!1)},Se.prototype._process=function(e){var t=this.dataSource,i=this._stack[this._stack.length-1].processingData,n=this._nextNode();while((0,m.Z)(n)){var r=Pe[n.localName];if((0,m.Z)(r)&&(-1!==Oe.kml.indexOf(n.namespaceURI)||-1!==Oe.gx.indexOf(n.namespaceURI))&&(r(t,n,i,this),this._timeoutSet||ii._getTimestamp()>this._started+this._timeThreshold))return void this._giveUpTime();n=this._nextNode()}this._pop()&&e&&this._process(!0)};var Je={maximumRed:void 0,red:void 0,maximumGreen:void 0,green:void 0,maximumBlue:void 0,blue:void 0};function et(e,t){if((0,m.Z)(e)&&!/^\s*$/gm.test(e)){"#"===e[0]&&(e=e.substring(1));var i=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255,o=parseInt(e.substring(6,8),16)/255;return t?(o>0?(Je.maximumRed=o,Je.red=void 0):(Je.maximumRed=void 0,Je.red=0),r>0?(Je.maximumGreen=r,Je.green=void 0):(Je.maximumGreen=void 0,Je.green=0),n>0?(Je.maximumBlue=n,Je.blue=void 0):(Je.maximumBlue=void 0,Je.blue=0),Je.alpha=i,h.Z.fromRandom(Je)):new h.Z(o,r,n,i)}}function tt(e,t,i){var n=Ye(e,t,i);if((0,m.Z)(n))return et(n,"random"===Ye(e,"colorMode",i))}function it(e){var t=He(e,"TimeStamp",Oe.kmlgx),i=Ye(t,"when",Oe.kmlgx);if((0,m.Z)(t)&&(0,m.Z)(i)&&0!==i.length){var n=E.Z.fromIso8601(i),r=new B.Z;return r.addInterval(new A.Z({start:n,stop:x.Z.MAXIMUM_VALUE})),r}}function nt(e){var t=He(e,"TimeSpan",Oe.kmlgx);if((0,m.Z)(t)){var i,n=He(t,"begin",Oe.kmlgx),r=(0,m.Z)(n)?E.Z.fromIso8601(n.textContent):void 0,o=He(t,"end",Oe.kmlgx),a=(0,m.Z)(o)?E.Z.fromIso8601(o.textContent):void 0;if((0,m.Z)(r)&&(0,m.Z)(a)){if(E.Z.lessThan(a,r)){var l=r;r=a,a=l}i=new B.Z,i.addInterval(new A.Z({start:r,stop:a}))}else(0,m.Z)(r)?(i=new B.Z,i.addInterval(new A.Z({start:r,stop:x.Z.MAXIMUM_VALUE}))):(0,m.Z)(a)&&(i=new B.Z,i.addInterval(new A.Z({start:x.Z.MINIMUM_VALUE,stop:a})));return i}}function rt(){var e=new q.Z;return e.width=we,e.height=we,e.scaleByDistance=new T.Z(ke,Ce,be,xe),e.pixelOffsetScaleByDistance=new T.Z(ke,Ce,be,xe),e}function ot(){var e=new ce.Z;return e.outline=!0,e.outlineColor=h.Z.WHITE,e}function at(){var e=new se.Z;return e.translucencyByDistance=new T.Z(3e6,1,5e6,0),e.pixelOffset=new a.Z(17,0),e.horizontalOrigin=G.Z.LEFT,e.font="16px sans-serif",e.style=W.Z.FILL_AND_OUTLINE,e}function lt(e,t,i,n,r){var o=Ye(e,"href",Oe.kml);if((0,m.Z)(o)&&0!==o.length){if(0===o.indexOf("root://icons/palette-")){var a=o.charAt(21),l=(0,f.Z)(Xe(e,"x",Oe.gx),0),s=(0,f.Z)(Xe(e,"y",Oe.gx),0);l=Math.min(l/32,7),s=7-Math.min(s/32,7);var d=8*s+l;o="https://maps.google.com/mapfiles/kml/pal"+a+"/icon"+d+".png"}var c=Qe(o,i,n);if(r){var u=Ye(e,"refreshMode",Oe.kml),h=Ye(e,"viewRefreshMode",Oe.kml);"onInterval"===u||"onExpire"===u?(0,P.Z)("kml-refreshMode-"+u,"KML - Unsupported Icon refreshMode: "+u):"onStop"!==h&&"onRegion"!==h||(0,P.Z)("kml-refreshMode-"+h,"KML - Unsupported Icon viewRefreshMode: "+h);var p=(0,f.Z)(Ye(e,"viewBoundScale",Oe.kml),1),Z="onStop"===h?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",v=(0,f.Z)(Ye(e,"viewFormat",Oe.kml),Z),g=Ye(e,"httpQuery",Oe.kml);(0,m.Z)(v)&&c.setQueryParameters((0,N.Z)(jt(v))),(0,m.Z)(g)&&c.setQueryParameters((0,N.Z)(jt(g)));var y=t._ellipsoid;return Yt(c,t._camera,t._canvas,p,t._lastCameraView.bbox,y),c}return c}}function st(e,t,i,n,r){var s=Xe(t,"scale",Oe.kml),d=Xe(t,"heading",Oe.kml),c=tt(t,"color",Oe.kml),u=He(t,"Icon",Oe.kml),h=lt(u,e,n,r,!1);(0,m.Z)(u)&&!(0,m.Z)(h)&&(h=!1);var p,Z,v=Xe(u,"x",Oe.gx),g=Xe(u,"y",Oe.gx),y=Xe(u,"w",Oe.gx),_=Xe(u,"h",Oe.gx),w=He(t,"hotSpot",Oe.kml),k=Ke(w,"x"),C=Ke(w,"y"),b=je(w,"xunits"),x=je(w,"yunits"),E=i.billboard;(0,m.Z)(E)||(E=rt(),i.billboard=E),E.image=h,E.scale=s,E.color=c,((0,m.Z)(v)||(0,m.Z)(g)||(0,m.Z)(y)||(0,m.Z)(_))&&(E.imageSubRegion=new o.Z(v,g,y,_)),(0,m.Z)(d)&&0!==d&&(E.rotation=M.Z.toRadians(-d),E.alignedAxis=l.Z.UNIT_Z),s=(0,f.Z)(s,1),(0,m.Z)(k)&&("pixels"===b?p=-k*s:"insetPixels"===b?p=(k-we)*s:"fraction"===b&&(p=-k*we*s),p+=.5*we*s),(0,m.Z)(C)&&("pixels"===x?Z=C*s:"insetPixels"===x?Z=(-C+we)*s:"fraction"===x&&(Z=C*we*s),Z-=.5*we*s),((0,m.Z)(p)||(0,m.Z)(Z))&&(E.pixelOffset=new a.Z(p,Z))}function dt(e,t,i,n,r){for(var o=0,a=t.childNodes.length;o<a;o++){var l=t.childNodes.item(o);if("IconStyle"===l.localName)st(e,l,i,n,r);else if("LabelStyle"===l.localName){var s=i.label;(0,m.Z)(s)||(s=at(),i.label=s),s.scale=(0,f.Z)(Xe(l,"scale",Oe.kml),s.scale),s.fillColor=(0,f.Z)(tt(l,"color",Oe.kml),s.fillColor),s.text=i.name}else if("LineStyle"===l.localName){var d=i.polyline;(0,m.Z)(d)||(d=new ue.Z,i.polyline=d),d.width=Xe(l,"width",Oe.kml),d.material=tt(l,"color",Oe.kml),(0,m.Z)(tt(l,"outerColor",Oe.gx))&&(0,P.Z)("kml-gx:outerColor","KML - gx:outerColor is not supported in a LineStyle"),(0,m.Z)(Xe(l,"outerWidth",Oe.gx))&&(0,P.Z)("kml-gx:outerWidth","KML - gx:outerWidth is not supported in a LineStyle"),(0,m.Z)(Xe(l,"physicalWidth",Oe.gx))&&(0,P.Z)("kml-gx:physicalWidth","KML - gx:physicalWidth is not supported in a LineStyle"),(0,m.Z)($e(l,"labelVisibility",Oe.gx))&&(0,P.Z)("kml-gx:labelVisibility","KML - gx:labelVisibility is not supported in a LineStyle")}else if("PolyStyle"===l.localName){var c=i.polygon;(0,m.Z)(c)||(c=ot(),i.polygon=c),c.material=(0,f.Z)(tt(l,"color",Oe.kml),c.material),c.fill=(0,f.Z)($e(l,"fill",Oe.kml),c.fill),c.outline=(0,f.Z)($e(l,"outline",Oe.kml),c.outline)}else if("BalloonStyle"===l.localName){var u=(0,f.Z)(et(Ye(l,"bgColor",Oe.kml)),h.Z.WHITE),p=(0,f.Z)(et(Ye(l,"textColor",Oe.kml)),h.Z.BLACK),Z=Ye(l,"text",Oe.kml);i.addProperty("balloonStyle"),i.balloonStyle={bgColor:u,textColor:p,text:Z}}else if("ListStyle"===l.localName){var v=Ye(l,"listItemType",Oe.kml);"radioFolder"!==v&&"checkOffOnly"!==v||(0,P.Z)("kml-listStyle-"+v,"KML - Unsupported ListStyle with listItemType: "+v)}}}function ct(e,t,i,n,r){for(var o,a=new $.Z,l=-1,s=t.childNodes,d=s.length,c=0;c<d;c++){var u=s[c];"Style"!==u.localName&&"StyleMap"!==u.localName||(l=c)}if(-1!==l){var h=s[l];if("Style"===h.localName)dt(e,h,a,n,r);else for(var p=ze(h,"Pair",Oe.kml),Z=0;Z<p.length;Z++){var f=p[Z],v=Ye(f,"key",Oe.kml);if("normal"===v){var g=Ye(f,"styleUrl",Oe.kml);if((0,m.Z)(g))o=i.getById(g),(0,m.Z)(o)||(o=i.getById("#"+g)),(0,m.Z)(o)&&a.merge(o);else{var y=He(f,"Style",Oe.kml);dt(e,y,a,n,r)}}else(0,P.Z)("kml-styleMap-"+v,"KML - Unsupported StyleMap key: "+v)}}var _=Ye(t,"styleUrl",Oe.kml);if((0,m.Z)(_)){var w=_;if("#"!==_[0]&&-1!==_.indexOf("#")){var k=_.split("#"),C=k[0],b=n.getDerivedResource({url:C});w=b.getUrlComponent()+"#"+k[1]}o=i.getById(w),(0,m.Z)(o)||(o=i.getById("#"+w)),(0,m.Z)(o)&&a.merge(o)}return a}function ut(e,t,i){return t.fetchXML().then((function(n){return ht(e,n,i,t,!0)}))}function ht(e,t,i,n,r,o){var a,l,s,d,c=qe(t,"Style",Oe.kml);if((0,m.Z)(c)){var u=c.length;for(a=0;a<u;a++)d=c[a],l=je(d,"id"),(0,m.Z)(l)&&(l="#"+l,r&&(0,m.Z)(n)&&(l=n.getUrlComponent()+l),(0,m.Z)(i.getById(l))||(s=new $.Z({id:l}),i.add(s),dt(e,d,s,n,o)))}var h=qe(t,"StyleMap",Oe.kml);if((0,m.Z)(h)){var p=h.length;for(a=0;a<p;a++){var Z=h[a];if(l=je(Z,"id"),(0,m.Z)(l))for(var f=ze(Z,"Pair",Oe.kml),v=0;v<f.length;v++){var g=f[v],y=Ye(g,"key",Oe.kml);if("normal"===y){if(l="#"+l,r&&(0,m.Z)(n)&&(l=n.getUrlComponent()+l),!(0,m.Z)(i.getById(l))){s=i.getOrCreateEntity(l);var _=Ye(g,"styleUrl",Oe.kml);if((0,m.Z)(_)){"#"!==_[0]&&(_="#"+_),r&&(0,m.Z)(n)&&(_=n.getUrlComponent()+_);var w=i.getById(_);(0,m.Z)(w)&&s.merge(w)}else d=He(g,"Style",Oe.kml),dt(e,d,s,n,o)}}else(0,P.Z)("kml-styleMap-"+y,"KML - Unsupported StyleMap key: "+y)}}}var k=[],C=t.getElementsByTagName("styleUrl"),b=C.length;for(a=0;a<b;a++){var x=C[a].textContent;if("#"!==x[0]){var E=x.split("#");if(2===E.length){var M=E[0],T=n.getDerivedResource({url:M});k.push(ut(e,T,i))}}}return k}function pt(e,t,i){var n=new Ze.Z(e,t.id,["position"]),r=new me.Z(t.position);t.polyline=(0,m.Z)(i.polyline)?i.polyline.clone():new ue.Z,t.polyline.positions=new he.Z([n,r])}function Zt(e,t){return!(0,m.Z)(e)&&!(0,m.Z)(t)||"clampToGround"===e?D.Z.CLAMP_TO_GROUND:"relativeToGround"===e?D.Z.RELATIVE_TO_GROUND:"absolute"===e?D.Z.NONE:"clampToSeaFloor"===t?((0,P.Z)("kml-gx:altitudeMode-clampToSeaFloor","KML - <gx:altitudeMode>:clampToSeaFloor is currently not supported, using <kml:altitudeMode>:clampToGround."),D.Z.CLAMP_TO_GROUND):"relativeToSeaFloor"===t?((0,P.Z)("kml-gx:altitudeMode-relativeToSeaFloor","KML - <gx:altitudeMode>:relativeToSeaFloor is currently not supported, using <kml:altitudeMode>:relativeToGround."),D.Z.RELATIVE_TO_GROUND):((0,m.Z)(e)?(0,P.Z)("kml-altitudeMode-unknown","KML - Unknown <kml:altitudeMode>:"+e+", using <kml:altitudeMode>:CLAMP_TO_GROUND."):(0,P.Z)("kml-gx:altitudeMode-unknown","KML - Unknown <gx:altitudeMode>:"+t+", using <kml:altitudeMode>:CLAMP_TO_GROUND."),D.Z.CLAMP_TO_GROUND)}function ft(e,t,i){return"relativeToSeaFloor"===i||"absolute"===t||"relativeToGround"===t?e:(((0,m.Z)(t)&&"clampToGround"!==t||(0,m.Z)(i)&&"clampToSeaFloor"!==i)&&(0,P.Z)("kml-altitudeMode-unknown","KML - Unknown altitudeMode: "+(0,f.Z)(t,i)),new me.Z(e))}function mt(e,t,i,n){if((0,m.Z)(e)){if("relativeToSeaFloor"===i||"absolute"===t||"relativeToGround"===t)return e;((0,m.Z)(t)&&"clampToGround"!==t||(0,m.Z)(i)&&"clampToSeaFloor"!==i)&&(0,P.Z)("kml-altitudeMode-unknown","KML - Unknown altitudeMode: "+(0,f.Z)(t,i));for(var r=e.length,o=0;o<r;o++){var a=e[o];n.scaleToGeodeticSurface(a,a)}return e}}function vt(e,t,i,n){var r=t.label;(0,m.Z)(r)||(r=(0,m.Z)(i.label)?i.label.clone():at(),t.label=r),r.text=t.name;var o=t.billboard;(0,m.Z)(o)||(o=(0,m.Z)(i.billboard)?i.billboard.clone():rt(),t.billboard=o),(0,m.Z)(o.image)?o.image.getValue()||(o.image=void 0):o.image=e._pinBuilder.fromColor(h.Z.YELLOW,64);var l=1;(0,m.Z)(o.scale)&&(l=o.scale.getValue(),0!==l?r.pixelOffset=new a.Z(16*l+1,0):(r.pixelOffset=void 0,r.horizontalOrigin=void 0)),(0,m.Z)(n)&&e._clampToGround&&(o.heightReference=n,r.heightReference=n)}function gt(e,t){var i=e.path;(0,m.Z)(i)||(i=new de.Z,i.leadTime=0,e.path=i);var n=t.polyline;(0,m.Z)(n)&&(i.material=n.material,i.width=n.width)}function yt(e,t,i,n,r){var o=Ye(i,"coordinates",Oe.kml),a=Ye(i,"altitudeMode",Oe.kml),l=Ye(i,"altitudeMode",Oe.gx),s=$e(i,"extrude",Oe.kml),d=e._ellipsoid,c=Ve(o,d);return n.position=c,vt(e,n,r,Zt(a,l)),s&&We(a,l)&&pt(t,n,r),!0}function _t(e,t,i,r,o){var a=He(i,"coordinates",Oe.kml),l=Ye(i,"altitudeMode",Oe.kml),s=Ye(i,"altitudeMode",Oe.gx),d=$e(i,"extrude",Oe.kml),c=$e(i,"tessellate",Oe.kml),u=We(l,s),p=Xe(i,"drawOrder",Oe.gx),Z=e._ellipsoid,v=Fe(a,Z),g=o.polyline;if(u&&d){var y=new ge.Z;r.wall=y,y.positions=v;var _=o.polygon;(0,m.Z)(_)&&(y.fill=_.fill,y.material=_.material),y.outline=!0,(0,m.Z)(g)?(y.outlineColor=(0,m.Z)(g.material)?g.material.color:h.Z.WHITE,y.outlineWidth=g.width):(0,m.Z)(_)&&(y.outlineColor=(0,m.Z)(_.material)?_.material.color:h.Z.WHITE)}else if(e._clampToGround&&!u&&c){var w=new ue.Z;w.clampToGround=!0,r.polyline=w,w.positions=v,(0,m.Z)(g)?(w.material=(0,m.Z)(g.material)?g.material.color.getValue(x.Z.MINIMUM_VALUE):h.Z.WHITE,w.width=(0,f.Z)(g.width,1)):(w.material=h.Z.WHITE,w.width=1),w.zIndex=p}else(0,m.Z)(p)&&(0,P.Z)("kml-gx:drawOrder","KML - gx:drawOrder is not supported in LineStrings when clampToGround is false"),e._clampToGround&&!c&&(0,P.Z)("kml-line-tesselate","Ignoring clampToGround for KML lines without the tessellate flag."),g=(0,m.Z)(g)?g.clone():new ue.Z,r.polyline=g,g.positions=mt(v,l,s,Z),c&&!u||(g.arcType=n.Z.NONE);return!0}function wt(e,t,i,n,r){var o=He(i,"outerBoundaryIs",Oe.kml),a=He(o,"LinearRing",Oe.kml),l=He(a,"coordinates",Oe.kml),s=e._ellipsoid,d=Fe(l,s),c=$e(i,"extrude",Oe.kml),u=Ye(i,"altitudeMode",Oe.kml),p=Ye(i,"altitudeMode",Oe.gx),Z=We(u,p),f=(0,m.Z)(r.polygon)?r.polygon.clone():ot(),v=r.polyline;if((0,m.Z)(v)&&(f.outlineColor=(0,m.Z)(v.material)?v.material.color:h.Z.WHITE,f.outlineWidth=v.width),n.polygon=f,Z?(f.perPositionHeight=!0,f.extrudedHeight=c?0:void 0):e._clampToGround||(f.height=0),(0,m.Z)(d)){for(var g=new L.Z(d),y=ze(i,"innerBoundaryIs",Oe.kml),_=0;_<y.length;_++){a=ze(y[_],"LinearRing",Oe.kml);for(var w=0;w<a.length;w++)l=He(a[w],"coordinates",Oe.kml),d=Fe(l,s),(0,m.Z)(d)&&g.holes.push(new L.Z(d))}f.hierarchy=g}return!0}function kt(e,t,i,n,r){var o=Ye(i,"altitudeMode",Oe.kml),a=Ye(i,"altitudeMode",Oe.gx),l=ze(i,"coord",Oe.gx),s=ze(i,"angles",Oe.gx),d=ze(i,"when",Oe.kml),c=$e(i,"extrude",Oe.kml),u=We(o,a),h=e._ellipsoid;s.length>0&&(0,P.Z)("kml-gx:angles","KML - gx:angles are not supported in gx:Tracks");for(var p=Math.min(l.length,d.length),Z=[],f=[],m=0;m<p;m++){var v=Ve(l[m].textContent,h);Z.push(v),f.push(E.Z.fromIso8601(d[m].textContent))}var g=new fe.Z;return g.addSamples(f,Z),n.position=g,vt(e,n,r,Zt(o,a)),gt(n,r),n.availability=new B.Z,d.length>0&&n.availability.addInterval(new A.Z({start:f[0],stop:f[f.length-1]})),u&&c&&pt(t,n,r),!0}function Ct(e,t,i,n,r,o,a,l,s){var d=e[0],c=e[e.length-1],u=new fe.Z;u.addSamples(e,t),i.intervals.addInterval(new A.Z({start:d,stop:c,isStartIncluded:s,isStopIncluded:s,data:ft(u,a,l)})),n.addInterval(new A.Z({start:d,stop:c,isStartIncluded:s,isStopIncluded:s})),r.intervals.addInterval(new A.Z({start:d,stop:c,isStartIncluded:s,isStopIncluded:s,data:o}))}function bt(e,t,i,n,r){for(var o,a,l,s=$e(i,"interpolate",Oe.gx),d=ze(i,"Track",Oe.gx),c=!1,u=new ve.Z,h=new B.Z,p=new z.Z,Z=e._ellipsoid,f=0,v=d.length;f<v;f++){var g=d[f],y=ze(g,"when",Oe.kml),_=ze(g,"coord",Oe.gx),w=Ye(g,"altitudeMode",Oe.kml),k=Ye(g,"altitudeMode",Oe.gx),C=We(w,k),b=$e(g,"extrude",Oe.kml),x=Math.min(_.length,y.length),M=[];o=[];for(var T=0;T<x;T++){var O=Ve(_[T].textContent,Z);M.push(O),o.push(E.Z.fromIso8601(y[T].textContent))}s&&((0,m.Z)(a)&&Ct([a,o[0]],[l,M[0]],p,h,u,!1,"absolute",void 0,!1),a=o[x-1],l=M[M.length-1]),Ct(o,M,p,h,u,C&&b,w,k,!0),c=c||C&&b}return n.availability=h,n.position=p,vt(e,n,r),gt(n,r),c&&(pt(t,n,r),n.polyline.show=u),!0}var xt,Et={Point:yt,LineString:_t,LinearRing:_t,Polygon:wt,Track:kt,MultiTrack:bt,MultiGeometry:Mt,Model:Tt};function Mt(e,t,i,n,r,o){for(var a=i.childNodes,l=!1,s=0,d=a.length;s<d;s++){var c=a.item(s),u=Et[c.localName];if((0,m.Z)(u)){var h=Ge(c,t,o);h.parent=n,h.name=n.name,h.availability=n.availability,h.description=n.description,h.kml=n.kml,u(e,t,c,h,r)&&(l=!0)}}return l}function Tt(e,t,i,n,r){return(0,P.Z)("kml-unsupportedGeometry","KML - Unsupported geometry: "+i.localName),!1}function Ot(e,t){var i=He(e,"ExtendedData",Oe.kml);if((0,m.Z)(i)){(0,m.Z)(He(i,"SchemaData",Oe.kml))&&(0,P.Z)("kml-schemaData","KML - SchemaData is unsupported"),(0,m.Z)(je(i,"xmlns:prefix"))&&(0,P.Z)("kml-extendedData","KML - ExtendedData with xmlns:prefix is unsupported");var n={},r=ze(i,"Data",Oe.kml);if((0,m.Z)(r))for(var o=r.length,a=0;a<o;a++){var l=r[a],s=je(l,"name");(0,m.Z)(s)&&(n[s]={displayName:Ye(l,"displayName",Oe.kml),value:Ye(l,"value",Oe.kml)})}t.kml.extendedData=n}}function Pt(e,t,i,n,r){var o,a,l,s,d=t.kml,c=d.extendedData,u=Ye(e,"description",Oe.kml),p=(0,f.Z)(t.balloonStyle,i.balloonStyle),Z=h.Z.WHITE,v=h.Z.BLACK,g=u;if((0,m.Z)(p)&&(Z=(0,f.Z)(p.bgColor,h.Z.WHITE),v=(0,f.Z)(p.textColor,h.Z.BLACK),g=(0,f.Z)(p.text,u)),(0,m.Z)(g)){if(g=g.replace("$[name]",(0,f.Z)(t.name,"")),g=g.replace("$[description]",(0,f.Z)(u,"")),g=g.replace("$[address]",(0,f.Z)(d.address,"")),g=g.replace("$[Snippet]",(0,f.Z)(d.snippet,"")),g=g.replace("$[id]",t.id),g=g.replace("$[geDirections]",""),(0,m.Z)(c)){var y=g.match(/\$\[.+?\]/g);if(null!==y)for(o=0;o<y.length;o++){var _=y[o],w=_.substr(2,_.length-3),k=/\/displayName$/.test(w);w=w.replace(/\/displayName$/,""),s=c[w],(0,m.Z)(s)&&(s=k?s.displayName:s.value),(0,m.Z)(s)&&(g=g.replace(_,(0,f.Z)(s,"")))}}}else if((0,m.Z)(c)&&(l=Object.keys(c),l.length>0)){for(g='<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>',o=0;o<l.length;o++)a=l[o],s=c[a],g+="<tr><th>"+(0,f.Z)(s.displayName,a)+"</th><td>"+(0,f.Z)(s.value,"")+"</td></tr>";g+="</tbody></table>"}if((0,m.Z)(g)){g=_e.link(g),xt.innerHTML=g;var C=xt.querySelectorAll("a");for(o=0;o<C.length;o++)C[o].setAttribute("target","_blank");(0,m.Z)(n)&&n.keys.length>1&&(Be(xt,"a","href",n),Be(xt,"img","src",n)),De(xt,"a","href",r),De(xt,"img","src",r);var b='<div class="cesium-infoBox-description-lighter" style="';b+="overflow:auto;",b+="word-wrap:break-word;",b+="background-color:"+Z.toCssColorString()+";",b+="color:"+v.toCssColorString()+";",b+='">',b+=xt.innerHTML+"</div>",xt.innerHTML="",t.description=b}}function St(e,t,i){var n=i.entityCollection,r=i.parentEntity,o=i.sourceResource,a=i.uriResolver,l=Ge(t,n,i.context),s=l.kml,d=ct(e,t,i.styleCollection,o,a),c=Ye(t,"name",Oe.kml);l.name=c,l.parent=r;var u=nt(t);function h(e){return!e||e.show&&h(e.parent)}(0,m.Z)(u)||(u=it(t)),l.availability=u,ni(l);var p=$e(t,"visibility",Oe.kml);l.show=h(r)&&(0,f.Z)(p,!0);var Z=He(t,"author",Oe.atom),v=s.author;v.name=Ye(Z,"name",Oe.atom),v.uri=Ye(Z,"uri",Oe.atom),v.email=Ye(Z,"email",Oe.atom);var g=He(t,"link",Oe.atom),y=s.link;y.href=je(g,"href"),y.hreflang=je(g,"hreflang"),y.rel=je(g,"rel"),y.type=je(g,"type"),y.title=je(g,"title"),y.length=je(g,"length"),s.address=Ye(t,"address",Oe.kml),s.phoneNumber=Ye(t,"phoneNumber",Oe.kml),s.snippet=Ye(t,"Snippet",Oe.kml),Ot(t,l),Pt(t,l,d,a,o);var _=e._ellipsoid;return Wt(t,l,_),Gt(t,l,_),(0,m.Z)(He(t,"Region",Oe.kml))&&(0,P.Z)("kml-region","KML - Placemark Regions are unsupported"),{entity:l,styleEntity:d}}function Lt(e,t,i,n){n.addNodes(t.childNodes,i),n.process()}function Nt(e,t,i,n){var r=St(e,t,i),o=(0,u.Z)(i);o.parentEntity=r.entity,Lt(e,t,o,n)}function It(e,t,i,n){for(var r=St(e,t,i),o=r.entity,a=r.styleEntity,l=!1,s=t.childNodes,d=0,c=s.length;d<c&&!l;d++){var u=s.item(d),h=Et[u.localName];(0,m.Z)(h)&&(h(e,i.entityCollection,u,o,a,o.id),l=!0)}l||(o.merge(a),vt(e,o,a))}"undefined"!==typeof document&&(xt=document.createElement("div"));var Rt={FlyTo:Dt,Wait:Bt,SoundCue:At,AnimatedUpdate:At,TourControl:At};function Ut(e,t,i,n){var r=Ye(t,"name",Oe.kml),o=je(t,"id"),a=new oe.Z(r,o),l=He(t,"Playlist",Oe.gx);if(l)for(var s=e._ellipsoid,d=l.childNodes,c=0;c<d.length;c++){var u=d[c];if(u.localName){var h=Rt[u.localName];h?h(a,u,s):console.log("Unknown KML Tour playlist entry type "+u.localName)}}e._kmlTours.push(a)}function At(e,t){(0,P.Z)("KML Tour unsupported node "+t.localName)}function Bt(e,t){var i=Xe(t,"duration",Oe.gx);e.addPlaylistEntry(new le.Z(i))}function Dt(e,t,i){var n=Xe(t,"duration",Oe.gx),r=Ye(t,"flyToMode",Oe.gx),o={kml:{}};Wt(t,o,i),Gt(t,o,i);var a=o.kml.lookAt||o.kml.camera,l=new ae.Z(n,r,a);e.addPlaylistEntry(l)}function Gt(e,t,i){var n=He(e,"Camera",Oe.kml);if((0,m.Z)(n)){var r=(0,f.Z)(Xe(n,"longitude",Oe.kml),0),o=(0,f.Z)(Xe(n,"latitude",Oe.kml),0),a=(0,f.Z)(Xe(n,"altitude",Oe.kml),0),s=(0,f.Z)(Xe(n,"heading",Oe.kml),0),d=(0,f.Z)(Xe(n,"tilt",Oe.kml),0),c=(0,f.Z)(Xe(n,"roll",Oe.kml),0),u=l.Z.fromDegrees(r,o,a,i),h=b.Z.fromDegrees(s,d-90,c);t.kml.camera=new te(u,h)}}function Wt(e,t,i){var n=He(e,"LookAt",Oe.kml);if((0,m.Z)(n)){var r=(0,f.Z)(Xe(n,"longitude",Oe.kml),0),o=(0,f.Z)(Xe(n,"latitude",Oe.kml),0),a=(0,f.Z)(Xe(n,"altitude",Oe.kml),0),s=Xe(n,"heading",Oe.kml),d=Xe(n,"tilt",Oe.kml),c=(0,f.Z)(Xe(n,"range",Oe.kml),0);d=M.Z.toRadians((0,f.Z)(d,0)),s=M.Z.toRadians((0,f.Z)(s,0));var u=new C.Z(s,d-M.Z.PI_OVER_TWO,c),h=l.Z.fromDegrees(r,o,a,i);t.kml.lookAt=new re(h,u)}}function Vt(e,t,i,n){var r,o=St(e,t,i),a=o.entity,l=!1,s=e._ellipsoid,d=Fe(He(t,"LatLonQuad",Oe.gx),s),c=Xe(t,"drawOrder",Oe.kml);if((0,m.Z)(d))r=ot(),r.hierarchy=new L.Z(d),r.zIndex=c,a.polygon=r,l=!0;else{r=new pe.Z,r.zIndex=c,a.rectangle=r;var u=He(t,"LatLonBox",Oe.kml);if((0,m.Z)(u)){var h=Xe(u,"west",Oe.kml),p=Xe(u,"south",Oe.kml),Z=Xe(u,"east",Oe.kml),f=Xe(u,"north",Oe.kml);(0,m.Z)(h)&&(h=M.Z.negativePiToPi(M.Z.toRadians(h))),(0,m.Z)(p)&&(p=M.Z.clampToLatitudeRange(M.Z.toRadians(p))),(0,m.Z)(Z)&&(Z=M.Z.negativePiToPi(M.Z.toRadians(Z))),(0,m.Z)(f)&&(f=M.Z.clampToLatitudeRange(M.Z.toRadians(f))),r.coordinates=new I.Z(h,p,Z,f);var v=Xe(u,"rotation",Oe.kml);if((0,m.Z)(v)){var g=M.Z.toRadians(v);r.rotation=g,r.stRotation=g}}}var y=He(t,"Icon",Oe.kml),_=lt(y,e,i.sourceResource,i.uriResolver,!0);if((0,m.Z)(_)){l&&(0,P.Z)("kml-gx:LatLonQuad","KML - gx:LatLonQuad Icon does not support texture projection.");var w=Xe(y,"x",Oe.gx),k=Xe(y,"y",Oe.gx),C=Xe(y,"w",Oe.gx),b=Xe(y,"h",Oe.gx);((0,m.Z)(w)||(0,m.Z)(k)||(0,m.Z)(C)||(0,m.Z)(b))&&(0,P.Z)("kml-groundOverlay-xywh","KML - gx:x, gx:y, gx:w, gx:h aren't supported for GroundOverlays"),r.material=_,r.material.color=tt(t,"color",Oe.kml),r.material.transparent=!0}else r.material=tt(t,"color",Oe.kml);var x=Ye(t,"altitudeMode",Oe.kml);(0,m.Z)(x)?"absolute"===x?(r.height=Xe(t,"altitude",Oe.kml),r.zIndex=void 0):"clampToGround"!==x&&(0,P.Z)("kml-altitudeMode-unknown","KML - Unknown altitudeMode: "+x):(x=Ye(t,"altitudeMode",Oe.gx),"relativeToSeaFloor"===x?((0,P.Z)("kml-altitudeMode-relativeToSeaFloor","KML - altitudeMode relativeToSeaFloor is currently not supported, treating as absolute."),r.height=Xe(t,"altitude",Oe.kml),r.zIndex=void 0):"clampToSeaFloor"===x?(0,P.Z)("kml-altitudeMode-clampToSeaFloor","KML - altitudeMode clampToSeaFloor is currently not supported, treating as clampToGround."):(0,m.Z)(x)&&(0,P.Z)("kml-altitudeMode-unknown","KML - Unknown altitudeMode: "+x))}function Ft(e,t,i,n){e._unsupportedNode.raiseEvent(e,i.parentEntity,t,i.entityCollection,i.styleCollection,i.sourceResource,i.uriResolver),(0,P.Z)("kml-unsupportedFeature-"+t.nodeName,"KML - Unsupported feature: "+t.nodeName)}var Kt={INTERVAL:0,EXPIRE:1,STOP:2};function jt(e){if(!(0,m.Z)(e)||0===e.length)return"";var t=e[0];return"&"!==t&&"?"!==t||(e=e.substring(1)),e}var Ht=new I.Z,qt=new s.Z,zt=new a.Z,Xt=new l.Z;function Yt(e,t,i,n,r,o){function a(e){return e<-M.Z.PI_OVER_TWO?-M.Z.PI_OVER_TWO:e>M.Z.PI_OVER_TWO?M.Z.PI_OVER_TWO:e}function s(e){return e>M.Z.PI?e-M.Z.TWO_PI:e<-M.Z.PI?e+M.Z.TWO_PI:e}var d=(0,O.Z)(e.queryParameters);if(d=d.replace(/%5B/g,"[").replace(/%5D/g,"]"),(0,m.Z)(t)&&t._mode!==V.Z.MORPHING){var c,u;if(r=(0,f.Z)(r,Ht),(0,m.Z)(i)&&(zt.x=.5*i.clientWidth,zt.y=.5*i.clientHeight,c=t.pickEllipsoid(zt,o,Xt)),(0,m.Z)(c)?u=o.cartesianToCartographic(c,qt):(u=I.Z.center(r,qt),c=o.cartographicToCartesian(u)),(0,m.Z)(n)&&!M.Z.equalsEpsilon(n,1,M.Z.EPSILON9)){var h=r.width*n*.5,p=r.height*n*.5;r=new I.Z(s(u.longitude-h),a(u.latitude-p),s(u.longitude+h),a(u.latitude+p))}d=d.replace("[bboxWest]",M.Z.toDegrees(r.west).toString()),d=d.replace("[bboxSouth]",M.Z.toDegrees(r.south).toString()),d=d.replace("[bboxEast]",M.Z.toDegrees(r.east).toString()),d=d.replace("[bboxNorth]",M.Z.toDegrees(r.north).toString());var Z=M.Z.toDegrees(u.longitude).toString(),v=M.Z.toDegrees(u.latitude).toString();d=d.replace("[lookatLon]",Z),d=d.replace("[lookatLat]",v),d=d.replace("[lookatTilt]",M.Z.toDegrees(t.pitch).toString()),d=d.replace("[lookatHeading]",M.Z.toDegrees(t.heading).toString()),d=d.replace("[lookatRange]",l.Z.distance(t.positionWC,c)),d=d.replace("[lookatTerrainLon]",Z),d=d.replace("[lookatTerrainLat]",v),d=d.replace("[lookatTerrainAlt]",u.height.toString()),o.cartesianToCartographic(t.positionWC,qt),d=d.replace("[cameraLon]",M.Z.toDegrees(qt.longitude).toString()),d=d.replace("[cameraLat]",M.Z.toDegrees(qt.latitude).toString()),d=d.replace("[cameraAlt]",M.Z.toDegrees(qt.height).toString());var g=t.frustum,y=g.aspectRatio,_="",w="";if((0,m.Z)(y)){var k=M.Z.toDegrees(g.fov);y>1?(_=k,w=k/y):(w=k,_=k*y)}d=d.replace("[horizFov]",_.toString()),d=d.replace("[vertFov]",w.toString())}else d=d.replace("[bboxWest]","-180"),d=d.replace("[bboxSouth]","-90"),d=d.replace("[bboxEast]","180"),d=d.replace("[bboxNorth]","90"),d=d.replace("[lookatLon]",""),d=d.replace("[lookatLat]",""),d=d.replace("[lookatRange]",""),d=d.replace("[lookatTilt]",""),d=d.replace("[lookatHeading]",""),d=d.replace("[lookatTerrainLon]",""),d=d.replace("[lookatTerrainLat]",""),d=d.replace("[lookatTerrainAlt]",""),d=d.replace("[cameraLon]",""),d=d.replace("[cameraLat]",""),d=d.replace("[cameraAlt]",""),d=d.replace("[horizFov]",""),d=d.replace("[vertFov]","");(0,m.Z)(i)?(d=d.replace("[horizPixels]",i.clientWidth),d=d.replace("[vertPixels]",i.clientHeight)):(d=d.replace("[horizPixels]",""),d=d.replace("[vertPixels]","")),d=d.replace("[terrainEnabled]","1"),d=d.replace("[clientVersion]","1"),d=d.replace("[kmlVersion]","2.2"),d=d.replace("[clientName]","Cesium"),d=d.replace("[language]","English"),e.setQueryParameters((0,N.Z)(d))}function $t(e,t,i,n){var r=St(e,t,i),o=r.entity,a=i.sourceResource,l=i.uriResolver,s=He(t,"Link",Oe.kml);if((0,m.Z)(s)||(s=He(t,"Url",Oe.kml)),(0,m.Z)(s)){var d,c,u=Ye(s,"href",Oe.kml);if((0,m.Z)(u)){var h=u;if(u=Qe(u,a,i.uriResolver),/^data:/.test(u.getUrlComponent()))/\.kmz/i.test(a.getUrlComponent())||(h=a.getDerivedResource({url:h}));else{h=u.clone(),d=Ye(s,"viewRefreshMode",Oe.kml),c=(0,f.Z)(Ye(s,"viewBoundScale",Oe.kml),1);var Z="onStop"===d?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",v=(0,f.Z)(Ye(s,"viewFormat",Oe.kml),Z),g=Ye(s,"httpQuery",Oe.kml);(0,m.Z)(v)&&u.setQueryParameters((0,N.Z)(jt(v))),(0,m.Z)(g)&&u.setQueryParameters((0,N.Z)(jt(g)));var y=e._ellipsoid;Yt(u,e._camera,e._canvas,c,e._lastCameraView.bbox,y)}var _={sourceUri:h,uriResolver:l,context:o.id},w=new J.Z,k=ti(e,w,u,_).then((function(t){var i=e._entityCollection,n=w.values;i.suspendEvents();for(var r=0;r<n.length;r++){var a=n[r];(0,m.Z)(a.parent)||(a.parent=o,ni(a)),i.add(a)}i.resumeEvents();var l=Ye(s,"refreshMode",Oe.kml),h=(0,f.Z)(Xe(s,"refreshInterval",Oe.kml),0);if("onInterval"===l&&h>0||"onExpire"===l||"onStop"===d){var Z=He(t,"NetworkLinkControl",Oe.kml),v=(0,m.Z)(Z),g=E.Z.now(),y={id:(0,p.Z)(),href:u,cookie:{},lastUpdated:g,updating:!1,entity:o,viewBoundScale:c,needsUpdate:!1,cameraUpdateTime:g},_=0;if(v&&(y.cookie=(0,N.Z)((0,f.Z)(Ye(Z,"cookie",Oe.kml),"")),_=(0,f.Z)(Xe(Z,"minRefreshPeriod",Oe.kml),0)),"onInterval"===l)v&&(h=Math.max(_,h)),y.refreshMode=Kt.INTERVAL,y.time=h;else if("onExpire"===l){var k;if(v&&(k=Ye(Z,"expires",Oe.kml)),(0,m.Z)(k))try{var C=E.Z.fromIso8601(k),b=E.Z.secondsDifference(C,g);b>0&&b<_&&E.Z.addSeconds(g,_,C),y.refreshMode=Kt.EXPIRE,y.time=C}catch(x){(0,P.Z)("kml-refreshMode-onInterval-onExpire","KML - NetworkLinkControl expires is not a valid date")}else(0,P.Z)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element")}else e._camera?(y.refreshMode=Kt.STOP,y.time=(0,f.Z)(Xe(s,"viewRefreshTime",Oe.kml),0)):(0,P.Z)("kml-refrehMode-onStop-noCamera","A NetworkLink with viewRefreshMode=onStop requires a camera be passed in when creating the KmlDataSource");(0,m.Z)(y.refreshMode)&&e._networkLinks.set(y.id,y)}else"onRegion"===d&&(0,P.Z)("kml-refrehMode-onRegion","KML - Unsupported viewRefreshMode: onRegion")})).otherwise((function(t){(0,P.Z)("An error occured during loading "+u.url),e._error.raiseEvent(e,t)}));n.addPromise(k)}}}function Qt(e,t,i,n){var r=Pe[t.localName];return(0,m.Z)(r)?r(e,t,i,n):Ft(e,t,i,n)}function Jt(e,t,i,n,r,o){t.removeAll();var a=i.documentElement,l="Document"===a.localName?a:He(a,"Document",Oe.kml),s=Ye(l,"name",Oe.kml);(0,m.Z)(s)||(s=(0,w.Z)(n.getUrlComponent())),(0,m.Z)(e._name)||(e._name=s);var d=new ii._DeferredLoading(e),c=new J.Z(e);return j.Z.all(ht(e,i,c,n,!1,r)).then((function(){var a=i.documentElement;if("kml"===a.localName)for(var l=a.childNodes,s=0;s<l.length;s++){var u=l[s];if((0,m.Z)(Pe[u.localName])){a=u;break}}var h={parentEntity:void 0,entityCollection:t,styleCollection:c,sourceResource:n,uriResolver:r,context:o};return t.suspendEvents(),Qt(e,a,h,d),t.resumeEvents(),d.wait().then((function(){return i.documentElement}))}))}function ei(e,t,i,n){var r=new H.Z.ZipReader(new H.Z.BlobReader(i));return(0,j.Z)(r.getEntries()).then((function(i){for(var o,a=[],l={},s=0;s<i.length;s++){var d=i[s];d.directory||(/\.kml$/i.test(d.filename)?(0,m.Z)(o)&&/\//i.test(d.filename)?a.push(Ae(d,l)):((0,m.Z)(o)&&a.push(Ae(o,l)),o=d):a.push(Ae(d,l)))}return(0,m.Z)(o)&&a.push(Ue(o,l)),j.Z.all(a).then((function(){if(r.close(),!(0,m.Z)(l.kml))throw new U.Z("KMZ file does not contain a KML document.");return l.keys=Object.keys(l),Jt(e,t,l.kml,n,l)}))}))}function ti(e,t,i,n){n=(0,f.Z)(n,f.Z.EMPTY_OBJECT);var r=n.sourceUri,o=n.uriResolver,a=n.context,l=i;if("string"===typeof i||i instanceof R.Z){i=R.Z.createIfNeeded(i),l=i.fetchBlob(),r=(0,f.Z)(r,i.clone());var s=e._resourceCredits,d=i.credits;if((0,m.Z)(d))for(var c=d.length,u=0;u<c;u++)s.push(d[u])}else r=(0,f.Z)(r,R.Z.DEFAULT.clone());return r=R.Z.createIfNeeded(r),(0,j.Z)(l).then((function(i){return i instanceof Blob?Le(i).then((function(n){return n?ei(e,t,i,r):Ne(i).then((function(i){var n,l;i=Ie(i),i=Re(i);try{n=ne.parseFromString(i,"application/xml")}catch(d){l=d.toString()}if((0,m.Z)(l)||n.body||"parsererror"===n.documentElement.tagName){var s=(0,m.Z)(l)?l:n.documentElement.firstChild.nodeValue;throw s||(s=n.body.innerText),new U.Z(s)}return Jt(e,t,n,r,o,a)}))})):Jt(e,t,i,r,o,a)})).otherwise((function(t){return e._error.raiseEvent(e,t),console.log(t),j.Z.reject(t)}))}function ii(e){e=(0,f.Z)(e,f.Z.EMPTY_OBJECT);var t=e.camera,i=e.canvas;if(!(0,m.Z)(t))throw new v.Z("options.camera is required.");if(!(0,m.Z)(i))throw new v.Z("options.canvas is required.");this._changed=new y.Z,this._error=new y.Z,this._loading=new y.Z,this._refresh=new y.Z,this._unsupportedNode=new y.Z,this._clock=void 0,this._entityCollection=new J.Z(this),this._name=void 0,this._isLoading=!1,this._pinBuilder=new S.Z,this._networkLinks=new r.Z,this._entityCluster=new Q.Z,this._canvas=i,this._camera=t,this._lastCameraView={position:(0,m.Z)(t)?l.Z.clone(t.positionWC):void 0,direction:(0,m.Z)(t)?l.Z.clone(t.directionWC):void 0,up:(0,m.Z)(t)?l.Z.clone(t.upWC):void 0,bbox:(0,m.Z)(t)?t.computeViewRectangle():I.Z.clone(I.Z.MAX_VALUE)},this._ellipsoid=(0,f.Z)(e.ellipsoid,g.Z.WGS84);var n=e.credit;"string"===typeof n&&(n=new Z.Z(n)),this._credit=n,this._resourceCredits=[],this._kmlTours=[]}function ni(e){var t=e.parent;if((0,m.Z)(t)){var i=t.availability;if((0,m.Z)(i)){var n=e.availability;(0,m.Z)(n)?n.intersect(i):e.availability=i}}}function ri(e,t,i,n,r){return function(o){if(n.contains(t.id)){var a=!1,l=He(o,"NetworkLinkControl",Oe.kml),s=(0,m.Z)(l),d=0;if(s){if((0,m.Z)(He(l,"Update",Oe.kml)))return(0,P.Z)("kml-networkLinkControl-update","KML - NetworkLinkControl updates aren't supported."),t.updating=!1,void n.remove(t.id);t.cookie=(0,N.Z)((0,f.Z)(Ye(l,"cookie",Oe.kml),"")),d=(0,f.Z)(Xe(l,"minRefreshPeriod",Oe.kml),0)}var c=E.Z.now(),u=t.refreshMode;if(u===Kt.INTERVAL)(0,m.Z)(l)&&(t.time=Math.max(d,t.time));else if(u===Kt.EXPIRE){var h;if((0,m.Z)(l)&&(h=Ye(l,"expires",Oe.kml)),(0,m.Z)(h))try{var p=E.Z.fromIso8601(h),Z=E.Z.secondsDifference(p,c);Z>0&&Z<d&&E.Z.addSeconds(c,d,p),t.time=p}catch(R){(0,P.Z)("kml-networkLinkControl-expires","KML - NetworkLinkControl expires is not a valid date"),a=!0}else(0,P.Z)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element"),a=!0}var v=t.entity,g=e._entityCollection,y=i.values;g.suspendEvents();var _,w=g.values.slice();for(_=0;_<w.length;++_){var k=w[_];k.parent===v&&(k.parent=void 0,I(k))}for(g.resumeEvents(),g.suspendEvents(),_=0;_<y.length;_++){var C=y[_];(0,m.Z)(C.parent)||(C.parent=v,ni(C)),g.add(C)}g.resumeEvents(),a?n.remove(t.id):t.lastUpdated=c;var b=g.computeAvailability(),M=b.start,T=b.stop,O=E.Z.equals(M,x.Z.MINIMUM_VALUE),S=E.Z.equals(T,x.Z.MAXIMUM_VALUE);if(!O||!S){var L=e._clock;L.startTime===M&&L.stopTime===T||(L.startTime=M,L.stopTime=T,e._changed.raiseEvent(e))}t.updating=!1,t.needsUpdate=!1,e._refresh.raiseEvent(e,r.getUrlComponent(!0))}function I(e){g.remove(e);for(var t=e._children,i=t.length,n=0;n<i;++n)I(t[n])}}}ii.load=function(e,t){t=(0,f.Z)(t,f.Z.EMPTY_OBJECT);var i=new ii(t);return i.load(e,t)},Object.defineProperties(ii.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},refreshEvent:{get:function(){return this._refresh}},unsupportedNodeEvent:{get:function(){return this._unsupportedNode}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,m.Z)(e))throw new v.Z("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}},kmlTours:{get:function(){return this._kmlTours}}}),ii.prototype.load=function(e,t){if(!(0,m.Z)(e))throw new v.Z("data is required.");t=(0,f.Z)(t,f.Z.EMPTY_OBJECT),X.Z.setLoading(this,!0);var i=this._name;this._name=void 0,this._clampToGround=(0,f.Z)(t.clampToGround,!1);var n=this;return ti(this,this._entityCollection,e,t).then((function(){var e,t,r=n._entityCollection.computeAvailability(),o=r.start,a=r.stop,l=E.Z.equals(o,x.Z.MINIMUM_VALUE),s=E.Z.equals(a,x.Z.MAXIMUM_VALUE);l&&s||(l&&(t=new Date,t.setHours(0,0,0,0),o=E.Z.fromDate(t)),s&&(t=new Date,t.setHours(24,0,0,0),a=E.Z.fromDate(t)),e=new Y.Z,e.startTime=o,e.stopTime=a,e.currentTime=E.Z.clone(o),e.clockRange=d.Z.LOOP_STOP,e.clockStep=c.Z.SYSTEM_CLOCK_MULTIPLIER,e.multiplier=Math.round(Math.min(Math.max(E.Z.secondsDifference(a,o)/60,1),31556900)));var u=!1;return e!==n._clock&&(n._clock=e,u=!0),i!==n._name&&(u=!0),u&&n._changed.raiseEvent(n),X.Z.setLoading(n,!1),n})).otherwise((function(e){return X.Z.setLoading(n,!1),n._error.raiseEvent(n,e),console.log(e),j.Z.reject(e)}))};var oi=new r.Z;function ai(){this.author={name:void 0,uri:void 0,email:void 0},this.link={href:void 0,hreflang:void 0,rel:void 0,type:void 0,title:void 0,length:void 0},this.address=void 0,this.phoneNumber=void 0,this.snippet=void 0,this.extendedData=void 0}ii.prototype.update=function(e){var t=this._networkLinks;if(0===t.length)return!0;var i=E.Z.now(),n=this;function o(e){for(var t=e._children,i=t.length,n=0;n<i;++n){var r=t[n];oi.set(r.id,r),o(r)}}oi.removeAll();var a=!1,s=this._lastCameraView,d=this._camera;!(0,m.Z)(d)||d.positionWC.equalsEpsilon(s.position,M.Z.EPSILON7)&&d.directionWC.equalsEpsilon(s.direction,M.Z.EPSILON7)&&d.upWC.equalsEpsilon(s.up,M.Z.EPSILON7)||(s.position=l.Z.clone(d.positionWC),s.direction=l.Z.clone(d.directionWC),s.up=l.Z.clone(d.upWC),s.bbox=d.computeViewRectangle(),a=!0);var c=new r.Z,u=!1;return t.values.forEach((function(e){var t=e.entity;if(!oi.contains(t.id)){if(!e.updating){var r=!1;if(e.refreshMode===Kt.INTERVAL?E.Z.secondsDifference(i,e.lastUpdated)>e.time&&(r=!0):e.refreshMode===Kt.EXPIRE?E.Z.greaterThan(i,e.time)&&(r=!0):e.refreshMode===Kt.STOP&&(a&&(e.needsUpdate=!0,e.cameraUpdateTime=i),e.needsUpdate&&E.Z.secondsDifference(i,e.cameraUpdateTime)>=e.time&&(r=!0)),r){o(t),e.updating=!0;var l=new J.Z,d=e.href.clone();d.setQueryParameters(e.cookie);var h=(0,f.Z)(n._ellipsoid,g.Z.WGS84);Yt(d,n._camera,n._canvas,e.viewBoundScale,s.bbox,h),ti(n,l,d,{context:t.id}).then(ri(n,e,l,c,d)).otherwise((function(t){var i="NetworkLink "+e.href+" refresh failed: "+t;console.log(i),n._error.raiseEvent(n,i)})),u=!0}}c.set(e.id,e)}})),u&&(this._networkLinks=c,this._changed.raiseEvent(this)),!0},ii._DeferredLoading=Se,ii._getTimestamp=k.Z},20217:function(e,t,i){var n=i(82982),r=i(14459);function o(e,t){this.id=t,this.name=e,this.playlistIndex=0,this.playlist=[],this.tourStart=new r.Z,this.tourEnd=new r.Z,this.entryStart=new r.Z,this.entryEnd=new r.Z,this._activeEntries=[]}function a(e){for(var t=e.pop();void 0!==t;t=e.pop())t.stop()}function l(e,t,i){var r=this.playlist[this.playlistIndex];if(r){var o=s.bind(this,e,t,i);if(this._activeEntries.push(r),this.entryStart.raiseEvent(r),r.blocking)r.play(o,e.scene.camera,t);else{var a=this;r.play((function(){a.entryEnd.raiseEvent(r);var e=a._activeEntries.indexOf(r);e>=0&&a._activeEntries.splice(e,1)})),o(e,t,i)}}else(0,n.Z)(i)&&i(!1)}function s(e,t,i,n){var r=this.playlist[this.playlistIndex];if(this.entryEnd.raiseEvent(r,n),n)i(n);else{var o=this._activeEntries.indexOf(r);o>=0&&this._activeEntries.splice(o,1),this.playlistIndex++,l.call(this,e,t,i)}}o.prototype.addPlaylistEntry=function(e){this.playlist.push(e)},o.prototype.play=function(e,t){this.tourStart.raiseEvent();var i=this;l.call(this,e,t,(function(e){i.playlistIndex=0,e||a(i._activeEntries),i.tourEnd.raiseEvent(e)}))},o.prototype.stop=function(){a(this._activeEntries)},t["Z"]=o},98826:function(e,t,i){var n=i(48243),r=i(8182),o=i(82982),a=i(50732);function l(e,t,i){this.type="KmlTourFlyTo",this.blocking=!0,this.activeCamera=null,this.activeCallback=null,this.duration=e,this.view=i,this.flyToMode=t}l.prototype.play=function(e,t,i){if(this.activeCamera=t,(0,o.Z)(e)&&null!==e){var r=this;this.activeCallback=function(t){delete r.activeCallback,delete r.activeCamera,e(!(0,o.Z)(t)&&t)}}var a=this.getCameraOptions(i);if(this.view.headingPitchRoll)t.flyTo(a);else if(this.view.headingPitchRange){var l=new n.Z(this.view.position);t.flyToBoundingSphere(l,a)}},l.prototype.stop=function(){(0,o.Z)(this.activeCamera)&&this.activeCamera.cancelFlight(),(0,o.Z)(this.activeCallback)&&this.activeCallback(!0)},l.prototype.getCameraOptions=function(e){var t={duration:this.duration};return(0,o.Z)(this.activeCallback)&&(t.complete=this.activeCallback),"smooth"===this.flyToMode&&(t.easingFunction=a.Z.LINEAR_NONE),this.view.headingPitchRoll?(t.destination=this.view.position,t.orientation=this.view.headingPitchRoll):this.view.headingPitchRange&&(t.offset=this.view.headingPitchRange),(0,o.Z)(e)&&(t=(0,r.Z)(t,e)),t},t["Z"]=l},86729:function(e,t,i){var n=i(82982);function r(e){this.type="KmlTourWait",this.blocking=!0,this.duration=e,this.timeout=null}r.prototype.play=function(e){var t=this;this.activeCallback=e,this.timeout=setTimeout((function(){delete t.activeCallback,e(!1)}),1e3*this.duration)},r.prototype.stop=function(){clearTimeout(this.timeout),(0,n.Z)(this.activeCallback)&&this.activeCallback(!0)},t["Z"]=r}}]);
//# sourceMappingURL=chunk-vendors-4002a8e8.0e4357f4.js.map