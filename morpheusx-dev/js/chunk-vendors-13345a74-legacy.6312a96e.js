"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[7090],{73705:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88108);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12572);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(47861);\n/* harmony import */ var _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(15720);\n/* harmony import */ var _Billboard_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(80349);\n/* harmony import */ var _HeightReference_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(4260);\n/* harmony import */ var _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(62919);\n/* harmony import */ var _LabelStyle_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(81208);\n/* harmony import */ var _SDFSettings_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(36191);\n/* harmony import */ var _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(60473);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar fontInfoCache = {};\nvar fontInfoCacheLength = 0;\nvar fontInfoCacheMaxSize = 256;\nvar defaultBackgroundColor = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(0.165, 0.165, 0.165, 0.8);\nvar defaultBackgroundPadding = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(7, 5);\n\nvar textTypes = Object.freeze({\n  LTR: 0,\n  RTL: 1,\n  WEAK: 2,\n  BRACKETS: 3,\n});\n\nfunction rebindAllGlyphs(label) {\n  if (!label._rebindAllGlyphs && !label._repositionAllGlyphs) {\n    // only push label if it\'s not already been marked dirty\n    label._labelCollection._labelsToUpdate.push(label);\n  }\n  label._rebindAllGlyphs = true;\n}\n\nfunction repositionAllGlyphs(label) {\n  if (!label._rebindAllGlyphs && !label._repositionAllGlyphs) {\n    // only push label if it\'s not already been marked dirty\n    label._labelCollection._labelsToUpdate.push(label);\n  }\n  label._repositionAllGlyphs = true;\n}\n\nfunction getCSSValue(element, property) {\n  return document.defaultView\n    .getComputedStyle(element, null)\n    .getPropertyValue(property);\n}\n\nfunction parseFont(label) {\n  var fontInfo = fontInfoCache[label._font];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(fontInfo)) {\n    var div = document.createElement("div");\n    div.style.position = "absolute";\n    div.style.opacity = 0;\n    div.style.font = label._font;\n    document.body.appendChild(div);\n\n    var lineHeight = parseFloat(getCSSValue(div, "line-height"));\n    if (isNaN(lineHeight)) {\n      // line-height isn\'t a number, i.e. \'normal\'; apply default line-spacing\n      lineHeight = undefined;\n    }\n\n    fontInfo = {\n      family: getCSSValue(div, "font-family"),\n      size: getCSSValue(div, "font-size").replace("px", ""),\n      style: getCSSValue(div, "font-style"),\n      weight: getCSSValue(div, "font-weight"),\n      lineHeight: lineHeight,\n    };\n\n    document.body.removeChild(div);\n    if (fontInfoCacheLength < fontInfoCacheMaxSize) {\n      fontInfoCache[label._font] = fontInfo;\n      fontInfoCacheLength++;\n    }\n  }\n  label._fontFamily = fontInfo.family;\n  label._fontSize = fontInfo.size;\n  label._fontStyle = fontInfo.style;\n  label._fontWeight = fontInfo.weight;\n  label._lineHeight = fontInfo.lineHeight;\n}\n\n/**\n * A Label draws viewport-aligned text positioned in the 3D scene.  This constructor\n * should not be used directly, instead create labels by calling {@link LabelCollection#add}.\n *\n * @alias Label\n * @internalConstructor\n * @class\n *\n * @exception {DeveloperError} translucencyByDistance.far must be greater than translucencyByDistance.near\n * @exception {DeveloperError} pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near\n * @exception {DeveloperError} distanceDisplayCondition.far must be greater than distanceDisplayCondition.near\n *\n * @see LabelCollection\n * @see LabelCollection#add\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Labels.html|Cesium Sandcastle Labels Demo}\n */\nfunction Label(options, labelCollection) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(options.disableDepthTestDistance) &&\n    options.disableDepthTestDistance < 0.0\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n      "disableDepthTestDistance must be greater than 0.0."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var translucencyByDistance = options.translucencyByDistance;\n  var pixelOffsetScaleByDistance = options.pixelOffsetScaleByDistance;\n  var scaleByDistance = options.scaleByDistance;\n  var distanceDisplayCondition = options.distanceDisplayCondition;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(translucencyByDistance)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (translucencyByDistance.far <= translucencyByDistance.near) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n        "translucencyByDistance.far must be greater than translucencyByDistance.near."\n      );\n    }\n    //>>includeEnd(\'debug\');\n    translucencyByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(translucencyByDistance);\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(pixelOffsetScaleByDistance)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (pixelOffsetScaleByDistance.far <= pixelOffsetScaleByDistance.near) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n        "pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near."\n      );\n    }\n    //>>includeEnd(\'debug\');\n    pixelOffsetScaleByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(\n      pixelOffsetScaleByDistance\n    );\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(scaleByDistance)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (scaleByDistance.far <= scaleByDistance.near) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n        "scaleByDistance.far must be greater than scaleByDistance.near."\n      );\n    }\n    //>>includeEnd(\'debug\');\n    scaleByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(scaleByDistance);\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(distanceDisplayCondition)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (distanceDisplayCondition.far <= distanceDisplayCondition.near) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n        "distanceDisplayCondition.far must be greater than distanceDisplayCondition.near."\n      );\n    }\n    //>>includeEnd(\'debug\');\n    distanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(\n      distanceDisplayCondition\n    );\n  }\n\n  this._renderedText = undefined;\n  this._text = undefined;\n  this._show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.show, true);\n  this._font = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.font, "30px sans-serif");\n  this._fillColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone((0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.fillColor, _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].WHITE */ .Z.WHITE));\n  this._outlineColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.outlineColor, _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].BLACK */ .Z.BLACK)\n  );\n  this._outlineWidth = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.outlineWidth, 1.0);\n  this._showBackground = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.showBackground, false);\n  this._backgroundColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.backgroundColor, defaultBackgroundColor)\n  );\n  this._backgroundPadding = _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.backgroundPadding, defaultBackgroundPadding)\n  );\n  this._style = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.style, _LabelStyle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].FILL */ .Z.FILL);\n  this._verticalOrigin = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    options.verticalOrigin,\n    _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BASELINE */ .Z.BASELINE\n  );\n  this._horizontalOrigin = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    options.horizontalOrigin,\n    _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].LEFT */ .Z.LEFT\n  );\n  this._pixelOffset = _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.pixelOffset, _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO)\n  );\n  this._eyeOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.eyeOffset, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO)\n  );\n  this._position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.position, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO)\n  );\n  this._scale = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.scale, 1.0);\n  this._id = options.id;\n  this._translucencyByDistance = translucencyByDistance;\n  this._pixelOffsetScaleByDistance = pixelOffsetScaleByDistance;\n  this._scaleByDistance = scaleByDistance;\n  this._heightReference = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    options.heightReference,\n    _HeightReference_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].NONE */ .Z.NONE\n  );\n  this._distanceDisplayCondition = distanceDisplayCondition;\n  this._disableDepthTestDistance = options.disableDepthTestDistance;\n\n  this._labelCollection = labelCollection;\n  this._glyphs = [];\n  this._backgroundBillboard = undefined;\n  this._batchIndex = undefined; // Used only by Vector3DTilePoints and BillboardCollection\n\n  this._rebindAllGlyphs = true;\n  this._repositionAllGlyphs = true;\n\n  this._actualClampedPosition = undefined;\n  this._removeCallbackFunc = undefined;\n  this._mode = undefined;\n\n  this._clusterShow = true;\n\n  this.text = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.text, "");\n\n  this._relativeSize = 1.0;\n\n  parseFont(this);\n\n  this._updateClamping();\n}\n\nObject.defineProperties(Label.prototype, {\n  /**\n   * Determines if this label will be shown.  Use this to hide or show a label, instead\n   * of removing it and re-adding it to the collection.\n   * @memberof Label.prototype\n   * @type {Boolean}\n   * @default true\n   */\n  show: {\n    get: function () {\n      return this._show;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._show !== value) {\n        this._show = value;\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var billboard = glyphs[i].billboard;\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(billboard)) {\n            billboard.show = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.show = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the Cartesian position of this label.\n   * @memberof Label.prototype\n   * @type {Cartesian3}\n   */\n  position: {\n    get: function () {\n      return this._position;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var position = this._position;\n      if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(position, value)) {\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(value, position);\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var billboard = glyphs[i].billboard;\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(billboard)) {\n            billboard.position = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.position = value;\n        }\n\n        this._updateClamping();\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the height reference of this billboard.\n   * @memberof Label.prototype\n   * @type {HeightReference}\n   * @default HeightReference.NONE\n   */\n  heightReference: {\n    get: function () {\n      return this._heightReference;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (value !== this._heightReference) {\n        this._heightReference = value;\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var billboard = glyphs[i].billboard;\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(billboard)) {\n            billboard.heightReference = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.heightReference = value;\n        }\n\n        repositionAllGlyphs(this);\n\n        this._updateClamping();\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the text of this label.\n   * @memberof Label.prototype\n   * @type {String}\n   */\n  text: {\n    get: function () {\n      return this._text;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._text !== value) {\n        this._text = value;\n\n        // Strip soft-hyphen (auto-wrap) characters from input string\n        var renderedValue = value.replace(/\\u00ad/g, "");\n        this._renderedText = Label.enableRightToLeftDetection\n          ? reverseRtl(renderedValue)\n          : renderedValue;\n        rebindAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the font used to draw this label. Fonts are specified using the same syntax as the CSS \'font\' property.\n   * @memberof Label.prototype\n   * @type {String}\n   * @default \'30px sans-serif\'\n   * @see {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles|HTML canvas 2D context text styles}\n   */\n  font: {\n    get: function () {\n      return this._font;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._font !== value) {\n        this._font = value;\n        rebindAllGlyphs(this);\n        parseFont(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the fill color of this label.\n   * @memberof Label.prototype\n   * @type {Color}\n   * @default Color.WHITE\n   * @see {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#fill-and-stroke-styles|HTML canvas 2D context fill and stroke styles}\n   */\n  fillColor: {\n    get: function () {\n      return this._fillColor;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var fillColor = this._fillColor;\n      if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(fillColor, value)) {\n        _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(value, fillColor);\n        rebindAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the outline color of this label.\n   * @memberof Label.prototype\n   * @type {Color}\n   * @default Color.BLACK\n   * @see {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#fill-and-stroke-styles|HTML canvas 2D context fill and stroke styles}\n   */\n  outlineColor: {\n    get: function () {\n      return this._outlineColor;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var outlineColor = this._outlineColor;\n      if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(outlineColor, value)) {\n        _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(value, outlineColor);\n        rebindAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the outline width of this label.\n   * @memberof Label.prototype\n   * @type {Number}\n   * @default 1.0\n   * @see {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#fill-and-stroke-styles|HTML canvas 2D context fill and stroke styles}\n   */\n  outlineWidth: {\n    get: function () {\n      return this._outlineWidth;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._outlineWidth !== value) {\n        this._outlineWidth = value;\n        rebindAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Determines if a background behind this label will be shown.\n   * @memberof Label.prototype\n   * @default false\n   * @type {Boolean}\n   */\n  showBackground: {\n    get: function () {\n      return this._showBackground;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._showBackground !== value) {\n        this._showBackground = value;\n        rebindAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the background color of this label.\n   * @memberof Label.prototype\n   * @type {Color}\n   * @default new Color(0.165, 0.165, 0.165, 0.8)\n   */\n  backgroundColor: {\n    get: function () {\n      return this._backgroundColor;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var backgroundColor = this._backgroundColor;\n      if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(backgroundColor, value)) {\n        _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(value, backgroundColor);\n\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.color = backgroundColor;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the background padding, in pixels, of this label.  The <code>x</code> value\n   * controls horizontal padding, and the <code>y</code> value controls vertical padding.\n   * @memberof Label.prototype\n   * @type {Cartesian2}\n   * @default new Cartesian2(7, 5)\n   */\n  backgroundPadding: {\n    get: function () {\n      return this._backgroundPadding;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var backgroundPadding = this._backgroundPadding;\n      if (!_Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(backgroundPadding, value)) {\n        _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(value, backgroundPadding);\n        repositionAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the style of this label.\n   * @memberof Label.prototype\n   * @type {LabelStyle}\n   * @default LabelStyle.FILL\n   */\n  style: {\n    get: function () {\n      return this._style;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._style !== value) {\n        this._style = value;\n        rebindAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the pixel offset in screen space from the origin of this label.  This is commonly used\n   * to align multiple labels and billboards at the same position, e.g., an image and text.  The\n   * screen space origin is the top, left corner of the canvas; <code>x</code> increases from\n   * left to right, and <code>y</code> increases from top to bottom.\n   * <br /><br />\n   * <div align=\'center\'>\n   * <table border=\'0\' cellpadding=\'5\'><tr>\n   * <td align=\'center\'><code>default</code><br/><img src=\'Images/Label.setPixelOffset.default.png\' width=\'250\' height=\'188\' /></td>\n   * <td align=\'center\'><code>l.pixeloffset = new Cartesian2(25, 75);</code><br/><img src=\'Images/Label.setPixelOffset.x50y-25.png\' width=\'250\' height=\'188\' /></td>\n   * </tr></table>\n   * The label\'s origin is indicated by the yellow point.\n   * </div>\n   * @memberof Label.prototype\n   * @type {Cartesian2}\n   * @default Cartesian2.ZERO\n   */\n  pixelOffset: {\n    get: function () {\n      return this._pixelOffset;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var pixelOffset = this._pixelOffset;\n      if (!_Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(pixelOffset, value)) {\n        _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(value, pixelOffset);\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.pixelOffset = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.pixelOffset = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets near and far translucency properties of a Label based on the Label\'s distance from the camera.\n   * A label\'s translucency will interpolate between the {@link NearFarScalar#nearValue} and\n   * {@link NearFarScalar#farValue} while the camera distance falls within the lower and upper bounds\n   * of the specified {@link NearFarScalar#near} and {@link NearFarScalar#far}.\n   * Outside of these ranges the label\'s translucency remains clamped to the nearest bound.  If undefined,\n   * translucencyByDistance will be disabled.\n   * @memberof Label.prototype\n   * @type {NearFarScalar}\n   *\n   * @example\n   * // Example 1.\n   * // Set a label\'s translucencyByDistance to 1.0 when the\n   * // camera is 1500 meters from the label and disappear as\n   * // the camera distance approaches 8.0e6 meters.\n   * text.translucencyByDistance = new Cesium.NearFarScalar(1.5e2, 1.0, 8.0e6, 0.0);\n   *\n   * @example\n   * // Example 2.\n   * // disable translucency by distance\n   * text.translucencyByDistance = undefined;\n   */\n  translucencyByDistance: {\n    get: function () {\n      return this._translucencyByDistance;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n          "far distance must be greater than near distance."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      var translucencyByDistance = this._translucencyByDistance;\n      if (!_Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(translucencyByDistance, value)) {\n        this._translucencyByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(\n          value,\n          translucencyByDistance\n        );\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.translucencyByDistance = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.translucencyByDistance = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets near and far pixel offset scaling properties of a Label based on the Label\'s distance from the camera.\n   * A label\'s pixel offset will be scaled between the {@link NearFarScalar#nearValue} and\n   * {@link NearFarScalar#farValue} while the camera distance falls within the lower and upper bounds\n   * of the specified {@link NearFarScalar#near} and {@link NearFarScalar#far}.\n   * Outside of these ranges the label\'s pixel offset scaling remains clamped to the nearest bound.  If undefined,\n   * pixelOffsetScaleByDistance will be disabled.\n   * @memberof Label.prototype\n   * @type {NearFarScalar}\n   *\n   * @example\n   * // Example 1.\n   * // Set a label\'s pixel offset scale to 0.0 when the\n   * // camera is 1500 meters from the label and scale pixel offset to 10.0 pixels\n   * // in the y direction the camera distance approaches 8.0e6 meters.\n   * text.pixelOffset = new Cesium.Cartesian2(0.0, 1.0);\n   * text.pixelOffsetScaleByDistance = new Cesium.NearFarScalar(1.5e2, 0.0, 8.0e6, 10.0);\n   *\n   * @example\n   * // Example 2.\n   * // disable pixel offset by distance\n   * text.pixelOffsetScaleByDistance = undefined;\n   */\n  pixelOffsetScaleByDistance: {\n    get: function () {\n      return this._pixelOffsetScaleByDistance;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n          "far distance must be greater than near distance."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      var pixelOffsetScaleByDistance = this._pixelOffsetScaleByDistance;\n      if (!_Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(pixelOffsetScaleByDistance, value)) {\n        this._pixelOffsetScaleByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(\n          value,\n          pixelOffsetScaleByDistance\n        );\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.pixelOffsetScaleByDistance = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.pixelOffsetScaleByDistance = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets near and far scaling properties of a Label based on the label\'s distance from the camera.\n   * A label\'s scale will interpolate between the {@link NearFarScalar#nearValue} and\n   * {@link NearFarScalar#farValue} while the camera distance falls within the lower and upper bounds\n   * of the specified {@link NearFarScalar#near} and {@link NearFarScalar#far}.\n   * Outside of these ranges the label\'s scale remains clamped to the nearest bound.  If undefined,\n   * scaleByDistance will be disabled.\n   * @memberof Label.prototype\n   * @type {NearFarScalar}\n   *\n   * @example\n   * // Example 1.\n   * // Set a label\'s scaleByDistance to scale by 1.5 when the\n   * // camera is 1500 meters from the label and disappear as\n   * // the camera distance approaches 8.0e6 meters.\n   * label.scaleByDistance = new Cesium.NearFarScalar(1.5e2, 1.5, 8.0e6, 0.0);\n   *\n   * @example\n   * // Example 2.\n   * // disable scaling by distance\n   * label.scaleByDistance = undefined;\n   */\n  scaleByDistance: {\n    get: function () {\n      return this._scaleByDistance;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n          "far distance must be greater than near distance."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      var scaleByDistance = this._scaleByDistance;\n      if (!_Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(scaleByDistance, value)) {\n        this._scaleByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(value, scaleByDistance);\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.scaleByDistance = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.scaleByDistance = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets and sets the 3D Cartesian offset applied to this label in eye coordinates.  Eye coordinates is a left-handed\n   * coordinate system, where <code>x</code> points towards the viewer\'s right, <code>y</code> points up, and\n   * <code>z</code> points into the screen.  Eye coordinates use the same scale as world and model coordinates,\n   * which is typically meters.\n   * <br /><br />\n   * An eye offset is commonly used to arrange multiple label or objects at the same position, e.g., to\n   * arrange a label above its corresponding 3D model.\n   * <br /><br />\n   * Below, the label is positioned at the center of the Earth but an eye offset makes it always\n   * appear on top of the Earth regardless of the viewer\'s or Earth\'s orientation.\n   * <br /><br />\n   * <div align=\'center\'>\n   * <table border=\'0\' cellpadding=\'5\'><tr>\n   * <td align=\'center\'><img src=\'Images/Billboard.setEyeOffset.one.png\' width=\'250\' height=\'188\' /></td>\n   * <td align=\'center\'><img src=\'Images/Billboard.setEyeOffset.two.png\' width=\'250\' height=\'188\' /></td>\n   * </tr></table>\n   * <code>l.eyeOffset = new Cartesian3(0.0, 8000000.0, 0.0);</code><br /><br />\n   * </div>\n   * @memberof Label.prototype\n   * @type {Cartesian3}\n   * @default Cartesian3.ZERO\n   */\n  eyeOffset: {\n    get: function () {\n      return this._eyeOffset;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var eyeOffset = this._eyeOffset;\n      if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(eyeOffset, value)) {\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(value, eyeOffset);\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.eyeOffset = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.eyeOffset = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the horizontal origin of this label, which determines if the label is drawn\n   * to the left, center, or right of its anchor position.\n   * <br /><br />\n   * <div align=\'center\'>\n   * <img src=\'Images/Billboard.setHorizontalOrigin.png\' width=\'648\' height=\'196\' /><br />\n   * </div>\n   * @memberof Label.prototype\n   * @type {HorizontalOrigin}\n   * @default HorizontalOrigin.LEFT\n   * @example\n   * // Use a top, right origin\n   * l.horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n   * l.verticalOrigin = Cesium.VerticalOrigin.TOP;\n   */\n  horizontalOrigin: {\n    get: function () {\n      return this._horizontalOrigin;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._horizontalOrigin !== value) {\n        this._horizontalOrigin = value;\n        repositionAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the vertical origin of this label, which determines if the label is\n   * to the above, below, or at the center of its anchor position.\n   * <br /><br />\n   * <div align=\'center\'>\n   * <img src=\'Images/Billboard.setVerticalOrigin.png\' width=\'695\' height=\'175\' /><br />\n   * </div>\n   * @memberof Label.prototype\n   * @type {VerticalOrigin}\n   * @default VerticalOrigin.BASELINE\n   * @example\n   * // Use a top, right origin\n   * l.horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n   * l.verticalOrigin = Cesium.VerticalOrigin.TOP;\n   */\n  verticalOrigin: {\n    get: function () {\n      return this._verticalOrigin;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._verticalOrigin !== value) {\n        this._verticalOrigin = value;\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.verticalOrigin = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.verticalOrigin = value;\n        }\n\n        repositionAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the uniform scale that is multiplied with the label\'s size in pixels.\n   * A scale of <code>1.0</code> does not change the size of the label; a scale greater than\n   * <code>1.0</code> enlarges the label; a positive scale less than <code>1.0</code> shrinks\n   * the label.\n   * <br /><br />\n   * Applying a large scale value may pixelate the label.  To make text larger without pixelation,\n   * use a larger font size when calling {@link Label#font} instead.\n   * <br /><br />\n   * <div align=\'center\'>\n   * <img src=\'Images/Label.setScale.png\' width=\'400\' height=\'300\' /><br/>\n   * From left to right in the above image, the scales are <code>0.5</code>, <code>1.0</code>,\n   * and <code>2.0</code>.\n   * </div>\n   * @memberof Label.prototype\n   * @type {Number}\n   * @default 1.0\n   */\n  scale: {\n    get: function () {\n      return this._scale;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._scale !== value) {\n        this._scale = value;\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.scale = value * this._relativeSize;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.scale = value * this._relativeSize;\n        }\n\n        repositionAllGlyphs(this);\n      }\n    },\n  },\n\n  /**\n   * Gets the total scale of the label, which is the label\'s scale multiplied by the computed relative size\n   * of the desired font compared to the generated glyph size.\n   * @memberof Label.prototype\n   * @type {Number}\n   * @default 1.0\n   */\n  totalScale: {\n    get: function () {\n      return this._scale * this._relativeSize;\n    },\n  },\n\n  /**\n   * Gets or sets the condition specifying at what distance from the camera that this label will be displayed.\n   * @memberof Label.prototype\n   * @type {DistanceDisplayCondition}\n   * @default undefined\n   */\n  distanceDisplayCondition: {\n    get: function () {\n      return this._distanceDisplayCondition;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("far must be greater than near");\n      }\n      //>>includeEnd(\'debug\');\n      if (\n        !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equals */ .Z.equals(value, this._distanceDisplayCondition)\n      ) {\n        this._distanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(\n          value,\n          this._distanceDisplayCondition\n        );\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.distanceDisplayCondition = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.distanceDisplayCondition = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the distance from the camera at which to disable the depth test to, for example, prevent clipping against terrain.\n   * When set to zero, the depth test is always applied. When set to Number.POSITIVE_INFINITY, the depth test is never applied.\n   * @memberof Label.prototype\n   * @type {Number}\n   */\n  disableDepthTestDistance: {\n    get: function () {\n      return this._disableDepthTestDistance;\n    },\n    set: function (value) {\n      if (this._disableDepthTestDistance !== value) {\n        //>>includeStart(\'debug\', pragmas.debug);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(value) && value < 0.0) {\n          throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n            "disableDepthTestDistance must be greater than 0.0."\n          );\n        }\n        //>>includeEnd(\'debug\');\n        this._disableDepthTestDistance = value;\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.disableDepthTestDistance = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.disableDepthTestDistance = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the user-defined value returned when the label is picked.\n   * @memberof Label.prototype\n   * @type {*}\n   */\n  id: {\n    get: function () {\n      return this._id;\n    },\n    set: function (value) {\n      if (this._id !== value) {\n        this._id = value;\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.id = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.id = value;\n        }\n      }\n    },\n  },\n\n  /**\n   * @private\n   */\n  pickId: {\n    get: function () {\n      if (this._glyphs.length === 0 || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._glyphs[0].billboard)) {\n        return undefined;\n      }\n      return this._glyphs[0].billboard.pickId;\n    },\n  },\n\n  /**\n   * Keeps track of the position of the label based on the height reference.\n   * @memberof Label.prototype\n   * @type {Cartesian3}\n   * @private\n   */\n  _clampedPosition: {\n    get: function () {\n      return this._actualClampedPosition;\n    },\n    set: function (value) {\n      this._actualClampedPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n        value,\n        this._actualClampedPosition\n      );\n\n      var glyphs = this._glyphs;\n      for (var i = 0, len = glyphs.length; i < len; i++) {\n        var glyph = glyphs[i];\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n          // Set all the private values here, because we already clamped to ground\n          //  so we don\'t want to do it again for every glyph\n          glyph.billboard._clampedPosition = value;\n        }\n      }\n      var backgroundBillboard = this._backgroundBillboard;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n        backgroundBillboard._clampedPosition = value;\n      }\n    },\n  },\n\n  /**\n   * Determines whether or not this label will be shown or hidden because it was clustered.\n   * @memberof Label.prototype\n   * @type {Boolean}\n   * @default true\n   * @private\n   */\n  clusterShow: {\n    get: function () {\n      return this._clusterShow;\n    },\n    set: function (value) {\n      if (this._clusterShow !== value) {\n        this._clusterShow = value;\n\n        var glyphs = this._glyphs;\n        for (var i = 0, len = glyphs.length; i < len; i++) {\n          var glyph = glyphs[i];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(glyph.billboard)) {\n            glyph.billboard.clusterShow = value;\n          }\n        }\n        var backgroundBillboard = this._backgroundBillboard;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n          backgroundBillboard.clusterShow = value;\n        }\n      }\n    },\n  },\n});\n\nLabel.prototype._updateClamping = function () {\n  _Billboard_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"]._updateClamping */ .Z._updateClamping(this._labelCollection, this);\n};\n\n/**\n * Computes the screen-space position of the label\'s origin, taking into account eye and pixel offsets.\n * The screen space origin is the top, left corner of the canvas; <code>x</code> increases from\n * left to right, and <code>y</code> increases from top to bottom.\n *\n * @param {Scene} scene The scene the label is in.\n * @param {Cartesian2} [result] The object onto which to store the result.\n * @returns {Cartesian2} The screen-space position of the label.\n *\n *\n * @example\n * console.log(l.computeScreenSpacePosition(scene).toString());\n *\n * @see Label#eyeOffset\n * @see Label#pixelOffset\n */\nLabel.prototype.computeScreenSpacePosition = function (scene, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(scene)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("scene is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  }\n\n  var labelCollection = this._labelCollection;\n  var modelMatrix = labelCollection.modelMatrix;\n  var actualPosition = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._actualClampedPosition)\n    ? this._actualClampedPosition\n    : this._position;\n\n  var windowCoordinates = _Billboard_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"]._computeScreenSpacePosition */ .Z._computeScreenSpacePosition(\n    modelMatrix,\n    actualPosition,\n    this._eyeOffset,\n    this._pixelOffset,\n    scene,\n    result\n  );\n  return windowCoordinates;\n};\n\n/**\n * Gets a label\'s screen space bounding box centered around screenSpacePosition.\n * @param {Label} label The label to get the screen space bounding box for.\n * @param {Cartesian2} screenSpacePosition The screen space center of the label.\n * @param {BoundingRectangle} [result] The object onto which to store the result.\n * @returns {BoundingRectangle} The screen space bounding box.\n *\n * @private\n */\nLabel.getScreenSpaceBoundingBox = function (\n  label,\n  screenSpacePosition,\n  result\n) {\n  var x = 0;\n  var y = 0;\n  var width = 0;\n  var height = 0;\n  var scale = label.totalScale;\n\n  var backgroundBillboard = label._backgroundBillboard;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(backgroundBillboard)) {\n    x = screenSpacePosition.x + backgroundBillboard._translate.x;\n    y = screenSpacePosition.y - backgroundBillboard._translate.y;\n    width = backgroundBillboard.width * scale;\n    height = backgroundBillboard.height * scale;\n\n    if (\n      label.verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BOTTOM */ .Z.BOTTOM ||\n      label.verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BASELINE */ .Z.BASELINE\n    ) {\n      y -= height;\n    } else if (label.verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].CENTER */ .Z.CENTER) {\n      y -= height * 0.5;\n    }\n  } else {\n    x = Number.POSITIVE_INFINITY;\n    y = Number.POSITIVE_INFINITY;\n    var maxX = 0;\n    var maxY = 0;\n    var glyphs = label._glyphs;\n    var length = glyphs.length;\n    for (var i = 0; i < length; ++i) {\n      var glyph = glyphs[i];\n      var billboard = glyph.billboard;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(billboard)) {\n        continue;\n      }\n\n      var glyphX = screenSpacePosition.x + billboard._translate.x;\n      var glyphY = screenSpacePosition.y - billboard._translate.y;\n      var glyphWidth = glyph.dimensions.width * scale;\n      var glyphHeight = glyph.dimensions.height * scale;\n\n      if (\n        label.verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BOTTOM */ .Z.BOTTOM ||\n        label.verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BASELINE */ .Z.BASELINE\n      ) {\n        glyphY -= glyphHeight;\n      } else if (label.verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].CENTER */ .Z.CENTER) {\n        glyphY -= glyphHeight * 0.5;\n      }\n\n      if (label._verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].TOP */ .Z.TOP) {\n        glyphY += _SDFSettings_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].PADDING */ .Z.PADDING * scale;\n      } else if (\n        label._verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BOTTOM */ .Z.BOTTOM ||\n        label._verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BASELINE */ .Z.BASELINE\n      ) {\n        glyphY -= _SDFSettings_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].PADDING */ .Z.PADDING * scale;\n      }\n\n      x = Math.min(x, glyphX);\n      y = Math.min(y, glyphY);\n      maxX = Math.max(maxX, glyphX + glyphWidth);\n      maxY = Math.max(maxY, glyphY + glyphHeight);\n    }\n\n    width = maxX - x;\n    height = maxY - y;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(result)) {\n    result = new _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  }\n\n  result.x = x;\n  result.y = y;\n  result.width = width;\n  result.height = height;\n\n  return result;\n};\n\n/**\n * Determines if this label equals another label.  Labels are equal if all their properties\n * are equal.  Labels in different collections can be equal.\n *\n * @param {Label} other The label to compare for equality.\n * @returns {Boolean} <code>true</code> if the labels are equal; otherwise, <code>false</code>.\n */\nLabel.prototype.equals = function (other) {\n  return (\n    this === other ||\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(other) &&\n      this._show === other._show &&\n      this._scale === other._scale &&\n      this._outlineWidth === other._outlineWidth &&\n      this._showBackground === other._showBackground &&\n      this._style === other._style &&\n      this._verticalOrigin === other._verticalOrigin &&\n      this._horizontalOrigin === other._horizontalOrigin &&\n      this._heightReference === other._heightReference &&\n      this._renderedText === other._renderedText &&\n      this._font === other._font &&\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(this._position, other._position) &&\n      _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(this._fillColor, other._fillColor) &&\n      _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(this._outlineColor, other._outlineColor) &&\n      _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(this._backgroundColor, other._backgroundColor) &&\n      _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(this._backgroundPadding, other._backgroundPadding) &&\n      _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(this._pixelOffset, other._pixelOffset) &&\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(this._eyeOffset, other._eyeOffset) &&\n      _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(\n        this._translucencyByDistance,\n        other._translucencyByDistance\n      ) &&\n      _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(\n        this._pixelOffsetScaleByDistance,\n        other._pixelOffsetScaleByDistance\n      ) &&\n      _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(this._scaleByDistance, other._scaleByDistance) &&\n      _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equals */ .Z.equals(\n        this._distanceDisplayCondition,\n        other._distanceDisplayCondition\n      ) &&\n      this._disableDepthTestDistance === other._disableDepthTestDistance &&\n      this._id === other._id)\n  );\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n */\nLabel.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Determines whether or not run the algorithm, that match the text of the label to right-to-left languages\n * @memberof Label\n * @type {Boolean}\n * @default false\n *\n * @example\n * // Example 1.\n * // Set a label\'s rightToLeft before init\n * Cesium.Label.enableRightToLeftDetection = true;\n * var myLabelEntity = viewer.entities.add({\n *   label: {\n *     id: \'my label\',\n *     text: \'זה טקסט בעברית \\n ועכשיו יורדים שורה\',\n *   }\n * });\n *\n * @example\n * // Example 2.\n * var myLabelEntity = viewer.entities.add({\n *   label: {\n *     id: \'my label\',\n *     text: \'English text\'\n *   }\n * });\n * // Set a label\'s rightToLeft after init\n * Cesium.Label.enableRightToLeftDetection = true;\n * myLabelEntity.text = \'טקסט חדש\';\n */\nLabel.enableRightToLeftDetection = false;\n\nfunction convertTextToTypes(text, rtlChars) {\n  var ltrChars = /[a-zA-Z0-9]/;\n  var bracketsChars = /[()[\\]{}<>]/;\n  var parsedText = [];\n  var word = "";\n  var lastType = textTypes.LTR;\n  var currentType = "";\n  var textLength = text.length;\n  for (var textIndex = 0; textIndex < textLength; ++textIndex) {\n    var character = text.charAt(textIndex);\n    if (rtlChars.test(character)) {\n      currentType = textTypes.RTL;\n    } else if (ltrChars.test(character)) {\n      currentType = textTypes.LTR;\n    } else if (bracketsChars.test(character)) {\n      currentType = textTypes.BRACKETS;\n    } else {\n      currentType = textTypes.WEAK;\n    }\n\n    if (textIndex === 0) {\n      lastType = currentType;\n    }\n\n    if (lastType === currentType && currentType !== textTypes.BRACKETS) {\n      word += character;\n    } else {\n      if (word !== "") {\n        parsedText.push({ Type: lastType, Word: word });\n      }\n      lastType = currentType;\n      word = character;\n    }\n  }\n  parsedText.push({ Type: currentType, Word: word });\n  return parsedText;\n}\n\nfunction reverseWord(word) {\n  return word.split("").reverse().join("");\n}\n\nfunction spliceWord(result, pointer, word) {\n  return result.slice(0, pointer) + word + result.slice(pointer);\n}\n\nfunction reverseBrackets(bracket) {\n  switch (bracket) {\n    case "(":\n      return ")";\n    case ")":\n      return "(";\n    case "[":\n      return "]";\n    case "]":\n      return "[";\n    case "{":\n      return "}";\n    case "}":\n      return "{";\n    case "<":\n      return ">";\n    case ">":\n      return "<";\n  }\n}\n\n//To add another language, simply add its Unicode block range(s) to the below regex.\nvar hebrew = "\\u05D0-\\u05EA";\nvar arabic = "\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF";\nvar rtlChars = new RegExp("[" + hebrew + arabic + "]");\n\n/**\n *\n * @param {String} value the text to parse and reorder\n * @returns {String} the text as rightToLeft direction\n * @private\n */\nfunction reverseRtl(value) {\n  var texts = value.split("\\n");\n  var result = "";\n  for (var i = 0; i < texts.length; i++) {\n    var text = texts[i];\n    // first character of the line is a RTL character, so need to manage different cases\n    var rtlDir = rtlChars.test(text.charAt(0));\n    var parsedText = convertTextToTypes(text, rtlChars);\n\n    var splicePointer = 0;\n    var line = "";\n    for (var wordIndex = 0; wordIndex < parsedText.length; ++wordIndex) {\n      var subText = parsedText[wordIndex];\n      var reverse =\n        subText.Type === textTypes.BRACKETS\n          ? reverseBrackets(subText.Word)\n          : reverseWord(subText.Word);\n      if (rtlDir) {\n        if (subText.Type === textTypes.RTL) {\n          line = reverse + line;\n          splicePointer = 0;\n        } else if (subText.Type === textTypes.LTR) {\n          line = spliceWord(line, splicePointer, subText.Word);\n          splicePointer += subText.Word.length;\n        } else if (\n          subText.Type === textTypes.WEAK ||\n          subText.Type === textTypes.BRACKETS\n        ) {\n          // current word is weak, last one was bracket\n          if (\n            subText.Type === textTypes.WEAK &&\n            parsedText[wordIndex - 1].Type === textTypes.BRACKETS\n          ) {\n            line = reverse + line;\n          }\n          // current word is weak or bracket, last one was rtl\n          else if (parsedText[wordIndex - 1].Type === textTypes.RTL) {\n            line = reverse + line;\n            splicePointer = 0;\n          }\n          // current word is weak or bracket, there is at least one more word\n          else if (parsedText.length > wordIndex + 1) {\n            // next word is rtl\n            if (parsedText[wordIndex + 1].Type === textTypes.RTL) {\n              line = reverse + line;\n              splicePointer = 0;\n            } else {\n              line = spliceWord(line, splicePointer, subText.Word);\n              splicePointer += subText.Word.length;\n            }\n          }\n          // current word is weak or bracket, and it the last in this line\n          else {\n            line = spliceWord(line, 0, reverse);\n          }\n        }\n      }\n      // ltr line, rtl word\n      else if (subText.Type === textTypes.RTL) {\n        line = spliceWord(line, splicePointer, reverse);\n      }\n      // ltr line, ltr word\n      else if (subText.Type === textTypes.LTR) {\n        line += subText.Word;\n        splicePointer = line.length;\n      }\n      // ltr line, weak or bracket word\n      else if (\n        subText.Type === textTypes.WEAK ||\n        subText.Type === textTypes.BRACKETS\n      ) {\n        // not first word in line\n        if (wordIndex > 0) {\n          // last word was rtl\n          if (parsedText[wordIndex - 1].Type === textTypes.RTL) {\n            // there is at least one more word\n            if (parsedText.length > wordIndex + 1) {\n              // next word is rtl\n              if (parsedText[wordIndex + 1].Type === textTypes.RTL) {\n                line = spliceWord(line, splicePointer, reverse);\n              } else {\n                line += subText.Word;\n                splicePointer = line.length;\n              }\n            } else {\n              line += subText.Word;\n            }\n          } else {\n            line += subText.Word;\n            splicePointer = line.length;\n          }\n        } else {\n          line += subText.Word;\n          splicePointer = line.length;\n        }\n      }\n    }\n\n    result += line;\n    if (i < texts.length - 1) {\n      result += "\\n";\n    }\n  }\n  return result;\n}\n/* harmony default export */ __webpack_exports__["Z"] = (Label);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QiwrQkFBK0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLEtBQUssRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9MYWJlbC5qcz84M2I3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb3VuZGluZ1JlY3RhbmdsZSBmcm9tIFwiLi4vQ29yZS9Cb3VuZGluZ1JlY3RhbmdsZS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uIGZyb20gXCIuLi9Db3JlL0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5qc1wiO1xuaW1wb3J0IE5lYXJGYXJTY2FsYXIgZnJvbSBcIi4uL0NvcmUvTmVhckZhclNjYWxhci5qc1wiO1xuaW1wb3J0IEJpbGxib2FyZCBmcm9tIFwiLi9CaWxsYm9hcmQuanNcIjtcbmltcG9ydCBIZWlnaHRSZWZlcmVuY2UgZnJvbSBcIi4vSGVpZ2h0UmVmZXJlbmNlLmpzXCI7XG5pbXBvcnQgSG9yaXpvbnRhbE9yaWdpbiBmcm9tIFwiLi9Ib3Jpem9udGFsT3JpZ2luLmpzXCI7XG5pbXBvcnQgTGFiZWxTdHlsZSBmcm9tIFwiLi9MYWJlbFN0eWxlLmpzXCI7XG5pbXBvcnQgU0RGU2V0dGluZ3MgZnJvbSBcIi4vU0RGU2V0dGluZ3MuanNcIjtcbmltcG9ydCBWZXJ0aWNhbE9yaWdpbiBmcm9tIFwiLi9WZXJ0aWNhbE9yaWdpbi5qc1wiO1xuXG52YXIgZm9udEluZm9DYWNoZSA9IHt9O1xudmFyIGZvbnRJbmZvQ2FjaGVMZW5ndGggPSAwO1xudmFyIGZvbnRJbmZvQ2FjaGVNYXhTaXplID0gMjU2O1xudmFyIGRlZmF1bHRCYWNrZ3JvdW5kQ29sb3IgPSBuZXcgQ29sb3IoMC4xNjUsIDAuMTY1LCAwLjE2NSwgMC44KTtcbnZhciBkZWZhdWx0QmFja2dyb3VuZFBhZGRpbmcgPSBuZXcgQ2FydGVzaWFuMig3LCA1KTtcblxudmFyIHRleHRUeXBlcyA9IE9iamVjdC5mcmVlemUoe1xuICBMVFI6IDAsXG4gIFJUTDogMSxcbiAgV0VBSzogMixcbiAgQlJBQ0tFVFM6IDMsXG59KTtcblxuZnVuY3Rpb24gcmViaW5kQWxsR2x5cGhzKGxhYmVsKSB7XG4gIGlmICghbGFiZWwuX3JlYmluZEFsbEdseXBocyAmJiAhbGFiZWwuX3JlcG9zaXRpb25BbGxHbHlwaHMpIHtcbiAgICAvLyBvbmx5IHB1c2ggbGFiZWwgaWYgaXQncyBub3QgYWxyZWFkeSBiZWVuIG1hcmtlZCBkaXJ0eVxuICAgIGxhYmVsLl9sYWJlbENvbGxlY3Rpb24uX2xhYmVsc1RvVXBkYXRlLnB1c2gobGFiZWwpO1xuICB9XG4gIGxhYmVsLl9yZWJpbmRBbGxHbHlwaHMgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXBvc2l0aW9uQWxsR2x5cGhzKGxhYmVsKSB7XG4gIGlmICghbGFiZWwuX3JlYmluZEFsbEdseXBocyAmJiAhbGFiZWwuX3JlcG9zaXRpb25BbGxHbHlwaHMpIHtcbiAgICAvLyBvbmx5IHB1c2ggbGFiZWwgaWYgaXQncyBub3QgYWxyZWFkeSBiZWVuIG1hcmtlZCBkaXJ0eVxuICAgIGxhYmVsLl9sYWJlbENvbGxlY3Rpb24uX2xhYmVsc1RvVXBkYXRlLnB1c2gobGFiZWwpO1xuICB9XG4gIGxhYmVsLl9yZXBvc2l0aW9uQWxsR2x5cGhzID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q1NTVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3XG4gICAgLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbClcbiAgICAuZ2V0UHJvcGVydHlWYWx1ZShwcm9wZXJ0eSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlRm9udChsYWJlbCkge1xuICB2YXIgZm9udEluZm8gPSBmb250SW5mb0NhY2hlW2xhYmVsLl9mb250XTtcbiAgaWYgKCFkZWZpbmVkKGZvbnRJbmZvKSkge1xuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBkaXYuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgZGl2LnN0eWxlLmZvbnQgPSBsYWJlbC5fZm9udDtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICB2YXIgbGluZUhlaWdodCA9IHBhcnNlRmxvYXQoZ2V0Q1NTVmFsdWUoZGl2LCBcImxpbmUtaGVpZ2h0XCIpKTtcbiAgICBpZiAoaXNOYU4obGluZUhlaWdodCkpIHtcbiAgICAgIC8vIGxpbmUtaGVpZ2h0IGlzbid0IGEgbnVtYmVyLCBpLmUuICdub3JtYWwnOyBhcHBseSBkZWZhdWx0IGxpbmUtc3BhY2luZ1xuICAgICAgbGluZUhlaWdodCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmb250SW5mbyA9IHtcbiAgICAgIGZhbWlseTogZ2V0Q1NTVmFsdWUoZGl2LCBcImZvbnQtZmFtaWx5XCIpLFxuICAgICAgc2l6ZTogZ2V0Q1NTVmFsdWUoZGl2LCBcImZvbnQtc2l6ZVwiKS5yZXBsYWNlKFwicHhcIiwgXCJcIiksXG4gICAgICBzdHlsZTogZ2V0Q1NTVmFsdWUoZGl2LCBcImZvbnQtc3R5bGVcIiksXG4gICAgICB3ZWlnaHQ6IGdldENTU1ZhbHVlKGRpdiwgXCJmb250LXdlaWdodFwiKSxcbiAgICAgIGxpbmVIZWlnaHQ6IGxpbmVIZWlnaHQsXG4gICAgfTtcblxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgICBpZiAoZm9udEluZm9DYWNoZUxlbmd0aCA8IGZvbnRJbmZvQ2FjaGVNYXhTaXplKSB7XG4gICAgICBmb250SW5mb0NhY2hlW2xhYmVsLl9mb250XSA9IGZvbnRJbmZvO1xuICAgICAgZm9udEluZm9DYWNoZUxlbmd0aCsrO1xuICAgIH1cbiAgfVxuICBsYWJlbC5fZm9udEZhbWlseSA9IGZvbnRJbmZvLmZhbWlseTtcbiAgbGFiZWwuX2ZvbnRTaXplID0gZm9udEluZm8uc2l6ZTtcbiAgbGFiZWwuX2ZvbnRTdHlsZSA9IGZvbnRJbmZvLnN0eWxlO1xuICBsYWJlbC5fZm9udFdlaWdodCA9IGZvbnRJbmZvLndlaWdodDtcbiAgbGFiZWwuX2xpbmVIZWlnaHQgPSBmb250SW5mby5saW5lSGVpZ2h0O1xufVxuXG4vKipcbiAqIEEgTGFiZWwgZHJhd3Mgdmlld3BvcnQtYWxpZ25lZCB0ZXh0IHBvc2l0aW9uZWQgaW4gdGhlIDNEIHNjZW5lLiAgVGhpcyBjb25zdHJ1Y3RvclxuICogc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LCBpbnN0ZWFkIGNyZWF0ZSBsYWJlbHMgYnkgY2FsbGluZyB7QGxpbmsgTGFiZWxDb2xsZWN0aW9uI2FkZH0uXG4gKlxuICogQGFsaWFzIExhYmVsXG4gKiBAaW50ZXJuYWxDb25zdHJ1Y3RvclxuICogQGNsYXNzXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UuZmFyIG11c3QgYmUgZ3JlYXRlciB0aGFuIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UubmVhclxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IHBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlLmZhciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBwaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZS5uZWFyXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmZhciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24ubmVhclxuICpcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uXG4gKiBAc2VlIExhYmVsQ29sbGVjdGlvbiNhZGRcbiAqXG4gKiBAZGVtbyB7QGxpbmsgaHR0cHM6Ly9zYW5kY2FzdGxlLmNlc2l1bS5jb20vaW5kZXguaHRtbD9zcmM9TGFiZWxzLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgTGFiZWxzIERlbW99XG4gKi9cbmZ1bmN0aW9uIExhYmVsKG9wdGlvbnMsIGxhYmVsQ29sbGVjdGlvbikge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChcbiAgICBkZWZpbmVkKG9wdGlvbnMuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlKSAmJlxuICAgIG9wdGlvbnMuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlIDwgMC4wXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAuMC5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBvcHRpb25zLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2U7XG4gIHZhciBwaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSA9IG9wdGlvbnMucGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2U7XG4gIHZhciBzY2FsZUJ5RGlzdGFuY2UgPSBvcHRpb25zLnNjYWxlQnlEaXN0YW5jZTtcbiAgdmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IG9wdGlvbnMuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xuICBpZiAoZGVmaW5lZCh0cmFuc2x1Y2VuY3lCeURpc3RhbmNlKSkge1xuICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgaWYgKHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UuZmFyIDw9IHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UubmVhcikge1xuICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICBcInRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UuZmFyIG11c3QgYmUgZ3JlYXRlciB0aGFuIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UubmVhci5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgdHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IE5lYXJGYXJTY2FsYXIuY2xvbmUodHJhbnNsdWNlbmN5QnlEaXN0YW5jZSk7XG4gIH1cbiAgaWYgKGRlZmluZWQocGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UpKSB7XG4gICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICBpZiAocGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UuZmFyIDw9IHBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlLm5lYXIpIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgXCJwaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZS5mYXIgbXVzdCBiZSBncmVhdGVyIHRoYW4gcGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UubmVhci5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgcGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UgPSBOZWFyRmFyU2NhbGFyLmNsb25lKFxuICAgICAgcGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2VcbiAgICApO1xuICB9XG4gIGlmIChkZWZpbmVkKHNjYWxlQnlEaXN0YW5jZSkpIHtcbiAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgIGlmIChzY2FsZUJ5RGlzdGFuY2UuZmFyIDw9IHNjYWxlQnlEaXN0YW5jZS5uZWFyKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgIFwic2NhbGVCeURpc3RhbmNlLmZhciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBzY2FsZUJ5RGlzdGFuY2UubmVhci5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgc2NhbGVCeURpc3RhbmNlID0gTmVhckZhclNjYWxhci5jbG9uZShzY2FsZUJ5RGlzdGFuY2UpO1xuICB9XG4gIGlmIChkZWZpbmVkKGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbikpIHtcbiAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgIGlmIChkaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZmFyIDw9IGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5uZWFyKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgIFwiZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmZhciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24ubmVhci5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmNsb25lKFxuICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uXG4gICAgKTtcbiAgfVxuXG4gIHRoaXMuX3JlbmRlcmVkVGV4dCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdGV4dCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc2hvdyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnNob3csIHRydWUpO1xuICB0aGlzLl9mb250ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZm9udCwgXCIzMHB4IHNhbnMtc2VyaWZcIik7XG4gIHRoaXMuX2ZpbGxDb2xvciA9IENvbG9yLmNsb25lKGRlZmF1bHRWYWx1ZShvcHRpb25zLmZpbGxDb2xvciwgQ29sb3IuV0hJVEUpKTtcbiAgdGhpcy5fb3V0bGluZUNvbG9yID0gQ29sb3IuY2xvbmUoXG4gICAgZGVmYXVsdFZhbHVlKG9wdGlvbnMub3V0bGluZUNvbG9yLCBDb2xvci5CTEFDSylcbiAgKTtcbiAgdGhpcy5fb3V0bGluZVdpZHRoID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMub3V0bGluZVdpZHRoLCAxLjApO1xuICB0aGlzLl9zaG93QmFja2dyb3VuZCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnNob3dCYWNrZ3JvdW5kLCBmYWxzZSk7XG4gIHRoaXMuX2JhY2tncm91bmRDb2xvciA9IENvbG9yLmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLmJhY2tncm91bmRDb2xvciwgZGVmYXVsdEJhY2tncm91bmRDb2xvcilcbiAgKTtcbiAgdGhpcy5fYmFja2dyb3VuZFBhZGRpbmcgPSBDYXJ0ZXNpYW4yLmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLmJhY2tncm91bmRQYWRkaW5nLCBkZWZhdWx0QmFja2dyb3VuZFBhZGRpbmcpXG4gICk7XG4gIHRoaXMuX3N0eWxlID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc3R5bGUsIExhYmVsU3R5bGUuRklMTCk7XG4gIHRoaXMuX3ZlcnRpY2FsT3JpZ2luID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMudmVydGljYWxPcmlnaW4sXG4gICAgVmVydGljYWxPcmlnaW4uQkFTRUxJTkVcbiAgKTtcbiAgdGhpcy5faG9yaXpvbnRhbE9yaWdpbiA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmhvcml6b250YWxPcmlnaW4sXG4gICAgSG9yaXpvbnRhbE9yaWdpbi5MRUZUXG4gICk7XG4gIHRoaXMuX3BpeGVsT2Zmc2V0ID0gQ2FydGVzaWFuMi5jbG9uZShcbiAgICBkZWZhdWx0VmFsdWUob3B0aW9ucy5waXhlbE9mZnNldCwgQ2FydGVzaWFuMi5aRVJPKVxuICApO1xuICB0aGlzLl9leWVPZmZzZXQgPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLmV5ZU9mZnNldCwgQ2FydGVzaWFuMy5aRVJPKVxuICApO1xuICB0aGlzLl9wb3NpdGlvbiA9IENhcnRlc2lhbjMuY2xvbmUoXG4gICAgZGVmYXVsdFZhbHVlKG9wdGlvbnMucG9zaXRpb24sIENhcnRlc2lhbjMuWkVSTylcbiAgKTtcbiAgdGhpcy5fc2NhbGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5zY2FsZSwgMS4wKTtcbiAgdGhpcy5faWQgPSBvcHRpb25zLmlkO1xuICB0aGlzLl90cmFuc2x1Y2VuY3lCeURpc3RhbmNlID0gdHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcbiAgdGhpcy5fcGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UgPSBwaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZTtcbiAgdGhpcy5fc2NhbGVCeURpc3RhbmNlID0gc2NhbGVCeURpc3RhbmNlO1xuICB0aGlzLl9oZWlnaHRSZWZlcmVuY2UgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5oZWlnaHRSZWZlcmVuY2UsXG4gICAgSGVpZ2h0UmVmZXJlbmNlLk5PTkVcbiAgKTtcbiAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xuICB0aGlzLl9kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSBvcHRpb25zLmRpc2FibGVEZXB0aFRlc3REaXN0YW5jZTtcblxuICB0aGlzLl9sYWJlbENvbGxlY3Rpb24gPSBsYWJlbENvbGxlY3Rpb247XG4gIHRoaXMuX2dseXBocyA9IFtdO1xuICB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkID0gdW5kZWZpbmVkO1xuICB0aGlzLl9iYXRjaEluZGV4ID0gdW5kZWZpbmVkOyAvLyBVc2VkIG9ubHkgYnkgVmVjdG9yM0RUaWxlUG9pbnRzIGFuZCBCaWxsYm9hcmRDb2xsZWN0aW9uXG5cbiAgdGhpcy5fcmViaW5kQWxsR2x5cGhzID0gdHJ1ZTtcbiAgdGhpcy5fcmVwb3NpdGlvbkFsbEdseXBocyA9IHRydWU7XG5cbiAgdGhpcy5fYWN0dWFsQ2xhbXBlZFBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9yZW1vdmVDYWxsYmFja0Z1bmMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX21vZGUgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fY2x1c3RlclNob3cgPSB0cnVlO1xuXG4gIHRoaXMudGV4dCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRleHQsIFwiXCIpO1xuXG4gIHRoaXMuX3JlbGF0aXZlU2l6ZSA9IDEuMDtcblxuICBwYXJzZUZvbnQodGhpcyk7XG5cbiAgdGhpcy5fdXBkYXRlQ2xhbXBpbmcoKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTGFiZWwucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgbGFiZWwgd2lsbCBiZSBzaG93bi4gIFVzZSB0aGlzIHRvIGhpZGUgb3Igc2hvdyBhIGxhYmVsLCBpbnN0ZWFkXG4gICAqIG9mIHJlbW92aW5nIGl0IGFuZCByZS1hZGRpbmcgaXQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHNob3c6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICBpZiAodGhpcy5fc2hvdyAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2hvdyA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgYmlsbGJvYXJkID0gZ2x5cGhzW2ldLmJpbGxib2FyZDtcbiAgICAgICAgICBpZiAoZGVmaW5lZChiaWxsYm9hcmQpKSB7XG4gICAgICAgICAgICBiaWxsYm9hcmQuc2hvdyA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZCA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgICAgIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5zaG93ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIENhcnRlc2lhbiBwb3NpdGlvbiBvZiB0aGlzIGxhYmVsLlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtDYXJ0ZXNpYW4zfVxuICAgKi9cbiAgcG9zaXRpb246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XG4gICAgICBpZiAoIUNhcnRlc2lhbjMuZXF1YWxzKHBvc2l0aW9uLCB2YWx1ZSkpIHtcbiAgICAgICAgQ2FydGVzaWFuMy5jbG9uZSh2YWx1ZSwgcG9zaXRpb24pO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgYmlsbGJvYXJkID0gZ2x5cGhzW2ldLmJpbGxib2FyZDtcbiAgICAgICAgICBpZiAoZGVmaW5lZChiaWxsYm9hcmQpKSB7XG4gICAgICAgICAgICBiaWxsYm9hcmQucG9zaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhY2tncm91bmRCaWxsYm9hcmQgPSB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkO1xuICAgICAgICBpZiAoZGVmaW5lZChiYWNrZ3JvdW5kQmlsbGJvYXJkKSkge1xuICAgICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQucG9zaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3VwZGF0ZUNsYW1waW5nKCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBoZWlnaHQgcmVmZXJlbmNlIG9mIHRoaXMgYmlsbGJvYXJkLlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtIZWlnaHRSZWZlcmVuY2V9XG4gICAqIEBkZWZhdWx0IEhlaWdodFJlZmVyZW5jZS5OT05FXG4gICAqL1xuICBoZWlnaHRSZWZlcmVuY2U6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9oZWlnaHRSZWZlcmVuY2U7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5faGVpZ2h0UmVmZXJlbmNlKSB7XG4gICAgICAgIHRoaXMuX2hlaWdodFJlZmVyZW5jZSA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgYmlsbGJvYXJkID0gZ2x5cGhzW2ldLmJpbGxib2FyZDtcbiAgICAgICAgICBpZiAoZGVmaW5lZChiaWxsYm9hcmQpKSB7XG4gICAgICAgICAgICBiaWxsYm9hcmQuaGVpZ2h0UmVmZXJlbmNlID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gdGhpcy5fYmFja2dyb3VuZEJpbGxib2FyZDtcbiAgICAgICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLmhlaWdodFJlZmVyZW5jZSA9IHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwb3NpdGlvbkFsbEdseXBocyh0aGlzKTtcblxuICAgICAgICB0aGlzLl91cGRhdGVDbGFtcGluZygpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgdGV4dCBvZiB0aGlzIGxhYmVsLlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICB0ZXh0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdGV4dDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgaWYgKHRoaXMuX3RleHQgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3RleHQgPSB2YWx1ZTtcblxuICAgICAgICAvLyBTdHJpcCBzb2Z0LWh5cGhlbiAoYXV0by13cmFwKSBjaGFyYWN0ZXJzIGZyb20gaW5wdXQgc3RyaW5nXG4gICAgICAgIHZhciByZW5kZXJlZFZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFx1MDBhZC9nLCBcIlwiKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRUZXh0ID0gTGFiZWwuZW5hYmxlUmlnaHRUb0xlZnREZXRlY3Rpb25cbiAgICAgICAgICA/IHJldmVyc2VSdGwocmVuZGVyZWRWYWx1ZSlcbiAgICAgICAgICA6IHJlbmRlcmVkVmFsdWU7XG4gICAgICAgIHJlYmluZEFsbEdseXBocyh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGZvbnQgdXNlZCB0byBkcmF3IHRoaXMgbGFiZWwuIEZvbnRzIGFyZSBzcGVjaWZpZWQgdXNpbmcgdGhlIHNhbWUgc3ludGF4IGFzIHRoZSBDU1MgJ2ZvbnQnIHByb3BlcnR5LlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0ICczMHB4IHNhbnMtc2VyaWYnXG4gICAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL3RoZS1jYW52YXMtZWxlbWVudC5odG1sI3RleHQtc3R5bGVzfEhUTUwgY2FudmFzIDJEIGNvbnRleHQgdGV4dCBzdHlsZXN9XG4gICAqL1xuICBmb250OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZm9udDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgaWYgKHRoaXMuX2ZvbnQgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2ZvbnQgPSB2YWx1ZTtcbiAgICAgICAgcmViaW5kQWxsR2x5cGhzKHRoaXMpO1xuICAgICAgICBwYXJzZUZvbnQodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBmaWxsIGNvbG9yIG9mIHRoaXMgbGFiZWwuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge0NvbG9yfVxuICAgKiBAZGVmYXVsdCBDb2xvci5XSElURVxuICAgKiBAc2VlIHtAbGluayBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS90aGUtY2FudmFzLWVsZW1lbnQuaHRtbCNmaWxsLWFuZC1zdHJva2Utc3R5bGVzfEhUTUwgY2FudmFzIDJEIGNvbnRleHQgZmlsbCBhbmQgc3Ryb2tlIHN0eWxlc31cbiAgICovXG4gIGZpbGxDb2xvcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZpbGxDb2xvcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgdmFyIGZpbGxDb2xvciA9IHRoaXMuX2ZpbGxDb2xvcjtcbiAgICAgIGlmICghQ29sb3IuZXF1YWxzKGZpbGxDb2xvciwgdmFsdWUpKSB7XG4gICAgICAgIENvbG9yLmNsb25lKHZhbHVlLCBmaWxsQ29sb3IpO1xuICAgICAgICByZWJpbmRBbGxHbHlwaHModGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBvdXRsaW5lIGNvbG9yIG9mIHRoaXMgbGFiZWwuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge0NvbG9yfVxuICAgKiBAZGVmYXVsdCBDb2xvci5CTEFDS1xuICAgKiBAc2VlIHtAbGluayBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS90aGUtY2FudmFzLWVsZW1lbnQuaHRtbCNmaWxsLWFuZC1zdHJva2Utc3R5bGVzfEhUTUwgY2FudmFzIDJEIGNvbnRleHQgZmlsbCBhbmQgc3Ryb2tlIHN0eWxlc31cbiAgICovXG4gIG91dGxpbmVDb2xvcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX291dGxpbmVDb2xvcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgdmFyIG91dGxpbmVDb2xvciA9IHRoaXMuX291dGxpbmVDb2xvcjtcbiAgICAgIGlmICghQ29sb3IuZXF1YWxzKG91dGxpbmVDb2xvciwgdmFsdWUpKSB7XG4gICAgICAgIENvbG9yLmNsb25lKHZhbHVlLCBvdXRsaW5lQ29sb3IpO1xuICAgICAgICByZWJpbmRBbGxHbHlwaHModGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBvdXRsaW5lIHdpZHRoIG9mIHRoaXMgbGFiZWwuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL3RoZS1jYW52YXMtZWxlbWVudC5odG1sI2ZpbGwtYW5kLXN0cm9rZS1zdHlsZXN8SFRNTCBjYW52YXMgMkQgY29udGV4dCBmaWxsIGFuZCBzdHJva2Ugc3R5bGVzfVxuICAgKi9cbiAgb3V0bGluZVdpZHRoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb3V0bGluZVdpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICBpZiAodGhpcy5fb3V0bGluZVdpZHRoICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9vdXRsaW5lV2lkdGggPSB2YWx1ZTtcbiAgICAgICAgcmViaW5kQWxsR2x5cGhzKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgYSBiYWNrZ3JvdW5kIGJlaGluZCB0aGlzIGxhYmVsIHdpbGwgYmUgc2hvd24uXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBzaG93QmFja2dyb3VuZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dCYWNrZ3JvdW5kO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICBpZiAodGhpcy5fc2hvd0JhY2tncm91bmQgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3Nob3dCYWNrZ3JvdW5kID0gdmFsdWU7XG4gICAgICAgIHJlYmluZEFsbEdseXBocyh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhpcyBsYWJlbC5cbiAgICogQG1lbWJlcm9mIExhYmVsLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q29sb3J9XG4gICAqIEBkZWZhdWx0IG5ldyBDb2xvcigwLjE2NSwgMC4xNjUsIDAuMTY1LCAwLjgpXG4gICAqL1xuICBiYWNrZ3JvdW5kQ29sb3I6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9iYWNrZ3JvdW5kQ29sb3I7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICBpZiAoIUNvbG9yLmVxdWFscyhiYWNrZ3JvdW5kQ29sb3IsIHZhbHVlKSkge1xuICAgICAgICBDb2xvci5jbG9uZSh2YWx1ZSwgYmFja2dyb3VuZENvbG9yKTtcblxuICAgICAgICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZCA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgICAgIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5jb2xvciA9IGJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgYmFja2dyb3VuZCBwYWRkaW5nLCBpbiBwaXhlbHMsIG9mIHRoaXMgbGFiZWwuICBUaGUgPGNvZGU+eDwvY29kZT4gdmFsdWVcbiAgICogY29udHJvbHMgaG9yaXpvbnRhbCBwYWRkaW5nLCBhbmQgdGhlIDxjb2RlPnk8L2NvZGU+IHZhbHVlIGNvbnRyb2xzIHZlcnRpY2FsIHBhZGRpbmcuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge0NhcnRlc2lhbjJ9XG4gICAqIEBkZWZhdWx0IG5ldyBDYXJ0ZXNpYW4yKDcsIDUpXG4gICAqL1xuICBiYWNrZ3JvdW5kUGFkZGluZzoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRQYWRkaW5nO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICB2YXIgYmFja2dyb3VuZFBhZGRpbmcgPSB0aGlzLl9iYWNrZ3JvdW5kUGFkZGluZztcbiAgICAgIGlmICghQ2FydGVzaWFuMi5lcXVhbHMoYmFja2dyb3VuZFBhZGRpbmcsIHZhbHVlKSkge1xuICAgICAgICBDYXJ0ZXNpYW4yLmNsb25lKHZhbHVlLCBiYWNrZ3JvdW5kUGFkZGluZyk7XG4gICAgICAgIHJlcG9zaXRpb25BbGxHbHlwaHModGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBzdHlsZSBvZiB0aGlzIGxhYmVsLlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtMYWJlbFN0eWxlfVxuICAgKiBAZGVmYXVsdCBMYWJlbFN0eWxlLkZJTExcbiAgICovXG4gIHN0eWxlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3R5bGU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIGlmICh0aGlzLl9zdHlsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc3R5bGUgPSB2YWx1ZTtcbiAgICAgICAgcmViaW5kQWxsR2x5cGhzKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgcGl4ZWwgb2Zmc2V0IGluIHNjcmVlbiBzcGFjZSBmcm9tIHRoZSBvcmlnaW4gb2YgdGhpcyBsYWJlbC4gIFRoaXMgaXMgY29tbW9ubHkgdXNlZFxuICAgKiB0byBhbGlnbiBtdWx0aXBsZSBsYWJlbHMgYW5kIGJpbGxib2FyZHMgYXQgdGhlIHNhbWUgcG9zaXRpb24sIGUuZy4sIGFuIGltYWdlIGFuZCB0ZXh0LiAgVGhlXG4gICAqIHNjcmVlbiBzcGFjZSBvcmlnaW4gaXMgdGhlIHRvcCwgbGVmdCBjb3JuZXIgb2YgdGhlIGNhbnZhczsgPGNvZGU+eDwvY29kZT4gaW5jcmVhc2VzIGZyb21cbiAgICogbGVmdCB0byByaWdodCwgYW5kIDxjb2RlPnk8L2NvZGU+IGluY3JlYXNlcyBmcm9tIHRvcCB0byBib3R0b20uXG4gICAqIDxiciAvPjxiciAvPlxuICAgKiA8ZGl2IGFsaWduPSdjZW50ZXInPlxuICAgKiA8dGFibGUgYm9yZGVyPScwJyBjZWxscGFkZGluZz0nNSc+PHRyPlxuICAgKiA8dGQgYWxpZ249J2NlbnRlcic+PGNvZGU+ZGVmYXVsdDwvY29kZT48YnIvPjxpbWcgc3JjPSdJbWFnZXMvTGFiZWwuc2V0UGl4ZWxPZmZzZXQuZGVmYXVsdC5wbmcnIHdpZHRoPScyNTAnIGhlaWdodD0nMTg4JyAvPjwvdGQ+XG4gICAqIDx0ZCBhbGlnbj0nY2VudGVyJz48Y29kZT5sLnBpeGVsb2Zmc2V0ID0gbmV3IENhcnRlc2lhbjIoMjUsIDc1KTs8L2NvZGU+PGJyLz48aW1nIHNyYz0nSW1hZ2VzL0xhYmVsLnNldFBpeGVsT2Zmc2V0Lng1MHktMjUucG5nJyB3aWR0aD0nMjUwJyBoZWlnaHQ9JzE4OCcgLz48L3RkPlxuICAgKiA8L3RyPjwvdGFibGU+XG4gICAqIFRoZSBsYWJlbCdzIG9yaWdpbiBpcyBpbmRpY2F0ZWQgYnkgdGhlIHllbGxvdyBwb2ludC5cbiAgICogPC9kaXY+XG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge0NhcnRlc2lhbjJ9XG4gICAqIEBkZWZhdWx0IENhcnRlc2lhbjIuWkVST1xuICAgKi9cbiAgcGl4ZWxPZmZzZXQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9waXhlbE9mZnNldDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgdmFyIHBpeGVsT2Zmc2V0ID0gdGhpcy5fcGl4ZWxPZmZzZXQ7XG4gICAgICBpZiAoIUNhcnRlc2lhbjIuZXF1YWxzKHBpeGVsT2Zmc2V0LCB2YWx1ZSkpIHtcbiAgICAgICAgQ2FydGVzaWFuMi5jbG9uZSh2YWx1ZSwgcGl4ZWxPZmZzZXQpO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgICAgaWYgKGRlZmluZWQoZ2x5cGguYmlsbGJvYXJkKSkge1xuICAgICAgICAgICAgZ2x5cGguYmlsbGJvYXJkLnBpeGVsT2Zmc2V0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gdGhpcy5fYmFja2dyb3VuZEJpbGxib2FyZDtcbiAgICAgICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLnBpeGVsT2Zmc2V0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgbmVhciBhbmQgZmFyIHRyYW5zbHVjZW5jeSBwcm9wZXJ0aWVzIG9mIGEgTGFiZWwgYmFzZWQgb24gdGhlIExhYmVsJ3MgZGlzdGFuY2UgZnJvbSB0aGUgY2FtZXJhLlxuICAgKiBBIGxhYmVsJ3MgdHJhbnNsdWNlbmN5IHdpbGwgaW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUge0BsaW5rIE5lYXJGYXJTY2FsYXIjbmVhclZhbHVlfSBhbmRcbiAgICoge0BsaW5rIE5lYXJGYXJTY2FsYXIjZmFyVmFsdWV9IHdoaWxlIHRoZSBjYW1lcmEgZGlzdGFuY2UgZmFsbHMgd2l0aGluIHRoZSBsb3dlciBhbmQgdXBwZXIgYm91bmRzXG4gICAqIG9mIHRoZSBzcGVjaWZpZWQge0BsaW5rIE5lYXJGYXJTY2FsYXIjbmVhcn0gYW5kIHtAbGluayBOZWFyRmFyU2NhbGFyI2Zhcn0uXG4gICAqIE91dHNpZGUgb2YgdGhlc2UgcmFuZ2VzIHRoZSBsYWJlbCdzIHRyYW5zbHVjZW5jeSByZW1haW5zIGNsYW1wZWQgdG8gdGhlIG5lYXJlc3QgYm91bmQuICBJZiB1bmRlZmluZWQsXG4gICAqIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAgICogQG1lbWJlcm9mIExhYmVsLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TmVhckZhclNjYWxhcn1cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gRXhhbXBsZSAxLlxuICAgKiAvLyBTZXQgYSBsYWJlbCdzIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgdG8gMS4wIHdoZW4gdGhlXG4gICAqIC8vIGNhbWVyYSBpcyAxNTAwIG1ldGVycyBmcm9tIHRoZSBsYWJlbCBhbmQgZGlzYXBwZWFyIGFzXG4gICAqIC8vIHRoZSBjYW1lcmEgZGlzdGFuY2UgYXBwcm9hY2hlcyA4LjBlNiBtZXRlcnMuXG4gICAqIHRleHQudHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IG5ldyBDZXNpdW0uTmVhckZhclNjYWxhcigxLjVlMiwgMS4wLCA4LjBlNiwgMC4wKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gRXhhbXBsZSAyLlxuICAgKiAvLyBkaXNhYmxlIHRyYW5zbHVjZW5jeSBieSBkaXN0YW5jZVxuICAgKiB0ZXh0LnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSB1bmRlZmluZWQ7XG4gICAqL1xuICB0cmFuc2x1Y2VuY3lCeURpc3RhbmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKGRlZmluZWQodmFsdWUpICYmIHZhbHVlLmZhciA8PSB2YWx1ZS5uZWFyKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcImZhciBkaXN0YW5jZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBuZWFyIGRpc3RhbmNlLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgdmFyIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSB0aGlzLl90cmFuc2x1Y2VuY3lCeURpc3RhbmNlO1xuICAgICAgaWYgKCFOZWFyRmFyU2NhbGFyLmVxdWFscyh0cmFuc2x1Y2VuY3lCeURpc3RhbmNlLCB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IE5lYXJGYXJTY2FsYXIuY2xvbmUoXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgdHJhbnNsdWNlbmN5QnlEaXN0YW5jZVxuICAgICAgICApO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgICAgaWYgKGRlZmluZWQoZ2x5cGguYmlsbGJvYXJkKSkge1xuICAgICAgICAgICAgZ2x5cGguYmlsbGJvYXJkLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhY2tncm91bmRCaWxsYm9hcmQgPSB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkO1xuICAgICAgICBpZiAoZGVmaW5lZChiYWNrZ3JvdW5kQmlsbGJvYXJkKSkge1xuICAgICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQudHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIG5lYXIgYW5kIGZhciBwaXhlbCBvZmZzZXQgc2NhbGluZyBwcm9wZXJ0aWVzIG9mIGEgTGFiZWwgYmFzZWQgb24gdGhlIExhYmVsJ3MgZGlzdGFuY2UgZnJvbSB0aGUgY2FtZXJhLlxuICAgKiBBIGxhYmVsJ3MgcGl4ZWwgb2Zmc2V0IHdpbGwgYmUgc2NhbGVkIGJldHdlZW4gdGhlIHtAbGluayBOZWFyRmFyU2NhbGFyI25lYXJWYWx1ZX0gYW5kXG4gICAqIHtAbGluayBOZWFyRmFyU2NhbGFyI2ZhclZhbHVlfSB3aGlsZSB0aGUgY2FtZXJhIGRpc3RhbmNlIGZhbGxzIHdpdGhpbiB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kc1xuICAgKiBvZiB0aGUgc3BlY2lmaWVkIHtAbGluayBOZWFyRmFyU2NhbGFyI25lYXJ9IGFuZCB7QGxpbmsgTmVhckZhclNjYWxhciNmYXJ9LlxuICAgKiBPdXRzaWRlIG9mIHRoZXNlIHJhbmdlcyB0aGUgbGFiZWwncyBwaXhlbCBvZmZzZXQgc2NhbGluZyByZW1haW5zIGNsYW1wZWQgdG8gdGhlIG5lYXJlc3QgYm91bmQuICBJZiB1bmRlZmluZWQsXG4gICAqIHBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge05lYXJGYXJTY2FsYXJ9XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIEV4YW1wbGUgMS5cbiAgICogLy8gU2V0IGEgbGFiZWwncyBwaXhlbCBvZmZzZXQgc2NhbGUgdG8gMC4wIHdoZW4gdGhlXG4gICAqIC8vIGNhbWVyYSBpcyAxNTAwIG1ldGVycyBmcm9tIHRoZSBsYWJlbCBhbmQgc2NhbGUgcGl4ZWwgb2Zmc2V0IHRvIDEwLjAgcGl4ZWxzXG4gICAqIC8vIGluIHRoZSB5IGRpcmVjdGlvbiB0aGUgY2FtZXJhIGRpc3RhbmNlIGFwcHJvYWNoZXMgOC4wZTYgbWV0ZXJzLlxuICAgKiB0ZXh0LnBpeGVsT2Zmc2V0ID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKDAuMCwgMS4wKTtcbiAgICogdGV4dC5waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSA9IG5ldyBDZXNpdW0uTmVhckZhclNjYWxhcigxLjVlMiwgMC4wLCA4LjBlNiwgMTAuMCk7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIEV4YW1wbGUgMi5cbiAgICogLy8gZGlzYWJsZSBwaXhlbCBvZmZzZXQgYnkgZGlzdGFuY2VcbiAgICogdGV4dC5waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgICovXG4gIHBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2U7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZS5mYXIgPD0gdmFsdWUubmVhcikge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJmYXIgZGlzdGFuY2UgbXVzdCBiZSBncmVhdGVyIHRoYW4gbmVhciBkaXN0YW5jZS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHZhciBwaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSA9IHRoaXMuX3BpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlO1xuICAgICAgaWYgKCFOZWFyRmFyU2NhbGFyLmVxdWFscyhwaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSwgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX3BpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID0gTmVhckZhclNjYWxhci5jbG9uZShcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBwaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZVxuICAgICAgICApO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgICAgaWYgKGRlZmluZWQoZ2x5cGguYmlsbGJvYXJkKSkge1xuICAgICAgICAgICAgZ2x5cGguYmlsbGJvYXJkLnBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gdGhpcy5fYmFja2dyb3VuZEJpbGxib2FyZDtcbiAgICAgICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLnBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgbmVhciBhbmQgZmFyIHNjYWxpbmcgcHJvcGVydGllcyBvZiBhIExhYmVsIGJhc2VkIG9uIHRoZSBsYWJlbCdzIGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYS5cbiAgICogQSBsYWJlbCdzIHNjYWxlIHdpbGwgaW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUge0BsaW5rIE5lYXJGYXJTY2FsYXIjbmVhclZhbHVlfSBhbmRcbiAgICoge0BsaW5rIE5lYXJGYXJTY2FsYXIjZmFyVmFsdWV9IHdoaWxlIHRoZSBjYW1lcmEgZGlzdGFuY2UgZmFsbHMgd2l0aGluIHRoZSBsb3dlciBhbmQgdXBwZXIgYm91bmRzXG4gICAqIG9mIHRoZSBzcGVjaWZpZWQge0BsaW5rIE5lYXJGYXJTY2FsYXIjbmVhcn0gYW5kIHtAbGluayBOZWFyRmFyU2NhbGFyI2Zhcn0uXG4gICAqIE91dHNpZGUgb2YgdGhlc2UgcmFuZ2VzIHRoZSBsYWJlbCdzIHNjYWxlIHJlbWFpbnMgY2xhbXBlZCB0byB0aGUgbmVhcmVzdCBib3VuZC4gIElmIHVuZGVmaW5lZCxcbiAgICogc2NhbGVCeURpc3RhbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge05lYXJGYXJTY2FsYXJ9XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIEV4YW1wbGUgMS5cbiAgICogLy8gU2V0IGEgbGFiZWwncyBzY2FsZUJ5RGlzdGFuY2UgdG8gc2NhbGUgYnkgMS41IHdoZW4gdGhlXG4gICAqIC8vIGNhbWVyYSBpcyAxNTAwIG1ldGVycyBmcm9tIHRoZSBsYWJlbCBhbmQgZGlzYXBwZWFyIGFzXG4gICAqIC8vIHRoZSBjYW1lcmEgZGlzdGFuY2UgYXBwcm9hY2hlcyA4LjBlNiBtZXRlcnMuXG4gICAqIGxhYmVsLnNjYWxlQnlEaXN0YW5jZSA9IG5ldyBDZXNpdW0uTmVhckZhclNjYWxhcigxLjVlMiwgMS41LCA4LjBlNiwgMC4wKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gRXhhbXBsZSAyLlxuICAgKiAvLyBkaXNhYmxlIHNjYWxpbmcgYnkgZGlzdGFuY2VcbiAgICogbGFiZWwuc2NhbGVCeURpc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgKi9cbiAgc2NhbGVCeURpc3RhbmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NhbGVCeURpc3RhbmNlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUuZmFyIDw9IHZhbHVlLm5lYXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwiZmFyIGRpc3RhbmNlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG5lYXIgZGlzdGFuY2UuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICB2YXIgc2NhbGVCeURpc3RhbmNlID0gdGhpcy5fc2NhbGVCeURpc3RhbmNlO1xuICAgICAgaWYgKCFOZWFyRmFyU2NhbGFyLmVxdWFscyhzY2FsZUJ5RGlzdGFuY2UsIHZhbHVlKSkge1xuICAgICAgICB0aGlzLl9zY2FsZUJ5RGlzdGFuY2UgPSBOZWFyRmFyU2NhbGFyLmNsb25lKHZhbHVlLCBzY2FsZUJ5RGlzdGFuY2UpO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgICAgaWYgKGRlZmluZWQoZ2x5cGguYmlsbGJvYXJkKSkge1xuICAgICAgICAgICAgZ2x5cGguYmlsbGJvYXJkLnNjYWxlQnlEaXN0YW5jZSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZCA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgICAgIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5zY2FsZUJ5RGlzdGFuY2UgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW5kIHNldHMgdGhlIDNEIENhcnRlc2lhbiBvZmZzZXQgYXBwbGllZCB0byB0aGlzIGxhYmVsIGluIGV5ZSBjb29yZGluYXRlcy4gIEV5ZSBjb29yZGluYXRlcyBpcyBhIGxlZnQtaGFuZGVkXG4gICAqIGNvb3JkaW5hdGUgc3lzdGVtLCB3aGVyZSA8Y29kZT54PC9jb2RlPiBwb2ludHMgdG93YXJkcyB0aGUgdmlld2VyJ3MgcmlnaHQsIDxjb2RlPnk8L2NvZGU+IHBvaW50cyB1cCwgYW5kXG4gICAqIDxjb2RlPno8L2NvZGU+IHBvaW50cyBpbnRvIHRoZSBzY3JlZW4uICBFeWUgY29vcmRpbmF0ZXMgdXNlIHRoZSBzYW1lIHNjYWxlIGFzIHdvcmxkIGFuZCBtb2RlbCBjb29yZGluYXRlcyxcbiAgICogd2hpY2ggaXMgdHlwaWNhbGx5IG1ldGVycy5cbiAgICogPGJyIC8+PGJyIC8+XG4gICAqIEFuIGV5ZSBvZmZzZXQgaXMgY29tbW9ubHkgdXNlZCB0byBhcnJhbmdlIG11bHRpcGxlIGxhYmVsIG9yIG9iamVjdHMgYXQgdGhlIHNhbWUgcG9zaXRpb24sIGUuZy4sIHRvXG4gICAqIGFycmFuZ2UgYSBsYWJlbCBhYm92ZSBpdHMgY29ycmVzcG9uZGluZyAzRCBtb2RlbC5cbiAgICogPGJyIC8+PGJyIC8+XG4gICAqIEJlbG93LCB0aGUgbGFiZWwgaXMgcG9zaXRpb25lZCBhdCB0aGUgY2VudGVyIG9mIHRoZSBFYXJ0aCBidXQgYW4gZXllIG9mZnNldCBtYWtlcyBpdCBhbHdheXNcbiAgICogYXBwZWFyIG9uIHRvcCBvZiB0aGUgRWFydGggcmVnYXJkbGVzcyBvZiB0aGUgdmlld2VyJ3Mgb3IgRWFydGgncyBvcmllbnRhdGlvbi5cbiAgICogPGJyIC8+PGJyIC8+XG4gICAqIDxkaXYgYWxpZ249J2NlbnRlcic+XG4gICAqIDx0YWJsZSBib3JkZXI9JzAnIGNlbGxwYWRkaW5nPSc1Jz48dHI+XG4gICAqIDx0ZCBhbGlnbj0nY2VudGVyJz48aW1nIHNyYz0nSW1hZ2VzL0JpbGxib2FyZC5zZXRFeWVPZmZzZXQub25lLnBuZycgd2lkdGg9JzI1MCcgaGVpZ2h0PScxODgnIC8+PC90ZD5cbiAgICogPHRkIGFsaWduPSdjZW50ZXInPjxpbWcgc3JjPSdJbWFnZXMvQmlsbGJvYXJkLnNldEV5ZU9mZnNldC50d28ucG5nJyB3aWR0aD0nMjUwJyBoZWlnaHQ9JzE4OCcgLz48L3RkPlxuICAgKiA8L3RyPjwvdGFibGU+XG4gICAqIDxjb2RlPmwuZXllT2Zmc2V0ID0gbmV3IENhcnRlc2lhbjMoMC4wLCA4MDAwMDAwLjAsIDAuMCk7PC9jb2RlPjxiciAvPjxiciAvPlxuICAgKiA8L2Rpdj5cbiAgICogQG1lbWJlcm9mIExhYmVsLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q2FydGVzaWFuM31cbiAgICogQGRlZmF1bHQgQ2FydGVzaWFuMy5aRVJPXG4gICAqL1xuICBleWVPZmZzZXQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9leWVPZmZzZXQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHZhciBleWVPZmZzZXQgPSB0aGlzLl9leWVPZmZzZXQ7XG4gICAgICBpZiAoIUNhcnRlc2lhbjMuZXF1YWxzKGV5ZU9mZnNldCwgdmFsdWUpKSB7XG4gICAgICAgIENhcnRlc2lhbjMuY2xvbmUodmFsdWUsIGV5ZU9mZnNldCk7XG5cbiAgICAgICAgdmFyIGdseXBocyA9IHRoaXMuX2dseXBocztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdseXBocy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciBnbHlwaCA9IGdseXBoc1tpXTtcbiAgICAgICAgICBpZiAoZGVmaW5lZChnbHlwaC5iaWxsYm9hcmQpKSB7XG4gICAgICAgICAgICBnbHlwaC5iaWxsYm9hcmQuZXllT2Zmc2V0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gdGhpcy5fYmFja2dyb3VuZEJpbGxib2FyZDtcbiAgICAgICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLmV5ZU9mZnNldCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBob3Jpem9udGFsIG9yaWdpbiBvZiB0aGlzIGxhYmVsLCB3aGljaCBkZXRlcm1pbmVzIGlmIHRoZSBsYWJlbCBpcyBkcmF3blxuICAgKiB0byB0aGUgbGVmdCwgY2VudGVyLCBvciByaWdodCBvZiBpdHMgYW5jaG9yIHBvc2l0aW9uLlxuICAgKiA8YnIgLz48YnIgLz5cbiAgICogPGRpdiBhbGlnbj0nY2VudGVyJz5cbiAgICogPGltZyBzcmM9J0ltYWdlcy9CaWxsYm9hcmQuc2V0SG9yaXpvbnRhbE9yaWdpbi5wbmcnIHdpZHRoPSc2NDgnIGhlaWdodD0nMTk2JyAvPjxiciAvPlxuICAgKiA8L2Rpdj5cbiAgICogQG1lbWJlcm9mIExhYmVsLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7SG9yaXpvbnRhbE9yaWdpbn1cbiAgICogQGRlZmF1bHQgSG9yaXpvbnRhbE9yaWdpbi5MRUZUXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFVzZSBhIHRvcCwgcmlnaHQgb3JpZ2luXG4gICAqIGwuaG9yaXpvbnRhbE9yaWdpbiA9IENlc2l1bS5Ib3Jpem9udGFsT3JpZ2luLlJJR0hUO1xuICAgKiBsLnZlcnRpY2FsT3JpZ2luID0gQ2VzaXVtLlZlcnRpY2FsT3JpZ2luLlRPUDtcbiAgICovXG4gIGhvcml6b250YWxPcmlnaW46IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9ob3Jpem9udGFsT3JpZ2luO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICBpZiAodGhpcy5faG9yaXpvbnRhbE9yaWdpbiAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5faG9yaXpvbnRhbE9yaWdpbiA9IHZhbHVlO1xuICAgICAgICByZXBvc2l0aW9uQWxsR2x5cGhzKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgdmVydGljYWwgb3JpZ2luIG9mIHRoaXMgbGFiZWwsIHdoaWNoIGRldGVybWluZXMgaWYgdGhlIGxhYmVsIGlzXG4gICAqIHRvIHRoZSBhYm92ZSwgYmVsb3csIG9yIGF0IHRoZSBjZW50ZXIgb2YgaXRzIGFuY2hvciBwb3NpdGlvbi5cbiAgICogPGJyIC8+PGJyIC8+XG4gICAqIDxkaXYgYWxpZ249J2NlbnRlcic+XG4gICAqIDxpbWcgc3JjPSdJbWFnZXMvQmlsbGJvYXJkLnNldFZlcnRpY2FsT3JpZ2luLnBuZycgd2lkdGg9JzY5NScgaGVpZ2h0PScxNzUnIC8+PGJyIC8+XG4gICAqIDwvZGl2PlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtWZXJ0aWNhbE9yaWdpbn1cbiAgICogQGRlZmF1bHQgVmVydGljYWxPcmlnaW4uQkFTRUxJTkVcbiAgICogQGV4YW1wbGVcbiAgICogLy8gVXNlIGEgdG9wLCByaWdodCBvcmlnaW5cbiAgICogbC5ob3Jpem9udGFsT3JpZ2luID0gQ2VzaXVtLkhvcml6b250YWxPcmlnaW4uUklHSFQ7XG4gICAqIGwudmVydGljYWxPcmlnaW4gPSBDZXNpdW0uVmVydGljYWxPcmlnaW4uVE9QO1xuICAgKi9cbiAgdmVydGljYWxPcmlnaW46IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl92ZXJ0aWNhbE9yaWdpbjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgaWYgKHRoaXMuX3ZlcnRpY2FsT3JpZ2luICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl92ZXJ0aWNhbE9yaWdpbiA9IHZhbHVlO1xuXG4gICAgICAgIHZhciBnbHlwaHMgPSB0aGlzLl9nbHlwaHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgICAgaWYgKGRlZmluZWQoZ2x5cGguYmlsbGJvYXJkKSkge1xuICAgICAgICAgICAgZ2x5cGguYmlsbGJvYXJkLnZlcnRpY2FsT3JpZ2luID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gdGhpcy5fYmFja2dyb3VuZEJpbGxib2FyZDtcbiAgICAgICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLnZlcnRpY2FsT3JpZ2luID0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXBvc2l0aW9uQWxsR2x5cGhzKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgdW5pZm9ybSBzY2FsZSB0aGF0IGlzIG11bHRpcGxpZWQgd2l0aCB0aGUgbGFiZWwncyBzaXplIGluIHBpeGVscy5cbiAgICogQSBzY2FsZSBvZiA8Y29kZT4xLjA8L2NvZGU+IGRvZXMgbm90IGNoYW5nZSB0aGUgc2l6ZSBvZiB0aGUgbGFiZWw7IGEgc2NhbGUgZ3JlYXRlciB0aGFuXG4gICAqIDxjb2RlPjEuMDwvY29kZT4gZW5sYXJnZXMgdGhlIGxhYmVsOyBhIHBvc2l0aXZlIHNjYWxlIGxlc3MgdGhhbiA8Y29kZT4xLjA8L2NvZGU+IHNocmlua3NcbiAgICogdGhlIGxhYmVsLlxuICAgKiA8YnIgLz48YnIgLz5cbiAgICogQXBwbHlpbmcgYSBsYXJnZSBzY2FsZSB2YWx1ZSBtYXkgcGl4ZWxhdGUgdGhlIGxhYmVsLiAgVG8gbWFrZSB0ZXh0IGxhcmdlciB3aXRob3V0IHBpeGVsYXRpb24sXG4gICAqIHVzZSBhIGxhcmdlciBmb250IHNpemUgd2hlbiBjYWxsaW5nIHtAbGluayBMYWJlbCNmb250fSBpbnN0ZWFkLlxuICAgKiA8YnIgLz48YnIgLz5cbiAgICogPGRpdiBhbGlnbj0nY2VudGVyJz5cbiAgICogPGltZyBzcmM9J0ltYWdlcy9MYWJlbC5zZXRTY2FsZS5wbmcnIHdpZHRoPSc0MDAnIGhlaWdodD0nMzAwJyAvPjxici8+XG4gICAqIEZyb20gbGVmdCB0byByaWdodCBpbiB0aGUgYWJvdmUgaW1hZ2UsIHRoZSBzY2FsZXMgYXJlIDxjb2RlPjAuNTwvY29kZT4sIDxjb2RlPjEuMDwvY29kZT4sXG4gICAqIGFuZCA8Y29kZT4yLjA8L2NvZGU+LlxuICAgKiA8L2Rpdj5cbiAgICogQG1lbWJlcm9mIExhYmVsLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAxLjBcbiAgICovXG4gIHNjYWxlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NhbGU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIGlmICh0aGlzLl9zY2FsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2NhbGUgPSB2YWx1ZTtcblxuICAgICAgICB2YXIgZ2x5cGhzID0gdGhpcy5fZ2x5cGhzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ2x5cGhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgICAgIGlmIChkZWZpbmVkKGdseXBoLmJpbGxib2FyZCkpIHtcbiAgICAgICAgICAgIGdseXBoLmJpbGxib2FyZC5zY2FsZSA9IHZhbHVlICogdGhpcy5fcmVsYXRpdmVTaXplO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZCA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgICAgIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5zY2FsZSA9IHZhbHVlICogdGhpcy5fcmVsYXRpdmVTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwb3NpdGlvbkFsbEdseXBocyh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0b3RhbCBzY2FsZSBvZiB0aGUgbGFiZWwsIHdoaWNoIGlzIHRoZSBsYWJlbCdzIHNjYWxlIG11bHRpcGxpZWQgYnkgdGhlIGNvbXB1dGVkIHJlbGF0aXZlIHNpemVcbiAgICogb2YgdGhlIGRlc2lyZWQgZm9udCBjb21wYXJlZCB0byB0aGUgZ2VuZXJhdGVkIGdseXBoIHNpemUuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqL1xuICB0b3RhbFNjYWxlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NhbGUgKiB0aGlzLl9yZWxhdGl2ZVNpemU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBjb25kaXRpb24gc3BlY2lmeWluZyBhdCB3aGF0IGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSB0aGF0IHRoaXMgbGFiZWwgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbn1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb247XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZS5mYXIgPD0gdmFsdWUubmVhcikge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJmYXIgbXVzdCBiZSBncmVhdGVyIHRoYW4gbmVhclwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgaWYgKFxuICAgICAgICAhRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmVxdWFscyh2YWx1ZSwgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5jbG9uZShcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB0aGlzLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgZ2x5cGhzID0gdGhpcy5fZ2x5cGhzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ2x5cGhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgICAgIGlmIChkZWZpbmVkKGdseXBoLmJpbGxib2FyZCkpIHtcbiAgICAgICAgICAgIGdseXBoLmJpbGxib2FyZC5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhY2tncm91bmRCaWxsYm9hcmQgPSB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkO1xuICAgICAgICBpZiAoZGVmaW5lZChiYWNrZ3JvdW5kQmlsbGJvYXJkKSkge1xuICAgICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSBhdCB3aGljaCB0byBkaXNhYmxlIHRoZSBkZXB0aCB0ZXN0IHRvLCBmb3IgZXhhbXBsZSwgcHJldmVudCBjbGlwcGluZyBhZ2FpbnN0IHRlcnJhaW4uXG4gICAqIFdoZW4gc2V0IHRvIHplcm8sIHRoZSBkZXB0aCB0ZXN0IGlzIGFsd2F5cyBhcHBsaWVkLiBXaGVuIHNldCB0byBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIHRoZSBkZXB0aCB0ZXN0IGlzIG5ldmVyIGFwcGxpZWQuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVEZXB0aFRlc3REaXN0YW5jZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5fZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlICE9PSB2YWx1ZSkge1xuICAgICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUgPCAwLjApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgICBcImRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwLjAuXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgICB0aGlzLl9kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSB2YWx1ZTtcblxuICAgICAgICB2YXIgZ2x5cGhzID0gdGhpcy5fZ2x5cGhzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ2x5cGhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgICAgIGlmIChkZWZpbmVkKGdseXBoLmJpbGxib2FyZCkpIHtcbiAgICAgICAgICAgIGdseXBoLmJpbGxib2FyZC5kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhY2tncm91bmRCaWxsYm9hcmQgPSB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkO1xuICAgICAgICBpZiAoZGVmaW5lZChiYWNrZ3JvdW5kQmlsbGJvYXJkKSkge1xuICAgICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHVzZXItZGVmaW5lZCB2YWx1ZSByZXR1cm5lZCB3aGVuIHRoZSBsYWJlbCBpcyBwaWNrZWQuXG4gICAqIEBtZW1iZXJvZiBMYWJlbC5wcm90b3R5cGVcbiAgICogQHR5cGUgeyp9XG4gICAqL1xuICBpZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl9pZCAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5faWQgPSB2YWx1ZTtcblxuICAgICAgICB2YXIgZ2x5cGhzID0gdGhpcy5fZ2x5cGhzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ2x5cGhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgICAgIGlmIChkZWZpbmVkKGdseXBoLmJpbGxib2FyZCkpIHtcbiAgICAgICAgICAgIGdseXBoLmJpbGxib2FyZC5pZCA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZCA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgICAgIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5pZCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHBpY2tJZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2dseXBocy5sZW5ndGggPT09IDAgfHwgIWRlZmluZWQodGhpcy5fZ2x5cGhzWzBdLmJpbGxib2FyZCkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9nbHlwaHNbMF0uYmlsbGJvYXJkLnBpY2tJZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgcG9zaXRpb24gb2YgdGhlIGxhYmVsIGJhc2VkIG9uIHRoZSBoZWlnaHQgcmVmZXJlbmNlLlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtDYXJ0ZXNpYW4zfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NsYW1wZWRQb3NpdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FjdHVhbENsYW1wZWRQb3NpdGlvbjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLl9hY3R1YWxDbGFtcGVkUG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgdGhpcy5fYWN0dWFsQ2xhbXBlZFBvc2l0aW9uXG4gICAgICApO1xuXG4gICAgICB2YXIgZ2x5cGhzID0gdGhpcy5fZ2x5cGhzO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdseXBocy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgIGlmIChkZWZpbmVkKGdseXBoLmJpbGxib2FyZCkpIHtcbiAgICAgICAgICAvLyBTZXQgYWxsIHRoZSBwcml2YXRlIHZhbHVlcyBoZXJlLCBiZWNhdXNlIHdlIGFscmVhZHkgY2xhbXBlZCB0byBncm91bmRcbiAgICAgICAgICAvLyAgc28gd2UgZG9uJ3Qgd2FudCB0byBkbyBpdCBhZ2FpbiBmb3IgZXZlcnkgZ2x5cGhcbiAgICAgICAgICBnbHlwaC5iaWxsYm9hcmQuX2NsYW1wZWRQb3NpdGlvbiA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZCA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgICBpZiAoZGVmaW5lZChiYWNrZ3JvdW5kQmlsbGJvYXJkKSkge1xuICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLl9jbGFtcGVkUG9zaXRpb24gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRoaXMgbGFiZWwgd2lsbCBiZSBzaG93biBvciBoaWRkZW4gYmVjYXVzZSBpdCB3YXMgY2x1c3RlcmVkLlxuICAgKiBAbWVtYmVyb2YgTGFiZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjbHVzdGVyU2hvdzoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NsdXN0ZXJTaG93O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl9jbHVzdGVyU2hvdyAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY2x1c3RlclNob3cgPSB2YWx1ZTtcblxuICAgICAgICB2YXIgZ2x5cGhzID0gdGhpcy5fZ2x5cGhzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ2x5cGhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgICAgIGlmIChkZWZpbmVkKGdseXBoLmJpbGxib2FyZCkpIHtcbiAgICAgICAgICAgIGdseXBoLmJpbGxib2FyZC5jbHVzdGVyU2hvdyA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZCA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgICAgIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5jbHVzdGVyU2hvdyA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5MYWJlbC5wcm90b3R5cGUuX3VwZGF0ZUNsYW1waW5nID0gZnVuY3Rpb24gKCkge1xuICBCaWxsYm9hcmQuX3VwZGF0ZUNsYW1waW5nKHRoaXMuX2xhYmVsQ29sbGVjdGlvbiwgdGhpcyk7XG59O1xuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBzY3JlZW4tc3BhY2UgcG9zaXRpb24gb2YgdGhlIGxhYmVsJ3Mgb3JpZ2luLCB0YWtpbmcgaW50byBhY2NvdW50IGV5ZSBhbmQgcGl4ZWwgb2Zmc2V0cy5cbiAqIFRoZSBzY3JlZW4gc3BhY2Ugb3JpZ2luIGlzIHRoZSB0b3AsIGxlZnQgY29ybmVyIG9mIHRoZSBjYW52YXM7IDxjb2RlPng8L2NvZGU+IGluY3JlYXNlcyBmcm9tXG4gKiBsZWZ0IHRvIHJpZ2h0LCBhbmQgPGNvZGU+eTwvY29kZT4gaW5jcmVhc2VzIGZyb20gdG9wIHRvIGJvdHRvbS5cbiAqXG4gKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSBUaGUgc2NlbmUgdGhlIGxhYmVsIGlzIGluLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4yfSBbcmVzdWx0XSBUaGUgb2JqZWN0IG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtDYXJ0ZXNpYW4yfSBUaGUgc2NyZWVuLXNwYWNlIHBvc2l0aW9uIG9mIHRoZSBsYWJlbC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnNvbGUubG9nKGwuY29tcHV0ZVNjcmVlblNwYWNlUG9zaXRpb24oc2NlbmUpLnRvU3RyaW5nKCkpO1xuICpcbiAqIEBzZWUgTGFiZWwjZXllT2Zmc2V0XG4gKiBAc2VlIExhYmVsI3BpeGVsT2Zmc2V0XG4gKi9cbkxhYmVsLnByb3RvdHlwZS5jb21wdXRlU2NyZWVuU3BhY2VQb3NpdGlvbiA9IGZ1bmN0aW9uIChzY2VuZSwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChzY2VuZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJzY2VuZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgQ2FydGVzaWFuMigpO1xuICB9XG5cbiAgdmFyIGxhYmVsQ29sbGVjdGlvbiA9IHRoaXMuX2xhYmVsQ29sbGVjdGlvbjtcbiAgdmFyIG1vZGVsTWF0cml4ID0gbGFiZWxDb2xsZWN0aW9uLm1vZGVsTWF0cml4O1xuICB2YXIgYWN0dWFsUG9zaXRpb24gPSBkZWZpbmVkKHRoaXMuX2FjdHVhbENsYW1wZWRQb3NpdGlvbilcbiAgICA/IHRoaXMuX2FjdHVhbENsYW1wZWRQb3NpdGlvblxuICAgIDogdGhpcy5fcG9zaXRpb247XG5cbiAgdmFyIHdpbmRvd0Nvb3JkaW5hdGVzID0gQmlsbGJvYXJkLl9jb21wdXRlU2NyZWVuU3BhY2VQb3NpdGlvbihcbiAgICBtb2RlbE1hdHJpeCxcbiAgICBhY3R1YWxQb3NpdGlvbixcbiAgICB0aGlzLl9leWVPZmZzZXQsXG4gICAgdGhpcy5fcGl4ZWxPZmZzZXQsXG4gICAgc2NlbmUsXG4gICAgcmVzdWx0XG4gICk7XG4gIHJldHVybiB3aW5kb3dDb29yZGluYXRlcztcbn07XG5cbi8qKlxuICogR2V0cyBhIGxhYmVsJ3Mgc2NyZWVuIHNwYWNlIGJvdW5kaW5nIGJveCBjZW50ZXJlZCBhcm91bmQgc2NyZWVuU3BhY2VQb3NpdGlvbi5cbiAqIEBwYXJhbSB7TGFiZWx9IGxhYmVsIFRoZSBsYWJlbCB0byBnZXQgdGhlIHNjcmVlbiBzcGFjZSBib3VuZGluZyBib3ggZm9yLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4yfSBzY3JlZW5TcGFjZVBvc2l0aW9uIFRoZSBzY3JlZW4gc3BhY2UgY2VudGVyIG9mIHRoZSBsYWJlbC5cbiAqIEBwYXJhbSB7Qm91bmRpbmdSZWN0YW5nbGV9IFtyZXN1bHRdIFRoZSBvYmplY3Qgb250byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge0JvdW5kaW5nUmVjdGFuZ2xlfSBUaGUgc2NyZWVuIHNwYWNlIGJvdW5kaW5nIGJveC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5MYWJlbC5nZXRTY3JlZW5TcGFjZUJvdW5kaW5nQm94ID0gZnVuY3Rpb24gKFxuICBsYWJlbCxcbiAgc2NyZWVuU3BhY2VQb3NpdGlvbixcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIHggPSAwO1xuICB2YXIgeSA9IDA7XG4gIHZhciB3aWR0aCA9IDA7XG4gIHZhciBoZWlnaHQgPSAwO1xuICB2YXIgc2NhbGUgPSBsYWJlbC50b3RhbFNjYWxlO1xuXG4gIHZhciBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gbGFiZWwuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgeCA9IHNjcmVlblNwYWNlUG9zaXRpb24ueCArIGJhY2tncm91bmRCaWxsYm9hcmQuX3RyYW5zbGF0ZS54O1xuICAgIHkgPSBzY3JlZW5TcGFjZVBvc2l0aW9uLnkgLSBiYWNrZ3JvdW5kQmlsbGJvYXJkLl90cmFuc2xhdGUueTtcbiAgICB3aWR0aCA9IGJhY2tncm91bmRCaWxsYm9hcmQud2lkdGggKiBzY2FsZTtcbiAgICBoZWlnaHQgPSBiYWNrZ3JvdW5kQmlsbGJvYXJkLmhlaWdodCAqIHNjYWxlO1xuXG4gICAgaWYgKFxuICAgICAgbGFiZWwudmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLkJPVFRPTSB8fFxuICAgICAgbGFiZWwudmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLkJBU0VMSU5FXG4gICAgKSB7XG4gICAgICB5IC09IGhlaWdodDtcbiAgICB9IGVsc2UgaWYgKGxhYmVsLnZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5DRU5URVIpIHtcbiAgICAgIHkgLT0gaGVpZ2h0ICogMC41O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB4ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgIHkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdmFyIG1heFggPSAwO1xuICAgIHZhciBtYXhZID0gMDtcbiAgICB2YXIgZ2x5cGhzID0gbGFiZWwuX2dseXBocztcbiAgICB2YXIgbGVuZ3RoID0gZ2x5cGhzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICB2YXIgYmlsbGJvYXJkID0gZ2x5cGguYmlsbGJvYXJkO1xuICAgICAgaWYgKCFkZWZpbmVkKGJpbGxib2FyZCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBnbHlwaFggPSBzY3JlZW5TcGFjZVBvc2l0aW9uLnggKyBiaWxsYm9hcmQuX3RyYW5zbGF0ZS54O1xuICAgICAgdmFyIGdseXBoWSA9IHNjcmVlblNwYWNlUG9zaXRpb24ueSAtIGJpbGxib2FyZC5fdHJhbnNsYXRlLnk7XG4gICAgICB2YXIgZ2x5cGhXaWR0aCA9IGdseXBoLmRpbWVuc2lvbnMud2lkdGggKiBzY2FsZTtcbiAgICAgIHZhciBnbHlwaEhlaWdodCA9IGdseXBoLmRpbWVuc2lvbnMuaGVpZ2h0ICogc2NhbGU7XG5cbiAgICAgIGlmIChcbiAgICAgICAgbGFiZWwudmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLkJPVFRPTSB8fFxuICAgICAgICBsYWJlbC52ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uQkFTRUxJTkVcbiAgICAgICkge1xuICAgICAgICBnbHlwaFkgLT0gZ2x5cGhIZWlnaHQ7XG4gICAgICB9IGVsc2UgaWYgKGxhYmVsLnZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5DRU5URVIpIHtcbiAgICAgICAgZ2x5cGhZIC09IGdseXBoSGVpZ2h0ICogMC41O1xuICAgICAgfVxuXG4gICAgICBpZiAobGFiZWwuX3ZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5UT1ApIHtcbiAgICAgICAgZ2x5cGhZICs9IFNERlNldHRpbmdzLlBBRERJTkcgKiBzY2FsZTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGxhYmVsLl92ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uQk9UVE9NIHx8XG4gICAgICAgIGxhYmVsLl92ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uQkFTRUxJTkVcbiAgICAgICkge1xuICAgICAgICBnbHlwaFkgLT0gU0RGU2V0dGluZ3MuUEFERElORyAqIHNjYWxlO1xuICAgICAgfVxuXG4gICAgICB4ID0gTWF0aC5taW4oeCwgZ2x5cGhYKTtcbiAgICAgIHkgPSBNYXRoLm1pbih5LCBnbHlwaFkpO1xuICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIGdseXBoWCArIGdseXBoV2lkdGgpO1xuICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIGdseXBoWSArIGdseXBoSGVpZ2h0KTtcbiAgICB9XG5cbiAgICB3aWR0aCA9IG1heFggLSB4O1xuICAgIGhlaWdodCA9IG1heFkgLSB5O1xuICB9XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgQm91bmRpbmdSZWN0YW5nbGUoKTtcbiAgfVxuXG4gIHJlc3VsdC54ID0geDtcbiAgcmVzdWx0LnkgPSB5O1xuICByZXN1bHQud2lkdGggPSB3aWR0aDtcbiAgcmVzdWx0LmhlaWdodCA9IGhlaWdodDtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoaXMgbGFiZWwgZXF1YWxzIGFub3RoZXIgbGFiZWwuICBMYWJlbHMgYXJlIGVxdWFsIGlmIGFsbCB0aGVpciBwcm9wZXJ0aWVzXG4gKiBhcmUgZXF1YWwuICBMYWJlbHMgaW4gZGlmZmVyZW50IGNvbGxlY3Rpb25zIGNhbiBiZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0xhYmVsfSBvdGhlciBUaGUgbGFiZWwgdG8gY29tcGFyZSBmb3IgZXF1YWxpdHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhlIGxhYmVscyBhcmUgZXF1YWw7IG90aGVyd2lzZSwgPGNvZGU+ZmFsc2U8L2NvZGU+LlxuICovXG5MYWJlbC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIHJldHVybiAoXG4gICAgdGhpcyA9PT0gb3RoZXIgfHxcbiAgICAoZGVmaW5lZChvdGhlcikgJiZcbiAgICAgIHRoaXMuX3Nob3cgPT09IG90aGVyLl9zaG93ICYmXG4gICAgICB0aGlzLl9zY2FsZSA9PT0gb3RoZXIuX3NjYWxlICYmXG4gICAgICB0aGlzLl9vdXRsaW5lV2lkdGggPT09IG90aGVyLl9vdXRsaW5lV2lkdGggJiZcbiAgICAgIHRoaXMuX3Nob3dCYWNrZ3JvdW5kID09PSBvdGhlci5fc2hvd0JhY2tncm91bmQgJiZcbiAgICAgIHRoaXMuX3N0eWxlID09PSBvdGhlci5fc3R5bGUgJiZcbiAgICAgIHRoaXMuX3ZlcnRpY2FsT3JpZ2luID09PSBvdGhlci5fdmVydGljYWxPcmlnaW4gJiZcbiAgICAgIHRoaXMuX2hvcml6b250YWxPcmlnaW4gPT09IG90aGVyLl9ob3Jpem9udGFsT3JpZ2luICYmXG4gICAgICB0aGlzLl9oZWlnaHRSZWZlcmVuY2UgPT09IG90aGVyLl9oZWlnaHRSZWZlcmVuY2UgJiZcbiAgICAgIHRoaXMuX3JlbmRlcmVkVGV4dCA9PT0gb3RoZXIuX3JlbmRlcmVkVGV4dCAmJlxuICAgICAgdGhpcy5fZm9udCA9PT0gb3RoZXIuX2ZvbnQgJiZcbiAgICAgIENhcnRlc2lhbjMuZXF1YWxzKHRoaXMuX3Bvc2l0aW9uLCBvdGhlci5fcG9zaXRpb24pICYmXG4gICAgICBDb2xvci5lcXVhbHModGhpcy5fZmlsbENvbG9yLCBvdGhlci5fZmlsbENvbG9yKSAmJlxuICAgICAgQ29sb3IuZXF1YWxzKHRoaXMuX291dGxpbmVDb2xvciwgb3RoZXIuX291dGxpbmVDb2xvcikgJiZcbiAgICAgIENvbG9yLmVxdWFscyh0aGlzLl9iYWNrZ3JvdW5kQ29sb3IsIG90aGVyLl9iYWNrZ3JvdW5kQ29sb3IpICYmXG4gICAgICBDYXJ0ZXNpYW4yLmVxdWFscyh0aGlzLl9iYWNrZ3JvdW5kUGFkZGluZywgb3RoZXIuX2JhY2tncm91bmRQYWRkaW5nKSAmJlxuICAgICAgQ2FydGVzaWFuMi5lcXVhbHModGhpcy5fcGl4ZWxPZmZzZXQsIG90aGVyLl9waXhlbE9mZnNldCkgJiZcbiAgICAgIENhcnRlc2lhbjMuZXF1YWxzKHRoaXMuX2V5ZU9mZnNldCwgb3RoZXIuX2V5ZU9mZnNldCkgJiZcbiAgICAgIE5lYXJGYXJTY2FsYXIuZXF1YWxzKFxuICAgICAgICB0aGlzLl90cmFuc2x1Y2VuY3lCeURpc3RhbmNlLFxuICAgICAgICBvdGhlci5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZVxuICAgICAgKSAmJlxuICAgICAgTmVhckZhclNjYWxhci5lcXVhbHMoXG4gICAgICAgIHRoaXMuX3BpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlLFxuICAgICAgICBvdGhlci5fcGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2VcbiAgICAgICkgJiZcbiAgICAgIE5lYXJGYXJTY2FsYXIuZXF1YWxzKHRoaXMuX3NjYWxlQnlEaXN0YW5jZSwgb3RoZXIuX3NjYWxlQnlEaXN0YW5jZSkgJiZcbiAgICAgIERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5lcXVhbHMoXG4gICAgICAgIHRoaXMuX2Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbixcbiAgICAgICAgb3RoZXIuX2Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgKSAmJlxuICAgICAgdGhpcy5fZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlID09PSBvdGhlci5fZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlICYmXG4gICAgICB0aGlzLl9pZCA9PT0gb3RoZXIuX2lkKVxuICApO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICovXG5MYWJlbC5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCBydW4gdGhlIGFsZ29yaXRobSwgdGhhdCBtYXRjaCB0aGUgdGV4dCBvZiB0aGUgbGFiZWwgdG8gcmlnaHQtdG8tbGVmdCBsYW5ndWFnZXNcbiAqIEBtZW1iZXJvZiBMYWJlbFxuICogQHR5cGUge0Jvb2xlYW59XG4gKiBAZGVmYXVsdCBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBFeGFtcGxlIDEuXG4gKiAvLyBTZXQgYSBsYWJlbCdzIHJpZ2h0VG9MZWZ0IGJlZm9yZSBpbml0XG4gKiBDZXNpdW0uTGFiZWwuZW5hYmxlUmlnaHRUb0xlZnREZXRlY3Rpb24gPSB0cnVlO1xuICogdmFyIG15TGFiZWxFbnRpdHkgPSB2aWV3ZXIuZW50aXRpZXMuYWRkKHtcbiAqICAgbGFiZWw6IHtcbiAqICAgICBpZDogJ215IGxhYmVsJyxcbiAqICAgICB0ZXh0OiAn15bXlCDXmNen16HXmCDXkdei15HXqNeZ16ogXFxuINeV16LXm9ep15nXlSDXmdeV16jXk9eZ150g16nXldeo15QnLFxuICogICB9XG4gKiB9KTtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRXhhbXBsZSAyLlxuICogdmFyIG15TGFiZWxFbnRpdHkgPSB2aWV3ZXIuZW50aXRpZXMuYWRkKHtcbiAqICAgbGFiZWw6IHtcbiAqICAgICBpZDogJ215IGxhYmVsJyxcbiAqICAgICB0ZXh0OiAnRW5nbGlzaCB0ZXh0J1xuICogICB9XG4gKiB9KTtcbiAqIC8vIFNldCBhIGxhYmVsJ3MgcmlnaHRUb0xlZnQgYWZ0ZXIgaW5pdFxuICogQ2VzaXVtLkxhYmVsLmVuYWJsZVJpZ2h0VG9MZWZ0RGV0ZWN0aW9uID0gdHJ1ZTtcbiAqIG15TGFiZWxFbnRpdHkudGV4dCA9ICfXmNen16HXmCDXl9eT16knO1xuICovXG5MYWJlbC5lbmFibGVSaWdodFRvTGVmdERldGVjdGlvbiA9IGZhbHNlO1xuXG5mdW5jdGlvbiBjb252ZXJ0VGV4dFRvVHlwZXModGV4dCwgcnRsQ2hhcnMpIHtcbiAgdmFyIGx0ckNoYXJzID0gL1thLXpBLVowLTldLztcbiAgdmFyIGJyYWNrZXRzQ2hhcnMgPSAvWygpW1xcXXt9PD5dLztcbiAgdmFyIHBhcnNlZFRleHQgPSBbXTtcbiAgdmFyIHdvcmQgPSBcIlwiO1xuICB2YXIgbGFzdFR5cGUgPSB0ZXh0VHlwZXMuTFRSO1xuICB2YXIgY3VycmVudFR5cGUgPSBcIlwiO1xuICB2YXIgdGV4dExlbmd0aCA9IHRleHQubGVuZ3RoO1xuICBmb3IgKHZhciB0ZXh0SW5kZXggPSAwOyB0ZXh0SW5kZXggPCB0ZXh0TGVuZ3RoOyArK3RleHRJbmRleCkge1xuICAgIHZhciBjaGFyYWN0ZXIgPSB0ZXh0LmNoYXJBdCh0ZXh0SW5kZXgpO1xuICAgIGlmIChydGxDaGFycy50ZXN0KGNoYXJhY3RlcikpIHtcbiAgICAgIGN1cnJlbnRUeXBlID0gdGV4dFR5cGVzLlJUTDtcbiAgICB9IGVsc2UgaWYgKGx0ckNoYXJzLnRlc3QoY2hhcmFjdGVyKSkge1xuICAgICAgY3VycmVudFR5cGUgPSB0ZXh0VHlwZXMuTFRSO1xuICAgIH0gZWxzZSBpZiAoYnJhY2tldHNDaGFycy50ZXN0KGNoYXJhY3RlcikpIHtcbiAgICAgIGN1cnJlbnRUeXBlID0gdGV4dFR5cGVzLkJSQUNLRVRTO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50VHlwZSA9IHRleHRUeXBlcy5XRUFLO1xuICAgIH1cblxuICAgIGlmICh0ZXh0SW5kZXggPT09IDApIHtcbiAgICAgIGxhc3RUeXBlID0gY3VycmVudFR5cGU7XG4gICAgfVxuXG4gICAgaWYgKGxhc3RUeXBlID09PSBjdXJyZW50VHlwZSAmJiBjdXJyZW50VHlwZSAhPT0gdGV4dFR5cGVzLkJSQUNLRVRTKSB7XG4gICAgICB3b3JkICs9IGNoYXJhY3RlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHdvcmQgIT09IFwiXCIpIHtcbiAgICAgICAgcGFyc2VkVGV4dC5wdXNoKHsgVHlwZTogbGFzdFR5cGUsIFdvcmQ6IHdvcmQgfSk7XG4gICAgICB9XG4gICAgICBsYXN0VHlwZSA9IGN1cnJlbnRUeXBlO1xuICAgICAgd29yZCA9IGNoYXJhY3RlcjtcbiAgICB9XG4gIH1cbiAgcGFyc2VkVGV4dC5wdXNoKHsgVHlwZTogY3VycmVudFR5cGUsIFdvcmQ6IHdvcmQgfSk7XG4gIHJldHVybiBwYXJzZWRUZXh0O1xufVxuXG5mdW5jdGlvbiByZXZlcnNlV29yZCh3b3JkKSB7XG4gIHJldHVybiB3b3JkLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBzcGxpY2VXb3JkKHJlc3VsdCwgcG9pbnRlciwgd29yZCkge1xuICByZXR1cm4gcmVzdWx0LnNsaWNlKDAsIHBvaW50ZXIpICsgd29yZCArIHJlc3VsdC5zbGljZShwb2ludGVyKTtcbn1cblxuZnVuY3Rpb24gcmV2ZXJzZUJyYWNrZXRzKGJyYWNrZXQpIHtcbiAgc3dpdGNoIChicmFja2V0KSB7XG4gICAgY2FzZSBcIihcIjpcbiAgICAgIHJldHVybiBcIilcIjtcbiAgICBjYXNlIFwiKVwiOlxuICAgICAgcmV0dXJuIFwiKFwiO1xuICAgIGNhc2UgXCJbXCI6XG4gICAgICByZXR1cm4gXCJdXCI7XG4gICAgY2FzZSBcIl1cIjpcbiAgICAgIHJldHVybiBcIltcIjtcbiAgICBjYXNlIFwie1wiOlxuICAgICAgcmV0dXJuIFwifVwiO1xuICAgIGNhc2UgXCJ9XCI6XG4gICAgICByZXR1cm4gXCJ7XCI7XG4gICAgY2FzZSBcIjxcIjpcbiAgICAgIHJldHVybiBcIj5cIjtcbiAgICBjYXNlIFwiPlwiOlxuICAgICAgcmV0dXJuIFwiPFwiO1xuICB9XG59XG5cbi8vVG8gYWRkIGFub3RoZXIgbGFuZ3VhZ2UsIHNpbXBseSBhZGQgaXRzIFVuaWNvZGUgYmxvY2sgcmFuZ2UocykgdG8gdGhlIGJlbG93IHJlZ2V4LlxudmFyIGhlYnJldyA9IFwiXFx1MDVEMC1cXHUwNUVBXCI7XG52YXIgYXJhYmljID0gXCJcXHUwNjAwLVxcdTA2RkZcXHUwNzUwLVxcdTA3N0ZcXHUwOEEwLVxcdTA4RkZcIjtcbnZhciBydGxDaGFycyA9IG5ldyBSZWdFeHAoXCJbXCIgKyBoZWJyZXcgKyBhcmFiaWMgKyBcIl1cIik7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSB0aGUgdGV4dCB0byBwYXJzZSBhbmQgcmVvcmRlclxuICogQHJldHVybnMge1N0cmluZ30gdGhlIHRleHQgYXMgcmlnaHRUb0xlZnQgZGlyZWN0aW9uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXZlcnNlUnRsKHZhbHVlKSB7XG4gIHZhciB0ZXh0cyA9IHZhbHVlLnNwbGl0KFwiXFxuXCIpO1xuICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0ZXh0ID0gdGV4dHNbaV07XG4gICAgLy8gZmlyc3QgY2hhcmFjdGVyIG9mIHRoZSBsaW5lIGlzIGEgUlRMIGNoYXJhY3Rlciwgc28gbmVlZCB0byBtYW5hZ2UgZGlmZmVyZW50IGNhc2VzXG4gICAgdmFyIHJ0bERpciA9IHJ0bENoYXJzLnRlc3QodGV4dC5jaGFyQXQoMCkpO1xuICAgIHZhciBwYXJzZWRUZXh0ID0gY29udmVydFRleHRUb1R5cGVzKHRleHQsIHJ0bENoYXJzKTtcblxuICAgIHZhciBzcGxpY2VQb2ludGVyID0gMDtcbiAgICB2YXIgbGluZSA9IFwiXCI7XG4gICAgZm9yICh2YXIgd29yZEluZGV4ID0gMDsgd29yZEluZGV4IDwgcGFyc2VkVGV4dC5sZW5ndGg7ICsrd29yZEluZGV4KSB7XG4gICAgICB2YXIgc3ViVGV4dCA9IHBhcnNlZFRleHRbd29yZEluZGV4XTtcbiAgICAgIHZhciByZXZlcnNlID1cbiAgICAgICAgc3ViVGV4dC5UeXBlID09PSB0ZXh0VHlwZXMuQlJBQ0tFVFNcbiAgICAgICAgICA/IHJldmVyc2VCcmFja2V0cyhzdWJUZXh0LldvcmQpXG4gICAgICAgICAgOiByZXZlcnNlV29yZChzdWJUZXh0LldvcmQpO1xuICAgICAgaWYgKHJ0bERpcikge1xuICAgICAgICBpZiAoc3ViVGV4dC5UeXBlID09PSB0ZXh0VHlwZXMuUlRMKSB7XG4gICAgICAgICAgbGluZSA9IHJldmVyc2UgKyBsaW5lO1xuICAgICAgICAgIHNwbGljZVBvaW50ZXIgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHN1YlRleHQuVHlwZSA9PT0gdGV4dFR5cGVzLkxUUikge1xuICAgICAgICAgIGxpbmUgPSBzcGxpY2VXb3JkKGxpbmUsIHNwbGljZVBvaW50ZXIsIHN1YlRleHQuV29yZCk7XG4gICAgICAgICAgc3BsaWNlUG9pbnRlciArPSBzdWJUZXh0LldvcmQubGVuZ3RoO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHN1YlRleHQuVHlwZSA9PT0gdGV4dFR5cGVzLldFQUsgfHxcbiAgICAgICAgICBzdWJUZXh0LlR5cGUgPT09IHRleHRUeXBlcy5CUkFDS0VUU1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBjdXJyZW50IHdvcmQgaXMgd2VhaywgbGFzdCBvbmUgd2FzIGJyYWNrZXRcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBzdWJUZXh0LlR5cGUgPT09IHRleHRUeXBlcy5XRUFLICYmXG4gICAgICAgICAgICBwYXJzZWRUZXh0W3dvcmRJbmRleCAtIDFdLlR5cGUgPT09IHRleHRUeXBlcy5CUkFDS0VUU1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgbGluZSA9IHJldmVyc2UgKyBsaW5lO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjdXJyZW50IHdvcmQgaXMgd2VhayBvciBicmFja2V0LCBsYXN0IG9uZSB3YXMgcnRsXG4gICAgICAgICAgZWxzZSBpZiAocGFyc2VkVGV4dFt3b3JkSW5kZXggLSAxXS5UeXBlID09PSB0ZXh0VHlwZXMuUlRMKSB7XG4gICAgICAgICAgICBsaW5lID0gcmV2ZXJzZSArIGxpbmU7XG4gICAgICAgICAgICBzcGxpY2VQb2ludGVyID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY3VycmVudCB3b3JkIGlzIHdlYWsgb3IgYnJhY2tldCwgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIG1vcmUgd29yZFxuICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZFRleHQubGVuZ3RoID4gd29yZEluZGV4ICsgMSkge1xuICAgICAgICAgICAgLy8gbmV4dCB3b3JkIGlzIHJ0bFxuICAgICAgICAgICAgaWYgKHBhcnNlZFRleHRbd29yZEluZGV4ICsgMV0uVHlwZSA9PT0gdGV4dFR5cGVzLlJUTCkge1xuICAgICAgICAgICAgICBsaW5lID0gcmV2ZXJzZSArIGxpbmU7XG4gICAgICAgICAgICAgIHNwbGljZVBvaW50ZXIgPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGluZSA9IHNwbGljZVdvcmQobGluZSwgc3BsaWNlUG9pbnRlciwgc3ViVGV4dC5Xb3JkKTtcbiAgICAgICAgICAgICAgc3BsaWNlUG9pbnRlciArPSBzdWJUZXh0LldvcmQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjdXJyZW50IHdvcmQgaXMgd2VhayBvciBicmFja2V0LCBhbmQgaXQgdGhlIGxhc3QgaW4gdGhpcyBsaW5lXG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsaW5lID0gc3BsaWNlV29yZChsaW5lLCAwLCByZXZlcnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGx0ciBsaW5lLCBydGwgd29yZFxuICAgICAgZWxzZSBpZiAoc3ViVGV4dC5UeXBlID09PSB0ZXh0VHlwZXMuUlRMKSB7XG4gICAgICAgIGxpbmUgPSBzcGxpY2VXb3JkKGxpbmUsIHNwbGljZVBvaW50ZXIsIHJldmVyc2UpO1xuICAgICAgfVxuICAgICAgLy8gbHRyIGxpbmUsIGx0ciB3b3JkXG4gICAgICBlbHNlIGlmIChzdWJUZXh0LlR5cGUgPT09IHRleHRUeXBlcy5MVFIpIHtcbiAgICAgICAgbGluZSArPSBzdWJUZXh0LldvcmQ7XG4gICAgICAgIHNwbGljZVBvaW50ZXIgPSBsaW5lLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIC8vIGx0ciBsaW5lLCB3ZWFrIG9yIGJyYWNrZXQgd29yZFxuICAgICAgZWxzZSBpZiAoXG4gICAgICAgIHN1YlRleHQuVHlwZSA9PT0gdGV4dFR5cGVzLldFQUsgfHxcbiAgICAgICAgc3ViVGV4dC5UeXBlID09PSB0ZXh0VHlwZXMuQlJBQ0tFVFNcbiAgICAgICkge1xuICAgICAgICAvLyBub3QgZmlyc3Qgd29yZCBpbiBsaW5lXG4gICAgICAgIGlmICh3b3JkSW5kZXggPiAwKSB7XG4gICAgICAgICAgLy8gbGFzdCB3b3JkIHdhcyBydGxcbiAgICAgICAgICBpZiAocGFyc2VkVGV4dFt3b3JkSW5kZXggLSAxXS5UeXBlID09PSB0ZXh0VHlwZXMuUlRMKSB7XG4gICAgICAgICAgICAvLyB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgbW9yZSB3b3JkXG4gICAgICAgICAgICBpZiAocGFyc2VkVGV4dC5sZW5ndGggPiB3b3JkSW5kZXggKyAxKSB7XG4gICAgICAgICAgICAgIC8vIG5leHQgd29yZCBpcyBydGxcbiAgICAgICAgICAgICAgaWYgKHBhcnNlZFRleHRbd29yZEluZGV4ICsgMV0uVHlwZSA9PT0gdGV4dFR5cGVzLlJUTCkge1xuICAgICAgICAgICAgICAgIGxpbmUgPSBzcGxpY2VXb3JkKGxpbmUsIHNwbGljZVBvaW50ZXIsIHJldmVyc2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmUgKz0gc3ViVGV4dC5Xb3JkO1xuICAgICAgICAgICAgICAgIHNwbGljZVBvaW50ZXIgPSBsaW5lLmxlbmd0aDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGluZSArPSBzdWJUZXh0LldvcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpbmUgKz0gc3ViVGV4dC5Xb3JkO1xuICAgICAgICAgICAgc3BsaWNlUG9pbnRlciA9IGxpbmUubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaW5lICs9IHN1YlRleHQuV29yZDtcbiAgICAgICAgICBzcGxpY2VQb2ludGVyID0gbGluZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQgKz0gbGluZTtcbiAgICBpZiAoaSA8IHRleHRzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJlc3VsdCArPSBcIlxcblwiO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGRlZmF1bHQgTGFiZWw7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///73705\n')},7017:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88108);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72248);\n/* harmony import */ var _Core_writeTextToCanvas_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(36051);\n/* harmony import */ var _ThirdParty_bitmap_sdf_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(56932);\n/* harmony import */ var _BillboardCollection_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8044);\n/* harmony import */ var _BlendOption_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(27384);\n/* harmony import */ var _HeightReference_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(4260);\n/* harmony import */ var _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(62919);\n/* harmony import */ var _Label_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(73705);\n/* harmony import */ var _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(81208);\n/* harmony import */ var _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(36191);\n/* harmony import */ var _TextureAtlas_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(54230);\n/* harmony import */ var _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(60473);\n/* harmony import */ var _ThirdParty_grapheme_splitter_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(93042);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// A glyph represents a single character in a particular label.  It may or may\n// not have a billboard, depending on whether the texture info has an index into\n// the the label collection\'s texture atlas.  Invisible characters have no texture, and\n// no billboard.  However, it always has a valid dimensions object.\nfunction Glyph() {\n  this.textureInfo = undefined;\n  this.dimensions = undefined;\n  this.billboard = undefined;\n}\n\n// GlyphTextureInfo represents a single character, drawn in a particular style,\n// shared and reference counted across all labels.  It may or may not have an\n// index into the label collection\'s texture atlas, depending on whether the character\n// has both width and height, but it always has a valid dimensions object.\nfunction GlyphTextureInfo(labelCollection, index, dimensions) {\n  this.labelCollection = labelCollection;\n  this.index = index;\n  this.dimensions = dimensions;\n}\n\n// Traditionally, leading is %20 of the font size.\nvar defaultLineSpacingPercent = 1.2;\n\nvar whitePixelCanvasId = "ID_WHITE_PIXEL";\nvar whitePixelSize = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(4, 4);\nvar whitePixelBoundingRegion = new _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(1, 1, 1, 1);\n\nfunction addWhitePixelCanvas(textureAtlas, labelCollection) {\n  var canvas = document.createElement("canvas");\n  canvas.width = whitePixelSize.x;\n  canvas.height = whitePixelSize.y;\n\n  var context2D = canvas.getContext("2d");\n  context2D.fillStyle = "#fff";\n  context2D.fillRect(0, 0, canvas.width, canvas.height);\n\n  textureAtlas.addImage(whitePixelCanvasId, canvas).then(function (index) {\n    labelCollection._whitePixelIndex = index;\n  });\n}\n\n// reusable object for calling writeTextToCanvas\nvar writeTextToCanvasParameters = {};\nfunction createGlyphCanvas(\n  character,\n  font,\n  fillColor,\n  outlineColor,\n  outlineWidth,\n  style,\n  verticalOrigin\n) {\n  writeTextToCanvasParameters.font = font;\n  writeTextToCanvasParameters.fillColor = fillColor;\n  writeTextToCanvasParameters.strokeColor = outlineColor;\n  writeTextToCanvasParameters.strokeWidth = outlineWidth;\n  // Setting the padding to something bigger is necessary to get enough space for the outlining.\n  writeTextToCanvasParameters.padding = _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].PADDING */ .Z.PADDING;\n\n  if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].CENTER */ .Z.CENTER) {\n    writeTextToCanvasParameters.textBaseline = "middle";\n  } else if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TOP */ .Z.TOP) {\n    writeTextToCanvasParameters.textBaseline = "top";\n  } else {\n    // VerticalOrigin.BOTTOM and VerticalOrigin.BASELINE\n    writeTextToCanvasParameters.textBaseline = "bottom";\n  }\n\n  writeTextToCanvasParameters.fill =\n    style === _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].FILL */ .Z.FILL || style === _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].FILL_AND_OUTLINE */ .Z.FILL_AND_OUTLINE;\n  writeTextToCanvasParameters.stroke =\n    style === _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].OUTLINE */ .Z.OUTLINE || style === _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].FILL_AND_OUTLINE */ .Z.FILL_AND_OUTLINE;\n  writeTextToCanvasParameters.backgroundColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].BLACK */ .Z.BLACK;\n\n  return (0,_Core_writeTextToCanvas_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(character, writeTextToCanvasParameters);\n}\n\nfunction unbindGlyph(labelCollection, glyph) {\n  glyph.textureInfo = undefined;\n  glyph.dimensions = undefined;\n\n  var billboard = glyph.billboard;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(billboard)) {\n    billboard.show = false;\n    billboard.image = undefined;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(billboard._removeCallbackFunc)) {\n      billboard._removeCallbackFunc();\n      billboard._removeCallbackFunc = undefined;\n    }\n    labelCollection._spareBillboards.push(billboard);\n    glyph.billboard = undefined;\n  }\n}\n\nfunction addGlyphToTextureAtlas(textureAtlas, id, canvas, glyphTextureInfo) {\n  textureAtlas.addImage(id, canvas).then(function (index) {\n    glyphTextureInfo.index = index;\n  });\n}\n\nvar splitter = new _ThirdParty_grapheme_splitter_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\n\nfunction rebindAllGlyphs(labelCollection, label) {\n  var text = label._renderedText;\n  var graphemes = splitter.splitGraphemes(text);\n  var textLength = graphemes.length;\n  var glyphs = label._glyphs;\n  var glyphsLength = glyphs.length;\n\n  var glyph;\n  var glyphIndex;\n  var textIndex;\n\n  // Compute a font size scale relative to the sdf font generated size.\n  label._relativeSize = label._fontSize / _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].FONT_SIZE */ .Z.FONT_SIZE;\n\n  // if we have more glyphs than needed, unbind the extras.\n  if (textLength < glyphsLength) {\n    for (glyphIndex = textLength; glyphIndex < glyphsLength; ++glyphIndex) {\n      unbindGlyph(labelCollection, glyphs[glyphIndex]);\n    }\n  }\n\n  // presize glyphs to match the new text length\n  glyphs.length = textLength;\n\n  var showBackground =\n    label._showBackground && text.split("\\n").join("").length > 0;\n  var backgroundBillboard = label._backgroundBillboard;\n  var backgroundBillboardCollection =\n    labelCollection._backgroundBillboardCollection;\n  if (!showBackground) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(backgroundBillboard)) {\n      backgroundBillboardCollection.remove(backgroundBillboard);\n      label._backgroundBillboard = backgroundBillboard = undefined;\n    }\n  } else {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(backgroundBillboard)) {\n      backgroundBillboard = backgroundBillboardCollection.add({\n        collection: labelCollection,\n        image: whitePixelCanvasId,\n        imageSubRegion: whitePixelBoundingRegion,\n      });\n      label._backgroundBillboard = backgroundBillboard;\n    }\n\n    backgroundBillboard.color = label._backgroundColor;\n    backgroundBillboard.show = label._show;\n    backgroundBillboard.position = label._position;\n    backgroundBillboard.eyeOffset = label._eyeOffset;\n    backgroundBillboard.pixelOffset = label._pixelOffset;\n    backgroundBillboard.horizontalOrigin = _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LEFT */ .Z.LEFT;\n    backgroundBillboard.verticalOrigin = label._verticalOrigin;\n    backgroundBillboard.heightReference = label._heightReference;\n    backgroundBillboard.scale = label.totalScale;\n    backgroundBillboard.pickPrimitive = label;\n    backgroundBillboard.id = label._id;\n    backgroundBillboard.translucencyByDistance = label._translucencyByDistance;\n    backgroundBillboard.pixelOffsetScaleByDistance =\n      label._pixelOffsetScaleByDistance;\n    backgroundBillboard.scaleByDistance = label._scaleByDistance;\n    backgroundBillboard.distanceDisplayCondition =\n      label._distanceDisplayCondition;\n    backgroundBillboard.disableDepthTestDistance =\n      label._disableDepthTestDistance;\n  }\n\n  var glyphTextureCache = labelCollection._glyphTextureCache;\n\n  // walk the text looking for new characters (creating new glyphs for each)\n  // or changed characters (rebinding existing glyphs)\n  for (textIndex = 0; textIndex < textLength; ++textIndex) {\n    var character = graphemes[textIndex];\n    var verticalOrigin = label._verticalOrigin;\n\n    var id = JSON.stringify([\n      character,\n      label._fontFamily,\n      label._fontStyle,\n      label._fontWeight,\n      +verticalOrigin,\n    ]);\n\n    var glyphTextureInfo = glyphTextureCache[id];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(glyphTextureInfo)) {\n      var glyphFont =\n        label._fontStyle +\n        " " +\n        label._fontWeight +\n        " " +\n        _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].FONT_SIZE */ .Z.FONT_SIZE +\n        "px " +\n        label._fontFamily;\n\n      var canvas = createGlyphCanvas(\n        character,\n        glyphFont,\n        _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE,\n        _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE,\n        0.0,\n        _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].FILL */ .Z.FILL,\n        verticalOrigin\n      );\n\n      glyphTextureInfo = new GlyphTextureInfo(\n        labelCollection,\n        -1,\n        canvas.dimensions\n      );\n      glyphTextureCache[id] = glyphTextureInfo;\n\n      if (canvas.width > 0 && canvas.height > 0) {\n        var sdfValues = (0,_ThirdParty_bitmap_sdf_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(canvas, {\n          cutoff: _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].CUTOFF */ .Z.CUTOFF,\n          radius: _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].RADIUS */ .Z.RADIUS,\n        });\n\n        var ctx = canvas.getContext("2d");\n        var canvasWidth = canvas.width;\n        var canvasHeight = canvas.height;\n        var imgData = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\n        for (var i = 0; i < canvasWidth; i++) {\n          for (var j = 0; j < canvasHeight; j++) {\n            var baseIndex = j * canvasWidth + i;\n            var alpha = sdfValues[baseIndex] * 255;\n            var imageIndex = baseIndex * 4;\n            imgData.data[imageIndex + 0] = alpha;\n            imgData.data[imageIndex + 1] = alpha;\n            imgData.data[imageIndex + 2] = alpha;\n            imgData.data[imageIndex + 3] = alpha;\n          }\n        }\n        ctx.putImageData(imgData, 0, 0);\n        if (character !== " ") {\n          addGlyphToTextureAtlas(\n            labelCollection._textureAtlas,\n            id,\n            canvas,\n            glyphTextureInfo\n          );\n        }\n      }\n    }\n\n    glyph = glyphs[textIndex];\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(glyph)) {\n      // clean up leftover information from the previous glyph\n      if (glyphTextureInfo.index === -1) {\n        // no texture, and therefore no billboard, for this glyph.\n        // so, completely unbind glyph.\n        unbindGlyph(labelCollection, glyph);\n      } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(glyph.textureInfo)) {\n        // we have a texture and billboard.  If we had one before, release\n        // our reference to that texture info, but reuse the billboard.\n        glyph.textureInfo = undefined;\n      }\n    } else {\n      // create a glyph object\n      glyph = new Glyph();\n      glyphs[textIndex] = glyph;\n    }\n\n    glyph.textureInfo = glyphTextureInfo;\n    glyph.dimensions = glyphTextureInfo.dimensions;\n\n    // if we have a texture, configure the existing billboard, or obtain one\n    if (glyphTextureInfo.index !== -1) {\n      var billboard = glyph.billboard;\n      var spareBillboards = labelCollection._spareBillboards;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(billboard)) {\n        if (spareBillboards.length > 0) {\n          billboard = spareBillboards.pop();\n        } else {\n          billboard = labelCollection._billboardCollection.add({\n            collection: labelCollection,\n          });\n          billboard._labelDimensions = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n          billboard._labelTranslate = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n        }\n        glyph.billboard = billboard;\n      }\n\n      billboard.show = label._show;\n      billboard.position = label._position;\n      billboard.eyeOffset = label._eyeOffset;\n      billboard.pixelOffset = label._pixelOffset;\n      billboard.horizontalOrigin = _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LEFT */ .Z.LEFT;\n      billboard.verticalOrigin = label._verticalOrigin;\n      billboard.heightReference = label._heightReference;\n      billboard.scale = label.totalScale;\n      billboard.pickPrimitive = label;\n      billboard.id = label._id;\n      billboard.image = id;\n      billboard.translucencyByDistance = label._translucencyByDistance;\n      billboard.pixelOffsetScaleByDistance = label._pixelOffsetScaleByDistance;\n      billboard.scaleByDistance = label._scaleByDistance;\n      billboard.distanceDisplayCondition = label._distanceDisplayCondition;\n      billboard.disableDepthTestDistance = label._disableDepthTestDistance;\n      billboard._batchIndex = label._batchIndex;\n      billboard.outlineColor = label.outlineColor;\n      if (label.style === _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].FILL_AND_OUTLINE */ .Z.FILL_AND_OUTLINE) {\n        billboard.color = label._fillColor;\n        billboard.outlineWidth = label.outlineWidth;\n      } else if (label.style === _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].FILL */ .Z.FILL) {\n        billboard.color = label._fillColor;\n        billboard.outlineWidth = 0.0;\n      } else if (label.style === _LabelStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].OUTLINE */ .Z.OUTLINE) {\n        billboard.color = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].TRANSPARENT */ .Z.TRANSPARENT;\n        billboard.outlineWidth = label.outlineWidth;\n      }\n    }\n  }\n\n  // changing glyphs will cause the position of the\n  // glyphs to change, since different characters have different widths\n  label._repositionAllGlyphs = true;\n}\n\nfunction calculateWidthOffset(lineWidth, horizontalOrigin, backgroundPadding) {\n  if (horizontalOrigin === _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].CENTER */ .Z.CENTER) {\n    return -lineWidth / 2;\n  } else if (horizontalOrigin === _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].RIGHT */ .Z.RIGHT) {\n    return -(lineWidth + backgroundPadding.x);\n  }\n  return backgroundPadding.x;\n}\n\n// reusable Cartesian2 instances\nvar glyphPixelOffset = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchBackgroundPadding = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction repositionAllGlyphs(label) {\n  var glyphs = label._glyphs;\n  var text = label._renderedText;\n  var glyph;\n  var dimensions;\n  var lastLineWidth = 0;\n  var maxLineWidth = 0;\n  var lineWidths = [];\n  var maxGlyphDescent = Number.NEGATIVE_INFINITY;\n  var maxGlyphY = 0;\n  var numberOfLines = 1;\n  var glyphIndex;\n  var glyphLength = glyphs.length;\n\n  var backgroundBillboard = label._backgroundBillboard;\n  var backgroundPadding = _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(backgroundBillboard) ? label._backgroundPadding : _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO,\n    scratchBackgroundPadding\n  );\n\n  // We need to scale the background padding, which is specified in pixels by the inverse of the relative size so it is scaled properly.\n  backgroundPadding.x /= label._relativeSize;\n  backgroundPadding.y /= label._relativeSize;\n\n  for (glyphIndex = 0; glyphIndex < glyphLength; ++glyphIndex) {\n    if (text.charAt(glyphIndex) === "\\n") {\n      lineWidths.push(lastLineWidth);\n      ++numberOfLines;\n      lastLineWidth = 0;\n    } else {\n      glyph = glyphs[glyphIndex];\n      dimensions = glyph.dimensions;\n      maxGlyphY = Math.max(maxGlyphY, dimensions.height - dimensions.descent);\n      maxGlyphDescent = Math.max(maxGlyphDescent, dimensions.descent);\n\n      //Computing the line width must also account for the kerning that occurs between letters.\n      lastLineWidth += dimensions.width - dimensions.minx;\n      if (glyphIndex < glyphLength - 1) {\n        lastLineWidth += glyphs[glyphIndex + 1].dimensions.minx;\n      }\n      maxLineWidth = Math.max(maxLineWidth, lastLineWidth);\n    }\n  }\n  lineWidths.push(lastLineWidth);\n  var maxLineHeight = maxGlyphY + maxGlyphDescent;\n\n  var scale = label.totalScale;\n  var horizontalOrigin = label._horizontalOrigin;\n  var verticalOrigin = label._verticalOrigin;\n  var lineIndex = 0;\n  var lineWidth = lineWidths[lineIndex];\n  var widthOffset = calculateWidthOffset(\n    lineWidth,\n    horizontalOrigin,\n    backgroundPadding\n  );\n  var lineSpacing =\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(label._lineHeight)\n      ? label._lineHeight\n      : defaultLineSpacingPercent * label._fontSize) / label._relativeSize;\n  var otherLinesHeight = lineSpacing * (numberOfLines - 1);\n  var totalLineWidth = maxLineWidth;\n  var totalLineHeight = maxLineHeight + otherLinesHeight;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(backgroundBillboard)) {\n    totalLineWidth += backgroundPadding.x * 2;\n    totalLineHeight += backgroundPadding.y * 2;\n    backgroundBillboard._labelHorizontalOrigin = horizontalOrigin;\n  }\n\n  glyphPixelOffset.x = widthOffset * scale;\n  glyphPixelOffset.y = 0;\n\n  var firstCharOfLine = true;\n\n  var lineOffsetY = 0;\n  for (glyphIndex = 0; glyphIndex < glyphLength; ++glyphIndex) {\n    if (text.charAt(glyphIndex) === "\\n") {\n      ++lineIndex;\n      lineOffsetY += lineSpacing;\n      lineWidth = lineWidths[lineIndex];\n      widthOffset = calculateWidthOffset(\n        lineWidth,\n        horizontalOrigin,\n        backgroundPadding\n      );\n      glyphPixelOffset.x = widthOffset * scale;\n      firstCharOfLine = true;\n    } else {\n      glyph = glyphs[glyphIndex];\n      dimensions = glyph.dimensions;\n\n      if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TOP */ .Z.TOP) {\n        glyphPixelOffset.y =\n          dimensions.height - maxGlyphY - backgroundPadding.y;\n        glyphPixelOffset.y += _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].PADDING */ .Z.PADDING;\n      } else if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].CENTER */ .Z.CENTER) {\n        glyphPixelOffset.y =\n          (otherLinesHeight + dimensions.height - maxGlyphY) / 2;\n      } else if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].BASELINE */ .Z.BASELINE) {\n        glyphPixelOffset.y = otherLinesHeight;\n        glyphPixelOffset.y -= _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].PADDING */ .Z.PADDING;\n      } else {\n        // VerticalOrigin.BOTTOM\n        glyphPixelOffset.y =\n          otherLinesHeight + maxGlyphDescent + backgroundPadding.y;\n        glyphPixelOffset.y -= _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].PADDING */ .Z.PADDING;\n      }\n      glyphPixelOffset.y =\n        (glyphPixelOffset.y - dimensions.descent - lineOffsetY) * scale;\n\n      // Handle any offsets for the first character of the line since the bounds might not be right on the bottom left pixel.\n      if (firstCharOfLine) {\n        glyphPixelOffset.x -= _SDFSettings_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].PADDING */ .Z.PADDING * scale;\n        firstCharOfLine = false;\n      }\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(glyph.billboard)) {\n        glyph.billboard._setTranslate(glyphPixelOffset);\n        glyph.billboard._labelDimensions.x = totalLineWidth;\n        glyph.billboard._labelDimensions.y = totalLineHeight;\n        glyph.billboard._labelHorizontalOrigin = horizontalOrigin;\n      }\n\n      //Compute the next x offset taking into account the kerning performed\n      //on both the current letter as well as the next letter to be drawn\n      //as well as any applied scale.\n      if (glyphIndex < glyphLength - 1) {\n        var nextGlyph = glyphs[glyphIndex + 1];\n        glyphPixelOffset.x +=\n          (dimensions.width - dimensions.minx + nextGlyph.dimensions.minx) *\n          scale;\n      }\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(backgroundBillboard) && text.split("\\n").join("").length > 0) {\n    if (horizontalOrigin === _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].CENTER */ .Z.CENTER) {\n      widthOffset = -maxLineWidth / 2 - backgroundPadding.x;\n    } else if (horizontalOrigin === _HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].RIGHT */ .Z.RIGHT) {\n      widthOffset = -(maxLineWidth + backgroundPadding.x * 2);\n    } else {\n      widthOffset = 0;\n    }\n    glyphPixelOffset.x = widthOffset * scale;\n\n    if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TOP */ .Z.TOP) {\n      glyphPixelOffset.y = maxLineHeight - maxGlyphY - maxGlyphDescent;\n    } else if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].CENTER */ .Z.CENTER) {\n      glyphPixelOffset.y = (maxLineHeight - maxGlyphY) / 2 - maxGlyphDescent;\n    } else if (verticalOrigin === _VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].BASELINE */ .Z.BASELINE) {\n      glyphPixelOffset.y = -backgroundPadding.y - maxGlyphDescent;\n    } else {\n      // VerticalOrigin.BOTTOM\n      glyphPixelOffset.y = 0;\n    }\n    glyphPixelOffset.y = glyphPixelOffset.y * scale;\n\n    backgroundBillboard.width = totalLineWidth;\n    backgroundBillboard.height = totalLineHeight;\n    backgroundBillboard._setTranslate(glyphPixelOffset);\n    backgroundBillboard._labelTranslate = _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n      glyphPixelOffset,\n      backgroundBillboard._labelTranslate\n    );\n  }\n\n  if (label.heightReference === _HeightReference_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].CLAMP_TO_GROUND */ .Z.CLAMP_TO_GROUND) {\n    for (glyphIndex = 0; glyphIndex < glyphLength; ++glyphIndex) {\n      glyph = glyphs[glyphIndex];\n      var billboard = glyph.billboard;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(billboard)) {\n        billboard._labelTranslate = _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n          glyphPixelOffset,\n          billboard._labelTranslate\n        );\n      }\n    }\n  }\n}\n\nfunction destroyLabel(labelCollection, label) {\n  var glyphs = label._glyphs;\n  for (var i = 0, len = glyphs.length; i < len; ++i) {\n    unbindGlyph(labelCollection, glyphs[i]);\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(label._backgroundBillboard)) {\n    labelCollection._backgroundBillboardCollection.remove(\n      label._backgroundBillboard\n    );\n    label._backgroundBillboard = undefined;\n  }\n  label._labelCollection = undefined;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(label._removeCallbackFunc)) {\n    label._removeCallbackFunc();\n  }\n\n  (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(label);\n}\n\n/**\n * A renderable collection of labels.  Labels are viewport-aligned text positioned in the 3D scene.\n * Each label can have a different font, color, scale, etc.\n * <br /><br />\n * <div align=\'center\'>\n * <img src=\'Images/Label.png\' width=\'400\' height=\'300\' /><br />\n * Example labels\n * </div>\n * <br /><br />\n * Labels are added and removed from the collection using {@link LabelCollection#add}\n * and {@link LabelCollection#remove}.\n *\n * @alias LabelCollection\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Matrix4} [options.modelMatrix=Matrix4.IDENTITY] The 4x4 transformation matrix that transforms each label from model to world coordinates.\n * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Determines if this primitive\'s commands\' bounding spheres are shown.\n * @param {Scene} [options.scene] Must be passed in for labels that use the height reference property or will be depth tested against the globe.\n * @param {BlendOption} [options.blendOption=BlendOption.OPAQUE_AND_TRANSLUCENT] The label blending option. The default\n * is used for rendering both opaque and translucent labels. However, if either all of the labels are completely opaque or all are completely translucent,\n * setting the technique to BlendOption.OPAQUE or BlendOption.TRANSLUCENT can improve performance by up to 2x.\n * @param {Boolean} [options.show=true] Determines if the labels in the collection will be shown.\n *\n * @performance For best performance, prefer a few collections, each with many labels, to\n * many collections with only a few labels each.  Avoid having collections where some\n * labels change every frame and others do not; instead, create one or more collections\n * for static labels, and one or more collections for dynamic labels.\n *\n * @see LabelCollection#add\n * @see LabelCollection#remove\n * @see Label\n * @see BillboardCollection\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Labels.html|Cesium Sandcastle Labels Demo}\n *\n * @example\n * // Create a label collection with two labels\n * var labels = scene.primitives.add(new Cesium.LabelCollection());\n * labels.add({\n *   position : new Cesium.Cartesian3(1.0, 2.0, 3.0),\n *   text : \'A label\'\n * });\n * labels.add({\n *   position : new Cesium.Cartesian3(4.0, 5.0, 6.0),\n *   text : \'Another label\'\n * });\n */\nfunction LabelCollection(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._scene = options.scene;\n  this._batchTable = options.batchTable;\n\n  this._textureAtlas = undefined;\n  this._backgroundTextureAtlas = undefined;\n  this._whitePixelIndex = undefined;\n\n  this._backgroundBillboardCollection = new _BillboardCollection_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n    scene: this._scene,\n  });\n  this._backgroundBillboardCollection.destroyTextureAtlas = false;\n\n  this._billboardCollection = new _BillboardCollection_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n    scene: this._scene,\n    batchTable: this._batchTable,\n  });\n  this._billboardCollection.destroyTextureAtlas = false;\n  this._billboardCollection._sdf = true;\n\n  this._spareBillboards = [];\n  this._glyphTextureCache = {};\n  this._labels = [];\n  this._labelsToUpdate = [];\n  this._totalGlyphCount = 0;\n\n  this._highlightColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(_Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE); // Only used by Vector3DTilePoints\n\n  /**\n   * Determines if labels in this collection will be shown.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.show, true);\n\n  /**\n   * The 4x4 transformation matrix that transforms each label in this collection from model to world coordinates.\n   * When this is the identity matrix, the labels are drawn in world coordinates, i.e., Earth\'s WGS84 coordinates.\n   * Local reference frames can be used by providing a different transformation matrix, like that returned\n   * by {@link Transforms.eastNorthUpToFixedFrame}.\n   *\n   * @type Matrix4\n   * @default {@link Matrix4.IDENTITY}\n   *\n   * @example\n   * var center = Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883);\n   * labels.modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(center);\n   * labels.add({\n   *   position : new Cesium.Cartesian3(0.0, 0.0, 0.0),\n   *   text     : \'Center\'\n   * });\n   * labels.add({\n   *   position : new Cesium.Cartesian3(1000000.0, 0.0, 0.0),\n   *   text     : \'East\'\n   * });\n   * labels.add({\n   *   position : new Cesium.Cartesian3(0.0, 1000000.0, 0.0),\n   *   text     : \'North\'\n   * });\n   * labels.add({\n   *   position : new Cesium.Cartesian3(0.0, 0.0, 1000000.0),\n   *   text     : \'Up\'\n   * });\n   */\n  this.modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.modelMatrix, _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].IDENTITY */ .Z.IDENTITY)\n  );\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the bounding sphere for each draw command in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowBoundingVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n    options.debugShowBoundingVolume,\n    false\n  );\n\n  /**\n   * The label blending option. The default is used for rendering both opaque and translucent labels.\n   * However, if either all of the labels are completely opaque or all are completely translucent,\n   * setting the technique to BlendOption.OPAQUE or BlendOption.TRANSLUCENT can improve\n   * performance by up to 2x.\n   * @type {BlendOption}\n   * @default BlendOption.OPAQUE_AND_TRANSLUCENT\n   */\n  this.blendOption = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n    options.blendOption,\n    _BlendOption_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].OPAQUE_AND_TRANSLUCENT */ .Z.OPAQUE_AND_TRANSLUCENT\n  );\n}\n\nObject.defineProperties(LabelCollection.prototype, {\n  /**\n   * Returns the number of labels in this collection.  This is commonly used with\n   * {@link LabelCollection#get} to iterate over all the labels\n   * in the collection.\n   * @memberof LabelCollection.prototype\n   * @type {Number}\n   */\n  length: {\n    get: function () {\n      return this._labels.length;\n    },\n  },\n});\n\n/**\n * Creates and adds a label with the specified initial properties to the collection.\n * The added label is returned so it can be modified or removed from the collection later.\n *\n * @param {Object} [options] A template describing the label\'s properties as shown in Example 1.\n * @returns {Label} The label that was added to the collection.\n *\n * @performance Calling <code>add</code> is expected constant time.  However, the collection\'s vertex buffer\n * is rewritten; this operations is <code>O(n)</code> and also incurs\n * CPU to GPU overhead.  For best performance, add as many billboards as possible before\n * calling <code>update</code>.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * // Example 1:  Add a label, specifying all the default values.\n * var l = labels.add({\n *   show : true,\n *   position : Cesium.Cartesian3.ZERO,\n *   text : \'\',\n *   font : \'30px sans-serif\',\n *   fillColor : Cesium.Color.WHITE,\n *   outlineColor : Cesium.Color.BLACK,\n *   outlineWidth : 1.0,\n *   showBackground : false,\n *   backgroundColor : new Cesium.Color(0.165, 0.165, 0.165, 0.8),\n *   backgroundPadding : new Cesium.Cartesian2(7, 5),\n *   style : Cesium.LabelStyle.FILL,\n *   pixelOffset : Cesium.Cartesian2.ZERO,\n *   eyeOffset : Cesium.Cartesian3.ZERO,\n *   horizontalOrigin : Cesium.HorizontalOrigin.LEFT,\n *   verticalOrigin : Cesium.VerticalOrigin.BASELINE,\n *   scale : 1.0,\n *   translucencyByDistance : undefined,\n *   pixelOffsetScaleByDistance : undefined,\n *   heightReference : HeightReference.NONE,\n *   distanceDisplayCondition : undefined\n * });\n *\n * @example\n * // Example 2:  Specify only the label\'s cartographic position,\n * // text, and font.\n * var l = labels.add({\n *   position : Cesium.Cartesian3.fromRadians(longitude, latitude, height),\n *   text : \'Hello World\',\n *   font : \'24px Helvetica\',\n * });\n *\n * @see LabelCollection#remove\n * @see LabelCollection#removeAll\n */\nLabelCollection.prototype.add = function (options) {\n  var label = new _Label_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(options, this);\n\n  this._labels.push(label);\n  this._labelsToUpdate.push(label);\n\n  return label;\n};\n\n/**\n * Removes a label from the collection.  Once removed, a label is no longer usable.\n *\n * @param {Label} label The label to remove.\n * @returns {Boolean} <code>true</code> if the label was removed; <code>false</code> if the label was not found in the collection.\n *\n * @performance Calling <code>remove</code> is expected constant time.  However, the collection\'s vertex buffer\n * is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.  For\n * best performance, remove as many labels as possible before calling <code>update</code>.\n * If you intend to temporarily hide a label, it is usually more efficient to call\n * {@link Label#show} instead of removing and re-adding the label.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * var l = labels.add(...);\n * labels.remove(l);  // Returns true\n *\n * @see LabelCollection#add\n * @see LabelCollection#removeAll\n * @see Label#show\n */\nLabelCollection.prototype.remove = function (label) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(label) && label._labelCollection === this) {\n    var index = this._labels.indexOf(label);\n    if (index !== -1) {\n      this._labels.splice(index, 1);\n      destroyLabel(this, label);\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Removes all labels from the collection.\n *\n * @performance <code>O(n)</code>.  It is more efficient to remove all the labels\n * from a collection and then add new ones than to create a new collection entirely.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * labels.add(...);\n * labels.add(...);\n * labels.removeAll();\n *\n * @see LabelCollection#add\n * @see LabelCollection#remove\n */\nLabelCollection.prototype.removeAll = function () {\n  var labels = this._labels;\n\n  for (var i = 0, len = labels.length; i < len; ++i) {\n    destroyLabel(this, labels[i]);\n  }\n\n  labels.length = 0;\n};\n\n/**\n * Check whether this collection contains a given label.\n *\n * @param {Label} label The label to check for.\n * @returns {Boolean} true if this collection contains the label, false otherwise.\n *\n * @see LabelCollection#get\n *\n */\nLabelCollection.prototype.contains = function (label) {\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(label) && label._labelCollection === this;\n};\n\n/**\n * Returns the label in the collection at the specified index.  Indices are zero-based\n * and increase as labels are added.  Removing a label shifts all labels after\n * it to the left, changing their indices.  This function is commonly used with\n * {@link LabelCollection#length} to iterate over all the labels\n * in the collection.\n *\n * @param {Number} index The zero-based index of the billboard.\n *\n * @returns {Label} The label at the specified index.\n *\n * @performance Expected constant time.  If labels were removed from the collection and\n * {@link Scene#render} was not called, an implicit <code>O(n)</code>\n * operation is performed.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * // Toggle the show property of every label in the collection\n * var len = labels.length;\n * for (var i = 0; i < len; ++i) {\n *   var l = billboards.get(i);\n *   l.show = !l.show;\n * }\n *\n * @see LabelCollection#length\n */\nLabelCollection.prototype.get = function (index) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(index)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("index is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  return this._labels[index];\n};\n\n/**\n * @private\n *\n */\nLabelCollection.prototype.update = function (frameState) {\n  if (!this.show) {\n    return;\n  }\n\n  var billboardCollection = this._billboardCollection;\n  var backgroundBillboardCollection = this._backgroundBillboardCollection;\n\n  billboardCollection.modelMatrix = this.modelMatrix;\n  billboardCollection.debugShowBoundingVolume = this.debugShowBoundingVolume;\n  backgroundBillboardCollection.modelMatrix = this.modelMatrix;\n  backgroundBillboardCollection.debugShowBoundingVolume = this.debugShowBoundingVolume;\n\n  var context = frameState.context;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(this._textureAtlas)) {\n    this._textureAtlas = new _TextureAtlas_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n      context: context,\n    });\n    billboardCollection.textureAtlas = this._textureAtlas;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(this._backgroundTextureAtlas)) {\n    this._backgroundTextureAtlas = new _TextureAtlas_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n      context: context,\n      initialSize: whitePixelSize,\n    });\n    backgroundBillboardCollection.textureAtlas = this._backgroundTextureAtlas;\n    addWhitePixelCanvas(this._backgroundTextureAtlas, this);\n  }\n\n  var len = this._labelsToUpdate.length;\n  for (var i = 0; i < len; ++i) {\n    var label = this._labelsToUpdate[i];\n    if (label.isDestroyed()) {\n      continue;\n    }\n\n    var preUpdateGlyphCount = label._glyphs.length;\n\n    if (label._rebindAllGlyphs) {\n      rebindAllGlyphs(this, label);\n      label._rebindAllGlyphs = false;\n    }\n\n    if (label._repositionAllGlyphs) {\n      repositionAllGlyphs(label);\n      label._repositionAllGlyphs = false;\n    }\n\n    var glyphCountDifference = label._glyphs.length - preUpdateGlyphCount;\n    this._totalGlyphCount += glyphCountDifference;\n  }\n\n  var blendOption =\n    backgroundBillboardCollection.length > 0\n      ? _BlendOption_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT\n      : this.blendOption;\n  billboardCollection.blendOption = blendOption;\n  backgroundBillboardCollection.blendOption = blendOption;\n\n  billboardCollection._highlightColor = this._highlightColor;\n  backgroundBillboardCollection._highlightColor = this._highlightColor;\n\n  this._labelsToUpdate.length = 0;\n  backgroundBillboardCollection.update(frameState);\n  billboardCollection.update(frameState);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n *\n * @see LabelCollection#destroy\n */\nLabelCollection.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * labels = labels && labels.destroy();\n *\n * @see LabelCollection#isDestroyed\n */\nLabelCollection.prototype.destroy = function () {\n  this.removeAll();\n  this._billboardCollection = this._billboardCollection.destroy();\n  this._textureAtlas = this._textureAtlas && this._textureAtlas.destroy();\n  this._backgroundBillboardCollection = this._backgroundBillboardCollection.destroy();\n  this._backgroundTextureAtlas =\n    this._backgroundTextureAtlas && this._backgroundTextureAtlas.destroy();\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (LabelCollection);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUSx3RkFBdUI7QUFDL0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSx3REFBd0Q7QUFDeEQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBLGFBQWEsU0FBUyxtQ0FBbUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUywyRUFBYTtBQUN0QjtBQUNBLHlEQUFlLGVBQWUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9MYWJlbENvbGxlY3Rpb24uanM/Zjc5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm91bmRpbmdSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvQm91bmRpbmdSZWN0YW5nbGUuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4yIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjIuanNcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vQ29yZS9Db2xvci5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IHdyaXRlVGV4dFRvQ2FudmFzIGZyb20gXCIuLi9Db3JlL3dyaXRlVGV4dFRvQ2FudmFzLmpzXCI7XG5pbXBvcnQgYml0bWFwU0RGIGZyb20gXCIuLi9UaGlyZFBhcnR5L2JpdG1hcC1zZGYuanNcIjtcbmltcG9ydCBCaWxsYm9hcmRDb2xsZWN0aW9uIGZyb20gXCIuL0JpbGxib2FyZENvbGxlY3Rpb24uanNcIjtcbmltcG9ydCBCbGVuZE9wdGlvbiBmcm9tIFwiLi9CbGVuZE9wdGlvbi5qc1wiO1xuaW1wb3J0IEhlaWdodFJlZmVyZW5jZSBmcm9tIFwiLi9IZWlnaHRSZWZlcmVuY2UuanNcIjtcbmltcG9ydCBIb3Jpem9udGFsT3JpZ2luIGZyb20gXCIuL0hvcml6b250YWxPcmlnaW4uanNcIjtcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi9MYWJlbC5qc1wiO1xuaW1wb3J0IExhYmVsU3R5bGUgZnJvbSBcIi4vTGFiZWxTdHlsZS5qc1wiO1xuaW1wb3J0IFNERlNldHRpbmdzIGZyb20gXCIuL1NERlNldHRpbmdzLmpzXCI7XG5pbXBvcnQgVGV4dHVyZUF0bGFzIGZyb20gXCIuL1RleHR1cmVBdGxhcy5qc1wiO1xuaW1wb3J0IFZlcnRpY2FsT3JpZ2luIGZyb20gXCIuL1ZlcnRpY2FsT3JpZ2luLmpzXCI7XG5pbXBvcnQgR3JhcGhlbWVTcGxpdHRlciBmcm9tIFwiLi4vVGhpcmRQYXJ0eS9ncmFwaGVtZS1zcGxpdHRlci5qc1wiO1xuXG4vLyBBIGdseXBoIHJlcHJlc2VudHMgYSBzaW5nbGUgY2hhcmFjdGVyIGluIGEgcGFydGljdWxhciBsYWJlbC4gIEl0IG1heSBvciBtYXlcbi8vIG5vdCBoYXZlIGEgYmlsbGJvYXJkLCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgdGV4dHVyZSBpbmZvIGhhcyBhbiBpbmRleCBpbnRvXG4vLyB0aGUgdGhlIGxhYmVsIGNvbGxlY3Rpb24ncyB0ZXh0dXJlIGF0bGFzLiAgSW52aXNpYmxlIGNoYXJhY3RlcnMgaGF2ZSBubyB0ZXh0dXJlLCBhbmRcbi8vIG5vIGJpbGxib2FyZC4gIEhvd2V2ZXIsIGl0IGFsd2F5cyBoYXMgYSB2YWxpZCBkaW1lbnNpb25zIG9iamVjdC5cbmZ1bmN0aW9uIEdseXBoKCkge1xuICB0aGlzLnRleHR1cmVJbmZvID0gdW5kZWZpbmVkO1xuICB0aGlzLmRpbWVuc2lvbnMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuYmlsbGJvYXJkID0gdW5kZWZpbmVkO1xufVxuXG4vLyBHbHlwaFRleHR1cmVJbmZvIHJlcHJlc2VudHMgYSBzaW5nbGUgY2hhcmFjdGVyLCBkcmF3biBpbiBhIHBhcnRpY3VsYXIgc3R5bGUsXG4vLyBzaGFyZWQgYW5kIHJlZmVyZW5jZSBjb3VudGVkIGFjcm9zcyBhbGwgbGFiZWxzLiAgSXQgbWF5IG9yIG1heSBub3QgaGF2ZSBhblxuLy8gaW5kZXggaW50byB0aGUgbGFiZWwgY29sbGVjdGlvbidzIHRleHR1cmUgYXRsYXMsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBjaGFyYWN0ZXJcbi8vIGhhcyBib3RoIHdpZHRoIGFuZCBoZWlnaHQsIGJ1dCBpdCBhbHdheXMgaGFzIGEgdmFsaWQgZGltZW5zaW9ucyBvYmplY3QuXG5mdW5jdGlvbiBHbHlwaFRleHR1cmVJbmZvKGxhYmVsQ29sbGVjdGlvbiwgaW5kZXgsIGRpbWVuc2lvbnMpIHtcbiAgdGhpcy5sYWJlbENvbGxlY3Rpb24gPSBsYWJlbENvbGxlY3Rpb247XG4gIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgdGhpcy5kaW1lbnNpb25zID0gZGltZW5zaW9ucztcbn1cblxuLy8gVHJhZGl0aW9uYWxseSwgbGVhZGluZyBpcyAlMjAgb2YgdGhlIGZvbnQgc2l6ZS5cbnZhciBkZWZhdWx0TGluZVNwYWNpbmdQZXJjZW50ID0gMS4yO1xuXG52YXIgd2hpdGVQaXhlbENhbnZhc0lkID0gXCJJRF9XSElURV9QSVhFTFwiO1xudmFyIHdoaXRlUGl4ZWxTaXplID0gbmV3IENhcnRlc2lhbjIoNCwgNCk7XG52YXIgd2hpdGVQaXhlbEJvdW5kaW5nUmVnaW9uID0gbmV3IEJvdW5kaW5nUmVjdGFuZ2xlKDEsIDEsIDEsIDEpO1xuXG5mdW5jdGlvbiBhZGRXaGl0ZVBpeGVsQ2FudmFzKHRleHR1cmVBdGxhcywgbGFiZWxDb2xsZWN0aW9uKSB7XG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICBjYW52YXMud2lkdGggPSB3aGl0ZVBpeGVsU2l6ZS54O1xuICBjYW52YXMuaGVpZ2h0ID0gd2hpdGVQaXhlbFNpemUueTtcblxuICB2YXIgY29udGV4dDJEID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgY29udGV4dDJELmZpbGxTdHlsZSA9IFwiI2ZmZlwiO1xuICBjb250ZXh0MkQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICB0ZXh0dXJlQXRsYXMuYWRkSW1hZ2Uod2hpdGVQaXhlbENhbnZhc0lkLCBjYW52YXMpLnRoZW4oZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgbGFiZWxDb2xsZWN0aW9uLl93aGl0ZVBpeGVsSW5kZXggPSBpbmRleDtcbiAgfSk7XG59XG5cbi8vIHJldXNhYmxlIG9iamVjdCBmb3IgY2FsbGluZyB3cml0ZVRleHRUb0NhbnZhc1xudmFyIHdyaXRlVGV4dFRvQ2FudmFzUGFyYW1ldGVycyA9IHt9O1xuZnVuY3Rpb24gY3JlYXRlR2x5cGhDYW52YXMoXG4gIGNoYXJhY3RlcixcbiAgZm9udCxcbiAgZmlsbENvbG9yLFxuICBvdXRsaW5lQ29sb3IsXG4gIG91dGxpbmVXaWR0aCxcbiAgc3R5bGUsXG4gIHZlcnRpY2FsT3JpZ2luXG4pIHtcbiAgd3JpdGVUZXh0VG9DYW52YXNQYXJhbWV0ZXJzLmZvbnQgPSBmb250O1xuICB3cml0ZVRleHRUb0NhbnZhc1BhcmFtZXRlcnMuZmlsbENvbG9yID0gZmlsbENvbG9yO1xuICB3cml0ZVRleHRUb0NhbnZhc1BhcmFtZXRlcnMuc3Ryb2tlQ29sb3IgPSBvdXRsaW5lQ29sb3I7XG4gIHdyaXRlVGV4dFRvQ2FudmFzUGFyYW1ldGVycy5zdHJva2VXaWR0aCA9IG91dGxpbmVXaWR0aDtcbiAgLy8gU2V0dGluZyB0aGUgcGFkZGluZyB0byBzb21ldGhpbmcgYmlnZ2VyIGlzIG5lY2Vzc2FyeSB0byBnZXQgZW5vdWdoIHNwYWNlIGZvciB0aGUgb3V0bGluaW5nLlxuICB3cml0ZVRleHRUb0NhbnZhc1BhcmFtZXRlcnMucGFkZGluZyA9IFNERlNldHRpbmdzLlBBRERJTkc7XG5cbiAgaWYgKHZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5DRU5URVIpIHtcbiAgICB3cml0ZVRleHRUb0NhbnZhc1BhcmFtZXRlcnMudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcbiAgfSBlbHNlIGlmICh2ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uVE9QKSB7XG4gICAgd3JpdGVUZXh0VG9DYW52YXNQYXJhbWV0ZXJzLnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG4gIH0gZWxzZSB7XG4gICAgLy8gVmVydGljYWxPcmlnaW4uQk9UVE9NIGFuZCBWZXJ0aWNhbE9yaWdpbi5CQVNFTElORVxuICAgIHdyaXRlVGV4dFRvQ2FudmFzUGFyYW1ldGVycy50ZXh0QmFzZWxpbmUgPSBcImJvdHRvbVwiO1xuICB9XG5cbiAgd3JpdGVUZXh0VG9DYW52YXNQYXJhbWV0ZXJzLmZpbGwgPVxuICAgIHN0eWxlID09PSBMYWJlbFN0eWxlLkZJTEwgfHwgc3R5bGUgPT09IExhYmVsU3R5bGUuRklMTF9BTkRfT1VUTElORTtcbiAgd3JpdGVUZXh0VG9DYW52YXNQYXJhbWV0ZXJzLnN0cm9rZSA9XG4gICAgc3R5bGUgPT09IExhYmVsU3R5bGUuT1VUTElORSB8fCBzdHlsZSA9PT0gTGFiZWxTdHlsZS5GSUxMX0FORF9PVVRMSU5FO1xuICB3cml0ZVRleHRUb0NhbnZhc1BhcmFtZXRlcnMuYmFja2dyb3VuZENvbG9yID0gQ29sb3IuQkxBQ0s7XG5cbiAgcmV0dXJuIHdyaXRlVGV4dFRvQ2FudmFzKGNoYXJhY3Rlciwgd3JpdGVUZXh0VG9DYW52YXNQYXJhbWV0ZXJzKTtcbn1cblxuZnVuY3Rpb24gdW5iaW5kR2x5cGgobGFiZWxDb2xsZWN0aW9uLCBnbHlwaCkge1xuICBnbHlwaC50ZXh0dXJlSW5mbyA9IHVuZGVmaW5lZDtcbiAgZ2x5cGguZGltZW5zaW9ucyA9IHVuZGVmaW5lZDtcblxuICB2YXIgYmlsbGJvYXJkID0gZ2x5cGguYmlsbGJvYXJkO1xuICBpZiAoZGVmaW5lZChiaWxsYm9hcmQpKSB7XG4gICAgYmlsbGJvYXJkLnNob3cgPSBmYWxzZTtcbiAgICBiaWxsYm9hcmQuaW1hZ2UgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGRlZmluZWQoYmlsbGJvYXJkLl9yZW1vdmVDYWxsYmFja0Z1bmMpKSB7XG4gICAgICBiaWxsYm9hcmQuX3JlbW92ZUNhbGxiYWNrRnVuYygpO1xuICAgICAgYmlsbGJvYXJkLl9yZW1vdmVDYWxsYmFja0Z1bmMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGxhYmVsQ29sbGVjdGlvbi5fc3BhcmVCaWxsYm9hcmRzLnB1c2goYmlsbGJvYXJkKTtcbiAgICBnbHlwaC5iaWxsYm9hcmQgPSB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkR2x5cGhUb1RleHR1cmVBdGxhcyh0ZXh0dXJlQXRsYXMsIGlkLCBjYW52YXMsIGdseXBoVGV4dHVyZUluZm8pIHtcbiAgdGV4dHVyZUF0bGFzLmFkZEltYWdlKGlkLCBjYW52YXMpLnRoZW4oZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgZ2x5cGhUZXh0dXJlSW5mby5pbmRleCA9IGluZGV4O1xuICB9KTtcbn1cblxudmFyIHNwbGl0dGVyID0gbmV3IEdyYXBoZW1lU3BsaXR0ZXIoKTtcblxuZnVuY3Rpb24gcmViaW5kQWxsR2x5cGhzKGxhYmVsQ29sbGVjdGlvbiwgbGFiZWwpIHtcbiAgdmFyIHRleHQgPSBsYWJlbC5fcmVuZGVyZWRUZXh0O1xuICB2YXIgZ3JhcGhlbWVzID0gc3BsaXR0ZXIuc3BsaXRHcmFwaGVtZXModGV4dCk7XG4gIHZhciB0ZXh0TGVuZ3RoID0gZ3JhcGhlbWVzLmxlbmd0aDtcbiAgdmFyIGdseXBocyA9IGxhYmVsLl9nbHlwaHM7XG4gIHZhciBnbHlwaHNMZW5ndGggPSBnbHlwaHMubGVuZ3RoO1xuXG4gIHZhciBnbHlwaDtcbiAgdmFyIGdseXBoSW5kZXg7XG4gIHZhciB0ZXh0SW5kZXg7XG5cbiAgLy8gQ29tcHV0ZSBhIGZvbnQgc2l6ZSBzY2FsZSByZWxhdGl2ZSB0byB0aGUgc2RmIGZvbnQgZ2VuZXJhdGVkIHNpemUuXG4gIGxhYmVsLl9yZWxhdGl2ZVNpemUgPSBsYWJlbC5fZm9udFNpemUgLyBTREZTZXR0aW5ncy5GT05UX1NJWkU7XG5cbiAgLy8gaWYgd2UgaGF2ZSBtb3JlIGdseXBocyB0aGFuIG5lZWRlZCwgdW5iaW5kIHRoZSBleHRyYXMuXG4gIGlmICh0ZXh0TGVuZ3RoIDwgZ2x5cGhzTGVuZ3RoKSB7XG4gICAgZm9yIChnbHlwaEluZGV4ID0gdGV4dExlbmd0aDsgZ2x5cGhJbmRleCA8IGdseXBoc0xlbmd0aDsgKytnbHlwaEluZGV4KSB7XG4gICAgICB1bmJpbmRHbHlwaChsYWJlbENvbGxlY3Rpb24sIGdseXBoc1tnbHlwaEluZGV4XSk7XG4gICAgfVxuICB9XG5cbiAgLy8gcHJlc2l6ZSBnbHlwaHMgdG8gbWF0Y2ggdGhlIG5ldyB0ZXh0IGxlbmd0aFxuICBnbHlwaHMubGVuZ3RoID0gdGV4dExlbmd0aDtcblxuICB2YXIgc2hvd0JhY2tncm91bmQgPVxuICAgIGxhYmVsLl9zaG93QmFja2dyb3VuZCAmJiB0ZXh0LnNwbGl0KFwiXFxuXCIpLmpvaW4oXCJcIikubGVuZ3RoID4gMDtcbiAgdmFyIGJhY2tncm91bmRCaWxsYm9hcmQgPSBsYWJlbC5fYmFja2dyb3VuZEJpbGxib2FyZDtcbiAgdmFyIGJhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uID1cbiAgICBsYWJlbENvbGxlY3Rpb24uX2JhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uO1xuICBpZiAoIXNob3dCYWNrZ3JvdW5kKSB7XG4gICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcbiAgICAgIGJhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLnJlbW92ZShiYWNrZ3JvdW5kQmlsbGJvYXJkKTtcbiAgICAgIGxhYmVsLl9iYWNrZ3JvdW5kQmlsbGJvYXJkID0gYmFja2dyb3VuZEJpbGxib2FyZCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24uYWRkKHtcbiAgICAgICAgY29sbGVjdGlvbjogbGFiZWxDb2xsZWN0aW9uLFxuICAgICAgICBpbWFnZTogd2hpdGVQaXhlbENhbnZhc0lkLFxuICAgICAgICBpbWFnZVN1YlJlZ2lvbjogd2hpdGVQaXhlbEJvdW5kaW5nUmVnaW9uLFxuICAgICAgfSk7XG4gICAgICBsYWJlbC5fYmFja2dyb3VuZEJpbGxib2FyZCA9IGJhY2tncm91bmRCaWxsYm9hcmQ7XG4gICAgfVxuXG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5jb2xvciA9IGxhYmVsLl9iYWNrZ3JvdW5kQ29sb3I7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5zaG93ID0gbGFiZWwuX3Nob3c7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5wb3NpdGlvbiA9IGxhYmVsLl9wb3NpdGlvbjtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLmV5ZU9mZnNldCA9IGxhYmVsLl9leWVPZmZzZXQ7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5waXhlbE9mZnNldCA9IGxhYmVsLl9waXhlbE9mZnNldDtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLmhvcml6b250YWxPcmlnaW4gPSBIb3Jpem9udGFsT3JpZ2luLkxFRlQ7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC52ZXJ0aWNhbE9yaWdpbiA9IGxhYmVsLl92ZXJ0aWNhbE9yaWdpbjtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLmhlaWdodFJlZmVyZW5jZSA9IGxhYmVsLl9oZWlnaHRSZWZlcmVuY2U7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5zY2FsZSA9IGxhYmVsLnRvdGFsU2NhbGU7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5waWNrUHJpbWl0aXZlID0gbGFiZWw7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5pZCA9IGxhYmVsLl9pZDtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBsYWJlbC5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLnBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID1cbiAgICAgIGxhYmVsLl9waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZTtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLnNjYWxlQnlEaXN0YW5jZSA9IGxhYmVsLl9zY2FsZUJ5RGlzdGFuY2U7XG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPVxuICAgICAgbGFiZWwuX2Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbjtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLmRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSA9XG4gICAgICBsYWJlbC5fZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlO1xuICB9XG5cbiAgdmFyIGdseXBoVGV4dHVyZUNhY2hlID0gbGFiZWxDb2xsZWN0aW9uLl9nbHlwaFRleHR1cmVDYWNoZTtcblxuICAvLyB3YWxrIHRoZSB0ZXh0IGxvb2tpbmcgZm9yIG5ldyBjaGFyYWN0ZXJzIChjcmVhdGluZyBuZXcgZ2x5cGhzIGZvciBlYWNoKVxuICAvLyBvciBjaGFuZ2VkIGNoYXJhY3RlcnMgKHJlYmluZGluZyBleGlzdGluZyBnbHlwaHMpXG4gIGZvciAodGV4dEluZGV4ID0gMDsgdGV4dEluZGV4IDwgdGV4dExlbmd0aDsgKyt0ZXh0SW5kZXgpIHtcbiAgICB2YXIgY2hhcmFjdGVyID0gZ3JhcGhlbWVzW3RleHRJbmRleF07XG4gICAgdmFyIHZlcnRpY2FsT3JpZ2luID0gbGFiZWwuX3ZlcnRpY2FsT3JpZ2luO1xuXG4gICAgdmFyIGlkID0gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgY2hhcmFjdGVyLFxuICAgICAgbGFiZWwuX2ZvbnRGYW1pbHksXG4gICAgICBsYWJlbC5fZm9udFN0eWxlLFxuICAgICAgbGFiZWwuX2ZvbnRXZWlnaHQsXG4gICAgICArdmVydGljYWxPcmlnaW4sXG4gICAgXSk7XG5cbiAgICB2YXIgZ2x5cGhUZXh0dXJlSW5mbyA9IGdseXBoVGV4dHVyZUNhY2hlW2lkXTtcbiAgICBpZiAoIWRlZmluZWQoZ2x5cGhUZXh0dXJlSW5mbykpIHtcbiAgICAgIHZhciBnbHlwaEZvbnQgPVxuICAgICAgICBsYWJlbC5fZm9udFN0eWxlICtcbiAgICAgICAgXCIgXCIgK1xuICAgICAgICBsYWJlbC5fZm9udFdlaWdodCArXG4gICAgICAgIFwiIFwiICtcbiAgICAgICAgU0RGU2V0dGluZ3MuRk9OVF9TSVpFICtcbiAgICAgICAgXCJweCBcIiArXG4gICAgICAgIGxhYmVsLl9mb250RmFtaWx5O1xuXG4gICAgICB2YXIgY2FudmFzID0gY3JlYXRlR2x5cGhDYW52YXMoXG4gICAgICAgIGNoYXJhY3RlcixcbiAgICAgICAgZ2x5cGhGb250LFxuICAgICAgICBDb2xvci5XSElURSxcbiAgICAgICAgQ29sb3IuV0hJVEUsXG4gICAgICAgIDAuMCxcbiAgICAgICAgTGFiZWxTdHlsZS5GSUxMLFxuICAgICAgICB2ZXJ0aWNhbE9yaWdpblxuICAgICAgKTtcblxuICAgICAgZ2x5cGhUZXh0dXJlSW5mbyA9IG5ldyBHbHlwaFRleHR1cmVJbmZvKFxuICAgICAgICBsYWJlbENvbGxlY3Rpb24sXG4gICAgICAgIC0xLFxuICAgICAgICBjYW52YXMuZGltZW5zaW9uc1xuICAgICAgKTtcbiAgICAgIGdseXBoVGV4dHVyZUNhY2hlW2lkXSA9IGdseXBoVGV4dHVyZUluZm87XG5cbiAgICAgIGlmIChjYW52YXMud2lkdGggPiAwICYmIGNhbnZhcy5oZWlnaHQgPiAwKSB7XG4gICAgICAgIHZhciBzZGZWYWx1ZXMgPSBiaXRtYXBTREYoY2FudmFzLCB7XG4gICAgICAgICAgY3V0b2ZmOiBTREZTZXR0aW5ncy5DVVRPRkYsXG4gICAgICAgICAgcmFkaXVzOiBTREZTZXR0aW5ncy5SQURJVVMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB2YXIgY2FudmFzV2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgICAgIHZhciBjYW52YXNIZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICB2YXIgaW1nRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FudmFzV2lkdGg7IGkrKykge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2FudmFzSGVpZ2h0OyBqKyspIHtcbiAgICAgICAgICAgIHZhciBiYXNlSW5kZXggPSBqICogY2FudmFzV2lkdGggKyBpO1xuICAgICAgICAgICAgdmFyIGFscGhhID0gc2RmVmFsdWVzW2Jhc2VJbmRleF0gKiAyNTU7XG4gICAgICAgICAgICB2YXIgaW1hZ2VJbmRleCA9IGJhc2VJbmRleCAqIDQ7XG4gICAgICAgICAgICBpbWdEYXRhLmRhdGFbaW1hZ2VJbmRleCArIDBdID0gYWxwaGE7XG4gICAgICAgICAgICBpbWdEYXRhLmRhdGFbaW1hZ2VJbmRleCArIDFdID0gYWxwaGE7XG4gICAgICAgICAgICBpbWdEYXRhLmRhdGFbaW1hZ2VJbmRleCArIDJdID0gYWxwaGE7XG4gICAgICAgICAgICBpbWdEYXRhLmRhdGFbaW1hZ2VJbmRleCArIDNdID0gYWxwaGE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1nRGF0YSwgMCwgMCk7XG4gICAgICAgIGlmIChjaGFyYWN0ZXIgIT09IFwiIFwiKSB7XG4gICAgICAgICAgYWRkR2x5cGhUb1RleHR1cmVBdGxhcyhcbiAgICAgICAgICAgIGxhYmVsQ29sbGVjdGlvbi5fdGV4dHVyZUF0bGFzLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBjYW52YXMsXG4gICAgICAgICAgICBnbHlwaFRleHR1cmVJbmZvXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGdseXBoID0gZ2x5cGhzW3RleHRJbmRleF07XG5cbiAgICBpZiAoZGVmaW5lZChnbHlwaCkpIHtcbiAgICAgIC8vIGNsZWFuIHVwIGxlZnRvdmVyIGluZm9ybWF0aW9uIGZyb20gdGhlIHByZXZpb3VzIGdseXBoXG4gICAgICBpZiAoZ2x5cGhUZXh0dXJlSW5mby5pbmRleCA9PT0gLTEpIHtcbiAgICAgICAgLy8gbm8gdGV4dHVyZSwgYW5kIHRoZXJlZm9yZSBubyBiaWxsYm9hcmQsIGZvciB0aGlzIGdseXBoLlxuICAgICAgICAvLyBzbywgY29tcGxldGVseSB1bmJpbmQgZ2x5cGguXG4gICAgICAgIHVuYmluZEdseXBoKGxhYmVsQ29sbGVjdGlvbiwgZ2x5cGgpO1xuICAgICAgfSBlbHNlIGlmIChkZWZpbmVkKGdseXBoLnRleHR1cmVJbmZvKSkge1xuICAgICAgICAvLyB3ZSBoYXZlIGEgdGV4dHVyZSBhbmQgYmlsbGJvYXJkLiAgSWYgd2UgaGFkIG9uZSBiZWZvcmUsIHJlbGVhc2VcbiAgICAgICAgLy8gb3VyIHJlZmVyZW5jZSB0byB0aGF0IHRleHR1cmUgaW5mbywgYnV0IHJldXNlIHRoZSBiaWxsYm9hcmQuXG4gICAgICAgIGdseXBoLnRleHR1cmVJbmZvID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjcmVhdGUgYSBnbHlwaCBvYmplY3RcbiAgICAgIGdseXBoID0gbmV3IEdseXBoKCk7XG4gICAgICBnbHlwaHNbdGV4dEluZGV4XSA9IGdseXBoO1xuICAgIH1cblxuICAgIGdseXBoLnRleHR1cmVJbmZvID0gZ2x5cGhUZXh0dXJlSW5mbztcbiAgICBnbHlwaC5kaW1lbnNpb25zID0gZ2x5cGhUZXh0dXJlSW5mby5kaW1lbnNpb25zO1xuXG4gICAgLy8gaWYgd2UgaGF2ZSBhIHRleHR1cmUsIGNvbmZpZ3VyZSB0aGUgZXhpc3RpbmcgYmlsbGJvYXJkLCBvciBvYnRhaW4gb25lXG4gICAgaWYgKGdseXBoVGV4dHVyZUluZm8uaW5kZXggIT09IC0xKSB7XG4gICAgICB2YXIgYmlsbGJvYXJkID0gZ2x5cGguYmlsbGJvYXJkO1xuICAgICAgdmFyIHNwYXJlQmlsbGJvYXJkcyA9IGxhYmVsQ29sbGVjdGlvbi5fc3BhcmVCaWxsYm9hcmRzO1xuICAgICAgaWYgKCFkZWZpbmVkKGJpbGxib2FyZCkpIHtcbiAgICAgICAgaWYgKHNwYXJlQmlsbGJvYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYmlsbGJvYXJkID0gc3BhcmVCaWxsYm9hcmRzLnBvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJpbGxib2FyZCA9IGxhYmVsQ29sbGVjdGlvbi5fYmlsbGJvYXJkQ29sbGVjdGlvbi5hZGQoe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogbGFiZWxDb2xsZWN0aW9uLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJpbGxib2FyZC5fbGFiZWxEaW1lbnNpb25zID0gbmV3IENhcnRlc2lhbjIoKTtcbiAgICAgICAgICBiaWxsYm9hcmQuX2xhYmVsVHJhbnNsYXRlID0gbmV3IENhcnRlc2lhbjIoKTtcbiAgICAgICAgfVxuICAgICAgICBnbHlwaC5iaWxsYm9hcmQgPSBiaWxsYm9hcmQ7XG4gICAgICB9XG5cbiAgICAgIGJpbGxib2FyZC5zaG93ID0gbGFiZWwuX3Nob3c7XG4gICAgICBiaWxsYm9hcmQucG9zaXRpb24gPSBsYWJlbC5fcG9zaXRpb247XG4gICAgICBiaWxsYm9hcmQuZXllT2Zmc2V0ID0gbGFiZWwuX2V5ZU9mZnNldDtcbiAgICAgIGJpbGxib2FyZC5waXhlbE9mZnNldCA9IGxhYmVsLl9waXhlbE9mZnNldDtcbiAgICAgIGJpbGxib2FyZC5ob3Jpem9udGFsT3JpZ2luID0gSG9yaXpvbnRhbE9yaWdpbi5MRUZUO1xuICAgICAgYmlsbGJvYXJkLnZlcnRpY2FsT3JpZ2luID0gbGFiZWwuX3ZlcnRpY2FsT3JpZ2luO1xuICAgICAgYmlsbGJvYXJkLmhlaWdodFJlZmVyZW5jZSA9IGxhYmVsLl9oZWlnaHRSZWZlcmVuY2U7XG4gICAgICBiaWxsYm9hcmQuc2NhbGUgPSBsYWJlbC50b3RhbFNjYWxlO1xuICAgICAgYmlsbGJvYXJkLnBpY2tQcmltaXRpdmUgPSBsYWJlbDtcbiAgICAgIGJpbGxib2FyZC5pZCA9IGxhYmVsLl9pZDtcbiAgICAgIGJpbGxib2FyZC5pbWFnZSA9IGlkO1xuICAgICAgYmlsbGJvYXJkLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBsYWJlbC5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcbiAgICAgIGJpbGxib2FyZC5waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSA9IGxhYmVsLl9waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZTtcbiAgICAgIGJpbGxib2FyZC5zY2FsZUJ5RGlzdGFuY2UgPSBsYWJlbC5fc2NhbGVCeURpc3RhbmNlO1xuICAgICAgYmlsbGJvYXJkLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IGxhYmVsLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb247XG4gICAgICBiaWxsYm9hcmQuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlID0gbGFiZWwuX2Rpc2FibGVEZXB0aFRlc3REaXN0YW5jZTtcbiAgICAgIGJpbGxib2FyZC5fYmF0Y2hJbmRleCA9IGxhYmVsLl9iYXRjaEluZGV4O1xuICAgICAgYmlsbGJvYXJkLm91dGxpbmVDb2xvciA9IGxhYmVsLm91dGxpbmVDb2xvcjtcbiAgICAgIGlmIChsYWJlbC5zdHlsZSA9PT0gTGFiZWxTdHlsZS5GSUxMX0FORF9PVVRMSU5FKSB7XG4gICAgICAgIGJpbGxib2FyZC5jb2xvciA9IGxhYmVsLl9maWxsQ29sb3I7XG4gICAgICAgIGJpbGxib2FyZC5vdXRsaW5lV2lkdGggPSBsYWJlbC5vdXRsaW5lV2lkdGg7XG4gICAgICB9IGVsc2UgaWYgKGxhYmVsLnN0eWxlID09PSBMYWJlbFN0eWxlLkZJTEwpIHtcbiAgICAgICAgYmlsbGJvYXJkLmNvbG9yID0gbGFiZWwuX2ZpbGxDb2xvcjtcbiAgICAgICAgYmlsbGJvYXJkLm91dGxpbmVXaWR0aCA9IDAuMDtcbiAgICAgIH0gZWxzZSBpZiAobGFiZWwuc3R5bGUgPT09IExhYmVsU3R5bGUuT1VUTElORSkge1xuICAgICAgICBiaWxsYm9hcmQuY29sb3IgPSBDb2xvci5UUkFOU1BBUkVOVDtcbiAgICAgICAgYmlsbGJvYXJkLm91dGxpbmVXaWR0aCA9IGxhYmVsLm91dGxpbmVXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBjaGFuZ2luZyBnbHlwaHMgd2lsbCBjYXVzZSB0aGUgcG9zaXRpb24gb2YgdGhlXG4gIC8vIGdseXBocyB0byBjaGFuZ2UsIHNpbmNlIGRpZmZlcmVudCBjaGFyYWN0ZXJzIGhhdmUgZGlmZmVyZW50IHdpZHRoc1xuICBsYWJlbC5fcmVwb3NpdGlvbkFsbEdseXBocyA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVdpZHRoT2Zmc2V0KGxpbmVXaWR0aCwgaG9yaXpvbnRhbE9yaWdpbiwgYmFja2dyb3VuZFBhZGRpbmcpIHtcbiAgaWYgKGhvcml6b250YWxPcmlnaW4gPT09IEhvcml6b250YWxPcmlnaW4uQ0VOVEVSKSB7XG4gICAgcmV0dXJuIC1saW5lV2lkdGggLyAyO1xuICB9IGVsc2UgaWYgKGhvcml6b250YWxPcmlnaW4gPT09IEhvcml6b250YWxPcmlnaW4uUklHSFQpIHtcbiAgICByZXR1cm4gLShsaW5lV2lkdGggKyBiYWNrZ3JvdW5kUGFkZGluZy54KTtcbiAgfVxuICByZXR1cm4gYmFja2dyb3VuZFBhZGRpbmcueDtcbn1cblxuLy8gcmV1c2FibGUgQ2FydGVzaWFuMiBpbnN0YW5jZXNcbnZhciBnbHlwaFBpeGVsT2Zmc2V0ID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciBzY3JhdGNoQmFja2dyb3VuZFBhZGRpbmcgPSBuZXcgQ2FydGVzaWFuMigpO1xuXG5mdW5jdGlvbiByZXBvc2l0aW9uQWxsR2x5cGhzKGxhYmVsKSB7XG4gIHZhciBnbHlwaHMgPSBsYWJlbC5fZ2x5cGhzO1xuICB2YXIgdGV4dCA9IGxhYmVsLl9yZW5kZXJlZFRleHQ7XG4gIHZhciBnbHlwaDtcbiAgdmFyIGRpbWVuc2lvbnM7XG4gIHZhciBsYXN0TGluZVdpZHRoID0gMDtcbiAgdmFyIG1heExpbmVXaWR0aCA9IDA7XG4gIHZhciBsaW5lV2lkdGhzID0gW107XG4gIHZhciBtYXhHbHlwaERlc2NlbnQgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gIHZhciBtYXhHbHlwaFkgPSAwO1xuICB2YXIgbnVtYmVyT2ZMaW5lcyA9IDE7XG4gIHZhciBnbHlwaEluZGV4O1xuICB2YXIgZ2x5cGhMZW5ndGggPSBnbHlwaHMubGVuZ3RoO1xuXG4gIHZhciBiYWNrZ3JvdW5kQmlsbGJvYXJkID0gbGFiZWwuX2JhY2tncm91bmRCaWxsYm9hcmQ7XG4gIHZhciBiYWNrZ3JvdW5kUGFkZGluZyA9IENhcnRlc2lhbjIuY2xvbmUoXG4gICAgZGVmaW5lZChiYWNrZ3JvdW5kQmlsbGJvYXJkKSA/IGxhYmVsLl9iYWNrZ3JvdW5kUGFkZGluZyA6IENhcnRlc2lhbjIuWkVSTyxcbiAgICBzY3JhdGNoQmFja2dyb3VuZFBhZGRpbmdcbiAgKTtcblxuICAvLyBXZSBuZWVkIHRvIHNjYWxlIHRoZSBiYWNrZ3JvdW5kIHBhZGRpbmcsIHdoaWNoIGlzIHNwZWNpZmllZCBpbiBwaXhlbHMgYnkgdGhlIGludmVyc2Ugb2YgdGhlIHJlbGF0aXZlIHNpemUgc28gaXQgaXMgc2NhbGVkIHByb3Blcmx5LlxuICBiYWNrZ3JvdW5kUGFkZGluZy54IC89IGxhYmVsLl9yZWxhdGl2ZVNpemU7XG4gIGJhY2tncm91bmRQYWRkaW5nLnkgLz0gbGFiZWwuX3JlbGF0aXZlU2l6ZTtcblxuICBmb3IgKGdseXBoSW5kZXggPSAwOyBnbHlwaEluZGV4IDwgZ2x5cGhMZW5ndGg7ICsrZ2x5cGhJbmRleCkge1xuICAgIGlmICh0ZXh0LmNoYXJBdChnbHlwaEluZGV4KSA9PT0gXCJcXG5cIikge1xuICAgICAgbGluZVdpZHRocy5wdXNoKGxhc3RMaW5lV2lkdGgpO1xuICAgICAgKytudW1iZXJPZkxpbmVzO1xuICAgICAgbGFzdExpbmVXaWR0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdseXBoID0gZ2x5cGhzW2dseXBoSW5kZXhdO1xuICAgICAgZGltZW5zaW9ucyA9IGdseXBoLmRpbWVuc2lvbnM7XG4gICAgICBtYXhHbHlwaFkgPSBNYXRoLm1heChtYXhHbHlwaFksIGRpbWVuc2lvbnMuaGVpZ2h0IC0gZGltZW5zaW9ucy5kZXNjZW50KTtcbiAgICAgIG1heEdseXBoRGVzY2VudCA9IE1hdGgubWF4KG1heEdseXBoRGVzY2VudCwgZGltZW5zaW9ucy5kZXNjZW50KTtcblxuICAgICAgLy9Db21wdXRpbmcgdGhlIGxpbmUgd2lkdGggbXVzdCBhbHNvIGFjY291bnQgZm9yIHRoZSBrZXJuaW5nIHRoYXQgb2NjdXJzIGJldHdlZW4gbGV0dGVycy5cbiAgICAgIGxhc3RMaW5lV2lkdGggKz0gZGltZW5zaW9ucy53aWR0aCAtIGRpbWVuc2lvbnMubWlueDtcbiAgICAgIGlmIChnbHlwaEluZGV4IDwgZ2x5cGhMZW5ndGggLSAxKSB7XG4gICAgICAgIGxhc3RMaW5lV2lkdGggKz0gZ2x5cGhzW2dseXBoSW5kZXggKyAxXS5kaW1lbnNpb25zLm1pbng7XG4gICAgICB9XG4gICAgICBtYXhMaW5lV2lkdGggPSBNYXRoLm1heChtYXhMaW5lV2lkdGgsIGxhc3RMaW5lV2lkdGgpO1xuICAgIH1cbiAgfVxuICBsaW5lV2lkdGhzLnB1c2gobGFzdExpbmVXaWR0aCk7XG4gIHZhciBtYXhMaW5lSGVpZ2h0ID0gbWF4R2x5cGhZICsgbWF4R2x5cGhEZXNjZW50O1xuXG4gIHZhciBzY2FsZSA9IGxhYmVsLnRvdGFsU2NhbGU7XG4gIHZhciBob3Jpem9udGFsT3JpZ2luID0gbGFiZWwuX2hvcml6b250YWxPcmlnaW47XG4gIHZhciB2ZXJ0aWNhbE9yaWdpbiA9IGxhYmVsLl92ZXJ0aWNhbE9yaWdpbjtcbiAgdmFyIGxpbmVJbmRleCA9IDA7XG4gIHZhciBsaW5lV2lkdGggPSBsaW5lV2lkdGhzW2xpbmVJbmRleF07XG4gIHZhciB3aWR0aE9mZnNldCA9IGNhbGN1bGF0ZVdpZHRoT2Zmc2V0KFxuICAgIGxpbmVXaWR0aCxcbiAgICBob3Jpem9udGFsT3JpZ2luLFxuICAgIGJhY2tncm91bmRQYWRkaW5nXG4gICk7XG4gIHZhciBsaW5lU3BhY2luZyA9XG4gICAgKGRlZmluZWQobGFiZWwuX2xpbmVIZWlnaHQpXG4gICAgICA/IGxhYmVsLl9saW5lSGVpZ2h0XG4gICAgICA6IGRlZmF1bHRMaW5lU3BhY2luZ1BlcmNlbnQgKiBsYWJlbC5fZm9udFNpemUpIC8gbGFiZWwuX3JlbGF0aXZlU2l6ZTtcbiAgdmFyIG90aGVyTGluZXNIZWlnaHQgPSBsaW5lU3BhY2luZyAqIChudW1iZXJPZkxpbmVzIC0gMSk7XG4gIHZhciB0b3RhbExpbmVXaWR0aCA9IG1heExpbmVXaWR0aDtcbiAgdmFyIHRvdGFsTGluZUhlaWdodCA9IG1heExpbmVIZWlnaHQgKyBvdGhlckxpbmVzSGVpZ2h0O1xuXG4gIGlmIChkZWZpbmVkKGJhY2tncm91bmRCaWxsYm9hcmQpKSB7XG4gICAgdG90YWxMaW5lV2lkdGggKz0gYmFja2dyb3VuZFBhZGRpbmcueCAqIDI7XG4gICAgdG90YWxMaW5lSGVpZ2h0ICs9IGJhY2tncm91bmRQYWRkaW5nLnkgKiAyO1xuICAgIGJhY2tncm91bmRCaWxsYm9hcmQuX2xhYmVsSG9yaXpvbnRhbE9yaWdpbiA9IGhvcml6b250YWxPcmlnaW47XG4gIH1cblxuICBnbHlwaFBpeGVsT2Zmc2V0LnggPSB3aWR0aE9mZnNldCAqIHNjYWxlO1xuICBnbHlwaFBpeGVsT2Zmc2V0LnkgPSAwO1xuXG4gIHZhciBmaXJzdENoYXJPZkxpbmUgPSB0cnVlO1xuXG4gIHZhciBsaW5lT2Zmc2V0WSA9IDA7XG4gIGZvciAoZ2x5cGhJbmRleCA9IDA7IGdseXBoSW5kZXggPCBnbHlwaExlbmd0aDsgKytnbHlwaEluZGV4KSB7XG4gICAgaWYgKHRleHQuY2hhckF0KGdseXBoSW5kZXgpID09PSBcIlxcblwiKSB7XG4gICAgICArK2xpbmVJbmRleDtcbiAgICAgIGxpbmVPZmZzZXRZICs9IGxpbmVTcGFjaW5nO1xuICAgICAgbGluZVdpZHRoID0gbGluZVdpZHRoc1tsaW5lSW5kZXhdO1xuICAgICAgd2lkdGhPZmZzZXQgPSBjYWxjdWxhdGVXaWR0aE9mZnNldChcbiAgICAgICAgbGluZVdpZHRoLFxuICAgICAgICBob3Jpem9udGFsT3JpZ2luLFxuICAgICAgICBiYWNrZ3JvdW5kUGFkZGluZ1xuICAgICAgKTtcbiAgICAgIGdseXBoUGl4ZWxPZmZzZXQueCA9IHdpZHRoT2Zmc2V0ICogc2NhbGU7XG4gICAgICBmaXJzdENoYXJPZkxpbmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBnbHlwaCA9IGdseXBoc1tnbHlwaEluZGV4XTtcbiAgICAgIGRpbWVuc2lvbnMgPSBnbHlwaC5kaW1lbnNpb25zO1xuXG4gICAgICBpZiAodmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLlRPUCkge1xuICAgICAgICBnbHlwaFBpeGVsT2Zmc2V0LnkgPVxuICAgICAgICAgIGRpbWVuc2lvbnMuaGVpZ2h0IC0gbWF4R2x5cGhZIC0gYmFja2dyb3VuZFBhZGRpbmcueTtcbiAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ICs9IFNERlNldHRpbmdzLlBBRERJTkc7XG4gICAgICB9IGVsc2UgaWYgKHZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5DRU5URVIpIHtcbiAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ID1cbiAgICAgICAgICAob3RoZXJMaW5lc0hlaWdodCArIGRpbWVuc2lvbnMuaGVpZ2h0IC0gbWF4R2x5cGhZKSAvIDI7XG4gICAgICB9IGVsc2UgaWYgKHZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5CQVNFTElORSkge1xuICAgICAgICBnbHlwaFBpeGVsT2Zmc2V0LnkgPSBvdGhlckxpbmVzSGVpZ2h0O1xuICAgICAgICBnbHlwaFBpeGVsT2Zmc2V0LnkgLT0gU0RGU2V0dGluZ3MuUEFERElORztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFZlcnRpY2FsT3JpZ2luLkJPVFRPTVxuICAgICAgICBnbHlwaFBpeGVsT2Zmc2V0LnkgPVxuICAgICAgICAgIG90aGVyTGluZXNIZWlnaHQgKyBtYXhHbHlwaERlc2NlbnQgKyBiYWNrZ3JvdW5kUGFkZGluZy55O1xuICAgICAgICBnbHlwaFBpeGVsT2Zmc2V0LnkgLT0gU0RGU2V0dGluZ3MuUEFERElORztcbiAgICAgIH1cbiAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9XG4gICAgICAgIChnbHlwaFBpeGVsT2Zmc2V0LnkgLSBkaW1lbnNpb25zLmRlc2NlbnQgLSBsaW5lT2Zmc2V0WSkgKiBzY2FsZTtcblxuICAgICAgLy8gSGFuZGxlIGFueSBvZmZzZXRzIGZvciB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIHRoZSBsaW5lIHNpbmNlIHRoZSBib3VuZHMgbWlnaHQgbm90IGJlIHJpZ2h0IG9uIHRoZSBib3R0b20gbGVmdCBwaXhlbC5cbiAgICAgIGlmIChmaXJzdENoYXJPZkxpbmUpIHtcbiAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC54IC09IFNERlNldHRpbmdzLlBBRERJTkcgKiBzY2FsZTtcbiAgICAgICAgZmlyc3RDaGFyT2ZMaW5lID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWZpbmVkKGdseXBoLmJpbGxib2FyZCkpIHtcbiAgICAgICAgZ2x5cGguYmlsbGJvYXJkLl9zZXRUcmFuc2xhdGUoZ2x5cGhQaXhlbE9mZnNldCk7XG4gICAgICAgIGdseXBoLmJpbGxib2FyZC5fbGFiZWxEaW1lbnNpb25zLnggPSB0b3RhbExpbmVXaWR0aDtcbiAgICAgICAgZ2x5cGguYmlsbGJvYXJkLl9sYWJlbERpbWVuc2lvbnMueSA9IHRvdGFsTGluZUhlaWdodDtcbiAgICAgICAgZ2x5cGguYmlsbGJvYXJkLl9sYWJlbEhvcml6b250YWxPcmlnaW4gPSBob3Jpem9udGFsT3JpZ2luO1xuICAgICAgfVxuXG4gICAgICAvL0NvbXB1dGUgdGhlIG5leHQgeCBvZmZzZXQgdGFraW5nIGludG8gYWNjb3VudCB0aGUga2VybmluZyBwZXJmb3JtZWRcbiAgICAgIC8vb24gYm90aCB0aGUgY3VycmVudCBsZXR0ZXIgYXMgd2VsbCBhcyB0aGUgbmV4dCBsZXR0ZXIgdG8gYmUgZHJhd25cbiAgICAgIC8vYXMgd2VsbCBhcyBhbnkgYXBwbGllZCBzY2FsZS5cbiAgICAgIGlmIChnbHlwaEluZGV4IDwgZ2x5cGhMZW5ndGggLSAxKSB7XG4gICAgICAgIHZhciBuZXh0R2x5cGggPSBnbHlwaHNbZ2x5cGhJbmRleCArIDFdO1xuICAgICAgICBnbHlwaFBpeGVsT2Zmc2V0LnggKz1cbiAgICAgICAgICAoZGltZW5zaW9ucy53aWR0aCAtIGRpbWVuc2lvbnMubWlueCArIG5leHRHbHlwaC5kaW1lbnNpb25zLm1pbngpICpcbiAgICAgICAgICBzY2FsZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZGVmaW5lZChiYWNrZ3JvdW5kQmlsbGJvYXJkKSAmJiB0ZXh0LnNwbGl0KFwiXFxuXCIpLmpvaW4oXCJcIikubGVuZ3RoID4gMCkge1xuICAgIGlmIChob3Jpem9udGFsT3JpZ2luID09PSBIb3Jpem9udGFsT3JpZ2luLkNFTlRFUikge1xuICAgICAgd2lkdGhPZmZzZXQgPSAtbWF4TGluZVdpZHRoIC8gMiAtIGJhY2tncm91bmRQYWRkaW5nLng7XG4gICAgfSBlbHNlIGlmIChob3Jpem9udGFsT3JpZ2luID09PSBIb3Jpem9udGFsT3JpZ2luLlJJR0hUKSB7XG4gICAgICB3aWR0aE9mZnNldCA9IC0obWF4TGluZVdpZHRoICsgYmFja2dyb3VuZFBhZGRpbmcueCAqIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aWR0aE9mZnNldCA9IDA7XG4gICAgfVxuICAgIGdseXBoUGl4ZWxPZmZzZXQueCA9IHdpZHRoT2Zmc2V0ICogc2NhbGU7XG5cbiAgICBpZiAodmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLlRPUCkge1xuICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ID0gbWF4TGluZUhlaWdodCAtIG1heEdseXBoWSAtIG1heEdseXBoRGVzY2VudDtcbiAgICB9IGVsc2UgaWYgKHZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5DRU5URVIpIHtcbiAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IChtYXhMaW5lSGVpZ2h0IC0gbWF4R2x5cGhZKSAvIDIgLSBtYXhHbHlwaERlc2NlbnQ7XG4gICAgfSBlbHNlIGlmICh2ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uQkFTRUxJTkUpIHtcbiAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IC1iYWNrZ3JvdW5kUGFkZGluZy55IC0gbWF4R2x5cGhEZXNjZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBWZXJ0aWNhbE9yaWdpbi5CT1RUT01cbiAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IDA7XG4gICAgfVxuICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IGdseXBoUGl4ZWxPZmZzZXQueSAqIHNjYWxlO1xuXG4gICAgYmFja2dyb3VuZEJpbGxib2FyZC53aWR0aCA9IHRvdGFsTGluZVdpZHRoO1xuICAgIGJhY2tncm91bmRCaWxsYm9hcmQuaGVpZ2h0ID0gdG90YWxMaW5lSGVpZ2h0O1xuICAgIGJhY2tncm91bmRCaWxsYm9hcmQuX3NldFRyYW5zbGF0ZShnbHlwaFBpeGVsT2Zmc2V0KTtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLl9sYWJlbFRyYW5zbGF0ZSA9IENhcnRlc2lhbjIuY2xvbmUoXG4gICAgICBnbHlwaFBpeGVsT2Zmc2V0LFxuICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5fbGFiZWxUcmFuc2xhdGVcbiAgICApO1xuICB9XG5cbiAgaWYgKGxhYmVsLmhlaWdodFJlZmVyZW5jZSA9PT0gSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORCkge1xuICAgIGZvciAoZ2x5cGhJbmRleCA9IDA7IGdseXBoSW5kZXggPCBnbHlwaExlbmd0aDsgKytnbHlwaEluZGV4KSB7XG4gICAgICBnbHlwaCA9IGdseXBoc1tnbHlwaEluZGV4XTtcbiAgICAgIHZhciBiaWxsYm9hcmQgPSBnbHlwaC5iaWxsYm9hcmQ7XG4gICAgICBpZiAoZGVmaW5lZChiaWxsYm9hcmQpKSB7XG4gICAgICAgIGJpbGxib2FyZC5fbGFiZWxUcmFuc2xhdGUgPSBDYXJ0ZXNpYW4yLmNsb25lKFxuICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQsXG4gICAgICAgICAgYmlsbGJvYXJkLl9sYWJlbFRyYW5zbGF0ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZXN0cm95TGFiZWwobGFiZWxDb2xsZWN0aW9uLCBsYWJlbCkge1xuICB2YXIgZ2x5cGhzID0gbGFiZWwuX2dseXBocztcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdseXBocy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIHVuYmluZEdseXBoKGxhYmVsQ29sbGVjdGlvbiwgZ2x5cGhzW2ldKTtcbiAgfVxuICBpZiAoZGVmaW5lZChsYWJlbC5fYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcbiAgICBsYWJlbENvbGxlY3Rpb24uX2JhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLnJlbW92ZShcbiAgICAgIGxhYmVsLl9iYWNrZ3JvdW5kQmlsbGJvYXJkXG4gICAgKTtcbiAgICBsYWJlbC5fYmFja2dyb3VuZEJpbGxib2FyZCA9IHVuZGVmaW5lZDtcbiAgfVxuICBsYWJlbC5fbGFiZWxDb2xsZWN0aW9uID0gdW5kZWZpbmVkO1xuXG4gIGlmIChkZWZpbmVkKGxhYmVsLl9yZW1vdmVDYWxsYmFja0Z1bmMpKSB7XG4gICAgbGFiZWwuX3JlbW92ZUNhbGxiYWNrRnVuYygpO1xuICB9XG5cbiAgZGVzdHJveU9iamVjdChsYWJlbCk7XG59XG5cbi8qKlxuICogQSByZW5kZXJhYmxlIGNvbGxlY3Rpb24gb2YgbGFiZWxzLiAgTGFiZWxzIGFyZSB2aWV3cG9ydC1hbGlnbmVkIHRleHQgcG9zaXRpb25lZCBpbiB0aGUgM0Qgc2NlbmUuXG4gKiBFYWNoIGxhYmVsIGNhbiBoYXZlIGEgZGlmZmVyZW50IGZvbnQsIGNvbG9yLCBzY2FsZSwgZXRjLlxuICogPGJyIC8+PGJyIC8+XG4gKiA8ZGl2IGFsaWduPSdjZW50ZXInPlxuICogPGltZyBzcmM9J0ltYWdlcy9MYWJlbC5wbmcnIHdpZHRoPSc0MDAnIGhlaWdodD0nMzAwJyAvPjxiciAvPlxuICogRXhhbXBsZSBsYWJlbHNcbiAqIDwvZGl2PlxuICogPGJyIC8+PGJyIC8+XG4gKiBMYWJlbHMgYXJlIGFkZGVkIGFuZCByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24gdXNpbmcge0BsaW5rIExhYmVsQ29sbGVjdGlvbiNhZGR9XG4gKiBhbmQge0BsaW5rIExhYmVsQ29sbGVjdGlvbiNyZW1vdmV9LlxuICpcbiAqIEBhbGlhcyBMYWJlbENvbGxlY3Rpb25cbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtNYXRyaXg0fSBbb3B0aW9ucy5tb2RlbE1hdHJpeD1NYXRyaXg0LklERU5USVRZXSBUaGUgNHg0IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCB0aGF0IHRyYW5zZm9ybXMgZWFjaCBsYWJlbCBmcm9tIG1vZGVsIHRvIHdvcmxkIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZT1mYWxzZV0gRm9yIGRlYnVnZ2luZyBvbmx5LiBEZXRlcm1pbmVzIGlmIHRoaXMgcHJpbWl0aXZlJ3MgY29tbWFuZHMnIGJvdW5kaW5nIHNwaGVyZXMgYXJlIHNob3duLlxuICogQHBhcmFtIHtTY2VuZX0gW29wdGlvbnMuc2NlbmVdIE11c3QgYmUgcGFzc2VkIGluIGZvciBsYWJlbHMgdGhhdCB1c2UgdGhlIGhlaWdodCByZWZlcmVuY2UgcHJvcGVydHkgb3Igd2lsbCBiZSBkZXB0aCB0ZXN0ZWQgYWdhaW5zdCB0aGUgZ2xvYmUuXG4gKiBAcGFyYW0ge0JsZW5kT3B0aW9ufSBbb3B0aW9ucy5ibGVuZE9wdGlvbj1CbGVuZE9wdGlvbi5PUEFRVUVfQU5EX1RSQU5TTFVDRU5UXSBUaGUgbGFiZWwgYmxlbmRpbmcgb3B0aW9uLiBUaGUgZGVmYXVsdFxuICogaXMgdXNlZCBmb3IgcmVuZGVyaW5nIGJvdGggb3BhcXVlIGFuZCB0cmFuc2x1Y2VudCBsYWJlbHMuIEhvd2V2ZXIsIGlmIGVpdGhlciBhbGwgb2YgdGhlIGxhYmVscyBhcmUgY29tcGxldGVseSBvcGFxdWUgb3IgYWxsIGFyZSBjb21wbGV0ZWx5IHRyYW5zbHVjZW50LFxuICogc2V0dGluZyB0aGUgdGVjaG5pcXVlIHRvIEJsZW5kT3B0aW9uLk9QQVFVRSBvciBCbGVuZE9wdGlvbi5UUkFOU0xVQ0VOVCBjYW4gaW1wcm92ZSBwZXJmb3JtYW5jZSBieSB1cCB0byAyeC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2hvdz10cnVlXSBEZXRlcm1pbmVzIGlmIHRoZSBsYWJlbHMgaW4gdGhlIGNvbGxlY3Rpb24gd2lsbCBiZSBzaG93bi5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHByZWZlciBhIGZldyBjb2xsZWN0aW9ucywgZWFjaCB3aXRoIG1hbnkgbGFiZWxzLCB0b1xuICogbWFueSBjb2xsZWN0aW9ucyB3aXRoIG9ubHkgYSBmZXcgbGFiZWxzIGVhY2guICBBdm9pZCBoYXZpbmcgY29sbGVjdGlvbnMgd2hlcmUgc29tZVxuICogbGFiZWxzIGNoYW5nZSBldmVyeSBmcmFtZSBhbmQgb3RoZXJzIGRvIG5vdDsgaW5zdGVhZCwgY3JlYXRlIG9uZSBvciBtb3JlIGNvbGxlY3Rpb25zXG4gKiBmb3Igc3RhdGljIGxhYmVscywgYW5kIG9uZSBvciBtb3JlIGNvbGxlY3Rpb25zIGZvciBkeW5hbWljIGxhYmVscy5cbiAqXG4gKiBAc2VlIExhYmVsQ29sbGVjdGlvbiNhZGRcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uI3JlbW92ZVxuICogQHNlZSBMYWJlbFxuICogQHNlZSBCaWxsYm9hcmRDb2xsZWN0aW9uXG4gKlxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUxhYmVscy5odG1sfENlc2l1bSBTYW5kY2FzdGxlIExhYmVscyBEZW1vfVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDcmVhdGUgYSBsYWJlbCBjb2xsZWN0aW9uIHdpdGggdHdvIGxhYmVsc1xuICogdmFyIGxhYmVscyA9IHNjZW5lLnByaW1pdGl2ZXMuYWRkKG5ldyBDZXNpdW0uTGFiZWxDb2xsZWN0aW9uKCkpO1xuICogbGFiZWxzLmFkZCh7XG4gKiAgIHBvc2l0aW9uIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDEuMCwgMi4wLCAzLjApLFxuICogICB0ZXh0IDogJ0EgbGFiZWwnXG4gKiB9KTtcbiAqIGxhYmVscy5hZGQoe1xuICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMyg0LjAsIDUuMCwgNi4wKSxcbiAqICAgdGV4dCA6ICdBbm90aGVyIGxhYmVsJ1xuICogfSk7XG4gKi9cbmZ1bmN0aW9uIExhYmVsQ29sbGVjdGlvbihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgdGhpcy5fc2NlbmUgPSBvcHRpb25zLnNjZW5lO1xuICB0aGlzLl9iYXRjaFRhYmxlID0gb3B0aW9ucy5iYXRjaFRhYmxlO1xuXG4gIHRoaXMuX3RleHR1cmVBdGxhcyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fYmFja2dyb3VuZFRleHR1cmVBdGxhcyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fd2hpdGVQaXhlbEluZGV4ID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uID0gbmV3IEJpbGxib2FyZENvbGxlY3Rpb24oe1xuICAgIHNjZW5lOiB0aGlzLl9zY2VuZSxcbiAgfSk7XG4gIHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLmRlc3Ryb3lUZXh0dXJlQXRsYXMgPSBmYWxzZTtcblxuICB0aGlzLl9iaWxsYm9hcmRDb2xsZWN0aW9uID0gbmV3IEJpbGxib2FyZENvbGxlY3Rpb24oe1xuICAgIHNjZW5lOiB0aGlzLl9zY2VuZSxcbiAgICBiYXRjaFRhYmxlOiB0aGlzLl9iYXRjaFRhYmxlLFxuICB9KTtcbiAgdGhpcy5fYmlsbGJvYXJkQ29sbGVjdGlvbi5kZXN0cm95VGV4dHVyZUF0bGFzID0gZmFsc2U7XG4gIHRoaXMuX2JpbGxib2FyZENvbGxlY3Rpb24uX3NkZiA9IHRydWU7XG5cbiAgdGhpcy5fc3BhcmVCaWxsYm9hcmRzID0gW107XG4gIHRoaXMuX2dseXBoVGV4dHVyZUNhY2hlID0ge307XG4gIHRoaXMuX2xhYmVscyA9IFtdO1xuICB0aGlzLl9sYWJlbHNUb1VwZGF0ZSA9IFtdO1xuICB0aGlzLl90b3RhbEdseXBoQ291bnQgPSAwO1xuXG4gIHRoaXMuX2hpZ2hsaWdodENvbG9yID0gQ29sb3IuY2xvbmUoQ29sb3IuV0hJVEUpOyAvLyBPbmx5IHVzZWQgYnkgVmVjdG9yM0RUaWxlUG9pbnRzXG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgbGFiZWxzIGluIHRoaXMgY29sbGVjdGlvbiB3aWxsIGJlIHNob3duLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5zaG93ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2hvdywgdHJ1ZSk7XG5cbiAgLyoqXG4gICAqIFRoZSA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRoYXQgdHJhbnNmb3JtcyBlYWNoIGxhYmVsIGluIHRoaXMgY29sbGVjdGlvbiBmcm9tIG1vZGVsIHRvIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVuIHRoaXMgaXMgdGhlIGlkZW50aXR5IG1hdHJpeCwgdGhlIGxhYmVscyBhcmUgZHJhd24gaW4gd29ybGQgY29vcmRpbmF0ZXMsIGkuZS4sIEVhcnRoJ3MgV0dTODQgY29vcmRpbmF0ZXMuXG4gICAqIExvY2FsIHJlZmVyZW5jZSBmcmFtZXMgY2FuIGJlIHVzZWQgYnkgcHJvdmlkaW5nIGEgZGlmZmVyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCwgbGlrZSB0aGF0IHJldHVybmVkXG4gICAqIGJ5IHtAbGluayBUcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lfS5cbiAgICpcbiAgICogQHR5cGUgTWF0cml4NFxuICAgKiBAZGVmYXVsdCB7QGxpbmsgTWF0cml4NC5JREVOVElUWX1cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGNlbnRlciA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKC03NS41OTc3NywgNDAuMDM4ODMpO1xuICAgKiBsYWJlbHMubW9kZWxNYXRyaXggPSBDZXNpdW0uVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShjZW50ZXIpO1xuICAgKiBsYWJlbHMuYWRkKHtcbiAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDAuMCwgMC4wKSxcbiAgICogICB0ZXh0ICAgICA6ICdDZW50ZXInXG4gICAqIH0pO1xuICAgKiBsYWJlbHMuYWRkKHtcbiAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygxMDAwMDAwLjAsIDAuMCwgMC4wKSxcbiAgICogICB0ZXh0ICAgICA6ICdFYXN0J1xuICAgKiB9KTtcbiAgICogbGFiZWxzLmFkZCh7XG4gICAqICAgcG9zaXRpb24gOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoMC4wLCAxMDAwMDAwLjAsIDAuMCksXG4gICAqICAgdGV4dCAgICAgOiAnTm9ydGgnXG4gICAqIH0pO1xuICAgKiBsYWJlbHMuYWRkKHtcbiAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDAuMCwgMTAwMDAwMC4wKSxcbiAgICogICB0ZXh0ICAgICA6ICdVcCdcbiAgICogfSk7XG4gICAqL1xuICB0aGlzLm1vZGVsTWF0cml4ID0gTWF0cml4NC5jbG9uZShcbiAgICBkZWZhdWx0VmFsdWUob3B0aW9ucy5tb2RlbE1hdHJpeCwgTWF0cml4NC5JREVOVElUWSlcbiAgKTtcblxuICAvKipcbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBmb3IgZGVidWdnaW5nIG9ubHk7IGl0IGlzIG5vdCBmb3IgcHJvZHVjdGlvbiB1c2Ugbm9yIGlzIGl0IG9wdGltaXplZC5cbiAgICogPHA+XG4gICAqIERyYXdzIHRoZSBib3VuZGluZyBzcGhlcmUgZm9yIGVhY2ggZHJhdyBjb21tYW5kIGluIHRoZSBwcmltaXRpdmUuXG4gICAqIDwvcD5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB0aGlzLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gICAgZmFsc2VcbiAgKTtcblxuICAvKipcbiAgICogVGhlIGxhYmVsIGJsZW5kaW5nIG9wdGlvbi4gVGhlIGRlZmF1bHQgaXMgdXNlZCBmb3IgcmVuZGVyaW5nIGJvdGggb3BhcXVlIGFuZCB0cmFuc2x1Y2VudCBsYWJlbHMuXG4gICAqIEhvd2V2ZXIsIGlmIGVpdGhlciBhbGwgb2YgdGhlIGxhYmVscyBhcmUgY29tcGxldGVseSBvcGFxdWUgb3IgYWxsIGFyZSBjb21wbGV0ZWx5IHRyYW5zbHVjZW50LFxuICAgKiBzZXR0aW5nIHRoZSB0ZWNobmlxdWUgdG8gQmxlbmRPcHRpb24uT1BBUVVFIG9yIEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UIGNhbiBpbXByb3ZlXG4gICAqIHBlcmZvcm1hbmNlIGJ5IHVwIHRvIDJ4LlxuICAgKiBAdHlwZSB7QmxlbmRPcHRpb259XG4gICAqIEBkZWZhdWx0IEJsZW5kT3B0aW9uLk9QQVFVRV9BTkRfVFJBTlNMVUNFTlRcbiAgICovXG4gIHRoaXMuYmxlbmRPcHRpb24gPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5ibGVuZE9wdGlvbixcbiAgICBCbGVuZE9wdGlvbi5PUEFRVUVfQU5EX1RSQU5TTFVDRU5UXG4gICk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKExhYmVsQ29sbGVjdGlvbi5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBsYWJlbHMgaW4gdGhpcyBjb2xsZWN0aW9uLiAgVGhpcyBpcyBjb21tb25seSB1c2VkIHdpdGhcbiAgICoge0BsaW5rIExhYmVsQ29sbGVjdGlvbiNnZXR9IHRvIGl0ZXJhdGUgb3ZlciBhbGwgdGhlIGxhYmVsc1xuICAgKiBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICogQG1lbWJlcm9mIExhYmVsQ29sbGVjdGlvbi5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2xhYmVscy5sZW5ndGg7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIENyZWF0ZXMgYW5kIGFkZHMgYSBsYWJlbCB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBwcm9wZXJ0aWVzIHRvIHRoZSBjb2xsZWN0aW9uLlxuICogVGhlIGFkZGVkIGxhYmVsIGlzIHJldHVybmVkIHNvIGl0IGNhbiBiZSBtb2RpZmllZCBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24gbGF0ZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBIHRlbXBsYXRlIGRlc2NyaWJpbmcgdGhlIGxhYmVsJ3MgcHJvcGVydGllcyBhcyBzaG93biBpbiBFeGFtcGxlIDEuXG4gKiBAcmV0dXJucyB7TGFiZWx9IFRoZSBsYWJlbCB0aGF0IHdhcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgQ2FsbGluZyA8Y29kZT5hZGQ8L2NvZGU+IGlzIGV4cGVjdGVkIGNvbnN0YW50IHRpbWUuICBIb3dldmVyLCB0aGUgY29sbGVjdGlvbidzIHZlcnRleCBidWZmZXJcbiAqIGlzIHJld3JpdHRlbjsgdGhpcyBvcGVyYXRpb25zIGlzIDxjb2RlPk8obik8L2NvZGU+IGFuZCBhbHNvIGluY3Vyc1xuICogQ1BVIHRvIEdQVSBvdmVyaGVhZC4gIEZvciBiZXN0IHBlcmZvcm1hbmNlLCBhZGQgYXMgbWFueSBiaWxsYm9hcmRzIGFzIHBvc3NpYmxlIGJlZm9yZVxuICogY2FsbGluZyA8Y29kZT51cGRhdGU8L2NvZGU+LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEV4YW1wbGUgMTogIEFkZCBhIGxhYmVsLCBzcGVjaWZ5aW5nIGFsbCB0aGUgZGVmYXVsdCB2YWx1ZXMuXG4gKiB2YXIgbCA9IGxhYmVscy5hZGQoe1xuICogICBzaG93IDogdHJ1ZSxcbiAqICAgcG9zaXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5aRVJPLFxuICogICB0ZXh0IDogJycsXG4gKiAgIGZvbnQgOiAnMzBweCBzYW5zLXNlcmlmJyxcbiAqICAgZmlsbENvbG9yIDogQ2VzaXVtLkNvbG9yLldISVRFLFxuICogICBvdXRsaW5lQ29sb3IgOiBDZXNpdW0uQ29sb3IuQkxBQ0ssXG4gKiAgIG91dGxpbmVXaWR0aCA6IDEuMCxcbiAqICAgc2hvd0JhY2tncm91bmQgOiBmYWxzZSxcbiAqICAgYmFja2dyb3VuZENvbG9yIDogbmV3IENlc2l1bS5Db2xvcigwLjE2NSwgMC4xNjUsIDAuMTY1LCAwLjgpLFxuICogICBiYWNrZ3JvdW5kUGFkZGluZyA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMig3LCA1KSxcbiAqICAgc3R5bGUgOiBDZXNpdW0uTGFiZWxTdHlsZS5GSUxMLFxuICogICBwaXhlbE9mZnNldCA6IENlc2l1bS5DYXJ0ZXNpYW4yLlpFUk8sXG4gKiAgIGV5ZU9mZnNldCA6IENlc2l1bS5DYXJ0ZXNpYW4zLlpFUk8sXG4gKiAgIGhvcml6b250YWxPcmlnaW4gOiBDZXNpdW0uSG9yaXpvbnRhbE9yaWdpbi5MRUZULFxuICogICB2ZXJ0aWNhbE9yaWdpbiA6IENlc2l1bS5WZXJ0aWNhbE9yaWdpbi5CQVNFTElORSxcbiAqICAgc2NhbGUgOiAxLjAsXG4gKiAgIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgOiB1bmRlZmluZWQsXG4gKiAgIHBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlIDogdW5kZWZpbmVkLFxuICogICBoZWlnaHRSZWZlcmVuY2UgOiBIZWlnaHRSZWZlcmVuY2UuTk9ORSxcbiAqICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uIDogdW5kZWZpbmVkXG4gKiB9KTtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRXhhbXBsZSAyOiAgU3BlY2lmeSBvbmx5IHRoZSBsYWJlbCdzIGNhcnRvZ3JhcGhpYyBwb3NpdGlvbixcbiAqIC8vIHRleHQsIGFuZCBmb250LlxuICogdmFyIGwgPSBsYWJlbHMuYWRkKHtcbiAqICAgcG9zaXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhsb25naXR1ZGUsIGxhdGl0dWRlLCBoZWlnaHQpLFxuICogICB0ZXh0IDogJ0hlbGxvIFdvcmxkJyxcbiAqICAgZm9udCA6ICcyNHB4IEhlbHZldGljYScsXG4gKiB9KTtcbiAqXG4gKiBAc2VlIExhYmVsQ29sbGVjdGlvbiNyZW1vdmVcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uI3JlbW92ZUFsbFxuICovXG5MYWJlbENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHZhciBsYWJlbCA9IG5ldyBMYWJlbChvcHRpb25zLCB0aGlzKTtcblxuICB0aGlzLl9sYWJlbHMucHVzaChsYWJlbCk7XG4gIHRoaXMuX2xhYmVsc1RvVXBkYXRlLnB1c2gobGFiZWwpO1xuXG4gIHJldHVybiBsYWJlbDtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIGxhYmVsIGZyb20gdGhlIGNvbGxlY3Rpb24uICBPbmNlIHJlbW92ZWQsIGEgbGFiZWwgaXMgbm8gbG9uZ2VyIHVzYWJsZS5cbiAqXG4gKiBAcGFyYW0ge0xhYmVsfSBsYWJlbCBUaGUgbGFiZWwgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZSBsYWJlbCB3YXMgcmVtb3ZlZDsgPGNvZGU+ZmFsc2U8L2NvZGU+IGlmIHRoZSBsYWJlbCB3YXMgbm90IGZvdW5kIGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwZXJmb3JtYW5jZSBDYWxsaW5nIDxjb2RlPnJlbW92ZTwvY29kZT4gaXMgZXhwZWN0ZWQgY29uc3RhbnQgdGltZS4gIEhvd2V2ZXIsIHRoZSBjb2xsZWN0aW9uJ3MgdmVydGV4IGJ1ZmZlclxuICogaXMgcmV3cml0dGVuIC0gYW4gPGNvZGU+TyhuKTwvY29kZT4gb3BlcmF0aW9uIHRoYXQgYWxzbyBpbmN1cnMgQ1BVIHRvIEdQVSBvdmVyaGVhZC4gIEZvclxuICogYmVzdCBwZXJmb3JtYW5jZSwgcmVtb3ZlIGFzIG1hbnkgbGFiZWxzIGFzIHBvc3NpYmxlIGJlZm9yZSBjYWxsaW5nIDxjb2RlPnVwZGF0ZTwvY29kZT4uXG4gKiBJZiB5b3UgaW50ZW5kIHRvIHRlbXBvcmFyaWx5IGhpZGUgYSBsYWJlbCwgaXQgaXMgdXN1YWxseSBtb3JlIGVmZmljaWVudCB0byBjYWxsXG4gKiB7QGxpbmsgTGFiZWwjc2hvd30gaW5zdGVhZCBvZiByZW1vdmluZyBhbmQgcmUtYWRkaW5nIHRoZSBsYWJlbC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgbCA9IGxhYmVscy5hZGQoLi4uKTtcbiAqIGxhYmVscy5yZW1vdmUobCk7ICAvLyBSZXR1cm5zIHRydWVcbiAqXG4gKiBAc2VlIExhYmVsQ29sbGVjdGlvbiNhZGRcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uI3JlbW92ZUFsbFxuICogQHNlZSBMYWJlbCNzaG93XG4gKi9cbkxhYmVsQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGxhYmVsKSB7XG4gIGlmIChkZWZpbmVkKGxhYmVsKSAmJiBsYWJlbC5fbGFiZWxDb2xsZWN0aW9uID09PSB0aGlzKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fbGFiZWxzLmluZGV4T2YobGFiZWwpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuX2xhYmVscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgZGVzdHJveUxhYmVsKHRoaXMsIGxhYmVsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGxhYmVscyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwZXJmb3JtYW5jZSA8Y29kZT5PKG4pPC9jb2RlPi4gIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHJlbW92ZSBhbGwgdGhlIGxhYmVsc1xuICogZnJvbSBhIGNvbGxlY3Rpb24gYW5kIHRoZW4gYWRkIG5ldyBvbmVzIHRoYW4gdG8gY3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gZW50aXJlbHkuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogbGFiZWxzLmFkZCguLi4pO1xuICogbGFiZWxzLmFkZCguLi4pO1xuICogbGFiZWxzLnJlbW92ZUFsbCgpO1xuICpcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uI2FkZFxuICogQHNlZSBMYWJlbENvbGxlY3Rpb24jcmVtb3ZlXG4gKi9cbkxhYmVsQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGFiZWxzID0gdGhpcy5fbGFiZWxzO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsYWJlbHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBkZXN0cm95TGFiZWwodGhpcywgbGFiZWxzW2ldKTtcbiAgfVxuXG4gIGxhYmVscy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoaXMgY29sbGVjdGlvbiBjb250YWlucyBhIGdpdmVuIGxhYmVsLlxuICpcbiAqIEBwYXJhbSB7TGFiZWx9IGxhYmVsIFRoZSBsYWJlbCB0byBjaGVjayBmb3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGlzIGNvbGxlY3Rpb24gY29udGFpbnMgdGhlIGxhYmVsLCBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogQHNlZSBMYWJlbENvbGxlY3Rpb24jZ2V0XG4gKlxuICovXG5MYWJlbENvbGxlY3Rpb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGxhYmVsKSB7XG4gIHJldHVybiBkZWZpbmVkKGxhYmVsKSAmJiBsYWJlbC5fbGFiZWxDb2xsZWN0aW9uID09PSB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYWJlbCBpbiB0aGUgY29sbGVjdGlvbiBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LiAgSW5kaWNlcyBhcmUgemVyby1iYXNlZFxuICogYW5kIGluY3JlYXNlIGFzIGxhYmVscyBhcmUgYWRkZWQuICBSZW1vdmluZyBhIGxhYmVsIHNoaWZ0cyBhbGwgbGFiZWxzIGFmdGVyXG4gKiBpdCB0byB0aGUgbGVmdCwgY2hhbmdpbmcgdGhlaXIgaW5kaWNlcy4gIFRoaXMgZnVuY3Rpb24gaXMgY29tbW9ubHkgdXNlZCB3aXRoXG4gKiB7QGxpbmsgTGFiZWxDb2xsZWN0aW9uI2xlbmd0aH0gdG8gaXRlcmF0ZSBvdmVyIGFsbCB0aGUgbGFiZWxzXG4gKiBpbiB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhlIGJpbGxib2FyZC5cbiAqXG4gKiBAcmV0dXJucyB7TGFiZWx9IFRoZSBsYWJlbCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICpcbiAqIEBwZXJmb3JtYW5jZSBFeHBlY3RlZCBjb25zdGFudCB0aW1lLiAgSWYgbGFiZWxzIHdlcmUgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZFxuICoge0BsaW5rIFNjZW5lI3JlbmRlcn0gd2FzIG5vdCBjYWxsZWQsIGFuIGltcGxpY2l0IDxjb2RlPk8obik8L2NvZGU+XG4gKiBvcGVyYXRpb24gaXMgcGVyZm9ybWVkLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRvZ2dsZSB0aGUgc2hvdyBwcm9wZXJ0eSBvZiBldmVyeSBsYWJlbCBpbiB0aGUgY29sbGVjdGlvblxuICogdmFyIGxlbiA9IGxhYmVscy5sZW5ndGg7XG4gKiBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gKiAgIHZhciBsID0gYmlsbGJvYXJkcy5nZXQoaSk7XG4gKiAgIGwuc2hvdyA9ICFsLnNob3c7XG4gKiB9XG4gKlxuICogQHNlZSBMYWJlbENvbGxlY3Rpb24jbGVuZ3RoXG4gKi9cbkxhYmVsQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChpbmRleCkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJpbmRleCBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgcmV0dXJuIHRoaXMuX2xhYmVsc1tpbmRleF07XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKlxuICovXG5MYWJlbENvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gIGlmICghdGhpcy5zaG93KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGJpbGxib2FyZENvbGxlY3Rpb24gPSB0aGlzLl9iaWxsYm9hcmRDb2xsZWN0aW9uO1xuICB2YXIgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24gPSB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbjtcblxuICBiaWxsYm9hcmRDb2xsZWN0aW9uLm1vZGVsTWF0cml4ID0gdGhpcy5tb2RlbE1hdHJpeDtcbiAgYmlsbGJvYXJkQ29sbGVjdGlvbi5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XG4gIGJhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLm1vZGVsTWF0cml4ID0gdGhpcy5tb2RlbE1hdHJpeDtcbiAgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24uZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSB0aGlzLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lO1xuXG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuXG4gIGlmICghZGVmaW5lZCh0aGlzLl90ZXh0dXJlQXRsYXMpKSB7XG4gICAgdGhpcy5fdGV4dHVyZUF0bGFzID0gbmV3IFRleHR1cmVBdGxhcyh7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIH0pO1xuICAgIGJpbGxib2FyZENvbGxlY3Rpb24udGV4dHVyZUF0bGFzID0gdGhpcy5fdGV4dHVyZUF0bGFzO1xuICB9XG5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX2JhY2tncm91bmRUZXh0dXJlQXRsYXMpKSB7XG4gICAgdGhpcy5fYmFja2dyb3VuZFRleHR1cmVBdGxhcyA9IG5ldyBUZXh0dXJlQXRsYXMoe1xuICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgIGluaXRpYWxTaXplOiB3aGl0ZVBpeGVsU2l6ZSxcbiAgICB9KTtcbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbi50ZXh0dXJlQXRsYXMgPSB0aGlzLl9iYWNrZ3JvdW5kVGV4dHVyZUF0bGFzO1xuICAgIGFkZFdoaXRlUGl4ZWxDYW52YXModGhpcy5fYmFja2dyb3VuZFRleHR1cmVBdGxhcywgdGhpcyk7XG4gIH1cblxuICB2YXIgbGVuID0gdGhpcy5fbGFiZWxzVG9VcGRhdGUubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIGxhYmVsID0gdGhpcy5fbGFiZWxzVG9VcGRhdGVbaV07XG4gICAgaWYgKGxhYmVsLmlzRGVzdHJveWVkKCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBwcmVVcGRhdGVHbHlwaENvdW50ID0gbGFiZWwuX2dseXBocy5sZW5ndGg7XG5cbiAgICBpZiAobGFiZWwuX3JlYmluZEFsbEdseXBocykge1xuICAgICAgcmViaW5kQWxsR2x5cGhzKHRoaXMsIGxhYmVsKTtcbiAgICAgIGxhYmVsLl9yZWJpbmRBbGxHbHlwaHMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAobGFiZWwuX3JlcG9zaXRpb25BbGxHbHlwaHMpIHtcbiAgICAgIHJlcG9zaXRpb25BbGxHbHlwaHMobGFiZWwpO1xuICAgICAgbGFiZWwuX3JlcG9zaXRpb25BbGxHbHlwaHMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZ2x5cGhDb3VudERpZmZlcmVuY2UgPSBsYWJlbC5fZ2x5cGhzLmxlbmd0aCAtIHByZVVwZGF0ZUdseXBoQ291bnQ7XG4gICAgdGhpcy5fdG90YWxHbHlwaENvdW50ICs9IGdseXBoQ291bnREaWZmZXJlbmNlO1xuICB9XG5cbiAgdmFyIGJsZW5kT3B0aW9uID1cbiAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbi5sZW5ndGggPiAwXG4gICAgICA/IEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UXG4gICAgICA6IHRoaXMuYmxlbmRPcHRpb247XG4gIGJpbGxib2FyZENvbGxlY3Rpb24uYmxlbmRPcHRpb24gPSBibGVuZE9wdGlvbjtcbiAgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24uYmxlbmRPcHRpb24gPSBibGVuZE9wdGlvbjtcblxuICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9oaWdobGlnaHRDb2xvciA9IHRoaXMuX2hpZ2hsaWdodENvbG9yO1xuICBiYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbi5faGlnaGxpZ2h0Q29sb3IgPSB0aGlzLl9oaWdobGlnaHRDb2xvcjtcblxuICB0aGlzLl9sYWJlbHNUb1VwZGF0ZS5sZW5ndGggPSAwO1xuICBiYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbi51cGRhdGUoZnJhbWVTdGF0ZSk7XG4gIGJpbGxib2FyZENvbGxlY3Rpb24udXBkYXRlKGZyYW1lU3RhdGUpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICpcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uI2Rlc3Ryb3lcbiAqL1xuTGFiZWxDb2xsZWN0aW9uLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgV2ViR0wgcmVzb3VyY2VzIGhlbGQgYnkgdGhpcyBvYmplY3QuICBEZXN0cm95aW5nIGFuIG9iamVjdCBhbGxvd3MgZm9yIGRldGVybWluaXN0aWNcbiAqIHJlbGVhc2Ugb2YgV2ViR0wgcmVzb3VyY2VzLCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvIGRlc3Ryb3kgdGhpcyBvYmplY3QuXG4gKiA8YnIgLz48YnIgLz5cbiAqIE9uY2UgYW4gb2JqZWN0IGlzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi4gIFRoZXJlZm9yZSxcbiAqIGFzc2lnbiB0aGUgcmV0dXJuIHZhbHVlICg8Y29kZT51bmRlZmluZWQ8L2NvZGU+KSB0byB0aGUgb2JqZWN0IGFzIGRvbmUgaW4gdGhlIGV4YW1wbGUuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogbGFiZWxzID0gbGFiZWxzICYmIGxhYmVscy5kZXN0cm95KCk7XG4gKlxuICogQHNlZSBMYWJlbENvbGxlY3Rpb24jaXNEZXN0cm95ZWRcbiAqL1xuTGFiZWxDb2xsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnJlbW92ZUFsbCgpO1xuICB0aGlzLl9iaWxsYm9hcmRDb2xsZWN0aW9uID0gdGhpcy5fYmlsbGJvYXJkQ29sbGVjdGlvbi5kZXN0cm95KCk7XG4gIHRoaXMuX3RleHR1cmVBdGxhcyA9IHRoaXMuX3RleHR1cmVBdGxhcyAmJiB0aGlzLl90ZXh0dXJlQXRsYXMuZGVzdHJveSgpO1xuICB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbiA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLmRlc3Ryb3koKTtcbiAgdGhpcy5fYmFja2dyb3VuZFRleHR1cmVBdGxhcyA9XG4gICAgdGhpcy5fYmFja2dyb3VuZFRleHR1cmVBdGxhcyAmJiB0aGlzLl9iYWNrZ3JvdW5kVGV4dHVyZUF0bGFzLmRlc3Ryb3koKTtcblxuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG5leHBvcnQgZGVmYXVsdCBMYWJlbENvbGxlY3Rpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7017\n')},81208:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * Describes how to draw a label.\n *\n * @enum {Number}\n *\n * @see Label#style\n */\nvar LabelStyle = {\n  /**\n   * Fill the text of the label, but do not outline.\n   *\n   * @type {Number}\n   * @constant\n   */\n  FILL: 0,\n\n  /**\n   * Outline the text of the label, but do not fill.\n   *\n   * @type {Number}\n   * @constant\n   */\n  OUTLINE: 1,\n\n  /**\n   * Fill and outline the text of the label.\n   *\n   * @type {Number}\n   * @constant\n   */\n  FILL_AND_OUTLINE: 2,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(LabelStyle));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODEyMDguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLHlCQUF5QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0xhYmVsU3R5bGUuanM/NGJjMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERlc2NyaWJlcyBob3cgdG8gZHJhdyBhIGxhYmVsLlxuICpcbiAqIEBlbnVtIHtOdW1iZXJ9XG4gKlxuICogQHNlZSBMYWJlbCNzdHlsZVxuICovXG52YXIgTGFiZWxTdHlsZSA9IHtcbiAgLyoqXG4gICAqIEZpbGwgdGhlIHRleHQgb2YgdGhlIGxhYmVsLCBidXQgZG8gbm90IG91dGxpbmUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgRklMTDogMCxcblxuICAvKipcbiAgICogT3V0bGluZSB0aGUgdGV4dCBvZiB0aGUgbGFiZWwsIGJ1dCBkbyBub3QgZmlsbC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBPVVRMSU5FOiAxLFxuXG4gIC8qKlxuICAgKiBGaWxsIGFuZCBvdXRsaW5lIHRoZSB0ZXh0IG9mIHRoZSBsYWJlbC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBGSUxMX0FORF9PVVRMSU5FOiAyLFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoTGFiZWxTdHlsZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///81208\n')},23436:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n\n\n/**\n * A light source. This type describes an interface and is not intended to be instantiated directly. Together, <code>color</code> and <code>intensity</code> produce a high-dynamic-range light color. <code>intensity</code> can also be used individually to dim or brighten the light without changing the hue.\n *\n * @alias Light\n * @constructor\n *\n * @see DirectionalLight\n * @see SunLight\n */\nfunction Light() {}\n\nObject.defineProperties(Light.prototype, {\n  /**\n   * The color of the light.\n   * @memberof Light.prototype\n   * @type {Color}\n   */\n  color: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * The intensity controls the strength of the light. <code>intensity</code> has a minimum value of 0.0 and no maximum value.\n   * @memberof Light.prototype\n   * @type {Number}\n   */\n  intensity: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n});\n\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (Light)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM0MzYuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVMsd0hBQXNDO0FBQy9DLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTLHdIQUFzQztBQUMvQyxHQUFHO0FBQ0gsQ0FBQzs7QUFFRCxzRUFBZSxxREFBSyxJQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0xpZ2h0LmpzPzQ0YTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5cbi8qKlxuICogQSBsaWdodCBzb3VyY2UuIFRoaXMgdHlwZSBkZXNjcmliZXMgYW4gaW50ZXJmYWNlIGFuZCBpcyBub3QgaW50ZW5kZWQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LiBUb2dldGhlciwgPGNvZGU+Y29sb3I8L2NvZGU+IGFuZCA8Y29kZT5pbnRlbnNpdHk8L2NvZGU+IHByb2R1Y2UgYSBoaWdoLWR5bmFtaWMtcmFuZ2UgbGlnaHQgY29sb3IuIDxjb2RlPmludGVuc2l0eTwvY29kZT4gY2FuIGFsc28gYmUgdXNlZCBpbmRpdmlkdWFsbHkgdG8gZGltIG9yIGJyaWdodGVuIHRoZSBsaWdodCB3aXRob3V0IGNoYW5naW5nIHRoZSBodWUuXG4gKlxuICogQGFsaWFzIExpZ2h0XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAc2VlIERpcmVjdGlvbmFsTGlnaHRcbiAqIEBzZWUgU3VuTGlnaHRcbiAqL1xuZnVuY3Rpb24gTGlnaHQoKSB7fVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhMaWdodC5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIFRoZSBjb2xvciBvZiB0aGUgbGlnaHQuXG4gICAqIEBtZW1iZXJvZiBMaWdodC5wcm90b3R5cGVcbiAgICogQHR5cGUge0NvbG9yfVxuICAgKi9cbiAgY29sb3I6IHtcbiAgICBnZXQ6IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yLFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgaW50ZW5zaXR5IGNvbnRyb2xzIHRoZSBzdHJlbmd0aCBvZiB0aGUgbGlnaHQuIDxjb2RlPmludGVuc2l0eTwvY29kZT4gaGFzIGEgbWluaW11bSB2YWx1ZSBvZiAwLjAgYW5kIG5vIG1heGltdW0gdmFsdWUuXG4gICAqIEBtZW1iZXJvZiBMaWdodC5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGludGVuc2l0eToge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgTGlnaHQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///23436\n')}}]);