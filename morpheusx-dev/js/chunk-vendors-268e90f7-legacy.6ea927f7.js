"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[1830],{87838:function(t,e,i){function n({pickInfo:t,viewports:e,pixelRatio:i,x:n,y:o,z:r}){let a,c=e[0];if(e.length>1&&(c=s((null===t||void 0===t?void 0:t.pickedViewports)||e,{x:n,y:o})),c){const t=[n-c.x,o-c.y];void 0!==r&&(t[2]=r),a=c.unproject(t)}return{color:null,layer:null,viewport:c,index:-1,picked:!1,x:n,y:o,pixel:[n,o],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:i}}function o(t){const{pickInfo:e,lastPickedInfo:i,mode:o,layers:s}=t,{pickedColor:a,pickedLayer:c,pickedObjectIndex:u}=e,h=c?[c]:[];if("hover"===o){const t=i.index,e=i.layerId,n=c?c.props.id:null;if(n!==e||u!==t){if(n!==e){const t=s.find((t=>t.props.id===e));t&&h.unshift(t)}i.layerId=n,i.index=u,i.info=null}}const l=n(t),d=new Map;return d.set(null,l),h.forEach((t=>{let e={...l};t===c&&(e.color=a,e.index=u,e.picked=!0),e=r({layer:t,info:e,mode:o});const n=e.layer;t===c&&"hover"===o&&(i.info=e),d.set(n.id,e),"hover"===o&&n.updateAutoHighlight(e)})),d}function r({layer:t,info:e,mode:i}){while(t&&e){const n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:i,sourceLayer:n}),t=t.parent}return e}function s(t,e){for(let i=t.length-1;i>=0;i--){const n=t[i];if(n.containsPixel(e))return n}return t[0]}i.d(e,{I5:function(){return o},iD:function(){return r},wy:function(){return n}})},96941:function(t,e,i){i.d(e,{K:function(){return s},T:function(){return r}});var n=i(80744);const o={pickedColor:null,pickedObjectIndex:-1};function r({pickedColors:t,decodePickingColor:e,deviceX:i,deviceY:r,deviceRadius:s,deviceRect:a}){const{x:c,y:u,width:h,height:l}=a;let d=s*s,p=-1,f=0;for(let n=0;n<l;n++){const e=n+u-r,o=e*e;if(o>d)f+=4*h;else for(let n=0;n<h;n++){const e=t[f+3]-1;if(e>=0){const t=n+c-i,e=t*t+o;e<=d&&(d=e,p=f)}f+=4}}if(p>=0){const i=t.slice(p,p+4),o=e(i);if(o){const t=Math.floor(p/4/h),e=p/4-t*h;return{...o,pickedColor:i,pickedX:c+e,pickedY:u+t}}n.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}return o}function s({pickedColors:t,decodePickingColor:e}){const i=new Map;if(t)for(let o=0;o<t.length;o+=4){const r=t[o+3]-1;if(r>=0){const r=t.slice(o,o+4),s=r.join(",");if(!i.has(s)){const t=e(r);t?i.set(s,{...t,color:r}):n.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(i.values())}},50007:function(t,e,i){i.d(e,{Z:function(){return s}});var n=i(82482),o=i(44534);class r{constructor(t,e,i){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"context",void 0),(0,n.Z)(this,"isLoaded",void 0),(0,n.Z)(this,"persistent",void 0),(0,n.Z)(this,"_loadCount",0),(0,n.Z)(this,"_subscribers",new Set),(0,n.Z)(this,"_data",void 0),(0,n.Z)(this,"_loader",void 0),(0,n.Z)(this,"_error",void 0),(0,n.Z)(this,"_content",void 0),this.id=t,this.context=i,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const i=++this._loadCount;let n=t;"string"===typeof t&&(n=(0,o.z)(t)),n instanceof Promise?(this.isLoaded=!1,this._loader=n.then((t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class s{constructor({gl:t,protocol:e}){(0,n.Z)(this,"protocol",void 0),(0,n.Z)(this,"_context",void 0),(0,n.Z)(this,"_resources",void 0),(0,n.Z)(this,"_consumers",void 0),(0,n.Z)(this,"_pruneRequest",void 0),this.protocol=e||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add({resourceId:t,data:e,forceUpdate:i=!1,persistent:n=!0}){let o=this._resources[t];o?o.setData(e,i):(o=new r(t,e,this._context),this._resources[t]=o),o.persistent=n}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const e=this._consumers[t];if(e){for(const t in e){const i=e[t],n=this._resources[i.resourceId];n&&n.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:i,requestId:n="default"}){const{_resources:o,protocol:r}=this;t.startsWith(r)&&(t=t.replace(r,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(i,n,s,e),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,i,n){const o=this._consumers,r=o[t]=o[t]||{},s=r[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),i&&(r[e]=s,s.onChange=n,s.resourceId=i.id,i.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}},81862:function(t,e,i){i.d(e,{Z:function(){return r}});var n=i(82482);const o={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class r{constructor(t){(0,n.Z)(this,"el",null),(0,n.Z)(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,o),e.appendChild(this.el))}setTooltip(t,e,i){const n=this.el;if(n){if("string"===typeof t)n.innerText=t;else{if(!t)return this.isVisible=!1,void(n.style.display="none");t.text&&(n.innerText=t.text),t.html&&(n.innerHTML=t.html),t.className&&(n.className=t.className),Object.assign(n.style,t.style)}this.isVisible=!0,n.style.display="block",n.style.transform="translate(".concat(e,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}},52413:function(t,e,i){i.d(e,{Z:function(){return f}});var n=i(91619),o=i(14034),r=i(53630);class s extends r.Z{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:i,duration:n,easing:r}}=this,s=r(t/n);this._value=(0,o.t7)(e,i,s)}}const a=1e-5;function c(t,e,i,n,o){const r=e-t,s=i-e,a=s*o,c=-r*n;return a+c+r+e}function u(t,e,i,n,o){if(Array.isArray(i)){const r=[];for(let s=0;s<i.length;s++)r[s]=c(t[s],e[s],i[s],n,o);return r}return c(t,e,i,n,o)}function h(t,e){if(Array.isArray(t)){let i=0;for(let n=0;n<t.length;n++){const o=t[n]-e[n];i+=o*o}return Math.sqrt(i)}return Math.abs(t-e)}class l extends r.Z{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:i,stiffness:n}=this.settings,{_prevValue:o=t,_currValue:r=t}=this;let s=u(o,r,e,i,n);const c=h(s,e),l=h(s,r);c<a&&l<a&&(s=e,this.end()),this._prevValue=r,this._currValue=s}}var d=i(80744);const p={interpolation:s,spring:l};class f{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,i,o){const{transitions:r}=this;if(r.has(t)){const i=r.get(t),{value:n=i.settings.fromValue}=i;e=n,this.remove(t)}if(o=(0,n.M0)(o),!o)return;const s=p[o.type];if(!s)return void d.Z.error("unsupported transition type '".concat(o.type,"'"))();const a=new s(this.timeline);a.start({...o,fromValue:e,toValue:i}),r.set(t,a)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,i]of this.transitions)i.update(),t[e]=i.value,i.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}},34779:function(t,e,i){i.d(e,{Z:function(){return a}});var n=i(82482),o=i(46871),r=i(80744),s=i(61855);class a{constructor(t){(0,n.Z)(this,"width",void 0),(0,n.Z)(this,"height",void 0),(0,n.Z)(this,"views",void 0),(0,n.Z)(this,"viewState",void 0),(0,n.Z)(this,"controllers",void 0),(0,n.Z)(this,"timeline",void 0),(0,n.Z)(this,"_viewports",void 0),(0,n.Z)(this,"_viewportMap",void 0),(0,n.Z)(this,"_isUpdating",void 0),(0,n.Z)(this,"_needsRedraw",void 0),(0,n.Z)(this,"_needsUpdate",void 0),(0,n.Z)(this,"_eventManager",void 0),(0,n.Z)(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"===typeof t?this.getView(t):t,i=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(i):i}getViewport(t){return this._viewportMap[t]}unproject(t,e){const i=this.getViewports(),n={x:t[0],y:t[1]};for(let o=i.length-1;o>=0;--o){const r=i[o];if(r.containsPixel(n)){const i=t.slice();return i[0]-=r.x,i[1]-=r.y,r.unproject(i,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=(0,s.x)(t,Boolean);const e=this._diffViews(t,this.views);e&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){const e=!(0,o.v)(t,this.viewState,3);e&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else r.Z.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){const i=e.type,n=new i({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var i;return null===(i=this.getView(t.id))||void 0===i?void 0:i.makeViewport({viewState:e,width:this.width,height:this.height})}});return n}_updateController(t,e,i,n){const o=t.controller;if(o){const r={...e,...o,id:t.id,x:i.x,y:i.y,width:i.width,height:i.height};return n||(n=this._createController(t,r)),n&&n.setProps(r),n}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let n=t.length;n--;){const o=t[n],r=this.getViewState(o),s=o.makeViewport({viewState:r,width:this.width,height:this.height});let a=e[o.id];const c=Boolean(o.controller);c&&!a&&(i=!0),!i&&c||!a||(a.finalize(),a=null),this.controllers[o.id]=this._updateController(o,r,s,a),this._viewports.unshift(s)}for(const n in e){const t=e[n];t&&!this.controllers[n]&&t.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((i,n)=>!t[n].equals(e[n])))}}},88018:function(t,e,i){i.d(e,{Z:function(){return a}});var n=i(82482),o=i(38550),r=i(85409);const s=Object.freeze({});class a{constructor(t){(0,n.Z)(this,"component",void 0),(0,n.Z)(this,"onAsyncPropUpdated",void 0),(0,n.Z)(this,"asyncProps",void 0),(0,n.Z)(this,"oldProps",void 0),(0,n.Z)(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||s}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[r.fm]||this.component;const e=t[r.bN]||{},i=t[r.fO]||t,n=t[r.lY]||{};for(const o in e){const t=e[o];this._createAsyncPropData(o,n[o]),this._updateAsyncProp(o,t),e[o]=this.getAsyncProp(o)}for(const o in i){const t=i[o];this._createAsyncPropData(o,n[o]),this._updateAsyncProp(o,t)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"===typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):(0,o.D0)(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const i=this.asyncProps[t];return e!==i.resolvedValue&&e!==i.lastValue&&(i.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const i=this.asyncProps[t];i&&(e=this._postProcessValue(i,e),i.resolvedValue=e,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(t,e,i){const n=this.asyncProps[t];n&&i>=n.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),n.resolvedValue=e,n.resolvedLoadCount=i,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const i=this.asyncProps[t];if(i){i.pendingLoadCount++;const n=i.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(i,e),this._setAsyncPropValue(t,e,n),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const i=this.asyncProps[t];if(!i)return;i.pendingLoadCount++;const n=i.pendingLoadCount;let o=[],r=0;for await(const s of e){if(!this.component)return;const{dataTransform:e}=this.component.props;o=e?e(s,o):o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:r,endRow:o.length}]}),r=o.length,this._setAsyncPropValue(t,o,n)}this._onResolve(t,o)}_postProcessValue(t,e){const i=t.type;return i&&this.component&&(i.release&&i.release(t.resolvedValue,i,this.component),i.transform)?i.transform(e,i,this.component):e}_createAsyncPropData(t,e){const i=this.asyncProps[t];if(!i){const i=this.component&&this.component.props[r.Wb];this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}},85089:function(t,e,i){i.d(e,{Z:function(){return I}});var n=i(82482),o=i(85409),r=i(80744),s=i(38550),a=i(51621);const c={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},u={};function h(t,e,i){if(e instanceof a.Z)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let n=null;e.compressed&&(n={[10241]:e.data.length>1?9985:9729});const o=new a.Z(t,{...e,parameters:{...c,...n,...i}});return u[o.id]=!0,o}function l(t){t&&t instanceof a.Z&&u[t.id]&&(t.delete(),delete u[t.id])}var d=i(46871);const p={boolean:{validate(t,e){return!0},equal(t,e,i){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||m(t)&&(3===t.length||4===t.length)},equal(t,e,i){return(0,d.v)(t,e,1)}},accessor:{validate(t,e){const i=v(t);return"function"===i||i===v(e.value)},equal(t,e,i){return"function"===typeof e||(0,d.v)(t,e,1)}},array:{validate(t,e){return e.optional&&!t||m(t)},equal(t,e,i){const{compare:n}=i,o=Number.isInteger(n)?n:n?1:0;return n?(0,d.v)(t,e,o):t===e}},object:{equal(t,e,i){if(i.ignore)return!0;const{compare:n}=i,o=Number.isInteger(n)?n:n?1:0;return n?(0,d.v)(t,e,o):t===e}},function:{validate(t,e){return e.optional&&!t||"function"===typeof t},equal(t,e,i){const n=!i.compare&&!1!==i.ignore;return n||t===e}},data:{transform:(t,e,i)=>{const{dataTransform:n}=i.props;return n&&t?n(t):t}},image:{transform:(t,e,i)=>{const n=i.context;return n&&n.gl?h(n.gl,t,{...e.parameters,...i.props.textureParameters}):null},release:t=>{l(t)}}};function f(t){const e={},i={},n={};for(const[o,r]of Object.entries(t)){const t=null===r||void 0===r?void 0:r.deprecatedFor;if(t)n[o]=Array.isArray(t)?t:[t];else{const t=g(o,r);e[o]=t,i[o]=t.value}}return{propTypes:e,defaultProps:i,deprecatedProps:n}}function g(t,e){switch(v(e)){case"object":return _(t,e);case"array":return _(t,{type:"array",value:e,compare:!1});case"boolean":return _(t,{type:"boolean",value:e});case"number":return _(t,{type:"number",value:e});case"function":return _(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function _(t,e){return"type"in e?{name:t,...p[e.type],...e}:"value"in e?{name:t,type:v(e.value),...e}:{name:t,type:"object",value:e}}function m(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function v(t){return m(t)?"array":null===t?"null":typeof t}function w(t,e){let i;for(let o=e.length-1;o>=0;o--){const t=e[o];"extensions"in t&&(i=t.extensions)}const n=P(t.constructor,i),r=Object.create(n);r[o.fm]=t,r[o.fO]={},r[o.bN]={};for(let o=0;o<e.length;++o){const t=e[o];for(const e in t)r[e]=t[e]}return Object.freeze(r),r}const y="_mergedDefaultProps";function P(t,e){let i=y;if(e)for(const o of e){const t=o.constructor;t&&(i+=":".concat(t.extensionName||t.name))}const n=S(t,i);return n||(t[i]=b(t,e||[]))}function b(t,e){const i=t.prototype;if(!i)return null;const n=Object.getPrototypeOf(t),r=P(n),s=S(t,"defaultProps")||{},a=f(s),c=Object.assign(Object.create(null),r,a.defaultProps),u=Object.assign(Object.create(null),null===r||void 0===r?void 0:r[o.Wb],a.propTypes),h=Object.assign(Object.create(null),null===r||void 0===r?void 0:r[o.E7],a.deprecatedProps);for(const l of e){const t=P(l.constructor);t&&(Object.assign(c,t),Object.assign(u,t[o.Wb]),Object.assign(h,t[o.E7]))}return j(c,t),x(c,u),M(c,h),c[o.Wb]=u,c[o.E7]=h,0!==e.length||T(t,"_propTypes")||(t._propTypes=u),c}function j(t,e){const i=C(e);Object.defineProperties(t,{id:{writable:!0,value:i}})}function M(t,e){for(const i in e)Object.defineProperty(t,i,{enumerable:!1,set(t){const n="".concat(this.id,": ").concat(i);for(const o of e[i])T(this,o)||(this[o]=t);r.Z.deprecated(n,e[i].join("/"))()}})}function x(t,e){const i={},n={};for(const o in e){const t=e[o],{name:r,value:s}=t;t.async&&(i[r]=s,n[r]=Z(r))}t[o.lY]=i,t[o.fO]={},Object.defineProperties(t,n)}function Z(t){return{enumerable:!0,set(e){"string"===typeof e||e instanceof Promise||(0,s.D0)(e)?this[o.fO][t]=e:this[o.bN][t]=e},get(){if(this[o.bN]){if(t in this[o.bN]){const e=this[o.bN][t];return e||this[o.lY][t]}if(t in this[o.fO]){const e=this[o.fm]&&this[o.fm].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[o.lY][t]}}return this[o.lY][t]}}}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){return T(t,e)&&t[e]}function C(t){const e=S(t,"layerName")||S(t,"componentName");return e||r.Z.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}let E=0;class I{constructor(...t){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"props",void 0),(0,n.Z)(this,"count",void 0),this.props=w(this,t),this.id=this.props.id,this.count=E++}clone(t){const{props:e}=this,i={};for(const n in e[o.lY])n in e[o.bN]?i[n]=e[o.bN][n]:n in e[o.fO]&&(i[n]=e[o.fO][n]);return new this.constructor({...e,...i,...t})}}(0,n.Z)(I,"componentName","Component"),(0,n.Z)(I,"defaultProps",{})},85409:function(t,e,i){i.d(e,{E7:function(){return s},Wb:function(){return r},bN:function(){return u},dt:function(){return n},fO:function(){return c},fm:function(){return o},lY:function(){return a}});const n={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},o=Symbol.for("component"),r=Symbol.for("propTypes"),s=Symbol.for("deprecatedProps"),a=Symbol.for("asyncPropDefaults"),c=Symbol.for("asyncPropOriginal"),u=Symbol.for("asyncPropResolved")},71761:function(t,e,i){i.d(e,{Yt:function(){return r},eQ:function(){return o}});var n=i(85409);function o(t){const e=t[n.Wb];for(const i in e){const n=e[i],{validate:o}=n;if(o&&!o(t[i],n))throw new Error("Invalid prop ".concat(i,": ").concat(t[i]))}}function r(t,e){const i=a({newProps:t,oldProps:e,propTypes:t[n.Wb],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),o=u(t,e);let r=!1;return o||(r=h(t,e)),{dataChanged:o,propsChanged:i,updateTriggersChanged:r,extensionsChanged:l(t,e),transitionsChanged:s(t,e)}}function s(t,e){if(!t.transitions)return!1;const i={},o=t[n.Wb];let r=!1;for(const n in t.transitions){const s=o[n],a=s&&s.type,u="number"===a||"color"===a||"array"===a;u&&c(t[n],e[n],s)&&(i[n]=!0,r=!0)}return!!r&&i}function a({newProps:t,oldProps:e,ignoreProps:i={},propTypes:n={},triggerName:o="props"}){if(e===t)return!1;if("object"!==typeof t||null===t)return"".concat(o," changed shallowly");if("object"!==typeof e||null===e)return"".concat(o," changed shallowly");for(const r of Object.keys(t))if(!(r in i)){if(!(r in e))return"".concat(o,".").concat(r," added");const i=c(t[r],e[r],n[r]);if(i)return"".concat(o,".").concat(r," ").concat(i)}for(const r of Object.keys(e))if(!(r in i)){if(!(r in t))return"".concat(o,".").concat(r," dropped");if(!Object.hasOwnProperty.call(t,r)){const i=c(t[r],e[r],n[r]);if(i)return"".concat(o,".").concat(r," ").concat(i)}}return!1}function c(t,e,i){let n=i&&i.equal;return n&&!n(t,e,i)?"changed deeply":n||(n=t&&e&&t.equals,!n||n.call(t,e))?n||e===t?null:"changed shallowly":"changed deeply"}function u(t,e){if(null===e)return"oldProps is null, initial diff";let i=!1;const{dataComparator:n,_dataDiff:o}=t;return n?n(t.data,e.data)||(i="Data comparator detected a change"):t.data!==e.data&&(i="A new data container was supplied"),i&&o&&(i=o(t.data,e.data)||i),i}function h(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){const i=d(t,e,"all");if(i)return{all:!0}}const i={};let n=!1;for(const o in t.updateTriggers)if("all"!==o){const r=d(t,e,o);r&&(i[o]=!0,n=!0)}return!!n&&i}function l(t,e){if(null===e)return!0;const i=e.extensions,{extensions:n}=t;if(n===i)return!1;if(!i||!n)return!0;if(n.length!==i.length)return!0;for(let o=0;o<n.length;o++)if(!n[o].equals(i[o]))return!0;return!1}function d(t,e,i){let n=t.updateTriggers[i];n=void 0===n||null===n?{}:n;let o=e.updateTriggers[i];o=void 0===o||null===o?{}:o;const r=a({oldProps:o,newProps:n,triggerName:i});return r}},13169:function(t,e,i){i.d(e,{Z:function(){return o}});var n=i(95442);class o extends n.Z{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}},95442:function(t,e,i){i.d(e,{Z:function(){return a}});var n=i(82482);class o{constructor(t,e={id:"pass"}){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"props",void 0);const{id:i}=e;this.id=i,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}var r=i(1418),s=i(26047);class a extends o{constructor(...t){super(...t),(0,n.Z)(this,"_lastRenderIndex",-1)}render(t){const e=this.gl;return(0,r.dR)(e,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:i,viewports:n,views:o,onViewportActive:r,clearStack:s=!0,clearCanvas:a=!0}=t;t.pass=t.pass||"unknown";const c=this.gl;a&&h(c,e),s&&(this._lastRenderIndex=-1);const u=[];for(const h of n){const n=o&&o[h.id];null===r||void 0===r||r(h);const s=this._getDrawLayerParams(h,t),a=h.subViewports||[h];for(const o of a){const r=this._drawLayersInViewport(c,{target:e,moduleParameters:i,viewport:o,view:n,pass:t.pass,layers:t.layers},s);u.push(r)}}return u}_getDrawLayerParams(t,{layers:e,pass:i,isPicking:n=!1,layerFilter:o,cullRect:r,effects:s,moduleParameters:a},u=!1){const h=[],l=c(this._lastRenderIndex+1),d={layer:e[0],viewport:t,isPicking:n,renderPass:i,cullRect:r},p={};for(let c=0;c<e.length;c++){const n=e[c],r=this._shouldDrawLayer(n,d,o,p),f={shouldDrawLayer:r};r&&!u&&(f.layerRenderIndex=l(n,r),f.moduleParameters=this._getModuleParameters(n,s,i,a),f.layerParameters=this.getLayerParameters(n,c,t)),h[c]=f}return h}_drawLayersInViewport(t,{layers:e,moduleParameters:i,pass:n,target:o,viewport:a,view:c},h){const l=u(t,{moduleParameters:i,target:o,viewport:a});if(c&&c.props.clear){const e=!0===c.props.clear?{color:!0,depth:!0}:c.props.clear;(0,r.s8)(t,{scissorTest:!0,scissor:l},(()=>(0,s.Z)(t,e)))}const d={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};(0,r.dR)(t,{viewport:l});for(let r=0;r<e.length;r++){const t=e[r],{shouldDrawLayer:i,layerRenderIndex:o,moduleParameters:s,layerParameters:c}=h[r];if(i&&t.props.pickable&&d.pickableCount++,t.isComposite)d.compositeCount++;else if(i){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,o),s.viewport=a;try{t._drawLayer({moduleParameters:s,uniforms:{layerIndex:o},parameters:c})}catch(p){t.raiseError(p,"drawing ".concat(t," to ").concat(n))}}}return d}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,i){return t.props.parameters}_shouldDrawLayer(t,e,i,n){const o=t.props.visible&&this.shouldDrawLayer(t);if(!o)return!1;e.layer=t;let r=t.parent;while(r){if(!r.props.visible||!r.filterSubLayer(e))return!1;e.layer=r,r=r.parent}if(i){const t=e.layer.id;if(t in n||(n[t]=i(e)),!n[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,i,n){var o;const s=Object.assign(Object.create((null===(o=t.internalState)||void 0===o?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:(0,r.w)(this.gl)});if(e)for(const r of e){var a;Object.assign(s,null===(a=r.getModuleParameters)||void 0===a?void 0:a.call(r,t))}return Object.assign(s,this.getModuleParameters(t,e),n)}}function c(t=0,e={}){const i={},n=(o,r)=>{const s=o.props._offset,a=o.id,u=o.parent&&o.parent.id;let h;if(u&&!(u in e)&&n(o.parent,!1),u in i){const t=i[u]=i[u]||c(e[u],e);h=t(o,r),i[a]=t}else Number.isFinite(s)?(h=s+(e[u]||0),i[a]=null):h=t;return r&&h>=t&&(t=h+1),e[a]=h,h};return n}function u(t,{moduleParameters:e,target:i,viewport:n}){const o=i&&"default-framebuffer"!==i.id,s=e&&e.devicePixelRatio||(0,r.w)(t),a=o?i.height:t.drawingBufferHeight,c=n;return[c.x*s,a-(c.y+c.height)*s,c.width*s,c.height*s]}function h(t,e){const i=e?e.width:t.drawingBufferWidth,n=e?e.height:t.drawingBufferHeight;(0,r.dR)(t,{viewport:[0,0,i,n]}),t.clear(16640)}},70930:function(t,e,i){i.d(e,{Z:function(){return c}});var n=i(82482),o=i(95442),r=i(1418),s=i(80744);const a={blendFunc:[1,0,32771,0],blendEquation:32774};class c extends o.Z{constructor(...t){super(...t),(0,n.Z)(this,"pickZ",void 0),(0,n.Z)(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:i,viewports:n,onViewportActive:o,pickingFBO:s,deviceRect:{x:c,y:u,width:l,height:d},cullRect:p,effects:f,pass:g="picking",pickZ:_,moduleParameters:m}){const v=this.gl;this.pickZ=_;const w=this._resetColorEncoder(_),y=(0,r.s8)(v,{scissorTest:!0,scissor:[c,u,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...a,blend:!_},(()=>super.render({target:s,layers:t,layerFilter:e,views:i,viewports:n,onViewportActive:o,cullRect:p,effects:null===f||void 0===f?void 0:f.filter((t=>t.useInPicking)),pass:g,isPicking:!0,moduleParameters:m})));this._colorEncoderState=null;const P=w&&h.bind(null,w);return{decodePickingColor:P,stats:y}}shouldDrawLayer(t){const{pickable:e,operation:i}=t.props;return e&&i.includes("draw")||i.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,i){const n={...t.props.parameters},{pickable:o,operation:r}=t.props;return this._colorEncoderState?o&&r.includes("draw")&&(Object.assign(n,a),n.blend=!0,n.blendColor=u(this._colorEncoderState,t,i)):n.blend=!1,r.includes("terrain")&&(n.blend=!1),n}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function u(t,e,i){const{byLayer:n,byAlpha:o}=t;let r,a=n.get(e);return a?(a.viewports.push(i),r=a.a):(r=n.size+1,r<=255?(a={a:r,layer:e,viewports:[i]},n.set(e,a),o[r]=a):(s.Z.warn("Too many pickable layers, only picking the first 255")(),r=0)),[0,0,0,r/255]}function h(t,e){const i=t.byAlpha[e[3]];return i&&{pickedLayer:i.layer,pickedViewports:i.viewports,pickedObjectIndex:i.layer.decodePickingColor(e)}}},22944:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(82482),o=i(95442),r=i(51621),s=i(94041),a=i(53849),c=i(1418);class u extends o.Z{constructor(t,e){super(t,e),(0,n.Z)(this,"shadowMap",void 0),(0,n.Z)(this,"depthBuffer",void 0),(0,n.Z)(this,"fbo",void 0),this.shadowMap=new r.Z(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new s.Z(t,{format:33189,width:1,height:1}),this.fbo=new a.Z(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const e=this.fbo;(0,c.s8)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const i=t.viewports[0],n=(0,c.w)(this.gl),o=i.width*n,r=i.height*n;o===e.width&&r===e.height||e.resize({width:o,height:r}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}},15621:function(t,e,i){i.d(e,{bs:function(){return a}});var n=i(43426),o=i(89668);const r=[o.Z],s=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function a(t){const e=n.Z.getDefaultProgramManager(t);for(const i of r)e.addDefaultModule(i);for(const i of s)e.addShaderHook(i);return e}},43844:function(t,e,i){var n=i(83330);e["Z"]={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...n.q}},18547:function(t,e,i){i.d(e,{D:function(){return p},T:function(){return d}});var n=i(24088),o=i(8771),r=i(96935),s=i(98333),a=i(77160),c=i(78866);const u=[0,0,0];function h(t,e,i=!1){const n=e.projectPosition(t);if(i&&e instanceof r.Z){const[i,o,r=0]=t,s=e.getDistanceScales([i,o]);n[2]=r*s.unitsPerMeter[2]}return n}function l(t){const{viewport:e,modelMatrix:i,coordinateOrigin:o}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return r===n.Df.DEFAULT&&(r=e.isGeospatial?n.Df.LNGLAT:n.Df.CARTESIAN),void 0===s&&(s=r),void 0===a&&(a=o),{viewport:e,coordinateSystem:r,coordinateOrigin:o,modelMatrix:i,fromCoordinateSystem:s,fromCoordinateOrigin:a}}function d(t,{viewport:e,modelMatrix:i,coordinateSystem:o,coordinateOrigin:r,offsetMode:a}){let[u,l,d=0]=t;switch(i&&([u,l,d]=s.fF([],[u,l,d,1],i)),o){case n.Df.LNGLAT:return h([u,l,d],e,a);case n.Df.LNGLAT_OFFSETS:return h([u+r[0],l+r[1],d+(r[2]||0)],e,a);case n.Df.METER_OFFSETS:return h((0,c.eG)(r,[u,l,d]),e,a);case n.Df.CARTESIAN:default:return e.isGeospatial?[u+r[0],l+r[1],d+r[2]]:e.projectPosition([u,l,d])}}function p(t,e){const{viewport:i,coordinateSystem:n,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:c,fromCoordinateOrigin:h}=l(e),{autoOffset:p=!0}=e,{geospatialOrigin:f=u,shaderCoordinateOrigin:g=u,offsetMode:_=!1}=p?(0,o.v)(i,n,r):{},m=d(t,{viewport:i,modelMatrix:s,coordinateSystem:c,coordinateOrigin:h,offsetMode:_});if(_){const t=i.projectPosition(f||g);a.lu(m,m,t)}return m}},89668:function(t,e,i){i.d(e,{Z:function(){return _}});var n=i(25502);const o="#define SMOOTH_EDGE_RADIUS 0.5",r="\n".concat(o,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),s="\n".concat(o,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n");var a={name:"geometry",vs:r,fs:s},c=i(24088);const u=Object.keys(c.Df).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(c.Df[t],";"))).join(""),h=Object.keys(c.zG).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(c.zG[t],";"))).join(""),l=Object.keys(c.iI).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(c.iI[t],";"))).join("");var d="".concat(u,"\n").concat(h,"\n").concat(l,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),p=i(8771);const f={};function g(t=f){return"viewport"in t?(0,p.C)(t):{}}var _={name:"project",dependencies:[n.O,a],vs:d,getUniforms:g}},8771:function(t,e,i){i.d(e,{C:function(){return g},v:function(){return p}});var n=i(85975),o=i(98333),r=i(24088),s=i(88177);const a=[0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[0,0,0],l=[0,0,0],d=(0,s.Z)(_);function p(t,e,i=l){i.length<3&&(i=[i[0],i[1],0]);let n,o=i,s=!0;switch(n=e===r.Df.LNGLAT_OFFSETS||e===r.Df.METER_OFFSETS?i:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case r.zG.WEB_MERCATOR:e!==r.Df.LNGLAT&&e!==r.Df.CARTESIAN||(n=[0,0,0],s=!1);break;case r.zG.WEB_MERCATOR_AUTO_OFFSET:e===r.Df.LNGLAT?o=n:e===r.Df.CARTESIAN&&(o=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],n=t.unprojectPosition(o),o[0]-=i[0],o[1]-=i[1],o[2]-=i[2]);break;case r.zG.IDENTITY:o=t.position.map(Math.fround),o[2]=o[2]||0;break;case r.zG.GLOBE:s=!1,n=null;break;default:s=!1}return{geospatialOrigin:n,shaderCoordinateOrigin:o,offsetMode:s}}function f(t,e,i){const{viewMatrixUncentered:r,projectionMatrix:s}=t;let{viewMatrix:u,viewProjectionMatrix:h}=t,l=a,d=a,f=t.cameraPosition;const{geospatialOrigin:g,shaderCoordinateOrigin:_,offsetMode:m}=p(t,e,i);return m&&(d=t.projectPosition(g||_),f=[f[0]-d[0],f[1]-d[1],f[2]-d[2]],d[3]=1,l=o.fF([],d,h),u=r||u,h=n.Jp([],s,u),h=n.Jp([],h,c)),{viewMatrix:u,viewProjectionMatrix:h,projectionCenter:l,originCommon:d,cameraPosCommon:f,shaderCoordinateOrigin:_,geospatialOrigin:g}}function g({viewport:t,devicePixelRatio:e=1,modelMatrix:i=null,coordinateSystem:n=r.Df.DEFAULT,coordinateOrigin:o=l,autoWrapLongitude:s=!1}){n===r.Df.DEFAULT&&(n=t.isGeospatial?r.Df.LNGLAT:r.Df.CARTESIAN);const a=d({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:o});return a.project_uWrapLongitude=s,a.project_uModelMatrix=i||u,a}function _({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:n}){const{projectionCenter:s,viewProjectionMatrix:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:d,geospatialOrigin:p}=f(t,i,n),g=t.getDistanceScales(),_=[t.width*e,t.height*e],m=o.fF([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,v={project_uCoordinateSystem:i,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:d,project_uCommonOrigin:c.slice(0,3),project_uCenter:s,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:_,project_uDevicePixelRatio:e,project_uFocalDistance:m,project_uCommonUnitsPerMeter:g.unitsPerMeter,project_uCommonUnitsPerWorldUnit:g.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:h,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:a,project_uModelMatrix:u,project_uCameraPosition:l};if(p){const e=t.getDistanceScales(p);switch(i){case r.Df.METER_OFFSETS:v.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,v.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case r.Df.LNGLAT:case r.Df.LNGLAT_OFFSETS:t._pseudoMeters||(v.project_uCommonUnitsPerMeter=e.unitsPerMeter),v.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,v.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case r.Df.CARTESIAN:v.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],v.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]];break;default:break}}return v}},93844:function(t,e,i){var n=i(89668);const o="\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n";e["Z"]={name:"project32",dependencies:[n.Z],vs:o}},33115:function(t,e,i){var n=i(24088),o=i(89668),r=i(85451),s=i(43855),a=i(88177),c=i(78866);const u="\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",h="\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",l=(0,a.Z)(_),d=(0,a.Z)(m),p=[0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function g(t,e){const[i,n,o]=t,r=(0,c.CT)([i,n,o],e);return Number.isFinite(o)?r:[r[0],r[1],0]}function _({viewport:t,center:e}){return new r.Z(t.viewProjectionMatrix).invert().transform(e)}function m({viewport:t,shadowMatrices:e}){const i=[],n=t.pixelUnprojectionMatrix,o=t.isGeospatial?void 0:1,a=[[0,0,o],[t.width,0,o],[0,t.height,o],[t.width,t.height,o],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((t=>g(t,n)));for(const c of e){const e=c.clone().translate(new s.Z(t.center).negate()),n=a.map((t=>e.transform(t))),o=(new r.Z).ortho({left:Math.min(...n.map((t=>t[0]))),right:Math.max(...n.map((t=>t[0]))),bottom:Math.min(...n.map((t=>t[1]))),top:Math.max(...n.map((t=>t[1]))),near:Math.min(...n.map((t=>-t[2]))),far:Math.max(...n.map((t=>-t[2])))});i.push(o.multiplyRight(c))}return i}function v(t,e){const{shadowEnabled:i=!0}=t;if(!i||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const o={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||p,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=l({viewport:t.viewport,center:e.project_uCenter}),a=[],c=d({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let u=0;u<t.shadowMatrices.length;u++){const i=c[u],o=i.clone().translate(new s.Z(t.viewport.center).negate());e.project_uCoordinateSystem===n.Df.LNGLAT&&e.project_uProjectionMode===n.zG.WEB_MERCATOR?(c[u]=o,a[u]=r):(c[u]=i.clone().multiplyRight(f),a[u]=o.transform(r))}for(let n=0;n<c.length;n++)o["shadow_uViewProjectionMatrices[".concat(n,"]")]=c[n],o["shadow_uProjectCenters[".concat(n,"]")]=a[n],t.shadowMaps&&t.shadowMaps.length>0?o["shadow_uShadowMap".concat(n)]=t.shadowMaps[n]:o["shadow_uShadowMap".concat(n)]=t.dummyShadowMap;return o}e["Z"]={name:"shadow",dependencies:[o.Z],vs:u,fs:h,inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?v(t,e):{}}},20198:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(82482),o=i(53478),r=i(19718),s=i(13906),a=i(91619),c=i(53630);class u{constructor({gl:t,attribute:e,timeline:i}){(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"type","interpolation"),(0,n.Z)(this,"attributeInTransition",void 0),(0,n.Z)(this,"settings",void 0),(0,n.Z)(this,"attribute",void 0),(0,n.Z)(this,"transition",void 0),(0,n.Z)(this,"currentStartIndices",void 0),(0,n.Z)(this,"currentLength",void 0),(0,n.Z)(this,"transform",void 0),(0,n.Z)(this,"buffers",void 0),this.gl=t,this.transition=new c.Z(i),this.attribute=e,this.attributeInTransition=new s.Z(t,e.settings),this.currentStartIndices=e.startIndices,this.currentLength=0,this.transform=l(t,e);const r={byteLength:0,usage:35050};this.buffers=[new o.Z(t,r),new o.Z(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:i,buffers:n,attribute:o}=this;(0,a.DY)(n);const r={numInstances:e,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of n)(0,a.IV)({buffer:s,...r});this.currentStartIndices=o.startIndices,this.currentLength=(0,a.pi)(o,e),this.attributeInTransition.setData({buffer:n[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:n[0],aTo:(0,a.AQ)(i,o)},feedbackBuffers:{vCurrent:n[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:i}=this.transition;let n=i/t;e&&(n=e(n)),this.transform.run({uniforms:{time:n}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const h="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function l(t,e){const i=(0,a.w)(e.size);return new r.Z(t,{vs:h,defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"]})}},7563:function(t,e,i){i.d(e,{Z:function(){return d}});var n=i(82482),o=i(53478),r=i(81913),s=i(19718),a=i(51621),c=i(53849),u=i(91619),h=i(13906),l=i(53630);class d{constructor({gl:t,attribute:e,timeline:i}){(0,n.Z)(this,"gl",void 0),(0,n.Z)(this,"type","spring"),(0,n.Z)(this,"attributeInTransition",void 0),(0,n.Z)(this,"settings",void 0),(0,n.Z)(this,"attribute",void 0),(0,n.Z)(this,"transition",void 0),(0,n.Z)(this,"currentStartIndices",void 0),(0,n.Z)(this,"currentLength",void 0),(0,n.Z)(this,"texture",void 0),(0,n.Z)(this,"framebuffer",void 0),(0,n.Z)(this,"transform",void 0),(0,n.Z)(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new l.Z(i),this.attribute=e,this.attributeInTransition=new h.Z(t,{...e.settings,normalized:!1}),this.currentStartIndices=e.startIndices,this.currentLength=0,this.texture=f(t),this.framebuffer=g(t,this.texture),this.transform=p(t,e,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new o.Z(t,r),new o.Z(t,r),new o.Z(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:i,buffers:n,attribute:o}=this,r={numInstances:e,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of n)(0,u.IV)({buffer:s,...r});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=(0,u.pi)(o,e),this.attributeInTransition.setData({buffer:n[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:(0,u.AQ)(i,o)}})}update(){const{buffers:t,transform:e,framebuffer:i,transition:n}=this,o=n.update();if(!o)return!1;const s=this.settings;e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),(0,u.DY)(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value});const a=(0,r.z6)(i)[0]>0;return a||n.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function p(t,e,i){const n=(0,u.w)(e.size);return new s.Z(t,{framebuffer:i,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function f(t){return new a.Z(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function g(t,e){return new c.Z(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}},71958:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(82482),o=i(14034),r=i(75304);class s{constructor(t){(0,n.Z)(this,"_propsToCompare",void 0),(0,n.Z)(this,"_propsToExtract",void 0),(0,n.Z)(this,"_requiredProps",void 0);const{compare:e,extract:i,required:o}=t;this._propsToCompare=e,this._propsToExtract=i||e,this._requiredProps=o}arePropsEqual(t,e){for(const i of this._propsToCompare)if(!(i in t)||!(i in e)||!(0,o.fS)(t[i],e[i]))return!1;return!0}initializeProps(t,e){const i={},n={};for(const o of this._propsToExtract)(o in t||o in e)&&(i[o]=t[o],n[o]=e[o]);return this._checkRequiredProps(i),this._checkRequiredProps(n),{start:i,end:n}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const i=t[e];(0,r.Z)(Number.isFinite(i)||Array.isArray(i),"".concat(e," is required for transition"))}))}}const a=["longitude","latitude","zoom","bearing","pitch"],c=["longitude","latitude","zoom"];class u extends s{constructor(t={}){const e=Array.isArray(t)?t:t.transitionProps,i=Array.isArray(t)?{}:t;i.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:a,required:c},super(i.transitionProps),(0,n.Z)(this,"opts",void 0),this.opts=i}initializeProps(t,e){const i=super.initializeProps(t,e),{makeViewport:n,around:o}=this.opts;if(n&&o){const r=n(t),s=n(e),a=r.unproject(o);i.start.around=o,Object.assign(i.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return i}interpolateProps(t,e,i){const n={};for(const r of this._propsToExtract)n[r]=(0,o.t7)(t[r]||0,e[r]||0,i);if(e.aroundPosition&&this.opts.makeViewport){const r=this.opts.makeViewport({...e,...n});Object.assign(n,r.panByPosition(e.aroundPosition,(0,o.t7)(t.around,e.around,i)))}return n}}},53630:function(t,e,i){i.d(e,{Z:function(){return o}});var n=i(82482);class o{constructor(t){(0,n.Z)(this,"_inProgress",void 0),(0,n.Z)(this,"_handle",void 0),(0,n.Z)(this,"_timeline",void 0),(0,n.Z)(this,"time",void 0),(0,n.Z)(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,i;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(i=this.settings).onStart)||void 0===e||e.call(i,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}},49440:function(t,e,i){function n(t){const{source:e,target:i,start:n=0,size:o,getData:r}=t,s=t.end||i.length,a=e.length,c=s-n;if(a>c)return void i.set(e.subarray(0,c),n);if(i.set(e,n),!r)return;let u=a;while(u<c){const t=r(u,e);for(let e=0;e<o;e++)i[n+u]=t[e]||0,u++}}function o({source:t,target:e,size:i,getData:o,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return n({source:t,target:e,size:i,getData:o}),e;let a=0,c=0;const u=o&&((t,e)=>o(t+c,e)),h=Math.min(r.length,s.length);for(let l=1;l<h;l++){const o=r[l]*i,h=s[l]*i;n({source:t.subarray(a,o),target:e,start:c,end:h,size:i,getData:u}),a=o,c=h}return c<e.length&&n({source:[],target:e,start:c,size:i,getData:u}),e}i.d(e,{T:function(){return o}})},75304:function(t,e,i){function n(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}i.d(e,{Z:function(){return n}})},75015:function(t,e,i){i.d(e,{Q:function(){return r}});const n="count(): argument not an object",o="count(): argument not a container";function r(t){if(!a(t))throw new Error(n);if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(s(t))return Object.keys(t).length;throw new Error(o)}function s(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function a(t){return null!==t&&"object"===typeof t}},46871:function(t,e,i){function n(t,e,i){if(t===e)return!0;if(!i||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!n(t[o],e[o],i-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const o=Object.keys(t),r=Object.keys(e);if(o.length!==r.length)return!1;for(const s of o){if(!e.hasOwnProperty(s))return!1;if(!n(t[s],e[s],i-1))return!1}return!0}return!1}i.d(e,{v:function(){return n}})},61855:function(t,e,i){function n(t,e=(()=>!0)){return Array.isArray(t)?o(t,e,[]):e(t)?[t]:[]}function o(t,e,i){let n=-1;while(++n<t.length){const r=t[n];Array.isArray(r)?o(r,e,i):e(r)&&i.push(r)}return i}function r({target:t,source:e,start:i=0,count:n=1}){const o=e.length,r=n*o;let s=0;for(let a=i;s<o;s++)t[a++]=e[s];while(s<r)s<r-s?(t.copyWithin(i+s,i,i+s),s*=2):(t.copyWithin(i+s,i,i+r-s),s=r);return t}i.d(e,{k:function(){return r},x:function(){return n}})},38550:function(t,e,i){i.d(e,{D0:function(){return s},jB:function(){return r},jr:function(){return a}});const n=[],o=[];function r(t,e=0,i=1/0){let r=n;const s={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?r=t:t.length>0&&(o.length=t.length,r=o):r=n,(e>0||Number.isFinite(i))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,i),s.index=e-1),{iterable:r,objectInfo:s}}function s(t){return t&&t[Symbol.asyncIterator]}function a(t,e){const{size:i,stride:n,offset:o,startIndices:r,nested:s}=e,a=t.BYTES_PER_ELEMENT,c=n?n/a:i,u=o?o/a:0,h=Math.floor((t.length-u)/c);return(e,{index:n,target:o})=>{if(!r){const e=n*c+u;for(let n=0;n<i;n++)o[n]=t[e+n];return o}const a=r[n],l=r[n+1]||h;let d;if(s){d=new Array(l-a);for(let e=a;e<l;e++){const n=e*c+u;o=new Array(i);for(let e=0;e<i;e++)o[e]=t[n+e];d[e-a]=o}}else if(c===i)d=t.subarray(a*i+u,l*i+u);else{d=new t.constructor((l-a)*i);let e=0;for(let n=a;n<l;n++){const o=n*c+u;for(let n=0;n<i;n++)d[e++]=t[o+n]}}return d}}},6610:function(t,e){function i(t){const e=t[0],i=t[t.length-1];return"{"===e&&"}"===i||"["===e&&"]"===i}e["Z"]={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:i,parseTextSync:JSON.parse}},80744:function(t,e,i){var n=i(56426);e["Z"]=new n.Z({id:"deck"})},75126:function(t,e,i){i.d(e,{Du:function(){return a},TK:function(){return d},Xt:function(){return s},bS:function(){return r},cc:function(){return p}});var n=i(36610),o=i(43855);function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function s(t){return[t[12],t[13],t[14]]}function a(t){return{left:u(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:u(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:u(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:u(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:u(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:u(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const c=new o.Z;function u(t,e,i,n){c.set(t,e,i);const r=c.len();return{distance:n/r,normal:new o.Z(-t/r,-e/r,-i/r)}}function h(t){return t-Math.fround(t)}let l;function d(t,e){const{size:i=1,startIndex:o=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,s=(r-o)/i;l=n.Z.allocate(l,s,{type:Float32Array,size:2*i});let a=o,c=0;while(a<r){for(let e=0;e<i;e++){const n=t[a++];l[c+e]=n,l[c+e+i]=h(n)}c+=2*i}return l.subarray(0,s*i*2)}function p(t){let e=null,i=!1;for(const n of t)n&&(e?(i||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],i=!0),e[0][0]=Math.min(e[0][0],n[0][0]),e[0][1]=Math.min(e[0][1],n[0][1]),e[1][0]=Math.max(e[1][0],n[1][0]),e[1][1]=Math.max(e[1][1],n[1][1])):e=n);return e}},88177:function(t,e,i){function n(t,e){if(t===e)return!0;if(Array.isArray(t)){const i=t.length;if(!e||e.length!==i)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}return!1}function o(t){let e,i={};return o=>{for(const r in o)if(!n(o[r],i[r])){e=t(o),i=o;break}return e}}i.d(e,{Z:function(){return o}})},47586:function(t,e,i){i.d(e,{E_:function(){return n},IH:function(){return r},KO:function(){return o}});const n=[],o=[[0,1/0]];function r(t,e){if(t===o)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const i=[],n=t.length;let r=0;for(let o=0;o<n;o++){const n=t[o];n[1]<e[0]?(i.push(n),r=o+1):n[0]>e[1]?i.push(n):e=[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}return i.splice(r,0,e),i}},27870:function(t,e,i){function n(t,e){if(!e)return t;const i={...t,...e};if("defines"in e&&(i.defines={...t.defines,...e.defines}),"modules"in e&&(i.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=i.modules.findIndex((t=>"project32"===t.name));t>=0&&i.modules.splice(t,1)}if("inject"in e)if(t.inject){const n={...t.inject};for(const t in e.inject)n[t]=(n[t]||"")+e.inject[t];i.inject=n}else i.inject=e.inject;return i}i.d(e,{l:function(){return n}})},28005:function(t,e,i){i.d(e,{Z:function(){return c}});var n=i(82482),o=i(38550),r=i(36610),s=i(75304),a=i(53478);class c{constructor(t){(0,n.Z)(this,"opts",void 0),(0,n.Z)(this,"typedArrayManager",void 0),(0,n.Z)(this,"indexStarts",[0]),(0,n.Z)(this,"vertexStarts",[0]),(0,n.Z)(this,"vertexCount",0),(0,n.Z)(this,"instanceCount",0),(0,n.Z)(this,"attributes",void 0),(0,n.Z)(this,"_attributeDefs",void 0),(0,n.Z)(this,"data",void 0),(0,n.Z)(this,"getGeometry",void 0),(0,n.Z)(this,"geometryBuffer",void 0),(0,n.Z)(this,"buffers",void 0),(0,n.Z)(this,"positionSize",void 0),(0,n.Z)(this,"normalize",void 0);const{attributes:e={}}=t;this.typedArrayManager=r.Z,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:i={},getGeometry:n,geometryBuffer:o,positionFormat:r,dataChanged:a,normalize:c=!0}=this.opts;if(this.data=e,this.getGeometry=n,this.positionSize=o&&o.size||("XY"===r?2:3),this.buffers=i,this.normalize=c,o&&((0,s.Z)(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),c||(i.positions=o)),this.geometryBuffer=i.positions,Array.isArray(a))for(const s of a)this._rebuildGeometry(s);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?(0,o.jr)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:i,buffers:n,_attributeDefs:o,typedArrayManager:r}=this;for(const s in o)if(s in n)r.release(i[s]),i[s]=null;else{const n=o[s];n.copy=e,i[s]=r.allocate(i[s],t,n)}}_forEachGeometry(t,e,i){const{data:n,getGeometry:r}=this,{iterable:s,objectInfo:a}=(0,o.jB)(n,e,i);for(const o of s){a.index++;const e=r?r(o,a):null;t(e,a.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:i,instanceCount:n}=this;const{data:o,geometryBuffer:r}=this,{startRow:s=0,endRow:c=1/0}=t||{},u={};if(t||(e=[0],i=[0]),this.normalize||!r)this._forEachGeometry(((t,e)=>{const n=t&&this.normalizeGeometry(t);u[e]=n,i[e+1]=i[e]+(n?this.getGeometrySize(n):0)}),s,c),n=i[i.length-1];else if(i=o.startIndices,n=i[o.length]||0,ArrayBuffer.isView(r))n=n||r.length/this.positionSize;else if(r instanceof a.Z){const t=r.accessor.stride||4*this.positionSize;n=n||r.byteLength/t}else if(r.buffer){const t=r.stride||4*this.positionSize;n=n||r.buffer.byteLength/t}else if(r.value){const t=r.value,e=r.stride/t.BYTES_PER_ELEMENT||this.positionSize;n=n||t.length/e}this._allocate(n,Boolean(t)),this.indexStarts=e,this.vertexStarts=i,this.instanceCount=n;const h={};this._forEachGeometry(((t,o)=>{const r=u[o]||t;h.vertexStart=i[o],h.indexStart=e[o];const s=o<i.length-1?i[o+1]:n;h.geometrySize=s-i[o],h.geometryIndex=o,this.updateGeometryAttributes(r,h)}),s,c),this.vertexCount=e[e.length-1]}}},36610:function(t,e,i){var n=i(82482);class o{constructor(t={}){(0,n.Z)(this,"_pool",[]),(0,n.Z)(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,{size:i=1,type:n,padding:o=0,copy:r=!1,initialize:s=!1,maxCount:a}){const c=n||t&&t.constructor||Float32Array,u=e*i+o;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new c(t.buffer,0,u)}let h=1/0;a&&(h=a*i+o);const l=this._allocate(c,u,s,h);return t&&r?l.set(t):s||l.fill(0,0,4),this._release(t),l}release(t){this._release(t)}_allocate(t,e,i,n){let o=Math.max(Math.ceil(e*this.opts.overAlloc),1);o>n&&(o=n);const r=this._pool,s=t.BYTES_PER_ELEMENT*o,a=r.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(r.splice(a,1)[0],0,o);return i&&e.fill(0),e}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:i}=t,{byteLength:n}=i,o=e.findIndex((t=>t.byteLength>=n));o<0?e.push(i):(o>0||e.length<this.opts.poolSize)&&e.splice(o,0,i),e.length>this.opts.poolSize&&e.shift()}}e["Z"]=new o},73131:function(t,e,i){i.d(e,{Z:function(){return f}});var n=i(82482),o=i(85451),r=i(7013),s=i(24088),a=i(77160),c=i(98333);const u=Math.PI/180,h=180/Math.PI,l=6370972,d=256;function p(){const t=d/l,e=Math.PI/180*d;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class f extends r.Z{constructor(t={}){const{latitude:e=0,longitude:i=0,zoom:r=0,nearZMultiplier:s=.1,farZMultiplier:a=2,resolution:c=10}=t;let{height:h,altitude:l=1.5}=t;h=h||1,l=Math.max(.75,l);const f=(new o.Z).lookAt({eye:[0,-l,0],up:[0,0,1]}),g=Math.pow(2,r);f.rotateX(e*u),f.rotateZ(-i*u),f.scale(g/h);const _=Math.atan(.5/l),m=2*d*g/h;super({...t,height:h,viewMatrix:f,longitude:i,latitude:e,zoom:r,distanceScales:p(),fovyRadians:2*_,focalDistance:l,near:s,far:Math.min(2,1/m+1)*l*a}),(0,n.Z)(this,"longitude",void 0),(0,n.Z)(this,"latitude",void 0),(0,n.Z)(this,"resolution",void 0),this.latitude=e,this.longitude=i,this.resolution=c}get projectionMode(){return s.zG.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const e={targetZ:t.z||0},i=this.unproject([0,this.height/2],e),n=this.unproject([this.width/2,0],e),o=this.unproject([this.width,this.height/2],e),r=this.unproject([this.width/2,this.height],e);return o[0]<this.longitude&&(o[0]+=360),i[0]>this.longitude&&(i[0]-=360),[Math.min(i[0],o[0],n[0],r[0]),Math.min(i[1],o[1],n[1],r[1]),Math.max(i[0],o[0],n[0],r[0]),Math.max(i[1],o[1],n[1],r[1])]}unproject(t,{topLeft:e=!0,targetZ:i}={}){const[n,o,r]=t,s=e?o:this.height-o,{pixelUnprojectionMatrix:c}=this;let u;if(Number.isFinite(r))u=g(c,[n,s,r,1]);else{const t=g(c,[n,s,-1,1]),e=g(c,[n,s,1,1]),o=((i||0)/l+1)*d,r=a.x9(a.lu([],t,e)),h=a.x9(t),p=a.x9(e),f=(4*h*p-(r-h-p)**2)/16,_=4*f/r,m=Math.sqrt(h-_),v=Math.sqrt(Math.max(0,o*o-_)),w=(m-v)/Math.sqrt(r);u=a.t7([],t,e,w)}const[h,p,f]=this.unprojectPosition(u);return Number.isFinite(r)?[h,p,f]:Number.isFinite(i)?[h,p,i]:[h,p]}projectPosition(t){const[e,i,n=0]=t,o=e*u,r=i*u,s=Math.cos(r),a=(n/l+1)*d;return[Math.sin(o)*s*a,-Math.cos(o)*s*a,Math.sin(r)*a]}unprojectPosition(t){const[e,i,n]=t,o=a.Zh(t),r=Math.asin(n/o),s=Math.atan2(e,-i),c=s*h,u=r*h,p=(o/d-1)*l;return[c,u,p]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const i=this.unproject(e);return{longitude:t[0]-i[0]+this.longitude,latitude:t[1]-i[1]+this.latitude}}}function g(t,e){const i=c.fF([],e,t);return c.bA(i,i,1/i[3]),i}},7013:function(t,e,i){i.d(e,{Z:function(){return m}});var n=i(82482),o=i(80744),r=i(75126),s=i(85451),a=i(14034),c=i(43855),u=i(85975),h=i(78866),l=i(24088);const d=Math.PI/180,p=(0,r.bS)(),f=[0,0,0],g={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function _({width:t,height:e,orthographic:i,fovyRadians:n,focalDistance:o,padding:r,near:c,far:u}){const h=t/e,l=i?(new s.Z).orthographic({fovy:n,aspect:h,focalDistance:o,near:c,far:u}):(new s.Z).perspective({fovy:n,aspect:h,near:c,far:u});if(r){const{left:i=0,right:n=0,top:o=0,bottom:s=0}=r,c=(0,a.uZ)((i+t-n)/2,0,t)-t/2,u=(0,a.uZ)((o+e-s)/2,0,e)-e/2;l[8]-=2*c/t,l[9]+=2*u/e}return l}class m{constructor(t={}){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"x",void 0),(0,n.Z)(this,"y",void 0),(0,n.Z)(this,"width",void 0),(0,n.Z)(this,"height",void 0),(0,n.Z)(this,"padding",void 0),(0,n.Z)(this,"isGeospatial",void 0),(0,n.Z)(this,"zoom",void 0),(0,n.Z)(this,"focalDistance",void 0),(0,n.Z)(this,"position",void 0),(0,n.Z)(this,"modelMatrix",void 0),(0,n.Z)(this,"distanceScales",void 0),(0,n.Z)(this,"scale",void 0),(0,n.Z)(this,"center",void 0),(0,n.Z)(this,"cameraPosition",void 0),(0,n.Z)(this,"projectionMatrix",void 0),(0,n.Z)(this,"viewMatrix",void 0),(0,n.Z)(this,"viewMatrixUncentered",void 0),(0,n.Z)(this,"viewMatrixInverse",void 0),(0,n.Z)(this,"viewProjectionMatrix",void 0),(0,n.Z)(this,"pixelProjectionMatrix",void 0),(0,n.Z)(this,"pixelUnprojectionMatrix",void 0),(0,n.Z)(this,"resolution",void 0),(0,n.Z)(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||g,this.focalDistance=t.focalDistance||1,this.position=t.position||f,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:i}=t;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?l.zG.WEB_MERCATOR:l.zG.WEB_MERCATOR_AUTO_OFFSET:l.zG.IDENTITY}equals(t){return t instanceof m&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&(0,a.fS)(t.projectionMatrix,this.projectionMatrix)&&(0,a.fS)(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:e=!0}={}){const i=this.projectPosition(t),n=(0,h.aW)(i,this.pixelProjectionMatrix),[o,r]=n,s=e?r:this.height-r;return 2===t.length?[o,s]:[o,s,n[2]]}unproject(t,{topLeft:e=!0,targetZ:i}={}){const[n,o,r]=t,s=e?o:this.height-o,a=i&&i*this.distanceScales.unitsPerMeter[2],c=(0,h.CT)([n,s,r],this.pixelUnprojectionMatrix,a),[u,l,d]=this.unprojectPosition(c);return Number.isFinite(r)?[u,l,d]:Number.isFinite(i)?[u,l,i]:[u,l]}projectPosition(t){const[e,i]=this.projectFlat(t),n=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[e,i,n]}unprojectPosition(t){const[e,i]=this.unprojectFlat(t),n=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[e,i,n]}projectFlat(t){if(this.isGeospatial){const e=(0,h.w5)(t);return e[1]=(0,a.uZ)(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?(0,h.es)(t):t}getBounds(t={}){const e={targetZ:t.z||0},i=this.unproject([0,0],e),n=this.unproject([this.width,0],e),o=this.unproject([0,this.height],e),r=this.unproject([this.width,this.height],e);return[Math.min(i[0],n[0],o[0],r[0]),Math.min(i[1],n[1],o[1],r[1]),Math.max(i[0],n[0],o[0],r[0]),Math.max(i[1],n[1],o[1],r[1])]}getDistanceScales(t){return t?(0,h.ro)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:e,width:i=1,height:n=1}){return t<this.x+this.width&&this.x<t+i&&e<this.y+this.height&&this.y<e+n}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(0,r.Du)(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,i=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=(0,h.Bf)({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||(0,h.ro)({latitude:i,longitude:e}));const n=Math.pow(2,this.zoom);this.scale=n;const{position:o,modelMatrix:r}=t;let a=f;if(o&&(a=r?new s.Z(r).transformAsVector(o,[]):o),this.isGeospatial){const t=this.projectPosition([e,i,0]);this.center=new c.Z(a).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(a)}_initMatrices(t){const{viewMatrix:e=p,projectionMatrix:i=null,orthographic:n=!1,fovyRadians:a,fovy:h=75,near:l=.1,far:f=1e3,padding:g=null,focalDistance:m=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new s.Z).multiplyRight(e).translate(new c.Z(this.center).negate()),this.projectionMatrix=i||_({width:this.width,height:this.height,orthographic:n,fovyRadians:a||h*d,focalDistance:m,padding:g,near:l,far:f});const v=(0,r.bS)();u.Jp(v,v,this.projectionMatrix),u.Jp(v,v,this.viewMatrix),this.viewProjectionMatrix=v,this.viewMatrixInverse=u.U_([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=(0,r.Xt)(this.viewMatrixInverse);const w=(0,r.bS)(),y=(0,r.bS)();u.bA(w,w,[this.width/2,-this.height/2,1]),u.Iu(w,w,[1,-1,0]),u.Jp(y,w,this.viewProjectionMatrix),this.pixelProjectionMatrix=y,this.pixelUnprojectionMatrix=u.U_((0,r.bS)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||o.Z.warn("Pixel project matrix not invertible")()}}(0,n.Z)(m,"displayName","Viewport")},96935:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(82482),o=i(7013),r=i(78866),s=i(31437),a=i(14034),c=i(85451);class u extends o.Z{constructor(t={}){const{latitude:e=0,longitude:i=0,zoom:o=0,pitch:s=0,bearing:u=0,nearZMultiplier:h=.1,farZMultiplier:l=1.01,orthographic:d=!1,projectionMatrix:p,repeat:f=!1,worldOffset:g=0,position:_,padding:m,legacyMeterSizes:v=!1}=t;let{width:w,height:y,altitude:P=1.5}=t;const b=Math.pow(2,o);let j;w=w||1,y=y||1;let M=null;if(p)P=p[5]/2,j=(0,r.Lu)(P);else{let i;if(t.fovy?(j=t.fovy,P=(0,r.sj)(j)):j=(0,r.Lu)(P),m){const{top:t=0,bottom:e=0}=m;i=[0,(0,a.uZ)((t+y-e)/2,0,y)-y/2]}M=(0,r.wl)({width:w,height:y,scale:b,center:_&&[0,0,_[2]*(0,r.NC)(e)],offset:i,pitch:s,fovy:j,nearZMultiplier:h,farZMultiplier:l})}let x=(0,r.lf)({height:y,pitch:s,bearing:u,scale:b,altitude:P});if(g){const t=(new c.Z).translate([512*g,0,0]);x=t.multiplyLeft(x)}super({...t,width:w,height:y,viewMatrix:x,longitude:i,latitude:e,zoom:o,...M,fovy:j,focalDistance:P}),(0,n.Z)(this,"longitude",void 0),(0,n.Z)(this,"latitude",void 0),(0,n.Z)(this,"pitch",void 0),(0,n.Z)(this,"bearing",void 0),(0,n.Z)(this,"altitude",void 0),(0,n.Z)(this,"fovy",void 0),(0,n.Z)(this,"orthographic",void 0),(0,n.Z)(this,"_subViewports",void 0),(0,n.Z)(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=i,this.zoom=o,this.pitch=s,this.bearing=u,this.altitude=P,this.fovy=j,this.orthographic=d,this._subViewports=f?[]:null,this._pseudoMeters=v,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),i=Math.ceil((t[2]-180)/360);for(let n=e;n<=i;n++){const t=n?new u({...this,worldOffset:n}):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,i]=this.projectFlat(t),n=(t[2]||0)*(0,r.NC)(t[1]);return[e,i,n]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,i]=this.unprojectFlat(t),n=(t[2]||0)/(0,r.NC)(i);return[e,i,n]}addMetersToLngLat(t,e){return(0,r.eG)(t,e)}panByPosition(t,e){const i=(0,r.CT)(e,this.pixelUnprojectionMatrix),n=this.projectFlat(t),o=s.IH([],n,s.tk([],i)),a=s.IH([],this.center,o),[c,u]=this.unprojectFlat(a);return{longitude:c,latitude:u}}getBounds(t={}){const e=(0,r.zX)(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(t,e={}){const{width:i,height:n}=this,{longitude:o,latitude:s,zoom:a}=(0,r.Xg)({width:i,height:n,bounds:t,...e});return new u({width:i,height:n,longitude:o,latitude:s,zoom:a})}}(0,n.Z)(u,"displayName","WebMercatorViewport")},56602:function(t,e,i){i.d(e,{Z:function(){return p}});var n=i(82482),o=i(7013);const r=/([0-9]+\.?[0-9]*)(%|px)/;function s(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=r.exec(t);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function a(t,e){return t.relative?Math.round(t.position*e):t.position}var c=i(46871),u=i(75304);class h{constructor(t){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"viewportInstance",void 0),(0,n.Z)(this,"_x",void 0),(0,n.Z)(this,"_y",void 0),(0,n.Z)(this,"_width",void 0),(0,n.Z)(this,"_height",void 0),(0,n.Z)(this,"_padding",void 0),(0,n.Z)(this,"props",void 0);const{id:e,x:i=0,y:r=0,width:a="100%",height:c="100%",padding:h=null,viewportInstance:l}=t||{};(0,u.Z)(!l||l instanceof o.Z),this.viewportInstance=l,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=s(i),this._y=s(r),this._width=s(a),this._height=s(c),this._padding=h&&{left:s(h.left||0),right:s(h.right||0),top:s(h.top||0),bottom:s(h.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&(0,c.v)(this.props,t.props,2))}makeViewport({width:t,height:e,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const n=this.getDimensions({width:t,height:e});return new this.ViewportType({...i,...this.props,...n})}getViewStateId(){const{viewState:t}=this.props;return"string"===typeof t?t:(null===t||void 0===t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:e}){const i={x:a(this._x,t),y:a(this._y,e),width:a(this._width,t),height:a(this._height,e)};return this._padding&&(i.padding={left:a(this._padding.left,t),top:a(this._padding.top,e),right:a(this._padding.right,t),bottom:a(this._padding.bottom,e)}),i}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"===typeof t?{type:t}:{type:this.ControllerType,...t}:null}}var l=i(96935),d=i(68990);class p extends h{get ViewportType(){return l.Z}get ControllerType(){return d.Z}}(0,n.Z)(p,"displayName","MapView")}}]);
//# sourceMappingURL=chunk-vendors-268e90f7-legacy.6ea927f7.js.map