"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[1830],{87838:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"I5\": function() { return /* binding */ processPickInfo; },\n/* harmony export */   \"iD\": function() { return /* binding */ getLayerPickingInfo; },\n/* harmony export */   \"wy\": function() { return /* binding */ getEmptyPickingInfo; }\n/* harmony export */ });\nfunction getEmptyPickingInfo({\n  pickInfo,\n  viewports,\n  pixelRatio,\n  x,\n  y,\n  z\n}) {\n  let pickedViewport = viewports[0];\n\n  if (viewports.length > 1) {\n    pickedViewport = getViewportFromCoordinates((pickInfo === null || pickInfo === void 0 ? void 0 : pickInfo.pickedViewports) || viewports, {\n      x,\n      y\n    });\n  }\n\n  let coordinate;\n\n  if (pickedViewport) {\n    const point = [x - pickedViewport.x, y - pickedViewport.y];\n\n    if (z !== undefined) {\n      point[2] = z;\n    }\n\n    coordinate = pickedViewport.unproject(point);\n  }\n\n  return {\n    color: null,\n    layer: null,\n    viewport: pickedViewport,\n    index: -1,\n    picked: false,\n    x,\n    y,\n    pixel: [x, y],\n    coordinate,\n    devicePixel: pickInfo && 'pickedX' in pickInfo ? [pickInfo.pickedX, pickInfo.pickedY] : undefined,\n    pixelRatio\n  };\n}\nfunction processPickInfo(opts) {\n  const {\n    pickInfo,\n    lastPickedInfo,\n    mode,\n    layers\n  } = opts;\n  const {\n    pickedColor,\n    pickedLayer,\n    pickedObjectIndex\n  } = pickInfo;\n  const affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    const lastPickedPixelIndex = lastPickedInfo.index;\n    const lastPickedLayerId = lastPickedInfo.layerId;\n    const pickedLayerId = pickedLayer ? pickedLayer.props.id : null;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedPixelIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        const lastPickedLayer = layers.find(layer => layer.props.id === lastPickedLayerId);\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  const baseInfo = getEmptyPickingInfo(opts);\n  const infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(layer => {\n    let info = { ...baseInfo\n    };\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer,\n      info,\n      mode\n    });\n    const rootLayer = info.layer;\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    infos.set(rootLayer.id, info);\n\n    if (mode === 'hover') {\n      rootLayer.updateAutoHighlight(info);\n    }\n  });\n  return infos;\n}\nfunction getLayerPickingInfo({\n  layer,\n  info,\n  mode\n}) {\n  while (layer && info) {\n    const sourceLayer = info.layer || null;\n    info.sourceLayer = sourceLayer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info,\n      mode,\n      sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel) {\n  for (let i = viewports.length - 1; i >= 0; i--) {\n    const viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel)) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODc4MzguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQyxRQUFRO0FBQzdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9saWIvcGlja2luZy9waWNrLWluZm8uanM/MWU1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0RW1wdHlQaWNraW5nSW5mbyh7XG4gIHBpY2tJbmZvLFxuICB2aWV3cG9ydHMsXG4gIHBpeGVsUmF0aW8sXG4gIHgsXG4gIHksXG4gIHpcbn0pIHtcbiAgbGV0IHBpY2tlZFZpZXdwb3J0ID0gdmlld3BvcnRzWzBdO1xuXG4gIGlmICh2aWV3cG9ydHMubGVuZ3RoID4gMSkge1xuICAgIHBpY2tlZFZpZXdwb3J0ID0gZ2V0Vmlld3BvcnRGcm9tQ29vcmRpbmF0ZXMoKHBpY2tJbmZvID09PSBudWxsIHx8IHBpY2tJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwaWNrSW5mby5waWNrZWRWaWV3cG9ydHMpIHx8IHZpZXdwb3J0cywge1xuICAgICAgeCxcbiAgICAgIHlcbiAgICB9KTtcbiAgfVxuXG4gIGxldCBjb29yZGluYXRlO1xuXG4gIGlmIChwaWNrZWRWaWV3cG9ydCkge1xuICAgIGNvbnN0IHBvaW50ID0gW3ggLSBwaWNrZWRWaWV3cG9ydC54LCB5IC0gcGlja2VkVmlld3BvcnQueV07XG5cbiAgICBpZiAoeiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBwb2ludFsyXSA9IHo7XG4gICAgfVxuXG4gICAgY29vcmRpbmF0ZSA9IHBpY2tlZFZpZXdwb3J0LnVucHJvamVjdChwb2ludCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvbG9yOiBudWxsLFxuICAgIGxheWVyOiBudWxsLFxuICAgIHZpZXdwb3J0OiBwaWNrZWRWaWV3cG9ydCxcbiAgICBpbmRleDogLTEsXG4gICAgcGlja2VkOiBmYWxzZSxcbiAgICB4LFxuICAgIHksXG4gICAgcGl4ZWw6IFt4LCB5XSxcbiAgICBjb29yZGluYXRlLFxuICAgIGRldmljZVBpeGVsOiBwaWNrSW5mbyAmJiAncGlja2VkWCcgaW4gcGlja0luZm8gPyBbcGlja0luZm8ucGlja2VkWCwgcGlja0luZm8ucGlja2VkWV0gOiB1bmRlZmluZWQsXG4gICAgcGl4ZWxSYXRpb1xuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NQaWNrSW5mbyhvcHRzKSB7XG4gIGNvbnN0IHtcbiAgICBwaWNrSW5mbyxcbiAgICBsYXN0UGlja2VkSW5mbyxcbiAgICBtb2RlLFxuICAgIGxheWVyc1xuICB9ID0gb3B0cztcbiAgY29uc3Qge1xuICAgIHBpY2tlZENvbG9yLFxuICAgIHBpY2tlZExheWVyLFxuICAgIHBpY2tlZE9iamVjdEluZGV4XG4gIH0gPSBwaWNrSW5mbztcbiAgY29uc3QgYWZmZWN0ZWRMYXllcnMgPSBwaWNrZWRMYXllciA/IFtwaWNrZWRMYXllcl0gOiBbXTtcblxuICBpZiAobW9kZSA9PT0gJ2hvdmVyJykge1xuICAgIGNvbnN0IGxhc3RQaWNrZWRQaXhlbEluZGV4ID0gbGFzdFBpY2tlZEluZm8uaW5kZXg7XG4gICAgY29uc3QgbGFzdFBpY2tlZExheWVySWQgPSBsYXN0UGlja2VkSW5mby5sYXllcklkO1xuICAgIGNvbnN0IHBpY2tlZExheWVySWQgPSBwaWNrZWRMYXllciA/IHBpY2tlZExheWVyLnByb3BzLmlkIDogbnVsbDtcblxuICAgIGlmIChwaWNrZWRMYXllcklkICE9PSBsYXN0UGlja2VkTGF5ZXJJZCB8fCBwaWNrZWRPYmplY3RJbmRleCAhPT0gbGFzdFBpY2tlZFBpeGVsSW5kZXgpIHtcbiAgICAgIGlmIChwaWNrZWRMYXllcklkICE9PSBsYXN0UGlja2VkTGF5ZXJJZCkge1xuICAgICAgICBjb25zdCBsYXN0UGlja2VkTGF5ZXIgPSBsYXllcnMuZmluZChsYXllciA9PiBsYXllci5wcm9wcy5pZCA9PT0gbGFzdFBpY2tlZExheWVySWQpO1xuXG4gICAgICAgIGlmIChsYXN0UGlja2VkTGF5ZXIpIHtcbiAgICAgICAgICBhZmZlY3RlZExheWVycy51bnNoaWZ0KGxhc3RQaWNrZWRMYXllcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGFzdFBpY2tlZEluZm8ubGF5ZXJJZCA9IHBpY2tlZExheWVySWQ7XG4gICAgICBsYXN0UGlja2VkSW5mby5pbmRleCA9IHBpY2tlZE9iamVjdEluZGV4O1xuICAgICAgbGFzdFBpY2tlZEluZm8uaW5mbyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYmFzZUluZm8gPSBnZXRFbXB0eVBpY2tpbmdJbmZvKG9wdHMpO1xuICBjb25zdCBpbmZvcyA9IG5ldyBNYXAoKTtcbiAgaW5mb3Muc2V0KG51bGwsIGJhc2VJbmZvKTtcbiAgYWZmZWN0ZWRMYXllcnMuZm9yRWFjaChsYXllciA9PiB7XG4gICAgbGV0IGluZm8gPSB7IC4uLmJhc2VJbmZvXG4gICAgfTtcblxuICAgIGlmIChsYXllciA9PT0gcGlja2VkTGF5ZXIpIHtcbiAgICAgIGluZm8uY29sb3IgPSBwaWNrZWRDb2xvcjtcbiAgICAgIGluZm8uaW5kZXggPSBwaWNrZWRPYmplY3RJbmRleDtcbiAgICAgIGluZm8ucGlja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpbmZvID0gZ2V0TGF5ZXJQaWNraW5nSW5mbyh7XG4gICAgICBsYXllcixcbiAgICAgIGluZm8sXG4gICAgICBtb2RlXG4gICAgfSk7XG4gICAgY29uc3Qgcm9vdExheWVyID0gaW5mby5sYXllcjtcblxuICAgIGlmIChsYXllciA9PT0gcGlja2VkTGF5ZXIgJiYgbW9kZSA9PT0gJ2hvdmVyJykge1xuICAgICAgbGFzdFBpY2tlZEluZm8uaW5mbyA9IGluZm87XG4gICAgfVxuXG4gICAgaW5mb3Muc2V0KHJvb3RMYXllci5pZCwgaW5mbyk7XG5cbiAgICBpZiAobW9kZSA9PT0gJ2hvdmVyJykge1xuICAgICAgcm9vdExheWVyLnVwZGF0ZUF1dG9IaWdobGlnaHQoaW5mbyk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGluZm9zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExheWVyUGlja2luZ0luZm8oe1xuICBsYXllcixcbiAgaW5mbyxcbiAgbW9kZVxufSkge1xuICB3aGlsZSAobGF5ZXIgJiYgaW5mbykge1xuICAgIGNvbnN0IHNvdXJjZUxheWVyID0gaW5mby5sYXllciB8fCBudWxsO1xuICAgIGluZm8uc291cmNlTGF5ZXIgPSBzb3VyY2VMYXllcjtcbiAgICBpbmZvLmxheWVyID0gbGF5ZXI7XG4gICAgaW5mbyA9IGxheWVyLmdldFBpY2tpbmdJbmZvKHtcbiAgICAgIGluZm8sXG4gICAgICBtb2RlLFxuICAgICAgc291cmNlTGF5ZXJcbiAgICB9KTtcbiAgICBsYXllciA9IGxheWVyLnBhcmVudDtcbiAgfVxuXG4gIHJldHVybiBpbmZvO1xufVxuXG5mdW5jdGlvbiBnZXRWaWV3cG9ydEZyb21Db29yZGluYXRlcyh2aWV3cG9ydHMsIHBpeGVsKSB7XG4gIGZvciAobGV0IGkgPSB2aWV3cG9ydHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCB2aWV3cG9ydCA9IHZpZXdwb3J0c1tpXTtcblxuICAgIGlmICh2aWV3cG9ydC5jb250YWluc1BpeGVsKHBpeGVsKSkge1xuICAgICAgcmV0dXJuIHZpZXdwb3J0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB2aWV3cG9ydHNbMF07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waWNrLWluZm8uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///87838\n")},96941:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "K": function() { return /* binding */ getUniqueObjects; },\n/* harmony export */   "T": function() { return /* binding */ getClosestObject; }\n/* harmony export */ });\n/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80744);\n\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedObjectIndex: -1\n};\nfunction getClosestObject({\n  pickedColors,\n  decodePickingColor,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = deviceRect;\n  let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n  let closestPixelIndex = -1;\n  let i = 0;\n\n  for (let row = 0; row < height; row++) {\n    const dy = row + y - deviceY;\n    const dy2 = dy * dy;\n\n    if (dy2 > minSquareDistanceToCenter) {\n      i += 4 * width;\n    } else {\n      for (let col = 0; col < width; col++) {\n        const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n        if (pickedLayerIndex >= 0) {\n          const dx = col + x - deviceX;\n          const d2 = dx * dx + dy2;\n\n          if (d2 <= minSquareDistanceToCenter) {\n            minSquareDistanceToCenter = d2;\n            closestPixelIndex = i;\n          }\n        }\n\n        i += 4;\n      }\n    }\n  }\n\n  if (closestPixelIndex >= 0) {\n    const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n    const pickedObject = decodePickingColor(pickedColor);\n\n    if (pickedObject) {\n      const dy = Math.floor(closestPixelIndex / 4 / width);\n      const dx = closestPixelIndex / 4 - dy * width;\n      return { ...pickedObject,\n        pickedColor,\n        pickedX: x + dx,\n        pickedY: y + dy\n      };\n    }\n\n    _utils_log__WEBPACK_IMPORTED_MODULE_0__/* ["default"].error */ .Z.error(\'Picked non-existent layer. Is picking buffer corrupt?\')();\n  }\n\n  return NO_PICKED_OBJECT;\n}\nfunction getUniqueObjects({\n  pickedColors,\n  decodePickingColor\n}) {\n  const uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(\',\');\n\n        if (!uniqueColors.has(colorKey)) {\n          const pickedObject = decodePickingColor(pickedColor);\n\n          if (pickedObject) {\n            uniqueColors.set(colorKey, { ...pickedObject,\n              color: pickedColor\n            });\n          } else {\n            _utils_log__WEBPACK_IMPORTED_MODULE_0__/* ["default"].error */ .Z.error(\'Picked non-existent layer. Is picking buffer corrupt?\')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTY5NDEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sd0JBQXdCLGFBQWE7QUFDckM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksdUVBQVM7QUFDYjs7QUFFQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBLGFBQWE7QUFDYixZQUFZO0FBQ1osWUFBWSx1RUFBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9saWIvcGlja2luZy9xdWVyeS1vYmplY3QuanM/MTY0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJy4uLy4uL3V0aWxzL2xvZyc7XG5jb25zdCBOT19QSUNLRURfT0JKRUNUID0ge1xuICBwaWNrZWRDb2xvcjogbnVsbCxcbiAgcGlja2VkT2JqZWN0SW5kZXg6IC0xXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGdldENsb3Nlc3RPYmplY3Qoe1xuICBwaWNrZWRDb2xvcnMsXG4gIGRlY29kZVBpY2tpbmdDb2xvcixcbiAgZGV2aWNlWCxcbiAgZGV2aWNlWSxcbiAgZGV2aWNlUmFkaXVzLFxuICBkZXZpY2VSZWN0XG59KSB7XG4gIGNvbnN0IHtcbiAgICB4LFxuICAgIHksXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0XG4gIH0gPSBkZXZpY2VSZWN0O1xuICBsZXQgbWluU3F1YXJlRGlzdGFuY2VUb0NlbnRlciA9IGRldmljZVJhZGl1cyAqIGRldmljZVJhZGl1cztcbiAgbGV0IGNsb3Nlc3RQaXhlbEluZGV4ID0gLTE7XG4gIGxldCBpID0gMDtcblxuICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBoZWlnaHQ7IHJvdysrKSB7XG4gICAgY29uc3QgZHkgPSByb3cgKyB5IC0gZGV2aWNlWTtcbiAgICBjb25zdCBkeTIgPSBkeSAqIGR5O1xuXG4gICAgaWYgKGR5MiA+IG1pblNxdWFyZURpc3RhbmNlVG9DZW50ZXIpIHtcbiAgICAgIGkgKz0gNCAqIHdpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCB3aWR0aDsgY29sKyspIHtcbiAgICAgICAgY29uc3QgcGlja2VkTGF5ZXJJbmRleCA9IHBpY2tlZENvbG9yc1tpICsgM10gLSAxO1xuXG4gICAgICAgIGlmIChwaWNrZWRMYXllckluZGV4ID49IDApIHtcbiAgICAgICAgICBjb25zdCBkeCA9IGNvbCArIHggLSBkZXZpY2VYO1xuICAgICAgICAgIGNvbnN0IGQyID0gZHggKiBkeCArIGR5MjtcblxuICAgICAgICAgIGlmIChkMiA8PSBtaW5TcXVhcmVEaXN0YW5jZVRvQ2VudGVyKSB7XG4gICAgICAgICAgICBtaW5TcXVhcmVEaXN0YW5jZVRvQ2VudGVyID0gZDI7XG4gICAgICAgICAgICBjbG9zZXN0UGl4ZWxJbmRleCA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaSArPSA0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChjbG9zZXN0UGl4ZWxJbmRleCA+PSAwKSB7XG4gICAgY29uc3QgcGlja2VkQ29sb3IgPSBwaWNrZWRDb2xvcnMuc2xpY2UoY2xvc2VzdFBpeGVsSW5kZXgsIGNsb3Nlc3RQaXhlbEluZGV4ICsgNCk7XG4gICAgY29uc3QgcGlja2VkT2JqZWN0ID0gZGVjb2RlUGlja2luZ0NvbG9yKHBpY2tlZENvbG9yKTtcblxuICAgIGlmIChwaWNrZWRPYmplY3QpIHtcbiAgICAgIGNvbnN0IGR5ID0gTWF0aC5mbG9vcihjbG9zZXN0UGl4ZWxJbmRleCAvIDQgLyB3aWR0aCk7XG4gICAgICBjb25zdCBkeCA9IGNsb3Nlc3RQaXhlbEluZGV4IC8gNCAtIGR5ICogd2lkdGg7XG4gICAgICByZXR1cm4geyAuLi5waWNrZWRPYmplY3QsXG4gICAgICAgIHBpY2tlZENvbG9yLFxuICAgICAgICBwaWNrZWRYOiB4ICsgZHgsXG4gICAgICAgIHBpY2tlZFk6IHkgKyBkeVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBsb2cuZXJyb3IoJ1BpY2tlZCBub24tZXhpc3RlbnQgbGF5ZXIuIElzIHBpY2tpbmcgYnVmZmVyIGNvcnJ1cHQ/JykoKTtcbiAgfVxuXG4gIHJldHVybiBOT19QSUNLRURfT0JKRUNUO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXF1ZU9iamVjdHMoe1xuICBwaWNrZWRDb2xvcnMsXG4gIGRlY29kZVBpY2tpbmdDb2xvclxufSkge1xuICBjb25zdCB1bmlxdWVDb2xvcnMgPSBuZXcgTWFwKCk7XG5cbiAgaWYgKHBpY2tlZENvbG9ycykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGlja2VkQ29sb3JzLmxlbmd0aDsgaSArPSA0KSB7XG4gICAgICBjb25zdCBwaWNrZWRMYXllckluZGV4ID0gcGlja2VkQ29sb3JzW2kgKyAzXSAtIDE7XG5cbiAgICAgIGlmIChwaWNrZWRMYXllckluZGV4ID49IDApIHtcbiAgICAgICAgY29uc3QgcGlja2VkQ29sb3IgPSBwaWNrZWRDb2xvcnMuc2xpY2UoaSwgaSArIDQpO1xuICAgICAgICBjb25zdCBjb2xvcktleSA9IHBpY2tlZENvbG9yLmpvaW4oJywnKTtcblxuICAgICAgICBpZiAoIXVuaXF1ZUNvbG9ycy5oYXMoY29sb3JLZXkpKSB7XG4gICAgICAgICAgY29uc3QgcGlja2VkT2JqZWN0ID0gZGVjb2RlUGlja2luZ0NvbG9yKHBpY2tlZENvbG9yKTtcblxuICAgICAgICAgIGlmIChwaWNrZWRPYmplY3QpIHtcbiAgICAgICAgICAgIHVuaXF1ZUNvbG9ycy5zZXQoY29sb3JLZXksIHsgLi4ucGlja2VkT2JqZWN0LFxuICAgICAgICAgICAgICBjb2xvcjogcGlja2VkQ29sb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2cuZXJyb3IoJ1BpY2tlZCBub24tZXhpc3RlbnQgbGF5ZXIuIElzIHBpY2tpbmcgYnVmZmVyIGNvcnJ1cHQ/JykoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gQXJyYXkuZnJvbSh1bmlxdWVDb2xvcnMudmFsdWVzKCkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktb2JqZWN0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///96941\n')},50007:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "Z": function() { return /* binding */ ResourceManager; }\n});\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(82482);\n// EXTERNAL MODULE: ./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js + 24 modules\nvar load = __webpack_require__(44534);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js\n\n\nclass Resource {\n  constructor(id, data, context) {\n    (0,defineProperty/* default */.Z)(this, "id", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "context", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "isLoaded", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "persistent", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_loadCount", 0);\n\n    (0,defineProperty/* default */.Z)(this, "_subscribers", new Set());\n\n    (0,defineProperty/* default */.Z)(this, "_data", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_loader", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_error", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_content", void 0);\n\n    this.id = id;\n    this.context = context;\n    this.setData(data);\n  }\n\n  subscribe(consumer) {\n    this._subscribers.add(consumer);\n  }\n\n  unsubscribe(consumer) {\n    this._subscribers.delete(consumer);\n  }\n\n  inUse() {\n    return this._subscribers.size > 0;\n  }\n\n  delete() {}\n\n  getData() {\n    return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(() => this.getData());\n  }\n\n  setData(data, forceUpdate) {\n    if (data === this._data && !forceUpdate) {\n      return;\n    }\n\n    this._data = data;\n    const loadCount = ++this._loadCount;\n    let loader = data;\n\n    if (typeof data === \'string\') {\n      loader = (0,load/* load */.z)(data);\n    }\n\n    if (loader instanceof Promise) {\n      this.isLoaded = false;\n      this._loader = loader.then(result => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = undefined;\n          this._content = result;\n        }\n      }).catch(error => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = error || true;\n        }\n      });\n    } else {\n      this.isLoaded = true;\n      this._error = undefined;\n      this._content = data;\n    }\n\n    for (const subscriber of this._subscribers) {\n      subscriber.onChange(this.getData());\n    }\n  }\n\n}\n//# sourceMappingURL=resource.js.map\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js\n\n\nclass ResourceManager {\n  constructor({\n    gl,\n    protocol\n  }) {\n    (0,defineProperty/* default */.Z)(this, "protocol", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_context", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_resources", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_consumers", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "_pruneRequest", void 0);\n\n    this.protocol = protocol || \'resource://\';\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId) {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n\n    res.persistent = persistent;\n  }\n\n  remove(resourceId) {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({\n    consumerId\n  }) {\n    const consumer = this._consumers[consumerId];\n\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n        const resource = this._resources[request.resourceId];\n\n        if (resource) {\n          resource.unsubscribe(request);\n        }\n      }\n\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = \'default\'\n  }) {\n    const {\n      _resources: resources,\n      protocol\n    } = this;\n\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, \'\');\n\n      if (!resources[resourceId]) {\n        this.add({\n          resourceId,\n          data: null,\n          persistent: false\n        });\n      }\n    }\n\n    const res = resources[resourceId];\n\n    this._track(consumerId, requestId, res, onChange);\n\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune() {\n    if (!this._pruneRequest) {\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize() {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  _track(consumerId, requestId, resource, onChange) {\n    const consumers = this._consumers;\n    const consumer = consumers[consumerId] = consumers[consumerId] || {};\n    const request = consumer[requestId] || {};\n    const oldResource = request.resourceId && this._resources[request.resourceId];\n\n    if (oldResource) {\n      oldResource.unsubscribe(request);\n      this.prune();\n    }\n\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resourceId = resource.id;\n      resource.subscribe(request);\n    }\n  }\n\n  _prune() {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=resource-manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAwMDcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0U7QUFDaEM7QUFDekI7QUFDZjtBQUNBLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLG9CQUFJO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0M7O0FDdEZ3RTtBQUN0QztBQUNuQjtBQUNmO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxJQUFJLGlDQUFlOztBQUVuQixJQUFJLGlDQUFlOztBQUVuQixJQUFJLGlDQUFlOztBQUVuQixJQUFJLGlDQUFlOztBQUVuQixJQUFJLGlDQUFlOztBQUVuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vbGliL3Jlc291cmNlL3Jlc291cmNlLmpzP2MyM2UiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL2xpYi9yZXNvdXJjZS9yZXNvdXJjZS1tYW5hZ2VyLmpzP2Q0YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCB7IGxvYWQgfSBmcm9tICdAbG9hZGVycy5nbC9jb3JlJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoaWQsIGRhdGEsIGNvbnRleHQpIHtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY29udGV4dFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNMb2FkZWRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBlcnNpc3RlbnRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9sb2FkQ291bnRcIiwgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfc3Vic2NyaWJlcnNcIiwgbmV3IFNldCgpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9kYXRhXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfbG9hZGVyXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfZXJyb3JcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9jb250ZW50XCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLnNldERhdGEoZGF0YSk7XG4gIH1cblxuICBzdWJzY3JpYmUoY29uc3VtZXIpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycy5hZGQoY29uc3VtZXIpO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUoY29uc3VtZXIpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycy5kZWxldGUoY29uc3VtZXIpO1xuICB9XG5cbiAgaW5Vc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZXJzLnNpemUgPiAwO1xuICB9XG5cbiAgZGVsZXRlKCkge31cblxuICBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLmlzTG9hZGVkID8gdGhpcy5fZXJyb3IgPyBQcm9taXNlLnJlamVjdCh0aGlzLl9lcnJvcikgOiB0aGlzLl9jb250ZW50IDogdGhpcy5fbG9hZGVyLnRoZW4oKCkgPT4gdGhpcy5nZXREYXRhKCkpO1xuICB9XG5cbiAgc2V0RGF0YShkYXRhLCBmb3JjZVVwZGF0ZSkge1xuICAgIGlmIChkYXRhID09PSB0aGlzLl9kYXRhICYmICFmb3JjZVVwZGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIGNvbnN0IGxvYWRDb3VudCA9ICsrdGhpcy5fbG9hZENvdW50O1xuICAgIGxldCBsb2FkZXIgPSBkYXRhO1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgbG9hZGVyID0gbG9hZChkYXRhKTtcbiAgICB9XG5cbiAgICBpZiAobG9hZGVyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2xvYWRDb3VudCA9PT0gbG9hZENvdW50KSB7XG4gICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy5fY29udGVudCA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBpZiAodGhpcy5fbG9hZENvdW50ID09PSBsb2FkQ291bnQpIHtcbiAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yIHx8IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2Vycm9yID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fY29udGVudCA9IGRhdGE7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBzdWJzY3JpYmVyIG9mIHRoaXMuX3N1YnNjcmliZXJzKSB7XG4gICAgICBzdWJzY3JpYmVyLm9uQ2hhbmdlKHRoaXMuZ2V0RGF0YSgpKTtcbiAgICB9XG4gIH1cblxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb3VyY2UuanMubWFwIiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBSZXNvdXJjZSBmcm9tICcuL3Jlc291cmNlJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc291cmNlTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBnbCxcbiAgICBwcm90b2NvbFxuICB9KSB7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvdG9jb2xcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9jb250ZXh0XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcmVzb3VyY2VzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfY29uc3VtZXJzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcHJ1bmVSZXF1ZXN0XCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLnByb3RvY29sID0gcHJvdG9jb2wgfHwgJ3Jlc291cmNlOi8vJztcbiAgICB0aGlzLl9jb250ZXh0ID0ge1xuICAgICAgZ2wsXG4gICAgICByZXNvdXJjZU1hbmFnZXI6IHRoaXNcbiAgICB9O1xuICAgIHRoaXMuX3Jlc291cmNlcyA9IHt9O1xuICAgIHRoaXMuX2NvbnN1bWVycyA9IHt9O1xuICAgIHRoaXMuX3BydW5lUmVxdWVzdCA9IG51bGw7XG4gIH1cblxuICBjb250YWlucyhyZXNvdXJjZUlkKSB7XG4gICAgaWYgKHJlc291cmNlSWQuc3RhcnRzV2l0aCh0aGlzLnByb3RvY29sKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc291cmNlSWQgaW4gdGhpcy5fcmVzb3VyY2VzO1xuICB9XG5cbiAgYWRkKHtcbiAgICByZXNvdXJjZUlkLFxuICAgIGRhdGEsXG4gICAgZm9yY2VVcGRhdGUgPSBmYWxzZSxcbiAgICBwZXJzaXN0ZW50ID0gdHJ1ZVxuICB9KSB7XG4gICAgbGV0IHJlcyA9IHRoaXMuX3Jlc291cmNlc1tyZXNvdXJjZUlkXTtcblxuICAgIGlmIChyZXMpIHtcbiAgICAgIHJlcy5zZXREYXRhKGRhdGEsIGZvcmNlVXBkYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzID0gbmV3IFJlc291cmNlKHJlc291cmNlSWQsIGRhdGEsIHRoaXMuX2NvbnRleHQpO1xuICAgICAgdGhpcy5fcmVzb3VyY2VzW3Jlc291cmNlSWRdID0gcmVzO1xuICAgIH1cblxuICAgIHJlcy5wZXJzaXN0ZW50ID0gcGVyc2lzdGVudDtcbiAgfVxuXG4gIHJlbW92ZShyZXNvdXJjZUlkKSB7XG4gICAgY29uc3QgcmVzID0gdGhpcy5fcmVzb3VyY2VzW3Jlc291cmNlSWRdO1xuXG4gICAgaWYgKHJlcykge1xuICAgICAgcmVzLmRlbGV0ZSgpO1xuICAgICAgZGVsZXRlIHRoaXMuX3Jlc291cmNlc1tyZXNvdXJjZUlkXTtcbiAgICB9XG4gIH1cblxuICB1bnN1YnNjcmliZSh7XG4gICAgY29uc3VtZXJJZFxuICB9KSB7XG4gICAgY29uc3QgY29uc3VtZXIgPSB0aGlzLl9jb25zdW1lcnNbY29uc3VtZXJJZF07XG5cbiAgICBpZiAoY29uc3VtZXIpIHtcbiAgICAgIGZvciAoY29uc3QgcmVxdWVzdElkIGluIGNvbnN1bWVyKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBjb25zdW1lcltyZXF1ZXN0SWRdO1xuICAgICAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMuX3Jlc291cmNlc1tyZXF1ZXN0LnJlc291cmNlSWRdO1xuXG4gICAgICAgIGlmIChyZXNvdXJjZSkge1xuICAgICAgICAgIHJlc291cmNlLnVuc3Vic2NyaWJlKHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSB0aGlzLl9jb25zdW1lcnNbY29uc3VtZXJJZF07XG4gICAgICB0aGlzLnBydW5lKCk7XG4gICAgfVxuICB9XG5cbiAgc3Vic2NyaWJlKHtcbiAgICByZXNvdXJjZUlkLFxuICAgIG9uQ2hhbmdlLFxuICAgIGNvbnN1bWVySWQsXG4gICAgcmVxdWVzdElkID0gJ2RlZmF1bHQnXG4gIH0pIHtcbiAgICBjb25zdCB7XG4gICAgICBfcmVzb3VyY2VzOiByZXNvdXJjZXMsXG4gICAgICBwcm90b2NvbFxuICAgIH0gPSB0aGlzO1xuXG4gICAgaWYgKHJlc291cmNlSWQuc3RhcnRzV2l0aChwcm90b2NvbCkpIHtcbiAgICAgIHJlc291cmNlSWQgPSByZXNvdXJjZUlkLnJlcGxhY2UocHJvdG9jb2wsICcnKTtcblxuICAgICAgaWYgKCFyZXNvdXJjZXNbcmVzb3VyY2VJZF0pIHtcbiAgICAgICAgdGhpcy5hZGQoe1xuICAgICAgICAgIHJlc291cmNlSWQsXG4gICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICBwZXJzaXN0ZW50OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSByZXNvdXJjZXNbcmVzb3VyY2VJZF07XG5cbiAgICB0aGlzLl90cmFjayhjb25zdW1lcklkLCByZXF1ZXN0SWQsIHJlcywgb25DaGFuZ2UpO1xuXG4gICAgaWYgKHJlcykge1xuICAgICAgcmV0dXJuIHJlcy5nZXREYXRhKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHBydW5lKCkge1xuICAgIGlmICghdGhpcy5fcHJ1bmVSZXF1ZXN0KSB7XG4gICAgICB0aGlzLl9wcnVuZVJlcXVlc3QgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX3BydW5lKCksIDApO1xuICAgIH1cbiAgfVxuXG4gIGZpbmFsaXplKCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX3Jlc291cmNlcykge1xuICAgICAgdGhpcy5fcmVzb3VyY2VzW2tleV0uZGVsZXRlKCk7XG4gICAgfVxuICB9XG5cbiAgX3RyYWNrKGNvbnN1bWVySWQsIHJlcXVlc3RJZCwgcmVzb3VyY2UsIG9uQ2hhbmdlKSB7XG4gICAgY29uc3QgY29uc3VtZXJzID0gdGhpcy5fY29uc3VtZXJzO1xuICAgIGNvbnN0IGNvbnN1bWVyID0gY29uc3VtZXJzW2NvbnN1bWVySWRdID0gY29uc3VtZXJzW2NvbnN1bWVySWRdIHx8IHt9O1xuICAgIGNvbnN0IHJlcXVlc3QgPSBjb25zdW1lcltyZXF1ZXN0SWRdIHx8IHt9O1xuICAgIGNvbnN0IG9sZFJlc291cmNlID0gcmVxdWVzdC5yZXNvdXJjZUlkICYmIHRoaXMuX3Jlc291cmNlc1tyZXF1ZXN0LnJlc291cmNlSWRdO1xuXG4gICAgaWYgKG9sZFJlc291cmNlKSB7XG4gICAgICBvbGRSZXNvdXJjZS51bnN1YnNjcmliZShyZXF1ZXN0KTtcbiAgICAgIHRoaXMucHJ1bmUoKTtcbiAgICB9XG5cbiAgICBpZiAocmVzb3VyY2UpIHtcbiAgICAgIGNvbnN1bWVyW3JlcXVlc3RJZF0gPSByZXF1ZXN0O1xuICAgICAgcmVxdWVzdC5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgcmVxdWVzdC5yZXNvdXJjZUlkID0gcmVzb3VyY2UuaWQ7XG4gICAgICByZXNvdXJjZS5zdWJzY3JpYmUocmVxdWVzdCk7XG4gICAgfVxuICB9XG5cbiAgX3BydW5lKCkge1xuICAgIHRoaXMuX3BydW5lUmVxdWVzdCA9IG51bGw7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLl9yZXNvdXJjZXMpKSB7XG4gICAgICBjb25zdCByZXMgPSB0aGlzLl9yZXNvdXJjZXNba2V5XTtcblxuICAgICAgaWYgKCFyZXMucGVyc2lzdGVudCAmJiAhcmVzLmluVXNlKCkpIHtcbiAgICAgICAgcmVzLmRlbGV0ZSgpO1xuICAgICAgICBkZWxldGUgdGhpcy5fcmVzb3VyY2VzW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc291cmNlLW1hbmFnZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///50007\n')},81862:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": function() { return /* binding */ Tooltip; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n\nconst defaultStyle = {\n  zIndex: '1',\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: '0',\n  left: '0',\n  display: 'none'\n};\nclass Tooltip {\n  constructor(canvas) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* [\"default\"] */ .Z)(this, \"el\", null);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* [\"default\"] */ .Z)(this, \"isVisible\", false);\n\n    const canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n  }\n\n  setTooltip(displayInfo, x, y) {\n    const el = this.el;\n\n    if (!el) {\n      return;\n    }\n\n    if (typeof displayInfo === 'string') {\n      el.innerText = displayInfo;\n    } else if (!displayInfo) {\n      this.isVisible = false;\n      el.style.display = 'none';\n      return;\n    } else {\n      if (displayInfo.text) {\n        el.innerText = displayInfo.text;\n      }\n\n      if (displayInfo.html) {\n        el.innerHTML = displayInfo.html;\n      }\n\n      if (displayInfo.className) {\n        el.className = displayInfo.className;\n      }\n\n      Object.assign(el.style, displayInfo.style);\n    }\n\n    this.isVisible = true;\n    el.style.display = 'block';\n    el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  }\n\n  remove() {\n    if (this.el) {\n      this.el.remove();\n      this.el = null;\n    }\n  }\n\n}\n//# sourceMappingURL=tooltip.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODE4NjIuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vbGliL3Rvb2x0aXAuanM/ZjEwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuY29uc3QgZGVmYXVsdFN0eWxlID0ge1xuICB6SW5kZXg6ICcxJyxcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgY29sb3I6ICcjYTBhN2I0JyxcbiAgYmFja2dyb3VuZENvbG9yOiAnIzI5MzIzYycsXG4gIHBhZGRpbmc6ICcxMHB4JyxcbiAgdG9wOiAnMCcsXG4gIGxlZnQ6ICcwJyxcbiAgZGlzcGxheTogJ25vbmUnXG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9vbHRpcCB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVsXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNWaXNpYmxlXCIsIGZhbHNlKTtcblxuICAgIGNvbnN0IGNhbnZhc1BhcmVudCA9IGNhbnZhcy5wYXJlbnRFbGVtZW50O1xuXG4gICAgaWYgKGNhbnZhc1BhcmVudCkge1xuICAgICAgdGhpcy5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5lbC5jbGFzc05hbWUgPSAnZGVjay10b29sdGlwJztcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5lbC5zdHlsZSwgZGVmYXVsdFN0eWxlKTtcbiAgICAgIGNhbnZhc1BhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcbiAgICB9XG4gIH1cblxuICBzZXRUb29sdGlwKGRpc3BsYXlJbmZvLCB4LCB5KSB7XG4gICAgY29uc3QgZWwgPSB0aGlzLmVsO1xuXG4gICAgaWYgKCFlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGlzcGxheUluZm8gPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbC5pbm5lclRleHQgPSBkaXNwbGF5SW5mbztcbiAgICB9IGVsc2UgaWYgKCFkaXNwbGF5SW5mbykge1xuICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkaXNwbGF5SW5mby50ZXh0KSB7XG4gICAgICAgIGVsLmlubmVyVGV4dCA9IGRpc3BsYXlJbmZvLnRleHQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXNwbGF5SW5mby5odG1sKSB7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IGRpc3BsYXlJbmZvLmh0bWw7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXNwbGF5SW5mby5jbGFzc05hbWUpIHtcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gZGlzcGxheUluZm8uY2xhc3NOYW1lO1xuICAgICAgfVxuXG4gICAgICBPYmplY3QuYXNzaWduKGVsLnN0eWxlLCBkaXNwbGF5SW5mby5zdHlsZSk7XG4gICAgfVxuXG4gICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKFwiLmNvbmNhdCh4LCBcInB4LCBcIikuY29uY2F0KHksIFwicHgpXCIpO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZSgpO1xuICAgICAgdGhpcy5lbCA9IG51bGw7XG4gICAgfVxuICB9XG5cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2x0aXAuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///81862\n")},52413:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "Z": function() { return /* binding */ UniformTransitionManager; }\n});\n\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js\nvar attribute_transition_utils = __webpack_require__(91619);\n// EXTERNAL MODULE: ./node_modules/@math.gl/core/dist/esm/lib/common.js\nvar common = __webpack_require__(14034);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/transitions/transition.js\nvar transition = __webpack_require__(53630);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js\n\n\nclass CPUInterpolationTransition extends transition/* default */.Z {\n  get value() {\n    return this._value;\n  }\n\n  _onUpdate() {\n    const {\n      time,\n      settings: {\n        fromValue,\n        toValue,\n        duration,\n        easing\n      }\n    } = this;\n    const t = easing(time / duration);\n    this._value = (0,common/* lerp */.t7)(fromValue, toValue, t);\n  }\n\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js\n\nconst EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  const velocity = cur - prev;\n  const delta = dest - cur;\n  const spring = delta * stiffness;\n  const damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    const next = [];\n\n    for (let i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    let distanceSquare = 0;\n\n    for (let i = 0; i < value1.length; i++) {\n      const d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nclass CPUSpringTransition extends transition/* default */.Z {\n  get value() {\n    return this._currValue;\n  }\n\n  _onUpdate() {\n    const {\n      fromValue,\n      toValue,\n      damping,\n      stiffness\n    } = this.settings;\n    const {\n      _prevValue = fromValue,\n      _currValue = fromValue\n    } = this;\n    let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n    const delta = distance(nextValue, toValue);\n    const velocity = distance(nextValue, _currValue);\n\n    if (delta < EPSILON && velocity < EPSILON) {\n      nextValue = toValue;\n      this.end();\n    }\n\n    this._prevValue = _currValue;\n    this._currValue = nextValue;\n  }\n\n}\n//# sourceMappingURL=cpu-spring-transition.js.map\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/log.js\nvar log = __webpack_require__(80744);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js\n\n\n\n\nconst TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\nclass UniformTransitionManager {\n  constructor(timeline) {\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  get active() {\n    return this.transitions.size > 0;\n  }\n\n  add(key, fromValue, toValue, settings) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      const transition = transitions.get(key);\n      const {\n        value = transition.settings.fromValue\n      } = transition;\n      fromValue = value;\n      this.remove(key);\n    }\n\n    settings = (0,attribute_transition_utils/* normalizeTransitionSettings */.M0)(settings);\n\n    if (!settings) {\n      return;\n    }\n\n    const TransitionType = TRANSITION_TYPES[settings.type];\n\n    if (!TransitionType) {\n      log/* default.error */.Z.error("unsupported transition type \'".concat(settings.type, "\'"))();\n      return;\n    }\n\n    const transition = new TransitionType(this.timeline);\n    transition.start({ ...settings,\n      fromValue,\n      toValue\n    });\n    transitions.set(key, transition);\n  }\n\n  remove(key) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      transitions.get(key).cancel();\n      transitions.delete(key);\n    }\n  }\n\n  update() {\n    const propsInTransition = {};\n\n    for (const [key, transition] of this.transitions) {\n      transition.update();\n      propsInTransition[key] = transition.value;\n\n      if (!transition.inProgress) {\n        this.remove(key);\n      }\n    }\n\n    return propsInTransition;\n  }\n\n  clear() {\n    for (const key of this.transitions.keys()) {\n      this.remove(key);\n    }\n  }\n\n}\n//# sourceMappingURL=uniform-transition-manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTI0MTMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFxQztBQUNDO0FBQ3ZCLHlDQUF5Qyx5QkFBVTtBQUNsRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0Esa0JBQWtCLHVCQUFJO0FBQ3RCOztBQUVBO0FBQ0Esd0Q7O0FDdEJzQztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVlLGtDQUFrQyx5QkFBVTtBQUMzRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUQ7Ozs7QUN0RXFGO0FBQ0E7QUFDZDtBQUN4QztBQUMvQjtBQUNBLGlCQUFpQiwwQkFBMEI7QUFDM0MsVUFBVSxtQkFBbUI7QUFDN0I7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLGtFQUEyQjs7QUFFMUM7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsTUFBTSw4QkFBUztBQUNmO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS90cmFuc2l0aW9ucy9jcHUtaW50ZXJwb2xhdGlvbi10cmFuc2l0aW9uLmpzP2E3MDgiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3RyYW5zaXRpb25zL2NwdS1zcHJpbmctdHJhbnNpdGlvbi5qcz8xMmEzIiwid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9saWIvdW5pZm9ybS10cmFuc2l0aW9uLW1hbmFnZXIuanM/NDc4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsZXJwIH0gZnJvbSAnQG1hdGguZ2wvY29yZSc7XG5pbXBvcnQgVHJhbnNpdGlvbiBmcm9tICcuL3RyYW5zaXRpb24nO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ1BVSW50ZXJwb2xhdGlvblRyYW5zaXRpb24gZXh0ZW5kcyBUcmFuc2l0aW9uIHtcbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIF9vblVwZGF0ZSgpIHtcbiAgICBjb25zdCB7XG4gICAgICB0aW1lLFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgZnJvbVZhbHVlLFxuICAgICAgICB0b1ZhbHVlLFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgZWFzaW5nXG4gICAgICB9XG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3QgdCA9IGVhc2luZyh0aW1lIC8gZHVyYXRpb24pO1xuICAgIHRoaXMuX3ZhbHVlID0gbGVycChmcm9tVmFsdWUsIHRvVmFsdWUsIHQpO1xuICB9XG5cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNwdS1pbnRlcnBvbGF0aW9uLXRyYW5zaXRpb24uanMubWFwIiwiaW1wb3J0IFRyYW5zaXRpb24gZnJvbSAnLi90cmFuc2l0aW9uJztcbmNvbnN0IEVQU0lMT04gPSAxZS01O1xuXG5mdW5jdGlvbiB1cGRhdGVTcHJpbmdFbGVtZW50KHByZXYsIGN1ciwgZGVzdCwgZGFtcGluZywgc3RpZmZuZXNzKSB7XG4gIGNvbnN0IHZlbG9jaXR5ID0gY3VyIC0gcHJldjtcbiAgY29uc3QgZGVsdGEgPSBkZXN0IC0gY3VyO1xuICBjb25zdCBzcHJpbmcgPSBkZWx0YSAqIHN0aWZmbmVzcztcbiAgY29uc3QgZGFtcGVyID0gLXZlbG9jaXR5ICogZGFtcGluZztcbiAgcmV0dXJuIHNwcmluZyArIGRhbXBlciArIHZlbG9jaXR5ICsgY3VyO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVTcHJpbmcocHJldiwgY3VyLCBkZXN0LCBkYW1waW5nLCBzdGlmZm5lc3MpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZGVzdCkpIHtcbiAgICBjb25zdCBuZXh0ID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5leHRbaV0gPSB1cGRhdGVTcHJpbmdFbGVtZW50KHByZXZbaV0sIGN1cltpXSwgZGVzdFtpXSwgZGFtcGluZywgc3RpZmZuZXNzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIHJldHVybiB1cGRhdGVTcHJpbmdFbGVtZW50KHByZXYsIGN1ciwgZGVzdCwgZGFtcGluZywgc3RpZmZuZXNzKTtcbn1cblxuZnVuY3Rpb24gZGlzdGFuY2UodmFsdWUxLCB2YWx1ZTIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUxKSkge1xuICAgIGxldCBkaXN0YW5jZVNxdWFyZSA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlMS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZCA9IHZhbHVlMVtpXSAtIHZhbHVlMltpXTtcbiAgICAgIGRpc3RhbmNlU3F1YXJlICs9IGQgKiBkO1xuICAgIH1cblxuICAgIHJldHVybiBNYXRoLnNxcnQoZGlzdGFuY2VTcXVhcmUpO1xuICB9XG5cbiAgcmV0dXJuIE1hdGguYWJzKHZhbHVlMSAtIHZhbHVlMik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENQVVNwcmluZ1RyYW5zaXRpb24gZXh0ZW5kcyBUcmFuc2l0aW9uIHtcbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyVmFsdWU7XG4gIH1cblxuICBfb25VcGRhdGUoKSB7XG4gICAgY29uc3Qge1xuICAgICAgZnJvbVZhbHVlLFxuICAgICAgdG9WYWx1ZSxcbiAgICAgIGRhbXBpbmcsXG4gICAgICBzdGlmZm5lc3NcbiAgICB9ID0gdGhpcy5zZXR0aW5ncztcbiAgICBjb25zdCB7XG4gICAgICBfcHJldlZhbHVlID0gZnJvbVZhbHVlLFxuICAgICAgX2N1cnJWYWx1ZSA9IGZyb21WYWx1ZVxuICAgIH0gPSB0aGlzO1xuICAgIGxldCBuZXh0VmFsdWUgPSB1cGRhdGVTcHJpbmcoX3ByZXZWYWx1ZSwgX2N1cnJWYWx1ZSwgdG9WYWx1ZSwgZGFtcGluZywgc3RpZmZuZXNzKTtcbiAgICBjb25zdCBkZWx0YSA9IGRpc3RhbmNlKG5leHRWYWx1ZSwgdG9WYWx1ZSk7XG4gICAgY29uc3QgdmVsb2NpdHkgPSBkaXN0YW5jZShuZXh0VmFsdWUsIF9jdXJyVmFsdWUpO1xuXG4gICAgaWYgKGRlbHRhIDwgRVBTSUxPTiAmJiB2ZWxvY2l0eSA8IEVQU0lMT04pIHtcbiAgICAgIG5leHRWYWx1ZSA9IHRvVmFsdWU7XG4gICAgICB0aGlzLmVuZCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3ByZXZWYWx1ZSA9IF9jdXJyVmFsdWU7XG4gICAgdGhpcy5fY3VyclZhbHVlID0gbmV4dFZhbHVlO1xuICB9XG5cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNwdS1zcHJpbmctdHJhbnNpdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBub3JtYWxpemVUcmFuc2l0aW9uU2V0dGluZ3MgfSBmcm9tICcuL2F0dHJpYnV0ZS9hdHRyaWJ1dGUtdHJhbnNpdGlvbi11dGlscyc7XG5pbXBvcnQgQ1BVSW50ZXJwb2xhdGlvblRyYW5zaXRpb24gZnJvbSAnLi4vdHJhbnNpdGlvbnMvY3B1LWludGVycG9sYXRpb24tdHJhbnNpdGlvbic7XG5pbXBvcnQgQ1BVU3ByaW5nVHJhbnNpdGlvbiBmcm9tICcuLi90cmFuc2l0aW9ucy9jcHUtc3ByaW5nLXRyYW5zaXRpb24nO1xuaW1wb3J0IGxvZyBmcm9tICcuLi91dGlscy9sb2cnO1xuY29uc3QgVFJBTlNJVElPTl9UWVBFUyA9IHtcbiAgaW50ZXJwb2xhdGlvbjogQ1BVSW50ZXJwb2xhdGlvblRyYW5zaXRpb24sXG4gIHNwcmluZzogQ1BVU3ByaW5nVHJhbnNpdGlvblxufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuaWZvcm1UcmFuc2l0aW9uTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHRpbWVsaW5lKSB7XG4gICAgdGhpcy50cmFuc2l0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnRpbWVsaW5lID0gdGltZWxpbmU7XG4gIH1cblxuICBnZXQgYWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25zLnNpemUgPiAwO1xuICB9XG5cbiAgYWRkKGtleSwgZnJvbVZhbHVlLCB0b1ZhbHVlLCBzZXR0aW5ncykge1xuICAgIGNvbnN0IHtcbiAgICAgIHRyYW5zaXRpb25zXG4gICAgfSA9IHRoaXM7XG5cbiAgICBpZiAodHJhbnNpdGlvbnMuaGFzKGtleSkpIHtcbiAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSB0cmFuc2l0aW9ucy5nZXQoa2V5KTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdmFsdWUgPSB0cmFuc2l0aW9uLnNldHRpbmdzLmZyb21WYWx1ZVxuICAgICAgfSA9IHRyYW5zaXRpb247XG4gICAgICBmcm9tVmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMucmVtb3ZlKGtleSk7XG4gICAgfVxuXG4gICAgc2V0dGluZ3MgPSBub3JtYWxpemVUcmFuc2l0aW9uU2V0dGluZ3Moc2V0dGluZ3MpO1xuXG4gICAgaWYgKCFzZXR0aW5ncykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IFRyYW5zaXRpb25UeXBlID0gVFJBTlNJVElPTl9UWVBFU1tzZXR0aW5ncy50eXBlXTtcblxuICAgIGlmICghVHJhbnNpdGlvblR5cGUpIHtcbiAgICAgIGxvZy5lcnJvcihcInVuc3VwcG9ydGVkIHRyYW5zaXRpb24gdHlwZSAnXCIuY29uY2F0KHNldHRpbmdzLnR5cGUsIFwiJ1wiKSkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFuc2l0aW9uID0gbmV3IFRyYW5zaXRpb25UeXBlKHRoaXMudGltZWxpbmUpO1xuICAgIHRyYW5zaXRpb24uc3RhcnQoeyAuLi5zZXR0aW5ncyxcbiAgICAgIGZyb21WYWx1ZSxcbiAgICAgIHRvVmFsdWVcbiAgICB9KTtcbiAgICB0cmFuc2l0aW9ucy5zZXQoa2V5LCB0cmFuc2l0aW9uKTtcbiAgfVxuXG4gIHJlbW92ZShrZXkpIHtcbiAgICBjb25zdCB7XG4gICAgICB0cmFuc2l0aW9uc1xuICAgIH0gPSB0aGlzO1xuXG4gICAgaWYgKHRyYW5zaXRpb25zLmhhcyhrZXkpKSB7XG4gICAgICB0cmFuc2l0aW9ucy5nZXQoa2V5KS5jYW5jZWwoKTtcbiAgICAgIHRyYW5zaXRpb25zLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBwcm9wc0luVHJhbnNpdGlvbiA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBba2V5LCB0cmFuc2l0aW9uXSBvZiB0aGlzLnRyYW5zaXRpb25zKSB7XG4gICAgICB0cmFuc2l0aW9uLnVwZGF0ZSgpO1xuICAgICAgcHJvcHNJblRyYW5zaXRpb25ba2V5XSA9IHRyYW5zaXRpb24udmFsdWU7XG5cbiAgICAgIGlmICghdHJhbnNpdGlvbi5pblByb2dyZXNzKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BzSW5UcmFuc2l0aW9uO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy50cmFuc2l0aW9ucy5rZXlzKCkpIHtcbiAgICAgIHRoaXMucmVtb3ZlKGtleSk7XG4gICAgfVxuICB9XG5cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaWZvcm0tdHJhbnNpdGlvbi1tYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///52413\n')},34779:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ViewManager; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n/* harmony import */ var _utils_deep_equal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46871);\n/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(80744);\n/* harmony import */ var _utils_flatten__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(61855);\n\n\n\n\nclass ViewManager {\n  constructor(props) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "width", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "height", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "views", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "viewState", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "controllers", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "timeline", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_viewports", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_viewportMap", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_isUpdating", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_needsRedraw", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_needsUpdate", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_eventManager", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_eventCallbacks", void 0);\n\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = \'First render\';\n    this._needsUpdate = \'Initialize\';\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  finalize() {\n    for (const key in this.controllers) {\n      const controller = this.controllers[key];\n\n      if (controller) {\n        controller.finalize();\n      }\n    }\n\n    this.controllers = {};\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  updateViewStates() {\n    for (const viewId in this.controllers) {\n      const controller = this.controllers[viewId];\n\n      if (controller) {\n        controller.updateTransition();\n      }\n    }\n  }\n\n  getViewports(rect) {\n    if (rect) {\n      return this._viewports.filter(viewport => viewport.containsPixel(rect));\n    }\n\n    return this._viewports;\n  }\n\n  getViews() {\n    const viewMap = {};\n    this.views.forEach(view => {\n      viewMap[view.id] = view;\n    });\n    return viewMap;\n  }\n\n  getView(viewId) {\n    return this.views.find(view => view.id === viewId);\n  }\n\n  getViewState(viewOrViewId) {\n    const view = typeof viewOrViewId === \'string\' ? this.getView(viewOrViewId) : viewOrViewId;\n    const viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n    return view ? view.filterViewState(viewState) : viewState;\n  }\n\n  getViewport(viewId) {\n    return this._viewportMap[viewId];\n  }\n\n  unproject(xyz, opts) {\n    const viewports = this.getViewports();\n    const pixel = {\n      x: xyz[0],\n      y: xyz[1]\n    };\n\n    for (let i = viewports.length - 1; i >= 0; --i) {\n      const viewport = viewports[i];\n\n      if (viewport.containsPixel(pixel)) {\n        const p = xyz.slice();\n        p[0] -= viewport.x;\n        p[1] -= viewport.y;\n        return viewport.unproject(p, opts);\n      }\n    }\n\n    return null;\n  }\n\n  setProps(props) {\n    if (props.views) {\n      this._setViews(props.views);\n    }\n\n    if (props.viewState) {\n      this._setViewState(props.viewState);\n    }\n\n    if (\'width\' in props || \'height\' in props) {\n      this._setSize(props.width, props.height);\n    }\n\n    if (!this._isUpdating) {\n      this._update();\n    }\n  }\n\n  _update() {\n    this._isUpdating = true;\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    this._isUpdating = false;\n  }\n\n  _setSize(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this.width = width;\n      this.height = height;\n      this.setNeedsUpdate(\'Size changed\');\n    }\n  }\n\n  _setViews(views) {\n    views = (0,_utils_flatten__WEBPACK_IMPORTED_MODULE_1__/* .flatten */ .x)(views, Boolean);\n\n    const viewsChanged = this._diffViews(views, this.views);\n\n    if (viewsChanged) {\n      this.setNeedsUpdate(\'views changed\');\n    }\n\n    this.views = views;\n  }\n\n  _setViewState(viewState) {\n    if (viewState) {\n      const viewStateChanged = !(0,_utils_deep_equal__WEBPACK_IMPORTED_MODULE_2__/* .deepEqual */ .v)(viewState, this.viewState, 3);\n\n      if (viewStateChanged) {\n        this.setNeedsUpdate(\'viewState changed\');\n      }\n\n      this.viewState = viewState;\n    } else {\n      _utils_log__WEBPACK_IMPORTED_MODULE_3__/* ["default"].warn */ .Z.warn(\'missing `viewState` or `initialViewState`\')();\n    }\n  }\n\n  _onViewStateChange(viewId, event) {\n    if (this._eventCallbacks.onViewStateChange) {\n      this._eventCallbacks.onViewStateChange({ ...event,\n        viewId\n      });\n    }\n  }\n\n  _createController(view, props) {\n    const Controller = props.type;\n    const controller = new Controller({\n      timeline: this.timeline,\n      eventManager: this._eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this, props.id),\n      onStateChange: this._eventCallbacks.onInteractionStateChange,\n      makeViewport: viewState => {\n        var _this$getView;\n\n        return (_this$getView = this.getView(view.id)) === null || _this$getView === void 0 ? void 0 : _this$getView.makeViewport({\n          viewState,\n          width: this.width,\n          height: this.height\n        });\n      }\n    });\n    return controller;\n  }\n\n  _updateController(view, viewState, viewport, controller) {\n    const controllerProps = view.controller;\n\n    if (controllerProps) {\n      const resolvedProps = { ...viewState,\n        ...controllerProps,\n        id: view.id,\n        x: viewport.x,\n        y: viewport.y,\n        width: viewport.width,\n        height: viewport.height\n      };\n\n      if (!controller) {\n        controller = this._createController(view, resolvedProps);\n      }\n\n      if (controller) {\n        controller.setProps(resolvedProps);\n      }\n\n      return controller;\n    }\n\n    return null;\n  }\n\n  _rebuildViewports() {\n    const {\n      views\n    } = this;\n    const oldControllers = this.controllers;\n    this._viewports = [];\n    this.controllers = {};\n    let invalidateControllers = false;\n\n    for (let i = views.length; i--;) {\n      const view = views[i];\n      const viewState = this.getViewState(view);\n      const viewport = view.makeViewport({\n        viewState,\n        width: this.width,\n        height: this.height\n      });\n      let oldController = oldControllers[view.id];\n      const hasController = Boolean(view.controller);\n\n      if (hasController && !oldController) {\n        invalidateControllers = true;\n      }\n\n      if ((invalidateControllers || !hasController) && oldController) {\n        oldController.finalize();\n        oldController = null;\n      }\n\n      this.controllers[view.id] = this._updateController(view, viewState, viewport, oldController);\n\n      this._viewports.unshift(viewport);\n    }\n\n    for (const id in oldControllers) {\n      const oldController = oldControllers[id];\n\n      if (oldController && !this.controllers[id]) {\n        oldController.finalize();\n      }\n    }\n\n    this._buildViewportMap();\n  }\n\n  _buildViewportMap() {\n    this._viewportMap = {};\n\n    this._viewports.forEach(viewport => {\n      if (viewport.id) {\n        this._viewportMap[viewport.id] = this._viewportMap[viewport.id] || viewport;\n      }\n    });\n  }\n\n  _diffViews(newViews, oldViews) {\n    if (newViews.length !== oldViews.length) {\n      return true;\n    }\n\n    return newViews.some((_, i) => !newViews[i].equals(oldViews[i]));\n  }\n\n}\n//# sourceMappingURL=view-manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ3NzkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RTtBQUN4QjtBQUNqQjtBQUNZO0FBQzVCO0FBQ2Y7QUFDQSxJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVDQUF1QyxRQUFRO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVksZ0VBQU87O0FBRW5COztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQ0FBZ0MscUVBQVM7O0FBRXpDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTixNQUFNLHFFQUFRO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLElBQUk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL2xpYi92aWV3LW1hbmFnZXIuanM/YzZjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IHsgZGVlcEVxdWFsIH0gZnJvbSAnLi4vdXRpbHMvZGVlcC1lcXVhbCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL3V0aWxzL2xvZyc7XG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi4vdXRpbHMvZmxhdHRlbic7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid2lkdGhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlaWdodFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmlld3NcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZpZXdTdGF0ZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY29udHJvbGxlcnNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVsaW5lXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfdmlld3BvcnRzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfdmlld3BvcnRNYXBcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9pc1VwZGF0aW5nXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfbmVlZHNSZWRyYXdcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9uZWVkc1VwZGF0ZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX2V2ZW50TWFuYWdlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX2V2ZW50Q2FsbGJhY2tzXCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLnZpZXdzID0gW107XG4gICAgdGhpcy53aWR0aCA9IDEwMDtcbiAgICB0aGlzLmhlaWdodCA9IDEwMDtcbiAgICB0aGlzLnZpZXdTdGF0ZSA9IHt9O1xuICAgIHRoaXMuY29udHJvbGxlcnMgPSB7fTtcbiAgICB0aGlzLnRpbWVsaW5lID0gcHJvcHMudGltZWxpbmU7XG4gICAgdGhpcy5fdmlld3BvcnRzID0gW107XG4gICAgdGhpcy5fdmlld3BvcnRNYXAgPSB7fTtcbiAgICB0aGlzLl9pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fbmVlZHNSZWRyYXcgPSAnRmlyc3QgcmVuZGVyJztcbiAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9ICdJbml0aWFsaXplJztcbiAgICB0aGlzLl9ldmVudE1hbmFnZXIgPSBwcm9wcy5ldmVudE1hbmFnZXI7XG4gICAgdGhpcy5fZXZlbnRDYWxsYmFja3MgPSB7XG4gICAgICBvblZpZXdTdGF0ZUNoYW5nZTogcHJvcHMub25WaWV3U3RhdGVDaGFuZ2UsXG4gICAgICBvbkludGVyYWN0aW9uU3RhdGVDaGFuZ2U6IHByb3BzLm9uSW50ZXJhY3Rpb25TdGF0ZUNoYW5nZVxuICAgIH07XG4gICAgT2JqZWN0LnNlYWwodGhpcyk7XG4gICAgdGhpcy5zZXRQcm9wcyhwcm9wcyk7XG4gIH1cblxuICBmaW5hbGl6ZSgpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNvbnRyb2xsZXJzKSB7XG4gICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyc1trZXldO1xuXG4gICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICBjb250cm9sbGVyLmZpbmFsaXplKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jb250cm9sbGVycyA9IHt9O1xuICB9XG5cbiAgbmVlZHNSZWRyYXcob3B0cyA9IHtcbiAgICBjbGVhclJlZHJhd0ZsYWdzOiBmYWxzZVxuICB9KSB7XG4gICAgY29uc3QgcmVkcmF3ID0gdGhpcy5fbmVlZHNSZWRyYXc7XG5cbiAgICBpZiAob3B0cy5jbGVhclJlZHJhd0ZsYWdzKSB7XG4gICAgICB0aGlzLl9uZWVkc1JlZHJhdyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiByZWRyYXc7XG4gIH1cblxuICBzZXROZWVkc1VwZGF0ZShyZWFzb24pIHtcbiAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9IHRoaXMuX25lZWRzVXBkYXRlIHx8IHJlYXNvbjtcbiAgICB0aGlzLl9uZWVkc1JlZHJhdyA9IHRoaXMuX25lZWRzUmVkcmF3IHx8IHJlYXNvbjtcbiAgfVxuXG4gIHVwZGF0ZVZpZXdTdGF0ZXMoKSB7XG4gICAgZm9yIChjb25zdCB2aWV3SWQgaW4gdGhpcy5jb250cm9sbGVycykge1xuICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlcnNbdmlld0lkXTtcblxuICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgY29udHJvbGxlci51cGRhdGVUcmFuc2l0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Vmlld3BvcnRzKHJlY3QpIHtcbiAgICBpZiAocmVjdCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZpZXdwb3J0cy5maWx0ZXIodmlld3BvcnQgPT4gdmlld3BvcnQuY29udGFpbnNQaXhlbChyZWN0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3ZpZXdwb3J0cztcbiAgfVxuXG4gIGdldFZpZXdzKCkge1xuICAgIGNvbnN0IHZpZXdNYXAgPSB7fTtcbiAgICB0aGlzLnZpZXdzLmZvckVhY2godmlldyA9PiB7XG4gICAgICB2aWV3TWFwW3ZpZXcuaWRdID0gdmlldztcbiAgICB9KTtcbiAgICByZXR1cm4gdmlld01hcDtcbiAgfVxuXG4gIGdldFZpZXcodmlld0lkKSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3MuZmluZCh2aWV3ID0+IHZpZXcuaWQgPT09IHZpZXdJZCk7XG4gIH1cblxuICBnZXRWaWV3U3RhdGUodmlld09yVmlld0lkKSB7XG4gICAgY29uc3QgdmlldyA9IHR5cGVvZiB2aWV3T3JWaWV3SWQgPT09ICdzdHJpbmcnID8gdGhpcy5nZXRWaWV3KHZpZXdPclZpZXdJZCkgOiB2aWV3T3JWaWV3SWQ7XG4gICAgY29uc3Qgdmlld1N0YXRlID0gdmlldyAmJiB0aGlzLnZpZXdTdGF0ZVt2aWV3LmdldFZpZXdTdGF0ZUlkKCldIHx8IHRoaXMudmlld1N0YXRlO1xuICAgIHJldHVybiB2aWV3ID8gdmlldy5maWx0ZXJWaWV3U3RhdGUodmlld1N0YXRlKSA6IHZpZXdTdGF0ZTtcbiAgfVxuXG4gIGdldFZpZXdwb3J0KHZpZXdJZCkge1xuICAgIHJldHVybiB0aGlzLl92aWV3cG9ydE1hcFt2aWV3SWRdO1xuICB9XG5cbiAgdW5wcm9qZWN0KHh5eiwgb3B0cykge1xuICAgIGNvbnN0IHZpZXdwb3J0cyA9IHRoaXMuZ2V0Vmlld3BvcnRzKCk7XG4gICAgY29uc3QgcGl4ZWwgPSB7XG4gICAgICB4OiB4eXpbMF0sXG4gICAgICB5OiB4eXpbMV1cbiAgICB9O1xuXG4gICAgZm9yIChsZXQgaSA9IHZpZXdwb3J0cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgY29uc3Qgdmlld3BvcnQgPSB2aWV3cG9ydHNbaV07XG5cbiAgICAgIGlmICh2aWV3cG9ydC5jb250YWluc1BpeGVsKHBpeGVsKSkge1xuICAgICAgICBjb25zdCBwID0geHl6LnNsaWNlKCk7XG4gICAgICAgIHBbMF0gLT0gdmlld3BvcnQueDtcbiAgICAgICAgcFsxXSAtPSB2aWV3cG9ydC55O1xuICAgICAgICByZXR1cm4gdmlld3BvcnQudW5wcm9qZWN0KHAsIG9wdHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc2V0UHJvcHMocHJvcHMpIHtcbiAgICBpZiAocHJvcHMudmlld3MpIHtcbiAgICAgIHRoaXMuX3NldFZpZXdzKHByb3BzLnZpZXdzKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcHMudmlld1N0YXRlKSB7XG4gICAgICB0aGlzLl9zZXRWaWV3U3RhdGUocHJvcHMudmlld1N0YXRlKTtcbiAgICB9XG5cbiAgICBpZiAoJ3dpZHRoJyBpbiBwcm9wcyB8fCAnaGVpZ2h0JyBpbiBwcm9wcykge1xuICAgICAgdGhpcy5fc2V0U2l6ZShwcm9wcy53aWR0aCwgcHJvcHMuaGVpZ2h0KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2lzVXBkYXRpbmcpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIF91cGRhdGUoKSB7XG4gICAgdGhpcy5faXNVcGRhdGluZyA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5fbmVlZHNVcGRhdGUpIHtcbiAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX3JlYnVpbGRWaWV3cG9ydHMoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbmVlZHNVcGRhdGUpIHtcbiAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX3JlYnVpbGRWaWV3cG9ydHMoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1VwZGF0aW5nID0gZmFsc2U7XG4gIH1cblxuICBfc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgaWYgKHdpZHRoICE9PSB0aGlzLndpZHRoIHx8IGhlaWdodCAhPT0gdGhpcy5oZWlnaHQpIHtcbiAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgdGhpcy5zZXROZWVkc1VwZGF0ZSgnU2l6ZSBjaGFuZ2VkJyk7XG4gICAgfVxuICB9XG5cbiAgX3NldFZpZXdzKHZpZXdzKSB7XG4gICAgdmlld3MgPSBmbGF0dGVuKHZpZXdzLCBCb29sZWFuKTtcblxuICAgIGNvbnN0IHZpZXdzQ2hhbmdlZCA9IHRoaXMuX2RpZmZWaWV3cyh2aWV3cywgdGhpcy52aWV3cyk7XG5cbiAgICBpZiAodmlld3NDaGFuZ2VkKSB7XG4gICAgICB0aGlzLnNldE5lZWRzVXBkYXRlKCd2aWV3cyBjaGFuZ2VkJyk7XG4gICAgfVxuXG4gICAgdGhpcy52aWV3cyA9IHZpZXdzO1xuICB9XG5cbiAgX3NldFZpZXdTdGF0ZSh2aWV3U3RhdGUpIHtcbiAgICBpZiAodmlld1N0YXRlKSB7XG4gICAgICBjb25zdCB2aWV3U3RhdGVDaGFuZ2VkID0gIWRlZXBFcXVhbCh2aWV3U3RhdGUsIHRoaXMudmlld1N0YXRlLCAzKTtcblxuICAgICAgaWYgKHZpZXdTdGF0ZUNoYW5nZWQpIHtcbiAgICAgICAgdGhpcy5zZXROZWVkc1VwZGF0ZSgndmlld1N0YXRlIGNoYW5nZWQnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy52aWV3U3RhdGUgPSB2aWV3U3RhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZy53YXJuKCdtaXNzaW5nIGB2aWV3U3RhdGVgIG9yIGBpbml0aWFsVmlld1N0YXRlYCcpKCk7XG4gICAgfVxuICB9XG5cbiAgX29uVmlld1N0YXRlQ2hhbmdlKHZpZXdJZCwgZXZlbnQpIHtcbiAgICBpZiAodGhpcy5fZXZlbnRDYWxsYmFja3Mub25WaWV3U3RhdGVDaGFuZ2UpIHtcbiAgICAgIHRoaXMuX2V2ZW50Q2FsbGJhY2tzLm9uVmlld1N0YXRlQ2hhbmdlKHsgLi4uZXZlbnQsXG4gICAgICAgIHZpZXdJZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgX2NyZWF0ZUNvbnRyb2xsZXIodmlldywgcHJvcHMpIHtcbiAgICBjb25zdCBDb250cm9sbGVyID0gcHJvcHMudHlwZTtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIoe1xuICAgICAgdGltZWxpbmU6IHRoaXMudGltZWxpbmUsXG4gICAgICBldmVudE1hbmFnZXI6IHRoaXMuX2V2ZW50TWFuYWdlcixcbiAgICAgIG9uVmlld1N0YXRlQ2hhbmdlOiB0aGlzLl9vblZpZXdTdGF0ZUNoYW5nZS5iaW5kKHRoaXMsIHByb3BzLmlkKSxcbiAgICAgIG9uU3RhdGVDaGFuZ2U6IHRoaXMuX2V2ZW50Q2FsbGJhY2tzLm9uSW50ZXJhY3Rpb25TdGF0ZUNoYW5nZSxcbiAgICAgIG1ha2VWaWV3cG9ydDogdmlld1N0YXRlID0+IHtcbiAgICAgICAgdmFyIF90aGlzJGdldFZpZXc7XG5cbiAgICAgICAgcmV0dXJuIChfdGhpcyRnZXRWaWV3ID0gdGhpcy5nZXRWaWV3KHZpZXcuaWQpKSA9PT0gbnVsbCB8fCBfdGhpcyRnZXRWaWV3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRnZXRWaWV3Lm1ha2VWaWV3cG9ydCh7XG4gICAgICAgICAgdmlld1N0YXRlLFxuICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gIH1cblxuICBfdXBkYXRlQ29udHJvbGxlcih2aWV3LCB2aWV3U3RhdGUsIHZpZXdwb3J0LCBjb250cm9sbGVyKSB7XG4gICAgY29uc3QgY29udHJvbGxlclByb3BzID0gdmlldy5jb250cm9sbGVyO1xuXG4gICAgaWYgKGNvbnRyb2xsZXJQcm9wcykge1xuICAgICAgY29uc3QgcmVzb2x2ZWRQcm9wcyA9IHsgLi4udmlld1N0YXRlLFxuICAgICAgICAuLi5jb250cm9sbGVyUHJvcHMsXG4gICAgICAgIGlkOiB2aWV3LmlkLFxuICAgICAgICB4OiB2aWV3cG9ydC54LFxuICAgICAgICB5OiB2aWV3cG9ydC55LFxuICAgICAgICB3aWR0aDogdmlld3BvcnQud2lkdGgsXG4gICAgICAgIGhlaWdodDogdmlld3BvcnQuaGVpZ2h0XG4gICAgICB9O1xuXG4gICAgICBpZiAoIWNvbnRyb2xsZXIpIHtcbiAgICAgICAgY29udHJvbGxlciA9IHRoaXMuX2NyZWF0ZUNvbnRyb2xsZXIodmlldywgcmVzb2x2ZWRQcm9wcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuc2V0UHJvcHMocmVzb2x2ZWRQcm9wcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250cm9sbGVyO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgX3JlYnVpbGRWaWV3cG9ydHMoKSB7XG4gICAgY29uc3Qge1xuICAgICAgdmlld3NcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBvbGRDb250cm9sbGVycyA9IHRoaXMuY29udHJvbGxlcnM7XG4gICAgdGhpcy5fdmlld3BvcnRzID0gW107XG4gICAgdGhpcy5jb250cm9sbGVycyA9IHt9O1xuICAgIGxldCBpbnZhbGlkYXRlQ29udHJvbGxlcnMgPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGkgPSB2aWV3cy5sZW5ndGg7IGktLTspIHtcbiAgICAgIGNvbnN0IHZpZXcgPSB2aWV3c1tpXTtcbiAgICAgIGNvbnN0IHZpZXdTdGF0ZSA9IHRoaXMuZ2V0Vmlld1N0YXRlKHZpZXcpO1xuICAgICAgY29uc3Qgdmlld3BvcnQgPSB2aWV3Lm1ha2VWaWV3cG9ydCh7XG4gICAgICAgIHZpZXdTdGF0ZSxcbiAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICAgIH0pO1xuICAgICAgbGV0IG9sZENvbnRyb2xsZXIgPSBvbGRDb250cm9sbGVyc1t2aWV3LmlkXTtcbiAgICAgIGNvbnN0IGhhc0NvbnRyb2xsZXIgPSBCb29sZWFuKHZpZXcuY29udHJvbGxlcik7XG5cbiAgICAgIGlmIChoYXNDb250cm9sbGVyICYmICFvbGRDb250cm9sbGVyKSB7XG4gICAgICAgIGludmFsaWRhdGVDb250cm9sbGVycyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICgoaW52YWxpZGF0ZUNvbnRyb2xsZXJzIHx8ICFoYXNDb250cm9sbGVyKSAmJiBvbGRDb250cm9sbGVyKSB7XG4gICAgICAgIG9sZENvbnRyb2xsZXIuZmluYWxpemUoKTtcbiAgICAgICAgb2xkQ29udHJvbGxlciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY29udHJvbGxlcnNbdmlldy5pZF0gPSB0aGlzLl91cGRhdGVDb250cm9sbGVyKHZpZXcsIHZpZXdTdGF0ZSwgdmlld3BvcnQsIG9sZENvbnRyb2xsZXIpO1xuXG4gICAgICB0aGlzLl92aWV3cG9ydHMudW5zaGlmdCh2aWV3cG9ydCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBpZCBpbiBvbGRDb250cm9sbGVycykge1xuICAgICAgY29uc3Qgb2xkQ29udHJvbGxlciA9IG9sZENvbnRyb2xsZXJzW2lkXTtcblxuICAgICAgaWYgKG9sZENvbnRyb2xsZXIgJiYgIXRoaXMuY29udHJvbGxlcnNbaWRdKSB7XG4gICAgICAgIG9sZENvbnRyb2xsZXIuZmluYWxpemUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9idWlsZFZpZXdwb3J0TWFwKCk7XG4gIH1cblxuICBfYnVpbGRWaWV3cG9ydE1hcCgpIHtcbiAgICB0aGlzLl92aWV3cG9ydE1hcCA9IHt9O1xuXG4gICAgdGhpcy5fdmlld3BvcnRzLmZvckVhY2godmlld3BvcnQgPT4ge1xuICAgICAgaWYgKHZpZXdwb3J0LmlkKSB7XG4gICAgICAgIHRoaXMuX3ZpZXdwb3J0TWFwW3ZpZXdwb3J0LmlkXSA9IHRoaXMuX3ZpZXdwb3J0TWFwW3ZpZXdwb3J0LmlkXSB8fCB2aWV3cG9ydDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIF9kaWZmVmlld3MobmV3Vmlld3MsIG9sZFZpZXdzKSB7XG4gICAgaWYgKG5ld1ZpZXdzLmxlbmd0aCAhPT0gb2xkVmlld3MubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3Vmlld3Muc29tZSgoXywgaSkgPT4gIW5ld1ZpZXdzW2ldLmVxdWFscyhvbGRWaWV3c1tpXSkpO1xuICB9XG5cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXctbWFuYWdlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///34779\n')},88018:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ComponentState; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n/* harmony import */ var _utils_iterable_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(38550);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(85409);\n\n\n\nconst EMPTY_PROPS = Object.freeze({});\nclass ComponentState {\n  constructor(component) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "component", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "onAsyncPropUpdated", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "asyncProps", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "oldProps", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "oldAsyncProps", void 0);\n\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = () => {};\n\n    this.oldProps = null;\n    this.oldAsyncProps = null;\n  }\n\n  finalize() {\n    for (const propName in this.asyncProps) {\n      const asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && asyncProp.type && asyncProp.type.release) {\n        asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n      }\n    }\n\n    this.asyncProps = {};\n    this.component = null;\n    this.resetOldProps();\n  }\n\n  getOldProps() {\n    return this.oldAsyncProps || this.oldProps || EMPTY_PROPS;\n  }\n\n  resetOldProps() {\n    this.oldAsyncProps = null;\n    this.oldProps = this.component ? this.component.props : null;\n  }\n\n  hasAsyncProp(propName) {\n    return propName in this.asyncProps;\n  }\n\n  getAsyncProp(propName) {\n    const asyncProp = this.asyncProps[propName];\n    return asyncProp && asyncProp.resolvedValue;\n  }\n\n  isAsyncPropLoading(propName) {\n    if (propName) {\n      const asyncProp = this.asyncProps[propName];\n      return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n    }\n\n    for (const key in this.asyncProps) {\n      if (this.isAsyncPropLoading(key)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  reloadAsyncProp(propName, value) {\n    this._watchPromise(propName, Promise.resolve(value));\n  }\n\n  setAsyncProps(props) {\n    this.component = props[_constants__WEBPACK_IMPORTED_MODULE_1__/* .COMPONENT_SYMBOL */ .fm] || this.component;\n    const resolvedValues = props[_constants__WEBPACK_IMPORTED_MODULE_1__/* .ASYNC_RESOLVED_SYMBOL */ .bN] || {};\n    const originalValues = props[_constants__WEBPACK_IMPORTED_MODULE_1__/* .ASYNC_ORIGINAL_SYMBOL */ .fO] || props;\n    const defaultValues = props[_constants__WEBPACK_IMPORTED_MODULE_1__/* .ASYNC_DEFAULTS_SYMBOL */ .lY] || {};\n\n    for (const propName in resolvedValues) {\n      const value = resolvedValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n\n      resolvedValues[propName] = this.getAsyncProp(propName);\n    }\n\n    for (const propName in originalValues) {\n      const value = originalValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n    }\n  }\n\n  _fetch(propName, url) {\n    return null;\n  }\n\n  _onResolve(propName, value) {}\n\n  _onError(propName, error) {}\n\n  _updateAsyncProp(propName, value) {\n    if (!this._didAsyncInputValueChange(propName, value)) {\n      return;\n    }\n\n    if (typeof value === \'string\') {\n      value = this._fetch(propName, value);\n    }\n\n    if (value instanceof Promise) {\n      this._watchPromise(propName, value);\n\n      return;\n    }\n\n    if ((0,_utils_iterable_utils__WEBPACK_IMPORTED_MODULE_2__/* .isAsyncIterable */ .D0)(value)) {\n      this._resolveAsyncIterable(propName, value);\n\n      return;\n    }\n\n    this._setPropValue(propName, value);\n  }\n\n  _freezeAsyncOldProps() {\n    if (!this.oldAsyncProps && this.oldProps) {\n      this.oldAsyncProps = Object.create(this.oldProps);\n\n      for (const propName in this.asyncProps) {\n        Object.defineProperty(this.oldAsyncProps, propName, {\n          enumerable: true,\n          value: this.oldProps[propName]\n        });\n      }\n    }\n  }\n\n  _didAsyncInputValueChange(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n      return false;\n    }\n\n    asyncProp.lastValue = value;\n    return true;\n  }\n\n  _setPropValue(propName, value) {\n    this._freezeAsyncOldProps();\n\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp) {\n      value = this._postProcessValue(asyncProp, value);\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }\n\n  _setAsyncPropValue(propName, value, loadCount) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n      this._freezeAsyncOldProps();\n\n      asyncProp.resolvedValue = value;\n      asyncProp.resolvedLoadCount = loadCount;\n      this.onAsyncPropUpdated(propName, value);\n    }\n  }\n\n  _watchPromise(propName, promise) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp) {\n      asyncProp.pendingLoadCount++;\n      const loadCount = asyncProp.pendingLoadCount;\n      promise.then(data => {\n        if (!this.component) {\n          return;\n        }\n\n        data = this._postProcessValue(asyncProp, data);\n\n        this._setAsyncPropValue(propName, data, loadCount);\n\n        this._onResolve(propName, data);\n      }).catch(error => {\n        this._onError(propName, error);\n      });\n    }\n  }\n\n  async _resolveAsyncIterable(propName, iterable) {\n    if (propName !== \'data\') {\n      this._setPropValue(propName, iterable);\n\n      return;\n    }\n\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      return;\n    }\n\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    let data = [];\n    let count = 0;\n\n    for await (const chunk of iterable) {\n      if (!this.component) {\n        return;\n      }\n\n      const {\n        dataTransform\n      } = this.component.props;\n\n      if (dataTransform) {\n        data = dataTransform(chunk, data);\n      } else {\n        data = data.concat(chunk);\n      }\n\n      Object.defineProperty(data, \'__diff\', {\n        enumerable: false,\n        value: [{\n          startRow: count,\n          endRow: data.length\n        }]\n      });\n      count = data.length;\n\n      this._setAsyncPropValue(propName, data, loadCount);\n    }\n\n    this._onResolve(propName, data);\n  }\n\n  _postProcessValue(asyncProp, value) {\n    const propType = asyncProp.type;\n\n    if (propType && this.component) {\n      if (propType.release) {\n        propType.release(asyncProp.resolvedValue, propType, this.component);\n      }\n\n      if (propType.transform) {\n        return propType.transform(value, propType, this.component);\n      }\n    }\n\n    return value;\n  }\n\n  _createAsyncPropData(propName, defaultValue) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      const propTypes = this.component && this.component.props[_constants__WEBPACK_IMPORTED_MODULE_1__/* .PROP_TYPES_SYMBOL */ .Wb];\n      this.asyncProps[propName] = {\n        type: propTypes && propTypes[propName],\n        lastValue: null,\n        resolvedValue: defaultValue,\n        pendingLoadCount: 0,\n        resolvedLoadCount: 0\n      };\n    }\n  }\n\n}\n//# sourceMappingURL=component-state.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODgwMTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdFO0FBQ2Q7QUFDNkU7QUFDdkksb0NBQW9DO0FBQ3JCO0FBQ2Y7QUFDQSxJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkIsa0VBQWdCO0FBQzNDLGlDQUFpQyx1RUFBcUI7QUFDdEQsaUNBQWlDLHVFQUFxQjtBQUN0RCxnQ0FBZ0MsdUVBQXFCOztBQUVyRDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsUUFBUSxnRkFBZTtBQUN2Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwrREFBK0QsbUVBQWlCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL2xpZmVjeWNsZS9jb21wb25lbnQtc3RhdGUuanM/NzMyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IHsgaXNBc3luY0l0ZXJhYmxlIH0gZnJvbSAnLi4vdXRpbHMvaXRlcmFibGUtdXRpbHMnO1xuaW1wb3J0IHsgQ09NUE9ORU5UX1NZTUJPTCwgUFJPUF9UWVBFU19TWU1CT0wsIEFTWU5DX09SSUdJTkFMX1NZTUJPTCwgQVNZTkNfUkVTT0xWRURfU1lNQk9MLCBBU1lOQ19ERUZBVUxUU19TWU1CT0wgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5jb25zdCBFTVBUWV9QUk9QUyA9IE9iamVjdC5mcmVlemUoe30pO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50U3RhdGUge1xuICBjb25zdHJ1Y3Rvcihjb21wb25lbnQpIHtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb21wb25lbnRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uQXN5bmNQcm9wVXBkYXRlZFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYXN5bmNQcm9wc1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib2xkUHJvcHNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9sZEFzeW5jUHJvcHNcIiwgdm9pZCAwKTtcblxuICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgIHRoaXMuYXN5bmNQcm9wcyA9IHt9O1xuXG4gICAgdGhpcy5vbkFzeW5jUHJvcFVwZGF0ZWQgPSAoKSA9PiB7fTtcblxuICAgIHRoaXMub2xkUHJvcHMgPSBudWxsO1xuICAgIHRoaXMub2xkQXN5bmNQcm9wcyA9IG51bGw7XG4gIH1cblxuICBmaW5hbGl6ZSgpIHtcbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIHRoaXMuYXN5bmNQcm9wcykge1xuICAgICAgY29uc3QgYXN5bmNQcm9wID0gdGhpcy5hc3luY1Byb3BzW3Byb3BOYW1lXTtcblxuICAgICAgaWYgKGFzeW5jUHJvcCAmJiBhc3luY1Byb3AudHlwZSAmJiBhc3luY1Byb3AudHlwZS5yZWxlYXNlKSB7XG4gICAgICAgIGFzeW5jUHJvcC50eXBlLnJlbGVhc2UoYXN5bmNQcm9wLnJlc29sdmVkVmFsdWUsIGFzeW5jUHJvcC50eXBlLCB0aGlzLmNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hc3luY1Byb3BzID0ge307XG4gICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgIHRoaXMucmVzZXRPbGRQcm9wcygpO1xuICB9XG5cbiAgZ2V0T2xkUHJvcHMoKSB7XG4gICAgcmV0dXJuIHRoaXMub2xkQXN5bmNQcm9wcyB8fCB0aGlzLm9sZFByb3BzIHx8IEVNUFRZX1BST1BTO1xuICB9XG5cbiAgcmVzZXRPbGRQcm9wcygpIHtcbiAgICB0aGlzLm9sZEFzeW5jUHJvcHMgPSBudWxsO1xuICAgIHRoaXMub2xkUHJvcHMgPSB0aGlzLmNvbXBvbmVudCA/IHRoaXMuY29tcG9uZW50LnByb3BzIDogbnVsbDtcbiAgfVxuXG4gIGhhc0FzeW5jUHJvcChwcm9wTmFtZSkge1xuICAgIHJldHVybiBwcm9wTmFtZSBpbiB0aGlzLmFzeW5jUHJvcHM7XG4gIH1cblxuICBnZXRBc3luY1Byb3AocHJvcE5hbWUpIHtcbiAgICBjb25zdCBhc3luY1Byb3AgPSB0aGlzLmFzeW5jUHJvcHNbcHJvcE5hbWVdO1xuICAgIHJldHVybiBhc3luY1Byb3AgJiYgYXN5bmNQcm9wLnJlc29sdmVkVmFsdWU7XG4gIH1cblxuICBpc0FzeW5jUHJvcExvYWRpbmcocHJvcE5hbWUpIHtcbiAgICBpZiAocHJvcE5hbWUpIHtcbiAgICAgIGNvbnN0IGFzeW5jUHJvcCA9IHRoaXMuYXN5bmNQcm9wc1twcm9wTmFtZV07XG4gICAgICByZXR1cm4gQm9vbGVhbihhc3luY1Byb3AgJiYgYXN5bmNQcm9wLnBlbmRpbmdMb2FkQ291bnQgPiAwICYmIGFzeW5jUHJvcC5wZW5kaW5nTG9hZENvdW50ICE9PSBhc3luY1Byb3AucmVzb2x2ZWRMb2FkQ291bnQpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuYXN5bmNQcm9wcykge1xuICAgICAgaWYgKHRoaXMuaXNBc3luY1Byb3BMb2FkaW5nKGtleSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmVsb2FkQXN5bmNQcm9wKHByb3BOYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMuX3dhdGNoUHJvbWlzZShwcm9wTmFtZSwgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKSk7XG4gIH1cblxuICBzZXRBc3luY1Byb3BzKHByb3BzKSB7XG4gICAgdGhpcy5jb21wb25lbnQgPSBwcm9wc1tDT01QT05FTlRfU1lNQk9MXSB8fCB0aGlzLmNvbXBvbmVudDtcbiAgICBjb25zdCByZXNvbHZlZFZhbHVlcyA9IHByb3BzW0FTWU5DX1JFU09MVkVEX1NZTUJPTF0gfHwge307XG4gICAgY29uc3Qgb3JpZ2luYWxWYWx1ZXMgPSBwcm9wc1tBU1lOQ19PUklHSU5BTF9TWU1CT0xdIHx8IHByb3BzO1xuICAgIGNvbnN0IGRlZmF1bHRWYWx1ZXMgPSBwcm9wc1tBU1lOQ19ERUZBVUxUU19TWU1CT0xdIHx8IHt9O1xuXG4gICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiByZXNvbHZlZFZhbHVlcykge1xuICAgICAgY29uc3QgdmFsdWUgPSByZXNvbHZlZFZhbHVlc1twcm9wTmFtZV07XG5cbiAgICAgIHRoaXMuX2NyZWF0ZUFzeW5jUHJvcERhdGEocHJvcE5hbWUsIGRlZmF1bHRWYWx1ZXNbcHJvcE5hbWVdKTtcblxuICAgICAgdGhpcy5fdXBkYXRlQXN5bmNQcm9wKHByb3BOYW1lLCB2YWx1ZSk7XG5cbiAgICAgIHJlc29sdmVkVmFsdWVzW3Byb3BOYW1lXSA9IHRoaXMuZ2V0QXN5bmNQcm9wKHByb3BOYW1lKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIG9yaWdpbmFsVmFsdWVzKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9yaWdpbmFsVmFsdWVzW3Byb3BOYW1lXTtcblxuICAgICAgdGhpcy5fY3JlYXRlQXN5bmNQcm9wRGF0YShwcm9wTmFtZSwgZGVmYXVsdFZhbHVlc1twcm9wTmFtZV0pO1xuXG4gICAgICB0aGlzLl91cGRhdGVBc3luY1Byb3AocHJvcE5hbWUsIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBfZmV0Y2gocHJvcE5hbWUsIHVybCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgX29uUmVzb2x2ZShwcm9wTmFtZSwgdmFsdWUpIHt9XG5cbiAgX29uRXJyb3IocHJvcE5hbWUsIGVycm9yKSB7fVxuXG4gIF91cGRhdGVBc3luY1Byb3AocHJvcE5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLl9kaWRBc3luY0lucHV0VmFsdWVDaGFuZ2UocHJvcE5hbWUsIHZhbHVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuX2ZldGNoKHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgdGhpcy5fd2F0Y2hQcm9taXNlKHByb3BOYW1lLCB2YWx1ZSk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNBc3luY0l0ZXJhYmxlKHZhbHVlKSkge1xuICAgICAgdGhpcy5fcmVzb2x2ZUFzeW5jSXRlcmFibGUocHJvcE5hbWUsIHZhbHVlKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NldFByb3BWYWx1ZShwcm9wTmFtZSwgdmFsdWUpO1xuICB9XG5cbiAgX2ZyZWV6ZUFzeW5jT2xkUHJvcHMoKSB7XG4gICAgaWYgKCF0aGlzLm9sZEFzeW5jUHJvcHMgJiYgdGhpcy5vbGRQcm9wcykge1xuICAgICAgdGhpcy5vbGRBc3luY1Byb3BzID0gT2JqZWN0LmNyZWF0ZSh0aGlzLm9sZFByb3BzKTtcblxuICAgICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiB0aGlzLmFzeW5jUHJvcHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub2xkQXN5bmNQcm9wcywgcHJvcE5hbWUsIHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLm9sZFByb3BzW3Byb3BOYW1lXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZGlkQXN5bmNJbnB1dFZhbHVlQ2hhbmdlKHByb3BOYW1lLCB2YWx1ZSkge1xuICAgIGNvbnN0IGFzeW5jUHJvcCA9IHRoaXMuYXN5bmNQcm9wc1twcm9wTmFtZV07XG5cbiAgICBpZiAodmFsdWUgPT09IGFzeW5jUHJvcC5yZXNvbHZlZFZhbHVlIHx8IHZhbHVlID09PSBhc3luY1Byb3AubGFzdFZhbHVlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgYXN5bmNQcm9wLmxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgX3NldFByb3BWYWx1ZShwcm9wTmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLl9mcmVlemVBc3luY09sZFByb3BzKCk7XG5cbiAgICBjb25zdCBhc3luY1Byb3AgPSB0aGlzLmFzeW5jUHJvcHNbcHJvcE5hbWVdO1xuXG4gICAgaWYgKGFzeW5jUHJvcCkge1xuICAgICAgdmFsdWUgPSB0aGlzLl9wb3N0UHJvY2Vzc1ZhbHVlKGFzeW5jUHJvcCwgdmFsdWUpO1xuICAgICAgYXN5bmNQcm9wLnJlc29sdmVkVmFsdWUgPSB2YWx1ZTtcbiAgICAgIGFzeW5jUHJvcC5wZW5kaW5nTG9hZENvdW50Kys7XG4gICAgICBhc3luY1Byb3AucmVzb2x2ZWRMb2FkQ291bnQgPSBhc3luY1Byb3AucGVuZGluZ0xvYWRDb3VudDtcbiAgICB9XG4gIH1cblxuICBfc2V0QXN5bmNQcm9wVmFsdWUocHJvcE5hbWUsIHZhbHVlLCBsb2FkQ291bnQpIHtcbiAgICBjb25zdCBhc3luY1Byb3AgPSB0aGlzLmFzeW5jUHJvcHNbcHJvcE5hbWVdO1xuXG4gICAgaWYgKGFzeW5jUHJvcCAmJiBsb2FkQ291bnQgPj0gYXN5bmNQcm9wLnJlc29sdmVkTG9hZENvdW50ICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2ZyZWV6ZUFzeW5jT2xkUHJvcHMoKTtcblxuICAgICAgYXN5bmNQcm9wLnJlc29sdmVkVmFsdWUgPSB2YWx1ZTtcbiAgICAgIGFzeW5jUHJvcC5yZXNvbHZlZExvYWRDb3VudCA9IGxvYWRDb3VudDtcbiAgICAgIHRoaXMub25Bc3luY1Byb3BVcGRhdGVkKHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgX3dhdGNoUHJvbWlzZShwcm9wTmFtZSwgcHJvbWlzZSkge1xuICAgIGNvbnN0IGFzeW5jUHJvcCA9IHRoaXMuYXN5bmNQcm9wc1twcm9wTmFtZV07XG5cbiAgICBpZiAoYXN5bmNQcm9wKSB7XG4gICAgICBhc3luY1Byb3AucGVuZGluZ0xvYWRDb3VudCsrO1xuICAgICAgY29uc3QgbG9hZENvdW50ID0gYXN5bmNQcm9wLnBlbmRpbmdMb2FkQ291bnQ7XG4gICAgICBwcm9taXNlLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhID0gdGhpcy5fcG9zdFByb2Nlc3NWYWx1ZShhc3luY1Byb3AsIGRhdGEpO1xuXG4gICAgICAgIHRoaXMuX3NldEFzeW5jUHJvcFZhbHVlKHByb3BOYW1lLCBkYXRhLCBsb2FkQ291bnQpO1xuXG4gICAgICAgIHRoaXMuX29uUmVzb2x2ZShwcm9wTmFtZSwgZGF0YSk7XG4gICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMuX29uRXJyb3IocHJvcE5hbWUsIGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9yZXNvbHZlQXN5bmNJdGVyYWJsZShwcm9wTmFtZSwgaXRlcmFibGUpIHtcbiAgICBpZiAocHJvcE5hbWUgIT09ICdkYXRhJykge1xuICAgICAgdGhpcy5fc2V0UHJvcFZhbHVlKHByb3BOYW1lLCBpdGVyYWJsZSk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhc3luY1Byb3AgPSB0aGlzLmFzeW5jUHJvcHNbcHJvcE5hbWVdO1xuXG4gICAgaWYgKCFhc3luY1Byb3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhc3luY1Byb3AucGVuZGluZ0xvYWRDb3VudCsrO1xuICAgIGNvbnN0IGxvYWRDb3VudCA9IGFzeW5jUHJvcC5wZW5kaW5nTG9hZENvdW50O1xuICAgIGxldCBkYXRhID0gW107XG4gICAgbGV0IGNvdW50ID0gMDtcblxuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcmFibGUpIHtcbiAgICAgIGlmICghdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7XG4gICAgICAgIGRhdGFUcmFuc2Zvcm1cbiAgICAgIH0gPSB0aGlzLmNvbXBvbmVudC5wcm9wcztcblxuICAgICAgaWYgKGRhdGFUcmFuc2Zvcm0pIHtcbiAgICAgICAgZGF0YSA9IGRhdGFUcmFuc2Zvcm0oY2h1bmssIGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGRhdGEuY29uY2F0KGNodW5rKTtcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGEsICdfX2RpZmYnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogW3tcbiAgICAgICAgICBzdGFydFJvdzogY291bnQsXG4gICAgICAgICAgZW5kUm93OiBkYXRhLmxlbmd0aFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBjb3VudCA9IGRhdGEubGVuZ3RoO1xuXG4gICAgICB0aGlzLl9zZXRBc3luY1Byb3BWYWx1ZShwcm9wTmFtZSwgZGF0YSwgbG9hZENvdW50KTtcbiAgICB9XG5cbiAgICB0aGlzLl9vblJlc29sdmUocHJvcE5hbWUsIGRhdGEpO1xuICB9XG5cbiAgX3Bvc3RQcm9jZXNzVmFsdWUoYXN5bmNQcm9wLCB2YWx1ZSkge1xuICAgIGNvbnN0IHByb3BUeXBlID0gYXN5bmNQcm9wLnR5cGU7XG5cbiAgICBpZiAocHJvcFR5cGUgJiYgdGhpcy5jb21wb25lbnQpIHtcbiAgICAgIGlmIChwcm9wVHlwZS5yZWxlYXNlKSB7XG4gICAgICAgIHByb3BUeXBlLnJlbGVhc2UoYXN5bmNQcm9wLnJlc29sdmVkVmFsdWUsIHByb3BUeXBlLCB0aGlzLmNvbXBvbmVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wVHlwZS50cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIHByb3BUeXBlLnRyYW5zZm9ybSh2YWx1ZSwgcHJvcFR5cGUsIHRoaXMuY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBfY3JlYXRlQXN5bmNQcm9wRGF0YShwcm9wTmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgY29uc3QgYXN5bmNQcm9wID0gdGhpcy5hc3luY1Byb3BzW3Byb3BOYW1lXTtcblxuICAgIGlmICghYXN5bmNQcm9wKSB7XG4gICAgICBjb25zdCBwcm9wVHlwZXMgPSB0aGlzLmNvbXBvbmVudCAmJiB0aGlzLmNvbXBvbmVudC5wcm9wc1tQUk9QX1RZUEVTX1NZTUJPTF07XG4gICAgICB0aGlzLmFzeW5jUHJvcHNbcHJvcE5hbWVdID0ge1xuICAgICAgICB0eXBlOiBwcm9wVHlwZXMgJiYgcHJvcFR5cGVzW3Byb3BOYW1lXSxcbiAgICAgICAgbGFzdFZhbHVlOiBudWxsLFxuICAgICAgICByZXNvbHZlZFZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgIHBlbmRpbmdMb2FkQ291bnQ6IDAsXG4gICAgICAgIHJlc29sdmVkTG9hZENvdW50OiAwXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wb25lbnQtc3RhdGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///88018\n')},85089:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Z\": function() { return /* binding */ Component; }\n});\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(82482);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js\nvar constants = __webpack_require__(85409);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/log.js\nvar log = __webpack_require__(80744);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js\nvar iterable_utils = __webpack_require__(38550);\n// EXTERNAL MODULE: ./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js + 1 modules\nvar texture_2d = __webpack_require__(51621);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/texture.js\n\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nfunction createTexture(gl, image, parameters) {\n  if (image instanceof texture_2d/* default */.Z) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  let specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n\n  const texture = new texture_2d/* default */.Z(gl, { ...image,\n    parameters: { ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...parameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nfunction destroyTexture(texture) {\n  if (!texture || !(texture instanceof texture_2d/* default */.Z)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js\nvar deep_equal = __webpack_require__(46871);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js\n\n\nconst TYPE_DEFINITIONS = {\n  boolean: {\n    validate(value, propType) {\n      return true;\n    },\n\n    equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n\n  },\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  color: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n\n    equal(value1, value2, propType) {\n      return (0,deep_equal/* deepEqual */.v)(value1, value2, 1);\n    }\n\n  },\n  accessor: {\n    validate(value, propType) {\n      const valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n\n    equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return (0,deep_equal/* deepEqual */.v)(value1, value2, 1);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n\n    equal(value1, value2, propType) {\n      const {\n        compare\n      } = propType;\n      const depth = Number.isInteger(compare) ? compare : compare ? 1 : 0;\n      return compare ? (0,deep_equal/* deepEqual */.v)(value1, value2, depth) : value1 === value2;\n    }\n\n  },\n  object: {\n    equal(value1, value2, propType) {\n      if (propType.ignore) {\n        return true;\n      }\n\n      const {\n        compare\n      } = propType;\n      const depth = Number.isInteger(compare) ? compare : compare ? 1 : 0;\n      return compare ? (0,deep_equal/* deepEqual */.v)(value1, value2, depth) : value1 === value2;\n    }\n\n  },\n  function: {\n    validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n\n    equal(value1, value2, propType) {\n      const shouldIgnore = !propType.compare && propType.ignore !== false;\n      return shouldIgnore || value1 === value2;\n    }\n\n  },\n  data: {\n    transform: (value, propType, component) => {\n      const {\n        dataTransform\n      } = component.props;\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: (value, propType, component) => {\n      const context = component.context;\n\n      if (!context || !context.gl) {\n        return null;\n      }\n\n      return createTexture(context.gl, value, { ...propType.parameters,\n        ...component.props.textureParameters\n      });\n    },\n    release: value => {\n      destroyTexture(value);\n    }\n  }\n};\nfunction parsePropTypes(propDefs) {\n  const propTypes = {};\n  const defaultProps = {};\n  const deprecatedProps = {};\n\n  for (const [propName, propDef] of Object.entries(propDefs)) {\n    const deprecated = propDef === null || propDef === void 0 ? void 0 : propDef.deprecatedFor;\n\n    if (deprecated) {\n      deprecatedProps[propName] = Array.isArray(deprecated) ? deprecated : [deprecated];\n    } else {\n      const propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes,\n    defaultProps,\n    deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return {\n      name,\n      type: getTypeOf(propDef.value),\n      ...propDef\n    };\n  }\n\n  return {\n    name,\n    ...TYPE_DEFINITIONS[propDef.type],\n    ...propDef\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js\n\n\n\n\nfunction createProps(component, propObjects) {\n  let extensions;\n\n  for (let i = propObjects.length - 1; i >= 0; i--) {\n    const props = propObjects[i];\n\n    if ('extensions' in props) {\n      extensions = props.extensions;\n    }\n  }\n\n  const propsPrototype = getPropsPrototype(component.constructor, extensions);\n  const propsInstance = Object.create(propsPrototype);\n  propsInstance[constants/* COMPONENT_SYMBOL */.fm] = component;\n  propsInstance[constants/* ASYNC_ORIGINAL_SYMBOL */.fO] = {};\n  propsInstance[constants/* ASYNC_RESOLVED_SYMBOL */.bN] = {};\n\n  for (let i = 0; i < propObjects.length; ++i) {\n    const props = propObjects[i];\n\n    for (const key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\nconst MergedDefaultPropsCacheKey = '_mergedDefaultProps';\n\nfunction getPropsPrototype(componentClass, extensions) {\n  let cacheKey = MergedDefaultPropsCacheKey;\n\n  if (extensions) {\n    for (const extension of extensions) {\n      const ExtensionClass = extension.constructor;\n\n      if (ExtensionClass) {\n        cacheKey += \":\".concat(ExtensionClass.extensionName || ExtensionClass.name);\n      }\n    }\n  }\n\n  const defaultProps = getOwnProperty(componentClass, cacheKey);\n\n  if (!defaultProps) {\n    return componentClass[cacheKey] = createPropsPrototypeAndTypes(componentClass, extensions || []);\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass, extensions) {\n  const parent = componentClass.prototype;\n\n  if (!parent) {\n    return null;\n  }\n\n  const parentClass = Object.getPrototypeOf(componentClass);\n  const parentDefaultProps = getPropsPrototype(parentClass);\n  const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  const componentPropDefs = parsePropTypes(componentDefaultProps);\n  const defaultProps = Object.assign(Object.create(null), parentDefaultProps, componentPropDefs.defaultProps);\n  const propTypes = Object.assign(Object.create(null), parentDefaultProps === null || parentDefaultProps === void 0 ? void 0 : parentDefaultProps[constants/* PROP_TYPES_SYMBOL */.Wb], componentPropDefs.propTypes);\n  const deprecatedProps = Object.assign(Object.create(null), parentDefaultProps === null || parentDefaultProps === void 0 ? void 0 : parentDefaultProps[constants/* DEPRECATED_PROPS_SYMBOL */.E7], componentPropDefs.deprecatedProps);\n\n  for (const extension of extensions) {\n    const extensionDefaultProps = getPropsPrototype(extension.constructor);\n\n    if (extensionDefaultProps) {\n      Object.assign(defaultProps, extensionDefaultProps);\n      Object.assign(propTypes, extensionDefaultProps[constants/* PROP_TYPES_SYMBOL */.Wb]);\n      Object.assign(deprecatedProps, extensionDefaultProps[constants/* DEPRECATED_PROPS_SYMBOL */.E7]);\n    }\n  }\n\n  createPropsPrototype(defaultProps, componentClass);\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  defaultProps[constants/* PROP_TYPES_SYMBOL */.Wb] = propTypes;\n  defaultProps[constants/* DEPRECATED_PROPS_SYMBOL */.E7] = deprecatedProps;\n\n  if (extensions.length === 0 && !create_props_hasOwnProperty(componentClass, '_propTypes')) {\n    componentClass._propTypes = propTypes;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototype(defaultProps, componentClass) {\n  const id = getComponentName(componentClass);\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  for (const propName in deprecatedProps) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n\n      set(newValue) {\n        const nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        for (const newPropName of deprecatedProps[propName]) {\n          if (!create_props_hasOwnProperty(this, newPropName)) {\n            this[newPropName] = newValue;\n          }\n        }\n\n        log/* default.deprecated */.Z.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n\n    });\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  const defaultValues = {};\n  const descriptors = {};\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      name,\n      value\n    } = propType;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name);\n    }\n  }\n\n  defaultProps[constants/* ASYNC_DEFAULTS_SYMBOL */.lY] = defaultValues;\n  defaultProps[constants/* ASYNC_ORIGINAL_SYMBOL */.fO] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n\n    set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || (0,iterable_utils/* isAsyncIterable */.D0)(newValue)) {\n        this[constants/* ASYNC_ORIGINAL_SYMBOL */.fO][name] = newValue;\n      } else {\n        this[constants/* ASYNC_RESOLVED_SYMBOL */.bN][name] = newValue;\n      }\n    },\n\n    get() {\n      if (this[constants/* ASYNC_RESOLVED_SYMBOL */.bN]) {\n        if (name in this[constants/* ASYNC_RESOLVED_SYMBOL */.bN]) {\n          const value = this[constants/* ASYNC_RESOLVED_SYMBOL */.bN][name];\n          return value || this[constants/* ASYNC_DEFAULTS_SYMBOL */.lY][name];\n        }\n\n        if (name in this[constants/* ASYNC_ORIGINAL_SYMBOL */.fO]) {\n          const state = this[constants/* COMPONENT_SYMBOL */.fm] && this[constants/* COMPONENT_SYMBOL */.fm].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[constants/* ASYNC_DEFAULTS_SYMBOL */.lY][name];\n          }\n        }\n      }\n\n      return this[constants/* ASYNC_DEFAULTS_SYMBOL */.lY][name];\n    }\n\n  };\n}\n\nfunction create_props_hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return create_props_hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  const componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log/* default.once */.Z.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js\n\n\n\nlet counter = 0;\nclass Component {\n  constructor(...propObjects) {\n    (0,defineProperty/* default */.Z)(this, \"id\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"props\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"count\", void 0);\n\n    this.props = createProps(this, propObjects);\n    this.id = this.props.id;\n    this.count = counter++;\n  }\n\n  clone(newProps) {\n    const {\n      props\n    } = this;\n    const asyncProps = {};\n\n    for (const key in props[constants/* ASYNC_DEFAULTS_SYMBOL */.lY]) {\n      if (key in props[constants/* ASYNC_RESOLVED_SYMBOL */.bN]) {\n        asyncProps[key] = props[constants/* ASYNC_RESOLVED_SYMBOL */.bN][key];\n      } else if (key in props[constants/* ASYNC_ORIGINAL_SYMBOL */.fO]) {\n        asyncProps[key] = props[constants/* ASYNC_ORIGINAL_SYMBOL */.fO][key];\n      }\n    }\n\n    return new this.constructor({ ...props,\n      ...asyncProps,\n      ...newProps\n    });\n  }\n\n}\n\n(0,defineProperty/* default */.Z)(Component, \"componentName\", 'Component');\n\n(0,defineProperty/* default */.Z)(Component, \"defaultProps\", {});\n//# sourceMappingURL=component.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODUwODkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHVCQUF1Qix5QkFBUztBQUNoQztBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQix5QkFBUyxPQUFPO0FBQ3RDLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ087QUFDUCx1Q0FBdUMseUJBQVM7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUM7Ozs7QUM1Q2lFO0FBQ2pCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsYUFBYSwrQkFBUztBQUN0Qjs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEsK0JBQVM7QUFDdEI7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsdUJBQXVCLCtCQUFTO0FBQ2hDOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSx1QkFBdUIsK0JBQVM7QUFDaEM7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhLGFBQWEsc0JBQXNCO0FBQ2hEO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLE1BQU0sY0FBYztBQUNwQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNDOztBQ25OK0I7QUFDMkI7QUFDWjtBQUNrSDtBQUN6SjtBQUNQOztBQUVBLHVDQUF1QyxRQUFRO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0Isa0NBQWdCO0FBQ2hDLGdCQUFnQix1Q0FBcUI7QUFDckMsZ0JBQWdCLHVDQUFxQjs7QUFFckMsa0JBQWtCLHdCQUF3QjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjO0FBQzFDO0FBQ0Esa0pBQWtKLG1DQUFpQjtBQUNuSyx3SkFBd0oseUNBQXVCOztBQUUvSztBQUNBOztBQUVBO0FBQ0E7QUFDQSxxREFBcUQsbUNBQWlCO0FBQ3RFLDJEQUEyRCx5Q0FBdUI7QUFDbEY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1DQUFpQjtBQUNoQyxlQUFlLHlDQUF1Qjs7QUFFdEMsa0NBQWtDLDJCQUFjO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSwyQkFBYztBQUM3QjtBQUNBO0FBQ0E7O0FBRUEsUUFBUSx3Q0FBYztBQUN0Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLHVDQUFxQjtBQUNwQyxlQUFlLHVDQUFxQjtBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlFQUF5RSwwQ0FBZTtBQUN4RixhQUFhLHVDQUFxQjtBQUNsQyxRQUFRO0FBQ1IsYUFBYSx1Q0FBcUI7QUFDbEM7QUFDQSxLQUFLOztBQUVMO0FBQ0EsZUFBZSx1Q0FBcUI7QUFDcEMseUJBQXlCLHVDQUFxQjtBQUM5Qyw2QkFBNkIsdUNBQXFCO0FBQ2xELCtCQUErQix1Q0FBcUI7QUFDcEQ7O0FBRUEseUJBQXlCLHVDQUFxQjtBQUM5Qyw2QkFBNkIsa0NBQWdCLFVBQVUsa0NBQWdCOztBQUV2RTtBQUNBLG9EQUFvRCx1Q0FBcUI7QUFDekU7QUFDQTtBQUNBOztBQUVBLGtCQUFrQix1Q0FBcUI7QUFDdkM7O0FBRUE7QUFDQTs7QUFFQSxTQUFTLDJCQUFjO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLDJCQUFjO0FBQ3ZCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLDRCQUFRO0FBQ1o7O0FBRUE7QUFDQTtBQUNBLHdDOztBQ3RNd0U7QUFDK0Q7QUFDMUY7QUFDN0M7QUFDZTtBQUNmO0FBQ0EsSUFBSSxpQ0FBZTs7QUFFbkIsSUFBSSxpQ0FBZTs7QUFFbkIsSUFBSSxpQ0FBZTs7QUFFbkIsaUJBQWlCLFdBQVc7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQSw0QkFBNEIsdUNBQXFCO0FBQ2pELHVCQUF1Qix1Q0FBcUI7QUFDNUMsZ0NBQWdDLHVDQUFxQjtBQUNyRCxRQUFRLHNCQUFzQix1Q0FBcUI7QUFDbkQsZ0NBQWdDLHVDQUFxQjtBQUNyRDtBQUNBOztBQUVBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBLGlDQUFlOztBQUVmLGlDQUFlLDhCQUE4QjtBQUM3QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy90ZXh0dXJlLmpzP2U2MDAiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL2xpZmVjeWNsZS9wcm9wLXR5cGVzLmpzP2MzZmQiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL2xpZmVjeWNsZS9jcmVhdGUtcHJvcHMuanM/ZmI3NCIsIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vbGlmZWN5Y2xlL2NvbXBvbmVudC5qcz8yZDc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRleHR1cmUyRCB9IGZyb20gJ0BsdW1hLmdsL2NvcmUnO1xuY29uc3QgREVGQVVMVF9URVhUVVJFX1BBUkFNRVRFUlMgPSB7XG4gIFsxMDI0MV06IDk5ODcsXG4gIFsxMDI0MF06IDk3MjksXG4gIFsxMDI0Ml06IDMzMDcxLFxuICBbMTAyNDNdOiAzMzA3MVxufTtcbmNvbnN0IGludGVybmFsVGV4dHVyZXMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXh0dXJlKGdsLCBpbWFnZSwgcGFyYW1ldGVycykge1xuICBpZiAoaW1hZ2UgaW5zdGFuY2VvZiBUZXh0dXJlMkQpIHtcbiAgICByZXR1cm4gaW1hZ2U7XG4gIH0gZWxzZSBpZiAoaW1hZ2UuY29uc3RydWN0b3IgJiYgaW1hZ2UuY29uc3RydWN0b3IubmFtZSAhPT0gJ09iamVjdCcpIHtcbiAgICBpbWFnZSA9IHtcbiAgICAgIGRhdGE6IGltYWdlXG4gICAgfTtcbiAgfVxuXG4gIGxldCBzcGVjaWFsVGV4dHVyZVBhcmFtZXRlcnMgPSBudWxsO1xuXG4gIGlmIChpbWFnZS5jb21wcmVzc2VkKSB7XG4gICAgc3BlY2lhbFRleHR1cmVQYXJhbWV0ZXJzID0ge1xuICAgICAgWzEwMjQxXTogaW1hZ2UuZGF0YS5sZW5ndGggPiAxID8gOTk4NSA6IDk3MjlcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoZ2wsIHsgLi4uaW1hZ2UsXG4gICAgcGFyYW1ldGVyczogeyAuLi5ERUZBVUxUX1RFWFRVUkVfUEFSQU1FVEVSUyxcbiAgICAgIC4uLnNwZWNpYWxUZXh0dXJlUGFyYW1ldGVycyxcbiAgICAgIC4uLnBhcmFtZXRlcnNcbiAgICB9XG4gIH0pO1xuICBpbnRlcm5hbFRleHR1cmVzW3RleHR1cmUuaWRdID0gdHJ1ZTtcbiAgcmV0dXJuIHRleHR1cmU7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveVRleHR1cmUodGV4dHVyZSkge1xuICBpZiAoIXRleHR1cmUgfHwgISh0ZXh0dXJlIGluc3RhbmNlb2YgVGV4dHVyZTJEKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbnRlcm5hbFRleHR1cmVzW3RleHR1cmUuaWRdKSB7XG4gICAgdGV4dHVyZS5kZWxldGUoKTtcbiAgICBkZWxldGUgaW50ZXJuYWxUZXh0dXJlc1t0ZXh0dXJlLmlkXTtcbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGV4dHVyZS5qcy5tYXAiLCJpbXBvcnQgeyBjcmVhdGVUZXh0dXJlLCBkZXN0cm95VGV4dHVyZSB9IGZyb20gJy4uL3V0aWxzL3RleHR1cmUnO1xuaW1wb3J0IHsgZGVlcEVxdWFsIH0gZnJvbSAnLi4vdXRpbHMvZGVlcC1lcXVhbCc7XG5jb25zdCBUWVBFX0RFRklOSVRJT05TID0ge1xuICBib29sZWFuOiB7XG4gICAgdmFsaWRhdGUodmFsdWUsIHByb3BUeXBlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgZXF1YWwodmFsdWUxLCB2YWx1ZTIsIHByb3BUeXBlKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbih2YWx1ZTEpID09PSBCb29sZWFuKHZhbHVlMik7XG4gICAgfVxuXG4gIH0sXG4gIG51bWJlcjoge1xuICAgIHZhbGlkYXRlKHZhbHVlLCBwcm9wVHlwZSkge1xuICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSkgJiYgKCEoJ21heCcgaW4gcHJvcFR5cGUpIHx8IHZhbHVlIDw9IHByb3BUeXBlLm1heCkgJiYgKCEoJ21pbicgaW4gcHJvcFR5cGUpIHx8IHZhbHVlID49IHByb3BUeXBlLm1pbik7XG4gICAgfVxuXG4gIH0sXG4gIGNvbG9yOiB7XG4gICAgdmFsaWRhdGUodmFsdWUsIHByb3BUeXBlKSB7XG4gICAgICByZXR1cm4gcHJvcFR5cGUub3B0aW9uYWwgJiYgIXZhbHVlIHx8IGlzQXJyYXkodmFsdWUpICYmICh2YWx1ZS5sZW5ndGggPT09IDMgfHwgdmFsdWUubGVuZ3RoID09PSA0KTtcbiAgICB9LFxuXG4gICAgZXF1YWwodmFsdWUxLCB2YWx1ZTIsIHByb3BUeXBlKSB7XG4gICAgICByZXR1cm4gZGVlcEVxdWFsKHZhbHVlMSwgdmFsdWUyLCAxKTtcbiAgICB9XG5cbiAgfSxcbiAgYWNjZXNzb3I6IHtcbiAgICB2YWxpZGF0ZSh2YWx1ZSwgcHJvcFR5cGUpIHtcbiAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IGdldFR5cGVPZih2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWVUeXBlID09PSAnZnVuY3Rpb24nIHx8IHZhbHVlVHlwZSA9PT0gZ2V0VHlwZU9mKHByb3BUeXBlLnZhbHVlKTtcbiAgICB9LFxuXG4gICAgZXF1YWwodmFsdWUxLCB2YWx1ZTIsIHByb3BUeXBlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlMiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlZXBFcXVhbCh2YWx1ZTEsIHZhbHVlMiwgMSk7XG4gICAgfVxuXG4gIH0sXG4gIGFycmF5OiB7XG4gICAgdmFsaWRhdGUodmFsdWUsIHByb3BUeXBlKSB7XG4gICAgICByZXR1cm4gcHJvcFR5cGUub3B0aW9uYWwgJiYgIXZhbHVlIHx8IGlzQXJyYXkodmFsdWUpO1xuICAgIH0sXG5cbiAgICBlcXVhbCh2YWx1ZTEsIHZhbHVlMiwgcHJvcFR5cGUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY29tcGFyZVxuICAgICAgfSA9IHByb3BUeXBlO1xuICAgICAgY29uc3QgZGVwdGggPSBOdW1iZXIuaXNJbnRlZ2VyKGNvbXBhcmUpID8gY29tcGFyZSA6IGNvbXBhcmUgPyAxIDogMDtcbiAgICAgIHJldHVybiBjb21wYXJlID8gZGVlcEVxdWFsKHZhbHVlMSwgdmFsdWUyLCBkZXB0aCkgOiB2YWx1ZTEgPT09IHZhbHVlMjtcbiAgICB9XG5cbiAgfSxcbiAgb2JqZWN0OiB7XG4gICAgZXF1YWwodmFsdWUxLCB2YWx1ZTIsIHByb3BUeXBlKSB7XG4gICAgICBpZiAocHJvcFR5cGUuaWdub3JlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvbXBhcmVcbiAgICAgIH0gPSBwcm9wVHlwZTtcbiAgICAgIGNvbnN0IGRlcHRoID0gTnVtYmVyLmlzSW50ZWdlcihjb21wYXJlKSA/IGNvbXBhcmUgOiBjb21wYXJlID8gMSA6IDA7XG4gICAgICByZXR1cm4gY29tcGFyZSA/IGRlZXBFcXVhbCh2YWx1ZTEsIHZhbHVlMiwgZGVwdGgpIDogdmFsdWUxID09PSB2YWx1ZTI7XG4gICAgfVxuXG4gIH0sXG4gIGZ1bmN0aW9uOiB7XG4gICAgdmFsaWRhdGUodmFsdWUsIHByb3BUeXBlKSB7XG4gICAgICByZXR1cm4gcHJvcFR5cGUub3B0aW9uYWwgJiYgIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9LFxuXG4gICAgZXF1YWwodmFsdWUxLCB2YWx1ZTIsIHByb3BUeXBlKSB7XG4gICAgICBjb25zdCBzaG91bGRJZ25vcmUgPSAhcHJvcFR5cGUuY29tcGFyZSAmJiBwcm9wVHlwZS5pZ25vcmUgIT09IGZhbHNlO1xuICAgICAgcmV0dXJuIHNob3VsZElnbm9yZSB8fCB2YWx1ZTEgPT09IHZhbHVlMjtcbiAgICB9XG5cbiAgfSxcbiAgZGF0YToge1xuICAgIHRyYW5zZm9ybTogKHZhbHVlLCBwcm9wVHlwZSwgY29tcG9uZW50KSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRhdGFUcmFuc2Zvcm1cbiAgICAgIH0gPSBjb21wb25lbnQucHJvcHM7XG4gICAgICByZXR1cm4gZGF0YVRyYW5zZm9ybSAmJiB2YWx1ZSA/IGRhdGFUcmFuc2Zvcm0odmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICB9LFxuICBpbWFnZToge1xuICAgIHRyYW5zZm9ybTogKHZhbHVlLCBwcm9wVHlwZSwgY29tcG9uZW50KSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQ7XG5cbiAgICAgIGlmICghY29udGV4dCB8fCAhY29udGV4dC5nbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNyZWF0ZVRleHR1cmUoY29udGV4dC5nbCwgdmFsdWUsIHsgLi4ucHJvcFR5cGUucGFyYW1ldGVycyxcbiAgICAgICAgLi4uY29tcG9uZW50LnByb3BzLnRleHR1cmVQYXJhbWV0ZXJzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlbGVhc2U6IHZhbHVlID0+IHtcbiAgICAgIGRlc3Ryb3lUZXh0dXJlKHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQcm9wVHlwZXMocHJvcERlZnMpIHtcbiAgY29uc3QgcHJvcFR5cGVzID0ge307XG4gIGNvbnN0IGRlZmF1bHRQcm9wcyA9IHt9O1xuICBjb25zdCBkZXByZWNhdGVkUHJvcHMgPSB7fTtcblxuICBmb3IgKGNvbnN0IFtwcm9wTmFtZSwgcHJvcERlZl0gb2YgT2JqZWN0LmVudHJpZXMocHJvcERlZnMpKSB7XG4gICAgY29uc3QgZGVwcmVjYXRlZCA9IHByb3BEZWYgPT09IG51bGwgfHwgcHJvcERlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvcERlZi5kZXByZWNhdGVkRm9yO1xuXG4gICAgaWYgKGRlcHJlY2F0ZWQpIHtcbiAgICAgIGRlcHJlY2F0ZWRQcm9wc1twcm9wTmFtZV0gPSBBcnJheS5pc0FycmF5KGRlcHJlY2F0ZWQpID8gZGVwcmVjYXRlZCA6IFtkZXByZWNhdGVkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvcFR5cGUgPSBwYXJzZVByb3BUeXBlKHByb3BOYW1lLCBwcm9wRGVmKTtcbiAgICAgIHByb3BUeXBlc1twcm9wTmFtZV0gPSBwcm9wVHlwZTtcbiAgICAgIGRlZmF1bHRQcm9wc1twcm9wTmFtZV0gPSBwcm9wVHlwZS52YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BUeXBlcyxcbiAgICBkZWZhdWx0UHJvcHMsXG4gICAgZGVwcmVjYXRlZFByb3BzXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlUHJvcFR5cGUobmFtZSwgcHJvcERlZikge1xuICBzd2l0Y2ggKGdldFR5cGVPZihwcm9wRGVmKSkge1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICByZXR1cm4gbm9ybWFsaXplUHJvcERlZmluaXRpb24obmFtZSwgcHJvcERlZik7XG5cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICByZXR1cm4gbm9ybWFsaXplUHJvcERlZmluaXRpb24obmFtZSwge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICB2YWx1ZTogcHJvcERlZixcbiAgICAgICAgY29tcGFyZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gbm9ybWFsaXplUHJvcERlZmluaXRpb24obmFtZSwge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICAgIHZhbHVlOiBwcm9wRGVmXG4gICAgICB9KTtcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICByZXR1cm4gbm9ybWFsaXplUHJvcERlZmluaXRpb24obmFtZSwge1xuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgdmFsdWU6IHByb3BEZWZcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgcmV0dXJuIG5vcm1hbGl6ZVByb3BEZWZpbml0aW9uKG5hbWUsIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgdmFsdWU6IHByb3BEZWYsXG4gICAgICAgIGNvbXBhcmU6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHR5cGU6ICd1bmtub3duJyxcbiAgICAgICAgdmFsdWU6IHByb3BEZWZcbiAgICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplUHJvcERlZmluaXRpb24obmFtZSwgcHJvcERlZikge1xuICBpZiAoISgndHlwZScgaW4gcHJvcERlZikpIHtcbiAgICBpZiAoISgndmFsdWUnIGluIHByb3BEZWYpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lLFxuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgdmFsdWU6IHByb3BEZWZcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlOiBnZXRUeXBlT2YocHJvcERlZi52YWx1ZSksXG4gICAgICAuLi5wcm9wRGVmXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICAuLi5UWVBFX0RFRklOSVRJT05TW3Byb3BEZWYudHlwZV0sXG4gICAgLi4ucHJvcERlZlxuICB9O1xufVxuXG5mdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpO1xufVxuXG5mdW5jdGlvbiBnZXRUeXBlT2YodmFsdWUpIHtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuICdhcnJheSc7XG4gIH1cblxuICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gJ251bGwnO1xuICB9XG5cbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3AtdHlwZXMuanMubWFwIiwiaW1wb3J0IGxvZyBmcm9tICcuLi91dGlscy9sb2cnO1xuaW1wb3J0IHsgaXNBc3luY0l0ZXJhYmxlIH0gZnJvbSAnLi4vdXRpbHMvaXRlcmFibGUtdXRpbHMnO1xuaW1wb3J0IHsgcGFyc2VQcm9wVHlwZXMgfSBmcm9tICcuL3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgQ09NUE9ORU5UX1NZTUJPTCwgUFJPUF9UWVBFU19TWU1CT0wsIERFUFJFQ0FURURfUFJPUFNfU1lNQk9MLCBBU1lOQ19PUklHSU5BTF9TWU1CT0wsIEFTWU5DX1JFU09MVkVEX1NZTUJPTCwgQVNZTkNfREVGQVVMVFNfU1lNQk9MIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb3BzKGNvbXBvbmVudCwgcHJvcE9iamVjdHMpIHtcbiAgbGV0IGV4dGVuc2lvbnM7XG5cbiAgZm9yIChsZXQgaSA9IHByb3BPYmplY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgcHJvcHMgPSBwcm9wT2JqZWN0c1tpXTtcblxuICAgIGlmICgnZXh0ZW5zaW9ucycgaW4gcHJvcHMpIHtcbiAgICAgIGV4dGVuc2lvbnMgPSBwcm9wcy5leHRlbnNpb25zO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHByb3BzUHJvdG90eXBlID0gZ2V0UHJvcHNQcm90b3R5cGUoY29tcG9uZW50LmNvbnN0cnVjdG9yLCBleHRlbnNpb25zKTtcbiAgY29uc3QgcHJvcHNJbnN0YW5jZSA9IE9iamVjdC5jcmVhdGUocHJvcHNQcm90b3R5cGUpO1xuICBwcm9wc0luc3RhbmNlW0NPTVBPTkVOVF9TWU1CT0xdID0gY29tcG9uZW50O1xuICBwcm9wc0luc3RhbmNlW0FTWU5DX09SSUdJTkFMX1NZTUJPTF0gPSB7fTtcbiAgcHJvcHNJbnN0YW5jZVtBU1lOQ19SRVNPTFZFRF9TWU1CT0xdID0ge307XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wT2JqZWN0cy5sZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IHByb3BzID0gcHJvcE9iamVjdHNbaV07XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgcHJvcHNJbnN0YW5jZVtrZXldID0gcHJvcHNba2V5XTtcbiAgICB9XG4gIH1cblxuICBPYmplY3QuZnJlZXplKHByb3BzSW5zdGFuY2UpO1xuICByZXR1cm4gcHJvcHNJbnN0YW5jZTtcbn1cbmNvbnN0IE1lcmdlZERlZmF1bHRQcm9wc0NhY2hlS2V5ID0gJ19tZXJnZWREZWZhdWx0UHJvcHMnO1xuXG5mdW5jdGlvbiBnZXRQcm9wc1Byb3RvdHlwZShjb21wb25lbnRDbGFzcywgZXh0ZW5zaW9ucykge1xuICBsZXQgY2FjaGVLZXkgPSBNZXJnZWREZWZhdWx0UHJvcHNDYWNoZUtleTtcblxuICBpZiAoZXh0ZW5zaW9ucykge1xuICAgIGZvciAoY29uc3QgZXh0ZW5zaW9uIG9mIGV4dGVuc2lvbnMpIHtcbiAgICAgIGNvbnN0IEV4dGVuc2lvbkNsYXNzID0gZXh0ZW5zaW9uLmNvbnN0cnVjdG9yO1xuXG4gICAgICBpZiAoRXh0ZW5zaW9uQ2xhc3MpIHtcbiAgICAgICAgY2FjaGVLZXkgKz0gXCI6XCIuY29uY2F0KEV4dGVuc2lvbkNsYXNzLmV4dGVuc2lvbk5hbWUgfHwgRXh0ZW5zaW9uQ2xhc3MubmFtZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGVmYXVsdFByb3BzID0gZ2V0T3duUHJvcGVydHkoY29tcG9uZW50Q2xhc3MsIGNhY2hlS2V5KTtcblxuICBpZiAoIWRlZmF1bHRQcm9wcykge1xuICAgIHJldHVybiBjb21wb25lbnRDbGFzc1tjYWNoZUtleV0gPSBjcmVhdGVQcm9wc1Byb3RvdHlwZUFuZFR5cGVzKGNvbXBvbmVudENsYXNzLCBleHRlbnNpb25zIHx8IFtdKTtcbiAgfVxuXG4gIHJldHVybiBkZWZhdWx0UHJvcHM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb3BzUHJvdG90eXBlQW5kVHlwZXMoY29tcG9uZW50Q2xhc3MsIGV4dGVuc2lvbnMpIHtcbiAgY29uc3QgcGFyZW50ID0gY29tcG9uZW50Q2xhc3MucHJvdG90eXBlO1xuXG4gIGlmICghcGFyZW50KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBwYXJlbnRDbGFzcyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjb21wb25lbnRDbGFzcyk7XG4gIGNvbnN0IHBhcmVudERlZmF1bHRQcm9wcyA9IGdldFByb3BzUHJvdG90eXBlKHBhcmVudENsYXNzKTtcbiAgY29uc3QgY29tcG9uZW50RGVmYXVsdFByb3BzID0gZ2V0T3duUHJvcGVydHkoY29tcG9uZW50Q2xhc3MsICdkZWZhdWx0UHJvcHMnKSB8fCB7fTtcbiAgY29uc3QgY29tcG9uZW50UHJvcERlZnMgPSBwYXJzZVByb3BUeXBlcyhjb21wb25lbnREZWZhdWx0UHJvcHMpO1xuICBjb25zdCBkZWZhdWx0UHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIHBhcmVudERlZmF1bHRQcm9wcywgY29tcG9uZW50UHJvcERlZnMuZGVmYXVsdFByb3BzKTtcbiAgY29uc3QgcHJvcFR5cGVzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBwYXJlbnREZWZhdWx0UHJvcHMgPT09IG51bGwgfHwgcGFyZW50RGVmYXVsdFByb3BzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnREZWZhdWx0UHJvcHNbUFJPUF9UWVBFU19TWU1CT0xdLCBjb21wb25lbnRQcm9wRGVmcy5wcm9wVHlwZXMpO1xuICBjb25zdCBkZXByZWNhdGVkUHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIHBhcmVudERlZmF1bHRQcm9wcyA9PT0gbnVsbCB8fCBwYXJlbnREZWZhdWx0UHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudERlZmF1bHRQcm9wc1tERVBSRUNBVEVEX1BST1BTX1NZTUJPTF0sIGNvbXBvbmVudFByb3BEZWZzLmRlcHJlY2F0ZWRQcm9wcyk7XG5cbiAgZm9yIChjb25zdCBleHRlbnNpb24gb2YgZXh0ZW5zaW9ucykge1xuICAgIGNvbnN0IGV4dGVuc2lvbkRlZmF1bHRQcm9wcyA9IGdldFByb3BzUHJvdG90eXBlKGV4dGVuc2lvbi5jb25zdHJ1Y3Rvcik7XG5cbiAgICBpZiAoZXh0ZW5zaW9uRGVmYXVsdFByb3BzKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGRlZmF1bHRQcm9wcywgZXh0ZW5zaW9uRGVmYXVsdFByb3BzKTtcbiAgICAgIE9iamVjdC5hc3NpZ24ocHJvcFR5cGVzLCBleHRlbnNpb25EZWZhdWx0UHJvcHNbUFJPUF9UWVBFU19TWU1CT0xdKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oZGVwcmVjYXRlZFByb3BzLCBleHRlbnNpb25EZWZhdWx0UHJvcHNbREVQUkVDQVRFRF9QUk9QU19TWU1CT0xdKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVQcm9wc1Byb3RvdHlwZShkZWZhdWx0UHJvcHMsIGNvbXBvbmVudENsYXNzKTtcbiAgYWRkQXN5bmNQcm9wc1RvUHJvcFByb3RvdHlwZShkZWZhdWx0UHJvcHMsIHByb3BUeXBlcyk7XG4gIGFkZERlcHJlY2F0ZWRQcm9wc1RvUHJvcFByb3RvdHlwZShkZWZhdWx0UHJvcHMsIGRlcHJlY2F0ZWRQcm9wcyk7XG4gIGRlZmF1bHRQcm9wc1tQUk9QX1RZUEVTX1NZTUJPTF0gPSBwcm9wVHlwZXM7XG4gIGRlZmF1bHRQcm9wc1tERVBSRUNBVEVEX1BST1BTX1NZTUJPTF0gPSBkZXByZWNhdGVkUHJvcHM7XG5cbiAgaWYgKGV4dGVuc2lvbnMubGVuZ3RoID09PSAwICYmICFoYXNPd25Qcm9wZXJ0eShjb21wb25lbnRDbGFzcywgJ19wcm9wVHlwZXMnKSkge1xuICAgIGNvbXBvbmVudENsYXNzLl9wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG4gIH1cblxuICByZXR1cm4gZGVmYXVsdFByb3BzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Byb3RvdHlwZShkZWZhdWx0UHJvcHMsIGNvbXBvbmVudENsYXNzKSB7XG4gIGNvbnN0IGlkID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnRDbGFzcyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGRlZmF1bHRQcm9wcywge1xuICAgIGlkOiB7XG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBpZFxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZERlcHJlY2F0ZWRQcm9wc1RvUHJvcFByb3RvdHlwZShkZWZhdWx0UHJvcHMsIGRlcHJlY2F0ZWRQcm9wcykge1xuICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIGRlcHJlY2F0ZWRQcm9wcykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWZhdWx0UHJvcHMsIHByb3BOYW1lLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblxuICAgICAgc2V0KG5ld1ZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG5hbWVTdHIgPSBcIlwiLmNvbmNhdCh0aGlzLmlkLCBcIjogXCIpLmNvbmNhdChwcm9wTmFtZSk7XG5cbiAgICAgICAgZm9yIChjb25zdCBuZXdQcm9wTmFtZSBvZiBkZXByZWNhdGVkUHJvcHNbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh0aGlzLCBuZXdQcm9wTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmV3UHJvcE5hbWVdID0gbmV3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbG9nLmRlcHJlY2F0ZWQobmFtZVN0ciwgZGVwcmVjYXRlZFByb3BzW3Byb3BOYW1lXS5qb2luKCcvJykpKCk7XG4gICAgICB9XG5cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRBc3luY1Byb3BzVG9Qcm9wUHJvdG90eXBlKGRlZmF1bHRQcm9wcywgcHJvcFR5cGVzKSB7XG4gIGNvbnN0IGRlZmF1bHRWYWx1ZXMgPSB7fTtcbiAgY29uc3QgZGVzY3JpcHRvcnMgPSB7fTtcblxuICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgIGNvbnN0IHByb3BUeXBlID0gcHJvcFR5cGVzW3Byb3BOYW1lXTtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgdmFsdWVcbiAgICB9ID0gcHJvcFR5cGU7XG5cbiAgICBpZiAocHJvcFR5cGUuYXN5bmMpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIGRlc2NyaXB0b3JzW25hbWVdID0gZ2V0RGVzY3JpcHRvckZvckFzeW5jUHJvcChuYW1lKTtcbiAgICB9XG4gIH1cblxuICBkZWZhdWx0UHJvcHNbQVNZTkNfREVGQVVMVFNfU1lNQk9MXSA9IGRlZmF1bHRWYWx1ZXM7XG4gIGRlZmF1bHRQcm9wc1tBU1lOQ19PUklHSU5BTF9TWU1CT0xdID0ge307XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGRlZmF1bHRQcm9wcywgZGVzY3JpcHRvcnMpO1xufVxuXG5mdW5jdGlvbiBnZXREZXNjcmlwdG9yRm9yQXN5bmNQcm9wKG5hbWUpIHtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgc2V0KG5ld1ZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlID09PSAnc3RyaW5nJyB8fCBuZXdWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2UgfHwgaXNBc3luY0l0ZXJhYmxlKG5ld1ZhbHVlKSkge1xuICAgICAgICB0aGlzW0FTWU5DX09SSUdJTkFMX1NZTUJPTF1bbmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNbQVNZTkNfUkVTT0xWRURfU1lNQk9MXVtuYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXQoKSB7XG4gICAgICBpZiAodGhpc1tBU1lOQ19SRVNPTFZFRF9TWU1CT0xdKSB7XG4gICAgICAgIGlmIChuYW1lIGluIHRoaXNbQVNZTkNfUkVTT0xWRURfU1lNQk9MXSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpc1tBU1lOQ19SRVNPTFZFRF9TWU1CT0xdW25hbWVdO1xuICAgICAgICAgIHJldHVybiB2YWx1ZSB8fCB0aGlzW0FTWU5DX0RFRkFVTFRTX1NZTUJPTF1bbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZSBpbiB0aGlzW0FTWU5DX09SSUdJTkFMX1NZTUJPTF0pIHtcbiAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXNbQ09NUE9ORU5UX1NZTUJPTF0gJiYgdGhpc1tDT01QT05FTlRfU1lNQk9MXS5pbnRlcm5hbFN0YXRlO1xuXG4gICAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhc0FzeW5jUHJvcChuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmdldEFzeW5jUHJvcChuYW1lKSB8fCB0aGlzW0FTWU5DX0RFRkFVTFRTX1NZTUJPTF1bbmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzW0FTWU5DX0RFRkFVTFRTX1NZTUJPTF1bbmFtZV07XG4gICAgfVxuXG4gIH07XG59XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iamVjdCwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcCk7XG59XG5cbmZ1bmN0aW9uIGdldE93blByb3BlcnR5KG9iamVjdCwgcHJvcCkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkob2JqZWN0LCBwcm9wKSAmJiBvYmplY3RbcHJvcF07XG59XG5cbmZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50Q2xhc3MpIHtcbiAgY29uc3QgY29tcG9uZW50TmFtZSA9IGdldE93blByb3BlcnR5KGNvbXBvbmVudENsYXNzLCAnbGF5ZXJOYW1lJykgfHwgZ2V0T3duUHJvcGVydHkoY29tcG9uZW50Q2xhc3MsICdjb21wb25lbnROYW1lJyk7XG5cbiAgaWYgKCFjb21wb25lbnROYW1lKSB7XG4gICAgbG9nLm9uY2UoMCwgXCJcIi5jb25jYXQoY29tcG9uZW50Q2xhc3MubmFtZSwgXCIuY29tcG9uZW50TmFtZSBub3Qgc3BlY2lmaWVkXCIpKSgpO1xuICB9XG5cbiAgcmV0dXJuIGNvbXBvbmVudE5hbWUgfHwgY29tcG9uZW50Q2xhc3MubmFtZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1wcm9wcy5qcy5tYXAiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IHsgQ09NUE9ORU5UX1NZTUJPTCwgUFJPUF9UWVBFU19TWU1CT0wsIEFTWU5DX09SSUdJTkFMX1NZTUJPTCwgQVNZTkNfUkVTT0xWRURfU1lNQk9MLCBBU1lOQ19ERUZBVUxUU19TWU1CT0wgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBjcmVhdGVQcm9wcyB9IGZyb20gJy4vY3JlYXRlLXByb3BzJztcbmxldCBjb3VudGVyID0gMDtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKC4uLnByb3BPYmplY3RzKSB7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByb3BzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb3VudFwiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5wcm9wcyA9IGNyZWF0ZVByb3BzKHRoaXMsIHByb3BPYmplY3RzKTtcbiAgICB0aGlzLmlkID0gdGhpcy5wcm9wcy5pZDtcbiAgICB0aGlzLmNvdW50ID0gY291bnRlcisrO1xuICB9XG5cbiAgY2xvbmUobmV3UHJvcHMpIHtcbiAgICBjb25zdCB7XG4gICAgICBwcm9wc1xuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IGFzeW5jUHJvcHMgPSB7fTtcblxuICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzW0FTWU5DX0RFRkFVTFRTX1NZTUJPTF0pIHtcbiAgICAgIGlmIChrZXkgaW4gcHJvcHNbQVNZTkNfUkVTT0xWRURfU1lNQk9MXSkge1xuICAgICAgICBhc3luY1Byb3BzW2tleV0gPSBwcm9wc1tBU1lOQ19SRVNPTFZFRF9TWU1CT0xdW2tleV07XG4gICAgICB9IGVsc2UgaWYgKGtleSBpbiBwcm9wc1tBU1lOQ19PUklHSU5BTF9TWU1CT0xdKSB7XG4gICAgICAgIGFzeW5jUHJvcHNba2V5XSA9IHByb3BzW0FTWU5DX09SSUdJTkFMX1NZTUJPTF1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoeyAuLi5wcm9wcyxcbiAgICAgIC4uLmFzeW5jUHJvcHMsXG4gICAgICAuLi5uZXdQcm9wc1xuICAgIH0pO1xuICB9XG5cbn1cblxuX2RlZmluZVByb3BlcnR5KENvbXBvbmVudCwgXCJjb21wb25lbnROYW1lXCIsICdDb21wb25lbnQnKTtcblxuX2RlZmluZVByb3BlcnR5KENvbXBvbmVudCwgXCJkZWZhdWx0UHJvcHNcIiwge30pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcG9uZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///85089\n")},85409:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E7\": function() { return /* binding */ DEPRECATED_PROPS_SYMBOL; },\n/* harmony export */   \"Wb\": function() { return /* binding */ PROP_TYPES_SYMBOL; },\n/* harmony export */   \"bN\": function() { return /* binding */ ASYNC_RESOLVED_SYMBOL; },\n/* harmony export */   \"dt\": function() { return /* binding */ LIFECYCLE; },\n/* harmony export */   \"fO\": function() { return /* binding */ ASYNC_ORIGINAL_SYMBOL; },\n/* harmony export */   \"fm\": function() { return /* binding */ COMPONENT_SYMBOL; },\n/* harmony export */   \"lY\": function() { return /* binding */ ASYNC_DEFAULTS_SYMBOL; }\n/* harmony export */ });\nconst LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nconst COMPONENT_SYMBOL = Symbol.for('component');\nconst PROP_TYPES_SYMBOL = Symbol.for('propTypes');\nconst DEPRECATED_PROPS_SYMBOL = Symbol.for('deprecatedProps');\nconst ASYNC_DEFAULTS_SYMBOL = Symbol.for('asyncPropDefaults');\nconst ASYNC_ORIGINAL_SYMBOL = Symbol.for('asyncPropOriginal');\nconst ASYNC_RESOLVED_SYMBOL = Symbol.for('asyncPropResolved');\n//# sourceMappingURL=constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODU0MDkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL2xpZmVjeWNsZS9jb25zdGFudHMuanM/MjBkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgTElGRUNZQ0xFID0ge1xuICBOT19TVEFURTogJ0F3YWl0aW5nIHN0YXRlJyxcbiAgTUFUQ0hFRDogJ01hdGNoZWQuIFN0YXRlIHRyYW5zZmVycmVkIGZyb20gcHJldmlvdXMgbGF5ZXInLFxuICBJTklUSUFMSVpFRDogJ0luaXRpYWxpemVkJyxcbiAgQVdBSVRJTkdfR0M6ICdEaXNjYXJkZWQuIEF3YWl0aW5nIGdhcmJhZ2UgY29sbGVjdGlvbicsXG4gIEFXQUlUSU5HX0ZJTkFMSVpBVElPTjogJ05vIGxvbmdlciBtYXRjaGVkLiBBd2FpdGluZyBnYXJiYWdlIGNvbGxlY3Rpb24nLFxuICBGSU5BTElaRUQ6ICdGaW5hbGl6ZWQhIEF3YWl0aW5nIGdhcmJhZ2UgY29sbGVjdGlvbidcbn07XG5leHBvcnQgY29uc3QgQ09NUE9ORU5UX1NZTUJPTCA9IFN5bWJvbC5mb3IoJ2NvbXBvbmVudCcpO1xuZXhwb3J0IGNvbnN0IFBST1BfVFlQRVNfU1lNQk9MID0gU3ltYm9sLmZvcigncHJvcFR5cGVzJyk7XG5leHBvcnQgY29uc3QgREVQUkVDQVRFRF9QUk9QU19TWU1CT0wgPSBTeW1ib2wuZm9yKCdkZXByZWNhdGVkUHJvcHMnKTtcbmV4cG9ydCBjb25zdCBBU1lOQ19ERUZBVUxUU19TWU1CT0wgPSBTeW1ib2wuZm9yKCdhc3luY1Byb3BEZWZhdWx0cycpO1xuZXhwb3J0IGNvbnN0IEFTWU5DX09SSUdJTkFMX1NZTUJPTCA9IFN5bWJvbC5mb3IoJ2FzeW5jUHJvcE9yaWdpbmFsJyk7XG5leHBvcnQgY29uc3QgQVNZTkNfUkVTT0xWRURfU1lNQk9MID0gU3ltYm9sLmZvcignYXN5bmNQcm9wUmVzb2x2ZWQnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///85409\n")},71761:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Yt": function() { return /* binding */ diffProps; },\n/* harmony export */   "eQ": function() { return /* binding */ validateProps; }\n/* harmony export */ });\n/* unused harmony export compareProps */\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85409);\n\nfunction validateProps(props) {\n  const propTypes = props[_constants__WEBPACK_IMPORTED_MODULE_0__/* .PROP_TYPES_SYMBOL */ .Wb];\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      validate\n    } = propType;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error("Invalid prop ".concat(propName, ": ").concat(props[propName]));\n    }\n  }\n}\nfunction diffProps(props, oldProps) {\n  const propsChangedReason = compareProps({\n    newProps: props,\n    oldProps,\n    propTypes: props[_constants__WEBPACK_IMPORTED_MODULE_0__/* .PROP_TYPES_SYMBOL */ .Wb],\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  const dataChangedReason = diffDataProps(props, oldProps);\n  let updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return false;\n  }\n\n  const result = {};\n  const propTypes = props[_constants__WEBPACK_IMPORTED_MODULE_0__/* .PROP_TYPES_SYMBOL */ .Wb];\n  let changed = false;\n\n  for (const key in props.transitions) {\n    const propType = propTypes[key];\n    const type = propType && propType.type;\n    const isTransitionable = type === \'number\' || type === \'color\' || type === \'array\';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n      changed = true;\n    }\n  }\n\n  return changed ? result : false;\n}\n\nfunction compareProps({\n  newProps,\n  oldProps,\n  ignoreProps = {},\n  propTypes = {},\n  triggerName = \'props\'\n}) {\n  if (oldProps === newProps) {\n    return false;\n  }\n\n  if (typeof newProps !== \'object\' || newProps === null) {\n    return "".concat(triggerName, " changed shallowly");\n  }\n\n  if (typeof oldProps !== \'object\' || oldProps === null) {\n    return "".concat(triggerName, " changed shallowly");\n  }\n\n  for (const key of Object.keys(newProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return "".concat(triggerName, ".").concat(key, " added");\n      }\n\n      const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return "".concat(triggerName, ".").concat(key, " ").concat(changed);\n      }\n    }\n  }\n\n  for (const key of Object.keys(oldProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in newProps)) {\n        return "".concat(triggerName, ".").concat(key, " dropped");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, key)) {\n        const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n        if (changed) {\n          return "".concat(triggerName, ".").concat(key, " ").concat(changed);\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  let equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return \'changed deeply\';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return \'changed deeply\';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return \'changed shallowly\';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return \'oldProps is null, initial diff\';\n  }\n\n  let dataChanged = false;\n  const {\n    dataComparator,\n    _dataDiff\n  } = props;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = \'Data comparator detected a change\';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = \'A new data container was supplied\';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return {\n      all: true\n    };\n  }\n\n  if (\'all\' in props.updateTriggers) {\n    const diffReason = diffUpdateTrigger(props, oldProps, \'all\');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  const reason = {};\n  let changed = false;\n\n  for (const triggerName in props.updateTriggers) {\n    if (triggerName !== \'all\') {\n      const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (diffReason) {\n        reason[triggerName] = true;\n        changed = true;\n      }\n    }\n  }\n\n  return changed ? reason : false;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return true;\n  }\n\n  const oldExtensions = oldProps.extensions;\n  const {\n    extensions\n  } = props;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (!oldExtensions || !extensions) {\n    return true;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (let i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  let newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  let oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  const diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName\n  });\n  return diffReason;\n}\n//# sourceMappingURL=props.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzE3NjEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdEO0FBQ3pDO0FBQ1AsMEJBQTBCLG1FQUFpQjs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtRUFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsbUVBQWlCO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsZ0JBQWdCO0FBQ2hCO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsdUJBQXVCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vbGlmZWN5Y2xlL3Byb3BzLmpzP2RkNzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUFJPUF9UWVBFU19TWU1CT0wgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhwcm9wcykge1xuICBjb25zdCBwcm9wVHlwZXMgPSBwcm9wc1tQUk9QX1RZUEVTX1NZTUJPTF07XG5cbiAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBwcm9wVHlwZXMpIHtcbiAgICBjb25zdCBwcm9wVHlwZSA9IHByb3BUeXBlc1twcm9wTmFtZV07XG4gICAgY29uc3Qge1xuICAgICAgdmFsaWRhdGVcbiAgICB9ID0gcHJvcFR5cGU7XG5cbiAgICBpZiAodmFsaWRhdGUgJiYgIXZhbGlkYXRlKHByb3BzW3Byb3BOYW1lXSwgcHJvcFR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHByb3AgXCIuY29uY2F0KHByb3BOYW1lLCBcIjogXCIpLmNvbmNhdChwcm9wc1twcm9wTmFtZV0pKTtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkaWZmUHJvcHMocHJvcHMsIG9sZFByb3BzKSB7XG4gIGNvbnN0IHByb3BzQ2hhbmdlZFJlYXNvbiA9IGNvbXBhcmVQcm9wcyh7XG4gICAgbmV3UHJvcHM6IHByb3BzLFxuICAgIG9sZFByb3BzLFxuICAgIHByb3BUeXBlczogcHJvcHNbUFJPUF9UWVBFU19TWU1CT0xdLFxuICAgIGlnbm9yZVByb3BzOiB7XG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgdXBkYXRlVHJpZ2dlcnM6IG51bGwsXG4gICAgICBleHRlbnNpb25zOiBudWxsLFxuICAgICAgdHJhbnNpdGlvbnM6IG51bGxcbiAgICB9XG4gIH0pO1xuICBjb25zdCBkYXRhQ2hhbmdlZFJlYXNvbiA9IGRpZmZEYXRhUHJvcHMocHJvcHMsIG9sZFByb3BzKTtcbiAgbGV0IHVwZGF0ZVRyaWdnZXJzQ2hhbmdlZFJlYXNvbiA9IGZhbHNlO1xuXG4gIGlmICghZGF0YUNoYW5nZWRSZWFzb24pIHtcbiAgICB1cGRhdGVUcmlnZ2Vyc0NoYW5nZWRSZWFzb24gPSBkaWZmVXBkYXRlVHJpZ2dlcnMocHJvcHMsIG9sZFByb3BzKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZGF0YUNoYW5nZWQ6IGRhdGFDaGFuZ2VkUmVhc29uLFxuICAgIHByb3BzQ2hhbmdlZDogcHJvcHNDaGFuZ2VkUmVhc29uLFxuICAgIHVwZGF0ZVRyaWdnZXJzQ2hhbmdlZDogdXBkYXRlVHJpZ2dlcnNDaGFuZ2VkUmVhc29uLFxuICAgIGV4dGVuc2lvbnNDaGFuZ2VkOiBkaWZmRXh0ZW5zaW9ucyhwcm9wcywgb2xkUHJvcHMpLFxuICAgIHRyYW5zaXRpb25zQ2hhbmdlZDogZGlmZlRyYW5zaXRpb25zKHByb3BzLCBvbGRQcm9wcylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGlmZlRyYW5zaXRpb25zKHByb3BzLCBvbGRQcm9wcykge1xuICBpZiAoIXByb3BzLnRyYW5zaXRpb25zKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0ge307XG4gIGNvbnN0IHByb3BUeXBlcyA9IHByb3BzW1BST1BfVFlQRVNfU1lNQk9MXTtcbiAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcblxuICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcy50cmFuc2l0aW9ucykge1xuICAgIGNvbnN0IHByb3BUeXBlID0gcHJvcFR5cGVzW2tleV07XG4gICAgY29uc3QgdHlwZSA9IHByb3BUeXBlICYmIHByb3BUeXBlLnR5cGU7XG4gICAgY29uc3QgaXNUcmFuc2l0aW9uYWJsZSA9IHR5cGUgPT09ICdudW1iZXInIHx8IHR5cGUgPT09ICdjb2xvcicgfHwgdHlwZSA9PT0gJ2FycmF5JztcblxuICAgIGlmIChpc1RyYW5zaXRpb25hYmxlICYmIGNvbXBhcmVQcm9wVmFsdWVzKHByb3BzW2tleV0sIG9sZFByb3BzW2tleV0sIHByb3BUeXBlKSkge1xuICAgICAgcmVzdWx0W2tleV0gPSB0cnVlO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNoYW5nZWQgPyByZXN1bHQgOiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVQcm9wcyh7XG4gIG5ld1Byb3BzLFxuICBvbGRQcm9wcyxcbiAgaWdub3JlUHJvcHMgPSB7fSxcbiAgcHJvcFR5cGVzID0ge30sXG4gIHRyaWdnZXJOYW1lID0gJ3Byb3BzJ1xufSkge1xuICBpZiAob2xkUHJvcHMgPT09IG5ld1Byb3BzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBuZXdQcm9wcyAhPT0gJ29iamVjdCcgfHwgbmV3UHJvcHMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQodHJpZ2dlck5hbWUsIFwiIGNoYW5nZWQgc2hhbGxvd2x5XCIpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvbGRQcm9wcyAhPT0gJ29iamVjdCcgfHwgb2xkUHJvcHMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQodHJpZ2dlck5hbWUsIFwiIGNoYW5nZWQgc2hhbGxvd2x5XCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobmV3UHJvcHMpKSB7XG4gICAgaWYgKCEoa2V5IGluIGlnbm9yZVByb3BzKSkge1xuICAgICAgaWYgKCEoa2V5IGluIG9sZFByb3BzKSkge1xuICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQodHJpZ2dlck5hbWUsIFwiLlwiKS5jb25jYXQoa2V5LCBcIiBhZGRlZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hhbmdlZCA9IGNvbXBhcmVQcm9wVmFsdWVzKG5ld1Byb3BzW2tleV0sIG9sZFByb3BzW2tleV0sIHByb3BUeXBlc1trZXldKTtcblxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRyaWdnZXJOYW1lLCBcIi5cIikuY29uY2F0KGtleSwgXCIgXCIpLmNvbmNhdChjaGFuZ2VkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvbGRQcm9wcykpIHtcbiAgICBpZiAoIShrZXkgaW4gaWdub3JlUHJvcHMpKSB7XG4gICAgICBpZiAoIShrZXkgaW4gbmV3UHJvcHMpKSB7XG4gICAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0cmlnZ2VyTmFtZSwgXCIuXCIpLmNvbmNhdChrZXksIFwiIGRyb3BwZWRcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobmV3UHJvcHMsIGtleSkpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IGNvbXBhcmVQcm9wVmFsdWVzKG5ld1Byb3BzW2tleV0sIG9sZFByb3BzW2tleV0sIHByb3BUeXBlc1trZXldKTtcblxuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0cmlnZ2VyTmFtZSwgXCIuXCIpLmNvbmNhdChrZXksIFwiIFwiKS5jb25jYXQoY2hhbmdlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNvbXBhcmVQcm9wVmFsdWVzKG5ld1Byb3AsIG9sZFByb3AsIHByb3BUeXBlKSB7XG4gIGxldCBlcXVhbCA9IHByb3BUeXBlICYmIHByb3BUeXBlLmVxdWFsO1xuXG4gIGlmIChlcXVhbCAmJiAhZXF1YWwobmV3UHJvcCwgb2xkUHJvcCwgcHJvcFR5cGUpKSB7XG4gICAgcmV0dXJuICdjaGFuZ2VkIGRlZXBseSc7XG4gIH1cblxuICBpZiAoIWVxdWFsKSB7XG4gICAgZXF1YWwgPSBuZXdQcm9wICYmIG9sZFByb3AgJiYgbmV3UHJvcC5lcXVhbHM7XG5cbiAgICBpZiAoZXF1YWwgJiYgIWVxdWFsLmNhbGwobmV3UHJvcCwgb2xkUHJvcCkpIHtcbiAgICAgIHJldHVybiAnY2hhbmdlZCBkZWVwbHknO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZXF1YWwgJiYgb2xkUHJvcCAhPT0gbmV3UHJvcCkge1xuICAgIHJldHVybiAnY2hhbmdlZCBzaGFsbG93bHknO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGRpZmZEYXRhUHJvcHMocHJvcHMsIG9sZFByb3BzKSB7XG4gIGlmIChvbGRQcm9wcyA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnb2xkUHJvcHMgaXMgbnVsbCwgaW5pdGlhbCBkaWZmJztcbiAgfVxuXG4gIGxldCBkYXRhQ2hhbmdlZCA9IGZhbHNlO1xuICBjb25zdCB7XG4gICAgZGF0YUNvbXBhcmF0b3IsXG4gICAgX2RhdGFEaWZmXG4gIH0gPSBwcm9wcztcblxuICBpZiAoZGF0YUNvbXBhcmF0b3IpIHtcbiAgICBpZiAoIWRhdGFDb21wYXJhdG9yKHByb3BzLmRhdGEsIG9sZFByb3BzLmRhdGEpKSB7XG4gICAgICBkYXRhQ2hhbmdlZCA9ICdEYXRhIGNvbXBhcmF0b3IgZGV0ZWN0ZWQgYSBjaGFuZ2UnO1xuICAgIH1cbiAgfSBlbHNlIGlmIChwcm9wcy5kYXRhICE9PSBvbGRQcm9wcy5kYXRhKSB7XG4gICAgZGF0YUNoYW5nZWQgPSAnQSBuZXcgZGF0YSBjb250YWluZXIgd2FzIHN1cHBsaWVkJztcbiAgfVxuXG4gIGlmIChkYXRhQ2hhbmdlZCAmJiBfZGF0YURpZmYpIHtcbiAgICBkYXRhQ2hhbmdlZCA9IF9kYXRhRGlmZihwcm9wcy5kYXRhLCBvbGRQcm9wcy5kYXRhKSB8fCBkYXRhQ2hhbmdlZDtcbiAgfVxuXG4gIHJldHVybiBkYXRhQ2hhbmdlZDtcbn1cblxuZnVuY3Rpb24gZGlmZlVwZGF0ZVRyaWdnZXJzKHByb3BzLCBvbGRQcm9wcykge1xuICBpZiAob2xkUHJvcHMgPT09IG51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWxsOiB0cnVlXG4gICAgfTtcbiAgfVxuXG4gIGlmICgnYWxsJyBpbiBwcm9wcy51cGRhdGVUcmlnZ2Vycykge1xuICAgIGNvbnN0IGRpZmZSZWFzb24gPSBkaWZmVXBkYXRlVHJpZ2dlcihwcm9wcywgb2xkUHJvcHMsICdhbGwnKTtcblxuICAgIGlmIChkaWZmUmVhc29uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhbGw6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVhc29uID0ge307XG4gIGxldCBjaGFuZ2VkID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCB0cmlnZ2VyTmFtZSBpbiBwcm9wcy51cGRhdGVUcmlnZ2Vycykge1xuICAgIGlmICh0cmlnZ2VyTmFtZSAhPT0gJ2FsbCcpIHtcbiAgICAgIGNvbnN0IGRpZmZSZWFzb24gPSBkaWZmVXBkYXRlVHJpZ2dlcihwcm9wcywgb2xkUHJvcHMsIHRyaWdnZXJOYW1lKTtcblxuICAgICAgaWYgKGRpZmZSZWFzb24pIHtcbiAgICAgICAgcmVhc29uW3RyaWdnZXJOYW1lXSA9IHRydWU7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjaGFuZ2VkID8gcmVhc29uIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGRpZmZFeHRlbnNpb25zKHByb3BzLCBvbGRQcm9wcykge1xuICBpZiAob2xkUHJvcHMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IG9sZEV4dGVuc2lvbnMgPSBvbGRQcm9wcy5leHRlbnNpb25zO1xuICBjb25zdCB7XG4gICAgZXh0ZW5zaW9uc1xuICB9ID0gcHJvcHM7XG5cbiAgaWYgKGV4dGVuc2lvbnMgPT09IG9sZEV4dGVuc2lvbnMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIW9sZEV4dGVuc2lvbnMgfHwgIWV4dGVuc2lvbnMpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChleHRlbnNpb25zLmxlbmd0aCAhPT0gb2xkRXh0ZW5zaW9ucy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZXh0ZW5zaW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGlmICghZXh0ZW5zaW9uc1tpXS5lcXVhbHMob2xkRXh0ZW5zaW9uc1tpXSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZGlmZlVwZGF0ZVRyaWdnZXIocHJvcHMsIG9sZFByb3BzLCB0cmlnZ2VyTmFtZSkge1xuICBsZXQgbmV3VHJpZ2dlcnMgPSBwcm9wcy51cGRhdGVUcmlnZ2Vyc1t0cmlnZ2VyTmFtZV07XG4gIG5ld1RyaWdnZXJzID0gbmV3VHJpZ2dlcnMgPT09IHVuZGVmaW5lZCB8fCBuZXdUcmlnZ2VycyA9PT0gbnVsbCA/IHt9IDogbmV3VHJpZ2dlcnM7XG4gIGxldCBvbGRUcmlnZ2VycyA9IG9sZFByb3BzLnVwZGF0ZVRyaWdnZXJzW3RyaWdnZXJOYW1lXTtcbiAgb2xkVHJpZ2dlcnMgPSBvbGRUcmlnZ2VycyA9PT0gdW5kZWZpbmVkIHx8IG9sZFRyaWdnZXJzID09PSBudWxsID8ge30gOiBvbGRUcmlnZ2VycztcbiAgY29uc3QgZGlmZlJlYXNvbiA9IGNvbXBhcmVQcm9wcyh7XG4gICAgb2xkUHJvcHM6IG9sZFRyaWdnZXJzLFxuICAgIG5ld1Byb3BzOiBuZXdUcmlnZ2VycyxcbiAgICB0cmlnZ2VyTmFtZVxuICB9KTtcbiAgcmV0dXJuIGRpZmZSZWFzb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9wcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///71761\n')},13169:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": function() { return /* binding */ DrawLayersPass; }\n/* harmony export */ });\n/* harmony import */ var _layers_pass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(95442);\n\nclass DrawLayersPass extends _layers_pass__WEBPACK_IMPORTED_MODULE_0__/* [\"default\"] */ .Z {\n  shouldDrawLayer(layer) {\n    const {\n      operation\n    } = layer.props;\n    return operation.includes('draw') || operation.includes('terrain');\n  }\n\n}\n//# sourceMappingURL=draw-layers-pass.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMxNjkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF1QztBQUN4Qiw2QkFBNkIsNkRBQVU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9wYXNzZXMvZHJhdy1sYXllcnMtcGFzcy5qcz82YmU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMYXllcnNQYXNzIGZyb20gJy4vbGF5ZXJzLXBhc3MnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJhd0xheWVyc1Bhc3MgZXh0ZW5kcyBMYXllcnNQYXNzIHtcbiAgc2hvdWxkRHJhd0xheWVyKGxheWVyKSB7XG4gICAgY29uc3Qge1xuICAgICAgb3BlcmF0aW9uXG4gICAgfSA9IGxheWVyLnByb3BzO1xuICAgIHJldHVybiBvcGVyYXRpb24uaW5jbHVkZXMoJ2RyYXcnKSB8fCBvcGVyYXRpb24uaW5jbHVkZXMoJ3RlcnJhaW4nKTtcbiAgfVxuXG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcmF3LWxheWVycy1wYXNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13169\n")},95442:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "Z": function() { return /* binding */ LayersPass; }\n});\n\n// UNUSED EXPORTS: layerIndexResolver\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(82482);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/passes/pass.js\n\nclass Pass {\n  constructor(gl, props = {\n    id: \'pass\'\n  }) {\n    (0,defineProperty/* default */.Z)(this, "id", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "gl", void 0);\n\n    (0,defineProperty/* default */.Z)(this, "props", void 0);\n\n    const {\n      id\n    } = props;\n    this.id = id;\n    this.gl = gl;\n    this.props = { ...props\n    };\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  render(params) {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=pass.js.map\n// EXTERNAL MODULE: ./node_modules/@luma.gl/gltools/dist/esm/index.js + 13 modules\nvar esm = __webpack_require__(1418);\n// EXTERNAL MODULE: ./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js\nvar clear = __webpack_require__(26047);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js\n\n\n\nclass LayersPass extends Pass {\n  constructor(...args) {\n    super(...args);\n\n    (0,defineProperty/* default */.Z)(this, "_lastRenderIndex", -1);\n  }\n\n  render(options) {\n    const gl = this.gl;\n    (0,esm/* setParameters */.dR)(gl, {\n      framebuffer: options.target\n    });\n    return this._drawLayers(options);\n  }\n\n  _drawLayers(options) {\n    const {\n      target,\n      moduleParameters,\n      viewports,\n      views,\n      onViewportActive,\n      clearStack = true,\n      clearCanvas = true\n    } = options;\n    options.pass = options.pass || \'unknown\';\n    const gl = this.gl;\n\n    if (clearCanvas) {\n      clearGLCanvas(gl, target);\n    }\n\n    if (clearStack) {\n      this._lastRenderIndex = -1;\n    }\n\n    const renderStats = [];\n\n    for (const viewport of viewports) {\n      const view = views && views[viewport.id];\n      onViewportActive === null || onViewportActive === void 0 ? void 0 : onViewportActive(viewport);\n\n      const drawLayerParams = this._getDrawLayerParams(viewport, options);\n\n      const subViewports = viewport.subViewports || [viewport];\n\n      for (const subViewport of subViewports) {\n        const stats = this._drawLayersInViewport(gl, {\n          target,\n          moduleParameters,\n          viewport: subViewport,\n          view,\n          pass: options.pass,\n          layers: options.layers\n        }, drawLayerParams);\n\n        renderStats.push(stats);\n      }\n    }\n\n    return renderStats;\n  }\n\n  _getDrawLayerParams(viewport, {\n    layers,\n    pass,\n    isPicking = false,\n    layerFilter,\n    cullRect,\n    effects,\n    moduleParameters\n  }, evaluateShouldDrawOnly = false) {\n    const drawLayerParams = [];\n    const indexResolver = layerIndexResolver(this._lastRenderIndex + 1);\n    const drawContext = {\n      layer: layers[0],\n      viewport,\n      isPicking,\n      renderPass: pass,\n      cullRect\n    };\n    const layerFilterCache = {};\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n\n      const shouldDrawLayer = this._shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache);\n\n      const layerParam = {\n        shouldDrawLayer\n      };\n\n      if (shouldDrawLayer && !evaluateShouldDrawOnly) {\n        layerParam.layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n        layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n        layerParam.layerParameters = this.getLayerParameters(layer, layerIndex, viewport);\n      }\n\n      drawLayerParams[layerIndex] = layerParam;\n    }\n\n    return drawLayerParams;\n  }\n\n  _drawLayersInViewport(gl, {\n    layers,\n    moduleParameters: globalModuleParameters,\n    pass,\n    target,\n    viewport,\n    view\n  }, drawLayerParams) {\n    const glViewport = getGLViewport(gl, {\n      moduleParameters: globalModuleParameters,\n      target,\n      viewport\n    });\n\n    if (view && view.props.clear) {\n      const clearOpts = view.props.clear === true ? {\n        color: true,\n        depth: true\n      } : view.props.clear;\n      (0,esm/* withParameters */.s8)(gl, {\n        scissorTest: true,\n        scissor: glViewport\n      }, () => (0,clear/* clear */.Z)(gl, clearOpts));\n    }\n\n    const renderStatus = {\n      totalCount: layers.length,\n      visibleCount: 0,\n      compositeCount: 0,\n      pickableCount: 0\n    };\n    (0,esm/* setParameters */.dR)(gl, {\n      viewport: glViewport\n    });\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n      const {\n        shouldDrawLayer,\n        layerRenderIndex,\n        moduleParameters,\n        layerParameters\n      } = drawLayerParams[layerIndex];\n\n      if (shouldDrawLayer && layer.props.pickable) {\n        renderStatus.pickableCount++;\n      }\n\n      if (layer.isComposite) {\n        renderStatus.compositeCount++;\n      } else if (shouldDrawLayer) {\n        renderStatus.visibleCount++;\n        this._lastRenderIndex = Math.max(this._lastRenderIndex, layerRenderIndex);\n        moduleParameters.viewport = viewport;\n\n        try {\n          layer._drawLayer({\n            moduleParameters,\n            uniforms: {\n              layerIndex: layerRenderIndex\n            },\n            parameters: layerParameters\n          });\n        } catch (err) {\n          layer.raiseError(err, "drawing ".concat(layer, " to ").concat(pass));\n        }\n      }\n    }\n\n    return renderStatus;\n  }\n\n  shouldDrawLayer(layer) {\n    return true;\n  }\n\n  getModuleParameters(layer, effects) {\n    return null;\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    return layer.props.parameters;\n  }\n\n  _shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache) {\n    const shouldDrawLayer = layer.props.visible && this.shouldDrawLayer(layer);\n\n    if (!shouldDrawLayer) {\n      return false;\n    }\n\n    drawContext.layer = layer;\n    let parent = layer.parent;\n\n    while (parent) {\n      if (!parent.props.visible || !parent.filterSubLayer(drawContext)) {\n        return false;\n      }\n\n      drawContext.layer = parent;\n      parent = parent.parent;\n    }\n\n    if (layerFilter) {\n      const rootLayerId = drawContext.layer.id;\n\n      if (!(rootLayerId in layerFilterCache)) {\n        layerFilterCache[rootLayerId] = layerFilter(drawContext);\n      }\n\n      if (!layerFilterCache[rootLayerId]) {\n        return false;\n      }\n    }\n\n    layer.activateViewport(drawContext.viewport);\n    return true;\n  }\n\n  _getModuleParameters(layer, effects, pass, overrides) {\n    var _layer$internalState;\n\n    const moduleParameters = Object.assign(Object.create(((_layer$internalState = layer.internalState) === null || _layer$internalState === void 0 ? void 0 : _layer$internalState.propsInTransition) || layer.props), {\n      autoWrapLongitude: layer.wrapLongitude,\n      viewport: layer.context.viewport,\n      mousePosition: layer.context.mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: (0,esm/* cssToDeviceRatio */.w)(this.gl)\n    });\n\n    if (effects) {\n      for (const effect of effects) {\n        var _effect$getModulePara;\n\n        Object.assign(moduleParameters, (_effect$getModulePara = effect.getModuleParameters) === null || _effect$getModulePara === void 0 ? void 0 : _effect$getModulePara.call(effect, layer));\n      }\n    }\n\n    return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n  }\n\n}\nfunction layerIndexResolver(startIndex = 0, layerIndices = {}) {\n  const resolvers = {};\n\n  const resolveLayerIndex = (layer, isDrawn) => {\n    const indexOverride = layer.props._offset;\n    const layerId = layer.id;\n    const parentId = layer.parent && layer.parent.id;\n    let index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      const resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, {\n  moduleParameters,\n  target,\n  viewport\n}) {\n  const useTarget = target && target.id !== \'default-framebuffer\';\n  const pixelRatio = moduleParameters && moduleParameters.devicePixelRatio || (0,esm/* cssToDeviceRatio */.w)(gl);\n  const height = useTarget ? target.height : gl.drawingBufferHeight;\n  const dimensions = viewport;\n  return [dimensions.x * pixelRatio, height - (dimensions.y + dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl, targetFramebuffer) {\n  const width = targetFramebuffer ? targetFramebuffer.width : gl.drawingBufferWidth;\n  const height = targetFramebuffer ? targetFramebuffer.height : gl.drawingBufferHeight;\n  (0,esm/* setParameters */.dR)(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTU0NDIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0U7QUFDekQ7QUFDZjtBQUNBO0FBQ0EsR0FBRztBQUNILElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLGdDOzs7Ozs7QUM3QndFO0FBQzlDO0FBQzZEO0FBQ3hFLHlCQUF5QixJQUFJO0FBQzVDO0FBQ0E7O0FBRUEsSUFBSSxpQ0FBZTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0EsSUFBSSw2QkFBYTtBQUNqQjtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLDRCQUE0QjtBQUN6RDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLE1BQU0sOEJBQWM7QUFDcEI7QUFDQTtBQUNBLE9BQU8sUUFBUSxzQkFBSztBQUNwQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDZCQUFhO0FBQ2pCO0FBQ0EsS0FBSzs7QUFFTCw2QkFBNkIsNEJBQTRCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxXQUFXO0FBQ1gsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQkFBZ0I7QUFDeEMsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDTyw2REFBNkQ7QUFDcEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDhFQUE4RSwrQkFBZ0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRSw2QkFBYTtBQUNmO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9wYXNzZXMvcGFzcy5qcz85NTY3Iiwid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9wYXNzZXMvbGF5ZXJzLXBhc3MuanM/YzBhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFzcyB7XG4gIGNvbnN0cnVjdG9yKGdsLCBwcm9wcyA9IHtcbiAgICBpZDogJ3Bhc3MnXG4gIH0pIHtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2xcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByb3BzXCIsIHZvaWQgMCk7XG5cbiAgICBjb25zdCB7XG4gICAgICBpZFxuICAgIH0gPSBwcm9wcztcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5nbCA9IGdsO1xuICAgIHRoaXMucHJvcHMgPSB7IC4uLnByb3BzXG4gICAgfTtcbiAgfVxuXG4gIHNldFByb3BzKHByb3BzKSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLnByb3BzLCBwcm9wcyk7XG4gIH1cblxuICByZW5kZXIocGFyYW1zKSB7fVxuXG4gIGNsZWFudXAoKSB7fVxuXG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzLmpzLm1hcCIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgUGFzcyBmcm9tICcuL3Bhc3MnO1xuaW1wb3J0IHsgY2xlYXIsIHNldFBhcmFtZXRlcnMsIHdpdGhQYXJhbWV0ZXJzLCBjc3NUb0RldmljZVJhdGlvIH0gZnJvbSAnQGx1bWEuZ2wvY29yZSc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYXllcnNQYXNzIGV4dGVuZHMgUGFzcyB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9sYXN0UmVuZGVySW5kZXhcIiwgLTEpO1xuICB9XG5cbiAgcmVuZGVyKG9wdGlvbnMpIHtcbiAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XG4gICAgc2V0UGFyYW1ldGVycyhnbCwge1xuICAgICAgZnJhbWVidWZmZXI6IG9wdGlvbnMudGFyZ2V0XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2RyYXdMYXllcnMob3B0aW9ucyk7XG4gIH1cblxuICBfZHJhd0xheWVycyhvcHRpb25zKSB7XG4gICAgY29uc3Qge1xuICAgICAgdGFyZ2V0LFxuICAgICAgbW9kdWxlUGFyYW1ldGVycyxcbiAgICAgIHZpZXdwb3J0cyxcbiAgICAgIHZpZXdzLFxuICAgICAgb25WaWV3cG9ydEFjdGl2ZSxcbiAgICAgIGNsZWFyU3RhY2sgPSB0cnVlLFxuICAgICAgY2xlYXJDYW52YXMgPSB0cnVlXG4gICAgfSA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucy5wYXNzID0gb3B0aW9ucy5wYXNzIHx8ICd1bmtub3duJztcbiAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XG5cbiAgICBpZiAoY2xlYXJDYW52YXMpIHtcbiAgICAgIGNsZWFyR0xDYW52YXMoZ2wsIHRhcmdldCk7XG4gICAgfVxuXG4gICAgaWYgKGNsZWFyU3RhY2spIHtcbiAgICAgIHRoaXMuX2xhc3RSZW5kZXJJbmRleCA9IC0xO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlclN0YXRzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHZpZXdwb3J0IG9mIHZpZXdwb3J0cykge1xuICAgICAgY29uc3QgdmlldyA9IHZpZXdzICYmIHZpZXdzW3ZpZXdwb3J0LmlkXTtcbiAgICAgIG9uVmlld3BvcnRBY3RpdmUgPT09IG51bGwgfHwgb25WaWV3cG9ydEFjdGl2ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25WaWV3cG9ydEFjdGl2ZSh2aWV3cG9ydCk7XG5cbiAgICAgIGNvbnN0IGRyYXdMYXllclBhcmFtcyA9IHRoaXMuX2dldERyYXdMYXllclBhcmFtcyh2aWV3cG9ydCwgb3B0aW9ucyk7XG5cbiAgICAgIGNvbnN0IHN1YlZpZXdwb3J0cyA9IHZpZXdwb3J0LnN1YlZpZXdwb3J0cyB8fCBbdmlld3BvcnRdO1xuXG4gICAgICBmb3IgKGNvbnN0IHN1YlZpZXdwb3J0IG9mIHN1YlZpZXdwb3J0cykge1xuICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMuX2RyYXdMYXllcnNJblZpZXdwb3J0KGdsLCB7XG4gICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgIG1vZHVsZVBhcmFtZXRlcnMsXG4gICAgICAgICAgdmlld3BvcnQ6IHN1YlZpZXdwb3J0LFxuICAgICAgICAgIHZpZXcsXG4gICAgICAgICAgcGFzczogb3B0aW9ucy5wYXNzLFxuICAgICAgICAgIGxheWVyczogb3B0aW9ucy5sYXllcnNcbiAgICAgICAgfSwgZHJhd0xheWVyUGFyYW1zKTtcblxuICAgICAgICByZW5kZXJTdGF0cy5wdXNoKHN0YXRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyU3RhdHM7XG4gIH1cblxuICBfZ2V0RHJhd0xheWVyUGFyYW1zKHZpZXdwb3J0LCB7XG4gICAgbGF5ZXJzLFxuICAgIHBhc3MsXG4gICAgaXNQaWNraW5nID0gZmFsc2UsXG4gICAgbGF5ZXJGaWx0ZXIsXG4gICAgY3VsbFJlY3QsXG4gICAgZWZmZWN0cyxcbiAgICBtb2R1bGVQYXJhbWV0ZXJzXG4gIH0sIGV2YWx1YXRlU2hvdWxkRHJhd09ubHkgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRyYXdMYXllclBhcmFtcyA9IFtdO1xuICAgIGNvbnN0IGluZGV4UmVzb2x2ZXIgPSBsYXllckluZGV4UmVzb2x2ZXIodGhpcy5fbGFzdFJlbmRlckluZGV4ICsgMSk7XG4gICAgY29uc3QgZHJhd0NvbnRleHQgPSB7XG4gICAgICBsYXllcjogbGF5ZXJzWzBdLFxuICAgICAgdmlld3BvcnQsXG4gICAgICBpc1BpY2tpbmcsXG4gICAgICByZW5kZXJQYXNzOiBwYXNzLFxuICAgICAgY3VsbFJlY3RcbiAgICB9O1xuICAgIGNvbnN0IGxheWVyRmlsdGVyQ2FjaGUgPSB7fTtcblxuICAgIGZvciAobGV0IGxheWVySW5kZXggPSAwOyBsYXllckluZGV4IDwgbGF5ZXJzLmxlbmd0aDsgbGF5ZXJJbmRleCsrKSB7XG4gICAgICBjb25zdCBsYXllciA9IGxheWVyc1tsYXllckluZGV4XTtcblxuICAgICAgY29uc3Qgc2hvdWxkRHJhd0xheWVyID0gdGhpcy5fc2hvdWxkRHJhd0xheWVyKGxheWVyLCBkcmF3Q29udGV4dCwgbGF5ZXJGaWx0ZXIsIGxheWVyRmlsdGVyQ2FjaGUpO1xuXG4gICAgICBjb25zdCBsYXllclBhcmFtID0ge1xuICAgICAgICBzaG91bGREcmF3TGF5ZXJcbiAgICAgIH07XG5cbiAgICAgIGlmIChzaG91bGREcmF3TGF5ZXIgJiYgIWV2YWx1YXRlU2hvdWxkRHJhd09ubHkpIHtcbiAgICAgICAgbGF5ZXJQYXJhbS5sYXllclJlbmRlckluZGV4ID0gaW5kZXhSZXNvbHZlcihsYXllciwgc2hvdWxkRHJhd0xheWVyKTtcbiAgICAgICAgbGF5ZXJQYXJhbS5tb2R1bGVQYXJhbWV0ZXJzID0gdGhpcy5fZ2V0TW9kdWxlUGFyYW1ldGVycyhsYXllciwgZWZmZWN0cywgcGFzcywgbW9kdWxlUGFyYW1ldGVycyk7XG4gICAgICAgIGxheWVyUGFyYW0ubGF5ZXJQYXJhbWV0ZXJzID0gdGhpcy5nZXRMYXllclBhcmFtZXRlcnMobGF5ZXIsIGxheWVySW5kZXgsIHZpZXdwb3J0KTtcbiAgICAgIH1cblxuICAgICAgZHJhd0xheWVyUGFyYW1zW2xheWVySW5kZXhdID0gbGF5ZXJQYXJhbTtcbiAgICB9XG5cbiAgICByZXR1cm4gZHJhd0xheWVyUGFyYW1zO1xuICB9XG5cbiAgX2RyYXdMYXllcnNJblZpZXdwb3J0KGdsLCB7XG4gICAgbGF5ZXJzLFxuICAgIG1vZHVsZVBhcmFtZXRlcnM6IGdsb2JhbE1vZHVsZVBhcmFtZXRlcnMsXG4gICAgcGFzcyxcbiAgICB0YXJnZXQsXG4gICAgdmlld3BvcnQsXG4gICAgdmlld1xuICB9LCBkcmF3TGF5ZXJQYXJhbXMpIHtcbiAgICBjb25zdCBnbFZpZXdwb3J0ID0gZ2V0R0xWaWV3cG9ydChnbCwge1xuICAgICAgbW9kdWxlUGFyYW1ldGVyczogZ2xvYmFsTW9kdWxlUGFyYW1ldGVycyxcbiAgICAgIHRhcmdldCxcbiAgICAgIHZpZXdwb3J0XG4gICAgfSk7XG5cbiAgICBpZiAodmlldyAmJiB2aWV3LnByb3BzLmNsZWFyKSB7XG4gICAgICBjb25zdCBjbGVhck9wdHMgPSB2aWV3LnByb3BzLmNsZWFyID09PSB0cnVlID8ge1xuICAgICAgICBjb2xvcjogdHJ1ZSxcbiAgICAgICAgZGVwdGg6IHRydWVcbiAgICAgIH0gOiB2aWV3LnByb3BzLmNsZWFyO1xuICAgICAgd2l0aFBhcmFtZXRlcnMoZ2wsIHtcbiAgICAgICAgc2Npc3NvclRlc3Q6IHRydWUsXG4gICAgICAgIHNjaXNzb3I6IGdsVmlld3BvcnRcbiAgICAgIH0sICgpID0+IGNsZWFyKGdsLCBjbGVhck9wdHMpKTtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJTdGF0dXMgPSB7XG4gICAgICB0b3RhbENvdW50OiBsYXllcnMubGVuZ3RoLFxuICAgICAgdmlzaWJsZUNvdW50OiAwLFxuICAgICAgY29tcG9zaXRlQ291bnQ6IDAsXG4gICAgICBwaWNrYWJsZUNvdW50OiAwXG4gICAgfTtcbiAgICBzZXRQYXJhbWV0ZXJzKGdsLCB7XG4gICAgICB2aWV3cG9ydDogZ2xWaWV3cG9ydFxuICAgIH0pO1xuXG4gICAgZm9yIChsZXQgbGF5ZXJJbmRleCA9IDA7IGxheWVySW5kZXggPCBsYXllcnMubGVuZ3RoOyBsYXllckluZGV4KyspIHtcbiAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJzW2xheWVySW5kZXhdO1xuICAgICAgY29uc3Qge1xuICAgICAgICBzaG91bGREcmF3TGF5ZXIsXG4gICAgICAgIGxheWVyUmVuZGVySW5kZXgsXG4gICAgICAgIG1vZHVsZVBhcmFtZXRlcnMsXG4gICAgICAgIGxheWVyUGFyYW1ldGVyc1xuICAgICAgfSA9IGRyYXdMYXllclBhcmFtc1tsYXllckluZGV4XTtcblxuICAgICAgaWYgKHNob3VsZERyYXdMYXllciAmJiBsYXllci5wcm9wcy5waWNrYWJsZSkge1xuICAgICAgICByZW5kZXJTdGF0dXMucGlja2FibGVDb3VudCsrO1xuICAgICAgfVxuXG4gICAgICBpZiAobGF5ZXIuaXNDb21wb3NpdGUpIHtcbiAgICAgICAgcmVuZGVyU3RhdHVzLmNvbXBvc2l0ZUNvdW50Kys7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZERyYXdMYXllcikge1xuICAgICAgICByZW5kZXJTdGF0dXMudmlzaWJsZUNvdW50Kys7XG4gICAgICAgIHRoaXMuX2xhc3RSZW5kZXJJbmRleCA9IE1hdGgubWF4KHRoaXMuX2xhc3RSZW5kZXJJbmRleCwgbGF5ZXJSZW5kZXJJbmRleCk7XG4gICAgICAgIG1vZHVsZVBhcmFtZXRlcnMudmlld3BvcnQgPSB2aWV3cG9ydDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGxheWVyLl9kcmF3TGF5ZXIoe1xuICAgICAgICAgICAgbW9kdWxlUGFyYW1ldGVycyxcbiAgICAgICAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgICAgICAgIGxheWVySW5kZXg6IGxheWVyUmVuZGVySW5kZXhcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBsYXllclBhcmFtZXRlcnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgbGF5ZXIucmFpc2VFcnJvcihlcnIsIFwiZHJhd2luZyBcIi5jb25jYXQobGF5ZXIsIFwiIHRvIFwiKS5jb25jYXQocGFzcykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbmRlclN0YXR1cztcbiAgfVxuXG4gIHNob3VsZERyYXdMYXllcihsYXllcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0TW9kdWxlUGFyYW1ldGVycyhsYXllciwgZWZmZWN0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0TGF5ZXJQYXJhbWV0ZXJzKGxheWVyLCBsYXllckluZGV4LCB2aWV3cG9ydCkge1xuICAgIHJldHVybiBsYXllci5wcm9wcy5wYXJhbWV0ZXJzO1xuICB9XG5cbiAgX3Nob3VsZERyYXdMYXllcihsYXllciwgZHJhd0NvbnRleHQsIGxheWVyRmlsdGVyLCBsYXllckZpbHRlckNhY2hlKSB7XG4gICAgY29uc3Qgc2hvdWxkRHJhd0xheWVyID0gbGF5ZXIucHJvcHMudmlzaWJsZSAmJiB0aGlzLnNob3VsZERyYXdMYXllcihsYXllcik7XG5cbiAgICBpZiAoIXNob3VsZERyYXdMYXllcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGRyYXdDb250ZXh0LmxheWVyID0gbGF5ZXI7XG4gICAgbGV0IHBhcmVudCA9IGxheWVyLnBhcmVudDtcblxuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIGlmICghcGFyZW50LnByb3BzLnZpc2libGUgfHwgIXBhcmVudC5maWx0ZXJTdWJMYXllcihkcmF3Q29udGV4dCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBkcmF3Q29udGV4dC5sYXllciA9IHBhcmVudDtcbiAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGxheWVyRmlsdGVyKSB7XG4gICAgICBjb25zdCByb290TGF5ZXJJZCA9IGRyYXdDb250ZXh0LmxheWVyLmlkO1xuXG4gICAgICBpZiAoIShyb290TGF5ZXJJZCBpbiBsYXllckZpbHRlckNhY2hlKSkge1xuICAgICAgICBsYXllckZpbHRlckNhY2hlW3Jvb3RMYXllcklkXSA9IGxheWVyRmlsdGVyKGRyYXdDb250ZXh0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFsYXllckZpbHRlckNhY2hlW3Jvb3RMYXllcklkXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGF5ZXIuYWN0aXZhdGVWaWV3cG9ydChkcmF3Q29udGV4dC52aWV3cG9ydCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBfZ2V0TW9kdWxlUGFyYW1ldGVycyhsYXllciwgZWZmZWN0cywgcGFzcywgb3ZlcnJpZGVzKSB7XG4gICAgdmFyIF9sYXllciRpbnRlcm5hbFN0YXRlO1xuXG4gICAgY29uc3QgbW9kdWxlUGFyYW1ldGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSgoKF9sYXllciRpbnRlcm5hbFN0YXRlID0gbGF5ZXIuaW50ZXJuYWxTdGF0ZSkgPT09IG51bGwgfHwgX2xheWVyJGludGVybmFsU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sYXllciRpbnRlcm5hbFN0YXRlLnByb3BzSW5UcmFuc2l0aW9uKSB8fCBsYXllci5wcm9wcyksIHtcbiAgICAgIGF1dG9XcmFwTG9uZ2l0dWRlOiBsYXllci53cmFwTG9uZ2l0dWRlLFxuICAgICAgdmlld3BvcnQ6IGxheWVyLmNvbnRleHQudmlld3BvcnQsXG4gICAgICBtb3VzZVBvc2l0aW9uOiBsYXllci5jb250ZXh0Lm1vdXNlUG9zaXRpb24sXG4gICAgICBwaWNraW5nQWN0aXZlOiAwLFxuICAgICAgZGV2aWNlUGl4ZWxSYXRpbzogY3NzVG9EZXZpY2VSYXRpbyh0aGlzLmdsKVxuICAgIH0pO1xuXG4gICAgaWYgKGVmZmVjdHMpIHtcbiAgICAgIGZvciAoY29uc3QgZWZmZWN0IG9mIGVmZmVjdHMpIHtcbiAgICAgICAgdmFyIF9lZmZlY3QkZ2V0TW9kdWxlUGFyYTtcblxuICAgICAgICBPYmplY3QuYXNzaWduKG1vZHVsZVBhcmFtZXRlcnMsIChfZWZmZWN0JGdldE1vZHVsZVBhcmEgPSBlZmZlY3QuZ2V0TW9kdWxlUGFyYW1ldGVycykgPT09IG51bGwgfHwgX2VmZmVjdCRnZXRNb2R1bGVQYXJhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZWZmZWN0JGdldE1vZHVsZVBhcmEuY2FsbChlZmZlY3QsIGxheWVyKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlUGFyYW1ldGVycywgdGhpcy5nZXRNb2R1bGVQYXJhbWV0ZXJzKGxheWVyLCBlZmZlY3RzKSwgb3ZlcnJpZGVzKTtcbiAgfVxuXG59XG5leHBvcnQgZnVuY3Rpb24gbGF5ZXJJbmRleFJlc29sdmVyKHN0YXJ0SW5kZXggPSAwLCBsYXllckluZGljZXMgPSB7fSkge1xuICBjb25zdCByZXNvbHZlcnMgPSB7fTtcblxuICBjb25zdCByZXNvbHZlTGF5ZXJJbmRleCA9IChsYXllciwgaXNEcmF3bikgPT4ge1xuICAgIGNvbnN0IGluZGV4T3ZlcnJpZGUgPSBsYXllci5wcm9wcy5fb2Zmc2V0O1xuICAgIGNvbnN0IGxheWVySWQgPSBsYXllci5pZDtcbiAgICBjb25zdCBwYXJlbnRJZCA9IGxheWVyLnBhcmVudCAmJiBsYXllci5wYXJlbnQuaWQ7XG4gICAgbGV0IGluZGV4O1xuXG4gICAgaWYgKHBhcmVudElkICYmICEocGFyZW50SWQgaW4gbGF5ZXJJbmRpY2VzKSkge1xuICAgICAgcmVzb2x2ZUxheWVySW5kZXgobGF5ZXIucGFyZW50LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmVudElkIGluIHJlc29sdmVycykge1xuICAgICAgY29uc3QgcmVzb2x2ZXIgPSByZXNvbHZlcnNbcGFyZW50SWRdID0gcmVzb2x2ZXJzW3BhcmVudElkXSB8fCBsYXllckluZGV4UmVzb2x2ZXIobGF5ZXJJbmRpY2VzW3BhcmVudElkXSwgbGF5ZXJJbmRpY2VzKTtcbiAgICAgIGluZGV4ID0gcmVzb2x2ZXIobGF5ZXIsIGlzRHJhd24pO1xuICAgICAgcmVzb2x2ZXJzW2xheWVySWRdID0gcmVzb2x2ZXI7XG4gICAgfSBlbHNlIGlmIChOdW1iZXIuaXNGaW5pdGUoaW5kZXhPdmVycmlkZSkpIHtcbiAgICAgIGluZGV4ID0gaW5kZXhPdmVycmlkZSArIChsYXllckluZGljZXNbcGFyZW50SWRdIHx8IDApO1xuICAgICAgcmVzb2x2ZXJzW2xheWVySWRdID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXggPSBzdGFydEluZGV4O1xuICAgIH1cblxuICAgIGlmIChpc0RyYXduICYmIGluZGV4ID49IHN0YXJ0SW5kZXgpIHtcbiAgICAgIHN0YXJ0SW5kZXggPSBpbmRleCArIDE7XG4gICAgfVxuXG4gICAgbGF5ZXJJbmRpY2VzW2xheWVySWRdID0gaW5kZXg7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9O1xuXG4gIHJldHVybiByZXNvbHZlTGF5ZXJJbmRleDtcbn1cblxuZnVuY3Rpb24gZ2V0R0xWaWV3cG9ydChnbCwge1xuICBtb2R1bGVQYXJhbWV0ZXJzLFxuICB0YXJnZXQsXG4gIHZpZXdwb3J0XG59KSB7XG4gIGNvbnN0IHVzZVRhcmdldCA9IHRhcmdldCAmJiB0YXJnZXQuaWQgIT09ICdkZWZhdWx0LWZyYW1lYnVmZmVyJztcbiAgY29uc3QgcGl4ZWxSYXRpbyA9IG1vZHVsZVBhcmFtZXRlcnMgJiYgbW9kdWxlUGFyYW1ldGVycy5kZXZpY2VQaXhlbFJhdGlvIHx8IGNzc1RvRGV2aWNlUmF0aW8oZ2wpO1xuICBjb25zdCBoZWlnaHQgPSB1c2VUYXJnZXQgPyB0YXJnZXQuaGVpZ2h0IDogZ2wuZHJhd2luZ0J1ZmZlckhlaWdodDtcbiAgY29uc3QgZGltZW5zaW9ucyA9IHZpZXdwb3J0O1xuICByZXR1cm4gW2RpbWVuc2lvbnMueCAqIHBpeGVsUmF0aW8sIGhlaWdodCAtIChkaW1lbnNpb25zLnkgKyBkaW1lbnNpb25zLmhlaWdodCkgKiBwaXhlbFJhdGlvLCBkaW1lbnNpb25zLndpZHRoICogcGl4ZWxSYXRpbywgZGltZW5zaW9ucy5oZWlnaHQgKiBwaXhlbFJhdGlvXTtcbn1cblxuZnVuY3Rpb24gY2xlYXJHTENhbnZhcyhnbCwgdGFyZ2V0RnJhbWVidWZmZXIpIHtcbiAgY29uc3Qgd2lkdGggPSB0YXJnZXRGcmFtZWJ1ZmZlciA/IHRhcmdldEZyYW1lYnVmZmVyLndpZHRoIDogZ2wuZHJhd2luZ0J1ZmZlcldpZHRoO1xuICBjb25zdCBoZWlnaHQgPSB0YXJnZXRGcmFtZWJ1ZmZlciA/IHRhcmdldEZyYW1lYnVmZmVyLmhlaWdodCA6IGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQ7XG4gIHNldFBhcmFtZXRlcnMoZ2wsIHtcbiAgICB2aWV3cG9ydDogWzAsIDAsIHdpZHRoLCBoZWlnaHRdXG4gIH0pO1xuICBnbC5jbGVhcigxNjM4NCB8IDI1Nik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sYXllcnMtcGFzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///95442\n')},70930:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": function() { return /* binding */ PickLayersPass; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82482);\n/* harmony import */ var _layers_pass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(95442);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1418);\n/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(80744);\n\n\n\n\nconst PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\nclass PickLayersPass extends _layers_pass__WEBPACK_IMPORTED_MODULE_0__/* [\"default\"] */ .Z {\n  constructor(...args) {\n    super(...args);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__/* [\"default\"] */ .Z)(this, \"pickZ\", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__/* [\"default\"] */ .Z)(this, \"_colorEncoderState\", null);\n  }\n\n  render(props) {\n    if ('pickingFBO' in props) {\n      return this._drawPickingBuffer(props);\n    }\n\n    return super.render(props);\n  }\n\n  _drawPickingBuffer({\n    layers,\n    layerFilter,\n    views,\n    viewports,\n    onViewportActive,\n    pickingFBO,\n    deviceRect: {\n      x,\n      y,\n      width,\n      height\n    },\n    cullRect,\n    effects,\n    pass = 'picking',\n    pickZ,\n    moduleParameters\n  }) {\n    const gl = this.gl;\n    this.pickZ = pickZ;\n\n    const colorEncoderState = this._resetColorEncoder(pickZ);\n\n    const renderStatus = (0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__/* .withParameters */ .s8)(gl, {\n      scissorTest: true,\n      scissor: [x, y, width, height],\n      clearColor: [0, 0, 0, 0],\n      depthMask: true,\n      depthTest: true,\n      depthRange: [0, 1],\n      colorMask: [true, true, true, true],\n      ...PICKING_PARAMETERS,\n      blend: !pickZ\n    }, () => super.render({\n      target: pickingFBO,\n      layers,\n      layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      cullRect,\n      effects: effects === null || effects === void 0 ? void 0 : effects.filter(e => e.useInPicking),\n      pass,\n      isPicking: true,\n      moduleParameters\n    }));\n    this._colorEncoderState = null;\n    const decodePickingColor = colorEncoderState && decodeColor.bind(null, colorEncoderState);\n    return {\n      decodePickingColor,\n      stats: renderStatus\n    };\n  }\n\n  shouldDrawLayer(layer) {\n    const {\n      pickable,\n      operation\n    } = layer.props;\n    return pickable && operation.includes('draw') || operation.includes('terrain');\n  }\n\n  getModuleParameters() {\n    return {\n      pickingActive: 1,\n      pickingAttribute: this.pickZ,\n      lightSources: {}\n    };\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    const pickParameters = { ...layer.props.parameters\n    };\n    const {\n      pickable,\n      operation\n    } = layer.props;\n\n    if (!this._colorEncoderState) {\n      pickParameters.blend = false;\n    } else if (pickable && operation.includes('draw')) {\n      Object.assign(pickParameters, PICKING_PARAMETERS);\n      pickParameters.blend = true;\n      pickParameters.blendColor = encodeColor(this._colorEncoderState, layer, viewport);\n    }\n\n    if (operation.includes('terrain')) {\n      pickParameters.blend = false;\n    }\n\n    return pickParameters;\n  }\n\n  _resetColorEncoder(pickZ) {\n    this._colorEncoderState = pickZ ? null : {\n      byLayer: new Map(),\n      byAlpha: []\n    };\n    return this._colorEncoderState;\n  }\n\n}\n\nfunction encodeColor(encoded, layer, viewport) {\n  const {\n    byLayer,\n    byAlpha\n  } = encoded;\n  let a;\n  let entry = byLayer.get(layer);\n\n  if (entry) {\n    entry.viewports.push(viewport);\n    a = entry.a;\n  } else {\n    a = byLayer.size + 1;\n\n    if (a <= 255) {\n      entry = {\n        a,\n        layer,\n        viewports: [viewport]\n      };\n      byLayer.set(layer, entry);\n      byAlpha[a] = entry;\n    } else {\n      _utils_log__WEBPACK_IMPORTED_MODULE_3__/* [\"default\"].warn */ .Z.warn('Too many pickable layers, only picking the first 255')();\n      a = 0;\n    }\n  }\n\n  return [0, 0, 0, a / 255];\n}\n\nfunction decodeColor(encoded, pickedColor) {\n  const entry = encoded.byAlpha[pickedColor[3]];\n  return entry && {\n    pickedLayer: entry.layer,\n    pickedViewports: entry.viewports,\n    pickedObjectIndex: entry.layer.decodePickingColor(pickedColor)\n  };\n}\n//# sourceMappingURL=pick-layers-pass.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzA5MzAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RTtBQUNqQztBQUNRO0FBQ2hCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ2UsNkJBQTZCLDZEQUFVO0FBQ3REO0FBQ0E7O0FBRUEsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUEseUJBQXlCLHVFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNLHFFQUFRO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3Bhc3Nlcy9waWNrLWxheWVycy1wYXNzLmpzP2E4ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBMYXllcnNQYXNzIGZyb20gJy4vbGF5ZXJzLXBhc3MnO1xuaW1wb3J0IHsgd2l0aFBhcmFtZXRlcnMgfSBmcm9tICdAbHVtYS5nbC9jb3JlJztcbmltcG9ydCBsb2cgZnJvbSAnLi4vdXRpbHMvbG9nJztcbmNvbnN0IFBJQ0tJTkdfUEFSQU1FVEVSUyA9IHtcbiAgYmxlbmRGdW5jOiBbMSwgMCwgMzI3NzEsIDBdLFxuICBibGVuZEVxdWF0aW9uOiAzMjc3NFxufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBpY2tMYXllcnNQYXNzIGV4dGVuZHMgTGF5ZXJzUGFzcyB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBpY2taXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfY29sb3JFbmNvZGVyU3RhdGVcIiwgbnVsbCk7XG4gIH1cblxuICByZW5kZXIocHJvcHMpIHtcbiAgICBpZiAoJ3BpY2tpbmdGQk8nIGluIHByb3BzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZHJhd1BpY2tpbmdCdWZmZXIocHJvcHMpO1xuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5yZW5kZXIocHJvcHMpO1xuICB9XG5cbiAgX2RyYXdQaWNraW5nQnVmZmVyKHtcbiAgICBsYXllcnMsXG4gICAgbGF5ZXJGaWx0ZXIsXG4gICAgdmlld3MsXG4gICAgdmlld3BvcnRzLFxuICAgIG9uVmlld3BvcnRBY3RpdmUsXG4gICAgcGlja2luZ0ZCTyxcbiAgICBkZXZpY2VSZWN0OiB7XG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0XG4gICAgfSxcbiAgICBjdWxsUmVjdCxcbiAgICBlZmZlY3RzLFxuICAgIHBhc3MgPSAncGlja2luZycsXG4gICAgcGlja1osXG4gICAgbW9kdWxlUGFyYW1ldGVyc1xuICB9KSB7XG4gICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xuICAgIHRoaXMucGlja1ogPSBwaWNrWjtcblxuICAgIGNvbnN0IGNvbG9yRW5jb2RlclN0YXRlID0gdGhpcy5fcmVzZXRDb2xvckVuY29kZXIocGlja1opO1xuXG4gICAgY29uc3QgcmVuZGVyU3RhdHVzID0gd2l0aFBhcmFtZXRlcnMoZ2wsIHtcbiAgICAgIHNjaXNzb3JUZXN0OiB0cnVlLFxuICAgICAgc2Npc3NvcjogW3gsIHksIHdpZHRoLCBoZWlnaHRdLFxuICAgICAgY2xlYXJDb2xvcjogWzAsIDAsIDAsIDBdLFxuICAgICAgZGVwdGhNYXNrOiB0cnVlLFxuICAgICAgZGVwdGhUZXN0OiB0cnVlLFxuICAgICAgZGVwdGhSYW5nZTogWzAsIDFdLFxuICAgICAgY29sb3JNYXNrOiBbdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAuLi5QSUNLSU5HX1BBUkFNRVRFUlMsXG4gICAgICBibGVuZDogIXBpY2taXG4gICAgfSwgKCkgPT4gc3VwZXIucmVuZGVyKHtcbiAgICAgIHRhcmdldDogcGlja2luZ0ZCTyxcbiAgICAgIGxheWVycyxcbiAgICAgIGxheWVyRmlsdGVyLFxuICAgICAgdmlld3MsXG4gICAgICB2aWV3cG9ydHMsXG4gICAgICBvblZpZXdwb3J0QWN0aXZlLFxuICAgICAgY3VsbFJlY3QsXG4gICAgICBlZmZlY3RzOiBlZmZlY3RzID09PSBudWxsIHx8IGVmZmVjdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVmZmVjdHMuZmlsdGVyKGUgPT4gZS51c2VJblBpY2tpbmcpLFxuICAgICAgcGFzcyxcbiAgICAgIGlzUGlja2luZzogdHJ1ZSxcbiAgICAgIG1vZHVsZVBhcmFtZXRlcnNcbiAgICB9KSk7XG4gICAgdGhpcy5fY29sb3JFbmNvZGVyU3RhdGUgPSBudWxsO1xuICAgIGNvbnN0IGRlY29kZVBpY2tpbmdDb2xvciA9IGNvbG9yRW5jb2RlclN0YXRlICYmIGRlY29kZUNvbG9yLmJpbmQobnVsbCwgY29sb3JFbmNvZGVyU3RhdGUpO1xuICAgIHJldHVybiB7XG4gICAgICBkZWNvZGVQaWNraW5nQ29sb3IsXG4gICAgICBzdGF0czogcmVuZGVyU3RhdHVzXG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZERyYXdMYXllcihsYXllcikge1xuICAgIGNvbnN0IHtcbiAgICAgIHBpY2thYmxlLFxuICAgICAgb3BlcmF0aW9uXG4gICAgfSA9IGxheWVyLnByb3BzO1xuICAgIHJldHVybiBwaWNrYWJsZSAmJiBvcGVyYXRpb24uaW5jbHVkZXMoJ2RyYXcnKSB8fCBvcGVyYXRpb24uaW5jbHVkZXMoJ3RlcnJhaW4nKTtcbiAgfVxuXG4gIGdldE1vZHVsZVBhcmFtZXRlcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBpY2tpbmdBY3RpdmU6IDEsXG4gICAgICBwaWNraW5nQXR0cmlidXRlOiB0aGlzLnBpY2taLFxuICAgICAgbGlnaHRTb3VyY2VzOiB7fVxuICAgIH07XG4gIH1cblxuICBnZXRMYXllclBhcmFtZXRlcnMobGF5ZXIsIGxheWVySW5kZXgsIHZpZXdwb3J0KSB7XG4gICAgY29uc3QgcGlja1BhcmFtZXRlcnMgPSB7IC4uLmxheWVyLnByb3BzLnBhcmFtZXRlcnNcbiAgICB9O1xuICAgIGNvbnN0IHtcbiAgICAgIHBpY2thYmxlLFxuICAgICAgb3BlcmF0aW9uXG4gICAgfSA9IGxheWVyLnByb3BzO1xuXG4gICAgaWYgKCF0aGlzLl9jb2xvckVuY29kZXJTdGF0ZSkge1xuICAgICAgcGlja1BhcmFtZXRlcnMuYmxlbmQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHBpY2thYmxlICYmIG9wZXJhdGlvbi5pbmNsdWRlcygnZHJhdycpKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHBpY2tQYXJhbWV0ZXJzLCBQSUNLSU5HX1BBUkFNRVRFUlMpO1xuICAgICAgcGlja1BhcmFtZXRlcnMuYmxlbmQgPSB0cnVlO1xuICAgICAgcGlja1BhcmFtZXRlcnMuYmxlbmRDb2xvciA9IGVuY29kZUNvbG9yKHRoaXMuX2NvbG9yRW5jb2RlclN0YXRlLCBsYXllciwgdmlld3BvcnQpO1xuICAgIH1cblxuICAgIGlmIChvcGVyYXRpb24uaW5jbHVkZXMoJ3RlcnJhaW4nKSkge1xuICAgICAgcGlja1BhcmFtZXRlcnMuYmxlbmQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGlja1BhcmFtZXRlcnM7XG4gIH1cblxuICBfcmVzZXRDb2xvckVuY29kZXIocGlja1opIHtcbiAgICB0aGlzLl9jb2xvckVuY29kZXJTdGF0ZSA9IHBpY2taID8gbnVsbCA6IHtcbiAgICAgIGJ5TGF5ZXI6IG5ldyBNYXAoKSxcbiAgICAgIGJ5QWxwaGE6IFtdXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fY29sb3JFbmNvZGVyU3RhdGU7XG4gIH1cblxufVxuXG5mdW5jdGlvbiBlbmNvZGVDb2xvcihlbmNvZGVkLCBsYXllciwgdmlld3BvcnQpIHtcbiAgY29uc3Qge1xuICAgIGJ5TGF5ZXIsXG4gICAgYnlBbHBoYVxuICB9ID0gZW5jb2RlZDtcbiAgbGV0IGE7XG4gIGxldCBlbnRyeSA9IGJ5TGF5ZXIuZ2V0KGxheWVyKTtcblxuICBpZiAoZW50cnkpIHtcbiAgICBlbnRyeS52aWV3cG9ydHMucHVzaCh2aWV3cG9ydCk7XG4gICAgYSA9IGVudHJ5LmE7XG4gIH0gZWxzZSB7XG4gICAgYSA9IGJ5TGF5ZXIuc2l6ZSArIDE7XG5cbiAgICBpZiAoYSA8PSAyNTUpIHtcbiAgICAgIGVudHJ5ID0ge1xuICAgICAgICBhLFxuICAgICAgICBsYXllcixcbiAgICAgICAgdmlld3BvcnRzOiBbdmlld3BvcnRdXG4gICAgICB9O1xuICAgICAgYnlMYXllci5zZXQobGF5ZXIsIGVudHJ5KTtcbiAgICAgIGJ5QWxwaGFbYV0gPSBlbnRyeTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nLndhcm4oJ1RvbyBtYW55IHBpY2thYmxlIGxheWVycywgb25seSBwaWNraW5nIHRoZSBmaXJzdCAyNTUnKSgpO1xuICAgICAgYSA9IDA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFswLCAwLCAwLCBhIC8gMjU1XTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlQ29sb3IoZW5jb2RlZCwgcGlja2VkQ29sb3IpIHtcbiAgY29uc3QgZW50cnkgPSBlbmNvZGVkLmJ5QWxwaGFbcGlja2VkQ29sb3JbM11dO1xuICByZXR1cm4gZW50cnkgJiYge1xuICAgIHBpY2tlZExheWVyOiBlbnRyeS5sYXllcixcbiAgICBwaWNrZWRWaWV3cG9ydHM6IGVudHJ5LnZpZXdwb3J0cyxcbiAgICBwaWNrZWRPYmplY3RJbmRleDogZW50cnkubGF5ZXIuZGVjb2RlUGlja2luZ0NvbG9yKHBpY2tlZENvbG9yKVxuICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGljay1sYXllcnMtcGFzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///70930\n")},22944:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ShadowPass; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82482);\n/* harmony import */ var _layers_pass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(95442);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51621);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(94041);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(53849);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1418);\n\n\n\nclass ShadowPass extends _layers_pass__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z {\n  constructor(gl, props) {\n    super(gl, props);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this, "shadowMap", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this, "depthBuffer", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this, "fbo", void 0);\n\n    this.shadowMap = new _luma_gl_core__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(gl, {\n      width: 1,\n      height: 1,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.depthBuffer = new _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    this.fbo = new _luma_gl_core__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(gl, {\n      id: \'shadowmap\',\n      width: 1,\n      height: 1,\n      attachments: {\n        [36064]: this.shadowMap,\n        [36096]: this.depthBuffer\n      }\n    });\n  }\n\n  render(params) {\n    const target = this.fbo;\n    (0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_5__/* .withParameters */ .s8)(this.gl, {\n      depthRange: [0, 1],\n      depthTest: true,\n      blend: false,\n      clearColor: [1, 1, 1, 1]\n    }, () => {\n      const viewport = params.viewports[0];\n      const pixelRatio = (0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_5__/* .cssToDeviceRatio */ .w)(this.gl);\n      const width = viewport.width * pixelRatio;\n      const height = viewport.height * pixelRatio;\n\n      if (width !== target.width || height !== target.height) {\n        target.resize({\n          width,\n          height\n        });\n      }\n\n      super.render({ ...params,\n        target,\n        pass: \'shadow\'\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.shadowEnabled !== false;\n  }\n\n  getModuleParameters() {\n    return {\n      drawToShadowMap: true\n    };\n  }\n\n  delete() {\n    if (this.fbo) {\n      this.fbo.delete();\n      this.fbo = null;\n    }\n\n    if (this.shadowMap) {\n      this.shadowMap.delete();\n      this.shadowMap = null;\n    }\n\n    if (this.depthBuffer) {\n      this.depthBuffer.delete();\n      this.depthBuffer = null;\n    }\n  }\n\n}\n//# sourceMappingURL=shadow-pass.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5NDQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdFO0FBQ2xCO0FBQ2lEO0FBQ3hGLHlCQUF5Qiw2REFBVTtBQUNsRDtBQUNBOztBQUVBLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLHlCQUF5Qiw4REFBUztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDJCQUEyQiw4REFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLDhEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxJQUFJLHVFQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EseUJBQXlCLHdFQUFnQjtBQUN6QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9wYXNzZXMvc2hhZG93LXBhc3MuanM/OWNjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBMYXllcnNQYXNzIH0gZnJvbSAnLi9sYXllcnMtcGFzcyc7XG5pbXBvcnQgeyBGcmFtZWJ1ZmZlciwgVGV4dHVyZTJELCBSZW5kZXJidWZmZXIsIHdpdGhQYXJhbWV0ZXJzLCBjc3NUb0RldmljZVJhdGlvIH0gZnJvbSAnQGx1bWEuZ2wvY29yZSc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaGFkb3dQYXNzIGV4dGVuZHMgTGF5ZXJzUGFzcyB7XG4gIGNvbnN0cnVjdG9yKGdsLCBwcm9wcykge1xuICAgIHN1cGVyKGdsLCBwcm9wcyk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzaGFkb3dNYXBcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlcHRoQnVmZmVyXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJmYm9cIiwgdm9pZCAwKTtcblxuICAgIHRoaXMuc2hhZG93TWFwID0gbmV3IFRleHR1cmUyRChnbCwge1xuICAgICAgd2lkdGg6IDEsXG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIFsxMDI0MV06IDk3MjksXG4gICAgICAgIFsxMDI0MF06IDk3MjksXG4gICAgICAgIFsxMDI0Ml06IDMzMDcxLFxuICAgICAgICBbMTAyNDNdOiAzMzA3MVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuZGVwdGhCdWZmZXIgPSBuZXcgUmVuZGVyYnVmZmVyKGdsLCB7XG4gICAgICBmb3JtYXQ6IDMzMTg5LFxuICAgICAgd2lkdGg6IDEsXG4gICAgICBoZWlnaHQ6IDFcbiAgICB9KTtcbiAgICB0aGlzLmZibyA9IG5ldyBGcmFtZWJ1ZmZlcihnbCwge1xuICAgICAgaWQ6ICdzaGFkb3dtYXAnLFxuICAgICAgd2lkdGg6IDEsXG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICBhdHRhY2htZW50czoge1xuICAgICAgICBbMzYwNjRdOiB0aGlzLnNoYWRvd01hcCxcbiAgICAgICAgWzM2MDk2XTogdGhpcy5kZXB0aEJ1ZmZlclxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKHBhcmFtcykge1xuICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZmJvO1xuICAgIHdpdGhQYXJhbWV0ZXJzKHRoaXMuZ2wsIHtcbiAgICAgIGRlcHRoUmFuZ2U6IFswLCAxXSxcbiAgICAgIGRlcHRoVGVzdDogdHJ1ZSxcbiAgICAgIGJsZW5kOiBmYWxzZSxcbiAgICAgIGNsZWFyQ29sb3I6IFsxLCAxLCAxLCAxXVxuICAgIH0sICgpID0+IHtcbiAgICAgIGNvbnN0IHZpZXdwb3J0ID0gcGFyYW1zLnZpZXdwb3J0c1swXTtcbiAgICAgIGNvbnN0IHBpeGVsUmF0aW8gPSBjc3NUb0RldmljZVJhdGlvKHRoaXMuZ2wpO1xuICAgICAgY29uc3Qgd2lkdGggPSB2aWV3cG9ydC53aWR0aCAqIHBpeGVsUmF0aW87XG4gICAgICBjb25zdCBoZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQgKiBwaXhlbFJhdGlvO1xuXG4gICAgICBpZiAod2lkdGggIT09IHRhcmdldC53aWR0aCB8fCBoZWlnaHQgIT09IHRhcmdldC5oZWlnaHQpIHtcbiAgICAgICAgdGFyZ2V0LnJlc2l6ZSh7XG4gICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgaGVpZ2h0XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzdXBlci5yZW5kZXIoeyAuLi5wYXJhbXMsXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcGFzczogJ3NoYWRvdydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgc2hvdWxkRHJhd0xheWVyKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLnByb3BzLnNoYWRvd0VuYWJsZWQgIT09IGZhbHNlO1xuICB9XG5cbiAgZ2V0TW9kdWxlUGFyYW1ldGVycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZHJhd1RvU2hhZG93TWFwOiB0cnVlXG4gICAgfTtcbiAgfVxuXG4gIGRlbGV0ZSgpIHtcbiAgICBpZiAodGhpcy5mYm8pIHtcbiAgICAgIHRoaXMuZmJvLmRlbGV0ZSgpO1xuICAgICAgdGhpcy5mYm8gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNoYWRvd01hcCkge1xuICAgICAgdGhpcy5zaGFkb3dNYXAuZGVsZXRlKCk7XG4gICAgICB0aGlzLnNoYWRvd01hcCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGVwdGhCdWZmZXIpIHtcbiAgICAgIHRoaXMuZGVwdGhCdWZmZXIuZGVsZXRlKCk7XG4gICAgICB0aGlzLmRlcHRoQnVmZmVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhZG93LXBhc3MuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///22944\n')},15621:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"bs\": function() { return /* binding */ createProgramManager; }\n/* harmony export */ });\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43426);\n/* harmony import */ var _project_project__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(89668);\n\n\n\n\n\n\nconst DEFAULT_MODULES = [_project_project__WEBPACK_IMPORTED_MODULE_0__/* [\"default\"] */ .Z];\nconst SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nfunction createProgramManager(gl) {\n  const programManager = _luma_gl_core__WEBPACK_IMPORTED_MODULE_1__/* [\"default\"].getDefaultProgramManager */ .Z.getDefaultProgramManager(gl);\n\n  for (const shaderModule of DEFAULT_MODULES) {\n    programManager.addDefaultModule(shaderModule);\n  }\n\n  for (const shaderHook of SHADER_HOOKS) {\n    programManager.addShaderHook(shaderHook);\n  }\n\n  return programManager;\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU2MjEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDZ0I7QUFDdkI7QUFDTTtBQUNUO0FBQ0c7QUFDeEMseUJBQXlCLGlFQUFPO0FBQ2hDO0FBQ087QUFDUCx5QkFBeUIsZ0hBQXVDOztBQUVoRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDK0U7QUFDL0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vc2hhZGVybGliL2luZGV4LmpzPzRhMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJvZ3JhbU1hbmFnZXIgfSBmcm9tICdAbHVtYS5nbC9jb3JlJztcbmltcG9ydCB7IGdvdXJhdWRMaWdodGluZywgcGhvbmdMaWdodGluZyB9IGZyb20gJ0BsdW1hLmdsL2NvcmUnO1xuaW1wb3J0IHByb2plY3QgZnJvbSAnLi9wcm9qZWN0L3Byb2plY3QnO1xuaW1wb3J0IHByb2plY3QzMiBmcm9tICcuL3Byb2plY3QzMi9wcm9qZWN0MzInO1xuaW1wb3J0IHNoYWRvdyBmcm9tICcuL3NoYWRvdy9zaGFkb3cnO1xuaW1wb3J0IHBpY2tpbmcgZnJvbSAnLi9waWNraW5nL3BpY2tpbmcnO1xuY29uc3QgREVGQVVMVF9NT0RVTEVTID0gW3Byb2plY3RdO1xuY29uc3QgU0hBREVSX0hPT0tTID0gWyd2czpERUNLR0xfRklMVEVSX1NJWkUoaW5vdXQgdmVjMyBzaXplLCBWZXJ0ZXhHZW9tZXRyeSBnZW9tZXRyeSknLCAndnM6REVDS0dMX0ZJTFRFUl9HTF9QT1NJVElPTihpbm91dCB2ZWM0IHBvc2l0aW9uLCBWZXJ0ZXhHZW9tZXRyeSBnZW9tZXRyeSknLCAndnM6REVDS0dMX0ZJTFRFUl9DT0xPUihpbm91dCB2ZWM0IGNvbG9yLCBWZXJ0ZXhHZW9tZXRyeSBnZW9tZXRyeSknLCAnZnM6REVDS0dMX0ZJTFRFUl9DT0xPUihpbm91dCB2ZWM0IGNvbG9yLCBGcmFnbWVudEdlb21ldHJ5IGdlb21ldHJ5KSddO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW1NYW5hZ2VyKGdsKSB7XG4gIGNvbnN0IHByb2dyYW1NYW5hZ2VyID0gUHJvZ3JhbU1hbmFnZXIuZ2V0RGVmYXVsdFByb2dyYW1NYW5hZ2VyKGdsKTtcblxuICBmb3IgKGNvbnN0IHNoYWRlck1vZHVsZSBvZiBERUZBVUxUX01PRFVMRVMpIHtcbiAgICBwcm9ncmFtTWFuYWdlci5hZGREZWZhdWx0TW9kdWxlKHNoYWRlck1vZHVsZSk7XG4gIH1cblxuICBmb3IgKGNvbnN0IHNoYWRlckhvb2sgb2YgU0hBREVSX0hPT0tTKSB7XG4gICAgcHJvZ3JhbU1hbmFnZXIuYWRkU2hhZGVySG9vayhzaGFkZXJIb29rKTtcbiAgfVxuXG4gIHJldHVybiBwcm9ncmFtTWFuYWdlcjtcbn1cbmV4cG9ydCB7IHBpY2tpbmcsIHByb2plY3QsIHByb2plY3QzMiwgZ291cmF1ZExpZ2h0aW5nLCBwaG9uZ0xpZ2h0aW5nLCBzaGFkb3cgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15621\n")},43844:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83330);\n\n/* harmony default export */ __webpack_exports__["Z"] = ({\n  inject: {\n    \'vs:DECKGL_FILTER_GL_POSITION\': "\\n    // for picking depth values\\n    picking_setPickingAttribute(position.z / position.w);\\n  ",\n    \'vs:DECKGL_FILTER_COLOR\': "\\n  picking_setPickingColor(geometry.pickingColor);\\n  ",\n    \'fs:#decl\': "\\nuniform bool picking_uAttribute;\\n  ",\n    \'fs:DECKGL_FILTER_COLOR\': {\n      order: 99,\n      injection: "\\n  // use highlight color if this fragment belongs to the selected object.\\n  color = picking_filterHighlightColor(color);\\n\\n  // use picking color if rendering to picking FBO.\\n  color = picking_filterPickingColor(color);\\n    "\n    }\n  },\n  ..._luma_gl_core__WEBPACK_IMPORTED_MODULE_0__/* .picking */ .q\n});\n//# sourceMappingURL=picking.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDM4NDQuanMiLCJtYXBwaW5ncyI6IjtBQUF3QztBQUN4Qyx5REFBZTtBQUNmO0FBQ0EsaUlBQWlJO0FBQ2pJLGtGQUFrRjtBQUNsRixtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBLDZJQUE2SSxxR0FBcUc7QUFDbFA7QUFDQSxHQUFHO0FBQ0gsS0FBSywyREFBTztBQUNaLENBQUMsRUFBQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3NoYWRlcmxpYi9waWNraW5nL3BpY2tpbmcuanM/NzQ2NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaWNraW5nIH0gZnJvbSAnQGx1bWEuZ2wvY29yZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGluamVjdDoge1xuICAgICd2czpERUNLR0xfRklMVEVSX0dMX1BPU0lUSU9OJzogXCJcXG4gICAgLy8gZm9yIHBpY2tpbmcgZGVwdGggdmFsdWVzXFxuICAgIHBpY2tpbmdfc2V0UGlja2luZ0F0dHJpYnV0ZShwb3NpdGlvbi56IC8gcG9zaXRpb24udyk7XFxuICBcIixcbiAgICAndnM6REVDS0dMX0ZJTFRFUl9DT0xPUic6IFwiXFxuICBwaWNraW5nX3NldFBpY2tpbmdDb2xvcihnZW9tZXRyeS5waWNraW5nQ29sb3IpO1xcbiAgXCIsXG4gICAgJ2ZzOiNkZWNsJzogXCJcXG51bmlmb3JtIGJvb2wgcGlja2luZ191QXR0cmlidXRlO1xcbiAgXCIsXG4gICAgJ2ZzOkRFQ0tHTF9GSUxURVJfQ09MT1InOiB7XG4gICAgICBvcmRlcjogOTksXG4gICAgICBpbmplY3Rpb246IFwiXFxuICAvLyB1c2UgaGlnaGxpZ2h0IGNvbG9yIGlmIHRoaXMgZnJhZ21lbnQgYmVsb25ncyB0byB0aGUgc2VsZWN0ZWQgb2JqZWN0LlxcbiAgY29sb3IgPSBwaWNraW5nX2ZpbHRlckhpZ2hsaWdodENvbG9yKGNvbG9yKTtcXG5cXG4gIC8vIHVzZSBwaWNraW5nIGNvbG9yIGlmIHJlbmRlcmluZyB0byBwaWNraW5nIEZCTy5cXG4gIGNvbG9yID0gcGlja2luZ19maWx0ZXJQaWNraW5nQ29sb3IoY29sb3IpO1xcbiAgICBcIlxuICAgIH1cbiAgfSxcbiAgLi4ucGlja2luZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpY2tpbmcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///43844\n')},18547:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "D": function() { return /* binding */ projectPosition; },\n/* harmony export */   "T": function() { return /* binding */ getWorldPosition; }\n/* harmony export */ });\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24088);\n/* harmony import */ var _viewport_uniforms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8771);\n/* harmony import */ var _viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96935);\n/* harmony import */ var gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(98333);\n/* harmony import */ var gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(77160);\n/* harmony import */ var _math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78866);\n\n\n\n\n\n\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n  const p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof _viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  const {\n    viewport,\n    modelMatrix,\n    coordinateOrigin\n  } = opts;\n  let {\n    coordinateSystem,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = opts;\n\n  if (coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_2__/* .COORDINATE_SYSTEM.DEFAULT */ .Df.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? _lib_constants__WEBPACK_IMPORTED_MODULE_2__/* .COORDINATE_SYSTEM.LNGLAT */ .Df.LNGLAT : _lib_constants__WEBPACK_IMPORTED_MODULE_2__/* .COORDINATE_SYSTEM.CARTESIAN */ .Df.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  return {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  };\n}\n\nfunction getWorldPosition(position, {\n  viewport,\n  modelMatrix,\n  coordinateSystem,\n  coordinateOrigin,\n  offsetMode\n}) {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_3__/* .transformMat4 */ .fF([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_2__/* .COORDINATE_SYSTEM.LNGLAT */ .Df.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_2__/* .COORDINATE_SYSTEM.LNGLAT_OFFSETS */ .Df.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_2__/* .COORDINATE_SYSTEM.METER_OFFSETS */ .Df.METER_OFFSETS:\n      return lngLatZToWorldPosition((0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .addMetersToLngLat */ .eG)(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_2__/* .COORDINATE_SYSTEM.CARTESIAN */ .Df.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nfunction projectPosition(position, params) {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {\n    autoOffset = true\n  } = params;\n  const {\n    geospatialOrigin = DEFAULT_COORDINATE_ORIGIN,\n    shaderCoordinateOrigin = DEFAULT_COORDINATE_ORIGIN,\n    offsetMode = false\n  } = autoOffset ? (0,_viewport_uniforms__WEBPACK_IMPORTED_MODULE_4__/* .getOffsetOrigin */ .v)(viewport, coordinateSystem, coordinateOrigin) : {};\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_5__/* .sub */ .lu(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg1NDcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3RDtBQUNGO0FBQ2tCO0FBQ2pDO0FBQ0E7QUFDbUI7QUFDMUQ7O0FBRUE7QUFDQTs7QUFFQSx3Q0FBd0MsaUZBQW1CO0FBQzNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUosMkJBQTJCLHVGQUF5QjtBQUNwRCwrQ0FBK0MscUZBQXdCLEdBQUcsMkZBQTJCO0FBQ3JHOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBLGdCQUFnQixtRUFBa0I7QUFDbEM7O0FBRUE7QUFDQSxTQUFTLHFGQUF3QjtBQUNqQzs7QUFFQSxTQUFTLHFHQUFnQztBQUN6Qzs7QUFFQSxTQUFTLG1HQUErQjtBQUN4QyxvQ0FBb0Msa0ZBQWlCOztBQUVyRCxTQUFTLDJGQUEyQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZUFBZSw0RUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxJQUFJLHlEQUFRO0FBQ1o7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3NoYWRlcmxpYi9wcm9qZWN0L3Byb2plY3QtZnVuY3Rpb25zLmpzP2YyNjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ09PUkRJTkFURV9TWVNURU0gfSBmcm9tICcuLi8uLi9saWIvY29uc3RhbnRzJztcbmltcG9ydCB7IGdldE9mZnNldE9yaWdpbiB9IGZyb20gJy4vdmlld3BvcnQtdW5pZm9ybXMnO1xuaW1wb3J0IFdlYk1lcmNhdG9yVmlld3BvcnQgZnJvbSAnLi4vLi4vdmlld3BvcnRzL3dlYi1tZXJjYXRvci12aWV3cG9ydCc7XG5pbXBvcnQgKiBhcyB2ZWM0IGZyb20gJ2dsLW1hdHJpeC92ZWM0JztcbmltcG9ydCAqIGFzIHZlYzMgZnJvbSAnZ2wtbWF0cml4L3ZlYzMnO1xuaW1wb3J0IHsgYWRkTWV0ZXJzVG9MbmdMYXQgfSBmcm9tICdAbWF0aC5nbC93ZWItbWVyY2F0b3InO1xuY29uc3QgREVGQVVMVF9DT09SRElOQVRFX09SSUdJTiA9IFswLCAwLCAwXTtcblxuZnVuY3Rpb24gbG5nTGF0WlRvV29ybGRQb3NpdGlvbihsbmdMYXRaLCB2aWV3cG9ydCwgb2Zmc2V0TW9kZSA9IGZhbHNlKSB7XG4gIGNvbnN0IHAgPSB2aWV3cG9ydC5wcm9qZWN0UG9zaXRpb24obG5nTGF0Wik7XG5cbiAgaWYgKG9mZnNldE1vZGUgJiYgdmlld3BvcnQgaW5zdGFuY2VvZiBXZWJNZXJjYXRvclZpZXdwb3J0KSB7XG4gICAgY29uc3QgW2xvbmdpdHVkZSwgbGF0aXR1ZGUsIHogPSAwXSA9IGxuZ0xhdFo7XG4gICAgY29uc3QgZGlzdGFuY2VTY2FsZXMgPSB2aWV3cG9ydC5nZXREaXN0YW5jZVNjYWxlcyhbbG9uZ2l0dWRlLCBsYXRpdHVkZV0pO1xuICAgIHBbMl0gPSB6ICogZGlzdGFuY2VTY2FsZXMudW5pdHNQZXJNZXRlclsyXTtcbiAgfVxuXG4gIHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVQYXJhbWV0ZXJzKG9wdHMpIHtcbiAgY29uc3Qge1xuICAgIHZpZXdwb3J0LFxuICAgIG1vZGVsTWF0cml4LFxuICAgIGNvb3JkaW5hdGVPcmlnaW5cbiAgfSA9IG9wdHM7XG4gIGxldCB7XG4gICAgY29vcmRpbmF0ZVN5c3RlbSxcbiAgICBmcm9tQ29vcmRpbmF0ZVN5c3RlbSxcbiAgICBmcm9tQ29vcmRpbmF0ZU9yaWdpblxuICB9ID0gb3B0cztcblxuICBpZiAoY29vcmRpbmF0ZVN5c3RlbSA9PT0gQ09PUkRJTkFURV9TWVNURU0uREVGQVVMVCkge1xuICAgIGNvb3JkaW5hdGVTeXN0ZW0gPSB2aWV3cG9ydC5pc0dlb3NwYXRpYWwgPyBDT09SRElOQVRFX1NZU1RFTS5MTkdMQVQgOiBDT09SRElOQVRFX1NZU1RFTS5DQVJURVNJQU47XG4gIH1cblxuICBpZiAoZnJvbUNvb3JkaW5hdGVTeXN0ZW0gPT09IHVuZGVmaW5lZCkge1xuICAgIGZyb21Db29yZGluYXRlU3lzdGVtID0gY29vcmRpbmF0ZVN5c3RlbTtcbiAgfVxuXG4gIGlmIChmcm9tQ29vcmRpbmF0ZU9yaWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZnJvbUNvb3JkaW5hdGVPcmlnaW4gPSBjb29yZGluYXRlT3JpZ2luO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB2aWV3cG9ydCxcbiAgICBjb29yZGluYXRlU3lzdGVtLFxuICAgIGNvb3JkaW5hdGVPcmlnaW4sXG4gICAgbW9kZWxNYXRyaXgsXG4gICAgZnJvbUNvb3JkaW5hdGVTeXN0ZW0sXG4gICAgZnJvbUNvb3JkaW5hdGVPcmlnaW5cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdvcmxkUG9zaXRpb24ocG9zaXRpb24sIHtcbiAgdmlld3BvcnQsXG4gIG1vZGVsTWF0cml4LFxuICBjb29yZGluYXRlU3lzdGVtLFxuICBjb29yZGluYXRlT3JpZ2luLFxuICBvZmZzZXRNb2RlXG59KSB7XG4gIGxldCBbeCwgeSwgeiA9IDBdID0gcG9zaXRpb247XG5cbiAgaWYgKG1vZGVsTWF0cml4KSB7XG4gICAgW3gsIHksIHpdID0gdmVjNC50cmFuc2Zvcm1NYXQ0KFtdLCBbeCwgeSwgeiwgMS4wXSwgbW9kZWxNYXRyaXgpO1xuICB9XG5cbiAgc3dpdGNoIChjb29yZGluYXRlU3lzdGVtKSB7XG4gICAgY2FzZSBDT09SRElOQVRFX1NZU1RFTS5MTkdMQVQ6XG4gICAgICByZXR1cm4gbG5nTGF0WlRvV29ybGRQb3NpdGlvbihbeCwgeSwgel0sIHZpZXdwb3J0LCBvZmZzZXRNb2RlKTtcblxuICAgIGNhc2UgQ09PUkRJTkFURV9TWVNURU0uTE5HTEFUX09GRlNFVFM6XG4gICAgICByZXR1cm4gbG5nTGF0WlRvV29ybGRQb3NpdGlvbihbeCArIGNvb3JkaW5hdGVPcmlnaW5bMF0sIHkgKyBjb29yZGluYXRlT3JpZ2luWzFdLCB6ICsgKGNvb3JkaW5hdGVPcmlnaW5bMl0gfHwgMCldLCB2aWV3cG9ydCwgb2Zmc2V0TW9kZSk7XG5cbiAgICBjYXNlIENPT1JESU5BVEVfU1lTVEVNLk1FVEVSX09GRlNFVFM6XG4gICAgICByZXR1cm4gbG5nTGF0WlRvV29ybGRQb3NpdGlvbihhZGRNZXRlcnNUb0xuZ0xhdChjb29yZGluYXRlT3JpZ2luLCBbeCwgeSwgel0pLCB2aWV3cG9ydCwgb2Zmc2V0TW9kZSk7XG5cbiAgICBjYXNlIENPT1JESU5BVEVfU1lTVEVNLkNBUlRFU0lBTjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHZpZXdwb3J0LmlzR2Vvc3BhdGlhbCA/IFt4ICsgY29vcmRpbmF0ZU9yaWdpblswXSwgeSArIGNvb3JkaW5hdGVPcmlnaW5bMV0sIHogKyBjb29yZGluYXRlT3JpZ2luWzJdXSA6IHZpZXdwb3J0LnByb2plY3RQb3NpdGlvbihbeCwgeSwgel0pO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdFBvc2l0aW9uKHBvc2l0aW9uLCBwYXJhbXMpIHtcbiAgY29uc3Qge1xuICAgIHZpZXdwb3J0LFxuICAgIGNvb3JkaW5hdGVTeXN0ZW0sXG4gICAgY29vcmRpbmF0ZU9yaWdpbixcbiAgICBtb2RlbE1hdHJpeCxcbiAgICBmcm9tQ29vcmRpbmF0ZVN5c3RlbSxcbiAgICBmcm9tQ29vcmRpbmF0ZU9yaWdpblxuICB9ID0gbm9ybWFsaXplUGFyYW1ldGVycyhwYXJhbXMpO1xuICBjb25zdCB7XG4gICAgYXV0b09mZnNldCA9IHRydWVcbiAgfSA9IHBhcmFtcztcbiAgY29uc3Qge1xuICAgIGdlb3NwYXRpYWxPcmlnaW4gPSBERUZBVUxUX0NPT1JESU5BVEVfT1JJR0lOLFxuICAgIHNoYWRlckNvb3JkaW5hdGVPcmlnaW4gPSBERUZBVUxUX0NPT1JESU5BVEVfT1JJR0lOLFxuICAgIG9mZnNldE1vZGUgPSBmYWxzZVxuICB9ID0gYXV0b09mZnNldCA/IGdldE9mZnNldE9yaWdpbih2aWV3cG9ydCwgY29vcmRpbmF0ZVN5c3RlbSwgY29vcmRpbmF0ZU9yaWdpbikgOiB7fTtcbiAgY29uc3Qgd29ybGRQb3NpdGlvbiA9IGdldFdvcmxkUG9zaXRpb24ocG9zaXRpb24sIHtcbiAgICB2aWV3cG9ydCxcbiAgICBtb2RlbE1hdHJpeCxcbiAgICBjb29yZGluYXRlU3lzdGVtOiBmcm9tQ29vcmRpbmF0ZVN5c3RlbSxcbiAgICBjb29yZGluYXRlT3JpZ2luOiBmcm9tQ29vcmRpbmF0ZU9yaWdpbixcbiAgICBvZmZzZXRNb2RlXG4gIH0pO1xuXG4gIGlmIChvZmZzZXRNb2RlKSB7XG4gICAgY29uc3QgcG9zaXRpb25Db21tb25TcGFjZSA9IHZpZXdwb3J0LnByb2plY3RQb3NpdGlvbihnZW9zcGF0aWFsT3JpZ2luIHx8IHNoYWRlckNvb3JkaW5hdGVPcmlnaW4pO1xuICAgIHZlYzMuc3ViKHdvcmxkUG9zaXRpb24sIHdvcmxkUG9zaXRpb24sIHBvc2l0aW9uQ29tbW9uU3BhY2UpO1xuICB9XG5cbiAgcmV0dXJuIHdvcmxkUG9zaXRpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0LWZ1bmN0aW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18547\n')},89668:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "Z": function() { return /* binding */ project; }\n});\n\n// EXTERNAL MODULE: ./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js\nvar fp32 = __webpack_require__(25502);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js\nconst defines = \'#define SMOOTH_EDGE_RADIUS 0.5\';\nconst vs = "\\n".concat(defines, "\\n\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry = VertexGeometry(\\n  vec4(0.0, 0.0, 1.0, 0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec2(0.0),\\n  vec3(0.0)\\n);\\n");\nconst fs = "\\n".concat(defines, "\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n");\n/* harmony default export */ var geometry = ({\n  name: \'geometry\',\n  vs,\n  fs\n});\n//# sourceMappingURL=geometry.js.map\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/lib/constants.js\nvar constants = __webpack_require__(24088);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js\n\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(constants/* COORDINATE_SYSTEM */.Df).map(key => "const int COORDINATE_SYSTEM_".concat(key, " = ").concat(constants/* COORDINATE_SYSTEM */.Df[key], ";")).join(\'\');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(constants/* PROJECTION_MODE */.zG).map(key => "const int PROJECTION_MODE_".concat(key, " = ").concat(constants/* PROJECTION_MODE */.zG[key], ";")).join(\'\');\nconst UNIT_GLSL_CONSTANTS = Object.keys(constants/* UNIT */.iI).map(key => "const int UNIT_".concat(key.toUpperCase(), " = ").concat(constants/* UNIT */.iI[key], ";")).join(\'\');\n/* harmony default export */ var project_glsl = ("".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, "\\n").concat(PROJECTION_MODE_GLSL_CONSTANTS, "\\n").concat(UNIT_GLSL_CONSTANTS, "\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\nuniform vec3 project_uCommonOrigin;\\nuniform bool project_uPseudoMeters;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0;\\nconst float GLOBE_RADIUS = 256.0;\\nfloat project_size_at_latitude(float lat) {\\n  float y = clamp(lat, -89.9, 89.9);\\n  return 1.0 / cos(radians(y));\\n}\\n\\nfloat project_size() {\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\\n    project_uPseudoMeters == false) {\\n    \\n    if (geometry.position.w == 0.0) {\\n      return project_size_at_latitude(geometry.worldPosition.y);\\n    }\\n  \\n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\\n    float y2 = y * y;\\n    float y4 = y2 * y2;\\n    float y6 = y4 * y2;\\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\\n  }\\n  return 1.0;\\n}\\n\\nfloat project_size_at_latitude(float meters, float lat) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\\n}\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter * project_size();\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n  mat3 rotation;\\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\\n    n = rotation * n;\\n  }\\n  return n;\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  ) * WORLD_SCALE;\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy),\\n        project_size_at_latitude(position_world.z, position_world.y),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\\n        return vec4(\\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\\n          project_size(position_world.z),\\n          position_world.w\\n        );\\n      }\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_size_to_pixel(float size, int unit) {\\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\\n  if (unit == UNIT_COMMON) return size * project_uScale;\\n  return size;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\n"));\n//# sourceMappingURL=project.glsl.js.map\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js\nvar viewport_uniforms = __webpack_require__(8771);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js\n\n\n\n\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (\'viewport\' in opts) {\n    return (0,viewport_uniforms/* getUniformsFromViewport */.C)(opts);\n  }\n\n  return {};\n}\n\n/* harmony default export */ var project = ({\n  name: \'project\',\n  dependencies: [fp32/* fp32 */.O, geometry],\n  vs: project_glsl,\n  getUniforms\n});\n//# sourceMappingURL=project.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODk2NjguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQSw0REFBNEQsa0JBQWtCLHVCQUF1QiwwQkFBMEIsZ0JBQWdCLFlBQVksc0JBQXNCLElBQUksZ0lBQWdJO0FBQ3JULDhEQUE4RCxZQUFZLElBQUksU0FBUywyQ0FBMkMsK0VBQStFLEdBQUc7QUFDcE4sNkNBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRixvQzs7OztBQ1IrRTtBQUMvRSxxREFBcUQsbUNBQWlCLHNFQUFzRSxtQ0FBaUIsU0FBUztBQUN0SyxtREFBbUQsaUNBQWUsb0VBQW9FLGlDQUFlLFNBQVM7QUFDOUosd0NBQXdDLHNCQUFJLHVFQUF1RSxzQkFBSSxTQUFTO0FBQ2hJLGlEQUFlLHNLQUFzSyxzQ0FBc0MsK0JBQStCLHNDQUFzQyw0Q0FBNEMsZ0RBQWdELGlEQUFpRCwrQkFBK0Isb0NBQW9DLDZDQUE2QyxxQ0FBcUMsMENBQTBDLHVDQUF1Qyx1Q0FBdUMseUNBQXlDLHFDQUFxQyxxQ0FBcUMsa0NBQWtDLGdDQUFnQyxtREFBbUQscUNBQXFDLHVDQUF1QyxtQ0FBbUMsNkNBQTZDLHNDQUFzQyxpQ0FBaUMsR0FBRywwQkFBMEIsdUtBQXVLLDZDQUE2QyxrRUFBa0UsT0FBTyxnRUFBZ0UsdUJBQXVCLHlCQUF5Qix5QkFBeUIsMkRBQTJELEtBQUssZUFBZSxHQUFHLDZEQUE2RCxtRkFBbUYsR0FBRyxvQ0FBb0Msb0VBQW9FLEdBQUcsb0NBQW9DLHFFQUFxRSxHQUFHLG9DQUFvQyxrRUFBa0UsR0FBRyxvQ0FBb0MscUVBQXFFLEdBQUcsZ0RBQWdELDRCQUE0Qix1RkFBdUYsNEJBQTRCLDRCQUE0QixHQUFHLDBFQUEwRSwyREFBMkQsaUVBQWlFLGtCQUFrQixLQUFLLGlCQUFpQixHQUFHLG9DQUFvQyxzRUFBc0UsNkVBQTZFLGtCQUFrQixrRUFBa0UsdUJBQXVCLEtBQUssYUFBYSxHQUFHLHVDQUF1Qyx3QkFBd0IsNkdBQTZHLGdFQUFnRSxHQUFHLHVDQUF1Qyx1QkFBdUIsaUNBQWlDLHNDQUFzQyxLQUFLLDJDQUEyQyxnSEFBZ0gsR0FBRyx1Q0FBdUMsc0NBQXNDLG1DQUFtQyw0QkFBNEIsOERBQThELGlHQUFpRyxHQUFHLDREQUE0RCwwREFBMEQsa0VBQWtFLGtFQUFrRSw4S0FBOEssT0FBTyxxRUFBcUUsd0RBQXdELE9BQU8sS0FBSywyREFBMkQsa0VBQWtFLHFHQUFxRyxPQUFPLEtBQUssOEVBQThFLGtFQUFrRSx5RUFBeUUscUxBQXFMLFNBQVMsT0FBTyxLQUFLLDhRQUE4USxzREFBc0QsS0FBSyw2RkFBNkYsR0FBRywwQ0FBMEMsbURBQW1ELEdBQUcsOERBQThELG1GQUFtRixrQ0FBa0MsR0FBRywwQ0FBMEMsaUZBQWlGLGtDQUFrQyxHQUFHLDBDQUEwQyxzRkFBc0YsaUNBQWlDLEdBQUcsc0dBQXNHLG9EQUFvRCxHQUFHLDREQUE0RCwwR0FBMEcsR0FBRyxxREFBcUQsbUZBQW1GLDJDQUEyQyxHQUFHLCtDQUErQyxpREFBaUQsR0FBRyxxREFBcUQsZ0VBQWdFLDBEQUEwRCxnQkFBZ0IsR0FBRywwQ0FBMEMsbUNBQW1DLEdBQUcsd0NBQXdDLG1DQUFtQyxHQUFHLElBQUksRUFBQztBQUNwN04sd0M7Ozs7QUNMcUM7QUFDRztBQUNHO0FBQ21CO0FBQzlEOztBQUVBO0FBQ0E7QUFDQSxXQUFXLG9EQUF1QjtBQUNsQzs7QUFFQTtBQUNBOztBQUVBLDRDQUFlO0FBQ2Y7QUFDQSxpQkFBaUIsZ0JBQUksRUFBRSxRQUFRO0FBQy9CLE1BQU0sWUFBYTtBQUNuQjtBQUNBLENBQUMsRUFBQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3NoYWRlcmxpYi9taXNjL2dlb21ldHJ5LmpzPzg1MTYiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3NoYWRlcmxpYi9wcm9qZWN0L3Byb2plY3QuZ2xzbC5qcz9jMTNlIiwid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9zaGFkZXJsaWIvcHJvamVjdC9wcm9qZWN0LmpzPzEzZWMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGVmaW5lcyA9ICcjZGVmaW5lIFNNT09USF9FREdFX1JBRElVUyAwLjUnO1xuY29uc3QgdnMgPSBcIlxcblwiLmNvbmNhdChkZWZpbmVzLCBcIlxcblxcbnN0cnVjdCBWZXJ0ZXhHZW9tZXRyeSB7XFxuICB2ZWM0IHBvc2l0aW9uO1xcbiAgdmVjMyB3b3JsZFBvc2l0aW9uO1xcbiAgdmVjMyB3b3JsZFBvc2l0aW9uQWx0O1xcbiAgdmVjMyBub3JtYWw7XFxuICB2ZWMyIHV2O1xcbiAgdmVjMyBwaWNraW5nQ29sb3I7XFxufSBnZW9tZXRyeSA9IFZlcnRleEdlb21ldHJ5KFxcbiAgdmVjNCgwLjAsIDAuMCwgMS4wLCAwLjApLFxcbiAgdmVjMygwLjApLFxcbiAgdmVjMygwLjApLFxcbiAgdmVjMygwLjApLFxcbiAgdmVjMigwLjApLFxcbiAgdmVjMygwLjApXFxuKTtcXG5cIik7XG5jb25zdCBmcyA9IFwiXFxuXCIuY29uY2F0KGRlZmluZXMsIFwiXFxuXFxuc3RydWN0IEZyYWdtZW50R2VvbWV0cnkge1xcbiAgdmVjMiB1djtcXG59IGdlb21ldHJ5O1xcblxcbmZsb2F0IHNtb290aGVkZ2UoZmxvYXQgZWRnZSwgZmxvYXQgeCkge1xcbiAgcmV0dXJuIHNtb290aHN0ZXAoZWRnZSAtIFNNT09USF9FREdFX1JBRElVUywgZWRnZSArIFNNT09USF9FREdFX1JBRElVUywgeCk7XFxufVxcblwiKTtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2dlb21ldHJ5JyxcbiAgdnMsXG4gIGZzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2VvbWV0cnkuanMubWFwIiwiaW1wb3J0IHsgQ09PUkRJTkFURV9TWVNURU0sIFBST0pFQ1RJT05fTU9ERSwgVU5JVCB9IGZyb20gJy4uLy4uL2xpYi9jb25zdGFudHMnO1xuY29uc3QgQ09PUkRJTkFURV9TWVNURU1fR0xTTF9DT05TVEFOVFMgPSBPYmplY3Qua2V5cyhDT09SRElOQVRFX1NZU1RFTSkubWFwKGtleSA9PiBcImNvbnN0IGludCBDT09SRElOQVRFX1NZU1RFTV9cIi5jb25jYXQoa2V5LCBcIiA9IFwiKS5jb25jYXQoQ09PUkRJTkFURV9TWVNURU1ba2V5XSwgXCI7XCIpKS5qb2luKCcnKTtcbmNvbnN0IFBST0pFQ1RJT05fTU9ERV9HTFNMX0NPTlNUQU5UUyA9IE9iamVjdC5rZXlzKFBST0pFQ1RJT05fTU9ERSkubWFwKGtleSA9PiBcImNvbnN0IGludCBQUk9KRUNUSU9OX01PREVfXCIuY29uY2F0KGtleSwgXCIgPSBcIikuY29uY2F0KFBST0pFQ1RJT05fTU9ERVtrZXldLCBcIjtcIikpLmpvaW4oJycpO1xuY29uc3QgVU5JVF9HTFNMX0NPTlNUQU5UUyA9IE9iamVjdC5rZXlzKFVOSVQpLm1hcChrZXkgPT4gXCJjb25zdCBpbnQgVU5JVF9cIi5jb25jYXQoa2V5LnRvVXBwZXJDYXNlKCksIFwiID0gXCIpLmNvbmNhdChVTklUW2tleV0sIFwiO1wiKSkuam9pbignJyk7XG5leHBvcnQgZGVmYXVsdCBcIlwiLmNvbmNhdChDT09SRElOQVRFX1NZU1RFTV9HTFNMX0NPTlNUQU5UUywgXCJcXG5cIikuY29uY2F0KFBST0pFQ1RJT05fTU9ERV9HTFNMX0NPTlNUQU5UUywgXCJcXG5cIikuY29uY2F0KFVOSVRfR0xTTF9DT05TVEFOVFMsIFwiXFxuXFxudW5pZm9ybSBpbnQgcHJvamVjdF91Q29vcmRpbmF0ZVN5c3RlbTtcXG51bmlmb3JtIGludCBwcm9qZWN0X3VQcm9qZWN0aW9uTW9kZTtcXG51bmlmb3JtIGZsb2F0IHByb2plY3RfdVNjYWxlO1xcbnVuaWZvcm0gYm9vbCBwcm9qZWN0X3VXcmFwTG9uZ2l0dWRlO1xcbnVuaWZvcm0gdmVjMyBwcm9qZWN0X3VDb21tb25Vbml0c1Blck1ldGVyO1xcbnVuaWZvcm0gdmVjMyBwcm9qZWN0X3VDb21tb25Vbml0c1BlcldvcmxkVW5pdDtcXG51bmlmb3JtIHZlYzMgcHJvamVjdF91Q29tbW9uVW5pdHNQZXJXb3JsZFVuaXQyO1xcbnVuaWZvcm0gdmVjNCBwcm9qZWN0X3VDZW50ZXI7XFxudW5pZm9ybSBtYXQ0IHByb2plY3RfdU1vZGVsTWF0cml4O1xcbnVuaWZvcm0gbWF0NCBwcm9qZWN0X3VWaWV3UHJvamVjdGlvbk1hdHJpeDtcXG51bmlmb3JtIHZlYzIgcHJvamVjdF91Vmlld3BvcnRTaXplO1xcbnVuaWZvcm0gZmxvYXQgcHJvamVjdF91RGV2aWNlUGl4ZWxSYXRpbztcXG51bmlmb3JtIGZsb2F0IHByb2plY3RfdUZvY2FsRGlzdGFuY2U7XFxudW5pZm9ybSB2ZWMzIHByb2plY3RfdUNhbWVyYVBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMyBwcm9qZWN0X3VDb29yZGluYXRlT3JpZ2luO1xcbnVuaWZvcm0gdmVjMyBwcm9qZWN0X3VDb21tb25PcmlnaW47XFxudW5pZm9ybSBib29sIHByb2plY3RfdVBzZXVkb01ldGVycztcXG5cXG5jb25zdCBmbG9hdCBUSUxFX1NJWkUgPSA1MTIuMDtcXG5jb25zdCBmbG9hdCBQSSA9IDMuMTQxNTkyNjUzNjtcXG5jb25zdCBmbG9hdCBXT1JMRF9TQ0FMRSA9IFRJTEVfU0laRSAvIChQSSAqIDIuMCk7XFxuY29uc3QgdmVjMyBaRVJPXzY0X0xPVyA9IHZlYzMoMC4wKTtcXG5jb25zdCBmbG9hdCBFQVJUSF9SQURJVVMgPSA2MzcwOTcyLjA7XFxuY29uc3QgZmxvYXQgR0xPQkVfUkFESVVTID0gMjU2LjA7XFxuZmxvYXQgcHJvamVjdF9zaXplX2F0X2xhdGl0dWRlKGZsb2F0IGxhdCkge1xcbiAgZmxvYXQgeSA9IGNsYW1wKGxhdCwgLTg5LjksIDg5LjkpO1xcbiAgcmV0dXJuIDEuMCAvIGNvcyhyYWRpYW5zKHkpKTtcXG59XFxuXFxuZmxvYXQgcHJvamVjdF9zaXplKCkge1xcbiAgaWYgKHByb2plY3RfdVByb2plY3Rpb25Nb2RlID09IFBST0pFQ1RJT05fTU9ERV9XRUJfTUVSQ0FUT1IgJiZcXG4gICAgcHJvamVjdF91Q29vcmRpbmF0ZVN5c3RlbSA9PSBDT09SRElOQVRFX1NZU1RFTV9MTkdMQVQgJiZcXG4gICAgcHJvamVjdF91UHNldWRvTWV0ZXJzID09IGZhbHNlKSB7XFxuICAgIFxcbiAgICBpZiAoZ2VvbWV0cnkucG9zaXRpb24udyA9PSAwLjApIHtcXG4gICAgICByZXR1cm4gcHJvamVjdF9zaXplX2F0X2xhdGl0dWRlKGdlb21ldHJ5LndvcmxkUG9zaXRpb24ueSk7XFxuICAgIH1cXG4gIFxcbiAgICBmbG9hdCB5ID0gZ2VvbWV0cnkucG9zaXRpb24ueSAvIFRJTEVfU0laRSAqIDIuMCAtIDEuMDtcXG4gICAgZmxvYXQgeTIgPSB5ICogeTtcXG4gICAgZmxvYXQgeTQgPSB5MiAqIHkyO1xcbiAgICBmbG9hdCB5NiA9IHk0ICogeTI7XFxuICAgIHJldHVybiAxLjAgKyA0LjkzNDggKiB5MiArIDQuMDU4NyAqIHk0ICsgMS41NjQyICogeTY7XFxuICB9XFxuICByZXR1cm4gMS4wO1xcbn1cXG5cXG5mbG9hdCBwcm9qZWN0X3NpemVfYXRfbGF0aXR1ZGUoZmxvYXQgbWV0ZXJzLCBmbG9hdCBsYXQpIHtcXG4gIHJldHVybiBtZXRlcnMgKiBwcm9qZWN0X3VDb21tb25Vbml0c1Blck1ldGVyLnogKiBwcm9qZWN0X3NpemVfYXRfbGF0aXR1ZGUobGF0KTtcXG59XFxuZmxvYXQgcHJvamVjdF9zaXplKGZsb2F0IG1ldGVycykge1xcbiAgcmV0dXJuIG1ldGVycyAqIHByb2plY3RfdUNvbW1vblVuaXRzUGVyTWV0ZXIueiAqIHByb2plY3Rfc2l6ZSgpO1xcbn1cXG5cXG52ZWMyIHByb2plY3Rfc2l6ZSh2ZWMyIG1ldGVycykge1xcbiAgcmV0dXJuIG1ldGVycyAqIHByb2plY3RfdUNvbW1vblVuaXRzUGVyTWV0ZXIueHkgKiBwcm9qZWN0X3NpemUoKTtcXG59XFxuXFxudmVjMyBwcm9qZWN0X3NpemUodmVjMyBtZXRlcnMpIHtcXG4gIHJldHVybiBtZXRlcnMgKiBwcm9qZWN0X3VDb21tb25Vbml0c1Blck1ldGVyICogcHJvamVjdF9zaXplKCk7XFxufVxcblxcbnZlYzQgcHJvamVjdF9zaXplKHZlYzQgbWV0ZXJzKSB7XFxuICByZXR1cm4gdmVjNChtZXRlcnMueHl6ICogcHJvamVjdF91Q29tbW9uVW5pdHNQZXJNZXRlciwgbWV0ZXJzLncpO1xcbn1cXG5tYXQzIHByb2plY3RfZ2V0X29yaWVudGF0aW9uX21hdHJpeCh2ZWMzIHVwKSB7XFxuICB2ZWMzIHV6ID0gbm9ybWFsaXplKHVwKTtcXG4gIHZlYzMgdXggPSBhYnModXoueikgPT0gMS4wID8gdmVjMygxLjAsIDAuMCwgMC4wKSA6IG5vcm1hbGl6ZSh2ZWMzKHV6LnksIC11ei54LCAwKSk7XFxuICB2ZWMzIHV5ID0gY3Jvc3ModXosIHV4KTtcXG4gIHJldHVybiBtYXQzKHV4LCB1eSwgdXopO1xcbn1cXG5cXG5ib29sIHByb2plY3RfbmVlZHNfcm90YXRpb24odmVjMyBjb21tb25Qb3NpdGlvbiwgb3V0IG1hdDMgdHJhbnNmb3JtKSB7XFxuICBpZiAocHJvamVjdF91UHJvamVjdGlvbk1vZGUgPT0gUFJPSkVDVElPTl9NT0RFX0dMT0JFKSB7XFxuICAgIHRyYW5zZm9ybSA9IHByb2plY3RfZ2V0X29yaWVudGF0aW9uX21hdHJpeChjb21tb25Qb3NpdGlvbik7XFxuICAgIHJldHVybiB0cnVlO1xcbiAgfVxcbiAgcmV0dXJuIGZhbHNlO1xcbn1cXG52ZWMzIHByb2plY3Rfbm9ybWFsKHZlYzMgdmVjdG9yKSB7XFxuICB2ZWM0IG5vcm1hbF9tb2RlbHNwYWNlID0gcHJvamVjdF91TW9kZWxNYXRyaXggKiB2ZWM0KHZlY3RvciwgMC4wKTtcXG4gIHZlYzMgbiA9IG5vcm1hbGl6ZShub3JtYWxfbW9kZWxzcGFjZS54eXogKiBwcm9qZWN0X3VDb21tb25Vbml0c1Blck1ldGVyKTtcXG4gIG1hdDMgcm90YXRpb247XFxuICBpZiAocHJvamVjdF9uZWVkc19yb3RhdGlvbihnZW9tZXRyeS5wb3NpdGlvbi54eXosIHJvdGF0aW9uKSkge1xcbiAgICBuID0gcm90YXRpb24gKiBuO1xcbiAgfVxcbiAgcmV0dXJuIG47XFxufVxcblxcbnZlYzQgcHJvamVjdF9vZmZzZXRfKHZlYzQgb2Zmc2V0KSB7XFxuICBmbG9hdCBkeSA9IG9mZnNldC55O1xcbiAgdmVjMyBjb21tb25Vbml0c1BlcldvcmxkVW5pdCA9IHByb2plY3RfdUNvbW1vblVuaXRzUGVyV29ybGRVbml0ICsgcHJvamVjdF91Q29tbW9uVW5pdHNQZXJXb3JsZFVuaXQyICogZHk7XFxuICByZXR1cm4gdmVjNChvZmZzZXQueHl6ICogY29tbW9uVW5pdHNQZXJXb3JsZFVuaXQsIG9mZnNldC53KTtcXG59XFxudmVjMiBwcm9qZWN0X21lcmNhdG9yXyh2ZWMyIGxuZ2xhdCkge1xcbiAgZmxvYXQgeCA9IGxuZ2xhdC54O1xcbiAgaWYgKHByb2plY3RfdVdyYXBMb25naXR1ZGUpIHtcXG4gICAgeCA9IG1vZCh4ICsgMTgwLiwgMzYwLjApIC0gMTgwLjtcXG4gIH1cXG4gIGZsb2F0IHkgPSBjbGFtcChsbmdsYXQueSwgLTg5LjksIDg5LjkpO1xcbiAgcmV0dXJuIHZlYzIoXFxuICAgIHJhZGlhbnMoeCkgKyBQSSxcXG4gICAgUEkgKyBsb2codGFuX2ZwMzIoUEkgKiAwLjI1ICsgcmFkaWFucyh5KSAqIDAuNSkpXFxuICApICogV09STERfU0NBTEU7XFxufVxcblxcbnZlYzMgcHJvamVjdF9nbG9iZV8odmVjMyBsbmdsYXR6KSB7XFxuICBmbG9hdCBsYW1iZGEgPSByYWRpYW5zKGxuZ2xhdHoueCk7XFxuICBmbG9hdCBwaGkgPSByYWRpYW5zKGxuZ2xhdHoueSk7XFxuICBmbG9hdCBjb3NQaGkgPSBjb3MocGhpKTtcXG4gIGZsb2F0IEQgPSAobG5nbGF0ei56IC8gRUFSVEhfUkFESVVTICsgMS4wKSAqIEdMT0JFX1JBRElVUztcXG5cXG4gIHJldHVybiB2ZWMzKFxcbiAgICBzaW4obGFtYmRhKSAqIGNvc1BoaSxcXG4gICAgLWNvcyhsYW1iZGEpICogY29zUGhpLFxcbiAgICBzaW4ocGhpKVxcbiAgKSAqIEQ7XFxufVxcbnZlYzQgcHJvamVjdF9wb3NpdGlvbih2ZWM0IHBvc2l0aW9uLCB2ZWMzIHBvc2l0aW9uNjRMb3cpIHtcXG4gIHZlYzQgcG9zaXRpb25fd29ybGQgPSBwcm9qZWN0X3VNb2RlbE1hdHJpeCAqIHBvc2l0aW9uO1xcbiAgaWYgKHByb2plY3RfdVByb2plY3Rpb25Nb2RlID09IFBST0pFQ1RJT05fTU9ERV9XRUJfTUVSQ0FUT1IpIHtcXG4gICAgaWYgKHByb2plY3RfdUNvb3JkaW5hdGVTeXN0ZW0gPT0gQ09PUkRJTkFURV9TWVNURU1fTE5HTEFUKSB7XFxuICAgICAgcmV0dXJuIHZlYzQoXFxuICAgICAgICBwcm9qZWN0X21lcmNhdG9yXyhwb3NpdGlvbl93b3JsZC54eSksXFxuICAgICAgICBwcm9qZWN0X3NpemVfYXRfbGF0aXR1ZGUocG9zaXRpb25fd29ybGQueiwgcG9zaXRpb25fd29ybGQueSksXFxuICAgICAgICBwb3NpdGlvbl93b3JsZC53XFxuICAgICAgKTtcXG4gICAgfVxcbiAgICBpZiAocHJvamVjdF91Q29vcmRpbmF0ZVN5c3RlbSA9PSBDT09SRElOQVRFX1NZU1RFTV9DQVJURVNJQU4pIHtcXG4gICAgICBwb3NpdGlvbl93b3JsZC54eXogKz0gcHJvamVjdF91Q29vcmRpbmF0ZU9yaWdpbjtcXG4gICAgfVxcbiAgfVxcbiAgaWYgKHByb2plY3RfdVByb2plY3Rpb25Nb2RlID09IFBST0pFQ1RJT05fTU9ERV9HTE9CRSkge1xcbiAgICBpZiAocHJvamVjdF91Q29vcmRpbmF0ZVN5c3RlbSA9PSBDT09SRElOQVRFX1NZU1RFTV9MTkdMQVQpIHtcXG4gICAgICByZXR1cm4gdmVjNChcXG4gICAgICAgIHByb2plY3RfZ2xvYmVfKHBvc2l0aW9uX3dvcmxkLnh5eiksXFxuICAgICAgICBwb3NpdGlvbl93b3JsZC53XFxuICAgICAgKTtcXG4gICAgfVxcbiAgfVxcbiAgaWYgKHByb2plY3RfdVByb2plY3Rpb25Nb2RlID09IFBST0pFQ1RJT05fTU9ERV9XRUJfTUVSQ0FUT1JfQVVUT19PRkZTRVQpIHtcXG4gICAgaWYgKHByb2plY3RfdUNvb3JkaW5hdGVTeXN0ZW0gPT0gQ09PUkRJTkFURV9TWVNURU1fTE5HTEFUKSB7XFxuICAgICAgaWYgKGFicyhwb3NpdGlvbl93b3JsZC55IC0gcHJvamVjdF91Q29vcmRpbmF0ZU9yaWdpbi55KSA+IDAuMjUpIHtcXG4gICAgICAgIHJldHVybiB2ZWM0KFxcbiAgICAgICAgICBwcm9qZWN0X21lcmNhdG9yXyhwb3NpdGlvbl93b3JsZC54eSkgLSBwcm9qZWN0X3VDb21tb25PcmlnaW4ueHksXFxuICAgICAgICAgIHByb2plY3Rfc2l6ZShwb3NpdGlvbl93b3JsZC56KSxcXG4gICAgICAgICAgcG9zaXRpb25fd29ybGQud1xcbiAgICAgICAgKTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG4gIGlmIChwcm9qZWN0X3VQcm9qZWN0aW9uTW9kZSA9PSBQUk9KRUNUSU9OX01PREVfSURFTlRJVFkgfHxcXG4gICAgKHByb2plY3RfdVByb2plY3Rpb25Nb2RlID09IFBST0pFQ1RJT05fTU9ERV9XRUJfTUVSQ0FUT1JfQVVUT19PRkZTRVQgJiZcXG4gICAgKHByb2plY3RfdUNvb3JkaW5hdGVTeXN0ZW0gPT0gQ09PUkRJTkFURV9TWVNURU1fTE5HTEFUIHx8XFxuICAgICBwcm9qZWN0X3VDb29yZGluYXRlU3lzdGVtID09IENPT1JESU5BVEVfU1lTVEVNX0NBUlRFU0lBTikpKSB7XFxuICAgIHBvc2l0aW9uX3dvcmxkLnh5eiAtPSBwcm9qZWN0X3VDb29yZGluYXRlT3JpZ2luO1xcbiAgfVxcbiAgcmV0dXJuIHByb2plY3Rfb2Zmc2V0Xyhwb3NpdGlvbl93b3JsZCArIHByb2plY3RfdU1vZGVsTWF0cml4ICogdmVjNChwb3NpdGlvbjY0TG93LCAwLjApKTtcXG59XFxuXFxudmVjNCBwcm9qZWN0X3Bvc2l0aW9uKHZlYzQgcG9zaXRpb24pIHtcXG4gIHJldHVybiBwcm9qZWN0X3Bvc2l0aW9uKHBvc2l0aW9uLCBaRVJPXzY0X0xPVyk7XFxufVxcblxcbnZlYzMgcHJvamVjdF9wb3NpdGlvbih2ZWMzIHBvc2l0aW9uLCB2ZWMzIHBvc2l0aW9uNjRMb3cpIHtcXG4gIHZlYzQgcHJvamVjdGVkX3Bvc2l0aW9uID0gcHJvamVjdF9wb3NpdGlvbih2ZWM0KHBvc2l0aW9uLCAxLjApLCBwb3NpdGlvbjY0TG93KTtcXG4gIHJldHVybiBwcm9qZWN0ZWRfcG9zaXRpb24ueHl6O1xcbn1cXG5cXG52ZWMzIHByb2plY3RfcG9zaXRpb24odmVjMyBwb3NpdGlvbikge1xcbiAgdmVjNCBwcm9qZWN0ZWRfcG9zaXRpb24gPSBwcm9qZWN0X3Bvc2l0aW9uKHZlYzQocG9zaXRpb24sIDEuMCksIFpFUk9fNjRfTE9XKTtcXG4gIHJldHVybiBwcm9qZWN0ZWRfcG9zaXRpb24ueHl6O1xcbn1cXG5cXG52ZWMyIHByb2plY3RfcG9zaXRpb24odmVjMiBwb3NpdGlvbikge1xcbiAgdmVjNCBwcm9qZWN0ZWRfcG9zaXRpb24gPSBwcm9qZWN0X3Bvc2l0aW9uKHZlYzQocG9zaXRpb24sIDAuMCwgMS4wKSwgWkVST182NF9MT1cpO1xcbiAgcmV0dXJuIHByb2plY3RlZF9wb3NpdGlvbi54eTtcXG59XFxuXFxudmVjNCBwcm9qZWN0X2NvbW1vbl9wb3NpdGlvbl90b19jbGlwc3BhY2UodmVjNCBwb3NpdGlvbiwgbWF0NCB2aWV3UHJvamVjdGlvbk1hdHJpeCwgdmVjNCBjZW50ZXIpIHtcXG4gIHJldHVybiB2aWV3UHJvamVjdGlvbk1hdHJpeCAqIHBvc2l0aW9uICsgY2VudGVyO1xcbn1cXG52ZWM0IHByb2plY3RfY29tbW9uX3Bvc2l0aW9uX3RvX2NsaXBzcGFjZSh2ZWM0IHBvc2l0aW9uKSB7XFxuICByZXR1cm4gcHJvamVjdF9jb21tb25fcG9zaXRpb25fdG9fY2xpcHNwYWNlKHBvc2l0aW9uLCBwcm9qZWN0X3VWaWV3UHJvamVjdGlvbk1hdHJpeCwgcHJvamVjdF91Q2VudGVyKTtcXG59XFxudmVjMiBwcm9qZWN0X3BpeGVsX3NpemVfdG9fY2xpcHNwYWNlKHZlYzIgcGl4ZWxzKSB7XFxuICB2ZWMyIG9mZnNldCA9IHBpeGVscyAvIHByb2plY3RfdVZpZXdwb3J0U2l6ZSAqIHByb2plY3RfdURldmljZVBpeGVsUmF0aW8gKiAyLjA7XFxuICByZXR1cm4gb2Zmc2V0ICogcHJvamVjdF91Rm9jYWxEaXN0YW5jZTtcXG59XFxuXFxuZmxvYXQgcHJvamVjdF9zaXplX3RvX3BpeGVsKGZsb2F0IG1ldGVycykge1xcbiAgcmV0dXJuIHByb2plY3Rfc2l6ZShtZXRlcnMpICogcHJvamVjdF91U2NhbGU7XFxufVxcbmZsb2F0IHByb2plY3Rfc2l6ZV90b19waXhlbChmbG9hdCBzaXplLCBpbnQgdW5pdCkge1xcbiAgaWYgKHVuaXQgPT0gVU5JVF9NRVRFUlMpIHJldHVybiBwcm9qZWN0X3NpemVfdG9fcGl4ZWwoc2l6ZSk7XFxuICBpZiAodW5pdCA9PSBVTklUX0NPTU1PTikgcmV0dXJuIHNpemUgKiBwcm9qZWN0X3VTY2FsZTtcXG4gIHJldHVybiBzaXplO1xcbn1cXG5mbG9hdCBwcm9qZWN0X3BpeGVsX3NpemUoZmxvYXQgcGl4ZWxzKSB7XFxuICByZXR1cm4gcGl4ZWxzIC8gcHJvamVjdF91U2NhbGU7XFxufVxcbnZlYzIgcHJvamVjdF9waXhlbF9zaXplKHZlYzIgcGl4ZWxzKSB7XFxuICByZXR1cm4gcGl4ZWxzIC8gcHJvamVjdF91U2NhbGU7XFxufVxcblwiKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2plY3QuZ2xzbC5qcy5tYXAiLCJpbXBvcnQgeyBmcDMyIH0gZnJvbSAnQGx1bWEuZ2wvY29yZSc7XG5pbXBvcnQgZ2VvbWV0cnkgZnJvbSAnLi4vbWlzYy9nZW9tZXRyeSc7XG5pbXBvcnQgcHJvamVjdFNoYWRlciBmcm9tICcuL3Byb2plY3QuZ2xzbCc7XG5pbXBvcnQgeyBnZXRVbmlmb3Jtc0Zyb21WaWV3cG9ydCB9IGZyb20gJy4vdmlld3BvcnQtdW5pZm9ybXMnO1xuY29uc3QgSU5JVElBTF9NT0RVTEVfT1BUSU9OUyA9IHt9O1xuXG5mdW5jdGlvbiBnZXRVbmlmb3JtcyhvcHRzID0gSU5JVElBTF9NT0RVTEVfT1BUSU9OUykge1xuICBpZiAoJ3ZpZXdwb3J0JyBpbiBvcHRzKSB7XG4gICAgcmV0dXJuIGdldFVuaWZvcm1zRnJvbVZpZXdwb3J0KG9wdHMpO1xuICB9XG5cbiAgcmV0dXJuIHt9O1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdwcm9qZWN0JyxcbiAgZGVwZW5kZW5jaWVzOiBbZnAzMiwgZ2VvbWV0cnldLFxuICB2czogcHJvamVjdFNoYWRlcixcbiAgZ2V0VW5pZm9ybXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///89668\n')},8771:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "C": function() { return /* binding */ getUniformsFromViewport; },\n/* harmony export */   "v": function() { return /* binding */ getOffsetOrigin; }\n/* harmony export */ });\n/* harmony import */ var gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85975);\n/* harmony import */ var gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98333);\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24088);\n/* harmony import */ var _utils_memoize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88177);\n\n\n\n\nconst ZERO_VECTOR = [0, 0, 0, 0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = (0,_utils_memoize__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(calculateViewportUniforms);\nfunction getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n  if (coordinateOrigin.length < 3) {\n    coordinateOrigin = [coordinateOrigin[0], coordinateOrigin[1], 0];\n  }\n\n  let shaderCoordinateOrigin = coordinateOrigin;\n  let geospatialOrigin;\n  let offsetMode = true;\n\n  if (coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.LNGLAT_OFFSETS */ .Df.LNGLAT_OFFSETS || coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.METER_OFFSETS */ .Df.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .PROJECTION_MODE.WEB_MERCATOR */ .zG.WEB_MERCATOR:\n      if (coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.LNGLAT */ .Df.LNGLAT || coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.CARTESIAN */ .Df.CARTESIAN) {\n        geospatialOrigin = [0, 0, 0];\n        offsetMode = false;\n      }\n\n      break;\n\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET */ .zG.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.LNGLAT */ .Df.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.CARTESIAN */ .Df.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .PROJECTION_MODE.IDENTITY */ .zG.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n      break;\n\n    case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .PROJECTION_MODE.GLOBE */ .zG.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  return {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  const {\n    viewMatrixUncentered,\n    projectionMatrix\n  } = viewport;\n  let {\n    viewMatrix,\n    viewProjectionMatrix\n  } = viewport;\n  let projectionCenter = ZERO_VECTOR;\n  let originCommon = ZERO_VECTOR;\n  let cameraPosCommon = viewport.cameraPosition;\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n\n  if (offsetMode) {\n    originCommon = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - originCommon[0], cameraPosCommon[1] - originCommon[1], cameraPosCommon[2] - originCommon[2]];\n    originCommon[3] = 1;\n    projectionCenter = gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__/* .transformMat4 */ .fF([], originCommon, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_3__/* .multiply */ .Jp([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_3__/* .multiply */ .Jp([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix,\n    viewProjectionMatrix,\n    projectionCenter,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  };\n}\n\nfunction getUniformsFromViewport({\n  viewport,\n  devicePixelRatio = 1,\n  modelMatrix = null,\n  coordinateSystem = _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.DEFAULT */ .Df.DEFAULT,\n  coordinateOrigin = DEFAULT_COORDINATE_ORIGIN,\n  autoWrapLongitude = false\n}) {\n  if (coordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.DEFAULT */ .Df.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.LNGLAT */ .Df.LNGLAT : _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.CARTESIAN */ .Df.CARTESIAN;\n  }\n\n  const uniforms = getMemoizedViewportUniforms({\n    viewport,\n    devicePixelRatio,\n    coordinateSystem,\n    coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms({\n  viewport,\n  devicePixelRatio,\n  coordinateSystem,\n  coordinateOrigin\n}) {\n  const {\n    projectionCenter,\n    viewProjectionMatrix,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n  const distanceScales = viewport.getDistanceScales();\n  const viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  const focalDistance = gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__/* .transformMat4 */ .fF([], [0, 0, -viewport.focalDistance, 1], viewport.projectionMatrix)[3] || 1;\n  const uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCommonOrigin: originCommon.slice(0, 3),\n    project_uCenter: projectionCenter,\n    project_uPseudoMeters: Boolean(viewport._pseudoMeters),\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: focalDistance,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uWrapLongitude: false,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uModelMatrix: IDENTITY_MATRIX,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.METER_OFFSETS */ .Df.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.LNGLAT */ .Df.LNGLAT:\n      case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.LNGLAT_OFFSETS */ .Df.LNGLAT_OFFSETS:\n        if (!viewport._pseudoMeters) {\n          uniforms.project_uCommonUnitsPerMeter = distanceScalesAtOrigin.unitsPerMeter;\n        }\n\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case _lib_constants__WEBPACK_IMPORTED_MODULE_1__/* .COORDINATE_SYSTEM.CARTESIAN */ .Df.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODc3MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1QztBQUNBO0FBQ2tDO0FBQy9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsbUVBQU87QUFDcEM7QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDJCQUEyQixxR0FBZ0MseUJBQXlCLG1HQUErQjtBQUNuSDtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0EsU0FBUywrRkFBNEI7QUFDckMsK0JBQStCLHFGQUF3Qix5QkFBeUIsMkZBQTJCO0FBQzNHO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxTQUFTLHVIQUF3QztBQUNqRCwrQkFBK0IscUZBQXdCO0FBQ3ZEO0FBQ0EsUUFBUSw4QkFBOEIsMkZBQTJCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxTQUFTLHVGQUF3QjtBQUNqQztBQUNBO0FBQ0E7O0FBRUEsU0FBUyxpRkFBcUI7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtRUFBa0I7QUFDekM7QUFDQSwyQkFBMkIsOERBQWE7QUFDeEMsMkJBQTJCLDhEQUFhO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVGQUF5QjtBQUM5QztBQUNBO0FBQ0EsQ0FBQztBQUNELDJCQUEyQix1RkFBeUI7QUFDcEQsK0NBQStDLHFGQUF3QixHQUFHLDJGQUEyQjtBQUNyRzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLHdCQUF3QixtRUFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFdBQVcsbUdBQStCO0FBQzFDO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLHFGQUF3QjtBQUNuQyxXQUFXLHFHQUFnQztBQUMzQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFdBQVcsMkZBQTJCO0FBQ3RDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vc2hhZGVybGliL3Byb2plY3Qvdmlld3BvcnQtdW5pZm9ybXMuanM/MDcxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBtYXQ0IGZyb20gJ2dsLW1hdHJpeC9tYXQ0JztcbmltcG9ydCAqIGFzIHZlYzQgZnJvbSAnZ2wtbWF0cml4L3ZlYzQnO1xuaW1wb3J0IHsgQ09PUkRJTkFURV9TWVNURU0sIFBST0pFQ1RJT05fTU9ERSB9IGZyb20gJy4uLy4uL2xpYi9jb25zdGFudHMnO1xuaW1wb3J0IG1lbW9pemUgZnJvbSAnLi4vLi4vdXRpbHMvbWVtb2l6ZSc7XG5jb25zdCBaRVJPX1ZFQ1RPUiA9IFswLCAwLCAwLCAwXTtcbmNvbnN0IFZFQ1RPUl9UT19QT0lOVF9NQVRSSVggPSBbMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMF07XG5jb25zdCBJREVOVElUWV9NQVRSSVggPSBbMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMV07XG5jb25zdCBERUZBVUxUX1BJWEVMU19QRVJfVU5JVDIgPSBbMCwgMCwgMF07XG5jb25zdCBERUZBVUxUX0NPT1JESU5BVEVfT1JJR0lOID0gWzAsIDAsIDBdO1xuY29uc3QgZ2V0TWVtb2l6ZWRWaWV3cG9ydFVuaWZvcm1zID0gbWVtb2l6ZShjYWxjdWxhdGVWaWV3cG9ydFVuaWZvcm1zKTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRPZmZzZXRPcmlnaW4odmlld3BvcnQsIGNvb3JkaW5hdGVTeXN0ZW0sIGNvb3JkaW5hdGVPcmlnaW4gPSBERUZBVUxUX0NPT1JESU5BVEVfT1JJR0lOKSB7XG4gIGlmIChjb29yZGluYXRlT3JpZ2luLmxlbmd0aCA8IDMpIHtcbiAgICBjb29yZGluYXRlT3JpZ2luID0gW2Nvb3JkaW5hdGVPcmlnaW5bMF0sIGNvb3JkaW5hdGVPcmlnaW5bMV0sIDBdO1xuICB9XG5cbiAgbGV0IHNoYWRlckNvb3JkaW5hdGVPcmlnaW4gPSBjb29yZGluYXRlT3JpZ2luO1xuICBsZXQgZ2Vvc3BhdGlhbE9yaWdpbjtcbiAgbGV0IG9mZnNldE1vZGUgPSB0cnVlO1xuXG4gIGlmIChjb29yZGluYXRlU3lzdGVtID09PSBDT09SRElOQVRFX1NZU1RFTS5MTkdMQVRfT0ZGU0VUUyB8fCBjb29yZGluYXRlU3lzdGVtID09PSBDT09SRElOQVRFX1NZU1RFTS5NRVRFUl9PRkZTRVRTKSB7XG4gICAgZ2Vvc3BhdGlhbE9yaWdpbiA9IGNvb3JkaW5hdGVPcmlnaW47XG4gIH0gZWxzZSB7XG4gICAgZ2Vvc3BhdGlhbE9yaWdpbiA9IHZpZXdwb3J0LmlzR2Vvc3BhdGlhbCA/IFtNYXRoLmZyb3VuZCh2aWV3cG9ydC5sb25naXR1ZGUpLCBNYXRoLmZyb3VuZCh2aWV3cG9ydC5sYXRpdHVkZSksIDBdIDogbnVsbDtcbiAgfVxuXG4gIHN3aXRjaCAodmlld3BvcnQucHJvamVjdGlvbk1vZGUpIHtcbiAgICBjYXNlIFBST0pFQ1RJT05fTU9ERS5XRUJfTUVSQ0FUT1I6XG4gICAgICBpZiAoY29vcmRpbmF0ZVN5c3RlbSA9PT0gQ09PUkRJTkFURV9TWVNURU0uTE5HTEFUIHx8IGNvb3JkaW5hdGVTeXN0ZW0gPT09IENPT1JESU5BVEVfU1lTVEVNLkNBUlRFU0lBTikge1xuICAgICAgICBnZW9zcGF0aWFsT3JpZ2luID0gWzAsIDAsIDBdO1xuICAgICAgICBvZmZzZXRNb2RlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBQUk9KRUNUSU9OX01PREUuV0VCX01FUkNBVE9SX0FVVE9fT0ZGU0VUOlxuICAgICAgaWYgKGNvb3JkaW5hdGVTeXN0ZW0gPT09IENPT1JESU5BVEVfU1lTVEVNLkxOR0xBVCkge1xuICAgICAgICBzaGFkZXJDb29yZGluYXRlT3JpZ2luID0gZ2Vvc3BhdGlhbE9yaWdpbjtcbiAgICAgIH0gZWxzZSBpZiAoY29vcmRpbmF0ZVN5c3RlbSA9PT0gQ09PUkRJTkFURV9TWVNURU0uQ0FSVEVTSUFOKSB7XG4gICAgICAgIHNoYWRlckNvb3JkaW5hdGVPcmlnaW4gPSBbTWF0aC5mcm91bmQodmlld3BvcnQuY2VudGVyWzBdKSwgTWF0aC5mcm91bmQodmlld3BvcnQuY2VudGVyWzFdKSwgMF07XG4gICAgICAgIGdlb3NwYXRpYWxPcmlnaW4gPSB2aWV3cG9ydC51bnByb2plY3RQb3NpdGlvbihzaGFkZXJDb29yZGluYXRlT3JpZ2luKTtcbiAgICAgICAgc2hhZGVyQ29vcmRpbmF0ZU9yaWdpblswXSAtPSBjb29yZGluYXRlT3JpZ2luWzBdO1xuICAgICAgICBzaGFkZXJDb29yZGluYXRlT3JpZ2luWzFdIC09IGNvb3JkaW5hdGVPcmlnaW5bMV07XG4gICAgICAgIHNoYWRlckNvb3JkaW5hdGVPcmlnaW5bMl0gLT0gY29vcmRpbmF0ZU9yaWdpblsyXTtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFBST0pFQ1RJT05fTU9ERS5JREVOVElUWTpcbiAgICAgIHNoYWRlckNvb3JkaW5hdGVPcmlnaW4gPSB2aWV3cG9ydC5wb3NpdGlvbi5tYXAoTWF0aC5mcm91bmQpO1xuICAgICAgc2hhZGVyQ29vcmRpbmF0ZU9yaWdpblsyXSA9IHNoYWRlckNvb3JkaW5hdGVPcmlnaW5bMl0gfHwgMDtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBQUk9KRUNUSU9OX01PREUuR0xPQkU6XG4gICAgICBvZmZzZXRNb2RlID0gZmFsc2U7XG4gICAgICBnZW9zcGF0aWFsT3JpZ2luID0gbnVsbDtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIG9mZnNldE1vZGUgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2Vvc3BhdGlhbE9yaWdpbixcbiAgICBzaGFkZXJDb29yZGluYXRlT3JpZ2luLFxuICAgIG9mZnNldE1vZGVcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlTWF0cml4QW5kT2Zmc2V0KHZpZXdwb3J0LCBjb29yZGluYXRlU3lzdGVtLCBjb29yZGluYXRlT3JpZ2luKSB7XG4gIGNvbnN0IHtcbiAgICB2aWV3TWF0cml4VW5jZW50ZXJlZCxcbiAgICBwcm9qZWN0aW9uTWF0cml4XG4gIH0gPSB2aWV3cG9ydDtcbiAgbGV0IHtcbiAgICB2aWV3TWF0cml4LFxuICAgIHZpZXdQcm9qZWN0aW9uTWF0cml4XG4gIH0gPSB2aWV3cG9ydDtcbiAgbGV0IHByb2plY3Rpb25DZW50ZXIgPSBaRVJPX1ZFQ1RPUjtcbiAgbGV0IG9yaWdpbkNvbW1vbiA9IFpFUk9fVkVDVE9SO1xuICBsZXQgY2FtZXJhUG9zQ29tbW9uID0gdmlld3BvcnQuY2FtZXJhUG9zaXRpb247XG4gIGNvbnN0IHtcbiAgICBnZW9zcGF0aWFsT3JpZ2luLFxuICAgIHNoYWRlckNvb3JkaW5hdGVPcmlnaW4sXG4gICAgb2Zmc2V0TW9kZVxuICB9ID0gZ2V0T2Zmc2V0T3JpZ2luKHZpZXdwb3J0LCBjb29yZGluYXRlU3lzdGVtLCBjb29yZGluYXRlT3JpZ2luKTtcblxuICBpZiAob2Zmc2V0TW9kZSkge1xuICAgIG9yaWdpbkNvbW1vbiA9IHZpZXdwb3J0LnByb2plY3RQb3NpdGlvbihnZW9zcGF0aWFsT3JpZ2luIHx8IHNoYWRlckNvb3JkaW5hdGVPcmlnaW4pO1xuICAgIGNhbWVyYVBvc0NvbW1vbiA9IFtjYW1lcmFQb3NDb21tb25bMF0gLSBvcmlnaW5Db21tb25bMF0sIGNhbWVyYVBvc0NvbW1vblsxXSAtIG9yaWdpbkNvbW1vblsxXSwgY2FtZXJhUG9zQ29tbW9uWzJdIC0gb3JpZ2luQ29tbW9uWzJdXTtcbiAgICBvcmlnaW5Db21tb25bM10gPSAxO1xuICAgIHByb2plY3Rpb25DZW50ZXIgPSB2ZWM0LnRyYW5zZm9ybU1hdDQoW10sIG9yaWdpbkNvbW1vbiwgdmlld1Byb2plY3Rpb25NYXRyaXgpO1xuICAgIHZpZXdNYXRyaXggPSB2aWV3TWF0cml4VW5jZW50ZXJlZCB8fCB2aWV3TWF0cml4O1xuICAgIHZpZXdQcm9qZWN0aW9uTWF0cml4ID0gbWF0NC5tdWx0aXBseShbXSwgcHJvamVjdGlvbk1hdHJpeCwgdmlld01hdHJpeCk7XG4gICAgdmlld1Byb2plY3Rpb25NYXRyaXggPSBtYXQ0Lm11bHRpcGx5KFtdLCB2aWV3UHJvamVjdGlvbk1hdHJpeCwgVkVDVE9SX1RPX1BPSU5UX01BVFJJWCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHZpZXdNYXRyaXgsXG4gICAgdmlld1Byb2plY3Rpb25NYXRyaXgsXG4gICAgcHJvamVjdGlvbkNlbnRlcixcbiAgICBvcmlnaW5Db21tb24sXG4gICAgY2FtZXJhUG9zQ29tbW9uLFxuICAgIHNoYWRlckNvb3JkaW5hdGVPcmlnaW4sXG4gICAgZ2Vvc3BhdGlhbE9yaWdpblxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5pZm9ybXNGcm9tVmlld3BvcnQoe1xuICB2aWV3cG9ydCxcbiAgZGV2aWNlUGl4ZWxSYXRpbyA9IDEsXG4gIG1vZGVsTWF0cml4ID0gbnVsbCxcbiAgY29vcmRpbmF0ZVN5c3RlbSA9IENPT1JESU5BVEVfU1lTVEVNLkRFRkFVTFQsXG4gIGNvb3JkaW5hdGVPcmlnaW4gPSBERUZBVUxUX0NPT1JESU5BVEVfT1JJR0lOLFxuICBhdXRvV3JhcExvbmdpdHVkZSA9IGZhbHNlXG59KSB7XG4gIGlmIChjb29yZGluYXRlU3lzdGVtID09PSBDT09SRElOQVRFX1NZU1RFTS5ERUZBVUxUKSB7XG4gICAgY29vcmRpbmF0ZVN5c3RlbSA9IHZpZXdwb3J0LmlzR2Vvc3BhdGlhbCA/IENPT1JESU5BVEVfU1lTVEVNLkxOR0xBVCA6IENPT1JESU5BVEVfU1lTVEVNLkNBUlRFU0lBTjtcbiAgfVxuXG4gIGNvbnN0IHVuaWZvcm1zID0gZ2V0TWVtb2l6ZWRWaWV3cG9ydFVuaWZvcm1zKHtcbiAgICB2aWV3cG9ydCxcbiAgICBkZXZpY2VQaXhlbFJhdGlvLFxuICAgIGNvb3JkaW5hdGVTeXN0ZW0sXG4gICAgY29vcmRpbmF0ZU9yaWdpblxuICB9KTtcbiAgdW5pZm9ybXMucHJvamVjdF91V3JhcExvbmdpdHVkZSA9IGF1dG9XcmFwTG9uZ2l0dWRlO1xuICB1bmlmb3Jtcy5wcm9qZWN0X3VNb2RlbE1hdHJpeCA9IG1vZGVsTWF0cml4IHx8IElERU5USVRZX01BVFJJWDtcbiAgcmV0dXJuIHVuaWZvcm1zO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVWaWV3cG9ydFVuaWZvcm1zKHtcbiAgdmlld3BvcnQsXG4gIGRldmljZVBpeGVsUmF0aW8sXG4gIGNvb3JkaW5hdGVTeXN0ZW0sXG4gIGNvb3JkaW5hdGVPcmlnaW5cbn0pIHtcbiAgY29uc3Qge1xuICAgIHByb2plY3Rpb25DZW50ZXIsXG4gICAgdmlld1Byb2plY3Rpb25NYXRyaXgsXG4gICAgb3JpZ2luQ29tbW9uLFxuICAgIGNhbWVyYVBvc0NvbW1vbixcbiAgICBzaGFkZXJDb29yZGluYXRlT3JpZ2luLFxuICAgIGdlb3NwYXRpYWxPcmlnaW5cbiAgfSA9IGNhbGN1bGF0ZU1hdHJpeEFuZE9mZnNldCh2aWV3cG9ydCwgY29vcmRpbmF0ZVN5c3RlbSwgY29vcmRpbmF0ZU9yaWdpbik7XG4gIGNvbnN0IGRpc3RhbmNlU2NhbGVzID0gdmlld3BvcnQuZ2V0RGlzdGFuY2VTY2FsZXMoKTtcbiAgY29uc3Qgdmlld3BvcnRTaXplID0gW3ZpZXdwb3J0LndpZHRoICogZGV2aWNlUGl4ZWxSYXRpbywgdmlld3BvcnQuaGVpZ2h0ICogZGV2aWNlUGl4ZWxSYXRpb107XG4gIGNvbnN0IGZvY2FsRGlzdGFuY2UgPSB2ZWM0LnRyYW5zZm9ybU1hdDQoW10sIFswLCAwLCAtdmlld3BvcnQuZm9jYWxEaXN0YW5jZSwgMV0sIHZpZXdwb3J0LnByb2plY3Rpb25NYXRyaXgpWzNdIHx8IDE7XG4gIGNvbnN0IHVuaWZvcm1zID0ge1xuICAgIHByb2plY3RfdUNvb3JkaW5hdGVTeXN0ZW06IGNvb3JkaW5hdGVTeXN0ZW0sXG4gICAgcHJvamVjdF91UHJvamVjdGlvbk1vZGU6IHZpZXdwb3J0LnByb2plY3Rpb25Nb2RlLFxuICAgIHByb2plY3RfdUNvb3JkaW5hdGVPcmlnaW46IHNoYWRlckNvb3JkaW5hdGVPcmlnaW4sXG4gICAgcHJvamVjdF91Q29tbW9uT3JpZ2luOiBvcmlnaW5Db21tb24uc2xpY2UoMCwgMyksXG4gICAgcHJvamVjdF91Q2VudGVyOiBwcm9qZWN0aW9uQ2VudGVyLFxuICAgIHByb2plY3RfdVBzZXVkb01ldGVyczogQm9vbGVhbih2aWV3cG9ydC5fcHNldWRvTWV0ZXJzKSxcbiAgICBwcm9qZWN0X3VWaWV3cG9ydFNpemU6IHZpZXdwb3J0U2l6ZSxcbiAgICBwcm9qZWN0X3VEZXZpY2VQaXhlbFJhdGlvOiBkZXZpY2VQaXhlbFJhdGlvLFxuICAgIHByb2plY3RfdUZvY2FsRGlzdGFuY2U6IGZvY2FsRGlzdGFuY2UsXG4gICAgcHJvamVjdF91Q29tbW9uVW5pdHNQZXJNZXRlcjogZGlzdGFuY2VTY2FsZXMudW5pdHNQZXJNZXRlcixcbiAgICBwcm9qZWN0X3VDb21tb25Vbml0c1BlcldvcmxkVW5pdDogZGlzdGFuY2VTY2FsZXMudW5pdHNQZXJNZXRlcixcbiAgICBwcm9qZWN0X3VDb21tb25Vbml0c1BlcldvcmxkVW5pdDI6IERFRkFVTFRfUElYRUxTX1BFUl9VTklUMixcbiAgICBwcm9qZWN0X3VTY2FsZTogdmlld3BvcnQuc2NhbGUsXG4gICAgcHJvamVjdF91V3JhcExvbmdpdHVkZTogZmFsc2UsXG4gICAgcHJvamVjdF91Vmlld1Byb2plY3Rpb25NYXRyaXg6IHZpZXdQcm9qZWN0aW9uTWF0cml4LFxuICAgIHByb2plY3RfdU1vZGVsTWF0cml4OiBJREVOVElUWV9NQVRSSVgsXG4gICAgcHJvamVjdF91Q2FtZXJhUG9zaXRpb246IGNhbWVyYVBvc0NvbW1vblxuICB9O1xuXG4gIGlmIChnZW9zcGF0aWFsT3JpZ2luKSB7XG4gICAgY29uc3QgZGlzdGFuY2VTY2FsZXNBdE9yaWdpbiA9IHZpZXdwb3J0LmdldERpc3RhbmNlU2NhbGVzKGdlb3NwYXRpYWxPcmlnaW4pO1xuXG4gICAgc3dpdGNoIChjb29yZGluYXRlU3lzdGVtKSB7XG4gICAgICBjYXNlIENPT1JESU5BVEVfU1lTVEVNLk1FVEVSX09GRlNFVFM6XG4gICAgICAgIHVuaWZvcm1zLnByb2plY3RfdUNvbW1vblVuaXRzUGVyV29ybGRVbml0ID0gZGlzdGFuY2VTY2FsZXNBdE9yaWdpbi51bml0c1Blck1ldGVyO1xuICAgICAgICB1bmlmb3Jtcy5wcm9qZWN0X3VDb21tb25Vbml0c1BlcldvcmxkVW5pdDIgPSBkaXN0YW5jZVNjYWxlc0F0T3JpZ2luLnVuaXRzUGVyTWV0ZXIyO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDT09SRElOQVRFX1NZU1RFTS5MTkdMQVQ6XG4gICAgICBjYXNlIENPT1JESU5BVEVfU1lTVEVNLkxOR0xBVF9PRkZTRVRTOlxuICAgICAgICBpZiAoIXZpZXdwb3J0Ll9wc2V1ZG9NZXRlcnMpIHtcbiAgICAgICAgICB1bmlmb3Jtcy5wcm9qZWN0X3VDb21tb25Vbml0c1Blck1ldGVyID0gZGlzdGFuY2VTY2FsZXNBdE9yaWdpbi51bml0c1Blck1ldGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgdW5pZm9ybXMucHJvamVjdF91Q29tbW9uVW5pdHNQZXJXb3JsZFVuaXQgPSBkaXN0YW5jZVNjYWxlc0F0T3JpZ2luLnVuaXRzUGVyRGVncmVlO1xuICAgICAgICB1bmlmb3Jtcy5wcm9qZWN0X3VDb21tb25Vbml0c1BlcldvcmxkVW5pdDIgPSBkaXN0YW5jZVNjYWxlc0F0T3JpZ2luLnVuaXRzUGVyRGVncmVlMjtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ09PUkRJTkFURV9TWVNURU0uQ0FSVEVTSUFOOlxuICAgICAgICB1bmlmb3Jtcy5wcm9qZWN0X3VDb21tb25Vbml0c1BlcldvcmxkVW5pdCA9IFsxLCAxLCBkaXN0YW5jZVNjYWxlc0F0T3JpZ2luLnVuaXRzUGVyTWV0ZXJbMl1dO1xuICAgICAgICB1bmlmb3Jtcy5wcm9qZWN0X3VDb21tb25Vbml0c1BlcldvcmxkVW5pdDIgPSBbMCwgMCwgZGlzdGFuY2VTY2FsZXNBdE9yaWdpbi51bml0c1Blck1ldGVyMlsyXV07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5pZm9ybXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12aWV3cG9ydC11bmlmb3Jtcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8771\n')},93844:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _project_project__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(89668);\n\nconst vs = "\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  mat3 rotation;\\n  if (project_needs_rotation(projectedPosition, rotation)) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n";\n/* harmony default export */ __webpack_exports__["Z"] = ({\n  name: \'project32\',\n  dependencies: [_project_project__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z],\n  vs\n});\n//# sourceMappingURL=project32.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTM4NDQuanMiLCJtYXBwaW5ncyI6IjtBQUF5QztBQUN6QyxpSUFBaUksdUVBQXVFLGtCQUFrQiw4REFBOEQsNEtBQTRLLEtBQUssMkRBQTJELGdFQUFnRSxHQUFHLDhGQUE4Rix3QkFBd0IsMEZBQTBGLEdBQUc7QUFDMXhCLHlEQUFlO0FBQ2Y7QUFDQSxpQkFBaUIsaUVBQU87QUFDeEI7QUFDQSxDQUFDLEVBQUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS9zaGFkZXJsaWIvcHJvamVjdDMyL3Byb2plY3QzMi5qcz8zN2JmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwcm9qZWN0IGZyb20gJy4uL3Byb2plY3QvcHJvamVjdCc7XG5jb25zdCB2cyA9IFwiXFxudmVjNCBwcm9qZWN0X3Bvc2l0aW9uX3RvX2NsaXBzcGFjZShcXG4gIHZlYzMgcG9zaXRpb24sIHZlYzMgcG9zaXRpb242NExvdywgdmVjMyBvZmZzZXQsIG91dCB2ZWM0IGNvbW1vblBvc2l0aW9uXFxuKSB7XFxuICB2ZWMzIHByb2plY3RlZFBvc2l0aW9uID0gcHJvamVjdF9wb3NpdGlvbihwb3NpdGlvbiwgcG9zaXRpb242NExvdyk7XFxuICBtYXQzIHJvdGF0aW9uO1xcbiAgaWYgKHByb2plY3RfbmVlZHNfcm90YXRpb24ocHJvamVjdGVkUG9zaXRpb24sIHJvdGF0aW9uKSkge1xcbiAgICAvLyBvZmZzZXQgaXMgc3BlY2lmaWVkIGFzIEVOVVxcbiAgICAvLyB3aGVuIGluIGdsb2JlIHByb2plY3Rpb24sIHJvdGF0ZSBvZmZzZXQgc28gdGhhdCB0aGUgZ3JvdW5kIGFsaWdocyB3aXRoIHRoZSBzdXJmYWNlIG9mIHRoZSBnbG9iZVxcbiAgICBvZmZzZXQgPSByb3RhdGlvbiAqIG9mZnNldDtcXG4gIH1cXG4gIGNvbW1vblBvc2l0aW9uID0gdmVjNChwcm9qZWN0ZWRQb3NpdGlvbiArIG9mZnNldCwgMS4wKTtcXG4gIHJldHVybiBwcm9qZWN0X2NvbW1vbl9wb3NpdGlvbl90b19jbGlwc3BhY2UoY29tbW9uUG9zaXRpb24pO1xcbn1cXG5cXG52ZWM0IHByb2plY3RfcG9zaXRpb25fdG9fY2xpcHNwYWNlKFxcbiAgdmVjMyBwb3NpdGlvbiwgdmVjMyBwb3NpdGlvbjY0TG93LCB2ZWMzIG9mZnNldFxcbikge1xcbiAgdmVjNCBjb21tb25Qb3NpdGlvbjtcXG4gIHJldHVybiBwcm9qZWN0X3Bvc2l0aW9uX3RvX2NsaXBzcGFjZShwb3NpdGlvbiwgcG9zaXRpb242NExvdywgb2Zmc2V0LCBjb21tb25Qb3NpdGlvbik7XFxufVxcblwiO1xuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAncHJvamVjdDMyJyxcbiAgZGVwZW5kZW5jaWVzOiBbcHJvamVjdF0sXG4gIHZzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvamVjdDMyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///93844\n')},33115:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24088);\n/* harmony import */ var _project_project__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89668);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85451);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43855);\n/* harmony import */ var _utils_memoize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88177);\n/* harmony import */ var _math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78866);\n\n\n\n\n\nconst vs = "\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n";\nconst fs = "\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n";\nconst getMemoizedViewportCenterPosition = (0,_utils_memoize__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = (0,_utils_memoize__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(getViewProjectionMatrices);\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  const [x, y, z] = xyz;\n  const coord = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .pixelsToWorld */ .CT)([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}) {\n  return new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}) {\n  const projectionMatrices = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(pixel => screenToCommonSpace(pixel, pixelUnprojectionMatrix));\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new _math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms(opts, context) {\n  const {\n    shadowEnabled = true\n  } = opts;\n\n  if (!shadowEnabled || !opts.shadowMatrices || !opts.shadowMatrices.length) {\n    return {\n      shadow_uDrawShadowMap: false,\n      shadow_uUseShadowMap: false\n    };\n  }\n\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  const projectCenters = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new _math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === _lib_constants__WEBPACK_IMPORTED_MODULE_4__/* .COORDINATE_SYSTEM.LNGLAT */ .Df.LNGLAT && context.project_uProjectionMode === _lib_constants__WEBPACK_IMPORTED_MODULE_4__/* .PROJECTION_MODE.WEB_MERCATOR */ .zG.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms["shadow_uViewProjectionMatrices[".concat(i, "]")] = viewProjectionMatrices[i];\n    uniforms["shadow_uProjectCenters[".concat(i, "]")] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms["shadow_uShadowMap".concat(i)] = opts.shadowMaps[i];\n    } else {\n      uniforms["shadow_uShadowMap".concat(i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = ({\n  name: \'shadow\',\n  dependencies: [_project_project__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z],\n  vs,\n  fs,\n  inject: {\n    \'vs:DECKGL_FILTER_GL_POSITION\': "\\n    position = shadow_setVertexPosition(geometry.position);\\n    ",\n    \'fs:DECKGL_FILTER_COLOR\': "\\n    color = shadow_filterShadowColor(color);\\n    "\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if (\'viewport\' in opts && (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0)) {\n      return createShadowUniforms(opts, context);\n    }\n\n    return {};\n  }\n});\n//# sourceMappingURL=shadow.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMxMTUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlFO0FBQ2hDO0FBQ1E7QUFDUDtBQUNZO0FBQ3RELHVDQUF1QywwREFBMEQsa0RBQWtELHFDQUFxQyxvQ0FBb0MsOEJBQThCLG1DQUFtQyw4Q0FBOEMsOERBQThELGdDQUFnQyxrS0FBa0ssS0FBSywrQkFBK0Isc0JBQXNCLGdCQUFnQixNQUFNLHlDQUF5Qyw2SkFBNkosNEZBQTRGLFNBQVMsT0FBTyxLQUFLLHVCQUF1QixHQUFHO0FBQzUrQix1Q0FBdUMscUNBQXFDLG9DQUFvQyx1Q0FBdUMsdUNBQXVDLDZCQUE2QixtQ0FBbUMsOENBQThDLG9FQUFvRSxpREFBaUQseUVBQXlFLHNFQUFzRSx1REFBdUQsK0NBQStDLG1EQUFtRCxHQUFHLCtDQUErQyxnQ0FBZ0MsNERBQTRELDRDQUE0Qyx1QkFBdUIsS0FBSywrQkFBK0IsOEJBQThCLHFGQUFxRixvQ0FBb0MsdUZBQXVGLE9BQU8sMERBQTBELHVFQUF1RSxzSEFBc0gsS0FBSyxpQkFBaUIsR0FBRztBQUNuOEMsMENBQTBDLG1FQUFPO0FBQ2pELDBDQUEwQyxtRUFBTztBQUNqRDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsOEVBQWE7O0FBRTdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxhQUFhLDhEQUFPO0FBQ3BCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBEQUEwRCw4REFBTztBQUNqRTtBQUNBLGlDQUFpQyw4REFBTztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxrQkFBa0IsZ0NBQWdDO0FBQ2xEO0FBQ0Esb0ZBQW9GLDhEQUFPOztBQUUzRiw4Q0FBOEMscUZBQXdCLHdDQUF3QywrRkFBNEI7QUFDMUk7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsbUNBQW1DO0FBQ3JEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5REFBZTtBQUNmO0FBQ0EsaUJBQWlCLGlFQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLGtHQUFrRztBQUNsRyw2RUFBNkU7QUFDN0UsR0FBRztBQUNILHlCQUF5QixjQUFjO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vc2hhZGVybGliL3NoYWRvdy9zaGFkb3cuanM/ZGVlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDT09SRElOQVRFX1NZU1RFTSwgUFJPSkVDVElPTl9NT0RFIH0gZnJvbSAnLi4vLi4vbGliL2NvbnN0YW50cyc7XG5pbXBvcnQgcHJvamVjdCBmcm9tICcuLi9wcm9qZWN0L3Byb2plY3QnO1xuaW1wb3J0IHsgVmVjdG9yMywgTWF0cml4NCB9IGZyb20gJ0BtYXRoLmdsL2NvcmUnO1xuaW1wb3J0IG1lbW9pemUgZnJvbSAnLi4vLi4vdXRpbHMvbWVtb2l6ZSc7XG5pbXBvcnQgeyBwaXhlbHNUb1dvcmxkIH0gZnJvbSAnQG1hdGguZ2wvd2ViLW1lcmNhdG9yJztcbmNvbnN0IHZzID0gXCJcXG5jb25zdCBpbnQgbWF4X2xpZ2h0cyA9IDI7XFxudW5pZm9ybSBtYXQ0IHNoYWRvd191Vmlld1Byb2plY3Rpb25NYXRyaWNlc1ttYXhfbGlnaHRzXTtcXG51bmlmb3JtIHZlYzQgc2hhZG93X3VQcm9qZWN0Q2VudGVyc1ttYXhfbGlnaHRzXTtcXG51bmlmb3JtIGJvb2wgc2hhZG93X3VEcmF3U2hhZG93TWFwO1xcbnVuaWZvcm0gYm9vbCBzaGFkb3dfdVVzZVNoYWRvd01hcDtcXG51bmlmb3JtIGludCBzaGFkb3dfdUxpZ2h0SWQ7XFxudW5pZm9ybSBmbG9hdCBzaGFkb3dfdUxpZ2h0Q291bnQ7XFxuXFxudmFyeWluZyB2ZWMzIHNoYWRvd192UG9zaXRpb25bbWF4X2xpZ2h0c107XFxuXFxudmVjNCBzaGFkb3dfc2V0VmVydGV4UG9zaXRpb24odmVjNCBwb3NpdGlvbl9jb21tb25zcGFjZSkge1xcbiAgaWYgKHNoYWRvd191RHJhd1NoYWRvd01hcCkge1xcbiAgICByZXR1cm4gcHJvamVjdF9jb21tb25fcG9zaXRpb25fdG9fY2xpcHNwYWNlKHBvc2l0aW9uX2NvbW1vbnNwYWNlLCBzaGFkb3dfdVZpZXdQcm9qZWN0aW9uTWF0cmljZXNbc2hhZG93X3VMaWdodElkXSwgc2hhZG93X3VQcm9qZWN0Q2VudGVyc1tzaGFkb3dfdUxpZ2h0SWRdKTtcXG4gIH1cXG4gIGlmIChzaGFkb3dfdVVzZVNoYWRvd01hcCkge1xcbiAgICBmb3IgKGludCBpID0gMDsgaSA8IG1heF9saWdodHM7IGkrKykge1xcbiAgICAgIGlmKGkgPCBpbnQoc2hhZG93X3VMaWdodENvdW50KSkge1xcbiAgICAgICAgdmVjNCBzaGFkb3dNYXBfcG9zaXRpb24gPSBwcm9qZWN0X2NvbW1vbl9wb3NpdGlvbl90b19jbGlwc3BhY2UocG9zaXRpb25fY29tbW9uc3BhY2UsIHNoYWRvd191Vmlld1Byb2plY3Rpb25NYXRyaWNlc1tpXSwgc2hhZG93X3VQcm9qZWN0Q2VudGVyc1tpXSk7XFxuICAgICAgICBzaGFkb3dfdlBvc2l0aW9uW2ldID0gKHNoYWRvd01hcF9wb3NpdGlvbi54eXogLyBzaGFkb3dNYXBfcG9zaXRpb24udyArIDEuMCkgLyAyLjA7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuICByZXR1cm4gZ2xfUG9zaXRpb247XFxufVxcblwiO1xuY29uc3QgZnMgPSBcIlxcbmNvbnN0IGludCBtYXhfbGlnaHRzID0gMjtcXG51bmlmb3JtIGJvb2wgc2hhZG93X3VEcmF3U2hhZG93TWFwO1xcbnVuaWZvcm0gYm9vbCBzaGFkb3dfdVVzZVNoYWRvd01hcDtcXG51bmlmb3JtIHNhbXBsZXIyRCBzaGFkb3dfdVNoYWRvd01hcDA7XFxudW5pZm9ybSBzYW1wbGVyMkQgc2hhZG93X3VTaGFkb3dNYXAxO1xcbnVuaWZvcm0gdmVjNCBzaGFkb3dfdUNvbG9yO1xcbnVuaWZvcm0gZmxvYXQgc2hhZG93X3VMaWdodENvdW50O1xcblxcbnZhcnlpbmcgdmVjMyBzaGFkb3dfdlBvc2l0aW9uW21heF9saWdodHNdO1xcblxcbmNvbnN0IHZlYzQgYml0UGFja1NoaWZ0ID0gdmVjNCgxLjAsIDI1NS4wLCA2NTAyNS4wLCAxNjU4MTM3NS4wKTtcXG5jb25zdCB2ZWM0IGJpdFVucGFja1NoaWZ0ID0gMS4wIC8gYml0UGFja1NoaWZ0O1xcbmNvbnN0IHZlYzQgYml0TWFzayA9IHZlYzQoMS4wIC8gMjU1LjAsIDEuMCAvIDI1NS4wLCAxLjAgLyAyNTUuMCwgIDAuMCk7XFxuXFxuZmxvYXQgc2hhZG93X2dldFNoYWRvd1dlaWdodCh2ZWMzIHBvc2l0aW9uLCBzYW1wbGVyMkQgc2hhZG93TWFwKSB7XFxuICB2ZWM0IHJnYmFEZXB0aCA9IHRleHR1cmUyRChzaGFkb3dNYXAsIHBvc2l0aW9uLnh5KTtcXG5cXG4gIGZsb2F0IHogPSBkb3QocmdiYURlcHRoLCBiaXRVbnBhY2tTaGlmdCk7XFxuICByZXR1cm4gc21vb3Roc3RlcCgwLjAwMSwgMC4wMSwgcG9zaXRpb24ueiAtIHopO1xcbn1cXG5cXG52ZWM0IHNoYWRvd19maWx0ZXJTaGFkb3dDb2xvcih2ZWM0IGNvbG9yKSB7XFxuICBpZiAoc2hhZG93X3VEcmF3U2hhZG93TWFwKSB7XFxuICAgIHZlYzQgcmdiYURlcHRoID0gZnJhY3QoZ2xfRnJhZ0Nvb3JkLnogKiBiaXRQYWNrU2hpZnQpO1xcbiAgICByZ2JhRGVwdGggLT0gcmdiYURlcHRoLmdiYWEgKiBiaXRNYXNrO1xcbiAgICByZXR1cm4gcmdiYURlcHRoO1xcbiAgfVxcbiAgaWYgKHNoYWRvd191VXNlU2hhZG93TWFwKSB7XFxuICAgIGZsb2F0IHNoYWRvd0FscGhhID0gMC4wO1xcbiAgICBzaGFkb3dBbHBoYSArPSBzaGFkb3dfZ2V0U2hhZG93V2VpZ2h0KHNoYWRvd192UG9zaXRpb25bMF0sIHNoYWRvd191U2hhZG93TWFwMCk7XFxuICAgIGlmKHNoYWRvd191TGlnaHRDb3VudCA+IDEuMCkge1xcbiAgICAgIHNoYWRvd0FscGhhICs9IHNoYWRvd19nZXRTaGFkb3dXZWlnaHQoc2hhZG93X3ZQb3NpdGlvblsxXSwgc2hhZG93X3VTaGFkb3dNYXAxKTtcXG4gICAgfVxcbiAgICBzaGFkb3dBbHBoYSAqPSBzaGFkb3dfdUNvbG9yLmEgLyBzaGFkb3dfdUxpZ2h0Q291bnQ7XFxuICAgIGZsb2F0IGJsZW5kZWRBbHBoYSA9IHNoYWRvd0FscGhhICsgY29sb3IuYSAqICgxLjAgLSBzaGFkb3dBbHBoYSk7XFxuXFxuICAgIHJldHVybiB2ZWM0KFxcbiAgICAgIG1peChjb2xvci5yZ2IsIHNoYWRvd191Q29sb3IucmdiLCBzaGFkb3dBbHBoYSAvIGJsZW5kZWRBbHBoYSksXFxuICAgICAgYmxlbmRlZEFscGhhXFxuICAgICk7XFxuICB9XFxuICByZXR1cm4gY29sb3I7XFxufVxcblwiO1xuY29uc3QgZ2V0TWVtb2l6ZWRWaWV3cG9ydENlbnRlclBvc2l0aW9uID0gbWVtb2l6ZShnZXRWaWV3cG9ydENlbnRlclBvc2l0aW9uKTtcbmNvbnN0IGdldE1lbW9pemVkVmlld1Byb2plY3Rpb25NYXRyaWNlcyA9IG1lbW9pemUoZ2V0Vmlld1Byb2plY3Rpb25NYXRyaWNlcyk7XG5jb25zdCBERUZBVUxUX1NIQURPV19DT0xPUiA9IFswLCAwLCAwLCAxLjBdO1xuY29uc3QgVkVDVE9SX1RPX1BPSU5UX01BVFJJWCA9IFsxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAwXTtcblxuZnVuY3Rpb24gc2NyZWVuVG9Db21tb25TcGFjZSh4eXosIHBpeGVsVW5wcm9qZWN0aW9uTWF0cml4KSB7XG4gIGNvbnN0IFt4LCB5LCB6XSA9IHh5ejtcbiAgY29uc3QgY29vcmQgPSBwaXhlbHNUb1dvcmxkKFt4LCB5LCB6XSwgcGl4ZWxVbnByb2plY3Rpb25NYXRyaXgpO1xuXG4gIGlmIChOdW1iZXIuaXNGaW5pdGUoeikpIHtcbiAgICByZXR1cm4gY29vcmQ7XG4gIH1cblxuICByZXR1cm4gW2Nvb3JkWzBdLCBjb29yZFsxXSwgMF07XG59XG5cbmZ1bmN0aW9uIGdldFZpZXdwb3J0Q2VudGVyUG9zaXRpb24oe1xuICB2aWV3cG9ydCxcbiAgY2VudGVyXG59KSB7XG4gIHJldHVybiBuZXcgTWF0cml4NCh2aWV3cG9ydC52aWV3UHJvamVjdGlvbk1hdHJpeCkuaW52ZXJ0KCkudHJhbnNmb3JtKGNlbnRlcik7XG59XG5cbmZ1bmN0aW9uIGdldFZpZXdQcm9qZWN0aW9uTWF0cmljZXMoe1xuICB2aWV3cG9ydCxcbiAgc2hhZG93TWF0cmljZXNcbn0pIHtcbiAgY29uc3QgcHJvamVjdGlvbk1hdHJpY2VzID0gW107XG4gIGNvbnN0IHBpeGVsVW5wcm9qZWN0aW9uTWF0cml4ID0gdmlld3BvcnQucGl4ZWxVbnByb2plY3Rpb25NYXRyaXg7XG4gIGNvbnN0IGZhclogPSB2aWV3cG9ydC5pc0dlb3NwYXRpYWwgPyB1bmRlZmluZWQgOiAxO1xuICBjb25zdCBjb3JuZXJzID0gW1swLCAwLCBmYXJaXSwgW3ZpZXdwb3J0LndpZHRoLCAwLCBmYXJaXSwgWzAsIHZpZXdwb3J0LmhlaWdodCwgZmFyWl0sIFt2aWV3cG9ydC53aWR0aCwgdmlld3BvcnQuaGVpZ2h0LCBmYXJaXSwgWzAsIDAsIC0xXSwgW3ZpZXdwb3J0LndpZHRoLCAwLCAtMV0sIFswLCB2aWV3cG9ydC5oZWlnaHQsIC0xXSwgW3ZpZXdwb3J0LndpZHRoLCB2aWV3cG9ydC5oZWlnaHQsIC0xXV0ubWFwKHBpeGVsID0+IHNjcmVlblRvQ29tbW9uU3BhY2UocGl4ZWwsIHBpeGVsVW5wcm9qZWN0aW9uTWF0cml4KSk7XG5cbiAgZm9yIChjb25zdCBzaGFkb3dNYXRyaXggb2Ygc2hhZG93TWF0cmljZXMpIHtcbiAgICBjb25zdCB2aWV3TWF0cml4ID0gc2hhZG93TWF0cml4LmNsb25lKCkudHJhbnNsYXRlKG5ldyBWZWN0b3IzKHZpZXdwb3J0LmNlbnRlcikubmVnYXRlKCkpO1xuICAgIGNvbnN0IHBvc2l0aW9ucyA9IGNvcm5lcnMubWFwKGNvcm5lciA9PiB2aWV3TWF0cml4LnRyYW5zZm9ybShjb3JuZXIpKTtcbiAgICBjb25zdCBwcm9qZWN0aW9uTWF0cml4ID0gbmV3IE1hdHJpeDQoKS5vcnRobyh7XG4gICAgICBsZWZ0OiBNYXRoLm1pbiguLi5wb3NpdGlvbnMubWFwKHBvc2l0aW9uID0+IHBvc2l0aW9uWzBdKSksXG4gICAgICByaWdodDogTWF0aC5tYXgoLi4ucG9zaXRpb25zLm1hcChwb3NpdGlvbiA9PiBwb3NpdGlvblswXSkpLFxuICAgICAgYm90dG9tOiBNYXRoLm1pbiguLi5wb3NpdGlvbnMubWFwKHBvc2l0aW9uID0+IHBvc2l0aW9uWzFdKSksXG4gICAgICB0b3A6IE1hdGgubWF4KC4uLnBvc2l0aW9ucy5tYXAocG9zaXRpb24gPT4gcG9zaXRpb25bMV0pKSxcbiAgICAgIG5lYXI6IE1hdGgubWluKC4uLnBvc2l0aW9ucy5tYXAocG9zaXRpb24gPT4gLXBvc2l0aW9uWzJdKSksXG4gICAgICBmYXI6IE1hdGgubWF4KC4uLnBvc2l0aW9ucy5tYXAocG9zaXRpb24gPT4gLXBvc2l0aW9uWzJdKSlcbiAgICB9KTtcbiAgICBwcm9qZWN0aW9uTWF0cmljZXMucHVzaChwcm9qZWN0aW9uTWF0cml4Lm11bHRpcGx5UmlnaHQoc2hhZG93TWF0cml4KSk7XG4gIH1cblxuICByZXR1cm4gcHJvamVjdGlvbk1hdHJpY2VzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTaGFkb3dVbmlmb3JtcyhvcHRzLCBjb250ZXh0KSB7XG4gIGNvbnN0IHtcbiAgICBzaGFkb3dFbmFibGVkID0gdHJ1ZVxuICB9ID0gb3B0cztcblxuICBpZiAoIXNoYWRvd0VuYWJsZWQgfHwgIW9wdHMuc2hhZG93TWF0cmljZXMgfHwgIW9wdHMuc2hhZG93TWF0cmljZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNoYWRvd191RHJhd1NoYWRvd01hcDogZmFsc2UsXG4gICAgICBzaGFkb3dfdVVzZVNoYWRvd01hcDogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdW5pZm9ybXMgPSB7XG4gICAgc2hhZG93X3VEcmF3U2hhZG93TWFwOiBCb29sZWFuKG9wdHMuZHJhd1RvU2hhZG93TWFwKSxcbiAgICBzaGFkb3dfdVVzZVNoYWRvd01hcDogb3B0cy5zaGFkb3dNYXBzID8gb3B0cy5zaGFkb3dNYXBzLmxlbmd0aCA+IDAgOiBmYWxzZSxcbiAgICBzaGFkb3dfdUNvbG9yOiBvcHRzLnNoYWRvd0NvbG9yIHx8IERFRkFVTFRfU0hBRE9XX0NPTE9SLFxuICAgIHNoYWRvd191TGlnaHRJZDogb3B0cy5zaGFkb3dMaWdodElkIHx8IDAsXG4gICAgc2hhZG93X3VMaWdodENvdW50OiBvcHRzLnNoYWRvd01hdHJpY2VzLmxlbmd0aFxuICB9O1xuICBjb25zdCBjZW50ZXIgPSBnZXRNZW1vaXplZFZpZXdwb3J0Q2VudGVyUG9zaXRpb24oe1xuICAgIHZpZXdwb3J0OiBvcHRzLnZpZXdwb3J0LFxuICAgIGNlbnRlcjogY29udGV4dC5wcm9qZWN0X3VDZW50ZXJcbiAgfSk7XG4gIGNvbnN0IHByb2plY3RDZW50ZXJzID0gW107XG4gIGNvbnN0IHZpZXdQcm9qZWN0aW9uTWF0cmljZXMgPSBnZXRNZW1vaXplZFZpZXdQcm9qZWN0aW9uTWF0cmljZXMoe1xuICAgIHNoYWRvd01hdHJpY2VzOiBvcHRzLnNoYWRvd01hdHJpY2VzLFxuICAgIHZpZXdwb3J0OiBvcHRzLnZpZXdwb3J0XG4gIH0pLnNsaWNlKCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRzLnNoYWRvd01hdHJpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgdmlld1Byb2plY3Rpb25NYXRyaXggPSB2aWV3UHJvamVjdGlvbk1hdHJpY2VzW2ldO1xuICAgIGNvbnN0IHZpZXdQcm9qZWN0aW9uTWF0cml4Q2VudGVyZWQgPSB2aWV3UHJvamVjdGlvbk1hdHJpeC5jbG9uZSgpLnRyYW5zbGF0ZShuZXcgVmVjdG9yMyhvcHRzLnZpZXdwb3J0LmNlbnRlcikubmVnYXRlKCkpO1xuXG4gICAgaWYgKGNvbnRleHQucHJvamVjdF91Q29vcmRpbmF0ZVN5c3RlbSA9PT0gQ09PUkRJTkFURV9TWVNURU0uTE5HTEFUICYmIGNvbnRleHQucHJvamVjdF91UHJvamVjdGlvbk1vZGUgPT09IFBST0pFQ1RJT05fTU9ERS5XRUJfTUVSQ0FUT1IpIHtcbiAgICAgIHZpZXdQcm9qZWN0aW9uTWF0cmljZXNbaV0gPSB2aWV3UHJvamVjdGlvbk1hdHJpeENlbnRlcmVkO1xuICAgICAgcHJvamVjdENlbnRlcnNbaV0gPSBjZW50ZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXdQcm9qZWN0aW9uTWF0cmljZXNbaV0gPSB2aWV3UHJvamVjdGlvbk1hdHJpeC5jbG9uZSgpLm11bHRpcGx5UmlnaHQoVkVDVE9SX1RPX1BPSU5UX01BVFJJWCk7XG4gICAgICBwcm9qZWN0Q2VudGVyc1tpXSA9IHZpZXdQcm9qZWN0aW9uTWF0cml4Q2VudGVyZWQudHJhbnNmb3JtKGNlbnRlcik7XG4gICAgfVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aWV3UHJvamVjdGlvbk1hdHJpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgdW5pZm9ybXNbXCJzaGFkb3dfdVZpZXdQcm9qZWN0aW9uTWF0cmljZXNbXCIuY29uY2F0KGksIFwiXVwiKV0gPSB2aWV3UHJvamVjdGlvbk1hdHJpY2VzW2ldO1xuICAgIHVuaWZvcm1zW1wic2hhZG93X3VQcm9qZWN0Q2VudGVyc1tcIi5jb25jYXQoaSwgXCJdXCIpXSA9IHByb2plY3RDZW50ZXJzW2ldO1xuXG4gICAgaWYgKG9wdHMuc2hhZG93TWFwcyAmJiBvcHRzLnNoYWRvd01hcHMubGVuZ3RoID4gMCkge1xuICAgICAgdW5pZm9ybXNbXCJzaGFkb3dfdVNoYWRvd01hcFwiLmNvbmNhdChpKV0gPSBvcHRzLnNoYWRvd01hcHNbaV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuaWZvcm1zW1wic2hhZG93X3VTaGFkb3dNYXBcIi5jb25jYXQoaSldID0gb3B0cy5kdW1teVNoYWRvd01hcDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5pZm9ybXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3NoYWRvdycsXG4gIGRlcGVuZGVuY2llczogW3Byb2plY3RdLFxuICB2cyxcbiAgZnMsXG4gIGluamVjdDoge1xuICAgICd2czpERUNLR0xfRklMVEVSX0dMX1BPU0lUSU9OJzogXCJcXG4gICAgcG9zaXRpb24gPSBzaGFkb3dfc2V0VmVydGV4UG9zaXRpb24oZ2VvbWV0cnkucG9zaXRpb24pO1xcbiAgICBcIixcbiAgICAnZnM6REVDS0dMX0ZJTFRFUl9DT0xPUic6IFwiXFxuICAgIGNvbG9yID0gc2hhZG93X2ZpbHRlclNoYWRvd0NvbG9yKGNvbG9yKTtcXG4gICAgXCJcbiAgfSxcbiAgZ2V0VW5pZm9ybXM6IChvcHRzID0ge30sIGNvbnRleHQgPSB7fSkgPT4ge1xuICAgIGlmICgndmlld3BvcnQnIGluIG9wdHMgJiYgKG9wdHMuZHJhd1RvU2hhZG93TWFwIHx8IG9wdHMuc2hhZG93TWFwcyAmJiBvcHRzLnNoYWRvd01hcHMubGVuZ3RoID4gMCkpIHtcbiAgICAgIHJldHVybiBjcmVhdGVTaGFkb3dVbmlmb3JtcyhvcHRzLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge307XG4gIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFkb3cuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///33115\n')},20198:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ GPUInterpolationTransition; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(53478);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(19718);\n/* harmony import */ var _lib_attribute_attribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13906);\n/* harmony import */ var _lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(91619);\n/* harmony import */ var _transition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(53630);\n\n\n\n\n\nclass GPUInterpolationTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "gl", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "type", \'interpolation\');\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "attributeInTransition", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "settings", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "attribute", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "transition", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "currentStartIndices", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "currentLength", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "transform", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "buffers", void 0);\n\n    this.gl = gl;\n    this.transition = new _transition__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new _lib_attribute_attribute__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(gl, bufferOpts), new _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    if (transitionSettings.duration <= 0) {\n      this.transition.cancel();\n      return;\n    }\n\n    this.settings = transitionSettings;\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .cycleBuffers */ .DY)(buffers);\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .padBuffer */ .IV)({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .getAttributeBufferLength */ .pi)(attribute, numInstances);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aFrom: buffers[0],\n        aTo: (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .getSourceBufferAttribute */ .AQ)(gl, attribute)\n      },\n      feedbackBuffers: {\n        vCurrent: buffers[1]\n      }\n    });\n  }\n\n  update() {\n    const updated = this.transition.update();\n\n    if (updated) {\n      const {\n        duration,\n        easing\n      } = this.settings;\n      const {\n        time\n      } = this.transition;\n      let t = time / duration;\n\n      if (easing) {\n        t = easing(t);\n      }\n\n      this.transform.run({\n        uniforms: {\n          time: t\n        }\n      });\n    }\n\n    return updated;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    for (const buffer of this.buffers) {\n      buffer.delete();\n    }\n\n    this.buffers.length = 0;\n  }\n\n}\nconst vs = "\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n";\n\nfunction getTransform(gl, attribute) {\n  const attributeType = (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .getAttributeTypeFromSize */ .w)(attribute.size);\n  return new _luma_gl_core__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(gl, {\n    vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: [\'vCurrent\']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAxOTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdFO0FBQ3RCO0FBQ0M7QUFDaUg7QUFDOUg7QUFDdkI7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQjtBQUNBLDBCQUEwQiw0REFBVTtBQUNwQztBQUNBLHFDQUFxQyx5RUFBUztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4REFBTSxzQkFBc0IsOERBQU07QUFDMUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJLGlHQUFZO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSw4RkFBUztBQUNmO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQSx5QkFBeUIsNkdBQXdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw2R0FBd0I7QUFDckMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsK0ZBQStGLGlDQUFpQywrQkFBK0Isa0NBQWtDLHFCQUFxQixxQ0FBcUMsNEJBQTRCLEdBQUc7O0FBRTFSO0FBQ0Esd0JBQXdCLDRHQUF3QjtBQUNoRCxhQUFhLDhEQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3RyYW5zaXRpb25zL2dwdS1pbnRlcnBvbGF0aW9uLXRyYW5zaXRpb24uanM/Y2Q3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IHsgQnVmZmVyLCBUcmFuc2Zvcm0gfSBmcm9tICdAbHVtYS5nbC9jb3JlJztcbmltcG9ydCBBdHRyaWJ1dGUgZnJvbSAnLi4vbGliL2F0dHJpYnV0ZS9hdHRyaWJ1dGUnO1xuaW1wb3J0IHsgcGFkQnVmZmVyLCBnZXRBdHRyaWJ1dGVUeXBlRnJvbVNpemUsIGdldFNvdXJjZUJ1ZmZlckF0dHJpYnV0ZSwgZ2V0QXR0cmlidXRlQnVmZmVyTGVuZ3RoLCBjeWNsZUJ1ZmZlcnMgfSBmcm9tICcuLi9saWIvYXR0cmlidXRlL2F0dHJpYnV0ZS10cmFuc2l0aW9uLXV0aWxzJztcbmltcG9ydCBUcmFuc2l0aW9uIGZyb20gJy4vdHJhbnNpdGlvbic7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHUFVJbnRlcnBvbGF0aW9uVHJhbnNpdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBnbCxcbiAgICBhdHRyaWJ1dGUsXG4gICAgdGltZWxpbmVcbiAgfSkge1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdsXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0eXBlXCIsICdpbnRlcnBvbGF0aW9uJyk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhdHRyaWJ1dGVJblRyYW5zaXRpb25cIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNldHRpbmdzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhdHRyaWJ1dGVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYW5zaXRpb25cIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1cnJlbnRTdGFydEluZGljZXNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1cnJlbnRMZW5ndGhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYW5zZm9ybVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYnVmZmVyc1wiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5nbCA9IGdsO1xuICAgIHRoaXMudHJhbnNpdGlvbiA9IG5ldyBUcmFuc2l0aW9uKHRpbWVsaW5lKTtcbiAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcbiAgICB0aGlzLmF0dHJpYnV0ZUluVHJhbnNpdGlvbiA9IG5ldyBBdHRyaWJ1dGUoZ2wsIGF0dHJpYnV0ZS5zZXR0aW5ncyk7XG4gICAgdGhpcy5jdXJyZW50U3RhcnRJbmRpY2VzID0gYXR0cmlidXRlLnN0YXJ0SW5kaWNlcztcbiAgICB0aGlzLmN1cnJlbnRMZW5ndGggPSAwO1xuICAgIHRoaXMudHJhbnNmb3JtID0gZ2V0VHJhbnNmb3JtKGdsLCBhdHRyaWJ1dGUpO1xuICAgIGNvbnN0IGJ1ZmZlck9wdHMgPSB7XG4gICAgICBieXRlTGVuZ3RoOiAwLFxuICAgICAgdXNhZ2U6IDM1MDUwXG4gICAgfTtcbiAgICB0aGlzLmJ1ZmZlcnMgPSBbbmV3IEJ1ZmZlcihnbCwgYnVmZmVyT3B0cyksIG5ldyBCdWZmZXIoZ2wsIGJ1ZmZlck9wdHMpXTtcbiAgfVxuXG4gIGdldCBpblByb2dyZXNzKCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb24uaW5Qcm9ncmVzcztcbiAgfVxuXG4gIHN0YXJ0KHRyYW5zaXRpb25TZXR0aW5ncywgbnVtSW5zdGFuY2VzKSB7XG4gICAgaWYgKHRyYW5zaXRpb25TZXR0aW5ncy5kdXJhdGlvbiA8PSAwKSB7XG4gICAgICB0aGlzLnRyYW5zaXRpb24uY2FuY2VsKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXR0aW5ncyA9IHRyYW5zaXRpb25TZXR0aW5ncztcbiAgICBjb25zdCB7XG4gICAgICBnbCxcbiAgICAgIGJ1ZmZlcnMsXG4gICAgICBhdHRyaWJ1dGVcbiAgICB9ID0gdGhpcztcbiAgICBjeWNsZUJ1ZmZlcnMoYnVmZmVycyk7XG4gICAgY29uc3QgcGFkQnVmZmVyT3B0cyA9IHtcbiAgICAgIG51bUluc3RhbmNlcyxcbiAgICAgIGF0dHJpYnV0ZSxcbiAgICAgIGZyb21MZW5ndGg6IHRoaXMuY3VycmVudExlbmd0aCxcbiAgICAgIGZyb21TdGFydEluZGljZXM6IHRoaXMuY3VycmVudFN0YXJ0SW5kaWNlcyxcbiAgICAgIGdldERhdGE6IHRyYW5zaXRpb25TZXR0aW5ncy5lbnRlclxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7XG4gICAgICBwYWRCdWZmZXIoe1xuICAgICAgICBidWZmZXIsXG4gICAgICAgIC4uLnBhZEJ1ZmZlck9wdHNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudFN0YXJ0SW5kaWNlcyA9IGF0dHJpYnV0ZS5zdGFydEluZGljZXM7XG4gICAgdGhpcy5jdXJyZW50TGVuZ3RoID0gZ2V0QXR0cmlidXRlQnVmZmVyTGVuZ3RoKGF0dHJpYnV0ZSwgbnVtSW5zdGFuY2VzKTtcbiAgICB0aGlzLmF0dHJpYnV0ZUluVHJhbnNpdGlvbi5zZXREYXRhKHtcbiAgICAgIGJ1ZmZlcjogYnVmZmVyc1sxXSxcbiAgICAgIHZhbHVlOiBhdHRyaWJ1dGUudmFsdWVcbiAgICB9KTtcbiAgICB0aGlzLnRyYW5zaXRpb24uc3RhcnQodHJhbnNpdGlvblNldHRpbmdzKTtcbiAgICB0aGlzLnRyYW5zZm9ybS51cGRhdGUoe1xuICAgICAgZWxlbWVudENvdW50OiBNYXRoLmZsb29yKHRoaXMuY3VycmVudExlbmd0aCAvIGF0dHJpYnV0ZS5zaXplKSxcbiAgICAgIHNvdXJjZUJ1ZmZlcnM6IHtcbiAgICAgICAgYUZyb206IGJ1ZmZlcnNbMF0sXG4gICAgICAgIGFUbzogZ2V0U291cmNlQnVmZmVyQXR0cmlidXRlKGdsLCBhdHRyaWJ1dGUpXG4gICAgICB9LFxuICAgICAgZmVlZGJhY2tCdWZmZXJzOiB7XG4gICAgICAgIHZDdXJyZW50OiBidWZmZXJzWzFdXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgdXBkYXRlZCA9IHRoaXMudHJhbnNpdGlvbi51cGRhdGUoKTtcblxuICAgIGlmICh1cGRhdGVkKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBlYXNpbmdcbiAgICAgIH0gPSB0aGlzLnNldHRpbmdzO1xuICAgICAgY29uc3Qge1xuICAgICAgICB0aW1lXG4gICAgICB9ID0gdGhpcy50cmFuc2l0aW9uO1xuICAgICAgbGV0IHQgPSB0aW1lIC8gZHVyYXRpb247XG5cbiAgICAgIGlmIChlYXNpbmcpIHtcbiAgICAgICAgdCA9IGVhc2luZyh0KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmFuc2Zvcm0ucnVuKHtcbiAgICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgICB0aW1lOiB0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMudHJhbnNpdGlvbi5jYW5jZWwoKTtcbiAgICB0aGlzLnRyYW5zZm9ybS5kZWxldGUoKTtcblxuICAgIGZvciAoY29uc3QgYnVmZmVyIG9mIHRoaXMuYnVmZmVycykge1xuICAgICAgYnVmZmVyLmRlbGV0ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuYnVmZmVycy5sZW5ndGggPSAwO1xuICB9XG5cbn1cbmNvbnN0IHZzID0gXCJcXG4jZGVmaW5lIFNIQURFUl9OQU1FIGludGVycG9sYXRpb24tdHJhbnNpdGlvbi12ZXJ0ZXgtc2hhZGVyXFxuXFxudW5pZm9ybSBmbG9hdCB0aW1lO1xcbmF0dHJpYnV0ZSBBVFRSSUJVVEVfVFlQRSBhRnJvbTtcXG5hdHRyaWJ1dGUgQVRUUklCVVRFX1RZUEUgYVRvO1xcbnZhcnlpbmcgQVRUUklCVVRFX1RZUEUgdkN1cnJlbnQ7XFxuXFxudm9pZCBtYWluKHZvaWQpIHtcXG4gIHZDdXJyZW50ID0gbWl4KGFGcm9tLCBhVG8sIHRpbWUpO1xcbiAgZ2xfUG9zaXRpb24gPSB2ZWM0KDAuMCk7XFxufVxcblwiO1xuXG5mdW5jdGlvbiBnZXRUcmFuc2Zvcm0oZ2wsIGF0dHJpYnV0ZSkge1xuICBjb25zdCBhdHRyaWJ1dGVUeXBlID0gZ2V0QXR0cmlidXRlVHlwZUZyb21TaXplKGF0dHJpYnV0ZS5zaXplKTtcbiAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0oZ2wsIHtcbiAgICB2cyxcbiAgICBkZWZpbmVzOiB7XG4gICAgICBBVFRSSUJVVEVfVFlQRTogYXR0cmlidXRlVHlwZVxuICAgIH0sXG4gICAgdmFyeWluZ3M6IFsndkN1cnJlbnQnXVxuICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdwdS1pbnRlcnBvbGF0aW9uLXRyYW5zaXRpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20198\n')},7563:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ GPUSpringTransition; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(53478);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(81913);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19718);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(51621);\n/* harmony import */ var _luma_gl_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(53849);\n/* harmony import */ var _lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(91619);\n/* harmony import */ var _lib_attribute_attribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13906);\n/* harmony import */ var _transition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(53630);\n\n\n\n\n\nclass GPUSpringTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "gl", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "type", \'spring\');\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "attributeInTransition", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "settings", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "attribute", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "transition", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "currentStartIndices", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "currentLength", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "texture", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "framebuffer", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "transform", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "buffers", void 0);\n\n    this.gl = gl;\n    this.type = \'spring\';\n    this.transition = new _transition__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new _lib_attribute_attribute__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(gl, { ...attribute.settings,\n      normalized: false\n    });\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(gl, bufferOpts), new _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(gl, bufferOpts), new _luma_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .padBuffer */ .IV)({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.settings = transitionSettings;\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .getAttributeBufferLength */ .pi)(attribute, numInstances);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start({ ...transitionSettings,\n      duration: Infinity\n    });\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aTo: (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .getSourceBufferAttribute */ .AQ)(gl, attribute)\n      }\n    });\n  }\n\n  update() {\n    const {\n      buffers,\n      transform,\n      framebuffer,\n      transition\n    } = this;\n    const updated = transition.update();\n\n    if (!updated) {\n      return false;\n    }\n\n    const settings = this.settings;\n    transform.update({\n      sourceBuffers: {\n        aPrev: buffers[0],\n        aCur: buffers[1]\n      },\n      feedbackBuffers: {\n        vNext: buffers[2]\n      }\n    });\n    transform.run({\n      framebuffer,\n      discard: false,\n      clearRenderTarget: true,\n      uniforms: {\n        stiffness: settings.stiffness,\n        damping: settings.damping\n      },\n      parameters: {\n        depthTest: false,\n        blend: true,\n        viewport: [0, 0, 1, 1],\n        blendFunc: [1, 1],\n        blendEquation: [32776, 32776]\n      }\n    });\n    (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .cycleBuffers */ .DY)(buffers);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: this.attribute.value\n    });\n    const isTransitioning = (0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_5__/* .readPixelsToArray */ .z6)(framebuffer)[0] > 0;\n\n    if (!isTransitioning) {\n      transition.end();\n    }\n\n    return true;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    for (const buffer of this.buffers) {\n      buffer.delete();\n    }\n\n    this.buffers.length = 0;\n    this.texture.delete();\n    this.framebuffer.delete();\n  }\n\n}\n\nfunction getTransform(gl, attribute, framebuffer) {\n  const attributeType = (0,_lib_attribute_attribute_transition_utils__WEBPACK_IMPORTED_MODULE_4__/* .getAttributeTypeFromSize */ .w)(attribute.size);\n  return new _luma_gl_core__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(gl, {\n    framebuffer,\n    vs: "\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n",\n    fs: "\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: [\'vNext\']\n  });\n}\n\nfunction getTexture(gl) {\n  return new _luma_gl_core__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new _luma_gl_core__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(gl, {\n    id: \'spring-transition-is-transitioning-framebuffer\',\n    width: 1,\n    height: 1,\n    attachments: {\n      [36064]: texture\n    }\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzU2My5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBd0U7QUFDcUI7QUFDdUU7QUFDakg7QUFDYjtBQUN2QjtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CO0FBQ0E7QUFDQSwwQkFBMEIsNERBQVU7QUFDcEM7QUFDQSxxQ0FBcUMseUVBQVMsT0FBTztBQUNyRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQU0sc0JBQXNCLDhEQUFNLHNCQUFzQiw4REFBTTtBQUN0Rjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU0sOEZBQVM7QUFDZjtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUIsNkdBQXdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw0QkFBNEI7QUFDNUI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsYUFBYSw2R0FBd0I7QUFDckM7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGlHQUFZO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw0QkFBNEIsMEVBQWlCOztBQUU3QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0Esd0JBQXdCLDRHQUF3QjtBQUNoRCxhQUFhLDhEQUFTO0FBQ3RCO0FBQ0EscUhBQXFILHdCQUF3QixpQ0FBaUMsZ0NBQWdDLCtCQUErQiwrQkFBK0IscUNBQXFDLCtGQUErRix5Q0FBeUMsc0NBQXNDLDhDQUE4QyxzREFBc0QsNENBQTRDLEdBQUcscUJBQXFCLDBGQUEwRix1REFBdUQsNkNBQTZDLG1DQUFtQyx5QkFBeUIsR0FBRztBQUNwNEIsd0hBQXdILHFCQUFxQixzQ0FBc0MsY0FBYyxLQUFLLDZCQUE2QixHQUFHO0FBQ3RPO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQSxhQUFhLDhEQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQSxhQUFhLDhEQUFXO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3RyYW5zaXRpb25zL2dwdS1zcHJpbmctdHJhbnNpdGlvbi5qcz9jODRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgeyBCdWZmZXIsIFRyYW5zZm9ybSwgRnJhbWVidWZmZXIsIFRleHR1cmUyRCwgcmVhZFBpeGVsc1RvQXJyYXkgfSBmcm9tICdAbHVtYS5nbC9jb3JlJztcbmltcG9ydCB7IHBhZEJ1ZmZlciwgZ2V0QXR0cmlidXRlVHlwZUZyb21TaXplLCBnZXRTb3VyY2VCdWZmZXJBdHRyaWJ1dGUsIGdldEF0dHJpYnV0ZUJ1ZmZlckxlbmd0aCwgY3ljbGVCdWZmZXJzIH0gZnJvbSAnLi4vbGliL2F0dHJpYnV0ZS9hdHRyaWJ1dGUtdHJhbnNpdGlvbi11dGlscyc7XG5pbXBvcnQgQXR0cmlidXRlIGZyb20gJy4uL2xpYi9hdHRyaWJ1dGUvYXR0cmlidXRlJztcbmltcG9ydCBUcmFuc2l0aW9uIGZyb20gJy4vdHJhbnNpdGlvbic7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHUFVTcHJpbmdUcmFuc2l0aW9uIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGdsLFxuICAgIGF0dHJpYnV0ZSxcbiAgICB0aW1lbGluZVxuICB9KSB7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2xcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInR5cGVcIiwgJ3NwcmluZycpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYXR0cmlidXRlSW5UcmFuc2l0aW9uXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXR0aW5nc1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYXR0cmlidXRlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFuc2l0aW9uXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjdXJyZW50U3RhcnRJbmRpY2VzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjdXJyZW50TGVuZ3RoXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZXh0dXJlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmFtZWJ1ZmZlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidHJhbnNmb3JtXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJidWZmZXJzXCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLmdsID0gZ2w7XG4gICAgdGhpcy50eXBlID0gJ3NwcmluZyc7XG4gICAgdGhpcy50cmFuc2l0aW9uID0gbmV3IFRyYW5zaXRpb24odGltZWxpbmUpO1xuICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmlidXRlO1xuICAgIHRoaXMuYXR0cmlidXRlSW5UcmFuc2l0aW9uID0gbmV3IEF0dHJpYnV0ZShnbCwgeyAuLi5hdHRyaWJ1dGUuc2V0dGluZ3MsXG4gICAgICBub3JtYWxpemVkOiBmYWxzZVxuICAgIH0pO1xuICAgIHRoaXMuY3VycmVudFN0YXJ0SW5kaWNlcyA9IGF0dHJpYnV0ZS5zdGFydEluZGljZXM7XG4gICAgdGhpcy5jdXJyZW50TGVuZ3RoID0gMDtcbiAgICB0aGlzLnRleHR1cmUgPSBnZXRUZXh0dXJlKGdsKTtcbiAgICB0aGlzLmZyYW1lYnVmZmVyID0gZ2V0RnJhbWVidWZmZXIoZ2wsIHRoaXMudGV4dHVyZSk7XG4gICAgdGhpcy50cmFuc2Zvcm0gPSBnZXRUcmFuc2Zvcm0oZ2wsIGF0dHJpYnV0ZSwgdGhpcy5mcmFtZWJ1ZmZlcik7XG4gICAgY29uc3QgYnVmZmVyT3B0cyA9IHtcbiAgICAgIGJ5dGVMZW5ndGg6IDAsXG4gICAgICB1c2FnZTogMzUwNTBcbiAgICB9O1xuICAgIHRoaXMuYnVmZmVycyA9IFtuZXcgQnVmZmVyKGdsLCBidWZmZXJPcHRzKSwgbmV3IEJ1ZmZlcihnbCwgYnVmZmVyT3B0cyksIG5ldyBCdWZmZXIoZ2wsIGJ1ZmZlck9wdHMpXTtcbiAgfVxuXG4gIGdldCBpblByb2dyZXNzKCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb24uaW5Qcm9ncmVzcztcbiAgfVxuXG4gIHN0YXJ0KHRyYW5zaXRpb25TZXR0aW5ncywgbnVtSW5zdGFuY2VzKSB7XG4gICAgY29uc3Qge1xuICAgICAgZ2wsXG4gICAgICBidWZmZXJzLFxuICAgICAgYXR0cmlidXRlXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3QgcGFkQnVmZmVyT3B0cyA9IHtcbiAgICAgIG51bUluc3RhbmNlcyxcbiAgICAgIGF0dHJpYnV0ZSxcbiAgICAgIGZyb21MZW5ndGg6IHRoaXMuY3VycmVudExlbmd0aCxcbiAgICAgIGZyb21TdGFydEluZGljZXM6IHRoaXMuY3VycmVudFN0YXJ0SW5kaWNlcyxcbiAgICAgIGdldERhdGE6IHRyYW5zaXRpb25TZXR0aW5ncy5lbnRlclxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7XG4gICAgICBwYWRCdWZmZXIoe1xuICAgICAgICBidWZmZXIsXG4gICAgICAgIC4uLnBhZEJ1ZmZlck9wdHNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3MgPSB0cmFuc2l0aW9uU2V0dGluZ3M7XG4gICAgdGhpcy5jdXJyZW50U3RhcnRJbmRpY2VzID0gYXR0cmlidXRlLnN0YXJ0SW5kaWNlcztcbiAgICB0aGlzLmN1cnJlbnRMZW5ndGggPSBnZXRBdHRyaWJ1dGVCdWZmZXJMZW5ndGgoYXR0cmlidXRlLCBudW1JbnN0YW5jZXMpO1xuICAgIHRoaXMuYXR0cmlidXRlSW5UcmFuc2l0aW9uLnNldERhdGEoe1xuICAgICAgYnVmZmVyOiBidWZmZXJzWzFdLFxuICAgICAgdmFsdWU6IGF0dHJpYnV0ZS52YWx1ZVxuICAgIH0pO1xuICAgIHRoaXMudHJhbnNpdGlvbi5zdGFydCh7IC4uLnRyYW5zaXRpb25TZXR0aW5ncyxcbiAgICAgIGR1cmF0aW9uOiBJbmZpbml0eVxuICAgIH0pO1xuICAgIHRoaXMudHJhbnNmb3JtLnVwZGF0ZSh7XG4gICAgICBlbGVtZW50Q291bnQ6IE1hdGguZmxvb3IodGhpcy5jdXJyZW50TGVuZ3RoIC8gYXR0cmlidXRlLnNpemUpLFxuICAgICAgc291cmNlQnVmZmVyczoge1xuICAgICAgICBhVG86IGdldFNvdXJjZUJ1ZmZlckF0dHJpYnV0ZShnbCwgYXR0cmlidXRlKVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGJ1ZmZlcnMsXG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICBmcmFtZWJ1ZmZlcixcbiAgICAgIHRyYW5zaXRpb25cbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCB1cGRhdGVkID0gdHJhbnNpdGlvbi51cGRhdGUoKTtcblxuICAgIGlmICghdXBkYXRlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncztcbiAgICB0cmFuc2Zvcm0udXBkYXRlKHtcbiAgICAgIHNvdXJjZUJ1ZmZlcnM6IHtcbiAgICAgICAgYVByZXY6IGJ1ZmZlcnNbMF0sXG4gICAgICAgIGFDdXI6IGJ1ZmZlcnNbMV1cbiAgICAgIH0sXG4gICAgICBmZWVkYmFja0J1ZmZlcnM6IHtcbiAgICAgICAgdk5leHQ6IGJ1ZmZlcnNbMl1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0cmFuc2Zvcm0ucnVuKHtcbiAgICAgIGZyYW1lYnVmZmVyLFxuICAgICAgZGlzY2FyZDogZmFsc2UsXG4gICAgICBjbGVhclJlbmRlclRhcmdldDogdHJ1ZSxcbiAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgIHN0aWZmbmVzczogc2V0dGluZ3Muc3RpZmZuZXNzLFxuICAgICAgICBkYW1waW5nOiBzZXR0aW5ncy5kYW1waW5nXG4gICAgICB9LFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICBkZXB0aFRlc3Q6IGZhbHNlLFxuICAgICAgICBibGVuZDogdHJ1ZSxcbiAgICAgICAgdmlld3BvcnQ6IFswLCAwLCAxLCAxXSxcbiAgICAgICAgYmxlbmRGdW5jOiBbMSwgMV0sXG4gICAgICAgIGJsZW5kRXF1YXRpb246IFszMjc3NiwgMzI3NzZdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY3ljbGVCdWZmZXJzKGJ1ZmZlcnMpO1xuICAgIHRoaXMuYXR0cmlidXRlSW5UcmFuc2l0aW9uLnNldERhdGEoe1xuICAgICAgYnVmZmVyOiBidWZmZXJzWzFdLFxuICAgICAgdmFsdWU6IHRoaXMuYXR0cmlidXRlLnZhbHVlXG4gICAgfSk7XG4gICAgY29uc3QgaXNUcmFuc2l0aW9uaW5nID0gcmVhZFBpeGVsc1RvQXJyYXkoZnJhbWVidWZmZXIpWzBdID4gMDtcblxuICAgIGlmICghaXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICB0cmFuc2l0aW9uLmVuZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMudHJhbnNpdGlvbi5jYW5jZWwoKTtcbiAgICB0aGlzLnRyYW5zZm9ybS5kZWxldGUoKTtcblxuICAgIGZvciAoY29uc3QgYnVmZmVyIG9mIHRoaXMuYnVmZmVycykge1xuICAgICAgYnVmZmVyLmRlbGV0ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuYnVmZmVycy5sZW5ndGggPSAwO1xuICAgIHRoaXMudGV4dHVyZS5kZWxldGUoKTtcbiAgICB0aGlzLmZyYW1lYnVmZmVyLmRlbGV0ZSgpO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gZ2V0VHJhbnNmb3JtKGdsLCBhdHRyaWJ1dGUsIGZyYW1lYnVmZmVyKSB7XG4gIGNvbnN0IGF0dHJpYnV0ZVR5cGUgPSBnZXRBdHRyaWJ1dGVUeXBlRnJvbVNpemUoYXR0cmlidXRlLnNpemUpO1xuICByZXR1cm4gbmV3IFRyYW5zZm9ybShnbCwge1xuICAgIGZyYW1lYnVmZmVyLFxuICAgIHZzOiBcIlxcbiNkZWZpbmUgU0hBREVSX05BTUUgc3ByaW5nLXRyYW5zaXRpb24tdmVydGV4LXNoYWRlclxcblxcbiNkZWZpbmUgRVBTSUxPTiAwLjAwMDAxXFxuXFxudW5pZm9ybSBmbG9hdCBzdGlmZm5lc3M7XFxudW5pZm9ybSBmbG9hdCBkYW1waW5nO1xcbmF0dHJpYnV0ZSBBVFRSSUJVVEVfVFlQRSBhUHJldjtcXG5hdHRyaWJ1dGUgQVRUUklCVVRFX1RZUEUgYUN1cjtcXG5hdHRyaWJ1dGUgQVRUUklCVVRFX1RZUEUgYVRvO1xcbnZhcnlpbmcgQVRUUklCVVRFX1RZUEUgdk5leHQ7XFxudmFyeWluZyBmbG9hdCB2SXNUcmFuc2l0aW9uaW5nRmxhZztcXG5cXG5BVFRSSUJVVEVfVFlQRSBnZXROZXh0VmFsdWUoQVRUUklCVVRFX1RZUEUgY3VyLCBBVFRSSUJVVEVfVFlQRSBwcmV2LCBBVFRSSUJVVEVfVFlQRSBkZXN0KSB7XFxuICBBVFRSSUJVVEVfVFlQRSB2ZWxvY2l0eSA9IGN1ciAtIHByZXY7XFxuICBBVFRSSUJVVEVfVFlQRSBkZWx0YSA9IGRlc3QgLSBjdXI7XFxuICBBVFRSSUJVVEVfVFlQRSBzcHJpbmcgPSBkZWx0YSAqIHN0aWZmbmVzcztcXG4gIEFUVFJJQlVURV9UWVBFIGRhbXBlciA9IHZlbG9jaXR5ICogLTEuMCAqIGRhbXBpbmc7XFxuICByZXR1cm4gc3ByaW5nICsgZGFtcGVyICsgdmVsb2NpdHkgKyBjdXI7XFxufVxcblxcbnZvaWQgbWFpbih2b2lkKSB7XFxuICBib29sIGlzVHJhbnNpdGlvbmluZyA9IGxlbmd0aChhQ3VyIC0gYVByZXYpID4gRVBTSUxPTiB8fCBsZW5ndGgoYVRvIC0gYUN1cikgPiBFUFNJTE9OO1xcbiAgdklzVHJhbnNpdGlvbmluZ0ZsYWcgPSBpc1RyYW5zaXRpb25pbmcgPyAxLjAgOiAwLjA7XFxuXFxuICB2TmV4dCA9IGdldE5leHRWYWx1ZShhQ3VyLCBhUHJldiwgYVRvKTtcXG4gIGdsX1Bvc2l0aW9uID0gdmVjNCgwLCAwLCAwLCAxKTtcXG4gIGdsX1BvaW50U2l6ZSA9IDEwMC4wO1xcbn1cXG5cIixcbiAgICBmczogXCJcXG4jZGVmaW5lIFNIQURFUl9OQU1FIHNwcmluZy10cmFuc2l0aW9uLWlzLXRyYW5zaXRpb25pbmctZnJhZ21lbnQtc2hhZGVyXFxuXFxudmFyeWluZyBmbG9hdCB2SXNUcmFuc2l0aW9uaW5nRmxhZztcXG5cXG52b2lkIG1haW4odm9pZCkge1xcbiAgaWYgKHZJc1RyYW5zaXRpb25pbmdGbGFnID09IDAuMCkge1xcbiAgICBkaXNjYXJkO1xcbiAgfVxcbiAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbn1cIixcbiAgICBkZWZpbmVzOiB7XG4gICAgICBBVFRSSUJVVEVfVFlQRTogYXR0cmlidXRlVHlwZVxuICAgIH0sXG4gICAgdmFyeWluZ3M6IFsndk5leHQnXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0VGV4dHVyZShnbCkge1xuICByZXR1cm4gbmV3IFRleHR1cmUyRChnbCwge1xuICAgIGRhdGE6IG5ldyBVaW50OEFycmF5KDQpLFxuICAgIGZvcm1hdDogNjQwOCxcbiAgICB0eXBlOiA1MTIxLFxuICAgIGJvcmRlcjogMCxcbiAgICBtaXBtYXBzOiBmYWxzZSxcbiAgICBkYXRhRm9ybWF0OiA2NDA4LFxuICAgIHdpZHRoOiAxLFxuICAgIGhlaWdodDogMVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RnJhbWVidWZmZXIoZ2wsIHRleHR1cmUpIHtcbiAgcmV0dXJuIG5ldyBGcmFtZWJ1ZmZlcihnbCwge1xuICAgIGlkOiAnc3ByaW5nLXRyYW5zaXRpb24taXMtdHJhbnNpdGlvbmluZy1mcmFtZWJ1ZmZlcicsXG4gICAgd2lkdGg6IDEsXG4gICAgaGVpZ2h0OiAxLFxuICAgIGF0dGFjaG1lbnRzOiB7XG4gICAgICBbMzYwNjRdOiB0ZXh0dXJlXG4gICAgfVxuICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdwdS1zcHJpbmctdHJhbnNpdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7563\n')},71958:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Z\": function() { return /* binding */ LinearInterpolator; }\n});\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(82482);\n// EXTERNAL MODULE: ./node_modules/@math.gl/core/dist/esm/lib/common.js\nvar common = __webpack_require__(14034);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/assert.js\nvar assert = __webpack_require__(75304);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js\n\n\n\nclass TransitionInterpolator {\n  constructor(opts) {\n    (0,defineProperty/* default */.Z)(this, \"_propsToCompare\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"_propsToExtract\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"_requiredProps\", void 0);\n\n    const {\n      compare,\n      extract,\n      required\n    } = opts;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract || compare;\n    this._requiredProps = required;\n  }\n\n  arePropsEqual(currentProps, nextProps) {\n    for (const key of this._propsToCompare) {\n      if (!(key in currentProps) || !(key in nextProps) || !(0,common/* equals */.fS)(currentProps[key], nextProps[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  initializeProps(startProps, endProps) {\n    const startViewStateProps = {};\n    const endViewStateProps = {};\n\n    for (const key of this._propsToExtract) {\n      if (key in startProps || key in endProps) {\n        startViewStateProps[key] = startProps[key];\n        endViewStateProps[key] = endProps[key];\n      }\n    }\n\n    this._checkRequiredProps(startViewStateProps);\n\n    this._checkRequiredProps(endViewStateProps);\n\n    return {\n      start: startViewStateProps,\n      end: endViewStateProps\n    };\n  }\n\n  getDuration(startProps, endProps) {\n    return endProps.transitionDuration;\n  }\n\n  _checkRequiredProps(props) {\n    if (!this._requiredProps) {\n      return;\n    }\n\n    this._requiredProps.forEach(propName => {\n      const value = props[propName];\n      (0,assert/* default */.Z)(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n    });\n  }\n\n}\n//# sourceMappingURL=transition-interpolator.js.map\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js\n\n\n\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nclass LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    const normalizedOpts = Array.isArray(opts) ? {} : opts;\n    normalizedOpts.transitionProps = Array.isArray(transitionProps) ? {\n      compare: transitionProps,\n      required: transitionProps\n    } : transitionProps || {\n      compare: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    };\n    super(normalizedOpts.transitionProps);\n\n    (0,defineProperty/* default */.Z)(this, \"opts\", void 0);\n\n    this.opts = normalizedOpts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = (0,common/* lerp */.t7)(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition && this.opts.makeViewport) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, (0,common/* lerp */.t7)(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  }\n\n}\n//# sourceMappingURL=linear-interpolator.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzE5NTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF3RTtBQUNqQztBQUNGO0FBQ3RCO0FBQ2Y7QUFDQSxJQUFJLGlDQUFlOztBQUVuQixJQUFJLGlDQUFlOztBQUVuQixJQUFJLGlDQUFlOztBQUVuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNERBQTRELHlCQUFNO0FBQ2xFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU0seUJBQU07QUFDWixLQUFLO0FBQ0w7O0FBRUE7QUFDQSxtRDs7QUNwRXdFO0FBQ1Q7QUFDMUI7QUFDckM7QUFDQTtBQUNlLGlDQUFpQyxzQkFBc0I7QUFDdEUsdUJBQXVCO0FBQ3ZCO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLGlDQUFlOztBQUVuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLCtCQUErQix1QkFBSTtBQUNuQzs7QUFFQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBLE9BQU87QUFDUCx1RkFBdUYsdUJBQUk7QUFDM0Y7O0FBRUE7QUFDQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3RyYW5zaXRpb25zL3RyYW5zaXRpb24taW50ZXJwb2xhdG9yLmpzPzIwNzQiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3RyYW5zaXRpb25zL2xpbmVhci1pbnRlcnBvbGF0b3IuanM/ZWNhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnQG1hdGguZ2wvY29yZSc7XG5pbXBvcnQgYXNzZXJ0IGZyb20gJy4uL3V0aWxzL2Fzc2VydCc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFuc2l0aW9uSW50ZXJwb2xhdG9yIHtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wcm9wc1RvQ29tcGFyZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX3Byb3BzVG9FeHRyYWN0XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcmVxdWlyZWRQcm9wc1wiLCB2b2lkIDApO1xuXG4gICAgY29uc3Qge1xuICAgICAgY29tcGFyZSxcbiAgICAgIGV4dHJhY3QsXG4gICAgICByZXF1aXJlZFxuICAgIH0gPSBvcHRzO1xuICAgIHRoaXMuX3Byb3BzVG9Db21wYXJlID0gY29tcGFyZTtcbiAgICB0aGlzLl9wcm9wc1RvRXh0cmFjdCA9IGV4dHJhY3QgfHwgY29tcGFyZTtcbiAgICB0aGlzLl9yZXF1aXJlZFByb3BzID0gcmVxdWlyZWQ7XG4gIH1cblxuICBhcmVQcm9wc0VxdWFsKGN1cnJlbnRQcm9wcywgbmV4dFByb3BzKSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5fcHJvcHNUb0NvbXBhcmUpIHtcbiAgICAgIGlmICghKGtleSBpbiBjdXJyZW50UHJvcHMpIHx8ICEoa2V5IGluIG5leHRQcm9wcykgfHwgIWVxdWFscyhjdXJyZW50UHJvcHNba2V5XSwgbmV4dFByb3BzW2tleV0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGluaXRpYWxpemVQcm9wcyhzdGFydFByb3BzLCBlbmRQcm9wcykge1xuICAgIGNvbnN0IHN0YXJ0Vmlld1N0YXRlUHJvcHMgPSB7fTtcbiAgICBjb25zdCBlbmRWaWV3U3RhdGVQcm9wcyA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5fcHJvcHNUb0V4dHJhY3QpIHtcbiAgICAgIGlmIChrZXkgaW4gc3RhcnRQcm9wcyB8fCBrZXkgaW4gZW5kUHJvcHMpIHtcbiAgICAgICAgc3RhcnRWaWV3U3RhdGVQcm9wc1trZXldID0gc3RhcnRQcm9wc1trZXldO1xuICAgICAgICBlbmRWaWV3U3RhdGVQcm9wc1trZXldID0gZW5kUHJvcHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9jaGVja1JlcXVpcmVkUHJvcHMoc3RhcnRWaWV3U3RhdGVQcm9wcyk7XG5cbiAgICB0aGlzLl9jaGVja1JlcXVpcmVkUHJvcHMoZW5kVmlld1N0YXRlUHJvcHMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBzdGFydFZpZXdTdGF0ZVByb3BzLFxuICAgICAgZW5kOiBlbmRWaWV3U3RhdGVQcm9wc1xuICAgIH07XG4gIH1cblxuICBnZXREdXJhdGlvbihzdGFydFByb3BzLCBlbmRQcm9wcykge1xuICAgIHJldHVybiBlbmRQcm9wcy50cmFuc2l0aW9uRHVyYXRpb247XG4gIH1cblxuICBfY2hlY2tSZXF1aXJlZFByb3BzKHByb3BzKSB7XG4gICAgaWYgKCF0aGlzLl9yZXF1aXJlZFByb3BzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcmVxdWlyZWRQcm9wcy5mb3JFYWNoKHByb3BOYW1lID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgICAgYXNzZXJ0KE51bWJlci5pc0Zpbml0ZSh2YWx1ZSkgfHwgQXJyYXkuaXNBcnJheSh2YWx1ZSksIFwiXCIuY29uY2F0KHByb3BOYW1lLCBcIiBpcyByZXF1aXJlZCBmb3IgdHJhbnNpdGlvblwiKSk7XG4gICAgfSk7XG4gIH1cblxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNpdGlvbi1pbnRlcnBvbGF0b3IuanMubWFwIiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBUcmFuc2l0aW9uSW50ZXJwb2xhdG9yIGZyb20gJy4vdHJhbnNpdGlvbi1pbnRlcnBvbGF0b3InO1xuaW1wb3J0IHsgbGVycCB9IGZyb20gJ0BtYXRoLmdsL2NvcmUnO1xuY29uc3QgREVGQVVMVF9QUk9QUyA9IFsnbG9uZ2l0dWRlJywgJ2xhdGl0dWRlJywgJ3pvb20nLCAnYmVhcmluZycsICdwaXRjaCddO1xuY29uc3QgREVGQVVMVF9SRVFVSVJFRF9QUk9QUyA9IFsnbG9uZ2l0dWRlJywgJ2xhdGl0dWRlJywgJ3pvb20nXTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpbmVhckludGVycG9sYXRvciBleHRlbmRzIFRyYW5zaXRpb25JbnRlcnBvbGF0b3Ige1xuICBjb25zdHJ1Y3RvcihvcHRzID0ge30pIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uUHJvcHMgPSBBcnJheS5pc0FycmF5KG9wdHMpID8gb3B0cyA6IG9wdHMudHJhbnNpdGlvblByb3BzO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRPcHRzID0gQXJyYXkuaXNBcnJheShvcHRzKSA/IHt9IDogb3B0cztcbiAgICBub3JtYWxpemVkT3B0cy50cmFuc2l0aW9uUHJvcHMgPSBBcnJheS5pc0FycmF5KHRyYW5zaXRpb25Qcm9wcykgPyB7XG4gICAgICBjb21wYXJlOiB0cmFuc2l0aW9uUHJvcHMsXG4gICAgICByZXF1aXJlZDogdHJhbnNpdGlvblByb3BzXG4gICAgfSA6IHRyYW5zaXRpb25Qcm9wcyB8fCB7XG4gICAgICBjb21wYXJlOiBERUZBVUxUX1BST1BTLFxuICAgICAgcmVxdWlyZWQ6IERFRkFVTFRfUkVRVUlSRURfUFJPUFNcbiAgICB9O1xuICAgIHN1cGVyKG5vcm1hbGl6ZWRPcHRzLnRyYW5zaXRpb25Qcm9wcyk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRzXCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLm9wdHMgPSBub3JtYWxpemVkT3B0cztcbiAgfVxuXG4gIGluaXRpYWxpemVQcm9wcyhzdGFydFByb3BzLCBlbmRQcm9wcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHN1cGVyLmluaXRpYWxpemVQcm9wcyhzdGFydFByb3BzLCBlbmRQcm9wcyk7XG4gICAgY29uc3Qge1xuICAgICAgbWFrZVZpZXdwb3J0LFxuICAgICAgYXJvdW5kXG4gICAgfSA9IHRoaXMub3B0cztcblxuICAgIGlmIChtYWtlVmlld3BvcnQgJiYgYXJvdW5kKSB7XG4gICAgICBjb25zdCBzdGFydFZpZXdwb3J0ID0gbWFrZVZpZXdwb3J0KHN0YXJ0UHJvcHMpO1xuICAgICAgY29uc3QgZW5kVmlld3BvcnQgPSBtYWtlVmlld3BvcnQoZW5kUHJvcHMpO1xuICAgICAgY29uc3QgYXJvdW5kUG9zaXRpb24gPSBzdGFydFZpZXdwb3J0LnVucHJvamVjdChhcm91bmQpO1xuICAgICAgcmVzdWx0LnN0YXJ0LmFyb3VuZCA9IGFyb3VuZDtcbiAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LmVuZCwge1xuICAgICAgICBhcm91bmQ6IGVuZFZpZXdwb3J0LnByb2plY3QoYXJvdW5kUG9zaXRpb24pLFxuICAgICAgICBhcm91bmRQb3NpdGlvbixcbiAgICAgICAgd2lkdGg6IGVuZFByb3BzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IGVuZFByb3BzLmhlaWdodFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGludGVycG9sYXRlUHJvcHMoc3RhcnRQcm9wcywgZW5kUHJvcHMsIHQpIHtcbiAgICBjb25zdCBwcm9wc0luVHJhbnNpdGlvbiA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5fcHJvcHNUb0V4dHJhY3QpIHtcbiAgICAgIHByb3BzSW5UcmFuc2l0aW9uW2tleV0gPSBsZXJwKHN0YXJ0UHJvcHNba2V5XSB8fCAwLCBlbmRQcm9wc1trZXldIHx8IDAsIHQpO1xuICAgIH1cblxuICAgIGlmIChlbmRQcm9wcy5hcm91bmRQb3NpdGlvbiAmJiB0aGlzLm9wdHMubWFrZVZpZXdwb3J0KSB7XG4gICAgICBjb25zdCB2aWV3cG9ydCA9IHRoaXMub3B0cy5tYWtlVmlld3BvcnQoeyAuLi5lbmRQcm9wcyxcbiAgICAgICAgLi4ucHJvcHNJblRyYW5zaXRpb25cbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmFzc2lnbihwcm9wc0luVHJhbnNpdGlvbiwgdmlld3BvcnQucGFuQnlQb3NpdGlvbihlbmRQcm9wcy5hcm91bmRQb3NpdGlvbiwgbGVycChzdGFydFByb3BzLmFyb3VuZCwgZW5kUHJvcHMuYXJvdW5kLCB0KSkpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wc0luVHJhbnNpdGlvbjtcbiAgfVxuXG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saW5lYXItaW50ZXJwb2xhdG9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///71958\n")},53630:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ Transition; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n\nclass Transition {\n  constructor(timeline) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_inProgress", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_handle", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_timeline", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "time", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "settings", void 0);\n\n    this._inProgress = false;\n    this._handle = null;\n    this._timeline = timeline;\n    this.time = 0;\n    this.settings = {\n      duration: 0\n    };\n  }\n\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  start(settings) {\n    var _this$settings$onStar, _this$settings;\n\n    this.cancel();\n    this.settings = settings;\n    this._inProgress = true;\n    (_this$settings$onStar = (_this$settings = this.settings).onStart) === null || _this$settings$onStar === void 0 ? void 0 : _this$settings$onStar.call(_this$settings, this);\n  }\n\n  end() {\n    if (this._inProgress) {\n      var _this$settings$onEnd, _this$settings2;\n\n      this._timeline.removeChannel(this._handle);\n\n      this._handle = null;\n      this._inProgress = false;\n      (_this$settings$onEnd = (_this$settings2 = this.settings).onEnd) === null || _this$settings$onEnd === void 0 ? void 0 : _this$settings$onEnd.call(_this$settings2, this);\n    }\n  }\n\n  cancel() {\n    if (this._inProgress) {\n      var _this$settings$onInte, _this$settings3;\n\n      (_this$settings$onInte = (_this$settings3 = this.settings).onInterrupt) === null || _this$settings$onInte === void 0 ? void 0 : _this$settings$onInte.call(_this$settings3, this);\n\n      this._timeline.removeChannel(this._handle);\n\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  update() {\n    var _this$settings$onUpda, _this$settings4;\n\n    if (!this._inProgress) {\n      return false;\n    }\n\n    if (this._handle === null) {\n      const {\n        _timeline: timeline,\n        settings\n      } = this;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n    }\n\n    this.time = this._timeline.getTime(this._handle);\n\n    this._onUpdate();\n\n    (_this$settings$onUpda = (_this$settings4 = this.settings).onUpdate) === null || _this$settings$onUpda === void 0 ? void 0 : _this$settings$onUpda.call(_this$settings4, this);\n\n    if (this._timeline.isFinished(this._handle)) {\n      this.end();\n    }\n\n    return true;\n  }\n\n  _onUpdate() {}\n\n}\n//# sourceMappingURL=transition.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM2MzAuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF3RTtBQUN6RDtBQUNmO0FBQ0EsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS90cmFuc2l0aW9ucy90cmFuc2l0aW9uLmpzP2ZjNzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zaXRpb24ge1xuICBjb25zdHJ1Y3Rvcih0aW1lbGluZSkge1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9pblByb2dyZXNzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfaGFuZGxlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfdGltZWxpbmVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNldHRpbmdzXCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLl9pblByb2dyZXNzID0gZmFsc2U7XG4gICAgdGhpcy5faGFuZGxlID0gbnVsbDtcbiAgICB0aGlzLl90aW1lbGluZSA9IHRpbWVsaW5lO1xuICAgIHRoaXMudGltZSA9IDA7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgIGR1cmF0aW9uOiAwXG4gICAgfTtcbiAgfVxuXG4gIGdldCBpblByb2dyZXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9pblByb2dyZXNzO1xuICB9XG5cbiAgc3RhcnQoc2V0dGluZ3MpIHtcbiAgICB2YXIgX3RoaXMkc2V0dGluZ3Mkb25TdGFyLCBfdGhpcyRzZXR0aW5ncztcblxuICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2luUHJvZ3Jlc3MgPSB0cnVlO1xuICAgIChfdGhpcyRzZXR0aW5ncyRvblN0YXIgPSAoX3RoaXMkc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzKS5vblN0YXJ0KSA9PT0gbnVsbCB8fCBfdGhpcyRzZXR0aW5ncyRvblN0YXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNldHRpbmdzJG9uU3Rhci5jYWxsKF90aGlzJHNldHRpbmdzLCB0aGlzKTtcbiAgfVxuXG4gIGVuZCgpIHtcbiAgICBpZiAodGhpcy5faW5Qcm9ncmVzcykge1xuICAgICAgdmFyIF90aGlzJHNldHRpbmdzJG9uRW5kLCBfdGhpcyRzZXR0aW5nczI7XG5cbiAgICAgIHRoaXMuX3RpbWVsaW5lLnJlbW92ZUNoYW5uZWwodGhpcy5faGFuZGxlKTtcblxuICAgICAgdGhpcy5faGFuZGxlID0gbnVsbDtcbiAgICAgIHRoaXMuX2luUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgIChfdGhpcyRzZXR0aW5ncyRvbkVuZCA9IChfdGhpcyRzZXR0aW5nczIgPSB0aGlzLnNldHRpbmdzKS5vbkVuZCkgPT09IG51bGwgfHwgX3RoaXMkc2V0dGluZ3Mkb25FbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNldHRpbmdzJG9uRW5kLmNhbGwoX3RoaXMkc2V0dGluZ3MyLCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgaWYgKHRoaXMuX2luUHJvZ3Jlc3MpIHtcbiAgICAgIHZhciBfdGhpcyRzZXR0aW5ncyRvbkludGUsIF90aGlzJHNldHRpbmdzMztcblxuICAgICAgKF90aGlzJHNldHRpbmdzJG9uSW50ZSA9IChfdGhpcyRzZXR0aW5nczMgPSB0aGlzLnNldHRpbmdzKS5vbkludGVycnVwdCkgPT09IG51bGwgfHwgX3RoaXMkc2V0dGluZ3Mkb25JbnRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzZXR0aW5ncyRvbkludGUuY2FsbChfdGhpcyRzZXR0aW5nczMsIHRoaXMpO1xuXG4gICAgICB0aGlzLl90aW1lbGluZS5yZW1vdmVDaGFubmVsKHRoaXMuX2hhbmRsZSk7XG5cbiAgICAgIHRoaXMuX2hhbmRsZSA9IG51bGw7XG4gICAgICB0aGlzLl9pblByb2dyZXNzID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIHZhciBfdGhpcyRzZXR0aW5ncyRvblVwZGEsIF90aGlzJHNldHRpbmdzNDtcblxuICAgIGlmICghdGhpcy5faW5Qcm9ncmVzcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9oYW5kbGUgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgX3RpbWVsaW5lOiB0aW1lbGluZSxcbiAgICAgICAgc2V0dGluZ3NcbiAgICAgIH0gPSB0aGlzO1xuICAgICAgdGhpcy5faGFuZGxlID0gdGltZWxpbmUuYWRkQ2hhbm5lbCh7XG4gICAgICAgIGRlbGF5OiB0aW1lbGluZS5nZXRUaW1lKCksXG4gICAgICAgIGR1cmF0aW9uOiBzZXR0aW5ncy5kdXJhdGlvblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy50aW1lID0gdGhpcy5fdGltZWxpbmUuZ2V0VGltZSh0aGlzLl9oYW5kbGUpO1xuXG4gICAgdGhpcy5fb25VcGRhdGUoKTtcblxuICAgIChfdGhpcyRzZXR0aW5ncyRvblVwZGEgPSAoX3RoaXMkc2V0dGluZ3M0ID0gdGhpcy5zZXR0aW5ncykub25VcGRhdGUpID09PSBudWxsIHx8IF90aGlzJHNldHRpbmdzJG9uVXBkYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc2V0dGluZ3Mkb25VcGRhLmNhbGwoX3RoaXMkc2V0dGluZ3M0LCB0aGlzKTtcblxuICAgIGlmICh0aGlzLl90aW1lbGluZS5pc0ZpbmlzaGVkKHRoaXMuX2hhbmRsZSkpIHtcbiAgICAgIHRoaXMuZW5kKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBfb25VcGRhdGUoKSB7fVxuXG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2l0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///53630\n')},49440:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "T": function() { return /* binding */ padArray; }\n/* harmony export */ });\nfunction padArrayChunk(options) {\n  const {\n    source,\n    target,\n    start = 0,\n    size,\n    getData\n  } = options;\n  const end = options.end || target.length;\n  const sourceLength = source.length;\n  const targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  let i = sourceLength;\n\n  while (i < targetLength) {\n    const datum = getData(i, source);\n\n    for (let j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nfunction padArray({\n  source,\n  target,\n  size,\n  getData,\n  sourceStartIndices,\n  targetStartIndices\n}) {\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source,\n      target,\n      size,\n      getData\n    });\n    return target;\n  }\n\n  let sourceIndex = 0;\n  let targetIndex = 0;\n\n  const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n\n  const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (let i = 1; i < n; i++) {\n    const nextSourceIndex = sourceStartIndices[i] * size;\n    const nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target,\n      start: targetIndex,\n      size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk0NDAuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy9hcnJheS11dGlscy5qcz9mYzc3Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHBhZEFycmF5Q2h1bmsob3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgc291cmNlLFxuICAgIHRhcmdldCxcbiAgICBzdGFydCA9IDAsXG4gICAgc2l6ZSxcbiAgICBnZXREYXRhXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBlbmQgPSBvcHRpb25zLmVuZCB8fCB0YXJnZXQubGVuZ3RoO1xuICBjb25zdCBzb3VyY2VMZW5ndGggPSBzb3VyY2UubGVuZ3RoO1xuICBjb25zdCB0YXJnZXRMZW5ndGggPSBlbmQgLSBzdGFydDtcblxuICBpZiAoc291cmNlTGVuZ3RoID4gdGFyZ2V0TGVuZ3RoKSB7XG4gICAgdGFyZ2V0LnNldChzb3VyY2Uuc3ViYXJyYXkoMCwgdGFyZ2V0TGVuZ3RoKSwgc3RhcnQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRhcmdldC5zZXQoc291cmNlLCBzdGFydCk7XG5cbiAgaWYgKCFnZXREYXRhKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGkgPSBzb3VyY2VMZW5ndGg7XG5cbiAgd2hpbGUgKGkgPCB0YXJnZXRMZW5ndGgpIHtcbiAgICBjb25zdCBkYXR1bSA9IGdldERhdGEoaSwgc291cmNlKTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2l6ZTsgaisrKSB7XG4gICAgICB0YXJnZXRbc3RhcnQgKyBpXSA9IGRhdHVtW2pdIHx8IDA7XG4gICAgICBpKys7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWRBcnJheSh7XG4gIHNvdXJjZSxcbiAgdGFyZ2V0LFxuICBzaXplLFxuICBnZXREYXRhLFxuICBzb3VyY2VTdGFydEluZGljZXMsXG4gIHRhcmdldFN0YXJ0SW5kaWNlc1xufSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGFyZ2V0U3RhcnRJbmRpY2VzKSkge1xuICAgIHBhZEFycmF5Q2h1bmsoe1xuICAgICAgc291cmNlLFxuICAgICAgdGFyZ2V0LFxuICAgICAgc2l6ZSxcbiAgICAgIGdldERhdGFcbiAgICB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgbGV0IHNvdXJjZUluZGV4ID0gMDtcbiAgbGV0IHRhcmdldEluZGV4ID0gMDtcblxuICBjb25zdCBnZXRDaHVua0RhdGEgPSBnZXREYXRhICYmICgoaSwgY2h1bmspID0+IGdldERhdGEoaSArIHRhcmdldEluZGV4LCBjaHVuaykpO1xuXG4gIGNvbnN0IG4gPSBNYXRoLm1pbihzb3VyY2VTdGFydEluZGljZXMubGVuZ3RoLCB0YXJnZXRTdGFydEluZGljZXMubGVuZ3RoKTtcblxuICBmb3IgKGxldCBpID0gMTsgaSA8IG47IGkrKykge1xuICAgIGNvbnN0IG5leHRTb3VyY2VJbmRleCA9IHNvdXJjZVN0YXJ0SW5kaWNlc1tpXSAqIHNpemU7XG4gICAgY29uc3QgbmV4dFRhcmdldEluZGV4ID0gdGFyZ2V0U3RhcnRJbmRpY2VzW2ldICogc2l6ZTtcbiAgICBwYWRBcnJheUNodW5rKHtcbiAgICAgIHNvdXJjZTogc291cmNlLnN1YmFycmF5KHNvdXJjZUluZGV4LCBuZXh0U291cmNlSW5kZXgpLFxuICAgICAgdGFyZ2V0LFxuICAgICAgc3RhcnQ6IHRhcmdldEluZGV4LFxuICAgICAgZW5kOiBuZXh0VGFyZ2V0SW5kZXgsXG4gICAgICBzaXplLFxuICAgICAgZ2V0RGF0YTogZ2V0Q2h1bmtEYXRhXG4gICAgfSk7XG4gICAgc291cmNlSW5kZXggPSBuZXh0U291cmNlSW5kZXg7XG4gICAgdGFyZ2V0SW5kZXggPSBuZXh0VGFyZ2V0SW5kZXg7XG4gIH1cblxuICBpZiAodGFyZ2V0SW5kZXggPCB0YXJnZXQubGVuZ3RoKSB7XG4gICAgcGFkQXJyYXlDaHVuayh7XG4gICAgICBzb3VyY2U6IFtdLFxuICAgICAgdGFyZ2V0LFxuICAgICAgc3RhcnQ6IHRhcmdldEluZGV4LFxuICAgICAgc2l6ZSxcbiAgICAgIGdldERhdGE6IGdldENodW5rRGF0YVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5LXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///49440\n')},75304:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": function() { return /* binding */ assert; }\n/* harmony export */ });\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUzMDQuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3V0aWxzL2Fzc2VydC5qcz9mNWVmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSB8fCAnZGVjay5nbDogYXNzZXJ0aW9uIGZhaWxlZC4nKTtcbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXNzZXJ0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///75304\n")},75015:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": function() { return /* binding */ count; }\n/* harmony export */ });\nconst ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\nfunction count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUwMTUuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy9jb3VudC5qcz84OGEyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVSUl9OT1RfT0JKRUNUID0gJ2NvdW50KCk6IGFyZ3VtZW50IG5vdCBhbiBvYmplY3QnO1xuY29uc3QgRVJSX05PVF9DT05UQUlORVIgPSAnY291bnQoKTogYXJndW1lbnQgbm90IGEgY29udGFpbmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjb3VudChjb250YWluZXIpIHtcbiAgaWYgKCFpc09iamVjdChjb250YWluZXIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKEVSUl9OT1RfT0JKRUNUKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgY29udGFpbmVyLmNvdW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5jb3VudCgpO1xuICB9XG5cbiAgaWYgKE51bWJlci5pc0Zpbml0ZShjb250YWluZXIuc2l6ZSkpIHtcbiAgICByZXR1cm4gY29udGFpbmVyLnNpemU7XG4gIH1cblxuICBpZiAoTnVtYmVyLmlzRmluaXRlKGNvbnRhaW5lci5sZW5ndGgpKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5sZW5ndGg7XG4gIH1cblxuICBpZiAoaXNQbGFpbk9iamVjdChjb250YWluZXIpKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGNvbnRhaW5lcikubGVuZ3RoO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKEVSUl9OT1RfQ09OVEFJTkVSKTtcbn1cblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///75015\n")},46871:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": function() { return /* binding */ deepEqual; }\n/* harmony export */ });\nfunction deepEqual(a, b, depth) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!depth || !a || !b) {\n    return false;\n  }\n\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b) || a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; i++) {\n      if (!deepEqual(a[i], b[i], depth - 1)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  if (Array.isArray(b)) {\n    return false;\n  }\n\n  if (typeof a === 'object' && typeof b === 'object') {\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n\n    for (const key of aKeys) {\n      if (!b.hasOwnProperty(key)) {\n        return false;\n      }\n\n      if (!deepEqual(a[key], b[key], depth - 1)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=deep-equal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY4NzEuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vdXRpbHMvZGVlcC1lcXVhbC5qcz8xODIxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBkZWVwRXF1YWwoYSwgYiwgZGVwdGgpIHtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICghZGVwdGggfHwgIWEgfHwgIWIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShiKSB8fCBhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghZGVlcEVxdWFsKGFbaV0sIGJbaV0sIGRlcHRoIC0gMSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodHlwZW9mIGEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBiID09PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcblxuICAgIGlmIChhS2V5cy5sZW5ndGggIT09IGJLZXlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGFLZXlzKSB7XG4gICAgICBpZiAoIWIuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBkZXB0aCAtIDEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZXAtZXF1YWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///46871\n")},61855:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "k": function() { return /* binding */ fillArray; },\n/* harmony export */   "x": function() { return /* binding */ flatten; }\n/* harmony export */ });\nfunction flatten(array, filter = () => true) {\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  let index = -1;\n\n  while (++index < array.length) {\n    const value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nfunction fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjE4NTUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLGlCQUFpQjtBQUN2QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy9mbGF0dGVuLmpzP2MxZTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXksIGZpbHRlciA9ICgpID0+IHRydWUpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgIHJldHVybiBmaWx0ZXIoYXJyYXkpID8gW2FycmF5XSA6IFtdO1xuICB9XG5cbiAgcmV0dXJuIGZsYXR0ZW5BcnJheShhcnJheSwgZmlsdGVyLCBbXSk7XG59XG5cbmZ1bmN0aW9uIGZsYXR0ZW5BcnJheShhcnJheSwgZmlsdGVyLCByZXN1bHQpIHtcbiAgbGV0IGluZGV4ID0gLTE7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBhcnJheS5sZW5ndGgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGFycmF5W2luZGV4XTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgZmxhdHRlbkFycmF5KHZhbHVlLCBmaWx0ZXIsIHJlc3VsdCk7XG4gICAgfSBlbHNlIGlmIChmaWx0ZXIodmFsdWUpKSB7XG4gICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGxBcnJheSh7XG4gIHRhcmdldCxcbiAgc291cmNlLFxuICBzdGFydCA9IDAsXG4gIGNvdW50ID0gMVxufSkge1xuICBjb25zdCBsZW5ndGggPSBzb3VyY2UubGVuZ3RoO1xuICBjb25zdCB0b3RhbCA9IGNvdW50ICogbGVuZ3RoO1xuICBsZXQgY29waWVkID0gMDtcblxuICBmb3IgKGxldCBpID0gc3RhcnQ7IGNvcGllZCA8IGxlbmd0aDsgY29waWVkKyspIHtcbiAgICB0YXJnZXRbaSsrXSA9IHNvdXJjZVtjb3BpZWRdO1xuICB9XG5cbiAgd2hpbGUgKGNvcGllZCA8IHRvdGFsKSB7XG4gICAgaWYgKGNvcGllZCA8IHRvdGFsIC0gY29waWVkKSB7XG4gICAgICB0YXJnZXQuY29weVdpdGhpbihzdGFydCArIGNvcGllZCwgc3RhcnQsIHN0YXJ0ICsgY29waWVkKTtcbiAgICAgIGNvcGllZCAqPSAyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQuY29weVdpdGhpbihzdGFydCArIGNvcGllZCwgc3RhcnQsIHN0YXJ0ICsgdG90YWwgLSBjb3BpZWQpO1xuICAgICAgY29waWVkID0gdG90YWw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZsYXR0ZW4uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///61855\n')},38550:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "D0": function() { return /* binding */ isAsyncIterable; },\n/* harmony export */   "jB": function() { return /* binding */ createIterable; },\n/* harmony export */   "jr": function() { return /* binding */ getAccessorFromBuffer; }\n/* harmony export */ });\nconst EMPTY_ARRAY = [];\nconst placeholderArray = [];\nfunction createIterable(data, startRow = 0, endRow = Infinity) {\n  let iterable = EMPTY_ARRAY;\n  const objectInfo = {\n    index: -1,\n    data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === \'function\') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable,\n    objectInfo\n  };\n}\nfunction isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nfunction getAccessorFromBuffer(typedArray, options) {\n  const {\n    size,\n    stride,\n    offset,\n    startIndices,\n    nested\n  } = options;\n  const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : size;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return (_, {\n    index,\n    target\n  }) => {\n    if (!startIndices) {\n      const sourceIndex = index * elementStride + elementOffset;\n\n      for (let j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || vertexCount;\n    let result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n        target = new Array(size);\n\n        for (let j = 0; j < size; j++) {\n          target[j] = typedArray[sourceIndex + j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      let targetIndex = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n\n        for (let j = 0; j < size; j++) {\n          result[targetIndex++] = typedArray[sourceIndex + j];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzg1NTAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsc0JBQXNCLFVBQVU7QUFDaEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLCtCQUErQixjQUFjO0FBQzdDO0FBQ0E7O0FBRUEsd0JBQXdCLFVBQVU7QUFDbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUEsK0JBQStCLGNBQWM7QUFDN0M7O0FBRUEsd0JBQXdCLFVBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vdXRpbHMvaXRlcmFibGUtdXRpbHMuanM/MWY5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFTVBUWV9BUlJBWSA9IFtdO1xuY29uc3QgcGxhY2Vob2xkZXJBcnJheSA9IFtdO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUl0ZXJhYmxlKGRhdGEsIHN0YXJ0Um93ID0gMCwgZW5kUm93ID0gSW5maW5pdHkpIHtcbiAgbGV0IGl0ZXJhYmxlID0gRU1QVFlfQVJSQVk7XG4gIGNvbnN0IG9iamVjdEluZm8gPSB7XG4gICAgaW5kZXg6IC0xLFxuICAgIGRhdGEsXG4gICAgdGFyZ2V0OiBbXVxuICB9O1xuXG4gIGlmICghZGF0YSkge1xuICAgIGl0ZXJhYmxlID0gRU1QVFlfQVJSQVk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRhdGFbU3ltYm9sLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGl0ZXJhYmxlID0gZGF0YTtcbiAgfSBlbHNlIGlmIChkYXRhLmxlbmd0aCA+IDApIHtcbiAgICBwbGFjZWhvbGRlckFycmF5Lmxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgIGl0ZXJhYmxlID0gcGxhY2Vob2xkZXJBcnJheTtcbiAgfVxuXG4gIGlmIChzdGFydFJvdyA+IDAgfHwgTnVtYmVyLmlzRmluaXRlKGVuZFJvdykpIHtcbiAgICBpdGVyYWJsZSA9IChBcnJheS5pc0FycmF5KGl0ZXJhYmxlKSA/IGl0ZXJhYmxlIDogQXJyYXkuZnJvbShpdGVyYWJsZSkpLnNsaWNlKHN0YXJ0Um93LCBlbmRSb3cpO1xuICAgIG9iamVjdEluZm8uaW5kZXggPSBzdGFydFJvdyAtIDE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGl0ZXJhYmxlLFxuICAgIG9iamVjdEluZm9cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jSXRlcmFibGUoZGF0YSkge1xuICByZXR1cm4gZGF0YSAmJiBkYXRhW1N5bWJvbC5hc3luY0l0ZXJhdG9yXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY2Nlc3NvckZyb21CdWZmZXIodHlwZWRBcnJheSwgb3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgc2l6ZSxcbiAgICBzdHJpZGUsXG4gICAgb2Zmc2V0LFxuICAgIHN0YXJ0SW5kaWNlcyxcbiAgICBuZXN0ZWRcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGJ5dGVzUGVyRWxlbWVudCA9IHR5cGVkQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG4gIGNvbnN0IGVsZW1lbnRTdHJpZGUgPSBzdHJpZGUgPyBzdHJpZGUgLyBieXRlc1BlckVsZW1lbnQgOiBzaXplO1xuICBjb25zdCBlbGVtZW50T2Zmc2V0ID0gb2Zmc2V0ID8gb2Zmc2V0IC8gYnl0ZXNQZXJFbGVtZW50IDogMDtcbiAgY29uc3QgdmVydGV4Q291bnQgPSBNYXRoLmZsb29yKCh0eXBlZEFycmF5Lmxlbmd0aCAtIGVsZW1lbnRPZmZzZXQpIC8gZWxlbWVudFN0cmlkZSk7XG4gIHJldHVybiAoXywge1xuICAgIGluZGV4LFxuICAgIHRhcmdldFxuICB9KSA9PiB7XG4gICAgaWYgKCFzdGFydEluZGljZXMpIHtcbiAgICAgIGNvbnN0IHNvdXJjZUluZGV4ID0gaW5kZXggKiBlbGVtZW50U3RyaWRlICsgZWxlbWVudE9mZnNldDtcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgdGFyZ2V0W2pdID0gdHlwZWRBcnJheVtzb3VyY2VJbmRleCArIGpdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBzdGFydEluZGljZXNbaW5kZXhdO1xuICAgIGNvbnN0IGVuZEluZGV4ID0gc3RhcnRJbmRpY2VzW2luZGV4ICsgMV0gfHwgdmVydGV4Q291bnQ7XG4gICAgbGV0IHJlc3VsdDtcblxuICAgIGlmIChuZXN0ZWQpIHtcbiAgICAgIHJlc3VsdCA9IG5ldyBBcnJheShlbmRJbmRleCAtIHN0YXJ0SW5kZXgpO1xuXG4gICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgY29uc3Qgc291cmNlSW5kZXggPSBpICogZWxlbWVudFN0cmlkZSArIGVsZW1lbnRPZmZzZXQ7XG4gICAgICAgIHRhcmdldCA9IG5ldyBBcnJheShzaXplKTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGorKykge1xuICAgICAgICAgIHRhcmdldFtqXSA9IHR5cGVkQXJyYXlbc291cmNlSW5kZXggKyBqXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdFtpIC0gc3RhcnRJbmRleF0gPSB0YXJnZXQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbGVtZW50U3RyaWRlID09PSBzaXplKSB7XG4gICAgICByZXN1bHQgPSB0eXBlZEFycmF5LnN1YmFycmF5KHN0YXJ0SW5kZXggKiBzaXplICsgZWxlbWVudE9mZnNldCwgZW5kSW5kZXggKiBzaXplICsgZWxlbWVudE9mZnNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IG5ldyB0eXBlZEFycmF5LmNvbnN0cnVjdG9yKChlbmRJbmRleCAtIHN0YXJ0SW5kZXgpICogc2l6ZSk7XG4gICAgICBsZXQgdGFyZ2V0SW5kZXggPSAwO1xuXG4gICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgY29uc3Qgc291cmNlSW5kZXggPSBpICogZWxlbWVudFN0cmlkZSArIGVsZW1lbnRPZmZzZXQ7XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgICByZXN1bHRbdGFyZ2V0SW5kZXgrK10gPSB0eXBlZEFycmF5W3NvdXJjZUluZGV4ICsgal07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmFibGUtdXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///38550\n')},6610:function(__unused_webpack_module,__webpack_exports__){eval("function isJSON(text) {\n  const firstChar = text[0];\n  const lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\n/* harmony default export */ __webpack_exports__[\"Z\"] = ({\n  id: 'JSON',\n  name: 'JSON',\n  module: '',\n  version: '',\n  options: {},\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n});\n//# sourceMappingURL=json-loader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjYxMC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0JBQW9CO0FBQzdDOztBQUVBLHlEQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy9qc29uLWxvYWRlci5qcz9hMjJjIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGlzSlNPTih0ZXh0KSB7XG4gIGNvbnN0IGZpcnN0Q2hhciA9IHRleHRbMF07XG4gIGNvbnN0IGxhc3RDaGFyID0gdGV4dFt0ZXh0Lmxlbmd0aCAtIDFdO1xuICByZXR1cm4gZmlyc3RDaGFyID09PSAneycgJiYgbGFzdENoYXIgPT09ICd9JyB8fCBmaXJzdENoYXIgPT09ICdbJyAmJiBsYXN0Q2hhciA9PT0gJ10nO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGlkOiAnSlNPTicsXG4gIG5hbWU6ICdKU09OJyxcbiAgbW9kdWxlOiAnJyxcbiAgdmVyc2lvbjogJycsXG4gIG9wdGlvbnM6IHt9LFxuICBleHRlbnNpb25zOiBbJ2pzb24nLCAnZ2VvanNvbiddLFxuICBtaW1lVHlwZXM6IFsnYXBwbGljYXRpb24vanNvbicsICdhcHBsaWNhdGlvbi9nZW8ranNvbiddLFxuICB0ZXN0VGV4dDogaXNKU09OLFxuICBwYXJzZVRleHRTeW5jOiBKU09OLnBhcnNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anNvbi1sb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6610\n")},80744:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony import */ var _probe_gl_log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56426);\n\n/* harmony default export */ __webpack_exports__[\"Z\"] = (new _probe_gl_log__WEBPACK_IMPORTED_MODULE_0__/* .Log */ .Z({\n  id: 'deck'\n}));\n//# sourceMappingURL=log.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODA3NDQuanMiLCJtYXBwaW5ncyI6IjtBQUFvQztBQUNwQyx5REFBZSxJQUFJLHVEQUFHO0FBQ3RCO0FBQ0EsQ0FBQyxDQUFDLEVBQUM7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy9sb2cuanM/Y2IyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMb2cgfSBmcm9tICdAcHJvYmUuZ2wvbG9nJztcbmV4cG9ydCBkZWZhdWx0IG5ldyBMb2coe1xuICBpZDogJ2RlY2snXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///80744\n")},75126:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Du": function() { return /* binding */ getFrustumPlanes; },\n/* harmony export */   "TK": function() { return /* binding */ toDoublePrecisionArray; },\n/* harmony export */   "Xt": function() { return /* binding */ getCameraPosition; },\n/* harmony export */   "bS": function() { return /* binding */ createMat4; },\n/* harmony export */   "cc": function() { return /* binding */ mergeBounds; }\n/* harmony export */ });\n/* unused harmony exports mod, fp64LowPart */\n/* harmony import */ var _typed_array_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(36610);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43855);\n\n\nfunction createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nfunction mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nfunction getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nfunction getFrustumPlanes(viewProjectionMatrix) {\n  return {\n    left: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]),\n    right: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]),\n    bottom: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]),\n    top: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]),\n    near: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]),\n    far: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14])\n  };\n}\nconst scratchVector = new _math_gl_core__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  const L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new _math_gl_core__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(-a / L, -b / L, -c / L)\n  };\n}\n\nfunction fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nlet scratchArray;\nfunction toDoublePrecisionArray(typedArray, options) {\n  const {\n    size = 1,\n    startIndex = 0\n  } = options;\n  const endIndex = options.endIndex !== undefined ? options.endIndex : typedArray.length;\n  const count = (endIndex - startIndex) / size;\n  scratchArray = _typed_array_manager__WEBPACK_IMPORTED_MODULE_1__/* ["default"].allocate */ .Z.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  let sourceIndex = startIndex;\n  let targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (let j = 0; j < size; j++) {\n      const value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\nfunction mergeBounds(boundsList) {\n  let mergedBounds = null;\n  let isMerged = false;\n\n  for (const bounds of boundsList) {\n    if (!bounds) continue;\n\n    if (!mergedBounds) {\n      mergedBounds = bounds;\n    } else {\n      if (!isMerged) {\n        mergedBounds = [[mergedBounds[0][0], mergedBounds[0][1]], [mergedBounds[1][0], mergedBounds[1][1]]];\n        isMerged = true;\n      }\n\n      mergedBounds[0][0] = Math.min(mergedBounds[0][0], bounds[0][0]);\n      mergedBounds[0][1] = Math.min(mergedBounds[0][1], bounds[0][1]);\n      mergedBounds[1][0] = Math.max(mergedBounds[1][0], bounds[1][0]);\n      mergedBounds[1][1] = Math.max(mergedBounds[1][1], bounds[1][1]);\n    }\n  }\n\n  return mergedBounds;\n}\n//# sourceMappingURL=math-utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUxMjYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzRDtBQUNkO0FBQ2pDO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQU87O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQU87QUFDdkI7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxpQkFBaUIsdUZBQTBCO0FBQzNDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy9tYXRoLXV0aWxzLmpzPzZkMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGVkQXJyYXlNYW5hZ2VyIGZyb20gJy4vdHlwZWQtYXJyYXktbWFuYWdlcic7XG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAnQG1hdGguZ2wvY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWF0NCgpIHtcbiAgcmV0dXJuIFsxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtb2QodmFsdWUsIGRpdmlzb3IpIHtcbiAgY29uc3QgbW9kdWx1cyA9IHZhbHVlICUgZGl2aXNvcjtcbiAgcmV0dXJuIG1vZHVsdXMgPCAwID8gZGl2aXNvciArIG1vZHVsdXMgOiBtb2R1bHVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENhbWVyYVBvc2l0aW9uKHZpZXdNYXRyaXhJbnZlcnNlKSB7XG4gIHJldHVybiBbdmlld01hdHJpeEludmVyc2VbMTJdLCB2aWV3TWF0cml4SW52ZXJzZVsxM10sIHZpZXdNYXRyaXhJbnZlcnNlWzE0XV07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJ1c3R1bVBsYW5lcyh2aWV3UHJvamVjdGlvbk1hdHJpeCkge1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IGdldEZydXN0dW1QbGFuZSh2aWV3UHJvamVjdGlvbk1hdHJpeFszXSArIHZpZXdQcm9qZWN0aW9uTWF0cml4WzBdLCB2aWV3UHJvamVjdGlvbk1hdHJpeFs3XSArIHZpZXdQcm9qZWN0aW9uTWF0cml4WzRdLCB2aWV3UHJvamVjdGlvbk1hdHJpeFsxMV0gKyB2aWV3UHJvamVjdGlvbk1hdHJpeFs4XSwgdmlld1Byb2plY3Rpb25NYXRyaXhbMTVdICsgdmlld1Byb2plY3Rpb25NYXRyaXhbMTJdKSxcbiAgICByaWdodDogZ2V0RnJ1c3R1bVBsYW5lKHZpZXdQcm9qZWN0aW9uTWF0cml4WzNdIC0gdmlld1Byb2plY3Rpb25NYXRyaXhbMF0sIHZpZXdQcm9qZWN0aW9uTWF0cml4WzddIC0gdmlld1Byb2plY3Rpb25NYXRyaXhbNF0sIHZpZXdQcm9qZWN0aW9uTWF0cml4WzExXSAtIHZpZXdQcm9qZWN0aW9uTWF0cml4WzhdLCB2aWV3UHJvamVjdGlvbk1hdHJpeFsxNV0gLSB2aWV3UHJvamVjdGlvbk1hdHJpeFsxMl0pLFxuICAgIGJvdHRvbTogZ2V0RnJ1c3R1bVBsYW5lKHZpZXdQcm9qZWN0aW9uTWF0cml4WzNdICsgdmlld1Byb2plY3Rpb25NYXRyaXhbMV0sIHZpZXdQcm9qZWN0aW9uTWF0cml4WzddICsgdmlld1Byb2plY3Rpb25NYXRyaXhbNV0sIHZpZXdQcm9qZWN0aW9uTWF0cml4WzExXSArIHZpZXdQcm9qZWN0aW9uTWF0cml4WzldLCB2aWV3UHJvamVjdGlvbk1hdHJpeFsxNV0gKyB2aWV3UHJvamVjdGlvbk1hdHJpeFsxM10pLFxuICAgIHRvcDogZ2V0RnJ1c3R1bVBsYW5lKHZpZXdQcm9qZWN0aW9uTWF0cml4WzNdIC0gdmlld1Byb2plY3Rpb25NYXRyaXhbMV0sIHZpZXdQcm9qZWN0aW9uTWF0cml4WzddIC0gdmlld1Byb2plY3Rpb25NYXRyaXhbNV0sIHZpZXdQcm9qZWN0aW9uTWF0cml4WzExXSAtIHZpZXdQcm9qZWN0aW9uTWF0cml4WzldLCB2aWV3UHJvamVjdGlvbk1hdHJpeFsxNV0gLSB2aWV3UHJvamVjdGlvbk1hdHJpeFsxM10pLFxuICAgIG5lYXI6IGdldEZydXN0dW1QbGFuZSh2aWV3UHJvamVjdGlvbk1hdHJpeFszXSArIHZpZXdQcm9qZWN0aW9uTWF0cml4WzJdLCB2aWV3UHJvamVjdGlvbk1hdHJpeFs3XSArIHZpZXdQcm9qZWN0aW9uTWF0cml4WzZdLCB2aWV3UHJvamVjdGlvbk1hdHJpeFsxMV0gKyB2aWV3UHJvamVjdGlvbk1hdHJpeFsxMF0sIHZpZXdQcm9qZWN0aW9uTWF0cml4WzE1XSArIHZpZXdQcm9qZWN0aW9uTWF0cml4WzE0XSksXG4gICAgZmFyOiBnZXRGcnVzdHVtUGxhbmUodmlld1Byb2plY3Rpb25NYXRyaXhbM10gLSB2aWV3UHJvamVjdGlvbk1hdHJpeFsyXSwgdmlld1Byb2plY3Rpb25NYXRyaXhbN10gLSB2aWV3UHJvamVjdGlvbk1hdHJpeFs2XSwgdmlld1Byb2plY3Rpb25NYXRyaXhbMTFdIC0gdmlld1Byb2plY3Rpb25NYXRyaXhbMTBdLCB2aWV3UHJvamVjdGlvbk1hdHJpeFsxNV0gLSB2aWV3UHJvamVjdGlvbk1hdHJpeFsxNF0pXG4gIH07XG59XG5jb25zdCBzY3JhdGNoVmVjdG9yID0gbmV3IFZlY3RvcjMoKTtcblxuZnVuY3Rpb24gZ2V0RnJ1c3R1bVBsYW5lKGEsIGIsIGMsIGQpIHtcbiAgc2NyYXRjaFZlY3Rvci5zZXQoYSwgYiwgYyk7XG4gIGNvbnN0IEwgPSBzY3JhdGNoVmVjdG9yLmxlbigpO1xuICByZXR1cm4ge1xuICAgIGRpc3RhbmNlOiBkIC8gTCxcbiAgICBub3JtYWw6IG5ldyBWZWN0b3IzKC1hIC8gTCwgLWIgLyBMLCAtYyAvIEwpXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcDY0TG93UGFydCh4KSB7XG4gIHJldHVybiB4IC0gTWF0aC5mcm91bmQoeCk7XG59XG5sZXQgc2NyYXRjaEFycmF5O1xuZXhwb3J0IGZ1bmN0aW9uIHRvRG91YmxlUHJlY2lzaW9uQXJyYXkodHlwZWRBcnJheSwgb3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgc2l6ZSA9IDEsXG4gICAgc3RhcnRJbmRleCA9IDBcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGVuZEluZGV4ID0gb3B0aW9ucy5lbmRJbmRleCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5lbmRJbmRleCA6IHR5cGVkQXJyYXkubGVuZ3RoO1xuICBjb25zdCBjb3VudCA9IChlbmRJbmRleCAtIHN0YXJ0SW5kZXgpIC8gc2l6ZTtcbiAgc2NyYXRjaEFycmF5ID0gdHlwZWRBcnJheU1hbmFnZXIuYWxsb2NhdGUoc2NyYXRjaEFycmF5LCBjb3VudCwge1xuICAgIHR5cGU6IEZsb2F0MzJBcnJheSxcbiAgICBzaXplOiBzaXplICogMlxuICB9KTtcbiAgbGV0IHNvdXJjZUluZGV4ID0gc3RhcnRJbmRleDtcbiAgbGV0IHRhcmdldEluZGV4ID0gMDtcblxuICB3aGlsZSAoc291cmNlSW5kZXggPCBlbmRJbmRleCkge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2l6ZTsgaisrKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHR5cGVkQXJyYXlbc291cmNlSW5kZXgrK107XG4gICAgICBzY3JhdGNoQXJyYXlbdGFyZ2V0SW5kZXggKyBqXSA9IHZhbHVlO1xuICAgICAgc2NyYXRjaEFycmF5W3RhcmdldEluZGV4ICsgaiArIHNpemVdID0gZnA2NExvd1BhcnQodmFsdWUpO1xuICAgIH1cblxuICAgIHRhcmdldEluZGV4ICs9IHNpemUgKiAyO1xuICB9XG5cbiAgcmV0dXJuIHNjcmF0Y2hBcnJheS5zdWJhcnJheSgwLCBjb3VudCAqIHNpemUgKiAyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUJvdW5kcyhib3VuZHNMaXN0KSB7XG4gIGxldCBtZXJnZWRCb3VuZHMgPSBudWxsO1xuICBsZXQgaXNNZXJnZWQgPSBmYWxzZTtcblxuICBmb3IgKGNvbnN0IGJvdW5kcyBvZiBib3VuZHNMaXN0KSB7XG4gICAgaWYgKCFib3VuZHMpIGNvbnRpbnVlO1xuXG4gICAgaWYgKCFtZXJnZWRCb3VuZHMpIHtcbiAgICAgIG1lcmdlZEJvdW5kcyA9IGJvdW5kcztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFpc01lcmdlZCkge1xuICAgICAgICBtZXJnZWRCb3VuZHMgPSBbW21lcmdlZEJvdW5kc1swXVswXSwgbWVyZ2VkQm91bmRzWzBdWzFdXSwgW21lcmdlZEJvdW5kc1sxXVswXSwgbWVyZ2VkQm91bmRzWzFdWzFdXV07XG4gICAgICAgIGlzTWVyZ2VkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgbWVyZ2VkQm91bmRzWzBdWzBdID0gTWF0aC5taW4obWVyZ2VkQm91bmRzWzBdWzBdLCBib3VuZHNbMF1bMF0pO1xuICAgICAgbWVyZ2VkQm91bmRzWzBdWzFdID0gTWF0aC5taW4obWVyZ2VkQm91bmRzWzBdWzFdLCBib3VuZHNbMF1bMV0pO1xuICAgICAgbWVyZ2VkQm91bmRzWzFdWzBdID0gTWF0aC5tYXgobWVyZ2VkQm91bmRzWzFdWzBdLCBib3VuZHNbMV1bMF0pO1xuICAgICAgbWVyZ2VkQm91bmRzWzFdWzFdID0gTWF0aC5tYXgobWVyZ2VkQm91bmRzWzFdWzFdLCBib3VuZHNbMV1bMV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtZXJnZWRCb3VuZHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRoLXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///75126\n')},88177:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ memoize; }\n/* harmony export */ });\nfunction isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    const len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODgxNzcuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vdXRpbHMvbWVtb2l6ZS5qcz82OTYwIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGlzRXF1YWwoYSwgYikge1xuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICBjb25zdCBsZW4gPSBhLmxlbmd0aDtcblxuICAgIGlmICghYiB8fCBiLmxlbmd0aCAhPT0gbGVuKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZW1vaXplKGNvbXB1dGUpIHtcbiAgbGV0IGNhY2hlZEFyZ3MgPSB7fTtcbiAgbGV0IGNhY2hlZFJlc3VsdDtcbiAgcmV0dXJuIGFyZ3MgPT4ge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGFyZ3MpIHtcbiAgICAgIGlmICghaXNFcXVhbChhcmdzW2tleV0sIGNhY2hlZEFyZ3Nba2V5XSkpIHtcbiAgICAgICAgY2FjaGVkUmVzdWx0ID0gY29tcHV0ZShhcmdzKTtcbiAgICAgICAgY2FjaGVkQXJncyA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjYWNoZWRSZXN1bHQ7XG4gIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZW1vaXplLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///88177\n')},47586:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "E_": function() { return /* binding */ EMPTY; },\n/* harmony export */   "IH": function() { return /* binding */ add; },\n/* harmony export */   "KO": function() { return /* binding */ FULL; }\n/* harmony export */ });\nconst EMPTY = [];\nconst FULL = [[0, Infinity]];\nfunction add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  const newRangeList = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc1ODYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLFNBQVM7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy9yYW5nZS5qcz85NmE5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBFTVBUWSA9IFtdO1xuZXhwb3J0IGNvbnN0IEZVTEwgPSBbWzAsIEluZmluaXR5XV07XG5leHBvcnQgZnVuY3Rpb24gYWRkKHJhbmdlTGlzdCwgcmFuZ2UpIHtcbiAgaWYgKHJhbmdlTGlzdCA9PT0gRlVMTCkge1xuICAgIHJldHVybiByYW5nZUxpc3Q7XG4gIH1cblxuICBpZiAocmFuZ2VbMF0gPCAwKSB7XG4gICAgcmFuZ2VbMF0gPSAwO1xuICB9XG5cbiAgaWYgKHJhbmdlWzBdID49IHJhbmdlWzFdKSB7XG4gICAgcmV0dXJuIHJhbmdlTGlzdDtcbiAgfVxuXG4gIGNvbnN0IG5ld1JhbmdlTGlzdCA9IFtdO1xuICBjb25zdCBsZW4gPSByYW5nZUxpc3QubGVuZ3RoO1xuICBsZXQgaW5zZXJ0UG9zaXRpb24gPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCByYW5nZTAgPSByYW5nZUxpc3RbaV07XG5cbiAgICBpZiAocmFuZ2UwWzFdIDwgcmFuZ2VbMF0pIHtcbiAgICAgIG5ld1JhbmdlTGlzdC5wdXNoKHJhbmdlMCk7XG4gICAgICBpbnNlcnRQb3NpdGlvbiA9IGkgKyAxO1xuICAgIH0gZWxzZSBpZiAocmFuZ2UwWzBdID4gcmFuZ2VbMV0pIHtcbiAgICAgIG5ld1JhbmdlTGlzdC5wdXNoKHJhbmdlMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlID0gW01hdGgubWluKHJhbmdlMFswXSwgcmFuZ2VbMF0pLCBNYXRoLm1heChyYW5nZTBbMV0sIHJhbmdlWzFdKV07XG4gICAgfVxuICB9XG5cbiAgbmV3UmFuZ2VMaXN0LnNwbGljZShpbnNlcnRQb3NpdGlvbiwgMCwgcmFuZ2UpO1xuICByZXR1cm4gbmV3UmFuZ2VMaXN0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///47586\n')},27870:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"l\": function() { return /* binding */ mergeShaders; }\n/* harmony export */ });\nfunction mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  const result = { ...target,\n    ...source\n  };\n\n  if ('defines' in source) {\n    result.defines = { ...target.defines,\n      ...source.defines\n    };\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(module => module.name === 'project64')) {\n      const index = result.modules.findIndex(module => module.name === 'project32');\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      const mergedInjection = { ...target.inject\n      };\n\n      for (const key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc4NzAuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CO0FBQ25CO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixnQ0FBZ0M7QUFDaEM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vdXRpbHMvc2hhZGVyLmpzPzRiYjAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIG1lcmdlU2hhZGVycyh0YXJnZXQsIHNvdXJjZSkge1xuICBpZiAoIXNvdXJjZSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICBjb25zdCByZXN1bHQgPSB7IC4uLnRhcmdldCxcbiAgICAuLi5zb3VyY2VcbiAgfTtcblxuICBpZiAoJ2RlZmluZXMnIGluIHNvdXJjZSkge1xuICAgIHJlc3VsdC5kZWZpbmVzID0geyAuLi50YXJnZXQuZGVmaW5lcyxcbiAgICAgIC4uLnNvdXJjZS5kZWZpbmVzXG4gICAgfTtcbiAgfVxuXG4gIGlmICgnbW9kdWxlcycgaW4gc291cmNlKSB7XG4gICAgcmVzdWx0Lm1vZHVsZXMgPSAodGFyZ2V0Lm1vZHVsZXMgfHwgW10pLmNvbmNhdChzb3VyY2UubW9kdWxlcyk7XG5cbiAgICBpZiAoc291cmNlLm1vZHVsZXMuc29tZShtb2R1bGUgPT4gbW9kdWxlLm5hbWUgPT09ICdwcm9qZWN0NjQnKSkge1xuICAgICAgY29uc3QgaW5kZXggPSByZXN1bHQubW9kdWxlcy5maW5kSW5kZXgobW9kdWxlID0+IG1vZHVsZS5uYW1lID09PSAncHJvamVjdDMyJyk7XG5cbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHJlc3VsdC5tb2R1bGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKCdpbmplY3QnIGluIHNvdXJjZSkge1xuICAgIGlmICghdGFyZ2V0LmluamVjdCkge1xuICAgICAgcmVzdWx0LmluamVjdCA9IHNvdXJjZS5pbmplY3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1lcmdlZEluamVjdGlvbiA9IHsgLi4udGFyZ2V0LmluamVjdFxuICAgICAgfTtcblxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlLmluamVjdCkge1xuICAgICAgICBtZXJnZWRJbmplY3Rpb25ba2V5XSA9IChtZXJnZWRJbmplY3Rpb25ba2V5XSB8fCAnJykgKyBzb3VyY2UuaW5qZWN0W2tleV07XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdC5pbmplY3QgPSBtZXJnZWRJbmplY3Rpb247XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYWRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///27870\n")},28005:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ Tesselator; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n/* harmony import */ var _iterable_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(38550);\n/* harmony import */ var _typed_array_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(36610);\n/* harmony import */ var _assert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(75304);\n/* harmony import */ var _luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(53478);\n\n\n\n\n\nclass Tesselator {\n  constructor(opts) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "opts", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "typedArrayManager", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "indexStarts", [0]);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "vertexStarts", [0]);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "vertexCount", 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "instanceCount", 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "attributes", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_attributeDefs", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "data", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "getGeometry", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "geometryBuffer", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "buffers", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "positionSize", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "normalize", void 0);\n\n    const {\n      attributes = {}\n    } = opts;\n    this.typedArrayManager = _typed_array_manager__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z;\n    this.attributes = {};\n    this._attributeDefs = attributes;\n    this.opts = opts;\n    this.updateGeometry(opts);\n  }\n\n  updateGeometry(opts) {\n    Object.assign(this.opts, opts);\n    const {\n      data,\n      buffers = {},\n      getGeometry,\n      geometryBuffer,\n      positionFormat,\n      dataChanged,\n      normalize = true\n    } = this.opts;\n    this.data = data;\n    this.getGeometry = getGeometry;\n    this.positionSize = geometryBuffer && geometryBuffer.size || (positionFormat === \'XY\' ? 2 : 3);\n    this.buffers = buffers;\n    this.normalize = normalize;\n\n    if (geometryBuffer) {\n      (0,_assert__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(data.startIndices);\n      this.getGeometry = this.getGeometryFromBuffer(geometryBuffer);\n\n      if (!normalize) {\n        buffers.positions = geometryBuffer;\n      }\n    }\n\n    this.geometryBuffer = buffers.positions;\n\n    if (Array.isArray(dataChanged)) {\n      for (const dataRange of dataChanged) {\n        this._rebuildGeometry(dataRange);\n      }\n    } else {\n      this._rebuildGeometry();\n    }\n  }\n\n  updatePartialGeometry({\n    startRow,\n    endRow\n  }) {\n    this._rebuildGeometry({\n      startRow,\n      endRow\n    });\n  }\n\n  getGeometryFromBuffer(geometryBuffer) {\n    const value = geometryBuffer.value || geometryBuffer;\n\n    if (!ArrayBuffer.isView(value)) {\n      return null;\n    }\n\n    return (0,_iterable_utils__WEBPACK_IMPORTED_MODULE_3__/* .getAccessorFromBuffer */ .jr)(value, {\n      size: this.positionSize,\n      offset: geometryBuffer.offset,\n      stride: geometryBuffer.stride,\n      startIndices: this.data.startIndices\n    });\n  }\n\n  _allocate(instanceCount, copy) {\n    const {\n      attributes,\n      buffers,\n      _attributeDefs,\n      typedArrayManager\n    } = this;\n\n    for (const name in _attributeDefs) {\n      if (name in buffers) {\n        typedArrayManager.release(attributes[name]);\n        attributes[name] = null;\n      } else {\n        const def = _attributeDefs[name];\n        def.copy = copy;\n        attributes[name] = typedArrayManager.allocate(attributes[name], instanceCount, def);\n      }\n    }\n  }\n\n  _forEachGeometry(visitor, startRow, endRow) {\n    const {\n      data,\n      getGeometry\n    } = this;\n    const {\n      iterable,\n      objectInfo\n    } = (0,_iterable_utils__WEBPACK_IMPORTED_MODULE_3__/* .createIterable */ .jB)(data, startRow, endRow);\n\n    for (const object of iterable) {\n      objectInfo.index++;\n      const geometry = getGeometry ? getGeometry(object, objectInfo) : null;\n      visitor(geometry, objectInfo.index);\n    }\n  }\n\n  _rebuildGeometry(dataRange) {\n    if (!this.data) {\n      return;\n    }\n\n    let {\n      indexStarts,\n      vertexStarts,\n      instanceCount\n    } = this;\n    const {\n      data,\n      geometryBuffer\n    } = this;\n    const {\n      startRow = 0,\n      endRow = Infinity\n    } = dataRange || {};\n    const normalizedData = {};\n\n    if (!dataRange) {\n      indexStarts = [0];\n      vertexStarts = [0];\n    }\n\n    if (this.normalize || !geometryBuffer) {\n      this._forEachGeometry((geometry, dataIndex) => {\n        const normalizedGeometry = geometry && this.normalizeGeometry(geometry);\n        normalizedData[dataIndex] = normalizedGeometry;\n        vertexStarts[dataIndex + 1] = vertexStarts[dataIndex] + (normalizedGeometry ? this.getGeometrySize(normalizedGeometry) : 0);\n      }, startRow, endRow);\n\n      instanceCount = vertexStarts[vertexStarts.length - 1];\n    } else {\n      vertexStarts = data.startIndices;\n      instanceCount = vertexStarts[data.length] || 0;\n\n      if (ArrayBuffer.isView(geometryBuffer)) {\n        instanceCount = instanceCount || geometryBuffer.length / this.positionSize;\n      } else if (geometryBuffer instanceof _luma_gl_webgl__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z) {\n        const byteStride = geometryBuffer.accessor.stride || this.positionSize * 4;\n        instanceCount = instanceCount || geometryBuffer.byteLength / byteStride;\n      } else if (geometryBuffer.buffer) {\n        const byteStride = geometryBuffer.stride || this.positionSize * 4;\n        instanceCount = instanceCount || geometryBuffer.buffer.byteLength / byteStride;\n      } else if (geometryBuffer.value) {\n        const bufferValue = geometryBuffer.value;\n        const elementStride = geometryBuffer.stride / bufferValue.BYTES_PER_ELEMENT || this.positionSize;\n        instanceCount = instanceCount || bufferValue.length / elementStride;\n      }\n    }\n\n    this._allocate(instanceCount, Boolean(dataRange));\n\n    this.indexStarts = indexStarts;\n    this.vertexStarts = vertexStarts;\n    this.instanceCount = instanceCount;\n    const context = {};\n\n    this._forEachGeometry((geometry, dataIndex) => {\n      const normalizedGeometry = normalizedData[dataIndex] || geometry;\n      context.vertexStart = vertexStarts[dataIndex];\n      context.indexStart = indexStarts[dataIndex];\n      const vertexEnd = dataIndex < vertexStarts.length - 1 ? vertexStarts[dataIndex + 1] : instanceCount;\n      context.geometrySize = vertexEnd - vertexStarts[dataIndex];\n      context.geometryIndex = dataIndex;\n      this.updateGeometryAttributes(normalizedGeometry, context);\n    }, startRow, endRow);\n\n    this.vertexCount = indexStarts[indexStarts.length - 1];\n  }\n\n}\n//# sourceMappingURL=tesselator.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjgwMDUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0U7QUFDQztBQUNaO0FBQy9CO0FBQ1U7QUFDekI7QUFDZjtBQUNBLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CLElBQUksOEZBQWU7O0FBRW5CO0FBQ0E7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLHFFQUF3QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU0sNERBQU07QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLGdGQUFxQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNLEVBQUUseUVBQWM7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEsbUNBQW1DLCtEQUFNO0FBQ2pEO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy90ZXNzZWxhdG9yLmpzP2M2ZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCB7IGNyZWF0ZUl0ZXJhYmxlLCBnZXRBY2Nlc3NvckZyb21CdWZmZXIgfSBmcm9tICcuL2l0ZXJhYmxlLXV0aWxzJztcbmltcG9ydCBkZWZhdWx0VHlwZWRBcnJheU1hbmFnZXIgZnJvbSAnLi90eXBlZC1hcnJheS1tYW5hZ2VyJztcbmltcG9ydCBhc3NlcnQgZnJvbSAnLi9hc3NlcnQnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnQGx1bWEuZ2wvd2ViZ2wnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVzc2VsYXRvciB7XG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0eXBlZEFycmF5TWFuYWdlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5kZXhTdGFydHNcIiwgWzBdKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnRleFN0YXJ0c1wiLCBbMF0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVydGV4Q291bnRcIiwgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnN0YW5jZUNvdW50XCIsIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYXR0cmlidXRlc1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX2F0dHJpYnV0ZURlZnNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRhdGFcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdldEdlb21ldHJ5XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZW9tZXRyeUJ1ZmZlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYnVmZmVyc1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicG9zaXRpb25TaXplXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJub3JtYWxpemVcIiwgdm9pZCAwKTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGF0dHJpYnV0ZXMgPSB7fVxuICAgIH0gPSBvcHRzO1xuICAgIHRoaXMudHlwZWRBcnJheU1hbmFnZXIgPSBkZWZhdWx0VHlwZWRBcnJheU1hbmFnZXI7XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0ge307XG4gICAgdGhpcy5fYXR0cmlidXRlRGVmcyA9IGF0dHJpYnV0ZXM7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLnVwZGF0ZUdlb21ldHJ5KG9wdHMpO1xuICB9XG5cbiAgdXBkYXRlR2VvbWV0cnkob3B0cykge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5vcHRzLCBvcHRzKTtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgYnVmZmVycyA9IHt9LFxuICAgICAgZ2V0R2VvbWV0cnksXG4gICAgICBnZW9tZXRyeUJ1ZmZlcixcbiAgICAgIHBvc2l0aW9uRm9ybWF0LFxuICAgICAgZGF0YUNoYW5nZWQsXG4gICAgICBub3JtYWxpemUgPSB0cnVlXG4gICAgfSA9IHRoaXMub3B0cztcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMuZ2V0R2VvbWV0cnkgPSBnZXRHZW9tZXRyeTtcbiAgICB0aGlzLnBvc2l0aW9uU2l6ZSA9IGdlb21ldHJ5QnVmZmVyICYmIGdlb21ldHJ5QnVmZmVyLnNpemUgfHwgKHBvc2l0aW9uRm9ybWF0ID09PSAnWFknID8gMiA6IDMpO1xuICAgIHRoaXMuYnVmZmVycyA9IGJ1ZmZlcnM7XG4gICAgdGhpcy5ub3JtYWxpemUgPSBub3JtYWxpemU7XG5cbiAgICBpZiAoZ2VvbWV0cnlCdWZmZXIpIHtcbiAgICAgIGFzc2VydChkYXRhLnN0YXJ0SW5kaWNlcyk7XG4gICAgICB0aGlzLmdldEdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeUZyb21CdWZmZXIoZ2VvbWV0cnlCdWZmZXIpO1xuXG4gICAgICBpZiAoIW5vcm1hbGl6ZSkge1xuICAgICAgICBidWZmZXJzLnBvc2l0aW9ucyA9IGdlb21ldHJ5QnVmZmVyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZ2VvbWV0cnlCdWZmZXIgPSBidWZmZXJzLnBvc2l0aW9ucztcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGFDaGFuZ2VkKSkge1xuICAgICAgZm9yIChjb25zdCBkYXRhUmFuZ2Ugb2YgZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgdGhpcy5fcmVidWlsZEdlb21ldHJ5KGRhdGFSYW5nZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlYnVpbGRHZW9tZXRyeSgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVBhcnRpYWxHZW9tZXRyeSh7XG4gICAgc3RhcnRSb3csXG4gICAgZW5kUm93XG4gIH0pIHtcbiAgICB0aGlzLl9yZWJ1aWxkR2VvbWV0cnkoe1xuICAgICAgc3RhcnRSb3csXG4gICAgICBlbmRSb3dcbiAgICB9KTtcbiAgfVxuXG4gIGdldEdlb21ldHJ5RnJvbUJ1ZmZlcihnZW9tZXRyeUJ1ZmZlcikge1xuICAgIGNvbnN0IHZhbHVlID0gZ2VvbWV0cnlCdWZmZXIudmFsdWUgfHwgZ2VvbWV0cnlCdWZmZXI7XG5cbiAgICBpZiAoIUFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRBY2Nlc3NvckZyb21CdWZmZXIodmFsdWUsIHtcbiAgICAgIHNpemU6IHRoaXMucG9zaXRpb25TaXplLFxuICAgICAgb2Zmc2V0OiBnZW9tZXRyeUJ1ZmZlci5vZmZzZXQsXG4gICAgICBzdHJpZGU6IGdlb21ldHJ5QnVmZmVyLnN0cmlkZSxcbiAgICAgIHN0YXJ0SW5kaWNlczogdGhpcy5kYXRhLnN0YXJ0SW5kaWNlc1xuICAgIH0pO1xuICB9XG5cbiAgX2FsbG9jYXRlKGluc3RhbmNlQ291bnQsIGNvcHkpIHtcbiAgICBjb25zdCB7XG4gICAgICBhdHRyaWJ1dGVzLFxuICAgICAgYnVmZmVycyxcbiAgICAgIF9hdHRyaWJ1dGVEZWZzLFxuICAgICAgdHlwZWRBcnJheU1hbmFnZXJcbiAgICB9ID0gdGhpcztcblxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBfYXR0cmlidXRlRGVmcykge1xuICAgICAgaWYgKG5hbWUgaW4gYnVmZmVycykge1xuICAgICAgICB0eXBlZEFycmF5TWFuYWdlci5yZWxlYXNlKGF0dHJpYnV0ZXNbbmFtZV0pO1xuICAgICAgICBhdHRyaWJ1dGVzW25hbWVdID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGRlZiA9IF9hdHRyaWJ1dGVEZWZzW25hbWVdO1xuICAgICAgICBkZWYuY29weSA9IGNvcHk7XG4gICAgICAgIGF0dHJpYnV0ZXNbbmFtZV0gPSB0eXBlZEFycmF5TWFuYWdlci5hbGxvY2F0ZShhdHRyaWJ1dGVzW25hbWVdLCBpbnN0YW5jZUNvdW50LCBkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9mb3JFYWNoR2VvbWV0cnkodmlzaXRvciwgc3RhcnRSb3csIGVuZFJvdykge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhdGEsXG4gICAgICBnZXRHZW9tZXRyeVxuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIGl0ZXJhYmxlLFxuICAgICAgb2JqZWN0SW5mb1xuICAgIH0gPSBjcmVhdGVJdGVyYWJsZShkYXRhLCBzdGFydFJvdywgZW5kUm93KTtcblxuICAgIGZvciAoY29uc3Qgb2JqZWN0IG9mIGl0ZXJhYmxlKSB7XG4gICAgICBvYmplY3RJbmZvLmluZGV4Kys7XG4gICAgICBjb25zdCBnZW9tZXRyeSA9IGdldEdlb21ldHJ5ID8gZ2V0R2VvbWV0cnkob2JqZWN0LCBvYmplY3RJbmZvKSA6IG51bGw7XG4gICAgICB2aXNpdG9yKGdlb21ldHJ5LCBvYmplY3RJbmZvLmluZGV4KTtcbiAgICB9XG4gIH1cblxuICBfcmVidWlsZEdlb21ldHJ5KGRhdGFSYW5nZSkge1xuICAgIGlmICghdGhpcy5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHtcbiAgICAgIGluZGV4U3RhcnRzLFxuICAgICAgdmVydGV4U3RhcnRzLFxuICAgICAgaW5zdGFuY2VDb3VudFxuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIGRhdGEsXG4gICAgICBnZW9tZXRyeUJ1ZmZlclxuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHN0YXJ0Um93ID0gMCxcbiAgICAgIGVuZFJvdyA9IEluZmluaXR5XG4gICAgfSA9IGRhdGFSYW5nZSB8fCB7fTtcbiAgICBjb25zdCBub3JtYWxpemVkRGF0YSA9IHt9O1xuXG4gICAgaWYgKCFkYXRhUmFuZ2UpIHtcbiAgICAgIGluZGV4U3RhcnRzID0gWzBdO1xuICAgICAgdmVydGV4U3RhcnRzID0gWzBdO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm5vcm1hbGl6ZSB8fCAhZ2VvbWV0cnlCdWZmZXIpIHtcbiAgICAgIHRoaXMuX2ZvckVhY2hHZW9tZXRyeSgoZ2VvbWV0cnksIGRhdGFJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkR2VvbWV0cnkgPSBnZW9tZXRyeSAmJiB0aGlzLm5vcm1hbGl6ZUdlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICAgICAgbm9ybWFsaXplZERhdGFbZGF0YUluZGV4XSA9IG5vcm1hbGl6ZWRHZW9tZXRyeTtcbiAgICAgICAgdmVydGV4U3RhcnRzW2RhdGFJbmRleCArIDFdID0gdmVydGV4U3RhcnRzW2RhdGFJbmRleF0gKyAobm9ybWFsaXplZEdlb21ldHJ5ID8gdGhpcy5nZXRHZW9tZXRyeVNpemUobm9ybWFsaXplZEdlb21ldHJ5KSA6IDApO1xuICAgICAgfSwgc3RhcnRSb3csIGVuZFJvdyk7XG5cbiAgICAgIGluc3RhbmNlQ291bnQgPSB2ZXJ0ZXhTdGFydHNbdmVydGV4U3RhcnRzLmxlbmd0aCAtIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZXJ0ZXhTdGFydHMgPSBkYXRhLnN0YXJ0SW5kaWNlcztcbiAgICAgIGluc3RhbmNlQ291bnQgPSB2ZXJ0ZXhTdGFydHNbZGF0YS5sZW5ndGhdIHx8IDA7XG5cbiAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoZ2VvbWV0cnlCdWZmZXIpKSB7XG4gICAgICAgIGluc3RhbmNlQ291bnQgPSBpbnN0YW5jZUNvdW50IHx8IGdlb21ldHJ5QnVmZmVyLmxlbmd0aCAvIHRoaXMucG9zaXRpb25TaXplO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeUJ1ZmZlciBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgICBjb25zdCBieXRlU3RyaWRlID0gZ2VvbWV0cnlCdWZmZXIuYWNjZXNzb3Iuc3RyaWRlIHx8IHRoaXMucG9zaXRpb25TaXplICogNDtcbiAgICAgICAgaW5zdGFuY2VDb3VudCA9IGluc3RhbmNlQ291bnQgfHwgZ2VvbWV0cnlCdWZmZXIuYnl0ZUxlbmd0aCAvIGJ5dGVTdHJpZGU7XG4gICAgICB9IGVsc2UgaWYgKGdlb21ldHJ5QnVmZmVyLmJ1ZmZlcikge1xuICAgICAgICBjb25zdCBieXRlU3RyaWRlID0gZ2VvbWV0cnlCdWZmZXIuc3RyaWRlIHx8IHRoaXMucG9zaXRpb25TaXplICogNDtcbiAgICAgICAgaW5zdGFuY2VDb3VudCA9IGluc3RhbmNlQ291bnQgfHwgZ2VvbWV0cnlCdWZmZXIuYnVmZmVyLmJ5dGVMZW5ndGggLyBieXRlU3RyaWRlO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeUJ1ZmZlci52YWx1ZSkge1xuICAgICAgICBjb25zdCBidWZmZXJWYWx1ZSA9IGdlb21ldHJ5QnVmZmVyLnZhbHVlO1xuICAgICAgICBjb25zdCBlbGVtZW50U3RyaWRlID0gZ2VvbWV0cnlCdWZmZXIuc3RyaWRlIC8gYnVmZmVyVmFsdWUuQllURVNfUEVSX0VMRU1FTlQgfHwgdGhpcy5wb3NpdGlvblNpemU7XG4gICAgICAgIGluc3RhbmNlQ291bnQgPSBpbnN0YW5jZUNvdW50IHx8IGJ1ZmZlclZhbHVlLmxlbmd0aCAvIGVsZW1lbnRTdHJpZGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fYWxsb2NhdGUoaW5zdGFuY2VDb3VudCwgQm9vbGVhbihkYXRhUmFuZ2UpKTtcblxuICAgIHRoaXMuaW5kZXhTdGFydHMgPSBpbmRleFN0YXJ0cztcbiAgICB0aGlzLnZlcnRleFN0YXJ0cyA9IHZlcnRleFN0YXJ0cztcbiAgICB0aGlzLmluc3RhbmNlQ291bnQgPSBpbnN0YW5jZUNvdW50O1xuICAgIGNvbnN0IGNvbnRleHQgPSB7fTtcblxuICAgIHRoaXMuX2ZvckVhY2hHZW9tZXRyeSgoZ2VvbWV0cnksIGRhdGFJbmRleCkgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEdlb21ldHJ5ID0gbm9ybWFsaXplZERhdGFbZGF0YUluZGV4XSB8fCBnZW9tZXRyeTtcbiAgICAgIGNvbnRleHQudmVydGV4U3RhcnQgPSB2ZXJ0ZXhTdGFydHNbZGF0YUluZGV4XTtcbiAgICAgIGNvbnRleHQuaW5kZXhTdGFydCA9IGluZGV4U3RhcnRzW2RhdGFJbmRleF07XG4gICAgICBjb25zdCB2ZXJ0ZXhFbmQgPSBkYXRhSW5kZXggPCB2ZXJ0ZXhTdGFydHMubGVuZ3RoIC0gMSA/IHZlcnRleFN0YXJ0c1tkYXRhSW5kZXggKyAxXSA6IGluc3RhbmNlQ291bnQ7XG4gICAgICBjb250ZXh0Lmdlb21ldHJ5U2l6ZSA9IHZlcnRleEVuZCAtIHZlcnRleFN0YXJ0c1tkYXRhSW5kZXhdO1xuICAgICAgY29udGV4dC5nZW9tZXRyeUluZGV4ID0gZGF0YUluZGV4O1xuICAgICAgdGhpcy51cGRhdGVHZW9tZXRyeUF0dHJpYnV0ZXMobm9ybWFsaXplZEdlb21ldHJ5LCBjb250ZXh0KTtcbiAgICB9LCBzdGFydFJvdywgZW5kUm93KTtcblxuICAgIHRoaXMudmVydGV4Q291bnQgPSBpbmRleFN0YXJ0c1tpbmRleFN0YXJ0cy5sZW5ndGggLSAxXTtcbiAgfVxuXG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZXNzZWxhdG9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///28005\n')},36610:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* unused harmony export TypedArrayManager */\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82482);\n\nclass TypedArrayManager {\n  constructor(options = {}) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "_pool", []);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this, "opts", {\n      overAlloc: 2,\n      poolSize: 100\n    });\n\n    this.setOptions(options);\n  }\n\n  setOptions(options) {\n    Object.assign(this.opts, options);\n  }\n\n  allocate(typedArray, count, {\n    size = 1,\n    type,\n    padding = 0,\n    copy = false,\n    initialize = false,\n    maxCount\n  }) {\n    const Type = type || typedArray && typedArray.constructor || Float32Array;\n    const newSize = count * size + padding;\n\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize);\n      }\n    }\n\n    let maxSize = Infinity;\n\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n\n    return newArray;\n  }\n\n  release(typedArray) {\n    this._release(typedArray);\n  }\n\n  _allocate(Type, size, initialize, maxSize) {\n    let sizeToAllocate = Math.max(Math.ceil(size * this.opts.overAlloc), 1);\n\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i >= 0) {\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n      if (initialize) {\n        array.fill(0);\n      }\n\n      return array;\n    }\n\n    return new Type(sizeToAllocate);\n  }\n\n  _release(typedArray) {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n\n    const pool = this._pool;\n    const {\n      buffer\n    } = typedArray;\n    const {\n      byteLength\n    } = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.opts.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n\n    if (pool.length > this.opts.poolSize) {\n      pool.shift();\n    }\n  }\n\n}\n/* harmony default export */ __webpack_exports__["Z"] = (new TypedArrayManager());\n//# sourceMappingURL=typed-array-manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzY2MTAuanMiLCJtYXBwaW5ncyI6Ijs7QUFBd0U7QUFDakU7QUFDUCwwQkFBMEI7QUFDMUIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTtBQUNuQjtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5REFBZSx1QkFBdUIsRUFBQztBQUN2QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS91dGlscy90eXBlZC1hcnJheS1tYW5hZ2VyLmpzPzZhZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmV4cG9ydCBjbGFzcyBUeXBlZEFycmF5TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wb29sXCIsIFtdKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdHNcIiwge1xuICAgICAgb3ZlckFsbG9jOiAyLFxuICAgICAgcG9vbFNpemU6IDEwMFxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICB9XG5cbiAgc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLm9wdHMsIG9wdGlvbnMpO1xuICB9XG5cbiAgYWxsb2NhdGUodHlwZWRBcnJheSwgY291bnQsIHtcbiAgICBzaXplID0gMSxcbiAgICB0eXBlLFxuICAgIHBhZGRpbmcgPSAwLFxuICAgIGNvcHkgPSBmYWxzZSxcbiAgICBpbml0aWFsaXplID0gZmFsc2UsXG4gICAgbWF4Q291bnRcbiAgfSkge1xuICAgIGNvbnN0IFR5cGUgPSB0eXBlIHx8IHR5cGVkQXJyYXkgJiYgdHlwZWRBcnJheS5jb25zdHJ1Y3RvciB8fCBGbG9hdDMyQXJyYXk7XG4gICAgY29uc3QgbmV3U2l6ZSA9IGNvdW50ICogc2l6ZSArIHBhZGRpbmc7XG5cbiAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHR5cGVkQXJyYXkpKSB7XG4gICAgICBpZiAobmV3U2l6ZSA8PSB0eXBlZEFycmF5Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdHlwZWRBcnJheTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5ld1NpemUgKiB0eXBlZEFycmF5LkJZVEVTX1BFUl9FTEVNRU5UIDw9IHR5cGVkQXJyYXkuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUeXBlKHR5cGVkQXJyYXkuYnVmZmVyLCAwLCBuZXdTaXplKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbWF4U2l6ZSA9IEluZmluaXR5O1xuXG4gICAgaWYgKG1heENvdW50KSB7XG4gICAgICBtYXhTaXplID0gbWF4Q291bnQgKiBzaXplICsgcGFkZGluZztcbiAgICB9XG5cbiAgICBjb25zdCBuZXdBcnJheSA9IHRoaXMuX2FsbG9jYXRlKFR5cGUsIG5ld1NpemUsIGluaXRpYWxpemUsIG1heFNpemUpO1xuXG4gICAgaWYgKHR5cGVkQXJyYXkgJiYgY29weSkge1xuICAgICAgbmV3QXJyYXkuc2V0KHR5cGVkQXJyYXkpO1xuICAgIH0gZWxzZSBpZiAoIWluaXRpYWxpemUpIHtcbiAgICAgIG5ld0FycmF5LmZpbGwoMCwgMCwgNCk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVsZWFzZSh0eXBlZEFycmF5KTtcblxuICAgIHJldHVybiBuZXdBcnJheTtcbiAgfVxuXG4gIHJlbGVhc2UodHlwZWRBcnJheSkge1xuICAgIHRoaXMuX3JlbGVhc2UodHlwZWRBcnJheSk7XG4gIH1cblxuICBfYWxsb2NhdGUoVHlwZSwgc2l6ZSwgaW5pdGlhbGl6ZSwgbWF4U2l6ZSkge1xuICAgIGxldCBzaXplVG9BbGxvY2F0ZSA9IE1hdGgubWF4KE1hdGguY2VpbChzaXplICogdGhpcy5vcHRzLm92ZXJBbGxvYyksIDEpO1xuXG4gICAgaWYgKHNpemVUb0FsbG9jYXRlID4gbWF4U2l6ZSkge1xuICAgICAgc2l6ZVRvQWxsb2NhdGUgPSBtYXhTaXplO1xuICAgIH1cblxuICAgIGNvbnN0IHBvb2wgPSB0aGlzLl9wb29sO1xuICAgIGNvbnN0IGJ5dGVMZW5ndGggPSBUeXBlLkJZVEVTX1BFUl9FTEVNRU5UICogc2l6ZVRvQWxsb2NhdGU7XG4gICAgY29uc3QgaSA9IHBvb2wuZmluZEluZGV4KGIgPT4gYi5ieXRlTGVuZ3RoID49IGJ5dGVMZW5ndGgpO1xuXG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgY29uc3QgYXJyYXkgPSBuZXcgVHlwZShwb29sLnNwbGljZShpLCAxKVswXSwgMCwgc2l6ZVRvQWxsb2NhdGUpO1xuXG4gICAgICBpZiAoaW5pdGlhbGl6ZSkge1xuICAgICAgICBhcnJheS5maWxsKDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBUeXBlKHNpemVUb0FsbG9jYXRlKTtcbiAgfVxuXG4gIF9yZWxlYXNlKHR5cGVkQXJyYXkpIHtcbiAgICBpZiAoIUFycmF5QnVmZmVyLmlzVmlldyh0eXBlZEFycmF5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBvb2wgPSB0aGlzLl9wb29sO1xuICAgIGNvbnN0IHtcbiAgICAgIGJ1ZmZlclxuICAgIH0gPSB0eXBlZEFycmF5O1xuICAgIGNvbnN0IHtcbiAgICAgIGJ5dGVMZW5ndGhcbiAgICB9ID0gYnVmZmVyO1xuICAgIGNvbnN0IGkgPSBwb29sLmZpbmRJbmRleChiID0+IGIuYnl0ZUxlbmd0aCA+PSBieXRlTGVuZ3RoKTtcblxuICAgIGlmIChpIDwgMCkge1xuICAgICAgcG9vbC5wdXNoKGJ1ZmZlcik7XG4gICAgfSBlbHNlIGlmIChpID4gMCB8fCBwb29sLmxlbmd0aCA8IHRoaXMub3B0cy5wb29sU2l6ZSkge1xuICAgICAgcG9vbC5zcGxpY2UoaSwgMCwgYnVmZmVyKTtcbiAgICB9XG5cbiAgICBpZiAocG9vbC5sZW5ndGggPiB0aGlzLm9wdHMucG9vbFNpemUpIHtcbiAgICAgIHBvb2wuc2hpZnQoKTtcbiAgICB9XG4gIH1cblxufVxuZXhwb3J0IGRlZmF1bHQgbmV3IFR5cGVkQXJyYXlNYW5hZ2VyKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlZC1hcnJheS1tYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///36610\n')},73131:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ GlobeViewport; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82482);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(85451);\n/* harmony import */ var _viewport__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7013);\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24088);\n/* harmony import */ var gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(77160);\n/* harmony import */ var gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(98333);\n\n\n\n\n\n\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst RADIANS_TO_DEGREES = 180 / Math.PI;\nconst EARTH_RADIUS = 6370972;\nconst GLOBE_RADIUS = 256;\n\nfunction getDistanceScales() {\n  const unitsPerMeter = GLOBE_RADIUS / EARTH_RADIUS;\n  const unitsPerDegree = Math.PI / 180 * GLOBE_RADIUS;\n  return {\n    unitsPerMeter: [unitsPerMeter, unitsPerMeter, unitsPerMeter],\n    unitsPerMeter2: [0, 0, 0],\n    metersPerUnit: [1 / unitsPerMeter, 1 / unitsPerMeter, 1 / unitsPerMeter],\n    unitsPerDegree: [unitsPerDegree, unitsPerDegree, unitsPerMeter],\n    unitsPerDegree2: [0, 0, 0],\n    degreesPerUnit: [1 / unitsPerDegree, 1 / unitsPerDegree, 1 / unitsPerMeter]\n  };\n}\n\nclass GlobeViewport extends _viewport__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 2,\n      resolution = 10\n    } = opts;\n    let {\n      height,\n      altitude = 1.5\n    } = opts;\n    height = height || 1;\n    altitude = Math.max(0.75, altitude);\n    const viewMatrix = new _math_gl_core__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z().lookAt({\n      eye: [0, -altitude, 0],\n      up: [0, 0, 1]\n    });\n    const scale = Math.pow(2, zoom);\n    viewMatrix.rotateX(latitude * DEGREES_TO_RADIANS);\n    viewMatrix.rotateZ(-longitude * DEGREES_TO_RADIANS);\n    viewMatrix.scale(scale / height);\n    const halfFov = Math.atan(0.5 / altitude);\n    const relativeScale = GLOBE_RADIUS * 2 * scale / height;\n    super({ ...opts,\n      height,\n      viewMatrix,\n      longitude,\n      latitude,\n      zoom,\n      distanceScales: getDistanceScales(),\n      fovyRadians: halfFov * 2,\n      focalDistance: altitude,\n      near: nearZMultiplier,\n      far: Math.min(2, 1 / relativeScale + 1) * altitude * farZMultiplier\n    });\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this, "longitude", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this, "latitude", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this, "resolution", void 0);\n\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.resolution = resolution;\n  }\n\n  get projectionMode() {\n    return _lib_constants__WEBPACK_IMPORTED_MODULE_3__/* .PROJECTION_MODE.GLOBE */ .zG.GLOBE;\n  }\n\n  getDistanceScales() {\n    return this.distanceScales;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const left = this.unproject([0, this.height / 2], unprojectOption);\n    const top = this.unproject([this.width / 2, 0], unprojectOption);\n    const right = this.unproject([this.width, this.height / 2], unprojectOption);\n    const bottom = this.unproject([this.width / 2, this.height], unprojectOption);\n    if (right[0] < this.longitude) right[0] += 360;\n    if (left[0] > this.longitude) left[0] -= 360;\n    return [Math.min(left[0], right[0], top[0], bottom[0]), Math.min(left[1], right[1], top[1], bottom[1]), Math.max(left[0], right[0], top[0], bottom[0]), Math.max(left[1], right[1], top[1], bottom[1])];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const {\n      pixelUnprojectionMatrix\n    } = this;\n    let coord;\n\n    if (Number.isFinite(z)) {\n      coord = transformVector(pixelUnprojectionMatrix, [x, y2, z, 1]);\n    } else {\n      const coord0 = transformVector(pixelUnprojectionMatrix, [x, y2, -1, 1]);\n      const coord1 = transformVector(pixelUnprojectionMatrix, [x, y2, 1, 1]);\n      const lt = ((targetZ || 0) / EARTH_RADIUS + 1) * GLOBE_RADIUS;\n      const lSqr = gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__/* .sqrLen */ .x9(gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__/* .sub */ .lu([], coord0, coord1));\n      const l0Sqr = gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__/* .sqrLen */ .x9(coord0);\n      const l1Sqr = gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__/* .sqrLen */ .x9(coord1);\n      const sSqr = (4 * l0Sqr * l1Sqr - (lSqr - l0Sqr - l1Sqr) ** 2) / 16;\n      const dSqr = 4 * sSqr / lSqr;\n      const r0 = Math.sqrt(l0Sqr - dSqr);\n      const dr = Math.sqrt(Math.max(0, lt * lt - dSqr));\n      const t = (r0 - dr) / Math.sqrt(lSqr);\n      coord = gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__/* .lerp */ .t7([], coord0, coord1, t);\n    }\n\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [lng, lat, Z = 0] = xyz;\n    const lambda = lng * DEGREES_TO_RADIANS;\n    const phi = lat * DEGREES_TO_RADIANS;\n    const cosPhi = Math.cos(phi);\n    const D = (Z / EARTH_RADIUS + 1) * GLOBE_RADIUS;\n    return [Math.sin(lambda) * cosPhi * D, -Math.cos(lambda) * cosPhi * D, Math.sin(phi) * D];\n  }\n\n  unprojectPosition(xyz) {\n    const [x, y, z] = xyz;\n    const D = gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__/* .len */ .Zh(xyz);\n    const phi = Math.asin(z / D);\n    const lambda = Math.atan2(x, -y);\n    const lng = lambda * RADIANS_TO_DEGREES;\n    const lat = phi * RADIANS_TO_DEGREES;\n    const Z = (D / GLOBE_RADIUS - 1) * EARTH_RADIUS;\n    return [lng, lat, Z];\n  }\n\n  projectFlat(xyz) {\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    return xyz;\n  }\n\n  panByPosition(coords, pixel) {\n    const fromPosition = this.unproject(pixel);\n    return {\n      longitude: coords[0] - fromPosition[0] + this.longitude,\n      latitude: coords[1] - fromPosition[1] + this.latitude\n    };\n  }\n\n}\n\nfunction transformVector(matrix, vector) {\n  const result = gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_5__/* .transformMat4 */ .fF([], vector, matrix);\n  gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_5__/* .scale */ .bA(result, result, 1 / result[3]);\n  return result;\n}\n//# sourceMappingURL=globe-viewport.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMxMzEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdFO0FBQ2hDO0FBQ047QUFDaUI7QUFDWjtBQUNBO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZSw0QkFBNEIsMERBQVE7QUFDbkQsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsMkJBQTJCLDhEQUFPO0FBQ2xDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTCxJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsaUZBQXFCO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw0REFBVyxDQUFDLHlEQUFRO0FBQ3ZDLG9CQUFvQiw0REFBVztBQUMvQixvQkFBb0IsNERBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMERBQVM7QUFDdkI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyx5REFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsaUJBQWlCLG1FQUFrQjtBQUNuQyxFQUFFLDJEQUFVO0FBQ1o7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3ZpZXdwb3J0cy9nbG9iZS12aWV3cG9ydC5qcz8wZGFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgeyBNYXRyaXg0IH0gZnJvbSAnQG1hdGguZ2wvY29yZSc7XG5pbXBvcnQgVmlld3BvcnQgZnJvbSAnLi92aWV3cG9ydCc7XG5pbXBvcnQgeyBQUk9KRUNUSU9OX01PREUgfSBmcm9tICcuLi9saWIvY29uc3RhbnRzJztcbmltcG9ydCAqIGFzIHZlYzMgZnJvbSAnZ2wtbWF0cml4L3ZlYzMnO1xuaW1wb3J0ICogYXMgdmVjNCBmcm9tICdnbC1tYXRyaXgvdmVjNCc7XG5jb25zdCBERUdSRUVTX1RPX1JBRElBTlMgPSBNYXRoLlBJIC8gMTgwO1xuY29uc3QgUkFESUFOU19UT19ERUdSRUVTID0gMTgwIC8gTWF0aC5QSTtcbmNvbnN0IEVBUlRIX1JBRElVUyA9IDYzNzA5NzI7XG5jb25zdCBHTE9CRV9SQURJVVMgPSAyNTY7XG5cbmZ1bmN0aW9uIGdldERpc3RhbmNlU2NhbGVzKCkge1xuICBjb25zdCB1bml0c1Blck1ldGVyID0gR0xPQkVfUkFESVVTIC8gRUFSVEhfUkFESVVTO1xuICBjb25zdCB1bml0c1BlckRlZ3JlZSA9IE1hdGguUEkgLyAxODAgKiBHTE9CRV9SQURJVVM7XG4gIHJldHVybiB7XG4gICAgdW5pdHNQZXJNZXRlcjogW3VuaXRzUGVyTWV0ZXIsIHVuaXRzUGVyTWV0ZXIsIHVuaXRzUGVyTWV0ZXJdLFxuICAgIHVuaXRzUGVyTWV0ZXIyOiBbMCwgMCwgMF0sXG4gICAgbWV0ZXJzUGVyVW5pdDogWzEgLyB1bml0c1Blck1ldGVyLCAxIC8gdW5pdHNQZXJNZXRlciwgMSAvIHVuaXRzUGVyTWV0ZXJdLFxuICAgIHVuaXRzUGVyRGVncmVlOiBbdW5pdHNQZXJEZWdyZWUsIHVuaXRzUGVyRGVncmVlLCB1bml0c1Blck1ldGVyXSxcbiAgICB1bml0c1BlckRlZ3JlZTI6IFswLCAwLCAwXSxcbiAgICBkZWdyZWVzUGVyVW5pdDogWzEgLyB1bml0c1BlckRlZ3JlZSwgMSAvIHVuaXRzUGVyRGVncmVlLCAxIC8gdW5pdHNQZXJNZXRlcl1cbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2xvYmVWaWV3cG9ydCBleHRlbmRzIFZpZXdwb3J0IHtcbiAgY29uc3RydWN0b3Iob3B0cyA9IHt9KSB7XG4gICAgY29uc3Qge1xuICAgICAgbGF0aXR1ZGUgPSAwLFxuICAgICAgbG9uZ2l0dWRlID0gMCxcbiAgICAgIHpvb20gPSAwLFxuICAgICAgbmVhclpNdWx0aXBsaWVyID0gMC4xLFxuICAgICAgZmFyWk11bHRpcGxpZXIgPSAyLFxuICAgICAgcmVzb2x1dGlvbiA9IDEwXG4gICAgfSA9IG9wdHM7XG4gICAgbGV0IHtcbiAgICAgIGhlaWdodCxcbiAgICAgIGFsdGl0dWRlID0gMS41XG4gICAgfSA9IG9wdHM7XG4gICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDE7XG4gICAgYWx0aXR1ZGUgPSBNYXRoLm1heCgwLjc1LCBhbHRpdHVkZSk7XG4gICAgY29uc3Qgdmlld01hdHJpeCA9IG5ldyBNYXRyaXg0KCkubG9va0F0KHtcbiAgICAgIGV5ZTogWzAsIC1hbHRpdHVkZSwgMF0sXG4gICAgICB1cDogWzAsIDAsIDFdXG4gICAgfSk7XG4gICAgY29uc3Qgc2NhbGUgPSBNYXRoLnBvdygyLCB6b29tKTtcbiAgICB2aWV3TWF0cml4LnJvdGF0ZVgobGF0aXR1ZGUgKiBERUdSRUVTX1RPX1JBRElBTlMpO1xuICAgIHZpZXdNYXRyaXgucm90YXRlWigtbG9uZ2l0dWRlICogREVHUkVFU19UT19SQURJQU5TKTtcbiAgICB2aWV3TWF0cml4LnNjYWxlKHNjYWxlIC8gaGVpZ2h0KTtcbiAgICBjb25zdCBoYWxmRm92ID0gTWF0aC5hdGFuKDAuNSAvIGFsdGl0dWRlKTtcbiAgICBjb25zdCByZWxhdGl2ZVNjYWxlID0gR0xPQkVfUkFESVVTICogMiAqIHNjYWxlIC8gaGVpZ2h0O1xuICAgIHN1cGVyKHsgLi4ub3B0cyxcbiAgICAgIGhlaWdodCxcbiAgICAgIHZpZXdNYXRyaXgsXG4gICAgICBsb25naXR1ZGUsXG4gICAgICBsYXRpdHVkZSxcbiAgICAgIHpvb20sXG4gICAgICBkaXN0YW5jZVNjYWxlczogZ2V0RGlzdGFuY2VTY2FsZXMoKSxcbiAgICAgIGZvdnlSYWRpYW5zOiBoYWxmRm92ICogMixcbiAgICAgIGZvY2FsRGlzdGFuY2U6IGFsdGl0dWRlLFxuICAgICAgbmVhcjogbmVhclpNdWx0aXBsaWVyLFxuICAgICAgZmFyOiBNYXRoLm1pbigyLCAxIC8gcmVsYXRpdmVTY2FsZSArIDEpICogYWx0aXR1ZGUgKiBmYXJaTXVsdGlwbGllclxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibG9uZ2l0dWRlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXRpdHVkZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVzb2x1dGlvblwiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5sYXRpdHVkZSA9IGxhdGl0dWRlO1xuICAgIHRoaXMubG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gIH1cblxuICBnZXQgcHJvamVjdGlvbk1vZGUoKSB7XG4gICAgcmV0dXJuIFBST0pFQ1RJT05fTU9ERS5HTE9CRTtcbiAgfVxuXG4gIGdldERpc3RhbmNlU2NhbGVzKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3RhbmNlU2NhbGVzO1xuICB9XG5cbiAgZ2V0Qm91bmRzKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHVucHJvamVjdE9wdGlvbiA9IHtcbiAgICAgIHRhcmdldFo6IG9wdGlvbnMueiB8fCAwXG4gICAgfTtcbiAgICBjb25zdCBsZWZ0ID0gdGhpcy51bnByb2plY3QoWzAsIHRoaXMuaGVpZ2h0IC8gMl0sIHVucHJvamVjdE9wdGlvbik7XG4gICAgY29uc3QgdG9wID0gdGhpcy51bnByb2plY3QoW3RoaXMud2lkdGggLyAyLCAwXSwgdW5wcm9qZWN0T3B0aW9uKTtcbiAgICBjb25zdCByaWdodCA9IHRoaXMudW5wcm9qZWN0KFt0aGlzLndpZHRoLCB0aGlzLmhlaWdodCAvIDJdLCB1bnByb2plY3RPcHRpb24pO1xuICAgIGNvbnN0IGJvdHRvbSA9IHRoaXMudW5wcm9qZWN0KFt0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHRdLCB1bnByb2plY3RPcHRpb24pO1xuICAgIGlmIChyaWdodFswXSA8IHRoaXMubG9uZ2l0dWRlKSByaWdodFswXSArPSAzNjA7XG4gICAgaWYgKGxlZnRbMF0gPiB0aGlzLmxvbmdpdHVkZSkgbGVmdFswXSAtPSAzNjA7XG4gICAgcmV0dXJuIFtNYXRoLm1pbihsZWZ0WzBdLCByaWdodFswXSwgdG9wWzBdLCBib3R0b21bMF0pLCBNYXRoLm1pbihsZWZ0WzFdLCByaWdodFsxXSwgdG9wWzFdLCBib3R0b21bMV0pLCBNYXRoLm1heChsZWZ0WzBdLCByaWdodFswXSwgdG9wWzBdLCBib3R0b21bMF0pLCBNYXRoLm1heChsZWZ0WzFdLCByaWdodFsxXSwgdG9wWzFdLCBib3R0b21bMV0pXTtcbiAgfVxuXG4gIHVucHJvamVjdCh4eXosIHtcbiAgICB0b3BMZWZ0ID0gdHJ1ZSxcbiAgICB0YXJnZXRaXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IFt4LCB5LCB6XSA9IHh5ejtcbiAgICBjb25zdCB5MiA9IHRvcExlZnQgPyB5IDogdGhpcy5oZWlnaHQgLSB5O1xuICAgIGNvbnN0IHtcbiAgICAgIHBpeGVsVW5wcm9qZWN0aW9uTWF0cml4XG4gICAgfSA9IHRoaXM7XG4gICAgbGV0IGNvb3JkO1xuXG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZSh6KSkge1xuICAgICAgY29vcmQgPSB0cmFuc2Zvcm1WZWN0b3IocGl4ZWxVbnByb2plY3Rpb25NYXRyaXgsIFt4LCB5MiwgeiwgMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjb29yZDAgPSB0cmFuc2Zvcm1WZWN0b3IocGl4ZWxVbnByb2plY3Rpb25NYXRyaXgsIFt4LCB5MiwgLTEsIDFdKTtcbiAgICAgIGNvbnN0IGNvb3JkMSA9IHRyYW5zZm9ybVZlY3RvcihwaXhlbFVucHJvamVjdGlvbk1hdHJpeCwgW3gsIHkyLCAxLCAxXSk7XG4gICAgICBjb25zdCBsdCA9ICgodGFyZ2V0WiB8fCAwKSAvIEVBUlRIX1JBRElVUyArIDEpICogR0xPQkVfUkFESVVTO1xuICAgICAgY29uc3QgbFNxciA9IHZlYzMuc3FyTGVuKHZlYzMuc3ViKFtdLCBjb29yZDAsIGNvb3JkMSkpO1xuICAgICAgY29uc3QgbDBTcXIgPSB2ZWMzLnNxckxlbihjb29yZDApO1xuICAgICAgY29uc3QgbDFTcXIgPSB2ZWMzLnNxckxlbihjb29yZDEpO1xuICAgICAgY29uc3Qgc1NxciA9ICg0ICogbDBTcXIgKiBsMVNxciAtIChsU3FyIC0gbDBTcXIgLSBsMVNxcikgKiogMikgLyAxNjtcbiAgICAgIGNvbnN0IGRTcXIgPSA0ICogc1NxciAvIGxTcXI7XG4gICAgICBjb25zdCByMCA9IE1hdGguc3FydChsMFNxciAtIGRTcXIpO1xuICAgICAgY29uc3QgZHIgPSBNYXRoLnNxcnQoTWF0aC5tYXgoMCwgbHQgKiBsdCAtIGRTcXIpKTtcbiAgICAgIGNvbnN0IHQgPSAocjAgLSBkcikgLyBNYXRoLnNxcnQobFNxcik7XG4gICAgICBjb29yZCA9IHZlYzMubGVycChbXSwgY29vcmQwLCBjb29yZDEsIHQpO1xuICAgIH1cblxuICAgIGNvbnN0IFtYLCBZLCBaXSA9IHRoaXMudW5wcm9qZWN0UG9zaXRpb24oY29vcmQpO1xuXG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZSh6KSkge1xuICAgICAgcmV0dXJuIFtYLCBZLCBaXTtcbiAgICB9XG5cbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHRhcmdldFopID8gW1gsIFksIHRhcmdldFpdIDogW1gsIFldO1xuICB9XG5cbiAgcHJvamVjdFBvc2l0aW9uKHh5eikge1xuICAgIGNvbnN0IFtsbmcsIGxhdCwgWiA9IDBdID0geHl6O1xuICAgIGNvbnN0IGxhbWJkYSA9IGxuZyAqIERFR1JFRVNfVE9fUkFESUFOUztcbiAgICBjb25zdCBwaGkgPSBsYXQgKiBERUdSRUVTX1RPX1JBRElBTlM7XG4gICAgY29uc3QgY29zUGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICBjb25zdCBEID0gKFogLyBFQVJUSF9SQURJVVMgKyAxKSAqIEdMT0JFX1JBRElVUztcbiAgICByZXR1cm4gW01hdGguc2luKGxhbWJkYSkgKiBjb3NQaGkgKiBELCAtTWF0aC5jb3MobGFtYmRhKSAqIGNvc1BoaSAqIEQsIE1hdGguc2luKHBoaSkgKiBEXTtcbiAgfVxuXG4gIHVucHJvamVjdFBvc2l0aW9uKHh5eikge1xuICAgIGNvbnN0IFt4LCB5LCB6XSA9IHh5ejtcbiAgICBjb25zdCBEID0gdmVjMy5sZW4oeHl6KTtcbiAgICBjb25zdCBwaGkgPSBNYXRoLmFzaW4oeiAvIEQpO1xuICAgIGNvbnN0IGxhbWJkYSA9IE1hdGguYXRhbjIoeCwgLXkpO1xuICAgIGNvbnN0IGxuZyA9IGxhbWJkYSAqIFJBRElBTlNfVE9fREVHUkVFUztcbiAgICBjb25zdCBsYXQgPSBwaGkgKiBSQURJQU5TX1RPX0RFR1JFRVM7XG4gICAgY29uc3QgWiA9IChEIC8gR0xPQkVfUkFESVVTIC0gMSkgKiBFQVJUSF9SQURJVVM7XG4gICAgcmV0dXJuIFtsbmcsIGxhdCwgWl07XG4gIH1cblxuICBwcm9qZWN0RmxhdCh4eXopIHtcbiAgICByZXR1cm4geHl6O1xuICB9XG5cbiAgdW5wcm9qZWN0RmxhdCh4eXopIHtcbiAgICByZXR1cm4geHl6O1xuICB9XG5cbiAgcGFuQnlQb3NpdGlvbihjb29yZHMsIHBpeGVsKSB7XG4gICAgY29uc3QgZnJvbVBvc2l0aW9uID0gdGhpcy51bnByb2plY3QocGl4ZWwpO1xuICAgIHJldHVybiB7XG4gICAgICBsb25naXR1ZGU6IGNvb3Jkc1swXSAtIGZyb21Qb3NpdGlvblswXSArIHRoaXMubG9uZ2l0dWRlLFxuICAgICAgbGF0aXR1ZGU6IGNvb3Jkc1sxXSAtIGZyb21Qb3NpdGlvblsxXSArIHRoaXMubGF0aXR1ZGVcbiAgICB9O1xuICB9XG5cbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtVmVjdG9yKG1hdHJpeCwgdmVjdG9yKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHZlYzQudHJhbnNmb3JtTWF0NChbXSwgdmVjdG9yLCBtYXRyaXgpO1xuICB2ZWM0LnNjYWxlKHJlc3VsdCwgcmVzdWx0LCAxIC8gcmVzdWx0WzNdKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JlLXZpZXdwb3J0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///73131\n')},7013:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ Viewport; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82482);\n/* harmony import */ var _utils_log__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(80744);\n/* harmony import */ var _utils_math_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(75126);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85451);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14034);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(43855);\n/* harmony import */ var gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(85975);\n/* harmony import */ var _math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78866);\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24088);\n\n\n\n\n\n\n\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = (0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__/* .createMat4 */ .bS)();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\n\nfunction createProjectionMatrix({\n  width,\n  height,\n  orthographic,\n  fovyRadians,\n  focalDistance,\n  padding,\n  near,\n  far\n}) {\n  const aspect = width / height;\n  const matrix = orthographic ? new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z().orthographic({\n    fovy: fovyRadians,\n    aspect,\n    focalDistance,\n    near,\n    far\n  }) : new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z().perspective({\n    fovy: fovyRadians,\n    aspect,\n    near,\n    far\n  });\n\n  if (padding) {\n    const {\n      left = 0,\n      right = 0,\n      top = 0,\n      bottom = 0\n    } = padding;\n    const offsetX = (0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* .clamp */ .uZ)((left + width - right) / 2, 0, width) - width / 2;\n    const offsetY = (0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* .clamp */ .uZ)((top + height - bottom) / 2, 0, height) - height / 2;\n    matrix[8] -= offsetX * 2 / width;\n    matrix[9] += offsetY * 2 / height;\n  }\n\n  return matrix;\n}\n\nclass Viewport {\n  constructor(opts = {}) {\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "id", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "x", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "y", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "width", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "height", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "padding", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "isGeospatial", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "zoom", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "focalDistance", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "position", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "modelMatrix", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "distanceScales", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "scale", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "center", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "cameraPosition", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "projectionMatrix", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "viewMatrix", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "viewMatrixUncentered", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "viewMatrixInverse", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "viewProjectionMatrix", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "pixelProjectionMatrix", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "pixelUnprojectionMatrix", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "resolution", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "_frustumPlanes", {});\n\n    this.id = opts.id || this.constructor.displayName || \'viewport\';\n    this.x = opts.x || 0;\n    this.y = opts.y || 0;\n    this.width = opts.width || 1;\n    this.height = opts.height || 1;\n    this.zoom = opts.zoom || 0;\n    this.padding = opts.padding;\n    this.distanceScales = opts.distanceScales || DEFAULT_DISTANCE_SCALES;\n    this.focalDistance = opts.focalDistance || 1;\n    this.position = opts.position || ZERO_VECTOR;\n    this.modelMatrix = opts.modelMatrix || null;\n    const {\n      longitude,\n      latitude\n    } = opts;\n    this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n\n    this._initProps(opts);\n\n    this._initMatrices(opts);\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  get subViewports() {\n    return null;\n  }\n\n  get metersPerPixel() {\n    return this.distanceScales.metersPerUnit[2] / this.scale;\n  }\n\n  get projectionMode() {\n    if (this.isGeospatial) {\n      return this.zoom < 12 ? _lib_constants__WEBPACK_IMPORTED_MODULE_5__/* .PROJECTION_MODE.WEB_MERCATOR */ .zG.WEB_MERCATOR : _lib_constants__WEBPACK_IMPORTED_MODULE_5__/* .PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET */ .zG.WEB_MERCATOR_AUTO_OFFSET;\n    }\n\n    return _lib_constants__WEBPACK_IMPORTED_MODULE_5__/* .PROJECTION_MODE.IDENTITY */ .zG.IDENTITY;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof Viewport)) {\n      return false;\n    }\n\n    if (this === viewport) {\n      return true;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && (0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* .equals */ .fS)(viewport.projectionMatrix, this.projectionMatrix) && (0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* .equals */ .fS)(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .worldToPixels */ .aW)(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .pixelsToWorld */ .CT)([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(xyz) {\n    if (this.isGeospatial) {\n      const result = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .lngLatToWorld */ .w5)(xyz);\n      result[1] = (0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* .clamp */ .uZ)(result[1], -318, 830);\n      return result;\n    }\n\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    if (this.isGeospatial) {\n      return (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .worldToLngLat */ .es)(xyz);\n    }\n\n    return xyz;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const topLeft = this.unproject([0, 0], unprojectOption);\n    const topRight = this.unproject([this.width, 0], unprojectOption);\n    const bottomLeft = this.unproject([0, this.height], unprojectOption);\n    const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n    return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n  }\n\n  getDistanceScales(coordinateOrigin) {\n    if (coordinateOrigin) {\n      return (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .getDistanceScales */ .ro)({\n        longitude: coordinateOrigin[0],\n        latitude: coordinateOrigin[1],\n        highPrecision: true\n      });\n    }\n\n    return this.distanceScales;\n  }\n\n  containsPixel({\n    x,\n    y,\n    width = 1,\n    height = 1\n  }) {\n    return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n  }\n\n  getFrustumPlanes() {\n    if (this._frustumPlanes.near) {\n      return this._frustumPlanes;\n    }\n\n    Object.assign(this._frustumPlanes, (0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__/* .getFrustumPlanes */ .Du)(this.viewProjectionMatrix));\n    return this._frustumPlanes;\n  }\n\n  panByPosition(coords, pixel) {\n    return null;\n  }\n\n  _initProps(opts) {\n    const longitude = opts.longitude;\n    const latitude = opts.latitude;\n\n    if (this.isGeospatial) {\n      if (!Number.isFinite(opts.zoom)) {\n        this.zoom = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .getMeterZoom */ .Bf)({\n          latitude\n        }) + Math.log2(this.focalDistance);\n      }\n\n      this.distanceScales = opts.distanceScales || (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .getDistanceScales */ .ro)({\n        latitude,\n        longitude\n      });\n    }\n\n    const scale = Math.pow(2, this.zoom);\n    this.scale = scale;\n    const {\n      position,\n      modelMatrix\n    } = opts;\n    let meterOffset = ZERO_VECTOR;\n\n    if (position) {\n      meterOffset = modelMatrix ? new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(modelMatrix).transformAsVector(position, []) : position;\n    }\n\n    if (this.isGeospatial) {\n      const center = this.projectPosition([longitude, latitude, 0]);\n      this.center = new _math_gl_core__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(meterOffset).scale(this.distanceScales.unitsPerMeter).add(center);\n    } else {\n      this.center = this.projectPosition(meterOffset);\n    }\n  }\n\n  _initMatrices(opts) {\n    const {\n      viewMatrix = IDENTITY,\n      projectionMatrix = null,\n      orthographic = false,\n      fovyRadians,\n      fovy = 75,\n      near = 0.1,\n      far = 1000,\n      padding = null,\n      focalDistance = 1\n    } = opts;\n    this.viewMatrixUncentered = viewMatrix;\n    this.viewMatrix = new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z().multiplyRight(viewMatrix).translate(new _math_gl_core__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(this.center).negate());\n    this.projectionMatrix = projectionMatrix || createProjectionMatrix({\n      width: this.width,\n      height: this.height,\n      orthographic,\n      fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n      focalDistance,\n      padding,\n      near,\n      far\n    });\n    const vpm = (0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__/* .createMat4 */ .bS)();\n    gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__/* .multiply */ .Jp(vpm, vpm, this.projectionMatrix);\n    gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__/* .multiply */ .Jp(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    this.viewMatrixInverse = gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__/* .invert */ .U_([], this.viewMatrix) || this.viewMatrix;\n    this.cameraPosition = (0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__/* .getCameraPosition */ .Xt)(this.viewMatrixInverse);\n    const viewportMatrix = (0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__/* .createMat4 */ .bS)();\n    const pixelProjectionMatrix = (0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__/* .createMat4 */ .bS)();\n    gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__/* .scale */ .bA(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n    gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__/* .translate */ .Iu(viewportMatrix, viewportMatrix, [1, -1, 0]);\n    gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__/* .multiply */ .Jp(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n    this.pixelProjectionMatrix = pixelProjectionMatrix;\n    this.pixelUnprojectionMatrix = gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__/* .invert */ .U_((0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__/* .createMat4 */ .bS)(), this.pixelProjectionMatrix);\n\n    if (!this.pixelUnprojectionMatrix) {\n      _utils_log__WEBPACK_IMPORTED_MODULE_8__/* ["default"].warn */ .Z.warn(\'Pixel project matrix not invertible\')();\n    }\n  }\n\n}\n\n(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(Viewport, "displayName", \'Viewport\');\n//# sourceMappingURL=viewport.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzAxMy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBd0U7QUFDekM7QUFDdUQ7QUFDdEI7QUFDekI7QUFDNkY7QUFDakY7QUFDbkQ7QUFDQSxpQkFBaUIsdUVBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxvQ0FBb0MsOERBQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsUUFBUSw4REFBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLG9CQUFvQiw4REFBSztBQUN6QixvQkFBb0IsOERBQUs7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRWU7QUFDZix1QkFBdUI7QUFDdkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZTs7QUFFbkIsSUFBSSw4RkFBZSwyQkFBMkI7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw4QkFBOEIsK0ZBQTRCLEdBQUcsdUhBQXdDO0FBQ3JHOztBQUVBLFdBQVcsdUZBQXdCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxnSEFBZ0gsK0RBQU0sc0RBQXNELCtEQUFNO0FBQ2xMOztBQUVBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBLGtCQUFrQiw4RUFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsOEVBQWE7QUFDL0I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsOEVBQWE7QUFDbEMsa0JBQWtCLDhEQUFLO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSw4RUFBYTtBQUMxQjs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsa0ZBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1Q0FBdUMsNkVBQWdCO0FBQ3ZEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLDZFQUFZO0FBQ2hDO0FBQ0EsU0FBUztBQUNUOztBQUVBLG1EQUFtRCxrRkFBaUI7QUFDcEU7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0Esc0NBQXNDLDhEQUFPO0FBQzdDOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQU87QUFDL0IsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsMEJBQTBCLDhEQUFPLDJDQUEyQyw4REFBTztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCLHVFQUFVO0FBQzFCLElBQUksOERBQWE7QUFDakIsSUFBSSw4REFBYTtBQUNqQjtBQUNBLDZCQUE2Qiw0REFBVztBQUN4QywwQkFBMEIsOEVBQWlCO0FBQzNDLDJCQUEyQix1RUFBVTtBQUNyQyxrQ0FBa0MsdUVBQVU7QUFDNUMsSUFBSSwyREFBVTtBQUNkLElBQUksK0RBQWM7QUFDbEIsSUFBSSw4REFBYTtBQUNqQjtBQUNBLG1DQUFtQyw0REFBVyxDQUFDLHVFQUFVOztBQUV6RDtBQUNBLE1BQU0scUVBQVE7QUFDZDtBQUNBOztBQUVBOztBQUVBLDhGQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vdmlld3BvcnRzL3ZpZXdwb3J0LmpzP2E5ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBsb2cgZnJvbSAnLi4vdXRpbHMvbG9nJztcbmltcG9ydCB7IGNyZWF0ZU1hdDQsIGdldENhbWVyYVBvc2l0aW9uLCBnZXRGcnVzdHVtUGxhbmVzIH0gZnJvbSAnLi4vdXRpbHMvbWF0aC11dGlscyc7XG5pbXBvcnQgeyBNYXRyaXg0LCBWZWN0b3IzLCBlcXVhbHMsIGNsYW1wIH0gZnJvbSAnQG1hdGguZ2wvY29yZSc7XG5pbXBvcnQgKiBhcyBtYXQ0IGZyb20gJ2dsLW1hdHJpeC9tYXQ0JztcbmltcG9ydCB7IGdldERpc3RhbmNlU2NhbGVzLCBnZXRNZXRlclpvb20sIGxuZ0xhdFRvV29ybGQsIHdvcmxkVG9MbmdMYXQsIHdvcmxkVG9QaXhlbHMsIHBpeGVsc1RvV29ybGQgfSBmcm9tICdAbWF0aC5nbC93ZWItbWVyY2F0b3InO1xuaW1wb3J0IHsgUFJPSkVDVElPTl9NT0RFIH0gZnJvbSAnLi4vbGliL2NvbnN0YW50cyc7XG5jb25zdCBERUdSRUVTX1RPX1JBRElBTlMgPSBNYXRoLlBJIC8gMTgwO1xuY29uc3QgSURFTlRJVFkgPSBjcmVhdGVNYXQ0KCk7XG5jb25zdCBaRVJPX1ZFQ1RPUiA9IFswLCAwLCAwXTtcbmNvbnN0IERFRkFVTFRfRElTVEFOQ0VfU0NBTEVTID0ge1xuICB1bml0c1Blck1ldGVyOiBbMSwgMSwgMV0sXG4gIG1ldGVyc1BlclVuaXQ6IFsxLCAxLCAxXVxufTtcblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbk1hdHJpeCh7XG4gIHdpZHRoLFxuICBoZWlnaHQsXG4gIG9ydGhvZ3JhcGhpYyxcbiAgZm92eVJhZGlhbnMsXG4gIGZvY2FsRGlzdGFuY2UsXG4gIHBhZGRpbmcsXG4gIG5lYXIsXG4gIGZhclxufSkge1xuICBjb25zdCBhc3BlY3QgPSB3aWR0aCAvIGhlaWdodDtcbiAgY29uc3QgbWF0cml4ID0gb3J0aG9ncmFwaGljID8gbmV3IE1hdHJpeDQoKS5vcnRob2dyYXBoaWMoe1xuICAgIGZvdnk6IGZvdnlSYWRpYW5zLFxuICAgIGFzcGVjdCxcbiAgICBmb2NhbERpc3RhbmNlLFxuICAgIG5lYXIsXG4gICAgZmFyXG4gIH0pIDogbmV3IE1hdHJpeDQoKS5wZXJzcGVjdGl2ZSh7XG4gICAgZm92eTogZm92eVJhZGlhbnMsXG4gICAgYXNwZWN0LFxuICAgIG5lYXIsXG4gICAgZmFyXG4gIH0pO1xuXG4gIGlmIChwYWRkaW5nKSB7XG4gICAgY29uc3Qge1xuICAgICAgbGVmdCA9IDAsXG4gICAgICByaWdodCA9IDAsXG4gICAgICB0b3AgPSAwLFxuICAgICAgYm90dG9tID0gMFxuICAgIH0gPSBwYWRkaW5nO1xuICAgIGNvbnN0IG9mZnNldFggPSBjbGFtcCgobGVmdCArIHdpZHRoIC0gcmlnaHQpIC8gMiwgMCwgd2lkdGgpIC0gd2lkdGggLyAyO1xuICAgIGNvbnN0IG9mZnNldFkgPSBjbGFtcCgodG9wICsgaGVpZ2h0IC0gYm90dG9tKSAvIDIsIDAsIGhlaWdodCkgLSBoZWlnaHQgLyAyO1xuICAgIG1hdHJpeFs4XSAtPSBvZmZzZXRYICogMiAvIHdpZHRoO1xuICAgIG1hdHJpeFs5XSArPSBvZmZzZXRZICogMiAvIGhlaWdodDtcbiAgfVxuXG4gIHJldHVybiBtYXRyaXg7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXdwb3J0IHtcbiAgY29uc3RydWN0b3Iob3B0cyA9IHt9KSB7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInlcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndpZHRoXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWlnaHRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhZGRpbmdcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzR2Vvc3BhdGlhbFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiem9vbVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZm9jYWxEaXN0YW5jZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsTWF0cml4XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXN0YW5jZVNjYWxlc1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic2NhbGVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNlbnRlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FtZXJhUG9zaXRpb25cIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByb2plY3Rpb25NYXRyaXhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZpZXdNYXRyaXhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZpZXdNYXRyaXhVbmNlbnRlcmVkXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2aWV3TWF0cml4SW52ZXJzZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmlld1Byb2plY3Rpb25NYXRyaXhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBpeGVsUHJvamVjdGlvbk1hdHJpeFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicGl4ZWxVbnByb2plY3Rpb25NYXRyaXhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlc29sdXRpb25cIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9mcnVzdHVtUGxhbmVzXCIsIHt9KTtcblxuICAgIHRoaXMuaWQgPSBvcHRzLmlkIHx8IHRoaXMuY29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ3ZpZXdwb3J0JztcbiAgICB0aGlzLnggPSBvcHRzLnggfHwgMDtcbiAgICB0aGlzLnkgPSBvcHRzLnkgfHwgMDtcbiAgICB0aGlzLndpZHRoID0gb3B0cy53aWR0aCB8fCAxO1xuICAgIHRoaXMuaGVpZ2h0ID0gb3B0cy5oZWlnaHQgfHwgMTtcbiAgICB0aGlzLnpvb20gPSBvcHRzLnpvb20gfHwgMDtcbiAgICB0aGlzLnBhZGRpbmcgPSBvcHRzLnBhZGRpbmc7XG4gICAgdGhpcy5kaXN0YW5jZVNjYWxlcyA9IG9wdHMuZGlzdGFuY2VTY2FsZXMgfHwgREVGQVVMVF9ESVNUQU5DRV9TQ0FMRVM7XG4gICAgdGhpcy5mb2NhbERpc3RhbmNlID0gb3B0cy5mb2NhbERpc3RhbmNlIHx8IDE7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG9wdHMucG9zaXRpb24gfHwgWkVST19WRUNUT1I7XG4gICAgdGhpcy5tb2RlbE1hdHJpeCA9IG9wdHMubW9kZWxNYXRyaXggfHwgbnVsbDtcbiAgICBjb25zdCB7XG4gICAgICBsb25naXR1ZGUsXG4gICAgICBsYXRpdHVkZVxuICAgIH0gPSBvcHRzO1xuICAgIHRoaXMuaXNHZW9zcGF0aWFsID0gTnVtYmVyLmlzRmluaXRlKGxhdGl0dWRlKSAmJiBOdW1iZXIuaXNGaW5pdGUobG9uZ2l0dWRlKTtcblxuICAgIHRoaXMuX2luaXRQcm9wcyhvcHRzKTtcblxuICAgIHRoaXMuX2luaXRNYXRyaWNlcyhvcHRzKTtcblxuICAgIHRoaXMuZXF1YWxzID0gdGhpcy5lcXVhbHMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnByb2plY3QgPSB0aGlzLnByb2plY3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVucHJvamVjdCA9IHRoaXMudW5wcm9qZWN0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5wcm9qZWN0UG9zaXRpb24gPSB0aGlzLnByb2plY3RQb3NpdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMudW5wcm9qZWN0UG9zaXRpb24gPSB0aGlzLnVucHJvamVjdFBvc2l0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5wcm9qZWN0RmxhdCA9IHRoaXMucHJvamVjdEZsYXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVucHJvamVjdEZsYXQgPSB0aGlzLnVucHJvamVjdEZsYXQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGdldCBzdWJWaWV3cG9ydHMoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXQgbWV0ZXJzUGVyUGl4ZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzdGFuY2VTY2FsZXMubWV0ZXJzUGVyVW5pdFsyXSAvIHRoaXMuc2NhbGU7XG4gIH1cblxuICBnZXQgcHJvamVjdGlvbk1vZGUoKSB7XG4gICAgaWYgKHRoaXMuaXNHZW9zcGF0aWFsKSB7XG4gICAgICByZXR1cm4gdGhpcy56b29tIDwgMTIgPyBQUk9KRUNUSU9OX01PREUuV0VCX01FUkNBVE9SIDogUFJPSkVDVElPTl9NT0RFLldFQl9NRVJDQVRPUl9BVVRPX09GRlNFVDtcbiAgICB9XG5cbiAgICByZXR1cm4gUFJPSkVDVElPTl9NT0RFLklERU5USVRZO1xuICB9XG5cbiAgZXF1YWxzKHZpZXdwb3J0KSB7XG4gICAgaWYgKCEodmlld3BvcnQgaW5zdGFuY2VvZiBWaWV3cG9ydCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcyA9PT0gdmlld3BvcnQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB2aWV3cG9ydC53aWR0aCA9PT0gdGhpcy53aWR0aCAmJiB2aWV3cG9ydC5oZWlnaHQgPT09IHRoaXMuaGVpZ2h0ICYmIHZpZXdwb3J0LnNjYWxlID09PSB0aGlzLnNjYWxlICYmIGVxdWFscyh2aWV3cG9ydC5wcm9qZWN0aW9uTWF0cml4LCB0aGlzLnByb2plY3Rpb25NYXRyaXgpICYmIGVxdWFscyh2aWV3cG9ydC52aWV3TWF0cml4LCB0aGlzLnZpZXdNYXRyaXgpO1xuICB9XG5cbiAgcHJvamVjdCh4eXosIHtcbiAgICB0b3BMZWZ0ID0gdHJ1ZVxuICB9ID0ge30pIHtcbiAgICBjb25zdCB3b3JsZFBvc2l0aW9uID0gdGhpcy5wcm9qZWN0UG9zaXRpb24oeHl6KTtcbiAgICBjb25zdCBjb29yZCA9IHdvcmxkVG9QaXhlbHMod29ybGRQb3NpdGlvbiwgdGhpcy5waXhlbFByb2plY3Rpb25NYXRyaXgpO1xuICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkO1xuICAgIGNvbnN0IHkyID0gdG9wTGVmdCA/IHkgOiB0aGlzLmhlaWdodCAtIHk7XG4gICAgcmV0dXJuIHh5ei5sZW5ndGggPT09IDIgPyBbeCwgeTJdIDogW3gsIHkyLCBjb29yZFsyXV07XG4gIH1cblxuICB1bnByb2plY3QoeHl6LCB7XG4gICAgdG9wTGVmdCA9IHRydWUsXG4gICAgdGFyZ2V0WlxuICB9ID0ge30pIHtcbiAgICBjb25zdCBbeCwgeSwgel0gPSB4eXo7XG4gICAgY29uc3QgeTIgPSB0b3BMZWZ0ID8geSA6IHRoaXMuaGVpZ2h0IC0geTtcbiAgICBjb25zdCB0YXJnZXRaV29ybGQgPSB0YXJnZXRaICYmIHRhcmdldFogKiB0aGlzLmRpc3RhbmNlU2NhbGVzLnVuaXRzUGVyTWV0ZXJbMl07XG4gICAgY29uc3QgY29vcmQgPSBwaXhlbHNUb1dvcmxkKFt4LCB5Miwgel0sIHRoaXMucGl4ZWxVbnByb2plY3Rpb25NYXRyaXgsIHRhcmdldFpXb3JsZCk7XG4gICAgY29uc3QgW1gsIFksIFpdID0gdGhpcy51bnByb2plY3RQb3NpdGlvbihjb29yZCk7XG5cbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHopKSB7XG4gICAgICByZXR1cm4gW1gsIFksIFpdO1xuICAgIH1cblxuICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUodGFyZ2V0WikgPyBbWCwgWSwgdGFyZ2V0Wl0gOiBbWCwgWV07XG4gIH1cblxuICBwcm9qZWN0UG9zaXRpb24oeHl6KSB7XG4gICAgY29uc3QgW1gsIFldID0gdGhpcy5wcm9qZWN0RmxhdCh4eXopO1xuICAgIGNvbnN0IFogPSAoeHl6WzJdIHx8IDApICogdGhpcy5kaXN0YW5jZVNjYWxlcy51bml0c1Blck1ldGVyWzJdO1xuICAgIHJldHVybiBbWCwgWSwgWl07XG4gIH1cblxuICB1bnByb2plY3RQb3NpdGlvbih4eXopIHtcbiAgICBjb25zdCBbWCwgWV0gPSB0aGlzLnVucHJvamVjdEZsYXQoeHl6KTtcbiAgICBjb25zdCBaID0gKHh5elsyXSB8fCAwKSAqIHRoaXMuZGlzdGFuY2VTY2FsZXMubWV0ZXJzUGVyVW5pdFsyXTtcbiAgICByZXR1cm4gW1gsIFksIFpdO1xuICB9XG5cbiAgcHJvamVjdEZsYXQoeHl6KSB7XG4gICAgaWYgKHRoaXMuaXNHZW9zcGF0aWFsKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBsbmdMYXRUb1dvcmxkKHh5eik7XG4gICAgICByZXN1bHRbMV0gPSBjbGFtcChyZXN1bHRbMV0sIC0zMTgsIDgzMCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiB4eXo7XG4gIH1cblxuICB1bnByb2plY3RGbGF0KHh5eikge1xuICAgIGlmICh0aGlzLmlzR2Vvc3BhdGlhbCkge1xuICAgICAgcmV0dXJuIHdvcmxkVG9MbmdMYXQoeHl6KTtcbiAgICB9XG5cbiAgICByZXR1cm4geHl6O1xuICB9XG5cbiAgZ2V0Qm91bmRzKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHVucHJvamVjdE9wdGlvbiA9IHtcbiAgICAgIHRhcmdldFo6IG9wdGlvbnMueiB8fCAwXG4gICAgfTtcbiAgICBjb25zdCB0b3BMZWZ0ID0gdGhpcy51bnByb2plY3QoWzAsIDBdLCB1bnByb2plY3RPcHRpb24pO1xuICAgIGNvbnN0IHRvcFJpZ2h0ID0gdGhpcy51bnByb2plY3QoW3RoaXMud2lkdGgsIDBdLCB1bnByb2plY3RPcHRpb24pO1xuICAgIGNvbnN0IGJvdHRvbUxlZnQgPSB0aGlzLnVucHJvamVjdChbMCwgdGhpcy5oZWlnaHRdLCB1bnByb2plY3RPcHRpb24pO1xuICAgIGNvbnN0IGJvdHRvbVJpZ2h0ID0gdGhpcy51bnByb2plY3QoW3RoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XSwgdW5wcm9qZWN0T3B0aW9uKTtcbiAgICByZXR1cm4gW01hdGgubWluKHRvcExlZnRbMF0sIHRvcFJpZ2h0WzBdLCBib3R0b21MZWZ0WzBdLCBib3R0b21SaWdodFswXSksIE1hdGgubWluKHRvcExlZnRbMV0sIHRvcFJpZ2h0WzFdLCBib3R0b21MZWZ0WzFdLCBib3R0b21SaWdodFsxXSksIE1hdGgubWF4KHRvcExlZnRbMF0sIHRvcFJpZ2h0WzBdLCBib3R0b21MZWZ0WzBdLCBib3R0b21SaWdodFswXSksIE1hdGgubWF4KHRvcExlZnRbMV0sIHRvcFJpZ2h0WzFdLCBib3R0b21MZWZ0WzFdLCBib3R0b21SaWdodFsxXSldO1xuICB9XG5cbiAgZ2V0RGlzdGFuY2VTY2FsZXMoY29vcmRpbmF0ZU9yaWdpbikge1xuICAgIGlmIChjb29yZGluYXRlT3JpZ2luKSB7XG4gICAgICByZXR1cm4gZ2V0RGlzdGFuY2VTY2FsZXMoe1xuICAgICAgICBsb25naXR1ZGU6IGNvb3JkaW5hdGVPcmlnaW5bMF0sXG4gICAgICAgIGxhdGl0dWRlOiBjb29yZGluYXRlT3JpZ2luWzFdLFxuICAgICAgICBoaWdoUHJlY2lzaW9uOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kaXN0YW5jZVNjYWxlcztcbiAgfVxuXG4gIGNvbnRhaW5zUGl4ZWwoe1xuICAgIHgsXG4gICAgeSxcbiAgICB3aWR0aCA9IDEsXG4gICAgaGVpZ2h0ID0gMVxuICB9KSB7XG4gICAgcmV0dXJuIHggPCB0aGlzLnggKyB0aGlzLndpZHRoICYmIHRoaXMueCA8IHggKyB3aWR0aCAmJiB5IDwgdGhpcy55ICsgdGhpcy5oZWlnaHQgJiYgdGhpcy55IDwgeSArIGhlaWdodDtcbiAgfVxuXG4gIGdldEZydXN0dW1QbGFuZXMoKSB7XG4gICAgaWYgKHRoaXMuX2ZydXN0dW1QbGFuZXMubmVhcikge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZydXN0dW1QbGFuZXM7XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLl9mcnVzdHVtUGxhbmVzLCBnZXRGcnVzdHVtUGxhbmVzKHRoaXMudmlld1Byb2plY3Rpb25NYXRyaXgpKTtcbiAgICByZXR1cm4gdGhpcy5fZnJ1c3R1bVBsYW5lcztcbiAgfVxuXG4gIHBhbkJ5UG9zaXRpb24oY29vcmRzLCBwaXhlbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgX2luaXRQcm9wcyhvcHRzKSB7XG4gICAgY29uc3QgbG9uZ2l0dWRlID0gb3B0cy5sb25naXR1ZGU7XG4gICAgY29uc3QgbGF0aXR1ZGUgPSBvcHRzLmxhdGl0dWRlO1xuXG4gICAgaWYgKHRoaXMuaXNHZW9zcGF0aWFsKSB7XG4gICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShvcHRzLnpvb20pKSB7XG4gICAgICAgIHRoaXMuem9vbSA9IGdldE1ldGVyWm9vbSh7XG4gICAgICAgICAgbGF0aXR1ZGVcbiAgICAgICAgfSkgKyBNYXRoLmxvZzIodGhpcy5mb2NhbERpc3RhbmNlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kaXN0YW5jZVNjYWxlcyA9IG9wdHMuZGlzdGFuY2VTY2FsZXMgfHwgZ2V0RGlzdGFuY2VTY2FsZXMoe1xuICAgICAgICBsYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzY2FsZSA9IE1hdGgucG93KDIsIHRoaXMuem9vbSk7XG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIGNvbnN0IHtcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgbW9kZWxNYXRyaXhcbiAgICB9ID0gb3B0cztcbiAgICBsZXQgbWV0ZXJPZmZzZXQgPSBaRVJPX1ZFQ1RPUjtcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgbWV0ZXJPZmZzZXQgPSBtb2RlbE1hdHJpeCA/IG5ldyBNYXRyaXg0KG1vZGVsTWF0cml4KS50cmFuc2Zvcm1Bc1ZlY3Rvcihwb3NpdGlvbiwgW10pIDogcG9zaXRpb247XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNHZW9zcGF0aWFsKSB7XG4gICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLnByb2plY3RQb3NpdGlvbihbbG9uZ2l0dWRlLCBsYXRpdHVkZSwgMF0pO1xuICAgICAgdGhpcy5jZW50ZXIgPSBuZXcgVmVjdG9yMyhtZXRlck9mZnNldCkuc2NhbGUodGhpcy5kaXN0YW5jZVNjYWxlcy51bml0c1Blck1ldGVyKS5hZGQoY2VudGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jZW50ZXIgPSB0aGlzLnByb2plY3RQb3NpdGlvbihtZXRlck9mZnNldCk7XG4gICAgfVxuICB9XG5cbiAgX2luaXRNYXRyaWNlcyhvcHRzKSB7XG4gICAgY29uc3Qge1xuICAgICAgdmlld01hdHJpeCA9IElERU5USVRZLFxuICAgICAgcHJvamVjdGlvbk1hdHJpeCA9IG51bGwsXG4gICAgICBvcnRob2dyYXBoaWMgPSBmYWxzZSxcbiAgICAgIGZvdnlSYWRpYW5zLFxuICAgICAgZm92eSA9IDc1LFxuICAgICAgbmVhciA9IDAuMSxcbiAgICAgIGZhciA9IDEwMDAsXG4gICAgICBwYWRkaW5nID0gbnVsbCxcbiAgICAgIGZvY2FsRGlzdGFuY2UgPSAxXG4gICAgfSA9IG9wdHM7XG4gICAgdGhpcy52aWV3TWF0cml4VW5jZW50ZXJlZCA9IHZpZXdNYXRyaXg7XG4gICAgdGhpcy52aWV3TWF0cml4ID0gbmV3IE1hdHJpeDQoKS5tdWx0aXBseVJpZ2h0KHZpZXdNYXRyaXgpLnRyYW5zbGF0ZShuZXcgVmVjdG9yMyh0aGlzLmNlbnRlcikubmVnYXRlKCkpO1xuICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeCA9IHByb2plY3Rpb25NYXRyaXggfHwgY3JlYXRlUHJvamVjdGlvbk1hdHJpeCh7XG4gICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXG4gICAgICBvcnRob2dyYXBoaWMsXG4gICAgICBmb3Z5UmFkaWFuczogZm92eVJhZGlhbnMgfHwgZm92eSAqIERFR1JFRVNfVE9fUkFESUFOUyxcbiAgICAgIGZvY2FsRGlzdGFuY2UsXG4gICAgICBwYWRkaW5nLFxuICAgICAgbmVhcixcbiAgICAgIGZhclxuICAgIH0pO1xuICAgIGNvbnN0IHZwbSA9IGNyZWF0ZU1hdDQoKTtcbiAgICBtYXQ0Lm11bHRpcGx5KHZwbSwgdnBtLCB0aGlzLnByb2plY3Rpb25NYXRyaXgpO1xuICAgIG1hdDQubXVsdGlwbHkodnBtLCB2cG0sIHRoaXMudmlld01hdHJpeCk7XG4gICAgdGhpcy52aWV3UHJvamVjdGlvbk1hdHJpeCA9IHZwbTtcbiAgICB0aGlzLnZpZXdNYXRyaXhJbnZlcnNlID0gbWF0NC5pbnZlcnQoW10sIHRoaXMudmlld01hdHJpeCkgfHwgdGhpcy52aWV3TWF0cml4O1xuICAgIHRoaXMuY2FtZXJhUG9zaXRpb24gPSBnZXRDYW1lcmFQb3NpdGlvbih0aGlzLnZpZXdNYXRyaXhJbnZlcnNlKTtcbiAgICBjb25zdCB2aWV3cG9ydE1hdHJpeCA9IGNyZWF0ZU1hdDQoKTtcbiAgICBjb25zdCBwaXhlbFByb2plY3Rpb25NYXRyaXggPSBjcmVhdGVNYXQ0KCk7XG4gICAgbWF0NC5zY2FsZSh2aWV3cG9ydE1hdHJpeCwgdmlld3BvcnRNYXRyaXgsIFt0aGlzLndpZHRoIC8gMiwgLXRoaXMuaGVpZ2h0IC8gMiwgMV0pO1xuICAgIG1hdDQudHJhbnNsYXRlKHZpZXdwb3J0TWF0cml4LCB2aWV3cG9ydE1hdHJpeCwgWzEsIC0xLCAwXSk7XG4gICAgbWF0NC5tdWx0aXBseShwaXhlbFByb2plY3Rpb25NYXRyaXgsIHZpZXdwb3J0TWF0cml4LCB0aGlzLnZpZXdQcm9qZWN0aW9uTWF0cml4KTtcbiAgICB0aGlzLnBpeGVsUHJvamVjdGlvbk1hdHJpeCA9IHBpeGVsUHJvamVjdGlvbk1hdHJpeDtcbiAgICB0aGlzLnBpeGVsVW5wcm9qZWN0aW9uTWF0cml4ID0gbWF0NC5pbnZlcnQoY3JlYXRlTWF0NCgpLCB0aGlzLnBpeGVsUHJvamVjdGlvbk1hdHJpeCk7XG5cbiAgICBpZiAoIXRoaXMucGl4ZWxVbnByb2plY3Rpb25NYXRyaXgpIHtcbiAgICAgIGxvZy53YXJuKCdQaXhlbCBwcm9qZWN0IG1hdHJpeCBub3QgaW52ZXJ0aWJsZScpKCk7XG4gICAgfVxuICB9XG5cbn1cblxuX2RlZmluZVByb3BlcnR5KFZpZXdwb3J0LCBcImRpc3BsYXlOYW1lXCIsICdWaWV3cG9ydCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmlld3BvcnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7013\n')},96935:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ WebMercatorViewport; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82482);\n/* harmony import */ var _viewport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7013);\n/* harmony import */ var _math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78866);\n/* harmony import */ var gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(31437);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14034);\n/* harmony import */ var _math_gl_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85451);\n\n\n\n\n\nclass WebMercatorViewport extends _viewport__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 0,\n      pitch = 0,\n      bearing = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 1.01,\n      orthographic = false,\n      projectionMatrix,\n      repeat = false,\n      worldOffset = 0,\n      position,\n      padding,\n      legacyMeterSizes = false\n    } = opts;\n    let {\n      width,\n      height,\n      altitude = 1.5\n    } = opts;\n    const scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    let fovy;\n    let projectionParameters = null;\n\n    if (projectionMatrix) {\n      altitude = projectionMatrix[5] / 2;\n      fovy = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .altitudeToFovy */ .Lu)(altitude);\n    } else {\n      if (opts.fovy) {\n        fovy = opts.fovy;\n        altitude = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .fovyToAltitude */ .sj)(fovy);\n      } else {\n        fovy = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .altitudeToFovy */ .Lu)(altitude);\n      }\n\n      let offset;\n\n      if (padding) {\n        const {\n          top = 0,\n          bottom = 0\n        } = padding;\n        offset = [0, (0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .uZ)((top + height - bottom) / 2, 0, height) - height / 2];\n      }\n\n      projectionParameters = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .getProjectionParameters */ .wl)({\n        width,\n        height,\n        scale,\n        center: position && [0, 0, position[2] * (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .unitsPerMeter */ .NC)(latitude)],\n        offset,\n        pitch,\n        fovy,\n        nearZMultiplier,\n        farZMultiplier\n      });\n    }\n\n    let viewMatrixUncentered = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .getViewMatrix */ .lf)({\n      height,\n      pitch,\n      bearing,\n      scale,\n      altitude\n    });\n\n    if (worldOffset) {\n      const viewOffset = new _math_gl_core__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    super({ ...opts,\n      width,\n      height,\n      viewMatrix: viewMatrixUncentered,\n      longitude,\n      latitude,\n      zoom,\n      ...projectionParameters,\n      fovy,\n      focalDistance: altitude\n    });\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "longitude", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "latitude", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "pitch", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "bearing", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "altitude", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "fovy", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "orthographic", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "_subViewports", void 0);\n\n    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this, "_pseudoMeters", void 0);\n\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.orthographic = orthographic;\n    this._subViewports = repeat ? [] : null;\n    this._pseudoMeters = legacyMeterSizes;\n    Object.freeze(this);\n  }\n\n  get subViewports() {\n    if (this._subViewports && !this._subViewports.length) {\n      const bounds = this.getBounds();\n      const minOffset = Math.floor((bounds[0] + 180) / 360);\n      const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n      for (let x = minOffset; x <= maxOffset; x++) {\n        const offsetViewport = x ? new WebMercatorViewport({ ...this,\n          worldOffset: x\n        }) : this;\n\n        this._subViewports.push(offsetViewport);\n      }\n    }\n\n    return this._subViewports;\n  }\n\n  projectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.projectPosition(xyz);\n    }\n\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .unitsPerMeter */ .NC)(xyz[1]);\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.unprojectPosition(xyz);\n    }\n\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) / (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .unitsPerMeter */ .NC)(Y);\n    return [X, Y, Z];\n  }\n\n  addMetersToLngLat(lngLatZ, xyz) {\n    return (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .addMetersToLngLat */ .eG)(lngLatZ, xyz);\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .pixelsToWorld */ .CT)(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__/* .add */ .IH([], toLocation, gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__/* .negate */ .tk([], fromLocation));\n    const newCenter = gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__/* .add */ .IH([], this.center, translate);\n    const [longitude, latitude] = this.unprojectFlat(newCenter);\n    return {\n      longitude,\n      latitude\n    };\n  }\n\n  getBounds(options = {}) {\n    const corners = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .getBounds */ .zX)(this, options.z || 0);\n    return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = (0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__/* .fitBounds */ .Xg)({\n      width,\n      height,\n      bounds,\n      ...options\n    });\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n}\n\n(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(WebMercatorViewport, "displayName", \'WebMercatorViewport\');\n//# sourceMappingURL=web-mercator-viewport.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTY5MzUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdFO0FBQ3RDO0FBQ29KO0FBQy9JO0FBQ1E7QUFDaEMsa0NBQWtDLDBEQUFRO0FBQ3pELHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSwrRUFBYztBQUMzQixNQUFNO0FBQ047QUFDQTtBQUNBLG1CQUFtQiwrRUFBYztBQUNqQyxRQUFRO0FBQ1IsZUFBZSwrRUFBYztBQUM3Qjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixxQkFBcUIsOERBQUs7QUFDMUI7O0FBRUEsNkJBQTZCLHdGQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsOEVBQWE7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSwrQkFBK0IsOEVBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSw2QkFBNkIsOERBQU87QUFDcEM7QUFDQTs7QUFFQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTCxJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQixJQUFJLDhGQUFlOztBQUVuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEIsZ0JBQWdCO0FBQzlDLDZEQUE2RDtBQUM3RDtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsOEVBQWE7QUFDM0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4Qiw4RUFBYTtBQUMzQztBQUNBOztBQUVBO0FBQ0EsV0FBVyxrRkFBaUI7QUFDNUI7O0FBRUE7QUFDQSx5QkFBeUIsOEVBQWE7QUFDdEM7QUFDQSxzQkFBc0IseURBQVEsaUJBQWlCLDREQUFXO0FBQzFELHNCQUFzQix5REFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCO0FBQ3hCLG9CQUFvQiwwRUFBUztBQUM3QjtBQUNBOztBQUVBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLEVBQUUsMEVBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBLDhGQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL0BkZWNrLmdsL2NvcmUvZGlzdC9lc20vdmlld3BvcnRzL3dlYi1tZXJjYXRvci12aWV3cG9ydC5qcz9hZGZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgVmlld3BvcnQgZnJvbSAnLi92aWV3cG9ydCc7XG5pbXBvcnQgeyBwaXhlbHNUb1dvcmxkLCBnZXRWaWV3TWF0cml4LCBhZGRNZXRlcnNUb0xuZ0xhdCwgdW5pdHNQZXJNZXRlciwgZ2V0UHJvamVjdGlvblBhcmFtZXRlcnMsIGFsdGl0dWRlVG9Gb3Z5LCBmb3Z5VG9BbHRpdHVkZSwgZml0Qm91bmRzLCBnZXRCb3VuZHMgfSBmcm9tICdAbWF0aC5nbC93ZWItbWVyY2F0b3InO1xuaW1wb3J0ICogYXMgdmVjMiBmcm9tICdnbC1tYXRyaXgvdmVjMic7XG5pbXBvcnQgeyBNYXRyaXg0LCBjbGFtcCB9IGZyb20gJ0BtYXRoLmdsL2NvcmUnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViTWVyY2F0b3JWaWV3cG9ydCBleHRlbmRzIFZpZXdwb3J0IHtcbiAgY29uc3RydWN0b3Iob3B0cyA9IHt9KSB7XG4gICAgY29uc3Qge1xuICAgICAgbGF0aXR1ZGUgPSAwLFxuICAgICAgbG9uZ2l0dWRlID0gMCxcbiAgICAgIHpvb20gPSAwLFxuICAgICAgcGl0Y2ggPSAwLFxuICAgICAgYmVhcmluZyA9IDAsXG4gICAgICBuZWFyWk11bHRpcGxpZXIgPSAwLjEsXG4gICAgICBmYXJaTXVsdGlwbGllciA9IDEuMDEsXG4gICAgICBvcnRob2dyYXBoaWMgPSBmYWxzZSxcbiAgICAgIHByb2plY3Rpb25NYXRyaXgsXG4gICAgICByZXBlYXQgPSBmYWxzZSxcbiAgICAgIHdvcmxkT2Zmc2V0ID0gMCxcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgcGFkZGluZyxcbiAgICAgIGxlZ2FjeU1ldGVyU2l6ZXMgPSBmYWxzZVxuICAgIH0gPSBvcHRzO1xuICAgIGxldCB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGFsdGl0dWRlID0gMS41XG4gICAgfSA9IG9wdHM7XG4gICAgY29uc3Qgc2NhbGUgPSBNYXRoLnBvdygyLCB6b29tKTtcbiAgICB3aWR0aCA9IHdpZHRoIHx8IDE7XG4gICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDE7XG4gICAgbGV0IGZvdnk7XG4gICAgbGV0IHByb2plY3Rpb25QYXJhbWV0ZXJzID0gbnVsbDtcblxuICAgIGlmIChwcm9qZWN0aW9uTWF0cml4KSB7XG4gICAgICBhbHRpdHVkZSA9IHByb2plY3Rpb25NYXRyaXhbNV0gLyAyO1xuICAgICAgZm92eSA9IGFsdGl0dWRlVG9Gb3Z5KGFsdGl0dWRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG9wdHMuZm92eSkge1xuICAgICAgICBmb3Z5ID0gb3B0cy5mb3Z5O1xuICAgICAgICBhbHRpdHVkZSA9IGZvdnlUb0FsdGl0dWRlKGZvdnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm92eSA9IGFsdGl0dWRlVG9Gb3Z5KGFsdGl0dWRlKTtcbiAgICAgIH1cblxuICAgICAgbGV0IG9mZnNldDtcblxuICAgICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHRvcCA9IDAsXG4gICAgICAgICAgYm90dG9tID0gMFxuICAgICAgICB9ID0gcGFkZGluZztcbiAgICAgICAgb2Zmc2V0ID0gWzAsIGNsYW1wKCh0b3AgKyBoZWlnaHQgLSBib3R0b20pIC8gMiwgMCwgaGVpZ2h0KSAtIGhlaWdodCAvIDJdO1xuICAgICAgfVxuXG4gICAgICBwcm9qZWN0aW9uUGFyYW1ldGVycyA9IGdldFByb2plY3Rpb25QYXJhbWV0ZXJzKHtcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgc2NhbGUsXG4gICAgICAgIGNlbnRlcjogcG9zaXRpb24gJiYgWzAsIDAsIHBvc2l0aW9uWzJdICogdW5pdHNQZXJNZXRlcihsYXRpdHVkZSldLFxuICAgICAgICBvZmZzZXQsXG4gICAgICAgIHBpdGNoLFxuICAgICAgICBmb3Z5LFxuICAgICAgICBuZWFyWk11bHRpcGxpZXIsXG4gICAgICAgIGZhclpNdWx0aXBsaWVyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgdmlld01hdHJpeFVuY2VudGVyZWQgPSBnZXRWaWV3TWF0cml4KHtcbiAgICAgIGhlaWdodCxcbiAgICAgIHBpdGNoLFxuICAgICAgYmVhcmluZyxcbiAgICAgIHNjYWxlLFxuICAgICAgYWx0aXR1ZGVcbiAgICB9KTtcblxuICAgIGlmICh3b3JsZE9mZnNldCkge1xuICAgICAgY29uc3Qgdmlld09mZnNldCA9IG5ldyBNYXRyaXg0KCkudHJhbnNsYXRlKFs1MTIgKiB3b3JsZE9mZnNldCwgMCwgMF0pO1xuICAgICAgdmlld01hdHJpeFVuY2VudGVyZWQgPSB2aWV3T2Zmc2V0Lm11bHRpcGx5TGVmdCh2aWV3TWF0cml4VW5jZW50ZXJlZCk7XG4gICAgfVxuXG4gICAgc3VwZXIoeyAuLi5vcHRzLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICB2aWV3TWF0cml4OiB2aWV3TWF0cml4VW5jZW50ZXJlZCxcbiAgICAgIGxvbmdpdHVkZSxcbiAgICAgIGxhdGl0dWRlLFxuICAgICAgem9vbSxcbiAgICAgIC4uLnByb2plY3Rpb25QYXJhbWV0ZXJzLFxuICAgICAgZm92eSxcbiAgICAgIGZvY2FsRGlzdGFuY2U6IGFsdGl0dWRlXG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJsb25naXR1ZGVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxhdGl0dWRlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwaXRjaFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYmVhcmluZ1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYWx0aXR1ZGVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZvdnlcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ydGhvZ3JhcGhpY1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX3N1YlZpZXdwb3J0c1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BzZXVkb01ldGVyc1wiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5sYXRpdHVkZSA9IGxhdGl0dWRlO1xuICAgIHRoaXMubG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICAgIHRoaXMuem9vbSA9IHpvb207XG4gICAgdGhpcy5waXRjaCA9IHBpdGNoO1xuICAgIHRoaXMuYmVhcmluZyA9IGJlYXJpbmc7XG4gICAgdGhpcy5hbHRpdHVkZSA9IGFsdGl0dWRlO1xuICAgIHRoaXMuZm92eSA9IGZvdnk7XG4gICAgdGhpcy5vcnRob2dyYXBoaWMgPSBvcnRob2dyYXBoaWM7XG4gICAgdGhpcy5fc3ViVmlld3BvcnRzID0gcmVwZWF0ID8gW10gOiBudWxsO1xuICAgIHRoaXMuX3BzZXVkb01ldGVycyA9IGxlZ2FjeU1ldGVyU2l6ZXM7XG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgfVxuXG4gIGdldCBzdWJWaWV3cG9ydHMoKSB7XG4gICAgaWYgKHRoaXMuX3N1YlZpZXdwb3J0cyAmJiAhdGhpcy5fc3ViVmlld3BvcnRzLmxlbmd0aCkge1xuICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5nZXRCb3VuZHMoKTtcbiAgICAgIGNvbnN0IG1pbk9mZnNldCA9IE1hdGguZmxvb3IoKGJvdW5kc1swXSArIDE4MCkgLyAzNjApO1xuICAgICAgY29uc3QgbWF4T2Zmc2V0ID0gTWF0aC5jZWlsKChib3VuZHNbMl0gLSAxODApIC8gMzYwKTtcblxuICAgICAgZm9yIChsZXQgeCA9IG1pbk9mZnNldDsgeCA8PSBtYXhPZmZzZXQ7IHgrKykge1xuICAgICAgICBjb25zdCBvZmZzZXRWaWV3cG9ydCA9IHggPyBuZXcgV2ViTWVyY2F0b3JWaWV3cG9ydCh7IC4uLnRoaXMsXG4gICAgICAgICAgd29ybGRPZmZzZXQ6IHhcbiAgICAgICAgfSkgOiB0aGlzO1xuXG4gICAgICAgIHRoaXMuX3N1YlZpZXdwb3J0cy5wdXNoKG9mZnNldFZpZXdwb3J0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fc3ViVmlld3BvcnRzO1xuICB9XG5cbiAgcHJvamVjdFBvc2l0aW9uKHh5eikge1xuICAgIGlmICh0aGlzLl9wc2V1ZG9NZXRlcnMpIHtcbiAgICAgIHJldHVybiBzdXBlci5wcm9qZWN0UG9zaXRpb24oeHl6KTtcbiAgICB9XG5cbiAgICBjb25zdCBbWCwgWV0gPSB0aGlzLnByb2plY3RGbGF0KHh5eik7XG4gICAgY29uc3QgWiA9ICh4eXpbMl0gfHwgMCkgKiB1bml0c1Blck1ldGVyKHh5elsxXSk7XG4gICAgcmV0dXJuIFtYLCBZLCBaXTtcbiAgfVxuXG4gIHVucHJvamVjdFBvc2l0aW9uKHh5eikge1xuICAgIGlmICh0aGlzLl9wc2V1ZG9NZXRlcnMpIHtcbiAgICAgIHJldHVybiBzdXBlci51bnByb2plY3RQb3NpdGlvbih4eXopO1xuICAgIH1cblxuICAgIGNvbnN0IFtYLCBZXSA9IHRoaXMudW5wcm9qZWN0RmxhdCh4eXopO1xuICAgIGNvbnN0IFogPSAoeHl6WzJdIHx8IDApIC8gdW5pdHNQZXJNZXRlcihZKTtcbiAgICByZXR1cm4gW1gsIFksIFpdO1xuICB9XG5cbiAgYWRkTWV0ZXJzVG9MbmdMYXQobG5nTGF0WiwgeHl6KSB7XG4gICAgcmV0dXJuIGFkZE1ldGVyc1RvTG5nTGF0KGxuZ0xhdFosIHh5eik7XG4gIH1cblxuICBwYW5CeVBvc2l0aW9uKGNvb3JkcywgcGl4ZWwpIHtcbiAgICBjb25zdCBmcm9tTG9jYXRpb24gPSBwaXhlbHNUb1dvcmxkKHBpeGVsLCB0aGlzLnBpeGVsVW5wcm9qZWN0aW9uTWF0cml4KTtcbiAgICBjb25zdCB0b0xvY2F0aW9uID0gdGhpcy5wcm9qZWN0RmxhdChjb29yZHMpO1xuICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHZlYzIuYWRkKFtdLCB0b0xvY2F0aW9uLCB2ZWMyLm5lZ2F0ZShbXSwgZnJvbUxvY2F0aW9uKSk7XG4gICAgY29uc3QgbmV3Q2VudGVyID0gdmVjMi5hZGQoW10sIHRoaXMuY2VudGVyLCB0cmFuc2xhdGUpO1xuICAgIGNvbnN0IFtsb25naXR1ZGUsIGxhdGl0dWRlXSA9IHRoaXMudW5wcm9qZWN0RmxhdChuZXdDZW50ZXIpO1xuICAgIHJldHVybiB7XG4gICAgICBsb25naXR1ZGUsXG4gICAgICBsYXRpdHVkZVxuICAgIH07XG4gIH1cblxuICBnZXRCb3VuZHMob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY29ybmVycyA9IGdldEJvdW5kcyh0aGlzLCBvcHRpb25zLnogfHwgMCk7XG4gICAgcmV0dXJuIFtNYXRoLm1pbihjb3JuZXJzWzBdWzBdLCBjb3JuZXJzWzFdWzBdLCBjb3JuZXJzWzJdWzBdLCBjb3JuZXJzWzNdWzBdKSwgTWF0aC5taW4oY29ybmVyc1swXVsxXSwgY29ybmVyc1sxXVsxXSwgY29ybmVyc1syXVsxXSwgY29ybmVyc1szXVsxXSksIE1hdGgubWF4KGNvcm5lcnNbMF1bMF0sIGNvcm5lcnNbMV1bMF0sIGNvcm5lcnNbMl1bMF0sIGNvcm5lcnNbM11bMF0pLCBNYXRoLm1heChjb3JuZXJzWzBdWzFdLCBjb3JuZXJzWzFdWzFdLCBjb3JuZXJzWzJdWzFdLCBjb3JuZXJzWzNdWzFdKV07XG4gIH1cblxuICBmaXRCb3VuZHMoYm91bmRzLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIGxvbmdpdHVkZSxcbiAgICAgIGxhdGl0dWRlLFxuICAgICAgem9vbVxuICAgIH0gPSBmaXRCb3VuZHMoe1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBib3VuZHMsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBXZWJNZXJjYXRvclZpZXdwb3J0KHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgbG9uZ2l0dWRlLFxuICAgICAgbGF0aXR1ZGUsXG4gICAgICB6b29tXG4gICAgfSk7XG4gIH1cblxufVxuXG5fZGVmaW5lUHJvcGVydHkoV2ViTWVyY2F0b3JWaWV3cG9ydCwgXCJkaXNwbGF5TmFtZVwiLCAnV2ViTWVyY2F0b3JWaWV3cG9ydCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2ViLW1lcmNhdG9yLXZpZXdwb3J0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///96935\n')},56602:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Z\": function() { return /* binding */ MapView; }\n});\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(82482);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js\nvar viewport = __webpack_require__(7013);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/positions.js\nconst PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nfunction parsePosition(value) {\n  switch (typeof value) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      const match = PERCENT_OR_PIXELS_REGEX.exec(value);\n\n      if (match && match.length >= 3) {\n        const relative = match[2] === '%';\n        const position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nfunction getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js\nvar deep_equal = __webpack_require__(46871);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/utils/assert.js\nvar assert = __webpack_require__(75304);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/views/view.js\n\n\n\n\n\nclass View {\n  constructor(props) {\n    (0,defineProperty/* default */.Z)(this, \"id\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"viewportInstance\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"_x\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"_y\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"_width\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"_height\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"_padding\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"props\", void 0);\n\n    const {\n      id,\n      x = 0,\n      y = 0,\n      width = '100%',\n      height = '100%',\n      padding = null,\n      viewportInstance\n    } = props || {};\n    (0,assert/* default */.Z)(!viewportInstance || viewportInstance instanceof viewport/* default */.Z);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.props = { ...props,\n      id: this.id\n    };\n    this._x = parsePosition(x);\n    this._y = parsePosition(y);\n    this._width = parsePosition(width);\n    this._height = parsePosition(height);\n    this._padding = padding && {\n      left: parsePosition(padding.left || 0),\n      right: parsePosition(padding.right || 0),\n      top: parsePosition(padding.top || 0),\n      bottom: parsePosition(padding.bottom || 0)\n    };\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  equals(view) {\n    if (this === view) {\n      return true;\n    }\n\n    if (this.viewportInstance) {\n      return view.viewportInstance ? this.viewportInstance.equals(view.viewportInstance) : false;\n    }\n\n    return this.ViewportType === view.ViewportType && (0,deep_equal/* deepEqual */.v)(this.props, view.props, 2);\n  }\n\n  makeViewport({\n    width,\n    height,\n    viewState\n  }) {\n    if (this.viewportInstance) {\n      return this.viewportInstance;\n    }\n\n    viewState = this.filterViewState(viewState);\n    const viewportDimensions = this.getDimensions({\n      width,\n      height\n    });\n    return new this.ViewportType({ ...viewState,\n      ...this.props,\n      ...viewportDimensions\n    });\n  }\n\n  getViewStateId() {\n    const {\n      viewState\n    } = this.props;\n\n    if (typeof viewState === 'string') {\n      return viewState;\n    }\n\n    return (viewState === null || viewState === void 0 ? void 0 : viewState.id) || this.id;\n  }\n\n  filterViewState(viewState) {\n    if (this.props.viewState && typeof this.props.viewState === 'object') {\n      if (!this.props.viewState.id) {\n        return this.props.viewState;\n      }\n\n      const newViewState = { ...viewState\n      };\n\n      for (const key in this.props.viewState) {\n        if (key !== 'id') {\n          newViewState[key] = this.props.viewState[key];\n        }\n      }\n\n      return newViewState;\n    }\n\n    return viewState;\n  }\n\n  getDimensions({\n    width,\n    height\n  }) {\n    const dimensions = {\n      x: getPosition(this._x, width),\n      y: getPosition(this._y, height),\n      width: getPosition(this._width, width),\n      height: getPosition(this._height, height)\n    };\n\n    if (this._padding) {\n      dimensions.padding = {\n        left: getPosition(this._padding.left, width),\n        top: getPosition(this._padding.top, height),\n        right: getPosition(this._padding.right, width),\n        bottom: getPosition(this._padding.bottom, height)\n      };\n    }\n\n    return dimensions;\n  }\n\n  get controller() {\n    const opts = this.props.controller;\n\n    if (!opts) {\n      return null;\n    }\n\n    if (opts === true) {\n      return {\n        type: this.ControllerType\n      };\n    }\n\n    if (typeof opts === 'function') {\n      return {\n        type: opts\n      };\n    }\n\n    return {\n      type: this.ControllerType,\n      ...opts\n    };\n  }\n\n}\n//# sourceMappingURL=view.js.map\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js\nvar web_mercator_viewport = __webpack_require__(96935);\n// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js + 3 modules\nvar map_controller = __webpack_require__(68990);\n;// CONCATENATED MODULE: ./node_modules/@deck.gl/core/dist/esm/views/map-view.js\n\n\n\n\nclass MapView extends View {\n  get ViewportType() {\n    return web_mercator_viewport/* default */.Z;\n  }\n\n  get ControllerType() {\n    return map_controller/* default */.Z;\n  }\n\n}\n\n(0,defineProperty/* default */.Z)(MapView, \"displayName\", 'MapView');\n//# sourceMappingURL=map-view.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTY2MDIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHFDOzs7Ozs7QUM1QndFO0FBQzNCO0FBQ21CO0FBQ2hCO0FBQ1g7QUFDdEI7QUFDZjtBQUNBLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CLElBQUksaUNBQWU7O0FBRW5CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sSUFBSSx5QkFBTSxrREFBa0QsdUJBQVE7QUFDcEU7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCLGNBQWMsYUFBYTtBQUMzQixrQkFBa0IsYUFBYTtBQUMvQixtQkFBbUIsYUFBYTtBQUNoQztBQUNBLFlBQVksYUFBYTtBQUN6QixhQUFhLGFBQWE7QUFDMUIsV0FBVyxhQUFhO0FBQ3hCLGNBQWMsYUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsc0RBQXNELCtCQUFTO0FBQy9EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCO0FBQzdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFNBQVMsV0FBVztBQUNwQixTQUFTLFdBQVc7QUFDcEIsYUFBYSxXQUFXO0FBQ3hCLGNBQWMsV0FBVztBQUN6Qjs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxXQUFXO0FBQ3pCLGFBQWEsV0FBVztBQUN4QixlQUFlLFdBQVc7QUFDMUIsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0M7Ozs7OztBQ3RLd0U7QUFDOUM7QUFDMkM7QUFDWDtBQUMzQyxzQkFBc0IsSUFBSTtBQUN6QztBQUNBLFdBQVcsb0NBQW1CO0FBQzlCOztBQUVBO0FBQ0EsV0FBVyw2QkFBYTtBQUN4Qjs7QUFFQTs7QUFFQSxpQ0FBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3V0aWxzL3Bvc2l0aW9ucy5qcz8yZmM5Iiwid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvQGRlY2suZ2wvY29yZS9kaXN0L2VzbS92aWV3cy92aWV3LmpzPzUzZGMiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9AZGVjay5nbC9jb3JlL2Rpc3QvZXNtL3ZpZXdzL21hcC12aWV3LmpzPzEwOWUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUEVSQ0VOVF9PUl9QSVhFTFNfUkVHRVggPSAvKFswLTldK1xcLj9bMC05XSopKCV8cHgpLztcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBvc2l0aW9uKHZhbHVlKSB7XG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvc2l0aW9uOiB2YWx1ZSxcbiAgICAgICAgcmVsYXRpdmU6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIGNvbnN0IG1hdGNoID0gUEVSQ0VOVF9PUl9QSVhFTFNfUkVHRVguZXhlYyh2YWx1ZSk7XG5cbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggPj0gMykge1xuICAgICAgICBjb25zdCByZWxhdGl2ZSA9IG1hdGNoWzJdID09PSAnJSc7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlID8gcG9zaXRpb24gLyAxMDAgOiBwb3NpdGlvbixcbiAgICAgICAgICByZWxhdGl2ZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBwb3NpdGlvbiBzdHJpbmcgXCIuY29uY2F0KHZhbHVlKSk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb3NpdGlvbihwb3NpdGlvbiwgZXh0ZW50KSB7XG4gIHJldHVybiBwb3NpdGlvbi5yZWxhdGl2ZSA/IE1hdGgucm91bmQocG9zaXRpb24ucG9zaXRpb24gKiBleHRlbnQpIDogcG9zaXRpb24ucG9zaXRpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb3NpdGlvbnMuanMubWFwIiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBWaWV3cG9ydCBmcm9tICcuLi92aWV3cG9ydHMvdmlld3BvcnQnO1xuaW1wb3J0IHsgcGFyc2VQb3NpdGlvbiwgZ2V0UG9zaXRpb24gfSBmcm9tICcuLi91dGlscy9wb3NpdGlvbnMnO1xuaW1wb3J0IHsgZGVlcEVxdWFsIH0gZnJvbSAnLi4vdXRpbHMvZGVlcC1lcXVhbCc7XG5pbXBvcnQgYXNzZXJ0IGZyb20gJy4uL3V0aWxzL2Fzc2VydCc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmlld3BvcnRJbnN0YW5jZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiX3hcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl95XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJfd2lkdGhcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9oZWlnaHRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wYWRkaW5nXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9wc1wiLCB2b2lkIDApO1xuXG4gICAgY29uc3Qge1xuICAgICAgaWQsXG4gICAgICB4ID0gMCxcbiAgICAgIHkgPSAwLFxuICAgICAgd2lkdGggPSAnMTAwJScsXG4gICAgICBoZWlnaHQgPSAnMTAwJScsXG4gICAgICBwYWRkaW5nID0gbnVsbCxcbiAgICAgIHZpZXdwb3J0SW5zdGFuY2VcbiAgICB9ID0gcHJvcHMgfHwge307XG4gICAgYXNzZXJ0KCF2aWV3cG9ydEluc3RhbmNlIHx8IHZpZXdwb3J0SW5zdGFuY2UgaW5zdGFuY2VvZiBWaWV3cG9ydCk7XG4gICAgdGhpcy52aWV3cG9ydEluc3RhbmNlID0gdmlld3BvcnRJbnN0YW5jZTtcbiAgICB0aGlzLmlkID0gaWQgfHwgdGhpcy5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAndmlldyc7XG4gICAgdGhpcy5wcm9wcyA9IHsgLi4ucHJvcHMsXG4gICAgICBpZDogdGhpcy5pZFxuICAgIH07XG4gICAgdGhpcy5feCA9IHBhcnNlUG9zaXRpb24oeCk7XG4gICAgdGhpcy5feSA9IHBhcnNlUG9zaXRpb24oeSk7XG4gICAgdGhpcy5fd2lkdGggPSBwYXJzZVBvc2l0aW9uKHdpZHRoKTtcbiAgICB0aGlzLl9oZWlnaHQgPSBwYXJzZVBvc2l0aW9uKGhlaWdodCk7XG4gICAgdGhpcy5fcGFkZGluZyA9IHBhZGRpbmcgJiYge1xuICAgICAgbGVmdDogcGFyc2VQb3NpdGlvbihwYWRkaW5nLmxlZnQgfHwgMCksXG4gICAgICByaWdodDogcGFyc2VQb3NpdGlvbihwYWRkaW5nLnJpZ2h0IHx8IDApLFxuICAgICAgdG9wOiBwYXJzZVBvc2l0aW9uKHBhZGRpbmcudG9wIHx8IDApLFxuICAgICAgYm90dG9tOiBwYXJzZVBvc2l0aW9uKHBhZGRpbmcuYm90dG9tIHx8IDApXG4gICAgfTtcbiAgICB0aGlzLmVxdWFscyA9IHRoaXMuZXF1YWxzLmJpbmQodGhpcyk7XG4gICAgT2JqZWN0LnNlYWwodGhpcyk7XG4gIH1cblxuICBlcXVhbHModmlldykge1xuICAgIGlmICh0aGlzID09PSB2aWV3KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy52aWV3cG9ydEluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gdmlldy52aWV3cG9ydEluc3RhbmNlID8gdGhpcy52aWV3cG9ydEluc3RhbmNlLmVxdWFscyh2aWV3LnZpZXdwb3J0SW5zdGFuY2UpIDogZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuVmlld3BvcnRUeXBlID09PSB2aWV3LlZpZXdwb3J0VHlwZSAmJiBkZWVwRXF1YWwodGhpcy5wcm9wcywgdmlldy5wcm9wcywgMik7XG4gIH1cblxuICBtYWtlVmlld3BvcnQoe1xuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICB2aWV3U3RhdGVcbiAgfSkge1xuICAgIGlmICh0aGlzLnZpZXdwb3J0SW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0SW5zdGFuY2U7XG4gICAgfVxuXG4gICAgdmlld1N0YXRlID0gdGhpcy5maWx0ZXJWaWV3U3RhdGUodmlld1N0YXRlKTtcbiAgICBjb25zdCB2aWV3cG9ydERpbWVuc2lvbnMgPSB0aGlzLmdldERpbWVuc2lvbnMoe1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHRcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IHRoaXMuVmlld3BvcnRUeXBlKHsgLi4udmlld1N0YXRlLFxuICAgICAgLi4udGhpcy5wcm9wcyxcbiAgICAgIC4uLnZpZXdwb3J0RGltZW5zaW9uc1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0Vmlld1N0YXRlSWQoKSB7XG4gICAgY29uc3Qge1xuICAgICAgdmlld1N0YXRlXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAodHlwZW9mIHZpZXdTdGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB2aWV3U3RhdGU7XG4gICAgfVxuXG4gICAgcmV0dXJuICh2aWV3U3RhdGUgPT09IG51bGwgfHwgdmlld1N0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2aWV3U3RhdGUuaWQpIHx8IHRoaXMuaWQ7XG4gIH1cblxuICBmaWx0ZXJWaWV3U3RhdGUodmlld1N0YXRlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMudmlld1N0YXRlICYmIHR5cGVvZiB0aGlzLnByb3BzLnZpZXdTdGF0ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy52aWV3U3RhdGUuaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMudmlld1N0YXRlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXdWaWV3U3RhdGUgPSB7IC4uLnZpZXdTdGF0ZVxuICAgICAgfTtcblxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5wcm9wcy52aWV3U3RhdGUpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJ2lkJykge1xuICAgICAgICAgIG5ld1ZpZXdTdGF0ZVtrZXldID0gdGhpcy5wcm9wcy52aWV3U3RhdGVba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3Vmlld1N0YXRlO1xuICAgIH1cblxuICAgIHJldHVybiB2aWV3U3RhdGU7XG4gIH1cblxuICBnZXREaW1lbnNpb25zKHtcbiAgICB3aWR0aCxcbiAgICBoZWlnaHRcbiAgfSkge1xuICAgIGNvbnN0IGRpbWVuc2lvbnMgPSB7XG4gICAgICB4OiBnZXRQb3NpdGlvbih0aGlzLl94LCB3aWR0aCksXG4gICAgICB5OiBnZXRQb3NpdGlvbih0aGlzLl95LCBoZWlnaHQpLFxuICAgICAgd2lkdGg6IGdldFBvc2l0aW9uKHRoaXMuX3dpZHRoLCB3aWR0aCksXG4gICAgICBoZWlnaHQ6IGdldFBvc2l0aW9uKHRoaXMuX2hlaWdodCwgaGVpZ2h0KVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5fcGFkZGluZykge1xuICAgICAgZGltZW5zaW9ucy5wYWRkaW5nID0ge1xuICAgICAgICBsZWZ0OiBnZXRQb3NpdGlvbih0aGlzLl9wYWRkaW5nLmxlZnQsIHdpZHRoKSxcbiAgICAgICAgdG9wOiBnZXRQb3NpdGlvbih0aGlzLl9wYWRkaW5nLnRvcCwgaGVpZ2h0KSxcbiAgICAgICAgcmlnaHQ6IGdldFBvc2l0aW9uKHRoaXMuX3BhZGRpbmcucmlnaHQsIHdpZHRoKSxcbiAgICAgICAgYm90dG9tOiBnZXRQb3NpdGlvbih0aGlzLl9wYWRkaW5nLmJvdHRvbSwgaGVpZ2h0KVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGltZW5zaW9ucztcbiAgfVxuXG4gIGdldCBjb250cm9sbGVyKCkge1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLnByb3BzLmNvbnRyb2xsZXI7XG5cbiAgICBpZiAoIW9wdHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChvcHRzID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiB0aGlzLkNvbnRyb2xsZXJUeXBlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogb3B0c1xuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdGhpcy5Db250cm9sbGVyVHlwZSxcbiAgICAgIC4uLm9wdHNcbiAgICB9O1xuICB9XG5cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXcuanMubWFwIiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgV2ViTWVyY2F0b3JWaWV3cG9ydCBmcm9tICcuLi92aWV3cG9ydHMvd2ViLW1lcmNhdG9yLXZpZXdwb3J0JztcbmltcG9ydCBNYXBDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL21hcC1jb250cm9sbGVyJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcFZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgZ2V0IFZpZXdwb3J0VHlwZSgpIHtcbiAgICByZXR1cm4gV2ViTWVyY2F0b3JWaWV3cG9ydDtcbiAgfVxuXG4gIGdldCBDb250cm9sbGVyVHlwZSgpIHtcbiAgICByZXR1cm4gTWFwQ29udHJvbGxlcjtcbiAgfVxuXG59XG5cbl9kZWZpbmVQcm9wZXJ0eShNYXBWaWV3LCBcImRpc3BsYXlOYW1lXCIsICdNYXBWaWV3Jyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAtdmlldy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///56602\n")}}]);