"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[3935],{34380:function(e,t,n){var r=n(48243),i=n(60838),a=n(60216),o=n(63367),s=n(51688),c=n(83856),h=n(59947),p=n(8182),u=n(84828),d=n(62200),l=n(82982),m=n(86511),f=n(12572),_=n(74938),b=n(96037),g=n(82408),v=n(13616),Z=n(56652),y=n(87379),S=n(84935),w=n(72248),C=n(7749),T=n(9407),D=n(24072),A=n(2819),x=n(58597),I=n(20521),k=n(60072),P=n(8379),O=n(10667),z=n(46588),F=n(53642),E=n(18192),L=n(13222),M=n(7164),R=n(71593),B=n(7976),V=n(1764),G=n(88736),H=n(89917),N=n(34125);function U(e){if(e=(0,d.Z)(e,d.Z.EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=w.Z.clone((0,d.Z)(e.modelMatrix,w.Z.IDENTITY)),this._modelMatrix=new w.Z,this.show=(0,d.Z)(e.show,!0),this._vertexCacheOptimize=(0,d.Z)(e.vertexCacheOptimize,!1),this._interleave=(0,d.Z)(e.interleave,!1),this._releaseGeometryInstances=(0,d.Z)(e.releaseGeometryInstances,!0),this._allowPicking=(0,d.Z)(e.allowPicking,!0),this._asynchronous=(0,d.Z)(e.asynchronous,!0),this._compressVertices=(0,d.Z)(e.compressVertices,!0),this.cull=(0,d.Z)(e.cull,!0),this.debugShowBoundingVolume=(0,d.Z)(e.debugShowBoundingVolume,!1),this.rtcCenter=e.rtcCenter,(0,l.Z)(this.rtcCenter)&&(!(0,l.Z)(this.geometryInstances)||Array.isArray(this.geometryInstances)&&1!==this.geometryInstances.length))throw new f.Z("Relative-to-center rendering only supports one geometry instance.");this.shadows=(0,d.Z)(e.shadows,N.Z.DISABLED),this._translucent=void 0,this._state=G.Z.READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=[],this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1,this._readyPromise=L.Z.defer(),this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}function q(e){var t,n=e.length,r=[],i=e[0].attributes;for(t in i)if(i.hasOwnProperty(t)&&(0,l.Z)(i[t])){for(var a=i[t],o=!0,s=1;s<n;++s){var c=e[s].attributes[t];if(!(0,l.Z)(c)||a.componentDatatype!==c.componentDatatype||a.componentsPerAttribute!==c.componentsPerAttribute||a.normalize!==c.normalize){o=!1;break}}o&&r.push(t)}return r}Object.defineProperties(U.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}}});var j=new i.Z,W=new a.Z,$=new o.Z;function Y(e){var t=e.length;return 1===t?e[0]:2===t?i.Z.unpack(e,0,j):3===t?a.Z.unpack(e,0,W):4===t?o.Z.unpack(e,0,$):void 0}function Q(e,t){var n=e.geometryInstances,r=Array.isArray(n)?n:[n],i=r.length;if(0!==i){var a,o,s,c,p=q(r),m=p.length,f=[],_={},b={},g=r[0],v=g.attributes;for(o=0;o<m;++o)s=p[o],c=v[s],_[s]=o,f.push({functionName:"czm_batchTable_"+s,componentDatatype:c.componentDatatype,componentsPerAttribute:c.componentsPerAttribute,normalize:c.normalize});-1!==p.indexOf("distanceDisplayCondition")&&(f.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:u.Z.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:u.Z.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:u.Z.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:u.Z.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:u.Z.FLOAT,componentsPerAttribute:1}),b.center3DHigh=f.length-5,b.center3DLow=f.length-4,b.center2DHigh=f.length-3,b.center2DLow=f.length-2,b.radius=f.length-1),-1!==p.indexOf("offset")&&(f.push({functionName:"czm_batchTable_offset2D",componentDatatype:u.Z.FLOAT,componentsPerAttribute:3}),a=f.length-1),f.push({functionName:"czm_batchTable_pickColor",componentDatatype:u.Z.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});var Z=f.length,y=new M.Z(t,f,i);for(o=0;o<i;++o){var S=r[o];v=S.attributes;for(var w=0;w<m;++w){s=p[w],c=v[s];var C=Y(c.value),T=_[s];y.setBatchedAttribute(o,T,C)}var D={primitive:(0,d.Z)(S.pickPrimitive,e)};(0,l.Z)(S.id)&&(D.id=S.id);var A=t.createPickId(D);e._pickIds.push(A);var x=A.color,I=$;I.x=h.Z.floatToByte(x.red),I.y=h.Z.floatToByte(x.green),I.z=h.Z.floatToByte(x.blue),I.w=h.Z.floatToByte(x.alpha),y.setBatchedAttribute(o,Z-1,I)}e._batchTable=y,e._batchTableAttributeIndices=_,e._batchTableBoundingSphereAttributeIndices=b,e._batchTableOffsetAttribute2DIndex=a}}function X(e){var t;return t=Array.isArray(e.values)?e.values.slice(0):new e.values.constructor(e.values),new v.Z({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function J(e){var t,n=e.attributes,i=new Z.Z;for(var a in n)n.hasOwnProperty(a)&&(0,l.Z)(n[a])&&(i[a]=X(n[a]));if((0,l.Z)(e.indices)){var o=e.indices;t=Array.isArray(o)?o.slice(0):new o.constructor(o)}return new g.Z({attributes:i,indices:t,primitiveType:e.primitiveType,boundingSphere:r.Z.clone(e.boundingSphere)})}function K(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:w.Z.clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}var ee=/attribute\s+vec(?:3|4)\s+(.*)3DHigh;/g;function te(e){var t=F.Z.replaceMain(e,"czm_non_pick_main"),n="varying vec4 v_pickColor; \nvoid main() \n{ \n    czm_non_pick_main(); \n    v_pickColor = czm_batchTable_pickColor(batchId); \n}";return t+"\n"+n}function ne(e){return"varying vec4 v_pickColor;\n"+e}function re(e,t){if(!e.compressVertices)return t;var n=-1!==t.search(/attribute\s+vec3\s+normal;/g),r=-1!==t.search(/attribute\s+vec2\s+st;/g);if(!n&&!r)return t;var i=-1!==t.search(/attribute\s+vec3\s+tangent;/g),a=-1!==t.search(/attribute\s+vec3\s+bitangent;/g),o=r&&n?2:1;o+=i||a?1:0;var s=o>1?"vec"+o:"float",c="compressedAttributes",h="attribute "+s+" "+c+";",p="",u="";if(r){p+="vec2 st;\n";var d=o>1?c+".x":c;u+="    st = czm_decompressTextureCoordinates("+d+");\n"}n&&i&&a?(p+="vec3 normal;\nvec3 tangent;\nvec3 bitangent;\n",u+="    czm_octDecode("+c+"."+(r?"yz":"xy")+", normal, tangent, bitangent);\n"):(n&&(p+="vec3 normal;\n",u+="    normal = czm_octDecode("+c+(o>1?"."+(r?"y":"x"):"")+");\n"),i&&(p+="vec3 tangent;\n",u+="    tangent = czm_octDecode("+c+"."+(r&&n?"z":"y")+");\n"),a&&(p+="vec3 bitangent;\n",u+="    bitangent = czm_octDecode("+c+"."+(r&&n?"z":"y")+");\n"));var l=t;l=l.replace(/attribute\s+vec3\s+normal;/g,""),l=l.replace(/attribute\s+vec2\s+st;/g,""),l=l.replace(/attribute\s+vec3\s+tangent;/g,""),l=l.replace(/attribute\s+vec3\s+bitangent;/g,""),l=F.Z.replaceMain(l,"czm_non_compressed_main");var m="void main() \n{ \n"+u+"    czm_non_compressed_main(); \n}";return[h,p,l,m].join("\n")}function ie(e){var t=F.Z.replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n    gl_Position = czm_depthClamp(gl_Position);}\n",t}function ae(e){var t=F.Z.replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n#if defined(GL_EXT_frag_depth)\n    #if defined(LOG_DEPTH)\n        czm_writeLogDepth();\n    #else\n        czm_writeDepthClamp();\n    #endif\n#endif\n}\n",t="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n"+t,t}function oe(e,t){var n=e.vertexAttributes;for(var r in n)if(n.hasOwnProperty(r)&&!(0,l.Z)(t[r]))throw new f.Z("Appearance/Geometry mismatch.  The appearance requires vertex shader attribute input '"+r+"', which was not computed as part of the Geometry.  Use the appearance's vertexFormat property when constructing the geometry.")}function se(e,t){return function(){return e[t]}}U._modifyShaderPosition=function(e,t,n){var r,i="",a="",o="";while(null!==(r=ee.exec(t))){var s=r[1],c="vec4 czm_compute"+s[0].toUpperCase()+s.substr(1)+"()";"vec4 czm_computePosition()"!==c&&(i+=c+";\n"),(0,l.Z)(e.rtcCenter)?(t=t.replace(/attribute\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/attribute\s+vec(?:3|4)\s+position3DLow;/g,""),i+="uniform mat4 u_modifiedModelView;\n",a+="attribute vec4 position;\n",o+=c+"\n{\n    return u_modifiedModelView * position;\n}\n\n",t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):n?o+=c+"\n{\n    return czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow);\n}\n\n":(a+="attribute vec3 "+s+"2DHigh;\nattribute vec3 "+s+"2DLow;\n",o+=c+"\n{\n    vec4 p;\n    if (czm_morphTime == 1.0)\n    {\n        p = czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        p = czm_translateRelativeToEye("+s+"2DHigh.zxy, "+s+"2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n                czm_translateRelativeToEye("+s+"2DHigh.zxy, "+s+"2DLow.zxy),\n                czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow),\n                czm_morphTime);\n    }\n    return p;\n}\n\n")}return[i,a,t,o].join("\n")},U._appendShowToShader=function(e,t){if(!(0,l.Z)(e._batchTableAttributeIndices.show))return t;var n=F.Z.replaceMain(t,"czm_non_show_main"),r="void main() \n{ \n    czm_non_show_main(); \n    gl_Position *= czm_batchTable_show(batchId); \n}";return n+"\n"+r},U._updateColorAttribute=function(e,t,n){if(!(0,l.Z)(e._batchTableAttributeIndices.color)&&!(0,l.Z)(e._batchTableAttributeIndices.depthFailColor))return t;if(-1===t.search(/attribute\s+vec4\s+color;/g))return t;if(n&&!(0,l.Z)(e._batchTableAttributeIndices.depthFailColor))throw new f.Z("A depthFailColor per-instance attribute is required when using a depth fail appearance that uses a color attribute.");var r=t;return r=r.replace(/attribute\s+vec4\s+color;/g,""),r=n?r.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):r.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),r},U._updatePickColorAttribute=function(e){var t=e.replace(/attribute\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t},U._appendOffsetToShader=function(e,t){if(!(0,l.Z)(e._batchTableAttributeIndices.offset))return t;var n="attribute float batchId;\n";n+="attribute float applyOffset;";var r=t.replace(/attribute\s+float\s+batchId;/g,n),i="vec4 $1 = czm_computePosition();\n";return i+="    if (czm_sceneMode == czm_sceneMode3D)\n",i+="    {\n",i+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",i+="    }\n",i+="    else\n",i+="    {\n",i+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",i+="    }\n",r=r.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,i),r},U._appendDistanceDisplayConditionToShader=function(e,t,n){if(!(0,l.Z)(e._batchTableAttributeIndices.distanceDisplayCondition))return t;var r=F.Z.replaceMain(t,"czm_non_distanceDisplayCondition_main"),i="void main() \n{ \n    czm_non_distanceDisplayCondition_main(); \n    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);\n    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);\n    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);\n    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);\n";return i+=n?"    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n":"    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);\n    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);\n    vec4 centerRTE;\n    if (czm_morphTime == 1.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);\n    }\n    else\n    {\n        centerRTE = czm_columbusViewMorph(\n                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),\n                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),\n                czm_morphTime);\n    }\n",i+="    float radiusSq = boundingSphereRadius * boundingSphereRadius; \n    float distanceSq; \n    if (czm_sceneMode == czm_sceneMode2D) \n    { \n        distanceSq = czm_eyeHeight2D.y - radiusSq; \n    } \n    else \n    { \n        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; \n    } \n    distanceSq = max(distanceSq, 0.0); \n    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; \n    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; \n    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; \n    gl_Position *= show; \n}",r+"\n"+i};var ce,he=Math.max(b.Z.hardwareConcurrency-1,1),pe=new A.Z("combineGeometry");function ue(e,t){var n,r,i,a,o=e._instanceIds;if(e._state===G.Z.READY){n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];var s,c=e._numberOfInstances=n.length,h=[],p=[];for(i=0;i<c;++i){if(r=n[i].geometry,o.push(n[i].id),!(0,l.Z)(r._workerName))throw new f.Z("_workerName must be defined for asynchronous geometry.");p.push({moduleName:r._workerName,geometry:r})}if(!(0,l.Z)(ce))for(ce=new Array(he),i=0;i<he;i++)ce[i]=new A.Z("createGeometry");for(p=(0,D.Z)(p,he),i=0;i<p.length;i++){var u,m=0,_=p[i],b=_.length;for(a=0;a<b;++a)s=_[a],r=s.geometry,(0,l.Z)(r.constructor.pack)&&(s.offset=m,m+=(0,d.Z)(r.constructor.packedLength,r.packedLength));if(m>0){var g=new Float64Array(m);for(u=[g.buffer],a=0;a<b;++a)s=_[a],r=s.geometry,(0,l.Z)(r.constructor.pack)&&(r.constructor.pack(r,g,s.offset),s.geometry=g)}h.push(ce[i].scheduleTask({subTasks:p[i]},u))}e._state=G.Z.CREATING,L.Z.all(h,(function(t){e._createGeometryResults=t,e._state=G.Z.CREATED})).otherwise((function(n){Re(e,t,G.Z.FAILED,n)}))}else if(e._state===G.Z.CREATED){var v=[];n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];var Z=t.scene3DOnly,y=t.mapProjection,S=pe.scheduleTask(V.Z.packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:n,ellipsoid:y.ellipsoid,projection:y,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:Z,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},v),v);e._createGeometryResults=void 0,e._state=G.Z.COMBINING,(0,L.Z)(S,(function(n){var r=V.Z.unpackCombineGeometryResults(n);e._geometries=r.geometries,e._attributeLocations=r.attributeLocations,e.modelMatrix=w.Z.clone(r.modelMatrix,e.modelMatrix),e._pickOffsets=r.pickOffsets,e._offsetInstanceExtend=r.offsetInstanceExtend,e._instanceBoundingSpheres=r.boundingSpheres,e._instanceBoundingSpheresCV=r.boundingSpheresCV,(0,l.Z)(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=G.Z.COMBINED):Re(e,t,G.Z.FAILED,void 0)})).otherwise((function(n){Re(e,t,G.Z.FAILED,n)}))}}function de(e,t){var n,r,i=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],a=e._numberOfInstances=i.length,o=new Array(a),s=e._instanceIds,c=0;for(r=0;r<a;r++){n=i[r];var h,p=n.geometry;h=(0,l.Z)(p.attributes)&&(0,l.Z)(p.primitiveType)?J(p):p.constructor.createGeometry(p),o[c++]=K(n,h),s.push(n.id)}o.length=c;var u=t.scene3DOnly,d=t.mapProjection,m=V.Z.combineGeometry({instances:o,ellipsoid:d.ellipsoid,projection:d,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:u,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=m.geometries,e._attributeLocations=m.attributeLocations,e.modelMatrix=w.Z.clone(m.modelMatrix,e.modelMatrix),e._pickOffsets=m.pickOffsets,e._offsetInstanceExtend=m.offsetInstanceExtend,e._instanceBoundingSpheres=m.boundingSpheres,e._instanceBoundingSpheresCV=m.boundingSpheresCV,(0,l.Z)(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=G.Z.COMBINED):Re(e,t,G.Z.FAILED,void 0)}function le(e,t){var n=e._batchTableAttributeIndices.offset;if(e._recomputeBoundingSpheres&&(0,l.Z)(n)){var i,o=e._offsetInstanceExtend,s=e._instanceBoundingSpheres,c=s.length,h=e._tempBoundingSpheres;if(!(0,l.Z)(h)){for(h=new Array(c),i=0;i<c;i++)h[i]=new r.Z;e._tempBoundingSpheres=h}for(i=0;i<c;++i){var p=h[i],u=e._batchTable.getBatchedAttribute(i,n,new a.Z);p=s[i].clone(p),Oe(p,u,o[i])}var d=[],m=[],f=[];for(i=0;i<c;++i){var _=h[i],b=_.center.x-_.radius;b>0||r.Z.intersectPlane(_,C.Z.ORIGIN_ZX_PLANE)!==S.Z.INTERSECTING?d.push(_):(m.push(_),f.push(_))}var g=d[0],v=f[0],Z=m[0];for(i=1;i<d.length;i++)g=r.Z.union(g,d[i]);for(i=1;i<f.length;i++)v=r.Z.union(v,f[i]);for(i=1;i<m.length;i++)Z=r.Z.union(Z,m[i]);var y=[];for((0,l.Z)(g)&&y.push(g),(0,l.Z)(v)&&y.push(v),(0,l.Z)(Z)&&y.push(Z),i=0;i<y.length;i++){var w=y[i].clone(e._boundingSpheres[i]);e._boundingSpheres[i]=w,e._boundingSphereCV[i]=r.Z.projectTo2D(w,t.mapProjection,e._boundingSphereCV[i])}U._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}else e._recomputeBoundingSpheres=!1}var me=new _.Z,fe=new s.Z,_e=new a.Z,be=new r.Z;function ge(e,t){var n=(0,l.Z)(e._batchTableAttributeIndices.distanceDisplayCondition);if(n&&!e._batchTableBoundingSpheresUpdated){for(var i=e._batchTableBoundingSphereAttributeIndices,a=i.center3DHigh,o=i.center3DLow,s=i.center2DHigh,c=i.center2DLow,h=i.radius,p=t.mapProjection,u=p.ellipsoid,d=e._batchTable,m=e._instanceBoundingSpheres,f=m.length,b=0;b<f;++b){var g=m[b];if((0,l.Z)(g)){var v=e.modelMatrix;(0,l.Z)(v)&&(g=r.Z.transform(g,v,be));var Z=g.center,y=g.radius,S=_.Z.fromCartesian(Z,me);if(d.setBatchedAttribute(b,a,S.high),d.setBatchedAttribute(b,o,S.low),!t.scene3DOnly){var w=u.cartesianToCartographic(Z,fe),C=p.project(w,_e);S=_.Z.fromCartesian(C,me),d.setBatchedAttribute(b,s,S.high),d.setBatchedAttribute(b,c,S.low)}d.setBatchedAttribute(b,h,y)}}e._batchTableBoundingSpheresUpdated=!0}}var ve=new a.Z,Ze=new a.Z;function ye(e,t){var n=(0,l.Z)(e._batchTableAttributeIndices.offset);if(n&&!e._batchTableOffsetsUpdated&&!t.scene3DOnly){for(var i=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,s=o.ellipsoid,c=e._batchTable,h=e._instanceBoundingSpheres,p=h.length,u=0;u<p;++u){var d=h[u];if((0,l.Z)(d)){var m=c.getBatchedAttribute(u,e._batchTableAttributeIndices.offset);if(a.Z.equals(m,a.Z.ZERO))c.setBatchedAttribute(u,i,a.Z.ZERO);else{var f=e.modelMatrix;(0,l.Z)(f)&&(d=r.Z.transform(d,f,be));var _=d.center;_=s.scaleToGeodeticSurface(_,Ze);var b=s.cartesianToCartographic(_,fe),g=o.project(b,_e),v=a.Z.add(m,_,ve);b=s.cartesianToCartographic(v,b);var Z=o.project(b,ve),y=a.Z.subtract(Z,g,ve),S=y.x;y.x=y.z,y.z=y.y,y.y=S,c.setBatchedAttribute(u,i,y)}}}e._batchTableOffsetsUpdated=!0}}function Se(e,t){for(var n=e._attributeLocations,i=e._geometries,a=t.scene3DOnly,o=t.context,s=[],c=i.length,h=0;h<c;++h){var p=i[h];if(s.push(E.Z.fromGeometry({context:o,geometry:p,attributeLocations:n,bufferUsage:x.Z.STATIC_DRAW,interleave:e._interleave})),(0,l.Z)(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,p);else if(e._boundingSpheres.push(r.Z.clone(p.boundingSphere)),e._boundingSphereWC.push(new r.Z),!a){var u=p.boundingSphereCV.center,d=u.x,m=u.y,f=u.z;u.x=f,u.y=d,u.z=m,e._boundingSphereCV.push(r.Z.clone(p.boundingSphereCV)),e._boundingSphere2D.push(new r.Z),e._boundingSphereMorph.push(new r.Z)}}e._va=s,e._primitiveType=i[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0),e._geometries=void 0,Re(e,t,G.Z.COMPLETE,void 0)}function we(e,t,n,r){var i,a=n.getRenderState();r?(i=(0,c.Z)(a,!1),i.cull={enabled:!0,face:R.Z.BACK},e._frontFaceRS=O.Z.fromCache(i),i.cull.face=R.Z.FRONT,e._backFaceRS=O.Z.fromCache(i)):(e._frontFaceRS=O.Z.fromCache(a),e._backFaceRS=e._frontFaceRS),i=(0,c.Z)(a,!1),(0,l.Z)(e._depthFailAppearance)&&(i.depthTest.enabled=!1),(0,l.Z)(e._depthFailAppearance)&&(a=e._depthFailAppearance.getRenderState(),i=(0,c.Z)(a,!1),i.depthTest.func=B.Z.GREATER,r?(i.cull={enabled:!0,face:R.Z.BACK},e._frontFaceDepthFailRS=O.Z.fromCache(i),i.cull.face=R.Z.FRONT,e._backFaceDepthFailRS=O.Z.fromCache(i)):(e._frontFaceDepthFailRS=O.Z.fromCache(i),e._backFaceDepthFailRS=e._frontFaceRS))}function Ce(e,t,n){var r=t.context,i=e._attributeLocations,a=e._batchTable.getVertexShaderCallback()(n.vertexShaderSource);a=U._appendOffsetToShader(e,a),a=U._appendShowToShader(e,a),a=U._appendDistanceDisplayConditionToShader(e,a,t.scene3DOnly),a=te(a),a=U._updateColorAttribute(e,a,!1),a=re(e,a),a=U._modifyShaderPosition(e,a,t.scene3DOnly);var o=n.getFragmentShaderSource();o=ne(o),e._sp=z.Z.replaceCache({context:r,shaderProgram:e._sp,vertexShaderSource:a,fragmentShaderSource:o,attributeLocations:i}),oe(e._sp,i),(0,l.Z)(e._depthFailAppearance)&&(a=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),a=U._appendShowToShader(e,a),a=U._appendDistanceDisplayConditionToShader(e,a,t.scene3DOnly),a=te(a),a=U._updateColorAttribute(e,a,!0),a=re(e,a),a=U._modifyShaderPosition(e,a,t.scene3DOnly),a=ie(a),o=e._depthFailAppearance.getFragmentShaderSource(),o=ne(o),o=ae(o),e._spDepthFail=z.Z.replaceCache({context:r,shaderProgram:e._spDepthFail,vertexShaderSource:a,fragmentShaderSource:o,attributeLocations:i}),oe(e._spDepthFail,i))}var Te=new w.Z,De=new a.Z;function Ae(e,t,n,r){var i=(0,l.Z)(n)?n._uniforms:void 0,a={},o=t.uniforms;if((0,l.Z)(o))for(var s in o)if(o.hasOwnProperty(s)){if((0,l.Z)(i)&&(0,l.Z)(i[s]))throw new f.Z("Appearance and material have a uniform with the same name: "+s);a[s]=se(o,s)}var c=(0,p.Z)(a,i);return c=e._batchTable.getUniformMapCallback()(c),(0,l.Z)(e.rtcCenter)&&(c.u_modifiedModelView=function(){var t=r.context.uniformState.view;return w.Z.multiply(t,e._modelMatrix,Te),w.Z.multiplyByPoint(Te,e.rtcCenter,De),w.Z.setTranslation(Te,De,Te),Te}),c}function xe(e,t,n,r,i,a,o,s){var c,h=Ae(e,t,n,s);(0,l.Z)(e._depthFailAppearance)&&(c=Ae(e,e._depthFailAppearance,e._depthFailAppearance.material,s));var p=r?P.Z.TRANSLUCENT:P.Z.OPAQUE,u=i?2:1;u*=(0,l.Z)(e._depthFailAppearance)?2:1,a.length=e._va.length*u;for(var d=a.length,m=0,f=0;f<d;++f){var _;i&&(_=a[f],(0,l.Z)(_)||(_=a[f]=new k.Z({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._backFaceRS,_.shaderProgram=e._sp,_.uniformMap=h,_.pass=p,++f),_=a[f],(0,l.Z)(_)||(_=a[f]=new k.Z({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._frontFaceRS,_.shaderProgram=e._sp,_.uniformMap=h,_.pass=p,(0,l.Z)(e._depthFailAppearance)&&(i&&(++f,_=a[f],(0,l.Z)(_)||(_=a[f]=new k.Z({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._backFaceDepthFailRS,_.shaderProgram=e._spDepthFail,_.uniformMap=c,_.pass=p),++f,_=a[f],(0,l.Z)(_)||(_=a[f]=new k.Z({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._frontFaceDepthFailRS,_.shaderProgram=e._spDepthFail,_.uniformMap=c,_.pass=p),++m}}function Ie(e,t,n,r,i,a,o,s){if(t.mode!==H.Z.SCENE3D&&!w.Z.equals(i,w.Z.IDENTITY))throw new f.Z("Primitive.modelMatrix is only supported in 3D mode.");var c;U._updateBoundingVolumes(e,t,i),t.mode===H.Z.SCENE3D?c=e._boundingSphereWC:t.mode===H.Z.COLUMBUS_VIEW?c=e._boundingSphereCV:t.mode===H.Z.SCENE2D&&(0,l.Z)(e._boundingSphere2D)?c=e._boundingSphere2D:(0,l.Z)(e._boundingSphereMorph)&&(c=e._boundingSphereMorph);var h=t.commandList,p=t.passes;if(p.render||p.pick){var u=e.allowPicking,d=N.Z.castShadows(e.shadows),m=N.Z.receiveShadows(e.shadows),_=n.length,b=s?2:1;b*=(0,l.Z)(e._depthFailAppearance)?2:1;for(var g=0;g<_;++g){var v=Math.floor(g/b),Z=n[g];Z.modelMatrix=i,Z.boundingVolume=c[v],Z.cull=a,Z.debugShowBoundingVolume=o,Z.castShadows=d,Z.receiveShadows=m,Z.pickId=u?"v_pickColor":void 0,h.push(Z)}}}U._updateBoundingVolumes=function(e,t,n,i){var a,o,s;if(i||!w.Z.equals(n,e._modelMatrix))for(w.Z.clone(n,e._modelMatrix),o=e._boundingSpheres.length,a=0;a<o;++a)s=e._boundingSpheres[a],(0,l.Z)(s)&&(e._boundingSphereWC[a]=r.Z.transform(s,n,e._boundingSphereWC[a]),t.scene3DOnly||(e._boundingSphere2D[a]=r.Z.clone(e._boundingSphereCV[a],e._boundingSphere2D[a]),e._boundingSphere2D[a].center.x=0,e._boundingSphereMorph[a]=r.Z.union(e._boundingSphereWC[a],e._boundingSphereCV[a])));var c=e.appearance.pixelSize;if((0,l.Z)(c))for(o=e._boundingSpheres.length,a=0;a<o;++a){s=e._boundingSpheres[a];var h=e._boundingSphereWC[a],p=t.camera.getPixelSize(s,t.context.drawingBufferWidth,t.context.drawingBufferHeight),u=p*c;h.radius=s.radius+u}},U.prototype.update=function(e){if(!(!(0,l.Z)(this.geometryInstances)&&0===this._va.length||(0,l.Z)(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&0===this.geometryInstances.length||!(0,l.Z)(this.appearance)||e.mode!==H.Z.SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)){if((0,l.Z)(this._error))throw this._error;if((0,l.Z)(this.rtcCenter)&&!e.scene3DOnly)throw new f.Z("RTC rendering is only available for 3D only scenes.");if(this._state!==G.Z.FAILED){var t=e.context;if((0,l.Z)(this._batchTable)||Q(this,t),this._batchTable.attributes.length>0){if(0===I.Z.maximumVertexTextureImageUnits)throw new T.Z("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==G.Z.COMPLETE&&this._state!==G.Z.COMBINED&&(this.asynchronous?ue(this,e):de(this,e)),this._state===G.Z.COMBINED&&(ge(this,e),ye(this,e),Se(this,e)),this.show&&this._state===G.Z.COMPLETE){this._batchTableOffsetsUpdated||ye(this,e),this._recomputeBoundingSpheres&&le(this,e);var n=this.appearance,r=n.material,i=!1,a=!1;this._appearance!==n?(this._appearance=n,this._material=r,i=!0,a=!0):this._material!==r&&(this._material=r,a=!0);var o=this.depthFailAppearance,s=(0,l.Z)(o)?o.material:void 0;this._depthFailAppearance!==o?(this._depthFailAppearance=o,this._depthFailMaterial=s,i=!0,a=!0):this._depthFailMaterial!==s&&(this._depthFailMaterial=s,a=!0);var c=this._appearance.isTranslucent();this._translucent!==c&&(this._translucent=c,i=!0),(0,l.Z)(this._material)&&this._material.update(t);var h=n.closed&&c;if(i){var p=(0,d.Z)(this._createRenderStatesFunction,we);p(this,t,n,h)}if(a){var u=(0,d.Z)(this._createShaderProgramFunction,Ce);u(this,e,n)}if(i||a){var m=(0,d.Z)(this._createCommandsFunction,xe);m(this,n,r,c,h,this._colorCommands,this._pickCommands,e)}var _=(0,d.Z)(this._updateAndQueueCommandsFunction,Ie);_(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,h)}}}};var ke=new r.Z,Pe=new r.Z;function Oe(e,t,n){if(n===y.Z.TOP){var i=r.Z.clone(e,ke),o=r.Z.clone(e,Pe);o.center=a.Z.add(o.center,t,o.center),e=r.Z.union(i,o,e)}else n===y.Z.ALL&&(e.center=a.Z.add(e.center,t,e.center));return e}function ze(e,t,n){return function(){var r=e.getBatchedAttribute(t,n),i=e.attributes[n],a=i.componentsPerAttribute,o=u.Z.createTypedArray(i.componentDatatype,a);return(0,l.Z)(r.constructor.pack)?r.constructor.pack(r,o,0):o[0]=r,o}}function Fe(e,t,n,r,i){return function(a){if(!(0,l.Z)(a)||!(0,l.Z)(a.length)||a.length<1||a.length>4)throw new f.Z("value must be and array with length between 1 and 4.");var o=Y(a);e.setBatchedAttribute(t,n,o),"offset"===i&&(r._recomputeBoundingSpheres=!0,r._batchTableOffsetsUpdated=!1)}}var Ee=new a.Z;function Le(e,t,n){t.boundingSphere={get:function(){var i=e._instanceBoundingSpheres[n];if((0,l.Z)(i)){i=i.clone();var o=e.modelMatrix,s=t.offset;(0,l.Z)(s)&&Oe(i,a.Z.fromArray(s.get(),0,Ee),e._offsetInstanceExtend[n]),(0,l.Z)(o)&&(i=r.Z.transform(i,o))}return i}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[n]}}}function Me(e,t,n){t.pickId={get:function(){return e._pickIds[n]}}}function Re(e,t,n,r){e._error=r,e._state=n,t.afterRender.push((function(){e._ready=e._state===G.Z.COMPLETE||e._state===G.Z.FAILED,(0,l.Z)(r)?e._readyPromise.reject(r):e._readyPromise.resolve(e)}))}U.prototype.getGeometryInstanceAttributes=function(e){if(!(0,l.Z)(e))throw new f.Z("id is required");if(!(0,l.Z)(this._batchTable))throw new f.Z("must call update before calling getGeometryInstanceAttributes");for(var t=-1,n=this._lastPerInstanceAttributeIndex,r=this._instanceIds,i=r.length,a=0;a<i;++a){var o=(n+a)%i;if(e===r[o]){t=o;break}}if(-1!==t){var s=this._perInstanceAttributeCache[t];if((0,l.Z)(s))return s;var c=this._batchTable,h=this._batchTableAttributeIndices;s={};var p={};for(var u in h)if(h.hasOwnProperty(u)){var d=h[u];p[u]={get:ze(c,t,d),set:Fe(c,t,d,this,u)}}return Le(this,p,t),Me(this,p,t),Object.defineProperties(s,p),this._lastPerInstanceAttributeIndex=t,this._perInstanceAttributeCache[t]=s,s}},U.prototype.isDestroyed=function(){return!1},U.prototype.destroy=function(){var e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();var n=this._va;for(e=n.length,t=0;t<e;++t)n[t].destroy();this._va=void 0;var r=this._pickIds;for(e=r.length,t=0;t<e;++t)r[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,(0,m.Z)(this)},t["Z"]=U},73316:function(e,t,n){var r=n(39960),i=n(62200),a=n(82982),o=n(86511),s=n(12572);function c(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),this._primitives=[],this._guid=(0,r.Z)(),this._zIndex=void 0,this.show=(0,i.Z)(e.show,!0),this.destroyPrimitives=(0,i.Z)(e.destroyPrimitives,!0)}function h(e,t){if(!e.contains(t))throw new s.Z("primitive is not in this collection.");return e._primitives.indexOf(t)}Object.defineProperties(c.prototype,{length:{get:function(){return this._primitives.length}}}),c.prototype.add=function(e,t){var n=(0,a.Z)(t);if(!(0,a.Z)(e))throw new s.Z("primitive is required.");if(n){if(t<0)throw new s.Z("index must be greater than or equal to zero.");if(t>this._primitives.length)throw new s.Z("index must be less than or equal to the number of primitives.")}var r=e._external=e._external||{},i=r._composites=r._composites||{};return i[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),e},c.prototype.remove=function(e){if(this.contains(e)){var t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},c.prototype.removeAndDestroy=function(e){var t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},c.prototype.removeAll=function(){for(var e=this._primitives,t=e.length,n=0;n<t;++n)delete e[n]._external._composites[this._guid],this.destroyPrimitives&&e[n].destroy();this._primitives=[]},c.prototype.contains=function(e){return!!((0,a.Z)(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},c.prototype.raise=function(e){if((0,a.Z)(e)){var t=h(this,e),n=this._primitives;if(t!==n.length-1){var r=n[t];n[t]=n[t+1],n[t+1]=r}}},c.prototype.raiseToTop=function(e){if((0,a.Z)(e)){var t=h(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}},c.prototype.lower=function(e){if((0,a.Z)(e)){var t=h(this,e),n=this._primitives;if(0!==t){var r=n[t];n[t]=n[t-1],n[t-1]=r}}},c.prototype.lowerToBottom=function(e){if((0,a.Z)(e)){var t=h(this,e),n=this._primitives;0!==t&&(n.splice(t,1),n.unshift(e))}},c.prototype.get=function(e){if(!(0,a.Z)(e))throw new s.Z("index is required.");return this._primitives[e]},c.prototype.update=function(e){if(this.show)for(var t=this._primitives,n=0;n<t.length;++n)t[n].update(e)},c.prototype.prePassesUpdate=function(e){for(var t=this._primitives,n=0;n<t.length;++n){var r=t[n];(0,a.Z)(r.prePassesUpdate)&&r.prePassesUpdate(e)}},c.prototype.updateForPass=function(e,t){for(var n=this._primitives,r=0;r<n.length;++r){var i=n[r];(0,a.Z)(i.updateForPass)&&i.updateForPass(e,t)}},c.prototype.postPassesUpdate=function(e){for(var t=this._primitives,n=0;n<t.length;++n){var r=t[n];(0,a.Z)(r.postPassesUpdate)&&r.postPassesUpdate(e)}},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),(0,o.Z)(this)},t["Z"]=c},1764:function(e,t,n){var r=n(48243),i=n(84828),a=n(62200),o=n(82982),s=n(12572),c=n(50491),h=n(39756),p=n(82408),u=n(13616),d=n(56652),l=n(57552),m=n(22832),f=n(72248),_=n(82223),b=n(79962);function g(e,t,n){var r,i=!n,a=e.length;if(!i&&a>1){var s=e[0].modelMatrix;for(r=1;r<a;++r)if(!f.Z.equals(s,e[r].modelMatrix)){i=!0;break}}if(i)for(r=0;r<a;++r)(0,o.Z)(e[r].geometry)&&l.Z.transformToWorldCoordinates(e[r]);else f.Z.multiplyTransformation(t,e[0].modelMatrix,t)}function v(e,t){var n=e.attributes,r=n.position,a=r.values.length/r.componentsPerAttribute;n.batchId=new u.Z({componentDatatype:i.Z.FLOAT,componentsPerAttribute:1,values:new Float32Array(a)});for(var o=n.batchId.values,s=0;s<a;++s)o[s]=t}function Z(e){for(var t=e.length,n=0;n<t;++n){var r=e[n];(0,o.Z)(r.geometry)?v(r.geometry,n):(0,o.Z)(r.westHemisphereGeometry)&&(0,o.Z)(r.eastHemisphereGeometry)&&(v(r.westHemisphereGeometry,n),v(r.eastHemisphereGeometry,n))}}function y(e){var t,n,a,c=e.instances,h=e.projection,p=e.elementIndexUintSupported,u=e.scene3DOnly,d=e.vertexCacheOptimize,m=e.compressVertices,f=e.modelMatrix,_=c.length;for(t=0;t<_;++t)if((0,o.Z)(c[t].geometry)){a=c[t].geometry.primitiveType;break}for(t=1;t<_;++t)if((0,o.Z)(c[t].geometry)&&c[t].geometry.primitiveType!==a)throw new s.Z("All instance geometries must have the same primitiveType.");if(g(c,f,u),!u)for(t=0;t<_;++t)(0,o.Z)(c[t].geometry)&&l.Z.splitLongitude(c[t]);if(Z(c),d)for(t=0;t<_;++t){var b=c[t];(0,o.Z)(b.geometry)?(l.Z.reorderForPostVertexCache(b.geometry),l.Z.reorderForPreVertexCache(b.geometry)):(0,o.Z)(b.westHemisphereGeometry)&&(0,o.Z)(b.eastHemisphereGeometry)&&(l.Z.reorderForPostVertexCache(b.westHemisphereGeometry),l.Z.reorderForPreVertexCache(b.westHemisphereGeometry),l.Z.reorderForPostVertexCache(b.eastHemisphereGeometry),l.Z.reorderForPreVertexCache(b.eastHemisphereGeometry))}var v=l.Z.combineInstances(c);for(_=v.length,t=0;t<_;++t){n=v[t];var y,S=n.attributes;if(u)for(y in S)S.hasOwnProperty(y)&&S[y].componentDatatype===i.Z.DOUBLE&&l.Z.encodeAttribute(n,y,y+"3DHigh",y+"3DLow");else for(y in S)if(S.hasOwnProperty(y)&&S[y].componentDatatype===i.Z.DOUBLE){var w=y+"3D",C=y+"2D";l.Z.projectTo2D(n,y,w,C,h),(0,o.Z)(n.boundingSphere)&&"position"===y&&(n.boundingSphereCV=r.Z.fromVertices(n.attributes.position2D.values)),l.Z.encodeAttribute(n,w,w+"High",w+"Low"),l.Z.encodeAttribute(n,C,C+"High",C+"Low")}m&&l.Z.compressVertices(n)}if(!p){var T=[];for(_=v.length,t=0;t<_;++t)n=v[t],T=T.concat(l.Z.fitToUnsignedShortIndices(n));v=T}return v}function S(e,t,n,r){var i,a,s,c=r.length-1;if(c>=0){var h=r[c];i=h.offset+h.count,s=h.index,a=n[s].indices.length}else i=0,s=0,a=n[s].indices.length;for(var p=e.length,u=0;u<p;++u){var d=e[u],l=d[t];if((0,o.Z)(l)){var m=l.indices.length;i+m>a&&(i=0,a=n[++s].indices.length),r.push({index:s,offset:i,count:m}),i+=m}}}function w(e,t){var n=[];return S(e,"geometry",t,n),S(e,"westHemisphereGeometry",t,n),S(e,"eastHemisphereGeometry",t,n),n}var C={};function T(e,t){var n=e.attributes;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];(0,o.Z)(i)&&(0,o.Z)(i.values)&&t.push(i.values.buffer)}(0,o.Z)(e.indices)&&t.push(e.indices.buffer)}function D(e,t){for(var n=e.length,r=0;r<n;++r)T(e[r],t)}function A(e){for(var t=1,n=e.length,i=0;i<n;i++){var a=e[i];if(++t,(0,o.Z)(a)){var s=a.attributes;for(var c in t+=7+2*r.Z.packedLength+((0,o.Z)(a.indices)?a.indices.length:0),s)if(s.hasOwnProperty(c)&&(0,o.Z)(s[c])){var h=s[c];t+=5+h.values.length}}}return t}function x(e,t){var n=e.length,r=new Float64Array(1+19*n),i=0;r[i++]=n;for(var a=0;a<n;a++){var s=e[a];if(f.Z.pack(s.modelMatrix,r,i),i+=f.Z.packedLength,(0,o.Z)(s.attributes)&&(0,o.Z)(s.attributes.offset)){var c=s.attributes.offset.value;r[i]=c[0],r[i+1]=c[1],r[i+2]=c[2]}i+=3}return t.push(r.buffer),r}function I(e){var t=e,n=new Array(t[0]),r=0,i=1;while(i<t.length){var a,s=f.Z.unpack(t,i);i+=f.Z.packedLength,(0,o.Z)(t[i])&&(a={offset:new _.Z(t[i],t[i+1],t[i+2])}),i+=3,n[r++]={modelMatrix:s,attributes:a}}return n}function k(e){var t=e.length,n=1+(r.Z.packedLength+1)*t,i=new Float32Array(n),a=0;i[a++]=t;for(var s=0;s<t;++s){var c=e[s];(0,o.Z)(c)?(i[a++]=1,r.Z.pack(e[s],i,a)):i[a++]=0,a+=r.Z.packedLength}return i}function P(e){var t=new Array(e[0]),n=0,i=1;while(i<e.length)1===e[i++]&&(t[n]=r.Z.unpack(e,i)),++n,i+=r.Z.packedLength;return t}C.combineGeometry=function(e){var t,n,i,a,s=e.instances,c=s.length,h=!1;c>0&&(t=y(e),t.length>0&&(n=l.Z.createAttributeLocations(t[0]),e.createPickOffsets&&(i=w(s,t))),(0,o.Z)(s[0].attributes)&&(0,o.Z)(s[0].attributes.offset)&&(a=new Array(c),h=!0));for(var p=new Array(c),u=new Array(c),d=0;d<c;++d){var m=s[d],f=m.geometry;(0,o.Z)(f)&&(p[d]=f.boundingSphere,u[d]=f.boundingSphereCV,h&&(a[d]=m.geometry.offsetAttribute));var _=m.eastHemisphereGeometry,b=m.westHemisphereGeometry;(0,o.Z)(_)&&(0,o.Z)(b)&&((0,o.Z)(_.boundingSphere)&&(0,o.Z)(b.boundingSphere)&&(p[d]=r.Z.union(_.boundingSphere,b.boundingSphere)),(0,o.Z)(_.boundingSphereCV)&&(0,o.Z)(b.boundingSphereCV)&&(u[d]=r.Z.union(_.boundingSphereCV,b.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:n,pickOffsets:i,offsetInstanceExtend:a,boundingSpheres:p,boundingSpheresCV:u}},C.packCreateGeometryResults=function(e,t){var n=new Float64Array(A(e)),i=[],s={},c=e.length,h=0;n[h++]=c;for(var p=0;p<c;p++){var u=e[p],d=(0,o.Z)(u);if(n[h++]=d?1:0,d){n[h++]=u.primitiveType,n[h++]=u.geometryType,n[h++]=(0,a.Z)(u.offsetAttribute,-1);var l=(0,o.Z)(u.boundingSphere)?1:0;n[h++]=l,l&&r.Z.pack(u.boundingSphere,n,h),h+=r.Z.packedLength;var m=(0,o.Z)(u.boundingSphereCV)?1:0;n[h++]=m,m&&r.Z.pack(u.boundingSphereCV,n,h),h+=r.Z.packedLength;var f=u.attributes,_=[];for(var b in f)f.hasOwnProperty(b)&&(0,o.Z)(f[b])&&(_.push(b),(0,o.Z)(s[b])||(s[b]=i.length,i.push(b)));n[h++]=_.length;for(var g=0;g<_.length;g++){var v=_[g],Z=f[v];n[h++]=s[v],n[h++]=Z.componentDatatype,n[h++]=Z.componentsPerAttribute,n[h++]=Z.normalize?1:0,n[h++]=Z.values.length,n.set(Z.values,h),h+=Z.values.length}var y=(0,o.Z)(u.indices)?u.indices.length:0;n[h++]=y,y>0&&(n.set(u.indices,h),h+=y)}}return t.push(n.buffer),{stringTable:i,packedData:n}},C.unpackCreateGeometryResults=function(e){var t,n=e.stringTable,a=e.packedData,o=new Array(a[0]),s=0,c=1;while(c<a.length){var h=1===a[c++];if(h){var l,f,_=a[c++],b=a[c++],g=a[c++];-1===g&&(g=void 0);var v=1===a[c++];v&&(l=r.Z.unpack(a,c)),c+=r.Z.packedLength;var Z,y,S,w=1===a[c++];w&&(f=r.Z.unpack(a,c)),c+=r.Z.packedLength;var C,T=new d.Z,D=a[c++];for(t=0;t<D;t++){var A=n[a[c++]],x=a[c++];S=a[c++];var I=0!==a[c++];Z=a[c++],y=i.Z.createTypedArray(x,Z);for(var k=0;k<Z;k++)y[k]=a[c++];T[A]=new u.Z({componentDatatype:x,componentsPerAttribute:S,normalize:I,values:y})}if(Z=a[c++],Z>0){var P=y.length/S;for(C=m.Z.createTypedArray(P,Z),t=0;t<Z;t++)C[t]=a[c++]}o[s++]=new p.Z({primitiveType:_,geometryType:b,boundingSphere:l,boundingSphereCV:f,indices:C,attributes:T,offsetAttribute:g})}else o[s++]=void 0}return o},C.packCombineGeometryParameters=function(e,t){for(var n=e.createGeometryResults,r=n.length,i=0;i<r;i++)t.push(n[i].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:x(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof h.Z,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}},C.unpackCombineGeometryParameters=function(e){for(var t=I(e.packedInstances),n=e.createGeometryResults,r=n.length,i=0,a=0;a<r;a++)for(var o=C.unpackCreateGeometryResults(n[a]),s=o.length,p=0;p<s;p++){var u=o[p],d=t[i];d.geometry=u,++i}var l=c.Z.clone(e.ellipsoid),m=e.isGeographic?new h.Z(l):new b.Z(l);return{instances:t,ellipsoid:l,projection:m,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:f.Z.clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}},C.packCombineGeometryResults=function(e,t){(0,o.Z)(e.geometries)&&D(e.geometries,t);var n=k(e.boundingSpheres),r=k(e.boundingSpheresCV);return t.push(n.buffer,r.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:n,boundingSpheresCV:r}},C.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:P(e.boundingSpheres),boundingSpheresCV:P(e.boundingSpheresCV)}},t["Z"]=C},88736:function(e,t){var n={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6};t["Z"]=Object.freeze(n)}}]);
//# sourceMappingURL=chunk-vendors-4edb97d0.27c7e546.js.map