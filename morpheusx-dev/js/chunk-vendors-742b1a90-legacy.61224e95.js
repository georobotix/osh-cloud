"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[552],{6652:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ Implicit3DTileContent; }\n/* harmony export */ });\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_combine_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8182);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86511);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(99417);\n/* harmony import */ var _Core_HilbertOrder_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(67662);\n/* harmony import */ var _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(68201);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(96190);\n/* harmony import */ var _Core_S2Cell_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(90791);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13222);\n/* harmony import */ var _ImplicitSubtree_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(61800);\n/* harmony import */ var _ImplicitTileMetadata_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(46433);\n/* harmony import */ var _hasExtension_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(81326);\n/* harmony import */ var _parseBoundingVolumeSemantics_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(19661);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A specialized {@link Cesium3DTileContent} that lazily evaluates an implicit\n * tileset. It is somewhat similar in operation to a\n * {@link Tileset3DTileContent} in that once the content is constructed, it\n * updates the tileset tree with more tiles. However, unlike external tilesets,\n * child subtrees are represented as additional placeholder nodes with\n * Implicit3DTileContent.\n * <p>\n * Implements the {@link Cesium3DTileContent} interface.\n * </p>\n *\n * @alias Implicit3DTileContent\n * @constructor\n *\n * @param {Cesium3DTileset} tileset The tileset this content belongs to\n * @param {Cesium3DTile} tile The tile this content belongs to.\n * @param {Resource} resource The resource for the tileset\n * @param {ArrayBuffer} arrayBuffer The array buffer that stores the content payload\n * @param {Number} [byteOffset=0] The offset into the array buffer\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction Implicit3DTileContent(\n  tileset,\n  tile,\n  resource,\n  arrayBuffer,\n  byteOffset\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("tile.implicitTileset", tile.implicitTileset);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("tile.implicitCoordinates", tile.implicitCoordinates);\n  //>>includeEnd(\'debug\');\n\n  var implicitTileset = tile.implicitTileset;\n  var implicitCoordinates = tile.implicitCoordinates;\n\n  this._implicitTileset = implicitTileset;\n  this._implicitCoordinates = implicitCoordinates;\n  this._implicitSubtree = undefined;\n  this._tileset = tileset;\n  this._tile = tile;\n  this._resource = resource;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].defer */ .Z.defer();\n\n  this.featurePropertiesDirty = false;\n  this._groupMetadata = undefined;\n\n  var templateValues = implicitCoordinates.getTemplateValues();\n  var subtreeResource = implicitTileset.subtreeUriTemplate.getDerivedResource({\n    templateValues: templateValues,\n  });\n  this._url = subtreeResource.getUrlComponent(true);\n\n  initialize(this, arrayBuffer, byteOffset);\n}\n\nObject.defineProperties(Implicit3DTileContent.prototype, {\n  featuresLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  pointsLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  trianglesLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  geometryByteLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  texturesByteLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  batchTableByteLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  innerContents: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  tileset: {\n    get: function () {\n      return this._tileset;\n    },\n  },\n\n  tile: {\n    get: function () {\n      return this._tile;\n    },\n  },\n\n  url: {\n    get: function () {\n      return this._url;\n    },\n  },\n\n  batchTable: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  groupMetadata: {\n    get: function () {\n      return this._groupMetadata;\n    },\n    set: function (value) {\n      this._groupMetadata = value;\n    },\n  },\n});\n\n/**\n * Initialize the implicit content by parsing the subtree resource and setting\n * up a promise chain to expand the immediate subtree.\n *\n * @param {Implicit3DTileContent} content The implicit content\n * @param {ArrayBuffer} arrayBuffer The ArrayBuffer containing a subtree binary\n * @param {Number} [byteOffset=0] The byte offset into the arrayBuffer\n * @private\n */\nfunction initialize(content, arrayBuffer, byteOffset) {\n  // Parse the subtree file\n  byteOffset = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(byteOffset, 0);\n  var uint8Array = new Uint8Array(arrayBuffer, byteOffset);\n  var subtree = new _ImplicitSubtree_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z(\n    content._resource,\n    uint8Array,\n    content._implicitTileset,\n    content._implicitCoordinates\n  );\n  content._implicitSubtree = subtree;\n\n  subtree.readyPromise\n    .then(function () {\n      expandSubtree(content, subtree);\n      content._readyPromise.resolve();\n    })\n    .otherwise(function (error) {\n      content._readyPromise.reject(error);\n    });\n}\n\n/**\n * Expand a single subtree placeholder tile. This transcodes the subtree into\n * a tree of {@link Cesium3DTile}. The root of this tree is stored in\n * the placeholder tile\'s children array. This method also creates placeholder\n * tiles for the child subtrees to be lazily expanded as needed.\n *\n * @param {Implicit3DTileContent} content The content\n * @param {ImplicitSubtree} subtree The parsed subtree\n * @private\n */\nfunction expandSubtree(content, subtree) {\n  var placeholderTile = content._tile;\n\n  // Parse the tiles inside this immediate subtree\n  var childIndex = content._implicitCoordinates.childIndex;\n  var results = transcodeSubtreeTiles(\n    content,\n    subtree,\n    placeholderTile,\n    childIndex\n  );\n\n  // Link the new subtree to the existing placeholder tile.\n  placeholderTile.children.push(results.rootTile);\n\n  // for each child subtree, make new placeholder tiles\n  var childSubtrees = listChildSubtrees(content, subtree, results.bottomRow);\n  for (var i = 0; i < childSubtrees.length; i++) {\n    var subtreeLocator = childSubtrees[i];\n    var leafTile = subtreeLocator.tile;\n    var implicitChildTile = makePlaceholderChildSubtree(\n      content,\n      leafTile,\n      subtreeLocator.childIndex\n    );\n    leafTile.children.push(implicitChildTile);\n  }\n}\n\n/**\n * A pair of (tile, childIndex) used for finding child subtrees.\n *\n * @typedef {Object} ChildSubtreeLocator\n * @property {Cesium3DTile} tile One of the tiles in the bottommost row of the subtree.\n * @property {Number} childIndex The morton index of the child tile relative to its parent\n * @private\n */\n\n/**\n * Determine what child subtrees exist and return a list of information\n *\n * @param {Implicit3DTileContent} content The implicit content\n * @param {ImplicitSubtree} subtree The subtree for looking up availability\n * @param {Array<Cesium3DTile|undefined>} bottomRow The bottom row of tiles in a transcoded subtree\n * @returns {ChildSubtreeLocator[]} A list of identifiers for the child subtrees.\n * @private\n */\nfunction listChildSubtrees(content, subtree, bottomRow) {\n  var results = [];\n  var branchingFactor = content._implicitTileset.branchingFactor;\n  for (var i = 0; i < bottomRow.length; i++) {\n    var leafTile = bottomRow[i];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(leafTile)) {\n      continue;\n    }\n\n    for (var j = 0; j < branchingFactor; j++) {\n      var index = i * branchingFactor + j;\n      if (subtree.childSubtreeIsAvailableAtIndex(index)) {\n        results.push({\n          tile: leafTile,\n          childIndex: j,\n        });\n      }\n    }\n  }\n  return results;\n}\n\n/**\n * Results of transcodeSubtreeTiles, containing the root tile of the\n * subtree and the bottom row of nodes for further processing.\n *\n * @typedef {Object} TranscodedSubtree\n * @property {Cesium3DTile} rootTile The transcoded root tile of the subtree\n * @property {Array<Cesium3DTile|undefined>} bottomRow The bottom row of transcoded tiles. This is helpful for processing child subtrees\n * @private\n */\n\n/**\n * Transcode the implicitly-defined tiles within this subtree and generate\n * explicit {@link Cesium3DTile} objects. This function only transcode tiles,\n * child subtrees are handled separately.\n *\n * @param {Implicit3DTileContent} content The implicit content\n * @param {ImplicitSubtree} subtree The subtree to get availability information\n * @param {Cesium3DTile} placeholderTile The placeholder tile, used for constructing the subtree root tile\n * @param {Number} childIndex The Morton index of the root tile relative to parentOfRootTile\n * @returns {TranscodedSubtree} The newly created subtree of tiles\n * @private\n */\nfunction transcodeSubtreeTiles(content, subtree, placeholderTile, childIndex) {\n  var rootBitIndex = 0;\n  var rootParentIsPlaceholder = true;\n  var rootTile = deriveChildTile(\n    content,\n    subtree,\n    placeholderTile,\n    childIndex,\n    rootBitIndex,\n    rootParentIsPlaceholder\n  );\n\n  // Sliding window over the levels of the tree.\n  // Each row is branchingFactor * length of previous row\n  // Tiles within a row are ordered by Morton index.\n  var parentRow = [rootTile];\n  var currentRow = [];\n\n  var implicitTileset = content._implicitTileset;\n  for (var level = 1; level < implicitTileset.subtreeLevels; level++) {\n    var levelOffset = subtree.getLevelOffset(level);\n    var numberOfChildren = implicitTileset.branchingFactor * parentRow.length;\n    for (\n      var childMortonIndex = 0;\n      childMortonIndex < numberOfChildren;\n      childMortonIndex++\n    ) {\n      var childBitIndex = levelOffset + childMortonIndex;\n\n      if (!subtree.tileIsAvailableAtIndex(childBitIndex)) {\n        currentRow.push(undefined);\n        continue;\n      }\n\n      var parentMortonIndex = subtree.getParentMortonIndex(childMortonIndex);\n      var parentTile = parentRow[parentMortonIndex];\n      var childChildIndex = childMortonIndex % implicitTileset.branchingFactor;\n      var childTile = deriveChildTile(\n        content,\n        subtree,\n        parentTile,\n        childChildIndex,\n        childBitIndex\n      );\n      parentTile.children.push(childTile);\n      currentRow.push(childTile);\n    }\n\n    parentRow = currentRow;\n    currentRow = [];\n  }\n\n  return {\n    rootTile: rootTile,\n    // At the end of the last loop, bottomRow was moved to parentRow\n    bottomRow: parentRow,\n  };\n}\n\n/**\n * Given a parent tile and information about which child to create, derive\n * the properties of the child tile implicitly.\n * <p>\n * This creates a real tile for rendering, not a placeholder tile like some of\n * the other methods of ImplicitTileset.\n * </p>\n *\n * @param {Implicit3DTileContent} implicitContent The implicit content\n * @param {ImplicitSubtree} subtree The subtree the child tile belongs to\n * @param {Cesium3DTile} parentTile The parent of the new child tile\n * @param {Number} childIndex The morton index of the child tile relative to its parent\n * @param {Number} childBitIndex The index of the child tile within the tile\'s availability information.\n * @param {Boolean} [parentIsPlaceholderTile=false] True if parentTile is a placeholder tile. This is true for the root of each subtree.\n * @returns {Cesium3DTile} The new child tile.\n * @private\n */\nfunction deriveChildTile(\n  implicitContent,\n  subtree,\n  parentTile,\n  childIndex,\n  childBitIndex,\n  parentIsPlaceholderTile\n) {\n  var implicitTileset = implicitContent._implicitTileset;\n  var implicitCoordinates;\n  if ((0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(parentIsPlaceholderTile, false)) {\n    implicitCoordinates = parentTile.implicitCoordinates;\n  } else {\n    implicitCoordinates = parentTile.implicitCoordinates.getChildCoordinates(\n      childIndex\n    );\n  }\n\n  // Parse metadata and bounding volume semantics at the beginning\n  // as the bounding volumes are needed below.\n  var tileMetadata;\n  var tileBounds;\n  var contentBounds;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(subtree.metadataExtension)) {\n    var metadataTable = subtree.metadataTable;\n    tileMetadata = new _ImplicitTileMetadata_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n      class: metadataTable.class,\n      implicitCoordinates: implicitCoordinates,\n      implicitSubtree: subtree,\n    });\n\n    var boundingVolumeSemantics = (0,_parseBoundingVolumeSemantics_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(tileMetadata);\n    tileBounds = boundingVolumeSemantics.tile;\n    contentBounds = boundingVolumeSemantics.content;\n  }\n\n  var contentJsons = [];\n  for (var i = 0; i < implicitTileset.contentCount; i++) {\n    if (!subtree.contentIsAvailableAtIndex(childBitIndex, i)) {\n      continue;\n    }\n    var childContentTemplate = implicitTileset.contentUriTemplates[i];\n    var childContentUri = childContentTemplate.getDerivedResource({\n      templateValues: implicitCoordinates.getTemplateValues(),\n    }).url;\n    var contentJson = {\n      uri: childContentUri,\n    };\n\n    // content bounding volumes can only be specified via\n    // metadata semantics such as CONTENT_BOUNDING_BOX\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(contentBounds) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(contentBounds.boundingVolume)) {\n      contentJson.boundingVolume = contentBounds.boundingVolume;\n    }\n\n    // combine() is used to pass through any additional properties the\n    // user specified such as extras or extensions\n    contentJsons.push((0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(contentJson, implicitTileset.contentHeaders[i]));\n  }\n\n  var boundingVolume;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(tileBounds) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(tileBounds.boundingVolume)) {\n    boundingVolume = tileBounds.boundingVolume;\n  } else {\n    boundingVolume = deriveBoundingVolume(\n      implicitTileset,\n      implicitCoordinates,\n      childIndex,\n      (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(parentIsPlaceholderTile, false),\n      parentTile\n    );\n\n    // The TILE_MINIMUM_HEIGHT and TILE_MAXIMUM_HEIGHT metadata semantics\n    // can be used to tighten the bounding volume\n    if (\n      (0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(boundingVolume, "3DTILES_bounding_volume_S2") &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(tileBounds)\n    ) {\n      updateS2CellHeights(\n        boundingVolume.extensions["3DTILES_bounding_volume_S2"],\n        tileBounds.minimumHeight,\n        tileBounds.maximumHeight\n      );\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(boundingVolume.region) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(tileBounds)) {\n      updateRegionHeights(\n        boundingVolume.region,\n        tileBounds.minimumHeight,\n        tileBounds.maximumHeight\n      );\n    }\n  }\n\n  var childGeometricError =\n    implicitTileset.geometricError / Math.pow(2, implicitCoordinates.level);\n\n  var tileJson = {\n    boundingVolume: boundingVolume,\n    geometricError: childGeometricError,\n    refine: implicitTileset.refine,\n  };\n\n  if (contentJsons.length === 1) {\n    tileJson.content = contentJsons[0];\n  } else if (contentJsons.length > 1) {\n    tileJson.extensions = {\n      "3DTILES_multiple_contents": {\n        content: contentJsons,\n      },\n    };\n  }\n\n  var deep = true;\n  var childTile = makeTile(\n    implicitContent,\n    implicitTileset.baseResource,\n    // combine() is used to pass through any additional properties the\n    // user specified such as extras or extensions\n    (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(tileJson, implicitTileset.tileHeader, deep),\n    parentTile\n  );\n  childTile.implicitCoordinates = implicitCoordinates;\n  childTile.implicitSubtree = subtree;\n  childTile.metadata = tileMetadata;\n\n  return childTile;\n}\n\n/**\n * For a derived bounding region, update the minimum and maximum height. This\n * is typically used to tighten a bounding volume using the\n * <code>TILE_MINIMUM_HEIGHT</code> and <code>TILE_MAXIMUM_HEIGHT</code>\n * semantics. Heights are only updated if the respective\n * minimumHeight/maximumHeight parameter is defined.\n *\n * @param {Array} region A 6-element array describing the bounding region\n * @param {Number} [minimumHeight] The new minimum height\n * @param {Number} [maximumHeight] The new maximum height\n * @private\n */\nfunction updateRegionHeights(region, minimumHeight, maximumHeight) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(minimumHeight)) {\n    region[4] = minimumHeight;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(maximumHeight)) {\n    region[5] = maximumHeight;\n  }\n}\n\n/**\n * For a derived bounding S2 cell, update the minimum and maximum height. This\n * is typically used to tighten a bounding volume using the\n * <code>TILE_MINIMUM_HEIGHT</code> and <code>TILE_MAXIMUM_HEIGHT</code>\n * semantics. Heights are only updated if the respective\n * minimumHeight/maximumHeight parameter is defined.\n *\n * @param {Array} region A 6-element array describing the bounding region\n * @param {Number} [minimumHeight] The new minimum height\n * @param {Number} [maximumHeight] The new maximum height\n * @private\n */\nfunction updateS2CellHeights(s2CellVolume, minimumHeight, maximumHeight) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(minimumHeight)) {\n    s2CellVolume.minimumHeight = minimumHeight;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(maximumHeight)) {\n    s2CellVolume.maximumHeight = maximumHeight;\n  }\n}\n\n/**\n * Given the coordinates of a tile, derive its bounding volume from the root.\n *\n * @param {ImplicitTileset} implicitTileset The implicit tileset struct which holds the root bounding volume\n * @param {ImplicitTileCoordinates} implicitCoordinates The coordinates of the child tile\n * @param {Number} childIndex The morton index of the child tile relative to its parent\n * @param {Boolean} parentIsPlaceholderTile True if parentTile is a placeholder tile. This is true for the root of each subtree.\n * @param {Cesium3DTile} parentTile The parent of the new child tile\n * @returns {Object} An object containing the JSON for a bounding volume\n * @private\n */\nfunction deriveBoundingVolume(\n  implicitTileset,\n  implicitCoordinates,\n  childIndex,\n  parentIsPlaceholderTile,\n  parentTile\n) {\n  var rootBoundingVolume = implicitTileset.boundingVolume;\n\n  if ((0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(rootBoundingVolume, "3DTILES_bounding_volume_S2")) {\n    return deriveBoundingVolumeS2(\n      parentIsPlaceholderTile,\n      parentTile,\n      childIndex,\n      implicitCoordinates.level,\n      implicitCoordinates.x,\n      implicitCoordinates.y,\n      implicitCoordinates.z\n    );\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(rootBoundingVolume.region)) {\n    var childRegion = deriveBoundingRegion(\n      rootBoundingVolume.region,\n      implicitCoordinates.level,\n      implicitCoordinates.x,\n      implicitCoordinates.y,\n      implicitCoordinates.z\n    );\n\n    return {\n      region: childRegion,\n    };\n  }\n\n  var childBox = deriveBoundingBox(\n    rootBoundingVolume.box,\n    implicitCoordinates.level,\n    implicitCoordinates.x,\n    implicitCoordinates.y,\n    implicitCoordinates.z\n  );\n\n  return {\n    box: childBox,\n  };\n}\n\n/**\n * Derive a bounding volume for a descendant tile (child, grandchild, etc.),\n * assuming a quadtree or octree implicit tiling scheme. The (level, x, y, [z])\n * coordinates are given to select the descendant tile and compute its position\n * and dimensions.\n * <p>\n * If z is present, octree subdivision is used. Otherwise, quadtree subdivision\n * is used. Quadtrees are always divided at the midpoint of the the horizontal\n * dimensions, i.e. (x, y), leaving the z axis unchanged.\n * </p>\n *\n * @param {Boolean} parentIsPlaceholderTile True if parentTile is a placeholder tile. This is true for the root of each subtree.\n * @param {Cesium3DTile} parentTile The parent of the new child tile\n * @param {Number} childIndex The morton index of the child tile relative to its parent\n * @param {Number} level The level of the descendant tile relative to the root implicit tile\n * @param {Number} x The x coordinate of the descendant tile\n * @param {Number} y The y coordinate of the descendant tile\n * @param {Number} [z] The z coordinate of the descendant tile (octree only)\n * @returns {Object} An object with the 3DTILES_bounding_volume_S2 extension.\n * @private\n */\nfunction deriveBoundingVolumeS2(\n  parentIsPlaceholderTile,\n  parentTile,\n  childIndex,\n  level,\n  x,\n  y,\n  z\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.bool */ .Z.typeOf.bool("parentIsPlaceholderTile", parentIsPlaceholderTile);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("parentTile", parentTile);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("childIndex", childIndex);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("level", level);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("x", x);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("y", y);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(z)) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("z", z);\n  }\n  //>>includeEnd(\'debug\');\n\n  var boundingVolumeS2 = parentTile._boundingVolume;\n\n  // Handle the placeholder tile case, where we just duplicate the placeholder\'s bounding volume.\n  if (parentIsPlaceholderTile) {\n    return {\n      extensions: {\n        "3DTILES_bounding_volume_S2": {\n          token: _Core_S2Cell_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].getTokenFromId */ .Z.getTokenFromId(boundingVolumeS2.s2Cell._cellId),\n          minimumHeight: boundingVolumeS2.minimumHeight,\n          maximumHeight: boundingVolumeS2.maximumHeight,\n        },\n      },\n    };\n  }\n\n  // Extract the first 3 face bits from the 64-bit S2 cell ID.\n  // eslint-disable-next-line\n  var face = Number(parentTile._boundingVolume.s2Cell._cellId >> BigInt(61));\n  // The Hilbert curve is rotated for the "odd" faces on the S2 Earthcube.\n  // See http://s2geometry.io/devguide/img/s2cell_global.jpg\n  var position =\n    face % 2 === 0\n      ? _Core_HilbertOrder_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].encode2D */ .Z.encode2D(level, x, y)\n      : _Core_HilbertOrder_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].encode2D */ .Z.encode2D(level, y, x);\n  // eslint-disable-next-line\n  var cell = _Core_S2Cell_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].fromFacePositionLevel */ .Z.fromFacePositionLevel(face, BigInt(position), level);\n\n  var minHeight, maxHeight;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(z)) {\n    var midpointHeight =\n      (boundingVolumeS2.maximumHeight + boundingVolumeS2.minimumHeight) / 2;\n    minHeight =\n      childIndex < 4 ? boundingVolumeS2.minimumHeight : midpointHeight;\n    maxHeight =\n      childIndex < 4 ? midpointHeight : boundingVolumeS2.maximumHeight;\n  } else {\n    minHeight = boundingVolumeS2.minimumHeight;\n    maxHeight = boundingVolumeS2.maximumHeight;\n  }\n\n  return {\n    extensions: {\n      "3DTILES_bounding_volume_S2": {\n        token: _Core_S2Cell_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].getTokenFromId */ .Z.getTokenFromId(cell._cellId),\n        minimumHeight: minHeight,\n        maximumHeight: maxHeight,\n      },\n    },\n  };\n}\n\nvar scratchScaleFactors = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar scratchRootCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar scratchCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar scratchHalfAxes = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\n/**\n * Derive a bounding volume for a descendant tile (child, grandchild, etc.),\n * assuming a quadtree or octree implicit tiling scheme. The (level, x, y, [z])\n * coordinates are given to select the descendant tile and compute its position\n * and dimensions.\n * <p>\n * If z is present, octree subdivision is used. Otherwise, quadtree subdivision\n * is used. Quadtrees are always divided at the midpoint of the the horizontal\n * dimensions, i.e. (x, y), leaving the z axis unchanged.\n * </p>\n * <p>\n * This computes the child volume directly from the root bounding volume rather\n * than recursively subdividing to minimize floating point error.\n * </p>\n *\n * @param {Number[]} rootBox An array of 12 numbers representing the bounding box of the root tile\n * @param {Number} level The level of the descendant tile relative to the root implicit tile\n * @param {Number} x The x coordinate of the descendant tile\n * @param {Number} y The y coordinate of the descendant tile\n * @param {Number} [z] The z coordinate of the descendant tile (octree only)\n * @returns {Number[]} An array of 12 numbers representing the bounding box of the descendant tile.\n * @private\n */\nfunction deriveBoundingBox(rootBox, level, x, y, z) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("rootBox", rootBox);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("level", level);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("x", x);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("y", y);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(z)) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("z", z);\n  }\n  //>>includeEnd(\'debug\');\n\n  if (level === 0) {\n    return rootBox;\n  }\n\n  var rootCenter = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].unpack */ .Z.unpack(rootBox, 0, scratchRootCenter);\n  var rootHalfAxes = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].unpack */ .Z.unpack(rootBox, 3, scratchHalfAxes);\n\n  var tileScale = Math.pow(2, -level);\n  var modelSpaceX = -1 + (2 * x + 1) * tileScale;\n  var modelSpaceY = -1 + (2 * y + 1) * tileScale;\n\n  var modelSpaceZ = 0;\n  var scaleFactors = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromElements */ .Z.fromElements(\n    tileScale,\n    tileScale,\n    1,\n    scratchScaleFactors\n  );\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(z)) {\n    modelSpaceZ = -1 + (2 * z + 1) * tileScale;\n    scaleFactors.z = tileScale;\n  }\n\n  var center = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromElements */ .Z.fromElements(\n    modelSpaceX,\n    modelSpaceY,\n    modelSpaceZ,\n    scratchCenter\n  );\n  center = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rootHalfAxes, center, scratchCenter);\n  center = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].add */ .Z.add(center, rootCenter, scratchCenter);\n\n  var halfAxes = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(rootHalfAxes);\n  halfAxes = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].multiplyByScale */ .Z.multiplyByScale(halfAxes, scaleFactors, halfAxes);\n\n  var childBox = new Array(12);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].pack */ .Z.pack(center, childBox);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].pack */ .Z.pack(halfAxes, childBox, 3);\n  return childBox;\n}\n\nvar scratchRectangle = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z();\n/**\n * Derive a bounding volume for a descendant tile (child, grandchild, etc.),\n * assuming a quadtree or octree implicit tiling scheme. The (level, x, y, [z])\n * coordinates are given to select the descendant tile and compute its position\n * and dimensions.\n * <p>\n * If z is present, octree subdivision is used. Otherwise, quadtree subdivision\n * is used. Quadtrees are always divided at the midpoint of the the horizontal\n * dimensions, i.e. (mid_longitude, mid_latitude), leaving the height values\n * unchanged.\n * </p>\n * <p>\n * This computes the child volume directly from the root bounding volume rather\n * than recursively subdividing to minimize floating point error.\n * </p>\n * @param {Number[]} rootRegion An array of 6 numbers representing the root implicit tile\n * @param {Number} level The level of the descendant tile relative to the root implicit tile\n * @param {Number} x The x coordinate of the descendant tile\n * @param {Number} y The x coordinate of the descendant tile\n * @param {Number} [z] The z coordinate of the descendant tile (octree only)\n * @returns {Number[]} An array of 6 numbers representing the bounding region of the descendant tile\n * @private\n */\nfunction deriveBoundingRegion(rootRegion, level, x, y, z) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("rootRegion", rootRegion);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("level", level);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("x", x);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("y", y);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(z)) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("z", z);\n  }\n  //>>includeEnd(\'debug\');\n\n  if (level === 0) {\n    return rootRegion.slice();\n  }\n\n  var rectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].unpack */ .Z.unpack(rootRegion, 0, scratchRectangle);\n  var rootMinimumHeight = rootRegion[4];\n  var rootMaximumHeight = rootRegion[5];\n  var tileScale = Math.pow(2, -level);\n\n  var childWidth = tileScale * rectangle.width;\n  var west = _Core_Math_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].negativePiToPi */ .Z.negativePiToPi(rectangle.west + x * childWidth);\n  var east = _Core_Math_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].negativePiToPi */ .Z.negativePiToPi(west + childWidth);\n\n  var childHeight = tileScale * rectangle.height;\n  var south = _Core_Math_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].negativePiToPi */ .Z.negativePiToPi(rectangle.south + y * childHeight);\n  var north = _Core_Math_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].negativePiToPi */ .Z.negativePiToPi(south + childHeight);\n\n  // Height is only subdivided for octrees; It remains constant for quadtrees.\n  var minimumHeight = rootMinimumHeight;\n  var maximumHeight = rootMaximumHeight;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(z)) {\n    var childThickness = tileScale * (rootMaximumHeight - rootMinimumHeight);\n    minimumHeight += z * childThickness;\n    maximumHeight = minimumHeight + childThickness;\n  }\n\n  return [west, south, east, north, minimumHeight, maximumHeight];\n}\n\n/**\n * Create a placeholder 3D Tile whose content will be an Implicit3DTileContent\n * for lazy evaluation of a child subtree.\n *\n * @param {Implicit3DTileContent} content The content object.\n * @param {Cesium3DTile} parentTile The parent of the new child subtree.\n * @param {Number} childIndex The morton index of the child tile relative to its parent\n * @returns {Cesium3DTile} The new placeholder tile\n * @private\n */\nfunction makePlaceholderChildSubtree(content, parentTile, childIndex) {\n  var implicitTileset = content._implicitTileset;\n  var implicitCoordinates = parentTile.implicitCoordinates.getChildCoordinates(\n    childIndex\n  );\n\n  var childBoundingVolume = deriveBoundingVolume(\n    implicitTileset,\n    implicitCoordinates,\n    childIndex,\n    false,\n    parentTile\n  );\n  var childGeometricError =\n    implicitTileset.geometricError / Math.pow(2, implicitCoordinates.level);\n  var childContentUri = implicitTileset.subtreeUriTemplate.getDerivedResource({\n    templateValues: implicitCoordinates.getTemplateValues(),\n  }).url;\n  var tileJson = {\n    boundingVolume: childBoundingVolume,\n    geometricError: childGeometricError,\n    refine: implicitTileset.refine,\n    content: {\n      uri: childContentUri,\n    },\n  };\n\n  var tile = makeTile(\n    content,\n    implicitTileset.baseResource,\n    tileJson,\n    parentTile\n  );\n  tile.implicitTileset = implicitTileset;\n  tile.implicitCoordinates = implicitCoordinates;\n  return tile;\n}\n\n/**\n * Make a {@link Cesium3DTile}. This uses the content\'s tile\'s constructor instead\n * of importing Cesium3DTile. This is to avoid a circular dependency between\n * this file and Cesium3DTile.js\n * @param {Implicit3DTileContent} content The implicit content\n * @param {Resource} baseResource The base resource for the tileset\n * @param {Object} tileJson The JSON header for the tile\n * @param {Cesium3DTile} parentTile The parent of the new tile\n * @returns {Cesium3DTile} The newly created tile.\n * @private\n */\nfunction makeTile(content, baseResource, tileJson, parentTile) {\n  var Cesium3DTile = content._tile.constructor;\n  return new Cesium3DTile(content._tileset, baseResource, tileJson, parentTile);\n}\n\n/**\n * Part of the {@link Cesium3DTileContent} interface.  <code>Implicit3DTileContent</code>\n * always returns <code>false</code> since a tile of this type does not have any features.\n * @private\n */\nImplicit3DTileContent.prototype.hasProperty = function (batchId, name) {\n  return false;\n};\n\n/**\n * Part of the {@link Cesium3DTileContent} interface.  <code>Implicit3DTileContent</code>\n * always returns <code>undefined</code> since a tile of this type does not have any features.\n * @private\n */\nImplicit3DTileContent.prototype.getFeature = function (batchId) {\n  return undefined;\n};\n\nImplicit3DTileContent.prototype.applyDebugSettings = function (\n  enabled,\n  color\n) {};\n\nImplicit3DTileContent.prototype.applyStyle = function (style) {};\n\nImplicit3DTileContent.prototype.update = function (tileset, frameState) {};\n\nImplicit3DTileContent.prototype.isDestroyed = function () {\n  return false;\n};\n\nImplicit3DTileContent.prototype.destroy = function () {\n  this._implicitSubtree =\n    this._implicitSubtree && this._implicitSubtree.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this);\n};\n\n// Exposed for testing\nImplicit3DTileContent._deriveBoundingBox = deriveBoundingBox;\nImplicit3DTileContent._deriveBoundingRegion = deriveBoundingRegion;\nImplicit3DTileContent._deriveBoundingVolumeS2 = deriveBoundingVolumeS2;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVcsVUFBVTtBQUNyQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxjQUFjO0FBQ3pCLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0IsMkJBQTJCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQiwyQkFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDJFQUFhO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0ltcGxpY2l0M0RUaWxlQ29udGVudC5qcz8yZGQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGNvbWJpbmUgZnJvbSBcIi4uL0NvcmUvY29tYmluZS5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBIaWxiZXJ0T3JkZXIgZnJvbSBcIi4uL0NvcmUvSGlsYmVydE9yZGVyLmpzXCI7XG5pbXBvcnQgTWF0cml4MyBmcm9tIFwiLi4vQ29yZS9NYXRyaXgzLmpzXCI7XG5pbXBvcnQgUmVjdGFuZ2xlIGZyb20gXCIuLi9Db3JlL1JlY3RhbmdsZS5qc1wiO1xuaW1wb3J0IFMyQ2VsbCBmcm9tIFwiLi4vQ29yZS9TMkNlbGwuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcbmltcG9ydCBJbXBsaWNpdFN1YnRyZWUgZnJvbSBcIi4vSW1wbGljaXRTdWJ0cmVlLmpzXCI7XG5pbXBvcnQgSW1wbGljaXRUaWxlTWV0YWRhdGEgZnJvbSBcIi4vSW1wbGljaXRUaWxlTWV0YWRhdGEuanNcIjtcbmltcG9ydCBoYXNFeHRlbnNpb24gZnJvbSBcIi4vaGFzRXh0ZW5zaW9uLmpzXCI7XG5pbXBvcnQgcGFyc2VCb3VuZGluZ1ZvbHVtZVNlbWFudGljcyBmcm9tIFwiLi9wYXJzZUJvdW5kaW5nVm9sdW1lU2VtYW50aWNzLmpzXCI7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB7QGxpbmsgQ2VzaXVtM0RUaWxlQ29udGVudH0gdGhhdCBsYXppbHkgZXZhbHVhdGVzIGFuIGltcGxpY2l0XG4gKiB0aWxlc2V0LiBJdCBpcyBzb21ld2hhdCBzaW1pbGFyIGluIG9wZXJhdGlvbiB0byBhXG4gKiB7QGxpbmsgVGlsZXNldDNEVGlsZUNvbnRlbnR9IGluIHRoYXQgb25jZSB0aGUgY29udGVudCBpcyBjb25zdHJ1Y3RlZCwgaXRcbiAqIHVwZGF0ZXMgdGhlIHRpbGVzZXQgdHJlZSB3aXRoIG1vcmUgdGlsZXMuIEhvd2V2ZXIsIHVubGlrZSBleHRlcm5hbCB0aWxlc2V0cyxcbiAqIGNoaWxkIHN1YnRyZWVzIGFyZSByZXByZXNlbnRlZCBhcyBhZGRpdGlvbmFsIHBsYWNlaG9sZGVyIG5vZGVzIHdpdGhcbiAqIEltcGxpY2l0M0RUaWxlQ29udGVudC5cbiAqIDxwPlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIENlc2l1bTNEVGlsZUNvbnRlbnR9IGludGVyZmFjZS5cbiAqIDwvcD5cbiAqXG4gKiBAYWxpYXMgSW1wbGljaXQzRFRpbGVDb250ZW50XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge0Nlc2l1bTNEVGlsZXNldH0gdGlsZXNldCBUaGUgdGlsZXNldCB0aGlzIGNvbnRlbnQgYmVsb25ncyB0b1xuICogQHBhcmFtIHtDZXNpdW0zRFRpbGV9IHRpbGUgVGhlIHRpbGUgdGhpcyBjb250ZW50IGJlbG9uZ3MgdG8uXG4gKiBAcGFyYW0ge1Jlc291cmNlfSByZXNvdXJjZSBUaGUgcmVzb3VyY2UgZm9yIHRoZSB0aWxlc2V0XG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheUJ1ZmZlciBUaGUgYXJyYXkgYnVmZmVyIHRoYXQgc3RvcmVzIHRoZSBjb250ZW50IHBheWxvYWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYnl0ZU9mZnNldD0wXSBUaGUgb2Zmc2V0IGludG8gdGhlIGFycmF5IGJ1ZmZlclxuICogQHByaXZhdGVcbiAqIEBleHBlcmltZW50YWwgVGhpcyBmZWF0dXJlIGlzIHVzaW5nIHBhcnQgb2YgdGhlIDNEIFRpbGVzIHNwZWMgdGhhdCBpcyBub3QgZmluYWwgYW5kIGlzIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgQ2VzaXVtJ3Mgc3RhbmRhcmQgZGVwcmVjYXRpb24gcG9saWN5LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbXBsaWNpdDNEVGlsZUNvbnRlbnQoXG4gIHRpbGVzZXQsXG4gIHRpbGUsXG4gIHJlc291cmNlLFxuICBhcnJheUJ1ZmZlcixcbiAgYnl0ZU9mZnNldFxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLmRlZmluZWQoXCJ0aWxlLmltcGxpY2l0VGlsZXNldFwiLCB0aWxlLmltcGxpY2l0VGlsZXNldCk7XG4gIENoZWNrLmRlZmluZWQoXCJ0aWxlLmltcGxpY2l0Q29vcmRpbmF0ZXNcIiwgdGlsZS5pbXBsaWNpdENvb3JkaW5hdGVzKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGltcGxpY2l0VGlsZXNldCA9IHRpbGUuaW1wbGljaXRUaWxlc2V0O1xuICB2YXIgaW1wbGljaXRDb29yZGluYXRlcyA9IHRpbGUuaW1wbGljaXRDb29yZGluYXRlcztcblxuICB0aGlzLl9pbXBsaWNpdFRpbGVzZXQgPSBpbXBsaWNpdFRpbGVzZXQ7XG4gIHRoaXMuX2ltcGxpY2l0Q29vcmRpbmF0ZXMgPSBpbXBsaWNpdENvb3JkaW5hdGVzO1xuICB0aGlzLl9pbXBsaWNpdFN1YnRyZWUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3RpbGVzZXQgPSB0aWxlc2V0O1xuICB0aGlzLl90aWxlID0gdGlsZTtcbiAgdGhpcy5fcmVzb3VyY2UgPSByZXNvdXJjZTtcbiAgdGhpcy5fcmVhZHlQcm9taXNlID0gd2hlbi5kZWZlcigpO1xuXG4gIHRoaXMuZmVhdHVyZVByb3BlcnRpZXNEaXJ0eSA9IGZhbHNlO1xuICB0aGlzLl9ncm91cE1ldGFkYXRhID0gdW5kZWZpbmVkO1xuXG4gIHZhciB0ZW1wbGF0ZVZhbHVlcyA9IGltcGxpY2l0Q29vcmRpbmF0ZXMuZ2V0VGVtcGxhdGVWYWx1ZXMoKTtcbiAgdmFyIHN1YnRyZWVSZXNvdXJjZSA9IGltcGxpY2l0VGlsZXNldC5zdWJ0cmVlVXJpVGVtcGxhdGUuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICB0ZW1wbGF0ZVZhbHVlczogdGVtcGxhdGVWYWx1ZXMsXG4gIH0pO1xuICB0aGlzLl91cmwgPSBzdWJ0cmVlUmVzb3VyY2UuZ2V0VXJsQ29tcG9uZW50KHRydWUpO1xuXG4gIGluaXRpYWxpemUodGhpcywgYXJyYXlCdWZmZXIsIGJ5dGVPZmZzZXQpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhJbXBsaWNpdDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLCB7XG4gIGZlYXR1cmVzTGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9LFxuICB9LFxuXG4gIHBvaW50c0xlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICB0cmlhbmdsZXNMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0sXG4gIH0sXG5cbiAgZ2VvbWV0cnlCeXRlTGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9LFxuICB9LFxuXG4gIHRleHR1cmVzQnl0ZUxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICBiYXRjaFRhYmxlQnl0ZUxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICBpbm5lckNvbnRlbnRzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlLnByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICB0aWxlc2V0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdGlsZXNldDtcbiAgICB9LFxuICB9LFxuXG4gIHRpbGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90aWxlO1xuICAgIH0sXG4gIH0sXG5cbiAgdXJsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdXJsO1xuICAgIH0sXG4gIH0sXG5cbiAgYmF0Y2hUYWJsZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG4gIGdyb3VwTWV0YWRhdGE6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9ncm91cE1ldGFkYXRhO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMuX2dyb3VwTWV0YWRhdGEgPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgaW1wbGljaXQgY29udGVudCBieSBwYXJzaW5nIHRoZSBzdWJ0cmVlIHJlc291cmNlIGFuZCBzZXR0aW5nXG4gKiB1cCBhIHByb21pc2UgY2hhaW4gdG8gZXhwYW5kIHRoZSBpbW1lZGlhdGUgc3VidHJlZS5cbiAqXG4gKiBAcGFyYW0ge0ltcGxpY2l0M0RUaWxlQ29udGVudH0gY29udGVudCBUaGUgaW1wbGljaXQgY29udGVudFxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXIgVGhlIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgYSBzdWJ0cmVlIGJpbmFyeVxuICogQHBhcmFtIHtOdW1iZXJ9IFtieXRlT2Zmc2V0PTBdIFRoZSBieXRlIG9mZnNldCBpbnRvIHRoZSBhcnJheUJ1ZmZlclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZShjb250ZW50LCBhcnJheUJ1ZmZlciwgYnl0ZU9mZnNldCkge1xuICAvLyBQYXJzZSB0aGUgc3VidHJlZSBmaWxlXG4gIGJ5dGVPZmZzZXQgPSBkZWZhdWx0VmFsdWUoYnl0ZU9mZnNldCwgMCk7XG4gIHZhciB1aW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGJ5dGVPZmZzZXQpO1xuICB2YXIgc3VidHJlZSA9IG5ldyBJbXBsaWNpdFN1YnRyZWUoXG4gICAgY29udGVudC5fcmVzb3VyY2UsXG4gICAgdWludDhBcnJheSxcbiAgICBjb250ZW50Ll9pbXBsaWNpdFRpbGVzZXQsXG4gICAgY29udGVudC5faW1wbGljaXRDb29yZGluYXRlc1xuICApO1xuICBjb250ZW50Ll9pbXBsaWNpdFN1YnRyZWUgPSBzdWJ0cmVlO1xuXG4gIHN1YnRyZWUucmVhZHlQcm9taXNlXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgZXhwYW5kU3VidHJlZShjb250ZW50LCBzdWJ0cmVlKTtcbiAgICAgIGNvbnRlbnQuX3JlYWR5UHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29udGVudC5fcmVhZHlQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgfSk7XG59XG5cbi8qKlxuICogRXhwYW5kIGEgc2luZ2xlIHN1YnRyZWUgcGxhY2Vob2xkZXIgdGlsZS4gVGhpcyB0cmFuc2NvZGVzIHRoZSBzdWJ0cmVlIGludG9cbiAqIGEgdHJlZSBvZiB7QGxpbmsgQ2VzaXVtM0RUaWxlfS4gVGhlIHJvb3Qgb2YgdGhpcyB0cmVlIGlzIHN0b3JlZCBpblxuICogdGhlIHBsYWNlaG9sZGVyIHRpbGUncyBjaGlsZHJlbiBhcnJheS4gVGhpcyBtZXRob2QgYWxzbyBjcmVhdGVzIHBsYWNlaG9sZGVyXG4gKiB0aWxlcyBmb3IgdGhlIGNoaWxkIHN1YnRyZWVzIHRvIGJlIGxhemlseSBleHBhbmRlZCBhcyBuZWVkZWQuXG4gKlxuICogQHBhcmFtIHtJbXBsaWNpdDNEVGlsZUNvbnRlbnR9IGNvbnRlbnQgVGhlIGNvbnRlbnRcbiAqIEBwYXJhbSB7SW1wbGljaXRTdWJ0cmVlfSBzdWJ0cmVlIFRoZSBwYXJzZWQgc3VidHJlZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZXhwYW5kU3VidHJlZShjb250ZW50LCBzdWJ0cmVlKSB7XG4gIHZhciBwbGFjZWhvbGRlclRpbGUgPSBjb250ZW50Ll90aWxlO1xuXG4gIC8vIFBhcnNlIHRoZSB0aWxlcyBpbnNpZGUgdGhpcyBpbW1lZGlhdGUgc3VidHJlZVxuICB2YXIgY2hpbGRJbmRleCA9IGNvbnRlbnQuX2ltcGxpY2l0Q29vcmRpbmF0ZXMuY2hpbGRJbmRleDtcbiAgdmFyIHJlc3VsdHMgPSB0cmFuc2NvZGVTdWJ0cmVlVGlsZXMoXG4gICAgY29udGVudCxcbiAgICBzdWJ0cmVlLFxuICAgIHBsYWNlaG9sZGVyVGlsZSxcbiAgICBjaGlsZEluZGV4XG4gICk7XG5cbiAgLy8gTGluayB0aGUgbmV3IHN1YnRyZWUgdG8gdGhlIGV4aXN0aW5nIHBsYWNlaG9sZGVyIHRpbGUuXG4gIHBsYWNlaG9sZGVyVGlsZS5jaGlsZHJlbi5wdXNoKHJlc3VsdHMucm9vdFRpbGUpO1xuXG4gIC8vIGZvciBlYWNoIGNoaWxkIHN1YnRyZWUsIG1ha2UgbmV3IHBsYWNlaG9sZGVyIHRpbGVzXG4gIHZhciBjaGlsZFN1YnRyZWVzID0gbGlzdENoaWxkU3VidHJlZXMoY29udGVudCwgc3VidHJlZSwgcmVzdWx0cy5ib3R0b21Sb3cpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkU3VidHJlZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc3VidHJlZUxvY2F0b3IgPSBjaGlsZFN1YnRyZWVzW2ldO1xuICAgIHZhciBsZWFmVGlsZSA9IHN1YnRyZWVMb2NhdG9yLnRpbGU7XG4gICAgdmFyIGltcGxpY2l0Q2hpbGRUaWxlID0gbWFrZVBsYWNlaG9sZGVyQ2hpbGRTdWJ0cmVlKFxuICAgICAgY29udGVudCxcbiAgICAgIGxlYWZUaWxlLFxuICAgICAgc3VidHJlZUxvY2F0b3IuY2hpbGRJbmRleFxuICAgICk7XG4gICAgbGVhZlRpbGUuY2hpbGRyZW4ucHVzaChpbXBsaWNpdENoaWxkVGlsZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHBhaXIgb2YgKHRpbGUsIGNoaWxkSW5kZXgpIHVzZWQgZm9yIGZpbmRpbmcgY2hpbGQgc3VidHJlZXMuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gQ2hpbGRTdWJ0cmVlTG9jYXRvclxuICogQHByb3BlcnR5IHtDZXNpdW0zRFRpbGV9IHRpbGUgT25lIG9mIHRoZSB0aWxlcyBpbiB0aGUgYm90dG9tbW9zdCByb3cgb2YgdGhlIHN1YnRyZWUuXG4gKiBAcHJvcGVydHkge051bWJlcn0gY2hpbGRJbmRleCBUaGUgbW9ydG9uIGluZGV4IG9mIHRoZSBjaGlsZCB0aWxlIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnRcbiAqIEBwcml2YXRlXG4gKi9cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hhdCBjaGlsZCBzdWJ0cmVlcyBleGlzdCBhbmQgcmV0dXJuIGEgbGlzdCBvZiBpbmZvcm1hdGlvblxuICpcbiAqIEBwYXJhbSB7SW1wbGljaXQzRFRpbGVDb250ZW50fSBjb250ZW50IFRoZSBpbXBsaWNpdCBjb250ZW50XG4gKiBAcGFyYW0ge0ltcGxpY2l0U3VidHJlZX0gc3VidHJlZSBUaGUgc3VidHJlZSBmb3IgbG9va2luZyB1cCBhdmFpbGFiaWxpdHlcbiAqIEBwYXJhbSB7QXJyYXk8Q2VzaXVtM0RUaWxlfHVuZGVmaW5lZD59IGJvdHRvbVJvdyBUaGUgYm90dG9tIHJvdyBvZiB0aWxlcyBpbiBhIHRyYW5zY29kZWQgc3VidHJlZVxuICogQHJldHVybnMge0NoaWxkU3VidHJlZUxvY2F0b3JbXX0gQSBsaXN0IG9mIGlkZW50aWZpZXJzIGZvciB0aGUgY2hpbGQgc3VidHJlZXMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsaXN0Q2hpbGRTdWJ0cmVlcyhjb250ZW50LCBzdWJ0cmVlLCBib3R0b21Sb3cpIHtcbiAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgdmFyIGJyYW5jaGluZ0ZhY3RvciA9IGNvbnRlbnQuX2ltcGxpY2l0VGlsZXNldC5icmFuY2hpbmdGYWN0b3I7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYm90dG9tUm93Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGxlYWZUaWxlID0gYm90dG9tUm93W2ldO1xuICAgIGlmICghZGVmaW5lZChsZWFmVGlsZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgYnJhbmNoaW5nRmFjdG9yOyBqKyspIHtcbiAgICAgIHZhciBpbmRleCA9IGkgKiBicmFuY2hpbmdGYWN0b3IgKyBqO1xuICAgICAgaWYgKHN1YnRyZWUuY2hpbGRTdWJ0cmVlSXNBdmFpbGFibGVBdEluZGV4KGluZGV4KSkge1xuICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgIHRpbGU6IGxlYWZUaWxlLFxuICAgICAgICAgIGNoaWxkSW5kZXg6IGosXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0cztcbn1cblxuLyoqXG4gKiBSZXN1bHRzIG9mIHRyYW5zY29kZVN1YnRyZWVUaWxlcywgY29udGFpbmluZyB0aGUgcm9vdCB0aWxlIG9mIHRoZVxuICogc3VidHJlZSBhbmQgdGhlIGJvdHRvbSByb3cgb2Ygbm9kZXMgZm9yIGZ1cnRoZXIgcHJvY2Vzc2luZy5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmFuc2NvZGVkU3VidHJlZVxuICogQHByb3BlcnR5IHtDZXNpdW0zRFRpbGV9IHJvb3RUaWxlIFRoZSB0cmFuc2NvZGVkIHJvb3QgdGlsZSBvZiB0aGUgc3VidHJlZVxuICogQHByb3BlcnR5IHtBcnJheTxDZXNpdW0zRFRpbGV8dW5kZWZpbmVkPn0gYm90dG9tUm93IFRoZSBib3R0b20gcm93IG9mIHRyYW5zY29kZWQgdGlsZXMuIFRoaXMgaXMgaGVscGZ1bCBmb3IgcHJvY2Vzc2luZyBjaGlsZCBzdWJ0cmVlc1xuICogQHByaXZhdGVcbiAqL1xuXG4vKipcbiAqIFRyYW5zY29kZSB0aGUgaW1wbGljaXRseS1kZWZpbmVkIHRpbGVzIHdpdGhpbiB0aGlzIHN1YnRyZWUgYW5kIGdlbmVyYXRlXG4gKiBleHBsaWNpdCB7QGxpbmsgQ2VzaXVtM0RUaWxlfSBvYmplY3RzLiBUaGlzIGZ1bmN0aW9uIG9ubHkgdHJhbnNjb2RlIHRpbGVzLFxuICogY2hpbGQgc3VidHJlZXMgYXJlIGhhbmRsZWQgc2VwYXJhdGVseS5cbiAqXG4gKiBAcGFyYW0ge0ltcGxpY2l0M0RUaWxlQ29udGVudH0gY29udGVudCBUaGUgaW1wbGljaXQgY29udGVudFxuICogQHBhcmFtIHtJbXBsaWNpdFN1YnRyZWV9IHN1YnRyZWUgVGhlIHN1YnRyZWUgdG8gZ2V0IGF2YWlsYWJpbGl0eSBpbmZvcm1hdGlvblxuICogQHBhcmFtIHtDZXNpdW0zRFRpbGV9IHBsYWNlaG9sZGVyVGlsZSBUaGUgcGxhY2Vob2xkZXIgdGlsZSwgdXNlZCBmb3IgY29uc3RydWN0aW5nIHRoZSBzdWJ0cmVlIHJvb3QgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGNoaWxkSW5kZXggVGhlIE1vcnRvbiBpbmRleCBvZiB0aGUgcm9vdCB0aWxlIHJlbGF0aXZlIHRvIHBhcmVudE9mUm9vdFRpbGVcbiAqIEByZXR1cm5zIHtUcmFuc2NvZGVkU3VidHJlZX0gVGhlIG5ld2x5IGNyZWF0ZWQgc3VidHJlZSBvZiB0aWxlc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdHJhbnNjb2RlU3VidHJlZVRpbGVzKGNvbnRlbnQsIHN1YnRyZWUsIHBsYWNlaG9sZGVyVGlsZSwgY2hpbGRJbmRleCkge1xuICB2YXIgcm9vdEJpdEluZGV4ID0gMDtcbiAgdmFyIHJvb3RQYXJlbnRJc1BsYWNlaG9sZGVyID0gdHJ1ZTtcbiAgdmFyIHJvb3RUaWxlID0gZGVyaXZlQ2hpbGRUaWxlKFxuICAgIGNvbnRlbnQsXG4gICAgc3VidHJlZSxcbiAgICBwbGFjZWhvbGRlclRpbGUsXG4gICAgY2hpbGRJbmRleCxcbiAgICByb290Qml0SW5kZXgsXG4gICAgcm9vdFBhcmVudElzUGxhY2Vob2xkZXJcbiAgKTtcblxuICAvLyBTbGlkaW5nIHdpbmRvdyBvdmVyIHRoZSBsZXZlbHMgb2YgdGhlIHRyZWUuXG4gIC8vIEVhY2ggcm93IGlzIGJyYW5jaGluZ0ZhY3RvciAqIGxlbmd0aCBvZiBwcmV2aW91cyByb3dcbiAgLy8gVGlsZXMgd2l0aGluIGEgcm93IGFyZSBvcmRlcmVkIGJ5IE1vcnRvbiBpbmRleC5cbiAgdmFyIHBhcmVudFJvdyA9IFtyb290VGlsZV07XG4gIHZhciBjdXJyZW50Um93ID0gW107XG5cbiAgdmFyIGltcGxpY2l0VGlsZXNldCA9IGNvbnRlbnQuX2ltcGxpY2l0VGlsZXNldDtcbiAgZm9yICh2YXIgbGV2ZWwgPSAxOyBsZXZlbCA8IGltcGxpY2l0VGlsZXNldC5zdWJ0cmVlTGV2ZWxzOyBsZXZlbCsrKSB7XG4gICAgdmFyIGxldmVsT2Zmc2V0ID0gc3VidHJlZS5nZXRMZXZlbE9mZnNldChsZXZlbCk7XG4gICAgdmFyIG51bWJlck9mQ2hpbGRyZW4gPSBpbXBsaWNpdFRpbGVzZXQuYnJhbmNoaW5nRmFjdG9yICogcGFyZW50Um93Lmxlbmd0aDtcbiAgICBmb3IgKFxuICAgICAgdmFyIGNoaWxkTW9ydG9uSW5kZXggPSAwO1xuICAgICAgY2hpbGRNb3J0b25JbmRleCA8IG51bWJlck9mQ2hpbGRyZW47XG4gICAgICBjaGlsZE1vcnRvbkluZGV4KytcbiAgICApIHtcbiAgICAgIHZhciBjaGlsZEJpdEluZGV4ID0gbGV2ZWxPZmZzZXQgKyBjaGlsZE1vcnRvbkluZGV4O1xuXG4gICAgICBpZiAoIXN1YnRyZWUudGlsZUlzQXZhaWxhYmxlQXRJbmRleChjaGlsZEJpdEluZGV4KSkge1xuICAgICAgICBjdXJyZW50Um93LnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnRNb3J0b25JbmRleCA9IHN1YnRyZWUuZ2V0UGFyZW50TW9ydG9uSW5kZXgoY2hpbGRNb3J0b25JbmRleCk7XG4gICAgICB2YXIgcGFyZW50VGlsZSA9IHBhcmVudFJvd1twYXJlbnRNb3J0b25JbmRleF07XG4gICAgICB2YXIgY2hpbGRDaGlsZEluZGV4ID0gY2hpbGRNb3J0b25JbmRleCAlIGltcGxpY2l0VGlsZXNldC5icmFuY2hpbmdGYWN0b3I7XG4gICAgICB2YXIgY2hpbGRUaWxlID0gZGVyaXZlQ2hpbGRUaWxlKFxuICAgICAgICBjb250ZW50LFxuICAgICAgICBzdWJ0cmVlLFxuICAgICAgICBwYXJlbnRUaWxlLFxuICAgICAgICBjaGlsZENoaWxkSW5kZXgsXG4gICAgICAgIGNoaWxkQml0SW5kZXhcbiAgICAgICk7XG4gICAgICBwYXJlbnRUaWxlLmNoaWxkcmVuLnB1c2goY2hpbGRUaWxlKTtcbiAgICAgIGN1cnJlbnRSb3cucHVzaChjaGlsZFRpbGUpO1xuICAgIH1cblxuICAgIHBhcmVudFJvdyA9IGN1cnJlbnRSb3c7XG4gICAgY3VycmVudFJvdyA9IFtdO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByb290VGlsZTogcm9vdFRpbGUsXG4gICAgLy8gQXQgdGhlIGVuZCBvZiB0aGUgbGFzdCBsb29wLCBib3R0b21Sb3cgd2FzIG1vdmVkIHRvIHBhcmVudFJvd1xuICAgIGJvdHRvbVJvdzogcGFyZW50Um93LFxuICB9O1xufVxuXG4vKipcbiAqIEdpdmVuIGEgcGFyZW50IHRpbGUgYW5kIGluZm9ybWF0aW9uIGFib3V0IHdoaWNoIGNoaWxkIHRvIGNyZWF0ZSwgZGVyaXZlXG4gKiB0aGUgcHJvcGVydGllcyBvZiB0aGUgY2hpbGQgdGlsZSBpbXBsaWNpdGx5LlxuICogPHA+XG4gKiBUaGlzIGNyZWF0ZXMgYSByZWFsIHRpbGUgZm9yIHJlbmRlcmluZywgbm90IGEgcGxhY2Vob2xkZXIgdGlsZSBsaWtlIHNvbWUgb2ZcbiAqIHRoZSBvdGhlciBtZXRob2RzIG9mIEltcGxpY2l0VGlsZXNldC5cbiAqIDwvcD5cbiAqXG4gKiBAcGFyYW0ge0ltcGxpY2l0M0RUaWxlQ29udGVudH0gaW1wbGljaXRDb250ZW50IFRoZSBpbXBsaWNpdCBjb250ZW50XG4gKiBAcGFyYW0ge0ltcGxpY2l0U3VidHJlZX0gc3VidHJlZSBUaGUgc3VidHJlZSB0aGUgY2hpbGQgdGlsZSBiZWxvbmdzIHRvXG4gKiBAcGFyYW0ge0Nlc2l1bTNEVGlsZX0gcGFyZW50VGlsZSBUaGUgcGFyZW50IG9mIHRoZSBuZXcgY2hpbGQgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGNoaWxkSW5kZXggVGhlIG1vcnRvbiBpbmRleCBvZiB0aGUgY2hpbGQgdGlsZSByZWxhdGl2ZSB0byBpdHMgcGFyZW50XG4gKiBAcGFyYW0ge051bWJlcn0gY2hpbGRCaXRJbmRleCBUaGUgaW5kZXggb2YgdGhlIGNoaWxkIHRpbGUgd2l0aGluIHRoZSB0aWxlJ3MgYXZhaWxhYmlsaXR5IGluZm9ybWF0aW9uLlxuICogQHBhcmFtIHtCb29sZWFufSBbcGFyZW50SXNQbGFjZWhvbGRlclRpbGU9ZmFsc2VdIFRydWUgaWYgcGFyZW50VGlsZSBpcyBhIHBsYWNlaG9sZGVyIHRpbGUuIFRoaXMgaXMgdHJ1ZSBmb3IgdGhlIHJvb3Qgb2YgZWFjaCBzdWJ0cmVlLlxuICogQHJldHVybnMge0Nlc2l1bTNEVGlsZX0gVGhlIG5ldyBjaGlsZCB0aWxlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZGVyaXZlQ2hpbGRUaWxlKFxuICBpbXBsaWNpdENvbnRlbnQsXG4gIHN1YnRyZWUsXG4gIHBhcmVudFRpbGUsXG4gIGNoaWxkSW5kZXgsXG4gIGNoaWxkQml0SW5kZXgsXG4gIHBhcmVudElzUGxhY2Vob2xkZXJUaWxlXG4pIHtcbiAgdmFyIGltcGxpY2l0VGlsZXNldCA9IGltcGxpY2l0Q29udGVudC5faW1wbGljaXRUaWxlc2V0O1xuICB2YXIgaW1wbGljaXRDb29yZGluYXRlcztcbiAgaWYgKGRlZmF1bHRWYWx1ZShwYXJlbnRJc1BsYWNlaG9sZGVyVGlsZSwgZmFsc2UpKSB7XG4gICAgaW1wbGljaXRDb29yZGluYXRlcyA9IHBhcmVudFRpbGUuaW1wbGljaXRDb29yZGluYXRlcztcbiAgfSBlbHNlIHtcbiAgICBpbXBsaWNpdENvb3JkaW5hdGVzID0gcGFyZW50VGlsZS5pbXBsaWNpdENvb3JkaW5hdGVzLmdldENoaWxkQ29vcmRpbmF0ZXMoXG4gICAgICBjaGlsZEluZGV4XG4gICAgKTtcbiAgfVxuXG4gIC8vIFBhcnNlIG1ldGFkYXRhIGFuZCBib3VuZGluZyB2b2x1bWUgc2VtYW50aWNzIGF0IHRoZSBiZWdpbm5pbmdcbiAgLy8gYXMgdGhlIGJvdW5kaW5nIHZvbHVtZXMgYXJlIG5lZWRlZCBiZWxvdy5cbiAgdmFyIHRpbGVNZXRhZGF0YTtcbiAgdmFyIHRpbGVCb3VuZHM7XG4gIHZhciBjb250ZW50Qm91bmRzO1xuICBpZiAoZGVmaW5lZChzdWJ0cmVlLm1ldGFkYXRhRXh0ZW5zaW9uKSkge1xuICAgIHZhciBtZXRhZGF0YVRhYmxlID0gc3VidHJlZS5tZXRhZGF0YVRhYmxlO1xuICAgIHRpbGVNZXRhZGF0YSA9IG5ldyBJbXBsaWNpdFRpbGVNZXRhZGF0YSh7XG4gICAgICBjbGFzczogbWV0YWRhdGFUYWJsZS5jbGFzcyxcbiAgICAgIGltcGxpY2l0Q29vcmRpbmF0ZXM6IGltcGxpY2l0Q29vcmRpbmF0ZXMsXG4gICAgICBpbXBsaWNpdFN1YnRyZWU6IHN1YnRyZWUsXG4gICAgfSk7XG5cbiAgICB2YXIgYm91bmRpbmdWb2x1bWVTZW1hbnRpY3MgPSBwYXJzZUJvdW5kaW5nVm9sdW1lU2VtYW50aWNzKHRpbGVNZXRhZGF0YSk7XG4gICAgdGlsZUJvdW5kcyA9IGJvdW5kaW5nVm9sdW1lU2VtYW50aWNzLnRpbGU7XG4gICAgY29udGVudEJvdW5kcyA9IGJvdW5kaW5nVm9sdW1lU2VtYW50aWNzLmNvbnRlbnQ7XG4gIH1cblxuICB2YXIgY29udGVudEpzb25zID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW1wbGljaXRUaWxlc2V0LmNvbnRlbnRDb3VudDsgaSsrKSB7XG4gICAgaWYgKCFzdWJ0cmVlLmNvbnRlbnRJc0F2YWlsYWJsZUF0SW5kZXgoY2hpbGRCaXRJbmRleCwgaSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgY2hpbGRDb250ZW50VGVtcGxhdGUgPSBpbXBsaWNpdFRpbGVzZXQuY29udGVudFVyaVRlbXBsYXRlc1tpXTtcbiAgICB2YXIgY2hpbGRDb250ZW50VXJpID0gY2hpbGRDb250ZW50VGVtcGxhdGUuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICAgIHRlbXBsYXRlVmFsdWVzOiBpbXBsaWNpdENvb3JkaW5hdGVzLmdldFRlbXBsYXRlVmFsdWVzKCksXG4gICAgfSkudXJsO1xuICAgIHZhciBjb250ZW50SnNvbiA9IHtcbiAgICAgIHVyaTogY2hpbGRDb250ZW50VXJpLFxuICAgIH07XG5cbiAgICAvLyBjb250ZW50IGJvdW5kaW5nIHZvbHVtZXMgY2FuIG9ubHkgYmUgc3BlY2lmaWVkIHZpYVxuICAgIC8vIG1ldGFkYXRhIHNlbWFudGljcyBzdWNoIGFzIENPTlRFTlRfQk9VTkRJTkdfQk9YXG4gICAgaWYgKGRlZmluZWQoY29udGVudEJvdW5kcykgJiYgZGVmaW5lZChjb250ZW50Qm91bmRzLmJvdW5kaW5nVm9sdW1lKSkge1xuICAgICAgY29udGVudEpzb24uYm91bmRpbmdWb2x1bWUgPSBjb250ZW50Qm91bmRzLmJvdW5kaW5nVm9sdW1lO1xuICAgIH1cblxuICAgIC8vIGNvbWJpbmUoKSBpcyB1c2VkIHRvIHBhc3MgdGhyb3VnaCBhbnkgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHN1Y2ggYXMgZXh0cmFzIG9yIGV4dGVuc2lvbnNcbiAgICBjb250ZW50SnNvbnMucHVzaChjb21iaW5lKGNvbnRlbnRKc29uLCBpbXBsaWNpdFRpbGVzZXQuY29udGVudEhlYWRlcnNbaV0pKTtcbiAgfVxuXG4gIHZhciBib3VuZGluZ1ZvbHVtZTtcblxuICBpZiAoZGVmaW5lZCh0aWxlQm91bmRzKSAmJiBkZWZpbmVkKHRpbGVCb3VuZHMuYm91bmRpbmdWb2x1bWUpKSB7XG4gICAgYm91bmRpbmdWb2x1bWUgPSB0aWxlQm91bmRzLmJvdW5kaW5nVm9sdW1lO1xuICB9IGVsc2Uge1xuICAgIGJvdW5kaW5nVm9sdW1lID0gZGVyaXZlQm91bmRpbmdWb2x1bWUoXG4gICAgICBpbXBsaWNpdFRpbGVzZXQsXG4gICAgICBpbXBsaWNpdENvb3JkaW5hdGVzLFxuICAgICAgY2hpbGRJbmRleCxcbiAgICAgIGRlZmF1bHRWYWx1ZShwYXJlbnRJc1BsYWNlaG9sZGVyVGlsZSwgZmFsc2UpLFxuICAgICAgcGFyZW50VGlsZVxuICAgICk7XG5cbiAgICAvLyBUaGUgVElMRV9NSU5JTVVNX0hFSUdIVCBhbmQgVElMRV9NQVhJTVVNX0hFSUdIVCBtZXRhZGF0YSBzZW1hbnRpY3NcbiAgICAvLyBjYW4gYmUgdXNlZCB0byB0aWdodGVuIHRoZSBib3VuZGluZyB2b2x1bWVcbiAgICBpZiAoXG4gICAgICBoYXNFeHRlbnNpb24oYm91bmRpbmdWb2x1bWUsIFwiM0RUSUxFU19ib3VuZGluZ192b2x1bWVfUzJcIikgJiZcbiAgICAgIGRlZmluZWQodGlsZUJvdW5kcylcbiAgICApIHtcbiAgICAgIHVwZGF0ZVMyQ2VsbEhlaWdodHMoXG4gICAgICAgIGJvdW5kaW5nVm9sdW1lLmV4dGVuc2lvbnNbXCIzRFRJTEVTX2JvdW5kaW5nX3ZvbHVtZV9TMlwiXSxcbiAgICAgICAgdGlsZUJvdW5kcy5taW5pbXVtSGVpZ2h0LFxuICAgICAgICB0aWxlQm91bmRzLm1heGltdW1IZWlnaHRcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKGJvdW5kaW5nVm9sdW1lLnJlZ2lvbikgJiYgZGVmaW5lZCh0aWxlQm91bmRzKSkge1xuICAgICAgdXBkYXRlUmVnaW9uSGVpZ2h0cyhcbiAgICAgICAgYm91bmRpbmdWb2x1bWUucmVnaW9uLFxuICAgICAgICB0aWxlQm91bmRzLm1pbmltdW1IZWlnaHQsXG4gICAgICAgIHRpbGVCb3VuZHMubWF4aW11bUhlaWdodFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2hpbGRHZW9tZXRyaWNFcnJvciA9XG4gICAgaW1wbGljaXRUaWxlc2V0Lmdlb21ldHJpY0Vycm9yIC8gTWF0aC5wb3coMiwgaW1wbGljaXRDb29yZGluYXRlcy5sZXZlbCk7XG5cbiAgdmFyIHRpbGVKc29uID0ge1xuICAgIGJvdW5kaW5nVm9sdW1lOiBib3VuZGluZ1ZvbHVtZSxcbiAgICBnZW9tZXRyaWNFcnJvcjogY2hpbGRHZW9tZXRyaWNFcnJvcixcbiAgICByZWZpbmU6IGltcGxpY2l0VGlsZXNldC5yZWZpbmUsXG4gIH07XG5cbiAgaWYgKGNvbnRlbnRKc29ucy5sZW5ndGggPT09IDEpIHtcbiAgICB0aWxlSnNvbi5jb250ZW50ID0gY29udGVudEpzb25zWzBdO1xuICB9IGVsc2UgaWYgKGNvbnRlbnRKc29ucy5sZW5ndGggPiAxKSB7XG4gICAgdGlsZUpzb24uZXh0ZW5zaW9ucyA9IHtcbiAgICAgIFwiM0RUSUxFU19tdWx0aXBsZV9jb250ZW50c1wiOiB7XG4gICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRKc29ucyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHZhciBkZWVwID0gdHJ1ZTtcbiAgdmFyIGNoaWxkVGlsZSA9IG1ha2VUaWxlKFxuICAgIGltcGxpY2l0Q29udGVudCxcbiAgICBpbXBsaWNpdFRpbGVzZXQuYmFzZVJlc291cmNlLFxuICAgIC8vIGNvbWJpbmUoKSBpcyB1c2VkIHRvIHBhc3MgdGhyb3VnaCBhbnkgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHN1Y2ggYXMgZXh0cmFzIG9yIGV4dGVuc2lvbnNcbiAgICBjb21iaW5lKHRpbGVKc29uLCBpbXBsaWNpdFRpbGVzZXQudGlsZUhlYWRlciwgZGVlcCksXG4gICAgcGFyZW50VGlsZVxuICApO1xuICBjaGlsZFRpbGUuaW1wbGljaXRDb29yZGluYXRlcyA9IGltcGxpY2l0Q29vcmRpbmF0ZXM7XG4gIGNoaWxkVGlsZS5pbXBsaWNpdFN1YnRyZWUgPSBzdWJ0cmVlO1xuICBjaGlsZFRpbGUubWV0YWRhdGEgPSB0aWxlTWV0YWRhdGE7XG5cbiAgcmV0dXJuIGNoaWxkVGlsZTtcbn1cblxuLyoqXG4gKiBGb3IgYSBkZXJpdmVkIGJvdW5kaW5nIHJlZ2lvbiwgdXBkYXRlIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGhlaWdodC4gVGhpc1xuICogaXMgdHlwaWNhbGx5IHVzZWQgdG8gdGlnaHRlbiBhIGJvdW5kaW5nIHZvbHVtZSB1c2luZyB0aGVcbiAqIDxjb2RlPlRJTEVfTUlOSU1VTV9IRUlHSFQ8L2NvZGU+IGFuZCA8Y29kZT5USUxFX01BWElNVU1fSEVJR0hUPC9jb2RlPlxuICogc2VtYW50aWNzLiBIZWlnaHRzIGFyZSBvbmx5IHVwZGF0ZWQgaWYgdGhlIHJlc3BlY3RpdmVcbiAqIG1pbmltdW1IZWlnaHQvbWF4aW11bUhlaWdodCBwYXJhbWV0ZXIgaXMgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSByZWdpb24gQSA2LWVsZW1lbnQgYXJyYXkgZGVzY3JpYmluZyB0aGUgYm91bmRpbmcgcmVnaW9uXG4gKiBAcGFyYW0ge051bWJlcn0gW21pbmltdW1IZWlnaHRdIFRoZSBuZXcgbWluaW11bSBoZWlnaHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBbbWF4aW11bUhlaWdodF0gVGhlIG5ldyBtYXhpbXVtIGhlaWdodFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdXBkYXRlUmVnaW9uSGVpZ2h0cyhyZWdpb24sIG1pbmltdW1IZWlnaHQsIG1heGltdW1IZWlnaHQpIHtcbiAgaWYgKGRlZmluZWQobWluaW11bUhlaWdodCkpIHtcbiAgICByZWdpb25bNF0gPSBtaW5pbXVtSGVpZ2h0O1xuICB9XG5cbiAgaWYgKGRlZmluZWQobWF4aW11bUhlaWdodCkpIHtcbiAgICByZWdpb25bNV0gPSBtYXhpbXVtSGVpZ2h0O1xuICB9XG59XG5cbi8qKlxuICogRm9yIGEgZGVyaXZlZCBib3VuZGluZyBTMiBjZWxsLCB1cGRhdGUgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gaGVpZ2h0LiBUaGlzXG4gKiBpcyB0eXBpY2FsbHkgdXNlZCB0byB0aWdodGVuIGEgYm91bmRpbmcgdm9sdW1lIHVzaW5nIHRoZVxuICogPGNvZGU+VElMRV9NSU5JTVVNX0hFSUdIVDwvY29kZT4gYW5kIDxjb2RlPlRJTEVfTUFYSU1VTV9IRUlHSFQ8L2NvZGU+XG4gKiBzZW1hbnRpY3MuIEhlaWdodHMgYXJlIG9ubHkgdXBkYXRlZCBpZiB0aGUgcmVzcGVjdGl2ZVxuICogbWluaW11bUhlaWdodC9tYXhpbXVtSGVpZ2h0IHBhcmFtZXRlciBpcyBkZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHJlZ2lvbiBBIDYtZWxlbWVudCBhcnJheSBkZXNjcmliaW5nIHRoZSBib3VuZGluZyByZWdpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSBbbWluaW11bUhlaWdodF0gVGhlIG5ldyBtaW5pbXVtIGhlaWdodFxuICogQHBhcmFtIHtOdW1iZXJ9IFttYXhpbXVtSGVpZ2h0XSBUaGUgbmV3IG1heGltdW0gaGVpZ2h0XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1cGRhdGVTMkNlbGxIZWlnaHRzKHMyQ2VsbFZvbHVtZSwgbWluaW11bUhlaWdodCwgbWF4aW11bUhlaWdodCkge1xuICBpZiAoZGVmaW5lZChtaW5pbXVtSGVpZ2h0KSkge1xuICAgIHMyQ2VsbFZvbHVtZS5taW5pbXVtSGVpZ2h0ID0gbWluaW11bUhlaWdodDtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKG1heGltdW1IZWlnaHQpKSB7XG4gICAgczJDZWxsVm9sdW1lLm1heGltdW1IZWlnaHQgPSBtYXhpbXVtSGVpZ2h0O1xuICB9XG59XG5cbi8qKlxuICogR2l2ZW4gdGhlIGNvb3JkaW5hdGVzIG9mIGEgdGlsZSwgZGVyaXZlIGl0cyBib3VuZGluZyB2b2x1bWUgZnJvbSB0aGUgcm9vdC5cbiAqXG4gKiBAcGFyYW0ge0ltcGxpY2l0VGlsZXNldH0gaW1wbGljaXRUaWxlc2V0IFRoZSBpbXBsaWNpdCB0aWxlc2V0IHN0cnVjdCB3aGljaCBob2xkcyB0aGUgcm9vdCBib3VuZGluZyB2b2x1bWVcbiAqIEBwYXJhbSB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IGltcGxpY2l0Q29vcmRpbmF0ZXMgVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBjaGlsZCB0aWxlXG4gKiBAcGFyYW0ge051bWJlcn0gY2hpbGRJbmRleCBUaGUgbW9ydG9uIGluZGV4IG9mIHRoZSBjaGlsZCB0aWxlIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFyZW50SXNQbGFjZWhvbGRlclRpbGUgVHJ1ZSBpZiBwYXJlbnRUaWxlIGlzIGEgcGxhY2Vob2xkZXIgdGlsZS4gVGhpcyBpcyB0cnVlIGZvciB0aGUgcm9vdCBvZiBlYWNoIHN1YnRyZWUuXG4gKiBAcGFyYW0ge0Nlc2l1bTNEVGlsZX0gcGFyZW50VGlsZSBUaGUgcGFyZW50IG9mIHRoZSBuZXcgY2hpbGQgdGlsZVxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIEpTT04gZm9yIGEgYm91bmRpbmcgdm9sdW1lXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkZXJpdmVCb3VuZGluZ1ZvbHVtZShcbiAgaW1wbGljaXRUaWxlc2V0LFxuICBpbXBsaWNpdENvb3JkaW5hdGVzLFxuICBjaGlsZEluZGV4LFxuICBwYXJlbnRJc1BsYWNlaG9sZGVyVGlsZSxcbiAgcGFyZW50VGlsZVxuKSB7XG4gIHZhciByb290Qm91bmRpbmdWb2x1bWUgPSBpbXBsaWNpdFRpbGVzZXQuYm91bmRpbmdWb2x1bWU7XG5cbiAgaWYgKGhhc0V4dGVuc2lvbihyb290Qm91bmRpbmdWb2x1bWUsIFwiM0RUSUxFU19ib3VuZGluZ192b2x1bWVfUzJcIikpIHtcbiAgICByZXR1cm4gZGVyaXZlQm91bmRpbmdWb2x1bWVTMihcbiAgICAgIHBhcmVudElzUGxhY2Vob2xkZXJUaWxlLFxuICAgICAgcGFyZW50VGlsZSxcbiAgICAgIGNoaWxkSW5kZXgsXG4gICAgICBpbXBsaWNpdENvb3JkaW5hdGVzLmxldmVsLFxuICAgICAgaW1wbGljaXRDb29yZGluYXRlcy54LFxuICAgICAgaW1wbGljaXRDb29yZGluYXRlcy55LFxuICAgICAgaW1wbGljaXRDb29yZGluYXRlcy56XG4gICAgKTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHJvb3RCb3VuZGluZ1ZvbHVtZS5yZWdpb24pKSB7XG4gICAgdmFyIGNoaWxkUmVnaW9uID0gZGVyaXZlQm91bmRpbmdSZWdpb24oXG4gICAgICByb290Qm91bmRpbmdWb2x1bWUucmVnaW9uLFxuICAgICAgaW1wbGljaXRDb29yZGluYXRlcy5sZXZlbCxcbiAgICAgIGltcGxpY2l0Q29vcmRpbmF0ZXMueCxcbiAgICAgIGltcGxpY2l0Q29vcmRpbmF0ZXMueSxcbiAgICAgIGltcGxpY2l0Q29vcmRpbmF0ZXMuelxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVnaW9uOiBjaGlsZFJlZ2lvbixcbiAgICB9O1xuICB9XG5cbiAgdmFyIGNoaWxkQm94ID0gZGVyaXZlQm91bmRpbmdCb3goXG4gICAgcm9vdEJvdW5kaW5nVm9sdW1lLmJveCxcbiAgICBpbXBsaWNpdENvb3JkaW5hdGVzLmxldmVsLFxuICAgIGltcGxpY2l0Q29vcmRpbmF0ZXMueCxcbiAgICBpbXBsaWNpdENvb3JkaW5hdGVzLnksXG4gICAgaW1wbGljaXRDb29yZGluYXRlcy56XG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBib3g6IGNoaWxkQm94LFxuICB9O1xufVxuXG4vKipcbiAqIERlcml2ZSBhIGJvdW5kaW5nIHZvbHVtZSBmb3IgYSBkZXNjZW5kYW50IHRpbGUgKGNoaWxkLCBncmFuZGNoaWxkLCBldGMuKSxcbiAqIGFzc3VtaW5nIGEgcXVhZHRyZWUgb3Igb2N0cmVlIGltcGxpY2l0IHRpbGluZyBzY2hlbWUuIFRoZSAobGV2ZWwsIHgsIHksIFt6XSlcbiAqIGNvb3JkaW5hdGVzIGFyZSBnaXZlbiB0byBzZWxlY3QgdGhlIGRlc2NlbmRhbnQgdGlsZSBhbmQgY29tcHV0ZSBpdHMgcG9zaXRpb25cbiAqIGFuZCBkaW1lbnNpb25zLlxuICogPHA+XG4gKiBJZiB6IGlzIHByZXNlbnQsIG9jdHJlZSBzdWJkaXZpc2lvbiBpcyB1c2VkLiBPdGhlcndpc2UsIHF1YWR0cmVlIHN1YmRpdmlzaW9uXG4gKiBpcyB1c2VkLiBRdWFkdHJlZXMgYXJlIGFsd2F5cyBkaXZpZGVkIGF0IHRoZSBtaWRwb2ludCBvZiB0aGUgdGhlIGhvcml6b250YWxcbiAqIGRpbWVuc2lvbnMsIGkuZS4gKHgsIHkpLCBsZWF2aW5nIHRoZSB6IGF4aXMgdW5jaGFuZ2VkLlxuICogPC9wPlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFyZW50SXNQbGFjZWhvbGRlclRpbGUgVHJ1ZSBpZiBwYXJlbnRUaWxlIGlzIGEgcGxhY2Vob2xkZXIgdGlsZS4gVGhpcyBpcyB0cnVlIGZvciB0aGUgcm9vdCBvZiBlYWNoIHN1YnRyZWUuXG4gKiBAcGFyYW0ge0Nlc2l1bTNEVGlsZX0gcGFyZW50VGlsZSBUaGUgcGFyZW50IG9mIHRoZSBuZXcgY2hpbGQgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGNoaWxkSW5kZXggVGhlIG1vcnRvbiBpbmRleCBvZiB0aGUgY2hpbGQgdGlsZSByZWxhdGl2ZSB0byBpdHMgcGFyZW50XG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIGxldmVsIG9mIHRoZSBkZXNjZW5kYW50IHRpbGUgcmVsYXRpdmUgdG8gdGhlIHJvb3QgaW1wbGljaXQgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgZGVzY2VuZGFudCB0aWxlXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgeSBjb29yZGluYXRlIG9mIHRoZSBkZXNjZW5kYW50IHRpbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBbel0gVGhlIHogY29vcmRpbmF0ZSBvZiB0aGUgZGVzY2VuZGFudCB0aWxlIChvY3RyZWUgb25seSlcbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSAzRFRJTEVTX2JvdW5kaW5nX3ZvbHVtZV9TMiBleHRlbnNpb24uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkZXJpdmVCb3VuZGluZ1ZvbHVtZVMyKFxuICBwYXJlbnRJc1BsYWNlaG9sZGVyVGlsZSxcbiAgcGFyZW50VGlsZSxcbiAgY2hpbGRJbmRleCxcbiAgbGV2ZWwsXG4gIHgsXG4gIHksXG4gIHpcbikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YuYm9vbChcInBhcmVudElzUGxhY2Vob2xkZXJUaWxlXCIsIHBhcmVudElzUGxhY2Vob2xkZXJUaWxlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcInBhcmVudFRpbGVcIiwgcGFyZW50VGlsZSk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJjaGlsZEluZGV4XCIsIGNoaWxkSW5kZXgpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwibGV2ZWxcIiwgbGV2ZWwpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwieFwiLCB4KTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcInlcIiwgeSk7XG4gIGlmIChkZWZpbmVkKHopKSB7XG4gICAgQ2hlY2sudHlwZU9mLm51bWJlcihcInpcIiwgeik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGJvdW5kaW5nVm9sdW1lUzIgPSBwYXJlbnRUaWxlLl9ib3VuZGluZ1ZvbHVtZTtcblxuICAvLyBIYW5kbGUgdGhlIHBsYWNlaG9sZGVyIHRpbGUgY2FzZSwgd2hlcmUgd2UganVzdCBkdXBsaWNhdGUgdGhlIHBsYWNlaG9sZGVyJ3MgYm91bmRpbmcgdm9sdW1lLlxuICBpZiAocGFyZW50SXNQbGFjZWhvbGRlclRpbGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICBcIjNEVElMRVNfYm91bmRpbmdfdm9sdW1lX1MyXCI6IHtcbiAgICAgICAgICB0b2tlbjogUzJDZWxsLmdldFRva2VuRnJvbUlkKGJvdW5kaW5nVm9sdW1lUzIuczJDZWxsLl9jZWxsSWQpLFxuICAgICAgICAgIG1pbmltdW1IZWlnaHQ6IGJvdW5kaW5nVm9sdW1lUzIubWluaW11bUhlaWdodCxcbiAgICAgICAgICBtYXhpbXVtSGVpZ2h0OiBib3VuZGluZ1ZvbHVtZVMyLm1heGltdW1IZWlnaHQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBFeHRyYWN0IHRoZSBmaXJzdCAzIGZhY2UgYml0cyBmcm9tIHRoZSA2NC1iaXQgUzIgY2VsbCBJRC5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIHZhciBmYWNlID0gTnVtYmVyKHBhcmVudFRpbGUuX2JvdW5kaW5nVm9sdW1lLnMyQ2VsbC5fY2VsbElkID4+IEJpZ0ludCg2MSkpO1xuICAvLyBUaGUgSGlsYmVydCBjdXJ2ZSBpcyByb3RhdGVkIGZvciB0aGUgXCJvZGRcIiBmYWNlcyBvbiB0aGUgUzIgRWFydGhjdWJlLlxuICAvLyBTZWUgaHR0cDovL3MyZ2VvbWV0cnkuaW8vZGV2Z3VpZGUvaW1nL3MyY2VsbF9nbG9iYWwuanBnXG4gIHZhciBwb3NpdGlvbiA9XG4gICAgZmFjZSAlIDIgPT09IDBcbiAgICAgID8gSGlsYmVydE9yZGVyLmVuY29kZTJEKGxldmVsLCB4LCB5KVxuICAgICAgOiBIaWxiZXJ0T3JkZXIuZW5jb2RlMkQobGV2ZWwsIHksIHgpO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgdmFyIGNlbGwgPSBTMkNlbGwuZnJvbUZhY2VQb3NpdGlvbkxldmVsKGZhY2UsIEJpZ0ludChwb3NpdGlvbiksIGxldmVsKTtcblxuICB2YXIgbWluSGVpZ2h0LCBtYXhIZWlnaHQ7XG4gIGlmIChkZWZpbmVkKHopKSB7XG4gICAgdmFyIG1pZHBvaW50SGVpZ2h0ID1cbiAgICAgIChib3VuZGluZ1ZvbHVtZVMyLm1heGltdW1IZWlnaHQgKyBib3VuZGluZ1ZvbHVtZVMyLm1pbmltdW1IZWlnaHQpIC8gMjtcbiAgICBtaW5IZWlnaHQgPVxuICAgICAgY2hpbGRJbmRleCA8IDQgPyBib3VuZGluZ1ZvbHVtZVMyLm1pbmltdW1IZWlnaHQgOiBtaWRwb2ludEhlaWdodDtcbiAgICBtYXhIZWlnaHQgPVxuICAgICAgY2hpbGRJbmRleCA8IDQgPyBtaWRwb2ludEhlaWdodCA6IGJvdW5kaW5nVm9sdW1lUzIubWF4aW11bUhlaWdodDtcbiAgfSBlbHNlIHtcbiAgICBtaW5IZWlnaHQgPSBib3VuZGluZ1ZvbHVtZVMyLm1pbmltdW1IZWlnaHQ7XG4gICAgbWF4SGVpZ2h0ID0gYm91bmRpbmdWb2x1bWVTMi5tYXhpbXVtSGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBleHRlbnNpb25zOiB7XG4gICAgICBcIjNEVElMRVNfYm91bmRpbmdfdm9sdW1lX1MyXCI6IHtcbiAgICAgICAgdG9rZW46IFMyQ2VsbC5nZXRUb2tlbkZyb21JZChjZWxsLl9jZWxsSWQpLFxuICAgICAgICBtaW5pbXVtSGVpZ2h0OiBtaW5IZWlnaHQsXG4gICAgICAgIG1heGltdW1IZWlnaHQ6IG1heEhlaWdodCxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcbn1cblxudmFyIHNjcmF0Y2hTY2FsZUZhY3RvcnMgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hSb290Q2VudGVyID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQ2VudGVyID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoSGFsZkF4ZXMgPSBuZXcgTWF0cml4MygpO1xuLyoqXG4gKiBEZXJpdmUgYSBib3VuZGluZyB2b2x1bWUgZm9yIGEgZGVzY2VuZGFudCB0aWxlIChjaGlsZCwgZ3JhbmRjaGlsZCwgZXRjLiksXG4gKiBhc3N1bWluZyBhIHF1YWR0cmVlIG9yIG9jdHJlZSBpbXBsaWNpdCB0aWxpbmcgc2NoZW1lLiBUaGUgKGxldmVsLCB4LCB5LCBbel0pXG4gKiBjb29yZGluYXRlcyBhcmUgZ2l2ZW4gdG8gc2VsZWN0IHRoZSBkZXNjZW5kYW50IHRpbGUgYW5kIGNvbXB1dGUgaXRzIHBvc2l0aW9uXG4gKiBhbmQgZGltZW5zaW9ucy5cbiAqIDxwPlxuICogSWYgeiBpcyBwcmVzZW50LCBvY3RyZWUgc3ViZGl2aXNpb24gaXMgdXNlZC4gT3RoZXJ3aXNlLCBxdWFkdHJlZSBzdWJkaXZpc2lvblxuICogaXMgdXNlZC4gUXVhZHRyZWVzIGFyZSBhbHdheXMgZGl2aWRlZCBhdCB0aGUgbWlkcG9pbnQgb2YgdGhlIHRoZSBob3Jpem9udGFsXG4gKiBkaW1lbnNpb25zLCBpLmUuICh4LCB5KSwgbGVhdmluZyB0aGUgeiBheGlzIHVuY2hhbmdlZC5cbiAqIDwvcD5cbiAqIDxwPlxuICogVGhpcyBjb21wdXRlcyB0aGUgY2hpbGQgdm9sdW1lIGRpcmVjdGx5IGZyb20gdGhlIHJvb3QgYm91bmRpbmcgdm9sdW1lIHJhdGhlclxuICogdGhhbiByZWN1cnNpdmVseSBzdWJkaXZpZGluZyB0byBtaW5pbWl6ZSBmbG9hdGluZyBwb2ludCBlcnJvci5cbiAqIDwvcD5cbiAqXG4gKiBAcGFyYW0ge051bWJlcltdfSByb290Qm94IEFuIGFycmF5IG9mIDEyIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIHJvb3QgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSBsZXZlbCBvZiB0aGUgZGVzY2VuZGFudCB0aWxlIHJlbGF0aXZlIHRvIHRoZSByb290IGltcGxpY2l0IHRpbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGRlc2NlbmRhbnQgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgZGVzY2VuZGFudCB0aWxlXG4gKiBAcGFyYW0ge051bWJlcn0gW3pdIFRoZSB6IGNvb3JkaW5hdGUgb2YgdGhlIGRlc2NlbmRhbnQgdGlsZSAob2N0cmVlIG9ubHkpXG4gKiBAcmV0dXJucyB7TnVtYmVyW119IEFuIGFycmF5IG9mIDEyIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIGRlc2NlbmRhbnQgdGlsZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRlcml2ZUJvdW5kaW5nQm94KHJvb3RCb3gsIGxldmVsLCB4LCB5LCB6KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJyb290Qm94XCIsIHJvb3RCb3gpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwibGV2ZWxcIiwgbGV2ZWwpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwieFwiLCB4KTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcInlcIiwgeSk7XG4gIGlmIChkZWZpbmVkKHopKSB7XG4gICAgQ2hlY2sudHlwZU9mLm51bWJlcihcInpcIiwgeik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKGxldmVsID09PSAwKSB7XG4gICAgcmV0dXJuIHJvb3RCb3g7XG4gIH1cblxuICB2YXIgcm9vdENlbnRlciA9IENhcnRlc2lhbjMudW5wYWNrKHJvb3RCb3gsIDAsIHNjcmF0Y2hSb290Q2VudGVyKTtcbiAgdmFyIHJvb3RIYWxmQXhlcyA9IE1hdHJpeDMudW5wYWNrKHJvb3RCb3gsIDMsIHNjcmF0Y2hIYWxmQXhlcyk7XG5cbiAgdmFyIHRpbGVTY2FsZSA9IE1hdGgucG93KDIsIC1sZXZlbCk7XG4gIHZhciBtb2RlbFNwYWNlWCA9IC0xICsgKDIgKiB4ICsgMSkgKiB0aWxlU2NhbGU7XG4gIHZhciBtb2RlbFNwYWNlWSA9IC0xICsgKDIgKiB5ICsgMSkgKiB0aWxlU2NhbGU7XG5cbiAgdmFyIG1vZGVsU3BhY2VaID0gMDtcbiAgdmFyIHNjYWxlRmFjdG9ycyA9IENhcnRlc2lhbjMuZnJvbUVsZW1lbnRzKFxuICAgIHRpbGVTY2FsZSxcbiAgICB0aWxlU2NhbGUsXG4gICAgMSxcbiAgICBzY3JhdGNoU2NhbGVGYWN0b3JzXG4gICk7XG5cbiAgaWYgKGRlZmluZWQoeikpIHtcbiAgICBtb2RlbFNwYWNlWiA9IC0xICsgKDIgKiB6ICsgMSkgKiB0aWxlU2NhbGU7XG4gICAgc2NhbGVGYWN0b3JzLnogPSB0aWxlU2NhbGU7XG4gIH1cblxuICB2YXIgY2VudGVyID0gQ2FydGVzaWFuMy5mcm9tRWxlbWVudHMoXG4gICAgbW9kZWxTcGFjZVgsXG4gICAgbW9kZWxTcGFjZVksXG4gICAgbW9kZWxTcGFjZVosXG4gICAgc2NyYXRjaENlbnRlclxuICApO1xuICBjZW50ZXIgPSBNYXRyaXgzLm11bHRpcGx5QnlWZWN0b3Iocm9vdEhhbGZBeGVzLCBjZW50ZXIsIHNjcmF0Y2hDZW50ZXIpO1xuICBjZW50ZXIgPSBDYXJ0ZXNpYW4zLmFkZChjZW50ZXIsIHJvb3RDZW50ZXIsIHNjcmF0Y2hDZW50ZXIpO1xuXG4gIHZhciBoYWxmQXhlcyA9IE1hdHJpeDMuY2xvbmUocm9vdEhhbGZBeGVzKTtcbiAgaGFsZkF4ZXMgPSBNYXRyaXgzLm11bHRpcGx5QnlTY2FsZShoYWxmQXhlcywgc2NhbGVGYWN0b3JzLCBoYWxmQXhlcyk7XG5cbiAgdmFyIGNoaWxkQm94ID0gbmV3IEFycmF5KDEyKTtcbiAgQ2FydGVzaWFuMy5wYWNrKGNlbnRlciwgY2hpbGRCb3gpO1xuICBNYXRyaXgzLnBhY2soaGFsZkF4ZXMsIGNoaWxkQm94LCAzKTtcbiAgcmV0dXJuIGNoaWxkQm94O1xufVxuXG52YXIgc2NyYXRjaFJlY3RhbmdsZSA9IG5ldyBSZWN0YW5nbGUoKTtcbi8qKlxuICogRGVyaXZlIGEgYm91bmRpbmcgdm9sdW1lIGZvciBhIGRlc2NlbmRhbnQgdGlsZSAoY2hpbGQsIGdyYW5kY2hpbGQsIGV0Yy4pLFxuICogYXNzdW1pbmcgYSBxdWFkdHJlZSBvciBvY3RyZWUgaW1wbGljaXQgdGlsaW5nIHNjaGVtZS4gVGhlIChsZXZlbCwgeCwgeSwgW3pdKVxuICogY29vcmRpbmF0ZXMgYXJlIGdpdmVuIHRvIHNlbGVjdCB0aGUgZGVzY2VuZGFudCB0aWxlIGFuZCBjb21wdXRlIGl0cyBwb3NpdGlvblxuICogYW5kIGRpbWVuc2lvbnMuXG4gKiA8cD5cbiAqIElmIHogaXMgcHJlc2VudCwgb2N0cmVlIHN1YmRpdmlzaW9uIGlzIHVzZWQuIE90aGVyd2lzZSwgcXVhZHRyZWUgc3ViZGl2aXNpb25cbiAqIGlzIHVzZWQuIFF1YWR0cmVlcyBhcmUgYWx3YXlzIGRpdmlkZWQgYXQgdGhlIG1pZHBvaW50IG9mIHRoZSB0aGUgaG9yaXpvbnRhbFxuICogZGltZW5zaW9ucywgaS5lLiAobWlkX2xvbmdpdHVkZSwgbWlkX2xhdGl0dWRlKSwgbGVhdmluZyB0aGUgaGVpZ2h0IHZhbHVlc1xuICogdW5jaGFuZ2VkLlxuICogPC9wPlxuICogPHA+XG4gKiBUaGlzIGNvbXB1dGVzIHRoZSBjaGlsZCB2b2x1bWUgZGlyZWN0bHkgZnJvbSB0aGUgcm9vdCBib3VuZGluZyB2b2x1bWUgcmF0aGVyXG4gKiB0aGFuIHJlY3Vyc2l2ZWx5IHN1YmRpdmlkaW5nIHRvIG1pbmltaXplIGZsb2F0aW5nIHBvaW50IGVycm9yLlxuICogPC9wPlxuICogQHBhcmFtIHtOdW1iZXJbXX0gcm9vdFJlZ2lvbiBBbiBhcnJheSBvZiA2IG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSByb290IGltcGxpY2l0IHRpbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgbGV2ZWwgb2YgdGhlIGRlc2NlbmRhbnQgdGlsZSByZWxhdGl2ZSB0byB0aGUgcm9vdCBpbXBsaWNpdCB0aWxlXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBkZXNjZW5kYW50IHRpbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGRlc2NlbmRhbnQgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IFt6XSBUaGUgeiBjb29yZGluYXRlIG9mIHRoZSBkZXNjZW5kYW50IHRpbGUgKG9jdHJlZSBvbmx5KVxuICogQHJldHVybnMge051bWJlcltdfSBBbiBhcnJheSBvZiA2IG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBib3VuZGluZyByZWdpb24gb2YgdGhlIGRlc2NlbmRhbnQgdGlsZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZGVyaXZlQm91bmRpbmdSZWdpb24ocm9vdFJlZ2lvbiwgbGV2ZWwsIHgsIHksIHopIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcInJvb3RSZWdpb25cIiwgcm9vdFJlZ2lvbik7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJsZXZlbFwiLCBsZXZlbCk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJ4XCIsIHgpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwieVwiLCB5KTtcbiAgaWYgKGRlZmluZWQoeikpIHtcbiAgICBDaGVjay50eXBlT2YubnVtYmVyKFwielwiLCB6KTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBpZiAobGV2ZWwgPT09IDApIHtcbiAgICByZXR1cm4gcm9vdFJlZ2lvbi5zbGljZSgpO1xuICB9XG5cbiAgdmFyIHJlY3RhbmdsZSA9IFJlY3RhbmdsZS51bnBhY2socm9vdFJlZ2lvbiwgMCwgc2NyYXRjaFJlY3RhbmdsZSk7XG4gIHZhciByb290TWluaW11bUhlaWdodCA9IHJvb3RSZWdpb25bNF07XG4gIHZhciByb290TWF4aW11bUhlaWdodCA9IHJvb3RSZWdpb25bNV07XG4gIHZhciB0aWxlU2NhbGUgPSBNYXRoLnBvdygyLCAtbGV2ZWwpO1xuXG4gIHZhciBjaGlsZFdpZHRoID0gdGlsZVNjYWxlICogcmVjdGFuZ2xlLndpZHRoO1xuICB2YXIgd2VzdCA9IENlc2l1bU1hdGgubmVnYXRpdmVQaVRvUGkocmVjdGFuZ2xlLndlc3QgKyB4ICogY2hpbGRXaWR0aCk7XG4gIHZhciBlYXN0ID0gQ2VzaXVtTWF0aC5uZWdhdGl2ZVBpVG9QaSh3ZXN0ICsgY2hpbGRXaWR0aCk7XG5cbiAgdmFyIGNoaWxkSGVpZ2h0ID0gdGlsZVNjYWxlICogcmVjdGFuZ2xlLmhlaWdodDtcbiAgdmFyIHNvdXRoID0gQ2VzaXVtTWF0aC5uZWdhdGl2ZVBpVG9QaShyZWN0YW5nbGUuc291dGggKyB5ICogY2hpbGRIZWlnaHQpO1xuICB2YXIgbm9ydGggPSBDZXNpdW1NYXRoLm5lZ2F0aXZlUGlUb1BpKHNvdXRoICsgY2hpbGRIZWlnaHQpO1xuXG4gIC8vIEhlaWdodCBpcyBvbmx5IHN1YmRpdmlkZWQgZm9yIG9jdHJlZXM7IEl0IHJlbWFpbnMgY29uc3RhbnQgZm9yIHF1YWR0cmVlcy5cbiAgdmFyIG1pbmltdW1IZWlnaHQgPSByb290TWluaW11bUhlaWdodDtcbiAgdmFyIG1heGltdW1IZWlnaHQgPSByb290TWF4aW11bUhlaWdodDtcbiAgaWYgKGRlZmluZWQoeikpIHtcbiAgICB2YXIgY2hpbGRUaGlja25lc3MgPSB0aWxlU2NhbGUgKiAocm9vdE1heGltdW1IZWlnaHQgLSByb290TWluaW11bUhlaWdodCk7XG4gICAgbWluaW11bUhlaWdodCArPSB6ICogY2hpbGRUaGlja25lc3M7XG4gICAgbWF4aW11bUhlaWdodCA9IG1pbmltdW1IZWlnaHQgKyBjaGlsZFRoaWNrbmVzcztcbiAgfVxuXG4gIHJldHVybiBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoLCBtaW5pbXVtSGVpZ2h0LCBtYXhpbXVtSGVpZ2h0XTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBwbGFjZWhvbGRlciAzRCBUaWxlIHdob3NlIGNvbnRlbnQgd2lsbCBiZSBhbiBJbXBsaWNpdDNEVGlsZUNvbnRlbnRcbiAqIGZvciBsYXp5IGV2YWx1YXRpb24gb2YgYSBjaGlsZCBzdWJ0cmVlLlxuICpcbiAqIEBwYXJhbSB7SW1wbGljaXQzRFRpbGVDb250ZW50fSBjb250ZW50IFRoZSBjb250ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7Q2VzaXVtM0RUaWxlfSBwYXJlbnRUaWxlIFRoZSBwYXJlbnQgb2YgdGhlIG5ldyBjaGlsZCBzdWJ0cmVlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGNoaWxkSW5kZXggVGhlIG1vcnRvbiBpbmRleCBvZiB0aGUgY2hpbGQgdGlsZSByZWxhdGl2ZSB0byBpdHMgcGFyZW50XG4gKiBAcmV0dXJucyB7Q2VzaXVtM0RUaWxlfSBUaGUgbmV3IHBsYWNlaG9sZGVyIHRpbGVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG1ha2VQbGFjZWhvbGRlckNoaWxkU3VidHJlZShjb250ZW50LCBwYXJlbnRUaWxlLCBjaGlsZEluZGV4KSB7XG4gIHZhciBpbXBsaWNpdFRpbGVzZXQgPSBjb250ZW50Ll9pbXBsaWNpdFRpbGVzZXQ7XG4gIHZhciBpbXBsaWNpdENvb3JkaW5hdGVzID0gcGFyZW50VGlsZS5pbXBsaWNpdENvb3JkaW5hdGVzLmdldENoaWxkQ29vcmRpbmF0ZXMoXG4gICAgY2hpbGRJbmRleFxuICApO1xuXG4gIHZhciBjaGlsZEJvdW5kaW5nVm9sdW1lID0gZGVyaXZlQm91bmRpbmdWb2x1bWUoXG4gICAgaW1wbGljaXRUaWxlc2V0LFxuICAgIGltcGxpY2l0Q29vcmRpbmF0ZXMsXG4gICAgY2hpbGRJbmRleCxcbiAgICBmYWxzZSxcbiAgICBwYXJlbnRUaWxlXG4gICk7XG4gIHZhciBjaGlsZEdlb21ldHJpY0Vycm9yID1cbiAgICBpbXBsaWNpdFRpbGVzZXQuZ2VvbWV0cmljRXJyb3IgLyBNYXRoLnBvdygyLCBpbXBsaWNpdENvb3JkaW5hdGVzLmxldmVsKTtcbiAgdmFyIGNoaWxkQ29udGVudFVyaSA9IGltcGxpY2l0VGlsZXNldC5zdWJ0cmVlVXJpVGVtcGxhdGUuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICB0ZW1wbGF0ZVZhbHVlczogaW1wbGljaXRDb29yZGluYXRlcy5nZXRUZW1wbGF0ZVZhbHVlcygpLFxuICB9KS51cmw7XG4gIHZhciB0aWxlSnNvbiA9IHtcbiAgICBib3VuZGluZ1ZvbHVtZTogY2hpbGRCb3VuZGluZ1ZvbHVtZSxcbiAgICBnZW9tZXRyaWNFcnJvcjogY2hpbGRHZW9tZXRyaWNFcnJvcixcbiAgICByZWZpbmU6IGltcGxpY2l0VGlsZXNldC5yZWZpbmUsXG4gICAgY29udGVudDoge1xuICAgICAgdXJpOiBjaGlsZENvbnRlbnRVcmksXG4gICAgfSxcbiAgfTtcblxuICB2YXIgdGlsZSA9IG1ha2VUaWxlKFxuICAgIGNvbnRlbnQsXG4gICAgaW1wbGljaXRUaWxlc2V0LmJhc2VSZXNvdXJjZSxcbiAgICB0aWxlSnNvbixcbiAgICBwYXJlbnRUaWxlXG4gICk7XG4gIHRpbGUuaW1wbGljaXRUaWxlc2V0ID0gaW1wbGljaXRUaWxlc2V0O1xuICB0aWxlLmltcGxpY2l0Q29vcmRpbmF0ZXMgPSBpbXBsaWNpdENvb3JkaW5hdGVzO1xuICByZXR1cm4gdGlsZTtcbn1cblxuLyoqXG4gKiBNYWtlIGEge0BsaW5rIENlc2l1bTNEVGlsZX0uIFRoaXMgdXNlcyB0aGUgY29udGVudCdzIHRpbGUncyBjb25zdHJ1Y3RvciBpbnN0ZWFkXG4gKiBvZiBpbXBvcnRpbmcgQ2VzaXVtM0RUaWxlLiBUaGlzIGlzIHRvIGF2b2lkIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSBiZXR3ZWVuXG4gKiB0aGlzIGZpbGUgYW5kIENlc2l1bTNEVGlsZS5qc1xuICogQHBhcmFtIHtJbXBsaWNpdDNEVGlsZUNvbnRlbnR9IGNvbnRlbnQgVGhlIGltcGxpY2l0IGNvbnRlbnRcbiAqIEBwYXJhbSB7UmVzb3VyY2V9IGJhc2VSZXNvdXJjZSBUaGUgYmFzZSByZXNvdXJjZSBmb3IgdGhlIHRpbGVzZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSB0aWxlSnNvbiBUaGUgSlNPTiBoZWFkZXIgZm9yIHRoZSB0aWxlXG4gKiBAcGFyYW0ge0Nlc2l1bTNEVGlsZX0gcGFyZW50VGlsZSBUaGUgcGFyZW50IG9mIHRoZSBuZXcgdGlsZVxuICogQHJldHVybnMge0Nlc2l1bTNEVGlsZX0gVGhlIG5ld2x5IGNyZWF0ZWQgdGlsZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG1ha2VUaWxlKGNvbnRlbnQsIGJhc2VSZXNvdXJjZSwgdGlsZUpzb24sIHBhcmVudFRpbGUpIHtcbiAgdmFyIENlc2l1bTNEVGlsZSA9IGNvbnRlbnQuX3RpbGUuY29uc3RydWN0b3I7XG4gIHJldHVybiBuZXcgQ2VzaXVtM0RUaWxlKGNvbnRlbnQuX3RpbGVzZXQsIGJhc2VSZXNvdXJjZSwgdGlsZUpzb24sIHBhcmVudFRpbGUpO1xufVxuXG4vKipcbiAqIFBhcnQgb2YgdGhlIHtAbGluayBDZXNpdW0zRFRpbGVDb250ZW50fSBpbnRlcmZhY2UuICA8Y29kZT5JbXBsaWNpdDNEVGlsZUNvbnRlbnQ8L2NvZGU+XG4gKiBhbHdheXMgcmV0dXJucyA8Y29kZT5mYWxzZTwvY29kZT4gc2luY2UgYSB0aWxlIG9mIHRoaXMgdHlwZSBkb2VzIG5vdCBoYXZlIGFueSBmZWF0dXJlcy5cbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0M0RUaWxlQ29udGVudC5wcm90b3R5cGUuaGFzUHJvcGVydHkgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgbmFtZSkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFBhcnQgb2YgdGhlIHtAbGluayBDZXNpdW0zRFRpbGVDb250ZW50fSBpbnRlcmZhY2UuICA8Y29kZT5JbXBsaWNpdDNEVGlsZUNvbnRlbnQ8L2NvZGU+XG4gKiBhbHdheXMgcmV0dXJucyA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IHNpbmNlIGEgdGlsZSBvZiB0aGlzIHR5cGUgZG9lcyBub3QgaGF2ZSBhbnkgZmVhdHVyZXMuXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmdldEZlYXR1cmUgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuSW1wbGljaXQzRFRpbGVDb250ZW50LnByb3RvdHlwZS5hcHBseURlYnVnU2V0dGluZ3MgPSBmdW5jdGlvbiAoXG4gIGVuYWJsZWQsXG4gIGNvbG9yXG4pIHt9O1xuXG5JbXBsaWNpdDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUpIHt9O1xuXG5JbXBsaWNpdDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aWxlc2V0LCBmcmFtZVN0YXRlKSB7fTtcblxuSW1wbGljaXQzRFRpbGVDb250ZW50LnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuSW1wbGljaXQzRFRpbGVDb250ZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9pbXBsaWNpdFN1YnRyZWUgPVxuICAgIHRoaXMuX2ltcGxpY2l0U3VidHJlZSAmJiB0aGlzLl9pbXBsaWNpdFN1YnRyZWUuZGVzdHJveSgpO1xuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG5cbi8vIEV4cG9zZWQgZm9yIHRlc3RpbmdcbkltcGxpY2l0M0RUaWxlQ29udGVudC5fZGVyaXZlQm91bmRpbmdCb3ggPSBkZXJpdmVCb3VuZGluZ0JveDtcbkltcGxpY2l0M0RUaWxlQ29udGVudC5fZGVyaXZlQm91bmRpbmdSZWdpb24gPSBkZXJpdmVCb3VuZGluZ1JlZ2lvbjtcbkltcGxpY2l0M0RUaWxlQ29udGVudC5fZGVyaXZlQm91bmRpbmdWb2x1bWVTMiA9IGRlcml2ZUJvdW5kaW5nVm9sdW1lUzI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6652\n')},53474:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ImplicitAvailabilityBitstream; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9407);\n\n\n\n\n\n\n/**\n * An availability bitstream for use in an {@link ImplicitSubtree}. This handles\n * both Uint8Array bitstreams and constant values.\n *\n * @alias ImplicitAvailabilityBitstream\n * @constructor\n *\n * @param {Object} options An object with the following properties:\n * @param {Number} options.lengthBits The length of the bitstream in bits\n * @param {Boolean} [options.constant] A single boolean value indicating the value of all the bits in the bitstream if they are all the same\n * @param {Uint8Array} [options.bitstream] An array of bytes storing the bitstream in binary\n * @param {Number} [options.availableCount] A number indicating how many 1 bits are found in the bitstream\n * @param {Boolean} [options.computeAvailableCountEnabled=false] If true, and options.availableCount is undefined, the availableCount will be computed from the bitstream.\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction ImplicitAvailabilityBitstream(options) {\n  var lengthBits = options.lengthBits;\n  var availableCount = options.availableCount;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.lengthBits", lengthBits);\n  //>>includeEnd(\'debug\');\n\n  var constant = options.constant;\n  var bitstream = options.bitstream;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(constant)) {\n    // if defined, constant must be 1 which means all tiles are available\n    availableCount = lengthBits;\n  } else {\n    var expectedLength = Math.ceil(lengthBits / 8);\n    if (bitstream.length !== expectedLength) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n        "Availability bitstream must be exactly " +\n          expectedLength +\n          " bytes long to store " +\n          lengthBits +\n          " bits. Actual bitstream was " +\n          bitstream.length +\n          " bytes long."\n      );\n    }\n\n    // Only compute the available count if requested, as this involves looping\n    // over the bitstream.\n    var computeAvailableCountEnabled = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(\n      options.computeAvailableCountEnabled,\n      false\n    );\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(availableCount) && computeAvailableCountEnabled) {\n      availableCount = count1Bits(bitstream, lengthBits);\n    }\n  }\n\n  this._lengthBits = lengthBits;\n  this._availableCount = availableCount;\n  this._constant = constant;\n  this._bitstream = bitstream;\n}\n\n/**\n * Count the number of bits with value 1 in the bitstream. This is used for\n * computing availableCount if not precomputed\n *\n * @param {Uint8Array} bitstream The bitstream typed array\n * @param {Number} lengthBits How many bits are in the bitstream\n * @private\n */\nfunction count1Bits(bitstream, lengthBits) {\n  var count = 0;\n  for (var i = 0; i < lengthBits; i++) {\n    var byteIndex = i >> 3;\n    var bitIndex = i % 8;\n    count += (bitstream[byteIndex] >> bitIndex) & 1;\n  }\n  return count;\n}\n\nObject.defineProperties(ImplicitAvailabilityBitstream.prototype, {\n  /**\n   * The length of the bitstream in bits.\n   *\n   * @memberof ImplicitAvailabilityBitstream.prototype\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  lengthBits: {\n    get: function () {\n      return this._lengthBits;\n    },\n  },\n  /**\n   * The number of bits in the bitstream with value <code>1</code>.\n   *\n   * @memberof ImplicitAvailabilityBitstream.prototype\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  availableCount: {\n    get: function () {\n      return this._availableCount;\n    },\n  },\n});\n\n/**\n * Get a bit from the availability bitstream as a Boolean. If the bitstream\n * is a constant, the constant value is returned instead.\n *\n * @param {Number} index The integer index of the bit.\n * @returns {Boolean} The value of the bit\n * @private\n */\nImplicitAvailabilityBitstream.prototype.getBit = function (index) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (index < 0 || index >= this._lengthBits) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("Bit index out of bounds.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this._constant)) {\n    return this._constant;\n  }\n\n  // byteIndex is floor(index / 8)\n  var byteIndex = index >> 3;\n  var bitIndex = index % 8;\n\n  return ((this._bitstream[byteIndex] >> bitIndex) & 1) === 1;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM0NzQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUM7QUFDSTtBQUNVO0FBQ0k7QUFDSjs7QUFFbkQ7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixXQUFXLFlBQVk7QUFDdkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7O0FBRUE7QUFDQSxFQUFFLDJGQUFtQjtBQUNyQjs7QUFFQTtBQUNBOztBQUVBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxnQkFBZ0Isc0VBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1Q0FBdUMsMEVBQVk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsU0FBUyxxRUFBTztBQUNoQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0VBQWM7QUFDNUI7QUFDQTs7QUFFQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9JbXBsaWNpdEF2YWlsYWJpbGl0eUJpdHN0cmVhbS5qcz81MTQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IFJ1bnRpbWVFcnJvciBmcm9tIFwiLi4vQ29yZS9SdW50aW1lRXJyb3IuanNcIjtcblxuLyoqXG4gKiBBbiBhdmFpbGFiaWxpdHkgYml0c3RyZWFtIGZvciB1c2UgaW4gYW4ge0BsaW5rIEltcGxpY2l0U3VidHJlZX0uIFRoaXMgaGFuZGxlc1xuICogYm90aCBVaW50OEFycmF5IGJpdHN0cmVhbXMgYW5kIGNvbnN0YW50IHZhbHVlcy5cbiAqXG4gKiBAYWxpYXMgSW1wbGljaXRBdmFpbGFiaWxpdHlCaXRzdHJlYW1cbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmxlbmd0aEJpdHMgVGhlIGxlbmd0aCBvZiB0aGUgYml0c3RyZWFtIGluIGJpdHNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY29uc3RhbnRdIEEgc2luZ2xlIGJvb2xlYW4gdmFsdWUgaW5kaWNhdGluZyB0aGUgdmFsdWUgb2YgYWxsIHRoZSBiaXRzIGluIHRoZSBiaXRzdHJlYW0gaWYgdGhleSBhcmUgYWxsIHRoZSBzYW1lXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IFtvcHRpb25zLmJpdHN0cmVhbV0gQW4gYXJyYXkgb2YgYnl0ZXMgc3RvcmluZyB0aGUgYml0c3RyZWFtIGluIGJpbmFyeVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmF2YWlsYWJsZUNvdW50XSBBIG51bWJlciBpbmRpY2F0aW5nIGhvdyBtYW55IDEgYml0cyBhcmUgZm91bmQgaW4gdGhlIGJpdHN0cmVhbVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21wdXRlQXZhaWxhYmxlQ291bnRFbmFibGVkPWZhbHNlXSBJZiB0cnVlLCBhbmQgb3B0aW9ucy5hdmFpbGFibGVDb3VudCBpcyB1bmRlZmluZWQsIHRoZSBhdmFpbGFibGVDb3VudCB3aWxsIGJlIGNvbXB1dGVkIGZyb20gdGhlIGJpdHN0cmVhbS5cbiAqIEBwcml2YXRlXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgZmVhdHVyZSBpcyB1c2luZyBwYXJ0IG9mIHRoZSAzRCBUaWxlcyBzcGVjIHRoYXQgaXMgbm90IGZpbmFsIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IENlc2l1bSdzIHN0YW5kYXJkIGRlcHJlY2F0aW9uIHBvbGljeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW1wbGljaXRBdmFpbGFiaWxpdHlCaXRzdHJlYW0ob3B0aW9ucykge1xuICB2YXIgbGVuZ3RoQml0cyA9IG9wdGlvbnMubGVuZ3RoQml0cztcbiAgdmFyIGF2YWlsYWJsZUNvdW50ID0gb3B0aW9ucy5hdmFpbGFibGVDb3VudDtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwib3B0aW9ucy5sZW5ndGhCaXRzXCIsIGxlbmd0aEJpdHMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgY29uc3RhbnQgPSBvcHRpb25zLmNvbnN0YW50O1xuICB2YXIgYml0c3RyZWFtID0gb3B0aW9ucy5iaXRzdHJlYW07XG5cbiAgaWYgKGRlZmluZWQoY29uc3RhbnQpKSB7XG4gICAgLy8gaWYgZGVmaW5lZCwgY29uc3RhbnQgbXVzdCBiZSAxIHdoaWNoIG1lYW5zIGFsbCB0aWxlcyBhcmUgYXZhaWxhYmxlXG4gICAgYXZhaWxhYmxlQ291bnQgPSBsZW5ndGhCaXRzO1xuICB9IGVsc2Uge1xuICAgIHZhciBleHBlY3RlZExlbmd0aCA9IE1hdGguY2VpbChsZW5ndGhCaXRzIC8gOCk7XG4gICAgaWYgKGJpdHN0cmVhbS5sZW5ndGggIT09IGV4cGVjdGVkTGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgICBcIkF2YWlsYWJpbGl0eSBiaXRzdHJlYW0gbXVzdCBiZSBleGFjdGx5IFwiICtcbiAgICAgICAgICBleHBlY3RlZExlbmd0aCArXG4gICAgICAgICAgXCIgYnl0ZXMgbG9uZyB0byBzdG9yZSBcIiArXG4gICAgICAgICAgbGVuZ3RoQml0cyArXG4gICAgICAgICAgXCIgYml0cy4gQWN0dWFsIGJpdHN0cmVhbSB3YXMgXCIgK1xuICAgICAgICAgIGJpdHN0cmVhbS5sZW5ndGggK1xuICAgICAgICAgIFwiIGJ5dGVzIGxvbmcuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gT25seSBjb21wdXRlIHRoZSBhdmFpbGFibGUgY291bnQgaWYgcmVxdWVzdGVkLCBhcyB0aGlzIGludm9sdmVzIGxvb3BpbmdcbiAgICAvLyBvdmVyIHRoZSBiaXRzdHJlYW0uXG4gICAgdmFyIGNvbXB1dGVBdmFpbGFibGVDb3VudEVuYWJsZWQgPSBkZWZhdWx0VmFsdWUoXG4gICAgICBvcHRpb25zLmNvbXB1dGVBdmFpbGFibGVDb3VudEVuYWJsZWQsXG4gICAgICBmYWxzZVxuICAgICk7XG4gICAgaWYgKCFkZWZpbmVkKGF2YWlsYWJsZUNvdW50KSAmJiBjb21wdXRlQXZhaWxhYmxlQ291bnRFbmFibGVkKSB7XG4gICAgICBhdmFpbGFibGVDb3VudCA9IGNvdW50MUJpdHMoYml0c3RyZWFtLCBsZW5ndGhCaXRzKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLl9sZW5ndGhCaXRzID0gbGVuZ3RoQml0cztcbiAgdGhpcy5fYXZhaWxhYmxlQ291bnQgPSBhdmFpbGFibGVDb3VudDtcbiAgdGhpcy5fY29uc3RhbnQgPSBjb25zdGFudDtcbiAgdGhpcy5fYml0c3RyZWFtID0gYml0c3RyZWFtO1xufVxuXG4vKipcbiAqIENvdW50IHRoZSBudW1iZXIgb2YgYml0cyB3aXRoIHZhbHVlIDEgaW4gdGhlIGJpdHN0cmVhbS4gVGhpcyBpcyB1c2VkIGZvclxuICogY29tcHV0aW5nIGF2YWlsYWJsZUNvdW50IGlmIG5vdCBwcmVjb21wdXRlZFxuICpcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYml0c3RyZWFtIFRoZSBiaXRzdHJlYW0gdHlwZWQgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGhCaXRzIEhvdyBtYW55IGJpdHMgYXJlIGluIHRoZSBiaXRzdHJlYW1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNvdW50MUJpdHMoYml0c3RyZWFtLCBsZW5ndGhCaXRzKSB7XG4gIHZhciBjb3VudCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoQml0czsgaSsrKSB7XG4gICAgdmFyIGJ5dGVJbmRleCA9IGkgPj4gMztcbiAgICB2YXIgYml0SW5kZXggPSBpICUgODtcbiAgICBjb3VudCArPSAoYml0c3RyZWFtW2J5dGVJbmRleF0gPj4gYml0SW5kZXgpICYgMTtcbiAgfVxuICByZXR1cm4gY291bnQ7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEltcGxpY2l0QXZhaWxhYmlsaXR5Qml0c3RyZWFtLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgYml0c3RyZWFtIGluIGJpdHMuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBJbXBsaWNpdEF2YWlsYWJpbGl0eUJpdHN0cmVhbS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBsZW5ndGhCaXRzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbGVuZ3RoQml0cztcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBiaXRzIGluIHRoZSBiaXRzdHJlYW0gd2l0aCB2YWx1ZSA8Y29kZT4xPC9jb2RlPi5cbiAgICpcbiAgICogQG1lbWJlcm9mIEltcGxpY2l0QXZhaWxhYmlsaXR5Qml0c3RyZWFtLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGF2YWlsYWJsZUNvdW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYXZhaWxhYmxlQ291bnQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEdldCBhIGJpdCBmcm9tIHRoZSBhdmFpbGFiaWxpdHkgYml0c3RyZWFtIGFzIGEgQm9vbGVhbi4gSWYgdGhlIGJpdHN0cmVhbVxuICogaXMgYSBjb25zdGFudCwgdGhlIGNvbnN0YW50IHZhbHVlIGlzIHJldHVybmVkIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSBpbnRlZ2VyIGluZGV4IG9mIHRoZSBiaXQuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVGhlIHZhbHVlIG9mIHRoZSBiaXRcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0QXZhaWxhYmlsaXR5Qml0c3RyZWFtLnByb3RvdHlwZS5nZXRCaXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLl9sZW5ndGhCaXRzKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiQml0IGluZGV4IG91dCBvZiBib3VuZHMuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGlmIChkZWZpbmVkKHRoaXMuX2NvbnN0YW50KSkge1xuICAgIHJldHVybiB0aGlzLl9jb25zdGFudDtcbiAgfVxuXG4gIC8vIGJ5dGVJbmRleCBpcyBmbG9vcihpbmRleCAvIDgpXG4gIHZhciBieXRlSW5kZXggPSBpbmRleCA+PiAzO1xuICB2YXIgYml0SW5kZXggPSBpbmRleCAlIDg7XG5cbiAgcmV0dXJuICgodGhpcy5fYml0c3RyZWFtW2J5dGVJbmRleF0gPj4gYml0SW5kZXgpICYgMSkgPT09IDE7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///53474\n')},10149:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n\n\n/**\n * The subdivision scheme for an implicit tileset.\n *\n * @enum {String}\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nvar ImplicitSubdivisionScheme = {\n  /**\n   * A quadtree divides a parent tile into four children, split at the midpoint\n   * of the x and y dimensions of the bounding box\n   * @type {String}\n   * @constant\n   * @private\n   */\n  QUADTREE: "QUADTREE",\n  /**\n   * An octree divides a parent tile into eight children, split at the midpoint\n   * of the x, y, and z dimensions of the bounding box.\n   * @type {String}\n   * @constant\n   * @private\n   */\n  OCTREE: "OCTREE",\n};\n\n/**\n * Get the branching factor for the given subdivision scheme\n * @param {ImplicitSubdivisionScheme} subdivisionScheme The subdivision scheme\n * @returns {Number} The branching factor, either 4 for QUADTREE or 8 for OCTREE\n * @private\n */\nImplicitSubdivisionScheme.getBranchingFactor = function (subdivisionScheme) {\n  switch (subdivisionScheme) {\n    case ImplicitSubdivisionScheme.OCTREE:\n      return 8;\n    case ImplicitSubdivisionScheme.QUADTREE:\n      return 4;\n    //>>includeStart(\'debug\', pragmas.debug);\n    default:\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("subdivisionScheme is not a valid value.");\n    //>>includeEnd(\'debug\');\n  }\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(ImplicitSubdivisionScheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAxNDkuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsMkJBQTJCO0FBQ3RDLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3RUFBYztBQUM5QjtBQUNBO0FBQ0E7O0FBRUEseURBQWUsd0NBQXdDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5qcz82NGZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuXG4vKipcbiAqIFRoZSBzdWJkaXZpc2lvbiBzY2hlbWUgZm9yIGFuIGltcGxpY2l0IHRpbGVzZXQuXG4gKlxuICogQGVudW0ge1N0cmluZ31cbiAqIEBwcml2YXRlXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgZmVhdHVyZSBpcyB1c2luZyBwYXJ0IG9mIHRoZSAzRCBUaWxlcyBzcGVjIHRoYXQgaXMgbm90IGZpbmFsIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IENlc2l1bSdzIHN0YW5kYXJkIGRlcHJlY2F0aW9uIHBvbGljeS5cbiAqL1xudmFyIEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUgPSB7XG4gIC8qKlxuICAgKiBBIHF1YWR0cmVlIGRpdmlkZXMgYSBwYXJlbnQgdGlsZSBpbnRvIGZvdXIgY2hpbGRyZW4sIHNwbGl0IGF0IHRoZSBtaWRwb2ludFxuICAgKiBvZiB0aGUgeCBhbmQgeSBkaW1lbnNpb25zIG9mIHRoZSBib3VuZGluZyBib3hcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGNvbnN0YW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBRVUFEVFJFRTogXCJRVUFEVFJFRVwiLFxuICAvKipcbiAgICogQW4gb2N0cmVlIGRpdmlkZXMgYSBwYXJlbnQgdGlsZSBpbnRvIGVpZ2h0IGNoaWxkcmVuLCBzcGxpdCBhdCB0aGUgbWlkcG9pbnRcbiAgICogb2YgdGhlIHgsIHksIGFuZCB6IGRpbWVuc2lvbnMgb2YgdGhlIGJvdW5kaW5nIGJveC5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGNvbnN0YW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBPQ1RSRUU6IFwiT0NUUkVFXCIsXG59O1xuXG4vKipcbiAqIEdldCB0aGUgYnJhbmNoaW5nIGZhY3RvciBmb3IgdGhlIGdpdmVuIHN1YmRpdmlzaW9uIHNjaGVtZVxuICogQHBhcmFtIHtJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lfSBzdWJkaXZpc2lvblNjaGVtZSBUaGUgc3ViZGl2aXNpb24gc2NoZW1lXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYnJhbmNoaW5nIGZhY3RvciwgZWl0aGVyIDQgZm9yIFFVQURUUkVFIG9yIDggZm9yIE9DVFJFRVxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5nZXRCcmFuY2hpbmdGYWN0b3IgPSBmdW5jdGlvbiAoc3ViZGl2aXNpb25TY2hlbWUpIHtcbiAgc3dpdGNoIChzdWJkaXZpc2lvblNjaGVtZSkge1xuICAgIGNhc2UgSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5PQ1RSRUU6XG4gICAgICByZXR1cm4gODtcbiAgICBjYXNlIEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuUVVBRFRSRUU6XG4gICAgICByZXR1cm4gNDtcbiAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJzdWJkaXZpc2lvblNjaGVtZSBpcyBub3QgYSB2YWxpZCB2YWx1ZS5cIik7XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10149\n')},61800:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ImplicitSubtree; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12540);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9407);\n/* harmony import */ var _hasExtension_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(81326);\n/* harmony import */ var _ImplicitAvailabilityBitstream_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(53474);\n/* harmony import */ var _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10149);\n/* harmony import */ var _MetadataTable_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(14358);\n/* harmony import */ var _ResourceCache_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(38956);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13222);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An object representing a single subtree in an implicit tileset\n * including availability.\n * <p>\n * Subtrees handle tile metadata from the <code>3DTILES_metadata</code> extension\n * </p>\n *\n * @see {@link https://github.com/CesiumGS/3d-tiles/tree/3d-tiles-next/extensions/3DTILES_metadata#implicit-tile-metadata|Implicit Tile Metadata in the 3DTILES_metadata specification}\n *\n * @alias ImplicitSubtree\n * @constructor\n *\n * @param {Resource} resource The resource for this subtree. This is used for fetching external buffers as needed.\n * @param {Uint8Array} subtreeView The contents of a subtree binary in a Uint8Array.\n * @param {ImplicitTileset} implicitTileset The implicit tileset. This includes information about the size of subtrees\n * @param {ImplicitTileCoordinates} implicitCoordinates The coordinates of the subtree\'s root tile.\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction ImplicitSubtree(\n  resource,\n  subtreeView,\n  implicitTileset,\n  implicitCoordinates\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("resource", resource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("subtreeView", subtreeView);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("implicitTileset", implicitTileset);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("implicitCoordinates", implicitCoordinates);\n  //>>includeEnd(\'debug\');\n\n  this._resource = resource;\n  this._subtreeJson = undefined;\n  this._bufferLoader = undefined;\n  this._tileAvailability = undefined;\n  this._implicitCoordinates = implicitCoordinates;\n  this._contentAvailabilityBitstreams = [];\n  this._childSubtreeAvailability = undefined;\n  this._subtreeLevels = implicitTileset.subtreeLevels;\n  this._subdivisionScheme = implicitTileset.subdivisionScheme;\n  this._branchingFactor = implicitTileset.branchingFactor;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].defer */ .Z.defer();\n\n  // properties for 3DTILES_metadata\n  this._metadataTable = undefined;\n  this._metadataExtension = undefined;\n  // Map of availability bit index to entity ID\n  this._jumpBuffer = undefined;\n\n  initialize(this, subtreeView, implicitTileset);\n}\n\nObject.defineProperties(ImplicitSubtree.prototype, {\n  /**\n   * A promise that resolves once all necessary availability buffers\n   * are loaded.\n   *\n   * @type {Promise}\n   * @readonly\n   * @private\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  /**\n   * When the <code>3DTILES_metadata</code> extension is used, this property stores\n   * a {@link MetadataTable} instance\n   *\n   * @type {MetadataTable}\n   * @readonly\n   * @private\n   */\n  metadataTable: {\n    get: function () {\n      return this._metadataTable;\n    },\n  },\n\n  /**\n   * When the <code>3DTILES_metadata</code> extension is used, this property\n   * stores the JSON from the extension. This is used by {@link TileMetadata}\n   * to get the extras and extensions.\n   *\n   * @type {MetadataTable}\n   * @readonly\n   * @private\n   */\n  metadataExtension: {\n    get: function () {\n      return this._metadataExtension;\n    },\n  },\n\n  /**\n   * Gets the implicit tile coordinates for the root of the subtree.\n   *\n   * @type {ImplicitTileCoordinates}\n   * @readonly\n   * @private\n   */\n  implicitCoordinates: {\n    get: function () {\n      return this._implicitCoordinates;\n    },\n  },\n});\n\n/**\n * Check if a specific tile is available at an index of the tile availability bitstream\n *\n * @param {Number} index The index of the desired tile\n * @returns {Boolean} The value of the i-th bit\n * @private\n */\nImplicitSubtree.prototype.tileIsAvailableAtIndex = function (index) {\n  return this._tileAvailability.getBit(index);\n};\n\n/**\n * Check if a specific tile is available at an implicit tile coordinate\n *\n * @param {ImplicitTileCoordinates} implicitCoordinates The global coordinates of a tile\n * @returns {Boolean} The value of the i-th bit\n * @private\n */\nImplicitSubtree.prototype.tileIsAvailableAtCoordinates = function (\n  implicitCoordinates\n) {\n  var index = this.getTileIndex(implicitCoordinates);\n  return this.tileIsAvailableAtIndex(index);\n};\n\n/**\n * Check if a specific tile\'s content is available at an index of the content availability bitstream\n *\n * @param {Number} index The index of the desired tile\n * @param {Number} [contentIndex=0] The index of the desired content when the <code>3DTILES_multiple_contents</code> extension is used.\n * @returns {Boolean} The value of the i-th bit\n * @private\n */\nImplicitSubtree.prototype.contentIsAvailableAtIndex = function (\n  index,\n  contentIndex\n) {\n  contentIndex = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(contentIndex, 0);\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (\n    contentIndex < 0 ||\n    contentIndex >= this._contentAvailabilityBitstreams.length\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("contentIndex out of bounds.");\n  }\n  //>>includeEnd(\'debug\');\n\n  return this._contentAvailabilityBitstreams[contentIndex].getBit(index);\n};\n\n/**\n * Check if a specific tile\'s content is available at an implicit tile coordinate\n *\n * @param {ImplicitTileCoordinates} implicitCoordinates The global coordinates of a tile\n * @param {Number} [contentIndex=0] The index of the desired content when the <code>3DTILES_multiple_contents</code> extension is used.\n * @returns {Boolean} The value of the i-th bit\n * @private\n */\nImplicitSubtree.prototype.contentIsAvailableAtCoordinates = function (\n  implicitCoordinates,\n  contentIndex\n) {\n  var index = this.getTileIndex(implicitCoordinates, contentIndex);\n  return this.contentIsAvailableAtIndex(index);\n};\n\n/**\n * Check if a child subtree is available at an index of the child subtree availability bitstream\n *\n * @param {Number} index The index of the desired child subtree\n * @returns {Boolean} The value of the i-th bit\n * @private\n */\nImplicitSubtree.prototype.childSubtreeIsAvailableAtIndex = function (index) {\n  return this._childSubtreeAvailability.getBit(index);\n};\n\n/**\n * Check if a specific child subtree is available at an implicit tile coordinate\n *\n * @param {ImplicitTileCoordinates} implicitCoordinates The global coordinates of a child subtree\n * @returns {Boolean} The value of the i-th bit\n * @private\n */\nImplicitSubtree.prototype.childSubtreeIsAvailableAtCoordinates = function (\n  implicitCoordinates\n) {\n  var index = this.getChildSubtreeIndex(implicitCoordinates);\n  return this.childSubtreeIsAvailableAtIndex(index);\n};\n\n/**\n * Get the index of the first node at the given level within this subtree.\n * e.g. for a quadtree:\n * <ul>\n * <li>Level 0 starts at index 0</li>\n * <li>Level 1 starts at index 1</li>\n * <li>Level 2 starts at index 5</li>\n * </ul>\n *\n * @param {Number} level The 0-indexed level number relative to the root of the subtree\n * @returns {Number} The first index at the desired level\n * @private\n */\nImplicitSubtree.prototype.getLevelOffset = function (level) {\n  var branchingFactor = this._branchingFactor;\n  return (Math.pow(branchingFactor, level) - 1) / (branchingFactor - 1);\n};\n\n/**\n * Get the morton index of a tile\'s parent. This is equivalent to\n * chopping off the last 2 (quadtree) or 3 (octree) bits of the morton\n * index.\n *\n * @param {Number} childIndex The morton index of the child tile relative to its parent\n * @returns {Number} The index of the child\'s parent node\n * @private\n */\nImplicitSubtree.prototype.getParentMortonIndex = function (mortonIndex) {\n  var bitsPerLevel = 2;\n  if (this._subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].OCTREE */ .Z.OCTREE) {\n    bitsPerLevel = 3;\n  }\n\n  return mortonIndex >> bitsPerLevel;\n};\n\n/**\n * Parse all relevant information out of the subtree. This fetches any\n * external buffers that are used by the implicit tileset. When finished,\n * it resolves/rejects subtree.readyPromise.\n *\n * @param {ImplicitSubtree} subtree The subtree\n * @param {Uint8Array} subtreeView The contents of the subtree binary\n * @param {ImplicitTileset} implicitTileset The implicit tileset this subtree belongs to.\n * @private\n */\nfunction initialize(subtree, subtreeView, implicitTileset) {\n  var chunks = parseSubtreeChunks(subtreeView);\n  var subtreeJson = chunks.json;\n  subtree._subtreeJson = subtreeJson;\n\n  var metadataExtension;\n  if ((0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(subtreeJson, "3DTILES_metadata")) {\n    metadataExtension = subtreeJson.extensions["3DTILES_metadata"];\n  }\n  subtree._metadataExtension = metadataExtension;\n\n  // if no contentAvailability is specified, no tile in the subtree has\n  // content\n  var defaultContentAvailability = {\n    constant: 0,\n  };\n\n  // content availability is either in the subtree JSON or the multiple\n  // contents extension. Either way, put the results in this new array\n  // for consistent processing later\n  subtreeJson.contentAvailabilityHeaders = [];\n  if ((0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(subtreeJson, "3DTILES_multiple_contents")) {\n    subtreeJson.contentAvailabilityHeaders =\n      subtreeJson.extensions["3DTILES_multiple_contents"].contentAvailability;\n  } else {\n    subtreeJson.contentAvailabilityHeaders.push(\n      (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(subtreeJson.contentAvailability, defaultContentAvailability)\n    );\n  }\n\n  var bufferHeaders = preprocessBuffers(subtreeJson.buffers);\n  var bufferViewHeaders = preprocessBufferViews(\n    subtreeJson.bufferViews,\n    bufferHeaders\n  );\n\n  // Buffers and buffer views are inactive until explicitly marked active.\n  // This way we can avoid fetching buffers that will not be used.\n  markActiveBufferViews(subtreeJson, bufferViewHeaders);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(metadataExtension)) {\n    markActiveMetadataBufferViews(metadataExtension, bufferViewHeaders);\n  }\n\n  requestActiveBuffers(subtree, bufferHeaders, chunks.binary)\n    .then(function (buffersU8) {\n      var bufferViewsU8 = parseActiveBufferViews(bufferViewHeaders, buffersU8);\n      parseAvailability(subtree, subtreeJson, implicitTileset, bufferViewsU8);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(metadataExtension)) {\n        parseMetadataTable(subtree, implicitTileset, bufferViewsU8);\n        makeJumpBuffer(subtree);\n      }\n\n      subtree._readyPromise.resolve(subtree);\n    })\n    .otherwise(function (error) {\n      subtree._readyPromise.reject(error);\n    });\n}\n\n/**\n * A helper object for storing the two parts of the subtree binary\n *\n * @typedef {Object} SubtreeChunks\n * @property {Object} json The json chunk of the subtree\n * @property {Uint8Array} binary The binary chunk of the subtree. This represents the internal buffer.\n * @private\n */\n\n/**\n * Given the binary contents of a subtree, split into JSON and binary chunks\n *\n * @param {Uint8Array} subtreeView The subtree binary\n * @returns {SubtreeChunks} An object containing the JSON and binary chunks.\n * @private\n */\nfunction parseSubtreeChunks(subtreeView) {\n  // Parse the header\n  var littleEndian = true;\n  var subtreeReader = new DataView(subtreeView.buffer, subtreeView.byteOffset);\n  // Skip to the chunk lengths\n  var byteOffset = 8;\n\n  // Read the bottom 32 bits of the 64-bit byte length. This is ok for now because:\n  // 1) not all browsers have native 64-bit operations\n  // 2) the data is well under 4GB\n  var jsonByteLength = subtreeReader.getUint32(byteOffset, littleEndian);\n  byteOffset += 8;\n  var binaryByteLength = subtreeReader.getUint32(byteOffset, littleEndian);\n  byteOffset += 8;\n\n  var subtreeJson = (0,_Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    subtreeView,\n    byteOffset,\n    jsonByteLength\n  );\n  byteOffset += jsonByteLength;\n  var subtreeBinary = subtreeView.subarray(\n    byteOffset,\n    byteOffset + binaryByteLength\n  );\n\n  return {\n    json: subtreeJson,\n    binary: subtreeBinary,\n  };\n}\n\n/**\n * A buffer header is the JSON header from the subtree JSON chunk plus\n * a couple extra boolean flags for easy reference.\n *\n * Buffers are assumed inactive until explicitly marked active. This is used\n * to avoid fetching unneeded buffers.\n *\n * @typedef {Object} BufferHeader\n * @property {Boolean} isExternal True if this is an external buffer\n * @property {Boolean} isActive Whether this buffer is currently used.\n * @property {String} [uri] The URI of the buffer (external buffers only)\n * @property {Number} byteLength The byte length of the buffer, including any padding contained within.\n * @private\n */\n\n/**\n * Iterate over the list of buffers from the subtree JSON and add the\n * isExternal and isActive fields for easier parsing later. This modifies\n * the objects in place.\n *\n * @param {Object[]} [bufferHeaders=[]] The JSON from subtreeJson.buffers.\n * @returns {BufferHeader[]} The same array of headers with additional fields.\n * @private\n */\nfunction preprocessBuffers(bufferHeaders) {\n  bufferHeaders = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(bufferHeaders) ? bufferHeaders : [];\n  for (var i = 0; i < bufferHeaders.length; i++) {\n    var bufferHeader = bufferHeaders[i];\n    bufferHeader.isExternal = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(bufferHeader.uri);\n    bufferHeader.isActive = false;\n  }\n\n  return bufferHeaders;\n}\n\n/**\n * A buffer header is the JSON header from the subtree JSON chunk plus\n * the isActive flag and a reference to the header for the underlying buffer\n *\n * @typedef {Object} BufferViewHeader\n * @property {BufferHeader} bufferHeader A reference to the header for the underlying buffer\n * @property {Boolean} isActive Whether this bufferView is currently used.\n * @property {Number} buffer The index of the underlying buffer.\n * @property {Number} byteOffset The start byte of the bufferView within the buffer.\n * @property {Number} byteLength The length of the bufferView. No padding is included in this length.\n * @private\n */\n\n/**\n * Iterate the list of buffer views from the subtree JSON and add the\n * isActive flag. Also save a reference to the bufferHeader\n *\n * @param {Object[]} [bufferViewHeaders=[]] The JSON from subtree.bufferViews\n * @param {BufferHeader[]} bufferHeaders The preprocessed buffer headers\n * @returns {BufferViewHeader[]} The same array of bufferView headers with additional fields\n * @private\n */\nfunction preprocessBufferViews(bufferViewHeaders, bufferHeaders) {\n  bufferViewHeaders = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(bufferViewHeaders) ? bufferViewHeaders : [];\n  for (var i = 0; i < bufferViewHeaders.length; i++) {\n    var bufferViewHeader = bufferViewHeaders[i];\n    var bufferHeader = bufferHeaders[bufferViewHeader.buffer];\n    bufferViewHeader.bufferHeader = bufferHeader;\n    bufferViewHeader.isActive = false;\n  }\n  return bufferViewHeaders;\n}\n\n/**\n * Determine which buffer views need to be loaded into memory. This includes:\n *\n * <ul>\n * <li>The tile availability bitstream (if a bufferView is defined)</li>\n * <li>The content availability bitstream(s) (if a bufferView is defined)</li>\n * <li>The child subtree availability bitstream (if a bufferView is defined)</li>\n * </ul>\n *\n * <p>\n * This function modifies the buffer view headers\' isActive flags in place.\n * </p>\n *\n * @param {Object[]} subtreeJson The JSON chunk from the subtree\n * @param {BufferViewHeader[]} bufferViewHeaders The preprocessed buffer view headers\n * @private\n */\nfunction markActiveBufferViews(subtreeJson, bufferViewHeaders) {\n  var header;\n  var tileAvailabilityHeader = subtreeJson.tileAvailability;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(tileAvailabilityHeader.bufferView)) {\n    header = bufferViewHeaders[tileAvailabilityHeader.bufferView];\n    header.isActive = true;\n    header.bufferHeader.isActive = true;\n  }\n\n  var contentAvailabilityHeaders = subtreeJson.contentAvailabilityHeaders;\n  for (var i = 0; i < contentAvailabilityHeaders.length; i++) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(contentAvailabilityHeaders[i].bufferView)) {\n      header = bufferViewHeaders[contentAvailabilityHeaders[i].bufferView];\n      header.isActive = true;\n      header.bufferHeader.isActive = true;\n    }\n  }\n\n  var childSubtreeAvailabilityHeader = subtreeJson.childSubtreeAvailability;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(childSubtreeAvailabilityHeader.bufferView)) {\n    header = bufferViewHeaders[childSubtreeAvailabilityHeader.bufferView];\n    header.isActive = true;\n    header.bufferHeader.isActive = true;\n  }\n}\n\n/**\n * For <code>3DTILES_metadata</code>, look over the tile metadata buffers\n * <p>\n * This always loads all of the metadata immediately. Future iterations may\n * allow filtering this to avoid downloading unneeded buffers.\n * </p>\n * @param {Object} metadataExtension The 3DTILES_metadata extension\n * @param {BufferViewHeader[]} bufferViewHeaders The preprocessed buffer view headers\n * @private\n */\nfunction markActiveMetadataBufferViews(metadataExtension, bufferViewHeaders) {\n  var properties = metadataExtension.properties;\n  var header;\n  for (var key in properties) {\n    if (properties.hasOwnProperty(key)) {\n      var metadataHeader = properties[key];\n      header = bufferViewHeaders[metadataHeader.bufferView];\n      header.isActive = true;\n      header.bufferHeader.isActive = true;\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(metadataHeader.stringOffsetBufferView)) {\n        header = bufferViewHeaders[metadataHeader.stringOffsetBufferView];\n        header.isActive = true;\n        header.bufferHeader.isActive = true;\n      }\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(metadataHeader.arrayOffsetBufferView)) {\n        header = bufferViewHeaders[metadataHeader.arrayOffsetBufferView];\n        header.isActive = true;\n        header.bufferHeader.isActive = true;\n      }\n    }\n  }\n}\n\n/**\n * Go through the list of buffers and gather all the active ones into a\n * a dictionary. Since external buffers are allowed, this sometimes involves\n * fetching separate binary files. Consequently, this method returns a promise.\n * <p>\n * The results are put into a dictionary object. The keys are indices of\n * buffers, and the values are Uint8Arrays of the contents. Only buffers\n * marked with the isActive flag are fetched.\n * </p>\n * <p>\n * The internal buffer (the subtree\'s binary chunk) is also stored in this\n * dictionary if it is marked active.\n * </p>\n * @param {ImplicitSubtree} subtree The subtree\n * @param {BufferHeader[]} bufferHeaders The preprocessed buffer headers\n * @param {Uint8Array} internalBuffer The binary chunk of the subtree file\n * @returns {Promise<Object>} A promise resolving to the dictionary of active buffers\n * @private\n */\nfunction requestActiveBuffers(subtree, bufferHeaders, internalBuffer) {\n  var promises = [];\n  for (var i = 0; i < bufferHeaders.length; i++) {\n    var bufferHeader = bufferHeaders[i];\n    if (!bufferHeader.isActive) {\n      promises.push(_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].resolve */ .Z.resolve(undefined));\n    } else if (bufferHeader.isExternal) {\n      var promise = requestExternalBuffer(subtree, bufferHeader);\n      promises.push(promise);\n    } else {\n      promises.push(_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].resolve */ .Z.resolve(internalBuffer));\n    }\n  }\n  return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].all */ .Z.all(promises).then(function (bufferResults) {\n    var buffersU8 = {};\n    for (var i = 0; i < bufferResults.length; i++) {\n      var result = bufferResults[i];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(result)) {\n        buffersU8[i] = result;\n      }\n    }\n    return buffersU8;\n  });\n}\n\nfunction requestExternalBuffer(subtree, bufferHeader) {\n  var baseResource = subtree._resource;\n  var bufferResource = baseResource.getDerivedResource({\n    url: bufferHeader.uri,\n  });\n\n  var bufferLoader = _ResourceCache_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].loadExternalBuffer */ .Z.loadExternalBuffer({\n    resource: bufferResource,\n  });\n  subtree._bufferLoader = bufferLoader;\n\n  return bufferLoader.promise.then(function (bufferLoader) {\n    return bufferLoader.typedArray;\n  });\n}\n\n/**\n * Go through the list of buffer views, and if they are marked as active,\n * extract a subarray from one of the active buffers.\n *\n * @param {BufferViewHeader[]} bufferViewHeaders\n * @param {Object} buffersU8 A dictionary of buffer index to a Uint8Array of its contents.\n * @returns {Object} A dictionary of buffer view index to a Uint8Array of its contents.\n * @private\n */\nfunction parseActiveBufferViews(bufferViewHeaders, buffersU8) {\n  var bufferViewsU8 = {};\n  for (var i = 0; i < bufferViewHeaders.length; i++) {\n    var bufferViewHeader = bufferViewHeaders[i];\n\n    if (!bufferViewHeader.isActive) {\n      continue;\n    }\n\n    var start = bufferViewHeader.byteOffset;\n    var end = start + bufferViewHeader.byteLength;\n    var buffer = buffersU8[bufferViewHeader.buffer];\n    var bufferView = buffer.subarray(start, end);\n    bufferViewsU8[i] = bufferView;\n  }\n  return bufferViewsU8;\n}\n\n/**\n * Parse the three availability bitstreams and store them in the subtree\n *\n * @param {ImplicitSubtree} subtree The subtree to modify\n * @param {Object} subtreeJson The subtree JSON\n * @param {ImplicitTileset} implicitTileset The implicit tileset this subtree belongs to\n * @param {Object} bufferViewsU8 A dictionary of buffer view index to a Uint8Array of its contents.\n * @private\n */\nfunction parseAvailability(\n  subtree,\n  subtreeJson,\n  implicitTileset,\n  bufferViewsU8\n) {\n  var branchingFactor = implicitTileset.branchingFactor;\n  var subtreeLevels = implicitTileset.subtreeLevels;\n  var tileAvailabilityBits =\n    (Math.pow(branchingFactor, subtreeLevels) - 1) / (branchingFactor - 1);\n  var childSubtreeBits = Math.pow(branchingFactor, subtreeLevels);\n\n  // availableCount is only needed for the metadata jump buffer, which\n  // corresponds to the tile availability bitstream.\n  var computeAvailableCountEnabled = (0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(\n    subtreeJson,\n    "3DTILES_metadata"\n  );\n  subtree._tileAvailability = parseAvailabilityBitstream(\n    subtreeJson.tileAvailability,\n    bufferViewsU8,\n    tileAvailabilityBits,\n    computeAvailableCountEnabled\n  );\n\n  for (var i = 0; i < subtreeJson.contentAvailabilityHeaders.length; i++) {\n    var bitstream = parseAvailabilityBitstream(\n      subtreeJson.contentAvailabilityHeaders[i],\n      bufferViewsU8,\n      // content availability has the same length as tile availability.\n      tileAvailabilityBits\n    );\n    subtree._contentAvailabilityBitstreams.push(bitstream);\n  }\n\n  subtree._childSubtreeAvailability = parseAvailabilityBitstream(\n    subtreeJson.childSubtreeAvailability,\n    bufferViewsU8,\n    childSubtreeBits\n  );\n}\n\n/**\n * Given the JSON describing an availability bitstream, turn it into an\n * in-memory representation using an {@link ImplicitAvailabilityBitstream}\n * object. This handles both constants and bitstreams from a bufferView.\n *\n * @param {Object} availabilityJson A JSON object representing the availability\n * @param {Object} bufferViewsU8 A dictionary of bufferView index to its Uint8Array contents.\n * @param {Number} lengthBits The length of the availability bitstream in bits\n * @param {Boolean} [computeAvailableCountEnabled] If true and availabilityJson.availableCount is undefined, the availableCount will be computed.\n * @returns {ImplicitAvailabilityBitstream} The parsed bitstream object\n * @private\n */\nfunction parseAvailabilityBitstream(\n  availabilityJson,\n  bufferViewsU8,\n  lengthBits,\n  computeAvailableCountEnabled\n) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(availabilityJson.constant)) {\n    return new _ImplicitAvailabilityBitstream_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n      constant: Boolean(availabilityJson.constant),\n      lengthBits: lengthBits,\n      availableCount: availabilityJson.availableCount,\n    });\n  }\n\n  var bufferView = bufferViewsU8[availabilityJson.bufferView];\n\n  return new _ImplicitAvailabilityBitstream_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n    bitstream: bufferView,\n    lengthBits: lengthBits,\n    availableCount: availabilityJson.availableCount,\n    computeAvailableCountEnabled: computeAvailableCountEnabled,\n  });\n}\n\n/**\n * Parse the 3DTILES_metadata table, storing a {@link MetadataTable} in the\n * subtree.\n *\n * @param {ImplicitSubtree} subtree The subtree\n * @param {ImplicitTileset} implicitTileset The implicit tileset this subtree belongs to.\n * @param {Object} bufferViewsU8 A dictionary of bufferView index to its Uint8Array contents.\n * @private\n */\nfunction parseMetadataTable(subtree, implicitTileset, bufferViewsU8) {\n  var metadataExtension = subtree._metadataExtension;\n  var tileCount = subtree._tileAvailability.availableCount;\n  var metadataClassName = metadataExtension.class;\n  var metadataSchema = implicitTileset.metadataSchema;\n  var metadataClass = metadataSchema.classes[metadataClassName];\n\n  subtree._metadataTable = new _MetadataTable_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n    class: metadataClass,\n    count: tileCount,\n    properties: metadataExtension.properties,\n    bufferViews: bufferViewsU8,\n  });\n}\n\n/**\n * Make a jump buffer, i.e. a map of tile bit index to the metadata entity ID.\n * This is stored in the subtree.\n * <p>\n * For unavailable tiles, the jump buffer entry will be uninitialized. Use\n * the tile availability to determine whether a jump buffer value is valid.\n * </p>\n *\n * @param {ImplicitSubtree} subtree The subtree\n * @private\n */\nfunction makeJumpBuffer(subtree) {\n  var tileAvailability = subtree._tileAvailability;\n  var entityId = 0;\n  var bufferLength = tileAvailability.lengthBits;\n  var availableCount = tileAvailability.availableCount;\n\n  var jumpBuffer;\n  if (availableCount < 256) {\n    jumpBuffer = new Uint8Array(bufferLength);\n  } else if (availableCount < 65536) {\n    jumpBuffer = new Uint16Array(bufferLength);\n  } else {\n    jumpBuffer = new Uint32Array(bufferLength);\n  }\n\n  for (var i = 0; i < tileAvailability.lengthBits; i++) {\n    if (tileAvailability.getBit(i)) {\n      jumpBuffer[i] = entityId;\n      entityId++;\n    }\n  }\n  subtree._jumpBuffer = jumpBuffer;\n}\n\n/**\n * Given the implicit tiling coordinates for a tile, get the index within the\n * subtree\'s tile availability bitstream.\n * @property {ImplicitTileCoordinates} implicitCoordinates The global coordinates of a tile\n * @return {Number} The tile\'s index within the subtree.\n * @private\n */\nImplicitSubtree.prototype.getTileIndex = function (implicitCoordinates) {\n  var localLevel = implicitCoordinates.level - this._implicitCoordinates.level;\n  if (localLevel < 0 || this._subtreeLevels <= localLevel) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("level is out of bounds for this subtree");\n  }\n\n  var subtreeCoordinates = implicitCoordinates.getSubtreeCoordinates();\n  var offsetCoordinates = subtreeCoordinates.getOffsetCoordinates(\n    implicitCoordinates\n  );\n  var index = offsetCoordinates.tileIndex;\n  return index;\n};\n\n/**\n * Given the implicit tiling coordinates for a child subtree, get the index within the\n * subtree\'s child subtree availability bitstream.\n * @property {ImplicitTileCoordinates} implicitCoordinates The global coordinates of a child subtree\n * @return {Number} The child subtree\'s index within the subtree\'s child subtree availability bitstream.\n * @private\n */\nImplicitSubtree.prototype.getChildSubtreeIndex = function (\n  implicitCoordinates\n) {\n  var localLevel = implicitCoordinates.level - this._implicitCoordinates.level;\n  if (localLevel !== this._implicitCoordinates.subtreeLevels) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("level is out of bounds for this subtree");\n  }\n\n  // Call getParentSubtreeCoordinates instead of getSubtreeCoordinates because the\n  // child subtree is by definition the root of its own subtree, so we need to find\n  // the parent subtree.\n  var parentSubtreeCoordinates = implicitCoordinates.getParentSubtreeCoordinates();\n  var offsetCoordinates = parentSubtreeCoordinates.getOffsetCoordinates(\n    implicitCoordinates\n  );\n  var index = offsetCoordinates.mortonIndex;\n  return index;\n};\n\n/**\n * Get the entity ID for a tile within this subtree.\n * @property {ImplicitTileCoordinates} implicitCoordinates The global coordinates of a tile\n * @return {Number} The entity ID for this tile for accessing tile metadata, or <code>undefined</code> if not applicable.\n *\n * @private\n */\nImplicitSubtree.prototype.getEntityId = function (implicitCoordinates) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._metadataTable)) {\n    return undefined;\n  }\n\n  var tileIndex = this.getTileIndex(implicitCoordinates);\n  if (this._tileAvailability.getBit(tileIndex)) {\n    return this._jumpBuffer[tileIndex];\n  }\n\n  return undefined;\n};\n\n/**\n * @private\n */\nImplicitSubtree.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * @private\n */\nImplicitSubtree.prototype.destroy = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._bufferLoader)) {\n    _ResourceCache_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].unload */ .Z.unload(this._bufferLoader);\n  }\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBeUI7QUFDdkMsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxzRUFBTztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNFQUFPO0FBQ2IsSUFBSSxnRkFBb0I7QUFDeEI7O0FBRUEsU0FBUywyRUFBYTtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9JbXBsaWNpdFN1YnRyZWUuanM/NmUzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBnZXRKc29uRnJvbVR5cGVkQXJyYXkgZnJvbSBcIi4uL0NvcmUvZ2V0SnNvbkZyb21UeXBlZEFycmF5LmpzXCI7XG5pbXBvcnQgUnVudGltZUVycm9yIGZyb20gXCIuLi9Db3JlL1J1bnRpbWVFcnJvci5qc1wiO1xuaW1wb3J0IGhhc0V4dGVuc2lvbiBmcm9tIFwiLi9oYXNFeHRlbnNpb24uanNcIjtcbmltcG9ydCBJbXBsaWNpdEF2YWlsYWJpbGl0eUJpdHN0cmVhbSBmcm9tIFwiLi9JbXBsaWNpdEF2YWlsYWJpbGl0eUJpdHN0cmVhbS5qc1wiO1xuaW1wb3J0IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUgZnJvbSBcIi4vSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5qc1wiO1xuaW1wb3J0IE1ldGFkYXRhVGFibGUgZnJvbSBcIi4vTWV0YWRhdGFUYWJsZS5qc1wiO1xuaW1wb3J0IFJlc291cmNlQ2FjaGUgZnJvbSBcIi4vUmVzb3VyY2VDYWNoZS5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuXG4vKipcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYSBzaW5nbGUgc3VidHJlZSBpbiBhbiBpbXBsaWNpdCB0aWxlc2V0XG4gKiBpbmNsdWRpbmcgYXZhaWxhYmlsaXR5LlxuICogPHA+XG4gKiBTdWJ0cmVlcyBoYW5kbGUgdGlsZSBtZXRhZGF0YSBmcm9tIHRoZSA8Y29kZT4zRFRJTEVTX21ldGFkYXRhPC9jb2RlPiBleHRlbnNpb25cbiAqIDwvcD5cbiAqXG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvM2QtdGlsZXMvdHJlZS8zZC10aWxlcy1uZXh0L2V4dGVuc2lvbnMvM0RUSUxFU19tZXRhZGF0YSNpbXBsaWNpdC10aWxlLW1ldGFkYXRhfEltcGxpY2l0IFRpbGUgTWV0YWRhdGEgaW4gdGhlIDNEVElMRVNfbWV0YWRhdGEgc3BlY2lmaWNhdGlvbn1cbiAqXG4gKiBAYWxpYXMgSW1wbGljaXRTdWJ0cmVlXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1Jlc291cmNlfSByZXNvdXJjZSBUaGUgcmVzb3VyY2UgZm9yIHRoaXMgc3VidHJlZS4gVGhpcyBpcyB1c2VkIGZvciBmZXRjaGluZyBleHRlcm5hbCBidWZmZXJzIGFzIG5lZWRlZC5cbiAqIEBwYXJhbSB7VWludDhBcnJheX0gc3VidHJlZVZpZXcgVGhlIGNvbnRlbnRzIG9mIGEgc3VidHJlZSBiaW5hcnkgaW4gYSBVaW50OEFycmF5LlxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVzZXR9IGltcGxpY2l0VGlsZXNldCBUaGUgaW1wbGljaXQgdGlsZXNldC4gVGhpcyBpbmNsdWRlcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc2l6ZSBvZiBzdWJ0cmVlc1xuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gaW1wbGljaXRDb29yZGluYXRlcyBUaGUgY29vcmRpbmF0ZXMgb2YgdGhlIHN1YnRyZWUncyByb290IHRpbGUuXG4gKiBAcHJpdmF0ZVxuICogQGV4cGVyaW1lbnRhbCBUaGlzIGZlYXR1cmUgaXMgdXNpbmcgcGFydCBvZiB0aGUgM0QgVGlsZXMgc3BlYyB0aGF0IGlzIG5vdCBmaW5hbCBhbmQgaXMgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBDZXNpdW0ncyBzdGFuZGFyZCBkZXByZWNhdGlvbiBwb2xpY3kuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEltcGxpY2l0U3VidHJlZShcbiAgcmVzb3VyY2UsXG4gIHN1YnRyZWVWaWV3LFxuICBpbXBsaWNpdFRpbGVzZXQsXG4gIGltcGxpY2l0Q29vcmRpbmF0ZXNcbikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwicmVzb3VyY2VcIiwgcmVzb3VyY2UpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwic3VidHJlZVZpZXdcIiwgc3VidHJlZVZpZXcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwiaW1wbGljaXRUaWxlc2V0XCIsIGltcGxpY2l0VGlsZXNldCk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJpbXBsaWNpdENvb3JkaW5hdGVzXCIsIGltcGxpY2l0Q29vcmRpbmF0ZXMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLl9yZXNvdXJjZSA9IHJlc291cmNlO1xuICB0aGlzLl9zdWJ0cmVlSnNvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fYnVmZmVyTG9hZGVyID0gdW5kZWZpbmVkO1xuICB0aGlzLl90aWxlQXZhaWxhYmlsaXR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9pbXBsaWNpdENvb3JkaW5hdGVzID0gaW1wbGljaXRDb29yZGluYXRlcztcbiAgdGhpcy5fY29udGVudEF2YWlsYWJpbGl0eUJpdHN0cmVhbXMgPSBbXTtcbiAgdGhpcy5fY2hpbGRTdWJ0cmVlQXZhaWxhYmlsaXR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zdWJ0cmVlTGV2ZWxzID0gaW1wbGljaXRUaWxlc2V0LnN1YnRyZWVMZXZlbHM7XG4gIHRoaXMuX3N1YmRpdmlzaW9uU2NoZW1lID0gaW1wbGljaXRUaWxlc2V0LnN1YmRpdmlzaW9uU2NoZW1lO1xuICB0aGlzLl9icmFuY2hpbmdGYWN0b3IgPSBpbXBsaWNpdFRpbGVzZXQuYnJhbmNoaW5nRmFjdG9yO1xuICB0aGlzLl9yZWFkeVByb21pc2UgPSB3aGVuLmRlZmVyKCk7XG5cbiAgLy8gcHJvcGVydGllcyBmb3IgM0RUSUxFU19tZXRhZGF0YVxuICB0aGlzLl9tZXRhZGF0YVRhYmxlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9tZXRhZGF0YUV4dGVuc2lvbiA9IHVuZGVmaW5lZDtcbiAgLy8gTWFwIG9mIGF2YWlsYWJpbGl0eSBiaXQgaW5kZXggdG8gZW50aXR5IElEXG4gIHRoaXMuX2p1bXBCdWZmZXIgPSB1bmRlZmluZWQ7XG5cbiAgaW5pdGlhbGl6ZSh0aGlzLCBzdWJ0cmVlVmlldywgaW1wbGljaXRUaWxlc2V0KTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSW1wbGljaXRTdWJ0cmVlLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgbmVjZXNzYXJ5IGF2YWlsYWJpbGl0eSBidWZmZXJzXG4gICAqIGFyZSBsb2FkZWQuXG4gICAqXG4gICAqIEB0eXBlIHtQcm9taXNlfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlYWR5UHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5UHJvbWlzZS5wcm9taXNlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIDxjb2RlPjNEVElMRVNfbWV0YWRhdGE8L2NvZGU+IGV4dGVuc2lvbiBpcyB1c2VkLCB0aGlzIHByb3BlcnR5IHN0b3Jlc1xuICAgKiBhIHtAbGluayBNZXRhZGF0YVRhYmxlfSBpbnN0YW5jZVxuICAgKlxuICAgKiBAdHlwZSB7TWV0YWRhdGFUYWJsZX1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtZXRhZGF0YVRhYmxlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbWV0YWRhdGFUYWJsZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSA8Y29kZT4zRFRJTEVTX21ldGFkYXRhPC9jb2RlPiBleHRlbnNpb24gaXMgdXNlZCwgdGhpcyBwcm9wZXJ0eVxuICAgKiBzdG9yZXMgdGhlIEpTT04gZnJvbSB0aGUgZXh0ZW5zaW9uLiBUaGlzIGlzIHVzZWQgYnkge0BsaW5rIFRpbGVNZXRhZGF0YX1cbiAgICogdG8gZ2V0IHRoZSBleHRyYXMgYW5kIGV4dGVuc2lvbnMuXG4gICAqXG4gICAqIEB0eXBlIHtNZXRhZGF0YVRhYmxlfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG1ldGFkYXRhRXh0ZW5zaW9uOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbWV0YWRhdGFFeHRlbnNpb247XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgaW1wbGljaXQgdGlsZSBjb29yZGluYXRlcyBmb3IgdGhlIHJvb3Qgb2YgdGhlIHN1YnRyZWUuXG4gICAqXG4gICAqIEB0eXBlIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc31cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbXBsaWNpdENvb3JkaW5hdGVzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faW1wbGljaXRDb29yZGluYXRlcztcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzcGVjaWZpYyB0aWxlIGlzIGF2YWlsYWJsZSBhdCBhbiBpbmRleCBvZiB0aGUgdGlsZSBhdmFpbGFiaWxpdHkgYml0c3RyZWFtXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgZGVzaXJlZCB0aWxlXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVGhlIHZhbHVlIG9mIHRoZSBpLXRoIGJpdFxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRTdWJ0cmVlLnByb3RvdHlwZS50aWxlSXNBdmFpbGFibGVBdEluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIHJldHVybiB0aGlzLl90aWxlQXZhaWxhYmlsaXR5LmdldEJpdChpbmRleCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGEgc3BlY2lmaWMgdGlsZSBpcyBhdmFpbGFibGUgYXQgYW4gaW1wbGljaXQgdGlsZSBjb29yZGluYXRlXG4gKlxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gaW1wbGljaXRDb29yZGluYXRlcyBUaGUgZ2xvYmFsIGNvb3JkaW5hdGVzIG9mIGEgdGlsZVxuICogQHJldHVybnMge0Jvb2xlYW59IFRoZSB2YWx1ZSBvZiB0aGUgaS10aCBiaXRcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0U3VidHJlZS5wcm90b3R5cGUudGlsZUlzQXZhaWxhYmxlQXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChcbiAgaW1wbGljaXRDb29yZGluYXRlc1xuKSB7XG4gIHZhciBpbmRleCA9IHRoaXMuZ2V0VGlsZUluZGV4KGltcGxpY2l0Q29vcmRpbmF0ZXMpO1xuICByZXR1cm4gdGhpcy50aWxlSXNBdmFpbGFibGVBdEluZGV4KGluZGV4KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzcGVjaWZpYyB0aWxlJ3MgY29udGVudCBpcyBhdmFpbGFibGUgYXQgYW4gaW5kZXggb2YgdGhlIGNvbnRlbnQgYXZhaWxhYmlsaXR5IGJpdHN0cmVhbVxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGRlc2lyZWQgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtjb250ZW50SW5kZXg9MF0gVGhlIGluZGV4IG9mIHRoZSBkZXNpcmVkIGNvbnRlbnQgd2hlbiB0aGUgPGNvZGU+M0RUSUxFU19tdWx0aXBsZV9jb250ZW50czwvY29kZT4gZXh0ZW5zaW9uIGlzIHVzZWQuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVGhlIHZhbHVlIG9mIHRoZSBpLXRoIGJpdFxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRTdWJ0cmVlLnByb3RvdHlwZS5jb250ZW50SXNBdmFpbGFibGVBdEluZGV4ID0gZnVuY3Rpb24gKFxuICBpbmRleCxcbiAgY29udGVudEluZGV4XG4pIHtcbiAgY29udGVudEluZGV4ID0gZGVmYXVsdFZhbHVlKGNvbnRlbnRJbmRleCwgMCk7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChcbiAgICBjb250ZW50SW5kZXggPCAwIHx8XG4gICAgY29udGVudEluZGV4ID49IHRoaXMuX2NvbnRlbnRBdmFpbGFiaWxpdHlCaXRzdHJlYW1zLmxlbmd0aFxuICApIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJjb250ZW50SW5kZXggb3V0IG9mIGJvdW5kcy5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgcmV0dXJuIHRoaXMuX2NvbnRlbnRBdmFpbGFiaWxpdHlCaXRzdHJlYW1zW2NvbnRlbnRJbmRleF0uZ2V0Qml0KGluZGV4KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzcGVjaWZpYyB0aWxlJ3MgY29udGVudCBpcyBhdmFpbGFibGUgYXQgYW4gaW1wbGljaXQgdGlsZSBjb29yZGluYXRlXG4gKlxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gaW1wbGljaXRDb29yZGluYXRlcyBUaGUgZ2xvYmFsIGNvb3JkaW5hdGVzIG9mIGEgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtjb250ZW50SW5kZXg9MF0gVGhlIGluZGV4IG9mIHRoZSBkZXNpcmVkIGNvbnRlbnQgd2hlbiB0aGUgPGNvZGU+M0RUSUxFU19tdWx0aXBsZV9jb250ZW50czwvY29kZT4gZXh0ZW5zaW9uIGlzIHVzZWQuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVGhlIHZhbHVlIG9mIHRoZSBpLXRoIGJpdFxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRTdWJ0cmVlLnByb3RvdHlwZS5jb250ZW50SXNBdmFpbGFibGVBdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKFxuICBpbXBsaWNpdENvb3JkaW5hdGVzLFxuICBjb250ZW50SW5kZXhcbikge1xuICB2YXIgaW5kZXggPSB0aGlzLmdldFRpbGVJbmRleChpbXBsaWNpdENvb3JkaW5hdGVzLCBjb250ZW50SW5kZXgpO1xuICByZXR1cm4gdGhpcy5jb250ZW50SXNBdmFpbGFibGVBdEluZGV4KGluZGV4KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBjaGlsZCBzdWJ0cmVlIGlzIGF2YWlsYWJsZSBhdCBhbiBpbmRleCBvZiB0aGUgY2hpbGQgc3VidHJlZSBhdmFpbGFiaWxpdHkgYml0c3RyZWFtXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgZGVzaXJlZCBjaGlsZCBzdWJ0cmVlXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVGhlIHZhbHVlIG9mIHRoZSBpLXRoIGJpdFxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRTdWJ0cmVlLnByb3RvdHlwZS5jaGlsZFN1YnRyZWVJc0F2YWlsYWJsZUF0SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgcmV0dXJuIHRoaXMuX2NoaWxkU3VidHJlZUF2YWlsYWJpbGl0eS5nZXRCaXQoaW5kZXgpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIHNwZWNpZmljIGNoaWxkIHN1YnRyZWUgaXMgYXZhaWxhYmxlIGF0IGFuIGltcGxpY2l0IHRpbGUgY29vcmRpbmF0ZVxuICpcbiAqIEBwYXJhbSB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IGltcGxpY2l0Q29vcmRpbmF0ZXMgVGhlIGdsb2JhbCBjb29yZGluYXRlcyBvZiBhIGNoaWxkIHN1YnRyZWVcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUaGUgdmFsdWUgb2YgdGhlIGktdGggYml0XG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFN1YnRyZWUucHJvdG90eXBlLmNoaWxkU3VidHJlZUlzQXZhaWxhYmxlQXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChcbiAgaW1wbGljaXRDb29yZGluYXRlc1xuKSB7XG4gIHZhciBpbmRleCA9IHRoaXMuZ2V0Q2hpbGRTdWJ0cmVlSW5kZXgoaW1wbGljaXRDb29yZGluYXRlcyk7XG4gIHJldHVybiB0aGlzLmNoaWxkU3VidHJlZUlzQXZhaWxhYmxlQXRJbmRleChpbmRleCk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IG5vZGUgYXQgdGhlIGdpdmVuIGxldmVsIHdpdGhpbiB0aGlzIHN1YnRyZWUuXG4gKiBlLmcuIGZvciBhIHF1YWR0cmVlOlxuICogPHVsPlxuICogPGxpPkxldmVsIDAgc3RhcnRzIGF0IGluZGV4IDA8L2xpPlxuICogPGxpPkxldmVsIDEgc3RhcnRzIGF0IGluZGV4IDE8L2xpPlxuICogPGxpPkxldmVsIDIgc3RhcnRzIGF0IGluZGV4IDU8L2xpPlxuICogPC91bD5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIDAtaW5kZXhlZCBsZXZlbCBudW1iZXIgcmVsYXRpdmUgdG8gdGhlIHJvb3Qgb2YgdGhlIHN1YnRyZWVcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBmaXJzdCBpbmRleCBhdCB0aGUgZGVzaXJlZCBsZXZlbFxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRTdWJ0cmVlLnByb3RvdHlwZS5nZXRMZXZlbE9mZnNldCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICB2YXIgYnJhbmNoaW5nRmFjdG9yID0gdGhpcy5fYnJhbmNoaW5nRmFjdG9yO1xuICByZXR1cm4gKE1hdGgucG93KGJyYW5jaGluZ0ZhY3RvciwgbGV2ZWwpIC0gMSkgLyAoYnJhbmNoaW5nRmFjdG9yIC0gMSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgbW9ydG9uIGluZGV4IG9mIGEgdGlsZSdzIHBhcmVudC4gVGhpcyBpcyBlcXVpdmFsZW50IHRvXG4gKiBjaG9wcGluZyBvZmYgdGhlIGxhc3QgMiAocXVhZHRyZWUpIG9yIDMgKG9jdHJlZSkgYml0cyBvZiB0aGUgbW9ydG9uXG4gKiBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gY2hpbGRJbmRleCBUaGUgbW9ydG9uIGluZGV4IG9mIHRoZSBjaGlsZCB0aWxlIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgY2hpbGQncyBwYXJlbnQgbm9kZVxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRTdWJ0cmVlLnByb3RvdHlwZS5nZXRQYXJlbnRNb3J0b25JbmRleCA9IGZ1bmN0aW9uIChtb3J0b25JbmRleCkge1xuICB2YXIgYml0c1BlckxldmVsID0gMjtcbiAgaWYgKHRoaXMuX3N1YmRpdmlzaW9uU2NoZW1lID09PSBJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lLk9DVFJFRSkge1xuICAgIGJpdHNQZXJMZXZlbCA9IDM7XG4gIH1cblxuICByZXR1cm4gbW9ydG9uSW5kZXggPj4gYml0c1BlckxldmVsO1xufTtcblxuLyoqXG4gKiBQYXJzZSBhbGwgcmVsZXZhbnQgaW5mb3JtYXRpb24gb3V0IG9mIHRoZSBzdWJ0cmVlLiBUaGlzIGZldGNoZXMgYW55XG4gKiBleHRlcm5hbCBidWZmZXJzIHRoYXQgYXJlIHVzZWQgYnkgdGhlIGltcGxpY2l0IHRpbGVzZXQuIFdoZW4gZmluaXNoZWQsXG4gKiBpdCByZXNvbHZlcy9yZWplY3RzIHN1YnRyZWUucmVhZHlQcm9taXNlLlxuICpcbiAqIEBwYXJhbSB7SW1wbGljaXRTdWJ0cmVlfSBzdWJ0cmVlIFRoZSBzdWJ0cmVlXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IHN1YnRyZWVWaWV3IFRoZSBjb250ZW50cyBvZiB0aGUgc3VidHJlZSBiaW5hcnlcbiAqIEBwYXJhbSB7SW1wbGljaXRUaWxlc2V0fSBpbXBsaWNpdFRpbGVzZXQgVGhlIGltcGxpY2l0IHRpbGVzZXQgdGhpcyBzdWJ0cmVlIGJlbG9uZ3MgdG8uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpbml0aWFsaXplKHN1YnRyZWUsIHN1YnRyZWVWaWV3LCBpbXBsaWNpdFRpbGVzZXQpIHtcbiAgdmFyIGNodW5rcyA9IHBhcnNlU3VidHJlZUNodW5rcyhzdWJ0cmVlVmlldyk7XG4gIHZhciBzdWJ0cmVlSnNvbiA9IGNodW5rcy5qc29uO1xuICBzdWJ0cmVlLl9zdWJ0cmVlSnNvbiA9IHN1YnRyZWVKc29uO1xuXG4gIHZhciBtZXRhZGF0YUV4dGVuc2lvbjtcbiAgaWYgKGhhc0V4dGVuc2lvbihzdWJ0cmVlSnNvbiwgXCIzRFRJTEVTX21ldGFkYXRhXCIpKSB7XG4gICAgbWV0YWRhdGFFeHRlbnNpb24gPSBzdWJ0cmVlSnNvbi5leHRlbnNpb25zW1wiM0RUSUxFU19tZXRhZGF0YVwiXTtcbiAgfVxuICBzdWJ0cmVlLl9tZXRhZGF0YUV4dGVuc2lvbiA9IG1ldGFkYXRhRXh0ZW5zaW9uO1xuXG4gIC8vIGlmIG5vIGNvbnRlbnRBdmFpbGFiaWxpdHkgaXMgc3BlY2lmaWVkLCBubyB0aWxlIGluIHRoZSBzdWJ0cmVlIGhhc1xuICAvLyBjb250ZW50XG4gIHZhciBkZWZhdWx0Q29udGVudEF2YWlsYWJpbGl0eSA9IHtcbiAgICBjb25zdGFudDogMCxcbiAgfTtcblxuICAvLyBjb250ZW50IGF2YWlsYWJpbGl0eSBpcyBlaXRoZXIgaW4gdGhlIHN1YnRyZWUgSlNPTiBvciB0aGUgbXVsdGlwbGVcbiAgLy8gY29udGVudHMgZXh0ZW5zaW9uLiBFaXRoZXIgd2F5LCBwdXQgdGhlIHJlc3VsdHMgaW4gdGhpcyBuZXcgYXJyYXlcbiAgLy8gZm9yIGNvbnNpc3RlbnQgcHJvY2Vzc2luZyBsYXRlclxuICBzdWJ0cmVlSnNvbi5jb250ZW50QXZhaWxhYmlsaXR5SGVhZGVycyA9IFtdO1xuICBpZiAoaGFzRXh0ZW5zaW9uKHN1YnRyZWVKc29uLCBcIjNEVElMRVNfbXVsdGlwbGVfY29udGVudHNcIikpIHtcbiAgICBzdWJ0cmVlSnNvbi5jb250ZW50QXZhaWxhYmlsaXR5SGVhZGVycyA9XG4gICAgICBzdWJ0cmVlSnNvbi5leHRlbnNpb25zW1wiM0RUSUxFU19tdWx0aXBsZV9jb250ZW50c1wiXS5jb250ZW50QXZhaWxhYmlsaXR5O1xuICB9IGVsc2Uge1xuICAgIHN1YnRyZWVKc29uLmNvbnRlbnRBdmFpbGFiaWxpdHlIZWFkZXJzLnB1c2goXG4gICAgICBkZWZhdWx0VmFsdWUoc3VidHJlZUpzb24uY29udGVudEF2YWlsYWJpbGl0eSwgZGVmYXVsdENvbnRlbnRBdmFpbGFiaWxpdHkpXG4gICAgKTtcbiAgfVxuXG4gIHZhciBidWZmZXJIZWFkZXJzID0gcHJlcHJvY2Vzc0J1ZmZlcnMoc3VidHJlZUpzb24uYnVmZmVycyk7XG4gIHZhciBidWZmZXJWaWV3SGVhZGVycyA9IHByZXByb2Nlc3NCdWZmZXJWaWV3cyhcbiAgICBzdWJ0cmVlSnNvbi5idWZmZXJWaWV3cyxcbiAgICBidWZmZXJIZWFkZXJzXG4gICk7XG5cbiAgLy8gQnVmZmVycyBhbmQgYnVmZmVyIHZpZXdzIGFyZSBpbmFjdGl2ZSB1bnRpbCBleHBsaWNpdGx5IG1hcmtlZCBhY3RpdmUuXG4gIC8vIFRoaXMgd2F5IHdlIGNhbiBhdm9pZCBmZXRjaGluZyBidWZmZXJzIHRoYXQgd2lsbCBub3QgYmUgdXNlZC5cbiAgbWFya0FjdGl2ZUJ1ZmZlclZpZXdzKHN1YnRyZWVKc29uLCBidWZmZXJWaWV3SGVhZGVycyk7XG4gIGlmIChkZWZpbmVkKG1ldGFkYXRhRXh0ZW5zaW9uKSkge1xuICAgIG1hcmtBY3RpdmVNZXRhZGF0YUJ1ZmZlclZpZXdzKG1ldGFkYXRhRXh0ZW5zaW9uLCBidWZmZXJWaWV3SGVhZGVycyk7XG4gIH1cblxuICByZXF1ZXN0QWN0aXZlQnVmZmVycyhzdWJ0cmVlLCBidWZmZXJIZWFkZXJzLCBjaHVua3MuYmluYXJ5KVxuICAgIC50aGVuKGZ1bmN0aW9uIChidWZmZXJzVTgpIHtcbiAgICAgIHZhciBidWZmZXJWaWV3c1U4ID0gcGFyc2VBY3RpdmVCdWZmZXJWaWV3cyhidWZmZXJWaWV3SGVhZGVycywgYnVmZmVyc1U4KTtcbiAgICAgIHBhcnNlQXZhaWxhYmlsaXR5KHN1YnRyZWUsIHN1YnRyZWVKc29uLCBpbXBsaWNpdFRpbGVzZXQsIGJ1ZmZlclZpZXdzVTgpO1xuXG4gICAgICBpZiAoZGVmaW5lZChtZXRhZGF0YUV4dGVuc2lvbikpIHtcbiAgICAgICAgcGFyc2VNZXRhZGF0YVRhYmxlKHN1YnRyZWUsIGltcGxpY2l0VGlsZXNldCwgYnVmZmVyVmlld3NVOCk7XG4gICAgICAgIG1ha2VKdW1wQnVmZmVyKHN1YnRyZWUpO1xuICAgICAgfVxuXG4gICAgICBzdWJ0cmVlLl9yZWFkeVByb21pc2UucmVzb2x2ZShzdWJ0cmVlKTtcbiAgICB9KVxuICAgIC5vdGhlcndpc2UoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBzdWJ0cmVlLl9yZWFkeVByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBBIGhlbHBlciBvYmplY3QgZm9yIHN0b3JpbmcgdGhlIHR3byBwYXJ0cyBvZiB0aGUgc3VidHJlZSBiaW5hcnlcbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdWJ0cmVlQ2h1bmtzXG4gKiBAcHJvcGVydHkge09iamVjdH0ganNvbiBUaGUganNvbiBjaHVuayBvZiB0aGUgc3VidHJlZVxuICogQHByb3BlcnR5IHtVaW50OEFycmF5fSBiaW5hcnkgVGhlIGJpbmFyeSBjaHVuayBvZiB0aGUgc3VidHJlZS4gVGhpcyByZXByZXNlbnRzIHRoZSBpbnRlcm5hbCBidWZmZXIuXG4gKiBAcHJpdmF0ZVxuICovXG5cbi8qKlxuICogR2l2ZW4gdGhlIGJpbmFyeSBjb250ZW50cyBvZiBhIHN1YnRyZWUsIHNwbGl0IGludG8gSlNPTiBhbmQgYmluYXJ5IGNodW5rc1xuICpcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gc3VidHJlZVZpZXcgVGhlIHN1YnRyZWUgYmluYXJ5XG4gKiBAcmV0dXJucyB7U3VidHJlZUNodW5rc30gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIEpTT04gYW5kIGJpbmFyeSBjaHVua3MuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwYXJzZVN1YnRyZWVDaHVua3Moc3VidHJlZVZpZXcpIHtcbiAgLy8gUGFyc2UgdGhlIGhlYWRlclxuICB2YXIgbGl0dGxlRW5kaWFuID0gdHJ1ZTtcbiAgdmFyIHN1YnRyZWVSZWFkZXIgPSBuZXcgRGF0YVZpZXcoc3VidHJlZVZpZXcuYnVmZmVyLCBzdWJ0cmVlVmlldy5ieXRlT2Zmc2V0KTtcbiAgLy8gU2tpcCB0byB0aGUgY2h1bmsgbGVuZ3Roc1xuICB2YXIgYnl0ZU9mZnNldCA9IDg7XG5cbiAgLy8gUmVhZCB0aGUgYm90dG9tIDMyIGJpdHMgb2YgdGhlIDY0LWJpdCBieXRlIGxlbmd0aC4gVGhpcyBpcyBvayBmb3Igbm93IGJlY2F1c2U6XG4gIC8vIDEpIG5vdCBhbGwgYnJvd3NlcnMgaGF2ZSBuYXRpdmUgNjQtYml0IG9wZXJhdGlvbnNcbiAgLy8gMikgdGhlIGRhdGEgaXMgd2VsbCB1bmRlciA0R0JcbiAgdmFyIGpzb25CeXRlTGVuZ3RoID0gc3VidHJlZVJlYWRlci5nZXRVaW50MzIoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgYnl0ZU9mZnNldCArPSA4O1xuICB2YXIgYmluYXJ5Qnl0ZUxlbmd0aCA9IHN1YnRyZWVSZWFkZXIuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gIGJ5dGVPZmZzZXQgKz0gODtcblxuICB2YXIgc3VidHJlZUpzb24gPSBnZXRKc29uRnJvbVR5cGVkQXJyYXkoXG4gICAgc3VidHJlZVZpZXcsXG4gICAgYnl0ZU9mZnNldCxcbiAgICBqc29uQnl0ZUxlbmd0aFxuICApO1xuICBieXRlT2Zmc2V0ICs9IGpzb25CeXRlTGVuZ3RoO1xuICB2YXIgc3VidHJlZUJpbmFyeSA9IHN1YnRyZWVWaWV3LnN1YmFycmF5KFxuICAgIGJ5dGVPZmZzZXQsXG4gICAgYnl0ZU9mZnNldCArIGJpbmFyeUJ5dGVMZW5ndGhcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGpzb246IHN1YnRyZWVKc29uLFxuICAgIGJpbmFyeTogc3VidHJlZUJpbmFyeSxcbiAgfTtcbn1cblxuLyoqXG4gKiBBIGJ1ZmZlciBoZWFkZXIgaXMgdGhlIEpTT04gaGVhZGVyIGZyb20gdGhlIHN1YnRyZWUgSlNPTiBjaHVuayBwbHVzXG4gKiBhIGNvdXBsZSBleHRyYSBib29sZWFuIGZsYWdzIGZvciBlYXN5IHJlZmVyZW5jZS5cbiAqXG4gKiBCdWZmZXJzIGFyZSBhc3N1bWVkIGluYWN0aXZlIHVudGlsIGV4cGxpY2l0bHkgbWFya2VkIGFjdGl2ZS4gVGhpcyBpcyB1c2VkXG4gKiB0byBhdm9pZCBmZXRjaGluZyB1bm5lZWRlZCBidWZmZXJzLlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEJ1ZmZlckhlYWRlclxuICogQHByb3BlcnR5IHtCb29sZWFufSBpc0V4dGVybmFsIFRydWUgaWYgdGhpcyBpcyBhbiBleHRlcm5hbCBidWZmZXJcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaXNBY3RpdmUgV2hldGhlciB0aGlzIGJ1ZmZlciBpcyBjdXJyZW50bHkgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbdXJpXSBUaGUgVVJJIG9mIHRoZSBidWZmZXIgKGV4dGVybmFsIGJ1ZmZlcnMgb25seSlcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBieXRlTGVuZ3RoIFRoZSBieXRlIGxlbmd0aCBvZiB0aGUgYnVmZmVyLCBpbmNsdWRpbmcgYW55IHBhZGRpbmcgY29udGFpbmVkIHdpdGhpbi5cbiAqIEBwcml2YXRlXG4gKi9cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgdGhlIGxpc3Qgb2YgYnVmZmVycyBmcm9tIHRoZSBzdWJ0cmVlIEpTT04gYW5kIGFkZCB0aGVcbiAqIGlzRXh0ZXJuYWwgYW5kIGlzQWN0aXZlIGZpZWxkcyBmb3IgZWFzaWVyIHBhcnNpbmcgbGF0ZXIuIFRoaXMgbW9kaWZpZXNcbiAqIHRoZSBvYmplY3RzIGluIHBsYWNlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0W119IFtidWZmZXJIZWFkZXJzPVtdXSBUaGUgSlNPTiBmcm9tIHN1YnRyZWVKc29uLmJ1ZmZlcnMuXG4gKiBAcmV0dXJucyB7QnVmZmVySGVhZGVyW119IFRoZSBzYW1lIGFycmF5IG9mIGhlYWRlcnMgd2l0aCBhZGRpdGlvbmFsIGZpZWxkcy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHByZXByb2Nlc3NCdWZmZXJzKGJ1ZmZlckhlYWRlcnMpIHtcbiAgYnVmZmVySGVhZGVycyA9IGRlZmluZWQoYnVmZmVySGVhZGVycykgPyBidWZmZXJIZWFkZXJzIDogW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVySGVhZGVycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBidWZmZXJIZWFkZXIgPSBidWZmZXJIZWFkZXJzW2ldO1xuICAgIGJ1ZmZlckhlYWRlci5pc0V4dGVybmFsID0gZGVmaW5lZChidWZmZXJIZWFkZXIudXJpKTtcbiAgICBidWZmZXJIZWFkZXIuaXNBY3RpdmUgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBidWZmZXJIZWFkZXJzO1xufVxuXG4vKipcbiAqIEEgYnVmZmVyIGhlYWRlciBpcyB0aGUgSlNPTiBoZWFkZXIgZnJvbSB0aGUgc3VidHJlZSBKU09OIGNodW5rIHBsdXNcbiAqIHRoZSBpc0FjdGl2ZSBmbGFnIGFuZCBhIHJlZmVyZW5jZSB0byB0aGUgaGVhZGVyIGZvciB0aGUgdW5kZXJseWluZyBidWZmZXJcbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCdWZmZXJWaWV3SGVhZGVyXG4gKiBAcHJvcGVydHkge0J1ZmZlckhlYWRlcn0gYnVmZmVySGVhZGVyIEEgcmVmZXJlbmNlIHRvIHRoZSBoZWFkZXIgZm9yIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlclxuICogQHByb3BlcnR5IHtCb29sZWFufSBpc0FjdGl2ZSBXaGV0aGVyIHRoaXMgYnVmZmVyVmlldyBpcyBjdXJyZW50bHkgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBidWZmZXIgVGhlIGluZGV4IG9mIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci5cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBieXRlT2Zmc2V0IFRoZSBzdGFydCBieXRlIG9mIHRoZSBidWZmZXJWaWV3IHdpdGhpbiB0aGUgYnVmZmVyLlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IGJ5dGVMZW5ndGggVGhlIGxlbmd0aCBvZiB0aGUgYnVmZmVyVmlldy4gTm8gcGFkZGluZyBpcyBpbmNsdWRlZCBpbiB0aGlzIGxlbmd0aC5cbiAqIEBwcml2YXRlXG4gKi9cblxuLyoqXG4gKiBJdGVyYXRlIHRoZSBsaXN0IG9mIGJ1ZmZlciB2aWV3cyBmcm9tIHRoZSBzdWJ0cmVlIEpTT04gYW5kIGFkZCB0aGVcbiAqIGlzQWN0aXZlIGZsYWcuIEFsc28gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGUgYnVmZmVySGVhZGVyXG4gKlxuICogQHBhcmFtIHtPYmplY3RbXX0gW2J1ZmZlclZpZXdIZWFkZXJzPVtdXSBUaGUgSlNPTiBmcm9tIHN1YnRyZWUuYnVmZmVyVmlld3NcbiAqIEBwYXJhbSB7QnVmZmVySGVhZGVyW119IGJ1ZmZlckhlYWRlcnMgVGhlIHByZXByb2Nlc3NlZCBidWZmZXIgaGVhZGVyc1xuICogQHJldHVybnMge0J1ZmZlclZpZXdIZWFkZXJbXX0gVGhlIHNhbWUgYXJyYXkgb2YgYnVmZmVyVmlldyBoZWFkZXJzIHdpdGggYWRkaXRpb25hbCBmaWVsZHNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHByZXByb2Nlc3NCdWZmZXJWaWV3cyhidWZmZXJWaWV3SGVhZGVycywgYnVmZmVySGVhZGVycykge1xuICBidWZmZXJWaWV3SGVhZGVycyA9IGRlZmluZWQoYnVmZmVyVmlld0hlYWRlcnMpID8gYnVmZmVyVmlld0hlYWRlcnMgOiBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXJWaWV3SGVhZGVycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBidWZmZXJWaWV3SGVhZGVyID0gYnVmZmVyVmlld0hlYWRlcnNbaV07XG4gICAgdmFyIGJ1ZmZlckhlYWRlciA9IGJ1ZmZlckhlYWRlcnNbYnVmZmVyVmlld0hlYWRlci5idWZmZXJdO1xuICAgIGJ1ZmZlclZpZXdIZWFkZXIuYnVmZmVySGVhZGVyID0gYnVmZmVySGVhZGVyO1xuICAgIGJ1ZmZlclZpZXdIZWFkZXIuaXNBY3RpdmUgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gYnVmZmVyVmlld0hlYWRlcnM7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHdoaWNoIGJ1ZmZlciB2aWV3cyBuZWVkIHRvIGJlIGxvYWRlZCBpbnRvIG1lbW9yeS4gVGhpcyBpbmNsdWRlczpcbiAqXG4gKiA8dWw+XG4gKiA8bGk+VGhlIHRpbGUgYXZhaWxhYmlsaXR5IGJpdHN0cmVhbSAoaWYgYSBidWZmZXJWaWV3IGlzIGRlZmluZWQpPC9saT5cbiAqIDxsaT5UaGUgY29udGVudCBhdmFpbGFiaWxpdHkgYml0c3RyZWFtKHMpIChpZiBhIGJ1ZmZlclZpZXcgaXMgZGVmaW5lZCk8L2xpPlxuICogPGxpPlRoZSBjaGlsZCBzdWJ0cmVlIGF2YWlsYWJpbGl0eSBiaXRzdHJlYW0gKGlmIGEgYnVmZmVyVmlldyBpcyBkZWZpbmVkKTwvbGk+XG4gKiA8L3VsPlxuICpcbiAqIDxwPlxuICogVGhpcyBmdW5jdGlvbiBtb2RpZmllcyB0aGUgYnVmZmVyIHZpZXcgaGVhZGVycycgaXNBY3RpdmUgZmxhZ3MgaW4gcGxhY2UuXG4gKiA8L3A+XG4gKlxuICogQHBhcmFtIHtPYmplY3RbXX0gc3VidHJlZUpzb24gVGhlIEpTT04gY2h1bmsgZnJvbSB0aGUgc3VidHJlZVxuICogQHBhcmFtIHtCdWZmZXJWaWV3SGVhZGVyW119IGJ1ZmZlclZpZXdIZWFkZXJzIFRoZSBwcmVwcm9jZXNzZWQgYnVmZmVyIHZpZXcgaGVhZGVyc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbWFya0FjdGl2ZUJ1ZmZlclZpZXdzKHN1YnRyZWVKc29uLCBidWZmZXJWaWV3SGVhZGVycykge1xuICB2YXIgaGVhZGVyO1xuICB2YXIgdGlsZUF2YWlsYWJpbGl0eUhlYWRlciA9IHN1YnRyZWVKc29uLnRpbGVBdmFpbGFiaWxpdHk7XG4gIGlmIChkZWZpbmVkKHRpbGVBdmFpbGFiaWxpdHlIZWFkZXIuYnVmZmVyVmlldykpIHtcbiAgICBoZWFkZXIgPSBidWZmZXJWaWV3SGVhZGVyc1t0aWxlQXZhaWxhYmlsaXR5SGVhZGVyLmJ1ZmZlclZpZXddO1xuICAgIGhlYWRlci5pc0FjdGl2ZSA9IHRydWU7XG4gICAgaGVhZGVyLmJ1ZmZlckhlYWRlci5pc0FjdGl2ZSA9IHRydWU7XG4gIH1cblxuICB2YXIgY29udGVudEF2YWlsYWJpbGl0eUhlYWRlcnMgPSBzdWJ0cmVlSnNvbi5jb250ZW50QXZhaWxhYmlsaXR5SGVhZGVycztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb250ZW50QXZhaWxhYmlsaXR5SGVhZGVycy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChkZWZpbmVkKGNvbnRlbnRBdmFpbGFiaWxpdHlIZWFkZXJzW2ldLmJ1ZmZlclZpZXcpKSB7XG4gICAgICBoZWFkZXIgPSBidWZmZXJWaWV3SGVhZGVyc1tjb250ZW50QXZhaWxhYmlsaXR5SGVhZGVyc1tpXS5idWZmZXJWaWV3XTtcbiAgICAgIGhlYWRlci5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICBoZWFkZXIuYnVmZmVySGVhZGVyLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2hpbGRTdWJ0cmVlQXZhaWxhYmlsaXR5SGVhZGVyID0gc3VidHJlZUpzb24uY2hpbGRTdWJ0cmVlQXZhaWxhYmlsaXR5O1xuICBpZiAoZGVmaW5lZChjaGlsZFN1YnRyZWVBdmFpbGFiaWxpdHlIZWFkZXIuYnVmZmVyVmlldykpIHtcbiAgICBoZWFkZXIgPSBidWZmZXJWaWV3SGVhZGVyc1tjaGlsZFN1YnRyZWVBdmFpbGFiaWxpdHlIZWFkZXIuYnVmZmVyVmlld107XG4gICAgaGVhZGVyLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICBoZWFkZXIuYnVmZmVySGVhZGVyLmlzQWN0aXZlID0gdHJ1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEZvciA8Y29kZT4zRFRJTEVTX21ldGFkYXRhPC9jb2RlPiwgbG9vayBvdmVyIHRoZSB0aWxlIG1ldGFkYXRhIGJ1ZmZlcnNcbiAqIDxwPlxuICogVGhpcyBhbHdheXMgbG9hZHMgYWxsIG9mIHRoZSBtZXRhZGF0YSBpbW1lZGlhdGVseS4gRnV0dXJlIGl0ZXJhdGlvbnMgbWF5XG4gKiBhbGxvdyBmaWx0ZXJpbmcgdGhpcyB0byBhdm9pZCBkb3dubG9hZGluZyB1bm5lZWRlZCBidWZmZXJzLlxuICogPC9wPlxuICogQHBhcmFtIHtPYmplY3R9IG1ldGFkYXRhRXh0ZW5zaW9uIFRoZSAzRFRJTEVTX21ldGFkYXRhIGV4dGVuc2lvblxuICogQHBhcmFtIHtCdWZmZXJWaWV3SGVhZGVyW119IGJ1ZmZlclZpZXdIZWFkZXJzIFRoZSBwcmVwcm9jZXNzZWQgYnVmZmVyIHZpZXcgaGVhZGVyc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbWFya0FjdGl2ZU1ldGFkYXRhQnVmZmVyVmlld3MobWV0YWRhdGFFeHRlbnNpb24sIGJ1ZmZlclZpZXdIZWFkZXJzKSB7XG4gIHZhciBwcm9wZXJ0aWVzID0gbWV0YWRhdGFFeHRlbnNpb24ucHJvcGVydGllcztcbiAgdmFyIGhlYWRlcjtcbiAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB2YXIgbWV0YWRhdGFIZWFkZXIgPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICBoZWFkZXIgPSBidWZmZXJWaWV3SGVhZGVyc1ttZXRhZGF0YUhlYWRlci5idWZmZXJWaWV3XTtcbiAgICAgIGhlYWRlci5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICBoZWFkZXIuYnVmZmVySGVhZGVyLmlzQWN0aXZlID0gdHJ1ZTtcblxuICAgICAgaWYgKGRlZmluZWQobWV0YWRhdGFIZWFkZXIuc3RyaW5nT2Zmc2V0QnVmZmVyVmlldykpIHtcbiAgICAgICAgaGVhZGVyID0gYnVmZmVyVmlld0hlYWRlcnNbbWV0YWRhdGFIZWFkZXIuc3RyaW5nT2Zmc2V0QnVmZmVyVmlld107XG4gICAgICAgIGhlYWRlci5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIGhlYWRlci5idWZmZXJIZWFkZXIuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVmaW5lZChtZXRhZGF0YUhlYWRlci5hcnJheU9mZnNldEJ1ZmZlclZpZXcpKSB7XG4gICAgICAgIGhlYWRlciA9IGJ1ZmZlclZpZXdIZWFkZXJzW21ldGFkYXRhSGVhZGVyLmFycmF5T2Zmc2V0QnVmZmVyVmlld107XG4gICAgICAgIGhlYWRlci5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIGhlYWRlci5idWZmZXJIZWFkZXIuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdvIHRocm91Z2ggdGhlIGxpc3Qgb2YgYnVmZmVycyBhbmQgZ2F0aGVyIGFsbCB0aGUgYWN0aXZlIG9uZXMgaW50byBhXG4gKiBhIGRpY3Rpb25hcnkuIFNpbmNlIGV4dGVybmFsIGJ1ZmZlcnMgYXJlIGFsbG93ZWQsIHRoaXMgc29tZXRpbWVzIGludm9sdmVzXG4gKiBmZXRjaGluZyBzZXBhcmF0ZSBiaW5hcnkgZmlsZXMuIENvbnNlcXVlbnRseSwgdGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UuXG4gKiA8cD5cbiAqIFRoZSByZXN1bHRzIGFyZSBwdXQgaW50byBhIGRpY3Rpb25hcnkgb2JqZWN0LiBUaGUga2V5cyBhcmUgaW5kaWNlcyBvZlxuICogYnVmZmVycywgYW5kIHRoZSB2YWx1ZXMgYXJlIFVpbnQ4QXJyYXlzIG9mIHRoZSBjb250ZW50cy4gT25seSBidWZmZXJzXG4gKiBtYXJrZWQgd2l0aCB0aGUgaXNBY3RpdmUgZmxhZyBhcmUgZmV0Y2hlZC5cbiAqIDwvcD5cbiAqIDxwPlxuICogVGhlIGludGVybmFsIGJ1ZmZlciAodGhlIHN1YnRyZWUncyBiaW5hcnkgY2h1bmspIGlzIGFsc28gc3RvcmVkIGluIHRoaXNcbiAqIGRpY3Rpb25hcnkgaWYgaXQgaXMgbWFya2VkIGFjdGl2ZS5cbiAqIDwvcD5cbiAqIEBwYXJhbSB7SW1wbGljaXRTdWJ0cmVlfSBzdWJ0cmVlIFRoZSBzdWJ0cmVlXG4gKiBAcGFyYW0ge0J1ZmZlckhlYWRlcltdfSBidWZmZXJIZWFkZXJzIFRoZSBwcmVwcm9jZXNzZWQgYnVmZmVyIGhlYWRlcnNcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gaW50ZXJuYWxCdWZmZXIgVGhlIGJpbmFyeSBjaHVuayBvZiB0aGUgc3VidHJlZSBmaWxlXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBBIHByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSBkaWN0aW9uYXJ5IG9mIGFjdGl2ZSBidWZmZXJzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXF1ZXN0QWN0aXZlQnVmZmVycyhzdWJ0cmVlLCBidWZmZXJIZWFkZXJzLCBpbnRlcm5hbEJ1ZmZlcikge1xuICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXJIZWFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGJ1ZmZlckhlYWRlciA9IGJ1ZmZlckhlYWRlcnNbaV07XG4gICAgaWYgKCFidWZmZXJIZWFkZXIuaXNBY3RpdmUpIHtcbiAgICAgIHByb21pc2VzLnB1c2god2hlbi5yZXNvbHZlKHVuZGVmaW5lZCkpO1xuICAgIH0gZWxzZSBpZiAoYnVmZmVySGVhZGVyLmlzRXh0ZXJuYWwpIHtcbiAgICAgIHZhciBwcm9taXNlID0gcmVxdWVzdEV4dGVybmFsQnVmZmVyKHN1YnRyZWUsIGJ1ZmZlckhlYWRlcik7XG4gICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9taXNlcy5wdXNoKHdoZW4ucmVzb2x2ZShpbnRlcm5hbEJ1ZmZlcikpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gd2hlbi5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKGJ1ZmZlclJlc3VsdHMpIHtcbiAgICB2YXIgYnVmZmVyc1U4ID0ge307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXJSZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gYnVmZmVyUmVzdWx0c1tpXTtcbiAgICAgIGlmIChkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICAgICAgYnVmZmVyc1U4W2ldID0gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyc1U4O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVxdWVzdEV4dGVybmFsQnVmZmVyKHN1YnRyZWUsIGJ1ZmZlckhlYWRlcikge1xuICB2YXIgYmFzZVJlc291cmNlID0gc3VidHJlZS5fcmVzb3VyY2U7XG4gIHZhciBidWZmZXJSZXNvdXJjZSA9IGJhc2VSZXNvdXJjZS5nZXREZXJpdmVkUmVzb3VyY2Uoe1xuICAgIHVybDogYnVmZmVySGVhZGVyLnVyaSxcbiAgfSk7XG5cbiAgdmFyIGJ1ZmZlckxvYWRlciA9IFJlc291cmNlQ2FjaGUubG9hZEV4dGVybmFsQnVmZmVyKHtcbiAgICByZXNvdXJjZTogYnVmZmVyUmVzb3VyY2UsXG4gIH0pO1xuICBzdWJ0cmVlLl9idWZmZXJMb2FkZXIgPSBidWZmZXJMb2FkZXI7XG5cbiAgcmV0dXJuIGJ1ZmZlckxvYWRlci5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKGJ1ZmZlckxvYWRlcikge1xuICAgIHJldHVybiBidWZmZXJMb2FkZXIudHlwZWRBcnJheTtcbiAgfSk7XG59XG5cbi8qKlxuICogR28gdGhyb3VnaCB0aGUgbGlzdCBvZiBidWZmZXIgdmlld3MsIGFuZCBpZiB0aGV5IGFyZSBtYXJrZWQgYXMgYWN0aXZlLFxuICogZXh0cmFjdCBhIHN1YmFycmF5IGZyb20gb25lIG9mIHRoZSBhY3RpdmUgYnVmZmVycy5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlclZpZXdIZWFkZXJbXX0gYnVmZmVyVmlld0hlYWRlcnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBidWZmZXJzVTggQSBkaWN0aW9uYXJ5IG9mIGJ1ZmZlciBpbmRleCB0byBhIFVpbnQ4QXJyYXkgb2YgaXRzIGNvbnRlbnRzLlxuICogQHJldHVybnMge09iamVjdH0gQSBkaWN0aW9uYXJ5IG9mIGJ1ZmZlciB2aWV3IGluZGV4IHRvIGEgVWludDhBcnJheSBvZiBpdHMgY29udGVudHMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwYXJzZUFjdGl2ZUJ1ZmZlclZpZXdzKGJ1ZmZlclZpZXdIZWFkZXJzLCBidWZmZXJzVTgpIHtcbiAgdmFyIGJ1ZmZlclZpZXdzVTggPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXJWaWV3SGVhZGVycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBidWZmZXJWaWV3SGVhZGVyID0gYnVmZmVyVmlld0hlYWRlcnNbaV07XG5cbiAgICBpZiAoIWJ1ZmZlclZpZXdIZWFkZXIuaXNBY3RpdmUpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBzdGFydCA9IGJ1ZmZlclZpZXdIZWFkZXIuYnl0ZU9mZnNldDtcbiAgICB2YXIgZW5kID0gc3RhcnQgKyBidWZmZXJWaWV3SGVhZGVyLmJ5dGVMZW5ndGg7XG4gICAgdmFyIGJ1ZmZlciA9IGJ1ZmZlcnNVOFtidWZmZXJWaWV3SGVhZGVyLmJ1ZmZlcl07XG4gICAgdmFyIGJ1ZmZlclZpZXcgPSBidWZmZXIuc3ViYXJyYXkoc3RhcnQsIGVuZCk7XG4gICAgYnVmZmVyVmlld3NVOFtpXSA9IGJ1ZmZlclZpZXc7XG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclZpZXdzVTg7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIHRocmVlIGF2YWlsYWJpbGl0eSBiaXRzdHJlYW1zIGFuZCBzdG9yZSB0aGVtIGluIHRoZSBzdWJ0cmVlXG4gKlxuICogQHBhcmFtIHtJbXBsaWNpdFN1YnRyZWV9IHN1YnRyZWUgVGhlIHN1YnRyZWUgdG8gbW9kaWZ5XG4gKiBAcGFyYW0ge09iamVjdH0gc3VidHJlZUpzb24gVGhlIHN1YnRyZWUgSlNPTlxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVzZXR9IGltcGxpY2l0VGlsZXNldCBUaGUgaW1wbGljaXQgdGlsZXNldCB0aGlzIHN1YnRyZWUgYmVsb25ncyB0b1xuICogQHBhcmFtIHtPYmplY3R9IGJ1ZmZlclZpZXdzVTggQSBkaWN0aW9uYXJ5IG9mIGJ1ZmZlciB2aWV3IGluZGV4IHRvIGEgVWludDhBcnJheSBvZiBpdHMgY29udGVudHMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwYXJzZUF2YWlsYWJpbGl0eShcbiAgc3VidHJlZSxcbiAgc3VidHJlZUpzb24sXG4gIGltcGxpY2l0VGlsZXNldCxcbiAgYnVmZmVyVmlld3NVOFxuKSB7XG4gIHZhciBicmFuY2hpbmdGYWN0b3IgPSBpbXBsaWNpdFRpbGVzZXQuYnJhbmNoaW5nRmFjdG9yO1xuICB2YXIgc3VidHJlZUxldmVscyA9IGltcGxpY2l0VGlsZXNldC5zdWJ0cmVlTGV2ZWxzO1xuICB2YXIgdGlsZUF2YWlsYWJpbGl0eUJpdHMgPVxuICAgIChNYXRoLnBvdyhicmFuY2hpbmdGYWN0b3IsIHN1YnRyZWVMZXZlbHMpIC0gMSkgLyAoYnJhbmNoaW5nRmFjdG9yIC0gMSk7XG4gIHZhciBjaGlsZFN1YnRyZWVCaXRzID0gTWF0aC5wb3coYnJhbmNoaW5nRmFjdG9yLCBzdWJ0cmVlTGV2ZWxzKTtcblxuICAvLyBhdmFpbGFibGVDb3VudCBpcyBvbmx5IG5lZWRlZCBmb3IgdGhlIG1ldGFkYXRhIGp1bXAgYnVmZmVyLCB3aGljaFxuICAvLyBjb3JyZXNwb25kcyB0byB0aGUgdGlsZSBhdmFpbGFiaWxpdHkgYml0c3RyZWFtLlxuICB2YXIgY29tcHV0ZUF2YWlsYWJsZUNvdW50RW5hYmxlZCA9IGhhc0V4dGVuc2lvbihcbiAgICBzdWJ0cmVlSnNvbixcbiAgICBcIjNEVElMRVNfbWV0YWRhdGFcIlxuICApO1xuICBzdWJ0cmVlLl90aWxlQXZhaWxhYmlsaXR5ID0gcGFyc2VBdmFpbGFiaWxpdHlCaXRzdHJlYW0oXG4gICAgc3VidHJlZUpzb24udGlsZUF2YWlsYWJpbGl0eSxcbiAgICBidWZmZXJWaWV3c1U4LFxuICAgIHRpbGVBdmFpbGFiaWxpdHlCaXRzLFxuICAgIGNvbXB1dGVBdmFpbGFibGVDb3VudEVuYWJsZWRcbiAgKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnRyZWVKc29uLmNvbnRlbnRBdmFpbGFiaWxpdHlIZWFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGJpdHN0cmVhbSA9IHBhcnNlQXZhaWxhYmlsaXR5Qml0c3RyZWFtKFxuICAgICAgc3VidHJlZUpzb24uY29udGVudEF2YWlsYWJpbGl0eUhlYWRlcnNbaV0sXG4gICAgICBidWZmZXJWaWV3c1U4LFxuICAgICAgLy8gY29udGVudCBhdmFpbGFiaWxpdHkgaGFzIHRoZSBzYW1lIGxlbmd0aCBhcyB0aWxlIGF2YWlsYWJpbGl0eS5cbiAgICAgIHRpbGVBdmFpbGFiaWxpdHlCaXRzXG4gICAgKTtcbiAgICBzdWJ0cmVlLl9jb250ZW50QXZhaWxhYmlsaXR5Qml0c3RyZWFtcy5wdXNoKGJpdHN0cmVhbSk7XG4gIH1cblxuICBzdWJ0cmVlLl9jaGlsZFN1YnRyZWVBdmFpbGFiaWxpdHkgPSBwYXJzZUF2YWlsYWJpbGl0eUJpdHN0cmVhbShcbiAgICBzdWJ0cmVlSnNvbi5jaGlsZFN1YnRyZWVBdmFpbGFiaWxpdHksXG4gICAgYnVmZmVyVmlld3NVOCxcbiAgICBjaGlsZFN1YnRyZWVCaXRzXG4gICk7XG59XG5cbi8qKlxuICogR2l2ZW4gdGhlIEpTT04gZGVzY3JpYmluZyBhbiBhdmFpbGFiaWxpdHkgYml0c3RyZWFtLCB0dXJuIGl0IGludG8gYW5cbiAqIGluLW1lbW9yeSByZXByZXNlbnRhdGlvbiB1c2luZyBhbiB7QGxpbmsgSW1wbGljaXRBdmFpbGFiaWxpdHlCaXRzdHJlYW19XG4gKiBvYmplY3QuIFRoaXMgaGFuZGxlcyBib3RoIGNvbnN0YW50cyBhbmQgYml0c3RyZWFtcyBmcm9tIGEgYnVmZmVyVmlldy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYXZhaWxhYmlsaXR5SnNvbiBBIEpTT04gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgYXZhaWxhYmlsaXR5XG4gKiBAcGFyYW0ge09iamVjdH0gYnVmZmVyVmlld3NVOCBBIGRpY3Rpb25hcnkgb2YgYnVmZmVyVmlldyBpbmRleCB0byBpdHMgVWludDhBcnJheSBjb250ZW50cy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGhCaXRzIFRoZSBsZW5ndGggb2YgdGhlIGF2YWlsYWJpbGl0eSBiaXRzdHJlYW0gaW4gYml0c1xuICogQHBhcmFtIHtCb29sZWFufSBbY29tcHV0ZUF2YWlsYWJsZUNvdW50RW5hYmxlZF0gSWYgdHJ1ZSBhbmQgYXZhaWxhYmlsaXR5SnNvbi5hdmFpbGFibGVDb3VudCBpcyB1bmRlZmluZWQsIHRoZSBhdmFpbGFibGVDb3VudCB3aWxsIGJlIGNvbXB1dGVkLlxuICogQHJldHVybnMge0ltcGxpY2l0QXZhaWxhYmlsaXR5Qml0c3RyZWFtfSBUaGUgcGFyc2VkIGJpdHN0cmVhbSBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQXZhaWxhYmlsaXR5Qml0c3RyZWFtKFxuICBhdmFpbGFiaWxpdHlKc29uLFxuICBidWZmZXJWaWV3c1U4LFxuICBsZW5ndGhCaXRzLFxuICBjb21wdXRlQXZhaWxhYmxlQ291bnRFbmFibGVkXG4pIHtcbiAgaWYgKGRlZmluZWQoYXZhaWxhYmlsaXR5SnNvbi5jb25zdGFudCkpIHtcbiAgICByZXR1cm4gbmV3IEltcGxpY2l0QXZhaWxhYmlsaXR5Qml0c3RyZWFtKHtcbiAgICAgIGNvbnN0YW50OiBCb29sZWFuKGF2YWlsYWJpbGl0eUpzb24uY29uc3RhbnQpLFxuICAgICAgbGVuZ3RoQml0czogbGVuZ3RoQml0cyxcbiAgICAgIGF2YWlsYWJsZUNvdW50OiBhdmFpbGFiaWxpdHlKc29uLmF2YWlsYWJsZUNvdW50LFxuICAgIH0pO1xuICB9XG5cbiAgdmFyIGJ1ZmZlclZpZXcgPSBidWZmZXJWaWV3c1U4W2F2YWlsYWJpbGl0eUpzb24uYnVmZmVyVmlld107XG5cbiAgcmV0dXJuIG5ldyBJbXBsaWNpdEF2YWlsYWJpbGl0eUJpdHN0cmVhbSh7XG4gICAgYml0c3RyZWFtOiBidWZmZXJWaWV3LFxuICAgIGxlbmd0aEJpdHM6IGxlbmd0aEJpdHMsXG4gICAgYXZhaWxhYmxlQ291bnQ6IGF2YWlsYWJpbGl0eUpzb24uYXZhaWxhYmxlQ291bnQsXG4gICAgY29tcHV0ZUF2YWlsYWJsZUNvdW50RW5hYmxlZDogY29tcHV0ZUF2YWlsYWJsZUNvdW50RW5hYmxlZCxcbiAgfSk7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIDNEVElMRVNfbWV0YWRhdGEgdGFibGUsIHN0b3JpbmcgYSB7QGxpbmsgTWV0YWRhdGFUYWJsZX0gaW4gdGhlXG4gKiBzdWJ0cmVlLlxuICpcbiAqIEBwYXJhbSB7SW1wbGljaXRTdWJ0cmVlfSBzdWJ0cmVlIFRoZSBzdWJ0cmVlXG4gKiBAcGFyYW0ge0ltcGxpY2l0VGlsZXNldH0gaW1wbGljaXRUaWxlc2V0IFRoZSBpbXBsaWNpdCB0aWxlc2V0IHRoaXMgc3VidHJlZSBiZWxvbmdzIHRvLlxuICogQHBhcmFtIHtPYmplY3R9IGJ1ZmZlclZpZXdzVTggQSBkaWN0aW9uYXJ5IG9mIGJ1ZmZlclZpZXcgaW5kZXggdG8gaXRzIFVpbnQ4QXJyYXkgY29udGVudHMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwYXJzZU1ldGFkYXRhVGFibGUoc3VidHJlZSwgaW1wbGljaXRUaWxlc2V0LCBidWZmZXJWaWV3c1U4KSB7XG4gIHZhciBtZXRhZGF0YUV4dGVuc2lvbiA9IHN1YnRyZWUuX21ldGFkYXRhRXh0ZW5zaW9uO1xuICB2YXIgdGlsZUNvdW50ID0gc3VidHJlZS5fdGlsZUF2YWlsYWJpbGl0eS5hdmFpbGFibGVDb3VudDtcbiAgdmFyIG1ldGFkYXRhQ2xhc3NOYW1lID0gbWV0YWRhdGFFeHRlbnNpb24uY2xhc3M7XG4gIHZhciBtZXRhZGF0YVNjaGVtYSA9IGltcGxpY2l0VGlsZXNldC5tZXRhZGF0YVNjaGVtYTtcbiAgdmFyIG1ldGFkYXRhQ2xhc3MgPSBtZXRhZGF0YVNjaGVtYS5jbGFzc2VzW21ldGFkYXRhQ2xhc3NOYW1lXTtcblxuICBzdWJ0cmVlLl9tZXRhZGF0YVRhYmxlID0gbmV3IE1ldGFkYXRhVGFibGUoe1xuICAgIGNsYXNzOiBtZXRhZGF0YUNsYXNzLFxuICAgIGNvdW50OiB0aWxlQ291bnQsXG4gICAgcHJvcGVydGllczogbWV0YWRhdGFFeHRlbnNpb24ucHJvcGVydGllcyxcbiAgICBidWZmZXJWaWV3czogYnVmZmVyVmlld3NVOCxcbiAgfSk7XG59XG5cbi8qKlxuICogTWFrZSBhIGp1bXAgYnVmZmVyLCBpLmUuIGEgbWFwIG9mIHRpbGUgYml0IGluZGV4IHRvIHRoZSBtZXRhZGF0YSBlbnRpdHkgSUQuXG4gKiBUaGlzIGlzIHN0b3JlZCBpbiB0aGUgc3VidHJlZS5cbiAqIDxwPlxuICogRm9yIHVuYXZhaWxhYmxlIHRpbGVzLCB0aGUganVtcCBidWZmZXIgZW50cnkgd2lsbCBiZSB1bmluaXRpYWxpemVkLiBVc2VcbiAqIHRoZSB0aWxlIGF2YWlsYWJpbGl0eSB0byBkZXRlcm1pbmUgd2hldGhlciBhIGp1bXAgYnVmZmVyIHZhbHVlIGlzIHZhbGlkLlxuICogPC9wPlxuICpcbiAqIEBwYXJhbSB7SW1wbGljaXRTdWJ0cmVlfSBzdWJ0cmVlIFRoZSBzdWJ0cmVlXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBtYWtlSnVtcEJ1ZmZlcihzdWJ0cmVlKSB7XG4gIHZhciB0aWxlQXZhaWxhYmlsaXR5ID0gc3VidHJlZS5fdGlsZUF2YWlsYWJpbGl0eTtcbiAgdmFyIGVudGl0eUlkID0gMDtcbiAgdmFyIGJ1ZmZlckxlbmd0aCA9IHRpbGVBdmFpbGFiaWxpdHkubGVuZ3RoQml0cztcbiAgdmFyIGF2YWlsYWJsZUNvdW50ID0gdGlsZUF2YWlsYWJpbGl0eS5hdmFpbGFibGVDb3VudDtcblxuICB2YXIganVtcEJ1ZmZlcjtcbiAgaWYgKGF2YWlsYWJsZUNvdW50IDwgMjU2KSB7XG4gICAganVtcEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlckxlbmd0aCk7XG4gIH0gZWxzZSBpZiAoYXZhaWxhYmxlQ291bnQgPCA2NTUzNikge1xuICAgIGp1bXBCdWZmZXIgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyTGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICBqdW1wQnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlckxlbmd0aCk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGVBdmFpbGFiaWxpdHkubGVuZ3RoQml0czsgaSsrKSB7XG4gICAgaWYgKHRpbGVBdmFpbGFiaWxpdHkuZ2V0Qml0KGkpKSB7XG4gICAgICBqdW1wQnVmZmVyW2ldID0gZW50aXR5SWQ7XG4gICAgICBlbnRpdHlJZCsrO1xuICAgIH1cbiAgfVxuICBzdWJ0cmVlLl9qdW1wQnVmZmVyID0ganVtcEJ1ZmZlcjtcbn1cblxuLyoqXG4gKiBHaXZlbiB0aGUgaW1wbGljaXQgdGlsaW5nIGNvb3JkaW5hdGVzIGZvciBhIHRpbGUsIGdldCB0aGUgaW5kZXggd2l0aGluIHRoZVxuICogc3VidHJlZSdzIHRpbGUgYXZhaWxhYmlsaXR5IGJpdHN0cmVhbS5cbiAqIEBwcm9wZXJ0eSB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IGltcGxpY2l0Q29vcmRpbmF0ZXMgVGhlIGdsb2JhbCBjb29yZGluYXRlcyBvZiBhIHRpbGVcbiAqIEByZXR1cm4ge051bWJlcn0gVGhlIHRpbGUncyBpbmRleCB3aXRoaW4gdGhlIHN1YnRyZWUuXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFN1YnRyZWUucHJvdG90eXBlLmdldFRpbGVJbmRleCA9IGZ1bmN0aW9uIChpbXBsaWNpdENvb3JkaW5hdGVzKSB7XG4gIHZhciBsb2NhbExldmVsID0gaW1wbGljaXRDb29yZGluYXRlcy5sZXZlbCAtIHRoaXMuX2ltcGxpY2l0Q29vcmRpbmF0ZXMubGV2ZWw7XG4gIGlmIChsb2NhbExldmVsIDwgMCB8fCB0aGlzLl9zdWJ0cmVlTGV2ZWxzIDw9IGxvY2FsTGV2ZWwpIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFwibGV2ZWwgaXMgb3V0IG9mIGJvdW5kcyBmb3IgdGhpcyBzdWJ0cmVlXCIpO1xuICB9XG5cbiAgdmFyIHN1YnRyZWVDb29yZGluYXRlcyA9IGltcGxpY2l0Q29vcmRpbmF0ZXMuZ2V0U3VidHJlZUNvb3JkaW5hdGVzKCk7XG4gIHZhciBvZmZzZXRDb29yZGluYXRlcyA9IHN1YnRyZWVDb29yZGluYXRlcy5nZXRPZmZzZXRDb29yZGluYXRlcyhcbiAgICBpbXBsaWNpdENvb3JkaW5hdGVzXG4gICk7XG4gIHZhciBpbmRleCA9IG9mZnNldENvb3JkaW5hdGVzLnRpbGVJbmRleDtcbiAgcmV0dXJuIGluZGV4O1xufTtcblxuLyoqXG4gKiBHaXZlbiB0aGUgaW1wbGljaXQgdGlsaW5nIGNvb3JkaW5hdGVzIGZvciBhIGNoaWxkIHN1YnRyZWUsIGdldCB0aGUgaW5kZXggd2l0aGluIHRoZVxuICogc3VidHJlZSdzIGNoaWxkIHN1YnRyZWUgYXZhaWxhYmlsaXR5IGJpdHN0cmVhbS5cbiAqIEBwcm9wZXJ0eSB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IGltcGxpY2l0Q29vcmRpbmF0ZXMgVGhlIGdsb2JhbCBjb29yZGluYXRlcyBvZiBhIGNoaWxkIHN1YnRyZWVcbiAqIEByZXR1cm4ge051bWJlcn0gVGhlIGNoaWxkIHN1YnRyZWUncyBpbmRleCB3aXRoaW4gdGhlIHN1YnRyZWUncyBjaGlsZCBzdWJ0cmVlIGF2YWlsYWJpbGl0eSBiaXRzdHJlYW0uXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFN1YnRyZWUucHJvdG90eXBlLmdldENoaWxkU3VidHJlZUluZGV4ID0gZnVuY3Rpb24gKFxuICBpbXBsaWNpdENvb3JkaW5hdGVzXG4pIHtcbiAgdmFyIGxvY2FsTGV2ZWwgPSBpbXBsaWNpdENvb3JkaW5hdGVzLmxldmVsIC0gdGhpcy5faW1wbGljaXRDb29yZGluYXRlcy5sZXZlbDtcbiAgaWYgKGxvY2FsTGV2ZWwgIT09IHRoaXMuX2ltcGxpY2l0Q29vcmRpbmF0ZXMuc3VidHJlZUxldmVscykge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJsZXZlbCBpcyBvdXQgb2YgYm91bmRzIGZvciB0aGlzIHN1YnRyZWVcIik7XG4gIH1cblxuICAvLyBDYWxsIGdldFBhcmVudFN1YnRyZWVDb29yZGluYXRlcyBpbnN0ZWFkIG9mIGdldFN1YnRyZWVDb29yZGluYXRlcyBiZWNhdXNlIHRoZVxuICAvLyBjaGlsZCBzdWJ0cmVlIGlzIGJ5IGRlZmluaXRpb24gdGhlIHJvb3Qgb2YgaXRzIG93biBzdWJ0cmVlLCBzbyB3ZSBuZWVkIHRvIGZpbmRcbiAgLy8gdGhlIHBhcmVudCBzdWJ0cmVlLlxuICB2YXIgcGFyZW50U3VidHJlZUNvb3JkaW5hdGVzID0gaW1wbGljaXRDb29yZGluYXRlcy5nZXRQYXJlbnRTdWJ0cmVlQ29vcmRpbmF0ZXMoKTtcbiAgdmFyIG9mZnNldENvb3JkaW5hdGVzID0gcGFyZW50U3VidHJlZUNvb3JkaW5hdGVzLmdldE9mZnNldENvb3JkaW5hdGVzKFxuICAgIGltcGxpY2l0Q29vcmRpbmF0ZXNcbiAgKTtcbiAgdmFyIGluZGV4ID0gb2Zmc2V0Q29vcmRpbmF0ZXMubW9ydG9uSW5kZXg7XG4gIHJldHVybiBpbmRleDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBlbnRpdHkgSUQgZm9yIGEgdGlsZSB3aXRoaW4gdGhpcyBzdWJ0cmVlLlxuICogQHByb3BlcnR5IHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gaW1wbGljaXRDb29yZGluYXRlcyBUaGUgZ2xvYmFsIGNvb3JkaW5hdGVzIG9mIGEgdGlsZVxuICogQHJldHVybiB7TnVtYmVyfSBUaGUgZW50aXR5IElEIGZvciB0aGlzIHRpbGUgZm9yIGFjY2Vzc2luZyB0aWxlIG1ldGFkYXRhLCBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIG5vdCBhcHBsaWNhYmxlLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0U3VidHJlZS5wcm90b3R5cGUuZ2V0RW50aXR5SWQgPSBmdW5jdGlvbiAoaW1wbGljaXRDb29yZGluYXRlcykge1xuICBpZiAoIWRlZmluZWQodGhpcy5fbWV0YWRhdGFUYWJsZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIHRpbGVJbmRleCA9IHRoaXMuZ2V0VGlsZUluZGV4KGltcGxpY2l0Q29vcmRpbmF0ZXMpO1xuICBpZiAodGhpcy5fdGlsZUF2YWlsYWJpbGl0eS5nZXRCaXQodGlsZUluZGV4KSkge1xuICAgIHJldHVybiB0aGlzLl9qdW1wQnVmZmVyW3RpbGVJbmRleF07XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFN1YnRyZWUucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0U3VidHJlZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRlZmluZWQodGhpcy5fYnVmZmVyTG9hZGVyKSkge1xuICAgIFJlc291cmNlQ2FjaGUudW5sb2FkKHRoaXMuX2J1ZmZlckxvYWRlcik7XG4gIH1cblxuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///61800\n')},75692:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ImplicitTileCoordinates; }\n/* harmony export */ });\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_MortonOrder_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(79585);\n/* harmony import */ var _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(10149);\n\n\n\n\n\n\n/**\n * The coordinates for a tile in an implicit tileset. The coordinates\n * are (level, x, y) for quadtrees or (level, x, y, z) for octrees.\n * <p>\n * Level numbers are 0-indexed and typically start at the root of the implicit\n * tileset (the tile with the <code>3DTILES_implicit_tiling</code> extension).\n * This object can also represent the relative offset from one set of coordinates\n * to another. See {@link ImplicitTileCoordinates#getOffsetCoordinates}. The term\n * local coordinates refers to coordinates that are relative to the root of a\n * subtree and the term global coordinates refers to coordinates relative to the\n * root of an implicit tileset.\n * </p>\n * <p>\n * For box bounding volumes, x, y, z increase along the +x, +y, and +z\n * directions defined by the half axes.\n * </p>\n * <p>\n * For region bounding volumes, x increases in the +longitude direction, y\n * increases in the +latitude direction, and z increases in the +height\n * direction.\n * </p>\n * <p>\n * Care must be taken when converting between implicit coordinates and Morton\n * indices because there is a 16-bit limit on {@link MortonOrder#encode2D} and\n * a 10-bit limit on {@link MortonOrder#encode3D}. Typically these conversions\n * should be done on local coordinates, not global coordinates, and the maximum\n * number of levels in the subtree should be 15 for quadtree and 9 for octree (to\n * account for the extra level needed by child subtree coordinates).\n * </p>\n *\n * @alias ImplicitTileCoordinates\n * @constructor\n *\n * @param {Object} options An object with the following properties:\n * @param {ImplicitSubdivisionScheme} options.subdivisionScheme Whether the coordinates are for a quadtree or octree\n * @param {Number} options.subtreeLevels The number of distinct levels within the coordinate\'s subtree\n * @param {Number} options.level The level of a tile relative to the tile with the extension\n * @param {Number} options.x The x coordinate of the tile\n * @param {Number} options.y The y coordinate of the tile\n * @param {Number} [options.z] The z coordinate of the tile. Only required when options.subdivisionScheme is ImplicitSubdivisionScheme.OCTREE\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction ImplicitTileCoordinates(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.string */ .Z.typeOf.string("options.subdivisionScheme", options.subdivisionScheme);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("options.subtreeLevels", options.subtreeLevels);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("options.level", options.level);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("options.x", options.x);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("options.y", options.y);\n  if (options.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("options.z", options.z);\n  }\n  // Check for values that are negative\n  if (options.level < 0) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("level must be non-negative");\n  }\n  if (options.x < 0) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("x must be non-negative");\n  }\n  if (options.y < 0) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("y must be non-negative");\n  }\n  if (options.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    if (options.z < 0) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("z must be non-negative");\n    }\n  }\n\n  // Check for values that are too large\n  var dimensionAtLevel = 1 << options.level;\n  if (options.x >= dimensionAtLevel) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("x is out of range");\n  }\n  if (options.y >= dimensionAtLevel) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("y is out of range");\n  }\n  if (options.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    if (options.z >= dimensionAtLevel) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("z is out of range");\n    }\n  }\n  //>>includeEnd(\'debug\');\n\n  /**\n   * Whether the tileset is a quadtree or octree\n   *\n   * @type {ImplicitSubdivisionScheme}\n   * @readonly\n   * @private\n   */\n  this.subdivisionScheme = options.subdivisionScheme;\n\n  /**\n   * The number of distinct levels within the coordinate\'s subtree\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.subtreeLevels = options.subtreeLevels;\n\n  /**\n   * Level of this tile, relative to the tile with the\n   * <code>3DTILES_implicit_tiling</code> extension. Level numbers start at 0.\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.level = options.level;\n\n  /**\n   * X coordinate of this tile\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.x = options.x;\n\n  /**\n   * Y coordinate of this tile\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.y = options.y;\n\n  /**\n   * Z coordinate of this tile. Only defined for octrees.\n   *\n   * @type {Number|undefined}\n   * @readonly\n   * @private\n   */\n  this.z = undefined;\n  if (options.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    this.z = options.z;\n  }\n}\n\nObject.defineProperties(ImplicitTileCoordinates.prototype, {\n  /**\n   * An index in the range of [0, branchingFactor) that indicates\n   * which child of the parent cell these coordinates correspond to.\n   * This can be viewed as a morton index within the parent tile.\n   * <p>\n   * This is the last 3 bits of the morton index of the tile, but it can\n   * be computed more directly by concatenating the bits [z0] y0 x0\n   * </p>\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  childIndex: {\n    get: function () {\n      var childIndex = 0;\n      childIndex |= this.x & 1;\n      childIndex |= (this.y & 1) << 1;\n      if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n        childIndex |= (this.z & 1) << 2;\n      }\n\n      return childIndex;\n    },\n  },\n\n  /**\n   * Get the Morton index for this tile within the current level by interleaving\n   * the bits of the x, y and z coordinates.\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  mortonIndex: {\n    get: function () {\n      if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n        return _Core_MortonOrder_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].encode3D */ .Z.encode3D(this.x, this.y, this.z);\n      }\n      return _Core_MortonOrder_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].encode2D */ .Z.encode2D(this.x, this.y);\n    },\n  },\n\n  /**\n   * Get the tile index by adding the Morton index to the level offset\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  tileIndex: {\n    get: function () {\n      var levelOffset =\n        this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE\n          ? // (8^N - 1) / (8-1)\n            ((1 << (3 * this.level)) - 1) / 7\n          : // (4^N - 1) / (4-1)\n            ((1 << (2 * this.level)) - 1) / 3;\n\n      var mortonIndex = this.mortonIndex;\n      return levelOffset + mortonIndex;\n    },\n  },\n});\n\n/**\n * Check that the two coordinates are compatible\n * @param {ImplicitTileCoordinates} a\n * @param {ImplicitTileCoordinates} b\n * @private\n */\nfunction checkMatchingSubtreeShape(a, b) {\n  if (a.subdivisionScheme !== b.subdivisionScheme) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("coordinates must have same subdivisionScheme");\n  }\n  if (a.subtreeLevels !== b.subtreeLevels) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("coordinates must have same subtreeLevels");\n  }\n}\n\n/**\n * Compute the coordinates of a tile deeper in the tree with a (level, x, y, [z]) relative offset.\n *\n * @param {ImplicitTileCoordinates} offsetCoordinates The offset from the ancestor\n * @returns {ImplicitTileCoordinates} The coordinates of the descendant\n * @private\n */\nImplicitTileCoordinates.prototype.getDescendantCoordinates = function (\n  offsetCoordinates\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("offsetCoordinates", offsetCoordinates);\n  checkMatchingSubtreeShape(this, offsetCoordinates);\n  //>>includeEnd(\'debug\');\n\n  var descendantLevel = this.level + offsetCoordinates.level;\n  var descendantX = (this.x << offsetCoordinates.level) + offsetCoordinates.x;\n  var descendantY = (this.y << offsetCoordinates.level) + offsetCoordinates.y;\n\n  if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    var descendantZ = (this.z << offsetCoordinates.level) + offsetCoordinates.z;\n\n    return new ImplicitTileCoordinates({\n      subdivisionScheme: this.subdivisionScheme,\n      subtreeLevels: this.subtreeLevels,\n      level: descendantLevel,\n      x: descendantX,\n      y: descendantY,\n      z: descendantZ,\n    });\n  }\n\n  // Quadtree\n  return new ImplicitTileCoordinates({\n    subdivisionScheme: this.subdivisionScheme,\n    subtreeLevels: this.subtreeLevels,\n    level: descendantLevel,\n    x: descendantX,\n    y: descendantY,\n  });\n};\n\n/**\n * Compute the coordinates of a tile higher up in the tree by going up a number of levels.\n *\n * @param {Number} offsetLevels The number of levels to go up in the tree\n * @returns {ImplicitTileCoordinates} The coordinates of the ancestor\n * @private\n */\nImplicitTileCoordinates.prototype.getAncestorCoordinates = function (\n  offsetLevels\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("offsetLevels", offsetLevels);\n  if (offsetLevels < 0) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("offsetLevels must be non-negative");\n  }\n  if (offsetLevels > this.level) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("ancestor cannot be above the tileset root");\n  }\n  //>>includeEnd(\'debug\');\n\n  var divisor = 1 << offsetLevels;\n  var ancestorLevel = this.level - offsetLevels;\n  var ancestorX = Math.floor(this.x / divisor);\n  var ancestorY = Math.floor(this.y / divisor);\n\n  if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    var ancestorZ = Math.floor(this.z / divisor);\n\n    return new ImplicitTileCoordinates({\n      subdivisionScheme: this.subdivisionScheme,\n      subtreeLevels: this.subtreeLevels,\n      level: ancestorLevel,\n      x: ancestorX,\n      y: ancestorY,\n      z: ancestorZ,\n    });\n  }\n\n  // Quadtree\n  return new ImplicitTileCoordinates({\n    subdivisionScheme: this.subdivisionScheme,\n    subtreeLevels: this.subtreeLevels,\n    level: ancestorLevel,\n    x: ancestorX,\n    y: ancestorY,\n  });\n};\n\n/**\n * Compute the (level, x, y, [z]) offset to a descendant\n *\n * @param {ImplicitTileCoordinates} descendantCoordinates The descendant coordinates\n * @returns {ImplicitTileCoordinates} The offset between the ancestor and the descendant\n */\nImplicitTileCoordinates.prototype.getOffsetCoordinates = function (\n  descendantCoordinates\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("descendantCoordinates", descendantCoordinates);\n  if (\n    !this.isEqual(descendantCoordinates) &&\n    !this.isAncestor(descendantCoordinates)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("this is not an ancestor of descendant");\n  }\n  checkMatchingSubtreeShape(this, descendantCoordinates);\n  //>>includeEnd(\'debug\');\n\n  var offsetLevel = descendantCoordinates.level - this.level;\n  var dimensionAtOffsetLevel = 1 << offsetLevel;\n\n  var offsetX = descendantCoordinates.x % dimensionAtOffsetLevel;\n  var offsetY = descendantCoordinates.y % dimensionAtOffsetLevel;\n\n  if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    var offsetZ = descendantCoordinates.z % dimensionAtOffsetLevel;\n\n    return new ImplicitTileCoordinates({\n      subdivisionScheme: this.subdivisionScheme,\n      subtreeLevels: this.subtreeLevels,\n      level: offsetLevel,\n      x: offsetX,\n      y: offsetY,\n      z: offsetZ,\n    });\n  }\n\n  // Quadtree\n  return new ImplicitTileCoordinates({\n    subdivisionScheme: this.subdivisionScheme,\n    subtreeLevels: this.subtreeLevels,\n    level: offsetLevel,\n    x: offsetX,\n    y: offsetY,\n  });\n};\n\n/**\n * Given the morton index of the child, compute the coordinates of the child.\n * This is a special case of {@link ImplicitTileCoordinates#getDescendantCoordinates}.\n *\n * @param {Number} childIndex The morton index of the child tile relative to its parent\n * @returns {ImplicitTileCoordinates} The tile coordinates of the child\n * @private\n */\nImplicitTileCoordinates.prototype.getChildCoordinates = function (childIndex) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("childIndex", childIndex);\n  var branchingFactor = _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getBranchingFactor */ .Z.getBranchingFactor(\n    this.subdivisionScheme\n  );\n  if (childIndex < 0 || branchingFactor <= childIndex) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "childIndex must be at least 0 and less than " + branchingFactor\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var level = this.level + 1;\n  var x = 2 * this.x + (childIndex % 2);\n  var y = 2 * this.y + (Math.floor(childIndex / 2) % 2);\n\n  if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    var z = 2 * this.z + (Math.floor(childIndex / 4) % 2);\n    return new ImplicitTileCoordinates({\n      subdivisionScheme: this.subdivisionScheme,\n      subtreeLevels: this.subtreeLevels,\n      level: level,\n      x: x,\n      y: y,\n      z: z,\n    });\n  }\n\n  // Quadtree\n  return new ImplicitTileCoordinates({\n    subdivisionScheme: this.subdivisionScheme,\n    subtreeLevels: this.subtreeLevels,\n    level: level,\n    x: x,\n    y: y,\n  });\n};\n\n/**\n * Get the coordinates of the subtree that contains this tile. If the tile is\n * the root of the subtree, the root of the subtree is returned.\n *\n * @returns {ImplicitTileCoordinates} The subtree that contains this tile\n * @private\n */\nImplicitTileCoordinates.prototype.getSubtreeCoordinates = function () {\n  return this.getAncestorCoordinates(this.level % this.subtreeLevels);\n};\n\n/**\n * Get the coordinates of the parent subtree that contains this tile\n *\n * @returns {ImplicitTileCoordinates} The parent subtree that contains this tile\n * @private\n */\nImplicitTileCoordinates.prototype.getParentSubtreeCoordinates = function () {\n  return this.getAncestorCoordinates(\n    (this.level % this.subtreeLevels) + this.subtreeLevels\n  );\n};\n\n/**\n * Returns whether this tile is an ancestor of another tile\n *\n * @param {ImplicitTileCoordinates} descendantCoordinates the descendant coordinates\n * @returns {Boolean} <code>true</code> if this tile is an ancestor of the other tile\n * @private\n */\nImplicitTileCoordinates.prototype.isAncestor = function (\n  descendantCoordinates\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("descendantCoordinates", descendantCoordinates);\n  checkMatchingSubtreeShape(this, descendantCoordinates);\n  //>>includeEnd(\'debug\');\n\n  var levelDifference = descendantCoordinates.level - this.level;\n  if (levelDifference <= 0) {\n    return false;\n  }\n\n  var ancestorX = descendantCoordinates.x >> levelDifference;\n  var ancestorY = descendantCoordinates.y >> levelDifference;\n  var isAncestorX = this.x === ancestorX;\n  var isAncestorY = this.y === ancestorY;\n\n  if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    var ancestorZ = descendantCoordinates.z >> levelDifference;\n    var isAncestorZ = this.z === ancestorZ;\n    return isAncestorX && isAncestorY && isAncestorZ;\n  }\n\n  // Quadtree\n  return isAncestorX && isAncestorY;\n};\n\n/**\n * Returns whether the provided coordinates are equal to this coordinate\n *\n * @param {ImplicitTileCoordinates} otherCoordinates the other coordinates\n * @returns {Boolean} <code>true</code> if the coordinates are equal\n * @private\n */\nImplicitTileCoordinates.prototype.isEqual = function (otherCoordinates) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("otherCoordinates", otherCoordinates);\n  //>>includeEnd(\'debug\');\n\n  return (\n    this.subdivisionScheme === otherCoordinates.subdivisionScheme &&\n    this.subtreeLevels === otherCoordinates.subtreeLevels &&\n    this.level === otherCoordinates.level &&\n    this.x === otherCoordinates.x &&\n    this.y === otherCoordinates.y &&\n    (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE\n      ? this.z === otherCoordinates.z\n      : true)\n  );\n};\n\n/**\n * Returns whether this tile is the root of the implicit tileset\n *\n * @returns {Boolean} <code>true</code> if this tile is the root\n * @private\n */\nImplicitTileCoordinates.prototype.isImplicitTilesetRoot = function () {\n  return this.level === 0;\n};\n\n/**\n * Returns whether this tile is the root of the subtree\n *\n * @returns {Boolean} <code>true</code> if this tile is the root of the subtree\n * @private\n */\nImplicitTileCoordinates.prototype.isSubtreeRoot = function () {\n  return this.level % this.subtreeLevels === 0;\n};\n\n/**\n * Returns whether this tile is on the last row of tiles in the subtree\n *\n * @returns {Boolean} <code>true</code> if this tile is on the last row of tiles in the subtree\n * @private\n */\nImplicitTileCoordinates.prototype.isBottomOfSubtree = function () {\n  return this.level % this.subtreeLevels === this.subtreeLevels - 1;\n};\n\n/**\n * Get a dictionary of values for templating into an implicit template URI.\n *\n * @returns {Object} An object suitable for use with {@link Resource#getDerivedResource}\n * @private\n */\nImplicitTileCoordinates.prototype.getTemplateValues = function () {\n  var values = {\n    level: this.level,\n    x: this.x,\n    y: this.y,\n  };\n  if (this.subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    values.z = this.z;\n  }\n\n  return values;\n};\n\nvar scratchCoordinatesArray = [0, 0, 0];\n\n/**\n * Given a level number, morton index, and whether the tileset is an\n * octree/quadtree, compute the (level, x, y, [z]) coordinates\n *\n * @param {ImplicitSubdivisionScheme} subdivisionScheme Whether the coordinates are for a quadtree or octree\n * @param {Number} subtreeLevels The number of distinct levels within the coordinate\'s subtree\n * @param {Number} level The level of the tree\n * @param {Number} mortonIndex The morton index of the tile.\n * @returns {ImplicitTileCoordinates} The coordinates of the tile with the given Morton index\n * @private\n */\nImplicitTileCoordinates.fromMortonIndex = function (\n  subdivisionScheme,\n  subtreeLevels,\n  level,\n  mortonIndex\n) {\n  var coordinatesArray;\n  if (subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    coordinatesArray = _Core_MortonOrder_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].decode3D */ .Z.decode3D(\n      mortonIndex,\n      scratchCoordinatesArray\n    );\n    return new ImplicitTileCoordinates({\n      subdivisionScheme: subdivisionScheme,\n      subtreeLevels: subtreeLevels,\n      level: level,\n      x: coordinatesArray[0],\n      y: coordinatesArray[1],\n      z: coordinatesArray[2],\n    });\n  }\n\n  coordinatesArray = _Core_MortonOrder_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].decode2D */ .Z.decode2D(mortonIndex, scratchCoordinatesArray);\n  return new ImplicitTileCoordinates({\n    subdivisionScheme: subdivisionScheme,\n    subtreeLevels: subtreeLevels,\n    level: level,\n    x: coordinatesArray[0],\n    y: coordinatesArray[1],\n  });\n};\n\n/**\n * Given a tile index and whether the tileset is an octree/quadtree, compute\n * the (level, x, y, [z]) coordinates\n *\n * @param {ImplicitSubdivisionScheme} subdivisionScheme Whether the coordinates are for a quadtree or octree\n * @param {Number} subtreeLevels The number of distinct levels within the coordinate\'s subtree\n * @param {Number} tileIndex The tile\'s index\n * @returns {ImplicitTileCoordinates} The coordinates of the tile with the given tile index\n * @private\n */\nImplicitTileCoordinates.fromTileIndex = function (\n  subdivisionScheme,\n  subtreeLevels,\n  tileIndex\n) {\n  var level;\n  var levelOffset;\n  var mortonIndex;\n\n  if (subdivisionScheme === _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].OCTREE */ .Z.OCTREE) {\n    // Node count up to octree level: (8^L - 1) / (8-1)\n    // (8^L - 1) / (8-1) <= X < (8^(L+1) - 1) / (8-1)\n    // 8^L <= (7x + 1) < 8^(L+1)\n    // L <= log8(7x + 1) < L + 1\n    // L = floor(log8(7x + 1))\n    // L = floor(log2(7x + 1) / log2(8))\n    // L = floor(log2(7x + 1) / 3)\n    level = Math.floor(_Core_Math_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].log2 */ .Z.log2(7 * tileIndex + 1) / 3);\n    levelOffset = ((1 << (3 * level)) - 1) / 7;\n    mortonIndex = tileIndex - levelOffset;\n  } else {\n    // Node count up to quadtree level: (4^L - 1) / (4-1)\n    // (4^L - 1) / (4-1) <= X < (4^(L+1) - 1) / (4-1)\n    // 4^L <= (3x + 1) < 4^(L+1)\n    // L <= log4(3x + 1) < L + 1\n    // L = floor(log4(3x + 1))\n    // L = floor(log2(3x + 1) / log2(4))\n    // L = floor(log2(3x + 1) / 2)\n    level = Math.floor(_Core_Math_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].log2 */ .Z.log2(3 * tileIndex + 1) / 2);\n    levelOffset = ((1 << (2 * level)) - 1) / 3;\n    mortonIndex = tileIndex - levelOffset;\n  }\n\n  return ImplicitTileCoordinates.fromMortonIndex(\n    subdivisionScheme,\n    subtreeLevels,\n    level,\n    mortonIndex\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzU2OTIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUM7QUFDSjtBQUNrQjtBQUNOO0FBQ3NCOztBQUV2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtREFBbUQ7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDRCQUE0QjtBQUMzRSxzQkFBc0IsMkJBQTJCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVywyQkFBMkI7QUFDdEMsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckIsb0NBQW9DLDRGQUFnQztBQUNwRSxJQUFJLDJGQUFtQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0Esb0NBQW9DLDRGQUFnQztBQUNwRTtBQUNBLGdCQUFnQix3RUFBYztBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0VBQWM7QUFDNUI7QUFDQTtBQUNBLGNBQWMsd0VBQWM7QUFDNUI7QUFDQSxvQ0FBb0MsNEZBQWdDO0FBQ3BFO0FBQ0EsZ0JBQWdCLHdFQUFjO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDRGQUFnQztBQUNwRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw0RkFBZ0M7QUFDckU7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNEZBQWdDO0FBQ3JFLGVBQWUsdUZBQW9CO0FBQ25DO0FBQ0EsYUFBYSx1RkFBb0I7QUFDakMsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0RkFBZ0M7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEMsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEMsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLDRGQUFnQztBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckI7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLDRGQUFnQztBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQyxhQUFhLHlCQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUNBQWlDLDRGQUFnQztBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCLHVEQUF1RDtBQUNyRjtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLHlCQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMkZBQW1CO0FBQ3JCLHdCQUF3QixvSEFBNEM7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3RUFBYztBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLDRGQUFnQztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlCQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQyxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUMsNEZBQWdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQyxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDJGQUFtQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNEZBQWdDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUSxpQ0FBaUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw0RkFBZ0M7QUFDakU7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyQkFBMkI7QUFDdEMsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRGQUFnQztBQUM1RCx1QkFBdUIsdUZBQW9CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBLHFCQUFxQix1RkFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyQkFBMkI7QUFDdEMsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLHlCQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0QkFBNEIsNEZBQWdDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdFQUFlO0FBQ3RDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0VBQWU7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0ltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLmpzPzc0YzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBNb3J0b25PcmRlciBmcm9tIFwiLi4vQ29yZS9Nb3J0b25PcmRlci5qc1wiO1xuaW1wb3J0IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUgZnJvbSBcIi4vSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5qc1wiO1xuXG4vKipcbiAqIFRoZSBjb29yZGluYXRlcyBmb3IgYSB0aWxlIGluIGFuIGltcGxpY2l0IHRpbGVzZXQuIFRoZSBjb29yZGluYXRlc1xuICogYXJlIChsZXZlbCwgeCwgeSkgZm9yIHF1YWR0cmVlcyBvciAobGV2ZWwsIHgsIHksIHopIGZvciBvY3RyZWVzLlxuICogPHA+XG4gKiBMZXZlbCBudW1iZXJzIGFyZSAwLWluZGV4ZWQgYW5kIHR5cGljYWxseSBzdGFydCBhdCB0aGUgcm9vdCBvZiB0aGUgaW1wbGljaXRcbiAqIHRpbGVzZXQgKHRoZSB0aWxlIHdpdGggdGhlIDxjb2RlPjNEVElMRVNfaW1wbGljaXRfdGlsaW5nPC9jb2RlPiBleHRlbnNpb24pLlxuICogVGhpcyBvYmplY3QgY2FuIGFsc28gcmVwcmVzZW50IHRoZSByZWxhdGl2ZSBvZmZzZXQgZnJvbSBvbmUgc2V0IG9mIGNvb3JkaW5hdGVzXG4gKiB0byBhbm90aGVyLiBTZWUge0BsaW5rIEltcGxpY2l0VGlsZUNvb3JkaW5hdGVzI2dldE9mZnNldENvb3JkaW5hdGVzfS4gVGhlIHRlcm1cbiAqIGxvY2FsIGNvb3JkaW5hdGVzIHJlZmVycyB0byBjb29yZGluYXRlcyB0aGF0IGFyZSByZWxhdGl2ZSB0byB0aGUgcm9vdCBvZiBhXG4gKiBzdWJ0cmVlIGFuZCB0aGUgdGVybSBnbG9iYWwgY29vcmRpbmF0ZXMgcmVmZXJzIHRvIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZVxuICogcm9vdCBvZiBhbiBpbXBsaWNpdCB0aWxlc2V0LlxuICogPC9wPlxuICogPHA+XG4gKiBGb3IgYm94IGJvdW5kaW5nIHZvbHVtZXMsIHgsIHksIHogaW5jcmVhc2UgYWxvbmcgdGhlICt4LCAreSwgYW5kICt6XG4gKiBkaXJlY3Rpb25zIGRlZmluZWQgYnkgdGhlIGhhbGYgYXhlcy5cbiAqIDwvcD5cbiAqIDxwPlxuICogRm9yIHJlZ2lvbiBib3VuZGluZyB2b2x1bWVzLCB4IGluY3JlYXNlcyBpbiB0aGUgK2xvbmdpdHVkZSBkaXJlY3Rpb24sIHlcbiAqIGluY3JlYXNlcyBpbiB0aGUgK2xhdGl0dWRlIGRpcmVjdGlvbiwgYW5kIHogaW5jcmVhc2VzIGluIHRoZSAraGVpZ2h0XG4gKiBkaXJlY3Rpb24uXG4gKiA8L3A+XG4gKiA8cD5cbiAqIENhcmUgbXVzdCBiZSB0YWtlbiB3aGVuIGNvbnZlcnRpbmcgYmV0d2VlbiBpbXBsaWNpdCBjb29yZGluYXRlcyBhbmQgTW9ydG9uXG4gKiBpbmRpY2VzIGJlY2F1c2UgdGhlcmUgaXMgYSAxNi1iaXQgbGltaXQgb24ge0BsaW5rIE1vcnRvbk9yZGVyI2VuY29kZTJEfSBhbmRcbiAqIGEgMTAtYml0IGxpbWl0IG9uIHtAbGluayBNb3J0b25PcmRlciNlbmNvZGUzRH0uIFR5cGljYWxseSB0aGVzZSBjb252ZXJzaW9uc1xuICogc2hvdWxkIGJlIGRvbmUgb24gbG9jYWwgY29vcmRpbmF0ZXMsIG5vdCBnbG9iYWwgY29vcmRpbmF0ZXMsIGFuZCB0aGUgbWF4aW11bVxuICogbnVtYmVyIG9mIGxldmVscyBpbiB0aGUgc3VidHJlZSBzaG91bGQgYmUgMTUgZm9yIHF1YWR0cmVlIGFuZCA5IGZvciBvY3RyZWUgKHRvXG4gKiBhY2NvdW50IGZvciB0aGUgZXh0cmEgbGV2ZWwgbmVlZGVkIGJ5IGNoaWxkIHN1YnRyZWUgY29vcmRpbmF0ZXMpLlxuICogPC9wPlxuICpcbiAqIEBhbGlhcyBJbXBsaWNpdFRpbGVDb29yZGluYXRlc1xuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lfSBvcHRpb25zLnN1YmRpdmlzaW9uU2NoZW1lIFdoZXRoZXIgdGhlIGNvb3JkaW5hdGVzIGFyZSBmb3IgYSBxdWFkdHJlZSBvciBvY3RyZWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnN1YnRyZWVMZXZlbHMgVGhlIG51bWJlciBvZiBkaXN0aW5jdCBsZXZlbHMgd2l0aGluIHRoZSBjb29yZGluYXRlJ3Mgc3VidHJlZVxuICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMubGV2ZWwgVGhlIGxldmVsIG9mIGEgdGlsZSByZWxhdGl2ZSB0byB0aGUgdGlsZSB3aXRoIHRoZSBleHRlbnNpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnggVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgdGlsZVxuICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMueSBUaGUgeSBjb29yZGluYXRlIG9mIHRoZSB0aWxlXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuel0gVGhlIHogY29vcmRpbmF0ZSBvZiB0aGUgdGlsZS4gT25seSByZXF1aXJlZCB3aGVuIG9wdGlvbnMuc3ViZGl2aXNpb25TY2hlbWUgaXMgSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5PQ1RSRUVcbiAqIEBwcml2YXRlXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgZmVhdHVyZSBpcyB1c2luZyBwYXJ0IG9mIHRoZSAzRCBUaWxlcyBzcGVjIHRoYXQgaXMgbm90IGZpbmFsIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IENlc2l1bSdzIHN0YW5kYXJkIGRlcHJlY2F0aW9uIHBvbGljeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMob3B0aW9ucykge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yuc3RyaW5nKFwib3B0aW9ucy5zdWJkaXZpc2lvblNjaGVtZVwiLCBvcHRpb25zLnN1YmRpdmlzaW9uU2NoZW1lKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcIm9wdGlvbnMuc3VidHJlZUxldmVsc1wiLCBvcHRpb25zLnN1YnRyZWVMZXZlbHMpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwib3B0aW9ucy5sZXZlbFwiLCBvcHRpb25zLmxldmVsKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcIm9wdGlvbnMueFwiLCBvcHRpb25zLngpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwib3B0aW9ucy55XCIsIG9wdGlvbnMueSk7XG4gIGlmIChvcHRpb25zLnN1YmRpdmlzaW9uU2NoZW1lID09PSBJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lLk9DVFJFRSkge1xuICAgIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLnpcIiwgb3B0aW9ucy56KTtcbiAgfVxuICAvLyBDaGVjayBmb3IgdmFsdWVzIHRoYXQgYXJlIG5lZ2F0aXZlXG4gIGlmIChvcHRpb25zLmxldmVsIDwgMCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImxldmVsIG11c3QgYmUgbm9uLW5lZ2F0aXZlXCIpO1xuICB9XG4gIGlmIChvcHRpb25zLnggPCAwKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwieCBtdXN0IGJlIG5vbi1uZWdhdGl2ZVwiKTtcbiAgfVxuICBpZiAob3B0aW9ucy55IDwgMCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInkgbXVzdCBiZSBub24tbmVnYXRpdmVcIik7XG4gIH1cbiAgaWYgKG9wdGlvbnMuc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFKSB7XG4gICAgaWYgKG9wdGlvbnMueiA8IDApIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInogbXVzdCBiZSBub24tbmVnYXRpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIHZhbHVlcyB0aGF0IGFyZSB0b28gbGFyZ2VcbiAgdmFyIGRpbWVuc2lvbkF0TGV2ZWwgPSAxIDw8IG9wdGlvbnMubGV2ZWw7XG4gIGlmIChvcHRpb25zLnggPj0gZGltZW5zaW9uQXRMZXZlbCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInggaXMgb3V0IG9mIHJhbmdlXCIpO1xuICB9XG4gIGlmIChvcHRpb25zLnkgPj0gZGltZW5zaW9uQXRMZXZlbCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInkgaXMgb3V0IG9mIHJhbmdlXCIpO1xuICB9XG4gIGlmIChvcHRpb25zLnN1YmRpdmlzaW9uU2NoZW1lID09PSBJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lLk9DVFJFRSkge1xuICAgIGlmIChvcHRpb25zLnogPj0gZGltZW5zaW9uQXRMZXZlbCkge1xuICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwieiBpcyBvdXQgb2YgcmFuZ2VcIik7XG4gICAgfVxuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSB0aWxlc2V0IGlzIGEgcXVhZHRyZWUgb3Igb2N0cmVlXG4gICAqXG4gICAqIEB0eXBlIHtJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPSBvcHRpb25zLnN1YmRpdmlzaW9uU2NoZW1lO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGRpc3RpbmN0IGxldmVscyB3aXRoaW4gdGhlIGNvb3JkaW5hdGUncyBzdWJ0cmVlXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5zdWJ0cmVlTGV2ZWxzID0gb3B0aW9ucy5zdWJ0cmVlTGV2ZWxzO1xuXG4gIC8qKlxuICAgKiBMZXZlbCBvZiB0aGlzIHRpbGUsIHJlbGF0aXZlIHRvIHRoZSB0aWxlIHdpdGggdGhlXG4gICAqIDxjb2RlPjNEVElMRVNfaW1wbGljaXRfdGlsaW5nPC9jb2RlPiBleHRlbnNpb24uIExldmVsIG51bWJlcnMgc3RhcnQgYXQgMC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmxldmVsID0gb3B0aW9ucy5sZXZlbDtcblxuICAvKipcbiAgICogWCBjb29yZGluYXRlIG9mIHRoaXMgdGlsZVxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMueCA9IG9wdGlvbnMueDtcblxuICAvKipcbiAgICogWSBjb29yZGluYXRlIG9mIHRoaXMgdGlsZVxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMueSA9IG9wdGlvbnMueTtcblxuICAvKipcbiAgICogWiBjb29yZGluYXRlIG9mIHRoaXMgdGlsZS4gT25seSBkZWZpbmVkIGZvciBvY3RyZWVzLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnogPSB1bmRlZmluZWQ7XG4gIGlmIChvcHRpb25zLnN1YmRpdmlzaW9uU2NoZW1lID09PSBJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lLk9DVFJFRSkge1xuICAgIHRoaXMueiA9IG9wdGlvbnMuejtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhJbXBsaWNpdFRpbGVDb29yZGluYXRlcy5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEFuIGluZGV4IGluIHRoZSByYW5nZSBvZiBbMCwgYnJhbmNoaW5nRmFjdG9yKSB0aGF0IGluZGljYXRlc1xuICAgKiB3aGljaCBjaGlsZCBvZiB0aGUgcGFyZW50IGNlbGwgdGhlc2UgY29vcmRpbmF0ZXMgY29ycmVzcG9uZCB0by5cbiAgICogVGhpcyBjYW4gYmUgdmlld2VkIGFzIGEgbW9ydG9uIGluZGV4IHdpdGhpbiB0aGUgcGFyZW50IHRpbGUuXG4gICAqIDxwPlxuICAgKiBUaGlzIGlzIHRoZSBsYXN0IDMgYml0cyBvZiB0aGUgbW9ydG9uIGluZGV4IG9mIHRoZSB0aWxlLCBidXQgaXQgY2FuXG4gICAqIGJlIGNvbXB1dGVkIG1vcmUgZGlyZWN0bHkgYnkgY29uY2F0ZW5hdGluZyB0aGUgYml0cyBbejBdIHkwIHgwXG4gICAqIDwvcD5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjaGlsZEluZGV4OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2hpbGRJbmRleCA9IDA7XG4gICAgICBjaGlsZEluZGV4IHw9IHRoaXMueCAmIDE7XG4gICAgICBjaGlsZEluZGV4IHw9ICh0aGlzLnkgJiAxKSA8PCAxO1xuICAgICAgaWYgKHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFKSB7XG4gICAgICAgIGNoaWxkSW5kZXggfD0gKHRoaXMueiAmIDEpIDw8IDI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGlsZEluZGV4O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgTW9ydG9uIGluZGV4IGZvciB0aGlzIHRpbGUgd2l0aGluIHRoZSBjdXJyZW50IGxldmVsIGJ5IGludGVybGVhdmluZ1xuICAgKiB0aGUgYml0cyBvZiB0aGUgeCwgeSBhbmQgeiBjb29yZGluYXRlcy5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtb3J0b25JbmRleDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFKSB7XG4gICAgICAgIHJldHVybiBNb3J0b25PcmRlci5lbmNvZGUzRCh0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBNb3J0b25PcmRlci5lbmNvZGUyRCh0aGlzLngsIHRoaXMueSk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSB0aWxlIGluZGV4IGJ5IGFkZGluZyB0aGUgTW9ydG9uIGluZGV4IHRvIHRoZSBsZXZlbCBvZmZzZXRcbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aWxlSW5kZXg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsZXZlbE9mZnNldCA9XG4gICAgICAgIHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFXG4gICAgICAgICAgPyAvLyAoOF5OIC0gMSkgLyAoOC0xKVxuICAgICAgICAgICAgKCgxIDw8ICgzICogdGhpcy5sZXZlbCkpIC0gMSkgLyA3XG4gICAgICAgICAgOiAvLyAoNF5OIC0gMSkgLyAoNC0xKVxuICAgICAgICAgICAgKCgxIDw8ICgyICogdGhpcy5sZXZlbCkpIC0gMSkgLyAzO1xuXG4gICAgICB2YXIgbW9ydG9uSW5kZXggPSB0aGlzLm1vcnRvbkluZGV4O1xuICAgICAgcmV0dXJuIGxldmVsT2Zmc2V0ICsgbW9ydG9uSW5kZXg7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIENoZWNrIHRoYXQgdGhlIHR3byBjb29yZGluYXRlcyBhcmUgY29tcGF0aWJsZVxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gYVxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gYlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tNYXRjaGluZ1N1YnRyZWVTaGFwZShhLCBiKSB7XG4gIGlmIChhLnN1YmRpdmlzaW9uU2NoZW1lICE9PSBiLnN1YmRpdmlzaW9uU2NoZW1lKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiY29vcmRpbmF0ZXMgbXVzdCBoYXZlIHNhbWUgc3ViZGl2aXNpb25TY2hlbWVcIik7XG4gIH1cbiAgaWYgKGEuc3VidHJlZUxldmVscyAhPT0gYi5zdWJ0cmVlTGV2ZWxzKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiY29vcmRpbmF0ZXMgbXVzdCBoYXZlIHNhbWUgc3VidHJlZUxldmVsc1wiKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbXB1dGUgdGhlIGNvb3JkaW5hdGVzIG9mIGEgdGlsZSBkZWVwZXIgaW4gdGhlIHRyZWUgd2l0aCBhIChsZXZlbCwgeCwgeSwgW3pdKSByZWxhdGl2ZSBvZmZzZXQuXG4gKlxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gb2Zmc2V0Q29vcmRpbmF0ZXMgVGhlIG9mZnNldCBmcm9tIHRoZSBhbmNlc3RvclxuICogQHJldHVybnMge0ltcGxpY2l0VGlsZUNvb3JkaW5hdGVzfSBUaGUgY29vcmRpbmF0ZXMgb2YgdGhlIGRlc2NlbmRhbnRcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLnByb3RvdHlwZS5nZXREZXNjZW5kYW50Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoXG4gIG9mZnNldENvb3JkaW5hdGVzXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9mZnNldENvb3JkaW5hdGVzXCIsIG9mZnNldENvb3JkaW5hdGVzKTtcbiAgY2hlY2tNYXRjaGluZ1N1YnRyZWVTaGFwZSh0aGlzLCBvZmZzZXRDb29yZGluYXRlcyk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBkZXNjZW5kYW50TGV2ZWwgPSB0aGlzLmxldmVsICsgb2Zmc2V0Q29vcmRpbmF0ZXMubGV2ZWw7XG4gIHZhciBkZXNjZW5kYW50WCA9ICh0aGlzLnggPDwgb2Zmc2V0Q29vcmRpbmF0ZXMubGV2ZWwpICsgb2Zmc2V0Q29vcmRpbmF0ZXMueDtcbiAgdmFyIGRlc2NlbmRhbnRZID0gKHRoaXMueSA8PCBvZmZzZXRDb29yZGluYXRlcy5sZXZlbCkgKyBvZmZzZXRDb29yZGluYXRlcy55O1xuXG4gIGlmICh0aGlzLnN1YmRpdmlzaW9uU2NoZW1lID09PSBJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lLk9DVFJFRSkge1xuICAgIHZhciBkZXNjZW5kYW50WiA9ICh0aGlzLnogPDwgb2Zmc2V0Q29vcmRpbmF0ZXMubGV2ZWwpICsgb2Zmc2V0Q29vcmRpbmF0ZXMuejtcblxuICAgIHJldHVybiBuZXcgSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMoe1xuICAgICAgc3ViZGl2aXNpb25TY2hlbWU6IHRoaXMuc3ViZGl2aXNpb25TY2hlbWUsXG4gICAgICBzdWJ0cmVlTGV2ZWxzOiB0aGlzLnN1YnRyZWVMZXZlbHMsXG4gICAgICBsZXZlbDogZGVzY2VuZGFudExldmVsLFxuICAgICAgeDogZGVzY2VuZGFudFgsXG4gICAgICB5OiBkZXNjZW5kYW50WSxcbiAgICAgIHo6IGRlc2NlbmRhbnRaLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gUXVhZHRyZWVcbiAgcmV0dXJuIG5ldyBJbXBsaWNpdFRpbGVDb29yZGluYXRlcyh7XG4gICAgc3ViZGl2aXNpb25TY2hlbWU6IHRoaXMuc3ViZGl2aXNpb25TY2hlbWUsXG4gICAgc3VidHJlZUxldmVsczogdGhpcy5zdWJ0cmVlTGV2ZWxzLFxuICAgIGxldmVsOiBkZXNjZW5kYW50TGV2ZWwsXG4gICAgeDogZGVzY2VuZGFudFgsXG4gICAgeTogZGVzY2VuZGFudFksXG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb21wdXRlIHRoZSBjb29yZGluYXRlcyBvZiBhIHRpbGUgaGlnaGVyIHVwIGluIHRoZSB0cmVlIGJ5IGdvaW5nIHVwIGEgbnVtYmVyIG9mIGxldmVscy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0TGV2ZWxzIFRoZSBudW1iZXIgb2YgbGV2ZWxzIHRvIGdvIHVwIGluIHRoZSB0cmVlXG4gKiBAcmV0dXJucyB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IFRoZSBjb29yZGluYXRlcyBvZiB0aGUgYW5jZXN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLnByb3RvdHlwZS5nZXRBbmNlc3RvckNvb3JkaW5hdGVzID0gZnVuY3Rpb24gKFxuICBvZmZzZXRMZXZlbHNcbikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwib2Zmc2V0TGV2ZWxzXCIsIG9mZnNldExldmVscyk7XG4gIGlmIChvZmZzZXRMZXZlbHMgPCAwKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib2Zmc2V0TGV2ZWxzIG11c3QgYmUgbm9uLW5lZ2F0aXZlXCIpO1xuICB9XG4gIGlmIChvZmZzZXRMZXZlbHMgPiB0aGlzLmxldmVsKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiYW5jZXN0b3IgY2Fubm90IGJlIGFib3ZlIHRoZSB0aWxlc2V0IHJvb3RcIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGRpdmlzb3IgPSAxIDw8IG9mZnNldExldmVscztcbiAgdmFyIGFuY2VzdG9yTGV2ZWwgPSB0aGlzLmxldmVsIC0gb2Zmc2V0TGV2ZWxzO1xuICB2YXIgYW5jZXN0b3JYID0gTWF0aC5mbG9vcih0aGlzLnggLyBkaXZpc29yKTtcbiAgdmFyIGFuY2VzdG9yWSA9IE1hdGguZmxvb3IodGhpcy55IC8gZGl2aXNvcik7XG5cbiAgaWYgKHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFKSB7XG4gICAgdmFyIGFuY2VzdG9yWiA9IE1hdGguZmxvb3IodGhpcy56IC8gZGl2aXNvcik7XG5cbiAgICByZXR1cm4gbmV3IEltcGxpY2l0VGlsZUNvb3JkaW5hdGVzKHtcbiAgICAgIHN1YmRpdmlzaW9uU2NoZW1lOiB0aGlzLnN1YmRpdmlzaW9uU2NoZW1lLFxuICAgICAgc3VidHJlZUxldmVsczogdGhpcy5zdWJ0cmVlTGV2ZWxzLFxuICAgICAgbGV2ZWw6IGFuY2VzdG9yTGV2ZWwsXG4gICAgICB4OiBhbmNlc3RvclgsXG4gICAgICB5OiBhbmNlc3RvclksXG4gICAgICB6OiBhbmNlc3RvclosXG4gICAgfSk7XG4gIH1cblxuICAvLyBRdWFkdHJlZVxuICByZXR1cm4gbmV3IEltcGxpY2l0VGlsZUNvb3JkaW5hdGVzKHtcbiAgICBzdWJkaXZpc2lvblNjaGVtZTogdGhpcy5zdWJkaXZpc2lvblNjaGVtZSxcbiAgICBzdWJ0cmVlTGV2ZWxzOiB0aGlzLnN1YnRyZWVMZXZlbHMsXG4gICAgbGV2ZWw6IGFuY2VzdG9yTGV2ZWwsXG4gICAgeDogYW5jZXN0b3JYLFxuICAgIHk6IGFuY2VzdG9yWSxcbiAgfSk7XG59O1xuXG4vKipcbiAqIENvbXB1dGUgdGhlIChsZXZlbCwgeCwgeSwgW3pdKSBvZmZzZXQgdG8gYSBkZXNjZW5kYW50XG4gKlxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gZGVzY2VuZGFudENvb3JkaW5hdGVzIFRoZSBkZXNjZW5kYW50IGNvb3JkaW5hdGVzXG4gKiBAcmV0dXJucyB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IFRoZSBvZmZzZXQgYmV0d2VlbiB0aGUgYW5jZXN0b3IgYW5kIHRoZSBkZXNjZW5kYW50XG4gKi9cbkltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLnByb3RvdHlwZS5nZXRPZmZzZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChcbiAgZGVzY2VuZGFudENvb3JkaW5hdGVzXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcImRlc2NlbmRhbnRDb29yZGluYXRlc1wiLCBkZXNjZW5kYW50Q29vcmRpbmF0ZXMpO1xuICBpZiAoXG4gICAgIXRoaXMuaXNFcXVhbChkZXNjZW5kYW50Q29vcmRpbmF0ZXMpICYmXG4gICAgIXRoaXMuaXNBbmNlc3RvcihkZXNjZW5kYW50Q29vcmRpbmF0ZXMpXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInRoaXMgaXMgbm90IGFuIGFuY2VzdG9yIG9mIGRlc2NlbmRhbnRcIik7XG4gIH1cbiAgY2hlY2tNYXRjaGluZ1N1YnRyZWVTaGFwZSh0aGlzLCBkZXNjZW5kYW50Q29vcmRpbmF0ZXMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgb2Zmc2V0TGV2ZWwgPSBkZXNjZW5kYW50Q29vcmRpbmF0ZXMubGV2ZWwgLSB0aGlzLmxldmVsO1xuICB2YXIgZGltZW5zaW9uQXRPZmZzZXRMZXZlbCA9IDEgPDwgb2Zmc2V0TGV2ZWw7XG5cbiAgdmFyIG9mZnNldFggPSBkZXNjZW5kYW50Q29vcmRpbmF0ZXMueCAlIGRpbWVuc2lvbkF0T2Zmc2V0TGV2ZWw7XG4gIHZhciBvZmZzZXRZID0gZGVzY2VuZGFudENvb3JkaW5hdGVzLnkgJSBkaW1lbnNpb25BdE9mZnNldExldmVsO1xuXG4gIGlmICh0aGlzLnN1YmRpdmlzaW9uU2NoZW1lID09PSBJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lLk9DVFJFRSkge1xuICAgIHZhciBvZmZzZXRaID0gZGVzY2VuZGFudENvb3JkaW5hdGVzLnogJSBkaW1lbnNpb25BdE9mZnNldExldmVsO1xuXG4gICAgcmV0dXJuIG5ldyBJbXBsaWNpdFRpbGVDb29yZGluYXRlcyh7XG4gICAgICBzdWJkaXZpc2lvblNjaGVtZTogdGhpcy5zdWJkaXZpc2lvblNjaGVtZSxcbiAgICAgIHN1YnRyZWVMZXZlbHM6IHRoaXMuc3VidHJlZUxldmVscyxcbiAgICAgIGxldmVsOiBvZmZzZXRMZXZlbCxcbiAgICAgIHg6IG9mZnNldFgsXG4gICAgICB5OiBvZmZzZXRZLFxuICAgICAgejogb2Zmc2V0WixcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFF1YWR0cmVlXG4gIHJldHVybiBuZXcgSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMoe1xuICAgIHN1YmRpdmlzaW9uU2NoZW1lOiB0aGlzLnN1YmRpdmlzaW9uU2NoZW1lLFxuICAgIHN1YnRyZWVMZXZlbHM6IHRoaXMuc3VidHJlZUxldmVscyxcbiAgICBsZXZlbDogb2Zmc2V0TGV2ZWwsXG4gICAgeDogb2Zmc2V0WCxcbiAgICB5OiBvZmZzZXRZLFxuICB9KTtcbn07XG5cbi8qKlxuICogR2l2ZW4gdGhlIG1vcnRvbiBpbmRleCBvZiB0aGUgY2hpbGQsIGNvbXB1dGUgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBjaGlsZC5cbiAqIFRoaXMgaXMgYSBzcGVjaWFsIGNhc2Ugb2Yge0BsaW5rIEltcGxpY2l0VGlsZUNvb3JkaW5hdGVzI2dldERlc2NlbmRhbnRDb29yZGluYXRlc30uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGNoaWxkSW5kZXggVGhlIG1vcnRvbiBpbmRleCBvZiB0aGUgY2hpbGQgdGlsZSByZWxhdGl2ZSB0byBpdHMgcGFyZW50XG4gKiBAcmV0dXJucyB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IFRoZSB0aWxlIGNvb3JkaW5hdGVzIG9mIHRoZSBjaGlsZFxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMucHJvdG90eXBlLmdldENoaWxkQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY2hpbGRJbmRleCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwiY2hpbGRJbmRleFwiLCBjaGlsZEluZGV4KTtcbiAgdmFyIGJyYW5jaGluZ0ZhY3RvciA9IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuZ2V0QnJhbmNoaW5nRmFjdG9yKFxuICAgIHRoaXMuc3ViZGl2aXNpb25TY2hlbWVcbiAgKTtcbiAgaWYgKGNoaWxkSW5kZXggPCAwIHx8IGJyYW5jaGluZ0ZhY3RvciA8PSBjaGlsZEluZGV4KSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJjaGlsZEluZGV4IG11c3QgYmUgYXQgbGVhc3QgMCBhbmQgbGVzcyB0aGFuIFwiICsgYnJhbmNoaW5nRmFjdG9yXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgbGV2ZWwgPSB0aGlzLmxldmVsICsgMTtcbiAgdmFyIHggPSAyICogdGhpcy54ICsgKGNoaWxkSW5kZXggJSAyKTtcbiAgdmFyIHkgPSAyICogdGhpcy55ICsgKE1hdGguZmxvb3IoY2hpbGRJbmRleCAvIDIpICUgMik7XG5cbiAgaWYgKHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFKSB7XG4gICAgdmFyIHogPSAyICogdGhpcy56ICsgKE1hdGguZmxvb3IoY2hpbGRJbmRleCAvIDQpICUgMik7XG4gICAgcmV0dXJuIG5ldyBJbXBsaWNpdFRpbGVDb29yZGluYXRlcyh7XG4gICAgICBzdWJkaXZpc2lvblNjaGVtZTogdGhpcy5zdWJkaXZpc2lvblNjaGVtZSxcbiAgICAgIHN1YnRyZWVMZXZlbHM6IHRoaXMuc3VidHJlZUxldmVscyxcbiAgICAgIGxldmVsOiBsZXZlbCxcbiAgICAgIHg6IHgsXG4gICAgICB5OiB5LFxuICAgICAgejogeixcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFF1YWR0cmVlXG4gIHJldHVybiBuZXcgSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMoe1xuICAgIHN1YmRpdmlzaW9uU2NoZW1lOiB0aGlzLnN1YmRpdmlzaW9uU2NoZW1lLFxuICAgIHN1YnRyZWVMZXZlbHM6IHRoaXMuc3VidHJlZUxldmVscyxcbiAgICBsZXZlbDogbGV2ZWwsXG4gICAgeDogeCxcbiAgICB5OiB5LFxuICB9KTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgc3VidHJlZSB0aGF0IGNvbnRhaW5zIHRoaXMgdGlsZS4gSWYgdGhlIHRpbGUgaXNcbiAqIHRoZSByb290IG9mIHRoZSBzdWJ0cmVlLCB0aGUgcm9vdCBvZiB0aGUgc3VidHJlZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcmV0dXJucyB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IFRoZSBzdWJ0cmVlIHRoYXQgY29udGFpbnMgdGhpcyB0aWxlXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFRpbGVDb29yZGluYXRlcy5wcm90b3R5cGUuZ2V0U3VidHJlZUNvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5nZXRBbmNlc3RvckNvb3JkaW5hdGVzKHRoaXMubGV2ZWwgJSB0aGlzLnN1YnRyZWVMZXZlbHMpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBwYXJlbnQgc3VidHJlZSB0aGF0IGNvbnRhaW5zIHRoaXMgdGlsZVxuICpcbiAqIEByZXR1cm5zIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gVGhlIHBhcmVudCBzdWJ0cmVlIHRoYXQgY29udGFpbnMgdGhpcyB0aWxlXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFRpbGVDb29yZGluYXRlcy5wcm90b3R5cGUuZ2V0UGFyZW50U3VidHJlZUNvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5nZXRBbmNlc3RvckNvb3JkaW5hdGVzKFxuICAgICh0aGlzLmxldmVsICUgdGhpcy5zdWJ0cmVlTGV2ZWxzKSArIHRoaXMuc3VidHJlZUxldmVsc1xuICApO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyB0aWxlIGlzIGFuIGFuY2VzdG9yIG9mIGFub3RoZXIgdGlsZVxuICpcbiAqIEBwYXJhbSB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IGRlc2NlbmRhbnRDb29yZGluYXRlcyB0aGUgZGVzY2VuZGFudCBjb29yZGluYXRlc1xuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoaXMgdGlsZSBpcyBhbiBhbmNlc3RvciBvZiB0aGUgb3RoZXIgdGlsZVxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMucHJvdG90eXBlLmlzQW5jZXN0b3IgPSBmdW5jdGlvbiAoXG4gIGRlc2NlbmRhbnRDb29yZGluYXRlc1xuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJkZXNjZW5kYW50Q29vcmRpbmF0ZXNcIiwgZGVzY2VuZGFudENvb3JkaW5hdGVzKTtcbiAgY2hlY2tNYXRjaGluZ1N1YnRyZWVTaGFwZSh0aGlzLCBkZXNjZW5kYW50Q29vcmRpbmF0ZXMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgbGV2ZWxEaWZmZXJlbmNlID0gZGVzY2VuZGFudENvb3JkaW5hdGVzLmxldmVsIC0gdGhpcy5sZXZlbDtcbiAgaWYgKGxldmVsRGlmZmVyZW5jZSA8PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGFuY2VzdG9yWCA9IGRlc2NlbmRhbnRDb29yZGluYXRlcy54ID4+IGxldmVsRGlmZmVyZW5jZTtcbiAgdmFyIGFuY2VzdG9yWSA9IGRlc2NlbmRhbnRDb29yZGluYXRlcy55ID4+IGxldmVsRGlmZmVyZW5jZTtcbiAgdmFyIGlzQW5jZXN0b3JYID0gdGhpcy54ID09PSBhbmNlc3Rvclg7XG4gIHZhciBpc0FuY2VzdG9yWSA9IHRoaXMueSA9PT0gYW5jZXN0b3JZO1xuXG4gIGlmICh0aGlzLnN1YmRpdmlzaW9uU2NoZW1lID09PSBJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lLk9DVFJFRSkge1xuICAgIHZhciBhbmNlc3RvclogPSBkZXNjZW5kYW50Q29vcmRpbmF0ZXMueiA+PiBsZXZlbERpZmZlcmVuY2U7XG4gICAgdmFyIGlzQW5jZXN0b3JaID0gdGhpcy56ID09PSBhbmNlc3Rvclo7XG4gICAgcmV0dXJuIGlzQW5jZXN0b3JYICYmIGlzQW5jZXN0b3JZICYmIGlzQW5jZXN0b3JaO1xuICB9XG5cbiAgLy8gUXVhZHRyZWVcbiAgcmV0dXJuIGlzQW5jZXN0b3JYICYmIGlzQW5jZXN0b3JZO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGVzIGFyZSBlcXVhbCB0byB0aGlzIGNvb3JkaW5hdGVcbiAqXG4gKiBAcGFyYW0ge0ltcGxpY2l0VGlsZUNvb3JkaW5hdGVzfSBvdGhlckNvb3JkaW5hdGVzIHRoZSBvdGhlciBjb29yZGluYXRlc1xuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZSBjb29yZGluYXRlcyBhcmUgZXF1YWxcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyQ29vcmRpbmF0ZXMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm90aGVyQ29vcmRpbmF0ZXNcIiwgb3RoZXJDb29yZGluYXRlcyk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHJldHVybiAoXG4gICAgdGhpcy5zdWJkaXZpc2lvblNjaGVtZSA9PT0gb3RoZXJDb29yZGluYXRlcy5zdWJkaXZpc2lvblNjaGVtZSAmJlxuICAgIHRoaXMuc3VidHJlZUxldmVscyA9PT0gb3RoZXJDb29yZGluYXRlcy5zdWJ0cmVlTGV2ZWxzICYmXG4gICAgdGhpcy5sZXZlbCA9PT0gb3RoZXJDb29yZGluYXRlcy5sZXZlbCAmJlxuICAgIHRoaXMueCA9PT0gb3RoZXJDb29yZGluYXRlcy54ICYmXG4gICAgdGhpcy55ID09PSBvdGhlckNvb3JkaW5hdGVzLnkgJiZcbiAgICAodGhpcy5zdWJkaXZpc2lvblNjaGVtZSA9PT0gSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5PQ1RSRUVcbiAgICAgID8gdGhpcy56ID09PSBvdGhlckNvb3JkaW5hdGVzLnpcbiAgICAgIDogdHJ1ZSlcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoaXMgdGlsZSBpcyB0aGUgcm9vdCBvZiB0aGUgaW1wbGljaXQgdGlsZXNldFxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGlzIHRpbGUgaXMgdGhlIHJvb3RcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLnByb3RvdHlwZS5pc0ltcGxpY2l0VGlsZXNldFJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmxldmVsID09PSAwO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyB0aWxlIGlzIHRoZSByb290IG9mIHRoZSBzdWJ0cmVlXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoaXMgdGlsZSBpcyB0aGUgcm9vdCBvZiB0aGUgc3VidHJlZVxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMucHJvdG90eXBlLmlzU3VidHJlZVJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmxldmVsICUgdGhpcy5zdWJ0cmVlTGV2ZWxzID09PSAwO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyB0aWxlIGlzIG9uIHRoZSBsYXN0IHJvdyBvZiB0aWxlcyBpbiB0aGUgc3VidHJlZVxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGlzIHRpbGUgaXMgb24gdGhlIGxhc3Qgcm93IG9mIHRpbGVzIGluIHRoZSBzdWJ0cmVlXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFRpbGVDb29yZGluYXRlcy5wcm90b3R5cGUuaXNCb3R0b21PZlN1YnRyZWUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmxldmVsICUgdGhpcy5zdWJ0cmVlTGV2ZWxzID09PSB0aGlzLnN1YnRyZWVMZXZlbHMgLSAxO1xufTtcblxuLyoqXG4gKiBHZXQgYSBkaWN0aW9uYXJ5IG9mIHZhbHVlcyBmb3IgdGVtcGxhdGluZyBpbnRvIGFuIGltcGxpY2l0IHRlbXBsYXRlIFVSSS5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoIHtAbGluayBSZXNvdXJjZSNnZXREZXJpdmVkUmVzb3VyY2V9XG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFRpbGVDb29yZGluYXRlcy5wcm90b3R5cGUuZ2V0VGVtcGxhdGVWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2YWx1ZXMgPSB7XG4gICAgbGV2ZWw6IHRoaXMubGV2ZWwsXG4gICAgeDogdGhpcy54LFxuICAgIHk6IHRoaXMueSxcbiAgfTtcbiAgaWYgKHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFKSB7XG4gICAgdmFsdWVzLnogPSB0aGlzLno7XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xufTtcblxudmFyIHNjcmF0Y2hDb29yZGluYXRlc0FycmF5ID0gWzAsIDAsIDBdO1xuXG4vKipcbiAqIEdpdmVuIGEgbGV2ZWwgbnVtYmVyLCBtb3J0b24gaW5kZXgsIGFuZCB3aGV0aGVyIHRoZSB0aWxlc2V0IGlzIGFuXG4gKiBvY3RyZWUvcXVhZHRyZWUsIGNvbXB1dGUgdGhlIChsZXZlbCwgeCwgeSwgW3pdKSBjb29yZGluYXRlc1xuICpcbiAqIEBwYXJhbSB7SW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZX0gc3ViZGl2aXNpb25TY2hlbWUgV2hldGhlciB0aGUgY29vcmRpbmF0ZXMgYXJlIGZvciBhIHF1YWR0cmVlIG9yIG9jdHJlZVxuICogQHBhcmFtIHtOdW1iZXJ9IHN1YnRyZWVMZXZlbHMgVGhlIG51bWJlciBvZiBkaXN0aW5jdCBsZXZlbHMgd2l0aGluIHRoZSBjb29yZGluYXRlJ3Mgc3VidHJlZVxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSBsZXZlbCBvZiB0aGUgdHJlZVxuICogQHBhcmFtIHtOdW1iZXJ9IG1vcnRvbkluZGV4IFRoZSBtb3J0b24gaW5kZXggb2YgdGhlIHRpbGUuXG4gKiBAcmV0dXJucyB7SW1wbGljaXRUaWxlQ29vcmRpbmF0ZXN9IFRoZSBjb29yZGluYXRlcyBvZiB0aGUgdGlsZSB3aXRoIHRoZSBnaXZlbiBNb3J0b24gaW5kZXhcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLmZyb21Nb3J0b25JbmRleCA9IGZ1bmN0aW9uIChcbiAgc3ViZGl2aXNpb25TY2hlbWUsXG4gIHN1YnRyZWVMZXZlbHMsXG4gIGxldmVsLFxuICBtb3J0b25JbmRleFxuKSB7XG4gIHZhciBjb29yZGluYXRlc0FycmF5O1xuICBpZiAoc3ViZGl2aXNpb25TY2hlbWUgPT09IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUuT0NUUkVFKSB7XG4gICAgY29vcmRpbmF0ZXNBcnJheSA9IE1vcnRvbk9yZGVyLmRlY29kZTNEKFxuICAgICAgbW9ydG9uSW5kZXgsXG4gICAgICBzY3JhdGNoQ29vcmRpbmF0ZXNBcnJheVxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBJbXBsaWNpdFRpbGVDb29yZGluYXRlcyh7XG4gICAgICBzdWJkaXZpc2lvblNjaGVtZTogc3ViZGl2aXNpb25TY2hlbWUsXG4gICAgICBzdWJ0cmVlTGV2ZWxzOiBzdWJ0cmVlTGV2ZWxzLFxuICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgeDogY29vcmRpbmF0ZXNBcnJheVswXSxcbiAgICAgIHk6IGNvb3JkaW5hdGVzQXJyYXlbMV0sXG4gICAgICB6OiBjb29yZGluYXRlc0FycmF5WzJdLFxuICAgIH0pO1xuICB9XG5cbiAgY29vcmRpbmF0ZXNBcnJheSA9IE1vcnRvbk9yZGVyLmRlY29kZTJEKG1vcnRvbkluZGV4LCBzY3JhdGNoQ29vcmRpbmF0ZXNBcnJheSk7XG4gIHJldHVybiBuZXcgSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMoe1xuICAgIHN1YmRpdmlzaW9uU2NoZW1lOiBzdWJkaXZpc2lvblNjaGVtZSxcbiAgICBzdWJ0cmVlTGV2ZWxzOiBzdWJ0cmVlTGV2ZWxzLFxuICAgIGxldmVsOiBsZXZlbCxcbiAgICB4OiBjb29yZGluYXRlc0FycmF5WzBdLFxuICAgIHk6IGNvb3JkaW5hdGVzQXJyYXlbMV0sXG4gIH0pO1xufTtcblxuLyoqXG4gKiBHaXZlbiBhIHRpbGUgaW5kZXggYW5kIHdoZXRoZXIgdGhlIHRpbGVzZXQgaXMgYW4gb2N0cmVlL3F1YWR0cmVlLCBjb21wdXRlXG4gKiB0aGUgKGxldmVsLCB4LCB5LCBbel0pIGNvb3JkaW5hdGVzXG4gKlxuICogQHBhcmFtIHtJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lfSBzdWJkaXZpc2lvblNjaGVtZSBXaGV0aGVyIHRoZSBjb29yZGluYXRlcyBhcmUgZm9yIGEgcXVhZHRyZWUgb3Igb2N0cmVlXG4gKiBAcGFyYW0ge051bWJlcn0gc3VidHJlZUxldmVscyBUaGUgbnVtYmVyIG9mIGRpc3RpbmN0IGxldmVscyB3aXRoaW4gdGhlIGNvb3JkaW5hdGUncyBzdWJ0cmVlXG4gKiBAcGFyYW0ge051bWJlcn0gdGlsZUluZGV4IFRoZSB0aWxlJ3MgaW5kZXhcbiAqIEByZXR1cm5zIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSB0aWxlIHdpdGggdGhlIGdpdmVuIHRpbGUgaW5kZXhcbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZUNvb3JkaW5hdGVzLmZyb21UaWxlSW5kZXggPSBmdW5jdGlvbiAoXG4gIHN1YmRpdmlzaW9uU2NoZW1lLFxuICBzdWJ0cmVlTGV2ZWxzLFxuICB0aWxlSW5kZXhcbikge1xuICB2YXIgbGV2ZWw7XG4gIHZhciBsZXZlbE9mZnNldDtcbiAgdmFyIG1vcnRvbkluZGV4O1xuXG4gIGlmIChzdWJkaXZpc2lvblNjaGVtZSA9PT0gSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5PQ1RSRUUpIHtcbiAgICAvLyBOb2RlIGNvdW50IHVwIHRvIG9jdHJlZSBsZXZlbDogKDheTCAtIDEpIC8gKDgtMSlcbiAgICAvLyAoOF5MIC0gMSkgLyAoOC0xKSA8PSBYIDwgKDheKEwrMSkgLSAxKSAvICg4LTEpXG4gICAgLy8gOF5MIDw9ICg3eCArIDEpIDwgOF4oTCsxKVxuICAgIC8vIEwgPD0gbG9nOCg3eCArIDEpIDwgTCArIDFcbiAgICAvLyBMID0gZmxvb3IobG9nOCg3eCArIDEpKVxuICAgIC8vIEwgPSBmbG9vcihsb2cyKDd4ICsgMSkgLyBsb2cyKDgpKVxuICAgIC8vIEwgPSBmbG9vcihsb2cyKDd4ICsgMSkgLyAzKVxuICAgIGxldmVsID0gTWF0aC5mbG9vcihDZXNpdW1NYXRoLmxvZzIoNyAqIHRpbGVJbmRleCArIDEpIC8gMyk7XG4gICAgbGV2ZWxPZmZzZXQgPSAoKDEgPDwgKDMgKiBsZXZlbCkpIC0gMSkgLyA3O1xuICAgIG1vcnRvbkluZGV4ID0gdGlsZUluZGV4IC0gbGV2ZWxPZmZzZXQ7XG4gIH0gZWxzZSB7XG4gICAgLy8gTm9kZSBjb3VudCB1cCB0byBxdWFkdHJlZSBsZXZlbDogKDReTCAtIDEpIC8gKDQtMSlcbiAgICAvLyAoNF5MIC0gMSkgLyAoNC0xKSA8PSBYIDwgKDReKEwrMSkgLSAxKSAvICg0LTEpXG4gICAgLy8gNF5MIDw9ICgzeCArIDEpIDwgNF4oTCsxKVxuICAgIC8vIEwgPD0gbG9nNCgzeCArIDEpIDwgTCArIDFcbiAgICAvLyBMID0gZmxvb3IobG9nNCgzeCArIDEpKVxuICAgIC8vIEwgPSBmbG9vcihsb2cyKDN4ICsgMSkgLyBsb2cyKDQpKVxuICAgIC8vIEwgPSBmbG9vcihsb2cyKDN4ICsgMSkgLyAyKVxuICAgIGxldmVsID0gTWF0aC5mbG9vcihDZXNpdW1NYXRoLmxvZzIoMyAqIHRpbGVJbmRleCArIDEpIC8gMik7XG4gICAgbGV2ZWxPZmZzZXQgPSAoKDEgPDwgKDIgKiBsZXZlbCkpIC0gMSkgLyAzO1xuICAgIG1vcnRvbkluZGV4ID0gdGlsZUluZGV4IC0gbGV2ZWxPZmZzZXQ7XG4gIH1cblxuICByZXR1cm4gSW1wbGljaXRUaWxlQ29vcmRpbmF0ZXMuZnJvbU1vcnRvbkluZGV4KFxuICAgIHN1YmRpdmlzaW9uU2NoZW1lLFxuICAgIHN1YnRyZWVMZXZlbHMsXG4gICAgbGV2ZWwsXG4gICAgbW9ydG9uSW5kZXhcbiAgKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///75692\n')},46433:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ImplicitTileMetadata; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n\n\n\n/**\n * Metadata about a 3D tile, from a <code>3DTILES_metadata</code> extension\n * within a subtree from the <code>3DTILES_implicit_tiling</code> extension\n * <p>\n * This class is used in place of a {@link TileMetadata} object, as implicit\n * tile metadata is stored in a {@link MetadataTable} rather than a JSON object.\n * </p>\n * <p>\n * See the {@link https://github.com/CesiumGS/3d-tiles/tree/3d-tiles-next/extensions/3DTILES_metadata|3DTILES_metadata Extension} for 3D Tiles\n * </p>\n *\n * @param {ImplicitSubtree} options.implicitSubtree The implicit subtree the tile belongs to. It is assumed that the subtree\'s readyPromise has already resolved.\n * @param {ImplicitTileCoordinates} options.implicitCoordinates Implicit tiling coordinates for the tile.\n * @param {MetadataClass} [options.class] The class that the tile metadata conforms to.\n *\n * @alias ImplicitTileMetadata\n * @constructor\n *\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction ImplicitTileMetadata(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.implicitSubtree", options.implicitSubtree);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object(\n    "options.implicitCoordinates",\n    options.implicitCoordinates\n  );\n  //>>includeEnd(\'debug\');\n\n  this._class = options.class;\n\n  var subtree = options.implicitSubtree;\n  this._metadataTable = subtree.metadataTable;\n  this._entityId = subtree.getEntityId(options.implicitCoordinates);\n\n  var subtreeExtension = subtree.metadataExtension;\n  this._extensions = subtreeExtension.extensions;\n  this._extras = subtreeExtension.extras;\n}\n\nObject.defineProperties(ImplicitTileMetadata.prototype, {\n  /**\n   * The class that properties conform to.\n   *\n   * @memberof ImplicitTileMetadata.prototype\n   * @type {MetadataClass}\n   * @readonly\n   */\n  class: {\n    get: function () {\n      return this._class;\n    },\n  },\n\n  /**\n   * Extras in the JSON object.\n   *\n   * @memberof ImplicitTileMetadata.prototype\n   * @type {*}\n   * @readonly\n   */\n  extras: {\n    get: function () {\n      return this._extras;\n    },\n  },\n\n  /**\n   * Extensions in the JSON object.\n   *\n   * @memberof ImplicitTileMetadata.prototype\n   * @type {Object}\n   * @readonly\n   */\n  extensions: {\n    get: function () {\n      return this._extensions;\n    },\n  },\n});\n\n/**\n * Returns whether the tile has this property.\n *\n * @param {String} propertyId The case-sensitive ID of the property.\n * @returns {Boolean} Whether the tile has this property.\n * @private\n */\nImplicitTileMetadata.prototype.hasProperty = function (propertyId) {\n  return this._metadataTable.hasProperty(propertyId);\n};\n\n/**\n * Returns whether the tile has a property with the given semantic.\n *\n * @param {String} semantic The case-sensitive semantic of the property.\n * @returns {Boolean} Whether the tile has a property with the given semantic.\n * @private\n */\nImplicitTileMetadata.prototype.hasPropertyBySemantic = function (semantic) {\n  return this._metadataTable.hasPropertyBySemantic(semantic);\n};\n\n/**\n * Returns an array of property IDs.\n *\n * @param {String[]} [results] An array into which to store the results.\n * @returns {String[]} The property IDs.\n * @private\n */\nImplicitTileMetadata.prototype.getPropertyIds = function (results) {\n  return this._metadataTable.getPropertyIds(results);\n};\n\n/**\n * Returns a copy of the value of the property with the given ID.\n * <p>\n * If the property is normalized the normalized value is returned.\n * </p>\n *\n * @param {String} propertyId The case-sensitive ID of the property.\n * @returns {*} The value of the property or <code>undefined</code> if the tile does not have this property.\n * @private\n */\nImplicitTileMetadata.prototype.getProperty = function (propertyId) {\n  return this._metadataTable.getProperty(this._entityId, propertyId);\n};\n\n/**\n * Sets the value of the property with the given ID.\n * <p>\n * If the property is normalized a normalized value must be provided to this function.\n * </p>\n *\n * @param {String} propertyId The case-sensitive ID of the property.\n * @param {*} value The value of the property that will be copied.\n * @returns {Boolean} <code>true</code> if the property was set, <code>false</code> otherwise.\n * @private\n */\nImplicitTileMetadata.prototype.setProperty = function (propertyId, value) {\n  return this._metadataTable.setProperty(this._entityId, propertyId, value);\n};\n\n/**\n * Returns a copy of the value of the property with the given semantic.\n *\n * @param {String} semantic The case-sensitive semantic of the property.\n * @returns {*} The value of the property or <code>undefined</code> if the tile does not have this semantic.\n * @private\n */\nImplicitTileMetadata.prototype.getPropertyBySemantic = function (semantic) {\n  return this._metadataTable.getPropertyBySemantic(this._entityId, semantic);\n};\n\n/**\n * Sets the value of the property with the given semantic.\n *\n * @param {String} semantic The case-sensitive semantic of the property.\n * @param {*} value The value of the property that will be copied.\n * @returns {Boolean} <code>true</code> if the property was set, <code>false</code> otherwise.\n * @private\n */\nImplicitTileMetadata.prototype.setPropertyBySemantic = function (\n  semantic,\n  value\n) {\n  return this._metadataTable.setPropertyBySemantic(\n    this._entityId,\n    semantic,\n    value\n  );\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY0MzMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFDYzs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsb0JBQW9CO0FBQ3pELGlDQUFpQyxxQkFBcUI7QUFDdEQ7QUFDQTtBQUNBLFlBQVksc0hBQXNIO0FBQ2xJO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QixXQUFXLHlCQUF5QjtBQUNwQyxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmLFlBQVksMEVBQVksVUFBVSxnR0FBeUI7O0FBRTNEO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLEdBQUc7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxHQUFHO0FBQ2QsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsR0FBRztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLEdBQUc7QUFDZCxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0ltcGxpY2l0VGlsZU1ldGFkYXRhLmpzPzQyNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IGEgM0QgdGlsZSwgZnJvbSBhIDxjb2RlPjNEVElMRVNfbWV0YWRhdGE8L2NvZGU+IGV4dGVuc2lvblxuICogd2l0aGluIGEgc3VidHJlZSBmcm9tIHRoZSA8Y29kZT4zRFRJTEVTX2ltcGxpY2l0X3RpbGluZzwvY29kZT4gZXh0ZW5zaW9uXG4gKiA8cD5cbiAqIFRoaXMgY2xhc3MgaXMgdXNlZCBpbiBwbGFjZSBvZiBhIHtAbGluayBUaWxlTWV0YWRhdGF9IG9iamVjdCwgYXMgaW1wbGljaXRcbiAqIHRpbGUgbWV0YWRhdGEgaXMgc3RvcmVkIGluIGEge0BsaW5rIE1ldGFkYXRhVGFibGV9IHJhdGhlciB0aGFuIGEgSlNPTiBvYmplY3QuXG4gKiA8L3A+XG4gKiA8cD5cbiAqIFNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy8zZC10aWxlcy90cmVlLzNkLXRpbGVzLW5leHQvZXh0ZW5zaW9ucy8zRFRJTEVTX21ldGFkYXRhfDNEVElMRVNfbWV0YWRhdGEgRXh0ZW5zaW9ufSBmb3IgM0QgVGlsZXNcbiAqIDwvcD5cbiAqXG4gKiBAcGFyYW0ge0ltcGxpY2l0U3VidHJlZX0gb3B0aW9ucy5pbXBsaWNpdFN1YnRyZWUgVGhlIGltcGxpY2l0IHN1YnRyZWUgdGhlIHRpbGUgYmVsb25ncyB0by4gSXQgaXMgYXNzdW1lZCB0aGF0IHRoZSBzdWJ0cmVlJ3MgcmVhZHlQcm9taXNlIGhhcyBhbHJlYWR5IHJlc29sdmVkLlxuICogQHBhcmFtIHtJbXBsaWNpdFRpbGVDb29yZGluYXRlc30gb3B0aW9ucy5pbXBsaWNpdENvb3JkaW5hdGVzIEltcGxpY2l0IHRpbGluZyBjb29yZGluYXRlcyBmb3IgdGhlIHRpbGUuXG4gKiBAcGFyYW0ge01ldGFkYXRhQ2xhc3N9IFtvcHRpb25zLmNsYXNzXSBUaGUgY2xhc3MgdGhhdCB0aGUgdGlsZSBtZXRhZGF0YSBjb25mb3JtcyB0by5cbiAqXG4gKiBAYWxpYXMgSW1wbGljaXRUaWxlTWV0YWRhdGFcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcml2YXRlXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgZmVhdHVyZSBpcyB1c2luZyBwYXJ0IG9mIHRoZSAzRCBUaWxlcyBzcGVjIHRoYXQgaXMgbm90IGZpbmFsIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IENlc2l1bSdzIHN0YW5kYXJkIGRlcHJlY2F0aW9uIHBvbGljeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW1wbGljaXRUaWxlTWV0YWRhdGEob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmltcGxpY2l0U3VidHJlZVwiLCBvcHRpb25zLmltcGxpY2l0U3VidHJlZSk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXG4gICAgXCJvcHRpb25zLmltcGxpY2l0Q29vcmRpbmF0ZXNcIixcbiAgICBvcHRpb25zLmltcGxpY2l0Q29vcmRpbmF0ZXNcbiAgKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdGhpcy5fY2xhc3MgPSBvcHRpb25zLmNsYXNzO1xuXG4gIHZhciBzdWJ0cmVlID0gb3B0aW9ucy5pbXBsaWNpdFN1YnRyZWU7XG4gIHRoaXMuX21ldGFkYXRhVGFibGUgPSBzdWJ0cmVlLm1ldGFkYXRhVGFibGU7XG4gIHRoaXMuX2VudGl0eUlkID0gc3VidHJlZS5nZXRFbnRpdHlJZChvcHRpb25zLmltcGxpY2l0Q29vcmRpbmF0ZXMpO1xuXG4gIHZhciBzdWJ0cmVlRXh0ZW5zaW9uID0gc3VidHJlZS5tZXRhZGF0YUV4dGVuc2lvbjtcbiAgdGhpcy5fZXh0ZW5zaW9ucyA9IHN1YnRyZWVFeHRlbnNpb24uZXh0ZW5zaW9ucztcbiAgdGhpcy5fZXh0cmFzID0gc3VidHJlZUV4dGVuc2lvbi5leHRyYXM7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEltcGxpY2l0VGlsZU1ldGFkYXRhLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogVGhlIGNsYXNzIHRoYXQgcHJvcGVydGllcyBjb25mb3JtIHRvLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgSW1wbGljaXRUaWxlTWV0YWRhdGEucHJvdG90eXBlXG4gICAqIEB0eXBlIHtNZXRhZGF0YUNsYXNzfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGNsYXNzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3M7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRXh0cmFzIGluIHRoZSBKU09OIG9iamVjdC5cbiAgICpcbiAgICogQG1lbWJlcm9mIEltcGxpY2l0VGlsZU1ldGFkYXRhLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Kn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBleHRyYXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9leHRyYXM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRXh0ZW5zaW9ucyBpbiB0aGUgSlNPTiBvYmplY3QuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBJbXBsaWNpdFRpbGVNZXRhZGF0YS5wcm90b3R5cGVcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBleHRlbnNpb25zOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXh0ZW5zaW9ucztcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB0aWxlIGhhcyB0aGlzIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUlkIFRoZSBjYXNlLXNlbnNpdGl2ZSBJRCBvZiB0aGUgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gV2hldGhlciB0aGUgdGlsZSBoYXMgdGhpcyBwcm9wZXJ0eS5cbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZU1ldGFkYXRhLnByb3RvdHlwZS5oYXNQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0eUlkKSB7XG4gIHJldHVybiB0aGlzLl9tZXRhZGF0YVRhYmxlLmhhc1Byb3BlcnR5KHByb3BlcnR5SWQpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHRpbGUgaGFzIGEgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gc2VtYW50aWMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlbWFudGljIFRoZSBjYXNlLXNlbnNpdGl2ZSBzZW1hbnRpYyBvZiB0aGUgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gV2hldGhlciB0aGUgdGlsZSBoYXMgYSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBzZW1hbnRpYy5cbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZU1ldGFkYXRhLnByb3RvdHlwZS5oYXNQcm9wZXJ0eUJ5U2VtYW50aWMgPSBmdW5jdGlvbiAoc2VtYW50aWMpIHtcbiAgcmV0dXJuIHRoaXMuX21ldGFkYXRhVGFibGUuaGFzUHJvcGVydHlCeVNlbWFudGljKHNlbWFudGljKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBJRHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmdbXX0gW3Jlc3VsdHNdIEFuIGFycmF5IGludG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdHMuXG4gKiBAcmV0dXJucyB7U3RyaW5nW119IFRoZSBwcm9wZXJ0eSBJRHMuXG4gKiBAcHJpdmF0ZVxuICovXG5JbXBsaWNpdFRpbGVNZXRhZGF0YS5wcm90b3R5cGUuZ2V0UHJvcGVydHlJZHMgPSBmdW5jdGlvbiAocmVzdWx0cykge1xuICByZXR1cm4gdGhpcy5fbWV0YWRhdGFUYWJsZS5nZXRQcm9wZXJ0eUlkcyhyZXN1bHRzKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBJRC5cbiAqIDxwPlxuICogSWYgdGhlIHByb3BlcnR5IGlzIG5vcm1hbGl6ZWQgdGhlIG5vcm1hbGl6ZWQgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKiA8L3A+XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgVGhlIGNhc2Utc2Vuc2l0aXZlIElEIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHsqfSBUaGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IG9yIDxjb2RlPnVuZGVmaW5lZDwvY29kZT4gaWYgdGhlIHRpbGUgZG9lcyBub3QgaGF2ZSB0aGlzIHByb3BlcnR5LlxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRUaWxlTWV0YWRhdGEucHJvdG90eXBlLmdldFByb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5SWQpIHtcbiAgcmV0dXJuIHRoaXMuX21ldGFkYXRhVGFibGUuZ2V0UHJvcGVydHkodGhpcy5fZW50aXR5SWQsIHByb3BlcnR5SWQpO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gSUQuXG4gKiA8cD5cbiAqIElmIHRoZSBwcm9wZXJ0eSBpcyBub3JtYWxpemVkIGEgbm9ybWFsaXplZCB2YWx1ZSBtdXN0IGJlIHByb3ZpZGVkIHRvIHRoaXMgZnVuY3Rpb24uXG4gKiA8L3A+XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgVGhlIGNhc2Utc2Vuc2l0aXZlIElEIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB0aGF0IHdpbGwgYmUgY29waWVkLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZSBwcm9wZXJ0eSB3YXMgc2V0LCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRUaWxlTWV0YWRhdGEucHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5SWQsIHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLl9tZXRhZGF0YVRhYmxlLnNldFByb3BlcnR5KHRoaXMuX2VudGl0eUlkLCBwcm9wZXJ0eUlkLCB2YWx1ZSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gc2VtYW50aWMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlbWFudGljIFRoZSBjYXNlLXNlbnNpdGl2ZSBzZW1hbnRpYyBvZiB0aGUgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIHRoZSB0aWxlIGRvZXMgbm90IGhhdmUgdGhpcyBzZW1hbnRpYy5cbiAqIEBwcml2YXRlXG4gKi9cbkltcGxpY2l0VGlsZU1ldGFkYXRhLnByb3RvdHlwZS5nZXRQcm9wZXJ0eUJ5U2VtYW50aWMgPSBmdW5jdGlvbiAoc2VtYW50aWMpIHtcbiAgcmV0dXJuIHRoaXMuX21ldGFkYXRhVGFibGUuZ2V0UHJvcGVydHlCeVNlbWFudGljKHRoaXMuX2VudGl0eUlkLCBzZW1hbnRpYyk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBzZW1hbnRpYy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VtYW50aWMgVGhlIGNhc2Utc2Vuc2l0aXZlIHNlbWFudGljIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB0aGF0IHdpbGwgYmUgY29waWVkLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZSBwcm9wZXJ0eSB3YXMgc2V0LCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICogQHByaXZhdGVcbiAqL1xuSW1wbGljaXRUaWxlTWV0YWRhdGEucHJvdG90eXBlLnNldFByb3BlcnR5QnlTZW1hbnRpYyA9IGZ1bmN0aW9uIChcbiAgc2VtYW50aWMsXG4gIHZhbHVlXG4pIHtcbiAgcmV0dXJuIHRoaXMuX21ldGFkYXRhVGFibGUuc2V0UHJvcGVydHlCeVNlbWFudGljKFxuICAgIHRoaXMuX2VudGl0eUlkLFxuICAgIHNlbWFudGljLFxuICAgIHZhbHVlXG4gICk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///46433\n')},14255:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ImplicitTileset; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_clone_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(83856);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68985);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9407);\n/* harmony import */ var _hasExtension_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(81326);\n/* harmony import */ var _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(10149);\n\n\n\n\n\n\n\n\n/**\n * An ImplicitTileset is a simple struct that stores information about the\n * structure of a single implicit tileset. This includes template URIs for\n * locating resources, details from the implicit root tile (bounding volume,\n * geometricError, etc.), and details about the subtrees (e.g. subtreeLevels,\n * subdivisionScheme).\n *\n * @alias ImplicitTileset\n * @constructor\n *\n * @param {Resource} baseResource The base resource for the tileset\n * @param {Object} tileJson The JSON header of the tile with the 3DTILES_implicit_tiling extension.\n * @param {MetadataSchema} [metadataSchema] The metadata schema containing the implicit tile metadata class.\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction ImplicitTileset(\n  baseResource,\n  tileJson,\n  metadataSchema\n) {\n  var extension = tileJson.extensions["3DTILES_implicit_tiling"];\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object(\n    \'tileJson.extensions["3DTILES_implicit_tiling"]\',\n    extension\n  );\n  //>>includeEnd(\'debug\');\n\n  /**\n   * The base resource for the tileset. This is stored here as it is needed\n   * later when expanding Implicit3DTileContents so tile URLs are relative\n   * to the tileset, not the subtree file.\n   *\n   * @type {Resource}\n   * @readonly\n   * @private\n   */\n  this.baseResource = baseResource;\n\n  /**\n   * The geometric error of the root tile\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.geometricError = tileJson.geometricError;\n\n  /**\n   * The metadata schema containing the implicit tile metadata class.\n   *\n   * @type {MetadataSchema|undefined}\n   * @readonly\n   * @private\n   */\n  this.metadataSchema = metadataSchema;\n\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(tileJson.boundingVolume.box) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(tileJson.boundingVolume.region) &&\n    !(0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(tileJson.boundingVolume, "3DTILES_bounding_volume_S2")\n  ) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "Only box, region and 3DTILES_bounding_volume_S2 are supported for implicit tiling"\n    );\n  }\n\n  /**\n   * The JSON representation of a bounding volume. This is either a box or a\n   * region.\n   *\n   * @type {Object}\n   * @readonly\n   * @private\n   */\n  this.boundingVolume = tileJson.boundingVolume;\n\n  /**\n   * The refine strategy as a string, either \'ADD\' or \'REPLACE\'\n   *\n   * @type {String}\n   * @readonly\n   * @private\n   */\n  this.refine = tileJson.refine;\n\n  /**\n   * Template URI for the subtree resources, e.g.\n   * <code>https://example.com/{level}/{x}/{y}.subtree</code>\n   *\n   * @type {Resource}\n   * @readonly\n   * @private\n   */\n\n  this.subtreeUriTemplate = new _Core_Resource_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z({ url: extension.subtrees.uri });\n\n  /**\n   * Template URIs for locating content resources, e.g.\n   * <code>https://example.com/{level}/{x}/{y}.b3dm</code>.\n   * <p>\n   * This is an array to support <code>3DTILES_multiple_contents</code>\n   * </p>\n   *\n   * @type {Resource[]}\n   * @readonly\n   * @private\n   */\n  this.contentUriTemplates = [];\n\n  /**\n   * Store a copy of the content headers, so properties such as\n   * <code>extras</code> or <code>extensions</code> are preserved when\n   * {@link Cesium3DTile}s are created for each tile.\n   * <p>\n   * This is an array to support <code>3DTILES_multiple_contents</code>\n   * </p>\n   *\n   * @type {Object[]}\n   * @readonly\n   * @private\n   */\n  this.contentHeaders = [];\n\n  var contentHeaders = gatherContentHeaders(tileJson);\n  for (var i = 0; i < contentHeaders.length; i++) {\n    var contentHeader = contentHeaders[i];\n    this.contentHeaders.push((0,_Core_clone_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(contentHeader, true));\n    var contentResource = new _Core_Resource_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z({ url: contentHeader.uri });\n    this.contentUriTemplates.push(contentResource);\n  }\n\n  /**\n   * The maximum number of contents as well as content availability bitstreams.\n   * This is used for loop bounds when checking content availability.\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.contentCount = this.contentHeaders.length;\n\n  /**\n   * Stores a copy of the root implicit tile\'s JSON header. This is used\n   * as a template for creating {@link Cesium3DTile}s. The following properties\n   * are removed:\n   *\n   * <ul>\n   * <li><code>tile.extensions["3DTILES_implicit_tiling"]</code> to prevent infinite loops of implicit tiling</li>\n   * <li><code>tile.content</code> since this is handled separately</li>\n   * <li><code>tile.extensions["3DTILES_multiple_contents"]</code>, again\n   *  because contents are handled separately</li>\n   * </ul>\n   *\n   * @type {Object}\n   * @readonly\n   * @private\n   */\n  this.tileHeader = makeTileHeaderTemplate(tileJson);\n\n  /**\n   * The subdivision scheme for this implicit tileset; either OCTREE or QUADTREE\n   *\n   * @type {ImplicitSubdivisionScheme}\n   * @readonly\n   * @private\n   */\n  this.subdivisionScheme =\n    _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z[extension.subdivisionScheme];\n\n  /**\n   * The branching factor for this tileset. Either 4 for quadtrees or 8 for\n   * octrees.\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.branchingFactor = _ImplicitSubdivisionScheme_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getBranchingFactor */ .Z.getBranchingFactor(\n    this.subdivisionScheme\n  );\n\n  /**\n   * How many distinct levels within each subtree. For example, a quadtree\n   * with subtreeLevels = 2 will have 5 nodes per quadtree (1 root + 4 children)\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.subtreeLevels = extension.subtreeLevels;\n\n  /**\n   * The deepest level of any available tile in the entire tileset.\n   *\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  this.maximumLevel = extension.maximumLevel;\n}\n\n/**\n * Gather JSON headers for all contents in the tile.\n * This handles both regular tiles and tiles with the\n * `3DTILES_multiple_contents` extension\n *\n * @param {Object} tileJson The JSON header of the tile with the 3DTILES_implicit_tiling extension.\n * @return {Object[]} An array of JSON headers for the contents of each tile\n * @private\n */\nfunction gatherContentHeaders(tileJson) {\n  if ((0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(tileJson, "3DTILES_multiple_contents")) {\n    return tileJson.extensions["3DTILES_multiple_contents"].content;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(tileJson.content)) {\n    return [tileJson.content];\n  }\n\n  return [];\n}\n\nfunction makeTileHeaderTemplate(tileJson) {\n  var template = (0,_Core_clone_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(tileJson, true);\n\n  // remove the implicit tiling extension to prevent infinite loops\n  delete template.extensions["3DTILES_implicit_tiling"];\n\n  // content is handled separately, so remove content-related properties\n  delete template.content;\n  delete template.extensions["3DTILES_multiple_contents"];\n\n  // if there are no other extensions, remove the extensions property to\n  // keep each tile simple\n  if (Object.keys(template.extensions).length === 0) {\n    delete template.extensions;\n  }\n\n  return template;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQyNTUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUNBO0FBQ0k7QUFDRTtBQUNRO0FBQ047QUFDMEI7O0FBRXZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsUUFBUTtBQUNuQixXQUFXLGdCQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMkZBQW1CO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUsscUVBQU87QUFDWixLQUFLLHFFQUFPO0FBQ1osS0FBSyxxRUFBWTtBQUNqQjtBQUNBLGNBQWMsc0VBQVk7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRTtBQUM5QztBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDLGtFQUFRLEdBQUcsNkJBQTZCOztBQUV4RTtBQUNBO0FBQ0EsZ0NBQWdDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG1CQUFtQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQiwyQkFBMkI7QUFDN0M7QUFDQSw2QkFBNkIsbUVBQUs7QUFDbEMsOEJBQThCLGtFQUFRLEdBQUcsd0JBQXdCO0FBQ2pFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4RUFBeUI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvSEFBNEM7QUFDckU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFFQUFZO0FBQ2xCO0FBQ0E7O0FBRUEsTUFBTSxxRUFBTztBQUNiO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixtRUFBSzs7QUFFdEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0ltcGxpY2l0VGlsZXNldC5qcz84YzBhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGNsb25lIGZyb20gXCIuLi9Db3JlL2Nsb25lLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2UgZnJvbSBcIi4uL0NvcmUvUmVzb3VyY2UuanNcIjtcbmltcG9ydCBSdW50aW1lRXJyb3IgZnJvbSBcIi4uL0NvcmUvUnVudGltZUVycm9yLmpzXCI7XG5pbXBvcnQgaGFzRXh0ZW5zaW9uIGZyb20gXCIuL2hhc0V4dGVuc2lvbi5qc1wiO1xuaW1wb3J0IEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWUgZnJvbSBcIi4vSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5qc1wiO1xuXG4vKipcbiAqIEFuIEltcGxpY2l0VGlsZXNldCBpcyBhIHNpbXBsZSBzdHJ1Y3QgdGhhdCBzdG9yZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlXG4gKiBzdHJ1Y3R1cmUgb2YgYSBzaW5nbGUgaW1wbGljaXQgdGlsZXNldC4gVGhpcyBpbmNsdWRlcyB0ZW1wbGF0ZSBVUklzIGZvclxuICogbG9jYXRpbmcgcmVzb3VyY2VzLCBkZXRhaWxzIGZyb20gdGhlIGltcGxpY2l0IHJvb3QgdGlsZSAoYm91bmRpbmcgdm9sdW1lLFxuICogZ2VvbWV0cmljRXJyb3IsIGV0Yy4pLCBhbmQgZGV0YWlscyBhYm91dCB0aGUgc3VidHJlZXMgKGUuZy4gc3VidHJlZUxldmVscyxcbiAqIHN1YmRpdmlzaW9uU2NoZW1lKS5cbiAqXG4gKiBAYWxpYXMgSW1wbGljaXRUaWxlc2V0XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBiYXNlUmVzb3VyY2UgVGhlIGJhc2UgcmVzb3VyY2UgZm9yIHRoZSB0aWxlc2V0XG4gKiBAcGFyYW0ge09iamVjdH0gdGlsZUpzb24gVGhlIEpTT04gaGVhZGVyIG9mIHRoZSB0aWxlIHdpdGggdGhlIDNEVElMRVNfaW1wbGljaXRfdGlsaW5nIGV4dGVuc2lvbi5cbiAqIEBwYXJhbSB7TWV0YWRhdGFTY2hlbWF9IFttZXRhZGF0YVNjaGVtYV0gVGhlIG1ldGFkYXRhIHNjaGVtYSBjb250YWluaW5nIHRoZSBpbXBsaWNpdCB0aWxlIG1ldGFkYXRhIGNsYXNzLlxuICogQHByaXZhdGVcbiAqIEBleHBlcmltZW50YWwgVGhpcyBmZWF0dXJlIGlzIHVzaW5nIHBhcnQgb2YgdGhlIDNEIFRpbGVzIHNwZWMgdGhhdCBpcyBub3QgZmluYWwgYW5kIGlzIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgQ2VzaXVtJ3Mgc3RhbmRhcmQgZGVwcmVjYXRpb24gcG9saWN5LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbXBsaWNpdFRpbGVzZXQoXG4gIGJhc2VSZXNvdXJjZSxcbiAgdGlsZUpzb24sXG4gIG1ldGFkYXRhU2NoZW1hXG4pIHtcbiAgdmFyIGV4dGVuc2lvbiA9IHRpbGVKc29uLmV4dGVuc2lvbnNbXCIzRFRJTEVTX2ltcGxpY2l0X3RpbGluZ1wiXTtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcbiAgICAndGlsZUpzb24uZXh0ZW5zaW9uc1tcIjNEVElMRVNfaW1wbGljaXRfdGlsaW5nXCJdJyxcbiAgICBleHRlbnNpb25cbiAgKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIHJlc291cmNlIGZvciB0aGUgdGlsZXNldC4gVGhpcyBpcyBzdG9yZWQgaGVyZSBhcyBpdCBpcyBuZWVkZWRcbiAgICogbGF0ZXIgd2hlbiBleHBhbmRpbmcgSW1wbGljaXQzRFRpbGVDb250ZW50cyBzbyB0aWxlIFVSTHMgYXJlIHJlbGF0aXZlXG4gICAqIHRvIHRoZSB0aWxlc2V0LCBub3QgdGhlIHN1YnRyZWUgZmlsZS5cbiAgICpcbiAgICogQHR5cGUge1Jlc291cmNlfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuYmFzZVJlc291cmNlID0gYmFzZVJlc291cmNlO1xuXG4gIC8qKlxuICAgKiBUaGUgZ2VvbWV0cmljIGVycm9yIG9mIHRoZSByb290IHRpbGVcbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmdlb21ldHJpY0Vycm9yID0gdGlsZUpzb24uZ2VvbWV0cmljRXJyb3I7XG5cbiAgLyoqXG4gICAqIFRoZSBtZXRhZGF0YSBzY2hlbWEgY29udGFpbmluZyB0aGUgaW1wbGljaXQgdGlsZSBtZXRhZGF0YSBjbGFzcy5cbiAgICpcbiAgICogQHR5cGUge01ldGFkYXRhU2NoZW1hfHVuZGVmaW5lZH1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLm1ldGFkYXRhU2NoZW1hID0gbWV0YWRhdGFTY2hlbWE7XG5cbiAgaWYgKFxuICAgICFkZWZpbmVkKHRpbGVKc29uLmJvdW5kaW5nVm9sdW1lLmJveCkgJiZcbiAgICAhZGVmaW5lZCh0aWxlSnNvbi5ib3VuZGluZ1ZvbHVtZS5yZWdpb24pICYmXG4gICAgIWhhc0V4dGVuc2lvbih0aWxlSnNvbi5ib3VuZGluZ1ZvbHVtZSwgXCIzRFRJTEVTX2JvdW5kaW5nX3ZvbHVtZV9TMlwiKVxuICApIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgXCJPbmx5IGJveCwgcmVnaW9uIGFuZCAzRFRJTEVTX2JvdW5kaW5nX3ZvbHVtZV9TMiBhcmUgc3VwcG9ydGVkIGZvciBpbXBsaWNpdCB0aWxpbmdcIlxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSBib3VuZGluZyB2b2x1bWUuIFRoaXMgaXMgZWl0aGVyIGEgYm94IG9yIGFcbiAgICogcmVnaW9uLlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuYm91bmRpbmdWb2x1bWUgPSB0aWxlSnNvbi5ib3VuZGluZ1ZvbHVtZTtcblxuICAvKipcbiAgICogVGhlIHJlZmluZSBzdHJhdGVneSBhcyBhIHN0cmluZywgZWl0aGVyICdBREQnIG9yICdSRVBMQUNFJ1xuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMucmVmaW5lID0gdGlsZUpzb24ucmVmaW5lO1xuXG4gIC8qKlxuICAgKiBUZW1wbGF0ZSBVUkkgZm9yIHRoZSBzdWJ0cmVlIHJlc291cmNlcywgZS5nLlxuICAgKiA8Y29kZT5odHRwczovL2V4YW1wbGUuY29tL3tsZXZlbH0ve3h9L3t5fS5zdWJ0cmVlPC9jb2RlPlxuICAgKlxuICAgKiBAdHlwZSB7UmVzb3VyY2V9XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICB0aGlzLnN1YnRyZWVVcmlUZW1wbGF0ZSA9IG5ldyBSZXNvdXJjZSh7IHVybDogZXh0ZW5zaW9uLnN1YnRyZWVzLnVyaSB9KTtcblxuICAvKipcbiAgICogVGVtcGxhdGUgVVJJcyBmb3IgbG9jYXRpbmcgY29udGVudCByZXNvdXJjZXMsIGUuZy5cbiAgICogPGNvZGU+aHR0cHM6Ly9leGFtcGxlLmNvbS97bGV2ZWx9L3t4fS97eX0uYjNkbTwvY29kZT4uXG4gICAqIDxwPlxuICAgKiBUaGlzIGlzIGFuIGFycmF5IHRvIHN1cHBvcnQgPGNvZGU+M0RUSUxFU19tdWx0aXBsZV9jb250ZW50czwvY29kZT5cbiAgICogPC9wPlxuICAgKlxuICAgKiBAdHlwZSB7UmVzb3VyY2VbXX1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmNvbnRlbnRVcmlUZW1wbGF0ZXMgPSBbXTtcblxuICAvKipcbiAgICogU3RvcmUgYSBjb3B5IG9mIHRoZSBjb250ZW50IGhlYWRlcnMsIHNvIHByb3BlcnRpZXMgc3VjaCBhc1xuICAgKiA8Y29kZT5leHRyYXM8L2NvZGU+IG9yIDxjb2RlPmV4dGVuc2lvbnM8L2NvZGU+IGFyZSBwcmVzZXJ2ZWQgd2hlblxuICAgKiB7QGxpbmsgQ2VzaXVtM0RUaWxlfXMgYXJlIGNyZWF0ZWQgZm9yIGVhY2ggdGlsZS5cbiAgICogPHA+XG4gICAqIFRoaXMgaXMgYW4gYXJyYXkgdG8gc3VwcG9ydCA8Y29kZT4zRFRJTEVTX211bHRpcGxlX2NvbnRlbnRzPC9jb2RlPlxuICAgKiA8L3A+XG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3RbXX1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmNvbnRlbnRIZWFkZXJzID0gW107XG5cbiAgdmFyIGNvbnRlbnRIZWFkZXJzID0gZ2F0aGVyQ29udGVudEhlYWRlcnModGlsZUpzb24pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRIZWFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNvbnRlbnRIZWFkZXIgPSBjb250ZW50SGVhZGVyc1tpXTtcbiAgICB0aGlzLmNvbnRlbnRIZWFkZXJzLnB1c2goY2xvbmUoY29udGVudEhlYWRlciwgdHJ1ZSkpO1xuICAgIHZhciBjb250ZW50UmVzb3VyY2UgPSBuZXcgUmVzb3VyY2UoeyB1cmw6IGNvbnRlbnRIZWFkZXIudXJpIH0pO1xuICAgIHRoaXMuY29udGVudFVyaVRlbXBsYXRlcy5wdXNoKGNvbnRlbnRSZXNvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIGNvbnRlbnRzIGFzIHdlbGwgYXMgY29udGVudCBhdmFpbGFiaWxpdHkgYml0c3RyZWFtcy5cbiAgICogVGhpcyBpcyB1c2VkIGZvciBsb29wIGJvdW5kcyB3aGVuIGNoZWNraW5nIGNvbnRlbnQgYXZhaWxhYmlsaXR5LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuY29udGVudENvdW50ID0gdGhpcy5jb250ZW50SGVhZGVycy5sZW5ndGg7XG5cbiAgLyoqXG4gICAqIFN0b3JlcyBhIGNvcHkgb2YgdGhlIHJvb3QgaW1wbGljaXQgdGlsZSdzIEpTT04gaGVhZGVyLiBUaGlzIGlzIHVzZWRcbiAgICogYXMgYSB0ZW1wbGF0ZSBmb3IgY3JlYXRpbmcge0BsaW5rIENlc2l1bTNEVGlsZX1zLiBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXNcbiAgICogYXJlIHJlbW92ZWQ6XG4gICAqXG4gICAqIDx1bD5cbiAgICogPGxpPjxjb2RlPnRpbGUuZXh0ZW5zaW9uc1tcIjNEVElMRVNfaW1wbGljaXRfdGlsaW5nXCJdPC9jb2RlPiB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzIG9mIGltcGxpY2l0IHRpbGluZzwvbGk+XG4gICAqIDxsaT48Y29kZT50aWxlLmNvbnRlbnQ8L2NvZGU+IHNpbmNlIHRoaXMgaXMgaGFuZGxlZCBzZXBhcmF0ZWx5PC9saT5cbiAgICogPGxpPjxjb2RlPnRpbGUuZXh0ZW5zaW9uc1tcIjNEVElMRVNfbXVsdGlwbGVfY29udGVudHNcIl08L2NvZGU+LCBhZ2FpblxuICAgKiAgYmVjYXVzZSBjb250ZW50cyBhcmUgaGFuZGxlZCBzZXBhcmF0ZWx5PC9saT5cbiAgICogPC91bD5cbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnRpbGVIZWFkZXIgPSBtYWtlVGlsZUhlYWRlclRlbXBsYXRlKHRpbGVKc29uKTtcblxuICAvKipcbiAgICogVGhlIHN1YmRpdmlzaW9uIHNjaGVtZSBmb3IgdGhpcyBpbXBsaWNpdCB0aWxlc2V0OyBlaXRoZXIgT0NUUkVFIG9yIFFVQURUUkVFXG4gICAqXG4gICAqIEB0eXBlIHtJbXBsaWNpdFN1YmRpdmlzaW9uU2NoZW1lfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuc3ViZGl2aXNpb25TY2hlbWUgPVxuICAgIEltcGxpY2l0U3ViZGl2aXNpb25TY2hlbWVbZXh0ZW5zaW9uLnN1YmRpdmlzaW9uU2NoZW1lXTtcblxuICAvKipcbiAgICogVGhlIGJyYW5jaGluZyBmYWN0b3IgZm9yIHRoaXMgdGlsZXNldC4gRWl0aGVyIDQgZm9yIHF1YWR0cmVlcyBvciA4IGZvclxuICAgKiBvY3RyZWVzLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuYnJhbmNoaW5nRmFjdG9yID0gSW1wbGljaXRTdWJkaXZpc2lvblNjaGVtZS5nZXRCcmFuY2hpbmdGYWN0b3IoXG4gICAgdGhpcy5zdWJkaXZpc2lvblNjaGVtZVxuICApO1xuXG4gIC8qKlxuICAgKiBIb3cgbWFueSBkaXN0aW5jdCBsZXZlbHMgd2l0aGluIGVhY2ggc3VidHJlZS4gRm9yIGV4YW1wbGUsIGEgcXVhZHRyZWVcbiAgICogd2l0aCBzdWJ0cmVlTGV2ZWxzID0gMiB3aWxsIGhhdmUgNSBub2RlcyBwZXIgcXVhZHRyZWUgKDEgcm9vdCArIDQgY2hpbGRyZW4pXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5zdWJ0cmVlTGV2ZWxzID0gZXh0ZW5zaW9uLnN1YnRyZWVMZXZlbHM7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWVwZXN0IGxldmVsIG9mIGFueSBhdmFpbGFibGUgdGlsZSBpbiB0aGUgZW50aXJlIHRpbGVzZXQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5tYXhpbXVtTGV2ZWwgPSBleHRlbnNpb24ubWF4aW11bUxldmVsO1xufVxuXG4vKipcbiAqIEdhdGhlciBKU09OIGhlYWRlcnMgZm9yIGFsbCBjb250ZW50cyBpbiB0aGUgdGlsZS5cbiAqIFRoaXMgaGFuZGxlcyBib3RoIHJlZ3VsYXIgdGlsZXMgYW5kIHRpbGVzIHdpdGggdGhlXG4gKiBgM0RUSUxFU19tdWx0aXBsZV9jb250ZW50c2AgZXh0ZW5zaW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRpbGVKc29uIFRoZSBKU09OIGhlYWRlciBvZiB0aGUgdGlsZSB3aXRoIHRoZSAzRFRJTEVTX2ltcGxpY2l0X3RpbGluZyBleHRlbnNpb24uXG4gKiBAcmV0dXJuIHtPYmplY3RbXX0gQW4gYXJyYXkgb2YgSlNPTiBoZWFkZXJzIGZvciB0aGUgY29udGVudHMgb2YgZWFjaCB0aWxlXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnYXRoZXJDb250ZW50SGVhZGVycyh0aWxlSnNvbikge1xuICBpZiAoaGFzRXh0ZW5zaW9uKHRpbGVKc29uLCBcIjNEVElMRVNfbXVsdGlwbGVfY29udGVudHNcIikpIHtcbiAgICByZXR1cm4gdGlsZUpzb24uZXh0ZW5zaW9uc1tcIjNEVElMRVNfbXVsdGlwbGVfY29udGVudHNcIl0uY29udGVudDtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHRpbGVKc29uLmNvbnRlbnQpKSB7XG4gICAgcmV0dXJuIFt0aWxlSnNvbi5jb250ZW50XTtcbiAgfVxuXG4gIHJldHVybiBbXTtcbn1cblxuZnVuY3Rpb24gbWFrZVRpbGVIZWFkZXJUZW1wbGF0ZSh0aWxlSnNvbikge1xuICB2YXIgdGVtcGxhdGUgPSBjbG9uZSh0aWxlSnNvbiwgdHJ1ZSk7XG5cbiAgLy8gcmVtb3ZlIHRoZSBpbXBsaWNpdCB0aWxpbmcgZXh0ZW5zaW9uIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHNcbiAgZGVsZXRlIHRlbXBsYXRlLmV4dGVuc2lvbnNbXCIzRFRJTEVTX2ltcGxpY2l0X3RpbGluZ1wiXTtcblxuICAvLyBjb250ZW50IGlzIGhhbmRsZWQgc2VwYXJhdGVseSwgc28gcmVtb3ZlIGNvbnRlbnQtcmVsYXRlZCBwcm9wZXJ0aWVzXG4gIGRlbGV0ZSB0ZW1wbGF0ZS5jb250ZW50O1xuICBkZWxldGUgdGVtcGxhdGUuZXh0ZW5zaW9uc1tcIjNEVElMRVNfbXVsdGlwbGVfY29udGVudHNcIl07XG5cbiAgLy8gaWYgdGhlcmUgYXJlIG5vIG90aGVyIGV4dGVuc2lvbnMsIHJlbW92ZSB0aGUgZXh0ZW5zaW9ucyBwcm9wZXJ0eSB0b1xuICAvLyBrZWVwIGVhY2ggdGlsZSBzaW1wbGVcbiAgaWYgKE9iamVjdC5rZXlzKHRlbXBsYXRlLmV4dGVuc2lvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlbGV0ZSB0ZW1wbGF0ZS5leHRlbnNpb25zO1xuICB9XG5cbiAgcmV0dXJuIHRlbXBsYXRlO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14255\n')},57325:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n\n\n/**\n * An enum describing the built-in instance attribute semantics.\n *\n * @enum {String}\n *\n * @private\n */\nvar InstanceAttributeSemantic = {\n  /**\n   * Per-instance translation.\n   *\n   * @type {String}\n   * @constant\n   */\n  TRANSLATION: "TRANSLATION",\n\n  /**\n   * Per-instance rotation.\n   *\n   * @type {String}\n   * @constant\n   */\n  ROTATION: "ROTATION",\n\n  /**\n   * Per-instance scale.\n   *\n   * @type {String}\n   * @constant\n   */\n  SCALE: "SCALE",\n\n  /**\n   * Per-instance feature ID.\n   *\n   * @type {String}\n   * @constant\n   */\n  FEATURE_ID: "FEATURE_ID",\n};\n\n/**\n * Gets the instance attribute semantic matching the glTF attribute semantic.\n *\n * @returns {InstanceAttributeSemantic} The instance attribute semantic, or undefined if there is no match.\n *\n * @private\n */\nInstanceAttributeSemantic.fromGltfSemantic = function (gltfSemantic) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("gltfSemantic", gltfSemantic);\n  //>>includeEnd(\'debug\')\n\n  var semantic = gltfSemantic;\n\n  // Strip the set index from the semantic\n  var setIndexRegex = /^(\\w+)_\\d+$/;\n  var setIndexMatch = setIndexRegex.exec(gltfSemantic);\n  if (setIndexMatch !== null) {\n    semantic = setIndexMatch[1];\n  }\n\n  switch (semantic) {\n    case "TRANSLATION":\n      return InstanceAttributeSemantic.TRANSLATION;\n    case "ROTATION":\n      return InstanceAttributeSemantic.ROTATION;\n    case "SCALE":\n      return InstanceAttributeSemantic.SCALE;\n    case "_FEATURE_ID":\n      return InstanceAttributeSemantic.FEATURE_ID;\n  }\n\n  return undefined;\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(InstanceAttributeSemantic));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTczMjUuanMiLCJtYXBwaW5ncyI6IjtBQUFxQzs7QUFFckM7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMkJBQTJCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDJGQUFtQjtBQUNyQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5REFBZSx3Q0FBd0MsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9JbnN0YW5jZUF0dHJpYnV0ZVNlbWFudGljLmpzPzc5YzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5cbi8qKlxuICogQW4gZW51bSBkZXNjcmliaW5nIHRoZSBidWlsdC1pbiBpbnN0YW5jZSBhdHRyaWJ1dGUgc2VtYW50aWNzLlxuICpcbiAqIEBlbnVtIHtTdHJpbmd9XG4gKlxuICogQHByaXZhdGVcbiAqL1xudmFyIEluc3RhbmNlQXR0cmlidXRlU2VtYW50aWMgPSB7XG4gIC8qKlxuICAgKiBQZXItaW5zdGFuY2UgdHJhbnNsYXRpb24uXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgVFJBTlNMQVRJT046IFwiVFJBTlNMQVRJT05cIixcblxuICAvKipcbiAgICogUGVyLWluc3RhbmNlIHJvdGF0aW9uLlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFJPVEFUSU9OOiBcIlJPVEFUSU9OXCIsXG5cbiAgLyoqXG4gICAqIFBlci1pbnN0YW5jZSBzY2FsZS5cbiAgICpcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBTQ0FMRTogXCJTQ0FMRVwiLFxuXG4gIC8qKlxuICAgKiBQZXItaW5zdGFuY2UgZmVhdHVyZSBJRC5cbiAgICpcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBGRUFUVVJFX0lEOiBcIkZFQVRVUkVfSURcIixcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgaW5zdGFuY2UgYXR0cmlidXRlIHNlbWFudGljIG1hdGNoaW5nIHRoZSBnbFRGIGF0dHJpYnV0ZSBzZW1hbnRpYy5cbiAqXG4gKiBAcmV0dXJucyB7SW5zdGFuY2VBdHRyaWJ1dGVTZW1hbnRpY30gVGhlIGluc3RhbmNlIGF0dHJpYnV0ZSBzZW1hbnRpYywgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGlzIG5vIG1hdGNoLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkluc3RhbmNlQXR0cmlidXRlU2VtYW50aWMuZnJvbUdsdGZTZW1hbnRpYyA9IGZ1bmN0aW9uIChnbHRmU2VtYW50aWMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLnN0cmluZyhcImdsdGZTZW1hbnRpY1wiLCBnbHRmU2VtYW50aWMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKVxuXG4gIHZhciBzZW1hbnRpYyA9IGdsdGZTZW1hbnRpYztcblxuICAvLyBTdHJpcCB0aGUgc2V0IGluZGV4IGZyb20gdGhlIHNlbWFudGljXG4gIHZhciBzZXRJbmRleFJlZ2V4ID0gL14oXFx3KylfXFxkKyQvO1xuICB2YXIgc2V0SW5kZXhNYXRjaCA9IHNldEluZGV4UmVnZXguZXhlYyhnbHRmU2VtYW50aWMpO1xuICBpZiAoc2V0SW5kZXhNYXRjaCAhPT0gbnVsbCkge1xuICAgIHNlbWFudGljID0gc2V0SW5kZXhNYXRjaFsxXTtcbiAgfVxuXG4gIHN3aXRjaCAoc2VtYW50aWMpIHtcbiAgICBjYXNlIFwiVFJBTlNMQVRJT05cIjpcbiAgICAgIHJldHVybiBJbnN0YW5jZUF0dHJpYnV0ZVNlbWFudGljLlRSQU5TTEFUSU9OO1xuICAgIGNhc2UgXCJST1RBVElPTlwiOlxuICAgICAgcmV0dXJuIEluc3RhbmNlQXR0cmlidXRlU2VtYW50aWMuUk9UQVRJT047XG4gICAgY2FzZSBcIlNDQUxFXCI6XG4gICAgICByZXR1cm4gSW5zdGFuY2VBdHRyaWJ1dGVTZW1hbnRpYy5TQ0FMRTtcbiAgICBjYXNlIFwiX0ZFQVRVUkVfSURcIjpcbiAgICAgIHJldHVybiBJbnN0YW5jZUF0dHJpYnV0ZVNlbWFudGljLkZFQVRVUkVfSUQ7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZShJbnN0YW5jZUF0dHJpYnV0ZVNlbWFudGljKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///57325\n')},83472:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52323);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(82982);\n/* harmony import */ var _Core_deprecationWarning_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11954);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(50491);\n/* harmony import */ var _Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(12540);\n/* harmony import */ var _Core_getStringFromTypedArray_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(66659);\n/* harmony import */ var _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(68201);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(72248);\n/* harmony import */ var _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(87811);\n/* harmony import */ var _Core_RequestType_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82968);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(9407);\n/* harmony import */ var _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(95555);\n/* harmony import */ var _Core_TranslationRotationScale_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(72043);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(8379);\n/* harmony import */ var _Axis_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(66577);\n/* harmony import */ var _Cesium3DTileBatchTable_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(84020);\n/* harmony import */ var _Cesium3DTileFeature_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(52381);\n/* harmony import */ var _Cesium3DTileFeatureTable_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(79553);\n/* harmony import */ var _ModelInstanceCollection_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(41074);\n/* harmony import */ var _ModelAnimationLoop_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(61841);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Represents the contents of a\n * {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Instanced3DModel|Instanced 3D Model}\n * tile in a {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification|3D Tiles} tileset.\n * <p>\n * Implements the {@link Cesium3DTileContent} interface.\n * </p>\n *\n * @alias Instanced3DModel3DTileContent\n * @constructor\n *\n * @private\n */\nfunction Instanced3DModel3DTileContent(\n  tileset,\n  tile,\n  resource,\n  arrayBuffer,\n  byteOffset\n) {\n  this._tileset = tileset;\n  this._tile = tile;\n  this._resource = resource;\n  this._modelInstanceCollection = undefined;\n  this._batchTable = undefined;\n  this._features = undefined;\n\n  this.featurePropertiesDirty = false;\n  this._groupMetadata = undefined;\n\n  initialize(this, arrayBuffer, byteOffset);\n}\n\n// This can be overridden for testing purposes\nInstanced3DModel3DTileContent._deprecationWarning = _Core_deprecationWarning_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z;\n\nObject.defineProperties(Instanced3DModel3DTileContent.prototype, {\n  featuresLength: {\n    get: function () {\n      return this._batchTable.featuresLength;\n    },\n  },\n\n  pointsLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  trianglesLength: {\n    get: function () {\n      var model = this._modelInstanceCollection._model;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(model)) {\n        return model.trianglesLength;\n      }\n      return 0;\n    },\n  },\n\n  geometryByteLength: {\n    get: function () {\n      var model = this._modelInstanceCollection._model;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(model)) {\n        return model.geometryByteLength;\n      }\n      return 0;\n    },\n  },\n\n  texturesByteLength: {\n    get: function () {\n      var model = this._modelInstanceCollection._model;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(model)) {\n        return model.texturesByteLength;\n      }\n      return 0;\n    },\n  },\n\n  batchTableByteLength: {\n    get: function () {\n      return this._batchTable.memorySizeInBytes;\n    },\n  },\n\n  innerContents: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  readyPromise: {\n    get: function () {\n      return this._modelInstanceCollection.readyPromise;\n    },\n  },\n\n  tileset: {\n    get: function () {\n      return this._tileset;\n    },\n  },\n\n  tile: {\n    get: function () {\n      return this._tile;\n    },\n  },\n\n  url: {\n    get: function () {\n      return this._resource.getUrlComponent(true);\n    },\n  },\n\n  batchTable: {\n    get: function () {\n      return this._batchTable;\n    },\n  },\n\n  groupMetadata: {\n    get: function () {\n      return this._groupMetadata;\n    },\n    set: function (value) {\n      this._groupMetadata = value;\n    },\n  },\n});\n\nfunction getPickIdCallback(content) {\n  return function () {\n    return content._batchTable.getPickId();\n  };\n}\n\nvar sizeOfUint32 = Uint32Array.BYTES_PER_ELEMENT;\nvar propertyScratch1 = new Array(4);\nvar propertyScratch2 = new Array(4);\n\nfunction initialize(content, arrayBuffer, byteOffset) {\n  var byteStart = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(byteOffset, 0);\n  byteOffset = byteStart;\n\n  var uint8Array = new Uint8Array(arrayBuffer);\n  var view = new DataView(arrayBuffer);\n  byteOffset += sizeOfUint32; // Skip magic\n\n  var version = view.getUint32(byteOffset, true);\n  if (version !== 1) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n      "Only Instanced 3D Model version 1 is supported. Version " +\n        version +\n        " is not."\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  var byteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var featureTableJsonByteLength = view.getUint32(byteOffset, true);\n  if (featureTableJsonByteLength === 0) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n      "featureTableJsonByteLength is zero, the feature table must be defined."\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  var featureTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var batchTableJsonByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var batchTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var gltfFormat = view.getUint32(byteOffset, true);\n  if (gltfFormat !== 1 && gltfFormat !== 0) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n      "Only glTF format 0 (uri) or 1 (embedded) are supported. Format " +\n        gltfFormat +\n        " is not."\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  var featureTableJson = (0,_Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n    uint8Array,\n    byteOffset,\n    featureTableJsonByteLength\n  );\n  byteOffset += featureTableJsonByteLength;\n\n  var featureTableBinary = new Uint8Array(\n    arrayBuffer,\n    byteOffset,\n    featureTableBinaryByteLength\n  );\n  byteOffset += featureTableBinaryByteLength;\n\n  var featureTable = new _Cesium3DTileFeatureTable_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z(\n    featureTableJson,\n    featureTableBinary\n  );\n  var instancesLength = featureTable.getGlobalProperty("INSTANCES_LENGTH");\n  featureTable.featuresLength = instancesLength;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(instancesLength)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n      "Feature table global property: INSTANCES_LENGTH must be defined"\n    );\n  }\n\n  var batchTableJson;\n  var batchTableBinary;\n  if (batchTableJsonByteLength > 0) {\n    batchTableJson = (0,_Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n      uint8Array,\n      byteOffset,\n      batchTableJsonByteLength\n    );\n    byteOffset += batchTableJsonByteLength;\n\n    if (batchTableBinaryByteLength > 0) {\n      // Has a batch table binary\n      batchTableBinary = new Uint8Array(\n        arrayBuffer,\n        byteOffset,\n        batchTableBinaryByteLength\n      );\n      // Copy the batchTableBinary section and let the underlying ArrayBuffer be freed\n      batchTableBinary = new Uint8Array(batchTableBinary);\n      byteOffset += batchTableBinaryByteLength;\n    }\n  }\n\n  content._batchTable = new _Cesium3DTileBatchTable_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z(\n    content,\n    instancesLength,\n    batchTableJson,\n    batchTableBinary\n  );\n\n  var gltfByteLength = byteStart + byteLength - byteOffset;\n  if (gltfByteLength === 0) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n      "glTF byte length is zero, i3dm must have a glTF to instance."\n    );\n  }\n\n  var gltfView;\n  if (byteOffset % 4 === 0) {\n    gltfView = new Uint8Array(arrayBuffer, byteOffset, gltfByteLength);\n  } else {\n    // Create a copy of the glb so that it is 4-byte aligned\n    Instanced3DModel3DTileContent._deprecationWarning(\n      "i3dm-glb-unaligned",\n      "The embedded glb is not aligned to a 4-byte boundary."\n    );\n    gltfView = new Uint8Array(\n      uint8Array.subarray(byteOffset, byteOffset + gltfByteLength)\n    );\n  }\n\n  var tileset = content._tileset;\n\n  // Create model instance collection\n  var collectionOptions = {\n    instances: new Array(instancesLength),\n    batchTable: content._batchTable,\n    cull: false, // Already culled by 3D Tiles\n    url: undefined,\n    requestType: _Core_RequestType_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].TILES3D */ .Z.TILES3D,\n    gltf: undefined,\n    basePath: undefined,\n    incrementallyLoadTextures: false,\n    upAxis: tileset._gltfUpAxis,\n    forwardAxis: _Axis_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].X */ .Z.X,\n    opaquePass: _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE, // Draw opaque portions during the 3D Tiles pass\n    pickIdLoaded: getPickIdCallback(content),\n    imageBasedLightingFactor: tileset.imageBasedLightingFactor,\n    lightColor: tileset.lightColor,\n    luminanceAtZenith: tileset.luminanceAtZenith,\n    sphericalHarmonicCoefficients: tileset.sphericalHarmonicCoefficients,\n    specularEnvironmentMaps: tileset.specularEnvironmentMaps,\n    backFaceCulling: tileset.backFaceCulling,\n    showOutline: tileset.showOutline,\n  };\n\n  if (gltfFormat === 0) {\n    var gltfUrl = (0,_Core_getStringFromTypedArray_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(gltfView);\n\n    // We need to remove padding from the end of the model URL in case this tile was part of a composite tile.\n    // This removes all white space and null characters from the end of the string.\n    gltfUrl = gltfUrl.replace(/[\\s\\0]+$/, "");\n    collectionOptions.url = content._resource.getDerivedResource({\n      url: gltfUrl,\n    });\n  } else {\n    collectionOptions.gltf = gltfView;\n    collectionOptions.basePath = content._resource.clone();\n  }\n\n  var eastNorthUp = featureTable.getGlobalProperty("EAST_NORTH_UP");\n\n  var rtcCenter;\n  var rtcCenterArray = featureTable.getGlobalProperty(\n    "RTC_CENTER",\n    _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n    3\n  );\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(rtcCenterArray)) {\n    rtcCenter = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].unpack */ .Z.unpack(rtcCenterArray);\n  }\n\n  var instances = collectionOptions.instances;\n  var instancePosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  var instancePositionArray = new Array(3);\n  var instanceNormalRight = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  var instanceNormalUp = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  var instanceNormalForward = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  var instanceRotation = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\n  var instanceQuaternion = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\n  var instanceScale = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  var instanceTranslationRotationScale = new _Core_TranslationRotationScale_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\n  var instanceTransform = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\n  for (var i = 0; i < instancesLength; i++) {\n    // Get the instance position\n    var position = featureTable.getProperty(\n      "POSITION",\n      _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n      3,\n      i,\n      propertyScratch1\n    );\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(position)) {\n      position = instancePositionArray;\n      var positionQuantized = featureTable.getProperty(\n        "POSITION_QUANTIZED",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        3,\n        i,\n        propertyScratch1\n      );\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(positionQuantized)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n          "Either POSITION or POSITION_QUANTIZED must be defined for each instance."\n        );\n      }\n      var quantizedVolumeOffset = featureTable.getGlobalProperty(\n        "QUANTIZED_VOLUME_OFFSET",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n        3\n      );\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(quantizedVolumeOffset)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n          "Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions."\n        );\n      }\n      var quantizedVolumeScale = featureTable.getGlobalProperty(\n        "QUANTIZED_VOLUME_SCALE",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n        3\n      );\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(quantizedVolumeScale)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n          "Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions."\n        );\n      }\n      for (var j = 0; j < 3; j++) {\n        position[j] =\n          (positionQuantized[j] / 65535.0) * quantizedVolumeScale[j] +\n          quantizedVolumeOffset[j];\n      }\n    }\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].unpack */ .Z.unpack(position, 0, instancePosition);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(rtcCenter)) {\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(instancePosition, rtcCenter, instancePosition);\n    }\n    instanceTranslationRotationScale.translation = instancePosition;\n\n    // Get the instance rotation\n    var normalUp = featureTable.getProperty(\n      "NORMAL_UP",\n      _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n      3,\n      i,\n      propertyScratch1\n    );\n    var normalRight = featureTable.getProperty(\n      "NORMAL_RIGHT",\n      _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n      3,\n      i,\n      propertyScratch2\n    );\n    var hasCustomOrientation = false;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(normalUp)) {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(normalRight)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n          "To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined."\n        );\n      }\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].unpack */ .Z.unpack(normalUp, 0, instanceNormalUp);\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].unpack */ .Z.unpack(normalRight, 0, instanceNormalRight);\n      hasCustomOrientation = true;\n    } else {\n      var octNormalUp = featureTable.getProperty(\n        "NORMAL_UP_OCT32P",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        2,\n        i,\n        propertyScratch1\n      );\n      var octNormalRight = featureTable.getProperty(\n        "NORMAL_RIGHT_OCT32P",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        2,\n        i,\n        propertyScratch2\n      );\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(octNormalUp)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(octNormalRight)) {\n          throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n            "To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined."\n          );\n        }\n        _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octDecodeInRange */ .Z.octDecodeInRange(\n          octNormalUp[0],\n          octNormalUp[1],\n          65535,\n          instanceNormalUp\n        );\n        _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octDecodeInRange */ .Z.octDecodeInRange(\n          octNormalRight[0],\n          octNormalRight[1],\n          65535,\n          instanceNormalRight\n        );\n        hasCustomOrientation = true;\n      } else if (eastNorthUp) {\n        _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n          instancePosition,\n          _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].WGS84 */ .Z.WGS84,\n          instanceTransform\n        );\n        _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getMatrix3 */ .Z.getMatrix3(instanceTransform, instanceRotation);\n      } else {\n        _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].clone */ .Z.clone(_Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].IDENTITY */ .Z.IDENTITY, instanceRotation);\n      }\n    }\n    if (hasCustomOrientation) {\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].cross */ .Z.cross(\n        instanceNormalRight,\n        instanceNormalUp,\n        instanceNormalForward\n      );\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(instanceNormalForward, instanceNormalForward);\n      _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].setColumn */ .Z.setColumn(\n        instanceRotation,\n        0,\n        instanceNormalRight,\n        instanceRotation\n      );\n      _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].setColumn */ .Z.setColumn(\n        instanceRotation,\n        1,\n        instanceNormalUp,\n        instanceRotation\n      );\n      _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].setColumn */ .Z.setColumn(\n        instanceRotation,\n        2,\n        instanceNormalForward,\n        instanceRotation\n      );\n    }\n    _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].fromRotationMatrix */ .Z.fromRotationMatrix(instanceRotation, instanceQuaternion);\n    instanceTranslationRotationScale.rotation = instanceQuaternion;\n\n    // Get the instance scale\n    instanceScale = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromElements */ .Z.fromElements(1.0, 1.0, 1.0, instanceScale);\n    var scale = featureTable.getProperty(\n      "SCALE",\n      _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n      1,\n      i\n    );\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(scale)) {\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(instanceScale, scale, instanceScale);\n    }\n    var nonUniformScale = featureTable.getProperty(\n      "SCALE_NON_UNIFORM",\n      _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FLOAT */ .Z.FLOAT,\n      3,\n      i,\n      propertyScratch1\n    );\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(nonUniformScale)) {\n      instanceScale.x *= nonUniformScale[0];\n      instanceScale.y *= nonUniformScale[1];\n      instanceScale.z *= nonUniformScale[2];\n    }\n    instanceTranslationRotationScale.scale = instanceScale;\n\n    // Get the batchId\n    var batchId = featureTable.getProperty(\n      "BATCH_ID",\n      _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n      1,\n      i\n    );\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(batchId)) {\n      // If BATCH_ID semantic is undefined, batchId is just the instance number\n      batchId = i;\n    }\n\n    // Create the model matrix and the instance\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].fromTranslationRotationScale */ .Z.fromTranslationRotationScale(\n      instanceTranslationRotationScale,\n      instanceTransform\n    );\n    var modelMatrix = instanceTransform.clone();\n    instances[i] = {\n      modelMatrix: modelMatrix,\n      batchId: batchId,\n    };\n  }\n\n  content._modelInstanceCollection = new _ModelInstanceCollection_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z(\n    collectionOptions\n  );\n  content._modelInstanceCollection.readyPromise.then(function (collection) {\n    collection.activeAnimations.addAll({\n      loop: _ModelAnimationLoop_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].REPEAT */ .Z.REPEAT,\n    });\n  });\n}\n\nfunction createFeatures(content) {\n  var featuresLength = content.featuresLength;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(content._features) && featuresLength > 0) {\n    var features = new Array(featuresLength);\n    for (var i = 0; i < featuresLength; ++i) {\n      features[i] = new _Cesium3DTileFeature_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z(content, i);\n    }\n    content._features = features;\n  }\n}\n\nInstanced3DModel3DTileContent.prototype.hasProperty = function (batchId, name) {\n  return this._batchTable.hasProperty(batchId, name);\n};\n\nInstanced3DModel3DTileContent.prototype.getFeature = function (batchId) {\n  var featuresLength = this.featuresLength;\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(batchId) || batchId < 0 || batchId >= featuresLength) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n      "batchId is required and between zero and featuresLength - 1 (" +\n        (featuresLength - 1) +\n        ")."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  createFeatures(this);\n  return this._features[batchId];\n};\n\nInstanced3DModel3DTileContent.prototype.applyDebugSettings = function (\n  enabled,\n  color\n) {\n  color = enabled ? color : _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE;\n  this._batchTable.setAllColor(color);\n};\n\nInstanced3DModel3DTileContent.prototype.applyStyle = function (style) {\n  this._batchTable.applyStyle(style);\n};\n\nInstanced3DModel3DTileContent.prototype.update = function (\n  tileset,\n  frameState\n) {\n  var commandStart = frameState.commandList.length;\n\n  // In the PROCESSING state we may be calling update() to move forward\n  // the content\'s resource loading.  In the READY state, it will\n  // actually generate commands.\n  this._batchTable.update(tileset, frameState);\n  this._modelInstanceCollection.modelMatrix = this._tile.computedTransform;\n  this._modelInstanceCollection.shadows = this._tileset.shadows;\n  this._modelInstanceCollection.lightColor = this._tileset.lightColor;\n  this._modelInstanceCollection.luminanceAtZenith = this._tileset.luminanceAtZenith;\n  this._modelInstanceCollection.sphericalHarmonicCoefficients = this._tileset.sphericalHarmonicCoefficients;\n  this._modelInstanceCollection.specularEnvironmentMaps = this._tileset.specularEnvironmentMaps;\n  this._modelInstanceCollection.backFaceCulling = this._tileset.backFaceCulling;\n  this._modelInstanceCollection.debugWireframe = this._tileset.debugWireframe;\n\n  var model = this._modelInstanceCollection._model;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(model)) {\n    // Update for clipping planes\n    var tilesetClippingPlanes = this._tileset.clippingPlanes;\n    model.referenceMatrix = this._tileset.clippingPlanesOriginMatrix;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(tilesetClippingPlanes) && this._tile.clippingPlanesDirty) {\n      // Dereference the clipping planes from the model if they are irrelevant - saves on shading\n      // Link/Dereference directly to avoid ownership checks.\n      model._clippingPlanes =\n        tilesetClippingPlanes.enabled && this._tile._isClipped\n          ? tilesetClippingPlanes\n          : undefined;\n    }\n\n    // If the model references a different ClippingPlaneCollection due to the tileset\'s collection being replaced with a\n    // ClippingPlaneCollection that gives this tile the same clipping status, update the model to use the new ClippingPlaneCollection.\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(tilesetClippingPlanes) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(model._clippingPlanes) &&\n      model._clippingPlanes !== tilesetClippingPlanes\n    ) {\n      model._clippingPlanes = tilesetClippingPlanes;\n    }\n  }\n\n  this._modelInstanceCollection.update(frameState);\n\n  // If any commands were pushed, add derived commands\n  var commandEnd = frameState.commandList.length;\n  if (\n    commandStart < commandEnd &&\n    (frameState.passes.render || frameState.passes.pick)\n  ) {\n    this._batchTable.addDerivedCommands(frameState, commandStart, false);\n  }\n};\n\nInstanced3DModel3DTileContent.prototype.isDestroyed = function () {\n  return false;\n};\n\nInstanced3DModel3DTileContent.prototype.destroy = function () {\n  this._modelInstanceCollection =\n    this._modelInstanceCollection && this._modelInstanceCollection.destroy();\n  this._batchTable = this._batchTable && this._batchTable.destroy();\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Instanced3DModel3DTileContent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sc0VBQU87QUFDYixNQUFNLHNFQUFPO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVMsMkVBQWE7QUFDdEI7QUFDQSx5REFBZSw2QkFBNkIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9JbnN0YW5jZWQzRE1vZGVsM0RUaWxlQ29udGVudC5qcz9iNzVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBdHRyaWJ1dGVDb21wcmVzc2lvbiBmcm9tIFwiLi4vQ29yZS9BdHRyaWJ1dGVDb21wcmVzc2lvbi5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVwcmVjYXRpb25XYXJuaW5nIGZyb20gXCIuLi9Db3JlL2RlcHJlY2F0aW9uV2FybmluZy5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRWxsaXBzb2lkIGZyb20gXCIuLi9Db3JlL0VsbGlwc29pZC5qc1wiO1xuaW1wb3J0IGdldEpzb25Gcm9tVHlwZWRBcnJheSBmcm9tIFwiLi4vQ29yZS9nZXRKc29uRnJvbVR5cGVkQXJyYXkuanNcIjtcbmltcG9ydCBnZXRTdHJpbmdGcm9tVHlwZWRBcnJheSBmcm9tIFwiLi4vQ29yZS9nZXRTdHJpbmdGcm9tVHlwZWRBcnJheS5qc1wiO1xuaW1wb3J0IE1hdHJpeDMgZnJvbSBcIi4uL0NvcmUvTWF0cml4My5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IFF1YXRlcm5pb24gZnJvbSBcIi4uL0NvcmUvUXVhdGVybmlvbi5qc1wiO1xuaW1wb3J0IFJlcXVlc3RUeXBlIGZyb20gXCIuLi9Db3JlL1JlcXVlc3RUeXBlLmpzXCI7XG5pbXBvcnQgUnVudGltZUVycm9yIGZyb20gXCIuLi9Db3JlL1J1bnRpbWVFcnJvci5qc1wiO1xuaW1wb3J0IFRyYW5zZm9ybXMgZnJvbSBcIi4uL0NvcmUvVHJhbnNmb3Jtcy5qc1wiO1xuaW1wb3J0IFRyYW5zbGF0aW9uUm90YXRpb25TY2FsZSBmcm9tIFwiLi4vQ29yZS9UcmFuc2xhdGlvblJvdGF0aW9uU2NhbGUuanNcIjtcbmltcG9ydCBQYXNzIGZyb20gXCIuLi9SZW5kZXJlci9QYXNzLmpzXCI7XG5pbXBvcnQgQXhpcyBmcm9tIFwiLi9BeGlzLmpzXCI7XG5pbXBvcnQgQ2VzaXVtM0RUaWxlQmF0Y2hUYWJsZSBmcm9tIFwiLi9DZXNpdW0zRFRpbGVCYXRjaFRhYmxlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtM0RUaWxlRmVhdHVyZSBmcm9tIFwiLi9DZXNpdW0zRFRpbGVGZWF0dXJlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtM0RUaWxlRmVhdHVyZVRhYmxlIGZyb20gXCIuL0Nlc2l1bTNEVGlsZUZlYXR1cmVUYWJsZS5qc1wiO1xuaW1wb3J0IE1vZGVsSW5zdGFuY2VDb2xsZWN0aW9uIGZyb20gXCIuL01vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLmpzXCI7XG5pbXBvcnQgTW9kZWxBbmltYXRpb25Mb29wIGZyb20gXCIuL01vZGVsQW5pbWF0aW9uTG9vcC5qc1wiO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGNvbnRlbnRzIG9mIGFcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvM2QtdGlsZXMvdHJlZS9tYWluL3NwZWNpZmljYXRpb24vVGlsZUZvcm1hdHMvSW5zdGFuY2VkM0RNb2RlbHxJbnN0YW5jZWQgM0QgTW9kZWx9XG4gKiB0aWxlIGluIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy8zZC10aWxlcy90cmVlL21haW4vc3BlY2lmaWNhdGlvbnwzRCBUaWxlc30gdGlsZXNldC5cbiAqIDxwPlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIENlc2l1bTNEVGlsZUNvbnRlbnR9IGludGVyZmFjZS5cbiAqIDwvcD5cbiAqXG4gKiBAYWxpYXMgSW5zdGFuY2VkM0RNb2RlbDNEVGlsZUNvbnRlbnRcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEluc3RhbmNlZDNETW9kZWwzRFRpbGVDb250ZW50KFxuICB0aWxlc2V0LFxuICB0aWxlLFxuICByZXNvdXJjZSxcbiAgYXJyYXlCdWZmZXIsXG4gIGJ5dGVPZmZzZXRcbikge1xuICB0aGlzLl90aWxlc2V0ID0gdGlsZXNldDtcbiAgdGhpcy5fdGlsZSA9IHRpbGU7XG4gIHRoaXMuX3Jlc291cmNlID0gcmVzb3VyY2U7XG4gIHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9iYXRjaFRhYmxlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9mZWF0dXJlcyA9IHVuZGVmaW5lZDtcblxuICB0aGlzLmZlYXR1cmVQcm9wZXJ0aWVzRGlydHkgPSBmYWxzZTtcbiAgdGhpcy5fZ3JvdXBNZXRhZGF0YSA9IHVuZGVmaW5lZDtcblxuICBpbml0aWFsaXplKHRoaXMsIGFycmF5QnVmZmVyLCBieXRlT2Zmc2V0KTtcbn1cblxuLy8gVGhpcyBjYW4gYmUgb3ZlcnJpZGRlbiBmb3IgdGVzdGluZyBwdXJwb3Nlc1xuSW5zdGFuY2VkM0RNb2RlbDNEVGlsZUNvbnRlbnQuX2RlcHJlY2F0aW9uV2FybmluZyA9IGRlcHJlY2F0aW9uV2FybmluZztcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSW5zdGFuY2VkM0RNb2RlbDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLCB7XG4gIGZlYXR1cmVzTGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYmF0Y2hUYWJsZS5mZWF0dXJlc0xlbmd0aDtcbiAgICB9LFxuICB9LFxuXG4gIHBvaW50c0xlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICB0cmlhbmdsZXNMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLl9tb2RlbDtcbiAgICAgIGlmIChkZWZpbmVkKG1vZGVsKSkge1xuICAgICAgICByZXR1cm4gbW9kZWwudHJpYW5nbGVzTGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICBnZW9tZXRyeUJ5dGVMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLl9tb2RlbDtcbiAgICAgIGlmIChkZWZpbmVkKG1vZGVsKSkge1xuICAgICAgICByZXR1cm4gbW9kZWwuZ2VvbWV0cnlCeXRlTGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICB0ZXh0dXJlc0J5dGVMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLl9tb2RlbDtcbiAgICAgIGlmIChkZWZpbmVkKG1vZGVsKSkge1xuICAgICAgICByZXR1cm4gbW9kZWwudGV4dHVyZXNCeXRlTGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICBiYXRjaFRhYmxlQnl0ZUxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2JhdGNoVGFibGUubWVtb3J5U2l6ZUluQnl0ZXM7XG4gICAgfSxcbiAgfSxcblxuICBpbm5lckNvbnRlbnRzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbW9kZWxJbnN0YW5jZUNvbGxlY3Rpb24ucmVhZHlQcm9taXNlO1xuICAgIH0sXG4gIH0sXG5cbiAgdGlsZXNldDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbGVzZXQ7XG4gICAgfSxcbiAgfSxcblxuICB0aWxlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdGlsZTtcbiAgICB9LFxuICB9LFxuXG4gIHVybDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jlc291cmNlLmdldFVybENvbXBvbmVudCh0cnVlKTtcbiAgICB9LFxuICB9LFxuXG4gIGJhdGNoVGFibGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9iYXRjaFRhYmxlO1xuICAgIH0sXG4gIH0sXG5cbiAgZ3JvdXBNZXRhZGF0YToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwTWV0YWRhdGE7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fZ3JvdXBNZXRhZGF0YSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuZnVuY3Rpb24gZ2V0UGlja0lkQ2FsbGJhY2soY29udGVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjb250ZW50Ll9iYXRjaFRhYmxlLmdldFBpY2tJZCgpO1xuICB9O1xufVxuXG52YXIgc2l6ZU9mVWludDMyID0gVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG52YXIgcHJvcGVydHlTY3JhdGNoMSA9IG5ldyBBcnJheSg0KTtcbnZhciBwcm9wZXJ0eVNjcmF0Y2gyID0gbmV3IEFycmF5KDQpO1xuXG5mdW5jdGlvbiBpbml0aWFsaXplKGNvbnRlbnQsIGFycmF5QnVmZmVyLCBieXRlT2Zmc2V0KSB7XG4gIHZhciBieXRlU3RhcnQgPSBkZWZhdWx0VmFsdWUoYnl0ZU9mZnNldCwgMCk7XG4gIGJ5dGVPZmZzZXQgPSBieXRlU3RhcnQ7XG5cbiAgdmFyIHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XG4gIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyKTtcbiAgYnl0ZU9mZnNldCArPSBzaXplT2ZVaW50MzI7IC8vIFNraXAgbWFnaWNcblxuICB2YXIgdmVyc2lvbiA9IHZpZXcuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIHRydWUpO1xuICBpZiAodmVyc2lvbiAhPT0gMSkge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICBcIk9ubHkgSW5zdGFuY2VkIDNEIE1vZGVsIHZlcnNpb24gMSBpcyBzdXBwb3J0ZWQuIFZlcnNpb24gXCIgK1xuICAgICAgICB2ZXJzaW9uICtcbiAgICAgICAgXCIgaXMgbm90LlwiXG4gICAgKTtcbiAgfVxuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcblxuICB2YXIgYnl0ZUxlbmd0aCA9IHZpZXcuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIHRydWUpO1xuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcblxuICB2YXIgZmVhdHVyZVRhYmxlSnNvbkJ5dGVMZW5ndGggPSB2aWV3LmdldFVpbnQzMihieXRlT2Zmc2V0LCB0cnVlKTtcbiAgaWYgKGZlYXR1cmVUYWJsZUpzb25CeXRlTGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiZmVhdHVyZVRhYmxlSnNvbkJ5dGVMZW5ndGggaXMgemVybywgdGhlIGZlYXR1cmUgdGFibGUgbXVzdCBiZSBkZWZpbmVkLlwiXG4gICAgKTtcbiAgfVxuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcblxuICB2YXIgZmVhdHVyZVRhYmxlQmluYXJ5Qnl0ZUxlbmd0aCA9IHZpZXcuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIHRydWUpO1xuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcblxuICB2YXIgYmF0Y2hUYWJsZUpzb25CeXRlTGVuZ3RoID0gdmlldy5nZXRVaW50MzIoYnl0ZU9mZnNldCwgdHJ1ZSk7XG4gIGJ5dGVPZmZzZXQgKz0gc2l6ZU9mVWludDMyO1xuXG4gIHZhciBiYXRjaFRhYmxlQmluYXJ5Qnl0ZUxlbmd0aCA9IHZpZXcuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIHRydWUpO1xuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcblxuICB2YXIgZ2x0ZkZvcm1hdCA9IHZpZXcuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIHRydWUpO1xuICBpZiAoZ2x0ZkZvcm1hdCAhPT0gMSAmJiBnbHRmRm9ybWF0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiT25seSBnbFRGIGZvcm1hdCAwICh1cmkpIG9yIDEgKGVtYmVkZGVkKSBhcmUgc3VwcG9ydGVkLiBGb3JtYXQgXCIgK1xuICAgICAgICBnbHRmRm9ybWF0ICtcbiAgICAgICAgXCIgaXMgbm90LlwiXG4gICAgKTtcbiAgfVxuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcblxuICB2YXIgZmVhdHVyZVRhYmxlSnNvbiA9IGdldEpzb25Gcm9tVHlwZWRBcnJheShcbiAgICB1aW50OEFycmF5LFxuICAgIGJ5dGVPZmZzZXQsXG4gICAgZmVhdHVyZVRhYmxlSnNvbkJ5dGVMZW5ndGhcbiAgKTtcbiAgYnl0ZU9mZnNldCArPSBmZWF0dXJlVGFibGVKc29uQnl0ZUxlbmd0aDtcblxuICB2YXIgZmVhdHVyZVRhYmxlQmluYXJ5ID0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgYXJyYXlCdWZmZXIsXG4gICAgYnl0ZU9mZnNldCxcbiAgICBmZWF0dXJlVGFibGVCaW5hcnlCeXRlTGVuZ3RoXG4gICk7XG4gIGJ5dGVPZmZzZXQgKz0gZmVhdHVyZVRhYmxlQmluYXJ5Qnl0ZUxlbmd0aDtcblxuICB2YXIgZmVhdHVyZVRhYmxlID0gbmV3IENlc2l1bTNEVGlsZUZlYXR1cmVUYWJsZShcbiAgICBmZWF0dXJlVGFibGVKc29uLFxuICAgIGZlYXR1cmVUYWJsZUJpbmFyeVxuICApO1xuICB2YXIgaW5zdGFuY2VzTGVuZ3RoID0gZmVhdHVyZVRhYmxlLmdldEdsb2JhbFByb3BlcnR5KFwiSU5TVEFOQ0VTX0xFTkdUSFwiKTtcbiAgZmVhdHVyZVRhYmxlLmZlYXR1cmVzTGVuZ3RoID0gaW5zdGFuY2VzTGVuZ3RoO1xuXG4gIGlmICghZGVmaW5lZChpbnN0YW5jZXNMZW5ndGgpKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiRmVhdHVyZSB0YWJsZSBnbG9iYWwgcHJvcGVydHk6IElOU1RBTkNFU19MRU5HVEggbXVzdCBiZSBkZWZpbmVkXCJcbiAgICApO1xuICB9XG5cbiAgdmFyIGJhdGNoVGFibGVKc29uO1xuICB2YXIgYmF0Y2hUYWJsZUJpbmFyeTtcbiAgaWYgKGJhdGNoVGFibGVKc29uQnl0ZUxlbmd0aCA+IDApIHtcbiAgICBiYXRjaFRhYmxlSnNvbiA9IGdldEpzb25Gcm9tVHlwZWRBcnJheShcbiAgICAgIHVpbnQ4QXJyYXksXG4gICAgICBieXRlT2Zmc2V0LFxuICAgICAgYmF0Y2hUYWJsZUpzb25CeXRlTGVuZ3RoXG4gICAgKTtcbiAgICBieXRlT2Zmc2V0ICs9IGJhdGNoVGFibGVKc29uQnl0ZUxlbmd0aDtcblxuICAgIGlmIChiYXRjaFRhYmxlQmluYXJ5Qnl0ZUxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEhhcyBhIGJhdGNoIHRhYmxlIGJpbmFyeVxuICAgICAgYmF0Y2hUYWJsZUJpbmFyeSA9IG5ldyBVaW50OEFycmF5KFxuICAgICAgICBhcnJheUJ1ZmZlcixcbiAgICAgICAgYnl0ZU9mZnNldCxcbiAgICAgICAgYmF0Y2hUYWJsZUJpbmFyeUJ5dGVMZW5ndGhcbiAgICAgICk7XG4gICAgICAvLyBDb3B5IHRoZSBiYXRjaFRhYmxlQmluYXJ5IHNlY3Rpb24gYW5kIGxldCB0aGUgdW5kZXJseWluZyBBcnJheUJ1ZmZlciBiZSBmcmVlZFxuICAgICAgYmF0Y2hUYWJsZUJpbmFyeSA9IG5ldyBVaW50OEFycmF5KGJhdGNoVGFibGVCaW5hcnkpO1xuICAgICAgYnl0ZU9mZnNldCArPSBiYXRjaFRhYmxlQmluYXJ5Qnl0ZUxlbmd0aDtcbiAgICB9XG4gIH1cblxuICBjb250ZW50Ll9iYXRjaFRhYmxlID0gbmV3IENlc2l1bTNEVGlsZUJhdGNoVGFibGUoXG4gICAgY29udGVudCxcbiAgICBpbnN0YW5jZXNMZW5ndGgsXG4gICAgYmF0Y2hUYWJsZUpzb24sXG4gICAgYmF0Y2hUYWJsZUJpbmFyeVxuICApO1xuXG4gIHZhciBnbHRmQnl0ZUxlbmd0aCA9IGJ5dGVTdGFydCArIGJ5dGVMZW5ndGggLSBieXRlT2Zmc2V0O1xuICBpZiAoZ2x0ZkJ5dGVMZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgXCJnbFRGIGJ5dGUgbGVuZ3RoIGlzIHplcm8sIGkzZG0gbXVzdCBoYXZlIGEgZ2xURiB0byBpbnN0YW5jZS5cIlxuICAgICk7XG4gIH1cblxuICB2YXIgZ2x0ZlZpZXc7XG4gIGlmIChieXRlT2Zmc2V0ICUgNCA9PT0gMCkge1xuICAgIGdsdGZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGJ5dGVPZmZzZXQsIGdsdGZCeXRlTGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDcmVhdGUgYSBjb3B5IG9mIHRoZSBnbGIgc28gdGhhdCBpdCBpcyA0LWJ5dGUgYWxpZ25lZFxuICAgIEluc3RhbmNlZDNETW9kZWwzRFRpbGVDb250ZW50Ll9kZXByZWNhdGlvbldhcm5pbmcoXG4gICAgICBcImkzZG0tZ2xiLXVuYWxpZ25lZFwiLFxuICAgICAgXCJUaGUgZW1iZWRkZWQgZ2xiIGlzIG5vdCBhbGlnbmVkIHRvIGEgNC1ieXRlIGJvdW5kYXJ5LlwiXG4gICAgKTtcbiAgICBnbHRmVmlldyA9IG5ldyBVaW50OEFycmF5KFxuICAgICAgdWludDhBcnJheS5zdWJhcnJheShieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgZ2x0ZkJ5dGVMZW5ndGgpXG4gICAgKTtcbiAgfVxuXG4gIHZhciB0aWxlc2V0ID0gY29udGVudC5fdGlsZXNldDtcblxuICAvLyBDcmVhdGUgbW9kZWwgaW5zdGFuY2UgY29sbGVjdGlvblxuICB2YXIgY29sbGVjdGlvbk9wdGlvbnMgPSB7XG4gICAgaW5zdGFuY2VzOiBuZXcgQXJyYXkoaW5zdGFuY2VzTGVuZ3RoKSxcbiAgICBiYXRjaFRhYmxlOiBjb250ZW50Ll9iYXRjaFRhYmxlLFxuICAgIGN1bGw6IGZhbHNlLCAvLyBBbHJlYWR5IGN1bGxlZCBieSAzRCBUaWxlc1xuICAgIHVybDogdW5kZWZpbmVkLFxuICAgIHJlcXVlc3RUeXBlOiBSZXF1ZXN0VHlwZS5USUxFUzNELFxuICAgIGdsdGY6IHVuZGVmaW5lZCxcbiAgICBiYXNlUGF0aDogdW5kZWZpbmVkLFxuICAgIGluY3JlbWVudGFsbHlMb2FkVGV4dHVyZXM6IGZhbHNlLFxuICAgIHVwQXhpczogdGlsZXNldC5fZ2x0ZlVwQXhpcyxcbiAgICBmb3J3YXJkQXhpczogQXhpcy5YLFxuICAgIG9wYXF1ZVBhc3M6IFBhc3MuQ0VTSVVNXzNEX1RJTEUsIC8vIERyYXcgb3BhcXVlIHBvcnRpb25zIGR1cmluZyB0aGUgM0QgVGlsZXMgcGFzc1xuICAgIHBpY2tJZExvYWRlZDogZ2V0UGlja0lkQ2FsbGJhY2soY29udGVudCksXG4gICAgaW1hZ2VCYXNlZExpZ2h0aW5nRmFjdG9yOiB0aWxlc2V0LmltYWdlQmFzZWRMaWdodGluZ0ZhY3RvcixcbiAgICBsaWdodENvbG9yOiB0aWxlc2V0LmxpZ2h0Q29sb3IsXG4gICAgbHVtaW5hbmNlQXRaZW5pdGg6IHRpbGVzZXQubHVtaW5hbmNlQXRaZW5pdGgsXG4gICAgc3BoZXJpY2FsSGFybW9uaWNDb2VmZmljaWVudHM6IHRpbGVzZXQuc3BoZXJpY2FsSGFybW9uaWNDb2VmZmljaWVudHMsXG4gICAgc3BlY3VsYXJFbnZpcm9ubWVudE1hcHM6IHRpbGVzZXQuc3BlY3VsYXJFbnZpcm9ubWVudE1hcHMsXG4gICAgYmFja0ZhY2VDdWxsaW5nOiB0aWxlc2V0LmJhY2tGYWNlQ3VsbGluZyxcbiAgICBzaG93T3V0bGluZTogdGlsZXNldC5zaG93T3V0bGluZSxcbiAgfTtcblxuICBpZiAoZ2x0ZkZvcm1hdCA9PT0gMCkge1xuICAgIHZhciBnbHRmVXJsID0gZ2V0U3RyaW5nRnJvbVR5cGVkQXJyYXkoZ2x0ZlZpZXcpO1xuXG4gICAgLy8gV2UgbmVlZCB0byByZW1vdmUgcGFkZGluZyBmcm9tIHRoZSBlbmQgb2YgdGhlIG1vZGVsIFVSTCBpbiBjYXNlIHRoaXMgdGlsZSB3YXMgcGFydCBvZiBhIGNvbXBvc2l0ZSB0aWxlLlxuICAgIC8vIFRoaXMgcmVtb3ZlcyBhbGwgd2hpdGUgc3BhY2UgYW5kIG51bGwgY2hhcmFjdGVycyBmcm9tIHRoZSBlbmQgb2YgdGhlIHN0cmluZy5cbiAgICBnbHRmVXJsID0gZ2x0ZlVybC5yZXBsYWNlKC9bXFxzXFwwXSskLywgXCJcIik7XG4gICAgY29sbGVjdGlvbk9wdGlvbnMudXJsID0gY29udGVudC5fcmVzb3VyY2UuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICAgIHVybDogZ2x0ZlVybCxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb2xsZWN0aW9uT3B0aW9ucy5nbHRmID0gZ2x0ZlZpZXc7XG4gICAgY29sbGVjdGlvbk9wdGlvbnMuYmFzZVBhdGggPSBjb250ZW50Ll9yZXNvdXJjZS5jbG9uZSgpO1xuICB9XG5cbiAgdmFyIGVhc3ROb3J0aFVwID0gZmVhdHVyZVRhYmxlLmdldEdsb2JhbFByb3BlcnR5KFwiRUFTVF9OT1JUSF9VUFwiKTtcblxuICB2YXIgcnRjQ2VudGVyO1xuICB2YXIgcnRjQ2VudGVyQXJyYXkgPSBmZWF0dXJlVGFibGUuZ2V0R2xvYmFsUHJvcGVydHkoXG4gICAgXCJSVENfQ0VOVEVSXCIsXG4gICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgM1xuICApO1xuICBpZiAoZGVmaW5lZChydGNDZW50ZXJBcnJheSkpIHtcbiAgICBydGNDZW50ZXIgPSBDYXJ0ZXNpYW4zLnVucGFjayhydGNDZW50ZXJBcnJheSk7XG4gIH1cblxuICB2YXIgaW5zdGFuY2VzID0gY29sbGVjdGlvbk9wdGlvbnMuaW5zdGFuY2VzO1xuICB2YXIgaW5zdGFuY2VQb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIHZhciBpbnN0YW5jZVBvc2l0aW9uQXJyYXkgPSBuZXcgQXJyYXkoMyk7XG4gIHZhciBpbnN0YW5jZU5vcm1hbFJpZ2h0ID0gbmV3IENhcnRlc2lhbjMoKTtcbiAgdmFyIGluc3RhbmNlTm9ybWFsVXAgPSBuZXcgQ2FydGVzaWFuMygpO1xuICB2YXIgaW5zdGFuY2VOb3JtYWxGb3J3YXJkID0gbmV3IENhcnRlc2lhbjMoKTtcbiAgdmFyIGluc3RhbmNlUm90YXRpb24gPSBuZXcgTWF0cml4MygpO1xuICB2YXIgaW5zdGFuY2VRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTtcbiAgdmFyIGluc3RhbmNlU2NhbGUgPSBuZXcgQ2FydGVzaWFuMygpO1xuICB2YXIgaW5zdGFuY2VUcmFuc2xhdGlvblJvdGF0aW9uU2NhbGUgPSBuZXcgVHJhbnNsYXRpb25Sb3RhdGlvblNjYWxlKCk7XG4gIHZhciBpbnN0YW5jZVRyYW5zZm9ybSA9IG5ldyBNYXRyaXg0KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2VzTGVuZ3RoOyBpKyspIHtcbiAgICAvLyBHZXQgdGhlIGluc3RhbmNlIHBvc2l0aW9uXG4gICAgdmFyIHBvc2l0aW9uID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5KFxuICAgICAgXCJQT1NJVElPTlwiLFxuICAgICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAzLFxuICAgICAgaSxcbiAgICAgIHByb3BlcnR5U2NyYXRjaDFcbiAgICApO1xuICAgIGlmICghZGVmaW5lZChwb3NpdGlvbikpIHtcbiAgICAgIHBvc2l0aW9uID0gaW5zdGFuY2VQb3NpdGlvbkFycmF5O1xuICAgICAgdmFyIHBvc2l0aW9uUXVhbnRpemVkID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5KFxuICAgICAgICBcIlBPU0lUSU9OX1FVQU5USVpFRFwiLFxuICAgICAgICBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9TSE9SVCxcbiAgICAgICAgMyxcbiAgICAgICAgaSxcbiAgICAgICAgcHJvcGVydHlTY3JhdGNoMVxuICAgICAgKTtcbiAgICAgIGlmICghZGVmaW5lZChwb3NpdGlvblF1YW50aXplZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgICAgICBcIkVpdGhlciBQT1NJVElPTiBvciBQT1NJVElPTl9RVUFOVElaRUQgbXVzdCBiZSBkZWZpbmVkIGZvciBlYWNoIGluc3RhbmNlLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2YXIgcXVhbnRpemVkVm9sdW1lT2Zmc2V0ID0gZmVhdHVyZVRhYmxlLmdldEdsb2JhbFByb3BlcnR5KFxuICAgICAgICBcIlFVQU5USVpFRF9WT0xVTUVfT0ZGU0VUXCIsXG4gICAgICAgIENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgICAzXG4gICAgICApO1xuICAgICAgaWYgKCFkZWZpbmVkKHF1YW50aXplZFZvbHVtZU9mZnNldCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgICAgICBcIkdsb2JhbCBwcm9wZXJ0eTogUVVBTlRJWkVEX1ZPTFVNRV9PRkZTRVQgbXVzdCBiZSBkZWZpbmVkIGZvciBxdWFudGl6ZWQgcG9zaXRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2YXIgcXVhbnRpemVkVm9sdW1lU2NhbGUgPSBmZWF0dXJlVGFibGUuZ2V0R2xvYmFsUHJvcGVydHkoXG4gICAgICAgIFwiUVVBTlRJWkVEX1ZPTFVNRV9TQ0FMRVwiLFxuICAgICAgICBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgM1xuICAgICAgKTtcbiAgICAgIGlmICghZGVmaW5lZChxdWFudGl6ZWRWb2x1bWVTY2FsZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgICAgICBcIkdsb2JhbCBwcm9wZXJ0eTogUVVBTlRJWkVEX1ZPTFVNRV9TQ0FMRSBtdXN0IGJlIGRlZmluZWQgZm9yIHF1YW50aXplZCBwb3NpdGlvbnMuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIHBvc2l0aW9uW2pdID1cbiAgICAgICAgICAocG9zaXRpb25RdWFudGl6ZWRbal0gLyA2NTUzNS4wKSAqIHF1YW50aXplZFZvbHVtZVNjYWxlW2pdICtcbiAgICAgICAgICBxdWFudGl6ZWRWb2x1bWVPZmZzZXRbal07XG4gICAgICB9XG4gICAgfVxuICAgIENhcnRlc2lhbjMudW5wYWNrKHBvc2l0aW9uLCAwLCBpbnN0YW5jZVBvc2l0aW9uKTtcbiAgICBpZiAoZGVmaW5lZChydGNDZW50ZXIpKSB7XG4gICAgICBDYXJ0ZXNpYW4zLmFkZChpbnN0YW5jZVBvc2l0aW9uLCBydGNDZW50ZXIsIGluc3RhbmNlUG9zaXRpb24pO1xuICAgIH1cbiAgICBpbnN0YW5jZVRyYW5zbGF0aW9uUm90YXRpb25TY2FsZS50cmFuc2xhdGlvbiA9IGluc3RhbmNlUG9zaXRpb247XG5cbiAgICAvLyBHZXQgdGhlIGluc3RhbmNlIHJvdGF0aW9uXG4gICAgdmFyIG5vcm1hbFVwID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5KFxuICAgICAgXCJOT1JNQUxfVVBcIixcbiAgICAgIENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgMyxcbiAgICAgIGksXG4gICAgICBwcm9wZXJ0eVNjcmF0Y2gxXG4gICAgKTtcbiAgICB2YXIgbm9ybWFsUmlnaHQgPSBmZWF0dXJlVGFibGUuZ2V0UHJvcGVydHkoXG4gICAgICBcIk5PUk1BTF9SSUdIVFwiLFxuICAgICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAzLFxuICAgICAgaSxcbiAgICAgIHByb3BlcnR5U2NyYXRjaDJcbiAgICApO1xuICAgIHZhciBoYXNDdXN0b21PcmllbnRhdGlvbiA9IGZhbHNlO1xuICAgIGlmIChkZWZpbmVkKG5vcm1hbFVwKSkge1xuICAgICAgaWYgKCFkZWZpbmVkKG5vcm1hbFJpZ2h0KSkge1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgICAgIFwiVG8gZGVmaW5lIGEgY3VzdG9tIG9yaWVudGF0aW9uLCBib3RoIE5PUk1BTF9VUCBhbmQgTk9STUFMX1JJR0hUIG11c3QgYmUgZGVmaW5lZC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgQ2FydGVzaWFuMy51bnBhY2sobm9ybWFsVXAsIDAsIGluc3RhbmNlTm9ybWFsVXApO1xuICAgICAgQ2FydGVzaWFuMy51bnBhY2sobm9ybWFsUmlnaHQsIDAsIGluc3RhbmNlTm9ybWFsUmlnaHQpO1xuICAgICAgaGFzQ3VzdG9tT3JpZW50YXRpb24gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb2N0Tm9ybWFsVXAgPSBmZWF0dXJlVGFibGUuZ2V0UHJvcGVydHkoXG4gICAgICAgIFwiTk9STUFMX1VQX09DVDMyUFwiLFxuICAgICAgICBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9TSE9SVCxcbiAgICAgICAgMixcbiAgICAgICAgaSxcbiAgICAgICAgcHJvcGVydHlTY3JhdGNoMVxuICAgICAgKTtcbiAgICAgIHZhciBvY3ROb3JtYWxSaWdodCA9IGZlYXR1cmVUYWJsZS5nZXRQcm9wZXJ0eShcbiAgICAgICAgXCJOT1JNQUxfUklHSFRfT0NUMzJQXCIsXG4gICAgICAgIENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX1NIT1JULFxuICAgICAgICAyLFxuICAgICAgICBpLFxuICAgICAgICBwcm9wZXJ0eVNjcmF0Y2gyXG4gICAgICApO1xuICAgICAgaWYgKGRlZmluZWQob2N0Tm9ybWFsVXApKSB7XG4gICAgICAgIGlmICghZGVmaW5lZChvY3ROb3JtYWxSaWdodCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgICAgICAgXCJUbyBkZWZpbmUgYSBjdXN0b20gb3JpZW50YXRpb24gd2l0aCBvY3QtZW5jb2RlZCB2ZWN0b3JzLCBib3RoIE5PUk1BTF9VUF9PQ1QzMlAgYW5kIE5PUk1BTF9SSUdIVF9PQ1QzMlAgbXVzdCBiZSBkZWZpbmVkLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBBdHRyaWJ1dGVDb21wcmVzc2lvbi5vY3REZWNvZGVJblJhbmdlKFxuICAgICAgICAgIG9jdE5vcm1hbFVwWzBdLFxuICAgICAgICAgIG9jdE5vcm1hbFVwWzFdLFxuICAgICAgICAgIDY1NTM1LFxuICAgICAgICAgIGluc3RhbmNlTm9ybWFsVXBcbiAgICAgICAgKTtcbiAgICAgICAgQXR0cmlidXRlQ29tcHJlc3Npb24ub2N0RGVjb2RlSW5SYW5nZShcbiAgICAgICAgICBvY3ROb3JtYWxSaWdodFswXSxcbiAgICAgICAgICBvY3ROb3JtYWxSaWdodFsxXSxcbiAgICAgICAgICA2NTUzNSxcbiAgICAgICAgICBpbnN0YW5jZU5vcm1hbFJpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGhhc0N1c3RvbU9yaWVudGF0aW9uID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZWFzdE5vcnRoVXApIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShcbiAgICAgICAgICBpbnN0YW5jZVBvc2l0aW9uLFxuICAgICAgICAgIEVsbGlwc29pZC5XR1M4NCxcbiAgICAgICAgICBpbnN0YW5jZVRyYW5zZm9ybVxuICAgICAgICApO1xuICAgICAgICBNYXRyaXg0LmdldE1hdHJpeDMoaW5zdGFuY2VUcmFuc2Zvcm0sIGluc3RhbmNlUm90YXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTWF0cml4My5jbG9uZShNYXRyaXgzLklERU5USVRZLCBpbnN0YW5jZVJvdGF0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc0N1c3RvbU9yaWVudGF0aW9uKSB7XG4gICAgICBDYXJ0ZXNpYW4zLmNyb3NzKFxuICAgICAgICBpbnN0YW5jZU5vcm1hbFJpZ2h0LFxuICAgICAgICBpbnN0YW5jZU5vcm1hbFVwLFxuICAgICAgICBpbnN0YW5jZU5vcm1hbEZvcndhcmRcbiAgICAgICk7XG4gICAgICBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShpbnN0YW5jZU5vcm1hbEZvcndhcmQsIGluc3RhbmNlTm9ybWFsRm9yd2FyZCk7XG4gICAgICBNYXRyaXgzLnNldENvbHVtbihcbiAgICAgICAgaW5zdGFuY2VSb3RhdGlvbixcbiAgICAgICAgMCxcbiAgICAgICAgaW5zdGFuY2VOb3JtYWxSaWdodCxcbiAgICAgICAgaW5zdGFuY2VSb3RhdGlvblxuICAgICAgKTtcbiAgICAgIE1hdHJpeDMuc2V0Q29sdW1uKFxuICAgICAgICBpbnN0YW5jZVJvdGF0aW9uLFxuICAgICAgICAxLFxuICAgICAgICBpbnN0YW5jZU5vcm1hbFVwLFxuICAgICAgICBpbnN0YW5jZVJvdGF0aW9uXG4gICAgICApO1xuICAgICAgTWF0cml4My5zZXRDb2x1bW4oXG4gICAgICAgIGluc3RhbmNlUm90YXRpb24sXG4gICAgICAgIDIsXG4gICAgICAgIGluc3RhbmNlTm9ybWFsRm9yd2FyZCxcbiAgICAgICAgaW5zdGFuY2VSb3RhdGlvblxuICAgICAgKTtcbiAgICB9XG4gICAgUXVhdGVybmlvbi5mcm9tUm90YXRpb25NYXRyaXgoaW5zdGFuY2VSb3RhdGlvbiwgaW5zdGFuY2VRdWF0ZXJuaW9uKTtcbiAgICBpbnN0YW5jZVRyYW5zbGF0aW9uUm90YXRpb25TY2FsZS5yb3RhdGlvbiA9IGluc3RhbmNlUXVhdGVybmlvbjtcblxuICAgIC8vIEdldCB0aGUgaW5zdGFuY2Ugc2NhbGVcbiAgICBpbnN0YW5jZVNjYWxlID0gQ2FydGVzaWFuMy5mcm9tRWxlbWVudHMoMS4wLCAxLjAsIDEuMCwgaW5zdGFuY2VTY2FsZSk7XG4gICAgdmFyIHNjYWxlID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5KFxuICAgICAgXCJTQ0FMRVwiLFxuICAgICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAxLFxuICAgICAgaVxuICAgICk7XG4gICAgaWYgKGRlZmluZWQoc2NhbGUpKSB7XG4gICAgICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoaW5zdGFuY2VTY2FsZSwgc2NhbGUsIGluc3RhbmNlU2NhbGUpO1xuICAgIH1cbiAgICB2YXIgbm9uVW5pZm9ybVNjYWxlID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5KFxuICAgICAgXCJTQ0FMRV9OT05fVU5JRk9STVwiLFxuICAgICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAzLFxuICAgICAgaSxcbiAgICAgIHByb3BlcnR5U2NyYXRjaDFcbiAgICApO1xuICAgIGlmIChkZWZpbmVkKG5vblVuaWZvcm1TY2FsZSkpIHtcbiAgICAgIGluc3RhbmNlU2NhbGUueCAqPSBub25Vbmlmb3JtU2NhbGVbMF07XG4gICAgICBpbnN0YW5jZVNjYWxlLnkgKj0gbm9uVW5pZm9ybVNjYWxlWzFdO1xuICAgICAgaW5zdGFuY2VTY2FsZS56ICo9IG5vblVuaWZvcm1TY2FsZVsyXTtcbiAgICB9XG4gICAgaW5zdGFuY2VUcmFuc2xhdGlvblJvdGF0aW9uU2NhbGUuc2NhbGUgPSBpbnN0YW5jZVNjYWxlO1xuXG4gICAgLy8gR2V0IHRoZSBiYXRjaElkXG4gICAgdmFyIGJhdGNoSWQgPSBmZWF0dXJlVGFibGUuZ2V0UHJvcGVydHkoXG4gICAgICBcIkJBVENIX0lEXCIsXG4gICAgICBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9TSE9SVCxcbiAgICAgIDEsXG4gICAgICBpXG4gICAgKTtcbiAgICBpZiAoIWRlZmluZWQoYmF0Y2hJZCkpIHtcbiAgICAgIC8vIElmIEJBVENIX0lEIHNlbWFudGljIGlzIHVuZGVmaW5lZCwgYmF0Y2hJZCBpcyBqdXN0IHRoZSBpbnN0YW5jZSBudW1iZXJcbiAgICAgIGJhdGNoSWQgPSBpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgbW9kZWwgbWF0cml4IGFuZCB0aGUgaW5zdGFuY2VcbiAgICBNYXRyaXg0LmZyb21UcmFuc2xhdGlvblJvdGF0aW9uU2NhbGUoXG4gICAgICBpbnN0YW5jZVRyYW5zbGF0aW9uUm90YXRpb25TY2FsZSxcbiAgICAgIGluc3RhbmNlVHJhbnNmb3JtXG4gICAgKTtcbiAgICB2YXIgbW9kZWxNYXRyaXggPSBpbnN0YW5jZVRyYW5zZm9ybS5jbG9uZSgpO1xuICAgIGluc3RhbmNlc1tpXSA9IHtcbiAgICAgIG1vZGVsTWF0cml4OiBtb2RlbE1hdHJpeCxcbiAgICAgIGJhdGNoSWQ6IGJhdGNoSWQsXG4gICAgfTtcbiAgfVxuXG4gIGNvbnRlbnQuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uID0gbmV3IE1vZGVsSW5zdGFuY2VDb2xsZWN0aW9uKFxuICAgIGNvbGxlY3Rpb25PcHRpb25zXG4gICk7XG4gIGNvbnRlbnQuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLnJlYWR5UHJvbWlzZS50aGVuKGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG4gICAgY29sbGVjdGlvbi5hY3RpdmVBbmltYXRpb25zLmFkZEFsbCh7XG4gICAgICBsb29wOiBNb2RlbEFuaW1hdGlvbkxvb3AuUkVQRUFULFxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRmVhdHVyZXMoY29udGVudCkge1xuICB2YXIgZmVhdHVyZXNMZW5ndGggPSBjb250ZW50LmZlYXR1cmVzTGVuZ3RoO1xuICBpZiAoIWRlZmluZWQoY29udGVudC5fZmVhdHVyZXMpICYmIGZlYXR1cmVzTGVuZ3RoID4gMCkge1xuICAgIHZhciBmZWF0dXJlcyA9IG5ldyBBcnJheShmZWF0dXJlc0xlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWF0dXJlc0xlbmd0aDsgKytpKSB7XG4gICAgICBmZWF0dXJlc1tpXSA9IG5ldyBDZXNpdW0zRFRpbGVGZWF0dXJlKGNvbnRlbnQsIGkpO1xuICAgIH1cbiAgICBjb250ZW50Ll9mZWF0dXJlcyA9IGZlYXR1cmVzO1xuICB9XG59XG5cbkluc3RhbmNlZDNETW9kZWwzRFRpbGVDb250ZW50LnByb3RvdHlwZS5oYXNQcm9wZXJ0eSA9IGZ1bmN0aW9uIChiYXRjaElkLCBuYW1lKSB7XG4gIHJldHVybiB0aGlzLl9iYXRjaFRhYmxlLmhhc1Byb3BlcnR5KGJhdGNoSWQsIG5hbWUpO1xufTtcblxuSW5zdGFuY2VkM0RNb2RlbDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmdldEZlYXR1cmUgPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xuICB2YXIgZmVhdHVyZXNMZW5ndGggPSB0aGlzLmZlYXR1cmVzTGVuZ3RoO1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoYmF0Y2hJZCkgfHwgYmF0Y2hJZCA8IDAgfHwgYmF0Y2hJZCA+PSBmZWF0dXJlc0xlbmd0aCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiYmF0Y2hJZCBpcyByZXF1aXJlZCBhbmQgYmV0d2VlbiB6ZXJvIGFuZCBmZWF0dXJlc0xlbmd0aCAtIDEgKFwiICtcbiAgICAgICAgKGZlYXR1cmVzTGVuZ3RoIC0gMSkgK1xuICAgICAgICBcIikuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGNyZWF0ZUZlYXR1cmVzKHRoaXMpO1xuICByZXR1cm4gdGhpcy5fZmVhdHVyZXNbYmF0Y2hJZF07XG59O1xuXG5JbnN0YW5jZWQzRE1vZGVsM0RUaWxlQ29udGVudC5wcm90b3R5cGUuYXBwbHlEZWJ1Z1NldHRpbmdzID0gZnVuY3Rpb24gKFxuICBlbmFibGVkLFxuICBjb2xvclxuKSB7XG4gIGNvbG9yID0gZW5hYmxlZCA/IGNvbG9yIDogQ29sb3IuV0hJVEU7XG4gIHRoaXMuX2JhdGNoVGFibGUuc2V0QWxsQ29sb3IoY29sb3IpO1xufTtcblxuSW5zdGFuY2VkM0RNb2RlbDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUpIHtcbiAgdGhpcy5fYmF0Y2hUYWJsZS5hcHBseVN0eWxlKHN0eWxlKTtcbn07XG5cbkluc3RhbmNlZDNETW9kZWwzRFRpbGVDb250ZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoXG4gIHRpbGVzZXQsXG4gIGZyYW1lU3RhdGVcbikge1xuICB2YXIgY29tbWFuZFN0YXJ0ID0gZnJhbWVTdGF0ZS5jb21tYW5kTGlzdC5sZW5ndGg7XG5cbiAgLy8gSW4gdGhlIFBST0NFU1NJTkcgc3RhdGUgd2UgbWF5IGJlIGNhbGxpbmcgdXBkYXRlKCkgdG8gbW92ZSBmb3J3YXJkXG4gIC8vIHRoZSBjb250ZW50J3MgcmVzb3VyY2UgbG9hZGluZy4gIEluIHRoZSBSRUFEWSBzdGF0ZSwgaXQgd2lsbFxuICAvLyBhY3R1YWxseSBnZW5lcmF0ZSBjb21tYW5kcy5cbiAgdGhpcy5fYmF0Y2hUYWJsZS51cGRhdGUodGlsZXNldCwgZnJhbWVTdGF0ZSk7XG4gIHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLm1vZGVsTWF0cml4ID0gdGhpcy5fdGlsZS5jb21wdXRlZFRyYW5zZm9ybTtcbiAgdGhpcy5fbW9kZWxJbnN0YW5jZUNvbGxlY3Rpb24uc2hhZG93cyA9IHRoaXMuX3RpbGVzZXQuc2hhZG93cztcbiAgdGhpcy5fbW9kZWxJbnN0YW5jZUNvbGxlY3Rpb24ubGlnaHRDb2xvciA9IHRoaXMuX3RpbGVzZXQubGlnaHRDb2xvcjtcbiAgdGhpcy5fbW9kZWxJbnN0YW5jZUNvbGxlY3Rpb24ubHVtaW5hbmNlQXRaZW5pdGggPSB0aGlzLl90aWxlc2V0Lmx1bWluYW5jZUF0WmVuaXRoO1xuICB0aGlzLl9tb2RlbEluc3RhbmNlQ29sbGVjdGlvbi5zcGhlcmljYWxIYXJtb25pY0NvZWZmaWNpZW50cyA9IHRoaXMuX3RpbGVzZXQuc3BoZXJpY2FsSGFybW9uaWNDb2VmZmljaWVudHM7XG4gIHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLnNwZWN1bGFyRW52aXJvbm1lbnRNYXBzID0gdGhpcy5fdGlsZXNldC5zcGVjdWxhckVudmlyb25tZW50TWFwcztcbiAgdGhpcy5fbW9kZWxJbnN0YW5jZUNvbGxlY3Rpb24uYmFja0ZhY2VDdWxsaW5nID0gdGhpcy5fdGlsZXNldC5iYWNrRmFjZUN1bGxpbmc7XG4gIHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLmRlYnVnV2lyZWZyYW1lID0gdGhpcy5fdGlsZXNldC5kZWJ1Z1dpcmVmcmFtZTtcblxuICB2YXIgbW9kZWwgPSB0aGlzLl9tb2RlbEluc3RhbmNlQ29sbGVjdGlvbi5fbW9kZWw7XG5cbiAgaWYgKGRlZmluZWQobW9kZWwpKSB7XG4gICAgLy8gVXBkYXRlIGZvciBjbGlwcGluZyBwbGFuZXNcbiAgICB2YXIgdGlsZXNldENsaXBwaW5nUGxhbmVzID0gdGhpcy5fdGlsZXNldC5jbGlwcGluZ1BsYW5lcztcbiAgICBtb2RlbC5yZWZlcmVuY2VNYXRyaXggPSB0aGlzLl90aWxlc2V0LmNsaXBwaW5nUGxhbmVzT3JpZ2luTWF0cml4O1xuICAgIGlmIChkZWZpbmVkKHRpbGVzZXRDbGlwcGluZ1BsYW5lcykgJiYgdGhpcy5fdGlsZS5jbGlwcGluZ1BsYW5lc0RpcnR5KSB7XG4gICAgICAvLyBEZXJlZmVyZW5jZSB0aGUgY2xpcHBpbmcgcGxhbmVzIGZyb20gdGhlIG1vZGVsIGlmIHRoZXkgYXJlIGlycmVsZXZhbnQgLSBzYXZlcyBvbiBzaGFkaW5nXG4gICAgICAvLyBMaW5rL0RlcmVmZXJlbmNlIGRpcmVjdGx5IHRvIGF2b2lkIG93bmVyc2hpcCBjaGVja3MuXG4gICAgICBtb2RlbC5fY2xpcHBpbmdQbGFuZXMgPVxuICAgICAgICB0aWxlc2V0Q2xpcHBpbmdQbGFuZXMuZW5hYmxlZCAmJiB0aGlzLl90aWxlLl9pc0NsaXBwZWRcbiAgICAgICAgICA/IHRpbGVzZXRDbGlwcGluZ1BsYW5lc1xuICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBtb2RlbCByZWZlcmVuY2VzIGEgZGlmZmVyZW50IENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uIGR1ZSB0byB0aGUgdGlsZXNldCdzIGNvbGxlY3Rpb24gYmVpbmcgcmVwbGFjZWQgd2l0aCBhXG4gICAgLy8gQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24gdGhhdCBnaXZlcyB0aGlzIHRpbGUgdGhlIHNhbWUgY2xpcHBpbmcgc3RhdHVzLCB1cGRhdGUgdGhlIG1vZGVsIHRvIHVzZSB0aGUgbmV3IENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLlxuICAgIGlmIChcbiAgICAgIGRlZmluZWQodGlsZXNldENsaXBwaW5nUGxhbmVzKSAmJlxuICAgICAgZGVmaW5lZChtb2RlbC5fY2xpcHBpbmdQbGFuZXMpICYmXG4gICAgICBtb2RlbC5fY2xpcHBpbmdQbGFuZXMgIT09IHRpbGVzZXRDbGlwcGluZ1BsYW5lc1xuICAgICkge1xuICAgICAgbW9kZWwuX2NsaXBwaW5nUGxhbmVzID0gdGlsZXNldENsaXBwaW5nUGxhbmVzO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLnVwZGF0ZShmcmFtZVN0YXRlKTtcblxuICAvLyBJZiBhbnkgY29tbWFuZHMgd2VyZSBwdXNoZWQsIGFkZCBkZXJpdmVkIGNvbW1hbmRzXG4gIHZhciBjb21tYW5kRW5kID0gZnJhbWVTdGF0ZS5jb21tYW5kTGlzdC5sZW5ndGg7XG4gIGlmIChcbiAgICBjb21tYW5kU3RhcnQgPCBjb21tYW5kRW5kICYmXG4gICAgKGZyYW1lU3RhdGUucGFzc2VzLnJlbmRlciB8fCBmcmFtZVN0YXRlLnBhc3Nlcy5waWNrKVxuICApIHtcbiAgICB0aGlzLl9iYXRjaFRhYmxlLmFkZERlcml2ZWRDb21tYW5kcyhmcmFtZVN0YXRlLCBjb21tYW5kU3RhcnQsIGZhbHNlKTtcbiAgfVxufTtcblxuSW5zdGFuY2VkM0RNb2RlbDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG5JbnN0YW5jZWQzRE1vZGVsM0RUaWxlQ29udGVudC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fbW9kZWxJbnN0YW5jZUNvbGxlY3Rpb24gPVxuICAgIHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uICYmIHRoaXMuX21vZGVsSW5zdGFuY2VDb2xsZWN0aW9uLmRlc3Ryb3koKTtcbiAgdGhpcy5fYmF0Y2hUYWJsZSA9IHRoaXMuX2JhdGNoVGFibGUgJiYgdGhpcy5fYmF0Y2hUYWJsZS5kZXN0cm95KCk7XG5cbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgSW5zdGFuY2VkM0RNb2RlbDNEVGlsZUNvbnRlbnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///83472\n')},94229:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86511);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(38443);\n/* harmony import */ var _Renderer_ClearCommand_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39899);\n/* harmony import */ var _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2932);\n/* harmony import */ var _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21572);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87721);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(53642);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(8743);\n/* harmony import */ var _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(42246);\n/* harmony import */ var _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(80188);\n/* harmony import */ var _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(88453);\n/* harmony import */ var _Shaders_PostProcessStages_PassThrough_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(7571);\n/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(13633);\n/* harmony import */ var _StencilConstants_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(87233);\n/* harmony import */ var _StencilFunction_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(77053);\n/* harmony import */ var _StencilOperation_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(81255);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @private\n */\nfunction InvertClassification() {\n  this.previousFramebuffer = undefined;\n  this._previousFramebuffer = undefined;\n\n  this._texture = undefined;\n  this._classifiedTexture = undefined;\n  this._depthStencilTexture = undefined;\n  this._fbo = undefined;\n  this._fboClassified = undefined;\n\n  this._rsUnclassified = undefined;\n  this._rsClassified = undefined;\n\n  this._unclassifiedCommand = undefined;\n  this._classifiedCommand = undefined;\n  this._translucentCommand = undefined;\n\n  this._clearColorCommand = new _Renderer_ClearCommand_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({\n    color: new _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(0.0, 0.0, 0.0, 0.0),\n    owner: this,\n  });\n  this._clearCommand = new _Renderer_ClearCommand_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({\n    color: new _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(0.0, 0.0, 0.0, 0.0),\n    depth: 1.0,\n    stencil: 0,\n  });\n\n  var that = this;\n  this._uniformMap = {\n    colorTexture: function () {\n      return that._texture;\n    },\n    depthTexture: function () {\n      return that._depthStencilTexture;\n    },\n    classifiedTexture: function () {\n      return that._classifiedTexture;\n    },\n  };\n}\n\nObject.defineProperties(InvertClassification.prototype, {\n  unclassifiedCommand: {\n    get: function () {\n      return this._unclassifiedCommand;\n    },\n  },\n});\n\nInvertClassification.isTranslucencySupported = function (context) {\n  return context.depthTexture && context.fragmentDepth;\n};\n\nvar rsUnclassified = {\n  depthMask: false,\n  stencilTest: {\n    enabled: true,\n    frontFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EQUAL */ .Z.EQUAL,\n    frontOperation: {\n      fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].KEEP */ .Z.KEEP,\n      zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].KEEP */ .Z.KEEP,\n      zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].KEEP */ .Z.KEEP,\n    },\n    backFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NEVER */ .Z.NEVER,\n    reference: 0,\n    mask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].CLASSIFICATION_MASK */ .Z.CLASSIFICATION_MASK,\n  },\n  blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n};\n\nvar rsClassified = {\n  depthMask: false,\n  stencilTest: {\n    enabled: true,\n    frontFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NOT_EQUAL */ .Z.NOT_EQUAL,\n    frontOperation: {\n      fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].KEEP */ .Z.KEEP,\n      zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].KEEP */ .Z.KEEP,\n      zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].KEEP */ .Z.KEEP,\n    },\n    backFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NEVER */ .Z.NEVER,\n    reference: 0,\n    mask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].CLASSIFICATION_MASK */ .Z.CLASSIFICATION_MASK,\n  },\n  blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n};\n\n// Set the 3D Tiles bit when rendering back into the scene\'s framebuffer. This is only needed if\n// invert classification does not use the scene\'s depth-stencil texture, which is the case if the invert\n// classification color is translucent.\nvar rsDefault = {\n  depthMask: true,\n  depthTest: {\n    enabled: true,\n  },\n  stencilTest: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].setCesium3DTileBit */ .Z.setCesium3DTileBit(),\n  stencilMask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK,\n  blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n};\n\nvar translucentFS =\n  "#extension GL_EXT_frag_depth : enable\\n" +\n  "uniform sampler2D colorTexture;\\n" +\n  "uniform sampler2D depthTexture;\\n" +\n  "uniform sampler2D classifiedTexture;\\n" +\n  "varying vec2 v_textureCoordinates;\\n" +\n  "void main()\\n" +\n  "{\\n" +\n  "    vec4 color = texture2D(colorTexture, v_textureCoordinates);\\n" +\n  "    if (color.a == 0.0)\\n" +\n  "    {\\n" +\n  "        discard;\\n" +\n  "    }\\n" +\n  "    bool isClassified = all(equal(texture2D(classifiedTexture, v_textureCoordinates), vec4(0.0)));\\n" +\n  "#ifdef UNCLASSIFIED\\n" +\n  "    vec4 highlightColor = czm_invertClassificationColor;\\n" +\n  "    if (isClassified)\\n" +\n  "    {\\n" +\n  "        discard;\\n" +\n  "    }\\n" +\n  "#else\\n" +\n  "    vec4 highlightColor = vec4(1.0);\\n" +\n  "    if (!isClassified)\\n" +\n  "    {\\n" +\n  "        discard;\\n" +\n  "    }\\n" +\n  "#endif\\n" +\n  "    gl_FragColor = color * highlightColor;\\n" +\n  "    gl_FragDepthEXT = texture2D(depthTexture, v_textureCoordinates).r;\\n" +\n  "}\\n";\n\nvar opaqueFS =\n  "uniform sampler2D colorTexture;\\n" +\n  "varying vec2 v_textureCoordinates;\\n" +\n  "void main()\\n" +\n  "{\\n" +\n  "    vec4 color = texture2D(colorTexture, v_textureCoordinates);\\n" +\n  "    if (color.a == 0.0)\\n" +\n  "    {\\n" +\n  "        discard;\\n" +\n  "    }\\n" +\n  "#ifdef UNCLASSIFIED\\n" +\n  "    gl_FragColor = color * czm_invertClassificationColor;\\n" +\n  "#else\\n" +\n  "    gl_FragColor = color;\\n" +\n  "#endif\\n" +\n  "}\\n";\n\nInvertClassification.prototype.update = function (context) {\n  var texture = this._texture;\n  var previousFramebufferChanged =\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(texture) || this.previousFramebuffer !== this._previousFramebuffer;\n  this._previousFramebuffer = this.previousFramebuffer;\n\n  var width = context.drawingBufferWidth;\n  var height = context.drawingBufferHeight;\n\n  var textureChanged =\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(texture) || texture.width !== width || texture.height !== height;\n  if (textureChanged || previousFramebufferChanged) {\n    this._texture = this._texture && this._texture.destroy();\n    this._classifiedTexture =\n      this._classifiedTexture && this._classifiedTexture.destroy();\n    this._depthStencilTexture =\n      this._depthStencilTexture && this._depthStencilTexture.destroy();\n\n    this._texture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n      context: context,\n      width: width,\n      height: height,\n      pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].RGBA */ .Z.RGBA,\n      pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n      sampler: new _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n        wrapS: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n        wrapT: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n        minificationFilter: _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LINEAR */ .Z.LINEAR,\n        magnificationFilter: _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].LINEAR */ .Z.LINEAR,\n      }),\n    });\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)) {\n      this._classifiedTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n        context: context,\n        width: width,\n        height: height,\n        pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].RGBA */ .Z.RGBA,\n        pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n        sampler: new _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n          wrapS: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n          wrapT: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n          minificationFilter: _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LINEAR */ .Z.LINEAR,\n          magnificationFilter: _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].LINEAR */ .Z.LINEAR,\n        }),\n      });\n      this._depthStencilTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n        context: context,\n        width: width,\n        height: height,\n        pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].DEPTH_STENCIL */ .Z.DEPTH_STENCIL,\n        pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].UNSIGNED_INT_24_8 */ .Z.UNSIGNED_INT_24_8,\n      });\n    }\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._fbo) || textureChanged || previousFramebufferChanged) {\n    this._fbo = this._fbo && this._fbo.destroy();\n    this._fboClassified = this._fboClassified && this._fboClassified.destroy();\n\n    var depthStencilTexture;\n    var depthStencilRenderbuffer;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)) {\n      depthStencilTexture = this._previousFramebuffer.depthStencilTexture;\n      depthStencilRenderbuffer = this._previousFramebuffer\n        .depthStencilRenderbuffer;\n    } else {\n      depthStencilTexture = this._depthStencilTexture;\n    }\n\n    this._fbo = new _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z({\n      context: context,\n      colorTextures: [this._texture],\n      depthStencilTexture: depthStencilTexture,\n      depthStencilRenderbuffer: depthStencilRenderbuffer,\n      destroyAttachments: false,\n    });\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)) {\n      this._fboClassified = new _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z({\n        context: context,\n        colorTextures: [this._classifiedTexture],\n        depthStencilTexture: depthStencilTexture,\n        destroyAttachments: false,\n      });\n    }\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._rsUnclassified)) {\n    this._rsUnclassified = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fromCache */ .Z.fromCache(rsUnclassified);\n    this._rsClassified = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fromCache */ .Z.fromCache(rsClassified);\n    this._rsDefault = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fromCache */ .Z.fromCache(rsDefault);\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._unclassifiedCommand) || previousFramebufferChanged) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._unclassifiedCommand)) {\n      this._unclassifiedCommand.shaderProgram =\n        this._unclassifiedCommand.shaderProgram &&\n        this._unclassifiedCommand.shaderProgram.destroy();\n      this._classifiedCommand.shaderProgram =\n        this._classifiedCommand.shaderProgram &&\n        this._classifiedCommand.shaderProgram.destroy();\n    }\n\n    var fs = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer) ? opaqueFS : translucentFS;\n    var unclassifiedFSSource = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n      defines: ["UNCLASSIFIED"],\n      sources: [fs],\n    });\n    var classifiedFSSource = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n      sources: [fs],\n    });\n    this._unclassifiedCommand = context.createViewportQuadCommand(\n      unclassifiedFSSource,\n      {\n        renderState: (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)\n          ? this._rsUnclassified\n          : this._rsDefault,\n        uniformMap: this._uniformMap,\n        owner: this,\n      }\n    );\n    this._classifiedCommand = context.createViewportQuadCommand(\n      classifiedFSSource,\n      {\n        renderState: (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)\n          ? this._rsClassified\n          : this._rsDefault,\n        uniformMap: this._uniformMap,\n        owner: this,\n      }\n    );\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._translucentCommand)) {\n      this._translucentCommand.shaderProgram =\n        this._translucentCommand.shaderProgram &&\n        this._translucentCommand.shaderProgram.destroy();\n    }\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)) {\n      this._translucentCommand = context.createViewportQuadCommand(\n        _Shaders_PostProcessStages_PassThrough_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z,\n        {\n          renderState: this._rsUnclassified,\n          uniformMap: this._uniformMap,\n          owner: this,\n        }\n      );\n    }\n  }\n};\n\nInvertClassification.prototype.clear = function (context, passState) {\n  var framebuffer = passState.framebuffer;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)) {\n    passState.framebuffer = this._fbo;\n    this._clearColorCommand.execute(context, passState);\n  } else {\n    passState.framebuffer = this._fbo;\n    this._clearCommand.execute(context, passState);\n    passState.framebuffer = this._fboClassified;\n    this._clearCommand.execute(context, passState);\n  }\n\n  passState.framebuffer = framebuffer;\n};\n\nInvertClassification.prototype.executeClassified = function (\n  context,\n  passState\n) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._previousFramebuffer)) {\n    var framebuffer = passState.framebuffer;\n\n    passState.framebuffer = this._fboClassified;\n    this._translucentCommand.execute(context, passState);\n\n    passState.framebuffer = framebuffer;\n  }\n  this._classifiedCommand.execute(context, passState);\n};\n\nInvertClassification.prototype.executeUnclassified = function (\n  context,\n  passState\n) {\n  this._unclassifiedCommand.execute(context, passState);\n};\n\nInvertClassification.prototype.isDestroyed = function () {\n  return false;\n};\n\nInvertClassification.prototype.destroy = function () {\n  this._fbo = this._fbo && this._fbo.destroy();\n  this._texture = this._texture && this._texture.destroy();\n  this._depthStencilTexture =\n    this._depthStencilTexture && this._depthStencilTexture.destroy();\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(this._unclassifiedCommand)) {\n    this._unclassifiedCommand.shaderProgram =\n      this._unclassifiedCommand.shaderProgram &&\n      this._unclassifiedCommand.shaderProgram.destroy();\n    this._classifiedCommand.shaderProgram =\n      this._classifiedCommand.shaderProgram &&\n      this._classifiedCommand.shaderProgram.destroy();\n  }\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (InvertClassification);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxNQUFNLHNFQUFPO0FBQ2I7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHNFQUFPO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxzRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVMsMkVBQWE7QUFDdEI7QUFDQSx5REFBZSxvQkFBb0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9JbnZlcnRDbGFzc2lmaWNhdGlvbi5qcz9kMjg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb2xvciBmcm9tIFwiLi4vQ29yZS9Db2xvci5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IFBpeGVsRm9ybWF0IGZyb20gXCIuLi9Db3JlL1BpeGVsRm9ybWF0LmpzXCI7XG5pbXBvcnQgQ2xlYXJDb21tYW5kIGZyb20gXCIuLi9SZW5kZXJlci9DbGVhckNvbW1hbmQuanNcIjtcbmltcG9ydCBGcmFtZWJ1ZmZlciBmcm9tIFwiLi4vUmVuZGVyZXIvRnJhbWVidWZmZXIuanNcIjtcbmltcG9ydCBQaXhlbERhdGF0eXBlIGZyb20gXCIuLi9SZW5kZXJlci9QaXhlbERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgUmVuZGVyU3RhdGUgZnJvbSBcIi4uL1JlbmRlcmVyL1JlbmRlclN0YXRlLmpzXCI7XG5pbXBvcnQgU2FtcGxlciBmcm9tIFwiLi4vUmVuZGVyZXIvU2FtcGxlci5qc1wiO1xuaW1wb3J0IFNoYWRlclNvdXJjZSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyU291cmNlLmpzXCI7XG5pbXBvcnQgVGV4dHVyZSBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZS5qc1wiO1xuaW1wb3J0IFRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyIGZyb20gXCIuLi9SZW5kZXJlci9UZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlci5qc1wiO1xuaW1wb3J0IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIgZnJvbSBcIi4uL1JlbmRlcmVyL1RleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuanNcIjtcbmltcG9ydCBUZXh0dXJlV3JhcCBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZVdyYXAuanNcIjtcbmltcG9ydCBQYXNzVGhyb3VnaCBmcm9tIFwiLi4vU2hhZGVycy9Qb3N0UHJvY2Vzc1N0YWdlcy9QYXNzVGhyb3VnaC5qc1wiO1xuaW1wb3J0IEJsZW5kaW5nU3RhdGUgZnJvbSBcIi4vQmxlbmRpbmdTdGF0ZS5qc1wiO1xuaW1wb3J0IFN0ZW5jaWxDb25zdGFudHMgZnJvbSBcIi4vU3RlbmNpbENvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFN0ZW5jaWxGdW5jdGlvbiBmcm9tIFwiLi9TdGVuY2lsRnVuY3Rpb24uanNcIjtcbmltcG9ydCBTdGVuY2lsT3BlcmF0aW9uIGZyb20gXCIuL1N0ZW5jaWxPcGVyYXRpb24uanNcIjtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBJbnZlcnRDbGFzc2lmaWNhdGlvbigpIHtcbiAgdGhpcy5wcmV2aW91c0ZyYW1lYnVmZmVyID0gdW5kZWZpbmVkO1xuICB0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX3RleHR1cmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2NsYXNzaWZpZWRUZXh0dXJlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9kZXB0aFN0ZW5jaWxUZXh0dXJlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9mYm8gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2Zib0NsYXNzaWZpZWQgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fcnNVbmNsYXNzaWZpZWQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3JzQ2xhc3NpZmllZCA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl91bmNsYXNzaWZpZWRDb21tYW5kID0gdW5kZWZpbmVkO1xuICB0aGlzLl9jbGFzc2lmaWVkQ29tbWFuZCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdHJhbnNsdWNlbnRDb21tYW5kID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX2NsZWFyQ29sb3JDb21tYW5kID0gbmV3IENsZWFyQ29tbWFuZCh7XG4gICAgY29sb3I6IG5ldyBDb2xvcigwLjAsIDAuMCwgMC4wLCAwLjApLFxuICAgIG93bmVyOiB0aGlzLFxuICB9KTtcbiAgdGhpcy5fY2xlYXJDb21tYW5kID0gbmV3IENsZWFyQ29tbWFuZCh7XG4gICAgY29sb3I6IG5ldyBDb2xvcigwLjAsIDAuMCwgMC4wLCAwLjApLFxuICAgIGRlcHRoOiAxLjAsXG4gICAgc3RlbmNpbDogMCxcbiAgfSk7XG5cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB0aGlzLl91bmlmb3JtTWFwID0ge1xuICAgIGNvbG9yVGV4dHVyZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoYXQuX3RleHR1cmU7XG4gICAgfSxcbiAgICBkZXB0aFRleHR1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0Ll9kZXB0aFN0ZW5jaWxUZXh0dXJlO1xuICAgIH0sXG4gICAgY2xhc3NpZmllZFRleHR1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0Ll9jbGFzc2lmaWVkVGV4dHVyZTtcbiAgICB9LFxuICB9O1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhJbnZlcnRDbGFzc2lmaWNhdGlvbi5wcm90b3R5cGUsIHtcbiAgdW5jbGFzc2lmaWVkQ29tbWFuZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3VuY2xhc3NpZmllZENvbW1hbmQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5JbnZlcnRDbGFzc2lmaWNhdGlvbi5pc1RyYW5zbHVjZW5jeVN1cHBvcnRlZCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gIHJldHVybiBjb250ZXh0LmRlcHRoVGV4dHVyZSAmJiBjb250ZXh0LmZyYWdtZW50RGVwdGg7XG59O1xuXG52YXIgcnNVbmNsYXNzaWZpZWQgPSB7XG4gIGRlcHRoTWFzazogZmFsc2UsXG4gIHN0ZW5jaWxUZXN0OiB7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBmcm9udEZ1bmN0aW9uOiBTdGVuY2lsRnVuY3Rpb24uRVFVQUwsXG4gICAgZnJvbnRPcGVyYXRpb246IHtcbiAgICAgIGZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uS0VFUCxcbiAgICAgIHpGYWlsOiBTdGVuY2lsT3BlcmF0aW9uLktFRVAsXG4gICAgICB6UGFzczogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgIH0sXG4gICAgYmFja0Z1bmN0aW9uOiBTdGVuY2lsRnVuY3Rpb24uTkVWRVIsXG4gICAgcmVmZXJlbmNlOiAwLFxuICAgIG1hc2s6IFN0ZW5jaWxDb25zdGFudHMuQ0xBU1NJRklDQVRJT05fTUFTSyxcbiAgfSxcbiAgYmxlbmRpbmc6IEJsZW5kaW5nU3RhdGUuQUxQSEFfQkxFTkQsXG59O1xuXG52YXIgcnNDbGFzc2lmaWVkID0ge1xuICBkZXB0aE1hc2s6IGZhbHNlLFxuICBzdGVuY2lsVGVzdDoge1xuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgZnJvbnRGdW5jdGlvbjogU3RlbmNpbEZ1bmN0aW9uLk5PVF9FUVVBTCxcbiAgICBmcm9udE9wZXJhdGlvbjoge1xuICAgICAgZmFpbDogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgekZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uS0VFUCxcbiAgICAgIHpQYXNzOiBTdGVuY2lsT3BlcmF0aW9uLktFRVAsXG4gICAgfSxcbiAgICBiYWNrRnVuY3Rpb246IFN0ZW5jaWxGdW5jdGlvbi5ORVZFUixcbiAgICByZWZlcmVuY2U6IDAsXG4gICAgbWFzazogU3RlbmNpbENvbnN0YW50cy5DTEFTU0lGSUNBVElPTl9NQVNLLFxuICB9LFxuICBibGVuZGluZzogQmxlbmRpbmdTdGF0ZS5BTFBIQV9CTEVORCxcbn07XG5cbi8vIFNldCB0aGUgM0QgVGlsZXMgYml0IHdoZW4gcmVuZGVyaW5nIGJhY2sgaW50byB0aGUgc2NlbmUncyBmcmFtZWJ1ZmZlci4gVGhpcyBpcyBvbmx5IG5lZWRlZCBpZlxuLy8gaW52ZXJ0IGNsYXNzaWZpY2F0aW9uIGRvZXMgbm90IHVzZSB0aGUgc2NlbmUncyBkZXB0aC1zdGVuY2lsIHRleHR1cmUsIHdoaWNoIGlzIHRoZSBjYXNlIGlmIHRoZSBpbnZlcnRcbi8vIGNsYXNzaWZpY2F0aW9uIGNvbG9yIGlzIHRyYW5zbHVjZW50LlxudmFyIHJzRGVmYXVsdCA9IHtcbiAgZGVwdGhNYXNrOiB0cnVlLFxuICBkZXB0aFRlc3Q6IHtcbiAgICBlbmFibGVkOiB0cnVlLFxuICB9LFxuICBzdGVuY2lsVGVzdDogU3RlbmNpbENvbnN0YW50cy5zZXRDZXNpdW0zRFRpbGVCaXQoKSxcbiAgc3RlbmNpbE1hc2s6IFN0ZW5jaWxDb25zdGFudHMuQ0VTSVVNXzNEX1RJTEVfTUFTSyxcbiAgYmxlbmRpbmc6IEJsZW5kaW5nU3RhdGUuQUxQSEFfQkxFTkQsXG59O1xuXG52YXIgdHJhbnNsdWNlbnRGUyA9XG4gIFwiI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZVxcblwiICtcbiAgXCJ1bmlmb3JtIHNhbXBsZXIyRCBjb2xvclRleHR1cmU7XFxuXCIgK1xuICBcInVuaWZvcm0gc2FtcGxlcjJEIGRlcHRoVGV4dHVyZTtcXG5cIiArXG4gIFwidW5pZm9ybSBzYW1wbGVyMkQgY2xhc3NpZmllZFRleHR1cmU7XFxuXCIgK1xuICBcInZhcnlpbmcgdmVjMiB2X3RleHR1cmVDb29yZGluYXRlcztcXG5cIiArXG4gIFwidm9pZCBtYWluKClcXG5cIiArXG4gIFwie1xcblwiICtcbiAgXCIgICAgdmVjNCBjb2xvciA9IHRleHR1cmUyRChjb2xvclRleHR1cmUsIHZfdGV4dHVyZUNvb3JkaW5hdGVzKTtcXG5cIiArXG4gIFwiICAgIGlmIChjb2xvci5hID09IDAuMClcXG5cIiArXG4gIFwiICAgIHtcXG5cIiArXG4gIFwiICAgICAgICBkaXNjYXJkO1xcblwiICtcbiAgXCIgICAgfVxcblwiICtcbiAgXCIgICAgYm9vbCBpc0NsYXNzaWZpZWQgPSBhbGwoZXF1YWwodGV4dHVyZTJEKGNsYXNzaWZpZWRUZXh0dXJlLCB2X3RleHR1cmVDb29yZGluYXRlcyksIHZlYzQoMC4wKSkpO1xcblwiICtcbiAgXCIjaWZkZWYgVU5DTEFTU0lGSUVEXFxuXCIgK1xuICBcIiAgICB2ZWM0IGhpZ2hsaWdodENvbG9yID0gY3ptX2ludmVydENsYXNzaWZpY2F0aW9uQ29sb3I7XFxuXCIgK1xuICBcIiAgICBpZiAoaXNDbGFzc2lmaWVkKVxcblwiICtcbiAgXCIgICAge1xcblwiICtcbiAgXCIgICAgICAgIGRpc2NhcmQ7XFxuXCIgK1xuICBcIiAgICB9XFxuXCIgK1xuICBcIiNlbHNlXFxuXCIgK1xuICBcIiAgICB2ZWM0IGhpZ2hsaWdodENvbG9yID0gdmVjNCgxLjApO1xcblwiICtcbiAgXCIgICAgaWYgKCFpc0NsYXNzaWZpZWQpXFxuXCIgK1xuICBcIiAgICB7XFxuXCIgK1xuICBcIiAgICAgICAgZGlzY2FyZDtcXG5cIiArXG4gIFwiICAgIH1cXG5cIiArXG4gIFwiI2VuZGlmXFxuXCIgK1xuICBcIiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAqIGhpZ2hsaWdodENvbG9yO1xcblwiICtcbiAgXCIgICAgZ2xfRnJhZ0RlcHRoRVhUID0gdGV4dHVyZTJEKGRlcHRoVGV4dHVyZSwgdl90ZXh0dXJlQ29vcmRpbmF0ZXMpLnI7XFxuXCIgK1xuICBcIn1cXG5cIjtcblxudmFyIG9wYXF1ZUZTID1cbiAgXCJ1bmlmb3JtIHNhbXBsZXIyRCBjb2xvclRleHR1cmU7XFxuXCIgK1xuICBcInZhcnlpbmcgdmVjMiB2X3RleHR1cmVDb29yZGluYXRlcztcXG5cIiArXG4gIFwidm9pZCBtYWluKClcXG5cIiArXG4gIFwie1xcblwiICtcbiAgXCIgICAgdmVjNCBjb2xvciA9IHRleHR1cmUyRChjb2xvclRleHR1cmUsIHZfdGV4dHVyZUNvb3JkaW5hdGVzKTtcXG5cIiArXG4gIFwiICAgIGlmIChjb2xvci5hID09IDAuMClcXG5cIiArXG4gIFwiICAgIHtcXG5cIiArXG4gIFwiICAgICAgICBkaXNjYXJkO1xcblwiICtcbiAgXCIgICAgfVxcblwiICtcbiAgXCIjaWZkZWYgVU5DTEFTU0lGSUVEXFxuXCIgK1xuICBcIiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAqIGN6bV9pbnZlcnRDbGFzc2lmaWNhdGlvbkNvbG9yO1xcblwiICtcbiAgXCIjZWxzZVxcblwiICtcbiAgXCIgICAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxuXCIgK1xuICBcIiNlbmRpZlxcblwiICtcbiAgXCJ9XFxuXCI7XG5cbkludmVydENsYXNzaWZpY2F0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICB2YXIgdGV4dHVyZSA9IHRoaXMuX3RleHR1cmU7XG4gIHZhciBwcmV2aW91c0ZyYW1lYnVmZmVyQ2hhbmdlZCA9XG4gICAgIWRlZmluZWQodGV4dHVyZSkgfHwgdGhpcy5wcmV2aW91c0ZyYW1lYnVmZmVyICE9PSB0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyO1xuICB0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyID0gdGhpcy5wcmV2aW91c0ZyYW1lYnVmZmVyO1xuXG4gIHZhciB3aWR0aCA9IGNvbnRleHQuZHJhd2luZ0J1ZmZlcldpZHRoO1xuICB2YXIgaGVpZ2h0ID0gY29udGV4dC5kcmF3aW5nQnVmZmVySGVpZ2h0O1xuXG4gIHZhciB0ZXh0dXJlQ2hhbmdlZCA9XG4gICAgIWRlZmluZWQodGV4dHVyZSkgfHwgdGV4dHVyZS53aWR0aCAhPT0gd2lkdGggfHwgdGV4dHVyZS5oZWlnaHQgIT09IGhlaWdodDtcbiAgaWYgKHRleHR1cmVDaGFuZ2VkIHx8IHByZXZpb3VzRnJhbWVidWZmZXJDaGFuZ2VkKSB7XG4gICAgdGhpcy5fdGV4dHVyZSA9IHRoaXMuX3RleHR1cmUgJiYgdGhpcy5fdGV4dHVyZS5kZXN0cm95KCk7XG4gICAgdGhpcy5fY2xhc3NpZmllZFRleHR1cmUgPVxuICAgICAgdGhpcy5fY2xhc3NpZmllZFRleHR1cmUgJiYgdGhpcy5fY2xhc3NpZmllZFRleHR1cmUuZGVzdHJveSgpO1xuICAgIHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmUgPVxuICAgICAgdGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZSAmJiB0aGlzLl9kZXB0aFN0ZW5jaWxUZXh0dXJlLmRlc3Ryb3koKTtcblxuICAgIHRoaXMuX3RleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICBwaXhlbEZvcm1hdDogUGl4ZWxGb3JtYXQuUkdCQSxcbiAgICAgIHBpeGVsRGF0YXR5cGU6IFBpeGVsRGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgIHNhbXBsZXI6IG5ldyBTYW1wbGVyKHtcbiAgICAgICAgd3JhcFM6IFRleHR1cmVXcmFwLkNMQU1QX1RPX0VER0UsXG4gICAgICAgIHdyYXBUOiBUZXh0dXJlV3JhcC5DTEFNUF9UT19FREdFLFxuICAgICAgICBtaW5pZmljYXRpb25GaWx0ZXI6IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuTElORUFSLFxuICAgICAgICBtYWduaWZpY2F0aW9uRmlsdGVyOiBUZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlci5MSU5FQVIsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGlmICghZGVmaW5lZCh0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyKSkge1xuICAgICAgdGhpcy5fY2xhc3NpZmllZFRleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIHBpeGVsRm9ybWF0OiBQaXhlbEZvcm1hdC5SR0JBLFxuICAgICAgICBwaXhlbERhdGF0eXBlOiBQaXhlbERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgIHNhbXBsZXI6IG5ldyBTYW1wbGVyKHtcbiAgICAgICAgICB3cmFwUzogVGV4dHVyZVdyYXAuQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgICB3cmFwVDogVGV4dHVyZVdyYXAuQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgICBtaW5pZmljYXRpb25GaWx0ZXI6IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuTElORUFSLFxuICAgICAgICAgIG1hZ25pZmljYXRpb25GaWx0ZXI6IFRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyLkxJTkVBUixcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIHBpeGVsRm9ybWF0OiBQaXhlbEZvcm1hdC5ERVBUSF9TVEVOQ0lMLFxuICAgICAgICBwaXhlbERhdGF0eXBlOiBQaXhlbERhdGF0eXBlLlVOU0lHTkVEX0lOVF8yNF84LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX2ZibykgfHwgdGV4dHVyZUNoYW5nZWQgfHwgcHJldmlvdXNGcmFtZWJ1ZmZlckNoYW5nZWQpIHtcbiAgICB0aGlzLl9mYm8gPSB0aGlzLl9mYm8gJiYgdGhpcy5fZmJvLmRlc3Ryb3koKTtcbiAgICB0aGlzLl9mYm9DbGFzc2lmaWVkID0gdGhpcy5fZmJvQ2xhc3NpZmllZCAmJiB0aGlzLl9mYm9DbGFzc2lmaWVkLmRlc3Ryb3koKTtcblxuICAgIHZhciBkZXB0aFN0ZW5jaWxUZXh0dXJlO1xuICAgIHZhciBkZXB0aFN0ZW5jaWxSZW5kZXJidWZmZXI7XG4gICAgaWYgKGRlZmluZWQodGhpcy5fcHJldmlvdXNGcmFtZWJ1ZmZlcikpIHtcbiAgICAgIGRlcHRoU3RlbmNpbFRleHR1cmUgPSB0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyLmRlcHRoU3RlbmNpbFRleHR1cmU7XG4gICAgICBkZXB0aFN0ZW5jaWxSZW5kZXJidWZmZXIgPSB0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyXG4gICAgICAgIC5kZXB0aFN0ZW5jaWxSZW5kZXJidWZmZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlcHRoU3RlbmNpbFRleHR1cmUgPSB0aGlzLl9kZXB0aFN0ZW5jaWxUZXh0dXJlO1xuICAgIH1cblxuICAgIHRoaXMuX2ZibyA9IG5ldyBGcmFtZWJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgY29sb3JUZXh0dXJlczogW3RoaXMuX3RleHR1cmVdLFxuICAgICAgZGVwdGhTdGVuY2lsVGV4dHVyZTogZGVwdGhTdGVuY2lsVGV4dHVyZSxcbiAgICAgIGRlcHRoU3RlbmNpbFJlbmRlcmJ1ZmZlcjogZGVwdGhTdGVuY2lsUmVuZGVyYnVmZmVyLFxuICAgICAgZGVzdHJveUF0dGFjaG1lbnRzOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIGlmICghZGVmaW5lZCh0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyKSkge1xuICAgICAgdGhpcy5fZmJvQ2xhc3NpZmllZCA9IG5ldyBGcmFtZWJ1ZmZlcih7XG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIGNvbG9yVGV4dHVyZXM6IFt0aGlzLl9jbGFzc2lmaWVkVGV4dHVyZV0sXG4gICAgICAgIGRlcHRoU3RlbmNpbFRleHR1cmU6IGRlcHRoU3RlbmNpbFRleHR1cmUsXG4gICAgICAgIGRlc3Ryb3lBdHRhY2htZW50czogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWRlZmluZWQodGhpcy5fcnNVbmNsYXNzaWZpZWQpKSB7XG4gICAgdGhpcy5fcnNVbmNsYXNzaWZpZWQgPSBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUocnNVbmNsYXNzaWZpZWQpO1xuICAgIHRoaXMuX3JzQ2xhc3NpZmllZCA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShyc0NsYXNzaWZpZWQpO1xuICAgIHRoaXMuX3JzRGVmYXVsdCA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShyc0RlZmF1bHQpO1xuICB9XG5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3VuY2xhc3NpZmllZENvbW1hbmQpIHx8IHByZXZpb3VzRnJhbWVidWZmZXJDaGFuZ2VkKSB7XG4gICAgaWYgKGRlZmluZWQodGhpcy5fdW5jbGFzc2lmaWVkQ29tbWFuZCkpIHtcbiAgICAgIHRoaXMuX3VuY2xhc3NpZmllZENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9XG4gICAgICAgIHRoaXMuX3VuY2xhc3NpZmllZENvbW1hbmQuc2hhZGVyUHJvZ3JhbSAmJlxuICAgICAgICB0aGlzLl91bmNsYXNzaWZpZWRDb21tYW5kLnNoYWRlclByb2dyYW0uZGVzdHJveSgpO1xuICAgICAgdGhpcy5fY2xhc3NpZmllZENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9XG4gICAgICAgIHRoaXMuX2NsYXNzaWZpZWRDb21tYW5kLnNoYWRlclByb2dyYW0gJiZcbiAgICAgICAgdGhpcy5fY2xhc3NpZmllZENvbW1hbmQuc2hhZGVyUHJvZ3JhbS5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgdmFyIGZzID0gZGVmaW5lZCh0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyKSA/IG9wYXF1ZUZTIDogdHJhbnNsdWNlbnRGUztcbiAgICB2YXIgdW5jbGFzc2lmaWVkRlNTb3VyY2UgPSBuZXcgU2hhZGVyU291cmNlKHtcbiAgICAgIGRlZmluZXM6IFtcIlVOQ0xBU1NJRklFRFwiXSxcbiAgICAgIHNvdXJjZXM6IFtmc10sXG4gICAgfSk7XG4gICAgdmFyIGNsYXNzaWZpZWRGU1NvdXJjZSA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgc291cmNlczogW2ZzXSxcbiAgICB9KTtcbiAgICB0aGlzLl91bmNsYXNzaWZpZWRDb21tYW5kID0gY29udGV4dC5jcmVhdGVWaWV3cG9ydFF1YWRDb21tYW5kKFxuICAgICAgdW5jbGFzc2lmaWVkRlNTb3VyY2UsXG4gICAgICB7XG4gICAgICAgIHJlbmRlclN0YXRlOiBkZWZpbmVkKHRoaXMuX3ByZXZpb3VzRnJhbWVidWZmZXIpXG4gICAgICAgICAgPyB0aGlzLl9yc1VuY2xhc3NpZmllZFxuICAgICAgICAgIDogdGhpcy5fcnNEZWZhdWx0LFxuICAgICAgICB1bmlmb3JtTWFwOiB0aGlzLl91bmlmb3JtTWFwLFxuICAgICAgICBvd25lcjogdGhpcyxcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX2NsYXNzaWZpZWRDb21tYW5kID0gY29udGV4dC5jcmVhdGVWaWV3cG9ydFF1YWRDb21tYW5kKFxuICAgICAgY2xhc3NpZmllZEZTU291cmNlLFxuICAgICAge1xuICAgICAgICByZW5kZXJTdGF0ZTogZGVmaW5lZCh0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyKVxuICAgICAgICAgID8gdGhpcy5fcnNDbGFzc2lmaWVkXG4gICAgICAgICAgOiB0aGlzLl9yc0RlZmF1bHQsXG4gICAgICAgIHVuaWZvcm1NYXA6IHRoaXMuX3VuaWZvcm1NYXAsXG4gICAgICAgIG93bmVyOiB0aGlzLFxuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAoZGVmaW5lZCh0aGlzLl90cmFuc2x1Y2VudENvbW1hbmQpKSB7XG4gICAgICB0aGlzLl90cmFuc2x1Y2VudENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9XG4gICAgICAgIHRoaXMuX3RyYW5zbHVjZW50Q29tbWFuZC5zaGFkZXJQcm9ncmFtICYmXG4gICAgICAgIHRoaXMuX3RyYW5zbHVjZW50Q29tbWFuZC5zaGFkZXJQcm9ncmFtLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgaWYgKCFkZWZpbmVkKHRoaXMuX3ByZXZpb3VzRnJhbWVidWZmZXIpKSB7XG4gICAgICB0aGlzLl90cmFuc2x1Y2VudENvbW1hbmQgPSBjb250ZXh0LmNyZWF0ZVZpZXdwb3J0UXVhZENvbW1hbmQoXG4gICAgICAgIFBhc3NUaHJvdWdoLFxuICAgICAgICB7XG4gICAgICAgICAgcmVuZGVyU3RhdGU6IHRoaXMuX3JzVW5jbGFzc2lmaWVkLFxuICAgICAgICAgIHVuaWZvcm1NYXA6IHRoaXMuX3VuaWZvcm1NYXAsXG4gICAgICAgICAgb3duZXI6IHRoaXMsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG59O1xuXG5JbnZlcnRDbGFzc2lmaWNhdGlvbi5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoY29udGV4dCwgcGFzc1N0YXRlKSB7XG4gIHZhciBmcmFtZWJ1ZmZlciA9IHBhc3NTdGF0ZS5mcmFtZWJ1ZmZlcjtcblxuICBpZiAoZGVmaW5lZCh0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyKSkge1xuICAgIHBhc3NTdGF0ZS5mcmFtZWJ1ZmZlciA9IHRoaXMuX2ZibztcbiAgICB0aGlzLl9jbGVhckNvbG9yQ29tbWFuZC5leGVjdXRlKGNvbnRleHQsIHBhc3NTdGF0ZSk7XG4gIH0gZWxzZSB7XG4gICAgcGFzc1N0YXRlLmZyYW1lYnVmZmVyID0gdGhpcy5fZmJvO1xuICAgIHRoaXMuX2NsZWFyQ29tbWFuZC5leGVjdXRlKGNvbnRleHQsIHBhc3NTdGF0ZSk7XG4gICAgcGFzc1N0YXRlLmZyYW1lYnVmZmVyID0gdGhpcy5fZmJvQ2xhc3NpZmllZDtcbiAgICB0aGlzLl9jbGVhckNvbW1hbmQuZXhlY3V0ZShjb250ZXh0LCBwYXNzU3RhdGUpO1xuICB9XG5cbiAgcGFzc1N0YXRlLmZyYW1lYnVmZmVyID0gZnJhbWVidWZmZXI7XG59O1xuXG5JbnZlcnRDbGFzc2lmaWNhdGlvbi5wcm90b3R5cGUuZXhlY3V0ZUNsYXNzaWZpZWQgPSBmdW5jdGlvbiAoXG4gIGNvbnRleHQsXG4gIHBhc3NTdGF0ZVxuKSB7XG4gIGlmICghZGVmaW5lZCh0aGlzLl9wcmV2aW91c0ZyYW1lYnVmZmVyKSkge1xuICAgIHZhciBmcmFtZWJ1ZmZlciA9IHBhc3NTdGF0ZS5mcmFtZWJ1ZmZlcjtcblxuICAgIHBhc3NTdGF0ZS5mcmFtZWJ1ZmZlciA9IHRoaXMuX2Zib0NsYXNzaWZpZWQ7XG4gICAgdGhpcy5fdHJhbnNsdWNlbnRDb21tYW5kLmV4ZWN1dGUoY29udGV4dCwgcGFzc1N0YXRlKTtcblxuICAgIHBhc3NTdGF0ZS5mcmFtZWJ1ZmZlciA9IGZyYW1lYnVmZmVyO1xuICB9XG4gIHRoaXMuX2NsYXNzaWZpZWRDb21tYW5kLmV4ZWN1dGUoY29udGV4dCwgcGFzc1N0YXRlKTtcbn07XG5cbkludmVydENsYXNzaWZpY2F0aW9uLnByb3RvdHlwZS5leGVjdXRlVW5jbGFzc2lmaWVkID0gZnVuY3Rpb24gKFxuICBjb250ZXh0LFxuICBwYXNzU3RhdGVcbikge1xuICB0aGlzLl91bmNsYXNzaWZpZWRDb21tYW5kLmV4ZWN1dGUoY29udGV4dCwgcGFzc1N0YXRlKTtcbn07XG5cbkludmVydENsYXNzaWZpY2F0aW9uLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuSW52ZXJ0Q2xhc3NpZmljYXRpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2ZibyA9IHRoaXMuX2ZibyAmJiB0aGlzLl9mYm8uZGVzdHJveSgpO1xuICB0aGlzLl90ZXh0dXJlID0gdGhpcy5fdGV4dHVyZSAmJiB0aGlzLl90ZXh0dXJlLmRlc3Ryb3koKTtcbiAgdGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZSA9XG4gICAgdGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZSAmJiB0aGlzLl9kZXB0aFN0ZW5jaWxUZXh0dXJlLmRlc3Ryb3koKTtcblxuICBpZiAoZGVmaW5lZCh0aGlzLl91bmNsYXNzaWZpZWRDb21tYW5kKSkge1xuICAgIHRoaXMuX3VuY2xhc3NpZmllZENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9XG4gICAgICB0aGlzLl91bmNsYXNzaWZpZWRDb21tYW5kLnNoYWRlclByb2dyYW0gJiZcbiAgICAgIHRoaXMuX3VuY2xhc3NpZmllZENvbW1hbmQuc2hhZGVyUHJvZ3JhbS5kZXN0cm95KCk7XG4gICAgdGhpcy5fY2xhc3NpZmllZENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9XG4gICAgICB0aGlzLl9jbGFzc2lmaWVkQ29tbWFuZC5zaGFkZXJQcm9ncmFtICYmXG4gICAgICB0aGlzLl9jbGFzc2lmaWVkQ29tbWFuZC5zaGFkZXJQcm9ncmFtLmRlc3Ryb3koKTtcbiAgfVxuXG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcbmV4cG9ydCBkZWZhdWx0IEludmVydENsYXNzaWZpY2F0aW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///94229\n')},43234:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14459);\n/* harmony import */ var _Core_IonResource_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(48604);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9407);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13222);\n/* harmony import */ var _ArcGisMapServerImageryProvider_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37741);\n/* harmony import */ var _BingMapsImageryProvider_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(59692);\n/* harmony import */ var _TileMapServiceImageryProvider_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(80360);\n/* harmony import */ var _GoogleEarthEnterpriseMapsProvider_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(75611);\n/* harmony import */ var _MapboxImageryProvider_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(65657);\n/* harmony import */ var _SingleTileImageryProvider_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(57018);\n/* harmony import */ var _UrlTemplateImageryProvider_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(24855);\n/* harmony import */ var _WebMapServiceImageryProvider_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(85200);\n/* harmony import */ var _WebMapTileServiceImageryProvider_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(15583);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction createFactory(Type) {\n  return function (options) {\n    return new Type(options);\n  };\n}\n\n// These values are the list of supported external imagery\n// assets in the Cesium ion beta. They are subject to change.\nvar ImageryProviderMapping = {\n  ARCGIS_MAPSERVER: createFactory(_ArcGisMapServerImageryProvider_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z),\n  BING: createFactory(_BingMapsImageryProvider_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z),\n  GOOGLE_EARTH: createFactory(_GoogleEarthEnterpriseMapsProvider_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z),\n  MAPBOX: createFactory(_MapboxImageryProvider_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z),\n  SINGLE_TILE: createFactory(_SingleTileImageryProvider_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z),\n  TMS: createFactory(_TileMapServiceImageryProvider_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z),\n  URL_TEMPLATE: createFactory(_UrlTemplateImageryProvider_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z),\n  WMS: createFactory(_WebMapServiceImageryProvider_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z),\n  WMTS: createFactory(_WebMapTileServiceImageryProvider_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z),\n};\n\n/**\n * @typedef {Object} IonImageryProvider.ConstructorOptions\n *\n * Initialization options for the TileMapServiceImageryProvider constructor\n *\n * @property {Number} assetId An ion imagery asset ID\n * @property {String} [accessToken=Ion.defaultAccessToken] The access token to use.\n * @property {String|Resource} [server=Ion.defaultServer] The resource to the Cesium ion API server.\n */\n\n/**\n * Provides tiled imagery using the Cesium ion REST API.\n *\n * @alias IonImageryProvider\n * @constructor\n *\n * @param {IonImageryProvider.ConstructorOptions} options Object describing initialization options\n *\n * @example\n * viewer.imageryLayers.addImageryProvider(new Cesium.IonImageryProvider({ assetId : 23489024 }));\n */\nfunction IonImageryProvider(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  var assetId = options.assetId;\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.assetId", assetId);\n  //>>includeEnd(\'debug\');\n\n  /**\n   * The default alpha blending value of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the night side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultNightAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the day side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultDayAlpha = undefined;\n\n  /**\n   * The default brightness of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0\n   * makes the imagery darker while greater than 1.0 makes it brighter.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultBrightness = undefined;\n\n  /**\n   * The default contrast of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces\n   * the contrast while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultContrast = undefined;\n\n  /**\n   * The default hue of this provider in radians. 0.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultHue = undefined;\n\n  /**\n   * The default saturation of this provider. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the\n   * saturation while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultSaturation = undefined;\n\n  /**\n   * The default gamma correction to apply to this provider.  1.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultGamma = undefined;\n\n  /**\n   * The default texture minification filter to apply to this provider.\n   *\n   * @type {TextureMinificationFilter}\n   * @default undefined\n   */\n  this.defaultMinificationFilter = undefined;\n\n  /**\n   * The default texture magnification filter to apply to this provider.\n   *\n   * @type {TextureMagnificationFilter}\n   * @default undefined\n   */\n  this.defaultMagnificationFilter = undefined;\n\n  this._ready = false;\n  this._tileCredits = undefined;\n  this._errorEvent = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n  var that = this;\n  var endpointResource = _Core_IonResource_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"]._createEndpointResource */ .Z._createEndpointResource(assetId, options);\n\n  // A simple cache to avoid making repeated requests to ion for endpoints we\'ve\n  // already retrieved. This exists mainly to support Bing caching to reduce\n  // world imagery sessions, but provides a small boost of performance in general\n  // if constantly reloading assets\n  var cacheKey =\n    options.assetId.toString() + options.accessToken + options.server;\n  var promise = IonImageryProvider._endpointCache[cacheKey];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(promise)) {\n    promise = endpointResource.fetchJson();\n    IonImageryProvider._endpointCache[cacheKey] = promise;\n  }\n\n  this._readyPromise = promise.then(function (endpoint) {\n    if (endpoint.type !== "IMAGERY") {\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].reject */ .Z.reject(\n        new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n          "Cesium ion asset " + assetId + " is not an imagery asset."\n        )\n      );\n    }\n\n    var imageryProvider;\n    var externalType = endpoint.externalType;\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(externalType)) {\n      imageryProvider = new _TileMapServiceImageryProvider_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n        url: new _Core_IonResource_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(endpoint, endpointResource),\n      });\n    } else {\n      var factory = ImageryProviderMapping[externalType];\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(factory)) {\n        return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].reject */ .Z.reject(\n          new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n            "Unrecognized Cesium ion imagery type: " + externalType\n          )\n        );\n      }\n      imageryProvider = factory(endpoint.options);\n    }\n\n    that._tileCredits = _Core_IonResource_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getCreditsFromEndpoint */ .Z.getCreditsFromEndpoint(\n      endpoint,\n      endpointResource\n    );\n\n    imageryProvider.errorEvent.addEventListener(function (tileProviderError) {\n      //Propagate the errorEvent but set the provider to this instance instead\n      //of the inner instance.\n      tileProviderError.provider = that;\n      that._errorEvent.raiseEvent(tileProviderError);\n    });\n\n    that._imageryProvider = imageryProvider;\n    return imageryProvider.readyPromise.then(function () {\n      that._ready = true;\n      return true;\n    });\n  });\n}\n\nObject.defineProperties(IonImageryProvider.prototype, {\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof IonImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof IonImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise;\n    },\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by the instance.  This function should\n   * not be called before {@link IonImageryProvider#ready} returns true.\n   * @memberof IonImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "tileHeight must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.rectangle;\n    },\n  },\n\n  /**\n   * Gets the width of each tile, in pixels.  This function should\n   * not be called before {@link IonImageryProvider#ready} returns true.\n   * @memberof IonImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "tileWidth must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.tileWidth;\n    },\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link IonImageryProvider#ready} returns true.\n   * @memberof IonImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "tileHeight must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.tileHeight;\n    },\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link IonImageryProvider#ready} returns true.\n   * @memberof IonImageryProvider.prototype\n   * @type {Number|undefined}\n   * @readonly\n   */\n  maximumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "maximumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.maximumLevel;\n    },\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link IonImageryProvider#ready} returns true. Generally,\n   * a minimum level should only be used when the rectangle of the imagery is small\n   * enough that the number of tiles at the minimum level is small.  An imagery\n   * provider with more than a few tiles at the minimum level will lead to\n   * rendering problems.\n   * @memberof IonImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "minimumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.minimumLevel;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by the provider.  This function should\n   * not be called before {@link IonImageryProvider#ready} returns true.\n   * @memberof IonImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "tilingScheme must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out "missing" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link IonImageryProvider#ready} returns true.\n   * @memberof IonImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "tileDiscardPolicy must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.tileDiscardPolicy;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof IonImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery. This function should\n   * not be called before {@link IonImageryProvider#ready} returns true.\n   * @memberof IonImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "credit must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.credit;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.\n   * @memberof IonImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n          "hasAlphaChannel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      return this._imageryProvider.hasAlphaChannel;\n    },\n\n    /**\n     * Gets the proxy used by this provider.\n     * @memberof IonImageryProvider.prototype\n     * @type {Proxy}\n     * @readonly\n     * @default undefined\n     */\n    proxy: {\n      get: function () {\n        return undefined;\n      },\n    },\n  },\n});\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n * @function\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nIonImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "getTileCredits must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var innerCredits = this._imageryProvider.getTileCredits(x, y, level);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(innerCredits)) {\n    return this._tileCredits;\n  }\n\n  return this._tileCredits.concat(innerCredits);\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link IonImageryProvider#ready} returns true.\n * @function\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n *\n * @exception {DeveloperError} <code>requestImage</code> must not be called before the imagery provider is ready.\n */\nIonImageryProvider.prototype.requestImage = function (x, y, level, request) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "requestImage must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n  return this._imageryProvider.requestImage(x, y, level, request);\n};\n\n/**\n * Asynchronously determines what features, if any, are located at a given longitude and latitude within\n * a tile.  This function should not be called before {@link IonImageryProvider#ready} returns true.\n * This function is optional, so it may not exist on all ImageryProviders.\n *\n * @function\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n *\n * @exception {DeveloperError} <code>pickFeatures</code> must not be called before the imagery provider is ready.\n */\nIonImageryProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "pickFeatures must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n  return this._imageryProvider.pickFeatures(x, y, level, longitude, latitude);\n};\n\n//exposed for testing\nIonImageryProvider._endpointCache = {};\n/* harmony default export */ __webpack_exports__["Z"] = (IonImageryProvider);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OztBQUVBO0FBQ0E7QUFDQSx1REFBdUQsZ0NBQWdDO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixZQUFZLCtDQUErQztBQUMzRCw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseURBQWUsa0JBQWtCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSW9uSW1hZ2VyeVByb3ZpZGVyLmpzPzNlMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBJb25SZXNvdXJjZSBmcm9tIFwiLi4vQ29yZS9Jb25SZXNvdXJjZS5qc1wiO1xuaW1wb3J0IFJ1bnRpbWVFcnJvciBmcm9tIFwiLi4vQ29yZS9SdW50aW1lRXJyb3IuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcbmltcG9ydCBBcmNHaXNNYXBTZXJ2ZXJJbWFnZXJ5UHJvdmlkZXIgZnJvbSBcIi4vQXJjR2lzTWFwU2VydmVySW1hZ2VyeVByb3ZpZGVyLmpzXCI7XG5pbXBvcnQgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIgZnJvbSBcIi4vQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIuanNcIjtcbmltcG9ydCBUaWxlTWFwU2VydmljZUltYWdlcnlQcm92aWRlciBmcm9tIFwiLi9UaWxlTWFwU2VydmljZUltYWdlcnlQcm92aWRlci5qc1wiO1xuaW1wb3J0IEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlciBmcm9tIFwiLi9Hb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIuanNcIjtcbmltcG9ydCBNYXBib3hJbWFnZXJ5UHJvdmlkZXIgZnJvbSBcIi4vTWFwYm94SW1hZ2VyeVByb3ZpZGVyLmpzXCI7XG5pbXBvcnQgU2luZ2xlVGlsZUltYWdlcnlQcm92aWRlciBmcm9tIFwiLi9TaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyLmpzXCI7XG5pbXBvcnQgVXJsVGVtcGxhdGVJbWFnZXJ5UHJvdmlkZXIgZnJvbSBcIi4vVXJsVGVtcGxhdGVJbWFnZXJ5UHJvdmlkZXIuanNcIjtcbmltcG9ydCBXZWJNYXBTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyIGZyb20gXCIuL1dlYk1hcFNlcnZpY2VJbWFnZXJ5UHJvdmlkZXIuanNcIjtcbmltcG9ydCBXZWJNYXBUaWxlU2VydmljZUltYWdlcnlQcm92aWRlciBmcm9tIFwiLi9XZWJNYXBUaWxlU2VydmljZUltYWdlcnlQcm92aWRlci5qc1wiO1xuXG5mdW5jdGlvbiBjcmVhdGVGYWN0b3J5KFR5cGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlKG9wdGlvbnMpO1xuICB9O1xufVxuXG4vLyBUaGVzZSB2YWx1ZXMgYXJlIHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBleHRlcm5hbCBpbWFnZXJ5XG4vLyBhc3NldHMgaW4gdGhlIENlc2l1bSBpb24gYmV0YS4gVGhleSBhcmUgc3ViamVjdCB0byBjaGFuZ2UuXG52YXIgSW1hZ2VyeVByb3ZpZGVyTWFwcGluZyA9IHtcbiAgQVJDR0lTX01BUFNFUlZFUjogY3JlYXRlRmFjdG9yeShBcmNHaXNNYXBTZXJ2ZXJJbWFnZXJ5UHJvdmlkZXIpLFxuICBCSU5HOiBjcmVhdGVGYWN0b3J5KEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyKSxcbiAgR09PR0xFX0VBUlRIOiBjcmVhdGVGYWN0b3J5KEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlciksXG4gIE1BUEJPWDogY3JlYXRlRmFjdG9yeShNYXBib3hJbWFnZXJ5UHJvdmlkZXIpLFxuICBTSU5HTEVfVElMRTogY3JlYXRlRmFjdG9yeShTaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyKSxcbiAgVE1TOiBjcmVhdGVGYWN0b3J5KFRpbGVNYXBTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyKSxcbiAgVVJMX1RFTVBMQVRFOiBjcmVhdGVGYWN0b3J5KFVybFRlbXBsYXRlSW1hZ2VyeVByb3ZpZGVyKSxcbiAgV01TOiBjcmVhdGVGYWN0b3J5KFdlYk1hcFNlcnZpY2VJbWFnZXJ5UHJvdmlkZXIpLFxuICBXTVRTOiBjcmVhdGVGYWN0b3J5KFdlYk1hcFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyKSxcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gSW9uSW1hZ2VyeVByb3ZpZGVyLkNvbnN0cnVjdG9yT3B0aW9uc1xuICpcbiAqIEluaXRpYWxpemF0aW9uIG9wdGlvbnMgZm9yIHRoZSBUaWxlTWFwU2VydmljZUltYWdlcnlQcm92aWRlciBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBhc3NldElkIEFuIGlvbiBpbWFnZXJ5IGFzc2V0IElEXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW2FjY2Vzc1Rva2VuPUlvbi5kZWZhdWx0QWNjZXNzVG9rZW5dIFRoZSBhY2Nlc3MgdG9rZW4gdG8gdXNlLlxuICogQHByb3BlcnR5IHtTdHJpbmd8UmVzb3VyY2V9IFtzZXJ2ZXI9SW9uLmRlZmF1bHRTZXJ2ZXJdIFRoZSByZXNvdXJjZSB0byB0aGUgQ2VzaXVtIGlvbiBBUEkgc2VydmVyLlxuICovXG5cbi8qKlxuICogUHJvdmlkZXMgdGlsZWQgaW1hZ2VyeSB1c2luZyB0aGUgQ2VzaXVtIGlvbiBSRVNUIEFQSS5cbiAqXG4gKiBAYWxpYXMgSW9uSW1hZ2VyeVByb3ZpZGVyXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge0lvbkltYWdlcnlQcm92aWRlci5Db25zdHJ1Y3Rvck9wdGlvbnN9IG9wdGlvbnMgT2JqZWN0IGRlc2NyaWJpbmcgaW5pdGlhbGl6YXRpb24gb3B0aW9uc1xuICpcbiAqIEBleGFtcGxlXG4gKiB2aWV3ZXIuaW1hZ2VyeUxheWVycy5hZGRJbWFnZXJ5UHJvdmlkZXIobmV3IENlc2l1bS5Jb25JbWFnZXJ5UHJvdmlkZXIoeyBhc3NldElkIDogMjM0ODkwMjQgfSkpO1xuICovXG5mdW5jdGlvbiBJb25JbWFnZXJ5UHJvdmlkZXIob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHZhciBhc3NldElkID0gb3B0aW9ucy5hc3NldElkO1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwib3B0aW9ucy5hc3NldElkXCIsIGFzc2V0SWQpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb2YgdGhpcyBwcm92aWRlciwgd2l0aCAwLjAgcmVwcmVzZW50aW5nIGZ1bGx5IHRyYW5zcGFyZW50IGFuZFxuICAgKiAxLjAgcmVwcmVzZW50aW5nIGZ1bGx5IG9wYXF1ZS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0QWxwaGEgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFscGhhIGJsZW5kaW5nIHZhbHVlIG9uIHRoZSBuaWdodCBzaWRlIG9mIHRoZSBnbG9iZSBvZiB0aGlzIHByb3ZpZGVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHROaWdodEFscGhhID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbHBoYSBibGVuZGluZyB2YWx1ZSBvbiB0aGUgZGF5IHNpZGUgb2YgdGhlIGdsb2JlIG9mIHRoaXMgcHJvdmlkZXIsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdERheUFscGhhID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBicmlnaHRuZXNzIG9mIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiAgTGVzcyB0aGFuIDEuMFxuICAgKiBtYWtlcyB0aGUgaW1hZ2VyeSBkYXJrZXIgd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBtYWtlcyBpdCBicmlnaHRlci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0QnJpZ2h0bmVzcyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgY29udHJhc3Qgb2YgdGhpcyBwcm92aWRlci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuICBMZXNzIHRoYW4gMS4wIHJlZHVjZXNcbiAgICogdGhlIGNvbnRyYXN0IHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgaW5jcmVhc2VzIGl0LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRDb250cmFzdCA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgaHVlIG9mIHRoaXMgcHJvdmlkZXIgaW4gcmFkaWFucy4gMC4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0SHVlID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBzYXR1cmF0aW9uIG9mIHRoaXMgcHJvdmlkZXIuIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuIExlc3MgdGhhbiAxLjAgcmVkdWNlcyB0aGVcbiAgICogc2F0dXJhdGlvbiB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIGluY3JlYXNlcyBpdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0U2F0dXJhdGlvbiA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgZ2FtbWEgY29ycmVjdGlvbiB0byBhcHBseSB0byB0aGlzIHByb3ZpZGVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0R2FtbWEgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHRleHR1cmUgbWluaWZpY2F0aW9uIGZpbHRlciB0byBhcHBseSB0byB0aGlzIHByb3ZpZGVyLlxuICAgKlxuICAgKiBAdHlwZSB7VGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlcn1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRNaW5pZmljYXRpb25GaWx0ZXIgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHRleHR1cmUgbWFnbmlmaWNhdGlvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhpcyBwcm92aWRlci5cbiAgICpcbiAgICogQHR5cGUge1RleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdE1hZ25pZmljYXRpb25GaWx0ZXIgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgdGhpcy5fdGlsZUNyZWRpdHMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2Vycm9yRXZlbnQgPSBuZXcgRXZlbnQoKTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBlbmRwb2ludFJlc291cmNlID0gSW9uUmVzb3VyY2UuX2NyZWF0ZUVuZHBvaW50UmVzb3VyY2UoYXNzZXRJZCwgb3B0aW9ucyk7XG5cbiAgLy8gQSBzaW1wbGUgY2FjaGUgdG8gYXZvaWQgbWFraW5nIHJlcGVhdGVkIHJlcXVlc3RzIHRvIGlvbiBmb3IgZW5kcG9pbnRzIHdlJ3ZlXG4gIC8vIGFscmVhZHkgcmV0cmlldmVkLiBUaGlzIGV4aXN0cyBtYWlubHkgdG8gc3VwcG9ydCBCaW5nIGNhY2hpbmcgdG8gcmVkdWNlXG4gIC8vIHdvcmxkIGltYWdlcnkgc2Vzc2lvbnMsIGJ1dCBwcm92aWRlcyBhIHNtYWxsIGJvb3N0IG9mIHBlcmZvcm1hbmNlIGluIGdlbmVyYWxcbiAgLy8gaWYgY29uc3RhbnRseSByZWxvYWRpbmcgYXNzZXRzXG4gIHZhciBjYWNoZUtleSA9XG4gICAgb3B0aW9ucy5hc3NldElkLnRvU3RyaW5nKCkgKyBvcHRpb25zLmFjY2Vzc1Rva2VuICsgb3B0aW9ucy5zZXJ2ZXI7XG4gIHZhciBwcm9taXNlID0gSW9uSW1hZ2VyeVByb3ZpZGVyLl9lbmRwb2ludENhY2hlW2NhY2hlS2V5XTtcbiAgaWYgKCFkZWZpbmVkKHByb21pc2UpKSB7XG4gICAgcHJvbWlzZSA9IGVuZHBvaW50UmVzb3VyY2UuZmV0Y2hKc29uKCk7XG4gICAgSW9uSW1hZ2VyeVByb3ZpZGVyLl9lbmRwb2ludENhY2hlW2NhY2hlS2V5XSA9IHByb21pc2U7XG4gIH1cblxuICB0aGlzLl9yZWFkeVByb21pc2UgPSBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGVuZHBvaW50KSB7XG4gICAgaWYgKGVuZHBvaW50LnR5cGUgIT09IFwiSU1BR0VSWVwiKSB7XG4gICAgICByZXR1cm4gd2hlbi5yZWplY3QoXG4gICAgICAgIG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgXCJDZXNpdW0gaW9uIGFzc2V0IFwiICsgYXNzZXRJZCArIFwiIGlzIG5vdCBhbiBpbWFnZXJ5IGFzc2V0LlwiXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIGltYWdlcnlQcm92aWRlcjtcbiAgICB2YXIgZXh0ZXJuYWxUeXBlID0gZW5kcG9pbnQuZXh0ZXJuYWxUeXBlO1xuICAgIGlmICghZGVmaW5lZChleHRlcm5hbFR5cGUpKSB7XG4gICAgICBpbWFnZXJ5UHJvdmlkZXIgPSBuZXcgVGlsZU1hcFNlcnZpY2VJbWFnZXJ5UHJvdmlkZXIoe1xuICAgICAgICB1cmw6IG5ldyBJb25SZXNvdXJjZShlbmRwb2ludCwgZW5kcG9pbnRSZXNvdXJjZSksXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZhY3RvcnkgPSBJbWFnZXJ5UHJvdmlkZXJNYXBwaW5nW2V4dGVybmFsVHlwZV07XG5cbiAgICAgIGlmICghZGVmaW5lZChmYWN0b3J5KSkge1xuICAgICAgICByZXR1cm4gd2hlbi5yZWplY3QoXG4gICAgICAgICAgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgICAgICAgIFwiVW5yZWNvZ25pemVkIENlc2l1bSBpb24gaW1hZ2VyeSB0eXBlOiBcIiArIGV4dGVybmFsVHlwZVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGltYWdlcnlQcm92aWRlciA9IGZhY3RvcnkoZW5kcG9pbnQub3B0aW9ucyk7XG4gICAgfVxuXG4gICAgdGhhdC5fdGlsZUNyZWRpdHMgPSBJb25SZXNvdXJjZS5nZXRDcmVkaXRzRnJvbUVuZHBvaW50KFxuICAgICAgZW5kcG9pbnQsXG4gICAgICBlbmRwb2ludFJlc291cmNlXG4gICAgKTtcblxuICAgIGltYWdlcnlQcm92aWRlci5lcnJvckV2ZW50LmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24gKHRpbGVQcm92aWRlckVycm9yKSB7XG4gICAgICAvL1Byb3BhZ2F0ZSB0aGUgZXJyb3JFdmVudCBidXQgc2V0IHRoZSBwcm92aWRlciB0byB0aGlzIGluc3RhbmNlIGluc3RlYWRcbiAgICAgIC8vb2YgdGhlIGlubmVyIGluc3RhbmNlLlxuICAgICAgdGlsZVByb3ZpZGVyRXJyb3IucHJvdmlkZXIgPSB0aGF0O1xuICAgICAgdGhhdC5fZXJyb3JFdmVudC5yYWlzZUV2ZW50KHRpbGVQcm92aWRlckVycm9yKTtcbiAgICB9KTtcblxuICAgIHRoYXQuX2ltYWdlcnlQcm92aWRlciA9IGltYWdlcnlQcm92aWRlcjtcbiAgICByZXR1cm4gaW1hZ2VyeVByb3ZpZGVyLnJlYWR5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoYXQuX3JlYWR5ID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICB9KTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSW9uSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVyIGlzIHJlYWR5IGZvciB1c2UuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0cnVlIHdoZW4gdGhlIHByb3ZpZGVyIGlzIHJlYWR5IGZvciB1c2UuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9taXNlLjxCb29sZWFuPn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICByZWFkeVByb21pc2U6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeVByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgcmVjdGFuZ2xlLCBpbiByYWRpYW5zLCBvZiB0aGUgaW1hZ2VyeSBwcm92aWRlZCBieSB0aGUgaW5zdGFuY2UuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgSW9uSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtSZWN0YW5nbGV9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVjdGFuZ2xlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJ0aWxlSGVpZ2h0IG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcnlQcm92aWRlci5yZWN0YW5nbGU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgd2lkdGggb2YgZWFjaCB0aWxlLCBpbiBwaXhlbHMuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgSW9uSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdGlsZVdpZHRoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJ0aWxlV2lkdGggbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICByZXR1cm4gdGhpcy5faW1hZ2VyeVByb3ZpZGVyLnRpbGVXaWR0aDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgZWFjaCB0aWxlLCBpbiBwaXhlbHMuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgSW9uSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdGlsZUhlaWdodDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwidGlsZUhlaWdodCBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIHJldHVybiB0aGlzLl9pbWFnZXJ5UHJvdmlkZXIudGlsZUhlaWdodDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtYXhpbXVtIGxldmVsLW9mLWRldGFpbCB0aGF0IGNhbiBiZSByZXF1ZXN0ZWQuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgSW9uSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG1heGltdW1MZXZlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwibWF4aW11bUxldmVsIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcnlQcm92aWRlci5tYXhpbXVtTGV2ZWw7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgbWluaW11bSBsZXZlbC1vZi1kZXRhaWwgdGhhdCBjYW4gYmUgcmVxdWVzdGVkLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIElvbkltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLiBHZW5lcmFsbHksXG4gICAqIGEgbWluaW11bSBsZXZlbCBzaG91bGQgb25seSBiZSB1c2VkIHdoZW4gdGhlIHJlY3RhbmdsZSBvZiB0aGUgaW1hZ2VyeSBpcyBzbWFsbFxuICAgKiBlbm91Z2ggdGhhdCB0aGUgbnVtYmVyIG9mIHRpbGVzIGF0IHRoZSBtaW5pbXVtIGxldmVsIGlzIHNtYWxsLiAgQW4gaW1hZ2VyeVxuICAgKiBwcm92aWRlciB3aXRoIG1vcmUgdGhhbiBhIGZldyB0aWxlcyBhdCB0aGUgbWluaW11bSBsZXZlbCB3aWxsIGxlYWQgdG9cbiAgICogcmVuZGVyaW5nIHByb2JsZW1zLlxuICAgKiBAbWVtYmVyb2YgSW9uSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG1pbmltdW1MZXZlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwibWluaW11bUxldmVsIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcnlQcm92aWRlci5taW5pbXVtTGV2ZWw7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgdGlsaW5nIHNjaGVtZSB1c2VkIGJ5IHRoZSBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBJb25JbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIElvbkltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxpbmdTY2hlbWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGluZ1NjaGVtZSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIHJldHVybiB0aGlzLl9pbWFnZXJ5UHJvdmlkZXIudGlsaW5nU2NoZW1lO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRpbGUgZGlzY2FyZCBwb2xpY3kuICBJZiBub3QgdW5kZWZpbmVkLCB0aGUgZGlzY2FyZCBwb2xpY3kgaXMgcmVzcG9uc2libGVcbiAgICogZm9yIGZpbHRlcmluZyBvdXQgXCJtaXNzaW5nXCIgdGlsZXMgdmlhIGl0cyBzaG91bGREaXNjYXJkSW1hZ2UgZnVuY3Rpb24uICBJZiB0aGlzIGZ1bmN0aW9uXG4gICAqIHJldHVybnMgdW5kZWZpbmVkLCBubyB0aWxlcyBhcmUgZmlsdGVyZWQuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgSW9uSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtUaWxlRGlzY2FyZFBvbGljeX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxlRGlzY2FyZFBvbGljeToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwidGlsZURpc2NhcmRQb2xpY3kgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICByZXR1cm4gdGhpcy5faW1hZ2VyeVByb3ZpZGVyLnRpbGVEaXNjYXJkUG9saWN5O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiB0aGUgaW1hZ2VyeSBwcm92aWRlciBlbmNvdW50ZXJzIGFuIGFzeW5jaHJvbm91cyBlcnJvci4gIEJ5IHN1YnNjcmliaW5nXG4gICAqIHRvIHRoZSBldmVudCwgeW91IHdpbGwgYmUgbm90aWZpZWQgb2YgdGhlIGVycm9yIGFuZCBjYW4gcG90ZW50aWFsbHkgcmVjb3ZlciBmcm9tIGl0LiAgRXZlbnQgbGlzdGVuZXJzXG4gICAqIGFyZSBwYXNzZWQgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFRpbGVQcm92aWRlckVycm9yfS5cbiAgICogQG1lbWJlcm9mIElvbkltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGVycm9yRXZlbnQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lcnJvckV2ZW50O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNyZWRpdCB0byBkaXNwbGF5IHdoZW4gdGhpcyBpbWFnZXJ5IHByb3ZpZGVyIGlzIGFjdGl2ZS4gIFR5cGljYWxseSB0aGlzIGlzIHVzZWQgdG8gY3JlZGl0XG4gICAqIHRoZSBzb3VyY2Ugb2YgdGhlIGltYWdlcnkuIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBJb25JbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIElvbkltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0NyZWRpdH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjcmVkaXQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcImNyZWRpdCBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIHJldHVybiB0aGlzLl9pbWFnZXJ5UHJvdmlkZXIuY3JlZGl0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZXMgcHJvdmlkZWQgYnkgdGhpcyBpbWFnZXJ5IHByb3ZpZGVyXG4gICAqIGluY2x1ZGUgYW4gYWxwaGEgY2hhbm5lbC4gIElmIHRoaXMgcHJvcGVydHkgaXMgZmFsc2UsIGFuIGFscGhhIGNoYW5uZWwsIGlmIHByZXNlbnQsIHdpbGxcbiAgICogYmUgaWdub3JlZC4gIElmIHRoaXMgcHJvcGVydHkgaXMgdHJ1ZSwgYW55IGltYWdlcyB3aXRob3V0IGFuIGFscGhhIGNoYW5uZWwgd2lsbCBiZSB0cmVhdGVkXG4gICAqIGFzIGlmIHRoZWlyIGFscGhhIGlzIDEuMCBldmVyeXdoZXJlLiAgV2hlbiB0aGlzIHByb3BlcnR5IGlzIGZhbHNlLCBtZW1vcnkgdXNhZ2VcbiAgICogYW5kIHRleHR1cmUgdXBsb2FkIHRpbWUgYXJlIHJlZHVjZWQuXG4gICAqIEBtZW1iZXJvZiBJb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhhc0FscGhhQ2hhbm5lbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwiaGFzQWxwaGFDaGFubmVsIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcnlQcm92aWRlci5oYXNBbHBoYUNoYW5uZWw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHByb3h5IHVzZWQgYnkgdGhpcyBwcm92aWRlci5cbiAgICAgKiBAbWVtYmVyb2YgSW9uSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgICAqIEB0eXBlIHtQcm94eX1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBwcm94eToge1xuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjcmVkaXRzIHRvIGJlIGRpc3BsYXllZCB3aGVuIGEgZ2l2ZW4gdGlsZSBpcyBkaXNwbGF5ZWQuXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWw7XG4gKiBAcmV0dXJucyB7Q3JlZGl0W119IFRoZSBjcmVkaXRzIHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSB0aWxlIGlzIGRpc3BsYXllZC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gPGNvZGU+Z2V0VGlsZUNyZWRpdHM8L2NvZGU+IG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXG4gKi9cbklvbkltYWdlcnlQcm92aWRlci5wcm90b3R5cGUuZ2V0VGlsZUNyZWRpdHMgPSBmdW5jdGlvbiAoeCwgeSwgbGV2ZWwpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiZ2V0VGlsZUNyZWRpdHMgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGlubmVyQ3JlZGl0cyA9IHRoaXMuX2ltYWdlcnlQcm92aWRlci5nZXRUaWxlQ3JlZGl0cyh4LCB5LCBsZXZlbCk7XG4gIGlmICghZGVmaW5lZChpbm5lckNyZWRpdHMpKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpbGVDcmVkaXRzO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuX3RpbGVDcmVkaXRzLmNvbmNhdChpbm5lckNyZWRpdHMpO1xufTtcblxuLyoqXG4gKiBSZXF1ZXN0cyB0aGUgaW1hZ2UgZm9yIGEgZ2l2ZW4gdGlsZS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgSW9uSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWwuXG4gKiBAcGFyYW0ge1JlcXVlc3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdCBvYmplY3QuIEludGVuZGVkIGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50Pnx1bmRlZmluZWR9IEEgcHJvbWlzZSBmb3IgdGhlIGltYWdlIHRoYXQgd2lsbCByZXNvbHZlIHdoZW4gdGhlIGltYWdlIGlzIGF2YWlsYWJsZSwgb3JcbiAqICAgICAgICAgIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgdG9vIG1hbnkgYWN0aXZlIHJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIsIGFuZCB0aGUgcmVxdWVzdFxuICogICAgICAgICAgc2hvdWxkIGJlIHJldHJpZWQgbGF0ZXIuICBUaGUgcmVzb2x2ZWQgaW1hZ2UgbWF5IGJlIGVpdGhlciBhblxuICogICAgICAgICAgSW1hZ2Ugb3IgYSBDYW52YXMgRE9NIG9iamVjdC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gPGNvZGU+cmVxdWVzdEltYWdlPC9jb2RlPiBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlxuICovXG5Jb25JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLnJlcXVlc3RJbWFnZSA9IGZ1bmN0aW9uICh4LCB5LCBsZXZlbCwgcmVxdWVzdCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJyZXF1ZXN0SW1hZ2UgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gIHJldHVybiB0aGlzLl9pbWFnZXJ5UHJvdmlkZXIucmVxdWVzdEltYWdlKHgsIHksIGxldmVsLCByZXF1ZXN0KTtcbn07XG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgZGV0ZXJtaW5lcyB3aGF0IGZlYXR1cmVzLCBpZiBhbnksIGFyZSBsb2NhdGVkIGF0IGEgZ2l2ZW4gbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSB3aXRoaW5cbiAqIGEgdGlsZS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBJb25JbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgb3B0aW9uYWwsIHNvIGl0IG1heSBub3QgZXhpc3Qgb24gYWxsIEltYWdlcnlQcm92aWRlcnMuXG4gKlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHRpbGUgWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHRpbGUgWSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxvbmdpdHVkZSBUaGUgbG9uZ2l0dWRlIGF0IHdoaWNoIHRvIHBpY2sgZmVhdHVyZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gbGF0aXR1ZGUgIFRoZSBsYXRpdHVkZSBhdCB3aGljaCB0byBwaWNrIGZlYXR1cmVzLlxuICogQHJldHVybiB7UHJvbWlzZS48SW1hZ2VyeUxheWVyRmVhdHVyZUluZm9bXT58dW5kZWZpbmVkfSBBIHByb21pc2UgZm9yIHRoZSBwaWNrZWQgZmVhdHVyZXMgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgYXN5bmNocm9ub3VzXG4gKiAgICAgICAgICAgICAgICAgICBwaWNraW5nIGNvbXBsZXRlcy4gIFRoZSByZXNvbHZlZCB2YWx1ZSBpcyBhbiBhcnJheSBvZiB7QGxpbmsgSW1hZ2VyeUxheWVyRmVhdHVyZUluZm99XG4gKiAgICAgICAgICAgICAgICAgICBpbnN0YW5jZXMuICBUaGUgYXJyYXkgbWF5IGJlIGVtcHR5IGlmIG5vIGZlYXR1cmVzIGFyZSBmb3VuZCBhdCB0aGUgZ2l2ZW4gbG9jYXRpb24uXG4gKiAgICAgICAgICAgICAgICAgICBJdCBtYXkgYWxzbyBiZSB1bmRlZmluZWQgaWYgcGlja2luZyBpcyBub3Qgc3VwcG9ydGVkLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSA8Y29kZT5waWNrRmVhdHVyZXM8L2NvZGU+IG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXG4gKi9cbklvbkltYWdlcnlQcm92aWRlci5wcm90b3R5cGUucGlja0ZlYXR1cmVzID0gZnVuY3Rpb24gKFxuICB4LFxuICB5LFxuICBsZXZlbCxcbiAgbG9uZ2l0dWRlLFxuICBsYXRpdHVkZVxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcInBpY2tGZWF0dXJlcyBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgcmV0dXJuIHRoaXMuX2ltYWdlcnlQcm92aWRlci5waWNrRmVhdHVyZXMoeCwgeSwgbGV2ZWwsIGxvbmdpdHVkZSwgbGF0aXR1ZGUpO1xufTtcblxuLy9leHBvc2VkIGZvciB0ZXN0aW5nXG5Jb25JbWFnZXJ5UHJvdmlkZXIuX2VuZHBvaW50Q2FjaGUgPSB7fTtcbmV4cG9ydCBkZWZhdWx0IElvbkltYWdlcnlQcm92aWRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///43234\n')},40999:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('// Note, these values map directly to ion asset ids.\n\n/**\n * The types of imagery provided by {@link createWorldImagery}.\n *\n * @enum {Number}\n */\nvar IonWorldImageryStyle = {\n  /**\n   * Aerial imagery.\n   *\n   * @type {Number}\n   * @constant\n   */\n  AERIAL: 2,\n\n  /**\n   * Aerial imagery with a road overlay.\n   *\n   * @type {Number}\n   * @constant\n   */\n  AERIAL_WITH_LABELS: 3,\n\n  /**\n   * Roads without additional imagery.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ROAD: 4,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(IonWorldImageryStyle));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDA5OTkuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQSxxQ0FBcUMseUJBQXlCO0FBQzlEO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsbUNBQW1DLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSW9uV29ybGRJbWFnZXJ5U3R5bGUuanM/Y2RkZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOb3RlLCB0aGVzZSB2YWx1ZXMgbWFwIGRpcmVjdGx5IHRvIGlvbiBhc3NldCBpZHMuXG5cbi8qKlxuICogVGhlIHR5cGVzIG9mIGltYWdlcnkgcHJvdmlkZWQgYnkge0BsaW5rIGNyZWF0ZVdvcmxkSW1hZ2VyeX0uXG4gKlxuICogQGVudW0ge051bWJlcn1cbiAqL1xudmFyIElvbldvcmxkSW1hZ2VyeVN0eWxlID0ge1xuICAvKipcbiAgICogQWVyaWFsIGltYWdlcnkuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgQUVSSUFMOiAyLFxuXG4gIC8qKlxuICAgKiBBZXJpYWwgaW1hZ2VyeSB3aXRoIGEgcm9hZCBvdmVybGF5LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIEFFUklBTF9XSVRIX0xBQkVMUzogMyxcblxuICAvKipcbiAgICogUm9hZHMgd2l0aG91dCBhZGRpdGlvbmFsIGltYWdlcnkuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgUk9BRDogNCxcbn07XG5leHBvcnQgZGVmYXVsdCBPYmplY3QuZnJlZXplKElvbldvcmxkSW1hZ2VyeVN0eWxlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///40999\n')},38347:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n/* harmony import */ var _Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59081);\n/* harmony import */ var _JobType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92454);\n\n\n\n\n\n/**\n *\n * @private\n * @constructor\n */\nfunction JobTypeBudget(total) {\n  /**\n   * Total budget, in milliseconds, allowed for one frame\n   */\n  this._total = total;\n\n  /**\n   * Time, in milliseconds, used so far during this frame\n   */\n  this.usedThisFrame = 0.0;\n\n  /**\n   * Time, in milliseconds, that other job types stole this frame\n   */\n  this.stolenFromMeThisFrame = 0.0;\n\n  /**\n   * Indicates if this job type was starved this frame, i.e., a job\n   * tried to run but didn\'t have budget\n   */\n  this.starvedThisFrame = false;\n\n  /**\n   * Indicates if this job was starved last frame.  This prevents it\n   * from being stolen from this frame.\n   */\n  this.starvedLastFrame = false;\n}\n\nObject.defineProperties(JobTypeBudget.prototype, {\n  total: {\n    get: function () {\n      return this._total;\n    },\n  },\n});\n\n/**\n * Engine for time slicing jobs during a frame to amortize work over multiple frames.  This supports:\n * <ul>\n *   <li>\n *     Separate budgets for different job types, e.g., texture, shader program, and buffer creation.  This\n *     allows all job types to make progress each frame.\n *   </li>\n *   <li>\n *     Stealing from other jobs type budgets if they were not exhausted in the previous frame.  This allows\n *     using the entire budget for all job types each frame even if, for example, all the jobs are the same type.\n *   </li>\n *   <li>\n *     Guaranteed progress on all job types each frame, even if it means exceeding the total budget for the frame.\n *     This prevents, for example, several expensive texture uploads over many frames from prevent a shader compile.\n *   </li>\n * </ul>\n *\n * @private\n */\nfunction JobScheduler(budgets) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(budgets) && budgets.length !== _JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].NUMBER_OF_JOB_TYPES */ .Z.NUMBER_OF_JOB_TYPES) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(\n      "A budget must be specified for each job type; budgets.length should equal JobType.NUMBER_OF_JOB_TYPES."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  // Total for defaults is half of of one frame at 10 fps\n  var jobBudgets = new Array(_JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].NUMBER_OF_JOB_TYPES */ .Z.NUMBER_OF_JOB_TYPES);\n  jobBudgets[_JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].TEXTURE */ .Z.TEXTURE] = new JobTypeBudget(\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(budgets) ? budgets[_JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].TEXTURE */ .Z.TEXTURE] : 10.0\n  );\n  // On cache miss, this most likely only allows one shader compile per frame\n  jobBudgets[_JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].PROGRAM */ .Z.PROGRAM] = new JobTypeBudget(\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(budgets) ? budgets[_JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].PROGRAM */ .Z.PROGRAM] : 10.0\n  );\n  jobBudgets[_JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].BUFFER */ .Z.BUFFER] = new JobTypeBudget(\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(budgets) ? budgets[_JobType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].BUFFER */ .Z.BUFFER] : 30.0\n  );\n\n  var length = jobBudgets.length;\n  var i;\n\n  var totalBudget = 0.0;\n  for (i = 0; i < length; ++i) {\n    totalBudget += jobBudgets[i].total;\n  }\n\n  var executedThisFrame = new Array(length);\n  for (i = 0; i < length; ++i) {\n    executedThisFrame[i] = false;\n  }\n\n  this._totalBudget = totalBudget;\n  this._totalUsedThisFrame = 0.0;\n  this._budgets = jobBudgets;\n  this._executedThisFrame = executedThisFrame;\n}\n\n// For unit testing\nJobScheduler.getTimestamp = _Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z;\n\nObject.defineProperties(JobScheduler.prototype, {\n  totalBudget: {\n    get: function () {\n      return this._totalBudget;\n    },\n  },\n});\n\nJobScheduler.prototype.disableThisFrame = function () {\n  // Prevent jobs from running this frame\n  this._totalUsedThisFrame = this._totalBudget;\n};\n\nJobScheduler.prototype.resetBudgets = function () {\n  var budgets = this._budgets;\n  var length = budgets.length;\n  for (var i = 0; i < length; ++i) {\n    var budget = budgets[i];\n    budget.starvedLastFrame = budget.starvedThisFrame;\n    budget.starvedThisFrame = false;\n    budget.usedThisFrame = 0.0;\n    budget.stolenFromMeThisFrame = 0.0;\n  }\n  this._totalUsedThisFrame = 0.0;\n};\n\nJobScheduler.prototype.execute = function (job, jobType) {\n  var budgets = this._budgets;\n  var budget = budgets[jobType];\n\n  // This ensures each job type makes progress each frame by executing at least once\n  var progressThisFrame = this._executedThisFrame[jobType];\n\n  if (this._totalUsedThisFrame >= this._totalBudget && progressThisFrame) {\n    // No budget left this frame for jobs of any type\n    budget.starvedThisFrame = true;\n    return false;\n  }\n\n  var stolenBudget;\n\n  if (budget.usedThisFrame + budget.stolenFromMeThisFrame >= budget.total) {\n    // No budget remaining for jobs of this type. Try to steal from other job types.\n    var length = budgets.length;\n    var i;\n    for (i = 0; i < length; ++i) {\n      stolenBudget = budgets[i];\n\n      // Steal from this budget if it has time left and it wasn\'t starved last fame\n      if (\n        stolenBudget.usedThisFrame + stolenBudget.stolenFromMeThisFrame <\n          stolenBudget.total &&\n        !stolenBudget.starvedLastFrame\n      ) {\n        break;\n      }\n    }\n\n    if (i === length && progressThisFrame) {\n      // No other job types can give up their budget this frame, and\n      // this job type already progressed this frame\n      return false;\n    }\n\n    if (progressThisFrame) {\n      // It is considered "starved" even if it executes using stolen time so that\n      // next frame, no other job types can steal time from it.\n      budget.starvedThisFrame = true;\n    }\n  }\n\n  var startTime = JobScheduler.getTimestamp();\n  job.execute();\n  var duration = JobScheduler.getTimestamp() - startTime;\n\n  // Track both time remaining for this job type and all jobs\n  // so budget stealing does send us way over the total budget.\n  this._totalUsedThisFrame += duration;\n\n  if (stolenBudget) {\n    stolenBudget.stolenFromMeThisFrame += duration;\n  } else {\n    budget.usedThisFrame += duration;\n  }\n  this._executedThisFrame[jobType] = true;\n\n  return true;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (JobScheduler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzgzNDcuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF5QztBQUNjO0FBQ0o7QUFDaEI7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scUVBQU8sZ0NBQWdDLG9HQUEyQjtBQUN4RSxjQUFjLHdFQUFjO0FBQzVCLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkIsb0dBQTJCO0FBQ3hELGFBQWEsNEVBQWU7QUFDNUIsSUFBSSxxRUFBTyxvQkFBb0IsNEVBQWU7QUFDOUM7QUFDQTtBQUNBLGFBQWEsNEVBQWU7QUFDNUIsSUFBSSxxRUFBTyxvQkFBb0IsNEVBQWU7QUFDOUM7QUFDQSxhQUFhLDBFQUFjO0FBQzNCLElBQUkscUVBQU8sb0JBQW9CLDBFQUFjO0FBQzdDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjLFlBQVk7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLGNBQWMsWUFBWTtBQUMxQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsc0VBQVk7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5REFBZSxZQUFZLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSm9iU2NoZWR1bGVyLmpzPzQ5ZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgZ2V0VGltZXN0YW1wIGZyb20gXCIuLi9Db3JlL2dldFRpbWVzdGFtcC5qc1wiO1xuaW1wb3J0IEpvYlR5cGUgZnJvbSBcIi4vSm9iVHlwZS5qc1wiO1xuXG4vKipcbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEpvYlR5cGVCdWRnZXQodG90YWwpIHtcbiAgLyoqXG4gICAqIFRvdGFsIGJ1ZGdldCwgaW4gbWlsbGlzZWNvbmRzLCBhbGxvd2VkIGZvciBvbmUgZnJhbWVcbiAgICovXG4gIHRoaXMuX3RvdGFsID0gdG90YWw7XG5cbiAgLyoqXG4gICAqIFRpbWUsIGluIG1pbGxpc2Vjb25kcywgdXNlZCBzbyBmYXIgZHVyaW5nIHRoaXMgZnJhbWVcbiAgICovXG4gIHRoaXMudXNlZFRoaXNGcmFtZSA9IDAuMDtcblxuICAvKipcbiAgICogVGltZSwgaW4gbWlsbGlzZWNvbmRzLCB0aGF0IG90aGVyIGpvYiB0eXBlcyBzdG9sZSB0aGlzIGZyYW1lXG4gICAqL1xuICB0aGlzLnN0b2xlbkZyb21NZVRoaXNGcmFtZSA9IDAuMDtcblxuICAvKipcbiAgICogSW5kaWNhdGVzIGlmIHRoaXMgam9iIHR5cGUgd2FzIHN0YXJ2ZWQgdGhpcyBmcmFtZSwgaS5lLiwgYSBqb2JcbiAgICogdHJpZWQgdG8gcnVuIGJ1dCBkaWRuJ3QgaGF2ZSBidWRnZXRcbiAgICovXG4gIHRoaXMuc3RhcnZlZFRoaXNGcmFtZSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaWYgdGhpcyBqb2Igd2FzIHN0YXJ2ZWQgbGFzdCBmcmFtZS4gIFRoaXMgcHJldmVudHMgaXRcbiAgICogZnJvbSBiZWluZyBzdG9sZW4gZnJvbSB0aGlzIGZyYW1lLlxuICAgKi9cbiAgdGhpcy5zdGFydmVkTGFzdEZyYW1lID0gZmFsc2U7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEpvYlR5cGVCdWRnZXQucHJvdG90eXBlLCB7XG4gIHRvdGFsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdG90YWw7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEVuZ2luZSBmb3IgdGltZSBzbGljaW5nIGpvYnMgZHVyaW5nIGEgZnJhbWUgdG8gYW1vcnRpemUgd29yayBvdmVyIG11bHRpcGxlIGZyYW1lcy4gIFRoaXMgc3VwcG9ydHM6XG4gKiA8dWw+XG4gKiAgIDxsaT5cbiAqICAgICBTZXBhcmF0ZSBidWRnZXRzIGZvciBkaWZmZXJlbnQgam9iIHR5cGVzLCBlLmcuLCB0ZXh0dXJlLCBzaGFkZXIgcHJvZ3JhbSwgYW5kIGJ1ZmZlciBjcmVhdGlvbi4gIFRoaXNcbiAqICAgICBhbGxvd3MgYWxsIGpvYiB0eXBlcyB0byBtYWtlIHByb2dyZXNzIGVhY2ggZnJhbWUuXG4gKiAgIDwvbGk+XG4gKiAgIDxsaT5cbiAqICAgICBTdGVhbGluZyBmcm9tIG90aGVyIGpvYnMgdHlwZSBidWRnZXRzIGlmIHRoZXkgd2VyZSBub3QgZXhoYXVzdGVkIGluIHRoZSBwcmV2aW91cyBmcmFtZS4gIFRoaXMgYWxsb3dzXG4gKiAgICAgdXNpbmcgdGhlIGVudGlyZSBidWRnZXQgZm9yIGFsbCBqb2IgdHlwZXMgZWFjaCBmcmFtZSBldmVuIGlmLCBmb3IgZXhhbXBsZSwgYWxsIHRoZSBqb2JzIGFyZSB0aGUgc2FtZSB0eXBlLlxuICogICA8L2xpPlxuICogICA8bGk+XG4gKiAgICAgR3VhcmFudGVlZCBwcm9ncmVzcyBvbiBhbGwgam9iIHR5cGVzIGVhY2ggZnJhbWUsIGV2ZW4gaWYgaXQgbWVhbnMgZXhjZWVkaW5nIHRoZSB0b3RhbCBidWRnZXQgZm9yIHRoZSBmcmFtZS5cbiAqICAgICBUaGlzIHByZXZlbnRzLCBmb3IgZXhhbXBsZSwgc2V2ZXJhbCBleHBlbnNpdmUgdGV4dHVyZSB1cGxvYWRzIG92ZXIgbWFueSBmcmFtZXMgZnJvbSBwcmV2ZW50IGEgc2hhZGVyIGNvbXBpbGUuXG4gKiAgIDwvbGk+XG4gKiA8L3VsPlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEpvYlNjaGVkdWxlcihidWRnZXRzKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChkZWZpbmVkKGJ1ZGdldHMpICYmIGJ1ZGdldHMubGVuZ3RoICE9PSBKb2JUeXBlLk5VTUJFUl9PRl9KT0JfVFlQRVMpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIkEgYnVkZ2V0IG11c3QgYmUgc3BlY2lmaWVkIGZvciBlYWNoIGpvYiB0eXBlOyBidWRnZXRzLmxlbmd0aCBzaG91bGQgZXF1YWwgSm9iVHlwZS5OVU1CRVJfT0ZfSk9CX1RZUEVTLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAvLyBUb3RhbCBmb3IgZGVmYXVsdHMgaXMgaGFsZiBvZiBvZiBvbmUgZnJhbWUgYXQgMTAgZnBzXG4gIHZhciBqb2JCdWRnZXRzID0gbmV3IEFycmF5KEpvYlR5cGUuTlVNQkVSX09GX0pPQl9UWVBFUyk7XG4gIGpvYkJ1ZGdldHNbSm9iVHlwZS5URVhUVVJFXSA9IG5ldyBKb2JUeXBlQnVkZ2V0KFxuICAgIGRlZmluZWQoYnVkZ2V0cykgPyBidWRnZXRzW0pvYlR5cGUuVEVYVFVSRV0gOiAxMC4wXG4gICk7XG4gIC8vIE9uIGNhY2hlIG1pc3MsIHRoaXMgbW9zdCBsaWtlbHkgb25seSBhbGxvd3Mgb25lIHNoYWRlciBjb21waWxlIHBlciBmcmFtZVxuICBqb2JCdWRnZXRzW0pvYlR5cGUuUFJPR1JBTV0gPSBuZXcgSm9iVHlwZUJ1ZGdldChcbiAgICBkZWZpbmVkKGJ1ZGdldHMpID8gYnVkZ2V0c1tKb2JUeXBlLlBST0dSQU1dIDogMTAuMFxuICApO1xuICBqb2JCdWRnZXRzW0pvYlR5cGUuQlVGRkVSXSA9IG5ldyBKb2JUeXBlQnVkZ2V0KFxuICAgIGRlZmluZWQoYnVkZ2V0cykgPyBidWRnZXRzW0pvYlR5cGUuQlVGRkVSXSA6IDMwLjBcbiAgKTtcblxuICB2YXIgbGVuZ3RoID0gam9iQnVkZ2V0cy5sZW5ndGg7XG4gIHZhciBpO1xuXG4gIHZhciB0b3RhbEJ1ZGdldCA9IDAuMDtcbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdG90YWxCdWRnZXQgKz0gam9iQnVkZ2V0c1tpXS50b3RhbDtcbiAgfVxuXG4gIHZhciBleGVjdXRlZFRoaXNGcmFtZSA9IG5ldyBBcnJheShsZW5ndGgpO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBleGVjdXRlZFRoaXNGcmFtZVtpXSA9IGZhbHNlO1xuICB9XG5cbiAgdGhpcy5fdG90YWxCdWRnZXQgPSB0b3RhbEJ1ZGdldDtcbiAgdGhpcy5fdG90YWxVc2VkVGhpc0ZyYW1lID0gMC4wO1xuICB0aGlzLl9idWRnZXRzID0gam9iQnVkZ2V0cztcbiAgdGhpcy5fZXhlY3V0ZWRUaGlzRnJhbWUgPSBleGVjdXRlZFRoaXNGcmFtZTtcbn1cblxuLy8gRm9yIHVuaXQgdGVzdGluZ1xuSm9iU2NoZWR1bGVyLmdldFRpbWVzdGFtcCA9IGdldFRpbWVzdGFtcDtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSm9iU2NoZWR1bGVyLnByb3RvdHlwZSwge1xuICB0b3RhbEJ1ZGdldDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RvdGFsQnVkZ2V0O1xuICAgIH0sXG4gIH0sXG59KTtcblxuSm9iU2NoZWR1bGVyLnByb3RvdHlwZS5kaXNhYmxlVGhpc0ZyYW1lID0gZnVuY3Rpb24gKCkge1xuICAvLyBQcmV2ZW50IGpvYnMgZnJvbSBydW5uaW5nIHRoaXMgZnJhbWVcbiAgdGhpcy5fdG90YWxVc2VkVGhpc0ZyYW1lID0gdGhpcy5fdG90YWxCdWRnZXQ7XG59O1xuXG5Kb2JTY2hlZHVsZXIucHJvdG90eXBlLnJlc2V0QnVkZ2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGJ1ZGdldHMgPSB0aGlzLl9idWRnZXRzO1xuICB2YXIgbGVuZ3RoID0gYnVkZ2V0cy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVkZ2V0ID0gYnVkZ2V0c1tpXTtcbiAgICBidWRnZXQuc3RhcnZlZExhc3RGcmFtZSA9IGJ1ZGdldC5zdGFydmVkVGhpc0ZyYW1lO1xuICAgIGJ1ZGdldC5zdGFydmVkVGhpc0ZyYW1lID0gZmFsc2U7XG4gICAgYnVkZ2V0LnVzZWRUaGlzRnJhbWUgPSAwLjA7XG4gICAgYnVkZ2V0LnN0b2xlbkZyb21NZVRoaXNGcmFtZSA9IDAuMDtcbiAgfVxuICB0aGlzLl90b3RhbFVzZWRUaGlzRnJhbWUgPSAwLjA7XG59O1xuXG5Kb2JTY2hlZHVsZXIucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoam9iLCBqb2JUeXBlKSB7XG4gIHZhciBidWRnZXRzID0gdGhpcy5fYnVkZ2V0cztcbiAgdmFyIGJ1ZGdldCA9IGJ1ZGdldHNbam9iVHlwZV07XG5cbiAgLy8gVGhpcyBlbnN1cmVzIGVhY2ggam9iIHR5cGUgbWFrZXMgcHJvZ3Jlc3MgZWFjaCBmcmFtZSBieSBleGVjdXRpbmcgYXQgbGVhc3Qgb25jZVxuICB2YXIgcHJvZ3Jlc3NUaGlzRnJhbWUgPSB0aGlzLl9leGVjdXRlZFRoaXNGcmFtZVtqb2JUeXBlXTtcblxuICBpZiAodGhpcy5fdG90YWxVc2VkVGhpc0ZyYW1lID49IHRoaXMuX3RvdGFsQnVkZ2V0ICYmIHByb2dyZXNzVGhpc0ZyYW1lKSB7XG4gICAgLy8gTm8gYnVkZ2V0IGxlZnQgdGhpcyBmcmFtZSBmb3Igam9icyBvZiBhbnkgdHlwZVxuICAgIGJ1ZGdldC5zdGFydmVkVGhpc0ZyYW1lID0gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgc3RvbGVuQnVkZ2V0O1xuXG4gIGlmIChidWRnZXQudXNlZFRoaXNGcmFtZSArIGJ1ZGdldC5zdG9sZW5Gcm9tTWVUaGlzRnJhbWUgPj0gYnVkZ2V0LnRvdGFsKSB7XG4gICAgLy8gTm8gYnVkZ2V0IHJlbWFpbmluZyBmb3Igam9icyBvZiB0aGlzIHR5cGUuIFRyeSB0byBzdGVhbCBmcm9tIG90aGVyIGpvYiB0eXBlcy5cbiAgICB2YXIgbGVuZ3RoID0gYnVkZ2V0cy5sZW5ndGg7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBzdG9sZW5CdWRnZXQgPSBidWRnZXRzW2ldO1xuXG4gICAgICAvLyBTdGVhbCBmcm9tIHRoaXMgYnVkZ2V0IGlmIGl0IGhhcyB0aW1lIGxlZnQgYW5kIGl0IHdhc24ndCBzdGFydmVkIGxhc3QgZmFtZVxuICAgICAgaWYgKFxuICAgICAgICBzdG9sZW5CdWRnZXQudXNlZFRoaXNGcmFtZSArIHN0b2xlbkJ1ZGdldC5zdG9sZW5Gcm9tTWVUaGlzRnJhbWUgPFxuICAgICAgICAgIHN0b2xlbkJ1ZGdldC50b3RhbCAmJlxuICAgICAgICAhc3RvbGVuQnVkZ2V0LnN0YXJ2ZWRMYXN0RnJhbWVcbiAgICAgICkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaSA9PT0gbGVuZ3RoICYmIHByb2dyZXNzVGhpc0ZyYW1lKSB7XG4gICAgICAvLyBObyBvdGhlciBqb2IgdHlwZXMgY2FuIGdpdmUgdXAgdGhlaXIgYnVkZ2V0IHRoaXMgZnJhbWUsIGFuZFxuICAgICAgLy8gdGhpcyBqb2IgdHlwZSBhbHJlYWR5IHByb2dyZXNzZWQgdGhpcyBmcmFtZVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChwcm9ncmVzc1RoaXNGcmFtZSkge1xuICAgICAgLy8gSXQgaXMgY29uc2lkZXJlZCBcInN0YXJ2ZWRcIiBldmVuIGlmIGl0IGV4ZWN1dGVzIHVzaW5nIHN0b2xlbiB0aW1lIHNvIHRoYXRcbiAgICAgIC8vIG5leHQgZnJhbWUsIG5vIG90aGVyIGpvYiB0eXBlcyBjYW4gc3RlYWwgdGltZSBmcm9tIGl0LlxuICAgICAgYnVkZ2V0LnN0YXJ2ZWRUaGlzRnJhbWUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzdGFydFRpbWUgPSBKb2JTY2hlZHVsZXIuZ2V0VGltZXN0YW1wKCk7XG4gIGpvYi5leGVjdXRlKCk7XG4gIHZhciBkdXJhdGlvbiA9IEpvYlNjaGVkdWxlci5nZXRUaW1lc3RhbXAoKSAtIHN0YXJ0VGltZTtcblxuICAvLyBUcmFjayBib3RoIHRpbWUgcmVtYWluaW5nIGZvciB0aGlzIGpvYiB0eXBlIGFuZCBhbGwgam9ic1xuICAvLyBzbyBidWRnZXQgc3RlYWxpbmcgZG9lcyBzZW5kIHVzIHdheSBvdmVyIHRoZSB0b3RhbCBidWRnZXQuXG4gIHRoaXMuX3RvdGFsVXNlZFRoaXNGcmFtZSArPSBkdXJhdGlvbjtcblxuICBpZiAoc3RvbGVuQnVkZ2V0KSB7XG4gICAgc3RvbGVuQnVkZ2V0LnN0b2xlbkZyb21NZVRoaXNGcmFtZSArPSBkdXJhdGlvbjtcbiAgfSBlbHNlIHtcbiAgICBidWRnZXQudXNlZFRoaXNGcmFtZSArPSBkdXJhdGlvbjtcbiAgfVxuICB0aGlzLl9leGVjdXRlZFRoaXNGcmFtZVtqb2JUeXBlXSA9IHRydWU7XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuZXhwb3J0IGRlZmF1bHQgSm9iU2NoZWR1bGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///38347\n')},92454:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * @private\n */\nvar JobType = {\n  TEXTURE: 0,\n  PROGRAM: 1,\n  BUFFER: 2,\n  NUMBER_OF_JOB_TYPES: 3,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(JobType));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTI0NTQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsc0JBQXNCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSm9iVHlwZS5qcz8zYWUzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIEpvYlR5cGUgPSB7XG4gIFRFWFRVUkU6IDAsXG4gIFBST0dSQU06IDEsXG4gIEJVRkZFUjogMixcbiAgTlVNQkVSX09GX0pPQl9UWVBFUzogMyxcbn07XG5leHBvcnQgZGVmYXVsdCBPYmplY3QuZnJlZXplKEpvYlR5cGUpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///92454\n')},88893:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ JsonMetadataTable; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_clone_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(83856);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(18349);\n\n\n\n\n\n\n/**\n * A table for storing free-form JSON metadata, as in the 3D Tiles batch table.\n *\n * @param {Object} options Object with the following properties:\n * @param {Number} options.count The number of entities in the table.\n * @param {Object.<String, Array>} options.properties The JSON representation of the metadata table. All the arrays must have exactly options.count elements.\n *\n * @alias JsonMetadataTable\n * @constructor\n * @private\n */\nfunction JsonMetadataTable(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number.greaterThan */ .Z.typeOf.number.greaterThan("options.count", options.count, 0);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.properties", options.properties);\n  //>>includeEnd(\'debug\');\n\n  this._count = options.count;\n  this._properties = (0,_Core_clone_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.properties, true);\n}\n\n/**\n * Returns whether the table has this property.\n *\n * @param {String} propertyId The case-sensitive ID of the property.\n * @returns {Boolean} Whether the table has this property.\n * @private\n */\nJsonMetadataTable.prototype.hasProperty = function (propertyId) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].hasProperty */ .Z.hasProperty(propertyId, this._properties);\n};\n\n/**\n * Returns an array of property IDs.\n *\n * @param {String[]} [results] An array into which to store the results.\n * @returns {String[]} The property IDs.\n * @private\n */\nJsonMetadataTable.prototype.getPropertyIds = function (results) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getPropertyIds */ .Z.getPropertyIds(this._properties, undefined, results);\n};\n\n/**\n * Returns a copy of the value of the property with the given ID.\n *\n * @param {Number} index The index of the entity.\n * @param {String} propertyId The case-sensitive ID of the property.\n * @returns {*} The value of the property or <code>undefined</code> if the entity does not have this property.\n *\n * @exception {DeveloperError} index is out of bounds\n * @private\n */\nJsonMetadataTable.prototype.getProperty = function (index, propertyId) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("index", index);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("propertyId", propertyId);\n\n  if (index < 0 || index >= this._count) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "index must be in the range [0, " + this._count + ")"\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var property = this._properties[propertyId];\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(property)) {\n    return (0,_Core_clone_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(property[index], true);\n  }\n\n  return undefined;\n};\n\n/**\n * Sets the value of the property with the given ID.\n *\n * @param {Number} index The index of the entity.\n * @param {String} propertyId The case-sensitive ID of the property.\n * @param {*} value The value of the property that will be copied.\n * @returns {Boolean} <code>true</code> if the property was set, <code>false</code> otherwise.\n *\n * @exception {DeveloperError} index is out of bounds\n * @private\n */\nJsonMetadataTable.prototype.setProperty = function (index, propertyId, value) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("index", index);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("propertyId", propertyId);\n\n  if (index < 0 || index >= this._count) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "index must be in the range [0, " + this._count + ")"\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var property = this._properties[propertyId];\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(property)) {\n    property[index] = (0,_Core_clone_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(value, true);\n    return true;\n  }\n\n  return false;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODg4OTMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUM7QUFDQTtBQUNJO0FBQ2M7QUFDTjs7QUFFakQ7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLHdCQUF3QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBLEVBQUUsbUhBQStCO0FBQ2pDLEVBQUUsMkZBQW1CO0FBQ3JCOztBQUVBO0FBQ0EscUJBQXFCLG1FQUFLO0FBQzFCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsU0FBUywyRkFBMEI7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLGlHQUE2QjtBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsR0FBRztBQUNoQjtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7O0FBRXJCO0FBQ0EsY0FBYyx3RUFBYztBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU0scUVBQU87QUFDYixXQUFXLG1FQUFLO0FBQ2hCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLEdBQUc7QUFDZCxhQUFhLFNBQVM7QUFDdEI7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMkZBQW1CO0FBQ3JCLEVBQUUsMkZBQW1COztBQUVyQjtBQUNBLGNBQWMsd0VBQWM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLHFFQUFPO0FBQ2Isc0JBQXNCLG1FQUFLO0FBQzNCO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Kc29uTWV0YWRhdGFUYWJsZS5qcz9lYzBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGNsb25lIGZyb20gXCIuLi9Db3JlL2Nsb25lLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBNZXRhZGF0YUVudGl0eSBmcm9tIFwiLi9NZXRhZGF0YUVudGl0eS5qc1wiO1xuXG4vKipcbiAqIEEgdGFibGUgZm9yIHN0b3JpbmcgZnJlZS1mb3JtIEpTT04gbWV0YWRhdGEsIGFzIGluIHRoZSAzRCBUaWxlcyBiYXRjaCB0YWJsZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5jb3VudCBUaGUgbnVtYmVyIG9mIGVudGl0aWVzIGluIHRoZSB0YWJsZS5cbiAqIEBwYXJhbSB7T2JqZWN0LjxTdHJpbmcsIEFycmF5Pn0gb3B0aW9ucy5wcm9wZXJ0aWVzIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtZXRhZGF0YSB0YWJsZS4gQWxsIHRoZSBhcnJheXMgbXVzdCBoYXZlIGV4YWN0bHkgb3B0aW9ucy5jb3VudCBlbGVtZW50cy5cbiAqXG4gKiBAYWxpYXMgSnNvbk1ldGFkYXRhVGFibGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSnNvbk1ldGFkYXRhVGFibGUob3B0aW9ucykge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YubnVtYmVyLmdyZWF0ZXJUaGFuKFwib3B0aW9ucy5jb3VudFwiLCBvcHRpb25zLmNvdW50LCAwKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMucHJvcGVydGllc1wiLCBvcHRpb25zLnByb3BlcnRpZXMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLl9jb3VudCA9IG9wdGlvbnMuY291bnQ7XG4gIHRoaXMuX3Byb3BlcnRpZXMgPSBjbG9uZShvcHRpb25zLnByb3BlcnRpZXMsIHRydWUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgdGFibGUgaGFzIHRoaXMgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgVGhlIGNhc2Utc2Vuc2l0aXZlIElEIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIHRoZSB0YWJsZSBoYXMgdGhpcyBwcm9wZXJ0eS5cbiAqIEBwcml2YXRlXG4gKi9cbkpzb25NZXRhZGF0YVRhYmxlLnByb3RvdHlwZS5oYXNQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0eUlkKSB7XG4gIHJldHVybiBNZXRhZGF0YUVudGl0eS5oYXNQcm9wZXJ0eShwcm9wZXJ0eUlkLCB0aGlzLl9wcm9wZXJ0aWVzKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBJRHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmdbXX0gW3Jlc3VsdHNdIEFuIGFycmF5IGludG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdHMuXG4gKiBAcmV0dXJucyB7U3RyaW5nW119IFRoZSBwcm9wZXJ0eSBJRHMuXG4gKiBAcHJpdmF0ZVxuICovXG5Kc29uTWV0YWRhdGFUYWJsZS5wcm90b3R5cGUuZ2V0UHJvcGVydHlJZHMgPSBmdW5jdGlvbiAocmVzdWx0cykge1xuICByZXR1cm4gTWV0YWRhdGFFbnRpdHkuZ2V0UHJvcGVydHlJZHModGhpcy5fcHJvcGVydGllcywgdW5kZWZpbmVkLCByZXN1bHRzKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBJRC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBlbnRpdHkuXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlJZCBUaGUgY2FzZS1zZW5zaXRpdmUgSUQgb2YgdGhlIHByb3BlcnR5LlxuICogQHJldHVybnMgeyp9IFRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgb3IgPGNvZGU+dW5kZWZpbmVkPC9jb2RlPiBpZiB0aGUgZW50aXR5IGRvZXMgbm90IGhhdmUgdGhpcyBwcm9wZXJ0eS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gaW5kZXggaXMgb3V0IG9mIGJvdW5kc1xuICogQHByaXZhdGVcbiAqL1xuSnNvbk1ldGFkYXRhVGFibGUucHJvdG90eXBlLmdldFByb3BlcnR5ID0gZnVuY3Rpb24gKGluZGV4LCBwcm9wZXJ0eUlkKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJpbmRleFwiLCBpbmRleCk7XG4gIENoZWNrLnR5cGVPZi5zdHJpbmcoXCJwcm9wZXJ0eUlkXCIsIHByb3BlcnR5SWQpO1xuXG4gIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5fY291bnQpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcImluZGV4IG11c3QgYmUgaW4gdGhlIHJhbmdlIFswLCBcIiArIHRoaXMuX2NvdW50ICsgXCIpXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBwcm9wZXJ0eSA9IHRoaXMuX3Byb3BlcnRpZXNbcHJvcGVydHlJZF07XG4gIGlmIChkZWZpbmVkKHByb3BlcnR5KSkge1xuICAgIHJldHVybiBjbG9uZShwcm9wZXJ0eVtpbmRleF0sIHRydWUpO1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IHdpdGggdGhlIGdpdmVuIElELlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGVudGl0eS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUlkIFRoZSBjYXNlLXNlbnNpdGl2ZSBJRCBvZiB0aGUgcHJvcGVydHkuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgdGhhdCB3aWxsIGJlIGNvcGllZC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgcHJvcGVydHkgd2FzIHNldCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gaW5kZXggaXMgb3V0IG9mIGJvdW5kc1xuICogQHByaXZhdGVcbiAqL1xuSnNvbk1ldGFkYXRhVGFibGUucHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24gKGluZGV4LCBwcm9wZXJ0eUlkLCB2YWx1ZSkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwiaW5kZXhcIiwgaW5kZXgpO1xuICBDaGVjay50eXBlT2Yuc3RyaW5nKFwicHJvcGVydHlJZFwiLCBwcm9wZXJ0eUlkKTtcblxuICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuX2NvdW50KSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJpbmRleCBtdXN0IGJlIGluIHRoZSByYW5nZSBbMCwgXCIgKyB0aGlzLl9jb3VudCArIFwiKVwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgcHJvcGVydHkgPSB0aGlzLl9wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdO1xuICBpZiAoZGVmaW5lZChwcm9wZXJ0eSkpIHtcbiAgICBwcm9wZXJ0eVtpbmRleF0gPSBjbG9uZSh2YWx1ZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///88893\n')}}]);