"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[7640],{15508:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_arraySlice_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68591);\n/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63367);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66553);\n/* harmony import */ var _Core_clone_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(83856);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59947);\n/* harmony import */ var _Core_combine_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8182);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(86511);\n/* harmony import */ var _Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(12540);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(72248);\n/* harmony import */ var _Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(27671);\n/* harmony import */ var _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(91473);\n/* harmony import */ var _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(97264);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(9407);\n/* harmony import */ var _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(95555);\n/* harmony import */ var _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(99095);\n/* harmony import */ var _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(58597);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(60072);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(8379);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(18192);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(13222);\n/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(13633);\n/* harmony import */ var _Cesium3DTileBatchTable_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(84020);\n/* harmony import */ var _Cesium3DTileFeatureTable_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(79553);\n/* harmony import */ var _DracoLoader_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(8056);\n/* harmony import */ var _getClipAndStyleCode_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(11013);\n/* harmony import */ var _getClippingFunction_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(84167);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(89917);\n/* harmony import */ var _ShadowMode_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(34125);\n/* harmony import */ var _StencilConstants_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(87233);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar DecodingState = {\n  NEEDS_DECODE: 0,\n  DECODING: 1,\n  READY: 2,\n  FAILED: 3,\n};\n\n/**\n * Represents the contents of a\n * {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/PointCloud|Point Cloud}\n * tile. Used internally by {@link PointCloud3DTileContent} and {@link TimeDynamicPointCloud}.\n *\n * @alias PointCloud\n * @constructor\n *\n * @see PointCloud3DTileContent\n * @see TimeDynamicPointCloud\n *\n * @private\n */\nfunction PointCloud(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.object */ .Z.typeOf.object("options", options);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.object */ .Z.typeOf.object("options.arrayBuffer", options.arrayBuffer);\n  //>>includeEnd(\'debug\');\n\n  // Hold onto the payload until the render resources are created\n  this._parsedContent = undefined;\n\n  this._drawCommand = undefined;\n  this._isTranslucent = false;\n  this._styleTranslucent = false;\n  this._constantColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(_Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].DARKGRAY */ .Z.DARKGRAY);\n  this._highlightColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(_Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].WHITE */ .Z.WHITE);\n  this._pointSize = 1.0;\n\n  this._rtcCenter = undefined;\n  this._quantizedVolumeScale = undefined;\n  this._quantizedVolumeOffset = undefined;\n\n  // These values are used to regenerate the shader when the style changes\n  this._styleableShaderAttributes = undefined;\n  this._isQuantized = false;\n  this._isOctEncoded16P = false;\n  this._isRGB565 = false;\n  this._hasColors = false;\n  this._hasNormals = false;\n  this._hasBatchIds = false;\n\n  // Draco\n  this._decodingState = DecodingState.READY;\n  this._dequantizeInShader = true;\n  this._isQuantizedDraco = false;\n  this._isOctEncodedDraco = false;\n  this._quantizedRange = 0.0;\n  this._octEncodedRange = 0.0;\n\n  // Use per-point normals to hide back-facing points.\n  this.backFaceCulling = false;\n  this._backFaceCulling = false;\n\n  // Whether to enable normal shading\n  this.normalShading = true;\n  this._normalShading = true;\n\n  this._opaqueRenderState = undefined;\n  this._translucentRenderState = undefined;\n\n  this._mode = undefined;\n\n  this._ready = false;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].defer */ .Z.defer();\n  this._pointsLength = 0;\n  this._geometryByteLength = 0;\n\n  this._vertexShaderLoaded = options.vertexShaderLoaded;\n  this._fragmentShaderLoaded = options.fragmentShaderLoaded;\n  this._uniformMapLoaded = options.uniformMapLoaded;\n  this._batchTableLoaded = options.batchTableLoaded;\n  this._pickIdLoaded = options.pickIdLoaded;\n  this._opaquePass = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.opaquePass, _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].OPAQUE */ .Z.OPAQUE);\n  this._cull = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.cull, true);\n\n  this.style = undefined;\n  this._style = undefined;\n  this.styleDirty = false;\n\n  this.modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].IDENTITY */ .Z.IDENTITY);\n  this._modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n  this.time = 0.0; // For styling\n  this.shadows = _ShadowMode_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"].ENABLED */ .Z.ENABLED;\n  this._boundingSphere = undefined;\n\n  this.clippingPlanes = undefined;\n  this.isClipped = false;\n  this.clippingPlanesDirty = false;\n  // If defined, use this matrix to position the clipping planes instead of the modelMatrix.\n  // This is so that when point clouds are part of a tileset they all get clipped relative\n  // to the root tile.\n  this.clippingPlanesOriginMatrix = undefined;\n\n  this.attenuation = false;\n  this._attenuation = false;\n\n  // Options for geometric error based attenuation\n  this.geometricError = 0.0;\n  this.geometricErrorScale = 1.0;\n  this.maximumAttenuation = this._pointSize;\n\n  initialize(this, options);\n}\n\nObject.defineProperties(PointCloud.prototype, {\n  pointsLength: {\n    get: function () {\n      return this._pointsLength;\n    },\n  },\n\n  geometryByteLength: {\n    get: function () {\n      return this._geometryByteLength;\n    },\n  },\n\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  color: {\n    get: function () {\n      return _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(this._highlightColor);\n    },\n    set: function (value) {\n      this._highlightColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(value, this._highlightColor);\n    },\n  },\n\n  boundingSphere: {\n    get: function () {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(this._drawCommand)) {\n        return this._drawCommand.boundingVolume;\n      }\n      return undefined;\n    },\n    set: function (value) {\n      this._boundingSphere = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(value, this._boundingSphere);\n    },\n  },\n});\n\nvar sizeOfUint32 = Uint32Array.BYTES_PER_ELEMENT;\n\nfunction initialize(pointCloud, options) {\n  var arrayBuffer = options.arrayBuffer;\n  var byteOffset = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.byteOffset, 0);\n\n  var uint8Array = new Uint8Array(arrayBuffer);\n  var view = new DataView(arrayBuffer);\n  byteOffset += sizeOfUint32; // Skip magic\n\n  var version = view.getUint32(byteOffset, true);\n  if (version !== 1) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      "Only Point Cloud tile version 1 is supported.  Version " +\n        version +\n        " is not."\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  // Skip byteLength\n  byteOffset += sizeOfUint32;\n\n  var featureTableJsonByteLength = view.getUint32(byteOffset, true);\n  if (featureTableJsonByteLength === 0) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      "Feature table must have a byte length greater than zero"\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  var featureTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var batchTableJsonByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n  var batchTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var featureTableJson = (0,_Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(\n    uint8Array,\n    byteOffset,\n    featureTableJsonByteLength\n  );\n  byteOffset += featureTableJsonByteLength;\n\n  var featureTableBinary = new Uint8Array(\n    arrayBuffer,\n    byteOffset,\n    featureTableBinaryByteLength\n  );\n  byteOffset += featureTableBinaryByteLength;\n\n  // Get the batch table JSON and binary\n  var batchTableJson;\n  var batchTableBinary;\n  if (batchTableJsonByteLength > 0) {\n    // Has a batch table JSON\n    batchTableJson = (0,_Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(\n      uint8Array,\n      byteOffset,\n      batchTableJsonByteLength\n    );\n    byteOffset += batchTableJsonByteLength;\n\n    if (batchTableBinaryByteLength > 0) {\n      // Has a batch table binary\n      batchTableBinary = new Uint8Array(\n        arrayBuffer,\n        byteOffset,\n        batchTableBinaryByteLength\n      );\n      byteOffset += batchTableBinaryByteLength;\n    }\n  }\n\n  var featureTable = new _Cesium3DTileFeatureTable_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z(\n    featureTableJson,\n    featureTableBinary\n  );\n\n  var pointsLength = featureTable.getGlobalProperty("POINTS_LENGTH");\n  featureTable.featuresLength = pointsLength;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(pointsLength)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      "Feature table global property: POINTS_LENGTH must be defined"\n    );\n  }\n\n  var rtcCenter = featureTable.getGlobalProperty(\n    "RTC_CENTER",\n    _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n    3\n  );\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(rtcCenter)) {\n    pointCloud._rtcCenter = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].unpack */ .Z.unpack(rtcCenter);\n  }\n\n  var positions;\n  var colors;\n  var normals;\n  var batchIds;\n\n  var hasPositions = false;\n  var hasColors = false;\n  var hasNormals = false;\n  var hasBatchIds = false;\n\n  var isQuantized = false;\n  var isTranslucent = false;\n  var isRGB565 = false;\n  var isOctEncoded16P = false;\n\n  var dracoBuffer;\n  var dracoFeatureTableProperties;\n  var dracoBatchTableProperties;\n\n  var featureTableDraco = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.extensions)\n    ? featureTableJson.extensions["3DTILES_draco_point_compression"]\n    : undefined;\n  var batchTableDraco =\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(batchTableJson) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(batchTableJson.extensions)\n      ? batchTableJson.extensions["3DTILES_draco_point_compression"]\n      : undefined;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(batchTableDraco)) {\n    dracoBatchTableProperties = batchTableDraco.properties;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableDraco)) {\n    dracoFeatureTableProperties = featureTableDraco.properties;\n    var dracoByteOffset = featureTableDraco.byteOffset;\n    var dracoByteLength = featureTableDraco.byteLength;\n    if (\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoFeatureTableProperties) ||\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoByteOffset) ||\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoByteLength)\n    ) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n        "Draco properties, byteOffset, and byteLength must be defined"\n      );\n    }\n    dracoBuffer = (0,_Core_arraySlice_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n      featureTableBinary,\n      dracoByteOffset,\n      dracoByteOffset + dracoByteLength\n    );\n    hasPositions = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoFeatureTableProperties.POSITION);\n    hasColors =\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoFeatureTableProperties.RGB) ||\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoFeatureTableProperties.RGBA);\n    hasNormals = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoFeatureTableProperties.NORMAL);\n    hasBatchIds = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoFeatureTableProperties.BATCH_ID);\n    isTranslucent = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoFeatureTableProperties.RGBA);\n    pointCloud._decodingState = DecodingState.NEEDS_DECODE;\n  }\n\n  var draco;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(dracoBuffer)) {\n    draco = {\n      buffer: dracoBuffer,\n      featureTableProperties: dracoFeatureTableProperties,\n      batchTableProperties: dracoBatchTableProperties,\n      properties: (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(\n        dracoFeatureTableProperties,\n        dracoBatchTableProperties\n      ),\n      dequantizeInShader: pointCloud._dequantizeInShader,\n    };\n  }\n\n  if (!hasPositions) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.POSITION)) {\n      positions = featureTable.getPropertyArray(\n        "POSITION",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        3\n      );\n      hasPositions = true;\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.POSITION_QUANTIZED)) {\n      positions = featureTable.getPropertyArray(\n        "POSITION_QUANTIZED",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        3\n      );\n      isQuantized = true;\n      hasPositions = true;\n\n      var quantizedVolumeScale = featureTable.getGlobalProperty(\n        "QUANTIZED_VOLUME_SCALE",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        3\n      );\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(quantizedVolumeScale)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n          "Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions."\n        );\n      }\n      pointCloud._quantizedVolumeScale = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].unpack */ .Z.unpack(\n        quantizedVolumeScale\n      );\n      pointCloud._quantizedRange = (1 << 16) - 1;\n\n      var quantizedVolumeOffset = featureTable.getGlobalProperty(\n        "QUANTIZED_VOLUME_OFFSET",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        3\n      );\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(quantizedVolumeOffset)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n          "Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions."\n        );\n      }\n      pointCloud._quantizedVolumeOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].unpack */ .Z.unpack(\n        quantizedVolumeOffset\n      );\n    }\n  }\n\n  if (!hasColors) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.RGBA)) {\n      colors = featureTable.getPropertyArray(\n        "RGBA",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n        4\n      );\n      isTranslucent = true;\n      hasColors = true;\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.RGB)) {\n      colors = featureTable.getPropertyArray(\n        "RGB",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n        3\n      );\n      hasColors = true;\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.RGB565)) {\n      colors = featureTable.getPropertyArray(\n        "RGB565",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        1\n      );\n      isRGB565 = true;\n      hasColors = true;\n    }\n  }\n\n  if (!hasNormals) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.NORMAL)) {\n      normals = featureTable.getPropertyArray(\n        "NORMAL",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        3\n      );\n      hasNormals = true;\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.NORMAL_OCT16P)) {\n      normals = featureTable.getPropertyArray(\n        "NORMAL_OCT16P",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n        2\n      );\n      isOctEncoded16P = true;\n      hasNormals = true;\n    }\n  }\n\n  if (!hasBatchIds) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.BATCH_ID)) {\n      batchIds = featureTable.getPropertyArray(\n        "BATCH_ID",\n        _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        1\n      );\n      hasBatchIds = true;\n    }\n  }\n\n  if (!hasPositions) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      "Either POSITION or POSITION_QUANTIZED must be defined."\n    );\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(featureTableJson.CONSTANT_RGBA)) {\n    var constantRGBA = featureTable.getGlobalProperty(\n      "CONSTANT_RGBA",\n      _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n      4\n    );\n    pointCloud._constantColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fromBytes */ .Z.fromBytes(\n      constantRGBA[0],\n      constantRGBA[1],\n      constantRGBA[2],\n      constantRGBA[3],\n      pointCloud._constantColor\n    );\n  }\n\n  if (hasBatchIds) {\n    var batchLength = featureTable.getGlobalProperty("BATCH_LENGTH");\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(batchLength)) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n        "Global property: BATCH_LENGTH must be defined when BATCH_ID is defined."\n      );\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(batchTableBinary)) {\n      // Copy the batchTableBinary section and let the underlying ArrayBuffer be freed\n      batchTableBinary = new Uint8Array(batchTableBinary);\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(pointCloud._batchTableLoaded)) {\n      pointCloud._batchTableLoaded(\n        batchLength,\n        batchTableJson,\n        batchTableBinary\n      );\n    }\n  }\n\n  // If points are not batched and there are per-point properties, use these properties for styling purposes\n  var styleableProperties;\n  if (!hasBatchIds && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(batchTableBinary)) {\n    styleableProperties = _Cesium3DTileBatchTable_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].getBinaryProperties */ .Z.getBinaryProperties(\n      pointsLength,\n      batchTableJson,\n      batchTableBinary\n    );\n  }\n\n  pointCloud._parsedContent = {\n    positions: positions,\n    colors: colors,\n    normals: normals,\n    batchIds: batchIds,\n    styleableProperties: styleableProperties,\n    draco: draco,\n  };\n  pointCloud._pointsLength = pointsLength;\n  pointCloud._isQuantized = isQuantized;\n  pointCloud._isOctEncoded16P = isOctEncoded16P;\n  pointCloud._isRGB565 = isRGB565;\n  pointCloud._isTranslucent = isTranslucent;\n  pointCloud._hasColors = hasColors;\n  pointCloud._hasNormals = hasNormals;\n  pointCloud._hasBatchIds = hasBatchIds;\n}\n\nvar scratchMin = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchMax = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchPosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar randomValues;\n\nfunction getRandomValues(samplesLength) {\n  // Use same random values across all runs\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(randomValues)) {\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].setRandomNumberSeed */ .Z.setRandomNumberSeed(0);\n    randomValues = new Array(samplesLength);\n    for (var i = 0; i < samplesLength; ++i) {\n      randomValues[i] = _Core_Math_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].nextRandomNumber */ .Z.nextRandomNumber();\n    }\n  }\n  return randomValues;\n}\n\nfunction computeApproximateBoundingSphereFromPositions(positions) {\n  var maximumSamplesLength = 20;\n  var pointsLength = positions.length / 3;\n  var samplesLength = Math.min(pointsLength, maximumSamplesLength);\n  var randomValues = getRandomValues(maximumSamplesLength);\n  var maxValue = Number.MAX_VALUE;\n  var minValue = -Number.MAX_VALUE;\n  var min = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromElements */ .Z.fromElements(maxValue, maxValue, maxValue, scratchMin);\n  var max = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromElements */ .Z.fromElements(minValue, minValue, minValue, scratchMax);\n  for (var i = 0; i < samplesLength; ++i) {\n    var index = Math.floor(randomValues[i] * pointsLength);\n    var position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].unpack */ .Z.unpack(positions, index * 3, scratchPosition);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].minimumByComponent */ .Z.minimumByComponent(min, position, min);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].maximumByComponent */ .Z.maximumByComponent(max, position, max);\n  }\n\n  var boundingSphere = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromCornerPoints */ .Z.fromCornerPoints(min, max);\n  boundingSphere.radius += _Core_Math_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].EPSILON2 */ .Z.EPSILON2; // To avoid radius of zero\n  return boundingSphere;\n}\n\nfunction prepareVertexAttribute(typedArray, name) {\n  // WebGL does not support UNSIGNED_INT, INT, or DOUBLE vertex attributes. Convert these to FLOAT.\n  var componentDatatype = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromTypedArray */ .Z.fromTypedArray(typedArray);\n  if (\n    componentDatatype === _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].INT */ .Z.INT ||\n    componentDatatype === _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_INT */ .Z.UNSIGNED_INT ||\n    componentDatatype === _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].DOUBLE */ .Z.DOUBLE\n  ) {\n    (0,_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(\n      "Cast pnts property to floats",\n      \'Point cloud property "\' +\n        name +\n        \'" will be casted to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.\'\n    );\n    return new Float32Array(typedArray);\n  }\n  return typedArray;\n}\n\nvar scratchPointSizeAndTimeAndGeometricErrorAndDepthMultiplier = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchQuantizedVolumeScaleAndOctEncodedRange = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchColor = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n\nvar positionLocation = 0;\nvar colorLocation = 1;\nvar normalLocation = 2;\nvar batchIdLocation = 3;\nvar numberOfAttributes = 4;\n\nvar scratchClippingPlanesMatrix = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\nvar scratchInverseTransposeClippingPlanesMatrix = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\n\nfunction createResources(pointCloud, frameState) {\n  var context = frameState.context;\n  var parsedContent = pointCloud._parsedContent;\n  var pointsLength = pointCloud._pointsLength;\n  var positions = parsedContent.positions;\n  var colors = parsedContent.colors;\n  var normals = parsedContent.normals;\n  var batchIds = parsedContent.batchIds;\n  var styleableProperties = parsedContent.styleableProperties;\n  var hasStyleableProperties = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(styleableProperties);\n  var isQuantized = pointCloud._isQuantized;\n  var isQuantizedDraco = pointCloud._isQuantizedDraco;\n  var isOctEncoded16P = pointCloud._isOctEncoded16P;\n  var isOctEncodedDraco = pointCloud._isOctEncodedDraco;\n  var quantizedRange = pointCloud._quantizedRange;\n  var octEncodedRange = pointCloud._octEncodedRange;\n  var isRGB565 = pointCloud._isRGB565;\n  var isTranslucent = pointCloud._isTranslucent;\n  var hasColors = pointCloud._hasColors;\n  var hasNormals = pointCloud._hasNormals;\n  var hasBatchIds = pointCloud._hasBatchIds;\n\n  var componentsPerAttribute;\n  var componentDatatype;\n\n  var styleableVertexAttributes = [];\n  var styleableShaderAttributes = {};\n  pointCloud._styleableShaderAttributes = styleableShaderAttributes;\n\n  if (hasStyleableProperties) {\n    var attributeLocation = numberOfAttributes;\n\n    for (var name in styleableProperties) {\n      if (styleableProperties.hasOwnProperty(name)) {\n        var property = styleableProperties[name];\n        var typedArray = prepareVertexAttribute(property.typedArray, name);\n        componentsPerAttribute = property.componentCount;\n        componentDatatype = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromTypedArray */ .Z.fromTypedArray(typedArray);\n\n        var vertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n          context: context,\n          typedArray: typedArray,\n          usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n        });\n\n        pointCloud._geometryByteLength += vertexBuffer.sizeInBytes;\n\n        var vertexAttribute = {\n          index: attributeLocation,\n          vertexBuffer: vertexBuffer,\n          componentsPerAttribute: componentsPerAttribute,\n          componentDatatype: componentDatatype,\n          normalize: false,\n          offsetInBytes: 0,\n          strideInBytes: 0,\n        };\n\n        styleableVertexAttributes.push(vertexAttribute);\n        styleableShaderAttributes[name] = {\n          location: attributeLocation,\n          componentCount: componentsPerAttribute,\n        };\n        ++attributeLocation;\n      }\n    }\n  }\n\n  var positionsVertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n    context: context,\n    typedArray: positions,\n    usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n  });\n  pointCloud._geometryByteLength += positionsVertexBuffer.sizeInBytes;\n\n  var colorsVertexBuffer;\n  if (hasColors) {\n    colorsVertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n      context: context,\n      typedArray: colors,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    });\n    pointCloud._geometryByteLength += colorsVertexBuffer.sizeInBytes;\n  }\n\n  var normalsVertexBuffer;\n  if (hasNormals) {\n    normalsVertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n      context: context,\n      typedArray: normals,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    });\n    pointCloud._geometryByteLength += normalsVertexBuffer.sizeInBytes;\n  }\n\n  var batchIdsVertexBuffer;\n  if (hasBatchIds) {\n    batchIds = prepareVertexAttribute(batchIds, "batchIds");\n    batchIdsVertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n      context: context,\n      typedArray: batchIds,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    });\n    pointCloud._geometryByteLength += batchIdsVertexBuffer.sizeInBytes;\n  }\n\n  var attributes = [];\n\n  if (isQuantized) {\n    componentDatatype = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT;\n  } else if (isQuantizedDraco) {\n    componentDatatype =\n      quantizedRange <= 255\n        ? _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE\n        : _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT;\n  } else {\n    componentDatatype = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT;\n  }\n\n  attributes.push({\n    index: positionLocation,\n    vertexBuffer: positionsVertexBuffer,\n    componentsPerAttribute: 3,\n    componentDatatype: componentDatatype,\n    normalize: false,\n    offsetInBytes: 0,\n    strideInBytes: 0,\n  });\n\n  if (pointCloud._cull) {\n    if (isQuantized || isQuantizedDraco) {\n      pointCloud._boundingSphere = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromCornerPoints */ .Z.fromCornerPoints(\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO,\n        pointCloud._quantizedVolumeScale\n      );\n    } else {\n      pointCloud._boundingSphere = computeApproximateBoundingSphereFromPositions(\n        positions\n      );\n    }\n  }\n\n  if (hasColors) {\n    if (isRGB565) {\n      attributes.push({\n        index: colorLocation,\n        vertexBuffer: colorsVertexBuffer,\n        componentsPerAttribute: 1,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        normalize: false,\n        offsetInBytes: 0,\n        strideInBytes: 0,\n      });\n    } else {\n      var colorComponentsPerAttribute = isTranslucent ? 4 : 3;\n      attributes.push({\n        index: colorLocation,\n        vertexBuffer: colorsVertexBuffer,\n        componentsPerAttribute: colorComponentsPerAttribute,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n        normalize: true,\n        offsetInBytes: 0,\n        strideInBytes: 0,\n      });\n    }\n  }\n\n  if (hasNormals) {\n    if (isOctEncoded16P) {\n      componentsPerAttribute = 2;\n      componentDatatype = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE;\n    } else if (isOctEncodedDraco) {\n      componentsPerAttribute = 2;\n      componentDatatype =\n        octEncodedRange <= 255\n          ? _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE\n          : _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT;\n    } else {\n      componentsPerAttribute = 3;\n      componentDatatype = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT;\n    }\n    attributes.push({\n      index: normalLocation,\n      vertexBuffer: normalsVertexBuffer,\n      componentsPerAttribute: componentsPerAttribute,\n      componentDatatype: componentDatatype,\n      normalize: false,\n      offsetInBytes: 0,\n      strideInBytes: 0,\n    });\n  }\n\n  if (hasBatchIds) {\n    attributes.push({\n      index: batchIdLocation,\n      vertexBuffer: batchIdsVertexBuffer,\n      componentsPerAttribute: 1,\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromTypedArray */ .Z.fromTypedArray(batchIds),\n      normalize: false,\n      offsetInBytes: 0,\n      strideInBytes: 0,\n    });\n  }\n\n  if (hasStyleableProperties) {\n    attributes = attributes.concat(styleableVertexAttributes);\n  }\n\n  var vertexArray = new _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z({\n    context: context,\n    attributes: attributes,\n  });\n\n  var opaqueRenderState = {\n    depthTest: {\n      enabled: true,\n    },\n  };\n\n  var translucentRenderState = {\n    depthTest: {\n      enabled: true,\n    },\n    depthMask: false,\n    blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n  };\n\n  if (pointCloud._opaquePass === _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE) {\n    opaqueRenderState.stencilTest = _StencilConstants_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"].setCesium3DTileBit */ .Z.setCesium3DTileBit();\n    opaqueRenderState.stencilMask = _StencilConstants_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK;\n    translucentRenderState.stencilTest = _StencilConstants_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"].setCesium3DTileBit */ .Z.setCesium3DTileBit();\n    translucentRenderState.stencilMask = _StencilConstants_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK;\n  }\n\n  pointCloud._opaqueRenderState = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].fromCache */ .Z.fromCache(opaqueRenderState);\n  pointCloud._translucentRenderState = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].fromCache */ .Z.fromCache(\n    translucentRenderState\n  );\n\n  pointCloud._drawCommand = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z({\n    boundingVolume: new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(),\n    cull: pointCloud._cull,\n    modelMatrix: new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z(),\n    primitiveType: _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].POINTS */ .Z.POINTS,\n    vertexArray: vertexArray,\n    count: pointsLength,\n    shaderProgram: undefined, // Updated in createShaders\n    uniformMap: undefined, // Updated in createShaders\n    renderState: isTranslucent\n      ? pointCloud._translucentRenderState\n      : pointCloud._opaqueRenderState,\n    pass: isTranslucent ? _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT : pointCloud._opaquePass,\n    owner: pointCloud,\n    castShadows: false,\n    receiveShadows: false,\n    pickId: pointCloud._pickIdLoaded(),\n  });\n}\n\nfunction createUniformMap(pointCloud, frameState) {\n  var context = frameState.context;\n  var isQuantized = pointCloud._isQuantized;\n  var isQuantizedDraco = pointCloud._isQuantizedDraco;\n  var isOctEncodedDraco = pointCloud._isOctEncodedDraco;\n\n  var uniformMap = {\n    u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier: function () {\n      var scratch = scratchPointSizeAndTimeAndGeometricErrorAndDepthMultiplier;\n      scratch.x = pointCloud._attenuation\n        ? pointCloud.maximumAttenuation\n        : pointCloud._pointSize;\n      scratch.x *= frameState.pixelRatio;\n\n      scratch.y = pointCloud.time;\n\n      if (pointCloud._attenuation) {\n        var frustum = frameState.camera.frustum;\n        var depthMultiplier;\n        // Attenuation is maximumAttenuation in 2D/ortho\n        if (\n          frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D ||\n          frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z\n        ) {\n          depthMultiplier = Number.POSITIVE_INFINITY;\n        } else {\n          depthMultiplier =\n            context.drawingBufferHeight /\n            frameState.camera.frustum.sseDenominator;\n        }\n\n        scratch.z = pointCloud.geometricError * pointCloud.geometricErrorScale;\n        scratch.w = depthMultiplier;\n      }\n\n      return scratch;\n    },\n    u_highlightColor: function () {\n      return pointCloud._highlightColor;\n    },\n    u_constantColor: function () {\n      return pointCloud._constantColor;\n    },\n    u_clippingPlanes: function () {\n      var clippingPlanes = pointCloud.clippingPlanes;\n      var isClipped = pointCloud.isClipped;\n      return isClipped ? clippingPlanes.texture : context.defaultTexture;\n    },\n    u_clippingPlanesEdgeStyle: function () {\n      var clippingPlanes = pointCloud.clippingPlanes;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(clippingPlanes)) {\n        return _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TRANSPARENT */ .Z.TRANSPARENT;\n      }\n\n      var style = _Core_Color_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(clippingPlanes.edgeColor, scratchColor);\n      style.alpha = clippingPlanes.edgeWidth;\n      return style;\n    },\n    u_clippingPlanesMatrix: function () {\n      var clippingPlanes = pointCloud.clippingPlanes;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(clippingPlanes)) {\n        return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].IDENTITY */ .Z.IDENTITY;\n      }\n\n      var clippingPlanesOriginMatrix = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n        pointCloud.clippingPlanesOriginMatrix,\n        pointCloud._modelMatrix\n      );\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].multiply */ .Z.multiply(\n        context.uniformState.view3D,\n        clippingPlanesOriginMatrix,\n        scratchClippingPlanesMatrix\n      );\n      var transform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].multiply */ .Z.multiply(\n        scratchClippingPlanesMatrix,\n        clippingPlanes.modelMatrix,\n        scratchClippingPlanesMatrix\n      );\n\n      return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].inverseTranspose */ .Z.inverseTranspose(\n        transform,\n        scratchInverseTransposeClippingPlanesMatrix\n      );\n    },\n  };\n\n  if (isQuantized || isQuantizedDraco || isOctEncodedDraco) {\n    uniformMap = (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(uniformMap, {\n      u_quantizedVolumeScaleAndOctEncodedRange: function () {\n        var scratch = scratchQuantizedVolumeScaleAndOctEncodedRange;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(pointCloud._quantizedVolumeScale)) {\n          var scale = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n            pointCloud._quantizedVolumeScale,\n            scratch\n          );\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].divideByScalar */ .Z.divideByScalar(scale, pointCloud._quantizedRange, scratch);\n        }\n        scratch.w = pointCloud._octEncodedRange;\n        return scratch;\n      },\n    });\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(pointCloud._uniformMapLoaded)) {\n    uniformMap = pointCloud._uniformMapLoaded(uniformMap);\n  }\n\n  pointCloud._drawCommand.uniformMap = uniformMap;\n}\n\nfunction getStyleablePropertyIds(source, propertyIds) {\n  // Get all the property IDs used by this style\n  var regex = /czm_3dtiles_property_(\\d+)/g;\n  var matches = regex.exec(source);\n  while (matches !== null) {\n    var id = parseInt(matches[1]);\n    if (propertyIds.indexOf(id) === -1) {\n      propertyIds.push(id);\n    }\n    matches = regex.exec(source);\n  }\n}\n\nfunction getBuiltinPropertyNames(source, propertyNames) {\n  // Get all the builtin property names used by this style, ignoring the function signature\n  source = source.slice(source.indexOf("\\n"));\n  var regex = /czm_3dtiles_builtin_property_(\\w+)/g;\n  var matches = regex.exec(source);\n  while (matches !== null) {\n    var name = matches[1];\n    if (propertyNames.indexOf(name) === -1) {\n      propertyNames.push(name);\n    }\n    matches = regex.exec(source);\n  }\n}\n\nfunction getVertexAttribute(vertexArray, index) {\n  var numberOfAttributes = vertexArray.numberOfAttributes;\n  for (var i = 0; i < numberOfAttributes; ++i) {\n    var attribute = vertexArray.getAttribute(i);\n    if (attribute.index === index) {\n      return attribute;\n    }\n  }\n}\n\nvar builtinVariableSubstitutionMap = {\n  POSITION: "czm_3dtiles_builtin_property_POSITION",\n  POSITION_ABSOLUTE: "czm_3dtiles_builtin_property_POSITION_ABSOLUTE",\n  COLOR: "czm_3dtiles_builtin_property_COLOR",\n  NORMAL: "czm_3dtiles_builtin_property_NORMAL",\n};\n\nfunction createShaders(pointCloud, frameState, style) {\n  var i;\n  var name;\n  var attribute;\n\n  var context = frameState.context;\n  var hasStyle = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(style);\n  var isQuantized = pointCloud._isQuantized;\n  var isQuantizedDraco = pointCloud._isQuantizedDraco;\n  var isOctEncoded16P = pointCloud._isOctEncoded16P;\n  var isOctEncodedDraco = pointCloud._isOctEncodedDraco;\n  var isRGB565 = pointCloud._isRGB565;\n  var isTranslucent = pointCloud._isTranslucent;\n  var hasColors = pointCloud._hasColors;\n  var hasNormals = pointCloud._hasNormals;\n  var hasBatchIds = pointCloud._hasBatchIds;\n  var backFaceCulling = pointCloud._backFaceCulling;\n  var normalShading = pointCloud._normalShading;\n  var vertexArray = pointCloud._drawCommand.vertexArray;\n  var clippingPlanes = pointCloud.clippingPlanes;\n  var attenuation = pointCloud._attenuation;\n\n  var colorStyleFunction;\n  var showStyleFunction;\n  var pointSizeStyleFunction;\n  var styleTranslucent = isTranslucent;\n\n  var variableSubstitutionMap = (0,_Core_clone_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(builtinVariableSubstitutionMap);\n  var propertyIdToAttributeMap = {};\n  var styleableShaderAttributes = pointCloud._styleableShaderAttributes;\n  for (name in styleableShaderAttributes) {\n    if (styleableShaderAttributes.hasOwnProperty(name)) {\n      attribute = styleableShaderAttributes[name];\n      variableSubstitutionMap[name] =\n        "czm_3dtiles_property_" + attribute.location;\n      propertyIdToAttributeMap[attribute.location] = attribute;\n    }\n  }\n\n  if (hasStyle) {\n    var shaderState = {\n      translucent: false,\n    };\n    var parameterList =\n      "(" +\n      "vec3 czm_3dtiles_builtin_property_POSITION, " +\n      "vec3 czm_3dtiles_builtin_property_POSITION_ABSOLUTE, " +\n      "vec4 czm_3dtiles_builtin_property_COLOR, " +\n      "vec3 czm_3dtiles_builtin_property_NORMAL" +\n      ")";\n    colorStyleFunction = style.getColorShaderFunction(\n      "getColorFromStyle" + parameterList,\n      variableSubstitutionMap,\n      shaderState\n    );\n    showStyleFunction = style.getShowShaderFunction(\n      "getShowFromStyle" + parameterList,\n      variableSubstitutionMap,\n      shaderState\n    );\n    pointSizeStyleFunction = style.getPointSizeShaderFunction(\n      "getPointSizeFromStyle" + parameterList,\n      variableSubstitutionMap,\n      shaderState\n    );\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(colorStyleFunction) && shaderState.translucent) {\n      styleTranslucent = true;\n    }\n  }\n\n  pointCloud._styleTranslucent = styleTranslucent;\n\n  var hasColorStyle = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(colorStyleFunction);\n  var hasShowStyle = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(showStyleFunction);\n  var hasPointSizeStyle = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(pointSizeStyleFunction);\n  var hasClippedContent = pointCloud.isClipped;\n\n  // Get the properties in use by the style\n  var styleablePropertyIds = [];\n  var builtinPropertyNames = [];\n\n  if (hasColorStyle) {\n    getStyleablePropertyIds(colorStyleFunction, styleablePropertyIds);\n    getBuiltinPropertyNames(colorStyleFunction, builtinPropertyNames);\n  }\n  if (hasShowStyle) {\n    getStyleablePropertyIds(showStyleFunction, styleablePropertyIds);\n    getBuiltinPropertyNames(showStyleFunction, builtinPropertyNames);\n  }\n  if (hasPointSizeStyle) {\n    getStyleablePropertyIds(pointSizeStyleFunction, styleablePropertyIds);\n    getBuiltinPropertyNames(pointSizeStyleFunction, builtinPropertyNames);\n  }\n\n  var usesColorSemantic = builtinPropertyNames.indexOf("COLOR") >= 0;\n  var usesNormalSemantic = builtinPropertyNames.indexOf("NORMAL") >= 0;\n\n  if (usesNormalSemantic && !hasNormals) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      "Style references the NORMAL semantic but the point cloud does not have normals"\n    );\n  }\n\n  // Disable vertex attributes that aren\'t used in the style, enable attributes that are\n  for (name in styleableShaderAttributes) {\n    if (styleableShaderAttributes.hasOwnProperty(name)) {\n      attribute = styleableShaderAttributes[name];\n      var enabled = styleablePropertyIds.indexOf(attribute.location) >= 0;\n      var vertexAttribute = getVertexAttribute(vertexArray, attribute.location);\n      vertexAttribute.enabled = enabled;\n    }\n  }\n\n  var usesColors = hasColors && (!hasColorStyle || usesColorSemantic);\n  if (hasColors) {\n    // Disable the color vertex attribute if the color style does not reference the color semantic\n    var colorVertexAttribute = getVertexAttribute(vertexArray, colorLocation);\n    colorVertexAttribute.enabled = usesColors;\n  }\n\n  var usesNormals =\n    hasNormals && (normalShading || backFaceCulling || usesNormalSemantic);\n  if (hasNormals) {\n    // Disable the normal vertex attribute if normals are not used\n    var normalVertexAttribute = getVertexAttribute(vertexArray, normalLocation);\n    normalVertexAttribute.enabled = usesNormals;\n  }\n\n  var attributeLocations = {\n    a_position: positionLocation,\n  };\n  if (usesColors) {\n    attributeLocations.a_color = colorLocation;\n  }\n  if (usesNormals) {\n    attributeLocations.a_normal = normalLocation;\n  }\n  if (hasBatchIds) {\n    attributeLocations.a_batchId = batchIdLocation;\n  }\n\n  var attributeDeclarations = "";\n\n  var length = styleablePropertyIds.length;\n  for (i = 0; i < length; ++i) {\n    var propertyId = styleablePropertyIds[i];\n    attribute = propertyIdToAttributeMap[propertyId];\n    var componentCount = attribute.componentCount;\n    var attributeName = "czm_3dtiles_property_" + propertyId;\n    var attributeType;\n    if (componentCount === 1) {\n      attributeType = "float";\n    } else {\n      attributeType = "vec" + componentCount;\n    }\n\n    attributeDeclarations +=\n      "attribute " + attributeType + " " + attributeName + "; \\n";\n    attributeLocations[attributeName] = attribute.location;\n  }\n\n  createUniformMap(pointCloud, frameState);\n\n  var vs =\n    "attribute vec3 a_position; \\n" +\n    "varying vec4 v_color; \\n" +\n    "uniform vec4 u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier; \\n" +\n    "uniform vec4 u_constantColor; \\n" +\n    "uniform vec4 u_highlightColor; \\n";\n  vs += "float u_pointSize; \\n" + "float u_time; \\n";\n\n  if (attenuation) {\n    vs += "float u_geometricError; \\n" + "float u_depthMultiplier; \\n";\n  }\n\n  vs += attributeDeclarations;\n\n  if (usesColors) {\n    if (isTranslucent) {\n      vs += "attribute vec4 a_color; \\n";\n    } else if (isRGB565) {\n      vs +=\n        "attribute float a_color; \\n" +\n        "const float SHIFT_RIGHT_11 = 1.0 / 2048.0; \\n" +\n        "const float SHIFT_RIGHT_5 = 1.0 / 32.0; \\n" +\n        "const float SHIFT_LEFT_11 = 2048.0; \\n" +\n        "const float SHIFT_LEFT_5 = 32.0; \\n" +\n        "const float NORMALIZE_6 = 1.0 / 64.0; \\n" +\n        "const float NORMALIZE_5 = 1.0 / 32.0; \\n";\n    } else {\n      vs += "attribute vec3 a_color; \\n";\n    }\n  }\n  if (usesNormals) {\n    if (isOctEncoded16P || isOctEncodedDraco) {\n      vs += "attribute vec2 a_normal; \\n";\n    } else {\n      vs += "attribute vec3 a_normal; \\n";\n    }\n  }\n\n  if (hasBatchIds) {\n    vs += "attribute float a_batchId; \\n";\n  }\n\n  if (isQuantized || isQuantizedDraco || isOctEncodedDraco) {\n    vs += "uniform vec4 u_quantizedVolumeScaleAndOctEncodedRange; \\n";\n  }\n\n  if (hasColorStyle) {\n    vs += colorStyleFunction;\n  }\n\n  if (hasShowStyle) {\n    vs += showStyleFunction;\n  }\n\n  if (hasPointSizeStyle) {\n    vs += pointSizeStyleFunction;\n  }\n\n  vs +=\n    "void main() \\n" +\n    "{ \\n" +\n    "    u_pointSize = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.x; \\n" +\n    "    u_time = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.y; \\n";\n\n  if (attenuation) {\n    vs +=\n      "    u_geometricError = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.z; \\n" +\n      "    u_depthMultiplier = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.w; \\n";\n  }\n\n  if (usesColors) {\n    if (isTranslucent) {\n      vs += "    vec4 color = a_color; \\n";\n    } else if (isRGB565) {\n      vs +=\n        "    float compressed = a_color; \\n" +\n        "    float r = floor(compressed * SHIFT_RIGHT_11); \\n" +\n        "    compressed -= r * SHIFT_LEFT_11; \\n" +\n        "    float g = floor(compressed * SHIFT_RIGHT_5); \\n" +\n        "    compressed -= g * SHIFT_LEFT_5; \\n" +\n        "    float b = compressed; \\n" +\n        "    vec3 rgb = vec3(r * NORMALIZE_5, g * NORMALIZE_6, b * NORMALIZE_5); \\n" +\n        "    vec4 color = vec4(rgb, 1.0); \\n";\n    } else {\n      vs += "    vec4 color = vec4(a_color, 1.0); \\n";\n    }\n  } else {\n    vs += "    vec4 color = u_constantColor; \\n";\n  }\n\n  if (isQuantized || isQuantizedDraco) {\n    vs +=\n      "    vec3 position = a_position * u_quantizedVolumeScaleAndOctEncodedRange.xyz; \\n";\n  } else {\n    vs += "    vec3 position = a_position; \\n";\n  }\n  vs +=\n    "    vec3 position_absolute = vec3(czm_model * vec4(position, 1.0)); \\n";\n\n  if (usesNormals) {\n    if (isOctEncoded16P) {\n      vs += "    vec3 normal = czm_octDecode(a_normal); \\n";\n    } else if (isOctEncodedDraco) {\n      // Draco oct-encoding decodes to zxy order\n      vs +=\n        "    vec3 normal = czm_octDecode(a_normal, u_quantizedVolumeScaleAndOctEncodedRange.w).zxy; \\n";\n    } else {\n      vs += "    vec3 normal = a_normal; \\n";\n    }\n    vs += "    vec3 normalEC = czm_normal * normal; \\n";\n  } else {\n    vs += "    vec3 normal = vec3(1.0); \\n";\n  }\n\n  if (hasColorStyle) {\n    vs +=\n      "    color = getColorFromStyle(position, position_absolute, color, normal); \\n";\n  }\n\n  if (hasShowStyle) {\n    vs +=\n      "    float show = float(getShowFromStyle(position, position_absolute, color, normal)); \\n";\n  }\n\n  if (hasPointSizeStyle) {\n    vs +=\n      "    gl_PointSize = getPointSizeFromStyle(position, position_absolute, color, normal) * czm_pixelRatio; \\n";\n  } else if (attenuation) {\n    vs +=\n      "    vec4 positionEC = czm_modelView * vec4(position, 1.0); \\n" +\n      "    float depth = -positionEC.z; \\n" +\n      // compute SSE for this point\n      "    gl_PointSize = min((u_geometricError / depth) * u_depthMultiplier, u_pointSize); \\n";\n  } else {\n    vs += "    gl_PointSize = u_pointSize; \\n";\n  }\n\n  vs += "    color = color * u_highlightColor; \\n";\n\n  if (usesNormals && normalShading) {\n    vs +=\n      "    float diffuseStrength = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC); \\n" +\n      "    diffuseStrength = max(diffuseStrength, 0.4); \\n" + // Apply some ambient lighting\n      "    color.xyz *= diffuseStrength * czm_lightColor; \\n";\n  }\n\n  vs +=\n    "    v_color = color; \\n" +\n    "    gl_Position = czm_modelViewProjection * vec4(position, 1.0); \\n";\n\n  if (usesNormals && backFaceCulling) {\n    vs +=\n      "    float visible = step(-normalEC.z, 0.0); \\n" +\n      "    gl_Position *= visible; \\n" +\n      "    gl_PointSize *= visible; \\n";\n  }\n\n  if (hasShowStyle) {\n    vs +=\n      "    gl_Position.w *= float(show); \\n" +\n      "    gl_PointSize *= float(show); \\n";\n  }\n\n  vs += "} \\n";\n\n  var fs = "varying vec4 v_color; \\n";\n\n  if (hasClippedContent) {\n    fs +=\n      "uniform highp sampler2D u_clippingPlanes; \\n" +\n      "uniform mat4 u_clippingPlanesMatrix; \\n" +\n      "uniform vec4 u_clippingPlanesEdgeStyle; \\n";\n    fs += "\\n";\n    fs += (0,_getClippingFunction_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z)(clippingPlanes, context);\n    fs += "\\n";\n  }\n\n  fs +=\n    "void main() \\n" +\n    "{ \\n" +\n    "    gl_FragColor = czm_gammaCorrect(v_color); \\n";\n\n  if (hasClippedContent) {\n    fs += (0,_getClipAndStyleCode_js__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z)(\n      "u_clippingPlanes",\n      "u_clippingPlanesMatrix",\n      "u_clippingPlanesEdgeStyle"\n    );\n  }\n\n  fs += "} \\n";\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(pointCloud._vertexShaderLoaded)) {\n    vs = pointCloud._vertexShaderLoaded(vs);\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(pointCloud._fragmentShaderLoaded)) {\n    fs = pointCloud._fragmentShaderLoaded(fs);\n  }\n\n  var drawCommand = pointCloud._drawCommand;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(drawCommand.shaderProgram)) {\n    // Destroy the old shader\n    drawCommand.shaderProgram.destroy();\n  }\n  drawCommand.shaderProgram = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].fromCache */ .Z.fromCache({\n    context: context,\n    vertexShaderSource: vs,\n    fragmentShaderSource: fs,\n    attributeLocations: attributeLocations,\n  });\n\n  try {\n    // Check if the shader compiles correctly. If not there is likely a syntax error with the style.\n    drawCommand.shaderProgram._bind();\n  } catch (error) {\n    // Rephrase the error.\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      "Error generating style shader: this may be caused by a type mismatch, index out-of-bounds, or other syntax error."\n    );\n  }\n}\n\nfunction decodeDraco(pointCloud, context) {\n  if (pointCloud._decodingState === DecodingState.READY) {\n    return false;\n  }\n  if (pointCloud._decodingState === DecodingState.NEEDS_DECODE) {\n    var parsedContent = pointCloud._parsedContent;\n    var draco = parsedContent.draco;\n    var decodePromise = _DracoLoader_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"].decodePointCloud */ .Z.decodePointCloud(draco, context);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(decodePromise)) {\n      pointCloud._decodingState = DecodingState.DECODING;\n      decodePromise\n        .then(function (result) {\n          pointCloud._decodingState = DecodingState.READY;\n          var decodedPositions = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(result.POSITION)\n            ? result.POSITION.array\n            : undefined;\n          var decodedRgb = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(result.RGB) ? result.RGB.array : undefined;\n          var decodedRgba = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(result.RGBA)\n            ? result.RGBA.array\n            : undefined;\n          var decodedNormals = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(result.NORMAL)\n            ? result.NORMAL.array\n            : undefined;\n          var decodedBatchIds = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(result.BATCH_ID)\n            ? result.BATCH_ID.array\n            : undefined;\n          var isQuantizedDraco =\n            (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(decodedPositions) &&\n            (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(result.POSITION.data.quantization);\n          var isOctEncodedDraco =\n            (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(decodedNormals) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(result.NORMAL.data.quantization);\n          if (isQuantizedDraco) {\n            // Draco quantization range == quantized volume scale - size in meters of the quantized volume\n            // Internal quantized range is the range of values of the quantized data, e.g. 255 for 8-bit, 1023 for 10-bit, etc\n            var quantization = result.POSITION.data.quantization;\n            var range = quantization.range;\n            pointCloud._quantizedVolumeScale = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromElements */ .Z.fromElements(\n              range,\n              range,\n              range\n            );\n            pointCloud._quantizedVolumeOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].unpack */ .Z.unpack(\n              quantization.minValues\n            );\n            pointCloud._quantizedRange =\n              (1 << quantization.quantizationBits) - 1.0;\n            pointCloud._isQuantizedDraco = true;\n          }\n          if (isOctEncodedDraco) {\n            pointCloud._octEncodedRange =\n              (1 << result.NORMAL.data.quantization.quantizationBits) - 1.0;\n            pointCloud._isOctEncodedDraco = true;\n          }\n          var styleableProperties = parsedContent.styleableProperties;\n          var batchTableProperties = draco.batchTableProperties;\n          for (var name in batchTableProperties) {\n            if (batchTableProperties.hasOwnProperty(name)) {\n              var property = result[name];\n              if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(styleableProperties)) {\n                styleableProperties = {};\n              }\n              styleableProperties[name] = {\n                typedArray: property.array,\n                componentCount: property.data.componentsPerAttribute,\n              };\n            }\n          }\n          parsedContent.positions = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n            decodedPositions,\n            parsedContent.positions\n          );\n          parsedContent.colors = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n            (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(decodedRgba, decodedRgb),\n            parsedContent.colors\n          );\n          parsedContent.normals = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n            decodedNormals,\n            parsedContent.normals\n          );\n          parsedContent.batchIds = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n            decodedBatchIds,\n            parsedContent.batchIds\n          );\n          parsedContent.styleableProperties = styleableProperties;\n        })\n        .otherwise(function (error) {\n          pointCloud._decodingState = DecodingState.FAILED;\n          pointCloud._readyPromise.reject(error);\n        });\n    }\n  }\n  return true;\n}\n\nvar scratchComputedTranslation = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchScale = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nPointCloud.prototype.update = function (frameState) {\n  var context = frameState.context;\n  var decoding = decodeDraco(this, context);\n  if (decoding) {\n    return;\n  }\n\n  var shadersDirty = false;\n  var modelMatrixDirty = !_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].equals */ .Z.equals(this._modelMatrix, this.modelMatrix);\n\n  if (this._mode !== frameState.mode) {\n    this._mode = frameState.mode;\n    modelMatrixDirty = true;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(this._drawCommand)) {\n    createResources(this, frameState);\n    modelMatrixDirty = true;\n    shadersDirty = true;\n    this._ready = true;\n    this._readyPromise.resolve(this);\n    this._parsedContent = undefined; // Unload\n  }\n\n  if (modelMatrixDirty) {\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].clone */ .Z.clone(this.modelMatrix, this._modelMatrix);\n    var modelMatrix = this._drawCommand.modelMatrix;\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].clone */ .Z.clone(this._modelMatrix, modelMatrix);\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(this._rtcCenter)) {\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].multiplyByTranslation */ .Z.multiplyByTranslation(modelMatrix, this._rtcCenter, modelMatrix);\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(this._quantizedVolumeOffset)) {\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].multiplyByTranslation */ .Z.multiplyByTranslation(\n        modelMatrix,\n        this._quantizedVolumeOffset,\n        modelMatrix\n      );\n    }\n\n    if (frameState.mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n      var projection = frameState.mapProjection;\n      var translation = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].getColumn */ .Z.getColumn(\n        modelMatrix,\n        3,\n        scratchComputedTranslation\n      );\n      if (!_Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(translation, _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNIT_W */ .Z.UNIT_W)) {\n        _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].basisTo2D */ .Z.basisTo2D(projection, modelMatrix, modelMatrix);\n      }\n    }\n\n    var boundingSphere = this._drawCommand.boundingVolume;\n    _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(this._boundingSphere, boundingSphere);\n\n    if (this._cull) {\n      var center = boundingSphere.center;\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(modelMatrix, center, center);\n      var scale = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].getScale */ .Z.getScale(modelMatrix, scratchScale);\n      boundingSphere.radius *= _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].maximumComponent */ .Z.maximumComponent(scale);\n    }\n  }\n\n  if (this.clippingPlanesDirty) {\n    this.clippingPlanesDirty = false;\n    shadersDirty = true;\n  }\n\n  if (this._attenuation !== this.attenuation) {\n    this._attenuation = this.attenuation;\n    shadersDirty = true;\n  }\n\n  if (this.backFaceCulling !== this._backFaceCulling) {\n    this._backFaceCulling = this.backFaceCulling;\n    shadersDirty = true;\n  }\n\n  if (this.normalShading !== this._normalShading) {\n    this._normalShading = this.normalShading;\n    shadersDirty = true;\n  }\n\n  if (this._style !== this.style || this.styleDirty) {\n    this._style = this.style;\n    this.styleDirty = false;\n    shadersDirty = true;\n  }\n\n  if (shadersDirty) {\n    createShaders(this, frameState, this._style);\n  }\n\n  this._drawCommand.castShadows = _ShadowMode_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"].castShadows */ .Z.castShadows(this.shadows);\n  this._drawCommand.receiveShadows = _ShadowMode_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"].receiveShadows */ .Z.receiveShadows(this.shadows);\n\n  // Update the render state\n  var isTranslucent =\n    this._highlightColor.alpha < 1.0 ||\n    this._constantColor.alpha < 1.0 ||\n    this._styleTranslucent;\n  this._drawCommand.renderState = isTranslucent\n    ? this._translucentRenderState\n    : this._opaqueRenderState;\n  this._drawCommand.pass = isTranslucent ? _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT : this._opaquePass;\n\n  var commandList = frameState.commandList;\n\n  var passes = frameState.passes;\n  if (passes.render || passes.pick) {\n    commandList.push(this._drawCommand);\n  }\n};\n\nPointCloud.prototype.isDestroyed = function () {\n  return false;\n};\n\nPointCloud.prototype.destroy = function () {\n  var command = this._drawCommand;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z)(command)) {\n    command.vertexArray = command.vertexArray && command.vertexArray.destroy();\n    command.shaderProgram =\n      command.shaderProgram && command.shaderProgram.destroy();\n  }\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PointCloud);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q25DO0FBQ0EsUUFBUSxzRUFBTztBQUNmLE1BQU0sOEdBQTZCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNEJBQTRCLCtFQUFpQjtBQUM3QztBQUNBLHdCQUF3QixzRkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtGQUFpQixjQUFjLGtGQUFpQjtBQUMzRCxRQUFRLHlGQUFvQjtBQUM1QjtBQUNBOztBQUVBO0FBQ0EsSUFBSSxvRkFBb0I7O0FBRXhCO0FBQ0E7QUFDQSxNQUFNLGtHQUF1QjtBQUM3QixrQkFBa0Isb0ZBQWdCO0FBQ2xDLCtCQUErQixzR0FBMkI7QUFDMUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0Msd0ZBQXNCO0FBQ3hELHFDQUFxQyw4RkFBeUI7O0FBRTlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsMkZBQWdCOztBQUUzRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTSxzRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw0RUFBYTtBQUN0QjtBQUNBLHlEQUFlLFVBQVUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Qb2ludENsb3VkLmpzPzkxYTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFycmF5U2xpY2UgZnJvbSBcIi4uL0NvcmUvYXJyYXlTbGljZS5qc1wiO1xuaW1wb3J0IEJvdW5kaW5nU3BoZXJlIGZyb20gXCIuLi9Db3JlL0JvdW5kaW5nU3BoZXJlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuNCBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW40LmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBjbG9uZSBmcm9tIFwiLi4vQ29yZS9jbG9uZS5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgY29tYmluZSBmcm9tIFwiLi4vQ29yZS9jb21iaW5lLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgZ2V0SnNvbkZyb21UeXBlZEFycmF5IGZyb20gXCIuLi9Db3JlL2dldEpzb25Gcm9tVHlwZWRBcnJheS5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IG9uZVRpbWVXYXJuaW5nIGZyb20gXCIuLi9Db3JlL29uZVRpbWVXYXJuaW5nLmpzXCI7XG5pbXBvcnQgT3J0aG9ncmFwaGljRnJ1c3R1bSBmcm9tIFwiLi4vQ29yZS9PcnRob2dyYXBoaWNGcnVzdHVtLmpzXCI7XG5pbXBvcnQgUHJpbWl0aXZlVHlwZSBmcm9tIFwiLi4vQ29yZS9QcmltaXRpdmVUeXBlLmpzXCI7XG5pbXBvcnQgUnVudGltZUVycm9yIGZyb20gXCIuLi9Db3JlL1J1bnRpbWVFcnJvci5qc1wiO1xuaW1wb3J0IFRyYW5zZm9ybXMgZnJvbSBcIi4uL0NvcmUvVHJhbnNmb3Jtcy5qc1wiO1xuaW1wb3J0IEJ1ZmZlciBmcm9tIFwiLi4vUmVuZGVyZXIvQnVmZmVyLmpzXCI7XG5pbXBvcnQgQnVmZmVyVXNhZ2UgZnJvbSBcIi4uL1JlbmRlcmVyL0J1ZmZlclVzYWdlLmpzXCI7XG5pbXBvcnQgRHJhd0NvbW1hbmQgZnJvbSBcIi4uL1JlbmRlcmVyL0RyYXdDb21tYW5kLmpzXCI7XG5pbXBvcnQgUGFzcyBmcm9tIFwiLi4vUmVuZGVyZXIvUGFzcy5qc1wiO1xuaW1wb3J0IFJlbmRlclN0YXRlIGZyb20gXCIuLi9SZW5kZXJlci9SZW5kZXJTdGF0ZS5qc1wiO1xuaW1wb3J0IFNoYWRlclByb2dyYW0gZnJvbSBcIi4uL1JlbmRlcmVyL1NoYWRlclByb2dyYW0uanNcIjtcbmltcG9ydCBWZXJ0ZXhBcnJheSBmcm9tIFwiLi4vUmVuZGVyZXIvVmVydGV4QXJyYXkuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcbmltcG9ydCBCbGVuZGluZ1N0YXRlIGZyb20gXCIuL0JsZW5kaW5nU3RhdGUuanNcIjtcbmltcG9ydCBDZXNpdW0zRFRpbGVCYXRjaFRhYmxlIGZyb20gXCIuL0Nlc2l1bTNEVGlsZUJhdGNoVGFibGUuanNcIjtcbmltcG9ydCBDZXNpdW0zRFRpbGVGZWF0dXJlVGFibGUgZnJvbSBcIi4vQ2VzaXVtM0RUaWxlRmVhdHVyZVRhYmxlLmpzXCI7XG5pbXBvcnQgRHJhY29Mb2FkZXIgZnJvbSBcIi4vRHJhY29Mb2FkZXIuanNcIjtcbmltcG9ydCBnZXRDbGlwQW5kU3R5bGVDb2RlIGZyb20gXCIuL2dldENsaXBBbmRTdHlsZUNvZGUuanNcIjtcbmltcG9ydCBnZXRDbGlwcGluZ0Z1bmN0aW9uIGZyb20gXCIuL2dldENsaXBwaW5nRnVuY3Rpb24uanNcIjtcbmltcG9ydCBTY2VuZU1vZGUgZnJvbSBcIi4vU2NlbmVNb2RlLmpzXCI7XG5pbXBvcnQgU2hhZG93TW9kZSBmcm9tIFwiLi9TaGFkb3dNb2RlLmpzXCI7XG5pbXBvcnQgU3RlbmNpbENvbnN0YW50cyBmcm9tIFwiLi9TdGVuY2lsQ29uc3RhbnRzLmpzXCI7XG5cbnZhciBEZWNvZGluZ1N0YXRlID0ge1xuICBORUVEU19ERUNPREU6IDAsXG4gIERFQ09ESU5HOiAxLFxuICBSRUFEWTogMixcbiAgRkFJTEVEOiAzLFxufTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBjb250ZW50cyBvZiBhXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0Nlc2l1bUdTLzNkLXRpbGVzL3RyZWUvbWFpbi9zcGVjaWZpY2F0aW9uL1RpbGVGb3JtYXRzL1BvaW50Q2xvdWR8UG9pbnQgQ2xvdWR9XG4gKiB0aWxlLiBVc2VkIGludGVybmFsbHkgYnkge0BsaW5rIFBvaW50Q2xvdWQzRFRpbGVDb250ZW50fSBhbmQge0BsaW5rIFRpbWVEeW5hbWljUG9pbnRDbG91ZH0uXG4gKlxuICogQGFsaWFzIFBvaW50Q2xvdWRcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBzZWUgUG9pbnRDbG91ZDNEVGlsZUNvbnRlbnRcbiAqIEBzZWUgVGltZUR5bmFtaWNQb2ludENsb3VkXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gUG9pbnRDbG91ZChvcHRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zXCIsIG9wdGlvbnMpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5hcnJheUJ1ZmZlclwiLCBvcHRpb25zLmFycmF5QnVmZmVyKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgLy8gSG9sZCBvbnRvIHRoZSBwYXlsb2FkIHVudGlsIHRoZSByZW5kZXIgcmVzb3VyY2VzIGFyZSBjcmVhdGVkXG4gIHRoaXMuX3BhcnNlZENvbnRlbnQgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fZHJhd0NvbW1hbmQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2lzVHJhbnNsdWNlbnQgPSBmYWxzZTtcbiAgdGhpcy5fc3R5bGVUcmFuc2x1Y2VudCA9IGZhbHNlO1xuICB0aGlzLl9jb25zdGFudENvbG9yID0gQ29sb3IuY2xvbmUoQ29sb3IuREFSS0dSQVkpO1xuICB0aGlzLl9oaWdobGlnaHRDb2xvciA9IENvbG9yLmNsb25lKENvbG9yLldISVRFKTtcbiAgdGhpcy5fcG9pbnRTaXplID0gMS4wO1xuXG4gIHRoaXMuX3J0Y0NlbnRlciA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcXVhbnRpemVkVm9sdW1lU2NhbGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3F1YW50aXplZFZvbHVtZU9mZnNldCA9IHVuZGVmaW5lZDtcblxuICAvLyBUaGVzZSB2YWx1ZXMgYXJlIHVzZWQgdG8gcmVnZW5lcmF0ZSB0aGUgc2hhZGVyIHdoZW4gdGhlIHN0eWxlIGNoYW5nZXNcbiAgdGhpcy5fc3R5bGVhYmxlU2hhZGVyQXR0cmlidXRlcyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5faXNRdWFudGl6ZWQgPSBmYWxzZTtcbiAgdGhpcy5faXNPY3RFbmNvZGVkMTZQID0gZmFsc2U7XG4gIHRoaXMuX2lzUkdCNTY1ID0gZmFsc2U7XG4gIHRoaXMuX2hhc0NvbG9ycyA9IGZhbHNlO1xuICB0aGlzLl9oYXNOb3JtYWxzID0gZmFsc2U7XG4gIHRoaXMuX2hhc0JhdGNoSWRzID0gZmFsc2U7XG5cbiAgLy8gRHJhY29cbiAgdGhpcy5fZGVjb2RpbmdTdGF0ZSA9IERlY29kaW5nU3RhdGUuUkVBRFk7XG4gIHRoaXMuX2RlcXVhbnRpemVJblNoYWRlciA9IHRydWU7XG4gIHRoaXMuX2lzUXVhbnRpemVkRHJhY28gPSBmYWxzZTtcbiAgdGhpcy5faXNPY3RFbmNvZGVkRHJhY28gPSBmYWxzZTtcbiAgdGhpcy5fcXVhbnRpemVkUmFuZ2UgPSAwLjA7XG4gIHRoaXMuX29jdEVuY29kZWRSYW5nZSA9IDAuMDtcblxuICAvLyBVc2UgcGVyLXBvaW50IG5vcm1hbHMgdG8gaGlkZSBiYWNrLWZhY2luZyBwb2ludHMuXG4gIHRoaXMuYmFja0ZhY2VDdWxsaW5nID0gZmFsc2U7XG4gIHRoaXMuX2JhY2tGYWNlQ3VsbGluZyA9IGZhbHNlO1xuXG4gIC8vIFdoZXRoZXIgdG8gZW5hYmxlIG5vcm1hbCBzaGFkaW5nXG4gIHRoaXMubm9ybWFsU2hhZGluZyA9IHRydWU7XG4gIHRoaXMuX25vcm1hbFNoYWRpbmcgPSB0cnVlO1xuXG4gIHRoaXMuX29wYXF1ZVJlbmRlclN0YXRlID0gdW5kZWZpbmVkO1xuICB0aGlzLl90cmFuc2x1Y2VudFJlbmRlclN0YXRlID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX21vZGUgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgdGhpcy5fcmVhZHlQcm9taXNlID0gd2hlbi5kZWZlcigpO1xuICB0aGlzLl9wb2ludHNMZW5ndGggPSAwO1xuICB0aGlzLl9nZW9tZXRyeUJ5dGVMZW5ndGggPSAwO1xuXG4gIHRoaXMuX3ZlcnRleFNoYWRlckxvYWRlZCA9IG9wdGlvbnMudmVydGV4U2hhZGVyTG9hZGVkO1xuICB0aGlzLl9mcmFnbWVudFNoYWRlckxvYWRlZCA9IG9wdGlvbnMuZnJhZ21lbnRTaGFkZXJMb2FkZWQ7XG4gIHRoaXMuX3VuaWZvcm1NYXBMb2FkZWQgPSBvcHRpb25zLnVuaWZvcm1NYXBMb2FkZWQ7XG4gIHRoaXMuX2JhdGNoVGFibGVMb2FkZWQgPSBvcHRpb25zLmJhdGNoVGFibGVMb2FkZWQ7XG4gIHRoaXMuX3BpY2tJZExvYWRlZCA9IG9wdGlvbnMucGlja0lkTG9hZGVkO1xuICB0aGlzLl9vcGFxdWVQYXNzID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMub3BhcXVlUGFzcywgUGFzcy5PUEFRVUUpO1xuICB0aGlzLl9jdWxsID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuY3VsbCwgdHJ1ZSk7XG5cbiAgdGhpcy5zdHlsZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3R5bGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuc3R5bGVEaXJ0eSA9IGZhbHNlO1xuXG4gIHRoaXMubW9kZWxNYXRyaXggPSBNYXRyaXg0LmNsb25lKE1hdHJpeDQuSURFTlRJVFkpO1xuICB0aGlzLl9tb2RlbE1hdHJpeCA9IE1hdHJpeDQuY2xvbmUoTWF0cml4NC5JREVOVElUWSk7XG5cbiAgdGhpcy50aW1lID0gMC4wOyAvLyBGb3Igc3R5bGluZ1xuICB0aGlzLnNoYWRvd3MgPSBTaGFkb3dNb2RlLkVOQUJMRUQ7XG4gIHRoaXMuX2JvdW5kaW5nU3BoZXJlID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuY2xpcHBpbmdQbGFuZXMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuaXNDbGlwcGVkID0gZmFsc2U7XG4gIHRoaXMuY2xpcHBpbmdQbGFuZXNEaXJ0eSA9IGZhbHNlO1xuICAvLyBJZiBkZWZpbmVkLCB1c2UgdGhpcyBtYXRyaXggdG8gcG9zaXRpb24gdGhlIGNsaXBwaW5nIHBsYW5lcyBpbnN0ZWFkIG9mIHRoZSBtb2RlbE1hdHJpeC5cbiAgLy8gVGhpcyBpcyBzbyB0aGF0IHdoZW4gcG9pbnQgY2xvdWRzIGFyZSBwYXJ0IG9mIGEgdGlsZXNldCB0aGV5IGFsbCBnZXQgY2xpcHBlZCByZWxhdGl2ZVxuICAvLyB0byB0aGUgcm9vdCB0aWxlLlxuICB0aGlzLmNsaXBwaW5nUGxhbmVzT3JpZ2luTWF0cml4ID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuYXR0ZW51YXRpb24gPSBmYWxzZTtcbiAgdGhpcy5fYXR0ZW51YXRpb24gPSBmYWxzZTtcblxuICAvLyBPcHRpb25zIGZvciBnZW9tZXRyaWMgZXJyb3IgYmFzZWQgYXR0ZW51YXRpb25cbiAgdGhpcy5nZW9tZXRyaWNFcnJvciA9IDAuMDtcbiAgdGhpcy5nZW9tZXRyaWNFcnJvclNjYWxlID0gMS4wO1xuICB0aGlzLm1heGltdW1BdHRlbnVhdGlvbiA9IHRoaXMuX3BvaW50U2l6ZTtcblxuICBpbml0aWFsaXplKHRoaXMsIG9wdGlvbnMpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhQb2ludENsb3VkLnByb3RvdHlwZSwge1xuICBwb2ludHNMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wb2ludHNMZW5ndGg7XG4gICAgfSxcbiAgfSxcblxuICBnZW9tZXRyeUJ5dGVMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZW9tZXRyeUJ5dGVMZW5ndGg7XG4gICAgfSxcbiAgfSxcblxuICByZWFkeToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5O1xuICAgIH0sXG4gIH0sXG5cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlLnByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICBjb2xvcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIENvbG9yLmNsb25lKHRoaXMuX2hpZ2hsaWdodENvbG9yKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLl9oaWdobGlnaHRDb2xvciA9IENvbG9yLmNsb25lKHZhbHVlLCB0aGlzLl9oaWdobGlnaHRDb2xvcik7XG4gICAgfSxcbiAgfSxcblxuICBib3VuZGluZ1NwaGVyZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGRlZmluZWQodGhpcy5fZHJhd0NvbW1hbmQpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kcmF3Q29tbWFuZC5ib3VuZGluZ1ZvbHVtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fYm91bmRpbmdTcGhlcmUgPSBCb3VuZGluZ1NwaGVyZS5jbG9uZSh2YWx1ZSwgdGhpcy5fYm91bmRpbmdTcGhlcmUpO1xuICAgIH0sXG4gIH0sXG59KTtcblxudmFyIHNpemVPZlVpbnQzMiA9IFVpbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuXG5mdW5jdGlvbiBpbml0aWFsaXplKHBvaW50Q2xvdWQsIG9wdGlvbnMpIHtcbiAgdmFyIGFycmF5QnVmZmVyID0gb3B0aW9ucy5hcnJheUJ1ZmZlcjtcbiAgdmFyIGJ5dGVPZmZzZXQgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5ieXRlT2Zmc2V0LCAwKTtcblxuICB2YXIgdWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcbiAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIpO1xuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjsgLy8gU2tpcCBtYWdpY1xuXG4gIHZhciB2ZXJzaW9uID0gdmlldy5nZXRVaW50MzIoYnl0ZU9mZnNldCwgdHJ1ZSk7XG4gIGlmICh2ZXJzaW9uICE9PSAxKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiT25seSBQb2ludCBDbG91ZCB0aWxlIHZlcnNpb24gMSBpcyBzdXBwb3J0ZWQuICBWZXJzaW9uIFwiICtcbiAgICAgICAgdmVyc2lvbiArXG4gICAgICAgIFwiIGlzIG5vdC5cIlxuICAgICk7XG4gIH1cbiAgYnl0ZU9mZnNldCArPSBzaXplT2ZVaW50MzI7XG5cbiAgLy8gU2tpcCBieXRlTGVuZ3RoXG4gIGJ5dGVPZmZzZXQgKz0gc2l6ZU9mVWludDMyO1xuXG4gIHZhciBmZWF0dXJlVGFibGVKc29uQnl0ZUxlbmd0aCA9IHZpZXcuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIHRydWUpO1xuICBpZiAoZmVhdHVyZVRhYmxlSnNvbkJ5dGVMZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgXCJGZWF0dXJlIHRhYmxlIG11c3QgaGF2ZSBhIGJ5dGUgbGVuZ3RoIGdyZWF0ZXIgdGhhbiB6ZXJvXCJcbiAgICApO1xuICB9XG4gIGJ5dGVPZmZzZXQgKz0gc2l6ZU9mVWludDMyO1xuXG4gIHZhciBmZWF0dXJlVGFibGVCaW5hcnlCeXRlTGVuZ3RoID0gdmlldy5nZXRVaW50MzIoYnl0ZU9mZnNldCwgdHJ1ZSk7XG4gIGJ5dGVPZmZzZXQgKz0gc2l6ZU9mVWludDMyO1xuXG4gIHZhciBiYXRjaFRhYmxlSnNvbkJ5dGVMZW5ndGggPSB2aWV3LmdldFVpbnQzMihieXRlT2Zmc2V0LCB0cnVlKTtcbiAgYnl0ZU9mZnNldCArPSBzaXplT2ZVaW50MzI7XG4gIHZhciBiYXRjaFRhYmxlQmluYXJ5Qnl0ZUxlbmd0aCA9IHZpZXcuZ2V0VWludDMyKGJ5dGVPZmZzZXQsIHRydWUpO1xuICBieXRlT2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcblxuICB2YXIgZmVhdHVyZVRhYmxlSnNvbiA9IGdldEpzb25Gcm9tVHlwZWRBcnJheShcbiAgICB1aW50OEFycmF5LFxuICAgIGJ5dGVPZmZzZXQsXG4gICAgZmVhdHVyZVRhYmxlSnNvbkJ5dGVMZW5ndGhcbiAgKTtcbiAgYnl0ZU9mZnNldCArPSBmZWF0dXJlVGFibGVKc29uQnl0ZUxlbmd0aDtcblxuICB2YXIgZmVhdHVyZVRhYmxlQmluYXJ5ID0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgYXJyYXlCdWZmZXIsXG4gICAgYnl0ZU9mZnNldCxcbiAgICBmZWF0dXJlVGFibGVCaW5hcnlCeXRlTGVuZ3RoXG4gICk7XG4gIGJ5dGVPZmZzZXQgKz0gZmVhdHVyZVRhYmxlQmluYXJ5Qnl0ZUxlbmd0aDtcblxuICAvLyBHZXQgdGhlIGJhdGNoIHRhYmxlIEpTT04gYW5kIGJpbmFyeVxuICB2YXIgYmF0Y2hUYWJsZUpzb247XG4gIHZhciBiYXRjaFRhYmxlQmluYXJ5O1xuICBpZiAoYmF0Y2hUYWJsZUpzb25CeXRlTGVuZ3RoID4gMCkge1xuICAgIC8vIEhhcyBhIGJhdGNoIHRhYmxlIEpTT05cbiAgICBiYXRjaFRhYmxlSnNvbiA9IGdldEpzb25Gcm9tVHlwZWRBcnJheShcbiAgICAgIHVpbnQ4QXJyYXksXG4gICAgICBieXRlT2Zmc2V0LFxuICAgICAgYmF0Y2hUYWJsZUpzb25CeXRlTGVuZ3RoXG4gICAgKTtcbiAgICBieXRlT2Zmc2V0ICs9IGJhdGNoVGFibGVKc29uQnl0ZUxlbmd0aDtcblxuICAgIGlmIChiYXRjaFRhYmxlQmluYXJ5Qnl0ZUxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEhhcyBhIGJhdGNoIHRhYmxlIGJpbmFyeVxuICAgICAgYmF0Y2hUYWJsZUJpbmFyeSA9IG5ldyBVaW50OEFycmF5KFxuICAgICAgICBhcnJheUJ1ZmZlcixcbiAgICAgICAgYnl0ZU9mZnNldCxcbiAgICAgICAgYmF0Y2hUYWJsZUJpbmFyeUJ5dGVMZW5ndGhcbiAgICAgICk7XG4gICAgICBieXRlT2Zmc2V0ICs9IGJhdGNoVGFibGVCaW5hcnlCeXRlTGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHZhciBmZWF0dXJlVGFibGUgPSBuZXcgQ2VzaXVtM0RUaWxlRmVhdHVyZVRhYmxlKFxuICAgIGZlYXR1cmVUYWJsZUpzb24sXG4gICAgZmVhdHVyZVRhYmxlQmluYXJ5XG4gICk7XG5cbiAgdmFyIHBvaW50c0xlbmd0aCA9IGZlYXR1cmVUYWJsZS5nZXRHbG9iYWxQcm9wZXJ0eShcIlBPSU5UU19MRU5HVEhcIik7XG4gIGZlYXR1cmVUYWJsZS5mZWF0dXJlc0xlbmd0aCA9IHBvaW50c0xlbmd0aDtcblxuICBpZiAoIWRlZmluZWQocG9pbnRzTGVuZ3RoKSkge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICBcIkZlYXR1cmUgdGFibGUgZ2xvYmFsIHByb3BlcnR5OiBQT0lOVFNfTEVOR1RIIG11c3QgYmUgZGVmaW5lZFwiXG4gICAgKTtcbiAgfVxuXG4gIHZhciBydGNDZW50ZXIgPSBmZWF0dXJlVGFibGUuZ2V0R2xvYmFsUHJvcGVydHkoXG4gICAgXCJSVENfQ0VOVEVSXCIsXG4gICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgM1xuICApO1xuICBpZiAoZGVmaW5lZChydGNDZW50ZXIpKSB7XG4gICAgcG9pbnRDbG91ZC5fcnRjQ2VudGVyID0gQ2FydGVzaWFuMy51bnBhY2socnRjQ2VudGVyKTtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbnM7XG4gIHZhciBjb2xvcnM7XG4gIHZhciBub3JtYWxzO1xuICB2YXIgYmF0Y2hJZHM7XG5cbiAgdmFyIGhhc1Bvc2l0aW9ucyA9IGZhbHNlO1xuICB2YXIgaGFzQ29sb3JzID0gZmFsc2U7XG4gIHZhciBoYXNOb3JtYWxzID0gZmFsc2U7XG4gIHZhciBoYXNCYXRjaElkcyA9IGZhbHNlO1xuXG4gIHZhciBpc1F1YW50aXplZCA9IGZhbHNlO1xuICB2YXIgaXNUcmFuc2x1Y2VudCA9IGZhbHNlO1xuICB2YXIgaXNSR0I1NjUgPSBmYWxzZTtcbiAgdmFyIGlzT2N0RW5jb2RlZDE2UCA9IGZhbHNlO1xuXG4gIHZhciBkcmFjb0J1ZmZlcjtcbiAgdmFyIGRyYWNvRmVhdHVyZVRhYmxlUHJvcGVydGllcztcbiAgdmFyIGRyYWNvQmF0Y2hUYWJsZVByb3BlcnRpZXM7XG5cbiAgdmFyIGZlYXR1cmVUYWJsZURyYWNvID0gZGVmaW5lZChmZWF0dXJlVGFibGVKc29uLmV4dGVuc2lvbnMpXG4gICAgPyBmZWF0dXJlVGFibGVKc29uLmV4dGVuc2lvbnNbXCIzRFRJTEVTX2RyYWNvX3BvaW50X2NvbXByZXNzaW9uXCJdXG4gICAgOiB1bmRlZmluZWQ7XG4gIHZhciBiYXRjaFRhYmxlRHJhY28gPVxuICAgIGRlZmluZWQoYmF0Y2hUYWJsZUpzb24pICYmIGRlZmluZWQoYmF0Y2hUYWJsZUpzb24uZXh0ZW5zaW9ucylcbiAgICAgID8gYmF0Y2hUYWJsZUpzb24uZXh0ZW5zaW9uc1tcIjNEVElMRVNfZHJhY29fcG9pbnRfY29tcHJlc3Npb25cIl1cbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gIGlmIChkZWZpbmVkKGJhdGNoVGFibGVEcmFjbykpIHtcbiAgICBkcmFjb0JhdGNoVGFibGVQcm9wZXJ0aWVzID0gYmF0Y2hUYWJsZURyYWNvLnByb3BlcnRpZXM7XG4gIH1cblxuICBpZiAoZGVmaW5lZChmZWF0dXJlVGFibGVEcmFjbykpIHtcbiAgICBkcmFjb0ZlYXR1cmVUYWJsZVByb3BlcnRpZXMgPSBmZWF0dXJlVGFibGVEcmFjby5wcm9wZXJ0aWVzO1xuICAgIHZhciBkcmFjb0J5dGVPZmZzZXQgPSBmZWF0dXJlVGFibGVEcmFjby5ieXRlT2Zmc2V0O1xuICAgIHZhciBkcmFjb0J5dGVMZW5ndGggPSBmZWF0dXJlVGFibGVEcmFjby5ieXRlTGVuZ3RoO1xuICAgIGlmIChcbiAgICAgICFkZWZpbmVkKGRyYWNvRmVhdHVyZVRhYmxlUHJvcGVydGllcykgfHxcbiAgICAgICFkZWZpbmVkKGRyYWNvQnl0ZU9mZnNldCkgfHxcbiAgICAgICFkZWZpbmVkKGRyYWNvQnl0ZUxlbmd0aClcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgIFwiRHJhY28gcHJvcGVydGllcywgYnl0ZU9mZnNldCwgYW5kIGJ5dGVMZW5ndGggbXVzdCBiZSBkZWZpbmVkXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGRyYWNvQnVmZmVyID0gYXJyYXlTbGljZShcbiAgICAgIGZlYXR1cmVUYWJsZUJpbmFyeSxcbiAgICAgIGRyYWNvQnl0ZU9mZnNldCxcbiAgICAgIGRyYWNvQnl0ZU9mZnNldCArIGRyYWNvQnl0ZUxlbmd0aFxuICAgICk7XG4gICAgaGFzUG9zaXRpb25zID0gZGVmaW5lZChkcmFjb0ZlYXR1cmVUYWJsZVByb3BlcnRpZXMuUE9TSVRJT04pO1xuICAgIGhhc0NvbG9ycyA9XG4gICAgICBkZWZpbmVkKGRyYWNvRmVhdHVyZVRhYmxlUHJvcGVydGllcy5SR0IpIHx8XG4gICAgICBkZWZpbmVkKGRyYWNvRmVhdHVyZVRhYmxlUHJvcGVydGllcy5SR0JBKTtcbiAgICBoYXNOb3JtYWxzID0gZGVmaW5lZChkcmFjb0ZlYXR1cmVUYWJsZVByb3BlcnRpZXMuTk9STUFMKTtcbiAgICBoYXNCYXRjaElkcyA9IGRlZmluZWQoZHJhY29GZWF0dXJlVGFibGVQcm9wZXJ0aWVzLkJBVENIX0lEKTtcbiAgICBpc1RyYW5zbHVjZW50ID0gZGVmaW5lZChkcmFjb0ZlYXR1cmVUYWJsZVByb3BlcnRpZXMuUkdCQSk7XG4gICAgcG9pbnRDbG91ZC5fZGVjb2RpbmdTdGF0ZSA9IERlY29kaW5nU3RhdGUuTkVFRFNfREVDT0RFO1xuICB9XG5cbiAgdmFyIGRyYWNvO1xuICBpZiAoZGVmaW5lZChkcmFjb0J1ZmZlcikpIHtcbiAgICBkcmFjbyA9IHtcbiAgICAgIGJ1ZmZlcjogZHJhY29CdWZmZXIsXG4gICAgICBmZWF0dXJlVGFibGVQcm9wZXJ0aWVzOiBkcmFjb0ZlYXR1cmVUYWJsZVByb3BlcnRpZXMsXG4gICAgICBiYXRjaFRhYmxlUHJvcGVydGllczogZHJhY29CYXRjaFRhYmxlUHJvcGVydGllcyxcbiAgICAgIHByb3BlcnRpZXM6IGNvbWJpbmUoXG4gICAgICAgIGRyYWNvRmVhdHVyZVRhYmxlUHJvcGVydGllcyxcbiAgICAgICAgZHJhY29CYXRjaFRhYmxlUHJvcGVydGllc1xuICAgICAgKSxcbiAgICAgIGRlcXVhbnRpemVJblNoYWRlcjogcG9pbnRDbG91ZC5fZGVxdWFudGl6ZUluU2hhZGVyLFxuICAgIH07XG4gIH1cblxuICBpZiAoIWhhc1Bvc2l0aW9ucykge1xuICAgIGlmIChkZWZpbmVkKGZlYXR1cmVUYWJsZUpzb24uUE9TSVRJT04pKSB7XG4gICAgICBwb3NpdGlvbnMgPSBmZWF0dXJlVGFibGUuZ2V0UHJvcGVydHlBcnJheShcbiAgICAgICAgXCJQT1NJVElPTlwiLFxuICAgICAgICBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgM1xuICAgICAgKTtcbiAgICAgIGhhc1Bvc2l0aW9ucyA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKGZlYXR1cmVUYWJsZUpzb24uUE9TSVRJT05fUVVBTlRJWkVEKSkge1xuICAgICAgcG9zaXRpb25zID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5QXJyYXkoXG4gICAgICAgIFwiUE9TSVRJT05fUVVBTlRJWkVEXCIsXG4gICAgICAgIENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX1NIT1JULFxuICAgICAgICAzXG4gICAgICApO1xuICAgICAgaXNRdWFudGl6ZWQgPSB0cnVlO1xuICAgICAgaGFzUG9zaXRpb25zID0gdHJ1ZTtcblxuICAgICAgdmFyIHF1YW50aXplZFZvbHVtZVNjYWxlID0gZmVhdHVyZVRhYmxlLmdldEdsb2JhbFByb3BlcnR5KFxuICAgICAgICBcIlFVQU5USVpFRF9WT0xVTUVfU0NBTEVcIixcbiAgICAgICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgIDNcbiAgICAgICk7XG4gICAgICBpZiAoIWRlZmluZWQocXVhbnRpemVkVm9sdW1lU2NhbGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgXCJHbG9iYWwgcHJvcGVydHk6IFFVQU5USVpFRF9WT0xVTUVfU0NBTEUgbXVzdCBiZSBkZWZpbmVkIGZvciBxdWFudGl6ZWQgcG9zaXRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBwb2ludENsb3VkLl9xdWFudGl6ZWRWb2x1bWVTY2FsZSA9IENhcnRlc2lhbjMudW5wYWNrKFxuICAgICAgICBxdWFudGl6ZWRWb2x1bWVTY2FsZVxuICAgICAgKTtcbiAgICAgIHBvaW50Q2xvdWQuX3F1YW50aXplZFJhbmdlID0gKDEgPDwgMTYpIC0gMTtcblxuICAgICAgdmFyIHF1YW50aXplZFZvbHVtZU9mZnNldCA9IGZlYXR1cmVUYWJsZS5nZXRHbG9iYWxQcm9wZXJ0eShcbiAgICAgICAgXCJRVUFOVElaRURfVk9MVU1FX09GRlNFVFwiLFxuICAgICAgICBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgM1xuICAgICAgKTtcbiAgICAgIGlmICghZGVmaW5lZChxdWFudGl6ZWRWb2x1bWVPZmZzZXQpKSB7XG4gICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgXCJHbG9iYWwgcHJvcGVydHk6IFFVQU5USVpFRF9WT0xVTUVfT0ZGU0VUIG11c3QgYmUgZGVmaW5lZCBmb3IgcXVhbnRpemVkIHBvc2l0aW9ucy5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcG9pbnRDbG91ZC5fcXVhbnRpemVkVm9sdW1lT2Zmc2V0ID0gQ2FydGVzaWFuMy51bnBhY2soXG4gICAgICAgIHF1YW50aXplZFZvbHVtZU9mZnNldFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhhc0NvbG9ycykge1xuICAgIGlmIChkZWZpbmVkKGZlYXR1cmVUYWJsZUpzb24uUkdCQSkpIHtcbiAgICAgIGNvbG9ycyA9IGZlYXR1cmVUYWJsZS5nZXRQcm9wZXJ0eUFycmF5KFxuICAgICAgICBcIlJHQkFcIixcbiAgICAgICAgQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgICAgNFxuICAgICAgKTtcbiAgICAgIGlzVHJhbnNsdWNlbnQgPSB0cnVlO1xuICAgICAgaGFzQ29sb3JzID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGRlZmluZWQoZmVhdHVyZVRhYmxlSnNvbi5SR0IpKSB7XG4gICAgICBjb2xvcnMgPSBmZWF0dXJlVGFibGUuZ2V0UHJvcGVydHlBcnJheShcbiAgICAgICAgXCJSR0JcIixcbiAgICAgICAgQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgICAgM1xuICAgICAgKTtcbiAgICAgIGhhc0NvbG9ycyA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKGZlYXR1cmVUYWJsZUpzb24uUkdCNTY1KSkge1xuICAgICAgY29sb3JzID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5QXJyYXkoXG4gICAgICAgIFwiUkdCNTY1XCIsXG4gICAgICAgIENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX1NIT1JULFxuICAgICAgICAxXG4gICAgICApO1xuICAgICAgaXNSR0I1NjUgPSB0cnVlO1xuICAgICAgaGFzQ29sb3JzID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhhc05vcm1hbHMpIHtcbiAgICBpZiAoZGVmaW5lZChmZWF0dXJlVGFibGVKc29uLk5PUk1BTCkpIHtcbiAgICAgIG5vcm1hbHMgPSBmZWF0dXJlVGFibGUuZ2V0UHJvcGVydHlBcnJheShcbiAgICAgICAgXCJOT1JNQUxcIixcbiAgICAgICAgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgIDNcbiAgICAgICk7XG4gICAgICBoYXNOb3JtYWxzID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGRlZmluZWQoZmVhdHVyZVRhYmxlSnNvbi5OT1JNQUxfT0NUMTZQKSkge1xuICAgICAgbm9ybWFscyA9IGZlYXR1cmVUYWJsZS5nZXRQcm9wZXJ0eUFycmF5KFxuICAgICAgICBcIk5PUk1BTF9PQ1QxNlBcIixcbiAgICAgICAgQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgICAgMlxuICAgICAgKTtcbiAgICAgIGlzT2N0RW5jb2RlZDE2UCA9IHRydWU7XG4gICAgICBoYXNOb3JtYWxzID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhhc0JhdGNoSWRzKSB7XG4gICAgaWYgKGRlZmluZWQoZmVhdHVyZVRhYmxlSnNvbi5CQVRDSF9JRCkpIHtcbiAgICAgIGJhdGNoSWRzID0gZmVhdHVyZVRhYmxlLmdldFByb3BlcnR5QXJyYXkoXG4gICAgICAgIFwiQkFUQ0hfSURcIixcbiAgICAgICAgQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfU0hPUlQsXG4gICAgICAgIDFcbiAgICAgICk7XG4gICAgICBoYXNCYXRjaElkcyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFoYXNQb3NpdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgXCJFaXRoZXIgUE9TSVRJT04gb3IgUE9TSVRJT05fUVVBTlRJWkVEIG11c3QgYmUgZGVmaW5lZC5cIlxuICAgICk7XG4gIH1cblxuICBpZiAoZGVmaW5lZChmZWF0dXJlVGFibGVKc29uLkNPTlNUQU5UX1JHQkEpKSB7XG4gICAgdmFyIGNvbnN0YW50UkdCQSA9IGZlYXR1cmVUYWJsZS5nZXRHbG9iYWxQcm9wZXJ0eShcbiAgICAgIFwiQ09OU1RBTlRfUkdCQVwiLFxuICAgICAgQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgIDRcbiAgICApO1xuICAgIHBvaW50Q2xvdWQuX2NvbnN0YW50Q29sb3IgPSBDb2xvci5mcm9tQnl0ZXMoXG4gICAgICBjb25zdGFudFJHQkFbMF0sXG4gICAgICBjb25zdGFudFJHQkFbMV0sXG4gICAgICBjb25zdGFudFJHQkFbMl0sXG4gICAgICBjb25zdGFudFJHQkFbM10sXG4gICAgICBwb2ludENsb3VkLl9jb25zdGFudENvbG9yXG4gICAgKTtcbiAgfVxuXG4gIGlmIChoYXNCYXRjaElkcykge1xuICAgIHZhciBiYXRjaExlbmd0aCA9IGZlYXR1cmVUYWJsZS5nZXRHbG9iYWxQcm9wZXJ0eShcIkJBVENIX0xFTkdUSFwiKTtcbiAgICBpZiAoIWRlZmluZWQoYmF0Y2hMZW5ndGgpKSB7XG4gICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgICBcIkdsb2JhbCBwcm9wZXJ0eTogQkFUQ0hfTEVOR1RIIG11c3QgYmUgZGVmaW5lZCB3aGVuIEJBVENIX0lEIGlzIGRlZmluZWQuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGRlZmluZWQoYmF0Y2hUYWJsZUJpbmFyeSkpIHtcbiAgICAgIC8vIENvcHkgdGhlIGJhdGNoVGFibGVCaW5hcnkgc2VjdGlvbiBhbmQgbGV0IHRoZSB1bmRlcmx5aW5nIEFycmF5QnVmZmVyIGJlIGZyZWVkXG4gICAgICBiYXRjaFRhYmxlQmluYXJ5ID0gbmV3IFVpbnQ4QXJyYXkoYmF0Y2hUYWJsZUJpbmFyeSk7XG4gICAgfVxuXG4gICAgaWYgKGRlZmluZWQocG9pbnRDbG91ZC5fYmF0Y2hUYWJsZUxvYWRlZCkpIHtcbiAgICAgIHBvaW50Q2xvdWQuX2JhdGNoVGFibGVMb2FkZWQoXG4gICAgICAgIGJhdGNoTGVuZ3RoLFxuICAgICAgICBiYXRjaFRhYmxlSnNvbixcbiAgICAgICAgYmF0Y2hUYWJsZUJpbmFyeVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiBwb2ludHMgYXJlIG5vdCBiYXRjaGVkIGFuZCB0aGVyZSBhcmUgcGVyLXBvaW50IHByb3BlcnRpZXMsIHVzZSB0aGVzZSBwcm9wZXJ0aWVzIGZvciBzdHlsaW5nIHB1cnBvc2VzXG4gIHZhciBzdHlsZWFibGVQcm9wZXJ0aWVzO1xuICBpZiAoIWhhc0JhdGNoSWRzICYmIGRlZmluZWQoYmF0Y2hUYWJsZUJpbmFyeSkpIHtcbiAgICBzdHlsZWFibGVQcm9wZXJ0aWVzID0gQ2VzaXVtM0RUaWxlQmF0Y2hUYWJsZS5nZXRCaW5hcnlQcm9wZXJ0aWVzKFxuICAgICAgcG9pbnRzTGVuZ3RoLFxuICAgICAgYmF0Y2hUYWJsZUpzb24sXG4gICAgICBiYXRjaFRhYmxlQmluYXJ5XG4gICAgKTtcbiAgfVxuXG4gIHBvaW50Q2xvdWQuX3BhcnNlZENvbnRlbnQgPSB7XG4gICAgcG9zaXRpb25zOiBwb3NpdGlvbnMsXG4gICAgY29sb3JzOiBjb2xvcnMsXG4gICAgbm9ybWFsczogbm9ybWFscyxcbiAgICBiYXRjaElkczogYmF0Y2hJZHMsXG4gICAgc3R5bGVhYmxlUHJvcGVydGllczogc3R5bGVhYmxlUHJvcGVydGllcyxcbiAgICBkcmFjbzogZHJhY28sXG4gIH07XG4gIHBvaW50Q2xvdWQuX3BvaW50c0xlbmd0aCA9IHBvaW50c0xlbmd0aDtcbiAgcG9pbnRDbG91ZC5faXNRdWFudGl6ZWQgPSBpc1F1YW50aXplZDtcbiAgcG9pbnRDbG91ZC5faXNPY3RFbmNvZGVkMTZQID0gaXNPY3RFbmNvZGVkMTZQO1xuICBwb2ludENsb3VkLl9pc1JHQjU2NSA9IGlzUkdCNTY1O1xuICBwb2ludENsb3VkLl9pc1RyYW5zbHVjZW50ID0gaXNUcmFuc2x1Y2VudDtcbiAgcG9pbnRDbG91ZC5faGFzQ29sb3JzID0gaGFzQ29sb3JzO1xuICBwb2ludENsb3VkLl9oYXNOb3JtYWxzID0gaGFzTm9ybWFscztcbiAgcG9pbnRDbG91ZC5faGFzQmF0Y2hJZHMgPSBoYXNCYXRjaElkcztcbn1cblxudmFyIHNjcmF0Y2hNaW4gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hNYXggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hQb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcmFuZG9tVmFsdWVzO1xuXG5mdW5jdGlvbiBnZXRSYW5kb21WYWx1ZXMoc2FtcGxlc0xlbmd0aCkge1xuICAvLyBVc2Ugc2FtZSByYW5kb20gdmFsdWVzIGFjcm9zcyBhbGwgcnVuc1xuICBpZiAoIWRlZmluZWQocmFuZG9tVmFsdWVzKSkge1xuICAgIENlc2l1bU1hdGguc2V0UmFuZG9tTnVtYmVyU2VlZCgwKTtcbiAgICByYW5kb21WYWx1ZXMgPSBuZXcgQXJyYXkoc2FtcGxlc0xlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVzTGVuZ3RoOyArK2kpIHtcbiAgICAgIHJhbmRvbVZhbHVlc1tpXSA9IENlc2l1bU1hdGgubmV4dFJhbmRvbU51bWJlcigpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmFuZG9tVmFsdWVzO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlQXBwcm94aW1hdGVCb3VuZGluZ1NwaGVyZUZyb21Qb3NpdGlvbnMocG9zaXRpb25zKSB7XG4gIHZhciBtYXhpbXVtU2FtcGxlc0xlbmd0aCA9IDIwO1xuICB2YXIgcG9pbnRzTGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aCAvIDM7XG4gIHZhciBzYW1wbGVzTGVuZ3RoID0gTWF0aC5taW4ocG9pbnRzTGVuZ3RoLCBtYXhpbXVtU2FtcGxlc0xlbmd0aCk7XG4gIHZhciByYW5kb21WYWx1ZXMgPSBnZXRSYW5kb21WYWx1ZXMobWF4aW11bVNhbXBsZXNMZW5ndGgpO1xuICB2YXIgbWF4VmFsdWUgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICB2YXIgbWluVmFsdWUgPSAtTnVtYmVyLk1BWF9WQUxVRTtcbiAgdmFyIG1pbiA9IENhcnRlc2lhbjMuZnJvbUVsZW1lbnRzKG1heFZhbHVlLCBtYXhWYWx1ZSwgbWF4VmFsdWUsIHNjcmF0Y2hNaW4pO1xuICB2YXIgbWF4ID0gQ2FydGVzaWFuMy5mcm9tRWxlbWVudHMobWluVmFsdWUsIG1pblZhbHVlLCBtaW5WYWx1ZSwgc2NyYXRjaE1heCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlc0xlbmd0aDsgKytpKSB7XG4gICAgdmFyIGluZGV4ID0gTWF0aC5mbG9vcihyYW5kb21WYWx1ZXNbaV0gKiBwb2ludHNMZW5ndGgpO1xuICAgIHZhciBwb3NpdGlvbiA9IENhcnRlc2lhbjMudW5wYWNrKHBvc2l0aW9ucywgaW5kZXggKiAzLCBzY3JhdGNoUG9zaXRpb24pO1xuICAgIENhcnRlc2lhbjMubWluaW11bUJ5Q29tcG9uZW50KG1pbiwgcG9zaXRpb24sIG1pbik7XG4gICAgQ2FydGVzaWFuMy5tYXhpbXVtQnlDb21wb25lbnQobWF4LCBwb3NpdGlvbiwgbWF4KTtcbiAgfVxuXG4gIHZhciBib3VuZGluZ1NwaGVyZSA9IEJvdW5kaW5nU3BoZXJlLmZyb21Db3JuZXJQb2ludHMobWluLCBtYXgpO1xuICBib3VuZGluZ1NwaGVyZS5yYWRpdXMgKz0gQ2VzaXVtTWF0aC5FUFNJTE9OMjsgLy8gVG8gYXZvaWQgcmFkaXVzIG9mIHplcm9cbiAgcmV0dXJuIGJvdW5kaW5nU3BoZXJlO1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlVmVydGV4QXR0cmlidXRlKHR5cGVkQXJyYXksIG5hbWUpIHtcbiAgLy8gV2ViR0wgZG9lcyBub3Qgc3VwcG9ydCBVTlNJR05FRF9JTlQsIElOVCwgb3IgRE9VQkxFIHZlcnRleCBhdHRyaWJ1dGVzLiBDb252ZXJ0IHRoZXNlIHRvIEZMT0FULlxuICB2YXIgY29tcG9uZW50RGF0YXR5cGUgPSBDb21wb25lbnREYXRhdHlwZS5mcm9tVHlwZWRBcnJheSh0eXBlZEFycmF5KTtcbiAgaWYgKFxuICAgIGNvbXBvbmVudERhdGF0eXBlID09PSBDb21wb25lbnREYXRhdHlwZS5JTlQgfHxcbiAgICBjb21wb25lbnREYXRhdHlwZSA9PT0gQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfSU5UIHx8XG4gICAgY29tcG9uZW50RGF0YXR5cGUgPT09IENvbXBvbmVudERhdGF0eXBlLkRPVUJMRVxuICApIHtcbiAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgIFwiQ2FzdCBwbnRzIHByb3BlcnR5IHRvIGZsb2F0c1wiLFxuICAgICAgJ1BvaW50IGNsb3VkIHByb3BlcnR5IFwiJyArXG4gICAgICAgIG5hbWUgK1xuICAgICAgICAnXCIgd2lsbCBiZSBjYXN0ZWQgdG8gYSBmbG9hdCBhcnJheSBiZWNhdXNlIElOVCwgVU5TSUdORURfSU5ULCBhbmQgRE9VQkxFIGFyZSBub3QgdmFsaWQgV2ViR0wgdmVydGV4IGF0dHJpYnV0ZSB0eXBlcy4gU29tZSBwcmVjaXNpb24gbWF5IGJlIGxvc3QuJ1xuICAgICk7XG4gICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodHlwZWRBcnJheSk7XG4gIH1cbiAgcmV0dXJuIHR5cGVkQXJyYXk7XG59XG5cbnZhciBzY3JhdGNoUG9pbnRTaXplQW5kVGltZUFuZEdlb21ldHJpY0Vycm9yQW5kRGVwdGhNdWx0aXBsaWVyID0gbmV3IENhcnRlc2lhbjQoKTtcbnZhciBzY3JhdGNoUXVhbnRpemVkVm9sdW1lU2NhbGVBbmRPY3RFbmNvZGVkUmFuZ2UgPSBuZXcgQ2FydGVzaWFuNCgpO1xudmFyIHNjcmF0Y2hDb2xvciA9IG5ldyBDb2xvcigpO1xuXG52YXIgcG9zaXRpb25Mb2NhdGlvbiA9IDA7XG52YXIgY29sb3JMb2NhdGlvbiA9IDE7XG52YXIgbm9ybWFsTG9jYXRpb24gPSAyO1xudmFyIGJhdGNoSWRMb2NhdGlvbiA9IDM7XG52YXIgbnVtYmVyT2ZBdHRyaWJ1dGVzID0gNDtcblxudmFyIHNjcmF0Y2hDbGlwcGluZ1BsYW5lc01hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG52YXIgc2NyYXRjaEludmVyc2VUcmFuc3Bvc2VDbGlwcGluZ1BsYW5lc01hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlc291cmNlcyhwb2ludENsb3VkLCBmcmFtZVN0YXRlKSB7XG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuICB2YXIgcGFyc2VkQ29udGVudCA9IHBvaW50Q2xvdWQuX3BhcnNlZENvbnRlbnQ7XG4gIHZhciBwb2ludHNMZW5ndGggPSBwb2ludENsb3VkLl9wb2ludHNMZW5ndGg7XG4gIHZhciBwb3NpdGlvbnMgPSBwYXJzZWRDb250ZW50LnBvc2l0aW9ucztcbiAgdmFyIGNvbG9ycyA9IHBhcnNlZENvbnRlbnQuY29sb3JzO1xuICB2YXIgbm9ybWFscyA9IHBhcnNlZENvbnRlbnQubm9ybWFscztcbiAgdmFyIGJhdGNoSWRzID0gcGFyc2VkQ29udGVudC5iYXRjaElkcztcbiAgdmFyIHN0eWxlYWJsZVByb3BlcnRpZXMgPSBwYXJzZWRDb250ZW50LnN0eWxlYWJsZVByb3BlcnRpZXM7XG4gIHZhciBoYXNTdHlsZWFibGVQcm9wZXJ0aWVzID0gZGVmaW5lZChzdHlsZWFibGVQcm9wZXJ0aWVzKTtcbiAgdmFyIGlzUXVhbnRpemVkID0gcG9pbnRDbG91ZC5faXNRdWFudGl6ZWQ7XG4gIHZhciBpc1F1YW50aXplZERyYWNvID0gcG9pbnRDbG91ZC5faXNRdWFudGl6ZWREcmFjbztcbiAgdmFyIGlzT2N0RW5jb2RlZDE2UCA9IHBvaW50Q2xvdWQuX2lzT2N0RW5jb2RlZDE2UDtcbiAgdmFyIGlzT2N0RW5jb2RlZERyYWNvID0gcG9pbnRDbG91ZC5faXNPY3RFbmNvZGVkRHJhY287XG4gIHZhciBxdWFudGl6ZWRSYW5nZSA9IHBvaW50Q2xvdWQuX3F1YW50aXplZFJhbmdlO1xuICB2YXIgb2N0RW5jb2RlZFJhbmdlID0gcG9pbnRDbG91ZC5fb2N0RW5jb2RlZFJhbmdlO1xuICB2YXIgaXNSR0I1NjUgPSBwb2ludENsb3VkLl9pc1JHQjU2NTtcbiAgdmFyIGlzVHJhbnNsdWNlbnQgPSBwb2ludENsb3VkLl9pc1RyYW5zbHVjZW50O1xuICB2YXIgaGFzQ29sb3JzID0gcG9pbnRDbG91ZC5faGFzQ29sb3JzO1xuICB2YXIgaGFzTm9ybWFscyA9IHBvaW50Q2xvdWQuX2hhc05vcm1hbHM7XG4gIHZhciBoYXNCYXRjaElkcyA9IHBvaW50Q2xvdWQuX2hhc0JhdGNoSWRzO1xuXG4gIHZhciBjb21wb25lbnRzUGVyQXR0cmlidXRlO1xuICB2YXIgY29tcG9uZW50RGF0YXR5cGU7XG5cbiAgdmFyIHN0eWxlYWJsZVZlcnRleEF0dHJpYnV0ZXMgPSBbXTtcbiAgdmFyIHN0eWxlYWJsZVNoYWRlckF0dHJpYnV0ZXMgPSB7fTtcbiAgcG9pbnRDbG91ZC5fc3R5bGVhYmxlU2hhZGVyQXR0cmlidXRlcyA9IHN0eWxlYWJsZVNoYWRlckF0dHJpYnV0ZXM7XG5cbiAgaWYgKGhhc1N0eWxlYWJsZVByb3BlcnRpZXMpIHtcbiAgICB2YXIgYXR0cmlidXRlTG9jYXRpb24gPSBudW1iZXJPZkF0dHJpYnV0ZXM7XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIHN0eWxlYWJsZVByb3BlcnRpZXMpIHtcbiAgICAgIGlmIChzdHlsZWFibGVQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHZhciBwcm9wZXJ0eSA9IHN0eWxlYWJsZVByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgIHZhciB0eXBlZEFycmF5ID0gcHJlcGFyZVZlcnRleEF0dHJpYnV0ZShwcm9wZXJ0eS50eXBlZEFycmF5LCBuYW1lKTtcbiAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZSA9IHByb3BlcnR5LmNvbXBvbmVudENvdW50O1xuICAgICAgICBjb21wb25lbnREYXRhdHlwZSA9IENvbXBvbmVudERhdGF0eXBlLmZyb21UeXBlZEFycmF5KHR5cGVkQXJyYXkpO1xuXG4gICAgICAgIHZhciB2ZXJ0ZXhCdWZmZXIgPSBCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKHtcbiAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgIHR5cGVkQXJyYXk6IHR5cGVkQXJyYXksXG4gICAgICAgICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICAgICAgICB9KTtcblxuICAgICAgICBwb2ludENsb3VkLl9nZW9tZXRyeUJ5dGVMZW5ndGggKz0gdmVydGV4QnVmZmVyLnNpemVJbkJ5dGVzO1xuXG4gICAgICAgIHZhciB2ZXJ0ZXhBdHRyaWJ1dGUgPSB7XG4gICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9uLFxuICAgICAgICAgIHZlcnRleEJ1ZmZlcjogdmVydGV4QnVmZmVyLFxuICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IGNvbXBvbmVudHNQZXJBdHRyaWJ1dGUsXG4gICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IGNvbXBvbmVudERhdGF0eXBlLFxuICAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXG4gICAgICAgICAgb2Zmc2V0SW5CeXRlczogMCxcbiAgICAgICAgICBzdHJpZGVJbkJ5dGVzOiAwLFxuICAgICAgICB9O1xuXG4gICAgICAgIHN0eWxlYWJsZVZlcnRleEF0dHJpYnV0ZXMucHVzaCh2ZXJ0ZXhBdHRyaWJ1dGUpO1xuICAgICAgICBzdHlsZWFibGVTaGFkZXJBdHRyaWJ1dGVzW25hbWVdID0ge1xuICAgICAgICAgIGxvY2F0aW9uOiBhdHRyaWJ1dGVMb2NhdGlvbixcbiAgICAgICAgICBjb21wb25lbnRDb3VudDogY29tcG9uZW50c1BlckF0dHJpYnV0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgKythdHRyaWJ1dGVMb2NhdGlvbjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgcG9zaXRpb25zVmVydGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICB0eXBlZEFycmF5OiBwb3NpdGlvbnMsXG4gICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICB9KTtcbiAgcG9pbnRDbG91ZC5fZ2VvbWV0cnlCeXRlTGVuZ3RoICs9IHBvc2l0aW9uc1ZlcnRleEJ1ZmZlci5zaXplSW5CeXRlcztcblxuICB2YXIgY29sb3JzVmVydGV4QnVmZmVyO1xuICBpZiAoaGFzQ29sb3JzKSB7XG4gICAgY29sb3JzVmVydGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdHlwZWRBcnJheTogY29sb3JzLFxuICAgICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICAgIH0pO1xuICAgIHBvaW50Q2xvdWQuX2dlb21ldHJ5Qnl0ZUxlbmd0aCArPSBjb2xvcnNWZXJ0ZXhCdWZmZXIuc2l6ZUluQnl0ZXM7XG4gIH1cblxuICB2YXIgbm9ybWFsc1ZlcnRleEJ1ZmZlcjtcbiAgaWYgKGhhc05vcm1hbHMpIHtcbiAgICBub3JtYWxzVmVydGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdHlwZWRBcnJheTogbm9ybWFscyxcbiAgICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyxcbiAgICB9KTtcbiAgICBwb2ludENsb3VkLl9nZW9tZXRyeUJ5dGVMZW5ndGggKz0gbm9ybWFsc1ZlcnRleEJ1ZmZlci5zaXplSW5CeXRlcztcbiAgfVxuXG4gIHZhciBiYXRjaElkc1ZlcnRleEJ1ZmZlcjtcbiAgaWYgKGhhc0JhdGNoSWRzKSB7XG4gICAgYmF0Y2hJZHMgPSBwcmVwYXJlVmVydGV4QXR0cmlidXRlKGJhdGNoSWRzLCBcImJhdGNoSWRzXCIpO1xuICAgIGJhdGNoSWRzVmVydGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdHlwZWRBcnJheTogYmF0Y2hJZHMsXG4gICAgICB1c2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXG4gICAgfSk7XG4gICAgcG9pbnRDbG91ZC5fZ2VvbWV0cnlCeXRlTGVuZ3RoICs9IGJhdGNoSWRzVmVydGV4QnVmZmVyLnNpemVJbkJ5dGVzO1xuICB9XG5cbiAgdmFyIGF0dHJpYnV0ZXMgPSBbXTtcblxuICBpZiAoaXNRdWFudGl6ZWQpIHtcbiAgICBjb21wb25lbnREYXRhdHlwZSA9IENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX1NIT1JUO1xuICB9IGVsc2UgaWYgKGlzUXVhbnRpemVkRHJhY28pIHtcbiAgICBjb21wb25lbnREYXRhdHlwZSA9XG4gICAgICBxdWFudGl6ZWRSYW5nZSA8PSAyNTVcbiAgICAgICAgPyBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFXG4gICAgICAgIDogQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfU0hPUlQ7XG4gIH0gZWxzZSB7XG4gICAgY29tcG9uZW50RGF0YXR5cGUgPSBDb21wb25lbnREYXRhdHlwZS5GTE9BVDtcbiAgfVxuXG4gIGF0dHJpYnV0ZXMucHVzaCh7XG4gICAgaW5kZXg6IHBvc2l0aW9uTG9jYXRpb24sXG4gICAgdmVydGV4QnVmZmVyOiBwb3NpdGlvbnNWZXJ0ZXhCdWZmZXIsXG4gICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICBjb21wb25lbnREYXRhdHlwZTogY29tcG9uZW50RGF0YXR5cGUsXG4gICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICBvZmZzZXRJbkJ5dGVzOiAwLFxuICAgIHN0cmlkZUluQnl0ZXM6IDAsXG4gIH0pO1xuXG4gIGlmIChwb2ludENsb3VkLl9jdWxsKSB7XG4gICAgaWYgKGlzUXVhbnRpemVkIHx8IGlzUXVhbnRpemVkRHJhY28pIHtcbiAgICAgIHBvaW50Q2xvdWQuX2JvdW5kaW5nU3BoZXJlID0gQm91bmRpbmdTcGhlcmUuZnJvbUNvcm5lclBvaW50cyhcbiAgICAgICAgQ2FydGVzaWFuMy5aRVJPLFxuICAgICAgICBwb2ludENsb3VkLl9xdWFudGl6ZWRWb2x1bWVTY2FsZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9pbnRDbG91ZC5fYm91bmRpbmdTcGhlcmUgPSBjb21wdXRlQXBwcm94aW1hdGVCb3VuZGluZ1NwaGVyZUZyb21Qb3NpdGlvbnMoXG4gICAgICAgIHBvc2l0aW9uc1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzQ29sb3JzKSB7XG4gICAgaWYgKGlzUkdCNTY1KSB7XG4gICAgICBhdHRyaWJ1dGVzLnB1c2goe1xuICAgICAgICBpbmRleDogY29sb3JMb2NhdGlvbixcbiAgICAgICAgdmVydGV4QnVmZmVyOiBjb2xvcnNWZXJ0ZXhCdWZmZXIsXG4gICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDEsXG4gICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9TSE9SVCxcbiAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICAgICAgb2Zmc2V0SW5CeXRlczogMCxcbiAgICAgICAgc3RyaWRlSW5CeXRlczogMCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29sb3JDb21wb25lbnRzUGVyQXR0cmlidXRlID0gaXNUcmFuc2x1Y2VudCA/IDQgOiAzO1xuICAgICAgYXR0cmlidXRlcy5wdXNoKHtcbiAgICAgICAgaW5kZXg6IGNvbG9yTG9jYXRpb24sXG4gICAgICAgIHZlcnRleEJ1ZmZlcjogY29sb3JzVmVydGV4QnVmZmVyLFxuICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiBjb2xvckNvbXBvbmVudHNQZXJBdHRyaWJ1dGUsXG4gICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFLFxuICAgICAgICBub3JtYWxpemU6IHRydWUsXG4gICAgICAgIG9mZnNldEluQnl0ZXM6IDAsXG4gICAgICAgIHN0cmlkZUluQnl0ZXM6IDAsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzTm9ybWFscykge1xuICAgIGlmIChpc09jdEVuY29kZWQxNlApIHtcbiAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGUgPSAyO1xuICAgICAgY29tcG9uZW50RGF0YXR5cGUgPSBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFO1xuICAgIH0gZWxzZSBpZiAoaXNPY3RFbmNvZGVkRHJhY28pIHtcbiAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGUgPSAyO1xuICAgICAgY29tcG9uZW50RGF0YXR5cGUgPVxuICAgICAgICBvY3RFbmNvZGVkUmFuZ2UgPD0gMjU1XG4gICAgICAgICAgPyBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFXG4gICAgICAgICAgOiBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9TSE9SVDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZSA9IDM7XG4gICAgICBjb21wb25lbnREYXRhdHlwZSA9IENvbXBvbmVudERhdGF0eXBlLkZMT0FUO1xuICAgIH1cbiAgICBhdHRyaWJ1dGVzLnB1c2goe1xuICAgICAgaW5kZXg6IG5vcm1hbExvY2F0aW9uLFxuICAgICAgdmVydGV4QnVmZmVyOiBub3JtYWxzVmVydGV4QnVmZmVyLFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogY29tcG9uZW50c1BlckF0dHJpYnV0ZSxcbiAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBjb21wb25lbnREYXRhdHlwZSxcbiAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXG4gICAgICBvZmZzZXRJbkJ5dGVzOiAwLFxuICAgICAgc3RyaWRlSW5CeXRlczogMCxcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChoYXNCYXRjaElkcykge1xuICAgIGF0dHJpYnV0ZXMucHVzaCh7XG4gICAgICBpbmRleDogYmF0Y2hJZExvY2F0aW9uLFxuICAgICAgdmVydGV4QnVmZmVyOiBiYXRjaElkc1ZlcnRleEJ1ZmZlcixcbiAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDEsXG4gICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuZnJvbVR5cGVkQXJyYXkoYmF0Y2hJZHMpLFxuICAgICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICAgIG9mZnNldEluQnl0ZXM6IDAsXG4gICAgICBzdHJpZGVJbkJ5dGVzOiAwLFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGhhc1N0eWxlYWJsZVByb3BlcnRpZXMpIHtcbiAgICBhdHRyaWJ1dGVzID0gYXR0cmlidXRlcy5jb25jYXQoc3R5bGVhYmxlVmVydGV4QXR0cmlidXRlcyk7XG4gIH1cblxuICB2YXIgdmVydGV4QXJyYXkgPSBuZXcgVmVydGV4QXJyYXkoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgfSk7XG5cbiAgdmFyIG9wYXF1ZVJlbmRlclN0YXRlID0ge1xuICAgIGRlcHRoVGVzdDoge1xuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICB9LFxuICB9O1xuXG4gIHZhciB0cmFuc2x1Y2VudFJlbmRlclN0YXRlID0ge1xuICAgIGRlcHRoVGVzdDoge1xuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGRlcHRoTWFzazogZmFsc2UsXG4gICAgYmxlbmRpbmc6IEJsZW5kaW5nU3RhdGUuQUxQSEFfQkxFTkQsXG4gIH07XG5cbiAgaWYgKHBvaW50Q2xvdWQuX29wYXF1ZVBhc3MgPT09IFBhc3MuQ0VTSVVNXzNEX1RJTEUpIHtcbiAgICBvcGFxdWVSZW5kZXJTdGF0ZS5zdGVuY2lsVGVzdCA9IFN0ZW5jaWxDb25zdGFudHMuc2V0Q2VzaXVtM0RUaWxlQml0KCk7XG4gICAgb3BhcXVlUmVuZGVyU3RhdGUuc3RlbmNpbE1hc2sgPSBTdGVuY2lsQ29uc3RhbnRzLkNFU0lVTV8zRF9USUxFX01BU0s7XG4gICAgdHJhbnNsdWNlbnRSZW5kZXJTdGF0ZS5zdGVuY2lsVGVzdCA9IFN0ZW5jaWxDb25zdGFudHMuc2V0Q2VzaXVtM0RUaWxlQml0KCk7XG4gICAgdHJhbnNsdWNlbnRSZW5kZXJTdGF0ZS5zdGVuY2lsTWFzayA9IFN0ZW5jaWxDb25zdGFudHMuQ0VTSVVNXzNEX1RJTEVfTUFTSztcbiAgfVxuXG4gIHBvaW50Q2xvdWQuX29wYXF1ZVJlbmRlclN0YXRlID0gUmVuZGVyU3RhdGUuZnJvbUNhY2hlKG9wYXF1ZVJlbmRlclN0YXRlKTtcbiAgcG9pbnRDbG91ZC5fdHJhbnNsdWNlbnRSZW5kZXJTdGF0ZSA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShcbiAgICB0cmFuc2x1Y2VudFJlbmRlclN0YXRlXG4gICk7XG5cbiAgcG9pbnRDbG91ZC5fZHJhd0NvbW1hbmQgPSBuZXcgRHJhd0NvbW1hbmQoe1xuICAgIGJvdW5kaW5nVm9sdW1lOiBuZXcgQm91bmRpbmdTcGhlcmUoKSxcbiAgICBjdWxsOiBwb2ludENsb3VkLl9jdWxsLFxuICAgIG1vZGVsTWF0cml4OiBuZXcgTWF0cml4NCgpLFxuICAgIHByaW1pdGl2ZVR5cGU6IFByaW1pdGl2ZVR5cGUuUE9JTlRTLFxuICAgIHZlcnRleEFycmF5OiB2ZXJ0ZXhBcnJheSxcbiAgICBjb3VudDogcG9pbnRzTGVuZ3RoLFxuICAgIHNoYWRlclByb2dyYW06IHVuZGVmaW5lZCwgLy8gVXBkYXRlZCBpbiBjcmVhdGVTaGFkZXJzXG4gICAgdW5pZm9ybU1hcDogdW5kZWZpbmVkLCAvLyBVcGRhdGVkIGluIGNyZWF0ZVNoYWRlcnNcbiAgICByZW5kZXJTdGF0ZTogaXNUcmFuc2x1Y2VudFxuICAgICAgPyBwb2ludENsb3VkLl90cmFuc2x1Y2VudFJlbmRlclN0YXRlXG4gICAgICA6IHBvaW50Q2xvdWQuX29wYXF1ZVJlbmRlclN0YXRlLFxuICAgIHBhc3M6IGlzVHJhbnNsdWNlbnQgPyBQYXNzLlRSQU5TTFVDRU5UIDogcG9pbnRDbG91ZC5fb3BhcXVlUGFzcyxcbiAgICBvd25lcjogcG9pbnRDbG91ZCxcbiAgICBjYXN0U2hhZG93czogZmFsc2UsXG4gICAgcmVjZWl2ZVNoYWRvd3M6IGZhbHNlLFxuICAgIHBpY2tJZDogcG9pbnRDbG91ZC5fcGlja0lkTG9hZGVkKCksXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVbmlmb3JtTWFwKHBvaW50Q2xvdWQsIGZyYW1lU3RhdGUpIHtcbiAgdmFyIGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XG4gIHZhciBpc1F1YW50aXplZCA9IHBvaW50Q2xvdWQuX2lzUXVhbnRpemVkO1xuICB2YXIgaXNRdWFudGl6ZWREcmFjbyA9IHBvaW50Q2xvdWQuX2lzUXVhbnRpemVkRHJhY287XG4gIHZhciBpc09jdEVuY29kZWREcmFjbyA9IHBvaW50Q2xvdWQuX2lzT2N0RW5jb2RlZERyYWNvO1xuXG4gIHZhciB1bmlmb3JtTWFwID0ge1xuICAgIHVfcG9pbnRTaXplQW5kVGltZUFuZEdlb21ldHJpY0Vycm9yQW5kRGVwdGhNdWx0aXBsaWVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2NyYXRjaCA9IHNjcmF0Y2hQb2ludFNpemVBbmRUaW1lQW5kR2VvbWV0cmljRXJyb3JBbmREZXB0aE11bHRpcGxpZXI7XG4gICAgICBzY3JhdGNoLnggPSBwb2ludENsb3VkLl9hdHRlbnVhdGlvblxuICAgICAgICA/IHBvaW50Q2xvdWQubWF4aW11bUF0dGVudWF0aW9uXG4gICAgICAgIDogcG9pbnRDbG91ZC5fcG9pbnRTaXplO1xuICAgICAgc2NyYXRjaC54ICo9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcblxuICAgICAgc2NyYXRjaC55ID0gcG9pbnRDbG91ZC50aW1lO1xuXG4gICAgICBpZiAocG9pbnRDbG91ZC5fYXR0ZW51YXRpb24pIHtcbiAgICAgICAgdmFyIGZydXN0dW0gPSBmcmFtZVN0YXRlLmNhbWVyYS5mcnVzdHVtO1xuICAgICAgICB2YXIgZGVwdGhNdWx0aXBsaWVyO1xuICAgICAgICAvLyBBdHRlbnVhdGlvbiBpcyBtYXhpbXVtQXR0ZW51YXRpb24gaW4gMkQvb3J0aG9cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZyYW1lU3RhdGUubW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHxcbiAgICAgICAgICBmcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljRnJ1c3R1bVxuICAgICAgICApIHtcbiAgICAgICAgICBkZXB0aE11bHRpcGxpZXIgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVwdGhNdWx0aXBsaWVyID1cbiAgICAgICAgICAgIGNvbnRleHQuZHJhd2luZ0J1ZmZlckhlaWdodCAvXG4gICAgICAgICAgICBmcmFtZVN0YXRlLmNhbWVyYS5mcnVzdHVtLnNzZURlbm9taW5hdG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NyYXRjaC56ID0gcG9pbnRDbG91ZC5nZW9tZXRyaWNFcnJvciAqIHBvaW50Q2xvdWQuZ2VvbWV0cmljRXJyb3JTY2FsZTtcbiAgICAgICAgc2NyYXRjaC53ID0gZGVwdGhNdWx0aXBsaWVyO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2NyYXRjaDtcbiAgICB9LFxuICAgIHVfaGlnaGxpZ2h0Q29sb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBwb2ludENsb3VkLl9oaWdobGlnaHRDb2xvcjtcbiAgICB9LFxuICAgIHVfY29uc3RhbnRDb2xvcjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHBvaW50Q2xvdWQuX2NvbnN0YW50Q29sb3I7XG4gICAgfSxcbiAgICB1X2NsaXBwaW5nUGxhbmVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2xpcHBpbmdQbGFuZXMgPSBwb2ludENsb3VkLmNsaXBwaW5nUGxhbmVzO1xuICAgICAgdmFyIGlzQ2xpcHBlZCA9IHBvaW50Q2xvdWQuaXNDbGlwcGVkO1xuICAgICAgcmV0dXJuIGlzQ2xpcHBlZCA/IGNsaXBwaW5nUGxhbmVzLnRleHR1cmUgOiBjb250ZXh0LmRlZmF1bHRUZXh0dXJlO1xuICAgIH0sXG4gICAgdV9jbGlwcGluZ1BsYW5lc0VkZ2VTdHlsZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNsaXBwaW5nUGxhbmVzID0gcG9pbnRDbG91ZC5jbGlwcGluZ1BsYW5lcztcbiAgICAgIGlmICghZGVmaW5lZChjbGlwcGluZ1BsYW5lcykpIHtcbiAgICAgICAgcmV0dXJuIENvbG9yLlRSQU5TUEFSRU5UO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3R5bGUgPSBDb2xvci5jbG9uZShjbGlwcGluZ1BsYW5lcy5lZGdlQ29sb3IsIHNjcmF0Y2hDb2xvcik7XG4gICAgICBzdHlsZS5hbHBoYSA9IGNsaXBwaW5nUGxhbmVzLmVkZ2VXaWR0aDtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9LFxuICAgIHVfY2xpcHBpbmdQbGFuZXNNYXRyaXg6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjbGlwcGluZ1BsYW5lcyA9IHBvaW50Q2xvdWQuY2xpcHBpbmdQbGFuZXM7XG4gICAgICBpZiAoIWRlZmluZWQoY2xpcHBpbmdQbGFuZXMpKSB7XG4gICAgICAgIHJldHVybiBNYXRyaXg0LklERU5USVRZO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xpcHBpbmdQbGFuZXNPcmlnaW5NYXRyaXggPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHBvaW50Q2xvdWQuY2xpcHBpbmdQbGFuZXNPcmlnaW5NYXRyaXgsXG4gICAgICAgIHBvaW50Q2xvdWQuX21vZGVsTWF0cml4XG4gICAgICApO1xuICAgICAgTWF0cml4NC5tdWx0aXBseShcbiAgICAgICAgY29udGV4dC51bmlmb3JtU3RhdGUudmlldzNELFxuICAgICAgICBjbGlwcGluZ1BsYW5lc09yaWdpbk1hdHJpeCxcbiAgICAgICAgc2NyYXRjaENsaXBwaW5nUGxhbmVzTWF0cml4XG4gICAgICApO1xuICAgICAgdmFyIHRyYW5zZm9ybSA9IE1hdHJpeDQubXVsdGlwbHkoXG4gICAgICAgIHNjcmF0Y2hDbGlwcGluZ1BsYW5lc01hdHJpeCxcbiAgICAgICAgY2xpcHBpbmdQbGFuZXMubW9kZWxNYXRyaXgsXG4gICAgICAgIHNjcmF0Y2hDbGlwcGluZ1BsYW5lc01hdHJpeFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIE1hdHJpeDQuaW52ZXJzZVRyYW5zcG9zZShcbiAgICAgICAgdHJhbnNmb3JtLFxuICAgICAgICBzY3JhdGNoSW52ZXJzZVRyYW5zcG9zZUNsaXBwaW5nUGxhbmVzTWF0cml4XG4gICAgICApO1xuICAgIH0sXG4gIH07XG5cbiAgaWYgKGlzUXVhbnRpemVkIHx8IGlzUXVhbnRpemVkRHJhY28gfHwgaXNPY3RFbmNvZGVkRHJhY28pIHtcbiAgICB1bmlmb3JtTWFwID0gY29tYmluZSh1bmlmb3JtTWFwLCB7XG4gICAgICB1X3F1YW50aXplZFZvbHVtZVNjYWxlQW5kT2N0RW5jb2RlZFJhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzY3JhdGNoID0gc2NyYXRjaFF1YW50aXplZFZvbHVtZVNjYWxlQW5kT2N0RW5jb2RlZFJhbmdlO1xuICAgICAgICBpZiAoZGVmaW5lZChwb2ludENsb3VkLl9xdWFudGl6ZWRWb2x1bWVTY2FsZSkpIHtcbiAgICAgICAgICB2YXIgc2NhbGUgPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgICAgICAgcG9pbnRDbG91ZC5fcXVhbnRpemVkVm9sdW1lU2NhbGUsXG4gICAgICAgICAgICBzY3JhdGNoXG4gICAgICAgICAgKTtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLmRpdmlkZUJ5U2NhbGFyKHNjYWxlLCBwb2ludENsb3VkLl9xdWFudGl6ZWRSYW5nZSwgc2NyYXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgc2NyYXRjaC53ID0gcG9pbnRDbG91ZC5fb2N0RW5jb2RlZFJhbmdlO1xuICAgICAgICByZXR1cm4gc2NyYXRjaDtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICBpZiAoZGVmaW5lZChwb2ludENsb3VkLl91bmlmb3JtTWFwTG9hZGVkKSkge1xuICAgIHVuaWZvcm1NYXAgPSBwb2ludENsb3VkLl91bmlmb3JtTWFwTG9hZGVkKHVuaWZvcm1NYXApO1xuICB9XG5cbiAgcG9pbnRDbG91ZC5fZHJhd0NvbW1hbmQudW5pZm9ybU1hcCA9IHVuaWZvcm1NYXA7XG59XG5cbmZ1bmN0aW9uIGdldFN0eWxlYWJsZVByb3BlcnR5SWRzKHNvdXJjZSwgcHJvcGVydHlJZHMpIHtcbiAgLy8gR2V0IGFsbCB0aGUgcHJvcGVydHkgSURzIHVzZWQgYnkgdGhpcyBzdHlsZVxuICB2YXIgcmVnZXggPSAvY3ptXzNkdGlsZXNfcHJvcGVydHlfKFxcZCspL2c7XG4gIHZhciBtYXRjaGVzID0gcmVnZXguZXhlYyhzb3VyY2UpO1xuICB3aGlsZSAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIHZhciBpZCA9IHBhcnNlSW50KG1hdGNoZXNbMV0pO1xuICAgIGlmIChwcm9wZXJ0eUlkcy5pbmRleE9mKGlkKSA9PT0gLTEpIHtcbiAgICAgIHByb3BlcnR5SWRzLnB1c2goaWQpO1xuICAgIH1cbiAgICBtYXRjaGVzID0gcmVnZXguZXhlYyhzb3VyY2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEJ1aWx0aW5Qcm9wZXJ0eU5hbWVzKHNvdXJjZSwgcHJvcGVydHlOYW1lcykge1xuICAvLyBHZXQgYWxsIHRoZSBidWlsdGluIHByb3BlcnR5IG5hbWVzIHVzZWQgYnkgdGhpcyBzdHlsZSwgaWdub3JpbmcgdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZVxuICBzb3VyY2UgPSBzb3VyY2Uuc2xpY2Uoc291cmNlLmluZGV4T2YoXCJcXG5cIikpO1xuICB2YXIgcmVnZXggPSAvY3ptXzNkdGlsZXNfYnVpbHRpbl9wcm9wZXJ0eV8oXFx3KykvZztcbiAgdmFyIG1hdGNoZXMgPSByZWdleC5leGVjKHNvdXJjZSk7XG4gIHdoaWxlIChtYXRjaGVzICE9PSBudWxsKSB7XG4gICAgdmFyIG5hbWUgPSBtYXRjaGVzWzFdO1xuICAgIGlmIChwcm9wZXJ0eU5hbWVzLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XG4gICAgICBwcm9wZXJ0eU5hbWVzLnB1c2gobmFtZSk7XG4gICAgfVxuICAgIG1hdGNoZXMgPSByZWdleC5leGVjKHNvdXJjZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VmVydGV4QXR0cmlidXRlKHZlcnRleEFycmF5LCBpbmRleCkge1xuICB2YXIgbnVtYmVyT2ZBdHRyaWJ1dGVzID0gdmVydGV4QXJyYXkubnVtYmVyT2ZBdHRyaWJ1dGVzO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mQXR0cmlidXRlczsgKytpKSB7XG4gICAgdmFyIGF0dHJpYnV0ZSA9IHZlcnRleEFycmF5LmdldEF0dHJpYnV0ZShpKTtcbiAgICBpZiAoYXR0cmlidXRlLmluZGV4ID09PSBpbmRleCkge1xuICAgICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGJ1aWx0aW5WYXJpYWJsZVN1YnN0aXR1dGlvbk1hcCA9IHtcbiAgUE9TSVRJT046IFwiY3ptXzNkdGlsZXNfYnVpbHRpbl9wcm9wZXJ0eV9QT1NJVElPTlwiLFxuICBQT1NJVElPTl9BQlNPTFVURTogXCJjem1fM2R0aWxlc19idWlsdGluX3Byb3BlcnR5X1BPU0lUSU9OX0FCU09MVVRFXCIsXG4gIENPTE9SOiBcImN6bV8zZHRpbGVzX2J1aWx0aW5fcHJvcGVydHlfQ09MT1JcIixcbiAgTk9STUFMOiBcImN6bV8zZHRpbGVzX2J1aWx0aW5fcHJvcGVydHlfTk9STUFMXCIsXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVTaGFkZXJzKHBvaW50Q2xvdWQsIGZyYW1lU3RhdGUsIHN0eWxlKSB7XG4gIHZhciBpO1xuICB2YXIgbmFtZTtcbiAgdmFyIGF0dHJpYnV0ZTtcblxuICB2YXIgY29udGV4dCA9IGZyYW1lU3RhdGUuY29udGV4dDtcbiAgdmFyIGhhc1N0eWxlID0gZGVmaW5lZChzdHlsZSk7XG4gIHZhciBpc1F1YW50aXplZCA9IHBvaW50Q2xvdWQuX2lzUXVhbnRpemVkO1xuICB2YXIgaXNRdWFudGl6ZWREcmFjbyA9IHBvaW50Q2xvdWQuX2lzUXVhbnRpemVkRHJhY287XG4gIHZhciBpc09jdEVuY29kZWQxNlAgPSBwb2ludENsb3VkLl9pc09jdEVuY29kZWQxNlA7XG4gIHZhciBpc09jdEVuY29kZWREcmFjbyA9IHBvaW50Q2xvdWQuX2lzT2N0RW5jb2RlZERyYWNvO1xuICB2YXIgaXNSR0I1NjUgPSBwb2ludENsb3VkLl9pc1JHQjU2NTtcbiAgdmFyIGlzVHJhbnNsdWNlbnQgPSBwb2ludENsb3VkLl9pc1RyYW5zbHVjZW50O1xuICB2YXIgaGFzQ29sb3JzID0gcG9pbnRDbG91ZC5faGFzQ29sb3JzO1xuICB2YXIgaGFzTm9ybWFscyA9IHBvaW50Q2xvdWQuX2hhc05vcm1hbHM7XG4gIHZhciBoYXNCYXRjaElkcyA9IHBvaW50Q2xvdWQuX2hhc0JhdGNoSWRzO1xuICB2YXIgYmFja0ZhY2VDdWxsaW5nID0gcG9pbnRDbG91ZC5fYmFja0ZhY2VDdWxsaW5nO1xuICB2YXIgbm9ybWFsU2hhZGluZyA9IHBvaW50Q2xvdWQuX25vcm1hbFNoYWRpbmc7XG4gIHZhciB2ZXJ0ZXhBcnJheSA9IHBvaW50Q2xvdWQuX2RyYXdDb21tYW5kLnZlcnRleEFycmF5O1xuICB2YXIgY2xpcHBpbmdQbGFuZXMgPSBwb2ludENsb3VkLmNsaXBwaW5nUGxhbmVzO1xuICB2YXIgYXR0ZW51YXRpb24gPSBwb2ludENsb3VkLl9hdHRlbnVhdGlvbjtcblxuICB2YXIgY29sb3JTdHlsZUZ1bmN0aW9uO1xuICB2YXIgc2hvd1N0eWxlRnVuY3Rpb247XG4gIHZhciBwb2ludFNpemVTdHlsZUZ1bmN0aW9uO1xuICB2YXIgc3R5bGVUcmFuc2x1Y2VudCA9IGlzVHJhbnNsdWNlbnQ7XG5cbiAgdmFyIHZhcmlhYmxlU3Vic3RpdHV0aW9uTWFwID0gY2xvbmUoYnVpbHRpblZhcmlhYmxlU3Vic3RpdHV0aW9uTWFwKTtcbiAgdmFyIHByb3BlcnR5SWRUb0F0dHJpYnV0ZU1hcCA9IHt9O1xuICB2YXIgc3R5bGVhYmxlU2hhZGVyQXR0cmlidXRlcyA9IHBvaW50Q2xvdWQuX3N0eWxlYWJsZVNoYWRlckF0dHJpYnV0ZXM7XG4gIGZvciAobmFtZSBpbiBzdHlsZWFibGVTaGFkZXJBdHRyaWJ1dGVzKSB7XG4gICAgaWYgKHN0eWxlYWJsZVNoYWRlckF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIGF0dHJpYnV0ZSA9IHN0eWxlYWJsZVNoYWRlckF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICB2YXJpYWJsZVN1YnN0aXR1dGlvbk1hcFtuYW1lXSA9XG4gICAgICAgIFwiY3ptXzNkdGlsZXNfcHJvcGVydHlfXCIgKyBhdHRyaWJ1dGUubG9jYXRpb247XG4gICAgICBwcm9wZXJ0eUlkVG9BdHRyaWJ1dGVNYXBbYXR0cmlidXRlLmxvY2F0aW9uXSA9IGF0dHJpYnV0ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzU3R5bGUpIHtcbiAgICB2YXIgc2hhZGVyU3RhdGUgPSB7XG4gICAgICB0cmFuc2x1Y2VudDogZmFsc2UsXG4gICAgfTtcbiAgICB2YXIgcGFyYW1ldGVyTGlzdCA9XG4gICAgICBcIihcIiArXG4gICAgICBcInZlYzMgY3ptXzNkdGlsZXNfYnVpbHRpbl9wcm9wZXJ0eV9QT1NJVElPTiwgXCIgK1xuICAgICAgXCJ2ZWMzIGN6bV8zZHRpbGVzX2J1aWx0aW5fcHJvcGVydHlfUE9TSVRJT05fQUJTT0xVVEUsIFwiICtcbiAgICAgIFwidmVjNCBjem1fM2R0aWxlc19idWlsdGluX3Byb3BlcnR5X0NPTE9SLCBcIiArXG4gICAgICBcInZlYzMgY3ptXzNkdGlsZXNfYnVpbHRpbl9wcm9wZXJ0eV9OT1JNQUxcIiArXG4gICAgICBcIilcIjtcbiAgICBjb2xvclN0eWxlRnVuY3Rpb24gPSBzdHlsZS5nZXRDb2xvclNoYWRlckZ1bmN0aW9uKFxuICAgICAgXCJnZXRDb2xvckZyb21TdHlsZVwiICsgcGFyYW1ldGVyTGlzdCxcbiAgICAgIHZhcmlhYmxlU3Vic3RpdHV0aW9uTWFwLFxuICAgICAgc2hhZGVyU3RhdGVcbiAgICApO1xuICAgIHNob3dTdHlsZUZ1bmN0aW9uID0gc3R5bGUuZ2V0U2hvd1NoYWRlckZ1bmN0aW9uKFxuICAgICAgXCJnZXRTaG93RnJvbVN0eWxlXCIgKyBwYXJhbWV0ZXJMaXN0LFxuICAgICAgdmFyaWFibGVTdWJzdGl0dXRpb25NYXAsXG4gICAgICBzaGFkZXJTdGF0ZVxuICAgICk7XG4gICAgcG9pbnRTaXplU3R5bGVGdW5jdGlvbiA9IHN0eWxlLmdldFBvaW50U2l6ZVNoYWRlckZ1bmN0aW9uKFxuICAgICAgXCJnZXRQb2ludFNpemVGcm9tU3R5bGVcIiArIHBhcmFtZXRlckxpc3QsXG4gICAgICB2YXJpYWJsZVN1YnN0aXR1dGlvbk1hcCxcbiAgICAgIHNoYWRlclN0YXRlXG4gICAgKTtcbiAgICBpZiAoZGVmaW5lZChjb2xvclN0eWxlRnVuY3Rpb24pICYmIHNoYWRlclN0YXRlLnRyYW5zbHVjZW50KSB7XG4gICAgICBzdHlsZVRyYW5zbHVjZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwb2ludENsb3VkLl9zdHlsZVRyYW5zbHVjZW50ID0gc3R5bGVUcmFuc2x1Y2VudDtcblxuICB2YXIgaGFzQ29sb3JTdHlsZSA9IGRlZmluZWQoY29sb3JTdHlsZUZ1bmN0aW9uKTtcbiAgdmFyIGhhc1Nob3dTdHlsZSA9IGRlZmluZWQoc2hvd1N0eWxlRnVuY3Rpb24pO1xuICB2YXIgaGFzUG9pbnRTaXplU3R5bGUgPSBkZWZpbmVkKHBvaW50U2l6ZVN0eWxlRnVuY3Rpb24pO1xuICB2YXIgaGFzQ2xpcHBlZENvbnRlbnQgPSBwb2ludENsb3VkLmlzQ2xpcHBlZDtcblxuICAvLyBHZXQgdGhlIHByb3BlcnRpZXMgaW4gdXNlIGJ5IHRoZSBzdHlsZVxuICB2YXIgc3R5bGVhYmxlUHJvcGVydHlJZHMgPSBbXTtcbiAgdmFyIGJ1aWx0aW5Qcm9wZXJ0eU5hbWVzID0gW107XG5cbiAgaWYgKGhhc0NvbG9yU3R5bGUpIHtcbiAgICBnZXRTdHlsZWFibGVQcm9wZXJ0eUlkcyhjb2xvclN0eWxlRnVuY3Rpb24sIHN0eWxlYWJsZVByb3BlcnR5SWRzKTtcbiAgICBnZXRCdWlsdGluUHJvcGVydHlOYW1lcyhjb2xvclN0eWxlRnVuY3Rpb24sIGJ1aWx0aW5Qcm9wZXJ0eU5hbWVzKTtcbiAgfVxuICBpZiAoaGFzU2hvd1N0eWxlKSB7XG4gICAgZ2V0U3R5bGVhYmxlUHJvcGVydHlJZHMoc2hvd1N0eWxlRnVuY3Rpb24sIHN0eWxlYWJsZVByb3BlcnR5SWRzKTtcbiAgICBnZXRCdWlsdGluUHJvcGVydHlOYW1lcyhzaG93U3R5bGVGdW5jdGlvbiwgYnVpbHRpblByb3BlcnR5TmFtZXMpO1xuICB9XG4gIGlmIChoYXNQb2ludFNpemVTdHlsZSkge1xuICAgIGdldFN0eWxlYWJsZVByb3BlcnR5SWRzKHBvaW50U2l6ZVN0eWxlRnVuY3Rpb24sIHN0eWxlYWJsZVByb3BlcnR5SWRzKTtcbiAgICBnZXRCdWlsdGluUHJvcGVydHlOYW1lcyhwb2ludFNpemVTdHlsZUZ1bmN0aW9uLCBidWlsdGluUHJvcGVydHlOYW1lcyk7XG4gIH1cblxuICB2YXIgdXNlc0NvbG9yU2VtYW50aWMgPSBidWlsdGluUHJvcGVydHlOYW1lcy5pbmRleE9mKFwiQ09MT1JcIikgPj0gMDtcbiAgdmFyIHVzZXNOb3JtYWxTZW1hbnRpYyA9IGJ1aWx0aW5Qcm9wZXJ0eU5hbWVzLmluZGV4T2YoXCJOT1JNQUxcIikgPj0gMDtcblxuICBpZiAodXNlc05vcm1hbFNlbWFudGljICYmICFoYXNOb3JtYWxzKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiU3R5bGUgcmVmZXJlbmNlcyB0aGUgTk9STUFMIHNlbWFudGljIGJ1dCB0aGUgcG9pbnQgY2xvdWQgZG9lcyBub3QgaGF2ZSBub3JtYWxzXCJcbiAgICApO1xuICB9XG5cbiAgLy8gRGlzYWJsZSB2ZXJ0ZXggYXR0cmlidXRlcyB0aGF0IGFyZW4ndCB1c2VkIGluIHRoZSBzdHlsZSwgZW5hYmxlIGF0dHJpYnV0ZXMgdGhhdCBhcmVcbiAgZm9yIChuYW1lIGluIHN0eWxlYWJsZVNoYWRlckF0dHJpYnV0ZXMpIHtcbiAgICBpZiAoc3R5bGVhYmxlU2hhZGVyQXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgYXR0cmlidXRlID0gc3R5bGVhYmxlU2hhZGVyQXR0cmlidXRlc1tuYW1lXTtcbiAgICAgIHZhciBlbmFibGVkID0gc3R5bGVhYmxlUHJvcGVydHlJZHMuaW5kZXhPZihhdHRyaWJ1dGUubG9jYXRpb24pID49IDA7XG4gICAgICB2YXIgdmVydGV4QXR0cmlidXRlID0gZ2V0VmVydGV4QXR0cmlidXRlKHZlcnRleEFycmF5LCBhdHRyaWJ1dGUubG9jYXRpb24pO1xuICAgICAgdmVydGV4QXR0cmlidXRlLmVuYWJsZWQgPSBlbmFibGVkO1xuICAgIH1cbiAgfVxuXG4gIHZhciB1c2VzQ29sb3JzID0gaGFzQ29sb3JzICYmICghaGFzQ29sb3JTdHlsZSB8fCB1c2VzQ29sb3JTZW1hbnRpYyk7XG4gIGlmIChoYXNDb2xvcnMpIHtcbiAgICAvLyBEaXNhYmxlIHRoZSBjb2xvciB2ZXJ0ZXggYXR0cmlidXRlIGlmIHRoZSBjb2xvciBzdHlsZSBkb2VzIG5vdCByZWZlcmVuY2UgdGhlIGNvbG9yIHNlbWFudGljXG4gICAgdmFyIGNvbG9yVmVydGV4QXR0cmlidXRlID0gZ2V0VmVydGV4QXR0cmlidXRlKHZlcnRleEFycmF5LCBjb2xvckxvY2F0aW9uKTtcbiAgICBjb2xvclZlcnRleEF0dHJpYnV0ZS5lbmFibGVkID0gdXNlc0NvbG9ycztcbiAgfVxuXG4gIHZhciB1c2VzTm9ybWFscyA9XG4gICAgaGFzTm9ybWFscyAmJiAobm9ybWFsU2hhZGluZyB8fCBiYWNrRmFjZUN1bGxpbmcgfHwgdXNlc05vcm1hbFNlbWFudGljKTtcbiAgaWYgKGhhc05vcm1hbHMpIHtcbiAgICAvLyBEaXNhYmxlIHRoZSBub3JtYWwgdmVydGV4IGF0dHJpYnV0ZSBpZiBub3JtYWxzIGFyZSBub3QgdXNlZFxuICAgIHZhciBub3JtYWxWZXJ0ZXhBdHRyaWJ1dGUgPSBnZXRWZXJ0ZXhBdHRyaWJ1dGUodmVydGV4QXJyYXksIG5vcm1hbExvY2F0aW9uKTtcbiAgICBub3JtYWxWZXJ0ZXhBdHRyaWJ1dGUuZW5hYmxlZCA9IHVzZXNOb3JtYWxzO1xuICB9XG5cbiAgdmFyIGF0dHJpYnV0ZUxvY2F0aW9ucyA9IHtcbiAgICBhX3Bvc2l0aW9uOiBwb3NpdGlvbkxvY2F0aW9uLFxuICB9O1xuICBpZiAodXNlc0NvbG9ycykge1xuICAgIGF0dHJpYnV0ZUxvY2F0aW9ucy5hX2NvbG9yID0gY29sb3JMb2NhdGlvbjtcbiAgfVxuICBpZiAodXNlc05vcm1hbHMpIHtcbiAgICBhdHRyaWJ1dGVMb2NhdGlvbnMuYV9ub3JtYWwgPSBub3JtYWxMb2NhdGlvbjtcbiAgfVxuICBpZiAoaGFzQmF0Y2hJZHMpIHtcbiAgICBhdHRyaWJ1dGVMb2NhdGlvbnMuYV9iYXRjaElkID0gYmF0Y2hJZExvY2F0aW9uO1xuICB9XG5cbiAgdmFyIGF0dHJpYnV0ZURlY2xhcmF0aW9ucyA9IFwiXCI7XG5cbiAgdmFyIGxlbmd0aCA9IHN0eWxlYWJsZVByb3BlcnR5SWRzLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHByb3BlcnR5SWQgPSBzdHlsZWFibGVQcm9wZXJ0eUlkc1tpXTtcbiAgICBhdHRyaWJ1dGUgPSBwcm9wZXJ0eUlkVG9BdHRyaWJ1dGVNYXBbcHJvcGVydHlJZF07XG4gICAgdmFyIGNvbXBvbmVudENvdW50ID0gYXR0cmlidXRlLmNvbXBvbmVudENvdW50O1xuICAgIHZhciBhdHRyaWJ1dGVOYW1lID0gXCJjem1fM2R0aWxlc19wcm9wZXJ0eV9cIiArIHByb3BlcnR5SWQ7XG4gICAgdmFyIGF0dHJpYnV0ZVR5cGU7XG4gICAgaWYgKGNvbXBvbmVudENvdW50ID09PSAxKSB7XG4gICAgICBhdHRyaWJ1dGVUeXBlID0gXCJmbG9hdFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdHRyaWJ1dGVUeXBlID0gXCJ2ZWNcIiArIGNvbXBvbmVudENvdW50O1xuICAgIH1cblxuICAgIGF0dHJpYnV0ZURlY2xhcmF0aW9ucyArPVxuICAgICAgXCJhdHRyaWJ1dGUgXCIgKyBhdHRyaWJ1dGVUeXBlICsgXCIgXCIgKyBhdHRyaWJ1dGVOYW1lICsgXCI7IFxcblwiO1xuICAgIGF0dHJpYnV0ZUxvY2F0aW9uc1thdHRyaWJ1dGVOYW1lXSA9IGF0dHJpYnV0ZS5sb2NhdGlvbjtcbiAgfVxuXG4gIGNyZWF0ZVVuaWZvcm1NYXAocG9pbnRDbG91ZCwgZnJhbWVTdGF0ZSk7XG5cbiAgdmFyIHZzID1cbiAgICBcImF0dHJpYnV0ZSB2ZWMzIGFfcG9zaXRpb247IFxcblwiICtcbiAgICBcInZhcnlpbmcgdmVjNCB2X2NvbG9yOyBcXG5cIiArXG4gICAgXCJ1bmlmb3JtIHZlYzQgdV9wb2ludFNpemVBbmRUaW1lQW5kR2VvbWV0cmljRXJyb3JBbmREZXB0aE11bHRpcGxpZXI7IFxcblwiICtcbiAgICBcInVuaWZvcm0gdmVjNCB1X2NvbnN0YW50Q29sb3I7IFxcblwiICtcbiAgICBcInVuaWZvcm0gdmVjNCB1X2hpZ2hsaWdodENvbG9yOyBcXG5cIjtcbiAgdnMgKz0gXCJmbG9hdCB1X3BvaW50U2l6ZTsgXFxuXCIgKyBcImZsb2F0IHVfdGltZTsgXFxuXCI7XG5cbiAgaWYgKGF0dGVudWF0aW9uKSB7XG4gICAgdnMgKz0gXCJmbG9hdCB1X2dlb21ldHJpY0Vycm9yOyBcXG5cIiArIFwiZmxvYXQgdV9kZXB0aE11bHRpcGxpZXI7IFxcblwiO1xuICB9XG5cbiAgdnMgKz0gYXR0cmlidXRlRGVjbGFyYXRpb25zO1xuXG4gIGlmICh1c2VzQ29sb3JzKSB7XG4gICAgaWYgKGlzVHJhbnNsdWNlbnQpIHtcbiAgICAgIHZzICs9IFwiYXR0cmlidXRlIHZlYzQgYV9jb2xvcjsgXFxuXCI7XG4gICAgfSBlbHNlIGlmIChpc1JHQjU2NSkge1xuICAgICAgdnMgKz1cbiAgICAgICAgXCJhdHRyaWJ1dGUgZmxvYXQgYV9jb2xvcjsgXFxuXCIgK1xuICAgICAgICBcImNvbnN0IGZsb2F0IFNISUZUX1JJR0hUXzExID0gMS4wIC8gMjA0OC4wOyBcXG5cIiArXG4gICAgICAgIFwiY29uc3QgZmxvYXQgU0hJRlRfUklHSFRfNSA9IDEuMCAvIDMyLjA7IFxcblwiICtcbiAgICAgICAgXCJjb25zdCBmbG9hdCBTSElGVF9MRUZUXzExID0gMjA0OC4wOyBcXG5cIiArXG4gICAgICAgIFwiY29uc3QgZmxvYXQgU0hJRlRfTEVGVF81ID0gMzIuMDsgXFxuXCIgK1xuICAgICAgICBcImNvbnN0IGZsb2F0IE5PUk1BTElaRV82ID0gMS4wIC8gNjQuMDsgXFxuXCIgK1xuICAgICAgICBcImNvbnN0IGZsb2F0IE5PUk1BTElaRV81ID0gMS4wIC8gMzIuMDsgXFxuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZzICs9IFwiYXR0cmlidXRlIHZlYzMgYV9jb2xvcjsgXFxuXCI7XG4gICAgfVxuICB9XG4gIGlmICh1c2VzTm9ybWFscykge1xuICAgIGlmIChpc09jdEVuY29kZWQxNlAgfHwgaXNPY3RFbmNvZGVkRHJhY28pIHtcbiAgICAgIHZzICs9IFwiYXR0cmlidXRlIHZlYzIgYV9ub3JtYWw7IFxcblwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB2cyArPSBcImF0dHJpYnV0ZSB2ZWMzIGFfbm9ybWFsOyBcXG5cIjtcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzQmF0Y2hJZHMpIHtcbiAgICB2cyArPSBcImF0dHJpYnV0ZSBmbG9hdCBhX2JhdGNoSWQ7IFxcblwiO1xuICB9XG5cbiAgaWYgKGlzUXVhbnRpemVkIHx8IGlzUXVhbnRpemVkRHJhY28gfHwgaXNPY3RFbmNvZGVkRHJhY28pIHtcbiAgICB2cyArPSBcInVuaWZvcm0gdmVjNCB1X3F1YW50aXplZFZvbHVtZVNjYWxlQW5kT2N0RW5jb2RlZFJhbmdlOyBcXG5cIjtcbiAgfVxuXG4gIGlmIChoYXNDb2xvclN0eWxlKSB7XG4gICAgdnMgKz0gY29sb3JTdHlsZUZ1bmN0aW9uO1xuICB9XG5cbiAgaWYgKGhhc1Nob3dTdHlsZSkge1xuICAgIHZzICs9IHNob3dTdHlsZUZ1bmN0aW9uO1xuICB9XG5cbiAgaWYgKGhhc1BvaW50U2l6ZVN0eWxlKSB7XG4gICAgdnMgKz0gcG9pbnRTaXplU3R5bGVGdW5jdGlvbjtcbiAgfVxuXG4gIHZzICs9XG4gICAgXCJ2b2lkIG1haW4oKSBcXG5cIiArXG4gICAgXCJ7IFxcblwiICtcbiAgICBcIiAgICB1X3BvaW50U2l6ZSA9IHVfcG9pbnRTaXplQW5kVGltZUFuZEdlb21ldHJpY0Vycm9yQW5kRGVwdGhNdWx0aXBsaWVyLng7IFxcblwiICtcbiAgICBcIiAgICB1X3RpbWUgPSB1X3BvaW50U2l6ZUFuZFRpbWVBbmRHZW9tZXRyaWNFcnJvckFuZERlcHRoTXVsdGlwbGllci55OyBcXG5cIjtcblxuICBpZiAoYXR0ZW51YXRpb24pIHtcbiAgICB2cyArPVxuICAgICAgXCIgICAgdV9nZW9tZXRyaWNFcnJvciA9IHVfcG9pbnRTaXplQW5kVGltZUFuZEdlb21ldHJpY0Vycm9yQW5kRGVwdGhNdWx0aXBsaWVyLno7IFxcblwiICtcbiAgICAgIFwiICAgIHVfZGVwdGhNdWx0aXBsaWVyID0gdV9wb2ludFNpemVBbmRUaW1lQW5kR2VvbWV0cmljRXJyb3JBbmREZXB0aE11bHRpcGxpZXIudzsgXFxuXCI7XG4gIH1cblxuICBpZiAodXNlc0NvbG9ycykge1xuICAgIGlmIChpc1RyYW5zbHVjZW50KSB7XG4gICAgICB2cyArPSBcIiAgICB2ZWM0IGNvbG9yID0gYV9jb2xvcjsgXFxuXCI7XG4gICAgfSBlbHNlIGlmIChpc1JHQjU2NSkge1xuICAgICAgdnMgKz1cbiAgICAgICAgXCIgICAgZmxvYXQgY29tcHJlc3NlZCA9IGFfY29sb3I7IFxcblwiICtcbiAgICAgICAgXCIgICAgZmxvYXQgciA9IGZsb29yKGNvbXByZXNzZWQgKiBTSElGVF9SSUdIVF8xMSk7IFxcblwiICtcbiAgICAgICAgXCIgICAgY29tcHJlc3NlZCAtPSByICogU0hJRlRfTEVGVF8xMTsgXFxuXCIgK1xuICAgICAgICBcIiAgICBmbG9hdCBnID0gZmxvb3IoY29tcHJlc3NlZCAqIFNISUZUX1JJR0hUXzUpOyBcXG5cIiArXG4gICAgICAgIFwiICAgIGNvbXByZXNzZWQgLT0gZyAqIFNISUZUX0xFRlRfNTsgXFxuXCIgK1xuICAgICAgICBcIiAgICBmbG9hdCBiID0gY29tcHJlc3NlZDsgXFxuXCIgK1xuICAgICAgICBcIiAgICB2ZWMzIHJnYiA9IHZlYzMociAqIE5PUk1BTElaRV81LCBnICogTk9STUFMSVpFXzYsIGIgKiBOT1JNQUxJWkVfNSk7IFxcblwiICtcbiAgICAgICAgXCIgICAgdmVjNCBjb2xvciA9IHZlYzQocmdiLCAxLjApOyBcXG5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdnMgKz0gXCIgICAgdmVjNCBjb2xvciA9IHZlYzQoYV9jb2xvciwgMS4wKTsgXFxuXCI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZzICs9IFwiICAgIHZlYzQgY29sb3IgPSB1X2NvbnN0YW50Q29sb3I7IFxcblwiO1xuICB9XG5cbiAgaWYgKGlzUXVhbnRpemVkIHx8IGlzUXVhbnRpemVkRHJhY28pIHtcbiAgICB2cyArPVxuICAgICAgXCIgICAgdmVjMyBwb3NpdGlvbiA9IGFfcG9zaXRpb24gKiB1X3F1YW50aXplZFZvbHVtZVNjYWxlQW5kT2N0RW5jb2RlZFJhbmdlLnh5ejsgXFxuXCI7XG4gIH0gZWxzZSB7XG4gICAgdnMgKz0gXCIgICAgdmVjMyBwb3NpdGlvbiA9IGFfcG9zaXRpb247IFxcblwiO1xuICB9XG4gIHZzICs9XG4gICAgXCIgICAgdmVjMyBwb3NpdGlvbl9hYnNvbHV0ZSA9IHZlYzMoY3ptX21vZGVsICogdmVjNChwb3NpdGlvbiwgMS4wKSk7IFxcblwiO1xuXG4gIGlmICh1c2VzTm9ybWFscykge1xuICAgIGlmIChpc09jdEVuY29kZWQxNlApIHtcbiAgICAgIHZzICs9IFwiICAgIHZlYzMgbm9ybWFsID0gY3ptX29jdERlY29kZShhX25vcm1hbCk7IFxcblwiO1xuICAgIH0gZWxzZSBpZiAoaXNPY3RFbmNvZGVkRHJhY28pIHtcbiAgICAgIC8vIERyYWNvIG9jdC1lbmNvZGluZyBkZWNvZGVzIHRvIHp4eSBvcmRlclxuICAgICAgdnMgKz1cbiAgICAgICAgXCIgICAgdmVjMyBub3JtYWwgPSBjem1fb2N0RGVjb2RlKGFfbm9ybWFsLCB1X3F1YW50aXplZFZvbHVtZVNjYWxlQW5kT2N0RW5jb2RlZFJhbmdlLncpLnp4eTsgXFxuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZzICs9IFwiICAgIHZlYzMgbm9ybWFsID0gYV9ub3JtYWw7IFxcblwiO1xuICAgIH1cbiAgICB2cyArPSBcIiAgICB2ZWMzIG5vcm1hbEVDID0gY3ptX25vcm1hbCAqIG5vcm1hbDsgXFxuXCI7XG4gIH0gZWxzZSB7XG4gICAgdnMgKz0gXCIgICAgdmVjMyBub3JtYWwgPSB2ZWMzKDEuMCk7IFxcblwiO1xuICB9XG5cbiAgaWYgKGhhc0NvbG9yU3R5bGUpIHtcbiAgICB2cyArPVxuICAgICAgXCIgICAgY29sb3IgPSBnZXRDb2xvckZyb21TdHlsZShwb3NpdGlvbiwgcG9zaXRpb25fYWJzb2x1dGUsIGNvbG9yLCBub3JtYWwpOyBcXG5cIjtcbiAgfVxuXG4gIGlmIChoYXNTaG93U3R5bGUpIHtcbiAgICB2cyArPVxuICAgICAgXCIgICAgZmxvYXQgc2hvdyA9IGZsb2F0KGdldFNob3dGcm9tU3R5bGUocG9zaXRpb24sIHBvc2l0aW9uX2Fic29sdXRlLCBjb2xvciwgbm9ybWFsKSk7IFxcblwiO1xuICB9XG5cbiAgaWYgKGhhc1BvaW50U2l6ZVN0eWxlKSB7XG4gICAgdnMgKz1cbiAgICAgIFwiICAgIGdsX1BvaW50U2l6ZSA9IGdldFBvaW50U2l6ZUZyb21TdHlsZShwb3NpdGlvbiwgcG9zaXRpb25fYWJzb2x1dGUsIGNvbG9yLCBub3JtYWwpICogY3ptX3BpeGVsUmF0aW87IFxcblwiO1xuICB9IGVsc2UgaWYgKGF0dGVudWF0aW9uKSB7XG4gICAgdnMgKz1cbiAgICAgIFwiICAgIHZlYzQgcG9zaXRpb25FQyA9IGN6bV9tb2RlbFZpZXcgKiB2ZWM0KHBvc2l0aW9uLCAxLjApOyBcXG5cIiArXG4gICAgICBcIiAgICBmbG9hdCBkZXB0aCA9IC1wb3NpdGlvbkVDLno7IFxcblwiICtcbiAgICAgIC8vIGNvbXB1dGUgU1NFIGZvciB0aGlzIHBvaW50XG4gICAgICBcIiAgICBnbF9Qb2ludFNpemUgPSBtaW4oKHVfZ2VvbWV0cmljRXJyb3IgLyBkZXB0aCkgKiB1X2RlcHRoTXVsdGlwbGllciwgdV9wb2ludFNpemUpOyBcXG5cIjtcbiAgfSBlbHNlIHtcbiAgICB2cyArPSBcIiAgICBnbF9Qb2ludFNpemUgPSB1X3BvaW50U2l6ZTsgXFxuXCI7XG4gIH1cblxuICB2cyArPSBcIiAgICBjb2xvciA9IGNvbG9yICogdV9oaWdobGlnaHRDb2xvcjsgXFxuXCI7XG5cbiAgaWYgKHVzZXNOb3JtYWxzICYmIG5vcm1hbFNoYWRpbmcpIHtcbiAgICB2cyArPVxuICAgICAgXCIgICAgZmxvYXQgZGlmZnVzZVN0cmVuZ3RoID0gY3ptX2dldExhbWJlcnREaWZmdXNlKGN6bV9saWdodERpcmVjdGlvbkVDLCBub3JtYWxFQyk7IFxcblwiICtcbiAgICAgIFwiICAgIGRpZmZ1c2VTdHJlbmd0aCA9IG1heChkaWZmdXNlU3RyZW5ndGgsIDAuNCk7IFxcblwiICsgLy8gQXBwbHkgc29tZSBhbWJpZW50IGxpZ2h0aW5nXG4gICAgICBcIiAgICBjb2xvci54eXogKj0gZGlmZnVzZVN0cmVuZ3RoICogY3ptX2xpZ2h0Q29sb3I7IFxcblwiO1xuICB9XG5cbiAgdnMgKz1cbiAgICBcIiAgICB2X2NvbG9yID0gY29sb3I7IFxcblwiICtcbiAgICBcIiAgICBnbF9Qb3NpdGlvbiA9IGN6bV9tb2RlbFZpZXdQcm9qZWN0aW9uICogdmVjNChwb3NpdGlvbiwgMS4wKTsgXFxuXCI7XG5cbiAgaWYgKHVzZXNOb3JtYWxzICYmIGJhY2tGYWNlQ3VsbGluZykge1xuICAgIHZzICs9XG4gICAgICBcIiAgICBmbG9hdCB2aXNpYmxlID0gc3RlcCgtbm9ybWFsRUMueiwgMC4wKTsgXFxuXCIgK1xuICAgICAgXCIgICAgZ2xfUG9zaXRpb24gKj0gdmlzaWJsZTsgXFxuXCIgK1xuICAgICAgXCIgICAgZ2xfUG9pbnRTaXplICo9IHZpc2libGU7IFxcblwiO1xuICB9XG5cbiAgaWYgKGhhc1Nob3dTdHlsZSkge1xuICAgIHZzICs9XG4gICAgICBcIiAgICBnbF9Qb3NpdGlvbi53ICo9IGZsb2F0KHNob3cpOyBcXG5cIiArXG4gICAgICBcIiAgICBnbF9Qb2ludFNpemUgKj0gZmxvYXQoc2hvdyk7IFxcblwiO1xuICB9XG5cbiAgdnMgKz0gXCJ9IFxcblwiO1xuXG4gIHZhciBmcyA9IFwidmFyeWluZyB2ZWM0IHZfY29sb3I7IFxcblwiO1xuXG4gIGlmIChoYXNDbGlwcGVkQ29udGVudCkge1xuICAgIGZzICs9XG4gICAgICBcInVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHVfY2xpcHBpbmdQbGFuZXM7IFxcblwiICtcbiAgICAgIFwidW5pZm9ybSBtYXQ0IHVfY2xpcHBpbmdQbGFuZXNNYXRyaXg7IFxcblwiICtcbiAgICAgIFwidW5pZm9ybSB2ZWM0IHVfY2xpcHBpbmdQbGFuZXNFZGdlU3R5bGU7IFxcblwiO1xuICAgIGZzICs9IFwiXFxuXCI7XG4gICAgZnMgKz0gZ2V0Q2xpcHBpbmdGdW5jdGlvbihjbGlwcGluZ1BsYW5lcywgY29udGV4dCk7XG4gICAgZnMgKz0gXCJcXG5cIjtcbiAgfVxuXG4gIGZzICs9XG4gICAgXCJ2b2lkIG1haW4oKSBcXG5cIiArXG4gICAgXCJ7IFxcblwiICtcbiAgICBcIiAgICBnbF9GcmFnQ29sb3IgPSBjem1fZ2FtbWFDb3JyZWN0KHZfY29sb3IpOyBcXG5cIjtcblxuICBpZiAoaGFzQ2xpcHBlZENvbnRlbnQpIHtcbiAgICBmcyArPSBnZXRDbGlwQW5kU3R5bGVDb2RlKFxuICAgICAgXCJ1X2NsaXBwaW5nUGxhbmVzXCIsXG4gICAgICBcInVfY2xpcHBpbmdQbGFuZXNNYXRyaXhcIixcbiAgICAgIFwidV9jbGlwcGluZ1BsYW5lc0VkZ2VTdHlsZVwiXG4gICAgKTtcbiAgfVxuXG4gIGZzICs9IFwifSBcXG5cIjtcblxuICBpZiAoZGVmaW5lZChwb2ludENsb3VkLl92ZXJ0ZXhTaGFkZXJMb2FkZWQpKSB7XG4gICAgdnMgPSBwb2ludENsb3VkLl92ZXJ0ZXhTaGFkZXJMb2FkZWQodnMpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQocG9pbnRDbG91ZC5fZnJhZ21lbnRTaGFkZXJMb2FkZWQpKSB7XG4gICAgZnMgPSBwb2ludENsb3VkLl9mcmFnbWVudFNoYWRlckxvYWRlZChmcyk7XG4gIH1cblxuICB2YXIgZHJhd0NvbW1hbmQgPSBwb2ludENsb3VkLl9kcmF3Q29tbWFuZDtcbiAgaWYgKGRlZmluZWQoZHJhd0NvbW1hbmQuc2hhZGVyUHJvZ3JhbSkpIHtcbiAgICAvLyBEZXN0cm95IHRoZSBvbGQgc2hhZGVyXG4gICAgZHJhd0NvbW1hbmQuc2hhZGVyUHJvZ3JhbS5kZXN0cm95KCk7XG4gIH1cbiAgZHJhd0NvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IFNoYWRlclByb2dyYW0uZnJvbUNhY2hlKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnMsXG4gICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IGZzLFxuICAgIGF0dHJpYnV0ZUxvY2F0aW9uczogYXR0cmlidXRlTG9jYXRpb25zLFxuICB9KTtcblxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHRoZSBzaGFkZXIgY29tcGlsZXMgY29ycmVjdGx5LiBJZiBub3QgdGhlcmUgaXMgbGlrZWx5IGEgc3ludGF4IGVycm9yIHdpdGggdGhlIHN0eWxlLlxuICAgIGRyYXdDb21tYW5kLnNoYWRlclByb2dyYW0uX2JpbmQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBSZXBocmFzZSB0aGUgZXJyb3IuXG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiRXJyb3IgZ2VuZXJhdGluZyBzdHlsZSBzaGFkZXI6IHRoaXMgbWF5IGJlIGNhdXNlZCBieSBhIHR5cGUgbWlzbWF0Y2gsIGluZGV4IG91dC1vZi1ib3VuZHMsIG9yIG90aGVyIHN5bnRheCBlcnJvci5cIlxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVjb2RlRHJhY28ocG9pbnRDbG91ZCwgY29udGV4dCkge1xuICBpZiAocG9pbnRDbG91ZC5fZGVjb2RpbmdTdGF0ZSA9PT0gRGVjb2RpbmdTdGF0ZS5SRUFEWSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAocG9pbnRDbG91ZC5fZGVjb2RpbmdTdGF0ZSA9PT0gRGVjb2RpbmdTdGF0ZS5ORUVEU19ERUNPREUpIHtcbiAgICB2YXIgcGFyc2VkQ29udGVudCA9IHBvaW50Q2xvdWQuX3BhcnNlZENvbnRlbnQ7XG4gICAgdmFyIGRyYWNvID0gcGFyc2VkQ29udGVudC5kcmFjbztcbiAgICB2YXIgZGVjb2RlUHJvbWlzZSA9IERyYWNvTG9hZGVyLmRlY29kZVBvaW50Q2xvdWQoZHJhY28sIGNvbnRleHQpO1xuICAgIGlmIChkZWZpbmVkKGRlY29kZVByb21pc2UpKSB7XG4gICAgICBwb2ludENsb3VkLl9kZWNvZGluZ1N0YXRlID0gRGVjb2RpbmdTdGF0ZS5ERUNPRElORztcbiAgICAgIGRlY29kZVByb21pc2VcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgIHBvaW50Q2xvdWQuX2RlY29kaW5nU3RhdGUgPSBEZWNvZGluZ1N0YXRlLlJFQURZO1xuICAgICAgICAgIHZhciBkZWNvZGVkUG9zaXRpb25zID0gZGVmaW5lZChyZXN1bHQuUE9TSVRJT04pXG4gICAgICAgICAgICA/IHJlc3VsdC5QT1NJVElPTi5hcnJheVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgdmFyIGRlY29kZWRSZ2IgPSBkZWZpbmVkKHJlc3VsdC5SR0IpID8gcmVzdWx0LlJHQi5hcnJheSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB2YXIgZGVjb2RlZFJnYmEgPSBkZWZpbmVkKHJlc3VsdC5SR0JBKVxuICAgICAgICAgICAgPyByZXN1bHQuUkdCQS5hcnJheVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgdmFyIGRlY29kZWROb3JtYWxzID0gZGVmaW5lZChyZXN1bHQuTk9STUFMKVxuICAgICAgICAgICAgPyByZXN1bHQuTk9STUFMLmFycmF5XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB2YXIgZGVjb2RlZEJhdGNoSWRzID0gZGVmaW5lZChyZXN1bHQuQkFUQ0hfSUQpXG4gICAgICAgICAgICA/IHJlc3VsdC5CQVRDSF9JRC5hcnJheVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgdmFyIGlzUXVhbnRpemVkRHJhY28gPVxuICAgICAgICAgICAgZGVmaW5lZChkZWNvZGVkUG9zaXRpb25zKSAmJlxuICAgICAgICAgICAgZGVmaW5lZChyZXN1bHQuUE9TSVRJT04uZGF0YS5xdWFudGl6YXRpb24pO1xuICAgICAgICAgIHZhciBpc09jdEVuY29kZWREcmFjbyA9XG4gICAgICAgICAgICBkZWZpbmVkKGRlY29kZWROb3JtYWxzKSAmJiBkZWZpbmVkKHJlc3VsdC5OT1JNQUwuZGF0YS5xdWFudGl6YXRpb24pO1xuICAgICAgICAgIGlmIChpc1F1YW50aXplZERyYWNvKSB7XG4gICAgICAgICAgICAvLyBEcmFjbyBxdWFudGl6YXRpb24gcmFuZ2UgPT0gcXVhbnRpemVkIHZvbHVtZSBzY2FsZSAtIHNpemUgaW4gbWV0ZXJzIG9mIHRoZSBxdWFudGl6ZWQgdm9sdW1lXG4gICAgICAgICAgICAvLyBJbnRlcm5hbCBxdWFudGl6ZWQgcmFuZ2UgaXMgdGhlIHJhbmdlIG9mIHZhbHVlcyBvZiB0aGUgcXVhbnRpemVkIGRhdGEsIGUuZy4gMjU1IGZvciA4LWJpdCwgMTAyMyBmb3IgMTAtYml0LCBldGNcbiAgICAgICAgICAgIHZhciBxdWFudGl6YXRpb24gPSByZXN1bHQuUE9TSVRJT04uZGF0YS5xdWFudGl6YXRpb247XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBxdWFudGl6YXRpb24ucmFuZ2U7XG4gICAgICAgICAgICBwb2ludENsb3VkLl9xdWFudGl6ZWRWb2x1bWVTY2FsZSA9IENhcnRlc2lhbjMuZnJvbUVsZW1lbnRzKFxuICAgICAgICAgICAgICByYW5nZSxcbiAgICAgICAgICAgICAgcmFuZ2UsXG4gICAgICAgICAgICAgIHJhbmdlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcG9pbnRDbG91ZC5fcXVhbnRpemVkVm9sdW1lT2Zmc2V0ID0gQ2FydGVzaWFuMy51bnBhY2soXG4gICAgICAgICAgICAgIHF1YW50aXphdGlvbi5taW5WYWx1ZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwb2ludENsb3VkLl9xdWFudGl6ZWRSYW5nZSA9XG4gICAgICAgICAgICAgICgxIDw8IHF1YW50aXphdGlvbi5xdWFudGl6YXRpb25CaXRzKSAtIDEuMDtcbiAgICAgICAgICAgIHBvaW50Q2xvdWQuX2lzUXVhbnRpemVkRHJhY28gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPY3RFbmNvZGVkRHJhY28pIHtcbiAgICAgICAgICAgIHBvaW50Q2xvdWQuX29jdEVuY29kZWRSYW5nZSA9XG4gICAgICAgICAgICAgICgxIDw8IHJlc3VsdC5OT1JNQUwuZGF0YS5xdWFudGl6YXRpb24ucXVhbnRpemF0aW9uQml0cykgLSAxLjA7XG4gICAgICAgICAgICBwb2ludENsb3VkLl9pc09jdEVuY29kZWREcmFjbyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBzdHlsZWFibGVQcm9wZXJ0aWVzID0gcGFyc2VkQ29udGVudC5zdHlsZWFibGVQcm9wZXJ0aWVzO1xuICAgICAgICAgIHZhciBiYXRjaFRhYmxlUHJvcGVydGllcyA9IGRyYWNvLmJhdGNoVGFibGVQcm9wZXJ0aWVzO1xuICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gYmF0Y2hUYWJsZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChiYXRjaFRhYmxlUHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICB2YXIgcHJvcGVydHkgPSByZXN1bHRbbmFtZV07XG4gICAgICAgICAgICAgIGlmICghZGVmaW5lZChzdHlsZWFibGVQcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgICAgIHN0eWxlYWJsZVByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdHlsZWFibGVQcm9wZXJ0aWVzW25hbWVdID0ge1xuICAgICAgICAgICAgICAgIHR5cGVkQXJyYXk6IHByb3BlcnR5LmFycmF5LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudENvdW50OiBwcm9wZXJ0eS5kYXRhLmNvbXBvbmVudHNQZXJBdHRyaWJ1dGUsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcnNlZENvbnRlbnQucG9zaXRpb25zID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgICAgZGVjb2RlZFBvc2l0aW9ucyxcbiAgICAgICAgICAgIHBhcnNlZENvbnRlbnQucG9zaXRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwYXJzZWRDb250ZW50LmNvbG9ycyA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZShkZWNvZGVkUmdiYSwgZGVjb2RlZFJnYiksXG4gICAgICAgICAgICBwYXJzZWRDb250ZW50LmNvbG9yc1xuICAgICAgICAgICk7XG4gICAgICAgICAgcGFyc2VkQ29udGVudC5ub3JtYWxzID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgICAgZGVjb2RlZE5vcm1hbHMsXG4gICAgICAgICAgICBwYXJzZWRDb250ZW50Lm5vcm1hbHNcbiAgICAgICAgICApO1xuICAgICAgICAgIHBhcnNlZENvbnRlbnQuYmF0Y2hJZHMgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgICAgICBkZWNvZGVkQmF0Y2hJZHMsXG4gICAgICAgICAgICBwYXJzZWRDb250ZW50LmJhdGNoSWRzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwYXJzZWRDb250ZW50LnN0eWxlYWJsZVByb3BlcnRpZXMgPSBzdHlsZWFibGVQcm9wZXJ0aWVzO1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIHBvaW50Q2xvdWQuX2RlY29kaW5nU3RhdGUgPSBEZWNvZGluZ1N0YXRlLkZBSUxFRDtcbiAgICAgICAgICBwb2ludENsb3VkLl9yZWFkeVByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG52YXIgc2NyYXRjaENvbXB1dGVkVHJhbnNsYXRpb24gPSBuZXcgQ2FydGVzaWFuNCgpO1xudmFyIHNjcmF0Y2hTY2FsZSA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cblBvaW50Q2xvdWQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuICB2YXIgZGVjb2RpbmcgPSBkZWNvZGVEcmFjbyh0aGlzLCBjb250ZXh0KTtcbiAgaWYgKGRlY29kaW5nKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHNoYWRlcnNEaXJ0eSA9IGZhbHNlO1xuICB2YXIgbW9kZWxNYXRyaXhEaXJ0eSA9ICFNYXRyaXg0LmVxdWFscyh0aGlzLl9tb2RlbE1hdHJpeCwgdGhpcy5tb2RlbE1hdHJpeCk7XG5cbiAgaWYgKHRoaXMuX21vZGUgIT09IGZyYW1lU3RhdGUubW9kZSkge1xuICAgIHRoaXMuX21vZGUgPSBmcmFtZVN0YXRlLm1vZGU7XG4gICAgbW9kZWxNYXRyaXhEaXJ0eSA9IHRydWU7XG4gIH1cblxuICBpZiAoIWRlZmluZWQodGhpcy5fZHJhd0NvbW1hbmQpKSB7XG4gICAgY3JlYXRlUmVzb3VyY2VzKHRoaXMsIGZyYW1lU3RhdGUpO1xuICAgIG1vZGVsTWF0cml4RGlydHkgPSB0cnVlO1xuICAgIHNoYWRlcnNEaXJ0eSA9IHRydWU7XG4gICAgdGhpcy5fcmVhZHkgPSB0cnVlO1xuICAgIHRoaXMuX3JlYWR5UHJvbWlzZS5yZXNvbHZlKHRoaXMpO1xuICAgIHRoaXMuX3BhcnNlZENvbnRlbnQgPSB1bmRlZmluZWQ7IC8vIFVubG9hZFxuICB9XG5cbiAgaWYgKG1vZGVsTWF0cml4RGlydHkpIHtcbiAgICBNYXRyaXg0LmNsb25lKHRoaXMubW9kZWxNYXRyaXgsIHRoaXMuX21vZGVsTWF0cml4KTtcbiAgICB2YXIgbW9kZWxNYXRyaXggPSB0aGlzLl9kcmF3Q29tbWFuZC5tb2RlbE1hdHJpeDtcbiAgICBNYXRyaXg0LmNsb25lKHRoaXMuX21vZGVsTWF0cml4LCBtb2RlbE1hdHJpeCk7XG5cbiAgICBpZiAoZGVmaW5lZCh0aGlzLl9ydGNDZW50ZXIpKSB7XG4gICAgICBNYXRyaXg0Lm11bHRpcGx5QnlUcmFuc2xhdGlvbihtb2RlbE1hdHJpeCwgdGhpcy5fcnRjQ2VudGVyLCBtb2RlbE1hdHJpeCk7XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKHRoaXMuX3F1YW50aXplZFZvbHVtZU9mZnNldCkpIHtcbiAgICAgIE1hdHJpeDQubXVsdGlwbHlCeVRyYW5zbGF0aW9uKFxuICAgICAgICBtb2RlbE1hdHJpeCxcbiAgICAgICAgdGhpcy5fcXVhbnRpemVkVm9sdW1lT2Zmc2V0LFxuICAgICAgICBtb2RlbE1hdHJpeFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWVTdGF0ZS5tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUzRCkge1xuICAgICAgdmFyIHByb2plY3Rpb24gPSBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb247XG4gICAgICB2YXIgdHJhbnNsYXRpb24gPSBNYXRyaXg0LmdldENvbHVtbihcbiAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgIDMsXG4gICAgICAgIHNjcmF0Y2hDb21wdXRlZFRyYW5zbGF0aW9uXG4gICAgICApO1xuICAgICAgaWYgKCFDYXJ0ZXNpYW40LmVxdWFscyh0cmFuc2xhdGlvbiwgQ2FydGVzaWFuNC5VTklUX1cpKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuYmFzaXNUbzJEKHByb2plY3Rpb24sIG1vZGVsTWF0cml4LCBtb2RlbE1hdHJpeCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGJvdW5kaW5nU3BoZXJlID0gdGhpcy5fZHJhd0NvbW1hbmQuYm91bmRpbmdWb2x1bWU7XG4gICAgQm91bmRpbmdTcGhlcmUuY2xvbmUodGhpcy5fYm91bmRpbmdTcGhlcmUsIGJvdW5kaW5nU3BoZXJlKTtcblxuICAgIGlmICh0aGlzLl9jdWxsKSB7XG4gICAgICB2YXIgY2VudGVyID0gYm91bmRpbmdTcGhlcmUuY2VudGVyO1xuICAgICAgTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQobW9kZWxNYXRyaXgsIGNlbnRlciwgY2VudGVyKTtcbiAgICAgIHZhciBzY2FsZSA9IE1hdHJpeDQuZ2V0U2NhbGUobW9kZWxNYXRyaXgsIHNjcmF0Y2hTY2FsZSk7XG4gICAgICBib3VuZGluZ1NwaGVyZS5yYWRpdXMgKj0gQ2FydGVzaWFuMy5tYXhpbXVtQ29tcG9uZW50KHNjYWxlKTtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5jbGlwcGluZ1BsYW5lc0RpcnR5KSB7XG4gICAgdGhpcy5jbGlwcGluZ1BsYW5lc0RpcnR5ID0gZmFsc2U7XG4gICAgc2hhZGVyc0RpcnR5ID0gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0aGlzLl9hdHRlbnVhdGlvbiAhPT0gdGhpcy5hdHRlbnVhdGlvbikge1xuICAgIHRoaXMuX2F0dGVudWF0aW9uID0gdGhpcy5hdHRlbnVhdGlvbjtcbiAgICBzaGFkZXJzRGlydHkgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHRoaXMuYmFja0ZhY2VDdWxsaW5nICE9PSB0aGlzLl9iYWNrRmFjZUN1bGxpbmcpIHtcbiAgICB0aGlzLl9iYWNrRmFjZUN1bGxpbmcgPSB0aGlzLmJhY2tGYWNlQ3VsbGluZztcbiAgICBzaGFkZXJzRGlydHkgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHRoaXMubm9ybWFsU2hhZGluZyAhPT0gdGhpcy5fbm9ybWFsU2hhZGluZykge1xuICAgIHRoaXMuX25vcm1hbFNoYWRpbmcgPSB0aGlzLm5vcm1hbFNoYWRpbmc7XG4gICAgc2hhZGVyc0RpcnR5ID0gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0aGlzLl9zdHlsZSAhPT0gdGhpcy5zdHlsZSB8fCB0aGlzLnN0eWxlRGlydHkpIHtcbiAgICB0aGlzLl9zdHlsZSA9IHRoaXMuc3R5bGU7XG4gICAgdGhpcy5zdHlsZURpcnR5ID0gZmFsc2U7XG4gICAgc2hhZGVyc0RpcnR5ID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChzaGFkZXJzRGlydHkpIHtcbiAgICBjcmVhdGVTaGFkZXJzKHRoaXMsIGZyYW1lU3RhdGUsIHRoaXMuX3N0eWxlKTtcbiAgfVxuXG4gIHRoaXMuX2RyYXdDb21tYW5kLmNhc3RTaGFkb3dzID0gU2hhZG93TW9kZS5jYXN0U2hhZG93cyh0aGlzLnNoYWRvd3MpO1xuICB0aGlzLl9kcmF3Q29tbWFuZC5yZWNlaXZlU2hhZG93cyA9IFNoYWRvd01vZGUucmVjZWl2ZVNoYWRvd3ModGhpcy5zaGFkb3dzKTtcblxuICAvLyBVcGRhdGUgdGhlIHJlbmRlciBzdGF0ZVxuICB2YXIgaXNUcmFuc2x1Y2VudCA9XG4gICAgdGhpcy5faGlnaGxpZ2h0Q29sb3IuYWxwaGEgPCAxLjAgfHxcbiAgICB0aGlzLl9jb25zdGFudENvbG9yLmFscGhhIDwgMS4wIHx8XG4gICAgdGhpcy5fc3R5bGVUcmFuc2x1Y2VudDtcbiAgdGhpcy5fZHJhd0NvbW1hbmQucmVuZGVyU3RhdGUgPSBpc1RyYW5zbHVjZW50XG4gICAgPyB0aGlzLl90cmFuc2x1Y2VudFJlbmRlclN0YXRlXG4gICAgOiB0aGlzLl9vcGFxdWVSZW5kZXJTdGF0ZTtcbiAgdGhpcy5fZHJhd0NvbW1hbmQucGFzcyA9IGlzVHJhbnNsdWNlbnQgPyBQYXNzLlRSQU5TTFVDRU5UIDogdGhpcy5fb3BhcXVlUGFzcztcblxuICB2YXIgY29tbWFuZExpc3QgPSBmcmFtZVN0YXRlLmNvbW1hbmRMaXN0O1xuXG4gIHZhciBwYXNzZXMgPSBmcmFtZVN0YXRlLnBhc3NlcztcbiAgaWYgKHBhc3Nlcy5yZW5kZXIgfHwgcGFzc2VzLnBpY2spIHtcbiAgICBjb21tYW5kTGlzdC5wdXNoKHRoaXMuX2RyYXdDb21tYW5kKTtcbiAgfVxufTtcblxuUG9pbnRDbG91ZC5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblBvaW50Q2xvdWQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjb21tYW5kID0gdGhpcy5fZHJhd0NvbW1hbmQ7XG4gIGlmIChkZWZpbmVkKGNvbW1hbmQpKSB7XG4gICAgY29tbWFuZC52ZXJ0ZXhBcnJheSA9IGNvbW1hbmQudmVydGV4QXJyYXkgJiYgY29tbWFuZC52ZXJ0ZXhBcnJheS5kZXN0cm95KCk7XG4gICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID1cbiAgICAgIGNvbW1hbmQuc2hhZGVyUHJvZ3JhbSAmJiBjb21tYW5kLnNoYWRlclByb2dyYW0uZGVzdHJveSgpO1xuICB9XG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFBvaW50Q2xvdWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15508\n')},8707:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59947);\n/* harmony import */ var _Core_combine_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8182);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(99417);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8379);\n/* harmony import */ var _Cesium3DTileBatchTable_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(84020);\n/* harmony import */ var _Cesium3DTileFeature_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(52381);\n/* harmony import */ var _Cesium3DTileRefine_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(36819);\n/* harmony import */ var _PointCloud_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(15508);\n/* harmony import */ var _PointCloudShading_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(45393);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(89917);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Represents the contents of a\n * {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/PointCloud|Point Cloud}\n * tile in a {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification|3D Tiles} tileset.\n * <p>\n * Implements the {@link Cesium3DTileContent} interface.\n * </p>\n *\n * @alias PointCloud3DTileContent\n * @constructor\n *\n * @private\n */\nfunction PointCloud3DTileContent(\n  tileset,\n  tile,\n  resource,\n  arrayBuffer,\n  byteOffset\n) {\n  this._tileset = tileset;\n  this._tile = tile;\n  this._resource = resource;\n  this._pickId = undefined; // Only defined when batchTable is undefined\n  this._batchTable = undefined; // Used when feature table contains BATCH_ID semantic\n  this._styleDirty = false;\n  this._features = undefined;\n  this.featurePropertiesDirty = false;\n  this._groupMetadata = undefined;\n\n  this._pointCloud = new _PointCloud_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    arrayBuffer: arrayBuffer,\n    byteOffset: byteOffset,\n    cull: false,\n    opaquePass: _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE,\n    vertexShaderLoaded: getVertexShaderLoaded(this),\n    fragmentShaderLoaded: getFragmentShaderLoaded(this),\n    uniformMapLoaded: getUniformMapLoaded(this),\n    batchTableLoaded: getBatchTableLoaded(this),\n    pickIdLoaded: getPickIdLoaded(this),\n  });\n}\n\nObject.defineProperties(PointCloud3DTileContent.prototype, {\n  featuresLength: {\n    get: function () {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this._batchTable)) {\n        return this._batchTable.featuresLength;\n      }\n      return 0;\n    },\n  },\n\n  pointsLength: {\n    get: function () {\n      return this._pointCloud.pointsLength;\n    },\n  },\n\n  trianglesLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  geometryByteLength: {\n    get: function () {\n      return this._pointCloud.geometryByteLength;\n    },\n  },\n\n  texturesByteLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  batchTableByteLength: {\n    get: function () {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this._batchTable)) {\n        return this._batchTable.memorySizeInBytes;\n      }\n      return 0;\n    },\n  },\n\n  innerContents: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  readyPromise: {\n    get: function () {\n      return this._pointCloud.readyPromise;\n    },\n  },\n\n  tileset: {\n    get: function () {\n      return this._tileset;\n    },\n  },\n\n  tile: {\n    get: function () {\n      return this._tile;\n    },\n  },\n\n  url: {\n    get: function () {\n      return this._resource.getUrlComponent(true);\n    },\n  },\n\n  batchTable: {\n    get: function () {\n      return this._batchTable;\n    },\n  },\n\n  groupMetadata: {\n    get: function () {\n      return this._groupMetadata;\n    },\n    set: function (value) {\n      this._groupMetadata = value;\n    },\n  },\n});\n\nfunction getVertexShaderLoaded(content) {\n  return function (vs) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(content._batchTable)) {\n      return content._batchTable.getVertexShaderCallback(\n        false,\n        "a_batchId",\n        undefined\n      )(vs);\n    }\n    return vs;\n  };\n}\n\nfunction getFragmentShaderLoaded(content) {\n  return function (fs) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(content._batchTable)) {\n      return content._batchTable.getFragmentShaderCallback(\n        false,\n        undefined,\n        false\n      )(fs);\n    }\n    return "uniform vec4 czm_pickColor;\\n" + fs;\n  };\n}\n\nfunction getUniformMapLoaded(content) {\n  return function (uniformMap) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(content._batchTable)) {\n      return content._batchTable.getUniformMapCallback()(uniformMap);\n    }\n    return (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(uniformMap, {\n      czm_pickColor: function () {\n        return content._pickId.color;\n      },\n    });\n  };\n}\n\nfunction getBatchTableLoaded(content) {\n  return function (batchLength, batchTableJson, batchTableBinary) {\n    content._batchTable = new _Cesium3DTileBatchTable_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n      content,\n      batchLength,\n      batchTableJson,\n      batchTableBinary\n    );\n  };\n}\n\nfunction getPickIdLoaded(content) {\n  return function () {\n    return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(content._batchTable)\n      ? content._batchTable.getPickId()\n      : "czm_pickColor";\n  };\n}\n\nfunction getGeometricError(content) {\n  var pointCloudShading = content._tileset.pointCloudShading;\n  var sphereVolume = content._tile.contentBoundingVolume.boundingSphere.volume();\n  var baseResolutionApproximation = _Core_Math_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].cbrt */ .Z.cbrt(\n    sphereVolume / content.pointsLength\n  );\n\n  var geometricError = content._tile.geometricError;\n  if (geometricError === 0) {\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(pointCloudShading) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(pointCloudShading.baseResolution)\n    ) {\n      geometricError = pointCloudShading.baseResolution;\n    } else {\n      geometricError = baseResolutionApproximation;\n    }\n  }\n  return geometricError;\n}\n\nfunction createFeatures(content) {\n  var featuresLength = content.featuresLength;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(content._features) && featuresLength > 0) {\n    var features = new Array(featuresLength);\n    for (var i = 0; i < featuresLength; ++i) {\n      features[i] = new _Cesium3DTileFeature_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(content, i);\n    }\n    content._features = features;\n  }\n}\n\nPointCloud3DTileContent.prototype.hasProperty = function (batchId, name) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this._batchTable)) {\n    return this._batchTable.hasProperty(batchId, name);\n  }\n  return false;\n};\n\n/**\n * Part of the {@link Cesium3DTileContent} interface.\n *\n * In this context a feature refers to a group of points that share the same BATCH_ID.\n * For example all the points that represent a door in a house point cloud would be a feature.\n *\n * Features are backed by a batch table and can be colored, shown/hidden, picked, etc like features\n * in b3dm and i3dm.\n *\n * When the BATCH_ID semantic is omitted and the point cloud stores per-point properties, they\n * are not accessible by getFeature. They are only used for dynamic styling.\n */\nPointCloud3DTileContent.prototype.getFeature = function (batchId) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this._batchTable)) {\n    return undefined;\n  }\n  var featuresLength = this.featuresLength;\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(batchId) || batchId < 0 || batchId >= featuresLength) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "batchId is required and between zero and featuresLength - 1 (" +\n        (featuresLength - 1) +\n        ")."\n    );\n  }\n  //>>includeEnd(\'debug\');\n  createFeatures(this);\n  return this._features[batchId];\n};\n\nPointCloud3DTileContent.prototype.applyDebugSettings = function (\n  enabled,\n  color\n) {\n  this._pointCloud.color = enabled ? color : _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].WHITE */ .Z.WHITE;\n};\n\nPointCloud3DTileContent.prototype.applyStyle = function (style) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this._batchTable)) {\n    this._batchTable.applyStyle(style);\n  } else {\n    this._styleDirty = true;\n  }\n};\n\nvar defaultShading = new _PointCloudShading_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\n\nPointCloud3DTileContent.prototype.update = function (tileset, frameState) {\n  var pointCloud = this._pointCloud;\n  var pointCloudShading = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    tileset.pointCloudShading,\n    defaultShading\n  );\n  var tile = this._tile;\n  var batchTable = this._batchTable;\n  var mode = frameState.mode;\n  var clippingPlanes = tileset.clippingPlanes;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this._pickId) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(batchTable)) {\n    this._pickId = frameState.context.createPickId({\n      primitive: tileset,\n      content: this,\n    });\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(batchTable)) {\n    batchTable.update(tileset, frameState);\n  }\n\n  var boundingSphere;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(tile._contentBoundingVolume)) {\n    boundingSphere =\n      mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].SCENE3D */ .Z.SCENE3D\n        ? tile._contentBoundingVolume.boundingSphere\n        : tile._contentBoundingVolume2D.boundingSphere;\n  } else {\n    boundingSphere =\n      mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].SCENE3D */ .Z.SCENE3D\n        ? tile._boundingVolume.boundingSphere\n        : tile._boundingVolume2D.boundingSphere;\n  }\n\n  var styleDirty = this._styleDirty;\n  this._styleDirty = false;\n\n  pointCloud.clippingPlanesOriginMatrix = tileset.clippingPlanesOriginMatrix;\n  pointCloud.style = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(batchTable) ? undefined : tileset.style;\n  pointCloud.styleDirty = styleDirty;\n  pointCloud.modelMatrix = tile.computedTransform;\n  pointCloud.time = tileset.timeSinceLoad;\n  pointCloud.shadows = tileset.shadows;\n  pointCloud.boundingSphere = boundingSphere;\n  pointCloud.clippingPlanes = clippingPlanes;\n  pointCloud.isClipped =\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(clippingPlanes) && clippingPlanes.enabled && tile._isClipped;\n  pointCloud.clippingPlanesDirty = tile.clippingPlanesDirty;\n  pointCloud.attenuation = pointCloudShading.attenuation;\n  pointCloud.backFaceCulling = pointCloudShading.backFaceCulling;\n  pointCloud.normalShading = pointCloudShading.normalShading;\n  pointCloud.geometricError = getGeometricError(this);\n  pointCloud.geometricErrorScale = pointCloudShading.geometricErrorScale;\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(pointCloudShading) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(pointCloudShading.maximumAttenuation)\n  ) {\n    pointCloud.maximumAttenuation = pointCloudShading.maximumAttenuation;\n  } else if (tile.refine === _Cesium3DTileRefine_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].ADD */ .Z.ADD) {\n    pointCloud.maximumAttenuation = 5.0;\n  } else {\n    pointCloud.maximumAttenuation = tileset.maximumScreenSpaceError;\n  }\n\n  pointCloud.update(frameState);\n};\n\nPointCloud3DTileContent.prototype.isDestroyed = function () {\n  return false;\n};\n\nPointCloud3DTileContent.prototype.destroy = function () {\n  this._pickId = this._pickId && this._pickId.destroy();\n  this._pointCloud = this._pointCloud && this._pointCloud.destroy();\n  this._batchTable = this._batchTable && this._batchTable.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PointCloud3DTileContent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODcwNy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFxQztBQUNJO0FBQ1U7QUFDVjtBQUNZO0FBQ0U7QUFDZDtBQUNGO0FBQzBCO0FBQ047QUFDRjtBQUNoQjtBQUNjO0FBQ2hCOztBQUV2QztBQUNBO0FBQ0EsSUFBSTtBQUNKLGNBQWMsNkVBQTZFO0FBQzNGO0FBQ0EsbUJBQW1CLDJCQUEyQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUIsZ0VBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdHQUFtQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsc0VBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBLFVBQVUsc0VBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBLFFBQVEsc0VBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEsc0VBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUSxzRUFBTztBQUNmO0FBQ0E7QUFDQSxXQUFXLHFFQUFPO0FBQ2xCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDhCQUE4QiwyRUFBc0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsc0VBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHdFQUFlO0FBQ25EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzRUFBTztBQUNiLE1BQU0sc0VBQU87QUFDYjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU8sc0VBQU87QUFDZDtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEMsd0JBQXdCLHdFQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU0sc0VBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQiwyQkFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sc0VBQU87QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sc0VBQU87QUFDZCxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QywyRUFBVztBQUN4RDs7QUFFQTtBQUNBLE1BQU0sc0VBQU87QUFDYjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCLHVFQUFpQjs7QUFFMUM7QUFDQTtBQUNBLDBCQUEwQiwwRUFBWTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPLHNFQUFPLG1CQUFtQixzRUFBTztBQUN4QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEsTUFBTSxzRUFBTztBQUNiO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLHNFQUFPO0FBQ2I7QUFDQSxlQUFlLCtFQUFpQjtBQUNoQztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZUFBZSwrRUFBaUI7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsc0VBQU87QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFPO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFPO0FBQ1gsSUFBSSxzRUFBTztBQUNYO0FBQ0E7QUFDQSxJQUFJLHlCQUF5QiwrRUFBc0I7QUFDbkQ7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkVBQWE7QUFDdEI7QUFDQSx5REFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Qb2ludENsb3VkM0RUaWxlQ29udGVudC5qcz8yZmI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb2xvciBmcm9tIFwiLi4vQ29yZS9Db2xvci5qc1wiO1xuaW1wb3J0IGNvbWJpbmUgZnJvbSBcIi4uL0NvcmUvY29tYmluZS5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuaW1wb3J0IFBhc3MgZnJvbSBcIi4uL1JlbmRlcmVyL1Bhc3MuanNcIjtcbmltcG9ydCBDZXNpdW0zRFRpbGVCYXRjaFRhYmxlIGZyb20gXCIuL0Nlc2l1bTNEVGlsZUJhdGNoVGFibGUuanNcIjtcbmltcG9ydCBDZXNpdW0zRFRpbGVGZWF0dXJlIGZyb20gXCIuL0Nlc2l1bTNEVGlsZUZlYXR1cmUuanNcIjtcbmltcG9ydCBDZXNpdW0zRFRpbGVSZWZpbmUgZnJvbSBcIi4vQ2VzaXVtM0RUaWxlUmVmaW5lLmpzXCI7XG5pbXBvcnQgUG9pbnRDbG91ZCBmcm9tIFwiLi9Qb2ludENsb3VkLmpzXCI7XG5pbXBvcnQgUG9pbnRDbG91ZFNoYWRpbmcgZnJvbSBcIi4vUG9pbnRDbG91ZFNoYWRpbmcuanNcIjtcbmltcG9ydCBTY2VuZU1vZGUgZnJvbSBcIi4vU2NlbmVNb2RlLmpzXCI7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgY29udGVudHMgb2YgYVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy8zZC10aWxlcy90cmVlL21haW4vc3BlY2lmaWNhdGlvbi9UaWxlRm9ybWF0cy9Qb2ludENsb3VkfFBvaW50IENsb3VkfVxuICogdGlsZSBpbiBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvM2QtdGlsZXMvdHJlZS9tYWluL3NwZWNpZmljYXRpb258M0QgVGlsZXN9IHRpbGVzZXQuXG4gKiA8cD5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBDZXNpdW0zRFRpbGVDb250ZW50fSBpbnRlcmZhY2UuXG4gKiA8L3A+XG4gKlxuICogQGFsaWFzIFBvaW50Q2xvdWQzRFRpbGVDb250ZW50XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBQb2ludENsb3VkM0RUaWxlQ29udGVudChcbiAgdGlsZXNldCxcbiAgdGlsZSxcbiAgcmVzb3VyY2UsXG4gIGFycmF5QnVmZmVyLFxuICBieXRlT2Zmc2V0XG4pIHtcbiAgdGhpcy5fdGlsZXNldCA9IHRpbGVzZXQ7XG4gIHRoaXMuX3RpbGUgPSB0aWxlO1xuICB0aGlzLl9yZXNvdXJjZSA9IHJlc291cmNlO1xuICB0aGlzLl9waWNrSWQgPSB1bmRlZmluZWQ7IC8vIE9ubHkgZGVmaW5lZCB3aGVuIGJhdGNoVGFibGUgaXMgdW5kZWZpbmVkXG4gIHRoaXMuX2JhdGNoVGFibGUgPSB1bmRlZmluZWQ7IC8vIFVzZWQgd2hlbiBmZWF0dXJlIHRhYmxlIGNvbnRhaW5zIEJBVENIX0lEIHNlbWFudGljXG4gIHRoaXMuX3N0eWxlRGlydHkgPSBmYWxzZTtcbiAgdGhpcy5fZmVhdHVyZXMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuZmVhdHVyZVByb3BlcnRpZXNEaXJ0eSA9IGZhbHNlO1xuICB0aGlzLl9ncm91cE1ldGFkYXRhID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX3BvaW50Q2xvdWQgPSBuZXcgUG9pbnRDbG91ZCh7XG4gICAgYXJyYXlCdWZmZXI6IGFycmF5QnVmZmVyLFxuICAgIGJ5dGVPZmZzZXQ6IGJ5dGVPZmZzZXQsXG4gICAgY3VsbDogZmFsc2UsXG4gICAgb3BhcXVlUGFzczogUGFzcy5DRVNJVU1fM0RfVElMRSxcbiAgICB2ZXJ0ZXhTaGFkZXJMb2FkZWQ6IGdldFZlcnRleFNoYWRlckxvYWRlZCh0aGlzKSxcbiAgICBmcmFnbWVudFNoYWRlckxvYWRlZDogZ2V0RnJhZ21lbnRTaGFkZXJMb2FkZWQodGhpcyksXG4gICAgdW5pZm9ybU1hcExvYWRlZDogZ2V0VW5pZm9ybU1hcExvYWRlZCh0aGlzKSxcbiAgICBiYXRjaFRhYmxlTG9hZGVkOiBnZXRCYXRjaFRhYmxlTG9hZGVkKHRoaXMpLFxuICAgIHBpY2tJZExvYWRlZDogZ2V0UGlja0lkTG9hZGVkKHRoaXMpLFxuICB9KTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUG9pbnRDbG91ZDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLCB7XG4gIGZlYXR1cmVzTGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoZGVmaW5lZCh0aGlzLl9iYXRjaFRhYmxlKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmF0Y2hUYWJsZS5mZWF0dXJlc0xlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAwO1xuICAgIH0sXG4gIH0sXG5cbiAgcG9pbnRzTGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcG9pbnRDbG91ZC5wb2ludHNMZW5ndGg7XG4gICAgfSxcbiAgfSxcblxuICB0cmlhbmdsZXNMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0sXG4gIH0sXG5cbiAgZ2VvbWV0cnlCeXRlTGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcG9pbnRDbG91ZC5nZW9tZXRyeUJ5dGVMZW5ndGg7XG4gICAgfSxcbiAgfSxcblxuICB0ZXh0dXJlc0J5dGVMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0sXG4gIH0sXG5cbiAgYmF0Y2hUYWJsZUJ5dGVMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChkZWZpbmVkKHRoaXMuX2JhdGNoVGFibGUpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYXRjaFRhYmxlLm1lbW9yeVNpemVJbkJ5dGVzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgfSxcblxuICBpbm5lckNvbnRlbnRzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcG9pbnRDbG91ZC5yZWFkeVByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICB0aWxlc2V0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdGlsZXNldDtcbiAgICB9LFxuICB9LFxuXG4gIHRpbGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90aWxlO1xuICAgIH0sXG4gIH0sXG5cbiAgdXJsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVzb3VyY2UuZ2V0VXJsQ29tcG9uZW50KHRydWUpO1xuICAgIH0sXG4gIH0sXG5cbiAgYmF0Y2hUYWJsZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2JhdGNoVGFibGU7XG4gICAgfSxcbiAgfSxcblxuICBncm91cE1ldGFkYXRhOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ3JvdXBNZXRhZGF0YTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLl9ncm91cE1ldGFkYXRhID0gdmFsdWU7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiBnZXRWZXJ0ZXhTaGFkZXJMb2FkZWQoY29udGVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZzKSB7XG4gICAgaWYgKGRlZmluZWQoY29udGVudC5fYmF0Y2hUYWJsZSkpIHtcbiAgICAgIHJldHVybiBjb250ZW50Ll9iYXRjaFRhYmxlLmdldFZlcnRleFNoYWRlckNhbGxiYWNrKFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgXCJhX2JhdGNoSWRcIixcbiAgICAgICAgdW5kZWZpbmVkXG4gICAgICApKHZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZzO1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlckxvYWRlZChjb250ZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZnMpIHtcbiAgICBpZiAoZGVmaW5lZChjb250ZW50Ll9iYXRjaFRhYmxlKSkge1xuICAgICAgcmV0dXJuIGNvbnRlbnQuX2JhdGNoVGFibGUuZ2V0RnJhZ21lbnRTaGFkZXJDYWxsYmFjayhcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgZmFsc2VcbiAgICAgICkoZnMpO1xuICAgIH1cbiAgICByZXR1cm4gXCJ1bmlmb3JtIHZlYzQgY3ptX3BpY2tDb2xvcjtcXG5cIiArIGZzO1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRVbmlmb3JtTWFwTG9hZGVkKGNvbnRlbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh1bmlmb3JtTWFwKSB7XG4gICAgaWYgKGRlZmluZWQoY29udGVudC5fYmF0Y2hUYWJsZSkpIHtcbiAgICAgIHJldHVybiBjb250ZW50Ll9iYXRjaFRhYmxlLmdldFVuaWZvcm1NYXBDYWxsYmFjaygpKHVuaWZvcm1NYXApO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZSh1bmlmb3JtTWFwLCB7XG4gICAgICBjem1fcGlja0NvbG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50Ll9waWNrSWQuY29sb3I7XG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRCYXRjaFRhYmxlTG9hZGVkKGNvbnRlbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChiYXRjaExlbmd0aCwgYmF0Y2hUYWJsZUpzb24sIGJhdGNoVGFibGVCaW5hcnkpIHtcbiAgICBjb250ZW50Ll9iYXRjaFRhYmxlID0gbmV3IENlc2l1bTNEVGlsZUJhdGNoVGFibGUoXG4gICAgICBjb250ZW50LFxuICAgICAgYmF0Y2hMZW5ndGgsXG4gICAgICBiYXRjaFRhYmxlSnNvbixcbiAgICAgIGJhdGNoVGFibGVCaW5hcnlcbiAgICApO1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRQaWNrSWRMb2FkZWQoY29udGVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkZWZpbmVkKGNvbnRlbnQuX2JhdGNoVGFibGUpXG4gICAgICA/IGNvbnRlbnQuX2JhdGNoVGFibGUuZ2V0UGlja0lkKClcbiAgICAgIDogXCJjem1fcGlja0NvbG9yXCI7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEdlb21ldHJpY0Vycm9yKGNvbnRlbnQpIHtcbiAgdmFyIHBvaW50Q2xvdWRTaGFkaW5nID0gY29udGVudC5fdGlsZXNldC5wb2ludENsb3VkU2hhZGluZztcbiAgdmFyIHNwaGVyZVZvbHVtZSA9IGNvbnRlbnQuX3RpbGUuY29udGVudEJvdW5kaW5nVm9sdW1lLmJvdW5kaW5nU3BoZXJlLnZvbHVtZSgpO1xuICB2YXIgYmFzZVJlc29sdXRpb25BcHByb3hpbWF0aW9uID0gQ2VzaXVtTWF0aC5jYnJ0KFxuICAgIHNwaGVyZVZvbHVtZSAvIGNvbnRlbnQucG9pbnRzTGVuZ3RoXG4gICk7XG5cbiAgdmFyIGdlb21ldHJpY0Vycm9yID0gY29udGVudC5fdGlsZS5nZW9tZXRyaWNFcnJvcjtcbiAgaWYgKGdlb21ldHJpY0Vycm9yID09PSAwKSB7XG4gICAgaWYgKFxuICAgICAgZGVmaW5lZChwb2ludENsb3VkU2hhZGluZykgJiZcbiAgICAgIGRlZmluZWQocG9pbnRDbG91ZFNoYWRpbmcuYmFzZVJlc29sdXRpb24pXG4gICAgKSB7XG4gICAgICBnZW9tZXRyaWNFcnJvciA9IHBvaW50Q2xvdWRTaGFkaW5nLmJhc2VSZXNvbHV0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW9tZXRyaWNFcnJvciA9IGJhc2VSZXNvbHV0aW9uQXBwcm94aW1hdGlvbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdlb21ldHJpY0Vycm9yO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGZWF0dXJlcyhjb250ZW50KSB7XG4gIHZhciBmZWF0dXJlc0xlbmd0aCA9IGNvbnRlbnQuZmVhdHVyZXNMZW5ndGg7XG4gIGlmICghZGVmaW5lZChjb250ZW50Ll9mZWF0dXJlcykgJiYgZmVhdHVyZXNMZW5ndGggPiAwKSB7XG4gICAgdmFyIGZlYXR1cmVzID0gbmV3IEFycmF5KGZlYXR1cmVzTGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZlYXR1cmVzTGVuZ3RoOyArK2kpIHtcbiAgICAgIGZlYXR1cmVzW2ldID0gbmV3IENlc2l1bTNEVGlsZUZlYXR1cmUoY29udGVudCwgaSk7XG4gICAgfVxuICAgIGNvbnRlbnQuX2ZlYXR1cmVzID0gZmVhdHVyZXM7XG4gIH1cbn1cblxuUG9pbnRDbG91ZDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmhhc1Byb3BlcnR5ID0gZnVuY3Rpb24gKGJhdGNoSWQsIG5hbWUpIHtcbiAgaWYgKGRlZmluZWQodGhpcy5fYmF0Y2hUYWJsZSkpIHtcbiAgICByZXR1cm4gdGhpcy5fYmF0Y2hUYWJsZS5oYXNQcm9wZXJ0eShiYXRjaElkLCBuYW1lKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFBhcnQgb2YgdGhlIHtAbGluayBDZXNpdW0zRFRpbGVDb250ZW50fSBpbnRlcmZhY2UuXG4gKlxuICogSW4gdGhpcyBjb250ZXh0IGEgZmVhdHVyZSByZWZlcnMgdG8gYSBncm91cCBvZiBwb2ludHMgdGhhdCBzaGFyZSB0aGUgc2FtZSBCQVRDSF9JRC5cbiAqIEZvciBleGFtcGxlIGFsbCB0aGUgcG9pbnRzIHRoYXQgcmVwcmVzZW50IGEgZG9vciBpbiBhIGhvdXNlIHBvaW50IGNsb3VkIHdvdWxkIGJlIGEgZmVhdHVyZS5cbiAqXG4gKiBGZWF0dXJlcyBhcmUgYmFja2VkIGJ5IGEgYmF0Y2ggdGFibGUgYW5kIGNhbiBiZSBjb2xvcmVkLCBzaG93bi9oaWRkZW4sIHBpY2tlZCwgZXRjIGxpa2UgZmVhdHVyZXNcbiAqIGluIGIzZG0gYW5kIGkzZG0uXG4gKlxuICogV2hlbiB0aGUgQkFUQ0hfSUQgc2VtYW50aWMgaXMgb21pdHRlZCBhbmQgdGhlIHBvaW50IGNsb3VkIHN0b3JlcyBwZXItcG9pbnQgcHJvcGVydGllcywgdGhleVxuICogYXJlIG5vdCBhY2Nlc3NpYmxlIGJ5IGdldEZlYXR1cmUuIFRoZXkgYXJlIG9ubHkgdXNlZCBmb3IgZHluYW1pYyBzdHlsaW5nLlxuICovXG5Qb2ludENsb3VkM0RUaWxlQ29udGVudC5wcm90b3R5cGUuZ2V0RmVhdHVyZSA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XG4gIGlmICghZGVmaW5lZCh0aGlzLl9iYXRjaFRhYmxlKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgdmFyIGZlYXR1cmVzTGVuZ3RoID0gdGhpcy5mZWF0dXJlc0xlbmd0aDtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGJhdGNoSWQpIHx8IGJhdGNoSWQgPCAwIHx8IGJhdGNoSWQgPj0gZmVhdHVyZXNMZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcImJhdGNoSWQgaXMgcmVxdWlyZWQgYW5kIGJldHdlZW4gemVybyBhbmQgZmVhdHVyZXNMZW5ndGggLSAxIChcIiArXG4gICAgICAgIChmZWF0dXJlc0xlbmd0aCAtIDEpICtcbiAgICAgICAgXCIpLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgY3JlYXRlRmVhdHVyZXModGhpcyk7XG4gIHJldHVybiB0aGlzLl9mZWF0dXJlc1tiYXRjaElkXTtcbn07XG5cblBvaW50Q2xvdWQzRFRpbGVDb250ZW50LnByb3RvdHlwZS5hcHBseURlYnVnU2V0dGluZ3MgPSBmdW5jdGlvbiAoXG4gIGVuYWJsZWQsXG4gIGNvbG9yXG4pIHtcbiAgdGhpcy5fcG9pbnRDbG91ZC5jb2xvciA9IGVuYWJsZWQgPyBjb2xvciA6IENvbG9yLldISVRFO1xufTtcblxuUG9pbnRDbG91ZDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUpIHtcbiAgaWYgKGRlZmluZWQodGhpcy5fYmF0Y2hUYWJsZSkpIHtcbiAgICB0aGlzLl9iYXRjaFRhYmxlLmFwcGx5U3R5bGUoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX3N0eWxlRGlydHkgPSB0cnVlO1xuICB9XG59O1xuXG52YXIgZGVmYXVsdFNoYWRpbmcgPSBuZXcgUG9pbnRDbG91ZFNoYWRpbmcoKTtcblxuUG9pbnRDbG91ZDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aWxlc2V0LCBmcmFtZVN0YXRlKSB7XG4gIHZhciBwb2ludENsb3VkID0gdGhpcy5fcG9pbnRDbG91ZDtcbiAgdmFyIHBvaW50Q2xvdWRTaGFkaW5nID0gZGVmYXVsdFZhbHVlKFxuICAgIHRpbGVzZXQucG9pbnRDbG91ZFNoYWRpbmcsXG4gICAgZGVmYXVsdFNoYWRpbmdcbiAgKTtcbiAgdmFyIHRpbGUgPSB0aGlzLl90aWxlO1xuICB2YXIgYmF0Y2hUYWJsZSA9IHRoaXMuX2JhdGNoVGFibGU7XG4gIHZhciBtb2RlID0gZnJhbWVTdGF0ZS5tb2RlO1xuICB2YXIgY2xpcHBpbmdQbGFuZXMgPSB0aWxlc2V0LmNsaXBwaW5nUGxhbmVzO1xuXG4gIGlmICghZGVmaW5lZCh0aGlzLl9waWNrSWQpICYmICFkZWZpbmVkKGJhdGNoVGFibGUpKSB7XG4gICAgdGhpcy5fcGlja0lkID0gZnJhbWVTdGF0ZS5jb250ZXh0LmNyZWF0ZVBpY2tJZCh7XG4gICAgICBwcmltaXRpdmU6IHRpbGVzZXQsXG4gICAgICBjb250ZW50OiB0aGlzLFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGRlZmluZWQoYmF0Y2hUYWJsZSkpIHtcbiAgICBiYXRjaFRhYmxlLnVwZGF0ZSh0aWxlc2V0LCBmcmFtZVN0YXRlKTtcbiAgfVxuXG4gIHZhciBib3VuZGluZ1NwaGVyZTtcbiAgaWYgKGRlZmluZWQodGlsZS5fY29udGVudEJvdW5kaW5nVm9sdW1lKSkge1xuICAgIGJvdW5kaW5nU3BoZXJlID1cbiAgICAgIG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEXG4gICAgICAgID8gdGlsZS5fY29udGVudEJvdW5kaW5nVm9sdW1lLmJvdW5kaW5nU3BoZXJlXG4gICAgICAgIDogdGlsZS5fY29udGVudEJvdW5kaW5nVm9sdW1lMkQuYm91bmRpbmdTcGhlcmU7XG4gIH0gZWxzZSB7XG4gICAgYm91bmRpbmdTcGhlcmUgPVxuICAgICAgbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0RcbiAgICAgICAgPyB0aWxlLl9ib3VuZGluZ1ZvbHVtZS5ib3VuZGluZ1NwaGVyZVxuICAgICAgICA6IHRpbGUuX2JvdW5kaW5nVm9sdW1lMkQuYm91bmRpbmdTcGhlcmU7XG4gIH1cblxuICB2YXIgc3R5bGVEaXJ0eSA9IHRoaXMuX3N0eWxlRGlydHk7XG4gIHRoaXMuX3N0eWxlRGlydHkgPSBmYWxzZTtcblxuICBwb2ludENsb3VkLmNsaXBwaW5nUGxhbmVzT3JpZ2luTWF0cml4ID0gdGlsZXNldC5jbGlwcGluZ1BsYW5lc09yaWdpbk1hdHJpeDtcbiAgcG9pbnRDbG91ZC5zdHlsZSA9IGRlZmluZWQoYmF0Y2hUYWJsZSkgPyB1bmRlZmluZWQgOiB0aWxlc2V0LnN0eWxlO1xuICBwb2ludENsb3VkLnN0eWxlRGlydHkgPSBzdHlsZURpcnR5O1xuICBwb2ludENsb3VkLm1vZGVsTWF0cml4ID0gdGlsZS5jb21wdXRlZFRyYW5zZm9ybTtcbiAgcG9pbnRDbG91ZC50aW1lID0gdGlsZXNldC50aW1lU2luY2VMb2FkO1xuICBwb2ludENsb3VkLnNoYWRvd3MgPSB0aWxlc2V0LnNoYWRvd3M7XG4gIHBvaW50Q2xvdWQuYm91bmRpbmdTcGhlcmUgPSBib3VuZGluZ1NwaGVyZTtcbiAgcG9pbnRDbG91ZC5jbGlwcGluZ1BsYW5lcyA9IGNsaXBwaW5nUGxhbmVzO1xuICBwb2ludENsb3VkLmlzQ2xpcHBlZCA9XG4gICAgZGVmaW5lZChjbGlwcGluZ1BsYW5lcykgJiYgY2xpcHBpbmdQbGFuZXMuZW5hYmxlZCAmJiB0aWxlLl9pc0NsaXBwZWQ7XG4gIHBvaW50Q2xvdWQuY2xpcHBpbmdQbGFuZXNEaXJ0eSA9IHRpbGUuY2xpcHBpbmdQbGFuZXNEaXJ0eTtcbiAgcG9pbnRDbG91ZC5hdHRlbnVhdGlvbiA9IHBvaW50Q2xvdWRTaGFkaW5nLmF0dGVudWF0aW9uO1xuICBwb2ludENsb3VkLmJhY2tGYWNlQ3VsbGluZyA9IHBvaW50Q2xvdWRTaGFkaW5nLmJhY2tGYWNlQ3VsbGluZztcbiAgcG9pbnRDbG91ZC5ub3JtYWxTaGFkaW5nID0gcG9pbnRDbG91ZFNoYWRpbmcubm9ybWFsU2hhZGluZztcbiAgcG9pbnRDbG91ZC5nZW9tZXRyaWNFcnJvciA9IGdldEdlb21ldHJpY0Vycm9yKHRoaXMpO1xuICBwb2ludENsb3VkLmdlb21ldHJpY0Vycm9yU2NhbGUgPSBwb2ludENsb3VkU2hhZGluZy5nZW9tZXRyaWNFcnJvclNjYWxlO1xuICBpZiAoXG4gICAgZGVmaW5lZChwb2ludENsb3VkU2hhZGluZykgJiZcbiAgICBkZWZpbmVkKHBvaW50Q2xvdWRTaGFkaW5nLm1heGltdW1BdHRlbnVhdGlvbilcbiAgKSB7XG4gICAgcG9pbnRDbG91ZC5tYXhpbXVtQXR0ZW51YXRpb24gPSBwb2ludENsb3VkU2hhZGluZy5tYXhpbXVtQXR0ZW51YXRpb247XG4gIH0gZWxzZSBpZiAodGlsZS5yZWZpbmUgPT09IENlc2l1bTNEVGlsZVJlZmluZS5BREQpIHtcbiAgICBwb2ludENsb3VkLm1heGltdW1BdHRlbnVhdGlvbiA9IDUuMDtcbiAgfSBlbHNlIHtcbiAgICBwb2ludENsb3VkLm1heGltdW1BdHRlbnVhdGlvbiA9IHRpbGVzZXQubWF4aW11bVNjcmVlblNwYWNlRXJyb3I7XG4gIH1cblxuICBwb2ludENsb3VkLnVwZGF0ZShmcmFtZVN0YXRlKTtcbn07XG5cblBvaW50Q2xvdWQzRFRpbGVDb250ZW50LnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuUG9pbnRDbG91ZDNEVGlsZUNvbnRlbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3BpY2tJZCA9IHRoaXMuX3BpY2tJZCAmJiB0aGlzLl9waWNrSWQuZGVzdHJveSgpO1xuICB0aGlzLl9wb2ludENsb3VkID0gdGhpcy5fcG9pbnRDbG91ZCAmJiB0aGlzLl9wb2ludENsb3VkLmRlc3Ryb3koKTtcbiAgdGhpcy5fYmF0Y2hUYWJsZSA9IHRoaXMuX2JhdGNoVGFibGUgJiYgdGhpcy5fYmF0Y2hUYWJsZS5kZXN0cm95KCk7XG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFBvaW50Q2xvdWQzRFRpbGVDb250ZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8707\n')},29388:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(86511);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(38443);\n/* harmony import */ var _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97264);\n/* harmony import */ var _Renderer_ClearCommand_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39899);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(60072);\n/* harmony import */ var _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2932);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8379);\n/* harmony import */ var _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(21572);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(87721);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(53642);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(8743);\n/* harmony import */ var _Scene_BlendingState_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(13633);\n/* harmony import */ var _Scene_StencilConstants_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87233);\n/* harmony import */ var _Shaders_PostProcessStages_PointCloudEyeDomeLighting_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(43474);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Eye dome lighting. Does not support points with per-point translucency, but does allow translucent styling against the globe.\n * Requires support for EXT_frag_depth and WEBGL_draw_buffers extensions in WebGL 1.0.\n *\n * @private\n */\nfunction PointCloudEyeDomeLighting() {\n  this._framebuffer = undefined;\n  this._colorGBuffer = undefined; // color gbuffer\n  this._depthGBuffer = undefined; // depth gbuffer\n  this._depthTexture = undefined; // needed to write depth so camera based on depth works\n  this._drawCommand = undefined;\n  this._clearCommand = undefined;\n\n  this._strength = 1.0;\n  this._radius = 1.0;\n}\n\nfunction destroyFramebuffer(processor) {\n  var framebuffer = processor._framebuffer;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(framebuffer)) {\n    return;\n  }\n\n  processor._colorGBuffer.destroy();\n  processor._depthGBuffer.destroy();\n  processor._depthTexture.destroy();\n  framebuffer.destroy();\n\n  processor._framebuffer = undefined;\n  processor._colorGBuffer = undefined;\n  processor._depthGBuffer = undefined;\n  processor._depthTexture = undefined;\n  processor._drawCommand = undefined;\n  processor._clearCommand = undefined;\n}\n\nfunction createFramebuffer(processor, context) {\n  var screenWidth = context.drawingBufferWidth;\n  var screenHeight = context.drawingBufferHeight;\n\n  var colorGBuffer = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z({\n    context: context,\n    width: screenWidth,\n    height: screenHeight,\n    pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].RGBA */ .Z.RGBA,\n    pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n    sampler: _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].NEAREST */ .Z.NEAREST,\n  });\n\n  var depthGBuffer = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z({\n    context: context,\n    width: screenWidth,\n    height: screenHeight,\n    pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].RGBA */ .Z.RGBA,\n    pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n    sampler: _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].NEAREST */ .Z.NEAREST,\n  });\n\n  var depthTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z({\n    context: context,\n    width: screenWidth,\n    height: screenHeight,\n    pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].DEPTH_COMPONENT */ .Z.DEPTH_COMPONENT,\n    pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].UNSIGNED_INT */ .Z.UNSIGNED_INT,\n    sampler: _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].NEAREST */ .Z.NEAREST,\n  });\n\n  processor._framebuffer = new _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    context: context,\n    colorTextures: [colorGBuffer, depthGBuffer],\n    depthTexture: depthTexture,\n    destroyAttachments: false,\n  });\n  processor._colorGBuffer = colorGBuffer;\n  processor._depthGBuffer = depthGBuffer;\n  processor._depthTexture = depthTexture;\n}\n\nvar distanceAndEdlStrengthScratch = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\nfunction createCommands(processor, context) {\n  var blendFS = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n    defines: ["LOG_DEPTH_WRITE"],\n    sources: [_Shaders_PostProcessStages_PointCloudEyeDomeLighting_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z],\n  });\n\n  var blendUniformMap = {\n    u_pointCloud_colorGBuffer: function () {\n      return processor._colorGBuffer;\n    },\n    u_pointCloud_depthGBuffer: function () {\n      return processor._depthGBuffer;\n    },\n    u_distanceAndEdlStrength: function () {\n      distanceAndEdlStrengthScratch.x = processor._radius;\n      distanceAndEdlStrengthScratch.y = processor._strength;\n      return distanceAndEdlStrengthScratch;\n    },\n  };\n\n  var blendRenderState = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromCache */ .Z.fromCache({\n    blending: _Scene_BlendingState_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n    depthMask: true,\n    depthTest: {\n      enabled: true,\n    },\n    stencilTest: _Scene_StencilConstants_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].setCesium3DTileBit */ .Z.setCesium3DTileBit(),\n    stencilMask: _Scene_StencilConstants_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK,\n  });\n\n  processor._drawCommand = context.createViewportQuadCommand(blendFS, {\n    uniformMap: blendUniformMap,\n    renderState: blendRenderState,\n    pass: _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE,\n    owner: processor,\n  });\n\n  processor._clearCommand = new _Renderer_ClearCommand_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n    framebuffer: processor._framebuffer,\n    color: new _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(0.0, 0.0, 0.0, 0.0),\n    depth: 1.0,\n    renderState: _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromCache */ .Z.fromCache(),\n    pass: _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE,\n    owner: processor,\n  });\n}\n\nfunction createResources(processor, context) {\n  var screenWidth = context.drawingBufferWidth;\n  var screenHeight = context.drawingBufferHeight;\n  var colorGBuffer = processor._colorGBuffer;\n  var nowDirty = false;\n  var resized =\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(colorGBuffer) &&\n    (colorGBuffer.width !== screenWidth ||\n      colorGBuffer.height !== screenHeight);\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(colorGBuffer) || resized) {\n    destroyFramebuffer(processor);\n    createFramebuffer(processor, context);\n    createCommands(processor, context);\n    nowDirty = true;\n  }\n  return nowDirty;\n}\n\nfunction isSupported(context) {\n  return context.drawBuffers && context.fragmentDepth;\n}\n\nPointCloudEyeDomeLighting.isSupported = isSupported;\n\nfunction getECShaderProgram(context, shaderProgram) {\n  var shader = context.shaderCache.getDerivedShaderProgram(shaderProgram, "EC");\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(shader)) {\n    var attributeLocations = shaderProgram._attributeLocations;\n\n    var fs = shaderProgram.fragmentShaderSource.clone();\n\n    fs.sources = fs.sources.map(function (source) {\n      source = _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].replaceMain */ .Z.replaceMain(\n        source,\n        "czm_point_cloud_post_process_main"\n      );\n      source = source.replace(/gl_FragColor/g, "gl_FragData[0]");\n      return source;\n    });\n\n    fs.sources.unshift("#extension GL_EXT_draw_buffers : enable \\n");\n    fs.sources.push(\n      "void main() \\n" +\n        "{ \\n" +\n        "    czm_point_cloud_post_process_main(); \\n" +\n        "#ifdef LOG_DEPTH\\n" +\n        "    czm_writeLogDepth();\\n" +\n        "    gl_FragData[1] = czm_packDepth(gl_FragDepthEXT); \\n" +\n        "#else\\n" +\n        "    gl_FragData[1] = czm_packDepth(gl_FragCoord.z);\\n" +\n        "#endif\\n" +\n        "}"\n    );\n\n    shader = context.shaderCache.createDerivedShaderProgram(\n      shaderProgram,\n      "EC",\n      {\n        vertexShaderSource: shaderProgram.vertexShaderSource,\n        fragmentShaderSource: fs,\n        attributeLocations: attributeLocations,\n      }\n    );\n  }\n\n  return shader;\n}\n\nPointCloudEyeDomeLighting.prototype.update = function (\n  frameState,\n  commandStart,\n  pointCloudShading,\n  boundingVolume\n) {\n  if (!isSupported(frameState.context)) {\n    return;\n  }\n\n  this._strength = pointCloudShading.eyeDomeLightingStrength;\n  this._radius =\n    pointCloudShading.eyeDomeLightingRadius * frameState.pixelRatio;\n\n  var dirty = createResources(this, frameState.context);\n\n  // Hijack existing point commands to render into an offscreen FBO.\n  var i;\n  var commandList = frameState.commandList;\n  var commandEnd = commandList.length;\n\n  var derivedCommand;\n  var originalShaderProgram;\n\n  for (i = commandStart; i < commandEnd; ++i) {\n    var command = commandList[i];\n    if (\n      command.primitiveType !== _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].POINTS */ .Z.POINTS ||\n      command.pass === _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT\n    ) {\n      continue;\n    }\n\n    // These variables need to get reset for each iteration. It has to be\n    // done manually since var is function scope not block scope.\n    derivedCommand = undefined;\n    originalShaderProgram = undefined;\n\n    var derivedCommandObject = command.derivedCommands.pointCloudProcessor;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(derivedCommandObject)) {\n      derivedCommand = derivedCommandObject.command;\n      originalShaderProgram = derivedCommandObject.originalShaderProgram;\n    }\n\n    if (\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(derivedCommand) ||\n      command.dirty ||\n      dirty ||\n      originalShaderProgram !== command.shaderProgram ||\n      derivedCommand.framebuffer !== this._framebuffer\n    ) {\n      // Prevent crash when tiles out-of-view come in-view during context size change or\n      // when the underlying shader changes while EDL is disabled\n      derivedCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(command, derivedCommand);\n      derivedCommand.framebuffer = this._framebuffer;\n      derivedCommand.shaderProgram = getECShaderProgram(\n        frameState.context,\n        command.shaderProgram\n      );\n      derivedCommand.castShadows = false;\n      derivedCommand.receiveShadows = false;\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(derivedCommandObject)) {\n        derivedCommandObject = {\n          command: derivedCommand,\n          originalShaderProgram: command.shaderProgram,\n        };\n        command.derivedCommands.pointCloudProcessor = derivedCommandObject;\n      }\n\n      derivedCommandObject.originalShaderProgram = command.shaderProgram;\n    }\n\n    commandList[i] = derivedCommand;\n  }\n\n  var clearCommand = this._clearCommand;\n  var blendCommand = this._drawCommand;\n\n  blendCommand.boundingVolume = boundingVolume;\n\n  // Blend EDL into the main FBO\n  commandList.push(blendCommand);\n  commandList.push(clearCommand);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see PointCloudEyeDomeLighting#destroy\n */\nPointCloudEyeDomeLighting.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * processor = processor && processor.destroy();\n *\n * @see PointCloudEyeDomeLighting#isDestroyed\n */\nPointCloudEyeDomeLighting.prototype.destroy = function () {\n  destroyFramebuffer(this);\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PointCloudEyeDomeLighting);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTyxzRUFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1HQUF3QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLHNFQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBLHdEQUF3RDtBQUN4RCw4Q0FBOEMsc0JBQXNCO0FBQ3BFO0FBQ0EsYUFBYSxTQUFTLGdEQUFnRDtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkVBQWE7QUFDdEI7QUFDQSx5REFBZSx5QkFBeUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Qb2ludENsb3VkRXllRG9tZUxpZ2h0aW5nLmpzP2VlNjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgUGl4ZWxGb3JtYXQgZnJvbSBcIi4uL0NvcmUvUGl4ZWxGb3JtYXQuanNcIjtcbmltcG9ydCBQcmltaXRpdmVUeXBlIGZyb20gXCIuLi9Db3JlL1ByaW1pdGl2ZVR5cGUuanNcIjtcbmltcG9ydCBDbGVhckNvbW1hbmQgZnJvbSBcIi4uL1JlbmRlcmVyL0NsZWFyQ29tbWFuZC5qc1wiO1xuaW1wb3J0IERyYXdDb21tYW5kIGZyb20gXCIuLi9SZW5kZXJlci9EcmF3Q29tbWFuZC5qc1wiO1xuaW1wb3J0IEZyYW1lYnVmZmVyIGZyb20gXCIuLi9SZW5kZXJlci9GcmFtZWJ1ZmZlci5qc1wiO1xuaW1wb3J0IFBhc3MgZnJvbSBcIi4uL1JlbmRlcmVyL1Bhc3MuanNcIjtcbmltcG9ydCBQaXhlbERhdGF0eXBlIGZyb20gXCIuLi9SZW5kZXJlci9QaXhlbERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgUmVuZGVyU3RhdGUgZnJvbSBcIi4uL1JlbmRlcmVyL1JlbmRlclN0YXRlLmpzXCI7XG5pbXBvcnQgU2FtcGxlciBmcm9tIFwiLi4vUmVuZGVyZXIvU2FtcGxlci5qc1wiO1xuaW1wb3J0IFNoYWRlclNvdXJjZSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyU291cmNlLmpzXCI7XG5pbXBvcnQgVGV4dHVyZSBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZS5qc1wiO1xuaW1wb3J0IEJsZW5kaW5nU3RhdGUgZnJvbSBcIi4uL1NjZW5lL0JsZW5kaW5nU3RhdGUuanNcIjtcbmltcG9ydCBTdGVuY2lsQ29uc3RhbnRzIGZyb20gXCIuLi9TY2VuZS9TdGVuY2lsQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgUG9pbnRDbG91ZEV5ZURvbWVMaWdodGluZ1NoYWRlciBmcm9tIFwiLi4vU2hhZGVycy9Qb3N0UHJvY2Vzc1N0YWdlcy9Qb2ludENsb3VkRXllRG9tZUxpZ2h0aW5nLmpzXCI7XG5cbi8qKlxuICogRXllIGRvbWUgbGlnaHRpbmcuIERvZXMgbm90IHN1cHBvcnQgcG9pbnRzIHdpdGggcGVyLXBvaW50IHRyYW5zbHVjZW5jeSwgYnV0IGRvZXMgYWxsb3cgdHJhbnNsdWNlbnQgc3R5bGluZyBhZ2FpbnN0IHRoZSBnbG9iZS5cbiAqIFJlcXVpcmVzIHN1cHBvcnQgZm9yIEVYVF9mcmFnX2RlcHRoIGFuZCBXRUJHTF9kcmF3X2J1ZmZlcnMgZXh0ZW5zaW9ucyBpbiBXZWJHTCAxLjAuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gUG9pbnRDbG91ZEV5ZURvbWVMaWdodGluZygpIHtcbiAgdGhpcy5fZnJhbWVidWZmZXIgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2NvbG9yR0J1ZmZlciA9IHVuZGVmaW5lZDsgLy8gY29sb3IgZ2J1ZmZlclxuICB0aGlzLl9kZXB0aEdCdWZmZXIgPSB1bmRlZmluZWQ7IC8vIGRlcHRoIGdidWZmZXJcbiAgdGhpcy5fZGVwdGhUZXh0dXJlID0gdW5kZWZpbmVkOyAvLyBuZWVkZWQgdG8gd3JpdGUgZGVwdGggc28gY2FtZXJhIGJhc2VkIG9uIGRlcHRoIHdvcmtzXG4gIHRoaXMuX2RyYXdDb21tYW5kID0gdW5kZWZpbmVkO1xuICB0aGlzLl9jbGVhckNvbW1hbmQgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fc3RyZW5ndGggPSAxLjA7XG4gIHRoaXMuX3JhZGl1cyA9IDEuMDtcbn1cblxuZnVuY3Rpb24gZGVzdHJveUZyYW1lYnVmZmVyKHByb2Nlc3Nvcikge1xuICB2YXIgZnJhbWVidWZmZXIgPSBwcm9jZXNzb3IuX2ZyYW1lYnVmZmVyO1xuICBpZiAoIWRlZmluZWQoZnJhbWVidWZmZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJvY2Vzc29yLl9jb2xvckdCdWZmZXIuZGVzdHJveSgpO1xuICBwcm9jZXNzb3IuX2RlcHRoR0J1ZmZlci5kZXN0cm95KCk7XG4gIHByb2Nlc3Nvci5fZGVwdGhUZXh0dXJlLmRlc3Ryb3koKTtcbiAgZnJhbWVidWZmZXIuZGVzdHJveSgpO1xuXG4gIHByb2Nlc3Nvci5fZnJhbWVidWZmZXIgPSB1bmRlZmluZWQ7XG4gIHByb2Nlc3Nvci5fY29sb3JHQnVmZmVyID0gdW5kZWZpbmVkO1xuICBwcm9jZXNzb3IuX2RlcHRoR0J1ZmZlciA9IHVuZGVmaW5lZDtcbiAgcHJvY2Vzc29yLl9kZXB0aFRleHR1cmUgPSB1bmRlZmluZWQ7XG4gIHByb2Nlc3Nvci5fZHJhd0NvbW1hbmQgPSB1bmRlZmluZWQ7XG4gIHByb2Nlc3Nvci5fY2xlYXJDb21tYW5kID0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGcmFtZWJ1ZmZlcihwcm9jZXNzb3IsIGNvbnRleHQpIHtcbiAgdmFyIHNjcmVlbldpZHRoID0gY29udGV4dC5kcmF3aW5nQnVmZmVyV2lkdGg7XG4gIHZhciBzY3JlZW5IZWlnaHQgPSBjb250ZXh0LmRyYXdpbmdCdWZmZXJIZWlnaHQ7XG5cbiAgdmFyIGNvbG9yR0J1ZmZlciA9IG5ldyBUZXh0dXJlKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHdpZHRoOiBzY3JlZW5XaWR0aCxcbiAgICBoZWlnaHQ6IHNjcmVlbkhlaWdodCxcbiAgICBwaXhlbEZvcm1hdDogUGl4ZWxGb3JtYXQuUkdCQSxcbiAgICBwaXhlbERhdGF0eXBlOiBQaXhlbERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgc2FtcGxlcjogU2FtcGxlci5ORUFSRVNULFxuICB9KTtcblxuICB2YXIgZGVwdGhHQnVmZmVyID0gbmV3IFRleHR1cmUoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgd2lkdGg6IHNjcmVlbldpZHRoLFxuICAgIGhlaWdodDogc2NyZWVuSGVpZ2h0LFxuICAgIHBpeGVsRm9ybWF0OiBQaXhlbEZvcm1hdC5SR0JBLFxuICAgIHBpeGVsRGF0YXR5cGU6IFBpeGVsRGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICBzYW1wbGVyOiBTYW1wbGVyLk5FQVJFU1QsXG4gIH0pO1xuXG4gIHZhciBkZXB0aFRleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICB3aWR0aDogc2NyZWVuV2lkdGgsXG4gICAgaGVpZ2h0OiBzY3JlZW5IZWlnaHQsXG4gICAgcGl4ZWxGb3JtYXQ6IFBpeGVsRm9ybWF0LkRFUFRIX0NPTVBPTkVOVCxcbiAgICBwaXhlbERhdGF0eXBlOiBQaXhlbERhdGF0eXBlLlVOU0lHTkVEX0lOVCxcbiAgICBzYW1wbGVyOiBTYW1wbGVyLk5FQVJFU1QsXG4gIH0pO1xuXG4gIHByb2Nlc3Nvci5fZnJhbWVidWZmZXIgPSBuZXcgRnJhbWVidWZmZXIoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgY29sb3JUZXh0dXJlczogW2NvbG9yR0J1ZmZlciwgZGVwdGhHQnVmZmVyXSxcbiAgICBkZXB0aFRleHR1cmU6IGRlcHRoVGV4dHVyZSxcbiAgICBkZXN0cm95QXR0YWNobWVudHM6IGZhbHNlLFxuICB9KTtcbiAgcHJvY2Vzc29yLl9jb2xvckdCdWZmZXIgPSBjb2xvckdCdWZmZXI7XG4gIHByb2Nlc3Nvci5fZGVwdGhHQnVmZmVyID0gZGVwdGhHQnVmZmVyO1xuICBwcm9jZXNzb3IuX2RlcHRoVGV4dHVyZSA9IGRlcHRoVGV4dHVyZTtcbn1cblxudmFyIGRpc3RhbmNlQW5kRWRsU3RyZW5ndGhTY3JhdGNoID0gbmV3IENhcnRlc2lhbjIoKTtcblxuZnVuY3Rpb24gY3JlYXRlQ29tbWFuZHMocHJvY2Vzc29yLCBjb250ZXh0KSB7XG4gIHZhciBibGVuZEZTID0gbmV3IFNoYWRlclNvdXJjZSh7XG4gICAgZGVmaW5lczogW1wiTE9HX0RFUFRIX1dSSVRFXCJdLFxuICAgIHNvdXJjZXM6IFtQb2ludENsb3VkRXllRG9tZUxpZ2h0aW5nU2hhZGVyXSxcbiAgfSk7XG5cbiAgdmFyIGJsZW5kVW5pZm9ybU1hcCA9IHtcbiAgICB1X3BvaW50Q2xvdWRfY29sb3JHQnVmZmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcHJvY2Vzc29yLl9jb2xvckdCdWZmZXI7XG4gICAgfSxcbiAgICB1X3BvaW50Q2xvdWRfZGVwdGhHQnVmZmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcHJvY2Vzc29yLl9kZXB0aEdCdWZmZXI7XG4gICAgfSxcbiAgICB1X2Rpc3RhbmNlQW5kRWRsU3RyZW5ndGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGRpc3RhbmNlQW5kRWRsU3RyZW5ndGhTY3JhdGNoLnggPSBwcm9jZXNzb3IuX3JhZGl1cztcbiAgICAgIGRpc3RhbmNlQW5kRWRsU3RyZW5ndGhTY3JhdGNoLnkgPSBwcm9jZXNzb3IuX3N0cmVuZ3RoO1xuICAgICAgcmV0dXJuIGRpc3RhbmNlQW5kRWRsU3RyZW5ndGhTY3JhdGNoO1xuICAgIH0sXG4gIH07XG5cbiAgdmFyIGJsZW5kUmVuZGVyU3RhdGUgPSBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUoe1xuICAgIGJsZW5kaW5nOiBCbGVuZGluZ1N0YXRlLkFMUEhBX0JMRU5ELFxuICAgIGRlcHRoTWFzazogdHJ1ZSxcbiAgICBkZXB0aFRlc3Q6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgfSxcbiAgICBzdGVuY2lsVGVzdDogU3RlbmNpbENvbnN0YW50cy5zZXRDZXNpdW0zRFRpbGVCaXQoKSxcbiAgICBzdGVuY2lsTWFzazogU3RlbmNpbENvbnN0YW50cy5DRVNJVU1fM0RfVElMRV9NQVNLLFxuICB9KTtcblxuICBwcm9jZXNzb3IuX2RyYXdDb21tYW5kID0gY29udGV4dC5jcmVhdGVWaWV3cG9ydFF1YWRDb21tYW5kKGJsZW5kRlMsIHtcbiAgICB1bmlmb3JtTWFwOiBibGVuZFVuaWZvcm1NYXAsXG4gICAgcmVuZGVyU3RhdGU6IGJsZW5kUmVuZGVyU3RhdGUsXG4gICAgcGFzczogUGFzcy5DRVNJVU1fM0RfVElMRSxcbiAgICBvd25lcjogcHJvY2Vzc29yLFxuICB9KTtcblxuICBwcm9jZXNzb3IuX2NsZWFyQ29tbWFuZCA9IG5ldyBDbGVhckNvbW1hbmQoe1xuICAgIGZyYW1lYnVmZmVyOiBwcm9jZXNzb3IuX2ZyYW1lYnVmZmVyLFxuICAgIGNvbG9yOiBuZXcgQ29sb3IoMC4wLCAwLjAsIDAuMCwgMC4wKSxcbiAgICBkZXB0aDogMS4wLFxuICAgIHJlbmRlclN0YXRlOiBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUoKSxcbiAgICBwYXNzOiBQYXNzLkNFU0lVTV8zRF9USUxFLFxuICAgIG93bmVyOiBwcm9jZXNzb3IsXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSZXNvdXJjZXMocHJvY2Vzc29yLCBjb250ZXh0KSB7XG4gIHZhciBzY3JlZW5XaWR0aCA9IGNvbnRleHQuZHJhd2luZ0J1ZmZlcldpZHRoO1xuICB2YXIgc2NyZWVuSGVpZ2h0ID0gY29udGV4dC5kcmF3aW5nQnVmZmVySGVpZ2h0O1xuICB2YXIgY29sb3JHQnVmZmVyID0gcHJvY2Vzc29yLl9jb2xvckdCdWZmZXI7XG4gIHZhciBub3dEaXJ0eSA9IGZhbHNlO1xuICB2YXIgcmVzaXplZCA9XG4gICAgZGVmaW5lZChjb2xvckdCdWZmZXIpICYmXG4gICAgKGNvbG9yR0J1ZmZlci53aWR0aCAhPT0gc2NyZWVuV2lkdGggfHxcbiAgICAgIGNvbG9yR0J1ZmZlci5oZWlnaHQgIT09IHNjcmVlbkhlaWdodCk7XG5cbiAgaWYgKCFkZWZpbmVkKGNvbG9yR0J1ZmZlcikgfHwgcmVzaXplZCkge1xuICAgIGRlc3Ryb3lGcmFtZWJ1ZmZlcihwcm9jZXNzb3IpO1xuICAgIGNyZWF0ZUZyYW1lYnVmZmVyKHByb2Nlc3NvciwgY29udGV4dCk7XG4gICAgY3JlYXRlQ29tbWFuZHMocHJvY2Vzc29yLCBjb250ZXh0KTtcbiAgICBub3dEaXJ0eSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIG5vd0RpcnR5O1xufVxuXG5mdW5jdGlvbiBpc1N1cHBvcnRlZChjb250ZXh0KSB7XG4gIHJldHVybiBjb250ZXh0LmRyYXdCdWZmZXJzICYmIGNvbnRleHQuZnJhZ21lbnREZXB0aDtcbn1cblxuUG9pbnRDbG91ZEV5ZURvbWVMaWdodGluZy5pc1N1cHBvcnRlZCA9IGlzU3VwcG9ydGVkO1xuXG5mdW5jdGlvbiBnZXRFQ1NoYWRlclByb2dyYW0oY29udGV4dCwgc2hhZGVyUHJvZ3JhbSkge1xuICB2YXIgc2hhZGVyID0gY29udGV4dC5zaGFkZXJDYWNoZS5nZXREZXJpdmVkU2hhZGVyUHJvZ3JhbShzaGFkZXJQcm9ncmFtLCBcIkVDXCIpO1xuICBpZiAoIWRlZmluZWQoc2hhZGVyKSkge1xuICAgIHZhciBhdHRyaWJ1dGVMb2NhdGlvbnMgPSBzaGFkZXJQcm9ncmFtLl9hdHRyaWJ1dGVMb2NhdGlvbnM7XG5cbiAgICB2YXIgZnMgPSBzaGFkZXJQcm9ncmFtLmZyYWdtZW50U2hhZGVyU291cmNlLmNsb25lKCk7XG5cbiAgICBmcy5zb3VyY2VzID0gZnMuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgc291cmNlID0gU2hhZGVyU291cmNlLnJlcGxhY2VNYWluKFxuICAgICAgICBzb3VyY2UsXG4gICAgICAgIFwiY3ptX3BvaW50X2Nsb3VkX3Bvc3RfcHJvY2Vzc19tYWluXCJcbiAgICAgICk7XG4gICAgICBzb3VyY2UgPSBzb3VyY2UucmVwbGFjZSgvZ2xfRnJhZ0NvbG9yL2csIFwiZ2xfRnJhZ0RhdGFbMF1cIik7XG4gICAgICByZXR1cm4gc291cmNlO1xuICAgIH0pO1xuXG4gICAgZnMuc291cmNlcy51bnNoaWZ0KFwiI2V4dGVuc2lvbiBHTF9FWFRfZHJhd19idWZmZXJzIDogZW5hYmxlIFxcblwiKTtcbiAgICBmcy5zb3VyY2VzLnB1c2goXG4gICAgICBcInZvaWQgbWFpbigpIFxcblwiICtcbiAgICAgICAgXCJ7IFxcblwiICtcbiAgICAgICAgXCIgICAgY3ptX3BvaW50X2Nsb3VkX3Bvc3RfcHJvY2Vzc19tYWluKCk7IFxcblwiICtcbiAgICAgICAgXCIjaWZkZWYgTE9HX0RFUFRIXFxuXCIgK1xuICAgICAgICBcIiAgICBjem1fd3JpdGVMb2dEZXB0aCgpO1xcblwiICtcbiAgICAgICAgXCIgICAgZ2xfRnJhZ0RhdGFbMV0gPSBjem1fcGFja0RlcHRoKGdsX0ZyYWdEZXB0aEVYVCk7IFxcblwiICtcbiAgICAgICAgXCIjZWxzZVxcblwiICtcbiAgICAgICAgXCIgICAgZ2xfRnJhZ0RhdGFbMV0gPSBjem1fcGFja0RlcHRoKGdsX0ZyYWdDb29yZC56KTtcXG5cIiArXG4gICAgICAgIFwiI2VuZGlmXFxuXCIgK1xuICAgICAgICBcIn1cIlxuICAgICk7XG5cbiAgICBzaGFkZXIgPSBjb250ZXh0LnNoYWRlckNhY2hlLmNyZWF0ZURlcml2ZWRTaGFkZXJQcm9ncmFtKFxuICAgICAgc2hhZGVyUHJvZ3JhbSxcbiAgICAgIFwiRUNcIixcbiAgICAgIHtcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlOiBzaGFkZXJQcm9ncmFtLnZlcnRleFNoYWRlclNvdXJjZSxcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IGZzLFxuICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHNoYWRlcjtcbn1cblxuUG9pbnRDbG91ZEV5ZURvbWVMaWdodGluZy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKFxuICBmcmFtZVN0YXRlLFxuICBjb21tYW5kU3RhcnQsXG4gIHBvaW50Q2xvdWRTaGFkaW5nLFxuICBib3VuZGluZ1ZvbHVtZVxuKSB7XG4gIGlmICghaXNTdXBwb3J0ZWQoZnJhbWVTdGF0ZS5jb250ZXh0KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuX3N0cmVuZ3RoID0gcG9pbnRDbG91ZFNoYWRpbmcuZXllRG9tZUxpZ2h0aW5nU3RyZW5ndGg7XG4gIHRoaXMuX3JhZGl1cyA9XG4gICAgcG9pbnRDbG91ZFNoYWRpbmcuZXllRG9tZUxpZ2h0aW5nUmFkaXVzICogZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuXG4gIHZhciBkaXJ0eSA9IGNyZWF0ZVJlc291cmNlcyh0aGlzLCBmcmFtZVN0YXRlLmNvbnRleHQpO1xuXG4gIC8vIEhpamFjayBleGlzdGluZyBwb2ludCBjb21tYW5kcyB0byByZW5kZXIgaW50byBhbiBvZmZzY3JlZW4gRkJPLlxuICB2YXIgaTtcbiAgdmFyIGNvbW1hbmRMaXN0ID0gZnJhbWVTdGF0ZS5jb21tYW5kTGlzdDtcbiAgdmFyIGNvbW1hbmRFbmQgPSBjb21tYW5kTGlzdC5sZW5ndGg7XG5cbiAgdmFyIGRlcml2ZWRDb21tYW5kO1xuICB2YXIgb3JpZ2luYWxTaGFkZXJQcm9ncmFtO1xuXG4gIGZvciAoaSA9IGNvbW1hbmRTdGFydDsgaSA8IGNvbW1hbmRFbmQ7ICsraSkge1xuICAgIHZhciBjb21tYW5kID0gY29tbWFuZExpc3RbaV07XG4gICAgaWYgKFxuICAgICAgY29tbWFuZC5wcmltaXRpdmVUeXBlICE9PSBQcmltaXRpdmVUeXBlLlBPSU5UUyB8fFxuICAgICAgY29tbWFuZC5wYXNzID09PSBQYXNzLlRSQU5TTFVDRU5UXG4gICAgKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBUaGVzZSB2YXJpYWJsZXMgbmVlZCB0byBnZXQgcmVzZXQgZm9yIGVhY2ggaXRlcmF0aW9uLiBJdCBoYXMgdG8gYmVcbiAgICAvLyBkb25lIG1hbnVhbGx5IHNpbmNlIHZhciBpcyBmdW5jdGlvbiBzY29wZSBub3QgYmxvY2sgc2NvcGUuXG4gICAgZGVyaXZlZENvbW1hbmQgPSB1bmRlZmluZWQ7XG4gICAgb3JpZ2luYWxTaGFkZXJQcm9ncmFtID0gdW5kZWZpbmVkO1xuXG4gICAgdmFyIGRlcml2ZWRDb21tYW5kT2JqZWN0ID0gY29tbWFuZC5kZXJpdmVkQ29tbWFuZHMucG9pbnRDbG91ZFByb2Nlc3NvcjtcbiAgICBpZiAoZGVmaW5lZChkZXJpdmVkQ29tbWFuZE9iamVjdCkpIHtcbiAgICAgIGRlcml2ZWRDb21tYW5kID0gZGVyaXZlZENvbW1hbmRPYmplY3QuY29tbWFuZDtcbiAgICAgIG9yaWdpbmFsU2hhZGVyUHJvZ3JhbSA9IGRlcml2ZWRDb21tYW5kT2JqZWN0Lm9yaWdpbmFsU2hhZGVyUHJvZ3JhbTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhZGVmaW5lZChkZXJpdmVkQ29tbWFuZCkgfHxcbiAgICAgIGNvbW1hbmQuZGlydHkgfHxcbiAgICAgIGRpcnR5IHx8XG4gICAgICBvcmlnaW5hbFNoYWRlclByb2dyYW0gIT09IGNvbW1hbmQuc2hhZGVyUHJvZ3JhbSB8fFxuICAgICAgZGVyaXZlZENvbW1hbmQuZnJhbWVidWZmZXIgIT09IHRoaXMuX2ZyYW1lYnVmZmVyXG4gICAgKSB7XG4gICAgICAvLyBQcmV2ZW50IGNyYXNoIHdoZW4gdGlsZXMgb3V0LW9mLXZpZXcgY29tZSBpbi12aWV3IGR1cmluZyBjb250ZXh0IHNpemUgY2hhbmdlIG9yXG4gICAgICAvLyB3aGVuIHRoZSB1bmRlcmx5aW5nIHNoYWRlciBjaGFuZ2VzIHdoaWxlIEVETCBpcyBkaXNhYmxlZFxuICAgICAgZGVyaXZlZENvbW1hbmQgPSBEcmF3Q29tbWFuZC5zaGFsbG93Q2xvbmUoY29tbWFuZCwgZGVyaXZlZENvbW1hbmQpO1xuICAgICAgZGVyaXZlZENvbW1hbmQuZnJhbWVidWZmZXIgPSB0aGlzLl9mcmFtZWJ1ZmZlcjtcbiAgICAgIGRlcml2ZWRDb21tYW5kLnNoYWRlclByb2dyYW0gPSBnZXRFQ1NoYWRlclByb2dyYW0oXG4gICAgICAgIGZyYW1lU3RhdGUuY29udGV4dCxcbiAgICAgICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtXG4gICAgICApO1xuICAgICAgZGVyaXZlZENvbW1hbmQuY2FzdFNoYWRvd3MgPSBmYWxzZTtcbiAgICAgIGRlcml2ZWRDb21tYW5kLnJlY2VpdmVTaGFkb3dzID0gZmFsc2U7XG5cbiAgICAgIGlmICghZGVmaW5lZChkZXJpdmVkQ29tbWFuZE9iamVjdCkpIHtcbiAgICAgICAgZGVyaXZlZENvbW1hbmRPYmplY3QgPSB7XG4gICAgICAgICAgY29tbWFuZDogZGVyaXZlZENvbW1hbmQsXG4gICAgICAgICAgb3JpZ2luYWxTaGFkZXJQcm9ncmFtOiBjb21tYW5kLnNoYWRlclByb2dyYW0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLnBvaW50Q2xvdWRQcm9jZXNzb3IgPSBkZXJpdmVkQ29tbWFuZE9iamVjdDtcbiAgICAgIH1cblxuICAgICAgZGVyaXZlZENvbW1hbmRPYmplY3Qub3JpZ2luYWxTaGFkZXJQcm9ncmFtID0gY29tbWFuZC5zaGFkZXJQcm9ncmFtO1xuICAgIH1cblxuICAgIGNvbW1hbmRMaXN0W2ldID0gZGVyaXZlZENvbW1hbmQ7XG4gIH1cblxuICB2YXIgY2xlYXJDb21tYW5kID0gdGhpcy5fY2xlYXJDb21tYW5kO1xuICB2YXIgYmxlbmRDb21tYW5kID0gdGhpcy5fZHJhd0NvbW1hbmQ7XG5cbiAgYmxlbmRDb21tYW5kLmJvdW5kaW5nVm9sdW1lID0gYm91bmRpbmdWb2x1bWU7XG5cbiAgLy8gQmxlbmQgRURMIGludG8gdGhlIG1haW4gRkJPXG4gIGNvbW1hbmRMaXN0LnB1c2goYmxlbmRDb21tYW5kKTtcbiAgY29tbWFuZExpc3QucHVzaChjbGVhckNvbW1hbmQpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKlxuICogQHNlZSBQb2ludENsb3VkRXllRG9tZUxpZ2h0aW5nI2Rlc3Ryb3lcbiAqL1xuUG9pbnRDbG91ZEV5ZURvbWVMaWdodGluZy5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIFdlYkdMIHJlc291cmNlcyBoZWxkIGJ5IHRoaXMgb2JqZWN0LiAgRGVzdHJveWluZyBhbiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljXG4gKiByZWxlYXNlIG9mIFdlYkdMIHJlc291cmNlcywgaW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0byBkZXN0cm95IHRoaXMgb2JqZWN0LlxuICogPGJyIC8+PGJyIC8+XG4gKiBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uICBUaGVyZWZvcmUsXG4gKiBhc3NpZ24gdGhlIHJldHVybiB2YWx1ZSAoPGNvZGU+dW5kZWZpbmVkPC9jb2RlPikgdG8gdGhlIG9iamVjdCBhcyBkb25lIGluIHRoZSBleGFtcGxlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogcHJvY2Vzc29yID0gcHJvY2Vzc29yICYmIHByb2Nlc3Nvci5kZXN0cm95KCk7XG4gKlxuICogQHNlZSBQb2ludENsb3VkRXllRG9tZUxpZ2h0aW5nI2lzRGVzdHJveWVkXG4gKi9cblBvaW50Q2xvdWRFeWVEb21lTGlnaHRpbmcucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGRlc3Ryb3lGcmFtZWJ1ZmZlcih0aGlzKTtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgUG9pbnRDbG91ZEV5ZURvbWVMaWdodGluZztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///29388\n')},45393:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _PointCloudEyeDomeLighting_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29388);\n\n\n\n/**\n * Options for performing point attenuation based on geometric error when rendering\n * point clouds using 3D Tiles.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Boolean} [options.attenuation=false] Perform point attenuation based on geometric error.\n * @param {Number} [options.geometricErrorScale=1.0] Scale to be applied to each tile\'s geometric error.\n * @param {Number} [options.maximumAttenuation] Maximum attenuation in pixels. Defaults to the Cesium3DTileset\'s maximumScreenSpaceError.\n * @param {Number} [options.baseResolution] Average base resolution for the dataset in meters. Substitute for Geometric Error when not available.\n * @param {Boolean} [options.eyeDomeLighting=true] When true, use eye dome lighting when drawing with point attenuation.\n * @param {Number} [options.eyeDomeLightingStrength=1.0] Increasing this value increases contrast on slopes and edges.\n * @param {Number} [options.eyeDomeLightingRadius=1.0] Increase the thickness of contours from eye dome lighting.\n * @param {Boolean} [options.backFaceCulling=false] Determines whether back-facing points are hidden. This option works only if data has normals included.\n * @param {Boolean} [options.normalShading=true] Determines whether a point cloud that contains normals is shaded by the scene\'s light source.\n *\n * @alias PointCloudShading\n * @constructor\n */\nfunction PointCloudShading(options) {\n  var pointCloudShading = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, {});\n\n  /**\n   * Perform point attenuation based on geometric error.\n   * @type {Boolean}\n   * @default false\n   */\n  this.attenuation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(pointCloudShading.attenuation, false);\n\n  /**\n   * Scale to be applied to the geometric error before computing attenuation.\n   * @type {Number}\n   * @default 1.0\n   */\n  this.geometricErrorScale = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    pointCloudShading.geometricErrorScale,\n    1.0\n  );\n\n  /**\n   * Maximum point attenuation in pixels. If undefined, the Cesium3DTileset\'s maximumScreenSpaceError will be used.\n   * @type {Number}\n   */\n  this.maximumAttenuation = pointCloudShading.maximumAttenuation;\n\n  /**\n   * Average base resolution for the dataset in meters.\n   * Used in place of geometric error when geometric error is 0.\n   * If undefined, an approximation will be computed for each tile that has geometric error of 0.\n   * @type {Number}\n   */\n  this.baseResolution = pointCloudShading.baseResolution;\n\n  /**\n   * Use eye dome lighting when drawing with point attenuation\n   * Requires support for EXT_frag_depth, OES_texture_float, and WEBGL_draw_buffers extensions in WebGL 1.0,\n   * otherwise eye dome lighting is ignored.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.eyeDomeLighting = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(pointCloudShading.eyeDomeLighting, true);\n\n  /**\n   * Eye dome lighting strength (apparent contrast)\n   * @type {Number}\n   * @default 1.0\n   */\n  this.eyeDomeLightingStrength = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    pointCloudShading.eyeDomeLightingStrength,\n    1.0\n  );\n\n  /**\n   * Thickness of contours from eye dome lighting\n   * @type {Number}\n   * @default 1.0\n   */\n  this.eyeDomeLightingRadius = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    pointCloudShading.eyeDomeLightingRadius,\n    1.0\n  );\n\n  /**\n   * Determines whether back-facing points are hidden.\n   * This option works only if data has normals included.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  this.backFaceCulling = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(pointCloudShading.backFaceCulling, false);\n\n  /**\n   * Determines whether a point cloud that contains normals is shaded by the scene\'s light source.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.normalShading = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(pointCloudShading.normalShading, true);\n}\n\n/**\n * Determines if point cloud shading is supported.\n *\n * @param {Scene} scene The scene.\n * @returns {Boolean} <code>true</code> if point cloud shading is supported; otherwise, returns <code>false</code>\n */\nPointCloudShading.isSupported = function (scene) {\n  return _PointCloudEyeDomeLighting_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isSupported */ .Z.isSupported(scene.context);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PointCloudShading);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUzOTMuanMiLCJtYXBwaW5ncyI6Ijs7QUFBbUQ7QUFDb0I7O0FBRXZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEVBQVksWUFBWTs7QUFFbEQ7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EscUJBQXFCLDBFQUFZOztBQUVqQztBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSw2QkFBNkIsMEVBQVk7QUFDekM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLHlCQUF5QiwwRUFBWTs7QUFFckM7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsaUNBQWlDLDBFQUFZO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSwrQkFBK0IsMEVBQVk7QUFDM0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSx5QkFBeUIsMEVBQVk7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsdUJBQXVCLDBFQUFZO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLFNBQVMsdURBQXVEO0FBQzdFO0FBQ0E7QUFDQSxTQUFTLHNHQUFxQztBQUM5QztBQUNBLHlEQUFlLGlCQUFpQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1BvaW50Q2xvdWRTaGFkaW5nLmpzPzM2ZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBQb2ludENsb3VkRXllRG9tZUxpZ2h0aW5nIGZyb20gXCIuL1BvaW50Q2xvdWRFeWVEb21lTGlnaHRpbmcuanNcIjtcblxuLyoqXG4gKiBPcHRpb25zIGZvciBwZXJmb3JtaW5nIHBvaW50IGF0dGVudWF0aW9uIGJhc2VkIG9uIGdlb21ldHJpYyBlcnJvciB3aGVuIHJlbmRlcmluZ1xuICogcG9pbnQgY2xvdWRzIHVzaW5nIDNEIFRpbGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hdHRlbnVhdGlvbj1mYWxzZV0gUGVyZm9ybSBwb2ludCBhdHRlbnVhdGlvbiBiYXNlZCBvbiBnZW9tZXRyaWMgZXJyb3IuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZ2VvbWV0cmljRXJyb3JTY2FsZT0xLjBdIFNjYWxlIHRvIGJlIGFwcGxpZWQgdG8gZWFjaCB0aWxlJ3MgZ2VvbWV0cmljIGVycm9yLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heGltdW1BdHRlbnVhdGlvbl0gTWF4aW11bSBhdHRlbnVhdGlvbiBpbiBwaXhlbHMuIERlZmF1bHRzIHRvIHRoZSBDZXNpdW0zRFRpbGVzZXQncyBtYXhpbXVtU2NyZWVuU3BhY2VFcnJvci5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5iYXNlUmVzb2x1dGlvbl0gQXZlcmFnZSBiYXNlIHJlc29sdXRpb24gZm9yIHRoZSBkYXRhc2V0IGluIG1ldGVycy4gU3Vic3RpdHV0ZSBmb3IgR2VvbWV0cmljIEVycm9yIHdoZW4gbm90IGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZXllRG9tZUxpZ2h0aW5nPXRydWVdIFdoZW4gdHJ1ZSwgdXNlIGV5ZSBkb21lIGxpZ2h0aW5nIHdoZW4gZHJhd2luZyB3aXRoIHBvaW50IGF0dGVudWF0aW9uLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmV5ZURvbWVMaWdodGluZ1N0cmVuZ3RoPTEuMF0gSW5jcmVhc2luZyB0aGlzIHZhbHVlIGluY3JlYXNlcyBjb250cmFzdCBvbiBzbG9wZXMgYW5kIGVkZ2VzLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmV5ZURvbWVMaWdodGluZ1JhZGl1cz0xLjBdIEluY3JlYXNlIHRoZSB0aGlja25lc3Mgb2YgY29udG91cnMgZnJvbSBleWUgZG9tZSBsaWdodGluZy5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYmFja0ZhY2VDdWxsaW5nPWZhbHNlXSBEZXRlcm1pbmVzIHdoZXRoZXIgYmFjay1mYWNpbmcgcG9pbnRzIGFyZSBoaWRkZW4uIFRoaXMgb3B0aW9uIHdvcmtzIG9ubHkgaWYgZGF0YSBoYXMgbm9ybWFscyBpbmNsdWRlZC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubm9ybWFsU2hhZGluZz10cnVlXSBEZXRlcm1pbmVzIHdoZXRoZXIgYSBwb2ludCBjbG91ZCB0aGF0IGNvbnRhaW5zIG5vcm1hbHMgaXMgc2hhZGVkIGJ5IHRoZSBzY2VuZSdzIGxpZ2h0IHNvdXJjZS5cbiAqXG4gKiBAYWxpYXMgUG9pbnRDbG91ZFNoYWRpbmdcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBQb2ludENsb3VkU2hhZGluZyhvcHRpb25zKSB7XG4gIHZhciBwb2ludENsb3VkU2hhZGluZyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCB7fSk7XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gcG9pbnQgYXR0ZW51YXRpb24gYmFzZWQgb24gZ2VvbWV0cmljIGVycm9yLlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHRoaXMuYXR0ZW51YXRpb24gPSBkZWZhdWx0VmFsdWUocG9pbnRDbG91ZFNoYWRpbmcuYXR0ZW51YXRpb24sIGZhbHNlKTtcblxuICAvKipcbiAgICogU2NhbGUgdG8gYmUgYXBwbGllZCB0byB0aGUgZ2VvbWV0cmljIGVycm9yIGJlZm9yZSBjb21wdXRpbmcgYXR0ZW51YXRpb24uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDEuMFxuICAgKi9cbiAgdGhpcy5nZW9tZXRyaWNFcnJvclNjYWxlID0gZGVmYXVsdFZhbHVlKFxuICAgIHBvaW50Q2xvdWRTaGFkaW5nLmdlb21ldHJpY0Vycm9yU2NhbGUsXG4gICAgMS4wXG4gICk7XG5cbiAgLyoqXG4gICAqIE1heGltdW0gcG9pbnQgYXR0ZW51YXRpb24gaW4gcGl4ZWxzLiBJZiB1bmRlZmluZWQsIHRoZSBDZXNpdW0zRFRpbGVzZXQncyBtYXhpbXVtU2NyZWVuU3BhY2VFcnJvciB3aWxsIGJlIHVzZWQuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICB0aGlzLm1heGltdW1BdHRlbnVhdGlvbiA9IHBvaW50Q2xvdWRTaGFkaW5nLm1heGltdW1BdHRlbnVhdGlvbjtcblxuICAvKipcbiAgICogQXZlcmFnZSBiYXNlIHJlc29sdXRpb24gZm9yIHRoZSBkYXRhc2V0IGluIG1ldGVycy5cbiAgICogVXNlZCBpbiBwbGFjZSBvZiBnZW9tZXRyaWMgZXJyb3Igd2hlbiBnZW9tZXRyaWMgZXJyb3IgaXMgMC5cbiAgICogSWYgdW5kZWZpbmVkLCBhbiBhcHByb3hpbWF0aW9uIHdpbGwgYmUgY29tcHV0ZWQgZm9yIGVhY2ggdGlsZSB0aGF0IGhhcyBnZW9tZXRyaWMgZXJyb3Igb2YgMC5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRoaXMuYmFzZVJlc29sdXRpb24gPSBwb2ludENsb3VkU2hhZGluZy5iYXNlUmVzb2x1dGlvbjtcblxuICAvKipcbiAgICogVXNlIGV5ZSBkb21lIGxpZ2h0aW5nIHdoZW4gZHJhd2luZyB3aXRoIHBvaW50IGF0dGVudWF0aW9uXG4gICAqIFJlcXVpcmVzIHN1cHBvcnQgZm9yIEVYVF9mcmFnX2RlcHRoLCBPRVNfdGV4dHVyZV9mbG9hdCwgYW5kIFdFQkdMX2RyYXdfYnVmZmVycyBleHRlbnNpb25zIGluIFdlYkdMIDEuMCxcbiAgICogb3RoZXJ3aXNlIGV5ZSBkb21lIGxpZ2h0aW5nIGlzIGlnbm9yZWQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICB0aGlzLmV5ZURvbWVMaWdodGluZyA9IGRlZmF1bHRWYWx1ZShwb2ludENsb3VkU2hhZGluZy5leWVEb21lTGlnaHRpbmcsIHRydWUpO1xuXG4gIC8qKlxuICAgKiBFeWUgZG9tZSBsaWdodGluZyBzdHJlbmd0aCAoYXBwYXJlbnQgY29udHJhc3QpXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDEuMFxuICAgKi9cbiAgdGhpcy5leWVEb21lTGlnaHRpbmdTdHJlbmd0aCA9IGRlZmF1bHRWYWx1ZShcbiAgICBwb2ludENsb3VkU2hhZGluZy5leWVEb21lTGlnaHRpbmdTdHJlbmd0aCxcbiAgICAxLjBcbiAgKTtcblxuICAvKipcbiAgICogVGhpY2tuZXNzIG9mIGNvbnRvdXJzIGZyb20gZXllIGRvbWUgbGlnaHRpbmdcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqL1xuICB0aGlzLmV5ZURvbWVMaWdodGluZ1JhZGl1cyA9IGRlZmF1bHRWYWx1ZShcbiAgICBwb2ludENsb3VkU2hhZGluZy5leWVEb21lTGlnaHRpbmdSYWRpdXMsXG4gICAgMS4wXG4gICk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBiYWNrLWZhY2luZyBwb2ludHMgYXJlIGhpZGRlbi5cbiAgICogVGhpcyBvcHRpb24gd29ya3Mgb25seSBpZiBkYXRhIGhhcyBub3JtYWxzIGluY2x1ZGVkLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHRoaXMuYmFja0ZhY2VDdWxsaW5nID0gZGVmYXVsdFZhbHVlKHBvaW50Q2xvdWRTaGFkaW5nLmJhY2tGYWNlQ3VsbGluZywgZmFsc2UpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBwb2ludCBjbG91ZCB0aGF0IGNvbnRhaW5zIG5vcm1hbHMgaXMgc2hhZGVkIGJ5IHRoZSBzY2VuZSdzIGxpZ2h0IHNvdXJjZS5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHRoaXMubm9ybWFsU2hhZGluZyA9IGRlZmF1bHRWYWx1ZShwb2ludENsb3VkU2hhZGluZy5ub3JtYWxTaGFkaW5nLCB0cnVlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHBvaW50IGNsb3VkIHNoYWRpbmcgaXMgc3VwcG9ydGVkLlxuICpcbiAqIEBwYXJhbSB7U2NlbmV9IHNjZW5lIFRoZSBzY2VuZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiBwb2ludCBjbG91ZCBzaGFkaW5nIGlzIHN1cHBvcnRlZDsgb3RoZXJ3aXNlLCByZXR1cm5zIDxjb2RlPmZhbHNlPC9jb2RlPlxuICovXG5Qb2ludENsb3VkU2hhZGluZy5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uIChzY2VuZSkge1xuICByZXR1cm4gUG9pbnRDbG91ZEV5ZURvbWVMaWdodGluZy5pc1N1cHBvcnRlZChzY2VuZS5jb250ZXh0KTtcbn07XG5leHBvcnQgZGVmYXVsdCBQb2ludENsb3VkU2hhZGluZztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///45393\n')}}]);