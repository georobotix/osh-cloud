"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[101],{66035:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(53454);\n/* harmony import */ var _getElement_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43412);\n/* harmony import */ var _VRButtonViewModel_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(31834);\n\n\n\n\n\n\n\nvar enterVRPath =\n  "M 5.3125 6.375 C 4.008126 6.375 2.96875 7.4141499 2.96875 8.71875 L 2.96875 19.5 C 2.96875 20.8043 4.008126 21.875 5.3125 21.875 L 13.65625 21.875 C 13.71832 20.0547 14.845166 18.59375 16.21875 18.59375 C 17.592088 18.59375 18.71881 20.0552 18.78125 21.875 L 27.09375 21.875 C 28.398125 21.875 29.4375 20.8043 29.4375 19.5 L 29.4375 8.71875 C 29.4375 7.4141499 28.398125 6.375 27.09375 6.375 L 5.3125 6.375 z M 9.625 10.4375 C 11.55989 10.4375 13.125 12.03385 13.125 13.96875 C 13.125 15.90365 11.55989 17.46875 9.625 17.46875 C 7.69011 17.46875 6.125 15.90365 6.125 13.96875 C 6.125 12.03385 7.69011 10.4375 9.625 10.4375 z M 22.46875 10.4375 C 24.40364 10.4375 25.96875 12.03385 25.96875 13.96875 C 25.96875 15.90365 24.40364 17.46875 22.46875 17.46875 C 20.53386 17.46875 18.96875 15.90365 18.96875 13.96875 C 18.96875 12.03385 20.53386 10.4375 22.46875 10.4375 z";\nvar exitVRPath =\n  "M 25.770585,2.4552065 C 15.72282,13.962707 10.699956,19.704407 8.1768352,22.580207 c -1.261561,1.4379 -1.902282,2.1427 -2.21875,2.5 -0.141624,0.1599 -0.208984,0.2355 -0.25,0.2813 l 0.6875,0.75 c 10e-5,-10e-5 0.679191,0.727 0.6875,0.7187 0.01662,-0.016 0.02451,-0.024 0.03125,-0.031 0.01348,-0.014 0.04013,-0.038 0.0625,-0.062 0.04474,-0.05 0.120921,-0.1315 0.28125,-0.3126 0.320657,-0.3619 0.956139,-1.0921 2.2187499,-2.5312 2.5252219,-2.8781 7.5454589,-8.6169 17.5937499,-20.1250005 l -1.5,-1.3125 z m -20.5624998,3.9063 c -1.304375,0 -2.34375,1.0391 -2.34375,2.3437 l 0,10.8125005 c 0,1.3043 1.039375,2.375 2.34375,2.375 l 2.25,0 c 1.9518039,-2.2246 7.4710958,-8.5584 13.5624998,-15.5312005 l -15.8124998,0 z m 21.1249998,0 c -1.855467,2.1245 -2.114296,2.4005 -3.59375,4.0936995 1.767282,0.1815 3.15625,1.685301 3.15625,3.500001 0,1.9349 -1.56511,3.5 -3.5,3.5 -1.658043,0 -3.043426,-1.1411 -3.40625,-2.6875 -1.089617,1.2461 -2.647139,2.9988 -3.46875,3.9375 0.191501,-0.062 0.388502,-0.094 0.59375,-0.094 1.373338,0 2.50006,1.4614 2.5625,3.2812 l 8.3125,0 c 1.304375,0 2.34375,-1.0707 2.34375,-2.375 l 0,-10.8125005 c 0,-1.3046 -1.039375,-2.3437 -2.34375,-2.3437 l -0.65625,0 z M 9.5518351,10.423906 c 1.9348899,0 3.4999999,1.596401 3.4999999,3.531301 0,1.9349 -1.56511,3.5 -3.4999999,3.5 -1.9348899,0 -3.4999999,-1.5651 -3.4999999,-3.5 0,-1.9349 1.56511,-3.531301 3.4999999,-3.531301 z m 4.2187499,10.312601 c -0.206517,0.2356 -0.844218,0.9428 -1.03125,1.1562 l 0.8125,0 c 0.01392,-0.4081 0.107026,-0.7968 0.21875,-1.1562 z";\n\n/**\n * A single button widget for toggling vr mode.\n *\n * @alias VRButton\n * @constructor\n *\n * @param {Element|String} container The DOM element or ID that will contain the widget.\n * @param {Scene} scene The scene.\n * @param {Element|String} [vrElement=document.body] The element or id to be placed into vr mode.\n *\n * @exception {DeveloperError} Element with id "container" does not exist in the document.\n */\nfunction VRButton(container, scene, vrElement) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(container)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("container is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(scene)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("scene is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  container = (0,_getElement_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(container);\n\n  var viewModel = new _VRButtonViewModel_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(scene, vrElement);\n\n  viewModel._exitVRPath = exitVRPath;\n  viewModel._enterVRPath = enterVRPath;\n\n  var element = document.createElement("button");\n  element.type = "button";\n  element.className = "cesium-button cesium-vrButton";\n  element.setAttribute(\n    "data-bind",\n    \'\\\ncss: { "cesium-button-disabled" : _isOrthographic }, \\\nattr: { title: tooltip },\\\nclick: command,\\\nenable: isVREnabled,\\\ncesiumSvgPath: { path: isVRMode ? _exitVRPath : _enterVRPath, width: 32, height: 32 }\'\n  );\n\n  container.appendChild(element);\n\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].applyBindings */ .Z.applyBindings(viewModel, element);\n\n  this._container = container;\n  this._viewModel = viewModel;\n  this._element = element;\n}\n\nObject.defineProperties(VRButton.prototype, {\n  /**\n   * Gets the parent container.\n   * @memberof VRButton.prototype\n   *\n   * @type {Element}\n   */\n  container: {\n    get: function () {\n      return this._container;\n    },\n  },\n\n  /**\n   * Gets the view model.\n   * @memberof VRButton.prototype\n   *\n   * @type {VRButtonViewModel}\n   */\n  viewModel: {\n    get: function () {\n      return this._viewModel;\n    },\n  },\n});\n\n/**\n * @returns {Boolean} true if the object has been destroyed, false otherwise.\n */\nVRButton.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the widget.  Should be called if permanently\n * removing the widget from layout.\n */\nVRButton.prototype.destroy = function () {\n  this._viewModel.destroy();\n\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cleanNode */ .Z.cleanNode(this._element);\n  this._container.removeChild(this._element);\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (VRButton);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjYwMzUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQ1k7QUFDRTtBQUNOO0FBQ1Y7QUFDYTs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsT0FBTyxxRUFBTztBQUNkLGNBQWMsd0VBQWM7QUFDNUI7QUFDQSxPQUFPLHFFQUFPO0FBQ2QsY0FBYyx3RUFBYztBQUM1QjtBQUNBOztBQUVBLGNBQWMsbUVBQVU7O0FBRXhCLHNCQUFzQixzRUFBaUI7O0FBRXZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyw0Q0FBNEM7QUFDbkQsUUFBUSxnQkFBZ0I7QUFDeEI7QUFDQTtBQUNBLGlCQUFpQixvRUFBb0U7QUFDckY7O0FBRUE7O0FBRUEsRUFBRSxvR0FBc0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRSw0RkFBa0I7QUFDcEI7O0FBRUEsU0FBUywyRUFBYTtBQUN0QjtBQUNBLHlEQUFlLFFBQVEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9XaWRnZXRzL1ZSQnV0dG9uL1ZSQnV0dG9uLmpzP2Q4M2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uLy4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uLy4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi8uLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQga25vY2tvdXQgZnJvbSBcIi4uLy4uL1RoaXJkUGFydHkva25vY2tvdXQuanNcIjtcbmltcG9ydCBnZXRFbGVtZW50IGZyb20gXCIuLi9nZXRFbGVtZW50LmpzXCI7XG5pbXBvcnQgVlJCdXR0b25WaWV3TW9kZWwgZnJvbSBcIi4vVlJCdXR0b25WaWV3TW9kZWwuanNcIjtcblxudmFyIGVudGVyVlJQYXRoID1cbiAgXCJNIDUuMzEyNSA2LjM3NSBDIDQuMDA4MTI2IDYuMzc1IDIuOTY4NzUgNy40MTQxNDk5IDIuOTY4NzUgOC43MTg3NSBMIDIuOTY4NzUgMTkuNSBDIDIuOTY4NzUgMjAuODA0MyA0LjAwODEyNiAyMS44NzUgNS4zMTI1IDIxLjg3NSBMIDEzLjY1NjI1IDIxLjg3NSBDIDEzLjcxODMyIDIwLjA1NDcgMTQuODQ1MTY2IDE4LjU5Mzc1IDE2LjIxODc1IDE4LjU5Mzc1IEMgMTcuNTkyMDg4IDE4LjU5Mzc1IDE4LjcxODgxIDIwLjA1NTIgMTguNzgxMjUgMjEuODc1IEwgMjcuMDkzNzUgMjEuODc1IEMgMjguMzk4MTI1IDIxLjg3NSAyOS40Mzc1IDIwLjgwNDMgMjkuNDM3NSAxOS41IEwgMjkuNDM3NSA4LjcxODc1IEMgMjkuNDM3NSA3LjQxNDE0OTkgMjguMzk4MTI1IDYuMzc1IDI3LjA5Mzc1IDYuMzc1IEwgNS4zMTI1IDYuMzc1IHogTSA5LjYyNSAxMC40Mzc1IEMgMTEuNTU5ODkgMTAuNDM3NSAxMy4xMjUgMTIuMDMzODUgMTMuMTI1IDEzLjk2ODc1IEMgMTMuMTI1IDE1LjkwMzY1IDExLjU1OTg5IDE3LjQ2ODc1IDkuNjI1IDE3LjQ2ODc1IEMgNy42OTAxMSAxNy40Njg3NSA2LjEyNSAxNS45MDM2NSA2LjEyNSAxMy45Njg3NSBDIDYuMTI1IDEyLjAzMzg1IDcuNjkwMTEgMTAuNDM3NSA5LjYyNSAxMC40Mzc1IHogTSAyMi40Njg3NSAxMC40Mzc1IEMgMjQuNDAzNjQgMTAuNDM3NSAyNS45Njg3NSAxMi4wMzM4NSAyNS45Njg3NSAxMy45Njg3NSBDIDI1Ljk2ODc1IDE1LjkwMzY1IDI0LjQwMzY0IDE3LjQ2ODc1IDIyLjQ2ODc1IDE3LjQ2ODc1IEMgMjAuNTMzODYgMTcuNDY4NzUgMTguOTY4NzUgMTUuOTAzNjUgMTguOTY4NzUgMTMuOTY4NzUgQyAxOC45Njg3NSAxMi4wMzM4NSAyMC41MzM4NiAxMC40Mzc1IDIyLjQ2ODc1IDEwLjQzNzUgelwiO1xudmFyIGV4aXRWUlBhdGggPVxuICBcIk0gMjUuNzcwNTg1LDIuNDU1MjA2NSBDIDE1LjcyMjgyLDEzLjk2MjcwNyAxMC42OTk5NTYsMTkuNzA0NDA3IDguMTc2ODM1MiwyMi41ODAyMDcgYyAtMS4yNjE1NjEsMS40Mzc5IC0xLjkwMjI4MiwyLjE0MjcgLTIuMjE4NzUsMi41IC0wLjE0MTYyNCwwLjE1OTkgLTAuMjA4OTg0LDAuMjM1NSAtMC4yNSwwLjI4MTMgbCAwLjY4NzUsMC43NSBjIDEwZS01LC0xMGUtNSAwLjY3OTE5MSwwLjcyNyAwLjY4NzUsMC43MTg3IDAuMDE2NjIsLTAuMDE2IDAuMDI0NTEsLTAuMDI0IDAuMDMxMjUsLTAuMDMxIDAuMDEzNDgsLTAuMDE0IDAuMDQwMTMsLTAuMDM4IDAuMDYyNSwtMC4wNjIgMC4wNDQ3NCwtMC4wNSAwLjEyMDkyMSwtMC4xMzE1IDAuMjgxMjUsLTAuMzEyNiAwLjMyMDY1NywtMC4zNjE5IDAuOTU2MTM5LC0xLjA5MjEgMi4yMTg3NDk5LC0yLjUzMTIgMi41MjUyMjE5LC0yLjg3ODEgNy41NDU0NTg5LC04LjYxNjkgMTcuNTkzNzQ5OSwtMjAuMTI1MDAwNSBsIC0xLjUsLTEuMzEyNSB6IG0gLTIwLjU2MjQ5OTgsMy45MDYzIGMgLTEuMzA0Mzc1LDAgLTIuMzQzNzUsMS4wMzkxIC0yLjM0Mzc1LDIuMzQzNyBsIDAsMTAuODEyNTAwNSBjIDAsMS4zMDQzIDEuMDM5Mzc1LDIuMzc1IDIuMzQzNzUsMi4zNzUgbCAyLjI1LDAgYyAxLjk1MTgwMzksLTIuMjI0NiA3LjQ3MTA5NTgsLTguNTU4NCAxMy41NjI0OTk4LC0xNS41MzEyMDA1IGwgLTE1LjgxMjQ5OTgsMCB6IG0gMjEuMTI0OTk5OCwwIGMgLTEuODU1NDY3LDIuMTI0NSAtMi4xMTQyOTYsMi40MDA1IC0zLjU5Mzc1LDQuMDkzNjk5NSAxLjc2NzI4MiwwLjE4MTUgMy4xNTYyNSwxLjY4NTMwMSAzLjE1NjI1LDMuNTAwMDAxIDAsMS45MzQ5IC0xLjU2NTExLDMuNSAtMy41LDMuNSAtMS42NTgwNDMsMCAtMy4wNDM0MjYsLTEuMTQxMSAtMy40MDYyNSwtMi42ODc1IC0xLjA4OTYxNywxLjI0NjEgLTIuNjQ3MTM5LDIuOTk4OCAtMy40Njg3NSwzLjkzNzUgMC4xOTE1MDEsLTAuMDYyIDAuMzg4NTAyLC0wLjA5NCAwLjU5Mzc1LC0wLjA5NCAxLjM3MzMzOCwwIDIuNTAwMDYsMS40NjE0IDIuNTYyNSwzLjI4MTIgbCA4LjMxMjUsMCBjIDEuMzA0Mzc1LDAgMi4zNDM3NSwtMS4wNzA3IDIuMzQzNzUsLTIuMzc1IGwgMCwtMTAuODEyNTAwNSBjIDAsLTEuMzA0NiAtMS4wMzkzNzUsLTIuMzQzNyAtMi4zNDM3NSwtMi4zNDM3IGwgLTAuNjU2MjUsMCB6IE0gOS41NTE4MzUxLDEwLjQyMzkwNiBjIDEuOTM0ODg5OSwwIDMuNDk5OTk5OSwxLjU5NjQwMSAzLjQ5OTk5OTksMy41MzEzMDEgMCwxLjkzNDkgLTEuNTY1MTEsMy41IC0zLjQ5OTk5OTksMy41IC0xLjkzNDg4OTksMCAtMy40OTk5OTk5LC0xLjU2NTEgLTMuNDk5OTk5OSwtMy41IDAsLTEuOTM0OSAxLjU2NTExLC0zLjUzMTMwMSAzLjQ5OTk5OTksLTMuNTMxMzAxIHogbSA0LjIxODc0OTksMTAuMzEyNjAxIGMgLTAuMjA2NTE3LDAuMjM1NiAtMC44NDQyMTgsMC45NDI4IC0xLjAzMTI1LDEuMTU2MiBsIDAuODEyNSwwIGMgMC4wMTM5MiwtMC40MDgxIDAuMTA3MDI2LC0wLjc5NjggMC4yMTg3NSwtMS4xNTYyIHpcIjtcblxuLyoqXG4gKiBBIHNpbmdsZSBidXR0b24gd2lkZ2V0IGZvciB0b2dnbGluZyB2ciBtb2RlLlxuICpcbiAqIEBhbGlhcyBWUkJ1dHRvblxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gY29udGFpbmVyIFRoZSBET00gZWxlbWVudCBvciBJRCB0aGF0IHdpbGwgY29udGFpbiB0aGUgd2lkZ2V0LlxuICogQHBhcmFtIHtTY2VuZX0gc2NlbmUgVGhlIHNjZW5lLlxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gW3ZyRWxlbWVudD1kb2N1bWVudC5ib2R5XSBUaGUgZWxlbWVudCBvciBpZCB0byBiZSBwbGFjZWQgaW50byB2ciBtb2RlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBFbGVtZW50IHdpdGggaWQgXCJjb250YWluZXJcIiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZG9jdW1lbnQuXG4gKi9cbmZ1bmN0aW9uIFZSQnV0dG9uKGNvbnRhaW5lciwgc2NlbmUsIHZyRWxlbWVudCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoY29udGFpbmVyKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImNvbnRhaW5lciBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKHNjZW5lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInNjZW5lIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBjb250YWluZXIgPSBnZXRFbGVtZW50KGNvbnRhaW5lcik7XG5cbiAgdmFyIHZpZXdNb2RlbCA9IG5ldyBWUkJ1dHRvblZpZXdNb2RlbChzY2VuZSwgdnJFbGVtZW50KTtcblxuICB2aWV3TW9kZWwuX2V4aXRWUlBhdGggPSBleGl0VlJQYXRoO1xuICB2aWV3TW9kZWwuX2VudGVyVlJQYXRoID0gZW50ZXJWUlBhdGg7XG5cbiAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBlbGVtZW50LnR5cGUgPSBcImJ1dHRvblwiO1xuICBlbGVtZW50LmNsYXNzTmFtZSA9IFwiY2VzaXVtLWJ1dHRvbiBjZXNpdW0tdnJCdXR0b25cIjtcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgXCJkYXRhLWJpbmRcIixcbiAgICAnXFxcbmNzczogeyBcImNlc2l1bS1idXR0b24tZGlzYWJsZWRcIiA6IF9pc09ydGhvZ3JhcGhpYyB9LCBcXFxuYXR0cjogeyB0aXRsZTogdG9vbHRpcCB9LFxcXG5jbGljazogY29tbWFuZCxcXFxuZW5hYmxlOiBpc1ZSRW5hYmxlZCxcXFxuY2VzaXVtU3ZnUGF0aDogeyBwYXRoOiBpc1ZSTW9kZSA/IF9leGl0VlJQYXRoIDogX2VudGVyVlJQYXRoLCB3aWR0aDogMzIsIGhlaWdodDogMzIgfSdcbiAgKTtcblxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG5cbiAga25vY2tvdXQuYXBwbHlCaW5kaW5ncyh2aWV3TW9kZWwsIGVsZW1lbnQpO1xuXG4gIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgdGhpcy5fdmlld01vZGVsID0gdmlld01vZGVsO1xuICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVlJCdXR0b24ucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwYXJlbnQgY29udGFpbmVyLlxuICAgKiBAbWVtYmVyb2YgVlJCdXR0b24ucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtFbGVtZW50fVxuICAgKi9cbiAgY29udGFpbmVyOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZpZXcgbW9kZWwuXG4gICAqIEBtZW1iZXJvZiBWUkJ1dHRvbi5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1ZSQnV0dG9uVmlld01vZGVsfVxuICAgKi9cbiAgdmlld01vZGVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmlld01vZGVsO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgb2JqZWN0IGhhcyBiZWVuIGRlc3Ryb3llZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5WUkJ1dHRvbi5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIHdpZGdldC4gIFNob3VsZCBiZSBjYWxsZWQgaWYgcGVybWFuZW50bHlcbiAqIHJlbW92aW5nIHRoZSB3aWRnZXQgZnJvbSBsYXlvdXQuXG4gKi9cblZSQnV0dG9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl92aWV3TW9kZWwuZGVzdHJveSgpO1xuXG4gIGtub2Nrb3V0LmNsZWFuTm9kZSh0aGlzLl9lbGVtZW50KTtcbiAgdGhpcy5fY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX2VsZW1lbnQpO1xuXG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFZSQnV0dG9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///66035\n')},31834:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_EventHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(79539);\n/* harmony import */ var _Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4268);\n/* harmony import */ var _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(91473);\n/* harmony import */ var _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(53454);\n/* harmony import */ var _ThirdParty_nosleep_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(71095);\n/* harmony import */ var _createCommand_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(28389);\n/* harmony import */ var _getElement_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(43412);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction lockScreen(orientation) {\n  var locked = false;\n  var screen = window.screen;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen)) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.lockOrientation)) {\n      locked = screen.lockOrientation(orientation);\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.mozLockOrientation)) {\n      locked = screen.mozLockOrientation(orientation);\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.msLockOrientation)) {\n      locked = screen.msLockOrientation(orientation);\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.orientation && screen.orientation.lock)) {\n      locked = screen.orientation.lock(orientation);\n    }\n  }\n  return locked;\n}\n\nfunction unlockScreen() {\n  var screen = window.screen;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen)) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.unlockOrientation)) {\n      screen.unlockOrientation();\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.mozUnlockOrientation)) {\n      screen.mozUnlockOrientation();\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.msUnlockOrientation)) {\n      screen.msUnlockOrientation();\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(screen.orientation && screen.orientation.unlock)) {\n      screen.orientation.unlock();\n    }\n  }\n}\n\nfunction toggleVR(viewModel, scene, isVRMode, isOrthographic) {\n  if (isOrthographic()) {\n    return;\n  }\n\n  if (isVRMode()) {\n    scene.useWebVR = false;\n    if (viewModel._locked) {\n      unlockScreen();\n      viewModel._locked = false;\n    }\n    viewModel._noSleep.disable();\n    _Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].exitFullscreen */ .Z.exitFullscreen();\n    isVRMode(false);\n  } else {\n    if (!_Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fullscreen */ .Z.fullscreen) {\n      _Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].requestFullscreen */ .Z.requestFullscreen(viewModel._vrElement);\n    }\n    viewModel._noSleep.enable();\n    if (!viewModel._locked) {\n      viewModel._locked = lockScreen("landscape");\n    }\n    scene.useWebVR = true;\n    isVRMode(true);\n  }\n}\n\n/**\n * The view model for {@link VRButton}.\n * @alias VRButtonViewModel\n * @constructor\n *\n * @param {Scene} scene The scene.\n * @param {Element|String} [vrElement=document.body] The element or id to be placed into VR mode.\n */\nfunction VRButtonViewModel(scene, vrElement) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(scene)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("scene is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var that = this;\n\n  var isEnabled = _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].observable */ .Z.observable(_Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].enabled */ .Z.enabled);\n  var isVRMode = _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].observable */ .Z.observable(false);\n\n  /**\n   * Gets whether or not VR mode is active.\n   *\n   * @type {Boolean}\n   */\n  this.isVRMode = undefined;\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].defineProperty */ .Z.defineProperty(this, "isVRMode", {\n    get: function () {\n      return isVRMode();\n    },\n  });\n\n  /**\n   * Gets or sets whether or not VR functionality should be enabled.\n   *\n   * @type {Boolean}\n   * @see Fullscreen.enabled\n   */\n  this.isVREnabled = undefined;\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].defineProperty */ .Z.defineProperty(this, "isVREnabled", {\n    get: function () {\n      return isEnabled();\n    },\n    set: function (value) {\n      isEnabled(value && _Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].enabled */ .Z.enabled);\n    },\n  });\n\n  /**\n   * Gets the tooltip.  This property is observable.\n   *\n   * @type {String}\n   */\n  this.tooltip = undefined;\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].defineProperty */ .Z.defineProperty(this, "tooltip", function () {\n    if (!isEnabled()) {\n      return "VR mode is unavailable";\n    }\n    return isVRMode() ? "Exit VR mode" : "Enter VR mode";\n  });\n\n  var isOrthographic = _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].observable */ .Z.observable(false);\n\n  this._isOrthographic = undefined;\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].defineProperty */ .Z.defineProperty(this, "_isOrthographic", {\n    get: function () {\n      return isOrthographic();\n    },\n  });\n\n  this._eventHelper = new _Core_EventHelper_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n  this._eventHelper.add(scene.preRender, function () {\n    isOrthographic(scene.camera.frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z);\n  });\n\n  this._locked = false;\n  this._noSleep = new _ThirdParty_nosleep_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\n\n  this._command = (0,_createCommand_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(function () {\n    toggleVR(that, scene, isVRMode, isOrthographic);\n  }, _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].getObservable */ .Z.getObservable(this, "isVREnabled"));\n\n  this._vrElement = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)((0,_getElement_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(vrElement), document.body);\n\n  this._callback = function () {\n    if (!_Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fullscreen */ .Z.fullscreen && isVRMode()) {\n      scene.useWebVR = false;\n      if (that._locked) {\n        unlockScreen();\n        that._locked = false;\n      }\n      that._noSleep.disable();\n      isVRMode(false);\n    }\n  };\n  document.addEventListener(_Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].changeEventName */ .Z.changeEventName, this._callback);\n}\n\nObject.defineProperties(VRButtonViewModel.prototype, {\n  /**\n   * Gets or sets the HTML element to place into VR mode when the\n   * corresponding button is pressed.\n   * @memberof VRButtonViewModel.prototype\n   *\n   * @type {Element}\n   */\n  vrElement: {\n    //TODO:@exception {DeveloperError} value must be a valid HTML Element.\n    get: function () {\n      return this._vrElement;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(value instanceof Element)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("value must be a valid Element.");\n      }\n      //>>includeEnd(\'debug\');\n\n      this._vrElement = value;\n    },\n  },\n\n  /**\n   * Gets the Command to toggle VR mode.\n   * @memberof VRButtonViewModel.prototype\n   *\n   * @type {Command}\n   */\n  command: {\n    get: function () {\n      return this._command;\n    },\n  },\n});\n\n/**\n * @returns {Boolean} true if the object has been destroyed, false otherwise.\n */\nVRButtonViewModel.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the view model.  Should be called to\n * properly clean up the view model when it is no longer needed.\n */\nVRButtonViewModel.prototype.destroy = function () {\n  this._eventHelper.removeAll();\n  document.removeEventListener(_Core_Fullscreen_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].changeEventName */ .Z.changeEventName, this._callback);\n  (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (VRButtonViewModel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1dpZGdldHMvVlJCdXR0b24vVlJCdXR0b25WaWV3TW9kZWwuanM/ZjVkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi8uLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uLy4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uLy4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi8uLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRXZlbnRIZWxwZXIgZnJvbSBcIi4uLy4uL0NvcmUvRXZlbnRIZWxwZXIuanNcIjtcbmltcG9ydCBGdWxsc2NyZWVuIGZyb20gXCIuLi8uLi9Db3JlL0Z1bGxzY3JlZW4uanNcIjtcbmltcG9ydCBPcnRob2dyYXBoaWNGcnVzdHVtIGZyb20gXCIuLi8uLi9Db3JlL09ydGhvZ3JhcGhpY0ZydXN0dW0uanNcIjtcbmltcG9ydCBrbm9ja291dCBmcm9tIFwiLi4vLi4vVGhpcmRQYXJ0eS9rbm9ja291dC5qc1wiO1xuaW1wb3J0IE5vU2xlZXAgZnJvbSBcIi4uLy4uL1RoaXJkUGFydHkvbm9zbGVlcC5qc1wiO1xuaW1wb3J0IGNyZWF0ZUNvbW1hbmQgZnJvbSBcIi4uL2NyZWF0ZUNvbW1hbmQuanNcIjtcbmltcG9ydCBnZXRFbGVtZW50IGZyb20gXCIuLi9nZXRFbGVtZW50LmpzXCI7XG5cbmZ1bmN0aW9uIGxvY2tTY3JlZW4ob3JpZW50YXRpb24pIHtcbiAgdmFyIGxvY2tlZCA9IGZhbHNlO1xuICB2YXIgc2NyZWVuID0gd2luZG93LnNjcmVlbjtcbiAgaWYgKGRlZmluZWQoc2NyZWVuKSkge1xuICAgIGlmIChkZWZpbmVkKHNjcmVlbi5sb2NrT3JpZW50YXRpb24pKSB7XG4gICAgICBsb2NrZWQgPSBzY3JlZW4ubG9ja09yaWVudGF0aW9uKG9yaWVudGF0aW9uKTtcbiAgICB9IGVsc2UgaWYgKGRlZmluZWQoc2NyZWVuLm1vekxvY2tPcmllbnRhdGlvbikpIHtcbiAgICAgIGxvY2tlZCA9IHNjcmVlbi5tb3pMb2NrT3JpZW50YXRpb24ob3JpZW50YXRpb24pO1xuICAgIH0gZWxzZSBpZiAoZGVmaW5lZChzY3JlZW4ubXNMb2NrT3JpZW50YXRpb24pKSB7XG4gICAgICBsb2NrZWQgPSBzY3JlZW4ubXNMb2NrT3JpZW50YXRpb24ob3JpZW50YXRpb24pO1xuICAgIH0gZWxzZSBpZiAoZGVmaW5lZChzY3JlZW4ub3JpZW50YXRpb24gJiYgc2NyZWVuLm9yaWVudGF0aW9uLmxvY2spKSB7XG4gICAgICBsb2NrZWQgPSBzY3JlZW4ub3JpZW50YXRpb24ubG9jayhvcmllbnRhdGlvbik7XG4gICAgfVxuICB9XG4gIHJldHVybiBsb2NrZWQ7XG59XG5cbmZ1bmN0aW9uIHVubG9ja1NjcmVlbigpIHtcbiAgdmFyIHNjcmVlbiA9IHdpbmRvdy5zY3JlZW47XG4gIGlmIChkZWZpbmVkKHNjcmVlbikpIHtcbiAgICBpZiAoZGVmaW5lZChzY3JlZW4udW5sb2NrT3JpZW50YXRpb24pKSB7XG4gICAgICBzY3JlZW4udW5sb2NrT3JpZW50YXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKGRlZmluZWQoc2NyZWVuLm1velVubG9ja09yaWVudGF0aW9uKSkge1xuICAgICAgc2NyZWVuLm1velVubG9ja09yaWVudGF0aW9uKCk7XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKHNjcmVlbi5tc1VubG9ja09yaWVudGF0aW9uKSkge1xuICAgICAgc2NyZWVuLm1zVW5sb2NrT3JpZW50YXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKGRlZmluZWQoc2NyZWVuLm9yaWVudGF0aW9uICYmIHNjcmVlbi5vcmllbnRhdGlvbi51bmxvY2spKSB7XG4gICAgICBzY3JlZW4ub3JpZW50YXRpb24udW5sb2NrKCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZVZSKHZpZXdNb2RlbCwgc2NlbmUsIGlzVlJNb2RlLCBpc09ydGhvZ3JhcGhpYykge1xuICBpZiAoaXNPcnRob2dyYXBoaWMoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpc1ZSTW9kZSgpKSB7XG4gICAgc2NlbmUudXNlV2ViVlIgPSBmYWxzZTtcbiAgICBpZiAodmlld01vZGVsLl9sb2NrZWQpIHtcbiAgICAgIHVubG9ja1NjcmVlbigpO1xuICAgICAgdmlld01vZGVsLl9sb2NrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdmlld01vZGVsLl9ub1NsZWVwLmRpc2FibGUoKTtcbiAgICBGdWxsc2NyZWVuLmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgaXNWUk1vZGUoZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIGlmICghRnVsbHNjcmVlbi5mdWxsc2NyZWVuKSB7XG4gICAgICBGdWxsc2NyZWVuLnJlcXVlc3RGdWxsc2NyZWVuKHZpZXdNb2RlbC5fdnJFbGVtZW50KTtcbiAgICB9XG4gICAgdmlld01vZGVsLl9ub1NsZWVwLmVuYWJsZSgpO1xuICAgIGlmICghdmlld01vZGVsLl9sb2NrZWQpIHtcbiAgICAgIHZpZXdNb2RlbC5fbG9ja2VkID0gbG9ja1NjcmVlbihcImxhbmRzY2FwZVwiKTtcbiAgICB9XG4gICAgc2NlbmUudXNlV2ViVlIgPSB0cnVlO1xuICAgIGlzVlJNb2RlKHRydWUpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIHZpZXcgbW9kZWwgZm9yIHtAbGluayBWUkJ1dHRvbn0uXG4gKiBAYWxpYXMgVlJCdXR0b25WaWV3TW9kZWxcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7U2NlbmV9IHNjZW5lIFRoZSBzY2VuZS5cbiAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IFt2ckVsZW1lbnQ9ZG9jdW1lbnQuYm9keV0gVGhlIGVsZW1lbnQgb3IgaWQgdG8gYmUgcGxhY2VkIGludG8gVlIgbW9kZS5cbiAqL1xuZnVuY3Rpb24gVlJCdXR0b25WaWV3TW9kZWwoc2NlbmUsIHZyRWxlbWVudCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoc2NlbmUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwic2NlbmUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcblxuICB2YXIgaXNFbmFibGVkID0ga25vY2tvdXQub2JzZXJ2YWJsZShGdWxsc2NyZWVuLmVuYWJsZWQpO1xuICB2YXIgaXNWUk1vZGUgPSBrbm9ja291dC5vYnNlcnZhYmxlKGZhbHNlKTtcblxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIG9yIG5vdCBWUiBtb2RlIGlzIGFjdGl2ZS5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICB0aGlzLmlzVlJNb2RlID0gdW5kZWZpbmVkO1xuICBrbm9ja291dC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzVlJNb2RlXCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpc1ZSTW9kZSgpO1xuICAgIH0sXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgd2hldGhlciBvciBub3QgVlIgZnVuY3Rpb25hbGl0eSBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBzZWUgRnVsbHNjcmVlbi5lbmFibGVkXG4gICAqL1xuICB0aGlzLmlzVlJFbmFibGVkID0gdW5kZWZpbmVkO1xuICBrbm9ja291dC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzVlJFbmFibGVkXCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpc0VuYWJsZWQoKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpc0VuYWJsZWQodmFsdWUgJiYgRnVsbHNjcmVlbi5lbmFibGVkKTtcbiAgICB9LFxuICB9KTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgdG9vbHRpcC4gIFRoaXMgcHJvcGVydHkgaXMgb2JzZXJ2YWJsZS5cbiAgICpcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHRoaXMudG9vbHRpcCA9IHVuZGVmaW5lZDtcbiAga25vY2tvdXQuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sdGlwXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWlzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm4gXCJWUiBtb2RlIGlzIHVuYXZhaWxhYmxlXCI7XG4gICAgfVxuICAgIHJldHVybiBpc1ZSTW9kZSgpID8gXCJFeGl0IFZSIG1vZGVcIiA6IFwiRW50ZXIgVlIgbW9kZVwiO1xuICB9KTtcblxuICB2YXIgaXNPcnRob2dyYXBoaWMgPSBrbm9ja291dC5vYnNlcnZhYmxlKGZhbHNlKTtcblxuICB0aGlzLl9pc09ydGhvZ3JhcGhpYyA9IHVuZGVmaW5lZDtcbiAga25vY2tvdXQuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfaXNPcnRob2dyYXBoaWNcIiwge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGlzT3J0aG9ncmFwaGljKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgdGhpcy5fZXZlbnRIZWxwZXIgPSBuZXcgRXZlbnRIZWxwZXIoKTtcbiAgdGhpcy5fZXZlbnRIZWxwZXIuYWRkKHNjZW5lLnByZVJlbmRlciwgZnVuY3Rpb24gKCkge1xuICAgIGlzT3J0aG9ncmFwaGljKHNjZW5lLmNhbWVyYS5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljRnJ1c3R1bSk7XG4gIH0pO1xuXG4gIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuICB0aGlzLl9ub1NsZWVwID0gbmV3IE5vU2xlZXAoKTtcblxuICB0aGlzLl9jb21tYW5kID0gY3JlYXRlQ29tbWFuZChmdW5jdGlvbiAoKSB7XG4gICAgdG9nZ2xlVlIodGhhdCwgc2NlbmUsIGlzVlJNb2RlLCBpc09ydGhvZ3JhcGhpYyk7XG4gIH0sIGtub2Nrb3V0LmdldE9ic2VydmFibGUodGhpcywgXCJpc1ZSRW5hYmxlZFwiKSk7XG5cbiAgdGhpcy5fdnJFbGVtZW50ID0gZGVmYXVsdFZhbHVlKGdldEVsZW1lbnQodnJFbGVtZW50KSwgZG9jdW1lbnQuYm9keSk7XG5cbiAgdGhpcy5fY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFGdWxsc2NyZWVuLmZ1bGxzY3JlZW4gJiYgaXNWUk1vZGUoKSkge1xuICAgICAgc2NlbmUudXNlV2ViVlIgPSBmYWxzZTtcbiAgICAgIGlmICh0aGF0Ll9sb2NrZWQpIHtcbiAgICAgICAgdW5sb2NrU2NyZWVuKCk7XG4gICAgICAgIHRoYXQuX2xvY2tlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhhdC5fbm9TbGVlcC5kaXNhYmxlKCk7XG4gICAgICBpc1ZSTW9kZShmYWxzZSk7XG4gICAgfVxuICB9O1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKEZ1bGxzY3JlZW4uY2hhbmdlRXZlbnROYW1lLCB0aGlzLl9jYWxsYmFjayk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZSQnV0dG9uVmlld01vZGVsLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBIVE1MIGVsZW1lbnQgdG8gcGxhY2UgaW50byBWUiBtb2RlIHdoZW4gdGhlXG4gICAqIGNvcnJlc3BvbmRpbmcgYnV0dG9uIGlzIHByZXNzZWQuXG4gICAqIEBtZW1iZXJvZiBWUkJ1dHRvblZpZXdNb2RlbC5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0VsZW1lbnR9XG4gICAqL1xuICB2ckVsZW1lbnQ6IHtcbiAgICAvL1RPRE86QGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IHZhbHVlIG11c3QgYmUgYSB2YWxpZCBIVE1MIEVsZW1lbnQuXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdnJFbGVtZW50O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIG11c3QgYmUgYSB2YWxpZCBFbGVtZW50LlwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICB0aGlzLl92ckVsZW1lbnQgPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBDb21tYW5kIHRvIHRvZ2dsZSBWUiBtb2RlLlxuICAgKiBAbWVtYmVyb2YgVlJCdXR0b25WaWV3TW9kZWwucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtDb21tYW5kfVxuICAgKi9cbiAgY29tbWFuZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbW1hbmQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoZSBvYmplY3QgaGFzIGJlZW4gZGVzdHJveWVkLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblZSQnV0dG9uVmlld01vZGVsLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgdmlldyBtb2RlbC4gIFNob3VsZCBiZSBjYWxsZWQgdG9cbiAqIHByb3Blcmx5IGNsZWFuIHVwIHRoZSB2aWV3IG1vZGVsIHdoZW4gaXQgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAqL1xuVlJCdXR0b25WaWV3TW9kZWwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2V2ZW50SGVscGVyLnJlbW92ZUFsbCgpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKEZ1bGxzY3JlZW4uY2hhbmdlRXZlbnROYW1lLCB0aGlzLl9jYWxsYmFjayk7XG4gIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgVlJCdXR0b25WaWV3TW9kZWw7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///31834\n')},1601:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51688);\n/* harmony import */ var _Core_Clock_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95884);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(14459);\n/* harmony import */ var _Core_EventHelper_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(79539);\n/* harmony import */ var _Core_HeadingPitchRange_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(99819);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(72248);\n/* harmony import */ var _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(35452);\n/* harmony import */ var _DataSources_BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(69895);\n/* harmony import */ var _DataSources_ConstantPositionProperty_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(19069);\n/* harmony import */ var _DataSources_DataSourceCollection_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(81992);\n/* harmony import */ var _DataSources_DataSourceDisplay_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(41366);\n/* harmony import */ var _DataSources_Entity_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(11895);\n/* harmony import */ var _DataSources_EntityView_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(68134);\n/* harmony import */ var _DataSources_Property_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(40112);\n/* harmony import */ var _Scene_Cesium3DTileset_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(49104);\n/* harmony import */ var _Scene_computeFlyToLocationForRectangle_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(64585);\n/* harmony import */ var _Scene_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(59379);\n/* harmony import */ var _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(89917);\n/* harmony import */ var _Scene_TimeDynamicPointCloud_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(78831);\n/* harmony import */ var _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(53454);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(13222);\n/* harmony import */ var _Animation_Animation_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(37973);\n/* harmony import */ var _Animation_AnimationViewModel_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(15483);\n/* harmony import */ var _BaseLayerPicker_BaseLayerPicker_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(35504);\n/* harmony import */ var _BaseLayerPicker_createDefaultImageryProviderViewModels_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(98607);\n/* harmony import */ var _BaseLayerPicker_createDefaultTerrainProviderViewModels_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(46936);\n/* harmony import */ var _CesiumWidget_CesiumWidget_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(84166);\n/* harmony import */ var _ClockViewModel_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(36534);\n/* harmony import */ var _FullscreenButton_FullscreenButton_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(66227);\n/* harmony import */ var _Geocoder_Geocoder_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(89224);\n/* harmony import */ var _getElement_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(43412);\n/* harmony import */ var _HomeButton_HomeButton_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(92603);\n/* harmony import */ var _InfoBox_InfoBox_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(41423);\n/* harmony import */ var _NavigationHelpButton_NavigationHelpButton_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(64502);\n/* harmony import */ var _ProjectionPicker_ProjectionPicker_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(29541);\n/* harmony import */ var _SceneModePicker_SceneModePicker_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(48283);\n/* harmony import */ var _SelectionIndicator_SelectionIndicator_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(75596);\n/* harmony import */ var _subscribeAndEvaluate_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(55619);\n/* harmony import */ var _Timeline_Timeline_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(31171);\n/* harmony import */ var _VRButton_VRButton_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(66035);\n/* harmony import */ var _Scene_Cesium3DTileFeature_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(52381);\n/* harmony import */ var _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(55293);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(99417);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar boundingSphereScratch = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\nfunction onTimelineScrubfunction(e) {\n  var clock = e.clock;\n  clock.currentTime = e.timeJulian;\n  clock.shouldAnimate = false;\n}\n\nfunction getCesium3DTileFeatureDescription(feature) {\n  var propertyNames = feature.getPropertyNames();\n\n  var html = "";\n  propertyNames.forEach(function (propertyName) {\n    var value = feature.getProperty(propertyName);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(value)) {\n      html += "<tr><th>" + propertyName + "</th><td>" + value + "</td></tr>";\n    }\n  });\n\n  if (html.length > 0) {\n    html =\n      \'<table class="cesium-infoBox-defaultTable"><tbody>\' +\n      html +\n      "</tbody></table>";\n  }\n\n  return html;\n}\n\nfunction getCesium3DTileFeatureName(feature) {\n  // We need to iterate all property names to find potential\n  // candidates, but since we prefer some property names\n  // over others, we store them in an indexed array\n  // and then use the first defined element in the array\n  // as the preferred choice.\n\n  var i;\n  var possibleNames = [];\n  var propertyNames = feature.getPropertyNames();\n  for (i = 0; i < propertyNames.length; i++) {\n    var propertyName = propertyNames[i];\n    if (/^name$/i.test(propertyName)) {\n      possibleNames[0] = feature.getProperty(propertyName);\n    } else if (/name/i.test(propertyName)) {\n      possibleNames[1] = feature.getProperty(propertyName);\n    } else if (/^title$/i.test(propertyName)) {\n      possibleNames[2] = feature.getProperty(propertyName);\n    } else if (/^(id|identifier)$/i.test(propertyName)) {\n      possibleNames[3] = feature.getProperty(propertyName);\n    } else if (/element/i.test(propertyName)) {\n      possibleNames[4] = feature.getProperty(propertyName);\n    } else if (/(id|identifier)$/i.test(propertyName)) {\n      possibleNames[5] = feature.getProperty(propertyName);\n    }\n  }\n\n  var length = possibleNames.length;\n  for (i = 0; i < length; i++) {\n    var item = possibleNames[i];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(item) && item !== "") {\n      return item;\n    }\n  }\n  return "Unnamed Feature";\n}\n\nfunction pickEntity(viewer, e) {\n  var picked = viewer.scene.pick(e.position);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(picked)) {\n    var id = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(picked.id, picked.primitive.id);\n    if (id instanceof _DataSources_Entity_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z) {\n      return id;\n    }\n\n    if (picked instanceof _Scene_Cesium3DTileFeature_js__WEBPACK_IMPORTED_MODULE_45__/* ["default"] */ .Z) {\n      return new _DataSources_Entity_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n        name: getCesium3DTileFeatureName(picked),\n        description: getCesium3DTileFeatureDescription(picked),\n        feature: picked,\n      });\n    }\n  }\n\n  // No regular entity picked.  Try picking features from imagery layers.\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(viewer.scene.globe)) {\n    return pickImageryLayerFeature(viewer, e.position);\n  }\n}\n\nvar scratchStopTime = new _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_46__/* ["default"] */ .Z();\n\nfunction trackDataSourceClock(timeline, clock, dataSource) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(dataSource)) {\n    var dataSourceClock = dataSource.clock;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(dataSourceClock)) {\n      dataSourceClock.getValue(clock);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(timeline)) {\n        var startTime = dataSourceClock.startTime;\n        var stopTime = dataSourceClock.stopTime;\n        // When the start and stop times are equal, set the timeline to the shortest interval\n        // starting at the start time. This prevents an invalid timeline configuration.\n        if (_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_46__/* ["default"].equals */ .Z.equals(startTime, stopTime)) {\n          stopTime = _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_46__/* ["default"].addSeconds */ .Z.addSeconds(\n            startTime,\n            _Core_Math_js__WEBPACK_IMPORTED_MODULE_47__/* ["default"].EPSILON2 */ .Z.EPSILON2,\n            scratchStopTime\n          );\n        }\n        timeline.updateFromClock();\n        timeline.zoomTo(startTime, stopTime);\n      }\n    }\n  }\n}\n\nvar cartesian3Scratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction pickImageryLayerFeature(viewer, windowPosition) {\n  var scene = viewer.scene;\n  var pickRay = scene.camera.getPickRay(windowPosition);\n  var imageryLayerFeaturePromise = scene.imageryLayers.pickImageryLayerFeatures(\n    pickRay,\n    scene\n  );\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(imageryLayerFeaturePromise)) {\n    return;\n  }\n\n  // Imagery layer feature picking is asynchronous, so put up a message while loading.\n  var loadingMessage = new _DataSources_Entity_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n    id: "Loading...",\n    description: "Loading feature information...",\n  });\n\n  (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(\n    imageryLayerFeaturePromise,\n    function (features) {\n      // Has this async pick been superseded by a later one?\n      if (viewer.selectedEntity !== loadingMessage) {\n        return;\n      }\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(features) || features.length === 0) {\n        viewer.selectedEntity = createNoFeaturesEntity();\n        return;\n      }\n\n      // Select the first feature.\n      var feature = features[0];\n\n      var entity = new _DataSources_Entity_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n        id: feature.name,\n        description: feature.description,\n      });\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(feature.position)) {\n        var ecfPosition = viewer.scene.globe.ellipsoid.cartographicToCartesian(\n          feature.position,\n          cartesian3Scratch\n        );\n        entity.position = new _DataSources_ConstantPositionProperty_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z(ecfPosition);\n      }\n\n      viewer.selectedEntity = entity;\n    },\n    function () {\n      // Has this async pick been superseded by a later one?\n      if (viewer.selectedEntity !== loadingMessage) {\n        return;\n      }\n      viewer.selectedEntity = createNoFeaturesEntity();\n    }\n  );\n\n  return loadingMessage;\n}\n\nfunction createNoFeaturesEntity() {\n  return new _DataSources_Entity_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n    id: "None",\n    description: "No features found.",\n  });\n}\n\nfunction enableVRUI(viewer, enabled) {\n  var geocoder = viewer._geocoder;\n  var homeButton = viewer._homeButton;\n  var sceneModePicker = viewer._sceneModePicker;\n  var projectionPicker = viewer._projectionPicker;\n  var baseLayerPicker = viewer._baseLayerPicker;\n  var animation = viewer._animation;\n  var timeline = viewer._timeline;\n  var fullscreenButton = viewer._fullscreenButton;\n  var infoBox = viewer._infoBox;\n  var selectionIndicator = viewer._selectionIndicator;\n\n  var visibility = enabled ? "hidden" : "visible";\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(geocoder)) {\n    geocoder.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(homeButton)) {\n    homeButton.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(sceneModePicker)) {\n    sceneModePicker.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(projectionPicker)) {\n    projectionPicker.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(baseLayerPicker)) {\n    baseLayerPicker.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(animation)) {\n    animation.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(timeline)) {\n    timeline.container.style.visibility = visibility;\n  }\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(fullscreenButton) &&\n    fullscreenButton.viewModel.isFullscreenEnabled\n  ) {\n    fullscreenButton.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(infoBox)) {\n    infoBox.container.style.visibility = visibility;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(selectionIndicator)) {\n    selectionIndicator.container.style.visibility = visibility;\n  }\n\n  if (viewer._container) {\n    var right =\n      enabled || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(fullscreenButton)\n        ? 0\n        : fullscreenButton.container.clientWidth;\n    viewer._vrButton.container.style.right = right + "px";\n\n    viewer.forceResize();\n  }\n}\n\n/**\n * @typedef {Object} Viewer.ConstructorOptions\n *\n * Initialization options for the Viewer constructor\n *\n * @property {Boolean} [animation=true] If set to false, the Animation widget will not be created.\n * @property {Boolean} [baseLayerPicker=true] If set to false, the BaseLayerPicker widget will not be created.\n * @property {Boolean} [fullscreenButton=true] If set to false, the FullscreenButton widget will not be created.\n * @property {Boolean} [vrButton=false] If set to true, the VRButton widget will be created.\n * @property {Boolean|GeocoderService[]} [geocoder=true] If set to false, the Geocoder widget will not be created.\n * @property {Boolean} [homeButton=true] If set to false, the HomeButton widget will not be created.\n * @property {Boolean} [infoBox=true] If set to false, the InfoBox widget will not be created.\n * @property {Boolean} [sceneModePicker=true] If set to false, the SceneModePicker widget will not be created.\n * @property {Boolean} [selectionIndicator=true] If set to false, the SelectionIndicator widget will not be created.\n * @property {Boolean} [timeline=true] If set to false, the Timeline widget will not be created.\n * @property {Boolean} [navigationHelpButton=true] If set to false, the navigation help button will not be created.\n * @property {Boolean} [navigationInstructionsInitiallyVisible=true] True if the navigation instructions should initially be visible, or false if the should not be shown until the user explicitly clicks the button.\n * @property {Boolean} [scene3DOnly=false] When <code>true</code>, each geometry instance will only be rendered in 3D to save GPU memory.\n * @property {Boolean} [shouldAnimate=false] <code>true</code> if the clock should attempt to advance simulation time by default, <code>false</code> otherwise.  This option takes precedence over setting {@link Viewer#clockViewModel}.\n * @property {ClockViewModel} [clockViewModel=new ClockViewModel(clock)] The clock view model to use to control current time.\n * @property {ProviderViewModel} [selectedImageryProviderViewModel] The view model for the current base imagery layer, if not supplied the first available base layer is used.  This value is only valid if `baseLayerPicker` is set to true.\n * @property {ProviderViewModel[]} [imageryProviderViewModels=createDefaultImageryProviderViewModels()] The array of ProviderViewModels to be selectable from the BaseLayerPicker.  This value is only valid if `baseLayerPicker` is set to true.\n * @property {ProviderViewModel} [selectedTerrainProviderViewModel] The view model for the current base terrain layer, if not supplied the first available base layer is used.  This value is only valid if `baseLayerPicker` is set to true.\n * @property {ProviderViewModel[]} [terrainProviderViewModels=createDefaultTerrainProviderViewModels()] The array of ProviderViewModels to be selectable from the BaseLayerPicker.  This value is only valid if `baseLayerPicker` is set to true.\n * @property {ImageryProvider} [imageryProvider=createWorldImagery()] The imagery provider to use.  This value is only valid if `baseLayerPicker` is set to false.\n * @property {TerrainProvider} [terrainProvider=new EllipsoidTerrainProvider()] The terrain provider to use\n * @property {SkyBox|false} [skyBox] The skybox used to render the stars.  When <code>undefined</code>, the default stars are used. If set to <code>false</code>, no skyBox, Sun, or Moon will be added.\n * @property {SkyAtmosphere|false} [skyAtmosphere] Blue sky, and the glow around the Earth\'s limb.  Set to <code>false</code> to turn it off.\n * @property {Element|String} [fullscreenElement=document.body] The element or id to be placed into fullscreen mode when the full screen button is pressed.\n * @property {Boolean} [useDefaultRenderLoop=true] True if this widget should control the render loop, false otherwise.\n * @property {Number} [targetFrameRate] The target frame rate when using the default render loop.\n * @property {Boolean} [showRenderLoopErrors=true] If true, this widget will automatically display an HTML panel to the user containing the error, if a render loop error occurs.\n * @property {Boolean} [useBrowserRecommendedResolution=true] If true, render at the browser\'s recommended resolution and ignore <code>window.devicePixelRatio</code>.\n * @property {Boolean} [automaticallyTrackDataSourceClocks=true] If true, this widget will automatically track the clock settings of newly added DataSources, updating if the DataSource\'s clock changes.  Set this to false if you want to configure the clock independently.\n * @property {Object} [contextOptions] Context and WebGL creation properties corresponding to <code>options</code> passed to {@link Scene}.\n * @property {SceneMode} [sceneMode=SceneMode.SCENE3D] The initial scene mode.\n * @property {MapProjection} [mapProjection=new GeographicProjection()] The map projection to use in 2D and Columbus View modes.\n * @property {Globe|false} [globe=new Globe(mapProjection.ellipsoid)] The globe to use in the scene.  If set to <code>false</code>, no globe will be added.\n * @property {Boolean} [orderIndependentTranslucency=true] If true and the configuration supports it, use order independent translucency.\n * @property {Element|String} [creditContainer] The DOM element or ID that will contain the {@link CreditDisplay}.  If not specified, the credits are added to the bottom of the widget itself.\n * @property {Element|String} [creditViewport] The DOM element or ID that will contain the credit pop up created by the {@link CreditDisplay}.  If not specified, it will appear over the widget itself.\n * @property {DataSourceCollection} [dataSources=new DataSourceCollection()] The collection of data sources visualized by the widget.  If this parameter is provided,\n *                               the instance is assumed to be owned by the caller and will not be destroyed when the viewer is destroyed.\n * @property {Boolean} [shadows=false] Determines if shadows are cast by light sources.\n * @property {ShadowMode} [terrainShadows=ShadowMode.RECEIVE_ONLY] Determines if the terrain casts or receives shadows from light sources.\n * @property {MapMode2D} [mapMode2D=MapMode2D.INFINITE_SCROLL] Determines if the 2D map is rotatable or can be scrolled infinitely in the horizontal direction.\n * @property {Boolean} [projectionPicker=false] If set to true, the ProjectionPicker widget will be created.\n * @property {Boolean} [requestRenderMode=false] If true, rendering a frame will only occur when needed as determined by changes within the scene. Enabling reduces the CPU/GPU usage of your application and uses less battery on mobile, but requires using {@link Scene#requestRender} to render a new frame explicitly in this mode. This will be necessary in many cases after making changes to the scene in other parts of the API. See {@link https://cesium.com/blog/2018/01/24/cesium-scene-rendering-performance/|Improving Performance with Explicit Rendering}.\n * @property {Number} [maximumRenderTimeChange=0.0] If requestRenderMode is true, this value defines the maximum change in simulation time allowed before a render is requested. See {@link https://cesium.com/blog/2018/01/24/cesium-scene-rendering-performance/|Improving Performance with Explicit Rendering}.\n */\n\n/**\n * A base widget for building applications.  It composites all of the standard Cesium widgets into one reusable package.\n * The widget can always be extended by using mixins, which add functionality useful for a variety of applications.\n *\n * @alias Viewer\n * @constructor\n *\n * @param {Element|String} container The DOM element or ID that will contain the widget.\n * @param {Viewer.ConstructorOptions} [options] Object describing initialization options\n *\n * @exception {DeveloperError} Element with id "container" does not exist in the document.\n * @exception {DeveloperError} options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget, specify options.imageryProvider instead.\n * @exception {DeveloperError} options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget, specify options.terrainProvider instead.\n *\n * @see Animation\n * @see BaseLayerPicker\n * @see CesiumWidget\n * @see FullscreenButton\n * @see HomeButton\n * @see SceneModePicker\n * @see Timeline\n * @see viewerDragDropMixin\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Hello%20World.html|Cesium Sandcastle Hello World Demo}\n *\n * @example\n * //Initialize the viewer widget with several custom options and mixins.\n * var viewer = new Cesium.Viewer(\'cesiumContainer\', {\n *     //Start in Columbus Viewer\n *     sceneMode : Cesium.SceneMode.COLUMBUS_VIEW,\n *     //Use Cesium World Terrain\n *     terrainProvider : Cesium.createWorldTerrain(),\n *     //Hide the base layer picker\n *     baseLayerPicker : false,\n *     //Use OpenStreetMaps\n *     imageryProvider : new Cesium.OpenStreetMapImageryProvider({\n *         url : \'https://a.tile.openstreetmap.org/\'\n *     }),\n *     skyBox : new Cesium.SkyBox({\n *         sources : {\n *           positiveX : \'stars/TychoSkymapII.t3_08192x04096_80_px.jpg\',\n *           negativeX : \'stars/TychoSkymapII.t3_08192x04096_80_mx.jpg\',\n *           positiveY : \'stars/TychoSkymapII.t3_08192x04096_80_py.jpg\',\n *           negativeY : \'stars/TychoSkymapII.t3_08192x04096_80_my.jpg\',\n *           positiveZ : \'stars/TychoSkymapII.t3_08192x04096_80_pz.jpg\',\n *           negativeZ : \'stars/TychoSkymapII.t3_08192x04096_80_mz.jpg\'\n *         }\n *     }),\n *     // Show Columbus View map with Web Mercator projection\n *     mapProjection : new Cesium.WebMercatorProjection()\n * });\n *\n * //Add basic drag and drop functionality\n * viewer.extend(Cesium.viewerDragDropMixin);\n *\n * //Show a pop-up alert if we encounter an error when processing a dropped file\n * viewer.dropError.addEventListener(function(dropHandler, name, error) {\n *     console.log(error);\n *     window.alert(error);\n * });\n */\nfunction Viewer(container, options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(container)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("container is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  container = (0,_getElement_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(container);\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  var createBaseLayerPicker =\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.globe) || options.globe !== false) &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.baseLayerPicker) || options.baseLayerPicker !== false);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  // If not using BaseLayerPicker, selectedImageryProviderViewModel is an invalid option\n  if (\n    !createBaseLayerPicker &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.selectedImageryProviderViewModel)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget. \\\nEither specify options.imageryProvider instead or set options.baseLayerPicker to true."\n    );\n  }\n\n  // If not using BaseLayerPicker, selectedTerrainProviderViewModel is an invalid option\n  if (\n    !createBaseLayerPicker &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.selectedTerrainProviderViewModel)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget. \\\nEither specify options.terrainProvider instead or set options.baseLayerPicker to true."\n    );\n  }\n  //>>includeEnd(\'debug\')\n\n  var that = this;\n\n  var viewerContainer = document.createElement("div");\n  viewerContainer.className = "cesium-viewer";\n  container.appendChild(viewerContainer);\n\n  // Cesium widget container\n  var cesiumWidgetContainer = document.createElement("div");\n  cesiumWidgetContainer.className = "cesium-viewer-cesiumWidgetContainer";\n  viewerContainer.appendChild(cesiumWidgetContainer);\n\n  // Bottom container\n  var bottomContainer = document.createElement("div");\n  bottomContainer.className = "cesium-viewer-bottom";\n\n  viewerContainer.appendChild(bottomContainer);\n\n  var scene3DOnly = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.scene3DOnly, false);\n\n  var clock;\n  var clockViewModel;\n  var destroyClockViewModel = false;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.clockViewModel)) {\n    clockViewModel = options.clockViewModel;\n    clock = clockViewModel.clock;\n  } else {\n    clock = new _Core_Clock_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n    clockViewModel = new _ClockViewModel_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z(clock);\n    destroyClockViewModel = true;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.shouldAnimate)) {\n    clock.shouldAnimate = options.shouldAnimate;\n  }\n\n  // Cesium widget\n  var cesiumWidget = new _CesiumWidget_CesiumWidget_js__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z(cesiumWidgetContainer, {\n    imageryProvider:\n      createBaseLayerPicker || (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.imageryProvider)\n        ? false\n        : undefined,\n    clock: clock,\n    skyBox: options.skyBox,\n    skyAtmosphere: options.skyAtmosphere,\n    sceneMode: options.sceneMode,\n    mapProjection: options.mapProjection,\n    globe: options.globe,\n    orderIndependentTranslucency: options.orderIndependentTranslucency,\n    contextOptions: options.contextOptions,\n    useDefaultRenderLoop: options.useDefaultRenderLoop,\n    targetFrameRate: options.targetFrameRate,\n    showRenderLoopErrors: options.showRenderLoopErrors,\n    useBrowserRecommendedResolution: options.useBrowserRecommendedResolution,\n    creditContainer: (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.creditContainer)\n      ? options.creditContainer\n      : bottomContainer,\n    creditViewport: options.creditViewport,\n    scene3DOnly: scene3DOnly,\n    shadows: options.shadows,\n    terrainShadows: options.terrainShadows,\n    mapMode2D: options.mapMode2D,\n    requestRenderMode: options.requestRenderMode,\n    maximumRenderTimeChange: options.maximumRenderTimeChange,\n  });\n\n  var dataSourceCollection = options.dataSources;\n  var destroyDataSourceCollection = false;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(dataSourceCollection)) {\n    dataSourceCollection = new _DataSources_DataSourceCollection_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z();\n    destroyDataSourceCollection = true;\n  }\n\n  var scene = cesiumWidget.scene;\n\n  var dataSourceDisplay = new _DataSources_DataSourceDisplay_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n    scene: scene,\n    dataSourceCollection: dataSourceCollection,\n  });\n\n  var eventHelper = new _Core_EventHelper_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z();\n\n  eventHelper.add(clock.onTick, Viewer.prototype._onTick, this);\n  eventHelper.add(scene.morphStart, Viewer.prototype._clearTrackedObject, this);\n\n  // Selection Indicator\n  var selectionIndicator;\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.selectionIndicator) ||\n    options.selectionIndicator !== false\n  ) {\n    var selectionIndicatorContainer = document.createElement("div");\n    selectionIndicatorContainer.className =\n      "cesium-viewer-selectionIndicatorContainer";\n    viewerContainer.appendChild(selectionIndicatorContainer);\n    selectionIndicator = new _SelectionIndicator_SelectionIndicator_js__WEBPACK_IMPORTED_MODULE_41__/* ["default"] */ .Z(\n      selectionIndicatorContainer,\n      scene\n    );\n  }\n\n  // Info Box\n  var infoBox;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.infoBox) || options.infoBox !== false) {\n    var infoBoxContainer = document.createElement("div");\n    infoBoxContainer.className = "cesium-viewer-infoBoxContainer";\n    viewerContainer.appendChild(infoBoxContainer);\n    infoBox = new _InfoBox_InfoBox_js__WEBPACK_IMPORTED_MODULE_37__/* ["default"] */ .Z(infoBoxContainer);\n\n    var infoBoxViewModel = infoBox.viewModel;\n    eventHelper.add(\n      infoBoxViewModel.cameraClicked,\n      Viewer.prototype._onInfoBoxCameraClicked,\n      this\n    );\n    eventHelper.add(\n      infoBoxViewModel.closeClicked,\n      Viewer.prototype._onInfoBoxClockClicked,\n      this\n    );\n  }\n\n  // Main Toolbar\n  var toolbar = document.createElement("div");\n  toolbar.className = "cesium-viewer-toolbar";\n  viewerContainer.appendChild(toolbar);\n\n  // Geocoder\n  var geocoder;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.geocoder) || options.geocoder !== false) {\n    var geocoderContainer = document.createElement("div");\n    geocoderContainer.className = "cesium-viewer-geocoderContainer";\n    toolbar.appendChild(geocoderContainer);\n    var geocoderService;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.geocoder) && typeof options.geocoder !== "boolean") {\n      geocoderService = Array.isArray(options.geocoder)\n        ? options.geocoder\n        : [options.geocoder];\n    }\n    geocoder = new _Geocoder_Geocoder_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z({\n      container: geocoderContainer,\n      geocoderServices: geocoderService,\n      scene: scene,\n    });\n    // Subscribe to search so that we can clear the trackedEntity when it is clicked.\n    eventHelper.add(\n      geocoder.viewModel.search.beforeExecute,\n      Viewer.prototype._clearObjects,\n      this\n    );\n  }\n\n  // HomeButton\n  var homeButton;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.homeButton) || options.homeButton !== false) {\n    homeButton = new _HomeButton_HomeButton_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z(toolbar, scene);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(geocoder)) {\n      eventHelper.add(homeButton.viewModel.command.afterExecute, function () {\n        var viewModel = geocoder.viewModel;\n        viewModel.searchText = "";\n        if (viewModel.isSearchInProgress) {\n          viewModel.search();\n        }\n      });\n    }\n    // Subscribe to the home button beforeExecute event so that we can clear the trackedEntity.\n    eventHelper.add(\n      homeButton.viewModel.command.beforeExecute,\n      Viewer.prototype._clearTrackedObject,\n      this\n    );\n  }\n\n  // SceneModePicker\n  // By default, we silently disable the scene mode picker if scene3DOnly is true,\n  // but if sceneModePicker is explicitly set to true, throw an error.\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (options.sceneModePicker === true && scene3DOnly) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "options.sceneModePicker is not available when options.scene3DOnly is set to true."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var sceneModePicker;\n  if (\n    !scene3DOnly &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.sceneModePicker) || options.sceneModePicker !== false)\n  ) {\n    sceneModePicker = new _SceneModePicker_SceneModePicker_js__WEBPACK_IMPORTED_MODULE_40__/* ["default"] */ .Z(toolbar, scene);\n  }\n\n  var projectionPicker;\n  if (options.projectionPicker) {\n    projectionPicker = new _ProjectionPicker_ProjectionPicker_js__WEBPACK_IMPORTED_MODULE_39__/* ["default"] */ .Z(toolbar, scene);\n  }\n\n  // BaseLayerPicker\n  var baseLayerPicker;\n  var baseLayerPickerDropDown;\n  if (createBaseLayerPicker) {\n    var imageryProviderViewModels = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n      options.imageryProviderViewModels,\n      (0,_BaseLayerPicker_createDefaultImageryProviderViewModels_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)()\n    );\n    var terrainProviderViewModels = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n      options.terrainProviderViewModels,\n      (0,_BaseLayerPicker_createDefaultTerrainProviderViewModels_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)()\n    );\n\n    baseLayerPicker = new _BaseLayerPicker_BaseLayerPicker_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z(toolbar, {\n      globe: scene.globe,\n      imageryProviderViewModels: imageryProviderViewModels,\n      selectedImageryProviderViewModel:\n        options.selectedImageryProviderViewModel,\n      terrainProviderViewModels: terrainProviderViewModels,\n      selectedTerrainProviderViewModel:\n        options.selectedTerrainProviderViewModel,\n    });\n\n    //Grab the dropdown for resize code.\n    var elements = toolbar.getElementsByClassName(\n      "cesium-baseLayerPicker-dropDown"\n    );\n    baseLayerPickerDropDown = elements[0];\n  }\n\n  // These need to be set after the BaseLayerPicker is created in order to take effect\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.imageryProvider) && options.imageryProvider !== false) {\n    if (createBaseLayerPicker) {\n      baseLayerPicker.viewModel.selectedImagery = undefined;\n    }\n    scene.imageryLayers.removeAll();\n    scene.imageryLayers.addImageryProvider(options.imageryProvider);\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.terrainProvider)) {\n    if (createBaseLayerPicker) {\n      baseLayerPicker.viewModel.selectedTerrain = undefined;\n    }\n    scene.terrainProvider = options.terrainProvider;\n  }\n\n  // Navigation Help Button\n  var navigationHelpButton;\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.navigationHelpButton) ||\n    options.navigationHelpButton !== false\n  ) {\n    var showNavHelp = true;\n    try {\n      //window.localStorage is null if disabled in Firefox or undefined in browsers with implementation\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(window.localStorage)) {\n        var hasSeenNavHelp = window.localStorage.getItem(\n          "cesium-hasSeenNavHelp"\n        );\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(hasSeenNavHelp) && Boolean(hasSeenNavHelp)) {\n          showNavHelp = false;\n        } else {\n          window.localStorage.setItem("cesium-hasSeenNavHelp", "true");\n        }\n      }\n    } catch (e) {\n      //Accessing window.localStorage throws if disabled in Chrome\n      //window.localStorage.setItem throws if in Safari private browsing mode or in any browser if we are over quota.\n    }\n    navigationHelpButton = new _NavigationHelpButton_NavigationHelpButton_js__WEBPACK_IMPORTED_MODULE_38__/* ["default"] */ .Z({\n      container: toolbar,\n      instructionsInitiallyVisible: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n        options.navigationInstructionsInitiallyVisible,\n        showNavHelp\n      ),\n    });\n  }\n\n  // Animation\n  var animation;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.animation) || options.animation !== false) {\n    var animationContainer = document.createElement("div");\n    animationContainer.className = "cesium-viewer-animationContainer";\n    viewerContainer.appendChild(animationContainer);\n    animation = new _Animation_Animation_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z(\n      animationContainer,\n      new _Animation_AnimationViewModel_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z(clockViewModel)\n    );\n  }\n\n  // Timeline\n  var timeline;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.timeline) || options.timeline !== false) {\n    var timelineContainer = document.createElement("div");\n    timelineContainer.className = "cesium-viewer-timelineContainer";\n    viewerContainer.appendChild(timelineContainer);\n    timeline = new _Timeline_Timeline_js__WEBPACK_IMPORTED_MODULE_43__/* ["default"] */ .Z(timelineContainer, clock);\n    timeline.addEventListener("settime", onTimelineScrubfunction, false);\n    timeline.zoomTo(clock.startTime, clock.stopTime);\n  }\n\n  // Fullscreen\n  var fullscreenButton;\n  var fullscreenSubscription;\n  var fullscreenContainer;\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(options.fullscreenButton) ||\n    options.fullscreenButton !== false\n  ) {\n    fullscreenContainer = document.createElement("div");\n    fullscreenContainer.className = "cesium-viewer-fullscreenContainer";\n    viewerContainer.appendChild(fullscreenContainer);\n    fullscreenButton = new _FullscreenButton_FullscreenButton_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */ .Z(\n      fullscreenContainer,\n      options.fullscreenElement\n    );\n\n    //Subscribe to fullscreenButton.viewModel.isFullscreenEnabled so\n    //that we can hide/show the button as well as size the timeline.\n    fullscreenSubscription = (0,_subscribeAndEvaluate_js__WEBPACK_IMPORTED_MODULE_42__/* ["default"] */ .Z)(\n      fullscreenButton.viewModel,\n      "isFullscreenEnabled",\n      function (isFullscreenEnabled) {\n        fullscreenContainer.style.display = isFullscreenEnabled\n          ? "block"\n          : "none";\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(timeline)) {\n          timeline.container.style.right =\n            fullscreenContainer.clientWidth + "px";\n          timeline.resize();\n        }\n      }\n    );\n  }\n\n  // VR\n  var vrButton;\n  var vrSubscription;\n  var vrModeSubscription;\n  if (options.vrButton) {\n    var vrContainer = document.createElement("div");\n    vrContainer.className = "cesium-viewer-vrContainer";\n    viewerContainer.appendChild(vrContainer);\n    vrButton = new _VRButton_VRButton_js__WEBPACK_IMPORTED_MODULE_44__/* ["default"] */ .Z(vrContainer, scene, options.fullScreenElement);\n\n    vrSubscription = (0,_subscribeAndEvaluate_js__WEBPACK_IMPORTED_MODULE_42__/* ["default"] */ .Z)(\n      vrButton.viewModel,\n      "isVREnabled",\n      function (isVREnabled) {\n        vrContainer.style.display = isVREnabled ? "block" : "none";\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(fullscreenButton)) {\n          vrContainer.style.right = fullscreenContainer.clientWidth + "px";\n        }\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(timeline)) {\n          timeline.container.style.right = vrContainer.clientWidth + "px";\n          timeline.resize();\n        }\n      }\n    );\n\n    vrModeSubscription = (0,_subscribeAndEvaluate_js__WEBPACK_IMPORTED_MODULE_42__/* ["default"] */ .Z)(\n      vrButton.viewModel,\n      "isVRMode",\n      function (isVRMode) {\n        enableVRUI(that, isVRMode);\n      }\n    );\n  }\n\n  //Assign all properties to this instance.  No "this" assignments should\n  //take place above this line.\n  this._baseLayerPickerDropDown = baseLayerPickerDropDown;\n  this._fullscreenSubscription = fullscreenSubscription;\n  this._vrSubscription = vrSubscription;\n  this._vrModeSubscription = vrModeSubscription;\n  this._dataSourceChangedListeners = {};\n  this._automaticallyTrackDataSourceClocks = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    options.automaticallyTrackDataSourceClocks,\n    true\n  );\n  this._container = container;\n  this._bottomContainer = bottomContainer;\n  this._element = viewerContainer;\n  this._cesiumWidget = cesiumWidget;\n  this._selectionIndicator = selectionIndicator;\n  this._infoBox = infoBox;\n  this._dataSourceCollection = dataSourceCollection;\n  this._destroyDataSourceCollection = destroyDataSourceCollection;\n  this._dataSourceDisplay = dataSourceDisplay;\n  this._clockViewModel = clockViewModel;\n  this._destroyClockViewModel = destroyClockViewModel;\n  this._toolbar = toolbar;\n  this._homeButton = homeButton;\n  this._sceneModePicker = sceneModePicker;\n  this._projectionPicker = projectionPicker;\n  this._baseLayerPicker = baseLayerPicker;\n  this._navigationHelpButton = navigationHelpButton;\n  this._animation = animation;\n  this._timeline = timeline;\n  this._fullscreenButton = fullscreenButton;\n  this._vrButton = vrButton;\n  this._geocoder = geocoder;\n  this._eventHelper = eventHelper;\n  this._lastWidth = 0;\n  this._lastHeight = 0;\n  this._allowDataSourcesToSuspendAnimation = true;\n  this._entityView = undefined;\n  this._enableInfoOrSelection = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(infoBox) || (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(selectionIndicator);\n  this._clockTrackedDataSource = undefined;\n  this._trackedEntity = undefined;\n  this._needTrackedEntityUpdate = false;\n  this._selectedEntity = undefined;\n  this._clockTrackedDataSource = undefined;\n  this._zoomIsFlight = false;\n  this._zoomTarget = undefined;\n  this._zoomPromise = undefined;\n  this._zoomOptions = undefined;\n  this._selectedEntityChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\n  this._trackedEntityChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\n\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].track */ .Z.track(this, [\n    "_trackedEntity",\n    "_selectedEntity",\n    "_clockTrackedDataSource",\n  ]);\n\n  //Listen to data source events in order to track clock changes.\n  eventHelper.add(\n    dataSourceCollection.dataSourceAdded,\n    Viewer.prototype._onDataSourceAdded,\n    this\n  );\n  eventHelper.add(\n    dataSourceCollection.dataSourceRemoved,\n    Viewer.prototype._onDataSourceRemoved,\n    this\n  );\n\n  // Prior to each render, check if anything needs to be resized.\n  eventHelper.add(scene.postUpdate, Viewer.prototype.resize, this);\n  eventHelper.add(scene.postRender, Viewer.prototype._postRender, this);\n\n  // We need to subscribe to the data sources and collections so that we can clear the\n  // tracked object when it is removed from the scene.\n  // Subscribe to current data sources\n  var dataSourceLength = dataSourceCollection.length;\n  for (var i = 0; i < dataSourceLength; i++) {\n    this._dataSourceAdded(dataSourceCollection, dataSourceCollection.get(i));\n  }\n  this._dataSourceAdded(undefined, dataSourceDisplay.defaultDataSource);\n\n  // Hook up events so that we can subscribe to future sources.\n  eventHelper.add(\n    dataSourceCollection.dataSourceAdded,\n    Viewer.prototype._dataSourceAdded,\n    this\n  );\n  eventHelper.add(\n    dataSourceCollection.dataSourceRemoved,\n    Viewer.prototype._dataSourceRemoved,\n    this\n  );\n\n  // Subscribe to left clicks and zoom to the picked object.\n  function pickAndTrackObject(e) {\n    var entity = pickEntity(that, e);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(entity)) {\n      //Only track the entity if it has a valid position at the current time.\n      if (\n        _DataSources_Property_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].getValueOrUndefined */ .Z.getValueOrUndefined(entity.position, that.clock.currentTime)\n      ) {\n        that.trackedEntity = entity;\n      } else {\n        that.zoomTo(entity);\n      }\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(that.trackedEntity)) {\n      that.trackedEntity = undefined;\n    }\n  }\n\n  function pickAndSelectObject(e) {\n    that.selectedEntity = pickEntity(that, e);\n  }\n\n  cesiumWidget.screenSpaceEventHandler.setInputAction(\n    pickAndSelectObject,\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LEFT_CLICK */ .Z.LEFT_CLICK\n  );\n  cesiumWidget.screenSpaceEventHandler.setInputAction(\n    pickAndTrackObject,\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LEFT_DOUBLE_CLICK */ .Z.LEFT_DOUBLE_CLICK\n  );\n}\n\nObject.defineProperties(Viewer.prototype, {\n  /**\n   * Gets the parent container.\n   * @memberof Viewer.prototype\n   * @type {Element}\n   * @readonly\n   */\n  container: {\n    get: function () {\n      return this._container;\n    },\n  },\n\n  /**\n   * Gets the DOM element for the area at the bottom of the window containing the\n   * {@link CreditDisplay} and potentially other things.\n   * @memberof Viewer.prototype\n   * @type {Element}\n   * @readonly\n   */\n  bottomContainer: {\n    get: function () {\n      return this._bottomContainer;\n    },\n  },\n\n  /**\n   * Gets the CesiumWidget.\n   * @memberof Viewer.prototype\n   * @type {CesiumWidget}\n   * @readonly\n   */\n  cesiumWidget: {\n    get: function () {\n      return this._cesiumWidget;\n    },\n  },\n\n  /**\n   * Gets the selection indicator.\n   * @memberof Viewer.prototype\n   * @type {SelectionIndicator}\n   * @readonly\n   */\n  selectionIndicator: {\n    get: function () {\n      return this._selectionIndicator;\n    },\n  },\n\n  /**\n   * Gets the info box.\n   * @memberof Viewer.prototype\n   * @type {InfoBox}\n   * @readonly\n   */\n  infoBox: {\n    get: function () {\n      return this._infoBox;\n    },\n  },\n\n  /**\n   * Gets the Geocoder.\n   * @memberof Viewer.prototype\n   * @type {Geocoder}\n   * @readonly\n   */\n  geocoder: {\n    get: function () {\n      return this._geocoder;\n    },\n  },\n\n  /**\n   * Gets the HomeButton.\n   * @memberof Viewer.prototype\n   * @type {HomeButton}\n   * @readonly\n   */\n  homeButton: {\n    get: function () {\n      return this._homeButton;\n    },\n  },\n\n  /**\n   * Gets the SceneModePicker.\n   * @memberof Viewer.prototype\n   * @type {SceneModePicker}\n   * @readonly\n   */\n  sceneModePicker: {\n    get: function () {\n      return this._sceneModePicker;\n    },\n  },\n\n  /**\n   * Gets the ProjectionPicker.\n   * @memberof Viewer.prototype\n   * @type {ProjectionPicker}\n   * @readonly\n   */\n  projectionPicker: {\n    get: function () {\n      return this._projectionPicker;\n    },\n  },\n\n  /**\n   * Gets the BaseLayerPicker.\n   * @memberof Viewer.prototype\n   * @type {BaseLayerPicker}\n   * @readonly\n   */\n  baseLayerPicker: {\n    get: function () {\n      return this._baseLayerPicker;\n    },\n  },\n\n  /**\n   * Gets the NavigationHelpButton.\n   * @memberof Viewer.prototype\n   * @type {NavigationHelpButton}\n   * @readonly\n   */\n  navigationHelpButton: {\n    get: function () {\n      return this._navigationHelpButton;\n    },\n  },\n\n  /**\n   * Gets the Animation widget.\n   * @memberof Viewer.prototype\n   * @type {Animation}\n   * @readonly\n   */\n  animation: {\n    get: function () {\n      return this._animation;\n    },\n  },\n\n  /**\n   * Gets the Timeline widget.\n   * @memberof Viewer.prototype\n   * @type {Timeline}\n   * @readonly\n   */\n  timeline: {\n    get: function () {\n      return this._timeline;\n    },\n  },\n\n  /**\n   * Gets the FullscreenButton.\n   * @memberof Viewer.prototype\n   * @type {FullscreenButton}\n   * @readonly\n   */\n  fullscreenButton: {\n    get: function () {\n      return this._fullscreenButton;\n    },\n  },\n\n  /**\n   * Gets the VRButton.\n   * @memberof Viewer.prototype\n   * @type {VRButton}\n   * @readonly\n   */\n  vrButton: {\n    get: function () {\n      return this._vrButton;\n    },\n  },\n\n  /**\n   * Gets the display used for {@link DataSource} visualization.\n   * @memberof Viewer.prototype\n   * @type {DataSourceDisplay}\n   * @readonly\n   */\n  dataSourceDisplay: {\n    get: function () {\n      return this._dataSourceDisplay;\n    },\n  },\n\n  /**\n   * Gets the collection of entities not tied to a particular data source.\n   * This is a shortcut to [dataSourceDisplay.defaultDataSource.entities]{@link Viewer#dataSourceDisplay}.\n   * @memberof Viewer.prototype\n   * @type {EntityCollection}\n   * @readonly\n   */\n  entities: {\n    get: function () {\n      return this._dataSourceDisplay.defaultDataSource.entities;\n    },\n  },\n\n  /**\n   * Gets the set of {@link DataSource} instances to be visualized.\n   * @memberof Viewer.prototype\n   * @type {DataSourceCollection}\n   * @readonly\n   */\n  dataSources: {\n    get: function () {\n      return this._dataSourceCollection;\n    },\n  },\n\n  /**\n   * Gets the canvas.\n   * @memberof Viewer.prototype\n   * @type {HTMLCanvasElement}\n   * @readonly\n   */\n  canvas: {\n    get: function () {\n      return this._cesiumWidget.canvas;\n    },\n  },\n\n  /**\n   * Gets the scene.\n   * @memberof Viewer.prototype\n   * @type {Scene}\n   * @readonly\n   */\n  scene: {\n    get: function () {\n      return this._cesiumWidget.scene;\n    },\n  },\n\n  /**\n   * Determines if shadows are cast by light sources.\n   * @memberof Viewer.prototype\n   * @type {Boolean}\n   */\n  shadows: {\n    get: function () {\n      return this.scene.shadowMap.enabled;\n    },\n    set: function (value) {\n      this.scene.shadowMap.enabled = value;\n    },\n  },\n\n  /**\n   * Determines if the terrain casts or shadows from light sources.\n   * @memberof Viewer.prototype\n   * @type {ShadowMode}\n   */\n  terrainShadows: {\n    get: function () {\n      return this.scene.globe.shadows;\n    },\n    set: function (value) {\n      this.scene.globe.shadows = value;\n    },\n  },\n\n  /**\n   * Get the scene\'s shadow map\n   * @memberof Viewer.prototype\n   * @type {ShadowMap}\n   * @readonly\n   */\n  shadowMap: {\n    get: function () {\n      return this.scene.shadowMap;\n    },\n  },\n\n  /**\n   * Gets the collection of image layers that will be rendered on the globe.\n   * @memberof Viewer.prototype\n   *\n   * @type {ImageryLayerCollection}\n   * @readonly\n   */\n  imageryLayers: {\n    get: function () {\n      return this.scene.imageryLayers;\n    },\n  },\n\n  /**\n   * The terrain provider providing surface geometry for the globe.\n   * @memberof Viewer.prototype\n   *\n   * @type {TerrainProvider}\n   */\n  terrainProvider: {\n    get: function () {\n      return this.scene.terrainProvider;\n    },\n    set: function (terrainProvider) {\n      this.scene.terrainProvider = terrainProvider;\n    },\n  },\n\n  /**\n   * Gets the camera.\n   * @memberof Viewer.prototype\n   *\n   * @type {Camera}\n   * @readonly\n   */\n  camera: {\n    get: function () {\n      return this.scene.camera;\n    },\n  },\n\n  /**\n   * Gets the post-process stages.\n   * @memberof Viewer.prototype\n   *\n   * @type {PostProcessStageCollection}\n   * @readonly\n   */\n  postProcessStages: {\n    get: function () {\n      return this.scene.postProcessStages;\n    },\n  },\n\n  /**\n   * Gets the clock.\n   * @memberof Viewer.prototype\n   * @type {Clock}\n   * @readonly\n   */\n  clock: {\n    get: function () {\n      return this._clockViewModel.clock;\n    },\n  },\n\n  /**\n   * Gets the clock view model.\n   * @memberof Viewer.prototype\n   * @type {ClockViewModel}\n   * @readonly\n   */\n  clockViewModel: {\n    get: function () {\n      return this._clockViewModel;\n    },\n  },\n\n  /**\n   * Gets the screen space event handler.\n   * @memberof Viewer.prototype\n   * @type {ScreenSpaceEventHandler}\n   * @readonly\n   */\n  screenSpaceEventHandler: {\n    get: function () {\n      return this._cesiumWidget.screenSpaceEventHandler;\n    },\n  },\n\n  /**\n   * Gets or sets the target frame rate of the widget when <code>useDefaultRenderLoop</code>\n   * is true. If undefined, the browser\'s {@link requestAnimationFrame} implementation\n   * determines the frame rate.  If defined, this value must be greater than 0.  A value higher\n   * than the underlying requestAnimationFrame implementation will have no effect.\n   * @memberof Viewer.prototype\n   *\n   * @type {Number}\n   */\n  targetFrameRate: {\n    get: function () {\n      return this._cesiumWidget.targetFrameRate;\n    },\n    set: function (value) {\n      this._cesiumWidget.targetFrameRate = value;\n    },\n  },\n\n  /**\n   * Gets or sets whether or not this widget should control the render loop.\n   * If set to true the widget will use {@link requestAnimationFrame} to\n   * perform rendering and resizing of the widget, as well as drive the\n   * simulation clock. If set to false, you must manually call the\n   * <code>resize</code>, <code>render</code> methods\n   * as part of a custom render loop.  If an error occurs during rendering, {@link Scene}\'s\n   * <code>renderError</code> event will be raised and this property\n   * will be set to false.  It must be set back to true to continue rendering\n   * after the error.\n   * @memberof Viewer.prototype\n   *\n   * @type {Boolean}\n   */\n  useDefaultRenderLoop: {\n    get: function () {\n      return this._cesiumWidget.useDefaultRenderLoop;\n    },\n    set: function (value) {\n      this._cesiumWidget.useDefaultRenderLoop = value;\n    },\n  },\n\n  /**\n   * Gets or sets a scaling factor for rendering resolution.  Values less than 1.0 can improve\n   * performance on less powerful devices while values greater than 1.0 will render at a higher\n   * resolution and then scale down, resulting in improved visual fidelity.\n   * For example, if the widget is laid out at a size of 640x480, setting this value to 0.5\n   * will cause the scene to be rendered at 320x240 and then scaled up while setting\n   * it to 2.0 will cause the scene to be rendered at 1280x960 and then scaled down.\n   * @memberof Viewer.prototype\n   *\n   * @type {Number}\n   * @default 1.0\n   */\n  resolutionScale: {\n    get: function () {\n      return this._cesiumWidget.resolutionScale;\n    },\n    set: function (value) {\n      this._cesiumWidget.resolutionScale = value;\n    },\n  },\n\n  /**\n   * Boolean flag indicating if the browser\'s recommended resolution is used.\n   * If true, the browser\'s device pixel ratio is ignored and 1.0 is used instead,\n   * effectively rendering based on CSS pixels instead of device pixels. This can improve\n   * performance on less powerful devices that have high pixel density. When false, rendering\n   * will be in device pixels. {@link Viewer#resolutionScale} will still take effect whether\n   * this flag is true or false.\n   * @memberof Viewer.prototype\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  useBrowserRecommendedResolution: {\n    get: function () {\n      return this._cesiumWidget.useBrowserRecommendedResolution;\n    },\n    set: function (value) {\n      this._cesiumWidget.useBrowserRecommendedResolution = value;\n    },\n  },\n\n  /**\n   * Gets or sets whether or not data sources can temporarily pause\n   * animation in order to avoid showing an incomplete picture to the user.\n   * For example, if asynchronous primitives are being processed in the\n   * background, the clock will not advance until the geometry is ready.\n   *\n   * @memberof Viewer.prototype\n   *\n   * @type {Boolean}\n   */\n  allowDataSourcesToSuspendAnimation: {\n    get: function () {\n      return this._allowDataSourcesToSuspendAnimation;\n    },\n    set: function (value) {\n      this._allowDataSourcesToSuspendAnimation = value;\n    },\n  },\n\n  /**\n   * Gets or sets the Entity instance currently being tracked by the camera.\n   * @memberof Viewer.prototype\n   * @type {Entity | undefined}\n   */\n  trackedEntity: {\n    get: function () {\n      return this._trackedEntity;\n    },\n    set: function (value) {\n      if (this._trackedEntity !== value) {\n        this._trackedEntity = value;\n\n        //Cancel any pending zoom\n        cancelZoom(this);\n\n        var scene = this.scene;\n        var sceneMode = scene.mode;\n\n        //Stop tracking\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(value) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(value.position)) {\n          this._needTrackedEntityUpdate = false;\n          if (\n            sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW ||\n            sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE2D */ .Z.SCENE2D\n          ) {\n            scene.screenSpaceCameraController.enableTranslate = true;\n          }\n\n          if (\n            sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW ||\n            sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D\n          ) {\n            scene.screenSpaceCameraController.enableTilt = true;\n          }\n\n          this._entityView = undefined;\n          this.camera.lookAtTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].IDENTITY */ .Z.IDENTITY);\n        } else {\n          //We can\'t start tracking immediately, so we set a flag and start tracking\n          //when the bounding sphere is ready (most likely next frame).\n          this._needTrackedEntityUpdate = true;\n        }\n\n        this._trackedEntityChanged.raiseEvent(value);\n        this.scene.requestRender();\n      }\n    },\n  },\n  /**\n   * Gets or sets the object instance for which to display a selection indicator.\n   *\n   * If a user interactively picks a Cesium3DTilesFeature instance, then this property\n   * will contain a transient Entity instance with a property named "feature" that is\n   * the instance that was picked.\n   * @memberof Viewer.prototype\n   * @type {Entity | undefined}\n   */\n  selectedEntity: {\n    get: function () {\n      return this._selectedEntity;\n    },\n    set: function (value) {\n      if (this._selectedEntity !== value) {\n        this._selectedEntity = value;\n        var selectionIndicatorViewModel = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._selectionIndicator)\n          ? this._selectionIndicator.viewModel\n          : undefined;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(value)) {\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(selectionIndicatorViewModel)) {\n            selectionIndicatorViewModel.animateAppear();\n          }\n        } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(selectionIndicatorViewModel)) {\n          // Leave the info text in place here, it is needed during the exit animation.\n          selectionIndicatorViewModel.animateDepart();\n        }\n        this._selectedEntityChanged.raiseEvent(value);\n      }\n    },\n  },\n  /**\n   * Gets the event that is raised when the selected entity changes.\n   * @memberof Viewer.prototype\n   * @type {Event}\n   * @readonly\n   */\n  selectedEntityChanged: {\n    get: function () {\n      return this._selectedEntityChanged;\n    },\n  },\n  /**\n   * Gets the event that is raised when the tracked entity changes.\n   * @memberof Viewer.prototype\n   * @type {Event}\n   * @readonly\n   */\n  trackedEntityChanged: {\n    get: function () {\n      return this._trackedEntityChanged;\n    },\n  },\n  /**\n   * Gets or sets the data source to track with the viewer\'s clock.\n   * @memberof Viewer.prototype\n   * @type {DataSource}\n   */\n  clockTrackedDataSource: {\n    get: function () {\n      return this._clockTrackedDataSource;\n    },\n    set: function (value) {\n      if (this._clockTrackedDataSource !== value) {\n        this._clockTrackedDataSource = value;\n        trackDataSourceClock(this._timeline, this.clock, value);\n      }\n    },\n  },\n});\n\n/**\n * Extends the base viewer functionality with the provided mixin.\n * A mixin may add additional properties, functions, or other behavior\n * to the provided viewer instance.\n *\n * @param {Viewer.ViewerMixin} mixin The Viewer mixin to add to this instance.\n * @param {Object} [options] The options object to be passed to the mixin function.\n *\n * @see viewerDragDropMixin\n */\nViewer.prototype.extend = function (mixin, options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(mixin)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("mixin is required.");\n  }\n  //>>includeEnd(\'debug\')\n\n  mixin(this, options);\n};\n\n/**\n * Resizes the widget to match the container size.\n * This function is called automatically as needed unless\n * <code>useDefaultRenderLoop</code> is set to false.\n */\nViewer.prototype.resize = function () {\n  var cesiumWidget = this._cesiumWidget;\n  var container = this._container;\n  var width = container.clientWidth;\n  var height = container.clientHeight;\n  var animationExists = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._animation);\n  var timelineExists = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._timeline);\n\n  cesiumWidget.resize();\n\n  if (width === this._lastWidth && height === this._lastHeight) {\n    return;\n  }\n\n  var panelMaxHeight = height - 125;\n  var baseLayerPickerDropDown = this._baseLayerPickerDropDown;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(baseLayerPickerDropDown)) {\n    baseLayerPickerDropDown.style.maxHeight = panelMaxHeight + "px";\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._geocoder)) {\n    var geocoderSuggestions = this._geocoder.searchSuggestionsContainer;\n    geocoderSuggestions.style.maxHeight = panelMaxHeight + "px";\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._infoBox)) {\n    this._infoBox.viewModel.maxHeight = panelMaxHeight;\n  }\n\n  var timeline = this._timeline;\n  var animationContainer;\n  var animationWidth = 0;\n  var creditLeft = 0;\n  var creditBottom = 0;\n\n  if (\n    animationExists &&\n    window.getComputedStyle(this._animation.container).visibility !== "hidden"\n  ) {\n    var lastWidth = this._lastWidth;\n    animationContainer = this._animation.container;\n    if (width > 900) {\n      animationWidth = 169;\n      if (lastWidth <= 900) {\n        animationContainer.style.width = "169px";\n        animationContainer.style.height = "112px";\n        this._animation.resize();\n      }\n    } else if (width >= 600) {\n      animationWidth = 136;\n      if (lastWidth < 600 || lastWidth > 900) {\n        animationContainer.style.width = "136px";\n        animationContainer.style.height = "90px";\n        this._animation.resize();\n      }\n    } else {\n      animationWidth = 106;\n      if (lastWidth > 600 || lastWidth === 0) {\n        animationContainer.style.width = "106px";\n        animationContainer.style.height = "70px";\n        this._animation.resize();\n      }\n    }\n    creditLeft = animationWidth + 5;\n  }\n\n  if (\n    timelineExists &&\n    window.getComputedStyle(this._timeline.container).visibility !== "hidden"\n  ) {\n    var fullscreenButton = this._fullscreenButton;\n    var vrButton = this._vrButton;\n    var timelineContainer = timeline.container;\n    var timelineStyle = timelineContainer.style;\n\n    creditBottom = timelineContainer.clientHeight + 3;\n    timelineStyle.left = animationWidth + "px";\n\n    var pixels = 0;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(fullscreenButton)) {\n      pixels += fullscreenButton.container.clientWidth;\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(vrButton)) {\n      pixels += vrButton.container.clientWidth;\n    }\n\n    timelineStyle.right = pixels + "px";\n    timeline.resize();\n  }\n\n  this._bottomContainer.style.left = creditLeft + "px";\n  this._bottomContainer.style.bottom = creditBottom + "px";\n\n  this._lastWidth = width;\n  this._lastHeight = height;\n};\n\n/**\n * This forces the widget to re-think its layout, including\n * widget sizes and credit placement.\n */\nViewer.prototype.forceResize = function () {\n  this._lastWidth = 0;\n  this.resize();\n};\n\n/**\n * Renders the scene.  This function is called automatically\n * unless <code>useDefaultRenderLoop</code> is set to false;\n */\nViewer.prototype.render = function () {\n  this._cesiumWidget.render();\n};\n\n/**\n * @returns {Boolean} true if the object has been destroyed, false otherwise.\n */\nViewer.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the widget.  Should be called if permanently\n * removing the widget from layout.\n */\nViewer.prototype.destroy = function () {\n  var i;\n\n  this.screenSpaceEventHandler.removeInputAction(\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LEFT_CLICK */ .Z.LEFT_CLICK\n  );\n  this.screenSpaceEventHandler.removeInputAction(\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LEFT_DOUBLE_CLICK */ .Z.LEFT_DOUBLE_CLICK\n  );\n\n  // Unsubscribe from data sources\n  var dataSources = this.dataSources;\n  var dataSourceLength = dataSources.length;\n  for (i = 0; i < dataSourceLength; i++) {\n    this._dataSourceRemoved(dataSources, dataSources.get(i));\n  }\n  this._dataSourceRemoved(undefined, this._dataSourceDisplay.defaultDataSource);\n\n  this._container.removeChild(this._element);\n  this._element.removeChild(this._toolbar);\n\n  this._eventHelper.removeAll();\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._geocoder)) {\n    this._geocoder = this._geocoder.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._homeButton)) {\n    this._homeButton = this._homeButton.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._sceneModePicker)) {\n    this._sceneModePicker = this._sceneModePicker.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._projectionPicker)) {\n    this._projectionPicker = this._projectionPicker.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._baseLayerPicker)) {\n    this._baseLayerPicker = this._baseLayerPicker.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._animation)) {\n    this._element.removeChild(this._animation.container);\n    this._animation = this._animation.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._timeline)) {\n    this._timeline.removeEventListener(\n      "settime",\n      onTimelineScrubfunction,\n      false\n    );\n    this._element.removeChild(this._timeline.container);\n    this._timeline = this._timeline.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._fullscreenButton)) {\n    this._fullscreenSubscription.dispose();\n    this._element.removeChild(this._fullscreenButton.container);\n    this._fullscreenButton = this._fullscreenButton.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._vrButton)) {\n    this._vrSubscription.dispose();\n    this._vrModeSubscription.dispose();\n    this._element.removeChild(this._vrButton.container);\n    this._vrButton = this._vrButton.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._infoBox)) {\n    this._element.removeChild(this._infoBox.container);\n    this._infoBox = this._infoBox.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._selectionIndicator)) {\n    this._element.removeChild(this._selectionIndicator.container);\n    this._selectionIndicator = this._selectionIndicator.destroy();\n  }\n\n  if (this._destroyClockViewModel) {\n    this._clockViewModel = this._clockViewModel.destroy();\n  }\n  this._dataSourceDisplay = this._dataSourceDisplay.destroy();\n  this._cesiumWidget = this._cesiumWidget.destroy();\n\n  if (this._destroyDataSourceCollection) {\n    this._dataSourceCollection = this._dataSourceCollection.destroy();\n  }\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(this);\n};\n\n/**\n * @private\n */\nViewer.prototype._dataSourceAdded = function (\n  dataSourceCollection,\n  dataSource\n) {\n  var entityCollection = dataSource.entities;\n  entityCollection.collectionChanged.addEventListener(\n    Viewer.prototype._onEntityCollectionChanged,\n    this\n  );\n};\n\n/**\n * @private\n */\nViewer.prototype._dataSourceRemoved = function (\n  dataSourceCollection,\n  dataSource\n) {\n  var entityCollection = dataSource.entities;\n  entityCollection.collectionChanged.removeEventListener(\n    Viewer.prototype._onEntityCollectionChanged,\n    this\n  );\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this.trackedEntity)) {\n    if (\n      entityCollection.getById(this.trackedEntity.id) === this.trackedEntity\n    ) {\n      this.trackedEntity = undefined;\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this.selectedEntity)) {\n    if (\n      entityCollection.getById(this.selectedEntity.id) === this.selectedEntity\n    ) {\n      this.selectedEntity = undefined;\n    }\n  }\n};\n\n/**\n * @private\n */\nViewer.prototype._onTick = function (clock) {\n  var time = clock.currentTime;\n\n  var isUpdated = this._dataSourceDisplay.update(time);\n  if (this._allowDataSourcesToSuspendAnimation) {\n    this._clockViewModel.canAnimate = isUpdated;\n  }\n\n  var entityView = this._entityView;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(entityView)) {\n    var trackedEntity = this._trackedEntity;\n    var trackedState = this._dataSourceDisplay.getBoundingSphere(\n      trackedEntity,\n      false,\n      boundingSphereScratch\n    );\n    if (trackedState === _DataSources_BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].DONE */ .Z.DONE) {\n      entityView.update(time, boundingSphereScratch);\n    }\n  }\n\n  var position;\n  var enableCamera = false;\n  var selectedEntity = this.selectedEntity;\n  var showSelection = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(selectedEntity) && this._enableInfoOrSelection;\n\n  if (\n    showSelection &&\n    selectedEntity.isShowing &&\n    selectedEntity.isAvailable(time)\n  ) {\n    var state = this._dataSourceDisplay.getBoundingSphere(\n      selectedEntity,\n      true,\n      boundingSphereScratch\n    );\n    if (state !== _DataSources_BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].FAILED */ .Z.FAILED) {\n      position = boundingSphereScratch.center;\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(selectedEntity.position)) {\n      position = selectedEntity.position.getValue(time, position);\n    }\n    enableCamera = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(position);\n  }\n\n  var selectionIndicatorViewModel = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._selectionIndicator)\n    ? this._selectionIndicator.viewModel\n    : undefined;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(selectionIndicatorViewModel)) {\n    selectionIndicatorViewModel.position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n      position,\n      selectionIndicatorViewModel.position\n    );\n    selectionIndicatorViewModel.showSelection = showSelection && enableCamera;\n    selectionIndicatorViewModel.update();\n  }\n\n  var infoBoxViewModel = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(this._infoBox)\n    ? this._infoBox.viewModel\n    : undefined;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(infoBoxViewModel)) {\n    infoBoxViewModel.showInfo = showSelection;\n    infoBoxViewModel.enableCamera = enableCamera;\n    infoBoxViewModel.isCameraTracking =\n      this.trackedEntity === this.selectedEntity;\n\n    if (showSelection) {\n      infoBoxViewModel.titleText = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n        selectedEntity.name,\n        selectedEntity.id\n      );\n      infoBoxViewModel.description = _DataSources_Property_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n        selectedEntity.description,\n        time,\n        ""\n      );\n    } else {\n      infoBoxViewModel.titleText = "";\n      infoBoxViewModel.description = "";\n    }\n  }\n};\n\n/**\n * @private\n */\nViewer.prototype._onEntityCollectionChanged = function (\n  collection,\n  added,\n  removed\n) {\n  var length = removed.length;\n  for (var i = 0; i < length; i++) {\n    var removedObject = removed[i];\n    if (this.trackedEntity === removedObject) {\n      this.trackedEntity = undefined;\n    }\n    if (this.selectedEntity === removedObject) {\n      this.selectedEntity = undefined;\n    }\n  }\n};\n\n/**\n * @private\n */\nViewer.prototype._onInfoBoxCameraClicked = function (infoBoxViewModel) {\n  if (\n    infoBoxViewModel.isCameraTracking &&\n    this.trackedEntity === this.selectedEntity\n  ) {\n    this.trackedEntity = undefined;\n  } else {\n    var selectedEntity = this.selectedEntity;\n    var position = selectedEntity.position;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(position)) {\n      this.trackedEntity = this.selectedEntity;\n    } else {\n      this.zoomTo(this.selectedEntity);\n    }\n  }\n};\n\n/**\n * @private\n */\nViewer.prototype._clearTrackedObject = function () {\n  this.trackedEntity = undefined;\n};\n\n/**\n * @private\n */\nViewer.prototype._onInfoBoxClockClicked = function (infoBoxViewModel) {\n  this.selectedEntity = undefined;\n};\n\n/**\n * @private\n */\nViewer.prototype._clearObjects = function () {\n  this.trackedEntity = undefined;\n  this.selectedEntity = undefined;\n};\n\n/**\n * @private\n */\nViewer.prototype._onDataSourceChanged = function (dataSource) {\n  if (this.clockTrackedDataSource === dataSource) {\n    trackDataSourceClock(this.timeline, this.clock, dataSource);\n  }\n};\n\n/**\n * @private\n */\nViewer.prototype._onDataSourceAdded = function (\n  dataSourceCollection,\n  dataSource\n) {\n  if (this._automaticallyTrackDataSourceClocks) {\n    this.clockTrackedDataSource = dataSource;\n  }\n  var id = dataSource.entities.id;\n  var removalFunc = this._eventHelper.add(\n    dataSource.changedEvent,\n    Viewer.prototype._onDataSourceChanged,\n    this\n  );\n  this._dataSourceChangedListeners[id] = removalFunc;\n};\n\n/**\n * @private\n */\nViewer.prototype._onDataSourceRemoved = function (\n  dataSourceCollection,\n  dataSource\n) {\n  var resetClock = this.clockTrackedDataSource === dataSource;\n  var id = dataSource.entities.id;\n  this._dataSourceChangedListeners[id]();\n  this._dataSourceChangedListeners[id] = undefined;\n  if (resetClock) {\n    var numDataSources = dataSourceCollection.length;\n    if (this._automaticallyTrackDataSourceClocks && numDataSources > 0) {\n      this.clockTrackedDataSource = dataSourceCollection.get(\n        numDataSources - 1\n      );\n    } else {\n      this.clockTrackedDataSource = undefined;\n    }\n  }\n};\n\n/**\n * Asynchronously sets the camera to view the provided entity, entities, or data source.\n * If the data source is still in the process of loading or the visualization is otherwise still loading,\n * this method waits for the data to be ready before performing the zoom.\n *\n * <p>The offset is heading/pitch/range in the local east-north-up reference frame centered at the center of the bounding sphere.\n * The heading and the pitch angles are defined in the local east-north-up reference frame.\n * The heading is the angle from y axis and increasing towards the x axis. Pitch is the rotation from the xy-plane. Positive pitch\n * angles are above the plane. Negative pitch angles are below the plane. The range is the distance from the center. If the range is\n * zero, a range will be computed such that the whole bounding sphere is visible.</p>\n *\n * <p>In 2D, there must be a top down view. The camera will be placed above the target looking down. The height above the\n * target will be the range. The heading will be determined from the offset. If the heading cannot be\n * determined from the offset, the heading will be north.</p>\n *\n * @param {Entity|Entity[]|EntityCollection|DataSource|ImageryLayer|Cesium3DTileset|TimeDynamicPointCloud|Promise.<Entity|Entity[]|EntityCollection|DataSource|ImageryLayer|Cesium3DTileset|TimeDynamicPointCloud>} target The entity, array of entities, entity collection, data source, Cesium3DTileset, point cloud, or imagery layer to view. You can also pass a promise that resolves to one of the previously mentioned types.\n * @param {HeadingPitchRange} [offset] The offset from the center of the entity in the local east-north-up reference frame.\n * @returns {Promise.<Boolean>} A Promise that resolves to true if the zoom was successful or false if the target is not currently visualized in the scene or the zoom was cancelled.\n */\nViewer.prototype.zoomTo = function (target, offset) {\n  var options = {\n    offset: offset,\n  };\n  return zoomToOrFly(this, target, options, false);\n};\n\n/**\n * Flies the camera to the provided entity, entities, or data source.\n * If the data source is still in the process of loading or the visualization is otherwise still loading,\n * this method waits for the data to be ready before performing the flight.\n *\n * <p>The offset is heading/pitch/range in the local east-north-up reference frame centered at the center of the bounding sphere.\n * The heading and the pitch angles are defined in the local east-north-up reference frame.\n * The heading is the angle from y axis and increasing towards the x axis. Pitch is the rotation from the xy-plane. Positive pitch\n * angles are above the plane. Negative pitch angles are below the plane. The range is the distance from the center. If the range is\n * zero, a range will be computed such that the whole bounding sphere is visible.</p>\n *\n * <p>In 2D, there must be a top down view. The camera will be placed above the target looking down. The height above the\n * target will be the range. The heading will be determined from the offset. If the heading cannot be\n * determined from the offset, the heading will be north.</p>\n *\n * @param {Entity|Entity[]|EntityCollection|DataSource|ImageryLayer|Cesium3DTileset|TimeDynamicPointCloud|Promise.<Entity|Entity[]|EntityCollection|DataSource|ImageryLayer|Cesium3DTileset|TimeDynamicPointCloud>} target The entity, array of entities, entity collection, data source, Cesium3DTileset, point cloud, or imagery layer to view. You can also pass a promise that resolves to one of the previously mentioned types.\n * @param {Object} [options] Object with the following properties:\n * @param {Number} [options.duration=3.0] The duration of the flight in seconds.\n * @param {Number} [options.maximumHeight] The maximum height at the peak of the flight.\n * @param {HeadingPitchRange} [options.offset] The offset from the target in the local east-north-up reference frame centered at the target.\n * @returns {Promise.<Boolean>} A Promise that resolves to true if the flight was successful or false if the target is not currently visualized in the scene or the flight was cancelled. //TODO: Cleanup entity mentions\n */\nViewer.prototype.flyTo = function (target, options) {\n  return zoomToOrFly(this, target, options, true);\n};\n\nfunction zoomToOrFly(that, zoomTarget, options, isFlight) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(zoomTarget)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("zoomTarget is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  cancelZoom(that);\n\n  //We can\'t actually perform the zoom until all visualization is ready and\n  //bounding spheres have been computed.  Therefore we create and return\n  //a deferred which will be resolved as part of the post-render step in the\n  //frame that actually performs the zoom\n  var zoomPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].defer */ .Z.defer();\n  that._zoomPromise = zoomPromise;\n  that._zoomIsFlight = isFlight;\n  that._zoomOptions = options;\n\n  (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(zoomTarget, function (zoomTarget) {\n    //Only perform the zoom if it wasn\'t cancelled before the promise resolved.\n    if (that._zoomPromise !== zoomPromise) {\n      return;\n    }\n\n    //If the zoom target is a rectangular imagery in an ImageLayer\n    if (zoomTarget instanceof _Scene_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z) {\n      zoomTarget\n        .getViewableRectangle()\n        .then(function (rectangle) {\n          return (0,_Scene_computeFlyToLocationForRectangle_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z)(rectangle, that.scene);\n        })\n        .then(function (position) {\n          //Only perform the zoom if it wasn\'t cancelled before the promise was resolved\n          if (that._zoomPromise === zoomPromise) {\n            that._zoomTarget = position;\n          }\n        });\n      return;\n    }\n\n    //If the zoom target is a Cesium3DTileset\n    if (zoomTarget instanceof _Scene_Cesium3DTileset_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z) {\n      that._zoomTarget = zoomTarget;\n      return;\n    }\n\n    //If the zoom target is a TimeDynamicPointCloud\n    if (zoomTarget instanceof _Scene_TimeDynamicPointCloud_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z) {\n      that._zoomTarget = zoomTarget;\n      return;\n    }\n\n    //If the zoom target is a data source, and it\'s in the middle of loading, wait for it to finish loading.\n    if (zoomTarget.isLoading && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(zoomTarget.loadingEvent)) {\n      var removeEvent = zoomTarget.loadingEvent.addEventListener(function () {\n        removeEvent();\n\n        //Only perform the zoom if it wasn\'t cancelled before the data source finished.\n        if (that._zoomPromise === zoomPromise) {\n          that._zoomTarget = zoomTarget.entities.values.slice(0);\n        }\n      });\n      return;\n    }\n\n    //Zoom target is already an array, just copy it and return.\n    if (Array.isArray(zoomTarget)) {\n      that._zoomTarget = zoomTarget.slice(0);\n      return;\n    }\n\n    //If zoomTarget is an EntityCollection, this will retrieve the array\n    zoomTarget = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(zoomTarget.values, zoomTarget);\n\n    //If zoomTarget is a DataSource, this will retrieve the array.\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(zoomTarget.entities)) {\n      zoomTarget = zoomTarget.entities.values;\n    }\n\n    //Zoom target is already an array, just copy it and return.\n    if (Array.isArray(zoomTarget)) {\n      that._zoomTarget = zoomTarget.slice(0);\n    } else {\n      //Single entity\n      that._zoomTarget = [zoomTarget];\n    }\n  });\n\n  that.scene.requestRender();\n  return zoomPromise.promise;\n}\n\nfunction clearZoom(viewer) {\n  viewer._zoomPromise = undefined;\n  viewer._zoomTarget = undefined;\n  viewer._zoomOptions = undefined;\n}\n\nfunction cancelZoom(viewer) {\n  var zoomPromise = viewer._zoomPromise;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(zoomPromise)) {\n    clearZoom(viewer);\n    zoomPromise.resolve(false);\n  }\n}\n\n/**\n * @private\n */\nViewer.prototype._postRender = function () {\n  updateZoomTarget(this);\n  updateTrackedEntity(this);\n};\n\nfunction updateZoomTarget(viewer) {\n  var target = viewer._zoomTarget;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(target) || viewer.scene.mode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].MORPHING */ .Z.MORPHING) {\n    return;\n  }\n\n  var scene = viewer.scene;\n  var camera = scene.camera;\n  var zoomPromise = viewer._zoomPromise;\n  var zoomOptions = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(viewer._zoomOptions, {});\n  var options;\n  var boundingSphere;\n\n  // If zoomTarget was Cesium3DTileset\n  if (target instanceof _Scene_Cesium3DTileset_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z) {\n    return target.readyPromise.then(function () {\n      var boundingSphere = target.boundingSphere;\n      // If offset was originally undefined then give it base value instead of empty object\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(zoomOptions.offset)) {\n        zoomOptions.offset = new _Core_HeadingPitchRange_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(\n          0.0,\n          -0.5,\n          boundingSphere.radius\n        );\n      }\n\n      options = {\n        offset: zoomOptions.offset,\n        duration: zoomOptions.duration,\n        maximumHeight: zoomOptions.maximumHeight,\n        complete: function () {\n          zoomPromise.resolve(true);\n        },\n        cancel: function () {\n          zoomPromise.resolve(false);\n        },\n      };\n\n      if (viewer._zoomIsFlight) {\n        camera.flyToBoundingSphere(target.boundingSphere, options);\n      } else {\n        camera.viewBoundingSphere(boundingSphere, zoomOptions.offset);\n        camera.lookAtTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n        // Finish the promise\n        zoomPromise.resolve(true);\n      }\n\n      clearZoom(viewer);\n    });\n  }\n\n  // If zoomTarget was TimeDynamicPointCloud\n  if (target instanceof _Scene_TimeDynamicPointCloud_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z) {\n    return target.readyPromise.then(function () {\n      var boundingSphere = target.boundingSphere;\n      // If offset was originally undefined then give it base value instead of empty object\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(zoomOptions.offset)) {\n        zoomOptions.offset = new _Core_HeadingPitchRange_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(\n          0.0,\n          -0.5,\n          boundingSphere.radius\n        );\n      }\n\n      options = {\n        offset: zoomOptions.offset,\n        duration: zoomOptions.duration,\n        maximumHeight: zoomOptions.maximumHeight,\n        complete: function () {\n          zoomPromise.resolve(true);\n        },\n        cancel: function () {\n          zoomPromise.resolve(false);\n        },\n      };\n\n      if (viewer._zoomIsFlight) {\n        camera.flyToBoundingSphere(boundingSphere, options);\n      } else {\n        camera.viewBoundingSphere(boundingSphere, zoomOptions.offset);\n        camera.lookAtTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n        // Finish the promise\n        zoomPromise.resolve(true);\n      }\n\n      clearZoom(viewer);\n    });\n  }\n\n  // If zoomTarget was an ImageryLayer\n  if (target instanceof _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z) {\n    options = {\n      destination: scene.mapProjection.ellipsoid.cartographicToCartesian(\n        target\n      ),\n      duration: zoomOptions.duration,\n      maximumHeight: zoomOptions.maximumHeight,\n      complete: function () {\n        zoomPromise.resolve(true);\n      },\n      cancel: function () {\n        zoomPromise.resolve(false);\n      },\n    };\n\n    if (viewer._zoomIsFlight) {\n      camera.flyTo(options);\n    } else {\n      camera.setView(options);\n      zoomPromise.resolve(true);\n    }\n    clearZoom(viewer);\n    return;\n  }\n\n  var entities = target;\n\n  var boundingSpheres = [];\n  for (var i = 0, len = entities.length; i < len; i++) {\n    var state = viewer._dataSourceDisplay.getBoundingSphere(\n      entities[i],\n      false,\n      boundingSphereScratch\n    );\n\n    if (state === _DataSources_BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].PENDING */ .Z.PENDING) {\n      return;\n    } else if (state !== _DataSources_BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].FAILED */ .Z.FAILED) {\n      boundingSpheres.push(_Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(boundingSphereScratch));\n    }\n  }\n\n  if (boundingSpheres.length === 0) {\n    cancelZoom(viewer);\n    return;\n  }\n\n  //Stop tracking the current entity.\n  viewer.trackedEntity = undefined;\n\n  boundingSphere = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromBoundingSpheres */ .Z.fromBoundingSpheres(boundingSpheres);\n\n  if (!viewer._zoomIsFlight) {\n    camera.viewBoundingSphere(boundingSphere, zoomOptions.offset);\n    camera.lookAtTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].IDENTITY */ .Z.IDENTITY);\n    clearZoom(viewer);\n    zoomPromise.resolve(true);\n  } else {\n    clearZoom(viewer);\n    camera.flyToBoundingSphere(boundingSphere, {\n      duration: zoomOptions.duration,\n      maximumHeight: zoomOptions.maximumHeight,\n      complete: function () {\n        zoomPromise.resolve(true);\n      },\n      cancel: function () {\n        zoomPromise.resolve(false);\n      },\n      offset: zoomOptions.offset,\n    });\n  }\n}\n\nfunction updateTrackedEntity(viewer) {\n  if (!viewer._needTrackedEntityUpdate) {\n    return;\n  }\n\n  var trackedEntity = viewer._trackedEntity;\n  var currentTime = viewer.clock.currentTime;\n\n  //Verify we have a current position at this time. This is only triggered if a position\n  //has become undefined after trackedEntity is set but before the boundingSphere has been\n  //computed. In this case, we will track the entity once it comes back into existence.\n  var currentPosition = _DataSources_Property_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].getValueOrUndefined */ .Z.getValueOrUndefined(\n    trackedEntity.position,\n    currentTime\n  );\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_48__/* ["default"] */ .Z)(currentPosition)) {\n    return;\n  }\n\n  var scene = viewer.scene;\n\n  var state = viewer._dataSourceDisplay.getBoundingSphere(\n    trackedEntity,\n    false,\n    boundingSphereScratch\n  );\n  if (state === _DataSources_BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].PENDING */ .Z.PENDING) {\n    return;\n  }\n\n  var sceneMode = scene.mode;\n  if (\n    sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW ||\n    sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE2D */ .Z.SCENE2D\n  ) {\n    scene.screenSpaceCameraController.enableTranslate = false;\n  }\n\n  if (\n    sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW ||\n    sceneMode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D\n  ) {\n    scene.screenSpaceCameraController.enableTilt = false;\n  }\n\n  var bs =\n    state !== _DataSources_BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].FAILED */ .Z.FAILED ? boundingSphereScratch : undefined;\n  viewer._entityView = new _DataSources_EntityView_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n    trackedEntity,\n    scene,\n    scene.mapProjection.ellipsoid\n  );\n  viewer._entityView.update(currentTime, bs);\n  viewer._needTrackedEntityUpdate = false;\n}\n\n/**\n * A function that augments a Viewer instance with additional functionality.\n * @callback Viewer.ViewerMixin\n * @param {Viewer} viewer The viewer instance.\n * @param {Object} options Options object to be passed to the mixin function.\n *\n * @see Viewer#extend\n */\n/* harmony default export */ __webpack_exports__["Z"] = (Viewer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSwyQ0FBMkMsNkJBQTZCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFB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O0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrSEFBNEI7QUFDcEQ7QUFDQTtBQUNBOztBQUVBLE9BQU8sc0VBQU87QUFDZDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUdBQTJCO0FBQzNDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixpR0FBdUI7QUFDekMsa0JBQWtCLHFGQUFpQjtBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsaUdBQXVCO0FBQ3pDLGtCQUFrQixxRkFBaUI7QUFDbkM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyxtR0FBMEI7QUFDeEMsMkJBQTJCLDRFQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0EseURBQWUsTUFBTSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1dpZGdldHMvVmlld2VyL1ZpZXdlci5qcz8zMmQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi4vLi4vQ29yZS9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uLy4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENhcnRvZ3JhcGhpYyBmcm9tIFwiLi4vLi4vQ29yZS9DYXJ0b2dyYXBoaWMuanNcIjtcbmltcG9ydCBDbG9jayBmcm9tIFwiLi4vLi4vQ29yZS9DbG9jay5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi8uLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi8uLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgRXZlbnRIZWxwZXIgZnJvbSBcIi4uLy4uL0NvcmUvRXZlbnRIZWxwZXIuanNcIjtcbmltcG9ydCBIZWFkaW5nUGl0Y2hSYW5nZSBmcm9tIFwiLi4vLi4vQ29yZS9IZWFkaW5nUGl0Y2hSYW5nZS5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uLy4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IFNjcmVlblNwYWNlRXZlbnRUeXBlIGZyb20gXCIuLi8uLi9Db3JlL1NjcmVlblNwYWNlRXZlbnRUeXBlLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmVTdGF0ZSBmcm9tIFwiLi4vLi4vRGF0YVNvdXJjZXMvQm91bmRpbmdTcGhlcmVTdGF0ZS5qc1wiO1xuaW1wb3J0IENvbnN0YW50UG9zaXRpb25Qcm9wZXJ0eSBmcm9tIFwiLi4vLi4vRGF0YVNvdXJjZXMvQ29uc3RhbnRQb3NpdGlvblByb3BlcnR5LmpzXCI7XG5pbXBvcnQgRGF0YVNvdXJjZUNvbGxlY3Rpb24gZnJvbSBcIi4uLy4uL0RhdGFTb3VyY2VzL0RhdGFTb3VyY2VDb2xsZWN0aW9uLmpzXCI7XG5pbXBvcnQgRGF0YVNvdXJjZURpc3BsYXkgZnJvbSBcIi4uLy4uL0RhdGFTb3VyY2VzL0RhdGFTb3VyY2VEaXNwbGF5LmpzXCI7XG5pbXBvcnQgRW50aXR5IGZyb20gXCIuLi8uLi9EYXRhU291cmNlcy9FbnRpdHkuanNcIjtcbmltcG9ydCBFbnRpdHlWaWV3IGZyb20gXCIuLi8uLi9EYXRhU291cmNlcy9FbnRpdHlWaWV3LmpzXCI7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSBcIi4uLy4uL0RhdGFTb3VyY2VzL1Byb3BlcnR5LmpzXCI7XG5pbXBvcnQgQ2VzaXVtM0RUaWxlc2V0IGZyb20gXCIuLi8uLi9TY2VuZS9DZXNpdW0zRFRpbGVzZXQuanNcIjtcbmltcG9ydCBjb21wdXRlRmx5VG9Mb2NhdGlvbkZvclJlY3RhbmdsZSBmcm9tIFwiLi4vLi4vU2NlbmUvY29tcHV0ZUZseVRvTG9jYXRpb25Gb3JSZWN0YW5nbGUuanNcIjtcbmltcG9ydCBJbWFnZXJ5TGF5ZXIgZnJvbSBcIi4uLy4uL1NjZW5lL0ltYWdlcnlMYXllci5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi4vLi4vU2NlbmUvU2NlbmVNb2RlLmpzXCI7XG5pbXBvcnQgVGltZUR5bmFtaWNQb2ludENsb3VkIGZyb20gXCIuLi8uLi9TY2VuZS9UaW1lRHluYW1pY1BvaW50Q2xvdWQuanNcIjtcbmltcG9ydCBrbm9ja291dCBmcm9tIFwiLi4vLi4vVGhpcmRQYXJ0eS9rbm9ja291dC5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uLy4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuaW1wb3J0IEFuaW1hdGlvbiBmcm9tIFwiLi4vQW5pbWF0aW9uL0FuaW1hdGlvbi5qc1wiO1xuaW1wb3J0IEFuaW1hdGlvblZpZXdNb2RlbCBmcm9tIFwiLi4vQW5pbWF0aW9uL0FuaW1hdGlvblZpZXdNb2RlbC5qc1wiO1xuaW1wb3J0IEJhc2VMYXllclBpY2tlciBmcm9tIFwiLi4vQmFzZUxheWVyUGlja2VyL0Jhc2VMYXllclBpY2tlci5qc1wiO1xuaW1wb3J0IGNyZWF0ZURlZmF1bHRJbWFnZXJ5UHJvdmlkZXJWaWV3TW9kZWxzIGZyb20gXCIuLi9CYXNlTGF5ZXJQaWNrZXIvY3JlYXRlRGVmYXVsdEltYWdlcnlQcm92aWRlclZpZXdNb2RlbHMuanNcIjtcbmltcG9ydCBjcmVhdGVEZWZhdWx0VGVycmFpblByb3ZpZGVyVmlld01vZGVscyBmcm9tIFwiLi4vQmFzZUxheWVyUGlja2VyL2NyZWF0ZURlZmF1bHRUZXJyYWluUHJvdmlkZXJWaWV3TW9kZWxzLmpzXCI7XG5pbXBvcnQgQ2VzaXVtV2lkZ2V0IGZyb20gXCIuLi9DZXNpdW1XaWRnZXQvQ2VzaXVtV2lkZ2V0LmpzXCI7XG5pbXBvcnQgQ2xvY2tWaWV3TW9kZWwgZnJvbSBcIi4uL0Nsb2NrVmlld01vZGVsLmpzXCI7XG5pbXBvcnQgRnVsbHNjcmVlbkJ1dHRvbiBmcm9tIFwiLi4vRnVsbHNjcmVlbkJ1dHRvbi9GdWxsc2NyZWVuQnV0dG9uLmpzXCI7XG5pbXBvcnQgR2VvY29kZXIgZnJvbSBcIi4uL0dlb2NvZGVyL0dlb2NvZGVyLmpzXCI7XG5pbXBvcnQgZ2V0RWxlbWVudCBmcm9tIFwiLi4vZ2V0RWxlbWVudC5qc1wiO1xuaW1wb3J0IEhvbWVCdXR0b24gZnJvbSBcIi4uL0hvbWVCdXR0b24vSG9tZUJ1dHRvbi5qc1wiO1xuaW1wb3J0IEluZm9Cb3ggZnJvbSBcIi4uL0luZm9Cb3gvSW5mb0JveC5qc1wiO1xuaW1wb3J0IE5hdmlnYXRpb25IZWxwQnV0dG9uIGZyb20gXCIuLi9OYXZpZ2F0aW9uSGVscEJ1dHRvbi9OYXZpZ2F0aW9uSGVscEJ1dHRvbi5qc1wiO1xuaW1wb3J0IFByb2plY3Rpb25QaWNrZXIgZnJvbSBcIi4uL1Byb2plY3Rpb25QaWNrZXIvUHJvamVjdGlvblBpY2tlci5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZVBpY2tlciBmcm9tIFwiLi4vU2NlbmVNb2RlUGlja2VyL1NjZW5lTW9kZVBpY2tlci5qc1wiO1xuaW1wb3J0IFNlbGVjdGlvbkluZGljYXRvciBmcm9tIFwiLi4vU2VsZWN0aW9uSW5kaWNhdG9yL1NlbGVjdGlvbkluZGljYXRvci5qc1wiO1xuaW1wb3J0IHN1YnNjcmliZUFuZEV2YWx1YXRlIGZyb20gXCIuLi9zdWJzY3JpYmVBbmRFdmFsdWF0ZS5qc1wiO1xuaW1wb3J0IFRpbWVsaW5lIGZyb20gXCIuLi9UaW1lbGluZS9UaW1lbGluZS5qc1wiO1xuaW1wb3J0IFZSQnV0dG9uIGZyb20gXCIuLi9WUkJ1dHRvbi9WUkJ1dHRvbi5qc1wiO1xuaW1wb3J0IENlc2l1bTNEVGlsZUZlYXR1cmUgZnJvbSBcIi4uLy4uL1NjZW5lL0Nlc2l1bTNEVGlsZUZlYXR1cmUuanNcIjtcbmltcG9ydCBKdWxpYW5EYXRlIGZyb20gXCIuLi8uLi9Db3JlL0p1bGlhbkRhdGUuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi8uLi9Db3JlL01hdGguanNcIjtcblxudmFyIGJvdW5kaW5nU3BoZXJlU2NyYXRjaCA9IG5ldyBCb3VuZGluZ1NwaGVyZSgpO1xuXG5mdW5jdGlvbiBvblRpbWVsaW5lU2NydWJmdW5jdGlvbihlKSB7XG4gIHZhciBjbG9jayA9IGUuY2xvY2s7XG4gIGNsb2NrLmN1cnJlbnRUaW1lID0gZS50aW1lSnVsaWFuO1xuICBjbG9jay5zaG91bGRBbmltYXRlID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldENlc2l1bTNEVGlsZUZlYXR1cmVEZXNjcmlwdGlvbihmZWF0dXJlKSB7XG4gIHZhciBwcm9wZXJ0eU5hbWVzID0gZmVhdHVyZS5nZXRQcm9wZXJ0eU5hbWVzKCk7XG5cbiAgdmFyIGh0bWwgPSBcIlwiO1xuICBwcm9wZXJ0eU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgIHZhciB2YWx1ZSA9IGZlYXR1cmUuZ2V0UHJvcGVydHkocHJvcGVydHlOYW1lKTtcbiAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGh0bWwgKz0gXCI8dHI+PHRoPlwiICsgcHJvcGVydHlOYW1lICsgXCI8L3RoPjx0ZD5cIiArIHZhbHVlICsgXCI8L3RkPjwvdHI+XCI7XG4gICAgfVxuICB9KTtcblxuICBpZiAoaHRtbC5sZW5ndGggPiAwKSB7XG4gICAgaHRtbCA9XG4gICAgICAnPHRhYmxlIGNsYXNzPVwiY2VzaXVtLWluZm9Cb3gtZGVmYXVsdFRhYmxlXCI+PHRib2R5PicgK1xuICAgICAgaHRtbCArXG4gICAgICBcIjwvdGJvZHk+PC90YWJsZT5cIjtcbiAgfVxuXG4gIHJldHVybiBodG1sO1xufVxuXG5mdW5jdGlvbiBnZXRDZXNpdW0zRFRpbGVGZWF0dXJlTmFtZShmZWF0dXJlKSB7XG4gIC8vIFdlIG5lZWQgdG8gaXRlcmF0ZSBhbGwgcHJvcGVydHkgbmFtZXMgdG8gZmluZCBwb3RlbnRpYWxcbiAgLy8gY2FuZGlkYXRlcywgYnV0IHNpbmNlIHdlIHByZWZlciBzb21lIHByb3BlcnR5IG5hbWVzXG4gIC8vIG92ZXIgb3RoZXJzLCB3ZSBzdG9yZSB0aGVtIGluIGFuIGluZGV4ZWQgYXJyYXlcbiAgLy8gYW5kIHRoZW4gdXNlIHRoZSBmaXJzdCBkZWZpbmVkIGVsZW1lbnQgaW4gdGhlIGFycmF5XG4gIC8vIGFzIHRoZSBwcmVmZXJyZWQgY2hvaWNlLlxuXG4gIHZhciBpO1xuICB2YXIgcG9zc2libGVOYW1lcyA9IFtdO1xuICB2YXIgcHJvcGVydHlOYW1lcyA9IGZlYXR1cmUuZ2V0UHJvcGVydHlOYW1lcygpO1xuICBmb3IgKGkgPSAwOyBpIDwgcHJvcGVydHlOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVzW2ldO1xuICAgIGlmICgvXm5hbWUkL2kudGVzdChwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICBwb3NzaWJsZU5hbWVzWzBdID0gZmVhdHVyZS5nZXRQcm9wZXJ0eShwcm9wZXJ0eU5hbWUpO1xuICAgIH0gZWxzZSBpZiAoL25hbWUvaS50ZXN0KHByb3BlcnR5TmFtZSkpIHtcbiAgICAgIHBvc3NpYmxlTmFtZXNbMV0gPSBmZWF0dXJlLmdldFByb3BlcnR5KHByb3BlcnR5TmFtZSk7XG4gICAgfSBlbHNlIGlmICgvXnRpdGxlJC9pLnRlc3QocHJvcGVydHlOYW1lKSkge1xuICAgICAgcG9zc2libGVOYW1lc1syXSA9IGZlYXR1cmUuZ2V0UHJvcGVydHkocHJvcGVydHlOYW1lKTtcbiAgICB9IGVsc2UgaWYgKC9eKGlkfGlkZW50aWZpZXIpJC9pLnRlc3QocHJvcGVydHlOYW1lKSkge1xuICAgICAgcG9zc2libGVOYW1lc1szXSA9IGZlYXR1cmUuZ2V0UHJvcGVydHkocHJvcGVydHlOYW1lKTtcbiAgICB9IGVsc2UgaWYgKC9lbGVtZW50L2kudGVzdChwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICBwb3NzaWJsZU5hbWVzWzRdID0gZmVhdHVyZS5nZXRQcm9wZXJ0eShwcm9wZXJ0eU5hbWUpO1xuICAgIH0gZWxzZSBpZiAoLyhpZHxpZGVudGlmaWVyKSQvaS50ZXN0KHByb3BlcnR5TmFtZSkpIHtcbiAgICAgIHBvc3NpYmxlTmFtZXNbNV0gPSBmZWF0dXJlLmdldFByb3BlcnR5KHByb3BlcnR5TmFtZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IHBvc3NpYmxlTmFtZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHBvc3NpYmxlTmFtZXNbaV07XG4gICAgaWYgKGRlZmluZWQoaXRlbSkgJiYgaXRlbSAhPT0gXCJcIikge1xuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICB9XG4gIHJldHVybiBcIlVubmFtZWQgRmVhdHVyZVwiO1xufVxuXG5mdW5jdGlvbiBwaWNrRW50aXR5KHZpZXdlciwgZSkge1xuICB2YXIgcGlja2VkID0gdmlld2VyLnNjZW5lLnBpY2soZS5wb3NpdGlvbik7XG4gIGlmIChkZWZpbmVkKHBpY2tlZCkpIHtcbiAgICB2YXIgaWQgPSBkZWZhdWx0VmFsdWUocGlja2VkLmlkLCBwaWNrZWQucHJpbWl0aXZlLmlkKTtcbiAgICBpZiAoaWQgaW5zdGFuY2VvZiBFbnRpdHkpIHtcbiAgICAgIHJldHVybiBpZDtcbiAgICB9XG5cbiAgICBpZiAocGlja2VkIGluc3RhbmNlb2YgQ2VzaXVtM0RUaWxlRmVhdHVyZSkge1xuICAgICAgcmV0dXJuIG5ldyBFbnRpdHkoe1xuICAgICAgICBuYW1lOiBnZXRDZXNpdW0zRFRpbGVGZWF0dXJlTmFtZShwaWNrZWQpLFxuICAgICAgICBkZXNjcmlwdGlvbjogZ2V0Q2VzaXVtM0RUaWxlRmVhdHVyZURlc2NyaXB0aW9uKHBpY2tlZCksXG4gICAgICAgIGZlYXR1cmU6IHBpY2tlZCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIE5vIHJlZ3VsYXIgZW50aXR5IHBpY2tlZC4gIFRyeSBwaWNraW5nIGZlYXR1cmVzIGZyb20gaW1hZ2VyeSBsYXllcnMuXG4gIGlmIChkZWZpbmVkKHZpZXdlci5zY2VuZS5nbG9iZSkpIHtcbiAgICByZXR1cm4gcGlja0ltYWdlcnlMYXllckZlYXR1cmUodmlld2VyLCBlLnBvc2l0aW9uKTtcbiAgfVxufVxuXG52YXIgc2NyYXRjaFN0b3BUaW1lID0gbmV3IEp1bGlhbkRhdGUoKTtcblxuZnVuY3Rpb24gdHJhY2tEYXRhU291cmNlQ2xvY2sodGltZWxpbmUsIGNsb2NrLCBkYXRhU291cmNlKSB7XG4gIGlmIChkZWZpbmVkKGRhdGFTb3VyY2UpKSB7XG4gICAgdmFyIGRhdGFTb3VyY2VDbG9jayA9IGRhdGFTb3VyY2UuY2xvY2s7XG4gICAgaWYgKGRlZmluZWQoZGF0YVNvdXJjZUNsb2NrKSkge1xuICAgICAgZGF0YVNvdXJjZUNsb2NrLmdldFZhbHVlKGNsb2NrKTtcbiAgICAgIGlmIChkZWZpbmVkKHRpbWVsaW5lKSkge1xuICAgICAgICB2YXIgc3RhcnRUaW1lID0gZGF0YVNvdXJjZUNsb2NrLnN0YXJ0VGltZTtcbiAgICAgICAgdmFyIHN0b3BUaW1lID0gZGF0YVNvdXJjZUNsb2NrLnN0b3BUaW1lO1xuICAgICAgICAvLyBXaGVuIHRoZSBzdGFydCBhbmQgc3RvcCB0aW1lcyBhcmUgZXF1YWwsIHNldCB0aGUgdGltZWxpbmUgdG8gdGhlIHNob3J0ZXN0IGludGVydmFsXG4gICAgICAgIC8vIHN0YXJ0aW5nIGF0IHRoZSBzdGFydCB0aW1lLiBUaGlzIHByZXZlbnRzIGFuIGludmFsaWQgdGltZWxpbmUgY29uZmlndXJhdGlvbi5cbiAgICAgICAgaWYgKEp1bGlhbkRhdGUuZXF1YWxzKHN0YXJ0VGltZSwgc3RvcFRpbWUpKSB7XG4gICAgICAgICAgc3RvcFRpbWUgPSBKdWxpYW5EYXRlLmFkZFNlY29uZHMoXG4gICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICBDZXNpdW1NYXRoLkVQU0lMT04yLFxuICAgICAgICAgICAgc2NyYXRjaFN0b3BUaW1lXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lbGluZS51cGRhdGVGcm9tQ2xvY2soKTtcbiAgICAgICAgdGltZWxpbmUuem9vbVRvKHN0YXJ0VGltZSwgc3RvcFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG52YXIgY2FydGVzaWFuM1NjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuXG5mdW5jdGlvbiBwaWNrSW1hZ2VyeUxheWVyRmVhdHVyZSh2aWV3ZXIsIHdpbmRvd1Bvc2l0aW9uKSB7XG4gIHZhciBzY2VuZSA9IHZpZXdlci5zY2VuZTtcbiAgdmFyIHBpY2tSYXkgPSBzY2VuZS5jYW1lcmEuZ2V0UGlja1JheSh3aW5kb3dQb3NpdGlvbik7XG4gIHZhciBpbWFnZXJ5TGF5ZXJGZWF0dXJlUHJvbWlzZSA9IHNjZW5lLmltYWdlcnlMYXllcnMucGlja0ltYWdlcnlMYXllckZlYXR1cmVzKFxuICAgIHBpY2tSYXksXG4gICAgc2NlbmVcbiAgKTtcbiAgaWYgKCFkZWZpbmVkKGltYWdlcnlMYXllckZlYXR1cmVQcm9taXNlKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEltYWdlcnkgbGF5ZXIgZmVhdHVyZSBwaWNraW5nIGlzIGFzeW5jaHJvbm91cywgc28gcHV0IHVwIGEgbWVzc2FnZSB3aGlsZSBsb2FkaW5nLlxuICB2YXIgbG9hZGluZ01lc3NhZ2UgPSBuZXcgRW50aXR5KHtcbiAgICBpZDogXCJMb2FkaW5nLi4uXCIsXG4gICAgZGVzY3JpcHRpb246IFwiTG9hZGluZyBmZWF0dXJlIGluZm9ybWF0aW9uLi4uXCIsXG4gIH0pO1xuXG4gIHdoZW4oXG4gICAgaW1hZ2VyeUxheWVyRmVhdHVyZVByb21pc2UsXG4gICAgZnVuY3Rpb24gKGZlYXR1cmVzKSB7XG4gICAgICAvLyBIYXMgdGhpcyBhc3luYyBwaWNrIGJlZW4gc3VwZXJzZWRlZCBieSBhIGxhdGVyIG9uZT9cbiAgICAgIGlmICh2aWV3ZXIuc2VsZWN0ZWRFbnRpdHkgIT09IGxvYWRpbmdNZXNzYWdlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkZWZpbmVkKGZlYXR1cmVzKSB8fCBmZWF0dXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmlld2VyLnNlbGVjdGVkRW50aXR5ID0gY3JlYXRlTm9GZWF0dXJlc0VudGl0eSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgZmlyc3QgZmVhdHVyZS5cbiAgICAgIHZhciBmZWF0dXJlID0gZmVhdHVyZXNbMF07XG5cbiAgICAgIHZhciBlbnRpdHkgPSBuZXcgRW50aXR5KHtcbiAgICAgICAgaWQ6IGZlYXR1cmUubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGZlYXR1cmUuZGVzY3JpcHRpb24sXG4gICAgICB9KTtcblxuICAgICAgaWYgKGRlZmluZWQoZmVhdHVyZS5wb3NpdGlvbikpIHtcbiAgICAgICAgdmFyIGVjZlBvc2l0aW9uID0gdmlld2VyLnNjZW5lLmdsb2JlLmVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihcbiAgICAgICAgICBmZWF0dXJlLnBvc2l0aW9uLFxuICAgICAgICAgIGNhcnRlc2lhbjNTY3JhdGNoXG4gICAgICAgICk7XG4gICAgICAgIGVudGl0eS5wb3NpdGlvbiA9IG5ldyBDb25zdGFudFBvc2l0aW9uUHJvcGVydHkoZWNmUG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICB2aWV3ZXIuc2VsZWN0ZWRFbnRpdHkgPSBlbnRpdHk7XG4gICAgfSxcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBIYXMgdGhpcyBhc3luYyBwaWNrIGJlZW4gc3VwZXJzZWRlZCBieSBhIGxhdGVyIG9uZT9cbiAgICAgIGlmICh2aWV3ZXIuc2VsZWN0ZWRFbnRpdHkgIT09IGxvYWRpbmdNZXNzYWdlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZpZXdlci5zZWxlY3RlZEVudGl0eSA9IGNyZWF0ZU5vRmVhdHVyZXNFbnRpdHkoKTtcbiAgICB9XG4gICk7XG5cbiAgcmV0dXJuIGxvYWRpbmdNZXNzYWdlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb0ZlYXR1cmVzRW50aXR5KCkge1xuICByZXR1cm4gbmV3IEVudGl0eSh7XG4gICAgaWQ6IFwiTm9uZVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIk5vIGZlYXR1cmVzIGZvdW5kLlwiLFxuICB9KTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlVlJVSSh2aWV3ZXIsIGVuYWJsZWQpIHtcbiAgdmFyIGdlb2NvZGVyID0gdmlld2VyLl9nZW9jb2RlcjtcbiAgdmFyIGhvbWVCdXR0b24gPSB2aWV3ZXIuX2hvbWVCdXR0b247XG4gIHZhciBzY2VuZU1vZGVQaWNrZXIgPSB2aWV3ZXIuX3NjZW5lTW9kZVBpY2tlcjtcbiAgdmFyIHByb2plY3Rpb25QaWNrZXIgPSB2aWV3ZXIuX3Byb2plY3Rpb25QaWNrZXI7XG4gIHZhciBiYXNlTGF5ZXJQaWNrZXIgPSB2aWV3ZXIuX2Jhc2VMYXllclBpY2tlcjtcbiAgdmFyIGFuaW1hdGlvbiA9IHZpZXdlci5fYW5pbWF0aW9uO1xuICB2YXIgdGltZWxpbmUgPSB2aWV3ZXIuX3RpbWVsaW5lO1xuICB2YXIgZnVsbHNjcmVlbkJ1dHRvbiA9IHZpZXdlci5fZnVsbHNjcmVlbkJ1dHRvbjtcbiAgdmFyIGluZm9Cb3ggPSB2aWV3ZXIuX2luZm9Cb3g7XG4gIHZhciBzZWxlY3Rpb25JbmRpY2F0b3IgPSB2aWV3ZXIuX3NlbGVjdGlvbkluZGljYXRvcjtcblxuICB2YXIgdmlzaWJpbGl0eSA9IGVuYWJsZWQgPyBcImhpZGRlblwiIDogXCJ2aXNpYmxlXCI7XG5cbiAgaWYgKGRlZmluZWQoZ2VvY29kZXIpKSB7XG4gICAgZ2VvY29kZXIuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSB2aXNpYmlsaXR5O1xuICB9XG4gIGlmIChkZWZpbmVkKGhvbWVCdXR0b24pKSB7XG4gICAgaG9tZUJ1dHRvbi5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gIH1cbiAgaWYgKGRlZmluZWQoc2NlbmVNb2RlUGlja2VyKSkge1xuICAgIHNjZW5lTW9kZVBpY2tlci5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gIH1cbiAgaWYgKGRlZmluZWQocHJvamVjdGlvblBpY2tlcikpIHtcbiAgICBwcm9qZWN0aW9uUGlja2VyLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcbiAgfVxuICBpZiAoZGVmaW5lZChiYXNlTGF5ZXJQaWNrZXIpKSB7XG4gICAgYmFzZUxheWVyUGlja2VyLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcbiAgfVxuICBpZiAoZGVmaW5lZChhbmltYXRpb24pKSB7XG4gICAgYW5pbWF0aW9uLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcbiAgfVxuICBpZiAoZGVmaW5lZCh0aW1lbGluZSkpIHtcbiAgICB0aW1lbGluZS5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gIH1cbiAgaWYgKFxuICAgIGRlZmluZWQoZnVsbHNjcmVlbkJ1dHRvbikgJiZcbiAgICBmdWxsc2NyZWVuQnV0dG9uLnZpZXdNb2RlbC5pc0Z1bGxzY3JlZW5FbmFibGVkXG4gICkge1xuICAgIGZ1bGxzY3JlZW5CdXR0b24uY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSB2aXNpYmlsaXR5O1xuICB9XG4gIGlmIChkZWZpbmVkKGluZm9Cb3gpKSB7XG4gICAgaW5mb0JveC5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gIH1cbiAgaWYgKGRlZmluZWQoc2VsZWN0aW9uSW5kaWNhdG9yKSkge1xuICAgIHNlbGVjdGlvbkluZGljYXRvci5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gIH1cblxuICBpZiAodmlld2VyLl9jb250YWluZXIpIHtcbiAgICB2YXIgcmlnaHQgPVxuICAgICAgZW5hYmxlZCB8fCAhZGVmaW5lZChmdWxsc2NyZWVuQnV0dG9uKVxuICAgICAgICA/IDBcbiAgICAgICAgOiBmdWxsc2NyZWVuQnV0dG9uLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICB2aWV3ZXIuX3ZyQnV0dG9uLmNvbnRhaW5lci5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuXG4gICAgdmlld2VyLmZvcmNlUmVzaXplKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWaWV3ZXIuQ29uc3RydWN0b3JPcHRpb25zXG4gKlxuICogSW5pdGlhbGl6YXRpb24gb3B0aW9ucyBmb3IgdGhlIFZpZXdlciBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW2FuaW1hdGlvbj10cnVlXSBJZiBzZXQgdG8gZmFsc2UsIHRoZSBBbmltYXRpb24gd2lkZ2V0IHdpbGwgbm90IGJlIGNyZWF0ZWQuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtiYXNlTGF5ZXJQaWNrZXI9dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlLCB0aGUgQmFzZUxheWVyUGlja2VyIHdpZGdldCB3aWxsIG5vdCBiZSBjcmVhdGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbZnVsbHNjcmVlbkJ1dHRvbj10cnVlXSBJZiBzZXQgdG8gZmFsc2UsIHRoZSBGdWxsc2NyZWVuQnV0dG9uIHdpZGdldCB3aWxsIG5vdCBiZSBjcmVhdGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbdnJCdXR0b249ZmFsc2VdIElmIHNldCB0byB0cnVlLCB0aGUgVlJCdXR0b24gd2lkZ2V0IHdpbGwgYmUgY3JlYXRlZC5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbnxHZW9jb2RlclNlcnZpY2VbXX0gW2dlb2NvZGVyPXRydWVdIElmIHNldCB0byBmYWxzZSwgdGhlIEdlb2NvZGVyIHdpZGdldCB3aWxsIG5vdCBiZSBjcmVhdGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbaG9tZUJ1dHRvbj10cnVlXSBJZiBzZXQgdG8gZmFsc2UsIHRoZSBIb21lQnV0dG9uIHdpZGdldCB3aWxsIG5vdCBiZSBjcmVhdGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbaW5mb0JveD10cnVlXSBJZiBzZXQgdG8gZmFsc2UsIHRoZSBJbmZvQm94IHdpZGdldCB3aWxsIG5vdCBiZSBjcmVhdGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbc2NlbmVNb2RlUGlja2VyPXRydWVdIElmIHNldCB0byBmYWxzZSwgdGhlIFNjZW5lTW9kZVBpY2tlciB3aWRnZXQgd2lsbCBub3QgYmUgY3JlYXRlZC5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3NlbGVjdGlvbkluZGljYXRvcj10cnVlXSBJZiBzZXQgdG8gZmFsc2UsIHRoZSBTZWxlY3Rpb25JbmRpY2F0b3Igd2lkZ2V0IHdpbGwgbm90IGJlIGNyZWF0ZWQuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFt0aW1lbGluZT10cnVlXSBJZiBzZXQgdG8gZmFsc2UsIHRoZSBUaW1lbGluZSB3aWRnZXQgd2lsbCBub3QgYmUgY3JlYXRlZC5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW25hdmlnYXRpb25IZWxwQnV0dG9uPXRydWVdIElmIHNldCB0byBmYWxzZSwgdGhlIG5hdmlnYXRpb24gaGVscCBidXR0b24gd2lsbCBub3QgYmUgY3JlYXRlZC5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW25hdmlnYXRpb25JbnN0cnVjdGlvbnNJbml0aWFsbHlWaXNpYmxlPXRydWVdIFRydWUgaWYgdGhlIG5hdmlnYXRpb24gaW5zdHJ1Y3Rpb25zIHNob3VsZCBpbml0aWFsbHkgYmUgdmlzaWJsZSwgb3IgZmFsc2UgaWYgdGhlIHNob3VsZCBub3QgYmUgc2hvd24gdW50aWwgdGhlIHVzZXIgZXhwbGljaXRseSBjbGlja3MgdGhlIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3NjZW5lM0RPbmx5PWZhbHNlXSBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBlYWNoIGdlb21ldHJ5IGluc3RhbmNlIHdpbGwgb25seSBiZSByZW5kZXJlZCBpbiAzRCB0byBzYXZlIEdQVSBtZW1vcnkuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtzaG91bGRBbmltYXRlPWZhbHNlXSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgY2xvY2sgc2hvdWxkIGF0dGVtcHQgdG8gYWR2YW5jZSBzaW11bGF0aW9uIHRpbWUgYnkgZGVmYXVsdCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS4gIFRoaXMgb3B0aW9uIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBzZXR0aW5nIHtAbGluayBWaWV3ZXIjY2xvY2tWaWV3TW9kZWx9LlxuICogQHByb3BlcnR5IHtDbG9ja1ZpZXdNb2RlbH0gW2Nsb2NrVmlld01vZGVsPW5ldyBDbG9ja1ZpZXdNb2RlbChjbG9jayldIFRoZSBjbG9jayB2aWV3IG1vZGVsIHRvIHVzZSB0byBjb250cm9sIGN1cnJlbnQgdGltZS5cbiAqIEBwcm9wZXJ0eSB7UHJvdmlkZXJWaWV3TW9kZWx9IFtzZWxlY3RlZEltYWdlcnlQcm92aWRlclZpZXdNb2RlbF0gVGhlIHZpZXcgbW9kZWwgZm9yIHRoZSBjdXJyZW50IGJhc2UgaW1hZ2VyeSBsYXllciwgaWYgbm90IHN1cHBsaWVkIHRoZSBmaXJzdCBhdmFpbGFibGUgYmFzZSBsYXllciBpcyB1c2VkLiAgVGhpcyB2YWx1ZSBpcyBvbmx5IHZhbGlkIGlmIGBiYXNlTGF5ZXJQaWNrZXJgIGlzIHNldCB0byB0cnVlLlxuICogQHByb3BlcnR5IHtQcm92aWRlclZpZXdNb2RlbFtdfSBbaW1hZ2VyeVByb3ZpZGVyVmlld01vZGVscz1jcmVhdGVEZWZhdWx0SW1hZ2VyeVByb3ZpZGVyVmlld01vZGVscygpXSBUaGUgYXJyYXkgb2YgUHJvdmlkZXJWaWV3TW9kZWxzIHRvIGJlIHNlbGVjdGFibGUgZnJvbSB0aGUgQmFzZUxheWVyUGlja2VyLiAgVGhpcyB2YWx1ZSBpcyBvbmx5IHZhbGlkIGlmIGBiYXNlTGF5ZXJQaWNrZXJgIGlzIHNldCB0byB0cnVlLlxuICogQHByb3BlcnR5IHtQcm92aWRlclZpZXdNb2RlbH0gW3NlbGVjdGVkVGVycmFpblByb3ZpZGVyVmlld01vZGVsXSBUaGUgdmlldyBtb2RlbCBmb3IgdGhlIGN1cnJlbnQgYmFzZSB0ZXJyYWluIGxheWVyLCBpZiBub3Qgc3VwcGxpZWQgdGhlIGZpcnN0IGF2YWlsYWJsZSBiYXNlIGxheWVyIGlzIHVzZWQuICBUaGlzIHZhbHVlIGlzIG9ubHkgdmFsaWQgaWYgYGJhc2VMYXllclBpY2tlcmAgaXMgc2V0IHRvIHRydWUuXG4gKiBAcHJvcGVydHkge1Byb3ZpZGVyVmlld01vZGVsW119IFt0ZXJyYWluUHJvdmlkZXJWaWV3TW9kZWxzPWNyZWF0ZURlZmF1bHRUZXJyYWluUHJvdmlkZXJWaWV3TW9kZWxzKCldIFRoZSBhcnJheSBvZiBQcm92aWRlclZpZXdNb2RlbHMgdG8gYmUgc2VsZWN0YWJsZSBmcm9tIHRoZSBCYXNlTGF5ZXJQaWNrZXIuICBUaGlzIHZhbHVlIGlzIG9ubHkgdmFsaWQgaWYgYGJhc2VMYXllclBpY2tlcmAgaXMgc2V0IHRvIHRydWUuXG4gKiBAcHJvcGVydHkge0ltYWdlcnlQcm92aWRlcn0gW2ltYWdlcnlQcm92aWRlcj1jcmVhdGVXb3JsZEltYWdlcnkoKV0gVGhlIGltYWdlcnkgcHJvdmlkZXIgdG8gdXNlLiAgVGhpcyB2YWx1ZSBpcyBvbmx5IHZhbGlkIGlmIGBiYXNlTGF5ZXJQaWNrZXJgIGlzIHNldCB0byBmYWxzZS5cbiAqIEBwcm9wZXJ0eSB7VGVycmFpblByb3ZpZGVyfSBbdGVycmFpblByb3ZpZGVyPW5ldyBFbGxpcHNvaWRUZXJyYWluUHJvdmlkZXIoKV0gVGhlIHRlcnJhaW4gcHJvdmlkZXIgdG8gdXNlXG4gKiBAcHJvcGVydHkge1NreUJveHxmYWxzZX0gW3NreUJveF0gVGhlIHNreWJveCB1c2VkIHRvIHJlbmRlciB0aGUgc3RhcnMuICBXaGVuIDxjb2RlPnVuZGVmaW5lZDwvY29kZT4sIHRoZSBkZWZhdWx0IHN0YXJzIGFyZSB1c2VkLiBJZiBzZXQgdG8gPGNvZGU+ZmFsc2U8L2NvZGU+LCBubyBza3lCb3gsIFN1biwgb3IgTW9vbiB3aWxsIGJlIGFkZGVkLlxuICogQHByb3BlcnR5IHtTa3lBdG1vc3BoZXJlfGZhbHNlfSBbc2t5QXRtb3NwaGVyZV0gQmx1ZSBza3ksIGFuZCB0aGUgZ2xvdyBhcm91bmQgdGhlIEVhcnRoJ3MgbGltYi4gIFNldCB0byA8Y29kZT5mYWxzZTwvY29kZT4gdG8gdHVybiBpdCBvZmYuXG4gKiBAcHJvcGVydHkge0VsZW1lbnR8U3RyaW5nfSBbZnVsbHNjcmVlbkVsZW1lbnQ9ZG9jdW1lbnQuYm9keV0gVGhlIGVsZW1lbnQgb3IgaWQgdG8gYmUgcGxhY2VkIGludG8gZnVsbHNjcmVlbiBtb2RlIHdoZW4gdGhlIGZ1bGwgc2NyZWVuIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbdXNlRGVmYXVsdFJlbmRlckxvb3A9dHJ1ZV0gVHJ1ZSBpZiB0aGlzIHdpZGdldCBzaG91bGQgY29udHJvbCB0aGUgcmVuZGVyIGxvb3AsIGZhbHNlIG90aGVyd2lzZS5cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbdGFyZ2V0RnJhbWVSYXRlXSBUaGUgdGFyZ2V0IGZyYW1lIHJhdGUgd2hlbiB1c2luZyB0aGUgZGVmYXVsdCByZW5kZXIgbG9vcC5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3Nob3dSZW5kZXJMb29wRXJyb3JzPXRydWVdIElmIHRydWUsIHRoaXMgd2lkZ2V0IHdpbGwgYXV0b21hdGljYWxseSBkaXNwbGF5IGFuIEhUTUwgcGFuZWwgdG8gdGhlIHVzZXIgY29udGFpbmluZyB0aGUgZXJyb3IsIGlmIGEgcmVuZGVyIGxvb3AgZXJyb3Igb2NjdXJzLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbdXNlQnJvd3NlclJlY29tbWVuZGVkUmVzb2x1dGlvbj10cnVlXSBJZiB0cnVlLCByZW5kZXIgYXQgdGhlIGJyb3dzZXIncyByZWNvbW1lbmRlZCByZXNvbHV0aW9uIGFuZCBpZ25vcmUgPGNvZGU+d2luZG93LmRldmljZVBpeGVsUmF0aW88L2NvZGU+LlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbYXV0b21hdGljYWxseVRyYWNrRGF0YVNvdXJjZUNsb2Nrcz10cnVlXSBJZiB0cnVlLCB0aGlzIHdpZGdldCB3aWxsIGF1dG9tYXRpY2FsbHkgdHJhY2sgdGhlIGNsb2NrIHNldHRpbmdzIG9mIG5ld2x5IGFkZGVkIERhdGFTb3VyY2VzLCB1cGRhdGluZyBpZiB0aGUgRGF0YVNvdXJjZSdzIGNsb2NrIGNoYW5nZXMuICBTZXQgdGhpcyB0byBmYWxzZSBpZiB5b3Ugd2FudCB0byBjb25maWd1cmUgdGhlIGNsb2NrIGluZGVwZW5kZW50bHkuXG4gKiBAcHJvcGVydHkge09iamVjdH0gW2NvbnRleHRPcHRpb25zXSBDb250ZXh0IGFuZCBXZWJHTCBjcmVhdGlvbiBwcm9wZXJ0aWVzIGNvcnJlc3BvbmRpbmcgdG8gPGNvZGU+b3B0aW9uczwvY29kZT4gcGFzc2VkIHRvIHtAbGluayBTY2VuZX0uXG4gKiBAcHJvcGVydHkge1NjZW5lTW9kZX0gW3NjZW5lTW9kZT1TY2VuZU1vZGUuU0NFTkUzRF0gVGhlIGluaXRpYWwgc2NlbmUgbW9kZS5cbiAqIEBwcm9wZXJ0eSB7TWFwUHJvamVjdGlvbn0gW21hcFByb2plY3Rpb249bmV3IEdlb2dyYXBoaWNQcm9qZWN0aW9uKCldIFRoZSBtYXAgcHJvamVjdGlvbiB0byB1c2UgaW4gMkQgYW5kIENvbHVtYnVzIFZpZXcgbW9kZXMuXG4gKiBAcHJvcGVydHkge0dsb2JlfGZhbHNlfSBbZ2xvYmU9bmV3IEdsb2JlKG1hcFByb2plY3Rpb24uZWxsaXBzb2lkKV0gVGhlIGdsb2JlIHRvIHVzZSBpbiB0aGUgc2NlbmUuICBJZiBzZXQgdG8gPGNvZGU+ZmFsc2U8L2NvZGU+LCBubyBnbG9iZSB3aWxsIGJlIGFkZGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbb3JkZXJJbmRlcGVuZGVudFRyYW5zbHVjZW5jeT10cnVlXSBJZiB0cnVlIGFuZCB0aGUgY29uZmlndXJhdGlvbiBzdXBwb3J0cyBpdCwgdXNlIG9yZGVyIGluZGVwZW5kZW50IHRyYW5zbHVjZW5jeS5cbiAqIEBwcm9wZXJ0eSB7RWxlbWVudHxTdHJpbmd9IFtjcmVkaXRDb250YWluZXJdIFRoZSBET00gZWxlbWVudCBvciBJRCB0aGF0IHdpbGwgY29udGFpbiB0aGUge0BsaW5rIENyZWRpdERpc3BsYXl9LiAgSWYgbm90IHNwZWNpZmllZCwgdGhlIGNyZWRpdHMgYXJlIGFkZGVkIHRvIHRoZSBib3R0b20gb2YgdGhlIHdpZGdldCBpdHNlbGYuXG4gKiBAcHJvcGVydHkge0VsZW1lbnR8U3RyaW5nfSBbY3JlZGl0Vmlld3BvcnRdIFRoZSBET00gZWxlbWVudCBvciBJRCB0aGF0IHdpbGwgY29udGFpbiB0aGUgY3JlZGl0IHBvcCB1cCBjcmVhdGVkIGJ5IHRoZSB7QGxpbmsgQ3JlZGl0RGlzcGxheX0uICBJZiBub3Qgc3BlY2lmaWVkLCBpdCB3aWxsIGFwcGVhciBvdmVyIHRoZSB3aWRnZXQgaXRzZWxmLlxuICogQHByb3BlcnR5IHtEYXRhU291cmNlQ29sbGVjdGlvbn0gW2RhdGFTb3VyY2VzPW5ldyBEYXRhU291cmNlQ29sbGVjdGlvbigpXSBUaGUgY29sbGVjdGlvbiBvZiBkYXRhIHNvdXJjZXMgdmlzdWFsaXplZCBieSB0aGUgd2lkZ2V0LiAgSWYgdGhpcyBwYXJhbWV0ZXIgaXMgcHJvdmlkZWQsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgaW5zdGFuY2UgaXMgYXNzdW1lZCB0byBiZSBvd25lZCBieSB0aGUgY2FsbGVyIGFuZCB3aWxsIG5vdCBiZSBkZXN0cm95ZWQgd2hlbiB0aGUgdmlld2VyIGlzIGRlc3Ryb3llZC5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3NoYWRvd3M9ZmFsc2VdIERldGVybWluZXMgaWYgc2hhZG93cyBhcmUgY2FzdCBieSBsaWdodCBzb3VyY2VzLlxuICogQHByb3BlcnR5IHtTaGFkb3dNb2RlfSBbdGVycmFpblNoYWRvd3M9U2hhZG93TW9kZS5SRUNFSVZFX09OTFldIERldGVybWluZXMgaWYgdGhlIHRlcnJhaW4gY2FzdHMgb3IgcmVjZWl2ZXMgc2hhZG93cyBmcm9tIGxpZ2h0IHNvdXJjZXMuXG4gKiBAcHJvcGVydHkge01hcE1vZGUyRH0gW21hcE1vZGUyRD1NYXBNb2RlMkQuSU5GSU5JVEVfU0NST0xMXSBEZXRlcm1pbmVzIGlmIHRoZSAyRCBtYXAgaXMgcm90YXRhYmxlIG9yIGNhbiBiZSBzY3JvbGxlZCBpbmZpbml0ZWx5IGluIHRoZSBob3Jpem9udGFsIGRpcmVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW3Byb2plY3Rpb25QaWNrZXI9ZmFsc2VdIElmIHNldCB0byB0cnVlLCB0aGUgUHJvamVjdGlvblBpY2tlciB3aWRnZXQgd2lsbCBiZSBjcmVhdGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbcmVxdWVzdFJlbmRlck1vZGU9ZmFsc2VdIElmIHRydWUsIHJlbmRlcmluZyBhIGZyYW1lIHdpbGwgb25seSBvY2N1ciB3aGVuIG5lZWRlZCBhcyBkZXRlcm1pbmVkIGJ5IGNoYW5nZXMgd2l0aGluIHRoZSBzY2VuZS4gRW5hYmxpbmcgcmVkdWNlcyB0aGUgQ1BVL0dQVSB1c2FnZSBvZiB5b3VyIGFwcGxpY2F0aW9uIGFuZCB1c2VzIGxlc3MgYmF0dGVyeSBvbiBtb2JpbGUsIGJ1dCByZXF1aXJlcyB1c2luZyB7QGxpbmsgU2NlbmUjcmVxdWVzdFJlbmRlcn0gdG8gcmVuZGVyIGEgbmV3IGZyYW1lIGV4cGxpY2l0bHkgaW4gdGhpcyBtb2RlLiBUaGlzIHdpbGwgYmUgbmVjZXNzYXJ5IGluIG1hbnkgY2FzZXMgYWZ0ZXIgbWFraW5nIGNoYW5nZXMgdG8gdGhlIHNjZW5lIGluIG90aGVyIHBhcnRzIG9mIHRoZSBBUEkuIFNlZSB7QGxpbmsgaHR0cHM6Ly9jZXNpdW0uY29tL2Jsb2cvMjAxOC8wMS8yNC9jZXNpdW0tc2NlbmUtcmVuZGVyaW5nLXBlcmZvcm1hbmNlL3xJbXByb3ZpbmcgUGVyZm9ybWFuY2Ugd2l0aCBFeHBsaWNpdCBSZW5kZXJpbmd9LlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFttYXhpbXVtUmVuZGVyVGltZUNoYW5nZT0wLjBdIElmIHJlcXVlc3RSZW5kZXJNb2RlIGlzIHRydWUsIHRoaXMgdmFsdWUgZGVmaW5lcyB0aGUgbWF4aW11bSBjaGFuZ2UgaW4gc2ltdWxhdGlvbiB0aW1lIGFsbG93ZWQgYmVmb3JlIGEgcmVuZGVyIGlzIHJlcXVlc3RlZC4gU2VlIHtAbGluayBodHRwczovL2Nlc2l1bS5jb20vYmxvZy8yMDE4LzAxLzI0L2Nlc2l1bS1zY2VuZS1yZW5kZXJpbmctcGVyZm9ybWFuY2UvfEltcHJvdmluZyBQZXJmb3JtYW5jZSB3aXRoIEV4cGxpY2l0IFJlbmRlcmluZ30uXG4gKi9cblxuLyoqXG4gKiBBIGJhc2Ugd2lkZ2V0IGZvciBidWlsZGluZyBhcHBsaWNhdGlvbnMuICBJdCBjb21wb3NpdGVzIGFsbCBvZiB0aGUgc3RhbmRhcmQgQ2VzaXVtIHdpZGdldHMgaW50byBvbmUgcmV1c2FibGUgcGFja2FnZS5cbiAqIFRoZSB3aWRnZXQgY2FuIGFsd2F5cyBiZSBleHRlbmRlZCBieSB1c2luZyBtaXhpbnMsIHdoaWNoIGFkZCBmdW5jdGlvbmFsaXR5IHVzZWZ1bCBmb3IgYSB2YXJpZXR5IG9mIGFwcGxpY2F0aW9ucy5cbiAqXG4gKiBAYWxpYXMgVmlld2VyXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBjb250YWluZXIgVGhlIERPTSBlbGVtZW50IG9yIElEIHRoYXQgd2lsbCBjb250YWluIHRoZSB3aWRnZXQuXG4gKiBAcGFyYW0ge1ZpZXdlci5Db25zdHJ1Y3Rvck9wdGlvbnN9IFtvcHRpb25zXSBPYmplY3QgZGVzY3JpYmluZyBpbml0aWFsaXphdGlvbiBvcHRpb25zXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEVsZW1lbnQgd2l0aCBpZCBcImNvbnRhaW5lclwiIGRvZXMgbm90IGV4aXN0IGluIHRoZSBkb2N1bWVudC5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBvcHRpb25zLnNlbGVjdGVkSW1hZ2VyeVByb3ZpZGVyVmlld01vZGVsIGlzIG5vdCBhdmFpbGFibGUgd2hlbiBub3QgdXNpbmcgdGhlIEJhc2VMYXllclBpY2tlciB3aWRnZXQsIHNwZWNpZnkgb3B0aW9ucy5pbWFnZXJ5UHJvdmlkZXIgaW5zdGVhZC5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBvcHRpb25zLnNlbGVjdGVkVGVycmFpblByb3ZpZGVyVmlld01vZGVsIGlzIG5vdCBhdmFpbGFibGUgd2hlbiBub3QgdXNpbmcgdGhlIEJhc2VMYXllclBpY2tlciB3aWRnZXQsIHNwZWNpZnkgb3B0aW9ucy50ZXJyYWluUHJvdmlkZXIgaW5zdGVhZC5cbiAqXG4gKiBAc2VlIEFuaW1hdGlvblxuICogQHNlZSBCYXNlTGF5ZXJQaWNrZXJcbiAqIEBzZWUgQ2VzaXVtV2lkZ2V0XG4gKiBAc2VlIEZ1bGxzY3JlZW5CdXR0b25cbiAqIEBzZWUgSG9tZUJ1dHRvblxuICogQHNlZSBTY2VuZU1vZGVQaWNrZXJcbiAqIEBzZWUgVGltZWxpbmVcbiAqIEBzZWUgdmlld2VyRHJhZ0Ryb3BNaXhpblxuICpcbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1IZWxsbyUyMFdvcmxkLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgSGVsbG8gV29ybGQgRGVtb31cbiAqXG4gKiBAZXhhbXBsZVxuICogLy9Jbml0aWFsaXplIHRoZSB2aWV3ZXIgd2lkZ2V0IHdpdGggc2V2ZXJhbCBjdXN0b20gb3B0aW9ucyBhbmQgbWl4aW5zLlxuICogdmFyIHZpZXdlciA9IG5ldyBDZXNpdW0uVmlld2VyKCdjZXNpdW1Db250YWluZXInLCB7XG4gKiAgICAgLy9TdGFydCBpbiBDb2x1bWJ1cyBWaWV3ZXJcbiAqICAgICBzY2VuZU1vZGUgOiBDZXNpdW0uU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcsXG4gKiAgICAgLy9Vc2UgQ2VzaXVtIFdvcmxkIFRlcnJhaW5cbiAqICAgICB0ZXJyYWluUHJvdmlkZXIgOiBDZXNpdW0uY3JlYXRlV29ybGRUZXJyYWluKCksXG4gKiAgICAgLy9IaWRlIHRoZSBiYXNlIGxheWVyIHBpY2tlclxuICogICAgIGJhc2VMYXllclBpY2tlciA6IGZhbHNlLFxuICogICAgIC8vVXNlIE9wZW5TdHJlZXRNYXBzXG4gKiAgICAgaW1hZ2VyeVByb3ZpZGVyIDogbmV3IENlc2l1bS5PcGVuU3RyZWV0TWFwSW1hZ2VyeVByb3ZpZGVyKHtcbiAqICAgICAgICAgdXJsIDogJ2h0dHBzOi8vYS50aWxlLm9wZW5zdHJlZXRtYXAub3JnLydcbiAqICAgICB9KSxcbiAqICAgICBza3lCb3ggOiBuZXcgQ2VzaXVtLlNreUJveCh7XG4gKiAgICAgICAgIHNvdXJjZXMgOiB7XG4gKiAgICAgICAgICAgcG9zaXRpdmVYIDogJ3N0YXJzL1R5Y2hvU2t5bWFwSUkudDNfMDgxOTJ4MDQwOTZfODBfcHguanBnJyxcbiAqICAgICAgICAgICBuZWdhdGl2ZVggOiAnc3RhcnMvVHljaG9Ta3ltYXBJSS50M18wODE5MngwNDA5Nl84MF9teC5qcGcnLFxuICogICAgICAgICAgIHBvc2l0aXZlWSA6ICdzdGFycy9UeWNob1NreW1hcElJLnQzXzA4MTkyeDA0MDk2XzgwX3B5LmpwZycsXG4gKiAgICAgICAgICAgbmVnYXRpdmVZIDogJ3N0YXJzL1R5Y2hvU2t5bWFwSUkudDNfMDgxOTJ4MDQwOTZfODBfbXkuanBnJyxcbiAqICAgICAgICAgICBwb3NpdGl2ZVogOiAnc3RhcnMvVHljaG9Ta3ltYXBJSS50M18wODE5MngwNDA5Nl84MF9wei5qcGcnLFxuICogICAgICAgICAgIG5lZ2F0aXZlWiA6ICdzdGFycy9UeWNob1NreW1hcElJLnQzXzA4MTkyeDA0MDk2XzgwX216LmpwZydcbiAqICAgICAgICAgfVxuICogICAgIH0pLFxuICogICAgIC8vIFNob3cgQ29sdW1idXMgVmlldyBtYXAgd2l0aCBXZWIgTWVyY2F0b3IgcHJvamVjdGlvblxuICogICAgIG1hcFByb2plY3Rpb24gOiBuZXcgQ2VzaXVtLldlYk1lcmNhdG9yUHJvamVjdGlvbigpXG4gKiB9KTtcbiAqXG4gKiAvL0FkZCBiYXNpYyBkcmFnIGFuZCBkcm9wIGZ1bmN0aW9uYWxpdHlcbiAqIHZpZXdlci5leHRlbmQoQ2VzaXVtLnZpZXdlckRyYWdEcm9wTWl4aW4pO1xuICpcbiAqIC8vU2hvdyBhIHBvcC11cCBhbGVydCBpZiB3ZSBlbmNvdW50ZXIgYW4gZXJyb3Igd2hlbiBwcm9jZXNzaW5nIGEgZHJvcHBlZCBmaWxlXG4gKiB2aWV3ZXIuZHJvcEVycm9yLmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24oZHJvcEhhbmRsZXIsIG5hbWUsIGVycm9yKSB7XG4gKiAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICogICAgIHdpbmRvdy5hbGVydChlcnJvcik7XG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gVmlld2VyKGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoY29udGFpbmVyKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImNvbnRhaW5lciBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgY29udGFpbmVyID0gZ2V0RWxlbWVudChjb250YWluZXIpO1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHZhciBjcmVhdGVCYXNlTGF5ZXJQaWNrZXIgPVxuICAgICghZGVmaW5lZChvcHRpb25zLmdsb2JlKSB8fCBvcHRpb25zLmdsb2JlICE9PSBmYWxzZSkgJiZcbiAgICAoIWRlZmluZWQob3B0aW9ucy5iYXNlTGF5ZXJQaWNrZXIpIHx8IG9wdGlvbnMuYmFzZUxheWVyUGlja2VyICE9PSBmYWxzZSk7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgLy8gSWYgbm90IHVzaW5nIEJhc2VMYXllclBpY2tlciwgc2VsZWN0ZWRJbWFnZXJ5UHJvdmlkZXJWaWV3TW9kZWwgaXMgYW4gaW52YWxpZCBvcHRpb25cbiAgaWYgKFxuICAgICFjcmVhdGVCYXNlTGF5ZXJQaWNrZXIgJiZcbiAgICBkZWZpbmVkKG9wdGlvbnMuc2VsZWN0ZWRJbWFnZXJ5UHJvdmlkZXJWaWV3TW9kZWwpXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwib3B0aW9ucy5zZWxlY3RlZEltYWdlcnlQcm92aWRlclZpZXdNb2RlbCBpcyBub3QgYXZhaWxhYmxlIHdoZW4gbm90IHVzaW5nIHRoZSBCYXNlTGF5ZXJQaWNrZXIgd2lkZ2V0LiBcXFxuRWl0aGVyIHNwZWNpZnkgb3B0aW9ucy5pbWFnZXJ5UHJvdmlkZXIgaW5zdGVhZCBvciBzZXQgb3B0aW9ucy5iYXNlTGF5ZXJQaWNrZXIgdG8gdHJ1ZS5cIlxuICAgICk7XG4gIH1cblxuICAvLyBJZiBub3QgdXNpbmcgQmFzZUxheWVyUGlja2VyLCBzZWxlY3RlZFRlcnJhaW5Qcm92aWRlclZpZXdNb2RlbCBpcyBhbiBpbnZhbGlkIG9wdGlvblxuICBpZiAoXG4gICAgIWNyZWF0ZUJhc2VMYXllclBpY2tlciAmJlxuICAgIGRlZmluZWQob3B0aW9ucy5zZWxlY3RlZFRlcnJhaW5Qcm92aWRlclZpZXdNb2RlbClcbiAgKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJvcHRpb25zLnNlbGVjdGVkVGVycmFpblByb3ZpZGVyVmlld01vZGVsIGlzIG5vdCBhdmFpbGFibGUgd2hlbiBub3QgdXNpbmcgdGhlIEJhc2VMYXllclBpY2tlciB3aWRnZXQuIFxcXG5FaXRoZXIgc3BlY2lmeSBvcHRpb25zLnRlcnJhaW5Qcm92aWRlciBpbnN0ZWFkIG9yIHNldCBvcHRpb25zLmJhc2VMYXllclBpY2tlciB0byB0cnVlLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKVxuXG4gIHZhciB0aGF0ID0gdGhpcztcblxuICB2YXIgdmlld2VyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgdmlld2VyQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2VzaXVtLXZpZXdlclwiO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodmlld2VyQ29udGFpbmVyKTtcblxuICAvLyBDZXNpdW0gd2lkZ2V0IGNvbnRhaW5lclxuICB2YXIgY2VzaXVtV2lkZ2V0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY2VzaXVtV2lkZ2V0Q29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2VzaXVtLXZpZXdlci1jZXNpdW1XaWRnZXRDb250YWluZXJcIjtcbiAgdmlld2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKGNlc2l1bVdpZGdldENvbnRhaW5lcik7XG5cbiAgLy8gQm90dG9tIGNvbnRhaW5lclxuICB2YXIgYm90dG9tQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYm90dG9tQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2VzaXVtLXZpZXdlci1ib3R0b21cIjtcblxuICB2aWV3ZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90dG9tQ29udGFpbmVyKTtcblxuICB2YXIgc2NlbmUzRE9ubHkgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5zY2VuZTNET25seSwgZmFsc2UpO1xuXG4gIHZhciBjbG9jaztcbiAgdmFyIGNsb2NrVmlld01vZGVsO1xuICB2YXIgZGVzdHJveUNsb2NrVmlld01vZGVsID0gZmFsc2U7XG4gIGlmIChkZWZpbmVkKG9wdGlvbnMuY2xvY2tWaWV3TW9kZWwpKSB7XG4gICAgY2xvY2tWaWV3TW9kZWwgPSBvcHRpb25zLmNsb2NrVmlld01vZGVsO1xuICAgIGNsb2NrID0gY2xvY2tWaWV3TW9kZWwuY2xvY2s7XG4gIH0gZWxzZSB7XG4gICAgY2xvY2sgPSBuZXcgQ2xvY2soKTtcbiAgICBjbG9ja1ZpZXdNb2RlbCA9IG5ldyBDbG9ja1ZpZXdNb2RlbChjbG9jayk7XG4gICAgZGVzdHJveUNsb2NrVmlld01vZGVsID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKG9wdGlvbnMuc2hvdWxkQW5pbWF0ZSkpIHtcbiAgICBjbG9jay5zaG91bGRBbmltYXRlID0gb3B0aW9ucy5zaG91bGRBbmltYXRlO1xuICB9XG5cbiAgLy8gQ2VzaXVtIHdpZGdldFxuICB2YXIgY2VzaXVtV2lkZ2V0ID0gbmV3IENlc2l1bVdpZGdldChjZXNpdW1XaWRnZXRDb250YWluZXIsIHtcbiAgICBpbWFnZXJ5UHJvdmlkZXI6XG4gICAgICBjcmVhdGVCYXNlTGF5ZXJQaWNrZXIgfHwgZGVmaW5lZChvcHRpb25zLmltYWdlcnlQcm92aWRlcilcbiAgICAgICAgPyBmYWxzZVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICBjbG9jazogY2xvY2ssXG4gICAgc2t5Qm94OiBvcHRpb25zLnNreUJveCxcbiAgICBza3lBdG1vc3BoZXJlOiBvcHRpb25zLnNreUF0bW9zcGhlcmUsXG4gICAgc2NlbmVNb2RlOiBvcHRpb25zLnNjZW5lTW9kZSxcbiAgICBtYXBQcm9qZWN0aW9uOiBvcHRpb25zLm1hcFByb2plY3Rpb24sXG4gICAgZ2xvYmU6IG9wdGlvbnMuZ2xvYmUsXG4gICAgb3JkZXJJbmRlcGVuZGVudFRyYW5zbHVjZW5jeTogb3B0aW9ucy5vcmRlckluZGVwZW5kZW50VHJhbnNsdWNlbmN5LFxuICAgIGNvbnRleHRPcHRpb25zOiBvcHRpb25zLmNvbnRleHRPcHRpb25zLFxuICAgIHVzZURlZmF1bHRSZW5kZXJMb29wOiBvcHRpb25zLnVzZURlZmF1bHRSZW5kZXJMb29wLFxuICAgIHRhcmdldEZyYW1lUmF0ZTogb3B0aW9ucy50YXJnZXRGcmFtZVJhdGUsXG4gICAgc2hvd1JlbmRlckxvb3BFcnJvcnM6IG9wdGlvbnMuc2hvd1JlbmRlckxvb3BFcnJvcnMsXG4gICAgdXNlQnJvd3NlclJlY29tbWVuZGVkUmVzb2x1dGlvbjogb3B0aW9ucy51c2VCcm93c2VyUmVjb21tZW5kZWRSZXNvbHV0aW9uLFxuICAgIGNyZWRpdENvbnRhaW5lcjogZGVmaW5lZChvcHRpb25zLmNyZWRpdENvbnRhaW5lcilcbiAgICAgID8gb3B0aW9ucy5jcmVkaXRDb250YWluZXJcbiAgICAgIDogYm90dG9tQ29udGFpbmVyLFxuICAgIGNyZWRpdFZpZXdwb3J0OiBvcHRpb25zLmNyZWRpdFZpZXdwb3J0LFxuICAgIHNjZW5lM0RPbmx5OiBzY2VuZTNET25seSxcbiAgICBzaGFkb3dzOiBvcHRpb25zLnNoYWRvd3MsXG4gICAgdGVycmFpblNoYWRvd3M6IG9wdGlvbnMudGVycmFpblNoYWRvd3MsXG4gICAgbWFwTW9kZTJEOiBvcHRpb25zLm1hcE1vZGUyRCxcbiAgICByZXF1ZXN0UmVuZGVyTW9kZTogb3B0aW9ucy5yZXF1ZXN0UmVuZGVyTW9kZSxcbiAgICBtYXhpbXVtUmVuZGVyVGltZUNoYW5nZTogb3B0aW9ucy5tYXhpbXVtUmVuZGVyVGltZUNoYW5nZSxcbiAgfSk7XG5cbiAgdmFyIGRhdGFTb3VyY2VDb2xsZWN0aW9uID0gb3B0aW9ucy5kYXRhU291cmNlcztcbiAgdmFyIGRlc3Ryb3lEYXRhU291cmNlQ29sbGVjdGlvbiA9IGZhbHNlO1xuICBpZiAoIWRlZmluZWQoZGF0YVNvdXJjZUNvbGxlY3Rpb24pKSB7XG4gICAgZGF0YVNvdXJjZUNvbGxlY3Rpb24gPSBuZXcgRGF0YVNvdXJjZUNvbGxlY3Rpb24oKTtcbiAgICBkZXN0cm95RGF0YVNvdXJjZUNvbGxlY3Rpb24gPSB0cnVlO1xuICB9XG5cbiAgdmFyIHNjZW5lID0gY2VzaXVtV2lkZ2V0LnNjZW5lO1xuXG4gIHZhciBkYXRhU291cmNlRGlzcGxheSA9IG5ldyBEYXRhU291cmNlRGlzcGxheSh7XG4gICAgc2NlbmU6IHNjZW5lLFxuICAgIGRhdGFTb3VyY2VDb2xsZWN0aW9uOiBkYXRhU291cmNlQ29sbGVjdGlvbixcbiAgfSk7XG5cbiAgdmFyIGV2ZW50SGVscGVyID0gbmV3IEV2ZW50SGVscGVyKCk7XG5cbiAgZXZlbnRIZWxwZXIuYWRkKGNsb2NrLm9uVGljaywgVmlld2VyLnByb3RvdHlwZS5fb25UaWNrLCB0aGlzKTtcbiAgZXZlbnRIZWxwZXIuYWRkKHNjZW5lLm1vcnBoU3RhcnQsIFZpZXdlci5wcm90b3R5cGUuX2NsZWFyVHJhY2tlZE9iamVjdCwgdGhpcyk7XG5cbiAgLy8gU2VsZWN0aW9uIEluZGljYXRvclxuICB2YXIgc2VsZWN0aW9uSW5kaWNhdG9yO1xuICBpZiAoXG4gICAgIWRlZmluZWQob3B0aW9ucy5zZWxlY3Rpb25JbmRpY2F0b3IpIHx8XG4gICAgb3B0aW9ucy5zZWxlY3Rpb25JbmRpY2F0b3IgIT09IGZhbHNlXG4gICkge1xuICAgIHZhciBzZWxlY3Rpb25JbmRpY2F0b3JDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHNlbGVjdGlvbkluZGljYXRvckNvbnRhaW5lci5jbGFzc05hbWUgPVxuICAgICAgXCJjZXNpdW0tdmlld2VyLXNlbGVjdGlvbkluZGljYXRvckNvbnRhaW5lclwiO1xuICAgIHZpZXdlckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxlY3Rpb25JbmRpY2F0b3JDb250YWluZXIpO1xuICAgIHNlbGVjdGlvbkluZGljYXRvciA9IG5ldyBTZWxlY3Rpb25JbmRpY2F0b3IoXG4gICAgICBzZWxlY3Rpb25JbmRpY2F0b3JDb250YWluZXIsXG4gICAgICBzY2VuZVxuICAgICk7XG4gIH1cblxuICAvLyBJbmZvIEJveFxuICB2YXIgaW5mb0JveDtcbiAgaWYgKCFkZWZpbmVkKG9wdGlvbnMuaW5mb0JveCkgfHwgb3B0aW9ucy5pbmZvQm94ICE9PSBmYWxzZSkge1xuICAgIHZhciBpbmZvQm94Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpbmZvQm94Q29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2VzaXVtLXZpZXdlci1pbmZvQm94Q29udGFpbmVyXCI7XG4gICAgdmlld2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKGluZm9Cb3hDb250YWluZXIpO1xuICAgIGluZm9Cb3ggPSBuZXcgSW5mb0JveChpbmZvQm94Q29udGFpbmVyKTtcblxuICAgIHZhciBpbmZvQm94Vmlld01vZGVsID0gaW5mb0JveC52aWV3TW9kZWw7XG4gICAgZXZlbnRIZWxwZXIuYWRkKFxuICAgICAgaW5mb0JveFZpZXdNb2RlbC5jYW1lcmFDbGlja2VkLFxuICAgICAgVmlld2VyLnByb3RvdHlwZS5fb25JbmZvQm94Q2FtZXJhQ2xpY2tlZCxcbiAgICAgIHRoaXNcbiAgICApO1xuICAgIGV2ZW50SGVscGVyLmFkZChcbiAgICAgIGluZm9Cb3hWaWV3TW9kZWwuY2xvc2VDbGlja2VkLFxuICAgICAgVmlld2VyLnByb3RvdHlwZS5fb25JbmZvQm94Q2xvY2tDbGlja2VkLFxuICAgICAgdGhpc1xuICAgICk7XG4gIH1cblxuICAvLyBNYWluIFRvb2xiYXJcbiAgdmFyIHRvb2xiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0b29sYmFyLmNsYXNzTmFtZSA9IFwiY2VzaXVtLXZpZXdlci10b29sYmFyXCI7XG4gIHZpZXdlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b29sYmFyKTtcblxuICAvLyBHZW9jb2RlclxuICB2YXIgZ2VvY29kZXI7XG4gIGlmICghZGVmaW5lZChvcHRpb25zLmdlb2NvZGVyKSB8fCBvcHRpb25zLmdlb2NvZGVyICE9PSBmYWxzZSkge1xuICAgIHZhciBnZW9jb2RlckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZ2VvY29kZXJDb250YWluZXIuY2xhc3NOYW1lID0gXCJjZXNpdW0tdmlld2VyLWdlb2NvZGVyQ29udGFpbmVyXCI7XG4gICAgdG9vbGJhci5hcHBlbmRDaGlsZChnZW9jb2RlckNvbnRhaW5lcik7XG4gICAgdmFyIGdlb2NvZGVyU2VydmljZTtcbiAgICBpZiAoZGVmaW5lZChvcHRpb25zLmdlb2NvZGVyKSAmJiB0eXBlb2Ygb3B0aW9ucy5nZW9jb2RlciAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgIGdlb2NvZGVyU2VydmljZSA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5nZW9jb2RlcilcbiAgICAgICAgPyBvcHRpb25zLmdlb2NvZGVyXG4gICAgICAgIDogW29wdGlvbnMuZ2VvY29kZXJdO1xuICAgIH1cbiAgICBnZW9jb2RlciA9IG5ldyBHZW9jb2Rlcih7XG4gICAgICBjb250YWluZXI6IGdlb2NvZGVyQ29udGFpbmVyLFxuICAgICAgZ2VvY29kZXJTZXJ2aWNlczogZ2VvY29kZXJTZXJ2aWNlLFxuICAgICAgc2NlbmU6IHNjZW5lLFxuICAgIH0pO1xuICAgIC8vIFN1YnNjcmliZSB0byBzZWFyY2ggc28gdGhhdCB3ZSBjYW4gY2xlYXIgdGhlIHRyYWNrZWRFbnRpdHkgd2hlbiBpdCBpcyBjbGlja2VkLlxuICAgIGV2ZW50SGVscGVyLmFkZChcbiAgICAgIGdlb2NvZGVyLnZpZXdNb2RlbC5zZWFyY2guYmVmb3JlRXhlY3V0ZSxcbiAgICAgIFZpZXdlci5wcm90b3R5cGUuX2NsZWFyT2JqZWN0cyxcbiAgICAgIHRoaXNcbiAgICApO1xuICB9XG5cbiAgLy8gSG9tZUJ1dHRvblxuICB2YXIgaG9tZUJ1dHRvbjtcbiAgaWYgKCFkZWZpbmVkKG9wdGlvbnMuaG9tZUJ1dHRvbikgfHwgb3B0aW9ucy5ob21lQnV0dG9uICE9PSBmYWxzZSkge1xuICAgIGhvbWVCdXR0b24gPSBuZXcgSG9tZUJ1dHRvbih0b29sYmFyLCBzY2VuZSk7XG4gICAgaWYgKGRlZmluZWQoZ2VvY29kZXIpKSB7XG4gICAgICBldmVudEhlbHBlci5hZGQoaG9tZUJ1dHRvbi52aWV3TW9kZWwuY29tbWFuZC5hZnRlckV4ZWN1dGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZpZXdNb2RlbCA9IGdlb2NvZGVyLnZpZXdNb2RlbDtcbiAgICAgICAgdmlld01vZGVsLnNlYXJjaFRleHQgPSBcIlwiO1xuICAgICAgICBpZiAodmlld01vZGVsLmlzU2VhcmNoSW5Qcm9ncmVzcykge1xuICAgICAgICAgIHZpZXdNb2RlbC5zZWFyY2goKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFN1YnNjcmliZSB0byB0aGUgaG9tZSBidXR0b24gYmVmb3JlRXhlY3V0ZSBldmVudCBzbyB0aGF0IHdlIGNhbiBjbGVhciB0aGUgdHJhY2tlZEVudGl0eS5cbiAgICBldmVudEhlbHBlci5hZGQoXG4gICAgICBob21lQnV0dG9uLnZpZXdNb2RlbC5jb21tYW5kLmJlZm9yZUV4ZWN1dGUsXG4gICAgICBWaWV3ZXIucHJvdG90eXBlLl9jbGVhclRyYWNrZWRPYmplY3QsXG4gICAgICB0aGlzXG4gICAgKTtcbiAgfVxuXG4gIC8vIFNjZW5lTW9kZVBpY2tlclxuICAvLyBCeSBkZWZhdWx0LCB3ZSBzaWxlbnRseSBkaXNhYmxlIHRoZSBzY2VuZSBtb2RlIHBpY2tlciBpZiBzY2VuZTNET25seSBpcyB0cnVlLFxuICAvLyBidXQgaWYgc2NlbmVNb2RlUGlja2VyIGlzIGV4cGxpY2l0bHkgc2V0IHRvIHRydWUsIHRocm93IGFuIGVycm9yLlxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAob3B0aW9ucy5zY2VuZU1vZGVQaWNrZXIgPT09IHRydWUgJiYgc2NlbmUzRE9ubHkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIm9wdGlvbnMuc2NlbmVNb2RlUGlja2VyIGlzIG5vdCBhdmFpbGFibGUgd2hlbiBvcHRpb25zLnNjZW5lM0RPbmx5IGlzIHNldCB0byB0cnVlLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgc2NlbmVNb2RlUGlja2VyO1xuICBpZiAoXG4gICAgIXNjZW5lM0RPbmx5ICYmXG4gICAgKCFkZWZpbmVkKG9wdGlvbnMuc2NlbmVNb2RlUGlja2VyKSB8fCBvcHRpb25zLnNjZW5lTW9kZVBpY2tlciAhPT0gZmFsc2UpXG4gICkge1xuICAgIHNjZW5lTW9kZVBpY2tlciA9IG5ldyBTY2VuZU1vZGVQaWNrZXIodG9vbGJhciwgc2NlbmUpO1xuICB9XG5cbiAgdmFyIHByb2plY3Rpb25QaWNrZXI7XG4gIGlmIChvcHRpb25zLnByb2plY3Rpb25QaWNrZXIpIHtcbiAgICBwcm9qZWN0aW9uUGlja2VyID0gbmV3IFByb2plY3Rpb25QaWNrZXIodG9vbGJhciwgc2NlbmUpO1xuICB9XG5cbiAgLy8gQmFzZUxheWVyUGlja2VyXG4gIHZhciBiYXNlTGF5ZXJQaWNrZXI7XG4gIHZhciBiYXNlTGF5ZXJQaWNrZXJEcm9wRG93bjtcbiAgaWYgKGNyZWF0ZUJhc2VMYXllclBpY2tlcikge1xuICAgIHZhciBpbWFnZXJ5UHJvdmlkZXJWaWV3TW9kZWxzID0gZGVmYXVsdFZhbHVlKFxuICAgICAgb3B0aW9ucy5pbWFnZXJ5UHJvdmlkZXJWaWV3TW9kZWxzLFxuICAgICAgY3JlYXRlRGVmYXVsdEltYWdlcnlQcm92aWRlclZpZXdNb2RlbHMoKVxuICAgICk7XG4gICAgdmFyIHRlcnJhaW5Qcm92aWRlclZpZXdNb2RlbHMgPSBkZWZhdWx0VmFsdWUoXG4gICAgICBvcHRpb25zLnRlcnJhaW5Qcm92aWRlclZpZXdNb2RlbHMsXG4gICAgICBjcmVhdGVEZWZhdWx0VGVycmFpblByb3ZpZGVyVmlld01vZGVscygpXG4gICAgKTtcblxuICAgIGJhc2VMYXllclBpY2tlciA9IG5ldyBCYXNlTGF5ZXJQaWNrZXIodG9vbGJhciwge1xuICAgICAgZ2xvYmU6IHNjZW5lLmdsb2JlLFxuICAgICAgaW1hZ2VyeVByb3ZpZGVyVmlld01vZGVsczogaW1hZ2VyeVByb3ZpZGVyVmlld01vZGVscyxcbiAgICAgIHNlbGVjdGVkSW1hZ2VyeVByb3ZpZGVyVmlld01vZGVsOlxuICAgICAgICBvcHRpb25zLnNlbGVjdGVkSW1hZ2VyeVByb3ZpZGVyVmlld01vZGVsLFxuICAgICAgdGVycmFpblByb3ZpZGVyVmlld01vZGVsczogdGVycmFpblByb3ZpZGVyVmlld01vZGVscyxcbiAgICAgIHNlbGVjdGVkVGVycmFpblByb3ZpZGVyVmlld01vZGVsOlxuICAgICAgICBvcHRpb25zLnNlbGVjdGVkVGVycmFpblByb3ZpZGVyVmlld01vZGVsLFxuICAgIH0pO1xuXG4gICAgLy9HcmFiIHRoZSBkcm9wZG93biBmb3IgcmVzaXplIGNvZGUuXG4gICAgdmFyIGVsZW1lbnRzID0gdG9vbGJhci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgXCJjZXNpdW0tYmFzZUxheWVyUGlja2VyLWRyb3BEb3duXCJcbiAgICApO1xuICAgIGJhc2VMYXllclBpY2tlckRyb3BEb3duID0gZWxlbWVudHNbMF07XG4gIH1cblxuICAvLyBUaGVzZSBuZWVkIHRvIGJlIHNldCBhZnRlciB0aGUgQmFzZUxheWVyUGlja2VyIGlzIGNyZWF0ZWQgaW4gb3JkZXIgdG8gdGFrZSBlZmZlY3RcbiAgaWYgKGRlZmluZWQob3B0aW9ucy5pbWFnZXJ5UHJvdmlkZXIpICYmIG9wdGlvbnMuaW1hZ2VyeVByb3ZpZGVyICE9PSBmYWxzZSkge1xuICAgIGlmIChjcmVhdGVCYXNlTGF5ZXJQaWNrZXIpIHtcbiAgICAgIGJhc2VMYXllclBpY2tlci52aWV3TW9kZWwuc2VsZWN0ZWRJbWFnZXJ5ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBzY2VuZS5pbWFnZXJ5TGF5ZXJzLnJlbW92ZUFsbCgpO1xuICAgIHNjZW5lLmltYWdlcnlMYXllcnMuYWRkSW1hZ2VyeVByb3ZpZGVyKG9wdGlvbnMuaW1hZ2VyeVByb3ZpZGVyKTtcbiAgfVxuICBpZiAoZGVmaW5lZChvcHRpb25zLnRlcnJhaW5Qcm92aWRlcikpIHtcbiAgICBpZiAoY3JlYXRlQmFzZUxheWVyUGlja2VyKSB7XG4gICAgICBiYXNlTGF5ZXJQaWNrZXIudmlld01vZGVsLnNlbGVjdGVkVGVycmFpbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgc2NlbmUudGVycmFpblByb3ZpZGVyID0gb3B0aW9ucy50ZXJyYWluUHJvdmlkZXI7XG4gIH1cblxuICAvLyBOYXZpZ2F0aW9uIEhlbHAgQnV0dG9uXG4gIHZhciBuYXZpZ2F0aW9uSGVscEJ1dHRvbjtcbiAgaWYgKFxuICAgICFkZWZpbmVkKG9wdGlvbnMubmF2aWdhdGlvbkhlbHBCdXR0b24pIHx8XG4gICAgb3B0aW9ucy5uYXZpZ2F0aW9uSGVscEJ1dHRvbiAhPT0gZmFsc2VcbiAgKSB7XG4gICAgdmFyIHNob3dOYXZIZWxwID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgLy93aW5kb3cubG9jYWxTdG9yYWdlIGlzIG51bGwgaWYgZGlzYWJsZWQgaW4gRmlyZWZveCBvciB1bmRlZmluZWQgaW4gYnJvd3NlcnMgd2l0aCBpbXBsZW1lbnRhdGlvblxuICAgICAgaWYgKGRlZmluZWQod2luZG93LmxvY2FsU3RvcmFnZSkpIHtcbiAgICAgICAgdmFyIGhhc1NlZW5OYXZIZWxwID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFxuICAgICAgICAgIFwiY2VzaXVtLWhhc1NlZW5OYXZIZWxwXCJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGRlZmluZWQoaGFzU2Vlbk5hdkhlbHApICYmIEJvb2xlYW4oaGFzU2Vlbk5hdkhlbHApKSB7XG4gICAgICAgICAgc2hvd05hdkhlbHAgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjZXNpdW0taGFzU2Vlbk5hdkhlbHBcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy9BY2Nlc3Npbmcgd2luZG93LmxvY2FsU3RvcmFnZSB0aHJvd3MgaWYgZGlzYWJsZWQgaW4gQ2hyb21lXG4gICAgICAvL3dpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSB0aHJvd3MgaWYgaW4gU2FmYXJpIHByaXZhdGUgYnJvd3NpbmcgbW9kZSBvciBpbiBhbnkgYnJvd3NlciBpZiB3ZSBhcmUgb3ZlciBxdW90YS5cbiAgICB9XG4gICAgbmF2aWdhdGlvbkhlbHBCdXR0b24gPSBuZXcgTmF2aWdhdGlvbkhlbHBCdXR0b24oe1xuICAgICAgY29udGFpbmVyOiB0b29sYmFyLFxuICAgICAgaW5zdHJ1Y3Rpb25zSW5pdGlhbGx5VmlzaWJsZTogZGVmYXVsdFZhbHVlKFxuICAgICAgICBvcHRpb25zLm5hdmlnYXRpb25JbnN0cnVjdGlvbnNJbml0aWFsbHlWaXNpYmxlLFxuICAgICAgICBzaG93TmF2SGVscFxuICAgICAgKSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFuaW1hdGlvblxuICB2YXIgYW5pbWF0aW9uO1xuICBpZiAoIWRlZmluZWQob3B0aW9ucy5hbmltYXRpb24pIHx8IG9wdGlvbnMuYW5pbWF0aW9uICE9PSBmYWxzZSkge1xuICAgIHZhciBhbmltYXRpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFuaW1hdGlvbkNvbnRhaW5lci5jbGFzc05hbWUgPSBcImNlc2l1bS12aWV3ZXItYW5pbWF0aW9uQ29udGFpbmVyXCI7XG4gICAgdmlld2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKGFuaW1hdGlvbkNvbnRhaW5lcik7XG4gICAgYW5pbWF0aW9uID0gbmV3IEFuaW1hdGlvbihcbiAgICAgIGFuaW1hdGlvbkNvbnRhaW5lcixcbiAgICAgIG5ldyBBbmltYXRpb25WaWV3TW9kZWwoY2xvY2tWaWV3TW9kZWwpXG4gICAgKTtcbiAgfVxuXG4gIC8vIFRpbWVsaW5lXG4gIHZhciB0aW1lbGluZTtcbiAgaWYgKCFkZWZpbmVkKG9wdGlvbnMudGltZWxpbmUpIHx8IG9wdGlvbnMudGltZWxpbmUgIT09IGZhbHNlKSB7XG4gICAgdmFyIHRpbWVsaW5lQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aW1lbGluZUNvbnRhaW5lci5jbGFzc05hbWUgPSBcImNlc2l1bS12aWV3ZXItdGltZWxpbmVDb250YWluZXJcIjtcbiAgICB2aWV3ZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGltZWxpbmVDb250YWluZXIpO1xuICAgIHRpbWVsaW5lID0gbmV3IFRpbWVsaW5lKHRpbWVsaW5lQ29udGFpbmVyLCBjbG9jayk7XG4gICAgdGltZWxpbmUuYWRkRXZlbnRMaXN0ZW5lcihcInNldHRpbWVcIiwgb25UaW1lbGluZVNjcnViZnVuY3Rpb24sIGZhbHNlKTtcbiAgICB0aW1lbGluZS56b29tVG8oY2xvY2suc3RhcnRUaW1lLCBjbG9jay5zdG9wVGltZSk7XG4gIH1cblxuICAvLyBGdWxsc2NyZWVuXG4gIHZhciBmdWxsc2NyZWVuQnV0dG9uO1xuICB2YXIgZnVsbHNjcmVlblN1YnNjcmlwdGlvbjtcbiAgdmFyIGZ1bGxzY3JlZW5Db250YWluZXI7XG4gIGlmIChcbiAgICAhZGVmaW5lZChvcHRpb25zLmZ1bGxzY3JlZW5CdXR0b24pIHx8XG4gICAgb3B0aW9ucy5mdWxsc2NyZWVuQnV0dG9uICE9PSBmYWxzZVxuICApIHtcbiAgICBmdWxsc2NyZWVuQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBmdWxsc2NyZWVuQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY2VzaXVtLXZpZXdlci1mdWxsc2NyZWVuQ29udGFpbmVyXCI7XG4gICAgdmlld2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZ1bGxzY3JlZW5Db250YWluZXIpO1xuICAgIGZ1bGxzY3JlZW5CdXR0b24gPSBuZXcgRnVsbHNjcmVlbkJ1dHRvbihcbiAgICAgIGZ1bGxzY3JlZW5Db250YWluZXIsXG4gICAgICBvcHRpb25zLmZ1bGxzY3JlZW5FbGVtZW50XG4gICAgKTtcblxuICAgIC8vU3Vic2NyaWJlIHRvIGZ1bGxzY3JlZW5CdXR0b24udmlld01vZGVsLmlzRnVsbHNjcmVlbkVuYWJsZWQgc29cbiAgICAvL3RoYXQgd2UgY2FuIGhpZGUvc2hvdyB0aGUgYnV0dG9uIGFzIHdlbGwgYXMgc2l6ZSB0aGUgdGltZWxpbmUuXG4gICAgZnVsbHNjcmVlblN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZUFuZEV2YWx1YXRlKFxuICAgICAgZnVsbHNjcmVlbkJ1dHRvbi52aWV3TW9kZWwsXG4gICAgICBcImlzRnVsbHNjcmVlbkVuYWJsZWRcIixcbiAgICAgIGZ1bmN0aW9uIChpc0Z1bGxzY3JlZW5FbmFibGVkKSB7XG4gICAgICAgIGZ1bGxzY3JlZW5Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IGlzRnVsbHNjcmVlbkVuYWJsZWRcbiAgICAgICAgICA/IFwiYmxvY2tcIlxuICAgICAgICAgIDogXCJub25lXCI7XG4gICAgICAgIGlmIChkZWZpbmVkKHRpbWVsaW5lKSkge1xuICAgICAgICAgIHRpbWVsaW5lLmNvbnRhaW5lci5zdHlsZS5yaWdodCA9XG4gICAgICAgICAgICBmdWxsc2NyZWVuQ29udGFpbmVyLmNsaWVudFdpZHRoICsgXCJweFwiO1xuICAgICAgICAgIHRpbWVsaW5lLnJlc2l6ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8vIFZSXG4gIHZhciB2ckJ1dHRvbjtcbiAgdmFyIHZyU3Vic2NyaXB0aW9uO1xuICB2YXIgdnJNb2RlU3Vic2NyaXB0aW9uO1xuICBpZiAob3B0aW9ucy52ckJ1dHRvbikge1xuICAgIHZhciB2ckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdnJDb250YWluZXIuY2xhc3NOYW1lID0gXCJjZXNpdW0tdmlld2VyLXZyQ29udGFpbmVyXCI7XG4gICAgdmlld2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKHZyQ29udGFpbmVyKTtcbiAgICB2ckJ1dHRvbiA9IG5ldyBWUkJ1dHRvbih2ckNvbnRhaW5lciwgc2NlbmUsIG9wdGlvbnMuZnVsbFNjcmVlbkVsZW1lbnQpO1xuXG4gICAgdnJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVBbmRFdmFsdWF0ZShcbiAgICAgIHZyQnV0dG9uLnZpZXdNb2RlbCxcbiAgICAgIFwiaXNWUkVuYWJsZWRcIixcbiAgICAgIGZ1bmN0aW9uIChpc1ZSRW5hYmxlZCkge1xuICAgICAgICB2ckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNWUkVuYWJsZWQgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcbiAgICAgICAgaWYgKGRlZmluZWQoZnVsbHNjcmVlbkJ1dHRvbikpIHtcbiAgICAgICAgICB2ckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IGZ1bGxzY3JlZW5Db250YWluZXIuY2xpZW50V2lkdGggKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluZWQodGltZWxpbmUpKSB7XG4gICAgICAgICAgdGltZWxpbmUuY29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gdnJDb250YWluZXIuY2xpZW50V2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgdGltZWxpbmUucmVzaXplKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuXG4gICAgdnJNb2RlU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlQW5kRXZhbHVhdGUoXG4gICAgICB2ckJ1dHRvbi52aWV3TW9kZWwsXG4gICAgICBcImlzVlJNb2RlXCIsXG4gICAgICBmdW5jdGlvbiAoaXNWUk1vZGUpIHtcbiAgICAgICAgZW5hYmxlVlJVSSh0aGF0LCBpc1ZSTW9kZSk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8vQXNzaWduIGFsbCBwcm9wZXJ0aWVzIHRvIHRoaXMgaW5zdGFuY2UuICBObyBcInRoaXNcIiBhc3NpZ25tZW50cyBzaG91bGRcbiAgLy90YWtlIHBsYWNlIGFib3ZlIHRoaXMgbGluZS5cbiAgdGhpcy5fYmFzZUxheWVyUGlja2VyRHJvcERvd24gPSBiYXNlTGF5ZXJQaWNrZXJEcm9wRG93bjtcbiAgdGhpcy5fZnVsbHNjcmVlblN1YnNjcmlwdGlvbiA9IGZ1bGxzY3JlZW5TdWJzY3JpcHRpb247XG4gIHRoaXMuX3ZyU3Vic2NyaXB0aW9uID0gdnJTdWJzY3JpcHRpb247XG4gIHRoaXMuX3ZyTW9kZVN1YnNjcmlwdGlvbiA9IHZyTW9kZVN1YnNjcmlwdGlvbjtcbiAgdGhpcy5fZGF0YVNvdXJjZUNoYW5nZWRMaXN0ZW5lcnMgPSB7fTtcbiAgdGhpcy5fYXV0b21hdGljYWxseVRyYWNrRGF0YVNvdXJjZUNsb2NrcyA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmF1dG9tYXRpY2FsbHlUcmFja0RhdGFTb3VyY2VDbG9ja3MsXG4gICAgdHJ1ZVxuICApO1xuICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gIHRoaXMuX2JvdHRvbUNvbnRhaW5lciA9IGJvdHRvbUNvbnRhaW5lcjtcbiAgdGhpcy5fZWxlbWVudCA9IHZpZXdlckNvbnRhaW5lcjtcbiAgdGhpcy5fY2VzaXVtV2lkZ2V0ID0gY2VzaXVtV2lkZ2V0O1xuICB0aGlzLl9zZWxlY3Rpb25JbmRpY2F0b3IgPSBzZWxlY3Rpb25JbmRpY2F0b3I7XG4gIHRoaXMuX2luZm9Cb3ggPSBpbmZvQm94O1xuICB0aGlzLl9kYXRhU291cmNlQ29sbGVjdGlvbiA9IGRhdGFTb3VyY2VDb2xsZWN0aW9uO1xuICB0aGlzLl9kZXN0cm95RGF0YVNvdXJjZUNvbGxlY3Rpb24gPSBkZXN0cm95RGF0YVNvdXJjZUNvbGxlY3Rpb247XG4gIHRoaXMuX2RhdGFTb3VyY2VEaXNwbGF5ID0gZGF0YVNvdXJjZURpc3BsYXk7XG4gIHRoaXMuX2Nsb2NrVmlld01vZGVsID0gY2xvY2tWaWV3TW9kZWw7XG4gIHRoaXMuX2Rlc3Ryb3lDbG9ja1ZpZXdNb2RlbCA9IGRlc3Ryb3lDbG9ja1ZpZXdNb2RlbDtcbiAgdGhpcy5fdG9vbGJhciA9IHRvb2xiYXI7XG4gIHRoaXMuX2hvbWVCdXR0b24gPSBob21lQnV0dG9uO1xuICB0aGlzLl9zY2VuZU1vZGVQaWNrZXIgPSBzY2VuZU1vZGVQaWNrZXI7XG4gIHRoaXMuX3Byb2plY3Rpb25QaWNrZXIgPSBwcm9qZWN0aW9uUGlja2VyO1xuICB0aGlzLl9iYXNlTGF5ZXJQaWNrZXIgPSBiYXNlTGF5ZXJQaWNrZXI7XG4gIHRoaXMuX25hdmlnYXRpb25IZWxwQnV0dG9uID0gbmF2aWdhdGlvbkhlbHBCdXR0b247XG4gIHRoaXMuX2FuaW1hdGlvbiA9IGFuaW1hdGlvbjtcbiAgdGhpcy5fdGltZWxpbmUgPSB0aW1lbGluZTtcbiAgdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbiA9IGZ1bGxzY3JlZW5CdXR0b247XG4gIHRoaXMuX3ZyQnV0dG9uID0gdnJCdXR0b247XG4gIHRoaXMuX2dlb2NvZGVyID0gZ2VvY29kZXI7XG4gIHRoaXMuX2V2ZW50SGVscGVyID0gZXZlbnRIZWxwZXI7XG4gIHRoaXMuX2xhc3RXaWR0aCA9IDA7XG4gIHRoaXMuX2xhc3RIZWlnaHQgPSAwO1xuICB0aGlzLl9hbGxvd0RhdGFTb3VyY2VzVG9TdXNwZW5kQW5pbWF0aW9uID0gdHJ1ZTtcbiAgdGhpcy5fZW50aXR5VmlldyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZW5hYmxlSW5mb09yU2VsZWN0aW9uID0gZGVmaW5lZChpbmZvQm94KSB8fCBkZWZpbmVkKHNlbGVjdGlvbkluZGljYXRvcik7XG4gIHRoaXMuX2Nsb2NrVHJhY2tlZERhdGFTb3VyY2UgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3RyYWNrZWRFbnRpdHkgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX25lZWRUcmFja2VkRW50aXR5VXBkYXRlID0gZmFsc2U7XG4gIHRoaXMuX3NlbGVjdGVkRW50aXR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9jbG9ja1RyYWNrZWREYXRhU291cmNlID0gdW5kZWZpbmVkO1xuICB0aGlzLl96b29tSXNGbGlnaHQgPSBmYWxzZTtcbiAgdGhpcy5fem9vbVRhcmdldCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fem9vbVByb21pc2UgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3pvb21PcHRpb25zID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zZWxlY3RlZEVudGl0eUNoYW5nZWQgPSBuZXcgRXZlbnQoKTtcbiAgdGhpcy5fdHJhY2tlZEVudGl0eUNoYW5nZWQgPSBuZXcgRXZlbnQoKTtcblxuICBrbm9ja291dC50cmFjayh0aGlzLCBbXG4gICAgXCJfdHJhY2tlZEVudGl0eVwiLFxuICAgIFwiX3NlbGVjdGVkRW50aXR5XCIsXG4gICAgXCJfY2xvY2tUcmFja2VkRGF0YVNvdXJjZVwiLFxuICBdKTtcblxuICAvL0xpc3RlbiB0byBkYXRhIHNvdXJjZSBldmVudHMgaW4gb3JkZXIgdG8gdHJhY2sgY2xvY2sgY2hhbmdlcy5cbiAgZXZlbnRIZWxwZXIuYWRkKFxuICAgIGRhdGFTb3VyY2VDb2xsZWN0aW9uLmRhdGFTb3VyY2VBZGRlZCxcbiAgICBWaWV3ZXIucHJvdG90eXBlLl9vbkRhdGFTb3VyY2VBZGRlZCxcbiAgICB0aGlzXG4gICk7XG4gIGV2ZW50SGVscGVyLmFkZChcbiAgICBkYXRhU291cmNlQ29sbGVjdGlvbi5kYXRhU291cmNlUmVtb3ZlZCxcbiAgICBWaWV3ZXIucHJvdG90eXBlLl9vbkRhdGFTb3VyY2VSZW1vdmVkLFxuICAgIHRoaXNcbiAgKTtcblxuICAvLyBQcmlvciB0byBlYWNoIHJlbmRlciwgY2hlY2sgaWYgYW55dGhpbmcgbmVlZHMgdG8gYmUgcmVzaXplZC5cbiAgZXZlbnRIZWxwZXIuYWRkKHNjZW5lLnBvc3RVcGRhdGUsIFZpZXdlci5wcm90b3R5cGUucmVzaXplLCB0aGlzKTtcbiAgZXZlbnRIZWxwZXIuYWRkKHNjZW5lLnBvc3RSZW5kZXIsIFZpZXdlci5wcm90b3R5cGUuX3Bvc3RSZW5kZXIsIHRoaXMpO1xuXG4gIC8vIFdlIG5lZWQgdG8gc3Vic2NyaWJlIHRvIHRoZSBkYXRhIHNvdXJjZXMgYW5kIGNvbGxlY3Rpb25zIHNvIHRoYXQgd2UgY2FuIGNsZWFyIHRoZVxuICAvLyB0cmFja2VkIG9iamVjdCB3aGVuIGl0IGlzIHJlbW92ZWQgZnJvbSB0aGUgc2NlbmUuXG4gIC8vIFN1YnNjcmliZSB0byBjdXJyZW50IGRhdGEgc291cmNlc1xuICB2YXIgZGF0YVNvdXJjZUxlbmd0aCA9IGRhdGFTb3VyY2VDb2xsZWN0aW9uLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhU291cmNlTGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLl9kYXRhU291cmNlQWRkZWQoZGF0YVNvdXJjZUNvbGxlY3Rpb24sIGRhdGFTb3VyY2VDb2xsZWN0aW9uLmdldChpKSk7XG4gIH1cbiAgdGhpcy5fZGF0YVNvdXJjZUFkZGVkKHVuZGVmaW5lZCwgZGF0YVNvdXJjZURpc3BsYXkuZGVmYXVsdERhdGFTb3VyY2UpO1xuXG4gIC8vIEhvb2sgdXAgZXZlbnRzIHNvIHRoYXQgd2UgY2FuIHN1YnNjcmliZSB0byBmdXR1cmUgc291cmNlcy5cbiAgZXZlbnRIZWxwZXIuYWRkKFxuICAgIGRhdGFTb3VyY2VDb2xsZWN0aW9uLmRhdGFTb3VyY2VBZGRlZCxcbiAgICBWaWV3ZXIucHJvdG90eXBlLl9kYXRhU291cmNlQWRkZWQsXG4gICAgdGhpc1xuICApO1xuICBldmVudEhlbHBlci5hZGQoXG4gICAgZGF0YVNvdXJjZUNvbGxlY3Rpb24uZGF0YVNvdXJjZVJlbW92ZWQsXG4gICAgVmlld2VyLnByb3RvdHlwZS5fZGF0YVNvdXJjZVJlbW92ZWQsXG4gICAgdGhpc1xuICApO1xuXG4gIC8vIFN1YnNjcmliZSB0byBsZWZ0IGNsaWNrcyBhbmQgem9vbSB0byB0aGUgcGlja2VkIG9iamVjdC5cbiAgZnVuY3Rpb24gcGlja0FuZFRyYWNrT2JqZWN0KGUpIHtcbiAgICB2YXIgZW50aXR5ID0gcGlja0VudGl0eSh0aGF0LCBlKTtcbiAgICBpZiAoZGVmaW5lZChlbnRpdHkpKSB7XG4gICAgICAvL09ubHkgdHJhY2sgdGhlIGVudGl0eSBpZiBpdCBoYXMgYSB2YWxpZCBwb3NpdGlvbiBhdCB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgaWYgKFxuICAgICAgICBQcm9wZXJ0eS5nZXRWYWx1ZU9yVW5kZWZpbmVkKGVudGl0eS5wb3NpdGlvbiwgdGhhdC5jbG9jay5jdXJyZW50VGltZSlcbiAgICAgICkge1xuICAgICAgICB0aGF0LnRyYWNrZWRFbnRpdHkgPSBlbnRpdHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGF0Lnpvb21UbyhlbnRpdHkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGVmaW5lZCh0aGF0LnRyYWNrZWRFbnRpdHkpKSB7XG4gICAgICB0aGF0LnRyYWNrZWRFbnRpdHkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGlja0FuZFNlbGVjdE9iamVjdChlKSB7XG4gICAgdGhhdC5zZWxlY3RlZEVudGl0eSA9IHBpY2tFbnRpdHkodGhhdCwgZSk7XG4gIH1cblxuICBjZXNpdW1XaWRnZXQuc2NyZWVuU3BhY2VFdmVudEhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oXG4gICAgcGlja0FuZFNlbGVjdE9iamVjdCxcbiAgICBTY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0NMSUNLXG4gICk7XG4gIGNlc2l1bVdpZGdldC5zY3JlZW5TcGFjZUV2ZW50SGFuZGxlci5zZXRJbnB1dEFjdGlvbihcbiAgICBwaWNrQW5kVHJhY2tPYmplY3QsXG4gICAgU2NyZWVuU3BhY2VFdmVudFR5cGUuTEVGVF9ET1VCTEVfQ0xJQ0tcbiAgKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVmlld2VyLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyB0aGUgcGFyZW50IGNvbnRhaW5lci5cbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0VsZW1lbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgY29udGFpbmVyOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIERPTSBlbGVtZW50IGZvciB0aGUgYXJlYSBhdCB0aGUgYm90dG9tIG9mIHRoZSB3aW5kb3cgY29udGFpbmluZyB0aGVcbiAgICoge0BsaW5rIENyZWRpdERpc3BsYXl9IGFuZCBwb3RlbnRpYWxseSBvdGhlciB0aGluZ3MuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFbGVtZW50fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGJvdHRvbUNvbnRhaW5lcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2JvdHRvbUNvbnRhaW5lcjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBDZXNpdW1XaWRnZXQuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtDZXNpdW1XaWRnZXR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgY2VzaXVtV2lkZ2V0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2VzaXVtV2lkZ2V0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHNlbGVjdGlvbiBpbmRpY2F0b3IuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTZWxlY3Rpb25JbmRpY2F0b3J9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgc2VsZWN0aW9uSW5kaWNhdG9yOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VsZWN0aW9uSW5kaWNhdG9yO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGluZm8gYm94LlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7SW5mb0JveH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpbmZvQm94OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faW5mb0JveDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBHZW9jb2Rlci5cbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0dlb2NvZGVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGdlb2NvZGVyOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2VvY29kZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgSG9tZUJ1dHRvbi5cbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0hvbWVCdXR0b259XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaG9tZUJ1dHRvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2hvbWVCdXR0b247XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgU2NlbmVNb2RlUGlja2VyLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U2NlbmVNb2RlUGlja2VyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHNjZW5lTW9kZVBpY2tlcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lTW9kZVBpY2tlcjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBQcm9qZWN0aW9uUGlja2VyLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvamVjdGlvblBpY2tlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBwcm9qZWN0aW9uUGlja2VyOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvamVjdGlvblBpY2tlcjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBCYXNlTGF5ZXJQaWNrZXIuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCYXNlTGF5ZXJQaWNrZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgYmFzZUxheWVyUGlja2VyOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYmFzZUxheWVyUGlja2VyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIE5hdmlnYXRpb25IZWxwQnV0dG9uLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TmF2aWdhdGlvbkhlbHBCdXR0b259XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgbmF2aWdhdGlvbkhlbHBCdXR0b246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9uYXZpZ2F0aW9uSGVscEJ1dHRvbjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBBbmltYXRpb24gd2lkZ2V0LlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7QW5pbWF0aW9ufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGFuaW1hdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FuaW1hdGlvbjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBUaW1lbGluZSB3aWRnZXQuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtUaW1lbGluZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aW1lbGluZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbWVsaW5lO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIEZ1bGxzY3JlZW5CdXR0b24uXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtGdWxsc2NyZWVuQnV0dG9ufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGZ1bGxzY3JlZW5CdXR0b246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9mdWxsc2NyZWVuQnV0dG9uO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIFZSQnV0dG9uLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7VlJCdXR0b259XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdnJCdXR0b246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl92ckJ1dHRvbjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkaXNwbGF5IHVzZWQgZm9yIHtAbGluayBEYXRhU291cmNlfSB2aXN1YWxpemF0aW9uLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RGF0YVNvdXJjZURpc3BsYXl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZGF0YVNvdXJjZURpc3BsYXk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhU291cmNlRGlzcGxheTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb2xsZWN0aW9uIG9mIGVudGl0aWVzIG5vdCB0aWVkIHRvIGEgcGFydGljdWxhciBkYXRhIHNvdXJjZS5cbiAgICogVGhpcyBpcyBhIHNob3J0Y3V0IHRvIFtkYXRhU291cmNlRGlzcGxheS5kZWZhdWx0RGF0YVNvdXJjZS5lbnRpdGllc117QGxpbmsgVmlld2VyI2RhdGFTb3VyY2VEaXNwbGF5fS5cbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0VudGl0eUNvbGxlY3Rpb259XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZW50aXRpZXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhU291cmNlRGlzcGxheS5kZWZhdWx0RGF0YVNvdXJjZS5lbnRpdGllcztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzZXQgb2Yge0BsaW5rIERhdGFTb3VyY2V9IGluc3RhbmNlcyB0byBiZSB2aXN1YWxpemVkLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RGF0YVNvdXJjZUNvbGxlY3Rpb259XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZGF0YVNvdXJjZXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhU291cmNlQ29sbGVjdGlvbjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjYW52YXMuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjYW52YXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jZXNpdW1XaWRnZXQuY2FudmFzO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHNjZW5lLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U2NlbmV9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgc2NlbmU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jZXNpdW1XaWRnZXQuc2NlbmU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBzaGFkb3dzIGFyZSBjYXN0IGJ5IGxpZ2h0IHNvdXJjZXMuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgc2hhZG93czoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuc2hhZG93TWFwLmVuYWJsZWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5zY2VuZS5zaGFkb3dNYXAuZW5hYmxlZCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIHRlcnJhaW4gY2FzdHMgb3Igc2hhZG93cyBmcm9tIGxpZ2h0IHNvdXJjZXMuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTaGFkb3dNb2RlfVxuICAgKi9cbiAgdGVycmFpblNoYWRvd3M6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjZW5lLmdsb2JlLnNoYWRvd3M7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5zY2VuZS5nbG9iZS5zaGFkb3dzID0gdmFsdWU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzY2VuZSdzIHNoYWRvdyBtYXBcbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1NoYWRvd01hcH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBzaGFkb3dNYXA6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjZW5lLnNoYWRvd01hcDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb2xsZWN0aW9uIG9mIGltYWdlIGxheWVycyB0aGF0IHdpbGwgYmUgcmVuZGVyZWQgb24gdGhlIGdsb2JlLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7SW1hZ2VyeUxheWVyQ29sbGVjdGlvbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpbWFnZXJ5TGF5ZXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2VuZS5pbWFnZXJ5TGF5ZXJzO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSB0ZXJyYWluIHByb3ZpZGVyIHByb3ZpZGluZyBzdXJmYWNlIGdlb21ldHJ5IGZvciB0aGUgZ2xvYmUuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtUZXJyYWluUHJvdmlkZXJ9XG4gICAqL1xuICB0ZXJyYWluUHJvdmlkZXI6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjZW5lLnRlcnJhaW5Qcm92aWRlcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHRlcnJhaW5Qcm92aWRlcikge1xuICAgICAgdGhpcy5zY2VuZS50ZXJyYWluUHJvdmlkZXIgPSB0ZXJyYWluUHJvdmlkZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY2FtZXJhLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Q2FtZXJhfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGNhbWVyYToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2NlbmUuY2FtZXJhO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHBvc3QtcHJvY2VzcyBzdGFnZXMuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtQb3N0UHJvY2Vzc1N0YWdlQ29sbGVjdGlvbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBwb3N0UHJvY2Vzc1N0YWdlczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2NlbmUucG9zdFByb2Nlc3NTdGFnZXM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY2xvY2suXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtDbG9ja31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjbG9jazoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Nsb2NrVmlld01vZGVsLmNsb2NrO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNsb2NrIHZpZXcgbW9kZWwuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtDbG9ja1ZpZXdNb2RlbH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjbG9ja1ZpZXdNb2RlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Nsb2NrVmlld01vZGVsO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHNjcmVlbiBzcGFjZSBldmVudCBoYW5kbGVyLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U2NyZWVuU3BhY2VFdmVudEhhbmRsZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgc2NyZWVuU3BhY2VFdmVudEhhbmRsZXI6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jZXNpdW1XaWRnZXQuc2NyZWVuU3BhY2VFdmVudEhhbmRsZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSB0YXJnZXQgZnJhbWUgcmF0ZSBvZiB0aGUgd2lkZ2V0IHdoZW4gPGNvZGU+dXNlRGVmYXVsdFJlbmRlckxvb3A8L2NvZGU+XG4gICAqIGlzIHRydWUuIElmIHVuZGVmaW5lZCwgdGhlIGJyb3dzZXIncyB7QGxpbmsgcmVxdWVzdEFuaW1hdGlvbkZyYW1lfSBpbXBsZW1lbnRhdGlvblxuICAgKiBkZXRlcm1pbmVzIHRoZSBmcmFtZSByYXRlLiAgSWYgZGVmaW5lZCwgdGhpcyB2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwLiAgQSB2YWx1ZSBoaWdoZXJcbiAgICogdGhhbiB0aGUgdW5kZXJseWluZyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgaW1wbGVtZW50YXRpb24gd2lsbCBoYXZlIG5vIGVmZmVjdC5cbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRhcmdldEZyYW1lUmF0ZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Nlc2l1bVdpZGdldC50YXJnZXRGcmFtZVJhdGU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fY2VzaXVtV2lkZ2V0LnRhcmdldEZyYW1lUmF0ZSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB3aGV0aGVyIG9yIG5vdCB0aGlzIHdpZGdldCBzaG91bGQgY29udHJvbCB0aGUgcmVuZGVyIGxvb3AuXG4gICAqIElmIHNldCB0byB0cnVlIHRoZSB3aWRnZXQgd2lsbCB1c2Uge0BsaW5rIHJlcXVlc3RBbmltYXRpb25GcmFtZX0gdG9cbiAgICogcGVyZm9ybSByZW5kZXJpbmcgYW5kIHJlc2l6aW5nIG9mIHRoZSB3aWRnZXQsIGFzIHdlbGwgYXMgZHJpdmUgdGhlXG4gICAqIHNpbXVsYXRpb24gY2xvY2suIElmIHNldCB0byBmYWxzZSwgeW91IG11c3QgbWFudWFsbHkgY2FsbCB0aGVcbiAgICogPGNvZGU+cmVzaXplPC9jb2RlPiwgPGNvZGU+cmVuZGVyPC9jb2RlPiBtZXRob2RzXG4gICAqIGFzIHBhcnQgb2YgYSBjdXN0b20gcmVuZGVyIGxvb3AuICBJZiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIHJlbmRlcmluZywge0BsaW5rIFNjZW5lfSdzXG4gICAqIDxjb2RlPnJlbmRlckVycm9yPC9jb2RlPiBldmVudCB3aWxsIGJlIHJhaXNlZCBhbmQgdGhpcyBwcm9wZXJ0eVxuICAgKiB3aWxsIGJlIHNldCB0byBmYWxzZS4gIEl0IG11c3QgYmUgc2V0IGJhY2sgdG8gdHJ1ZSB0byBjb250aW51ZSByZW5kZXJpbmdcbiAgICogYWZ0ZXIgdGhlIGVycm9yLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIHVzZURlZmF1bHRSZW5kZXJMb29wOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2VzaXVtV2lkZ2V0LnVzZURlZmF1bHRSZW5kZXJMb29wO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMuX2Nlc2l1bVdpZGdldC51c2VEZWZhdWx0UmVuZGVyTG9vcCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyBhIHNjYWxpbmcgZmFjdG9yIGZvciByZW5kZXJpbmcgcmVzb2x1dGlvbi4gIFZhbHVlcyBsZXNzIHRoYW4gMS4wIGNhbiBpbXByb3ZlXG4gICAqIHBlcmZvcm1hbmNlIG9uIGxlc3MgcG93ZXJmdWwgZGV2aWNlcyB3aGlsZSB2YWx1ZXMgZ3JlYXRlciB0aGFuIDEuMCB3aWxsIHJlbmRlciBhdCBhIGhpZ2hlclxuICAgKiByZXNvbHV0aW9uIGFuZCB0aGVuIHNjYWxlIGRvd24sIHJlc3VsdGluZyBpbiBpbXByb3ZlZCB2aXN1YWwgZmlkZWxpdHkuXG4gICAqIEZvciBleGFtcGxlLCBpZiB0aGUgd2lkZ2V0IGlzIGxhaWQgb3V0IGF0IGEgc2l6ZSBvZiA2NDB4NDgwLCBzZXR0aW5nIHRoaXMgdmFsdWUgdG8gMC41XG4gICAqIHdpbGwgY2F1c2UgdGhlIHNjZW5lIHRvIGJlIHJlbmRlcmVkIGF0IDMyMHgyNDAgYW5kIHRoZW4gc2NhbGVkIHVwIHdoaWxlIHNldHRpbmdcbiAgICogaXQgdG8gMi4wIHdpbGwgY2F1c2UgdGhlIHNjZW5lIHRvIGJlIHJlbmRlcmVkIGF0IDEyODB4OTYwIGFuZCB0aGVuIHNjYWxlZCBkb3duLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAxLjBcbiAgICovXG4gIHJlc29sdXRpb25TY2FsZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Nlc2l1bVdpZGdldC5yZXNvbHV0aW9uU2NhbGU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fY2VzaXVtV2lkZ2V0LnJlc29sdXRpb25TY2FsZSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEJvb2xlYW4gZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBicm93c2VyJ3MgcmVjb21tZW5kZWQgcmVzb2x1dGlvbiBpcyB1c2VkLlxuICAgKiBJZiB0cnVlLCB0aGUgYnJvd3NlcidzIGRldmljZSBwaXhlbCByYXRpbyBpcyBpZ25vcmVkIGFuZCAxLjAgaXMgdXNlZCBpbnN0ZWFkLFxuICAgKiBlZmZlY3RpdmVseSByZW5kZXJpbmcgYmFzZWQgb24gQ1NTIHBpeGVscyBpbnN0ZWFkIG9mIGRldmljZSBwaXhlbHMuIFRoaXMgY2FuIGltcHJvdmVcbiAgICogcGVyZm9ybWFuY2Ugb24gbGVzcyBwb3dlcmZ1bCBkZXZpY2VzIHRoYXQgaGF2ZSBoaWdoIHBpeGVsIGRlbnNpdHkuIFdoZW4gZmFsc2UsIHJlbmRlcmluZ1xuICAgKiB3aWxsIGJlIGluIGRldmljZSBwaXhlbHMuIHtAbGluayBWaWV3ZXIjcmVzb2x1dGlvblNjYWxlfSB3aWxsIHN0aWxsIHRha2UgZWZmZWN0IHdoZXRoZXJcbiAgICogdGhpcyBmbGFnIGlzIHRydWUgb3IgZmFsc2UuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICB1c2VCcm93c2VyUmVjb21tZW5kZWRSZXNvbHV0aW9uOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2VzaXVtV2lkZ2V0LnVzZUJyb3dzZXJSZWNvbW1lbmRlZFJlc29sdXRpb247XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fY2VzaXVtV2lkZ2V0LnVzZUJyb3dzZXJSZWNvbW1lbmRlZFJlc29sdXRpb24gPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgd2hldGhlciBvciBub3QgZGF0YSBzb3VyY2VzIGNhbiB0ZW1wb3JhcmlseSBwYXVzZVxuICAgKiBhbmltYXRpb24gaW4gb3JkZXIgdG8gYXZvaWQgc2hvd2luZyBhbiBpbmNvbXBsZXRlIHBpY3R1cmUgdG8gdGhlIHVzZXIuXG4gICAqIEZvciBleGFtcGxlLCBpZiBhc3luY2hyb25vdXMgcHJpbWl0aXZlcyBhcmUgYmVpbmcgcHJvY2Vzc2VkIGluIHRoZVxuICAgKiBiYWNrZ3JvdW5kLCB0aGUgY2xvY2sgd2lsbCBub3QgYWR2YW5jZSB1bnRpbCB0aGUgZ2VvbWV0cnkgaXMgcmVhZHkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgYWxsb3dEYXRhU291cmNlc1RvU3VzcGVuZEFuaW1hdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FsbG93RGF0YVNvdXJjZXNUb1N1c3BlbmRBbmltYXRpb247XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fYWxsb3dEYXRhU291cmNlc1RvU3VzcGVuZEFuaW1hdGlvbiA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgRW50aXR5IGluc3RhbmNlIGN1cnJlbnRseSBiZWluZyB0cmFja2VkIGJ5IHRoZSBjYW1lcmEuXG4gICAqIEBtZW1iZXJvZiBWaWV3ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFbnRpdHkgfCB1bmRlZmluZWR9XG4gICAqL1xuICB0cmFja2VkRW50aXR5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdHJhY2tlZEVudGl0eTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5fdHJhY2tlZEVudGl0eSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdHJhY2tlZEVudGl0eSA9IHZhbHVlO1xuXG4gICAgICAgIC8vQ2FuY2VsIGFueSBwZW5kaW5nIHpvb21cbiAgICAgICAgY2FuY2VsWm9vbSh0aGlzKTtcblxuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xuICAgICAgICB2YXIgc2NlbmVNb2RlID0gc2NlbmUubW9kZTtcblxuICAgICAgICAvL1N0b3AgdHJhY2tpbmdcbiAgICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSB8fCAhZGVmaW5lZCh2YWx1ZS5wb3NpdGlvbikpIHtcbiAgICAgICAgICB0aGlzLl9uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNjZW5lTW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcgfHxcbiAgICAgICAgICAgIHNjZW5lTW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNjZW5lLnNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlci5lbmFibGVUcmFuc2xhdGUgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNjZW5lTW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcgfHxcbiAgICAgICAgICAgIHNjZW5lTW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0RcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNjZW5lLnNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlci5lbmFibGVUaWx0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl9lbnRpdHlWaWV3ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHRoaXMuY2FtZXJhLmxvb2tBdFRyYW5zZm9ybShNYXRyaXg0LklERU5USVRZKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL1dlIGNhbid0IHN0YXJ0IHRyYWNraW5nIGltbWVkaWF0ZWx5LCBzbyB3ZSBzZXQgYSBmbGFnIGFuZCBzdGFydCB0cmFja2luZ1xuICAgICAgICAgIC8vd2hlbiB0aGUgYm91bmRpbmcgc3BoZXJlIGlzIHJlYWR5IChtb3N0IGxpa2VseSBuZXh0IGZyYW1lKS5cbiAgICAgICAgICB0aGlzLl9uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90cmFja2VkRW50aXR5Q2hhbmdlZC5yYWlzZUV2ZW50KHZhbHVlKTtcbiAgICAgICAgdGhpcy5zY2VuZS5yZXF1ZXN0UmVuZGVyKCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgb2JqZWN0IGluc3RhbmNlIGZvciB3aGljaCB0byBkaXNwbGF5IGEgc2VsZWN0aW9uIGluZGljYXRvci5cbiAgICpcbiAgICogSWYgYSB1c2VyIGludGVyYWN0aXZlbHkgcGlja3MgYSBDZXNpdW0zRFRpbGVzRmVhdHVyZSBpbnN0YW5jZSwgdGhlbiB0aGlzIHByb3BlcnR5XG4gICAqIHdpbGwgY29udGFpbiBhIHRyYW5zaWVudCBFbnRpdHkgaW5zdGFuY2Ugd2l0aCBhIHByb3BlcnR5IG5hbWVkIFwiZmVhdHVyZVwiIHRoYXQgaXNcbiAgICogdGhlIGluc3RhbmNlIHRoYXQgd2FzIHBpY2tlZC5cbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0VudGl0eSB8IHVuZGVmaW5lZH1cbiAgICovXG4gIHNlbGVjdGVkRW50aXR5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRFbnRpdHk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkRW50aXR5ICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9zZWxlY3RlZEVudGl0eSA9IHZhbHVlO1xuICAgICAgICB2YXIgc2VsZWN0aW9uSW5kaWNhdG9yVmlld01vZGVsID0gZGVmaW5lZCh0aGlzLl9zZWxlY3Rpb25JbmRpY2F0b3IpXG4gICAgICAgICAgPyB0aGlzLl9zZWxlY3Rpb25JbmRpY2F0b3Iudmlld01vZGVsXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIGlmIChkZWZpbmVkKHNlbGVjdGlvbkluZGljYXRvclZpZXdNb2RlbCkpIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbkluZGljYXRvclZpZXdNb2RlbC5hbmltYXRlQXBwZWFyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRlZmluZWQoc2VsZWN0aW9uSW5kaWNhdG9yVmlld01vZGVsKSkge1xuICAgICAgICAgIC8vIExlYXZlIHRoZSBpbmZvIHRleHQgaW4gcGxhY2UgaGVyZSwgaXQgaXMgbmVlZGVkIGR1cmluZyB0aGUgZXhpdCBhbmltYXRpb24uXG4gICAgICAgICAgc2VsZWN0aW9uSW5kaWNhdG9yVmlld01vZGVsLmFuaW1hdGVEZXBhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZWxlY3RlZEVudGl0eUNoYW5nZWQucmFpc2VFdmVudCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gdGhlIHNlbGVjdGVkIGVudGl0eSBjaGFuZ2VzLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgc2VsZWN0ZWRFbnRpdHlDaGFuZ2VkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRFbnRpdHlDaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuIHRoZSB0cmFja2VkIGVudGl0eSBjaGFuZ2VzLlxuICAgKiBAbWVtYmVyb2YgVmlld2VyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdHJhY2tlZEVudGl0eUNoYW5nZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90cmFja2VkRW50aXR5Q2hhbmdlZDtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBkYXRhIHNvdXJjZSB0byB0cmFjayB3aXRoIHRoZSB2aWV3ZXIncyBjbG9jay5cbiAgICogQG1lbWJlcm9mIFZpZXdlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0RhdGFTb3VyY2V9XG4gICAqL1xuICBjbG9ja1RyYWNrZWREYXRhU291cmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xvY2tUcmFja2VkRGF0YVNvdXJjZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5fY2xvY2tUcmFja2VkRGF0YVNvdXJjZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY2xvY2tUcmFja2VkRGF0YVNvdXJjZSA9IHZhbHVlO1xuICAgICAgICB0cmFja0RhdGFTb3VyY2VDbG9jayh0aGlzLl90aW1lbGluZSwgdGhpcy5jbG9jaywgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBFeHRlbmRzIHRoZSBiYXNlIHZpZXdlciBmdW5jdGlvbmFsaXR5IHdpdGggdGhlIHByb3ZpZGVkIG1peGluLlxuICogQSBtaXhpbiBtYXkgYWRkIGFkZGl0aW9uYWwgcHJvcGVydGllcywgZnVuY3Rpb25zLCBvciBvdGhlciBiZWhhdmlvclxuICogdG8gdGhlIHByb3ZpZGVkIHZpZXdlciBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1ZpZXdlci5WaWV3ZXJNaXhpbn0gbWl4aW4gVGhlIFZpZXdlciBtaXhpbiB0byBhZGQgdG8gdGhpcyBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0IHRvIGJlIHBhc3NlZCB0byB0aGUgbWl4aW4gZnVuY3Rpb24uXG4gKlxuICogQHNlZSB2aWV3ZXJEcmFnRHJvcE1peGluXG4gKi9cblZpZXdlci5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKG1peGluLCBvcHRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChtaXhpbikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJtaXhpbiBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJylcblxuICBtaXhpbih0aGlzLCBvcHRpb25zKTtcbn07XG5cbi8qKlxuICogUmVzaXplcyB0aGUgd2lkZ2V0IHRvIG1hdGNoIHRoZSBjb250YWluZXIgc2l6ZS5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgYXMgbmVlZGVkIHVubGVzc1xuICogPGNvZGU+dXNlRGVmYXVsdFJlbmRlckxvb3A8L2NvZGU+IGlzIHNldCB0byBmYWxzZS5cbiAqL1xuVmlld2VyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjZXNpdW1XaWRnZXQgPSB0aGlzLl9jZXNpdW1XaWRnZXQ7XG4gIHZhciBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXI7XG4gIHZhciB3aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gIHZhciBhbmltYXRpb25FeGlzdHMgPSBkZWZpbmVkKHRoaXMuX2FuaW1hdGlvbik7XG4gIHZhciB0aW1lbGluZUV4aXN0cyA9IGRlZmluZWQodGhpcy5fdGltZWxpbmUpO1xuXG4gIGNlc2l1bVdpZGdldC5yZXNpemUoKTtcblxuICBpZiAod2lkdGggPT09IHRoaXMuX2xhc3RXaWR0aCAmJiBoZWlnaHQgPT09IHRoaXMuX2xhc3RIZWlnaHQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcGFuZWxNYXhIZWlnaHQgPSBoZWlnaHQgLSAxMjU7XG4gIHZhciBiYXNlTGF5ZXJQaWNrZXJEcm9wRG93biA9IHRoaXMuX2Jhc2VMYXllclBpY2tlckRyb3BEb3duO1xuXG4gIGlmIChkZWZpbmVkKGJhc2VMYXllclBpY2tlckRyb3BEb3duKSkge1xuICAgIGJhc2VMYXllclBpY2tlckRyb3BEb3duLnN0eWxlLm1heEhlaWdodCA9IHBhbmVsTWF4SGVpZ2h0ICsgXCJweFwiO1xuICB9XG5cbiAgaWYgKGRlZmluZWQodGhpcy5fZ2VvY29kZXIpKSB7XG4gICAgdmFyIGdlb2NvZGVyU3VnZ2VzdGlvbnMgPSB0aGlzLl9nZW9jb2Rlci5zZWFyY2hTdWdnZXN0aW9uc0NvbnRhaW5lcjtcbiAgICBnZW9jb2RlclN1Z2dlc3Rpb25zLnN0eWxlLm1heEhlaWdodCA9IHBhbmVsTWF4SGVpZ2h0ICsgXCJweFwiO1xuICB9XG5cbiAgaWYgKGRlZmluZWQodGhpcy5faW5mb0JveCkpIHtcbiAgICB0aGlzLl9pbmZvQm94LnZpZXdNb2RlbC5tYXhIZWlnaHQgPSBwYW5lbE1heEhlaWdodDtcbiAgfVxuXG4gIHZhciB0aW1lbGluZSA9IHRoaXMuX3RpbWVsaW5lO1xuICB2YXIgYW5pbWF0aW9uQ29udGFpbmVyO1xuICB2YXIgYW5pbWF0aW9uV2lkdGggPSAwO1xuICB2YXIgY3JlZGl0TGVmdCA9IDA7XG4gIHZhciBjcmVkaXRCb3R0b20gPSAwO1xuXG4gIGlmIChcbiAgICBhbmltYXRpb25FeGlzdHMgJiZcbiAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl9hbmltYXRpb24uY29udGFpbmVyKS52aXNpYmlsaXR5ICE9PSBcImhpZGRlblwiXG4gICkge1xuICAgIHZhciBsYXN0V2lkdGggPSB0aGlzLl9sYXN0V2lkdGg7XG4gICAgYW5pbWF0aW9uQ29udGFpbmVyID0gdGhpcy5fYW5pbWF0aW9uLmNvbnRhaW5lcjtcbiAgICBpZiAod2lkdGggPiA5MDApIHtcbiAgICAgIGFuaW1hdGlvbldpZHRoID0gMTY5O1xuICAgICAgaWYgKGxhc3RXaWR0aCA8PSA5MDApIHtcbiAgICAgICAgYW5pbWF0aW9uQ29udGFpbmVyLnN0eWxlLndpZHRoID0gXCIxNjlweFwiO1xuICAgICAgICBhbmltYXRpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCIxMTJweFwiO1xuICAgICAgICB0aGlzLl9hbmltYXRpb24ucmVzaXplKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh3aWR0aCA+PSA2MDApIHtcbiAgICAgIGFuaW1hdGlvbldpZHRoID0gMTM2O1xuICAgICAgaWYgKGxhc3RXaWR0aCA8IDYwMCB8fCBsYXN0V2lkdGggPiA5MDApIHtcbiAgICAgICAgYW5pbWF0aW9uQ29udGFpbmVyLnN0eWxlLndpZHRoID0gXCIxMzZweFwiO1xuICAgICAgICBhbmltYXRpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCI5MHB4XCI7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbi5yZXNpemUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYW5pbWF0aW9uV2lkdGggPSAxMDY7XG4gICAgICBpZiAobGFzdFdpZHRoID4gNjAwIHx8IGxhc3RXaWR0aCA9PT0gMCkge1xuICAgICAgICBhbmltYXRpb25Db250YWluZXIuc3R5bGUud2lkdGggPSBcIjEwNnB4XCI7XG4gICAgICAgIGFuaW1hdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBcIjcwcHhcIjtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uLnJlc2l6ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBjcmVkaXRMZWZ0ID0gYW5pbWF0aW9uV2lkdGggKyA1O1xuICB9XG5cbiAgaWYgKFxuICAgIHRpbWVsaW5lRXhpc3RzICYmXG4gICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGltZWxpbmUuY29udGFpbmVyKS52aXNpYmlsaXR5ICE9PSBcImhpZGRlblwiXG4gICkge1xuICAgIHZhciBmdWxsc2NyZWVuQnV0dG9uID0gdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbjtcbiAgICB2YXIgdnJCdXR0b24gPSB0aGlzLl92ckJ1dHRvbjtcbiAgICB2YXIgdGltZWxpbmVDb250YWluZXIgPSB0aW1lbGluZS5jb250YWluZXI7XG4gICAgdmFyIHRpbWVsaW5lU3R5bGUgPSB0aW1lbGluZUNvbnRhaW5lci5zdHlsZTtcblxuICAgIGNyZWRpdEJvdHRvbSA9IHRpbWVsaW5lQ29udGFpbmVyLmNsaWVudEhlaWdodCArIDM7XG4gICAgdGltZWxpbmVTdHlsZS5sZWZ0ID0gYW5pbWF0aW9uV2lkdGggKyBcInB4XCI7XG5cbiAgICB2YXIgcGl4ZWxzID0gMDtcbiAgICBpZiAoZGVmaW5lZChmdWxsc2NyZWVuQnV0dG9uKSkge1xuICAgICAgcGl4ZWxzICs9IGZ1bGxzY3JlZW5CdXR0b24uY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICBpZiAoZGVmaW5lZCh2ckJ1dHRvbikpIHtcbiAgICAgIHBpeGVscyArPSB2ckJ1dHRvbi5jb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgfVxuXG4gICAgdGltZWxpbmVTdHlsZS5yaWdodCA9IHBpeGVscyArIFwicHhcIjtcbiAgICB0aW1lbGluZS5yZXNpemUoKTtcbiAgfVxuXG4gIHRoaXMuX2JvdHRvbUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gY3JlZGl0TGVmdCArIFwicHhcIjtcbiAgdGhpcy5fYm90dG9tQ29udGFpbmVyLnN0eWxlLmJvdHRvbSA9IGNyZWRpdEJvdHRvbSArIFwicHhcIjtcblxuICB0aGlzLl9sYXN0V2lkdGggPSB3aWR0aDtcbiAgdGhpcy5fbGFzdEhlaWdodCA9IGhlaWdodDtcbn07XG5cbi8qKlxuICogVGhpcyBmb3JjZXMgdGhlIHdpZGdldCB0byByZS10aGluayBpdHMgbGF5b3V0LCBpbmNsdWRpbmdcbiAqIHdpZGdldCBzaXplcyBhbmQgY3JlZGl0IHBsYWNlbWVudC5cbiAqL1xuVmlld2VyLnByb3RvdHlwZS5mb3JjZVJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fbGFzdFdpZHRoID0gMDtcbiAgdGhpcy5yZXNpemUoKTtcbn07XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc2NlbmUuICBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5XG4gKiB1bmxlc3MgPGNvZGU+dXNlRGVmYXVsdFJlbmRlckxvb3A8L2NvZGU+IGlzIHNldCB0byBmYWxzZTtcbiAqL1xuVmlld2VyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2Nlc2l1bVdpZGdldC5yZW5kZXIoKTtcbn07XG5cbi8qKlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYmVlbiBkZXN0cm95ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuVmlld2VyLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgd2lkZ2V0LiAgU2hvdWxkIGJlIGNhbGxlZCBpZiBwZXJtYW5lbnRseVxuICogcmVtb3ZpbmcgdGhlIHdpZGdldCBmcm9tIGxheW91dC5cbiAqL1xuVmlld2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaTtcblxuICB0aGlzLnNjcmVlblNwYWNlRXZlbnRIYW5kbGVyLnJlbW92ZUlucHV0QWN0aW9uKFxuICAgIFNjcmVlblNwYWNlRXZlbnRUeXBlLkxFRlRfQ0xJQ0tcbiAgKTtcbiAgdGhpcy5zY3JlZW5TcGFjZUV2ZW50SGFuZGxlci5yZW1vdmVJbnB1dEFjdGlvbihcbiAgICBTY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0RPVUJMRV9DTElDS1xuICApO1xuXG4gIC8vIFVuc3Vic2NyaWJlIGZyb20gZGF0YSBzb3VyY2VzXG4gIHZhciBkYXRhU291cmNlcyA9IHRoaXMuZGF0YVNvdXJjZXM7XG4gIHZhciBkYXRhU291cmNlTGVuZ3RoID0gZGF0YVNvdXJjZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgZGF0YVNvdXJjZUxlbmd0aDsgaSsrKSB7XG4gICAgdGhpcy5fZGF0YVNvdXJjZVJlbW92ZWQoZGF0YVNvdXJjZXMsIGRhdGFTb3VyY2VzLmdldChpKSk7XG4gIH1cbiAgdGhpcy5fZGF0YVNvdXJjZVJlbW92ZWQodW5kZWZpbmVkLCB0aGlzLl9kYXRhU291cmNlRGlzcGxheS5kZWZhdWx0RGF0YVNvdXJjZSk7XG5cbiAgdGhpcy5fY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX2VsZW1lbnQpO1xuICB0aGlzLl9lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX3Rvb2xiYXIpO1xuXG4gIHRoaXMuX2V2ZW50SGVscGVyLnJlbW92ZUFsbCgpO1xuXG4gIGlmIChkZWZpbmVkKHRoaXMuX2dlb2NvZGVyKSkge1xuICAgIHRoaXMuX2dlb2NvZGVyID0gdGhpcy5fZ2VvY29kZXIuZGVzdHJveSgpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQodGhpcy5faG9tZUJ1dHRvbikpIHtcbiAgICB0aGlzLl9ob21lQnV0dG9uID0gdGhpcy5faG9tZUJ1dHRvbi5kZXN0cm95KCk7XG4gIH1cblxuICBpZiAoZGVmaW5lZCh0aGlzLl9zY2VuZU1vZGVQaWNrZXIpKSB7XG4gICAgdGhpcy5fc2NlbmVNb2RlUGlja2VyID0gdGhpcy5fc2NlbmVNb2RlUGlja2VyLmRlc3Ryb3koKTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHRoaXMuX3Byb2plY3Rpb25QaWNrZXIpKSB7XG4gICAgdGhpcy5fcHJvamVjdGlvblBpY2tlciA9IHRoaXMuX3Byb2plY3Rpb25QaWNrZXIuZGVzdHJveSgpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQodGhpcy5fYmFzZUxheWVyUGlja2VyKSkge1xuICAgIHRoaXMuX2Jhc2VMYXllclBpY2tlciA9IHRoaXMuX2Jhc2VMYXllclBpY2tlci5kZXN0cm95KCk7XG4gIH1cblxuICBpZiAoZGVmaW5lZCh0aGlzLl9hbmltYXRpb24pKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9hbmltYXRpb24uY29udGFpbmVyKTtcbiAgICB0aGlzLl9hbmltYXRpb24gPSB0aGlzLl9hbmltYXRpb24uZGVzdHJveSgpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQodGhpcy5fdGltZWxpbmUpKSB7XG4gICAgdGhpcy5fdGltZWxpbmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwic2V0dGltZVwiLFxuICAgICAgb25UaW1lbGluZVNjcnViZnVuY3Rpb24sXG4gICAgICBmYWxzZVxuICAgICk7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl90aW1lbGluZS5jb250YWluZXIpO1xuICAgIHRoaXMuX3RpbWVsaW5lID0gdGhpcy5fdGltZWxpbmUuZGVzdHJveSgpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQodGhpcy5fZnVsbHNjcmVlbkJ1dHRvbikpIHtcbiAgICB0aGlzLl9mdWxsc2NyZWVuU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX2Z1bGxzY3JlZW5CdXR0b24uY29udGFpbmVyKTtcbiAgICB0aGlzLl9mdWxsc2NyZWVuQnV0dG9uID0gdGhpcy5fZnVsbHNjcmVlbkJ1dHRvbi5kZXN0cm95KCk7XG4gIH1cblxuICBpZiAoZGVmaW5lZCh0aGlzLl92ckJ1dHRvbikpIHtcbiAgICB0aGlzLl92clN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgdGhpcy5fdnJNb2RlU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX3ZyQnV0dG9uLmNvbnRhaW5lcik7XG4gICAgdGhpcy5fdnJCdXR0b24gPSB0aGlzLl92ckJ1dHRvbi5kZXN0cm95KCk7XG4gIH1cblxuICBpZiAoZGVmaW5lZCh0aGlzLl9pbmZvQm94KSkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5faW5mb0JveC5jb250YWluZXIpO1xuICAgIHRoaXMuX2luZm9Cb3ggPSB0aGlzLl9pbmZvQm94LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHRoaXMuX3NlbGVjdGlvbkluZGljYXRvcikpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX3NlbGVjdGlvbkluZGljYXRvci5jb250YWluZXIpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkluZGljYXRvciA9IHRoaXMuX3NlbGVjdGlvbkluZGljYXRvci5kZXN0cm95KCk7XG4gIH1cblxuICBpZiAodGhpcy5fZGVzdHJveUNsb2NrVmlld01vZGVsKSB7XG4gICAgdGhpcy5fY2xvY2tWaWV3TW9kZWwgPSB0aGlzLl9jbG9ja1ZpZXdNb2RlbC5kZXN0cm95KCk7XG4gIH1cbiAgdGhpcy5fZGF0YVNvdXJjZURpc3BsYXkgPSB0aGlzLl9kYXRhU291cmNlRGlzcGxheS5kZXN0cm95KCk7XG4gIHRoaXMuX2Nlc2l1bVdpZGdldCA9IHRoaXMuX2Nlc2l1bVdpZGdldC5kZXN0cm95KCk7XG5cbiAgaWYgKHRoaXMuX2Rlc3Ryb3lEYXRhU291cmNlQ29sbGVjdGlvbikge1xuICAgIHRoaXMuX2RhdGFTb3VyY2VDb2xsZWN0aW9uID0gdGhpcy5fZGF0YVNvdXJjZUNvbGxlY3Rpb24uZGVzdHJveSgpO1xuICB9XG5cbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblZpZXdlci5wcm90b3R5cGUuX2RhdGFTb3VyY2VBZGRlZCA9IGZ1bmN0aW9uIChcbiAgZGF0YVNvdXJjZUNvbGxlY3Rpb24sXG4gIGRhdGFTb3VyY2Vcbikge1xuICB2YXIgZW50aXR5Q29sbGVjdGlvbiA9IGRhdGFTb3VyY2UuZW50aXRpZXM7XG4gIGVudGl0eUNvbGxlY3Rpb24uY29sbGVjdGlvbkNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBWaWV3ZXIucHJvdG90eXBlLl9vbkVudGl0eUNvbGxlY3Rpb25DaGFuZ2VkLFxuICAgIHRoaXNcbiAgKTtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVmlld2VyLnByb3RvdHlwZS5fZGF0YVNvdXJjZVJlbW92ZWQgPSBmdW5jdGlvbiAoXG4gIGRhdGFTb3VyY2VDb2xsZWN0aW9uLFxuICBkYXRhU291cmNlXG4pIHtcbiAgdmFyIGVudGl0eUNvbGxlY3Rpb24gPSBkYXRhU291cmNlLmVudGl0aWVzO1xuICBlbnRpdHlDb2xsZWN0aW9uLmNvbGxlY3Rpb25DaGFuZ2VkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgVmlld2VyLnByb3RvdHlwZS5fb25FbnRpdHlDb2xsZWN0aW9uQ2hhbmdlZCxcbiAgICB0aGlzXG4gICk7XG5cbiAgaWYgKGRlZmluZWQodGhpcy50cmFja2VkRW50aXR5KSkge1xuICAgIGlmIChcbiAgICAgIGVudGl0eUNvbGxlY3Rpb24uZ2V0QnlJZCh0aGlzLnRyYWNrZWRFbnRpdHkuaWQpID09PSB0aGlzLnRyYWNrZWRFbnRpdHlcbiAgICApIHtcbiAgICAgIHRoaXMudHJhY2tlZEVudGl0eSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBpZiAoZGVmaW5lZCh0aGlzLnNlbGVjdGVkRW50aXR5KSkge1xuICAgIGlmIChcbiAgICAgIGVudGl0eUNvbGxlY3Rpb24uZ2V0QnlJZCh0aGlzLnNlbGVjdGVkRW50aXR5LmlkKSA9PT0gdGhpcy5zZWxlY3RlZEVudGl0eVxuICAgICkge1xuICAgICAgdGhpcy5zZWxlY3RlZEVudGl0eSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVmlld2VyLnByb3RvdHlwZS5fb25UaWNrID0gZnVuY3Rpb24gKGNsb2NrKSB7XG4gIHZhciB0aW1lID0gY2xvY2suY3VycmVudFRpbWU7XG5cbiAgdmFyIGlzVXBkYXRlZCA9IHRoaXMuX2RhdGFTb3VyY2VEaXNwbGF5LnVwZGF0ZSh0aW1lKTtcbiAgaWYgKHRoaXMuX2FsbG93RGF0YVNvdXJjZXNUb1N1c3BlbmRBbmltYXRpb24pIHtcbiAgICB0aGlzLl9jbG9ja1ZpZXdNb2RlbC5jYW5BbmltYXRlID0gaXNVcGRhdGVkO1xuICB9XG5cbiAgdmFyIGVudGl0eVZpZXcgPSB0aGlzLl9lbnRpdHlWaWV3O1xuICBpZiAoZGVmaW5lZChlbnRpdHlWaWV3KSkge1xuICAgIHZhciB0cmFja2VkRW50aXR5ID0gdGhpcy5fdHJhY2tlZEVudGl0eTtcbiAgICB2YXIgdHJhY2tlZFN0YXRlID0gdGhpcy5fZGF0YVNvdXJjZURpc3BsYXkuZ2V0Qm91bmRpbmdTcGhlcmUoXG4gICAgICB0cmFja2VkRW50aXR5LFxuICAgICAgZmFsc2UsXG4gICAgICBib3VuZGluZ1NwaGVyZVNjcmF0Y2hcbiAgICApO1xuICAgIGlmICh0cmFja2VkU3RhdGUgPT09IEJvdW5kaW5nU3BoZXJlU3RhdGUuRE9ORSkge1xuICAgICAgZW50aXR5Vmlldy51cGRhdGUodGltZSwgYm91bmRpbmdTcGhlcmVTY3JhdGNoKTtcbiAgICB9XG4gIH1cblxuICB2YXIgcG9zaXRpb247XG4gIHZhciBlbmFibGVDYW1lcmEgPSBmYWxzZTtcbiAgdmFyIHNlbGVjdGVkRW50aXR5ID0gdGhpcy5zZWxlY3RlZEVudGl0eTtcbiAgdmFyIHNob3dTZWxlY3Rpb24gPSBkZWZpbmVkKHNlbGVjdGVkRW50aXR5KSAmJiB0aGlzLl9lbmFibGVJbmZvT3JTZWxlY3Rpb247XG5cbiAgaWYgKFxuICAgIHNob3dTZWxlY3Rpb24gJiZcbiAgICBzZWxlY3RlZEVudGl0eS5pc1Nob3dpbmcgJiZcbiAgICBzZWxlY3RlZEVudGl0eS5pc0F2YWlsYWJsZSh0aW1lKVxuICApIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLl9kYXRhU291cmNlRGlzcGxheS5nZXRCb3VuZGluZ1NwaGVyZShcbiAgICAgIHNlbGVjdGVkRW50aXR5LFxuICAgICAgdHJ1ZSxcbiAgICAgIGJvdW5kaW5nU3BoZXJlU2NyYXRjaFxuICAgICk7XG4gICAgaWYgKHN0YXRlICE9PSBCb3VuZGluZ1NwaGVyZVN0YXRlLkZBSUxFRCkge1xuICAgICAgcG9zaXRpb24gPSBib3VuZGluZ1NwaGVyZVNjcmF0Y2guY2VudGVyO1xuICAgIH0gZWxzZSBpZiAoZGVmaW5lZChzZWxlY3RlZEVudGl0eS5wb3NpdGlvbikpIHtcbiAgICAgIHBvc2l0aW9uID0gc2VsZWN0ZWRFbnRpdHkucG9zaXRpb24uZ2V0VmFsdWUodGltZSwgcG9zaXRpb24pO1xuICAgIH1cbiAgICBlbmFibGVDYW1lcmEgPSBkZWZpbmVkKHBvc2l0aW9uKTtcbiAgfVxuXG4gIHZhciBzZWxlY3Rpb25JbmRpY2F0b3JWaWV3TW9kZWwgPSBkZWZpbmVkKHRoaXMuX3NlbGVjdGlvbkluZGljYXRvcilcbiAgICA/IHRoaXMuX3NlbGVjdGlvbkluZGljYXRvci52aWV3TW9kZWxcbiAgICA6IHVuZGVmaW5lZDtcbiAgaWYgKGRlZmluZWQoc2VsZWN0aW9uSW5kaWNhdG9yVmlld01vZGVsKSkge1xuICAgIHNlbGVjdGlvbkluZGljYXRvclZpZXdNb2RlbC5wb3NpdGlvbiA9IENhcnRlc2lhbjMuY2xvbmUoXG4gICAgICBwb3NpdGlvbixcbiAgICAgIHNlbGVjdGlvbkluZGljYXRvclZpZXdNb2RlbC5wb3NpdGlvblxuICAgICk7XG4gICAgc2VsZWN0aW9uSW5kaWNhdG9yVmlld01vZGVsLnNob3dTZWxlY3Rpb24gPSBzaG93U2VsZWN0aW9uICYmIGVuYWJsZUNhbWVyYTtcbiAgICBzZWxlY3Rpb25JbmRpY2F0b3JWaWV3TW9kZWwudXBkYXRlKCk7XG4gIH1cblxuICB2YXIgaW5mb0JveFZpZXdNb2RlbCA9IGRlZmluZWQodGhpcy5faW5mb0JveClcbiAgICA/IHRoaXMuX2luZm9Cb3gudmlld01vZGVsXG4gICAgOiB1bmRlZmluZWQ7XG4gIGlmIChkZWZpbmVkKGluZm9Cb3hWaWV3TW9kZWwpKSB7XG4gICAgaW5mb0JveFZpZXdNb2RlbC5zaG93SW5mbyA9IHNob3dTZWxlY3Rpb247XG4gICAgaW5mb0JveFZpZXdNb2RlbC5lbmFibGVDYW1lcmEgPSBlbmFibGVDYW1lcmE7XG4gICAgaW5mb0JveFZpZXdNb2RlbC5pc0NhbWVyYVRyYWNraW5nID1cbiAgICAgIHRoaXMudHJhY2tlZEVudGl0eSA9PT0gdGhpcy5zZWxlY3RlZEVudGl0eTtcblxuICAgIGlmIChzaG93U2VsZWN0aW9uKSB7XG4gICAgICBpbmZvQm94Vmlld01vZGVsLnRpdGxlVGV4dCA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgc2VsZWN0ZWRFbnRpdHkubmFtZSxcbiAgICAgICAgc2VsZWN0ZWRFbnRpdHkuaWRcbiAgICAgICk7XG4gICAgICBpbmZvQm94Vmlld01vZGVsLmRlc2NyaXB0aW9uID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgIHNlbGVjdGVkRW50aXR5LmRlc2NyaXB0aW9uLFxuICAgICAgICB0aW1lLFxuICAgICAgICBcIlwiXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbmZvQm94Vmlld01vZGVsLnRpdGxlVGV4dCA9IFwiXCI7XG4gICAgICBpbmZvQm94Vmlld01vZGVsLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVmlld2VyLnByb3RvdHlwZS5fb25FbnRpdHlDb2xsZWN0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uIChcbiAgY29sbGVjdGlvbixcbiAgYWRkZWQsXG4gIHJlbW92ZWRcbikge1xuICB2YXIgbGVuZ3RoID0gcmVtb3ZlZC5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcmVtb3ZlZE9iamVjdCA9IHJlbW92ZWRbaV07XG4gICAgaWYgKHRoaXMudHJhY2tlZEVudGl0eSA9PT0gcmVtb3ZlZE9iamVjdCkge1xuICAgICAgdGhpcy50cmFja2VkRW50aXR5ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3RlZEVudGl0eSA9PT0gcmVtb3ZlZE9iamVjdCkge1xuICAgICAgdGhpcy5zZWxlY3RlZEVudGl0eSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVmlld2VyLnByb3RvdHlwZS5fb25JbmZvQm94Q2FtZXJhQ2xpY2tlZCA9IGZ1bmN0aW9uIChpbmZvQm94Vmlld01vZGVsKSB7XG4gIGlmIChcbiAgICBpbmZvQm94Vmlld01vZGVsLmlzQ2FtZXJhVHJhY2tpbmcgJiZcbiAgICB0aGlzLnRyYWNrZWRFbnRpdHkgPT09IHRoaXMuc2VsZWN0ZWRFbnRpdHlcbiAgKSB7XG4gICAgdGhpcy50cmFja2VkRW50aXR5ID0gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHZhciBzZWxlY3RlZEVudGl0eSA9IHRoaXMuc2VsZWN0ZWRFbnRpdHk7XG4gICAgdmFyIHBvc2l0aW9uID0gc2VsZWN0ZWRFbnRpdHkucG9zaXRpb247XG4gICAgaWYgKGRlZmluZWQocG9zaXRpb24pKSB7XG4gICAgICB0aGlzLnRyYWNrZWRFbnRpdHkgPSB0aGlzLnNlbGVjdGVkRW50aXR5O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnpvb21Ubyh0aGlzLnNlbGVjdGVkRW50aXR5KTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVmlld2VyLnByb3RvdHlwZS5fY2xlYXJUcmFja2VkT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRyYWNrZWRFbnRpdHkgPSB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblZpZXdlci5wcm90b3R5cGUuX29uSW5mb0JveENsb2NrQ2xpY2tlZCA9IGZ1bmN0aW9uIChpbmZvQm94Vmlld01vZGVsKSB7XG4gIHRoaXMuc2VsZWN0ZWRFbnRpdHkgPSB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblZpZXdlci5wcm90b3R5cGUuX2NsZWFyT2JqZWN0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50cmFja2VkRW50aXR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLnNlbGVjdGVkRW50aXR5ID0gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5WaWV3ZXIucHJvdG90eXBlLl9vbkRhdGFTb3VyY2VDaGFuZ2VkID0gZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHtcbiAgaWYgKHRoaXMuY2xvY2tUcmFja2VkRGF0YVNvdXJjZSA9PT0gZGF0YVNvdXJjZSkge1xuICAgIHRyYWNrRGF0YVNvdXJjZUNsb2NrKHRoaXMudGltZWxpbmUsIHRoaXMuY2xvY2ssIGRhdGFTb3VyY2UpO1xuICB9XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblZpZXdlci5wcm90b3R5cGUuX29uRGF0YVNvdXJjZUFkZGVkID0gZnVuY3Rpb24gKFxuICBkYXRhU291cmNlQ29sbGVjdGlvbixcbiAgZGF0YVNvdXJjZVxuKSB7XG4gIGlmICh0aGlzLl9hdXRvbWF0aWNhbGx5VHJhY2tEYXRhU291cmNlQ2xvY2tzKSB7XG4gICAgdGhpcy5jbG9ja1RyYWNrZWREYXRhU291cmNlID0gZGF0YVNvdXJjZTtcbiAgfVxuICB2YXIgaWQgPSBkYXRhU291cmNlLmVudGl0aWVzLmlkO1xuICB2YXIgcmVtb3ZhbEZ1bmMgPSB0aGlzLl9ldmVudEhlbHBlci5hZGQoXG4gICAgZGF0YVNvdXJjZS5jaGFuZ2VkRXZlbnQsXG4gICAgVmlld2VyLnByb3RvdHlwZS5fb25EYXRhU291cmNlQ2hhbmdlZCxcbiAgICB0aGlzXG4gICk7XG4gIHRoaXMuX2RhdGFTb3VyY2VDaGFuZ2VkTGlzdGVuZXJzW2lkXSA9IHJlbW92YWxGdW5jO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5WaWV3ZXIucHJvdG90eXBlLl9vbkRhdGFTb3VyY2VSZW1vdmVkID0gZnVuY3Rpb24gKFxuICBkYXRhU291cmNlQ29sbGVjdGlvbixcbiAgZGF0YVNvdXJjZVxuKSB7XG4gIHZhciByZXNldENsb2NrID0gdGhpcy5jbG9ja1RyYWNrZWREYXRhU291cmNlID09PSBkYXRhU291cmNlO1xuICB2YXIgaWQgPSBkYXRhU291cmNlLmVudGl0aWVzLmlkO1xuICB0aGlzLl9kYXRhU291cmNlQ2hhbmdlZExpc3RlbmVyc1tpZF0oKTtcbiAgdGhpcy5fZGF0YVNvdXJjZUNoYW5nZWRMaXN0ZW5lcnNbaWRdID0gdW5kZWZpbmVkO1xuICBpZiAocmVzZXRDbG9jaykge1xuICAgIHZhciBudW1EYXRhU291cmNlcyA9IGRhdGFTb3VyY2VDb2xsZWN0aW9uLmxlbmd0aDtcbiAgICBpZiAodGhpcy5fYXV0b21hdGljYWxseVRyYWNrRGF0YVNvdXJjZUNsb2NrcyAmJiBudW1EYXRhU291cmNlcyA+IDApIHtcbiAgICAgIHRoaXMuY2xvY2tUcmFja2VkRGF0YVNvdXJjZSA9IGRhdGFTb3VyY2VDb2xsZWN0aW9uLmdldChcbiAgICAgICAgbnVtRGF0YVNvdXJjZXMgLSAxXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsb2NrVHJhY2tlZERhdGFTb3VyY2UgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IHNldHMgdGhlIGNhbWVyYSB0byB2aWV3IHRoZSBwcm92aWRlZCBlbnRpdHksIGVudGl0aWVzLCBvciBkYXRhIHNvdXJjZS5cbiAqIElmIHRoZSBkYXRhIHNvdXJjZSBpcyBzdGlsbCBpbiB0aGUgcHJvY2VzcyBvZiBsb2FkaW5nIG9yIHRoZSB2aXN1YWxpemF0aW9uIGlzIG90aGVyd2lzZSBzdGlsbCBsb2FkaW5nLFxuICogdGhpcyBtZXRob2Qgd2FpdHMgZm9yIHRoZSBkYXRhIHRvIGJlIHJlYWR5IGJlZm9yZSBwZXJmb3JtaW5nIHRoZSB6b29tLlxuICpcbiAqIDxwPlRoZSBvZmZzZXQgaXMgaGVhZGluZy9waXRjaC9yYW5nZSBpbiB0aGUgbG9jYWwgZWFzdC1ub3J0aC11cCByZWZlcmVuY2UgZnJhbWUgY2VudGVyZWQgYXQgdGhlIGNlbnRlciBvZiB0aGUgYm91bmRpbmcgc3BoZXJlLlxuICogVGhlIGhlYWRpbmcgYW5kIHRoZSBwaXRjaCBhbmdsZXMgYXJlIGRlZmluZWQgaW4gdGhlIGxvY2FsIGVhc3Qtbm9ydGgtdXAgcmVmZXJlbmNlIGZyYW1lLlxuICogVGhlIGhlYWRpbmcgaXMgdGhlIGFuZ2xlIGZyb20geSBheGlzIGFuZCBpbmNyZWFzaW5nIHRvd2FyZHMgdGhlIHggYXhpcy4gUGl0Y2ggaXMgdGhlIHJvdGF0aW9uIGZyb20gdGhlIHh5LXBsYW5lLiBQb3NpdGl2ZSBwaXRjaFxuICogYW5nbGVzIGFyZSBhYm92ZSB0aGUgcGxhbmUuIE5lZ2F0aXZlIHBpdGNoIGFuZ2xlcyBhcmUgYmVsb3cgdGhlIHBsYW5lLiBUaGUgcmFuZ2UgaXMgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlci4gSWYgdGhlIHJhbmdlIGlzXG4gKiB6ZXJvLCBhIHJhbmdlIHdpbGwgYmUgY29tcHV0ZWQgc3VjaCB0aGF0IHRoZSB3aG9sZSBib3VuZGluZyBzcGhlcmUgaXMgdmlzaWJsZS48L3A+XG4gKlxuICogPHA+SW4gMkQsIHRoZXJlIG11c3QgYmUgYSB0b3AgZG93biB2aWV3LiBUaGUgY2FtZXJhIHdpbGwgYmUgcGxhY2VkIGFib3ZlIHRoZSB0YXJnZXQgbG9va2luZyBkb3duLiBUaGUgaGVpZ2h0IGFib3ZlIHRoZVxuICogdGFyZ2V0IHdpbGwgYmUgdGhlIHJhbmdlLiBUaGUgaGVhZGluZyB3aWxsIGJlIGRldGVybWluZWQgZnJvbSB0aGUgb2Zmc2V0LiBJZiB0aGUgaGVhZGluZyBjYW5ub3QgYmVcbiAqIGRldGVybWluZWQgZnJvbSB0aGUgb2Zmc2V0LCB0aGUgaGVhZGluZyB3aWxsIGJlIG5vcnRoLjwvcD5cbiAqXG4gKiBAcGFyYW0ge0VudGl0eXxFbnRpdHlbXXxFbnRpdHlDb2xsZWN0aW9ufERhdGFTb3VyY2V8SW1hZ2VyeUxheWVyfENlc2l1bTNEVGlsZXNldHxUaW1lRHluYW1pY1BvaW50Q2xvdWR8UHJvbWlzZS48RW50aXR5fEVudGl0eVtdfEVudGl0eUNvbGxlY3Rpb258RGF0YVNvdXJjZXxJbWFnZXJ5TGF5ZXJ8Q2VzaXVtM0RUaWxlc2V0fFRpbWVEeW5hbWljUG9pbnRDbG91ZD59IHRhcmdldCBUaGUgZW50aXR5LCBhcnJheSBvZiBlbnRpdGllcywgZW50aXR5IGNvbGxlY3Rpb24sIGRhdGEgc291cmNlLCBDZXNpdW0zRFRpbGVzZXQsIHBvaW50IGNsb3VkLCBvciBpbWFnZXJ5IGxheWVyIHRvIHZpZXcuIFlvdSBjYW4gYWxzbyBwYXNzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIG9uZSBvZiB0aGUgcHJldmlvdXNseSBtZW50aW9uZWQgdHlwZXMuXG4gKiBAcGFyYW0ge0hlYWRpbmdQaXRjaFJhbmdlfSBbb2Zmc2V0XSBUaGUgb2Zmc2V0IGZyb20gdGhlIGNlbnRlciBvZiB0aGUgZW50aXR5IGluIHRoZSBsb2NhbCBlYXN0LW5vcnRoLXVwIHJlZmVyZW5jZSBmcmFtZS5cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxCb29sZWFuPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdHJ1ZSBpZiB0aGUgem9vbSB3YXMgc3VjY2Vzc2Z1bCBvciBmYWxzZSBpZiB0aGUgdGFyZ2V0IGlzIG5vdCBjdXJyZW50bHkgdmlzdWFsaXplZCBpbiB0aGUgc2NlbmUgb3IgdGhlIHpvb20gd2FzIGNhbmNlbGxlZC5cbiAqL1xuVmlld2VyLnByb3RvdHlwZS56b29tVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBvZmZzZXQpIHtcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgb2Zmc2V0OiBvZmZzZXQsXG4gIH07XG4gIHJldHVybiB6b29tVG9PckZseSh0aGlzLCB0YXJnZXQsIG9wdGlvbnMsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogRmxpZXMgdGhlIGNhbWVyYSB0byB0aGUgcHJvdmlkZWQgZW50aXR5LCBlbnRpdGllcywgb3IgZGF0YSBzb3VyY2UuXG4gKiBJZiB0aGUgZGF0YSBzb3VyY2UgaXMgc3RpbGwgaW4gdGhlIHByb2Nlc3Mgb2YgbG9hZGluZyBvciB0aGUgdmlzdWFsaXphdGlvbiBpcyBvdGhlcndpc2Ugc3RpbGwgbG9hZGluZyxcbiAqIHRoaXMgbWV0aG9kIHdhaXRzIGZvciB0aGUgZGF0YSB0byBiZSByZWFkeSBiZWZvcmUgcGVyZm9ybWluZyB0aGUgZmxpZ2h0LlxuICpcbiAqIDxwPlRoZSBvZmZzZXQgaXMgaGVhZGluZy9waXRjaC9yYW5nZSBpbiB0aGUgbG9jYWwgZWFzdC1ub3J0aC11cCByZWZlcmVuY2UgZnJhbWUgY2VudGVyZWQgYXQgdGhlIGNlbnRlciBvZiB0aGUgYm91bmRpbmcgc3BoZXJlLlxuICogVGhlIGhlYWRpbmcgYW5kIHRoZSBwaXRjaCBhbmdsZXMgYXJlIGRlZmluZWQgaW4gdGhlIGxvY2FsIGVhc3Qtbm9ydGgtdXAgcmVmZXJlbmNlIGZyYW1lLlxuICogVGhlIGhlYWRpbmcgaXMgdGhlIGFuZ2xlIGZyb20geSBheGlzIGFuZCBpbmNyZWFzaW5nIHRvd2FyZHMgdGhlIHggYXhpcy4gUGl0Y2ggaXMgdGhlIHJvdGF0aW9uIGZyb20gdGhlIHh5LXBsYW5lLiBQb3NpdGl2ZSBwaXRjaFxuICogYW5nbGVzIGFyZSBhYm92ZSB0aGUgcGxhbmUuIE5lZ2F0aXZlIHBpdGNoIGFuZ2xlcyBhcmUgYmVsb3cgdGhlIHBsYW5lLiBUaGUgcmFuZ2UgaXMgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlci4gSWYgdGhlIHJhbmdlIGlzXG4gKiB6ZXJvLCBhIHJhbmdlIHdpbGwgYmUgY29tcHV0ZWQgc3VjaCB0aGF0IHRoZSB3aG9sZSBib3VuZGluZyBzcGhlcmUgaXMgdmlzaWJsZS48L3A+XG4gKlxuICogPHA+SW4gMkQsIHRoZXJlIG11c3QgYmUgYSB0b3AgZG93biB2aWV3LiBUaGUgY2FtZXJhIHdpbGwgYmUgcGxhY2VkIGFib3ZlIHRoZSB0YXJnZXQgbG9va2luZyBkb3duLiBUaGUgaGVpZ2h0IGFib3ZlIHRoZVxuICogdGFyZ2V0IHdpbGwgYmUgdGhlIHJhbmdlLiBUaGUgaGVhZGluZyB3aWxsIGJlIGRldGVybWluZWQgZnJvbSB0aGUgb2Zmc2V0LiBJZiB0aGUgaGVhZGluZyBjYW5ub3QgYmVcbiAqIGRldGVybWluZWQgZnJvbSB0aGUgb2Zmc2V0LCB0aGUgaGVhZGluZyB3aWxsIGJlIG5vcnRoLjwvcD5cbiAqXG4gKiBAcGFyYW0ge0VudGl0eXxFbnRpdHlbXXxFbnRpdHlDb2xsZWN0aW9ufERhdGFTb3VyY2V8SW1hZ2VyeUxheWVyfENlc2l1bTNEVGlsZXNldHxUaW1lRHluYW1pY1BvaW50Q2xvdWR8UHJvbWlzZS48RW50aXR5fEVudGl0eVtdfEVudGl0eUNvbGxlY3Rpb258RGF0YVNvdXJjZXxJbWFnZXJ5TGF5ZXJ8Q2VzaXVtM0RUaWxlc2V0fFRpbWVEeW5hbWljUG9pbnRDbG91ZD59IHRhcmdldCBUaGUgZW50aXR5LCBhcnJheSBvZiBlbnRpdGllcywgZW50aXR5IGNvbGxlY3Rpb24sIGRhdGEgc291cmNlLCBDZXNpdW0zRFRpbGVzZXQsIHBvaW50IGNsb3VkLCBvciBpbWFnZXJ5IGxheWVyIHRvIHZpZXcuIFlvdSBjYW4gYWxzbyBwYXNzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIG9uZSBvZiB0aGUgcHJldmlvdXNseSBtZW50aW9uZWQgdHlwZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5kdXJhdGlvbj0zLjBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgZmxpZ2h0IGluIHNlY29uZHMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4aW11bUhlaWdodF0gVGhlIG1heGltdW0gaGVpZ2h0IGF0IHRoZSBwZWFrIG9mIHRoZSBmbGlnaHQuXG4gKiBAcGFyYW0ge0hlYWRpbmdQaXRjaFJhbmdlfSBbb3B0aW9ucy5vZmZzZXRdIFRoZSBvZmZzZXQgZnJvbSB0aGUgdGFyZ2V0IGluIHRoZSBsb2NhbCBlYXN0LW5vcnRoLXVwIHJlZmVyZW5jZSBmcmFtZSBjZW50ZXJlZCBhdCB0aGUgdGFyZ2V0LlxuICogQHJldHVybnMge1Byb21pc2UuPEJvb2xlYW4+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0cnVlIGlmIHRoZSBmbGlnaHQgd2FzIHN1Y2Nlc3NmdWwgb3IgZmFsc2UgaWYgdGhlIHRhcmdldCBpcyBub3QgY3VycmVudGx5IHZpc3VhbGl6ZWQgaW4gdGhlIHNjZW5lIG9yIHRoZSBmbGlnaHQgd2FzIGNhbmNlbGxlZC4gLy9UT0RPOiBDbGVhbnVwIGVudGl0eSBtZW50aW9uc1xuICovXG5WaWV3ZXIucHJvdG90eXBlLmZseVRvID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICByZXR1cm4gem9vbVRvT3JGbHkodGhpcywgdGFyZ2V0LCBvcHRpb25zLCB0cnVlKTtcbn07XG5cbmZ1bmN0aW9uIHpvb21Ub09yRmx5KHRoYXQsIHpvb21UYXJnZXQsIG9wdGlvbnMsIGlzRmxpZ2h0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh6b29tVGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInpvb21UYXJnZXQgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGNhbmNlbFpvb20odGhhdCk7XG5cbiAgLy9XZSBjYW4ndCBhY3R1YWxseSBwZXJmb3JtIHRoZSB6b29tIHVudGlsIGFsbCB2aXN1YWxpemF0aW9uIGlzIHJlYWR5IGFuZFxuICAvL2JvdW5kaW5nIHNwaGVyZXMgaGF2ZSBiZWVuIGNvbXB1dGVkLiAgVGhlcmVmb3JlIHdlIGNyZWF0ZSBhbmQgcmV0dXJuXG4gIC8vYSBkZWZlcnJlZCB3aGljaCB3aWxsIGJlIHJlc29sdmVkIGFzIHBhcnQgb2YgdGhlIHBvc3QtcmVuZGVyIHN0ZXAgaW4gdGhlXG4gIC8vZnJhbWUgdGhhdCBhY3R1YWxseSBwZXJmb3JtcyB0aGUgem9vbVxuICB2YXIgem9vbVByb21pc2UgPSB3aGVuLmRlZmVyKCk7XG4gIHRoYXQuX3pvb21Qcm9taXNlID0gem9vbVByb21pc2U7XG4gIHRoYXQuX3pvb21Jc0ZsaWdodCA9IGlzRmxpZ2h0O1xuICB0aGF0Ll96b29tT3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgd2hlbih6b29tVGFyZ2V0LCBmdW5jdGlvbiAoem9vbVRhcmdldCkge1xuICAgIC8vT25seSBwZXJmb3JtIHRoZSB6b29tIGlmIGl0IHdhc24ndCBjYW5jZWxsZWQgYmVmb3JlIHRoZSBwcm9taXNlIHJlc29sdmVkLlxuICAgIGlmICh0aGF0Ll96b29tUHJvbWlzZSAhPT0gem9vbVByb21pc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvL0lmIHRoZSB6b29tIHRhcmdldCBpcyBhIHJlY3Rhbmd1bGFyIGltYWdlcnkgaW4gYW4gSW1hZ2VMYXllclxuICAgIGlmICh6b29tVGFyZ2V0IGluc3RhbmNlb2YgSW1hZ2VyeUxheWVyKSB7XG4gICAgICB6b29tVGFyZ2V0XG4gICAgICAgIC5nZXRWaWV3YWJsZVJlY3RhbmdsZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZWN0YW5nbGUpIHtcbiAgICAgICAgICByZXR1cm4gY29tcHV0ZUZseVRvTG9jYXRpb25Gb3JSZWN0YW5nbGUocmVjdGFuZ2xlLCB0aGF0LnNjZW5lKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgLy9Pbmx5IHBlcmZvcm0gdGhlIHpvb20gaWYgaXQgd2Fzbid0IGNhbmNlbGxlZCBiZWZvcmUgdGhlIHByb21pc2Ugd2FzIHJlc29sdmVkXG4gICAgICAgICAgaWYgKHRoYXQuX3pvb21Qcm9taXNlID09PSB6b29tUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhhdC5fem9vbVRhcmdldCA9IHBvc2l0aW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy9JZiB0aGUgem9vbSB0YXJnZXQgaXMgYSBDZXNpdW0zRFRpbGVzZXRcbiAgICBpZiAoem9vbVRhcmdldCBpbnN0YW5jZW9mIENlc2l1bTNEVGlsZXNldCkge1xuICAgICAgdGhhdC5fem9vbVRhcmdldCA9IHpvb21UYXJnZXQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy9JZiB0aGUgem9vbSB0YXJnZXQgaXMgYSBUaW1lRHluYW1pY1BvaW50Q2xvdWRcbiAgICBpZiAoem9vbVRhcmdldCBpbnN0YW5jZW9mIFRpbWVEeW5hbWljUG9pbnRDbG91ZCkge1xuICAgICAgdGhhdC5fem9vbVRhcmdldCA9IHpvb21UYXJnZXQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy9JZiB0aGUgem9vbSB0YXJnZXQgaXMgYSBkYXRhIHNvdXJjZSwgYW5kIGl0J3MgaW4gdGhlIG1pZGRsZSBvZiBsb2FkaW5nLCB3YWl0IGZvciBpdCB0byBmaW5pc2ggbG9hZGluZy5cbiAgICBpZiAoem9vbVRhcmdldC5pc0xvYWRpbmcgJiYgZGVmaW5lZCh6b29tVGFyZ2V0LmxvYWRpbmdFdmVudCkpIHtcbiAgICAgIHZhciByZW1vdmVFdmVudCA9IHpvb21UYXJnZXQubG9hZGluZ0V2ZW50LmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVFdmVudCgpO1xuXG4gICAgICAgIC8vT25seSBwZXJmb3JtIHRoZSB6b29tIGlmIGl0IHdhc24ndCBjYW5jZWxsZWQgYmVmb3JlIHRoZSBkYXRhIHNvdXJjZSBmaW5pc2hlZC5cbiAgICAgICAgaWYgKHRoYXQuX3pvb21Qcm9taXNlID09PSB6b29tUHJvbWlzZSkge1xuICAgICAgICAgIHRoYXQuX3pvb21UYXJnZXQgPSB6b29tVGFyZ2V0LmVudGl0aWVzLnZhbHVlcy5zbGljZSgwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy9ab29tIHRhcmdldCBpcyBhbHJlYWR5IGFuIGFycmF5LCBqdXN0IGNvcHkgaXQgYW5kIHJldHVybi5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh6b29tVGFyZ2V0KSkge1xuICAgICAgdGhhdC5fem9vbVRhcmdldCA9IHpvb21UYXJnZXQuc2xpY2UoMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy9JZiB6b29tVGFyZ2V0IGlzIGFuIEVudGl0eUNvbGxlY3Rpb24sIHRoaXMgd2lsbCByZXRyaWV2ZSB0aGUgYXJyYXlcbiAgICB6b29tVGFyZ2V0ID0gZGVmYXVsdFZhbHVlKHpvb21UYXJnZXQudmFsdWVzLCB6b29tVGFyZ2V0KTtcblxuICAgIC8vSWYgem9vbVRhcmdldCBpcyBhIERhdGFTb3VyY2UsIHRoaXMgd2lsbCByZXRyaWV2ZSB0aGUgYXJyYXkuXG4gICAgaWYgKGRlZmluZWQoem9vbVRhcmdldC5lbnRpdGllcykpIHtcbiAgICAgIHpvb21UYXJnZXQgPSB6b29tVGFyZ2V0LmVudGl0aWVzLnZhbHVlcztcbiAgICB9XG5cbiAgICAvL1pvb20gdGFyZ2V0IGlzIGFscmVhZHkgYW4gYXJyYXksIGp1c3QgY29weSBpdCBhbmQgcmV0dXJuLlxuICAgIGlmIChBcnJheS5pc0FycmF5KHpvb21UYXJnZXQpKSB7XG4gICAgICB0aGF0Ll96b29tVGFyZ2V0ID0gem9vbVRhcmdldC5zbGljZSgwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9TaW5nbGUgZW50aXR5XG4gICAgICB0aGF0Ll96b29tVGFyZ2V0ID0gW3pvb21UYXJnZXRdO1xuICAgIH1cbiAgfSk7XG5cbiAgdGhhdC5zY2VuZS5yZXF1ZXN0UmVuZGVyKCk7XG4gIHJldHVybiB6b29tUHJvbWlzZS5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjbGVhclpvb20odmlld2VyKSB7XG4gIHZpZXdlci5fem9vbVByb21pc2UgPSB1bmRlZmluZWQ7XG4gIHZpZXdlci5fem9vbVRhcmdldCA9IHVuZGVmaW5lZDtcbiAgdmlld2VyLl96b29tT3B0aW9ucyA9IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gY2FuY2VsWm9vbSh2aWV3ZXIpIHtcbiAgdmFyIHpvb21Qcm9taXNlID0gdmlld2VyLl96b29tUHJvbWlzZTtcbiAgaWYgKGRlZmluZWQoem9vbVByb21pc2UpKSB7XG4gICAgY2xlYXJab29tKHZpZXdlcik7XG4gICAgem9vbVByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5WaWV3ZXIucHJvdG90eXBlLl9wb3N0UmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICB1cGRhdGVab29tVGFyZ2V0KHRoaXMpO1xuICB1cGRhdGVUcmFja2VkRW50aXR5KHRoaXMpO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlWm9vbVRhcmdldCh2aWV3ZXIpIHtcbiAgdmFyIHRhcmdldCA9IHZpZXdlci5fem9vbVRhcmdldDtcbiAgaWYgKCFkZWZpbmVkKHRhcmdldCkgfHwgdmlld2VyLnNjZW5lLm1vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBzY2VuZSA9IHZpZXdlci5zY2VuZTtcbiAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgdmFyIHpvb21Qcm9taXNlID0gdmlld2VyLl96b29tUHJvbWlzZTtcbiAgdmFyIHpvb21PcHRpb25zID0gZGVmYXVsdFZhbHVlKHZpZXdlci5fem9vbU9wdGlvbnMsIHt9KTtcbiAgdmFyIG9wdGlvbnM7XG4gIHZhciBib3VuZGluZ1NwaGVyZTtcblxuICAvLyBJZiB6b29tVGFyZ2V0IHdhcyBDZXNpdW0zRFRpbGVzZXRcbiAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIENlc2l1bTNEVGlsZXNldCkge1xuICAgIHJldHVybiB0YXJnZXQucmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGJvdW5kaW5nU3BoZXJlID0gdGFyZ2V0LmJvdW5kaW5nU3BoZXJlO1xuICAgICAgLy8gSWYgb2Zmc2V0IHdhcyBvcmlnaW5hbGx5IHVuZGVmaW5lZCB0aGVuIGdpdmUgaXQgYmFzZSB2YWx1ZSBpbnN0ZWFkIG9mIGVtcHR5IG9iamVjdFxuICAgICAgaWYgKCFkZWZpbmVkKHpvb21PcHRpb25zLm9mZnNldCkpIHtcbiAgICAgICAgem9vbU9wdGlvbnMub2Zmc2V0ID0gbmV3IEhlYWRpbmdQaXRjaFJhbmdlKFxuICAgICAgICAgIDAuMCxcbiAgICAgICAgICAtMC41LFxuICAgICAgICAgIGJvdW5kaW5nU3BoZXJlLnJhZGl1c1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBvZmZzZXQ6IHpvb21PcHRpb25zLm9mZnNldCxcbiAgICAgICAgZHVyYXRpb246IHpvb21PcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICBtYXhpbXVtSGVpZ2h0OiB6b29tT3B0aW9ucy5tYXhpbXVtSGVpZ2h0LFxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHpvb21Qcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHpvb21Qcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgaWYgKHZpZXdlci5fem9vbUlzRmxpZ2h0KSB7XG4gICAgICAgIGNhbWVyYS5mbHlUb0JvdW5kaW5nU3BoZXJlKHRhcmdldC5ib3VuZGluZ1NwaGVyZSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYW1lcmEudmlld0JvdW5kaW5nU3BoZXJlKGJvdW5kaW5nU3BoZXJlLCB6b29tT3B0aW9ucy5vZmZzZXQpO1xuICAgICAgICBjYW1lcmEubG9va0F0VHJhbnNmb3JtKE1hdHJpeDQuSURFTlRJVFkpO1xuXG4gICAgICAgIC8vIEZpbmlzaCB0aGUgcHJvbWlzZVxuICAgICAgICB6b29tUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBjbGVhclpvb20odmlld2VyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIElmIHpvb21UYXJnZXQgd2FzIFRpbWVEeW5hbWljUG9pbnRDbG91ZFxuICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgVGltZUR5bmFtaWNQb2ludENsb3VkKSB7XG4gICAgcmV0dXJuIHRhcmdldC5yZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYm91bmRpbmdTcGhlcmUgPSB0YXJnZXQuYm91bmRpbmdTcGhlcmU7XG4gICAgICAvLyBJZiBvZmZzZXQgd2FzIG9yaWdpbmFsbHkgdW5kZWZpbmVkIHRoZW4gZ2l2ZSBpdCBiYXNlIHZhbHVlIGluc3RlYWQgb2YgZW1wdHkgb2JqZWN0XG4gICAgICBpZiAoIWRlZmluZWQoem9vbU9wdGlvbnMub2Zmc2V0KSkge1xuICAgICAgICB6b29tT3B0aW9ucy5vZmZzZXQgPSBuZXcgSGVhZGluZ1BpdGNoUmFuZ2UoXG4gICAgICAgICAgMC4wLFxuICAgICAgICAgIC0wLjUsXG4gICAgICAgICAgYm91bmRpbmdTcGhlcmUucmFkaXVzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIG9mZnNldDogem9vbU9wdGlvbnMub2Zmc2V0LFxuICAgICAgICBkdXJhdGlvbjogem9vbU9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgIG1heGltdW1IZWlnaHQ6IHpvb21PcHRpb25zLm1heGltdW1IZWlnaHQsXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgem9vbVByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgem9vbVByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBpZiAodmlld2VyLl96b29tSXNGbGlnaHQpIHtcbiAgICAgICAgY2FtZXJhLmZseVRvQm91bmRpbmdTcGhlcmUoYm91bmRpbmdTcGhlcmUsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FtZXJhLnZpZXdCb3VuZGluZ1NwaGVyZShib3VuZGluZ1NwaGVyZSwgem9vbU9wdGlvbnMub2Zmc2V0KTtcbiAgICAgICAgY2FtZXJhLmxvb2tBdFRyYW5zZm9ybShNYXRyaXg0LklERU5USVRZKTtcblxuICAgICAgICAvLyBGaW5pc2ggdGhlIHByb21pc2VcbiAgICAgICAgem9vbVByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgY2xlYXJab29tKHZpZXdlcik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBJZiB6b29tVGFyZ2V0IHdhcyBhbiBJbWFnZXJ5TGF5ZXJcbiAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIENhcnRvZ3JhcGhpYykge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICBkZXN0aW5hdGlvbjogc2NlbmUubWFwUHJvamVjdGlvbi5lbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgICAgIHRhcmdldFxuICAgICAgKSxcbiAgICAgIGR1cmF0aW9uOiB6b29tT3B0aW9ucy5kdXJhdGlvbixcbiAgICAgIG1heGltdW1IZWlnaHQ6IHpvb21PcHRpb25zLm1heGltdW1IZWlnaHQsXG4gICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB6b29tUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgICAgfSxcbiAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgICB6b29tUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGlmICh2aWV3ZXIuX3pvb21Jc0ZsaWdodCkge1xuICAgICAgY2FtZXJhLmZseVRvKG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW1lcmEuc2V0VmlldyhvcHRpb25zKTtcbiAgICAgIHpvb21Qcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgfVxuICAgIGNsZWFyWm9vbSh2aWV3ZXIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBlbnRpdGllcyA9IHRhcmdldDtcblxuICB2YXIgYm91bmRpbmdTcGhlcmVzID0gW107XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbnRpdGllcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBzdGF0ZSA9IHZpZXdlci5fZGF0YVNvdXJjZURpc3BsYXkuZ2V0Qm91bmRpbmdTcGhlcmUoXG4gICAgICBlbnRpdGllc1tpXSxcbiAgICAgIGZhbHNlLFxuICAgICAgYm91bmRpbmdTcGhlcmVTY3JhdGNoXG4gICAgKTtcblxuICAgIGlmIChzdGF0ZSA9PT0gQm91bmRpbmdTcGhlcmVTdGF0ZS5QRU5ESU5HKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAhPT0gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQpIHtcbiAgICAgIGJvdW5kaW5nU3BoZXJlcy5wdXNoKEJvdW5kaW5nU3BoZXJlLmNsb25lKGJvdW5kaW5nU3BoZXJlU2NyYXRjaCkpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChib3VuZGluZ1NwaGVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgY2FuY2VsWm9vbSh2aWV3ZXIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vU3RvcCB0cmFja2luZyB0aGUgY3VycmVudCBlbnRpdHkuXG4gIHZpZXdlci50cmFja2VkRW50aXR5ID0gdW5kZWZpbmVkO1xuXG4gIGJvdW5kaW5nU3BoZXJlID0gQm91bmRpbmdTcGhlcmUuZnJvbUJvdW5kaW5nU3BoZXJlcyhib3VuZGluZ1NwaGVyZXMpO1xuXG4gIGlmICghdmlld2VyLl96b29tSXNGbGlnaHQpIHtcbiAgICBjYW1lcmEudmlld0JvdW5kaW5nU3BoZXJlKGJvdW5kaW5nU3BoZXJlLCB6b29tT3B0aW9ucy5vZmZzZXQpO1xuICAgIGNhbWVyYS5sb29rQXRUcmFuc2Zvcm0oTWF0cml4NC5JREVOVElUWSk7XG4gICAgY2xlYXJab29tKHZpZXdlcik7XG4gICAgem9vbVByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBjbGVhclpvb20odmlld2VyKTtcbiAgICBjYW1lcmEuZmx5VG9Cb3VuZGluZ1NwaGVyZShib3VuZGluZ1NwaGVyZSwge1xuICAgICAgZHVyYXRpb246IHpvb21PcHRpb25zLmR1cmF0aW9uLFxuICAgICAgbWF4aW11bUhlaWdodDogem9vbU9wdGlvbnMubWF4aW11bUhlaWdodCxcbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHpvb21Qcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICB9LFxuICAgICAgY2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHpvb21Qcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgfSxcbiAgICAgIG9mZnNldDogem9vbU9wdGlvbnMub2Zmc2V0LFxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRyYWNrZWRFbnRpdHkodmlld2VyKSB7XG4gIGlmICghdmlld2VyLl9uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0cmFja2VkRW50aXR5ID0gdmlld2VyLl90cmFja2VkRW50aXR5O1xuICB2YXIgY3VycmVudFRpbWUgPSB2aWV3ZXIuY2xvY2suY3VycmVudFRpbWU7XG5cbiAgLy9WZXJpZnkgd2UgaGF2ZSBhIGN1cnJlbnQgcG9zaXRpb24gYXQgdGhpcyB0aW1lLiBUaGlzIGlzIG9ubHkgdHJpZ2dlcmVkIGlmIGEgcG9zaXRpb25cbiAgLy9oYXMgYmVjb21lIHVuZGVmaW5lZCBhZnRlciB0cmFja2VkRW50aXR5IGlzIHNldCBidXQgYmVmb3JlIHRoZSBib3VuZGluZ1NwaGVyZSBoYXMgYmVlblxuICAvL2NvbXB1dGVkLiBJbiB0aGlzIGNhc2UsIHdlIHdpbGwgdHJhY2sgdGhlIGVudGl0eSBvbmNlIGl0IGNvbWVzIGJhY2sgaW50byBleGlzdGVuY2UuXG4gIHZhciBjdXJyZW50UG9zaXRpb24gPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yVW5kZWZpbmVkKFxuICAgIHRyYWNrZWRFbnRpdHkucG9zaXRpb24sXG4gICAgY3VycmVudFRpbWVcbiAgKTtcblxuICBpZiAoIWRlZmluZWQoY3VycmVudFBvc2l0aW9uKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBzY2VuZSA9IHZpZXdlci5zY2VuZTtcblxuICB2YXIgc3RhdGUgPSB2aWV3ZXIuX2RhdGFTb3VyY2VEaXNwbGF5LmdldEJvdW5kaW5nU3BoZXJlKFxuICAgIHRyYWNrZWRFbnRpdHksXG4gICAgZmFsc2UsXG4gICAgYm91bmRpbmdTcGhlcmVTY3JhdGNoXG4gICk7XG4gIGlmIChzdGF0ZSA9PT0gQm91bmRpbmdTcGhlcmVTdGF0ZS5QRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHNjZW5lTW9kZSA9IHNjZW5lLm1vZGU7XG4gIGlmIChcbiAgICBzY2VuZU1vZGUgPT09IFNjZW5lTW9kZS5DT0xVTUJVU19WSUVXIHx8XG4gICAgc2NlbmVNb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRFxuICApIHtcbiAgICBzY2VuZS5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIuZW5hYmxlVHJhbnNsYXRlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoXG4gICAgc2NlbmVNb2RlID09PSBTY2VuZU1vZGUuQ09MVU1CVVNfVklFVyB8fFxuICAgIHNjZW5lTW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0RcbiAgKSB7XG4gICAgc2NlbmUuc2NyZWVuU3BhY2VDYW1lcmFDb250cm9sbGVyLmVuYWJsZVRpbHQgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBicyA9XG4gICAgc3RhdGUgIT09IEJvdW5kaW5nU3BoZXJlU3RhdGUuRkFJTEVEID8gYm91bmRpbmdTcGhlcmVTY3JhdGNoIDogdW5kZWZpbmVkO1xuICB2aWV3ZXIuX2VudGl0eVZpZXcgPSBuZXcgRW50aXR5VmlldyhcbiAgICB0cmFja2VkRW50aXR5LFxuICAgIHNjZW5lLFxuICAgIHNjZW5lLm1hcFByb2plY3Rpb24uZWxsaXBzb2lkXG4gICk7XG4gIHZpZXdlci5fZW50aXR5Vmlldy51cGRhdGUoY3VycmVudFRpbWUsIGJzKTtcbiAgdmlld2VyLl9uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZSA9IGZhbHNlO1xufVxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCBhdWdtZW50cyBhIFZpZXdlciBpbnN0YW5jZSB3aXRoIGFkZGl0aW9uYWwgZnVuY3Rpb25hbGl0eS5cbiAqIEBjYWxsYmFjayBWaWV3ZXIuVmlld2VyTWl4aW5cbiAqIEBwYXJhbSB7Vmlld2VyfSB2aWV3ZXIgVGhlIHZpZXdlciBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0IHRvIGJlIHBhc3NlZCB0byB0aGUgbWl4aW4gZnVuY3Rpb24uXG4gKlxuICogQHNlZSBWaWV3ZXIjZXh0ZW5kXG4gKi9cbmV4cG9ydCBkZWZhdWx0IFZpZXdlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1601\n')},97977:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval("/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Cesium3DTilesInspector_Cesium3DTilesInspector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56778);\n\n\n\n/**\n * A mixin which adds the {@link Cesium3DTilesInspector} widget to the {@link Viewer} widget.\n * Rather than being called directly, this function is normally passed as\n * a parameter to {@link Viewer#extend}, as shown in the example below.\n * @function\n *\n * @param {Viewer} viewer The viewer instance.\n *\n * @example\n * var viewer = new Cesium.Viewer('cesiumContainer');\n * viewer.extend(Cesium.viewerCesium3DTilesInspectorMixin);\n */\nfunction viewerCesium3DTilesInspectorMixin(viewer) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"viewer\", viewer);\n  //>>includeEnd('debug');\n\n  var container = document.createElement(\"div\");\n  container.className = \"cesium-viewer-cesium3DTilesInspectorContainer\";\n  viewer.container.appendChild(container);\n  var cesium3DTilesInspector = new Cesium3DTilesInspector(\n    container,\n    viewer.scene\n  );\n\n  Object.defineProperties(viewer, {\n    cesium3DTilesInspector: {\n      get: function () {\n        return cesium3DTilesInspector;\n      },\n    },\n  });\n}\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (viewerCesium3DTilesInspectorMixin)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTc5NzcuanMiLCJtYXBwaW5ncyI6Ijs7QUFBd0M7QUFDaUQ7O0FBRXpGO0FBQ0EsMkJBQTJCLDhCQUE4QixlQUFlLGNBQWM7QUFDdEY7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxzRUFBZSxpRkFBaUMsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9XaWRnZXRzL1ZpZXdlci92aWV3ZXJDZXNpdW0zRFRpbGVzSW5zcGVjdG9yTWl4aW4uanM/NmJlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uLy4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBDZXNpdW0zRFRpbGVzSW5zcGVjdG9yIGZyb20gXCIuLi9DZXNpdW0zRFRpbGVzSW5zcGVjdG9yL0Nlc2l1bTNEVGlsZXNJbnNwZWN0b3IuanNcIjtcblxuLyoqXG4gKiBBIG1peGluIHdoaWNoIGFkZHMgdGhlIHtAbGluayBDZXNpdW0zRFRpbGVzSW5zcGVjdG9yfSB3aWRnZXQgdG8gdGhlIHtAbGluayBWaWV3ZXJ9IHdpZGdldC5cbiAqIFJhdGhlciB0aGFuIGJlaW5nIGNhbGxlZCBkaXJlY3RseSwgdGhpcyBmdW5jdGlvbiBpcyBub3JtYWxseSBwYXNzZWQgYXNcbiAqIGEgcGFyYW1ldGVyIHRvIHtAbGluayBWaWV3ZXIjZXh0ZW5kfSwgYXMgc2hvd24gaW4gdGhlIGV4YW1wbGUgYmVsb3cuXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1ZpZXdlcn0gdmlld2VyIFRoZSB2aWV3ZXIgaW5zdGFuY2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciB2aWV3ZXIgPSBuZXcgQ2VzaXVtLlZpZXdlcignY2VzaXVtQ29udGFpbmVyJyk7XG4gKiB2aWV3ZXIuZXh0ZW5kKENlc2l1bS52aWV3ZXJDZXNpdW0zRFRpbGVzSW5zcGVjdG9yTWl4aW4pO1xuICovXG5mdW5jdGlvbiB2aWV3ZXJDZXNpdW0zRFRpbGVzSW5zcGVjdG9yTWl4aW4odmlld2VyKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJ2aWV3ZXJcIiwgdmlld2VyKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcImNlc2l1bS12aWV3ZXItY2VzaXVtM0RUaWxlc0luc3BlY3RvckNvbnRhaW5lclwiO1xuICB2aWV3ZXIuY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gIHZhciBjZXNpdW0zRFRpbGVzSW5zcGVjdG9yID0gbmV3IENlc2l1bTNEVGlsZXNJbnNwZWN0b3IoXG4gICAgY29udGFpbmVyLFxuICAgIHZpZXdlci5zY2VuZVxuICApO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHZpZXdlciwge1xuICAgIGNlc2l1bTNEVGlsZXNJbnNwZWN0b3I6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2VzaXVtM0RUaWxlc0luc3BlY3RvcjtcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCB2aWV3ZXJDZXNpdW0zRFRpbGVzSW5zcGVjdG9yTWl4aW47XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///97977\n")},92401:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval("/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n/* harmony import */ var _CesiumInspector_CesiumInspector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42974);\n\n\n\n\n/**\n * A mixin which adds the CesiumInspector widget to the Viewer widget.\n * Rather than being called directly, this function is normally passed as\n * a parameter to {@link Viewer#extend}, as shown in the example below.\n * @function\n *\n * @param {Viewer} viewer The viewer instance.\n *\n * @exception {DeveloperError} viewer is required.\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Cesium%20Inspector.html|Cesium Sandcastle Cesium Inspector Demo}\n *\n * @example\n * var viewer = new Cesium.Viewer('cesiumContainer');\n * viewer.extend(Cesium.viewerCesiumInspectorMixin);\n */\nfunction viewerCesiumInspectorMixin(viewer) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(viewer)) {\n    throw new DeveloperError(\"viewer is required.\");\n  }\n  //>>includeEnd('debug');\n\n  var cesiumInspectorContainer = document.createElement(\"div\");\n  cesiumInspectorContainer.className = \"cesium-viewer-cesiumInspectorContainer\";\n  viewer.container.appendChild(cesiumInspectorContainer);\n  var cesiumInspector = new CesiumInspector(\n    cesiumInspectorContainer,\n    viewer.scene\n  );\n\n  Object.defineProperties(viewer, {\n    cesiumInspector: {\n      get: function () {\n        return cesiumInspector;\n      },\n    },\n  });\n}\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (viewerCesiumInspectorMixin)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTI0MDEuanMiLCJtYXBwaW5ncyI6Ijs7QUFBNEM7QUFDYztBQUNVOztBQUVwRTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxzRUFBZSwwRUFBMEIsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9XaWRnZXRzL1ZpZXdlci92aWV3ZXJDZXNpdW1JbnNwZWN0b3JNaXhpbi5qcz81NmNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IENlc2l1bUluc3BlY3RvciBmcm9tIFwiLi4vQ2VzaXVtSW5zcGVjdG9yL0Nlc2l1bUluc3BlY3Rvci5qc1wiO1xuXG4vKipcbiAqIEEgbWl4aW4gd2hpY2ggYWRkcyB0aGUgQ2VzaXVtSW5zcGVjdG9yIHdpZGdldCB0byB0aGUgVmlld2VyIHdpZGdldC5cbiAqIFJhdGhlciB0aGFuIGJlaW5nIGNhbGxlZCBkaXJlY3RseSwgdGhpcyBmdW5jdGlvbiBpcyBub3JtYWxseSBwYXNzZWQgYXNcbiAqIGEgcGFyYW1ldGVyIHRvIHtAbGluayBWaWV3ZXIjZXh0ZW5kfSwgYXMgc2hvd24gaW4gdGhlIGV4YW1wbGUgYmVsb3cuXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1ZpZXdlcn0gdmlld2VyIFRoZSB2aWV3ZXIgaW5zdGFuY2UuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IHZpZXdlciBpcyByZXF1aXJlZC5cbiAqXG4gKiBAZGVtbyB7QGxpbmsgaHR0cHM6Ly9zYW5kY2FzdGxlLmNlc2l1bS5jb20vaW5kZXguaHRtbD9zcmM9Q2VzaXVtJTIwSW5zcGVjdG9yLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgQ2VzaXVtIEluc3BlY3RvciBEZW1vfVxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdmlld2VyID0gbmV3IENlc2l1bS5WaWV3ZXIoJ2Nlc2l1bUNvbnRhaW5lcicpO1xuICogdmlld2VyLmV4dGVuZChDZXNpdW0udmlld2VyQ2VzaXVtSW5zcGVjdG9yTWl4aW4pO1xuICovXG5mdW5jdGlvbiB2aWV3ZXJDZXNpdW1JbnNwZWN0b3JNaXhpbih2aWV3ZXIpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHZpZXdlcikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2aWV3ZXIgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBjZXNpdW1JbnNwZWN0b3JDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjZXNpdW1JbnNwZWN0b3JDb250YWluZXIuY2xhc3NOYW1lID0gXCJjZXNpdW0tdmlld2VyLWNlc2l1bUluc3BlY3RvckNvbnRhaW5lclwiO1xuICB2aWV3ZXIuY29udGFpbmVyLmFwcGVuZENoaWxkKGNlc2l1bUluc3BlY3RvckNvbnRhaW5lcik7XG4gIHZhciBjZXNpdW1JbnNwZWN0b3IgPSBuZXcgQ2VzaXVtSW5zcGVjdG9yKFxuICAgIGNlc2l1bUluc3BlY3RvckNvbnRhaW5lcixcbiAgICB2aWV3ZXIuc2NlbmVcbiAgKTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh2aWV3ZXIsIHtcbiAgICBjZXNpdW1JbnNwZWN0b3I6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2VzaXVtSW5zcGVjdG9yO1xuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IHZpZXdlckNlc2l1bUluc3BlY3Rvck1peGluO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///92401\n")},95612:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14459);\n/* harmony import */ var _Core_wrapFunction_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(70869);\n/* harmony import */ var _DataSources_CzmlDataSource_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(49639);\n/* harmony import */ var _DataSources_GeoJsonDataSource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4157);\n/* harmony import */ var _DataSources_KmlDataSource_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(25320);\n/* harmony import */ var _getElement_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(43412);\n\n\n\n\n\n\n\n\n\n\n/**\n * A mixin which adds default drag and drop support for CZML files to the Viewer widget.\n * Rather than being called directly, this function is normally passed as\n * a parameter to {@link Viewer#extend}, as shown in the example below.\n * @function viewerDragDropMixin\n\n * @param {Viewer} viewer The viewer instance.\n * @param {Object} [options] Object with the following properties:\n * @param {Element|String} [options.dropTarget=viewer.container] The DOM element which will serve as the drop target.\n * @param {Boolean} [options.clearOnDrop=true] When true, dropping files will clear all existing data sources first, when false, new data sources will be loaded after the existing ones.\n * @param {Boolean} [options.flyToOnDrop=true] When true, dropping files will fly to the data source once it is loaded.\n * @param {Boolean} [options.clampToGround=true] When true, datasources are clamped to the ground.\n * @param {Proxy} [options.proxy] The proxy to be used for KML network links.\n *\n * @exception {DeveloperError} Element with id <options.dropTarget> does not exist in the document.\n * @exception {DeveloperError} dropTarget is already defined by another mixin.\n * @exception {DeveloperError} dropEnabled is already defined by another mixin.\n * @exception {DeveloperError} dropError is already defined by another mixin.\n * @exception {DeveloperError} clearOnDrop is already defined by another mixin.\n *\n * @example\n * // Add basic drag and drop support and pop up an alert window on error.\n * var viewer = new Cesium.Viewer(\'cesiumContainer\');\n * viewer.extend(Cesium.viewerDragDropMixin);\n * viewer.dropError.addEventListener(function(viewerArg, source, error) {\n *     window.alert(\'Error processing \' + source + \':\' + error);\n * });\n */\nfunction viewerDragDropMixin(viewer, options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!defined(viewer)) {\n    throw new DeveloperError("viewer is required.");\n  }\n  if (viewer.hasOwnProperty("dropTarget")) {\n    throw new DeveloperError("dropTarget is already defined by another mixin.");\n  }\n  if (viewer.hasOwnProperty("dropEnabled")) {\n    throw new DeveloperError(\n      "dropEnabled is already defined by another mixin."\n    );\n  }\n  if (viewer.hasOwnProperty("dropError")) {\n    throw new DeveloperError("dropError is already defined by another mixin.");\n  }\n  if (viewer.hasOwnProperty("clearOnDrop")) {\n    throw new DeveloperError(\n      "clearOnDrop is already defined by another mixin."\n    );\n  }\n  if (viewer.hasOwnProperty("flyToOnDrop")) {\n    throw new DeveloperError(\n      "flyToOnDrop is already defined by another mixin."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  //Local variables to be closed over by defineProperties.\n  var dropEnabled = true;\n  var flyToOnDrop = defaultValue(options.flyToOnDrop, true);\n  var dropError = new Event();\n  var clearOnDrop = defaultValue(options.clearOnDrop, true);\n  var dropTarget = defaultValue(options.dropTarget, viewer.container);\n  var clampToGround = defaultValue(options.clampToGround, true);\n  var proxy = options.proxy;\n\n  dropTarget = getElement(dropTarget);\n\n  Object.defineProperties(viewer, {\n    /**\n     * Gets or sets the element to serve as the drop target.\n     * @memberof viewerDragDropMixin.prototype\n     * @type {Element}\n     */\n    dropTarget: {\n      //TODO See https://github.com/CesiumGS/cesium/issues/832\n      get: function () {\n        return dropTarget;\n      },\n      set: function (value) {\n        //>>includeStart(\'debug\', pragmas.debug);\n        if (!defined(value)) {\n          throw new DeveloperError("value is required.");\n        }\n        //>>includeEnd(\'debug\');\n\n        unsubscribe(dropTarget, handleDrop);\n        dropTarget = value;\n        subscribe(dropTarget, handleDrop);\n      },\n    },\n\n    /**\n     * Gets or sets a value indicating if drag and drop support is enabled.\n     * @memberof viewerDragDropMixin.prototype\n     * @type {Element}\n     */\n    dropEnabled: {\n      get: function () {\n        return dropEnabled;\n      },\n      set: function (value) {\n        if (value !== dropEnabled) {\n          if (value) {\n            subscribe(dropTarget, handleDrop);\n          } else {\n            unsubscribe(dropTarget, handleDrop);\n          }\n          dropEnabled = value;\n        }\n      },\n    },\n\n    /**\n     * Gets the event that will be raised when an error is encountered during drop processing.\n     * @memberof viewerDragDropMixin.prototype\n     * @type {Event}\n     */\n    dropError: {\n      get: function () {\n        return dropError;\n      },\n    },\n\n    /**\n     * Gets or sets a value indicating if existing data sources should be cleared before adding the newly dropped sources.\n     * @memberof viewerDragDropMixin.prototype\n     * @type {Boolean}\n     */\n    clearOnDrop: {\n      get: function () {\n        return clearOnDrop;\n      },\n      set: function (value) {\n        clearOnDrop = value;\n      },\n    },\n\n    /**\n     * Gets or sets a value indicating if the camera should fly to the data source after it is loaded.\n     * @memberof viewerDragDropMixin.prototype\n     * @type {Boolean}\n     */\n    flyToOnDrop: {\n      get: function () {\n        return flyToOnDrop;\n      },\n      set: function (value) {\n        flyToOnDrop = value;\n      },\n    },\n\n    /**\n     * Gets or sets the proxy to be used for KML.\n     * @memberof viewerDragDropMixin.prototype\n     * @type {Proxy}\n     */\n    proxy: {\n      get: function () {\n        return proxy;\n      },\n      set: function (value) {\n        proxy = value;\n      },\n    },\n\n    /**\n     * Gets or sets a value indicating if the datasources should be clamped to the ground\n     * @memberof viewerDragDropMixin.prototype\n     * @type {Boolean}\n     */\n    clampToGround: {\n      get: function () {\n        return clampToGround;\n      },\n      set: function (value) {\n        clampToGround = value;\n      },\n    },\n  });\n\n  function handleDrop(event) {\n    stop(event);\n\n    if (clearOnDrop) {\n      viewer.entities.removeAll();\n      viewer.dataSources.removeAll();\n    }\n\n    var files = event.dataTransfer.files;\n    var length = files.length;\n    for (var i = 0; i < length; i++) {\n      var file = files[i];\n      var reader = new FileReader();\n      reader.onload = createOnLoadCallback(viewer, file, proxy, clampToGround);\n      reader.onerror = createDropErrorCallback(viewer, file);\n      reader.readAsText(file);\n    }\n  }\n\n  //Enable drop by default;\n  subscribe(dropTarget, handleDrop);\n\n  //Wrap the destroy function to make sure all events are unsubscribed from\n  viewer.destroy = wrapFunction(viewer, viewer.destroy, function () {\n    viewer.dropEnabled = false;\n  });\n\n  //Specs need access to handleDrop\n  viewer._handleDrop = handleDrop;\n}\n\nfunction stop(event) {\n  event.stopPropagation();\n  event.preventDefault();\n}\n\nfunction unsubscribe(dropTarget, handleDrop) {\n  var currentTarget = dropTarget;\n  if (defined(currentTarget)) {\n    currentTarget.removeEventListener("drop", handleDrop, false);\n    currentTarget.removeEventListener("dragenter", stop, false);\n    currentTarget.removeEventListener("dragover", stop, false);\n    currentTarget.removeEventListener("dragexit", stop, false);\n  }\n}\n\nfunction subscribe(dropTarget, handleDrop) {\n  dropTarget.addEventListener("drop", handleDrop, false);\n  dropTarget.addEventListener("dragenter", stop, false);\n  dropTarget.addEventListener("dragover", stop, false);\n  dropTarget.addEventListener("dragexit", stop, false);\n}\n\nfunction createOnLoadCallback(viewer, file, proxy, clampToGround) {\n  var scene = viewer.scene;\n  return function (evt) {\n    var fileName = file.name;\n    try {\n      var loadPromise;\n\n      if (/\\.czml$/i.test(fileName)) {\n        loadPromise = CzmlDataSource.load(JSON.parse(evt.target.result), {\n          sourceUri: fileName,\n        });\n      } else if (\n        /\\.geojson$/i.test(fileName) ||\n        /\\.json$/i.test(fileName) ||\n        /\\.topojson$/i.test(fileName)\n      ) {\n        loadPromise = GeoJsonDataSource.load(JSON.parse(evt.target.result), {\n          sourceUri: fileName,\n          clampToGround: clampToGround,\n        });\n      } else if (/\\.(kml|kmz)$/i.test(fileName)) {\n        loadPromise = KmlDataSource.load(file, {\n          sourceUri: fileName,\n          proxy: proxy,\n          camera: scene.camera,\n          canvas: scene.canvas,\n          clampToGround: clampToGround,\n        });\n      } else {\n        viewer.dropError.raiseEvent(\n          viewer,\n          fileName,\n          "Unrecognized file: " + fileName\n        );\n        return;\n      }\n\n      if (defined(loadPromise)) {\n        viewer.dataSources\n          .add(loadPromise)\n          .then(function (dataSource) {\n            if (viewer.flyToOnDrop) {\n              viewer.flyTo(dataSource);\n            }\n          })\n          .otherwise(function (error) {\n            viewer.dropError.raiseEvent(viewer, fileName, error);\n          });\n      }\n    } catch (error) {\n      viewer.dropError.raiseEvent(viewer, fileName, error);\n    }\n  };\n}\n\nfunction createDropErrorCallback(viewer, file) {\n  return function (evt) {\n    viewer.dropError.raiseEvent(viewer, file.name, evt.target.error);\n  };\n}\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (viewerDragDropMixin)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBZSxtRUFBbUIsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9XaWRnZXRzL1ZpZXdlci92aWV3ZXJEcmFnRHJvcE1peGluLmpzPzJmNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi8uLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgd3JhcEZ1bmN0aW9uIGZyb20gXCIuLi8uLi9Db3JlL3dyYXBGdW5jdGlvbi5qc1wiO1xuaW1wb3J0IEN6bWxEYXRhU291cmNlIGZyb20gXCIuLi8uLi9EYXRhU291cmNlcy9Dem1sRGF0YVNvdXJjZS5qc1wiO1xuaW1wb3J0IEdlb0pzb25EYXRhU291cmNlIGZyb20gXCIuLi8uLi9EYXRhU291cmNlcy9HZW9Kc29uRGF0YVNvdXJjZS5qc1wiO1xuaW1wb3J0IEttbERhdGFTb3VyY2UgZnJvbSBcIi4uLy4uL0RhdGFTb3VyY2VzL0ttbERhdGFTb3VyY2UuanNcIjtcbmltcG9ydCBnZXRFbGVtZW50IGZyb20gXCIuLi9nZXRFbGVtZW50LmpzXCI7XG5cbi8qKlxuICogQSBtaXhpbiB3aGljaCBhZGRzIGRlZmF1bHQgZHJhZyBhbmQgZHJvcCBzdXBwb3J0IGZvciBDWk1MIGZpbGVzIHRvIHRoZSBWaWV3ZXIgd2lkZ2V0LlxuICogUmF0aGVyIHRoYW4gYmVpbmcgY2FsbGVkIGRpcmVjdGx5LCB0aGlzIGZ1bmN0aW9uIGlzIG5vcm1hbGx5IHBhc3NlZCBhc1xuICogYSBwYXJhbWV0ZXIgdG8ge0BsaW5rIFZpZXdlciNleHRlbmR9LCBhcyBzaG93biBpbiB0aGUgZXhhbXBsZSBiZWxvdy5cbiAqIEBmdW5jdGlvbiB2aWV3ZXJEcmFnRHJvcE1peGluXG5cbiAqIEBwYXJhbSB7Vmlld2VyfSB2aWV3ZXIgVGhlIHZpZXdlciBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gW29wdGlvbnMuZHJvcFRhcmdldD12aWV3ZXIuY29udGFpbmVyXSBUaGUgRE9NIGVsZW1lbnQgd2hpY2ggd2lsbCBzZXJ2ZSBhcyB0aGUgZHJvcCB0YXJnZXQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsZWFyT25Ecm9wPXRydWVdIFdoZW4gdHJ1ZSwgZHJvcHBpbmcgZmlsZXMgd2lsbCBjbGVhciBhbGwgZXhpc3RpbmcgZGF0YSBzb3VyY2VzIGZpcnN0LCB3aGVuIGZhbHNlLCBuZXcgZGF0YSBzb3VyY2VzIHdpbGwgYmUgbG9hZGVkIGFmdGVyIHRoZSBleGlzdGluZyBvbmVzLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5mbHlUb09uRHJvcD10cnVlXSBXaGVuIHRydWUsIGRyb3BwaW5nIGZpbGVzIHdpbGwgZmx5IHRvIHRoZSBkYXRhIHNvdXJjZSBvbmNlIGl0IGlzIGxvYWRlZC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY2xhbXBUb0dyb3VuZD10cnVlXSBXaGVuIHRydWUsIGRhdGFzb3VyY2VzIGFyZSBjbGFtcGVkIHRvIHRoZSBncm91bmQuXG4gKiBAcGFyYW0ge1Byb3h5fSBbb3B0aW9ucy5wcm94eV0gVGhlIHByb3h5IHRvIGJlIHVzZWQgZm9yIEtNTCBuZXR3b3JrIGxpbmtzLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBFbGVtZW50IHdpdGggaWQgPG9wdGlvbnMuZHJvcFRhcmdldD4gZG9lcyBub3QgZXhpc3QgaW4gdGhlIGRvY3VtZW50LlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IGRyb3BUYXJnZXQgaXMgYWxyZWFkeSBkZWZpbmVkIGJ5IGFub3RoZXIgbWl4aW4uXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gZHJvcEVuYWJsZWQgaXMgYWxyZWFkeSBkZWZpbmVkIGJ5IGFub3RoZXIgbWl4aW4uXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gZHJvcEVycm9yIGlzIGFscmVhZHkgZGVmaW5lZCBieSBhbm90aGVyIG1peGluLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IGNsZWFyT25Ecm9wIGlzIGFscmVhZHkgZGVmaW5lZCBieSBhbm90aGVyIG1peGluLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBZGQgYmFzaWMgZHJhZyBhbmQgZHJvcCBzdXBwb3J0IGFuZCBwb3AgdXAgYW4gYWxlcnQgd2luZG93IG9uIGVycm9yLlxuICogdmFyIHZpZXdlciA9IG5ldyBDZXNpdW0uVmlld2VyKCdjZXNpdW1Db250YWluZXInKTtcbiAqIHZpZXdlci5leHRlbmQoQ2VzaXVtLnZpZXdlckRyYWdEcm9wTWl4aW4pO1xuICogdmlld2VyLmRyb3BFcnJvci5hZGRFdmVudExpc3RlbmVyKGZ1bmN0aW9uKHZpZXdlckFyZywgc291cmNlLCBlcnJvcikge1xuICogICAgIHdpbmRvdy5hbGVydCgnRXJyb3IgcHJvY2Vzc2luZyAnICsgc291cmNlICsgJzonICsgZXJyb3IpO1xuICogfSk7XG4gKi9cbmZ1bmN0aW9uIHZpZXdlckRyYWdEcm9wTWl4aW4odmlld2VyLCBvcHRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh2aWV3ZXIpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmlld2VyIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICBpZiAodmlld2VyLmhhc093blByb3BlcnR5KFwiZHJvcFRhcmdldFwiKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImRyb3BUYXJnZXQgaXMgYWxyZWFkeSBkZWZpbmVkIGJ5IGFub3RoZXIgbWl4aW4uXCIpO1xuICB9XG4gIGlmICh2aWV3ZXIuaGFzT3duUHJvcGVydHkoXCJkcm9wRW5hYmxlZFwiKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiZHJvcEVuYWJsZWQgaXMgYWxyZWFkeSBkZWZpbmVkIGJ5IGFub3RoZXIgbWl4aW4uXCJcbiAgICApO1xuICB9XG4gIGlmICh2aWV3ZXIuaGFzT3duUHJvcGVydHkoXCJkcm9wRXJyb3JcIikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJkcm9wRXJyb3IgaXMgYWxyZWFkeSBkZWZpbmVkIGJ5IGFub3RoZXIgbWl4aW4uXCIpO1xuICB9XG4gIGlmICh2aWV3ZXIuaGFzT3duUHJvcGVydHkoXCJjbGVhck9uRHJvcFwiKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiY2xlYXJPbkRyb3AgaXMgYWxyZWFkeSBkZWZpbmVkIGJ5IGFub3RoZXIgbWl4aW4uXCJcbiAgICApO1xuICB9XG4gIGlmICh2aWV3ZXIuaGFzT3duUHJvcGVydHkoXCJmbHlUb09uRHJvcFwiKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiZmx5VG9PbkRyb3AgaXMgYWxyZWFkeSBkZWZpbmVkIGJ5IGFub3RoZXIgbWl4aW4uXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgLy9Mb2NhbCB2YXJpYWJsZXMgdG8gYmUgY2xvc2VkIG92ZXIgYnkgZGVmaW5lUHJvcGVydGllcy5cbiAgdmFyIGRyb3BFbmFibGVkID0gdHJ1ZTtcbiAgdmFyIGZseVRvT25Ecm9wID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZmx5VG9PbkRyb3AsIHRydWUpO1xuICB2YXIgZHJvcEVycm9yID0gbmV3IEV2ZW50KCk7XG4gIHZhciBjbGVhck9uRHJvcCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNsZWFyT25Ecm9wLCB0cnVlKTtcbiAgdmFyIGRyb3BUYXJnZXQgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5kcm9wVGFyZ2V0LCB2aWV3ZXIuY29udGFpbmVyKTtcbiAgdmFyIGNsYW1wVG9Hcm91bmQgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5jbGFtcFRvR3JvdW5kLCB0cnVlKTtcbiAgdmFyIHByb3h5ID0gb3B0aW9ucy5wcm94eTtcblxuICBkcm9wVGFyZ2V0ID0gZ2V0RWxlbWVudChkcm9wVGFyZ2V0KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh2aWV3ZXIsIHtcbiAgICAvKipcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIGVsZW1lbnQgdG8gc2VydmUgYXMgdGhlIGRyb3AgdGFyZ2V0LlxuICAgICAqIEBtZW1iZXJvZiB2aWV3ZXJEcmFnRHJvcE1peGluLnByb3RvdHlwZVxuICAgICAqIEB0eXBlIHtFbGVtZW50fVxuICAgICAqL1xuICAgIGRyb3BUYXJnZXQ6IHtcbiAgICAgIC8vVE9ETyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0Nlc2l1bUdTL2Nlc2l1bS9pc3N1ZXMvODMyXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRyb3BUYXJnZXQ7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgICB1bnN1YnNjcmliZShkcm9wVGFyZ2V0LCBoYW5kbGVEcm9wKTtcbiAgICAgICAgZHJvcFRhcmdldCA9IHZhbHVlO1xuICAgICAgICBzdWJzY3JpYmUoZHJvcFRhcmdldCwgaGFuZGxlRHJvcCk7XG4gICAgICB9LFxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIG9yIHNldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIGRyYWcgYW5kIGRyb3Agc3VwcG9ydCBpcyBlbmFibGVkLlxuICAgICAqIEBtZW1iZXJvZiB2aWV3ZXJEcmFnRHJvcE1peGluLnByb3RvdHlwZVxuICAgICAqIEB0eXBlIHtFbGVtZW50fVxuICAgICAqL1xuICAgIGRyb3BFbmFibGVkOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRyb3BFbmFibGVkO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gZHJvcEVuYWJsZWQpIHtcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZShkcm9wVGFyZ2V0LCBoYW5kbGVEcm9wKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoZHJvcFRhcmdldCwgaGFuZGxlRHJvcCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRyb3BFbmFibGVkID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgd2lsbCBiZSByYWlzZWQgd2hlbiBhbiBlcnJvciBpcyBlbmNvdW50ZXJlZCBkdXJpbmcgZHJvcCBwcm9jZXNzaW5nLlxuICAgICAqIEBtZW1iZXJvZiB2aWV3ZXJEcmFnRHJvcE1peGluLnByb3RvdHlwZVxuICAgICAqIEB0eXBlIHtFdmVudH1cbiAgICAgKi9cbiAgICBkcm9wRXJyb3I6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZHJvcEVycm9yO1xuICAgICAgfSxcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0cyBvciBzZXRzIGEgdmFsdWUgaW5kaWNhdGluZyBpZiBleGlzdGluZyBkYXRhIHNvdXJjZXMgc2hvdWxkIGJlIGNsZWFyZWQgYmVmb3JlIGFkZGluZyB0aGUgbmV3bHkgZHJvcHBlZCBzb3VyY2VzLlxuICAgICAqIEBtZW1iZXJvZiB2aWV3ZXJEcmFnRHJvcE1peGluLnByb3RvdHlwZVxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNsZWFyT25Ecm9wOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsZWFyT25Ecm9wO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNsZWFyT25Ecm9wID0gdmFsdWU7XG4gICAgICB9LFxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIG9yIHNldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoZSBjYW1lcmEgc2hvdWxkIGZseSB0byB0aGUgZGF0YSBzb3VyY2UgYWZ0ZXIgaXQgaXMgbG9hZGVkLlxuICAgICAqIEBtZW1iZXJvZiB2aWV3ZXJEcmFnRHJvcE1peGluLnByb3RvdHlwZVxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqL1xuICAgIGZseVRvT25Ecm9wOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZseVRvT25Ecm9wO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGZseVRvT25Ecm9wID0gdmFsdWU7XG4gICAgICB9LFxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIHByb3h5IHRvIGJlIHVzZWQgZm9yIEtNTC5cbiAgICAgKiBAbWVtYmVyb2Ygdmlld2VyRHJhZ0Ryb3BNaXhpbi5wcm90b3R5cGVcbiAgICAgKiBAdHlwZSB7UHJveHl9XG4gICAgICovXG4gICAgcHJveHk6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcHJveHk7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcHJveHkgPSB2YWx1ZTtcbiAgICAgIH0sXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldHMgb3Igc2V0cyBhIHZhbHVlIGluZGljYXRpbmcgaWYgdGhlIGRhdGFzb3VyY2VzIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBncm91bmRcbiAgICAgKiBAbWVtYmVyb2Ygdmlld2VyRHJhZ0Ryb3BNaXhpbi5wcm90b3R5cGVcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjbGFtcFRvR3JvdW5kOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsYW1wVG9Hcm91bmQ7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2xhbXBUb0dyb3VuZCA9IHZhbHVlO1xuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICBmdW5jdGlvbiBoYW5kbGVEcm9wKGV2ZW50KSB7XG4gICAgc3RvcChldmVudCk7XG5cbiAgICBpZiAoY2xlYXJPbkRyb3ApIHtcbiAgICAgIHZpZXdlci5lbnRpdGllcy5yZW1vdmVBbGwoKTtcbiAgICAgIHZpZXdlci5kYXRhU291cmNlcy5yZW1vdmVBbGwoKTtcbiAgICB9XG5cbiAgICB2YXIgZmlsZXMgPSBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgdmFyIGxlbmd0aCA9IGZpbGVzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZmlsZSA9IGZpbGVzW2ldO1xuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIub25sb2FkID0gY3JlYXRlT25Mb2FkQ2FsbGJhY2sodmlld2VyLCBmaWxlLCBwcm94eSwgY2xhbXBUb0dyb3VuZCk7XG4gICAgICByZWFkZXIub25lcnJvciA9IGNyZWF0ZURyb3BFcnJvckNhbGxiYWNrKHZpZXdlciwgZmlsZSk7XG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICB9XG4gIH1cblxuICAvL0VuYWJsZSBkcm9wIGJ5IGRlZmF1bHQ7XG4gIHN1YnNjcmliZShkcm9wVGFyZ2V0LCBoYW5kbGVEcm9wKTtcblxuICAvL1dyYXAgdGhlIGRlc3Ryb3kgZnVuY3Rpb24gdG8gbWFrZSBzdXJlIGFsbCBldmVudHMgYXJlIHVuc3Vic2NyaWJlZCBmcm9tXG4gIHZpZXdlci5kZXN0cm95ID0gd3JhcEZ1bmN0aW9uKHZpZXdlciwgdmlld2VyLmRlc3Ryb3ksIGZ1bmN0aW9uICgpIHtcbiAgICB2aWV3ZXIuZHJvcEVuYWJsZWQgPSBmYWxzZTtcbiAgfSk7XG5cbiAgLy9TcGVjcyBuZWVkIGFjY2VzcyB0byBoYW5kbGVEcm9wXG4gIHZpZXdlci5faGFuZGxlRHJvcCA9IGhhbmRsZURyb3A7XG59XG5cbmZ1bmN0aW9uIHN0b3AoZXZlbnQpIHtcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbmZ1bmN0aW9uIHVuc3Vic2NyaWJlKGRyb3BUYXJnZXQsIGhhbmRsZURyb3ApIHtcbiAgdmFyIGN1cnJlbnRUYXJnZXQgPSBkcm9wVGFyZ2V0O1xuICBpZiAoZGVmaW5lZChjdXJyZW50VGFyZ2V0KSkge1xuICAgIGN1cnJlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgaGFuZGxlRHJvcCwgZmFsc2UpO1xuICAgIGN1cnJlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdlbnRlclwiLCBzdG9wLCBmYWxzZSk7XG4gICAgY3VycmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgc3RvcCwgZmFsc2UpO1xuICAgIGN1cnJlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdleGl0XCIsIHN0b3AsIGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmUoZHJvcFRhcmdldCwgaGFuZGxlRHJvcCkge1xuICBkcm9wVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGhhbmRsZURyb3AsIGZhbHNlKTtcbiAgZHJvcFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsIHN0b3AsIGZhbHNlKTtcbiAgZHJvcFRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgc3RvcCwgZmFsc2UpO1xuICBkcm9wVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZXhpdFwiLCBzdG9wLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU9uTG9hZENhbGxiYWNrKHZpZXdlciwgZmlsZSwgcHJveHksIGNsYW1wVG9Hcm91bmQpIHtcbiAgdmFyIHNjZW5lID0gdmlld2VyLnNjZW5lO1xuICByZXR1cm4gZnVuY3Rpb24gKGV2dCkge1xuICAgIHZhciBmaWxlTmFtZSA9IGZpbGUubmFtZTtcbiAgICB0cnkge1xuICAgICAgdmFyIGxvYWRQcm9taXNlO1xuXG4gICAgICBpZiAoL1xcLmN6bWwkL2kudGVzdChmaWxlTmFtZSkpIHtcbiAgICAgICAgbG9hZFByb21pc2UgPSBDem1sRGF0YVNvdXJjZS5sb2FkKEpTT04ucGFyc2UoZXZ0LnRhcmdldC5yZXN1bHQpLCB7XG4gICAgICAgICAgc291cmNlVXJpOiBmaWxlTmFtZSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAvXFwuZ2VvanNvbiQvaS50ZXN0KGZpbGVOYW1lKSB8fFxuICAgICAgICAvXFwuanNvbiQvaS50ZXN0KGZpbGVOYW1lKSB8fFxuICAgICAgICAvXFwudG9wb2pzb24kL2kudGVzdChmaWxlTmFtZSlcbiAgICAgICkge1xuICAgICAgICBsb2FkUHJvbWlzZSA9IEdlb0pzb25EYXRhU291cmNlLmxvYWQoSlNPTi5wYXJzZShldnQudGFyZ2V0LnJlc3VsdCksIHtcbiAgICAgICAgICBzb3VyY2VVcmk6IGZpbGVOYW1lLFxuICAgICAgICAgIGNsYW1wVG9Hcm91bmQ6IGNsYW1wVG9Hcm91bmQsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICgvXFwuKGttbHxrbXopJC9pLnRlc3QoZmlsZU5hbWUpKSB7XG4gICAgICAgIGxvYWRQcm9taXNlID0gS21sRGF0YVNvdXJjZS5sb2FkKGZpbGUsIHtcbiAgICAgICAgICBzb3VyY2VVcmk6IGZpbGVOYW1lLFxuICAgICAgICAgIHByb3h5OiBwcm94eSxcbiAgICAgICAgICBjYW1lcmE6IHNjZW5lLmNhbWVyYSxcbiAgICAgICAgICBjYW52YXM6IHNjZW5lLmNhbnZhcyxcbiAgICAgICAgICBjbGFtcFRvR3JvdW5kOiBjbGFtcFRvR3JvdW5kLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXdlci5kcm9wRXJyb3IucmFpc2VFdmVudChcbiAgICAgICAgICB2aWV3ZXIsXG4gICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgXCJVbnJlY29nbml6ZWQgZmlsZTogXCIgKyBmaWxlTmFtZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWZpbmVkKGxvYWRQcm9taXNlKSkge1xuICAgICAgICB2aWV3ZXIuZGF0YVNvdXJjZXNcbiAgICAgICAgICAuYWRkKGxvYWRQcm9taXNlKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhU291cmNlKSB7XG4gICAgICAgICAgICBpZiAodmlld2VyLmZseVRvT25Ecm9wKSB7XG4gICAgICAgICAgICAgIHZpZXdlci5mbHlUbyhkYXRhU291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5vdGhlcndpc2UoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICB2aWV3ZXIuZHJvcEVycm9yLnJhaXNlRXZlbnQodmlld2VyLCBmaWxlTmFtZSwgZXJyb3IpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB2aWV3ZXIuZHJvcEVycm9yLnJhaXNlRXZlbnQodmlld2VyLCBmaWxlTmFtZSwgZXJyb3IpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRHJvcEVycm9yQ2FsbGJhY2sodmlld2VyLCBmaWxlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgdmlld2VyLmRyb3BFcnJvci5yYWlzZUV2ZW50KHZpZXdlciwgZmlsZS5uYW1lLCBldnQudGFyZ2V0LmVycm9yKTtcbiAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IHZpZXdlckRyYWdEcm9wTWl4aW47XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///95612\n')},81917:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval("/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _PerformanceWatchdog_PerformanceWatchdog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80312);\n\n\n\n\n\n/**\n * A mixin which adds the {@link PerformanceWatchdog} widget to the {@link Viewer} widget.\n * Rather than being called directly, this function is normally passed as\n * a parameter to {@link Viewer#extend}, as shown in the example below.\n * @function\n *\n * @param {Viewer} viewer The viewer instance.\n * @param {Object} [options] An object with properties.\n * @param {String} [options.lowFrameRateMessage='This application appears to be performing poorly on your system.  Please try using a different web browser or updating your video drivers.'] The\n *        message to display when a low frame rate is detected.  The message is interpeted as HTML, so make sure\n *        it comes from a trusted source so that your application is not vulnerable to cross-site scripting attacks.\n *\n * @exception {DeveloperError} viewer is required.\n *\n * @example\n * var viewer = new Cesium.Viewer('cesiumContainer');\n * viewer.extend(Cesium.viewerPerformanceWatchdogMixin, {\n *     lowFrameRateMessage : 'Why is this going so <em>slowly</em>?'\n * });\n */\nfunction viewerPerformanceWatchdogMixin(viewer, options) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(viewer)) {\n    throw new DeveloperError(\"viewer is required.\");\n  }\n  //>>includeEnd('debug');\n\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  var performanceWatchdog = new PerformanceWatchdog({\n    scene: viewer.scene,\n    container: viewer.bottomContainer,\n    lowFrameRateMessage: options.lowFrameRateMessage,\n  });\n\n  Object.defineProperties(viewer, {\n    performanceWatchdog: {\n      get: function () {\n        return performanceWatchdog;\n      },\n    },\n  });\n}\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (viewerPerformanceWatchdogMixin)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODE5MTcuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQXNEO0FBQ1Y7QUFDYztBQUNzQjs7QUFFaEY7QUFDQSwyQkFBMkIsMkJBQTJCLGVBQWUsY0FBYztBQUNuRjtBQUNBLG1CQUFtQixvQkFBb0I7QUFDdkM7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxzRUFBZSw4RUFBOEIsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9XaWRnZXRzL1ZpZXdlci92aWV3ZXJQZXJmb3JtYW5jZVdhdGNoZG9nTWl4aW4uanM/MzgwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi8uLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uLy4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi8uLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgUGVyZm9ybWFuY2VXYXRjaGRvZyBmcm9tIFwiLi4vUGVyZm9ybWFuY2VXYXRjaGRvZy9QZXJmb3JtYW5jZVdhdGNoZG9nLmpzXCI7XG5cbi8qKlxuICogQSBtaXhpbiB3aGljaCBhZGRzIHRoZSB7QGxpbmsgUGVyZm9ybWFuY2VXYXRjaGRvZ30gd2lkZ2V0IHRvIHRoZSB7QGxpbmsgVmlld2VyfSB3aWRnZXQuXG4gKiBSYXRoZXIgdGhhbiBiZWluZyBjYWxsZWQgZGlyZWN0bHksIHRoaXMgZnVuY3Rpb24gaXMgbm9ybWFsbHkgcGFzc2VkIGFzXG4gKiBhIHBhcmFtZXRlciB0byB7QGxpbmsgVmlld2VyI2V4dGVuZH0sIGFzIHNob3duIGluIHRoZSBleGFtcGxlIGJlbG93LlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtWaWV3ZXJ9IHZpZXdlciBUaGUgdmlld2VyIGluc3RhbmNlLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmxvd0ZyYW1lUmF0ZU1lc3NhZ2U9J1RoaXMgYXBwbGljYXRpb24gYXBwZWFycyB0byBiZSBwZXJmb3JtaW5nIHBvb3JseSBvbiB5b3VyIHN5c3RlbS4gIFBsZWFzZSB0cnkgdXNpbmcgYSBkaWZmZXJlbnQgd2ViIGJyb3dzZXIgb3IgdXBkYXRpbmcgeW91ciB2aWRlbyBkcml2ZXJzLiddIFRoZVxuICogICAgICAgIG1lc3NhZ2UgdG8gZGlzcGxheSB3aGVuIGEgbG93IGZyYW1lIHJhdGUgaXMgZGV0ZWN0ZWQuICBUaGUgbWVzc2FnZSBpcyBpbnRlcnBldGVkIGFzIEhUTUwsIHNvIG1ha2Ugc3VyZVxuICogICAgICAgIGl0IGNvbWVzIGZyb20gYSB0cnVzdGVkIHNvdXJjZSBzbyB0aGF0IHlvdXIgYXBwbGljYXRpb24gaXMgbm90IHZ1bG5lcmFibGUgdG8gY3Jvc3Mtc2l0ZSBzY3JpcHRpbmcgYXR0YWNrcy5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gdmlld2VyIGlzIHJlcXVpcmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdmlld2VyID0gbmV3IENlc2l1bS5WaWV3ZXIoJ2Nlc2l1bUNvbnRhaW5lcicpO1xuICogdmlld2VyLmV4dGVuZChDZXNpdW0udmlld2VyUGVyZm9ybWFuY2VXYXRjaGRvZ01peGluLCB7XG4gKiAgICAgbG93RnJhbWVSYXRlTWVzc2FnZSA6ICdXaHkgaXMgdGhpcyBnb2luZyBzbyA8ZW0+c2xvd2x5PC9lbT4/J1xuICogfSk7XG4gKi9cbmZ1bmN0aW9uIHZpZXdlclBlcmZvcm1hbmNlV2F0Y2hkb2dNaXhpbih2aWV3ZXIsIG9wdGlvbnMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHZpZXdlcikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2aWV3ZXIgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgdmFyIHBlcmZvcm1hbmNlV2F0Y2hkb2cgPSBuZXcgUGVyZm9ybWFuY2VXYXRjaGRvZyh7XG4gICAgc2NlbmU6IHZpZXdlci5zY2VuZSxcbiAgICBjb250YWluZXI6IHZpZXdlci5ib3R0b21Db250YWluZXIsXG4gICAgbG93RnJhbWVSYXRlTWVzc2FnZTogb3B0aW9ucy5sb3dGcmFtZVJhdGVNZXNzYWdlLFxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh2aWV3ZXIsIHtcbiAgICBwZXJmb3JtYW5jZVdhdGNoZG9nOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlV2F0Y2hkb2c7XG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgdmlld2VyUGVyZm9ybWFuY2VXYXRjaGRvZ01peGluO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///81917\n")},28389:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14459);\n/* harmony import */ var _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(53454);\n\n\n\n\n\n\n/**\n * Create a Command from a given function, for use with ViewModels.\n *\n * A Command is a function with an extra <code>canExecute</code> observable property to determine\n * whether the command can be executed.  When executed, a Command function will check the\n * value of <code>canExecute</code> and throw if false.  It also provides events for when\n * a command has been or is about to be executed.\n *\n * @function\n *\n * @param {Function} func The function to execute.\n * @param {Boolean} [canExecute=true] A boolean indicating whether the function can currently be executed.\n */\nfunction createCommand(func, canExecute) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(func)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("func is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  canExecute = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(canExecute, true);\n\n  var beforeExecute = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  var afterExecute = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n  function command() {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (!command.canExecute) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("Cannot execute command, canExecute is false.");\n    }\n    //>>includeEnd(\'debug\');\n\n    var commandInfo = {\n      args: arguments,\n      cancel: false,\n    };\n\n    var result;\n    beforeExecute.raiseEvent(commandInfo);\n    if (!commandInfo.cancel) {\n      result = func.apply(null, arguments);\n      afterExecute.raiseEvent(result);\n    }\n    return result;\n  }\n\n  command.canExecute = canExecute;\n  _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].track */ .Z.track(command, ["canExecute"]);\n\n  Object.defineProperties(command, {\n    beforeExecute: {\n      value: beforeExecute,\n    },\n    afterExecute: {\n      value: afterExecute,\n    },\n  });\n\n  return command;\n}\n/* harmony default export */ __webpack_exports__["Z"] = (createCommand);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjgzODkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBbUQ7QUFDVjtBQUNjO0FBQ2xCO0FBQ1k7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxPQUFPLHFFQUFPO0FBQ2QsY0FBYyx3RUFBYztBQUM1QjtBQUNBOztBQUVBLGVBQWUsMEVBQVk7O0FBRTNCLDBCQUEwQiwrREFBSztBQUMvQix5QkFBeUIsK0RBQUs7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3RUFBYztBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFLG9GQUFjOztBQUVoQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSx5REFBZSxhQUFhLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvV2lkZ2V0cy9jcmVhdGVDb21tYW5kLmpzPzU1ODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQga25vY2tvdXQgZnJvbSBcIi4uL1RoaXJkUGFydHkva25vY2tvdXQuanNcIjtcblxuLyoqXG4gKiBDcmVhdGUgYSBDb21tYW5kIGZyb20gYSBnaXZlbiBmdW5jdGlvbiwgZm9yIHVzZSB3aXRoIFZpZXdNb2RlbHMuXG4gKlxuICogQSBDb21tYW5kIGlzIGEgZnVuY3Rpb24gd2l0aCBhbiBleHRyYSA8Y29kZT5jYW5FeGVjdXRlPC9jb2RlPiBvYnNlcnZhYmxlIHByb3BlcnR5IHRvIGRldGVybWluZVxuICogd2hldGhlciB0aGUgY29tbWFuZCBjYW4gYmUgZXhlY3V0ZWQuICBXaGVuIGV4ZWN1dGVkLCBhIENvbW1hbmQgZnVuY3Rpb24gd2lsbCBjaGVjayB0aGVcbiAqIHZhbHVlIG9mIDxjb2RlPmNhbkV4ZWN1dGU8L2NvZGU+IGFuZCB0aHJvdyBpZiBmYWxzZS4gIEl0IGFsc28gcHJvdmlkZXMgZXZlbnRzIGZvciB3aGVuXG4gKiBhIGNvbW1hbmQgaGFzIGJlZW4gb3IgaXMgYWJvdXQgdG8gYmUgZXhlY3V0ZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2NhbkV4ZWN1dGU9dHJ1ZV0gQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgZnVuY3Rpb24gY2FuIGN1cnJlbnRseSBiZSBleGVjdXRlZC5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ29tbWFuZChmdW5jLCBjYW5FeGVjdXRlKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChmdW5jKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImZ1bmMgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGNhbkV4ZWN1dGUgPSBkZWZhdWx0VmFsdWUoY2FuRXhlY3V0ZSwgdHJ1ZSk7XG5cbiAgdmFyIGJlZm9yZUV4ZWN1dGUgPSBuZXcgRXZlbnQoKTtcbiAgdmFyIGFmdGVyRXhlY3V0ZSA9IG5ldyBFdmVudCgpO1xuXG4gIGZ1bmN0aW9uIGNvbW1hbmQoKSB7XG4gICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICBpZiAoIWNvbW1hbmQuY2FuRXhlY3V0ZSkge1xuICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiQ2Fubm90IGV4ZWN1dGUgY29tbWFuZCwgY2FuRXhlY3V0ZSBpcyBmYWxzZS5cIik7XG4gICAgfVxuICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgdmFyIGNvbW1hbmRJbmZvID0ge1xuICAgICAgYXJnczogYXJndW1lbnRzLFxuICAgICAgY2FuY2VsOiBmYWxzZSxcbiAgICB9O1xuXG4gICAgdmFyIHJlc3VsdDtcbiAgICBiZWZvcmVFeGVjdXRlLnJhaXNlRXZlbnQoY29tbWFuZEluZm8pO1xuICAgIGlmICghY29tbWFuZEluZm8uY2FuY2VsKSB7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICBhZnRlckV4ZWN1dGUucmFpc2VFdmVudChyZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgY29tbWFuZC5jYW5FeGVjdXRlID0gY2FuRXhlY3V0ZTtcbiAga25vY2tvdXQudHJhY2soY29tbWFuZCwgW1wiY2FuRXhlY3V0ZVwiXSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY29tbWFuZCwge1xuICAgIGJlZm9yZUV4ZWN1dGU6IHtcbiAgICAgIHZhbHVlOiBiZWZvcmVFeGVjdXRlLFxuICAgIH0sXG4gICAgYWZ0ZXJFeGVjdXRlOiB7XG4gICAgICB2YWx1ZTogYWZ0ZXJFeGVjdXRlLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBjb21tYW5kO1xufVxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tbWFuZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///28389\n')},43412:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n\n\n/**\n * If element is a string, look up the element in the DOM by ID.  Otherwise return element.\n *\n * @private\n *\n * @exception {DeveloperError} Element with id "id" does not exist in the document.\n */\nfunction getElement(element) {\n  if (typeof element === "string") {\n    var foundElement = document.getElementById(element);\n\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (foundElement === null) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(\n        \'Element with id "\' + element + \'" does not exist in the document.\'\n      );\n    }\n    //>>includeEnd(\'debug\');\n\n    element = foundElement;\n  }\n  return element;\n}\n/* harmony default export */ __webpack_exports__["Z"] = (getElement);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDM0MTIuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxVQUFVLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvV2lkZ2V0cy9nZXRFbGVtZW50LmpzP2Y4NjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5cbi8qKlxuICogSWYgZWxlbWVudCBpcyBhIHN0cmluZywgbG9vayB1cCB0aGUgZWxlbWVudCBpbiB0aGUgRE9NIGJ5IElELiAgT3RoZXJ3aXNlIHJldHVybiBlbGVtZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEVsZW1lbnQgd2l0aCBpZCBcImlkXCIgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGRvY3VtZW50LlxuICovXG5mdW5jdGlvbiBnZXRFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdmFyIGZvdW5kRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQpO1xuXG4gICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICBpZiAoZm91bmRFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICdFbGVtZW50IHdpdGggaWQgXCInICsgZWxlbWVudCArICdcIiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZG9jdW1lbnQuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICBlbGVtZW50ID0gZm91bmRFbGVtZW50O1xuICB9XG4gIHJldHVybiBlbGVtZW50O1xufVxuZXhwb3J0IGRlZmF1bHQgZ2V0RWxlbWVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///43412\n')},55619:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(53454);\n\n\n/**\n * Subscribe to a Knockout observable ES5 property, and immediately fire\n * the callback with the current value of the property.\n *\n * @private\n *\n * @function subscribeAndEvaluate\n *\n * @param {Object} owner The object containing the observable property.\n * @param {String} observablePropertyName The name of the observable property.\n * @param {Function} callback The callback function.\n * @param {Object} [target] The value of this in the callback function.\n * @param {String} [event=\'change\'] The name of the event to receive notification for.\n * @returns The subscription object from Knockout which can be used to dispose the subscription later.\n */\nfunction subscribeAndEvaluate(\n  owner,\n  observablePropertyName,\n  callback,\n  target,\n  event\n) {\n  callback.call(target, owner[observablePropertyName]);\n  return _ThirdParty_knockout_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getObservable */ .Z.getObservable(owner, observablePropertyName)\n    .subscribe(callback, target, event);\n}\n/* harmony default export */ __webpack_exports__["Z"] = (subscribeAndEvaluate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTU2MTkuanMiLCJtYXBwaW5ncyI6IjtBQUFpRDs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9HQUNTO0FBQ2xCO0FBQ0E7QUFDQSx5REFBZSxvQkFBb0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9XaWRnZXRzL3N1YnNjcmliZUFuZEV2YWx1YXRlLmpzPzY2MGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGtub2Nrb3V0IGZyb20gXCIuLi9UaGlyZFBhcnR5L2tub2Nrb3V0LmpzXCI7XG5cbi8qKlxuICogU3Vic2NyaWJlIHRvIGEgS25vY2tvdXQgb2JzZXJ2YWJsZSBFUzUgcHJvcGVydHksIGFuZCBpbW1lZGlhdGVseSBmaXJlXG4gKiB0aGUgY2FsbGJhY2sgd2l0aCB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gKlxuICogQHByaXZhdGVcbiAqXG4gKiBAZnVuY3Rpb24gc3Vic2NyaWJlQW5kRXZhbHVhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3duZXIgVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBvYnNlcnZhYmxlIHByb3BlcnR5LlxuICogQHBhcmFtIHtTdHJpbmd9IG9ic2VydmFibGVQcm9wZXJ0eU5hbWUgVGhlIG5hbWUgb2YgdGhlIG9ic2VydmFibGUgcHJvcGVydHkuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhlIHZhbHVlIG9mIHRoaXMgaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtTdHJpbmd9IFtldmVudD0nY2hhbmdlJ10gVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHJlY2VpdmUgbm90aWZpY2F0aW9uIGZvci5cbiAqIEByZXR1cm5zIFRoZSBzdWJzY3JpcHRpb24gb2JqZWN0IGZyb20gS25vY2tvdXQgd2hpY2ggY2FuIGJlIHVzZWQgdG8gZGlzcG9zZSB0aGUgc3Vic2NyaXB0aW9uIGxhdGVyLlxuICovXG5mdW5jdGlvbiBzdWJzY3JpYmVBbmRFdmFsdWF0ZShcbiAgb3duZXIsXG4gIG9ic2VydmFibGVQcm9wZXJ0eU5hbWUsXG4gIGNhbGxiYWNrLFxuICB0YXJnZXQsXG4gIGV2ZW50XG4pIHtcbiAgY2FsbGJhY2suY2FsbCh0YXJnZXQsIG93bmVyW29ic2VydmFibGVQcm9wZXJ0eU5hbWVdKTtcbiAgcmV0dXJuIGtub2Nrb3V0XG4gICAgLmdldE9ic2VydmFibGUob3duZXIsIG9ic2VydmFibGVQcm9wZXJ0eU5hbWUpXG4gICAgLnN1YnNjcmliZShjYWxsYmFjaywgdGFyZ2V0LCBldmVudCk7XG59XG5leHBvcnQgZGVmYXVsdCBzdWJzY3JpYmVBbmRFdmFsdWF0ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///55619\n')},4561:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13222);\n\n\n\n\n\n// createXXXGeometry functions may return Geometry or a Promise that resolves to Geometry\n// if the function requires access to ApproximateTerrainHeights.\n// For fully synchronous functions, just wrapping the function call in a `when` Promise doesn\'t\n// handle errors correctly, hence try-catch\nfunction callAndWrap(workerFunction, parameters, transferableObjects) {\n  var resultOrPromise;\n  try {\n    resultOrPromise = workerFunction(parameters, transferableObjects);\n    return resultOrPromise; // errors handled by Promise\n  } catch (e) {\n    return when.reject(e);\n  }\n}\n\n/**\n * Creates an adapter function to allow a calculation function to operate as a Web Worker,\n * paired with TaskProcessor, to receive tasks and return results.\n *\n * @function createTaskProcessorWorker\n *\n * @param {createTaskProcessorWorker.WorkerFunction} workerFunction The calculation function,\n *        which takes parameters and returns a result.\n * @returns {createTaskProcessorWorker.TaskProcessorWorkerFunction} A function that adapts the\n *          calculation function to work as a Web Worker onmessage listener with TaskProcessor.\n *\n *\n * @example\n * function doCalculation(parameters, transferableObjects) {\n *   // calculate some result using the inputs in parameters\n *   return result;\n * }\n *\n * return Cesium.createTaskProcessorWorker(doCalculation);\n * // the resulting function is compatible with TaskProcessor\n *\n * @see TaskProcessor\n * @see {@link http://www.w3.org/TR/workers/|Web Workers}\n * @see {@link http://www.w3.org/TR/html5/common-dom-interfaces.html#transferable-objects|Transferable objects}\n */\nfunction createTaskProcessorWorker(workerFunction) {\n  var postMessage;\n\n  return function (event) {\n    var data = event.data;\n\n    var transferableObjects = [];\n    var responseMessage = {\n      id: data.id,\n      result: undefined,\n      error: undefined,\n    };\n\n    return when(\n      callAndWrap(workerFunction, data.parameters, transferableObjects)\n    )\n      .then(function (result) {\n        responseMessage.result = result;\n      })\n      .otherwise(function (e) {\n        if (e instanceof Error) {\n          // Errors can\'t be posted in a message, copy the properties\n          responseMessage.error = {\n            name: e.name,\n            message: e.message,\n            stack: e.stack,\n          };\n        } else {\n          responseMessage.error = e;\n        }\n      })\n      .always(function () {\n        if (!defined(postMessage)) {\n          postMessage = defaultValue(self.webkitPostMessage, self.postMessage);\n        }\n\n        if (!data.canTransferArrayBuffer) {\n          transferableObjects.length = 0;\n        }\n\n        try {\n          postMessage(responseMessage, transferableObjects);\n        } catch (e) {\n          // something went wrong trying to post the message, post a simpler\n          // error that we can be sure will be cloneable\n          responseMessage.result = undefined;\n          responseMessage.error =\n            "postMessage failed with error: " +\n            formatError(e) +\n            "\\n  with responseMessage: " +\n            JSON.stringify(responseMessage);\n          postMessage(responseMessage);\n        }\n      });\n  };\n}\n\n/**\n * A function that performs a calculation in a Web Worker.\n * @callback createTaskProcessorWorker.WorkerFunction\n *\n * @param {Object} parameters Parameters to the calculation.\n * @param {Array} transferableObjects An array that should be filled with references to objects inside\n *        the result that should be transferred back to the main document instead of copied.\n * @returns {Object} The result of the calculation.\n *\n * @example\n * function calculate(parameters, transferableObjects) {\n *   // perform whatever calculation is necessary.\n *   var typedArray = new Float32Array(0);\n *\n *   // typed arrays are transferable\n *   transferableObjects.push(typedArray)\n *\n *   return {\n *      typedArray : typedArray\n *   };\n * }\n */\n\n/**\n * A Web Worker message event handler function that handles the interaction with TaskProcessor,\n * specifically, task ID management and posting a response message containing the result.\n * @callback createTaskProcessorWorker.TaskProcessorWorkerFunction\n *\n * @param {Object} event The onmessage event object.\n */\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (createTaskProcessorWorker)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU2MS5qcyIsIm1hcHBpbmdzIjoiOztBQUFtRDtBQUNWO0FBQ1E7QUFDUjs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMENBQTBDO0FBQ3JEO0FBQ0EsYUFBYSx1REFBdUQ7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsT0FBTztBQUNsQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxzRUFBZSx5RUFBeUIsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9Xb3JrZXJzRVM2L2NyZWF0ZVRhc2tQcm9jZXNzb3JXb3JrZXIuanM/YTUzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGZvcm1hdEVycm9yIGZyb20gXCIuLi9Db3JlL2Zvcm1hdEVycm9yLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5cbi8vIGNyZWF0ZVhYWEdlb21ldHJ5IGZ1bmN0aW9ucyBtYXkgcmV0dXJuIEdlb21ldHJ5IG9yIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIEdlb21ldHJ5XG4vLyBpZiB0aGUgZnVuY3Rpb24gcmVxdWlyZXMgYWNjZXNzIHRvIEFwcHJveGltYXRlVGVycmFpbkhlaWdodHMuXG4vLyBGb3IgZnVsbHkgc3luY2hyb25vdXMgZnVuY3Rpb25zLCBqdXN0IHdyYXBwaW5nIHRoZSBmdW5jdGlvbiBjYWxsIGluIGEgYHdoZW5gIFByb21pc2UgZG9lc24ndFxuLy8gaGFuZGxlIGVycm9ycyBjb3JyZWN0bHksIGhlbmNlIHRyeS1jYXRjaFxuZnVuY3Rpb24gY2FsbEFuZFdyYXAod29ya2VyRnVuY3Rpb24sIHBhcmFtZXRlcnMsIHRyYW5zZmVyYWJsZU9iamVjdHMpIHtcbiAgdmFyIHJlc3VsdE9yUHJvbWlzZTtcbiAgdHJ5IHtcbiAgICByZXN1bHRPclByb21pc2UgPSB3b3JrZXJGdW5jdGlvbihwYXJhbWV0ZXJzLCB0cmFuc2ZlcmFibGVPYmplY3RzKTtcbiAgICByZXR1cm4gcmVzdWx0T3JQcm9taXNlOyAvLyBlcnJvcnMgaGFuZGxlZCBieSBQcm9taXNlXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gd2hlbi5yZWplY3QoZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFkYXB0ZXIgZnVuY3Rpb24gdG8gYWxsb3cgYSBjYWxjdWxhdGlvbiBmdW5jdGlvbiB0byBvcGVyYXRlIGFzIGEgV2ViIFdvcmtlcixcbiAqIHBhaXJlZCB3aXRoIFRhc2tQcm9jZXNzb3IsIHRvIHJlY2VpdmUgdGFza3MgYW5kIHJldHVybiByZXN1bHRzLlxuICpcbiAqIEBmdW5jdGlvbiBjcmVhdGVUYXNrUHJvY2Vzc29yV29ya2VyXG4gKlxuICogQHBhcmFtIHtjcmVhdGVUYXNrUHJvY2Vzc29yV29ya2VyLldvcmtlckZ1bmN0aW9ufSB3b3JrZXJGdW5jdGlvbiBUaGUgY2FsY3VsYXRpb24gZnVuY3Rpb24sXG4gKiAgICAgICAgd2hpY2ggdGFrZXMgcGFyYW1ldGVycyBhbmQgcmV0dXJucyBhIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtjcmVhdGVUYXNrUHJvY2Vzc29yV29ya2VyLlRhc2tQcm9jZXNzb3JXb3JrZXJGdW5jdGlvbn0gQSBmdW5jdGlvbiB0aGF0IGFkYXB0cyB0aGVcbiAqICAgICAgICAgIGNhbGN1bGF0aW9uIGZ1bmN0aW9uIHRvIHdvcmsgYXMgYSBXZWIgV29ya2VyIG9ubWVzc2FnZSBsaXN0ZW5lciB3aXRoIFRhc2tQcm9jZXNzb3IuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBmdW5jdGlvbiBkb0NhbGN1bGF0aW9uKHBhcmFtZXRlcnMsIHRyYW5zZmVyYWJsZU9iamVjdHMpIHtcbiAqICAgLy8gY2FsY3VsYXRlIHNvbWUgcmVzdWx0IHVzaW5nIHRoZSBpbnB1dHMgaW4gcGFyYW1ldGVyc1xuICogICByZXR1cm4gcmVzdWx0O1xuICogfVxuICpcbiAqIHJldHVybiBDZXNpdW0uY3JlYXRlVGFza1Byb2Nlc3Nvcldvcmtlcihkb0NhbGN1bGF0aW9uKTtcbiAqIC8vIHRoZSByZXN1bHRpbmcgZnVuY3Rpb24gaXMgY29tcGF0aWJsZSB3aXRoIFRhc2tQcm9jZXNzb3JcbiAqXG4gKiBAc2VlIFRhc2tQcm9jZXNzb3JcbiAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cudzMub3JnL1RSL3dvcmtlcnMvfFdlYiBXb3JrZXJzfVxuICogQHNlZSB7QGxpbmsgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvY29tbW9uLWRvbS1pbnRlcmZhY2VzLmh0bWwjdHJhbnNmZXJhYmxlLW9iamVjdHN8VHJhbnNmZXJhYmxlIG9iamVjdHN9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tQcm9jZXNzb3JXb3JrZXIod29ya2VyRnVuY3Rpb24pIHtcbiAgdmFyIHBvc3RNZXNzYWdlO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgZGF0YSA9IGV2ZW50LmRhdGE7XG5cbiAgICB2YXIgdHJhbnNmZXJhYmxlT2JqZWN0cyA9IFtdO1xuICAgIHZhciByZXNwb25zZU1lc3NhZ2UgPSB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIHJlc3VsdDogdW5kZWZpbmVkLFxuICAgICAgZXJyb3I6IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHdoZW4oXG4gICAgICBjYWxsQW5kV3JhcCh3b3JrZXJGdW5jdGlvbiwgZGF0YS5wYXJhbWV0ZXJzLCB0cmFuc2ZlcmFibGVPYmplY3RzKVxuICAgIClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgcmVzcG9uc2VNZXNzYWdlLnJlc3VsdCA9IHJlc3VsdDtcbiAgICAgIH0pXG4gICAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAvLyBFcnJvcnMgY2FuJ3QgYmUgcG9zdGVkIGluIGEgbWVzc2FnZSwgY29weSB0aGUgcHJvcGVydGllc1xuICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZS5lcnJvciA9IHtcbiAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgICAgICAgIHN0YWNrOiBlLnN0YWNrLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzcG9uc2VNZXNzYWdlLmVycm9yID0gZTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWRlZmluZWQocG9zdE1lc3NhZ2UpKSB7XG4gICAgICAgICAgcG9zdE1lc3NhZ2UgPSBkZWZhdWx0VmFsdWUoc2VsZi53ZWJraXRQb3N0TWVzc2FnZSwgc2VsZi5wb3N0TWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRhdGEuY2FuVHJhbnNmZXJBcnJheUJ1ZmZlcikge1xuICAgICAgICAgIHRyYW5zZmVyYWJsZU9iamVjdHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcG9zdE1lc3NhZ2UocmVzcG9uc2VNZXNzYWdlLCB0cmFuc2ZlcmFibGVPYmplY3RzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nIHRyeWluZyB0byBwb3N0IHRoZSBtZXNzYWdlLCBwb3N0IGEgc2ltcGxlclxuICAgICAgICAgIC8vIGVycm9yIHRoYXQgd2UgY2FuIGJlIHN1cmUgd2lsbCBiZSBjbG9uZWFibGVcbiAgICAgICAgICByZXNwb25zZU1lc3NhZ2UucmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZS5lcnJvciA9XG4gICAgICAgICAgICBcInBvc3RNZXNzYWdlIGZhaWxlZCB3aXRoIGVycm9yOiBcIiArXG4gICAgICAgICAgICBmb3JtYXRFcnJvcihlKSArXG4gICAgICAgICAgICBcIlxcbiAgd2l0aCByZXNwb25zZU1lc3NhZ2U6IFwiICtcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlTWVzc2FnZSk7XG4gICAgICAgICAgcG9zdE1lc3NhZ2UocmVzcG9uc2VNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgY2FsY3VsYXRpb24gaW4gYSBXZWIgV29ya2VyLlxuICogQGNhbGxiYWNrIGNyZWF0ZVRhc2tQcm9jZXNzb3JXb3JrZXIuV29ya2VyRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1ldGVycyBQYXJhbWV0ZXJzIHRvIHRoZSBjYWxjdWxhdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXl9IHRyYW5zZmVyYWJsZU9iamVjdHMgQW4gYXJyYXkgdGhhdCBzaG91bGQgYmUgZmlsbGVkIHdpdGggcmVmZXJlbmNlcyB0byBvYmplY3RzIGluc2lkZVxuICogICAgICAgIHRoZSByZXN1bHQgdGhhdCBzaG91bGQgYmUgdHJhbnNmZXJyZWQgYmFjayB0byB0aGUgbWFpbiBkb2N1bWVudCBpbnN0ZWFkIG9mIGNvcGllZC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSByZXN1bHQgb2YgdGhlIGNhbGN1bGF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBmdW5jdGlvbiBjYWxjdWxhdGUocGFyYW1ldGVycywgdHJhbnNmZXJhYmxlT2JqZWN0cykge1xuICogICAvLyBwZXJmb3JtIHdoYXRldmVyIGNhbGN1bGF0aW9uIGlzIG5lY2Vzc2FyeS5cbiAqICAgdmFyIHR5cGVkQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDApO1xuICpcbiAqICAgLy8gdHlwZWQgYXJyYXlzIGFyZSB0cmFuc2ZlcmFibGVcbiAqICAgdHJhbnNmZXJhYmxlT2JqZWN0cy5wdXNoKHR5cGVkQXJyYXkpXG4gKlxuICogICByZXR1cm4ge1xuICogICAgICB0eXBlZEFycmF5IDogdHlwZWRBcnJheVxuICogICB9O1xuICogfVxuICovXG5cbi8qKlxuICogQSBXZWIgV29ya2VyIG1lc3NhZ2UgZXZlbnQgaGFuZGxlciBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgdGhlIGludGVyYWN0aW9uIHdpdGggVGFza1Byb2Nlc3NvcixcbiAqIHNwZWNpZmljYWxseSwgdGFzayBJRCBtYW5hZ2VtZW50IGFuZCBwb3N0aW5nIGEgcmVzcG9uc2UgbWVzc2FnZSBjb250YWluaW5nIHRoZSByZXN1bHQuXG4gKiBAY2FsbGJhY2sgY3JlYXRlVGFza1Byb2Nlc3Nvcldvcmtlci5UYXNrUHJvY2Vzc29yV29ya2VyRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIG9ubWVzc2FnZSBldmVudCBvYmplY3QuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVRhc2tQcm9jZXNzb3JXb3JrZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4561\n')}}]);