"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[2546],{24328:function(e,t,n){n.d(t,{Z:function(){return R}});var i=n(55431),r=n(36885),o=n(74187),s=n(6101),a=n(28641),l=n(92710),d=n(1295),c=n(91900);class h extends i.Z{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){(0,o.O3)()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;(0,s.qC)(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,s.nb)(i,n)}forEachFeatureAtCoordinate(e,t,n,i,r,o,s,l){let h;const u=t.viewState;function g(e,t,n,i){return r.call(o,t,e?n:null,i)}const p=u.projection,f=(0,c.Cf)(e.slice(),p),x=[[0,0]];if(p.canWrapX()&&i){const e=p.getExtent(),t=(0,a.dz)(e);x.push([-t,0],[t,0])}const m=t.layerStatesArray,T=m.length,y=[],_=[];for(let a=0;a<x.length;a++)for(let i=T-1;i>=0;--i){const r=m[i],o=r.layer;if(o.hasRenderer()&&(0,d.j)(r,u)&&s.call(l,o)){const i=o.getRenderer(),s=o.getSource();if(i&&s){const o=s.getWrapX()?f:e,l=g.bind(null,r.managed);_[0]=o[0]+x[a][0],_[1]=o[1]+x[a][1],h=i.forEachFeatureAtCoordinate(_,t,n,l,y)}if(h)return h}}if(0===y.length)return;const C=1/y.length;return y.forEach(((e,t)=>e.distanceSq+=t*C)),y.sort(((e,t)=>e.distanceSq-t.distanceSq)),y.some((e=>h=e.callback(e.feature,e.layer,e.geometry))),h}hasFeatureAtCoordinate(e,t,n,i,o,s){const a=this.forEachFeatureAtCoordinate(e,t,n,i,r.uX,this,o,s);return void 0!==a}getMap(){return this.map_}renderFrame(e){(0,o.O3)()}scheduleExpireIconCache(e){l.c.canExpireCache()&&e.postRenderFunctions.push(u)}}function u(e,t){l.c.expire()}var g=h,p=n(35990),f=n(57380),x=n(98771),m=n(10245),T=n(50147),y=n(65818),_=n(68326);class C extends g{constructor(e){super(e),this.fontChangeListenerKey_=(0,y.oL)(T.sG,p.Z.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=m.XV+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const i=new f.Z(e,void 0,t);n.dispatchEvent(i)}}disposeInternal(){(0,y.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(x.Z.PRECOMPOSE,e);const t=e.layerStatesArray.sort((function(e,t){return e.zIndex-t.zIndex})),n=e.viewState;this.children_.length=0;const i=[];let r=null;for(let o=0,s=t.length;o<s;++o){const s=t[o];e.layerIndex=o;const a=s.layer,l=a.getSourceState();if(!(0,d.j)(s,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const c=a.render(e,r);c&&(c!==r&&(this.children_.push(c),r=c),"getDeclutter"in a&&i.push(a))}for(let o=i.length-1;o>=0;--o)i[o].renderDeclutter(e);(0,_.hF)(this.element_,this.children_),this.dispatchRenderEvent(x.Z.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}var R=C},78490:function(e,t,n){n.d(t,{r:function(){return x},Z:function(){return _}});var i=n(85487),r=n(70553),o=n(62706),s=n(74187);class a extends o["default"]{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return(0,s.O3)()}getData(e){return null}prepareFrame(e){return(0,s.O3)()}renderFrame(e,t){return(0,s.O3)()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(i,r)=>{const o=this.loadedTileCallback.bind(this,n,i);return e.forEachLoadedTile(t,i,r,o)}}forEachFeatureAtCoordinate(e,t,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;t.getState()===r.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=r.Z.LOADED&&t!=r.Z.ERROR&&e.addEventListener(i.Z.CHANGE,this.boundHandleImageChange_),t==r.Z.IDLE&&(e.load(),t=e.getState()),t==r.Z.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var l=a,d=n(57380),c=n(98771),h=n(6101),u=n(79706),g=n(68326),p=n(65537),f=n(28641);const x=[];let m=null;function T(){m=(0,g.E4)(1,1,void 0,{willReadFrequently:!0})}class y extends l{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=(0,h.Ue)(),this.pixelTransform=(0,h.Ue)(),this.inversePixelTransform=(0,h.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){let i;m||T(),m.clearRect(0,0,1,1);try{m.drawImage(e,t,n,1,1,0,0,1,1),i=m.getImageData(0,0,1,1).data}catch(r){return m=null,null}return i}getBackground(e){const t=this.getLayer();let n=t.getBackground();return"function"===typeof n&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const i=this.getLayer().getClassName();let r,o;if(e&&e.className===i&&(!n||e&&e.style.backgroundColor&&(0,p.fS)((0,u._2)(e.style.backgroundColor),(0,u._2)(n)))){const t=e.firstElementChild;t instanceof HTMLCanvasElement&&(o=t.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=i;let e=r.style;e.position="absolute",e.width="100%",e.height="100%",o=(0,g.E4)();const t=o.canvas;r.appendChild(t),e=t.style,e.position="absolute",e.left="0",e.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const i=(0,f.rL)(n),r=(0,f.Xv)(n),o=(0,f.w$)(n),s=(0,f.hC)(n);(0,h.nn)(t.coordinateToPixelTransform,i),(0,h.nn)(t.coordinateToPixelTransform,r),(0,h.nn)(t.coordinateToPixelTransform,o),(0,h.nn)(t.coordinateToPixelTransform,s);const a=this.inversePixelTransform;(0,h.nn)(a,i),(0,h.nn)(a,r),(0,h.nn)(a,o),(0,h.nn)(a,s),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}dispatchRenderEvent_(e,t,n){const i=this.getLayer();if(i.hasListener(e)){const r=new d.Z(e,this.inversePixelTransform,n,t);i.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(c.Z.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(c.Z.POSTRENDER,e,t)}getRenderTransform(e,t,n,i,r,o,s){const a=r/2,l=o/2,d=i/t,c=-d,u=-e[0]+s,g=-e[1];return(0,h.qC)(this.tempTransform,a,l,d,c,-n,u,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var _=y},8845:function(e,t,n){var i=n(78490),r=n(20825),o=n(81499),s=n(2519),a=n(37195),l=n(6101),d=n(65537),c=n(28641),h=n(24121),u=n(74187),g=n(4307);class p extends i.Z{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,c.lJ)(),this.tmpTileRange_=new s.Z(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),i=t.getUseInterimTilesOnError();return n==a.Z.LOADED||n==a.Z.EMPTY||n==a.Z.ERROR&&!i}getTile(e,t,n,i){const r=i.pixelRatio,o=i.viewState.projection,s=this.getLayer(),l=s.getSource();let d=l.getTile(e,t,n,r,o);return d.getState()==a.Z.ERROR&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(d)||(d=d.getInterimTile()),d}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),i=(0,l.nn)(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!(0,c.b8)(s,i))return null;const d=t.pixelRatio,h=t.viewState.projection,u=t.viewState,p=n.getRenderSource(),f=p.getTileGridForProjection(u.projection),x=p.getTilePixelRatio(t.pixelRatio);for(let l=f.getZForResolution(u.resolution);l>=f.getMinZoom();--l){const e=f.getTileCoordForCoordAndZ(i,l),t=p.getTile(l,e[1],e[2],d,h);if(!(t instanceof r.Z||t instanceof o.Z)||t instanceof o.Z&&t.getState()===a.Z.EMPTY)return null;if(t.getState()!==a.Z.LOADED)continue;const n=f.getOrigin(l),s=(0,g.Pq)(f.getTileSize(l)),c=f.getResolution(l),m=Math.floor(x*((i[0]-n[0])/c-e[1]*s[0])),T=Math.floor(x*((n[1]-i[1])/c-e[2]*s[1])),y=Math.round(x*p.getGutterForProjection(u.projection));return this.getImageData(t.getImage(),m+y,T+y)}return null}loadedTileCallback(e,t,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(e,t,n)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],i=e.viewState,r=i.projection,o=i.resolution,s=i.center,g=i.rotation,p=e.pixelRatio,f=this.getLayer(),x=f.getSource(),m=x.getRevision(),T=x.getTileGridForProjection(r),y=T.getZForResolution(o,x.zDirection),_=T.getResolution(y);let C=e.extent;const R=e.viewState.resolution,S=x.getTilePixelRatio(p),I=Math.round((0,c.dz)(C)/R*p),E=Math.round((0,c.Cr)(C)/R*p),v=n.extent&&(0,h.dY)(n.extent,r);v&&(C=(0,c.Ed)(C,(0,h.dY)(n.extent,r)));const w=_*I/2/S,Z=_*E/2/S,b=[s[0]-w,s[1]-Z,s[0]+w,s[1]+Z],F=T.getTileRangeForExtentAndZ(C,y),D={};D[y]={};const P=this.createLoadedTileFinder(x,r,D),A=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;const M=g?(0,c.dY)(i.center,R,g,e.size):void 0;for(let l=F.minX;l<=F.maxX;++l)for(let t=F.minY;t<=F.maxY;++t){if(g&&!T.tileCoordIntersectsViewport([y,l,t],M))continue;const i=this.getTile(y,l,t,e);if(this.isDrawableTile(i)){const t=(0,u.sq)(this);if(i.getState()==a.Z.LOADED){D[y][i.tileCoord.toString()]=i;let e=i.inTransition(t);e&&1!==n.opacity&&(i.endTransition(t),e=!1),this.newTiles_||!e&&this.renderedTiles.includes(i)||(this.newTiles_=!0)}if(1===i.getAlpha(t,e.time))continue}const r=T.getTileCoordChildTileRange(i.tileCoord,L,A);let o=!1;r&&(o=P(y+1,r)),o||T.forEachTileCoordParentTileRange(i.tileCoord,P,L,A)}const O=_/o*p/S;(0,l.qC)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/p,1/p,g,-I/2,-E/2);const G=(0,l.BB)(this.pixelTransform);this.useContainer(t,G,this.getBackground(e));const k=this.context,B=k.canvas;(0,l.nb)(this.inversePixelTransform,this.pixelTransform),(0,l.qC)(this.tempTransform,I/2,E/2,O,O,0,-I/2,-E/2),B.width!=I||B.height!=E?(B.width=I,B.height=E):this.containerReused||k.clearRect(0,0,I,E),v&&this.clipUnrotated(k,e,v),x.getInterpolate()||(k.imageSmoothingEnabled=!1),this.preRender(k,e),this.renderedTiles.length=0;let j,N,q,z=Object.keys(D).map(Number);z.sort(d.j2),1!==n.opacity||this.containerReused&&!x.getOpaque(e.viewState.projection)?(j=[],N=[]):z=z.reverse();for(let a=z.length-1;a>=0;--a){const t=z[a],n=x.getTilePixelSize(t,p,r),i=T.getResolution(t),o=i/_,s=n[0]*o*O,d=n[1]*o*O,h=T.getTileCoordForCoordAndZ((0,c.rL)(b),t),g=T.getTileCoordExtent(h),f=(0,l.nn)(this.tempTransform,[S*(g[0]-b[0])/_,S*(b[3]-g[3])/_]),m=S*x.getGutterForProjection(r),C=D[t];for(const r in C){const n=C[r],i=n.tileCoord,o=h[1]-i[1],a=Math.round(f[0]-(o-1)*s),l=h[2]-i[2],g=Math.round(f[1]-(l-1)*d),p=Math.round(f[0]-o*s),T=Math.round(f[1]-l*d),_=a-p,R=g-T,S=y===t,I=S&&1!==n.getAlpha((0,u.sq)(this),e.time);let E=!1;if(!I)if(j){q=[p,T,p+_,T,p+_,T+R,p,T+R];for(let e=0,n=j.length;e<n;++e)if(y!==t&&t<N[e]){const t=j[e];(0,c.kK)([p,T,p+_,T+R],[t[0],t[3],t[4],t[7]])&&(E||(k.save(),E=!0),k.beginPath(),k.moveTo(q[0],q[1]),k.lineTo(q[2],q[3]),k.lineTo(q[4],q[5]),k.lineTo(q[6],q[7]),k.moveTo(t[6],t[7]),k.lineTo(t[4],t[5]),k.lineTo(t[2],t[3]),k.lineTo(t[0],t[1]),k.clip())}j.push(q),N.push(t)}else k.clearRect(p,T,_,R);this.drawTileImage(n,e,p,T,_,R,m,S),j&&!I?(E&&k.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(e.usedTiles,x,n)}}return this.renderedRevision=m,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!(0,c.fS)(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=p,this.renderedProjection=r,this.manageTilePyramid(e,x,T,p,r,C,y,f.getPreload()),this.scheduleExpireCache(e,x),this.postRender(k,e),n.extent&&k.restore(),k.imageSmoothingEnabled=!0,G!==B.style.transform&&(B.style.transform=G),this.container}drawTileImage(e,t,n,i,r,o,s,a){const l=this.getTileImage(e);if(!l)return;const d=(0,u.sq)(this),c=t.layerStatesArray[t.layerIndex],h=c.opacity*(a?e.getAlpha(d,t.time):1),g=h!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,i,r,o),g&&this.context.restore(),h!==c.opacity?t.animate=!0:a&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=function(e,t,n){const i=(0,u.sq)(e);i in n.usedTiles&&e.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const i=(0,u.sq)(t);i in e||(e[i]={}),e[i][n.getKey()]=!0}manageTilePyramid(e,t,n,i,r,o,s,l,d){const h=(0,u.sq)(t);h in e.wantedTiles||(e.wantedTiles[h]={});const g=e.wantedTiles[h],p=e.tileQueue,f=n.getMinZoom(),x=e.viewState.rotation,m=x?(0,c.dY)(e.viewState.center,e.viewState.resolution,x,e.size):void 0;let T,y,_,C,R,S,I=0;for(S=f;S<=s;++S)for(y=n.getTileRangeForExtentAndZ(o,S,y),_=n.getResolution(S),C=y.minX;C<=y.maxX;++C)for(R=y.minY;R<=y.maxY;++R)x&&!n.tileCoordIntersectsViewport([S,C,R],m)||(s-S<=l?(++I,T=t.getTile(S,C,R,i,r),T.getState()==a.Z.IDLE&&(g[T.getKey()]=!0,p.isKeyQueued(T.getKey())||p.enqueue([T,h,n.getTileCoordCenter(T.tileCoord),_])),void 0!==d&&d(T)):t.useTile(S,C,R,r));t.updateCacheSize(I,r)}}t["Z"]=p},60883:function(e,t,n){n.d(t,{Z:function(){return A}});var i=n(35570),r=n(78490),o=n(15240),s=n(37755),a=n(12382),l=n(6101),d=n(28641),c=n(68326),h=n(70553),u=n(74187);const g=.5,p={Point:v,LineString:S,Polygon:Z,MultiPoint:w,MultiLineString:I,MultiPolygon:E,GeometryCollection:R,Circle:T};function f(e,t){return parseInt((0,u.sq)(e),10)-parseInt((0,u.sq)(t),10)}function x(e,t){const n=m(e,t);return n*n}function m(e,t){return g*e/t}function T(e,t,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=e.getBuilder(n.getZIndex(),"Circle");r.setFillStrokeStyle(o,s),r.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const o=(r||e).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i)}}function y(e,t,n,i,r,o,s){let a=!1;const l=n.getImage();if(l){const e=l.getImageState();e==h.Z.LOADED||e==h.Z.ERROR?l.unlistenImageChange(r):(e==h.Z.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return _(e,t,n,i,o,s),a}function _(e,t,n,i,r,o){const s=n.getGeometryFunction()(t);if(!s)return;const a=s.simplifyTransformed(i,r),l=n.getRenderer();if(l)C(e,a,n,t);else{const i=p[a.getType()];i(e,a,n,t,o)}}function C(e,t,n,i){if("GeometryCollection"==t.getType()){const r=t.getGeometries();for(let t=0,o=r.length;t<o;++t)C(e,r[t],n,i);return}const r=e.getBuilder(n.getZIndex(),"Default");r.drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function R(e,t,n,i,r){const o=t.getGeometriesArray();let s,a;for(s=0,a=o.length;s<a;++s){const t=p[o[s].getType()];t(e,o[s],n,i,r)}}function S(e,t,n,i,r){const o=n.getStroke();if(o){const r=e.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawLineString(t,i)}const s=n.getText();if(s&&s.getText()){const o=(r||e).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(t,i)}}function I(e,t,n,i,r){const o=n.getStroke();if(o){const r=e.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawMultiLineString(t,i)}const s=n.getText();if(s&&s.getText()){const o=(r||e).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(t,i)}}function E(e,t,n,i,r){const o=n.getFill(),s=n.getStroke();if(s||o){const r=e.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const o=(r||e).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i)}}function v(e,t,n,i,r){const o=n.getImage(),s=n.getText();let a;if(o){if(o.getImageState()!=h.Z.LOADED)return;let l=e;if(r){const d=o.getDeclutterMode();if("none"!==d)if(l=r,"obstacle"===d){const r=e.getBuilder(n.getZIndex(),"Image");r.setImageStyle(o,a),r.drawPoint(t,i)}else s&&s.getText()&&(a={})}const d=l.getBuilder(n.getZIndex(),"Image");d.setImageStyle(o,a),d.drawPoint(t,i)}if(s&&s.getText()){let o=e;r&&(o=r);const l=o.getBuilder(n.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(t,i)}}function w(e,t,n,i,r){const o=n.getImage(),s=n.getText();let a;if(o){if(o.getImageState()!=h.Z.LOADED)return;let l=e;if(r){const d=o.getDeclutterMode();if("none"!==d)if(l=r,"obstacle"===d){const r=e.getBuilder(n.getZIndex(),"Image");r.setImageStyle(o,a),r.drawMultiPoint(t,i)}else s&&s.getText()&&(a={})}const d=l.getBuilder(n.getZIndex(),"Image");d.setImageStyle(o,a),d.drawMultiPoint(t,i)}if(s&&s.getText()){let o=e;r&&(o=r);const l=o.getBuilder(n.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(t,i)}}function Z(e,t,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=e.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const o=(r||e).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i)}}var b=n(65537),F=n(24121),D=n(91900);class P extends r.Z{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,d.lJ)(),this.wrappedRenderedExtent_=(0,d.lJ)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,n){const i=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,h=l.getExtent(),u=this.getLayer().getSource(),g=t.pixelRatio,p=t.viewHints,f=!(p[s.Z.ANIMATING]||p[s.Z.INTERACTING]),x=this.compositionContext_,m=Math.round(t.size[0]*g),T=Math.round(t.size[1]*g),y=u.getWrapX()&&l.canWrapX(),_=y?(0,d.dz)(h):null,C=y?Math.ceil((i[2]-h[2])/_)+1:1;let R=y?Math.floor((i[0]-h[0])/_):0;do{const t=this.getRenderTransform(o,a,c,g,m,T,R*_);e.execute(x,1,t,c,f,void 0,n)}while(++R<C)}setupCompositionContext_(){if(1!==this.opacity_){const e=(0,c.E4)(this.context.canvas.width,this.context.canvas.height,r.r);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,(0,c.jy)(this.compositionContext_),r.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const n=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];(0,l.n3)(this.pixelTransform,1/n,1/n),(0,l.nb)(this.inversePixelTransform,this.pixelTransform);const r=(0,l.BB)(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const o=this.context,s=o.canvas,a=this.replayGroup_,c=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!c||c.isEmpty()))return null;const h=Math.round(e.size[0]*n),u=Math.round(e.size[1]*n);s.width!=h||s.height!=u?(s.width=h,s.height=u,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,h,u),this.preRender(o,e);const g=e.viewState,p=g.projection;this.opacity_=i.opacity,this.setupCompositionContext_();let f=!1,x=!0;if(i.extent&&this.clipping){const t=(0,F.dY)(i.extent,p);x=(0,d.kK)(t,e.extent),f=x&&!(0,d.r4)(t,e.extent),f&&this.clipUnrotated(this.compositionContext_,e,t)}return x&&this.renderWorlds(a,e),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise((t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,l.nn)(this.pixelTransform,e);const t=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,o=this.wrappedRenderedExtent_,s=this.getLayer(),c=[],h=e[0]*a.UN,u=e[1]*a.UN;c.push(this.getRenderTransform(t,n,i,a.UN,h,u,0).slice());const g=s.getSource(),p=r.getExtent();if(g.getWrapX()&&r.canWrapX()&&!(0,d.r4)(p,o)){let e=o[0];const r=(0,d.dz)(p);let s,l=0;while(e<p[0])--l,s=r*l,c.push(this.getRenderTransform(t,n,i,a.UN,h,u,s).slice()),e+=r;l=0,e=o[2];while(e>p[2])++l,s=r*l,c.push(this.getRenderTransform(t,n,i,a.UN,h,u,s).slice()),e-=r}this.hitDetectionImageData_=(0,a.TU)(e,c,this.renderedFeatures_,s.getStyleFunction(),o,n,i)}t((0,a.ix)(e,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(e,t,n,i,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,s=t.viewState.rotation,a=this.getLayer(),l={},d=function(e,t,n){const o=(0,u.sq)(e),s=l[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return l[o]=!0,r.splice(r.lastIndexOf(s),1),i(e,a,t);s.geometry=t,s.distanceSq=n}}else{if(0===n)return l[o]=!0,i(e,a,t);r.push(l[o]={feature:e,layer:a,geometry:t,distanceSq:n,callback:i})}};let c;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some((i=>c=i.forEachFeatureAtCoordinate(e,o,s,n,d,i===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map((e=>e.value)):null))),c}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[s.Z.ANIMATING],a=e.viewHints[s.Z.INTERACTING],l=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!l&&r||!c&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=e.extent,u=e.viewState,g=u.projection,p=u.resolution,T=e.pixelRatio,y=t.getRevision(),_=t.getRenderBuffer();let C=t.getRenderOrder();void 0===C&&(C=f);const R=u.center.slice(),S=(0,d.f3)(h,_*p),I=S.slice(),E=[S.slice()],v=g.getExtent();if(n.getWrapX()&&g.canWrapX()&&!(0,d.r4)(v,e.extent)){const e=(0,d.dz)(v),t=Math.max((0,d.dz)(S)/2,e);S[0]=v[0]-t,S[2]=v[2]+t,(0,D.Cf)(R,g);const n=(0,d.Cf)(E[0],g);n[0]<v[0]&&n[2]<v[2]?E.push([n[0]+e,n[1],n[2]+e,n[3]]):n[0]>v[0]&&n[2]>v[2]&&E.push([n[0]-e,n[1],n[2]-e,n[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==y&&this.renderedRenderOrder_==C&&(0,d.r4)(this.wrappedRenderedExtent_,S))return(0,b.fS)(this.renderedExtent_,I)||(this.hitDetectionImageData_=null,this.renderedExtent_=I),this.renderedCenter_=R,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new i.Z(m(p,T),S,p,T);let Z;this.getLayer().getDeclutter()&&(Z=new i.Z(m(p,T),S,p,T));const P=(0,F.Cs)();let A;if(P){for(let e=0,t=E.length;e<t;++e){const t=E[e],i=(0,F.Fj)(t,g);n.loadFeatures(i,(0,F.on)(p,g),P)}A=(0,F.WO)(P,g)}else for(let i=0,o=E.length;i<o;++i)n.loadFeatures(E[i],p,g);const L=x(p,T);let M=!0;const O=e=>{let n;const i=e.getStyleFunction()||t.getStyleFunction();if(i&&(n=i(e,p)),n){const t=this.renderFeature(e,L,n,w,A,Z);M=M&&!t}},G=(0,F.Fj)(S,g),k=n.getFeaturesInExtent(G);C&&k.sort(C);for(let i=0,o=k.length;i<o;++i)O(k[i]);this.renderedFeatures_=k,this.ready=M;const B=w.finish(),j=new o.Z(S,p,T,n.getOverlaps(),B,t.getRenderBuffer());return Z&&(this.declutterExecutorGroup=new o.Z(S,p,T,n.getOverlaps(),Z.finish(),t.getRenderBuffer())),this.renderedResolution_=p,this.renderedRevision_=y,this.renderedRenderOrder_=C,this.renderedExtent_=I,this.wrappedRenderedExtent_=S,this.renderedCenter_=R,this.renderedProjection_=g,this.replayGroup_=j,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,i,r,o){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)s=y(i,e,n[a],t,this.boundHandleStyleImageChange_,r,o)||s;else s=y(i,e,n,t,this.boundHandleStyleImageChange_,r,o);return s}}var A=P}}]);
//# sourceMappingURL=chunk-vendors-8bebe738-legacy.532053d7.js.map