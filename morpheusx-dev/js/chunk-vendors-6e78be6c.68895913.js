"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[9989],{81326:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ hasExtension; }\n/* harmony export */ });\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82982);\n\n\n/**\n * Check if a specific extension is present on a JSON object. This can be used\n * for either 3D Tiles extensions or glTF extensions\n * @param {Object} json The JSON object\n * @param {String} extensionName The name of the extension, e.g. \'3DTILES_implicit_tiling\'\n * @returns {Boolean} True if the extension is present\n * @private\n */\nfunction hasExtension(json, extensionName) {\n  return (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(json) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(json.extensions) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(json.extensions[extensionName])\n  );\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODEzMjYuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNlO0FBQ2Y7QUFDQSxJQUFJLHFFQUFPO0FBQ1gsSUFBSSxxRUFBTztBQUNYLElBQUkscUVBQU87QUFDWDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL2hhc0V4dGVuc2lvbi5qcz8yZjY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBDaGVjayBpZiBhIHNwZWNpZmljIGV4dGVuc2lvbiBpcyBwcmVzZW50IG9uIGEgSlNPTiBvYmplY3QuIFRoaXMgY2FuIGJlIHVzZWRcbiAqIGZvciBlaXRoZXIgM0QgVGlsZXMgZXh0ZW5zaW9ucyBvciBnbFRGIGV4dGVuc2lvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBqc29uIFRoZSBKU09OIG9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IGV4dGVuc2lvbk5hbWUgVGhlIG5hbWUgb2YgdGhlIGV4dGVuc2lvbiwgZS5nLiAnM0RUSUxFU19pbXBsaWNpdF90aWxpbmcnXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXh0ZW5zaW9uIGlzIHByZXNlbnRcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhc0V4dGVuc2lvbihqc29uLCBleHRlbnNpb25OYW1lKSB7XG4gIHJldHVybiAoXG4gICAgZGVmaW5lZChqc29uKSAmJlxuICAgIGRlZmluZWQoanNvbi5leHRlbnNpb25zKSAmJlxuICAgIGRlZmluZWQoanNvbi5leHRlbnNpb25zW2V4dGVuc2lvbk5hbWVdKVxuICApO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///81326\n')},47548:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* unused harmony export default */\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82982);\n/* harmony import */ var _Core_deprecationWarning_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11954);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9407);\n/* harmony import */ var _BatchTableHierarchy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40384);\n/* harmony import */ var _FeatureMetadata_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50851);\n/* harmony import */ var _FeatureTable_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(59875);\n/* harmony import */ var _getBinaryAccessor_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17041);\n/* harmony import */ var _JsonMetadataTable_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(88893);\n/* harmony import */ var _MetadataSchema_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(40914);\n/* harmony import */ var _MetadataTable_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(14358);\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An object that parses the the 3D Tiles 1.0 batch table and transcodes it to\n * be compatible with feature metadata from the `EXT_feature_metadata` glTF extension\n * <p>\n * See the {@link https://github.com/CesiumGS/glTF/tree/3d-tiles-next/extensions/2.0/Vendor/EXT_feature_metadata|EXT_feature_metadata Extension} for glTF.\n * </p>\n *\n * @param {Object} options Object with the following properties:\n * @param {Number} options.count The number of features in the batch table.\n * @param {Object} options.batchTable The batch table JSON\n * @param {Uint8Array} [options.binaryBody] The batch table binary body\n * @return {FeatureMetadata} A transcoded feature metadata object\n *\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction parseBatchTable(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.count", options.count);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.batchTable", options.batchTable);\n  //>>includeEnd(\'debug\');\n\n  var featureCount = options.count;\n  var batchTable = options.batchTable;\n  var binaryBody = options.binaryBody;\n\n  // divide properties into binary, json and hierarchy\n  var partitionResults = partitionProperties(batchTable);\n\n  var jsonMetadataTable = new _JsonMetadataTable_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    count: featureCount,\n    properties: partitionResults.jsonProperties,\n  });\n\n  var hierarchy = initializeHierarchy(partitionResults.hierarchy, binaryBody);\n\n  var binaryResults = transcodeBinaryProperties(\n    featureCount,\n    partitionResults.binaryProperties,\n    binaryBody\n  );\n\n  var featureTableJson = binaryResults.featureTableJson;\n\n  var metadataTable = new _MetadataTable_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n    count: featureTableJson.count,\n    properties: featureTableJson.properties,\n    class: binaryResults.transcodedClass,\n    bufferViews: binaryResults.bufferViewsU8,\n  });\n\n  var featureTables = {\n    _batchTable: new _FeatureTable_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n      count: featureTableJson.count,\n      metadataTable: metadataTable,\n      jsonMetadataTable: jsonMetadataTable,\n      batchTableHierarchy: hierarchy,\n    }),\n  };\n\n  return new _FeatureMetadata_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z({\n    schema: binaryResults.transcodedSchema,\n    featureTables: featureTables,\n    extensions: partitionResults.extensions,\n    extras: partitionResults.extras,\n  });\n}\n\n/**\n * Divide the batch table\'s properties into binary, JSON and hierarchy\n * extension as each is handled separately\n *\n * @param {Object} batchTable The batch table JSON\n * @returns {Object} The batch table divided into binary, JSON and hierarchy portions. Extras and extensions are also divided out for ease of processing.\n *\n * @private\n */\nfunction partitionProperties(batchTable) {\n  var legacyHierarchy = batchTable.HIERARCHY;\n  var extras = batchTable.extras;\n  var extensions = batchTable.extensions;\n\n  var hierarchyExtension;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(legacyHierarchy)) {\n    parseBatchTable._deprecationWarning(\n      "batchTableHierarchyExtension",\n      "The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."\n    );\n    hierarchyExtension = legacyHierarchy;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(extensions)) {\n    hierarchyExtension = extensions["3DTILES_batch_table_hierarchy"];\n  }\n\n  var jsonProperties = {};\n  var binaryProperties = {};\n  for (var propertyId in batchTable) {\n    if (\n      !batchTable.hasOwnProperty(propertyId) ||\n      // these cases were handled above;\n      propertyId === "HIERARCHY" ||\n      propertyId === "extensions" ||\n      propertyId === "extras"\n    ) {\n      continue;\n    }\n\n    var property = batchTable[propertyId];\n    if (Array.isArray(property)) {\n      jsonProperties[propertyId] = property;\n    } else {\n      binaryProperties[propertyId] = property;\n    }\n  }\n\n  return {\n    binaryProperties: binaryProperties,\n    jsonProperties: jsonProperties,\n    hierarchy: hierarchyExtension,\n    extras: extras,\n    extensions: extensions,\n  };\n}\n\n/**\n * Transcode the binary properties of the batch table to be compatible with\n * <code>EXT_feature_metadata</code>\n *\n * @param {Number} featureCount The number of features in the batch table\n * @param {Object.<String, Object>} binaryProperties A dictionary of property ID to property definition\n * @param {Uint8Array} [binaryBody] The binary body of the batch table\n * @return {Object} Transcoded data needed for constructing a {@link FeatureMetadata} object.\n *\n * @private\n */\nfunction transcodeBinaryProperties(featureCount, binaryProperties, binaryBody) {\n  var classProperties = {};\n  var featureTableProperties = {};\n  var bufferViewsU8 = {};\n  var bufferViewCount = 0;\n  for (var propertyId in binaryProperties) {\n    if (!binaryProperties.hasOwnProperty(propertyId)) {\n      continue;\n    }\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(binaryBody)) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n        "Property " + propertyId + " requires a batch table binary."\n      );\n    }\n\n    var property = binaryProperties[propertyId];\n    var binaryAccessor = (0,_getBinaryAccessor_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(property);\n\n    featureTableProperties[propertyId] = {\n      bufferView: bufferViewCount,\n    };\n\n    classProperties[propertyId] = transcodePropertyType(property);\n\n    bufferViewsU8[bufferViewCount] = binaryAccessor.createArrayBufferView(\n      binaryBody.buffer,\n      binaryBody.byteOffset + property.byteOffset,\n      featureCount\n    );\n\n    bufferViewCount++;\n  }\n\n  var schemaJson = {\n    classes: {\n      _batchTable: {\n        properties: classProperties,\n      },\n    },\n  };\n  var transcodedSchema = new _MetadataSchema_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(schemaJson);\n\n  var featureTableJson = {\n    class: "_batchTable",\n    count: featureCount,\n    properties: featureTableProperties,\n  };\n\n  return {\n    featureTableJson: featureTableJson,\n    bufferViewsU8: bufferViewsU8,\n    transcodedSchema: transcodedSchema,\n    transcodedClass: transcodedSchema.classes._batchTable,\n  };\n}\n\n/**\n * Given a property definition from the batch table, compute the equivalent\n * <code>EXT_feature_metadata</code> type definition\n *\n * @param {Object} property The batch table property definition\n * @return {Object} The corresponding feature metadata property definition\n * @private\n */\nfunction transcodePropertyType(property) {\n  var componentType = transcodeComponentType(property.componentType);\n\n  var propertyType = property.type;\n  if (propertyType === "SCALAR") {\n    return {\n      type: componentType,\n    };\n  }\n\n  // propertyType is one of VEC2, VEC3, or VEC4\n  var componentCount = parseInt(propertyType.charAt(3));\n\n  return {\n    type: "ARRAY",\n    componentType: componentType,\n    componentCount: componentCount,\n  };\n}\n\n/**\n * Convert the component type of a batch table property to the corresponding\n * type used with feature metadata\n *\n * @property {String} componentType the batch table\'s component type\n * @return {String} The corresponding feature metadata data type\n *\n * @private\n */\nfunction transcodeComponentType(componentType) {\n  switch (componentType) {\n    case "BYTE":\n      return "INT8";\n    case "UNSIGNED_BYTE":\n      return "UINT8";\n    case "SHORT":\n      return "INT16";\n    case "UNSIGNED_SHORT":\n      return "UINT16";\n    case "INT":\n      return "INT32";\n    case "UNSIGNED_INT":\n      return "UINT32";\n    case "FLOAT":\n      return "FLOAT32";\n    case "DOUBLE":\n      return "FLOAT64";\n  }\n}\n\n/**\n * Construct a batch table hierarchy object if the <code>3DTILES_batch_table_hierarchy</code> extension is present\n *\n * @param {Object} [hierarchyExtension] The <code>3DTILES_batch_table_hierarchy</code> extension object.\n * @param {Uint8Array} binaryBody The binary body of the batch table\n * @return {BatchTableHierarchy} A batch table hierarchy, or <code>undefined</code> if the extension is not present.\n *\n * @private\n */\nfunction initializeHierarchy(hierarchyExtension, binaryBody) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(hierarchyExtension)) {\n    return new _BatchTableHierarchy_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({\n      extension: hierarchyExtension,\n      binaryBody: binaryBody,\n    });\n  }\n\n  return undefined;\n}\n\n// exposed for testing\nparseBatchTable._deprecationWarning = _Core_deprecationWarning_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0NBQXNDLDRFQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9wYXJzZUJhdGNoVGFibGUuanM/ZWI4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXByZWNhdGlvbldhcm5pbmcgZnJvbSBcIi4uL0NvcmUvZGVwcmVjYXRpb25XYXJuaW5nLmpzXCI7XG5pbXBvcnQgUnVudGltZUVycm9yIGZyb20gXCIuLi9Db3JlL1J1bnRpbWVFcnJvci5qc1wiO1xuaW1wb3J0IEJhdGNoVGFibGVIaWVyYXJjaHkgZnJvbSBcIi4vQmF0Y2hUYWJsZUhpZXJhcmNoeS5qc1wiO1xuaW1wb3J0IEZlYXR1cmVNZXRhZGF0YSBmcm9tIFwiLi9GZWF0dXJlTWV0YWRhdGEuanNcIjtcbmltcG9ydCBGZWF0dXJlVGFibGUgZnJvbSBcIi4vRmVhdHVyZVRhYmxlLmpzXCI7XG5pbXBvcnQgZ2V0QmluYXJ5QWNjZXNzb3IgZnJvbSBcIi4vZ2V0QmluYXJ5QWNjZXNzb3IuanNcIjtcbmltcG9ydCBKc29uTWV0YWRhdGFUYWJsZSBmcm9tIFwiLi9Kc29uTWV0YWRhdGFUYWJsZS5qc1wiO1xuaW1wb3J0IE1ldGFkYXRhU2NoZW1hIGZyb20gXCIuL01ldGFkYXRhU2NoZW1hLmpzXCI7XG5pbXBvcnQgTWV0YWRhdGFUYWJsZSBmcm9tIFwiLi9NZXRhZGF0YVRhYmxlLmpzXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRoYXQgcGFyc2VzIHRoZSB0aGUgM0QgVGlsZXMgMS4wIGJhdGNoIHRhYmxlIGFuZCB0cmFuc2NvZGVzIGl0IHRvXG4gKiBiZSBjb21wYXRpYmxlIHdpdGggZmVhdHVyZSBtZXRhZGF0YSBmcm9tIHRoZSBgRVhUX2ZlYXR1cmVfbWV0YWRhdGFgIGdsVEYgZXh0ZW5zaW9uXG4gKiA8cD5cbiAqIFNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy9nbFRGL3RyZWUvM2QtdGlsZXMtbmV4dC9leHRlbnNpb25zLzIuMC9WZW5kb3IvRVhUX2ZlYXR1cmVfbWV0YWRhdGF8RVhUX2ZlYXR1cmVfbWV0YWRhdGEgRXh0ZW5zaW9ufSBmb3IgZ2xURi5cbiAqIDwvcD5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5jb3VudCBUaGUgbnVtYmVyIG9mIGZlYXR1cmVzIGluIHRoZSBiYXRjaCB0YWJsZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmJhdGNoVGFibGUgVGhlIGJhdGNoIHRhYmxlIEpTT05cbiAqIEBwYXJhbSB7VWludDhBcnJheX0gW29wdGlvbnMuYmluYXJ5Qm9keV0gVGhlIGJhdGNoIHRhYmxlIGJpbmFyeSBib2R5XG4gKiBAcmV0dXJuIHtGZWF0dXJlTWV0YWRhdGF9IEEgdHJhbnNjb2RlZCBmZWF0dXJlIG1ldGFkYXRhIG9iamVjdFxuICpcbiAqIEBwcml2YXRlXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgZmVhdHVyZSBpcyB1c2luZyBwYXJ0IG9mIHRoZSAzRCBUaWxlcyBzcGVjIHRoYXQgaXMgbm90IGZpbmFsIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IENlc2l1bSdzIHN0YW5kYXJkIGRlcHJlY2F0aW9uIHBvbGljeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VCYXRjaFRhYmxlKG9wdGlvbnMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcIm9wdGlvbnMuY291bnRcIiwgb3B0aW9ucy5jb3VudCk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmJhdGNoVGFibGVcIiwgb3B0aW9ucy5iYXRjaFRhYmxlKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGZlYXR1cmVDb3VudCA9IG9wdGlvbnMuY291bnQ7XG4gIHZhciBiYXRjaFRhYmxlID0gb3B0aW9ucy5iYXRjaFRhYmxlO1xuICB2YXIgYmluYXJ5Qm9keSA9IG9wdGlvbnMuYmluYXJ5Qm9keTtcblxuICAvLyBkaXZpZGUgcHJvcGVydGllcyBpbnRvIGJpbmFyeSwganNvbiBhbmQgaGllcmFyY2h5XG4gIHZhciBwYXJ0aXRpb25SZXN1bHRzID0gcGFydGl0aW9uUHJvcGVydGllcyhiYXRjaFRhYmxlKTtcblxuICB2YXIganNvbk1ldGFkYXRhVGFibGUgPSBuZXcgSnNvbk1ldGFkYXRhVGFibGUoe1xuICAgIGNvdW50OiBmZWF0dXJlQ291bnQsXG4gICAgcHJvcGVydGllczogcGFydGl0aW9uUmVzdWx0cy5qc29uUHJvcGVydGllcyxcbiAgfSk7XG5cbiAgdmFyIGhpZXJhcmNoeSA9IGluaXRpYWxpemVIaWVyYXJjaHkocGFydGl0aW9uUmVzdWx0cy5oaWVyYXJjaHksIGJpbmFyeUJvZHkpO1xuXG4gIHZhciBiaW5hcnlSZXN1bHRzID0gdHJhbnNjb2RlQmluYXJ5UHJvcGVydGllcyhcbiAgICBmZWF0dXJlQ291bnQsXG4gICAgcGFydGl0aW9uUmVzdWx0cy5iaW5hcnlQcm9wZXJ0aWVzLFxuICAgIGJpbmFyeUJvZHlcbiAgKTtcblxuICB2YXIgZmVhdHVyZVRhYmxlSnNvbiA9IGJpbmFyeVJlc3VsdHMuZmVhdHVyZVRhYmxlSnNvbjtcblxuICB2YXIgbWV0YWRhdGFUYWJsZSA9IG5ldyBNZXRhZGF0YVRhYmxlKHtcbiAgICBjb3VudDogZmVhdHVyZVRhYmxlSnNvbi5jb3VudCxcbiAgICBwcm9wZXJ0aWVzOiBmZWF0dXJlVGFibGVKc29uLnByb3BlcnRpZXMsXG4gICAgY2xhc3M6IGJpbmFyeVJlc3VsdHMudHJhbnNjb2RlZENsYXNzLFxuICAgIGJ1ZmZlclZpZXdzOiBiaW5hcnlSZXN1bHRzLmJ1ZmZlclZpZXdzVTgsXG4gIH0pO1xuXG4gIHZhciBmZWF0dXJlVGFibGVzID0ge1xuICAgIF9iYXRjaFRhYmxlOiBuZXcgRmVhdHVyZVRhYmxlKHtcbiAgICAgIGNvdW50OiBmZWF0dXJlVGFibGVKc29uLmNvdW50LFxuICAgICAgbWV0YWRhdGFUYWJsZTogbWV0YWRhdGFUYWJsZSxcbiAgICAgIGpzb25NZXRhZGF0YVRhYmxlOiBqc29uTWV0YWRhdGFUYWJsZSxcbiAgICAgIGJhdGNoVGFibGVIaWVyYXJjaHk6IGhpZXJhcmNoeSxcbiAgICB9KSxcbiAgfTtcblxuICByZXR1cm4gbmV3IEZlYXR1cmVNZXRhZGF0YSh7XG4gICAgc2NoZW1hOiBiaW5hcnlSZXN1bHRzLnRyYW5zY29kZWRTY2hlbWEsXG4gICAgZmVhdHVyZVRhYmxlczogZmVhdHVyZVRhYmxlcyxcbiAgICBleHRlbnNpb25zOiBwYXJ0aXRpb25SZXN1bHRzLmV4dGVuc2lvbnMsXG4gICAgZXh0cmFzOiBwYXJ0aXRpb25SZXN1bHRzLmV4dHJhcyxcbiAgfSk7XG59XG5cbi8qKlxuICogRGl2aWRlIHRoZSBiYXRjaCB0YWJsZSdzIHByb3BlcnRpZXMgaW50byBiaW5hcnksIEpTT04gYW5kIGhpZXJhcmNoeVxuICogZXh0ZW5zaW9uIGFzIGVhY2ggaXMgaGFuZGxlZCBzZXBhcmF0ZWx5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGJhdGNoVGFibGUgVGhlIGJhdGNoIHRhYmxlIEpTT05cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBiYXRjaCB0YWJsZSBkaXZpZGVkIGludG8gYmluYXJ5LCBKU09OIGFuZCBoaWVyYXJjaHkgcG9ydGlvbnMuIEV4dHJhcyBhbmQgZXh0ZW5zaW9ucyBhcmUgYWxzbyBkaXZpZGVkIG91dCBmb3IgZWFzZSBvZiBwcm9jZXNzaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnRpdGlvblByb3BlcnRpZXMoYmF0Y2hUYWJsZSkge1xuICB2YXIgbGVnYWN5SGllcmFyY2h5ID0gYmF0Y2hUYWJsZS5ISUVSQVJDSFk7XG4gIHZhciBleHRyYXMgPSBiYXRjaFRhYmxlLmV4dHJhcztcbiAgdmFyIGV4dGVuc2lvbnMgPSBiYXRjaFRhYmxlLmV4dGVuc2lvbnM7XG5cbiAgdmFyIGhpZXJhcmNoeUV4dGVuc2lvbjtcbiAgaWYgKGRlZmluZWQobGVnYWN5SGllcmFyY2h5KSkge1xuICAgIHBhcnNlQmF0Y2hUYWJsZS5fZGVwcmVjYXRpb25XYXJuaW5nKFxuICAgICAgXCJiYXRjaFRhYmxlSGllcmFyY2h5RXh0ZW5zaW9uXCIsXG4gICAgICBcIlRoZSBiYXRjaCB0YWJsZSBISUVSQVJDSFkgcHJvcGVydHkgaGFzIGJlZW4gbW92ZWQgdG8gYW4gZXh0ZW5zaW9uLiBVc2UgZXh0ZW5zaW9ucy4zRFRJTEVTX2JhdGNoX3RhYmxlX2hpZXJhcmNoeSBpbnN0ZWFkLlwiXG4gICAgKTtcbiAgICBoaWVyYXJjaHlFeHRlbnNpb24gPSBsZWdhY3lIaWVyYXJjaHk7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChleHRlbnNpb25zKSkge1xuICAgIGhpZXJhcmNoeUV4dGVuc2lvbiA9IGV4dGVuc2lvbnNbXCIzRFRJTEVTX2JhdGNoX3RhYmxlX2hpZXJhcmNoeVwiXTtcbiAgfVxuXG4gIHZhciBqc29uUHJvcGVydGllcyA9IHt9O1xuICB2YXIgYmluYXJ5UHJvcGVydGllcyA9IHt9O1xuICBmb3IgKHZhciBwcm9wZXJ0eUlkIGluIGJhdGNoVGFibGUpIHtcbiAgICBpZiAoXG4gICAgICAhYmF0Y2hUYWJsZS5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eUlkKSB8fFxuICAgICAgLy8gdGhlc2UgY2FzZXMgd2VyZSBoYW5kbGVkIGFib3ZlO1xuICAgICAgcHJvcGVydHlJZCA9PT0gXCJISUVSQVJDSFlcIiB8fFxuICAgICAgcHJvcGVydHlJZCA9PT0gXCJleHRlbnNpb25zXCIgfHxcbiAgICAgIHByb3BlcnR5SWQgPT09IFwiZXh0cmFzXCJcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBwcm9wZXJ0eSA9IGJhdGNoVGFibGVbcHJvcGVydHlJZF07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcGVydHkpKSB7XG4gICAgICBqc29uUHJvcGVydGllc1twcm9wZXJ0eUlkXSA9IHByb3BlcnR5O1xuICAgIH0gZWxzZSB7XG4gICAgICBiaW5hcnlQcm9wZXJ0aWVzW3Byb3BlcnR5SWRdID0gcHJvcGVydHk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBiaW5hcnlQcm9wZXJ0aWVzOiBiaW5hcnlQcm9wZXJ0aWVzLFxuICAgIGpzb25Qcm9wZXJ0aWVzOiBqc29uUHJvcGVydGllcyxcbiAgICBoaWVyYXJjaHk6IGhpZXJhcmNoeUV4dGVuc2lvbixcbiAgICBleHRyYXM6IGV4dHJhcyxcbiAgICBleHRlbnNpb25zOiBleHRlbnNpb25zLFxuICB9O1xufVxuXG4vKipcbiAqIFRyYW5zY29kZSB0aGUgYmluYXJ5IHByb3BlcnRpZXMgb2YgdGhlIGJhdGNoIHRhYmxlIHRvIGJlIGNvbXBhdGlibGUgd2l0aFxuICogPGNvZGU+RVhUX2ZlYXR1cmVfbWV0YWRhdGE8L2NvZGU+XG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGZlYXR1cmVDb3VudCBUaGUgbnVtYmVyIG9mIGZlYXR1cmVzIGluIHRoZSBiYXRjaCB0YWJsZVxuICogQHBhcmFtIHtPYmplY3QuPFN0cmluZywgT2JqZWN0Pn0gYmluYXJ5UHJvcGVydGllcyBBIGRpY3Rpb25hcnkgb2YgcHJvcGVydHkgSUQgdG8gcHJvcGVydHkgZGVmaW5pdGlvblxuICogQHBhcmFtIHtVaW50OEFycmF5fSBbYmluYXJ5Qm9keV0gVGhlIGJpbmFyeSBib2R5IG9mIHRoZSBiYXRjaCB0YWJsZVxuICogQHJldHVybiB7T2JqZWN0fSBUcmFuc2NvZGVkIGRhdGEgbmVlZGVkIGZvciBjb25zdHJ1Y3RpbmcgYSB7QGxpbmsgRmVhdHVyZU1ldGFkYXRhfSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdHJhbnNjb2RlQmluYXJ5UHJvcGVydGllcyhmZWF0dXJlQ291bnQsIGJpbmFyeVByb3BlcnRpZXMsIGJpbmFyeUJvZHkpIHtcbiAgdmFyIGNsYXNzUHJvcGVydGllcyA9IHt9O1xuICB2YXIgZmVhdHVyZVRhYmxlUHJvcGVydGllcyA9IHt9O1xuICB2YXIgYnVmZmVyVmlld3NVOCA9IHt9O1xuICB2YXIgYnVmZmVyVmlld0NvdW50ID0gMDtcbiAgZm9yICh2YXIgcHJvcGVydHlJZCBpbiBiaW5hcnlQcm9wZXJ0aWVzKSB7XG4gICAgaWYgKCFiaW5hcnlQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5SWQpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoIWRlZmluZWQoYmluYXJ5Qm9keSkpIHtcbiAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgIFwiUHJvcGVydHkgXCIgKyBwcm9wZXJ0eUlkICsgXCIgcmVxdWlyZXMgYSBiYXRjaCB0YWJsZSBiaW5hcnkuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIHByb3BlcnR5ID0gYmluYXJ5UHJvcGVydGllc1twcm9wZXJ0eUlkXTtcbiAgICB2YXIgYmluYXJ5QWNjZXNzb3IgPSBnZXRCaW5hcnlBY2Nlc3Nvcihwcm9wZXJ0eSk7XG5cbiAgICBmZWF0dXJlVGFibGVQcm9wZXJ0aWVzW3Byb3BlcnR5SWRdID0ge1xuICAgICAgYnVmZmVyVmlldzogYnVmZmVyVmlld0NvdW50LFxuICAgIH07XG5cbiAgICBjbGFzc1Byb3BlcnRpZXNbcHJvcGVydHlJZF0gPSB0cmFuc2NvZGVQcm9wZXJ0eVR5cGUocHJvcGVydHkpO1xuXG4gICAgYnVmZmVyVmlld3NVOFtidWZmZXJWaWV3Q291bnRdID0gYmluYXJ5QWNjZXNzb3IuY3JlYXRlQXJyYXlCdWZmZXJWaWV3KFxuICAgICAgYmluYXJ5Qm9keS5idWZmZXIsXG4gICAgICBiaW5hcnlCb2R5LmJ5dGVPZmZzZXQgKyBwcm9wZXJ0eS5ieXRlT2Zmc2V0LFxuICAgICAgZmVhdHVyZUNvdW50XG4gICAgKTtcblxuICAgIGJ1ZmZlclZpZXdDb3VudCsrO1xuICB9XG5cbiAgdmFyIHNjaGVtYUpzb24gPSB7XG4gICAgY2xhc3Nlczoge1xuICAgICAgX2JhdGNoVGFibGU6IHtcbiAgICAgICAgcHJvcGVydGllczogY2xhc3NQcm9wZXJ0aWVzLFxuICAgICAgfSxcbiAgICB9LFxuICB9O1xuICB2YXIgdHJhbnNjb2RlZFNjaGVtYSA9IG5ldyBNZXRhZGF0YVNjaGVtYShzY2hlbWFKc29uKTtcblxuICB2YXIgZmVhdHVyZVRhYmxlSnNvbiA9IHtcbiAgICBjbGFzczogXCJfYmF0Y2hUYWJsZVwiLFxuICAgIGNvdW50OiBmZWF0dXJlQ291bnQsXG4gICAgcHJvcGVydGllczogZmVhdHVyZVRhYmxlUHJvcGVydGllcyxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGZlYXR1cmVUYWJsZUpzb246IGZlYXR1cmVUYWJsZUpzb24sXG4gICAgYnVmZmVyVmlld3NVODogYnVmZmVyVmlld3NVOCxcbiAgICB0cmFuc2NvZGVkU2NoZW1hOiB0cmFuc2NvZGVkU2NoZW1hLFxuICAgIHRyYW5zY29kZWRDbGFzczogdHJhbnNjb2RlZFNjaGVtYS5jbGFzc2VzLl9iYXRjaFRhYmxlLFxuICB9O1xufVxuXG4vKipcbiAqIEdpdmVuIGEgcHJvcGVydHkgZGVmaW5pdGlvbiBmcm9tIHRoZSBiYXRjaCB0YWJsZSwgY29tcHV0ZSB0aGUgZXF1aXZhbGVudFxuICogPGNvZGU+RVhUX2ZlYXR1cmVfbWV0YWRhdGE8L2NvZGU+IHR5cGUgZGVmaW5pdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0eSBUaGUgYmF0Y2ggdGFibGUgcHJvcGVydHkgZGVmaW5pdGlvblxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgY29ycmVzcG9uZGluZyBmZWF0dXJlIG1ldGFkYXRhIHByb3BlcnR5IGRlZmluaXRpb25cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRyYW5zY29kZVByb3BlcnR5VHlwZShwcm9wZXJ0eSkge1xuICB2YXIgY29tcG9uZW50VHlwZSA9IHRyYW5zY29kZUNvbXBvbmVudFR5cGUocHJvcGVydHkuY29tcG9uZW50VHlwZSk7XG5cbiAgdmFyIHByb3BlcnR5VHlwZSA9IHByb3BlcnR5LnR5cGU7XG4gIGlmIChwcm9wZXJ0eVR5cGUgPT09IFwiU0NBTEFSXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogY29tcG9uZW50VHlwZSxcbiAgICB9O1xuICB9XG5cbiAgLy8gcHJvcGVydHlUeXBlIGlzIG9uZSBvZiBWRUMyLCBWRUMzLCBvciBWRUM0XG4gIHZhciBjb21wb25lbnRDb3VudCA9IHBhcnNlSW50KHByb3BlcnR5VHlwZS5jaGFyQXQoMykpO1xuXG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJBUlJBWVwiLFxuICAgIGNvbXBvbmVudFR5cGU6IGNvbXBvbmVudFR5cGUsXG4gICAgY29tcG9uZW50Q291bnQ6IGNvbXBvbmVudENvdW50LFxuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnQgdGhlIGNvbXBvbmVudCB0eXBlIG9mIGEgYmF0Y2ggdGFibGUgcHJvcGVydHkgdG8gdGhlIGNvcnJlc3BvbmRpbmdcbiAqIHR5cGUgdXNlZCB3aXRoIGZlYXR1cmUgbWV0YWRhdGFcbiAqXG4gKiBAcHJvcGVydHkge1N0cmluZ30gY29tcG9uZW50VHlwZSB0aGUgYmF0Y2ggdGFibGUncyBjb21wb25lbnQgdHlwZVxuICogQHJldHVybiB7U3RyaW5nfSBUaGUgY29ycmVzcG9uZGluZyBmZWF0dXJlIG1ldGFkYXRhIGRhdGEgdHlwZVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRyYW5zY29kZUNvbXBvbmVudFR5cGUoY29tcG9uZW50VHlwZSkge1xuICBzd2l0Y2ggKGNvbXBvbmVudFR5cGUpIHtcbiAgICBjYXNlIFwiQllURVwiOlxuICAgICAgcmV0dXJuIFwiSU5UOFwiO1xuICAgIGNhc2UgXCJVTlNJR05FRF9CWVRFXCI6XG4gICAgICByZXR1cm4gXCJVSU5UOFwiO1xuICAgIGNhc2UgXCJTSE9SVFwiOlxuICAgICAgcmV0dXJuIFwiSU5UMTZcIjtcbiAgICBjYXNlIFwiVU5TSUdORURfU0hPUlRcIjpcbiAgICAgIHJldHVybiBcIlVJTlQxNlwiO1xuICAgIGNhc2UgXCJJTlRcIjpcbiAgICAgIHJldHVybiBcIklOVDMyXCI7XG4gICAgY2FzZSBcIlVOU0lHTkVEX0lOVFwiOlxuICAgICAgcmV0dXJuIFwiVUlOVDMyXCI7XG4gICAgY2FzZSBcIkZMT0FUXCI6XG4gICAgICByZXR1cm4gXCJGTE9BVDMyXCI7XG4gICAgY2FzZSBcIkRPVUJMRVwiOlxuICAgICAgcmV0dXJuIFwiRkxPQVQ2NFwiO1xuICB9XG59XG5cbi8qKlxuICogQ29uc3RydWN0IGEgYmF0Y2ggdGFibGUgaGllcmFyY2h5IG9iamVjdCBpZiB0aGUgPGNvZGU+M0RUSUxFU19iYXRjaF90YWJsZV9oaWVyYXJjaHk8L2NvZGU+IGV4dGVuc2lvbiBpcyBwcmVzZW50XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtoaWVyYXJjaHlFeHRlbnNpb25dIFRoZSA8Y29kZT4zRFRJTEVTX2JhdGNoX3RhYmxlX2hpZXJhcmNoeTwvY29kZT4gZXh0ZW5zaW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYmluYXJ5Qm9keSBUaGUgYmluYXJ5IGJvZHkgb2YgdGhlIGJhdGNoIHRhYmxlXG4gKiBAcmV0dXJuIHtCYXRjaFRhYmxlSGllcmFyY2h5fSBBIGJhdGNoIHRhYmxlIGhpZXJhcmNoeSwgb3IgPGNvZGU+dW5kZWZpbmVkPC9jb2RlPiBpZiB0aGUgZXh0ZW5zaW9uIGlzIG5vdCBwcmVzZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGluaXRpYWxpemVIaWVyYXJjaHkoaGllcmFyY2h5RXh0ZW5zaW9uLCBiaW5hcnlCb2R5KSB7XG4gIGlmIChkZWZpbmVkKGhpZXJhcmNoeUV4dGVuc2lvbikpIHtcbiAgICByZXR1cm4gbmV3IEJhdGNoVGFibGVIaWVyYXJjaHkoe1xuICAgICAgZXh0ZW5zaW9uOiBoaWVyYXJjaHlFeHRlbnNpb24sXG4gICAgICBiaW5hcnlCb2R5OiBiaW5hcnlCb2R5LFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLy8gZXhwb3NlZCBmb3IgdGVzdGluZ1xucGFyc2VCYXRjaFRhYmxlLl9kZXByZWNhdGlvbldhcm5pbmcgPSBkZXByZWNhdGlvbldhcm5pbmc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///47548\n')},19661:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ parseBoundingVolumeSemantics; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82982);\n\n\n\n/**\n * Parse the bounding volume-related semantics such as\n * <code>TILE_BOUNDING_BOX</code> and <code>CONTENT_BOUNDING_REGION</code> from\n * implicit tile metadata. Results are returned as a JSON object for use when\n * transcoding tiles (see {@link Implicit3DTileContent}).\n * <p>\n * Bounding volumes are checked in the order box, region, then sphere. Only\n * the first valid bounding volume is returned.\n * </p>\n *\n * @see {@link https://github.com/CesiumGS/3d-tiles/tree/3d-tiles-next/specification/Metadata/Semantics|Semantics Specification} for the various bounding volumes and minimum/maximum heights.\n *\n * @param {TileMetadata} tileMetadata The metadata object for looking up values by semantic. In practice, this will typically be a {@link ImplicitTileMetadata}\n * @return {Object} An object containing a <code>tile</code> property and a <code>content</code> property. These contain the bounding volume, and any minimum or maximum height.\n *\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction parseBoundingVolumeSemantics(tileMetadata) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("tileMetadata", tileMetadata);\n  //>>includeEnd(\'debug\');\n\n  return {\n    tile: {\n      boundingVolume: parseBoundingVolume("TILE", tileMetadata),\n      minimumHeight: parseMinimumHeight("TILE", tileMetadata),\n      maximumHeight: parseMaximumHeight("TILE", tileMetadata),\n    },\n    content: {\n      boundingVolume: parseBoundingVolume("CONTENT", tileMetadata),\n      minimumHeight: parseMinimumHeight("CONTENT", tileMetadata),\n      maximumHeight: parseMaximumHeight("CONTENT", tileMetadata),\n    },\n  };\n}\n\n/**\n * Parse the bounding volume from a tile metadata. If the metadata specify\n * multiple bounding volumes, only the first one is returned. Bounding volumes\n * are checked in the order box, region, then sphere.\n *\n * This handles both tile and content bounding volumes, as the only difference\n * is the prefix. e.g. <code>TILE_BOUNDING_BOX</code> and\n * <code>CONTENT_BOUNDING_BOX</code> have the same memory layout.\n *\n * @param {String} prefix Either "TILE" or "CONTENT"\n * @param {TileMetadata} tileMetadata The tileMetadata for looking up values\n * @return {Object} An object representing the JSON description of the tile metadata\n * @private\n */\nfunction parseBoundingVolume(prefix, tileMetadata) {\n  var boundingBoxSemantic = prefix + "_BOUNDING_BOX";\n  var boundingBox = tileMetadata.getPropertyBySemantic(boundingBoxSemantic);\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(boundingBox)) {\n    return {\n      box: boundingBox,\n    };\n  }\n\n  var boundingRegionSemantic = prefix + "_BOUNDING_REGION";\n  var boundingRegion = tileMetadata.getPropertyBySemantic(\n    boundingRegionSemantic\n  );\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(boundingRegion)) {\n    return {\n      region: boundingRegion,\n    };\n  }\n\n  var boundingSphereSemantic = prefix + "_BOUNDING_SPHERE";\n  var boundingSphere = tileMetadata.getPropertyBySemantic(\n    boundingSphereSemantic\n  );\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(boundingSphere)) {\n    // ARRAY with 4 elements is automatically converted to a Cartesian4\n    return {\n      sphere: [\n        boundingSphere.x,\n        boundingSphere.y,\n        boundingSphere.z,\n        boundingSphere.w,\n      ],\n    };\n  }\n\n  return undefined;\n}\n\n/**\n * Parse the minimum height from tile metadata. This is used for making tighter\n * quadtree bounds for implicit tiling. This works for both\n * <code>TILE_MINIMUM_HEIGHT</code> and <code>CONTENT_MINIMUM_HEIGHT</code>\n *\n * @param {String} prefix Either "TILE" or "CONTENT"\n * @param {TileMetadata} tileMetadata The tileMetadata for looking up values\n * @return {Number} The minimum height\n * @private\n */\nfunction parseMinimumHeight(prefix, tileMetadata) {\n  var minimumHeightSemantic = prefix + "_MINIMUM_HEIGHT";\n  return tileMetadata.getPropertyBySemantic(minimumHeightSemantic);\n}\n\n/**\n * Parse the maximum height from tile metadata. This is used for making tighter\n * quadtree bounds for implicit tiling. This works for both\n * <code>TILE_MAXIMUM_HEIGHT</code> and <code>CONTENT_MAXIMUM_HEIGHT</code>\n *\n * @param {String} prefix Either "TILE" or "CONTENT"\n * @param {TileMetadata} tileMetadata The tileMetadata for looking up values\n * @return {Number} The maximum height\n * @private\n */\nfunction parseMaximumHeight(prefix, tileMetadata) {\n  var maximumHeightSemantic = prefix + "_MAXIMUM_HEIGHT";\n  return tileMetadata.getPropertyBySemantic(maximumHeightSemantic);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk2NjEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFDSTs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsNEJBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHdIQUF3SDtBQUNqSTtBQUNBLFdBQVcsY0FBYywyR0FBMkc7QUFDcEksWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBLEVBQUUsMkZBQW1CO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxjQUFjO0FBQ3pCLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLGNBQWM7QUFDekIsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsY0FBYztBQUN6QixZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL3BhcnNlQm91bmRpbmdWb2x1bWVTZW1hbnRpY3MuanM/MjA5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBQYXJzZSB0aGUgYm91bmRpbmcgdm9sdW1lLXJlbGF0ZWQgc2VtYW50aWNzIHN1Y2ggYXNcbiAqIDxjb2RlPlRJTEVfQk9VTkRJTkdfQk9YPC9jb2RlPiBhbmQgPGNvZGU+Q09OVEVOVF9CT1VORElOR19SRUdJT048L2NvZGU+IGZyb21cbiAqIGltcGxpY2l0IHRpbGUgbWV0YWRhdGEuIFJlc3VsdHMgYXJlIHJldHVybmVkIGFzIGEgSlNPTiBvYmplY3QgZm9yIHVzZSB3aGVuXG4gKiB0cmFuc2NvZGluZyB0aWxlcyAoc2VlIHtAbGluayBJbXBsaWNpdDNEVGlsZUNvbnRlbnR9KS5cbiAqIDxwPlxuICogQm91bmRpbmcgdm9sdW1lcyBhcmUgY2hlY2tlZCBpbiB0aGUgb3JkZXIgYm94LCByZWdpb24sIHRoZW4gc3BoZXJlLiBPbmx5XG4gKiB0aGUgZmlyc3QgdmFsaWQgYm91bmRpbmcgdm9sdW1lIGlzIHJldHVybmVkLlxuICogPC9wPlxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy8zZC10aWxlcy90cmVlLzNkLXRpbGVzLW5leHQvc3BlY2lmaWNhdGlvbi9NZXRhZGF0YS9TZW1hbnRpY3N8U2VtYW50aWNzIFNwZWNpZmljYXRpb259IGZvciB0aGUgdmFyaW91cyBib3VuZGluZyB2b2x1bWVzIGFuZCBtaW5pbXVtL21heGltdW0gaGVpZ2h0cy5cbiAqXG4gKiBAcGFyYW0ge1RpbGVNZXRhZGF0YX0gdGlsZU1ldGFkYXRhIFRoZSBtZXRhZGF0YSBvYmplY3QgZm9yIGxvb2tpbmcgdXAgdmFsdWVzIGJ5IHNlbWFudGljLiBJbiBwcmFjdGljZSwgdGhpcyB3aWxsIHR5cGljYWxseSBiZSBhIHtAbGluayBJbXBsaWNpdFRpbGVNZXRhZGF0YX1cbiAqIEByZXR1cm4ge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgYSA8Y29kZT50aWxlPC9jb2RlPiBwcm9wZXJ0eSBhbmQgYSA8Y29kZT5jb250ZW50PC9jb2RlPiBwcm9wZXJ0eS4gVGhlc2UgY29udGFpbiB0aGUgYm91bmRpbmcgdm9sdW1lLCBhbmQgYW55IG1pbmltdW0gb3IgbWF4aW11bSBoZWlnaHQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBleHBlcmltZW50YWwgVGhpcyBmZWF0dXJlIGlzIHVzaW5nIHBhcnQgb2YgdGhlIDNEIFRpbGVzIHNwZWMgdGhhdCBpcyBub3QgZmluYWwgYW5kIGlzIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgQ2VzaXVtJ3Mgc3RhbmRhcmQgZGVwcmVjYXRpb24gcG9saWN5LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUJvdW5kaW5nVm9sdW1lU2VtYW50aWNzKHRpbGVNZXRhZGF0YSkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwidGlsZU1ldGFkYXRhXCIsIHRpbGVNZXRhZGF0YSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHJldHVybiB7XG4gICAgdGlsZToge1xuICAgICAgYm91bmRpbmdWb2x1bWU6IHBhcnNlQm91bmRpbmdWb2x1bWUoXCJUSUxFXCIsIHRpbGVNZXRhZGF0YSksXG4gICAgICBtaW5pbXVtSGVpZ2h0OiBwYXJzZU1pbmltdW1IZWlnaHQoXCJUSUxFXCIsIHRpbGVNZXRhZGF0YSksXG4gICAgICBtYXhpbXVtSGVpZ2h0OiBwYXJzZU1heGltdW1IZWlnaHQoXCJUSUxFXCIsIHRpbGVNZXRhZGF0YSksXG4gICAgfSxcbiAgICBjb250ZW50OiB7XG4gICAgICBib3VuZGluZ1ZvbHVtZTogcGFyc2VCb3VuZGluZ1ZvbHVtZShcIkNPTlRFTlRcIiwgdGlsZU1ldGFkYXRhKSxcbiAgICAgIG1pbmltdW1IZWlnaHQ6IHBhcnNlTWluaW11bUhlaWdodChcIkNPTlRFTlRcIiwgdGlsZU1ldGFkYXRhKSxcbiAgICAgIG1heGltdW1IZWlnaHQ6IHBhcnNlTWF4aW11bUhlaWdodChcIkNPTlRFTlRcIiwgdGlsZU1ldGFkYXRhKSxcbiAgICB9LFxuICB9O1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBib3VuZGluZyB2b2x1bWUgZnJvbSBhIHRpbGUgbWV0YWRhdGEuIElmIHRoZSBtZXRhZGF0YSBzcGVjaWZ5XG4gKiBtdWx0aXBsZSBib3VuZGluZyB2b2x1bWVzLCBvbmx5IHRoZSBmaXJzdCBvbmUgaXMgcmV0dXJuZWQuIEJvdW5kaW5nIHZvbHVtZXNcbiAqIGFyZSBjaGVja2VkIGluIHRoZSBvcmRlciBib3gsIHJlZ2lvbiwgdGhlbiBzcGhlcmUuXG4gKlxuICogVGhpcyBoYW5kbGVzIGJvdGggdGlsZSBhbmQgY29udGVudCBib3VuZGluZyB2b2x1bWVzLCBhcyB0aGUgb25seSBkaWZmZXJlbmNlXG4gKiBpcyB0aGUgcHJlZml4LiBlLmcuIDxjb2RlPlRJTEVfQk9VTkRJTkdfQk9YPC9jb2RlPiBhbmRcbiAqIDxjb2RlPkNPTlRFTlRfQk9VTkRJTkdfQk9YPC9jb2RlPiBoYXZlIHRoZSBzYW1lIG1lbW9yeSBsYXlvdXQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByZWZpeCBFaXRoZXIgXCJUSUxFXCIgb3IgXCJDT05URU5UXCJcbiAqIEBwYXJhbSB7VGlsZU1ldGFkYXRhfSB0aWxlTWV0YWRhdGEgVGhlIHRpbGVNZXRhZGF0YSBmb3IgbG9va2luZyB1cCB2YWx1ZXNcbiAqIEByZXR1cm4ge09iamVjdH0gQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgSlNPTiBkZXNjcmlwdGlvbiBvZiB0aGUgdGlsZSBtZXRhZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VCb3VuZGluZ1ZvbHVtZShwcmVmaXgsIHRpbGVNZXRhZGF0YSkge1xuICB2YXIgYm91bmRpbmdCb3hTZW1hbnRpYyA9IHByZWZpeCArIFwiX0JPVU5ESU5HX0JPWFwiO1xuICB2YXIgYm91bmRpbmdCb3ggPSB0aWxlTWV0YWRhdGEuZ2V0UHJvcGVydHlCeVNlbWFudGljKGJvdW5kaW5nQm94U2VtYW50aWMpO1xuXG4gIGlmIChkZWZpbmVkKGJvdW5kaW5nQm94KSkge1xuICAgIHJldHVybiB7XG4gICAgICBib3g6IGJvdW5kaW5nQm94LFxuICAgIH07XG4gIH1cblxuICB2YXIgYm91bmRpbmdSZWdpb25TZW1hbnRpYyA9IHByZWZpeCArIFwiX0JPVU5ESU5HX1JFR0lPTlwiO1xuICB2YXIgYm91bmRpbmdSZWdpb24gPSB0aWxlTWV0YWRhdGEuZ2V0UHJvcGVydHlCeVNlbWFudGljKFxuICAgIGJvdW5kaW5nUmVnaW9uU2VtYW50aWNcbiAgKTtcblxuICBpZiAoZGVmaW5lZChib3VuZGluZ1JlZ2lvbikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnaW9uOiBib3VuZGluZ1JlZ2lvbixcbiAgICB9O1xuICB9XG5cbiAgdmFyIGJvdW5kaW5nU3BoZXJlU2VtYW50aWMgPSBwcmVmaXggKyBcIl9CT1VORElOR19TUEhFUkVcIjtcbiAgdmFyIGJvdW5kaW5nU3BoZXJlID0gdGlsZU1ldGFkYXRhLmdldFByb3BlcnR5QnlTZW1hbnRpYyhcbiAgICBib3VuZGluZ1NwaGVyZVNlbWFudGljXG4gICk7XG5cbiAgaWYgKGRlZmluZWQoYm91bmRpbmdTcGhlcmUpKSB7XG4gICAgLy8gQVJSQVkgd2l0aCA0IGVsZW1lbnRzIGlzIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIGEgQ2FydGVzaWFuNFxuICAgIHJldHVybiB7XG4gICAgICBzcGhlcmU6IFtcbiAgICAgICAgYm91bmRpbmdTcGhlcmUueCxcbiAgICAgICAgYm91bmRpbmdTcGhlcmUueSxcbiAgICAgICAgYm91bmRpbmdTcGhlcmUueixcbiAgICAgICAgYm91bmRpbmdTcGhlcmUudyxcbiAgICAgIF0sXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIG1pbmltdW0gaGVpZ2h0IGZyb20gdGlsZSBtZXRhZGF0YS4gVGhpcyBpcyB1c2VkIGZvciBtYWtpbmcgdGlnaHRlclxuICogcXVhZHRyZWUgYm91bmRzIGZvciBpbXBsaWNpdCB0aWxpbmcuIFRoaXMgd29ya3MgZm9yIGJvdGhcbiAqIDxjb2RlPlRJTEVfTUlOSU1VTV9IRUlHSFQ8L2NvZGU+IGFuZCA8Y29kZT5DT05URU5UX01JTklNVU1fSEVJR0hUPC9jb2RlPlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcmVmaXggRWl0aGVyIFwiVElMRVwiIG9yIFwiQ09OVEVOVFwiXG4gKiBAcGFyYW0ge1RpbGVNZXRhZGF0YX0gdGlsZU1ldGFkYXRhIFRoZSB0aWxlTWV0YWRhdGEgZm9yIGxvb2tpbmcgdXAgdmFsdWVzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBtaW5pbXVtIGhlaWdodFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VNaW5pbXVtSGVpZ2h0KHByZWZpeCwgdGlsZU1ldGFkYXRhKSB7XG4gIHZhciBtaW5pbXVtSGVpZ2h0U2VtYW50aWMgPSBwcmVmaXggKyBcIl9NSU5JTVVNX0hFSUdIVFwiO1xuICByZXR1cm4gdGlsZU1ldGFkYXRhLmdldFByb3BlcnR5QnlTZW1hbnRpYyhtaW5pbXVtSGVpZ2h0U2VtYW50aWMpO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBtYXhpbXVtIGhlaWdodCBmcm9tIHRpbGUgbWV0YWRhdGEuIFRoaXMgaXMgdXNlZCBmb3IgbWFraW5nIHRpZ2h0ZXJcbiAqIHF1YWR0cmVlIGJvdW5kcyBmb3IgaW1wbGljaXQgdGlsaW5nLiBUaGlzIHdvcmtzIGZvciBib3RoXG4gKiA8Y29kZT5USUxFX01BWElNVU1fSEVJR0hUPC9jb2RlPiBhbmQgPGNvZGU+Q09OVEVOVF9NQVhJTVVNX0hFSUdIVDwvY29kZT5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJlZml4IEVpdGhlciBcIlRJTEVcIiBvciBcIkNPTlRFTlRcIlxuICogQHBhcmFtIHtUaWxlTWV0YWRhdGF9IHRpbGVNZXRhZGF0YSBUaGUgdGlsZU1ldGFkYXRhIGZvciBsb29raW5nIHVwIHZhbHVlc1xuICogQHJldHVybiB7TnVtYmVyfSBUaGUgbWF4aW11bSBoZWlnaHRcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlTWF4aW11bUhlaWdodChwcmVmaXgsIHRpbGVNZXRhZGF0YSkge1xuICB2YXIgbWF4aW11bUhlaWdodFNlbWFudGljID0gcHJlZml4ICsgXCJfTUFYSU1VTV9IRUlHSFRcIjtcbiAgcmV0dXJuIHRpbGVNZXRhZGF0YS5nZXRQcm9wZXJ0eUJ5U2VtYW50aWMobWF4aW11bUhlaWdodFNlbWFudGljKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///19661\n')},25821:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ parseFeatureMetadata; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82982);\n/* harmony import */ var _FeatureTable_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59875);\n/* harmony import */ var _FeatureTexture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67266);\n/* harmony import */ var _FeatureMetadata_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50851);\n/* harmony import */ var _MetadataTable_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(14358);\n\n\n\n\n\n\n\n\n/**\n * Parse the <code>EXT_feature_metadata</code> glTF extension to create a\n * feature metadata object.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.extension The extension JSON object.\n * @param {MetadataSchema} options.schema The parsed schema.\n * @param {Object.<String, Uint8Array>} [options.bufferViews] An object mapping bufferView IDs to Uint8Array objects.\n * @param {Object.<String, Texture>} [options.textures] An object mapping texture IDs to {@link Texture} objects.\n * @return {FeatureMetadata} A feature metadata object\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction parseFeatureMetadata(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var extension = options.extension;\n\n  // The calling code is responsible for loading the schema.\n  // This keeps metadata parsing synchronous.\n  var schema = options.schema;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.extension", extension);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.schema", schema);\n  //>>includeEnd(\'debug\');\n\n  var featureTables = {};\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(extension.featureTables)) {\n    for (var featureTableId in extension.featureTables) {\n      if (extension.featureTables.hasOwnProperty(featureTableId)) {\n        var featureTable = extension.featureTables[featureTableId];\n        var classDefinition = schema.classes[featureTable.class];\n\n        var metadataTable = new _MetadataTable_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n          count: featureTable.count,\n          properties: featureTable.properties,\n          class: classDefinition,\n          bufferViews: options.bufferViews,\n        });\n\n        featureTables[featureTableId] = new _FeatureTable_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z({\n          count: featureTable.count,\n          metadataTable: metadataTable,\n          extras: featureTable.extras,\n          extensions: featureTable.extensions,\n        });\n      }\n    }\n  }\n\n  var featureTextures = {};\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(extension.featureTextures)) {\n    for (var featureTextureId in extension.featureTextures) {\n      if (extension.featureTextures.hasOwnProperty(featureTextureId)) {\n        var featureTexture = extension.featureTextures[featureTextureId];\n        featureTextures[featureTextureId] = new _FeatureTexture_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({\n          featureTexture: featureTexture,\n          class: schema.classes[featureTexture.class],\n          textures: options.textures,\n        });\n      }\n    }\n  }\n\n  return new _FeatureMetadata_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z({\n    schema: schema,\n    featureTables: featureTables,\n    featureTextures: featureTextures,\n    statistics: extension.statistics,\n    extras: extension.extras,\n    extensions: extension.extensions,\n  });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU4MjEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUNjO0FBQ1Y7QUFDSTtBQUNJO0FBQ0U7QUFDSjs7QUFFL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsZ0JBQWdCO0FBQzNCLFdBQVcsNkJBQTZCO0FBQ3hDLFdBQVcsMEJBQTBCLHFEQUFxRCxlQUFlO0FBQ3pHLFlBQVksaUJBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNlO0FBQ2YsWUFBWSwwRUFBWSxVQUFVLGdHQUF5QjtBQUMzRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFLDJGQUFtQjtBQUNyQixFQUFFLDJGQUFtQjtBQUNyQjs7QUFFQTtBQUNBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQ0FBZ0Msa0VBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVULDRDQUE0QyxpRUFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELG1FQUFjO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEsYUFBYSxvRUFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvcGFyc2VGZWF0dXJlTWV0YWRhdGEuanM/ZGE4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRmVhdHVyZVRhYmxlIGZyb20gXCIuL0ZlYXR1cmVUYWJsZS5qc1wiO1xuaW1wb3J0IEZlYXR1cmVUZXh0dXJlIGZyb20gXCIuL0ZlYXR1cmVUZXh0dXJlLmpzXCI7XG5pbXBvcnQgRmVhdHVyZU1ldGFkYXRhIGZyb20gXCIuL0ZlYXR1cmVNZXRhZGF0YS5qc1wiO1xuaW1wb3J0IE1ldGFkYXRhVGFibGUgZnJvbSBcIi4vTWV0YWRhdGFUYWJsZS5qc1wiO1xuXG4vKipcbiAqIFBhcnNlIHRoZSA8Y29kZT5FWFRfZmVhdHVyZV9tZXRhZGF0YTwvY29kZT4gZ2xURiBleHRlbnNpb24gdG8gY3JlYXRlIGFcbiAqIGZlYXR1cmUgbWV0YWRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmV4dGVuc2lvbiBUaGUgZXh0ZW5zaW9uIEpTT04gb2JqZWN0LlxuICogQHBhcmFtIHtNZXRhZGF0YVNjaGVtYX0gb3B0aW9ucy5zY2hlbWEgVGhlIHBhcnNlZCBzY2hlbWEuXG4gKiBAcGFyYW0ge09iamVjdC48U3RyaW5nLCBVaW50OEFycmF5Pn0gW29wdGlvbnMuYnVmZmVyVmlld3NdIEFuIG9iamVjdCBtYXBwaW5nIGJ1ZmZlclZpZXcgSURzIHRvIFVpbnQ4QXJyYXkgb2JqZWN0cy5cbiAqIEBwYXJhbSB7T2JqZWN0LjxTdHJpbmcsIFRleHR1cmU+fSBbb3B0aW9ucy50ZXh0dXJlc10gQW4gb2JqZWN0IG1hcHBpbmcgdGV4dHVyZSBJRHMgdG8ge0BsaW5rIFRleHR1cmV9IG9iamVjdHMuXG4gKiBAcmV0dXJuIHtGZWF0dXJlTWV0YWRhdGF9IEEgZmVhdHVyZSBtZXRhZGF0YSBvYmplY3RcbiAqIEBwcml2YXRlXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgZmVhdHVyZSBpcyB1c2luZyBwYXJ0IG9mIHRoZSAzRCBUaWxlcyBzcGVjIHRoYXQgaXMgbm90IGZpbmFsIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IENlc2l1bSdzIHN0YW5kYXJkIGRlcHJlY2F0aW9uIHBvbGljeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VGZWF0dXJlTWV0YWRhdGEob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZXh0ZW5zaW9uID0gb3B0aW9ucy5leHRlbnNpb247XG5cbiAgLy8gVGhlIGNhbGxpbmcgY29kZSBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0aGUgc2NoZW1hLlxuICAvLyBUaGlzIGtlZXBzIG1ldGFkYXRhIHBhcnNpbmcgc3luY2hyb25vdXMuXG4gIHZhciBzY2hlbWEgPSBvcHRpb25zLnNjaGVtYTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5leHRlbnNpb25cIiwgZXh0ZW5zaW9uKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuc2NoZW1hXCIsIHNjaGVtYSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBmZWF0dXJlVGFibGVzID0ge307XG4gIGlmIChkZWZpbmVkKGV4dGVuc2lvbi5mZWF0dXJlVGFibGVzKSkge1xuICAgIGZvciAodmFyIGZlYXR1cmVUYWJsZUlkIGluIGV4dGVuc2lvbi5mZWF0dXJlVGFibGVzKSB7XG4gICAgICBpZiAoZXh0ZW5zaW9uLmZlYXR1cmVUYWJsZXMuaGFzT3duUHJvcGVydHkoZmVhdHVyZVRhYmxlSWQpKSB7XG4gICAgICAgIHZhciBmZWF0dXJlVGFibGUgPSBleHRlbnNpb24uZmVhdHVyZVRhYmxlc1tmZWF0dXJlVGFibGVJZF07XG4gICAgICAgIHZhciBjbGFzc0RlZmluaXRpb24gPSBzY2hlbWEuY2xhc3Nlc1tmZWF0dXJlVGFibGUuY2xhc3NdO1xuXG4gICAgICAgIHZhciBtZXRhZGF0YVRhYmxlID0gbmV3IE1ldGFkYXRhVGFibGUoe1xuICAgICAgICAgIGNvdW50OiBmZWF0dXJlVGFibGUuY291bnQsXG4gICAgICAgICAgcHJvcGVydGllczogZmVhdHVyZVRhYmxlLnByb3BlcnRpZXMsXG4gICAgICAgICAgY2xhc3M6IGNsYXNzRGVmaW5pdGlvbixcbiAgICAgICAgICBidWZmZXJWaWV3czogb3B0aW9ucy5idWZmZXJWaWV3cyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZmVhdHVyZVRhYmxlc1tmZWF0dXJlVGFibGVJZF0gPSBuZXcgRmVhdHVyZVRhYmxlKHtcbiAgICAgICAgICBjb3VudDogZmVhdHVyZVRhYmxlLmNvdW50LFxuICAgICAgICAgIG1ldGFkYXRhVGFibGU6IG1ldGFkYXRhVGFibGUsXG4gICAgICAgICAgZXh0cmFzOiBmZWF0dXJlVGFibGUuZXh0cmFzLFxuICAgICAgICAgIGV4dGVuc2lvbnM6IGZlYXR1cmVUYWJsZS5leHRlbnNpb25zLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgZmVhdHVyZVRleHR1cmVzID0ge307XG4gIGlmIChkZWZpbmVkKGV4dGVuc2lvbi5mZWF0dXJlVGV4dHVyZXMpKSB7XG4gICAgZm9yICh2YXIgZmVhdHVyZVRleHR1cmVJZCBpbiBleHRlbnNpb24uZmVhdHVyZVRleHR1cmVzKSB7XG4gICAgICBpZiAoZXh0ZW5zaW9uLmZlYXR1cmVUZXh0dXJlcy5oYXNPd25Qcm9wZXJ0eShmZWF0dXJlVGV4dHVyZUlkKSkge1xuICAgICAgICB2YXIgZmVhdHVyZVRleHR1cmUgPSBleHRlbnNpb24uZmVhdHVyZVRleHR1cmVzW2ZlYXR1cmVUZXh0dXJlSWRdO1xuICAgICAgICBmZWF0dXJlVGV4dHVyZXNbZmVhdHVyZVRleHR1cmVJZF0gPSBuZXcgRmVhdHVyZVRleHR1cmUoe1xuICAgICAgICAgIGZlYXR1cmVUZXh0dXJlOiBmZWF0dXJlVGV4dHVyZSxcbiAgICAgICAgICBjbGFzczogc2NoZW1hLmNsYXNzZXNbZmVhdHVyZVRleHR1cmUuY2xhc3NdLFxuICAgICAgICAgIHRleHR1cmVzOiBvcHRpb25zLnRleHR1cmVzLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IEZlYXR1cmVNZXRhZGF0YSh7XG4gICAgc2NoZW1hOiBzY2hlbWEsXG4gICAgZmVhdHVyZVRhYmxlczogZmVhdHVyZVRhYmxlcyxcbiAgICBmZWF0dXJlVGV4dHVyZXM6IGZlYXR1cmVUZXh0dXJlcyxcbiAgICBzdGF0aXN0aWNzOiBleHRlbnNpb24uc3RhdGlzdGljcyxcbiAgICBleHRyYXM6IGV4dGVuc2lvbi5leHRyYXMsXG4gICAgZXh0ZW5zaW9uczogZXh0ZW5zaW9uLmV4dGVuc2lvbnMsXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///25821\n')},16240:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ preprocess3DTileContent; }\n/* harmony export */ });\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12540);\n/* harmony import */ var _Core_getMagic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3020);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9407);\n/* harmony import */ var _Cesium3DTileContentType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(41059);\n\n\n\n\n\n\n/**\n * Results of the preprocess3DTileContent() function. This includes the\n * {@link Cesium3DTileContentType} and the payload. The payload is either\n * binary or JSON depending on the content type.\n *\n * @typedef {Object} PreprocessedContent\n * @property {Cesium3DTileContentType} contentType The type of the content\n * @property {Uint8Array} [binaryPayload] For binary files, the payload is returned as a typed array with byteOffset of 0\n * @property {Object} [jsonPayload] For JSON files, the results are returned as a JSON object.\n * @private\n */\n\n/**\n * Preprocess a {@link Cesium3DTileContent}, to determine the type of content\n * and to parse JSON files into objects.\n *\n * @param {ArrayBuffer} arrayBuffer The raw binary payload\n * @return {PreprocessedContent}\n * @private\n */\nfunction preprocess3DTileContent(arrayBuffer) {\n  var uint8Array = new Uint8Array(arrayBuffer);\n  var contentType = (0,_Core_getMagic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(uint8Array);\n\n  // We use glTF for JSON glTF files. For binary glTF, we rename this\n  // to glb to disambiguate\n  if (contentType === "glTF") {\n    contentType = "glb";\n  }\n\n  if (_Cesium3DTileContentType_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isBinaryFormat */ .Z.isBinaryFormat(contentType)) {\n    return {\n      // For binary files, the enum value is the magic number\n      contentType: contentType,\n      binaryPayload: uint8Array,\n    };\n  }\n\n  var json = getJsonContent(uint8Array);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(json.root)) {\n    // Most likely a tileset JSON\n    return {\n      contentType: _Cesium3DTileContentType_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].EXTERNAL_TILESET */ .Z.EXTERNAL_TILESET,\n      jsonPayload: json,\n    };\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(json.asset)) {\n    // Most likely a glTF. Tileset JSON also has an "asset" property\n    // so this check needs to happen second\n    return {\n      contentType: _Cesium3DTileContentType_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].GLTF */ .Z.GLTF,\n      jsonPayload: json,\n    };\n  }\n\n  throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("Invalid tile content.");\n}\n\nfunction getJsonContent(uint8Array) {\n  var json;\n\n  try {\n    json = (0,_Core_getJsonFromTypedArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(uint8Array);\n  } catch (error) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("Invalid tile content.");\n  }\n\n  return json;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYyNDAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUM7QUFDNEI7QUFDMUI7QUFDUTtBQUNnQjs7QUFFbkU7QUFDQTtBQUNBLElBQUksK0JBQStCO0FBQ25DO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsY0FBYyx5QkFBeUI7QUFDdkMsY0FBYyxZQUFZO0FBQzFCLGNBQWMsUUFBUTtBQUN0QjtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLDBCQUEwQjtBQUMzQztBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFlBQVk7QUFDWjtBQUNBO0FBQ2U7QUFDZjtBQUNBLG9CQUFvQixzRUFBUTs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNLDBHQUFzQztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBLG1CQUFtQiw4R0FBd0M7QUFDM0Q7QUFDQTtBQUNBOztBQUVBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0ZBQTRCO0FBQy9DO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLHNFQUFZO0FBQ3hCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLG1GQUFxQjtBQUNoQyxJQUFJO0FBQ0osY0FBYyxzRUFBWTtBQUMxQjs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL3ByZXByb2Nlc3MzRFRpbGVDb250ZW50LmpzP2FiMWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGdldEpzb25Gcm9tVHlwZWRBcnJheSBmcm9tIFwiLi4vQ29yZS9nZXRKc29uRnJvbVR5cGVkQXJyYXkuanNcIjtcbmltcG9ydCBnZXRNYWdpYyBmcm9tIFwiLi4vQ29yZS9nZXRNYWdpYy5qc1wiO1xuaW1wb3J0IFJ1bnRpbWVFcnJvciBmcm9tIFwiLi4vQ29yZS9SdW50aW1lRXJyb3IuanNcIjtcbmltcG9ydCBDZXNpdW0zRFRpbGVDb250ZW50VHlwZSBmcm9tIFwiLi9DZXNpdW0zRFRpbGVDb250ZW50VHlwZS5qc1wiO1xuXG4vKipcbiAqIFJlc3VsdHMgb2YgdGhlIHByZXByb2Nlc3MzRFRpbGVDb250ZW50KCkgZnVuY3Rpb24uIFRoaXMgaW5jbHVkZXMgdGhlXG4gKiB7QGxpbmsgQ2VzaXVtM0RUaWxlQ29udGVudFR5cGV9IGFuZCB0aGUgcGF5bG9hZC4gVGhlIHBheWxvYWQgaXMgZWl0aGVyXG4gKiBiaW5hcnkgb3IgSlNPTiBkZXBlbmRpbmcgb24gdGhlIGNvbnRlbnQgdHlwZS5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQcmVwcm9jZXNzZWRDb250ZW50XG4gKiBAcHJvcGVydHkge0Nlc2l1bTNEVGlsZUNvbnRlbnRUeXBlfSBjb250ZW50VHlwZSBUaGUgdHlwZSBvZiB0aGUgY29udGVudFxuICogQHByb3BlcnR5IHtVaW50OEFycmF5fSBbYmluYXJ5UGF5bG9hZF0gRm9yIGJpbmFyeSBmaWxlcywgdGhlIHBheWxvYWQgaXMgcmV0dXJuZWQgYXMgYSB0eXBlZCBhcnJheSB3aXRoIGJ5dGVPZmZzZXQgb2YgMFxuICogQHByb3BlcnR5IHtPYmplY3R9IFtqc29uUGF5bG9hZF0gRm9yIEpTT04gZmlsZXMsIHRoZSByZXN1bHRzIGFyZSByZXR1cm5lZCBhcyBhIEpTT04gb2JqZWN0LlxuICogQHByaXZhdGVcbiAqL1xuXG4vKipcbiAqIFByZXByb2Nlc3MgYSB7QGxpbmsgQ2VzaXVtM0RUaWxlQ29udGVudH0sIHRvIGRldGVybWluZSB0aGUgdHlwZSBvZiBjb250ZW50XG4gKiBhbmQgdG8gcGFyc2UgSlNPTiBmaWxlcyBpbnRvIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXIgVGhlIHJhdyBiaW5hcnkgcGF5bG9hZFxuICogQHJldHVybiB7UHJlcHJvY2Vzc2VkQ29udGVudH1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByZXByb2Nlc3MzRFRpbGVDb250ZW50KGFycmF5QnVmZmVyKSB7XG4gIHZhciB1aW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuICB2YXIgY29udGVudFR5cGUgPSBnZXRNYWdpYyh1aW50OEFycmF5KTtcblxuICAvLyBXZSB1c2UgZ2xURiBmb3IgSlNPTiBnbFRGIGZpbGVzLiBGb3IgYmluYXJ5IGdsVEYsIHdlIHJlbmFtZSB0aGlzXG4gIC8vIHRvIGdsYiB0byBkaXNhbWJpZ3VhdGVcbiAgaWYgKGNvbnRlbnRUeXBlID09PSBcImdsVEZcIikge1xuICAgIGNvbnRlbnRUeXBlID0gXCJnbGJcIjtcbiAgfVxuXG4gIGlmIChDZXNpdW0zRFRpbGVDb250ZW50VHlwZS5pc0JpbmFyeUZvcm1hdChjb250ZW50VHlwZSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gRm9yIGJpbmFyeSBmaWxlcywgdGhlIGVudW0gdmFsdWUgaXMgdGhlIG1hZ2ljIG51bWJlclxuICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuICAgICAgYmluYXJ5UGF5bG9hZDogdWludDhBcnJheSxcbiAgICB9O1xuICB9XG5cbiAgdmFyIGpzb24gPSBnZXRKc29uQ29udGVudCh1aW50OEFycmF5KTtcbiAgaWYgKGRlZmluZWQoanNvbi5yb290KSkge1xuICAgIC8vIE1vc3QgbGlrZWx5IGEgdGlsZXNldCBKU09OXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRlbnRUeXBlOiBDZXNpdW0zRFRpbGVDb250ZW50VHlwZS5FWFRFUk5BTF9USUxFU0VULFxuICAgICAganNvblBheWxvYWQ6IGpzb24sXG4gICAgfTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKGpzb24uYXNzZXQpKSB7XG4gICAgLy8gTW9zdCBsaWtlbHkgYSBnbFRGLiBUaWxlc2V0IEpTT04gYWxzbyBoYXMgYW4gXCJhc3NldFwiIHByb3BlcnR5XG4gICAgLy8gc28gdGhpcyBjaGVjayBuZWVkcyB0byBoYXBwZW4gc2Vjb25kXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRlbnRUeXBlOiBDZXNpdW0zRFRpbGVDb250ZW50VHlwZS5HTFRGLFxuICAgICAganNvblBheWxvYWQ6IGpzb24sXG4gICAgfTtcbiAgfVxuXG4gIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJJbnZhbGlkIHRpbGUgY29udGVudC5cIik7XG59XG5cbmZ1bmN0aW9uIGdldEpzb25Db250ZW50KHVpbnQ4QXJyYXkpIHtcbiAgdmFyIGpzb247XG5cbiAgdHJ5IHtcbiAgICBqc29uID0gZ2V0SnNvbkZyb21UeXBlZEFycmF5KHVpbnQ4QXJyYXkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJJbnZhbGlkIHRpbGUgY29udGVudC5cIik7XG4gIH1cblxuICByZXR1cm4ganNvbjtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16240\n')},51240:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82982);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52200);\n/* harmony import */ var _Core_webGLConstantToGlslType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37231);\n/* harmony import */ var _GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9919);\n/* harmony import */ var _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56629);\n/* harmony import */ var _GltfPipeline_usesExtension_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(29745);\n/* harmony import */ var _ModelUtility_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(15322);\n\n\n\n\n\n\n\n\n\n/**\n * @private\n */\nfunction processModelMaterialsCommon(gltf, options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf)) {\n    return;\n  }\n\n  if (!(0,_GltfPipeline_usesExtension_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf, "KHR_materials_common")) {\n    return;\n  }\n\n  if (!(0,_GltfPipeline_usesExtension_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf, "KHR_techniques_webgl")) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf.extensions)) {\n      gltf.extensions = {};\n    }\n\n    gltf.extensions.KHR_techniques_webgl = {\n      programs: [],\n      shaders: [],\n      techniques: [],\n    };\n    gltf.extensionsUsed.push("KHR_techniques_webgl");\n    gltf.extensionsRequired.push("KHR_techniques_webgl");\n  }\n\n  var techniquesWebgl = gltf.extensions.KHR_techniques_webgl;\n\n  lightDefaults(gltf);\n\n  var lightParameters = generateLightParameters(gltf);\n\n  var primitiveByMaterial = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].splitIncompatibleMaterials */ .Z.splitIncompatibleMaterials(gltf);\n\n  var techniques = {};\n  var generatedTechniques = false;\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].material */ .Z.material(gltf, function (material, materialIndex) {\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(material.extensions) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(material.extensions.KHR_materials_common)\n    ) {\n      var khrMaterialsCommon = material.extensions.KHR_materials_common;\n      var primitiveInfo = primitiveByMaterial[materialIndex];\n\n      var techniqueKey = getTechniqueKey(khrMaterialsCommon, primitiveInfo);\n      var technique = techniques[techniqueKey];\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(technique)) {\n        technique = generateTechnique(\n          gltf,\n          techniquesWebgl,\n          primitiveInfo,\n          khrMaterialsCommon,\n          lightParameters,\n          options.addBatchIdToGeneratedShaders\n        );\n        techniques[techniqueKey] = technique;\n        generatedTechniques = true;\n      }\n\n      var materialValues = {};\n      var values = khrMaterialsCommon.values;\n      var uniformName;\n      for (var valueName in values) {\n        if (\n          values.hasOwnProperty(valueName) &&\n          valueName !== "transparent" &&\n          valueName !== "doubleSided"\n        ) {\n          uniformName = "u_" + valueName.toLowerCase();\n          materialValues[uniformName] = values[valueName];\n        }\n      }\n\n      material.extensions.KHR_techniques_webgl = {\n        technique: technique,\n        values: materialValues,\n      };\n\n      material.alphaMode = "OPAQUE";\n      if (khrMaterialsCommon.transparent) {\n        material.alphaMode = "BLEND";\n      }\n\n      if (khrMaterialsCommon.doubleSided) {\n        material.doubleSided = true;\n      }\n    }\n  });\n\n  if (!generatedTechniques) {\n    return gltf;\n  }\n\n  // If any primitives have semantics that aren\'t declared in the generated\n  // shaders, we want to preserve them.\n  _ModelUtility_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].ensureSemanticExistence */ .Z.ensureSemanticExistence(gltf);\n\n  return gltf;\n}\n\nfunction generateLightParameters(gltf) {\n  var result = {};\n\n  var lights;\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf.extensions) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf.extensions.KHR_materials_common)\n  ) {\n    lights = gltf.extensions.KHR_materials_common.lights;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(lights)) {\n    // Figure out which node references the light\n    var nodes = gltf.nodes;\n    for (var nodeName in nodes) {\n      if (nodes.hasOwnProperty(nodeName)) {\n        var node = nodes[nodeName];\n        if (\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(node.extensions) &&\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(node.extensions.KHR_materials_common)\n        ) {\n          var nodeLightId = node.extensions.KHR_materials_common.light;\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(nodeLightId) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(lights[nodeLightId])) {\n            lights[nodeLightId].node = nodeName;\n          }\n          delete node.extensions.KHR_materials_common;\n        }\n      }\n    }\n\n    // Add light parameters to result\n    var lightCount = 0;\n    for (var lightName in lights) {\n      if (lights.hasOwnProperty(lightName)) {\n        var light = lights[lightName];\n        var lightType = light.type;\n        if (lightType !== "ambient" && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.node)) {\n          delete lights[lightName];\n          continue;\n        }\n        var lightBaseName = "light" + lightCount.toString();\n        light.baseName = lightBaseName;\n        switch (lightType) {\n          case "ambient":\n            var ambient = light.ambient;\n            result[lightBaseName + "Color"] = {\n              type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3,\n              value: ambient.color,\n            };\n            break;\n          case "directional":\n            var directional = light.directional;\n            result[lightBaseName + "Color"] = {\n              type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3,\n              value: directional.color,\n            };\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.node)) {\n              result[lightBaseName + "Transform"] = {\n                node: light.node,\n                semantic: "MODELVIEW",\n                type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n              };\n            }\n            break;\n          case "point":\n            var point = light.point;\n            result[lightBaseName + "Color"] = {\n              type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3,\n              value: point.color,\n            };\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.node)) {\n              result[lightBaseName + "Transform"] = {\n                node: light.node,\n                semantic: "MODELVIEW",\n                type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n              };\n            }\n            result[lightBaseName + "Attenuation"] = {\n              type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3,\n              value: [\n                point.constantAttenuation,\n                point.linearAttenuation,\n                point.quadraticAttenuation,\n              ],\n            };\n            break;\n          case "spot":\n            var spot = light.spot;\n            result[lightBaseName + "Color"] = {\n              type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3,\n              value: spot.color,\n            };\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.node)) {\n              result[lightBaseName + "Transform"] = {\n                node: light.node,\n                semantic: "MODELVIEW",\n                type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n              };\n              result[lightBaseName + "InverseTransform"] = {\n                node: light.node,\n                semantic: "MODELVIEWINVERSE",\n                type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n                useInFragment: true,\n              };\n            }\n            result[lightBaseName + "Attenuation"] = {\n              type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3,\n              value: [\n                spot.constantAttenuation,\n                spot.linearAttenuation,\n                spot.quadraticAttenuation,\n              ],\n            };\n\n            result[lightBaseName + "FallOff"] = {\n              type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC2 */ .Z.FLOAT_VEC2,\n              value: [spot.fallOffAngle, spot.fallOffExponent],\n            };\n            break;\n        }\n        ++lightCount;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction generateTechnique(\n  gltf,\n  techniquesWebgl,\n  primitiveInfo,\n  khrMaterialsCommon,\n  lightParameters,\n  addBatchIdToGeneratedShaders\n) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(khrMaterialsCommon)) {\n    khrMaterialsCommon = {};\n  }\n\n  addBatchIdToGeneratedShaders = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    addBatchIdToGeneratedShaders,\n    false\n  );\n\n  var techniques = techniquesWebgl.techniques;\n  var shaders = techniquesWebgl.shaders;\n  var programs = techniquesWebgl.programs;\n  var lightingModel = khrMaterialsCommon.technique.toUpperCase();\n  var lights;\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf.extensions) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf.extensions.KHR_materials_common)\n  ) {\n    lights = gltf.extensions.KHR_materials_common.lights;\n  }\n\n  var parameterValues = khrMaterialsCommon.values;\n  var jointCount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(khrMaterialsCommon.jointCount, 0);\n\n  var skinningInfo;\n  var hasSkinning = false;\n  var hasVertexColors = false;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(primitiveInfo)) {\n    skinningInfo = primitiveInfo.skinning;\n    hasSkinning = skinningInfo.skinned;\n    hasVertexColors = primitiveInfo.hasVertexColors;\n  }\n\n  var vertexShader = "precision highp float;\\n";\n  var fragmentShader = "precision highp float;\\n";\n\n  var hasNormals = lightingModel !== "CONSTANT";\n\n  // Add techniques\n  var techniqueUniforms = {\n    u_modelViewMatrix: {\n      semantic: (0,_GltfPipeline_usesExtension_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf, "CESIUM_RTC")\n        ? "CESIUM_RTC_MODELVIEW"\n        : "MODELVIEW",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n    },\n    u_projectionMatrix: {\n      semantic: "PROJECTION",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n    },\n  };\n\n  if (hasNormals) {\n    techniqueUniforms.u_normalMatrix = {\n      semantic: "MODELVIEWINVERSETRANSPOSE",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT3 */ .Z.FLOAT_MAT3,\n    };\n  }\n\n  if (hasSkinning) {\n    techniqueUniforms.u_jointMatrix = {\n      count: jointCount,\n      semantic: "JOINTMATRIX",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n    };\n  }\n\n  // Add material values\n  var uniformName;\n  var hasTexCoords = false;\n  for (var name in parameterValues) {\n    //generate shader parameters for KHR_materials_common attributes\n    //(including a check, because some boolean flags should not be used as shader parameters)\n    if (\n      parameterValues.hasOwnProperty(name) &&\n      name !== "transparent" &&\n      name !== "doubleSided"\n    ) {\n      var uniformType = getKHRMaterialsCommonValueType(\n        name,\n        parameterValues[name]\n      );\n      uniformName = "u_" + name.toLowerCase();\n      if (!hasTexCoords && uniformType === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D) {\n        hasTexCoords = true;\n      }\n\n      techniqueUniforms[uniformName] = {\n        type: uniformType,\n      };\n    }\n  }\n\n  // Give the diffuse uniform a semantic to support color replacement in 3D Tiles\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_diffuse)) {\n    techniqueUniforms.u_diffuse.semantic = "_3DTILESDIFFUSE";\n  }\n\n  // Copy light parameters into technique parameters\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(lightParameters)) {\n    for (var lightParamName in lightParameters) {\n      if (lightParameters.hasOwnProperty(lightParamName)) {\n        uniformName = "u_" + lightParamName;\n        techniqueUniforms[uniformName] = lightParameters[lightParamName];\n      }\n    }\n  }\n\n  // Add uniforms to shaders\n  for (uniformName in techniqueUniforms) {\n    if (techniqueUniforms.hasOwnProperty(uniformName)) {\n      var uniform = techniqueUniforms[uniformName];\n      var arraySize = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(uniform.count) ? "[" + uniform.count + "]" : "";\n      if (\n        (uniform.type !== _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT3 */ .Z.FLOAT_MAT3 &&\n          uniform.type !== _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4) ||\n        uniform.useInFragment\n      ) {\n        fragmentShader +=\n          "uniform " +\n          (0,_Core_webGLConstantToGlslType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(uniform.type) +\n          " " +\n          uniformName +\n          arraySize +\n          ";\\n";\n        delete uniform.useInFragment;\n      } else {\n        vertexShader +=\n          "uniform " +\n          (0,_Core_webGLConstantToGlslType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(uniform.type) +\n          " " +\n          uniformName +\n          arraySize +\n          ";\\n";\n      }\n    }\n  }\n\n  // Add attributes with semantics\n  var vertexShaderMain = "";\n  if (hasSkinning) {\n    vertexShaderMain +=\n      "    mat4 skinMatrix =\\n" +\n      "        a_weight.x * u_jointMatrix[int(a_joint.x)] +\\n" +\n      "        a_weight.y * u_jointMatrix[int(a_joint.y)] +\\n" +\n      "        a_weight.z * u_jointMatrix[int(a_joint.z)] +\\n" +\n      "        a_weight.w * u_jointMatrix[int(a_joint.w)];\\n";\n  }\n\n  // Add position always\n  var techniqueAttributes = {\n    a_position: {\n      semantic: "POSITION",\n    },\n  };\n  vertexShader += "attribute vec3 a_position;\\n";\n  vertexShader += "varying vec3 v_positionEC;\\n";\n  if (hasSkinning) {\n    vertexShaderMain +=\n      "  vec4 pos = u_modelViewMatrix * skinMatrix * vec4(a_position,1.0);\\n";\n  } else {\n    vertexShaderMain +=\n      "  vec4 pos = u_modelViewMatrix * vec4(a_position,1.0);\\n";\n  }\n  vertexShaderMain += "  v_positionEC = pos.xyz;\\n";\n  vertexShaderMain += "  gl_Position = u_projectionMatrix * pos;\\n";\n  fragmentShader += "varying vec3 v_positionEC;\\n";\n\n  // Add normal if we don\'t have constant lighting\n  if (hasNormals) {\n    techniqueAttributes.a_normal = {\n      semantic: "NORMAL",\n    };\n    vertexShader += "attribute vec3 a_normal;\\n";\n    vertexShader += "varying vec3 v_normal;\\n";\n    if (hasSkinning) {\n      vertexShaderMain +=\n        "  v_normal = u_normalMatrix * mat3(skinMatrix) * a_normal;\\n";\n    } else {\n      vertexShaderMain += "  v_normal = u_normalMatrix * a_normal;\\n";\n    }\n\n    fragmentShader += "varying vec3 v_normal;\\n";\n  }\n\n  // Add texture coordinates if the material uses them\n  var v_texcoord;\n  if (hasTexCoords) {\n    techniqueAttributes.a_texcoord_0 = {\n      semantic: "TEXCOORD_0",\n    };\n\n    v_texcoord = "v_texcoord_0";\n    vertexShader += "attribute vec2 a_texcoord_0;\\n";\n    vertexShader += "varying vec2 " + v_texcoord + ";\\n";\n    vertexShaderMain += "  " + v_texcoord + " = a_texcoord_0;\\n";\n\n    fragmentShader += "varying vec2 " + v_texcoord + ";\\n";\n  }\n\n  if (hasSkinning) {\n    techniqueAttributes.a_joint = {\n      semantic: "JOINTS_0",\n    };\n    techniqueAttributes.a_weight = {\n      semantic: "WEIGHTS_0",\n    };\n\n    vertexShader += "attribute vec4 a_joint;\\n";\n    vertexShader += "attribute vec4 a_weight;\\n";\n  }\n\n  if (hasVertexColors) {\n    techniqueAttributes.a_vertexColor = {\n      semantic: "COLOR_0",\n    };\n    vertexShader += "attribute vec4 a_vertexColor;\\n";\n    vertexShader += "varying vec4 v_vertexColor;\\n";\n    vertexShaderMain += "  v_vertexColor = a_vertexColor;\\n";\n    fragmentShader += "varying vec4 v_vertexColor;\\n";\n  }\n\n  if (addBatchIdToGeneratedShaders) {\n    techniqueAttributes.a_batchId = {\n      semantic: "_BATCHID",\n    };\n    vertexShader += "attribute float a_batchId;\\n";\n  }\n\n  var hasSpecular =\n    hasNormals &&\n    (lightingModel === "BLINN" || lightingModel === "PHONG") &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_specular) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_shininess) &&\n    techniqueUniforms.u_shininess > 0.0;\n\n  // Generate lighting code blocks\n  var hasNonAmbientLights = false;\n  var hasAmbientLights = false;\n  var fragmentLightingBlock = "";\n  for (var lightName in lights) {\n    if (lights.hasOwnProperty(lightName)) {\n      var light = lights[lightName];\n      var lightType = light.type.toLowerCase();\n      var lightBaseName = light.baseName;\n      fragmentLightingBlock += "  {\\n";\n      var lightColorName = "u_" + lightBaseName + "Color";\n      var varyingDirectionName;\n      var varyingPositionName;\n      if (lightType === "ambient") {\n        hasAmbientLights = true;\n        fragmentLightingBlock +=\n          "    ambientLight += " + lightColorName + ";\\n";\n      } else if (hasNormals) {\n        hasNonAmbientLights = true;\n        varyingDirectionName = "v_" + lightBaseName + "Direction";\n        varyingPositionName = "v_" + lightBaseName + "Position";\n\n        if (lightType !== "point") {\n          vertexShader += "varying vec3 " + varyingDirectionName + ";\\n";\n          fragmentShader += "varying vec3 " + varyingDirectionName + ";\\n";\n\n          vertexShaderMain +=\n            "  " +\n            varyingDirectionName +\n            " = mat3(u_" +\n            lightBaseName +\n            "Transform) * vec3(0.,0.,1.);\\n";\n          if (lightType === "directional") {\n            fragmentLightingBlock +=\n              "    vec3 l = normalize(" + varyingDirectionName + ");\\n";\n          }\n        }\n\n        if (lightType !== "directional") {\n          vertexShader += "varying vec3 " + varyingPositionName + ";\\n";\n          fragmentShader += "varying vec3 " + varyingPositionName + ";\\n";\n\n          vertexShaderMain +=\n            "  " +\n            varyingPositionName +\n            " = u_" +\n            lightBaseName +\n            "Transform[3].xyz;\\n";\n          fragmentLightingBlock +=\n            "    vec3 VP = " + varyingPositionName + " - v_positionEC;\\n";\n          fragmentLightingBlock += "    vec3 l = normalize(VP);\\n";\n          fragmentLightingBlock += "    float range = length(VP);\\n";\n          fragmentLightingBlock +=\n            "    float attenuation = 1.0 / (u_" +\n            lightBaseName +\n            "Attenuation.x + ";\n          fragmentLightingBlock +=\n            "(u_" + lightBaseName + "Attenuation.y * range) + ";\n          fragmentLightingBlock +=\n            "(u_" + lightBaseName + "Attenuation.z * range * range));\\n";\n        } else {\n          fragmentLightingBlock += "    float attenuation = 1.0;\\n";\n        }\n\n        if (lightType === "spot") {\n          fragmentLightingBlock +=\n            "    float spotDot = dot(l, normalize(" +\n            varyingDirectionName +\n            "));\\n";\n          fragmentLightingBlock +=\n            "    if (spotDot < cos(u_" + lightBaseName + "FallOff.x * 0.5))\\n";\n          fragmentLightingBlock += "    {\\n";\n          fragmentLightingBlock += "      attenuation = 0.0;\\n";\n          fragmentLightingBlock += "    }\\n";\n          fragmentLightingBlock += "    else\\n";\n          fragmentLightingBlock += "    {\\n";\n          fragmentLightingBlock +=\n            "        attenuation *= max(0.0, pow(spotDot, u_" +\n            lightBaseName +\n            "FallOff.y));\\n";\n          fragmentLightingBlock += "    }\\n";\n        }\n\n        fragmentLightingBlock +=\n          "    diffuseLight += " +\n          lightColorName +\n          "* max(dot(normal,l), 0.) * attenuation;\\n";\n\n        if (hasSpecular) {\n          if (lightingModel === "BLINN") {\n            fragmentLightingBlock += "    vec3 h = normalize(l + viewDir);\\n";\n            fragmentLightingBlock +=\n              "    float specularIntensity = max(0., pow(max(dot(normal, h), 0.), u_shininess)) * attenuation;\\n";\n          } else {\n            // PHONG\n            fragmentLightingBlock +=\n              "    vec3 reflectDir = reflect(-l, normal);\\n";\n            fragmentLightingBlock +=\n              "    float specularIntensity = max(0., pow(max(dot(reflectDir, viewDir), 0.), u_shininess)) * attenuation;\\n";\n          }\n          fragmentLightingBlock +=\n            "    specularLight += " +\n            lightColorName +\n            " * specularIntensity;\\n";\n        }\n      }\n      fragmentLightingBlock += "  }\\n";\n    }\n  }\n\n  if (!hasAmbientLights) {\n    // Add an ambient light if we don\'t have one\n    fragmentLightingBlock += "  ambientLight += vec3(0.2, 0.2, 0.2);\\n";\n  }\n\n  if (!hasNonAmbientLights && lightingModel !== "CONSTANT") {\n    fragmentShader += "#ifdef USE_CUSTOM_LIGHT_COLOR \\n";\n    fragmentShader += "uniform vec3 gltf_lightColor; \\n";\n    fragmentShader += "#endif \\n";\n\n    fragmentLightingBlock += "#ifndef USE_CUSTOM_LIGHT_COLOR \\n";\n    fragmentLightingBlock += "    vec3 lightColor = czm_lightColor;\\n";\n    fragmentLightingBlock += "#else \\n";\n    fragmentLightingBlock += "    vec3 lightColor = gltf_lightColor;\\n";\n    fragmentLightingBlock += "#endif \\n";\n\n    fragmentLightingBlock += "  vec3 l = normalize(czm_lightDirectionEC);\\n";\n    var minimumLighting = "0.2"; // Use strings instead of values as 0.0 -> 0 when stringified\n    fragmentLightingBlock +=\n      "  diffuseLight += lightColor * max(dot(normal,l), " +\n      minimumLighting +\n      ");\\n";\n\n    if (hasSpecular) {\n      if (lightingModel === "BLINN") {\n        fragmentLightingBlock += "  vec3 h = normalize(l + viewDir);\\n";\n        fragmentLightingBlock +=\n          "  float specularIntensity = max(0., pow(max(dot(normal, h), 0.), u_shininess));\\n";\n      } else {\n        // PHONG\n        fragmentLightingBlock += "  vec3 reflectDir = reflect(-l, normal);\\n";\n        fragmentLightingBlock +=\n          "  float specularIntensity = max(0., pow(max(dot(reflectDir, viewDir), 0.), u_shininess));\\n";\n      }\n\n      fragmentLightingBlock +=\n        "  specularLight += lightColor * specularIntensity;\\n";\n    }\n  }\n\n  vertexShader += "void main(void) {\\n";\n  vertexShader += vertexShaderMain;\n  vertexShader += "}\\n";\n\n  fragmentShader += "void main(void) {\\n";\n  var colorCreationBlock = "  vec3 color = vec3(0.0, 0.0, 0.0);\\n";\n  if (hasNormals) {\n    fragmentShader += "  vec3 normal = normalize(v_normal);\\n";\n    if (khrMaterialsCommon.doubleSided) {\n      fragmentShader += "  if (czm_backFacing())\\n";\n      fragmentShader += "  {\\n";\n      fragmentShader += "    normal = -normal;\\n";\n      fragmentShader += "  }\\n";\n    }\n  }\n\n  var finalColorComputation;\n  if (lightingModel !== "CONSTANT") {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_diffuse)) {\n      if (techniqueUniforms.u_diffuse.type === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D) {\n        fragmentShader +=\n          "  vec4 diffuse = texture2D(u_diffuse, " + v_texcoord + ");\\n";\n      } else {\n        fragmentShader += "  vec4 diffuse = u_diffuse;\\n";\n      }\n      fragmentShader += "  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\\n";\n      colorCreationBlock += "  color += diffuse.rgb * diffuseLight;\\n";\n    }\n\n    if (hasSpecular) {\n      if (techniqueUniforms.u_specular.type === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D) {\n        fragmentShader +=\n          "  vec3 specular = texture2D(u_specular, " + v_texcoord + ").rgb;\\n";\n      } else {\n        fragmentShader += "  vec3 specular = u_specular.rgb;\\n";\n      }\n      fragmentShader += "  vec3 specularLight = vec3(0.0, 0.0, 0.0);\\n";\n      colorCreationBlock += "  color += specular * specularLight;\\n";\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_transparency)) {\n      finalColorComputation =\n        "  gl_FragColor = vec4(color * diffuse.a * u_transparency, diffuse.a * u_transparency);\\n";\n    } else {\n      finalColorComputation =\n        "  gl_FragColor = vec4(color * diffuse.a, diffuse.a);\\n";\n    }\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_transparency)) {\n    finalColorComputation =\n      "  gl_FragColor = vec4(color * u_transparency, u_transparency);\\n";\n  } else {\n    finalColorComputation = "  gl_FragColor = vec4(color, 1.0);\\n";\n  }\n\n  if (hasVertexColors) {\n    colorCreationBlock += "  color *= v_vertexColor.rgb;\\n";\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_emission)) {\n    if (techniqueUniforms.u_emission.type === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D) {\n      fragmentShader +=\n        "  vec3 emission = texture2D(u_emission, " + v_texcoord + ").rgb;\\n";\n    } else {\n      fragmentShader += "  vec3 emission = u_emission.rgb;\\n";\n    }\n    colorCreationBlock += "  color += emission;\\n";\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_ambient) || lightingModel !== "CONSTANT") {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(techniqueUniforms.u_ambient)) {\n      if (techniqueUniforms.u_ambient.type === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D) {\n        fragmentShader +=\n          "  vec3 ambient = texture2D(u_ambient, " + v_texcoord + ").rgb;\\n";\n      } else {\n        fragmentShader += "  vec3 ambient = u_ambient.rgb;\\n";\n      }\n    } else {\n      fragmentShader += "  vec3 ambient = diffuse.rgb;\\n";\n    }\n    colorCreationBlock += "  color += ambient * ambientLight;\\n";\n  }\n  fragmentShader += "  vec3 viewDir = -normalize(v_positionEC);\\n";\n  fragmentShader += "  vec3 ambientLight = vec3(0.0, 0.0, 0.0);\\n";\n\n  // Add in light computations\n  fragmentShader += fragmentLightingBlock;\n\n  fragmentShader += colorCreationBlock;\n  fragmentShader += finalColorComputation;\n  fragmentShader += "}\\n";\n\n  // Add shaders\n  var vertexShaderId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(shaders, {\n    type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].VERTEX_SHADER */ .Z.VERTEX_SHADER,\n    extras: {\n      _pipeline: {\n        source: vertexShader,\n        extension: ".glsl",\n      },\n    },\n  });\n\n  var fragmentShaderId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(shaders, {\n    type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FRAGMENT_SHADER */ .Z.FRAGMENT_SHADER,\n    extras: {\n      _pipeline: {\n        source: fragmentShader,\n        extension: ".glsl",\n      },\n    },\n  });\n\n  // Add program\n  var programId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(programs, {\n    fragmentShader: fragmentShaderId,\n    vertexShader: vertexShaderId,\n  });\n\n  var techniqueId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(techniques, {\n    attributes: techniqueAttributes,\n    program: programId,\n    uniforms: techniqueUniforms,\n  });\n\n  return techniqueId;\n}\n\nfunction getKHRMaterialsCommonValueType(paramName, paramValue) {\n  var value;\n\n  // Backwards compatibility for COLLADA2GLTF v1.0-draft when it encoding\n  // materials using KHR_materials_common with explicit type/value members\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(paramValue.value)) {\n    value = paramValue.value;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(paramValue.index)) {\n    value = [paramValue.index];\n  } else {\n    value = paramValue;\n  }\n\n  switch (paramName) {\n    case "ambient":\n      return value.length === 1\n        ? _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D\n        : _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC4 */ .Z.FLOAT_VEC4;\n    case "diffuse":\n      return value.length === 1\n        ? _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D\n        : _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC4 */ .Z.FLOAT_VEC4;\n    case "emission":\n      return value.length === 1\n        ? _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D\n        : _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC4 */ .Z.FLOAT_VEC4;\n    case "specular":\n      return value.length === 1\n        ? _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D\n        : _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC4 */ .Z.FLOAT_VEC4;\n    case "shininess":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT;\n    case "transparency":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT;\n\n    // these two are usually not used directly within shaders,\n    // they are just added here for completeness\n    case "transparent":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].BOOL */ .Z.BOOL;\n    case "doubleSided":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].BOOL */ .Z.BOOL;\n  }\n}\n\nfunction getTechniqueKey(khrMaterialsCommon, primitiveInfo) {\n  var techniqueKey = "";\n  techniqueKey += "technique:" + khrMaterialsCommon.technique + ";";\n\n  var values = khrMaterialsCommon.values;\n  var keys = Object.keys(values).sort();\n  var keysCount = keys.length;\n  for (var i = 0; i < keysCount; ++i) {\n    var name = keys[i];\n    if (values.hasOwnProperty(name)) {\n      techniqueKey +=\n        name + ":" + getKHRMaterialsCommonValueType(name, values[name]);\n      techniqueKey += ";";\n    }\n  }\n\n  var jointCount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(khrMaterialsCommon.jointCount, 0);\n  techniqueKey += jointCount.toString() + ";";\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(primitiveInfo)) {\n    var skinningInfo = primitiveInfo.skinning;\n    if (jointCount > 0) {\n      techniqueKey += skinningInfo.type + ";";\n    }\n    techniqueKey += primitiveInfo.hasVertexColors;\n  }\n\n  return techniqueKey;\n}\n\nfunction lightDefaults(gltf) {\n  var khrMaterialsCommon = gltf.extensions.KHR_materials_common;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(khrMaterialsCommon) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(khrMaterialsCommon.lights)) {\n    return;\n  }\n\n  var lights = khrMaterialsCommon.lights;\n\n  var lightsLength = lights.length;\n  for (var lightId = 0; lightId < lightsLength; lightId++) {\n    var light = lights[lightId];\n    if (light.type === "ambient") {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.ambient)) {\n        light.ambient = {};\n      }\n      var ambientLight = light.ambient;\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(ambientLight.color)) {\n        ambientLight.color = [1.0, 1.0, 1.0];\n      }\n    } else if (light.type === "directional") {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.directional)) {\n        light.directional = {};\n      }\n      var directionalLight = light.directional;\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(directionalLight.color)) {\n        directionalLight.color = [1.0, 1.0, 1.0];\n      }\n    } else if (light.type === "point") {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.point)) {\n        light.point = {};\n      }\n      var pointLight = light.point;\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(pointLight.color)) {\n        pointLight.color = [1.0, 1.0, 1.0];\n      }\n\n      pointLight.constantAttenuation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n        pointLight.constantAttenuation,\n        1.0\n      );\n      pointLight.linearAttenuation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n        pointLight.linearAttenuation,\n        0.0\n      );\n      pointLight.quadraticAttenuation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n        pointLight.quadraticAttenuation,\n        0.0\n      );\n    } else if (light.type === "spot") {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(light.spot)) {\n        light.spot = {};\n      }\n      var spotLight = light.spot;\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(spotLight.color)) {\n        spotLight.color = [1.0, 1.0, 1.0];\n      }\n\n      spotLight.constantAttenuation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n        spotLight.constantAttenuation,\n        1.0\n      );\n      spotLight.fallOffAngle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(spotLight.fallOffAngle, 3.14159265);\n      spotLight.fallOffExponent = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(spotLight.fallOffExponent, 0.0);\n      spotLight.linearAttenuation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n        spotLight.linearAttenuation,\n        0.0\n      );\n      spotLight.quadraticAttenuation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n        spotLight.quadraticAttenuation,\n        0.0\n      );\n    }\n  }\n}\n/* harmony default export */ __webpack_exports__["Z"] = (processModelMaterialsCommon);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cUNBQXFDLDBFQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywwRUFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sV0FBVyxxRUFBTztBQUNsQjtBQUNBO0FBQ0E7O0FBRUEsV0FBVyxxRUFBTztBQUNsQjtBQUNBOztBQUVBLHNDQUFzQywwRUFBWTtBQUNsRDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMEVBQVk7QUFDM0Msa0NBQWtDLDBFQUFZO0FBQzlDLG9DQUFvQywwRUFBWTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsMEVBQVk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsMkJBQTJCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvcHJvY2Vzc01vZGVsTWF0ZXJpYWxzQ29tbW9uLmpzPzFjNTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBXZWJHTENvbnN0YW50cyBmcm9tIFwiLi4vQ29yZS9XZWJHTENvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHdlYkdMQ29uc3RhbnRUb0dsc2xUeXBlIGZyb20gXCIuLi9Db3JlL3dlYkdMQ29uc3RhbnRUb0dsc2xUeXBlLmpzXCI7XG5pbXBvcnQgYWRkVG9BcnJheSBmcm9tIFwiLi9HbHRmUGlwZWxpbmUvYWRkVG9BcnJheS5qc1wiO1xuaW1wb3J0IEZvckVhY2ggZnJvbSBcIi4vR2x0ZlBpcGVsaW5lL0ZvckVhY2guanNcIjtcbmltcG9ydCB1c2VzRXh0ZW5zaW9uIGZyb20gXCIuL0dsdGZQaXBlbGluZS91c2VzRXh0ZW5zaW9uLmpzXCI7XG5pbXBvcnQgTW9kZWxVdGlsaXR5IGZyb20gXCIuL01vZGVsVXRpbGl0eS5qc1wiO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NNb2RlbE1hdGVyaWFsc0NvbW1vbihnbHRmLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgaWYgKCFkZWZpbmVkKGdsdGYpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCF1c2VzRXh0ZW5zaW9uKGdsdGYsIFwiS0hSX21hdGVyaWFsc19jb21tb25cIikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIXVzZXNFeHRlbnNpb24oZ2x0ZiwgXCJLSFJfdGVjaG5pcXVlc193ZWJnbFwiKSkge1xuICAgIGlmICghZGVmaW5lZChnbHRmLmV4dGVuc2lvbnMpKSB7XG4gICAgICBnbHRmLmV4dGVuc2lvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBnbHRmLmV4dGVuc2lvbnMuS0hSX3RlY2huaXF1ZXNfd2ViZ2wgPSB7XG4gICAgICBwcm9ncmFtczogW10sXG4gICAgICBzaGFkZXJzOiBbXSxcbiAgICAgIHRlY2huaXF1ZXM6IFtdLFxuICAgIH07XG4gICAgZ2x0Zi5leHRlbnNpb25zVXNlZC5wdXNoKFwiS0hSX3RlY2huaXF1ZXNfd2ViZ2xcIik7XG4gICAgZ2x0Zi5leHRlbnNpb25zUmVxdWlyZWQucHVzaChcIktIUl90ZWNobmlxdWVzX3dlYmdsXCIpO1xuICB9XG5cbiAgdmFyIHRlY2huaXF1ZXNXZWJnbCA9IGdsdGYuZXh0ZW5zaW9ucy5LSFJfdGVjaG5pcXVlc193ZWJnbDtcblxuICBsaWdodERlZmF1bHRzKGdsdGYpO1xuXG4gIHZhciBsaWdodFBhcmFtZXRlcnMgPSBnZW5lcmF0ZUxpZ2h0UGFyYW1ldGVycyhnbHRmKTtcblxuICB2YXIgcHJpbWl0aXZlQnlNYXRlcmlhbCA9IE1vZGVsVXRpbGl0eS5zcGxpdEluY29tcGF0aWJsZU1hdGVyaWFscyhnbHRmKTtcblxuICB2YXIgdGVjaG5pcXVlcyA9IHt9O1xuICB2YXIgZ2VuZXJhdGVkVGVjaG5pcXVlcyA9IGZhbHNlO1xuICBGb3JFYWNoLm1hdGVyaWFsKGdsdGYsIGZ1bmN0aW9uIChtYXRlcmlhbCwgbWF0ZXJpYWxJbmRleCkge1xuICAgIGlmIChcbiAgICAgIGRlZmluZWQobWF0ZXJpYWwuZXh0ZW5zaW9ucykgJiZcbiAgICAgIGRlZmluZWQobWF0ZXJpYWwuZXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX2NvbW1vbilcbiAgICApIHtcbiAgICAgIHZhciBraHJNYXRlcmlhbHNDb21tb24gPSBtYXRlcmlhbC5leHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY29tbW9uO1xuICAgICAgdmFyIHByaW1pdGl2ZUluZm8gPSBwcmltaXRpdmVCeU1hdGVyaWFsW21hdGVyaWFsSW5kZXhdO1xuXG4gICAgICB2YXIgdGVjaG5pcXVlS2V5ID0gZ2V0VGVjaG5pcXVlS2V5KGtock1hdGVyaWFsc0NvbW1vbiwgcHJpbWl0aXZlSW5mbyk7XG4gICAgICB2YXIgdGVjaG5pcXVlID0gdGVjaG5pcXVlc1t0ZWNobmlxdWVLZXldO1xuXG4gICAgICBpZiAoIWRlZmluZWQodGVjaG5pcXVlKSkge1xuICAgICAgICB0ZWNobmlxdWUgPSBnZW5lcmF0ZVRlY2huaXF1ZShcbiAgICAgICAgICBnbHRmLFxuICAgICAgICAgIHRlY2huaXF1ZXNXZWJnbCxcbiAgICAgICAgICBwcmltaXRpdmVJbmZvLFxuICAgICAgICAgIGtock1hdGVyaWFsc0NvbW1vbixcbiAgICAgICAgICBsaWdodFBhcmFtZXRlcnMsXG4gICAgICAgICAgb3B0aW9ucy5hZGRCYXRjaElkVG9HZW5lcmF0ZWRTaGFkZXJzXG4gICAgICAgICk7XG4gICAgICAgIHRlY2huaXF1ZXNbdGVjaG5pcXVlS2V5XSA9IHRlY2huaXF1ZTtcbiAgICAgICAgZ2VuZXJhdGVkVGVjaG5pcXVlcyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBtYXRlcmlhbFZhbHVlcyA9IHt9O1xuICAgICAgdmFyIHZhbHVlcyA9IGtock1hdGVyaWFsc0NvbW1vbi52YWx1ZXM7XG4gICAgICB2YXIgdW5pZm9ybU5hbWU7XG4gICAgICBmb3IgKHZhciB2YWx1ZU5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB2YWx1ZXMuaGFzT3duUHJvcGVydHkodmFsdWVOYW1lKSAmJlxuICAgICAgICAgIHZhbHVlTmFtZSAhPT0gXCJ0cmFuc3BhcmVudFwiICYmXG4gICAgICAgICAgdmFsdWVOYW1lICE9PSBcImRvdWJsZVNpZGVkXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgdW5pZm9ybU5hbWUgPSBcInVfXCIgKyB2YWx1ZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBtYXRlcmlhbFZhbHVlc1t1bmlmb3JtTmFtZV0gPSB2YWx1ZXNbdmFsdWVOYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtYXRlcmlhbC5leHRlbnNpb25zLktIUl90ZWNobmlxdWVzX3dlYmdsID0ge1xuICAgICAgICB0ZWNobmlxdWU6IHRlY2huaXF1ZSxcbiAgICAgICAgdmFsdWVzOiBtYXRlcmlhbFZhbHVlcyxcbiAgICAgIH07XG5cbiAgICAgIG1hdGVyaWFsLmFscGhhTW9kZSA9IFwiT1BBUVVFXCI7XG4gICAgICBpZiAoa2hyTWF0ZXJpYWxzQ29tbW9uLnRyYW5zcGFyZW50KSB7XG4gICAgICAgIG1hdGVyaWFsLmFscGhhTW9kZSA9IFwiQkxFTkRcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGtock1hdGVyaWFsc0NvbW1vbi5kb3VibGVTaWRlZCkge1xuICAgICAgICBtYXRlcmlhbC5kb3VibGVTaWRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoIWdlbmVyYXRlZFRlY2huaXF1ZXMpIHtcbiAgICByZXR1cm4gZ2x0ZjtcbiAgfVxuXG4gIC8vIElmIGFueSBwcmltaXRpdmVzIGhhdmUgc2VtYW50aWNzIHRoYXQgYXJlbid0IGRlY2xhcmVkIGluIHRoZSBnZW5lcmF0ZWRcbiAgLy8gc2hhZGVycywgd2Ugd2FudCB0byBwcmVzZXJ2ZSB0aGVtLlxuICBNb2RlbFV0aWxpdHkuZW5zdXJlU2VtYW50aWNFeGlzdGVuY2UoZ2x0Zik7XG5cbiAgcmV0dXJuIGdsdGY7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTGlnaHRQYXJhbWV0ZXJzKGdsdGYpIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIHZhciBsaWdodHM7XG4gIGlmIChcbiAgICBkZWZpbmVkKGdsdGYuZXh0ZW5zaW9ucykgJiZcbiAgICBkZWZpbmVkKGdsdGYuZXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX2NvbW1vbilcbiAgKSB7XG4gICAgbGlnaHRzID0gZ2x0Zi5leHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY29tbW9uLmxpZ2h0cztcbiAgfVxuXG4gIGlmIChkZWZpbmVkKGxpZ2h0cykpIHtcbiAgICAvLyBGaWd1cmUgb3V0IHdoaWNoIG5vZGUgcmVmZXJlbmNlcyB0aGUgbGlnaHRcbiAgICB2YXIgbm9kZXMgPSBnbHRmLm5vZGVzO1xuICAgIGZvciAodmFyIG5vZGVOYW1lIGluIG5vZGVzKSB7XG4gICAgICBpZiAobm9kZXMuaGFzT3duUHJvcGVydHkobm9kZU5hbWUpKSB7XG4gICAgICAgIHZhciBub2RlID0gbm9kZXNbbm9kZU5hbWVdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZGVmaW5lZChub2RlLmV4dGVuc2lvbnMpICYmXG4gICAgICAgICAgZGVmaW5lZChub2RlLmV4dGVuc2lvbnMuS0hSX21hdGVyaWFsc19jb21tb24pXG4gICAgICAgICkge1xuICAgICAgICAgIHZhciBub2RlTGlnaHRJZCA9IG5vZGUuZXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX2NvbW1vbi5saWdodDtcbiAgICAgICAgICBpZiAoZGVmaW5lZChub2RlTGlnaHRJZCkgJiYgZGVmaW5lZChsaWdodHNbbm9kZUxpZ2h0SWRdKSkge1xuICAgICAgICAgICAgbGlnaHRzW25vZGVMaWdodElkXS5ub2RlID0gbm9kZU5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSBub2RlLmV4dGVuc2lvbnMuS0hSX21hdGVyaWFsc19jb21tb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgbGlnaHQgcGFyYW1ldGVycyB0byByZXN1bHRcbiAgICB2YXIgbGlnaHRDb3VudCA9IDA7XG4gICAgZm9yICh2YXIgbGlnaHROYW1lIGluIGxpZ2h0cykge1xuICAgICAgaWYgKGxpZ2h0cy5oYXNPd25Qcm9wZXJ0eShsaWdodE5hbWUpKSB7XG4gICAgICAgIHZhciBsaWdodCA9IGxpZ2h0c1tsaWdodE5hbWVdO1xuICAgICAgICB2YXIgbGlnaHRUeXBlID0gbGlnaHQudHlwZTtcbiAgICAgICAgaWYgKGxpZ2h0VHlwZSAhPT0gXCJhbWJpZW50XCIgJiYgIWRlZmluZWQobGlnaHQubm9kZSkpIHtcbiAgICAgICAgICBkZWxldGUgbGlnaHRzW2xpZ2h0TmFtZV07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpZ2h0QmFzZU5hbWUgPSBcImxpZ2h0XCIgKyBsaWdodENvdW50LnRvU3RyaW5nKCk7XG4gICAgICAgIGxpZ2h0LmJhc2VOYW1lID0gbGlnaHRCYXNlTmFtZTtcbiAgICAgICAgc3dpdGNoIChsaWdodFR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiYW1iaWVudFwiOlxuICAgICAgICAgICAgdmFyIGFtYmllbnQgPSBsaWdodC5hbWJpZW50O1xuICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIkNvbG9yXCJdID0ge1xuICAgICAgICAgICAgICB0eXBlOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUMzLFxuICAgICAgICAgICAgICB2YWx1ZTogYW1iaWVudC5jb2xvcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiZGlyZWN0aW9uYWxcIjpcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb25hbCA9IGxpZ2h0LmRpcmVjdGlvbmFsO1xuICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIkNvbG9yXCJdID0ge1xuICAgICAgICAgICAgICB0eXBlOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUMzLFxuICAgICAgICAgICAgICB2YWx1ZTogZGlyZWN0aW9uYWwuY29sb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGRlZmluZWQobGlnaHQubm9kZSkpIHtcbiAgICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIlRyYW5zZm9ybVwiXSA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiBsaWdodC5ub2RlLFxuICAgICAgICAgICAgICAgIHNlbWFudGljOiBcIk1PREVMVklFV1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZMT0FUX01BVDQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwicG9pbnRcIjpcbiAgICAgICAgICAgIHZhciBwb2ludCA9IGxpZ2h0LnBvaW50O1xuICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIkNvbG9yXCJdID0ge1xuICAgICAgICAgICAgICB0eXBlOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUMzLFxuICAgICAgICAgICAgICB2YWx1ZTogcG9pbnQuY29sb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGRlZmluZWQobGlnaHQubm9kZSkpIHtcbiAgICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIlRyYW5zZm9ybVwiXSA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiBsaWdodC5ub2RlLFxuICAgICAgICAgICAgICAgIHNlbWFudGljOiBcIk1PREVMVklFV1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZMT0FUX01BVDQsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHRbbGlnaHRCYXNlTmFtZSArIFwiQXR0ZW51YXRpb25cIl0gPSB7XG4gICAgICAgICAgICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZMT0FUX1ZFQzMsXG4gICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgcG9pbnQuY29uc3RhbnRBdHRlbnVhdGlvbixcbiAgICAgICAgICAgICAgICBwb2ludC5saW5lYXJBdHRlbnVhdGlvbixcbiAgICAgICAgICAgICAgICBwb2ludC5xdWFkcmF0aWNBdHRlbnVhdGlvbixcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwic3BvdFwiOlxuICAgICAgICAgICAgdmFyIHNwb3QgPSBsaWdodC5zcG90O1xuICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIkNvbG9yXCJdID0ge1xuICAgICAgICAgICAgICB0eXBlOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUMzLFxuICAgICAgICAgICAgICB2YWx1ZTogc3BvdC5jb2xvcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZGVmaW5lZChsaWdodC5ub2RlKSkge1xuICAgICAgICAgICAgICByZXN1bHRbbGlnaHRCYXNlTmFtZSArIFwiVHJhbnNmb3JtXCJdID0ge1xuICAgICAgICAgICAgICAgIG5vZGU6IGxpZ2h0Lm5vZGUsXG4gICAgICAgICAgICAgICAgc2VtYW50aWM6IFwiTU9ERUxWSUVXXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVRfTUFUNCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIkludmVyc2VUcmFuc2Zvcm1cIl0gPSB7XG4gICAgICAgICAgICAgICAgbm9kZTogbGlnaHQubm9kZSxcbiAgICAgICAgICAgICAgICBzZW1hbnRpYzogXCJNT0RFTFZJRVdJTlZFUlNFXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVRfTUFUNCxcbiAgICAgICAgICAgICAgICB1c2VJbkZyYWdtZW50OiB0cnVlLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0W2xpZ2h0QmFzZU5hbWUgKyBcIkF0dGVudWF0aW9uXCJdID0ge1xuICAgICAgICAgICAgICB0eXBlOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUMzLFxuICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIHNwb3QuY29uc3RhbnRBdHRlbnVhdGlvbixcbiAgICAgICAgICAgICAgICBzcG90LmxpbmVhckF0dGVudWF0aW9uLFxuICAgICAgICAgICAgICAgIHNwb3QucXVhZHJhdGljQXR0ZW51YXRpb24sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXN1bHRbbGlnaHRCYXNlTmFtZSArIFwiRmFsbE9mZlwiXSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVRfVkVDMixcbiAgICAgICAgICAgICAgdmFsdWU6IFtzcG90LmZhbGxPZmZBbmdsZSwgc3BvdC5mYWxsT2ZmRXhwb25lbnRdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgICsrbGlnaHRDb3VudDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVRlY2huaXF1ZShcbiAgZ2x0ZixcbiAgdGVjaG5pcXVlc1dlYmdsLFxuICBwcmltaXRpdmVJbmZvLFxuICBraHJNYXRlcmlhbHNDb21tb24sXG4gIGxpZ2h0UGFyYW1ldGVycyxcbiAgYWRkQmF0Y2hJZFRvR2VuZXJhdGVkU2hhZGVyc1xuKSB7XG4gIGlmICghZGVmaW5lZChraHJNYXRlcmlhbHNDb21tb24pKSB7XG4gICAga2hyTWF0ZXJpYWxzQ29tbW9uID0ge307XG4gIH1cblxuICBhZGRCYXRjaElkVG9HZW5lcmF0ZWRTaGFkZXJzID0gZGVmYXVsdFZhbHVlKFxuICAgIGFkZEJhdGNoSWRUb0dlbmVyYXRlZFNoYWRlcnMsXG4gICAgZmFsc2VcbiAgKTtcblxuICB2YXIgdGVjaG5pcXVlcyA9IHRlY2huaXF1ZXNXZWJnbC50ZWNobmlxdWVzO1xuICB2YXIgc2hhZGVycyA9IHRlY2huaXF1ZXNXZWJnbC5zaGFkZXJzO1xuICB2YXIgcHJvZ3JhbXMgPSB0ZWNobmlxdWVzV2ViZ2wucHJvZ3JhbXM7XG4gIHZhciBsaWdodGluZ01vZGVsID0ga2hyTWF0ZXJpYWxzQ29tbW9uLnRlY2huaXF1ZS50b1VwcGVyQ2FzZSgpO1xuICB2YXIgbGlnaHRzO1xuICBpZiAoXG4gICAgZGVmaW5lZChnbHRmLmV4dGVuc2lvbnMpICYmXG4gICAgZGVmaW5lZChnbHRmLmV4dGVuc2lvbnMuS0hSX21hdGVyaWFsc19jb21tb24pXG4gICkge1xuICAgIGxpZ2h0cyA9IGdsdGYuZXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX2NvbW1vbi5saWdodHM7XG4gIH1cblxuICB2YXIgcGFyYW1ldGVyVmFsdWVzID0ga2hyTWF0ZXJpYWxzQ29tbW9uLnZhbHVlcztcbiAgdmFyIGpvaW50Q291bnQgPSBkZWZhdWx0VmFsdWUoa2hyTWF0ZXJpYWxzQ29tbW9uLmpvaW50Q291bnQsIDApO1xuXG4gIHZhciBza2lubmluZ0luZm87XG4gIHZhciBoYXNTa2lubmluZyA9IGZhbHNlO1xuICB2YXIgaGFzVmVydGV4Q29sb3JzID0gZmFsc2U7XG5cbiAgaWYgKGRlZmluZWQocHJpbWl0aXZlSW5mbykpIHtcbiAgICBza2lubmluZ0luZm8gPSBwcmltaXRpdmVJbmZvLnNraW5uaW5nO1xuICAgIGhhc1NraW5uaW5nID0gc2tpbm5pbmdJbmZvLnNraW5uZWQ7XG4gICAgaGFzVmVydGV4Q29sb3JzID0gcHJpbWl0aXZlSW5mby5oYXNWZXJ0ZXhDb2xvcnM7XG4gIH1cblxuICB2YXIgdmVydGV4U2hhZGVyID0gXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuXCI7XG4gIHZhciBmcmFnbWVudFNoYWRlciA9IFwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcblwiO1xuXG4gIHZhciBoYXNOb3JtYWxzID0gbGlnaHRpbmdNb2RlbCAhPT0gXCJDT05TVEFOVFwiO1xuXG4gIC8vIEFkZCB0ZWNobmlxdWVzXG4gIHZhciB0ZWNobmlxdWVVbmlmb3JtcyA9IHtcbiAgICB1X21vZGVsVmlld01hdHJpeDoge1xuICAgICAgc2VtYW50aWM6IHVzZXNFeHRlbnNpb24oZ2x0ZiwgXCJDRVNJVU1fUlRDXCIpXG4gICAgICAgID8gXCJDRVNJVU1fUlRDX01PREVMVklFV1wiXG4gICAgICAgIDogXCJNT0RFTFZJRVdcIixcbiAgICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZMT0FUX01BVDQsXG4gICAgfSxcbiAgICB1X3Byb2plY3Rpb25NYXRyaXg6IHtcbiAgICAgIHNlbWFudGljOiBcIlBST0pFQ1RJT05cIixcbiAgICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZMT0FUX01BVDQsXG4gICAgfSxcbiAgfTtcblxuICBpZiAoaGFzTm9ybWFscykge1xuICAgIHRlY2huaXF1ZVVuaWZvcm1zLnVfbm9ybWFsTWF0cml4ID0ge1xuICAgICAgc2VtYW50aWM6IFwiTU9ERUxWSUVXSU5WRVJTRVRSQU5TUE9TRVwiLFxuICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVRfTUFUMyxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGhhc1NraW5uaW5nKSB7XG4gICAgdGVjaG5pcXVlVW5pZm9ybXMudV9qb2ludE1hdHJpeCA9IHtcbiAgICAgIGNvdW50OiBqb2ludENvdW50LFxuICAgICAgc2VtYW50aWM6IFwiSk9JTlRNQVRSSVhcIixcbiAgICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZMT0FUX01BVDQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIEFkZCBtYXRlcmlhbCB2YWx1ZXNcbiAgdmFyIHVuaWZvcm1OYW1lO1xuICB2YXIgaGFzVGV4Q29vcmRzID0gZmFsc2U7XG4gIGZvciAodmFyIG5hbWUgaW4gcGFyYW1ldGVyVmFsdWVzKSB7XG4gICAgLy9nZW5lcmF0ZSBzaGFkZXIgcGFyYW1ldGVycyBmb3IgS0hSX21hdGVyaWFsc19jb21tb24gYXR0cmlidXRlc1xuICAgIC8vKGluY2x1ZGluZyBhIGNoZWNrLCBiZWNhdXNlIHNvbWUgYm9vbGVhbiBmbGFncyBzaG91bGQgbm90IGJlIHVzZWQgYXMgc2hhZGVyIHBhcmFtZXRlcnMpXG4gICAgaWYgKFxuICAgICAgcGFyYW1ldGVyVmFsdWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmXG4gICAgICBuYW1lICE9PSBcInRyYW5zcGFyZW50XCIgJiZcbiAgICAgIG5hbWUgIT09IFwiZG91YmxlU2lkZWRcIlxuICAgICkge1xuICAgICAgdmFyIHVuaWZvcm1UeXBlID0gZ2V0S0hSTWF0ZXJpYWxzQ29tbW9uVmFsdWVUeXBlKFxuICAgICAgICBuYW1lLFxuICAgICAgICBwYXJhbWV0ZXJWYWx1ZXNbbmFtZV1cbiAgICAgICk7XG4gICAgICB1bmlmb3JtTmFtZSA9IFwidV9cIiArIG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICghaGFzVGV4Q29vcmRzICYmIHVuaWZvcm1UeXBlID09PSBXZWJHTENvbnN0YW50cy5TQU1QTEVSXzJEKSB7XG4gICAgICAgIGhhc1RleENvb3JkcyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHRlY2huaXF1ZVVuaWZvcm1zW3VuaWZvcm1OYW1lXSA9IHtcbiAgICAgICAgdHlwZTogdW5pZm9ybVR5cGUsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEdpdmUgdGhlIGRpZmZ1c2UgdW5pZm9ybSBhIHNlbWFudGljIHRvIHN1cHBvcnQgY29sb3IgcmVwbGFjZW1lbnQgaW4gM0QgVGlsZXNcbiAgaWYgKGRlZmluZWQodGVjaG5pcXVlVW5pZm9ybXMudV9kaWZmdXNlKSkge1xuICAgIHRlY2huaXF1ZVVuaWZvcm1zLnVfZGlmZnVzZS5zZW1hbnRpYyA9IFwiXzNEVElMRVNESUZGVVNFXCI7XG4gIH1cblxuICAvLyBDb3B5IGxpZ2h0IHBhcmFtZXRlcnMgaW50byB0ZWNobmlxdWUgcGFyYW1ldGVyc1xuICBpZiAoZGVmaW5lZChsaWdodFBhcmFtZXRlcnMpKSB7XG4gICAgZm9yICh2YXIgbGlnaHRQYXJhbU5hbWUgaW4gbGlnaHRQYXJhbWV0ZXJzKSB7XG4gICAgICBpZiAobGlnaHRQYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGxpZ2h0UGFyYW1OYW1lKSkge1xuICAgICAgICB1bmlmb3JtTmFtZSA9IFwidV9cIiArIGxpZ2h0UGFyYW1OYW1lO1xuICAgICAgICB0ZWNobmlxdWVVbmlmb3Jtc1t1bmlmb3JtTmFtZV0gPSBsaWdodFBhcmFtZXRlcnNbbGlnaHRQYXJhbU5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEFkZCB1bmlmb3JtcyB0byBzaGFkZXJzXG4gIGZvciAodW5pZm9ybU5hbWUgaW4gdGVjaG5pcXVlVW5pZm9ybXMpIHtcbiAgICBpZiAodGVjaG5pcXVlVW5pZm9ybXMuaGFzT3duUHJvcGVydHkodW5pZm9ybU5hbWUpKSB7XG4gICAgICB2YXIgdW5pZm9ybSA9IHRlY2huaXF1ZVVuaWZvcm1zW3VuaWZvcm1OYW1lXTtcbiAgICAgIHZhciBhcnJheVNpemUgPSBkZWZpbmVkKHVuaWZvcm0uY291bnQpID8gXCJbXCIgKyB1bmlmb3JtLmNvdW50ICsgXCJdXCIgOiBcIlwiO1xuICAgICAgaWYgKFxuICAgICAgICAodW5pZm9ybS50eXBlICE9PSBXZWJHTENvbnN0YW50cy5GTE9BVF9NQVQzICYmXG4gICAgICAgICAgdW5pZm9ybS50eXBlICE9PSBXZWJHTENvbnN0YW50cy5GTE9BVF9NQVQ0KSB8fFxuICAgICAgICB1bmlmb3JtLnVzZUluRnJhZ21lbnRcbiAgICAgICkge1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgICAgIFwidW5pZm9ybSBcIiArXG4gICAgICAgICAgd2ViR0xDb25zdGFudFRvR2xzbFR5cGUodW5pZm9ybS50eXBlKSArXG4gICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgIHVuaWZvcm1OYW1lICtcbiAgICAgICAgICBhcnJheVNpemUgK1xuICAgICAgICAgIFwiO1xcblwiO1xuICAgICAgICBkZWxldGUgdW5pZm9ybS51c2VJbkZyYWdtZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmVydGV4U2hhZGVyICs9XG4gICAgICAgICAgXCJ1bmlmb3JtIFwiICtcbiAgICAgICAgICB3ZWJHTENvbnN0YW50VG9HbHNsVHlwZSh1bmlmb3JtLnR5cGUpICtcbiAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgdW5pZm9ybU5hbWUgK1xuICAgICAgICAgIGFycmF5U2l6ZSArXG4gICAgICAgICAgXCI7XFxuXCI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIGF0dHJpYnV0ZXMgd2l0aCBzZW1hbnRpY3NcbiAgdmFyIHZlcnRleFNoYWRlck1haW4gPSBcIlwiO1xuICBpZiAoaGFzU2tpbm5pbmcpIHtcbiAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9XG4gICAgICBcIiAgICBtYXQ0IHNraW5NYXRyaXggPVxcblwiICtcbiAgICAgIFwiICAgICAgICBhX3dlaWdodC54ICogdV9qb2ludE1hdHJpeFtpbnQoYV9qb2ludC54KV0gK1xcblwiICtcbiAgICAgIFwiICAgICAgICBhX3dlaWdodC55ICogdV9qb2ludE1hdHJpeFtpbnQoYV9qb2ludC55KV0gK1xcblwiICtcbiAgICAgIFwiICAgICAgICBhX3dlaWdodC56ICogdV9qb2ludE1hdHJpeFtpbnQoYV9qb2ludC56KV0gK1xcblwiICtcbiAgICAgIFwiICAgICAgICBhX3dlaWdodC53ICogdV9qb2ludE1hdHJpeFtpbnQoYV9qb2ludC53KV07XFxuXCI7XG4gIH1cblxuICAvLyBBZGQgcG9zaXRpb24gYWx3YXlzXG4gIHZhciB0ZWNobmlxdWVBdHRyaWJ1dGVzID0ge1xuICAgIGFfcG9zaXRpb246IHtcbiAgICAgIHNlbWFudGljOiBcIlBPU0lUSU9OXCIsXG4gICAgfSxcbiAgfTtcbiAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzMgYV9wb3NpdGlvbjtcXG5cIjtcbiAgdmVydGV4U2hhZGVyICs9IFwidmFyeWluZyB2ZWMzIHZfcG9zaXRpb25FQztcXG5cIjtcbiAgaWYgKGhhc1NraW5uaW5nKSB7XG4gICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgXCIgIHZlYzQgcG9zID0gdV9tb2RlbFZpZXdNYXRyaXggKiBza2luTWF0cml4ICogdmVjNChhX3Bvc2l0aW9uLDEuMCk7XFxuXCI7XG4gIH0gZWxzZSB7XG4gICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgXCIgIHZlYzQgcG9zID0gdV9tb2RlbFZpZXdNYXRyaXggKiB2ZWM0KGFfcG9zaXRpb24sMS4wKTtcXG5cIjtcbiAgfVxuICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICB2X3Bvc2l0aW9uRUMgPSBwb3MueHl6O1xcblwiO1xuICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICBnbF9Qb3NpdGlvbiA9IHVfcHJvamVjdGlvbk1hdHJpeCAqIHBvcztcXG5cIjtcbiAgZnJhZ21lbnRTaGFkZXIgKz0gXCJ2YXJ5aW5nIHZlYzMgdl9wb3NpdGlvbkVDO1xcblwiO1xuXG4gIC8vIEFkZCBub3JtYWwgaWYgd2UgZG9uJ3QgaGF2ZSBjb25zdGFudCBsaWdodGluZ1xuICBpZiAoaGFzTm9ybWFscykge1xuICAgIHRlY2huaXF1ZUF0dHJpYnV0ZXMuYV9ub3JtYWwgPSB7XG4gICAgICBzZW1hbnRpYzogXCJOT1JNQUxcIixcbiAgICB9O1xuICAgIHZlcnRleFNoYWRlciArPSBcImF0dHJpYnV0ZSB2ZWMzIGFfbm9ybWFsO1xcblwiO1xuICAgIHZlcnRleFNoYWRlciArPSBcInZhcnlpbmcgdmVjMyB2X25vcm1hbDtcXG5cIjtcbiAgICBpZiAoaGFzU2tpbm5pbmcpIHtcbiAgICAgIHZlcnRleFNoYWRlck1haW4gKz1cbiAgICAgICAgXCIgIHZfbm9ybWFsID0gdV9ub3JtYWxNYXRyaXggKiBtYXQzKHNraW5NYXRyaXgpICogYV9ub3JtYWw7XFxuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZlcnRleFNoYWRlck1haW4gKz0gXCIgIHZfbm9ybWFsID0gdV9ub3JtYWxNYXRyaXggKiBhX25vcm1hbDtcXG5cIjtcbiAgICB9XG5cbiAgICBmcmFnbWVudFNoYWRlciArPSBcInZhcnlpbmcgdmVjMyB2X25vcm1hbDtcXG5cIjtcbiAgfVxuXG4gIC8vIEFkZCB0ZXh0dXJlIGNvb3JkaW5hdGVzIGlmIHRoZSBtYXRlcmlhbCB1c2VzIHRoZW1cbiAgdmFyIHZfdGV4Y29vcmQ7XG4gIGlmIChoYXNUZXhDb29yZHMpIHtcbiAgICB0ZWNobmlxdWVBdHRyaWJ1dGVzLmFfdGV4Y29vcmRfMCA9IHtcbiAgICAgIHNlbWFudGljOiBcIlRFWENPT1JEXzBcIixcbiAgICB9O1xuXG4gICAgdl90ZXhjb29yZCA9IFwidl90ZXhjb29yZF8wXCI7XG4gICAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzIgYV90ZXhjb29yZF8wO1xcblwiO1xuICAgIHZlcnRleFNoYWRlciArPSBcInZhcnlpbmcgdmVjMiBcIiArIHZfdGV4Y29vcmQgKyBcIjtcXG5cIjtcbiAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICBcIiArIHZfdGV4Y29vcmQgKyBcIiA9IGFfdGV4Y29vcmRfMDtcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwidmFyeWluZyB2ZWMyIFwiICsgdl90ZXhjb29yZCArIFwiO1xcblwiO1xuICB9XG5cbiAgaWYgKGhhc1NraW5uaW5nKSB7XG4gICAgdGVjaG5pcXVlQXR0cmlidXRlcy5hX2pvaW50ID0ge1xuICAgICAgc2VtYW50aWM6IFwiSk9JTlRTXzBcIixcbiAgICB9O1xuICAgIHRlY2huaXF1ZUF0dHJpYnV0ZXMuYV93ZWlnaHQgPSB7XG4gICAgICBzZW1hbnRpYzogXCJXRUlHSFRTXzBcIixcbiAgICB9O1xuXG4gICAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzQgYV9qb2ludDtcXG5cIjtcbiAgICB2ZXJ0ZXhTaGFkZXIgKz0gXCJhdHRyaWJ1dGUgdmVjNCBhX3dlaWdodDtcXG5cIjtcbiAgfVxuXG4gIGlmIChoYXNWZXJ0ZXhDb2xvcnMpIHtcbiAgICB0ZWNobmlxdWVBdHRyaWJ1dGVzLmFfdmVydGV4Q29sb3IgPSB7XG4gICAgICBzZW1hbnRpYzogXCJDT0xPUl8wXCIsXG4gICAgfTtcbiAgICB2ZXJ0ZXhTaGFkZXIgKz0gXCJhdHRyaWJ1dGUgdmVjNCBhX3ZlcnRleENvbG9yO1xcblwiO1xuICAgIHZlcnRleFNoYWRlciArPSBcInZhcnlpbmcgdmVjNCB2X3ZlcnRleENvbG9yO1xcblwiO1xuICAgIHZlcnRleFNoYWRlck1haW4gKz0gXCIgIHZfdmVydGV4Q29sb3IgPSBhX3ZlcnRleENvbG9yO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwidmFyeWluZyB2ZWM0IHZfdmVydGV4Q29sb3I7XFxuXCI7XG4gIH1cblxuICBpZiAoYWRkQmF0Y2hJZFRvR2VuZXJhdGVkU2hhZGVycykge1xuICAgIHRlY2huaXF1ZUF0dHJpYnV0ZXMuYV9iYXRjaElkID0ge1xuICAgICAgc2VtYW50aWM6IFwiX0JBVENISURcIixcbiAgICB9O1xuICAgIHZlcnRleFNoYWRlciArPSBcImF0dHJpYnV0ZSBmbG9hdCBhX2JhdGNoSWQ7XFxuXCI7XG4gIH1cblxuICB2YXIgaGFzU3BlY3VsYXIgPVxuICAgIGhhc05vcm1hbHMgJiZcbiAgICAobGlnaHRpbmdNb2RlbCA9PT0gXCJCTElOTlwiIHx8IGxpZ2h0aW5nTW9kZWwgPT09IFwiUEhPTkdcIikgJiZcbiAgICBkZWZpbmVkKHRlY2huaXF1ZVVuaWZvcm1zLnVfc3BlY3VsYXIpICYmXG4gICAgZGVmaW5lZCh0ZWNobmlxdWVVbmlmb3Jtcy51X3NoaW5pbmVzcykgJiZcbiAgICB0ZWNobmlxdWVVbmlmb3Jtcy51X3NoaW5pbmVzcyA+IDAuMDtcblxuICAvLyBHZW5lcmF0ZSBsaWdodGluZyBjb2RlIGJsb2Nrc1xuICB2YXIgaGFzTm9uQW1iaWVudExpZ2h0cyA9IGZhbHNlO1xuICB2YXIgaGFzQW1iaWVudExpZ2h0cyA9IGZhbHNlO1xuICB2YXIgZnJhZ21lbnRMaWdodGluZ0Jsb2NrID0gXCJcIjtcbiAgZm9yICh2YXIgbGlnaHROYW1lIGluIGxpZ2h0cykge1xuICAgIGlmIChsaWdodHMuaGFzT3duUHJvcGVydHkobGlnaHROYW1lKSkge1xuICAgICAgdmFyIGxpZ2h0ID0gbGlnaHRzW2xpZ2h0TmFtZV07XG4gICAgICB2YXIgbGlnaHRUeXBlID0gbGlnaHQudHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIGxpZ2h0QmFzZU5hbWUgPSBsaWdodC5iYXNlTmFtZTtcbiAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPSBcIiAge1xcblwiO1xuICAgICAgdmFyIGxpZ2h0Q29sb3JOYW1lID0gXCJ1X1wiICsgbGlnaHRCYXNlTmFtZSArIFwiQ29sb3JcIjtcbiAgICAgIHZhciB2YXJ5aW5nRGlyZWN0aW9uTmFtZTtcbiAgICAgIHZhciB2YXJ5aW5nUG9zaXRpb25OYW1lO1xuICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gXCJhbWJpZW50XCIpIHtcbiAgICAgICAgaGFzQW1iaWVudExpZ2h0cyA9IHRydWU7XG4gICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPVxuICAgICAgICAgIFwiICAgIGFtYmllbnRMaWdodCArPSBcIiArIGxpZ2h0Q29sb3JOYW1lICsgXCI7XFxuXCI7XG4gICAgICB9IGVsc2UgaWYgKGhhc05vcm1hbHMpIHtcbiAgICAgICAgaGFzTm9uQW1iaWVudExpZ2h0cyA9IHRydWU7XG4gICAgICAgIHZhcnlpbmdEaXJlY3Rpb25OYW1lID0gXCJ2X1wiICsgbGlnaHRCYXNlTmFtZSArIFwiRGlyZWN0aW9uXCI7XG4gICAgICAgIHZhcnlpbmdQb3NpdGlvbk5hbWUgPSBcInZfXCIgKyBsaWdodEJhc2VOYW1lICsgXCJQb3NpdGlvblwiO1xuXG4gICAgICAgIGlmIChsaWdodFR5cGUgIT09IFwicG9pbnRcIikge1xuICAgICAgICAgIHZlcnRleFNoYWRlciArPSBcInZhcnlpbmcgdmVjMyBcIiArIHZhcnlpbmdEaXJlY3Rpb25OYW1lICsgXCI7XFxuXCI7XG4gICAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCJ2YXJ5aW5nIHZlYzMgXCIgKyB2YXJ5aW5nRGlyZWN0aW9uTmFtZSArIFwiO1xcblwiO1xuXG4gICAgICAgICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgICAgICAgXCIgIFwiICtcbiAgICAgICAgICAgIHZhcnlpbmdEaXJlY3Rpb25OYW1lICtcbiAgICAgICAgICAgIFwiID0gbWF0Myh1X1wiICtcbiAgICAgICAgICAgIGxpZ2h0QmFzZU5hbWUgK1xuICAgICAgICAgICAgXCJUcmFuc2Zvcm0pICogdmVjMygwLiwwLiwxLik7XFxuXCI7XG4gICAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gXCJkaXJlY3Rpb25hbFwiKSB7XG4gICAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz1cbiAgICAgICAgICAgICAgXCIgICAgdmVjMyBsID0gbm9ybWFsaXplKFwiICsgdmFyeWluZ0RpcmVjdGlvbk5hbWUgKyBcIik7XFxuXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxpZ2h0VHlwZSAhPT0gXCJkaXJlY3Rpb25hbFwiKSB7XG4gICAgICAgICAgdmVydGV4U2hhZGVyICs9IFwidmFyeWluZyB2ZWMzIFwiICsgdmFyeWluZ1Bvc2l0aW9uTmFtZSArIFwiO1xcblwiO1xuICAgICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwidmFyeWluZyB2ZWMzIFwiICsgdmFyeWluZ1Bvc2l0aW9uTmFtZSArIFwiO1xcblwiO1xuXG4gICAgICAgICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgICAgICAgXCIgIFwiICtcbiAgICAgICAgICAgIHZhcnlpbmdQb3NpdGlvbk5hbWUgK1xuICAgICAgICAgICAgXCIgPSB1X1wiICtcbiAgICAgICAgICAgIGxpZ2h0QmFzZU5hbWUgK1xuICAgICAgICAgICAgXCJUcmFuc2Zvcm1bM10ueHl6O1xcblwiO1xuICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPVxuICAgICAgICAgICAgXCIgICAgdmVjMyBWUCA9IFwiICsgdmFyeWluZ1Bvc2l0aW9uTmFtZSArIFwiIC0gdl9wb3NpdGlvbkVDO1xcblwiO1xuICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPSBcIiAgICB2ZWMzIGwgPSBub3JtYWxpemUoVlApO1xcblwiO1xuICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPSBcIiAgICBmbG9hdCByYW5nZSA9IGxlbmd0aChWUCk7XFxuXCI7XG4gICAgICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9XG4gICAgICAgICAgICBcIiAgICBmbG9hdCBhdHRlbnVhdGlvbiA9IDEuMCAvICh1X1wiICtcbiAgICAgICAgICAgIGxpZ2h0QmFzZU5hbWUgK1xuICAgICAgICAgICAgXCJBdHRlbnVhdGlvbi54ICsgXCI7XG4gICAgICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9XG4gICAgICAgICAgICBcIih1X1wiICsgbGlnaHRCYXNlTmFtZSArIFwiQXR0ZW51YXRpb24ueSAqIHJhbmdlKSArIFwiO1xuICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPVxuICAgICAgICAgICAgXCIodV9cIiArIGxpZ2h0QmFzZU5hbWUgKyBcIkF0dGVudWF0aW9uLnogKiByYW5nZSAqIHJhbmdlKSk7XFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9IFwiICAgIGZsb2F0IGF0dGVudWF0aW9uID0gMS4wO1xcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxpZ2h0VHlwZSA9PT0gXCJzcG90XCIpIHtcbiAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz1cbiAgICAgICAgICAgIFwiICAgIGZsb2F0IHNwb3REb3QgPSBkb3QobCwgbm9ybWFsaXplKFwiICtcbiAgICAgICAgICAgIHZhcnlpbmdEaXJlY3Rpb25OYW1lICtcbiAgICAgICAgICAgIFwiKSk7XFxuXCI7XG4gICAgICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9XG4gICAgICAgICAgICBcIiAgICBpZiAoc3BvdERvdCA8IGNvcyh1X1wiICsgbGlnaHRCYXNlTmFtZSArIFwiRmFsbE9mZi54ICogMC41KSlcXG5cIjtcbiAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgICAge1xcblwiO1xuICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPSBcIiAgICAgIGF0dGVudWF0aW9uID0gMC4wO1xcblwiO1xuICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPSBcIiAgICB9XFxuXCI7XG4gICAgICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9IFwiICAgIGVsc2VcXG5cIjtcbiAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgICAge1xcblwiO1xuICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPVxuICAgICAgICAgICAgXCIgICAgICAgIGF0dGVudWF0aW9uICo9IG1heCgwLjAsIHBvdyhzcG90RG90LCB1X1wiICtcbiAgICAgICAgICAgIGxpZ2h0QmFzZU5hbWUgK1xuICAgICAgICAgICAgXCJGYWxsT2ZmLnkpKTtcXG5cIjtcbiAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgICAgfVxcblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9XG4gICAgICAgICAgXCIgICAgZGlmZnVzZUxpZ2h0ICs9IFwiICtcbiAgICAgICAgICBsaWdodENvbG9yTmFtZSArXG4gICAgICAgICAgXCIqIG1heChkb3Qobm9ybWFsLGwpLCAwLikgKiBhdHRlbnVhdGlvbjtcXG5cIjtcblxuICAgICAgICBpZiAoaGFzU3BlY3VsYXIpIHtcbiAgICAgICAgICBpZiAobGlnaHRpbmdNb2RlbCA9PT0gXCJCTElOTlwiKSB7XG4gICAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgICAgdmVjMyBoID0gbm9ybWFsaXplKGwgKyB2aWV3RGlyKTtcXG5cIjtcbiAgICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPVxuICAgICAgICAgICAgICBcIiAgICBmbG9hdCBzcGVjdWxhckludGVuc2l0eSA9IG1heCgwLiwgcG93KG1heChkb3Qobm9ybWFsLCBoKSwgMC4pLCB1X3NoaW5pbmVzcykpICogYXR0ZW51YXRpb247XFxuXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFBIT05HXG4gICAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz1cbiAgICAgICAgICAgICAgXCIgICAgdmVjMyByZWZsZWN0RGlyID0gcmVmbGVjdCgtbCwgbm9ybWFsKTtcXG5cIjtcbiAgICAgICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPVxuICAgICAgICAgICAgICBcIiAgICBmbG9hdCBzcGVjdWxhckludGVuc2l0eSA9IG1heCgwLiwgcG93KG1heChkb3QocmVmbGVjdERpciwgdmlld0RpciksIDAuKSwgdV9zaGluaW5lc3MpKSAqIGF0dGVudWF0aW9uO1xcblwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz1cbiAgICAgICAgICAgIFwiICAgIHNwZWN1bGFyTGlnaHQgKz0gXCIgK1xuICAgICAgICAgICAgbGlnaHRDb2xvck5hbWUgK1xuICAgICAgICAgICAgXCIgKiBzcGVjdWxhckludGVuc2l0eTtcXG5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9IFwiICB9XFxuXCI7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFoYXNBbWJpZW50TGlnaHRzKSB7XG4gICAgLy8gQWRkIGFuIGFtYmllbnQgbGlnaHQgaWYgd2UgZG9uJ3QgaGF2ZSBvbmVcbiAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgIGFtYmllbnRMaWdodCArPSB2ZWMzKDAuMiwgMC4yLCAwLjIpO1xcblwiO1xuICB9XG5cbiAgaWYgKCFoYXNOb25BbWJpZW50TGlnaHRzICYmIGxpZ2h0aW5nTW9kZWwgIT09IFwiQ09OU1RBTlRcIikge1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiI2lmZGVmIFVTRV9DVVNUT01fTElHSFRfQ09MT1IgXFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCJ1bmlmb3JtIHZlYzMgZ2x0Zl9saWdodENvbG9yOyBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbmRpZiBcXG5cIjtcblxuICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPSBcIiNpZm5kZWYgVVNFX0NVU1RPTV9MSUdIVF9DT0xPUiBcXG5cIjtcbiAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgICAgdmVjMyBsaWdodENvbG9yID0gY3ptX2xpZ2h0Q29sb3I7XFxuXCI7XG4gICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9IFwiI2Vsc2UgXFxuXCI7XG4gICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9IFwiICAgIHZlYzMgbGlnaHRDb2xvciA9IGdsdGZfbGlnaHRDb2xvcjtcXG5cIjtcbiAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIjZW5kaWYgXFxuXCI7XG5cbiAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgIHZlYzMgbCA9IG5vcm1hbGl6ZShjem1fbGlnaHREaXJlY3Rpb25FQyk7XFxuXCI7XG4gICAgdmFyIG1pbmltdW1MaWdodGluZyA9IFwiMC4yXCI7IC8vIFVzZSBzdHJpbmdzIGluc3RlYWQgb2YgdmFsdWVzIGFzIDAuMCAtPiAwIHdoZW4gc3RyaW5naWZpZWRcbiAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz1cbiAgICAgIFwiICBkaWZmdXNlTGlnaHQgKz0gbGlnaHRDb2xvciAqIG1heChkb3Qobm9ybWFsLGwpLCBcIiArXG4gICAgICBtaW5pbXVtTGlnaHRpbmcgK1xuICAgICAgXCIpO1xcblwiO1xuXG4gICAgaWYgKGhhc1NwZWN1bGFyKSB7XG4gICAgICBpZiAobGlnaHRpbmdNb2RlbCA9PT0gXCJCTElOTlwiKSB7XG4gICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPSBcIiAgdmVjMyBoID0gbm9ybWFsaXplKGwgKyB2aWV3RGlyKTtcXG5cIjtcbiAgICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9XG4gICAgICAgICAgXCIgIGZsb2F0IHNwZWN1bGFySW50ZW5zaXR5ID0gbWF4KDAuLCBwb3cobWF4KGRvdChub3JtYWwsIGgpLCAwLiksIHVfc2hpbmluZXNzKSk7XFxuXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQSE9OR1xuICAgICAgICBmcmFnbWVudExpZ2h0aW5nQmxvY2sgKz0gXCIgIHZlYzMgcmVmbGVjdERpciA9IHJlZmxlY3QoLWwsIG5vcm1hbCk7XFxuXCI7XG4gICAgICAgIGZyYWdtZW50TGlnaHRpbmdCbG9jayArPVxuICAgICAgICAgIFwiICBmbG9hdCBzcGVjdWxhckludGVuc2l0eSA9IG1heCgwLiwgcG93KG1heChkb3QocmVmbGVjdERpciwgdmlld0RpciksIDAuKSwgdV9zaGluaW5lc3MpKTtcXG5cIjtcbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnRMaWdodGluZ0Jsb2NrICs9XG4gICAgICAgIFwiICBzcGVjdWxhckxpZ2h0ICs9IGxpZ2h0Q29sb3IgKiBzcGVjdWxhckludGVuc2l0eTtcXG5cIjtcbiAgICB9XG4gIH1cblxuICB2ZXJ0ZXhTaGFkZXIgKz0gXCJ2b2lkIG1haW4odm9pZCkge1xcblwiO1xuICB2ZXJ0ZXhTaGFkZXIgKz0gdmVydGV4U2hhZGVyTWFpbjtcbiAgdmVydGV4U2hhZGVyICs9IFwifVxcblwiO1xuXG4gIGZyYWdtZW50U2hhZGVyICs9IFwidm9pZCBtYWluKHZvaWQpIHtcXG5cIjtcbiAgdmFyIGNvbG9yQ3JlYXRpb25CbG9jayA9IFwiICB2ZWMzIGNvbG9yID0gdmVjMygwLjAsIDAuMCwgMC4wKTtcXG5cIjtcbiAgaWYgKGhhc05vcm1hbHMpIHtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgdmVjMyBub3JtYWwgPSBub3JtYWxpemUodl9ub3JtYWwpO1xcblwiO1xuICAgIGlmIChraHJNYXRlcmlhbHNDb21tb24uZG91YmxlU2lkZWQpIHtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICBpZiAoY3ptX2JhY2tGYWNpbmcoKSlcXG5cIjtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICB7XFxuXCI7XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBub3JtYWwgPSAtbm9ybWFsO1xcblwiO1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgIH1cXG5cIjtcbiAgICB9XG4gIH1cblxuICB2YXIgZmluYWxDb2xvckNvbXB1dGF0aW9uO1xuICBpZiAobGlnaHRpbmdNb2RlbCAhPT0gXCJDT05TVEFOVFwiKSB7XG4gICAgaWYgKGRlZmluZWQodGVjaG5pcXVlVW5pZm9ybXMudV9kaWZmdXNlKSkge1xuICAgICAgaWYgKHRlY2huaXF1ZVVuaWZvcm1zLnVfZGlmZnVzZS50eXBlID09PSBXZWJHTENvbnN0YW50cy5TQU1QTEVSXzJEKSB7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgXCIgIHZlYzQgZGlmZnVzZSA9IHRleHR1cmUyRCh1X2RpZmZ1c2UsIFwiICsgdl90ZXhjb29yZCArIFwiKTtcXG5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICB2ZWM0IGRpZmZ1c2UgPSB1X2RpZmZ1c2U7XFxuXCI7XG4gICAgICB9XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgdmVjMyBkaWZmdXNlTGlnaHQgPSB2ZWMzKDAuMCwgMC4wLCAwLjApO1xcblwiO1xuICAgICAgY29sb3JDcmVhdGlvbkJsb2NrICs9IFwiICBjb2xvciArPSBkaWZmdXNlLnJnYiAqIGRpZmZ1c2VMaWdodDtcXG5cIjtcbiAgICB9XG5cbiAgICBpZiAoaGFzU3BlY3VsYXIpIHtcbiAgICAgIGlmICh0ZWNobmlxdWVVbmlmb3Jtcy51X3NwZWN1bGFyLnR5cGUgPT09IFdlYkdMQ29uc3RhbnRzLlNBTVBMRVJfMkQpIHtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgICBcIiAgdmVjMyBzcGVjdWxhciA9IHRleHR1cmUyRCh1X3NwZWN1bGFyLCBcIiArIHZfdGV4Y29vcmQgKyBcIikucmdiO1xcblwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgIHZlYzMgc3BlY3VsYXIgPSB1X3NwZWN1bGFyLnJnYjtcXG5cIjtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICB2ZWMzIHNwZWN1bGFyTGlnaHQgPSB2ZWMzKDAuMCwgMC4wLCAwLjApO1xcblwiO1xuICAgICAgY29sb3JDcmVhdGlvbkJsb2NrICs9IFwiICBjb2xvciArPSBzcGVjdWxhciAqIHNwZWN1bGFyTGlnaHQ7XFxuXCI7XG4gICAgfVxuXG4gICAgaWYgKGRlZmluZWQodGVjaG5pcXVlVW5pZm9ybXMudV90cmFuc3BhcmVuY3kpKSB7XG4gICAgICBmaW5hbENvbG9yQ29tcHV0YXRpb24gPVxuICAgICAgICBcIiAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciAqIGRpZmZ1c2UuYSAqIHVfdHJhbnNwYXJlbmN5LCBkaWZmdXNlLmEgKiB1X3RyYW5zcGFyZW5jeSk7XFxuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbmFsQ29sb3JDb21wdXRhdGlvbiA9XG4gICAgICAgIFwiICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yICogZGlmZnVzZS5hLCBkaWZmdXNlLmEpO1xcblwiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkZWZpbmVkKHRlY2huaXF1ZVVuaWZvcm1zLnVfdHJhbnNwYXJlbmN5KSkge1xuICAgIGZpbmFsQ29sb3JDb21wdXRhdGlvbiA9XG4gICAgICBcIiAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciAqIHVfdHJhbnNwYXJlbmN5LCB1X3RyYW5zcGFyZW5jeSk7XFxuXCI7XG4gIH0gZWxzZSB7XG4gICAgZmluYWxDb2xvckNvbXB1dGF0aW9uID0gXCIgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIDEuMCk7XFxuXCI7XG4gIH1cblxuICBpZiAoaGFzVmVydGV4Q29sb3JzKSB7XG4gICAgY29sb3JDcmVhdGlvbkJsb2NrICs9IFwiICBjb2xvciAqPSB2X3ZlcnRleENvbG9yLnJnYjtcXG5cIjtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHRlY2huaXF1ZVVuaWZvcm1zLnVfZW1pc3Npb24pKSB7XG4gICAgaWYgKHRlY2huaXF1ZVVuaWZvcm1zLnVfZW1pc3Npb24udHlwZSA9PT0gV2ViR0xDb25zdGFudHMuU0FNUExFUl8yRCkge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgXCIgIHZlYzMgZW1pc3Npb24gPSB0ZXh0dXJlMkQodV9lbWlzc2lvbiwgXCIgKyB2X3RleGNvb3JkICsgXCIpLnJnYjtcXG5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgIHZlYzMgZW1pc3Npb24gPSB1X2VtaXNzaW9uLnJnYjtcXG5cIjtcbiAgICB9XG4gICAgY29sb3JDcmVhdGlvbkJsb2NrICs9IFwiICBjb2xvciArPSBlbWlzc2lvbjtcXG5cIjtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHRlY2huaXF1ZVVuaWZvcm1zLnVfYW1iaWVudCkgfHwgbGlnaHRpbmdNb2RlbCAhPT0gXCJDT05TVEFOVFwiKSB7XG4gICAgaWYgKGRlZmluZWQodGVjaG5pcXVlVW5pZm9ybXMudV9hbWJpZW50KSkge1xuICAgICAgaWYgKHRlY2huaXF1ZVVuaWZvcm1zLnVfYW1iaWVudC50eXBlID09PSBXZWJHTENvbnN0YW50cy5TQU1QTEVSXzJEKSB7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgXCIgIHZlYzMgYW1iaWVudCA9IHRleHR1cmUyRCh1X2FtYmllbnQsIFwiICsgdl90ZXhjb29yZCArIFwiKS5yZ2I7XFxuXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgdmVjMyBhbWJpZW50ID0gdV9hbWJpZW50LnJnYjtcXG5cIjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgIHZlYzMgYW1iaWVudCA9IGRpZmZ1c2UucmdiO1xcblwiO1xuICAgIH1cbiAgICBjb2xvckNyZWF0aW9uQmxvY2sgKz0gXCIgIGNvbG9yICs9IGFtYmllbnQgKiBhbWJpZW50TGlnaHQ7XFxuXCI7XG4gIH1cbiAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgIHZlYzMgdmlld0RpciA9IC1ub3JtYWxpemUodl9wb3NpdGlvbkVDKTtcXG5cIjtcbiAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgIHZlYzMgYW1iaWVudExpZ2h0ID0gdmVjMygwLjAsIDAuMCwgMC4wKTtcXG5cIjtcblxuICAvLyBBZGQgaW4gbGlnaHQgY29tcHV0YXRpb25zXG4gIGZyYWdtZW50U2hhZGVyICs9IGZyYWdtZW50TGlnaHRpbmdCbG9jaztcblxuICBmcmFnbWVudFNoYWRlciArPSBjb2xvckNyZWF0aW9uQmxvY2s7XG4gIGZyYWdtZW50U2hhZGVyICs9IGZpbmFsQ29sb3JDb21wdXRhdGlvbjtcbiAgZnJhZ21lbnRTaGFkZXIgKz0gXCJ9XFxuXCI7XG5cbiAgLy8gQWRkIHNoYWRlcnNcbiAgdmFyIHZlcnRleFNoYWRlcklkID0gYWRkVG9BcnJheShzaGFkZXJzLCB7XG4gICAgdHlwZTogV2ViR0xDb25zdGFudHMuVkVSVEVYX1NIQURFUixcbiAgICBleHRyYXM6IHtcbiAgICAgIF9waXBlbGluZToge1xuICAgICAgICBzb3VyY2U6IHZlcnRleFNoYWRlcixcbiAgICAgICAgZXh0ZW5zaW9uOiBcIi5nbHNsXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIHZhciBmcmFnbWVudFNoYWRlcklkID0gYWRkVG9BcnJheShzaGFkZXJzLCB7XG4gICAgdHlwZTogV2ViR0xDb25zdGFudHMuRlJBR01FTlRfU0hBREVSLFxuICAgIGV4dHJhczoge1xuICAgICAgX3BpcGVsaW5lOiB7XG4gICAgICAgIHNvdXJjZTogZnJhZ21lbnRTaGFkZXIsXG4gICAgICAgIGV4dGVuc2lvbjogXCIuZ2xzbFwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICAvLyBBZGQgcHJvZ3JhbVxuICB2YXIgcHJvZ3JhbUlkID0gYWRkVG9BcnJheShwcm9ncmFtcywge1xuICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudFNoYWRlcklkLFxuICAgIHZlcnRleFNoYWRlcjogdmVydGV4U2hhZGVySWQsXG4gIH0pO1xuXG4gIHZhciB0ZWNobmlxdWVJZCA9IGFkZFRvQXJyYXkodGVjaG5pcXVlcywge1xuICAgIGF0dHJpYnV0ZXM6IHRlY2huaXF1ZUF0dHJpYnV0ZXMsXG4gICAgcHJvZ3JhbTogcHJvZ3JhbUlkLFxuICAgIHVuaWZvcm1zOiB0ZWNobmlxdWVVbmlmb3JtcyxcbiAgfSk7XG5cbiAgcmV0dXJuIHRlY2huaXF1ZUlkO1xufVxuXG5mdW5jdGlvbiBnZXRLSFJNYXRlcmlhbHNDb21tb25WYWx1ZVR5cGUocGFyYW1OYW1lLCBwYXJhbVZhbHVlKSB7XG4gIHZhciB2YWx1ZTtcblxuICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmb3IgQ09MTEFEQTJHTFRGIHYxLjAtZHJhZnQgd2hlbiBpdCBlbmNvZGluZ1xuICAvLyBtYXRlcmlhbHMgdXNpbmcgS0hSX21hdGVyaWFsc19jb21tb24gd2l0aCBleHBsaWNpdCB0eXBlL3ZhbHVlIG1lbWJlcnNcbiAgaWYgKGRlZmluZWQocGFyYW1WYWx1ZS52YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IHBhcmFtVmFsdWUudmFsdWU7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChwYXJhbVZhbHVlLmluZGV4KSkge1xuICAgIHZhbHVlID0gW3BhcmFtVmFsdWUuaW5kZXhdO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gcGFyYW1WYWx1ZTtcbiAgfVxuXG4gIHN3aXRjaCAocGFyYW1OYW1lKSB7XG4gICAgY2FzZSBcImFtYmllbnRcIjpcbiAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDFcbiAgICAgICAgPyBXZWJHTENvbnN0YW50cy5TQU1QTEVSXzJEXG4gICAgICAgIDogV2ViR0xDb25zdGFudHMuRkxPQVRfVkVDNDtcbiAgICBjYXNlIFwiZGlmZnVzZVwiOlxuICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMVxuICAgICAgICA/IFdlYkdMQ29uc3RhbnRzLlNBTVBMRVJfMkRcbiAgICAgICAgOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUM0O1xuICAgIGNhc2UgXCJlbWlzc2lvblwiOlxuICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMVxuICAgICAgICA/IFdlYkdMQ29uc3RhbnRzLlNBTVBMRVJfMkRcbiAgICAgICAgOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUM0O1xuICAgIGNhc2UgXCJzcGVjdWxhclwiOlxuICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMVxuICAgICAgICA/IFdlYkdMQ29uc3RhbnRzLlNBTVBMRVJfMkRcbiAgICAgICAgOiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUM0O1xuICAgIGNhc2UgXCJzaGluaW5lc3NcIjpcbiAgICAgIHJldHVybiBXZWJHTENvbnN0YW50cy5GTE9BVDtcbiAgICBjYXNlIFwidHJhbnNwYXJlbmN5XCI6XG4gICAgICByZXR1cm4gV2ViR0xDb25zdGFudHMuRkxPQVQ7XG5cbiAgICAvLyB0aGVzZSB0d28gYXJlIHVzdWFsbHkgbm90IHVzZWQgZGlyZWN0bHkgd2l0aGluIHNoYWRlcnMsXG4gICAgLy8gdGhleSBhcmUganVzdCBhZGRlZCBoZXJlIGZvciBjb21wbGV0ZW5lc3NcbiAgICBjYXNlIFwidHJhbnNwYXJlbnRcIjpcbiAgICAgIHJldHVybiBXZWJHTENvbnN0YW50cy5CT09MO1xuICAgIGNhc2UgXCJkb3VibGVTaWRlZFwiOlxuICAgICAgcmV0dXJuIFdlYkdMQ29uc3RhbnRzLkJPT0w7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VGVjaG5pcXVlS2V5KGtock1hdGVyaWFsc0NvbW1vbiwgcHJpbWl0aXZlSW5mbykge1xuICB2YXIgdGVjaG5pcXVlS2V5ID0gXCJcIjtcbiAgdGVjaG5pcXVlS2V5ICs9IFwidGVjaG5pcXVlOlwiICsga2hyTWF0ZXJpYWxzQ29tbW9uLnRlY2huaXF1ZSArIFwiO1wiO1xuXG4gIHZhciB2YWx1ZXMgPSBraHJNYXRlcmlhbHNDb21tb24udmFsdWVzO1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlcykuc29ydCgpO1xuICB2YXIga2V5c0NvdW50ID0ga2V5cy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5c0NvdW50OyArK2kpIHtcbiAgICB2YXIgbmFtZSA9IGtleXNbaV07XG4gICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgdGVjaG5pcXVlS2V5ICs9XG4gICAgICAgIG5hbWUgKyBcIjpcIiArIGdldEtIUk1hdGVyaWFsc0NvbW1vblZhbHVlVHlwZShuYW1lLCB2YWx1ZXNbbmFtZV0pO1xuICAgICAgdGVjaG5pcXVlS2V5ICs9IFwiO1wiO1xuICAgIH1cbiAgfVxuXG4gIHZhciBqb2ludENvdW50ID0gZGVmYXVsdFZhbHVlKGtock1hdGVyaWFsc0NvbW1vbi5qb2ludENvdW50LCAwKTtcbiAgdGVjaG5pcXVlS2V5ICs9IGpvaW50Q291bnQudG9TdHJpbmcoKSArIFwiO1wiO1xuICBpZiAoZGVmaW5lZChwcmltaXRpdmVJbmZvKSkge1xuICAgIHZhciBza2lubmluZ0luZm8gPSBwcmltaXRpdmVJbmZvLnNraW5uaW5nO1xuICAgIGlmIChqb2ludENvdW50ID4gMCkge1xuICAgICAgdGVjaG5pcXVlS2V5ICs9IHNraW5uaW5nSW5mby50eXBlICsgXCI7XCI7XG4gICAgfVxuICAgIHRlY2huaXF1ZUtleSArPSBwcmltaXRpdmVJbmZvLmhhc1ZlcnRleENvbG9ycztcbiAgfVxuXG4gIHJldHVybiB0ZWNobmlxdWVLZXk7XG59XG5cbmZ1bmN0aW9uIGxpZ2h0RGVmYXVsdHMoZ2x0Zikge1xuICB2YXIga2hyTWF0ZXJpYWxzQ29tbW9uID0gZ2x0Zi5leHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY29tbW9uO1xuICBpZiAoIWRlZmluZWQoa2hyTWF0ZXJpYWxzQ29tbW9uKSB8fCAhZGVmaW5lZChraHJNYXRlcmlhbHNDb21tb24ubGlnaHRzKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBsaWdodHMgPSBraHJNYXRlcmlhbHNDb21tb24ubGlnaHRzO1xuXG4gIHZhciBsaWdodHNMZW5ndGggPSBsaWdodHMubGVuZ3RoO1xuICBmb3IgKHZhciBsaWdodElkID0gMDsgbGlnaHRJZCA8IGxpZ2h0c0xlbmd0aDsgbGlnaHRJZCsrKSB7XG4gICAgdmFyIGxpZ2h0ID0gbGlnaHRzW2xpZ2h0SWRdO1xuICAgIGlmIChsaWdodC50eXBlID09PSBcImFtYmllbnRcIikge1xuICAgICAgaWYgKCFkZWZpbmVkKGxpZ2h0LmFtYmllbnQpKSB7XG4gICAgICAgIGxpZ2h0LmFtYmllbnQgPSB7fTtcbiAgICAgIH1cbiAgICAgIHZhciBhbWJpZW50TGlnaHQgPSBsaWdodC5hbWJpZW50O1xuXG4gICAgICBpZiAoIWRlZmluZWQoYW1iaWVudExpZ2h0LmNvbG9yKSkge1xuICAgICAgICBhbWJpZW50TGlnaHQuY29sb3IgPSBbMS4wLCAxLjAsIDEuMF07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsaWdodC50eXBlID09PSBcImRpcmVjdGlvbmFsXCIpIHtcbiAgICAgIGlmICghZGVmaW5lZChsaWdodC5kaXJlY3Rpb25hbCkpIHtcbiAgICAgICAgbGlnaHQuZGlyZWN0aW9uYWwgPSB7fTtcbiAgICAgIH1cbiAgICAgIHZhciBkaXJlY3Rpb25hbExpZ2h0ID0gbGlnaHQuZGlyZWN0aW9uYWw7XG5cbiAgICAgIGlmICghZGVmaW5lZChkaXJlY3Rpb25hbExpZ2h0LmNvbG9yKSkge1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LmNvbG9yID0gWzEuMCwgMS4wLCAxLjBdO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobGlnaHQudHlwZSA9PT0gXCJwb2ludFwiKSB7XG4gICAgICBpZiAoIWRlZmluZWQobGlnaHQucG9pbnQpKSB7XG4gICAgICAgIGxpZ2h0LnBvaW50ID0ge307XG4gICAgICB9XG4gICAgICB2YXIgcG9pbnRMaWdodCA9IGxpZ2h0LnBvaW50O1xuXG4gICAgICBpZiAoIWRlZmluZWQocG9pbnRMaWdodC5jb2xvcikpIHtcbiAgICAgICAgcG9pbnRMaWdodC5jb2xvciA9IFsxLjAsIDEuMCwgMS4wXTtcbiAgICAgIH1cblxuICAgICAgcG9pbnRMaWdodC5jb25zdGFudEF0dGVudWF0aW9uID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBwb2ludExpZ2h0LmNvbnN0YW50QXR0ZW51YXRpb24sXG4gICAgICAgIDEuMFxuICAgICAgKTtcbiAgICAgIHBvaW50TGlnaHQubGluZWFyQXR0ZW51YXRpb24gPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHBvaW50TGlnaHQubGluZWFyQXR0ZW51YXRpb24sXG4gICAgICAgIDAuMFxuICAgICAgKTtcbiAgICAgIHBvaW50TGlnaHQucXVhZHJhdGljQXR0ZW51YXRpb24gPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHBvaW50TGlnaHQucXVhZHJhdGljQXR0ZW51YXRpb24sXG4gICAgICAgIDAuMFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGxpZ2h0LnR5cGUgPT09IFwic3BvdFwiKSB7XG4gICAgICBpZiAoIWRlZmluZWQobGlnaHQuc3BvdCkpIHtcbiAgICAgICAgbGlnaHQuc3BvdCA9IHt9O1xuICAgICAgfVxuICAgICAgdmFyIHNwb3RMaWdodCA9IGxpZ2h0LnNwb3Q7XG5cbiAgICAgIGlmICghZGVmaW5lZChzcG90TGlnaHQuY29sb3IpKSB7XG4gICAgICAgIHNwb3RMaWdodC5jb2xvciA9IFsxLjAsIDEuMCwgMS4wXTtcbiAgICAgIH1cblxuICAgICAgc3BvdExpZ2h0LmNvbnN0YW50QXR0ZW51YXRpb24gPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHNwb3RMaWdodC5jb25zdGFudEF0dGVudWF0aW9uLFxuICAgICAgICAxLjBcbiAgICAgICk7XG4gICAgICBzcG90TGlnaHQuZmFsbE9mZkFuZ2xlID0gZGVmYXVsdFZhbHVlKHNwb3RMaWdodC5mYWxsT2ZmQW5nbGUsIDMuMTQxNTkyNjUpO1xuICAgICAgc3BvdExpZ2h0LmZhbGxPZmZFeHBvbmVudCA9IGRlZmF1bHRWYWx1ZShzcG90TGlnaHQuZmFsbE9mZkV4cG9uZW50LCAwLjApO1xuICAgICAgc3BvdExpZ2h0LmxpbmVhckF0dGVudWF0aW9uID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBzcG90TGlnaHQubGluZWFyQXR0ZW51YXRpb24sXG4gICAgICAgIDAuMFxuICAgICAgKTtcbiAgICAgIHNwb3RMaWdodC5xdWFkcmF0aWNBdHRlbnVhdGlvbiA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgc3BvdExpZ2h0LnF1YWRyYXRpY0F0dGVudWF0aW9uLFxuICAgICAgICAwLjBcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBwcm9jZXNzTW9kZWxNYXRlcmlhbHNDb21tb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///51240\n')},14503:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(82982);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52200);\n/* harmony import */ var _Core_webGLConstantToGlslType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37231);\n/* harmony import */ var _GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9919);\n/* harmony import */ var _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56629);\n/* harmony import */ var _GltfPipeline_usesExtension_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(29745);\n/* harmony import */ var _ModelUtility_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(15322);\n\n\n\n\n\n\n\n\n\n/**\n * @private\n */\nfunction processPbrMaterials(gltf, options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  // No need to create new techniques if they already exist,\n  // the shader should handle these values\n  if ((0,_GltfPipeline_usesExtension_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf, "KHR_techniques_webgl")) {\n    return gltf;\n  }\n\n  // All materials in glTF are PBR by default,\n  // so we should apply PBR unless no materials are found.\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf.materials) || gltf.materials.length === 0) {\n    return gltf;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf.extensions)) {\n    gltf.extensions = {};\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf.extensionsUsed)) {\n    gltf.extensionsUsed = [];\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf.extensionsRequired)) {\n    gltf.extensionsRequired = [];\n  }\n\n  gltf.extensions.KHR_techniques_webgl = {\n    programs: [],\n    shaders: [],\n    techniques: [],\n  };\n\n  gltf.extensionsUsed.push("KHR_techniques_webgl");\n  gltf.extensionsRequired.push("KHR_techniques_webgl");\n\n  var primitiveByMaterial = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].splitIncompatibleMaterials */ .Z.splitIncompatibleMaterials(gltf);\n\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].material */ .Z.material(gltf, function (material, materialIndex) {\n    var generatedMaterialValues = {};\n    var technique = generateTechnique(\n      gltf,\n      material,\n      materialIndex,\n      generatedMaterialValues,\n      primitiveByMaterial,\n      options\n    );\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(material.extensions)) {\n      material.extensions = {};\n    }\n\n    material.extensions.KHR_techniques_webgl = {\n      values: generatedMaterialValues,\n      technique: technique,\n    };\n  });\n\n  // If any primitives have semantics that aren\'t declared in the generated\n  // shaders, we want to preserve them.\n  _ModelUtility_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].ensureSemanticExistence */ .Z.ensureSemanticExistence(gltf);\n\n  return gltf;\n}\n\nfunction isSpecularGlossinessMaterial(material) {\n  return (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(material.extensions) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(material.extensions.KHR_materials_pbrSpecularGlossiness)\n  );\n}\n\nfunction addTextureCoordinates(\n  gltf,\n  textureName,\n  generatedMaterialValues,\n  defaultTexCoord,\n  result\n) {\n  var texCoord;\n  var texInfo = generatedMaterialValues[textureName];\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(texInfo) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(texInfo.texCoord) && texInfo.texCoord === 1) {\n    defaultTexCoord = defaultTexCoord.replace("0", "1");\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues[textureName + "Offset"])) {\n    texCoord = textureName + "Coord";\n    result.fragmentShaderMain +=\n      "    vec2 " +\n      texCoord +\n      " = computeTexCoord(" +\n      defaultTexCoord +\n      ", " +\n      textureName +\n      "Offset, " +\n      textureName +\n      "Rotation, " +\n      textureName +\n      "Scale);\\n";\n  } else {\n    texCoord = defaultTexCoord;\n  }\n  return texCoord;\n}\n\nvar DEFAULT_TEXTURE_OFFSET = [0.0, 0.0];\nvar DEFAULT_TEXTURE_ROTATION = [0.0];\nvar DEFAULT_TEXTURE_SCALE = [1.0, 1.0];\n\nfunction handleKHRTextureTransform(\n  parameterName,\n  value,\n  generatedMaterialValues\n) {\n  if (\n    parameterName.indexOf("Texture") === -1 ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(value.extensions) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(value.extensions.KHR_texture_transform)\n  ) {\n    return;\n  }\n\n  var uniformName = "u_" + parameterName;\n  var extension = value.extensions.KHR_texture_transform;\n  generatedMaterialValues[uniformName + "Offset"] = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    extension.offset,\n    DEFAULT_TEXTURE_OFFSET\n  );\n  generatedMaterialValues[uniformName + "Rotation"] = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    extension.rotation,\n    DEFAULT_TEXTURE_ROTATION\n  );\n  generatedMaterialValues[uniformName + "Scale"] = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    extension.scale,\n    DEFAULT_TEXTURE_SCALE\n  );\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(value.texCoord) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(extension.texCoord)) {\n    generatedMaterialValues[uniformName].texCoord = extension.texCoord;\n  }\n}\n\nfunction generateTechnique(\n  gltf,\n  material,\n  materialIndex,\n  generatedMaterialValues,\n  primitiveByMaterial,\n  options\n) {\n  var addBatchIdToGeneratedShaders = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    options.addBatchIdToGeneratedShaders,\n    false\n  );\n\n  var techniquesWebgl = gltf.extensions.KHR_techniques_webgl;\n  var techniques = techniquesWebgl.techniques;\n  var shaders = techniquesWebgl.shaders;\n  var programs = techniquesWebgl.programs;\n\n  var useSpecGloss = isSpecularGlossinessMaterial(material);\n\n  var uniformName;\n  var parameterName;\n  var value;\n  var pbrMetallicRoughness = material.pbrMetallicRoughness;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(pbrMetallicRoughness) && !useSpecGloss) {\n    for (parameterName in pbrMetallicRoughness) {\n      if (pbrMetallicRoughness.hasOwnProperty(parameterName)) {\n        value = pbrMetallicRoughness[parameterName];\n        uniformName = "u_" + parameterName;\n        generatedMaterialValues[uniformName] = value;\n        handleKHRTextureTransform(\n          parameterName,\n          value,\n          generatedMaterialValues\n        );\n      }\n    }\n  }\n\n  if (useSpecGloss) {\n    var pbrSpecularGlossiness =\n      material.extensions.KHR_materials_pbrSpecularGlossiness;\n    for (parameterName in pbrSpecularGlossiness) {\n      if (pbrSpecularGlossiness.hasOwnProperty(parameterName)) {\n        value = pbrSpecularGlossiness[parameterName];\n        uniformName = "u_" + parameterName;\n        generatedMaterialValues[uniformName] = value;\n        handleKHRTextureTransform(\n          parameterName,\n          value,\n          generatedMaterialValues\n        );\n      }\n    }\n  }\n\n  for (var additional in material) {\n    if (\n      material.hasOwnProperty(additional) &&\n      (additional.indexOf("Texture") >= 0 || additional.indexOf("Factor") >= 0)\n    ) {\n      value = material[additional];\n      uniformName = "u_" + additional;\n      generatedMaterialValues[uniformName] = value;\n      handleKHRTextureTransform(additional, value, generatedMaterialValues);\n    }\n  }\n\n  var vertexShader = "precision highp float;\\n";\n  var fragmentShader = "precision highp float;\\n";\n\n  var skin;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf.skins)) {\n    skin = gltf.skins[0];\n  }\n  var joints = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(skin) ? skin.joints : [];\n  var jointCount = joints.length;\n\n  var primitiveInfo = primitiveByMaterial[materialIndex];\n\n  var skinningInfo;\n  var hasSkinning = false;\n  var hasVertexColors = false;\n  var hasMorphTargets = false;\n  var hasNormals = false;\n  var hasTangents = false;\n  var hasTexCoords = false;\n  var hasTexCoord1 = false;\n  var hasOutline = false;\n  var isUnlit = false;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(primitiveInfo)) {\n    skinningInfo = primitiveInfo.skinning;\n    hasSkinning = skinningInfo.skinned && joints.length > 0;\n    hasVertexColors = primitiveInfo.hasVertexColors;\n    hasMorphTargets = primitiveInfo.hasMorphTargets;\n    hasNormals = primitiveInfo.hasNormals;\n    hasTangents = primitiveInfo.hasTangents;\n    hasTexCoords = primitiveInfo.hasTexCoords;\n    hasTexCoord1 = primitiveInfo.hasTexCoord1;\n    hasOutline = primitiveInfo.hasOutline;\n  }\n\n  var morphTargets;\n  if (hasMorphTargets) {\n    _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n      _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n        if (primitive.material === materialIndex) {\n          var targets = primitive.targets;\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(targets)) {\n            morphTargets = targets;\n          }\n        }\n      });\n    });\n  }\n\n  // Add techniques\n  var techniqueUniforms = {\n    // Add matrices\n    u_modelViewMatrix: {\n      semantic: (0,_GltfPipeline_usesExtension_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf, "CESIUM_RTC")\n        ? "CESIUM_RTC_MODELVIEW"\n        : "MODELVIEW",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n    },\n    u_projectionMatrix: {\n      semantic: "PROJECTION",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n    },\n  };\n\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(material.extensions) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(material.extensions.KHR_materials_unlit)\n  ) {\n    isUnlit = true;\n  }\n\n  if (hasNormals) {\n    techniqueUniforms.u_normalMatrix = {\n      semantic: "MODELVIEWINVERSETRANSPOSE",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT3 */ .Z.FLOAT_MAT3,\n    };\n  }\n\n  if (hasSkinning) {\n    techniqueUniforms.u_jointMatrix = {\n      count: jointCount,\n      semantic: "JOINTMATRIX",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4,\n    };\n  }\n\n  if (hasMorphTargets) {\n    techniqueUniforms.u_morphWeights = {\n      count: morphTargets.length,\n      semantic: "MORPHWEIGHTS",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT,\n    };\n  }\n\n  var alphaMode = material.alphaMode;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(alphaMode) && alphaMode === "MASK") {\n    techniqueUniforms.u_alphaCutoff = {\n      semantic: "ALPHACUTOFF",\n      type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT,\n    };\n  }\n\n  // Add material values\n  for (uniformName in generatedMaterialValues) {\n    if (generatedMaterialValues.hasOwnProperty(uniformName)) {\n      techniqueUniforms[uniformName] = {\n        type: getPBRValueType(uniformName),\n      };\n    }\n  }\n\n  var baseColorUniform = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    techniqueUniforms.u_baseColorTexture,\n    techniqueUniforms.u_baseColorFactor\n  );\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(baseColorUniform)) {\n    baseColorUniform.semantic = "_3DTILESDIFFUSE";\n  }\n\n  // Add uniforms to shaders\n  for (uniformName in techniqueUniforms) {\n    if (techniqueUniforms.hasOwnProperty(uniformName)) {\n      var uniform = techniqueUniforms[uniformName];\n      var arraySize = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(uniform.count) ? "[" + uniform.count + "]" : "";\n      if (\n        (uniform.type !== _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT3 */ .Z.FLOAT_MAT3 &&\n          uniform.type !== _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_MAT4 */ .Z.FLOAT_MAT4 &&\n          uniformName !== "u_morphWeights") ||\n        uniform.useInFragment\n      ) {\n        fragmentShader +=\n          "uniform " +\n          (0,_Core_webGLConstantToGlslType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(uniform.type) +\n          " " +\n          uniformName +\n          arraySize +\n          ";\\n";\n        delete uniform.useInFragment;\n      } else {\n        vertexShader +=\n          "uniform " +\n          (0,_Core_webGLConstantToGlslType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(uniform.type) +\n          " " +\n          uniformName +\n          arraySize +\n          ";\\n";\n      }\n    }\n  }\n\n  if (hasOutline) {\n    fragmentShader += "uniform sampler2D u_outlineTexture;\\n";\n  }\n\n  // Add attributes with semantics\n  var vertexShaderMain = "";\n  if (hasSkinning) {\n    vertexShaderMain +=\n      "    mat4 skinMatrix =\\n" +\n      "        a_weight.x * u_jointMatrix[int(a_joint.x)] +\\n" +\n      "        a_weight.y * u_jointMatrix[int(a_joint.y)] +\\n" +\n      "        a_weight.z * u_jointMatrix[int(a_joint.z)] +\\n" +\n      "        a_weight.w * u_jointMatrix[int(a_joint.w)];\\n";\n  }\n\n  // Add position always\n  var techniqueAttributes = {\n    a_position: {\n      semantic: "POSITION",\n    },\n  };\n\n  if (hasOutline) {\n    techniqueAttributes.a_outlineCoordinates = {\n      semantic: "_OUTLINE_COORDINATES",\n    };\n  }\n\n  vertexShader += "attribute vec3 a_position;\\n";\n  if (hasNormals) {\n    vertexShader += "varying vec3 v_positionEC;\\n";\n  }\n  if (hasOutline) {\n    vertexShader += "attribute vec3 a_outlineCoordinates;\\n";\n    vertexShader += "varying vec3 v_outlineCoordinates;\\n";\n  }\n\n  // Morph Target Weighting\n  vertexShaderMain += "    vec3 weightedPosition = a_position;\\n";\n  if (hasNormals) {\n    vertexShaderMain += "    vec3 weightedNormal = a_normal;\\n";\n  }\n  if (hasTangents) {\n    vertexShaderMain += "    vec4 weightedTangent = a_tangent;\\n";\n  }\n  if (hasMorphTargets) {\n    for (var k = 0; k < morphTargets.length; k++) {\n      var targetAttributes = morphTargets[k];\n      for (var targetAttribute in targetAttributes) {\n        if (\n          targetAttributes.hasOwnProperty(targetAttribute) &&\n          targetAttribute !== "extras"\n        ) {\n          var attributeName = "a_" + targetAttribute + "_" + k;\n          techniqueAttributes[attributeName] = {\n            semantic: targetAttribute + "_" + k,\n          };\n          vertexShader += "attribute vec3 " + attributeName + ";\\n";\n          if (targetAttribute === "POSITION") {\n            vertexShaderMain +=\n              "    weightedPosition += u_morphWeights[" +\n              k +\n              "] * " +\n              attributeName +\n              ";\\n";\n          } else if (targetAttribute === "NORMAL") {\n            vertexShaderMain +=\n              "    weightedNormal += u_morphWeights[" +\n              k +\n              "] * " +\n              attributeName +\n              ";\\n";\n          } else if (hasTangents && targetAttribute === "TANGENT") {\n            vertexShaderMain +=\n              "    weightedTangent.xyz += u_morphWeights[" +\n              k +\n              "] * " +\n              attributeName +\n              ";\\n";\n          }\n        }\n      }\n    }\n  }\n\n  // Final position computation\n  if (hasSkinning) {\n    vertexShaderMain +=\n      "    vec4 position = skinMatrix * vec4(weightedPosition, 1.0);\\n";\n  } else {\n    vertexShaderMain += "    vec4 position = vec4(weightedPosition, 1.0);\\n";\n  }\n  vertexShaderMain += "    position = u_modelViewMatrix * position;\\n";\n  if (hasNormals) {\n    vertexShaderMain += "    v_positionEC = position.xyz;\\n";\n  }\n  vertexShaderMain += "    gl_Position = u_projectionMatrix * position;\\n";\n\n  if (hasOutline) {\n    vertexShaderMain += "    v_outlineCoordinates = a_outlineCoordinates;\\n";\n  }\n\n  // Final normal computation\n  if (hasNormals) {\n    techniqueAttributes.a_normal = {\n      semantic: "NORMAL",\n    };\n    vertexShader += "attribute vec3 a_normal;\\n";\n    if (!isUnlit) {\n      vertexShader += "varying vec3 v_normal;\\n";\n      if (hasSkinning) {\n        vertexShaderMain +=\n          "    v_normal = u_normalMatrix * mat3(skinMatrix) * weightedNormal;\\n";\n      } else {\n        vertexShaderMain += "    v_normal = u_normalMatrix * weightedNormal;\\n";\n      }\n      fragmentShader += "varying vec3 v_normal;\\n";\n    }\n    fragmentShader += "varying vec3 v_positionEC;\\n";\n  }\n\n  // Read tangents if available\n  if (hasTangents) {\n    techniqueAttributes.a_tangent = {\n      semantic: "TANGENT",\n    };\n    vertexShader += "attribute vec4 a_tangent;\\n";\n    vertexShader += "varying vec4 v_tangent;\\n";\n    vertexShaderMain +=\n      "    v_tangent.xyz = u_normalMatrix * weightedTangent.xyz;\\n";\n    vertexShaderMain += "    v_tangent.w = weightedTangent.w;\\n";\n\n    fragmentShader += "varying vec4 v_tangent;\\n";\n  }\n\n  if (hasOutline) {\n    fragmentShader += "varying vec3 v_outlineCoordinates;\\n";\n  }\n\n  var fragmentShaderMain = "";\n\n  // Add texture coordinates if the material uses them\n  var v_texCoord;\n  var normalTexCoord;\n  var baseColorTexCoord;\n  var specularGlossinessTexCoord;\n  var diffuseTexCoord;\n  var metallicRoughnessTexCoord;\n  var occlusionTexCoord;\n  var emissiveTexCoord;\n\n  if (hasTexCoords) {\n    techniqueAttributes.a_texcoord_0 = {\n      semantic: "TEXCOORD_0",\n    };\n\n    v_texCoord = "v_texcoord_0";\n    vertexShader += "attribute vec2 a_texcoord_0;\\n";\n    vertexShader += "varying vec2 " + v_texCoord + ";\\n";\n    vertexShaderMain += "    " + v_texCoord + " = a_texcoord_0;\\n";\n\n    fragmentShader += "varying vec2 " + v_texCoord + ";\\n";\n\n    if (hasTexCoord1) {\n      techniqueAttributes.a_texcoord_1 = {\n        semantic: "TEXCOORD_1",\n      };\n\n      var v_texCoord1 = v_texCoord.replace("0", "1");\n      vertexShader += "attribute vec2 a_texcoord_1;\\n";\n      vertexShader += "varying vec2 " + v_texCoord1 + ";\\n";\n      vertexShaderMain += "    " + v_texCoord1 + " = a_texcoord_1;\\n";\n\n      fragmentShader += "varying vec2 " + v_texCoord1 + ";\\n";\n    }\n\n    var result = {\n      fragmentShaderMain: fragmentShaderMain,\n    };\n    normalTexCoord = addTextureCoordinates(\n      gltf,\n      "u_normalTexture",\n      generatedMaterialValues,\n      v_texCoord,\n      result\n    );\n    baseColorTexCoord = addTextureCoordinates(\n      gltf,\n      "u_baseColorTexture",\n      generatedMaterialValues,\n      v_texCoord,\n      result\n    );\n    specularGlossinessTexCoord = addTextureCoordinates(\n      gltf,\n      "u_specularGlossinessTexture",\n      generatedMaterialValues,\n      v_texCoord,\n      result\n    );\n    diffuseTexCoord = addTextureCoordinates(\n      gltf,\n      "u_diffuseTexture",\n      generatedMaterialValues,\n      v_texCoord,\n      result\n    );\n    metallicRoughnessTexCoord = addTextureCoordinates(\n      gltf,\n      "u_metallicRoughnessTexture",\n      generatedMaterialValues,\n      v_texCoord,\n      result\n    );\n    occlusionTexCoord = addTextureCoordinates(\n      gltf,\n      "u_occlusionTexture",\n      generatedMaterialValues,\n      v_texCoord,\n      result\n    );\n    emissiveTexCoord = addTextureCoordinates(\n      gltf,\n      "u_emissiveTexture",\n      generatedMaterialValues,\n      v_texCoord,\n      result\n    );\n\n    fragmentShaderMain = result.fragmentShaderMain;\n  }\n\n  // Add skinning information if available\n  if (hasSkinning) {\n    techniqueAttributes.a_joint = {\n      semantic: "JOINTS_0",\n    };\n    techniqueAttributes.a_weight = {\n      semantic: "WEIGHTS_0",\n    };\n\n    vertexShader += "attribute vec4 a_joint;\\n";\n    vertexShader += "attribute vec4 a_weight;\\n";\n  }\n\n  if (hasVertexColors) {\n    techniqueAttributes.a_vertexColor = {\n      semantic: "COLOR_0",\n    };\n    vertexShader += "attribute vec4 a_vertexColor;\\n";\n    vertexShader += "varying vec4 v_vertexColor;\\n";\n    vertexShaderMain += "  v_vertexColor = a_vertexColor;\\n";\n    fragmentShader += "varying vec4 v_vertexColor;\\n";\n  }\n\n  if (addBatchIdToGeneratedShaders) {\n    techniqueAttributes.a_batchId = {\n      semantic: "_BATCHID",\n    };\n    vertexShader += "attribute float a_batchId;\\n";\n  }\n\n  vertexShader += "void main(void) \\n{\\n";\n  vertexShader += vertexShaderMain;\n  vertexShader += "}\\n";\n\n  // Fragment shader lighting\n  if (hasNormals && !isUnlit) {\n    fragmentShader += "const float M_PI = 3.141592653589793;\\n";\n\n    fragmentShader +=\n      "vec3 lambertianDiffuse(vec3 diffuseColor) \\n" +\n      "{\\n" +\n      "    return diffuseColor / M_PI;\\n" +\n      "}\\n\\n";\n\n    fragmentShader +=\n      "vec3 fresnelSchlick2(vec3 f0, vec3 f90, float VdotH) \\n" +\n      "{\\n" +\n      "    return f0 + (f90 - f0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);\\n" +\n      "}\\n\\n";\n\n    fragmentShader +=\n      "vec3 fresnelSchlick(float metalness, float VdotH) \\n" +\n      "{\\n" +\n      "    return metalness + (vec3(1.0) - metalness) * pow(1.0 - VdotH, 5.0);\\n" +\n      "}\\n\\n";\n\n    fragmentShader +=\n      "float smithVisibilityG1(float NdotV, float roughness) \\n" +\n      "{\\n" +\n      "    float k = (roughness + 1.0) * (roughness + 1.0) / 8.0;\\n" +\n      "    return NdotV / (NdotV * (1.0 - k) + k);\\n" +\n      "}\\n\\n";\n\n    fragmentShader +=\n      "float smithVisibilityGGX(float roughness, float NdotL, float NdotV) \\n" +\n      "{\\n" +\n      "    return smithVisibilityG1(NdotL, roughness) * smithVisibilityG1(NdotV, roughness);\\n" +\n      "}\\n\\n";\n\n    fragmentShader +=\n      "float GGX(float roughness, float NdotH) \\n" +\n      "{\\n" +\n      "    float roughnessSquared = roughness * roughness;\\n" +\n      "    float f = (NdotH * roughnessSquared - NdotH) * NdotH + 1.0;\\n" +\n      "    return roughnessSquared / (M_PI * f * f);\\n" +\n      "}\\n\\n";\n  }\n\n  fragmentShader +=\n    "vec3 SRGBtoLINEAR3(vec3 srgbIn) \\n" +\n    "{\\n" +\n    "    return pow(srgbIn, vec3(2.2));\\n" +\n    "}\\n\\n";\n\n  fragmentShader +=\n    "vec4 SRGBtoLINEAR4(vec4 srgbIn) \\n" +\n    "{\\n" +\n    "    vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));\\n" +\n    "    return vec4(linearOut, srgbIn.a);\\n" +\n    "}\\n\\n";\n\n  fragmentShader +=\n    "vec3 applyTonemapping(vec3 linearIn) \\n" +\n    "{\\n" +\n    "#ifndef HDR \\n" +\n    "    return czm_acesTonemapping(linearIn);\\n" +\n    "#else \\n" +\n    "    return linearIn;\\n" +\n    "#endif \\n" +\n    "}\\n\\n";\n\n  fragmentShader +=\n    "vec3 LINEARtoSRGB(vec3 linearIn) \\n" +\n    "{\\n" +\n    "#ifndef HDR \\n" +\n    "    return pow(linearIn, vec3(1.0/2.2));\\n" +\n    "#else \\n" +\n    "    return linearIn;\\n" +\n    "#endif \\n" +\n    "}\\n\\n";\n\n  fragmentShader +=\n    "vec2 computeTexCoord(vec2 texCoords, vec2 offset, float rotation, vec2 scale) \\n" +\n    "{\\n" +\n    "    rotation = -rotation; \\n" +\n    "    mat3 transform = mat3(\\n" +\n    "        cos(rotation) * scale.x, sin(rotation) * scale.x, 0.0, \\n" +\n    "       -sin(rotation) * scale.y, cos(rotation) * scale.y, 0.0, \\n" +\n    "        offset.x, offset.y, 1.0); \\n" +\n    "    vec2 transformedTexCoords = (transform * vec3(fract(texCoords), 1.0)).xy; \\n" +\n    "    return transformedTexCoords; \\n" +\n    "}\\n\\n";\n\n  fragmentShader += "#ifdef USE_IBL_LIGHTING \\n";\n  fragmentShader += "uniform vec2 gltf_iblFactor; \\n";\n  fragmentShader += "#endif \\n";\n  fragmentShader += "#ifdef USE_CUSTOM_LIGHT_COLOR \\n";\n  fragmentShader += "uniform vec3 gltf_lightColor; \\n";\n  fragmentShader += "#endif \\n";\n\n  fragmentShader += "void main(void) \\n{\\n";\n  fragmentShader += fragmentShaderMain;\n\n  // Add normal mapping to fragment shader\n  if (hasNormals && !isUnlit) {\n    fragmentShader += "    vec3 ng = normalize(v_normal);\\n";\n    fragmentShader +=\n      "    vec3 positionWC = vec3(czm_inverseView * vec4(v_positionEC, 1.0));\\n";\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_normalTexture)) {\n      if (hasTangents) {\n        // Read tangents from varying\n        fragmentShader += "    vec3 t = normalize(v_tangent.xyz);\\n";\n        fragmentShader +=\n          "    vec3 b = normalize(cross(ng, t) * v_tangent.w);\\n";\n        fragmentShader += "    mat3 tbn = mat3(t, b, ng);\\n";\n        fragmentShader +=\n          "    vec3 n = texture2D(u_normalTexture, " +\n          normalTexCoord +\n          ").rgb;\\n";\n        fragmentShader += "    n = normalize(tbn * (2.0 * n - 1.0));\\n";\n      } else {\n        // Add standard derivatives extension\n        fragmentShader =\n          "#ifdef GL_OES_standard_derivatives\\n" +\n          "#extension GL_OES_standard_derivatives : enable\\n" +\n          "#endif\\n" +\n          fragmentShader;\n        // Compute tangents\n        fragmentShader += "#ifdef GL_OES_standard_derivatives\\n";\n        fragmentShader += "    vec3 pos_dx = dFdx(v_positionEC);\\n";\n        fragmentShader += "    vec3 pos_dy = dFdy(v_positionEC);\\n";\n        fragmentShader +=\n          "    vec3 tex_dx = dFdx(vec3(" + normalTexCoord + ",0.0));\\n";\n        fragmentShader +=\n          "    vec3 tex_dy = dFdy(vec3(" + normalTexCoord + ",0.0));\\n";\n        fragmentShader +=\n          "    vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\\n";\n        fragmentShader += "    t = normalize(t - ng * dot(ng, t));\\n";\n        fragmentShader += "    vec3 b = normalize(cross(ng, t));\\n";\n        fragmentShader += "    mat3 tbn = mat3(t, b, ng);\\n";\n        fragmentShader +=\n          "    vec3 n = texture2D(u_normalTexture, " +\n          normalTexCoord +\n          ").rgb;\\n";\n        fragmentShader += "    n = normalize(tbn * (2.0 * n - 1.0));\\n";\n        fragmentShader += "#else\\n";\n        fragmentShader += "    vec3 n = ng;\\n";\n        fragmentShader += "#endif\\n";\n      }\n    } else {\n      fragmentShader += "    vec3 n = ng;\\n";\n    }\n    if (material.doubleSided) {\n      fragmentShader += "    if (czm_backFacing())\\n";\n      fragmentShader += "    {\\n";\n      fragmentShader += "        n = -n;\\n";\n      fragmentShader += "    }\\n";\n    }\n  }\n\n  // Add base color to fragment shader\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_baseColorTexture)) {\n    fragmentShader +=\n      "    vec4 baseColorWithAlpha = SRGBtoLINEAR4(texture2D(u_baseColorTexture, " +\n      baseColorTexCoord +\n      "));\\n";\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_baseColorFactor)) {\n      fragmentShader += "    baseColorWithAlpha *= u_baseColorFactor;\\n";\n    }\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_baseColorFactor)) {\n    fragmentShader += "    vec4 baseColorWithAlpha = u_baseColorFactor;\\n";\n  } else {\n    fragmentShader += "    vec4 baseColorWithAlpha = vec4(1.0);\\n";\n  }\n\n  if (hasVertexColors) {\n    fragmentShader += "    baseColorWithAlpha *= v_vertexColor;\\n";\n  }\n\n  fragmentShader += "    vec3 baseColor = baseColorWithAlpha.rgb;\\n";\n\n  if (hasNormals && !isUnlit) {\n    if (useSpecGloss) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_specularGlossinessTexture)) {\n        fragmentShader +=\n          "    vec4 specularGlossiness = SRGBtoLINEAR4(texture2D(u_specularGlossinessTexture, " +\n          specularGlossinessTexCoord +\n          "));\\n";\n        fragmentShader += "    vec3 specular = specularGlossiness.rgb;\\n";\n        fragmentShader += "    float glossiness = specularGlossiness.a;\\n";\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_specularFactor)) {\n          fragmentShader += "    specular *= u_specularFactor;\\n";\n        }\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_glossinessFactor)) {\n          fragmentShader += "    glossiness *= u_glossinessFactor;\\n";\n        }\n      } else {\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_specularFactor)) {\n          fragmentShader +=\n            "    vec3 specular = clamp(u_specularFactor, vec3(0.0), vec3(1.0));\\n";\n        } else {\n          fragmentShader += "    vec3 specular = vec3(1.0);\\n";\n        }\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_glossinessFactor)) {\n          fragmentShader +=\n            "    float glossiness = clamp(u_glossinessFactor, 0.0, 1.0);\\n";\n        } else {\n          fragmentShader += "    float glossiness = 1.0;\\n";\n        }\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_diffuseTexture)) {\n        fragmentShader +=\n          "    vec4 diffuse = SRGBtoLINEAR4(texture2D(u_diffuseTexture, " +\n          diffuseTexCoord +\n          "));\\n";\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_diffuseFactor)) {\n          fragmentShader += "    diffuse *= u_diffuseFactor;\\n";\n        }\n      } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_diffuseFactor)) {\n        fragmentShader +=\n          "    vec4 diffuse = clamp(u_diffuseFactor, vec4(0.0), vec4(1.0));\\n";\n      } else {\n        fragmentShader += "    vec4 diffuse = vec4(1.0);\\n";\n      }\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_metallicRoughnessTexture)) {\n      fragmentShader +=\n        "    vec3 metallicRoughness = texture2D(u_metallicRoughnessTexture, " +\n        metallicRoughnessTexCoord +\n        ").rgb;\\n";\n      fragmentShader +=\n        "    float metalness = clamp(metallicRoughness.b, 0.0, 1.0);\\n";\n      fragmentShader +=\n        "    float roughness = clamp(metallicRoughness.g, 0.04, 1.0);\\n";\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_metallicFactor)) {\n        fragmentShader += "    metalness *= u_metallicFactor;\\n";\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_roughnessFactor)) {\n        fragmentShader += "    roughness *= u_roughnessFactor;\\n";\n      }\n    } else {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_metallicFactor)) {\n        fragmentShader +=\n          "    float metalness = clamp(u_metallicFactor, 0.0, 1.0);\\n";\n      } else {\n        fragmentShader += "    float metalness = 1.0;\\n";\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_roughnessFactor)) {\n        fragmentShader +=\n          "    float roughness = clamp(u_roughnessFactor, 0.04, 1.0);\\n";\n      } else {\n        fragmentShader += "    float roughness = 1.0;\\n";\n      }\n    }\n\n    fragmentShader += "    vec3 v = -normalize(v_positionEC);\\n";\n\n    // Generate fragment shader\'s lighting block\n    fragmentShader += "#ifndef USE_CUSTOM_LIGHT_COLOR \\n";\n    fragmentShader += "    vec3 lightColorHdr = czm_lightColorHdr;\\n";\n    fragmentShader += "#else \\n";\n    fragmentShader += "    vec3 lightColorHdr = gltf_lightColor;\\n";\n    fragmentShader += "#endif \\n";\n    fragmentShader += "    vec3 l = normalize(czm_lightDirectionEC);\\n";\n    fragmentShader += "    vec3 h = normalize(v + l);\\n";\n    fragmentShader += "    float NdotL = clamp(dot(n, l), 0.001, 1.0);\\n";\n    fragmentShader += "    float NdotV = abs(dot(n, v)) + 0.001;\\n";\n    fragmentShader += "    float NdotH = clamp(dot(n, h), 0.0, 1.0);\\n";\n    fragmentShader += "    float LdotH = clamp(dot(l, h), 0.0, 1.0);\\n";\n    fragmentShader += "    float VdotH = clamp(dot(v, h), 0.0, 1.0);\\n";\n    fragmentShader += "    vec3 f0 = vec3(0.04);\\n";\n    // Whether the material uses metallic-roughness or specular-glossiness changes how the BRDF inputs are computed.\n    // It does not change the implementation of the BRDF itself.\n    if (useSpecGloss) {\n      fragmentShader += "    float roughness = 1.0 - glossiness;\\n";\n      fragmentShader +=\n        "    vec3 diffuseColor = diffuse.rgb * (1.0 - max(max(specular.r, specular.g), specular.b));\\n";\n      fragmentShader += "    vec3 specularColor = specular;\\n";\n    } else {\n      fragmentShader +=\n        "    vec3 diffuseColor = baseColor * (1.0 - metalness) * (1.0 - f0);\\n";\n      fragmentShader +=\n        "    vec3 specularColor = mix(f0, baseColor, metalness);\\n";\n    }\n\n    fragmentShader += "    float alpha = roughness * roughness;\\n";\n    fragmentShader +=\n      "    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\\n";\n    fragmentShader +=\n      "    vec3 r90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));\\n";\n    fragmentShader += "    vec3 r0 = specularColor.rgb;\\n";\n\n    fragmentShader += "    vec3 F = fresnelSchlick2(r0, r90, VdotH);\\n";\n    fragmentShader +=\n      "    float G = smithVisibilityGGX(alpha, NdotL, NdotV);\\n";\n    fragmentShader += "    float D = GGX(alpha, NdotH);\\n";\n\n    fragmentShader +=\n      "    vec3 diffuseContribution = (1.0 - F) * lambertianDiffuse(diffuseColor);\\n";\n    fragmentShader +=\n      "    vec3 specularContribution = F * G * D / (4.0 * NdotL * NdotV);\\n";\n    fragmentShader +=\n      "    vec3 color = NdotL * lightColorHdr * (diffuseContribution + specularContribution);\\n";\n\n    // Use the procedural IBL if there are no environment maps\n    fragmentShader +=\n      "#if defined(USE_IBL_LIGHTING) && !defined(DIFFUSE_IBL) && !defined(SPECULAR_IBL) \\n";\n\n    fragmentShader +=\n      "    vec3 r = normalize(czm_inverseViewRotation * normalize(reflect(v, n)));\\n";\n    // Figure out if the reflection vector hits the ellipsoid\n    fragmentShader += "    float vertexRadius = length(positionWC);\\n";\n    fragmentShader +=\n      "    float horizonDotNadir = 1.0 - min(1.0, czm_ellipsoidRadii.x / vertexRadius);\\n";\n    fragmentShader +=\n      "    float reflectionDotNadir = dot(r, normalize(positionWC));\\n";\n    // Flipping the X vector is a cheap way to get the inverse of czm_temeToPseudoFixed, since that\'s a rotation about Z.\n    fragmentShader += "    r.x = -r.x;\\n";\n    fragmentShader += "    r = -normalize(czm_temeToPseudoFixed * r);\\n";\n    fragmentShader += "    r.x = -r.x;\\n";\n\n    fragmentShader += "    float inverseRoughness = 1.04 - roughness;\\n";\n    fragmentShader += "    inverseRoughness *= inverseRoughness;\\n";\n    fragmentShader +=\n      "    vec3 sceneSkyBox = textureCube(czm_environmentMap, r).rgb * inverseRoughness;\\n";\n\n    fragmentShader += "    float atmosphereHeight = 0.05;\\n";\n    fragmentShader +=\n      "    float blendRegionSize = 0.1 * ((1.0 - inverseRoughness) * 8.0 + 1.1 - horizonDotNadir);\\n";\n    fragmentShader += "    float blendRegionOffset = roughness * -1.0;\\n";\n    fragmentShader +=\n      "    float farAboveHorizon = clamp(horizonDotNadir - blendRegionSize * 0.5 + blendRegionOffset, 1.0e-10 - blendRegionSize, 0.99999);\\n";\n    fragmentShader +=\n      "    float aroundHorizon = clamp(horizonDotNadir + blendRegionSize * 0.5, 1.0e-10 - blendRegionSize, 0.99999);\\n";\n    fragmentShader +=\n      "    float farBelowHorizon = clamp(horizonDotNadir + blendRegionSize * 1.5, 1.0e-10 - blendRegionSize, 0.99999);\\n";\n    fragmentShader +=\n      "    float smoothstepHeight = smoothstep(0.0, atmosphereHeight, horizonDotNadir);\\n";\n\n    fragmentShader +=\n      "    vec3 belowHorizonColor = mix(vec3(0.1, 0.15, 0.25), vec3(0.4, 0.7, 0.9), smoothstepHeight);\\n";\n    fragmentShader += "    vec3 nadirColor = belowHorizonColor * 0.5;\\n";\n    fragmentShader +=\n      "    vec3 aboveHorizonColor = mix(vec3(0.9, 1.0, 1.2), belowHorizonColor, roughness * 0.5);\\n";\n    fragmentShader +=\n      "    vec3 blueSkyColor = mix(vec3(0.18, 0.26, 0.48), aboveHorizonColor, reflectionDotNadir * inverseRoughness * 0.5 + 0.75);\\n";\n    fragmentShader +=\n      "    vec3 zenithColor = mix(blueSkyColor, sceneSkyBox, smoothstepHeight);\\n";\n\n    fragmentShader += "    vec3 blueSkyDiffuseColor = vec3(0.7, 0.85, 0.9);\\n";\n    fragmentShader +=\n      "    float diffuseIrradianceFromEarth = (1.0 - horizonDotNadir) * (reflectionDotNadir * 0.25 + 0.75) * smoothstepHeight;\\n";\n    fragmentShader +=\n      "    float diffuseIrradianceFromSky = (1.0 - smoothstepHeight) * (1.0 - (reflectionDotNadir * 0.25 + 0.25));\\n";\n    fragmentShader +=\n      "    vec3 diffuseIrradiance = blueSkyDiffuseColor * clamp(diffuseIrradianceFromEarth + diffuseIrradianceFromSky, 0.0, 1.0);\\n";\n\n    fragmentShader +=\n      "    float notDistantRough = (1.0 - horizonDotNadir * roughness * 0.8);\\n";\n    fragmentShader +=\n      "    vec3 specularIrradiance = mix(zenithColor, aboveHorizonColor, smoothstep(farAboveHorizon, aroundHorizon, reflectionDotNadir) * notDistantRough);\\n";\n    fragmentShader +=\n      "    specularIrradiance = mix(specularIrradiance, belowHorizonColor, smoothstep(aroundHorizon, farBelowHorizon, reflectionDotNadir) * inverseRoughness);\\n";\n    fragmentShader +=\n      "    specularIrradiance = mix(specularIrradiance, nadirColor, smoothstep(farBelowHorizon, 1.0, reflectionDotNadir) * inverseRoughness);\\n";\n\n    // Luminance model from page 40 of http://silviojemma.com/public/papers/lighting/spherical-harmonic-lighting.pdf\n    fragmentShader += "#ifdef USE_SUN_LUMINANCE \\n";\n    // Angle between sun and zenith\n    fragmentShader +=\n      "    float LdotZenith = clamp(dot(normalize(czm_inverseViewRotation * l), normalize(positionWC * -1.0)), 0.001, 1.0);\\n";\n    fragmentShader += "    float S = acos(LdotZenith);\\n";\n    // Angle between zenith and current pixel\n    fragmentShader +=\n      "    float NdotZenith = clamp(dot(normalize(czm_inverseViewRotation * n), normalize(positionWC * -1.0)), 0.001, 1.0);\\n";\n    // Angle between sun and current pixel\n    fragmentShader += "    float gamma = acos(NdotL);\\n";\n    fragmentShader +=\n      "    float numerator = ((0.91 + 10.0 * exp(-3.0 * gamma) + 0.45 * pow(NdotL, 2.0)) * (1.0 - exp(-0.32 / NdotZenith)));\\n";\n    fragmentShader +=\n      "    float denominator = (0.91 + 10.0 * exp(-3.0 * S) + 0.45 * pow(LdotZenith,2.0)) * (1.0 - exp(-0.32));\\n";\n    fragmentShader +=\n      "    float luminance = gltf_luminanceAtZenith * (numerator / denominator);\\n";\n    fragmentShader += "#endif \\n";\n\n    fragmentShader +=\n      "    vec2 brdfLut = texture2D(czm_brdfLut, vec2(NdotV, roughness)).rg;\\n";\n    fragmentShader +=\n      "    vec3 IBLColor = (diffuseIrradiance * diffuseColor * gltf_iblFactor.x) + (specularIrradiance * SRGBtoLINEAR3(specularColor * brdfLut.x + brdfLut.y) * gltf_iblFactor.y);\\n";\n\n    fragmentShader +=\n      "    float maximumComponent = max(max(lightColorHdr.x, lightColorHdr.y), lightColorHdr.z);\\n";\n    fragmentShader +=\n      "    vec3 lightColor = lightColorHdr / max(maximumComponent, 1.0);\\n";\n    fragmentShader += "    IBLColor *= lightColor;\\n";\n\n    fragmentShader += "#ifdef USE_SUN_LUMINANCE \\n";\n    fragmentShader += "    color += IBLColor * luminance;\\n";\n    fragmentShader += "#else \\n";\n    fragmentShader += "    color += IBLColor; \\n";\n    fragmentShader += "#endif \\n";\n\n    // Environment maps were provided, use them for IBL\n    fragmentShader += "#elif defined(DIFFUSE_IBL) || defined(SPECULAR_IBL) \\n";\n    fragmentShader +=\n      "    const mat3 yUpToZUp = mat3(-1.0, 0.0, 0.0, 0.0, 0.0, -1.0, 0.0, 1.0, 0.0); \\n";\n    fragmentShader +=\n      "    vec3 cubeDir = normalize(yUpToZUp * gltf_iblReferenceFrameMatrix * normalize(reflect(-v, n))); \\n";\n\n    fragmentShader += "#ifdef DIFFUSE_IBL \\n";\n    fragmentShader += "#ifdef CUSTOM_SPHERICAL_HARMONICS \\n";\n    fragmentShader +=\n      "    vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, gltf_sphericalHarmonicCoefficients); \\n";\n    fragmentShader += "#else \\n";\n    fragmentShader +=\n      "    vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, czm_sphericalHarmonicCoefficients); \\n";\n    fragmentShader += "#endif \\n";\n    fragmentShader += "#else \\n";\n    fragmentShader += "    vec3 diffuseIrradiance = vec3(0.0); \\n";\n    fragmentShader += "#endif \\n";\n\n    fragmentShader += "#ifdef SPECULAR_IBL \\n";\n    fragmentShader +=\n      "    vec2 brdfLut = texture2D(czm_brdfLut, vec2(NdotV, roughness)).rg;\\n";\n    fragmentShader += "#ifdef CUSTOM_SPECULAR_IBL \\n";\n    fragmentShader +=\n      "    vec3 specularIBL = czm_sampleOctahedralProjection(gltf_specularMap, gltf_specularMapSize, cubeDir,  roughness * gltf_maxSpecularLOD, gltf_maxSpecularLOD);\\n";\n    fragmentShader += "#else \\n";\n    fragmentShader +=\n      "    vec3 specularIBL = czm_sampleOctahedralProjection(czm_specularEnvironmentMaps, czm_specularEnvironmentMapSize, cubeDir,  roughness * czm_specularEnvironmentMapsMaximumLOD, czm_specularEnvironmentMapsMaximumLOD);\\n";\n    fragmentShader += "#endif \\n";\n    fragmentShader += "    specularIBL *= F * brdfLut.x + brdfLut.y;\\n";\n    fragmentShader += "#else \\n";\n    fragmentShader += "    vec3 specularIBL = vec3(0.0); \\n";\n    fragmentShader += "#endif \\n";\n\n    fragmentShader +=\n      "    color += diffuseIrradiance * diffuseColor + specularColor * specularIBL;\\n";\n\n    fragmentShader += "#endif \\n";\n  } else {\n    fragmentShader += "    vec3 color = baseColor;\\n";\n  }\n\n  // Ignore occlusion and emissive when unlit\n  if (!isUnlit) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_occlusionTexture)) {\n      fragmentShader +=\n        "    color *= texture2D(u_occlusionTexture, " +\n        occlusionTexCoord +\n        ").r;\\n";\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_emissiveTexture)) {\n      fragmentShader +=\n        "    vec3 emissive = SRGBtoLINEAR3(texture2D(u_emissiveTexture, " +\n        emissiveTexCoord +\n        ").rgb);\\n";\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_emissiveFactor)) {\n        fragmentShader += "    emissive *= u_emissiveFactor;\\n";\n      }\n      fragmentShader += "    color += emissive;\\n";\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(generatedMaterialValues.u_emissiveFactor)) {\n      fragmentShader += "    color += u_emissiveFactor;\\n";\n    }\n  }\n\n  if (!isUnlit) {\n    fragmentShader += "    color = applyTonemapping(color);\\n";\n  }\n\n  fragmentShader += "    color = LINEARtoSRGB(color);\\n";\n\n  if (hasOutline) {\n    fragmentShader += "    float outlineness = max(\\n";\n    fragmentShader +=\n      "        texture2D(u_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r,\\n";\n    fragmentShader += "        max(\\n";\n    fragmentShader +=\n      "          texture2D(u_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r,\\n";\n    fragmentShader +=\n      "          texture2D(u_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r));\\n";\n    fragmentShader +=\n      "    color = mix(color, vec3(0.0, 0.0, 0.0), outlineness);\\n";\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(alphaMode)) {\n    if (alphaMode === "MASK") {\n      fragmentShader += "    if (baseColorWithAlpha.a < u_alphaCutoff) {\\n";\n      fragmentShader += "        discard;\\n";\n      fragmentShader += "    }\\n";\n      fragmentShader += "    gl_FragColor = vec4(color, 1.0);\\n";\n    } else if (alphaMode === "BLEND") {\n      fragmentShader +=\n        "    gl_FragColor = vec4(color, baseColorWithAlpha.a);\\n";\n    } else {\n      fragmentShader += "    gl_FragColor = vec4(color, 1.0);\\n";\n    }\n  } else {\n    fragmentShader += "    gl_FragColor = vec4(color, 1.0);\\n";\n  }\n\n  fragmentShader += "}\\n";\n\n  // Add shaders\n  var vertexShaderId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(shaders, {\n    type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].VERTEX_SHADER */ .Z.VERTEX_SHADER,\n    extras: {\n      _pipeline: {\n        source: vertexShader,\n        extension: ".glsl",\n      },\n    },\n  });\n\n  var fragmentShaderId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(shaders, {\n    type: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FRAGMENT_SHADER */ .Z.FRAGMENT_SHADER,\n    extras: {\n      _pipeline: {\n        source: fragmentShader,\n        extension: ".glsl",\n      },\n    },\n  });\n\n  // Add program\n  var programId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(programs, {\n    fragmentShader: fragmentShaderId,\n    vertexShader: vertexShaderId,\n  });\n\n  var techniqueId = (0,_GltfPipeline_addToArray_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(techniques, {\n    attributes: techniqueAttributes,\n    program: programId,\n    uniforms: techniqueUniforms,\n  });\n\n  return techniqueId;\n}\n\nfunction getPBRValueType(paramName) {\n  if (paramName.indexOf("Offset") !== -1) {\n    return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC2 */ .Z.FLOAT_VEC2;\n  } else if (paramName.indexOf("Rotation") !== -1) {\n    return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT;\n  } else if (paramName.indexOf("Scale") !== -1) {\n    return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC2 */ .Z.FLOAT_VEC2;\n  } else if (paramName.indexOf("Texture") !== -1) {\n    return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SAMPLER_2D */ .Z.SAMPLER_2D;\n  }\n\n  switch (paramName) {\n    case "u_baseColorFactor":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC4 */ .Z.FLOAT_VEC4;\n    case "u_metallicFactor":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT;\n    case "u_roughnessFactor":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT;\n    case "u_emissiveFactor":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3;\n    // Specular Glossiness Types\n    case "u_diffuseFactor":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC4 */ .Z.FLOAT_VEC4;\n    case "u_specularFactor":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT_VEC3 */ .Z.FLOAT_VEC3;\n    case "u_glossinessFactor":\n      return _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].FLOAT */ .Z.FLOAT;\n  }\n}\n/* harmony default export */ __webpack_exports__["Z"] = (processPbrMaterials);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtBQUNOO0FBQ0EsOERBQThEO0FBQzlELE1BQU07QUFDTiw2REFBNkQ7QUFDN0Q7QUFDQSxJQUFJO0FBQ0osMkRBQTJEO0FBQzNEOztBQUVBLHNCQUFzQjs7QUFFdEI7QUFDQSx1QkFBdUIsZ0ZBQVU7QUFDakMsVUFBVSxvR0FBNEI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7O0FBRUgseUJBQXlCLGdGQUFVO0FBQ25DLFVBQVUsd0dBQThCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0Esa0JBQWtCLGdGQUFVO0FBQzVCO0FBQ0E7QUFDQSxHQUFHOztBQUVILG9CQUFvQixnRkFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsOEZBQXlCO0FBQ3BDLElBQUk7QUFDSixXQUFXLG9GQUFvQjtBQUMvQixJQUFJO0FBQ0osV0FBVyw4RkFBeUI7QUFDcEMsSUFBSTtBQUNKLFdBQVcsOEZBQXlCO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQSxhQUFhLDhGQUF5QjtBQUN0QztBQUNBLGFBQWEsb0ZBQW9CO0FBQ2pDO0FBQ0EsYUFBYSxvRkFBb0I7QUFDakM7QUFDQSxhQUFhLDhGQUF5QjtBQUN0QztBQUNBO0FBQ0EsYUFBYSw4RkFBeUI7QUFDdEM7QUFDQSxhQUFhLDhGQUF5QjtBQUN0QztBQUNBLGFBQWEsb0ZBQW9CO0FBQ2pDO0FBQ0E7QUFDQSx5REFBZSxtQkFBbUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9wcm9jZXNzUGJyTWF0ZXJpYWxzLmpzPzJkZjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBXZWJHTENvbnN0YW50cyBmcm9tIFwiLi4vQ29yZS9XZWJHTENvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHdlYkdMQ29uc3RhbnRUb0dsc2xUeXBlIGZyb20gXCIuLi9Db3JlL3dlYkdMQ29uc3RhbnRUb0dsc2xUeXBlLmpzXCI7XG5pbXBvcnQgYWRkVG9BcnJheSBmcm9tIFwiLi9HbHRmUGlwZWxpbmUvYWRkVG9BcnJheS5qc1wiO1xuaW1wb3J0IEZvckVhY2ggZnJvbSBcIi4vR2x0ZlBpcGVsaW5lL0ZvckVhY2guanNcIjtcbmltcG9ydCB1c2VzRXh0ZW5zaW9uIGZyb20gXCIuL0dsdGZQaXBlbGluZS91c2VzRXh0ZW5zaW9uLmpzXCI7XG5pbXBvcnQgTW9kZWxVdGlsaXR5IGZyb20gXCIuL01vZGVsVXRpbGl0eS5qc1wiO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NQYnJNYXRlcmlhbHMoZ2x0Ziwgb3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vIE5vIG5lZWQgdG8gY3JlYXRlIG5ldyB0ZWNobmlxdWVzIGlmIHRoZXkgYWxyZWFkeSBleGlzdCxcbiAgLy8gdGhlIHNoYWRlciBzaG91bGQgaGFuZGxlIHRoZXNlIHZhbHVlc1xuICBpZiAodXNlc0V4dGVuc2lvbihnbHRmLCBcIktIUl90ZWNobmlxdWVzX3dlYmdsXCIpKSB7XG4gICAgcmV0dXJuIGdsdGY7XG4gIH1cblxuICAvLyBBbGwgbWF0ZXJpYWxzIGluIGdsVEYgYXJlIFBCUiBieSBkZWZhdWx0LFxuICAvLyBzbyB3ZSBzaG91bGQgYXBwbHkgUEJSIHVubGVzcyBubyBtYXRlcmlhbHMgYXJlIGZvdW5kLlxuICBpZiAoIWRlZmluZWQoZ2x0Zi5tYXRlcmlhbHMpIHx8IGdsdGYubWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBnbHRmO1xuICB9XG5cbiAgaWYgKCFkZWZpbmVkKGdsdGYuZXh0ZW5zaW9ucykpIHtcbiAgICBnbHRmLmV4dGVuc2lvbnMgPSB7fTtcbiAgfVxuXG4gIGlmICghZGVmaW5lZChnbHRmLmV4dGVuc2lvbnNVc2VkKSkge1xuICAgIGdsdGYuZXh0ZW5zaW9uc1VzZWQgPSBbXTtcbiAgfVxuXG4gIGlmICghZGVmaW5lZChnbHRmLmV4dGVuc2lvbnNSZXF1aXJlZCkpIHtcbiAgICBnbHRmLmV4dGVuc2lvbnNSZXF1aXJlZCA9IFtdO1xuICB9XG5cbiAgZ2x0Zi5leHRlbnNpb25zLktIUl90ZWNobmlxdWVzX3dlYmdsID0ge1xuICAgIHByb2dyYW1zOiBbXSxcbiAgICBzaGFkZXJzOiBbXSxcbiAgICB0ZWNobmlxdWVzOiBbXSxcbiAgfTtcblxuICBnbHRmLmV4dGVuc2lvbnNVc2VkLnB1c2goXCJLSFJfdGVjaG5pcXVlc193ZWJnbFwiKTtcbiAgZ2x0Zi5leHRlbnNpb25zUmVxdWlyZWQucHVzaChcIktIUl90ZWNobmlxdWVzX3dlYmdsXCIpO1xuXG4gIHZhciBwcmltaXRpdmVCeU1hdGVyaWFsID0gTW9kZWxVdGlsaXR5LnNwbGl0SW5jb21wYXRpYmxlTWF0ZXJpYWxzKGdsdGYpO1xuXG4gIEZvckVhY2gubWF0ZXJpYWwoZ2x0ZiwgZnVuY3Rpb24gKG1hdGVyaWFsLCBtYXRlcmlhbEluZGV4KSB7XG4gICAgdmFyIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzID0ge307XG4gICAgdmFyIHRlY2huaXF1ZSA9IGdlbmVyYXRlVGVjaG5pcXVlKFxuICAgICAgZ2x0ZixcbiAgICAgIG1hdGVyaWFsLFxuICAgICAgbWF0ZXJpYWxJbmRleCxcbiAgICAgIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLFxuICAgICAgcHJpbWl0aXZlQnlNYXRlcmlhbCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuXG4gICAgaWYgKCFkZWZpbmVkKG1hdGVyaWFsLmV4dGVuc2lvbnMpKSB7XG4gICAgICBtYXRlcmlhbC5leHRlbnNpb25zID0ge307XG4gICAgfVxuXG4gICAgbWF0ZXJpYWwuZXh0ZW5zaW9ucy5LSFJfdGVjaG5pcXVlc193ZWJnbCA9IHtcbiAgICAgIHZhbHVlczogZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMsXG4gICAgICB0ZWNobmlxdWU6IHRlY2huaXF1ZSxcbiAgICB9O1xuICB9KTtcblxuICAvLyBJZiBhbnkgcHJpbWl0aXZlcyBoYXZlIHNlbWFudGljcyB0aGF0IGFyZW4ndCBkZWNsYXJlZCBpbiB0aGUgZ2VuZXJhdGVkXG4gIC8vIHNoYWRlcnMsIHdlIHdhbnQgdG8gcHJlc2VydmUgdGhlbS5cbiAgTW9kZWxVdGlsaXR5LmVuc3VyZVNlbWFudGljRXhpc3RlbmNlKGdsdGYpO1xuXG4gIHJldHVybiBnbHRmO1xufVxuXG5mdW5jdGlvbiBpc1NwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsKG1hdGVyaWFsKSB7XG4gIHJldHVybiAoXG4gICAgZGVmaW5lZChtYXRlcmlhbC5leHRlbnNpb25zKSAmJlxuICAgIGRlZmluZWQobWF0ZXJpYWwuZXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcylcbiAgKTtcbn1cblxuZnVuY3Rpb24gYWRkVGV4dHVyZUNvb3JkaW5hdGVzKFxuICBnbHRmLFxuICB0ZXh0dXJlTmFtZSxcbiAgZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMsXG4gIGRlZmF1bHRUZXhDb29yZCxcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIHRleENvb3JkO1xuICB2YXIgdGV4SW5mbyA9IGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzW3RleHR1cmVOYW1lXTtcbiAgaWYgKGRlZmluZWQodGV4SW5mbykgJiYgZGVmaW5lZCh0ZXhJbmZvLnRleENvb3JkKSAmJiB0ZXhJbmZvLnRleENvb3JkID09PSAxKSB7XG4gICAgZGVmYXVsdFRleENvb3JkID0gZGVmYXVsdFRleENvb3JkLnJlcGxhY2UoXCIwXCIsIFwiMVwiKTtcbiAgfVxuICBpZiAoZGVmaW5lZChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlc1t0ZXh0dXJlTmFtZSArIFwiT2Zmc2V0XCJdKSkge1xuICAgIHRleENvb3JkID0gdGV4dHVyZU5hbWUgKyBcIkNvb3JkXCI7XG4gICAgcmVzdWx0LmZyYWdtZW50U2hhZGVyTWFpbiArPVxuICAgICAgXCIgICAgdmVjMiBcIiArXG4gICAgICB0ZXhDb29yZCArXG4gICAgICBcIiA9IGNvbXB1dGVUZXhDb29yZChcIiArXG4gICAgICBkZWZhdWx0VGV4Q29vcmQgK1xuICAgICAgXCIsIFwiICtcbiAgICAgIHRleHR1cmVOYW1lICtcbiAgICAgIFwiT2Zmc2V0LCBcIiArXG4gICAgICB0ZXh0dXJlTmFtZSArXG4gICAgICBcIlJvdGF0aW9uLCBcIiArXG4gICAgICB0ZXh0dXJlTmFtZSArXG4gICAgICBcIlNjYWxlKTtcXG5cIjtcbiAgfSBlbHNlIHtcbiAgICB0ZXhDb29yZCA9IGRlZmF1bHRUZXhDb29yZDtcbiAgfVxuICByZXR1cm4gdGV4Q29vcmQ7XG59XG5cbnZhciBERUZBVUxUX1RFWFRVUkVfT0ZGU0VUID0gWzAuMCwgMC4wXTtcbnZhciBERUZBVUxUX1RFWFRVUkVfUk9UQVRJT04gPSBbMC4wXTtcbnZhciBERUZBVUxUX1RFWFRVUkVfU0NBTEUgPSBbMS4wLCAxLjBdO1xuXG5mdW5jdGlvbiBoYW5kbGVLSFJUZXh0dXJlVHJhbnNmb3JtKFxuICBwYXJhbWV0ZXJOYW1lLFxuICB2YWx1ZSxcbiAgZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXNcbikge1xuICBpZiAoXG4gICAgcGFyYW1ldGVyTmFtZS5pbmRleE9mKFwiVGV4dHVyZVwiKSA9PT0gLTEgfHxcbiAgICAhZGVmaW5lZCh2YWx1ZS5leHRlbnNpb25zKSB8fFxuICAgICFkZWZpbmVkKHZhbHVlLmV4dGVuc2lvbnMuS0hSX3RleHR1cmVfdHJhbnNmb3JtKVxuICApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdW5pZm9ybU5hbWUgPSBcInVfXCIgKyBwYXJhbWV0ZXJOYW1lO1xuICB2YXIgZXh0ZW5zaW9uID0gdmFsdWUuZXh0ZW5zaW9ucy5LSFJfdGV4dHVyZV90cmFuc2Zvcm07XG4gIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzW3VuaWZvcm1OYW1lICsgXCJPZmZzZXRcIl0gPSBkZWZhdWx0VmFsdWUoXG4gICAgZXh0ZW5zaW9uLm9mZnNldCxcbiAgICBERUZBVUxUX1RFWFRVUkVfT0ZGU0VUXG4gICk7XG4gIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzW3VuaWZvcm1OYW1lICsgXCJSb3RhdGlvblwiXSA9IGRlZmF1bHRWYWx1ZShcbiAgICBleHRlbnNpb24ucm90YXRpb24sXG4gICAgREVGQVVMVF9URVhUVVJFX1JPVEFUSU9OXG4gICk7XG4gIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzW3VuaWZvcm1OYW1lICsgXCJTY2FsZVwiXSA9IGRlZmF1bHRWYWx1ZShcbiAgICBleHRlbnNpb24uc2NhbGUsXG4gICAgREVGQVVMVF9URVhUVVJFX1NDQUxFXG4gICk7XG5cbiAgaWYgKGRlZmluZWQodmFsdWUudGV4Q29vcmQpICYmIGRlZmluZWQoZXh0ZW5zaW9uLnRleENvb3JkKSkge1xuICAgIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzW3VuaWZvcm1OYW1lXS50ZXhDb29yZCA9IGV4dGVuc2lvbi50ZXhDb29yZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVRlY2huaXF1ZShcbiAgZ2x0ZixcbiAgbWF0ZXJpYWwsXG4gIG1hdGVyaWFsSW5kZXgsXG4gIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLFxuICBwcmltaXRpdmVCeU1hdGVyaWFsLFxuICBvcHRpb25zXG4pIHtcbiAgdmFyIGFkZEJhdGNoSWRUb0dlbmVyYXRlZFNoYWRlcnMgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5hZGRCYXRjaElkVG9HZW5lcmF0ZWRTaGFkZXJzLFxuICAgIGZhbHNlXG4gICk7XG5cbiAgdmFyIHRlY2huaXF1ZXNXZWJnbCA9IGdsdGYuZXh0ZW5zaW9ucy5LSFJfdGVjaG5pcXVlc193ZWJnbDtcbiAgdmFyIHRlY2huaXF1ZXMgPSB0ZWNobmlxdWVzV2ViZ2wudGVjaG5pcXVlcztcbiAgdmFyIHNoYWRlcnMgPSB0ZWNobmlxdWVzV2ViZ2wuc2hhZGVycztcbiAgdmFyIHByb2dyYW1zID0gdGVjaG5pcXVlc1dlYmdsLnByb2dyYW1zO1xuXG4gIHZhciB1c2VTcGVjR2xvc3MgPSBpc1NwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsKG1hdGVyaWFsKTtcblxuICB2YXIgdW5pZm9ybU5hbWU7XG4gIHZhciBwYXJhbWV0ZXJOYW1lO1xuICB2YXIgdmFsdWU7XG4gIHZhciBwYnJNZXRhbGxpY1JvdWdobmVzcyA9IG1hdGVyaWFsLnBick1ldGFsbGljUm91Z2huZXNzO1xuICBpZiAoZGVmaW5lZChwYnJNZXRhbGxpY1JvdWdobmVzcykgJiYgIXVzZVNwZWNHbG9zcykge1xuICAgIGZvciAocGFyYW1ldGVyTmFtZSBpbiBwYnJNZXRhbGxpY1JvdWdobmVzcykge1xuICAgICAgaWYgKHBick1ldGFsbGljUm91Z2huZXNzLmhhc093blByb3BlcnR5KHBhcmFtZXRlck5hbWUpKSB7XG4gICAgICAgIHZhbHVlID0gcGJyTWV0YWxsaWNSb3VnaG5lc3NbcGFyYW1ldGVyTmFtZV07XG4gICAgICAgIHVuaWZvcm1OYW1lID0gXCJ1X1wiICsgcGFyYW1ldGVyTmFtZTtcbiAgICAgICAgZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXNbdW5pZm9ybU5hbWVdID0gdmFsdWU7XG4gICAgICAgIGhhbmRsZUtIUlRleHR1cmVUcmFuc2Zvcm0oXG4gICAgICAgICAgcGFyYW1ldGVyTmFtZSxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlc1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICh1c2VTcGVjR2xvc3MpIHtcbiAgICB2YXIgcGJyU3BlY3VsYXJHbG9zc2luZXNzID1cbiAgICAgIG1hdGVyaWFsLmV4dGVuc2lvbnMuS0hSX21hdGVyaWFsc19wYnJTcGVjdWxhckdsb3NzaW5lc3M7XG4gICAgZm9yIChwYXJhbWV0ZXJOYW1lIGluIHBiclNwZWN1bGFyR2xvc3NpbmVzcykge1xuICAgICAgaWYgKHBiclNwZWN1bGFyR2xvc3NpbmVzcy5oYXNPd25Qcm9wZXJ0eShwYXJhbWV0ZXJOYW1lKSkge1xuICAgICAgICB2YWx1ZSA9IHBiclNwZWN1bGFyR2xvc3NpbmVzc1twYXJhbWV0ZXJOYW1lXTtcbiAgICAgICAgdW5pZm9ybU5hbWUgPSBcInVfXCIgKyBwYXJhbWV0ZXJOYW1lO1xuICAgICAgICBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlc1t1bmlmb3JtTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgaGFuZGxlS0hSVGV4dHVyZVRyYW5zZm9ybShcbiAgICAgICAgICBwYXJhbWV0ZXJOYW1lLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgYWRkaXRpb25hbCBpbiBtYXRlcmlhbCkge1xuICAgIGlmIChcbiAgICAgIG1hdGVyaWFsLmhhc093blByb3BlcnR5KGFkZGl0aW9uYWwpICYmXG4gICAgICAoYWRkaXRpb25hbC5pbmRleE9mKFwiVGV4dHVyZVwiKSA+PSAwIHx8IGFkZGl0aW9uYWwuaW5kZXhPZihcIkZhY3RvclwiKSA+PSAwKVxuICAgICkge1xuICAgICAgdmFsdWUgPSBtYXRlcmlhbFthZGRpdGlvbmFsXTtcbiAgICAgIHVuaWZvcm1OYW1lID0gXCJ1X1wiICsgYWRkaXRpb25hbDtcbiAgICAgIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzW3VuaWZvcm1OYW1lXSA9IHZhbHVlO1xuICAgICAgaGFuZGxlS0hSVGV4dHVyZVRyYW5zZm9ybShhZGRpdGlvbmFsLCB2YWx1ZSwgZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciB2ZXJ0ZXhTaGFkZXIgPSBcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG5cIjtcbiAgdmFyIGZyYWdtZW50U2hhZGVyID0gXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuXCI7XG5cbiAgdmFyIHNraW47XG4gIGlmIChkZWZpbmVkKGdsdGYuc2tpbnMpKSB7XG4gICAgc2tpbiA9IGdsdGYuc2tpbnNbMF07XG4gIH1cbiAgdmFyIGpvaW50cyA9IGRlZmluZWQoc2tpbikgPyBza2luLmpvaW50cyA6IFtdO1xuICB2YXIgam9pbnRDb3VudCA9IGpvaW50cy5sZW5ndGg7XG5cbiAgdmFyIHByaW1pdGl2ZUluZm8gPSBwcmltaXRpdmVCeU1hdGVyaWFsW21hdGVyaWFsSW5kZXhdO1xuXG4gIHZhciBza2lubmluZ0luZm87XG4gIHZhciBoYXNTa2lubmluZyA9IGZhbHNlO1xuICB2YXIgaGFzVmVydGV4Q29sb3JzID0gZmFsc2U7XG4gIHZhciBoYXNNb3JwaFRhcmdldHMgPSBmYWxzZTtcbiAgdmFyIGhhc05vcm1hbHMgPSBmYWxzZTtcbiAgdmFyIGhhc1RhbmdlbnRzID0gZmFsc2U7XG4gIHZhciBoYXNUZXhDb29yZHMgPSBmYWxzZTtcbiAgdmFyIGhhc1RleENvb3JkMSA9IGZhbHNlO1xuICB2YXIgaGFzT3V0bGluZSA9IGZhbHNlO1xuICB2YXIgaXNVbmxpdCA9IGZhbHNlO1xuXG4gIGlmIChkZWZpbmVkKHByaW1pdGl2ZUluZm8pKSB7XG4gICAgc2tpbm5pbmdJbmZvID0gcHJpbWl0aXZlSW5mby5za2lubmluZztcbiAgICBoYXNTa2lubmluZyA9IHNraW5uaW5nSW5mby5za2lubmVkICYmIGpvaW50cy5sZW5ndGggPiAwO1xuICAgIGhhc1ZlcnRleENvbG9ycyA9IHByaW1pdGl2ZUluZm8uaGFzVmVydGV4Q29sb3JzO1xuICAgIGhhc01vcnBoVGFyZ2V0cyA9IHByaW1pdGl2ZUluZm8uaGFzTW9ycGhUYXJnZXRzO1xuICAgIGhhc05vcm1hbHMgPSBwcmltaXRpdmVJbmZvLmhhc05vcm1hbHM7XG4gICAgaGFzVGFuZ2VudHMgPSBwcmltaXRpdmVJbmZvLmhhc1RhbmdlbnRzO1xuICAgIGhhc1RleENvb3JkcyA9IHByaW1pdGl2ZUluZm8uaGFzVGV4Q29vcmRzO1xuICAgIGhhc1RleENvb3JkMSA9IHByaW1pdGl2ZUluZm8uaGFzVGV4Q29vcmQxO1xuICAgIGhhc091dGxpbmUgPSBwcmltaXRpdmVJbmZvLmhhc091dGxpbmU7XG4gIH1cblxuICB2YXIgbW9ycGhUYXJnZXRzO1xuICBpZiAoaGFzTW9ycGhUYXJnZXRzKSB7XG4gICAgRm9yRWFjaC5tZXNoKGdsdGYsIGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgICBpZiAocHJpbWl0aXZlLm1hdGVyaWFsID09PSBtYXRlcmlhbEluZGV4KSB7XG4gICAgICAgICAgdmFyIHRhcmdldHMgPSBwcmltaXRpdmUudGFyZ2V0cztcbiAgICAgICAgICBpZiAoZGVmaW5lZCh0YXJnZXRzKSkge1xuICAgICAgICAgICAgbW9ycGhUYXJnZXRzID0gdGFyZ2V0cztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQWRkIHRlY2huaXF1ZXNcbiAgdmFyIHRlY2huaXF1ZVVuaWZvcm1zID0ge1xuICAgIC8vIEFkZCBtYXRyaWNlc1xuICAgIHVfbW9kZWxWaWV3TWF0cml4OiB7XG4gICAgICBzZW1hbnRpYzogdXNlc0V4dGVuc2lvbihnbHRmLCBcIkNFU0lVTV9SVENcIilcbiAgICAgICAgPyBcIkNFU0lVTV9SVENfTU9ERUxWSUVXXCJcbiAgICAgICAgOiBcIk1PREVMVklFV1wiLFxuICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVRfTUFUNCxcbiAgICB9LFxuICAgIHVfcHJvamVjdGlvbk1hdHJpeDoge1xuICAgICAgc2VtYW50aWM6IFwiUFJPSkVDVElPTlwiLFxuICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVRfTUFUNCxcbiAgICB9LFxuICB9O1xuXG4gIGlmIChcbiAgICBkZWZpbmVkKG1hdGVyaWFsLmV4dGVuc2lvbnMpICYmXG4gICAgZGVmaW5lZChtYXRlcmlhbC5leHRlbnNpb25zLktIUl9tYXRlcmlhbHNfdW5saXQpXG4gICkge1xuICAgIGlzVW5saXQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGhhc05vcm1hbHMpIHtcbiAgICB0ZWNobmlxdWVVbmlmb3Jtcy51X25vcm1hbE1hdHJpeCA9IHtcbiAgICAgIHNlbWFudGljOiBcIk1PREVMVklFV0lOVkVSU0VUUkFOU1BPU0VcIixcbiAgICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZMT0FUX01BVDMsXG4gICAgfTtcbiAgfVxuXG4gIGlmIChoYXNTa2lubmluZykge1xuICAgIHRlY2huaXF1ZVVuaWZvcm1zLnVfam9pbnRNYXRyaXggPSB7XG4gICAgICBjb3VudDogam9pbnRDb3VudCxcbiAgICAgIHNlbWFudGljOiBcIkpPSU5UTUFUUklYXCIsXG4gICAgICB0eXBlOiBXZWJHTENvbnN0YW50cy5GTE9BVF9NQVQ0LFxuICAgIH07XG4gIH1cblxuICBpZiAoaGFzTW9ycGhUYXJnZXRzKSB7XG4gICAgdGVjaG5pcXVlVW5pZm9ybXMudV9tb3JwaFdlaWdodHMgPSB7XG4gICAgICBjb3VudDogbW9ycGhUYXJnZXRzLmxlbmd0aCxcbiAgICAgIHNlbWFudGljOiBcIk1PUlBIV0VJR0hUU1wiLFxuICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVQsXG4gICAgfTtcbiAgfVxuXG4gIHZhciBhbHBoYU1vZGUgPSBtYXRlcmlhbC5hbHBoYU1vZGU7XG4gIGlmIChkZWZpbmVkKGFscGhhTW9kZSkgJiYgYWxwaGFNb2RlID09PSBcIk1BU0tcIikge1xuICAgIHRlY2huaXF1ZVVuaWZvcm1zLnVfYWxwaGFDdXRvZmYgPSB7XG4gICAgICBzZW1hbnRpYzogXCJBTFBIQUNVVE9GRlwiLFxuICAgICAgdHlwZTogV2ViR0xDb25zdGFudHMuRkxPQVQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIEFkZCBtYXRlcmlhbCB2YWx1ZXNcbiAgZm9yICh1bmlmb3JtTmFtZSBpbiBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcykge1xuICAgIGlmIChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh1bmlmb3JtTmFtZSkpIHtcbiAgICAgIHRlY2huaXF1ZVVuaWZvcm1zW3VuaWZvcm1OYW1lXSA9IHtcbiAgICAgICAgdHlwZTogZ2V0UEJSVmFsdWVUeXBlKHVuaWZvcm1OYW1lKSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIGJhc2VDb2xvclVuaWZvcm0gPSBkZWZhdWx0VmFsdWUoXG4gICAgdGVjaG5pcXVlVW5pZm9ybXMudV9iYXNlQ29sb3JUZXh0dXJlLFxuICAgIHRlY2huaXF1ZVVuaWZvcm1zLnVfYmFzZUNvbG9yRmFjdG9yXG4gICk7XG4gIGlmIChkZWZpbmVkKGJhc2VDb2xvclVuaWZvcm0pKSB7XG4gICAgYmFzZUNvbG9yVW5pZm9ybS5zZW1hbnRpYyA9IFwiXzNEVElMRVNESUZGVVNFXCI7XG4gIH1cblxuICAvLyBBZGQgdW5pZm9ybXMgdG8gc2hhZGVyc1xuICBmb3IgKHVuaWZvcm1OYW1lIGluIHRlY2huaXF1ZVVuaWZvcm1zKSB7XG4gICAgaWYgKHRlY2huaXF1ZVVuaWZvcm1zLmhhc093blByb3BlcnR5KHVuaWZvcm1OYW1lKSkge1xuICAgICAgdmFyIHVuaWZvcm0gPSB0ZWNobmlxdWVVbmlmb3Jtc1t1bmlmb3JtTmFtZV07XG4gICAgICB2YXIgYXJyYXlTaXplID0gZGVmaW5lZCh1bmlmb3JtLmNvdW50KSA/IFwiW1wiICsgdW5pZm9ybS5jb3VudCArIFwiXVwiIDogXCJcIjtcbiAgICAgIGlmIChcbiAgICAgICAgKHVuaWZvcm0udHlwZSAhPT0gV2ViR0xDb25zdGFudHMuRkxPQVRfTUFUMyAmJlxuICAgICAgICAgIHVuaWZvcm0udHlwZSAhPT0gV2ViR0xDb25zdGFudHMuRkxPQVRfTUFUNCAmJlxuICAgICAgICAgIHVuaWZvcm1OYW1lICE9PSBcInVfbW9ycGhXZWlnaHRzXCIpIHx8XG4gICAgICAgIHVuaWZvcm0udXNlSW5GcmFnbWVudFxuICAgICAgKSB7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgXCJ1bmlmb3JtIFwiICtcbiAgICAgICAgICB3ZWJHTENvbnN0YW50VG9HbHNsVHlwZSh1bmlmb3JtLnR5cGUpICtcbiAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgdW5pZm9ybU5hbWUgK1xuICAgICAgICAgIGFycmF5U2l6ZSArXG4gICAgICAgICAgXCI7XFxuXCI7XG4gICAgICAgIGRlbGV0ZSB1bmlmb3JtLnVzZUluRnJhZ21lbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ZXJ0ZXhTaGFkZXIgKz1cbiAgICAgICAgICBcInVuaWZvcm0gXCIgK1xuICAgICAgICAgIHdlYkdMQ29uc3RhbnRUb0dsc2xUeXBlKHVuaWZvcm0udHlwZSkgK1xuICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICB1bmlmb3JtTmFtZSArXG4gICAgICAgICAgYXJyYXlTaXplICtcbiAgICAgICAgICBcIjtcXG5cIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoaGFzT3V0bGluZSkge1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwidW5pZm9ybSBzYW1wbGVyMkQgdV9vdXRsaW5lVGV4dHVyZTtcXG5cIjtcbiAgfVxuXG4gIC8vIEFkZCBhdHRyaWJ1dGVzIHdpdGggc2VtYW50aWNzXG4gIHZhciB2ZXJ0ZXhTaGFkZXJNYWluID0gXCJcIjtcbiAgaWYgKGhhc1NraW5uaW5nKSB7XG4gICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgXCIgICAgbWF0NCBza2luTWF0cml4ID1cXG5cIiArXG4gICAgICBcIiAgICAgICAgYV93ZWlnaHQueCAqIHVfam9pbnRNYXRyaXhbaW50KGFfam9pbnQueCldICtcXG5cIiArXG4gICAgICBcIiAgICAgICAgYV93ZWlnaHQueSAqIHVfam9pbnRNYXRyaXhbaW50KGFfam9pbnQueSldICtcXG5cIiArXG4gICAgICBcIiAgICAgICAgYV93ZWlnaHQueiAqIHVfam9pbnRNYXRyaXhbaW50KGFfam9pbnQueildICtcXG5cIiArXG4gICAgICBcIiAgICAgICAgYV93ZWlnaHQudyAqIHVfam9pbnRNYXRyaXhbaW50KGFfam9pbnQudyldO1xcblwiO1xuICB9XG5cbiAgLy8gQWRkIHBvc2l0aW9uIGFsd2F5c1xuICB2YXIgdGVjaG5pcXVlQXR0cmlidXRlcyA9IHtcbiAgICBhX3Bvc2l0aW9uOiB7XG4gICAgICBzZW1hbnRpYzogXCJQT1NJVElPTlwiLFxuICAgIH0sXG4gIH07XG5cbiAgaWYgKGhhc091dGxpbmUpIHtcbiAgICB0ZWNobmlxdWVBdHRyaWJ1dGVzLmFfb3V0bGluZUNvb3JkaW5hdGVzID0ge1xuICAgICAgc2VtYW50aWM6IFwiX09VVExJTkVfQ09PUkRJTkFURVNcIixcbiAgICB9O1xuICB9XG5cbiAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzMgYV9wb3NpdGlvbjtcXG5cIjtcbiAgaWYgKGhhc05vcm1hbHMpIHtcbiAgICB2ZXJ0ZXhTaGFkZXIgKz0gXCJ2YXJ5aW5nIHZlYzMgdl9wb3NpdGlvbkVDO1xcblwiO1xuICB9XG4gIGlmIChoYXNPdXRsaW5lKSB7XG4gICAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzMgYV9vdXRsaW5lQ29vcmRpbmF0ZXM7XFxuXCI7XG4gICAgdmVydGV4U2hhZGVyICs9IFwidmFyeWluZyB2ZWMzIHZfb3V0bGluZUNvb3JkaW5hdGVzO1xcblwiO1xuICB9XG5cbiAgLy8gTW9ycGggVGFyZ2V0IFdlaWdodGluZ1xuICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICAgIHZlYzMgd2VpZ2h0ZWRQb3NpdGlvbiA9IGFfcG9zaXRpb247XFxuXCI7XG4gIGlmIChoYXNOb3JtYWxzKSB7XG4gICAgdmVydGV4U2hhZGVyTWFpbiArPSBcIiAgICB2ZWMzIHdlaWdodGVkTm9ybWFsID0gYV9ub3JtYWw7XFxuXCI7XG4gIH1cbiAgaWYgKGhhc1RhbmdlbnRzKSB7XG4gICAgdmVydGV4U2hhZGVyTWFpbiArPSBcIiAgICB2ZWM0IHdlaWdodGVkVGFuZ2VudCA9IGFfdGFuZ2VudDtcXG5cIjtcbiAgfVxuICBpZiAoaGFzTW9ycGhUYXJnZXRzKSB7XG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCBtb3JwaFRhcmdldHMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHZhciB0YXJnZXRBdHRyaWJ1dGVzID0gbW9ycGhUYXJnZXRzW2tdO1xuICAgICAgZm9yICh2YXIgdGFyZ2V0QXR0cmlidXRlIGluIHRhcmdldEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhcmdldEF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkodGFyZ2V0QXR0cmlidXRlKSAmJlxuICAgICAgICAgIHRhcmdldEF0dHJpYnV0ZSAhPT0gXCJleHRyYXNcIlxuICAgICAgICApIHtcbiAgICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IFwiYV9cIiArIHRhcmdldEF0dHJpYnV0ZSArIFwiX1wiICsgaztcbiAgICAgICAgICB0ZWNobmlxdWVBdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdID0ge1xuICAgICAgICAgICAgc2VtYW50aWM6IHRhcmdldEF0dHJpYnV0ZSArIFwiX1wiICsgayxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHZlcnRleFNoYWRlciArPSBcImF0dHJpYnV0ZSB2ZWMzIFwiICsgYXR0cmlidXRlTmFtZSArIFwiO1xcblwiO1xuICAgICAgICAgIGlmICh0YXJnZXRBdHRyaWJ1dGUgPT09IFwiUE9TSVRJT05cIikge1xuICAgICAgICAgICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgICAgICAgICBcIiAgICB3ZWlnaHRlZFBvc2l0aW9uICs9IHVfbW9ycGhXZWlnaHRzW1wiICtcbiAgICAgICAgICAgICAgayArXG4gICAgICAgICAgICAgIFwiXSAqIFwiICtcbiAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZSArXG4gICAgICAgICAgICAgIFwiO1xcblwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0QXR0cmlidXRlID09PSBcIk5PUk1BTFwiKSB7XG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9XG4gICAgICAgICAgICAgIFwiICAgIHdlaWdodGVkTm9ybWFsICs9IHVfbW9ycGhXZWlnaHRzW1wiICtcbiAgICAgICAgICAgICAgayArXG4gICAgICAgICAgICAgIFwiXSAqIFwiICtcbiAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZSArXG4gICAgICAgICAgICAgIFwiO1xcblwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzVGFuZ2VudHMgJiYgdGFyZ2V0QXR0cmlidXRlID09PSBcIlRBTkdFTlRcIikge1xuICAgICAgICAgICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgICAgICAgICBcIiAgICB3ZWlnaHRlZFRhbmdlbnQueHl6ICs9IHVfbW9ycGhXZWlnaHRzW1wiICtcbiAgICAgICAgICAgICAgayArXG4gICAgICAgICAgICAgIFwiXSAqIFwiICtcbiAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZSArXG4gICAgICAgICAgICAgIFwiO1xcblwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEZpbmFsIHBvc2l0aW9uIGNvbXB1dGF0aW9uXG4gIGlmIChoYXNTa2lubmluZykge1xuICAgIHZlcnRleFNoYWRlck1haW4gKz1cbiAgICAgIFwiICAgIHZlYzQgcG9zaXRpb24gPSBza2luTWF0cml4ICogdmVjNCh3ZWlnaHRlZFBvc2l0aW9uLCAxLjApO1xcblwiO1xuICB9IGVsc2Uge1xuICAgIHZlcnRleFNoYWRlck1haW4gKz0gXCIgICAgdmVjNCBwb3NpdGlvbiA9IHZlYzQod2VpZ2h0ZWRQb3NpdGlvbiwgMS4wKTtcXG5cIjtcbiAgfVxuICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICAgIHBvc2l0aW9uID0gdV9tb2RlbFZpZXdNYXRyaXggKiBwb3NpdGlvbjtcXG5cIjtcbiAgaWYgKGhhc05vcm1hbHMpIHtcbiAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICAgIHZfcG9zaXRpb25FQyA9IHBvc2l0aW9uLnh5ejtcXG5cIjtcbiAgfVxuICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICAgIGdsX1Bvc2l0aW9uID0gdV9wcm9qZWN0aW9uTWF0cml4ICogcG9zaXRpb247XFxuXCI7XG5cbiAgaWYgKGhhc091dGxpbmUpIHtcbiAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICAgIHZfb3V0bGluZUNvb3JkaW5hdGVzID0gYV9vdXRsaW5lQ29vcmRpbmF0ZXM7XFxuXCI7XG4gIH1cblxuICAvLyBGaW5hbCBub3JtYWwgY29tcHV0YXRpb25cbiAgaWYgKGhhc05vcm1hbHMpIHtcbiAgICB0ZWNobmlxdWVBdHRyaWJ1dGVzLmFfbm9ybWFsID0ge1xuICAgICAgc2VtYW50aWM6IFwiTk9STUFMXCIsXG4gICAgfTtcbiAgICB2ZXJ0ZXhTaGFkZXIgKz0gXCJhdHRyaWJ1dGUgdmVjMyBhX25vcm1hbDtcXG5cIjtcbiAgICBpZiAoIWlzVW5saXQpIHtcbiAgICAgIHZlcnRleFNoYWRlciArPSBcInZhcnlpbmcgdmVjMyB2X25vcm1hbDtcXG5cIjtcbiAgICAgIGlmIChoYXNTa2lubmluZykge1xuICAgICAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9XG4gICAgICAgICAgXCIgICAgdl9ub3JtYWwgPSB1X25vcm1hbE1hdHJpeCAqIG1hdDMoc2tpbk1hdHJpeCkgKiB3ZWlnaHRlZE5vcm1hbDtcXG5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZlcnRleFNoYWRlck1haW4gKz0gXCIgICAgdl9ub3JtYWwgPSB1X25vcm1hbE1hdHJpeCAqIHdlaWdodGVkTm9ybWFsO1xcblwiO1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCJ2YXJ5aW5nIHZlYzMgdl9ub3JtYWw7XFxuXCI7XG4gICAgfVxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwidmFyeWluZyB2ZWMzIHZfcG9zaXRpb25FQztcXG5cIjtcbiAgfVxuXG4gIC8vIFJlYWQgdGFuZ2VudHMgaWYgYXZhaWxhYmxlXG4gIGlmIChoYXNUYW5nZW50cykge1xuICAgIHRlY2huaXF1ZUF0dHJpYnV0ZXMuYV90YW5nZW50ID0ge1xuICAgICAgc2VtYW50aWM6IFwiVEFOR0VOVFwiLFxuICAgIH07XG4gICAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzQgYV90YW5nZW50O1xcblwiO1xuICAgIHZlcnRleFNoYWRlciArPSBcInZhcnlpbmcgdmVjNCB2X3RhbmdlbnQ7XFxuXCI7XG4gICAgdmVydGV4U2hhZGVyTWFpbiArPVxuICAgICAgXCIgICAgdl90YW5nZW50Lnh5eiA9IHVfbm9ybWFsTWF0cml4ICogd2VpZ2h0ZWRUYW5nZW50Lnh5ejtcXG5cIjtcbiAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICAgIHZfdGFuZ2VudC53ID0gd2VpZ2h0ZWRUYW5nZW50Lnc7XFxuXCI7XG5cbiAgICBmcmFnbWVudFNoYWRlciArPSBcInZhcnlpbmcgdmVjNCB2X3RhbmdlbnQ7XFxuXCI7XG4gIH1cblxuICBpZiAoaGFzT3V0bGluZSkge1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwidmFyeWluZyB2ZWMzIHZfb3V0bGluZUNvb3JkaW5hdGVzO1xcblwiO1xuICB9XG5cbiAgdmFyIGZyYWdtZW50U2hhZGVyTWFpbiA9IFwiXCI7XG5cbiAgLy8gQWRkIHRleHR1cmUgY29vcmRpbmF0ZXMgaWYgdGhlIG1hdGVyaWFsIHVzZXMgdGhlbVxuICB2YXIgdl90ZXhDb29yZDtcbiAgdmFyIG5vcm1hbFRleENvb3JkO1xuICB2YXIgYmFzZUNvbG9yVGV4Q29vcmQ7XG4gIHZhciBzcGVjdWxhckdsb3NzaW5lc3NUZXhDb29yZDtcbiAgdmFyIGRpZmZ1c2VUZXhDb29yZDtcbiAgdmFyIG1ldGFsbGljUm91Z2huZXNzVGV4Q29vcmQ7XG4gIHZhciBvY2NsdXNpb25UZXhDb29yZDtcbiAgdmFyIGVtaXNzaXZlVGV4Q29vcmQ7XG5cbiAgaWYgKGhhc1RleENvb3Jkcykge1xuICAgIHRlY2huaXF1ZUF0dHJpYnV0ZXMuYV90ZXhjb29yZF8wID0ge1xuICAgICAgc2VtYW50aWM6IFwiVEVYQ09PUkRfMFwiLFxuICAgIH07XG5cbiAgICB2X3RleENvb3JkID0gXCJ2X3RleGNvb3JkXzBcIjtcbiAgICB2ZXJ0ZXhTaGFkZXIgKz0gXCJhdHRyaWJ1dGUgdmVjMiBhX3RleGNvb3JkXzA7XFxuXCI7XG4gICAgdmVydGV4U2hhZGVyICs9IFwidmFyeWluZyB2ZWMyIFwiICsgdl90ZXhDb29yZCArIFwiO1xcblwiO1xuICAgIHZlcnRleFNoYWRlck1haW4gKz0gXCIgICAgXCIgKyB2X3RleENvb3JkICsgXCIgPSBhX3RleGNvb3JkXzA7XFxuXCI7XG5cbiAgICBmcmFnbWVudFNoYWRlciArPSBcInZhcnlpbmcgdmVjMiBcIiArIHZfdGV4Q29vcmQgKyBcIjtcXG5cIjtcblxuICAgIGlmIChoYXNUZXhDb29yZDEpIHtcbiAgICAgIHRlY2huaXF1ZUF0dHJpYnV0ZXMuYV90ZXhjb29yZF8xID0ge1xuICAgICAgICBzZW1hbnRpYzogXCJURVhDT09SRF8xXCIsXG4gICAgICB9O1xuXG4gICAgICB2YXIgdl90ZXhDb29yZDEgPSB2X3RleENvb3JkLnJlcGxhY2UoXCIwXCIsIFwiMVwiKTtcbiAgICAgIHZlcnRleFNoYWRlciArPSBcImF0dHJpYnV0ZSB2ZWMyIGFfdGV4Y29vcmRfMTtcXG5cIjtcbiAgICAgIHZlcnRleFNoYWRlciArPSBcInZhcnlpbmcgdmVjMiBcIiArIHZfdGV4Q29vcmQxICsgXCI7XFxuXCI7XG4gICAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICAgIFwiICsgdl90ZXhDb29yZDEgKyBcIiA9IGFfdGV4Y29vcmRfMTtcXG5cIjtcblxuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCJ2YXJ5aW5nIHZlYzIgXCIgKyB2X3RleENvb3JkMSArIFwiO1xcblwiO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICBmcmFnbWVudFNoYWRlck1haW46IGZyYWdtZW50U2hhZGVyTWFpbixcbiAgICB9O1xuICAgIG5vcm1hbFRleENvb3JkID0gYWRkVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgZ2x0ZixcbiAgICAgIFwidV9ub3JtYWxUZXh0dXJlXCIsXG4gICAgICBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcyxcbiAgICAgIHZfdGV4Q29vcmQsXG4gICAgICByZXN1bHRcbiAgICApO1xuICAgIGJhc2VDb2xvclRleENvb3JkID0gYWRkVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgZ2x0ZixcbiAgICAgIFwidV9iYXNlQ29sb3JUZXh0dXJlXCIsXG4gICAgICBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcyxcbiAgICAgIHZfdGV4Q29vcmQsXG4gICAgICByZXN1bHRcbiAgICApO1xuICAgIHNwZWN1bGFyR2xvc3NpbmVzc1RleENvb3JkID0gYWRkVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgZ2x0ZixcbiAgICAgIFwidV9zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlXCIsXG4gICAgICBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcyxcbiAgICAgIHZfdGV4Q29vcmQsXG4gICAgICByZXN1bHRcbiAgICApO1xuICAgIGRpZmZ1c2VUZXhDb29yZCA9IGFkZFRleHR1cmVDb29yZGluYXRlcyhcbiAgICAgIGdsdGYsXG4gICAgICBcInVfZGlmZnVzZVRleHR1cmVcIixcbiAgICAgIGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLFxuICAgICAgdl90ZXhDb29yZCxcbiAgICAgIHJlc3VsdFxuICAgICk7XG4gICAgbWV0YWxsaWNSb3VnaG5lc3NUZXhDb29yZCA9IGFkZFRleHR1cmVDb29yZGluYXRlcyhcbiAgICAgIGdsdGYsXG4gICAgICBcInVfbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlXCIsXG4gICAgICBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcyxcbiAgICAgIHZfdGV4Q29vcmQsXG4gICAgICByZXN1bHRcbiAgICApO1xuICAgIG9jY2x1c2lvblRleENvb3JkID0gYWRkVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgZ2x0ZixcbiAgICAgIFwidV9vY2NsdXNpb25UZXh0dXJlXCIsXG4gICAgICBnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcyxcbiAgICAgIHZfdGV4Q29vcmQsXG4gICAgICByZXN1bHRcbiAgICApO1xuICAgIGVtaXNzaXZlVGV4Q29vcmQgPSBhZGRUZXh0dXJlQ29vcmRpbmF0ZXMoXG4gICAgICBnbHRmLFxuICAgICAgXCJ1X2VtaXNzaXZlVGV4dHVyZVwiLFxuICAgICAgZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMsXG4gICAgICB2X3RleENvb3JkLFxuICAgICAgcmVzdWx0XG4gICAgKTtcblxuICAgIGZyYWdtZW50U2hhZGVyTWFpbiA9IHJlc3VsdC5mcmFnbWVudFNoYWRlck1haW47XG4gIH1cblxuICAvLyBBZGQgc2tpbm5pbmcgaW5mb3JtYXRpb24gaWYgYXZhaWxhYmxlXG4gIGlmIChoYXNTa2lubmluZykge1xuICAgIHRlY2huaXF1ZUF0dHJpYnV0ZXMuYV9qb2ludCA9IHtcbiAgICAgIHNlbWFudGljOiBcIkpPSU5UU18wXCIsXG4gICAgfTtcbiAgICB0ZWNobmlxdWVBdHRyaWJ1dGVzLmFfd2VpZ2h0ID0ge1xuICAgICAgc2VtYW50aWM6IFwiV0VJR0hUU18wXCIsXG4gICAgfTtcblxuICAgIHZlcnRleFNoYWRlciArPSBcImF0dHJpYnV0ZSB2ZWM0IGFfam9pbnQ7XFxuXCI7XG4gICAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzQgYV93ZWlnaHQ7XFxuXCI7XG4gIH1cblxuICBpZiAoaGFzVmVydGV4Q29sb3JzKSB7XG4gICAgdGVjaG5pcXVlQXR0cmlidXRlcy5hX3ZlcnRleENvbG9yID0ge1xuICAgICAgc2VtYW50aWM6IFwiQ09MT1JfMFwiLFxuICAgIH07XG4gICAgdmVydGV4U2hhZGVyICs9IFwiYXR0cmlidXRlIHZlYzQgYV92ZXJ0ZXhDb2xvcjtcXG5cIjtcbiAgICB2ZXJ0ZXhTaGFkZXIgKz0gXCJ2YXJ5aW5nIHZlYzQgdl92ZXJ0ZXhDb2xvcjtcXG5cIjtcbiAgICB2ZXJ0ZXhTaGFkZXJNYWluICs9IFwiICB2X3ZlcnRleENvbG9yID0gYV92ZXJ0ZXhDb2xvcjtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcInZhcnlpbmcgdmVjNCB2X3ZlcnRleENvbG9yO1xcblwiO1xuICB9XG5cbiAgaWYgKGFkZEJhdGNoSWRUb0dlbmVyYXRlZFNoYWRlcnMpIHtcbiAgICB0ZWNobmlxdWVBdHRyaWJ1dGVzLmFfYmF0Y2hJZCA9IHtcbiAgICAgIHNlbWFudGljOiBcIl9CQVRDSElEXCIsXG4gICAgfTtcbiAgICB2ZXJ0ZXhTaGFkZXIgKz0gXCJhdHRyaWJ1dGUgZmxvYXQgYV9iYXRjaElkO1xcblwiO1xuICB9XG5cbiAgdmVydGV4U2hhZGVyICs9IFwidm9pZCBtYWluKHZvaWQpIFxcbntcXG5cIjtcbiAgdmVydGV4U2hhZGVyICs9IHZlcnRleFNoYWRlck1haW47XG4gIHZlcnRleFNoYWRlciArPSBcIn1cXG5cIjtcblxuICAvLyBGcmFnbWVudCBzaGFkZXIgbGlnaHRpbmdcbiAgaWYgKGhhc05vcm1hbHMgJiYgIWlzVW5saXQpIHtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcImNvbnN0IGZsb2F0IE1fUEkgPSAzLjE0MTU5MjY1MzU4OTc5MztcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcInZlYzMgbGFtYmVydGlhbkRpZmZ1c2UodmVjMyBkaWZmdXNlQ29sb3IpIFxcblwiICtcbiAgICAgIFwie1xcblwiICtcbiAgICAgIFwiICAgIHJldHVybiBkaWZmdXNlQ29sb3IgLyBNX1BJO1xcblwiICtcbiAgICAgIFwifVxcblxcblwiO1xuXG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwidmVjMyBmcmVzbmVsU2NobGljazIodmVjMyBmMCwgdmVjMyBmOTAsIGZsb2F0IFZkb3RIKSBcXG5cIiArXG4gICAgICBcIntcXG5cIiArXG4gICAgICBcIiAgICByZXR1cm4gZjAgKyAoZjkwIC0gZjApICogcG93KGNsYW1wKDEuMCAtIFZkb3RILCAwLjAsIDEuMCksIDUuMCk7XFxuXCIgK1xuICAgICAgXCJ9XFxuXFxuXCI7XG5cbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCJ2ZWMzIGZyZXNuZWxTY2hsaWNrKGZsb2F0IG1ldGFsbmVzcywgZmxvYXQgVmRvdEgpIFxcblwiICtcbiAgICAgIFwie1xcblwiICtcbiAgICAgIFwiICAgIHJldHVybiBtZXRhbG5lc3MgKyAodmVjMygxLjApIC0gbWV0YWxuZXNzKSAqIHBvdygxLjAgLSBWZG90SCwgNS4wKTtcXG5cIiArXG4gICAgICBcIn1cXG5cXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcImZsb2F0IHNtaXRoVmlzaWJpbGl0eUcxKGZsb2F0IE5kb3RWLCBmbG9hdCByb3VnaG5lc3MpIFxcblwiICtcbiAgICAgIFwie1xcblwiICtcbiAgICAgIFwiICAgIGZsb2F0IGsgPSAocm91Z2huZXNzICsgMS4wKSAqIChyb3VnaG5lc3MgKyAxLjApIC8gOC4wO1xcblwiICtcbiAgICAgIFwiICAgIHJldHVybiBOZG90ViAvIChOZG90ViAqICgxLjAgLSBrKSArIGspO1xcblwiICtcbiAgICAgIFwifVxcblxcblwiO1xuXG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiZmxvYXQgc21pdGhWaXNpYmlsaXR5R0dYKGZsb2F0IHJvdWdobmVzcywgZmxvYXQgTmRvdEwsIGZsb2F0IE5kb3RWKSBcXG5cIiArXG4gICAgICBcIntcXG5cIiArXG4gICAgICBcIiAgICByZXR1cm4gc21pdGhWaXNpYmlsaXR5RzEoTmRvdEwsIHJvdWdobmVzcykgKiBzbWl0aFZpc2liaWxpdHlHMShOZG90Viwgcm91Z2huZXNzKTtcXG5cIiArXG4gICAgICBcIn1cXG5cXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcImZsb2F0IEdHWChmbG9hdCByb3VnaG5lc3MsIGZsb2F0IE5kb3RIKSBcXG5cIiArXG4gICAgICBcIntcXG5cIiArXG4gICAgICBcIiAgICBmbG9hdCByb3VnaG5lc3NTcXVhcmVkID0gcm91Z2huZXNzICogcm91Z2huZXNzO1xcblwiICtcbiAgICAgIFwiICAgIGZsb2F0IGYgPSAoTmRvdEggKiByb3VnaG5lc3NTcXVhcmVkIC0gTmRvdEgpICogTmRvdEggKyAxLjA7XFxuXCIgK1xuICAgICAgXCIgICAgcmV0dXJuIHJvdWdobmVzc1NxdWFyZWQgLyAoTV9QSSAqIGYgKiBmKTtcXG5cIiArXG4gICAgICBcIn1cXG5cXG5cIjtcbiAgfVxuXG4gIGZyYWdtZW50U2hhZGVyICs9XG4gICAgXCJ2ZWMzIFNSR0J0b0xJTkVBUjModmVjMyBzcmdiSW4pIFxcblwiICtcbiAgICBcIntcXG5cIiArXG4gICAgXCIgICAgcmV0dXJuIHBvdyhzcmdiSW4sIHZlYzMoMi4yKSk7XFxuXCIgK1xuICAgIFwifVxcblxcblwiO1xuXG4gIGZyYWdtZW50U2hhZGVyICs9XG4gICAgXCJ2ZWM0IFNSR0J0b0xJTkVBUjQodmVjNCBzcmdiSW4pIFxcblwiICtcbiAgICBcIntcXG5cIiArXG4gICAgXCIgICAgdmVjMyBsaW5lYXJPdXQgPSBwb3coc3JnYkluLnJnYiwgdmVjMygyLjIpKTtcXG5cIiArXG4gICAgXCIgICAgcmV0dXJuIHZlYzQobGluZWFyT3V0LCBzcmdiSW4uYSk7XFxuXCIgK1xuICAgIFwifVxcblxcblwiO1xuXG4gIGZyYWdtZW50U2hhZGVyICs9XG4gICAgXCJ2ZWMzIGFwcGx5VG9uZW1hcHBpbmcodmVjMyBsaW5lYXJJbikgXFxuXCIgK1xuICAgIFwie1xcblwiICtcbiAgICBcIiNpZm5kZWYgSERSIFxcblwiICtcbiAgICBcIiAgICByZXR1cm4gY3ptX2FjZXNUb25lbWFwcGluZyhsaW5lYXJJbik7XFxuXCIgK1xuICAgIFwiI2Vsc2UgXFxuXCIgK1xuICAgIFwiICAgIHJldHVybiBsaW5lYXJJbjtcXG5cIiArXG4gICAgXCIjZW5kaWYgXFxuXCIgK1xuICAgIFwifVxcblxcblwiO1xuXG4gIGZyYWdtZW50U2hhZGVyICs9XG4gICAgXCJ2ZWMzIExJTkVBUnRvU1JHQih2ZWMzIGxpbmVhckluKSBcXG5cIiArXG4gICAgXCJ7XFxuXCIgK1xuICAgIFwiI2lmbmRlZiBIRFIgXFxuXCIgK1xuICAgIFwiICAgIHJldHVybiBwb3cobGluZWFySW4sIHZlYzMoMS4wLzIuMikpO1xcblwiICtcbiAgICBcIiNlbHNlIFxcblwiICtcbiAgICBcIiAgICByZXR1cm4gbGluZWFySW47XFxuXCIgK1xuICAgIFwiI2VuZGlmIFxcblwiICtcbiAgICBcIn1cXG5cXG5cIjtcblxuICBmcmFnbWVudFNoYWRlciArPVxuICAgIFwidmVjMiBjb21wdXRlVGV4Q29vcmQodmVjMiB0ZXhDb29yZHMsIHZlYzIgb2Zmc2V0LCBmbG9hdCByb3RhdGlvbiwgdmVjMiBzY2FsZSkgXFxuXCIgK1xuICAgIFwie1xcblwiICtcbiAgICBcIiAgICByb3RhdGlvbiA9IC1yb3RhdGlvbjsgXFxuXCIgK1xuICAgIFwiICAgIG1hdDMgdHJhbnNmb3JtID0gbWF0MyhcXG5cIiArXG4gICAgXCIgICAgICAgIGNvcyhyb3RhdGlvbikgKiBzY2FsZS54LCBzaW4ocm90YXRpb24pICogc2NhbGUueCwgMC4wLCBcXG5cIiArXG4gICAgXCIgICAgICAgLXNpbihyb3RhdGlvbikgKiBzY2FsZS55LCBjb3Mocm90YXRpb24pICogc2NhbGUueSwgMC4wLCBcXG5cIiArXG4gICAgXCIgICAgICAgIG9mZnNldC54LCBvZmZzZXQueSwgMS4wKTsgXFxuXCIgK1xuICAgIFwiICAgIHZlYzIgdHJhbnNmb3JtZWRUZXhDb29yZHMgPSAodHJhbnNmb3JtICogdmVjMyhmcmFjdCh0ZXhDb29yZHMpLCAxLjApKS54eTsgXFxuXCIgK1xuICAgIFwiICAgIHJldHVybiB0cmFuc2Zvcm1lZFRleENvb3JkczsgXFxuXCIgK1xuICAgIFwifVxcblxcblwiO1xuXG4gIGZyYWdtZW50U2hhZGVyICs9IFwiI2lmZGVmIFVTRV9JQkxfTElHSFRJTkcgXFxuXCI7XG4gIGZyYWdtZW50U2hhZGVyICs9IFwidW5pZm9ybSB2ZWMyIGdsdGZfaWJsRmFjdG9yOyBcXG5cIjtcbiAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjZW5kaWYgXFxuXCI7XG4gIGZyYWdtZW50U2hhZGVyICs9IFwiI2lmZGVmIFVTRV9DVVNUT01fTElHSFRfQ09MT1IgXFxuXCI7XG4gIGZyYWdtZW50U2hhZGVyICs9IFwidW5pZm9ybSB2ZWMzIGdsdGZfbGlnaHRDb2xvcjsgXFxuXCI7XG4gIGZyYWdtZW50U2hhZGVyICs9IFwiI2VuZGlmIFxcblwiO1xuXG4gIGZyYWdtZW50U2hhZGVyICs9IFwidm9pZCBtYWluKHZvaWQpIFxcbntcXG5cIjtcbiAgZnJhZ21lbnRTaGFkZXIgKz0gZnJhZ21lbnRTaGFkZXJNYWluO1xuXG4gIC8vIEFkZCBub3JtYWwgbWFwcGluZyB0byBmcmFnbWVudCBzaGFkZXJcbiAgaWYgKGhhc05vcm1hbHMgJiYgIWlzVW5saXQpIHtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIG5nID0gbm9ybWFsaXplKHZfbm9ybWFsKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBwb3NpdGlvbldDID0gdmVjMyhjem1faW52ZXJzZVZpZXcgKiB2ZWM0KHZfcG9zaXRpb25FQywgMS4wKSk7XFxuXCI7XG4gICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9ub3JtYWxUZXh0dXJlKSkge1xuICAgICAgaWYgKGhhc1RhbmdlbnRzKSB7XG4gICAgICAgIC8vIFJlYWQgdGFuZ2VudHMgZnJvbSB2YXJ5aW5nXG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgdCA9IG5vcm1hbGl6ZSh2X3RhbmdlbnQueHl6KTtcXG5cIjtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgICBcIiAgICB2ZWMzIGIgPSBub3JtYWxpemUoY3Jvc3MobmcsIHQpICogdl90YW5nZW50LncpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBtYXQzIHRibiA9IG1hdDModCwgYiwgbmcpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgICAgIFwiICAgIHZlYzMgbiA9IHRleHR1cmUyRCh1X25vcm1hbFRleHR1cmUsIFwiICtcbiAgICAgICAgICBub3JtYWxUZXhDb29yZCArXG4gICAgICAgICAgXCIpLnJnYjtcXG5cIjtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgbiA9IG5vcm1hbGl6ZSh0Ym4gKiAoMi4wICogbiAtIDEuMCkpO1xcblwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkIHN0YW5kYXJkIGRlcml2YXRpdmVzIGV4dGVuc2lvblxuICAgICAgICBmcmFnbWVudFNoYWRlciA9XG4gICAgICAgICAgXCIjaWZkZWYgR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXFxuXCIgK1xuICAgICAgICAgIFwiI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGVcXG5cIiArXG4gICAgICAgICAgXCIjZW5kaWZcXG5cIiArXG4gICAgICAgICAgZnJhZ21lbnRTaGFkZXI7XG4gICAgICAgIC8vIENvbXB1dGUgdGFuZ2VudHNcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjaWZkZWYgR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXFxuXCI7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgcG9zX2R4ID0gZEZkeCh2X3Bvc2l0aW9uRUMpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIHBvc19keSA9IGRGZHkodl9wb3NpdGlvbkVDKTtcXG5cIjtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgICBcIiAgICB2ZWMzIHRleF9keCA9IGRGZHgodmVjMyhcIiArIG5vcm1hbFRleENvb3JkICsgXCIsMC4wKSk7XFxuXCI7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgXCIgICAgdmVjMyB0ZXhfZHkgPSBkRmR5KHZlYzMoXCIgKyBub3JtYWxUZXhDb29yZCArIFwiLDAuMCkpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgICAgIFwiICAgIHZlYzMgdCA9ICh0ZXhfZHkudCAqIHBvc19keCAtIHRleF9keC50ICogcG9zX2R5KSAvICh0ZXhfZHgucyAqIHRleF9keS50IC0gdGV4X2R5LnMgKiB0ZXhfZHgudCk7XFxuXCI7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHQgPSBub3JtYWxpemUodCAtIG5nICogZG90KG5nLCB0KSk7XFxuXCI7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgYiA9IG5vcm1hbGl6ZShjcm9zcyhuZywgdCkpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBtYXQzIHRibiA9IG1hdDModCwgYiwgbmcpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgICAgIFwiICAgIHZlYzMgbiA9IHRleHR1cmUyRCh1X25vcm1hbFRleHR1cmUsIFwiICtcbiAgICAgICAgICBub3JtYWxUZXhDb29yZCArXG4gICAgICAgICAgXCIpLnJnYjtcXG5cIjtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgbiA9IG5vcm1hbGl6ZSh0Ym4gKiAoMi4wICogbiAtIDEuMCkpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbHNlXFxuXCI7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgbiA9IG5nO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbmRpZlxcblwiO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIG4gPSBuZztcXG5cIjtcbiAgICB9XG4gICAgaWYgKG1hdGVyaWFsLmRvdWJsZVNpZGVkKSB7XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBpZiAoY3ptX2JhY2tGYWNpbmcoKSlcXG5cIjtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHtcXG5cIjtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgICAgICBuID0gLW47XFxuXCI7XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB9XFxuXCI7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIGJhc2UgY29sb3IgdG8gZnJhZ21lbnQgc2hhZGVyXG4gIGlmIChkZWZpbmVkKGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLnVfYmFzZUNvbG9yVGV4dHVyZSkpIHtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjNCBiYXNlQ29sb3JXaXRoQWxwaGEgPSBTUkdCdG9MSU5FQVI0KHRleHR1cmUyRCh1X2Jhc2VDb2xvclRleHR1cmUsIFwiICtcbiAgICAgIGJhc2VDb2xvclRleENvb3JkICtcbiAgICAgIFwiKSk7XFxuXCI7XG4gICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9iYXNlQ29sb3JGYWN0b3IpKSB7XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBiYXNlQ29sb3JXaXRoQWxwaGEgKj0gdV9iYXNlQ29sb3JGYWN0b3I7XFxuXCI7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9iYXNlQ29sb3JGYWN0b3IpKSB7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgdmVjNCBiYXNlQ29sb3JXaXRoQWxwaGEgPSB1X2Jhc2VDb2xvckZhY3RvcjtcXG5cIjtcbiAgfSBlbHNlIHtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWM0IGJhc2VDb2xvcldpdGhBbHBoYSA9IHZlYzQoMS4wKTtcXG5cIjtcbiAgfVxuXG4gIGlmIChoYXNWZXJ0ZXhDb2xvcnMpIHtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBiYXNlQ29sb3JXaXRoQWxwaGEgKj0gdl92ZXJ0ZXhDb2xvcjtcXG5cIjtcbiAgfVxuXG4gIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgYmFzZUNvbG9yID0gYmFzZUNvbG9yV2l0aEFscGhhLnJnYjtcXG5cIjtcblxuICBpZiAoaGFzTm9ybWFscyAmJiAhaXNVbmxpdCkge1xuICAgIGlmICh1c2VTcGVjR2xvc3MpIHtcbiAgICAgIGlmIChkZWZpbmVkKGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLnVfc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSkpIHtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgICBcIiAgICB2ZWM0IHNwZWN1bGFyR2xvc3NpbmVzcyA9IFNSR0J0b0xJTkVBUjQodGV4dHVyZTJEKHVfc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSwgXCIgK1xuICAgICAgICAgIHNwZWN1bGFyR2xvc3NpbmVzc1RleENvb3JkICtcbiAgICAgICAgICBcIikpO1xcblwiO1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIHNwZWN1bGFyID0gc3BlY3VsYXJHbG9zc2luZXNzLnJnYjtcXG5cIjtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgZ2xvc3NpbmVzcyA9IHNwZWN1bGFyR2xvc3NpbmVzcy5hO1xcblwiO1xuICAgICAgICBpZiAoZGVmaW5lZChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcy51X3NwZWN1bGFyRmFjdG9yKSkge1xuICAgICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHNwZWN1bGFyICo9IHVfc3BlY3VsYXJGYWN0b3I7XFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9nbG9zc2luZXNzRmFjdG9yKSkge1xuICAgICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGdsb3NzaW5lc3MgKj0gdV9nbG9zc2luZXNzRmFjdG9yO1xcblwiO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVmaW5lZChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcy51X3NwZWN1bGFyRmFjdG9yKSkge1xuICAgICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgICBcIiAgICB2ZWMzIHNwZWN1bGFyID0gY2xhbXAodV9zcGVjdWxhckZhY3RvciwgdmVjMygwLjApLCB2ZWMzKDEuMCkpO1xcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgc3BlY3VsYXIgPSB2ZWMzKDEuMCk7XFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9nbG9zc2luZXNzRmFjdG9yKSkge1xuICAgICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgICBcIiAgICBmbG9hdCBnbG9zc2luZXNzID0gY2xhbXAodV9nbG9zc2luZXNzRmFjdG9yLCAwLjAsIDEuMCk7XFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgZ2xvc3NpbmVzcyA9IDEuMDtcXG5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9kaWZmdXNlVGV4dHVyZSkpIHtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgICBcIiAgICB2ZWM0IGRpZmZ1c2UgPSBTUkdCdG9MSU5FQVI0KHRleHR1cmUyRCh1X2RpZmZ1c2VUZXh0dXJlLCBcIiArXG4gICAgICAgICAgZGlmZnVzZVRleENvb3JkICtcbiAgICAgICAgICBcIikpO1xcblwiO1xuICAgICAgICBpZiAoZGVmaW5lZChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcy51X2RpZmZ1c2VGYWN0b3IpKSB7XG4gICAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZGlmZnVzZSAqPSB1X2RpZmZ1c2VGYWN0b3I7XFxuXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZGVmaW5lZChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcy51X2RpZmZ1c2VGYWN0b3IpKSB7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgXCIgICAgdmVjNCBkaWZmdXNlID0gY2xhbXAodV9kaWZmdXNlRmFjdG9yLCB2ZWM0KDAuMCksIHZlYzQoMS4wKSk7XFxuXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWM0IGRpZmZ1c2UgPSB2ZWM0KDEuMCk7XFxuXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLnVfbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlKSkge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgXCIgICAgdmVjMyBtZXRhbGxpY1JvdWdobmVzcyA9IHRleHR1cmUyRCh1X21ldGFsbGljUm91Z2huZXNzVGV4dHVyZSwgXCIgK1xuICAgICAgICBtZXRhbGxpY1JvdWdobmVzc1RleENvb3JkICtcbiAgICAgICAgXCIpLnJnYjtcXG5cIjtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgIFwiICAgIGZsb2F0IG1ldGFsbmVzcyA9IGNsYW1wKG1ldGFsbGljUm91Z2huZXNzLmIsIDAuMCwgMS4wKTtcXG5cIjtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgIFwiICAgIGZsb2F0IHJvdWdobmVzcyA9IGNsYW1wKG1ldGFsbGljUm91Z2huZXNzLmcsIDAuMDQsIDEuMCk7XFxuXCI7XG4gICAgICBpZiAoZGVmaW5lZChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcy51X21ldGFsbGljRmFjdG9yKSkge1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBtZXRhbG5lc3MgKj0gdV9tZXRhbGxpY0ZhY3RvcjtcXG5cIjtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLnVfcm91Z2huZXNzRmFjdG9yKSkge1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICByb3VnaG5lc3MgKj0gdV9yb3VnaG5lc3NGYWN0b3I7XFxuXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkZWZpbmVkKGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLnVfbWV0YWxsaWNGYWN0b3IpKSB7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgXCIgICAgZmxvYXQgbWV0YWxuZXNzID0gY2xhbXAodV9tZXRhbGxpY0ZhY3RvciwgMC4wLCAxLjApO1xcblwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgbWV0YWxuZXNzID0gMS4wO1xcblwiO1xuICAgICAgfVxuICAgICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9yb3VnaG5lc3NGYWN0b3IpKSB7XG4gICAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgICAgXCIgICAgZmxvYXQgcm91Z2huZXNzID0gY2xhbXAodV9yb3VnaG5lc3NGYWN0b3IsIDAuMDQsIDEuMCk7XFxuXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBmbG9hdCByb3VnaG5lc3MgPSAxLjA7XFxuXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgdmVjMyB2ID0gLW5vcm1hbGl6ZSh2X3Bvc2l0aW9uRUMpO1xcblwiO1xuXG4gICAgLy8gR2VuZXJhdGUgZnJhZ21lbnQgc2hhZGVyJ3MgbGlnaHRpbmcgYmxvY2tcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNpZm5kZWYgVVNFX0NVU1RPTV9MSUdIVF9DT0xPUiBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIGxpZ2h0Q29sb3JIZHIgPSBjem1fbGlnaHRDb2xvckhkcjtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbHNlIFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgbGlnaHRDb2xvckhkciA9IGdsdGZfbGlnaHRDb2xvcjtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbmRpZiBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIGwgPSBub3JtYWxpemUoY3ptX2xpZ2h0RGlyZWN0aW9uRUMpO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgaCA9IG5vcm1hbGl6ZSh2ICsgbCk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgTmRvdEwgPSBjbGFtcChkb3QobiwgbCksIDAuMDAxLCAxLjApO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGZsb2F0IE5kb3RWID0gYWJzKGRvdChuLCB2KSkgKyAwLjAwMTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBmbG9hdCBOZG90SCA9IGNsYW1wKGRvdChuLCBoKSwgMC4wLCAxLjApO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGZsb2F0IExkb3RIID0gY2xhbXAoZG90KGwsIGgpLCAwLjAsIDEuMCk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgVmRvdEggPSBjbGFtcChkb3QodiwgaCksIDAuMCwgMS4wKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIGYwID0gdmVjMygwLjA0KTtcXG5cIjtcbiAgICAvLyBXaGV0aGVyIHRoZSBtYXRlcmlhbCB1c2VzIG1ldGFsbGljLXJvdWdobmVzcyBvciBzcGVjdWxhci1nbG9zc2luZXNzIGNoYW5nZXMgaG93IHRoZSBCUkRGIGlucHV0cyBhcmUgY29tcHV0ZWQuXG4gICAgLy8gSXQgZG9lcyBub3QgY2hhbmdlIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQlJERiBpdHNlbGYuXG4gICAgaWYgKHVzZVNwZWNHbG9zcykge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgcm91Z2huZXNzID0gMS4wIC0gZ2xvc3NpbmVzcztcXG5cIjtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgIFwiICAgIHZlYzMgZGlmZnVzZUNvbG9yID0gZGlmZnVzZS5yZ2IgKiAoMS4wIC0gbWF4KG1heChzcGVjdWxhci5yLCBzcGVjdWxhci5nKSwgc3BlY3VsYXIuYikpO1xcblwiO1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgdmVjMyBzcGVjdWxhckNvbG9yID0gc3BlY3VsYXI7XFxuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgIFwiICAgIHZlYzMgZGlmZnVzZUNvbG9yID0gYmFzZUNvbG9yICogKDEuMCAtIG1ldGFsbmVzcykgKiAoMS4wIC0gZjApO1xcblwiO1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgICAgXCIgICAgdmVjMyBzcGVjdWxhckNvbG9yID0gbWl4KGYwLCBiYXNlQ29sb3IsIG1ldGFsbmVzcyk7XFxuXCI7XG4gICAgfVxuXG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgYWxwaGEgPSByb3VnaG5lc3MgKiByb3VnaG5lc3M7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIGZsb2F0IHJlZmxlY3RhbmNlID0gbWF4KG1heChzcGVjdWxhckNvbG9yLnIsIHNwZWN1bGFyQ29sb3IuZyksIHNwZWN1bGFyQ29sb3IuYik7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIHZlYzMgcjkwID0gdmVjMyhjbGFtcChyZWZsZWN0YW5jZSAqIDI1LjAsIDAuMCwgMS4wKSk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgdmVjMyByMCA9IHNwZWN1bGFyQ29sb3IucmdiO1xcblwiO1xuXG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgdmVjMyBGID0gZnJlc25lbFNjaGxpY2syKHIwLCByOTAsIFZkb3RIKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgZmxvYXQgRyA9IHNtaXRoVmlzaWJpbGl0eUdHWChhbHBoYSwgTmRvdEwsIE5kb3RWKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBmbG9hdCBEID0gR0dYKGFscGhhLCBOZG90SCk7XFxuXCI7XG5cbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBkaWZmdXNlQ29udHJpYnV0aW9uID0gKDEuMCAtIEYpICogbGFtYmVydGlhbkRpZmZ1c2UoZGlmZnVzZUNvbG9yKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBzcGVjdWxhckNvbnRyaWJ1dGlvbiA9IEYgKiBHICogRCAvICg0LjAgKiBOZG90TCAqIE5kb3RWKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBjb2xvciA9IE5kb3RMICogbGlnaHRDb2xvckhkciAqIChkaWZmdXNlQ29udHJpYnV0aW9uICsgc3BlY3VsYXJDb250cmlidXRpb24pO1xcblwiO1xuXG4gICAgLy8gVXNlIHRoZSBwcm9jZWR1cmFsIElCTCBpZiB0aGVyZSBhcmUgbm8gZW52aXJvbm1lbnQgbWFwc1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiNpZiBkZWZpbmVkKFVTRV9JQkxfTElHSFRJTkcpICYmICFkZWZpbmVkKERJRkZVU0VfSUJMKSAmJiAhZGVmaW5lZChTUEVDVUxBUl9JQkwpIFxcblwiO1xuXG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIHZlYzMgciA9IG5vcm1hbGl6ZShjem1faW52ZXJzZVZpZXdSb3RhdGlvbiAqIG5vcm1hbGl6ZShyZWZsZWN0KHYsIG4pKSk7XFxuXCI7XG4gICAgLy8gRmlndXJlIG91dCBpZiB0aGUgcmVmbGVjdGlvbiB2ZWN0b3IgaGl0cyB0aGUgZWxsaXBzb2lkXG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgdmVydGV4UmFkaXVzID0gbGVuZ3RoKHBvc2l0aW9uV0MpO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBmbG9hdCBob3Jpem9uRG90TmFkaXIgPSAxLjAgLSBtaW4oMS4wLCBjem1fZWxsaXBzb2lkUmFkaWkueCAvIHZlcnRleFJhZGl1cyk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIGZsb2F0IHJlZmxlY3Rpb25Eb3ROYWRpciA9IGRvdChyLCBub3JtYWxpemUocG9zaXRpb25XQykpO1xcblwiO1xuICAgIC8vIEZsaXBwaW5nIHRoZSBYIHZlY3RvciBpcyBhIGNoZWFwIHdheSB0byBnZXQgdGhlIGludmVyc2Ugb2YgY3ptX3RlbWVUb1BzZXVkb0ZpeGVkLCBzaW5jZSB0aGF0J3MgYSByb3RhdGlvbiBhYm91dCBaLlxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHIueCA9IC1yLng7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgciA9IC1ub3JtYWxpemUoY3ptX3RlbWVUb1BzZXVkb0ZpeGVkICogcik7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgci54ID0gLXIueDtcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGZsb2F0IGludmVyc2VSb3VnaG5lc3MgPSAxLjA0IC0gcm91Z2huZXNzO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGludmVyc2VSb3VnaG5lc3MgKj0gaW52ZXJzZVJvdWdobmVzcztcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBzY2VuZVNreUJveCA9IHRleHR1cmVDdWJlKGN6bV9lbnZpcm9ubWVudE1hcCwgcikucmdiICogaW52ZXJzZVJvdWdobmVzcztcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGZsb2F0IGF0bW9zcGhlcmVIZWlnaHQgPSAwLjA1O1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBmbG9hdCBibGVuZFJlZ2lvblNpemUgPSAwLjEgKiAoKDEuMCAtIGludmVyc2VSb3VnaG5lc3MpICogOC4wICsgMS4xIC0gaG9yaXpvbkRvdE5hZGlyKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBmbG9hdCBibGVuZFJlZ2lvbk9mZnNldCA9IHJvdWdobmVzcyAqIC0xLjA7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIGZsb2F0IGZhckFib3ZlSG9yaXpvbiA9IGNsYW1wKGhvcml6b25Eb3ROYWRpciAtIGJsZW5kUmVnaW9uU2l6ZSAqIDAuNSArIGJsZW5kUmVnaW9uT2Zmc2V0LCAxLjBlLTEwIC0gYmxlbmRSZWdpb25TaXplLCAwLjk5OTk5KTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgZmxvYXQgYXJvdW5kSG9yaXpvbiA9IGNsYW1wKGhvcml6b25Eb3ROYWRpciArIGJsZW5kUmVnaW9uU2l6ZSAqIDAuNSwgMS4wZS0xMCAtIGJsZW5kUmVnaW9uU2l6ZSwgMC45OTk5OSk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIGZsb2F0IGZhckJlbG93SG9yaXpvbiA9IGNsYW1wKGhvcml6b25Eb3ROYWRpciArIGJsZW5kUmVnaW9uU2l6ZSAqIDEuNSwgMS4wZS0xMCAtIGJsZW5kUmVnaW9uU2l6ZSwgMC45OTk5OSk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIGZsb2F0IHNtb290aHN0ZXBIZWlnaHQgPSBzbW9vdGhzdGVwKDAuMCwgYXRtb3NwaGVyZUhlaWdodCwgaG9yaXpvbkRvdE5hZGlyKTtcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICB2ZWMzIGJlbG93SG9yaXpvbkNvbG9yID0gbWl4KHZlYzMoMC4xLCAwLjE1LCAwLjI1KSwgdmVjMygwLjQsIDAuNywgMC45KSwgc21vb3Roc3RlcEhlaWdodCk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgdmVjMyBuYWRpckNvbG9yID0gYmVsb3dIb3Jpem9uQ29sb3IgKiAwLjU7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIHZlYzMgYWJvdmVIb3Jpem9uQ29sb3IgPSBtaXgodmVjMygwLjksIDEuMCwgMS4yKSwgYmVsb3dIb3Jpem9uQ29sb3IsIHJvdWdobmVzcyAqIDAuNSk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIHZlYzMgYmx1ZVNreUNvbG9yID0gbWl4KHZlYzMoMC4xOCwgMC4yNiwgMC40OCksIGFib3ZlSG9yaXpvbkNvbG9yLCByZWZsZWN0aW9uRG90TmFkaXIgKiBpbnZlcnNlUm91Z2huZXNzICogMC41ICsgMC43NSk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIHZlYzMgemVuaXRoQ29sb3IgPSBtaXgoYmx1ZVNreUNvbG9yLCBzY2VuZVNreUJveCwgc21vb3Roc3RlcEhlaWdodCk7XFxuXCI7XG5cbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIGJsdWVTa3lEaWZmdXNlQ29sb3IgPSB2ZWMzKDAuNywgMC44NSwgMC45KTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgZmxvYXQgZGlmZnVzZUlycmFkaWFuY2VGcm9tRWFydGggPSAoMS4wIC0gaG9yaXpvbkRvdE5hZGlyKSAqIChyZWZsZWN0aW9uRG90TmFkaXIgKiAwLjI1ICsgMC43NSkgKiBzbW9vdGhzdGVwSGVpZ2h0O1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBmbG9hdCBkaWZmdXNlSXJyYWRpYW5jZUZyb21Ta3kgPSAoMS4wIC0gc21vb3Roc3RlcEhlaWdodCkgKiAoMS4wIC0gKHJlZmxlY3Rpb25Eb3ROYWRpciAqIDAuMjUgKyAwLjI1KSk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIHZlYzMgZGlmZnVzZUlycmFkaWFuY2UgPSBibHVlU2t5RGlmZnVzZUNvbG9yICogY2xhbXAoZGlmZnVzZUlycmFkaWFuY2VGcm9tRWFydGggKyBkaWZmdXNlSXJyYWRpYW5jZUZyb21Ta3ksIDAuMCwgMS4wKTtcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBmbG9hdCBub3REaXN0YW50Um91Z2ggPSAoMS4wIC0gaG9yaXpvbkRvdE5hZGlyICogcm91Z2huZXNzICogMC44KTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBzcGVjdWxhcklycmFkaWFuY2UgPSBtaXgoemVuaXRoQ29sb3IsIGFib3ZlSG9yaXpvbkNvbG9yLCBzbW9vdGhzdGVwKGZhckFib3ZlSG9yaXpvbiwgYXJvdW5kSG9yaXpvbiwgcmVmbGVjdGlvbkRvdE5hZGlyKSAqIG5vdERpc3RhbnRSb3VnaCk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIHNwZWN1bGFySXJyYWRpYW5jZSA9IG1peChzcGVjdWxhcklycmFkaWFuY2UsIGJlbG93SG9yaXpvbkNvbG9yLCBzbW9vdGhzdGVwKGFyb3VuZEhvcml6b24sIGZhckJlbG93SG9yaXpvbiwgcmVmbGVjdGlvbkRvdE5hZGlyKSAqIGludmVyc2VSb3VnaG5lc3MpO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBzcGVjdWxhcklycmFkaWFuY2UgPSBtaXgoc3BlY3VsYXJJcnJhZGlhbmNlLCBuYWRpckNvbG9yLCBzbW9vdGhzdGVwKGZhckJlbG93SG9yaXpvbiwgMS4wLCByZWZsZWN0aW9uRG90TmFkaXIpICogaW52ZXJzZVJvdWdobmVzcyk7XFxuXCI7XG5cbiAgICAvLyBMdW1pbmFuY2UgbW9kZWwgZnJvbSBwYWdlIDQwIG9mIGh0dHA6Ly9zaWx2aW9qZW1tYS5jb20vcHVibGljL3BhcGVycy9saWdodGluZy9zcGhlcmljYWwtaGFybW9uaWMtbGlnaHRpbmcucGRmXG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjaWZkZWYgVVNFX1NVTl9MVU1JTkFOQ0UgXFxuXCI7XG4gICAgLy8gQW5nbGUgYmV0d2VlbiBzdW4gYW5kIHplbml0aFxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBmbG9hdCBMZG90WmVuaXRoID0gY2xhbXAoZG90KG5vcm1hbGl6ZShjem1faW52ZXJzZVZpZXdSb3RhdGlvbiAqIGwpLCBub3JtYWxpemUocG9zaXRpb25XQyAqIC0xLjApKSwgMC4wMDEsIDEuMCk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgUyA9IGFjb3MoTGRvdFplbml0aCk7XFxuXCI7XG4gICAgLy8gQW5nbGUgYmV0d2VlbiB6ZW5pdGggYW5kIGN1cnJlbnQgcGl4ZWxcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgZmxvYXQgTmRvdFplbml0aCA9IGNsYW1wKGRvdChub3JtYWxpemUoY3ptX2ludmVyc2VWaWV3Um90YXRpb24gKiBuKSwgbm9ybWFsaXplKHBvc2l0aW9uV0MgKiAtMS4wKSksIDAuMDAxLCAxLjApO1xcblwiO1xuICAgIC8vIEFuZ2xlIGJldHdlZW4gc3VuIGFuZCBjdXJyZW50IHBpeGVsXG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgZ2FtbWEgPSBhY29zKE5kb3RMKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgZmxvYXQgbnVtZXJhdG9yID0gKCgwLjkxICsgMTAuMCAqIGV4cCgtMy4wICogZ2FtbWEpICsgMC40NSAqIHBvdyhOZG90TCwgMi4wKSkgKiAoMS4wIC0gZXhwKC0wLjMyIC8gTmRvdFplbml0aCkpKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgZmxvYXQgZGVub21pbmF0b3IgPSAoMC45MSArIDEwLjAgKiBleHAoLTMuMCAqIFMpICsgMC40NSAqIHBvdyhMZG90WmVuaXRoLDIuMCkpICogKDEuMCAtIGV4cCgtMC4zMikpO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBmbG9hdCBsdW1pbmFuY2UgPSBnbHRmX2x1bWluYW5jZUF0WmVuaXRoICogKG51bWVyYXRvciAvIGRlbm9taW5hdG9yKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbmRpZiBcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICB2ZWMyIGJyZGZMdXQgPSB0ZXh0dXJlMkQoY3ptX2JyZGZMdXQsIHZlYzIoTmRvdFYsIHJvdWdobmVzcykpLnJnO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICB2ZWMzIElCTENvbG9yID0gKGRpZmZ1c2VJcnJhZGlhbmNlICogZGlmZnVzZUNvbG9yICogZ2x0Zl9pYmxGYWN0b3IueCkgKyAoc3BlY3VsYXJJcnJhZGlhbmNlICogU1JHQnRvTElORUFSMyhzcGVjdWxhckNvbG9yICogYnJkZkx1dC54ICsgYnJkZkx1dC55KSAqIGdsdGZfaWJsRmFjdG9yLnkpO1xcblwiO1xuXG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgIGZsb2F0IG1heGltdW1Db21wb25lbnQgPSBtYXgobWF4KGxpZ2h0Q29sb3JIZHIueCwgbGlnaHRDb2xvckhkci55KSwgbGlnaHRDb2xvckhkci56KTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBsaWdodENvbG9yID0gbGlnaHRDb2xvckhkciAvIG1heChtYXhpbXVtQ29tcG9uZW50LCAxLjApO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIElCTENvbG9yICo9IGxpZ2h0Q29sb3I7XFxuXCI7XG5cbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNpZmRlZiBVU0VfU1VOX0xVTUlOQU5DRSBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBjb2xvciArPSBJQkxDb2xvciAqIGx1bWluYW5jZTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbHNlIFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGNvbG9yICs9IElCTENvbG9yOyBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbmRpZiBcXG5cIjtcblxuICAgIC8vIEVudmlyb25tZW50IG1hcHMgd2VyZSBwcm92aWRlZCwgdXNlIHRoZW0gZm9yIElCTFxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiI2VsaWYgZGVmaW5lZChESUZGVVNFX0lCTCkgfHwgZGVmaW5lZChTUEVDVUxBUl9JQkwpIFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBjb25zdCBtYXQzIHlVcFRvWlVwID0gbWF0MygtMS4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIC0xLjAsIDAuMCwgMS4wLCAwLjApOyBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBjdWJlRGlyID0gbm9ybWFsaXplKHlVcFRvWlVwICogZ2x0Zl9pYmxSZWZlcmVuY2VGcmFtZU1hdHJpeCAqIG5vcm1hbGl6ZShyZWZsZWN0KC12LCBuKSkpOyBcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiI2lmZGVmIERJRkZVU0VfSUJMIFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiI2lmZGVmIENVU1RPTV9TUEhFUklDQUxfSEFSTU9OSUNTIFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICB2ZWMzIGRpZmZ1c2VJcnJhZGlhbmNlID0gY3ptX3NwaGVyaWNhbEhhcm1vbmljcyhjdWJlRGlyLCBnbHRmX3NwaGVyaWNhbEhhcm1vbmljQ29lZmZpY2llbnRzKTsgXFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjZWxzZSBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBkaWZmdXNlSXJyYWRpYW5jZSA9IGN6bV9zcGhlcmljYWxIYXJtb25pY3MoY3ViZURpciwgY3ptX3NwaGVyaWNhbEhhcm1vbmljQ29lZmZpY2llbnRzKTsgXFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjZW5kaWYgXFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjZWxzZSBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIGRpZmZ1c2VJcnJhZGlhbmNlID0gdmVjMygwLjApOyBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbmRpZiBcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiI2lmZGVmIFNQRUNVTEFSX0lCTCBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMiBicmRmTHV0ID0gdGV4dHVyZTJEKGN6bV9icmRmTHV0LCB2ZWMyKE5kb3RWLCByb3VnaG5lc3MpKS5yZztcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNpZmRlZiBDVVNUT01fU1BFQ1VMQVJfSUJMIFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICB2ZWMzIHNwZWN1bGFySUJMID0gY3ptX3NhbXBsZU9jdGFoZWRyYWxQcm9qZWN0aW9uKGdsdGZfc3BlY3VsYXJNYXAsIGdsdGZfc3BlY3VsYXJNYXBTaXplLCBjdWJlRGlyLCAgcm91Z2huZXNzICogZ2x0Zl9tYXhTcGVjdWxhckxPRCwgZ2x0Zl9tYXhTcGVjdWxhckxPRCk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjZWxzZSBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgdmVjMyBzcGVjdWxhcklCTCA9IGN6bV9zYW1wbGVPY3RhaGVkcmFsUHJvamVjdGlvbihjem1fc3BlY3VsYXJFbnZpcm9ubWVudE1hcHMsIGN6bV9zcGVjdWxhckVudmlyb25tZW50TWFwU2l6ZSwgY3ViZURpciwgIHJvdWdobmVzcyAqIGN6bV9zcGVjdWxhckVudmlyb25tZW50TWFwc01heGltdW1MT0QsIGN6bV9zcGVjdWxhckVudmlyb25tZW50TWFwc01heGltdW1MT0QpO1xcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiI2VuZGlmIFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHNwZWN1bGFySUJMICo9IEYgKiBicmRmTHV0LnggKyBicmRmTHV0Lnk7XFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIjZWxzZSBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB2ZWMzIHNwZWN1bGFySUJMID0gdmVjMygwLjApOyBcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiNlbmRpZiBcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICBcIiAgICBjb2xvciArPSBkaWZmdXNlSXJyYWRpYW5jZSAqIGRpZmZ1c2VDb2xvciArIHNwZWN1bGFyQ29sb3IgKiBzcGVjdWxhcklCTDtcXG5cIjtcblxuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiI2VuZGlmIFxcblwiO1xuICB9IGVsc2Uge1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIHZlYzMgY29sb3IgPSBiYXNlQ29sb3I7XFxuXCI7XG4gIH1cblxuICAvLyBJZ25vcmUgb2NjbHVzaW9uIGFuZCBlbWlzc2l2ZSB3aGVuIHVubGl0XG4gIGlmICghaXNVbmxpdCkge1xuICAgIGlmIChkZWZpbmVkKGdlbmVyYXRlZE1hdGVyaWFsVmFsdWVzLnVfb2NjbHVzaW9uVGV4dHVyZSkpIHtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgIFwiICAgIGNvbG9yICo9IHRleHR1cmUyRCh1X29jY2x1c2lvblRleHR1cmUsIFwiICtcbiAgICAgICAgb2NjbHVzaW9uVGV4Q29vcmQgK1xuICAgICAgICBcIikucjtcXG5cIjtcbiAgICB9XG4gICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9lbWlzc2l2ZVRleHR1cmUpKSB7XG4gICAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgICBcIiAgICB2ZWMzIGVtaXNzaXZlID0gU1JHQnRvTElORUFSMyh0ZXh0dXJlMkQodV9lbWlzc2l2ZVRleHR1cmUsIFwiICtcbiAgICAgICAgZW1pc3NpdmVUZXhDb29yZCArXG4gICAgICAgIFwiKS5yZ2IpO1xcblwiO1xuICAgICAgaWYgKGRlZmluZWQoZ2VuZXJhdGVkTWF0ZXJpYWxWYWx1ZXMudV9lbWlzc2l2ZUZhY3RvcikpIHtcbiAgICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZW1pc3NpdmUgKj0gdV9lbWlzc2l2ZUZhY3RvcjtcXG5cIjtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgIGNvbG9yICs9IGVtaXNzaXZlO1xcblwiO1xuICAgIH0gZWxzZSBpZiAoZGVmaW5lZChnZW5lcmF0ZWRNYXRlcmlhbFZhbHVlcy51X2VtaXNzaXZlRmFjdG9yKSkge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgY29sb3IgKz0gdV9lbWlzc2l2ZUZhY3RvcjtcXG5cIjtcbiAgICB9XG4gIH1cblxuICBpZiAoIWlzVW5saXQpIHtcbiAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBjb2xvciA9IGFwcGx5VG9uZW1hcHBpbmcoY29sb3IpO1xcblwiO1xuICB9XG5cbiAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgY29sb3IgPSBMSU5FQVJ0b1NSR0IoY29sb3IpO1xcblwiO1xuXG4gIGlmIChoYXNPdXRsaW5lKSB7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZmxvYXQgb3V0bGluZW5lc3MgPSBtYXgoXFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgICAgICB0ZXh0dXJlMkQodV9vdXRsaW5lVGV4dHVyZSwgdmVjMih2X291dGxpbmVDb29yZGluYXRlcy54LCAwLjUpKS5yLFxcblwiO1xuICAgIGZyYWdtZW50U2hhZGVyICs9IFwiICAgICAgICBtYXgoXFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgICAgICAgIHRleHR1cmUyRCh1X291dGxpbmVUZXh0dXJlLCB2ZWMyKHZfb3V0bGluZUNvb3JkaW5hdGVzLnksIDAuNSkpLnIsXFxuXCI7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz1cbiAgICAgIFwiICAgICAgICAgIHRleHR1cmUyRCh1X291dGxpbmVUZXh0dXJlLCB2ZWMyKHZfb3V0bGluZUNvb3JkaW5hdGVzLnosIDAuNSkpLnIpKTtcXG5cIjtcbiAgICBmcmFnbWVudFNoYWRlciArPVxuICAgICAgXCIgICAgY29sb3IgPSBtaXgoY29sb3IsIHZlYzMoMC4wLCAwLjAsIDAuMCksIG91dGxpbmVuZXNzKTtcXG5cIjtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKGFscGhhTW9kZSkpIHtcbiAgICBpZiAoYWxwaGFNb2RlID09PSBcIk1BU0tcIikge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgaWYgKGJhc2VDb2xvcldpdGhBbHBoYS5hIDwgdV9hbHBoYUN1dG9mZikge1xcblwiO1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgICAgIGRpc2NhcmQ7XFxuXCI7XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICB9XFxuXCI7XG4gICAgICBmcmFnbWVudFNoYWRlciArPSBcIiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLCAxLjApO1xcblwiO1xuICAgIH0gZWxzZSBpZiAoYWxwaGFNb2RlID09PSBcIkJMRU5EXCIpIHtcbiAgICAgIGZyYWdtZW50U2hhZGVyICs9XG4gICAgICAgIFwiICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIGJhc2VDb2xvcldpdGhBbHBoYS5hKTtcXG5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgMS4wKTtcXG5cIjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZnJhZ21lbnRTaGFkZXIgKz0gXCIgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgMS4wKTtcXG5cIjtcbiAgfVxuXG4gIGZyYWdtZW50U2hhZGVyICs9IFwifVxcblwiO1xuXG4gIC8vIEFkZCBzaGFkZXJzXG4gIHZhciB2ZXJ0ZXhTaGFkZXJJZCA9IGFkZFRvQXJyYXkoc2hhZGVycywge1xuICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLlZFUlRFWF9TSEFERVIsXG4gICAgZXh0cmFzOiB7XG4gICAgICBfcGlwZWxpbmU6IHtcbiAgICAgICAgc291cmNlOiB2ZXJ0ZXhTaGFkZXIsXG4gICAgICAgIGV4dGVuc2lvbjogXCIuZ2xzbFwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICB2YXIgZnJhZ21lbnRTaGFkZXJJZCA9IGFkZFRvQXJyYXkoc2hhZGVycywge1xuICAgIHR5cGU6IFdlYkdMQ29uc3RhbnRzLkZSQUdNRU5UX1NIQURFUixcbiAgICBleHRyYXM6IHtcbiAgICAgIF9waXBlbGluZToge1xuICAgICAgICBzb3VyY2U6IGZyYWdtZW50U2hhZGVyLFxuICAgICAgICBleHRlbnNpb246IFwiLmdsc2xcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQWRkIHByb2dyYW1cbiAgdmFyIHByb2dyYW1JZCA9IGFkZFRvQXJyYXkocHJvZ3JhbXMsIHtcbiAgICBmcmFnbWVudFNoYWRlcjogZnJhZ21lbnRTaGFkZXJJZCxcbiAgICB2ZXJ0ZXhTaGFkZXI6IHZlcnRleFNoYWRlcklkLFxuICB9KTtcblxuICB2YXIgdGVjaG5pcXVlSWQgPSBhZGRUb0FycmF5KHRlY2huaXF1ZXMsIHtcbiAgICBhdHRyaWJ1dGVzOiB0ZWNobmlxdWVBdHRyaWJ1dGVzLFxuICAgIHByb2dyYW06IHByb2dyYW1JZCxcbiAgICB1bmlmb3JtczogdGVjaG5pcXVlVW5pZm9ybXMsXG4gIH0pO1xuXG4gIHJldHVybiB0ZWNobmlxdWVJZDtcbn1cblxuZnVuY3Rpb24gZ2V0UEJSVmFsdWVUeXBlKHBhcmFtTmFtZSkge1xuICBpZiAocGFyYW1OYW1lLmluZGV4T2YoXCJPZmZzZXRcIikgIT09IC0xKSB7XG4gICAgcmV0dXJuIFdlYkdMQ29uc3RhbnRzLkZMT0FUX1ZFQzI7XG4gIH0gZWxzZSBpZiAocGFyYW1OYW1lLmluZGV4T2YoXCJSb3RhdGlvblwiKSAhPT0gLTEpIHtcbiAgICByZXR1cm4gV2ViR0xDb25zdGFudHMuRkxPQVQ7XG4gIH0gZWxzZSBpZiAocGFyYW1OYW1lLmluZGV4T2YoXCJTY2FsZVwiKSAhPT0gLTEpIHtcbiAgICByZXR1cm4gV2ViR0xDb25zdGFudHMuRkxPQVRfVkVDMjtcbiAgfSBlbHNlIGlmIChwYXJhbU5hbWUuaW5kZXhPZihcIlRleHR1cmVcIikgIT09IC0xKSB7XG4gICAgcmV0dXJuIFdlYkdMQ29uc3RhbnRzLlNBTVBMRVJfMkQ7XG4gIH1cblxuICBzd2l0Y2ggKHBhcmFtTmFtZSkge1xuICAgIGNhc2UgXCJ1X2Jhc2VDb2xvckZhY3RvclwiOlxuICAgICAgcmV0dXJuIFdlYkdMQ29uc3RhbnRzLkZMT0FUX1ZFQzQ7XG4gICAgY2FzZSBcInVfbWV0YWxsaWNGYWN0b3JcIjpcbiAgICAgIHJldHVybiBXZWJHTENvbnN0YW50cy5GTE9BVDtcbiAgICBjYXNlIFwidV9yb3VnaG5lc3NGYWN0b3JcIjpcbiAgICAgIHJldHVybiBXZWJHTENvbnN0YW50cy5GTE9BVDtcbiAgICBjYXNlIFwidV9lbWlzc2l2ZUZhY3RvclwiOlxuICAgICAgcmV0dXJuIFdlYkdMQ29uc3RhbnRzLkZMT0FUX1ZFQzM7XG4gICAgLy8gU3BlY3VsYXIgR2xvc3NpbmVzcyBUeXBlc1xuICAgIGNhc2UgXCJ1X2RpZmZ1c2VGYWN0b3JcIjpcbiAgICAgIHJldHVybiBXZWJHTENvbnN0YW50cy5GTE9BVF9WRUM0O1xuICAgIGNhc2UgXCJ1X3NwZWN1bGFyRmFjdG9yXCI6XG4gICAgICByZXR1cm4gV2ViR0xDb25zdGFudHMuRkxPQVRfVkVDMztcbiAgICBjYXNlIFwidV9nbG9zc2luZXNzRmFjdG9yXCI6XG4gICAgICByZXR1cm4gV2ViR0xDb25zdGFudHMuRkxPQVQ7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IHByb2Nlc3NQYnJNYXRlcmlhbHM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14503\n')},81154:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('//This file is automatically rebuilt by the Cesium build process.\n/* harmony default export */ __webpack_exports__["Z"] = ("#ifdef MRT\\n\\\n#extension GL_EXT_draw_buffers : enable\\n\\\n#endif\\n\\\n\\n\\\nuniform vec4 u_bgColor;\\n\\\nuniform sampler2D u_depthTexture;\\n\\\n\\n\\\nvarying vec2 v_textureCoordinates;\\n\\\n\\n\\\nvoid main()\\n\\\n{\\n\\\n    if (texture2D(u_depthTexture, v_textureCoordinates).r < 1.0)\\n\\\n    {\\n\\\n#ifdef MRT\\n\\\n        gl_FragData[0] = u_bgColor;\\n\\\n        gl_FragData[1] = vec4(u_bgColor.a);\\n\\\n#else\\n\\\n        gl_FragColor = u_bgColor;\\n\\\n#endif\\n\\\n        return;\\n\\\n    }\\n\\\n    \\n\\\n    discard;\\n\\\n}\\n\\\n");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODExNTQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSx5REFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QixpQ0FBaUM7QUFDakM7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLEtBQUs7QUFDTDtBQUNBLG1DQUFtQztBQUNuQywyQ0FBMkM7QUFDM0M7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxlQUFlO0FBQ2YsS0FBSztBQUNMO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRCxDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2hhZGVycy9BZGp1c3RUcmFuc2x1Y2VudEZTLmpzPzc5NGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy9UaGlzIGZpbGUgaXMgYXV0b21hdGljYWxseSByZWJ1aWx0IGJ5IHRoZSBDZXNpdW0gYnVpbGQgcHJvY2Vzcy5cbmV4cG9ydCBkZWZhdWx0IFwiI2lmZGVmIE1SVFxcblxcXG4jZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnMgOiBlbmFibGVcXG5cXFxuI2VuZGlmXFxuXFxcblxcblxcXG51bmlmb3JtIHZlYzQgdV9iZ0NvbG9yO1xcblxcXG51bmlmb3JtIHNhbXBsZXIyRCB1X2RlcHRoVGV4dHVyZTtcXG5cXFxuXFxuXFxcbnZhcnlpbmcgdmVjMiB2X3RleHR1cmVDb29yZGluYXRlcztcXG5cXFxuXFxuXFxcbnZvaWQgbWFpbigpXFxuXFxcbntcXG5cXFxuICAgIGlmICh0ZXh0dXJlMkQodV9kZXB0aFRleHR1cmUsIHZfdGV4dHVyZUNvb3JkaW5hdGVzKS5yIDwgMS4wKVxcblxcXG4gICAge1xcblxcXG4jaWZkZWYgTVJUXFxuXFxcbiAgICAgICAgZ2xfRnJhZ0RhdGFbMF0gPSB1X2JnQ29sb3I7XFxuXFxcbiAgICAgICAgZ2xfRnJhZ0RhdGFbMV0gPSB2ZWM0KHVfYmdDb2xvci5hKTtcXG5cXFxuI2Vsc2VcXG5cXFxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB1X2JnQ29sb3I7XFxuXFxcbiNlbmRpZlxcblxcXG4gICAgICAgIHJldHVybjtcXG5cXFxuICAgIH1cXG5cXFxuICAgIFxcblxcXG4gICAgZGlzY2FyZDtcXG5cXFxufVxcblxcXG5cIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///81154\n')}}]);