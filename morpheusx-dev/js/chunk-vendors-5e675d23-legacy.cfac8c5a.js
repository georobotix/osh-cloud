"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[3402],{70544:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ArcType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11491);\n/* harmony import */ var _arrayFill_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23401);\n/* harmony import */ var _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(88108);\n/* harmony import */ var _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(48243);\n/* harmony import */ var _Cartesian2_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60838);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(60216);\n/* harmony import */ var _Cartographic_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(51688);\n/* harmony import */ var _Check_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(66553);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(84828);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(12572);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(50491);\n/* harmony import */ var _EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(39043);\n/* harmony import */ var _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(74744);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(13616);\n/* harmony import */ var _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(26865);\n/* harmony import */ var _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(87379);\n/* harmony import */ var _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(57552);\n/* harmony import */ var _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(22832);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(99417);\n/* harmony import */ var _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(68201);\n/* harmony import */ var _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(38425);\n/* harmony import */ var _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(78284);\n/* harmony import */ var _Quaternion_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(87811);\n/* harmony import */ var _Rectangle_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(96190);\n/* harmony import */ var _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(67252);\n/* harmony import */ var _WindingOrder_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(32441);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar scratchCarto1 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\nvar scratchCarto2 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\nfunction adjustPosHeightsForNormal(position, p1, p2, ellipsoid) {\n  var carto1 = ellipsoid.cartesianToCartographic(position, scratchCarto1);\n  var height = carto1.height;\n  var p1Carto = ellipsoid.cartesianToCartographic(p1, scratchCarto2);\n  p1Carto.height = height;\n  ellipsoid.cartographicToCartesian(p1Carto, p1);\n\n  var p2Carto = ellipsoid.cartesianToCartographic(p2, scratchCarto2);\n  p2Carto.height = height - 100;\n  ellipsoid.cartographicToCartesian(p2Carto, p2);\n}\n\nvar scratchBoundingRectangle = new _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchPosition = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar scratchNormal = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar scratchTangent = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar scratchBitangent = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar p1Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar p2Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar scratchPerPosNormal = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar scratchPerPosTangent = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar scratchPerPosBitangent = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n\nvar appendTextureCoordinatesOrigin = new _Cartesian2_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar appendTextureCoordinatesCartesian2 = new _Cartesian2_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar appendTextureCoordinatesCartesian3 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar appendTextureCoordinatesQuaternion = new _Quaternion_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z();\nvar appendTextureCoordinatesMatrix3 = new _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z();\nvar tangentMatrixScratch = new _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z();\n\nfunction computeAttributes(options) {\n  var vertexFormat = options.vertexFormat;\n  var geometry = options.geometry;\n  var shadowVolume = options.shadowVolume;\n  var flatPositions = geometry.attributes.position.values;\n  var length = flatPositions.length;\n  var wall = options.wall;\n  var top = options.top || wall;\n  var bottom = options.bottom || wall;\n  if (\n    vertexFormat.st ||\n    vertexFormat.normal ||\n    vertexFormat.tangent ||\n    vertexFormat.bitangent ||\n    shadowVolume\n  ) {\n    // PERFORMANCE_IDEA: Compute before subdivision, then just interpolate during subdivision.\n    // PERFORMANCE_IDEA: Compute with createGeometryFromPositions() for fast path when there\'s no holes.\n    var boundingRectangle = options.boundingRectangle;\n    var tangentPlane = options.tangentPlane;\n    var ellipsoid = options.ellipsoid;\n    var stRotation = options.stRotation;\n    var perPositionHeight = options.perPositionHeight;\n\n    var origin = appendTextureCoordinatesOrigin;\n    origin.x = boundingRectangle.x;\n    origin.y = boundingRectangle.y;\n\n    var textureCoordinates = vertexFormat.st\n      ? new Float32Array(2 * (length / 3))\n      : undefined;\n    var normals;\n    if (vertexFormat.normal) {\n      if (perPositionHeight && top && !wall) {\n        normals = geometry.attributes.normal.values;\n      } else {\n        normals = new Float32Array(length);\n      }\n    }\n    var tangents = vertexFormat.tangent ? new Float32Array(length) : undefined;\n    var bitangents = vertexFormat.bitangent\n      ? new Float32Array(length)\n      : undefined;\n    var extrudeNormals = shadowVolume ? new Float32Array(length) : undefined;\n\n    var textureCoordIndex = 0;\n    var attrIndex = 0;\n\n    var normal = scratchNormal;\n    var tangent = scratchTangent;\n    var bitangent = scratchBitangent;\n    var recomputeNormal = true;\n\n    var textureMatrix = appendTextureCoordinatesMatrix3;\n    var tangentRotationMatrix = tangentMatrixScratch;\n    if (stRotation !== 0.0) {\n      var rotation = _Quaternion_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n        tangentPlane._plane.normal,\n        stRotation,\n        appendTextureCoordinatesQuaternion\n      );\n      textureMatrix = _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].fromQuaternion */ .Z.fromQuaternion(rotation, textureMatrix);\n\n      rotation = _Quaternion_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n        tangentPlane._plane.normal,\n        -stRotation,\n        appendTextureCoordinatesQuaternion\n      );\n      tangentRotationMatrix = _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].fromQuaternion */ .Z.fromQuaternion(\n        rotation,\n        tangentRotationMatrix\n      );\n    } else {\n      textureMatrix = _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].clone */ .Z.clone(_Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].IDENTITY */ .Z.IDENTITY, textureMatrix);\n      tangentRotationMatrix = _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].clone */ .Z.clone(\n        _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].IDENTITY */ .Z.IDENTITY,\n        tangentRotationMatrix\n      );\n    }\n\n    var bottomOffset = 0;\n    var bottomOffset2 = 0;\n\n    if (top && bottom) {\n      bottomOffset = length / 2;\n      bottomOffset2 = length / 3;\n\n      length /= 2;\n    }\n\n    for (var i = 0; i < length; i += 3) {\n      var position = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].fromArray */ .Z.fromArray(\n        flatPositions,\n        i,\n        appendTextureCoordinatesCartesian3\n      );\n\n      if (vertexFormat.st) {\n        var p = _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].multiplyByVector */ .Z.multiplyByVector(\n          textureMatrix,\n          position,\n          scratchPosition\n        );\n        p = ellipsoid.scaleToGeodeticSurface(p, p);\n        var st = tangentPlane.projectPointOntoPlane(\n          p,\n          appendTextureCoordinatesCartesian2\n        );\n        _Cartesian2_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(st, origin, st);\n\n        var stx = _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].clamp */ .Z.clamp(st.x / boundingRectangle.width, 0, 1);\n        var sty = _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].clamp */ .Z.clamp(st.y / boundingRectangle.height, 0, 1);\n        if (bottom) {\n          textureCoordinates[textureCoordIndex + bottomOffset2] = stx;\n          textureCoordinates[textureCoordIndex + 1 + bottomOffset2] = sty;\n        }\n        if (top) {\n          textureCoordinates[textureCoordIndex] = stx;\n          textureCoordinates[textureCoordIndex + 1] = sty;\n        }\n\n        textureCoordIndex += 2;\n      }\n\n      if (\n        vertexFormat.normal ||\n        vertexFormat.tangent ||\n        vertexFormat.bitangent ||\n        shadowVolume\n      ) {\n        var attrIndex1 = attrIndex + 1;\n        var attrIndex2 = attrIndex + 2;\n\n        if (wall) {\n          if (i + 3 < length) {\n            var p1 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].fromArray */ .Z.fromArray(flatPositions, i + 3, p1Scratch);\n\n            if (recomputeNormal) {\n              var p2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].fromArray */ .Z.fromArray(\n                flatPositions,\n                i + length,\n                p2Scratch\n              );\n              if (perPositionHeight) {\n                adjustPosHeightsForNormal(position, p1, p2, ellipsoid);\n              }\n              _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].subtract */ .Z.subtract(p1, position, p1);\n              _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].subtract */ .Z.subtract(p2, position, p2);\n              normal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].normalize */ .Z.normalize(\n                _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].cross */ .Z.cross(p2, p1, normal),\n                normal\n              );\n              recomputeNormal = false;\n            }\n\n            if (_Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(p1, position, _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].EPSILON10 */ .Z.EPSILON10)) {\n              // if we\'ve reached a corner\n              recomputeNormal = true;\n            }\n          }\n\n          if (vertexFormat.tangent || vertexFormat.bitangent) {\n            bitangent = ellipsoid.geodeticSurfaceNormal(position, bitangent);\n            if (vertexFormat.tangent) {\n              tangent = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].normalize */ .Z.normalize(\n                _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].cross */ .Z.cross(bitangent, normal, tangent),\n                tangent\n              );\n            }\n          }\n        } else {\n          normal = ellipsoid.geodeticSurfaceNormal(position, normal);\n          if (vertexFormat.tangent || vertexFormat.bitangent) {\n            if (perPositionHeight) {\n              scratchPerPosNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].fromArray */ .Z.fromArray(\n                normals,\n                attrIndex,\n                scratchPerPosNormal\n              );\n              scratchPerPosTangent = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].cross */ .Z.cross(\n                _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].UNIT_Z */ .Z.UNIT_Z,\n                scratchPerPosNormal,\n                scratchPerPosTangent\n              );\n              scratchPerPosTangent = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].normalize */ .Z.normalize(\n                _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].multiplyByVector */ .Z.multiplyByVector(\n                  tangentRotationMatrix,\n                  scratchPerPosTangent,\n                  scratchPerPosTangent\n                ),\n                scratchPerPosTangent\n              );\n              if (vertexFormat.bitangent) {\n                scratchPerPosBitangent = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].normalize */ .Z.normalize(\n                  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].cross */ .Z.cross(\n                    scratchPerPosNormal,\n                    scratchPerPosTangent,\n                    scratchPerPosBitangent\n                  ),\n                  scratchPerPosBitangent\n                );\n              }\n            }\n\n            tangent = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].cross */ .Z.cross(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].UNIT_Z */ .Z.UNIT_Z, normal, tangent);\n            tangent = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].normalize */ .Z.normalize(\n              _Matrix3_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].multiplyByVector */ .Z.multiplyByVector(tangentRotationMatrix, tangent, tangent),\n              tangent\n            );\n            if (vertexFormat.bitangent) {\n              bitangent = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].normalize */ .Z.normalize(\n                _Cartesian3_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].cross */ .Z.cross(normal, tangent, bitangent),\n                bitangent\n              );\n            }\n          }\n        }\n\n        if (vertexFormat.normal) {\n          if (options.wall) {\n            normals[attrIndex + bottomOffset] = normal.x;\n            normals[attrIndex1 + bottomOffset] = normal.y;\n            normals[attrIndex2 + bottomOffset] = normal.z;\n          } else if (bottom) {\n            normals[attrIndex + bottomOffset] = -normal.x;\n            normals[attrIndex1 + bottomOffset] = -normal.y;\n            normals[attrIndex2 + bottomOffset] = -normal.z;\n          }\n\n          if ((top && !perPositionHeight) || wall) {\n            normals[attrIndex] = normal.x;\n            normals[attrIndex1] = normal.y;\n            normals[attrIndex2] = normal.z;\n          }\n        }\n\n        if (shadowVolume) {\n          if (wall) {\n            normal = ellipsoid.geodeticSurfaceNormal(position, normal);\n          }\n          extrudeNormals[attrIndex + bottomOffset] = -normal.x;\n          extrudeNormals[attrIndex1 + bottomOffset] = -normal.y;\n          extrudeNormals[attrIndex2 + bottomOffset] = -normal.z;\n        }\n\n        if (vertexFormat.tangent) {\n          if (options.wall) {\n            tangents[attrIndex + bottomOffset] = tangent.x;\n            tangents[attrIndex1 + bottomOffset] = tangent.y;\n            tangents[attrIndex2 + bottomOffset] = tangent.z;\n          } else if (bottom) {\n            tangents[attrIndex + bottomOffset] = -tangent.x;\n            tangents[attrIndex1 + bottomOffset] = -tangent.y;\n            tangents[attrIndex2 + bottomOffset] = -tangent.z;\n          }\n\n          if (top) {\n            if (perPositionHeight) {\n              tangents[attrIndex] = scratchPerPosTangent.x;\n              tangents[attrIndex1] = scratchPerPosTangent.y;\n              tangents[attrIndex2] = scratchPerPosTangent.z;\n            } else {\n              tangents[attrIndex] = tangent.x;\n              tangents[attrIndex1] = tangent.y;\n              tangents[attrIndex2] = tangent.z;\n            }\n          }\n        }\n\n        if (vertexFormat.bitangent) {\n          if (bottom) {\n            bitangents[attrIndex + bottomOffset] = bitangent.x;\n            bitangents[attrIndex1 + bottomOffset] = bitangent.y;\n            bitangents[attrIndex2 + bottomOffset] = bitangent.z;\n          }\n          if (top) {\n            if (perPositionHeight) {\n              bitangents[attrIndex] = scratchPerPosBitangent.x;\n              bitangents[attrIndex1] = scratchPerPosBitangent.y;\n              bitangents[attrIndex2] = scratchPerPosBitangent.z;\n            } else {\n              bitangents[attrIndex] = bitangent.x;\n              bitangents[attrIndex1] = bitangent.y;\n              bitangents[attrIndex2] = bitangent.z;\n            }\n          }\n        }\n        attrIndex += 3;\n      }\n    }\n\n    if (vertexFormat.st) {\n      geometry.attributes.st = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        componentsPerAttribute: 2,\n        values: textureCoordinates,\n      });\n    }\n\n    if (vertexFormat.normal) {\n      geometry.attributes.normal = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        componentsPerAttribute: 3,\n        values: normals,\n      });\n    }\n\n    if (vertexFormat.tangent) {\n      geometry.attributes.tangent = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        componentsPerAttribute: 3,\n        values: tangents,\n      });\n    }\n\n    if (vertexFormat.bitangent) {\n      geometry.attributes.bitangent = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        componentsPerAttribute: 3,\n        values: bitangents,\n      });\n    }\n\n    if (shadowVolume) {\n      geometry.attributes.extrudeDirection = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].FLOAT */ .Z.FLOAT,\n        componentsPerAttribute: 3,\n        values: extrudeNormals,\n      });\n    }\n  }\n\n  if (options.extrude && (0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(options.offsetAttribute)) {\n    var size = flatPositions.length / 3;\n    var offsetAttribute = new Uint8Array(size);\n\n    if (options.offsetAttribute === _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].TOP */ .Z.TOP) {\n      if ((top && bottom) || wall) {\n        offsetAttribute = (0,_arrayFill_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(offsetAttribute, 1, 0, size / 2);\n      } else if (top) {\n        offsetAttribute = (0,_arrayFill_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(offsetAttribute, 1);\n      }\n    } else {\n      var offsetValue =\n        options.offsetAttribute === _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].NONE */ .Z.NONE ? 0 : 1;\n      offsetAttribute = (0,_arrayFill_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(offsetAttribute, offsetValue);\n    }\n\n    geometry.attributes.applyOffset = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n      componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n      componentsPerAttribute: 1,\n      values: offsetAttribute,\n    });\n  }\n\n  return geometry;\n}\n\nvar startCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\nvar endCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\nvar idlCross = {\n  westOverIDL: 0.0,\n  eastOverIDL: 0.0,\n};\nvar ellipsoidGeodesic = new _EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\nfunction computeRectangle(positions, ellipsoid, arcType, granularity, result) {\n  result = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(result, new _Rectangle_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z());\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(positions) || positions.length < 3) {\n    result.west = 0.0;\n    result.north = 0.0;\n    result.south = 0.0;\n    result.east = 0.0;\n    return result;\n  }\n\n  if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n    return _Rectangle_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].fromCartesianArray */ .Z.fromCartesianArray(positions, ellipsoid, result);\n  }\n\n  if (!ellipsoidGeodesic.ellipsoid.equals(ellipsoid)) {\n    ellipsoidGeodesic = new _EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(undefined, undefined, ellipsoid);\n  }\n\n  result.west = Number.POSITIVE_INFINITY;\n  result.east = Number.NEGATIVE_INFINITY;\n  result.south = Number.POSITIVE_INFINITY;\n  result.north = Number.NEGATIVE_INFINITY;\n\n  idlCross.westOverIDL = Number.POSITIVE_INFINITY;\n  idlCross.eastOverIDL = Number.NEGATIVE_INFINITY;\n\n  var inverseChordLength =\n    1.0 / _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].chordLength */ .Z.chordLength(granularity, ellipsoid.maximumRadius);\n  var positionsLength = positions.length;\n  var endCartographic = ellipsoid.cartesianToCartographic(\n    positions[0],\n    endCartographicScratch\n  );\n  var startCartographic = startCartographicScratch;\n  var swap;\n\n  for (var i = 1; i < positionsLength; i++) {\n    swap = startCartographic;\n    startCartographic = endCartographic;\n    endCartographic = ellipsoid.cartesianToCartographic(positions[i], swap);\n    ellipsoidGeodesic.setEndPoints(startCartographic, endCartographic);\n    interpolateAndGrowRectangle(\n      ellipsoidGeodesic,\n      inverseChordLength,\n      result,\n      idlCross\n    );\n  }\n\n  swap = startCartographic;\n  startCartographic = endCartographic;\n  endCartographic = ellipsoid.cartesianToCartographic(positions[0], swap);\n  ellipsoidGeodesic.setEndPoints(startCartographic, endCartographic);\n  interpolateAndGrowRectangle(\n    ellipsoidGeodesic,\n    inverseChordLength,\n    result,\n    idlCross\n  );\n\n  if (result.east - result.west > idlCross.eastOverIDL - idlCross.westOverIDL) {\n    result.west = idlCross.westOverIDL;\n    result.east = idlCross.eastOverIDL;\n\n    if (result.east > _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].PI */ .Z.PI) {\n      result.east = result.east - _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    }\n    if (result.west > _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].PI */ .Z.PI) {\n      result.west = result.west - _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    }\n  }\n\n  return result;\n}\n\nvar interpolatedCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\nfunction interpolateAndGrowRectangle(\n  ellipsoidGeodesic,\n  inverseChordLength,\n  result,\n  idlCross\n) {\n  var segmentLength = ellipsoidGeodesic.surfaceDistance;\n\n  var numPoints = Math.ceil(segmentLength * inverseChordLength);\n  var subsegmentDistance =\n    numPoints > 0 ? segmentLength / (numPoints - 1) : Number.POSITIVE_INFINITY;\n  var interpolationDistance = 0.0;\n\n  for (var i = 0; i < numPoints; i++) {\n    var interpolatedCartographic = ellipsoidGeodesic.interpolateUsingSurfaceDistance(\n      interpolationDistance,\n      interpolatedCartographicScratch\n    );\n    interpolationDistance += subsegmentDistance;\n    var longitude = interpolatedCartographic.longitude;\n    var latitude = interpolatedCartographic.latitude;\n\n    result.west = Math.min(result.west, longitude);\n    result.east = Math.max(result.east, longitude);\n    result.south = Math.min(result.south, latitude);\n    result.north = Math.max(result.north, latitude);\n\n    var lonAdjusted =\n      longitude >= 0 ? longitude : longitude + _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    idlCross.westOverIDL = Math.min(idlCross.westOverIDL, lonAdjusted);\n    idlCross.eastOverIDL = Math.max(idlCross.eastOverIDL, lonAdjusted);\n  }\n}\n\nvar createGeometryFromPositionsExtrudedPositions = [];\n\nfunction createGeometryFromPositionsExtruded(\n  ellipsoid,\n  polygon,\n  granularity,\n  hierarchy,\n  perPositionHeight,\n  closeTop,\n  closeBottom,\n  vertexFormat,\n  arcType\n) {\n  var geos = {\n    walls: [],\n  };\n  var i;\n\n  if (closeTop || closeBottom) {\n    var topGeo = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].createGeometryFromPositions */ .Z.createGeometryFromPositions(\n      ellipsoid,\n      polygon,\n      granularity,\n      perPositionHeight,\n      vertexFormat,\n      arcType\n    );\n\n    var edgePoints = topGeo.attributes.position.values;\n    var indices = topGeo.indices;\n    var numPositions;\n    var newIndices;\n\n    if (closeTop && closeBottom) {\n      var topBottomPositions = edgePoints.concat(edgePoints);\n\n      numPositions = topBottomPositions.length / 3;\n\n      newIndices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createTypedArray */ .Z.createTypedArray(\n        numPositions,\n        indices.length * 2\n      );\n      newIndices.set(indices);\n      var ilength = indices.length;\n\n      var length = numPositions / 2;\n\n      for (i = 0; i < ilength; i += 3) {\n        var i0 = newIndices[i] + length;\n        var i1 = newIndices[i + 1] + length;\n        var i2 = newIndices[i + 2] + length;\n\n        newIndices[i + ilength] = i2;\n        newIndices[i + 1 + ilength] = i1;\n        newIndices[i + 2 + ilength] = i0;\n      }\n\n      topGeo.attributes.position.values = topBottomPositions;\n      if (perPositionHeight && vertexFormat.normal) {\n        var normals = topGeo.attributes.normal.values;\n        topGeo.attributes.normal.values = new Float32Array(\n          topBottomPositions.length\n        );\n        topGeo.attributes.normal.values.set(normals);\n      }\n      topGeo.indices = newIndices;\n    } else if (closeBottom) {\n      numPositions = edgePoints.length / 3;\n      newIndices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createTypedArray */ .Z.createTypedArray(numPositions, indices.length);\n\n      for (i = 0; i < indices.length; i += 3) {\n        newIndices[i] = indices[i + 2];\n        newIndices[i + 1] = indices[i + 1];\n        newIndices[i + 2] = indices[i];\n      }\n\n      topGeo.indices = newIndices;\n    }\n\n    geos.topAndBottom = new _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n      geometry: topGeo,\n    });\n  }\n\n  var outerRing = hierarchy.outerRing;\n  var tangentPlane = _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].fromPoints */ .Z.fromPoints(outerRing, ellipsoid);\n  var positions2D = tangentPlane.projectPointsOntoPlane(\n    outerRing,\n    createGeometryFromPositionsExtrudedPositions\n  );\n\n  var windingOrder = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(positions2D);\n  if (windingOrder === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE) {\n    outerRing = outerRing.slice().reverse();\n  }\n\n  var wallGeo = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].computeWallGeometry */ .Z.computeWallGeometry(\n    outerRing,\n    ellipsoid,\n    granularity,\n    perPositionHeight,\n    arcType\n  );\n  geos.walls.push(\n    new _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n      geometry: wallGeo,\n    })\n  );\n\n  var holes = hierarchy.holes;\n  for (i = 0; i < holes.length; i++) {\n    var hole = holes[i];\n\n    tangentPlane = _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].fromPoints */ .Z.fromPoints(hole, ellipsoid);\n    positions2D = tangentPlane.projectPointsOntoPlane(\n      hole,\n      createGeometryFromPositionsExtrudedPositions\n    );\n\n    windingOrder = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(positions2D);\n    if (windingOrder === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].COUNTER_CLOCKWISE */ .Z.COUNTER_CLOCKWISE) {\n      hole = hole.slice().reverse();\n    }\n\n    wallGeo = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].computeWallGeometry */ .Z.computeWallGeometry(\n      hole,\n      ellipsoid,\n      granularity,\n      perPositionHeight,\n      arcType\n    );\n    geos.walls.push(\n      new _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n        geometry: wallGeo,\n      })\n    );\n  }\n\n  return geos;\n}\n\n/**\n * A description of a polygon on the ellipsoid. The polygon is defined by a polygon hierarchy. Polygon geometry can be rendered with both {@link Primitive} and {@link GroundPrimitive}.\n *\n * @alias PolygonGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {PolygonHierarchy} options.polygonHierarchy A polygon hierarchy that can include holes.\n * @param {Number} [options.height=0.0] The distance in meters between the polygon and the ellipsoid surface.\n * @param {Number} [options.extrudedHeight] The distance in meters between the polygon\'s extruded face and the ellipsoid surface.\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n * @param {Number} [options.stRotation=0.0] The rotation of the texture coordinates, in radians. A positive rotation is counter-clockwise.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Boolean} [options.perPositionHeight=false] Use the height of options.positions for each position instead of using options.height to determine the height.\n * @param {Boolean} [options.closeTop=true] When false, leaves off the top of an extruded polygon open.\n * @param {Boolean} [options.closeBottom=true] When false, leaves off the bottom of an extruded polygon open.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of line the polygon edges must follow. Valid options are {@link ArcType.GEODESIC} and {@link ArcType.RHUMB}.\n *\n * @see PolygonGeometry#createGeometry\n * @see PolygonGeometry#fromPositions\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Polygon.html|Cesium Sandcastle Polygon Demo}\n *\n * @example\n * // 1. create a polygon from points\n * var polygon = new Cesium.PolygonGeometry({\n *   polygonHierarchy : new Cesium.PolygonHierarchy(\n *     Cesium.Cartesian3.fromDegreesArray([\n *       -72.0, 40.0,\n *       -70.0, 35.0,\n *       -75.0, 30.0,\n *       -70.0, 30.0,\n *       -68.0, 40.0\n *     ])\n *   )\n * });\n * var geometry = Cesium.PolygonGeometry.createGeometry(polygon);\n *\n * // 2. create a nested polygon with holes\n * var polygonWithHole = new Cesium.PolygonGeometry({\n *   polygonHierarchy : new Cesium.PolygonHierarchy(\n *     Cesium.Cartesian3.fromDegreesArray([\n *       -109.0, 30.0,\n *       -95.0, 30.0,\n *       -95.0, 40.0,\n *       -109.0, 40.0\n *     ]),\n *     [new Cesium.PolygonHierarchy(\n *       Cesium.Cartesian3.fromDegreesArray([\n *         -107.0, 31.0,\n *         -107.0, 39.0,\n *         -97.0, 39.0,\n *         -97.0, 31.0\n *       ]),\n *       [new Cesium.PolygonHierarchy(\n *         Cesium.Cartesian3.fromDegreesArray([\n *           -105.0, 33.0,\n *           -99.0, 33.0,\n *           -99.0, 37.0,\n *           -105.0, 37.0\n *         ]),\n *         [new Cesium.PolygonHierarchy(\n *           Cesium.Cartesian3.fromDegreesArray([\n *             -103.0, 34.0,\n *             -101.0, 34.0,\n *             -101.0, 36.0,\n *             -103.0, 36.0\n *           ])\n *         )]\n *       )]\n *     )]\n *   )\n * });\n * var geometry = Cesium.PolygonGeometry.createGeometry(polygonWithHole);\n *\n * // 3. create extruded polygon\n * var extrudedPolygon = new Cesium.PolygonGeometry({\n *   polygonHierarchy : new Cesium.PolygonHierarchy(\n *     Cesium.Cartesian3.fromDegreesArray([\n *       -72.0, 40.0,\n *       -70.0, 35.0,\n *       -75.0, 30.0,\n *       -70.0, 30.0,\n *       -68.0, 40.0\n *     ])\n *   ),\n *   extrudedHeight: 300000\n * });\n * var geometry = Cesium.PolygonGeometry.createGeometry(extrudedPolygon);\n */\nfunction PolygonGeometry(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].typeOf.object */ .Z.typeOf.object("options", options);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].typeOf.object */ .Z.typeOf.object("options.polygonHierarchy", options.polygonHierarchy);\n  if (\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(options.perPositionHeight) &&\n    options.perPositionHeight &&\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(options.height)\n  ) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(\n      "Cannot use both options.perPositionHeight and options.height"\n    );\n  }\n  if (\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(options.arcType) &&\n    options.arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC &&\n    options.arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB\n  ) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(\n      "Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var polygonHierarchy = options.polygonHierarchy;\n  var vertexFormat = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.vertexFormat, _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].DEFAULT */ .Z.DEFAULT);\n  var ellipsoid = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].WGS84 */ .Z.WGS84);\n  var granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n    options.granularity,\n    _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  );\n  var stRotation = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.stRotation, 0.0);\n  var perPositionHeight = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.perPositionHeight, false);\n  var perPositionHeightExtrude =\n    perPositionHeight && (0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(options.extrudedHeight);\n  var height = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.height, 0.0);\n  var extrudedHeight = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.extrudedHeight, height);\n\n  if (!perPositionHeightExtrude) {\n    var h = Math.max(height, extrudedHeight);\n    extrudedHeight = Math.min(height, extrudedHeight);\n    height = h;\n  }\n\n  this._vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].clone */ .Z.clone(vertexFormat);\n  this._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].clone */ .Z.clone(ellipsoid);\n  this._granularity = granularity;\n  this._stRotation = stRotation;\n  this._height = height;\n  this._extrudedHeight = extrudedHeight;\n  this._closeTop = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.closeTop, true);\n  this._closeBottom = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.closeBottom, true);\n  this._polygonHierarchy = polygonHierarchy;\n  this._perPositionHeight = perPositionHeight;\n  this._perPositionHeightExtrude = perPositionHeightExtrude;\n  this._shadowVolume = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.shadowVolume, false);\n  this._workerName = "createPolygonGeometry";\n  this._offsetAttribute = options.offsetAttribute;\n  this._arcType = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.arcType, _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC);\n\n  this._rectangle = undefined;\n  this._textureCoordinateRotationPoints = undefined;\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength =\n    _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].computeHierarchyPackedLength */ .Z.computeHierarchyPackedLength(polygonHierarchy) +\n    _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].packedLength */ .Z.packedLength +\n    _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].packedLength */ .Z.packedLength +\n    12;\n}\n\n/**\n * A description of a polygon from an array of positions. Polygon geometry can be rendered with both {@link Primitive} and {@link GroundPrimitive}.\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of positions that defined the corner points of the polygon.\n * @param {Number} [options.height=0.0] The height of the polygon.\n * @param {Number} [options.extrudedHeight] The height of the polygon extrusion.\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n * @param {Number} [options.stRotation=0.0] The rotation of the texture coordinates, in radians. A positive rotation is counter-clockwise.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Boolean} [options.perPositionHeight=false] Use the height of options.positions for each position instead of using options.height to determine the height.\n * @param {Boolean} [options.closeTop=true] When false, leaves off the top of an extruded polygon open.\n * @param {Boolean} [options.closeBottom=true] When false, leaves off the bottom of an extruded polygon open.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of line the polygon edges must follow. Valid options are {@link ArcType.GEODESIC} and {@link ArcType.RHUMB}.\n * @returns {PolygonGeometry}\n *\n *\n * @example\n * // create a polygon from points\n * var polygon = Cesium.PolygonGeometry.fromPositions({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     -72.0, 40.0,\n *     -70.0, 35.0,\n *     -75.0, 30.0,\n *     -70.0, 30.0,\n *     -68.0, 40.0\n *   ])\n * });\n * var geometry = Cesium.PolygonGeometry.createGeometry(polygon);\n *\n * @see PolygonGeometry#createGeometry\n */\nPolygonGeometry.fromPositions = function (options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].defined */ .Z.defined("options.positions", options.positions);\n  //>>includeEnd(\'debug\');\n\n  var newOptions = {\n    polygonHierarchy: {\n      positions: options.positions,\n    },\n    height: options.height,\n    extrudedHeight: options.extrudedHeight,\n    vertexFormat: options.vertexFormat,\n    stRotation: options.stRotation,\n    ellipsoid: options.ellipsoid,\n    granularity: options.granularity,\n    perPositionHeight: options.perPositionHeight,\n    closeTop: options.closeTop,\n    closeBottom: options.closeBottom,\n    offsetAttribute: options.offsetAttribute,\n    arcType: options.arcType,\n  };\n  return new PolygonGeometry(newOptions);\n};\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {PolygonGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nPolygonGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].typeOf.object */ .Z.typeOf.object("value", value);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].defined */ .Z.defined("array", array);\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(startingIndex, 0);\n\n  startingIndex = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].packPolygonHierarchy */ .Z.packPolygonHierarchy(\n    value._polygonHierarchy,\n    array,\n    startingIndex\n  );\n\n  _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].pack */ .Z.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].packedLength */ .Z.packedLength;\n\n  _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].pack */ .Z.pack(value._vertexFormat, array, startingIndex);\n  startingIndex += _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].packedLength */ .Z.packedLength;\n\n  array[startingIndex++] = value._height;\n  array[startingIndex++] = value._extrudedHeight;\n  array[startingIndex++] = value._granularity;\n  array[startingIndex++] = value._stRotation;\n  array[startingIndex++] = value._perPositionHeightExtrude ? 1.0 : 0.0;\n  array[startingIndex++] = value._perPositionHeight ? 1.0 : 0.0;\n  array[startingIndex++] = value._closeTop ? 1.0 : 0.0;\n  array[startingIndex++] = value._closeBottom ? 1.0 : 0.0;\n  array[startingIndex++] = value._shadowVolume ? 1.0 : 0.0;\n  array[startingIndex++] = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(value._offsetAttribute, -1);\n  array[startingIndex++] = value._arcType;\n  array[startingIndex] = value.packedLength;\n\n  return array;\n};\n\nvar scratchEllipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].clone */ .Z.clone(_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].UNIT_SPHERE */ .Z.UNIT_SPHERE);\nvar scratchVertexFormat = new _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z();\n\n//Only used to avoid inability to default construct.\nvar dummyOptions = {\n  polygonHierarchy: {},\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {PolygonGeometry} [result] The object into which to store the result.\n */\nPolygonGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].defined */ .Z.defined("array", array);\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var polygonHierarchy = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].unpackPolygonHierarchy */ .Z.unpackPolygonHierarchy(\n    array,\n    startingIndex\n  );\n  startingIndex = polygonHierarchy.startingIndex;\n  delete polygonHierarchy.startingIndex;\n\n  var ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].unpack */ .Z.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].packedLength */ .Z.packedLength;\n\n  var vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].unpack */ .Z.unpack(\n    array,\n    startingIndex,\n    scratchVertexFormat\n  );\n  startingIndex += _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].packedLength */ .Z.packedLength;\n\n  var height = array[startingIndex++];\n  var extrudedHeight = array[startingIndex++];\n  var granularity = array[startingIndex++];\n  var stRotation = array[startingIndex++];\n  var perPositionHeightExtrude = array[startingIndex++] === 1.0;\n  var perPositionHeight = array[startingIndex++] === 1.0;\n  var closeTop = array[startingIndex++] === 1.0;\n  var closeBottom = array[startingIndex++] === 1.0;\n  var shadowVolume = array[startingIndex++] === 1.0;\n  var offsetAttribute = array[startingIndex++];\n  var arcType = array[startingIndex++];\n  var packedLength = array[startingIndex];\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(result)) {\n    result = new PolygonGeometry(dummyOptions);\n  }\n\n  result._polygonHierarchy = polygonHierarchy;\n  result._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].clone */ .Z.clone(ellipsoid, result._ellipsoid);\n  result._vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].clone */ .Z.clone(vertexFormat, result._vertexFormat);\n  result._height = height;\n  result._extrudedHeight = extrudedHeight;\n  result._granularity = granularity;\n  result._stRotation = stRotation;\n  result._perPositionHeightExtrude = perPositionHeightExtrude;\n  result._perPositionHeight = perPositionHeight;\n  result._closeTop = closeTop;\n  result._closeBottom = closeBottom;\n  result._shadowVolume = shadowVolume;\n  result._offsetAttribute =\n    offsetAttribute === -1 ? undefined : offsetAttribute;\n  result._arcType = arcType;\n  result.packedLength = packedLength;\n  return result;\n};\n\n/**\n * Returns the bounding rectangle given the provided options\n *\n * @param {Object} options Object with the following properties:\n * @param {PolygonHierarchy} options.polygonHierarchy A polygon hierarchy that can include holes.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions sampled.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of line the polygon edges must follow. Valid options are {@link ArcType.GEODESIC} and {@link ArcType.RHUMB}.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n * @param {Rectangle} [result] An object in which to store the result.\n *\n * @returns {Rectangle} The result rectangle\n */\nPolygonGeometry.computeRectangle = function (options, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].typeOf.object */ .Z.typeOf.object("options", options);\n  _Check_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].typeOf.object */ .Z.typeOf.object("options.polygonHierarchy", options.polygonHierarchy);\n  //>>includeEnd(\'debug\');\n\n  var granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(\n    options.granularity,\n    _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  );\n  var arcType = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.arcType, _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC);\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC && arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(\n      "Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var polygonHierarchy = options.polygonHierarchy;\n  var ellipsoid = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].WGS84 */ .Z.WGS84);\n\n  return computeRectangle(\n    polygonHierarchy.positions,\n    ellipsoid,\n    arcType,\n    granularity,\n    result\n  );\n};\n\n/**\n * Computes the geometric representation of a polygon, including its vertices, indices, and a bounding sphere.\n *\n * @param {PolygonGeometry} polygonGeometry A description of the polygon.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nPolygonGeometry.createGeometry = function (polygonGeometry) {\n  var vertexFormat = polygonGeometry._vertexFormat;\n  var ellipsoid = polygonGeometry._ellipsoid;\n  var granularity = polygonGeometry._granularity;\n  var stRotation = polygonGeometry._stRotation;\n  var polygonHierarchy = polygonGeometry._polygonHierarchy;\n  var perPositionHeight = polygonGeometry._perPositionHeight;\n  var closeTop = polygonGeometry._closeTop;\n  var closeBottom = polygonGeometry._closeBottom;\n  var arcType = polygonGeometry._arcType;\n\n  var outerPositions = polygonHierarchy.positions;\n  if (outerPositions.length < 3) {\n    return;\n  }\n\n  var tangentPlane = _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].fromPoints */ .Z.fromPoints(\n    outerPositions,\n    ellipsoid\n  );\n\n  var results = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].polygonsFromHierarchy */ .Z.polygonsFromHierarchy(\n    polygonHierarchy,\n    tangentPlane.projectPointsOntoPlane.bind(tangentPlane),\n    !perPositionHeight,\n    ellipsoid\n  );\n\n  var hierarchy = results.hierarchy;\n  var polygons = results.polygons;\n\n  if (hierarchy.length === 0) {\n    return;\n  }\n\n  outerPositions = hierarchy[0].outerRing;\n  var boundingRectangle = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].computeBoundingRectangle */ .Z.computeBoundingRectangle(\n    tangentPlane.plane.normal,\n    tangentPlane.projectPointOntoPlane.bind(tangentPlane),\n    outerPositions,\n    stRotation,\n    scratchBoundingRectangle\n  );\n\n  var geometries = [];\n\n  var height = polygonGeometry._height;\n  var extrudedHeight = polygonGeometry._extrudedHeight;\n  var extrude =\n    polygonGeometry._perPositionHeightExtrude ||\n    !_Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(height, extrudedHeight, 0, _Math_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].EPSILON2 */ .Z.EPSILON2);\n\n  var options = {\n    perPositionHeight: perPositionHeight,\n    vertexFormat: vertexFormat,\n    geometry: undefined,\n    tangentPlane: tangentPlane,\n    boundingRectangle: boundingRectangle,\n    ellipsoid: ellipsoid,\n    stRotation: stRotation,\n    bottom: false,\n    top: true,\n    wall: false,\n    extrude: false,\n    arcType: arcType,\n  };\n\n  var i;\n\n  if (extrude) {\n    options.extrude = true;\n    options.top = closeTop;\n    options.bottom = closeBottom;\n    options.shadowVolume = polygonGeometry._shadowVolume;\n    options.offsetAttribute = polygonGeometry._offsetAttribute;\n    for (i = 0; i < polygons.length; i++) {\n      var splitGeometry = createGeometryFromPositionsExtruded(\n        ellipsoid,\n        polygons[i],\n        granularity,\n        hierarchy[i],\n        perPositionHeight,\n        closeTop,\n        closeBottom,\n        vertexFormat,\n        arcType\n      );\n\n      var topAndBottom;\n      if (closeTop && closeBottom) {\n        topAndBottom = splitGeometry.topAndBottom;\n        options.geometry = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].scaleToGeodeticHeightExtruded */ .Z.scaleToGeodeticHeightExtruded(\n          topAndBottom.geometry,\n          height,\n          extrudedHeight,\n          ellipsoid,\n          perPositionHeight\n        );\n      } else if (closeTop) {\n        topAndBottom = splitGeometry.topAndBottom;\n        topAndBottom.geometry.attributes.position.values = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].scaleToGeodeticHeight */ .Z.scaleToGeodeticHeight(\n          topAndBottom.geometry.attributes.position.values,\n          height,\n          ellipsoid,\n          !perPositionHeight\n        );\n        options.geometry = topAndBottom.geometry;\n      } else if (closeBottom) {\n        topAndBottom = splitGeometry.topAndBottom;\n        topAndBottom.geometry.attributes.position.values = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].scaleToGeodeticHeight */ .Z.scaleToGeodeticHeight(\n          topAndBottom.geometry.attributes.position.values,\n          extrudedHeight,\n          ellipsoid,\n          true\n        );\n        options.geometry = topAndBottom.geometry;\n      }\n      if (closeTop || closeBottom) {\n        options.wall = false;\n        topAndBottom.geometry = computeAttributes(options);\n        geometries.push(topAndBottom);\n      }\n\n      var walls = splitGeometry.walls;\n      options.wall = true;\n      for (var k = 0; k < walls.length; k++) {\n        var wall = walls[k];\n        options.geometry = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].scaleToGeodeticHeightExtruded */ .Z.scaleToGeodeticHeightExtruded(\n          wall.geometry,\n          height,\n          extrudedHeight,\n          ellipsoid,\n          perPositionHeight\n        );\n        wall.geometry = computeAttributes(options);\n        geometries.push(wall);\n      }\n    }\n  } else {\n    for (i = 0; i < polygons.length; i++) {\n      var geometryInstance = new _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n        geometry: _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].createGeometryFromPositions */ .Z.createGeometryFromPositions(\n          ellipsoid,\n          polygons[i],\n          granularity,\n          perPositionHeight,\n          vertexFormat,\n          arcType\n        ),\n      });\n      geometryInstance.geometry.attributes.position.values = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].scaleToGeodeticHeight */ .Z.scaleToGeodeticHeight(\n        geometryInstance.geometry.attributes.position.values,\n        height,\n        ellipsoid,\n        !perPositionHeight\n      );\n      options.geometry = geometryInstance.geometry;\n      geometryInstance.geometry = computeAttributes(options);\n\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(polygonGeometry._offsetAttribute)) {\n        var length =\n          geometryInstance.geometry.attributes.position.values.length;\n        var applyOffset = new Uint8Array(length / 3);\n        var offsetValue =\n          polygonGeometry._offsetAttribute === _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].NONE */ .Z.NONE\n            ? 0\n            : 1;\n        (0,_arrayFill_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(applyOffset, offsetValue);\n        geometryInstance.geometry.attributes.applyOffset = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n          {\n            componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n            componentsPerAttribute: 1,\n            values: applyOffset,\n          }\n        );\n      }\n\n      geometries.push(geometryInstance);\n    }\n  }\n\n  var geometry = _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].combineInstances */ .Z.combineInstances(geometries)[0];\n  geometry.attributes.position.values = new Float64Array(\n    geometry.attributes.position.values\n  );\n  geometry.indices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createTypedArray */ .Z.createTypedArray(\n    geometry.attributes.position.values.length / 3,\n    geometry.indices\n  );\n\n  var attributes = geometry.attributes;\n  var boundingSphere = _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromVertices */ .Z.fromVertices(attributes.position.values);\n\n  if (!vertexFormat.position) {\n    delete attributes.position;\n  }\n\n  return new _Geometry_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z({\n    attributes: attributes,\n    indices: geometry.indices,\n    primitiveType: geometry.primitiveType,\n    boundingSphere: boundingSphere,\n    offsetAttribute: polygonGeometry._offsetAttribute,\n  });\n};\n\n/**\n * @private\n */\nPolygonGeometry.createShadowVolume = function (\n  polygonGeometry,\n  minHeightFunc,\n  maxHeightFunc\n) {\n  var granularity = polygonGeometry._granularity;\n  var ellipsoid = polygonGeometry._ellipsoid;\n\n  var minHeight = minHeightFunc(granularity, ellipsoid);\n  var maxHeight = maxHeightFunc(granularity, ellipsoid);\n\n  return new PolygonGeometry({\n    polygonHierarchy: polygonGeometry._polygonHierarchy,\n    ellipsoid: ellipsoid,\n    stRotation: polygonGeometry._stRotation,\n    granularity: granularity,\n    perPositionHeight: false,\n    extrudedHeight: minHeight,\n    height: maxHeight,\n    vertexFormat: _VertexFormat_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].POSITION_ONLY */ .Z.POSITION_ONLY,\n    shadowVolume: true,\n    arcType: polygonGeometry._arcType,\n  });\n};\n\nfunction textureCoordinateRotationPoints(polygonGeometry) {\n  var stRotation = -polygonGeometry._stRotation;\n  if (stRotation === 0.0) {\n    return [0, 0, 0, 1, 1, 0];\n  }\n  var ellipsoid = polygonGeometry._ellipsoid;\n  var positions = polygonGeometry._polygonHierarchy.positions;\n  var boundingRectangle = polygonGeometry.rectangle;\n  return _Geometry_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"]._textureCoordinateRotationPoints */ .Z._textureCoordinateRotationPoints(\n    positions,\n    stRotation,\n    ellipsoid,\n    boundingRectangle\n  );\n}\n\nObject.defineProperties(PolygonGeometry.prototype, {\n  /**\n   * @private\n   */\n  rectangle: {\n    get: function () {\n      if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(this._rectangle)) {\n        var positions = this._polygonHierarchy.positions;\n        this._rectangle = computeRectangle(\n          positions,\n          this._ellipsoid,\n          this._arcType,\n          this._granularity\n        );\n      }\n\n      return this._rectangle;\n    },\n  },\n  /**\n   * For remapping texture coordinates when rendering PolygonGeometries as GroundPrimitives.\n   * @private\n   */\n  textureCoordinateRotationPoints: {\n    get: function () {\n      if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(this._textureCoordinateRotationPoints)) {\n        this._textureCoordinateRotationPoints = textureCoordinateRotationPoints(\n          this\n        );\n      }\n      return this._textureCoordinateRotationPoints;\n    },\n  },\n});\n/* harmony default export */ __webpack_exports__["Z"] = (PolygonGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRCx5REFBZSxlQUFlLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9Qb2x5Z29uR2VvbWV0cnkuanM/ZGU4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXJjVHlwZSBmcm9tIFwiLi9BcmNUeXBlLmpzXCI7XG5pbXBvcnQgYXJyYXlGaWxsIGZyb20gXCIuL2FycmF5RmlsbC5qc1wiO1xuaW1wb3J0IEJvdW5kaW5nUmVjdGFuZ2xlIGZyb20gXCIuL0JvdW5kaW5nUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmUgZnJvbSBcIi4vQm91bmRpbmdTcGhlcmUuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4yIGZyb20gXCIuL0NhcnRlc2lhbjIuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDYXJ0b2dyYXBoaWMgZnJvbSBcIi4vQ2FydG9ncmFwaGljLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4vQ2hlY2suanNcIjtcbmltcG9ydCBDb21wb25lbnREYXRhdHlwZSBmcm9tIFwiLi9Db21wb25lbnREYXRhdHlwZS5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZCBmcm9tIFwiLi9FbGxpcHNvaWQuanNcIjtcbmltcG9ydCBFbGxpcHNvaWRHZW9kZXNpYyBmcm9tIFwiLi9FbGxpcHNvaWRHZW9kZXNpYy5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZFRhbmdlbnRQbGFuZSBmcm9tIFwiLi9FbGxpcHNvaWRUYW5nZW50UGxhbmUuanNcIjtcbmltcG9ydCBHZW9tZXRyeSBmcm9tIFwiLi9HZW9tZXRyeS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5QXR0cmlidXRlIGZyb20gXCIuL0dlb21ldHJ5QXR0cmlidXRlLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnlJbnN0YW5jZSBmcm9tIFwiLi9HZW9tZXRyeUluc3RhbmNlLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUgZnJvbSBcIi4vR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBHZW9tZXRyeVBpcGVsaW5lIGZyb20gXCIuL0dlb21ldHJ5UGlwZWxpbmUuanNcIjtcbmltcG9ydCBJbmRleERhdGF0eXBlIGZyb20gXCIuL0luZGV4RGF0YXR5cGUuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuL01hdGguanNcIjtcbmltcG9ydCBNYXRyaXgzIGZyb20gXCIuL01hdHJpeDMuanNcIjtcbmltcG9ydCBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5IGZyb20gXCIuL1BvbHlnb25HZW9tZXRyeUxpYnJhcnkuanNcIjtcbmltcG9ydCBQb2x5Z29uUGlwZWxpbmUgZnJvbSBcIi4vUG9seWdvblBpcGVsaW5lLmpzXCI7XG5pbXBvcnQgUXVhdGVybmlvbiBmcm9tIFwiLi9RdWF0ZXJuaW9uLmpzXCI7XG5pbXBvcnQgUmVjdGFuZ2xlIGZyb20gXCIuL1JlY3RhbmdsZS5qc1wiO1xuaW1wb3J0IFZlcnRleEZvcm1hdCBmcm9tIFwiLi9WZXJ0ZXhGb3JtYXQuanNcIjtcbmltcG9ydCBXaW5kaW5nT3JkZXIgZnJvbSBcIi4vV2luZGluZ09yZGVyLmpzXCI7XG5cbnZhciBzY3JhdGNoQ2FydG8xID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIHNjcmF0Y2hDYXJ0bzIgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5mdW5jdGlvbiBhZGp1c3RQb3NIZWlnaHRzRm9yTm9ybWFsKHBvc2l0aW9uLCBwMSwgcDIsIGVsbGlwc29pZCkge1xuICB2YXIgY2FydG8xID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKHBvc2l0aW9uLCBzY3JhdGNoQ2FydG8xKTtcbiAgdmFyIGhlaWdodCA9IGNhcnRvMS5oZWlnaHQ7XG4gIHZhciBwMUNhcnRvID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKHAxLCBzY3JhdGNoQ2FydG8yKTtcbiAgcDFDYXJ0by5oZWlnaHQgPSBoZWlnaHQ7XG4gIGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihwMUNhcnRvLCBwMSk7XG5cbiAgdmFyIHAyQ2FydG8gPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMocDIsIHNjcmF0Y2hDYXJ0bzIpO1xuICBwMkNhcnRvLmhlaWdodCA9IGhlaWdodCAtIDEwMDtcbiAgZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKHAyQ2FydG8sIHAyKTtcbn1cblxudmFyIHNjcmF0Y2hCb3VuZGluZ1JlY3RhbmdsZSA9IG5ldyBCb3VuZGluZ1JlY3RhbmdsZSgpO1xudmFyIHNjcmF0Y2hQb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaE5vcm1hbCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaFRhbmdlbnQgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hCaXRhbmdlbnQgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHAxU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcDJTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoUGVyUG9zTm9ybWFsID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoUGVyUG9zVGFuZ2VudCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaFBlclBvc0JpdGFuZ2VudCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbnZhciBhcHBlbmRUZXh0dXJlQ29vcmRpbmF0ZXNPcmlnaW4gPSBuZXcgQ2FydGVzaWFuMigpO1xudmFyIGFwcGVuZFRleHR1cmVDb29yZGluYXRlc0NhcnRlc2lhbjIgPSBuZXcgQ2FydGVzaWFuMigpO1xudmFyIGFwcGVuZFRleHR1cmVDb29yZGluYXRlc0NhcnRlc2lhbjMgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGFwcGVuZFRleHR1cmVDb29yZGluYXRlc1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xudmFyIGFwcGVuZFRleHR1cmVDb29yZGluYXRlc01hdHJpeDMgPSBuZXcgTWF0cml4MygpO1xudmFyIHRhbmdlbnRNYXRyaXhTY3JhdGNoID0gbmV3IE1hdHJpeDMoKTtcblxuZnVuY3Rpb24gY29tcHV0ZUF0dHJpYnV0ZXMob3B0aW9ucykge1xuICB2YXIgdmVydGV4Rm9ybWF0ID0gb3B0aW9ucy52ZXJ0ZXhGb3JtYXQ7XG4gIHZhciBnZW9tZXRyeSA9IG9wdGlvbnMuZ2VvbWV0cnk7XG4gIHZhciBzaGFkb3dWb2x1bWUgPSBvcHRpb25zLnNoYWRvd1ZvbHVtZTtcbiAgdmFyIGZsYXRQb3NpdGlvbnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcztcbiAgdmFyIGxlbmd0aCA9IGZsYXRQb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgd2FsbCA9IG9wdGlvbnMud2FsbDtcbiAgdmFyIHRvcCA9IG9wdGlvbnMudG9wIHx8IHdhbGw7XG4gIHZhciBib3R0b20gPSBvcHRpb25zLmJvdHRvbSB8fCB3YWxsO1xuICBpZiAoXG4gICAgdmVydGV4Rm9ybWF0LnN0IHx8XG4gICAgdmVydGV4Rm9ybWF0Lm5vcm1hbCB8fFxuICAgIHZlcnRleEZvcm1hdC50YW5nZW50IHx8XG4gICAgdmVydGV4Rm9ybWF0LmJpdGFuZ2VudCB8fFxuICAgIHNoYWRvd1ZvbHVtZVxuICApIHtcbiAgICAvLyBQRVJGT1JNQU5DRV9JREVBOiBDb21wdXRlIGJlZm9yZSBzdWJkaXZpc2lvbiwgdGhlbiBqdXN0IGludGVycG9sYXRlIGR1cmluZyBzdWJkaXZpc2lvbi5cbiAgICAvLyBQRVJGT1JNQU5DRV9JREVBOiBDb21wdXRlIHdpdGggY3JlYXRlR2VvbWV0cnlGcm9tUG9zaXRpb25zKCkgZm9yIGZhc3QgcGF0aCB3aGVuIHRoZXJlJ3Mgbm8gaG9sZXMuXG4gICAgdmFyIGJvdW5kaW5nUmVjdGFuZ2xlID0gb3B0aW9ucy5ib3VuZGluZ1JlY3RhbmdsZTtcbiAgICB2YXIgdGFuZ2VudFBsYW5lID0gb3B0aW9ucy50YW5nZW50UGxhbmU7XG4gICAgdmFyIGVsbGlwc29pZCA9IG9wdGlvbnMuZWxsaXBzb2lkO1xuICAgIHZhciBzdFJvdGF0aW9uID0gb3B0aW9ucy5zdFJvdGF0aW9uO1xuICAgIHZhciBwZXJQb3NpdGlvbkhlaWdodCA9IG9wdGlvbnMucGVyUG9zaXRpb25IZWlnaHQ7XG5cbiAgICB2YXIgb3JpZ2luID0gYXBwZW5kVGV4dHVyZUNvb3JkaW5hdGVzT3JpZ2luO1xuICAgIG9yaWdpbi54ID0gYm91bmRpbmdSZWN0YW5nbGUueDtcbiAgICBvcmlnaW4ueSA9IGJvdW5kaW5nUmVjdGFuZ2xlLnk7XG5cbiAgICB2YXIgdGV4dHVyZUNvb3JkaW5hdGVzID0gdmVydGV4Rm9ybWF0LnN0XG4gICAgICA/IG5ldyBGbG9hdDMyQXJyYXkoMiAqIChsZW5ndGggLyAzKSlcbiAgICAgIDogdW5kZWZpbmVkO1xuICAgIHZhciBub3JtYWxzO1xuICAgIGlmICh2ZXJ0ZXhGb3JtYXQubm9ybWFsKSB7XG4gICAgICBpZiAocGVyUG9zaXRpb25IZWlnaHQgJiYgdG9wICYmICF3YWxsKSB7XG4gICAgICAgIG5vcm1hbHMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdGFuZ2VudHMgPSB2ZXJ0ZXhGb3JtYXQudGFuZ2VudCA/IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgYml0YW5nZW50cyA9IHZlcnRleEZvcm1hdC5iaXRhbmdlbnRcbiAgICAgID8gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgICB2YXIgZXh0cnVkZU5vcm1hbHMgPSBzaGFkb3dWb2x1bWUgPyBuZXcgRmxvYXQzMkFycmF5KGxlbmd0aCkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgdGV4dHVyZUNvb3JkSW5kZXggPSAwO1xuICAgIHZhciBhdHRySW5kZXggPSAwO1xuXG4gICAgdmFyIG5vcm1hbCA9IHNjcmF0Y2hOb3JtYWw7XG4gICAgdmFyIHRhbmdlbnQgPSBzY3JhdGNoVGFuZ2VudDtcbiAgICB2YXIgYml0YW5nZW50ID0gc2NyYXRjaEJpdGFuZ2VudDtcbiAgICB2YXIgcmVjb21wdXRlTm9ybWFsID0gdHJ1ZTtcblxuICAgIHZhciB0ZXh0dXJlTWF0cml4ID0gYXBwZW5kVGV4dHVyZUNvb3JkaW5hdGVzTWF0cml4MztcbiAgICB2YXIgdGFuZ2VudFJvdGF0aW9uTWF0cml4ID0gdGFuZ2VudE1hdHJpeFNjcmF0Y2g7XG4gICAgaWYgKHN0Um90YXRpb24gIT09IDAuMCkge1xuICAgICAgdmFyIHJvdGF0aW9uID0gUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKFxuICAgICAgICB0YW5nZW50UGxhbmUuX3BsYW5lLm5vcm1hbCxcbiAgICAgICAgc3RSb3RhdGlvbixcbiAgICAgICAgYXBwZW5kVGV4dHVyZUNvb3JkaW5hdGVzUXVhdGVybmlvblxuICAgICAgKTtcbiAgICAgIHRleHR1cmVNYXRyaXggPSBNYXRyaXgzLmZyb21RdWF0ZXJuaW9uKHJvdGF0aW9uLCB0ZXh0dXJlTWF0cml4KTtcblxuICAgICAgcm90YXRpb24gPSBRdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUoXG4gICAgICAgIHRhbmdlbnRQbGFuZS5fcGxhbmUubm9ybWFsLFxuICAgICAgICAtc3RSb3RhdGlvbixcbiAgICAgICAgYXBwZW5kVGV4dHVyZUNvb3JkaW5hdGVzUXVhdGVybmlvblxuICAgICAgKTtcbiAgICAgIHRhbmdlbnRSb3RhdGlvbk1hdHJpeCA9IE1hdHJpeDMuZnJvbVF1YXRlcm5pb24oXG4gICAgICAgIHJvdGF0aW9uLFxuICAgICAgICB0YW5nZW50Um90YXRpb25NYXRyaXhcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRleHR1cmVNYXRyaXggPSBNYXRyaXgzLmNsb25lKE1hdHJpeDMuSURFTlRJVFksIHRleHR1cmVNYXRyaXgpO1xuICAgICAgdGFuZ2VudFJvdGF0aW9uTWF0cml4ID0gTWF0cml4My5jbG9uZShcbiAgICAgICAgTWF0cml4My5JREVOVElUWSxcbiAgICAgICAgdGFuZ2VudFJvdGF0aW9uTWF0cml4XG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciBib3R0b21PZmZzZXQgPSAwO1xuICAgIHZhciBib3R0b21PZmZzZXQyID0gMDtcblxuICAgIGlmICh0b3AgJiYgYm90dG9tKSB7XG4gICAgICBib3R0b21PZmZzZXQgPSBsZW5ndGggLyAyO1xuICAgICAgYm90dG9tT2Zmc2V0MiA9IGxlbmd0aCAvIDM7XG5cbiAgICAgIGxlbmd0aCAvPSAyO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IENhcnRlc2lhbjMuZnJvbUFycmF5KFxuICAgICAgICBmbGF0UG9zaXRpb25zLFxuICAgICAgICBpLFxuICAgICAgICBhcHBlbmRUZXh0dXJlQ29vcmRpbmF0ZXNDYXJ0ZXNpYW4zXG4gICAgICApO1xuXG4gICAgICBpZiAodmVydGV4Rm9ybWF0LnN0KSB7XG4gICAgICAgIHZhciBwID0gTWF0cml4My5tdWx0aXBseUJ5VmVjdG9yKFxuICAgICAgICAgIHRleHR1cmVNYXRyaXgsXG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgc2NyYXRjaFBvc2l0aW9uXG4gICAgICAgICk7XG4gICAgICAgIHAgPSBlbGxpcHNvaWQuc2NhbGVUb0dlb2RldGljU3VyZmFjZShwLCBwKTtcbiAgICAgICAgdmFyIHN0ID0gdGFuZ2VudFBsYW5lLnByb2plY3RQb2ludE9udG9QbGFuZShcbiAgICAgICAgICBwLFxuICAgICAgICAgIGFwcGVuZFRleHR1cmVDb29yZGluYXRlc0NhcnRlc2lhbjJcbiAgICAgICAgKTtcbiAgICAgICAgQ2FydGVzaWFuMi5zdWJ0cmFjdChzdCwgb3JpZ2luLCBzdCk7XG5cbiAgICAgICAgdmFyIHN0eCA9IENlc2l1bU1hdGguY2xhbXAoc3QueCAvIGJvdW5kaW5nUmVjdGFuZ2xlLndpZHRoLCAwLCAxKTtcbiAgICAgICAgdmFyIHN0eSA9IENlc2l1bU1hdGguY2xhbXAoc3QueSAvIGJvdW5kaW5nUmVjdGFuZ2xlLmhlaWdodCwgMCwgMSk7XG4gICAgICAgIGlmIChib3R0b20pIHtcbiAgICAgICAgICB0ZXh0dXJlQ29vcmRpbmF0ZXNbdGV4dHVyZUNvb3JkSW5kZXggKyBib3R0b21PZmZzZXQyXSA9IHN0eDtcbiAgICAgICAgICB0ZXh0dXJlQ29vcmRpbmF0ZXNbdGV4dHVyZUNvb3JkSW5kZXggKyAxICsgYm90dG9tT2Zmc2V0Ml0gPSBzdHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgIHRleHR1cmVDb29yZGluYXRlc1t0ZXh0dXJlQ29vcmRJbmRleF0gPSBzdHg7XG4gICAgICAgICAgdGV4dHVyZUNvb3JkaW5hdGVzW3RleHR1cmVDb29yZEluZGV4ICsgMV0gPSBzdHk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlQ29vcmRJbmRleCArPSAyO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHZlcnRleEZvcm1hdC5ub3JtYWwgfHxcbiAgICAgICAgdmVydGV4Rm9ybWF0LnRhbmdlbnQgfHxcbiAgICAgICAgdmVydGV4Rm9ybWF0LmJpdGFuZ2VudCB8fFxuICAgICAgICBzaGFkb3dWb2x1bWVcbiAgICAgICkge1xuICAgICAgICB2YXIgYXR0ckluZGV4MSA9IGF0dHJJbmRleCArIDE7XG4gICAgICAgIHZhciBhdHRySW5kZXgyID0gYXR0ckluZGV4ICsgMjtcblxuICAgICAgICBpZiAod2FsbCkge1xuICAgICAgICAgIGlmIChpICsgMyA8IGxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHAxID0gQ2FydGVzaWFuMy5mcm9tQXJyYXkoZmxhdFBvc2l0aW9ucywgaSArIDMsIHAxU2NyYXRjaCk7XG5cbiAgICAgICAgICAgIGlmIChyZWNvbXB1dGVOb3JtYWwpIHtcbiAgICAgICAgICAgICAgdmFyIHAyID0gQ2FydGVzaWFuMy5mcm9tQXJyYXkoXG4gICAgICAgICAgICAgICAgZmxhdFBvc2l0aW9ucyxcbiAgICAgICAgICAgICAgICBpICsgbGVuZ3RoLFxuICAgICAgICAgICAgICAgIHAyU2NyYXRjaFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAocGVyUG9zaXRpb25IZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBhZGp1c3RQb3NIZWlnaHRzRm9yTm9ybWFsKHBvc2l0aW9uLCBwMSwgcDIsIGVsbGlwc29pZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgQ2FydGVzaWFuMy5zdWJ0cmFjdChwMSwgcG9zaXRpb24sIHAxKTtcbiAgICAgICAgICAgICAgQ2FydGVzaWFuMy5zdWJ0cmFjdChwMiwgcG9zaXRpb24sIHAyKTtcbiAgICAgICAgICAgICAgbm9ybWFsID0gQ2FydGVzaWFuMy5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgQ2FydGVzaWFuMy5jcm9zcyhwMiwgcDEsIG5vcm1hbCksXG4gICAgICAgICAgICAgICAgbm9ybWFsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHJlY29tcHV0ZU5vcm1hbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uKHAxLCBwb3NpdGlvbiwgQ2VzaXVtTWF0aC5FUFNJTE9OMTApKSB7XG4gICAgICAgICAgICAgIC8vIGlmIHdlJ3ZlIHJlYWNoZWQgYSBjb3JuZXJcbiAgICAgICAgICAgICAgcmVjb21wdXRlTm9ybWFsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodmVydGV4Rm9ybWF0LnRhbmdlbnQgfHwgdmVydGV4Rm9ybWF0LmJpdGFuZ2VudCkge1xuICAgICAgICAgICAgYml0YW5nZW50ID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbChwb3NpdGlvbiwgYml0YW5nZW50KTtcbiAgICAgICAgICAgIGlmICh2ZXJ0ZXhGb3JtYXQudGFuZ2VudCkge1xuICAgICAgICAgICAgICB0YW5nZW50ID0gQ2FydGVzaWFuMy5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgQ2FydGVzaWFuMy5jcm9zcyhiaXRhbmdlbnQsIG5vcm1hbCwgdGFuZ2VudCksXG4gICAgICAgICAgICAgICAgdGFuZ2VudFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3JtYWwgPSBlbGxpcHNvaWQuZ2VvZGV0aWNTdXJmYWNlTm9ybWFsKHBvc2l0aW9uLCBub3JtYWwpO1xuICAgICAgICAgIGlmICh2ZXJ0ZXhGb3JtYXQudGFuZ2VudCB8fCB2ZXJ0ZXhGb3JtYXQuYml0YW5nZW50KSB7XG4gICAgICAgICAgICBpZiAocGVyUG9zaXRpb25IZWlnaHQpIHtcbiAgICAgICAgICAgICAgc2NyYXRjaFBlclBvc05vcm1hbCA9IENhcnRlc2lhbjMuZnJvbUFycmF5KFxuICAgICAgICAgICAgICAgIG5vcm1hbHMsXG4gICAgICAgICAgICAgICAgYXR0ckluZGV4LFxuICAgICAgICAgICAgICAgIHNjcmF0Y2hQZXJQb3NOb3JtYWxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgc2NyYXRjaFBlclBvc1RhbmdlbnQgPSBDYXJ0ZXNpYW4zLmNyb3NzKFxuICAgICAgICAgICAgICAgIENhcnRlc2lhbjMuVU5JVF9aLFxuICAgICAgICAgICAgICAgIHNjcmF0Y2hQZXJQb3NOb3JtYWwsXG4gICAgICAgICAgICAgICAgc2NyYXRjaFBlclBvc1RhbmdlbnRcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgc2NyYXRjaFBlclBvc1RhbmdlbnQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShcbiAgICAgICAgICAgICAgICBNYXRyaXgzLm11bHRpcGx5QnlWZWN0b3IoXG4gICAgICAgICAgICAgICAgICB0YW5nZW50Um90YXRpb25NYXRyaXgsXG4gICAgICAgICAgICAgICAgICBzY3JhdGNoUGVyUG9zVGFuZ2VudCxcbiAgICAgICAgICAgICAgICAgIHNjcmF0Y2hQZXJQb3NUYW5nZW50XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBzY3JhdGNoUGVyUG9zVGFuZ2VudFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAodmVydGV4Rm9ybWF0LmJpdGFuZ2VudCkge1xuICAgICAgICAgICAgICAgIHNjcmF0Y2hQZXJQb3NCaXRhbmdlbnQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShcbiAgICAgICAgICAgICAgICAgIENhcnRlc2lhbjMuY3Jvc3MoXG4gICAgICAgICAgICAgICAgICAgIHNjcmF0Y2hQZXJQb3NOb3JtYWwsXG4gICAgICAgICAgICAgICAgICAgIHNjcmF0Y2hQZXJQb3NUYW5nZW50LFxuICAgICAgICAgICAgICAgICAgICBzY3JhdGNoUGVyUG9zQml0YW5nZW50XG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgc2NyYXRjaFBlclBvc0JpdGFuZ2VudFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFuZ2VudCA9IENhcnRlc2lhbjMuY3Jvc3MoQ2FydGVzaWFuMy5VTklUX1osIG5vcm1hbCwgdGFuZ2VudCk7XG4gICAgICAgICAgICB0YW5nZW50ID0gQ2FydGVzaWFuMy5ub3JtYWxpemUoXG4gICAgICAgICAgICAgIE1hdHJpeDMubXVsdGlwbHlCeVZlY3Rvcih0YW5nZW50Um90YXRpb25NYXRyaXgsIHRhbmdlbnQsIHRhbmdlbnQpLFxuICAgICAgICAgICAgICB0YW5nZW50XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHZlcnRleEZvcm1hdC5iaXRhbmdlbnQpIHtcbiAgICAgICAgICAgICAgYml0YW5nZW50ID0gQ2FydGVzaWFuMy5ub3JtYWxpemUoXG4gICAgICAgICAgICAgICAgQ2FydGVzaWFuMy5jcm9zcyhub3JtYWwsIHRhbmdlbnQsIGJpdGFuZ2VudCksXG4gICAgICAgICAgICAgICAgYml0YW5nZW50XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZlcnRleEZvcm1hdC5ub3JtYWwpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy53YWxsKSB7XG4gICAgICAgICAgICBub3JtYWxzW2F0dHJJbmRleCArIGJvdHRvbU9mZnNldF0gPSBub3JtYWwueDtcbiAgICAgICAgICAgIG5vcm1hbHNbYXR0ckluZGV4MSArIGJvdHRvbU9mZnNldF0gPSBub3JtYWwueTtcbiAgICAgICAgICAgIG5vcm1hbHNbYXR0ckluZGV4MiArIGJvdHRvbU9mZnNldF0gPSBub3JtYWwuejtcbiAgICAgICAgICB9IGVsc2UgaWYgKGJvdHRvbSkge1xuICAgICAgICAgICAgbm9ybWFsc1thdHRySW5kZXggKyBib3R0b21PZmZzZXRdID0gLW5vcm1hbC54O1xuICAgICAgICAgICAgbm9ybWFsc1thdHRySW5kZXgxICsgYm90dG9tT2Zmc2V0XSA9IC1ub3JtYWwueTtcbiAgICAgICAgICAgIG5vcm1hbHNbYXR0ckluZGV4MiArIGJvdHRvbU9mZnNldF0gPSAtbm9ybWFsLno7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCh0b3AgJiYgIXBlclBvc2l0aW9uSGVpZ2h0KSB8fCB3YWxsKSB7XG4gICAgICAgICAgICBub3JtYWxzW2F0dHJJbmRleF0gPSBub3JtYWwueDtcbiAgICAgICAgICAgIG5vcm1hbHNbYXR0ckluZGV4MV0gPSBub3JtYWwueTtcbiAgICAgICAgICAgIG5vcm1hbHNbYXR0ckluZGV4Ml0gPSBub3JtYWwuejtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hhZG93Vm9sdW1lKSB7XG4gICAgICAgICAgaWYgKHdhbGwpIHtcbiAgICAgICAgICAgIG5vcm1hbCA9IGVsbGlwc29pZC5nZW9kZXRpY1N1cmZhY2VOb3JtYWwocG9zaXRpb24sIG5vcm1hbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGV4dHJ1ZGVOb3JtYWxzW2F0dHJJbmRleCArIGJvdHRvbU9mZnNldF0gPSAtbm9ybWFsLng7XG4gICAgICAgICAgZXh0cnVkZU5vcm1hbHNbYXR0ckluZGV4MSArIGJvdHRvbU9mZnNldF0gPSAtbm9ybWFsLnk7XG4gICAgICAgICAgZXh0cnVkZU5vcm1hbHNbYXR0ckluZGV4MiArIGJvdHRvbU9mZnNldF0gPSAtbm9ybWFsLno7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmVydGV4Rm9ybWF0LnRhbmdlbnQpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy53YWxsKSB7XG4gICAgICAgICAgICB0YW5nZW50c1thdHRySW5kZXggKyBib3R0b21PZmZzZXRdID0gdGFuZ2VudC54O1xuICAgICAgICAgICAgdGFuZ2VudHNbYXR0ckluZGV4MSArIGJvdHRvbU9mZnNldF0gPSB0YW5nZW50Lnk7XG4gICAgICAgICAgICB0YW5nZW50c1thdHRySW5kZXgyICsgYm90dG9tT2Zmc2V0XSA9IHRhbmdlbnQuejtcbiAgICAgICAgICB9IGVsc2UgaWYgKGJvdHRvbSkge1xuICAgICAgICAgICAgdGFuZ2VudHNbYXR0ckluZGV4ICsgYm90dG9tT2Zmc2V0XSA9IC10YW5nZW50Lng7XG4gICAgICAgICAgICB0YW5nZW50c1thdHRySW5kZXgxICsgYm90dG9tT2Zmc2V0XSA9IC10YW5nZW50Lnk7XG4gICAgICAgICAgICB0YW5nZW50c1thdHRySW5kZXgyICsgYm90dG9tT2Zmc2V0XSA9IC10YW5nZW50Lno7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgICAgaWYgKHBlclBvc2l0aW9uSGVpZ2h0KSB7XG4gICAgICAgICAgICAgIHRhbmdlbnRzW2F0dHJJbmRleF0gPSBzY3JhdGNoUGVyUG9zVGFuZ2VudC54O1xuICAgICAgICAgICAgICB0YW5nZW50c1thdHRySW5kZXgxXSA9IHNjcmF0Y2hQZXJQb3NUYW5nZW50Lnk7XG4gICAgICAgICAgICAgIHRhbmdlbnRzW2F0dHJJbmRleDJdID0gc2NyYXRjaFBlclBvc1RhbmdlbnQuejtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRhbmdlbnRzW2F0dHJJbmRleF0gPSB0YW5nZW50Lng7XG4gICAgICAgICAgICAgIHRhbmdlbnRzW2F0dHJJbmRleDFdID0gdGFuZ2VudC55O1xuICAgICAgICAgICAgICB0YW5nZW50c1thdHRySW5kZXgyXSA9IHRhbmdlbnQuejtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmVydGV4Rm9ybWF0LmJpdGFuZ2VudCkge1xuICAgICAgICAgIGlmIChib3R0b20pIHtcbiAgICAgICAgICAgIGJpdGFuZ2VudHNbYXR0ckluZGV4ICsgYm90dG9tT2Zmc2V0XSA9IGJpdGFuZ2VudC54O1xuICAgICAgICAgICAgYml0YW5nZW50c1thdHRySW5kZXgxICsgYm90dG9tT2Zmc2V0XSA9IGJpdGFuZ2VudC55O1xuICAgICAgICAgICAgYml0YW5nZW50c1thdHRySW5kZXgyICsgYm90dG9tT2Zmc2V0XSA9IGJpdGFuZ2VudC56O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICBpZiAocGVyUG9zaXRpb25IZWlnaHQpIHtcbiAgICAgICAgICAgICAgYml0YW5nZW50c1thdHRySW5kZXhdID0gc2NyYXRjaFBlclBvc0JpdGFuZ2VudC54O1xuICAgICAgICAgICAgICBiaXRhbmdlbnRzW2F0dHJJbmRleDFdID0gc2NyYXRjaFBlclBvc0JpdGFuZ2VudC55O1xuICAgICAgICAgICAgICBiaXRhbmdlbnRzW2F0dHJJbmRleDJdID0gc2NyYXRjaFBlclBvc0JpdGFuZ2VudC56O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYml0YW5nZW50c1thdHRySW5kZXhdID0gYml0YW5nZW50Lng7XG4gICAgICAgICAgICAgIGJpdGFuZ2VudHNbYXR0ckluZGV4MV0gPSBiaXRhbmdlbnQueTtcbiAgICAgICAgICAgICAgYml0YW5nZW50c1thdHRySW5kZXgyXSA9IGJpdGFuZ2VudC56O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhdHRySW5kZXggKz0gMztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodmVydGV4Rm9ybWF0LnN0KSB7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnN0ID0gbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAyLFxuICAgICAgICB2YWx1ZXM6IHRleHR1cmVDb29yZGluYXRlcyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh2ZXJ0ZXhGb3JtYXQubm9ybWFsKSB7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbCA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZSh7XG4gICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgdmFsdWVzOiBub3JtYWxzLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHZlcnRleEZvcm1hdC50YW5nZW50KSB7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnRhbmdlbnQgPSBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICAgIHZhbHVlczogdGFuZ2VudHMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodmVydGV4Rm9ybWF0LmJpdGFuZ2VudCkge1xuICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5iaXRhbmdlbnQgPSBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICAgIHZhbHVlczogYml0YW5nZW50cyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChzaGFkb3dWb2x1bWUpIHtcbiAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMuZXh0cnVkZURpcmVjdGlvbiA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZSh7XG4gICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgdmFsdWVzOiBleHRydWRlTm9ybWFscyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChvcHRpb25zLmV4dHJ1ZGUgJiYgZGVmaW5lZChvcHRpb25zLm9mZnNldEF0dHJpYnV0ZSkpIHtcbiAgICB2YXIgc2l6ZSA9IGZsYXRQb3NpdGlvbnMubGVuZ3RoIC8gMztcbiAgICB2YXIgb2Zmc2V0QXR0cmlidXRlID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XG5cbiAgICBpZiAob3B0aW9ucy5vZmZzZXRBdHRyaWJ1dGUgPT09IEdlb21ldHJ5T2Zmc2V0QXR0cmlidXRlLlRPUCkge1xuICAgICAgaWYgKCh0b3AgJiYgYm90dG9tKSB8fCB3YWxsKSB7XG4gICAgICAgIG9mZnNldEF0dHJpYnV0ZSA9IGFycmF5RmlsbChvZmZzZXRBdHRyaWJ1dGUsIDEsIDAsIHNpemUgLyAyKTtcbiAgICAgIH0gZWxzZSBpZiAodG9wKSB7XG4gICAgICAgIG9mZnNldEF0dHJpYnV0ZSA9IGFycmF5RmlsbChvZmZzZXRBdHRyaWJ1dGUsIDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb2Zmc2V0VmFsdWUgPVxuICAgICAgICBvcHRpb25zLm9mZnNldEF0dHJpYnV0ZSA9PT0gR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUuTk9ORSA/IDAgOiAxO1xuICAgICAgb2Zmc2V0QXR0cmlidXRlID0gYXJyYXlGaWxsKG9mZnNldEF0dHJpYnV0ZSwgb2Zmc2V0VmFsdWUpO1xuICAgIH1cblxuICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMuYXBwbHlPZmZzZXQgPSBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAxLFxuICAgICAgdmFsdWVzOiBvZmZzZXRBdHRyaWJ1dGUsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZ2VvbWV0cnk7XG59XG5cbnZhciBzdGFydENhcnRvZ3JhcGhpY1NjcmF0Y2ggPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgZW5kQ2FydG9ncmFwaGljU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBpZGxDcm9zcyA9IHtcbiAgd2VzdE92ZXJJREw6IDAuMCxcbiAgZWFzdE92ZXJJREw6IDAuMCxcbn07XG52YXIgZWxsaXBzb2lkR2VvZGVzaWMgPSBuZXcgRWxsaXBzb2lkR2VvZGVzaWMoKTtcbmZ1bmN0aW9uIGNvbXB1dGVSZWN0YW5nbGUocG9zaXRpb25zLCBlbGxpcHNvaWQsIGFyY1R5cGUsIGdyYW51bGFyaXR5LCByZXN1bHQpIHtcbiAgcmVzdWx0ID0gZGVmYXVsdFZhbHVlKHJlc3VsdCwgbmV3IFJlY3RhbmdsZSgpKTtcbiAgaWYgKCFkZWZpbmVkKHBvc2l0aW9ucykgfHwgcG9zaXRpb25zLmxlbmd0aCA8IDMpIHtcbiAgICByZXN1bHQud2VzdCA9IDAuMDtcbiAgICByZXN1bHQubm9ydGggPSAwLjA7XG4gICAgcmVzdWx0LnNvdXRoID0gMC4wO1xuICAgIHJlc3VsdC5lYXN0ID0gMC4wO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZiAoYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgIHJldHVybiBSZWN0YW5nbGUuZnJvbUNhcnRlc2lhbkFycmF5KHBvc2l0aW9ucywgZWxsaXBzb2lkLCByZXN1bHQpO1xuICB9XG5cbiAgaWYgKCFlbGxpcHNvaWRHZW9kZXNpYy5lbGxpcHNvaWQuZXF1YWxzKGVsbGlwc29pZCkpIHtcbiAgICBlbGxpcHNvaWRHZW9kZXNpYyA9IG5ldyBFbGxpcHNvaWRHZW9kZXNpYyh1bmRlZmluZWQsIHVuZGVmaW5lZCwgZWxsaXBzb2lkKTtcbiAgfVxuXG4gIHJlc3VsdC53ZXN0ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICByZXN1bHQuZWFzdCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgcmVzdWx0LnNvdXRoID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICByZXN1bHQubm9ydGggPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgaWRsQ3Jvc3Mud2VzdE92ZXJJREwgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gIGlkbENyb3NzLmVhc3RPdmVySURMID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuXG4gIHZhciBpbnZlcnNlQ2hvcmRMZW5ndGggPVxuICAgIDEuMCAvIENlc2l1bU1hdGguY2hvcmRMZW5ndGgoZ3JhbnVsYXJpdHksIGVsbGlwc29pZC5tYXhpbXVtUmFkaXVzKTtcbiAgdmFyIHBvc2l0aW9uc0xlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gIHZhciBlbmRDYXJ0b2dyYXBoaWMgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgcG9zaXRpb25zWzBdLFxuICAgIGVuZENhcnRvZ3JhcGhpY1NjcmF0Y2hcbiAgKTtcbiAgdmFyIHN0YXJ0Q2FydG9ncmFwaGljID0gc3RhcnRDYXJ0b2dyYXBoaWNTY3JhdGNoO1xuICB2YXIgc3dhcDtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8IHBvc2l0aW9uc0xlbmd0aDsgaSsrKSB7XG4gICAgc3dhcCA9IHN0YXJ0Q2FydG9ncmFwaGljO1xuICAgIHN0YXJ0Q2FydG9ncmFwaGljID0gZW5kQ2FydG9ncmFwaGljO1xuICAgIGVuZENhcnRvZ3JhcGhpYyA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwb3NpdGlvbnNbaV0sIHN3YXApO1xuICAgIGVsbGlwc29pZEdlb2Rlc2ljLnNldEVuZFBvaW50cyhzdGFydENhcnRvZ3JhcGhpYywgZW5kQ2FydG9ncmFwaGljKTtcbiAgICBpbnRlcnBvbGF0ZUFuZEdyb3dSZWN0YW5nbGUoXG4gICAgICBlbGxpcHNvaWRHZW9kZXNpYyxcbiAgICAgIGludmVyc2VDaG9yZExlbmd0aCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIGlkbENyb3NzXG4gICAgKTtcbiAgfVxuXG4gIHN3YXAgPSBzdGFydENhcnRvZ3JhcGhpYztcbiAgc3RhcnRDYXJ0b2dyYXBoaWMgPSBlbmRDYXJ0b2dyYXBoaWM7XG4gIGVuZENhcnRvZ3JhcGhpYyA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwb3NpdGlvbnNbMF0sIHN3YXApO1xuICBlbGxpcHNvaWRHZW9kZXNpYy5zZXRFbmRQb2ludHMoc3RhcnRDYXJ0b2dyYXBoaWMsIGVuZENhcnRvZ3JhcGhpYyk7XG4gIGludGVycG9sYXRlQW5kR3Jvd1JlY3RhbmdsZShcbiAgICBlbGxpcHNvaWRHZW9kZXNpYyxcbiAgICBpbnZlcnNlQ2hvcmRMZW5ndGgsXG4gICAgcmVzdWx0LFxuICAgIGlkbENyb3NzXG4gICk7XG5cbiAgaWYgKHJlc3VsdC5lYXN0IC0gcmVzdWx0Lndlc3QgPiBpZGxDcm9zcy5lYXN0T3ZlcklETCAtIGlkbENyb3NzLndlc3RPdmVySURMKSB7XG4gICAgcmVzdWx0Lndlc3QgPSBpZGxDcm9zcy53ZXN0T3ZlcklETDtcbiAgICByZXN1bHQuZWFzdCA9IGlkbENyb3NzLmVhc3RPdmVySURMO1xuXG4gICAgaWYgKHJlc3VsdC5lYXN0ID4gQ2VzaXVtTWF0aC5QSSkge1xuICAgICAgcmVzdWx0LmVhc3QgPSByZXN1bHQuZWFzdCAtIENlc2l1bU1hdGguVFdPX1BJO1xuICAgIH1cbiAgICBpZiAocmVzdWx0Lndlc3QgPiBDZXNpdW1NYXRoLlBJKSB7XG4gICAgICByZXN1bHQud2VzdCA9IHJlc3VsdC53ZXN0IC0gQ2VzaXVtTWF0aC5UV09fUEk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIGludGVycG9sYXRlZENhcnRvZ3JhcGhpY1NjcmF0Y2ggPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5mdW5jdGlvbiBpbnRlcnBvbGF0ZUFuZEdyb3dSZWN0YW5nbGUoXG4gIGVsbGlwc29pZEdlb2Rlc2ljLFxuICBpbnZlcnNlQ2hvcmRMZW5ndGgsXG4gIHJlc3VsdCxcbiAgaWRsQ3Jvc3Ncbikge1xuICB2YXIgc2VnbWVudExlbmd0aCA9IGVsbGlwc29pZEdlb2Rlc2ljLnN1cmZhY2VEaXN0YW5jZTtcblxuICB2YXIgbnVtUG9pbnRzID0gTWF0aC5jZWlsKHNlZ21lbnRMZW5ndGggKiBpbnZlcnNlQ2hvcmRMZW5ndGgpO1xuICB2YXIgc3Vic2VnbWVudERpc3RhbmNlID1cbiAgICBudW1Qb2ludHMgPiAwID8gc2VnbWVudExlbmd0aCAvIChudW1Qb2ludHMgLSAxKSA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgdmFyIGludGVycG9sYXRpb25EaXN0YW5jZSA9IDAuMDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVBvaW50czsgaSsrKSB7XG4gICAgdmFyIGludGVycG9sYXRlZENhcnRvZ3JhcGhpYyA9IGVsbGlwc29pZEdlb2Rlc2ljLmludGVycG9sYXRlVXNpbmdTdXJmYWNlRGlzdGFuY2UoXG4gICAgICBpbnRlcnBvbGF0aW9uRGlzdGFuY2UsXG4gICAgICBpbnRlcnBvbGF0ZWRDYXJ0b2dyYXBoaWNTY3JhdGNoXG4gICAgKTtcbiAgICBpbnRlcnBvbGF0aW9uRGlzdGFuY2UgKz0gc3Vic2VnbWVudERpc3RhbmNlO1xuICAgIHZhciBsb25naXR1ZGUgPSBpbnRlcnBvbGF0ZWRDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlO1xuICAgIHZhciBsYXRpdHVkZSA9IGludGVycG9sYXRlZENhcnRvZ3JhcGhpYy5sYXRpdHVkZTtcblxuICAgIHJlc3VsdC53ZXN0ID0gTWF0aC5taW4ocmVzdWx0Lndlc3QsIGxvbmdpdHVkZSk7XG4gICAgcmVzdWx0LmVhc3QgPSBNYXRoLm1heChyZXN1bHQuZWFzdCwgbG9uZ2l0dWRlKTtcbiAgICByZXN1bHQuc291dGggPSBNYXRoLm1pbihyZXN1bHQuc291dGgsIGxhdGl0dWRlKTtcbiAgICByZXN1bHQubm9ydGggPSBNYXRoLm1heChyZXN1bHQubm9ydGgsIGxhdGl0dWRlKTtcblxuICAgIHZhciBsb25BZGp1c3RlZCA9XG4gICAgICBsb25naXR1ZGUgPj0gMCA/IGxvbmdpdHVkZSA6IGxvbmdpdHVkZSArIENlc2l1bU1hdGguVFdPX1BJO1xuICAgIGlkbENyb3NzLndlc3RPdmVySURMID0gTWF0aC5taW4oaWRsQ3Jvc3Mud2VzdE92ZXJJREwsIGxvbkFkanVzdGVkKTtcbiAgICBpZGxDcm9zcy5lYXN0T3ZlcklETCA9IE1hdGgubWF4KGlkbENyb3NzLmVhc3RPdmVySURMLCBsb25BZGp1c3RlZCk7XG4gIH1cbn1cblxudmFyIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc0V4dHJ1ZGVkUG9zaXRpb25zID0gW107XG5cbmZ1bmN0aW9uIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc0V4dHJ1ZGVkKFxuICBlbGxpcHNvaWQsXG4gIHBvbHlnb24sXG4gIGdyYW51bGFyaXR5LFxuICBoaWVyYXJjaHksXG4gIHBlclBvc2l0aW9uSGVpZ2h0LFxuICBjbG9zZVRvcCxcbiAgY2xvc2VCb3R0b20sXG4gIHZlcnRleEZvcm1hdCxcbiAgYXJjVHlwZVxuKSB7XG4gIHZhciBnZW9zID0ge1xuICAgIHdhbGxzOiBbXSxcbiAgfTtcbiAgdmFyIGk7XG5cbiAgaWYgKGNsb3NlVG9wIHx8IGNsb3NlQm90dG9tKSB7XG4gICAgdmFyIHRvcEdlbyA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuY3JlYXRlR2VvbWV0cnlGcm9tUG9zaXRpb25zKFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgcG9seWdvbixcbiAgICAgIGdyYW51bGFyaXR5LFxuICAgICAgcGVyUG9zaXRpb25IZWlnaHQsXG4gICAgICB2ZXJ0ZXhGb3JtYXQsXG4gICAgICBhcmNUeXBlXG4gICAgKTtcblxuICAgIHZhciBlZGdlUG9pbnRzID0gdG9wR2VvLmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzO1xuICAgIHZhciBpbmRpY2VzID0gdG9wR2VvLmluZGljZXM7XG4gICAgdmFyIG51bVBvc2l0aW9ucztcbiAgICB2YXIgbmV3SW5kaWNlcztcblxuICAgIGlmIChjbG9zZVRvcCAmJiBjbG9zZUJvdHRvbSkge1xuICAgICAgdmFyIHRvcEJvdHRvbVBvc2l0aW9ucyA9IGVkZ2VQb2ludHMuY29uY2F0KGVkZ2VQb2ludHMpO1xuXG4gICAgICBudW1Qb3NpdGlvbnMgPSB0b3BCb3R0b21Qb3NpdGlvbnMubGVuZ3RoIC8gMztcblxuICAgICAgbmV3SW5kaWNlcyA9IEluZGV4RGF0YXR5cGUuY3JlYXRlVHlwZWRBcnJheShcbiAgICAgICAgbnVtUG9zaXRpb25zLFxuICAgICAgICBpbmRpY2VzLmxlbmd0aCAqIDJcbiAgICAgICk7XG4gICAgICBuZXdJbmRpY2VzLnNldChpbmRpY2VzKTtcbiAgICAgIHZhciBpbGVuZ3RoID0gaW5kaWNlcy5sZW5ndGg7XG5cbiAgICAgIHZhciBsZW5ndGggPSBudW1Qb3NpdGlvbnMgLyAyO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgaWxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIHZhciBpMCA9IG5ld0luZGljZXNbaV0gKyBsZW5ndGg7XG4gICAgICAgIHZhciBpMSA9IG5ld0luZGljZXNbaSArIDFdICsgbGVuZ3RoO1xuICAgICAgICB2YXIgaTIgPSBuZXdJbmRpY2VzW2kgKyAyXSArIGxlbmd0aDtcblxuICAgICAgICBuZXdJbmRpY2VzW2kgKyBpbGVuZ3RoXSA9IGkyO1xuICAgICAgICBuZXdJbmRpY2VzW2kgKyAxICsgaWxlbmd0aF0gPSBpMTtcbiAgICAgICAgbmV3SW5kaWNlc1tpICsgMiArIGlsZW5ndGhdID0gaTA7XG4gICAgICB9XG5cbiAgICAgIHRvcEdlby5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcyA9IHRvcEJvdHRvbVBvc2l0aW9ucztcbiAgICAgIGlmIChwZXJQb3NpdGlvbkhlaWdodCAmJiB2ZXJ0ZXhGb3JtYXQubm9ybWFsKSB7XG4gICAgICAgIHZhciBub3JtYWxzID0gdG9wR2VvLmF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlcztcbiAgICAgICAgdG9wR2VvLmF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgdG9wQm90dG9tUG9zaXRpb25zLmxlbmd0aFxuICAgICAgICApO1xuICAgICAgICB0b3BHZW8uYXR0cmlidXRlcy5ub3JtYWwudmFsdWVzLnNldChub3JtYWxzKTtcbiAgICAgIH1cbiAgICAgIHRvcEdlby5pbmRpY2VzID0gbmV3SW5kaWNlcztcbiAgICB9IGVsc2UgaWYgKGNsb3NlQm90dG9tKSB7XG4gICAgICBudW1Qb3NpdGlvbnMgPSBlZGdlUG9pbnRzLmxlbmd0aCAvIDM7XG4gICAgICBuZXdJbmRpY2VzID0gSW5kZXhEYXRhdHlwZS5jcmVhdGVUeXBlZEFycmF5KG51bVBvc2l0aW9ucywgaW5kaWNlcy5sZW5ndGgpO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICBuZXdJbmRpY2VzW2ldID0gaW5kaWNlc1tpICsgMl07XG4gICAgICAgIG5ld0luZGljZXNbaSArIDFdID0gaW5kaWNlc1tpICsgMV07XG4gICAgICAgIG5ld0luZGljZXNbaSArIDJdID0gaW5kaWNlc1tpXTtcbiAgICAgIH1cblxuICAgICAgdG9wR2VvLmluZGljZXMgPSBuZXdJbmRpY2VzO1xuICAgIH1cblxuICAgIGdlb3MudG9wQW5kQm90dG9tID0gbmV3IEdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgZ2VvbWV0cnk6IHRvcEdlbyxcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBvdXRlclJpbmcgPSBoaWVyYXJjaHkub3V0ZXJSaW5nO1xuICB2YXIgdGFuZ2VudFBsYW5lID0gRWxsaXBzb2lkVGFuZ2VudFBsYW5lLmZyb21Qb2ludHMob3V0ZXJSaW5nLCBlbGxpcHNvaWQpO1xuICB2YXIgcG9zaXRpb25zMkQgPSB0YW5nZW50UGxhbmUucHJvamVjdFBvaW50c09udG9QbGFuZShcbiAgICBvdXRlclJpbmcsXG4gICAgY3JlYXRlR2VvbWV0cnlGcm9tUG9zaXRpb25zRXh0cnVkZWRQb3NpdGlvbnNcbiAgKTtcblxuICB2YXIgd2luZGluZ09yZGVyID0gUG9seWdvblBpcGVsaW5lLmNvbXB1dGVXaW5kaW5nT3JkZXIyRChwb3NpdGlvbnMyRCk7XG4gIGlmICh3aW5kaW5nT3JkZXIgPT09IFdpbmRpbmdPcmRlci5DTE9DS1dJU0UpIHtcbiAgICBvdXRlclJpbmcgPSBvdXRlclJpbmcuc2xpY2UoKS5yZXZlcnNlKCk7XG4gIH1cblxuICB2YXIgd2FsbEdlbyA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuY29tcHV0ZVdhbGxHZW9tZXRyeShcbiAgICBvdXRlclJpbmcsXG4gICAgZWxsaXBzb2lkLFxuICAgIGdyYW51bGFyaXR5LFxuICAgIHBlclBvc2l0aW9uSGVpZ2h0LFxuICAgIGFyY1R5cGVcbiAgKTtcbiAgZ2Vvcy53YWxscy5wdXNoKFxuICAgIG5ldyBHZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgIGdlb21ldHJ5OiB3YWxsR2VvLFxuICAgIH0pXG4gICk7XG5cbiAgdmFyIGhvbGVzID0gaGllcmFyY2h5LmhvbGVzO1xuICBmb3IgKGkgPSAwOyBpIDwgaG9sZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaG9sZSA9IGhvbGVzW2ldO1xuXG4gICAgdGFuZ2VudFBsYW5lID0gRWxsaXBzb2lkVGFuZ2VudFBsYW5lLmZyb21Qb2ludHMoaG9sZSwgZWxsaXBzb2lkKTtcbiAgICBwb3NpdGlvbnMyRCA9IHRhbmdlbnRQbGFuZS5wcm9qZWN0UG9pbnRzT250b1BsYW5lKFxuICAgICAgaG9sZSxcbiAgICAgIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc0V4dHJ1ZGVkUG9zaXRpb25zXG4gICAgKTtcblxuICAgIHdpbmRpbmdPcmRlciA9IFBvbHlnb25QaXBlbGluZS5jb21wdXRlV2luZGluZ09yZGVyMkQocG9zaXRpb25zMkQpO1xuICAgIGlmICh3aW5kaW5nT3JkZXIgPT09IFdpbmRpbmdPcmRlci5DT1VOVEVSX0NMT0NLV0lTRSkge1xuICAgICAgaG9sZSA9IGhvbGUuc2xpY2UoKS5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgd2FsbEdlbyA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuY29tcHV0ZVdhbGxHZW9tZXRyeShcbiAgICAgIGhvbGUsXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBncmFudWxhcml0eSxcbiAgICAgIHBlclBvc2l0aW9uSGVpZ2h0LFxuICAgICAgYXJjVHlwZVxuICAgICk7XG4gICAgZ2Vvcy53YWxscy5wdXNoKFxuICAgICAgbmV3IEdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgICBnZW9tZXRyeTogd2FsbEdlbyxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBnZW9zO1xufVxuXG4vKipcbiAqIEEgZGVzY3JpcHRpb24gb2YgYSBwb2x5Z29uIG9uIHRoZSBlbGxpcHNvaWQuIFRoZSBwb2x5Z29uIGlzIGRlZmluZWQgYnkgYSBwb2x5Z29uIGhpZXJhcmNoeS4gUG9seWdvbiBnZW9tZXRyeSBjYW4gYmUgcmVuZGVyZWQgd2l0aCBib3RoIHtAbGluayBQcmltaXRpdmV9IGFuZCB7QGxpbmsgR3JvdW5kUHJpbWl0aXZlfS5cbiAqXG4gKiBAYWxpYXMgUG9seWdvbkdlb21ldHJ5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge1BvbHlnb25IaWVyYXJjaHl9IG9wdGlvbnMucG9seWdvbkhpZXJhcmNoeSBBIHBvbHlnb24gaGllcmFyY2h5IHRoYXQgY2FuIGluY2x1ZGUgaG9sZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTAuMF0gVGhlIGRpc3RhbmNlIGluIG1ldGVycyBiZXR3ZWVuIHRoZSBwb2x5Z29uIGFuZCB0aGUgZWxsaXBzb2lkIHN1cmZhY2UuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZXh0cnVkZWRIZWlnaHRdIFRoZSBkaXN0YW5jZSBpbiBtZXRlcnMgYmV0d2VlbiB0aGUgcG9seWdvbidzIGV4dHJ1ZGVkIGZhY2UgYW5kIHRoZSBlbGxpcHNvaWQgc3VyZmFjZS5cbiAqIEBwYXJhbSB7VmVydGV4Rm9ybWF0fSBbb3B0aW9ucy52ZXJ0ZXhGb3JtYXQ9VmVydGV4Rm9ybWF0LkRFRkFVTFRdIFRoZSB2ZXJ0ZXggYXR0cmlidXRlcyB0byBiZSBjb21wdXRlZC5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5zdFJvdGF0aW9uPTAuMF0gVGhlIHJvdGF0aW9uIG9mIHRoZSB0ZXh0dXJlIGNvb3JkaW5hdGVzLCBpbiByYWRpYW5zLiBBIHBvc2l0aXZlIHJvdGF0aW9uIGlzIGNvdW50ZXItY2xvY2t3aXNlLlxuICogQHBhcmFtIHtFbGxpcHNvaWR9IFtvcHRpb25zLmVsbGlwc29pZD1FbGxpcHNvaWQuV0dTODRdIFRoZSBlbGxpcHNvaWQgdG8gYmUgdXNlZCBhcyBhIHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5ncmFudWxhcml0eT1DZXNpdW1NYXRoLlJBRElBTlNfUEVSX0RFR1JFRV0gVGhlIGRpc3RhbmNlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIGVhY2ggbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZS4gRGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIHBvc2l0aW9ucyBpbiB0aGUgYnVmZmVyLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5wZXJQb3NpdGlvbkhlaWdodD1mYWxzZV0gVXNlIHRoZSBoZWlnaHQgb2Ygb3B0aW9ucy5wb3NpdGlvbnMgZm9yIGVhY2ggcG9zaXRpb24gaW5zdGVhZCBvZiB1c2luZyBvcHRpb25zLmhlaWdodCB0byBkZXRlcm1pbmUgdGhlIGhlaWdodC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY2xvc2VUb3A9dHJ1ZV0gV2hlbiBmYWxzZSwgbGVhdmVzIG9mZiB0aGUgdG9wIG9mIGFuIGV4dHJ1ZGVkIHBvbHlnb24gb3Blbi5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY2xvc2VCb3R0b209dHJ1ZV0gV2hlbiBmYWxzZSwgbGVhdmVzIG9mZiB0aGUgYm90dG9tIG9mIGFuIGV4dHJ1ZGVkIHBvbHlnb24gb3Blbi5cbiAqIEBwYXJhbSB7QXJjVHlwZX0gW29wdGlvbnMuYXJjVHlwZT1BcmNUeXBlLkdFT0RFU0lDXSBUaGUgdHlwZSBvZiBsaW5lIHRoZSBwb2x5Z29uIGVkZ2VzIG11c3QgZm9sbG93LiBWYWxpZCBvcHRpb25zIGFyZSB7QGxpbmsgQXJjVHlwZS5HRU9ERVNJQ30gYW5kIHtAbGluayBBcmNUeXBlLlJIVU1CfS5cbiAqXG4gKiBAc2VlIFBvbHlnb25HZW9tZXRyeSNjcmVhdGVHZW9tZXRyeVxuICogQHNlZSBQb2x5Z29uR2VvbWV0cnkjZnJvbVBvc2l0aW9uc1xuICpcbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1Qb2x5Z29uLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgUG9seWdvbiBEZW1vfVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyAxLiBjcmVhdGUgYSBwb2x5Z29uIGZyb20gcG9pbnRzXG4gKiB2YXIgcG9seWdvbiA9IG5ldyBDZXNpdW0uUG9seWdvbkdlb21ldHJ5KHtcbiAqICAgcG9seWdvbkhpZXJhcmNoeSA6IG5ldyBDZXNpdW0uUG9seWdvbkhpZXJhcmNoeShcbiAqICAgICBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAgIC03Mi4wLCA0MC4wLFxuICogICAgICAgLTcwLjAsIDM1LjAsXG4gKiAgICAgICAtNzUuMCwgMzAuMCxcbiAqICAgICAgIC03MC4wLCAzMC4wLFxuICogICAgICAgLTY4LjAsIDQwLjBcbiAqICAgICBdKVxuICogICApXG4gKiB9KTtcbiAqIHZhciBnZW9tZXRyeSA9IENlc2l1bS5Qb2x5Z29uR2VvbWV0cnkuY3JlYXRlR2VvbWV0cnkocG9seWdvbik7XG4gKlxuICogLy8gMi4gY3JlYXRlIGEgbmVzdGVkIHBvbHlnb24gd2l0aCBob2xlc1xuICogdmFyIHBvbHlnb25XaXRoSG9sZSA9IG5ldyBDZXNpdW0uUG9seWdvbkdlb21ldHJ5KHtcbiAqICAgcG9seWdvbkhpZXJhcmNoeSA6IG5ldyBDZXNpdW0uUG9seWdvbkhpZXJhcmNoeShcbiAqICAgICBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAgIC0xMDkuMCwgMzAuMCxcbiAqICAgICAgIC05NS4wLCAzMC4wLFxuICogICAgICAgLTk1LjAsIDQwLjAsXG4gKiAgICAgICAtMTA5LjAsIDQwLjBcbiAqICAgICBdKSxcbiAqICAgICBbbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KFxuICogICAgICAgQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXNBcnJheShbXG4gKiAgICAgICAgIC0xMDcuMCwgMzEuMCxcbiAqICAgICAgICAgLTEwNy4wLCAzOS4wLFxuICogICAgICAgICAtOTcuMCwgMzkuMCxcbiAqICAgICAgICAgLTk3LjAsIDMxLjBcbiAqICAgICAgIF0pLFxuICogICAgICAgW25ldyBDZXNpdW0uUG9seWdvbkhpZXJhcmNoeShcbiAqICAgICAgICAgQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXNBcnJheShbXG4gKiAgICAgICAgICAgLTEwNS4wLCAzMy4wLFxuICogICAgICAgICAgIC05OS4wLCAzMy4wLFxuICogICAgICAgICAgIC05OS4wLCAzNy4wLFxuICogICAgICAgICAgIC0xMDUuMCwgMzcuMFxuICogICAgICAgICBdKSxcbiAqICAgICAgICAgW25ldyBDZXNpdW0uUG9seWdvbkhpZXJhcmNoeShcbiAqICAgICAgICAgICBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAgICAgICAgIC0xMDMuMCwgMzQuMCxcbiAqICAgICAgICAgICAgIC0xMDEuMCwgMzQuMCxcbiAqICAgICAgICAgICAgIC0xMDEuMCwgMzYuMCxcbiAqICAgICAgICAgICAgIC0xMDMuMCwgMzYuMFxuICogICAgICAgICAgIF0pXG4gKiAgICAgICAgICldXG4gKiAgICAgICApXVxuICogICAgICldXG4gKiAgIClcbiAqIH0pO1xuICogdmFyIGdlb21ldHJ5ID0gQ2VzaXVtLlBvbHlnb25HZW9tZXRyeS5jcmVhdGVHZW9tZXRyeShwb2x5Z29uV2l0aEhvbGUpO1xuICpcbiAqIC8vIDMuIGNyZWF0ZSBleHRydWRlZCBwb2x5Z29uXG4gKiB2YXIgZXh0cnVkZWRQb2x5Z29uID0gbmV3IENlc2l1bS5Qb2x5Z29uR2VvbWV0cnkoe1xuICogICBwb2x5Z29uSGllcmFyY2h5IDogbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KFxuICogICAgIENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgICAgLTcyLjAsIDQwLjAsXG4gKiAgICAgICAtNzAuMCwgMzUuMCxcbiAqICAgICAgIC03NS4wLCAzMC4wLFxuICogICAgICAgLTcwLjAsIDMwLjAsXG4gKiAgICAgICAtNjguMCwgNDAuMFxuICogICAgIF0pXG4gKiAgICksXG4gKiAgIGV4dHJ1ZGVkSGVpZ2h0OiAzMDAwMDBcbiAqIH0pO1xuICogdmFyIGdlb21ldHJ5ID0gQ2VzaXVtLlBvbHlnb25HZW9tZXRyeS5jcmVhdGVHZW9tZXRyeShleHRydWRlZFBvbHlnb24pO1xuICovXG5mdW5jdGlvbiBQb2x5Z29uR2VvbWV0cnkob3B0aW9ucykge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9uc1wiLCBvcHRpb25zKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMucG9seWdvbkhpZXJhcmNoeVwiLCBvcHRpb25zLnBvbHlnb25IaWVyYXJjaHkpO1xuICBpZiAoXG4gICAgZGVmaW5lZChvcHRpb25zLnBlclBvc2l0aW9uSGVpZ2h0KSAmJlxuICAgIG9wdGlvbnMucGVyUG9zaXRpb25IZWlnaHQgJiZcbiAgICBkZWZpbmVkKG9wdGlvbnMuaGVpZ2h0KVxuICApIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIkNhbm5vdCB1c2UgYm90aCBvcHRpb25zLnBlclBvc2l0aW9uSGVpZ2h0IGFuZCBvcHRpb25zLmhlaWdodFwiXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgZGVmaW5lZChvcHRpb25zLmFyY1R5cGUpICYmXG4gICAgb3B0aW9ucy5hcmNUeXBlICE9PSBBcmNUeXBlLkdFT0RFU0lDICYmXG4gICAgb3B0aW9ucy5hcmNUeXBlICE9PSBBcmNUeXBlLlJIVU1CXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiSW52YWxpZCBhcmNUeXBlLiBWYWxpZCBvcHRpb25zIGFyZSBBcmNUeXBlLkdFT0RFU0lDIGFuZCBBcmNUeXBlLlJIVU1CLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgcG9seWdvbkhpZXJhcmNoeSA9IG9wdGlvbnMucG9seWdvbkhpZXJhcmNoeTtcbiAgdmFyIHZlcnRleEZvcm1hdCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnZlcnRleEZvcm1hdCwgVmVydGV4Rm9ybWF0LkRFRkFVTFQpO1xuICB2YXIgZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZWxsaXBzb2lkLCBFbGxpcHNvaWQuV0dTODQpO1xuICB2YXIgZ3JhbnVsYXJpdHkgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5ncmFudWxhcml0eSxcbiAgICBDZXNpdW1NYXRoLlJBRElBTlNfUEVSX0RFR1JFRVxuICApO1xuICB2YXIgc3RSb3RhdGlvbiA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnN0Um90YXRpb24sIDAuMCk7XG4gIHZhciBwZXJQb3NpdGlvbkhlaWdodCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnBlclBvc2l0aW9uSGVpZ2h0LCBmYWxzZSk7XG4gIHZhciBwZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGUgPVxuICAgIHBlclBvc2l0aW9uSGVpZ2h0ICYmIGRlZmluZWQob3B0aW9ucy5leHRydWRlZEhlaWdodCk7XG4gIHZhciBoZWlnaHQgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5oZWlnaHQsIDAuMCk7XG4gIHZhciBleHRydWRlZEhlaWdodCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmV4dHJ1ZGVkSGVpZ2h0LCBoZWlnaHQpO1xuXG4gIGlmICghcGVyUG9zaXRpb25IZWlnaHRFeHRydWRlKSB7XG4gICAgdmFyIGggPSBNYXRoLm1heChoZWlnaHQsIGV4dHJ1ZGVkSGVpZ2h0KTtcbiAgICBleHRydWRlZEhlaWdodCA9IE1hdGgubWluKGhlaWdodCwgZXh0cnVkZWRIZWlnaHQpO1xuICAgIGhlaWdodCA9IGg7XG4gIH1cblxuICB0aGlzLl92ZXJ0ZXhGb3JtYXQgPSBWZXJ0ZXhGb3JtYXQuY2xvbmUodmVydGV4Rm9ybWF0KTtcbiAgdGhpcy5fZWxsaXBzb2lkID0gRWxsaXBzb2lkLmNsb25lKGVsbGlwc29pZCk7XG4gIHRoaXMuX2dyYW51bGFyaXR5ID0gZ3JhbnVsYXJpdHk7XG4gIHRoaXMuX3N0Um90YXRpb24gPSBzdFJvdGF0aW9uO1xuICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gIHRoaXMuX2V4dHJ1ZGVkSGVpZ2h0ID0gZXh0cnVkZWRIZWlnaHQ7XG4gIHRoaXMuX2Nsb3NlVG9wID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuY2xvc2VUb3AsIHRydWUpO1xuICB0aGlzLl9jbG9zZUJvdHRvbSA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNsb3NlQm90dG9tLCB0cnVlKTtcbiAgdGhpcy5fcG9seWdvbkhpZXJhcmNoeSA9IHBvbHlnb25IaWVyYXJjaHk7XG4gIHRoaXMuX3BlclBvc2l0aW9uSGVpZ2h0ID0gcGVyUG9zaXRpb25IZWlnaHQ7XG4gIHRoaXMuX3BlclBvc2l0aW9uSGVpZ2h0RXh0cnVkZSA9IHBlclBvc2l0aW9uSGVpZ2h0RXh0cnVkZTtcbiAgdGhpcy5fc2hhZG93Vm9sdW1lID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2hhZG93Vm9sdW1lLCBmYWxzZSk7XG4gIHRoaXMuX3dvcmtlck5hbWUgPSBcImNyZWF0ZVBvbHlnb25HZW9tZXRyeVwiO1xuICB0aGlzLl9vZmZzZXRBdHRyaWJ1dGUgPSBvcHRpb25zLm9mZnNldEF0dHJpYnV0ZTtcbiAgdGhpcy5fYXJjVHlwZSA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmFyY1R5cGUsIEFyY1R5cGUuR0VPREVTSUMpO1xuXG4gIHRoaXMuX3JlY3RhbmdsZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdGV4dHVyZUNvb3JkaW5hdGVSb3RhdGlvblBvaW50cyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBlbGVtZW50cyB1c2VkIHRvIHBhY2sgdGhlIG9iamVjdCBpbnRvIGFuIGFycmF5LlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgdGhpcy5wYWNrZWRMZW5ndGggPVxuICAgIFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuY29tcHV0ZUhpZXJhcmNoeVBhY2tlZExlbmd0aChwb2x5Z29uSGllcmFyY2h5KSArXG4gICAgRWxsaXBzb2lkLnBhY2tlZExlbmd0aCArXG4gICAgVmVydGV4Rm9ybWF0LnBhY2tlZExlbmd0aCArXG4gICAgMTI7XG59XG5cbi8qKlxuICogQSBkZXNjcmlwdGlvbiBvZiBhIHBvbHlnb24gZnJvbSBhbiBhcnJheSBvZiBwb3NpdGlvbnMuIFBvbHlnb24gZ2VvbWV0cnkgY2FuIGJlIHJlbmRlcmVkIHdpdGggYm90aCB7QGxpbmsgUHJpbWl0aXZlfSBhbmQge0BsaW5rIEdyb3VuZFByaW1pdGl2ZX0uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zW119IG9wdGlvbnMucG9zaXRpb25zIEFuIGFycmF5IG9mIHBvc2l0aW9ucyB0aGF0IGRlZmluZWQgdGhlIGNvcm5lciBwb2ludHMgb2YgdGhlIHBvbHlnb24uXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTAuMF0gVGhlIGhlaWdodCBvZiB0aGUgcG9seWdvbi5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5leHRydWRlZEhlaWdodF0gVGhlIGhlaWdodCBvZiB0aGUgcG9seWdvbiBleHRydXNpb24uXG4gKiBAcGFyYW0ge1ZlcnRleEZvcm1hdH0gW29wdGlvbnMudmVydGV4Rm9ybWF0PVZlcnRleEZvcm1hdC5ERUZBVUxUXSBUaGUgdmVydGV4IGF0dHJpYnV0ZXMgdG8gYmUgY29tcHV0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuc3RSb3RhdGlvbj0wLjBdIFRoZSByb3RhdGlvbiBvZiB0aGUgdGV4dHVyZSBjb29yZGluYXRlcywgaW4gcmFkaWFucy4gQSBwb3NpdGl2ZSByb3RhdGlvbiBpcyBjb3VudGVyLWNsb2Nrd2lzZS5cbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWQ9RWxsaXBzb2lkLldHUzg0XSBUaGUgZWxsaXBzb2lkIHRvIGJlIHVzZWQgYXMgYSByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZ3JhbnVsYXJpdHk9Q2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVdIFRoZSBkaXN0YW5jZSwgaW4gcmFkaWFucywgYmV0d2VlbiBlYWNoIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUuIERldGVybWluZXMgdGhlIG51bWJlciBvZiBwb3NpdGlvbnMgaW4gdGhlIGJ1ZmZlci5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMucGVyUG9zaXRpb25IZWlnaHQ9ZmFsc2VdIFVzZSB0aGUgaGVpZ2h0IG9mIG9wdGlvbnMucG9zaXRpb25zIGZvciBlYWNoIHBvc2l0aW9uIGluc3RlYWQgb2YgdXNpbmcgb3B0aW9ucy5oZWlnaHQgdG8gZGV0ZXJtaW5lIHRoZSBoZWlnaHQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsb3NlVG9wPXRydWVdIFdoZW4gZmFsc2UsIGxlYXZlcyBvZmYgdGhlIHRvcCBvZiBhbiBleHRydWRlZCBwb2x5Z29uIG9wZW4uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsb3NlQm90dG9tPXRydWVdIFdoZW4gZmFsc2UsIGxlYXZlcyBvZmYgdGhlIGJvdHRvbSBvZiBhbiBleHRydWRlZCBwb2x5Z29uIG9wZW4uXG4gKiBAcGFyYW0ge0FyY1R5cGV9IFtvcHRpb25zLmFyY1R5cGU9QXJjVHlwZS5HRU9ERVNJQ10gVGhlIHR5cGUgb2YgbGluZSB0aGUgcG9seWdvbiBlZGdlcyBtdXN0IGZvbGxvdy4gVmFsaWQgb3B0aW9ucyBhcmUge0BsaW5rIEFyY1R5cGUuR0VPREVTSUN9IGFuZCB7QGxpbmsgQXJjVHlwZS5SSFVNQn0uXG4gKiBAcmV0dXJucyB7UG9seWdvbkdlb21ldHJ5fVxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gY3JlYXRlIGEgcG9seWdvbiBmcm9tIHBvaW50c1xuICogdmFyIHBvbHlnb24gPSBDZXNpdW0uUG9seWdvbkdlb21ldHJ5LmZyb21Qb3NpdGlvbnMoe1xuICogICBwb3NpdGlvbnMgOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAtNzIuMCwgNDAuMCxcbiAqICAgICAtNzAuMCwgMzUuMCxcbiAqICAgICAtNzUuMCwgMzAuMCxcbiAqICAgICAtNzAuMCwgMzAuMCxcbiAqICAgICAtNjguMCwgNDAuMFxuICogICBdKVxuICogfSk7XG4gKiB2YXIgZ2VvbWV0cnkgPSBDZXNpdW0uUG9seWdvbkdlb21ldHJ5LmNyZWF0ZUdlb21ldHJ5KHBvbHlnb24pO1xuICpcbiAqIEBzZWUgUG9seWdvbkdlb21ldHJ5I2NyZWF0ZUdlb21ldHJ5XG4gKi9cblBvbHlnb25HZW9tZXRyeS5mcm9tUG9zaXRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay5kZWZpbmVkKFwib3B0aW9ucy5wb3NpdGlvbnNcIiwgb3B0aW9ucy5wb3NpdGlvbnMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgbmV3T3B0aW9ucyA9IHtcbiAgICBwb2x5Z29uSGllcmFyY2h5OiB7XG4gICAgICBwb3NpdGlvbnM6IG9wdGlvbnMucG9zaXRpb25zLFxuICAgIH0sXG4gICAgaGVpZ2h0OiBvcHRpb25zLmhlaWdodCxcbiAgICBleHRydWRlZEhlaWdodDogb3B0aW9ucy5leHRydWRlZEhlaWdodCxcbiAgICB2ZXJ0ZXhGb3JtYXQ6IG9wdGlvbnMudmVydGV4Rm9ybWF0LFxuICAgIHN0Um90YXRpb246IG9wdGlvbnMuc3RSb3RhdGlvbixcbiAgICBlbGxpcHNvaWQ6IG9wdGlvbnMuZWxsaXBzb2lkLFxuICAgIGdyYW51bGFyaXR5OiBvcHRpb25zLmdyYW51bGFyaXR5LFxuICAgIHBlclBvc2l0aW9uSGVpZ2h0OiBvcHRpb25zLnBlclBvc2l0aW9uSGVpZ2h0LFxuICAgIGNsb3NlVG9wOiBvcHRpb25zLmNsb3NlVG9wLFxuICAgIGNsb3NlQm90dG9tOiBvcHRpb25zLmNsb3NlQm90dG9tLFxuICAgIG9mZnNldEF0dHJpYnV0ZTogb3B0aW9ucy5vZmZzZXRBdHRyaWJ1dGUsXG4gICAgYXJjVHlwZTogb3B0aW9ucy5hcmNUeXBlLFxuICB9O1xuICByZXR1cm4gbmV3IFBvbHlnb25HZW9tZXRyeShuZXdPcHRpb25zKTtcbn07XG5cbi8qKlxuICogU3RvcmVzIHRoZSBwcm92aWRlZCBpbnN0YW5jZSBpbnRvIHRoZSBwcm92aWRlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlnb25HZW9tZXRyeX0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhY2suXG4gKiBAcGFyYW0ge051bWJlcltdfSBhcnJheSBUaGUgYXJyYXkgdG8gcGFjayBpbnRvLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydGluZ0luZGV4PTBdIFRoZSBpbmRleCBpbnRvIHRoZSBhcnJheSBhdCB3aGljaCB0byBzdGFydCBwYWNraW5nIHRoZSBlbGVtZW50cy5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyW119IFRoZSBhcnJheSB0aGF0IHdhcyBwYWNrZWQgaW50b1xuICovXG5Qb2x5Z29uR2VvbWV0cnkucGFjayA9IGZ1bmN0aW9uICh2YWx1ZSwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcInZhbHVlXCIsIHZhbHVlKTtcbiAgQ2hlY2suZGVmaW5lZChcImFycmF5XCIsIGFycmF5KTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgc3RhcnRpbmdJbmRleCA9IGRlZmF1bHRWYWx1ZShzdGFydGluZ0luZGV4LCAwKTtcblxuICBzdGFydGluZ0luZGV4ID0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5wYWNrUG9seWdvbkhpZXJhcmNoeShcbiAgICB2YWx1ZS5fcG9seWdvbkhpZXJhcmNoeSxcbiAgICBhcnJheSxcbiAgICBzdGFydGluZ0luZGV4XG4gICk7XG5cbiAgRWxsaXBzb2lkLnBhY2sodmFsdWUuX2VsbGlwc29pZCwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICBzdGFydGluZ0luZGV4ICs9IEVsbGlwc29pZC5wYWNrZWRMZW5ndGg7XG5cbiAgVmVydGV4Rm9ybWF0LnBhY2sodmFsdWUuX3ZlcnRleEZvcm1hdCwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICBzdGFydGluZ0luZGV4ICs9IFZlcnRleEZvcm1hdC5wYWNrZWRMZW5ndGg7XG5cbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl9oZWlnaHQ7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fZXh0cnVkZWRIZWlnaHQ7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fZ3JhbnVsYXJpdHk7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fc3RSb3RhdGlvbjtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl9wZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGUgPyAxLjAgOiAwLjA7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fcGVyUG9zaXRpb25IZWlnaHQgPyAxLjAgOiAwLjA7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fY2xvc2VUb3AgPyAxLjAgOiAwLjA7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fY2xvc2VCb3R0b20gPyAxLjAgOiAwLjA7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fc2hhZG93Vm9sdW1lID8gMS4wIDogMC4wO1xuICBhcnJheVtzdGFydGluZ0luZGV4KytdID0gZGVmYXVsdFZhbHVlKHZhbHVlLl9vZmZzZXRBdHRyaWJ1dGUsIC0xKTtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl9hcmNUeXBlO1xuICBhcnJheVtzdGFydGluZ0luZGV4XSA9IHZhbHVlLnBhY2tlZExlbmd0aDtcblxuICByZXR1cm4gYXJyYXk7XG59O1xuXG52YXIgc2NyYXRjaEVsbGlwc29pZCA9IEVsbGlwc29pZC5jbG9uZShFbGxpcHNvaWQuVU5JVF9TUEhFUkUpO1xudmFyIHNjcmF0Y2hWZXJ0ZXhGb3JtYXQgPSBuZXcgVmVydGV4Rm9ybWF0KCk7XG5cbi8vT25seSB1c2VkIHRvIGF2b2lkIGluYWJpbGl0eSB0byBkZWZhdWx0IGNvbnN0cnVjdC5cbnZhciBkdW1teU9wdGlvbnMgPSB7XG4gIHBvbHlnb25IaWVyYXJjaHk6IHt9LFxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgYW4gaW5zdGFuY2UgZnJvbSBhIHBhY2tlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcltdfSBhcnJheSBUaGUgcGFja2VkIGFycmF5LlxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydGluZ0luZGV4PTBdIFRoZSBzdGFydGluZyBpbmRleCBvZiB0aGUgZWxlbWVudCB0byBiZSB1bnBhY2tlZC5cbiAqIEBwYXJhbSB7UG9seWdvbkdlb21ldHJ5fSBbcmVzdWx0XSBUaGUgb2JqZWN0IGludG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqL1xuUG9seWdvbkdlb21ldHJ5LnVucGFjayA9IGZ1bmN0aW9uIChhcnJheSwgc3RhcnRpbmdJbmRleCwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLmRlZmluZWQoXCJhcnJheVwiLCBhcnJheSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHN0YXJ0aW5nSW5kZXggPSBkZWZhdWx0VmFsdWUoc3RhcnRpbmdJbmRleCwgMCk7XG5cbiAgdmFyIHBvbHlnb25IaWVyYXJjaHkgPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnVucGFja1BvbHlnb25IaWVyYXJjaHkoXG4gICAgYXJyYXksXG4gICAgc3RhcnRpbmdJbmRleFxuICApO1xuICBzdGFydGluZ0luZGV4ID0gcG9seWdvbkhpZXJhcmNoeS5zdGFydGluZ0luZGV4O1xuICBkZWxldGUgcG9seWdvbkhpZXJhcmNoeS5zdGFydGluZ0luZGV4O1xuXG4gIHZhciBlbGxpcHNvaWQgPSBFbGxpcHNvaWQudW5wYWNrKGFycmF5LCBzdGFydGluZ0luZGV4LCBzY3JhdGNoRWxsaXBzb2lkKTtcbiAgc3RhcnRpbmdJbmRleCArPSBFbGxpcHNvaWQucGFja2VkTGVuZ3RoO1xuXG4gIHZhciB2ZXJ0ZXhGb3JtYXQgPSBWZXJ0ZXhGb3JtYXQudW5wYWNrKFxuICAgIGFycmF5LFxuICAgIHN0YXJ0aW5nSW5kZXgsXG4gICAgc2NyYXRjaFZlcnRleEZvcm1hdFxuICApO1xuICBzdGFydGluZ0luZGV4ICs9IFZlcnRleEZvcm1hdC5wYWNrZWRMZW5ndGg7XG5cbiAgdmFyIGhlaWdodCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBleHRydWRlZEhlaWdodCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBncmFudWxhcml0eSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBzdFJvdGF0aW9uID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIHBlclBvc2l0aW9uSGVpZ2h0RXh0cnVkZSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPT09IDEuMDtcbiAgdmFyIHBlclBvc2l0aW9uSGVpZ2h0ID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9PT0gMS4wO1xuICB2YXIgY2xvc2VUb3AgPSBhcnJheVtzdGFydGluZ0luZGV4KytdID09PSAxLjA7XG4gIHZhciBjbG9zZUJvdHRvbSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPT09IDEuMDtcbiAgdmFyIHNoYWRvd1ZvbHVtZSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPT09IDEuMDtcbiAgdmFyIG9mZnNldEF0dHJpYnV0ZSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBhcmNUeXBlID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIHBhY2tlZExlbmd0aCA9IGFycmF5W3N0YXJ0aW5nSW5kZXhdO1xuXG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IFBvbHlnb25HZW9tZXRyeShkdW1teU9wdGlvbnMpO1xuICB9XG5cbiAgcmVzdWx0Ll9wb2x5Z29uSGllcmFyY2h5ID0gcG9seWdvbkhpZXJhcmNoeTtcbiAgcmVzdWx0Ll9lbGxpcHNvaWQgPSBFbGxpcHNvaWQuY2xvbmUoZWxsaXBzb2lkLCByZXN1bHQuX2VsbGlwc29pZCk7XG4gIHJlc3VsdC5fdmVydGV4Rm9ybWF0ID0gVmVydGV4Rm9ybWF0LmNsb25lKHZlcnRleEZvcm1hdCwgcmVzdWx0Ll92ZXJ0ZXhGb3JtYXQpO1xuICByZXN1bHQuX2hlaWdodCA9IGhlaWdodDtcbiAgcmVzdWx0Ll9leHRydWRlZEhlaWdodCA9IGV4dHJ1ZGVkSGVpZ2h0O1xuICByZXN1bHQuX2dyYW51bGFyaXR5ID0gZ3JhbnVsYXJpdHk7XG4gIHJlc3VsdC5fc3RSb3RhdGlvbiA9IHN0Um90YXRpb247XG4gIHJlc3VsdC5fcGVyUG9zaXRpb25IZWlnaHRFeHRydWRlID0gcGVyUG9zaXRpb25IZWlnaHRFeHRydWRlO1xuICByZXN1bHQuX3BlclBvc2l0aW9uSGVpZ2h0ID0gcGVyUG9zaXRpb25IZWlnaHQ7XG4gIHJlc3VsdC5fY2xvc2VUb3AgPSBjbG9zZVRvcDtcbiAgcmVzdWx0Ll9jbG9zZUJvdHRvbSA9IGNsb3NlQm90dG9tO1xuICByZXN1bHQuX3NoYWRvd1ZvbHVtZSA9IHNoYWRvd1ZvbHVtZTtcbiAgcmVzdWx0Ll9vZmZzZXRBdHRyaWJ1dGUgPVxuICAgIG9mZnNldEF0dHJpYnV0ZSA9PT0gLTEgPyB1bmRlZmluZWQgOiBvZmZzZXRBdHRyaWJ1dGU7XG4gIHJlc3VsdC5fYXJjVHlwZSA9IGFyY1R5cGU7XG4gIHJlc3VsdC5wYWNrZWRMZW5ndGggPSBwYWNrZWRMZW5ndGg7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGJvdW5kaW5nIHJlY3RhbmdsZSBnaXZlbiB0aGUgcHJvdmlkZWQgb3B0aW9uc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UG9seWdvbkhpZXJhcmNoeX0gb3B0aW9ucy5wb2x5Z29uSGllcmFyY2h5IEEgcG9seWdvbiBoaWVyYXJjaHkgdGhhdCBjYW4gaW5jbHVkZSBob2xlcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5ncmFudWxhcml0eT1DZXNpdW1NYXRoLlJBRElBTlNfUEVSX0RFR1JFRV0gVGhlIGRpc3RhbmNlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIGVhY2ggbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZS4gRGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIHBvc2l0aW9ucyBzYW1wbGVkLlxuICogQHBhcmFtIHtBcmNUeXBlfSBbb3B0aW9ucy5hcmNUeXBlPUFyY1R5cGUuR0VPREVTSUNdIFRoZSB0eXBlIG9mIGxpbmUgdGhlIHBvbHlnb24gZWRnZXMgbXVzdCBmb2xsb3cuIFZhbGlkIG9wdGlvbnMgYXJlIHtAbGluayBBcmNUeXBlLkdFT0RFU0lDfSBhbmQge0BsaW5rIEFyY1R5cGUuUkhVTUJ9LlxuICogQHBhcmFtIHtFbGxpcHNvaWR9IFtvcHRpb25zLmVsbGlwc29pZD1FbGxpcHNvaWQuV0dTODRdIFRoZSBlbGxpcHNvaWQgdG8gYmUgdXNlZCBhcyBhIHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7UmVjdGFuZ2xlfSBbcmVzdWx0XSBBbiBvYmplY3QgaW4gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqXG4gKiBAcmV0dXJucyB7UmVjdGFuZ2xlfSBUaGUgcmVzdWx0IHJlY3RhbmdsZVxuICovXG5Qb2x5Z29uR2VvbWV0cnkuY29tcHV0ZVJlY3RhbmdsZSA9IGZ1bmN0aW9uIChvcHRpb25zLCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnNcIiwgb3B0aW9ucyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLnBvbHlnb25IaWVyYXJjaHlcIiwgb3B0aW9ucy5wb2x5Z29uSGllcmFyY2h5KTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGdyYW51bGFyaXR5ID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZ3JhbnVsYXJpdHksXG4gICAgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVcbiAgKTtcbiAgdmFyIGFyY1R5cGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5hcmNUeXBlLCBBcmNUeXBlLkdFT0RFU0lDKTtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKGFyY1R5cGUgIT09IEFyY1R5cGUuR0VPREVTSUMgJiYgYXJjVHlwZSAhPT0gQXJjVHlwZS5SSFVNQikge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiSW52YWxpZCBhcmNUeXBlLiBWYWxpZCBvcHRpb25zIGFyZSBBcmNUeXBlLkdFT0RFU0lDIGFuZCBBcmNUeXBlLlJIVU1CLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgcG9seWdvbkhpZXJhcmNoeSA9IG9wdGlvbnMucG9seWdvbkhpZXJhcmNoeTtcbiAgdmFyIGVsbGlwc29pZCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KTtcblxuICByZXR1cm4gY29tcHV0ZVJlY3RhbmdsZShcbiAgICBwb2x5Z29uSGllcmFyY2h5LnBvc2l0aW9ucyxcbiAgICBlbGxpcHNvaWQsXG4gICAgYXJjVHlwZSxcbiAgICBncmFudWxhcml0eSxcbiAgICByZXN1bHRcbiAgKTtcbn07XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGdlb21ldHJpYyByZXByZXNlbnRhdGlvbiBvZiBhIHBvbHlnb24sIGluY2x1ZGluZyBpdHMgdmVydGljZXMsIGluZGljZXMsIGFuZCBhIGJvdW5kaW5nIHNwaGVyZS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlnb25HZW9tZXRyeX0gcG9seWdvbkdlb21ldHJ5IEEgZGVzY3JpcHRpb24gb2YgdGhlIHBvbHlnb24uXG4gKiBAcmV0dXJucyB7R2VvbWV0cnl8dW5kZWZpbmVkfSBUaGUgY29tcHV0ZWQgdmVydGljZXMgYW5kIGluZGljZXMuXG4gKi9cblBvbHlnb25HZW9tZXRyeS5jcmVhdGVHZW9tZXRyeSA9IGZ1bmN0aW9uIChwb2x5Z29uR2VvbWV0cnkpIHtcbiAgdmFyIHZlcnRleEZvcm1hdCA9IHBvbHlnb25HZW9tZXRyeS5fdmVydGV4Rm9ybWF0O1xuICB2YXIgZWxsaXBzb2lkID0gcG9seWdvbkdlb21ldHJ5Ll9lbGxpcHNvaWQ7XG4gIHZhciBncmFudWxhcml0eSA9IHBvbHlnb25HZW9tZXRyeS5fZ3JhbnVsYXJpdHk7XG4gIHZhciBzdFJvdGF0aW9uID0gcG9seWdvbkdlb21ldHJ5Ll9zdFJvdGF0aW9uO1xuICB2YXIgcG9seWdvbkhpZXJhcmNoeSA9IHBvbHlnb25HZW9tZXRyeS5fcG9seWdvbkhpZXJhcmNoeTtcbiAgdmFyIHBlclBvc2l0aW9uSGVpZ2h0ID0gcG9seWdvbkdlb21ldHJ5Ll9wZXJQb3NpdGlvbkhlaWdodDtcbiAgdmFyIGNsb3NlVG9wID0gcG9seWdvbkdlb21ldHJ5Ll9jbG9zZVRvcDtcbiAgdmFyIGNsb3NlQm90dG9tID0gcG9seWdvbkdlb21ldHJ5Ll9jbG9zZUJvdHRvbTtcbiAgdmFyIGFyY1R5cGUgPSBwb2x5Z29uR2VvbWV0cnkuX2FyY1R5cGU7XG5cbiAgdmFyIG91dGVyUG9zaXRpb25zID0gcG9seWdvbkhpZXJhcmNoeS5wb3NpdGlvbnM7XG4gIGlmIChvdXRlclBvc2l0aW9ucy5sZW5ndGggPCAzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHRhbmdlbnRQbGFuZSA9IEVsbGlwc29pZFRhbmdlbnRQbGFuZS5mcm9tUG9pbnRzKFxuICAgIG91dGVyUG9zaXRpb25zLFxuICAgIGVsbGlwc29pZFxuICApO1xuXG4gIHZhciByZXN1bHRzID0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5wb2x5Z29uc0Zyb21IaWVyYXJjaHkoXG4gICAgcG9seWdvbkhpZXJhcmNoeSxcbiAgICB0YW5nZW50UGxhbmUucHJvamVjdFBvaW50c09udG9QbGFuZS5iaW5kKHRhbmdlbnRQbGFuZSksXG4gICAgIXBlclBvc2l0aW9uSGVpZ2h0LFxuICAgIGVsbGlwc29pZFxuICApO1xuXG4gIHZhciBoaWVyYXJjaHkgPSByZXN1bHRzLmhpZXJhcmNoeTtcbiAgdmFyIHBvbHlnb25zID0gcmVzdWx0cy5wb2x5Z29ucztcblxuICBpZiAoaGllcmFyY2h5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG91dGVyUG9zaXRpb25zID0gaGllcmFyY2h5WzBdLm91dGVyUmluZztcbiAgdmFyIGJvdW5kaW5nUmVjdGFuZ2xlID0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5jb21wdXRlQm91bmRpbmdSZWN0YW5nbGUoXG4gICAgdGFuZ2VudFBsYW5lLnBsYW5lLm5vcm1hbCxcbiAgICB0YW5nZW50UGxhbmUucHJvamVjdFBvaW50T250b1BsYW5lLmJpbmQodGFuZ2VudFBsYW5lKSxcbiAgICBvdXRlclBvc2l0aW9ucyxcbiAgICBzdFJvdGF0aW9uLFxuICAgIHNjcmF0Y2hCb3VuZGluZ1JlY3RhbmdsZVxuICApO1xuXG4gIHZhciBnZW9tZXRyaWVzID0gW107XG5cbiAgdmFyIGhlaWdodCA9IHBvbHlnb25HZW9tZXRyeS5faGVpZ2h0O1xuICB2YXIgZXh0cnVkZWRIZWlnaHQgPSBwb2x5Z29uR2VvbWV0cnkuX2V4dHJ1ZGVkSGVpZ2h0O1xuICB2YXIgZXh0cnVkZSA9XG4gICAgcG9seWdvbkdlb21ldHJ5Ll9wZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGUgfHxcbiAgICAhQ2VzaXVtTWF0aC5lcXVhbHNFcHNpbG9uKGhlaWdodCwgZXh0cnVkZWRIZWlnaHQsIDAsIENlc2l1bU1hdGguRVBTSUxPTjIpO1xuXG4gIHZhciBvcHRpb25zID0ge1xuICAgIHBlclBvc2l0aW9uSGVpZ2h0OiBwZXJQb3NpdGlvbkhlaWdodCxcbiAgICB2ZXJ0ZXhGb3JtYXQ6IHZlcnRleEZvcm1hdCxcbiAgICBnZW9tZXRyeTogdW5kZWZpbmVkLFxuICAgIHRhbmdlbnRQbGFuZTogdGFuZ2VudFBsYW5lLFxuICAgIGJvdW5kaW5nUmVjdGFuZ2xlOiBib3VuZGluZ1JlY3RhbmdsZSxcbiAgICBlbGxpcHNvaWQ6IGVsbGlwc29pZCxcbiAgICBzdFJvdGF0aW9uOiBzdFJvdGF0aW9uLFxuICAgIGJvdHRvbTogZmFsc2UsXG4gICAgdG9wOiB0cnVlLFxuICAgIHdhbGw6IGZhbHNlLFxuICAgIGV4dHJ1ZGU6IGZhbHNlLFxuICAgIGFyY1R5cGU6IGFyY1R5cGUsXG4gIH07XG5cbiAgdmFyIGk7XG5cbiAgaWYgKGV4dHJ1ZGUpIHtcbiAgICBvcHRpb25zLmV4dHJ1ZGUgPSB0cnVlO1xuICAgIG9wdGlvbnMudG9wID0gY2xvc2VUb3A7XG4gICAgb3B0aW9ucy5ib3R0b20gPSBjbG9zZUJvdHRvbTtcbiAgICBvcHRpb25zLnNoYWRvd1ZvbHVtZSA9IHBvbHlnb25HZW9tZXRyeS5fc2hhZG93Vm9sdW1lO1xuICAgIG9wdGlvbnMub2Zmc2V0QXR0cmlidXRlID0gcG9seWdvbkdlb21ldHJ5Ll9vZmZzZXRBdHRyaWJ1dGU7XG4gICAgZm9yIChpID0gMDsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc3BsaXRHZW9tZXRyeSA9IGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc0V4dHJ1ZGVkKFxuICAgICAgICBlbGxpcHNvaWQsXG4gICAgICAgIHBvbHlnb25zW2ldLFxuICAgICAgICBncmFudWxhcml0eSxcbiAgICAgICAgaGllcmFyY2h5W2ldLFxuICAgICAgICBwZXJQb3NpdGlvbkhlaWdodCxcbiAgICAgICAgY2xvc2VUb3AsXG4gICAgICAgIGNsb3NlQm90dG9tLFxuICAgICAgICB2ZXJ0ZXhGb3JtYXQsXG4gICAgICAgIGFyY1R5cGVcbiAgICAgICk7XG5cbiAgICAgIHZhciB0b3BBbmRCb3R0b207XG4gICAgICBpZiAoY2xvc2VUb3AgJiYgY2xvc2VCb3R0b20pIHtcbiAgICAgICAgdG9wQW5kQm90dG9tID0gc3BsaXRHZW9tZXRyeS50b3BBbmRCb3R0b207XG4gICAgICAgIG9wdGlvbnMuZ2VvbWV0cnkgPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnNjYWxlVG9HZW9kZXRpY0hlaWdodEV4dHJ1ZGVkKFxuICAgICAgICAgIHRvcEFuZEJvdHRvbS5nZW9tZXRyeSxcbiAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgZXh0cnVkZWRIZWlnaHQsXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHBlclBvc2l0aW9uSGVpZ2h0XG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGNsb3NlVG9wKSB7XG4gICAgICAgIHRvcEFuZEJvdHRvbSA9IHNwbGl0R2VvbWV0cnkudG9wQW5kQm90dG9tO1xuICAgICAgICB0b3BBbmRCb3R0b20uZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXMgPSBQb2x5Z29uUGlwZWxpbmUuc2NhbGVUb0dlb2RldGljSGVpZ2h0KFxuICAgICAgICAgIHRvcEFuZEJvdHRvbS5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcyxcbiAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgICFwZXJQb3NpdGlvbkhlaWdodFxuICAgICAgICApO1xuICAgICAgICBvcHRpb25zLmdlb21ldHJ5ID0gdG9wQW5kQm90dG9tLmdlb21ldHJ5O1xuICAgICAgfSBlbHNlIGlmIChjbG9zZUJvdHRvbSkge1xuICAgICAgICB0b3BBbmRCb3R0b20gPSBzcGxpdEdlb21ldHJ5LnRvcEFuZEJvdHRvbTtcbiAgICAgICAgdG9wQW5kQm90dG9tLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzID0gUG9seWdvblBpcGVsaW5lLnNjYWxlVG9HZW9kZXRpY0hlaWdodChcbiAgICAgICAgICB0b3BBbmRCb3R0b20uZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXMsXG4gICAgICAgICAgZXh0cnVkZWRIZWlnaHQsXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKTtcbiAgICAgICAgb3B0aW9ucy5nZW9tZXRyeSA9IHRvcEFuZEJvdHRvbS5nZW9tZXRyeTtcbiAgICAgIH1cbiAgICAgIGlmIChjbG9zZVRvcCB8fCBjbG9zZUJvdHRvbSkge1xuICAgICAgICBvcHRpb25zLndhbGwgPSBmYWxzZTtcbiAgICAgICAgdG9wQW5kQm90dG9tLmdlb21ldHJ5ID0gY29tcHV0ZUF0dHJpYnV0ZXMob3B0aW9ucyk7XG4gICAgICAgIGdlb21ldHJpZXMucHVzaCh0b3BBbmRCb3R0b20pO1xuICAgICAgfVxuXG4gICAgICB2YXIgd2FsbHMgPSBzcGxpdEdlb21ldHJ5LndhbGxzO1xuICAgICAgb3B0aW9ucy53YWxsID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgd2FsbHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIHdhbGwgPSB3YWxsc1trXTtcbiAgICAgICAgb3B0aW9ucy5nZW9tZXRyeSA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc2NhbGVUb0dlb2RldGljSGVpZ2h0RXh0cnVkZWQoXG4gICAgICAgICAgd2FsbC5nZW9tZXRyeSxcbiAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgZXh0cnVkZWRIZWlnaHQsXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHBlclBvc2l0aW9uSGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIHdhbGwuZ2VvbWV0cnkgPSBjb21wdXRlQXR0cmlidXRlcyhvcHRpb25zKTtcbiAgICAgICAgZ2VvbWV0cmllcy5wdXNoKHdhbGwpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgcG9seWdvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBnZW9tZXRyeUluc3RhbmNlID0gbmV3IEdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgICBnZW9tZXRyeTogUG9seWdvbkdlb21ldHJ5TGlicmFyeS5jcmVhdGVHZW9tZXRyeUZyb21Qb3NpdGlvbnMoXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHBvbHlnb25zW2ldLFxuICAgICAgICAgIGdyYW51bGFyaXR5LFxuICAgICAgICAgIHBlclBvc2l0aW9uSGVpZ2h0LFxuICAgICAgICAgIHZlcnRleEZvcm1hdCxcbiAgICAgICAgICBhcmNUeXBlXG4gICAgICAgICksXG4gICAgICB9KTtcbiAgICAgIGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXMgPSBQb2x5Z29uUGlwZWxpbmUuc2NhbGVUb0dlb2RldGljSGVpZ2h0KFxuICAgICAgICBnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgIXBlclBvc2l0aW9uSGVpZ2h0XG4gICAgICApO1xuICAgICAgb3B0aW9ucy5nZW9tZXRyeSA9IGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnk7XG4gICAgICBnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5ID0gY29tcHV0ZUF0dHJpYnV0ZXMob3B0aW9ucyk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHBvbHlnb25HZW9tZXRyeS5fb2Zmc2V0QXR0cmlidXRlKSkge1xuICAgICAgICB2YXIgbGVuZ3RoID1cbiAgICAgICAgICBnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGFwcGx5T2Zmc2V0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoIC8gMyk7XG4gICAgICAgIHZhciBvZmZzZXRWYWx1ZSA9XG4gICAgICAgICAgcG9seWdvbkdlb21ldHJ5Ll9vZmZzZXRBdHRyaWJ1dGUgPT09IEdlb21ldHJ5T2Zmc2V0QXR0cmlidXRlLk5PTkVcbiAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgOiAxO1xuICAgICAgICBhcnJheUZpbGwoYXBwbHlPZmZzZXQsIG9mZnNldFZhbHVlKTtcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZS5nZW9tZXRyeS5hdHRyaWJ1dGVzLmFwcGx5T2Zmc2V0ID0gbmV3IEdlb21ldHJ5QXR0cmlidXRlKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFLFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMSxcbiAgICAgICAgICAgIHZhbHVlczogYXBwbHlPZmZzZXQsXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBnZW9tZXRyaWVzLnB1c2goZ2VvbWV0cnlJbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGdlb21ldHJ5ID0gR2VvbWV0cnlQaXBlbGluZS5jb21iaW5lSW5zdGFuY2VzKGdlb21ldHJpZXMpWzBdO1xuICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcyA9IG5ldyBGbG9hdDY0QXJyYXkoXG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXNcbiAgKTtcbiAgZ2VvbWV0cnkuaW5kaWNlcyA9IEluZGV4RGF0YXR5cGUuY3JlYXRlVHlwZWRBcnJheShcbiAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcy5sZW5ndGggLyAzLFxuICAgIGdlb21ldHJ5LmluZGljZXNcbiAgKTtcblxuICB2YXIgYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XG4gIHZhciBib3VuZGluZ1NwaGVyZSA9IEJvdW5kaW5nU3BoZXJlLmZyb21WZXJ0aWNlcyhhdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcyk7XG5cbiAgaWYgKCF2ZXJ0ZXhGb3JtYXQucG9zaXRpb24pIHtcbiAgICBkZWxldGUgYXR0cmlidXRlcy5wb3NpdGlvbjtcbiAgfVxuXG4gIHJldHVybiBuZXcgR2VvbWV0cnkoe1xuICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgaW5kaWNlczogZ2VvbWV0cnkuaW5kaWNlcyxcbiAgICBwcmltaXRpdmVUeXBlOiBnZW9tZXRyeS5wcmltaXRpdmVUeXBlLFxuICAgIGJvdW5kaW5nU3BoZXJlOiBib3VuZGluZ1NwaGVyZSxcbiAgICBvZmZzZXRBdHRyaWJ1dGU6IHBvbHlnb25HZW9tZXRyeS5fb2Zmc2V0QXR0cmlidXRlLFxuICB9KTtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuUG9seWdvbkdlb21ldHJ5LmNyZWF0ZVNoYWRvd1ZvbHVtZSA9IGZ1bmN0aW9uIChcbiAgcG9seWdvbkdlb21ldHJ5LFxuICBtaW5IZWlnaHRGdW5jLFxuICBtYXhIZWlnaHRGdW5jXG4pIHtcbiAgdmFyIGdyYW51bGFyaXR5ID0gcG9seWdvbkdlb21ldHJ5Ll9ncmFudWxhcml0eTtcbiAgdmFyIGVsbGlwc29pZCA9IHBvbHlnb25HZW9tZXRyeS5fZWxsaXBzb2lkO1xuXG4gIHZhciBtaW5IZWlnaHQgPSBtaW5IZWlnaHRGdW5jKGdyYW51bGFyaXR5LCBlbGxpcHNvaWQpO1xuICB2YXIgbWF4SGVpZ2h0ID0gbWF4SGVpZ2h0RnVuYyhncmFudWxhcml0eSwgZWxsaXBzb2lkKTtcblxuICByZXR1cm4gbmV3IFBvbHlnb25HZW9tZXRyeSh7XG4gICAgcG9seWdvbkhpZXJhcmNoeTogcG9seWdvbkdlb21ldHJ5Ll9wb2x5Z29uSGllcmFyY2h5LFxuICAgIGVsbGlwc29pZDogZWxsaXBzb2lkLFxuICAgIHN0Um90YXRpb246IHBvbHlnb25HZW9tZXRyeS5fc3RSb3RhdGlvbixcbiAgICBncmFudWxhcml0eTogZ3JhbnVsYXJpdHksXG4gICAgcGVyUG9zaXRpb25IZWlnaHQ6IGZhbHNlLFxuICAgIGV4dHJ1ZGVkSGVpZ2h0OiBtaW5IZWlnaHQsXG4gICAgaGVpZ2h0OiBtYXhIZWlnaHQsXG4gICAgdmVydGV4Rm9ybWF0OiBWZXJ0ZXhGb3JtYXQuUE9TSVRJT05fT05MWSxcbiAgICBzaGFkb3dWb2x1bWU6IHRydWUsXG4gICAgYXJjVHlwZTogcG9seWdvbkdlb21ldHJ5Ll9hcmNUeXBlLFxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIHRleHR1cmVDb29yZGluYXRlUm90YXRpb25Qb2ludHMocG9seWdvbkdlb21ldHJ5KSB7XG4gIHZhciBzdFJvdGF0aW9uID0gLXBvbHlnb25HZW9tZXRyeS5fc3RSb3RhdGlvbjtcbiAgaWYgKHN0Um90YXRpb24gPT09IDAuMCkge1xuICAgIHJldHVybiBbMCwgMCwgMCwgMSwgMSwgMF07XG4gIH1cbiAgdmFyIGVsbGlwc29pZCA9IHBvbHlnb25HZW9tZXRyeS5fZWxsaXBzb2lkO1xuICB2YXIgcG9zaXRpb25zID0gcG9seWdvbkdlb21ldHJ5Ll9wb2x5Z29uSGllcmFyY2h5LnBvc2l0aW9ucztcbiAgdmFyIGJvdW5kaW5nUmVjdGFuZ2xlID0gcG9seWdvbkdlb21ldHJ5LnJlY3RhbmdsZTtcbiAgcmV0dXJuIEdlb21ldHJ5Ll90ZXh0dXJlQ29vcmRpbmF0ZVJvdGF0aW9uUG9pbnRzKFxuICAgIHBvc2l0aW9ucyxcbiAgICBzdFJvdGF0aW9uLFxuICAgIGVsbGlwc29pZCxcbiAgICBib3VuZGluZ1JlY3RhbmdsZVxuICApO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhQb2x5Z29uR2VvbWV0cnkucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVjdGFuZ2xlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWRlZmluZWQodGhpcy5fcmVjdGFuZ2xlKSkge1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gdGhpcy5fcG9seWdvbkhpZXJhcmNoeS5wb3NpdGlvbnM7XG4gICAgICAgIHRoaXMuX3JlY3RhbmdsZSA9IGNvbXB1dGVSZWN0YW5nbGUoXG4gICAgICAgICAgcG9zaXRpb25zLFxuICAgICAgICAgIHRoaXMuX2VsbGlwc29pZCxcbiAgICAgICAgICB0aGlzLl9hcmNUeXBlLFxuICAgICAgICAgIHRoaXMuX2dyYW51bGFyaXR5XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9yZWN0YW5nbGU7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEZvciByZW1hcHBpbmcgdGV4dHVyZSBjb29yZGluYXRlcyB3aGVuIHJlbmRlcmluZyBQb2x5Z29uR2VvbWV0cmllcyBhcyBHcm91bmRQcmltaXRpdmVzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGV4dHVyZUNvb3JkaW5hdGVSb3RhdGlvblBvaW50czoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFkZWZpbmVkKHRoaXMuX3RleHR1cmVDb29yZGluYXRlUm90YXRpb25Qb2ludHMpKSB7XG4gICAgICAgIHRoaXMuX3RleHR1cmVDb29yZGluYXRlUm90YXRpb25Qb2ludHMgPSB0ZXh0dXJlQ29vcmRpbmF0ZVJvdGF0aW9uUG9pbnRzKFxuICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl90ZXh0dXJlQ29vcmRpbmF0ZVJvdGF0aW9uUG9pbnRzO1xuICAgIH0sXG4gIH0sXG59KTtcbmV4cG9ydCBkZWZhdWx0IFBvbHlnb25HZW9tZXRyeTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///70544\n')},38425:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ArcType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11491);\n/* harmony import */ var _arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32378);\n/* harmony import */ var _Cartesian2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60838);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60216);\n/* harmony import */ var _Cartographic_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(51688);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84828);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(82982);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50491);\n/* harmony import */ var _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8398);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13616);\n/* harmony import */ var _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(56652);\n/* harmony import */ var _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(57552);\n/* harmony import */ var _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(22832);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(99417);\n/* harmony import */ var _Matrix3_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(68201);\n/* harmony import */ var _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(78284);\n/* harmony import */ var _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(97264);\n/* harmony import */ var _Quaternion_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(87811);\n/* harmony import */ var _Queue_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(79120);\n/* harmony import */ var _WindingOrder_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(32441);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @private\n */\nvar PolygonGeometryLibrary = {};\n\nPolygonGeometryLibrary.computeHierarchyPackedLength = function (\n  polygonHierarchy\n) {\n  var numComponents = 0;\n  var stack = [polygonHierarchy];\n  while (stack.length > 0) {\n    var hierarchy = stack.pop();\n    if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(hierarchy)) {\n      continue;\n    }\n\n    numComponents += 2;\n\n    var positions = hierarchy.positions;\n    var holes = hierarchy.holes;\n\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(positions)) {\n      numComponents += positions.length * _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength;\n    }\n\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(holes)) {\n      var length = holes.length;\n      for (var i = 0; i < length; ++i) {\n        stack.push(holes[i]);\n      }\n    }\n  }\n\n  return numComponents;\n};\n\nPolygonGeometryLibrary.packPolygonHierarchy = function (\n  polygonHierarchy,\n  array,\n  startingIndex\n) {\n  var stack = [polygonHierarchy];\n  while (stack.length > 0) {\n    var hierarchy = stack.pop();\n    if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(hierarchy)) {\n      continue;\n    }\n\n    var positions = hierarchy.positions;\n    var holes = hierarchy.holes;\n\n    array[startingIndex++] = (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(positions) ? positions.length : 0;\n    array[startingIndex++] = (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(holes) ? holes.length : 0;\n\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(positions)) {\n      var positionsLength = positions.length;\n      for (var i = 0; i < positionsLength; ++i, startingIndex += 3) {\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].pack */ .Z.pack(positions[i], array, startingIndex);\n      }\n    }\n\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(holes)) {\n      var holesLength = holes.length;\n      for (var j = 0; j < holesLength; ++j) {\n        stack.push(holes[j]);\n      }\n    }\n  }\n\n  return startingIndex;\n};\n\nPolygonGeometryLibrary.unpackPolygonHierarchy = function (\n  array,\n  startingIndex\n) {\n  var positionsLength = array[startingIndex++];\n  var holesLength = array[startingIndex++];\n\n  var positions = new Array(positionsLength);\n  var holes = holesLength > 0 ? new Array(holesLength) : undefined;\n\n  for (\n    var i = 0;\n    i < positionsLength;\n    ++i, startingIndex += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength\n  ) {\n    positions[i] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].unpack */ .Z.unpack(array, startingIndex);\n  }\n\n  for (var j = 0; j < holesLength; ++j) {\n    holes[j] = PolygonGeometryLibrary.unpackPolygonHierarchy(\n      array,\n      startingIndex\n    );\n    startingIndex = holes[j].startingIndex;\n    delete holes[j].startingIndex;\n  }\n\n  return {\n    positions: positions,\n    holes: holes,\n    startingIndex: startingIndex,\n  };\n};\n\nvar distanceScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nfunction getPointAtDistance(p0, p1, distance, length) {\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].subtract */ .Z.subtract(p1, p0, distanceScratch);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    distanceScratch,\n    distance / length,\n    distanceScratch\n  );\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].add */ .Z.add(p0, distanceScratch, distanceScratch);\n  return [distanceScratch.x, distanceScratch.y, distanceScratch.z];\n}\n\nPolygonGeometryLibrary.subdivideLineCount = function (p0, p1, minDistance) {\n  var distance = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].distance */ .Z.distance(p0, p1);\n  var n = distance / minDistance;\n  var countDivide = Math.max(0, Math.ceil(_Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].log2 */ .Z.log2(n)));\n  return Math.pow(2, countDivide);\n};\n\nvar scratchCartographic0 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar scratchCartographic1 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar scratchCartographic2 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar scratchCartesian0 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nPolygonGeometryLibrary.subdivideRhumbLineCount = function (\n  ellipsoid,\n  p0,\n  p1,\n  minDistance\n) {\n  var c0 = ellipsoid.cartesianToCartographic(p0, scratchCartographic0);\n  var c1 = ellipsoid.cartesianToCartographic(p1, scratchCartographic1);\n  var rhumb = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(c0, c1, ellipsoid);\n  var n = rhumb.surfaceDistance / minDistance;\n  var countDivide = Math.max(0, Math.ceil(_Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].log2 */ .Z.log2(n)));\n  return Math.pow(2, countDivide);\n};\n\nPolygonGeometryLibrary.subdivideLine = function (p0, p1, minDistance, result) {\n  var numVertices = PolygonGeometryLibrary.subdivideLineCount(\n    p0,\n    p1,\n    minDistance\n  );\n  var length = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].distance */ .Z.distance(p0, p1);\n  var distanceBetweenVertices = length / numVertices;\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(result)) {\n    result = [];\n  }\n\n  var positions = result;\n  positions.length = numVertices * 3;\n\n  var index = 0;\n  for (var i = 0; i < numVertices; i++) {\n    var p = getPointAtDistance(p0, p1, i * distanceBetweenVertices, length);\n    positions[index++] = p[0];\n    positions[index++] = p[1];\n    positions[index++] = p[2];\n  }\n\n  return positions;\n};\n\nPolygonGeometryLibrary.subdivideRhumbLine = function (\n  ellipsoid,\n  p0,\n  p1,\n  minDistance,\n  result\n) {\n  var c0 = ellipsoid.cartesianToCartographic(p0, scratchCartographic0);\n  var c1 = ellipsoid.cartesianToCartographic(p1, scratchCartographic1);\n  var rhumb = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(c0, c1, ellipsoid);\n\n  var n = rhumb.surfaceDistance / minDistance;\n  var countDivide = Math.max(0, Math.ceil(_Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].log2 */ .Z.log2(n)));\n  var numVertices = Math.pow(2, countDivide);\n  var distanceBetweenVertices = rhumb.surfaceDistance / numVertices;\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(result)) {\n    result = [];\n  }\n\n  var positions = result;\n  positions.length = numVertices * 3;\n\n  var index = 0;\n  for (var i = 0; i < numVertices; i++) {\n    var c = rhumb.interpolateUsingSurfaceDistance(\n      i * distanceBetweenVertices,\n      scratchCartographic2\n    );\n    var p = ellipsoid.cartographicToCartesian(c, scratchCartesian0);\n    positions[index++] = p.x;\n    positions[index++] = p.y;\n    positions[index++] = p.z;\n  }\n\n  return positions;\n};\n\nvar scaleToGeodeticHeightN1 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scaleToGeodeticHeightN2 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scaleToGeodeticHeightP1 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scaleToGeodeticHeightP2 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\nPolygonGeometryLibrary.scaleToGeodeticHeightExtruded = function (\n  geometry,\n  maxHeight,\n  minHeight,\n  ellipsoid,\n  perPositionHeight\n) {\n  ellipsoid = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WGS84 */ .Z.WGS84);\n\n  var n1 = scaleToGeodeticHeightN1;\n  var n2 = scaleToGeodeticHeightN2;\n  var p = scaleToGeodeticHeightP1;\n  var p2 = scaleToGeodeticHeightP2;\n\n  if (\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(geometry) &&\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(geometry.attributes) &&\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(geometry.attributes.position)\n  ) {\n    var positions = geometry.attributes.position.values;\n    var length = positions.length / 2;\n\n    for (var i = 0; i < length; i += 3) {\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromArray */ .Z.fromArray(positions, i, p);\n\n      ellipsoid.geodeticSurfaceNormal(p, n1);\n      p2 = ellipsoid.scaleToGeodeticSurface(p, p2);\n      n2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(n1, minHeight, n2);\n      n2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].add */ .Z.add(p2, n2, n2);\n      positions[i + length] = n2.x;\n      positions[i + 1 + length] = n2.y;\n      positions[i + 2 + length] = n2.z;\n\n      if (perPositionHeight) {\n        p2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(p, p2);\n      }\n      n2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(n1, maxHeight, n2);\n      n2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].add */ .Z.add(p2, n2, n2);\n      positions[i] = n2.x;\n      positions[i + 1] = n2.y;\n      positions[i + 2] = n2.z;\n    }\n  }\n  return geometry;\n};\n\nPolygonGeometryLibrary.polygonOutlinesFromHierarchy = function (\n  polygonHierarchy,\n  scaleToEllipsoidSurface,\n  ellipsoid\n) {\n  // create from a polygon hierarchy\n  // Algorithm adapted from http://www.geometrictools.com/Documentation/TriangulationByEarClipping.pdf\n  var polygons = [];\n  var queue = new _Queue_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z();\n  queue.enqueue(polygonHierarchy);\n  var i;\n  var j;\n  var length;\n  while (queue.length !== 0) {\n    var outerNode = queue.dequeue();\n    var outerRing = outerNode.positions;\n    if (scaleToEllipsoidSurface) {\n      length = outerRing.length;\n      for (i = 0; i < length; i++) {\n        ellipsoid.scaleToGeodeticSurface(outerRing[i], outerRing[i]);\n      }\n    }\n    outerRing = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(\n      outerRing,\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon,\n      true\n    );\n    if (outerRing.length < 3) {\n      continue;\n    }\n\n    var numChildren = outerNode.holes ? outerNode.holes.length : 0;\n    // The outer polygon contains inner polygons\n    for (i = 0; i < numChildren; i++) {\n      var hole = outerNode.holes[i];\n      var holePositions = hole.positions;\n      if (scaleToEllipsoidSurface) {\n        length = holePositions.length;\n        for (j = 0; j < length; ++j) {\n          ellipsoid.scaleToGeodeticSurface(holePositions[j], holePositions[j]);\n        }\n      }\n      holePositions = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(\n        holePositions,\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon,\n        true\n      );\n      if (holePositions.length < 3) {\n        continue;\n      }\n      polygons.push(holePositions);\n\n      var numGrandchildren = 0;\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(hole.holes)) {\n        numGrandchildren = hole.holes.length;\n      }\n\n      for (j = 0; j < numGrandchildren; j++) {\n        queue.enqueue(hole.holes[j]);\n      }\n    }\n\n    polygons.push(outerRing);\n  }\n\n  return polygons;\n};\n\nPolygonGeometryLibrary.polygonsFromHierarchy = function (\n  polygonHierarchy,\n  projectPointsTo2D,\n  scaleToEllipsoidSurface,\n  ellipsoid\n) {\n  // create from a polygon hierarchy\n  // Algorithm adapted from http://www.geometrictools.com/Documentation/TriangulationByEarClipping.pdf\n  var hierarchy = [];\n  var polygons = [];\n\n  var queue = new _Queue_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z();\n  queue.enqueue(polygonHierarchy);\n\n  while (queue.length !== 0) {\n    var outerNode = queue.dequeue();\n    var outerRing = outerNode.positions;\n    var holes = outerNode.holes;\n\n    var i;\n    var length;\n    if (scaleToEllipsoidSurface) {\n      length = outerRing.length;\n      for (i = 0; i < length; i++) {\n        ellipsoid.scaleToGeodeticSurface(outerRing[i], outerRing[i]);\n      }\n    }\n\n    outerRing = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(\n      outerRing,\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon,\n      true\n    );\n    if (outerRing.length < 3) {\n      continue;\n    }\n\n    var positions2D = projectPointsTo2D(outerRing);\n    if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(positions2D)) {\n      continue;\n    }\n    var holeIndices = [];\n\n    var originalWindingOrder = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(\n      positions2D\n    );\n    if (originalWindingOrder === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE) {\n      positions2D.reverse();\n      outerRing = outerRing.slice().reverse();\n    }\n\n    var positions = outerRing.slice();\n    var numChildren = (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(holes) ? holes.length : 0;\n    var polygonHoles = [];\n    var j;\n\n    for (i = 0; i < numChildren; i++) {\n      var hole = holes[i];\n      var holePositions = hole.positions;\n      if (scaleToEllipsoidSurface) {\n        length = holePositions.length;\n        for (j = 0; j < length; ++j) {\n          ellipsoid.scaleToGeodeticSurface(holePositions[j], holePositions[j]);\n        }\n      }\n\n      holePositions = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(\n        holePositions,\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon,\n        true\n      );\n      if (holePositions.length < 3) {\n        continue;\n      }\n\n      var holePositions2D = projectPointsTo2D(holePositions);\n      if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(holePositions2D)) {\n        continue;\n      }\n\n      originalWindingOrder = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(\n        holePositions2D\n      );\n      if (originalWindingOrder === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE) {\n        holePositions2D.reverse();\n        holePositions = holePositions.slice().reverse();\n      }\n\n      polygonHoles.push(holePositions);\n      holeIndices.push(positions.length);\n      positions = positions.concat(holePositions);\n      positions2D = positions2D.concat(holePositions2D);\n\n      var numGrandchildren = 0;\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(hole.holes)) {\n        numGrandchildren = hole.holes.length;\n      }\n\n      for (j = 0; j < numGrandchildren; j++) {\n        queue.enqueue(hole.holes[j]);\n      }\n    }\n\n    hierarchy.push({\n      outerRing: outerRing,\n      holes: polygonHoles,\n    });\n    polygons.push({\n      positions: positions,\n      positions2D: positions2D,\n      holes: holeIndices,\n    });\n  }\n\n  return {\n    hierarchy: hierarchy,\n    polygons: polygons,\n  };\n};\n\nvar computeBoundingRectangleCartesian2 = new _Cartesian2_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar computeBoundingRectangleCartesian3 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar computeBoundingRectangleQuaternion = new _Quaternion_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\nvar computeBoundingRectangleMatrix3 = new _Matrix3_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z();\nPolygonGeometryLibrary.computeBoundingRectangle = function (\n  planeNormal,\n  projectPointTo2D,\n  positions,\n  angle,\n  result\n) {\n  var rotation = _Quaternion_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n    planeNormal,\n    angle,\n    computeBoundingRectangleQuaternion\n  );\n  var textureMatrix = _Matrix3_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].fromQuaternion */ .Z.fromQuaternion(\n    rotation,\n    computeBoundingRectangleMatrix3\n  );\n\n  var minX = Number.POSITIVE_INFINITY;\n  var maxX = Number.NEGATIVE_INFINITY;\n  var minY = Number.POSITIVE_INFINITY;\n  var maxY = Number.NEGATIVE_INFINITY;\n\n  var length = positions.length;\n  for (var i = 0; i < length; ++i) {\n    var p = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(positions[i], computeBoundingRectangleCartesian3);\n    _Matrix3_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].multiplyByVector */ .Z.multiplyByVector(textureMatrix, p, p);\n    var st = projectPointTo2D(p, computeBoundingRectangleCartesian2);\n\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(st)) {\n      minX = Math.min(minX, st.x);\n      maxX = Math.max(maxX, st.x);\n\n      minY = Math.min(minY, st.y);\n      maxY = Math.max(maxY, st.y);\n    }\n  }\n\n  result.x = minX;\n  result.y = minY;\n  result.width = maxX - minX;\n  result.height = maxY - minY;\n  return result;\n};\n\nPolygonGeometryLibrary.createGeometryFromPositions = function (\n  ellipsoid,\n  polygon,\n  granularity,\n  perPositionHeight,\n  vertexFormat,\n  arcType\n) {\n  var indices = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].triangulate */ .Z.triangulate(polygon.positions2D, polygon.holes);\n\n  /* If polygon is completely unrenderable, just use the first three vertices */\n  if (indices.length < 3) {\n    indices = [0, 1, 2];\n  }\n\n  var positions = polygon.positions;\n\n  if (perPositionHeight) {\n    var length = positions.length;\n    var flattenedPositions = new Array(length * 3);\n    var index = 0;\n    for (var i = 0; i < length; i++) {\n      var p = positions[i];\n      flattenedPositions[index++] = p.x;\n      flattenedPositions[index++] = p.y;\n      flattenedPositions[index++] = p.z;\n    }\n    var geometry = new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n      attributes: {\n        position: new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n          componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n          componentsPerAttribute: 3,\n          values: flattenedPositions,\n        }),\n      },\n      indices: indices,\n      primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n    });\n\n    if (vertexFormat.normal) {\n      return _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].computeNormal */ .Z.computeNormal(geometry);\n    }\n\n    return geometry;\n  }\n\n  if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n    return _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].computeSubdivision */ .Z.computeSubdivision(\n      ellipsoid,\n      positions,\n      indices,\n      granularity\n    );\n  } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n    return _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].computeRhumbLineSubdivision */ .Z.computeRhumbLineSubdivision(\n      ellipsoid,\n      positions,\n      indices,\n      granularity\n    );\n  }\n};\n\nvar computeWallIndicesSubdivided = [];\nvar p1Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar p2Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\nPolygonGeometryLibrary.computeWallGeometry = function (\n  positions,\n  ellipsoid,\n  granularity,\n  perPositionHeight,\n  arcType\n) {\n  var edgePositions;\n  var topEdgeLength;\n  var i;\n  var p1;\n  var p2;\n\n  var length = positions.length;\n  var index = 0;\n\n  if (!perPositionHeight) {\n    var minDistance = _Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].chordLength */ .Z.chordLength(\n      granularity,\n      ellipsoid.maximumRadius\n    );\n\n    var numVertices = 0;\n    if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n      for (i = 0; i < length; i++) {\n        numVertices += PolygonGeometryLibrary.subdivideLineCount(\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance\n        );\n      }\n    } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n      for (i = 0; i < length; i++) {\n        numVertices += PolygonGeometryLibrary.subdivideRhumbLineCount(\n          ellipsoid,\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance\n        );\n      }\n    }\n\n    topEdgeLength = (numVertices + length) * 3;\n    edgePositions = new Array(topEdgeLength * 2);\n    for (i = 0; i < length; i++) {\n      p1 = positions[i];\n      p2 = positions[(i + 1) % length];\n\n      var tempPositions;\n      if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n        tempPositions = PolygonGeometryLibrary.subdivideLine(\n          p1,\n          p2,\n          minDistance,\n          computeWallIndicesSubdivided\n        );\n      } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n        tempPositions = PolygonGeometryLibrary.subdivideRhumbLine(\n          ellipsoid,\n          p1,\n          p2,\n          minDistance,\n          computeWallIndicesSubdivided\n        );\n      }\n      var tempPositionsLength = tempPositions.length;\n      for (var j = 0; j < tempPositionsLength; ++j, ++index) {\n        edgePositions[index] = tempPositions[j];\n        edgePositions[index + topEdgeLength] = tempPositions[j];\n      }\n\n      edgePositions[index] = p2.x;\n      edgePositions[index + topEdgeLength] = p2.x;\n      ++index;\n\n      edgePositions[index] = p2.y;\n      edgePositions[index + topEdgeLength] = p2.y;\n      ++index;\n\n      edgePositions[index] = p2.z;\n      edgePositions[index + topEdgeLength] = p2.z;\n      ++index;\n    }\n  } else {\n    topEdgeLength = length * 3 * 2;\n    edgePositions = new Array(topEdgeLength * 2);\n    for (i = 0; i < length; i++) {\n      p1 = positions[i];\n      p2 = positions[(i + 1) % length];\n      edgePositions[index] = edgePositions[index + topEdgeLength] = p1.x;\n      ++index;\n      edgePositions[index] = edgePositions[index + topEdgeLength] = p1.y;\n      ++index;\n      edgePositions[index] = edgePositions[index + topEdgeLength] = p1.z;\n      ++index;\n      edgePositions[index] = edgePositions[index + topEdgeLength] = p2.x;\n      ++index;\n      edgePositions[index] = edgePositions[index + topEdgeLength] = p2.y;\n      ++index;\n      edgePositions[index] = edgePositions[index + topEdgeLength] = p2.z;\n      ++index;\n    }\n  }\n\n  length = edgePositions.length;\n  var indices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].createTypedArray */ .Z.createTypedArray(\n    length / 3,\n    length - positions.length * 6\n  );\n  var edgeIndex = 0;\n  length /= 6;\n\n  for (i = 0; i < length; i++) {\n    var UL = i;\n    var UR = UL + 1;\n    var LL = UL + length;\n    var LR = LL + 1;\n\n    p1 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromArray */ .Z.fromArray(edgePositions, UL * 3, p1Scratch);\n    p2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromArray */ .Z.fromArray(edgePositions, UR * 3, p2Scratch);\n    if (\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n        p1,\n        p2,\n        _Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].EPSILON10 */ .Z.EPSILON10,\n        _Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].EPSILON10 */ .Z.EPSILON10\n      )\n    ) {\n      //skip corner\n      continue;\n    }\n\n    indices[edgeIndex++] = UL;\n    indices[edgeIndex++] = LL;\n    indices[edgeIndex++] = UR;\n    indices[edgeIndex++] = UR;\n    indices[edgeIndex++] = LL;\n    indices[edgeIndex++] = LR;\n  }\n\n  return new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n    attributes: new _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n      position: new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n        componentsPerAttribute: 3,\n        values: edgePositions,\n      }),\n    }),\n    indices: indices,\n    primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n  });\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolygonGeometryLibrary);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5QkFBeUI7QUFDL0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCLHFHQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsWUFBWTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLG1GQUFvQjtBQUM3QixTQUFTLG1GQUFvQjtBQUM3QjtBQUNBLE1BQU0sMkZBQXdCO0FBQzlCO0FBQ0E7QUFDQSxRQUFRLDhFQUFvQjtBQUM1QixRQUFRLDhFQUFvQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEsNkRBQVE7QUFDckIsb0JBQW9CLHdFQUFrQjtBQUN0QyxvQkFBb0IsdUVBQWlCO0FBQ3JDLDJCQUEyQixvRkFBd0I7QUFDbkQ7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxtQkFBbUIsdUZBQXVCO0FBQzFDLEdBQUc7QUFDSDtBQUNBLHlEQUFlLHNCQUFzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0NvcmUvUG9seWdvbkdlb21ldHJ5TGlicmFyeS5qcz81YzEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBcmNUeXBlIGZyb20gXCIuL0FyY1R5cGUuanNcIjtcbmltcG9ydCBhcnJheVJlbW92ZUR1cGxpY2F0ZXMgZnJvbSBcIi4vYXJyYXlSZW1vdmVEdXBsaWNhdGVzLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCIuL0NhcnRvZ3JhcGhpYy5qc1wiO1xuaW1wb3J0IENvbXBvbmVudERhdGF0eXBlIGZyb20gXCIuL0NvbXBvbmVudERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4vZGVmaW5lZC5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZCBmcm9tIFwiLi9FbGxpcHNvaWQuanNcIjtcbmltcG9ydCBFbGxpcHNvaWRSaHVtYkxpbmUgZnJvbSBcIi4vRWxsaXBzb2lkUmh1bWJMaW5lLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnkuanNcIjtcbmltcG9ydCBHZW9tZXRyeUF0dHJpYnV0ZSBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5QXR0cmlidXRlcyBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZXMuanNcIjtcbmltcG9ydCBHZW9tZXRyeVBpcGVsaW5lIGZyb20gXCIuL0dlb21ldHJ5UGlwZWxpbmUuanNcIjtcbmltcG9ydCBJbmRleERhdGF0eXBlIGZyb20gXCIuL0luZGV4RGF0YXR5cGUuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuL01hdGguanNcIjtcbmltcG9ydCBNYXRyaXgzIGZyb20gXCIuL01hdHJpeDMuanNcIjtcbmltcG9ydCBQb2x5Z29uUGlwZWxpbmUgZnJvbSBcIi4vUG9seWdvblBpcGVsaW5lLmpzXCI7XG5pbXBvcnQgUHJpbWl0aXZlVHlwZSBmcm9tIFwiLi9QcmltaXRpdmVUeXBlLmpzXCI7XG5pbXBvcnQgUXVhdGVybmlvbiBmcm9tIFwiLi9RdWF0ZXJuaW9uLmpzXCI7XG5pbXBvcnQgUXVldWUgZnJvbSBcIi4vUXVldWUuanNcIjtcbmltcG9ydCBXaW5kaW5nT3JkZXIgZnJvbSBcIi4vV2luZGluZ09yZGVyLmpzXCI7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIFBvbHlnb25HZW9tZXRyeUxpYnJhcnkgPSB7fTtcblxuUG9seWdvbkdlb21ldHJ5TGlicmFyeS5jb21wdXRlSGllcmFyY2h5UGFja2VkTGVuZ3RoID0gZnVuY3Rpb24gKFxuICBwb2x5Z29uSGllcmFyY2h5XG4pIHtcbiAgdmFyIG51bUNvbXBvbmVudHMgPSAwO1xuICB2YXIgc3RhY2sgPSBbcG9seWdvbkhpZXJhcmNoeV07XG4gIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGhpZXJhcmNoeSA9IHN0YWNrLnBvcCgpO1xuICAgIGlmICghZGVmaW5lZChoaWVyYXJjaHkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBudW1Db21wb25lbnRzICs9IDI7XG5cbiAgICB2YXIgcG9zaXRpb25zID0gaGllcmFyY2h5LnBvc2l0aW9ucztcbiAgICB2YXIgaG9sZXMgPSBoaWVyYXJjaHkuaG9sZXM7XG5cbiAgICBpZiAoZGVmaW5lZChwb3NpdGlvbnMpKSB7XG4gICAgICBudW1Db21wb25lbnRzICs9IHBvc2l0aW9ucy5sZW5ndGggKiBDYXJ0ZXNpYW4zLnBhY2tlZExlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAoZGVmaW5lZChob2xlcykpIHtcbiAgICAgIHZhciBsZW5ndGggPSBob2xlcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIHN0YWNrLnB1c2goaG9sZXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudW1Db21wb25lbnRzO1xufTtcblxuUG9seWdvbkdlb21ldHJ5TGlicmFyeS5wYWNrUG9seWdvbkhpZXJhcmNoeSA9IGZ1bmN0aW9uIChcbiAgcG9seWdvbkhpZXJhcmNoeSxcbiAgYXJyYXksXG4gIHN0YXJ0aW5nSW5kZXhcbikge1xuICB2YXIgc3RhY2sgPSBbcG9seWdvbkhpZXJhcmNoeV07XG4gIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGhpZXJhcmNoeSA9IHN0YWNrLnBvcCgpO1xuICAgIGlmICghZGVmaW5lZChoaWVyYXJjaHkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb25zID0gaGllcmFyY2h5LnBvc2l0aW9ucztcbiAgICB2YXIgaG9sZXMgPSBoaWVyYXJjaHkuaG9sZXM7XG5cbiAgICBhcnJheVtzdGFydGluZ0luZGV4KytdID0gZGVmaW5lZChwb3NpdGlvbnMpID8gcG9zaXRpb25zLmxlbmd0aCA6IDA7XG4gICAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IGRlZmluZWQoaG9sZXMpID8gaG9sZXMubGVuZ3RoIDogMDtcblxuICAgIGlmIChkZWZpbmVkKHBvc2l0aW9ucykpIHtcbiAgICAgIHZhciBwb3NpdGlvbnNMZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3NpdGlvbnNMZW5ndGg7ICsraSwgc3RhcnRpbmdJbmRleCArPSAzKSB7XG4gICAgICAgIENhcnRlc2lhbjMucGFjayhwb3NpdGlvbnNbaV0sIGFycmF5LCBzdGFydGluZ0luZGV4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGVmaW5lZChob2xlcykpIHtcbiAgICAgIHZhciBob2xlc0xlbmd0aCA9IGhvbGVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaG9sZXNMZW5ndGg7ICsraikge1xuICAgICAgICBzdGFjay5wdXNoKGhvbGVzW2pdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RhcnRpbmdJbmRleDtcbn07XG5cblBvbHlnb25HZW9tZXRyeUxpYnJhcnkudW5wYWNrUG9seWdvbkhpZXJhcmNoeSA9IGZ1bmN0aW9uIChcbiAgYXJyYXksXG4gIHN0YXJ0aW5nSW5kZXhcbikge1xuICB2YXIgcG9zaXRpb25zTGVuZ3RoID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIGhvbGVzTGVuZ3RoID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcblxuICB2YXIgcG9zaXRpb25zID0gbmV3IEFycmF5KHBvc2l0aW9uc0xlbmd0aCk7XG4gIHZhciBob2xlcyA9IGhvbGVzTGVuZ3RoID4gMCA/IG5ldyBBcnJheShob2xlc0xlbmd0aCkgOiB1bmRlZmluZWQ7XG5cbiAgZm9yIChcbiAgICB2YXIgaSA9IDA7XG4gICAgaSA8IHBvc2l0aW9uc0xlbmd0aDtcbiAgICArK2ksIHN0YXJ0aW5nSW5kZXggKz0gQ2FydGVzaWFuMy5wYWNrZWRMZW5ndGhcbiAgKSB7XG4gICAgcG9zaXRpb25zW2ldID0gQ2FydGVzaWFuMy51bnBhY2soYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICB9XG5cbiAgZm9yICh2YXIgaiA9IDA7IGogPCBob2xlc0xlbmd0aDsgKytqKSB7XG4gICAgaG9sZXNbal0gPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnVucGFja1BvbHlnb25IaWVyYXJjaHkoXG4gICAgICBhcnJheSxcbiAgICAgIHN0YXJ0aW5nSW5kZXhcbiAgICApO1xuICAgIHN0YXJ0aW5nSW5kZXggPSBob2xlc1tqXS5zdGFydGluZ0luZGV4O1xuICAgIGRlbGV0ZSBob2xlc1tqXS5zdGFydGluZ0luZGV4O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbnM6IHBvc2l0aW9ucyxcbiAgICBob2xlczogaG9sZXMsXG4gICAgc3RhcnRpbmdJbmRleDogc3RhcnRpbmdJbmRleCxcbiAgfTtcbn07XG5cbnZhciBkaXN0YW5jZVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuZnVuY3Rpb24gZ2V0UG9pbnRBdERpc3RhbmNlKHAwLCBwMSwgZGlzdGFuY2UsIGxlbmd0aCkge1xuICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHAxLCBwMCwgZGlzdGFuY2VTY3JhdGNoKTtcbiAgQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKFxuICAgIGRpc3RhbmNlU2NyYXRjaCxcbiAgICBkaXN0YW5jZSAvIGxlbmd0aCxcbiAgICBkaXN0YW5jZVNjcmF0Y2hcbiAgKTtcbiAgQ2FydGVzaWFuMy5hZGQocDAsIGRpc3RhbmNlU2NyYXRjaCwgZGlzdGFuY2VTY3JhdGNoKTtcbiAgcmV0dXJuIFtkaXN0YW5jZVNjcmF0Y2gueCwgZGlzdGFuY2VTY3JhdGNoLnksIGRpc3RhbmNlU2NyYXRjaC56XTtcbn1cblxuUG9seWdvbkdlb21ldHJ5TGlicmFyeS5zdWJkaXZpZGVMaW5lQ291bnQgPSBmdW5jdGlvbiAocDAsIHAxLCBtaW5EaXN0YW5jZSkge1xuICB2YXIgZGlzdGFuY2UgPSBDYXJ0ZXNpYW4zLmRpc3RhbmNlKHAwLCBwMSk7XG4gIHZhciBuID0gZGlzdGFuY2UgLyBtaW5EaXN0YW5jZTtcbiAgdmFyIGNvdW50RGl2aWRlID0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKENlc2l1bU1hdGgubG9nMihuKSkpO1xuICByZXR1cm4gTWF0aC5wb3coMiwgY291bnREaXZpZGUpO1xufTtcblxudmFyIHNjcmF0Y2hDYXJ0b2dyYXBoaWMwID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIHNjcmF0Y2hDYXJ0b2dyYXBoaWMxID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIHNjcmF0Y2hDYXJ0b2dyYXBoaWMyID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4wID0gbmV3IENhcnRlc2lhbjMoKTtcblBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc3ViZGl2aWRlUmh1bWJMaW5lQ291bnQgPSBmdW5jdGlvbiAoXG4gIGVsbGlwc29pZCxcbiAgcDAsXG4gIHAxLFxuICBtaW5EaXN0YW5jZVxuKSB7XG4gIHZhciBjMCA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMCwgc2NyYXRjaENhcnRvZ3JhcGhpYzApO1xuICB2YXIgYzEgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMocDEsIHNjcmF0Y2hDYXJ0b2dyYXBoaWMxKTtcbiAgdmFyIHJodW1iID0gbmV3IEVsbGlwc29pZFJodW1iTGluZShjMCwgYzEsIGVsbGlwc29pZCk7XG4gIHZhciBuID0gcmh1bWIuc3VyZmFjZURpc3RhbmNlIC8gbWluRGlzdGFuY2U7XG4gIHZhciBjb3VudERpdmlkZSA9IE1hdGgubWF4KDAsIE1hdGguY2VpbChDZXNpdW1NYXRoLmxvZzIobikpKTtcbiAgcmV0dXJuIE1hdGgucG93KDIsIGNvdW50RGl2aWRlKTtcbn07XG5cblBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc3ViZGl2aWRlTGluZSA9IGZ1bmN0aW9uIChwMCwgcDEsIG1pbkRpc3RhbmNlLCByZXN1bHQpIHtcbiAgdmFyIG51bVZlcnRpY2VzID0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5zdWJkaXZpZGVMaW5lQ291bnQoXG4gICAgcDAsXG4gICAgcDEsXG4gICAgbWluRGlzdGFuY2VcbiAgKTtcbiAgdmFyIGxlbmd0aCA9IENhcnRlc2lhbjMuZGlzdGFuY2UocDAsIHAxKTtcbiAgdmFyIGRpc3RhbmNlQmV0d2VlblZlcnRpY2VzID0gbGVuZ3RoIC8gbnVtVmVydGljZXM7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBbXTtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbnMgPSByZXN1bHQ7XG4gIHBvc2l0aW9ucy5sZW5ndGggPSBudW1WZXJ0aWNlcyAqIDM7XG5cbiAgdmFyIGluZGV4ID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1WZXJ0aWNlczsgaSsrKSB7XG4gICAgdmFyIHAgPSBnZXRQb2ludEF0RGlzdGFuY2UocDAsIHAxLCBpICogZGlzdGFuY2VCZXR3ZWVuVmVydGljZXMsIGxlbmd0aCk7XG4gICAgcG9zaXRpb25zW2luZGV4KytdID0gcFswXTtcbiAgICBwb3NpdGlvbnNbaW5kZXgrK10gPSBwWzFdO1xuICAgIHBvc2l0aW9uc1tpbmRleCsrXSA9IHBbMl07XG4gIH1cblxuICByZXR1cm4gcG9zaXRpb25zO1xufTtcblxuUG9seWdvbkdlb21ldHJ5TGlicmFyeS5zdWJkaXZpZGVSaHVtYkxpbmUgPSBmdW5jdGlvbiAoXG4gIGVsbGlwc29pZCxcbiAgcDAsXG4gIHAxLFxuICBtaW5EaXN0YW5jZSxcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIGMwID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKHAwLCBzY3JhdGNoQ2FydG9ncmFwaGljMCk7XG4gIHZhciBjMSA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMSwgc2NyYXRjaENhcnRvZ3JhcGhpYzEpO1xuICB2YXIgcmh1bWIgPSBuZXcgRWxsaXBzb2lkUmh1bWJMaW5lKGMwLCBjMSwgZWxsaXBzb2lkKTtcblxuICB2YXIgbiA9IHJodW1iLnN1cmZhY2VEaXN0YW5jZSAvIG1pbkRpc3RhbmNlO1xuICB2YXIgY291bnREaXZpZGUgPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwoQ2VzaXVtTWF0aC5sb2cyKG4pKSk7XG4gIHZhciBudW1WZXJ0aWNlcyA9IE1hdGgucG93KDIsIGNvdW50RGl2aWRlKTtcbiAgdmFyIGRpc3RhbmNlQmV0d2VlblZlcnRpY2VzID0gcmh1bWIuc3VyZmFjZURpc3RhbmNlIC8gbnVtVmVydGljZXM7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBbXTtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbnMgPSByZXN1bHQ7XG4gIHBvc2l0aW9ucy5sZW5ndGggPSBudW1WZXJ0aWNlcyAqIDM7XG5cbiAgdmFyIGluZGV4ID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1WZXJ0aWNlczsgaSsrKSB7XG4gICAgdmFyIGMgPSByaHVtYi5pbnRlcnBvbGF0ZVVzaW5nU3VyZmFjZURpc3RhbmNlKFxuICAgICAgaSAqIGRpc3RhbmNlQmV0d2VlblZlcnRpY2VzLFxuICAgICAgc2NyYXRjaENhcnRvZ3JhcGhpYzJcbiAgICApO1xuICAgIHZhciBwID0gZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKGMsIHNjcmF0Y2hDYXJ0ZXNpYW4wKTtcbiAgICBwb3NpdGlvbnNbaW5kZXgrK10gPSBwLng7XG4gICAgcG9zaXRpb25zW2luZGV4KytdID0gcC55O1xuICAgIHBvc2l0aW9uc1tpbmRleCsrXSA9IHAuejtcbiAgfVxuXG4gIHJldHVybiBwb3NpdGlvbnM7XG59O1xuXG52YXIgc2NhbGVUb0dlb2RldGljSGVpZ2h0TjEgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjYWxlVG9HZW9kZXRpY0hlaWdodE4yID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY2FsZVRvR2VvZGV0aWNIZWlnaHRQMSA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NhbGVUb0dlb2RldGljSGVpZ2h0UDIgPSBuZXcgQ2FydGVzaWFuMygpO1xuXG5Qb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnNjYWxlVG9HZW9kZXRpY0hlaWdodEV4dHJ1ZGVkID0gZnVuY3Rpb24gKFxuICBnZW9tZXRyeSxcbiAgbWF4SGVpZ2h0LFxuICBtaW5IZWlnaHQsXG4gIGVsbGlwc29pZCxcbiAgcGVyUG9zaXRpb25IZWlnaHRcbikge1xuICBlbGxpcHNvaWQgPSBkZWZhdWx0VmFsdWUoZWxsaXBzb2lkLCBFbGxpcHNvaWQuV0dTODQpO1xuXG4gIHZhciBuMSA9IHNjYWxlVG9HZW9kZXRpY0hlaWdodE4xO1xuICB2YXIgbjIgPSBzY2FsZVRvR2VvZGV0aWNIZWlnaHROMjtcbiAgdmFyIHAgPSBzY2FsZVRvR2VvZGV0aWNIZWlnaHRQMTtcbiAgdmFyIHAyID0gc2NhbGVUb0dlb2RldGljSGVpZ2h0UDI7XG5cbiAgaWYgKFxuICAgIGRlZmluZWQoZ2VvbWV0cnkpICYmXG4gICAgZGVmaW5lZChnZW9tZXRyeS5hdHRyaWJ1dGVzKSAmJlxuICAgIGRlZmluZWQoZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbilcbiAgKSB7XG4gICAgdmFyIHBvc2l0aW9ucyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzO1xuICAgIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoIC8gMjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgIENhcnRlc2lhbjMuZnJvbUFycmF5KHBvc2l0aW9ucywgaSwgcCk7XG5cbiAgICAgIGVsbGlwc29pZC5nZW9kZXRpY1N1cmZhY2VOb3JtYWwocCwgbjEpO1xuICAgICAgcDIgPSBlbGxpcHNvaWQuc2NhbGVUb0dlb2RldGljU3VyZmFjZShwLCBwMik7XG4gICAgICBuMiA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihuMSwgbWluSGVpZ2h0LCBuMik7XG4gICAgICBuMiA9IENhcnRlc2lhbjMuYWRkKHAyLCBuMiwgbjIpO1xuICAgICAgcG9zaXRpb25zW2kgKyBsZW5ndGhdID0gbjIueDtcbiAgICAgIHBvc2l0aW9uc1tpICsgMSArIGxlbmd0aF0gPSBuMi55O1xuICAgICAgcG9zaXRpb25zW2kgKyAyICsgbGVuZ3RoXSA9IG4yLno7XG5cbiAgICAgIGlmIChwZXJQb3NpdGlvbkhlaWdodCkge1xuICAgICAgICBwMiA9IENhcnRlc2lhbjMuY2xvbmUocCwgcDIpO1xuICAgICAgfVxuICAgICAgbjIgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIobjEsIG1heEhlaWdodCwgbjIpO1xuICAgICAgbjIgPSBDYXJ0ZXNpYW4zLmFkZChwMiwgbjIsIG4yKTtcbiAgICAgIHBvc2l0aW9uc1tpXSA9IG4yLng7XG4gICAgICBwb3NpdGlvbnNbaSArIDFdID0gbjIueTtcbiAgICAgIHBvc2l0aW9uc1tpICsgMl0gPSBuMi56O1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ2VvbWV0cnk7XG59O1xuXG5Qb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnBvbHlnb25PdXRsaW5lc0Zyb21IaWVyYXJjaHkgPSBmdW5jdGlvbiAoXG4gIHBvbHlnb25IaWVyYXJjaHksXG4gIHNjYWxlVG9FbGxpcHNvaWRTdXJmYWNlLFxuICBlbGxpcHNvaWRcbikge1xuICAvLyBjcmVhdGUgZnJvbSBhIHBvbHlnb24gaGllcmFyY2h5XG4gIC8vIEFsZ29yaXRobSBhZGFwdGVkIGZyb20gaHR0cDovL3d3dy5nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Ucmlhbmd1bGF0aW9uQnlFYXJDbGlwcGluZy5wZGZcbiAgdmFyIHBvbHlnb25zID0gW107XG4gIHZhciBxdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICBxdWV1ZS5lbnF1ZXVlKHBvbHlnb25IaWVyYXJjaHkpO1xuICB2YXIgaTtcbiAgdmFyIGo7XG4gIHZhciBsZW5ndGg7XG4gIHdoaWxlIChxdWV1ZS5sZW5ndGggIT09IDApIHtcbiAgICB2YXIgb3V0ZXJOb2RlID0gcXVldWUuZGVxdWV1ZSgpO1xuICAgIHZhciBvdXRlclJpbmcgPSBvdXRlck5vZGUucG9zaXRpb25zO1xuICAgIGlmIChzY2FsZVRvRWxsaXBzb2lkU3VyZmFjZSkge1xuICAgICAgbGVuZ3RoID0gb3V0ZXJSaW5nLmxlbmd0aDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBlbGxpcHNvaWQuc2NhbGVUb0dlb2RldGljU3VyZmFjZShvdXRlclJpbmdbaV0sIG91dGVyUmluZ1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIG91dGVyUmluZyA9IGFycmF5UmVtb3ZlRHVwbGljYXRlcyhcbiAgICAgIG91dGVyUmluZyxcbiAgICAgIENhcnRlc2lhbjMuZXF1YWxzRXBzaWxvbixcbiAgICAgIHRydWVcbiAgICApO1xuICAgIGlmIChvdXRlclJpbmcubGVuZ3RoIDwgMykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIG51bUNoaWxkcmVuID0gb3V0ZXJOb2RlLmhvbGVzID8gb3V0ZXJOb2RlLmhvbGVzLmxlbmd0aCA6IDA7XG4gICAgLy8gVGhlIG91dGVyIHBvbHlnb24gY29udGFpbnMgaW5uZXIgcG9seWdvbnNcbiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtQ2hpbGRyZW47IGkrKykge1xuICAgICAgdmFyIGhvbGUgPSBvdXRlck5vZGUuaG9sZXNbaV07XG4gICAgICB2YXIgaG9sZVBvc2l0aW9ucyA9IGhvbGUucG9zaXRpb25zO1xuICAgICAgaWYgKHNjYWxlVG9FbGxpcHNvaWRTdXJmYWNlKSB7XG4gICAgICAgIGxlbmd0aCA9IGhvbGVQb3NpdGlvbnMubGVuZ3RoO1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuZ3RoOyArK2opIHtcbiAgICAgICAgICBlbGxpcHNvaWQuc2NhbGVUb0dlb2RldGljU3VyZmFjZShob2xlUG9zaXRpb25zW2pdLCBob2xlUG9zaXRpb25zW2pdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaG9sZVBvc2l0aW9ucyA9IGFycmF5UmVtb3ZlRHVwbGljYXRlcyhcbiAgICAgICAgaG9sZVBvc2l0aW9ucyxcbiAgICAgICAgQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgICAgaWYgKGhvbGVQb3NpdGlvbnMubGVuZ3RoIDwgMykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHBvbHlnb25zLnB1c2goaG9sZVBvc2l0aW9ucyk7XG5cbiAgICAgIHZhciBudW1HcmFuZGNoaWxkcmVuID0gMDtcbiAgICAgIGlmIChkZWZpbmVkKGhvbGUuaG9sZXMpKSB7XG4gICAgICAgIG51bUdyYW5kY2hpbGRyZW4gPSBob2xlLmhvbGVzLmxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgZm9yIChqID0gMDsgaiA8IG51bUdyYW5kY2hpbGRyZW47IGorKykge1xuICAgICAgICBxdWV1ZS5lbnF1ZXVlKGhvbGUuaG9sZXNbal0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBvbHlnb25zLnB1c2gob3V0ZXJSaW5nKTtcbiAgfVxuXG4gIHJldHVybiBwb2x5Z29ucztcbn07XG5cblBvbHlnb25HZW9tZXRyeUxpYnJhcnkucG9seWdvbnNGcm9tSGllcmFyY2h5ID0gZnVuY3Rpb24gKFxuICBwb2x5Z29uSGllcmFyY2h5LFxuICBwcm9qZWN0UG9pbnRzVG8yRCxcbiAgc2NhbGVUb0VsbGlwc29pZFN1cmZhY2UsXG4gIGVsbGlwc29pZFxuKSB7XG4gIC8vIGNyZWF0ZSBmcm9tIGEgcG9seWdvbiBoaWVyYXJjaHlcbiAgLy8gQWxnb3JpdGhtIGFkYXB0ZWQgZnJvbSBodHRwOi8vd3d3Lmdlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1RyaWFuZ3VsYXRpb25CeUVhckNsaXBwaW5nLnBkZlxuICB2YXIgaGllcmFyY2h5ID0gW107XG4gIHZhciBwb2x5Z29ucyA9IFtdO1xuXG4gIHZhciBxdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICBxdWV1ZS5lbnF1ZXVlKHBvbHlnb25IaWVyYXJjaHkpO1xuXG4gIHdoaWxlIChxdWV1ZS5sZW5ndGggIT09IDApIHtcbiAgICB2YXIgb3V0ZXJOb2RlID0gcXVldWUuZGVxdWV1ZSgpO1xuICAgIHZhciBvdXRlclJpbmcgPSBvdXRlck5vZGUucG9zaXRpb25zO1xuICAgIHZhciBob2xlcyA9IG91dGVyTm9kZS5ob2xlcztcblxuICAgIHZhciBpO1xuICAgIHZhciBsZW5ndGg7XG4gICAgaWYgKHNjYWxlVG9FbGxpcHNvaWRTdXJmYWNlKSB7XG4gICAgICBsZW5ndGggPSBvdXRlclJpbmcubGVuZ3RoO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsbGlwc29pZC5zY2FsZVRvR2VvZGV0aWNTdXJmYWNlKG91dGVyUmluZ1tpXSwgb3V0ZXJSaW5nW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvdXRlclJpbmcgPSBhcnJheVJlbW92ZUR1cGxpY2F0ZXMoXG4gICAgICBvdXRlclJpbmcsXG4gICAgICBDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb24sXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICBpZiAob3V0ZXJSaW5nLmxlbmd0aCA8IDMpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBwb3NpdGlvbnMyRCA9IHByb2plY3RQb2ludHNUbzJEKG91dGVyUmluZyk7XG4gICAgaWYgKCFkZWZpbmVkKHBvc2l0aW9uczJEKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhciBob2xlSW5kaWNlcyA9IFtdO1xuXG4gICAgdmFyIG9yaWdpbmFsV2luZGluZ09yZGVyID0gUG9seWdvblBpcGVsaW5lLmNvbXB1dGVXaW5kaW5nT3JkZXIyRChcbiAgICAgIHBvc2l0aW9uczJEXG4gICAgKTtcbiAgICBpZiAob3JpZ2luYWxXaW5kaW5nT3JkZXIgPT09IFdpbmRpbmdPcmRlci5DTE9DS1dJU0UpIHtcbiAgICAgIHBvc2l0aW9uczJELnJldmVyc2UoKTtcbiAgICAgIG91dGVyUmluZyA9IG91dGVyUmluZy5zbGljZSgpLnJldmVyc2UoKTtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb25zID0gb3V0ZXJSaW5nLnNsaWNlKCk7XG4gICAgdmFyIG51bUNoaWxkcmVuID0gZGVmaW5lZChob2xlcykgPyBob2xlcy5sZW5ndGggOiAwO1xuICAgIHZhciBwb2x5Z29uSG9sZXMgPSBbXTtcbiAgICB2YXIgajtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBudW1DaGlsZHJlbjsgaSsrKSB7XG4gICAgICB2YXIgaG9sZSA9IGhvbGVzW2ldO1xuICAgICAgdmFyIGhvbGVQb3NpdGlvbnMgPSBob2xlLnBvc2l0aW9ucztcbiAgICAgIGlmIChzY2FsZVRvRWxsaXBzb2lkU3VyZmFjZSkge1xuICAgICAgICBsZW5ndGggPSBob2xlUG9zaXRpb25zLmxlbmd0aDtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2UoaG9sZVBvc2l0aW9uc1tqXSwgaG9sZVBvc2l0aW9uc1tqXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaG9sZVBvc2l0aW9ucyA9IGFycmF5UmVtb3ZlRHVwbGljYXRlcyhcbiAgICAgICAgaG9sZVBvc2l0aW9ucyxcbiAgICAgICAgQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgICAgaWYgKGhvbGVQb3NpdGlvbnMubGVuZ3RoIDwgMykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGhvbGVQb3NpdGlvbnMyRCA9IHByb2plY3RQb2ludHNUbzJEKGhvbGVQb3NpdGlvbnMpO1xuICAgICAgaWYgKCFkZWZpbmVkKGhvbGVQb3NpdGlvbnMyRCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIG9yaWdpbmFsV2luZGluZ09yZGVyID0gUG9seWdvblBpcGVsaW5lLmNvbXB1dGVXaW5kaW5nT3JkZXIyRChcbiAgICAgICAgaG9sZVBvc2l0aW9uczJEXG4gICAgICApO1xuICAgICAgaWYgKG9yaWdpbmFsV2luZGluZ09yZGVyID09PSBXaW5kaW5nT3JkZXIuQ0xPQ0tXSVNFKSB7XG4gICAgICAgIGhvbGVQb3NpdGlvbnMyRC5yZXZlcnNlKCk7XG4gICAgICAgIGhvbGVQb3NpdGlvbnMgPSBob2xlUG9zaXRpb25zLnNsaWNlKCkucmV2ZXJzZSgpO1xuICAgICAgfVxuXG4gICAgICBwb2x5Z29uSG9sZXMucHVzaChob2xlUG9zaXRpb25zKTtcbiAgICAgIGhvbGVJbmRpY2VzLnB1c2gocG9zaXRpb25zLmxlbmd0aCk7XG4gICAgICBwb3NpdGlvbnMgPSBwb3NpdGlvbnMuY29uY2F0KGhvbGVQb3NpdGlvbnMpO1xuICAgICAgcG9zaXRpb25zMkQgPSBwb3NpdGlvbnMyRC5jb25jYXQoaG9sZVBvc2l0aW9uczJEKTtcblxuICAgICAgdmFyIG51bUdyYW5kY2hpbGRyZW4gPSAwO1xuICAgICAgaWYgKGRlZmluZWQoaG9sZS5ob2xlcykpIHtcbiAgICAgICAgbnVtR3JhbmRjaGlsZHJlbiA9IGhvbGUuaG9sZXMubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGogPSAwOyBqIDwgbnVtR3JhbmRjaGlsZHJlbjsgaisrKSB7XG4gICAgICAgIHF1ZXVlLmVucXVldWUoaG9sZS5ob2xlc1tqXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaGllcmFyY2h5LnB1c2goe1xuICAgICAgb3V0ZXJSaW5nOiBvdXRlclJpbmcsXG4gICAgICBob2xlczogcG9seWdvbkhvbGVzLFxuICAgIH0pO1xuICAgIHBvbHlnb25zLnB1c2goe1xuICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnMsXG4gICAgICBwb3NpdGlvbnMyRDogcG9zaXRpb25zMkQsXG4gICAgICBob2xlczogaG9sZUluZGljZXMsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGhpZXJhcmNoeTogaGllcmFyY2h5LFxuICAgIHBvbHlnb25zOiBwb2x5Z29ucyxcbiAgfTtcbn07XG5cbnZhciBjb21wdXRlQm91bmRpbmdSZWN0YW5nbGVDYXJ0ZXNpYW4yID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciBjb21wdXRlQm91bmRpbmdSZWN0YW5nbGVDYXJ0ZXNpYW4zID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBjb21wdXRlQm91bmRpbmdSZWN0YW5nbGVRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTtcbnZhciBjb21wdXRlQm91bmRpbmdSZWN0YW5nbGVNYXRyaXgzID0gbmV3IE1hdHJpeDMoKTtcblBvbHlnb25HZW9tZXRyeUxpYnJhcnkuY29tcHV0ZUJvdW5kaW5nUmVjdGFuZ2xlID0gZnVuY3Rpb24gKFxuICBwbGFuZU5vcm1hbCxcbiAgcHJvamVjdFBvaW50VG8yRCxcbiAgcG9zaXRpb25zLFxuICBhbmdsZSxcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIHJvdGF0aW9uID0gUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKFxuICAgIHBsYW5lTm9ybWFsLFxuICAgIGFuZ2xlLFxuICAgIGNvbXB1dGVCb3VuZGluZ1JlY3RhbmdsZVF1YXRlcm5pb25cbiAgKTtcbiAgdmFyIHRleHR1cmVNYXRyaXggPSBNYXRyaXgzLmZyb21RdWF0ZXJuaW9uKFxuICAgIHJvdGF0aW9uLFxuICAgIGNvbXB1dGVCb3VuZGluZ1JlY3RhbmdsZU1hdHJpeDNcbiAgKTtcblxuICB2YXIgbWluWCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgdmFyIG1heFggPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gIHZhciBtaW5ZID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICB2YXIgbWF4WSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcblxuICB2YXIgbGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwID0gQ2FydGVzaWFuMy5jbG9uZShwb3NpdGlvbnNbaV0sIGNvbXB1dGVCb3VuZGluZ1JlY3RhbmdsZUNhcnRlc2lhbjMpO1xuICAgIE1hdHJpeDMubXVsdGlwbHlCeVZlY3Rvcih0ZXh0dXJlTWF0cml4LCBwLCBwKTtcbiAgICB2YXIgc3QgPSBwcm9qZWN0UG9pbnRUbzJEKHAsIGNvbXB1dGVCb3VuZGluZ1JlY3RhbmdsZUNhcnRlc2lhbjIpO1xuXG4gICAgaWYgKGRlZmluZWQoc3QpKSB7XG4gICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgc3QueCk7XG4gICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgc3QueCk7XG5cbiAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCBzdC55KTtcbiAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBzdC55KTtcbiAgICB9XG4gIH1cblxuICByZXN1bHQueCA9IG1pblg7XG4gIHJlc3VsdC55ID0gbWluWTtcbiAgcmVzdWx0LndpZHRoID0gbWF4WCAtIG1pblg7XG4gIHJlc3VsdC5oZWlnaHQgPSBtYXhZIC0gbWluWTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblBvbHlnb25HZW9tZXRyeUxpYnJhcnkuY3JlYXRlR2VvbWV0cnlGcm9tUG9zaXRpb25zID0gZnVuY3Rpb24gKFxuICBlbGxpcHNvaWQsXG4gIHBvbHlnb24sXG4gIGdyYW51bGFyaXR5LFxuICBwZXJQb3NpdGlvbkhlaWdodCxcbiAgdmVydGV4Rm9ybWF0LFxuICBhcmNUeXBlXG4pIHtcbiAgdmFyIGluZGljZXMgPSBQb2x5Z29uUGlwZWxpbmUudHJpYW5ndWxhdGUocG9seWdvbi5wb3NpdGlvbnMyRCwgcG9seWdvbi5ob2xlcyk7XG5cbiAgLyogSWYgcG9seWdvbiBpcyBjb21wbGV0ZWx5IHVucmVuZGVyYWJsZSwganVzdCB1c2UgdGhlIGZpcnN0IHRocmVlIHZlcnRpY2VzICovXG4gIGlmIChpbmRpY2VzLmxlbmd0aCA8IDMpIHtcbiAgICBpbmRpY2VzID0gWzAsIDEsIDJdO1xuICB9XG5cbiAgdmFyIHBvc2l0aW9ucyA9IHBvbHlnb24ucG9zaXRpb25zO1xuXG4gIGlmIChwZXJQb3NpdGlvbkhlaWdodCkge1xuICAgIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICAgIHZhciBmbGF0dGVuZWRQb3NpdGlvbnMgPSBuZXcgQXJyYXkobGVuZ3RoICogMyk7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcCA9IHBvc2l0aW9uc1tpXTtcbiAgICAgIGZsYXR0ZW5lZFBvc2l0aW9uc1tpbmRleCsrXSA9IHAueDtcbiAgICAgIGZsYXR0ZW5lZFBvc2l0aW9uc1tpbmRleCsrXSA9IHAueTtcbiAgICAgIGZsYXR0ZW5lZFBvc2l0aW9uc1tpbmRleCsrXSA9IHAuejtcbiAgICB9XG4gICAgdmFyIGdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5KHtcbiAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgcG9zaXRpb246IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZSh7XG4gICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkRPVUJMRSxcbiAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAzLFxuICAgICAgICAgIHZhbHVlczogZmxhdHRlbmVkUG9zaXRpb25zLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgICBpbmRpY2VzOiBpbmRpY2VzLFxuICAgICAgcHJpbWl0aXZlVHlwZTogUHJpbWl0aXZlVHlwZS5UUklBTkdMRVMsXG4gICAgfSk7XG5cbiAgICBpZiAodmVydGV4Rm9ybWF0Lm5vcm1hbCkge1xuICAgICAgcmV0dXJuIEdlb21ldHJ5UGlwZWxpbmUuY29tcHV0ZU5vcm1hbChnZW9tZXRyeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdlb21ldHJ5O1xuICB9XG5cbiAgaWYgKGFyY1R5cGUgPT09IEFyY1R5cGUuR0VPREVTSUMpIHtcbiAgICByZXR1cm4gUG9seWdvblBpcGVsaW5lLmNvbXB1dGVTdWJkaXZpc2lvbihcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIHBvc2l0aW9ucyxcbiAgICAgIGluZGljZXMsXG4gICAgICBncmFudWxhcml0eVxuICAgICk7XG4gIH0gZWxzZSBpZiAoYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgIHJldHVybiBQb2x5Z29uUGlwZWxpbmUuY29tcHV0ZVJodW1iTGluZVN1YmRpdmlzaW9uKFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgcG9zaXRpb25zLFxuICAgICAgaW5kaWNlcyxcbiAgICAgIGdyYW51bGFyaXR5XG4gICAgKTtcbiAgfVxufTtcblxudmFyIGNvbXB1dGVXYWxsSW5kaWNlc1N1YmRpdmlkZWQgPSBbXTtcbnZhciBwMVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHAyU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cblBvbHlnb25HZW9tZXRyeUxpYnJhcnkuY29tcHV0ZVdhbGxHZW9tZXRyeSA9IGZ1bmN0aW9uIChcbiAgcG9zaXRpb25zLFxuICBlbGxpcHNvaWQsXG4gIGdyYW51bGFyaXR5LFxuICBwZXJQb3NpdGlvbkhlaWdodCxcbiAgYXJjVHlwZVxuKSB7XG4gIHZhciBlZGdlUG9zaXRpb25zO1xuICB2YXIgdG9wRWRnZUxlbmd0aDtcbiAgdmFyIGk7XG4gIHZhciBwMTtcbiAgdmFyIHAyO1xuXG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAwO1xuXG4gIGlmICghcGVyUG9zaXRpb25IZWlnaHQpIHtcbiAgICB2YXIgbWluRGlzdGFuY2UgPSBDZXNpdW1NYXRoLmNob3JkTGVuZ3RoKFxuICAgICAgZ3JhbnVsYXJpdHksXG4gICAgICBlbGxpcHNvaWQubWF4aW11bVJhZGl1c1xuICAgICk7XG5cbiAgICB2YXIgbnVtVmVydGljZXMgPSAwO1xuICAgIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbnVtVmVydGljZXMgKz0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5zdWJkaXZpZGVMaW5lQ291bnQoXG4gICAgICAgICAgcG9zaXRpb25zW2ldLFxuICAgICAgICAgIHBvc2l0aW9uc1soaSArIDEpICUgbGVuZ3RoXSxcbiAgICAgICAgICBtaW5EaXN0YW5jZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG51bVZlcnRpY2VzICs9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc3ViZGl2aWRlUmh1bWJMaW5lQ291bnQoXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHBvc2l0aW9uc1tpXSxcbiAgICAgICAgICBwb3NpdGlvbnNbKGkgKyAxKSAlIGxlbmd0aF0sXG4gICAgICAgICAgbWluRGlzdGFuY2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0b3BFZGdlTGVuZ3RoID0gKG51bVZlcnRpY2VzICsgbGVuZ3RoKSAqIDM7XG4gICAgZWRnZVBvc2l0aW9ucyA9IG5ldyBBcnJheSh0b3BFZGdlTGVuZ3RoICogMik7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBwMSA9IHBvc2l0aW9uc1tpXTtcbiAgICAgIHAyID0gcG9zaXRpb25zWyhpICsgMSkgJSBsZW5ndGhdO1xuXG4gICAgICB2YXIgdGVtcFBvc2l0aW9ucztcbiAgICAgIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDKSB7XG4gICAgICAgIHRlbXBQb3NpdGlvbnMgPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnN1YmRpdmlkZUxpbmUoXG4gICAgICAgICAgcDEsXG4gICAgICAgICAgcDIsXG4gICAgICAgICAgbWluRGlzdGFuY2UsXG4gICAgICAgICAgY29tcHV0ZVdhbGxJbmRpY2VzU3ViZGl2aWRlZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLlJIVU1CKSB7XG4gICAgICAgIHRlbXBQb3NpdGlvbnMgPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnN1YmRpdmlkZVJodW1iTGluZShcbiAgICAgICAgICBlbGxpcHNvaWQsXG4gICAgICAgICAgcDEsXG4gICAgICAgICAgcDIsXG4gICAgICAgICAgbWluRGlzdGFuY2UsXG4gICAgICAgICAgY29tcHV0ZVdhbGxJbmRpY2VzU3ViZGl2aWRlZFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBQb3NpdGlvbnNMZW5ndGggPSB0ZW1wUG9zaXRpb25zLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVtcFBvc2l0aW9uc0xlbmd0aDsgKytqLCArK2luZGV4KSB7XG4gICAgICAgIGVkZ2VQb3NpdGlvbnNbaW5kZXhdID0gdGVtcFBvc2l0aW9uc1tqXTtcbiAgICAgICAgZWRnZVBvc2l0aW9uc1tpbmRleCArIHRvcEVkZ2VMZW5ndGhdID0gdGVtcFBvc2l0aW9uc1tqXTtcbiAgICAgIH1cblxuICAgICAgZWRnZVBvc2l0aW9uc1tpbmRleF0gPSBwMi54O1xuICAgICAgZWRnZVBvc2l0aW9uc1tpbmRleCArIHRvcEVkZ2VMZW5ndGhdID0gcDIueDtcbiAgICAgICsraW5kZXg7XG5cbiAgICAgIGVkZ2VQb3NpdGlvbnNbaW5kZXhdID0gcDIueTtcbiAgICAgIGVkZ2VQb3NpdGlvbnNbaW5kZXggKyB0b3BFZGdlTGVuZ3RoXSA9IHAyLnk7XG4gICAgICArK2luZGV4O1xuXG4gICAgICBlZGdlUG9zaXRpb25zW2luZGV4XSA9IHAyLno7XG4gICAgICBlZGdlUG9zaXRpb25zW2luZGV4ICsgdG9wRWRnZUxlbmd0aF0gPSBwMi56O1xuICAgICAgKytpbmRleDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdG9wRWRnZUxlbmd0aCA9IGxlbmd0aCAqIDMgKiAyO1xuICAgIGVkZ2VQb3NpdGlvbnMgPSBuZXcgQXJyYXkodG9wRWRnZUxlbmd0aCAqIDIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcDEgPSBwb3NpdGlvbnNbaV07XG4gICAgICBwMiA9IHBvc2l0aW9uc1soaSArIDEpICUgbGVuZ3RoXTtcbiAgICAgIGVkZ2VQb3NpdGlvbnNbaW5kZXhdID0gZWRnZVBvc2l0aW9uc1tpbmRleCArIHRvcEVkZ2VMZW5ndGhdID0gcDEueDtcbiAgICAgICsraW5kZXg7XG4gICAgICBlZGdlUG9zaXRpb25zW2luZGV4XSA9IGVkZ2VQb3NpdGlvbnNbaW5kZXggKyB0b3BFZGdlTGVuZ3RoXSA9IHAxLnk7XG4gICAgICArK2luZGV4O1xuICAgICAgZWRnZVBvc2l0aW9uc1tpbmRleF0gPSBlZGdlUG9zaXRpb25zW2luZGV4ICsgdG9wRWRnZUxlbmd0aF0gPSBwMS56O1xuICAgICAgKytpbmRleDtcbiAgICAgIGVkZ2VQb3NpdGlvbnNbaW5kZXhdID0gZWRnZVBvc2l0aW9uc1tpbmRleCArIHRvcEVkZ2VMZW5ndGhdID0gcDIueDtcbiAgICAgICsraW5kZXg7XG4gICAgICBlZGdlUG9zaXRpb25zW2luZGV4XSA9IGVkZ2VQb3NpdGlvbnNbaW5kZXggKyB0b3BFZGdlTGVuZ3RoXSA9IHAyLnk7XG4gICAgICArK2luZGV4O1xuICAgICAgZWRnZVBvc2l0aW9uc1tpbmRleF0gPSBlZGdlUG9zaXRpb25zW2luZGV4ICsgdG9wRWRnZUxlbmd0aF0gPSBwMi56O1xuICAgICAgKytpbmRleDtcbiAgICB9XG4gIH1cblxuICBsZW5ndGggPSBlZGdlUG9zaXRpb25zLmxlbmd0aDtcbiAgdmFyIGluZGljZXMgPSBJbmRleERhdGF0eXBlLmNyZWF0ZVR5cGVkQXJyYXkoXG4gICAgbGVuZ3RoIC8gMyxcbiAgICBsZW5ndGggLSBwb3NpdGlvbnMubGVuZ3RoICogNlxuICApO1xuICB2YXIgZWRnZUluZGV4ID0gMDtcbiAgbGVuZ3RoIC89IDY7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIFVMID0gaTtcbiAgICB2YXIgVVIgPSBVTCArIDE7XG4gICAgdmFyIExMID0gVUwgKyBsZW5ndGg7XG4gICAgdmFyIExSID0gTEwgKyAxO1xuXG4gICAgcDEgPSBDYXJ0ZXNpYW4zLmZyb21BcnJheShlZGdlUG9zaXRpb25zLCBVTCAqIDMsIHAxU2NyYXRjaCk7XG4gICAgcDIgPSBDYXJ0ZXNpYW4zLmZyb21BcnJheShlZGdlUG9zaXRpb25zLCBVUiAqIDMsIHAyU2NyYXRjaCk7XG4gICAgaWYgKFxuICAgICAgQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uKFxuICAgICAgICBwMSxcbiAgICAgICAgcDIsXG4gICAgICAgIENlc2l1bU1hdGguRVBTSUxPTjEwLFxuICAgICAgICBDZXNpdW1NYXRoLkVQU0lMT04xMFxuICAgICAgKVxuICAgICkge1xuICAgICAgLy9za2lwIGNvcm5lclxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaW5kaWNlc1tlZGdlSW5kZXgrK10gPSBVTDtcbiAgICBpbmRpY2VzW2VkZ2VJbmRleCsrXSA9IExMO1xuICAgIGluZGljZXNbZWRnZUluZGV4KytdID0gVVI7XG4gICAgaW5kaWNlc1tlZGdlSW5kZXgrK10gPSBVUjtcbiAgICBpbmRpY2VzW2VkZ2VJbmRleCsrXSA9IExMO1xuICAgIGluZGljZXNbZWRnZUluZGV4KytdID0gTFI7XG4gIH1cblxuICByZXR1cm4gbmV3IEdlb21ldHJ5KHtcbiAgICBhdHRyaWJ1dGVzOiBuZXcgR2VvbWV0cnlBdHRyaWJ1dGVzKHtcbiAgICAgIHBvc2l0aW9uOiBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRE9VQkxFLFxuICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAzLFxuICAgICAgICB2YWx1ZXM6IGVkZ2VQb3NpdGlvbnMsXG4gICAgICB9KSxcbiAgICB9KSxcbiAgICBpbmRpY2VzOiBpbmRpY2VzLFxuICAgIHByaW1pdGl2ZVR5cGU6IFByaW1pdGl2ZVR5cGUuVFJJQU5HTEVTLFxuICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///38425\n')},78757:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82982);\n\n\n/**\n * An hierarchy of linear rings which define a polygon and its holes.\n * The holes themselves may also have holes which nest inner polygons.\n * @alias PolygonHierarchy\n * @constructor\n *\n * @param {Cartesian3[]} [positions] A linear ring defining the outer boundary of the polygon or hole.\n * @param {PolygonHierarchy[]} [holes] An array of polygon hierarchies defining holes in the polygon.\n */\nfunction PolygonHierarchy(positions, holes) {\n  /**\n   * A linear ring defining the outer boundary of the polygon or hole.\n   * @type {Cartesian3[]}\n   */\n  this.positions = (0,_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(positions) ? positions : [];\n\n  /**\n   * An array of polygon hierarchies defining holes in the polygon.\n   * @type {PolygonHierarchy[]}\n   */\n  this.holes = (0,_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(holes) ? holes : [];\n}\n/* harmony default export */ __webpack_exports__["Z"] = (PolygonHierarchy);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzg3NTcuanMiLCJtYXBwaW5ncyI6IjtBQUFtQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLFdBQVcsb0JBQW9CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsbUJBQW1CLGdFQUFPOztBQUUxQjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsZUFBZSxnRUFBTztBQUN0QjtBQUNBLHlEQUFlLGdCQUFnQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0NvcmUvUG9seWdvbkhpZXJhcmNoeS5qcz82MTU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBBbiBoaWVyYXJjaHkgb2YgbGluZWFyIHJpbmdzIHdoaWNoIGRlZmluZSBhIHBvbHlnb24gYW5kIGl0cyBob2xlcy5cbiAqIFRoZSBob2xlcyB0aGVtc2VsdmVzIG1heSBhbHNvIGhhdmUgaG9sZXMgd2hpY2ggbmVzdCBpbm5lciBwb2x5Z29ucy5cbiAqIEBhbGlhcyBQb2x5Z29uSGllcmFyY2h5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjNbXX0gW3Bvc2l0aW9uc10gQSBsaW5lYXIgcmluZyBkZWZpbmluZyB0aGUgb3V0ZXIgYm91bmRhcnkgb2YgdGhlIHBvbHlnb24gb3IgaG9sZS5cbiAqIEBwYXJhbSB7UG9seWdvbkhpZXJhcmNoeVtdfSBbaG9sZXNdIEFuIGFycmF5IG9mIHBvbHlnb24gaGllcmFyY2hpZXMgZGVmaW5pbmcgaG9sZXMgaW4gdGhlIHBvbHlnb24uXG4gKi9cbmZ1bmN0aW9uIFBvbHlnb25IaWVyYXJjaHkocG9zaXRpb25zLCBob2xlcykge1xuICAvKipcbiAgICogQSBsaW5lYXIgcmluZyBkZWZpbmluZyB0aGUgb3V0ZXIgYm91bmRhcnkgb2YgdGhlIHBvbHlnb24gb3IgaG9sZS5cbiAgICogQHR5cGUge0NhcnRlc2lhbjNbXX1cbiAgICovXG4gIHRoaXMucG9zaXRpb25zID0gZGVmaW5lZChwb3NpdGlvbnMpID8gcG9zaXRpb25zIDogW107XG5cbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIHBvbHlnb24gaGllcmFyY2hpZXMgZGVmaW5pbmcgaG9sZXMgaW4gdGhlIHBvbHlnb24uXG4gICAqIEB0eXBlIHtQb2x5Z29uSGllcmFyY2h5W119XG4gICAqL1xuICB0aGlzLmhvbGVzID0gZGVmaW5lZChob2xlcykgPyBob2xlcyA6IFtdO1xufVxuZXhwb3J0IGRlZmF1bHQgUG9seWdvbkhpZXJhcmNoeTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///78757\n')},29895:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ArcType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11491);\n/* harmony import */ var _arrayFill_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23401);\n/* harmony import */ var _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(48243);\n/* harmony import */ var _Check_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66553);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(84828);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12572);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50491);\n/* harmony import */ var _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(74744);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13616);\n/* harmony import */ var _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(56652);\n/* harmony import */ var _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(26865);\n/* harmony import */ var _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(87379);\n/* harmony import */ var _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(57552);\n/* harmony import */ var _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(22832);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(99417);\n/* harmony import */ var _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(38425);\n/* harmony import */ var _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(78284);\n/* harmony import */ var _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(97264);\n/* harmony import */ var _WindingOrder_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(32441);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar createGeometryFromPositionsPositions = [];\nvar createGeometryFromPositionsSubdivided = [];\n\nfunction createGeometryFromPositions(\n  ellipsoid,\n  positions,\n  minDistance,\n  perPositionHeight,\n  arcType\n) {\n  var tangentPlane = _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromPoints */ .Z.fromPoints(positions, ellipsoid);\n  var positions2D = tangentPlane.projectPointsOntoPlane(\n    positions,\n    createGeometryFromPositionsPositions\n  );\n\n  var originalWindingOrder = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(positions2D);\n  if (originalWindingOrder === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE) {\n    positions2D.reverse();\n    positions = positions.slice().reverse();\n  }\n\n  var subdividedPositions;\n  var i;\n\n  var length = positions.length;\n  var index = 0;\n\n  if (!perPositionHeight) {\n    var numVertices = 0;\n    if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n      for (i = 0; i < length; i++) {\n        numVertices += _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideLineCount */ .Z.subdivideLineCount(\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance\n        );\n      }\n    } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n      for (i = 0; i < length; i++) {\n        numVertices += _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideRhumbLineCount */ .Z.subdivideRhumbLineCount(\n          ellipsoid,\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance\n        );\n      }\n    }\n    subdividedPositions = new Float64Array(numVertices * 3);\n    for (i = 0; i < length; i++) {\n      var tempPositions;\n      if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n        tempPositions = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideLine */ .Z.subdivideLine(\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance,\n          createGeometryFromPositionsSubdivided\n        );\n      } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n        tempPositions = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideRhumbLine */ .Z.subdivideRhumbLine(\n          ellipsoid,\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance,\n          createGeometryFromPositionsSubdivided\n        );\n      }\n      var tempPositionsLength = tempPositions.length;\n      for (var j = 0; j < tempPositionsLength; ++j) {\n        subdividedPositions[index++] = tempPositions[j];\n      }\n    }\n  } else {\n    subdividedPositions = new Float64Array(length * 2 * 3);\n    for (i = 0; i < length; i++) {\n      var p0 = positions[i];\n      var p1 = positions[(i + 1) % length];\n      subdividedPositions[index++] = p0.x;\n      subdividedPositions[index++] = p0.y;\n      subdividedPositions[index++] = p0.z;\n      subdividedPositions[index++] = p1.x;\n      subdividedPositions[index++] = p1.y;\n      subdividedPositions[index++] = p1.z;\n    }\n  }\n\n  length = subdividedPositions.length / 3;\n  var indicesSize = length * 2;\n  var indices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].createTypedArray */ .Z.createTypedArray(length, indicesSize);\n  index = 0;\n  for (i = 0; i < length - 1; i++) {\n    indices[index++] = i;\n    indices[index++] = i + 1;\n  }\n  indices[index++] = length - 1;\n  indices[index++] = 0;\n\n  return new _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n    geometry: new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n      attributes: new _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n        position: new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n          componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].DOUBLE */ .Z.DOUBLE,\n          componentsPerAttribute: 3,\n          values: subdividedPositions,\n        }),\n      }),\n      indices: indices,\n      primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].LINES */ .Z.LINES,\n    }),\n  });\n}\n\nfunction createGeometryFromPositionsExtruded(\n  ellipsoid,\n  positions,\n  minDistance,\n  perPositionHeight,\n  arcType\n) {\n  var tangentPlane = _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromPoints */ .Z.fromPoints(positions, ellipsoid);\n  var positions2D = tangentPlane.projectPointsOntoPlane(\n    positions,\n    createGeometryFromPositionsPositions\n  );\n\n  var originalWindingOrder = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(positions2D);\n  if (originalWindingOrder === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE) {\n    positions2D.reverse();\n    positions = positions.slice().reverse();\n  }\n\n  var subdividedPositions;\n  var i;\n\n  var length = positions.length;\n  var corners = new Array(length);\n  var index = 0;\n\n  if (!perPositionHeight) {\n    var numVertices = 0;\n    if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n      for (i = 0; i < length; i++) {\n        numVertices += _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideLineCount */ .Z.subdivideLineCount(\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance\n        );\n      }\n    } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n      for (i = 0; i < length; i++) {\n        numVertices += _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideRhumbLineCount */ .Z.subdivideRhumbLineCount(\n          ellipsoid,\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance\n        );\n      }\n    }\n\n    subdividedPositions = new Float64Array(numVertices * 3 * 2);\n    for (i = 0; i < length; ++i) {\n      corners[i] = index / 3;\n      var tempPositions;\n      if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n        tempPositions = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideLine */ .Z.subdivideLine(\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance,\n          createGeometryFromPositionsSubdivided\n        );\n      } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n        tempPositions = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].subdivideRhumbLine */ .Z.subdivideRhumbLine(\n          ellipsoid,\n          positions[i],\n          positions[(i + 1) % length],\n          minDistance,\n          createGeometryFromPositionsSubdivided\n        );\n      }\n      var tempPositionsLength = tempPositions.length;\n      for (var j = 0; j < tempPositionsLength; ++j) {\n        subdividedPositions[index++] = tempPositions[j];\n      }\n    }\n  } else {\n    subdividedPositions = new Float64Array(length * 2 * 3 * 2);\n    for (i = 0; i < length; ++i) {\n      corners[i] = index / 3;\n      var p0 = positions[i];\n      var p1 = positions[(i + 1) % length];\n\n      subdividedPositions[index++] = p0.x;\n      subdividedPositions[index++] = p0.y;\n      subdividedPositions[index++] = p0.z;\n      subdividedPositions[index++] = p1.x;\n      subdividedPositions[index++] = p1.y;\n      subdividedPositions[index++] = p1.z;\n    }\n  }\n\n  length = subdividedPositions.length / (3 * 2);\n  var cornersLength = corners.length;\n\n  var indicesSize = (length * 2 + cornersLength) * 2;\n  var indices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].createTypedArray */ .Z.createTypedArray(\n    length + cornersLength,\n    indicesSize\n  );\n\n  index = 0;\n  for (i = 0; i < length; ++i) {\n    indices[index++] = i;\n    indices[index++] = (i + 1) % length;\n    indices[index++] = i + length;\n    indices[index++] = ((i + 1) % length) + length;\n  }\n\n  for (i = 0; i < cornersLength; i++) {\n    var corner = corners[i];\n    indices[index++] = corner;\n    indices[index++] = corner + length;\n  }\n\n  return new _GeometryInstance_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n    geometry: new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n      attributes: new _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n        position: new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n          componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].DOUBLE */ .Z.DOUBLE,\n          componentsPerAttribute: 3,\n          values: subdividedPositions,\n        }),\n      }),\n      indices: indices,\n      primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].LINES */ .Z.LINES,\n    }),\n  });\n}\n\n/**\n * A description of the outline of a polygon on the ellipsoid. The polygon is defined by a polygon hierarchy.\n *\n * @alias PolygonOutlineGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {PolygonHierarchy} options.polygonHierarchy A polygon hierarchy that can include holes.\n * @param {Number} [options.height=0.0] The distance in meters between the polygon and the ellipsoid surface.\n * @param {Number} [options.extrudedHeight] The distance in meters between the polygon\'s extruded face and the ellipsoid surface.\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Boolean} [options.perPositionHeight=false] Use the height of options.positions for each position instead of using options.height to determine the height.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of path the outline must follow. Valid options are {@link ArcType.GEODESIC} and {@link ArcType.RHUMB}.\n *\n * @see PolygonOutlineGeometry#createGeometry\n * @see PolygonOutlineGeometry#fromPositions\n *\n * @example\n * // 1. create a polygon outline from points\n * var polygon = new Cesium.PolygonOutlineGeometry({\n *   polygonHierarchy : new Cesium.PolygonHierarchy(\n *     Cesium.Cartesian3.fromDegreesArray([\n *       -72.0, 40.0,\n *       -70.0, 35.0,\n *       -75.0, 30.0,\n *       -70.0, 30.0,\n *       -68.0, 40.0\n *     ])\n *   )\n * });\n * var geometry = Cesium.PolygonOutlineGeometry.createGeometry(polygon);\n *\n * // 2. create a nested polygon with holes outline\n * var polygonWithHole = new Cesium.PolygonOutlineGeometry({\n *   polygonHierarchy : new Cesium.PolygonHierarchy(\n *     Cesium.Cartesian3.fromDegreesArray([\n *       -109.0, 30.0,\n *       -95.0, 30.0,\n *       -95.0, 40.0,\n *       -109.0, 40.0\n *     ]),\n *     [new Cesium.PolygonHierarchy(\n *       Cesium.Cartesian3.fromDegreesArray([\n *         -107.0, 31.0,\n *         -107.0, 39.0,\n *         -97.0, 39.0,\n *         -97.0, 31.0\n *       ]),\n *       [new Cesium.PolygonHierarchy(\n *         Cesium.Cartesian3.fromDegreesArray([\n *           -105.0, 33.0,\n *           -99.0, 33.0,\n *           -99.0, 37.0,\n *           -105.0, 37.0\n *         ]),\n *         [new Cesium.PolygonHierarchy(\n *           Cesium.Cartesian3.fromDegreesArray([\n *             -103.0, 34.0,\n *             -101.0, 34.0,\n *             -101.0, 36.0,\n *             -103.0, 36.0\n *           ])\n *         )]\n *       )]\n *     )]\n *   )\n * });\n * var geometry = Cesium.PolygonOutlineGeometry.createGeometry(polygonWithHole);\n *\n * // 3. create extruded polygon outline\n * var extrudedPolygon = new Cesium.PolygonOutlineGeometry({\n *   polygonHierarchy : new Cesium.PolygonHierarchy(\n *     Cesium.Cartesian3.fromDegreesArray([\n *       -72.0, 40.0,\n *       -70.0, 35.0,\n *       -75.0, 30.0,\n *       -70.0, 30.0,\n *       -68.0, 40.0\n *     ])\n *   ),\n *   extrudedHeight: 300000\n * });\n * var geometry = Cesium.PolygonOutlineGeometry.createGeometry(extrudedPolygon);\n */\nfunction PolygonOutlineGeometry(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.object */ .Z.typeOf.object("options", options);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.object */ .Z.typeOf.object("options.polygonHierarchy", options.polygonHierarchy);\n\n  if (options.perPositionHeight && (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(options.height)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "Cannot use both options.perPositionHeight and options.height"\n    );\n  }\n  if (\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(options.arcType) &&\n    options.arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC &&\n    options.arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB\n  ) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var polygonHierarchy = options.polygonHierarchy;\n  var ellipsoid = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WGS84 */ .Z.WGS84);\n  var granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.granularity,\n    _Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  );\n  var perPositionHeight = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.perPositionHeight, false);\n  var perPositionHeightExtrude =\n    perPositionHeight && (0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(options.extrudedHeight);\n  var arcType = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.arcType, _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC);\n\n  var height = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.height, 0.0);\n  var extrudedHeight = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.extrudedHeight, height);\n\n  if (!perPositionHeightExtrude) {\n    var h = Math.max(height, extrudedHeight);\n    extrudedHeight = Math.min(height, extrudedHeight);\n    height = h;\n  }\n\n  this._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(ellipsoid);\n  this._granularity = granularity;\n  this._height = height;\n  this._extrudedHeight = extrudedHeight;\n  this._arcType = arcType;\n  this._polygonHierarchy = polygonHierarchy;\n  this._perPositionHeight = perPositionHeight;\n  this._perPositionHeightExtrude = perPositionHeightExtrude;\n  this._offsetAttribute = options.offsetAttribute;\n  this._workerName = "createPolygonOutlineGeometry";\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength =\n    _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].computeHierarchyPackedLength */ .Z.computeHierarchyPackedLength(polygonHierarchy) +\n    _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].packedLength */ .Z.packedLength +\n    8;\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {PolygonOutlineGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nPolygonOutlineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.object */ .Z.typeOf.object("value", value);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].defined */ .Z.defined("array", array);\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(startingIndex, 0);\n\n  startingIndex = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].packPolygonHierarchy */ .Z.packPolygonHierarchy(\n    value._polygonHierarchy,\n    array,\n    startingIndex\n  );\n\n  _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].pack */ .Z.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].packedLength */ .Z.packedLength;\n\n  array[startingIndex++] = value._height;\n  array[startingIndex++] = value._extrudedHeight;\n  array[startingIndex++] = value._granularity;\n  array[startingIndex++] = value._perPositionHeightExtrude ? 1.0 : 0.0;\n  array[startingIndex++] = value._perPositionHeight ? 1.0 : 0.0;\n  array[startingIndex++] = value._arcType;\n  array[startingIndex++] = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(value._offsetAttribute, -1);\n  array[startingIndex] = value.packedLength;\n\n  return array;\n};\n\nvar scratchEllipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].UNIT_SPHERE */ .Z.UNIT_SPHERE);\nvar dummyOptions = {\n  polygonHierarchy: {},\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {PolygonOutlineGeometry} [result] The object into which to store the result.\n * @returns {PolygonOutlineGeometry} The modified result parameter or a new PolygonOutlineGeometry instance if one was not provided.\n */\nPolygonOutlineGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].defined */ .Z.defined("array", array);\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var polygonHierarchy = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].unpackPolygonHierarchy */ .Z.unpackPolygonHierarchy(\n    array,\n    startingIndex\n  );\n  startingIndex = polygonHierarchy.startingIndex;\n  delete polygonHierarchy.startingIndex;\n\n  var ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].unpack */ .Z.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].packedLength */ .Z.packedLength;\n\n  var height = array[startingIndex++];\n  var extrudedHeight = array[startingIndex++];\n  var granularity = array[startingIndex++];\n  var perPositionHeightExtrude = array[startingIndex++] === 1.0;\n  var perPositionHeight = array[startingIndex++] === 1.0;\n  var arcType = array[startingIndex++];\n  var offsetAttribute = array[startingIndex++];\n  var packedLength = array[startingIndex];\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(result)) {\n    result = new PolygonOutlineGeometry(dummyOptions);\n  }\n\n  result._polygonHierarchy = polygonHierarchy;\n  result._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(ellipsoid, result._ellipsoid);\n  result._height = height;\n  result._extrudedHeight = extrudedHeight;\n  result._granularity = granularity;\n  result._perPositionHeight = perPositionHeight;\n  result._perPositionHeightExtrude = perPositionHeightExtrude;\n  result._arcType = arcType;\n  result._offsetAttribute =\n    offsetAttribute === -1 ? undefined : offsetAttribute;\n  result.packedLength = packedLength;\n\n  return result;\n};\n\n/**\n * A description of a polygon outline from an array of positions.\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of positions that defined the corner points of the polygon.\n * @param {Number} [options.height=0.0] The height of the polygon.\n * @param {Number} [options.extrudedHeight] The height of the polygon extrusion.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Boolean} [options.perPositionHeight=false] Use the height of options.positions for each position instead of using options.height to determine the height.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of path the outline must follow. Valid options are {@link LinkType.GEODESIC} and {@link ArcType.RHUMB}.\n * @returns {PolygonOutlineGeometry}\n *\n *\n * @example\n * // create a polygon from points\n * var polygon = Cesium.PolygonOutlineGeometry.fromPositions({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     -72.0, 40.0,\n *     -70.0, 35.0,\n *     -75.0, 30.0,\n *     -70.0, 30.0,\n *     -68.0, 40.0\n *   ])\n * });\n * var geometry = Cesium.PolygonOutlineGeometry.createGeometry(polygon);\n *\n * @see PolygonOutlineGeometry#createGeometry\n */\nPolygonOutlineGeometry.fromPositions = function (options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].defined */ .Z.defined("options.positions", options.positions);\n  //>>includeEnd(\'debug\');\n\n  var newOptions = {\n    polygonHierarchy: {\n      positions: options.positions,\n    },\n    height: options.height,\n    extrudedHeight: options.extrudedHeight,\n    ellipsoid: options.ellipsoid,\n    granularity: options.granularity,\n    perPositionHeight: options.perPositionHeight,\n    arcType: options.arcType,\n    offsetAttribute: options.offsetAttribute,\n  };\n  return new PolygonOutlineGeometry(newOptions);\n};\n\n/**\n * Computes the geometric representation of a polygon outline, including its vertices, indices, and a bounding sphere.\n *\n * @param {PolygonOutlineGeometry} polygonGeometry A description of the polygon outline.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nPolygonOutlineGeometry.createGeometry = function (polygonGeometry) {\n  var ellipsoid = polygonGeometry._ellipsoid;\n  var granularity = polygonGeometry._granularity;\n  var polygonHierarchy = polygonGeometry._polygonHierarchy;\n  var perPositionHeight = polygonGeometry._perPositionHeight;\n  var arcType = polygonGeometry._arcType;\n\n  var polygons = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].polygonOutlinesFromHierarchy */ .Z.polygonOutlinesFromHierarchy(\n    polygonHierarchy,\n    !perPositionHeight,\n    ellipsoid\n  );\n\n  if (polygons.length === 0) {\n    return undefined;\n  }\n\n  var geometryInstance;\n  var geometries = [];\n  var minDistance = _Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].chordLength */ .Z.chordLength(\n    granularity,\n    ellipsoid.maximumRadius\n  );\n\n  var height = polygonGeometry._height;\n  var extrudedHeight = polygonGeometry._extrudedHeight;\n  var extrude =\n    polygonGeometry._perPositionHeightExtrude ||\n    !_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(height, extrudedHeight, 0, _Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON2 */ .Z.EPSILON2);\n  var offsetValue;\n  var i;\n  if (extrude) {\n    for (i = 0; i < polygons.length; i++) {\n      geometryInstance = createGeometryFromPositionsExtruded(\n        ellipsoid,\n        polygons[i],\n        minDistance,\n        perPositionHeight,\n        arcType\n      );\n      geometryInstance.geometry = _PolygonGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].scaleToGeodeticHeightExtruded */ .Z.scaleToGeodeticHeightExtruded(\n        geometryInstance.geometry,\n        height,\n        extrudedHeight,\n        ellipsoid,\n        perPositionHeight\n      );\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(polygonGeometry._offsetAttribute)) {\n        var size =\n          geometryInstance.geometry.attributes.position.values.length / 3;\n        var offsetAttribute = new Uint8Array(size);\n        if (polygonGeometry._offsetAttribute === _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].TOP */ .Z.TOP) {\n          offsetAttribute = (0,_arrayFill_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(offsetAttribute, 1, 0, size / 2);\n        } else {\n          offsetValue =\n            polygonGeometry._offsetAttribute === _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].NONE */ .Z.NONE\n              ? 0\n              : 1;\n          offsetAttribute = (0,_arrayFill_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(offsetAttribute, offsetValue);\n        }\n\n        geometryInstance.geometry.attributes.applyOffset = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(\n          {\n            componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n            componentsPerAttribute: 1,\n            values: offsetAttribute,\n          }\n        );\n      }\n      geometries.push(geometryInstance);\n    }\n  } else {\n    for (i = 0; i < polygons.length; i++) {\n      geometryInstance = createGeometryFromPositions(\n        ellipsoid,\n        polygons[i],\n        minDistance,\n        perPositionHeight,\n        arcType\n      );\n      geometryInstance.geometry.attributes.position.values = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].scaleToGeodeticHeight */ .Z.scaleToGeodeticHeight(\n        geometryInstance.geometry.attributes.position.values,\n        height,\n        ellipsoid,\n        !perPositionHeight\n      );\n\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(polygonGeometry._offsetAttribute)) {\n        var length =\n          geometryInstance.geometry.attributes.position.values.length;\n        var applyOffset = new Uint8Array(length / 3);\n        offsetValue =\n          polygonGeometry._offsetAttribute === _GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].NONE */ .Z.NONE\n            ? 0\n            : 1;\n        (0,_arrayFill_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(applyOffset, offsetValue);\n        geometryInstance.geometry.attributes.applyOffset = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(\n          {\n            componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n            componentsPerAttribute: 1,\n            values: applyOffset,\n          }\n        );\n      }\n\n      geometries.push(geometryInstance);\n    }\n  }\n\n  var geometry = _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].combineInstances */ .Z.combineInstances(geometries)[0];\n  var boundingSphere = _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromVertices */ .Z.fromVertices(\n    geometry.attributes.position.values\n  );\n\n  return new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n    attributes: geometry.attributes,\n    indices: geometry.indices,\n    primitiveType: geometry.primitiveType,\n    boundingSphere: boundingSphere,\n    offsetAttribute: polygonGeometry._offsetAttribute,\n  });\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolygonOutlineGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bS9Tb3VyY2UvQ29yZS9Qb2x5Z29uT3V0bGluZUdlb21ldHJ5LmpzP2MyYTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFyY1R5cGUgZnJvbSBcIi4vQXJjVHlwZS5qc1wiO1xuaW1wb3J0IGFycmF5RmlsbCBmcm9tIFwiLi9hcnJheUZpbGwuanNcIjtcbmltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENoZWNrIGZyb20gXCIuL0NoZWNrLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4vQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4vZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4vRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFbGxpcHNvaWQgZnJvbSBcIi4vRWxsaXBzb2lkLmpzXCI7XG5pbXBvcnQgRWxsaXBzb2lkVGFuZ2VudFBsYW5lIGZyb20gXCIuL0VsbGlwc29pZFRhbmdlbnRQbGFuZS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gXCIuL0dlb21ldHJ5LmpzXCI7XG5pbXBvcnQgR2VvbWV0cnlBdHRyaWJ1dGUgZnJvbSBcIi4vR2VvbWV0cnlBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBHZW9tZXRyeUF0dHJpYnV0ZXMgZnJvbSBcIi4vR2VvbWV0cnlBdHRyaWJ1dGVzLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnlJbnN0YW5jZSBmcm9tIFwiLi9HZW9tZXRyeUluc3RhbmNlLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUgZnJvbSBcIi4vR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBHZW9tZXRyeVBpcGVsaW5lIGZyb20gXCIuL0dlb21ldHJ5UGlwZWxpbmUuanNcIjtcbmltcG9ydCBJbmRleERhdGF0eXBlIGZyb20gXCIuL0luZGV4RGF0YXR5cGUuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuL01hdGguanNcIjtcbmltcG9ydCBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5IGZyb20gXCIuL1BvbHlnb25HZW9tZXRyeUxpYnJhcnkuanNcIjtcbmltcG9ydCBQb2x5Z29uUGlwZWxpbmUgZnJvbSBcIi4vUG9seWdvblBpcGVsaW5lLmpzXCI7XG5pbXBvcnQgUHJpbWl0aXZlVHlwZSBmcm9tIFwiLi9QcmltaXRpdmVUeXBlLmpzXCI7XG5pbXBvcnQgV2luZGluZ09yZGVyIGZyb20gXCIuL1dpbmRpbmdPcmRlci5qc1wiO1xudmFyIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc1Bvc2l0aW9ucyA9IFtdO1xudmFyIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc1N1YmRpdmlkZWQgPSBbXTtcblxuZnVuY3Rpb24gY3JlYXRlR2VvbWV0cnlGcm9tUG9zaXRpb25zKFxuICBlbGxpcHNvaWQsXG4gIHBvc2l0aW9ucyxcbiAgbWluRGlzdGFuY2UsXG4gIHBlclBvc2l0aW9uSGVpZ2h0LFxuICBhcmNUeXBlXG4pIHtcbiAgdmFyIHRhbmdlbnRQbGFuZSA9IEVsbGlwc29pZFRhbmdlbnRQbGFuZS5mcm9tUG9pbnRzKHBvc2l0aW9ucywgZWxsaXBzb2lkKTtcbiAgdmFyIHBvc2l0aW9uczJEID0gdGFuZ2VudFBsYW5lLnByb2plY3RQb2ludHNPbnRvUGxhbmUoXG4gICAgcG9zaXRpb25zLFxuICAgIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc1Bvc2l0aW9uc1xuICApO1xuXG4gIHZhciBvcmlnaW5hbFdpbmRpbmdPcmRlciA9IFBvbHlnb25QaXBlbGluZS5jb21wdXRlV2luZGluZ09yZGVyMkQocG9zaXRpb25zMkQpO1xuICBpZiAob3JpZ2luYWxXaW5kaW5nT3JkZXIgPT09IFdpbmRpbmdPcmRlci5DTE9DS1dJU0UpIHtcbiAgICBwb3NpdGlvbnMyRC5yZXZlcnNlKCk7XG4gICAgcG9zaXRpb25zID0gcG9zaXRpb25zLnNsaWNlKCkucmV2ZXJzZSgpO1xuICB9XG5cbiAgdmFyIHN1YmRpdmlkZWRQb3NpdGlvbnM7XG4gIHZhciBpO1xuXG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgaW5kZXggPSAwO1xuXG4gIGlmICghcGVyUG9zaXRpb25IZWlnaHQpIHtcbiAgICB2YXIgbnVtVmVydGljZXMgPSAwO1xuICAgIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbnVtVmVydGljZXMgKz0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5zdWJkaXZpZGVMaW5lQ291bnQoXG4gICAgICAgICAgcG9zaXRpb25zW2ldLFxuICAgICAgICAgIHBvc2l0aW9uc1soaSArIDEpICUgbGVuZ3RoXSxcbiAgICAgICAgICBtaW5EaXN0YW5jZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG51bVZlcnRpY2VzICs9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc3ViZGl2aWRlUmh1bWJMaW5lQ291bnQoXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHBvc2l0aW9uc1tpXSxcbiAgICAgICAgICBwb3NpdGlvbnNbKGkgKyAxKSAlIGxlbmd0aF0sXG4gICAgICAgICAgbWluRGlzdGFuY2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc3ViZGl2aWRlZFBvc2l0aW9ucyA9IG5ldyBGbG9hdDY0QXJyYXkobnVtVmVydGljZXMgKiAzKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0ZW1wUG9zaXRpb25zO1xuICAgICAgaWYgKGFyY1R5cGUgPT09IEFyY1R5cGUuR0VPREVTSUMpIHtcbiAgICAgICAgdGVtcFBvc2l0aW9ucyA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc3ViZGl2aWRlTGluZShcbiAgICAgICAgICBwb3NpdGlvbnNbaV0sXG4gICAgICAgICAgcG9zaXRpb25zWyhpICsgMSkgJSBsZW5ndGhdLFxuICAgICAgICAgIG1pbkRpc3RhbmNlLFxuICAgICAgICAgIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc1N1YmRpdmlkZWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgICAgICB0ZW1wUG9zaXRpb25zID0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5zdWJkaXZpZGVSaHVtYkxpbmUoXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHBvc2l0aW9uc1tpXSxcbiAgICAgICAgICBwb3NpdGlvbnNbKGkgKyAxKSAlIGxlbmd0aF0sXG4gICAgICAgICAgbWluRGlzdGFuY2UsXG4gICAgICAgICAgY3JlYXRlR2VvbWV0cnlGcm9tUG9zaXRpb25zU3ViZGl2aWRlZFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBQb3NpdGlvbnNMZW5ndGggPSB0ZW1wUG9zaXRpb25zLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVtcFBvc2l0aW9uc0xlbmd0aDsgKytqKSB7XG4gICAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnNbaW5kZXgrK10gPSB0ZW1wUG9zaXRpb25zW2pdO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzdWJkaXZpZGVkUG9zaXRpb25zID0gbmV3IEZsb2F0NjRBcnJheShsZW5ndGggKiAyICogMyk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcDAgPSBwb3NpdGlvbnNbaV07XG4gICAgICB2YXIgcDEgPSBwb3NpdGlvbnNbKGkgKyAxKSAlIGxlbmd0aF07XG4gICAgICBzdWJkaXZpZGVkUG9zaXRpb25zW2luZGV4KytdID0gcDAueDtcbiAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnNbaW5kZXgrK10gPSBwMC55O1xuICAgICAgc3ViZGl2aWRlZFBvc2l0aW9uc1tpbmRleCsrXSA9IHAwLno7XG4gICAgICBzdWJkaXZpZGVkUG9zaXRpb25zW2luZGV4KytdID0gcDEueDtcbiAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnNbaW5kZXgrK10gPSBwMS55O1xuICAgICAgc3ViZGl2aWRlZFBvc2l0aW9uc1tpbmRleCsrXSA9IHAxLno7XG4gICAgfVxuICB9XG5cbiAgbGVuZ3RoID0gc3ViZGl2aWRlZFBvc2l0aW9ucy5sZW5ndGggLyAzO1xuICB2YXIgaW5kaWNlc1NpemUgPSBsZW5ndGggKiAyO1xuICB2YXIgaW5kaWNlcyA9IEluZGV4RGF0YXR5cGUuY3JlYXRlVHlwZWRBcnJheShsZW5ndGgsIGluZGljZXNTaXplKTtcbiAgaW5kZXggPSAwO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgaW5kaWNlc1tpbmRleCsrXSA9IGk7XG4gICAgaW5kaWNlc1tpbmRleCsrXSA9IGkgKyAxO1xuICB9XG4gIGluZGljZXNbaW5kZXgrK10gPSBsZW5ndGggLSAxO1xuICBpbmRpY2VzW2luZGV4KytdID0gMDtcblxuICByZXR1cm4gbmV3IEdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgIGdlb21ldHJ5OiBuZXcgR2VvbWV0cnkoe1xuICAgICAgYXR0cmlidXRlczogbmV3IEdlb21ldHJ5QXR0cmlidXRlcyh7XG4gICAgICAgIHBvc2l0aW9uOiBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5ET1VCTEUsXG4gICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICB2YWx1ZXM6IHN1YmRpdmlkZWRQb3NpdGlvbnMsXG4gICAgICAgIH0pLFxuICAgICAgfSksXG4gICAgICBpbmRpY2VzOiBpbmRpY2VzLFxuICAgICAgcHJpbWl0aXZlVHlwZTogUHJpbWl0aXZlVHlwZS5MSU5FUyxcbiAgICB9KSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc0V4dHJ1ZGVkKFxuICBlbGxpcHNvaWQsXG4gIHBvc2l0aW9ucyxcbiAgbWluRGlzdGFuY2UsXG4gIHBlclBvc2l0aW9uSGVpZ2h0LFxuICBhcmNUeXBlXG4pIHtcbiAgdmFyIHRhbmdlbnRQbGFuZSA9IEVsbGlwc29pZFRhbmdlbnRQbGFuZS5mcm9tUG9pbnRzKHBvc2l0aW9ucywgZWxsaXBzb2lkKTtcbiAgdmFyIHBvc2l0aW9uczJEID0gdGFuZ2VudFBsYW5lLnByb2plY3RQb2ludHNPbnRvUGxhbmUoXG4gICAgcG9zaXRpb25zLFxuICAgIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc1Bvc2l0aW9uc1xuICApO1xuXG4gIHZhciBvcmlnaW5hbFdpbmRpbmdPcmRlciA9IFBvbHlnb25QaXBlbGluZS5jb21wdXRlV2luZGluZ09yZGVyMkQocG9zaXRpb25zMkQpO1xuICBpZiAob3JpZ2luYWxXaW5kaW5nT3JkZXIgPT09IFdpbmRpbmdPcmRlci5DTE9DS1dJU0UpIHtcbiAgICBwb3NpdGlvbnMyRC5yZXZlcnNlKCk7XG4gICAgcG9zaXRpb25zID0gcG9zaXRpb25zLnNsaWNlKCkucmV2ZXJzZSgpO1xuICB9XG5cbiAgdmFyIHN1YmRpdmlkZWRQb3NpdGlvbnM7XG4gIHZhciBpO1xuXG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgY29ybmVycyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICB2YXIgaW5kZXggPSAwO1xuXG4gIGlmICghcGVyUG9zaXRpb25IZWlnaHQpIHtcbiAgICB2YXIgbnVtVmVydGljZXMgPSAwO1xuICAgIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbnVtVmVydGljZXMgKz0gUG9seWdvbkdlb21ldHJ5TGlicmFyeS5zdWJkaXZpZGVMaW5lQ291bnQoXG4gICAgICAgICAgcG9zaXRpb25zW2ldLFxuICAgICAgICAgIHBvc2l0aW9uc1soaSArIDEpICUgbGVuZ3RoXSxcbiAgICAgICAgICBtaW5EaXN0YW5jZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG51bVZlcnRpY2VzICs9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc3ViZGl2aWRlUmh1bWJMaW5lQ291bnQoXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHBvc2l0aW9uc1tpXSxcbiAgICAgICAgICBwb3NpdGlvbnNbKGkgKyAxKSAlIGxlbmd0aF0sXG4gICAgICAgICAgbWluRGlzdGFuY2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdWJkaXZpZGVkUG9zaXRpb25zID0gbmV3IEZsb2F0NjRBcnJheShudW1WZXJ0aWNlcyAqIDMgKiAyKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvcm5lcnNbaV0gPSBpbmRleCAvIDM7XG4gICAgICB2YXIgdGVtcFBvc2l0aW9ucztcbiAgICAgIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDKSB7XG4gICAgICAgIHRlbXBQb3NpdGlvbnMgPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnN1YmRpdmlkZUxpbmUoXG4gICAgICAgICAgcG9zaXRpb25zW2ldLFxuICAgICAgICAgIHBvc2l0aW9uc1soaSArIDEpICUgbGVuZ3RoXSxcbiAgICAgICAgICBtaW5EaXN0YW5jZSxcbiAgICAgICAgICBjcmVhdGVHZW9tZXRyeUZyb21Qb3NpdGlvbnNTdWJkaXZpZGVkXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGFyY1R5cGUgPT09IEFyY1R5cGUuUkhVTUIpIHtcbiAgICAgICAgdGVtcFBvc2l0aW9ucyA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc3ViZGl2aWRlUmh1bWJMaW5lKFxuICAgICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgICBwb3NpdGlvbnNbaV0sXG4gICAgICAgICAgcG9zaXRpb25zWyhpICsgMSkgJSBsZW5ndGhdLFxuICAgICAgICAgIG1pbkRpc3RhbmNlLFxuICAgICAgICAgIGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9uc1N1YmRpdmlkZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhciB0ZW1wUG9zaXRpb25zTGVuZ3RoID0gdGVtcFBvc2l0aW9ucy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlbXBQb3NpdGlvbnNMZW5ndGg7ICsraikge1xuICAgICAgICBzdWJkaXZpZGVkUG9zaXRpb25zW2luZGV4KytdID0gdGVtcFBvc2l0aW9uc1tqXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc3ViZGl2aWRlZFBvc2l0aW9ucyA9IG5ldyBGbG9hdDY0QXJyYXkobGVuZ3RoICogMiAqIDMgKiAyKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvcm5lcnNbaV0gPSBpbmRleCAvIDM7XG4gICAgICB2YXIgcDAgPSBwb3NpdGlvbnNbaV07XG4gICAgICB2YXIgcDEgPSBwb3NpdGlvbnNbKGkgKyAxKSAlIGxlbmd0aF07XG5cbiAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnNbaW5kZXgrK10gPSBwMC54O1xuICAgICAgc3ViZGl2aWRlZFBvc2l0aW9uc1tpbmRleCsrXSA9IHAwLnk7XG4gICAgICBzdWJkaXZpZGVkUG9zaXRpb25zW2luZGV4KytdID0gcDAuejtcbiAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnNbaW5kZXgrK10gPSBwMS54O1xuICAgICAgc3ViZGl2aWRlZFBvc2l0aW9uc1tpbmRleCsrXSA9IHAxLnk7XG4gICAgICBzdWJkaXZpZGVkUG9zaXRpb25zW2luZGV4KytdID0gcDEuejtcbiAgICB9XG4gIH1cblxuICBsZW5ndGggPSBzdWJkaXZpZGVkUG9zaXRpb25zLmxlbmd0aCAvICgzICogMik7XG4gIHZhciBjb3JuZXJzTGVuZ3RoID0gY29ybmVycy5sZW5ndGg7XG5cbiAgdmFyIGluZGljZXNTaXplID0gKGxlbmd0aCAqIDIgKyBjb3JuZXJzTGVuZ3RoKSAqIDI7XG4gIHZhciBpbmRpY2VzID0gSW5kZXhEYXRhdHlwZS5jcmVhdGVUeXBlZEFycmF5KFxuICAgIGxlbmd0aCArIGNvcm5lcnNMZW5ndGgsXG4gICAgaW5kaWNlc1NpemVcbiAgKTtcblxuICBpbmRleCA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGluZGljZXNbaW5kZXgrK10gPSBpO1xuICAgIGluZGljZXNbaW5kZXgrK10gPSAoaSArIDEpICUgbGVuZ3RoO1xuICAgIGluZGljZXNbaW5kZXgrK10gPSBpICsgbGVuZ3RoO1xuICAgIGluZGljZXNbaW5kZXgrK10gPSAoKGkgKyAxKSAlIGxlbmd0aCkgKyBsZW5ndGg7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgY29ybmVyc0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNvcm5lciA9IGNvcm5lcnNbaV07XG4gICAgaW5kaWNlc1tpbmRleCsrXSA9IGNvcm5lcjtcbiAgICBpbmRpY2VzW2luZGV4KytdID0gY29ybmVyICsgbGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBHZW9tZXRyeUluc3RhbmNlKHtcbiAgICBnZW9tZXRyeTogbmV3IEdlb21ldHJ5KHtcbiAgICAgIGF0dHJpYnV0ZXM6IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZXMoe1xuICAgICAgICBwb3NpdGlvbjogbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRE9VQkxFLFxuICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICAgICAgdmFsdWVzOiBzdWJkaXZpZGVkUG9zaXRpb25zLFxuICAgICAgICB9KSxcbiAgICAgIH0pLFxuICAgICAgaW5kaWNlczogaW5kaWNlcyxcbiAgICAgIHByaW1pdGl2ZVR5cGU6IFByaW1pdGl2ZVR5cGUuTElORVMsXG4gICAgfSksXG4gIH0pO1xufVxuXG4vKipcbiAqIEEgZGVzY3JpcHRpb24gb2YgdGhlIG91dGxpbmUgb2YgYSBwb2x5Z29uIG9uIHRoZSBlbGxpcHNvaWQuIFRoZSBwb2x5Z29uIGlzIGRlZmluZWQgYnkgYSBwb2x5Z29uIGhpZXJhcmNoeS5cbiAqXG4gKiBAYWxpYXMgUG9seWdvbk91dGxpbmVHZW9tZXRyeVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtQb2x5Z29uSGllcmFyY2h5fSBvcHRpb25zLnBvbHlnb25IaWVyYXJjaHkgQSBwb2x5Z29uIGhpZXJhcmNoeSB0aGF0IGNhbiBpbmNsdWRlIGhvbGVzLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmhlaWdodD0wLjBdIFRoZSBkaXN0YW5jZSBpbiBtZXRlcnMgYmV0d2VlbiB0aGUgcG9seWdvbiBhbmQgdGhlIGVsbGlwc29pZCBzdXJmYWNlLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmV4dHJ1ZGVkSGVpZ2h0XSBUaGUgZGlzdGFuY2UgaW4gbWV0ZXJzIGJldHdlZW4gdGhlIHBvbHlnb24ncyBleHRydWRlZCBmYWNlIGFuZCB0aGUgZWxsaXBzb2lkIHN1cmZhY2UuXG4gKiBAcGFyYW0ge1ZlcnRleEZvcm1hdH0gW29wdGlvbnMudmVydGV4Rm9ybWF0PVZlcnRleEZvcm1hdC5ERUZBVUxUXSBUaGUgdmVydGV4IGF0dHJpYnV0ZXMgdG8gYmUgY29tcHV0ZWQuXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gW29wdGlvbnMuZWxsaXBzb2lkPUVsbGlwc29pZC5XR1M4NF0gVGhlIGVsbGlwc29pZCB0byBiZSB1c2VkIGFzIGEgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmdyYW51bGFyaXR5PUNlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFXSBUaGUgZGlzdGFuY2UsIGluIHJhZGlhbnMsIGJldHdlZW4gZWFjaCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlLiBEZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgcG9zaXRpb25zIGluIHRoZSBidWZmZXIuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnBlclBvc2l0aW9uSGVpZ2h0PWZhbHNlXSBVc2UgdGhlIGhlaWdodCBvZiBvcHRpb25zLnBvc2l0aW9ucyBmb3IgZWFjaCBwb3NpdGlvbiBpbnN0ZWFkIG9mIHVzaW5nIG9wdGlvbnMuaGVpZ2h0IHRvIGRldGVybWluZSB0aGUgaGVpZ2h0LlxuICogQHBhcmFtIHtBcmNUeXBlfSBbb3B0aW9ucy5hcmNUeXBlPUFyY1R5cGUuR0VPREVTSUNdIFRoZSB0eXBlIG9mIHBhdGggdGhlIG91dGxpbmUgbXVzdCBmb2xsb3cuIFZhbGlkIG9wdGlvbnMgYXJlIHtAbGluayBBcmNUeXBlLkdFT0RFU0lDfSBhbmQge0BsaW5rIEFyY1R5cGUuUkhVTUJ9LlxuICpcbiAqIEBzZWUgUG9seWdvbk91dGxpbmVHZW9tZXRyeSNjcmVhdGVHZW9tZXRyeVxuICogQHNlZSBQb2x5Z29uT3V0bGluZUdlb21ldHJ5I2Zyb21Qb3NpdGlvbnNcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gMS4gY3JlYXRlIGEgcG9seWdvbiBvdXRsaW5lIGZyb20gcG9pbnRzXG4gKiB2YXIgcG9seWdvbiA9IG5ldyBDZXNpdW0uUG9seWdvbk91dGxpbmVHZW9tZXRyeSh7XG4gKiAgIHBvbHlnb25IaWVyYXJjaHkgOiBuZXcgQ2VzaXVtLlBvbHlnb25IaWVyYXJjaHkoXG4gKiAgICAgQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXNBcnJheShbXG4gKiAgICAgICAtNzIuMCwgNDAuMCxcbiAqICAgICAgIC03MC4wLCAzNS4wLFxuICogICAgICAgLTc1LjAsIDMwLjAsXG4gKiAgICAgICAtNzAuMCwgMzAuMCxcbiAqICAgICAgIC02OC4wLCA0MC4wXG4gKiAgICAgXSlcbiAqICAgKVxuICogfSk7XG4gKiB2YXIgZ2VvbWV0cnkgPSBDZXNpdW0uUG9seWdvbk91dGxpbmVHZW9tZXRyeS5jcmVhdGVHZW9tZXRyeShwb2x5Z29uKTtcbiAqXG4gKiAvLyAyLiBjcmVhdGUgYSBuZXN0ZWQgcG9seWdvbiB3aXRoIGhvbGVzIG91dGxpbmVcbiAqIHZhciBwb2x5Z29uV2l0aEhvbGUgPSBuZXcgQ2VzaXVtLlBvbHlnb25PdXRsaW5lR2VvbWV0cnkoe1xuICogICBwb2x5Z29uSGllcmFyY2h5IDogbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KFxuICogICAgIENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgICAgLTEwOS4wLCAzMC4wLFxuICogICAgICAgLTk1LjAsIDMwLjAsXG4gKiAgICAgICAtOTUuMCwgNDAuMCxcbiAqICAgICAgIC0xMDkuMCwgNDAuMFxuICogICAgIF0pLFxuICogICAgIFtuZXcgQ2VzaXVtLlBvbHlnb25IaWVyYXJjaHkoXG4gKiAgICAgICBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAgICAgLTEwNy4wLCAzMS4wLFxuICogICAgICAgICAtMTA3LjAsIDM5LjAsXG4gKiAgICAgICAgIC05Ny4wLCAzOS4wLFxuICogICAgICAgICAtOTcuMCwgMzEuMFxuICogICAgICAgXSksXG4gKiAgICAgICBbbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KFxuICogICAgICAgICBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAgICAgICAtMTA1LjAsIDMzLjAsXG4gKiAgICAgICAgICAgLTk5LjAsIDMzLjAsXG4gKiAgICAgICAgICAgLTk5LjAsIDM3LjAsXG4gKiAgICAgICAgICAgLTEwNS4wLCAzNy4wXG4gKiAgICAgICAgIF0pLFxuICogICAgICAgICBbbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KFxuICogICAgICAgICAgIENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgICAgICAgICAgLTEwMy4wLCAzNC4wLFxuICogICAgICAgICAgICAgLTEwMS4wLCAzNC4wLFxuICogICAgICAgICAgICAgLTEwMS4wLCAzNi4wLFxuICogICAgICAgICAgICAgLTEwMy4wLCAzNi4wXG4gKiAgICAgICAgICAgXSlcbiAqICAgICAgICAgKV1cbiAqICAgICAgICldXG4gKiAgICAgKV1cbiAqICAgKVxuICogfSk7XG4gKiB2YXIgZ2VvbWV0cnkgPSBDZXNpdW0uUG9seWdvbk91dGxpbmVHZW9tZXRyeS5jcmVhdGVHZW9tZXRyeShwb2x5Z29uV2l0aEhvbGUpO1xuICpcbiAqIC8vIDMuIGNyZWF0ZSBleHRydWRlZCBwb2x5Z29uIG91dGxpbmVcbiAqIHZhciBleHRydWRlZFBvbHlnb24gPSBuZXcgQ2VzaXVtLlBvbHlnb25PdXRsaW5lR2VvbWV0cnkoe1xuICogICBwb2x5Z29uSGllcmFyY2h5IDogbmV3IENlc2l1bS5Qb2x5Z29uSGllcmFyY2h5KFxuICogICAgIENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgICAgLTcyLjAsIDQwLjAsXG4gKiAgICAgICAtNzAuMCwgMzUuMCxcbiAqICAgICAgIC03NS4wLCAzMC4wLFxuICogICAgICAgLTcwLjAsIDMwLjAsXG4gKiAgICAgICAtNjguMCwgNDAuMFxuICogICAgIF0pXG4gKiAgICksXG4gKiAgIGV4dHJ1ZGVkSGVpZ2h0OiAzMDAwMDBcbiAqIH0pO1xuICogdmFyIGdlb21ldHJ5ID0gQ2VzaXVtLlBvbHlnb25PdXRsaW5lR2VvbWV0cnkuY3JlYXRlR2VvbWV0cnkoZXh0cnVkZWRQb2x5Z29uKTtcbiAqL1xuZnVuY3Rpb24gUG9seWdvbk91dGxpbmVHZW9tZXRyeShvcHRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zXCIsIG9wdGlvbnMpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5wb2x5Z29uSGllcmFyY2h5XCIsIG9wdGlvbnMucG9seWdvbkhpZXJhcmNoeSk7XG5cbiAgaWYgKG9wdGlvbnMucGVyUG9zaXRpb25IZWlnaHQgJiYgZGVmaW5lZChvcHRpb25zLmhlaWdodCkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIkNhbm5vdCB1c2UgYm90aCBvcHRpb25zLnBlclBvc2l0aW9uSGVpZ2h0IGFuZCBvcHRpb25zLmhlaWdodFwiXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgZGVmaW5lZChvcHRpb25zLmFyY1R5cGUpICYmXG4gICAgb3B0aW9ucy5hcmNUeXBlICE9PSBBcmNUeXBlLkdFT0RFU0lDICYmXG4gICAgb3B0aW9ucy5hcmNUeXBlICE9PSBBcmNUeXBlLlJIVU1CXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiSW52YWxpZCBhcmNUeXBlLiBWYWxpZCBvcHRpb25zIGFyZSBBcmNUeXBlLkdFT0RFU0lDIGFuZCBBcmNUeXBlLlJIVU1CLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgcG9seWdvbkhpZXJhcmNoeSA9IG9wdGlvbnMucG9seWdvbkhpZXJhcmNoeTtcbiAgdmFyIGVsbGlwc29pZCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KTtcbiAgdmFyIGdyYW51bGFyaXR5ID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZ3JhbnVsYXJpdHksXG4gICAgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVcbiAgKTtcbiAgdmFyIHBlclBvc2l0aW9uSGVpZ2h0ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMucGVyUG9zaXRpb25IZWlnaHQsIGZhbHNlKTtcbiAgdmFyIHBlclBvc2l0aW9uSGVpZ2h0RXh0cnVkZSA9XG4gICAgcGVyUG9zaXRpb25IZWlnaHQgJiYgZGVmaW5lZChvcHRpb25zLmV4dHJ1ZGVkSGVpZ2h0KTtcbiAgdmFyIGFyY1R5cGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5hcmNUeXBlLCBBcmNUeXBlLkdFT0RFU0lDKTtcblxuICB2YXIgaGVpZ2h0ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuaGVpZ2h0LCAwLjApO1xuICB2YXIgZXh0cnVkZWRIZWlnaHQgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5leHRydWRlZEhlaWdodCwgaGVpZ2h0KTtcblxuICBpZiAoIXBlclBvc2l0aW9uSGVpZ2h0RXh0cnVkZSkge1xuICAgIHZhciBoID0gTWF0aC5tYXgoaGVpZ2h0LCBleHRydWRlZEhlaWdodCk7XG4gICAgZXh0cnVkZWRIZWlnaHQgPSBNYXRoLm1pbihoZWlnaHQsIGV4dHJ1ZGVkSGVpZ2h0KTtcbiAgICBoZWlnaHQgPSBoO1xuICB9XG5cbiAgdGhpcy5fZWxsaXBzb2lkID0gRWxsaXBzb2lkLmNsb25lKGVsbGlwc29pZCk7XG4gIHRoaXMuX2dyYW51bGFyaXR5ID0gZ3JhbnVsYXJpdHk7XG4gIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgdGhpcy5fZXh0cnVkZWRIZWlnaHQgPSBleHRydWRlZEhlaWdodDtcbiAgdGhpcy5fYXJjVHlwZSA9IGFyY1R5cGU7XG4gIHRoaXMuX3BvbHlnb25IaWVyYXJjaHkgPSBwb2x5Z29uSGllcmFyY2h5O1xuICB0aGlzLl9wZXJQb3NpdGlvbkhlaWdodCA9IHBlclBvc2l0aW9uSGVpZ2h0O1xuICB0aGlzLl9wZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGUgPSBwZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGU7XG4gIHRoaXMuX29mZnNldEF0dHJpYnV0ZSA9IG9wdGlvbnMub2Zmc2V0QXR0cmlidXRlO1xuICB0aGlzLl93b3JrZXJOYW1lID0gXCJjcmVhdGVQb2x5Z29uT3V0bGluZUdlb21ldHJ5XCI7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdXNlZCB0byBwYWNrIHRoZSBvYmplY3QgaW50byBhbiBhcnJheS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRoaXMucGFja2VkTGVuZ3RoID1cbiAgICBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LmNvbXB1dGVIaWVyYXJjaHlQYWNrZWRMZW5ndGgocG9seWdvbkhpZXJhcmNoeSkgK1xuICAgIEVsbGlwc29pZC5wYWNrZWRMZW5ndGggK1xuICAgIDg7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBwcm92aWRlZCBpbnN0YW5jZSBpbnRvIHRoZSBwcm92aWRlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlnb25PdXRsaW5lR2VvbWV0cnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYWNrLlxuICogQHBhcmFtIHtOdW1iZXJbXX0gYXJyYXkgVGhlIGFycmF5IHRvIHBhY2sgaW50by5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRpbmdJbmRleD0wXSBUaGUgaW5kZXggaW50byB0aGUgYXJyYXkgYXQgd2hpY2ggdG8gc3RhcnQgcGFja2luZyB0aGUgZWxlbWVudHMuXG4gKlxuICogQHJldHVybnMge051bWJlcltdfSBUaGUgYXJyYXkgdGhhdCB3YXMgcGFja2VkIGludG9cbiAqL1xuUG9seWdvbk91dGxpbmVHZW9tZXRyeS5wYWNrID0gZnVuY3Rpb24gKHZhbHVlLCBhcnJheSwgc3RhcnRpbmdJbmRleCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwidmFsdWVcIiwgdmFsdWUpO1xuICBDaGVjay5kZWZpbmVkKFwiYXJyYXlcIiwgYXJyYXkpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBzdGFydGluZ0luZGV4ID0gZGVmYXVsdFZhbHVlKHN0YXJ0aW5nSW5kZXgsIDApO1xuXG4gIHN0YXJ0aW5nSW5kZXggPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnBhY2tQb2x5Z29uSGllcmFyY2h5KFxuICAgIHZhbHVlLl9wb2x5Z29uSGllcmFyY2h5LFxuICAgIGFycmF5LFxuICAgIHN0YXJ0aW5nSW5kZXhcbiAgKTtcblxuICBFbGxpcHNvaWQucGFjayh2YWx1ZS5fZWxsaXBzb2lkLCBhcnJheSwgc3RhcnRpbmdJbmRleCk7XG4gIHN0YXJ0aW5nSW5kZXggKz0gRWxsaXBzb2lkLnBhY2tlZExlbmd0aDtcblxuICBhcnJheVtzdGFydGluZ0luZGV4KytdID0gdmFsdWUuX2hlaWdodDtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl9leHRydWRlZEhlaWdodDtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl9ncmFudWxhcml0eTtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl9wZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGUgPyAxLjAgOiAwLjA7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fcGVyUG9zaXRpb25IZWlnaHQgPyAxLjAgOiAwLjA7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fYXJjVHlwZTtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IGRlZmF1bHRWYWx1ZSh2YWx1ZS5fb2Zmc2V0QXR0cmlidXRlLCAtMSk7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXhdID0gdmFsdWUucGFja2VkTGVuZ3RoO1xuXG4gIHJldHVybiBhcnJheTtcbn07XG5cbnZhciBzY3JhdGNoRWxsaXBzb2lkID0gRWxsaXBzb2lkLmNsb25lKEVsbGlwc29pZC5VTklUX1NQSEVSRSk7XG52YXIgZHVtbXlPcHRpb25zID0ge1xuICBwb2x5Z29uSGllcmFyY2h5OiB7fSxcbn07XG5cbi8qKlxuICogUmV0cmlldmVzIGFuIGluc3RhbmNlIGZyb20gYSBwYWNrZWQgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJbXX0gYXJyYXkgVGhlIHBhY2tlZCBhcnJheS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRpbmdJbmRleD0wXSBUaGUgc3RhcnRpbmcgaW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gYmUgdW5wYWNrZWQuXG4gKiBAcGFyYW0ge1BvbHlnb25PdXRsaW5lR2VvbWV0cnl9IFtyZXN1bHRdIFRoZSBvYmplY3QgaW50byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge1BvbHlnb25PdXRsaW5lR2VvbWV0cnl9IFRoZSBtb2RpZmllZCByZXN1bHQgcGFyYW1ldGVyIG9yIGEgbmV3IFBvbHlnb25PdXRsaW5lR2VvbWV0cnkgaW5zdGFuY2UgaWYgb25lIHdhcyBub3QgcHJvdmlkZWQuXG4gKi9cblBvbHlnb25PdXRsaW5lR2VvbWV0cnkudW5wYWNrID0gZnVuY3Rpb24gKGFycmF5LCBzdGFydGluZ0luZGV4LCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcImFycmF5XCIsIGFycmF5KTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgc3RhcnRpbmdJbmRleCA9IGRlZmF1bHRWYWx1ZShzdGFydGluZ0luZGV4LCAwKTtcblxuICB2YXIgcG9seWdvbkhpZXJhcmNoeSA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkudW5wYWNrUG9seWdvbkhpZXJhcmNoeShcbiAgICBhcnJheSxcbiAgICBzdGFydGluZ0luZGV4XG4gICk7XG4gIHN0YXJ0aW5nSW5kZXggPSBwb2x5Z29uSGllcmFyY2h5LnN0YXJ0aW5nSW5kZXg7XG4gIGRlbGV0ZSBwb2x5Z29uSGllcmFyY2h5LnN0YXJ0aW5nSW5kZXg7XG5cbiAgdmFyIGVsbGlwc29pZCA9IEVsbGlwc29pZC51bnBhY2soYXJyYXksIHN0YXJ0aW5nSW5kZXgsIHNjcmF0Y2hFbGxpcHNvaWQpO1xuICBzdGFydGluZ0luZGV4ICs9IEVsbGlwc29pZC5wYWNrZWRMZW5ndGg7XG5cbiAgdmFyIGhlaWdodCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBleHRydWRlZEhlaWdodCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBncmFudWxhcml0eSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBwZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGUgPSBhcnJheVtzdGFydGluZ0luZGV4KytdID09PSAxLjA7XG4gIHZhciBwZXJQb3NpdGlvbkhlaWdodCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPT09IDEuMDtcbiAgdmFyIGFyY1R5cGUgPSBhcnJheVtzdGFydGluZ0luZGV4KytdO1xuICB2YXIgb2Zmc2V0QXR0cmlidXRlID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIHBhY2tlZExlbmd0aCA9IGFycmF5W3N0YXJ0aW5nSW5kZXhdO1xuXG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IFBvbHlnb25PdXRsaW5lR2VvbWV0cnkoZHVtbXlPcHRpb25zKTtcbiAgfVxuXG4gIHJlc3VsdC5fcG9seWdvbkhpZXJhcmNoeSA9IHBvbHlnb25IaWVyYXJjaHk7XG4gIHJlc3VsdC5fZWxsaXBzb2lkID0gRWxsaXBzb2lkLmNsb25lKGVsbGlwc29pZCwgcmVzdWx0Ll9lbGxpcHNvaWQpO1xuICByZXN1bHQuX2hlaWdodCA9IGhlaWdodDtcbiAgcmVzdWx0Ll9leHRydWRlZEhlaWdodCA9IGV4dHJ1ZGVkSGVpZ2h0O1xuICByZXN1bHQuX2dyYW51bGFyaXR5ID0gZ3JhbnVsYXJpdHk7XG4gIHJlc3VsdC5fcGVyUG9zaXRpb25IZWlnaHQgPSBwZXJQb3NpdGlvbkhlaWdodDtcbiAgcmVzdWx0Ll9wZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGUgPSBwZXJQb3NpdGlvbkhlaWdodEV4dHJ1ZGU7XG4gIHJlc3VsdC5fYXJjVHlwZSA9IGFyY1R5cGU7XG4gIHJlc3VsdC5fb2Zmc2V0QXR0cmlidXRlID1cbiAgICBvZmZzZXRBdHRyaWJ1dGUgPT09IC0xID8gdW5kZWZpbmVkIDogb2Zmc2V0QXR0cmlidXRlO1xuICByZXN1bHQucGFja2VkTGVuZ3RoID0gcGFja2VkTGVuZ3RoO1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIEEgZGVzY3JpcHRpb24gb2YgYSBwb2x5Z29uIG91dGxpbmUgZnJvbSBhbiBhcnJheSBvZiBwb3NpdGlvbnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zW119IG9wdGlvbnMucG9zaXRpb25zIEFuIGFycmF5IG9mIHBvc2l0aW9ucyB0aGF0IGRlZmluZWQgdGhlIGNvcm5lciBwb2ludHMgb2YgdGhlIHBvbHlnb24uXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuaGVpZ2h0PTAuMF0gVGhlIGhlaWdodCBvZiB0aGUgcG9seWdvbi5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5leHRydWRlZEhlaWdodF0gVGhlIGhlaWdodCBvZiB0aGUgcG9seWdvbiBleHRydXNpb24uXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gW29wdGlvbnMuZWxsaXBzb2lkPUVsbGlwc29pZC5XR1M4NF0gVGhlIGVsbGlwc29pZCB0byBiZSB1c2VkIGFzIGEgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmdyYW51bGFyaXR5PUNlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFXSBUaGUgZGlzdGFuY2UsIGluIHJhZGlhbnMsIGJldHdlZW4gZWFjaCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlLiBEZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgcG9zaXRpb25zIGluIHRoZSBidWZmZXIuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnBlclBvc2l0aW9uSGVpZ2h0PWZhbHNlXSBVc2UgdGhlIGhlaWdodCBvZiBvcHRpb25zLnBvc2l0aW9ucyBmb3IgZWFjaCBwb3NpdGlvbiBpbnN0ZWFkIG9mIHVzaW5nIG9wdGlvbnMuaGVpZ2h0IHRvIGRldGVybWluZSB0aGUgaGVpZ2h0LlxuICogQHBhcmFtIHtBcmNUeXBlfSBbb3B0aW9ucy5hcmNUeXBlPUFyY1R5cGUuR0VPREVTSUNdIFRoZSB0eXBlIG9mIHBhdGggdGhlIG91dGxpbmUgbXVzdCBmb2xsb3cuIFZhbGlkIG9wdGlvbnMgYXJlIHtAbGluayBMaW5rVHlwZS5HRU9ERVNJQ30gYW5kIHtAbGluayBBcmNUeXBlLlJIVU1CfS5cbiAqIEByZXR1cm5zIHtQb2x5Z29uT3V0bGluZUdlb21ldHJ5fVxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gY3JlYXRlIGEgcG9seWdvbiBmcm9tIHBvaW50c1xuICogdmFyIHBvbHlnb24gPSBDZXNpdW0uUG9seWdvbk91dGxpbmVHZW9tZXRyeS5mcm9tUG9zaXRpb25zKHtcbiAqICAgcG9zaXRpb25zIDogQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXNBcnJheShbXG4gKiAgICAgLTcyLjAsIDQwLjAsXG4gKiAgICAgLTcwLjAsIDM1LjAsXG4gKiAgICAgLTc1LjAsIDMwLjAsXG4gKiAgICAgLTcwLjAsIDMwLjAsXG4gKiAgICAgLTY4LjAsIDQwLjBcbiAqICAgXSlcbiAqIH0pO1xuICogdmFyIGdlb21ldHJ5ID0gQ2VzaXVtLlBvbHlnb25PdXRsaW5lR2VvbWV0cnkuY3JlYXRlR2VvbWV0cnkocG9seWdvbik7XG4gKlxuICogQHNlZSBQb2x5Z29uT3V0bGluZUdlb21ldHJ5I2NyZWF0ZUdlb21ldHJ5XG4gKi9cblBvbHlnb25PdXRsaW5lR2VvbWV0cnkuZnJvbVBvc2l0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcIm9wdGlvbnMucG9zaXRpb25zXCIsIG9wdGlvbnMucG9zaXRpb25zKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIG5ld09wdGlvbnMgPSB7XG4gICAgcG9seWdvbkhpZXJhcmNoeToge1xuICAgICAgcG9zaXRpb25zOiBvcHRpb25zLnBvc2l0aW9ucyxcbiAgICB9LFxuICAgIGhlaWdodDogb3B0aW9ucy5oZWlnaHQsXG4gICAgZXh0cnVkZWRIZWlnaHQ6IG9wdGlvbnMuZXh0cnVkZWRIZWlnaHQsXG4gICAgZWxsaXBzb2lkOiBvcHRpb25zLmVsbGlwc29pZCxcbiAgICBncmFudWxhcml0eTogb3B0aW9ucy5ncmFudWxhcml0eSxcbiAgICBwZXJQb3NpdGlvbkhlaWdodDogb3B0aW9ucy5wZXJQb3NpdGlvbkhlaWdodCxcbiAgICBhcmNUeXBlOiBvcHRpb25zLmFyY1R5cGUsXG4gICAgb2Zmc2V0QXR0cmlidXRlOiBvcHRpb25zLm9mZnNldEF0dHJpYnV0ZSxcbiAgfTtcbiAgcmV0dXJuIG5ldyBQb2x5Z29uT3V0bGluZUdlb21ldHJ5KG5ld09wdGlvbnMpO1xufTtcblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZ2VvbWV0cmljIHJlcHJlc2VudGF0aW9uIG9mIGEgcG9seWdvbiBvdXRsaW5lLCBpbmNsdWRpbmcgaXRzIHZlcnRpY2VzLCBpbmRpY2VzLCBhbmQgYSBib3VuZGluZyBzcGhlcmUuXG4gKlxuICogQHBhcmFtIHtQb2x5Z29uT3V0bGluZUdlb21ldHJ5fSBwb2x5Z29uR2VvbWV0cnkgQSBkZXNjcmlwdGlvbiBvZiB0aGUgcG9seWdvbiBvdXRsaW5lLlxuICogQHJldHVybnMge0dlb21ldHJ5fHVuZGVmaW5lZH0gVGhlIGNvbXB1dGVkIHZlcnRpY2VzIGFuZCBpbmRpY2VzLlxuICovXG5Qb2x5Z29uT3V0bGluZUdlb21ldHJ5LmNyZWF0ZUdlb21ldHJ5ID0gZnVuY3Rpb24gKHBvbHlnb25HZW9tZXRyeSkge1xuICB2YXIgZWxsaXBzb2lkID0gcG9seWdvbkdlb21ldHJ5Ll9lbGxpcHNvaWQ7XG4gIHZhciBncmFudWxhcml0eSA9IHBvbHlnb25HZW9tZXRyeS5fZ3JhbnVsYXJpdHk7XG4gIHZhciBwb2x5Z29uSGllcmFyY2h5ID0gcG9seWdvbkdlb21ldHJ5Ll9wb2x5Z29uSGllcmFyY2h5O1xuICB2YXIgcGVyUG9zaXRpb25IZWlnaHQgPSBwb2x5Z29uR2VvbWV0cnkuX3BlclBvc2l0aW9uSGVpZ2h0O1xuICB2YXIgYXJjVHlwZSA9IHBvbHlnb25HZW9tZXRyeS5fYXJjVHlwZTtcblxuICB2YXIgcG9seWdvbnMgPSBQb2x5Z29uR2VvbWV0cnlMaWJyYXJ5LnBvbHlnb25PdXRsaW5lc0Zyb21IaWVyYXJjaHkoXG4gICAgcG9seWdvbkhpZXJhcmNoeSxcbiAgICAhcGVyUG9zaXRpb25IZWlnaHQsXG4gICAgZWxsaXBzb2lkXG4gICk7XG5cbiAgaWYgKHBvbHlnb25zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgZ2VvbWV0cnlJbnN0YW5jZTtcbiAgdmFyIGdlb21ldHJpZXMgPSBbXTtcbiAgdmFyIG1pbkRpc3RhbmNlID0gQ2VzaXVtTWF0aC5jaG9yZExlbmd0aChcbiAgICBncmFudWxhcml0eSxcbiAgICBlbGxpcHNvaWQubWF4aW11bVJhZGl1c1xuICApO1xuXG4gIHZhciBoZWlnaHQgPSBwb2x5Z29uR2VvbWV0cnkuX2hlaWdodDtcbiAgdmFyIGV4dHJ1ZGVkSGVpZ2h0ID0gcG9seWdvbkdlb21ldHJ5Ll9leHRydWRlZEhlaWdodDtcbiAgdmFyIGV4dHJ1ZGUgPVxuICAgIHBvbHlnb25HZW9tZXRyeS5fcGVyUG9zaXRpb25IZWlnaHRFeHRydWRlIHx8XG4gICAgIUNlc2l1bU1hdGguZXF1YWxzRXBzaWxvbihoZWlnaHQsIGV4dHJ1ZGVkSGVpZ2h0LCAwLCBDZXNpdW1NYXRoLkVQU0lMT04yKTtcbiAgdmFyIG9mZnNldFZhbHVlO1xuICB2YXIgaTtcbiAgaWYgKGV4dHJ1ZGUpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgcG9seWdvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGdlb21ldHJ5SW5zdGFuY2UgPSBjcmVhdGVHZW9tZXRyeUZyb21Qb3NpdGlvbnNFeHRydWRlZChcbiAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICBwb2x5Z29uc1tpXSxcbiAgICAgICAgbWluRGlzdGFuY2UsXG4gICAgICAgIHBlclBvc2l0aW9uSGVpZ2h0LFxuICAgICAgICBhcmNUeXBlXG4gICAgICApO1xuICAgICAgZ2VvbWV0cnlJbnN0YW5jZS5nZW9tZXRyeSA9IFBvbHlnb25HZW9tZXRyeUxpYnJhcnkuc2NhbGVUb0dlb2RldGljSGVpZ2h0RXh0cnVkZWQoXG4gICAgICAgIGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnksXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgZXh0cnVkZWRIZWlnaHQsXG4gICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgcGVyUG9zaXRpb25IZWlnaHRcbiAgICAgICk7XG4gICAgICBpZiAoZGVmaW5lZChwb2x5Z29uR2VvbWV0cnkuX29mZnNldEF0dHJpYnV0ZSkpIHtcbiAgICAgICAgdmFyIHNpemUgPVxuICAgICAgICAgIGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXMubGVuZ3RoIC8gMztcbiAgICAgICAgdmFyIG9mZnNldEF0dHJpYnV0ZSA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xuICAgICAgICBpZiAocG9seWdvbkdlb21ldHJ5Ll9vZmZzZXRBdHRyaWJ1dGUgPT09IEdlb21ldHJ5T2Zmc2V0QXR0cmlidXRlLlRPUCkge1xuICAgICAgICAgIG9mZnNldEF0dHJpYnV0ZSA9IGFycmF5RmlsbChvZmZzZXRBdHRyaWJ1dGUsIDEsIDAsIHNpemUgLyAyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvZmZzZXRWYWx1ZSA9XG4gICAgICAgICAgICBwb2x5Z29uR2VvbWV0cnkuX29mZnNldEF0dHJpYnV0ZSA9PT0gR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUuTk9ORVxuICAgICAgICAgICAgICA/IDBcbiAgICAgICAgICAgICAgOiAxO1xuICAgICAgICAgIG9mZnNldEF0dHJpYnV0ZSA9IGFycmF5RmlsbChvZmZzZXRBdHRyaWJ1dGUsIG9mZnNldFZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnkuYXR0cmlidXRlcy5hcHBseU9mZnNldCA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDEsXG4gICAgICAgICAgICB2YWx1ZXM6IG9mZnNldEF0dHJpYnV0ZSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBnZW9tZXRyaWVzLnB1c2goZ2VvbWV0cnlJbnN0YW5jZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAoaSA9IDA7IGkgPCBwb2x5Z29ucy5sZW5ndGg7IGkrKykge1xuICAgICAgZ2VvbWV0cnlJbnN0YW5jZSA9IGNyZWF0ZUdlb21ldHJ5RnJvbVBvc2l0aW9ucyhcbiAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICBwb2x5Z29uc1tpXSxcbiAgICAgICAgbWluRGlzdGFuY2UsXG4gICAgICAgIHBlclBvc2l0aW9uSGVpZ2h0LFxuICAgICAgICBhcmNUeXBlXG4gICAgICApO1xuICAgICAgZ2VvbWV0cnlJbnN0YW5jZS5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlcyA9IFBvbHlnb25QaXBlbGluZS5zY2FsZVRvR2VvZGV0aWNIZWlnaHQoXG4gICAgICAgIGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXMsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAhcGVyUG9zaXRpb25IZWlnaHRcbiAgICAgICk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHBvbHlnb25HZW9tZXRyeS5fb2Zmc2V0QXR0cmlidXRlKSkge1xuICAgICAgICB2YXIgbGVuZ3RoID1cbiAgICAgICAgICBnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGFwcGx5T2Zmc2V0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoIC8gMyk7XG4gICAgICAgIG9mZnNldFZhbHVlID1cbiAgICAgICAgICBwb2x5Z29uR2VvbWV0cnkuX29mZnNldEF0dHJpYnV0ZSA9PT0gR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUuTk9ORVxuICAgICAgICAgICAgPyAwXG4gICAgICAgICAgICA6IDE7XG4gICAgICAgIGFycmF5RmlsbChhcHBseU9mZnNldCwgb2Zmc2V0VmFsdWUpO1xuICAgICAgICBnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5LmF0dHJpYnV0ZXMuYXBwbHlPZmZzZXQgPSBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAxLFxuICAgICAgICAgICAgdmFsdWVzOiBhcHBseU9mZnNldCxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGdlb21ldHJpZXMucHVzaChnZW9tZXRyeUluc3RhbmNlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgZ2VvbWV0cnkgPSBHZW9tZXRyeVBpcGVsaW5lLmNvbWJpbmVJbnN0YW5jZXMoZ2VvbWV0cmllcylbMF07XG4gIHZhciBib3VuZGluZ1NwaGVyZSA9IEJvdW5kaW5nU3BoZXJlLmZyb21WZXJ0aWNlcyhcbiAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlc1xuICApO1xuXG4gIHJldHVybiBuZXcgR2VvbWV0cnkoe1xuICAgIGF0dHJpYnV0ZXM6IGdlb21ldHJ5LmF0dHJpYnV0ZXMsXG4gICAgaW5kaWNlczogZ2VvbWV0cnkuaW5kaWNlcyxcbiAgICBwcmltaXRpdmVUeXBlOiBnZW9tZXRyeS5wcmltaXRpdmVUeXBlLFxuICAgIGJvdW5kaW5nU3BoZXJlOiBib3VuZGluZ1NwaGVyZSxcbiAgICBvZmZzZXRBdHRyaWJ1dGU6IHBvbHlnb25HZW9tZXRyeS5fb2Zmc2V0QXR0cmlidXRlLFxuICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBQb2x5Z29uT3V0bGluZUdlb21ldHJ5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///29895\n')},78284:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ThirdParty_earcut_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3733);\n/* harmony import */ var _Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Cartographic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(51688);\n/* harmony import */ var _Check_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66553);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84828);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82982);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50491);\n/* harmony import */ var _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8398);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13616);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(99417);\n/* harmony import */ var _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(97264);\n/* harmony import */ var _WindingOrder_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(32441);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar scaleToGeodeticHeightN = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scaleToGeodeticHeightP = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n/**\n * @private\n */\nvar PolygonPipeline = {};\n\n/**\n * @exception {DeveloperError} At least three positions are required.\n */\nPolygonPipeline.computeArea2D = function (positions) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].defined */ .Z.defined("positions", positions);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals(\n    "positions.length",\n    positions.length,\n    3\n  );\n  //>>includeEnd(\'debug\');\n\n  var length = positions.length;\n  var area = 0.0;\n\n  for (var i0 = length - 1, i1 = 0; i1 < length; i0 = i1++) {\n    var v0 = positions[i0];\n    var v1 = positions[i1];\n\n    area += v0.x * v1.y - v1.x * v0.y;\n  }\n\n  return area * 0.5;\n};\n\n/**\n * @returns {WindingOrder} The winding order.\n *\n * @exception {DeveloperError} At least three positions are required.\n */\nPolygonPipeline.computeWindingOrder2D = function (positions) {\n  var area = PolygonPipeline.computeArea2D(positions);\n  return area > 0.0 ? _WindingOrder_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].COUNTER_CLOCKWISE */ .Z.COUNTER_CLOCKWISE : _WindingOrder_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE;\n};\n\n/**\n * Triangulate a polygon.\n *\n * @param {Cartesian2[]} positions Cartesian2 array containing the vertices of the polygon\n * @param {Number[]} [holes] An array of the staring indices of the holes.\n * @returns {Number[]} Index array representing triangles that fill the polygon\n */\nPolygonPipeline.triangulate = function (positions, holes) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].defined */ .Z.defined("positions", positions);\n  //>>includeEnd(\'debug\');\n\n  var flattenedPositions = _Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].packArray */ .Z.packArray(positions);\n  return (0,_ThirdParty_earcut_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(flattenedPositions, holes, 2);\n};\n\nvar subdivisionV0Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar subdivisionV1Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar subdivisionV2Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar subdivisionS0Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar subdivisionS1Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar subdivisionS2Scratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar subdivisionMidScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n/**\n * Subdivides positions and raises points to the surface of the ellipsoid.\n *\n * @param {Ellipsoid} ellipsoid The ellipsoid the polygon in on.\n * @param {Cartesian3[]} positions An array of {@link Cartesian3} positions of the polygon.\n * @param {Number[]} indices An array of indices that determines the triangles in the polygon.\n * @param {Number} [granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n *\n * @exception {DeveloperError} At least three indices are required.\n * @exception {DeveloperError} The number of indices must be divisable by three.\n * @exception {DeveloperError} Granularity must be greater than zero.\n */\nPolygonPipeline.computeSubdivision = function (\n  ellipsoid,\n  positions,\n  indices,\n  granularity\n) {\n  granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(granularity, _Math_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.object */ .Z.typeOf.object("ellipsoid", ellipsoid);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].defined */ .Z.defined("positions", positions);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].defined */ .Z.defined("indices", indices);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("indices.length", indices.length, 3);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number.equals */ .Z.typeOf.number.equals("indices.length % 3", "0", indices.length % 3, 0);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number.greaterThan */ .Z.typeOf.number.greaterThan("granularity", granularity, 0.0);\n  //>>includeEnd(\'debug\');\n\n  // triangles that need (or might need) to be subdivided.\n  var triangles = indices.slice(0);\n\n  // New positions due to edge splits are appended to the positions list.\n  var i;\n  var length = positions.length;\n  var subdividedPositions = new Array(length * 3);\n  var q = 0;\n  for (i = 0; i < length; i++) {\n    var item = positions[i];\n    subdividedPositions[q++] = item.x;\n    subdividedPositions[q++] = item.y;\n    subdividedPositions[q++] = item.z;\n  }\n\n  var subdividedIndices = [];\n\n  // Used to make sure shared edges are not split more than once.\n  var edges = {};\n\n  var radius = ellipsoid.maximumRadius;\n  var minDistance = _Math_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].chordLength */ .Z.chordLength(granularity, radius);\n  var minDistanceSqrd = minDistance * minDistance;\n\n  while (triangles.length > 0) {\n    var i2 = triangles.pop();\n    var i1 = triangles.pop();\n    var i0 = triangles.pop();\n\n    var v0 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(\n      subdividedPositions,\n      i0 * 3,\n      subdivisionV0Scratch\n    );\n    var v1 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(\n      subdividedPositions,\n      i1 * 3,\n      subdivisionV1Scratch\n    );\n    var v2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(\n      subdividedPositions,\n      i2 * 3,\n      subdivisionV2Scratch\n    );\n\n    var s0 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(v0, subdivisionS0Scratch),\n      radius,\n      subdivisionS0Scratch\n    );\n    var s1 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(v1, subdivisionS1Scratch),\n      radius,\n      subdivisionS1Scratch\n    );\n    var s2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(v2, subdivisionS2Scratch),\n      radius,\n      subdivisionS2Scratch\n    );\n\n    var g0 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(s0, s1, subdivisionMidScratch)\n    );\n    var g1 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(s1, s2, subdivisionMidScratch)\n    );\n    var g2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(s2, s0, subdivisionMidScratch)\n    );\n\n    var max = Math.max(g0, g1, g2);\n    var edge;\n    var mid;\n\n    // if the max length squared of a triangle edge is greater than the chord length of squared\n    // of the granularity, subdivide the triangle\n    if (max > minDistanceSqrd) {\n      if (g0 === max) {\n        edge = Math.min(i0, i1) + " " + Math.max(i0, i1);\n\n        i = edges[edge];\n        if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(i)) {\n          mid = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(v0, v1, subdivisionMidScratch);\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(mid, 0.5, mid);\n          subdividedPositions.push(mid.x, mid.y, mid.z);\n          i = subdividedPositions.length / 3 - 1;\n          edges[edge] = i;\n        }\n\n        triangles.push(i0, i, i2);\n        triangles.push(i, i1, i2);\n      } else if (g1 === max) {\n        edge = Math.min(i1, i2) + " " + Math.max(i1, i2);\n\n        i = edges[edge];\n        if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(i)) {\n          mid = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(v1, v2, subdivisionMidScratch);\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(mid, 0.5, mid);\n          subdividedPositions.push(mid.x, mid.y, mid.z);\n          i = subdividedPositions.length / 3 - 1;\n          edges[edge] = i;\n        }\n\n        triangles.push(i1, i, i0);\n        triangles.push(i, i2, i0);\n      } else if (g2 === max) {\n        edge = Math.min(i2, i0) + " " + Math.max(i2, i0);\n\n        i = edges[edge];\n        if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(i)) {\n          mid = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(v2, v0, subdivisionMidScratch);\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(mid, 0.5, mid);\n          subdividedPositions.push(mid.x, mid.y, mid.z);\n          i = subdividedPositions.length / 3 - 1;\n          edges[edge] = i;\n        }\n\n        triangles.push(i2, i, i1);\n        triangles.push(i, i0, i1);\n      }\n    } else {\n      subdividedIndices.push(i0);\n      subdividedIndices.push(i1);\n      subdividedIndices.push(i2);\n    }\n  }\n\n  return new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n    attributes: {\n      position: new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n        componentsPerAttribute: 3,\n        values: subdividedPositions,\n      }),\n    },\n    indices: subdividedIndices,\n    primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n  });\n};\n\nvar subdivisionC0Scratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar subdivisionC1Scratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar subdivisionC2Scratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar subdivisionCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n/**\n * Subdivides positions on rhumb lines and raises points to the surface of the ellipsoid.\n *\n * @param {Ellipsoid} ellipsoid The ellipsoid the polygon in on.\n * @param {Cartesian3[]} positions An array of {@link Cartesian3} positions of the polygon.\n * @param {Number[]} indices An array of indices that determines the triangles in the polygon.\n * @param {Number} [granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n *\n * @exception {DeveloperError} At least three indices are required.\n * @exception {DeveloperError} The number of indices must be divisable by three.\n * @exception {DeveloperError} Granularity must be greater than zero.\n */\nPolygonPipeline.computeRhumbLineSubdivision = function (\n  ellipsoid,\n  positions,\n  indices,\n  granularity\n) {\n  granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(granularity, _Math_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.object */ .Z.typeOf.object("ellipsoid", ellipsoid);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].defined */ .Z.defined("positions", positions);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].defined */ .Z.defined("indices", indices);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("indices.length", indices.length, 3);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number.equals */ .Z.typeOf.number.equals("indices.length % 3", "0", indices.length % 3, 0);\n  _Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number.greaterThan */ .Z.typeOf.number.greaterThan("granularity", granularity, 0.0);\n  //>>includeEnd(\'debug\');\n\n  // triangles that need (or might need) to be subdivided.\n  var triangles = indices.slice(0);\n\n  // New positions due to edge splits are appended to the positions list.\n  var i;\n  var length = positions.length;\n  var subdividedPositions = new Array(length * 3);\n  var q = 0;\n  for (i = 0; i < length; i++) {\n    var item = positions[i];\n    subdividedPositions[q++] = item.x;\n    subdividedPositions[q++] = item.y;\n    subdividedPositions[q++] = item.z;\n  }\n\n  var subdividedIndices = [];\n\n  // Used to make sure shared edges are not split more than once.\n  var edges = {};\n\n  var radius = ellipsoid.maximumRadius;\n  var minDistance = _Math_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].chordLength */ .Z.chordLength(granularity, radius);\n\n  var rhumb0 = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(undefined, undefined, ellipsoid);\n  var rhumb1 = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(undefined, undefined, ellipsoid);\n  var rhumb2 = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(undefined, undefined, ellipsoid);\n\n  while (triangles.length > 0) {\n    var i2 = triangles.pop();\n    var i1 = triangles.pop();\n    var i0 = triangles.pop();\n\n    var v0 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(\n      subdividedPositions,\n      i0 * 3,\n      subdivisionV0Scratch\n    );\n    var v1 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(\n      subdividedPositions,\n      i1 * 3,\n      subdivisionV1Scratch\n    );\n    var v2 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(\n      subdividedPositions,\n      i2 * 3,\n      subdivisionV2Scratch\n    );\n\n    var c0 = ellipsoid.cartesianToCartographic(v0, subdivisionC0Scratch);\n    var c1 = ellipsoid.cartesianToCartographic(v1, subdivisionC1Scratch);\n    var c2 = ellipsoid.cartesianToCartographic(v2, subdivisionC2Scratch);\n\n    rhumb0.setEndPoints(c0, c1);\n    var g0 = rhumb0.surfaceDistance;\n    rhumb1.setEndPoints(c1, c2);\n    var g1 = rhumb1.surfaceDistance;\n    rhumb2.setEndPoints(c2, c0);\n    var g2 = rhumb2.surfaceDistance;\n\n    var max = Math.max(g0, g1, g2);\n    var edge;\n    var mid;\n    var midHeight;\n    var midCartesian3;\n\n    // if the max length squared of a triangle edge is greater than granularity, subdivide the triangle\n    if (max > minDistance) {\n      if (g0 === max) {\n        edge = Math.min(i0, i1) + " " + Math.max(i0, i1);\n\n        i = edges[edge];\n        if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(i)) {\n          mid = rhumb0.interpolateUsingFraction(\n            0.5,\n            subdivisionCartographicScratch\n          );\n          midHeight = (c0.height + c1.height) * 0.5;\n          midCartesian3 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromRadians */ .Z.fromRadians(\n            mid.longitude,\n            mid.latitude,\n            midHeight,\n            ellipsoid,\n            subdivisionMidScratch\n          );\n          subdividedPositions.push(\n            midCartesian3.x,\n            midCartesian3.y,\n            midCartesian3.z\n          );\n          i = subdividedPositions.length / 3 - 1;\n          edges[edge] = i;\n        }\n\n        triangles.push(i0, i, i2);\n        triangles.push(i, i1, i2);\n      } else if (g1 === max) {\n        edge = Math.min(i1, i2) + " " + Math.max(i1, i2);\n\n        i = edges[edge];\n        if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(i)) {\n          mid = rhumb1.interpolateUsingFraction(\n            0.5,\n            subdivisionCartographicScratch\n          );\n          midHeight = (c1.height + c2.height) * 0.5;\n          midCartesian3 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromRadians */ .Z.fromRadians(\n            mid.longitude,\n            mid.latitude,\n            midHeight,\n            ellipsoid,\n            subdivisionMidScratch\n          );\n          subdividedPositions.push(\n            midCartesian3.x,\n            midCartesian3.y,\n            midCartesian3.z\n          );\n          i = subdividedPositions.length / 3 - 1;\n          edges[edge] = i;\n        }\n\n        triangles.push(i1, i, i0);\n        triangles.push(i, i2, i0);\n      } else if (g2 === max) {\n        edge = Math.min(i2, i0) + " " + Math.max(i2, i0);\n\n        i = edges[edge];\n        if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(i)) {\n          mid = rhumb2.interpolateUsingFraction(\n            0.5,\n            subdivisionCartographicScratch\n          );\n          midHeight = (c2.height + c0.height) * 0.5;\n          midCartesian3 = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromRadians */ .Z.fromRadians(\n            mid.longitude,\n            mid.latitude,\n            midHeight,\n            ellipsoid,\n            subdivisionMidScratch\n          );\n          subdividedPositions.push(\n            midCartesian3.x,\n            midCartesian3.y,\n            midCartesian3.z\n          );\n          i = subdividedPositions.length / 3 - 1;\n          edges[edge] = i;\n        }\n\n        triangles.push(i2, i, i1);\n        triangles.push(i, i0, i1);\n      }\n    } else {\n      subdividedIndices.push(i0);\n      subdividedIndices.push(i1);\n      subdividedIndices.push(i2);\n    }\n  }\n\n  return new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n    attributes: {\n      position: new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n        componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n        componentsPerAttribute: 3,\n        values: subdividedPositions,\n      }),\n    },\n    indices: subdividedIndices,\n    primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n  });\n};\n\n/**\n * Scales each position of a geometry\'s position attribute to a height, in place.\n *\n * @param {Number[]} positions The array of numbers representing the positions to be scaled\n * @param {Number} [height=0.0] The desired height to add to the positions\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the positions lie.\n * @param {Boolean} [scaleToSurface=true] <code>true</code> if the positions need to be scaled to the surface before the height is added.\n * @returns {Number[]} The input array of positions, scaled to height\n */\nPolygonPipeline.scaleToGeodeticHeight = function (\n  positions,\n  height,\n  ellipsoid,\n  scaleToSurface\n) {\n  ellipsoid = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WGS84 */ .Z.WGS84);\n\n  var n = scaleToGeodeticHeightN;\n  var p = scaleToGeodeticHeightP;\n\n  height = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(height, 0.0);\n  scaleToSurface = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(scaleToSurface, true);\n\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(positions)) {\n    var length = positions.length;\n\n    for (var i = 0; i < length; i += 3) {\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(positions, i, p);\n\n      if (scaleToSurface) {\n        p = ellipsoid.scaleToGeodeticSurface(p, p);\n      }\n\n      if (height !== 0) {\n        n = ellipsoid.geodeticSurfaceNormal(p, n);\n\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(n, height, n);\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(p, n, p);\n      }\n\n      positions[i] = p.x;\n      positions[i + 1] = p.y;\n      positions[i + 2] = p.z;\n    }\n  }\n\n  return positions;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolygonPipeline);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxXQUFXO0FBQ3RCLFdBQVcsU0FBUztBQUNwQixhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFFQUFZLFlBQVksMEVBQWU7O0FBRXJEO0FBQ0E7O0FBRUEsV0FBVyxxRUFBWTtBQUN2QixtQkFBbUIscUVBQVk7O0FBRS9CLE1BQU0saUVBQU87QUFDYjs7QUFFQSxvQkFBb0IsWUFBWTtBQUNoQyxNQUFNLG1GQUFvQjs7QUFFMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsUUFBUSxpR0FBMkI7QUFDbkMsUUFBUSx1RUFBYztBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5REFBZSxlQUFlLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9Qb2x5Z29uUGlwZWxpbmUuanM/MzJjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZWFyY3V0IGZyb20gXCIuLi9UaGlyZFBhcnR5L2VhcmN1dC5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4vQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4vQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENhcnRvZ3JhcGhpYyBmcm9tIFwiLi9DYXJ0b2dyYXBoaWMuanNcIjtcbmltcG9ydCBDaGVjayBmcm9tIFwiLi9DaGVjay5qc1wiO1xuaW1wb3J0IENvbXBvbmVudERhdGF0eXBlIGZyb20gXCIuL0NvbXBvbmVudERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4vZGVmaW5lZC5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZCBmcm9tIFwiLi9FbGxpcHNvaWQuanNcIjtcbmltcG9ydCBFbGxpcHNvaWRSaHVtYkxpbmUgZnJvbSBcIi4vRWxsaXBzb2lkUmh1bWJMaW5lLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnkuanNcIjtcbmltcG9ydCBHZW9tZXRyeUF0dHJpYnV0ZSBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4vTWF0aC5qc1wiO1xuaW1wb3J0IFByaW1pdGl2ZVR5cGUgZnJvbSBcIi4vUHJpbWl0aXZlVHlwZS5qc1wiO1xuaW1wb3J0IFdpbmRpbmdPcmRlciBmcm9tIFwiLi9XaW5kaW5nT3JkZXIuanNcIjtcblxudmFyIHNjYWxlVG9HZW9kZXRpY0hlaWdodE4gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjYWxlVG9HZW9kZXRpY0hlaWdodFAgPSBuZXcgQ2FydGVzaWFuMygpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQb2x5Z29uUGlwZWxpbmUgPSB7fTtcblxuLyoqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gQXQgbGVhc3QgdGhyZWUgcG9zaXRpb25zIGFyZSByZXF1aXJlZC5cbiAqL1xuUG9seWdvblBpcGVsaW5lLmNvbXB1dGVBcmVhMkQgPSBmdW5jdGlvbiAocG9zaXRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLmRlZmluZWQoXCJwb3NpdGlvbnNcIiwgcG9zaXRpb25zKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbk9yRXF1YWxzKFxuICAgIFwicG9zaXRpb25zLmxlbmd0aFwiLFxuICAgIHBvc2l0aW9ucy5sZW5ndGgsXG4gICAgM1xuICApO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgbGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgdmFyIGFyZWEgPSAwLjA7XG5cbiAgZm9yICh2YXIgaTAgPSBsZW5ndGggLSAxLCBpMSA9IDA7IGkxIDwgbGVuZ3RoOyBpMCA9IGkxKyspIHtcbiAgICB2YXIgdjAgPSBwb3NpdGlvbnNbaTBdO1xuICAgIHZhciB2MSA9IHBvc2l0aW9uc1tpMV07XG5cbiAgICBhcmVhICs9IHYwLnggKiB2MS55IC0gdjEueCAqIHYwLnk7XG4gIH1cblxuICByZXR1cm4gYXJlYSAqIDAuNTtcbn07XG5cbi8qKlxuICogQHJldHVybnMge1dpbmRpbmdPcmRlcn0gVGhlIHdpbmRpbmcgb3JkZXIuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEF0IGxlYXN0IHRocmVlIHBvc2l0aW9ucyBhcmUgcmVxdWlyZWQuXG4gKi9cblBvbHlnb25QaXBlbGluZS5jb21wdXRlV2luZGluZ09yZGVyMkQgPSBmdW5jdGlvbiAocG9zaXRpb25zKSB7XG4gIHZhciBhcmVhID0gUG9seWdvblBpcGVsaW5lLmNvbXB1dGVBcmVhMkQocG9zaXRpb25zKTtcbiAgcmV0dXJuIGFyZWEgPiAwLjAgPyBXaW5kaW5nT3JkZXIuQ09VTlRFUl9DTE9DS1dJU0UgOiBXaW5kaW5nT3JkZXIuQ0xPQ0tXSVNFO1xufTtcblxuLyoqXG4gKiBUcmlhbmd1bGF0ZSBhIHBvbHlnb24uXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4yW119IHBvc2l0aW9ucyBDYXJ0ZXNpYW4yIGFycmF5IGNvbnRhaW5pbmcgdGhlIHZlcnRpY2VzIG9mIHRoZSBwb2x5Z29uXG4gKiBAcGFyYW0ge051bWJlcltdfSBbaG9sZXNdIEFuIGFycmF5IG9mIHRoZSBzdGFyaW5nIGluZGljZXMgb2YgdGhlIGhvbGVzLlxuICogQHJldHVybnMge051bWJlcltdfSBJbmRleCBhcnJheSByZXByZXNlbnRpbmcgdHJpYW5nbGVzIHRoYXQgZmlsbCB0aGUgcG9seWdvblxuICovXG5Qb2x5Z29uUGlwZWxpbmUudHJpYW5ndWxhdGUgPSBmdW5jdGlvbiAocG9zaXRpb25zLCBob2xlcykge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay5kZWZpbmVkKFwicG9zaXRpb25zXCIsIHBvc2l0aW9ucyk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBmbGF0dGVuZWRQb3NpdGlvbnMgPSBDYXJ0ZXNpYW4yLnBhY2tBcnJheShwb3NpdGlvbnMpO1xuICByZXR1cm4gZWFyY3V0KGZsYXR0ZW5lZFBvc2l0aW9ucywgaG9sZXMsIDIpO1xufTtcblxudmFyIHN1YmRpdmlzaW9uVjBTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzdWJkaXZpc2lvblYxU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc3ViZGl2aXNpb25WMlNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHN1YmRpdmlzaW9uUzBTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzdWJkaXZpc2lvblMxU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc3ViZGl2aXNpb25TMlNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHN1YmRpdmlzaW9uTWlkU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbi8qKlxuICogU3ViZGl2aWRlcyBwb3NpdGlvbnMgYW5kIHJhaXNlcyBwb2ludHMgdG8gdGhlIHN1cmZhY2Ugb2YgdGhlIGVsbGlwc29pZC5cbiAqXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gZWxsaXBzb2lkIFRoZSBlbGxpcHNvaWQgdGhlIHBvbHlnb24gaW4gb24uXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjNbXX0gcG9zaXRpb25zIEFuIGFycmF5IG9mIHtAbGluayBDYXJ0ZXNpYW4zfSBwb3NpdGlvbnMgb2YgdGhlIHBvbHlnb24uXG4gKiBAcGFyYW0ge051bWJlcltdfSBpbmRpY2VzIEFuIGFycmF5IG9mIGluZGljZXMgdGhhdCBkZXRlcm1pbmVzIHRoZSB0cmlhbmdsZXMgaW4gdGhlIHBvbHlnb24uXG4gKiBAcGFyYW0ge051bWJlcn0gW2dyYW51bGFyaXR5PUNlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFXSBUaGUgZGlzdGFuY2UsIGluIHJhZGlhbnMsIGJldHdlZW4gZWFjaCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlLiBEZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgcG9zaXRpb25zIGluIHRoZSBidWZmZXIuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEF0IGxlYXN0IHRocmVlIGluZGljZXMgYXJlIHJlcXVpcmVkLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoZSBudW1iZXIgb2YgaW5kaWNlcyBtdXN0IGJlIGRpdmlzYWJsZSBieSB0aHJlZS5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBHcmFudWxhcml0eSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLlxuICovXG5Qb2x5Z29uUGlwZWxpbmUuY29tcHV0ZVN1YmRpdmlzaW9uID0gZnVuY3Rpb24gKFxuICBlbGxpcHNvaWQsXG4gIHBvc2l0aW9ucyxcbiAgaW5kaWNlcyxcbiAgZ3JhbnVsYXJpdHlcbikge1xuICBncmFudWxhcml0eSA9IGRlZmF1bHRWYWx1ZShncmFudWxhcml0eSwgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUUpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJlbGxpcHNvaWRcIiwgZWxsaXBzb2lkKTtcbiAgQ2hlY2suZGVmaW5lZChcInBvc2l0aW9uc1wiLCBwb3NpdGlvbnMpO1xuICBDaGVjay5kZWZpbmVkKFwiaW5kaWNlc1wiLCBpbmRpY2VzKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbk9yRXF1YWxzKFwiaW5kaWNlcy5sZW5ndGhcIiwgaW5kaWNlcy5sZW5ndGgsIDMpO1xuICBDaGVjay50eXBlT2YubnVtYmVyLmVxdWFscyhcImluZGljZXMubGVuZ3RoICUgM1wiLCBcIjBcIiwgaW5kaWNlcy5sZW5ndGggJSAzLCAwKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbihcImdyYW51bGFyaXR5XCIsIGdyYW51bGFyaXR5LCAwLjApO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAvLyB0cmlhbmdsZXMgdGhhdCBuZWVkIChvciBtaWdodCBuZWVkKSB0byBiZSBzdWJkaXZpZGVkLlxuICB2YXIgdHJpYW5nbGVzID0gaW5kaWNlcy5zbGljZSgwKTtcblxuICAvLyBOZXcgcG9zaXRpb25zIGR1ZSB0byBlZGdlIHNwbGl0cyBhcmUgYXBwZW5kZWQgdG8gdGhlIHBvc2l0aW9ucyBsaXN0LlxuICB2YXIgaTtcbiAgdmFyIGxlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gIHZhciBzdWJkaXZpZGVkUG9zaXRpb25zID0gbmV3IEFycmF5KGxlbmd0aCAqIDMpO1xuICB2YXIgcSA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gcG9zaXRpb25zW2ldO1xuICAgIHN1YmRpdmlkZWRQb3NpdGlvbnNbcSsrXSA9IGl0ZW0ueDtcbiAgICBzdWJkaXZpZGVkUG9zaXRpb25zW3ErK10gPSBpdGVtLnk7XG4gICAgc3ViZGl2aWRlZFBvc2l0aW9uc1txKytdID0gaXRlbS56O1xuICB9XG5cbiAgdmFyIHN1YmRpdmlkZWRJbmRpY2VzID0gW107XG5cbiAgLy8gVXNlZCB0byBtYWtlIHN1cmUgc2hhcmVkIGVkZ2VzIGFyZSBub3Qgc3BsaXQgbW9yZSB0aGFuIG9uY2UuXG4gIHZhciBlZGdlcyA9IHt9O1xuXG4gIHZhciByYWRpdXMgPSBlbGxpcHNvaWQubWF4aW11bVJhZGl1cztcbiAgdmFyIG1pbkRpc3RhbmNlID0gQ2VzaXVtTWF0aC5jaG9yZExlbmd0aChncmFudWxhcml0eSwgcmFkaXVzKTtcbiAgdmFyIG1pbkRpc3RhbmNlU3FyZCA9IG1pbkRpc3RhbmNlICogbWluRGlzdGFuY2U7XG5cbiAgd2hpbGUgKHRyaWFuZ2xlcy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGkyID0gdHJpYW5nbGVzLnBvcCgpO1xuICAgIHZhciBpMSA9IHRyaWFuZ2xlcy5wb3AoKTtcbiAgICB2YXIgaTAgPSB0cmlhbmdsZXMucG9wKCk7XG5cbiAgICB2YXIgdjAgPSBDYXJ0ZXNpYW4zLmZyb21BcnJheShcbiAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnMsXG4gICAgICBpMCAqIDMsXG4gICAgICBzdWJkaXZpc2lvblYwU2NyYXRjaFxuICAgICk7XG4gICAgdmFyIHYxID0gQ2FydGVzaWFuMy5mcm9tQXJyYXkoXG4gICAgICBzdWJkaXZpZGVkUG9zaXRpb25zLFxuICAgICAgaTEgKiAzLFxuICAgICAgc3ViZGl2aXNpb25WMVNjcmF0Y2hcbiAgICApO1xuICAgIHZhciB2MiA9IENhcnRlc2lhbjMuZnJvbUFycmF5KFxuICAgICAgc3ViZGl2aWRlZFBvc2l0aW9ucyxcbiAgICAgIGkyICogMyxcbiAgICAgIHN1YmRpdmlzaW9uVjJTY3JhdGNoXG4gICAgKTtcblxuICAgIHZhciBzMCA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgIENhcnRlc2lhbjMubm9ybWFsaXplKHYwLCBzdWJkaXZpc2lvblMwU2NyYXRjaCksXG4gICAgICByYWRpdXMsXG4gICAgICBzdWJkaXZpc2lvblMwU2NyYXRjaFxuICAgICk7XG4gICAgdmFyIHMxID0gQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKFxuICAgICAgQ2FydGVzaWFuMy5ub3JtYWxpemUodjEsIHN1YmRpdmlzaW9uUzFTY3JhdGNoKSxcbiAgICAgIHJhZGl1cyxcbiAgICAgIHN1YmRpdmlzaW9uUzFTY3JhdGNoXG4gICAgKTtcbiAgICB2YXIgczIgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgICBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZSh2Miwgc3ViZGl2aXNpb25TMlNjcmF0Y2gpLFxuICAgICAgcmFkaXVzLFxuICAgICAgc3ViZGl2aXNpb25TMlNjcmF0Y2hcbiAgICApO1xuXG4gICAgdmFyIGcwID0gQ2FydGVzaWFuMy5tYWduaXR1ZGVTcXVhcmVkKFxuICAgICAgQ2FydGVzaWFuMy5zdWJ0cmFjdChzMCwgczEsIHN1YmRpdmlzaW9uTWlkU2NyYXRjaClcbiAgICApO1xuICAgIHZhciBnMSA9IENhcnRlc2lhbjMubWFnbml0dWRlU3F1YXJlZChcbiAgICAgIENhcnRlc2lhbjMuc3VidHJhY3QoczEsIHMyLCBzdWJkaXZpc2lvbk1pZFNjcmF0Y2gpXG4gICAgKTtcbiAgICB2YXIgZzIgPSBDYXJ0ZXNpYW4zLm1hZ25pdHVkZVNxdWFyZWQoXG4gICAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHMyLCBzMCwgc3ViZGl2aXNpb25NaWRTY3JhdGNoKVxuICAgICk7XG5cbiAgICB2YXIgbWF4ID0gTWF0aC5tYXgoZzAsIGcxLCBnMik7XG4gICAgdmFyIGVkZ2U7XG4gICAgdmFyIG1pZDtcblxuICAgIC8vIGlmIHRoZSBtYXggbGVuZ3RoIHNxdWFyZWQgb2YgYSB0cmlhbmdsZSBlZGdlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgY2hvcmQgbGVuZ3RoIG9mIHNxdWFyZWRcbiAgICAvLyBvZiB0aGUgZ3JhbnVsYXJpdHksIHN1YmRpdmlkZSB0aGUgdHJpYW5nbGVcbiAgICBpZiAobWF4ID4gbWluRGlzdGFuY2VTcXJkKSB7XG4gICAgICBpZiAoZzAgPT09IG1heCkge1xuICAgICAgICBlZGdlID0gTWF0aC5taW4oaTAsIGkxKSArIFwiIFwiICsgTWF0aC5tYXgoaTAsIGkxKTtcblxuICAgICAgICBpID0gZWRnZXNbZWRnZV07XG4gICAgICAgIGlmICghZGVmaW5lZChpKSkge1xuICAgICAgICAgIG1pZCA9IENhcnRlc2lhbjMuYWRkKHYwLCB2MSwgc3ViZGl2aXNpb25NaWRTY3JhdGNoKTtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIobWlkLCAwLjUsIG1pZCk7XG4gICAgICAgICAgc3ViZGl2aWRlZFBvc2l0aW9ucy5wdXNoKG1pZC54LCBtaWQueSwgbWlkLnopO1xuICAgICAgICAgIGkgPSBzdWJkaXZpZGVkUG9zaXRpb25zLmxlbmd0aCAvIDMgLSAxO1xuICAgICAgICAgIGVkZ2VzW2VkZ2VdID0gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWFuZ2xlcy5wdXNoKGkwLCBpLCBpMik7XG4gICAgICAgIHRyaWFuZ2xlcy5wdXNoKGksIGkxLCBpMik7XG4gICAgICB9IGVsc2UgaWYgKGcxID09PSBtYXgpIHtcbiAgICAgICAgZWRnZSA9IE1hdGgubWluKGkxLCBpMikgKyBcIiBcIiArIE1hdGgubWF4KGkxLCBpMik7XG5cbiAgICAgICAgaSA9IGVkZ2VzW2VkZ2VdO1xuICAgICAgICBpZiAoIWRlZmluZWQoaSkpIHtcbiAgICAgICAgICBtaWQgPSBDYXJ0ZXNpYW4zLmFkZCh2MSwgdjIsIHN1YmRpdmlzaW9uTWlkU2NyYXRjaCk7XG4gICAgICAgICAgQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKG1pZCwgMC41LCBtaWQpO1xuICAgICAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnMucHVzaChtaWQueCwgbWlkLnksIG1pZC56KTtcbiAgICAgICAgICBpID0gc3ViZGl2aWRlZFBvc2l0aW9ucy5sZW5ndGggLyAzIC0gMTtcbiAgICAgICAgICBlZGdlc1tlZGdlXSA9IGk7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlhbmdsZXMucHVzaChpMSwgaSwgaTApO1xuICAgICAgICB0cmlhbmdsZXMucHVzaChpLCBpMiwgaTApO1xuICAgICAgfSBlbHNlIGlmIChnMiA9PT0gbWF4KSB7XG4gICAgICAgIGVkZ2UgPSBNYXRoLm1pbihpMiwgaTApICsgXCIgXCIgKyBNYXRoLm1heChpMiwgaTApO1xuXG4gICAgICAgIGkgPSBlZGdlc1tlZGdlXTtcbiAgICAgICAgaWYgKCFkZWZpbmVkKGkpKSB7XG4gICAgICAgICAgbWlkID0gQ2FydGVzaWFuMy5hZGQodjIsIHYwLCBzdWJkaXZpc2lvbk1pZFNjcmF0Y2gpO1xuICAgICAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihtaWQsIDAuNSwgbWlkKTtcbiAgICAgICAgICBzdWJkaXZpZGVkUG9zaXRpb25zLnB1c2gobWlkLngsIG1pZC55LCBtaWQueik7XG4gICAgICAgICAgaSA9IHN1YmRpdmlkZWRQb3NpdGlvbnMubGVuZ3RoIC8gMyAtIDE7XG4gICAgICAgICAgZWRnZXNbZWRnZV0gPSBpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpYW5nbGVzLnB1c2goaTIsIGksIGkxKTtcbiAgICAgICAgdHJpYW5nbGVzLnB1c2goaSwgaTAsIGkxKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3ViZGl2aWRlZEluZGljZXMucHVzaChpMCk7XG4gICAgICBzdWJkaXZpZGVkSW5kaWNlcy5wdXNoKGkxKTtcbiAgICAgIHN1YmRpdmlkZWRJbmRpY2VzLnB1c2goaTIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgR2VvbWV0cnkoe1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgIHBvc2l0aW9uOiBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRE9VQkxFLFxuICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAzLFxuICAgICAgICB2YWx1ZXM6IHN1YmRpdmlkZWRQb3NpdGlvbnMsXG4gICAgICB9KSxcbiAgICB9LFxuICAgIGluZGljZXM6IHN1YmRpdmlkZWRJbmRpY2VzLFxuICAgIHByaW1pdGl2ZVR5cGU6IFByaW1pdGl2ZVR5cGUuVFJJQU5HTEVTLFxuICB9KTtcbn07XG5cbnZhciBzdWJkaXZpc2lvbkMwU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBzdWJkaXZpc2lvbkMxU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBzdWJkaXZpc2lvbkMyU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBzdWJkaXZpc2lvbkNhcnRvZ3JhcGhpY1NjcmF0Y2ggPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5cbi8qKlxuICogU3ViZGl2aWRlcyBwb3NpdGlvbnMgb24gcmh1bWIgbGluZXMgYW5kIHJhaXNlcyBwb2ludHMgdG8gdGhlIHN1cmZhY2Ugb2YgdGhlIGVsbGlwc29pZC5cbiAqXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gZWxsaXBzb2lkIFRoZSBlbGxpcHNvaWQgdGhlIHBvbHlnb24gaW4gb24uXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjNbXX0gcG9zaXRpb25zIEFuIGFycmF5IG9mIHtAbGluayBDYXJ0ZXNpYW4zfSBwb3NpdGlvbnMgb2YgdGhlIHBvbHlnb24uXG4gKiBAcGFyYW0ge051bWJlcltdfSBpbmRpY2VzIEFuIGFycmF5IG9mIGluZGljZXMgdGhhdCBkZXRlcm1pbmVzIHRoZSB0cmlhbmdsZXMgaW4gdGhlIHBvbHlnb24uXG4gKiBAcGFyYW0ge051bWJlcn0gW2dyYW51bGFyaXR5PUNlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFXSBUaGUgZGlzdGFuY2UsIGluIHJhZGlhbnMsIGJldHdlZW4gZWFjaCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlLiBEZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgcG9zaXRpb25zIGluIHRoZSBidWZmZXIuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEF0IGxlYXN0IHRocmVlIGluZGljZXMgYXJlIHJlcXVpcmVkLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoZSBudW1iZXIgb2YgaW5kaWNlcyBtdXN0IGJlIGRpdmlzYWJsZSBieSB0aHJlZS5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBHcmFudWxhcml0eSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLlxuICovXG5Qb2x5Z29uUGlwZWxpbmUuY29tcHV0ZVJodW1iTGluZVN1YmRpdmlzaW9uID0gZnVuY3Rpb24gKFxuICBlbGxpcHNvaWQsXG4gIHBvc2l0aW9ucyxcbiAgaW5kaWNlcyxcbiAgZ3JhbnVsYXJpdHlcbikge1xuICBncmFudWxhcml0eSA9IGRlZmF1bHRWYWx1ZShncmFudWxhcml0eSwgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUUpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJlbGxpcHNvaWRcIiwgZWxsaXBzb2lkKTtcbiAgQ2hlY2suZGVmaW5lZChcInBvc2l0aW9uc1wiLCBwb3NpdGlvbnMpO1xuICBDaGVjay5kZWZpbmVkKFwiaW5kaWNlc1wiLCBpbmRpY2VzKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbk9yRXF1YWxzKFwiaW5kaWNlcy5sZW5ndGhcIiwgaW5kaWNlcy5sZW5ndGgsIDMpO1xuICBDaGVjay50eXBlT2YubnVtYmVyLmVxdWFscyhcImluZGljZXMubGVuZ3RoICUgM1wiLCBcIjBcIiwgaW5kaWNlcy5sZW5ndGggJSAzLCAwKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbihcImdyYW51bGFyaXR5XCIsIGdyYW51bGFyaXR5LCAwLjApO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAvLyB0cmlhbmdsZXMgdGhhdCBuZWVkIChvciBtaWdodCBuZWVkKSB0byBiZSBzdWJkaXZpZGVkLlxuICB2YXIgdHJpYW5nbGVzID0gaW5kaWNlcy5zbGljZSgwKTtcblxuICAvLyBOZXcgcG9zaXRpb25zIGR1ZSB0byBlZGdlIHNwbGl0cyBhcmUgYXBwZW5kZWQgdG8gdGhlIHBvc2l0aW9ucyBsaXN0LlxuICB2YXIgaTtcbiAgdmFyIGxlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gIHZhciBzdWJkaXZpZGVkUG9zaXRpb25zID0gbmV3IEFycmF5KGxlbmd0aCAqIDMpO1xuICB2YXIgcSA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gcG9zaXRpb25zW2ldO1xuICAgIHN1YmRpdmlkZWRQb3NpdGlvbnNbcSsrXSA9IGl0ZW0ueDtcbiAgICBzdWJkaXZpZGVkUG9zaXRpb25zW3ErK10gPSBpdGVtLnk7XG4gICAgc3ViZGl2aWRlZFBvc2l0aW9uc1txKytdID0gaXRlbS56O1xuICB9XG5cbiAgdmFyIHN1YmRpdmlkZWRJbmRpY2VzID0gW107XG5cbiAgLy8gVXNlZCB0byBtYWtlIHN1cmUgc2hhcmVkIGVkZ2VzIGFyZSBub3Qgc3BsaXQgbW9yZSB0aGFuIG9uY2UuXG4gIHZhciBlZGdlcyA9IHt9O1xuXG4gIHZhciByYWRpdXMgPSBlbGxpcHNvaWQubWF4aW11bVJhZGl1cztcbiAgdmFyIG1pbkRpc3RhbmNlID0gQ2VzaXVtTWF0aC5jaG9yZExlbmd0aChncmFudWxhcml0eSwgcmFkaXVzKTtcblxuICB2YXIgcmh1bWIwID0gbmV3IEVsbGlwc29pZFJodW1iTGluZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgZWxsaXBzb2lkKTtcbiAgdmFyIHJodW1iMSA9IG5ldyBFbGxpcHNvaWRSaHVtYkxpbmUodW5kZWZpbmVkLCB1bmRlZmluZWQsIGVsbGlwc29pZCk7XG4gIHZhciByaHVtYjIgPSBuZXcgRWxsaXBzb2lkUmh1bWJMaW5lKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBlbGxpcHNvaWQpO1xuXG4gIHdoaWxlICh0cmlhbmdsZXMubGVuZ3RoID4gMCkge1xuICAgIHZhciBpMiA9IHRyaWFuZ2xlcy5wb3AoKTtcbiAgICB2YXIgaTEgPSB0cmlhbmdsZXMucG9wKCk7XG4gICAgdmFyIGkwID0gdHJpYW5nbGVzLnBvcCgpO1xuXG4gICAgdmFyIHYwID0gQ2FydGVzaWFuMy5mcm9tQXJyYXkoXG4gICAgICBzdWJkaXZpZGVkUG9zaXRpb25zLFxuICAgICAgaTAgKiAzLFxuICAgICAgc3ViZGl2aXNpb25WMFNjcmF0Y2hcbiAgICApO1xuICAgIHZhciB2MSA9IENhcnRlc2lhbjMuZnJvbUFycmF5KFxuICAgICAgc3ViZGl2aWRlZFBvc2l0aW9ucyxcbiAgICAgIGkxICogMyxcbiAgICAgIHN1YmRpdmlzaW9uVjFTY3JhdGNoXG4gICAgKTtcbiAgICB2YXIgdjIgPSBDYXJ0ZXNpYW4zLmZyb21BcnJheShcbiAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnMsXG4gICAgICBpMiAqIDMsXG4gICAgICBzdWJkaXZpc2lvblYyU2NyYXRjaFxuICAgICk7XG5cbiAgICB2YXIgYzAgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWModjAsIHN1YmRpdmlzaW9uQzBTY3JhdGNoKTtcbiAgICB2YXIgYzEgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWModjEsIHN1YmRpdmlzaW9uQzFTY3JhdGNoKTtcbiAgICB2YXIgYzIgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWModjIsIHN1YmRpdmlzaW9uQzJTY3JhdGNoKTtcblxuICAgIHJodW1iMC5zZXRFbmRQb2ludHMoYzAsIGMxKTtcbiAgICB2YXIgZzAgPSByaHVtYjAuc3VyZmFjZURpc3RhbmNlO1xuICAgIHJodW1iMS5zZXRFbmRQb2ludHMoYzEsIGMyKTtcbiAgICB2YXIgZzEgPSByaHVtYjEuc3VyZmFjZURpc3RhbmNlO1xuICAgIHJodW1iMi5zZXRFbmRQb2ludHMoYzIsIGMwKTtcbiAgICB2YXIgZzIgPSByaHVtYjIuc3VyZmFjZURpc3RhbmNlO1xuXG4gICAgdmFyIG1heCA9IE1hdGgubWF4KGcwLCBnMSwgZzIpO1xuICAgIHZhciBlZGdlO1xuICAgIHZhciBtaWQ7XG4gICAgdmFyIG1pZEhlaWdodDtcbiAgICB2YXIgbWlkQ2FydGVzaWFuMztcblxuICAgIC8vIGlmIHRoZSBtYXggbGVuZ3RoIHNxdWFyZWQgb2YgYSB0cmlhbmdsZSBlZGdlIGlzIGdyZWF0ZXIgdGhhbiBncmFudWxhcml0eSwgc3ViZGl2aWRlIHRoZSB0cmlhbmdsZVxuICAgIGlmIChtYXggPiBtaW5EaXN0YW5jZSkge1xuICAgICAgaWYgKGcwID09PSBtYXgpIHtcbiAgICAgICAgZWRnZSA9IE1hdGgubWluKGkwLCBpMSkgKyBcIiBcIiArIE1hdGgubWF4KGkwLCBpMSk7XG5cbiAgICAgICAgaSA9IGVkZ2VzW2VkZ2VdO1xuICAgICAgICBpZiAoIWRlZmluZWQoaSkpIHtcbiAgICAgICAgICBtaWQgPSByaHVtYjAuaW50ZXJwb2xhdGVVc2luZ0ZyYWN0aW9uKFxuICAgICAgICAgICAgMC41LFxuICAgICAgICAgICAgc3ViZGl2aXNpb25DYXJ0b2dyYXBoaWNTY3JhdGNoXG4gICAgICAgICAgKTtcbiAgICAgICAgICBtaWRIZWlnaHQgPSAoYzAuaGVpZ2h0ICsgYzEuaGVpZ2h0KSAqIDAuNTtcbiAgICAgICAgICBtaWRDYXJ0ZXNpYW4zID0gQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhcbiAgICAgICAgICAgIG1pZC5sb25naXR1ZGUsXG4gICAgICAgICAgICBtaWQubGF0aXR1ZGUsXG4gICAgICAgICAgICBtaWRIZWlnaHQsXG4gICAgICAgICAgICBlbGxpcHNvaWQsXG4gICAgICAgICAgICBzdWJkaXZpc2lvbk1pZFNjcmF0Y2hcbiAgICAgICAgICApO1xuICAgICAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnMucHVzaChcbiAgICAgICAgICAgIG1pZENhcnRlc2lhbjMueCxcbiAgICAgICAgICAgIG1pZENhcnRlc2lhbjMueSxcbiAgICAgICAgICAgIG1pZENhcnRlc2lhbjMuelxuICAgICAgICAgICk7XG4gICAgICAgICAgaSA9IHN1YmRpdmlkZWRQb3NpdGlvbnMubGVuZ3RoIC8gMyAtIDE7XG4gICAgICAgICAgZWRnZXNbZWRnZV0gPSBpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpYW5nbGVzLnB1c2goaTAsIGksIGkyKTtcbiAgICAgICAgdHJpYW5nbGVzLnB1c2goaSwgaTEsIGkyKTtcbiAgICAgIH0gZWxzZSBpZiAoZzEgPT09IG1heCkge1xuICAgICAgICBlZGdlID0gTWF0aC5taW4oaTEsIGkyKSArIFwiIFwiICsgTWF0aC5tYXgoaTEsIGkyKTtcblxuICAgICAgICBpID0gZWRnZXNbZWRnZV07XG4gICAgICAgIGlmICghZGVmaW5lZChpKSkge1xuICAgICAgICAgIG1pZCA9IHJodW1iMS5pbnRlcnBvbGF0ZVVzaW5nRnJhY3Rpb24oXG4gICAgICAgICAgICAwLjUsXG4gICAgICAgICAgICBzdWJkaXZpc2lvbkNhcnRvZ3JhcGhpY1NjcmF0Y2hcbiAgICAgICAgICApO1xuICAgICAgICAgIG1pZEhlaWdodCA9IChjMS5oZWlnaHQgKyBjMi5oZWlnaHQpICogMC41O1xuICAgICAgICAgIG1pZENhcnRlc2lhbjMgPSBDYXJ0ZXNpYW4zLmZyb21SYWRpYW5zKFxuICAgICAgICAgICAgbWlkLmxvbmdpdHVkZSxcbiAgICAgICAgICAgIG1pZC5sYXRpdHVkZSxcbiAgICAgICAgICAgIG1pZEhlaWdodCxcbiAgICAgICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgICAgIHN1YmRpdmlzaW9uTWlkU2NyYXRjaFxuICAgICAgICAgICk7XG4gICAgICAgICAgc3ViZGl2aWRlZFBvc2l0aW9ucy5wdXNoKFxuICAgICAgICAgICAgbWlkQ2FydGVzaWFuMy54LFxuICAgICAgICAgICAgbWlkQ2FydGVzaWFuMy55LFxuICAgICAgICAgICAgbWlkQ2FydGVzaWFuMy56XG4gICAgICAgICAgKTtcbiAgICAgICAgICBpID0gc3ViZGl2aWRlZFBvc2l0aW9ucy5sZW5ndGggLyAzIC0gMTtcbiAgICAgICAgICBlZGdlc1tlZGdlXSA9IGk7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlhbmdsZXMucHVzaChpMSwgaSwgaTApO1xuICAgICAgICB0cmlhbmdsZXMucHVzaChpLCBpMiwgaTApO1xuICAgICAgfSBlbHNlIGlmIChnMiA9PT0gbWF4KSB7XG4gICAgICAgIGVkZ2UgPSBNYXRoLm1pbihpMiwgaTApICsgXCIgXCIgKyBNYXRoLm1heChpMiwgaTApO1xuXG4gICAgICAgIGkgPSBlZGdlc1tlZGdlXTtcbiAgICAgICAgaWYgKCFkZWZpbmVkKGkpKSB7XG4gICAgICAgICAgbWlkID0gcmh1bWIyLmludGVycG9sYXRlVXNpbmdGcmFjdGlvbihcbiAgICAgICAgICAgIDAuNSxcbiAgICAgICAgICAgIHN1YmRpdmlzaW9uQ2FydG9ncmFwaGljU2NyYXRjaFxuICAgICAgICAgICk7XG4gICAgICAgICAgbWlkSGVpZ2h0ID0gKGMyLmhlaWdodCArIGMwLmhlaWdodCkgKiAwLjU7XG4gICAgICAgICAgbWlkQ2FydGVzaWFuMyA9IENhcnRlc2lhbjMuZnJvbVJhZGlhbnMoXG4gICAgICAgICAgICBtaWQubG9uZ2l0dWRlLFxuICAgICAgICAgICAgbWlkLmxhdGl0dWRlLFxuICAgICAgICAgICAgbWlkSGVpZ2h0LFxuICAgICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgICAgc3ViZGl2aXNpb25NaWRTY3JhdGNoXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzdWJkaXZpZGVkUG9zaXRpb25zLnB1c2goXG4gICAgICAgICAgICBtaWRDYXJ0ZXNpYW4zLngsXG4gICAgICAgICAgICBtaWRDYXJ0ZXNpYW4zLnksXG4gICAgICAgICAgICBtaWRDYXJ0ZXNpYW4zLnpcbiAgICAgICAgICApO1xuICAgICAgICAgIGkgPSBzdWJkaXZpZGVkUG9zaXRpb25zLmxlbmd0aCAvIDMgLSAxO1xuICAgICAgICAgIGVkZ2VzW2VkZ2VdID0gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWFuZ2xlcy5wdXNoKGkyLCBpLCBpMSk7XG4gICAgICAgIHRyaWFuZ2xlcy5wdXNoKGksIGkwLCBpMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YmRpdmlkZWRJbmRpY2VzLnB1c2goaTApO1xuICAgICAgc3ViZGl2aWRlZEluZGljZXMucHVzaChpMSk7XG4gICAgICBzdWJkaXZpZGVkSW5kaWNlcy5wdXNoKGkyKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IEdlb21ldHJ5KHtcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICBwb3NpdGlvbjogbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkRPVUJMRSxcbiAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgdmFsdWVzOiBzdWJkaXZpZGVkUG9zaXRpb25zLFxuICAgICAgfSksXG4gICAgfSxcbiAgICBpbmRpY2VzOiBzdWJkaXZpZGVkSW5kaWNlcyxcbiAgICBwcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLlRSSUFOR0xFUyxcbiAgfSk7XG59O1xuXG4vKipcbiAqIFNjYWxlcyBlYWNoIHBvc2l0aW9uIG9mIGEgZ2VvbWV0cnkncyBwb3NpdGlvbiBhdHRyaWJ1dGUgdG8gYSBoZWlnaHQsIGluIHBsYWNlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyW119IHBvc2l0aW9ucyBUaGUgYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIHBvc2l0aW9ucyB0byBiZSBzY2FsZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBbaGVpZ2h0PTAuMF0gVGhlIGRlc2lyZWQgaGVpZ2h0IHRvIGFkZCB0byB0aGUgcG9zaXRpb25zXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gW2VsbGlwc29pZD1FbGxpcHNvaWQuV0dTODRdIFRoZSBlbGxpcHNvaWQgb24gd2hpY2ggdGhlIHBvc2l0aW9ucyBsaWUuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzY2FsZVRvU3VyZmFjZT10cnVlXSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgcG9zaXRpb25zIG5lZWQgdG8gYmUgc2NhbGVkIHRvIHRoZSBzdXJmYWNlIGJlZm9yZSB0aGUgaGVpZ2h0IGlzIGFkZGVkLlxuICogQHJldHVybnMge051bWJlcltdfSBUaGUgaW5wdXQgYXJyYXkgb2YgcG9zaXRpb25zLCBzY2FsZWQgdG8gaGVpZ2h0XG4gKi9cblBvbHlnb25QaXBlbGluZS5zY2FsZVRvR2VvZGV0aWNIZWlnaHQgPSBmdW5jdGlvbiAoXG4gIHBvc2l0aW9ucyxcbiAgaGVpZ2h0LFxuICBlbGxpcHNvaWQsXG4gIHNjYWxlVG9TdXJmYWNlXG4pIHtcbiAgZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKGVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KTtcblxuICB2YXIgbiA9IHNjYWxlVG9HZW9kZXRpY0hlaWdodE47XG4gIHZhciBwID0gc2NhbGVUb0dlb2RldGljSGVpZ2h0UDtcblxuICBoZWlnaHQgPSBkZWZhdWx0VmFsdWUoaGVpZ2h0LCAwLjApO1xuICBzY2FsZVRvU3VyZmFjZSA9IGRlZmF1bHRWYWx1ZShzY2FsZVRvU3VyZmFjZSwgdHJ1ZSk7XG5cbiAgaWYgKGRlZmluZWQocG9zaXRpb25zKSkge1xuICAgIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuICAgICAgQ2FydGVzaWFuMy5mcm9tQXJyYXkocG9zaXRpb25zLCBpLCBwKTtcblxuICAgICAgaWYgKHNjYWxlVG9TdXJmYWNlKSB7XG4gICAgICAgIHAgPSBlbGxpcHNvaWQuc2NhbGVUb0dlb2RldGljU3VyZmFjZShwLCBwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhlaWdodCAhPT0gMCkge1xuICAgICAgICBuID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbChwLCBuKTtcblxuICAgICAgICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIobiwgaGVpZ2h0LCBuKTtcbiAgICAgICAgQ2FydGVzaWFuMy5hZGQocCwgbiwgcCk7XG4gICAgICB9XG5cbiAgICAgIHBvc2l0aW9uc1tpXSA9IHAueDtcbiAgICAgIHBvc2l0aW9uc1tpICsgMV0gPSBwLnk7XG4gICAgICBwb3NpdGlvbnNbaSArIDJdID0gcC56O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwb3NpdGlvbnM7XG59O1xuZXhwb3J0IGRlZmF1bHQgUG9seWdvblBpcGVsaW5lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///78284\n')},80593:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ArcType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11491);\n/* harmony import */ var _arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32378);\n/* harmony import */ var _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(48243);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60216);\n/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(59947);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84828);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12572);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(50491);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13616);\n/* harmony import */ var _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(56652);\n/* harmony import */ var _GeometryType_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(51318);\n/* harmony import */ var _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(22832);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(99417);\n/* harmony import */ var _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(61733);\n/* harmony import */ var _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(97264);\n/* harmony import */ var _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(67252);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar scratchInterpolateColorsArray = [];\n\nfunction interpolateColors(p0, p1, color0, color1, numPoints) {\n  var colors = scratchInterpolateColorsArray;\n  colors.length = numPoints;\n  var i;\n\n  var r0 = color0.red;\n  var g0 = color0.green;\n  var b0 = color0.blue;\n  var a0 = color0.alpha;\n\n  var r1 = color1.red;\n  var g1 = color1.green;\n  var b1 = color1.blue;\n  var a1 = color1.alpha;\n\n  if (_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(color0, color1)) {\n    for (i = 0; i < numPoints; i++) {\n      colors[i] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(color0);\n    }\n    return colors;\n  }\n\n  var redPerVertex = (r1 - r0) / numPoints;\n  var greenPerVertex = (g1 - g0) / numPoints;\n  var bluePerVertex = (b1 - b0) / numPoints;\n  var alphaPerVertex = (a1 - a0) / numPoints;\n\n  for (i = 0; i < numPoints; i++) {\n    colors[i] = new _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      r0 + i * redPerVertex,\n      g0 + i * greenPerVertex,\n      b0 + i * bluePerVertex,\n      a0 + i * alphaPerVertex\n    );\n  }\n\n  return colors;\n}\n\n/**\n * A description of a polyline modeled as a line strip; the first two positions define a line segment,\n * and each additional position defines a line segment from the previous position. The polyline is capable of\n * displaying with a material.\n *\n * @alias PolylineGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of {@link Cartesian3} defining the positions in the polyline as a line strip.\n * @param {Number} [options.width=1.0] The width in pixels.\n * @param {Color[]} [options.colors] An Array of {@link Color} defining the per vertex or per segment colors.\n * @param {Boolean} [options.colorsPerVertex=false] A boolean that determines whether the colors will be flat across each segment of the line or interpolated across the vertices.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of line the polyline segments must follow.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude if options.arcType is not ArcType.NONE. Determines the number of positions in the buffer.\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n *\n * @exception {DeveloperError} At least two positions are required.\n * @exception {DeveloperError} width must be greater than or equal to one.\n * @exception {DeveloperError} colors has an invalid length.\n *\n * @see PolylineGeometry#createGeometry\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Polyline.html|Cesium Sandcastle Polyline Demo}\n *\n * @example\n * // A polyline with two connected line segments\n * var polyline = new Cesium.PolylineGeometry({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     0.0, 0.0,\n *     5.0, 0.0,\n *     5.0, 5.0\n *   ]),\n *   width : 10.0\n * });\n * var geometry = Cesium.PolylineGeometry.createGeometry(polyline);\n */\nfunction PolylineGeometry(options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var positions = options.positions;\n  var colors = options.colors;\n  var width = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.width, 1.0);\n  var colorsPerVertex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.colorsPerVertex, false);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(positions) || positions.length < 2) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z("At least two positions are required.");\n  }\n  if (typeof width !== "number") {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z("width must be a number");\n  }\n  if (\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(colors) &&\n    ((colorsPerVertex && colors.length < positions.length) ||\n      (!colorsPerVertex && colors.length < positions.length - 1))\n  ) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z("colors has an invalid length.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this._positions = positions;\n  this._colors = colors;\n  this._width = width;\n  this._colorsPerVertex = colorsPerVertex;\n  this._vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].clone */ .Z.clone(\n    (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.vertexFormat, _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].DEFAULT */ .Z.DEFAULT)\n  );\n\n  this._arcType = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.arcType, _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC);\n  this._granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(\n    options.granularity,\n    _Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  );\n  this._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clone */ .Z.clone(\n    (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].WGS84 */ .Z.WGS84)\n  );\n  this._workerName = "createPolylineGeometry";\n\n  var numComponents = 1 + positions.length * _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength;\n  numComponents += (0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(colors) ? 1 + colors.length * _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength : 1;\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength =\n    numComponents + _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].packedLength */ .Z.packedLength + _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].packedLength */ .Z.packedLength + 4;\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {PolylineGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nPolylineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(value)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z("value is required");\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(array)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z("array is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var i;\n\n  var positions = value._positions;\n  var length = positions.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength) {\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].pack */ .Z.pack(positions[i], array, startingIndex);\n  }\n\n  var colors = value._colors;\n  length = (0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(colors) ? colors.length : 0.0;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength) {\n    _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(colors[i], array, startingIndex);\n  }\n\n  _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].pack */ .Z.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].packedLength */ .Z.packedLength;\n\n  _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].pack */ .Z.pack(value._vertexFormat, array, startingIndex);\n  startingIndex += _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].packedLength */ .Z.packedLength;\n\n  array[startingIndex++] = value._width;\n  array[startingIndex++] = value._colorsPerVertex ? 1.0 : 0.0;\n  array[startingIndex++] = value._arcType;\n  array[startingIndex] = value._granularity;\n\n  return array;\n};\n\nvar scratchEllipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clone */ .Z.clone(_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].UNIT_SPHERE */ .Z.UNIT_SPHERE);\nvar scratchVertexFormat = new _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\nvar scratchOptions = {\n  positions: undefined,\n  colors: undefined,\n  ellipsoid: scratchEllipsoid,\n  vertexFormat: scratchVertexFormat,\n  width: undefined,\n  colorsPerVertex: undefined,\n  arcType: undefined,\n  granularity: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {PolylineGeometry} [result] The object into which to store the result.\n * @returns {PolylineGeometry} The modified result parameter or a new PolylineGeometry instance if one was not provided.\n */\nPolylineGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(array)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z("array is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var i;\n\n  var length = array[startingIndex++];\n  var positions = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength) {\n    positions[i] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].unpack */ .Z.unpack(array, startingIndex);\n  }\n\n  length = array[startingIndex++];\n  var colors = length > 0 ? new Array(length) : undefined;\n\n  for (i = 0; i < length; ++i, startingIndex += _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength) {\n    colors[i] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(array, startingIndex);\n  }\n\n  var ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].unpack */ .Z.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].packedLength */ .Z.packedLength;\n\n  var vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].unpack */ .Z.unpack(\n    array,\n    startingIndex,\n    scratchVertexFormat\n  );\n  startingIndex += _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].packedLength */ .Z.packedLength;\n\n  var width = array[startingIndex++];\n  var colorsPerVertex = array[startingIndex++] === 1.0;\n  var arcType = array[startingIndex++];\n  var granularity = array[startingIndex];\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(result)) {\n    scratchOptions.positions = positions;\n    scratchOptions.colors = colors;\n    scratchOptions.width = width;\n    scratchOptions.colorsPerVertex = colorsPerVertex;\n    scratchOptions.arcType = arcType;\n    scratchOptions.granularity = granularity;\n    return new PolylineGeometry(scratchOptions);\n  }\n\n  result._positions = positions;\n  result._colors = colors;\n  result._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clone */ .Z.clone(ellipsoid, result._ellipsoid);\n  result._vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].clone */ .Z.clone(vertexFormat, result._vertexFormat);\n  result._width = width;\n  result._colorsPerVertex = colorsPerVertex;\n  result._arcType = arcType;\n  result._granularity = granularity;\n\n  return result;\n};\n\nvar scratchCartesian3 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchPosition = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchPrevPosition = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchNextPosition = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n/**\n * Computes the geometric representation of a polyline, including its vertices, indices, and a bounding sphere.\n *\n * @param {PolylineGeometry} polylineGeometry A description of the polyline.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nPolylineGeometry.createGeometry = function (polylineGeometry) {\n  var width = polylineGeometry._width;\n  var vertexFormat = polylineGeometry._vertexFormat;\n  var colors = polylineGeometry._colors;\n  var colorsPerVertex = polylineGeometry._colorsPerVertex;\n  var arcType = polylineGeometry._arcType;\n  var granularity = polylineGeometry._granularity;\n  var ellipsoid = polylineGeometry._ellipsoid;\n\n  var i;\n  var j;\n  var k;\n\n  var removedIndices = [];\n  var positions = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(\n    polylineGeometry._positions,\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon,\n    false,\n    removedIndices\n  );\n\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(colors) && removedIndices.length > 0) {\n    var removedArrayIndex = 0;\n    var nextRemovedIndex = removedIndices[0];\n    colors = colors.filter(function (color, index) {\n      var remove = false;\n      if (colorsPerVertex) {\n        remove =\n          index === nextRemovedIndex || (index === 0 && nextRemovedIndex === 1);\n      } else {\n        remove = index + 1 === nextRemovedIndex;\n      }\n\n      if (remove) {\n        removedArrayIndex++;\n        nextRemovedIndex = removedIndices[removedArrayIndex];\n        return false;\n      }\n      return true;\n    });\n  }\n\n  var positionsLength = positions.length;\n\n  // A width of a pixel or less is not a valid geometry, but in order to support external data\n  // that may have errors we treat this as an empty geometry.\n  if (positionsLength < 2 || width <= 0.0) {\n    return undefined;\n  }\n\n  if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC || arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB) {\n    var subdivisionSize;\n    var numberOfPointsFunction;\n    if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n      subdivisionSize = _Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].chordLength */ .Z.chordLength(\n        granularity,\n        ellipsoid.maximumRadius\n      );\n      numberOfPointsFunction = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].numberOfPoints */ .Z.numberOfPoints;\n    } else {\n      subdivisionSize = granularity;\n      numberOfPointsFunction = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].numberOfPointsRhumbLine */ .Z.numberOfPointsRhumbLine;\n    }\n\n    var heights = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].extractHeights */ .Z.extractHeights(positions, ellipsoid);\n\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(colors)) {\n      var colorLength = 1;\n      for (i = 0; i < positionsLength - 1; ++i) {\n        colorLength += numberOfPointsFunction(\n          positions[i],\n          positions[i + 1],\n          subdivisionSize\n        );\n      }\n\n      var newColors = new Array(colorLength);\n      var newColorIndex = 0;\n\n      for (i = 0; i < positionsLength - 1; ++i) {\n        var p0 = positions[i];\n        var p1 = positions[i + 1];\n        var c0 = colors[i];\n\n        var numColors = numberOfPointsFunction(p0, p1, subdivisionSize);\n        if (colorsPerVertex && i < colorLength) {\n          var c1 = colors[i + 1];\n          var interpolatedColors = interpolateColors(p0, p1, c0, c1, numColors);\n          var interpolatedColorsLength = interpolatedColors.length;\n          for (j = 0; j < interpolatedColorsLength; ++j) {\n            newColors[newColorIndex++] = interpolatedColors[j];\n          }\n        } else {\n          for (j = 0; j < numColors; ++j) {\n            newColors[newColorIndex++] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(c0);\n          }\n        }\n      }\n\n      newColors[newColorIndex] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(colors[colors.length - 1]);\n      colors = newColors;\n\n      scratchInterpolateColorsArray.length = 0;\n    }\n\n    if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n      positions = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].generateCartesianArc */ .Z.generateCartesianArc({\n        positions: positions,\n        minDistance: subdivisionSize,\n        ellipsoid: ellipsoid,\n        height: heights,\n      });\n    } else {\n      positions = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].generateCartesianRhumbArc */ .Z.generateCartesianRhumbArc({\n        positions: positions,\n        granularity: subdivisionSize,\n        ellipsoid: ellipsoid,\n        height: heights,\n      });\n    }\n  }\n\n  positionsLength = positions.length;\n  var size = positionsLength * 4.0 - 4.0;\n\n  var finalPositions = new Float64Array(size * 3);\n  var prevPositions = new Float64Array(size * 3);\n  var nextPositions = new Float64Array(size * 3);\n  var expandAndWidth = new Float32Array(size * 2);\n  var st = vertexFormat.st ? new Float32Array(size * 2) : undefined;\n  var finalColors = (0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(colors) ? new Uint8Array(size * 4) : undefined;\n\n  var positionIndex = 0;\n  var expandAndWidthIndex = 0;\n  var stIndex = 0;\n  var colorIndex = 0;\n  var position;\n\n  for (j = 0; j < positionsLength; ++j) {\n    if (j === 0) {\n      position = scratchCartesian3;\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].subtract */ .Z.subtract(positions[0], positions[1], position);\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].add */ .Z.add(positions[0], position, position);\n    } else {\n      position = positions[j - 1];\n    }\n\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(position, scratchPrevPosition);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(positions[j], scratchPosition);\n\n    if (j === positionsLength - 1) {\n      position = scratchCartesian3;\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].subtract */ .Z.subtract(\n        positions[positionsLength - 1],\n        positions[positionsLength - 2],\n        position\n      );\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].add */ .Z.add(positions[positionsLength - 1], position, position);\n    } else {\n      position = positions[j + 1];\n    }\n\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(position, scratchNextPosition);\n\n    var color0, color1;\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(finalColors)) {\n      if (j !== 0 && !colorsPerVertex) {\n        color0 = colors[j - 1];\n      } else {\n        color0 = colors[j];\n      }\n\n      if (j !== positionsLength - 1) {\n        color1 = colors[j];\n      }\n    }\n\n    var startK = j === 0 ? 2 : 0;\n    var endK = j === positionsLength - 1 ? 2 : 4;\n\n    for (k = startK; k < endK; ++k) {\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].pack */ .Z.pack(scratchPosition, finalPositions, positionIndex);\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].pack */ .Z.pack(scratchPrevPosition, prevPositions, positionIndex);\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].pack */ .Z.pack(scratchNextPosition, nextPositions, positionIndex);\n      positionIndex += 3;\n\n      var direction = k - 2 < 0 ? -1.0 : 1.0;\n      expandAndWidth[expandAndWidthIndex++] = 2 * (k % 2) - 1; // expand direction\n      expandAndWidth[expandAndWidthIndex++] = direction * width;\n\n      if (vertexFormat.st) {\n        st[stIndex++] = j / (positionsLength - 1);\n        st[stIndex++] = Math.max(expandAndWidth[expandAndWidthIndex - 2], 0.0);\n      }\n\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(finalColors)) {\n        var color = k < 2 ? color0 : color1;\n\n        finalColors[colorIndex++] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].floatToByte */ .Z.floatToByte(color.red);\n        finalColors[colorIndex++] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].floatToByte */ .Z.floatToByte(color.green);\n        finalColors[colorIndex++] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].floatToByte */ .Z.floatToByte(color.blue);\n        finalColors[colorIndex++] = _Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].floatToByte */ .Z.floatToByte(color.alpha);\n      }\n    }\n  }\n\n  var attributes = new _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\n\n  attributes.position = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n    componentsPerAttribute: 3,\n    values: finalPositions,\n  });\n\n  attributes.prevPosition = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n    componentsPerAttribute: 3,\n    values: prevPositions,\n  });\n\n  attributes.nextPosition = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n    componentsPerAttribute: 3,\n    values: nextPositions,\n  });\n\n  attributes.expandAndWidth = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].FLOAT */ .Z.FLOAT,\n    componentsPerAttribute: 2,\n    values: expandAndWidth,\n  });\n\n  if (vertexFormat.st) {\n    attributes.st = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n      componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].FLOAT */ .Z.FLOAT,\n      componentsPerAttribute: 2,\n      values: st,\n    });\n  }\n\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(finalColors)) {\n    attributes.color = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n      componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n      componentsPerAttribute: 4,\n      values: finalColors,\n      normalize: true,\n    });\n  }\n\n  var indices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].createTypedArray */ .Z.createTypedArray(size, positionsLength * 6 - 6);\n  var index = 0;\n  var indicesIndex = 0;\n  var length = positionsLength - 1.0;\n  for (j = 0; j < length; ++j) {\n    indices[indicesIndex++] = index;\n    indices[indicesIndex++] = index + 2;\n    indices[indicesIndex++] = index + 1;\n\n    indices[indicesIndex++] = index + 1;\n    indices[indicesIndex++] = index + 2;\n    indices[indicesIndex++] = index + 3;\n\n    index += 4;\n  }\n\n  return new _Geometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n    attributes: attributes,\n    indices: indices,\n    primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n    boundingSphere: _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromPoints */ .Z.fromPoints(positions),\n    geometryType: _GeometryType_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].POLYLINES */ .Z.POLYLINES,\n  });\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolylineGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUs7QUFDTDs7QUFFQSxnQkFBZ0IscUdBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsWUFBWTtBQUMxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsYUFBYSw2REFBUTtBQUNyQjtBQUNBO0FBQ0EsbUJBQW1CLHVGQUF1QjtBQUMxQyxvQkFBb0IseUZBQXlCO0FBQzdDLGtCQUFrQixzRkFBc0I7QUFDeEMsR0FBRztBQUNIO0FBQ0EseURBQWUsZ0JBQWdCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9Qb2x5bGluZUdlb21ldHJ5LmpzPzU0ZjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFyY1R5cGUgZnJvbSBcIi4vQXJjVHlwZS5qc1wiO1xuaW1wb3J0IGFycmF5UmVtb3ZlRHVwbGljYXRlcyBmcm9tIFwiLi9hcnJheVJlbW92ZUR1cGxpY2F0ZXMuanNcIjtcbmltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4vQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4vQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4vZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4vRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFbGxpcHNvaWQgZnJvbSBcIi4vRWxsaXBzb2lkLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnkuanNcIjtcbmltcG9ydCBHZW9tZXRyeUF0dHJpYnV0ZSBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5QXR0cmlidXRlcyBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZXMuanNcIjtcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSBcIi4vR2VvbWV0cnlUeXBlLmpzXCI7XG5pbXBvcnQgSW5kZXhEYXRhdHlwZSBmcm9tIFwiLi9JbmRleERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi9NYXRoLmpzXCI7XG5pbXBvcnQgUG9seWxpbmVQaXBlbGluZSBmcm9tIFwiLi9Qb2x5bGluZVBpcGVsaW5lLmpzXCI7XG5pbXBvcnQgUHJpbWl0aXZlVHlwZSBmcm9tIFwiLi9QcmltaXRpdmVUeXBlLmpzXCI7XG5pbXBvcnQgVmVydGV4Rm9ybWF0IGZyb20gXCIuL1ZlcnRleEZvcm1hdC5qc1wiO1xuXG52YXIgc2NyYXRjaEludGVycG9sYXRlQ29sb3JzQXJyYXkgPSBbXTtcblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVDb2xvcnMocDAsIHAxLCBjb2xvcjAsIGNvbG9yMSwgbnVtUG9pbnRzKSB7XG4gIHZhciBjb2xvcnMgPSBzY3JhdGNoSW50ZXJwb2xhdGVDb2xvcnNBcnJheTtcbiAgY29sb3JzLmxlbmd0aCA9IG51bVBvaW50cztcbiAgdmFyIGk7XG5cbiAgdmFyIHIwID0gY29sb3IwLnJlZDtcbiAgdmFyIGcwID0gY29sb3IwLmdyZWVuO1xuICB2YXIgYjAgPSBjb2xvcjAuYmx1ZTtcbiAgdmFyIGEwID0gY29sb3IwLmFscGhhO1xuXG4gIHZhciByMSA9IGNvbG9yMS5yZWQ7XG4gIHZhciBnMSA9IGNvbG9yMS5ncmVlbjtcbiAgdmFyIGIxID0gY29sb3IxLmJsdWU7XG4gIHZhciBhMSA9IGNvbG9yMS5hbHBoYTtcblxuICBpZiAoQ29sb3IuZXF1YWxzKGNvbG9yMCwgY29sb3IxKSkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBudW1Qb2ludHM7IGkrKykge1xuICAgICAgY29sb3JzW2ldID0gQ29sb3IuY2xvbmUoY29sb3IwKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbG9ycztcbiAgfVxuXG4gIHZhciByZWRQZXJWZXJ0ZXggPSAocjEgLSByMCkgLyBudW1Qb2ludHM7XG4gIHZhciBncmVlblBlclZlcnRleCA9IChnMSAtIGcwKSAvIG51bVBvaW50cztcbiAgdmFyIGJsdWVQZXJWZXJ0ZXggPSAoYjEgLSBiMCkgLyBudW1Qb2ludHM7XG4gIHZhciBhbHBoYVBlclZlcnRleCA9IChhMSAtIGEwKSAvIG51bVBvaW50cztcblxuICBmb3IgKGkgPSAwOyBpIDwgbnVtUG9pbnRzOyBpKyspIHtcbiAgICBjb2xvcnNbaV0gPSBuZXcgQ29sb3IoXG4gICAgICByMCArIGkgKiByZWRQZXJWZXJ0ZXgsXG4gICAgICBnMCArIGkgKiBncmVlblBlclZlcnRleCxcbiAgICAgIGIwICsgaSAqIGJsdWVQZXJWZXJ0ZXgsXG4gICAgICBhMCArIGkgKiBhbHBoYVBlclZlcnRleFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gY29sb3JzO1xufVxuXG4vKipcbiAqIEEgZGVzY3JpcHRpb24gb2YgYSBwb2x5bGluZSBtb2RlbGVkIGFzIGEgbGluZSBzdHJpcDsgdGhlIGZpcnN0IHR3byBwb3NpdGlvbnMgZGVmaW5lIGEgbGluZSBzZWdtZW50LFxuICogYW5kIGVhY2ggYWRkaXRpb25hbCBwb3NpdGlvbiBkZWZpbmVzIGEgbGluZSBzZWdtZW50IGZyb20gdGhlIHByZXZpb3VzIHBvc2l0aW9uLiBUaGUgcG9seWxpbmUgaXMgY2FwYWJsZSBvZlxuICogZGlzcGxheWluZyB3aXRoIGEgbWF0ZXJpYWwuXG4gKlxuICogQGFsaWFzIFBvbHlsaW5lR2VvbWV0cnlcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM1tdfSBvcHRpb25zLnBvc2l0aW9ucyBBbiBhcnJheSBvZiB7QGxpbmsgQ2FydGVzaWFuM30gZGVmaW5pbmcgdGhlIHBvc2l0aW9ucyBpbiB0aGUgcG9seWxpbmUgYXMgYSBsaW5lIHN0cmlwLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLndpZHRoPTEuMF0gVGhlIHdpZHRoIGluIHBpeGVscy5cbiAqIEBwYXJhbSB7Q29sb3JbXX0gW29wdGlvbnMuY29sb3JzXSBBbiBBcnJheSBvZiB7QGxpbmsgQ29sb3J9IGRlZmluaW5nIHRoZSBwZXIgdmVydGV4IG9yIHBlciBzZWdtZW50IGNvbG9ycy5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY29sb3JzUGVyVmVydGV4PWZhbHNlXSBBIGJvb2xlYW4gdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNvbG9ycyB3aWxsIGJlIGZsYXQgYWNyb3NzIGVhY2ggc2VnbWVudCBvZiB0aGUgbGluZSBvciBpbnRlcnBvbGF0ZWQgYWNyb3NzIHRoZSB2ZXJ0aWNlcy5cbiAqIEBwYXJhbSB7QXJjVHlwZX0gW29wdGlvbnMuYXJjVHlwZT1BcmNUeXBlLkdFT0RFU0lDXSBUaGUgdHlwZSBvZiBsaW5lIHRoZSBwb2x5bGluZSBzZWdtZW50cyBtdXN0IGZvbGxvdy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5ncmFudWxhcml0eT1DZXNpdW1NYXRoLlJBRElBTlNfUEVSX0RFR1JFRV0gVGhlIGRpc3RhbmNlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIGVhY2ggbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBpZiBvcHRpb25zLmFyY1R5cGUgaXMgbm90IEFyY1R5cGUuTk9ORS4gRGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIHBvc2l0aW9ucyBpbiB0aGUgYnVmZmVyLlxuICogQHBhcmFtIHtWZXJ0ZXhGb3JtYXR9IFtvcHRpb25zLnZlcnRleEZvcm1hdD1WZXJ0ZXhGb3JtYXQuREVGQVVMVF0gVGhlIHZlcnRleCBhdHRyaWJ1dGVzIHRvIGJlIGNvbXB1dGVkLlxuICogQHBhcmFtIHtFbGxpcHNvaWR9IFtvcHRpb25zLmVsbGlwc29pZD1FbGxpcHNvaWQuV0dTODRdIFRoZSBlbGxpcHNvaWQgdG8gYmUgdXNlZCBhcyBhIHJlZmVyZW5jZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gQXQgbGVhc3QgdHdvIHBvc2l0aW9ucyBhcmUgcmVxdWlyZWQuXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gd2lkdGggbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gb25lLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IGNvbG9ycyBoYXMgYW4gaW52YWxpZCBsZW5ndGguXG4gKlxuICogQHNlZSBQb2x5bGluZUdlb21ldHJ5I2NyZWF0ZUdlb21ldHJ5XG4gKlxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPVBvbHlsaW5lLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgUG9seWxpbmUgRGVtb31cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQSBwb2x5bGluZSB3aXRoIHR3byBjb25uZWN0ZWQgbGluZSBzZWdtZW50c1xuICogdmFyIHBvbHlsaW5lID0gbmV3IENlc2l1bS5Qb2x5bGluZUdlb21ldHJ5KHtcbiAqICAgcG9zaXRpb25zIDogQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXNBcnJheShbXG4gKiAgICAgMC4wLCAwLjAsXG4gKiAgICAgNS4wLCAwLjAsXG4gKiAgICAgNS4wLCA1LjBcbiAqICAgXSksXG4gKiAgIHdpZHRoIDogMTAuMFxuICogfSk7XG4gKiB2YXIgZ2VvbWV0cnkgPSBDZXNpdW0uUG9seWxpbmVHZW9tZXRyeS5jcmVhdGVHZW9tZXRyeShwb2x5bGluZSk7XG4gKi9cbmZ1bmN0aW9uIFBvbHlsaW5lR2VvbWV0cnkob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgcG9zaXRpb25zID0gb3B0aW9ucy5wb3NpdGlvbnM7XG4gIHZhciBjb2xvcnMgPSBvcHRpb25zLmNvbG9ycztcbiAgdmFyIHdpZHRoID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMud2lkdGgsIDEuMCk7XG4gIHZhciBjb2xvcnNQZXJWZXJ0ZXggPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5jb2xvcnNQZXJWZXJ0ZXgsIGZhbHNlKTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQocG9zaXRpb25zKSB8fCBwb3NpdGlvbnMubGVuZ3RoIDwgMikge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIkF0IGxlYXN0IHR3byBwb3NpdGlvbnMgYXJlIHJlcXVpcmVkLlwiKTtcbiAgfVxuICBpZiAodHlwZW9mIHdpZHRoICE9PSBcIm51bWJlclwiKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwid2lkdGggbXVzdCBiZSBhIG51bWJlclwiKTtcbiAgfVxuICBpZiAoXG4gICAgZGVmaW5lZChjb2xvcnMpICYmXG4gICAgKChjb2xvcnNQZXJWZXJ0ZXggJiYgY29sb3JzLmxlbmd0aCA8IHBvc2l0aW9ucy5sZW5ndGgpIHx8XG4gICAgICAoIWNvbG9yc1BlclZlcnRleCAmJiBjb2xvcnMubGVuZ3RoIDwgcG9zaXRpb25zLmxlbmd0aCAtIDEpKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJjb2xvcnMgaGFzIGFuIGludmFsaWQgbGVuZ3RoLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLl9wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG4gIHRoaXMuX2NvbG9ycyA9IGNvbG9ycztcbiAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgdGhpcy5fY29sb3JzUGVyVmVydGV4ID0gY29sb3JzUGVyVmVydGV4O1xuICB0aGlzLl92ZXJ0ZXhGb3JtYXQgPSBWZXJ0ZXhGb3JtYXQuY2xvbmUoXG4gICAgZGVmYXVsdFZhbHVlKG9wdGlvbnMudmVydGV4Rm9ybWF0LCBWZXJ0ZXhGb3JtYXQuREVGQVVMVClcbiAgKTtcblxuICB0aGlzLl9hcmNUeXBlID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuYXJjVHlwZSwgQXJjVHlwZS5HRU9ERVNJQyk7XG4gIHRoaXMuX2dyYW51bGFyaXR5ID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZ3JhbnVsYXJpdHksXG4gICAgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVcbiAgKTtcbiAgdGhpcy5fZWxsaXBzb2lkID0gRWxsaXBzb2lkLmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLmVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KVxuICApO1xuICB0aGlzLl93b3JrZXJOYW1lID0gXCJjcmVhdGVQb2x5bGluZUdlb21ldHJ5XCI7XG5cbiAgdmFyIG51bUNvbXBvbmVudHMgPSAxICsgcG9zaXRpb25zLmxlbmd0aCAqIENhcnRlc2lhbjMucGFja2VkTGVuZ3RoO1xuICBudW1Db21wb25lbnRzICs9IGRlZmluZWQoY29sb3JzKSA/IDEgKyBjb2xvcnMubGVuZ3RoICogQ29sb3IucGFja2VkTGVuZ3RoIDogMTtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBlbGVtZW50cyB1c2VkIHRvIHBhY2sgdGhlIG9iamVjdCBpbnRvIGFuIGFycmF5LlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgdGhpcy5wYWNrZWRMZW5ndGggPVxuICAgIG51bUNvbXBvbmVudHMgKyBFbGxpcHNvaWQucGFja2VkTGVuZ3RoICsgVmVydGV4Rm9ybWF0LnBhY2tlZExlbmd0aCArIDQ7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBwcm92aWRlZCBpbnN0YW5jZSBpbnRvIHRoZSBwcm92aWRlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlsaW5lR2VvbWV0cnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYWNrLlxuICogQHBhcmFtIHtOdW1iZXJbXX0gYXJyYXkgVGhlIGFycmF5IHRvIHBhY2sgaW50by5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRpbmdJbmRleD0wXSBUaGUgaW5kZXggaW50byB0aGUgYXJyYXkgYXQgd2hpY2ggdG8gc3RhcnQgcGFja2luZyB0aGUgZWxlbWVudHMuXG4gKlxuICogQHJldHVybnMge051bWJlcltdfSBUaGUgYXJyYXkgdGhhdCB3YXMgcGFja2VkIGludG9cbiAqL1xuUG9seWxpbmVHZW9tZXRyeS5wYWNrID0gZnVuY3Rpb24gKHZhbHVlLCBhcnJheSwgc3RhcnRpbmdJbmRleCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKGFycmF5KSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImFycmF5IGlzIHJlcXVpcmVkXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHN0YXJ0aW5nSW5kZXggPSBkZWZhdWx0VmFsdWUoc3RhcnRpbmdJbmRleCwgMCk7XG5cbiAgdmFyIGk7XG5cbiAgdmFyIHBvc2l0aW9ucyA9IHZhbHVlLl9wb3NpdGlvbnM7XG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICBhcnJheVtzdGFydGluZ0luZGV4KytdID0gbGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSwgc3RhcnRpbmdJbmRleCArPSBDYXJ0ZXNpYW4zLnBhY2tlZExlbmd0aCkge1xuICAgIENhcnRlc2lhbjMucGFjayhwb3NpdGlvbnNbaV0sIGFycmF5LCBzdGFydGluZ0luZGV4KTtcbiAgfVxuXG4gIHZhciBjb2xvcnMgPSB2YWx1ZS5fY29sb3JzO1xuICBsZW5ndGggPSBkZWZpbmVkKGNvbG9ycykgPyBjb2xvcnMubGVuZ3RoIDogMC4wO1xuICBhcnJheVtzdGFydGluZ0luZGV4KytdID0gbGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSwgc3RhcnRpbmdJbmRleCArPSBDb2xvci5wYWNrZWRMZW5ndGgpIHtcbiAgICBDb2xvci5wYWNrKGNvbG9yc1tpXSwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICB9XG5cbiAgRWxsaXBzb2lkLnBhY2sodmFsdWUuX2VsbGlwc29pZCwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICBzdGFydGluZ0luZGV4ICs9IEVsbGlwc29pZC5wYWNrZWRMZW5ndGg7XG5cbiAgVmVydGV4Rm9ybWF0LnBhY2sodmFsdWUuX3ZlcnRleEZvcm1hdCwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICBzdGFydGluZ0luZGV4ICs9IFZlcnRleEZvcm1hdC5wYWNrZWRMZW5ndGg7XG5cbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl93aWR0aDtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IHZhbHVlLl9jb2xvcnNQZXJWZXJ0ZXggPyAxLjAgOiAwLjA7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fYXJjVHlwZTtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleF0gPSB2YWx1ZS5fZ3JhbnVsYXJpdHk7XG5cbiAgcmV0dXJuIGFycmF5O1xufTtcblxudmFyIHNjcmF0Y2hFbGxpcHNvaWQgPSBFbGxpcHNvaWQuY2xvbmUoRWxsaXBzb2lkLlVOSVRfU1BIRVJFKTtcbnZhciBzY3JhdGNoVmVydGV4Rm9ybWF0ID0gbmV3IFZlcnRleEZvcm1hdCgpO1xudmFyIHNjcmF0Y2hPcHRpb25zID0ge1xuICBwb3NpdGlvbnM6IHVuZGVmaW5lZCxcbiAgY29sb3JzOiB1bmRlZmluZWQsXG4gIGVsbGlwc29pZDogc2NyYXRjaEVsbGlwc29pZCxcbiAgdmVydGV4Rm9ybWF0OiBzY3JhdGNoVmVydGV4Rm9ybWF0LFxuICB3aWR0aDogdW5kZWZpbmVkLFxuICBjb2xvcnNQZXJWZXJ0ZXg6IHVuZGVmaW5lZCxcbiAgYXJjVHlwZTogdW5kZWZpbmVkLFxuICBncmFudWxhcml0eTogdW5kZWZpbmVkLFxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgYW4gaW5zdGFuY2UgZnJvbSBhIHBhY2tlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcltdfSBhcnJheSBUaGUgcGFja2VkIGFycmF5LlxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydGluZ0luZGV4PTBdIFRoZSBzdGFydGluZyBpbmRleCBvZiB0aGUgZWxlbWVudCB0byBiZSB1bnBhY2tlZC5cbiAqIEBwYXJhbSB7UG9seWxpbmVHZW9tZXRyeX0gW3Jlc3VsdF0gVGhlIG9iamVjdCBpbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7UG9seWxpbmVHZW9tZXRyeX0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgUG9seWxpbmVHZW9tZXRyeSBpbnN0YW5jZSBpZiBvbmUgd2FzIG5vdCBwcm92aWRlZC5cbiAqL1xuUG9seWxpbmVHZW9tZXRyeS51bnBhY2sgPSBmdW5jdGlvbiAoYXJyYXksIHN0YXJ0aW5nSW5kZXgsIHJlc3VsdCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoYXJyYXkpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiYXJyYXkgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgc3RhcnRpbmdJbmRleCA9IGRlZmF1bHRWYWx1ZShzdGFydGluZ0luZGV4LCAwKTtcblxuICB2YXIgaTtcblxuICB2YXIgbGVuZ3RoID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIHBvc2l0aW9ucyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSwgc3RhcnRpbmdJbmRleCArPSBDYXJ0ZXNpYW4zLnBhY2tlZExlbmd0aCkge1xuICAgIHBvc2l0aW9uc1tpXSA9IENhcnRlc2lhbjMudW5wYWNrKGFycmF5LCBzdGFydGluZ0luZGV4KTtcbiAgfVxuXG4gIGxlbmd0aCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBjb2xvcnMgPSBsZW5ndGggPiAwID8gbmV3IEFycmF5KGxlbmd0aCkgOiB1bmRlZmluZWQ7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpLCBzdGFydGluZ0luZGV4ICs9IENvbG9yLnBhY2tlZExlbmd0aCkge1xuICAgIGNvbG9yc1tpXSA9IENvbG9yLnVucGFjayhhcnJheSwgc3RhcnRpbmdJbmRleCk7XG4gIH1cblxuICB2YXIgZWxsaXBzb2lkID0gRWxsaXBzb2lkLnVucGFjayhhcnJheSwgc3RhcnRpbmdJbmRleCwgc2NyYXRjaEVsbGlwc29pZCk7XG4gIHN0YXJ0aW5nSW5kZXggKz0gRWxsaXBzb2lkLnBhY2tlZExlbmd0aDtcblxuICB2YXIgdmVydGV4Rm9ybWF0ID0gVmVydGV4Rm9ybWF0LnVucGFjayhcbiAgICBhcnJheSxcbiAgICBzdGFydGluZ0luZGV4LFxuICAgIHNjcmF0Y2hWZXJ0ZXhGb3JtYXRcbiAgKTtcbiAgc3RhcnRpbmdJbmRleCArPSBWZXJ0ZXhGb3JtYXQucGFja2VkTGVuZ3RoO1xuXG4gIHZhciB3aWR0aCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBjb2xvcnNQZXJWZXJ0ZXggPSBhcnJheVtzdGFydGluZ0luZGV4KytdID09PSAxLjA7XG4gIHZhciBhcmNUeXBlID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIGdyYW51bGFyaXR5ID0gYXJyYXlbc3RhcnRpbmdJbmRleF07XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICBzY3JhdGNoT3B0aW9ucy5wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG4gICAgc2NyYXRjaE9wdGlvbnMuY29sb3JzID0gY29sb3JzO1xuICAgIHNjcmF0Y2hPcHRpb25zLndpZHRoID0gd2lkdGg7XG4gICAgc2NyYXRjaE9wdGlvbnMuY29sb3JzUGVyVmVydGV4ID0gY29sb3JzUGVyVmVydGV4O1xuICAgIHNjcmF0Y2hPcHRpb25zLmFyY1R5cGUgPSBhcmNUeXBlO1xuICAgIHNjcmF0Y2hPcHRpb25zLmdyYW51bGFyaXR5ID0gZ3JhbnVsYXJpdHk7XG4gICAgcmV0dXJuIG5ldyBQb2x5bGluZUdlb21ldHJ5KHNjcmF0Y2hPcHRpb25zKTtcbiAgfVxuXG4gIHJlc3VsdC5fcG9zaXRpb25zID0gcG9zaXRpb25zO1xuICByZXN1bHQuX2NvbG9ycyA9IGNvbG9ycztcbiAgcmVzdWx0Ll9lbGxpcHNvaWQgPSBFbGxpcHNvaWQuY2xvbmUoZWxsaXBzb2lkLCByZXN1bHQuX2VsbGlwc29pZCk7XG4gIHJlc3VsdC5fdmVydGV4Rm9ybWF0ID0gVmVydGV4Rm9ybWF0LmNsb25lKHZlcnRleEZvcm1hdCwgcmVzdWx0Ll92ZXJ0ZXhGb3JtYXQpO1xuICByZXN1bHQuX3dpZHRoID0gd2lkdGg7XG4gIHJlc3VsdC5fY29sb3JzUGVyVmVydGV4ID0gY29sb3JzUGVyVmVydGV4O1xuICByZXN1bHQuX2FyY1R5cGUgPSBhcmNUeXBlO1xuICByZXN1bHQuX2dyYW51bGFyaXR5ID0gZ3JhbnVsYXJpdHk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBzY3JhdGNoQ2FydGVzaWFuMyA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaFBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoUHJldlBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoTmV4dFBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZ2VvbWV0cmljIHJlcHJlc2VudGF0aW9uIG9mIGEgcG9seWxpbmUsIGluY2x1ZGluZyBpdHMgdmVydGljZXMsIGluZGljZXMsIGFuZCBhIGJvdW5kaW5nIHNwaGVyZS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlsaW5lR2VvbWV0cnl9IHBvbHlsaW5lR2VvbWV0cnkgQSBkZXNjcmlwdGlvbiBvZiB0aGUgcG9seWxpbmUuXG4gKiBAcmV0dXJucyB7R2VvbWV0cnl8dW5kZWZpbmVkfSBUaGUgY29tcHV0ZWQgdmVydGljZXMgYW5kIGluZGljZXMuXG4gKi9cblBvbHlsaW5lR2VvbWV0cnkuY3JlYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiAocG9seWxpbmVHZW9tZXRyeSkge1xuICB2YXIgd2lkdGggPSBwb2x5bGluZUdlb21ldHJ5Ll93aWR0aDtcbiAgdmFyIHZlcnRleEZvcm1hdCA9IHBvbHlsaW5lR2VvbWV0cnkuX3ZlcnRleEZvcm1hdDtcbiAgdmFyIGNvbG9ycyA9IHBvbHlsaW5lR2VvbWV0cnkuX2NvbG9ycztcbiAgdmFyIGNvbG9yc1BlclZlcnRleCA9IHBvbHlsaW5lR2VvbWV0cnkuX2NvbG9yc1BlclZlcnRleDtcbiAgdmFyIGFyY1R5cGUgPSBwb2x5bGluZUdlb21ldHJ5Ll9hcmNUeXBlO1xuICB2YXIgZ3JhbnVsYXJpdHkgPSBwb2x5bGluZUdlb21ldHJ5Ll9ncmFudWxhcml0eTtcbiAgdmFyIGVsbGlwc29pZCA9IHBvbHlsaW5lR2VvbWV0cnkuX2VsbGlwc29pZDtcblxuICB2YXIgaTtcbiAgdmFyIGo7XG4gIHZhciBrO1xuXG4gIHZhciByZW1vdmVkSW5kaWNlcyA9IFtdO1xuICB2YXIgcG9zaXRpb25zID0gYXJyYXlSZW1vdmVEdXBsaWNhdGVzKFxuICAgIHBvbHlsaW5lR2VvbWV0cnkuX3Bvc2l0aW9ucyxcbiAgICBDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb24sXG4gICAgZmFsc2UsXG4gICAgcmVtb3ZlZEluZGljZXNcbiAgKTtcblxuICBpZiAoZGVmaW5lZChjb2xvcnMpICYmIHJlbW92ZWRJbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgcmVtb3ZlZEFycmF5SW5kZXggPSAwO1xuICAgIHZhciBuZXh0UmVtb3ZlZEluZGV4ID0gcmVtb3ZlZEluZGljZXNbMF07XG4gICAgY29sb3JzID0gY29sb3JzLmZpbHRlcihmdW5jdGlvbiAoY29sb3IsIGluZGV4KSB7XG4gICAgICB2YXIgcmVtb3ZlID0gZmFsc2U7XG4gICAgICBpZiAoY29sb3JzUGVyVmVydGV4KSB7XG4gICAgICAgIHJlbW92ZSA9XG4gICAgICAgICAgaW5kZXggPT09IG5leHRSZW1vdmVkSW5kZXggfHwgKGluZGV4ID09PSAwICYmIG5leHRSZW1vdmVkSW5kZXggPT09IDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVtb3ZlID0gaW5kZXggKyAxID09PSBuZXh0UmVtb3ZlZEluZGV4O1xuICAgICAgfVxuXG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIHJlbW92ZWRBcnJheUluZGV4Kys7XG4gICAgICAgIG5leHRSZW1vdmVkSW5kZXggPSByZW1vdmVkSW5kaWNlc1tyZW1vdmVkQXJyYXlJbmRleF07XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIHBvc2l0aW9uc0xlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG5cbiAgLy8gQSB3aWR0aCBvZiBhIHBpeGVsIG9yIGxlc3MgaXMgbm90IGEgdmFsaWQgZ2VvbWV0cnksIGJ1dCBpbiBvcmRlciB0byBzdXBwb3J0IGV4dGVybmFsIGRhdGFcbiAgLy8gdGhhdCBtYXkgaGF2ZSBlcnJvcnMgd2UgdHJlYXQgdGhpcyBhcyBhbiBlbXB0eSBnZW9tZXRyeS5cbiAgaWYgKHBvc2l0aW9uc0xlbmd0aCA8IDIgfHwgd2lkdGggPD0gMC4wKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDIHx8IGFyY1R5cGUgPT09IEFyY1R5cGUuUkhVTUIpIHtcbiAgICB2YXIgc3ViZGl2aXNpb25TaXplO1xuICAgIHZhciBudW1iZXJPZlBvaW50c0Z1bmN0aW9uO1xuICAgIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDKSB7XG4gICAgICBzdWJkaXZpc2lvblNpemUgPSBDZXNpdW1NYXRoLmNob3JkTGVuZ3RoKFxuICAgICAgICBncmFudWxhcml0eSxcbiAgICAgICAgZWxsaXBzb2lkLm1heGltdW1SYWRpdXNcbiAgICAgICk7XG4gICAgICBudW1iZXJPZlBvaW50c0Z1bmN0aW9uID0gUG9seWxpbmVQaXBlbGluZS5udW1iZXJPZlBvaW50cztcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViZGl2aXNpb25TaXplID0gZ3JhbnVsYXJpdHk7XG4gICAgICBudW1iZXJPZlBvaW50c0Z1bmN0aW9uID0gUG9seWxpbmVQaXBlbGluZS5udW1iZXJPZlBvaW50c1JodW1iTGluZTtcbiAgICB9XG5cbiAgICB2YXIgaGVpZ2h0cyA9IFBvbHlsaW5lUGlwZWxpbmUuZXh0cmFjdEhlaWdodHMocG9zaXRpb25zLCBlbGxpcHNvaWQpO1xuXG4gICAgaWYgKGRlZmluZWQoY29sb3JzKSkge1xuICAgICAgdmFyIGNvbG9yTGVuZ3RoID0gMTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBwb3NpdGlvbnNMZW5ndGggLSAxOyArK2kpIHtcbiAgICAgICAgY29sb3JMZW5ndGggKz0gbnVtYmVyT2ZQb2ludHNGdW5jdGlvbihcbiAgICAgICAgICBwb3NpdGlvbnNbaV0sXG4gICAgICAgICAgcG9zaXRpb25zW2kgKyAxXSxcbiAgICAgICAgICBzdWJkaXZpc2lvblNpemVcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld0NvbG9ycyA9IG5ldyBBcnJheShjb2xvckxlbmd0aCk7XG4gICAgICB2YXIgbmV3Q29sb3JJbmRleCA9IDA7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBwb3NpdGlvbnNMZW5ndGggLSAxOyArK2kpIHtcbiAgICAgICAgdmFyIHAwID0gcG9zaXRpb25zW2ldO1xuICAgICAgICB2YXIgcDEgPSBwb3NpdGlvbnNbaSArIDFdO1xuICAgICAgICB2YXIgYzAgPSBjb2xvcnNbaV07XG5cbiAgICAgICAgdmFyIG51bUNvbG9ycyA9IG51bWJlck9mUG9pbnRzRnVuY3Rpb24ocDAsIHAxLCBzdWJkaXZpc2lvblNpemUpO1xuICAgICAgICBpZiAoY29sb3JzUGVyVmVydGV4ICYmIGkgPCBjb2xvckxlbmd0aCkge1xuICAgICAgICAgIHZhciBjMSA9IGNvbG9yc1tpICsgMV07XG4gICAgICAgICAgdmFyIGludGVycG9sYXRlZENvbG9ycyA9IGludGVycG9sYXRlQ29sb3JzKHAwLCBwMSwgYzAsIGMxLCBudW1Db2xvcnMpO1xuICAgICAgICAgIHZhciBpbnRlcnBvbGF0ZWRDb2xvcnNMZW5ndGggPSBpbnRlcnBvbGF0ZWRDb2xvcnMubGVuZ3RoO1xuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBpbnRlcnBvbGF0ZWRDb2xvcnNMZW5ndGg7ICsraikge1xuICAgICAgICAgICAgbmV3Q29sb3JzW25ld0NvbG9ySW5kZXgrK10gPSBpbnRlcnBvbGF0ZWRDb2xvcnNbal07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBudW1Db2xvcnM7ICsraikge1xuICAgICAgICAgICAgbmV3Q29sb3JzW25ld0NvbG9ySW5kZXgrK10gPSBDb2xvci5jbG9uZShjMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5ld0NvbG9yc1tuZXdDb2xvckluZGV4XSA9IENvbG9yLmNsb25lKGNvbG9yc1tjb2xvcnMubGVuZ3RoIC0gMV0pO1xuICAgICAgY29sb3JzID0gbmV3Q29sb3JzO1xuXG4gICAgICBzY3JhdGNoSW50ZXJwb2xhdGVDb2xvcnNBcnJheS5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLkdFT0RFU0lDKSB7XG4gICAgICBwb3NpdGlvbnMgPSBQb2x5bGluZVBpcGVsaW5lLmdlbmVyYXRlQ2FydGVzaWFuQXJjKHtcbiAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnMsXG4gICAgICAgIG1pbkRpc3RhbmNlOiBzdWJkaXZpc2lvblNpemUsXG4gICAgICAgIGVsbGlwc29pZDogZWxsaXBzb2lkLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodHMsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9zaXRpb25zID0gUG9seWxpbmVQaXBlbGluZS5nZW5lcmF0ZUNhcnRlc2lhblJodW1iQXJjKHtcbiAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnMsXG4gICAgICAgIGdyYW51bGFyaXR5OiBzdWJkaXZpc2lvblNpemUsXG4gICAgICAgIGVsbGlwc29pZDogZWxsaXBzb2lkLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodHMsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwb3NpdGlvbnNMZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgc2l6ZSA9IHBvc2l0aW9uc0xlbmd0aCAqIDQuMCAtIDQuMDtcblxuICB2YXIgZmluYWxQb3NpdGlvbnMgPSBuZXcgRmxvYXQ2NEFycmF5KHNpemUgKiAzKTtcbiAgdmFyIHByZXZQb3NpdGlvbnMgPSBuZXcgRmxvYXQ2NEFycmF5KHNpemUgKiAzKTtcbiAgdmFyIG5leHRQb3NpdGlvbnMgPSBuZXcgRmxvYXQ2NEFycmF5KHNpemUgKiAzKTtcbiAgdmFyIGV4cGFuZEFuZFdpZHRoID0gbmV3IEZsb2F0MzJBcnJheShzaXplICogMik7XG4gIHZhciBzdCA9IHZlcnRleEZvcm1hdC5zdCA/IG5ldyBGbG9hdDMyQXJyYXkoc2l6ZSAqIDIpIDogdW5kZWZpbmVkO1xuICB2YXIgZmluYWxDb2xvcnMgPSBkZWZpbmVkKGNvbG9ycykgPyBuZXcgVWludDhBcnJheShzaXplICogNCkgOiB1bmRlZmluZWQ7XG5cbiAgdmFyIHBvc2l0aW9uSW5kZXggPSAwO1xuICB2YXIgZXhwYW5kQW5kV2lkdGhJbmRleCA9IDA7XG4gIHZhciBzdEluZGV4ID0gMDtcbiAgdmFyIGNvbG9ySW5kZXggPSAwO1xuICB2YXIgcG9zaXRpb247XG5cbiAgZm9yIChqID0gMDsgaiA8IHBvc2l0aW9uc0xlbmd0aDsgKytqKSB7XG4gICAgaWYgKGogPT09IDApIHtcbiAgICAgIHBvc2l0aW9uID0gc2NyYXRjaENhcnRlc2lhbjM7XG4gICAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHBvc2l0aW9uc1swXSwgcG9zaXRpb25zWzFdLCBwb3NpdGlvbik7XG4gICAgICBDYXJ0ZXNpYW4zLmFkZChwb3NpdGlvbnNbMF0sIHBvc2l0aW9uLCBwb3NpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc2l0aW9uID0gcG9zaXRpb25zW2ogLSAxXTtcbiAgICB9XG5cbiAgICBDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uLCBzY3JhdGNoUHJldlBvc2l0aW9uKTtcbiAgICBDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uc1tqXSwgc2NyYXRjaFBvc2l0aW9uKTtcblxuICAgIGlmIChqID09PSBwb3NpdGlvbnNMZW5ndGggLSAxKSB7XG4gICAgICBwb3NpdGlvbiA9IHNjcmF0Y2hDYXJ0ZXNpYW4zO1xuICAgICAgQ2FydGVzaWFuMy5zdWJ0cmFjdChcbiAgICAgICAgcG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDFdLFxuICAgICAgICBwb3NpdGlvbnNbcG9zaXRpb25zTGVuZ3RoIC0gMl0sXG4gICAgICAgIHBvc2l0aW9uXG4gICAgICApO1xuICAgICAgQ2FydGVzaWFuMy5hZGQocG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDFdLCBwb3NpdGlvbiwgcG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uc1tqICsgMV07XG4gICAgfVxuXG4gICAgQ2FydGVzaWFuMy5jbG9uZShwb3NpdGlvbiwgc2NyYXRjaE5leHRQb3NpdGlvbik7XG5cbiAgICB2YXIgY29sb3IwLCBjb2xvcjE7XG4gICAgaWYgKGRlZmluZWQoZmluYWxDb2xvcnMpKSB7XG4gICAgICBpZiAoaiAhPT0gMCAmJiAhY29sb3JzUGVyVmVydGV4KSB7XG4gICAgICAgIGNvbG9yMCA9IGNvbG9yc1tqIC0gMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb2xvcjAgPSBjb2xvcnNbal07XG4gICAgICB9XG5cbiAgICAgIGlmIChqICE9PSBwb3NpdGlvbnNMZW5ndGggLSAxKSB7XG4gICAgICAgIGNvbG9yMSA9IGNvbG9yc1tqXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc3RhcnRLID0gaiA9PT0gMCA/IDIgOiAwO1xuICAgIHZhciBlbmRLID0gaiA9PT0gcG9zaXRpb25zTGVuZ3RoIC0gMSA/IDIgOiA0O1xuXG4gICAgZm9yIChrID0gc3RhcnRLOyBrIDwgZW5kSzsgKytrKSB7XG4gICAgICBDYXJ0ZXNpYW4zLnBhY2soc2NyYXRjaFBvc2l0aW9uLCBmaW5hbFBvc2l0aW9ucywgcG9zaXRpb25JbmRleCk7XG4gICAgICBDYXJ0ZXNpYW4zLnBhY2soc2NyYXRjaFByZXZQb3NpdGlvbiwgcHJldlBvc2l0aW9ucywgcG9zaXRpb25JbmRleCk7XG4gICAgICBDYXJ0ZXNpYW4zLnBhY2soc2NyYXRjaE5leHRQb3NpdGlvbiwgbmV4dFBvc2l0aW9ucywgcG9zaXRpb25JbmRleCk7XG4gICAgICBwb3NpdGlvbkluZGV4ICs9IDM7XG5cbiAgICAgIHZhciBkaXJlY3Rpb24gPSBrIC0gMiA8IDAgPyAtMS4wIDogMS4wO1xuICAgICAgZXhwYW5kQW5kV2lkdGhbZXhwYW5kQW5kV2lkdGhJbmRleCsrXSA9IDIgKiAoayAlIDIpIC0gMTsgLy8gZXhwYW5kIGRpcmVjdGlvblxuICAgICAgZXhwYW5kQW5kV2lkdGhbZXhwYW5kQW5kV2lkdGhJbmRleCsrXSA9IGRpcmVjdGlvbiAqIHdpZHRoO1xuXG4gICAgICBpZiAodmVydGV4Rm9ybWF0LnN0KSB7XG4gICAgICAgIHN0W3N0SW5kZXgrK10gPSBqIC8gKHBvc2l0aW9uc0xlbmd0aCAtIDEpO1xuICAgICAgICBzdFtzdEluZGV4KytdID0gTWF0aC5tYXgoZXhwYW5kQW5kV2lkdGhbZXhwYW5kQW5kV2lkdGhJbmRleCAtIDJdLCAwLjApO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVmaW5lZChmaW5hbENvbG9ycykpIHtcbiAgICAgICAgdmFyIGNvbG9yID0gayA8IDIgPyBjb2xvcjAgOiBjb2xvcjE7XG5cbiAgICAgICAgZmluYWxDb2xvcnNbY29sb3JJbmRleCsrXSA9IENvbG9yLmZsb2F0VG9CeXRlKGNvbG9yLnJlZCk7XG4gICAgICAgIGZpbmFsQ29sb3JzW2NvbG9ySW5kZXgrK10gPSBDb2xvci5mbG9hdFRvQnl0ZShjb2xvci5ncmVlbik7XG4gICAgICAgIGZpbmFsQ29sb3JzW2NvbG9ySW5kZXgrK10gPSBDb2xvci5mbG9hdFRvQnl0ZShjb2xvci5ibHVlKTtcbiAgICAgICAgZmluYWxDb2xvcnNbY29sb3JJbmRleCsrXSA9IENvbG9yLmZsb2F0VG9CeXRlKGNvbG9yLmFscGhhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgYXR0cmlidXRlcyA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZXMoKTtcblxuICBhdHRyaWJ1dGVzLnBvc2l0aW9uID0gbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRE9VQkxFLFxuICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgdmFsdWVzOiBmaW5hbFBvc2l0aW9ucyxcbiAgfSk7XG5cbiAgYXR0cmlidXRlcy5wcmV2UG9zaXRpb24gPSBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5ET1VCTEUsXG4gICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICB2YWx1ZXM6IHByZXZQb3NpdGlvbnMsXG4gIH0pO1xuXG4gIGF0dHJpYnV0ZXMubmV4dFBvc2l0aW9uID0gbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRE9VQkxFLFxuICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgdmFsdWVzOiBuZXh0UG9zaXRpb25zLFxuICB9KTtcblxuICBhdHRyaWJ1dGVzLmV4cGFuZEFuZFdpZHRoID0gbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMixcbiAgICB2YWx1ZXM6IGV4cGFuZEFuZFdpZHRoLFxuICB9KTtcblxuICBpZiAodmVydGV4Rm9ybWF0LnN0KSB7XG4gICAgYXR0cmlidXRlcy5zdCA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZSh7XG4gICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAyLFxuICAgICAgdmFsdWVzOiBzdCxcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKGZpbmFsQ29sb3JzKSkge1xuICAgIGF0dHJpYnV0ZXMuY29sb3IgPSBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxuICAgICAgdmFsdWVzOiBmaW5hbENvbG9ycyxcbiAgICAgIG5vcm1hbGl6ZTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBpbmRpY2VzID0gSW5kZXhEYXRhdHlwZS5jcmVhdGVUeXBlZEFycmF5KHNpemUsIHBvc2l0aW9uc0xlbmd0aCAqIDYgLSA2KTtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGluZGljZXNJbmRleCA9IDA7XG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnNMZW5ndGggLSAxLjA7XG4gIGZvciAoaiA9IDA7IGogPCBsZW5ndGg7ICsraikge1xuICAgIGluZGljZXNbaW5kaWNlc0luZGV4KytdID0gaW5kZXg7XG4gICAgaW5kaWNlc1tpbmRpY2VzSW5kZXgrK10gPSBpbmRleCArIDI7XG4gICAgaW5kaWNlc1tpbmRpY2VzSW5kZXgrK10gPSBpbmRleCArIDE7XG5cbiAgICBpbmRpY2VzW2luZGljZXNJbmRleCsrXSA9IGluZGV4ICsgMTtcbiAgICBpbmRpY2VzW2luZGljZXNJbmRleCsrXSA9IGluZGV4ICsgMjtcbiAgICBpbmRpY2VzW2luZGljZXNJbmRleCsrXSA9IGluZGV4ICsgMztcblxuICAgIGluZGV4ICs9IDQ7XG4gIH1cblxuICByZXR1cm4gbmV3IEdlb21ldHJ5KHtcbiAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgIGluZGljZXM6IGluZGljZXMsXG4gICAgcHJpbWl0aXZlVHlwZTogUHJpbWl0aXZlVHlwZS5UUklBTkdMRVMsXG4gICAgYm91bmRpbmdTcGhlcmU6IEJvdW5kaW5nU3BoZXJlLmZyb21Qb2ludHMocG9zaXRpb25zKSxcbiAgICBnZW9tZXRyeVR5cGU6IEdlb21ldHJ5VHlwZS5QT0xZTElORVMsXG4gIH0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IFBvbHlsaW5lR2VvbWV0cnk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///80593\n')},61733:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Cartographic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(51688);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50491);\n/* harmony import */ var _EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39043);\n/* harmony import */ var _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8398);\n/* harmony import */ var _IntersectionTests_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(67627);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99417);\n/* harmony import */ var _Matrix4_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(72248);\n/* harmony import */ var _Plane_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(7749);\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @private\n */\nvar PolylinePipeline = {};\n\nPolylinePipeline.numberOfPoints = function (p0, p1, minDistance) {\n  var distance = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].distance */ .Z.distance(p0, p1);\n  return Math.ceil(distance / minDistance);\n};\n\nPolylinePipeline.numberOfPointsRhumbLine = function (p0, p1, granularity) {\n  var radiansDistanceSquared =\n    Math.pow(p0.longitude - p1.longitude, 2) +\n    Math.pow(p0.latitude - p1.latitude, 2);\n\n  return Math.max(\n    1,\n    Math.ceil(Math.sqrt(radiansDistanceSquared / (granularity * granularity)))\n  );\n};\n\nvar cartoScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nPolylinePipeline.extractHeights = function (positions, ellipsoid) {\n  var length = positions.length;\n  var heights = new Array(length);\n  for (var i = 0; i < length; i++) {\n    var p = positions[i];\n    heights[i] = ellipsoid.cartesianToCartographic(p, cartoScratch).height;\n  }\n  return heights;\n};\n\nvar wrapLongitudeInversMatrix = new _Matrix4_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z();\nvar wrapLongitudeOrigin = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar wrapLongitudeXZNormal = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar wrapLongitudeXZPlane = new _Plane_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNIT_X */ .Z.UNIT_X, 0.0);\nvar wrapLongitudeYZNormal = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar wrapLongitudeYZPlane = new _Plane_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNIT_X */ .Z.UNIT_X, 0.0);\nvar wrapLongitudeIntersection = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar wrapLongitudeOffset = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\nvar subdivideHeightsScratchArray = [];\n\nfunction subdivideHeights(numPoints, h0, h1) {\n  var heights = subdivideHeightsScratchArray;\n  heights.length = numPoints;\n\n  var i;\n  if (h0 === h1) {\n    for (i = 0; i < numPoints; i++) {\n      heights[i] = h0;\n    }\n    return heights;\n  }\n\n  var dHeight = h1 - h0;\n  var heightPerVertex = dHeight / numPoints;\n\n  for (i = 0; i < numPoints; i++) {\n    var h = h0 + i * heightPerVertex;\n    heights[i] = h;\n  }\n\n  return heights;\n}\n\nvar carto1 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar carto2 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar cartesian = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar scaleFirst = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar scaleLast = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar ellipsoidGeodesic = new _EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar ellipsoidRhumb = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n\n//Returns subdivided line scaled to ellipsoid surface starting at p1 and ending at p2.\n//Result includes p1, but not include p2.  This function is called for a sequence of line segments,\n//and this prevents duplication of end point.\nfunction generateCartesianArc(\n  p0,\n  p1,\n  minDistance,\n  ellipsoid,\n  h0,\n  h1,\n  array,\n  offset\n) {\n  var first = ellipsoid.scaleToGeodeticSurface(p0, scaleFirst);\n  var last = ellipsoid.scaleToGeodeticSurface(p1, scaleLast);\n  var numPoints = PolylinePipeline.numberOfPoints(p0, p1, minDistance);\n  var start = ellipsoid.cartesianToCartographic(first, carto1);\n  var end = ellipsoid.cartesianToCartographic(last, carto2);\n  var heights = subdivideHeights(numPoints, h0, h1);\n\n  ellipsoidGeodesic.setEndPoints(start, end);\n  var surfaceDistanceBetweenPoints =\n    ellipsoidGeodesic.surfaceDistance / numPoints;\n\n  var index = offset;\n  start.height = h0;\n  var cart = ellipsoid.cartographicToCartesian(start, cartesian);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].pack */ .Z.pack(cart, array, index);\n  index += 3;\n\n  for (var i = 1; i < numPoints; i++) {\n    var carto = ellipsoidGeodesic.interpolateUsingSurfaceDistance(\n      i * surfaceDistanceBetweenPoints,\n      carto2\n    );\n    carto.height = heights[i];\n    cart = ellipsoid.cartographicToCartesian(carto, cartesian);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].pack */ .Z.pack(cart, array, index);\n    index += 3;\n  }\n\n  return index;\n}\n\n//Returns subdivided line scaled to ellipsoid surface starting at p1 and ending at p2.\n//Result includes p1, but not include p2.  This function is called for a sequence of line segments,\n//and this prevents duplication of end point.\nfunction generateCartesianRhumbArc(\n  p0,\n  p1,\n  granularity,\n  ellipsoid,\n  h0,\n  h1,\n  array,\n  offset\n) {\n  var start = ellipsoid.cartesianToCartographic(p0, carto1);\n  var end = ellipsoid.cartesianToCartographic(p1, carto2);\n  var numPoints = PolylinePipeline.numberOfPointsRhumbLine(\n    start,\n    end,\n    granularity\n  );\n  start.height = 0.0;\n  end.height = 0.0;\n  var heights = subdivideHeights(numPoints, h0, h1);\n\n  if (!ellipsoidRhumb.ellipsoid.equals(ellipsoid)) {\n    ellipsoidRhumb = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(undefined, undefined, ellipsoid);\n  }\n  ellipsoidRhumb.setEndPoints(start, end);\n  var surfaceDistanceBetweenPoints = ellipsoidRhumb.surfaceDistance / numPoints;\n\n  var index = offset;\n  start.height = h0;\n  var cart = ellipsoid.cartographicToCartesian(start, cartesian);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].pack */ .Z.pack(cart, array, index);\n  index += 3;\n\n  for (var i = 1; i < numPoints; i++) {\n    var carto = ellipsoidRhumb.interpolateUsingSurfaceDistance(\n      i * surfaceDistanceBetweenPoints,\n      carto2\n    );\n    carto.height = heights[i];\n    cart = ellipsoid.cartographicToCartesian(carto, cartesian);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].pack */ .Z.pack(cart, array, index);\n    index += 3;\n  }\n\n  return index;\n}\n\n/**\n * Breaks a {@link Polyline} into segments such that it does not cross the &plusmn;180 degree meridian of an ellipsoid.\n *\n * @param {Cartesian3[]} positions The polyline\'s Cartesian positions.\n * @param {Matrix4} [modelMatrix=Matrix4.IDENTITY] The polyline\'s model matrix. Assumed to be an affine\n * transformation matrix, where the upper left 3x3 elements are a rotation matrix, and\n * the upper three elements in the fourth column are the translation.  The bottom row is assumed to be [0, 0, 0, 1].\n * The matrix is not verified to be in the proper form.\n * @returns {Object} An object with a <code>positions</code> property that is an array of positions and a\n * <code>segments</code> property.\n *\n *\n * @example\n * var polylines = new Cesium.PolylineCollection();\n * var polyline = polylines.add(...);\n * var positions = polyline.positions;\n * var modelMatrix = polylines.modelMatrix;\n * var segments = Cesium.PolylinePipeline.wrapLongitude(positions, modelMatrix);\n *\n * @see PolygonPipeline.wrapLongitude\n * @see Polyline\n * @see PolylineCollection\n */\nPolylinePipeline.wrapLongitude = function (positions, modelMatrix) {\n  var cartesians = [];\n  var segments = [];\n\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(positions) && positions.length > 0) {\n    modelMatrix = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(modelMatrix, _Matrix4_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].IDENTITY */ .Z.IDENTITY);\n    var inverseModelMatrix = _Matrix4_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].inverseTransformation */ .Z.inverseTransformation(\n      modelMatrix,\n      wrapLongitudeInversMatrix\n    );\n\n    var origin = _Matrix4_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(\n      inverseModelMatrix,\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO,\n      wrapLongitudeOrigin\n    );\n    var xzNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].normalize */ .Z.normalize(\n      _Matrix4_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(\n        inverseModelMatrix,\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNIT_Y */ .Z.UNIT_Y,\n        wrapLongitudeXZNormal\n      ),\n      wrapLongitudeXZNormal\n    );\n    var xzPlane = _Plane_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromPointNormal */ .Z.fromPointNormal(origin, xzNormal, wrapLongitudeXZPlane);\n    var yzNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].normalize */ .Z.normalize(\n      _Matrix4_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(\n        inverseModelMatrix,\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNIT_X */ .Z.UNIT_X,\n        wrapLongitudeYZNormal\n      ),\n      wrapLongitudeYZNormal\n    );\n    var yzPlane = _Plane_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromPointNormal */ .Z.fromPointNormal(origin, yzNormal, wrapLongitudeYZPlane);\n\n    var count = 1;\n    cartesians.push(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(positions[0]));\n    var prev = cartesians[0];\n\n    var length = positions.length;\n    for (var i = 1; i < length; ++i) {\n      var cur = positions[i];\n\n      // intersects the IDL if either endpoint is on the negative side of the yz-plane\n      if (\n        _Plane_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].getPointDistance */ .Z.getPointDistance(yzPlane, prev) < 0.0 ||\n        _Plane_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].getPointDistance */ .Z.getPointDistance(yzPlane, cur) < 0.0\n      ) {\n        // and intersects the xz-plane\n        var intersection = _IntersectionTests_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].lineSegmentPlane */ .Z.lineSegmentPlane(\n          prev,\n          cur,\n          xzPlane,\n          wrapLongitudeIntersection\n        );\n        if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(intersection)) {\n          // move point on the xz-plane slightly away from the plane\n          var offset = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n            xzNormal,\n            5.0e-9,\n            wrapLongitudeOffset\n          );\n          if (_Plane_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].getPointDistance */ .Z.getPointDistance(xzPlane, prev) < 0.0) {\n            _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].negate */ .Z.negate(offset, offset);\n          }\n\n          cartesians.push(\n            _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].add */ .Z.add(intersection, offset, new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z())\n          );\n          segments.push(count + 1);\n\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].negate */ .Z.negate(offset, offset);\n          cartesians.push(\n            _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].add */ .Z.add(intersection, offset, new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z())\n          );\n          count = 1;\n        }\n      }\n\n      cartesians.push(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(positions[i]));\n      count++;\n\n      prev = cur;\n    }\n\n    segments.push(count);\n  }\n\n  return {\n    positions: cartesians,\n    lengths: segments,\n  };\n};\n\n/**\n * Subdivides polyline and raises all points to the specified height.  Returns an array of numbers to represent the positions.\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions The array of type {Cartesian3} representing positions.\n * @param {Number|Number[]} [options.height=0.0] A number or array of numbers representing the heights of each position.\n * @param {Number} [options.granularity = CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the positions lie.\n * @returns {Number[]} A new array of positions of type {Number} that have been subdivided and raised to the surface of the ellipsoid.\n *\n * @example\n * var positions = Cesium.Cartesian3.fromDegreesArray([\n *   -105.0, 40.0,\n *   -100.0, 38.0,\n *   -105.0, 35.0,\n *   -100.0, 32.0\n * ]);\n * var surfacePositions = Cesium.PolylinePipeline.generateArc({\n *   positons: positions\n * });\n */\nPolylinePipeline.generateArc = function (options) {\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(options)) {\n    options = {};\n  }\n  var positions = options.positions;\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(positions)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z("options.positions is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var length = positions.length;\n  var ellipsoid = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].WGS84 */ .Z.WGS84);\n  var height = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.height, 0);\n  var hasHeightArray = Array.isArray(height);\n\n  if (length < 1) {\n    return [];\n  } else if (length === 1) {\n    var p = ellipsoid.scaleToGeodeticSurface(positions[0], scaleFirst);\n    height = hasHeightArray ? height[0] : height;\n    if (height !== 0) {\n      var n = ellipsoid.geodeticSurfaceNormal(p, cartesian);\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(n, height, n);\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].add */ .Z.add(p, n, p);\n    }\n\n    return [p.x, p.y, p.z];\n  }\n\n  var minDistance = options.minDistance;\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(minDistance)) {\n    var granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n      options.granularity,\n      _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n    );\n    minDistance = _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].chordLength */ .Z.chordLength(granularity, ellipsoid.maximumRadius);\n  }\n\n  var numPoints = 0;\n  var i;\n\n  for (i = 0; i < length - 1; i++) {\n    numPoints += PolylinePipeline.numberOfPoints(\n      positions[i],\n      positions[i + 1],\n      minDistance\n    );\n  }\n\n  var arrayLength = (numPoints + 1) * 3;\n  var newPositions = new Array(arrayLength);\n  var offset = 0;\n\n  for (i = 0; i < length - 1; i++) {\n    var p0 = positions[i];\n    var p1 = positions[i + 1];\n\n    var h0 = hasHeightArray ? height[i] : height;\n    var h1 = hasHeightArray ? height[i + 1] : height;\n\n    offset = generateCartesianArc(\n      p0,\n      p1,\n      minDistance,\n      ellipsoid,\n      h0,\n      h1,\n      newPositions,\n      offset\n    );\n  }\n\n  subdivideHeightsScratchArray.length = 0;\n\n  var lastPoint = positions[length - 1];\n  var carto = ellipsoid.cartesianToCartographic(lastPoint, carto1);\n  carto.height = hasHeightArray ? height[length - 1] : height;\n  var cart = ellipsoid.cartographicToCartesian(carto, cartesian);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].pack */ .Z.pack(cart, newPositions, arrayLength - 3);\n\n  return newPositions;\n};\n\nvar scratchCartographic0 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartographic1 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * Subdivides polyline and raises all points to the specified height using Rhumb lines.  Returns an array of numbers to represent the positions.\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions The array of type {Cartesian3} representing positions.\n * @param {Number|Number[]} [options.height=0.0] A number or array of numbers representing the heights of each position.\n * @param {Number} [options.granularity = CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the positions lie.\n * @returns {Number[]} A new array of positions of type {Number} that have been subdivided and raised to the surface of the ellipsoid.\n *\n * @example\n * var positions = Cesium.Cartesian3.fromDegreesArray([\n *   -105.0, 40.0,\n *   -100.0, 38.0,\n *   -105.0, 35.0,\n *   -100.0, 32.0\n * ]);\n * var surfacePositions = Cesium.PolylinePipeline.generateRhumbArc({\n *   positons: positions\n * });\n */\nPolylinePipeline.generateRhumbArc = function (options) {\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(options)) {\n    options = {};\n  }\n  var positions = options.positions;\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(positions)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z("options.positions is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var length = positions.length;\n  var ellipsoid = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].WGS84 */ .Z.WGS84);\n  var height = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.height, 0);\n  var hasHeightArray = Array.isArray(height);\n\n  if (length < 1) {\n    return [];\n  } else if (length === 1) {\n    var p = ellipsoid.scaleToGeodeticSurface(positions[0], scaleFirst);\n    height = hasHeightArray ? height[0] : height;\n    if (height !== 0) {\n      var n = ellipsoid.geodeticSurfaceNormal(p, cartesian);\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(n, height, n);\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].add */ .Z.add(p, n, p);\n    }\n\n    return [p.x, p.y, p.z];\n  }\n\n  var granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.granularity,\n    _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  );\n\n  var numPoints = 0;\n  var i;\n\n  var c0 = ellipsoid.cartesianToCartographic(\n    positions[0],\n    scratchCartographic0\n  );\n  var c1;\n  for (i = 0; i < length - 1; i++) {\n    c1 = ellipsoid.cartesianToCartographic(\n      positions[i + 1],\n      scratchCartographic1\n    );\n    numPoints += PolylinePipeline.numberOfPointsRhumbLine(c0, c1, granularity);\n    c0 = _Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(c1, scratchCartographic0);\n  }\n\n  var arrayLength = (numPoints + 1) * 3;\n  var newPositions = new Array(arrayLength);\n  var offset = 0;\n\n  for (i = 0; i < length - 1; i++) {\n    var p0 = positions[i];\n    var p1 = positions[i + 1];\n\n    var h0 = hasHeightArray ? height[i] : height;\n    var h1 = hasHeightArray ? height[i + 1] : height;\n\n    offset = generateCartesianRhumbArc(\n      p0,\n      p1,\n      granularity,\n      ellipsoid,\n      h0,\n      h1,\n      newPositions,\n      offset\n    );\n  }\n\n  subdivideHeightsScratchArray.length = 0;\n\n  var lastPoint = positions[length - 1];\n  var carto = ellipsoid.cartesianToCartographic(lastPoint, carto1);\n  carto.height = hasHeightArray ? height[length - 1] : height;\n  var cart = ellipsoid.cartographicToCartesian(carto, cartesian);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].pack */ .Z.pack(cart, newPositions, arrayLength - 3);\n\n  return newPositions;\n};\n\n/**\n * Subdivides polyline and raises all points to the specified height. Returns an array of new {Cartesian3} positions.\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions The array of type {Cartesian3} representing positions.\n * @param {Number|Number[]} [options.height=0.0] A number or array of numbers representing the heights of each position.\n * @param {Number} [options.granularity = CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the positions lie.\n * @returns {Cartesian3[]} A new array of cartesian3 positions that have been subdivided and raised to the surface of the ellipsoid.\n *\n * @example\n * var positions = Cesium.Cartesian3.fromDegreesArray([\n *   -105.0, 40.0,\n *   -100.0, 38.0,\n *   -105.0, 35.0,\n *   -100.0, 32.0\n * ]);\n * var surfacePositions = Cesium.PolylinePipeline.generateCartesianArc({\n *   positons: positions\n * });\n */\nPolylinePipeline.generateCartesianArc = function (options) {\n  var numberArray = PolylinePipeline.generateArc(options);\n  var size = numberArray.length / 3;\n  var newPositions = new Array(size);\n  for (var i = 0; i < size; i++) {\n    newPositions[i] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].unpack */ .Z.unpack(numberArray, i * 3);\n  }\n  return newPositions;\n};\n\n/**\n * Subdivides polyline and raises all points to the specified height using Rhumb Lines. Returns an array of new {Cartesian3} positions.\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions The array of type {Cartesian3} representing positions.\n * @param {Number|Number[]} [options.height=0.0] A number or array of numbers representing the heights of each position.\n * @param {Number} [options.granularity = CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the positions lie.\n * @returns {Cartesian3[]} A new array of cartesian3 positions that have been subdivided and raised to the surface of the ellipsoid.\n *\n * @example\n * var positions = Cesium.Cartesian3.fromDegreesArray([\n *   -105.0, 40.0,\n *   -100.0, 38.0,\n *   -105.0, 35.0,\n *   -100.0, 32.0\n * ]);\n * var surfacePositions = Cesium.PolylinePipeline.generateCartesianRhumbArc({\n *   positons: positions\n * });\n */\nPolylinePipeline.generateCartesianRhumbArc = function (options) {\n  var numberArray = PolylinePipeline.generateRhumbArc(options);\n  var size = numberArray.length / 3;\n  var newPositions = new Array(size);\n  for (var i = 0; i < size; i++) {\n    newPositions[i] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].unpack */ .Z.unpack(numberArray, i * 3);\n  }\n  return newPositions;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolylinePipeline);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyw2RUFBa0I7QUFDM0I7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx5RUFBZTs7QUFFakI7QUFDQTs7QUFFQTtBQUNBLCtGQUErRixZQUFZO0FBQzNHLFdBQVcsUUFBUTtBQUNuQixXQUFXLGNBQWMscUNBQXFDLFlBQVk7QUFDMUUsV0FBVyxpQkFBaUI7QUFDNUIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsV0FBVztBQUN0QixhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixVQUFVO0FBQzVCLHNCQUFzQiw2RUFBaUI7QUFDdkM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUhBQWlILFlBQVk7QUFDN0gsV0FBVyxRQUFRO0FBQ25CLFdBQVcsY0FBYyxxQ0FBcUMsWUFBWTtBQUMxRSxXQUFXLGlCQUFpQjtBQUM1QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxXQUFXO0FBQ3RCLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFVBQVU7QUFDNUIsc0JBQXNCLDZFQUFpQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSx5REFBZSxnQkFBZ0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9Db3JlL1BvbHlsaW5lUGlwZWxpbmUuanM/OTBlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCIuL0NhcnRvZ3JhcGhpYy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZCBmcm9tIFwiLi9FbGxpcHNvaWQuanNcIjtcbmltcG9ydCBFbGxpcHNvaWRHZW9kZXNpYyBmcm9tIFwiLi9FbGxpcHNvaWRHZW9kZXNpYy5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZFJodW1iTGluZSBmcm9tIFwiLi9FbGxpcHNvaWRSaHVtYkxpbmUuanNcIjtcbmltcG9ydCBJbnRlcnNlY3Rpb25UZXN0cyBmcm9tIFwiLi9JbnRlcnNlY3Rpb25UZXN0cy5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4vTWF0aC5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4vTWF0cml4NC5qc1wiO1xuaW1wb3J0IFBsYW5lIGZyb20gXCIuL1BsYW5lLmpzXCI7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIFBvbHlsaW5lUGlwZWxpbmUgPSB7fTtcblxuUG9seWxpbmVQaXBlbGluZS5udW1iZXJPZlBvaW50cyA9IGZ1bmN0aW9uIChwMCwgcDEsIG1pbkRpc3RhbmNlKSB7XG4gIHZhciBkaXN0YW5jZSA9IENhcnRlc2lhbjMuZGlzdGFuY2UocDAsIHAxKTtcbiAgcmV0dXJuIE1hdGguY2VpbChkaXN0YW5jZSAvIG1pbkRpc3RhbmNlKTtcbn07XG5cblBvbHlsaW5lUGlwZWxpbmUubnVtYmVyT2ZQb2ludHNSaHVtYkxpbmUgPSBmdW5jdGlvbiAocDAsIHAxLCBncmFudWxhcml0eSkge1xuICB2YXIgcmFkaWFuc0Rpc3RhbmNlU3F1YXJlZCA9XG4gICAgTWF0aC5wb3cocDAubG9uZ2l0dWRlIC0gcDEubG9uZ2l0dWRlLCAyKSArXG4gICAgTWF0aC5wb3cocDAubGF0aXR1ZGUgLSBwMS5sYXRpdHVkZSwgMik7XG5cbiAgcmV0dXJuIE1hdGgubWF4KFxuICAgIDEsXG4gICAgTWF0aC5jZWlsKE1hdGguc3FydChyYWRpYW5zRGlzdGFuY2VTcXVhcmVkIC8gKGdyYW51bGFyaXR5ICogZ3JhbnVsYXJpdHkpKSlcbiAgKTtcbn07XG5cbnZhciBjYXJ0b1NjcmF0Y2ggPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5Qb2x5bGluZVBpcGVsaW5lLmV4dHJhY3RIZWlnaHRzID0gZnVuY3Rpb24gKHBvc2l0aW9ucywgZWxsaXBzb2lkKSB7XG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgaGVpZ2h0cyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHAgPSBwb3NpdGlvbnNbaV07XG4gICAgaGVpZ2h0c1tpXSA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwLCBjYXJ0b1NjcmF0Y2gpLmhlaWdodDtcbiAgfVxuICByZXR1cm4gaGVpZ2h0cztcbn07XG5cbnZhciB3cmFwTG9uZ2l0dWRlSW52ZXJzTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcbnZhciB3cmFwTG9uZ2l0dWRlT3JpZ2luID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciB3cmFwTG9uZ2l0dWRlWFpOb3JtYWwgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHdyYXBMb25naXR1ZGVYWlBsYW5lID0gbmV3IFBsYW5lKENhcnRlc2lhbjMuVU5JVF9YLCAwLjApO1xudmFyIHdyYXBMb25naXR1ZGVZWk5vcm1hbCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgd3JhcExvbmdpdHVkZVlaUGxhbmUgPSBuZXcgUGxhbmUoQ2FydGVzaWFuMy5VTklUX1gsIDAuMCk7XG52YXIgd3JhcExvbmdpdHVkZUludGVyc2VjdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgd3JhcExvbmdpdHVkZU9mZnNldCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbnZhciBzdWJkaXZpZGVIZWlnaHRzU2NyYXRjaEFycmF5ID0gW107XG5cbmZ1bmN0aW9uIHN1YmRpdmlkZUhlaWdodHMobnVtUG9pbnRzLCBoMCwgaDEpIHtcbiAgdmFyIGhlaWdodHMgPSBzdWJkaXZpZGVIZWlnaHRzU2NyYXRjaEFycmF5O1xuICBoZWlnaHRzLmxlbmd0aCA9IG51bVBvaW50cztcblxuICB2YXIgaTtcbiAgaWYgKGgwID09PSBoMSkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBudW1Qb2ludHM7IGkrKykge1xuICAgICAgaGVpZ2h0c1tpXSA9IGgwO1xuICAgIH1cbiAgICByZXR1cm4gaGVpZ2h0cztcbiAgfVxuXG4gIHZhciBkSGVpZ2h0ID0gaDEgLSBoMDtcbiAgdmFyIGhlaWdodFBlclZlcnRleCA9IGRIZWlnaHQgLyBudW1Qb2ludHM7XG5cbiAgZm9yIChpID0gMDsgaSA8IG51bVBvaW50czsgaSsrKSB7XG4gICAgdmFyIGggPSBoMCArIGkgKiBoZWlnaHRQZXJWZXJ0ZXg7XG4gICAgaGVpZ2h0c1tpXSA9IGg7XG4gIH1cblxuICByZXR1cm4gaGVpZ2h0cztcbn1cblxudmFyIGNhcnRvMSA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBjYXJ0bzIgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgY2FydGVzaWFuID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY2FsZUZpcnN0ID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY2FsZUxhc3QgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGVsbGlwc29pZEdlb2Rlc2ljID0gbmV3IEVsbGlwc29pZEdlb2Rlc2ljKCk7XG52YXIgZWxsaXBzb2lkUmh1bWIgPSBuZXcgRWxsaXBzb2lkUmh1bWJMaW5lKCk7XG5cbi8vUmV0dXJucyBzdWJkaXZpZGVkIGxpbmUgc2NhbGVkIHRvIGVsbGlwc29pZCBzdXJmYWNlIHN0YXJ0aW5nIGF0IHAxIGFuZCBlbmRpbmcgYXQgcDIuXG4vL1Jlc3VsdCBpbmNsdWRlcyBwMSwgYnV0IG5vdCBpbmNsdWRlIHAyLiAgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZm9yIGEgc2VxdWVuY2Ugb2YgbGluZSBzZWdtZW50cyxcbi8vYW5kIHRoaXMgcHJldmVudHMgZHVwbGljYXRpb24gb2YgZW5kIHBvaW50LlxuZnVuY3Rpb24gZ2VuZXJhdGVDYXJ0ZXNpYW5BcmMoXG4gIHAwLFxuICBwMSxcbiAgbWluRGlzdGFuY2UsXG4gIGVsbGlwc29pZCxcbiAgaDAsXG4gIGgxLFxuICBhcnJheSxcbiAgb2Zmc2V0XG4pIHtcbiAgdmFyIGZpcnN0ID0gZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2UocDAsIHNjYWxlRmlyc3QpO1xuICB2YXIgbGFzdCA9IGVsbGlwc29pZC5zY2FsZVRvR2VvZGV0aWNTdXJmYWNlKHAxLCBzY2FsZUxhc3QpO1xuICB2YXIgbnVtUG9pbnRzID0gUG9seWxpbmVQaXBlbGluZS5udW1iZXJPZlBvaW50cyhwMCwgcDEsIG1pbkRpc3RhbmNlKTtcbiAgdmFyIHN0YXJ0ID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGZpcnN0LCBjYXJ0bzEpO1xuICB2YXIgZW5kID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGxhc3QsIGNhcnRvMik7XG4gIHZhciBoZWlnaHRzID0gc3ViZGl2aWRlSGVpZ2h0cyhudW1Qb2ludHMsIGgwLCBoMSk7XG5cbiAgZWxsaXBzb2lkR2VvZGVzaWMuc2V0RW5kUG9pbnRzKHN0YXJ0LCBlbmQpO1xuICB2YXIgc3VyZmFjZURpc3RhbmNlQmV0d2VlblBvaW50cyA9XG4gICAgZWxsaXBzb2lkR2VvZGVzaWMuc3VyZmFjZURpc3RhbmNlIC8gbnVtUG9pbnRzO1xuXG4gIHZhciBpbmRleCA9IG9mZnNldDtcbiAgc3RhcnQuaGVpZ2h0ID0gaDA7XG4gIHZhciBjYXJ0ID0gZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKHN0YXJ0LCBjYXJ0ZXNpYW4pO1xuICBDYXJ0ZXNpYW4zLnBhY2soY2FydCwgYXJyYXksIGluZGV4KTtcbiAgaW5kZXggKz0gMztcblxuICBmb3IgKHZhciBpID0gMTsgaSA8IG51bVBvaW50czsgaSsrKSB7XG4gICAgdmFyIGNhcnRvID0gZWxsaXBzb2lkR2VvZGVzaWMuaW50ZXJwb2xhdGVVc2luZ1N1cmZhY2VEaXN0YW5jZShcbiAgICAgIGkgKiBzdXJmYWNlRGlzdGFuY2VCZXR3ZWVuUG9pbnRzLFxuICAgICAgY2FydG8yXG4gICAgKTtcbiAgICBjYXJ0by5oZWlnaHQgPSBoZWlnaHRzW2ldO1xuICAgIGNhcnQgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oY2FydG8sIGNhcnRlc2lhbik7XG4gICAgQ2FydGVzaWFuMy5wYWNrKGNhcnQsIGFycmF5LCBpbmRleCk7XG4gICAgaW5kZXggKz0gMztcbiAgfVxuXG4gIHJldHVybiBpbmRleDtcbn1cblxuLy9SZXR1cm5zIHN1YmRpdmlkZWQgbGluZSBzY2FsZWQgdG8gZWxsaXBzb2lkIHN1cmZhY2Ugc3RhcnRpbmcgYXQgcDEgYW5kIGVuZGluZyBhdCBwMi5cbi8vUmVzdWx0IGluY2x1ZGVzIHAxLCBidXQgbm90IGluY2x1ZGUgcDIuICBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgYSBzZXF1ZW5jZSBvZiBsaW5lIHNlZ21lbnRzLFxuLy9hbmQgdGhpcyBwcmV2ZW50cyBkdXBsaWNhdGlvbiBvZiBlbmQgcG9pbnQuXG5mdW5jdGlvbiBnZW5lcmF0ZUNhcnRlc2lhblJodW1iQXJjKFxuICBwMCxcbiAgcDEsXG4gIGdyYW51bGFyaXR5LFxuICBlbGxpcHNvaWQsXG4gIGgwLFxuICBoMSxcbiAgYXJyYXksXG4gIG9mZnNldFxuKSB7XG4gIHZhciBzdGFydCA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMCwgY2FydG8xKTtcbiAgdmFyIGVuZCA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMSwgY2FydG8yKTtcbiAgdmFyIG51bVBvaW50cyA9IFBvbHlsaW5lUGlwZWxpbmUubnVtYmVyT2ZQb2ludHNSaHVtYkxpbmUoXG4gICAgc3RhcnQsXG4gICAgZW5kLFxuICAgIGdyYW51bGFyaXR5XG4gICk7XG4gIHN0YXJ0LmhlaWdodCA9IDAuMDtcbiAgZW5kLmhlaWdodCA9IDAuMDtcbiAgdmFyIGhlaWdodHMgPSBzdWJkaXZpZGVIZWlnaHRzKG51bVBvaW50cywgaDAsIGgxKTtcblxuICBpZiAoIWVsbGlwc29pZFJodW1iLmVsbGlwc29pZC5lcXVhbHMoZWxsaXBzb2lkKSkge1xuICAgIGVsbGlwc29pZFJodW1iID0gbmV3IEVsbGlwc29pZFJodW1iTGluZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgZWxsaXBzb2lkKTtcbiAgfVxuICBlbGxpcHNvaWRSaHVtYi5zZXRFbmRQb2ludHMoc3RhcnQsIGVuZCk7XG4gIHZhciBzdXJmYWNlRGlzdGFuY2VCZXR3ZWVuUG9pbnRzID0gZWxsaXBzb2lkUmh1bWIuc3VyZmFjZURpc3RhbmNlIC8gbnVtUG9pbnRzO1xuXG4gIHZhciBpbmRleCA9IG9mZnNldDtcbiAgc3RhcnQuaGVpZ2h0ID0gaDA7XG4gIHZhciBjYXJ0ID0gZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKHN0YXJ0LCBjYXJ0ZXNpYW4pO1xuICBDYXJ0ZXNpYW4zLnBhY2soY2FydCwgYXJyYXksIGluZGV4KTtcbiAgaW5kZXggKz0gMztcblxuICBmb3IgKHZhciBpID0gMTsgaSA8IG51bVBvaW50czsgaSsrKSB7XG4gICAgdmFyIGNhcnRvID0gZWxsaXBzb2lkUmh1bWIuaW50ZXJwb2xhdGVVc2luZ1N1cmZhY2VEaXN0YW5jZShcbiAgICAgIGkgKiBzdXJmYWNlRGlzdGFuY2VCZXR3ZWVuUG9pbnRzLFxuICAgICAgY2FydG8yXG4gICAgKTtcbiAgICBjYXJ0by5oZWlnaHQgPSBoZWlnaHRzW2ldO1xuICAgIGNhcnQgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oY2FydG8sIGNhcnRlc2lhbik7XG4gICAgQ2FydGVzaWFuMy5wYWNrKGNhcnQsIGFycmF5LCBpbmRleCk7XG4gICAgaW5kZXggKz0gMztcbiAgfVxuXG4gIHJldHVybiBpbmRleDtcbn1cblxuLyoqXG4gKiBCcmVha3MgYSB7QGxpbmsgUG9seWxpbmV9IGludG8gc2VnbWVudHMgc3VjaCB0aGF0IGl0IGRvZXMgbm90IGNyb3NzIHRoZSAmcGx1c21uOzE4MCBkZWdyZWUgbWVyaWRpYW4gb2YgYW4gZWxsaXBzb2lkLlxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM1tdfSBwb3NpdGlvbnMgVGhlIHBvbHlsaW5lJ3MgQ2FydGVzaWFuIHBvc2l0aW9ucy5cbiAqIEBwYXJhbSB7TWF0cml4NH0gW21vZGVsTWF0cml4PU1hdHJpeDQuSURFTlRJVFldIFRoZSBwb2x5bGluZSdzIG1vZGVsIG1hdHJpeC4gQXNzdW1lZCB0byBiZSBhbiBhZmZpbmVcbiAqIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCwgd2hlcmUgdGhlIHVwcGVyIGxlZnQgM3gzIGVsZW1lbnRzIGFyZSBhIHJvdGF0aW9uIG1hdHJpeCwgYW5kXG4gKiB0aGUgdXBwZXIgdGhyZWUgZWxlbWVudHMgaW4gdGhlIGZvdXJ0aCBjb2x1bW4gYXJlIHRoZSB0cmFuc2xhdGlvbi4gIFRoZSBib3R0b20gcm93IGlzIGFzc3VtZWQgdG8gYmUgWzAsIDAsIDAsIDFdLlxuICogVGhlIG1hdHJpeCBpcyBub3QgdmVyaWZpZWQgdG8gYmUgaW4gdGhlIHByb3BlciBmb3JtLlxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IHdpdGggYSA8Y29kZT5wb3NpdGlvbnM8L2NvZGU+IHByb3BlcnR5IHRoYXQgaXMgYW4gYXJyYXkgb2YgcG9zaXRpb25zIGFuZCBhXG4gKiA8Y29kZT5zZWdtZW50czwvY29kZT4gcHJvcGVydHkuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWxpbmVzID0gbmV3IENlc2l1bS5Qb2x5bGluZUNvbGxlY3Rpb24oKTtcbiAqIHZhciBwb2x5bGluZSA9IHBvbHlsaW5lcy5hZGQoLi4uKTtcbiAqIHZhciBwb3NpdGlvbnMgPSBwb2x5bGluZS5wb3NpdGlvbnM7XG4gKiB2YXIgbW9kZWxNYXRyaXggPSBwb2x5bGluZXMubW9kZWxNYXRyaXg7XG4gKiB2YXIgc2VnbWVudHMgPSBDZXNpdW0uUG9seWxpbmVQaXBlbGluZS53cmFwTG9uZ2l0dWRlKHBvc2l0aW9ucywgbW9kZWxNYXRyaXgpO1xuICpcbiAqIEBzZWUgUG9seWdvblBpcGVsaW5lLndyYXBMb25naXR1ZGVcbiAqIEBzZWUgUG9seWxpbmVcbiAqIEBzZWUgUG9seWxpbmVDb2xsZWN0aW9uXG4gKi9cblBvbHlsaW5lUGlwZWxpbmUud3JhcExvbmdpdHVkZSA9IGZ1bmN0aW9uIChwb3NpdGlvbnMsIG1vZGVsTWF0cml4KSB7XG4gIHZhciBjYXJ0ZXNpYW5zID0gW107XG4gIHZhciBzZWdtZW50cyA9IFtdO1xuXG4gIGlmIChkZWZpbmVkKHBvc2l0aW9ucykgJiYgcG9zaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICBtb2RlbE1hdHJpeCA9IGRlZmF1bHRWYWx1ZShtb2RlbE1hdHJpeCwgTWF0cml4NC5JREVOVElUWSk7XG4gICAgdmFyIGludmVyc2VNb2RlbE1hdHJpeCA9IE1hdHJpeDQuaW52ZXJzZVRyYW5zZm9ybWF0aW9uKFxuICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICB3cmFwTG9uZ2l0dWRlSW52ZXJzTWF0cml4XG4gICAgKTtcblxuICAgIHZhciBvcmlnaW4gPSBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludChcbiAgICAgIGludmVyc2VNb2RlbE1hdHJpeCxcbiAgICAgIENhcnRlc2lhbjMuWkVSTyxcbiAgICAgIHdyYXBMb25naXR1ZGVPcmlnaW5cbiAgICApO1xuICAgIHZhciB4ek5vcm1hbCA9IENhcnRlc2lhbjMubm9ybWFsaXplKFxuICAgICAgTWF0cml4NC5tdWx0aXBseUJ5UG9pbnRBc1ZlY3RvcihcbiAgICAgICAgaW52ZXJzZU1vZGVsTWF0cml4LFxuICAgICAgICBDYXJ0ZXNpYW4zLlVOSVRfWSxcbiAgICAgICAgd3JhcExvbmdpdHVkZVhaTm9ybWFsXG4gICAgICApLFxuICAgICAgd3JhcExvbmdpdHVkZVhaTm9ybWFsXG4gICAgKTtcbiAgICB2YXIgeHpQbGFuZSA9IFBsYW5lLmZyb21Qb2ludE5vcm1hbChvcmlnaW4sIHh6Tm9ybWFsLCB3cmFwTG9uZ2l0dWRlWFpQbGFuZSk7XG4gICAgdmFyIHl6Tm9ybWFsID0gQ2FydGVzaWFuMy5ub3JtYWxpemUoXG4gICAgICBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludEFzVmVjdG9yKFxuICAgICAgICBpbnZlcnNlTW9kZWxNYXRyaXgsXG4gICAgICAgIENhcnRlc2lhbjMuVU5JVF9YLFxuICAgICAgICB3cmFwTG9uZ2l0dWRlWVpOb3JtYWxcbiAgICAgICksXG4gICAgICB3cmFwTG9uZ2l0dWRlWVpOb3JtYWxcbiAgICApO1xuICAgIHZhciB5elBsYW5lID0gUGxhbmUuZnJvbVBvaW50Tm9ybWFsKG9yaWdpbiwgeXpOb3JtYWwsIHdyYXBMb25naXR1ZGVZWlBsYW5lKTtcblxuICAgIHZhciBjb3VudCA9IDE7XG4gICAgY2FydGVzaWFucy5wdXNoKENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb25zWzBdKSk7XG4gICAgdmFyIHByZXYgPSBjYXJ0ZXNpYW5zWzBdO1xuXG4gICAgdmFyIGxlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGN1ciA9IHBvc2l0aW9uc1tpXTtcblxuICAgICAgLy8gaW50ZXJzZWN0cyB0aGUgSURMIGlmIGVpdGhlciBlbmRwb2ludCBpcyBvbiB0aGUgbmVnYXRpdmUgc2lkZSBvZiB0aGUgeXotcGxhbmVcbiAgICAgIGlmIChcbiAgICAgICAgUGxhbmUuZ2V0UG9pbnREaXN0YW5jZSh5elBsYW5lLCBwcmV2KSA8IDAuMCB8fFxuICAgICAgICBQbGFuZS5nZXRQb2ludERpc3RhbmNlKHl6UGxhbmUsIGN1cikgPCAwLjBcbiAgICAgICkge1xuICAgICAgICAvLyBhbmQgaW50ZXJzZWN0cyB0aGUgeHotcGxhbmVcbiAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IEludGVyc2VjdGlvblRlc3RzLmxpbmVTZWdtZW50UGxhbmUoXG4gICAgICAgICAgcHJldixcbiAgICAgICAgICBjdXIsXG4gICAgICAgICAgeHpQbGFuZSxcbiAgICAgICAgICB3cmFwTG9uZ2l0dWRlSW50ZXJzZWN0aW9uXG4gICAgICAgICk7XG4gICAgICAgIGlmIChkZWZpbmVkKGludGVyc2VjdGlvbikpIHtcbiAgICAgICAgICAvLyBtb3ZlIHBvaW50IG9uIHRoZSB4ei1wbGFuZSBzbGlnaHRseSBhd2F5IGZyb20gdGhlIHBsYW5lXG4gICAgICAgICAgdmFyIG9mZnNldCA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgICAgICAgIHh6Tm9ybWFsLFxuICAgICAgICAgICAgNS4wZS05LFxuICAgICAgICAgICAgd3JhcExvbmdpdHVkZU9mZnNldFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKFBsYW5lLmdldFBvaW50RGlzdGFuY2UoeHpQbGFuZSwgcHJldikgPCAwLjApIHtcbiAgICAgICAgICAgIENhcnRlc2lhbjMubmVnYXRlKG9mZnNldCwgb2Zmc2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXJ0ZXNpYW5zLnB1c2goXG4gICAgICAgICAgICBDYXJ0ZXNpYW4zLmFkZChpbnRlcnNlY3Rpb24sIG9mZnNldCwgbmV3IENhcnRlc2lhbjMoKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHNlZ21lbnRzLnB1c2goY291bnQgKyAxKTtcblxuICAgICAgICAgIENhcnRlc2lhbjMubmVnYXRlKG9mZnNldCwgb2Zmc2V0KTtcbiAgICAgICAgICBjYXJ0ZXNpYW5zLnB1c2goXG4gICAgICAgICAgICBDYXJ0ZXNpYW4zLmFkZChpbnRlcnNlY3Rpb24sIG9mZnNldCwgbmV3IENhcnRlc2lhbjMoKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvdW50ID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYXJ0ZXNpYW5zLnB1c2goQ2FydGVzaWFuMy5jbG9uZShwb3NpdGlvbnNbaV0pKTtcbiAgICAgIGNvdW50Kys7XG5cbiAgICAgIHByZXYgPSBjdXI7XG4gICAgfVxuXG4gICAgc2VnbWVudHMucHVzaChjb3VudCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uczogY2FydGVzaWFucyxcbiAgICBsZW5ndGhzOiBzZWdtZW50cyxcbiAgfTtcbn07XG5cbi8qKlxuICogU3ViZGl2aWRlcyBwb2x5bGluZSBhbmQgcmFpc2VzIGFsbCBwb2ludHMgdG8gdGhlIHNwZWNpZmllZCBoZWlnaHQuICBSZXR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgdG8gcmVwcmVzZW50IHRoZSBwb3NpdGlvbnMuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0NhcnRlc2lhbjNbXX0gb3B0aW9ucy5wb3NpdGlvbnMgVGhlIGFycmF5IG9mIHR5cGUge0NhcnRlc2lhbjN9IHJlcHJlc2VudGluZyBwb3NpdGlvbnMuXG4gKiBAcGFyYW0ge051bWJlcnxOdW1iZXJbXX0gW29wdGlvbnMuaGVpZ2h0PTAuMF0gQSBudW1iZXIgb3IgYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIGhlaWdodHMgb2YgZWFjaCBwb3NpdGlvbi5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5ncmFudWxhcml0eSA9IENlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFXSBUaGUgZGlzdGFuY2UsIGluIHJhZGlhbnMsIGJldHdlZW4gZWFjaCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlLiBEZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgcG9zaXRpb25zIGluIHRoZSBidWZmZXIuXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gW29wdGlvbnMuZWxsaXBzb2lkPUVsbGlwc29pZC5XR1M4NF0gVGhlIGVsbGlwc29pZCBvbiB3aGljaCB0aGUgcG9zaXRpb25zIGxpZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJbXX0gQSBuZXcgYXJyYXkgb2YgcG9zaXRpb25zIG9mIHR5cGUge051bWJlcn0gdGhhdCBoYXZlIGJlZW4gc3ViZGl2aWRlZCBhbmQgcmFpc2VkIHRvIHRoZSBzdXJmYWNlIG9mIHRoZSBlbGxpcHNvaWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBwb3NpdGlvbnMgPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgLTEwNS4wLCA0MC4wLFxuICogICAtMTAwLjAsIDM4LjAsXG4gKiAgIC0xMDUuMCwgMzUuMCxcbiAqICAgLTEwMC4wLCAzMi4wXG4gKiBdKTtcbiAqIHZhciBzdXJmYWNlUG9zaXRpb25zID0gQ2VzaXVtLlBvbHlsaW5lUGlwZWxpbmUuZ2VuZXJhdGVBcmMoe1xuICogICBwb3NpdG9uczogcG9zaXRpb25zXG4gKiB9KTtcbiAqL1xuUG9seWxpbmVQaXBlbGluZS5nZW5lcmF0ZUFyYyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIGlmICghZGVmaW5lZChvcHRpb25zKSkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICB2YXIgcG9zaXRpb25zID0gb3B0aW9ucy5wb3NpdGlvbnM7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChwb3NpdGlvbnMpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy5wb3NpdGlvbnMgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZWxsaXBzb2lkLCBFbGxpcHNvaWQuV0dTODQpO1xuICB2YXIgaGVpZ2h0ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuaGVpZ2h0LCAwKTtcbiAgdmFyIGhhc0hlaWdodEFycmF5ID0gQXJyYXkuaXNBcnJheShoZWlnaHQpO1xuXG4gIGlmIChsZW5ndGggPCAxKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgIHZhciBwID0gZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2UocG9zaXRpb25zWzBdLCBzY2FsZUZpcnN0KTtcbiAgICBoZWlnaHQgPSBoYXNIZWlnaHRBcnJheSA/IGhlaWdodFswXSA6IGhlaWdodDtcbiAgICBpZiAoaGVpZ2h0ICE9PSAwKSB7XG4gICAgICB2YXIgbiA9IGVsbGlwc29pZC5nZW9kZXRpY1N1cmZhY2VOb3JtYWwocCwgY2FydGVzaWFuKTtcbiAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihuLCBoZWlnaHQsIG4pO1xuICAgICAgQ2FydGVzaWFuMy5hZGQocCwgbiwgcCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtwLngsIHAueSwgcC56XTtcbiAgfVxuXG4gIHZhciBtaW5EaXN0YW5jZSA9IG9wdGlvbnMubWluRGlzdGFuY2U7XG4gIGlmICghZGVmaW5lZChtaW5EaXN0YW5jZSkpIHtcbiAgICB2YXIgZ3JhbnVsYXJpdHkgPSBkZWZhdWx0VmFsdWUoXG4gICAgICBvcHRpb25zLmdyYW51bGFyaXR5LFxuICAgICAgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVcbiAgICApO1xuICAgIG1pbkRpc3RhbmNlID0gQ2VzaXVtTWF0aC5jaG9yZExlbmd0aChncmFudWxhcml0eSwgZWxsaXBzb2lkLm1heGltdW1SYWRpdXMpO1xuICB9XG5cbiAgdmFyIG51bVBvaW50cyA9IDA7XG4gIHZhciBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggLSAxOyBpKyspIHtcbiAgICBudW1Qb2ludHMgKz0gUG9seWxpbmVQaXBlbGluZS5udW1iZXJPZlBvaW50cyhcbiAgICAgIHBvc2l0aW9uc1tpXSxcbiAgICAgIHBvc2l0aW9uc1tpICsgMV0sXG4gICAgICBtaW5EaXN0YW5jZVxuICAgICk7XG4gIH1cblxuICB2YXIgYXJyYXlMZW5ndGggPSAobnVtUG9pbnRzICsgMSkgKiAzO1xuICB2YXIgbmV3UG9zaXRpb25zID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgdmFyIG9mZnNldCA9IDA7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aCAtIDE7IGkrKykge1xuICAgIHZhciBwMCA9IHBvc2l0aW9uc1tpXTtcbiAgICB2YXIgcDEgPSBwb3NpdGlvbnNbaSArIDFdO1xuXG4gICAgdmFyIGgwID0gaGFzSGVpZ2h0QXJyYXkgPyBoZWlnaHRbaV0gOiBoZWlnaHQ7XG4gICAgdmFyIGgxID0gaGFzSGVpZ2h0QXJyYXkgPyBoZWlnaHRbaSArIDFdIDogaGVpZ2h0O1xuXG4gICAgb2Zmc2V0ID0gZ2VuZXJhdGVDYXJ0ZXNpYW5BcmMoXG4gICAgICBwMCxcbiAgICAgIHAxLFxuICAgICAgbWluRGlzdGFuY2UsXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBoMCxcbiAgICAgIGgxLFxuICAgICAgbmV3UG9zaXRpb25zLFxuICAgICAgb2Zmc2V0XG4gICAgKTtcbiAgfVxuXG4gIHN1YmRpdmlkZUhlaWdodHNTY3JhdGNoQXJyYXkubGVuZ3RoID0gMDtcblxuICB2YXIgbGFzdFBvaW50ID0gcG9zaXRpb25zW2xlbmd0aCAtIDFdO1xuICB2YXIgY2FydG8gPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMobGFzdFBvaW50LCBjYXJ0bzEpO1xuICBjYXJ0by5oZWlnaHQgPSBoYXNIZWlnaHRBcnJheSA/IGhlaWdodFtsZW5ndGggLSAxXSA6IGhlaWdodDtcbiAgdmFyIGNhcnQgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oY2FydG8sIGNhcnRlc2lhbik7XG4gIENhcnRlc2lhbjMucGFjayhjYXJ0LCBuZXdQb3NpdGlvbnMsIGFycmF5TGVuZ3RoIC0gMyk7XG5cbiAgcmV0dXJuIG5ld1Bvc2l0aW9ucztcbn07XG5cbnZhciBzY3JhdGNoQ2FydG9ncmFwaGljMCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBzY3JhdGNoQ2FydG9ncmFwaGljMSA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcblxuLyoqXG4gKiBTdWJkaXZpZGVzIHBvbHlsaW5lIGFuZCByYWlzZXMgYWxsIHBvaW50cyB0byB0aGUgc3BlY2lmaWVkIGhlaWdodCB1c2luZyBSaHVtYiBsaW5lcy4gIFJldHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyB0byByZXByZXNlbnQgdGhlIHBvc2l0aW9ucy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM1tdfSBvcHRpb25zLnBvc2l0aW9ucyBUaGUgYXJyYXkgb2YgdHlwZSB7Q2FydGVzaWFuM30gcmVwcmVzZW50aW5nIHBvc2l0aW9ucy5cbiAqIEBwYXJhbSB7TnVtYmVyfE51bWJlcltdfSBbb3B0aW9ucy5oZWlnaHQ9MC4wXSBBIG51bWJlciBvciBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyB0aGUgaGVpZ2h0cyBvZiBlYWNoIHBvc2l0aW9uLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmdyYW51bGFyaXR5ID0gQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVdIFRoZSBkaXN0YW5jZSwgaW4gcmFkaWFucywgYmV0d2VlbiBlYWNoIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUuIERldGVybWluZXMgdGhlIG51bWJlciBvZiBwb3NpdGlvbnMgaW4gdGhlIGJ1ZmZlci5cbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWQ9RWxsaXBzb2lkLldHUzg0XSBUaGUgZWxsaXBzb2lkIG9uIHdoaWNoIHRoZSBwb3NpdGlvbnMgbGllLlxuICogQHJldHVybnMge051bWJlcltdfSBBIG5ldyBhcnJheSBvZiBwb3NpdGlvbnMgb2YgdHlwZSB7TnVtYmVyfSB0aGF0IGhhdmUgYmVlbiBzdWJkaXZpZGVkIGFuZCByYWlzZWQgdG8gdGhlIHN1cmZhY2Ugb2YgdGhlIGVsbGlwc29pZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvc2l0aW9ucyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAtMTA1LjAsIDQwLjAsXG4gKiAgIC0xMDAuMCwgMzguMCxcbiAqICAgLTEwNS4wLCAzNS4wLFxuICogICAtMTAwLjAsIDMyLjBcbiAqIF0pO1xuICogdmFyIHN1cmZhY2VQb3NpdGlvbnMgPSBDZXNpdW0uUG9seWxpbmVQaXBlbGluZS5nZW5lcmF0ZVJodW1iQXJjKHtcbiAqICAgcG9zaXRvbnM6IHBvc2l0aW9uc1xuICogfSk7XG4gKi9cblBvbHlsaW5lUGlwZWxpbmUuZ2VuZXJhdGVSaHVtYkFyYyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIGlmICghZGVmaW5lZChvcHRpb25zKSkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICB2YXIgcG9zaXRpb25zID0gb3B0aW9ucy5wb3NpdGlvbnM7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChwb3NpdGlvbnMpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy5wb3NpdGlvbnMgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICB2YXIgZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZWxsaXBzb2lkLCBFbGxpcHNvaWQuV0dTODQpO1xuICB2YXIgaGVpZ2h0ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuaGVpZ2h0LCAwKTtcbiAgdmFyIGhhc0hlaWdodEFycmF5ID0gQXJyYXkuaXNBcnJheShoZWlnaHQpO1xuXG4gIGlmIChsZW5ndGggPCAxKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgIHZhciBwID0gZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2UocG9zaXRpb25zWzBdLCBzY2FsZUZpcnN0KTtcbiAgICBoZWlnaHQgPSBoYXNIZWlnaHRBcnJheSA/IGhlaWdodFswXSA6IGhlaWdodDtcbiAgICBpZiAoaGVpZ2h0ICE9PSAwKSB7XG4gICAgICB2YXIgbiA9IGVsbGlwc29pZC5nZW9kZXRpY1N1cmZhY2VOb3JtYWwocCwgY2FydGVzaWFuKTtcbiAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihuLCBoZWlnaHQsIG4pO1xuICAgICAgQ2FydGVzaWFuMy5hZGQocCwgbiwgcCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtwLngsIHAueSwgcC56XTtcbiAgfVxuXG4gIHZhciBncmFudWxhcml0eSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmdyYW51bGFyaXR5LFxuICAgIENlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFXG4gICk7XG5cbiAgdmFyIG51bVBvaW50cyA9IDA7XG4gIHZhciBpO1xuXG4gIHZhciBjMCA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhcbiAgICBwb3NpdGlvbnNbMF0sXG4gICAgc2NyYXRjaENhcnRvZ3JhcGhpYzBcbiAgKTtcbiAgdmFyIGMxO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgYzEgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgICBwb3NpdGlvbnNbaSArIDFdLFxuICAgICAgc2NyYXRjaENhcnRvZ3JhcGhpYzFcbiAgICApO1xuICAgIG51bVBvaW50cyArPSBQb2x5bGluZVBpcGVsaW5lLm51bWJlck9mUG9pbnRzUmh1bWJMaW5lKGMwLCBjMSwgZ3JhbnVsYXJpdHkpO1xuICAgIGMwID0gQ2FydG9ncmFwaGljLmNsb25lKGMxLCBzY3JhdGNoQ2FydG9ncmFwaGljMCk7XG4gIH1cblxuICB2YXIgYXJyYXlMZW5ndGggPSAobnVtUG9pbnRzICsgMSkgKiAzO1xuICB2YXIgbmV3UG9zaXRpb25zID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgdmFyIG9mZnNldCA9IDA7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aCAtIDE7IGkrKykge1xuICAgIHZhciBwMCA9IHBvc2l0aW9uc1tpXTtcbiAgICB2YXIgcDEgPSBwb3NpdGlvbnNbaSArIDFdO1xuXG4gICAgdmFyIGgwID0gaGFzSGVpZ2h0QXJyYXkgPyBoZWlnaHRbaV0gOiBoZWlnaHQ7XG4gICAgdmFyIGgxID0gaGFzSGVpZ2h0QXJyYXkgPyBoZWlnaHRbaSArIDFdIDogaGVpZ2h0O1xuXG4gICAgb2Zmc2V0ID0gZ2VuZXJhdGVDYXJ0ZXNpYW5SaHVtYkFyYyhcbiAgICAgIHAwLFxuICAgICAgcDEsXG4gICAgICBncmFudWxhcml0eSxcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIGgwLFxuICAgICAgaDEsXG4gICAgICBuZXdQb3NpdGlvbnMsXG4gICAgICBvZmZzZXRcbiAgICApO1xuICB9XG5cbiAgc3ViZGl2aWRlSGVpZ2h0c1NjcmF0Y2hBcnJheS5sZW5ndGggPSAwO1xuXG4gIHZhciBsYXN0UG9pbnQgPSBwb3NpdGlvbnNbbGVuZ3RoIC0gMV07XG4gIHZhciBjYXJ0byA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhsYXN0UG9pbnQsIGNhcnRvMSk7XG4gIGNhcnRvLmhlaWdodCA9IGhhc0hlaWdodEFycmF5ID8gaGVpZ2h0W2xlbmd0aCAtIDFdIDogaGVpZ2h0O1xuICB2YXIgY2FydCA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihjYXJ0bywgY2FydGVzaWFuKTtcbiAgQ2FydGVzaWFuMy5wYWNrKGNhcnQsIG5ld1Bvc2l0aW9ucywgYXJyYXlMZW5ndGggLSAzKTtcblxuICByZXR1cm4gbmV3UG9zaXRpb25zO1xufTtcblxuLyoqXG4gKiBTdWJkaXZpZGVzIHBvbHlsaW5lIGFuZCByYWlzZXMgYWxsIHBvaW50cyB0byB0aGUgc3BlY2lmaWVkIGhlaWdodC4gUmV0dXJucyBhbiBhcnJheSBvZiBuZXcge0NhcnRlc2lhbjN9IHBvc2l0aW9ucy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM1tdfSBvcHRpb25zLnBvc2l0aW9ucyBUaGUgYXJyYXkgb2YgdHlwZSB7Q2FydGVzaWFuM30gcmVwcmVzZW50aW5nIHBvc2l0aW9ucy5cbiAqIEBwYXJhbSB7TnVtYmVyfE51bWJlcltdfSBbb3B0aW9ucy5oZWlnaHQ9MC4wXSBBIG51bWJlciBvciBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyB0aGUgaGVpZ2h0cyBvZiBlYWNoIHBvc2l0aW9uLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmdyYW51bGFyaXR5ID0gQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVdIFRoZSBkaXN0YW5jZSwgaW4gcmFkaWFucywgYmV0d2VlbiBlYWNoIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUuIERldGVybWluZXMgdGhlIG51bWJlciBvZiBwb3NpdGlvbnMgaW4gdGhlIGJ1ZmZlci5cbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWQ9RWxsaXBzb2lkLldHUzg0XSBUaGUgZWxsaXBzb2lkIG9uIHdoaWNoIHRoZSBwb3NpdGlvbnMgbGllLlxuICogQHJldHVybnMge0NhcnRlc2lhbjNbXX0gQSBuZXcgYXJyYXkgb2YgY2FydGVzaWFuMyBwb3NpdGlvbnMgdGhhdCBoYXZlIGJlZW4gc3ViZGl2aWRlZCBhbmQgcmFpc2VkIHRvIHRoZSBzdXJmYWNlIG9mIHRoZSBlbGxpcHNvaWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBwb3NpdGlvbnMgPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgLTEwNS4wLCA0MC4wLFxuICogICAtMTAwLjAsIDM4LjAsXG4gKiAgIC0xMDUuMCwgMzUuMCxcbiAqICAgLTEwMC4wLCAzMi4wXG4gKiBdKTtcbiAqIHZhciBzdXJmYWNlUG9zaXRpb25zID0gQ2VzaXVtLlBvbHlsaW5lUGlwZWxpbmUuZ2VuZXJhdGVDYXJ0ZXNpYW5BcmMoe1xuICogICBwb3NpdG9uczogcG9zaXRpb25zXG4gKiB9KTtcbiAqL1xuUG9seWxpbmVQaXBlbGluZS5nZW5lcmF0ZUNhcnRlc2lhbkFyYyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHZhciBudW1iZXJBcnJheSA9IFBvbHlsaW5lUGlwZWxpbmUuZ2VuZXJhdGVBcmMob3B0aW9ucyk7XG4gIHZhciBzaXplID0gbnVtYmVyQXJyYXkubGVuZ3RoIC8gMztcbiAgdmFyIG5ld1Bvc2l0aW9ucyA9IG5ldyBBcnJheShzaXplKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICBuZXdQb3NpdGlvbnNbaV0gPSBDYXJ0ZXNpYW4zLnVucGFjayhudW1iZXJBcnJheSwgaSAqIDMpO1xuICB9XG4gIHJldHVybiBuZXdQb3NpdGlvbnM7XG59O1xuXG4vKipcbiAqIFN1YmRpdmlkZXMgcG9seWxpbmUgYW5kIHJhaXNlcyBhbGwgcG9pbnRzIHRvIHRoZSBzcGVjaWZpZWQgaGVpZ2h0IHVzaW5nIFJodW1iIExpbmVzLiBSZXR1cm5zIGFuIGFycmF5IG9mIG5ldyB7Q2FydGVzaWFuM30gcG9zaXRpb25zLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zW119IG9wdGlvbnMucG9zaXRpb25zIFRoZSBhcnJheSBvZiB0eXBlIHtDYXJ0ZXNpYW4zfSByZXByZXNlbnRpbmcgcG9zaXRpb25zLlxuICogQHBhcmFtIHtOdW1iZXJ8TnVtYmVyW119IFtvcHRpb25zLmhlaWdodD0wLjBdIEEgbnVtYmVyIG9yIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBoZWlnaHRzIG9mIGVhY2ggcG9zaXRpb24uXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZ3JhbnVsYXJpdHkgPSBDZXNpdW1NYXRoLlJBRElBTlNfUEVSX0RFR1JFRV0gVGhlIGRpc3RhbmNlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIGVhY2ggbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZS4gRGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIHBvc2l0aW9ucyBpbiB0aGUgYnVmZmVyLlxuICogQHBhcmFtIHtFbGxpcHNvaWR9IFtvcHRpb25zLmVsbGlwc29pZD1FbGxpcHNvaWQuV0dTODRdIFRoZSBlbGxpcHNvaWQgb24gd2hpY2ggdGhlIHBvc2l0aW9ucyBsaWUuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuM1tdfSBBIG5ldyBhcnJheSBvZiBjYXJ0ZXNpYW4zIHBvc2l0aW9ucyB0aGF0IGhhdmUgYmVlbiBzdWJkaXZpZGVkIGFuZCByYWlzZWQgdG8gdGhlIHN1cmZhY2Ugb2YgdGhlIGVsbGlwc29pZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvc2l0aW9ucyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAtMTA1LjAsIDQwLjAsXG4gKiAgIC0xMDAuMCwgMzguMCxcbiAqICAgLTEwNS4wLCAzNS4wLFxuICogICAtMTAwLjAsIDMyLjBcbiAqIF0pO1xuICogdmFyIHN1cmZhY2VQb3NpdGlvbnMgPSBDZXNpdW0uUG9seWxpbmVQaXBlbGluZS5nZW5lcmF0ZUNhcnRlc2lhblJodW1iQXJjKHtcbiAqICAgcG9zaXRvbnM6IHBvc2l0aW9uc1xuICogfSk7XG4gKi9cblBvbHlsaW5lUGlwZWxpbmUuZ2VuZXJhdGVDYXJ0ZXNpYW5SaHVtYkFyYyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHZhciBudW1iZXJBcnJheSA9IFBvbHlsaW5lUGlwZWxpbmUuZ2VuZXJhdGVSaHVtYkFyYyhvcHRpb25zKTtcbiAgdmFyIHNpemUgPSBudW1iZXJBcnJheS5sZW5ndGggLyAzO1xuICB2YXIgbmV3UG9zaXRpb25zID0gbmV3IEFycmF5KHNpemUpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgIG5ld1Bvc2l0aW9uc1tpXSA9IENhcnRlc2lhbjMudW5wYWNrKG51bWJlckFycmF5LCBpICogMyk7XG4gIH1cbiAgcmV0dXJuIG5ld1Bvc2l0aW9ucztcbn07XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZVBpcGVsaW5lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///61733\n')},23616:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(32378);\n/* harmony import */ var _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88108);\n/* harmony import */ var _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(48243);\n/* harmony import */ var _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60838);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60216);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84828);\n/* harmony import */ var _CornerType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(56439);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12572);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(50491);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(13616);\n/* harmony import */ var _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(56652);\n/* harmony import */ var _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(57552);\n/* harmony import */ var _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(22832);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(99417);\n/* harmony import */ var _oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(27671);\n/* harmony import */ var _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(78284);\n/* harmony import */ var _PolylineVolumeGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(39534);\n/* harmony import */ var _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(97264);\n/* harmony import */ var _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(67252);\n/* harmony import */ var _WindingOrder_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(32441);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction computeAttributes(\n  combinedPositions,\n  shape,\n  boundingRectangle,\n  vertexFormat\n) {\n  var attributes = new _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\n  if (vertexFormat.position) {\n    attributes.position = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n      componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n      componentsPerAttribute: 3,\n      values: combinedPositions,\n    });\n  }\n  var shapeLength = shape.length;\n  var vertexCount = combinedPositions.length / 3;\n  var length = (vertexCount - shapeLength * 2) / (shapeLength * 2);\n  var firstEndIndices = _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].triangulate */ .Z.triangulate(shape);\n\n  var indicesCount =\n    (length - 1) * shapeLength * 6 + firstEndIndices.length * 2;\n  var indices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].createTypedArray */ .Z.createTypedArray(vertexCount, indicesCount);\n  var i, j;\n  var ll, ul, ur, lr;\n  var offset = shapeLength * 2;\n  var index = 0;\n  for (i = 0; i < length - 1; i++) {\n    for (j = 0; j < shapeLength - 1; j++) {\n      ll = j * 2 + i * shapeLength * 2;\n      lr = ll + offset;\n      ul = ll + 1;\n      ur = ul + offset;\n\n      indices[index++] = ul;\n      indices[index++] = ll;\n      indices[index++] = ur;\n      indices[index++] = ur;\n      indices[index++] = ll;\n      indices[index++] = lr;\n    }\n    ll = shapeLength * 2 - 2 + i * shapeLength * 2;\n    ul = ll + 1;\n    ur = ul + offset;\n    lr = ll + offset;\n\n    indices[index++] = ul;\n    indices[index++] = ll;\n    indices[index++] = ur;\n    indices[index++] = ur;\n    indices[index++] = ll;\n    indices[index++] = lr;\n  }\n\n  if (vertexFormat.st || vertexFormat.tangent || vertexFormat.bitangent) {\n    // st required for tangent/bitangent calculation\n    var st = new Float32Array(vertexCount * 2);\n    var lengthSt = 1 / (length - 1);\n    var heightSt = 1 / boundingRectangle.height;\n    var heightOffset = boundingRectangle.height / 2;\n    var s, t;\n    var stindex = 0;\n    for (i = 0; i < length; i++) {\n      s = i * lengthSt;\n      t = heightSt * (shape[0].y + heightOffset);\n      st[stindex++] = s;\n      st[stindex++] = t;\n      for (j = 1; j < shapeLength; j++) {\n        t = heightSt * (shape[j].y + heightOffset);\n        st[stindex++] = s;\n        st[stindex++] = t;\n        st[stindex++] = s;\n        st[stindex++] = t;\n      }\n      t = heightSt * (shape[0].y + heightOffset);\n      st[stindex++] = s;\n      st[stindex++] = t;\n    }\n    for (j = 0; j < shapeLength; j++) {\n      s = 0;\n      t = heightSt * (shape[j].y + heightOffset);\n      st[stindex++] = s;\n      st[stindex++] = t;\n    }\n    for (j = 0; j < shapeLength; j++) {\n      s = (length - 1) * lengthSt;\n      t = heightSt * (shape[j].y + heightOffset);\n      st[stindex++] = s;\n      st[stindex++] = t;\n    }\n\n    attributes.st = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n      componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].FLOAT */ .Z.FLOAT,\n      componentsPerAttribute: 2,\n      values: new Float32Array(st),\n    });\n  }\n\n  var endOffset = vertexCount - shapeLength * 2;\n  for (i = 0; i < firstEndIndices.length; i += 3) {\n    var v0 = firstEndIndices[i] + endOffset;\n    var v1 = firstEndIndices[i + 1] + endOffset;\n    var v2 = firstEndIndices[i + 2] + endOffset;\n\n    indices[index++] = v0;\n    indices[index++] = v1;\n    indices[index++] = v2;\n    indices[index++] = v2 + shapeLength;\n    indices[index++] = v1 + shapeLength;\n    indices[index++] = v0 + shapeLength;\n  }\n\n  var geometry = new _Geometry_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    attributes: attributes,\n    indices: indices,\n    boundingSphere: _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromVertices */ .Z.fromVertices(combinedPositions),\n    primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n  });\n\n  if (vertexFormat.normal) {\n    geometry = _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].computeNormal */ .Z.computeNormal(geometry);\n  }\n\n  if (vertexFormat.tangent || vertexFormat.bitangent) {\n    try {\n      geometry = _GeometryPipeline_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].computeTangentAndBitangent */ .Z.computeTangentAndBitangent(geometry);\n    } catch (e) {\n      (0,_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(\n        "polyline-volume-tangent-bitangent",\n        "Unable to compute tangents and bitangents for polyline volume geometry"\n      );\n      //TODO https://github.com/CesiumGS/cesium/issues/3609\n    }\n\n    if (!vertexFormat.tangent) {\n      geometry.attributes.tangent = undefined;\n    }\n    if (!vertexFormat.bitangent) {\n      geometry.attributes.bitangent = undefined;\n    }\n    if (!vertexFormat.st) {\n      geometry.attributes.st = undefined;\n    }\n  }\n\n  return geometry;\n}\n\n/**\n * A description of a polyline with a volume (a 2D shape extruded along a polyline).\n *\n * @alias PolylineVolumeGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.polylinePositions An array of {@link Cartesian3} positions that define the center of the polyline volume.\n * @param {Cartesian2[]} options.shapePositions An array of {@link Cartesian2} positions that define the shape to be extruded along the polyline\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n * @param {CornerType} [options.cornerType=CornerType.ROUNDED] Determines the style of the corners.\n *\n * @see PolylineVolumeGeometry#createGeometry\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Polyline%20Volume.html|Cesium Sandcastle Polyline Volume Demo}\n *\n * @example\n * function computeCircle(radius) {\n *   var positions = [];\n *   for (var i = 0; i < 360; i++) {\n *     var radians = Cesium.Math.toRadians(i);\n *     positions.push(new Cesium.Cartesian2(radius * Math.cos(radians), radius * Math.sin(radians)));\n *   }\n *   return positions;\n * }\n *\n * var volume = new Cesium.PolylineVolumeGeometry({\n *   vertexFormat : Cesium.VertexFormat.POSITION_ONLY,\n *   polylinePositions : Cesium.Cartesian3.fromDegreesArray([\n *     -72.0, 40.0,\n *     -70.0, 35.0\n *   ]),\n *   shapePositions : computeCircle(100000.0)\n * });\n */\nfunction PolylineVolumeGeometry(options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var positions = options.polylinePositions;\n  var shape = options.shapePositions;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(positions)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("options.polylinePositions is required.");\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(shape)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("options.shapePositions is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this._positions = positions;\n  this._shape = shape;\n  this._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(\n    (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].WGS84 */ .Z.WGS84)\n  );\n  this._cornerType = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.cornerType, _CornerType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].ROUNDED */ .Z.ROUNDED);\n  this._vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].clone */ .Z.clone(\n    (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.vertexFormat, _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].DEFAULT */ .Z.DEFAULT)\n  );\n  this._granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(\n    options.granularity,\n    _Math_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  );\n  this._workerName = "createPolylineVolumeGeometry";\n\n  var numComponents = 1 + positions.length * _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength;\n  numComponents += 1 + shape.length * _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength;\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength =\n    numComponents + _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].packedLength */ .Z.packedLength + _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].packedLength */ .Z.packedLength + 2;\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {PolylineVolumeGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nPolylineVolumeGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(value)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("value is required");\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(array)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("array is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var i;\n\n  var positions = value._positions;\n  var length = positions.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength) {\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(positions[i], array, startingIndex);\n  }\n\n  var shape = value._shape;\n  length = shape.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength) {\n    _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].pack */ .Z.pack(shape[i], array, startingIndex);\n  }\n\n  _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].pack */ .Z.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].packedLength */ .Z.packedLength;\n\n  _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].pack */ .Z.pack(value._vertexFormat, array, startingIndex);\n  startingIndex += _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].packedLength */ .Z.packedLength;\n\n  array[startingIndex++] = value._cornerType;\n  array[startingIndex] = value._granularity;\n\n  return array;\n};\n\nvar scratchEllipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].UNIT_SPHERE */ .Z.UNIT_SPHERE);\nvar scratchVertexFormat = new _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z();\nvar scratchOptions = {\n  polylinePositions: undefined,\n  shapePositions: undefined,\n  ellipsoid: scratchEllipsoid,\n  vertexFormat: scratchVertexFormat,\n  cornerType: undefined,\n  granularity: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {PolylineVolumeGeometry} [result] The object into which to store the result.\n * @returns {PolylineVolumeGeometry} The modified result parameter or a new PolylineVolumeGeometry instance if one was not provided.\n */\nPolylineVolumeGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(array)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("array is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var i;\n\n  var length = array[startingIndex++];\n  var positions = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength) {\n    positions[i] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(array, startingIndex);\n  }\n\n  length = array[startingIndex++];\n  var shape = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength) {\n    shape[i] = _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].unpack */ .Z.unpack(array, startingIndex);\n  }\n\n  var ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].unpack */ .Z.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].packedLength */ .Z.packedLength;\n\n  var vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].unpack */ .Z.unpack(\n    array,\n    startingIndex,\n    scratchVertexFormat\n  );\n  startingIndex += _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].packedLength */ .Z.packedLength;\n\n  var cornerType = array[startingIndex++];\n  var granularity = array[startingIndex];\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(result)) {\n    scratchOptions.polylinePositions = positions;\n    scratchOptions.shapePositions = shape;\n    scratchOptions.cornerType = cornerType;\n    scratchOptions.granularity = granularity;\n    return new PolylineVolumeGeometry(scratchOptions);\n  }\n\n  result._positions = positions;\n  result._shape = shape;\n  result._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(ellipsoid, result._ellipsoid);\n  result._vertexFormat = _VertexFormat_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].clone */ .Z.clone(vertexFormat, result._vertexFormat);\n  result._cornerType = cornerType;\n  result._granularity = granularity;\n\n  return result;\n};\n\nvar brScratch = new _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * Computes the geometric representation of a polyline with a volume, including its vertices, indices, and a bounding sphere.\n *\n * @param {PolylineVolumeGeometry} polylineVolumeGeometry A description of the polyline volume.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nPolylineVolumeGeometry.createGeometry = function (polylineVolumeGeometry) {\n  var positions = polylineVolumeGeometry._positions;\n  var cleanPositions = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    positions,\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon\n  );\n  var shape2D = polylineVolumeGeometry._shape;\n  shape2D = _PolylineVolumeGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].removeDuplicatesFromShape */ .Z.removeDuplicatesFromShape(shape2D);\n\n  if (cleanPositions.length < 2 || shape2D.length < 3) {\n    return undefined;\n  }\n\n  if (\n    _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(shape2D) === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE\n  ) {\n    shape2D.reverse();\n  }\n  var boundingRectangle = _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromPoints */ .Z.fromPoints(shape2D, brScratch);\n\n  var computedPositions = _PolylineVolumeGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].computePositions */ .Z.computePositions(\n    cleanPositions,\n    shape2D,\n    boundingRectangle,\n    polylineVolumeGeometry,\n    true\n  );\n  return computeAttributes(\n    computedPositions,\n    shape2D,\n    boundingRectangle,\n    polylineVolumeGeometry._vertexFormat\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolylineVolumeGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUI7QUFDcEM7O0FBRUE7QUFDQTs7QUFFQSxjQUFjLFlBQVksc0JBQXNCLHlGQUF1QjtBQUN2RSxlQUFlLDZFQUFpQjtBQUNoQzs7QUFFQSxrQkFBa0IsNEVBQWdCO0FBQ2xDLG1CQUFtQix3RkFBc0I7O0FBRXpDLHFCQUFxQixnRkFBbUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNEZBQXlCOztBQUU1QztBQUNBOztBQUVBLE9BQU8saUVBQU87QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNCQUFzQiwwRUFBZTtBQUNyQyx5QkFBeUIsOEVBQWtCO0FBQzNDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxvQkFBb0Isc0VBQWlCOztBQUVyQztBQUNBO0FBQ0E7QUFDQSxXQUFXLHdCQUF3QjtBQUNuQyxhQUFhLG9CQUFvQjtBQUNqQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsOEVBQXFCO0FBQzVDO0FBQ0EsSUFBSSwyRkFBd0I7QUFDNUI7QUFDQTtBQUNBLFlBQVksdUlBQXVEOztBQUVuRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLGlIQUFxQyxjQUFjLHNGQUFzQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNEZBQTRCOztBQUV0RCwwQkFBMEIscUhBQThDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsc0JBQXNCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9Qb2x5bGluZVZvbHVtZUdlb21ldHJ5LmpzPzIyYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFycmF5UmVtb3ZlRHVwbGljYXRlcyBmcm9tIFwiLi9hcnJheVJlbW92ZUR1cGxpY2F0ZXMuanNcIjtcbmltcG9ydCBCb3VuZGluZ1JlY3RhbmdsZSBmcm9tIFwiLi9Cb3VuZGluZ1JlY3RhbmdsZS5qc1wiO1xuaW1wb3J0IEJvdW5kaW5nU3BoZXJlIGZyb20gXCIuL0JvdW5kaW5nU3BoZXJlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4vQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBDb3JuZXJUeXBlIGZyb20gXCIuL0Nvcm5lclR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4vZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4vRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFbGxpcHNvaWQgZnJvbSBcIi4vRWxsaXBzb2lkLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnkuanNcIjtcbmltcG9ydCBHZW9tZXRyeUF0dHJpYnV0ZSBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5QXR0cmlidXRlcyBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZXMuanNcIjtcbmltcG9ydCBHZW9tZXRyeVBpcGVsaW5lIGZyb20gXCIuL0dlb21ldHJ5UGlwZWxpbmUuanNcIjtcbmltcG9ydCBJbmRleERhdGF0eXBlIGZyb20gXCIuL0luZGV4RGF0YXR5cGUuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuL01hdGguanNcIjtcbmltcG9ydCBvbmVUaW1lV2FybmluZyBmcm9tIFwiLi9vbmVUaW1lV2FybmluZy5qc1wiO1xuaW1wb3J0IFBvbHlnb25QaXBlbGluZSBmcm9tIFwiLi9Qb2x5Z29uUGlwZWxpbmUuanNcIjtcbmltcG9ydCBQb2x5bGluZVZvbHVtZUdlb21ldHJ5TGlicmFyeSBmcm9tIFwiLi9Qb2x5bGluZVZvbHVtZUdlb21ldHJ5TGlicmFyeS5qc1wiO1xuaW1wb3J0IFByaW1pdGl2ZVR5cGUgZnJvbSBcIi4vUHJpbWl0aXZlVHlwZS5qc1wiO1xuaW1wb3J0IFZlcnRleEZvcm1hdCBmcm9tIFwiLi9WZXJ0ZXhGb3JtYXQuanNcIjtcbmltcG9ydCBXaW5kaW5nT3JkZXIgZnJvbSBcIi4vV2luZGluZ09yZGVyLmpzXCI7XG5cbmZ1bmN0aW9uIGNvbXB1dGVBdHRyaWJ1dGVzKFxuICBjb21iaW5lZFBvc2l0aW9ucyxcbiAgc2hhcGUsXG4gIGJvdW5kaW5nUmVjdGFuZ2xlLFxuICB2ZXJ0ZXhGb3JtYXRcbikge1xuICB2YXIgYXR0cmlidXRlcyA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZXMoKTtcbiAgaWYgKHZlcnRleEZvcm1hdC5wb3NpdGlvbikge1xuICAgIGF0dHJpYnV0ZXMucG9zaXRpb24gPSBuZXcgR2VvbWV0cnlBdHRyaWJ1dGUoe1xuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkRPVUJMRSxcbiAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICB2YWx1ZXM6IGNvbWJpbmVkUG9zaXRpb25zLFxuICAgIH0pO1xuICB9XG4gIHZhciBzaGFwZUxlbmd0aCA9IHNoYXBlLmxlbmd0aDtcbiAgdmFyIHZlcnRleENvdW50ID0gY29tYmluZWRQb3NpdGlvbnMubGVuZ3RoIC8gMztcbiAgdmFyIGxlbmd0aCA9ICh2ZXJ0ZXhDb3VudCAtIHNoYXBlTGVuZ3RoICogMikgLyAoc2hhcGVMZW5ndGggKiAyKTtcbiAgdmFyIGZpcnN0RW5kSW5kaWNlcyA9IFBvbHlnb25QaXBlbGluZS50cmlhbmd1bGF0ZShzaGFwZSk7XG5cbiAgdmFyIGluZGljZXNDb3VudCA9XG4gICAgKGxlbmd0aCAtIDEpICogc2hhcGVMZW5ndGggKiA2ICsgZmlyc3RFbmRJbmRpY2VzLmxlbmd0aCAqIDI7XG4gIHZhciBpbmRpY2VzID0gSW5kZXhEYXRhdHlwZS5jcmVhdGVUeXBlZEFycmF5KHZlcnRleENvdW50LCBpbmRpY2VzQ291bnQpO1xuICB2YXIgaSwgajtcbiAgdmFyIGxsLCB1bCwgdXIsIGxyO1xuICB2YXIgb2Zmc2V0ID0gc2hhcGVMZW5ndGggKiAyO1xuICB2YXIgaW5kZXggPSAwO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgZm9yIChqID0gMDsgaiA8IHNoYXBlTGVuZ3RoIC0gMTsgaisrKSB7XG4gICAgICBsbCA9IGogKiAyICsgaSAqIHNoYXBlTGVuZ3RoICogMjtcbiAgICAgIGxyID0gbGwgKyBvZmZzZXQ7XG4gICAgICB1bCA9IGxsICsgMTtcbiAgICAgIHVyID0gdWwgKyBvZmZzZXQ7XG5cbiAgICAgIGluZGljZXNbaW5kZXgrK10gPSB1bDtcbiAgICAgIGluZGljZXNbaW5kZXgrK10gPSBsbDtcbiAgICAgIGluZGljZXNbaW5kZXgrK10gPSB1cjtcbiAgICAgIGluZGljZXNbaW5kZXgrK10gPSB1cjtcbiAgICAgIGluZGljZXNbaW5kZXgrK10gPSBsbDtcbiAgICAgIGluZGljZXNbaW5kZXgrK10gPSBscjtcbiAgICB9XG4gICAgbGwgPSBzaGFwZUxlbmd0aCAqIDIgLSAyICsgaSAqIHNoYXBlTGVuZ3RoICogMjtcbiAgICB1bCA9IGxsICsgMTtcbiAgICB1ciA9IHVsICsgb2Zmc2V0O1xuICAgIGxyID0gbGwgKyBvZmZzZXQ7XG5cbiAgICBpbmRpY2VzW2luZGV4KytdID0gdWw7XG4gICAgaW5kaWNlc1tpbmRleCsrXSA9IGxsO1xuICAgIGluZGljZXNbaW5kZXgrK10gPSB1cjtcbiAgICBpbmRpY2VzW2luZGV4KytdID0gdXI7XG4gICAgaW5kaWNlc1tpbmRleCsrXSA9IGxsO1xuICAgIGluZGljZXNbaW5kZXgrK10gPSBscjtcbiAgfVxuXG4gIGlmICh2ZXJ0ZXhGb3JtYXQuc3QgfHwgdmVydGV4Rm9ybWF0LnRhbmdlbnQgfHwgdmVydGV4Rm9ybWF0LmJpdGFuZ2VudCkge1xuICAgIC8vIHN0IHJlcXVpcmVkIGZvciB0YW5nZW50L2JpdGFuZ2VudCBjYWxjdWxhdGlvblxuICAgIHZhciBzdCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAyKTtcbiAgICB2YXIgbGVuZ3RoU3QgPSAxIC8gKGxlbmd0aCAtIDEpO1xuICAgIHZhciBoZWlnaHRTdCA9IDEgLyBib3VuZGluZ1JlY3RhbmdsZS5oZWlnaHQ7XG4gICAgdmFyIGhlaWdodE9mZnNldCA9IGJvdW5kaW5nUmVjdGFuZ2xlLmhlaWdodCAvIDI7XG4gICAgdmFyIHMsIHQ7XG4gICAgdmFyIHN0aW5kZXggPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcyA9IGkgKiBsZW5ndGhTdDtcbiAgICAgIHQgPSBoZWlnaHRTdCAqIChzaGFwZVswXS55ICsgaGVpZ2h0T2Zmc2V0KTtcbiAgICAgIHN0W3N0aW5kZXgrK10gPSBzO1xuICAgICAgc3Rbc3RpbmRleCsrXSA9IHQ7XG4gICAgICBmb3IgKGogPSAxOyBqIDwgc2hhcGVMZW5ndGg7IGorKykge1xuICAgICAgICB0ID0gaGVpZ2h0U3QgKiAoc2hhcGVbal0ueSArIGhlaWdodE9mZnNldCk7XG4gICAgICAgIHN0W3N0aW5kZXgrK10gPSBzO1xuICAgICAgICBzdFtzdGluZGV4KytdID0gdDtcbiAgICAgICAgc3Rbc3RpbmRleCsrXSA9IHM7XG4gICAgICAgIHN0W3N0aW5kZXgrK10gPSB0O1xuICAgICAgfVxuICAgICAgdCA9IGhlaWdodFN0ICogKHNoYXBlWzBdLnkgKyBoZWlnaHRPZmZzZXQpO1xuICAgICAgc3Rbc3RpbmRleCsrXSA9IHM7XG4gICAgICBzdFtzdGluZGV4KytdID0gdDtcbiAgICB9XG4gICAgZm9yIChqID0gMDsgaiA8IHNoYXBlTGVuZ3RoOyBqKyspIHtcbiAgICAgIHMgPSAwO1xuICAgICAgdCA9IGhlaWdodFN0ICogKHNoYXBlW2pdLnkgKyBoZWlnaHRPZmZzZXQpO1xuICAgICAgc3Rbc3RpbmRleCsrXSA9IHM7XG4gICAgICBzdFtzdGluZGV4KytdID0gdDtcbiAgICB9XG4gICAgZm9yIChqID0gMDsgaiA8IHNoYXBlTGVuZ3RoOyBqKyspIHtcbiAgICAgIHMgPSAobGVuZ3RoIC0gMSkgKiBsZW5ndGhTdDtcbiAgICAgIHQgPSBoZWlnaHRTdCAqIChzaGFwZVtqXS55ICsgaGVpZ2h0T2Zmc2V0KTtcbiAgICAgIHN0W3N0aW5kZXgrK10gPSBzO1xuICAgICAgc3Rbc3RpbmRleCsrXSA9IHQ7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlcy5zdCA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZSh7XG4gICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAyLFxuICAgICAgdmFsdWVzOiBuZXcgRmxvYXQzMkFycmF5KHN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBlbmRPZmZzZXQgPSB2ZXJ0ZXhDb3VudCAtIHNoYXBlTGVuZ3RoICogMjtcbiAgZm9yIChpID0gMDsgaSA8IGZpcnN0RW5kSW5kaWNlcy5sZW5ndGg7IGkgKz0gMykge1xuICAgIHZhciB2MCA9IGZpcnN0RW5kSW5kaWNlc1tpXSArIGVuZE9mZnNldDtcbiAgICB2YXIgdjEgPSBmaXJzdEVuZEluZGljZXNbaSArIDFdICsgZW5kT2Zmc2V0O1xuICAgIHZhciB2MiA9IGZpcnN0RW5kSW5kaWNlc1tpICsgMl0gKyBlbmRPZmZzZXQ7XG5cbiAgICBpbmRpY2VzW2luZGV4KytdID0gdjA7XG4gICAgaW5kaWNlc1tpbmRleCsrXSA9IHYxO1xuICAgIGluZGljZXNbaW5kZXgrK10gPSB2MjtcbiAgICBpbmRpY2VzW2luZGV4KytdID0gdjIgKyBzaGFwZUxlbmd0aDtcbiAgICBpbmRpY2VzW2luZGV4KytdID0gdjEgKyBzaGFwZUxlbmd0aDtcbiAgICBpbmRpY2VzW2luZGV4KytdID0gdjAgKyBzaGFwZUxlbmd0aDtcbiAgfVxuXG4gIHZhciBnZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSh7XG4gICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgICBpbmRpY2VzOiBpbmRpY2VzLFxuICAgIGJvdW5kaW5nU3BoZXJlOiBCb3VuZGluZ1NwaGVyZS5mcm9tVmVydGljZXMoY29tYmluZWRQb3NpdGlvbnMpLFxuICAgIHByaW1pdGl2ZVR5cGU6IFByaW1pdGl2ZVR5cGUuVFJJQU5HTEVTLFxuICB9KTtcblxuICBpZiAodmVydGV4Rm9ybWF0Lm5vcm1hbCkge1xuICAgIGdlb21ldHJ5ID0gR2VvbWV0cnlQaXBlbGluZS5jb21wdXRlTm9ybWFsKGdlb21ldHJ5KTtcbiAgfVxuXG4gIGlmICh2ZXJ0ZXhGb3JtYXQudGFuZ2VudCB8fCB2ZXJ0ZXhGb3JtYXQuYml0YW5nZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGdlb21ldHJ5ID0gR2VvbWV0cnlQaXBlbGluZS5jb21wdXRlVGFuZ2VudEFuZEJpdGFuZ2VudChnZW9tZXRyeSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgIFwicG9seWxpbmUtdm9sdW1lLXRhbmdlbnQtYml0YW5nZW50XCIsXG4gICAgICAgIFwiVW5hYmxlIHRvIGNvbXB1dGUgdGFuZ2VudHMgYW5kIGJpdGFuZ2VudHMgZm9yIHBvbHlsaW5lIHZvbHVtZSBnZW9tZXRyeVwiXG4gICAgICApO1xuICAgICAgLy9UT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy9jZXNpdW0vaXNzdWVzLzM2MDlcbiAgICB9XG5cbiAgICBpZiAoIXZlcnRleEZvcm1hdC50YW5nZW50KSB7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnRhbmdlbnQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghdmVydGV4Rm9ybWF0LmJpdGFuZ2VudCkge1xuICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5iaXRhbmdlbnQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghdmVydGV4Rm9ybWF0LnN0KSB7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnN0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZW9tZXRyeTtcbn1cblxuLyoqXG4gKiBBIGRlc2NyaXB0aW9uIG9mIGEgcG9seWxpbmUgd2l0aCBhIHZvbHVtZSAoYSAyRCBzaGFwZSBleHRydWRlZCBhbG9uZyBhIHBvbHlsaW5lKS5cbiAqXG4gKiBAYWxpYXMgUG9seWxpbmVWb2x1bWVHZW9tZXRyeVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zW119IG9wdGlvbnMucG9seWxpbmVQb3NpdGlvbnMgQW4gYXJyYXkgb2Yge0BsaW5rIENhcnRlc2lhbjN9IHBvc2l0aW9ucyB0aGF0IGRlZmluZSB0aGUgY2VudGVyIG9mIHRoZSBwb2x5bGluZSB2b2x1bWUuXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjJbXX0gb3B0aW9ucy5zaGFwZVBvc2l0aW9ucyBBbiBhcnJheSBvZiB7QGxpbmsgQ2FydGVzaWFuMn0gcG9zaXRpb25zIHRoYXQgZGVmaW5lIHRoZSBzaGFwZSB0byBiZSBleHRydWRlZCBhbG9uZyB0aGUgcG9seWxpbmVcbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWQ9RWxsaXBzb2lkLldHUzg0XSBUaGUgZWxsaXBzb2lkIHRvIGJlIHVzZWQgYXMgYSByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZ3JhbnVsYXJpdHk9Q2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVdIFRoZSBkaXN0YW5jZSwgaW4gcmFkaWFucywgYmV0d2VlbiBlYWNoIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUuIERldGVybWluZXMgdGhlIG51bWJlciBvZiBwb3NpdGlvbnMgaW4gdGhlIGJ1ZmZlci5cbiAqIEBwYXJhbSB7VmVydGV4Rm9ybWF0fSBbb3B0aW9ucy52ZXJ0ZXhGb3JtYXQ9VmVydGV4Rm9ybWF0LkRFRkFVTFRdIFRoZSB2ZXJ0ZXggYXR0cmlidXRlcyB0byBiZSBjb21wdXRlZC5cbiAqIEBwYXJhbSB7Q29ybmVyVHlwZX0gW29wdGlvbnMuY29ybmVyVHlwZT1Db3JuZXJUeXBlLlJPVU5ERURdIERldGVybWluZXMgdGhlIHN0eWxlIG9mIHRoZSBjb3JuZXJzLlxuICpcbiAqIEBzZWUgUG9seWxpbmVWb2x1bWVHZW9tZXRyeSNjcmVhdGVHZW9tZXRyeVxuICpcbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1Qb2x5bGluZSUyMFZvbHVtZS5odG1sfENlc2l1bSBTYW5kY2FzdGxlIFBvbHlsaW5lIFZvbHVtZSBEZW1vfVxuICpcbiAqIEBleGFtcGxlXG4gKiBmdW5jdGlvbiBjb21wdXRlQ2lyY2xlKHJhZGl1cykge1xuICogICB2YXIgcG9zaXRpb25zID0gW107XG4gKiAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzYwOyBpKyspIHtcbiAqICAgICB2YXIgcmFkaWFucyA9IENlc2l1bS5NYXRoLnRvUmFkaWFucyhpKTtcbiAqICAgICBwb3NpdGlvbnMucHVzaChuZXcgQ2VzaXVtLkNhcnRlc2lhbjIocmFkaXVzICogTWF0aC5jb3MocmFkaWFucyksIHJhZGl1cyAqIE1hdGguc2luKHJhZGlhbnMpKSk7XG4gKiAgIH1cbiAqICAgcmV0dXJuIHBvc2l0aW9ucztcbiAqIH1cbiAqXG4gKiB2YXIgdm9sdW1lID0gbmV3IENlc2l1bS5Qb2x5bGluZVZvbHVtZUdlb21ldHJ5KHtcbiAqICAgdmVydGV4Rm9ybWF0IDogQ2VzaXVtLlZlcnRleEZvcm1hdC5QT1NJVElPTl9PTkxZLFxuICogICBwb2x5bGluZVBvc2l0aW9ucyA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgIC03Mi4wLCA0MC4wLFxuICogICAgIC03MC4wLCAzNS4wXG4gKiAgIF0pLFxuICogICBzaGFwZVBvc2l0aW9ucyA6IGNvbXB1dGVDaXJjbGUoMTAwMDAwLjApXG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gUG9seWxpbmVWb2x1bWVHZW9tZXRyeShvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBwb3NpdGlvbnMgPSBvcHRpb25zLnBvbHlsaW5lUG9zaXRpb25zO1xuICB2YXIgc2hhcGUgPSBvcHRpb25zLnNoYXBlUG9zaXRpb25zO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChwb3NpdGlvbnMpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy5wb2x5bGluZVBvc2l0aW9ucyBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKHNoYXBlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIm9wdGlvbnMuc2hhcGVQb3NpdGlvbnMgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX3Bvc2l0aW9ucyA9IHBvc2l0aW9ucztcbiAgdGhpcy5fc2hhcGUgPSBzaGFwZTtcbiAgdGhpcy5fZWxsaXBzb2lkID0gRWxsaXBzb2lkLmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLmVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KVxuICApO1xuICB0aGlzLl9jb3JuZXJUeXBlID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuY29ybmVyVHlwZSwgQ29ybmVyVHlwZS5ST1VOREVEKTtcbiAgdGhpcy5fdmVydGV4Rm9ybWF0ID0gVmVydGV4Rm9ybWF0LmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLnZlcnRleEZvcm1hdCwgVmVydGV4Rm9ybWF0LkRFRkFVTFQpXG4gICk7XG4gIHRoaXMuX2dyYW51bGFyaXR5ID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZ3JhbnVsYXJpdHksXG4gICAgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVcbiAgKTtcbiAgdGhpcy5fd29ya2VyTmFtZSA9IFwiY3JlYXRlUG9seWxpbmVWb2x1bWVHZW9tZXRyeVwiO1xuXG4gIHZhciBudW1Db21wb25lbnRzID0gMSArIHBvc2l0aW9ucy5sZW5ndGggKiBDYXJ0ZXNpYW4zLnBhY2tlZExlbmd0aDtcbiAgbnVtQ29tcG9uZW50cyArPSAxICsgc2hhcGUubGVuZ3RoICogQ2FydGVzaWFuMi5wYWNrZWRMZW5ndGg7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdXNlZCB0byBwYWNrIHRoZSBvYmplY3QgaW50byBhbiBhcnJheS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRoaXMucGFja2VkTGVuZ3RoID1cbiAgICBudW1Db21wb25lbnRzICsgRWxsaXBzb2lkLnBhY2tlZExlbmd0aCArIFZlcnRleEZvcm1hdC5wYWNrZWRMZW5ndGggKyAyO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgcHJvdmlkZWQgaW5zdGFuY2UgaW50byB0aGUgcHJvdmlkZWQgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtQb2x5bGluZVZvbHVtZUdlb21ldHJ5fSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFjay5cbiAqIEBwYXJhbSB7TnVtYmVyW119IGFycmF5IFRoZSBhcnJheSB0byBwYWNrIGludG8uXG4gKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0aW5nSW5kZXg9MF0gVGhlIGluZGV4IGludG8gdGhlIGFycmF5IGF0IHdoaWNoIHRvIHN0YXJ0IHBhY2tpbmcgdGhlIGVsZW1lbnRzLlxuICpcbiAqIEByZXR1cm5zIHtOdW1iZXJbXX0gVGhlIGFycmF5IHRoYXQgd2FzIHBhY2tlZCBpbnRvXG4gKi9cblBvbHlsaW5lVm9sdW1lR2VvbWV0cnkucGFjayA9IGZ1bmN0aW9uICh2YWx1ZSwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChhcnJheSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJhcnJheSBpcyByZXF1aXJlZFwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBzdGFydGluZ0luZGV4ID0gZGVmYXVsdFZhbHVlKHN0YXJ0aW5nSW5kZXgsIDApO1xuXG4gIHZhciBpO1xuXG4gIHZhciBwb3NpdGlvbnMgPSB2YWx1ZS5fcG9zaXRpb25zO1xuICB2YXIgbGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IGxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2ksIHN0YXJ0aW5nSW5kZXggKz0gQ2FydGVzaWFuMy5wYWNrZWRMZW5ndGgpIHtcbiAgICBDYXJ0ZXNpYW4zLnBhY2socG9zaXRpb25zW2ldLCBhcnJheSwgc3RhcnRpbmdJbmRleCk7XG4gIH1cblxuICB2YXIgc2hhcGUgPSB2YWx1ZS5fc2hhcGU7XG4gIGxlbmd0aCA9IHNoYXBlLmxlbmd0aDtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleCsrXSA9IGxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2ksIHN0YXJ0aW5nSW5kZXggKz0gQ2FydGVzaWFuMi5wYWNrZWRMZW5ndGgpIHtcbiAgICBDYXJ0ZXNpYW4yLnBhY2soc2hhcGVbaV0sIGFycmF5LCBzdGFydGluZ0luZGV4KTtcbiAgfVxuXG4gIEVsbGlwc29pZC5wYWNrKHZhbHVlLl9lbGxpcHNvaWQsIGFycmF5LCBzdGFydGluZ0luZGV4KTtcbiAgc3RhcnRpbmdJbmRleCArPSBFbGxpcHNvaWQucGFja2VkTGVuZ3RoO1xuXG4gIFZlcnRleEZvcm1hdC5wYWNrKHZhbHVlLl92ZXJ0ZXhGb3JtYXQsIGFycmF5LCBzdGFydGluZ0luZGV4KTtcbiAgc3RhcnRpbmdJbmRleCArPSBWZXJ0ZXhGb3JtYXQucGFja2VkTGVuZ3RoO1xuXG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSB2YWx1ZS5fY29ybmVyVHlwZTtcbiAgYXJyYXlbc3RhcnRpbmdJbmRleF0gPSB2YWx1ZS5fZ3JhbnVsYXJpdHk7XG5cbiAgcmV0dXJuIGFycmF5O1xufTtcblxudmFyIHNjcmF0Y2hFbGxpcHNvaWQgPSBFbGxpcHNvaWQuY2xvbmUoRWxsaXBzb2lkLlVOSVRfU1BIRVJFKTtcbnZhciBzY3JhdGNoVmVydGV4Rm9ybWF0ID0gbmV3IFZlcnRleEZvcm1hdCgpO1xudmFyIHNjcmF0Y2hPcHRpb25zID0ge1xuICBwb2x5bGluZVBvc2l0aW9uczogdW5kZWZpbmVkLFxuICBzaGFwZVBvc2l0aW9uczogdW5kZWZpbmVkLFxuICBlbGxpcHNvaWQ6IHNjcmF0Y2hFbGxpcHNvaWQsXG4gIHZlcnRleEZvcm1hdDogc2NyYXRjaFZlcnRleEZvcm1hdCxcbiAgY29ybmVyVHlwZTogdW5kZWZpbmVkLFxuICBncmFudWxhcml0eTogdW5kZWZpbmVkLFxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgYW4gaW5zdGFuY2UgZnJvbSBhIHBhY2tlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcltdfSBhcnJheSBUaGUgcGFja2VkIGFycmF5LlxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydGluZ0luZGV4PTBdIFRoZSBzdGFydGluZyBpbmRleCBvZiB0aGUgZWxlbWVudCB0byBiZSB1bnBhY2tlZC5cbiAqIEBwYXJhbSB7UG9seWxpbmVWb2x1bWVHZW9tZXRyeX0gW3Jlc3VsdF0gVGhlIG9iamVjdCBpbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7UG9seWxpbmVWb2x1bWVHZW9tZXRyeX0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgUG9seWxpbmVWb2x1bWVHZW9tZXRyeSBpbnN0YW5jZSBpZiBvbmUgd2FzIG5vdCBwcm92aWRlZC5cbiAqL1xuUG9seWxpbmVWb2x1bWVHZW9tZXRyeS51bnBhY2sgPSBmdW5jdGlvbiAoYXJyYXksIHN0YXJ0aW5nSW5kZXgsIHJlc3VsdCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoYXJyYXkpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiYXJyYXkgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgc3RhcnRpbmdJbmRleCA9IGRlZmF1bHRWYWx1ZShzdGFydGluZ0luZGV4LCAwKTtcblxuICB2YXIgaTtcblxuICB2YXIgbGVuZ3RoID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIHBvc2l0aW9ucyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSwgc3RhcnRpbmdJbmRleCArPSBDYXJ0ZXNpYW4zLnBhY2tlZExlbmd0aCkge1xuICAgIHBvc2l0aW9uc1tpXSA9IENhcnRlc2lhbjMudW5wYWNrKGFycmF5LCBzdGFydGluZ0luZGV4KTtcbiAgfVxuXG4gIGxlbmd0aCA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBzaGFwZSA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSwgc3RhcnRpbmdJbmRleCArPSBDYXJ0ZXNpYW4yLnBhY2tlZExlbmd0aCkge1xuICAgIHNoYXBlW2ldID0gQ2FydGVzaWFuMi51bnBhY2soYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICB9XG5cbiAgdmFyIGVsbGlwc29pZCA9IEVsbGlwc29pZC51bnBhY2soYXJyYXksIHN0YXJ0aW5nSW5kZXgsIHNjcmF0Y2hFbGxpcHNvaWQpO1xuICBzdGFydGluZ0luZGV4ICs9IEVsbGlwc29pZC5wYWNrZWRMZW5ndGg7XG5cbiAgdmFyIHZlcnRleEZvcm1hdCA9IFZlcnRleEZvcm1hdC51bnBhY2soXG4gICAgYXJyYXksXG4gICAgc3RhcnRpbmdJbmRleCxcbiAgICBzY3JhdGNoVmVydGV4Rm9ybWF0XG4gICk7XG4gIHN0YXJ0aW5nSW5kZXggKz0gVmVydGV4Rm9ybWF0LnBhY2tlZExlbmd0aDtcblxuICB2YXIgY29ybmVyVHlwZSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBncmFudWxhcml0eSA9IGFycmF5W3N0YXJ0aW5nSW5kZXhdO1xuXG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgc2NyYXRjaE9wdGlvbnMucG9seWxpbmVQb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG4gICAgc2NyYXRjaE9wdGlvbnMuc2hhcGVQb3NpdGlvbnMgPSBzaGFwZTtcbiAgICBzY3JhdGNoT3B0aW9ucy5jb3JuZXJUeXBlID0gY29ybmVyVHlwZTtcbiAgICBzY3JhdGNoT3B0aW9ucy5ncmFudWxhcml0eSA9IGdyYW51bGFyaXR5O1xuICAgIHJldHVybiBuZXcgUG9seWxpbmVWb2x1bWVHZW9tZXRyeShzY3JhdGNoT3B0aW9ucyk7XG4gIH1cblxuICByZXN1bHQuX3Bvc2l0aW9ucyA9IHBvc2l0aW9ucztcbiAgcmVzdWx0Ll9zaGFwZSA9IHNoYXBlO1xuICByZXN1bHQuX2VsbGlwc29pZCA9IEVsbGlwc29pZC5jbG9uZShlbGxpcHNvaWQsIHJlc3VsdC5fZWxsaXBzb2lkKTtcbiAgcmVzdWx0Ll92ZXJ0ZXhGb3JtYXQgPSBWZXJ0ZXhGb3JtYXQuY2xvbmUodmVydGV4Rm9ybWF0LCByZXN1bHQuX3ZlcnRleEZvcm1hdCk7XG4gIHJlc3VsdC5fY29ybmVyVHlwZSA9IGNvcm5lclR5cGU7XG4gIHJlc3VsdC5fZ3JhbnVsYXJpdHkgPSBncmFudWxhcml0eTtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIGJyU2NyYXRjaCA9IG5ldyBCb3VuZGluZ1JlY3RhbmdsZSgpO1xuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBnZW9tZXRyaWMgcmVwcmVzZW50YXRpb24gb2YgYSBwb2x5bGluZSB3aXRoIGEgdm9sdW1lLCBpbmNsdWRpbmcgaXRzIHZlcnRpY2VzLCBpbmRpY2VzLCBhbmQgYSBib3VuZGluZyBzcGhlcmUuXG4gKlxuICogQHBhcmFtIHtQb2x5bGluZVZvbHVtZUdlb21ldHJ5fSBwb2x5bGluZVZvbHVtZUdlb21ldHJ5IEEgZGVzY3JpcHRpb24gb2YgdGhlIHBvbHlsaW5lIHZvbHVtZS5cbiAqIEByZXR1cm5zIHtHZW9tZXRyeXx1bmRlZmluZWR9IFRoZSBjb21wdXRlZCB2ZXJ0aWNlcyBhbmQgaW5kaWNlcy5cbiAqL1xuUG9seWxpbmVWb2x1bWVHZW9tZXRyeS5jcmVhdGVHZW9tZXRyeSA9IGZ1bmN0aW9uIChwb2x5bGluZVZvbHVtZUdlb21ldHJ5KSB7XG4gIHZhciBwb3NpdGlvbnMgPSBwb2x5bGluZVZvbHVtZUdlb21ldHJ5Ll9wb3NpdGlvbnM7XG4gIHZhciBjbGVhblBvc2l0aW9ucyA9IGFycmF5UmVtb3ZlRHVwbGljYXRlcyhcbiAgICBwb3NpdGlvbnMsXG4gICAgQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uXG4gICk7XG4gIHZhciBzaGFwZTJEID0gcG9seWxpbmVWb2x1bWVHZW9tZXRyeS5fc2hhcGU7XG4gIHNoYXBlMkQgPSBQb2x5bGluZVZvbHVtZUdlb21ldHJ5TGlicmFyeS5yZW1vdmVEdXBsaWNhdGVzRnJvbVNoYXBlKHNoYXBlMkQpO1xuXG4gIGlmIChjbGVhblBvc2l0aW9ucy5sZW5ndGggPCAyIHx8IHNoYXBlMkQubGVuZ3RoIDwgMykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoXG4gICAgUG9seWdvblBpcGVsaW5lLmNvbXB1dGVXaW5kaW5nT3JkZXIyRChzaGFwZTJEKSA9PT0gV2luZGluZ09yZGVyLkNMT0NLV0lTRVxuICApIHtcbiAgICBzaGFwZTJELnJldmVyc2UoKTtcbiAgfVxuICB2YXIgYm91bmRpbmdSZWN0YW5nbGUgPSBCb3VuZGluZ1JlY3RhbmdsZS5mcm9tUG9pbnRzKHNoYXBlMkQsIGJyU2NyYXRjaCk7XG5cbiAgdmFyIGNvbXB1dGVkUG9zaXRpb25zID0gUG9seWxpbmVWb2x1bWVHZW9tZXRyeUxpYnJhcnkuY29tcHV0ZVBvc2l0aW9ucyhcbiAgICBjbGVhblBvc2l0aW9ucyxcbiAgICBzaGFwZTJELFxuICAgIGJvdW5kaW5nUmVjdGFuZ2xlLFxuICAgIHBvbHlsaW5lVm9sdW1lR2VvbWV0cnksXG4gICAgdHJ1ZVxuICApO1xuICByZXR1cm4gY29tcHV0ZUF0dHJpYnV0ZXMoXG4gICAgY29tcHV0ZWRQb3NpdGlvbnMsXG4gICAgc2hhcGUyRCxcbiAgICBib3VuZGluZ1JlY3RhbmdsZSxcbiAgICBwb2x5bGluZVZvbHVtZUdlb21ldHJ5Ll92ZXJ0ZXhGb3JtYXRcbiAgKTtcbn07XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZVZvbHVtZUdlb21ldHJ5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///23616\n')},39534:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Cartesian4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63367);\n/* harmony import */ var _Cartographic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(51688);\n/* harmony import */ var _CornerType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56439);\n/* harmony import */ var _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(74744);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99417);\n/* harmony import */ var _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(68201);\n/* harmony import */ var _Matrix4_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(72248);\n/* harmony import */ var _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(61733);\n/* harmony import */ var _Quaternion_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87811);\n/* harmony import */ var _Transforms_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(95555);\n/* harmony import */ var _Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(27671);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar scratch2Array = [new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(), new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z()];\nvar scratchCartesian1 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian2 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian3 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian4 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian5 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian6 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian7 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian8 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartesian9 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nvar scratch1 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratch2 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * @private\n */\nvar PolylineVolumeGeometryLibrary = {};\n\nvar cartographic = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nfunction scaleToSurface(positions, ellipsoid) {\n  var heights = new Array(positions.length);\n  for (var i = 0; i < positions.length; i++) {\n    var pos = positions[i];\n    cartographic = ellipsoid.cartesianToCartographic(pos, cartographic);\n    heights[i] = cartographic.height;\n    positions[i] = ellipsoid.scaleToGeodeticSurface(pos, pos);\n  }\n  return heights;\n}\n\nfunction subdivideHeights(points, h0, h1, granularity) {\n  var p0 = points[0];\n  var p1 = points[1];\n  var angleBetween = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].angleBetween */ .Z.angleBetween(p0, p1);\n  var numPoints = Math.ceil(angleBetween / granularity);\n  var heights = new Array(numPoints);\n  var i;\n  if (h0 === h1) {\n    for (i = 0; i < numPoints; i++) {\n      heights[i] = h0;\n    }\n    heights.push(h1);\n    return heights;\n  }\n\n  var dHeight = h1 - h0;\n  var heightPerVertex = dHeight / numPoints;\n\n  for (i = 1; i < numPoints; i++) {\n    var h = h0 + i * heightPerVertex;\n    heights[i] = h;\n  }\n\n  heights[0] = h0;\n  heights.push(h1);\n  return heights;\n}\n\nvar nextScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar prevScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction computeRotationAngle(start, end, position, ellipsoid) {\n  var tangentPlane = new _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(position, ellipsoid);\n  var next = tangentPlane.projectPointOntoPlane(\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(position, start, nextScratch),\n    nextScratch\n  );\n  var prev = tangentPlane.projectPointOntoPlane(\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(position, end, prevScratch),\n    prevScratch\n  );\n  var angle = _Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].angleBetween */ .Z.angleBetween(next, prev);\n\n  return prev.x * next.y - prev.y * next.x >= 0.0 ? -angle : angle;\n}\n\nvar negativeX = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(-1, 0, 0);\nvar transform = new _Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z();\nvar translation = new _Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z();\nvar rotationZ = new _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\nvar scaleMatrix = _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].IDENTITY.clone */ .Z.IDENTITY.clone();\nvar westScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar finalPosScratch = new _Cartesian4_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar heightCartesian = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nfunction addPosition(\n  center,\n  left,\n  shape,\n  finalPositions,\n  ellipsoid,\n  height,\n  xScalar,\n  repeat\n) {\n  var west = westScratch;\n  var finalPosition = finalPosScratch;\n  transform = _Transforms_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(center, ellipsoid, transform);\n\n  west = _Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(transform, negativeX, west);\n  west = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(west, west);\n  var angle = computeRotationAngle(west, left, center, ellipsoid);\n  rotationZ = _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].fromRotationZ */ .Z.fromRotationZ(angle, rotationZ);\n\n  heightCartesian.z = height;\n  transform = _Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].multiplyTransformation */ .Z.multiplyTransformation(\n    transform,\n    _Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromRotationTranslation */ .Z.fromRotationTranslation(rotationZ, heightCartesian, translation),\n    transform\n  );\n  var scale = scaleMatrix;\n  scale[0] = xScalar;\n\n  for (var j = 0; j < repeat; j++) {\n    for (var i = 0; i < shape.length; i += 3) {\n      finalPosition = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromArray */ .Z.fromArray(shape, i, finalPosition);\n      finalPosition = _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].multiplyByVector */ .Z.multiplyByVector(\n        scale,\n        finalPosition,\n        finalPosition\n      );\n      finalPosition = _Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(\n        transform,\n        finalPosition,\n        finalPosition\n      );\n      finalPositions.push(finalPosition.x, finalPosition.y, finalPosition.z);\n    }\n  }\n\n  return finalPositions;\n}\n\nvar centerScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nfunction addPositions(\n  centers,\n  left,\n  shape,\n  finalPositions,\n  ellipsoid,\n  heights,\n  xScalar\n) {\n  for (var i = 0; i < centers.length; i += 3) {\n    var center = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromArray */ .Z.fromArray(centers, i, centerScratch);\n    finalPositions = addPosition(\n      center,\n      left,\n      shape,\n      finalPositions,\n      ellipsoid,\n      heights[i / 3],\n      xScalar,\n      1\n    );\n  }\n  return finalPositions;\n}\n\nfunction convertShapeTo3DDuplicate(shape2D, boundingRectangle) {\n  //orientate 2D shape to XZ plane center at (0, 0, 0), duplicate points\n  var length = shape2D.length;\n  var shape = new Array(length * 6);\n  var index = 0;\n  var xOffset = boundingRectangle.x + boundingRectangle.width / 2;\n  var yOffset = boundingRectangle.y + boundingRectangle.height / 2;\n\n  var point = shape2D[0];\n  shape[index++] = point.x - xOffset;\n  shape[index++] = 0.0;\n  shape[index++] = point.y - yOffset;\n  for (var i = 1; i < length; i++) {\n    point = shape2D[i];\n    var x = point.x - xOffset;\n    var z = point.y - yOffset;\n    shape[index++] = x;\n    shape[index++] = 0.0;\n    shape[index++] = z;\n\n    shape[index++] = x;\n    shape[index++] = 0.0;\n    shape[index++] = z;\n  }\n  point = shape2D[0];\n  shape[index++] = point.x - xOffset;\n  shape[index++] = 0.0;\n  shape[index++] = point.y - yOffset;\n\n  return shape;\n}\n\nfunction convertShapeTo3D(shape2D, boundingRectangle) {\n  //orientate 2D shape to XZ plane center at (0, 0, 0)\n  var length = shape2D.length;\n  var shape = new Array(length * 3);\n  var index = 0;\n  var xOffset = boundingRectangle.x + boundingRectangle.width / 2;\n  var yOffset = boundingRectangle.y + boundingRectangle.height / 2;\n\n  for (var i = 0; i < length; i++) {\n    shape[index++] = shape2D[i].x - xOffset;\n    shape[index++] = 0;\n    shape[index++] = shape2D[i].y - yOffset;\n  }\n\n  return shape;\n}\n\nvar quaterion = new _Quaternion_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\nvar startPointScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar rotMatrix = new _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\nfunction computeRoundCorner(\n  pivot,\n  startPoint,\n  endPoint,\n  cornerType,\n  leftIsOutside,\n  ellipsoid,\n  finalPositions,\n  shape,\n  height,\n  duplicatePoints\n) {\n  var angle = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].angleBetween */ .Z.angleBetween(\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(startPoint, pivot, scratch1),\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(endPoint, pivot, scratch2)\n  );\n  var granularity =\n    cornerType === _CornerType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].BEVELED */ .Z.BEVELED\n      ? 0\n      : Math.ceil(angle / _Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toRadians */ .Z.toRadians(5));\n\n  var m;\n  if (leftIsOutside) {\n    m = _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].fromQuaternion */ .Z.fromQuaternion(\n      _Quaternion_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].negate */ .Z.negate(pivot, scratch1),\n        angle / (granularity + 1),\n        quaterion\n      ),\n      rotMatrix\n    );\n  } else {\n    m = _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].fromQuaternion */ .Z.fromQuaternion(\n      _Quaternion_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(pivot, angle / (granularity + 1), quaterion),\n      rotMatrix\n    );\n  }\n\n  var left;\n  var surfacePoint;\n  startPoint = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(startPoint, startPointScratch);\n  if (granularity > 0) {\n    var repeat = duplicatePoints ? 2 : 1;\n    for (var i = 0; i < granularity; i++) {\n      startPoint = _Matrix3_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].multiplyByVector */ .Z.multiplyByVector(m, startPoint, startPoint);\n      left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(startPoint, pivot, scratch1);\n      left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(left, left);\n      if (!leftIsOutside) {\n        left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].negate */ .Z.negate(left, left);\n      }\n      surfacePoint = ellipsoid.scaleToGeodeticSurface(startPoint, scratch2);\n      finalPositions = addPosition(\n        surfacePoint,\n        left,\n        shape,\n        finalPositions,\n        ellipsoid,\n        height,\n        1,\n        repeat\n      );\n    }\n  } else {\n    left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(startPoint, pivot, scratch1);\n    left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(left, left);\n    if (!leftIsOutside) {\n      left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].negate */ .Z.negate(left, left);\n    }\n    surfacePoint = ellipsoid.scaleToGeodeticSurface(startPoint, scratch2);\n    finalPositions = addPosition(\n      surfacePoint,\n      left,\n      shape,\n      finalPositions,\n      ellipsoid,\n      height,\n      1,\n      1\n    );\n\n    endPoint = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(endPoint, startPointScratch);\n    left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(endPoint, pivot, scratch1);\n    left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(left, left);\n    if (!leftIsOutside) {\n      left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].negate */ .Z.negate(left, left);\n    }\n    surfacePoint = ellipsoid.scaleToGeodeticSurface(endPoint, scratch2);\n    finalPositions = addPosition(\n      surfacePoint,\n      left,\n      shape,\n      finalPositions,\n      ellipsoid,\n      height,\n      1,\n      1\n    );\n  }\n\n  return finalPositions;\n}\n\nPolylineVolumeGeometryLibrary.removeDuplicatesFromShape = function (\n  shapePositions\n) {\n  var length = shapePositions.length;\n  var cleanedPositions = [];\n  for (var i0 = length - 1, i1 = 0; i1 < length; i0 = i1++) {\n    var v0 = shapePositions[i0];\n    var v1 = shapePositions[i1];\n\n    if (!_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equals */ .Z.equals(v0, v1)) {\n      cleanedPositions.push(v1); // Shallow copy!\n    }\n  }\n\n  return cleanedPositions;\n};\n\nPolylineVolumeGeometryLibrary.angleIsGreaterThanPi = function (\n  forward,\n  backward,\n  position,\n  ellipsoid\n) {\n  var tangentPlane = new _EllipsoidTangentPlane_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(position, ellipsoid);\n  var next = tangentPlane.projectPointOntoPlane(\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(position, forward, nextScratch),\n    nextScratch\n  );\n  var prev = tangentPlane.projectPointOntoPlane(\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(position, backward, prevScratch),\n    prevScratch\n  );\n\n  return prev.x * next.y - prev.y * next.x >= 0.0;\n};\n\nvar scratchForwardProjection = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchBackwardProjection = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nPolylineVolumeGeometryLibrary.computePositions = function (\n  positions,\n  shape2D,\n  boundingRectangle,\n  geometry,\n  duplicatePoints\n) {\n  var ellipsoid = geometry._ellipsoid;\n  var heights = scaleToSurface(positions, ellipsoid);\n  var granularity = geometry._granularity;\n  var cornerType = geometry._cornerType;\n  var shapeForSides = duplicatePoints\n    ? convertShapeTo3DDuplicate(shape2D, boundingRectangle)\n    : convertShapeTo3D(shape2D, boundingRectangle);\n  var shapeForEnds = duplicatePoints\n    ? convertShapeTo3D(shape2D, boundingRectangle)\n    : undefined;\n  var heightOffset = boundingRectangle.height / 2;\n  var width = boundingRectangle.width / 2;\n  var length = positions.length;\n  var finalPositions = [];\n  var ends = duplicatePoints ? [] : undefined;\n\n  var forward = scratchCartesian1;\n  var backward = scratchCartesian2;\n  var cornerDirection = scratchCartesian3;\n  var surfaceNormal = scratchCartesian4;\n  var pivot = scratchCartesian5;\n  var start = scratchCartesian6;\n  var end = scratchCartesian7;\n  var left = scratchCartesian8;\n  var previousPosition = scratchCartesian9;\n\n  var position = positions[0];\n  var nextPosition = positions[1];\n  surfaceNormal = ellipsoid.geodeticSurfaceNormal(position, surfaceNormal);\n  forward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(nextPosition, position, forward);\n  forward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(forward, forward);\n  left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].cross */ .Z.cross(surfaceNormal, forward, left);\n  left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(left, left);\n  var h0 = heights[0];\n  var h1 = heights[1];\n  if (duplicatePoints) {\n    ends = addPosition(\n      position,\n      left,\n      shapeForEnds,\n      ends,\n      ellipsoid,\n      h0 + heightOffset,\n      1,\n      1\n    );\n  }\n  previousPosition = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(position, previousPosition);\n  position = nextPosition;\n  backward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].negate */ .Z.negate(forward, backward);\n  var subdividedHeights;\n  var subdividedPositions;\n  for (var i = 1; i < length - 1; i++) {\n    var repeat = duplicatePoints ? 2 : 1;\n    nextPosition = positions[i + 1];\n    if (position.equals(nextPosition)) {\n      (0,_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(\n        "Positions are too close and are considered equivalent with rounding error."\n      );\n      continue;\n    }\n    forward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(nextPosition, position, forward);\n    forward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(forward, forward);\n    cornerDirection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(forward, backward, cornerDirection);\n    cornerDirection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(cornerDirection, cornerDirection);\n    surfaceNormal = ellipsoid.geodeticSurfaceNormal(position, surfaceNormal);\n\n    var forwardProjection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      surfaceNormal,\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].dot */ .Z.dot(forward, surfaceNormal),\n      scratchForwardProjection\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(forward, forwardProjection, forwardProjection);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(forwardProjection, forwardProjection);\n\n    var backwardProjection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      surfaceNormal,\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].dot */ .Z.dot(backward, surfaceNormal),\n      scratchBackwardProjection\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(backward, backwardProjection, backwardProjection);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(backwardProjection, backwardProjection);\n\n    var doCorner = !_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      Math.abs(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].dot */ .Z.dot(forwardProjection, backwardProjection)),\n      1.0,\n      _Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON7 */ .Z.EPSILON7\n    );\n\n    if (doCorner) {\n      cornerDirection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].cross */ .Z.cross(\n        cornerDirection,\n        surfaceNormal,\n        cornerDirection\n      );\n      cornerDirection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].cross */ .Z.cross(\n        surfaceNormal,\n        cornerDirection,\n        cornerDirection\n      );\n      cornerDirection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(cornerDirection, cornerDirection);\n      var scalar =\n        1 /\n        Math.max(\n          0.25,\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].magnitude */ .Z.magnitude(\n            _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].cross */ .Z.cross(cornerDirection, backward, scratch1)\n          )\n        );\n      var leftIsOutside = PolylineVolumeGeometryLibrary.angleIsGreaterThanPi(\n        forward,\n        backward,\n        position,\n        ellipsoid\n      );\n      if (leftIsOutside) {\n        pivot = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(\n          position,\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n            cornerDirection,\n            scalar * width,\n            cornerDirection\n          ),\n          pivot\n        );\n        start = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(\n          pivot,\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(left, width, start),\n          start\n        );\n        scratch2Array[0] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(previousPosition, scratch2Array[0]);\n        scratch2Array[1] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(start, scratch2Array[1]);\n        subdividedHeights = subdivideHeights(\n          scratch2Array,\n          h0 + heightOffset,\n          h1 + heightOffset,\n          granularity\n        );\n        subdividedPositions = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].generateArc */ .Z.generateArc({\n          positions: scratch2Array,\n          granularity: granularity,\n          ellipsoid: ellipsoid,\n        });\n        finalPositions = addPositions(\n          subdividedPositions,\n          left,\n          shapeForSides,\n          finalPositions,\n          ellipsoid,\n          subdividedHeights,\n          1\n        );\n        left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].cross */ .Z.cross(surfaceNormal, forward, left);\n        left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(left, left);\n        end = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(\n          pivot,\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(left, width, end),\n          end\n        );\n        if (\n          cornerType === _CornerType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ROUNDED */ .Z.ROUNDED ||\n          cornerType === _CornerType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].BEVELED */ .Z.BEVELED\n        ) {\n          computeRoundCorner(\n            pivot,\n            start,\n            end,\n            cornerType,\n            leftIsOutside,\n            ellipsoid,\n            finalPositions,\n            shapeForSides,\n            h1 + heightOffset,\n            duplicatePoints\n          );\n        } else {\n          cornerDirection = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].negate */ .Z.negate(cornerDirection, cornerDirection);\n          finalPositions = addPosition(\n            position,\n            cornerDirection,\n            shapeForSides,\n            finalPositions,\n            ellipsoid,\n            h1 + heightOffset,\n            scalar,\n            repeat\n          );\n        }\n        previousPosition = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(end, previousPosition);\n      } else {\n        pivot = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(\n          position,\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n            cornerDirection,\n            scalar * width,\n            cornerDirection\n          ),\n          pivot\n        );\n        start = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(\n          pivot,\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(left, -width, start),\n          start\n        );\n        scratch2Array[0] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(previousPosition, scratch2Array[0]);\n        scratch2Array[1] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(start, scratch2Array[1]);\n        subdividedHeights = subdivideHeights(\n          scratch2Array,\n          h0 + heightOffset,\n          h1 + heightOffset,\n          granularity\n        );\n        subdividedPositions = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].generateArc */ .Z.generateArc({\n          positions: scratch2Array,\n          granularity: granularity,\n          ellipsoid: ellipsoid,\n        });\n        finalPositions = addPositions(\n          subdividedPositions,\n          left,\n          shapeForSides,\n          finalPositions,\n          ellipsoid,\n          subdividedHeights,\n          1\n        );\n        left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].cross */ .Z.cross(surfaceNormal, forward, left);\n        left = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].normalize */ .Z.normalize(left, left);\n        end = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].add */ .Z.add(\n          pivot,\n          _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(left, -width, end),\n          end\n        );\n        if (\n          cornerType === _CornerType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ROUNDED */ .Z.ROUNDED ||\n          cornerType === _CornerType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].BEVELED */ .Z.BEVELED\n        ) {\n          computeRoundCorner(\n            pivot,\n            start,\n            end,\n            cornerType,\n            leftIsOutside,\n            ellipsoid,\n            finalPositions,\n            shapeForSides,\n            h1 + heightOffset,\n            duplicatePoints\n          );\n        } else {\n          finalPositions = addPosition(\n            position,\n            cornerDirection,\n            shapeForSides,\n            finalPositions,\n            ellipsoid,\n            h1 + heightOffset,\n            scalar,\n            repeat\n          );\n        }\n        previousPosition = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(end, previousPosition);\n      }\n      backward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].negate */ .Z.negate(forward, backward);\n    } else {\n      finalPositions = addPosition(\n        previousPosition,\n        left,\n        shapeForSides,\n        finalPositions,\n        ellipsoid,\n        h0 + heightOffset,\n        1,\n        1\n      );\n      previousPosition = position;\n    }\n    h0 = h1;\n    h1 = heights[i + 1];\n    position = nextPosition;\n  }\n\n  scratch2Array[0] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(previousPosition, scratch2Array[0]);\n  scratch2Array[1] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(position, scratch2Array[1]);\n  subdividedHeights = subdivideHeights(\n    scratch2Array,\n    h0 + heightOffset,\n    h1 + heightOffset,\n    granularity\n  );\n  subdividedPositions = _PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].generateArc */ .Z.generateArc({\n    positions: scratch2Array,\n    granularity: granularity,\n    ellipsoid: ellipsoid,\n  });\n  finalPositions = addPositions(\n    subdividedPositions,\n    left,\n    shapeForSides,\n    finalPositions,\n    ellipsoid,\n    subdividedHeights,\n    1\n  );\n  if (duplicatePoints) {\n    ends = addPosition(\n      position,\n      left,\n      shapeForEnds,\n      ends,\n      ellipsoid,\n      h1 + heightOffset,\n      1,\n      1\n    );\n  }\n\n  length = finalPositions.length;\n  var posLength = duplicatePoints ? length + ends.length : length;\n  var combinedPositions = new Float64Array(posLength);\n  combinedPositions.set(finalPositions);\n  if (duplicatePoints) {\n    combinedPositions.set(ends, length);\n  }\n\n  return combinedPositions;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolylineVolumeGeometryLibrary);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk1MzQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF5QztBQUNBO0FBQ0E7QUFDSTtBQUNKO0FBQ3NCO0FBQzVCO0FBQ0E7QUFDQTtBQUNrQjtBQUNaO0FBQ0E7QUFDYzs7QUFFdkQseUJBQXlCLCtEQUFVLFFBQVEsK0RBQVU7QUFDckQsNEJBQTRCLCtEQUFVO0FBQ3RDLDRCQUE0QiwrREFBVTtBQUN0Qyw0QkFBNEIsK0RBQVU7QUFDdEMsNEJBQTRCLCtEQUFVO0FBQ3RDLDRCQUE0QiwrREFBVTtBQUN0Qyw0QkFBNEIsK0RBQVU7QUFDdEMsNEJBQTRCLCtEQUFVO0FBQ3RDLDRCQUE0QiwrREFBVTtBQUN0Qyw0QkFBNEIsK0RBQVU7O0FBRXRDLG1CQUFtQiwrREFBVTtBQUM3QixtQkFBbUIsK0RBQVU7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixpRUFBWTtBQUNuQztBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUZBQXVCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGNBQWMsZUFBZTtBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLCtEQUFVO0FBQ2hDLHNCQUFzQiwrREFBVTs7QUFFaEM7QUFDQSx5QkFBeUIsMEVBQXFCO0FBQzlDO0FBQ0EsSUFBSSx1RUFBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVFQUFjO0FBQ2xCO0FBQ0E7QUFDQSxjQUFjLHlGQUF1Qjs7QUFFckM7QUFDQTs7QUFFQSxvQkFBb0IsK0RBQVU7QUFDOUIsb0JBQW9CLDREQUFPO0FBQzNCLHNCQUFzQiw0REFBTztBQUM3QixvQkFBb0IsNERBQU87QUFDM0Isa0JBQWtCLDBGQUFzQjtBQUN4QyxzQkFBc0IsK0RBQVU7QUFDaEMsMEJBQTBCLCtEQUFVO0FBQ3BDLDBCQUEwQiwrREFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdIQUFrQzs7QUFFaEQsU0FBUyw0R0FBK0I7QUFDeEMsU0FBUyxtRkFBb0I7QUFDN0I7QUFDQSxjQUFjLHdGQUFxQjs7QUFFbkM7QUFDQSxjQUFjLDBHQUE4QjtBQUM1QztBQUNBLElBQUksNEdBQStCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixZQUFZO0FBQzlCLG9CQUFvQixrQkFBa0I7QUFDdEMsc0JBQXNCLG1GQUFvQjtBQUMxQyxzQkFBc0IsOEZBQXdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDRGQUF1QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QiwrREFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDLGlCQUFpQixtRkFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsb0JBQW9CLGdFQUFVO0FBQzlCLDRCQUE0QiwrREFBVTtBQUN0QyxvQkFBb0IsNERBQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5RkFBdUI7QUFDckMsSUFBSSxpRkFBbUI7QUFDdkIsSUFBSSxpRkFBbUI7QUFDdkI7QUFDQTtBQUNBLG1CQUFtQiwrRUFBa0I7QUFDckM7QUFDQSwwQkFBMEIsNkVBQW9COztBQUU5QztBQUNBO0FBQ0EsUUFBUSwwRkFBc0I7QUFDOUIsTUFBTSw0RkFBd0I7QUFDOUIsUUFBUSw2RUFBaUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixRQUFRLDBGQUFzQjtBQUM5QixNQUFNLDRGQUF3QjtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsMkVBQWdCO0FBQy9CO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDLG1CQUFtQiw4RkFBd0I7QUFDM0MsYUFBYSxpRkFBbUI7QUFDaEMsYUFBYSxtRkFBb0I7QUFDakM7QUFDQSxlQUFlLDZFQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixXQUFXLGlGQUFtQjtBQUM5QixXQUFXLG1GQUFvQjtBQUMvQjtBQUNBLGFBQWEsNkVBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLDJFQUFnQjtBQUMvQixXQUFXLGlGQUFtQjtBQUM5QixXQUFXLG1GQUFvQjtBQUMvQjtBQUNBLGFBQWEsNkVBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxhQUFhO0FBQ2pEO0FBQ0E7O0FBRUEsU0FBUyw2RUFBaUI7QUFDMUIsaUNBQWlDO0FBQ2pDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMEVBQXFCO0FBQzlDO0FBQ0EsSUFBSSx1RUFBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVFQUFjO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxtQ0FBbUMsK0RBQVU7QUFDN0Msb0NBQW9DLCtEQUFVOztBQUU5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRkFBbUI7QUFDL0IsWUFBWSxtRkFBb0I7QUFDaEMsU0FBUywyRUFBZ0I7QUFDekIsU0FBUyxtRkFBb0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwyRUFBZ0I7QUFDckM7QUFDQSxhQUFhLDZFQUFpQjtBQUM5QjtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxNQUFNLDZFQUFjO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpRkFBbUI7QUFDakMsY0FBYyxtRkFBb0I7QUFDbEMsc0JBQXNCLHVFQUFjO0FBQ3BDLHNCQUFzQixtRkFBb0I7QUFDMUM7O0FBRUEsNEJBQTRCLGlHQUEyQjtBQUN2RDtBQUNBLE1BQU0sdUVBQWM7QUFDcEI7QUFDQTtBQUNBLElBQUksaUZBQW1CO0FBQ3ZCLElBQUksbUZBQW9COztBQUV4Qiw2QkFBNkIsaUdBQTJCO0FBQ3hEO0FBQ0EsTUFBTSx1RUFBYztBQUNwQjtBQUNBO0FBQ0EsSUFBSSxpRkFBbUI7QUFDdkIsSUFBSSxtRkFBb0I7O0FBRXhCLG9CQUFvQixxRkFBd0I7QUFDNUMsZUFBZSx1RUFBYztBQUM3QjtBQUNBLE1BQU0sMkVBQW1CO0FBQ3pCOztBQUVBO0FBQ0Esd0JBQXdCLDJFQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyRUFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUZBQW9CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxtRkFBb0I7QUFDOUIsWUFBWSwyRUFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVFQUFjO0FBQzlCO0FBQ0EsVUFBVSxpR0FBMkI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVFQUFjO0FBQzlCO0FBQ0EsVUFBVSxpR0FBMkI7QUFDckM7QUFDQTtBQUNBLDJCQUEyQiwyRUFBZ0I7QUFDM0MsMkJBQTJCLDJFQUFnQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNkZBQTRCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJFQUFnQjtBQUMvQixlQUFlLG1GQUFvQjtBQUNuQyxjQUFjLHVFQUFjO0FBQzVCO0FBQ0EsVUFBVSxpR0FBMkI7QUFDckM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtFQUFrQjtBQUMzQyx5QkFBeUIsK0VBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDRCQUE0Qiw2RUFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwyRUFBZ0I7QUFDM0MsUUFBUTtBQUNSLGdCQUFnQix1RUFBYztBQUM5QjtBQUNBLFVBQVUsaUdBQTJCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1RUFBYztBQUM5QjtBQUNBLFVBQVUsaUdBQTJCO0FBQ3JDO0FBQ0E7QUFDQSwyQkFBMkIsMkVBQWdCO0FBQzNDLDJCQUEyQiwyRUFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZGQUE0QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyRUFBZ0I7QUFDL0IsZUFBZSxtRkFBb0I7QUFDbkMsY0FBYyx1RUFBYztBQUM1QjtBQUNBLFVBQVUsaUdBQTJCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwrRUFBa0I7QUFDM0MseUJBQXlCLCtFQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJFQUFnQjtBQUMzQztBQUNBLGlCQUFpQiw2RUFBaUI7QUFDbEMsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQiwyRUFBZ0I7QUFDckMscUJBQXFCLDJFQUFnQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkZBQTRCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlEQUFlLDZCQUE2QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0NvcmUvUG9seWxpbmVWb2x1bWVHZW9tZXRyeUxpYnJhcnkuanM/ZmVlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuNCBmcm9tIFwiLi9DYXJ0ZXNpYW40LmpzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCIuL0NhcnRvZ3JhcGhpYy5qc1wiO1xuaW1wb3J0IENvcm5lclR5cGUgZnJvbSBcIi4vQ29ybmVyVHlwZS5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZFRhbmdlbnRQbGFuZSBmcm9tIFwiLi9FbGxpcHNvaWRUYW5nZW50UGxhbmUuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuL01hdGguanNcIjtcbmltcG9ydCBNYXRyaXgzIGZyb20gXCIuL01hdHJpeDMuanNcIjtcbmltcG9ydCBNYXRyaXg0IGZyb20gXCIuL01hdHJpeDQuanNcIjtcbmltcG9ydCBQb2x5bGluZVBpcGVsaW5lIGZyb20gXCIuL1BvbHlsaW5lUGlwZWxpbmUuanNcIjtcbmltcG9ydCBRdWF0ZXJuaW9uIGZyb20gXCIuL1F1YXRlcm5pb24uanNcIjtcbmltcG9ydCBUcmFuc2Zvcm1zIGZyb20gXCIuL1RyYW5zZm9ybXMuanNcIjtcbmltcG9ydCBvbmVUaW1lV2FybmluZyBmcm9tIFwiLi4vQ29yZS9vbmVUaW1lV2FybmluZy5qc1wiO1xuXG52YXIgc2NyYXRjaDJBcnJheSA9IFtuZXcgQ2FydGVzaWFuMygpLCBuZXcgQ2FydGVzaWFuMygpXTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuMSA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaENhcnRlc2lhbjIgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4zID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuNCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaENhcnRlc2lhbjUgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW42ID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuNyA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaENhcnRlc2lhbjggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW45ID0gbmV3IENhcnRlc2lhbjMoKTtcblxudmFyIHNjcmF0Y2gxID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoMiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIFBvbHlsaW5lVm9sdW1lR2VvbWV0cnlMaWJyYXJ5ID0ge307XG5cbnZhciBjYXJ0b2dyYXBoaWMgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5mdW5jdGlvbiBzY2FsZVRvU3VyZmFjZShwb3NpdGlvbnMsIGVsbGlwc29pZCkge1xuICB2YXIgaGVpZ2h0cyA9IG5ldyBBcnJheShwb3NpdGlvbnMubGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcG9zID0gcG9zaXRpb25zW2ldO1xuICAgIGNhcnRvZ3JhcGhpYyA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwb3MsIGNhcnRvZ3JhcGhpYyk7XG4gICAgaGVpZ2h0c1tpXSA9IGNhcnRvZ3JhcGhpYy5oZWlnaHQ7XG4gICAgcG9zaXRpb25zW2ldID0gZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2UocG9zLCBwb3MpO1xuICB9XG4gIHJldHVybiBoZWlnaHRzO1xufVxuXG5mdW5jdGlvbiBzdWJkaXZpZGVIZWlnaHRzKHBvaW50cywgaDAsIGgxLCBncmFudWxhcml0eSkge1xuICB2YXIgcDAgPSBwb2ludHNbMF07XG4gIHZhciBwMSA9IHBvaW50c1sxXTtcbiAgdmFyIGFuZ2xlQmV0d2VlbiA9IENhcnRlc2lhbjMuYW5nbGVCZXR3ZWVuKHAwLCBwMSk7XG4gIHZhciBudW1Qb2ludHMgPSBNYXRoLmNlaWwoYW5nbGVCZXR3ZWVuIC8gZ3JhbnVsYXJpdHkpO1xuICB2YXIgaGVpZ2h0cyA9IG5ldyBBcnJheShudW1Qb2ludHMpO1xuICB2YXIgaTtcbiAgaWYgKGgwID09PSBoMSkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBudW1Qb2ludHM7IGkrKykge1xuICAgICAgaGVpZ2h0c1tpXSA9IGgwO1xuICAgIH1cbiAgICBoZWlnaHRzLnB1c2goaDEpO1xuICAgIHJldHVybiBoZWlnaHRzO1xuICB9XG5cbiAgdmFyIGRIZWlnaHQgPSBoMSAtIGgwO1xuICB2YXIgaGVpZ2h0UGVyVmVydGV4ID0gZEhlaWdodCAvIG51bVBvaW50cztcblxuICBmb3IgKGkgPSAxOyBpIDwgbnVtUG9pbnRzOyBpKyspIHtcbiAgICB2YXIgaCA9IGgwICsgaSAqIGhlaWdodFBlclZlcnRleDtcbiAgICBoZWlnaHRzW2ldID0gaDtcbiAgfVxuXG4gIGhlaWdodHNbMF0gPSBoMDtcbiAgaGVpZ2h0cy5wdXNoKGgxKTtcbiAgcmV0dXJuIGhlaWdodHM7XG59XG5cbnZhciBuZXh0U2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcHJldlNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuXG5mdW5jdGlvbiBjb21wdXRlUm90YXRpb25BbmdsZShzdGFydCwgZW5kLCBwb3NpdGlvbiwgZWxsaXBzb2lkKSB7XG4gIHZhciB0YW5nZW50UGxhbmUgPSBuZXcgRWxsaXBzb2lkVGFuZ2VudFBsYW5lKHBvc2l0aW9uLCBlbGxpcHNvaWQpO1xuICB2YXIgbmV4dCA9IHRhbmdlbnRQbGFuZS5wcm9qZWN0UG9pbnRPbnRvUGxhbmUoXG4gICAgQ2FydGVzaWFuMy5hZGQocG9zaXRpb24sIHN0YXJ0LCBuZXh0U2NyYXRjaCksXG4gICAgbmV4dFNjcmF0Y2hcbiAgKTtcbiAgdmFyIHByZXYgPSB0YW5nZW50UGxhbmUucHJvamVjdFBvaW50T250b1BsYW5lKFxuICAgIENhcnRlc2lhbjMuYWRkKHBvc2l0aW9uLCBlbmQsIHByZXZTY3JhdGNoKSxcbiAgICBwcmV2U2NyYXRjaFxuICApO1xuICB2YXIgYW5nbGUgPSBDYXJ0ZXNpYW4yLmFuZ2xlQmV0d2VlbihuZXh0LCBwcmV2KTtcblxuICByZXR1cm4gcHJldi54ICogbmV4dC55IC0gcHJldi55ICogbmV4dC54ID49IDAuMCA/IC1hbmdsZSA6IGFuZ2xlO1xufVxuXG52YXIgbmVnYXRpdmVYID0gbmV3IENhcnRlc2lhbjMoLTEsIDAsIDApO1xudmFyIHRyYW5zZm9ybSA9IG5ldyBNYXRyaXg0KCk7XG52YXIgdHJhbnNsYXRpb24gPSBuZXcgTWF0cml4NCgpO1xudmFyIHJvdGF0aW9uWiA9IG5ldyBNYXRyaXgzKCk7XG52YXIgc2NhbGVNYXRyaXggPSBNYXRyaXgzLklERU5USVRZLmNsb25lKCk7XG52YXIgd2VzdFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGZpbmFsUG9zU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW40KCk7XG52YXIgaGVpZ2h0Q2FydGVzaWFuID0gbmV3IENhcnRlc2lhbjMoKTtcbmZ1bmN0aW9uIGFkZFBvc2l0aW9uKFxuICBjZW50ZXIsXG4gIGxlZnQsXG4gIHNoYXBlLFxuICBmaW5hbFBvc2l0aW9ucyxcbiAgZWxsaXBzb2lkLFxuICBoZWlnaHQsXG4gIHhTY2FsYXIsXG4gIHJlcGVhdFxuKSB7XG4gIHZhciB3ZXN0ID0gd2VzdFNjcmF0Y2g7XG4gIHZhciBmaW5hbFBvc2l0aW9uID0gZmluYWxQb3NTY3JhdGNoO1xuICB0cmFuc2Zvcm0gPSBUcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lKGNlbnRlciwgZWxsaXBzb2lkLCB0cmFuc2Zvcm0pO1xuXG4gIHdlc3QgPSBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludEFzVmVjdG9yKHRyYW5zZm9ybSwgbmVnYXRpdmVYLCB3ZXN0KTtcbiAgd2VzdCA9IENhcnRlc2lhbjMubm9ybWFsaXplKHdlc3QsIHdlc3QpO1xuICB2YXIgYW5nbGUgPSBjb21wdXRlUm90YXRpb25BbmdsZSh3ZXN0LCBsZWZ0LCBjZW50ZXIsIGVsbGlwc29pZCk7XG4gIHJvdGF0aW9uWiA9IE1hdHJpeDMuZnJvbVJvdGF0aW9uWihhbmdsZSwgcm90YXRpb25aKTtcblxuICBoZWlnaHRDYXJ0ZXNpYW4ueiA9IGhlaWdodDtcbiAgdHJhbnNmb3JtID0gTWF0cml4NC5tdWx0aXBseVRyYW5zZm9ybWF0aW9uKFxuICAgIHRyYW5zZm9ybSxcbiAgICBNYXRyaXg0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKHJvdGF0aW9uWiwgaGVpZ2h0Q2FydGVzaWFuLCB0cmFuc2xhdGlvbiksXG4gICAgdHJhbnNmb3JtXG4gICk7XG4gIHZhciBzY2FsZSA9IHNjYWxlTWF0cml4O1xuICBzY2FsZVswXSA9IHhTY2FsYXI7XG5cbiAgZm9yICh2YXIgaiA9IDA7IGogPCByZXBlYXQ7IGorKykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hhcGUubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgIGZpbmFsUG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmZyb21BcnJheShzaGFwZSwgaSwgZmluYWxQb3NpdGlvbik7XG4gICAgICBmaW5hbFBvc2l0aW9uID0gTWF0cml4My5tdWx0aXBseUJ5VmVjdG9yKFxuICAgICAgICBzY2FsZSxcbiAgICAgICAgZmluYWxQb3NpdGlvbixcbiAgICAgICAgZmluYWxQb3NpdGlvblxuICAgICAgKTtcbiAgICAgIGZpbmFsUG9zaXRpb24gPSBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludChcbiAgICAgICAgdHJhbnNmb3JtLFxuICAgICAgICBmaW5hbFBvc2l0aW9uLFxuICAgICAgICBmaW5hbFBvc2l0aW9uXG4gICAgICApO1xuICAgICAgZmluYWxQb3NpdGlvbnMucHVzaChmaW5hbFBvc2l0aW9uLngsIGZpbmFsUG9zaXRpb24ueSwgZmluYWxQb3NpdGlvbi56KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmluYWxQb3NpdGlvbnM7XG59XG5cbnZhciBjZW50ZXJTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbmZ1bmN0aW9uIGFkZFBvc2l0aW9ucyhcbiAgY2VudGVycyxcbiAgbGVmdCxcbiAgc2hhcGUsXG4gIGZpbmFsUG9zaXRpb25zLFxuICBlbGxpcHNvaWQsXG4gIGhlaWdodHMsXG4gIHhTY2FsYXJcbikge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNlbnRlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICB2YXIgY2VudGVyID0gQ2FydGVzaWFuMy5mcm9tQXJyYXkoY2VudGVycywgaSwgY2VudGVyU2NyYXRjaCk7XG4gICAgZmluYWxQb3NpdGlvbnMgPSBhZGRQb3NpdGlvbihcbiAgICAgIGNlbnRlcixcbiAgICAgIGxlZnQsXG4gICAgICBzaGFwZSxcbiAgICAgIGZpbmFsUG9zaXRpb25zLFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgaGVpZ2h0c1tpIC8gM10sXG4gICAgICB4U2NhbGFyLFxuICAgICAgMVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGZpbmFsUG9zaXRpb25zO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0U2hhcGVUbzNERHVwbGljYXRlKHNoYXBlMkQsIGJvdW5kaW5nUmVjdGFuZ2xlKSB7XG4gIC8vb3JpZW50YXRlIDJEIHNoYXBlIHRvIFhaIHBsYW5lIGNlbnRlciBhdCAoMCwgMCwgMCksIGR1cGxpY2F0ZSBwb2ludHNcbiAgdmFyIGxlbmd0aCA9IHNoYXBlMkQubGVuZ3RoO1xuICB2YXIgc2hhcGUgPSBuZXcgQXJyYXkobGVuZ3RoICogNik7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciB4T2Zmc2V0ID0gYm91bmRpbmdSZWN0YW5nbGUueCArIGJvdW5kaW5nUmVjdGFuZ2xlLndpZHRoIC8gMjtcbiAgdmFyIHlPZmZzZXQgPSBib3VuZGluZ1JlY3RhbmdsZS55ICsgYm91bmRpbmdSZWN0YW5nbGUuaGVpZ2h0IC8gMjtcblxuICB2YXIgcG9pbnQgPSBzaGFwZTJEWzBdO1xuICBzaGFwZVtpbmRleCsrXSA9IHBvaW50LnggLSB4T2Zmc2V0O1xuICBzaGFwZVtpbmRleCsrXSA9IDAuMDtcbiAgc2hhcGVbaW5kZXgrK10gPSBwb2ludC55IC0geU9mZnNldDtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHBvaW50ID0gc2hhcGUyRFtpXTtcbiAgICB2YXIgeCA9IHBvaW50LnggLSB4T2Zmc2V0O1xuICAgIHZhciB6ID0gcG9pbnQueSAtIHlPZmZzZXQ7XG4gICAgc2hhcGVbaW5kZXgrK10gPSB4O1xuICAgIHNoYXBlW2luZGV4KytdID0gMC4wO1xuICAgIHNoYXBlW2luZGV4KytdID0gejtcblxuICAgIHNoYXBlW2luZGV4KytdID0geDtcbiAgICBzaGFwZVtpbmRleCsrXSA9IDAuMDtcbiAgICBzaGFwZVtpbmRleCsrXSA9IHo7XG4gIH1cbiAgcG9pbnQgPSBzaGFwZTJEWzBdO1xuICBzaGFwZVtpbmRleCsrXSA9IHBvaW50LnggLSB4T2Zmc2V0O1xuICBzaGFwZVtpbmRleCsrXSA9IDAuMDtcbiAgc2hhcGVbaW5kZXgrK10gPSBwb2ludC55IC0geU9mZnNldDtcblxuICByZXR1cm4gc2hhcGU7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRTaGFwZVRvM0Qoc2hhcGUyRCwgYm91bmRpbmdSZWN0YW5nbGUpIHtcbiAgLy9vcmllbnRhdGUgMkQgc2hhcGUgdG8gWFogcGxhbmUgY2VudGVyIGF0ICgwLCAwLCAwKVxuICB2YXIgbGVuZ3RoID0gc2hhcGUyRC5sZW5ndGg7XG4gIHZhciBzaGFwZSA9IG5ldyBBcnJheShsZW5ndGggKiAzKTtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIHhPZmZzZXQgPSBib3VuZGluZ1JlY3RhbmdsZS54ICsgYm91bmRpbmdSZWN0YW5nbGUud2lkdGggLyAyO1xuICB2YXIgeU9mZnNldCA9IGJvdW5kaW5nUmVjdGFuZ2xlLnkgKyBib3VuZGluZ1JlY3RhbmdsZS5oZWlnaHQgLyAyO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBzaGFwZVtpbmRleCsrXSA9IHNoYXBlMkRbaV0ueCAtIHhPZmZzZXQ7XG4gICAgc2hhcGVbaW5kZXgrK10gPSAwO1xuICAgIHNoYXBlW2luZGV4KytdID0gc2hhcGUyRFtpXS55IC0geU9mZnNldDtcbiAgfVxuXG4gIHJldHVybiBzaGFwZTtcbn1cblxudmFyIHF1YXRlcmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG52YXIgc3RhcnRQb2ludFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHJvdE1hdHJpeCA9IG5ldyBNYXRyaXgzKCk7XG5mdW5jdGlvbiBjb21wdXRlUm91bmRDb3JuZXIoXG4gIHBpdm90LFxuICBzdGFydFBvaW50LFxuICBlbmRQb2ludCxcbiAgY29ybmVyVHlwZSxcbiAgbGVmdElzT3V0c2lkZSxcbiAgZWxsaXBzb2lkLFxuICBmaW5hbFBvc2l0aW9ucyxcbiAgc2hhcGUsXG4gIGhlaWdodCxcbiAgZHVwbGljYXRlUG9pbnRzXG4pIHtcbiAgdmFyIGFuZ2xlID0gQ2FydGVzaWFuMy5hbmdsZUJldHdlZW4oXG4gICAgQ2FydGVzaWFuMy5zdWJ0cmFjdChzdGFydFBvaW50LCBwaXZvdCwgc2NyYXRjaDEpLFxuICAgIENhcnRlc2lhbjMuc3VidHJhY3QoZW5kUG9pbnQsIHBpdm90LCBzY3JhdGNoMilcbiAgKTtcbiAgdmFyIGdyYW51bGFyaXR5ID1cbiAgICBjb3JuZXJUeXBlID09PSBDb3JuZXJUeXBlLkJFVkVMRURcbiAgICAgID8gMFxuICAgICAgOiBNYXRoLmNlaWwoYW5nbGUgLyBDZXNpdW1NYXRoLnRvUmFkaWFucyg1KSk7XG5cbiAgdmFyIG07XG4gIGlmIChsZWZ0SXNPdXRzaWRlKSB7XG4gICAgbSA9IE1hdHJpeDMuZnJvbVF1YXRlcm5pb24oXG4gICAgICBRdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUoXG4gICAgICAgIENhcnRlc2lhbjMubmVnYXRlKHBpdm90LCBzY3JhdGNoMSksXG4gICAgICAgIGFuZ2xlIC8gKGdyYW51bGFyaXR5ICsgMSksXG4gICAgICAgIHF1YXRlcmlvblxuICAgICAgKSxcbiAgICAgIHJvdE1hdHJpeFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgbSA9IE1hdHJpeDMuZnJvbVF1YXRlcm5pb24oXG4gICAgICBRdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUocGl2b3QsIGFuZ2xlIC8gKGdyYW51bGFyaXR5ICsgMSksIHF1YXRlcmlvbiksXG4gICAgICByb3RNYXRyaXhcbiAgICApO1xuICB9XG5cbiAgdmFyIGxlZnQ7XG4gIHZhciBzdXJmYWNlUG9pbnQ7XG4gIHN0YXJ0UG9pbnQgPSBDYXJ0ZXNpYW4zLmNsb25lKHN0YXJ0UG9pbnQsIHN0YXJ0UG9pbnRTY3JhdGNoKTtcbiAgaWYgKGdyYW51bGFyaXR5ID4gMCkge1xuICAgIHZhciByZXBlYXQgPSBkdXBsaWNhdGVQb2ludHMgPyAyIDogMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyYW51bGFyaXR5OyBpKyspIHtcbiAgICAgIHN0YXJ0UG9pbnQgPSBNYXRyaXgzLm11bHRpcGx5QnlWZWN0b3IobSwgc3RhcnRQb2ludCwgc3RhcnRQb2ludCk7XG4gICAgICBsZWZ0ID0gQ2FydGVzaWFuMy5zdWJ0cmFjdChzdGFydFBvaW50LCBwaXZvdCwgc2NyYXRjaDEpO1xuICAgICAgbGVmdCA9IENhcnRlc2lhbjMubm9ybWFsaXplKGxlZnQsIGxlZnQpO1xuICAgICAgaWYgKCFsZWZ0SXNPdXRzaWRlKSB7XG4gICAgICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLm5lZ2F0ZShsZWZ0LCBsZWZ0KTtcbiAgICAgIH1cbiAgICAgIHN1cmZhY2VQb2ludCA9IGVsbGlwc29pZC5zY2FsZVRvR2VvZGV0aWNTdXJmYWNlKHN0YXJ0UG9pbnQsIHNjcmF0Y2gyKTtcbiAgICAgIGZpbmFsUG9zaXRpb25zID0gYWRkUG9zaXRpb24oXG4gICAgICAgIHN1cmZhY2VQb2ludCxcbiAgICAgICAgbGVmdCxcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIGZpbmFsUG9zaXRpb25zLFxuICAgICAgICBlbGxpcHNvaWQsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgMSxcbiAgICAgICAgcmVwZWF0XG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZWZ0ID0gQ2FydGVzaWFuMy5zdWJ0cmFjdChzdGFydFBvaW50LCBwaXZvdCwgc2NyYXRjaDEpO1xuICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShsZWZ0LCBsZWZ0KTtcbiAgICBpZiAoIWxlZnRJc091dHNpZGUpIHtcbiAgICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLm5lZ2F0ZShsZWZ0LCBsZWZ0KTtcbiAgICB9XG4gICAgc3VyZmFjZVBvaW50ID0gZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2Uoc3RhcnRQb2ludCwgc2NyYXRjaDIpO1xuICAgIGZpbmFsUG9zaXRpb25zID0gYWRkUG9zaXRpb24oXG4gICAgICBzdXJmYWNlUG9pbnQsXG4gICAgICBsZWZ0LFxuICAgICAgc2hhcGUsXG4gICAgICBmaW5hbFBvc2l0aW9ucyxcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIGhlaWdodCxcbiAgICAgIDEsXG4gICAgICAxXG4gICAgKTtcblxuICAgIGVuZFBvaW50ID0gQ2FydGVzaWFuMy5jbG9uZShlbmRQb2ludCwgc3RhcnRQb2ludFNjcmF0Y2gpO1xuICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KGVuZFBvaW50LCBwaXZvdCwgc2NyYXRjaDEpO1xuICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShsZWZ0LCBsZWZ0KTtcbiAgICBpZiAoIWxlZnRJc091dHNpZGUpIHtcbiAgICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLm5lZ2F0ZShsZWZ0LCBsZWZ0KTtcbiAgICB9XG4gICAgc3VyZmFjZVBvaW50ID0gZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2UoZW5kUG9pbnQsIHNjcmF0Y2gyKTtcbiAgICBmaW5hbFBvc2l0aW9ucyA9IGFkZFBvc2l0aW9uKFxuICAgICAgc3VyZmFjZVBvaW50LFxuICAgICAgbGVmdCxcbiAgICAgIHNoYXBlLFxuICAgICAgZmluYWxQb3NpdGlvbnMsXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBoZWlnaHQsXG4gICAgICAxLFxuICAgICAgMVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gZmluYWxQb3NpdGlvbnM7XG59XG5cblBvbHlsaW5lVm9sdW1lR2VvbWV0cnlMaWJyYXJ5LnJlbW92ZUR1cGxpY2F0ZXNGcm9tU2hhcGUgPSBmdW5jdGlvbiAoXG4gIHNoYXBlUG9zaXRpb25zXG4pIHtcbiAgdmFyIGxlbmd0aCA9IHNoYXBlUG9zaXRpb25zLmxlbmd0aDtcbiAgdmFyIGNsZWFuZWRQb3NpdGlvbnMgPSBbXTtcbiAgZm9yICh2YXIgaTAgPSBsZW5ndGggLSAxLCBpMSA9IDA7IGkxIDwgbGVuZ3RoOyBpMCA9IGkxKyspIHtcbiAgICB2YXIgdjAgPSBzaGFwZVBvc2l0aW9uc1tpMF07XG4gICAgdmFyIHYxID0gc2hhcGVQb3NpdGlvbnNbaTFdO1xuXG4gICAgaWYgKCFDYXJ0ZXNpYW4yLmVxdWFscyh2MCwgdjEpKSB7XG4gICAgICBjbGVhbmVkUG9zaXRpb25zLnB1c2godjEpOyAvLyBTaGFsbG93IGNvcHkhXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNsZWFuZWRQb3NpdGlvbnM7XG59O1xuXG5Qb2x5bGluZVZvbHVtZUdlb21ldHJ5TGlicmFyeS5hbmdsZUlzR3JlYXRlclRoYW5QaSA9IGZ1bmN0aW9uIChcbiAgZm9yd2FyZCxcbiAgYmFja3dhcmQsXG4gIHBvc2l0aW9uLFxuICBlbGxpcHNvaWRcbikge1xuICB2YXIgdGFuZ2VudFBsYW5lID0gbmV3IEVsbGlwc29pZFRhbmdlbnRQbGFuZShwb3NpdGlvbiwgZWxsaXBzb2lkKTtcbiAgdmFyIG5leHQgPSB0YW5nZW50UGxhbmUucHJvamVjdFBvaW50T250b1BsYW5lKFxuICAgIENhcnRlc2lhbjMuYWRkKHBvc2l0aW9uLCBmb3J3YXJkLCBuZXh0U2NyYXRjaCksXG4gICAgbmV4dFNjcmF0Y2hcbiAgKTtcbiAgdmFyIHByZXYgPSB0YW5nZW50UGxhbmUucHJvamVjdFBvaW50T250b1BsYW5lKFxuICAgIENhcnRlc2lhbjMuYWRkKHBvc2l0aW9uLCBiYWNrd2FyZCwgcHJldlNjcmF0Y2gpLFxuICAgIHByZXZTY3JhdGNoXG4gICk7XG5cbiAgcmV0dXJuIHByZXYueCAqIG5leHQueSAtIHByZXYueSAqIG5leHQueCA+PSAwLjA7XG59O1xuXG52YXIgc2NyYXRjaEZvcndhcmRQcm9qZWN0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQmFja3dhcmRQcm9qZWN0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcblxuUG9seWxpbmVWb2x1bWVHZW9tZXRyeUxpYnJhcnkuY29tcHV0ZVBvc2l0aW9ucyA9IGZ1bmN0aW9uIChcbiAgcG9zaXRpb25zLFxuICBzaGFwZTJELFxuICBib3VuZGluZ1JlY3RhbmdsZSxcbiAgZ2VvbWV0cnksXG4gIGR1cGxpY2F0ZVBvaW50c1xuKSB7XG4gIHZhciBlbGxpcHNvaWQgPSBnZW9tZXRyeS5fZWxsaXBzb2lkO1xuICB2YXIgaGVpZ2h0cyA9IHNjYWxlVG9TdXJmYWNlKHBvc2l0aW9ucywgZWxsaXBzb2lkKTtcbiAgdmFyIGdyYW51bGFyaXR5ID0gZ2VvbWV0cnkuX2dyYW51bGFyaXR5O1xuICB2YXIgY29ybmVyVHlwZSA9IGdlb21ldHJ5Ll9jb3JuZXJUeXBlO1xuICB2YXIgc2hhcGVGb3JTaWRlcyA9IGR1cGxpY2F0ZVBvaW50c1xuICAgID8gY29udmVydFNoYXBlVG8zRER1cGxpY2F0ZShzaGFwZTJELCBib3VuZGluZ1JlY3RhbmdsZSlcbiAgICA6IGNvbnZlcnRTaGFwZVRvM0Qoc2hhcGUyRCwgYm91bmRpbmdSZWN0YW5nbGUpO1xuICB2YXIgc2hhcGVGb3JFbmRzID0gZHVwbGljYXRlUG9pbnRzXG4gICAgPyBjb252ZXJ0U2hhcGVUbzNEKHNoYXBlMkQsIGJvdW5kaW5nUmVjdGFuZ2xlKVxuICAgIDogdW5kZWZpbmVkO1xuICB2YXIgaGVpZ2h0T2Zmc2V0ID0gYm91bmRpbmdSZWN0YW5nbGUuaGVpZ2h0IC8gMjtcbiAgdmFyIHdpZHRoID0gYm91bmRpbmdSZWN0YW5nbGUud2lkdGggLyAyO1xuICB2YXIgbGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgdmFyIGZpbmFsUG9zaXRpb25zID0gW107XG4gIHZhciBlbmRzID0gZHVwbGljYXRlUG9pbnRzID8gW10gOiB1bmRlZmluZWQ7XG5cbiAgdmFyIGZvcndhcmQgPSBzY3JhdGNoQ2FydGVzaWFuMTtcbiAgdmFyIGJhY2t3YXJkID0gc2NyYXRjaENhcnRlc2lhbjI7XG4gIHZhciBjb3JuZXJEaXJlY3Rpb24gPSBzY3JhdGNoQ2FydGVzaWFuMztcbiAgdmFyIHN1cmZhY2VOb3JtYWwgPSBzY3JhdGNoQ2FydGVzaWFuNDtcbiAgdmFyIHBpdm90ID0gc2NyYXRjaENhcnRlc2lhbjU7XG4gIHZhciBzdGFydCA9IHNjcmF0Y2hDYXJ0ZXNpYW42O1xuICB2YXIgZW5kID0gc2NyYXRjaENhcnRlc2lhbjc7XG4gIHZhciBsZWZ0ID0gc2NyYXRjaENhcnRlc2lhbjg7XG4gIHZhciBwcmV2aW91c1Bvc2l0aW9uID0gc2NyYXRjaENhcnRlc2lhbjk7XG5cbiAgdmFyIHBvc2l0aW9uID0gcG9zaXRpb25zWzBdO1xuICB2YXIgbmV4dFBvc2l0aW9uID0gcG9zaXRpb25zWzFdO1xuICBzdXJmYWNlTm9ybWFsID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbChwb3NpdGlvbiwgc3VyZmFjZU5vcm1hbCk7XG4gIGZvcndhcmQgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KG5leHRQb3NpdGlvbiwgcG9zaXRpb24sIGZvcndhcmQpO1xuICBmb3J3YXJkID0gQ2FydGVzaWFuMy5ub3JtYWxpemUoZm9yd2FyZCwgZm9yd2FyZCk7XG4gIGxlZnQgPSBDYXJ0ZXNpYW4zLmNyb3NzKHN1cmZhY2VOb3JtYWwsIGZvcndhcmQsIGxlZnQpO1xuICBsZWZ0ID0gQ2FydGVzaWFuMy5ub3JtYWxpemUobGVmdCwgbGVmdCk7XG4gIHZhciBoMCA9IGhlaWdodHNbMF07XG4gIHZhciBoMSA9IGhlaWdodHNbMV07XG4gIGlmIChkdXBsaWNhdGVQb2ludHMpIHtcbiAgICBlbmRzID0gYWRkUG9zaXRpb24oXG4gICAgICBwb3NpdGlvbixcbiAgICAgIGxlZnQsXG4gICAgICBzaGFwZUZvckVuZHMsXG4gICAgICBlbmRzLFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgaDAgKyBoZWlnaHRPZmZzZXQsXG4gICAgICAxLFxuICAgICAgMVxuICAgICk7XG4gIH1cbiAgcHJldmlvdXNQb3NpdGlvbiA9IENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb24sIHByZXZpb3VzUG9zaXRpb24pO1xuICBwb3NpdGlvbiA9IG5leHRQb3NpdGlvbjtcbiAgYmFja3dhcmQgPSBDYXJ0ZXNpYW4zLm5lZ2F0ZShmb3J3YXJkLCBiYWNrd2FyZCk7XG4gIHZhciBzdWJkaXZpZGVkSGVpZ2h0cztcbiAgdmFyIHN1YmRpdmlkZWRQb3NpdGlvbnM7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgdmFyIHJlcGVhdCA9IGR1cGxpY2F0ZVBvaW50cyA/IDIgOiAxO1xuICAgIG5leHRQb3NpdGlvbiA9IHBvc2l0aW9uc1tpICsgMV07XG4gICAgaWYgKHBvc2l0aW9uLmVxdWFscyhuZXh0UG9zaXRpb24pKSB7XG4gICAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgICAgXCJQb3NpdGlvbnMgYXJlIHRvbyBjbG9zZSBhbmQgYXJlIGNvbnNpZGVyZWQgZXF1aXZhbGVudCB3aXRoIHJvdW5kaW5nIGVycm9yLlwiXG4gICAgICApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGZvcndhcmQgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KG5leHRQb3NpdGlvbiwgcG9zaXRpb24sIGZvcndhcmQpO1xuICAgIGZvcndhcmQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShmb3J3YXJkLCBmb3J3YXJkKTtcbiAgICBjb3JuZXJEaXJlY3Rpb24gPSBDYXJ0ZXNpYW4zLmFkZChmb3J3YXJkLCBiYWNrd2FyZCwgY29ybmVyRGlyZWN0aW9uKTtcbiAgICBjb3JuZXJEaXJlY3Rpb24gPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShjb3JuZXJEaXJlY3Rpb24sIGNvcm5lckRpcmVjdGlvbik7XG4gICAgc3VyZmFjZU5vcm1hbCA9IGVsbGlwc29pZC5nZW9kZXRpY1N1cmZhY2VOb3JtYWwocG9zaXRpb24sIHN1cmZhY2VOb3JtYWwpO1xuXG4gICAgdmFyIGZvcndhcmRQcm9qZWN0aW9uID0gQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKFxuICAgICAgc3VyZmFjZU5vcm1hbCxcbiAgICAgIENhcnRlc2lhbjMuZG90KGZvcndhcmQsIHN1cmZhY2VOb3JtYWwpLFxuICAgICAgc2NyYXRjaEZvcndhcmRQcm9qZWN0aW9uXG4gICAgKTtcbiAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KGZvcndhcmQsIGZvcndhcmRQcm9qZWN0aW9uLCBmb3J3YXJkUHJvamVjdGlvbik7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUoZm9yd2FyZFByb2plY3Rpb24sIGZvcndhcmRQcm9qZWN0aW9uKTtcblxuICAgIHZhciBiYWNrd2FyZFByb2plY3Rpb24gPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgICBzdXJmYWNlTm9ybWFsLFxuICAgICAgQ2FydGVzaWFuMy5kb3QoYmFja3dhcmQsIHN1cmZhY2VOb3JtYWwpLFxuICAgICAgc2NyYXRjaEJhY2t3YXJkUHJvamVjdGlvblxuICAgICk7XG4gICAgQ2FydGVzaWFuMy5zdWJ0cmFjdChiYWNrd2FyZCwgYmFja3dhcmRQcm9qZWN0aW9uLCBiYWNrd2FyZFByb2plY3Rpb24pO1xuICAgIENhcnRlc2lhbjMubm9ybWFsaXplKGJhY2t3YXJkUHJvamVjdGlvbiwgYmFja3dhcmRQcm9qZWN0aW9uKTtcblxuICAgIHZhciBkb0Nvcm5lciA9ICFDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oXG4gICAgICBNYXRoLmFicyhDYXJ0ZXNpYW4zLmRvdChmb3J3YXJkUHJvamVjdGlvbiwgYmFja3dhcmRQcm9qZWN0aW9uKSksXG4gICAgICAxLjAsXG4gICAgICBDZXNpdW1NYXRoLkVQU0lMT043XG4gICAgKTtcblxuICAgIGlmIChkb0Nvcm5lcikge1xuICAgICAgY29ybmVyRGlyZWN0aW9uID0gQ2FydGVzaWFuMy5jcm9zcyhcbiAgICAgICAgY29ybmVyRGlyZWN0aW9uLFxuICAgICAgICBzdXJmYWNlTm9ybWFsLFxuICAgICAgICBjb3JuZXJEaXJlY3Rpb25cbiAgICAgICk7XG4gICAgICBjb3JuZXJEaXJlY3Rpb24gPSBDYXJ0ZXNpYW4zLmNyb3NzKFxuICAgICAgICBzdXJmYWNlTm9ybWFsLFxuICAgICAgICBjb3JuZXJEaXJlY3Rpb24sXG4gICAgICAgIGNvcm5lckRpcmVjdGlvblxuICAgICAgKTtcbiAgICAgIGNvcm5lckRpcmVjdGlvbiA9IENhcnRlc2lhbjMubm9ybWFsaXplKGNvcm5lckRpcmVjdGlvbiwgY29ybmVyRGlyZWN0aW9uKTtcbiAgICAgIHZhciBzY2FsYXIgPVxuICAgICAgICAxIC9cbiAgICAgICAgTWF0aC5tYXgoXG4gICAgICAgICAgMC4yNSxcbiAgICAgICAgICBDYXJ0ZXNpYW4zLm1hZ25pdHVkZShcbiAgICAgICAgICAgIENhcnRlc2lhbjMuY3Jvc3MoY29ybmVyRGlyZWN0aW9uLCBiYWNrd2FyZCwgc2NyYXRjaDEpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgdmFyIGxlZnRJc091dHNpZGUgPSBQb2x5bGluZVZvbHVtZUdlb21ldHJ5TGlicmFyeS5hbmdsZUlzR3JlYXRlclRoYW5QaShcbiAgICAgICAgZm9yd2FyZCxcbiAgICAgICAgYmFja3dhcmQsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBlbGxpcHNvaWRcbiAgICAgICk7XG4gICAgICBpZiAobGVmdElzT3V0c2lkZSkge1xuICAgICAgICBwaXZvdCA9IENhcnRlc2lhbjMuYWRkKFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgICAgICAgIGNvcm5lckRpcmVjdGlvbixcbiAgICAgICAgICAgIHNjYWxhciAqIHdpZHRoLFxuICAgICAgICAgICAgY29ybmVyRGlyZWN0aW9uXG4gICAgICAgICAgKSxcbiAgICAgICAgICBwaXZvdFxuICAgICAgICApO1xuICAgICAgICBzdGFydCA9IENhcnRlc2lhbjMuYWRkKFxuICAgICAgICAgIHBpdm90LFxuICAgICAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihsZWZ0LCB3aWR0aCwgc3RhcnQpLFxuICAgICAgICAgIHN0YXJ0XG4gICAgICAgICk7XG4gICAgICAgIHNjcmF0Y2gyQXJyYXlbMF0gPSBDYXJ0ZXNpYW4zLmNsb25lKHByZXZpb3VzUG9zaXRpb24sIHNjcmF0Y2gyQXJyYXlbMF0pO1xuICAgICAgICBzY3JhdGNoMkFycmF5WzFdID0gQ2FydGVzaWFuMy5jbG9uZShzdGFydCwgc2NyYXRjaDJBcnJheVsxXSk7XG4gICAgICAgIHN1YmRpdmlkZWRIZWlnaHRzID0gc3ViZGl2aWRlSGVpZ2h0cyhcbiAgICAgICAgICBzY3JhdGNoMkFycmF5LFxuICAgICAgICAgIGgwICsgaGVpZ2h0T2Zmc2V0LFxuICAgICAgICAgIGgxICsgaGVpZ2h0T2Zmc2V0LFxuICAgICAgICAgIGdyYW51bGFyaXR5XG4gICAgICAgICk7XG4gICAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnMgPSBQb2x5bGluZVBpcGVsaW5lLmdlbmVyYXRlQXJjKHtcbiAgICAgICAgICBwb3NpdGlvbnM6IHNjcmF0Y2gyQXJyYXksXG4gICAgICAgICAgZ3JhbnVsYXJpdHk6IGdyYW51bGFyaXR5LFxuICAgICAgICAgIGVsbGlwc29pZDogZWxsaXBzb2lkLFxuICAgICAgICB9KTtcbiAgICAgICAgZmluYWxQb3NpdGlvbnMgPSBhZGRQb3NpdGlvbnMoXG4gICAgICAgICAgc3ViZGl2aWRlZFBvc2l0aW9ucyxcbiAgICAgICAgICBsZWZ0LFxuICAgICAgICAgIHNoYXBlRm9yU2lkZXMsXG4gICAgICAgICAgZmluYWxQb3NpdGlvbnMsXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHN1YmRpdmlkZWRIZWlnaHRzLFxuICAgICAgICAgIDFcbiAgICAgICAgKTtcbiAgICAgICAgbGVmdCA9IENhcnRlc2lhbjMuY3Jvc3Moc3VyZmFjZU5vcm1hbCwgZm9yd2FyZCwgbGVmdCk7XG4gICAgICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShsZWZ0LCBsZWZ0KTtcbiAgICAgICAgZW5kID0gQ2FydGVzaWFuMy5hZGQoXG4gICAgICAgICAgcGl2b3QsXG4gICAgICAgICAgQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKGxlZnQsIHdpZHRoLCBlbmQpLFxuICAgICAgICAgIGVuZFxuICAgICAgICApO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY29ybmVyVHlwZSA9PT0gQ29ybmVyVHlwZS5ST1VOREVEIHx8XG4gICAgICAgICAgY29ybmVyVHlwZSA9PT0gQ29ybmVyVHlwZS5CRVZFTEVEXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbXB1dGVSb3VuZENvcm5lcihcbiAgICAgICAgICAgIHBpdm90LFxuICAgICAgICAgICAgc3RhcnQsXG4gICAgICAgICAgICBlbmQsXG4gICAgICAgICAgICBjb3JuZXJUeXBlLFxuICAgICAgICAgICAgbGVmdElzT3V0c2lkZSxcbiAgICAgICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgICAgIGZpbmFsUG9zaXRpb25zLFxuICAgICAgICAgICAgc2hhcGVGb3JTaWRlcyxcbiAgICAgICAgICAgIGgxICsgaGVpZ2h0T2Zmc2V0LFxuICAgICAgICAgICAgZHVwbGljYXRlUG9pbnRzXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb3JuZXJEaXJlY3Rpb24gPSBDYXJ0ZXNpYW4zLm5lZ2F0ZShjb3JuZXJEaXJlY3Rpb24sIGNvcm5lckRpcmVjdGlvbik7XG4gICAgICAgICAgZmluYWxQb3NpdGlvbnMgPSBhZGRQb3NpdGlvbihcbiAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgY29ybmVyRGlyZWN0aW9uLFxuICAgICAgICAgICAgc2hhcGVGb3JTaWRlcyxcbiAgICAgICAgICAgIGZpbmFsUG9zaXRpb25zLFxuICAgICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgICAgaDEgKyBoZWlnaHRPZmZzZXQsXG4gICAgICAgICAgICBzY2FsYXIsXG4gICAgICAgICAgICByZXBlYXRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzUG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKGVuZCwgcHJldmlvdXNQb3NpdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwaXZvdCA9IENhcnRlc2lhbjMuYWRkKFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgICAgICAgIGNvcm5lckRpcmVjdGlvbixcbiAgICAgICAgICAgIHNjYWxhciAqIHdpZHRoLFxuICAgICAgICAgICAgY29ybmVyRGlyZWN0aW9uXG4gICAgICAgICAgKSxcbiAgICAgICAgICBwaXZvdFxuICAgICAgICApO1xuICAgICAgICBzdGFydCA9IENhcnRlc2lhbjMuYWRkKFxuICAgICAgICAgIHBpdm90LFxuICAgICAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihsZWZ0LCAtd2lkdGgsIHN0YXJ0KSxcbiAgICAgICAgICBzdGFydFxuICAgICAgICApO1xuICAgICAgICBzY3JhdGNoMkFycmF5WzBdID0gQ2FydGVzaWFuMy5jbG9uZShwcmV2aW91c1Bvc2l0aW9uLCBzY3JhdGNoMkFycmF5WzBdKTtcbiAgICAgICAgc2NyYXRjaDJBcnJheVsxXSA9IENhcnRlc2lhbjMuY2xvbmUoc3RhcnQsIHNjcmF0Y2gyQXJyYXlbMV0pO1xuICAgICAgICBzdWJkaXZpZGVkSGVpZ2h0cyA9IHN1YmRpdmlkZUhlaWdodHMoXG4gICAgICAgICAgc2NyYXRjaDJBcnJheSxcbiAgICAgICAgICBoMCArIGhlaWdodE9mZnNldCxcbiAgICAgICAgICBoMSArIGhlaWdodE9mZnNldCxcbiAgICAgICAgICBncmFudWxhcml0eVxuICAgICAgICApO1xuICAgICAgICBzdWJkaXZpZGVkUG9zaXRpb25zID0gUG9seWxpbmVQaXBlbGluZS5nZW5lcmF0ZUFyYyh7XG4gICAgICAgICAgcG9zaXRpb25zOiBzY3JhdGNoMkFycmF5LFxuICAgICAgICAgIGdyYW51bGFyaXR5OiBncmFudWxhcml0eSxcbiAgICAgICAgICBlbGxpcHNvaWQ6IGVsbGlwc29pZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGZpbmFsUG9zaXRpb25zID0gYWRkUG9zaXRpb25zKFxuICAgICAgICAgIHN1YmRpdmlkZWRQb3NpdGlvbnMsXG4gICAgICAgICAgbGVmdCxcbiAgICAgICAgICBzaGFwZUZvclNpZGVzLFxuICAgICAgICAgIGZpbmFsUG9zaXRpb25zLFxuICAgICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgICBzdWJkaXZpZGVkSGVpZ2h0cyxcbiAgICAgICAgICAxXG4gICAgICAgICk7XG4gICAgICAgIGxlZnQgPSBDYXJ0ZXNpYW4zLmNyb3NzKHN1cmZhY2VOb3JtYWwsIGZvcndhcmQsIGxlZnQpO1xuICAgICAgICBsZWZ0ID0gQ2FydGVzaWFuMy5ub3JtYWxpemUobGVmdCwgbGVmdCk7XG4gICAgICAgIGVuZCA9IENhcnRlc2lhbjMuYWRkKFxuICAgICAgICAgIHBpdm90LFxuICAgICAgICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihsZWZ0LCAtd2lkdGgsIGVuZCksXG4gICAgICAgICAgZW5kXG4gICAgICAgICk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb3JuZXJUeXBlID09PSBDb3JuZXJUeXBlLlJPVU5ERUQgfHxcbiAgICAgICAgICBjb3JuZXJUeXBlID09PSBDb3JuZXJUeXBlLkJFVkVMRURcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29tcHV0ZVJvdW5kQ29ybmVyKFxuICAgICAgICAgICAgcGl2b3QsXG4gICAgICAgICAgICBzdGFydCxcbiAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgIGNvcm5lclR5cGUsXG4gICAgICAgICAgICBsZWZ0SXNPdXRzaWRlLFxuICAgICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgICAgZmluYWxQb3NpdGlvbnMsXG4gICAgICAgICAgICBzaGFwZUZvclNpZGVzLFxuICAgICAgICAgICAgaDEgKyBoZWlnaHRPZmZzZXQsXG4gICAgICAgICAgICBkdXBsaWNhdGVQb2ludHNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpbmFsUG9zaXRpb25zID0gYWRkUG9zaXRpb24oXG4gICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgIGNvcm5lckRpcmVjdGlvbixcbiAgICAgICAgICAgIHNoYXBlRm9yU2lkZXMsXG4gICAgICAgICAgICBmaW5hbFBvc2l0aW9ucyxcbiAgICAgICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgICAgIGgxICsgaGVpZ2h0T2Zmc2V0LFxuICAgICAgICAgICAgc2NhbGFyLFxuICAgICAgICAgICAgcmVwZWF0XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91c1Bvc2l0aW9uID0gQ2FydGVzaWFuMy5jbG9uZShlbmQsIHByZXZpb3VzUG9zaXRpb24pO1xuICAgICAgfVxuICAgICAgYmFja3dhcmQgPSBDYXJ0ZXNpYW4zLm5lZ2F0ZShmb3J3YXJkLCBiYWNrd2FyZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbmFsUG9zaXRpb25zID0gYWRkUG9zaXRpb24oXG4gICAgICAgIHByZXZpb3VzUG9zaXRpb24sXG4gICAgICAgIGxlZnQsXG4gICAgICAgIHNoYXBlRm9yU2lkZXMsXG4gICAgICAgIGZpbmFsUG9zaXRpb25zLFxuICAgICAgICBlbGxpcHNvaWQsXG4gICAgICAgIGgwICsgaGVpZ2h0T2Zmc2V0LFxuICAgICAgICAxLFxuICAgICAgICAxXG4gICAgICApO1xuICAgICAgcHJldmlvdXNQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIH1cbiAgICBoMCA9IGgxO1xuICAgIGgxID0gaGVpZ2h0c1tpICsgMV07XG4gICAgcG9zaXRpb24gPSBuZXh0UG9zaXRpb247XG4gIH1cblxuICBzY3JhdGNoMkFycmF5WzBdID0gQ2FydGVzaWFuMy5jbG9uZShwcmV2aW91c1Bvc2l0aW9uLCBzY3JhdGNoMkFycmF5WzBdKTtcbiAgc2NyYXRjaDJBcnJheVsxXSA9IENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb24sIHNjcmF0Y2gyQXJyYXlbMV0pO1xuICBzdWJkaXZpZGVkSGVpZ2h0cyA9IHN1YmRpdmlkZUhlaWdodHMoXG4gICAgc2NyYXRjaDJBcnJheSxcbiAgICBoMCArIGhlaWdodE9mZnNldCxcbiAgICBoMSArIGhlaWdodE9mZnNldCxcbiAgICBncmFudWxhcml0eVxuICApO1xuICBzdWJkaXZpZGVkUG9zaXRpb25zID0gUG9seWxpbmVQaXBlbGluZS5nZW5lcmF0ZUFyYyh7XG4gICAgcG9zaXRpb25zOiBzY3JhdGNoMkFycmF5LFxuICAgIGdyYW51bGFyaXR5OiBncmFudWxhcml0eSxcbiAgICBlbGxpcHNvaWQ6IGVsbGlwc29pZCxcbiAgfSk7XG4gIGZpbmFsUG9zaXRpb25zID0gYWRkUG9zaXRpb25zKFxuICAgIHN1YmRpdmlkZWRQb3NpdGlvbnMsXG4gICAgbGVmdCxcbiAgICBzaGFwZUZvclNpZGVzLFxuICAgIGZpbmFsUG9zaXRpb25zLFxuICAgIGVsbGlwc29pZCxcbiAgICBzdWJkaXZpZGVkSGVpZ2h0cyxcbiAgICAxXG4gICk7XG4gIGlmIChkdXBsaWNhdGVQb2ludHMpIHtcbiAgICBlbmRzID0gYWRkUG9zaXRpb24oXG4gICAgICBwb3NpdGlvbixcbiAgICAgIGxlZnQsXG4gICAgICBzaGFwZUZvckVuZHMsXG4gICAgICBlbmRzLFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgaDEgKyBoZWlnaHRPZmZzZXQsXG4gICAgICAxLFxuICAgICAgMVxuICAgICk7XG4gIH1cblxuICBsZW5ndGggPSBmaW5hbFBvc2l0aW9ucy5sZW5ndGg7XG4gIHZhciBwb3NMZW5ndGggPSBkdXBsaWNhdGVQb2ludHMgPyBsZW5ndGggKyBlbmRzLmxlbmd0aCA6IGxlbmd0aDtcbiAgdmFyIGNvbWJpbmVkUG9zaXRpb25zID0gbmV3IEZsb2F0NjRBcnJheShwb3NMZW5ndGgpO1xuICBjb21iaW5lZFBvc2l0aW9ucy5zZXQoZmluYWxQb3NpdGlvbnMpO1xuICBpZiAoZHVwbGljYXRlUG9pbnRzKSB7XG4gICAgY29tYmluZWRQb3NpdGlvbnMuc2V0KGVuZHMsIGxlbmd0aCk7XG4gIH1cblxuICByZXR1cm4gY29tYmluZWRQb3NpdGlvbnM7XG59O1xuZXhwb3J0IGRlZmF1bHQgUG9seWxpbmVWb2x1bWVHZW9tZXRyeUxpYnJhcnk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///39534\n')},64306:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(32378);\n/* harmony import */ var _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88108);\n/* harmony import */ var _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(48243);\n/* harmony import */ var _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60838);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60216);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84828);\n/* harmony import */ var _CornerType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(56439);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12572);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(50491);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(13616);\n/* harmony import */ var _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(56652);\n/* harmony import */ var _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(22832);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(99417);\n/* harmony import */ var _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(78284);\n/* harmony import */ var _PolylineVolumeGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(39534);\n/* harmony import */ var _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(97264);\n/* harmony import */ var _WindingOrder_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(32441);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction computeAttributes(positions, shape) {\n  var attributes = new _GeometryAttributes_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\n  attributes.position = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n    componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].DOUBLE */ .Z.DOUBLE,\n    componentsPerAttribute: 3,\n    values: positions,\n  });\n\n  var shapeLength = shape.length;\n  var vertexCount = attributes.position.values.length / 3;\n  var positionLength = positions.length / 3;\n  var shapeCount = positionLength / shapeLength;\n  var indices = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].createTypedArray */ .Z.createTypedArray(\n    vertexCount,\n    2 * shapeLength * (shapeCount + 1)\n  );\n  var i, j;\n  var index = 0;\n  i = 0;\n  var offset = i * shapeLength;\n  for (j = 0; j < shapeLength - 1; j++) {\n    indices[index++] = j + offset;\n    indices[index++] = j + offset + 1;\n  }\n  indices[index++] = shapeLength - 1 + offset;\n  indices[index++] = offset;\n\n  i = shapeCount - 1;\n  offset = i * shapeLength;\n  for (j = 0; j < shapeLength - 1; j++) {\n    indices[index++] = j + offset;\n    indices[index++] = j + offset + 1;\n  }\n  indices[index++] = shapeLength - 1 + offset;\n  indices[index++] = offset;\n\n  for (i = 0; i < shapeCount - 1; i++) {\n    var firstOffset = shapeLength * i;\n    var secondOffset = firstOffset + shapeLength;\n    for (j = 0; j < shapeLength; j++) {\n      indices[index++] = j + firstOffset;\n      indices[index++] = j + secondOffset;\n    }\n  }\n\n  var geometry = new _Geometry_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    attributes: attributes,\n    indices: _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].createTypedArray */ .Z.createTypedArray(vertexCount, indices),\n    boundingSphere: _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromVertices */ .Z.fromVertices(positions),\n    primitiveType: _PrimitiveType_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].LINES */ .Z.LINES,\n  });\n\n  return geometry;\n}\n\n/**\n * A description of a polyline with a volume (a 2D shape extruded along a polyline).\n *\n * @alias PolylineVolumeOutlineGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.polylinePositions An array of positions that define the center of the polyline volume.\n * @param {Cartesian2[]} options.shapePositions An array of positions that define the shape to be extruded along the polyline\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {CornerType} [options.cornerType=CornerType.ROUNDED] Determines the style of the corners.\n *\n * @see PolylineVolumeOutlineGeometry#createGeometry\n *\n * @example\n * function computeCircle(radius) {\n *   var positions = [];\n *   for (var i = 0; i < 360; i++) {\n *     var radians = Cesium.Math.toRadians(i);\n *     positions.push(new Cesium.Cartesian2(radius * Math.cos(radians), radius * Math.sin(radians)));\n *   }\n *   return positions;\n * }\n *\n * var volumeOutline = new Cesium.PolylineVolumeOutlineGeometry({\n *   polylinePositions : Cesium.Cartesian3.fromDegreesArray([\n *     -72.0, 40.0,\n *     -70.0, 35.0\n *   ]),\n *   shapePositions : computeCircle(100000.0)\n * });\n */\nfunction PolylineVolumeOutlineGeometry(options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var positions = options.polylinePositions;\n  var shape = options.shapePositions;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(positions)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("options.polylinePositions is required.");\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(shape)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("options.shapePositions is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this._positions = positions;\n  this._shape = shape;\n  this._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(\n    (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.ellipsoid, _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].WGS84 */ .Z.WGS84)\n  );\n  this._cornerType = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.cornerType, _CornerType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].ROUNDED */ .Z.ROUNDED);\n  this._granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(\n    options.granularity,\n    _Math_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  );\n  this._workerName = "createPolylineVolumeOutlineGeometry";\n\n  var numComponents = 1 + positions.length * _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength;\n  numComponents += 1 + shape.length * _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength;\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength = numComponents + _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].packedLength */ .Z.packedLength + 2;\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {PolylineVolumeOutlineGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nPolylineVolumeOutlineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(value)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("value is required");\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(array)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("array is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var i;\n\n  var positions = value._positions;\n  var length = positions.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength) {\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(positions[i], array, startingIndex);\n  }\n\n  var shape = value._shape;\n  length = shape.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength) {\n    _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].pack */ .Z.pack(shape[i], array, startingIndex);\n  }\n\n  _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].pack */ .Z.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].packedLength */ .Z.packedLength;\n\n  array[startingIndex++] = value._cornerType;\n  array[startingIndex] = value._granularity;\n\n  return array;\n};\n\nvar scratchEllipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].UNIT_SPHERE */ .Z.UNIT_SPHERE);\nvar scratchOptions = {\n  polylinePositions: undefined,\n  shapePositions: undefined,\n  ellipsoid: scratchEllipsoid,\n  height: undefined,\n  cornerType: undefined,\n  granularity: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {PolylineVolumeOutlineGeometry} [result] The object into which to store the result.\n * @returns {PolylineVolumeOutlineGeometry} The modified result parameter or a new PolylineVolumeOutlineGeometry instance if one was not provided.\n */\nPolylineVolumeOutlineGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(array)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z("array is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  startingIndex = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var i;\n\n  var length = array[startingIndex++];\n  var positions = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].packedLength */ .Z.packedLength) {\n    positions[i] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(array, startingIndex);\n  }\n\n  length = array[startingIndex++];\n  var shape = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packedLength */ .Z.packedLength) {\n    shape[i] = _Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].unpack */ .Z.unpack(array, startingIndex);\n  }\n\n  var ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].unpack */ .Z.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].packedLength */ .Z.packedLength;\n\n  var cornerType = array[startingIndex++];\n  var granularity = array[startingIndex];\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(result)) {\n    scratchOptions.polylinePositions = positions;\n    scratchOptions.shapePositions = shape;\n    scratchOptions.cornerType = cornerType;\n    scratchOptions.granularity = granularity;\n    return new PolylineVolumeOutlineGeometry(scratchOptions);\n  }\n\n  result._positions = positions;\n  result._shape = shape;\n  result._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(ellipsoid, result._ellipsoid);\n  result._cornerType = cornerType;\n  result._granularity = granularity;\n\n  return result;\n};\n\nvar brScratch = new _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * Computes the geometric representation of the outline of a polyline with a volume, including its vertices, indices, and a bounding sphere.\n *\n * @param {PolylineVolumeOutlineGeometry} polylineVolumeOutlineGeometry A description of the polyline volume outline.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nPolylineVolumeOutlineGeometry.createGeometry = function (\n  polylineVolumeOutlineGeometry\n) {\n  var positions = polylineVolumeOutlineGeometry._positions;\n  var cleanPositions = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    positions,\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon\n  );\n  var shape2D = polylineVolumeOutlineGeometry._shape;\n  shape2D = _PolylineVolumeGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].removeDuplicatesFromShape */ .Z.removeDuplicatesFromShape(shape2D);\n\n  if (cleanPositions.length < 2 || shape2D.length < 3) {\n    return undefined;\n  }\n\n  if (\n    _PolygonPipeline_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].computeWindingOrder2D */ .Z.computeWindingOrder2D(shape2D) === _WindingOrder_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CLOCKWISE */ .Z.CLOCKWISE\n  ) {\n    shape2D.reverse();\n  }\n  var boundingRectangle = _BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromPoints */ .Z.fromPoints(shape2D, brScratch);\n\n  var computedPositions = _PolylineVolumeGeometryLibrary_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].computePositions */ .Z.computePositions(\n    cleanPositions,\n    shape2D,\n    boundingRectangle,\n    polylineVolumeOutlineGeometry,\n    false\n  );\n  return computeAttributes(computedPositions, shape2D);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolylineVolumeOutlineGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBLE9BQU8saUVBQU87QUFDZCxjQUFjLG1FQUFjO0FBQzVCO0FBQ0E7O0FBRUEsa0JBQWtCLHFFQUFZOztBQUU5Qjs7QUFFQTtBQUNBOztBQUVBLGNBQWMsWUFBWSxzQkFBc0IseUZBQXVCO0FBQ3ZFLG1CQUFtQiw2RUFBaUI7QUFDcEM7O0FBRUE7QUFDQTs7QUFFQSxjQUFjLFlBQVksc0JBQXNCLHlGQUF1QjtBQUN2RSxlQUFlLDZFQUFpQjtBQUNoQzs7QUFFQSxrQkFBa0IsNEVBQWdCO0FBQ2xDLG1CQUFtQix3RkFBc0I7O0FBRXpDO0FBQ0E7O0FBRUEsT0FBTyxpRUFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0JBQXNCLDBFQUFlO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxvQkFBb0Isc0VBQWlCOztBQUVyQztBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUErQjtBQUMxQyxhQUFhLG9CQUFvQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDhFQUFxQjtBQUM1QztBQUNBLElBQUksMkZBQXdCO0FBQzVCO0FBQ0E7QUFDQSxZQUFZLHVJQUF1RDs7QUFFbkU7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxpSEFBcUMsY0FBYyxzRkFBc0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDRGQUE0Qjs7QUFFdEQsMEJBQTBCLHFIQUE4QztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsNkJBQTZCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9Qb2x5bGluZVZvbHVtZU91dGxpbmVHZW9tZXRyeS5qcz9mNzc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcnJheVJlbW92ZUR1cGxpY2F0ZXMgZnJvbSBcIi4vYXJyYXlSZW1vdmVEdXBsaWNhdGVzLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdSZWN0YW5nbGUgZnJvbSBcIi4vQm91bmRpbmdSZWN0YW5nbGUuanNcIjtcbmltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4vQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4vQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENvbXBvbmVudERhdGF0eXBlIGZyb20gXCIuL0NvbXBvbmVudERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgQ29ybmVyVHlwZSBmcm9tIFwiLi9Db3JuZXJUeXBlLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4vZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRWxsaXBzb2lkIGZyb20gXCIuL0VsbGlwc29pZC5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gXCIuL0dlb21ldHJ5LmpzXCI7XG5pbXBvcnQgR2VvbWV0cnlBdHRyaWJ1dGUgZnJvbSBcIi4vR2VvbWV0cnlBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBHZW9tZXRyeUF0dHJpYnV0ZXMgZnJvbSBcIi4vR2VvbWV0cnlBdHRyaWJ1dGVzLmpzXCI7XG5pbXBvcnQgSW5kZXhEYXRhdHlwZSBmcm9tIFwiLi9JbmRleERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi9NYXRoLmpzXCI7XG5pbXBvcnQgUG9seWdvblBpcGVsaW5lIGZyb20gXCIuL1BvbHlnb25QaXBlbGluZS5qc1wiO1xuaW1wb3J0IFBvbHlsaW5lVm9sdW1lR2VvbWV0cnlMaWJyYXJ5IGZyb20gXCIuL1BvbHlsaW5lVm9sdW1lR2VvbWV0cnlMaWJyYXJ5LmpzXCI7XG5pbXBvcnQgUHJpbWl0aXZlVHlwZSBmcm9tIFwiLi9QcmltaXRpdmVUeXBlLmpzXCI7XG5pbXBvcnQgV2luZGluZ09yZGVyIGZyb20gXCIuL1dpbmRpbmdPcmRlci5qc1wiO1xuXG5mdW5jdGlvbiBjb21wdXRlQXR0cmlidXRlcyhwb3NpdGlvbnMsIHNoYXBlKSB7XG4gIHZhciBhdHRyaWJ1dGVzID0gbmV3IEdlb21ldHJ5QXR0cmlidXRlcygpO1xuICBhdHRyaWJ1dGVzLnBvc2l0aW9uID0gbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRE9VQkxFLFxuICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgdmFsdWVzOiBwb3NpdGlvbnMsXG4gIH0pO1xuXG4gIHZhciBzaGFwZUxlbmd0aCA9IHNoYXBlLmxlbmd0aDtcbiAgdmFyIHZlcnRleENvdW50ID0gYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZXMubGVuZ3RoIC8gMztcbiAgdmFyIHBvc2l0aW9uTGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aCAvIDM7XG4gIHZhciBzaGFwZUNvdW50ID0gcG9zaXRpb25MZW5ndGggLyBzaGFwZUxlbmd0aDtcbiAgdmFyIGluZGljZXMgPSBJbmRleERhdGF0eXBlLmNyZWF0ZVR5cGVkQXJyYXkoXG4gICAgdmVydGV4Q291bnQsXG4gICAgMiAqIHNoYXBlTGVuZ3RoICogKHNoYXBlQ291bnQgKyAxKVxuICApO1xuICB2YXIgaSwgajtcbiAgdmFyIGluZGV4ID0gMDtcbiAgaSA9IDA7XG4gIHZhciBvZmZzZXQgPSBpICogc2hhcGVMZW5ndGg7XG4gIGZvciAoaiA9IDA7IGogPCBzaGFwZUxlbmd0aCAtIDE7IGorKykge1xuICAgIGluZGljZXNbaW5kZXgrK10gPSBqICsgb2Zmc2V0O1xuICAgIGluZGljZXNbaW5kZXgrK10gPSBqICsgb2Zmc2V0ICsgMTtcbiAgfVxuICBpbmRpY2VzW2luZGV4KytdID0gc2hhcGVMZW5ndGggLSAxICsgb2Zmc2V0O1xuICBpbmRpY2VzW2luZGV4KytdID0gb2Zmc2V0O1xuXG4gIGkgPSBzaGFwZUNvdW50IC0gMTtcbiAgb2Zmc2V0ID0gaSAqIHNoYXBlTGVuZ3RoO1xuICBmb3IgKGogPSAwOyBqIDwgc2hhcGVMZW5ndGggLSAxOyBqKyspIHtcbiAgICBpbmRpY2VzW2luZGV4KytdID0gaiArIG9mZnNldDtcbiAgICBpbmRpY2VzW2luZGV4KytdID0gaiArIG9mZnNldCArIDE7XG4gIH1cbiAgaW5kaWNlc1tpbmRleCsrXSA9IHNoYXBlTGVuZ3RoIC0gMSArIG9mZnNldDtcbiAgaW5kaWNlc1tpbmRleCsrXSA9IG9mZnNldDtcblxuICBmb3IgKGkgPSAwOyBpIDwgc2hhcGVDb3VudCAtIDE7IGkrKykge1xuICAgIHZhciBmaXJzdE9mZnNldCA9IHNoYXBlTGVuZ3RoICogaTtcbiAgICB2YXIgc2Vjb25kT2Zmc2V0ID0gZmlyc3RPZmZzZXQgKyBzaGFwZUxlbmd0aDtcbiAgICBmb3IgKGogPSAwOyBqIDwgc2hhcGVMZW5ndGg7IGorKykge1xuICAgICAgaW5kaWNlc1tpbmRleCsrXSA9IGogKyBmaXJzdE9mZnNldDtcbiAgICAgIGluZGljZXNbaW5kZXgrK10gPSBqICsgc2Vjb25kT2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIHZhciBnZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSh7XG4gICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgICBpbmRpY2VzOiBJbmRleERhdGF0eXBlLmNyZWF0ZVR5cGVkQXJyYXkodmVydGV4Q291bnQsIGluZGljZXMpLFxuICAgIGJvdW5kaW5nU3BoZXJlOiBCb3VuZGluZ1NwaGVyZS5mcm9tVmVydGljZXMocG9zaXRpb25zKSxcbiAgICBwcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLkxJTkVTLFxuICB9KTtcblxuICByZXR1cm4gZ2VvbWV0cnk7XG59XG5cbi8qKlxuICogQSBkZXNjcmlwdGlvbiBvZiBhIHBvbHlsaW5lIHdpdGggYSB2b2x1bWUgKGEgMkQgc2hhcGUgZXh0cnVkZWQgYWxvbmcgYSBwb2x5bGluZSkuXG4gKlxuICogQGFsaWFzIFBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0NhcnRlc2lhbjNbXX0gb3B0aW9ucy5wb2x5bGluZVBvc2l0aW9ucyBBbiBhcnJheSBvZiBwb3NpdGlvbnMgdGhhdCBkZWZpbmUgdGhlIGNlbnRlciBvZiB0aGUgcG9seWxpbmUgdm9sdW1lLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4yW119IG9wdGlvbnMuc2hhcGVQb3NpdGlvbnMgQW4gYXJyYXkgb2YgcG9zaXRpb25zIHRoYXQgZGVmaW5lIHRoZSBzaGFwZSB0byBiZSBleHRydWRlZCBhbG9uZyB0aGUgcG9seWxpbmVcbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWQ9RWxsaXBzb2lkLldHUzg0XSBUaGUgZWxsaXBzb2lkIHRvIGJlIHVzZWQgYXMgYSByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZ3JhbnVsYXJpdHk9Q2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUVdIFRoZSBkaXN0YW5jZSwgaW4gcmFkaWFucywgYmV0d2VlbiBlYWNoIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUuIERldGVybWluZXMgdGhlIG51bWJlciBvZiBwb3NpdGlvbnMgaW4gdGhlIGJ1ZmZlci5cbiAqIEBwYXJhbSB7Q29ybmVyVHlwZX0gW29wdGlvbnMuY29ybmVyVHlwZT1Db3JuZXJUeXBlLlJPVU5ERURdIERldGVybWluZXMgdGhlIHN0eWxlIG9mIHRoZSBjb3JuZXJzLlxuICpcbiAqIEBzZWUgUG9seWxpbmVWb2x1bWVPdXRsaW5lR2VvbWV0cnkjY3JlYXRlR2VvbWV0cnlcbiAqXG4gKiBAZXhhbXBsZVxuICogZnVuY3Rpb24gY29tcHV0ZUNpcmNsZShyYWRpdXMpIHtcbiAqICAgdmFyIHBvc2l0aW9ucyA9IFtdO1xuICogICBmb3IgKHZhciBpID0gMDsgaSA8IDM2MDsgaSsrKSB7XG4gKiAgICAgdmFyIHJhZGlhbnMgPSBDZXNpdW0uTWF0aC50b1JhZGlhbnMoaSk7XG4gKiAgICAgcG9zaXRpb25zLnB1c2gobmV3IENlc2l1bS5DYXJ0ZXNpYW4yKHJhZGl1cyAqIE1hdGguY29zKHJhZGlhbnMpLCByYWRpdXMgKiBNYXRoLnNpbihyYWRpYW5zKSkpO1xuICogICB9XG4gKiAgIHJldHVybiBwb3NpdGlvbnM7XG4gKiB9XG4gKlxuICogdmFyIHZvbHVtZU91dGxpbmUgPSBuZXcgQ2VzaXVtLlBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5KHtcbiAqICAgcG9seWxpbmVQb3NpdGlvbnMgOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAtNzIuMCwgNDAuMCxcbiAqICAgICAtNzAuMCwgMzUuMFxuICogICBdKSxcbiAqICAgc2hhcGVQb3NpdGlvbnMgOiBjb21wdXRlQ2lyY2xlKDEwMDAwMC4wKVxuICogfSk7XG4gKi9cbmZ1bmN0aW9uIFBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5KG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIHBvc2l0aW9ucyA9IG9wdGlvbnMucG9seWxpbmVQb3NpdGlvbnM7XG4gIHZhciBzaGFwZSA9IG9wdGlvbnMuc2hhcGVQb3NpdGlvbnM7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHBvc2l0aW9ucykpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJvcHRpb25zLnBvbHlsaW5lUG9zaXRpb25zIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICBpZiAoIWRlZmluZWQoc2hhcGUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy5zaGFwZVBvc2l0aW9ucyBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdGhpcy5fcG9zaXRpb25zID0gcG9zaXRpb25zO1xuICB0aGlzLl9zaGFwZSA9IHNoYXBlO1xuICB0aGlzLl9lbGxpcHNvaWQgPSBFbGxpcHNvaWQuY2xvbmUoXG4gICAgZGVmYXVsdFZhbHVlKG9wdGlvbnMuZWxsaXBzb2lkLCBFbGxpcHNvaWQuV0dTODQpXG4gICk7XG4gIHRoaXMuX2Nvcm5lclR5cGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5jb3JuZXJUeXBlLCBDb3JuZXJUeXBlLlJPVU5ERUQpO1xuICB0aGlzLl9ncmFudWxhcml0eSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmdyYW51bGFyaXR5LFxuICAgIENlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFXG4gICk7XG4gIHRoaXMuX3dvcmtlck5hbWUgPSBcImNyZWF0ZVBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5XCI7XG5cbiAgdmFyIG51bUNvbXBvbmVudHMgPSAxICsgcG9zaXRpb25zLmxlbmd0aCAqIENhcnRlc2lhbjMucGFja2VkTGVuZ3RoO1xuICBudW1Db21wb25lbnRzICs9IDEgKyBzaGFwZS5sZW5ndGggKiBDYXJ0ZXNpYW4yLnBhY2tlZExlbmd0aDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBlbGVtZW50cyB1c2VkIHRvIHBhY2sgdGhlIG9iamVjdCBpbnRvIGFuIGFycmF5LlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgdGhpcy5wYWNrZWRMZW5ndGggPSBudW1Db21wb25lbnRzICsgRWxsaXBzb2lkLnBhY2tlZExlbmd0aCArIDI7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBwcm92aWRlZCBpbnN0YW5jZSBpbnRvIHRoZSBwcm92aWRlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5fSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFjay5cbiAqIEBwYXJhbSB7TnVtYmVyW119IGFycmF5IFRoZSBhcnJheSB0byBwYWNrIGludG8uXG4gKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0aW5nSW5kZXg9MF0gVGhlIGluZGV4IGludG8gdGhlIGFycmF5IGF0IHdoaWNoIHRvIHN0YXJ0IHBhY2tpbmcgdGhlIGVsZW1lbnRzLlxuICpcbiAqIEByZXR1cm5zIHtOdW1iZXJbXX0gVGhlIGFycmF5IHRoYXQgd2FzIHBhY2tlZCBpbnRvXG4gKi9cblBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5LnBhY2sgPSBmdW5jdGlvbiAodmFsdWUsIGFycmF5LCBzdGFydGluZ0luZGV4KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZFwiKTtcbiAgfVxuICBpZiAoIWRlZmluZWQoYXJyYXkpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiYXJyYXkgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgc3RhcnRpbmdJbmRleCA9IGRlZmF1bHRWYWx1ZShzdGFydGluZ0luZGV4LCAwKTtcblxuICB2YXIgaTtcblxuICB2YXIgcG9zaXRpb25zID0gdmFsdWUuX3Bvc2l0aW9ucztcbiAgdmFyIGxlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSBsZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpLCBzdGFydGluZ0luZGV4ICs9IENhcnRlc2lhbjMucGFja2VkTGVuZ3RoKSB7XG4gICAgQ2FydGVzaWFuMy5wYWNrKHBvc2l0aW9uc1tpXSwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICB9XG5cbiAgdmFyIHNoYXBlID0gdmFsdWUuX3NoYXBlO1xuICBsZW5ndGggPSBzaGFwZS5sZW5ndGg7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXgrK10gPSBsZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpLCBzdGFydGluZ0luZGV4ICs9IENhcnRlc2lhbjIucGFja2VkTGVuZ3RoKSB7XG4gICAgQ2FydGVzaWFuMi5wYWNrKHNoYXBlW2ldLCBhcnJheSwgc3RhcnRpbmdJbmRleCk7XG4gIH1cblxuICBFbGxpcHNvaWQucGFjayh2YWx1ZS5fZWxsaXBzb2lkLCBhcnJheSwgc3RhcnRpbmdJbmRleCk7XG4gIHN0YXJ0aW5nSW5kZXggKz0gRWxsaXBzb2lkLnBhY2tlZExlbmd0aDtcblxuICBhcnJheVtzdGFydGluZ0luZGV4KytdID0gdmFsdWUuX2Nvcm5lclR5cGU7XG4gIGFycmF5W3N0YXJ0aW5nSW5kZXhdID0gdmFsdWUuX2dyYW51bGFyaXR5O1xuXG4gIHJldHVybiBhcnJheTtcbn07XG5cbnZhciBzY3JhdGNoRWxsaXBzb2lkID0gRWxsaXBzb2lkLmNsb25lKEVsbGlwc29pZC5VTklUX1NQSEVSRSk7XG52YXIgc2NyYXRjaE9wdGlvbnMgPSB7XG4gIHBvbHlsaW5lUG9zaXRpb25zOiB1bmRlZmluZWQsXG4gIHNoYXBlUG9zaXRpb25zOiB1bmRlZmluZWQsXG4gIGVsbGlwc29pZDogc2NyYXRjaEVsbGlwc29pZCxcbiAgaGVpZ2h0OiB1bmRlZmluZWQsXG4gIGNvcm5lclR5cGU6IHVuZGVmaW5lZCxcbiAgZ3JhbnVsYXJpdHk6IHVuZGVmaW5lZCxcbn07XG5cbi8qKlxuICogUmV0cmlldmVzIGFuIGluc3RhbmNlIGZyb20gYSBwYWNrZWQgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJbXX0gYXJyYXkgVGhlIHBhY2tlZCBhcnJheS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRpbmdJbmRleD0wXSBUaGUgc3RhcnRpbmcgaW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gYmUgdW5wYWNrZWQuXG4gKiBAcGFyYW0ge1BvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5fSBbcmVzdWx0XSBUaGUgb2JqZWN0IGludG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtQb2x5bGluZVZvbHVtZU91dGxpbmVHZW9tZXRyeX0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgUG9seWxpbmVWb2x1bWVPdXRsaW5lR2VvbWV0cnkgaW5zdGFuY2UgaWYgb25lIHdhcyBub3QgcHJvdmlkZWQuXG4gKi9cblBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5LnVucGFjayA9IGZ1bmN0aW9uIChhcnJheSwgc3RhcnRpbmdJbmRleCwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChhcnJheSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJhcnJheSBpcyByZXF1aXJlZFwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBzdGFydGluZ0luZGV4ID0gZGVmYXVsdFZhbHVlKHN0YXJ0aW5nSW5kZXgsIDApO1xuXG4gIHZhciBpO1xuXG4gIHZhciBsZW5ndGggPSBhcnJheVtzdGFydGluZ0luZGV4KytdO1xuICB2YXIgcG9zaXRpb25zID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpLCBzdGFydGluZ0luZGV4ICs9IENhcnRlc2lhbjMucGFja2VkTGVuZ3RoKSB7XG4gICAgcG9zaXRpb25zW2ldID0gQ2FydGVzaWFuMy51bnBhY2soYXJyYXksIHN0YXJ0aW5nSW5kZXgpO1xuICB9XG5cbiAgbGVuZ3RoID0gYXJyYXlbc3RhcnRpbmdJbmRleCsrXTtcbiAgdmFyIHNoYXBlID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpLCBzdGFydGluZ0luZGV4ICs9IENhcnRlc2lhbjIucGFja2VkTGVuZ3RoKSB7XG4gICAgc2hhcGVbaV0gPSBDYXJ0ZXNpYW4yLnVucGFjayhhcnJheSwgc3RhcnRpbmdJbmRleCk7XG4gIH1cblxuICB2YXIgZWxsaXBzb2lkID0gRWxsaXBzb2lkLnVucGFjayhhcnJheSwgc3RhcnRpbmdJbmRleCwgc2NyYXRjaEVsbGlwc29pZCk7XG4gIHN0YXJ0aW5nSW5kZXggKz0gRWxsaXBzb2lkLnBhY2tlZExlbmd0aDtcblxuICB2YXIgY29ybmVyVHlwZSA9IGFycmF5W3N0YXJ0aW5nSW5kZXgrK107XG4gIHZhciBncmFudWxhcml0eSA9IGFycmF5W3N0YXJ0aW5nSW5kZXhdO1xuXG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgc2NyYXRjaE9wdGlvbnMucG9seWxpbmVQb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG4gICAgc2NyYXRjaE9wdGlvbnMuc2hhcGVQb3NpdGlvbnMgPSBzaGFwZTtcbiAgICBzY3JhdGNoT3B0aW9ucy5jb3JuZXJUeXBlID0gY29ybmVyVHlwZTtcbiAgICBzY3JhdGNoT3B0aW9ucy5ncmFudWxhcml0eSA9IGdyYW51bGFyaXR5O1xuICAgIHJldHVybiBuZXcgUG9seWxpbmVWb2x1bWVPdXRsaW5lR2VvbWV0cnkoc2NyYXRjaE9wdGlvbnMpO1xuICB9XG5cbiAgcmVzdWx0Ll9wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG4gIHJlc3VsdC5fc2hhcGUgPSBzaGFwZTtcbiAgcmVzdWx0Ll9lbGxpcHNvaWQgPSBFbGxpcHNvaWQuY2xvbmUoZWxsaXBzb2lkLCByZXN1bHQuX2VsbGlwc29pZCk7XG4gIHJlc3VsdC5fY29ybmVyVHlwZSA9IGNvcm5lclR5cGU7XG4gIHJlc3VsdC5fZ3JhbnVsYXJpdHkgPSBncmFudWxhcml0eTtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIGJyU2NyYXRjaCA9IG5ldyBCb3VuZGluZ1JlY3RhbmdsZSgpO1xuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBnZW9tZXRyaWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIG91dGxpbmUgb2YgYSBwb2x5bGluZSB3aXRoIGEgdm9sdW1lLCBpbmNsdWRpbmcgaXRzIHZlcnRpY2VzLCBpbmRpY2VzLCBhbmQgYSBib3VuZGluZyBzcGhlcmUuXG4gKlxuICogQHBhcmFtIHtQb2x5bGluZVZvbHVtZU91dGxpbmVHZW9tZXRyeX0gcG9seWxpbmVWb2x1bWVPdXRsaW5lR2VvbWV0cnkgQSBkZXNjcmlwdGlvbiBvZiB0aGUgcG9seWxpbmUgdm9sdW1lIG91dGxpbmUuXG4gKiBAcmV0dXJucyB7R2VvbWV0cnl8dW5kZWZpbmVkfSBUaGUgY29tcHV0ZWQgdmVydGljZXMgYW5kIGluZGljZXMuXG4gKi9cblBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5LmNyZWF0ZUdlb21ldHJ5ID0gZnVuY3Rpb24gKFxuICBwb2x5bGluZVZvbHVtZU91dGxpbmVHZW9tZXRyeVxuKSB7XG4gIHZhciBwb3NpdGlvbnMgPSBwb2x5bGluZVZvbHVtZU91dGxpbmVHZW9tZXRyeS5fcG9zaXRpb25zO1xuICB2YXIgY2xlYW5Qb3NpdGlvbnMgPSBhcnJheVJlbW92ZUR1cGxpY2F0ZXMoXG4gICAgcG9zaXRpb25zLFxuICAgIENhcnRlc2lhbjMuZXF1YWxzRXBzaWxvblxuICApO1xuICB2YXIgc2hhcGUyRCA9IHBvbHlsaW5lVm9sdW1lT3V0bGluZUdlb21ldHJ5Ll9zaGFwZTtcbiAgc2hhcGUyRCA9IFBvbHlsaW5lVm9sdW1lR2VvbWV0cnlMaWJyYXJ5LnJlbW92ZUR1cGxpY2F0ZXNGcm9tU2hhcGUoc2hhcGUyRCk7XG5cbiAgaWYgKGNsZWFuUG9zaXRpb25zLmxlbmd0aCA8IDIgfHwgc2hhcGUyRC5sZW5ndGggPCAzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChcbiAgICBQb2x5Z29uUGlwZWxpbmUuY29tcHV0ZVdpbmRpbmdPcmRlcjJEKHNoYXBlMkQpID09PSBXaW5kaW5nT3JkZXIuQ0xPQ0tXSVNFXG4gICkge1xuICAgIHNoYXBlMkQucmV2ZXJzZSgpO1xuICB9XG4gIHZhciBib3VuZGluZ1JlY3RhbmdsZSA9IEJvdW5kaW5nUmVjdGFuZ2xlLmZyb21Qb2ludHMoc2hhcGUyRCwgYnJTY3JhdGNoKTtcblxuICB2YXIgY29tcHV0ZWRQb3NpdGlvbnMgPSBQb2x5bGluZVZvbHVtZUdlb21ldHJ5TGlicmFyeS5jb21wdXRlUG9zaXRpb25zKFxuICAgIGNsZWFuUG9zaXRpb25zLFxuICAgIHNoYXBlMkQsXG4gICAgYm91bmRpbmdSZWN0YW5nbGUsXG4gICAgcG9seWxpbmVWb2x1bWVPdXRsaW5lR2VvbWV0cnksXG4gICAgZmFsc2VcbiAgKTtcbiAgcmV0dXJuIGNvbXB1dGVBdHRyaWJ1dGVzKGNvbXB1dGVkUG9zaXRpb25zLCBzaGFwZTJEKTtcbn07XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZVZvbHVtZU91dGxpbmVHZW9tZXRyeTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///64306\n')},97264:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52200);\n\n\n/**\n * The type of a geometric primitive, i.e., points, lines, and triangles.\n *\n * @enum {Number}\n */\nvar PrimitiveType = {\n  /**\n   * Points primitive where each vertex (or index) is a separate point.\n   *\n   * @type {Number}\n   * @constant\n   */\n  POINTS: _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].POINTS */ .Z.POINTS,\n\n  /**\n   * Lines primitive where each two vertices (or indices) is a line segment.  Line segments are not necessarily connected.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LINES: _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].LINES */ .Z.LINES,\n\n  /**\n   * Line loop primitive where each vertex (or index) after the first connects a line to\n   * the previous vertex, and the last vertex implicitly connects to the first.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LINE_LOOP: _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].LINE_LOOP */ .Z.LINE_LOOP,\n\n  /**\n   * Line strip primitive where each vertex (or index) after the first connects a line to the previous vertex.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LINE_STRIP: _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].LINE_STRIP */ .Z.LINE_STRIP,\n\n  /**\n   * Triangles primitive where each three vertices (or indices) is a triangle.  Triangles do not necessarily share edges.\n   *\n   * @type {Number}\n   * @constant\n   */\n  TRIANGLES: _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n\n  /**\n   * Triangle strip primitive where each vertex (or index) after the first two connect to\n   * the previous two vertices forming a triangle.  For example, this can be used to model a wall.\n   *\n   * @type {Number}\n   * @constant\n   */\n  TRIANGLE_STRIP: _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].TRIANGLE_STRIP */ .Z.TRIANGLE_STRIP,\n\n  /**\n   * Triangle fan primitive where each vertex (or index) after the first two connect to\n   * the previous vertex and the first vertex forming a triangle.  For example, this can be used\n   * to model a cone or circle.\n   *\n   * @type {Number}\n   * @constant\n   */\n  TRIANGLE_FAN: _WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].TRIANGLE_FAN */ .Z.TRIANGLE_FAN,\n};\n\n/**\n * @private\n */\nPrimitiveType.validate = function (primitiveType) {\n  return (\n    primitiveType === PrimitiveType.POINTS ||\n    primitiveType === PrimitiveType.LINES ||\n    primitiveType === PrimitiveType.LINE_LOOP ||\n    primitiveType === PrimitiveType.LINE_STRIP ||\n    primitiveType === PrimitiveType.TRIANGLES ||\n    primitiveType === PrimitiveType.TRIANGLE_STRIP ||\n    primitiveType === PrimitiveType.TRIANGLE_FAN\n  );\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(PrimitiveType));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTcyNjQuanMiLCJtYXBwaW5ncyI6IjtBQUFpRDs7QUFFakQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFVBQVUsaUZBQXFCOztBQUUvQjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVMsK0VBQW9COztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsYUFBYSx1RkFBd0I7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsY0FBYyx5RkFBeUI7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsYUFBYSx1RkFBd0I7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxrQkFBa0IsaUdBQTZCOztBQUUvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxnQkFBZ0IsNkZBQTJCO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseURBQWUsNEJBQTRCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9QcmltaXRpdmVUeXBlLmpzPzQ3YmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdlYkdMQ29uc3RhbnRzIGZyb20gXCIuL1dlYkdMQ29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgYSBnZW9tZXRyaWMgcHJpbWl0aXZlLCBpLmUuLCBwb2ludHMsIGxpbmVzLCBhbmQgdHJpYW5nbGVzLlxuICpcbiAqIEBlbnVtIHtOdW1iZXJ9XG4gKi9cbnZhciBQcmltaXRpdmVUeXBlID0ge1xuICAvKipcbiAgICogUG9pbnRzIHByaW1pdGl2ZSB3aGVyZSBlYWNoIHZlcnRleCAob3IgaW5kZXgpIGlzIGEgc2VwYXJhdGUgcG9pbnQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgUE9JTlRTOiBXZWJHTENvbnN0YW50cy5QT0lOVFMsXG5cbiAgLyoqXG4gICAqIExpbmVzIHByaW1pdGl2ZSB3aGVyZSBlYWNoIHR3byB2ZXJ0aWNlcyAob3IgaW5kaWNlcykgaXMgYSBsaW5lIHNlZ21lbnQuICBMaW5lIHNlZ21lbnRzIGFyZSBub3QgbmVjZXNzYXJpbHkgY29ubmVjdGVkLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIExJTkVTOiBXZWJHTENvbnN0YW50cy5MSU5FUyxcblxuICAvKipcbiAgICogTGluZSBsb29wIHByaW1pdGl2ZSB3aGVyZSBlYWNoIHZlcnRleCAob3IgaW5kZXgpIGFmdGVyIHRoZSBmaXJzdCBjb25uZWN0cyBhIGxpbmUgdG9cbiAgICogdGhlIHByZXZpb3VzIHZlcnRleCwgYW5kIHRoZSBsYXN0IHZlcnRleCBpbXBsaWNpdGx5IGNvbm5lY3RzIHRvIHRoZSBmaXJzdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBMSU5FX0xPT1A6IFdlYkdMQ29uc3RhbnRzLkxJTkVfTE9PUCxcblxuICAvKipcbiAgICogTGluZSBzdHJpcCBwcmltaXRpdmUgd2hlcmUgZWFjaCB2ZXJ0ZXggKG9yIGluZGV4KSBhZnRlciB0aGUgZmlyc3QgY29ubmVjdHMgYSBsaW5lIHRvIHRoZSBwcmV2aW91cyB2ZXJ0ZXguXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTElORV9TVFJJUDogV2ViR0xDb25zdGFudHMuTElORV9TVFJJUCxcblxuICAvKipcbiAgICogVHJpYW5nbGVzIHByaW1pdGl2ZSB3aGVyZSBlYWNoIHRocmVlIHZlcnRpY2VzIChvciBpbmRpY2VzKSBpcyBhIHRyaWFuZ2xlLiAgVHJpYW5nbGVzIGRvIG5vdCBuZWNlc3NhcmlseSBzaGFyZSBlZGdlcy5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBUUklBTkdMRVM6IFdlYkdMQ29uc3RhbnRzLlRSSUFOR0xFUyxcblxuICAvKipcbiAgICogVHJpYW5nbGUgc3RyaXAgcHJpbWl0aXZlIHdoZXJlIGVhY2ggdmVydGV4IChvciBpbmRleCkgYWZ0ZXIgdGhlIGZpcnN0IHR3byBjb25uZWN0IHRvXG4gICAqIHRoZSBwcmV2aW91cyB0d28gdmVydGljZXMgZm9ybWluZyBhIHRyaWFuZ2xlLiAgRm9yIGV4YW1wbGUsIHRoaXMgY2FuIGJlIHVzZWQgdG8gbW9kZWwgYSB3YWxsLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFRSSUFOR0xFX1NUUklQOiBXZWJHTENvbnN0YW50cy5UUklBTkdMRV9TVFJJUCxcblxuICAvKipcbiAgICogVHJpYW5nbGUgZmFuIHByaW1pdGl2ZSB3aGVyZSBlYWNoIHZlcnRleCAob3IgaW5kZXgpIGFmdGVyIHRoZSBmaXJzdCB0d28gY29ubmVjdCB0b1xuICAgKiB0aGUgcHJldmlvdXMgdmVydGV4IGFuZCB0aGUgZmlyc3QgdmVydGV4IGZvcm1pbmcgYSB0cmlhbmdsZS4gIEZvciBleGFtcGxlLCB0aGlzIGNhbiBiZSB1c2VkXG4gICAqIHRvIG1vZGVsIGEgY29uZSBvciBjaXJjbGUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgVFJJQU5HTEVfRkFOOiBXZWJHTENvbnN0YW50cy5UUklBTkdMRV9GQU4sXG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblByaW1pdGl2ZVR5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiAocHJpbWl0aXZlVHlwZSkge1xuICByZXR1cm4gKFxuICAgIHByaW1pdGl2ZVR5cGUgPT09IFByaW1pdGl2ZVR5cGUuUE9JTlRTIHx8XG4gICAgcHJpbWl0aXZlVHlwZSA9PT0gUHJpbWl0aXZlVHlwZS5MSU5FUyB8fFxuICAgIHByaW1pdGl2ZVR5cGUgPT09IFByaW1pdGl2ZVR5cGUuTElORV9MT09QIHx8XG4gICAgcHJpbWl0aXZlVHlwZSA9PT0gUHJpbWl0aXZlVHlwZS5MSU5FX1NUUklQIHx8XG4gICAgcHJpbWl0aXZlVHlwZSA9PT0gUHJpbWl0aXZlVHlwZS5UUklBTkdMRVMgfHxcbiAgICBwcmltaXRpdmVUeXBlID09PSBQcmltaXRpdmVUeXBlLlRSSUFOR0xFX1NUUklQIHx8XG4gICAgcHJpbWl0aXZlVHlwZSA9PT0gUHJpbWl0aXZlVHlwZS5UUklBTkdMRV9GQU5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoUHJpbWl0aXZlVHlwZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///97264\n')},51014:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n\n\n/**\n * Base class for proxying requested made by {@link Resource}.\n *\n * @alias Proxy\n * @constructor\n *\n * @see DefaultProxy\n */\nfunction Proxy() {\n  _DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n}\n\n/**\n * Get the final URL to use to request a given resource.\n *\n * @param {String} resource The resource to request.\n * @returns {String} proxied resource\n * @function\n */\nProxy.prototype.getURL = _DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (Proxy)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTEwMTQuanMiLCJtYXBwaW5ncyI6IjtBQUFpRDs7QUFFakQ7QUFDQSw4Q0FBOEMsZUFBZTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsbUhBQXNDO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLHlCQUF5QixtSEFBc0M7O0FBRS9ELHNFQUFlLHFEQUFLLElBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9Qcm94eS5qcz83MDJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi9EZXZlbG9wZXJFcnJvci5qc1wiO1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHByb3h5aW5nIHJlcXVlc3RlZCBtYWRlIGJ5IHtAbGluayBSZXNvdXJjZX0uXG4gKlxuICogQGFsaWFzIFByb3h5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAc2VlIERlZmF1bHRQcm94eVxuICovXG5mdW5jdGlvbiBQcm94eSgpIHtcbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IoKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZpbmFsIFVSTCB0byB1c2UgdG8gcmVxdWVzdCBhIGdpdmVuIHJlc291cmNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSByZXNvdXJjZSBUaGUgcmVzb3VyY2UgdG8gcmVxdWVzdC5cbiAqIEByZXR1cm5zIHtTdHJpbmd9IHByb3hpZWQgcmVzb3VyY2VcbiAqIEBmdW5jdGlvblxuICovXG5Qcm94eS5wcm90b3R5cGUuZ2V0VVJMID0gRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3I7XG5cbmV4cG9ydCBkZWZhdWx0IFByb3h5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///51014\n')}}]);