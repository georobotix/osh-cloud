"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[3071],{19043:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ThirdParty_protobufjs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(65581);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13222);\n/* harmony import */ var _buildModuleUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(72000);\n/* harmony import */ var _Check_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66553);\n/* harmony import */ var _Credit_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52975);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82982);\n/* harmony import */ var _GoogleEarthEnterpriseTileInformation_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(95852);\n/* harmony import */ var _isBitSet_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29797);\n/* harmony import */ var _loadAndExecuteScript_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(95636);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99417);\n/* harmony import */ var _Request_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(22426);\n/* harmony import */ var _Resource_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(68985);\n/* harmony import */ var _RuntimeError_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(9407);\n/* harmony import */ var _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2819);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction stringToBuffer(str) {\n  var len = str.length;\n  var buffer = new ArrayBuffer(len);\n  var ui8 = new Uint8Array(buffer);\n  for (var i = 0; i < len; ++i) {\n    ui8[i] = str.charCodeAt(i);\n  }\n\n  return buffer;\n}\n\n// Decodes packet with a key that has been around since the beginning of Google Earth Enterprise\nvar defaultKey = stringToBuffer(\n  "\\x45\\xf4\\xbd\\x0b\\x79\\xe2\\x6a\\x45\\x22\\x05\\x92\\x2c\\x17\\xcd\\x06\\x71\\xf8\\x49\\x10\\x46\\x67\\x51\\x00\\x42\\x25\\xc6\\xe8\\x61\\x2c\\x66\\x29\\x08\\xc6\\x34\\xdc\\x6a\\x62\\x25\\x79\\x0a\\x77\\x1d\\x6d\\x69\\xd6\\xf0\\x9c\\x6b\\x93\\xa1\\xbd\\x4e\\x75\\xe0\\x41\\x04\\x5b\\xdf\\x40\\x56\\x0c\\xd9\\xbb\\x72\\x9b\\x81\\x7c\\x10\\x33\\x53\\xee\\x4f\\x6c\\xd4\\x71\\x05\\xb0\\x7b\\xc0\\x7f\\x45\\x03\\x56\\x5a\\xad\\x77\\x55\\x65\\x0b\\x33\\x92\\x2a\\xac\\x19\\x6c\\x35\\x14\\xc5\\x1d\\x30\\x73\\xf8\\x33\\x3e\\x6d\\x46\\x38\\x4a\\xb4\\xdd\\xf0\\x2e\\xdd\\x17\\x75\\x16\\xda\\x8c\\x44\\x74\\x22\\x06\\xfa\\x61\\x22\\x0c\\x33\\x22\\x53\\x6f\\xaf\\x39\\x44\\x0b\\x8c\\x0e\\x39\\xd9\\x39\\x13\\x4c\\xb9\\xbf\\x7f\\xab\\x5c\\x8c\\x50\\x5f\\x9f\\x22\\x75\\x78\\x1f\\xe9\\x07\\x71\\x91\\x68\\x3b\\xc1\\xc4\\x9b\\x7f\\xf0\\x3c\\x56\\x71\\x48\\x82\\x05\\x27\\x55\\x66\\x59\\x4e\\x65\\x1d\\x98\\x75\\xa3\\x61\\x46\\x7d\\x61\\x3f\\x15\\x41\\x00\\x9f\\x14\\x06\\xd7\\xb4\\x34\\x4d\\xce\\x13\\x87\\x46\\xb0\\x1a\\xd5\\x05\\x1c\\xb8\\x8a\\x27\\x7b\\x8b\\xdc\\x2b\\xbb\\x4d\\x67\\x30\\xc8\\xd1\\xf6\\x5c\\x8f\\x50\\xfa\\x5b\\x2f\\x46\\x9b\\x6e\\x35\\x18\\x2f\\x27\\x43\\x2e\\xeb\\x0a\\x0c\\x5e\\x10\\x05\\x10\\xa5\\x73\\x1b\\x65\\x34\\xe5\\x6c\\x2e\\x6a\\x43\\x27\\x63\\x14\\x23\\x55\\xa9\\x3f\\x71\\x7b\\x67\\x43\\x7d\\x3a\\xaf\\xcd\\xe2\\x54\\x55\\x9c\\xfd\\x4b\\xc6\\xe2\\x9f\\x2f\\x28\\xed\\xcb\\x5c\\xc6\\x2d\\x66\\x07\\x88\\xa7\\x3b\\x2f\\x18\\x2a\\x22\\x4e\\x0e\\xb0\\x6b\\x2e\\xdd\\x0d\\x95\\x7d\\x7d\\x47\\xba\\x43\\xb2\\x11\\xb2\\x2b\\x3e\\x4d\\xaa\\x3e\\x7d\\xe6\\xce\\x49\\x89\\xc6\\xe6\\x78\\x0c\\x61\\x31\\x05\\x2d\\x01\\xa4\\x4f\\xa5\\x7e\\x71\\x20\\x88\\xec\\x0d\\x31\\xe8\\x4e\\x0b\\x00\\x6e\\x50\\x68\\x7d\\x17\\x3d\\x08\\x0d\\x17\\x95\\xa6\\x6e\\xa3\\x68\\x97\\x24\\x5b\\x6b\\xf3\\x17\\x23\\xf3\\xb6\\x73\\xb3\\x0d\\x0b\\x40\\xc0\\x9f\\xd8\\x04\\x51\\x5d\\xfa\\x1a\\x17\\x22\\x2e\\x15\\x6a\\xdf\\x49\\x00\\xb9\\xa0\\x77\\x55\\xc6\\xef\\x10\\x6a\\xbf\\x7b\\x47\\x4c\\x7f\\x83\\x17\\x05\\xee\\xdc\\xdc\\x46\\x85\\xa9\\xad\\x53\\x07\\x2b\\x53\\x34\\x06\\x07\\xff\\x14\\x94\\x59\\x19\\x02\\xe4\\x38\\xe8\\x31\\x83\\x4e\\xb9\\x58\\x46\\x6b\\xcb\\x2d\\x23\\x86\\x92\\x70\\x00\\x35\\x88\\x22\\xcf\\x31\\xb2\\x26\\x2f\\xe7\\xc3\\x75\\x2d\\x36\\x2c\\x72\\x74\\xb0\\x23\\x47\\xb7\\xd3\\xd1\\x26\\x16\\x85\\x37\\x72\\xe2\\x00\\x8c\\x44\\xcf\\x10\\xda\\x33\\x2d\\x1a\\xde\\x60\\x86\\x69\\x23\\x69\\x2a\\x7c\\xcd\\x4b\\x51\\x0d\\x95\\x54\\x39\\x77\\x2e\\x29\\xea\\x1b\\xa6\\x50\\xa2\\x6a\\x8f\\x6f\\x50\\x99\\x5c\\x3e\\x54\\xfb\\xef\\x50\\x5b\\x0b\\x07\\x45\\x17\\x89\\x6d\\x28\\x13\\x77\\x37\\x1d\\xdb\\x8e\\x1e\\x4a\\x05\\x66\\x4a\\x6f\\x99\\x20\\xe5\\x70\\xe2\\xb9\\x71\\x7e\\x0c\\x6d\\x49\\x04\\x2d\\x7a\\xfe\\x72\\xc7\\xf2\\x59\\x30\\x8f\\xbb\\x02\\x5d\\x73\\xe5\\xc9\\x20\\xea\\x78\\xec\\x20\\x90\\xf0\\x8a\\x7f\\x42\\x17\\x7c\\x47\\x19\\x60\\xb0\\x16\\xbd\\x26\\xb7\\x71\\xb6\\xc7\\x9f\\x0e\\xd1\\x33\\x82\\x3d\\xd3\\xab\\xee\\x63\\x99\\xc8\\x2b\\x53\\xa0\\x44\\x5c\\x71\\x01\\xc6\\xcc\\x44\\x1f\\x32\\x4f\\x3c\\xca\\xc0\\x29\\x3d\\x52\\xd3\\x61\\x19\\x58\\xa9\\x7d\\x65\\xb4\\xdc\\xcf\\x0d\\xf4\\x3d\\xf1\\x08\\xa9\\x42\\xda\\x23\\x09\\xd8\\xbf\\x5e\\x50\\x49\\xf8\\x4d\\xc0\\xcb\\x47\\x4c\\x1c\\x4f\\xf7\\x7b\\x2b\\xd8\\x16\\x18\\xc5\\x31\\x92\\x3b\\xb5\\x6f\\xdc\\x6c\\x0d\\x92\\x88\\x16\\xd1\\x9e\\xdb\\x3f\\xe2\\xe9\\xda\\x5f\\xd4\\x84\\xe2\\x46\\x61\\x5a\\xde\\x1c\\x55\\xcf\\xa4\\x00\\xbe\\xfd\\xce\\x67\\xf1\\x4a\\x69\\x1c\\x97\\xe6\\x20\\x48\\xd8\\x5d\\x7f\\x7e\\xae\\x71\\x20\\x0e\\x4e\\xae\\xc0\\x56\\xa9\\x91\\x01\\x3c\\x82\\x1d\\x0f\\x72\\xe7\\x76\\xec\\x29\\x49\\xd6\\x5d\\x2d\\x83\\xe3\\xdb\\x36\\x06\\xa9\\x3b\\x66\\x13\\x97\\x87\\x6a\\xd5\\xb6\\x3d\\x50\\x5e\\x52\\xb9\\x4b\\xc7\\x73\\x57\\x78\\xc9\\xf4\\x2e\\x59\\x07\\x95\\x93\\x6f\\xd0\\x4b\\x17\\x57\\x19\\x3e\\x27\\x27\\xc7\\x60\\xdb\\x3b\\xed\\x9a\\x0e\\x53\\x44\\x16\\x3e\\x3f\\x8d\\x92\\x6d\\x77\\xa2\\x0a\\xeb\\x3f\\x52\\xa8\\xc6\\x55\\x5e\\x31\\x49\\x37\\x85\\xf4\\xc5\\x1f\\x26\\x2d\\xa9\\x1c\\xbf\\x8b\\x27\\x54\\xda\\xc3\\x6a\\x20\\xe5\\x2a\\x78\\x04\\xb0\\xd6\\x90\\x70\\x72\\xaa\\x8b\\x68\\xbd\\x88\\xf7\\x02\\x5f\\x48\\xb1\\x7e\\xc0\\x58\\x4c\\x3f\\x66\\x1a\\xf9\\x3e\\xe1\\x65\\xc0\\x70\\xa7\\xcf\\x38\\x69\\xaf\\xf0\\x56\\x6c\\x64\\x49\\x9c\\x27\\xad\\x78\\x74\\x4f\\xc2\\x87\\xde\\x56\\x39\\x00\\xda\\x77\\x0b\\xcb\\x2d\\x1b\\x89\\xfb\\x35\\x4f\\x02\\xf5\\x08\\x51\\x13\\x60\\xc1\\x0a\\x5a\\x47\\x4d\\x26\\x1c\\x33\\x30\\x78\\xda\\xc0\\x9c\\x46\\x47\\xe2\\x5b\\x79\\x60\\x49\\x6e\\x37\\x67\\x53\\x0a\\x3e\\xe9\\xec\\x46\\x39\\xb2\\xf1\\x34\\x0d\\xc6\\x84\\x53\\x75\\x6e\\xe1\\x0c\\x59\\xd9\\x1e\\xde\\x29\\x85\\x10\\x7b\\x49\\x49\\xa5\\x77\\x79\\xbe\\x49\\x56\\x2e\\x36\\xe7\\x0b\\x3a\\xbb\\x4f\\x03\\x62\\x7b\\xd2\\x4d\\x31\\x95\\x2f\\xbd\\x38\\x7b\\xa8\\x4f\\x21\\xe1\\xec\\x46\\x70\\x76\\x95\\x7d\\x29\\x22\\x78\\x88\\x0a\\x90\\xdd\\x9d\\x5c\\xda\\xde\\x19\\x51\\xcf\\xf0\\xfc\\x59\\x52\\x65\\x7c\\x33\\x13\\xdf\\xf3\\x48\\xda\\xbb\\x2a\\x75\\xdb\\x60\\xb2\\x02\\x15\\xd4\\xfc\\x19\\xed\\x1b\\xec\\x7f\\x35\\xa8\\xff\\x28\\x31\\x07\\x2d\\x12\\xc8\\xdc\\x88\\x46\\x7c\\x8a\\x5b\\x22"\n);\n\n/**\n * Provides metadata using the Google Earth Enterprise REST API. This is used by the GoogleEarthEnterpriseImageryProvider\n *  and GoogleEarthEnterpriseTerrainProvider to share metadata requests.\n *\n * @alias GoogleEarthEnterpriseMetadata\n * @constructor\n *\n * @param {Resource|String} resourceOrUrl The url of the Google Earth Enterprise server hosting the imagery\n *\n * @see GoogleEarthEnterpriseImageryProvider\n * @see GoogleEarthEnterpriseTerrainProvider\n *\n */\nfunction GoogleEarthEnterpriseMetadata(resourceOrUrl) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].defined */ .Z.defined("resourceOrUrl", resourceOrUrl);\n  //>>includeEnd(\'debug\');\n\n  var url = resourceOrUrl;\n\n  if (typeof url !== "string" && !(url instanceof _Resource_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.string */ .Z.typeOf.string("resourceOrUrl.url", resourceOrUrl.url);\n    //>>includeEnd(\'debug\');\n\n    url = resourceOrUrl.url;\n  }\n\n  var resource = _Resource_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].createIfNeeded */ .Z.createIfNeeded(url);\n  resource.appendForwardSlash();\n  this._resource = resource;\n\n  /**\n   * True if imagery is available.\n   * @type {Boolean}\n   * @default true\n   */\n  this.imageryPresent = true;\n\n  /**\n   * True if imagery is sent as a protocol buffer, false if sent as plain images. If undefined we will try both.\n   * @type {Boolean}\n   * @default undefined\n   */\n  this.protoImagery = undefined;\n\n  /**\n   * True if terrain is available.\n   * @type {Boolean}\n   * @default true\n   */\n  this.terrainPresent = true;\n\n  /**\n   * Exponent used to compute constant to calculate negative height values.\n   * @type {Number}\n   * @default 32\n   */\n  this.negativeAltitudeExponentBias = 32;\n\n  /**\n   * Threshold where any numbers smaller are actually negative values. They are multiplied by -2^negativeAltitudeExponentBias.\n   * @type {Number}\n   * @default EPSILON12\n   */\n  this.negativeAltitudeThreshold = _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].EPSILON12 */ .Z.EPSILON12;\n\n  /**\n   * Dictionary of provider id to copyright strings.\n   * @type {Object}\n   * @default {}\n   */\n  this.providers = {};\n\n  /**\n   * Key used to decode packets\n   * @type {ArrayBuffer}\n   */\n  this.key = undefined;\n\n  this._quadPacketVersion = 1;\n\n  this._tileInfo = {};\n  this._subtreePromises = {};\n\n  var that = this;\n  this._readyPromise = requestDbRoot(this)\n    .then(function () {\n      return that.getQuadTreePacket("", that._quadPacketVersion);\n    })\n    .then(function () {\n      return true;\n    })\n    .otherwise(function (e) {\n      var message =\n        "An error occurred while accessing " +\n        getMetadataResource(that, "", 1).url +\n        ".";\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].reject */ .Z.reject(new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z(message));\n    });\n}\n\nObject.defineProperties(GoogleEarthEnterpriseMetadata.prototype, {\n  /**\n   * Gets the name of the Google Earth Enterprise server.\n   * @memberof GoogleEarthEnterpriseMetadata.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._resource.url;\n    },\n  },\n\n  /**\n   * Gets the proxy used for metadata requests.\n   * @memberof GoogleEarthEnterpriseMetadata.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return this._resource.proxy;\n    },\n  },\n\n  /**\n   * Gets the resource used for metadata requests.\n   * @memberof GoogleEarthEnterpriseMetadata.prototype\n   * @type {Resource}\n   * @readonly\n   */\n  resource: {\n    get: function () {\n      return this._resource;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the metadata is ready for use.\n   * @memberof GoogleEarthEnterpriseMetadata.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise;\n    },\n  },\n});\n\n/**\n * Converts a tiles (x, y, level) position into a quadkey used to request an image\n * from a Google Earth Enterprise server.\n *\n * @param {Number} x The tile\'s x coordinate.\n * @param {Number} y The tile\'s y coordinate.\n * @param {Number} level The tile\'s zoom level.\n *\n * @see GoogleEarthEnterpriseMetadata#quadKeyToTileXY\n */\nGoogleEarthEnterpriseMetadata.tileXYToQuadKey = function (x, y, level) {\n  var quadkey = "";\n  for (var i = level; i >= 0; --i) {\n    var bitmask = 1 << i;\n    var digit = 0;\n\n    // Tile Layout\n    // ___ ___\n    //|   |   |\n    //| 3 | 2 |\n    //|-------|\n    //| 0 | 1 |\n    //|___|___|\n    //\n\n    if (!(0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(y, bitmask)) {\n      // Top Row\n      digit |= 2;\n      if (!(0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(x, bitmask)) {\n        // Right to left\n        digit |= 1;\n      }\n    } else if ((0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(x, bitmask)) {\n      // Left to right\n      digit |= 1;\n    }\n\n    quadkey += digit;\n  }\n  return quadkey;\n};\n\n/**\n * Converts a tile\'s quadkey used to request an image from a Google Earth Enterprise server into the\n * (x, y, level) position.\n *\n * @param {String} quadkey The tile\'s quad key\n *\n * @see GoogleEarthEnterpriseMetadata#tileXYToQuadKey\n */\nGoogleEarthEnterpriseMetadata.quadKeyToTileXY = function (quadkey) {\n  var x = 0;\n  var y = 0;\n  var level = quadkey.length - 1;\n  for (var i = level; i >= 0; --i) {\n    var bitmask = 1 << i;\n    var digit = +quadkey[level - i];\n\n    if ((0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(digit, 2)) {\n      // Top Row\n      if (!(0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(digit, 1)) {\n        // // Right to left\n        x |= bitmask;\n      }\n    } else {\n      y |= bitmask;\n      if ((0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(digit, 1)) {\n        // Left to right\n        x |= bitmask;\n      }\n    }\n  }\n  return {\n    x: x,\n    y: y,\n    level: level,\n  };\n};\n\nGoogleEarthEnterpriseMetadata.prototype.isValid = function (quadKey) {\n  var info = this.getTileInformationFromQuadKey(quadKey);\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(info)) {\n    return info !== null;\n  }\n\n  var valid = true;\n  var q = quadKey;\n  var last;\n  while (q.length > 1) {\n    last = q.substring(q.length - 1);\n    q = q.substring(0, q.length - 1);\n    info = this.getTileInformationFromQuadKey(q);\n    if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(info)) {\n      if (!info.hasSubtree() && !info.hasChild(parseInt(last))) {\n        // We have no subtree or child available at some point in this node\'s ancestry\n        valid = false;\n      }\n\n      break;\n    } else if (info === null) {\n      // Some node in the ancestry was loaded and said there wasn\'t a subtree\n      valid = false;\n      break;\n    }\n  }\n\n  return valid;\n};\n\nvar taskProcessor = new _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z("decodeGoogleEarthEnterprisePacket");\n\n/**\n * Retrieves a Google Earth Enterprise quadtree packet.\n *\n * @param {String} [quadKey=\'\'] The quadkey to retrieve the packet for.\n * @param {Number} [version=1] The cnode version to be used in the request.\n * @param {Request} [request] The request object. Intended for internal use only.\n *\n * @private\n */\nGoogleEarthEnterpriseMetadata.prototype.getQuadTreePacket = function (\n  quadKey,\n  version,\n  request\n) {\n  version = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(version, 1);\n  quadKey = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(quadKey, "");\n  var resource = getMetadataResource(this, quadKey, version, request);\n\n  var promise = resource.fetchArrayBuffer();\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(promise)) {\n    return undefined; // Throttled\n  }\n\n  var tileInfo = this._tileInfo;\n  var key = this.key;\n  return promise.then(function (metadata) {\n    var decodePromise = taskProcessor.scheduleTask(\n      {\n        buffer: metadata,\n        quadKey: quadKey,\n        type: "Metadata",\n        key: key,\n      },\n      [metadata]\n    );\n\n    return decodePromise.then(function (result) {\n      var root;\n      var topLevelKeyLength = -1;\n      if (quadKey !== "") {\n        // Root tile has no data except children bits, so put them into the tile info\n        topLevelKeyLength = quadKey.length + 1;\n        var top = result[quadKey];\n        root = tileInfo[quadKey];\n        root._bits |= top._bits;\n\n        delete result[quadKey];\n      }\n\n      // Copy the resulting objects into tileInfo\n      // Make sure we start with shorter quadkeys first, so we know the parents have\n      //  already been processed. Otherwise we can lose ancestorHasTerrain along the way.\n      var keys = Object.keys(result);\n      keys.sort(function (a, b) {\n        return a.length - b.length;\n      });\n      var keysLength = keys.length;\n      for (var i = 0; i < keysLength; ++i) {\n        var key = keys[i];\n        var r = result[key];\n        if (r !== null) {\n          var info = _GoogleEarthEnterpriseTileInformation_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(result[key]);\n          var keyLength = key.length;\n          if (keyLength === topLevelKeyLength) {\n            info.setParent(root);\n          } else if (keyLength > 1) {\n            var parent = tileInfo[key.substring(0, key.length - 1)];\n            info.setParent(parent);\n          }\n          tileInfo[key] = info;\n        } else {\n          tileInfo[key] = null;\n        }\n      }\n    });\n  });\n};\n\n/**\n * Populates the metadata subtree down to the specified tile.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n *\n * @returns {Promise<GoogleEarthEnterpriseTileInformation>} A promise that resolves to the tile info for the requested quad key\n *\n * @private\n */\nGoogleEarthEnterpriseMetadata.prototype.populateSubtree = function (\n  x,\n  y,\n  level,\n  request\n) {\n  var quadkey = GoogleEarthEnterpriseMetadata.tileXYToQuadKey(x, y, level);\n  return populateSubtree(this, quadkey, request);\n};\n\nfunction populateSubtree(that, quadKey, request) {\n  var tileInfo = that._tileInfo;\n  var q = quadKey;\n  var t = tileInfo[q];\n  // If we have tileInfo make sure sure it is not a node with a subtree that\'s not loaded\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(t) && (!t.hasSubtree() || t.hasChildren())) {\n    return t;\n  }\n\n  while (t === undefined && q.length > 1) {\n    q = q.substring(0, q.length - 1);\n    t = tileInfo[q];\n  }\n\n  var subtreeRequest;\n  var subtreePromises = that._subtreePromises;\n  var promise = subtreePromises[q];\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(promise)) {\n    return promise.then(function () {\n      // Recursively call this in case we need multiple subtree requests\n      subtreeRequest = new _Request_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n        throttle: request.throttle,\n        throttleByServer: request.throttleByServer,\n        type: request.type,\n        priorityFunction: request.priorityFunction,\n      });\n      return populateSubtree(that, quadKey, subtreeRequest);\n    });\n  }\n\n  // t is either\n  //   null so one of its parents was a leaf node, so this tile doesn\'t exist\n  //   exists but doesn\'t have a subtree to request\n  //   undefined so no parent exists - this shouldn\'t ever happen once the provider is ready\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(t) || !t.hasSubtree()) {\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].reject */ .Z.reject(\n      new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z("Couldn\'t load metadata for tile " + quadKey)\n    );\n  }\n\n  // We need to split up the promise here because when will execute syncronously if getQuadTreePacket\n  //  is already resolved (like in the tests), so subtreePromises will never get cleared out.\n  //  Only the initial request will also remove the promise from subtreePromises.\n  promise = that.getQuadTreePacket(q, t.cnodeVersion, request);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(promise)) {\n    return undefined;\n  }\n  subtreePromises[q] = promise;\n\n  return promise\n    .then(function () {\n      // Recursively call this in case we need multiple subtree requests\n      subtreeRequest = new _Request_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n        throttle: request.throttle,\n        throttleByServer: request.throttleByServer,\n        type: request.type,\n        priorityFunction: request.priorityFunction,\n      });\n      return populateSubtree(that, quadKey, subtreeRequest);\n    })\n    .always(function () {\n      delete subtreePromises[q];\n    });\n}\n\n/**\n * Gets information about a tile\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @returns {GoogleEarthEnterpriseTileInformation|undefined} Information about the tile or undefined if it isn\'t loaded.\n *\n * @private\n */\nGoogleEarthEnterpriseMetadata.prototype.getTileInformation = function (\n  x,\n  y,\n  level\n) {\n  var quadkey = GoogleEarthEnterpriseMetadata.tileXYToQuadKey(x, y, level);\n  return this._tileInfo[quadkey];\n};\n\n/**\n * Gets information about a tile from a quadKey\n *\n * @param {String} quadkey The quadkey for the tile\n * @returns {GoogleEarthEnterpriseTileInformation|undefined} Information about the tile or undefined if it isn\'t loaded.\n *\n * @private\n */\nGoogleEarthEnterpriseMetadata.prototype.getTileInformationFromQuadKey = function (\n  quadkey\n) {\n  return this._tileInfo[quadkey];\n};\n\nfunction getMetadataResource(that, quadKey, version, request) {\n  return that._resource.getDerivedResource({\n    url: "flatfile?q2-0" + quadKey + "-q." + version.toString(),\n    request: request,\n  });\n}\n\nvar dbrootParser;\nvar dbrootParserPromise;\nfunction requestDbRoot(that) {\n  var resource = that._resource.getDerivedResource({\n    url: "dbRoot.v5",\n    queryParameters: {\n      output: "proto",\n    },\n  });\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(dbrootParserPromise)) {\n    var url = (0,_buildModuleUrl_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)("ThirdParty/google-earth-dbroot-parser.js");\n    var oldValue = window.cesiumGoogleEarthDbRootParser;\n    dbrootParserPromise = (0,_loadAndExecuteScript_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(url).then(function () {\n      dbrootParser = window.cesiumGoogleEarthDbRootParser(_ThirdParty_protobufjs_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z);\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(oldValue)) {\n        window.cesiumGoogleEarthDbRootParser = oldValue;\n      } else {\n        delete window.cesiumGoogleEarthDbRootParser;\n      }\n    });\n  }\n\n  return dbrootParserPromise\n    .then(function () {\n      return resource.fetchArrayBuffer();\n    })\n    .then(function (buf) {\n      var encryptedDbRootProto = dbrootParser.EncryptedDbRootProto.decode(\n        new Uint8Array(buf)\n      );\n\n      var byteArray = encryptedDbRootProto.encryptionData;\n      var offset = byteArray.byteOffset;\n      var end = offset + byteArray.byteLength;\n      var key = (that.key = byteArray.buffer.slice(offset, end));\n\n      byteArray = encryptedDbRootProto.dbrootData;\n      offset = byteArray.byteOffset;\n      end = offset + byteArray.byteLength;\n      var dbRootCompressed = byteArray.buffer.slice(offset, end);\n      return taskProcessor.scheduleTask(\n        {\n          buffer: dbRootCompressed,\n          type: "DbRoot",\n          key: key,\n        },\n        [dbRootCompressed]\n      );\n    })\n    .then(function (result) {\n      var dbRoot = dbrootParser.DbRootProto.decode(\n        new Uint8Array(result.buffer)\n      );\n      that.imageryPresent = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n        dbRoot.imageryPresent,\n        that.imageryPresent\n      );\n      that.protoImagery = dbRoot.protoImagery;\n      that.terrainPresent = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n        dbRoot.terrainPresent,\n        that.terrainPresent\n      );\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(dbRoot.endSnippet) && (0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(dbRoot.endSnippet.model)) {\n        var model = dbRoot.endSnippet.model;\n        that.negativeAltitudeExponentBias = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n          model.negativeAltitudeExponentBias,\n          that.negativeAltitudeExponentBias\n        );\n        that.negativeAltitudeThreshold = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n          model.compressedNegativeAltitudeThreshold,\n          that.negativeAltitudeThreshold\n        );\n      }\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(dbRoot.databaseVersion)) {\n        that._quadPacketVersion = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n          dbRoot.databaseVersion.quadtreeVersion,\n          that._quadPacketVersion\n        );\n      }\n      var providers = that.providers;\n      var providerInfo = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(dbRoot.providerInfo, []);\n      var count = providerInfo.length;\n      for (var i = 0; i < count; ++i) {\n        var provider = providerInfo[i];\n        var copyrightString = provider.copyrightString;\n        if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(copyrightString)) {\n          providers[provider.providerId] = new _Credit_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(copyrightString.value);\n        }\n      }\n    })\n    .otherwise(function () {\n      // Just eat the error and use the default values.\n      console.log("Failed to retrieve " + resource.url + ". Using defaults.");\n      that.key = defaultKey;\n    });\n}\n/* harmony default export */ __webpack_exports__["Z"] = (GoogleEarthEnterpriseMetadata);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQSxVQUFVLGlFQUFPLHVCQUF1QixpRUFBTztBQUMvQztBQUNBLDRDQUE0QyxxRUFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMscUVBQVk7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGlFQUFPO0FBQ2pCLGtDQUFrQyxxRUFBWTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFFQUFZO0FBQ3JDO0FBQ0Esc0JBQXNCLFdBQVc7QUFDakM7QUFDQTtBQUNBLFlBQVksaUVBQU87QUFDbkIsK0NBQStDLDJEQUFNO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5REFBZSw2QkFBNkIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9Db3JlL0dvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhLmpzP2U5MWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHByb3RvYnVmIGZyb20gXCIuLi9UaGlyZFBhcnR5L3Byb3RvYnVmanMuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcbmltcG9ydCBidWlsZE1vZHVsZVVybCBmcm9tIFwiLi9idWlsZE1vZHVsZVVybC5qc1wiO1xuaW1wb3J0IENoZWNrIGZyb20gXCIuL0NoZWNrLmpzXCI7XG5pbXBvcnQgQ3JlZGl0IGZyb20gXCIuL0NyZWRpdC5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcbmltcG9ydCBHb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb24gZnJvbSBcIi4vR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uLmpzXCI7XG5pbXBvcnQgaXNCaXRTZXQgZnJvbSBcIi4vaXNCaXRTZXQuanNcIjtcbmltcG9ydCBsb2FkQW5kRXhlY3V0ZVNjcmlwdCBmcm9tIFwiLi9sb2FkQW5kRXhlY3V0ZVNjcmlwdC5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4vTWF0aC5qc1wiO1xuaW1wb3J0IFJlcXVlc3QgZnJvbSBcIi4vUmVxdWVzdC5qc1wiO1xuaW1wb3J0IFJlc291cmNlIGZyb20gXCIuL1Jlc291cmNlLmpzXCI7XG5pbXBvcnQgUnVudGltZUVycm9yIGZyb20gXCIuL1J1bnRpbWVFcnJvci5qc1wiO1xuaW1wb3J0IFRhc2tQcm9jZXNzb3IgZnJvbSBcIi4vVGFza1Byb2Nlc3Nvci5qc1wiO1xuXG5mdW5jdGlvbiBzdHJpbmdUb0J1ZmZlcihzdHIpIHtcbiAgdmFyIGxlbiA9IHN0ci5sZW5ndGg7XG4gIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIobGVuKTtcbiAgdmFyIHVpOCA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICB1aThbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuXG4gIHJldHVybiBidWZmZXI7XG59XG5cbi8vIERlY29kZXMgcGFja2V0IHdpdGggYSBrZXkgdGhhdCBoYXMgYmVlbiBhcm91bmQgc2luY2UgdGhlIGJlZ2lubmluZyBvZiBHb29nbGUgRWFydGggRW50ZXJwcmlzZVxudmFyIGRlZmF1bHRLZXkgPSBzdHJpbmdUb0J1ZmZlcihcbiAgXCJcXHg0NVxceGY0XFx4YmRcXHgwYlxceDc5XFx4ZTJcXHg2YVxceDQ1XFx4MjJcXHgwNVxceDkyXFx4MmNcXHgxN1xceGNkXFx4MDZcXHg3MVxceGY4XFx4NDlcXHgxMFxceDQ2XFx4NjdcXHg1MVxceDAwXFx4NDJcXHgyNVxceGM2XFx4ZThcXHg2MVxceDJjXFx4NjZcXHgyOVxceDA4XFx4YzZcXHgzNFxceGRjXFx4NmFcXHg2MlxceDI1XFx4NzlcXHgwYVxceDc3XFx4MWRcXHg2ZFxceDY5XFx4ZDZcXHhmMFxceDljXFx4NmJcXHg5M1xceGExXFx4YmRcXHg0ZVxceDc1XFx4ZTBcXHg0MVxceDA0XFx4NWJcXHhkZlxceDQwXFx4NTZcXHgwY1xceGQ5XFx4YmJcXHg3MlxceDliXFx4ODFcXHg3Y1xceDEwXFx4MzNcXHg1M1xceGVlXFx4NGZcXHg2Y1xceGQ0XFx4NzFcXHgwNVxceGIwXFx4N2JcXHhjMFxceDdmXFx4NDVcXHgwM1xceDU2XFx4NWFcXHhhZFxceDc3XFx4NTVcXHg2NVxceDBiXFx4MzNcXHg5MlxceDJhXFx4YWNcXHgxOVxceDZjXFx4MzVcXHgxNFxceGM1XFx4MWRcXHgzMFxceDczXFx4ZjhcXHgzM1xceDNlXFx4NmRcXHg0NlxceDM4XFx4NGFcXHhiNFxceGRkXFx4ZjBcXHgyZVxceGRkXFx4MTdcXHg3NVxceDE2XFx4ZGFcXHg4Y1xceDQ0XFx4NzRcXHgyMlxceDA2XFx4ZmFcXHg2MVxceDIyXFx4MGNcXHgzM1xceDIyXFx4NTNcXHg2ZlxceGFmXFx4MzlcXHg0NFxceDBiXFx4OGNcXHgwZVxceDM5XFx4ZDlcXHgzOVxceDEzXFx4NGNcXHhiOVxceGJmXFx4N2ZcXHhhYlxceDVjXFx4OGNcXHg1MFxceDVmXFx4OWZcXHgyMlxceDc1XFx4NzhcXHgxZlxceGU5XFx4MDdcXHg3MVxceDkxXFx4NjhcXHgzYlxceGMxXFx4YzRcXHg5YlxceDdmXFx4ZjBcXHgzY1xceDU2XFx4NzFcXHg0OFxceDgyXFx4MDVcXHgyN1xceDU1XFx4NjZcXHg1OVxceDRlXFx4NjVcXHgxZFxceDk4XFx4NzVcXHhhM1xceDYxXFx4NDZcXHg3ZFxceDYxXFx4M2ZcXHgxNVxceDQxXFx4MDBcXHg5ZlxceDE0XFx4MDZcXHhkN1xceGI0XFx4MzRcXHg0ZFxceGNlXFx4MTNcXHg4N1xceDQ2XFx4YjBcXHgxYVxceGQ1XFx4MDVcXHgxY1xceGI4XFx4OGFcXHgyN1xceDdiXFx4OGJcXHhkY1xceDJiXFx4YmJcXHg0ZFxceDY3XFx4MzBcXHhjOFxceGQxXFx4ZjZcXHg1Y1xceDhmXFx4NTBcXHhmYVxceDViXFx4MmZcXHg0NlxceDliXFx4NmVcXHgzNVxceDE4XFx4MmZcXHgyN1xceDQzXFx4MmVcXHhlYlxceDBhXFx4MGNcXHg1ZVxceDEwXFx4MDVcXHgxMFxceGE1XFx4NzNcXHgxYlxceDY1XFx4MzRcXHhlNVxceDZjXFx4MmVcXHg2YVxceDQzXFx4MjdcXHg2M1xceDE0XFx4MjNcXHg1NVxceGE5XFx4M2ZcXHg3MVxceDdiXFx4NjdcXHg0M1xceDdkXFx4M2FcXHhhZlxceGNkXFx4ZTJcXHg1NFxceDU1XFx4OWNcXHhmZFxceDRiXFx4YzZcXHhlMlxceDlmXFx4MmZcXHgyOFxceGVkXFx4Y2JcXHg1Y1xceGM2XFx4MmRcXHg2NlxceDA3XFx4ODhcXHhhN1xceDNiXFx4MmZcXHgxOFxceDJhXFx4MjJcXHg0ZVxceDBlXFx4YjBcXHg2YlxceDJlXFx4ZGRcXHgwZFxceDk1XFx4N2RcXHg3ZFxceDQ3XFx4YmFcXHg0M1xceGIyXFx4MTFcXHhiMlxceDJiXFx4M2VcXHg0ZFxceGFhXFx4M2VcXHg3ZFxceGU2XFx4Y2VcXHg0OVxceDg5XFx4YzZcXHhlNlxceDc4XFx4MGNcXHg2MVxceDMxXFx4MDVcXHgyZFxceDAxXFx4YTRcXHg0ZlxceGE1XFx4N2VcXHg3MVxceDIwXFx4ODhcXHhlY1xceDBkXFx4MzFcXHhlOFxceDRlXFx4MGJcXHgwMFxceDZlXFx4NTBcXHg2OFxceDdkXFx4MTdcXHgzZFxceDA4XFx4MGRcXHgxN1xceDk1XFx4YTZcXHg2ZVxceGEzXFx4NjhcXHg5N1xceDI0XFx4NWJcXHg2YlxceGYzXFx4MTdcXHgyM1xceGYzXFx4YjZcXHg3M1xceGIzXFx4MGRcXHgwYlxceDQwXFx4YzBcXHg5ZlxceGQ4XFx4MDRcXHg1MVxceDVkXFx4ZmFcXHgxYVxceDE3XFx4MjJcXHgyZVxceDE1XFx4NmFcXHhkZlxceDQ5XFx4MDBcXHhiOVxceGEwXFx4NzdcXHg1NVxceGM2XFx4ZWZcXHgxMFxceDZhXFx4YmZcXHg3YlxceDQ3XFx4NGNcXHg3ZlxceDgzXFx4MTdcXHgwNVxceGVlXFx4ZGNcXHhkY1xceDQ2XFx4ODVcXHhhOVxceGFkXFx4NTNcXHgwN1xceDJiXFx4NTNcXHgzNFxceDA2XFx4MDdcXHhmZlxceDE0XFx4OTRcXHg1OVxceDE5XFx4MDJcXHhlNFxceDM4XFx4ZThcXHgzMVxceDgzXFx4NGVcXHhiOVxceDU4XFx4NDZcXHg2YlxceGNiXFx4MmRcXHgyM1xceDg2XFx4OTJcXHg3MFxceDAwXFx4MzVcXHg4OFxceDIyXFx4Y2ZcXHgzMVxceGIyXFx4MjZcXHgyZlxceGU3XFx4YzNcXHg3NVxceDJkXFx4MzZcXHgyY1xceDcyXFx4NzRcXHhiMFxceDIzXFx4NDdcXHhiN1xceGQzXFx4ZDFcXHgyNlxceDE2XFx4ODVcXHgzN1xceDcyXFx4ZTJcXHgwMFxceDhjXFx4NDRcXHhjZlxceDEwXFx4ZGFcXHgzM1xceDJkXFx4MWFcXHhkZVxceDYwXFx4ODZcXHg2OVxceDIzXFx4NjlcXHgyYVxceDdjXFx4Y2RcXHg0YlxceDUxXFx4MGRcXHg5NVxceDU0XFx4MzlcXHg3N1xceDJlXFx4MjlcXHhlYVxceDFiXFx4YTZcXHg1MFxceGEyXFx4NmFcXHg4ZlxceDZmXFx4NTBcXHg5OVxceDVjXFx4M2VcXHg1NFxceGZiXFx4ZWZcXHg1MFxceDViXFx4MGJcXHgwN1xceDQ1XFx4MTdcXHg4OVxceDZkXFx4MjhcXHgxM1xceDc3XFx4MzdcXHgxZFxceGRiXFx4OGVcXHgxZVxceDRhXFx4MDVcXHg2NlxceDRhXFx4NmZcXHg5OVxceDIwXFx4ZTVcXHg3MFxceGUyXFx4YjlcXHg3MVxceDdlXFx4MGNcXHg2ZFxceDQ5XFx4MDRcXHgyZFxceDdhXFx4ZmVcXHg3MlxceGM3XFx4ZjJcXHg1OVxceDMwXFx4OGZcXHhiYlxceDAyXFx4NWRcXHg3M1xceGU1XFx4YzlcXHgyMFxceGVhXFx4NzhcXHhlY1xceDIwXFx4OTBcXHhmMFxceDhhXFx4N2ZcXHg0MlxceDE3XFx4N2NcXHg0N1xceDE5XFx4NjBcXHhiMFxceDE2XFx4YmRcXHgyNlxceGI3XFx4NzFcXHhiNlxceGM3XFx4OWZcXHgwZVxceGQxXFx4MzNcXHg4MlxceDNkXFx4ZDNcXHhhYlxceGVlXFx4NjNcXHg5OVxceGM4XFx4MmJcXHg1M1xceGEwXFx4NDRcXHg1Y1xceDcxXFx4MDFcXHhjNlxceGNjXFx4NDRcXHgxZlxceDMyXFx4NGZcXHgzY1xceGNhXFx4YzBcXHgyOVxceDNkXFx4NTJcXHhkM1xceDYxXFx4MTlcXHg1OFxceGE5XFx4N2RcXHg2NVxceGI0XFx4ZGNcXHhjZlxceDBkXFx4ZjRcXHgzZFxceGYxXFx4MDhcXHhhOVxceDQyXFx4ZGFcXHgyM1xceDA5XFx4ZDhcXHhiZlxceDVlXFx4NTBcXHg0OVxceGY4XFx4NGRcXHhjMFxceGNiXFx4NDdcXHg0Y1xceDFjXFx4NGZcXHhmN1xceDdiXFx4MmJcXHhkOFxceDE2XFx4MThcXHhjNVxceDMxXFx4OTJcXHgzYlxceGI1XFx4NmZcXHhkY1xceDZjXFx4MGRcXHg5MlxceDg4XFx4MTZcXHhkMVxceDllXFx4ZGJcXHgzZlxceGUyXFx4ZTlcXHhkYVxceDVmXFx4ZDRcXHg4NFxceGUyXFx4NDZcXHg2MVxceDVhXFx4ZGVcXHgxY1xceDU1XFx4Y2ZcXHhhNFxceDAwXFx4YmVcXHhmZFxceGNlXFx4NjdcXHhmMVxceDRhXFx4NjlcXHgxY1xceDk3XFx4ZTZcXHgyMFxceDQ4XFx4ZDhcXHg1ZFxceDdmXFx4N2VcXHhhZVxceDcxXFx4MjBcXHgwZVxceDRlXFx4YWVcXHhjMFxceDU2XFx4YTlcXHg5MVxceDAxXFx4M2NcXHg4MlxceDFkXFx4MGZcXHg3MlxceGU3XFx4NzZcXHhlY1xceDI5XFx4NDlcXHhkNlxceDVkXFx4MmRcXHg4M1xceGUzXFx4ZGJcXHgzNlxceDA2XFx4YTlcXHgzYlxceDY2XFx4MTNcXHg5N1xceDg3XFx4NmFcXHhkNVxceGI2XFx4M2RcXHg1MFxceDVlXFx4NTJcXHhiOVxceDRiXFx4YzdcXHg3M1xceDU3XFx4NzhcXHhjOVxceGY0XFx4MmVcXHg1OVxceDA3XFx4OTVcXHg5M1xceDZmXFx4ZDBcXHg0YlxceDE3XFx4NTdcXHgxOVxceDNlXFx4MjdcXHgyN1xceGM3XFx4NjBcXHhkYlxceDNiXFx4ZWRcXHg5YVxceDBlXFx4NTNcXHg0NFxceDE2XFx4M2VcXHgzZlxceDhkXFx4OTJcXHg2ZFxceDc3XFx4YTJcXHgwYVxceGViXFx4M2ZcXHg1MlxceGE4XFx4YzZcXHg1NVxceDVlXFx4MzFcXHg0OVxceDM3XFx4ODVcXHhmNFxceGM1XFx4MWZcXHgyNlxceDJkXFx4YTlcXHgxY1xceGJmXFx4OGJcXHgyN1xceDU0XFx4ZGFcXHhjM1xceDZhXFx4MjBcXHhlNVxceDJhXFx4NzhcXHgwNFxceGIwXFx4ZDZcXHg5MFxceDcwXFx4NzJcXHhhYVxceDhiXFx4NjhcXHhiZFxceDg4XFx4ZjdcXHgwMlxceDVmXFx4NDhcXHhiMVxceDdlXFx4YzBcXHg1OFxceDRjXFx4M2ZcXHg2NlxceDFhXFx4ZjlcXHgzZVxceGUxXFx4NjVcXHhjMFxceDcwXFx4YTdcXHhjZlxceDM4XFx4NjlcXHhhZlxceGYwXFx4NTZcXHg2Y1xceDY0XFx4NDlcXHg5Y1xceDI3XFx4YWRcXHg3OFxceDc0XFx4NGZcXHhjMlxceDg3XFx4ZGVcXHg1NlxceDM5XFx4MDBcXHhkYVxceDc3XFx4MGJcXHhjYlxceDJkXFx4MWJcXHg4OVxceGZiXFx4MzVcXHg0ZlxceDAyXFx4ZjVcXHgwOFxceDUxXFx4MTNcXHg2MFxceGMxXFx4MGFcXHg1YVxceDQ3XFx4NGRcXHgyNlxceDFjXFx4MzNcXHgzMFxceDc4XFx4ZGFcXHhjMFxceDljXFx4NDZcXHg0N1xceGUyXFx4NWJcXHg3OVxceDYwXFx4NDlcXHg2ZVxceDM3XFx4NjdcXHg1M1xceDBhXFx4M2VcXHhlOVxceGVjXFx4NDZcXHgzOVxceGIyXFx4ZjFcXHgzNFxceDBkXFx4YzZcXHg4NFxceDUzXFx4NzVcXHg2ZVxceGUxXFx4MGNcXHg1OVxceGQ5XFx4MWVcXHhkZVxceDI5XFx4ODVcXHgxMFxceDdiXFx4NDlcXHg0OVxceGE1XFx4NzdcXHg3OVxceGJlXFx4NDlcXHg1NlxceDJlXFx4MzZcXHhlN1xceDBiXFx4M2FcXHhiYlxceDRmXFx4MDNcXHg2MlxceDdiXFx4ZDJcXHg0ZFxceDMxXFx4OTVcXHgyZlxceGJkXFx4MzhcXHg3YlxceGE4XFx4NGZcXHgyMVxceGUxXFx4ZWNcXHg0NlxceDcwXFx4NzZcXHg5NVxceDdkXFx4MjlcXHgyMlxceDc4XFx4ODhcXHgwYVxceDkwXFx4ZGRcXHg5ZFxceDVjXFx4ZGFcXHhkZVxceDE5XFx4NTFcXHhjZlxceGYwXFx4ZmNcXHg1OVxceDUyXFx4NjVcXHg3Y1xceDMzXFx4MTNcXHhkZlxceGYzXFx4NDhcXHhkYVxceGJiXFx4MmFcXHg3NVxceGRiXFx4NjBcXHhiMlxceDAyXFx4MTVcXHhkNFxceGZjXFx4MTlcXHhlZFxceDFiXFx4ZWNcXHg3ZlxceDM1XFx4YThcXHhmZlxceDI4XFx4MzFcXHgwN1xceDJkXFx4MTJcXHhjOFxceGRjXFx4ODhcXHg0NlxceDdjXFx4OGFcXHg1YlxceDIyXCJcbik7XG5cbi8qKlxuICogUHJvdmlkZXMgbWV0YWRhdGEgdXNpbmcgdGhlIEdvb2dsZSBFYXJ0aCBFbnRlcnByaXNlIFJFU1QgQVBJLiBUaGlzIGlzIHVzZWQgYnkgdGhlIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlclxuICogIGFuZCBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIgdG8gc2hhcmUgbWV0YWRhdGEgcmVxdWVzdHMuXG4gKlxuICogQGFsaWFzIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1Jlc291cmNlfFN0cmluZ30gcmVzb3VyY2VPclVybCBUaGUgdXJsIG9mIHRoZSBHb29nbGUgRWFydGggRW50ZXJwcmlzZSBzZXJ2ZXIgaG9zdGluZyB0aGUgaW1hZ2VyeVxuICpcbiAqIEBzZWUgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlclxuICpcbiAqL1xuZnVuY3Rpb24gR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEocmVzb3VyY2VPclVybCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay5kZWZpbmVkKFwicmVzb3VyY2VPclVybFwiLCByZXNvdXJjZU9yVXJsKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHVybCA9IHJlc291cmNlT3JVcmw7XG5cbiAgaWYgKHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIgJiYgISh1cmwgaW5zdGFuY2VvZiBSZXNvdXJjZSkpIHtcbiAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgIENoZWNrLnR5cGVPZi5zdHJpbmcoXCJyZXNvdXJjZU9yVXJsLnVybFwiLCByZXNvdXJjZU9yVXJsLnVybCk7XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICB1cmwgPSByZXNvdXJjZU9yVXJsLnVybDtcbiAgfVxuXG4gIHZhciByZXNvdXJjZSA9IFJlc291cmNlLmNyZWF0ZUlmTmVlZGVkKHVybCk7XG4gIHJlc291cmNlLmFwcGVuZEZvcndhcmRTbGFzaCgpO1xuICB0aGlzLl9yZXNvdXJjZSA9IHJlc291cmNlO1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIGltYWdlcnkgaXMgYXZhaWxhYmxlLlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5pbWFnZXJ5UHJlc2VudCA9IHRydWU7XG5cbiAgLyoqXG4gICAqIFRydWUgaWYgaW1hZ2VyeSBpcyBzZW50IGFzIGEgcHJvdG9jb2wgYnVmZmVyLCBmYWxzZSBpZiBzZW50IGFzIHBsYWluIGltYWdlcy4gSWYgdW5kZWZpbmVkIHdlIHdpbGwgdHJ5IGJvdGguXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMucHJvdG9JbWFnZXJ5ID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRlcnJhaW4gaXMgYXZhaWxhYmxlLlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy50ZXJyYWluUHJlc2VudCA9IHRydWU7XG5cbiAgLyoqXG4gICAqIEV4cG9uZW50IHVzZWQgdG8gY29tcHV0ZSBjb25zdGFudCB0byBjYWxjdWxhdGUgbmVnYXRpdmUgaGVpZ2h0IHZhbHVlcy5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMzJcbiAgICovXG4gIHRoaXMubmVnYXRpdmVBbHRpdHVkZUV4cG9uZW50QmlhcyA9IDMyO1xuXG4gIC8qKlxuICAgKiBUaHJlc2hvbGQgd2hlcmUgYW55IG51bWJlcnMgc21hbGxlciBhcmUgYWN0dWFsbHkgbmVnYXRpdmUgdmFsdWVzLiBUaGV5IGFyZSBtdWx0aXBsaWVkIGJ5IC0yXm5lZ2F0aXZlQWx0aXR1ZGVFeHBvbmVudEJpYXMuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IEVQU0lMT04xMlxuICAgKi9cbiAgdGhpcy5uZWdhdGl2ZUFsdGl0dWRlVGhyZXNob2xkID0gQ2VzaXVtTWF0aC5FUFNJTE9OMTI7XG5cbiAgLyoqXG4gICAqIERpY3Rpb25hcnkgb2YgcHJvdmlkZXIgaWQgdG8gY29weXJpZ2h0IHN0cmluZ3MuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBkZWZhdWx0IHt9XG4gICAqL1xuICB0aGlzLnByb3ZpZGVycyA9IHt9O1xuXG4gIC8qKlxuICAgKiBLZXkgdXNlZCB0byBkZWNvZGUgcGFja2V0c1xuICAgKiBAdHlwZSB7QXJyYXlCdWZmZXJ9XG4gICAqL1xuICB0aGlzLmtleSA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9xdWFkUGFja2V0VmVyc2lvbiA9IDE7XG5cbiAgdGhpcy5fdGlsZUluZm8gPSB7fTtcbiAgdGhpcy5fc3VidHJlZVByb21pc2VzID0ge307XG5cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB0aGlzLl9yZWFkeVByb21pc2UgPSByZXF1ZXN0RGJSb290KHRoaXMpXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoYXQuZ2V0UXVhZFRyZWVQYWNrZXQoXCJcIiwgdGhhdC5fcXVhZFBhY2tldFZlcnNpb24pO1xuICAgIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9XG4gICAgICAgIFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYWNjZXNzaW5nIFwiICtcbiAgICAgICAgZ2V0TWV0YWRhdGFSZXNvdXJjZSh0aGF0LCBcIlwiLCAxKS51cmwgK1xuICAgICAgICBcIi5cIjtcbiAgICAgIHJldHVybiB3aGVuLnJlamVjdChuZXcgUnVudGltZUVycm9yKG1lc3NhZ2UpKTtcbiAgICB9KTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBuYW1lIG9mIHRoZSBHb29nbGUgRWFydGggRW50ZXJwcmlzZSBzZXJ2ZXIuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS5wcm90b3R5cGVcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB1cmw6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZXNvdXJjZS51cmw7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgcHJveHkgdXNlZCBmb3IgbWV0YWRhdGEgcmVxdWVzdHMuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb3h5fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHByb3h5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVzb3VyY2UucHJveHk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgcmVzb3VyY2UgdXNlZCBmb3IgbWV0YWRhdGEgcmVxdWVzdHMuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS5wcm90b3R5cGVcbiAgICogQHR5cGUge1Jlc291cmNlfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlc291cmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVzb3VyY2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0cnVlIHdoZW4gdGhlIG1ldGFkYXRhIGlzIHJlYWR5IGZvciB1c2UuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb21pc2UuPEJvb2xlYW4+fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5UHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5UHJvbWlzZTtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogQ29udmVydHMgYSB0aWxlcyAoeCwgeSwgbGV2ZWwpIHBvc2l0aW9uIGludG8gYSBxdWFka2V5IHVzZWQgdG8gcmVxdWVzdCBhbiBpbWFnZVxuICogZnJvbSBhIEdvb2dsZSBFYXJ0aCBFbnRlcnByaXNlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSdzIHggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlJ3MgeSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlJ3Mgem9vbSBsZXZlbC5cbiAqXG4gKiBAc2VlIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhI3F1YWRLZXlUb1RpbGVYWVxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS50aWxlWFlUb1F1YWRLZXkgPSBmdW5jdGlvbiAoeCwgeSwgbGV2ZWwpIHtcbiAgdmFyIHF1YWRrZXkgPSBcIlwiO1xuICBmb3IgKHZhciBpID0gbGV2ZWw7IGkgPj0gMDsgLS1pKSB7XG4gICAgdmFyIGJpdG1hc2sgPSAxIDw8IGk7XG4gICAgdmFyIGRpZ2l0ID0gMDtcblxuICAgIC8vIFRpbGUgTGF5b3V0XG4gICAgLy8gX19fIF9fX1xuICAgIC8vfCAgIHwgICB8XG4gICAgLy98IDMgfCAyIHxcbiAgICAvL3wtLS0tLS0tfFxuICAgIC8vfCAwIHwgMSB8XG4gICAgLy98X19ffF9fX3xcbiAgICAvL1xuXG4gICAgaWYgKCFpc0JpdFNldCh5LCBiaXRtYXNrKSkge1xuICAgICAgLy8gVG9wIFJvd1xuICAgICAgZGlnaXQgfD0gMjtcbiAgICAgIGlmICghaXNCaXRTZXQoeCwgYml0bWFzaykpIHtcbiAgICAgICAgLy8gUmlnaHQgdG8gbGVmdFxuICAgICAgICBkaWdpdCB8PSAxO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNCaXRTZXQoeCwgYml0bWFzaykpIHtcbiAgICAgIC8vIExlZnQgdG8gcmlnaHRcbiAgICAgIGRpZ2l0IHw9IDE7XG4gICAgfVxuXG4gICAgcXVhZGtleSArPSBkaWdpdDtcbiAgfVxuICByZXR1cm4gcXVhZGtleTtcbn07XG5cbi8qKlxuICogQ29udmVydHMgYSB0aWxlJ3MgcXVhZGtleSB1c2VkIHRvIHJlcXVlc3QgYW4gaW1hZ2UgZnJvbSBhIEdvb2dsZSBFYXJ0aCBFbnRlcnByaXNlIHNlcnZlciBpbnRvIHRoZVxuICogKHgsIHksIGxldmVsKSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcXVhZGtleSBUaGUgdGlsZSdzIHF1YWQga2V5XG4gKlxuICogQHNlZSBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YSN0aWxlWFlUb1F1YWRLZXlcbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEucXVhZEtleVRvVGlsZVhZID0gZnVuY3Rpb24gKHF1YWRrZXkpIHtcbiAgdmFyIHggPSAwO1xuICB2YXIgeSA9IDA7XG4gIHZhciBsZXZlbCA9IHF1YWRrZXkubGVuZ3RoIC0gMTtcbiAgZm9yICh2YXIgaSA9IGxldmVsOyBpID49IDA7IC0taSkge1xuICAgIHZhciBiaXRtYXNrID0gMSA8PCBpO1xuICAgIHZhciBkaWdpdCA9ICtxdWFka2V5W2xldmVsIC0gaV07XG5cbiAgICBpZiAoaXNCaXRTZXQoZGlnaXQsIDIpKSB7XG4gICAgICAvLyBUb3AgUm93XG4gICAgICBpZiAoIWlzQml0U2V0KGRpZ2l0LCAxKSkge1xuICAgICAgICAvLyAvLyBSaWdodCB0byBsZWZ0XG4gICAgICAgIHggfD0gYml0bWFzaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgeSB8PSBiaXRtYXNrO1xuICAgICAgaWYgKGlzQml0U2V0KGRpZ2l0LCAxKSkge1xuICAgICAgICAvLyBMZWZ0IHRvIHJpZ2h0XG4gICAgICAgIHggfD0gYml0bWFzaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB4OiB4LFxuICAgIHk6IHksXG4gICAgbGV2ZWw6IGxldmVsLFxuICB9O1xufTtcblxuR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEucHJvdG90eXBlLmlzVmFsaWQgPSBmdW5jdGlvbiAocXVhZEtleSkge1xuICB2YXIgaW5mbyA9IHRoaXMuZ2V0VGlsZUluZm9ybWF0aW9uRnJvbVF1YWRLZXkocXVhZEtleSk7XG4gIGlmIChkZWZpbmVkKGluZm8pKSB7XG4gICAgcmV0dXJuIGluZm8gIT09IG51bGw7XG4gIH1cblxuICB2YXIgdmFsaWQgPSB0cnVlO1xuICB2YXIgcSA9IHF1YWRLZXk7XG4gIHZhciBsYXN0O1xuICB3aGlsZSAocS5sZW5ndGggPiAxKSB7XG4gICAgbGFzdCA9IHEuc3Vic3RyaW5nKHEubGVuZ3RoIC0gMSk7XG4gICAgcSA9IHEuc3Vic3RyaW5nKDAsIHEubGVuZ3RoIC0gMSk7XG4gICAgaW5mbyA9IHRoaXMuZ2V0VGlsZUluZm9ybWF0aW9uRnJvbVF1YWRLZXkocSk7XG4gICAgaWYgKGRlZmluZWQoaW5mbykpIHtcbiAgICAgIGlmICghaW5mby5oYXNTdWJ0cmVlKCkgJiYgIWluZm8uaGFzQ2hpbGQocGFyc2VJbnQobGFzdCkpKSB7XG4gICAgICAgIC8vIFdlIGhhdmUgbm8gc3VidHJlZSBvciBjaGlsZCBhdmFpbGFibGUgYXQgc29tZSBwb2ludCBpbiB0aGlzIG5vZGUncyBhbmNlc3RyeVxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYgKGluZm8gPT09IG51bGwpIHtcbiAgICAgIC8vIFNvbWUgbm9kZSBpbiB0aGUgYW5jZXN0cnkgd2FzIGxvYWRlZCBhbmQgc2FpZCB0aGVyZSB3YXNuJ3QgYSBzdWJ0cmVlXG4gICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbGlkO1xufTtcblxudmFyIHRhc2tQcm9jZXNzb3IgPSBuZXcgVGFza1Byb2Nlc3NvcihcImRlY29kZUdvb2dsZUVhcnRoRW50ZXJwcmlzZVBhY2tldFwiKTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgYSBHb29nbGUgRWFydGggRW50ZXJwcmlzZSBxdWFkdHJlZSBwYWNrZXQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IFtxdWFkS2V5PScnXSBUaGUgcXVhZGtleSB0byByZXRyaWV2ZSB0aGUgcGFja2V0IGZvci5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbdmVyc2lvbj0xXSBUaGUgY25vZGUgdmVyc2lvbiB0byBiZSB1c2VkIGluIHRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtSZXF1ZXN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3Qgb2JqZWN0LiBJbnRlbmRlZCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEucHJvdG90eXBlLmdldFF1YWRUcmVlUGFja2V0ID0gZnVuY3Rpb24gKFxuICBxdWFkS2V5LFxuICB2ZXJzaW9uLFxuICByZXF1ZXN0XG4pIHtcbiAgdmVyc2lvbiA9IGRlZmF1bHRWYWx1ZSh2ZXJzaW9uLCAxKTtcbiAgcXVhZEtleSA9IGRlZmF1bHRWYWx1ZShxdWFkS2V5LCBcIlwiKTtcbiAgdmFyIHJlc291cmNlID0gZ2V0TWV0YWRhdGFSZXNvdXJjZSh0aGlzLCBxdWFkS2V5LCB2ZXJzaW9uLCByZXF1ZXN0KTtcblxuICB2YXIgcHJvbWlzZSA9IHJlc291cmNlLmZldGNoQXJyYXlCdWZmZXIoKTtcblxuICBpZiAoIWRlZmluZWQocHJvbWlzZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkOyAvLyBUaHJvdHRsZWRcbiAgfVxuXG4gIHZhciB0aWxlSW5mbyA9IHRoaXMuX3RpbGVJbmZvO1xuICB2YXIga2V5ID0gdGhpcy5rZXk7XG4gIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKG1ldGFkYXRhKSB7XG4gICAgdmFyIGRlY29kZVByb21pc2UgPSB0YXNrUHJvY2Vzc29yLnNjaGVkdWxlVGFzayhcbiAgICAgIHtcbiAgICAgICAgYnVmZmVyOiBtZXRhZGF0YSxcbiAgICAgICAgcXVhZEtleTogcXVhZEtleSxcbiAgICAgICAgdHlwZTogXCJNZXRhZGF0YVwiLFxuICAgICAgICBrZXk6IGtleSxcbiAgICAgIH0sXG4gICAgICBbbWV0YWRhdGFdXG4gICAgKTtcblxuICAgIHJldHVybiBkZWNvZGVQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgdmFyIHJvb3Q7XG4gICAgICB2YXIgdG9wTGV2ZWxLZXlMZW5ndGggPSAtMTtcbiAgICAgIGlmIChxdWFkS2V5ICE9PSBcIlwiKSB7XG4gICAgICAgIC8vIFJvb3QgdGlsZSBoYXMgbm8gZGF0YSBleGNlcHQgY2hpbGRyZW4gYml0cywgc28gcHV0IHRoZW0gaW50byB0aGUgdGlsZSBpbmZvXG4gICAgICAgIHRvcExldmVsS2V5TGVuZ3RoID0gcXVhZEtleS5sZW5ndGggKyAxO1xuICAgICAgICB2YXIgdG9wID0gcmVzdWx0W3F1YWRLZXldO1xuICAgICAgICByb290ID0gdGlsZUluZm9bcXVhZEtleV07XG4gICAgICAgIHJvb3QuX2JpdHMgfD0gdG9wLl9iaXRzO1xuXG4gICAgICAgIGRlbGV0ZSByZXN1bHRbcXVhZEtleV07XG4gICAgICB9XG5cbiAgICAgIC8vIENvcHkgdGhlIHJlc3VsdGluZyBvYmplY3RzIGludG8gdGlsZUluZm9cbiAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBzdGFydCB3aXRoIHNob3J0ZXIgcXVhZGtleXMgZmlyc3QsIHNvIHdlIGtub3cgdGhlIHBhcmVudHMgaGF2ZVxuICAgICAgLy8gIGFscmVhZHkgYmVlbiBwcm9jZXNzZWQuIE90aGVyd2lzZSB3ZSBjYW4gbG9zZSBhbmNlc3Rvckhhc1RlcnJhaW4gYWxvbmcgdGhlIHdheS5cbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVzdWx0KTtcbiAgICAgIGtleXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYS5sZW5ndGggLSBiLmxlbmd0aDtcbiAgICAgIH0pO1xuICAgICAgdmFyIGtleXNMZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5c0xlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICB2YXIgciA9IHJlc3VsdFtrZXldO1xuICAgICAgICBpZiAociAhPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBpbmZvID0gR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uLmNsb25lKHJlc3VsdFtrZXldKTtcbiAgICAgICAgICB2YXIga2V5TGVuZ3RoID0ga2V5Lmxlbmd0aDtcbiAgICAgICAgICBpZiAoa2V5TGVuZ3RoID09PSB0b3BMZXZlbEtleUxlbmd0aCkge1xuICAgICAgICAgICAgaW5mby5zZXRQYXJlbnQocm9vdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChrZXlMZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGlsZUluZm9ba2V5LnN1YnN0cmluZygwLCBrZXkubGVuZ3RoIC0gMSldO1xuICAgICAgICAgICAgaW5mby5zZXRQYXJlbnQocGFyZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGlsZUluZm9ba2V5XSA9IGluZm87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGlsZUluZm9ba2V5XSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFBvcHVsYXRlcyB0aGUgbWV0YWRhdGEgc3VidHJlZSBkb3duIHRvIHRoZSBzcGVjaWZpZWQgdGlsZS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWwuXG4gKiBAcGFyYW0ge1JlcXVlc3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdCBvYmplY3QuIEludGVuZGVkIGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxHb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb24+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgdGlsZSBpbmZvIGZvciB0aGUgcmVxdWVzdGVkIHF1YWQga2V5XG4gKlxuICogQHByaXZhdGVcbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEucHJvdG90eXBlLnBvcHVsYXRlU3VidHJlZSA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWwsXG4gIHJlcXVlc3Rcbikge1xuICB2YXIgcXVhZGtleSA9IEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhLnRpbGVYWVRvUXVhZEtleSh4LCB5LCBsZXZlbCk7XG4gIHJldHVybiBwb3B1bGF0ZVN1YnRyZWUodGhpcywgcXVhZGtleSwgcmVxdWVzdCk7XG59O1xuXG5mdW5jdGlvbiBwb3B1bGF0ZVN1YnRyZWUodGhhdCwgcXVhZEtleSwgcmVxdWVzdCkge1xuICB2YXIgdGlsZUluZm8gPSB0aGF0Ll90aWxlSW5mbztcbiAgdmFyIHEgPSBxdWFkS2V5O1xuICB2YXIgdCA9IHRpbGVJbmZvW3FdO1xuICAvLyBJZiB3ZSBoYXZlIHRpbGVJbmZvIG1ha2Ugc3VyZSBzdXJlIGl0IGlzIG5vdCBhIG5vZGUgd2l0aCBhIHN1YnRyZWUgdGhhdCdzIG5vdCBsb2FkZWRcbiAgaWYgKGRlZmluZWQodCkgJiYgKCF0Lmhhc1N1YnRyZWUoKSB8fCB0Lmhhc0NoaWxkcmVuKCkpKSB7XG4gICAgcmV0dXJuIHQ7XG4gIH1cblxuICB3aGlsZSAodCA9PT0gdW5kZWZpbmVkICYmIHEubGVuZ3RoID4gMSkge1xuICAgIHEgPSBxLnN1YnN0cmluZygwLCBxLmxlbmd0aCAtIDEpO1xuICAgIHQgPSB0aWxlSW5mb1txXTtcbiAgfVxuXG4gIHZhciBzdWJ0cmVlUmVxdWVzdDtcbiAgdmFyIHN1YnRyZWVQcm9taXNlcyA9IHRoYXQuX3N1YnRyZWVQcm9taXNlcztcbiAgdmFyIHByb21pc2UgPSBzdWJ0cmVlUHJvbWlzZXNbcV07XG4gIGlmIChkZWZpbmVkKHByb21pc2UpKSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBSZWN1cnNpdmVseSBjYWxsIHRoaXMgaW4gY2FzZSB3ZSBuZWVkIG11bHRpcGxlIHN1YnRyZWUgcmVxdWVzdHNcbiAgICAgIHN1YnRyZWVSZXF1ZXN0ID0gbmV3IFJlcXVlc3Qoe1xuICAgICAgICB0aHJvdHRsZTogcmVxdWVzdC50aHJvdHRsZSxcbiAgICAgICAgdGhyb3R0bGVCeVNlcnZlcjogcmVxdWVzdC50aHJvdHRsZUJ5U2VydmVyLFxuICAgICAgICB0eXBlOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgIHByaW9yaXR5RnVuY3Rpb246IHJlcXVlc3QucHJpb3JpdHlGdW5jdGlvbixcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHBvcHVsYXRlU3VidHJlZSh0aGF0LCBxdWFkS2V5LCBzdWJ0cmVlUmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyB0IGlzIGVpdGhlclxuICAvLyAgIG51bGwgc28gb25lIG9mIGl0cyBwYXJlbnRzIHdhcyBhIGxlYWYgbm9kZSwgc28gdGhpcyB0aWxlIGRvZXNuJ3QgZXhpc3RcbiAgLy8gICBleGlzdHMgYnV0IGRvZXNuJ3QgaGF2ZSBhIHN1YnRyZWUgdG8gcmVxdWVzdFxuICAvLyAgIHVuZGVmaW5lZCBzbyBubyBwYXJlbnQgZXhpc3RzIC0gdGhpcyBzaG91bGRuJ3QgZXZlciBoYXBwZW4gb25jZSB0aGUgcHJvdmlkZXIgaXMgcmVhZHlcbiAgaWYgKCFkZWZpbmVkKHQpIHx8ICF0Lmhhc1N1YnRyZWUoKSkge1xuICAgIHJldHVybiB3aGVuLnJlamVjdChcbiAgICAgIG5ldyBSdW50aW1lRXJyb3IoXCJDb3VsZG4ndCBsb2FkIG1ldGFkYXRhIGZvciB0aWxlIFwiICsgcXVhZEtleSlcbiAgICApO1xuICB9XG5cbiAgLy8gV2UgbmVlZCB0byBzcGxpdCB1cCB0aGUgcHJvbWlzZSBoZXJlIGJlY2F1c2Ugd2hlbiB3aWxsIGV4ZWN1dGUgc3luY3Jvbm91c2x5IGlmIGdldFF1YWRUcmVlUGFja2V0XG4gIC8vICBpcyBhbHJlYWR5IHJlc29sdmVkIChsaWtlIGluIHRoZSB0ZXN0cyksIHNvIHN1YnRyZWVQcm9taXNlcyB3aWxsIG5ldmVyIGdldCBjbGVhcmVkIG91dC5cbiAgLy8gIE9ubHkgdGhlIGluaXRpYWwgcmVxdWVzdCB3aWxsIGFsc28gcmVtb3ZlIHRoZSBwcm9taXNlIGZyb20gc3VidHJlZVByb21pc2VzLlxuICBwcm9taXNlID0gdGhhdC5nZXRRdWFkVHJlZVBhY2tldChxLCB0LmNub2RlVmVyc2lvbiwgcmVxdWVzdCk7XG4gIGlmICghZGVmaW5lZChwcm9taXNlKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgc3VidHJlZVByb21pc2VzW3FdID0gcHJvbWlzZTtcblxuICByZXR1cm4gcHJvbWlzZVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNhbGwgdGhpcyBpbiBjYXNlIHdlIG5lZWQgbXVsdGlwbGUgc3VidHJlZSByZXF1ZXN0c1xuICAgICAgc3VidHJlZVJlcXVlc3QgPSBuZXcgUmVxdWVzdCh7XG4gICAgICAgIHRocm90dGxlOiByZXF1ZXN0LnRocm90dGxlLFxuICAgICAgICB0aHJvdHRsZUJ5U2VydmVyOiByZXF1ZXN0LnRocm90dGxlQnlTZXJ2ZXIsXG4gICAgICAgIHR5cGU6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgcHJpb3JpdHlGdW5jdGlvbjogcmVxdWVzdC5wcmlvcml0eUZ1bmN0aW9uLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcG9wdWxhdGVTdWJ0cmVlKHRoYXQsIHF1YWRLZXksIHN1YnRyZWVSZXF1ZXN0KTtcbiAgICB9KVxuICAgIC5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgICAgZGVsZXRlIHN1YnRyZWVQcm9taXNlc1txXTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IGEgdGlsZVxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB0aWxlIFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgdGlsZSBsZXZlbC5cbiAqIEByZXR1cm5zIHtHb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb258dW5kZWZpbmVkfSBJbmZvcm1hdGlvbiBhYm91dCB0aGUgdGlsZSBvciB1bmRlZmluZWQgaWYgaXQgaXNuJ3QgbG9hZGVkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhLnByb3RvdHlwZS5nZXRUaWxlSW5mb3JtYXRpb24gPSBmdW5jdGlvbiAoXG4gIHgsXG4gIHksXG4gIGxldmVsXG4pIHtcbiAgdmFyIHF1YWRrZXkgPSBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS50aWxlWFlUb1F1YWRLZXkoeCwgeSwgbGV2ZWwpO1xuICByZXR1cm4gdGhpcy5fdGlsZUluZm9bcXVhZGtleV07XG59O1xuXG4vKipcbiAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgYSB0aWxlIGZyb20gYSBxdWFkS2V5XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHF1YWRrZXkgVGhlIHF1YWRrZXkgZm9yIHRoZSB0aWxlXG4gKiBAcmV0dXJucyB7R29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9ufHVuZGVmaW5lZH0gSW5mb3JtYXRpb24gYWJvdXQgdGhlIHRpbGUgb3IgdW5kZWZpbmVkIGlmIGl0IGlzbid0IGxvYWRlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS5wcm90b3R5cGUuZ2V0VGlsZUluZm9ybWF0aW9uRnJvbVF1YWRLZXkgPSBmdW5jdGlvbiAoXG4gIHF1YWRrZXlcbikge1xuICByZXR1cm4gdGhpcy5fdGlsZUluZm9bcXVhZGtleV07XG59O1xuXG5mdW5jdGlvbiBnZXRNZXRhZGF0YVJlc291cmNlKHRoYXQsIHF1YWRLZXksIHZlcnNpb24sIHJlcXVlc3QpIHtcbiAgcmV0dXJuIHRoYXQuX3Jlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgdXJsOiBcImZsYXRmaWxlP3EyLTBcIiArIHF1YWRLZXkgKyBcIi1xLlwiICsgdmVyc2lvbi50b1N0cmluZygpLFxuICAgIHJlcXVlc3Q6IHJlcXVlc3QsXG4gIH0pO1xufVxuXG52YXIgZGJyb290UGFyc2VyO1xudmFyIGRicm9vdFBhcnNlclByb21pc2U7XG5mdW5jdGlvbiByZXF1ZXN0RGJSb290KHRoYXQpIHtcbiAgdmFyIHJlc291cmNlID0gdGhhdC5fcmVzb3VyY2UuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICB1cmw6IFwiZGJSb290LnY1XCIsXG4gICAgcXVlcnlQYXJhbWV0ZXJzOiB7XG4gICAgICBvdXRwdXQ6IFwicHJvdG9cIixcbiAgICB9LFxuICB9KTtcblxuICBpZiAoIWRlZmluZWQoZGJyb290UGFyc2VyUHJvbWlzZSkpIHtcbiAgICB2YXIgdXJsID0gYnVpbGRNb2R1bGVVcmwoXCJUaGlyZFBhcnR5L2dvb2dsZS1lYXJ0aC1kYnJvb3QtcGFyc2VyLmpzXCIpO1xuICAgIHZhciBvbGRWYWx1ZSA9IHdpbmRvdy5jZXNpdW1Hb29nbGVFYXJ0aERiUm9vdFBhcnNlcjtcbiAgICBkYnJvb3RQYXJzZXJQcm9taXNlID0gbG9hZEFuZEV4ZWN1dGVTY3JpcHQodXJsKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRicm9vdFBhcnNlciA9IHdpbmRvdy5jZXNpdW1Hb29nbGVFYXJ0aERiUm9vdFBhcnNlcihwcm90b2J1Zik7XG4gICAgICBpZiAoZGVmaW5lZChvbGRWYWx1ZSkpIHtcbiAgICAgICAgd2luZG93LmNlc2l1bUdvb2dsZUVhcnRoRGJSb290UGFyc2VyID0gb2xkVmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgd2luZG93LmNlc2l1bUdvb2dsZUVhcnRoRGJSb290UGFyc2VyO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGRicm9vdFBhcnNlclByb21pc2VcbiAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVzb3VyY2UuZmV0Y2hBcnJheUJ1ZmZlcigpO1xuICAgIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24gKGJ1Zikge1xuICAgICAgdmFyIGVuY3J5cHRlZERiUm9vdFByb3RvID0gZGJyb290UGFyc2VyLkVuY3J5cHRlZERiUm9vdFByb3RvLmRlY29kZShcbiAgICAgICAgbmV3IFVpbnQ4QXJyYXkoYnVmKVxuICAgICAgKTtcblxuICAgICAgdmFyIGJ5dGVBcnJheSA9IGVuY3J5cHRlZERiUm9vdFByb3RvLmVuY3J5cHRpb25EYXRhO1xuICAgICAgdmFyIG9mZnNldCA9IGJ5dGVBcnJheS5ieXRlT2Zmc2V0O1xuICAgICAgdmFyIGVuZCA9IG9mZnNldCArIGJ5dGVBcnJheS5ieXRlTGVuZ3RoO1xuICAgICAgdmFyIGtleSA9ICh0aGF0LmtleSA9IGJ5dGVBcnJheS5idWZmZXIuc2xpY2Uob2Zmc2V0LCBlbmQpKTtcblxuICAgICAgYnl0ZUFycmF5ID0gZW5jcnlwdGVkRGJSb290UHJvdG8uZGJyb290RGF0YTtcbiAgICAgIG9mZnNldCA9IGJ5dGVBcnJheS5ieXRlT2Zmc2V0O1xuICAgICAgZW5kID0gb2Zmc2V0ICsgYnl0ZUFycmF5LmJ5dGVMZW5ndGg7XG4gICAgICB2YXIgZGJSb290Q29tcHJlc3NlZCA9IGJ5dGVBcnJheS5idWZmZXIuc2xpY2Uob2Zmc2V0LCBlbmQpO1xuICAgICAgcmV0dXJuIHRhc2tQcm9jZXNzb3Iuc2NoZWR1bGVUYXNrKFxuICAgICAgICB7XG4gICAgICAgICAgYnVmZmVyOiBkYlJvb3RDb21wcmVzc2VkLFxuICAgICAgICAgIHR5cGU6IFwiRGJSb290XCIsXG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgIH0sXG4gICAgICAgIFtkYlJvb3RDb21wcmVzc2VkXVxuICAgICAgKTtcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIHZhciBkYlJvb3QgPSBkYnJvb3RQYXJzZXIuRGJSb290UHJvdG8uZGVjb2RlKFxuICAgICAgICBuZXcgVWludDhBcnJheShyZXN1bHQuYnVmZmVyKVxuICAgICAgKTtcbiAgICAgIHRoYXQuaW1hZ2VyeVByZXNlbnQgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIGRiUm9vdC5pbWFnZXJ5UHJlc2VudCxcbiAgICAgICAgdGhhdC5pbWFnZXJ5UHJlc2VudFxuICAgICAgKTtcbiAgICAgIHRoYXQucHJvdG9JbWFnZXJ5ID0gZGJSb290LnByb3RvSW1hZ2VyeTtcbiAgICAgIHRoYXQudGVycmFpblByZXNlbnQgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIGRiUm9vdC50ZXJyYWluUHJlc2VudCxcbiAgICAgICAgdGhhdC50ZXJyYWluUHJlc2VudFxuICAgICAgKTtcbiAgICAgIGlmIChkZWZpbmVkKGRiUm9vdC5lbmRTbmlwcGV0KSAmJiBkZWZpbmVkKGRiUm9vdC5lbmRTbmlwcGV0Lm1vZGVsKSkge1xuICAgICAgICB2YXIgbW9kZWwgPSBkYlJvb3QuZW5kU25pcHBldC5tb2RlbDtcbiAgICAgICAgdGhhdC5uZWdhdGl2ZUFsdGl0dWRlRXhwb25lbnRCaWFzID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgIG1vZGVsLm5lZ2F0aXZlQWx0aXR1ZGVFeHBvbmVudEJpYXMsXG4gICAgICAgICAgdGhhdC5uZWdhdGl2ZUFsdGl0dWRlRXhwb25lbnRCaWFzXG4gICAgICAgICk7XG4gICAgICAgIHRoYXQubmVnYXRpdmVBbHRpdHVkZVRocmVzaG9sZCA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgICBtb2RlbC5jb21wcmVzc2VkTmVnYXRpdmVBbHRpdHVkZVRocmVzaG9sZCxcbiAgICAgICAgICB0aGF0Lm5lZ2F0aXZlQWx0aXR1ZGVUaHJlc2hvbGRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKGRiUm9vdC5kYXRhYmFzZVZlcnNpb24pKSB7XG4gICAgICAgIHRoYXQuX3F1YWRQYWNrZXRWZXJzaW9uID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgIGRiUm9vdC5kYXRhYmFzZVZlcnNpb24ucXVhZHRyZWVWZXJzaW9uLFxuICAgICAgICAgIHRoYXQuX3F1YWRQYWNrZXRWZXJzaW9uXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2YXIgcHJvdmlkZXJzID0gdGhhdC5wcm92aWRlcnM7XG4gICAgICB2YXIgcHJvdmlkZXJJbmZvID0gZGVmYXVsdFZhbHVlKGRiUm9vdC5wcm92aWRlckluZm8sIFtdKTtcbiAgICAgIHZhciBjb3VudCA9IHByb3ZpZGVySW5mby5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gcHJvdmlkZXJJbmZvW2ldO1xuICAgICAgICB2YXIgY29weXJpZ2h0U3RyaW5nID0gcHJvdmlkZXIuY29weXJpZ2h0U3RyaW5nO1xuICAgICAgICBpZiAoZGVmaW5lZChjb3B5cmlnaHRTdHJpbmcpKSB7XG4gICAgICAgICAgcHJvdmlkZXJzW3Byb3ZpZGVyLnByb3ZpZGVySWRdID0gbmV3IENyZWRpdChjb3B5cmlnaHRTdHJpbmcudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEp1c3QgZWF0IHRoZSBlcnJvciBhbmQgdXNlIHRoZSBkZWZhdWx0IHZhbHVlcy5cbiAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIHJldHJpZXZlIFwiICsgcmVzb3VyY2UudXJsICsgXCIuIFVzaW5nIGRlZmF1bHRzLlwiKTtcbiAgICAgIHRoYXQua2V5ID0gZGVmYXVsdEtleTtcbiAgICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///19043\n')},69273:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48243);\n/* harmony import */ var _Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Check_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66553);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12572);\n/* harmony import */ var _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22832);\n/* harmony import */ var _Intersections2D_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(17980);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99417);\n/* harmony import */ var _OrientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(25405);\n/* harmony import */ var _QuantizedMeshTerrainData_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(38036);\n/* harmony import */ var _Rectangle_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(96190);\n/* harmony import */ var _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2819);\n/* harmony import */ var _TerrainData_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(99978);\n/* harmony import */ var _TerrainEncoding_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(41782);\n/* harmony import */ var _TerrainMesh_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(13758);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Terrain data for a single tile from a Google Earth Enterprise server.\n *\n * @alias GoogleEarthEnterpriseTerrainData\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {ArrayBuffer} options.buffer The buffer containing terrain data.\n * @param {Number} options.negativeAltitudeExponentBias Multiplier for negative terrain heights that are encoded as very small positive values.\n * @param {Number} options.negativeElevationThreshold Threshold for negative values\n * @param {Number} [options.childTileMask=15] A bit mask indicating which of this tile\'s four children exist.\n *                 If a child\'s bit is set, geometry will be requested for that tile as well when it\n *                 is needed.  If the bit is cleared, the child tile is not requested and geometry is\n *                 instead upsampled from the parent.  The bit values are as follows:\n *                 <table>\n *                  <tr><th>Bit Position</th><th>Bit Value</th><th>Child Tile</th></tr>\n *                  <tr><td>0</td><td>1</td><td>Southwest</td></tr>\n *                  <tr><td>1</td><td>2</td><td>Southeast</td></tr>\n *                  <tr><td>2</td><td>4</td><td>Northeast</td></tr>\n *                  <tr><td>3</td><td>8</td><td>Northwest</td></tr>\n *                 </table>\n * @param {Boolean} [options.createdByUpsampling=false] True if this instance was created by upsampling another instance;\n *                  otherwise, false.\n * @param {Credit[]} [options.credits] Array of credits for this tile.\n *\n *\n * @example\n * var buffer = ...\n * var childTileMask = ...\n * var terrainData = new Cesium.GoogleEarthEnterpriseTerrainData({\n *   buffer : heightBuffer,\n *   childTileMask : childTileMask\n * });\n *\n * @see TerrainData\n * @see HeightmapTerrainData\n * @see QuantizedMeshTerrainData\n */\nfunction GoogleEarthEnterpriseTerrainData(options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.object */ .Z.typeOf.object("options.buffer", options.buffer);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number(\n    "options.negativeAltitudeExponentBias",\n    options.negativeAltitudeExponentBias\n  );\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number(\n    "options.negativeElevationThreshold",\n    options.negativeElevationThreshold\n  );\n  //>>includeEnd(\'debug\');\n\n  this._buffer = options.buffer;\n  this._credits = options.credits;\n  this._negativeAltitudeExponentBias = options.negativeAltitudeExponentBias;\n  this._negativeElevationThreshold = options.negativeElevationThreshold;\n\n  // Convert from google layout to layout of other providers\n  // 3 2 -> 2 3\n  // 0 1 -> 0 1\n  var googleChildTileMask = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.childTileMask, 15);\n  var childTileMask = googleChildTileMask & 3; // Bottom row is identical\n  childTileMask |= googleChildTileMask & 4 ? 8 : 0; // NE\n  childTileMask |= googleChildTileMask & 8 ? 4 : 0; // NW\n\n  this._childTileMask = childTileMask;\n\n  this._createdByUpsampling = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.createdByUpsampling, false);\n\n  this._skirtHeight = undefined;\n  this._bufferType = this._buffer.constructor;\n  this._mesh = undefined;\n  this._minimumHeight = undefined;\n  this._maximumHeight = undefined;\n}\n\nObject.defineProperties(GoogleEarthEnterpriseTerrainData.prototype, {\n  /**\n   * An array of credits for this tile\n   * @memberof GoogleEarthEnterpriseTerrainData.prototype\n   * @type {Credit[]}\n   */\n  credits: {\n    get: function () {\n      return this._credits;\n    },\n  },\n  /**\n   * The water mask included in this terrain data, if any.  A water mask is a rectangular\n   * Uint8Array or image where a value of 255 indicates water and a value of 0 indicates land.\n   * Values in between 0 and 255 are allowed as well to smoothly blend between land and water.\n   * @memberof GoogleEarthEnterpriseTerrainData.prototype\n   * @type {Uint8Array|HTMLImageElement|HTMLCanvasElement}\n   */\n  waterMask: {\n    get: function () {\n      return undefined;\n    },\n  },\n});\n\nvar createMeshTaskName = "createVerticesFromGoogleEarthEnterpriseBuffer";\nvar createMeshTaskProcessorNoThrottle = new _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(createMeshTaskName);\nvar createMeshTaskProcessorThrottle = new _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(\n  createMeshTaskName,\n  _TerrainData_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].maximumAsynchronousTasks */ .Z.maximumAsynchronousTasks\n);\n\nvar nativeRectangleScratch = new _Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\nvar rectangleScratch = new _Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\n\n/**\n * Creates a {@link TerrainMesh} from this terrain data.\n *\n * @private\n *\n * @param {Object} options Object with the following properties:\n * @param {TilingScheme} options.tilingScheme The tiling scheme to which this tile belongs.\n * @param {Number} options.x The X coordinate of the tile for which to create the terrain data.\n * @param {Number} options.y The Y coordinate of the tile for which to create the terrain data.\n * @param {Number} options.level The level of the tile for which to create the terrain data.\n * @param {Number} [options.exaggeration=1.0] The scale used to exaggerate the terrain.\n * @param {Number} [options.exaggerationRelativeHeight=0.0] The height from which terrain is exaggerated.\n * @param {Boolean} [options.throttle=true] If true, indicates that this operation will need to be retried if too many asynchronous mesh creations are already in progress.\n * @returns {Promise.<TerrainMesh>|undefined} A promise for the terrain mesh, or undefined if too many\n *          asynchronous mesh creations are already in progress and the operation should\n *          be retried later.\n */\nGoogleEarthEnterpriseTerrainData.prototype.createMesh = function (options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.object */ .Z.typeOf.object("options.tilingScheme", options.tilingScheme);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("options.x", options.x);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("options.y", options.y);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("options.level", options.level);\n  //>>includeEnd(\'debug\');\n\n  var tilingScheme = options.tilingScheme;\n  var x = options.x;\n  var y = options.y;\n  var level = options.level;\n  var exaggeration = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.exaggeration, 1.0);\n  var exaggerationRelativeHeight = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    options.exaggerationRelativeHeight,\n    0.0\n  );\n  var throttle = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.throttle, true);\n\n  var ellipsoid = tilingScheme.ellipsoid;\n  tilingScheme.tileXYToNativeRectangle(x, y, level, nativeRectangleScratch);\n  tilingScheme.tileXYToRectangle(x, y, level, rectangleScratch);\n\n  // Compute the center of the tile for RTC rendering.\n  var center = ellipsoid.cartographicToCartesian(\n    _Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].center */ .Z.center(rectangleScratch)\n  );\n\n  var levelZeroMaxError = 40075.16; // From Google\'s Doc\n  var thisLevelMaxError = levelZeroMaxError / (1 << level);\n  this._skirtHeight = Math.min(thisLevelMaxError * 8.0, 1000.0);\n\n  var createMeshTaskProcessor = throttle\n    ? createMeshTaskProcessorThrottle\n    : createMeshTaskProcessorNoThrottle;\n\n  var verticesPromise = createMeshTaskProcessor.scheduleTask({\n    buffer: this._buffer,\n    nativeRectangle: nativeRectangleScratch,\n    rectangle: rectangleScratch,\n    relativeToCenter: center,\n    ellipsoid: ellipsoid,\n    skirtHeight: this._skirtHeight,\n    exaggeration: exaggeration,\n    exaggerationRelativeHeight: exaggerationRelativeHeight,\n    includeWebMercatorT: true,\n    negativeAltitudeExponentBias: this._negativeAltitudeExponentBias,\n    negativeElevationThreshold: this._negativeElevationThreshold,\n  });\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(verticesPromise)) {\n    // Postponed\n    return undefined;\n  }\n\n  var that = this;\n  return verticesPromise.then(function (result) {\n    // Clone complex result objects because the transfer from the web worker\n    // has stripped them down to JSON-style objects.\n    that._mesh = new _TerrainMesh_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z(\n      center,\n      new Float32Array(result.vertices),\n      new Uint16Array(result.indices),\n      result.indexCountWithoutSkirts,\n      result.vertexCountWithoutSkirts,\n      result.minimumHeight,\n      result.maximumHeight,\n      _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(result.boundingSphere3D),\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(result.occludeePointInScaledSpace),\n      result.numberOfAttributes,\n      _OrientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(result.orientedBoundingBox),\n      _TerrainEncoding_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].clone */ .Z.clone(result.encoding),\n      result.westIndicesSouthToNorth,\n      result.southIndicesEastToWest,\n      result.eastIndicesNorthToSouth,\n      result.northIndicesWestToEast\n    );\n\n    that._minimumHeight = result.minimumHeight;\n    that._maximumHeight = result.maximumHeight;\n\n    // Free memory received from server after mesh is created.\n    that._buffer = undefined;\n    return that._mesh;\n  });\n};\n\n/**\n * Computes the terrain height at a specified longitude and latitude.\n *\n * @param {Rectangle} rectangle The rectangle covered by this terrain data.\n * @param {Number} longitude The longitude in radians.\n * @param {Number} latitude The latitude in radians.\n * @returns {Number} The terrain height at the specified position.  If the position\n *          is outside the rectangle, this method will extrapolate the height, which is likely to be wildly\n *          incorrect for positions far outside the rectangle.\n */\nGoogleEarthEnterpriseTerrainData.prototype.interpolateHeight = function (\n  rectangle,\n  longitude,\n  latitude\n) {\n  var u = _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clamp */ .Z.clamp(\n    (longitude - rectangle.west) / rectangle.width,\n    0.0,\n    1.0\n  );\n  var v = _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clamp */ .Z.clamp(\n    (latitude - rectangle.south) / rectangle.height,\n    0.0,\n    1.0\n  );\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(this._mesh)) {\n    return interpolateHeight(this, u, v, rectangle);\n  }\n\n  return interpolateMeshHeight(this, u, v);\n};\n\nvar upsampleTaskProcessor = new _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(\n  "upsampleQuantizedTerrainMesh",\n  _TerrainData_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].maximumAsynchronousTasks */ .Z.maximumAsynchronousTasks\n);\n\n/**\n * Upsamples this terrain data for use by a descendant tile.  The resulting instance will contain a subset of the\n * height samples in this instance, interpolated if necessary.\n *\n * @param {TilingScheme} tilingScheme The tiling scheme of this terrain data.\n * @param {Number} thisX The X coordinate of this tile in the tiling scheme.\n * @param {Number} thisY The Y coordinate of this tile in the tiling scheme.\n * @param {Number} thisLevel The level of this tile in the tiling scheme.\n * @param {Number} descendantX The X coordinate within the tiling scheme of the descendant tile for which we are upsampling.\n * @param {Number} descendantY The Y coordinate within the tiling scheme of the descendant tile for which we are upsampling.\n * @param {Number} descendantLevel The level within the tiling scheme of the descendant tile for which we are upsampling.\n * @returns {Promise.<HeightmapTerrainData>|undefined} A promise for upsampled heightmap terrain data for the descendant tile,\n *          or undefined if too many asynchronous upsample operations are in progress and the request has been\n *          deferred.\n */\nGoogleEarthEnterpriseTerrainData.prototype.upsample = function (\n  tilingScheme,\n  thisX,\n  thisY,\n  thisLevel,\n  descendantX,\n  descendantY,\n  descendantLevel\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.object */ .Z.typeOf.object("tilingScheme", tilingScheme);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("thisX", thisX);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("thisY", thisY);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("thisLevel", thisLevel);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("descendantX", descendantX);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("descendantY", descendantY);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("descendantLevel", descendantLevel);\n  var levelDifference = descendantLevel - thisLevel;\n  if (levelDifference > 1) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n      "Upsampling through more than one level at a time is not currently supported."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var mesh = this._mesh;\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(this._mesh)) {\n    return undefined;\n  }\n\n  var isEastChild = thisX * 2 !== descendantX;\n  var isNorthChild = thisY * 2 === descendantY;\n\n  var ellipsoid = tilingScheme.ellipsoid;\n  var childRectangle = tilingScheme.tileXYToRectangle(\n    descendantX,\n    descendantY,\n    descendantLevel\n  );\n\n  var upsamplePromise = upsampleTaskProcessor.scheduleTask({\n    vertices: mesh.vertices,\n    indices: mesh.indices,\n    indexCountWithoutSkirts: mesh.indexCountWithoutSkirts,\n    vertexCountWithoutSkirts: mesh.vertexCountWithoutSkirts,\n    encoding: mesh.encoding,\n    minimumHeight: this._minimumHeight,\n    maximumHeight: this._maximumHeight,\n    isEastChild: isEastChild,\n    isNorthChild: isNorthChild,\n    childRectangle: childRectangle,\n    ellipsoid: ellipsoid,\n  });\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(upsamplePromise)) {\n    // Postponed\n    return undefined;\n  }\n\n  var that = this;\n  return upsamplePromise.then(function (result) {\n    var quantizedVertices = new Uint16Array(result.vertices);\n    var indicesTypedArray = _IndexDatatype_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].createTypedArray */ .Z.createTypedArray(\n      quantizedVertices.length / 3,\n      result.indices\n    );\n\n    var skirtHeight = that._skirtHeight;\n\n    // Use QuantizedMeshTerrainData since we have what we need already parsed\n    return new _QuantizedMeshTerrainData_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n      quantizedVertices: quantizedVertices,\n      indices: indicesTypedArray,\n      minimumHeight: result.minimumHeight,\n      maximumHeight: result.maximumHeight,\n      boundingSphere: _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(result.boundingSphere),\n      orientedBoundingBox: _OrientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(\n        result.orientedBoundingBox\n      ),\n      horizonOcclusionPoint: _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(result.horizonOcclusionPoint),\n      westIndices: result.westIndices,\n      southIndices: result.southIndices,\n      eastIndices: result.eastIndices,\n      northIndices: result.northIndices,\n      westSkirtHeight: skirtHeight,\n      southSkirtHeight: skirtHeight,\n      eastSkirtHeight: skirtHeight,\n      northSkirtHeight: skirtHeight,\n      childTileMask: 0,\n      createdByUpsampling: true,\n      credits: that._credits,\n    });\n  });\n};\n\n/**\n * Determines if a given child tile is available, based on the\n * {@link HeightmapTerrainData.childTileMask}.  The given child tile coordinates are assumed\n * to be one of the four children of this tile.  If non-child tile coordinates are\n * given, the availability of the southeast child tile is returned.\n *\n * @param {Number} thisX The tile X coordinate of this (the parent) tile.\n * @param {Number} thisY The tile Y coordinate of this (the parent) tile.\n * @param {Number} childX The tile X coordinate of the child tile to check for availability.\n * @param {Number} childY The tile Y coordinate of the child tile to check for availability.\n * @returns {Boolean} True if the child tile is available; otherwise, false.\n */\nGoogleEarthEnterpriseTerrainData.prototype.isChildAvailable = function (\n  thisX,\n  thisY,\n  childX,\n  childY\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("thisX", thisX);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("thisY", thisY);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("childX", childX);\n  _Check_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].typeOf.number */ .Z.typeOf.number("childY", childY);\n  //>>includeEnd(\'debug\');\n\n  var bitNumber = 2; // northwest child\n  if (childX !== thisX * 2) {\n    ++bitNumber; // east child\n  }\n  if (childY !== thisY * 2) {\n    bitNumber -= 2; // south child\n  }\n\n  return (this._childTileMask & (1 << bitNumber)) !== 0;\n};\n\n/**\n * Gets a value indicating whether or not this terrain data was created by upsampling lower resolution\n * terrain data.  If this value is false, the data was obtained from some other source, such\n * as by downloading it from a remote server.  This method should return true for instances\n * returned from a call to {@link HeightmapTerrainData#upsample}.\n *\n * @returns {Boolean} True if this instance was created by upsampling; otherwise, false.\n */\nGoogleEarthEnterpriseTerrainData.prototype.wasCreatedByUpsampling = function () {\n  return this._createdByUpsampling;\n};\n\nvar texCoordScratch0 = new _Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar texCoordScratch1 = new _Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar texCoordScratch2 = new _Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar barycentricCoordinateScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nfunction interpolateMeshHeight(terrainData, u, v) {\n  var mesh = terrainData._mesh;\n  var vertices = mesh.vertices;\n  var encoding = mesh.encoding;\n  var indices = mesh.indices;\n\n  for (var i = 0, len = indices.length; i < len; i += 3) {\n    var i0 = indices[i];\n    var i1 = indices[i + 1];\n    var i2 = indices[i + 2];\n\n    var uv0 = encoding.decodeTextureCoordinates(vertices, i0, texCoordScratch0);\n    var uv1 = encoding.decodeTextureCoordinates(vertices, i1, texCoordScratch1);\n    var uv2 = encoding.decodeTextureCoordinates(vertices, i2, texCoordScratch2);\n\n    var barycentric = _Intersections2D_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].computeBarycentricCoordinates */ .Z.computeBarycentricCoordinates(\n      u,\n      v,\n      uv0.x,\n      uv0.y,\n      uv1.x,\n      uv1.y,\n      uv2.x,\n      uv2.y,\n      barycentricCoordinateScratch\n    );\n    if (\n      barycentric.x >= -1e-15 &&\n      barycentric.y >= -1e-15 &&\n      barycentric.z >= -1e-15\n    ) {\n      var h0 = encoding.decodeHeight(vertices, i0);\n      var h1 = encoding.decodeHeight(vertices, i1);\n      var h2 = encoding.decodeHeight(vertices, i2);\n      return barycentric.x * h0 + barycentric.y * h1 + barycentric.z * h2;\n    }\n  }\n\n  // Position does not lie in any triangle in this mesh.\n  return undefined;\n}\n\nvar sizeOfUint16 = Uint16Array.BYTES_PER_ELEMENT;\nvar sizeOfUint32 = Uint32Array.BYTES_PER_ELEMENT;\nvar sizeOfInt32 = Int32Array.BYTES_PER_ELEMENT;\nvar sizeOfFloat = Float32Array.BYTES_PER_ELEMENT;\nvar sizeOfDouble = Float64Array.BYTES_PER_ELEMENT;\n\nfunction interpolateHeight(terrainData, u, v, rectangle) {\n  var buffer = terrainData._buffer;\n  var quad = 0; // SW\n  var uStart = 0.0;\n  var vStart = 0.0;\n  if (v > 0.5) {\n    // Upper row\n    if (u > 0.5) {\n      // NE\n      quad = 2;\n      uStart = 0.5;\n    } else {\n      // NW\n      quad = 3;\n    }\n    vStart = 0.5;\n  } else if (u > 0.5) {\n    // SE\n    quad = 1;\n    uStart = 0.5;\n  }\n\n  var dv = new DataView(buffer);\n  var offset = 0;\n  for (var q = 0; q < quad; ++q) {\n    offset += dv.getUint32(offset, true);\n    offset += sizeOfUint32;\n  }\n  offset += sizeOfUint32; // Skip length of quad\n  offset += 2 * sizeOfDouble; // Skip origin\n\n  // Read sizes\n  var xSize = _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toRadians */ .Z.toRadians(dv.getFloat64(offset, true) * 180.0);\n  offset += sizeOfDouble;\n  var ySize = _Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toRadians */ .Z.toRadians(dv.getFloat64(offset, true) * 180.0);\n  offset += sizeOfDouble;\n\n  // Samples per quad\n  var xScale = rectangle.width / xSize / 2;\n  var yScale = rectangle.height / ySize / 2;\n\n  // Number of points\n  var numPoints = dv.getInt32(offset, true);\n  offset += sizeOfInt32;\n\n  // Number of faces\n  var numIndices = dv.getInt32(offset, true) * 3;\n  offset += sizeOfInt32;\n\n  offset += sizeOfInt32; // Skip Level\n\n  var uBuffer = new Array(numPoints);\n  var vBuffer = new Array(numPoints);\n  var heights = new Array(numPoints);\n  var i;\n  for (i = 0; i < numPoints; ++i) {\n    uBuffer[i] = uStart + dv.getUint8(offset++) * xScale;\n    vBuffer[i] = vStart + dv.getUint8(offset++) * yScale;\n\n    // Height is stored in units of (1/EarthRadius) or (1/6371010.0)\n    heights[i] = dv.getFloat32(offset, true) * 6371010.0;\n    offset += sizeOfFloat;\n  }\n\n  var indices = new Array(numIndices);\n  for (i = 0; i < numIndices; ++i) {\n    indices[i] = dv.getUint16(offset, true);\n    offset += sizeOfUint16;\n  }\n\n  for (i = 0; i < numIndices; i += 3) {\n    var i0 = indices[i];\n    var i1 = indices[i + 1];\n    var i2 = indices[i + 2];\n\n    var u0 = uBuffer[i0];\n    var u1 = uBuffer[i1];\n    var u2 = uBuffer[i2];\n\n    var v0 = vBuffer[i0];\n    var v1 = vBuffer[i1];\n    var v2 = vBuffer[i2];\n\n    var barycentric = _Intersections2D_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].computeBarycentricCoordinates */ .Z.computeBarycentricCoordinates(\n      u,\n      v,\n      u0,\n      v0,\n      u1,\n      v1,\n      u2,\n      v2,\n      barycentricCoordinateScratch\n    );\n    if (\n      barycentric.x >= -1e-15 &&\n      barycentric.y >= -1e-15 &&\n      barycentric.z >= -1e-15\n    ) {\n      return (\n        barycentric.x * heights[i0] +\n        barycentric.y * heights[i1] +\n        barycentric.z * heights[i2]\n      );\n    }\n  }\n\n  // Position does not lie in any triangle in this mesh.\n  return undefined;\n}\n/* harmony default export */ __webpack_exports__["Z"] = (GoogleEarthEnterpriseTerrainData);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjkyNzMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDUjtBQUNBO0FBQ1Y7QUFDYztBQUNWO0FBQ2M7QUFDRjtBQUNJO0FBQ2hCO0FBQ3dCO0FBQ1U7QUFDOUI7QUFDUTtBQUNKO0FBQ1E7QUFDUjs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsYUFBYTtBQUN4QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUVBQVksVUFBVSwyRkFBeUI7QUFDM0Q7QUFDQSxFQUFFLHNGQUFtQjtBQUNyQixFQUFFLHNGQUFtQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxFQUFFLHNGQUFtQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscUVBQVk7QUFDeEMsK0NBQStDO0FBQy9DLG9EQUFvRDtBQUNwRCxvREFBb0Q7O0FBRXBEOztBQUVBLDhCQUE4QixxRUFBWTs7QUFFMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0EsNENBQTRDLG1FQUFhO0FBQ3pELDBDQUEwQyxtRUFBYTtBQUN2RDtBQUNBLEVBQUUsbUhBQW9DO0FBQ3RDOztBQUVBLGlDQUFpQywrREFBUztBQUMxQywyQkFBMkIsK0RBQVM7O0FBRXBDO0FBQ0EsY0FBYyxtQkFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsY0FBYztBQUN6QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixhQUFhLGlDQUFpQztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUVBQVksVUFBVSwyRkFBeUI7O0FBRTNEO0FBQ0EsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscUVBQVk7QUFDakMsbUNBQW1DLHFFQUFZO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxRUFBWTs7QUFFN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJLDZFQUFnQjtBQUNwQjs7QUFFQSxvQ0FBb0M7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxPQUFPLGlFQUFPO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGlFQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwrRUFBb0I7QUFDMUIsTUFBTSwyRUFBZ0I7QUFDdEI7QUFDQSxNQUFNLG9GQUF5QjtBQUMvQixNQUFNLGlGQUFxQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsV0FBVztBQUN0QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxRUFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFFQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPLGlFQUFPO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdDQUFnQyxtRUFBYTtBQUM3QztBQUNBLEVBQUUsbUhBQW9DO0FBQ3RDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsMENBQTBDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSxzRkFBbUI7QUFDckI7QUFDQTtBQUNBLGNBQWMsbUVBQWM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPLGlFQUFPO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILE9BQU8saUVBQU87QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9HQUE4QjtBQUMxRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxlQUFlLDhFQUF3QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrRUFBb0I7QUFDMUMsMkJBQTJCLG9GQUF5QjtBQUNwRDtBQUNBO0FBQ0EsNkJBQTZCLDJFQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsSUFBSSx5Q0FBeUM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsU0FBUyxxQ0FBcUM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsc0ZBQW1CO0FBQ3JCLEVBQUUsc0ZBQW1CO0FBQ3JCLEVBQUUsc0ZBQW1CO0FBQ3JCLEVBQUUsc0ZBQW1CO0FBQ3JCOztBQUVBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0NBQW9DO0FBQ2hFO0FBQ0EsYUFBYSxTQUFTLGlEQUFpRDtBQUN2RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkIsK0RBQVU7QUFDckMsMkJBQTJCLCtEQUFVO0FBQ3JDLDJCQUEyQiwrREFBVTtBQUNyQyx1Q0FBdUMsK0RBQVU7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDLFNBQVM7QUFDakQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsZ0lBQTZDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixVQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQiw4QkFBOEI7O0FBRTlCO0FBQ0EsY0FBYyw2RUFBb0I7QUFDbEM7QUFDQSxjQUFjLDZFQUFvQjtBQUNsQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUI7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjLGdCQUFnQjtBQUM5QjtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLGdJQUE2QztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxnQ0FBZ0MsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9Db3JlL0dvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5EYXRhLmpzPzk5YjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJvdW5kaW5nU3BoZXJlIGZyb20gXCIuL0JvdW5kaW5nU3BoZXJlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4vQ2hlY2suanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4vZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4vRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBJbmRleERhdGF0eXBlIGZyb20gXCIuL0luZGV4RGF0YXR5cGUuanNcIjtcbmltcG9ydCBJbnRlcnNlY3Rpb25zMkQgZnJvbSBcIi4vSW50ZXJzZWN0aW9uczJELmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi9NYXRoLmpzXCI7XG5pbXBvcnQgT3JpZW50ZWRCb3VuZGluZ0JveCBmcm9tIFwiLi9PcmllbnRlZEJvdW5kaW5nQm94LmpzXCI7XG5pbXBvcnQgUXVhbnRpemVkTWVzaFRlcnJhaW5EYXRhIGZyb20gXCIuL1F1YW50aXplZE1lc2hUZXJyYWluRGF0YS5qc1wiO1xuaW1wb3J0IFJlY3RhbmdsZSBmcm9tIFwiLi9SZWN0YW5nbGUuanNcIjtcbmltcG9ydCBUYXNrUHJvY2Vzc29yIGZyb20gXCIuL1Rhc2tQcm9jZXNzb3IuanNcIjtcbmltcG9ydCBUZXJyYWluRGF0YSBmcm9tIFwiLi9UZXJyYWluRGF0YS5qc1wiO1xuaW1wb3J0IFRlcnJhaW5FbmNvZGluZyBmcm9tIFwiLi9UZXJyYWluRW5jb2RpbmcuanNcIjtcbmltcG9ydCBUZXJyYWluTWVzaCBmcm9tIFwiLi9UZXJyYWluTWVzaC5qc1wiO1xuXG4vKipcbiAqIFRlcnJhaW4gZGF0YSBmb3IgYSBzaW5nbGUgdGlsZSBmcm9tIGEgR29vZ2xlIEVhcnRoIEVudGVycHJpc2Ugc2VydmVyLlxuICpcbiAqIEBhbGlhcyBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluRGF0YVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gb3B0aW9ucy5idWZmZXIgVGhlIGJ1ZmZlciBjb250YWluaW5nIHRlcnJhaW4gZGF0YS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLm5lZ2F0aXZlQWx0aXR1ZGVFeHBvbmVudEJpYXMgTXVsdGlwbGllciBmb3IgbmVnYXRpdmUgdGVycmFpbiBoZWlnaHRzIHRoYXQgYXJlIGVuY29kZWQgYXMgdmVyeSBzbWFsbCBwb3NpdGl2ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5uZWdhdGl2ZUVsZXZhdGlvblRocmVzaG9sZCBUaHJlc2hvbGQgZm9yIG5lZ2F0aXZlIHZhbHVlc1xuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNoaWxkVGlsZU1hc2s9MTVdIEEgYml0IG1hc2sgaW5kaWNhdGluZyB3aGljaCBvZiB0aGlzIHRpbGUncyBmb3VyIGNoaWxkcmVuIGV4aXN0LlxuICogICAgICAgICAgICAgICAgIElmIGEgY2hpbGQncyBiaXQgaXMgc2V0LCBnZW9tZXRyeSB3aWxsIGJlIHJlcXVlc3RlZCBmb3IgdGhhdCB0aWxlIGFzIHdlbGwgd2hlbiBpdFxuICogICAgICAgICAgICAgICAgIGlzIG5lZWRlZC4gIElmIHRoZSBiaXQgaXMgY2xlYXJlZCwgdGhlIGNoaWxkIHRpbGUgaXMgbm90IHJlcXVlc3RlZCBhbmQgZ2VvbWV0cnkgaXNcbiAqICAgICAgICAgICAgICAgICBpbnN0ZWFkIHVwc2FtcGxlZCBmcm9tIHRoZSBwYXJlbnQuICBUaGUgYml0IHZhbHVlcyBhcmUgYXMgZm9sbG93czpcbiAqICAgICAgICAgICAgICAgICA8dGFibGU+XG4gKiAgICAgICAgICAgICAgICAgIDx0cj48dGg+Qml0IFBvc2l0aW9uPC90aD48dGg+Qml0IFZhbHVlPC90aD48dGg+Q2hpbGQgVGlsZTwvdGg+PC90cj5cbiAqICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4wPC90ZD48dGQ+MTwvdGQ+PHRkPlNvdXRod2VzdDwvdGQ+PC90cj5cbiAqICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4xPC90ZD48dGQ+MjwvdGQ+PHRkPlNvdXRoZWFzdDwvdGQ+PC90cj5cbiAqICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4yPC90ZD48dGQ+NDwvdGQ+PHRkPk5vcnRoZWFzdDwvdGQ+PC90cj5cbiAqICAgICAgICAgICAgICAgICAgPHRyPjx0ZD4zPC90ZD48dGQ+ODwvdGQ+PHRkPk5vcnRod2VzdDwvdGQ+PC90cj5cbiAqICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jcmVhdGVkQnlVcHNhbXBsaW5nPWZhbHNlXSBUcnVlIGlmIHRoaXMgaW5zdGFuY2Ugd2FzIGNyZWF0ZWQgYnkgdXBzYW1wbGluZyBhbm90aGVyIGluc3RhbmNlO1xuICogICAgICAgICAgICAgICAgICBvdGhlcndpc2UsIGZhbHNlLlxuICogQHBhcmFtIHtDcmVkaXRbXX0gW29wdGlvbnMuY3JlZGl0c10gQXJyYXkgb2YgY3JlZGl0cyBmb3IgdGhpcyB0aWxlLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIGJ1ZmZlciA9IC4uLlxuICogdmFyIGNoaWxkVGlsZU1hc2sgPSAuLi5cbiAqIHZhciB0ZXJyYWluRGF0YSA9IG5ldyBDZXNpdW0uR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpbkRhdGEoe1xuICogICBidWZmZXIgOiBoZWlnaHRCdWZmZXIsXG4gKiAgIGNoaWxkVGlsZU1hc2sgOiBjaGlsZFRpbGVNYXNrXG4gKiB9KTtcbiAqXG4gKiBAc2VlIFRlcnJhaW5EYXRhXG4gKiBAc2VlIEhlaWdodG1hcFRlcnJhaW5EYXRhXG4gKiBAc2VlIFF1YW50aXplZE1lc2hUZXJyYWluRGF0YVxuICovXG5mdW5jdGlvbiBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluRGF0YShvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmJ1ZmZlclwiLCBvcHRpb25zLmJ1ZmZlcik7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXG4gICAgXCJvcHRpb25zLm5lZ2F0aXZlQWx0aXR1ZGVFeHBvbmVudEJpYXNcIixcbiAgICBvcHRpb25zLm5lZ2F0aXZlQWx0aXR1ZGVFeHBvbmVudEJpYXNcbiAgKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcbiAgICBcIm9wdGlvbnMubmVnYXRpdmVFbGV2YXRpb25UaHJlc2hvbGRcIixcbiAgICBvcHRpb25zLm5lZ2F0aXZlRWxldmF0aW9uVGhyZXNob2xkXG4gICk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX2J1ZmZlciA9IG9wdGlvbnMuYnVmZmVyO1xuICB0aGlzLl9jcmVkaXRzID0gb3B0aW9ucy5jcmVkaXRzO1xuICB0aGlzLl9uZWdhdGl2ZUFsdGl0dWRlRXhwb25lbnRCaWFzID0gb3B0aW9ucy5uZWdhdGl2ZUFsdGl0dWRlRXhwb25lbnRCaWFzO1xuICB0aGlzLl9uZWdhdGl2ZUVsZXZhdGlvblRocmVzaG9sZCA9IG9wdGlvbnMubmVnYXRpdmVFbGV2YXRpb25UaHJlc2hvbGQ7XG5cbiAgLy8gQ29udmVydCBmcm9tIGdvb2dsZSBsYXlvdXQgdG8gbGF5b3V0IG9mIG90aGVyIHByb3ZpZGVyc1xuICAvLyAzIDIgLT4gMiAzXG4gIC8vIDAgMSAtPiAwIDFcbiAgdmFyIGdvb2dsZUNoaWxkVGlsZU1hc2sgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5jaGlsZFRpbGVNYXNrLCAxNSk7XG4gIHZhciBjaGlsZFRpbGVNYXNrID0gZ29vZ2xlQ2hpbGRUaWxlTWFzayAmIDM7IC8vIEJvdHRvbSByb3cgaXMgaWRlbnRpY2FsXG4gIGNoaWxkVGlsZU1hc2sgfD0gZ29vZ2xlQ2hpbGRUaWxlTWFzayAmIDQgPyA4IDogMDsgLy8gTkVcbiAgY2hpbGRUaWxlTWFzayB8PSBnb29nbGVDaGlsZFRpbGVNYXNrICYgOCA/IDQgOiAwOyAvLyBOV1xuXG4gIHRoaXMuX2NoaWxkVGlsZU1hc2sgPSBjaGlsZFRpbGVNYXNrO1xuXG4gIHRoaXMuX2NyZWF0ZWRCeVVwc2FtcGxpbmcgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5jcmVhdGVkQnlVcHNhbXBsaW5nLCBmYWxzZSk7XG5cbiAgdGhpcy5fc2tpcnRIZWlnaHQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2J1ZmZlclR5cGUgPSB0aGlzLl9idWZmZXIuY29uc3RydWN0b3I7XG4gIHRoaXMuX21lc2ggPSB1bmRlZmluZWQ7XG4gIHRoaXMuX21pbmltdW1IZWlnaHQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX21heGltdW1IZWlnaHQgPSB1bmRlZmluZWQ7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5EYXRhLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogQW4gYXJyYXkgb2YgY3JlZGl0cyBmb3IgdGhpcyB0aWxlXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluRGF0YS5wcm90b3R5cGVcbiAgICogQHR5cGUge0NyZWRpdFtdfVxuICAgKi9cbiAgY3JlZGl0czoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NyZWRpdHM7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIFRoZSB3YXRlciBtYXNrIGluY2x1ZGVkIGluIHRoaXMgdGVycmFpbiBkYXRhLCBpZiBhbnkuICBBIHdhdGVyIG1hc2sgaXMgYSByZWN0YW5ndWxhclxuICAgKiBVaW50OEFycmF5IG9yIGltYWdlIHdoZXJlIGEgdmFsdWUgb2YgMjU1IGluZGljYXRlcyB3YXRlciBhbmQgYSB2YWx1ZSBvZiAwIGluZGljYXRlcyBsYW5kLlxuICAgKiBWYWx1ZXMgaW4gYmV0d2VlbiAwIGFuZCAyNTUgYXJlIGFsbG93ZWQgYXMgd2VsbCB0byBzbW9vdGhseSBibGVuZCBiZXR3ZWVuIGxhbmQgYW5kIHdhdGVyLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpbkRhdGEucHJvdG90eXBlXG4gICAqIEB0eXBlIHtVaW50OEFycmF5fEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAqL1xuICB3YXRlck1hc2s6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG52YXIgY3JlYXRlTWVzaFRhc2tOYW1lID0gXCJjcmVhdGVWZXJ0aWNlc0Zyb21Hb29nbGVFYXJ0aEVudGVycHJpc2VCdWZmZXJcIjtcbnZhciBjcmVhdGVNZXNoVGFza1Byb2Nlc3Nvck5vVGhyb3R0bGUgPSBuZXcgVGFza1Byb2Nlc3NvcihjcmVhdGVNZXNoVGFza05hbWUpO1xudmFyIGNyZWF0ZU1lc2hUYXNrUHJvY2Vzc29yVGhyb3R0bGUgPSBuZXcgVGFza1Byb2Nlc3NvcihcbiAgY3JlYXRlTWVzaFRhc2tOYW1lLFxuICBUZXJyYWluRGF0YS5tYXhpbXVtQXN5bmNocm9ub3VzVGFza3Ncbik7XG5cbnZhciBuYXRpdmVSZWN0YW5nbGVTY3JhdGNoID0gbmV3IFJlY3RhbmdsZSgpO1xudmFyIHJlY3RhbmdsZVNjcmF0Y2ggPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBUZXJyYWluTWVzaH0gZnJvbSB0aGlzIHRlcnJhaW4gZGF0YS5cbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7VGlsaW5nU2NoZW1lfSBvcHRpb25zLnRpbGluZ1NjaGVtZSBUaGUgdGlsaW5nIHNjaGVtZSB0byB3aGljaCB0aGlzIHRpbGUgYmVsb25ncy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnggVGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgdGlsZSBmb3Igd2hpY2ggdG8gY3JlYXRlIHRoZSB0ZXJyYWluIGRhdGEuXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy55IFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHRpbGUgZm9yIHdoaWNoIHRvIGNyZWF0ZSB0aGUgdGVycmFpbiBkYXRhLlxuICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMubGV2ZWwgVGhlIGxldmVsIG9mIHRoZSB0aWxlIGZvciB3aGljaCB0byBjcmVhdGUgdGhlIHRlcnJhaW4gZGF0YS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5leGFnZ2VyYXRpb249MS4wXSBUaGUgc2NhbGUgdXNlZCB0byBleGFnZ2VyYXRlIHRoZSB0ZXJyYWluLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0PTAuMF0gVGhlIGhlaWdodCBmcm9tIHdoaWNoIHRlcnJhaW4gaXMgZXhhZ2dlcmF0ZWQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnRocm90dGxlPXRydWVdIElmIHRydWUsIGluZGljYXRlcyB0aGF0IHRoaXMgb3BlcmF0aW9uIHdpbGwgbmVlZCB0byBiZSByZXRyaWVkIGlmIHRvbyBtYW55IGFzeW5jaHJvbm91cyBtZXNoIGNyZWF0aW9ucyBhcmUgYWxyZWFkeSBpbiBwcm9ncmVzcy5cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxUZXJyYWluTWVzaD58dW5kZWZpbmVkfSBBIHByb21pc2UgZm9yIHRoZSB0ZXJyYWluIG1lc2gsIG9yIHVuZGVmaW5lZCBpZiB0b28gbWFueVxuICogICAgICAgICAgYXN5bmNocm9ub3VzIG1lc2ggY3JlYXRpb25zIGFyZSBhbHJlYWR5IGluIHByb2dyZXNzIGFuZCB0aGUgb3BlcmF0aW9uIHNob3VsZFxuICogICAgICAgICAgYmUgcmV0cmllZCBsYXRlci5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpbkRhdGEucHJvdG90eXBlLmNyZWF0ZU1lc2ggPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLnRpbGluZ1NjaGVtZVwiLCBvcHRpb25zLnRpbGluZ1NjaGVtZSk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLnhcIiwgb3B0aW9ucy54KTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcIm9wdGlvbnMueVwiLCBvcHRpb25zLnkpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwib3B0aW9ucy5sZXZlbFwiLCBvcHRpb25zLmxldmVsKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHRpbGluZ1NjaGVtZSA9IG9wdGlvbnMudGlsaW5nU2NoZW1lO1xuICB2YXIgeCA9IG9wdGlvbnMueDtcbiAgdmFyIHkgPSBvcHRpb25zLnk7XG4gIHZhciBsZXZlbCA9IG9wdGlvbnMubGV2ZWw7XG4gIHZhciBleGFnZ2VyYXRpb24gPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5leGFnZ2VyYXRpb24sIDEuMCk7XG4gIHZhciBleGFnZ2VyYXRpb25SZWxhdGl2ZUhlaWdodCA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0LFxuICAgIDAuMFxuICApO1xuICB2YXIgdGhyb3R0bGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy50aHJvdHRsZSwgdHJ1ZSk7XG5cbiAgdmFyIGVsbGlwc29pZCA9IHRpbGluZ1NjaGVtZS5lbGxpcHNvaWQ7XG4gIHRpbGluZ1NjaGVtZS50aWxlWFlUb05hdGl2ZVJlY3RhbmdsZSh4LCB5LCBsZXZlbCwgbmF0aXZlUmVjdGFuZ2xlU2NyYXRjaCk7XG4gIHRpbGluZ1NjaGVtZS50aWxlWFlUb1JlY3RhbmdsZSh4LCB5LCBsZXZlbCwgcmVjdGFuZ2xlU2NyYXRjaCk7XG5cbiAgLy8gQ29tcHV0ZSB0aGUgY2VudGVyIG9mIHRoZSB0aWxlIGZvciBSVEMgcmVuZGVyaW5nLlxuICB2YXIgY2VudGVyID0gZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKFxuICAgIFJlY3RhbmdsZS5jZW50ZXIocmVjdGFuZ2xlU2NyYXRjaClcbiAgKTtcblxuICB2YXIgbGV2ZWxaZXJvTWF4RXJyb3IgPSA0MDA3NS4xNjsgLy8gRnJvbSBHb29nbGUncyBEb2NcbiAgdmFyIHRoaXNMZXZlbE1heEVycm9yID0gbGV2ZWxaZXJvTWF4RXJyb3IgLyAoMSA8PCBsZXZlbCk7XG4gIHRoaXMuX3NraXJ0SGVpZ2h0ID0gTWF0aC5taW4odGhpc0xldmVsTWF4RXJyb3IgKiA4LjAsIDEwMDAuMCk7XG5cbiAgdmFyIGNyZWF0ZU1lc2hUYXNrUHJvY2Vzc29yID0gdGhyb3R0bGVcbiAgICA/IGNyZWF0ZU1lc2hUYXNrUHJvY2Vzc29yVGhyb3R0bGVcbiAgICA6IGNyZWF0ZU1lc2hUYXNrUHJvY2Vzc29yTm9UaHJvdHRsZTtcblxuICB2YXIgdmVydGljZXNQcm9taXNlID0gY3JlYXRlTWVzaFRhc2tQcm9jZXNzb3Iuc2NoZWR1bGVUYXNrKHtcbiAgICBidWZmZXI6IHRoaXMuX2J1ZmZlcixcbiAgICBuYXRpdmVSZWN0YW5nbGU6IG5hdGl2ZVJlY3RhbmdsZVNjcmF0Y2gsXG4gICAgcmVjdGFuZ2xlOiByZWN0YW5nbGVTY3JhdGNoLFxuICAgIHJlbGF0aXZlVG9DZW50ZXI6IGNlbnRlcixcbiAgICBlbGxpcHNvaWQ6IGVsbGlwc29pZCxcbiAgICBza2lydEhlaWdodDogdGhpcy5fc2tpcnRIZWlnaHQsXG4gICAgZXhhZ2dlcmF0aW9uOiBleGFnZ2VyYXRpb24sXG4gICAgZXhhZ2dlcmF0aW9uUmVsYXRpdmVIZWlnaHQ6IGV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0LFxuICAgIGluY2x1ZGVXZWJNZXJjYXRvclQ6IHRydWUsXG4gICAgbmVnYXRpdmVBbHRpdHVkZUV4cG9uZW50QmlhczogdGhpcy5fbmVnYXRpdmVBbHRpdHVkZUV4cG9uZW50QmlhcyxcbiAgICBuZWdhdGl2ZUVsZXZhdGlvblRocmVzaG9sZDogdGhpcy5fbmVnYXRpdmVFbGV2YXRpb25UaHJlc2hvbGQsXG4gIH0pO1xuXG4gIGlmICghZGVmaW5lZCh2ZXJ0aWNlc1Byb21pc2UpKSB7XG4gICAgLy8gUG9zdHBvbmVkXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgcmV0dXJuIHZlcnRpY2VzUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAvLyBDbG9uZSBjb21wbGV4IHJlc3VsdCBvYmplY3RzIGJlY2F1c2UgdGhlIHRyYW5zZmVyIGZyb20gdGhlIHdlYiB3b3JrZXJcbiAgICAvLyBoYXMgc3RyaXBwZWQgdGhlbSBkb3duIHRvIEpTT04tc3R5bGUgb2JqZWN0cy5cbiAgICB0aGF0Ll9tZXNoID0gbmV3IFRlcnJhaW5NZXNoKFxuICAgICAgY2VudGVyLFxuICAgICAgbmV3IEZsb2F0MzJBcnJheShyZXN1bHQudmVydGljZXMpLFxuICAgICAgbmV3IFVpbnQxNkFycmF5KHJlc3VsdC5pbmRpY2VzKSxcbiAgICAgIHJlc3VsdC5pbmRleENvdW50V2l0aG91dFNraXJ0cyxcbiAgICAgIHJlc3VsdC52ZXJ0ZXhDb3VudFdpdGhvdXRTa2lydHMsXG4gICAgICByZXN1bHQubWluaW11bUhlaWdodCxcbiAgICAgIHJlc3VsdC5tYXhpbXVtSGVpZ2h0LFxuICAgICAgQm91bmRpbmdTcGhlcmUuY2xvbmUocmVzdWx0LmJvdW5kaW5nU3BoZXJlM0QpLFxuICAgICAgQ2FydGVzaWFuMy5jbG9uZShyZXN1bHQub2NjbHVkZWVQb2ludEluU2NhbGVkU3BhY2UpLFxuICAgICAgcmVzdWx0Lm51bWJlck9mQXR0cmlidXRlcyxcbiAgICAgIE9yaWVudGVkQm91bmRpbmdCb3guY2xvbmUocmVzdWx0Lm9yaWVudGVkQm91bmRpbmdCb3gpLFxuICAgICAgVGVycmFpbkVuY29kaW5nLmNsb25lKHJlc3VsdC5lbmNvZGluZyksXG4gICAgICByZXN1bHQud2VzdEluZGljZXNTb3V0aFRvTm9ydGgsXG4gICAgICByZXN1bHQuc291dGhJbmRpY2VzRWFzdFRvV2VzdCxcbiAgICAgIHJlc3VsdC5lYXN0SW5kaWNlc05vcnRoVG9Tb3V0aCxcbiAgICAgIHJlc3VsdC5ub3J0aEluZGljZXNXZXN0VG9FYXN0XG4gICAgKTtcblxuICAgIHRoYXQuX21pbmltdW1IZWlnaHQgPSByZXN1bHQubWluaW11bUhlaWdodDtcbiAgICB0aGF0Ll9tYXhpbXVtSGVpZ2h0ID0gcmVzdWx0Lm1heGltdW1IZWlnaHQ7XG5cbiAgICAvLyBGcmVlIG1lbW9yeSByZWNlaXZlZCBmcm9tIHNlcnZlciBhZnRlciBtZXNoIGlzIGNyZWF0ZWQuXG4gICAgdGhhdC5fYnVmZmVyID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiB0aGF0Ll9tZXNoO1xuICB9KTtcbn07XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIHRlcnJhaW4gaGVpZ2h0IGF0IGEgc3BlY2lmaWVkIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUuXG4gKlxuICogQHBhcmFtIHtSZWN0YW5nbGV9IHJlY3RhbmdsZSBUaGUgcmVjdGFuZ2xlIGNvdmVyZWQgYnkgdGhpcyB0ZXJyYWluIGRhdGEuXG4gKiBAcGFyYW0ge051bWJlcn0gbG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgaW4gcmFkaWFucy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsYXRpdHVkZSBUaGUgbGF0aXR1ZGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSB0ZXJyYWluIGhlaWdodCBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uLiAgSWYgdGhlIHBvc2l0aW9uXG4gKiAgICAgICAgICBpcyBvdXRzaWRlIHRoZSByZWN0YW5nbGUsIHRoaXMgbWV0aG9kIHdpbGwgZXh0cmFwb2xhdGUgdGhlIGhlaWdodCwgd2hpY2ggaXMgbGlrZWx5IHRvIGJlIHdpbGRseVxuICogICAgICAgICAgaW5jb3JyZWN0IGZvciBwb3NpdGlvbnMgZmFyIG91dHNpZGUgdGhlIHJlY3RhbmdsZS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpbkRhdGEucHJvdG90eXBlLmludGVycG9sYXRlSGVpZ2h0ID0gZnVuY3Rpb24gKFxuICByZWN0YW5nbGUsXG4gIGxvbmdpdHVkZSxcbiAgbGF0aXR1ZGVcbikge1xuICB2YXIgdSA9IENlc2l1bU1hdGguY2xhbXAoXG4gICAgKGxvbmdpdHVkZSAtIHJlY3RhbmdsZS53ZXN0KSAvIHJlY3RhbmdsZS53aWR0aCxcbiAgICAwLjAsXG4gICAgMS4wXG4gICk7XG4gIHZhciB2ID0gQ2VzaXVtTWF0aC5jbGFtcChcbiAgICAobGF0aXR1ZGUgLSByZWN0YW5nbGUuc291dGgpIC8gcmVjdGFuZ2xlLmhlaWdodCxcbiAgICAwLjAsXG4gICAgMS4wXG4gICk7XG5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX21lc2gpKSB7XG4gICAgcmV0dXJuIGludGVycG9sYXRlSGVpZ2h0KHRoaXMsIHUsIHYsIHJlY3RhbmdsZSk7XG4gIH1cblxuICByZXR1cm4gaW50ZXJwb2xhdGVNZXNoSGVpZ2h0KHRoaXMsIHUsIHYpO1xufTtcblxudmFyIHVwc2FtcGxlVGFza1Byb2Nlc3NvciA9IG5ldyBUYXNrUHJvY2Vzc29yKFxuICBcInVwc2FtcGxlUXVhbnRpemVkVGVycmFpbk1lc2hcIixcbiAgVGVycmFpbkRhdGEubWF4aW11bUFzeW5jaHJvbm91c1Rhc2tzXG4pO1xuXG4vKipcbiAqIFVwc2FtcGxlcyB0aGlzIHRlcnJhaW4gZGF0YSBmb3IgdXNlIGJ5IGEgZGVzY2VuZGFudCB0aWxlLiAgVGhlIHJlc3VsdGluZyBpbnN0YW5jZSB3aWxsIGNvbnRhaW4gYSBzdWJzZXQgb2YgdGhlXG4gKiBoZWlnaHQgc2FtcGxlcyBpbiB0aGlzIGluc3RhbmNlLCBpbnRlcnBvbGF0ZWQgaWYgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7VGlsaW5nU2NoZW1lfSB0aWxpbmdTY2hlbWUgVGhlIHRpbGluZyBzY2hlbWUgb2YgdGhpcyB0ZXJyYWluIGRhdGEuXG4gKiBAcGFyYW0ge051bWJlcn0gdGhpc1ggVGhlIFggY29vcmRpbmF0ZSBvZiB0aGlzIHRpbGUgaW4gdGhlIHRpbGluZyBzY2hlbWUuXG4gKiBAcGFyYW0ge051bWJlcn0gdGhpc1kgVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGlzIHRpbGUgaW4gdGhlIHRpbGluZyBzY2hlbWUuXG4gKiBAcGFyYW0ge051bWJlcn0gdGhpc0xldmVsIFRoZSBsZXZlbCBvZiB0aGlzIHRpbGUgaW4gdGhlIHRpbGluZyBzY2hlbWUuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVzY2VuZGFudFggVGhlIFggY29vcmRpbmF0ZSB3aXRoaW4gdGhlIHRpbGluZyBzY2hlbWUgb2YgdGhlIGRlc2NlbmRhbnQgdGlsZSBmb3Igd2hpY2ggd2UgYXJlIHVwc2FtcGxpbmcuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVzY2VuZGFudFkgVGhlIFkgY29vcmRpbmF0ZSB3aXRoaW4gdGhlIHRpbGluZyBzY2hlbWUgb2YgdGhlIGRlc2NlbmRhbnQgdGlsZSBmb3Igd2hpY2ggd2UgYXJlIHVwc2FtcGxpbmcuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVzY2VuZGFudExldmVsIFRoZSBsZXZlbCB3aXRoaW4gdGhlIHRpbGluZyBzY2hlbWUgb2YgdGhlIGRlc2NlbmRhbnQgdGlsZSBmb3Igd2hpY2ggd2UgYXJlIHVwc2FtcGxpbmcuXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48SGVpZ2h0bWFwVGVycmFpbkRhdGE+fHVuZGVmaW5lZH0gQSBwcm9taXNlIGZvciB1cHNhbXBsZWQgaGVpZ2h0bWFwIHRlcnJhaW4gZGF0YSBmb3IgdGhlIGRlc2NlbmRhbnQgdGlsZSxcbiAqICAgICAgICAgIG9yIHVuZGVmaW5lZCBpZiB0b28gbWFueSBhc3luY2hyb25vdXMgdXBzYW1wbGUgb3BlcmF0aW9ucyBhcmUgaW4gcHJvZ3Jlc3MgYW5kIHRoZSByZXF1ZXN0IGhhcyBiZWVuXG4gKiAgICAgICAgICBkZWZlcnJlZC5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpbkRhdGEucHJvdG90eXBlLnVwc2FtcGxlID0gZnVuY3Rpb24gKFxuICB0aWxpbmdTY2hlbWUsXG4gIHRoaXNYLFxuICB0aGlzWSxcbiAgdGhpc0xldmVsLFxuICBkZXNjZW5kYW50WCxcbiAgZGVzY2VuZGFudFksXG4gIGRlc2NlbmRhbnRMZXZlbFxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJ0aWxpbmdTY2hlbWVcIiwgdGlsaW5nU2NoZW1lKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcInRoaXNYXCIsIHRoaXNYKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcInRoaXNZXCIsIHRoaXNZKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcInRoaXNMZXZlbFwiLCB0aGlzTGV2ZWwpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwiZGVzY2VuZGFudFhcIiwgZGVzY2VuZGFudFgpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwiZGVzY2VuZGFudFlcIiwgZGVzY2VuZGFudFkpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwiZGVzY2VuZGFudExldmVsXCIsIGRlc2NlbmRhbnRMZXZlbCk7XG4gIHZhciBsZXZlbERpZmZlcmVuY2UgPSBkZXNjZW5kYW50TGV2ZWwgLSB0aGlzTGV2ZWw7XG4gIGlmIChsZXZlbERpZmZlcmVuY2UgPiAxKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJVcHNhbXBsaW5nIHRocm91Z2ggbW9yZSB0aGFuIG9uZSBsZXZlbCBhdCBhIHRpbWUgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBtZXNoID0gdGhpcy5fbWVzaDtcbiAgaWYgKCFkZWZpbmVkKHRoaXMuX21lc2gpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBpc0Vhc3RDaGlsZCA9IHRoaXNYICogMiAhPT0gZGVzY2VuZGFudFg7XG4gIHZhciBpc05vcnRoQ2hpbGQgPSB0aGlzWSAqIDIgPT09IGRlc2NlbmRhbnRZO1xuXG4gIHZhciBlbGxpcHNvaWQgPSB0aWxpbmdTY2hlbWUuZWxsaXBzb2lkO1xuICB2YXIgY2hpbGRSZWN0YW5nbGUgPSB0aWxpbmdTY2hlbWUudGlsZVhZVG9SZWN0YW5nbGUoXG4gICAgZGVzY2VuZGFudFgsXG4gICAgZGVzY2VuZGFudFksXG4gICAgZGVzY2VuZGFudExldmVsXG4gICk7XG5cbiAgdmFyIHVwc2FtcGxlUHJvbWlzZSA9IHVwc2FtcGxlVGFza1Byb2Nlc3Nvci5zY2hlZHVsZVRhc2soe1xuICAgIHZlcnRpY2VzOiBtZXNoLnZlcnRpY2VzLFxuICAgIGluZGljZXM6IG1lc2guaW5kaWNlcyxcbiAgICBpbmRleENvdW50V2l0aG91dFNraXJ0czogbWVzaC5pbmRleENvdW50V2l0aG91dFNraXJ0cyxcbiAgICB2ZXJ0ZXhDb3VudFdpdGhvdXRTa2lydHM6IG1lc2gudmVydGV4Q291bnRXaXRob3V0U2tpcnRzLFxuICAgIGVuY29kaW5nOiBtZXNoLmVuY29kaW5nLFxuICAgIG1pbmltdW1IZWlnaHQ6IHRoaXMuX21pbmltdW1IZWlnaHQsXG4gICAgbWF4aW11bUhlaWdodDogdGhpcy5fbWF4aW11bUhlaWdodCxcbiAgICBpc0Vhc3RDaGlsZDogaXNFYXN0Q2hpbGQsXG4gICAgaXNOb3J0aENoaWxkOiBpc05vcnRoQ2hpbGQsXG4gICAgY2hpbGRSZWN0YW5nbGU6IGNoaWxkUmVjdGFuZ2xlLFxuICAgIGVsbGlwc29pZDogZWxsaXBzb2lkLFxuICB9KTtcblxuICBpZiAoIWRlZmluZWQodXBzYW1wbGVQcm9taXNlKSkge1xuICAgIC8vIFBvc3Rwb25lZFxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHJldHVybiB1cHNhbXBsZVByb21pc2UudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgdmFyIHF1YW50aXplZFZlcnRpY2VzID0gbmV3IFVpbnQxNkFycmF5KHJlc3VsdC52ZXJ0aWNlcyk7XG4gICAgdmFyIGluZGljZXNUeXBlZEFycmF5ID0gSW5kZXhEYXRhdHlwZS5jcmVhdGVUeXBlZEFycmF5KFxuICAgICAgcXVhbnRpemVkVmVydGljZXMubGVuZ3RoIC8gMyxcbiAgICAgIHJlc3VsdC5pbmRpY2VzXG4gICAgKTtcblxuICAgIHZhciBza2lydEhlaWdodCA9IHRoYXQuX3NraXJ0SGVpZ2h0O1xuXG4gICAgLy8gVXNlIFF1YW50aXplZE1lc2hUZXJyYWluRGF0YSBzaW5jZSB3ZSBoYXZlIHdoYXQgd2UgbmVlZCBhbHJlYWR5IHBhcnNlZFxuICAgIHJldHVybiBuZXcgUXVhbnRpemVkTWVzaFRlcnJhaW5EYXRhKHtcbiAgICAgIHF1YW50aXplZFZlcnRpY2VzOiBxdWFudGl6ZWRWZXJ0aWNlcyxcbiAgICAgIGluZGljZXM6IGluZGljZXNUeXBlZEFycmF5LFxuICAgICAgbWluaW11bUhlaWdodDogcmVzdWx0Lm1pbmltdW1IZWlnaHQsXG4gICAgICBtYXhpbXVtSGVpZ2h0OiByZXN1bHQubWF4aW11bUhlaWdodCxcbiAgICAgIGJvdW5kaW5nU3BoZXJlOiBCb3VuZGluZ1NwaGVyZS5jbG9uZShyZXN1bHQuYm91bmRpbmdTcGhlcmUpLFxuICAgICAgb3JpZW50ZWRCb3VuZGluZ0JveDogT3JpZW50ZWRCb3VuZGluZ0JveC5jbG9uZShcbiAgICAgICAgcmVzdWx0Lm9yaWVudGVkQm91bmRpbmdCb3hcbiAgICAgICksXG4gICAgICBob3Jpem9uT2NjbHVzaW9uUG9pbnQ6IENhcnRlc2lhbjMuY2xvbmUocmVzdWx0Lmhvcml6b25PY2NsdXNpb25Qb2ludCksXG4gICAgICB3ZXN0SW5kaWNlczogcmVzdWx0Lndlc3RJbmRpY2VzLFxuICAgICAgc291dGhJbmRpY2VzOiByZXN1bHQuc291dGhJbmRpY2VzLFxuICAgICAgZWFzdEluZGljZXM6IHJlc3VsdC5lYXN0SW5kaWNlcyxcbiAgICAgIG5vcnRoSW5kaWNlczogcmVzdWx0Lm5vcnRoSW5kaWNlcyxcbiAgICAgIHdlc3RTa2lydEhlaWdodDogc2tpcnRIZWlnaHQsXG4gICAgICBzb3V0aFNraXJ0SGVpZ2h0OiBza2lydEhlaWdodCxcbiAgICAgIGVhc3RTa2lydEhlaWdodDogc2tpcnRIZWlnaHQsXG4gICAgICBub3J0aFNraXJ0SGVpZ2h0OiBza2lydEhlaWdodCxcbiAgICAgIGNoaWxkVGlsZU1hc2s6IDAsXG4gICAgICBjcmVhdGVkQnlVcHNhbXBsaW5nOiB0cnVlLFxuICAgICAgY3JlZGl0czogdGhhdC5fY3JlZGl0cyxcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSBnaXZlbiBjaGlsZCB0aWxlIGlzIGF2YWlsYWJsZSwgYmFzZWQgb24gdGhlXG4gKiB7QGxpbmsgSGVpZ2h0bWFwVGVycmFpbkRhdGEuY2hpbGRUaWxlTWFza30uICBUaGUgZ2l2ZW4gY2hpbGQgdGlsZSBjb29yZGluYXRlcyBhcmUgYXNzdW1lZFxuICogdG8gYmUgb25lIG9mIHRoZSBmb3VyIGNoaWxkcmVuIG9mIHRoaXMgdGlsZS4gIElmIG5vbi1jaGlsZCB0aWxlIGNvb3JkaW5hdGVzIGFyZVxuICogZ2l2ZW4sIHRoZSBhdmFpbGFiaWxpdHkgb2YgdGhlIHNvdXRoZWFzdCBjaGlsZCB0aWxlIGlzIHJldHVybmVkLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB0aGlzWCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUgb2YgdGhpcyAodGhlIHBhcmVudCkgdGlsZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB0aGlzWSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUgb2YgdGhpcyAodGhlIHBhcmVudCkgdGlsZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBjaGlsZFggVGhlIHRpbGUgWCBjb29yZGluYXRlIG9mIHRoZSBjaGlsZCB0aWxlIHRvIGNoZWNrIGZvciBhdmFpbGFiaWxpdHkuXG4gKiBAcGFyYW0ge051bWJlcn0gY2hpbGRZIFRoZSB0aWxlIFkgY29vcmRpbmF0ZSBvZiB0aGUgY2hpbGQgdGlsZSB0byBjaGVjayBmb3IgYXZhaWxhYmlsaXR5LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIGNoaWxkIHRpbGUgaXMgYXZhaWxhYmxlOyBvdGhlcndpc2UsIGZhbHNlLlxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluRGF0YS5wcm90b3R5cGUuaXNDaGlsZEF2YWlsYWJsZSA9IGZ1bmN0aW9uIChcbiAgdGhpc1gsXG4gIHRoaXNZLFxuICBjaGlsZFgsXG4gIGNoaWxkWVxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJ0aGlzWFwiLCB0aGlzWCk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJ0aGlzWVwiLCB0aGlzWSk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJjaGlsZFhcIiwgY2hpbGRYKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcImNoaWxkWVwiLCBjaGlsZFkpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgYml0TnVtYmVyID0gMjsgLy8gbm9ydGh3ZXN0IGNoaWxkXG4gIGlmIChjaGlsZFggIT09IHRoaXNYICogMikge1xuICAgICsrYml0TnVtYmVyOyAvLyBlYXN0IGNoaWxkXG4gIH1cbiAgaWYgKGNoaWxkWSAhPT0gdGhpc1kgKiAyKSB7XG4gICAgYml0TnVtYmVyIC09IDI7IC8vIHNvdXRoIGNoaWxkXG4gIH1cblxuICByZXR1cm4gKHRoaXMuX2NoaWxkVGlsZU1hc2sgJiAoMSA8PCBiaXROdW1iZXIpKSAhPT0gMDtcbn07XG5cbi8qKlxuICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhpcyB0ZXJyYWluIGRhdGEgd2FzIGNyZWF0ZWQgYnkgdXBzYW1wbGluZyBsb3dlciByZXNvbHV0aW9uXG4gKiB0ZXJyYWluIGRhdGEuICBJZiB0aGlzIHZhbHVlIGlzIGZhbHNlLCB0aGUgZGF0YSB3YXMgb2J0YWluZWQgZnJvbSBzb21lIG90aGVyIHNvdXJjZSwgc3VjaFxuICogYXMgYnkgZG93bmxvYWRpbmcgaXQgZnJvbSBhIHJlbW90ZSBzZXJ2ZXIuICBUaGlzIG1ldGhvZCBzaG91bGQgcmV0dXJuIHRydWUgZm9yIGluc3RhbmNlc1xuICogcmV0dXJuZWQgZnJvbSBhIGNhbGwgdG8ge0BsaW5rIEhlaWdodG1hcFRlcnJhaW5EYXRhI3Vwc2FtcGxlfS5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGlzIGluc3RhbmNlIHdhcyBjcmVhdGVkIGJ5IHVwc2FtcGxpbmc7IG90aGVyd2lzZSwgZmFsc2UuXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5EYXRhLnByb3RvdHlwZS53YXNDcmVhdGVkQnlVcHNhbXBsaW5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fY3JlYXRlZEJ5VXBzYW1wbGluZztcbn07XG5cbnZhciB0ZXhDb29yZFNjcmF0Y2gwID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciB0ZXhDb29yZFNjcmF0Y2gxID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciB0ZXhDb29yZFNjcmF0Y2gyID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciBiYXJ5Y2VudHJpY0Nvb3JkaW5hdGVTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVNZXNoSGVpZ2h0KHRlcnJhaW5EYXRhLCB1LCB2KSB7XG4gIHZhciBtZXNoID0gdGVycmFpbkRhdGEuX21lc2g7XG4gIHZhciB2ZXJ0aWNlcyA9IG1lc2gudmVydGljZXM7XG4gIHZhciBlbmNvZGluZyA9IG1lc2guZW5jb2Rpbmc7XG4gIHZhciBpbmRpY2VzID0gbWVzaC5pbmRpY2VzO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBpbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAzKSB7XG4gICAgdmFyIGkwID0gaW5kaWNlc1tpXTtcbiAgICB2YXIgaTEgPSBpbmRpY2VzW2kgKyAxXTtcbiAgICB2YXIgaTIgPSBpbmRpY2VzW2kgKyAyXTtcblxuICAgIHZhciB1djAgPSBlbmNvZGluZy5kZWNvZGVUZXh0dXJlQ29vcmRpbmF0ZXModmVydGljZXMsIGkwLCB0ZXhDb29yZFNjcmF0Y2gwKTtcbiAgICB2YXIgdXYxID0gZW5jb2RpbmcuZGVjb2RlVGV4dHVyZUNvb3JkaW5hdGVzKHZlcnRpY2VzLCBpMSwgdGV4Q29vcmRTY3JhdGNoMSk7XG4gICAgdmFyIHV2MiA9IGVuY29kaW5nLmRlY29kZVRleHR1cmVDb29yZGluYXRlcyh2ZXJ0aWNlcywgaTIsIHRleENvb3JkU2NyYXRjaDIpO1xuXG4gICAgdmFyIGJhcnljZW50cmljID0gSW50ZXJzZWN0aW9uczJELmNvbXB1dGVCYXJ5Y2VudHJpY0Nvb3JkaW5hdGVzKFxuICAgICAgdSxcbiAgICAgIHYsXG4gICAgICB1djAueCxcbiAgICAgIHV2MC55LFxuICAgICAgdXYxLngsXG4gICAgICB1djEueSxcbiAgICAgIHV2Mi54LFxuICAgICAgdXYyLnksXG4gICAgICBiYXJ5Y2VudHJpY0Nvb3JkaW5hdGVTY3JhdGNoXG4gICAgKTtcbiAgICBpZiAoXG4gICAgICBiYXJ5Y2VudHJpYy54ID49IC0xZS0xNSAmJlxuICAgICAgYmFyeWNlbnRyaWMueSA+PSAtMWUtMTUgJiZcbiAgICAgIGJhcnljZW50cmljLnogPj0gLTFlLTE1XG4gICAgKSB7XG4gICAgICB2YXIgaDAgPSBlbmNvZGluZy5kZWNvZGVIZWlnaHQodmVydGljZXMsIGkwKTtcbiAgICAgIHZhciBoMSA9IGVuY29kaW5nLmRlY29kZUhlaWdodCh2ZXJ0aWNlcywgaTEpO1xuICAgICAgdmFyIGgyID0gZW5jb2RpbmcuZGVjb2RlSGVpZ2h0KHZlcnRpY2VzLCBpMik7XG4gICAgICByZXR1cm4gYmFyeWNlbnRyaWMueCAqIGgwICsgYmFyeWNlbnRyaWMueSAqIGgxICsgYmFyeWNlbnRyaWMueiAqIGgyO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBvc2l0aW9uIGRvZXMgbm90IGxpZSBpbiBhbnkgdHJpYW5nbGUgaW4gdGhpcyBtZXNoLlxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG52YXIgc2l6ZU9mVWludDE2ID0gVWludDE2QXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG52YXIgc2l6ZU9mVWludDMyID0gVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG52YXIgc2l6ZU9mSW50MzIgPSBJbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xudmFyIHNpemVPZkZsb2F0ID0gRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xudmFyIHNpemVPZkRvdWJsZSA9IEZsb2F0NjRBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVIZWlnaHQodGVycmFpbkRhdGEsIHUsIHYsIHJlY3RhbmdsZSkge1xuICB2YXIgYnVmZmVyID0gdGVycmFpbkRhdGEuX2J1ZmZlcjtcbiAgdmFyIHF1YWQgPSAwOyAvLyBTV1xuICB2YXIgdVN0YXJ0ID0gMC4wO1xuICB2YXIgdlN0YXJ0ID0gMC4wO1xuICBpZiAodiA+IDAuNSkge1xuICAgIC8vIFVwcGVyIHJvd1xuICAgIGlmICh1ID4gMC41KSB7XG4gICAgICAvLyBORVxuICAgICAgcXVhZCA9IDI7XG4gICAgICB1U3RhcnQgPSAwLjU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5XXG4gICAgICBxdWFkID0gMztcbiAgICB9XG4gICAgdlN0YXJ0ID0gMC41O1xuICB9IGVsc2UgaWYgKHUgPiAwLjUpIHtcbiAgICAvLyBTRVxuICAgIHF1YWQgPSAxO1xuICAgIHVTdGFydCA9IDAuNTtcbiAgfVxuXG4gIHZhciBkdiA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICB2YXIgb2Zmc2V0ID0gMDtcbiAgZm9yICh2YXIgcSA9IDA7IHEgPCBxdWFkOyArK3EpIHtcbiAgICBvZmZzZXQgKz0gZHYuZ2V0VWludDMyKG9mZnNldCwgdHJ1ZSk7XG4gICAgb2Zmc2V0ICs9IHNpemVPZlVpbnQzMjtcbiAgfVxuICBvZmZzZXQgKz0gc2l6ZU9mVWludDMyOyAvLyBTa2lwIGxlbmd0aCBvZiBxdWFkXG4gIG9mZnNldCArPSAyICogc2l6ZU9mRG91YmxlOyAvLyBTa2lwIG9yaWdpblxuXG4gIC8vIFJlYWQgc2l6ZXNcbiAgdmFyIHhTaXplID0gQ2VzaXVtTWF0aC50b1JhZGlhbnMoZHYuZ2V0RmxvYXQ2NChvZmZzZXQsIHRydWUpICogMTgwLjApO1xuICBvZmZzZXQgKz0gc2l6ZU9mRG91YmxlO1xuICB2YXIgeVNpemUgPSBDZXNpdW1NYXRoLnRvUmFkaWFucyhkdi5nZXRGbG9hdDY0KG9mZnNldCwgdHJ1ZSkgKiAxODAuMCk7XG4gIG9mZnNldCArPSBzaXplT2ZEb3VibGU7XG5cbiAgLy8gU2FtcGxlcyBwZXIgcXVhZFxuICB2YXIgeFNjYWxlID0gcmVjdGFuZ2xlLndpZHRoIC8geFNpemUgLyAyO1xuICB2YXIgeVNjYWxlID0gcmVjdGFuZ2xlLmhlaWdodCAvIHlTaXplIC8gMjtcblxuICAvLyBOdW1iZXIgb2YgcG9pbnRzXG4gIHZhciBudW1Qb2ludHMgPSBkdi5nZXRJbnQzMihvZmZzZXQsIHRydWUpO1xuICBvZmZzZXQgKz0gc2l6ZU9mSW50MzI7XG5cbiAgLy8gTnVtYmVyIG9mIGZhY2VzXG4gIHZhciBudW1JbmRpY2VzID0gZHYuZ2V0SW50MzIob2Zmc2V0LCB0cnVlKSAqIDM7XG4gIG9mZnNldCArPSBzaXplT2ZJbnQzMjtcblxuICBvZmZzZXQgKz0gc2l6ZU9mSW50MzI7IC8vIFNraXAgTGV2ZWxcblxuICB2YXIgdUJ1ZmZlciA9IG5ldyBBcnJheShudW1Qb2ludHMpO1xuICB2YXIgdkJ1ZmZlciA9IG5ldyBBcnJheShudW1Qb2ludHMpO1xuICB2YXIgaGVpZ2h0cyA9IG5ldyBBcnJheShudW1Qb2ludHMpO1xuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IG51bVBvaW50czsgKytpKSB7XG4gICAgdUJ1ZmZlcltpXSA9IHVTdGFydCArIGR2LmdldFVpbnQ4KG9mZnNldCsrKSAqIHhTY2FsZTtcbiAgICB2QnVmZmVyW2ldID0gdlN0YXJ0ICsgZHYuZ2V0VWludDgob2Zmc2V0KyspICogeVNjYWxlO1xuXG4gICAgLy8gSGVpZ2h0IGlzIHN0b3JlZCBpbiB1bml0cyBvZiAoMS9FYXJ0aFJhZGl1cykgb3IgKDEvNjM3MTAxMC4wKVxuICAgIGhlaWdodHNbaV0gPSBkdi5nZXRGbG9hdDMyKG9mZnNldCwgdHJ1ZSkgKiA2MzcxMDEwLjA7XG4gICAgb2Zmc2V0ICs9IHNpemVPZkZsb2F0O1xuICB9XG5cbiAgdmFyIGluZGljZXMgPSBuZXcgQXJyYXkobnVtSW5kaWNlcyk7XG4gIGZvciAoaSA9IDA7IGkgPCBudW1JbmRpY2VzOyArK2kpIHtcbiAgICBpbmRpY2VzW2ldID0gZHYuZ2V0VWludDE2KG9mZnNldCwgdHJ1ZSk7XG4gICAgb2Zmc2V0ICs9IHNpemVPZlVpbnQxNjtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCBudW1JbmRpY2VzOyBpICs9IDMpIHtcbiAgICB2YXIgaTAgPSBpbmRpY2VzW2ldO1xuICAgIHZhciBpMSA9IGluZGljZXNbaSArIDFdO1xuICAgIHZhciBpMiA9IGluZGljZXNbaSArIDJdO1xuXG4gICAgdmFyIHUwID0gdUJ1ZmZlcltpMF07XG4gICAgdmFyIHUxID0gdUJ1ZmZlcltpMV07XG4gICAgdmFyIHUyID0gdUJ1ZmZlcltpMl07XG5cbiAgICB2YXIgdjAgPSB2QnVmZmVyW2kwXTtcbiAgICB2YXIgdjEgPSB2QnVmZmVyW2kxXTtcbiAgICB2YXIgdjIgPSB2QnVmZmVyW2kyXTtcblxuICAgIHZhciBiYXJ5Y2VudHJpYyA9IEludGVyc2VjdGlvbnMyRC5jb21wdXRlQmFyeWNlbnRyaWNDb29yZGluYXRlcyhcbiAgICAgIHUsXG4gICAgICB2LFxuICAgICAgdTAsXG4gICAgICB2MCxcbiAgICAgIHUxLFxuICAgICAgdjEsXG4gICAgICB1MixcbiAgICAgIHYyLFxuICAgICAgYmFyeWNlbnRyaWNDb29yZGluYXRlU2NyYXRjaFxuICAgICk7XG4gICAgaWYgKFxuICAgICAgYmFyeWNlbnRyaWMueCA+PSAtMWUtMTUgJiZcbiAgICAgIGJhcnljZW50cmljLnkgPj0gLTFlLTE1ICYmXG4gICAgICBiYXJ5Y2VudHJpYy56ID49IC0xZS0xNVxuICAgICkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgYmFyeWNlbnRyaWMueCAqIGhlaWdodHNbaTBdICtcbiAgICAgICAgYmFyeWNlbnRyaWMueSAqIGhlaWdodHNbaTFdICtcbiAgICAgICAgYmFyeWNlbnRyaWMueiAqIGhlaWdodHNbaTJdXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBvc2l0aW9uIGRvZXMgbm90IGxpZSBpbiBhbnkgdHJpYW5nbGUgaW4gdGhpcyBtZXNoLlxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGRlZmF1bHQgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpbkRhdGE7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///69273\n')},78858:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13222);\n/* harmony import */ var _Credit_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52975);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Event_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14459);\n/* harmony import */ var _GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71351);\n/* harmony import */ var _GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19043);\n/* harmony import */ var _GoogleEarthEnterpriseTerrainData_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69273);\n/* harmony import */ var _HeightmapTerrainData_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(57134);\n/* harmony import */ var _JulianDate_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(55293);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(99417);\n/* harmony import */ var _Rectangle_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(96190);\n/* harmony import */ var _Request_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(22426);\n/* harmony import */ var _RequestState_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(6224);\n/* harmony import */ var _RequestType_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82968);\n/* harmony import */ var _Resource_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(68985);\n/* harmony import */ var _RuntimeError_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(9407);\n/* harmony import */ var _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(2819);\n/* harmony import */ var _TileProviderError_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(9121);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar TerrainState = {\n  UNKNOWN: 0,\n  NONE: 1,\n  SELF: 2,\n  PARENT: 3,\n};\n\nvar julianDateScratch = new _JulianDate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z();\n\nfunction TerrainCache() {\n  this._terrainCache = {};\n  this._lastTidy = _JulianDate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].now */ .Z.now();\n}\n\nTerrainCache.prototype.add = function (quadKey, buffer) {\n  this._terrainCache[quadKey] = {\n    buffer: buffer,\n    timestamp: _JulianDate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].now */ .Z.now(),\n  };\n};\n\nTerrainCache.prototype.get = function (quadKey) {\n  var terrainCache = this._terrainCache;\n  var result = terrainCache[quadKey];\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(result)) {\n    delete this._terrainCache[quadKey];\n    return result.buffer;\n  }\n};\n\nTerrainCache.prototype.tidy = function () {\n  _JulianDate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].now */ .Z.now(julianDateScratch);\n  if (_JulianDate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].secondsDifference */ .Z.secondsDifference(julianDateScratch, this._lastTidy) > 10) {\n    var terrainCache = this._terrainCache;\n    var keys = Object.keys(terrainCache);\n    var count = keys.length;\n    for (var i = 0; i < count; ++i) {\n      var k = keys[i];\n      var e = terrainCache[k];\n      if (_JulianDate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].secondsDifference */ .Z.secondsDifference(julianDateScratch, e.timestamp) > 10) {\n        delete terrainCache[k];\n      }\n    }\n\n    _JulianDate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(julianDateScratch, this._lastTidy);\n  }\n};\n\n/**\n * Provides tiled terrain using the Google Earth Enterprise REST API.\n *\n * @alias GoogleEarthEnterpriseTerrainProvider\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource|String} options.url The url of the Google Earth Enterprise server hosting the imagery.\n * @param {GoogleEarthEnterpriseMetadata} options.metadata A metadata object that can be used to share metadata requests with a GoogleEarthEnterpriseImageryProvider.\n * @param {Ellipsoid} [options.ellipsoid] The ellipsoid.  If not specified, the WGS84 ellipsoid is used.\n * @param {Credit|String} [options.credit] A credit for the data source, which is displayed on the canvas.\n *\n * @see GoogleEarthEnterpriseImageryProvider\n * @see CesiumTerrainProvider\n *\n * @example\n * var geeMetadata = new GoogleEarthEnterpriseMetadata(\'http://www.earthenterprise.org/3d\');\n * var gee = new Cesium.GoogleEarthEnterpriseTerrainProvider({\n *     metadata : geeMetadata\n * });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n */\nfunction GoogleEarthEnterpriseTerrainProvider(options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(options.url) || (0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(options.metadata))) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z("options.url or options.metadata is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var metadata;\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(options.metadata)) {\n    metadata = options.metadata;\n  } else {\n    var resource = _Resource_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].createIfNeeded */ .Z.createIfNeeded(options.url);\n    metadata = new _GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(resource);\n  }\n\n  this._metadata = metadata;\n  this._tilingScheme = new _GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n    numberOfLevelZeroTilesX: 2,\n    numberOfLevelZeroTilesY: 2,\n    rectangle: new _Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z(\n      -_Math_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].PI */ .Z.PI,\n      -_Math_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].PI */ .Z.PI,\n      _Math_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].PI */ .Z.PI,\n      _Math_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].PI */ .Z.PI\n    ),\n    ellipsoid: options.ellipsoid,\n  });\n\n  var credit = options.credit;\n  if (typeof credit === "string") {\n    credit = new _Credit_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(credit);\n  }\n  this._credit = credit;\n\n  // Pulled from Google\'s documentation\n  this._levelZeroMaximumGeometricError = 40075.16;\n\n  this._terrainCache = new TerrainCache();\n  this._terrainPromises = {};\n  this._terrainRequests = {};\n\n  this._errorEvent = new _Event_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\n  this._ready = false;\n  var that = this;\n  var metadataError;\n  this._readyPromise = metadata.readyPromise\n    .then(function (result) {\n      if (!metadata.terrainPresent) {\n        var e = new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z(\n          "The server " + metadata.url + " doesn\'t have terrain"\n        );\n        metadataError = _TileProviderError_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].handleError */ .Z.handleError(\n          metadataError,\n          that,\n          that._errorEvent,\n          e.message,\n          undefined,\n          undefined,\n          undefined,\n          e\n        );\n        return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(e);\n      }\n\n      _TileProviderError_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].handleSuccess */ .Z.handleSuccess(metadataError);\n      that._ready = result;\n      return result;\n    })\n    .otherwise(function (e) {\n      metadataError = _TileProviderError_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].handleError */ .Z.handleError(\n        metadataError,\n        that,\n        that._errorEvent,\n        e.message,\n        undefined,\n        undefined,\n        undefined,\n        e\n      );\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(e);\n    });\n}\n\nObject.defineProperties(GoogleEarthEnterpriseTerrainProvider.prototype, {\n  /**\n   * Gets the name of the Google Earth Enterprise server url hosting the imagery.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._metadata.url;\n    },\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return this._metadata.proxy;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link GoogleEarthEnterpriseTerrainProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "tilingScheme must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this terrain provider is active.  Typically this is used to credit\n   * the source of the terrain.  This function should not be called before {@link GoogleEarthEnterpriseTerrainProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return this._credit;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider includes a water mask.  The water mask\n   * indicates which areas of the globe are water rather than land, so they can be rendered\n   * as a reflective surface with animated waves.  This function should not be\n   * called before {@link GoogleEarthEnterpriseTerrainProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasWaterMask: {\n    get: function () {\n      return false;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the requested tiles include vertex normals.\n   * This function should not be called before {@link GoogleEarthEnterpriseTerrainProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasVertexNormals: {\n    get: function () {\n      return false;\n    },\n  },\n\n  /**\n   * Gets an object that can be used to determine availability of terrain from this provider, such as\n   * at points and in rectangles.  This function should not be called before\n   * {@link GoogleEarthEnterpriseTerrainProvider#ready} returns true.  This property may be undefined if availability\n   * information is not available.\n   * @memberof GoogleEarthEnterpriseTerrainProvider.prototype\n   * @type {TileAvailability}\n   * @readonly\n   */\n  availability: {\n    get: function () {\n      return undefined;\n    },\n  },\n});\n\nvar taskProcessor = new _TaskProcessor_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z("decodeGoogleEarthEnterprisePacket");\n\n// If the tile has its own terrain, then you can just use its child bitmask. If it was requested using it\'s parent\n//  then you need to check all of its children to see if they have terrain.\nfunction computeChildMask(quadKey, info, metadata) {\n  var childMask = info.getChildBitmask();\n  if (info.terrainState === TerrainState.PARENT) {\n    childMask = 0;\n    for (var i = 0; i < 4; ++i) {\n      var child = metadata.getTileInformationFromQuadKey(\n        quadKey + i.toString()\n      );\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(child) && child.hasTerrain()) {\n        childMask |= 1 << i;\n      }\n    }\n  }\n\n  return childMask;\n}\n\n/**\n * Requests the geometry for a given tile.  This function should not be called before\n * {@link GoogleEarthEnterpriseTerrainProvider#ready} returns true.  The result must include terrain data and\n * may optionally include a water mask and an indication of which child tiles are available.\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<TerrainData>|undefined} A promise for the requested geometry.  If this method\n *          returns undefined instead of a promise, it is an indication that too many requests are already\n *          pending and the request will be retried later.\n *\n * @exception {DeveloperError} This function must not be called before {@link GoogleEarthEnterpriseTerrainProvider#ready}\n *            returns true.\n */\nGoogleEarthEnterpriseTerrainProvider.prototype.requestTileGeometry = function (\n  x,\n  y,\n  level,\n  request\n) {\n  //>>includeStart(\'debug\', pragmas.debug)\n  if (!this._ready) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "requestTileGeometry must not be called before the terrain provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var quadKey = _GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].tileXYToQuadKey */ .Z.tileXYToQuadKey(x, y, level);\n  var terrainCache = this._terrainCache;\n  var metadata = this._metadata;\n  var info = metadata.getTileInformationFromQuadKey(quadKey);\n\n  // Check if this tile is even possibly available\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(info)) {\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z("Terrain tile doesn\'t exist"));\n  }\n\n  var terrainState = info.terrainState;\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(terrainState)) {\n    // First time we have tried to load this tile, so set terrain state to UNKNOWN\n    terrainState = info.terrainState = TerrainState.UNKNOWN;\n  }\n\n  // If its in the cache, return it\n  var buffer = terrainCache.get(quadKey);\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(buffer)) {\n    var credit = metadata.providers[info.terrainProvider];\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].resolve */ .Z.resolve(\n      new _GoogleEarthEnterpriseTerrainData_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n        buffer: buffer,\n        childTileMask: computeChildMask(quadKey, info, metadata),\n        credits: (0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(credit) ? [credit] : undefined,\n        negativeAltitudeExponentBias: metadata.negativeAltitudeExponentBias,\n        negativeElevationThreshold: metadata.negativeAltitudeThreshold,\n      })\n    );\n  }\n\n  // Clean up the cache\n  terrainCache.tidy();\n\n  // We have a tile, check to see if no ancestors have terrain or that we know for sure it doesn\'t\n  if (!info.ancestorHasTerrain) {\n    // We haven\'t reached a level with terrain, so return the ellipsoid\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].resolve */ .Z.resolve(\n      new _HeightmapTerrainData_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n        buffer: new Uint8Array(16 * 16),\n        width: 16,\n        height: 16,\n      })\n    );\n  } else if (terrainState === TerrainState.NONE) {\n    // Already have info and there isn\'t any terrain here\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z("Terrain tile doesn\'t exist"));\n  }\n\n  // Figure out where we are getting the terrain and what version\n  var parentInfo;\n  var q = quadKey;\n  var terrainVersion = -1;\n  switch (terrainState) {\n    case TerrainState.SELF: // We have terrain and have retrieved it before\n      terrainVersion = info.terrainVersion;\n      break;\n    case TerrainState.PARENT: // We have terrain in our parent\n      q = q.substring(0, q.length - 1);\n      parentInfo = metadata.getTileInformationFromQuadKey(q);\n      terrainVersion = parentInfo.terrainVersion;\n      break;\n    case TerrainState.UNKNOWN: // We haven\'t tried to retrieve terrain yet\n      if (info.hasTerrain()) {\n        terrainVersion = info.terrainVersion; // We should have terrain\n      } else {\n        q = q.substring(0, q.length - 1);\n        parentInfo = metadata.getTileInformationFromQuadKey(q);\n        if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(parentInfo) && parentInfo.hasTerrain()) {\n          terrainVersion = parentInfo.terrainVersion; // Try checking in the parent\n        }\n      }\n      break;\n  }\n\n  // We can\'t figure out where to get the terrain\n  if (terrainVersion < 0) {\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z("Terrain tile doesn\'t exist"));\n  }\n\n  // Load that terrain\n  var terrainPromises = this._terrainPromises;\n  var terrainRequests = this._terrainRequests;\n  var sharedPromise;\n  var sharedRequest;\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(terrainPromises[q])) {\n    // Already being loaded possibly from another child, so return existing promise\n    sharedPromise = terrainPromises[q];\n    sharedRequest = terrainRequests[q];\n  } else {\n    // Create new request for terrain\n    sharedRequest = request;\n    var requestPromise = buildTerrainResource(\n      this,\n      q,\n      terrainVersion,\n      sharedRequest\n    ).fetchArrayBuffer();\n\n    if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(requestPromise)) {\n      return undefined; // Throttled\n    }\n\n    sharedPromise = requestPromise.then(function (terrain) {\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(terrain)) {\n        return taskProcessor\n          .scheduleTask(\n            {\n              buffer: terrain,\n              type: "Terrain",\n              key: metadata.key,\n            },\n            [terrain]\n          )\n          .then(function (terrainTiles) {\n            // Add requested tile and mark it as SELF\n            var requestedInfo = metadata.getTileInformationFromQuadKey(q);\n            requestedInfo.terrainState = TerrainState.SELF;\n            terrainCache.add(q, terrainTiles[0]);\n            var provider = requestedInfo.terrainProvider;\n\n            // Add children to cache\n            var count = terrainTiles.length - 1;\n            for (var j = 0; j < count; ++j) {\n              var childKey = q + j.toString();\n              var child = metadata.getTileInformationFromQuadKey(childKey);\n              if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(child)) {\n                terrainCache.add(childKey, terrainTiles[j + 1]);\n                child.terrainState = TerrainState.PARENT;\n                if (child.terrainProvider === 0) {\n                  child.terrainProvider = provider;\n                }\n              }\n            }\n          });\n      }\n\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z("Failed to load terrain."));\n    });\n\n    terrainPromises[q] = sharedPromise; // Store promise without delete from terrainPromises\n    terrainRequests[q] = sharedRequest;\n\n    // Set promise so we remove from terrainPromises just one time\n    sharedPromise = sharedPromise.always(function () {\n      delete terrainPromises[q];\n      delete terrainRequests[q];\n    });\n  }\n\n  return sharedPromise\n    .then(function () {\n      var buffer = terrainCache.get(quadKey);\n      if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(buffer)) {\n        var credit = metadata.providers[info.terrainProvider];\n        return new _GoogleEarthEnterpriseTerrainData_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n          buffer: buffer,\n          childTileMask: computeChildMask(quadKey, info, metadata),\n          credits: (0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(credit) ? [credit] : undefined,\n          negativeAltitudeExponentBias: metadata.negativeAltitudeExponentBias,\n          negativeElevationThreshold: metadata.negativeAltitudeThreshold,\n        });\n      }\n\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(new _RuntimeError_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z("Failed to load terrain."));\n    })\n    .otherwise(function (error) {\n      if (sharedRequest.state === _RequestState_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].CANCELLED */ .Z.CANCELLED) {\n        request.state = sharedRequest.state;\n        return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(error);\n      }\n      info.terrainState = TerrainState.NONE;\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].reject */ .Z.reject(error);\n    });\n};\n\n/**\n * Gets the maximum geometric error allowed in a tile at a given level.\n *\n * @param {Number} level The tile level for which to get the maximum geometric error.\n * @returns {Number} The maximum geometric error.\n */\nGoogleEarthEnterpriseTerrainProvider.prototype.getLevelMaximumGeometricError = function (\n  level\n) {\n  return this._levelZeroMaximumGeometricError / (1 << level);\n};\n\n/**\n * Determines whether data for a tile is available to be loaded.\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @returns {Boolean|undefined} Undefined if not supported, otherwise true or false.\n */\nGoogleEarthEnterpriseTerrainProvider.prototype.getTileDataAvailable = function (\n  x,\n  y,\n  level\n) {\n  var metadata = this._metadata;\n  var quadKey = _GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].tileXYToQuadKey */ .Z.tileXYToQuadKey(x, y, level);\n\n  var info = metadata.getTileInformation(x, y, level);\n  if (info === null) {\n    return false;\n  }\n\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(info)) {\n    if (!info.ancestorHasTerrain) {\n      return true; // We\'ll just return the ellipsoid\n    }\n\n    var terrainState = info.terrainState;\n    if (terrainState === TerrainState.NONE) {\n      return false; // Terrain is not available\n    }\n\n    if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(terrainState) || terrainState === TerrainState.UNKNOWN) {\n      info.terrainState = TerrainState.UNKNOWN;\n      if (!info.hasTerrain()) {\n        quadKey = quadKey.substring(0, quadKey.length - 1);\n        var parentInfo = metadata.getTileInformationFromQuadKey(quadKey);\n        if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(parentInfo) || !parentInfo.hasTerrain()) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  if (metadata.isValid(quadKey)) {\n    // We will need this tile, so request metadata and return false for now\n    var request = new _Request_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n      throttle: false,\n      throttleByServer: true,\n      type: _RequestType_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].TERRAIN */ .Z.TERRAIN,\n    });\n    metadata.populateSubtree(x, y, level, request);\n  }\n  return false;\n};\n\n/**\n * Makes sure we load availability data for a tile\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @returns {undefined|Promise<void>} Undefined if nothing need to be loaded or a Promise that resolves when all required tiles are loaded\n */\nGoogleEarthEnterpriseTerrainProvider.prototype.loadTileDataAvailability = function (\n  x,\n  y,\n  level\n) {\n  return undefined;\n};\n\n//\n// Functions to handle imagery packets\n//\nfunction buildTerrainResource(terrainProvider, quadKey, version, request) {\n  version = (0,_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(version) && version > 0 ? version : 1;\n  return terrainProvider._metadata.resource.getDerivedResource({\n    url: "flatfile?f1c-0" + quadKey + "-t." + version.toString(),\n    request: request,\n  });\n}\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (GoogleEarthEnterpriseTerrainProvider)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE7QUFDbkIsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUVBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esc0VBQWUsb0ZBQW9DLElBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9Hb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIuanM/MDA0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5pbXBvcnQgQ3JlZGl0IGZyb20gXCIuL0NyZWRpdC5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuL0V2ZW50LmpzXCI7XG5pbXBvcnQgR2VvZ3JhcGhpY1RpbGluZ1NjaGVtZSBmcm9tIFwiLi9HZW9ncmFwaGljVGlsaW5nU2NoZW1lLmpzXCI7XG5pbXBvcnQgR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEgZnJvbSBcIi4vR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEuanNcIjtcbmltcG9ydCBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluRGF0YSBmcm9tIFwiLi9Hb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluRGF0YS5qc1wiO1xuaW1wb3J0IEhlaWdodG1hcFRlcnJhaW5EYXRhIGZyb20gXCIuL0hlaWdodG1hcFRlcnJhaW5EYXRhLmpzXCI7XG5pbXBvcnQgSnVsaWFuRGF0ZSBmcm9tIFwiLi9KdWxpYW5EYXRlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi9NYXRoLmpzXCI7XG5pbXBvcnQgUmVjdGFuZ2xlIGZyb20gXCIuL1JlY3RhbmdsZS5qc1wiO1xuaW1wb3J0IFJlcXVlc3QgZnJvbSBcIi4vUmVxdWVzdC5qc1wiO1xuaW1wb3J0IFJlcXVlc3RTdGF0ZSBmcm9tIFwiLi9SZXF1ZXN0U3RhdGUuanNcIjtcbmltcG9ydCBSZXF1ZXN0VHlwZSBmcm9tIFwiLi9SZXF1ZXN0VHlwZS5qc1wiO1xuaW1wb3J0IFJlc291cmNlIGZyb20gXCIuL1Jlc291cmNlLmpzXCI7XG5pbXBvcnQgUnVudGltZUVycm9yIGZyb20gXCIuL1J1bnRpbWVFcnJvci5qc1wiO1xuaW1wb3J0IFRhc2tQcm9jZXNzb3IgZnJvbSBcIi4vVGFza1Byb2Nlc3Nvci5qc1wiO1xuaW1wb3J0IFRpbGVQcm92aWRlckVycm9yIGZyb20gXCIuL1RpbGVQcm92aWRlckVycm9yLmpzXCI7XG5cbnZhciBUZXJyYWluU3RhdGUgPSB7XG4gIFVOS05PV046IDAsXG4gIE5PTkU6IDEsXG4gIFNFTEY6IDIsXG4gIFBBUkVOVDogMyxcbn07XG5cbnZhciBqdWxpYW5EYXRlU2NyYXRjaCA9IG5ldyBKdWxpYW5EYXRlKCk7XG5cbmZ1bmN0aW9uIFRlcnJhaW5DYWNoZSgpIHtcbiAgdGhpcy5fdGVycmFpbkNhY2hlID0ge307XG4gIHRoaXMuX2xhc3RUaWR5ID0gSnVsaWFuRGF0ZS5ub3coKTtcbn1cblxuVGVycmFpbkNhY2hlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAocXVhZEtleSwgYnVmZmVyKSB7XG4gIHRoaXMuX3RlcnJhaW5DYWNoZVtxdWFkS2V5XSA9IHtcbiAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICB0aW1lc3RhbXA6IEp1bGlhbkRhdGUubm93KCksXG4gIH07XG59O1xuXG5UZXJyYWluQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChxdWFkS2V5KSB7XG4gIHZhciB0ZXJyYWluQ2FjaGUgPSB0aGlzLl90ZXJyYWluQ2FjaGU7XG4gIHZhciByZXN1bHQgPSB0ZXJyYWluQ2FjaGVbcXVhZEtleV07XG4gIGlmIChkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICBkZWxldGUgdGhpcy5fdGVycmFpbkNhY2hlW3F1YWRLZXldO1xuICAgIHJldHVybiByZXN1bHQuYnVmZmVyO1xuICB9XG59O1xuXG5UZXJyYWluQ2FjaGUucHJvdG90eXBlLnRpZHkgPSBmdW5jdGlvbiAoKSB7XG4gIEp1bGlhbkRhdGUubm93KGp1bGlhbkRhdGVTY3JhdGNoKTtcbiAgaWYgKEp1bGlhbkRhdGUuc2Vjb25kc0RpZmZlcmVuY2UoanVsaWFuRGF0ZVNjcmF0Y2gsIHRoaXMuX2xhc3RUaWR5KSA+IDEwKSB7XG4gICAgdmFyIHRlcnJhaW5DYWNoZSA9IHRoaXMuX3RlcnJhaW5DYWNoZTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRlcnJhaW5DYWNoZSk7XG4gICAgdmFyIGNvdW50ID0ga2V5cy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICB2YXIgayA9IGtleXNbaV07XG4gICAgICB2YXIgZSA9IHRlcnJhaW5DYWNoZVtrXTtcbiAgICAgIGlmIChKdWxpYW5EYXRlLnNlY29uZHNEaWZmZXJlbmNlKGp1bGlhbkRhdGVTY3JhdGNoLCBlLnRpbWVzdGFtcCkgPiAxMCkge1xuICAgICAgICBkZWxldGUgdGVycmFpbkNhY2hlW2tdO1xuICAgICAgfVxuICAgIH1cblxuICAgIEp1bGlhbkRhdGUuY2xvbmUoanVsaWFuRGF0ZVNjcmF0Y2gsIHRoaXMuX2xhc3RUaWR5KTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcm92aWRlcyB0aWxlZCB0ZXJyYWluIHVzaW5nIHRoZSBHb29nbGUgRWFydGggRW50ZXJwcmlzZSBSRVNUIEFQSS5cbiAqXG4gKiBAYWxpYXMgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge1Jlc291cmNlfFN0cmluZ30gb3B0aW9ucy51cmwgVGhlIHVybCBvZiB0aGUgR29vZ2xlIEVhcnRoIEVudGVycHJpc2Ugc2VydmVyIGhvc3RpbmcgdGhlIGltYWdlcnkuXG4gKiBAcGFyYW0ge0dvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhfSBvcHRpb25zLm1ldGFkYXRhIEEgbWV0YWRhdGEgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gc2hhcmUgbWV0YWRhdGEgcmVxdWVzdHMgd2l0aCBhIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5cbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWRdIFRoZSBlbGxpcHNvaWQuICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgV0dTODQgZWxsaXBzb2lkIGlzIHVzZWQuXG4gKiBAcGFyYW0ge0NyZWRpdHxTdHJpbmd9IFtvcHRpb25zLmNyZWRpdF0gQSBjcmVkaXQgZm9yIHRoZSBkYXRhIHNvdXJjZSwgd2hpY2ggaXMgZGlzcGxheWVkIG9uIHRoZSBjYW52YXMuXG4gKlxuICogQHNlZSBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgQ2VzaXVtVGVycmFpblByb3ZpZGVyXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBnZWVNZXRhZGF0YSA9IG5ldyBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YSgnaHR0cDovL3d3dy5lYXJ0aGVudGVycHJpc2Uub3JnLzNkJyk7XG4gKiB2YXIgZ2VlID0gbmV3IENlc2l1bS5Hb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIoe1xuICogICAgIG1ldGFkYXRhIDogZ2VlTWV0YWRhdGFcbiAqIH0pO1xuICpcbiAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvfENyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nfVxuICovXG5mdW5jdGlvbiBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghKGRlZmluZWQob3B0aW9ucy51cmwpIHx8IGRlZmluZWQob3B0aW9ucy5tZXRhZGF0YSkpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy51cmwgb3Igb3B0aW9ucy5tZXRhZGF0YSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIG1ldGFkYXRhO1xuICBpZiAoZGVmaW5lZChvcHRpb25zLm1ldGFkYXRhKSkge1xuICAgIG1ldGFkYXRhID0gb3B0aW9ucy5tZXRhZGF0YTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzb3VyY2UgPSBSZXNvdXJjZS5jcmVhdGVJZk5lZWRlZChvcHRpb25zLnVybCk7XG4gICAgbWV0YWRhdGEgPSBuZXcgR29vZ2xlRWFydGhFbnRlcnByaXNlTWV0YWRhdGEocmVzb3VyY2UpO1xuICB9XG5cbiAgdGhpcy5fbWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgdGhpcy5fdGlsaW5nU2NoZW1lID0gbmV3IEdlb2dyYXBoaWNUaWxpbmdTY2hlbWUoe1xuICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNYOiAyLFxuICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNZOiAyLFxuICAgIHJlY3RhbmdsZTogbmV3IFJlY3RhbmdsZShcbiAgICAgIC1DZXNpdW1NYXRoLlBJLFxuICAgICAgLUNlc2l1bU1hdGguUEksXG4gICAgICBDZXNpdW1NYXRoLlBJLFxuICAgICAgQ2VzaXVtTWF0aC5QSVxuICAgICksXG4gICAgZWxsaXBzb2lkOiBvcHRpb25zLmVsbGlwc29pZCxcbiAgfSk7XG5cbiAgdmFyIGNyZWRpdCA9IG9wdGlvbnMuY3JlZGl0O1xuICBpZiAodHlwZW9mIGNyZWRpdCA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNyZWRpdCA9IG5ldyBDcmVkaXQoY3JlZGl0KTtcbiAgfVxuICB0aGlzLl9jcmVkaXQgPSBjcmVkaXQ7XG5cbiAgLy8gUHVsbGVkIGZyb20gR29vZ2xlJ3MgZG9jdW1lbnRhdGlvblxuICB0aGlzLl9sZXZlbFplcm9NYXhpbXVtR2VvbWV0cmljRXJyb3IgPSA0MDA3NS4xNjtcblxuICB0aGlzLl90ZXJyYWluQ2FjaGUgPSBuZXcgVGVycmFpbkNhY2hlKCk7XG4gIHRoaXMuX3RlcnJhaW5Qcm9taXNlcyA9IHt9O1xuICB0aGlzLl90ZXJyYWluUmVxdWVzdHMgPSB7fTtcblxuICB0aGlzLl9lcnJvckV2ZW50ID0gbmV3IEV2ZW50KCk7XG5cbiAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB2YXIgbWV0YWRhdGFFcnJvcjtcbiAgdGhpcy5fcmVhZHlQcm9taXNlID0gbWV0YWRhdGEucmVhZHlQcm9taXNlXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgaWYgKCFtZXRhZGF0YS50ZXJyYWluUHJlc2VudCkge1xuICAgICAgICB2YXIgZSA9IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgXCJUaGUgc2VydmVyIFwiICsgbWV0YWRhdGEudXJsICsgXCIgZG9lc24ndCBoYXZlIHRlcnJhaW5cIlxuICAgICAgICApO1xuICAgICAgICBtZXRhZGF0YUVycm9yID0gVGlsZVByb3ZpZGVyRXJyb3IuaGFuZGxlRXJyb3IoXG4gICAgICAgICAgbWV0YWRhdGFFcnJvcixcbiAgICAgICAgICB0aGF0LFxuICAgICAgICAgIHRoYXQuX2Vycm9yRXZlbnQsXG4gICAgICAgICAgZS5tZXNzYWdlLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIGVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHdoZW4ucmVqZWN0KGUpO1xuICAgICAgfVxuXG4gICAgICBUaWxlUHJvdmlkZXJFcnJvci5oYW5kbGVTdWNjZXNzKG1ldGFkYXRhRXJyb3IpO1xuICAgICAgdGhhdC5fcmVhZHkgPSByZXN1bHQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pXG4gICAgLm90aGVyd2lzZShmdW5jdGlvbiAoZSkge1xuICAgICAgbWV0YWRhdGFFcnJvciA9IFRpbGVQcm92aWRlckVycm9yLmhhbmRsZUVycm9yKFxuICAgICAgICBtZXRhZGF0YUVycm9yLFxuICAgICAgICB0aGF0LFxuICAgICAgICB0aGF0Ll9lcnJvckV2ZW50LFxuICAgICAgICBlLm1lc3NhZ2UsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGVcbiAgICAgICk7XG4gICAgICByZXR1cm4gd2hlbi5yZWplY3QoZSk7XG4gICAgfSk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlci5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgdGhlIG5hbWUgb2YgdGhlIEdvb2dsZSBFYXJ0aCBFbnRlcnByaXNlIHNlcnZlciB1cmwgaG9zdGluZyB0aGUgaW1hZ2VyeS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB1cmw6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tZXRhZGF0YS51cmw7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgcHJveHkgdXNlZCBieSB0aGlzIHByb3ZpZGVyLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJveHl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcHJveHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tZXRhZGF0YS5wcm94eTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxpbmcgc2NoZW1lIHVzZWQgYnkgdGhpcyBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxpbmdTY2hlbWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGluZ1NjaGVtZSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gdGhlIGltYWdlcnkgcHJvdmlkZXIgZW5jb3VudGVycyBhbiBhc3luY2hyb25vdXMgZXJyb3IuICBCeSBzdWJzY3JpYmluZ1xuICAgKiB0byB0aGUgZXZlbnQsIHlvdSB3aWxsIGJlIG5vdGlmaWVkIG9mIHRoZSBlcnJvciBhbmQgY2FuIHBvdGVudGlhbGx5IHJlY292ZXIgZnJvbSBpdC4gIEV2ZW50IGxpc3RlbmVyc1xuICAgKiBhcmUgcGFzc2VkIGFuIGluc3RhbmNlIG9mIHtAbGluayBUaWxlUHJvdmlkZXJFcnJvcn0uXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBlcnJvckV2ZW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXJyb3JFdmVudDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRydWUgd2hlbiB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb21pc2UuPEJvb2xlYW4+fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5UHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5UHJvbWlzZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjcmVkaXQgdG8gZGlzcGxheSB3aGVuIHRoaXMgdGVycmFpbiBwcm92aWRlciBpcyBhY3RpdmUuICBUeXBpY2FsbHkgdGhpcyBpcyB1c2VkIHRvIGNyZWRpdFxuICAgKiB0aGUgc291cmNlIG9mIHRoZSB0ZXJyYWluLiAgVGhpcyBmdW5jdGlvbiBzaG91bGQgbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q3JlZGl0fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGNyZWRpdDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NyZWRpdDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgcHJvdmlkZXIgaW5jbHVkZXMgYSB3YXRlciBtYXNrLiAgVGhlIHdhdGVyIG1hc2tcbiAgICogaW5kaWNhdGVzIHdoaWNoIGFyZWFzIG9mIHRoZSBnbG9iZSBhcmUgd2F0ZXIgcmF0aGVyIHRoYW4gbGFuZCwgc28gdGhleSBjYW4gYmUgcmVuZGVyZWRcbiAgICogYXMgYSByZWZsZWN0aXZlIHN1cmZhY2Ugd2l0aCBhbmltYXRlZCB3YXZlcy4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZVxuICAgKiBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaGFzV2F0ZXJNYXNrOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhlIHJlcXVlc3RlZCB0aWxlcyBpbmNsdWRlIHZlcnRleCBub3JtYWxzLlxuICAgKiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhhc1ZlcnRleE5vcm1hbHM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSBhdmFpbGFiaWxpdHkgb2YgdGVycmFpbiBmcm9tIHRoaXMgcHJvdmlkZXIsIHN1Y2ggYXNcbiAgICogYXQgcG9pbnRzIGFuZCBpbiByZWN0YW5nbGVzLiAgVGhpcyBmdW5jdGlvbiBzaG91bGQgbm90IGJlIGNhbGxlZCBiZWZvcmVcbiAgICoge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLiAgVGhpcyBwcm9wZXJ0eSBtYXkgYmUgdW5kZWZpbmVkIGlmIGF2YWlsYWJpbGl0eVxuICAgKiBpbmZvcm1hdGlvbiBpcyBub3QgYXZhaWxhYmxlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7VGlsZUF2YWlsYWJpbGl0eX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBhdmFpbGFiaWxpdHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG52YXIgdGFza1Byb2Nlc3NvciA9IG5ldyBUYXNrUHJvY2Vzc29yKFwiZGVjb2RlR29vZ2xlRWFydGhFbnRlcnByaXNlUGFja2V0XCIpO1xuXG4vLyBJZiB0aGUgdGlsZSBoYXMgaXRzIG93biB0ZXJyYWluLCB0aGVuIHlvdSBjYW4ganVzdCB1c2UgaXRzIGNoaWxkIGJpdG1hc2suIElmIGl0IHdhcyByZXF1ZXN0ZWQgdXNpbmcgaXQncyBwYXJlbnRcbi8vICB0aGVuIHlvdSBuZWVkIHRvIGNoZWNrIGFsbCBvZiBpdHMgY2hpbGRyZW4gdG8gc2VlIGlmIHRoZXkgaGF2ZSB0ZXJyYWluLlxuZnVuY3Rpb24gY29tcHV0ZUNoaWxkTWFzayhxdWFkS2V5LCBpbmZvLCBtZXRhZGF0YSkge1xuICB2YXIgY2hpbGRNYXNrID0gaW5mby5nZXRDaGlsZEJpdG1hc2soKTtcbiAgaWYgKGluZm8udGVycmFpblN0YXRlID09PSBUZXJyYWluU3RhdGUuUEFSRU5UKSB7XG4gICAgY2hpbGRNYXNrID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7ICsraSkge1xuICAgICAgdmFyIGNoaWxkID0gbWV0YWRhdGEuZ2V0VGlsZUluZm9ybWF0aW9uRnJvbVF1YWRLZXkoXG4gICAgICAgIHF1YWRLZXkgKyBpLnRvU3RyaW5nKClcbiAgICAgICk7XG4gICAgICBpZiAoZGVmaW5lZChjaGlsZCkgJiYgY2hpbGQuaGFzVGVycmFpbigpKSB7XG4gICAgICAgIGNoaWxkTWFzayB8PSAxIDw8IGk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNoaWxkTWFzaztcbn1cblxuLyoqXG4gKiBSZXF1ZXN0cyB0aGUgZ2VvbWV0cnkgZm9yIGEgZ2l2ZW4gdGlsZS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZSBjYWxsZWQgYmVmb3JlXG4gKiB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuICBUaGUgcmVzdWx0IG11c3QgaW5jbHVkZSB0ZXJyYWluIGRhdGEgYW5kXG4gKiBtYXkgb3B0aW9uYWxseSBpbmNsdWRlIGEgd2F0ZXIgbWFzayBhbmQgYW4gaW5kaWNhdGlvbiBvZiB3aGljaCBjaGlsZCB0aWxlcyBhcmUgYXZhaWxhYmxlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIHRpbGUgZm9yIHdoaWNoIHRvIHJlcXVlc3QgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSB0aWxlIGZvciB3aGljaCB0byByZXF1ZXN0IGdlb21ldHJ5LlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSBsZXZlbCBvZiB0aGUgdGlsZSBmb3Igd2hpY2ggdG8gcmVxdWVzdCBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7UmVxdWVzdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0IG9iamVjdC4gSW50ZW5kZWQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICogQHJldHVybnMge1Byb21pc2UuPFRlcnJhaW5EYXRhPnx1bmRlZmluZWR9IEEgcHJvbWlzZSBmb3IgdGhlIHJlcXVlc3RlZCBnZW9tZXRyeS4gIElmIHRoaXMgbWV0aG9kXG4gKiAgICAgICAgICByZXR1cm5zIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGEgcHJvbWlzZSwgaXQgaXMgYW4gaW5kaWNhdGlvbiB0aGF0IHRvbyBtYW55IHJlcXVlc3RzIGFyZSBhbHJlYWR5XG4gKiAgICAgICAgICBwZW5kaW5nIGFuZCB0aGUgcmVxdWVzdCB3aWxsIGJlIHJldHJpZWQgbGF0ZXIuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgZnVuY3Rpb24gbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyI3JlYWR5fVxuICogICAgICAgICAgICByZXR1cm5zIHRydWUuXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZVRlcnJhaW5Qcm92aWRlci5wcm90b3R5cGUucmVxdWVzdFRpbGVHZW9tZXRyeSA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWwsXG4gIHJlcXVlc3Rcbikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpXG4gIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcInJlcXVlc3RUaWxlR2VvbWV0cnkgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgdGVycmFpbiBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHF1YWRLZXkgPSBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS50aWxlWFlUb1F1YWRLZXkoeCwgeSwgbGV2ZWwpO1xuICB2YXIgdGVycmFpbkNhY2hlID0gdGhpcy5fdGVycmFpbkNhY2hlO1xuICB2YXIgbWV0YWRhdGEgPSB0aGlzLl9tZXRhZGF0YTtcbiAgdmFyIGluZm8gPSBtZXRhZGF0YS5nZXRUaWxlSW5mb3JtYXRpb25Gcm9tUXVhZEtleShxdWFkS2V5KTtcblxuICAvLyBDaGVjayBpZiB0aGlzIHRpbGUgaXMgZXZlbiBwb3NzaWJseSBhdmFpbGFibGVcbiAgaWYgKCFkZWZpbmVkKGluZm8pKSB7XG4gICAgcmV0dXJuIHdoZW4ucmVqZWN0KG5ldyBSdW50aW1lRXJyb3IoXCJUZXJyYWluIHRpbGUgZG9lc24ndCBleGlzdFwiKSk7XG4gIH1cblxuICB2YXIgdGVycmFpblN0YXRlID0gaW5mby50ZXJyYWluU3RhdGU7XG4gIGlmICghZGVmaW5lZCh0ZXJyYWluU3RhdGUpKSB7XG4gICAgLy8gRmlyc3QgdGltZSB3ZSBoYXZlIHRyaWVkIHRvIGxvYWQgdGhpcyB0aWxlLCBzbyBzZXQgdGVycmFpbiBzdGF0ZSB0byBVTktOT1dOXG4gICAgdGVycmFpblN0YXRlID0gaW5mby50ZXJyYWluU3RhdGUgPSBUZXJyYWluU3RhdGUuVU5LTk9XTjtcbiAgfVxuXG4gIC8vIElmIGl0cyBpbiB0aGUgY2FjaGUsIHJldHVybiBpdFxuICB2YXIgYnVmZmVyID0gdGVycmFpbkNhY2hlLmdldChxdWFkS2V5KTtcbiAgaWYgKGRlZmluZWQoYnVmZmVyKSkge1xuICAgIHZhciBjcmVkaXQgPSBtZXRhZGF0YS5wcm92aWRlcnNbaW5mby50ZXJyYWluUHJvdmlkZXJdO1xuICAgIHJldHVybiB3aGVuLnJlc29sdmUoXG4gICAgICBuZXcgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpbkRhdGEoe1xuICAgICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgICAgY2hpbGRUaWxlTWFzazogY29tcHV0ZUNoaWxkTWFzayhxdWFkS2V5LCBpbmZvLCBtZXRhZGF0YSksXG4gICAgICAgIGNyZWRpdHM6IGRlZmluZWQoY3JlZGl0KSA/IFtjcmVkaXRdIDogdW5kZWZpbmVkLFxuICAgICAgICBuZWdhdGl2ZUFsdGl0dWRlRXhwb25lbnRCaWFzOiBtZXRhZGF0YS5uZWdhdGl2ZUFsdGl0dWRlRXhwb25lbnRCaWFzLFxuICAgICAgICBuZWdhdGl2ZUVsZXZhdGlvblRocmVzaG9sZDogbWV0YWRhdGEubmVnYXRpdmVBbHRpdHVkZVRocmVzaG9sZCxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIC8vIENsZWFuIHVwIHRoZSBjYWNoZVxuICB0ZXJyYWluQ2FjaGUudGlkeSgpO1xuXG4gIC8vIFdlIGhhdmUgYSB0aWxlLCBjaGVjayB0byBzZWUgaWYgbm8gYW5jZXN0b3JzIGhhdmUgdGVycmFpbiBvciB0aGF0IHdlIGtub3cgZm9yIHN1cmUgaXQgZG9lc24ndFxuICBpZiAoIWluZm8uYW5jZXN0b3JIYXNUZXJyYWluKSB7XG4gICAgLy8gV2UgaGF2ZW4ndCByZWFjaGVkIGEgbGV2ZWwgd2l0aCB0ZXJyYWluLCBzbyByZXR1cm4gdGhlIGVsbGlwc29pZFxuICAgIHJldHVybiB3aGVuLnJlc29sdmUoXG4gICAgICBuZXcgSGVpZ2h0bWFwVGVycmFpbkRhdGEoe1xuICAgICAgICBidWZmZXI6IG5ldyBVaW50OEFycmF5KDE2ICogMTYpLFxuICAgICAgICB3aWR0aDogMTYsXG4gICAgICAgIGhlaWdodDogMTYsXG4gICAgICB9KVxuICAgICk7XG4gIH0gZWxzZSBpZiAodGVycmFpblN0YXRlID09PSBUZXJyYWluU3RhdGUuTk9ORSkge1xuICAgIC8vIEFscmVhZHkgaGF2ZSBpbmZvIGFuZCB0aGVyZSBpc24ndCBhbnkgdGVycmFpbiBoZXJlXG4gICAgcmV0dXJuIHdoZW4ucmVqZWN0KG5ldyBSdW50aW1lRXJyb3IoXCJUZXJyYWluIHRpbGUgZG9lc24ndCBleGlzdFwiKSk7XG4gIH1cblxuICAvLyBGaWd1cmUgb3V0IHdoZXJlIHdlIGFyZSBnZXR0aW5nIHRoZSB0ZXJyYWluIGFuZCB3aGF0IHZlcnNpb25cbiAgdmFyIHBhcmVudEluZm87XG4gIHZhciBxID0gcXVhZEtleTtcbiAgdmFyIHRlcnJhaW5WZXJzaW9uID0gLTE7XG4gIHN3aXRjaCAodGVycmFpblN0YXRlKSB7XG4gICAgY2FzZSBUZXJyYWluU3RhdGUuU0VMRjogLy8gV2UgaGF2ZSB0ZXJyYWluIGFuZCBoYXZlIHJldHJpZXZlZCBpdCBiZWZvcmVcbiAgICAgIHRlcnJhaW5WZXJzaW9uID0gaW5mby50ZXJyYWluVmVyc2lvbjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGVycmFpblN0YXRlLlBBUkVOVDogLy8gV2UgaGF2ZSB0ZXJyYWluIGluIG91ciBwYXJlbnRcbiAgICAgIHEgPSBxLnN1YnN0cmluZygwLCBxLmxlbmd0aCAtIDEpO1xuICAgICAgcGFyZW50SW5mbyA9IG1ldGFkYXRhLmdldFRpbGVJbmZvcm1hdGlvbkZyb21RdWFkS2V5KHEpO1xuICAgICAgdGVycmFpblZlcnNpb24gPSBwYXJlbnRJbmZvLnRlcnJhaW5WZXJzaW9uO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUZXJyYWluU3RhdGUuVU5LTk9XTjogLy8gV2UgaGF2ZW4ndCB0cmllZCB0byByZXRyaWV2ZSB0ZXJyYWluIHlldFxuICAgICAgaWYgKGluZm8uaGFzVGVycmFpbigpKSB7XG4gICAgICAgIHRlcnJhaW5WZXJzaW9uID0gaW5mby50ZXJyYWluVmVyc2lvbjsgLy8gV2Ugc2hvdWxkIGhhdmUgdGVycmFpblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcSA9IHEuc3Vic3RyaW5nKDAsIHEubGVuZ3RoIC0gMSk7XG4gICAgICAgIHBhcmVudEluZm8gPSBtZXRhZGF0YS5nZXRUaWxlSW5mb3JtYXRpb25Gcm9tUXVhZEtleShxKTtcbiAgICAgICAgaWYgKGRlZmluZWQocGFyZW50SW5mbykgJiYgcGFyZW50SW5mby5oYXNUZXJyYWluKCkpIHtcbiAgICAgICAgICB0ZXJyYWluVmVyc2lvbiA9IHBhcmVudEluZm8udGVycmFpblZlcnNpb247IC8vIFRyeSBjaGVja2luZyBpbiB0aGUgcGFyZW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgLy8gV2UgY2FuJ3QgZmlndXJlIG91dCB3aGVyZSB0byBnZXQgdGhlIHRlcnJhaW5cbiAgaWYgKHRlcnJhaW5WZXJzaW9uIDwgMCkge1xuICAgIHJldHVybiB3aGVuLnJlamVjdChuZXcgUnVudGltZUVycm9yKFwiVGVycmFpbiB0aWxlIGRvZXNuJ3QgZXhpc3RcIikpO1xuICB9XG5cbiAgLy8gTG9hZCB0aGF0IHRlcnJhaW5cbiAgdmFyIHRlcnJhaW5Qcm9taXNlcyA9IHRoaXMuX3RlcnJhaW5Qcm9taXNlcztcbiAgdmFyIHRlcnJhaW5SZXF1ZXN0cyA9IHRoaXMuX3RlcnJhaW5SZXF1ZXN0cztcbiAgdmFyIHNoYXJlZFByb21pc2U7XG4gIHZhciBzaGFyZWRSZXF1ZXN0O1xuICBpZiAoZGVmaW5lZCh0ZXJyYWluUHJvbWlzZXNbcV0pKSB7XG4gICAgLy8gQWxyZWFkeSBiZWluZyBsb2FkZWQgcG9zc2libHkgZnJvbSBhbm90aGVyIGNoaWxkLCBzbyByZXR1cm4gZXhpc3RpbmcgcHJvbWlzZVxuICAgIHNoYXJlZFByb21pc2UgPSB0ZXJyYWluUHJvbWlzZXNbcV07XG4gICAgc2hhcmVkUmVxdWVzdCA9IHRlcnJhaW5SZXF1ZXN0c1txXTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDcmVhdGUgbmV3IHJlcXVlc3QgZm9yIHRlcnJhaW5cbiAgICBzaGFyZWRSZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICB2YXIgcmVxdWVzdFByb21pc2UgPSBidWlsZFRlcnJhaW5SZXNvdXJjZShcbiAgICAgIHRoaXMsXG4gICAgICBxLFxuICAgICAgdGVycmFpblZlcnNpb24sXG4gICAgICBzaGFyZWRSZXF1ZXN0XG4gICAgKS5mZXRjaEFycmF5QnVmZmVyKCk7XG5cbiAgICBpZiAoIWRlZmluZWQocmVxdWVzdFByb21pc2UpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkOyAvLyBUaHJvdHRsZWRcbiAgICB9XG5cbiAgICBzaGFyZWRQcm9taXNlID0gcmVxdWVzdFByb21pc2UudGhlbihmdW5jdGlvbiAodGVycmFpbikge1xuICAgICAgaWYgKGRlZmluZWQodGVycmFpbikpIHtcbiAgICAgICAgcmV0dXJuIHRhc2tQcm9jZXNzb3JcbiAgICAgICAgICAuc2NoZWR1bGVUYXNrKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBidWZmZXI6IHRlcnJhaW4sXG4gICAgICAgICAgICAgIHR5cGU6IFwiVGVycmFpblwiLFxuICAgICAgICAgICAgICBrZXk6IG1ldGFkYXRhLmtleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbdGVycmFpbl1cbiAgICAgICAgICApXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRlcnJhaW5UaWxlcykge1xuICAgICAgICAgICAgLy8gQWRkIHJlcXVlc3RlZCB0aWxlIGFuZCBtYXJrIGl0IGFzIFNFTEZcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ZWRJbmZvID0gbWV0YWRhdGEuZ2V0VGlsZUluZm9ybWF0aW9uRnJvbVF1YWRLZXkocSk7XG4gICAgICAgICAgICByZXF1ZXN0ZWRJbmZvLnRlcnJhaW5TdGF0ZSA9IFRlcnJhaW5TdGF0ZS5TRUxGO1xuICAgICAgICAgICAgdGVycmFpbkNhY2hlLmFkZChxLCB0ZXJyYWluVGlsZXNbMF0pO1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gcmVxdWVzdGVkSW5mby50ZXJyYWluUHJvdmlkZXI7XG5cbiAgICAgICAgICAgIC8vIEFkZCBjaGlsZHJlbiB0byBjYWNoZVxuICAgICAgICAgICAgdmFyIGNvdW50ID0gdGVycmFpblRpbGVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvdW50OyArK2opIHtcbiAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gcSArIGoudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgdmFyIGNoaWxkID0gbWV0YWRhdGEuZ2V0VGlsZUluZm9ybWF0aW9uRnJvbVF1YWRLZXkoY2hpbGRLZXkpO1xuICAgICAgICAgICAgICBpZiAoZGVmaW5lZChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICB0ZXJyYWluQ2FjaGUuYWRkKGNoaWxkS2V5LCB0ZXJyYWluVGlsZXNbaiArIDFdKTtcbiAgICAgICAgICAgICAgICBjaGlsZC50ZXJyYWluU3RhdGUgPSBUZXJyYWluU3RhdGUuUEFSRU5UO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC50ZXJyYWluUHJvdmlkZXIgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkLnRlcnJhaW5Qcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gd2hlbi5yZWplY3QobmV3IFJ1bnRpbWVFcnJvcihcIkZhaWxlZCB0byBsb2FkIHRlcnJhaW4uXCIpKTtcbiAgICB9KTtcblxuICAgIHRlcnJhaW5Qcm9taXNlc1txXSA9IHNoYXJlZFByb21pc2U7IC8vIFN0b3JlIHByb21pc2Ugd2l0aG91dCBkZWxldGUgZnJvbSB0ZXJyYWluUHJvbWlzZXNcbiAgICB0ZXJyYWluUmVxdWVzdHNbcV0gPSBzaGFyZWRSZXF1ZXN0O1xuXG4gICAgLy8gU2V0IHByb21pc2Ugc28gd2UgcmVtb3ZlIGZyb20gdGVycmFpblByb21pc2VzIGp1c3Qgb25lIHRpbWVcbiAgICBzaGFyZWRQcm9taXNlID0gc2hhcmVkUHJvbWlzZS5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgICAgZGVsZXRlIHRlcnJhaW5Qcm9taXNlc1txXTtcbiAgICAgIGRlbGV0ZSB0ZXJyYWluUmVxdWVzdHNbcV07XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gc2hhcmVkUHJvbWlzZVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBidWZmZXIgPSB0ZXJyYWluQ2FjaGUuZ2V0KHF1YWRLZXkpO1xuICAgICAgaWYgKGRlZmluZWQoYnVmZmVyKSkge1xuICAgICAgICB2YXIgY3JlZGl0ID0gbWV0YWRhdGEucHJvdmlkZXJzW2luZm8udGVycmFpblByb3ZpZGVyXTtcbiAgICAgICAgcmV0dXJuIG5ldyBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluRGF0YSh7XG4gICAgICAgICAgYnVmZmVyOiBidWZmZXIsXG4gICAgICAgICAgY2hpbGRUaWxlTWFzazogY29tcHV0ZUNoaWxkTWFzayhxdWFkS2V5LCBpbmZvLCBtZXRhZGF0YSksXG4gICAgICAgICAgY3JlZGl0czogZGVmaW5lZChjcmVkaXQpID8gW2NyZWRpdF0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgbmVnYXRpdmVBbHRpdHVkZUV4cG9uZW50QmlhczogbWV0YWRhdGEubmVnYXRpdmVBbHRpdHVkZUV4cG9uZW50QmlhcyxcbiAgICAgICAgICBuZWdhdGl2ZUVsZXZhdGlvblRocmVzaG9sZDogbWV0YWRhdGEubmVnYXRpdmVBbHRpdHVkZVRocmVzaG9sZCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB3aGVuLnJlamVjdChuZXcgUnVudGltZUVycm9yKFwiRmFpbGVkIHRvIGxvYWQgdGVycmFpbi5cIikpO1xuICAgIH0pXG4gICAgLm90aGVyd2lzZShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmIChzaGFyZWRSZXF1ZXN0LnN0YXRlID09PSBSZXF1ZXN0U3RhdGUuQ0FOQ0VMTEVEKSB7XG4gICAgICAgIHJlcXVlc3Quc3RhdGUgPSBzaGFyZWRSZXF1ZXN0LnN0YXRlO1xuICAgICAgICByZXR1cm4gd2hlbi5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgaW5mby50ZXJyYWluU3RhdGUgPSBUZXJyYWluU3RhdGUuTk9ORTtcbiAgICAgIHJldHVybiB3aGVuLnJlamVjdChlcnJvcik7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIG1heGltdW0gZ2VvbWV0cmljIGVycm9yIGFsbG93ZWQgaW4gYSB0aWxlIGF0IGEgZ2l2ZW4gbGV2ZWwuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsIGZvciB3aGljaCB0byBnZXQgdGhlIG1heGltdW0gZ2VvbWV0cmljIGVycm9yLlxuICogQHJldHVybnMge051bWJlcn0gVGhlIG1heGltdW0gZ2VvbWV0cmljIGVycm9yLlxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXIucHJvdG90eXBlLmdldExldmVsTWF4aW11bUdlb21ldHJpY0Vycm9yID0gZnVuY3Rpb24gKFxuICBsZXZlbFxuKSB7XG4gIHJldHVybiB0aGlzLl9sZXZlbFplcm9NYXhpbXVtR2VvbWV0cmljRXJyb3IgLyAoMSA8PCBsZXZlbCk7XG59O1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBkYXRhIGZvciBhIHRpbGUgaXMgYXZhaWxhYmxlIHRvIGJlIGxvYWRlZC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSB0aWxlIGZvciB3aGljaCB0byByZXF1ZXN0IGdlb21ldHJ5LlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgdGlsZSBmb3Igd2hpY2ggdG8gcmVxdWVzdCBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgbGV2ZWwgb2YgdGhlIHRpbGUgZm9yIHdoaWNoIHRvIHJlcXVlc3QgZ2VvbWV0cnkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbnx1bmRlZmluZWR9IFVuZGVmaW5lZCBpZiBub3Qgc3VwcG9ydGVkLCBvdGhlcndpc2UgdHJ1ZSBvciBmYWxzZS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyLnByb3RvdHlwZS5nZXRUaWxlRGF0YUF2YWlsYWJsZSA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWxcbikge1xuICB2YXIgbWV0YWRhdGEgPSB0aGlzLl9tZXRhZGF0YTtcbiAgdmFyIHF1YWRLZXkgPSBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS50aWxlWFlUb1F1YWRLZXkoeCwgeSwgbGV2ZWwpO1xuXG4gIHZhciBpbmZvID0gbWV0YWRhdGEuZ2V0VGlsZUluZm9ybWF0aW9uKHgsIHksIGxldmVsKTtcbiAgaWYgKGluZm8gPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZGVmaW5lZChpbmZvKSkge1xuICAgIGlmICghaW5mby5hbmNlc3Rvckhhc1RlcnJhaW4pIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBXZSdsbCBqdXN0IHJldHVybiB0aGUgZWxsaXBzb2lkXG4gICAgfVxuXG4gICAgdmFyIHRlcnJhaW5TdGF0ZSA9IGluZm8udGVycmFpblN0YXRlO1xuICAgIGlmICh0ZXJyYWluU3RhdGUgPT09IFRlcnJhaW5TdGF0ZS5OT05FKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFRlcnJhaW4gaXMgbm90IGF2YWlsYWJsZVxuICAgIH1cblxuICAgIGlmICghZGVmaW5lZCh0ZXJyYWluU3RhdGUpIHx8IHRlcnJhaW5TdGF0ZSA9PT0gVGVycmFpblN0YXRlLlVOS05PV04pIHtcbiAgICAgIGluZm8udGVycmFpblN0YXRlID0gVGVycmFpblN0YXRlLlVOS05PV047XG4gICAgICBpZiAoIWluZm8uaGFzVGVycmFpbigpKSB7XG4gICAgICAgIHF1YWRLZXkgPSBxdWFkS2V5LnN1YnN0cmluZygwLCBxdWFkS2V5Lmxlbmd0aCAtIDEpO1xuICAgICAgICB2YXIgcGFyZW50SW5mbyA9IG1ldGFkYXRhLmdldFRpbGVJbmZvcm1hdGlvbkZyb21RdWFkS2V5KHF1YWRLZXkpO1xuICAgICAgICBpZiAoIWRlZmluZWQocGFyZW50SW5mbykgfHwgIXBhcmVudEluZm8uaGFzVGVycmFpbigpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAobWV0YWRhdGEuaXNWYWxpZChxdWFkS2V5KSkge1xuICAgIC8vIFdlIHdpbGwgbmVlZCB0aGlzIHRpbGUsIHNvIHJlcXVlc3QgbWV0YWRhdGEgYW5kIHJldHVybiBmYWxzZSBmb3Igbm93XG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh7XG4gICAgICB0aHJvdHRsZTogZmFsc2UsXG4gICAgICB0aHJvdHRsZUJ5U2VydmVyOiB0cnVlLFxuICAgICAgdHlwZTogUmVxdWVzdFR5cGUuVEVSUkFJTixcbiAgICB9KTtcbiAgICBtZXRhZGF0YS5wb3B1bGF0ZVN1YnRyZWUoeCwgeSwgbGV2ZWwsIHJlcXVlc3QpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogTWFrZXMgc3VyZSB3ZSBsb2FkIGF2YWlsYWJpbGl0eSBkYXRhIGZvciBhIHRpbGVcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSB0aWxlIGZvciB3aGljaCB0byByZXF1ZXN0IGdlb21ldHJ5LlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgdGlsZSBmb3Igd2hpY2ggdG8gcmVxdWVzdCBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgbGV2ZWwgb2YgdGhlIHRpbGUgZm9yIHdoaWNoIHRvIHJlcXVlc3QgZ2VvbWV0cnkuXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfFByb21pc2U8dm9pZD59IFVuZGVmaW5lZCBpZiBub3RoaW5nIG5lZWQgdG8gYmUgbG9hZGVkIG9yIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHJlcXVpcmVkIHRpbGVzIGFyZSBsb2FkZWRcbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyLnByb3RvdHlwZS5sb2FkVGlsZURhdGFBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAoXG4gIHgsXG4gIHksXG4gIGxldmVsXG4pIHtcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8vXG4vLyBGdW5jdGlvbnMgdG8gaGFuZGxlIGltYWdlcnkgcGFja2V0c1xuLy9cbmZ1bmN0aW9uIGJ1aWxkVGVycmFpblJlc291cmNlKHRlcnJhaW5Qcm92aWRlciwgcXVhZEtleSwgdmVyc2lvbiwgcmVxdWVzdCkge1xuICB2ZXJzaW9uID0gZGVmaW5lZCh2ZXJzaW9uKSAmJiB2ZXJzaW9uID4gMCA/IHZlcnNpb24gOiAxO1xuICByZXR1cm4gdGVycmFpblByb3ZpZGVyLl9tZXRhZGF0YS5yZXNvdXJjZS5nZXREZXJpdmVkUmVzb3VyY2Uoe1xuICAgIHVybDogXCJmbGF0ZmlsZT9mMWMtMFwiICsgcXVhZEtleSArIFwiLXQuXCIgKyB2ZXJzaW9uLnRvU3RyaW5nKCksXG4gICAgcmVxdWVzdDogcmVxdWVzdCxcbiAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBHb29nbGVFYXJ0aEVudGVycHJpc2VUZXJyYWluUHJvdmlkZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///78858\n')},95852:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82982);\n/* harmony import */ var _isBitSet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29797);\n\n\n\n// Bitmask for checking tile properties\nvar childrenBitmasks = [0x01, 0x02, 0x04, 0x08];\nvar anyChildBitmask = 0x0f;\nvar cacheFlagBitmask = 0x10; // True if there is a child subtree\nvar imageBitmask = 0x40;\nvar terrainBitmask = 0x80;\n\n/**\n * Contains information about each tile from a Google Earth Enterprise server\n *\n * @param {Number} bits Bitmask that contains the type of data and available children for each tile.\n * @param {Number} cnodeVersion Version of the request for subtree metadata.\n * @param {Number} imageryVersion Version of the request for imagery tile.\n * @param {Number} terrainVersion Version of the request for terrain tile.\n * @param {Number} imageryProvider Id of imagery provider.\n * @param {Number} terrainProvider Id of terrain provider.\n *\n * @private\n */\nfunction GoogleEarthEnterpriseTileInformation(\n  bits,\n  cnodeVersion,\n  imageryVersion,\n  terrainVersion,\n  imageryProvider,\n  terrainProvider\n) {\n  this._bits = bits;\n  this.cnodeVersion = cnodeVersion;\n  this.imageryVersion = imageryVersion;\n  this.terrainVersion = terrainVersion;\n  this.imageryProvider = imageryProvider;\n  this.terrainProvider = terrainProvider;\n  this.ancestorHasTerrain = false; // Set it later once we find its parent\n  this.terrainState = undefined;\n}\n\n/**\n * Creates GoogleEarthEnterpriseTileInformation from an object\n *\n * @param {Object} info Object to be cloned\n * @param {GoogleEarthEnterpriseTileInformation} [result] The object onto which to store the result.\n * @returns {GoogleEarthEnterpriseTileInformation} The modified result parameter or a new GoogleEarthEnterpriseTileInformation instance if none was provided.\n */\nGoogleEarthEnterpriseTileInformation.clone = function (info, result) {\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(result)) {\n    result = new GoogleEarthEnterpriseTileInformation(\n      info._bits,\n      info.cnodeVersion,\n      info.imageryVersion,\n      info.terrainVersion,\n      info.imageryProvider,\n      info.terrainProvider\n    );\n  } else {\n    result._bits = info._bits;\n    result.cnodeVersion = info.cnodeVersion;\n    result.imageryVersion = info.imageryVersion;\n    result.terrainVersion = info.terrainVersion;\n    result.imageryProvider = info.imageryProvider;\n    result.terrainProvider = info.terrainProvider;\n  }\n  result.ancestorHasTerrain = info.ancestorHasTerrain;\n  result.terrainState = info.terrainState;\n\n  return result;\n};\n\n/**\n * Sets the parent for the tile\n *\n * @param {GoogleEarthEnterpriseTileInformation} parent Parent tile\n */\nGoogleEarthEnterpriseTileInformation.prototype.setParent = function (parent) {\n  this.ancestorHasTerrain = parent.ancestorHasTerrain || this.hasTerrain();\n};\n\n/**\n * Gets whether a subtree is available\n *\n * @returns {Boolean} true if subtree is available, false otherwise.\n */\nGoogleEarthEnterpriseTileInformation.prototype.hasSubtree = function () {\n  return (0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this._bits, cacheFlagBitmask);\n};\n\n/**\n * Gets whether imagery is available\n *\n * @returns {Boolean} true if imagery is available, false otherwise.\n */\nGoogleEarthEnterpriseTileInformation.prototype.hasImagery = function () {\n  return (0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this._bits, imageBitmask);\n};\n\n/**\n * Gets whether terrain is available\n *\n * @returns {Boolean} true if terrain is available, false otherwise.\n */\nGoogleEarthEnterpriseTileInformation.prototype.hasTerrain = function () {\n  return (0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this._bits, terrainBitmask);\n};\n\n/**\n * Gets whether any children are present\n *\n * @returns {Boolean} true if any children are available, false otherwise.\n */\nGoogleEarthEnterpriseTileInformation.prototype.hasChildren = function () {\n  return (0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this._bits, anyChildBitmask);\n};\n\n/**\n * Gets whether a specified child is available\n *\n * @param {Number} index Index of child tile\n *\n * @returns {Boolean} true if child is available, false otherwise\n */\nGoogleEarthEnterpriseTileInformation.prototype.hasChild = function (index) {\n  return (0,_isBitSet_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this._bits, childrenBitmasks[index]);\n};\n\n/**\n * Gets bitmask containing children\n *\n * @returns {Number} Children bitmask\n */\nGoogleEarthEnterpriseTileInformation.prototype.getChildBitmask = function () {\n  return this._bits & anyChildBitmask;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (GoogleEarthEnterpriseTileInformation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTU4NTIuanMiLCJtYXBwaW5ncyI6Ijs7QUFBbUM7QUFDRTs7QUFFckM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLHNDQUFzQztBQUNqRCxhQUFhLHNDQUFzQztBQUNuRDtBQUNBO0FBQ0EsT0FBTyxnRUFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzQ0FBc0M7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQSxTQUFTLGlFQUFRO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0EsU0FBUyxpRUFBUTtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBLFNBQVMsaUVBQVE7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQSxTQUFTLGlFQUFRO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0EsU0FBUyxpRUFBUTtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxvQ0FBb0MsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9Db3JlL0dvb2dsZUVhcnRoRW50ZXJwcmlzZVRpbGVJbmZvcm1hdGlvbi5qcz8xNjViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcbmltcG9ydCBpc0JpdFNldCBmcm9tIFwiLi9pc0JpdFNldC5qc1wiO1xuXG4vLyBCaXRtYXNrIGZvciBjaGVja2luZyB0aWxlIHByb3BlcnRpZXNcbnZhciBjaGlsZHJlbkJpdG1hc2tzID0gWzB4MDEsIDB4MDIsIDB4MDQsIDB4MDhdO1xudmFyIGFueUNoaWxkQml0bWFzayA9IDB4MGY7XG52YXIgY2FjaGVGbGFnQml0bWFzayA9IDB4MTA7IC8vIFRydWUgaWYgdGhlcmUgaXMgYSBjaGlsZCBzdWJ0cmVlXG52YXIgaW1hZ2VCaXRtYXNrID0gMHg0MDtcbnZhciB0ZXJyYWluQml0bWFzayA9IDB4ODA7XG5cbi8qKlxuICogQ29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCB0aWxlIGZyb20gYSBHb29nbGUgRWFydGggRW50ZXJwcmlzZSBzZXJ2ZXJcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYml0cyBCaXRtYXNrIHRoYXQgY29udGFpbnMgdGhlIHR5cGUgb2YgZGF0YSBhbmQgYXZhaWxhYmxlIGNoaWxkcmVuIGZvciBlYWNoIHRpbGUuXG4gKiBAcGFyYW0ge051bWJlcn0gY25vZGVWZXJzaW9uIFZlcnNpb24gb2YgdGhlIHJlcXVlc3QgZm9yIHN1YnRyZWUgbWV0YWRhdGEuXG4gKiBAcGFyYW0ge051bWJlcn0gaW1hZ2VyeVZlcnNpb24gVmVyc2lvbiBvZiB0aGUgcmVxdWVzdCBmb3IgaW1hZ2VyeSB0aWxlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHRlcnJhaW5WZXJzaW9uIFZlcnNpb24gb2YgdGhlIHJlcXVlc3QgZm9yIHRlcnJhaW4gdGlsZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBpbWFnZXJ5UHJvdmlkZXIgSWQgb2YgaW1hZ2VyeSBwcm92aWRlci5cbiAqIEBwYXJhbSB7TnVtYmVyfSB0ZXJyYWluUHJvdmlkZXIgSWQgb2YgdGVycmFpbiBwcm92aWRlci5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBHb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb24oXG4gIGJpdHMsXG4gIGNub2RlVmVyc2lvbixcbiAgaW1hZ2VyeVZlcnNpb24sXG4gIHRlcnJhaW5WZXJzaW9uLFxuICBpbWFnZXJ5UHJvdmlkZXIsXG4gIHRlcnJhaW5Qcm92aWRlclxuKSB7XG4gIHRoaXMuX2JpdHMgPSBiaXRzO1xuICB0aGlzLmNub2RlVmVyc2lvbiA9IGNub2RlVmVyc2lvbjtcbiAgdGhpcy5pbWFnZXJ5VmVyc2lvbiA9IGltYWdlcnlWZXJzaW9uO1xuICB0aGlzLnRlcnJhaW5WZXJzaW9uID0gdGVycmFpblZlcnNpb247XG4gIHRoaXMuaW1hZ2VyeVByb3ZpZGVyID0gaW1hZ2VyeVByb3ZpZGVyO1xuICB0aGlzLnRlcnJhaW5Qcm92aWRlciA9IHRlcnJhaW5Qcm92aWRlcjtcbiAgdGhpcy5hbmNlc3Rvckhhc1RlcnJhaW4gPSBmYWxzZTsgLy8gU2V0IGl0IGxhdGVyIG9uY2Ugd2UgZmluZCBpdHMgcGFyZW50XG4gIHRoaXMudGVycmFpblN0YXRlID0gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uIGZyb20gYW4gb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluZm8gT2JqZWN0IHRvIGJlIGNsb25lZFxuICogQHBhcmFtIHtHb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb259IFtyZXN1bHRdIFRoZSBvYmplY3Qgb250byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge0dvb2dsZUVhcnRoRW50ZXJwcmlzZVRpbGVJbmZvcm1hdGlvbn0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uIGluc3RhbmNlIGlmIG5vbmUgd2FzIHByb3ZpZGVkLlxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb24uY2xvbmUgPSBmdW5jdGlvbiAoaW5mbywgcmVzdWx0KSB7XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IEdvb2dsZUVhcnRoRW50ZXJwcmlzZVRpbGVJbmZvcm1hdGlvbihcbiAgICAgIGluZm8uX2JpdHMsXG4gICAgICBpbmZvLmNub2RlVmVyc2lvbixcbiAgICAgIGluZm8uaW1hZ2VyeVZlcnNpb24sXG4gICAgICBpbmZvLnRlcnJhaW5WZXJzaW9uLFxuICAgICAgaW5mby5pbWFnZXJ5UHJvdmlkZXIsXG4gICAgICBpbmZvLnRlcnJhaW5Qcm92aWRlclxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0Ll9iaXRzID0gaW5mby5fYml0cztcbiAgICByZXN1bHQuY25vZGVWZXJzaW9uID0gaW5mby5jbm9kZVZlcnNpb247XG4gICAgcmVzdWx0LmltYWdlcnlWZXJzaW9uID0gaW5mby5pbWFnZXJ5VmVyc2lvbjtcbiAgICByZXN1bHQudGVycmFpblZlcnNpb24gPSBpbmZvLnRlcnJhaW5WZXJzaW9uO1xuICAgIHJlc3VsdC5pbWFnZXJ5UHJvdmlkZXIgPSBpbmZvLmltYWdlcnlQcm92aWRlcjtcbiAgICByZXN1bHQudGVycmFpblByb3ZpZGVyID0gaW5mby50ZXJyYWluUHJvdmlkZXI7XG4gIH1cbiAgcmVzdWx0LmFuY2VzdG9ySGFzVGVycmFpbiA9IGluZm8uYW5jZXN0b3JIYXNUZXJyYWluO1xuICByZXN1bHQudGVycmFpblN0YXRlID0gaW5mby50ZXJyYWluU3RhdGU7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgcGFyZW50IGZvciB0aGUgdGlsZVxuICpcbiAqIEBwYXJhbSB7R29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9ufSBwYXJlbnQgUGFyZW50IHRpbGVcbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uLnByb3RvdHlwZS5zZXRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gIHRoaXMuYW5jZXN0b3JIYXNUZXJyYWluID0gcGFyZW50LmFuY2VzdG9ySGFzVGVycmFpbiB8fCB0aGlzLmhhc1RlcnJhaW4oKTtcbn07XG5cbi8qKlxuICogR2V0cyB3aGV0aGVyIGEgc3VidHJlZSBpcyBhdmFpbGFibGVcbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBzdWJ0cmVlIGlzIGF2YWlsYWJsZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb24ucHJvdG90eXBlLmhhc1N1YnRyZWUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBpc0JpdFNldCh0aGlzLl9iaXRzLCBjYWNoZUZsYWdCaXRtYXNrKTtcbn07XG5cbi8qKlxuICogR2V0cyB3aGV0aGVyIGltYWdlcnkgaXMgYXZhaWxhYmxlXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgaW1hZ2VyeSBpcyBhdmFpbGFibGUsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNJbWFnZXJ5ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gaXNCaXRTZXQodGhpcy5fYml0cywgaW1hZ2VCaXRtYXNrKTtcbn07XG5cbi8qKlxuICogR2V0cyB3aGV0aGVyIHRlcnJhaW4gaXMgYXZhaWxhYmxlXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGVycmFpbiBpcyBhdmFpbGFibGUsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNUZXJyYWluID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gaXNCaXRTZXQodGhpcy5fYml0cywgdGVycmFpbkJpdG1hc2spO1xufTtcblxuLyoqXG4gKiBHZXRzIHdoZXRoZXIgYW55IGNoaWxkcmVuIGFyZSBwcmVzZW50XG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYW55IGNoaWxkcmVuIGFyZSBhdmFpbGFibGUsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlVGlsZUluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNDaGlsZHJlbiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGlzQml0U2V0KHRoaXMuX2JpdHMsIGFueUNoaWxkQml0bWFzayk7XG59O1xuXG4vKipcbiAqIEdldHMgd2hldGhlciBhIHNwZWNpZmllZCBjaGlsZCBpcyBhdmFpbGFibGVcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXggSW5kZXggb2YgY2hpbGQgdGlsZVxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGNoaWxkIGlzIGF2YWlsYWJsZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZVRpbGVJbmZvcm1hdGlvbi5wcm90b3R5cGUuaGFzQ2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgcmV0dXJuIGlzQml0U2V0KHRoaXMuX2JpdHMsIGNoaWxkcmVuQml0bWFza3NbaW5kZXhdKTtcbn07XG5cbi8qKlxuICogR2V0cyBiaXRtYXNrIGNvbnRhaW5pbmcgY2hpbGRyZW5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBDaGlsZHJlbiBiaXRtYXNrXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZVRpbGVJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0Q2hpbGRCaXRtYXNrID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fYml0cyAmIGFueUNoaWxkQml0bWFzaztcbn07XG5leHBvcnQgZGVmYXVsdCBHb29nbGVFYXJ0aEVudGVycHJpc2VUaWxlSW5mb3JtYXRpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///95852\n')},98648:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * Represents a Gregorian date in a more precise format than the JavaScript Date object.\n * In addition to submillisecond precision, this object can also represent leap seconds.\n * @alias GregorianDate\n * @constructor\n *\n * @param {Number} [year] The year as a whole number.\n * @param {Number} [month] The month as a whole number with range [1, 12].\n * @param {Number} [day] The day of the month as a whole number starting at 1.\n * @param {Number} [hour] The hour as a whole number with range [0, 23].\n * @param {Number} [minute] The minute of the hour as a whole number with range [0, 59].\n * @param {Number} [second] The second of the minute as a whole number with range [0, 60], with 60 representing a leap second.\n * @param {Number} [millisecond] The millisecond of the second as a floating point number with range [0.0, 1000.0).\n * @param {Boolean} [isLeapSecond] Whether this time is during a leap second.\n *\n * @see JulianDate#toGregorianDate\n */\nfunction GregorianDate(\n  year,\n  month,\n  day,\n  hour,\n  minute,\n  second,\n  millisecond,\n  isLeapSecond\n) {\n  /**\n   * Gets or sets the year as a whole number.\n   * @type {Number}\n   */\n  this.year = year;\n  /**\n   * Gets or sets the month as a whole number with range [1, 12].\n   * @type {Number}\n   */\n  this.month = month;\n  /**\n   * Gets or sets the day of the month as a whole number starting at 1.\n   * @type {Number}\n   */\n  this.day = day;\n  /**\n   * Gets or sets the hour as a whole number with range [0, 23].\n   * @type {Number}\n   */\n  this.hour = hour;\n  /**\n   * Gets or sets the minute of the hour as a whole number with range [0, 59].\n   * @type {Number}\n   */\n  this.minute = minute;\n  /**\n   * Gets or sets the second of the minute as a whole number with range [0, 60], with 60 representing a leap second.\n   * @type {Number}\n   */\n  this.second = second;\n  /**\n   * Gets or sets the millisecond of the second as a floating point number with range [0.0, 1000.0).\n   * @type {Number}\n   */\n  this.millisecond = millisecond;\n  /**\n   * Gets or sets whether this time is during a leap second.\n   * @type {Boolean}\n   */\n  this.isLeapSecond = isLeapSecond;\n}\n/* harmony default export */ __webpack_exports__["Z"] = (GregorianDate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTg2NDguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EseURBQWUsYUFBYSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0NvcmUvR3JlZ29yaWFuRGF0ZS5qcz82YjFlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVwcmVzZW50cyBhIEdyZWdvcmlhbiBkYXRlIGluIGEgbW9yZSBwcmVjaXNlIGZvcm1hdCB0aGFuIHRoZSBKYXZhU2NyaXB0IERhdGUgb2JqZWN0LlxuICogSW4gYWRkaXRpb24gdG8gc3VibWlsbGlzZWNvbmQgcHJlY2lzaW9uLCB0aGlzIG9iamVjdCBjYW4gYWxzbyByZXByZXNlbnQgbGVhcCBzZWNvbmRzLlxuICogQGFsaWFzIEdyZWdvcmlhbkRhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbeWVhcl0gVGhlIHllYXIgYXMgYSB3aG9sZSBudW1iZXIuXG4gKiBAcGFyYW0ge051bWJlcn0gW21vbnRoXSBUaGUgbW9udGggYXMgYSB3aG9sZSBudW1iZXIgd2l0aCByYW5nZSBbMSwgMTJdLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtkYXldIFRoZSBkYXkgb2YgdGhlIG1vbnRoIGFzIGEgd2hvbGUgbnVtYmVyIHN0YXJ0aW5nIGF0IDEuXG4gKiBAcGFyYW0ge051bWJlcn0gW2hvdXJdIFRoZSBob3VyIGFzIGEgd2hvbGUgbnVtYmVyIHdpdGggcmFuZ2UgWzAsIDIzXS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbbWludXRlXSBUaGUgbWludXRlIG9mIHRoZSBob3VyIGFzIGEgd2hvbGUgbnVtYmVyIHdpdGggcmFuZ2UgWzAsIDU5XS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2Vjb25kXSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUgYXMgYSB3aG9sZSBudW1iZXIgd2l0aCByYW5nZSBbMCwgNjBdLCB3aXRoIDYwIHJlcHJlc2VudGluZyBhIGxlYXAgc2Vjb25kLlxuICogQHBhcmFtIHtOdW1iZXJ9IFttaWxsaXNlY29uZF0gVGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQgYXMgYSBmbG9hdGluZyBwb2ludCBudW1iZXIgd2l0aCByYW5nZSBbMC4wLCAxMDAwLjApLlxuICogQHBhcmFtIHtCb29sZWFufSBbaXNMZWFwU2Vjb25kXSBXaGV0aGVyIHRoaXMgdGltZSBpcyBkdXJpbmcgYSBsZWFwIHNlY29uZC5cbiAqXG4gKiBAc2VlIEp1bGlhbkRhdGUjdG9HcmVnb3JpYW5EYXRlXG4gKi9cbmZ1bmN0aW9uIEdyZWdvcmlhbkRhdGUoXG4gIHllYXIsXG4gIG1vbnRoLFxuICBkYXksXG4gIGhvdXIsXG4gIG1pbnV0ZSxcbiAgc2Vjb25kLFxuICBtaWxsaXNlY29uZCxcbiAgaXNMZWFwU2Vjb25kXG4pIHtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgeWVhciBhcyBhIHdob2xlIG51bWJlci5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRoaXMueWVhciA9IHllYXI7XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIG1vbnRoIGFzIGEgd2hvbGUgbnVtYmVyIHdpdGggcmFuZ2UgWzEsIDEyXS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRoaXMubW9udGggPSBtb250aDtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgZGF5IG9mIHRoZSBtb250aCBhcyBhIHdob2xlIG51bWJlciBzdGFydGluZyBhdCAxLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgdGhpcy5kYXkgPSBkYXk7XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGhvdXIgYXMgYSB3aG9sZSBudW1iZXIgd2l0aCByYW5nZSBbMCwgMjNdLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgdGhpcy5ob3VyID0gaG91cjtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgbWludXRlIG9mIHRoZSBob3VyIGFzIGEgd2hvbGUgbnVtYmVyIHdpdGggcmFuZ2UgWzAsIDU5XS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRoaXMubWludXRlID0gbWludXRlO1xuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSBhcyBhIHdob2xlIG51bWJlciB3aXRoIHJhbmdlIFswLCA2MF0sIHdpdGggNjAgcmVwcmVzZW50aW5nIGEgbGVhcCBzZWNvbmQuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICB0aGlzLnNlY29uZCA9IHNlY29uZDtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCBhcyBhIGZsb2F0aW5nIHBvaW50IG51bWJlciB3aXRoIHJhbmdlIFswLjAsIDEwMDAuMCkuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICB0aGlzLm1pbGxpc2Vjb25kID0gbWlsbGlzZWNvbmQ7XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgd2hldGhlciB0aGlzIHRpbWUgaXMgZHVyaW5nIGEgbGVhcCBzZWNvbmQuXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgdGhpcy5pc0xlYXBTZWNvbmQgPSBpc0xlYXBTZWNvbmQ7XG59XG5leHBvcnQgZGVmYXVsdCBHcmVnb3JpYW5EYXRlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///98648\n')},46031:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(53773);\n/* harmony import */ var _ArcType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11491);\n/* harmony import */ var _arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(32378);\n/* harmony import */ var _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(48243);\n/* harmony import */ var _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60216);\n/* harmony import */ var _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(51688);\n/* harmony import */ var _Check_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(66553);\n/* harmony import */ var _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(84828);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(12572);\n/* harmony import */ var _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50491);\n/* harmony import */ var _EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(39043);\n/* harmony import */ var _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(8398);\n/* harmony import */ var _EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(74938);\n/* harmony import */ var _GeographicProjection_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(39756);\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(82408);\n/* harmony import */ var _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(13616);\n/* harmony import */ var _IntersectionTests_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(67627);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(99417);\n/* harmony import */ var _Matrix3_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(68201);\n/* harmony import */ var _Plane_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(7749);\n/* harmony import */ var _Quaternion_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(87811);\n/* harmony import */ var _Rectangle_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(96190);\n/* harmony import */ var _WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(79962);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar PROJECTIONS = [_GeographicProjection_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, _WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z];\nvar PROJECTION_COUNT = PROJECTIONS.length;\n\nvar MITER_BREAK_SMALL = Math.cos(_Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].toRadians */ .Z.toRadians(30.0));\nvar MITER_BREAK_LARGE = Math.cos(_Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].toRadians */ .Z.toRadians(150.0));\n\n// Initial heights for constructing the wall.\n// Keeping WALL_INITIAL_MIN_HEIGHT near the ellipsoid surface helps\n// prevent precision problems with planes in the shader.\n// Putting the start point of a plane at ApproximateTerrainHeights._defaultMinTerrainHeight,\n// which is a highly conservative bound, usually puts the plane origin several thousands\n// of meters away from the actual terrain, causing floating point problems when checking\n// fragments on terrain against the plane.\n// Ellipsoid height is generally much closer.\n// The initial max height is arbitrary.\n// Both heights are corrected using ApproximateTerrainHeights for computing the actual volume geometry.\nvar WALL_INITIAL_MIN_HEIGHT = 0.0;\nvar WALL_INITIAL_MAX_HEIGHT = 1000.0;\n\n/**\n * A description of a polyline on terrain or 3D Tiles. Only to be used with {@link GroundPolylinePrimitive}.\n *\n * @alias GroundPolylineGeometry\n * @constructor\n *\n * @param {Object} options Options with the following properties:\n * @param {Cartesian3[]} options.positions An array of {@link Cartesian3} defining the polyline\'s points. Heights above the ellipsoid will be ignored.\n * @param {Number} [options.width=1.0] The screen space width in pixels.\n * @param {Number} [options.granularity=9999.0] The distance interval in meters used for interpolating options.points. Defaults to 9999.0 meters. Zero indicates no interpolation.\n * @param {Boolean} [options.loop=false] Whether during geometry creation a line segment will be added between the last and first line positions to make this Polyline a loop.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of line the polyline segments must follow. Valid options are {@link ArcType.GEODESIC} and {@link ArcType.RHUMB}.\n *\n * @exception {DeveloperError} At least two positions are required.\n *\n * @see GroundPolylinePrimitive\n *\n * @example\n * var positions = Cesium.Cartesian3.fromDegreesArray([\n *   -112.1340164450331, 36.05494287836128,\n *   -112.08821010582645, 36.097804071380715,\n *   -112.13296079730024, 36.168769146801104\n * ]);\n *\n * var geometry = new Cesium.GroundPolylineGeometry({\n *   positions : positions\n * });\n */\nfunction GroundPolylineGeometry(options) {\n  options = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options, _defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var positions = options.positions;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(positions) || positions.length < 2) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z("At least two positions are required.");\n  }\n  if (\n    (0,_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(options.arcType) &&\n    options.arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].GEODESIC */ .Z.GEODESIC &&\n    options.arcType !== _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].RHUMB */ .Z.RHUMB\n  ) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(\n      "Valid options for arcType are ArcType.GEODESIC and ArcType.RHUMB."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  /**\n   * The screen space width in pixels.\n   * @type {Number}\n   */\n  this.width = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options.width, 1.0); // Doesn\'t get packed, not necessary for computing geometry.\n\n  this._positions = positions;\n\n  /**\n   * The distance interval used for interpolating options.points. Zero indicates no interpolation.\n   * Default of 9999.0 allows centimeter accuracy with 32 bit floating point.\n   * @type {Boolean}\n   * @default 9999.0\n   */\n  this.granularity = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options.granularity, 9999.0);\n\n  /**\n   * Whether during geometry creation a line segment will be added between the last and first line positions to make this Polyline a loop.\n   * If the geometry has two positions this parameter will be ignored.\n   * @type {Boolean}\n   * @default false\n   */\n  this.loop = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options.loop, false);\n\n  /**\n   * The type of path the polyline must follow. Valid options are {@link ArcType.GEODESIC} and {@link ArcType.RHUMB}.\n   * @type {ArcType}\n   * @default ArcType.GEODESIC\n   */\n  this.arcType = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options.arcType, _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].GEODESIC */ .Z.GEODESIC);\n\n  this._ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].WGS84 */ .Z.WGS84;\n\n  // MapProjections can\'t be packed, so store the index to a known MapProjection.\n  this._projectionIndex = 0;\n  this._workerName = "createGroundPolylineGeometry";\n\n  // Used by GroundPolylinePrimitive to signal worker that scenemode is 3D only.\n  this._scene3DOnly = false;\n}\n\nObject.defineProperties(GroundPolylineGeometry.prototype, {\n  /**\n   * The number of elements used to pack the object into an array.\n   * @memberof GroundPolylineGeometry.prototype\n   * @type {Number}\n   * @readonly\n   * @private\n   */\n  packedLength: {\n    get: function () {\n      return (\n        1.0 +\n        this._positions.length * 3 +\n        1.0 +\n        1.0 +\n        1.0 +\n        _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].packedLength */ .Z.packedLength +\n        1.0 +\n        1.0\n      );\n    },\n  },\n});\n\n/**\n * Set the GroundPolylineGeometry\'s projection and ellipsoid.\n * Used by GroundPolylinePrimitive to signal scene information to the geometry for generating 2D attributes.\n *\n * @param {GroundPolylineGeometry} groundPolylineGeometry GroundPolylinGeometry describing a polyline on terrain or 3D Tiles.\n * @param {Projection} mapProjection A MapProjection used for projecting cartographic coordinates to 2D.\n * @private\n */\nGroundPolylineGeometry.setProjectionAndEllipsoid = function (\n  groundPolylineGeometry,\n  mapProjection\n) {\n  var projectionIndex = 0;\n  for (var i = 0; i < PROJECTION_COUNT; i++) {\n    if (mapProjection instanceof PROJECTIONS[i]) {\n      projectionIndex = i;\n      break;\n    }\n  }\n\n  groundPolylineGeometry._projectionIndex = projectionIndex;\n  groundPolylineGeometry._ellipsoid = mapProjection.ellipsoid;\n};\n\nvar cart3Scratch1 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar cart3Scratch2 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar cart3Scratch3 = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nfunction computeRightNormal(start, end, maxHeight, ellipsoid, result) {\n  var startBottom = getPosition(ellipsoid, start, 0.0, cart3Scratch1);\n  var startTop = getPosition(ellipsoid, start, maxHeight, cart3Scratch2);\n  var endBottom = getPosition(ellipsoid, end, 0.0, cart3Scratch3);\n\n  var up = direction(startTop, startBottom, cart3Scratch2);\n  var forward = direction(endBottom, startBottom, cart3Scratch3);\n\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(forward, up, result);\n  return _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(result, result);\n}\n\nvar interpolatedCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar interpolatedBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar interpolatedTopScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar interpolatedNormalScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nfunction interpolateSegment(\n  start,\n  end,\n  minHeight,\n  maxHeight,\n  granularity,\n  arcType,\n  ellipsoid,\n  normalsArray,\n  bottomPositionsArray,\n  topPositionsArray,\n  cartographicsArray\n) {\n  if (granularity === 0.0) {\n    return;\n  }\n\n  var ellipsoidLine;\n  if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n    ellipsoidLine = new _EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z(start, end, ellipsoid);\n  } else if (arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].RHUMB */ .Z.RHUMB) {\n    ellipsoidLine = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(start, end, ellipsoid);\n  }\n\n  var surfaceDistance = ellipsoidLine.surfaceDistance;\n  if (surfaceDistance < granularity) {\n    return;\n  }\n\n  // Compute rightwards normal applicable at all interpolated points\n  var interpolatedNormal = computeRightNormal(\n    start,\n    end,\n    maxHeight,\n    ellipsoid,\n    interpolatedNormalScratch\n  );\n\n  var segments = Math.ceil(surfaceDistance / granularity);\n  var interpointDistance = surfaceDistance / segments;\n  var distanceFromStart = interpointDistance;\n  var pointsToAdd = segments - 1;\n  var packIndex = normalsArray.length;\n  for (var i = 0; i < pointsToAdd; i++) {\n    var interpolatedCartographic = ellipsoidLine.interpolateUsingSurfaceDistance(\n      distanceFromStart,\n      interpolatedCartographicScratch\n    );\n    var interpolatedBottom = getPosition(\n      ellipsoid,\n      interpolatedCartographic,\n      minHeight,\n      interpolatedBottomScratch\n    );\n    var interpolatedTop = getPosition(\n      ellipsoid,\n      interpolatedCartographic,\n      maxHeight,\n      interpolatedTopScratch\n    );\n\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(interpolatedNormal, normalsArray, packIndex);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(interpolatedBottom, bottomPositionsArray, packIndex);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(interpolatedTop, topPositionsArray, packIndex);\n    cartographicsArray.push(interpolatedCartographic.latitude);\n    cartographicsArray.push(interpolatedCartographic.longitude);\n\n    packIndex += 3;\n    distanceFromStart += interpointDistance;\n  }\n}\n\nvar heightlessCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nfunction getPosition(ellipsoid, cartographic, height, result) {\n  _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].clone */ .Z.clone(cartographic, heightlessCartographicScratch);\n  heightlessCartographicScratch.height = height;\n  return _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toCartesian */ .Z.toCartesian(\n    heightlessCartographicScratch,\n    ellipsoid,\n    result\n  );\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {PolygonGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nGroundPolylineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].typeOf.object */ .Z.typeOf.object("value", value);\n  _Check_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].defined */ .Z.defined("array", array);\n  //>>includeEnd(\'debug\');\n\n  var index = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(startingIndex, 0);\n\n  var positions = value._positions;\n  var positionsLength = positions.length;\n\n  array[index++] = positionsLength;\n\n  for (var i = 0; i < positionsLength; ++i) {\n    var cartesian = positions[i];\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(cartesian, array, index);\n    index += 3;\n  }\n\n  array[index++] = value.granularity;\n  array[index++] = value.loop ? 1.0 : 0.0;\n  array[index++] = value.arcType;\n\n  _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].pack */ .Z.pack(value._ellipsoid, array, index);\n  index += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].packedLength */ .Z.packedLength;\n\n  array[index++] = value._projectionIndex;\n  array[index++] = value._scene3DOnly ? 1.0 : 0.0;\n\n  return array;\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {PolygonGeometry} [result] The object into which to store the result.\n */\nGroundPolylineGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].defined */ .Z.defined("array", array);\n  //>>includeEnd(\'debug\');\n\n  var index = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(startingIndex, 0);\n  var positionsLength = array[index++];\n  var positions = new Array(positionsLength);\n\n  for (var i = 0; i < positionsLength; i++) {\n    positions[i] = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(array, index);\n    index += 3;\n  }\n\n  var granularity = array[index++];\n  var loop = array[index++] === 1.0;\n  var arcType = array[index++];\n\n  var ellipsoid = _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].unpack */ .Z.unpack(array, index);\n  index += _Ellipsoid_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].packedLength */ .Z.packedLength;\n\n  var projectionIndex = array[index++];\n  var scene3DOnly = array[index++] === 1.0;\n\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(result)) {\n    result = new GroundPolylineGeometry({\n      positions: positions,\n    });\n  }\n\n  result._positions = positions;\n  result.granularity = granularity;\n  result.loop = loop;\n  result.arcType = arcType;\n  result._ellipsoid = ellipsoid;\n  result._projectionIndex = projectionIndex;\n  result._scene3DOnly = scene3DOnly;\n\n  return result;\n};\n\nfunction direction(target, origin, result) {\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(target, origin, result);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(result, result);\n  return result;\n}\n\nfunction tangentDirection(target, origin, up, result) {\n  result = direction(target, origin, result);\n\n  // orthogonalize\n  result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(result, up, result);\n  result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(result, result);\n  result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(up, result, result);\n  return result;\n}\n\nvar toPreviousScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar toNextScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar forwardScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar vertexUpScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar cosine90 = 0.0;\nvar cosine180 = -1.0;\nfunction computeVertexMiterNormal(\n  previousBottom,\n  vertexBottom,\n  vertexTop,\n  nextBottom,\n  result\n) {\n  var up = direction(vertexTop, vertexBottom, vertexUpScratch);\n\n  // Compute vectors pointing towards neighboring points but tangent to this point on the ellipsoid\n  var toPrevious = tangentDirection(\n    previousBottom,\n    vertexBottom,\n    up,\n    toPreviousScratch\n  );\n  var toNext = tangentDirection(nextBottom, vertexBottom, up, toNextScratch);\n\n  // Check if tangents are almost opposite - if so, no need to miter.\n  if (\n    _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].dot */ .Z.dot(toPrevious, toNext),\n      cosine180,\n      _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON5 */ .Z.EPSILON5\n    )\n  ) {\n    result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(up, toPrevious, result);\n    result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(result, result);\n    return result;\n  }\n\n  // Average directions to previous and to next in the plane of Up\n  result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(toNext, toPrevious, result);\n  result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(result, result);\n\n  // Flip the normal if it isn\'t pointing roughly bound right (aka if forward is pointing more "backwards")\n  var forward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(up, result, forwardScratch);\n  if (_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].dot */ .Z.dot(toNext, forward) < cosine90) {\n    result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].negate */ .Z.negate(result, result);\n  }\n\n  return result;\n}\n\nvar XZ_PLANE = _Plane_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].fromPointNormal */ .Z.fromPointNormal(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ZERO */ .Z.ZERO, _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNIT_Y */ .Z.UNIT_Y);\n\nvar previousBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar vertexBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar vertexTopScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar nextBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar vertexNormalScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar intersectionScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar cartographicScratch0 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar cartographicScratch1 = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar cartographicIntersectionScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n/**\n * Computes shadow volumes for the ground polyline, consisting of its vertices, indices, and a bounding sphere.\n * Vertices are "fat," packing all the data needed in each volume to describe a line on terrain or 3D Tiles.\n * Should not be called independent of {@link GroundPolylinePrimitive}.\n *\n * @param {GroundPolylineGeometry} groundPolylineGeometry\n * @private\n */\nGroundPolylineGeometry.createGeometry = function (groundPolylineGeometry) {\n  var compute2dAttributes = !groundPolylineGeometry._scene3DOnly;\n  var loop = groundPolylineGeometry.loop;\n  var ellipsoid = groundPolylineGeometry._ellipsoid;\n  var granularity = groundPolylineGeometry.granularity;\n  var arcType = groundPolylineGeometry.arcType;\n  var projection = new PROJECTIONS[groundPolylineGeometry._projectionIndex](\n    ellipsoid\n  );\n\n  var minHeight = WALL_INITIAL_MIN_HEIGHT;\n  var maxHeight = WALL_INITIAL_MAX_HEIGHT;\n\n  var index;\n  var i;\n\n  var positions = groundPolylineGeometry._positions;\n  var positionsLength = positions.length;\n\n  if (positionsLength === 2) {\n    loop = false;\n  }\n\n  // Split positions across the IDL and the Prime Meridian as well.\n  // Split across prime meridian because very large geometries crossing the Prime Meridian but not the IDL\n  // may get split by the plane of IDL + Prime Meridian.\n  var p0;\n  var p1;\n  var c0;\n  var c1;\n  var rhumbLine = new _EllipsoidRhumbLine_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(undefined, undefined, ellipsoid);\n  var intersection;\n  var intersectionCartographic;\n  var intersectionLongitude;\n  var splitPositions = [positions[0]];\n  for (i = 0; i < positionsLength - 1; i++) {\n    p0 = positions[i];\n    p1 = positions[i + 1];\n    intersection = _IntersectionTests_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].lineSegmentPlane */ .Z.lineSegmentPlane(\n      p0,\n      p1,\n      XZ_PLANE,\n      intersectionScratch\n    );\n    if (\n      (0,_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(intersection) &&\n      !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p0, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7) &&\n      !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p1, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7)\n    ) {\n      if (groundPolylineGeometry.arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n        splitPositions.push(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(intersection));\n      } else if (groundPolylineGeometry.arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].RHUMB */ .Z.RHUMB) {\n        intersectionLongitude = ellipsoid.cartesianToCartographic(\n          intersection,\n          cartographicScratch0\n        ).longitude;\n        c0 = ellipsoid.cartesianToCartographic(p0, cartographicScratch0);\n        c1 = ellipsoid.cartesianToCartographic(p1, cartographicScratch1);\n        rhumbLine.setEndPoints(c0, c1);\n        intersectionCartographic = rhumbLine.findIntersectionWithLongitude(\n          intersectionLongitude,\n          cartographicIntersectionScratch\n        );\n        intersection = ellipsoid.cartographicToCartesian(\n          intersectionCartographic,\n          intersectionScratch\n        );\n        if (\n          (0,_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(intersection) &&\n          !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p0, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7) &&\n          !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p1, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7)\n        ) {\n          splitPositions.push(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(intersection));\n        }\n      }\n    }\n    splitPositions.push(p1);\n  }\n\n  if (loop) {\n    p0 = positions[positionsLength - 1];\n    p1 = positions[0];\n    intersection = _IntersectionTests_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].lineSegmentPlane */ .Z.lineSegmentPlane(\n      p0,\n      p1,\n      XZ_PLANE,\n      intersectionScratch\n    );\n    if (\n      (0,_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(intersection) &&\n      !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p0, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7) &&\n      !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p1, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7)\n    ) {\n      if (groundPolylineGeometry.arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].GEODESIC */ .Z.GEODESIC) {\n        splitPositions.push(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(intersection));\n      } else if (groundPolylineGeometry.arcType === _ArcType_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].RHUMB */ .Z.RHUMB) {\n        intersectionLongitude = ellipsoid.cartesianToCartographic(\n          intersection,\n          cartographicScratch0\n        ).longitude;\n        c0 = ellipsoid.cartesianToCartographic(p0, cartographicScratch0);\n        c1 = ellipsoid.cartesianToCartographic(p1, cartographicScratch1);\n        rhumbLine.setEndPoints(c0, c1);\n        intersectionCartographic = rhumbLine.findIntersectionWithLongitude(\n          intersectionLongitude,\n          cartographicIntersectionScratch\n        );\n        intersection = ellipsoid.cartographicToCartesian(\n          intersectionCartographic,\n          intersectionScratch\n        );\n        if (\n          (0,_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(intersection) &&\n          !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p0, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7) &&\n          !_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(intersection, p1, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON7 */ .Z.EPSILON7)\n        ) {\n          splitPositions.push(_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(intersection));\n        }\n      }\n    }\n  }\n  var cartographicsLength = splitPositions.length;\n\n  var cartographics = new Array(cartographicsLength);\n  for (i = 0; i < cartographicsLength; i++) {\n    var cartographic = _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].fromCartesian */ .Z.fromCartesian(splitPositions[i], ellipsoid);\n    cartographic.height = 0.0;\n    cartographics[i] = cartographic;\n  }\n\n  cartographics = (0,_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    cartographics,\n    _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon\n  );\n  cartographicsLength = cartographics.length;\n\n  if (cartographicsLength < 2) {\n    return undefined;\n  }\n\n  /**** Build heap-side arrays for positions, interpolated cartographics, and normals from which to compute vertices ****/\n  // We build a "wall" and then decompose it into separately connected component "volumes" because we need a lot\n  // of information about the wall. Also, this simplifies interpolation.\n  // Convention: "next" and "end" are locally forward to each segment of the wall,\n  // and we are computing normals pointing towards the local right side of the vertices in each segment.\n  var cartographicsArray = [];\n  var normalsArray = [];\n  var bottomPositionsArray = [];\n  var topPositionsArray = [];\n\n  var previousBottom = previousBottomScratch;\n  var vertexBottom = vertexBottomScratch;\n  var vertexTop = vertexTopScratch;\n  var nextBottom = nextBottomScratch;\n  var vertexNormal = vertexNormalScratch;\n\n  // First point - either loop or attach a "perpendicular" normal\n  var startCartographic = cartographics[0];\n  var nextCartographic = cartographics[1];\n\n  var prestartCartographic = cartographics[cartographicsLength - 1];\n  previousBottom = getPosition(\n    ellipsoid,\n    prestartCartographic,\n    minHeight,\n    previousBottom\n  );\n  nextBottom = getPosition(ellipsoid, nextCartographic, minHeight, nextBottom);\n  vertexBottom = getPosition(\n    ellipsoid,\n    startCartographic,\n    minHeight,\n    vertexBottom\n  );\n  vertexTop = getPosition(ellipsoid, startCartographic, maxHeight, vertexTop);\n\n  if (loop) {\n    vertexNormal = computeVertexMiterNormal(\n      previousBottom,\n      vertexBottom,\n      vertexTop,\n      nextBottom,\n      vertexNormal\n    );\n  } else {\n    vertexNormal = computeRightNormal(\n      startCartographic,\n      nextCartographic,\n      maxHeight,\n      ellipsoid,\n      vertexNormal\n    );\n  }\n\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexNormal, normalsArray, 0);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexBottom, bottomPositionsArray, 0);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexTop, topPositionsArray, 0);\n  cartographicsArray.push(startCartographic.latitude);\n  cartographicsArray.push(startCartographic.longitude);\n\n  interpolateSegment(\n    startCartographic,\n    nextCartographic,\n    minHeight,\n    maxHeight,\n    granularity,\n    arcType,\n    ellipsoid,\n    normalsArray,\n    bottomPositionsArray,\n    topPositionsArray,\n    cartographicsArray\n  );\n\n  // All inbetween points\n  for (i = 1; i < cartographicsLength - 1; ++i) {\n    previousBottom = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(vertexBottom, previousBottom);\n    vertexBottom = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(nextBottom, vertexBottom);\n    var vertexCartographic = cartographics[i];\n    getPosition(ellipsoid, vertexCartographic, maxHeight, vertexTop);\n    getPosition(ellipsoid, cartographics[i + 1], minHeight, nextBottom);\n\n    computeVertexMiterNormal(\n      previousBottom,\n      vertexBottom,\n      vertexTop,\n      nextBottom,\n      vertexNormal\n    );\n\n    index = normalsArray.length;\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexNormal, normalsArray, index);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexBottom, bottomPositionsArray, index);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexTop, topPositionsArray, index);\n    cartographicsArray.push(vertexCartographic.latitude);\n    cartographicsArray.push(vertexCartographic.longitude);\n\n    interpolateSegment(\n      cartographics[i],\n      cartographics[i + 1],\n      minHeight,\n      maxHeight,\n      granularity,\n      arcType,\n      ellipsoid,\n      normalsArray,\n      bottomPositionsArray,\n      topPositionsArray,\n      cartographicsArray\n    );\n  }\n\n  // Last point - either loop or attach a normal "perpendicular" to the wall.\n  var endCartographic = cartographics[cartographicsLength - 1];\n  var preEndCartographic = cartographics[cartographicsLength - 2];\n\n  vertexBottom = getPosition(\n    ellipsoid,\n    endCartographic,\n    minHeight,\n    vertexBottom\n  );\n  vertexTop = getPosition(ellipsoid, endCartographic, maxHeight, vertexTop);\n\n  if (loop) {\n    var postEndCartographic = cartographics[0];\n    previousBottom = getPosition(\n      ellipsoid,\n      preEndCartographic,\n      minHeight,\n      previousBottom\n    );\n    nextBottom = getPosition(\n      ellipsoid,\n      postEndCartographic,\n      minHeight,\n      nextBottom\n    );\n\n    vertexNormal = computeVertexMiterNormal(\n      previousBottom,\n      vertexBottom,\n      vertexTop,\n      nextBottom,\n      vertexNormal\n    );\n  } else {\n    vertexNormal = computeRightNormal(\n      preEndCartographic,\n      endCartographic,\n      maxHeight,\n      ellipsoid,\n      vertexNormal\n    );\n  }\n\n  index = normalsArray.length;\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexNormal, normalsArray, index);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexBottom, bottomPositionsArray, index);\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(vertexTop, topPositionsArray, index);\n  cartographicsArray.push(endCartographic.latitude);\n  cartographicsArray.push(endCartographic.longitude);\n\n  if (loop) {\n    interpolateSegment(\n      endCartographic,\n      startCartographic,\n      minHeight,\n      maxHeight,\n      granularity,\n      arcType,\n      ellipsoid,\n      normalsArray,\n      bottomPositionsArray,\n      topPositionsArray,\n      cartographicsArray\n    );\n    index = normalsArray.length;\n    for (i = 0; i < 3; ++i) {\n      normalsArray[index + i] = normalsArray[i];\n      bottomPositionsArray[index + i] = bottomPositionsArray[i];\n      topPositionsArray[index + i] = topPositionsArray[i];\n    }\n    cartographicsArray.push(startCartographic.latitude);\n    cartographicsArray.push(startCartographic.longitude);\n  }\n\n  return generateGeometryAttributes(\n    loop,\n    projection,\n    bottomPositionsArray,\n    topPositionsArray,\n    normalsArray,\n    cartographicsArray,\n    compute2dAttributes\n  );\n};\n\n// If the end normal angle is too steep compared to the direction of the line segment,\n// "break" the miter by rotating the normal 90 degrees around the "up" direction at the point\n// For ultra precision we would want to project into a plane, but in practice this is sufficient.\nvar lineDirectionScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar matrix3Scratch = new _Matrix3_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z();\nvar quaternionScratch = new _Quaternion_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z();\nfunction breakMiter(endGeometryNormal, startBottom, endBottom, endTop) {\n  var lineDirection = direction(endBottom, startBottom, lineDirectionScratch);\n\n  var dot = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].dot */ .Z.dot(lineDirection, endGeometryNormal);\n  if (dot > MITER_BREAK_SMALL || dot < MITER_BREAK_LARGE) {\n    var vertexUp = direction(endTop, endBottom, vertexUpScratch);\n    var angle =\n      dot < MITER_BREAK_LARGE\n        ? _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO\n        : -_Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n    var quaternion = _Quaternion_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n      vertexUp,\n      angle,\n      quaternionScratch\n    );\n    var rotationMatrix = _Matrix3_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].fromQuaternion */ .Z.fromQuaternion(quaternion, matrix3Scratch);\n    _Matrix3_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].multiplyByVector */ .Z.multiplyByVector(\n      rotationMatrix,\n      endGeometryNormal,\n      endGeometryNormal\n    );\n    return true;\n  }\n  return false;\n}\n\nvar endPosCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar normalStartpointScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar normalEndpointScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nfunction projectNormal(\n  projection,\n  cartographic,\n  normal,\n  projectedPosition,\n  result\n) {\n  var position = _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toCartesian */ .Z.toCartesian(\n    cartographic,\n    projection._ellipsoid,\n    normalStartpointScratch\n  );\n  var normalEndpoint = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(position, normal, normalEndpointScratch);\n  var flipNormal = false;\n\n  var ellipsoid = projection._ellipsoid;\n  var normalEndpointCartographic = ellipsoid.cartesianToCartographic(\n    normalEndpoint,\n    endPosCartographicScratch\n  );\n  // If normal crosses the IDL, go the other way and flip the result.\n  // In practice this almost never happens because the cartographic start\n  // and end points of each segment are "nudged" to be on the same side\n  // of the IDL and slightly away from the IDL.\n  if (\n    Math.abs(cartographic.longitude - normalEndpointCartographic.longitude) >\n    _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO\n  ) {\n    flipNormal = true;\n    normalEndpoint = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(\n      position,\n      normal,\n      normalEndpointScratch\n    );\n    normalEndpointCartographic = ellipsoid.cartesianToCartographic(\n      normalEndpoint,\n      endPosCartographicScratch\n    );\n  }\n\n  normalEndpointCartographic.height = 0.0;\n  var normalEndpointProjected = projection.project(\n    normalEndpointCartographic,\n    result\n  );\n  result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(\n    normalEndpointProjected,\n    projectedPosition,\n    result\n  );\n  result.z = 0.0;\n  result = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(result, result);\n  if (flipNormal) {\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].negate */ .Z.negate(result, result);\n  }\n  return result;\n}\n\nvar adjustHeightNormalScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar adjustHeightOffsetScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nfunction adjustHeights(\n  bottom,\n  top,\n  minHeight,\n  maxHeight,\n  adjustHeightBottom,\n  adjustHeightTop\n) {\n  // bottom and top should be at WALL_INITIAL_MIN_HEIGHT and WALL_INITIAL_MAX_HEIGHT, respectively\n  var adjustHeightNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(\n    top,\n    bottom,\n    adjustHeightNormalScratch\n  );\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(adjustHeightNormal, adjustHeightNormal);\n\n  var distanceForBottom = minHeight - WALL_INITIAL_MIN_HEIGHT;\n  var adjustHeightOffset = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    adjustHeightNormal,\n    distanceForBottom,\n    adjustHeightOffsetScratch\n  );\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(bottom, adjustHeightOffset, adjustHeightBottom);\n\n  var distanceForTop = maxHeight - WALL_INITIAL_MAX_HEIGHT;\n  adjustHeightOffset = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    adjustHeightNormal,\n    distanceForTop,\n    adjustHeightOffsetScratch\n  );\n  _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(top, adjustHeightOffset, adjustHeightTop);\n}\n\nvar nudgeDirectionScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nfunction nudgeXZ(start, end) {\n  var startToXZdistance = _Plane_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].getPointDistance */ .Z.getPointDistance(XZ_PLANE, start);\n  var endToXZdistance = _Plane_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].getPointDistance */ .Z.getPointDistance(XZ_PLANE, end);\n  var offset = nudgeDirectionScratch;\n  // Larger epsilon than what\'s used in GeometryPipeline, a centimeter in world space\n  if (_Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(startToXZdistance, 0.0, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON2 */ .Z.EPSILON2)) {\n    offset = direction(end, start, offset);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(offset, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON2 */ .Z.EPSILON2, offset);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(start, offset, start);\n  } else if (\n    _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(endToXZdistance, 0.0, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON2 */ .Z.EPSILON2)\n  ) {\n    offset = direction(start, end, offset);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(offset, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON2 */ .Z.EPSILON2, offset);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(end, offset, end);\n  }\n}\n\n// "Nudge" cartographic coordinates so start and end are on the same side of the IDL.\n// Nudge amounts are tiny, basically just an IDL flip.\n// Only used for 2D/CV.\nfunction nudgeCartographic(start, end) {\n  var absStartLon = Math.abs(start.longitude);\n  var absEndLon = Math.abs(end.longitude);\n  if (\n    _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(absStartLon, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].PI */ .Z.PI, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON11 */ .Z.EPSILON11)\n  ) {\n    var endSign = _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].sign */ .Z.sign(end.longitude);\n    start.longitude = endSign * (absStartLon - _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON11 */ .Z.EPSILON11);\n    return 1;\n  } else if (\n    _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(absEndLon, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].PI */ .Z.PI, _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON11 */ .Z.EPSILON11)\n  ) {\n    var startSign = _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].sign */ .Z.sign(start.longitude);\n    end.longitude = startSign * (absEndLon - _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON11 */ .Z.EPSILON11);\n    return 2;\n  }\n  return 0;\n}\n\nvar startCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\nvar endCartographicScratch = new _Cartographic_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n\nvar segmentStartTopScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentEndTopScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentStartBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentEndBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentStartNormalScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentEndNormalScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nvar getHeightCartographics = [startCartographicScratch, endCartographicScratch];\nvar getHeightRectangleScratch = new _Rectangle_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z();\n\nvar adjustHeightStartTopScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar adjustHeightEndTopScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar adjustHeightStartBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar adjustHeightEndBottomScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nvar segmentStart2DScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentEnd2DScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentStartNormal2DScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar segmentEndNormal2DScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nvar offsetScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar startUpScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar endUpScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar rightScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar startPlaneNormalScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar endPlaneNormalScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar encodeScratch = new _EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\n\nvar encodeScratch2D = new _EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\nvar forwardOffset2DScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar right2DScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nvar normalNudgeScratch = new _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nvar scratchBoundingSpheres = [new _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(), new _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z()];\n\n// Winding order is reversed so each segment\'s volume is inside-out\nvar REFERENCE_INDICES = [\n  0,\n  2,\n  1,\n  0,\n  3,\n  2, // right\n  0,\n  7,\n  3,\n  0,\n  4,\n  7, // start\n  0,\n  5,\n  4,\n  0,\n  1,\n  5, // bottom\n  5,\n  7,\n  4,\n  5,\n  6,\n  7, // left\n  5,\n  2,\n  6,\n  5,\n  1,\n  2, // end\n  3,\n  6,\n  2,\n  3,\n  7,\n  6, // top\n];\nvar REFERENCE_INDICES_LENGTH = REFERENCE_INDICES.length;\n\n// Decompose the "wall" into a series of shadow volumes.\n// Each shadow volume\'s vertices encode a description of the line it contains,\n// including mitering planes at the end points, a plane along the line itself,\n// and attributes for computing length-wise texture coordinates.\nfunction generateGeometryAttributes(\n  loop,\n  projection,\n  bottomPositionsArray,\n  topPositionsArray,\n  normalsArray,\n  cartographicsArray,\n  compute2dAttributes\n) {\n  var i;\n  var index;\n  var ellipsoid = projection._ellipsoid;\n\n  // Each segment will have 8 vertices\n  var segmentCount = bottomPositionsArray.length / 3 - 1;\n  var vertexCount = segmentCount * 8;\n  var arraySizeVec4 = vertexCount * 4;\n  var indexCount = segmentCount * 36;\n\n  var indices =\n    vertexCount > 65535\n      ? new Uint32Array(indexCount)\n      : new Uint16Array(indexCount);\n  var positionsArray = new Float64Array(vertexCount * 3);\n\n  var startHiAndForwardOffsetX = new Float32Array(arraySizeVec4);\n  var startLoAndForwardOffsetY = new Float32Array(arraySizeVec4);\n  var startNormalAndForwardOffsetZ = new Float32Array(arraySizeVec4);\n  var endNormalAndTextureCoordinateNormalizationX = new Float32Array(\n    arraySizeVec4\n  );\n  var rightNormalAndTextureCoordinateNormalizationY = new Float32Array(\n    arraySizeVec4\n  );\n\n  var startHiLo2D;\n  var offsetAndRight2D;\n  var startEndNormals2D;\n  var texcoordNormalization2D;\n\n  if (compute2dAttributes) {\n    startHiLo2D = new Float32Array(arraySizeVec4);\n    offsetAndRight2D = new Float32Array(arraySizeVec4);\n    startEndNormals2D = new Float32Array(arraySizeVec4);\n    texcoordNormalization2D = new Float32Array(vertexCount * 2);\n  }\n\n  /*** Compute total lengths for texture coordinate normalization ***/\n  // 2D\n  var cartographicsLength = cartographicsArray.length / 2;\n  var length2D = 0.0;\n\n  var startCartographic = startCartographicScratch;\n  startCartographic.height = 0.0;\n  var endCartographic = endCartographicScratch;\n  endCartographic.height = 0.0;\n\n  var segmentStartCartesian = segmentStartTopScratch;\n  var segmentEndCartesian = segmentEndTopScratch;\n\n  if (compute2dAttributes) {\n    index = 0;\n    for (i = 1; i < cartographicsLength; i++) {\n      // Don\'t clone anything from previous segment b/c possible IDL touch\n      startCartographic.latitude = cartographicsArray[index];\n      startCartographic.longitude = cartographicsArray[index + 1];\n      endCartographic.latitude = cartographicsArray[index + 2];\n      endCartographic.longitude = cartographicsArray[index + 3];\n\n      segmentStartCartesian = projection.project(\n        startCartographic,\n        segmentStartCartesian\n      );\n      segmentEndCartesian = projection.project(\n        endCartographic,\n        segmentEndCartesian\n      );\n      length2D += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].distance */ .Z.distance(\n        segmentStartCartesian,\n        segmentEndCartesian\n      );\n      index += 2;\n    }\n  }\n\n  // 3D\n  var positionsLength = topPositionsArray.length / 3;\n  segmentEndCartesian = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(\n    topPositionsArray,\n    0,\n    segmentEndCartesian\n  );\n  var length3D = 0.0;\n\n  index = 3;\n  for (i = 1; i < positionsLength; i++) {\n    segmentStartCartesian = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(\n      segmentEndCartesian,\n      segmentStartCartesian\n    );\n    segmentEndCartesian = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(\n      topPositionsArray,\n      index,\n      segmentEndCartesian\n    );\n    length3D += _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].distance */ .Z.distance(segmentStartCartesian, segmentEndCartesian);\n    index += 3;\n  }\n\n  /*** Generate segments ***/\n  var j;\n  index = 3;\n  var cartographicsIndex = 0;\n  var vec2sWriteIndex = 0;\n  var vec3sWriteIndex = 0;\n  var vec4sWriteIndex = 0;\n  var miterBroken = false;\n\n  var endBottom = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(\n    bottomPositionsArray,\n    0,\n    segmentEndBottomScratch\n  );\n  var endTop = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(topPositionsArray, 0, segmentEndTopScratch);\n  var endGeometryNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(\n    normalsArray,\n    0,\n    segmentEndNormalScratch\n  );\n\n  if (loop) {\n    var preEndBottom = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(\n      bottomPositionsArray,\n      bottomPositionsArray.length - 6,\n      segmentStartBottomScratch\n    );\n    if (breakMiter(endGeometryNormal, preEndBottom, endBottom, endTop)) {\n      // Miter broken as if for the last point in the loop, needs to be inverted for first point (clone of endBottom)\n      endGeometryNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].negate */ .Z.negate(\n        endGeometryNormal,\n        endGeometryNormal\n      );\n    }\n  }\n\n  var lengthSoFar3D = 0.0;\n  var lengthSoFar2D = 0.0;\n\n  // For translating bounding volume\n  var sumHeights = 0.0;\n\n  for (i = 0; i < segmentCount; i++) {\n    var startBottom = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(endBottom, segmentStartBottomScratch);\n    var startTop = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(endTop, segmentStartTopScratch);\n    var startGeometryNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(\n      endGeometryNormal,\n      segmentStartNormalScratch\n    );\n\n    if (miterBroken) {\n      startGeometryNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].negate */ .Z.negate(\n        startGeometryNormal,\n        startGeometryNormal\n      );\n    }\n\n    endBottom = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(\n      bottomPositionsArray,\n      index,\n      segmentEndBottomScratch\n    );\n    endTop = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(topPositionsArray, index, segmentEndTopScratch);\n    endGeometryNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].unpack */ .Z.unpack(\n      normalsArray,\n      index,\n      segmentEndNormalScratch\n    );\n\n    miterBroken = breakMiter(endGeometryNormal, startBottom, endBottom, endTop);\n\n    // 2D - don\'t clone anything from previous segment b/c possible IDL touch\n    startCartographic.latitude = cartographicsArray[cartographicsIndex];\n    startCartographic.longitude = cartographicsArray[cartographicsIndex + 1];\n    endCartographic.latitude = cartographicsArray[cartographicsIndex + 2];\n    endCartographic.longitude = cartographicsArray[cartographicsIndex + 3];\n    var start2D;\n    var end2D;\n    var startGeometryNormal2D;\n    var endGeometryNormal2D;\n\n    if (compute2dAttributes) {\n      var nudgeResult = nudgeCartographic(startCartographic, endCartographic);\n      start2D = projection.project(startCartographic, segmentStart2DScratch);\n      end2D = projection.project(endCartographic, segmentEnd2DScratch);\n      var direction2D = direction(end2D, start2D, forwardOffset2DScratch);\n      direction2D.y = Math.abs(direction2D.y);\n\n      startGeometryNormal2D = segmentStartNormal2DScratch;\n      endGeometryNormal2D = segmentEndNormal2DScratch;\n      if (\n        nudgeResult === 0 ||\n        _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].dot */ .Z.dot(direction2D, _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNIT_Y */ .Z.UNIT_Y) > MITER_BREAK_SMALL\n      ) {\n        // No nudge - project the original normal\n        // Or, if the line\'s angle relative to the IDL is very acute,\n        // in which case snapping will produce oddly shaped volumes.\n        startGeometryNormal2D = projectNormal(\n          projection,\n          startCartographic,\n          startGeometryNormal,\n          start2D,\n          segmentStartNormal2DScratch\n        );\n        endGeometryNormal2D = projectNormal(\n          projection,\n          endCartographic,\n          endGeometryNormal,\n          end2D,\n          segmentEndNormal2DScratch\n        );\n      } else if (nudgeResult === 1) {\n        // Start is close to IDL - snap start normal to align with IDL\n        endGeometryNormal2D = projectNormal(\n          projection,\n          endCartographic,\n          endGeometryNormal,\n          end2D,\n          segmentEndNormal2DScratch\n        );\n        startGeometryNormal2D.x = 0.0;\n        // If start longitude is negative and end longitude is less negative, relative right is unit -Y\n        // If start longitude is positive and end longitude is less positive, relative right is unit +Y\n        startGeometryNormal2D.y = _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].sign */ .Z.sign(\n          startCartographic.longitude - Math.abs(endCartographic.longitude)\n        );\n        startGeometryNormal2D.z = 0.0;\n      } else {\n        // End is close to IDL - snap end normal to align with IDL\n        startGeometryNormal2D = projectNormal(\n          projection,\n          startCartographic,\n          startGeometryNormal,\n          start2D,\n          segmentStartNormal2DScratch\n        );\n        endGeometryNormal2D.x = 0.0;\n        // If end longitude is negative and start longitude is less negative, relative right is unit Y\n        // If end longitude is positive and start longitude is less positive, relative right is unit -Y\n        endGeometryNormal2D.y = _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].sign */ .Z.sign(\n          startCartographic.longitude - endCartographic.longitude\n        );\n        endGeometryNormal2D.z = 0.0;\n      }\n    }\n\n    /****************************************\n     * Geometry descriptors of a "line on terrain,"\n     * as opposed to the "shadow volume used to draw\n     * the line on terrain":\n     * - position of start + offset to end\n     * - start, end, and right-facing planes\n     * - encoded texture coordinate offsets\n     ****************************************/\n\n    /* 3D */\n    var segmentLength3D = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].distance */ .Z.distance(startTop, endTop);\n\n    var encodedStart = _EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].fromCartesian */ .Z.fromCartesian(\n      startBottom,\n      encodeScratch\n    );\n    var forwardOffset = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(\n      endBottom,\n      startBottom,\n      offsetScratch\n    );\n    var forward = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(forwardOffset, rightScratch);\n\n    var startUp = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(startTop, startBottom, startUpScratch);\n    startUp = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(startUp, startUp);\n    var rightNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(forward, startUp, rightScratch);\n    rightNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(rightNormal, rightNormal);\n\n    var startPlaneNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(\n      startUp,\n      startGeometryNormal,\n      startPlaneNormalScratch\n    );\n    startPlaneNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(startPlaneNormal, startPlaneNormal);\n\n    var endUp = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(endTop, endBottom, endUpScratch);\n    endUp = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(endUp, endUp);\n    var endPlaneNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cross */ .Z.cross(\n      endGeometryNormal,\n      endUp,\n      endPlaneNormalScratch\n    );\n    endPlaneNormal = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(endPlaneNormal, endPlaneNormal);\n\n    var texcoordNormalization3DX = segmentLength3D / length3D;\n    var texcoordNormalization3DY = lengthSoFar3D / length3D;\n\n    /* 2D */\n    var segmentLength2D = 0.0;\n    var encodedStart2D;\n    var forwardOffset2D;\n    var right2D;\n    var texcoordNormalization2DX = 0.0;\n    var texcoordNormalization2DY = 0.0;\n    if (compute2dAttributes) {\n      segmentLength2D = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].distance */ .Z.distance(start2D, end2D);\n\n      encodedStart2D = _EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].fromCartesian */ .Z.fromCartesian(\n        start2D,\n        encodeScratch2D\n      );\n      forwardOffset2D = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].subtract */ .Z.subtract(\n        end2D,\n        start2D,\n        forwardOffset2DScratch\n      );\n\n      // Right direction is just forward direction rotated by -90 degrees around Z\n      // Similarly with plane normals\n      right2D = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(forwardOffset2D, right2DScratch);\n      var swap = right2D.x;\n      right2D.x = right2D.y;\n      right2D.y = -swap;\n\n      texcoordNormalization2DX = segmentLength2D / length2D;\n      texcoordNormalization2DY = lengthSoFar2D / length2D;\n    }\n    /** Pack **/\n    for (j = 0; j < 8; j++) {\n      var vec4Index = vec4sWriteIndex + j * 4;\n      var vec2Index = vec2sWriteIndex + j * 2;\n      var wIndex = vec4Index + 3;\n\n      // Encode sidedness of vertex relative to right plane in texture coordinate normalization X,\n      // whether vertex is top or bottom of volume in sign/magnitude of normalization Y.\n      var rightPlaneSide = j < 4 ? 1.0 : -1.0;\n      var topBottomSide = j === 2 || j === 3 || j === 6 || j === 7 ? 1.0 : -1.0;\n\n      // 3D\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(encodedStart.high, startHiAndForwardOffsetX, vec4Index);\n      startHiAndForwardOffsetX[wIndex] = forwardOffset.x;\n\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(encodedStart.low, startLoAndForwardOffsetY, vec4Index);\n      startLoAndForwardOffsetY[wIndex] = forwardOffset.y;\n\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(\n        startPlaneNormal,\n        startNormalAndForwardOffsetZ,\n        vec4Index\n      );\n      startNormalAndForwardOffsetZ[wIndex] = forwardOffset.z;\n\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(\n        endPlaneNormal,\n        endNormalAndTextureCoordinateNormalizationX,\n        vec4Index\n      );\n      endNormalAndTextureCoordinateNormalizationX[wIndex] =\n        texcoordNormalization3DX * rightPlaneSide;\n\n      _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(\n        rightNormal,\n        rightNormalAndTextureCoordinateNormalizationY,\n        vec4Index\n      );\n\n      var texcoordNormalization = texcoordNormalization3DY * topBottomSide;\n      if (texcoordNormalization === 0.0 && topBottomSide < 0.0) {\n        texcoordNormalization = 9.0; // some value greater than 1.0\n      }\n      rightNormalAndTextureCoordinateNormalizationY[\n        wIndex\n      ] = texcoordNormalization;\n\n      // 2D\n      if (compute2dAttributes) {\n        startHiLo2D[vec4Index] = encodedStart2D.high.x;\n        startHiLo2D[vec4Index + 1] = encodedStart2D.high.y;\n        startHiLo2D[vec4Index + 2] = encodedStart2D.low.x;\n        startHiLo2D[vec4Index + 3] = encodedStart2D.low.y;\n\n        startEndNormals2D[vec4Index] = -startGeometryNormal2D.y;\n        startEndNormals2D[vec4Index + 1] = startGeometryNormal2D.x;\n        startEndNormals2D[vec4Index + 2] = endGeometryNormal2D.y;\n        startEndNormals2D[vec4Index + 3] = -endGeometryNormal2D.x;\n\n        offsetAndRight2D[vec4Index] = forwardOffset2D.x;\n        offsetAndRight2D[vec4Index + 1] = forwardOffset2D.y;\n        offsetAndRight2D[vec4Index + 2] = right2D.x;\n        offsetAndRight2D[vec4Index + 3] = right2D.y;\n\n        texcoordNormalization2D[vec2Index] =\n          texcoordNormalization2DX * rightPlaneSide;\n\n        texcoordNormalization = texcoordNormalization2DY * topBottomSide;\n        if (texcoordNormalization === 0.0 && topBottomSide < 0.0) {\n          texcoordNormalization = 9.0; // some value greater than 1.0\n        }\n        texcoordNormalization2D[vec2Index + 1] = texcoordNormalization;\n      }\n    }\n\n    // Adjust height of volume in 3D\n    var adjustHeightStartBottom = adjustHeightStartBottomScratch;\n    var adjustHeightEndBottom = adjustHeightEndBottomScratch;\n    var adjustHeightStartTop = adjustHeightStartTopScratch;\n    var adjustHeightEndTop = adjustHeightEndTopScratch;\n\n    var getHeightsRectangle = _Rectangle_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromCartographicArray */ .Z.fromCartographicArray(\n      getHeightCartographics,\n      getHeightRectangleScratch\n    );\n    var minMaxHeights = _ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getMinimumMaximumHeights */ .Z.getMinimumMaximumHeights(\n      getHeightsRectangle,\n      ellipsoid\n    );\n    var minHeight = minMaxHeights.minimumTerrainHeight;\n    var maxHeight = minMaxHeights.maximumTerrainHeight;\n\n    sumHeights += minHeight;\n    sumHeights += maxHeight;\n\n    adjustHeights(\n      startBottom,\n      startTop,\n      minHeight,\n      maxHeight,\n      adjustHeightStartBottom,\n      adjustHeightStartTop\n    );\n    adjustHeights(\n      endBottom,\n      endTop,\n      minHeight,\n      maxHeight,\n      adjustHeightEndBottom,\n      adjustHeightEndTop\n    );\n\n    // Nudge the positions away from the "polyline" a little bit to prevent errors in GeometryPipeline\n    var normalNudge = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      rightNormal,\n      _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON5 */ .Z.EPSILON5,\n      normalNudgeScratch\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(\n      adjustHeightStartBottom,\n      normalNudge,\n      adjustHeightStartBottom\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(adjustHeightEndBottom, normalNudge, adjustHeightEndBottom);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(adjustHeightStartTop, normalNudge, adjustHeightStartTop);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(adjustHeightEndTop, normalNudge, adjustHeightEndTop);\n\n    // If the segment is very close to the XZ plane, nudge the vertices slightly to avoid touching it.\n    nudgeXZ(adjustHeightStartBottom, adjustHeightEndBottom);\n    nudgeXZ(adjustHeightStartTop, adjustHeightEndTop);\n\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(adjustHeightStartBottom, positionsArray, vec3sWriteIndex);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(adjustHeightEndBottom, positionsArray, vec3sWriteIndex + 3);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(adjustHeightEndTop, positionsArray, vec3sWriteIndex + 6);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(adjustHeightStartTop, positionsArray, vec3sWriteIndex + 9);\n\n    normalNudge = _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      rightNormal,\n      -2.0 * _Math_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].EPSILON5 */ .Z.EPSILON5,\n      normalNudgeScratch\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(\n      adjustHeightStartBottom,\n      normalNudge,\n      adjustHeightStartBottom\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(adjustHeightEndBottom, normalNudge, adjustHeightEndBottom);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(adjustHeightStartTop, normalNudge, adjustHeightStartTop);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].add */ .Z.add(adjustHeightEndTop, normalNudge, adjustHeightEndTop);\n\n    nudgeXZ(adjustHeightStartBottom, adjustHeightEndBottom);\n    nudgeXZ(adjustHeightStartTop, adjustHeightEndTop);\n\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(\n      adjustHeightStartBottom,\n      positionsArray,\n      vec3sWriteIndex + 12\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(\n      adjustHeightEndBottom,\n      positionsArray,\n      vec3sWriteIndex + 15\n    );\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(adjustHeightEndTop, positionsArray, vec3sWriteIndex + 18);\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].pack */ .Z.pack(adjustHeightStartTop, positionsArray, vec3sWriteIndex + 21);\n\n    cartographicsIndex += 2;\n    index += 3;\n\n    vec2sWriteIndex += 16;\n    vec3sWriteIndex += 24;\n    vec4sWriteIndex += 32;\n\n    lengthSoFar3D += segmentLength3D;\n    lengthSoFar2D += segmentLength2D;\n  }\n\n  index = 0;\n  var indexOffset = 0;\n  for (i = 0; i < segmentCount; i++) {\n    for (j = 0; j < REFERENCE_INDICES_LENGTH; j++) {\n      indices[index + j] = REFERENCE_INDICES[j] + indexOffset;\n    }\n    indexOffset += 8;\n    index += REFERENCE_INDICES_LENGTH;\n  }\n\n  var boundingSpheres = scratchBoundingSpheres;\n  _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromVertices */ .Z.fromVertices(\n    bottomPositionsArray,\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ZERO */ .Z.ZERO,\n    3,\n    boundingSpheres[0]\n  );\n  _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromVertices */ .Z.fromVertices(\n    topPositionsArray,\n    _Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ZERO */ .Z.ZERO,\n    3,\n    boundingSpheres[1]\n  );\n  var boundingSphere = _BoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromBoundingSpheres */ .Z.fromBoundingSpheres(boundingSpheres);\n\n  // Adjust bounding sphere height and radius to cover more of the volume\n  boundingSphere.radius += sumHeights / (segmentCount * 2.0);\n\n  var attributes = {\n    position: new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n      componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].DOUBLE */ .Z.DOUBLE,\n      componentsPerAttribute: 3,\n      normalize: false,\n      values: positionsArray,\n    }),\n    startHiAndForwardOffsetX: getVec4GeometryAttribute(\n      startHiAndForwardOffsetX\n    ),\n    startLoAndForwardOffsetY: getVec4GeometryAttribute(\n      startLoAndForwardOffsetY\n    ),\n    startNormalAndForwardOffsetZ: getVec4GeometryAttribute(\n      startNormalAndForwardOffsetZ\n    ),\n    endNormalAndTextureCoordinateNormalizationX: getVec4GeometryAttribute(\n      endNormalAndTextureCoordinateNormalizationX\n    ),\n    rightNormalAndTextureCoordinateNormalizationY: getVec4GeometryAttribute(\n      rightNormalAndTextureCoordinateNormalizationY\n    ),\n  };\n\n  if (compute2dAttributes) {\n    attributes.startHiLo2D = getVec4GeometryAttribute(startHiLo2D);\n    attributes.offsetAndRight2D = getVec4GeometryAttribute(offsetAndRight2D);\n    attributes.startEndNormals2D = getVec4GeometryAttribute(startEndNormals2D);\n    attributes.texcoordNormalization2D = new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n      componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      componentsPerAttribute: 2,\n      normalize: false,\n      values: texcoordNormalization2D,\n    });\n  }\n\n  return new _Geometry_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n    attributes: attributes,\n    indices: indices,\n    boundingSphere: boundingSphere,\n  });\n}\n\nfunction getVec4GeometryAttribute(typedArray) {\n  return new _GeometryAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z({\n    componentDatatype: _ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n    componentsPerAttribute: 4,\n    normalize: false,\n    values: typedArray,\n  });\n}\n\n/**\n * Approximates an ellipsoid-tangent vector in 2D by projecting the end point into 2D.\n * Exposed for testing.\n *\n * @param {MapProjection} projection Map Projection for projecting coordinates to 2D.\n * @param {Cartographic} cartographic The cartographic origin point of the normal.\n *   Used to check if the normal crosses the IDL during projection.\n * @param {Cartesian3} normal The normal in 3D.\n * @param {Cartesian3} projectedPosition The projected origin point of the normal in 2D.\n * @param {Cartesian3} result Result parameter on which to store the projected normal.\n * @private\n */\nGroundPolylineGeometry._projectNormal = projectNormal;\n/* harmony default export */ __webpack_exports__["Z"] = (GroundPolylineGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ25DLHlCQUF5QixvRkFBd0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHVFQUFpQjtBQUM5RCx5QkFBeUIsa0ZBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSxhQUFhLDhEQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLGFBQWEsdUVBQWlCO0FBQzlCLHVCQUF1QixrRkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCLFdBQVcsY0FBYztBQUN6QjtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLFlBQVk7QUFDdkIsV0FBVyxZQUFZO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLHNCQUFzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0NvcmUvR3JvdW5kUG9seWxpbmVHZW9tZXRyeS5qcz9jZWQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzIGZyb20gXCIuL0FwcHJveGltYXRlVGVycmFpbkhlaWdodHMuanNcIjtcbmltcG9ydCBBcmNUeXBlIGZyb20gXCIuL0FyY1R5cGUuanNcIjtcbmltcG9ydCBhcnJheVJlbW92ZUR1cGxpY2F0ZXMgZnJvbSBcIi4vYXJyYXlSZW1vdmVEdXBsaWNhdGVzLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmUgZnJvbSBcIi4vQm91bmRpbmdTcGhlcmUuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDYXJ0b2dyYXBoaWMgZnJvbSBcIi4vQ2FydG9ncmFwaGljLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4vQ2hlY2suanNcIjtcbmltcG9ydCBDb21wb25lbnREYXRhdHlwZSBmcm9tIFwiLi9Db21wb25lbnREYXRhdHlwZS5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZCBmcm9tIFwiLi9FbGxpcHNvaWQuanNcIjtcbmltcG9ydCBFbGxpcHNvaWRHZW9kZXNpYyBmcm9tIFwiLi9FbGxpcHNvaWRHZW9kZXNpYy5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZFJodW1iTGluZSBmcm9tIFwiLi9FbGxpcHNvaWRSaHVtYkxpbmUuanNcIjtcbmltcG9ydCBFbmNvZGVkQ2FydGVzaWFuMyBmcm9tIFwiLi9FbmNvZGVkQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IEdlb2dyYXBoaWNQcm9qZWN0aW9uIGZyb20gXCIuL0dlb2dyYXBoaWNQcm9qZWN0aW9uLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnkuanNcIjtcbmltcG9ydCBHZW9tZXRyeUF0dHJpYnV0ZSBmcm9tIFwiLi9HZW9tZXRyeUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IEludGVyc2VjdGlvblRlc3RzIGZyb20gXCIuL0ludGVyc2VjdGlvblRlc3RzLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi9NYXRoLmpzXCI7XG5pbXBvcnQgTWF0cml4MyBmcm9tIFwiLi9NYXRyaXgzLmpzXCI7XG5pbXBvcnQgUGxhbmUgZnJvbSBcIi4vUGxhbmUuanNcIjtcbmltcG9ydCBRdWF0ZXJuaW9uIGZyb20gXCIuL1F1YXRlcm5pb24uanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4vUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgV2ViTWVyY2F0b3JQcm9qZWN0aW9uIGZyb20gXCIuL1dlYk1lcmNhdG9yUHJvamVjdGlvbi5qc1wiO1xuXG52YXIgUFJPSkVDVElPTlMgPSBbR2VvZ3JhcGhpY1Byb2plY3Rpb24sIFdlYk1lcmNhdG9yUHJvamVjdGlvbl07XG52YXIgUFJPSkVDVElPTl9DT1VOVCA9IFBST0pFQ1RJT05TLmxlbmd0aDtcblxudmFyIE1JVEVSX0JSRUFLX1NNQUxMID0gTWF0aC5jb3MoQ2VzaXVtTWF0aC50b1JhZGlhbnMoMzAuMCkpO1xudmFyIE1JVEVSX0JSRUFLX0xBUkdFID0gTWF0aC5jb3MoQ2VzaXVtTWF0aC50b1JhZGlhbnMoMTUwLjApKTtcblxuLy8gSW5pdGlhbCBoZWlnaHRzIGZvciBjb25zdHJ1Y3RpbmcgdGhlIHdhbGwuXG4vLyBLZWVwaW5nIFdBTExfSU5JVElBTF9NSU5fSEVJR0hUIG5lYXIgdGhlIGVsbGlwc29pZCBzdXJmYWNlIGhlbHBzXG4vLyBwcmV2ZW50IHByZWNpc2lvbiBwcm9ibGVtcyB3aXRoIHBsYW5lcyBpbiB0aGUgc2hhZGVyLlxuLy8gUHV0dGluZyB0aGUgc3RhcnQgcG9pbnQgb2YgYSBwbGFuZSBhdCBBcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLl9kZWZhdWx0TWluVGVycmFpbkhlaWdodCxcbi8vIHdoaWNoIGlzIGEgaGlnaGx5IGNvbnNlcnZhdGl2ZSBib3VuZCwgdXN1YWxseSBwdXRzIHRoZSBwbGFuZSBvcmlnaW4gc2V2ZXJhbCB0aG91c2FuZHNcbi8vIG9mIG1ldGVycyBhd2F5IGZyb20gdGhlIGFjdHVhbCB0ZXJyYWluLCBjYXVzaW5nIGZsb2F0aW5nIHBvaW50IHByb2JsZW1zIHdoZW4gY2hlY2tpbmdcbi8vIGZyYWdtZW50cyBvbiB0ZXJyYWluIGFnYWluc3QgdGhlIHBsYW5lLlxuLy8gRWxsaXBzb2lkIGhlaWdodCBpcyBnZW5lcmFsbHkgbXVjaCBjbG9zZXIuXG4vLyBUaGUgaW5pdGlhbCBtYXggaGVpZ2h0IGlzIGFyYml0cmFyeS5cbi8vIEJvdGggaGVpZ2h0cyBhcmUgY29ycmVjdGVkIHVzaW5nIEFwcHJveGltYXRlVGVycmFpbkhlaWdodHMgZm9yIGNvbXB1dGluZyB0aGUgYWN0dWFsIHZvbHVtZSBnZW9tZXRyeS5cbnZhciBXQUxMX0lOSVRJQUxfTUlOX0hFSUdIVCA9IDAuMDtcbnZhciBXQUxMX0lOSVRJQUxfTUFYX0hFSUdIVCA9IDEwMDAuMDtcblxuLyoqXG4gKiBBIGRlc2NyaXB0aW9uIG9mIGEgcG9seWxpbmUgb24gdGVycmFpbiBvciAzRCBUaWxlcy4gT25seSB0byBiZSB1c2VkIHdpdGgge0BsaW5rIEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlfS5cbiAqXG4gKiBAYWxpYXMgR3JvdW5kUG9seWxpbmVHZW9tZXRyeVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM1tdfSBvcHRpb25zLnBvc2l0aW9ucyBBbiBhcnJheSBvZiB7QGxpbmsgQ2FydGVzaWFuM30gZGVmaW5pbmcgdGhlIHBvbHlsaW5lJ3MgcG9pbnRzLiBIZWlnaHRzIGFib3ZlIHRoZSBlbGxpcHNvaWQgd2lsbCBiZSBpZ25vcmVkLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLndpZHRoPTEuMF0gVGhlIHNjcmVlbiBzcGFjZSB3aWR0aCBpbiBwaXhlbHMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZ3JhbnVsYXJpdHk9OTk5OS4wXSBUaGUgZGlzdGFuY2UgaW50ZXJ2YWwgaW4gbWV0ZXJzIHVzZWQgZm9yIGludGVycG9sYXRpbmcgb3B0aW9ucy5wb2ludHMuIERlZmF1bHRzIHRvIDk5OTkuMCBtZXRlcnMuIFplcm8gaW5kaWNhdGVzIG5vIGludGVycG9sYXRpb24uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmxvb3A9ZmFsc2VdIFdoZXRoZXIgZHVyaW5nIGdlb21ldHJ5IGNyZWF0aW9uIGEgbGluZSBzZWdtZW50IHdpbGwgYmUgYWRkZWQgYmV0d2VlbiB0aGUgbGFzdCBhbmQgZmlyc3QgbGluZSBwb3NpdGlvbnMgdG8gbWFrZSB0aGlzIFBvbHlsaW5lIGEgbG9vcC5cbiAqIEBwYXJhbSB7QXJjVHlwZX0gW29wdGlvbnMuYXJjVHlwZT1BcmNUeXBlLkdFT0RFU0lDXSBUaGUgdHlwZSBvZiBsaW5lIHRoZSBwb2x5bGluZSBzZWdtZW50cyBtdXN0IGZvbGxvdy4gVmFsaWQgb3B0aW9ucyBhcmUge0BsaW5rIEFyY1R5cGUuR0VPREVTSUN9IGFuZCB7QGxpbmsgQXJjVHlwZS5SSFVNQn0uXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEF0IGxlYXN0IHR3byBwb3NpdGlvbnMgYXJlIHJlcXVpcmVkLlxuICpcbiAqIEBzZWUgR3JvdW5kUG9seWxpbmVQcmltaXRpdmVcbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvc2l0aW9ucyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAtMTEyLjEzNDAxNjQ0NTAzMzEsIDM2LjA1NDk0Mjg3ODM2MTI4LFxuICogICAtMTEyLjA4ODIxMDEwNTgyNjQ1LCAzNi4wOTc4MDQwNzEzODA3MTUsXG4gKiAgIC0xMTIuMTMyOTYwNzk3MzAwMjQsIDM2LjE2ODc2OTE0NjgwMTEwNFxuICogXSk7XG4gKlxuICogdmFyIGdlb21ldHJ5ID0gbmV3IENlc2l1bS5Hcm91bmRQb2x5bGluZUdlb21ldHJ5KHtcbiAqICAgcG9zaXRpb25zIDogcG9zaXRpb25zXG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gR3JvdW5kUG9seWxpbmVHZW9tZXRyeShvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBwb3NpdGlvbnMgPSBvcHRpb25zLnBvc2l0aW9ucztcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQocG9zaXRpb25zKSB8fCBwb3NpdGlvbnMubGVuZ3RoIDwgMikge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIkF0IGxlYXN0IHR3byBwb3NpdGlvbnMgYXJlIHJlcXVpcmVkLlwiKTtcbiAgfVxuICBpZiAoXG4gICAgZGVmaW5lZChvcHRpb25zLmFyY1R5cGUpICYmXG4gICAgb3B0aW9ucy5hcmNUeXBlICE9PSBBcmNUeXBlLkdFT0RFU0lDICYmXG4gICAgb3B0aW9ucy5hcmNUeXBlICE9PSBBcmNUeXBlLlJIVU1CXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiVmFsaWQgb3B0aW9ucyBmb3IgYXJjVHlwZSBhcmUgQXJjVHlwZS5HRU9ERVNJQyBhbmQgQXJjVHlwZS5SSFVNQi5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgLyoqXG4gICAqIFRoZSBzY3JlZW4gc3BhY2Ugd2lkdGggaW4gcGl4ZWxzLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgdGhpcy53aWR0aCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLndpZHRoLCAxLjApOyAvLyBEb2Vzbid0IGdldCBwYWNrZWQsIG5vdCBuZWNlc3NhcnkgZm9yIGNvbXB1dGluZyBnZW9tZXRyeS5cblxuICB0aGlzLl9wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG5cbiAgLyoqXG4gICAqIFRoZSBkaXN0YW5jZSBpbnRlcnZhbCB1c2VkIGZvciBpbnRlcnBvbGF0aW5nIG9wdGlvbnMucG9pbnRzLiBaZXJvIGluZGljYXRlcyBubyBpbnRlcnBvbGF0aW9uLlxuICAgKiBEZWZhdWx0IG9mIDk5OTkuMCBhbGxvd3MgY2VudGltZXRlciBhY2N1cmFjeSB3aXRoIDMyIGJpdCBmbG9hdGluZyBwb2ludC5cbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBkZWZhdWx0IDk5OTkuMFxuICAgKi9cbiAgdGhpcy5ncmFudWxhcml0eSA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmdyYW51bGFyaXR5LCA5OTk5LjApO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIGR1cmluZyBnZW9tZXRyeSBjcmVhdGlvbiBhIGxpbmUgc2VnbWVudCB3aWxsIGJlIGFkZGVkIGJldHdlZW4gdGhlIGxhc3QgYW5kIGZpcnN0IGxpbmUgcG9zaXRpb25zIHRvIG1ha2UgdGhpcyBQb2x5bGluZSBhIGxvb3AuXG4gICAqIElmIHRoZSBnZW9tZXRyeSBoYXMgdHdvIHBvc2l0aW9ucyB0aGlzIHBhcmFtZXRlciB3aWxsIGJlIGlnbm9yZWQuXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgdGhpcy5sb29wID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMubG9vcCwgZmFsc2UpO1xuXG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBwYXRoIHRoZSBwb2x5bGluZSBtdXN0IGZvbGxvdy4gVmFsaWQgb3B0aW9ucyBhcmUge0BsaW5rIEFyY1R5cGUuR0VPREVTSUN9IGFuZCB7QGxpbmsgQXJjVHlwZS5SSFVNQn0uXG4gICAqIEB0eXBlIHtBcmNUeXBlfVxuICAgKiBAZGVmYXVsdCBBcmNUeXBlLkdFT0RFU0lDXG4gICAqL1xuICB0aGlzLmFyY1R5cGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5hcmNUeXBlLCBBcmNUeXBlLkdFT0RFU0lDKTtcblxuICB0aGlzLl9lbGxpcHNvaWQgPSBFbGxpcHNvaWQuV0dTODQ7XG5cbiAgLy8gTWFwUHJvamVjdGlvbnMgY2FuJ3QgYmUgcGFja2VkLCBzbyBzdG9yZSB0aGUgaW5kZXggdG8gYSBrbm93biBNYXBQcm9qZWN0aW9uLlxuICB0aGlzLl9wcm9qZWN0aW9uSW5kZXggPSAwO1xuICB0aGlzLl93b3JrZXJOYW1lID0gXCJjcmVhdGVHcm91bmRQb2x5bGluZUdlb21ldHJ5XCI7XG5cbiAgLy8gVXNlZCBieSBHcm91bmRQb2x5bGluZVByaW1pdGl2ZSB0byBzaWduYWwgd29ya2VyIHRoYXQgc2NlbmVtb2RlIGlzIDNEIG9ubHkuXG4gIHRoaXMuX3NjZW5lM0RPbmx5ID0gZmFsc2U7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdyb3VuZFBvbHlsaW5lR2VvbWV0cnkucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHVzZWQgdG8gcGFjayB0aGUgb2JqZWN0IGludG8gYW4gYXJyYXkuXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQb2x5bGluZUdlb21ldHJ5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHBhY2tlZExlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgMS4wICtcbiAgICAgICAgdGhpcy5fcG9zaXRpb25zLmxlbmd0aCAqIDMgK1xuICAgICAgICAxLjAgK1xuICAgICAgICAxLjAgK1xuICAgICAgICAxLjAgK1xuICAgICAgICBFbGxpcHNvaWQucGFja2VkTGVuZ3RoICtcbiAgICAgICAgMS4wICtcbiAgICAgICAgMS4wXG4gICAgICApO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBTZXQgdGhlIEdyb3VuZFBvbHlsaW5lR2VvbWV0cnkncyBwcm9qZWN0aW9uIGFuZCBlbGxpcHNvaWQuXG4gKiBVc2VkIGJ5IEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlIHRvIHNpZ25hbCBzY2VuZSBpbmZvcm1hdGlvbiB0byB0aGUgZ2VvbWV0cnkgZm9yIGdlbmVyYXRpbmcgMkQgYXR0cmlidXRlcy5cbiAqXG4gKiBAcGFyYW0ge0dyb3VuZFBvbHlsaW5lR2VvbWV0cnl9IGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkgR3JvdW5kUG9seWxpbkdlb21ldHJ5IGRlc2NyaWJpbmcgYSBwb2x5bGluZSBvbiB0ZXJyYWluIG9yIDNEIFRpbGVzLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBtYXBQcm9qZWN0aW9uIEEgTWFwUHJvamVjdGlvbiB1c2VkIGZvciBwcm9qZWN0aW5nIGNhcnRvZ3JhcGhpYyBjb29yZGluYXRlcyB0byAyRC5cbiAqIEBwcml2YXRlXG4gKi9cbkdyb3VuZFBvbHlsaW5lR2VvbWV0cnkuc2V0UHJvamVjdGlvbkFuZEVsbGlwc29pZCA9IGZ1bmN0aW9uIChcbiAgZ3JvdW5kUG9seWxpbmVHZW9tZXRyeSxcbiAgbWFwUHJvamVjdGlvblxuKSB7XG4gIHZhciBwcm9qZWN0aW9uSW5kZXggPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IFBST0pFQ1RJT05fQ09VTlQ7IGkrKykge1xuICAgIGlmIChtYXBQcm9qZWN0aW9uIGluc3RhbmNlb2YgUFJPSkVDVElPTlNbaV0pIHtcbiAgICAgIHByb2plY3Rpb25JbmRleCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBncm91bmRQb2x5bGluZUdlb21ldHJ5Ll9wcm9qZWN0aW9uSW5kZXggPSBwcm9qZWN0aW9uSW5kZXg7XG4gIGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkuX2VsbGlwc29pZCA9IG1hcFByb2plY3Rpb24uZWxsaXBzb2lkO1xufTtcblxudmFyIGNhcnQzU2NyYXRjaDEgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGNhcnQzU2NyYXRjaDIgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGNhcnQzU2NyYXRjaDMgPSBuZXcgQ2FydGVzaWFuMygpO1xuZnVuY3Rpb24gY29tcHV0ZVJpZ2h0Tm9ybWFsKHN0YXJ0LCBlbmQsIG1heEhlaWdodCwgZWxsaXBzb2lkLCByZXN1bHQpIHtcbiAgdmFyIHN0YXJ0Qm90dG9tID0gZ2V0UG9zaXRpb24oZWxsaXBzb2lkLCBzdGFydCwgMC4wLCBjYXJ0M1NjcmF0Y2gxKTtcbiAgdmFyIHN0YXJ0VG9wID0gZ2V0UG9zaXRpb24oZWxsaXBzb2lkLCBzdGFydCwgbWF4SGVpZ2h0LCBjYXJ0M1NjcmF0Y2gyKTtcbiAgdmFyIGVuZEJvdHRvbSA9IGdldFBvc2l0aW9uKGVsbGlwc29pZCwgZW5kLCAwLjAsIGNhcnQzU2NyYXRjaDMpO1xuXG4gIHZhciB1cCA9IGRpcmVjdGlvbihzdGFydFRvcCwgc3RhcnRCb3R0b20sIGNhcnQzU2NyYXRjaDIpO1xuICB2YXIgZm9yd2FyZCA9IGRpcmVjdGlvbihlbmRCb3R0b20sIHN0YXJ0Qm90dG9tLCBjYXJ0M1NjcmF0Y2gzKTtcblxuICBDYXJ0ZXNpYW4zLmNyb3NzKGZvcndhcmQsIHVwLCByZXN1bHQpO1xuICByZXR1cm4gQ2FydGVzaWFuMy5ub3JtYWxpemUocmVzdWx0LCByZXN1bHQpO1xufVxuXG52YXIgaW50ZXJwb2xhdGVkQ2FydG9ncmFwaGljU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBpbnRlcnBvbGF0ZWRCb3R0b21TY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBpbnRlcnBvbGF0ZWRUb3BTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBpbnRlcnBvbGF0ZWROb3JtYWxTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbmZ1bmN0aW9uIGludGVycG9sYXRlU2VnbWVudChcbiAgc3RhcnQsXG4gIGVuZCxcbiAgbWluSGVpZ2h0LFxuICBtYXhIZWlnaHQsXG4gIGdyYW51bGFyaXR5LFxuICBhcmNUeXBlLFxuICBlbGxpcHNvaWQsXG4gIG5vcm1hbHNBcnJheSxcbiAgYm90dG9tUG9zaXRpb25zQXJyYXksXG4gIHRvcFBvc2l0aW9uc0FycmF5LFxuICBjYXJ0b2dyYXBoaWNzQXJyYXlcbikge1xuICBpZiAoZ3JhbnVsYXJpdHkgPT09IDAuMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBlbGxpcHNvaWRMaW5lO1xuICBpZiAoYXJjVHlwZSA9PT0gQXJjVHlwZS5HRU9ERVNJQykge1xuICAgIGVsbGlwc29pZExpbmUgPSBuZXcgRWxsaXBzb2lkR2VvZGVzaWMoc3RhcnQsIGVuZCwgZWxsaXBzb2lkKTtcbiAgfSBlbHNlIGlmIChhcmNUeXBlID09PSBBcmNUeXBlLlJIVU1CKSB7XG4gICAgZWxsaXBzb2lkTGluZSA9IG5ldyBFbGxpcHNvaWRSaHVtYkxpbmUoc3RhcnQsIGVuZCwgZWxsaXBzb2lkKTtcbiAgfVxuXG4gIHZhciBzdXJmYWNlRGlzdGFuY2UgPSBlbGxpcHNvaWRMaW5lLnN1cmZhY2VEaXN0YW5jZTtcbiAgaWYgKHN1cmZhY2VEaXN0YW5jZSA8IGdyYW51bGFyaXR5KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSByaWdodHdhcmRzIG5vcm1hbCBhcHBsaWNhYmxlIGF0IGFsbCBpbnRlcnBvbGF0ZWQgcG9pbnRzXG4gIHZhciBpbnRlcnBvbGF0ZWROb3JtYWwgPSBjb21wdXRlUmlnaHROb3JtYWwoXG4gICAgc3RhcnQsXG4gICAgZW5kLFxuICAgIG1heEhlaWdodCxcbiAgICBlbGxpcHNvaWQsXG4gICAgaW50ZXJwb2xhdGVkTm9ybWFsU2NyYXRjaFxuICApO1xuXG4gIHZhciBzZWdtZW50cyA9IE1hdGguY2VpbChzdXJmYWNlRGlzdGFuY2UgLyBncmFudWxhcml0eSk7XG4gIHZhciBpbnRlcnBvaW50RGlzdGFuY2UgPSBzdXJmYWNlRGlzdGFuY2UgLyBzZWdtZW50cztcbiAgdmFyIGRpc3RhbmNlRnJvbVN0YXJ0ID0gaW50ZXJwb2ludERpc3RhbmNlO1xuICB2YXIgcG9pbnRzVG9BZGQgPSBzZWdtZW50cyAtIDE7XG4gIHZhciBwYWNrSW5kZXggPSBub3JtYWxzQXJyYXkubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50c1RvQWRkOyBpKyspIHtcbiAgICB2YXIgaW50ZXJwb2xhdGVkQ2FydG9ncmFwaGljID0gZWxsaXBzb2lkTGluZS5pbnRlcnBvbGF0ZVVzaW5nU3VyZmFjZURpc3RhbmNlKFxuICAgICAgZGlzdGFuY2VGcm9tU3RhcnQsXG4gICAgICBpbnRlcnBvbGF0ZWRDYXJ0b2dyYXBoaWNTY3JhdGNoXG4gICAgKTtcbiAgICB2YXIgaW50ZXJwb2xhdGVkQm90dG9tID0gZ2V0UG9zaXRpb24oXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBpbnRlcnBvbGF0ZWRDYXJ0b2dyYXBoaWMsXG4gICAgICBtaW5IZWlnaHQsXG4gICAgICBpbnRlcnBvbGF0ZWRCb3R0b21TY3JhdGNoXG4gICAgKTtcbiAgICB2YXIgaW50ZXJwb2xhdGVkVG9wID0gZ2V0UG9zaXRpb24oXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBpbnRlcnBvbGF0ZWRDYXJ0b2dyYXBoaWMsXG4gICAgICBtYXhIZWlnaHQsXG4gICAgICBpbnRlcnBvbGF0ZWRUb3BTY3JhdGNoXG4gICAgKTtcblxuICAgIENhcnRlc2lhbjMucGFjayhpbnRlcnBvbGF0ZWROb3JtYWwsIG5vcm1hbHNBcnJheSwgcGFja0luZGV4KTtcbiAgICBDYXJ0ZXNpYW4zLnBhY2soaW50ZXJwb2xhdGVkQm90dG9tLCBib3R0b21Qb3NpdGlvbnNBcnJheSwgcGFja0luZGV4KTtcbiAgICBDYXJ0ZXNpYW4zLnBhY2soaW50ZXJwb2xhdGVkVG9wLCB0b3BQb3NpdGlvbnNBcnJheSwgcGFja0luZGV4KTtcbiAgICBjYXJ0b2dyYXBoaWNzQXJyYXkucHVzaChpbnRlcnBvbGF0ZWRDYXJ0b2dyYXBoaWMubGF0aXR1ZGUpO1xuICAgIGNhcnRvZ3JhcGhpY3NBcnJheS5wdXNoKGludGVycG9sYXRlZENhcnRvZ3JhcGhpYy5sb25naXR1ZGUpO1xuXG4gICAgcGFja0luZGV4ICs9IDM7XG4gICAgZGlzdGFuY2VGcm9tU3RhcnQgKz0gaW50ZXJwb2ludERpc3RhbmNlO1xuICB9XG59XG5cbnZhciBoZWlnaHRsZXNzQ2FydG9ncmFwaGljU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbmZ1bmN0aW9uIGdldFBvc2l0aW9uKGVsbGlwc29pZCwgY2FydG9ncmFwaGljLCBoZWlnaHQsIHJlc3VsdCkge1xuICBDYXJ0b2dyYXBoaWMuY2xvbmUoY2FydG9ncmFwaGljLCBoZWlnaHRsZXNzQ2FydG9ncmFwaGljU2NyYXRjaCk7XG4gIGhlaWdodGxlc3NDYXJ0b2dyYXBoaWNTY3JhdGNoLmhlaWdodCA9IGhlaWdodDtcbiAgcmV0dXJuIENhcnRvZ3JhcGhpYy50b0NhcnRlc2lhbihcbiAgICBoZWlnaHRsZXNzQ2FydG9ncmFwaGljU2NyYXRjaCxcbiAgICBlbGxpcHNvaWQsXG4gICAgcmVzdWx0XG4gICk7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBwcm92aWRlZCBpbnN0YW5jZSBpbnRvIHRoZSBwcm92aWRlZCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlnb25HZW9tZXRyeX0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhY2suXG4gKiBAcGFyYW0ge051bWJlcltdfSBhcnJheSBUaGUgYXJyYXkgdG8gcGFjayBpbnRvLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydGluZ0luZGV4PTBdIFRoZSBpbmRleCBpbnRvIHRoZSBhcnJheSBhdCB3aGljaCB0byBzdGFydCBwYWNraW5nIHRoZSBlbGVtZW50cy5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyW119IFRoZSBhcnJheSB0aGF0IHdhcyBwYWNrZWQgaW50b1xuICovXG5Hcm91bmRQb2x5bGluZUdlb21ldHJ5LnBhY2sgPSBmdW5jdGlvbiAodmFsdWUsIGFycmF5LCBzdGFydGluZ0luZGV4KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJ2YWx1ZVwiLCB2YWx1ZSk7XG4gIENoZWNrLmRlZmluZWQoXCJhcnJheVwiLCBhcnJheSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBpbmRleCA9IGRlZmF1bHRWYWx1ZShzdGFydGluZ0luZGV4LCAwKTtcblxuICB2YXIgcG9zaXRpb25zID0gdmFsdWUuX3Bvc2l0aW9ucztcbiAgdmFyIHBvc2l0aW9uc0xlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG5cbiAgYXJyYXlbaW5kZXgrK10gPSBwb3NpdGlvbnNMZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3NpdGlvbnNMZW5ndGg7ICsraSkge1xuICAgIHZhciBjYXJ0ZXNpYW4gPSBwb3NpdGlvbnNbaV07XG4gICAgQ2FydGVzaWFuMy5wYWNrKGNhcnRlc2lhbiwgYXJyYXksIGluZGV4KTtcbiAgICBpbmRleCArPSAzO1xuICB9XG5cbiAgYXJyYXlbaW5kZXgrK10gPSB2YWx1ZS5ncmFudWxhcml0eTtcbiAgYXJyYXlbaW5kZXgrK10gPSB2YWx1ZS5sb29wID8gMS4wIDogMC4wO1xuICBhcnJheVtpbmRleCsrXSA9IHZhbHVlLmFyY1R5cGU7XG5cbiAgRWxsaXBzb2lkLnBhY2sodmFsdWUuX2VsbGlwc29pZCwgYXJyYXksIGluZGV4KTtcbiAgaW5kZXggKz0gRWxsaXBzb2lkLnBhY2tlZExlbmd0aDtcblxuICBhcnJheVtpbmRleCsrXSA9IHZhbHVlLl9wcm9qZWN0aW9uSW5kZXg7XG4gIGFycmF5W2luZGV4KytdID0gdmFsdWUuX3NjZW5lM0RPbmx5ID8gMS4wIDogMC4wO1xuXG4gIHJldHVybiBhcnJheTtcbn07XG5cbi8qKlxuICogUmV0cmlldmVzIGFuIGluc3RhbmNlIGZyb20gYSBwYWNrZWQgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJbXX0gYXJyYXkgVGhlIHBhY2tlZCBhcnJheS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRpbmdJbmRleD0wXSBUaGUgc3RhcnRpbmcgaW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gYmUgdW5wYWNrZWQuXG4gKiBAcGFyYW0ge1BvbHlnb25HZW9tZXRyeX0gW3Jlc3VsdF0gVGhlIG9iamVjdCBpbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKi9cbkdyb3VuZFBvbHlsaW5lR2VvbWV0cnkudW5wYWNrID0gZnVuY3Rpb24gKGFycmF5LCBzdGFydGluZ0luZGV4LCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcImFycmF5XCIsIGFycmF5KTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGluZGV4ID0gZGVmYXVsdFZhbHVlKHN0YXJ0aW5nSW5kZXgsIDApO1xuICB2YXIgcG9zaXRpb25zTGVuZ3RoID0gYXJyYXlbaW5kZXgrK107XG4gIHZhciBwb3NpdGlvbnMgPSBuZXcgQXJyYXkocG9zaXRpb25zTGVuZ3RoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc2l0aW9uc0xlbmd0aDsgaSsrKSB7XG4gICAgcG9zaXRpb25zW2ldID0gQ2FydGVzaWFuMy51bnBhY2soYXJyYXksIGluZGV4KTtcbiAgICBpbmRleCArPSAzO1xuICB9XG5cbiAgdmFyIGdyYW51bGFyaXR5ID0gYXJyYXlbaW5kZXgrK107XG4gIHZhciBsb29wID0gYXJyYXlbaW5kZXgrK10gPT09IDEuMDtcbiAgdmFyIGFyY1R5cGUgPSBhcnJheVtpbmRleCsrXTtcblxuICB2YXIgZWxsaXBzb2lkID0gRWxsaXBzb2lkLnVucGFjayhhcnJheSwgaW5kZXgpO1xuICBpbmRleCArPSBFbGxpcHNvaWQucGFja2VkTGVuZ3RoO1xuXG4gIHZhciBwcm9qZWN0aW9uSW5kZXggPSBhcnJheVtpbmRleCsrXTtcbiAgdmFyIHNjZW5lM0RPbmx5ID0gYXJyYXlbaW5kZXgrK10gPT09IDEuMDtcblxuICBpZiAoIWRlZmluZWQocmVzdWx0KSkge1xuICAgIHJlc3VsdCA9IG5ldyBHcm91bmRQb2x5bGluZUdlb21ldHJ5KHtcbiAgICAgIHBvc2l0aW9uczogcG9zaXRpb25zLFxuICAgIH0pO1xuICB9XG5cbiAgcmVzdWx0Ll9wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG4gIHJlc3VsdC5ncmFudWxhcml0eSA9IGdyYW51bGFyaXR5O1xuICByZXN1bHQubG9vcCA9IGxvb3A7XG4gIHJlc3VsdC5hcmNUeXBlID0gYXJjVHlwZTtcbiAgcmVzdWx0Ll9lbGxpcHNvaWQgPSBlbGxpcHNvaWQ7XG4gIHJlc3VsdC5fcHJvamVjdGlvbkluZGV4ID0gcHJvamVjdGlvbkluZGV4O1xuICByZXN1bHQuX3NjZW5lM0RPbmx5ID0gc2NlbmUzRE9ubHk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmZ1bmN0aW9uIGRpcmVjdGlvbih0YXJnZXQsIG9yaWdpbiwgcmVzdWx0KSB7XG4gIENhcnRlc2lhbjMuc3VidHJhY3QodGFyZ2V0LCBvcmlnaW4sIHJlc3VsdCk7XG4gIENhcnRlc2lhbjMubm9ybWFsaXplKHJlc3VsdCwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gdGFuZ2VudERpcmVjdGlvbih0YXJnZXQsIG9yaWdpbiwgdXAsIHJlc3VsdCkge1xuICByZXN1bHQgPSBkaXJlY3Rpb24odGFyZ2V0LCBvcmlnaW4sIHJlc3VsdCk7XG5cbiAgLy8gb3J0aG9nb25hbGl6ZVxuICByZXN1bHQgPSBDYXJ0ZXNpYW4zLmNyb3NzKHJlc3VsdCwgdXAsIHJlc3VsdCk7XG4gIHJlc3VsdCA9IENhcnRlc2lhbjMubm9ybWFsaXplKHJlc3VsdCwgcmVzdWx0KTtcbiAgcmVzdWx0ID0gQ2FydGVzaWFuMy5jcm9zcyh1cCwgcmVzdWx0LCByZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgdG9QcmV2aW91c1NjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHRvTmV4dFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGZvcndhcmRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciB2ZXJ0ZXhVcFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGNvc2luZTkwID0gMC4wO1xudmFyIGNvc2luZTE4MCA9IC0xLjA7XG5mdW5jdGlvbiBjb21wdXRlVmVydGV4TWl0ZXJOb3JtYWwoXG4gIHByZXZpb3VzQm90dG9tLFxuICB2ZXJ0ZXhCb3R0b20sXG4gIHZlcnRleFRvcCxcbiAgbmV4dEJvdHRvbSxcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIHVwID0gZGlyZWN0aW9uKHZlcnRleFRvcCwgdmVydGV4Qm90dG9tLCB2ZXJ0ZXhVcFNjcmF0Y2gpO1xuXG4gIC8vIENvbXB1dGUgdmVjdG9ycyBwb2ludGluZyB0b3dhcmRzIG5laWdoYm9yaW5nIHBvaW50cyBidXQgdGFuZ2VudCB0byB0aGlzIHBvaW50IG9uIHRoZSBlbGxpcHNvaWRcbiAgdmFyIHRvUHJldmlvdXMgPSB0YW5nZW50RGlyZWN0aW9uKFxuICAgIHByZXZpb3VzQm90dG9tLFxuICAgIHZlcnRleEJvdHRvbSxcbiAgICB1cCxcbiAgICB0b1ByZXZpb3VzU2NyYXRjaFxuICApO1xuICB2YXIgdG9OZXh0ID0gdGFuZ2VudERpcmVjdGlvbihuZXh0Qm90dG9tLCB2ZXJ0ZXhCb3R0b20sIHVwLCB0b05leHRTY3JhdGNoKTtcblxuICAvLyBDaGVjayBpZiB0YW5nZW50cyBhcmUgYWxtb3N0IG9wcG9zaXRlIC0gaWYgc28sIG5vIG5lZWQgdG8gbWl0ZXIuXG4gIGlmIChcbiAgICBDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oXG4gICAgICBDYXJ0ZXNpYW4zLmRvdCh0b1ByZXZpb3VzLCB0b05leHQpLFxuICAgICAgY29zaW5lMTgwLFxuICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ONVxuICAgIClcbiAgKSB7XG4gICAgcmVzdWx0ID0gQ2FydGVzaWFuMy5jcm9zcyh1cCwgdG9QcmV2aW91cywgcmVzdWx0KTtcbiAgICByZXN1bHQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShyZXN1bHQsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIEF2ZXJhZ2UgZGlyZWN0aW9ucyB0byBwcmV2aW91cyBhbmQgdG8gbmV4dCBpbiB0aGUgcGxhbmUgb2YgVXBcbiAgcmVzdWx0ID0gQ2FydGVzaWFuMy5hZGQodG9OZXh0LCB0b1ByZXZpb3VzLCByZXN1bHQpO1xuICByZXN1bHQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShyZXN1bHQsIHJlc3VsdCk7XG5cbiAgLy8gRmxpcCB0aGUgbm9ybWFsIGlmIGl0IGlzbid0IHBvaW50aW5nIHJvdWdobHkgYm91bmQgcmlnaHQgKGFrYSBpZiBmb3J3YXJkIGlzIHBvaW50aW5nIG1vcmUgXCJiYWNrd2FyZHNcIilcbiAgdmFyIGZvcndhcmQgPSBDYXJ0ZXNpYW4zLmNyb3NzKHVwLCByZXN1bHQsIGZvcndhcmRTY3JhdGNoKTtcbiAgaWYgKENhcnRlc2lhbjMuZG90KHRvTmV4dCwgZm9yd2FyZCkgPCBjb3NpbmU5MCkge1xuICAgIHJlc3VsdCA9IENhcnRlc2lhbjMubmVnYXRlKHJlc3VsdCwgcmVzdWx0KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbnZhciBYWl9QTEFORSA9IFBsYW5lLmZyb21Qb2ludE5vcm1hbChDYXJ0ZXNpYW4zLlpFUk8sIENhcnRlc2lhbjMuVU5JVF9ZKTtcblxudmFyIHByZXZpb3VzQm90dG9tU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgdmVydGV4Qm90dG9tU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgdmVydGV4VG9wU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgbmV4dEJvdHRvbVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHZlcnRleE5vcm1hbFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGludGVyc2VjdGlvblNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGNhcnRvZ3JhcGhpY1NjcmF0Y2gwID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIGNhcnRvZ3JhcGhpY1NjcmF0Y2gxID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIGNhcnRvZ3JhcGhpY0ludGVyc2VjdGlvblNjcmF0Y2ggPSBuZXcgQ2FydG9ncmFwaGljKCk7XG4vKipcbiAqIENvbXB1dGVzIHNoYWRvdyB2b2x1bWVzIGZvciB0aGUgZ3JvdW5kIHBvbHlsaW5lLCBjb25zaXN0aW5nIG9mIGl0cyB2ZXJ0aWNlcywgaW5kaWNlcywgYW5kIGEgYm91bmRpbmcgc3BoZXJlLlxuICogVmVydGljZXMgYXJlIFwiZmF0LFwiIHBhY2tpbmcgYWxsIHRoZSBkYXRhIG5lZWRlZCBpbiBlYWNoIHZvbHVtZSB0byBkZXNjcmliZSBhIGxpbmUgb24gdGVycmFpbiBvciAzRCBUaWxlcy5cbiAqIFNob3VsZCBub3QgYmUgY2FsbGVkIGluZGVwZW5kZW50IG9mIHtAbGluayBHcm91bmRQb2x5bGluZVByaW1pdGl2ZX0uXG4gKlxuICogQHBhcmFtIHtHcm91bmRQb2x5bGluZUdlb21ldHJ5fSBncm91bmRQb2x5bGluZUdlb21ldHJ5XG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91bmRQb2x5bGluZUdlb21ldHJ5LmNyZWF0ZUdlb21ldHJ5ID0gZnVuY3Rpb24gKGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkpIHtcbiAgdmFyIGNvbXB1dGUyZEF0dHJpYnV0ZXMgPSAhZ3JvdW5kUG9seWxpbmVHZW9tZXRyeS5fc2NlbmUzRE9ubHk7XG4gIHZhciBsb29wID0gZ3JvdW5kUG9seWxpbmVHZW9tZXRyeS5sb29wO1xuICB2YXIgZWxsaXBzb2lkID0gZ3JvdW5kUG9seWxpbmVHZW9tZXRyeS5fZWxsaXBzb2lkO1xuICB2YXIgZ3JhbnVsYXJpdHkgPSBncm91bmRQb2x5bGluZUdlb21ldHJ5LmdyYW51bGFyaXR5O1xuICB2YXIgYXJjVHlwZSA9IGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkuYXJjVHlwZTtcbiAgdmFyIHByb2plY3Rpb24gPSBuZXcgUFJPSkVDVElPTlNbZ3JvdW5kUG9seWxpbmVHZW9tZXRyeS5fcHJvamVjdGlvbkluZGV4XShcbiAgICBlbGxpcHNvaWRcbiAgKTtcblxuICB2YXIgbWluSGVpZ2h0ID0gV0FMTF9JTklUSUFMX01JTl9IRUlHSFQ7XG4gIHZhciBtYXhIZWlnaHQgPSBXQUxMX0lOSVRJQUxfTUFYX0hFSUdIVDtcblxuICB2YXIgaW5kZXg7XG4gIHZhciBpO1xuXG4gIHZhciBwb3NpdGlvbnMgPSBncm91bmRQb2x5bGluZUdlb21ldHJ5Ll9wb3NpdGlvbnM7XG4gIHZhciBwb3NpdGlvbnNMZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuXG4gIGlmIChwb3NpdGlvbnNMZW5ndGggPT09IDIpIHtcbiAgICBsb29wID0gZmFsc2U7XG4gIH1cblxuICAvLyBTcGxpdCBwb3NpdGlvbnMgYWNyb3NzIHRoZSBJREwgYW5kIHRoZSBQcmltZSBNZXJpZGlhbiBhcyB3ZWxsLlxuICAvLyBTcGxpdCBhY3Jvc3MgcHJpbWUgbWVyaWRpYW4gYmVjYXVzZSB2ZXJ5IGxhcmdlIGdlb21ldHJpZXMgY3Jvc3NpbmcgdGhlIFByaW1lIE1lcmlkaWFuIGJ1dCBub3QgdGhlIElETFxuICAvLyBtYXkgZ2V0IHNwbGl0IGJ5IHRoZSBwbGFuZSBvZiBJREwgKyBQcmltZSBNZXJpZGlhbi5cbiAgdmFyIHAwO1xuICB2YXIgcDE7XG4gIHZhciBjMDtcbiAgdmFyIGMxO1xuICB2YXIgcmh1bWJMaW5lID0gbmV3IEVsbGlwc29pZFJodW1iTGluZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgZWxsaXBzb2lkKTtcbiAgdmFyIGludGVyc2VjdGlvbjtcbiAgdmFyIGludGVyc2VjdGlvbkNhcnRvZ3JhcGhpYztcbiAgdmFyIGludGVyc2VjdGlvbkxvbmdpdHVkZTtcbiAgdmFyIHNwbGl0UG9zaXRpb25zID0gW3Bvc2l0aW9uc1swXV07XG4gIGZvciAoaSA9IDA7IGkgPCBwb3NpdGlvbnNMZW5ndGggLSAxOyBpKyspIHtcbiAgICBwMCA9IHBvc2l0aW9uc1tpXTtcbiAgICBwMSA9IHBvc2l0aW9uc1tpICsgMV07XG4gICAgaW50ZXJzZWN0aW9uID0gSW50ZXJzZWN0aW9uVGVzdHMubGluZVNlZ21lbnRQbGFuZShcbiAgICAgIHAwLFxuICAgICAgcDEsXG4gICAgICBYWl9QTEFORSxcbiAgICAgIGludGVyc2VjdGlvblNjcmF0Y2hcbiAgICApO1xuICAgIGlmIChcbiAgICAgIGRlZmluZWQoaW50ZXJzZWN0aW9uKSAmJlxuICAgICAgIUNhcnRlc2lhbjMuZXF1YWxzRXBzaWxvbihpbnRlcnNlY3Rpb24sIHAwLCBDZXNpdW1NYXRoLkVQU0lMT043KSAmJlxuICAgICAgIUNhcnRlc2lhbjMuZXF1YWxzRXBzaWxvbihpbnRlcnNlY3Rpb24sIHAxLCBDZXNpdW1NYXRoLkVQU0lMT043KVxuICAgICkge1xuICAgICAgaWYgKGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkuYXJjVHlwZSA9PT0gQXJjVHlwZS5HRU9ERVNJQykge1xuICAgICAgICBzcGxpdFBvc2l0aW9ucy5wdXNoKENhcnRlc2lhbjMuY2xvbmUoaW50ZXJzZWN0aW9uKSk7XG4gICAgICB9IGVsc2UgaWYgKGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkuYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgICAgICBpbnRlcnNlY3Rpb25Mb25naXR1ZGUgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgICAgICAgaW50ZXJzZWN0aW9uLFxuICAgICAgICAgIGNhcnRvZ3JhcGhpY1NjcmF0Y2gwXG4gICAgICAgICkubG9uZ2l0dWRlO1xuICAgICAgICBjMCA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMCwgY2FydG9ncmFwaGljU2NyYXRjaDApO1xuICAgICAgICBjMSA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMSwgY2FydG9ncmFwaGljU2NyYXRjaDEpO1xuICAgICAgICByaHVtYkxpbmUuc2V0RW5kUG9pbnRzKGMwLCBjMSk7XG4gICAgICAgIGludGVyc2VjdGlvbkNhcnRvZ3JhcGhpYyA9IHJodW1iTGluZS5maW5kSW50ZXJzZWN0aW9uV2l0aExvbmdpdHVkZShcbiAgICAgICAgICBpbnRlcnNlY3Rpb25Mb25naXR1ZGUsXG4gICAgICAgICAgY2FydG9ncmFwaGljSW50ZXJzZWN0aW9uU2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBpbnRlcnNlY3Rpb24gPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgICAgICAgaW50ZXJzZWN0aW9uQ2FydG9ncmFwaGljLFxuICAgICAgICAgIGludGVyc2VjdGlvblNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGRlZmluZWQoaW50ZXJzZWN0aW9uKSAmJlxuICAgICAgICAgICFDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb24oaW50ZXJzZWN0aW9uLCBwMCwgQ2VzaXVtTWF0aC5FUFNJTE9ONykgJiZcbiAgICAgICAgICAhQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uKGludGVyc2VjdGlvbiwgcDEsIENlc2l1bU1hdGguRVBTSUxPTjcpXG4gICAgICAgICkge1xuICAgICAgICAgIHNwbGl0UG9zaXRpb25zLnB1c2goQ2FydGVzaWFuMy5jbG9uZShpbnRlcnNlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzcGxpdFBvc2l0aW9ucy5wdXNoKHAxKTtcbiAgfVxuXG4gIGlmIChsb29wKSB7XG4gICAgcDAgPSBwb3NpdGlvbnNbcG9zaXRpb25zTGVuZ3RoIC0gMV07XG4gICAgcDEgPSBwb3NpdGlvbnNbMF07XG4gICAgaW50ZXJzZWN0aW9uID0gSW50ZXJzZWN0aW9uVGVzdHMubGluZVNlZ21lbnRQbGFuZShcbiAgICAgIHAwLFxuICAgICAgcDEsXG4gICAgICBYWl9QTEFORSxcbiAgICAgIGludGVyc2VjdGlvblNjcmF0Y2hcbiAgICApO1xuICAgIGlmIChcbiAgICAgIGRlZmluZWQoaW50ZXJzZWN0aW9uKSAmJlxuICAgICAgIUNhcnRlc2lhbjMuZXF1YWxzRXBzaWxvbihpbnRlcnNlY3Rpb24sIHAwLCBDZXNpdW1NYXRoLkVQU0lMT043KSAmJlxuICAgICAgIUNhcnRlc2lhbjMuZXF1YWxzRXBzaWxvbihpbnRlcnNlY3Rpb24sIHAxLCBDZXNpdW1NYXRoLkVQU0lMT043KVxuICAgICkge1xuICAgICAgaWYgKGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkuYXJjVHlwZSA9PT0gQXJjVHlwZS5HRU9ERVNJQykge1xuICAgICAgICBzcGxpdFBvc2l0aW9ucy5wdXNoKENhcnRlc2lhbjMuY2xvbmUoaW50ZXJzZWN0aW9uKSk7XG4gICAgICB9IGVsc2UgaWYgKGdyb3VuZFBvbHlsaW5lR2VvbWV0cnkuYXJjVHlwZSA9PT0gQXJjVHlwZS5SSFVNQikge1xuICAgICAgICBpbnRlcnNlY3Rpb25Mb25naXR1ZGUgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgICAgICAgaW50ZXJzZWN0aW9uLFxuICAgICAgICAgIGNhcnRvZ3JhcGhpY1NjcmF0Y2gwXG4gICAgICAgICkubG9uZ2l0dWRlO1xuICAgICAgICBjMCA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMCwgY2FydG9ncmFwaGljU2NyYXRjaDApO1xuICAgICAgICBjMSA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhwMSwgY2FydG9ncmFwaGljU2NyYXRjaDEpO1xuICAgICAgICByaHVtYkxpbmUuc2V0RW5kUG9pbnRzKGMwLCBjMSk7XG4gICAgICAgIGludGVyc2VjdGlvbkNhcnRvZ3JhcGhpYyA9IHJodW1iTGluZS5maW5kSW50ZXJzZWN0aW9uV2l0aExvbmdpdHVkZShcbiAgICAgICAgICBpbnRlcnNlY3Rpb25Mb25naXR1ZGUsXG4gICAgICAgICAgY2FydG9ncmFwaGljSW50ZXJzZWN0aW9uU2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBpbnRlcnNlY3Rpb24gPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgICAgICAgaW50ZXJzZWN0aW9uQ2FydG9ncmFwaGljLFxuICAgICAgICAgIGludGVyc2VjdGlvblNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGRlZmluZWQoaW50ZXJzZWN0aW9uKSAmJlxuICAgICAgICAgICFDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb24oaW50ZXJzZWN0aW9uLCBwMCwgQ2VzaXVtTWF0aC5FUFNJTE9ONykgJiZcbiAgICAgICAgICAhQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uKGludGVyc2VjdGlvbiwgcDEsIENlc2l1bU1hdGguRVBTSUxPTjcpXG4gICAgICAgICkge1xuICAgICAgICAgIHNwbGl0UG9zaXRpb25zLnB1c2goQ2FydGVzaWFuMy5jbG9uZShpbnRlcnNlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICB2YXIgY2FydG9ncmFwaGljc0xlbmd0aCA9IHNwbGl0UG9zaXRpb25zLmxlbmd0aDtcblxuICB2YXIgY2FydG9ncmFwaGljcyA9IG5ldyBBcnJheShjYXJ0b2dyYXBoaWNzTGVuZ3RoKTtcbiAgZm9yIChpID0gMDsgaSA8IGNhcnRvZ3JhcGhpY3NMZW5ndGg7IGkrKykge1xuICAgIHZhciBjYXJ0b2dyYXBoaWMgPSBDYXJ0b2dyYXBoaWMuZnJvbUNhcnRlc2lhbihzcGxpdFBvc2l0aW9uc1tpXSwgZWxsaXBzb2lkKTtcbiAgICBjYXJ0b2dyYXBoaWMuaGVpZ2h0ID0gMC4wO1xuICAgIGNhcnRvZ3JhcGhpY3NbaV0gPSBjYXJ0b2dyYXBoaWM7XG4gIH1cblxuICBjYXJ0b2dyYXBoaWNzID0gYXJyYXlSZW1vdmVEdXBsaWNhdGVzKFxuICAgIGNhcnRvZ3JhcGhpY3MsXG4gICAgQ2FydG9ncmFwaGljLmVxdWFsc0Vwc2lsb25cbiAgKTtcbiAgY2FydG9ncmFwaGljc0xlbmd0aCA9IGNhcnRvZ3JhcGhpY3MubGVuZ3RoO1xuXG4gIGlmIChjYXJ0b2dyYXBoaWNzTGVuZ3RoIDwgMikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKioqKiBCdWlsZCBoZWFwLXNpZGUgYXJyYXlzIGZvciBwb3NpdGlvbnMsIGludGVycG9sYXRlZCBjYXJ0b2dyYXBoaWNzLCBhbmQgbm9ybWFscyBmcm9tIHdoaWNoIHRvIGNvbXB1dGUgdmVydGljZXMgKioqKi9cbiAgLy8gV2UgYnVpbGQgYSBcIndhbGxcIiBhbmQgdGhlbiBkZWNvbXBvc2UgaXQgaW50byBzZXBhcmF0ZWx5IGNvbm5lY3RlZCBjb21wb25lbnQgXCJ2b2x1bWVzXCIgYmVjYXVzZSB3ZSBuZWVkIGEgbG90XG4gIC8vIG9mIGluZm9ybWF0aW9uIGFib3V0IHRoZSB3YWxsLiBBbHNvLCB0aGlzIHNpbXBsaWZpZXMgaW50ZXJwb2xhdGlvbi5cbiAgLy8gQ29udmVudGlvbjogXCJuZXh0XCIgYW5kIFwiZW5kXCIgYXJlIGxvY2FsbHkgZm9yd2FyZCB0byBlYWNoIHNlZ21lbnQgb2YgdGhlIHdhbGwsXG4gIC8vIGFuZCB3ZSBhcmUgY29tcHV0aW5nIG5vcm1hbHMgcG9pbnRpbmcgdG93YXJkcyB0aGUgbG9jYWwgcmlnaHQgc2lkZSBvZiB0aGUgdmVydGljZXMgaW4gZWFjaCBzZWdtZW50LlxuICB2YXIgY2FydG9ncmFwaGljc0FycmF5ID0gW107XG4gIHZhciBub3JtYWxzQXJyYXkgPSBbXTtcbiAgdmFyIGJvdHRvbVBvc2l0aW9uc0FycmF5ID0gW107XG4gIHZhciB0b3BQb3NpdGlvbnNBcnJheSA9IFtdO1xuXG4gIHZhciBwcmV2aW91c0JvdHRvbSA9IHByZXZpb3VzQm90dG9tU2NyYXRjaDtcbiAgdmFyIHZlcnRleEJvdHRvbSA9IHZlcnRleEJvdHRvbVNjcmF0Y2g7XG4gIHZhciB2ZXJ0ZXhUb3AgPSB2ZXJ0ZXhUb3BTY3JhdGNoO1xuICB2YXIgbmV4dEJvdHRvbSA9IG5leHRCb3R0b21TY3JhdGNoO1xuICB2YXIgdmVydGV4Tm9ybWFsID0gdmVydGV4Tm9ybWFsU2NyYXRjaDtcblxuICAvLyBGaXJzdCBwb2ludCAtIGVpdGhlciBsb29wIG9yIGF0dGFjaCBhIFwicGVycGVuZGljdWxhclwiIG5vcm1hbFxuICB2YXIgc3RhcnRDYXJ0b2dyYXBoaWMgPSBjYXJ0b2dyYXBoaWNzWzBdO1xuICB2YXIgbmV4dENhcnRvZ3JhcGhpYyA9IGNhcnRvZ3JhcGhpY3NbMV07XG5cbiAgdmFyIHByZXN0YXJ0Q2FydG9ncmFwaGljID0gY2FydG9ncmFwaGljc1tjYXJ0b2dyYXBoaWNzTGVuZ3RoIC0gMV07XG4gIHByZXZpb3VzQm90dG9tID0gZ2V0UG9zaXRpb24oXG4gICAgZWxsaXBzb2lkLFxuICAgIHByZXN0YXJ0Q2FydG9ncmFwaGljLFxuICAgIG1pbkhlaWdodCxcbiAgICBwcmV2aW91c0JvdHRvbVxuICApO1xuICBuZXh0Qm90dG9tID0gZ2V0UG9zaXRpb24oZWxsaXBzb2lkLCBuZXh0Q2FydG9ncmFwaGljLCBtaW5IZWlnaHQsIG5leHRCb3R0b20pO1xuICB2ZXJ0ZXhCb3R0b20gPSBnZXRQb3NpdGlvbihcbiAgICBlbGxpcHNvaWQsXG4gICAgc3RhcnRDYXJ0b2dyYXBoaWMsXG4gICAgbWluSGVpZ2h0LFxuICAgIHZlcnRleEJvdHRvbVxuICApO1xuICB2ZXJ0ZXhUb3AgPSBnZXRQb3NpdGlvbihlbGxpcHNvaWQsIHN0YXJ0Q2FydG9ncmFwaGljLCBtYXhIZWlnaHQsIHZlcnRleFRvcCk7XG5cbiAgaWYgKGxvb3ApIHtcbiAgICB2ZXJ0ZXhOb3JtYWwgPSBjb21wdXRlVmVydGV4TWl0ZXJOb3JtYWwoXG4gICAgICBwcmV2aW91c0JvdHRvbSxcbiAgICAgIHZlcnRleEJvdHRvbSxcbiAgICAgIHZlcnRleFRvcCxcbiAgICAgIG5leHRCb3R0b20sXG4gICAgICB2ZXJ0ZXhOb3JtYWxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHZlcnRleE5vcm1hbCA9IGNvbXB1dGVSaWdodE5vcm1hbChcbiAgICAgIHN0YXJ0Q2FydG9ncmFwaGljLFxuICAgICAgbmV4dENhcnRvZ3JhcGhpYyxcbiAgICAgIG1heEhlaWdodCxcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIHZlcnRleE5vcm1hbFxuICAgICk7XG4gIH1cblxuICBDYXJ0ZXNpYW4zLnBhY2sodmVydGV4Tm9ybWFsLCBub3JtYWxzQXJyYXksIDApO1xuICBDYXJ0ZXNpYW4zLnBhY2sodmVydGV4Qm90dG9tLCBib3R0b21Qb3NpdGlvbnNBcnJheSwgMCk7XG4gIENhcnRlc2lhbjMucGFjayh2ZXJ0ZXhUb3AsIHRvcFBvc2l0aW9uc0FycmF5LCAwKTtcbiAgY2FydG9ncmFwaGljc0FycmF5LnB1c2goc3RhcnRDYXJ0b2dyYXBoaWMubGF0aXR1ZGUpO1xuICBjYXJ0b2dyYXBoaWNzQXJyYXkucHVzaChzdGFydENhcnRvZ3JhcGhpYy5sb25naXR1ZGUpO1xuXG4gIGludGVycG9sYXRlU2VnbWVudChcbiAgICBzdGFydENhcnRvZ3JhcGhpYyxcbiAgICBuZXh0Q2FydG9ncmFwaGljLFxuICAgIG1pbkhlaWdodCxcbiAgICBtYXhIZWlnaHQsXG4gICAgZ3JhbnVsYXJpdHksXG4gICAgYXJjVHlwZSxcbiAgICBlbGxpcHNvaWQsXG4gICAgbm9ybWFsc0FycmF5LFxuICAgIGJvdHRvbVBvc2l0aW9uc0FycmF5LFxuICAgIHRvcFBvc2l0aW9uc0FycmF5LFxuICAgIGNhcnRvZ3JhcGhpY3NBcnJheVxuICApO1xuXG4gIC8vIEFsbCBpbmJldHdlZW4gcG9pbnRzXG4gIGZvciAoaSA9IDE7IGkgPCBjYXJ0b2dyYXBoaWNzTGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgcHJldmlvdXNCb3R0b20gPSBDYXJ0ZXNpYW4zLmNsb25lKHZlcnRleEJvdHRvbSwgcHJldmlvdXNCb3R0b20pO1xuICAgIHZlcnRleEJvdHRvbSA9IENhcnRlc2lhbjMuY2xvbmUobmV4dEJvdHRvbSwgdmVydGV4Qm90dG9tKTtcbiAgICB2YXIgdmVydGV4Q2FydG9ncmFwaGljID0gY2FydG9ncmFwaGljc1tpXTtcbiAgICBnZXRQb3NpdGlvbihlbGxpcHNvaWQsIHZlcnRleENhcnRvZ3JhcGhpYywgbWF4SGVpZ2h0LCB2ZXJ0ZXhUb3ApO1xuICAgIGdldFBvc2l0aW9uKGVsbGlwc29pZCwgY2FydG9ncmFwaGljc1tpICsgMV0sIG1pbkhlaWdodCwgbmV4dEJvdHRvbSk7XG5cbiAgICBjb21wdXRlVmVydGV4TWl0ZXJOb3JtYWwoXG4gICAgICBwcmV2aW91c0JvdHRvbSxcbiAgICAgIHZlcnRleEJvdHRvbSxcbiAgICAgIHZlcnRleFRvcCxcbiAgICAgIG5leHRCb3R0b20sXG4gICAgICB2ZXJ0ZXhOb3JtYWxcbiAgICApO1xuXG4gICAgaW5kZXggPSBub3JtYWxzQXJyYXkubGVuZ3RoO1xuICAgIENhcnRlc2lhbjMucGFjayh2ZXJ0ZXhOb3JtYWwsIG5vcm1hbHNBcnJheSwgaW5kZXgpO1xuICAgIENhcnRlc2lhbjMucGFjayh2ZXJ0ZXhCb3R0b20sIGJvdHRvbVBvc2l0aW9uc0FycmF5LCBpbmRleCk7XG4gICAgQ2FydGVzaWFuMy5wYWNrKHZlcnRleFRvcCwgdG9wUG9zaXRpb25zQXJyYXksIGluZGV4KTtcbiAgICBjYXJ0b2dyYXBoaWNzQXJyYXkucHVzaCh2ZXJ0ZXhDYXJ0b2dyYXBoaWMubGF0aXR1ZGUpO1xuICAgIGNhcnRvZ3JhcGhpY3NBcnJheS5wdXNoKHZlcnRleENhcnRvZ3JhcGhpYy5sb25naXR1ZGUpO1xuXG4gICAgaW50ZXJwb2xhdGVTZWdtZW50KFxuICAgICAgY2FydG9ncmFwaGljc1tpXSxcbiAgICAgIGNhcnRvZ3JhcGhpY3NbaSArIDFdLFxuICAgICAgbWluSGVpZ2h0LFxuICAgICAgbWF4SGVpZ2h0LFxuICAgICAgZ3JhbnVsYXJpdHksXG4gICAgICBhcmNUeXBlLFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgbm9ybWFsc0FycmF5LFxuICAgICAgYm90dG9tUG9zaXRpb25zQXJyYXksXG4gICAgICB0b3BQb3NpdGlvbnNBcnJheSxcbiAgICAgIGNhcnRvZ3JhcGhpY3NBcnJheVxuICAgICk7XG4gIH1cblxuICAvLyBMYXN0IHBvaW50IC0gZWl0aGVyIGxvb3Agb3IgYXR0YWNoIGEgbm9ybWFsIFwicGVycGVuZGljdWxhclwiIHRvIHRoZSB3YWxsLlxuICB2YXIgZW5kQ2FydG9ncmFwaGljID0gY2FydG9ncmFwaGljc1tjYXJ0b2dyYXBoaWNzTGVuZ3RoIC0gMV07XG4gIHZhciBwcmVFbmRDYXJ0b2dyYXBoaWMgPSBjYXJ0b2dyYXBoaWNzW2NhcnRvZ3JhcGhpY3NMZW5ndGggLSAyXTtcblxuICB2ZXJ0ZXhCb3R0b20gPSBnZXRQb3NpdGlvbihcbiAgICBlbGxpcHNvaWQsXG4gICAgZW5kQ2FydG9ncmFwaGljLFxuICAgIG1pbkhlaWdodCxcbiAgICB2ZXJ0ZXhCb3R0b21cbiAgKTtcbiAgdmVydGV4VG9wID0gZ2V0UG9zaXRpb24oZWxsaXBzb2lkLCBlbmRDYXJ0b2dyYXBoaWMsIG1heEhlaWdodCwgdmVydGV4VG9wKTtcblxuICBpZiAobG9vcCkge1xuICAgIHZhciBwb3N0RW5kQ2FydG9ncmFwaGljID0gY2FydG9ncmFwaGljc1swXTtcbiAgICBwcmV2aW91c0JvdHRvbSA9IGdldFBvc2l0aW9uKFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgcHJlRW5kQ2FydG9ncmFwaGljLFxuICAgICAgbWluSGVpZ2h0LFxuICAgICAgcHJldmlvdXNCb3R0b21cbiAgICApO1xuICAgIG5leHRCb3R0b20gPSBnZXRQb3NpdGlvbihcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIHBvc3RFbmRDYXJ0b2dyYXBoaWMsXG4gICAgICBtaW5IZWlnaHQsXG4gICAgICBuZXh0Qm90dG9tXG4gICAgKTtcblxuICAgIHZlcnRleE5vcm1hbCA9IGNvbXB1dGVWZXJ0ZXhNaXRlck5vcm1hbChcbiAgICAgIHByZXZpb3VzQm90dG9tLFxuICAgICAgdmVydGV4Qm90dG9tLFxuICAgICAgdmVydGV4VG9wLFxuICAgICAgbmV4dEJvdHRvbSxcbiAgICAgIHZlcnRleE5vcm1hbFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdmVydGV4Tm9ybWFsID0gY29tcHV0ZVJpZ2h0Tm9ybWFsKFxuICAgICAgcHJlRW5kQ2FydG9ncmFwaGljLFxuICAgICAgZW5kQ2FydG9ncmFwaGljLFxuICAgICAgbWF4SGVpZ2h0LFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgdmVydGV4Tm9ybWFsXG4gICAgKTtcbiAgfVxuXG4gIGluZGV4ID0gbm9ybWFsc0FycmF5Lmxlbmd0aDtcbiAgQ2FydGVzaWFuMy5wYWNrKHZlcnRleE5vcm1hbCwgbm9ybWFsc0FycmF5LCBpbmRleCk7XG4gIENhcnRlc2lhbjMucGFjayh2ZXJ0ZXhCb3R0b20sIGJvdHRvbVBvc2l0aW9uc0FycmF5LCBpbmRleCk7XG4gIENhcnRlc2lhbjMucGFjayh2ZXJ0ZXhUb3AsIHRvcFBvc2l0aW9uc0FycmF5LCBpbmRleCk7XG4gIGNhcnRvZ3JhcGhpY3NBcnJheS5wdXNoKGVuZENhcnRvZ3JhcGhpYy5sYXRpdHVkZSk7XG4gIGNhcnRvZ3JhcGhpY3NBcnJheS5wdXNoKGVuZENhcnRvZ3JhcGhpYy5sb25naXR1ZGUpO1xuXG4gIGlmIChsb29wKSB7XG4gICAgaW50ZXJwb2xhdGVTZWdtZW50KFxuICAgICAgZW5kQ2FydG9ncmFwaGljLFxuICAgICAgc3RhcnRDYXJ0b2dyYXBoaWMsXG4gICAgICBtaW5IZWlnaHQsXG4gICAgICBtYXhIZWlnaHQsXG4gICAgICBncmFudWxhcml0eSxcbiAgICAgIGFyY1R5cGUsXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBub3JtYWxzQXJyYXksXG4gICAgICBib3R0b21Qb3NpdGlvbnNBcnJheSxcbiAgICAgIHRvcFBvc2l0aW9uc0FycmF5LFxuICAgICAgY2FydG9ncmFwaGljc0FycmF5XG4gICAgKTtcbiAgICBpbmRleCA9IG5vcm1hbHNBcnJheS5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IDM7ICsraSkge1xuICAgICAgbm9ybWFsc0FycmF5W2luZGV4ICsgaV0gPSBub3JtYWxzQXJyYXlbaV07XG4gICAgICBib3R0b21Qb3NpdGlvbnNBcnJheVtpbmRleCArIGldID0gYm90dG9tUG9zaXRpb25zQXJyYXlbaV07XG4gICAgICB0b3BQb3NpdGlvbnNBcnJheVtpbmRleCArIGldID0gdG9wUG9zaXRpb25zQXJyYXlbaV07XG4gICAgfVxuICAgIGNhcnRvZ3JhcGhpY3NBcnJheS5wdXNoKHN0YXJ0Q2FydG9ncmFwaGljLmxhdGl0dWRlKTtcbiAgICBjYXJ0b2dyYXBoaWNzQXJyYXkucHVzaChzdGFydENhcnRvZ3JhcGhpYy5sb25naXR1ZGUpO1xuICB9XG5cbiAgcmV0dXJuIGdlbmVyYXRlR2VvbWV0cnlBdHRyaWJ1dGVzKFxuICAgIGxvb3AsXG4gICAgcHJvamVjdGlvbixcbiAgICBib3R0b21Qb3NpdGlvbnNBcnJheSxcbiAgICB0b3BQb3NpdGlvbnNBcnJheSxcbiAgICBub3JtYWxzQXJyYXksXG4gICAgY2FydG9ncmFwaGljc0FycmF5LFxuICAgIGNvbXB1dGUyZEF0dHJpYnV0ZXNcbiAgKTtcbn07XG5cbi8vIElmIHRoZSBlbmQgbm9ybWFsIGFuZ2xlIGlzIHRvbyBzdGVlcCBjb21wYXJlZCB0byB0aGUgZGlyZWN0aW9uIG9mIHRoZSBsaW5lIHNlZ21lbnQsXG4vLyBcImJyZWFrXCIgdGhlIG1pdGVyIGJ5IHJvdGF0aW5nIHRoZSBub3JtYWwgOTAgZGVncmVlcyBhcm91bmQgdGhlIFwidXBcIiBkaXJlY3Rpb24gYXQgdGhlIHBvaW50XG4vLyBGb3IgdWx0cmEgcHJlY2lzaW9uIHdlIHdvdWxkIHdhbnQgdG8gcHJvamVjdCBpbnRvIGEgcGxhbmUsIGJ1dCBpbiBwcmFjdGljZSB0aGlzIGlzIHN1ZmZpY2llbnQuXG52YXIgbGluZURpcmVjdGlvblNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIG1hdHJpeDNTY3JhdGNoID0gbmV3IE1hdHJpeDMoKTtcbnZhciBxdWF0ZXJuaW9uU2NyYXRjaCA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5mdW5jdGlvbiBicmVha01pdGVyKGVuZEdlb21ldHJ5Tm9ybWFsLCBzdGFydEJvdHRvbSwgZW5kQm90dG9tLCBlbmRUb3ApIHtcbiAgdmFyIGxpbmVEaXJlY3Rpb24gPSBkaXJlY3Rpb24oZW5kQm90dG9tLCBzdGFydEJvdHRvbSwgbGluZURpcmVjdGlvblNjcmF0Y2gpO1xuXG4gIHZhciBkb3QgPSBDYXJ0ZXNpYW4zLmRvdChsaW5lRGlyZWN0aW9uLCBlbmRHZW9tZXRyeU5vcm1hbCk7XG4gIGlmIChkb3QgPiBNSVRFUl9CUkVBS19TTUFMTCB8fCBkb3QgPCBNSVRFUl9CUkVBS19MQVJHRSkge1xuICAgIHZhciB2ZXJ0ZXhVcCA9IGRpcmVjdGlvbihlbmRUb3AsIGVuZEJvdHRvbSwgdmVydGV4VXBTY3JhdGNoKTtcbiAgICB2YXIgYW5nbGUgPVxuICAgICAgZG90IDwgTUlURVJfQlJFQUtfTEFSR0VcbiAgICAgICAgPyBDZXNpdW1NYXRoLlBJX09WRVJfVFdPXG4gICAgICAgIDogLUNlc2l1bU1hdGguUElfT1ZFUl9UV087XG4gICAgdmFyIHF1YXRlcm5pb24gPSBRdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUoXG4gICAgICB2ZXJ0ZXhVcCxcbiAgICAgIGFuZ2xlLFxuICAgICAgcXVhdGVybmlvblNjcmF0Y2hcbiAgICApO1xuICAgIHZhciByb3RhdGlvbk1hdHJpeCA9IE1hdHJpeDMuZnJvbVF1YXRlcm5pb24ocXVhdGVybmlvbiwgbWF0cml4M1NjcmF0Y2gpO1xuICAgIE1hdHJpeDMubXVsdGlwbHlCeVZlY3RvcihcbiAgICAgIHJvdGF0aW9uTWF0cml4LFxuICAgICAgZW5kR2VvbWV0cnlOb3JtYWwsXG4gICAgICBlbmRHZW9tZXRyeU5vcm1hbFxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgZW5kUG9zQ2FydG9ncmFwaGljU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBub3JtYWxTdGFydHBvaW50U2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgbm9ybWFsRW5kcG9pbnRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbmZ1bmN0aW9uIHByb2plY3ROb3JtYWwoXG4gIHByb2plY3Rpb24sXG4gIGNhcnRvZ3JhcGhpYyxcbiAgbm9ybWFsLFxuICBwcm9qZWN0ZWRQb3NpdGlvbixcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIHBvc2l0aW9uID0gQ2FydG9ncmFwaGljLnRvQ2FydGVzaWFuKFxuICAgIGNhcnRvZ3JhcGhpYyxcbiAgICBwcm9qZWN0aW9uLl9lbGxpcHNvaWQsXG4gICAgbm9ybWFsU3RhcnRwb2ludFNjcmF0Y2hcbiAgKTtcbiAgdmFyIG5vcm1hbEVuZHBvaW50ID0gQ2FydGVzaWFuMy5hZGQocG9zaXRpb24sIG5vcm1hbCwgbm9ybWFsRW5kcG9pbnRTY3JhdGNoKTtcbiAgdmFyIGZsaXBOb3JtYWwgPSBmYWxzZTtcblxuICB2YXIgZWxsaXBzb2lkID0gcHJvamVjdGlvbi5fZWxsaXBzb2lkO1xuICB2YXIgbm9ybWFsRW5kcG9pbnRDYXJ0b2dyYXBoaWMgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgbm9ybWFsRW5kcG9pbnQsXG4gICAgZW5kUG9zQ2FydG9ncmFwaGljU2NyYXRjaFxuICApO1xuICAvLyBJZiBub3JtYWwgY3Jvc3NlcyB0aGUgSURMLCBnbyB0aGUgb3RoZXIgd2F5IGFuZCBmbGlwIHRoZSByZXN1bHQuXG4gIC8vIEluIHByYWN0aWNlIHRoaXMgYWxtb3N0IG5ldmVyIGhhcHBlbnMgYmVjYXVzZSB0aGUgY2FydG9ncmFwaGljIHN0YXJ0XG4gIC8vIGFuZCBlbmQgcG9pbnRzIG9mIGVhY2ggc2VnbWVudCBhcmUgXCJudWRnZWRcIiB0byBiZSBvbiB0aGUgc2FtZSBzaWRlXG4gIC8vIG9mIHRoZSBJREwgYW5kIHNsaWdodGx5IGF3YXkgZnJvbSB0aGUgSURMLlxuICBpZiAoXG4gICAgTWF0aC5hYnMoY2FydG9ncmFwaGljLmxvbmdpdHVkZSAtIG5vcm1hbEVuZHBvaW50Q2FydG9ncmFwaGljLmxvbmdpdHVkZSkgPlxuICAgIENlc2l1bU1hdGguUElfT1ZFUl9UV09cbiAgKSB7XG4gICAgZmxpcE5vcm1hbCA9IHRydWU7XG4gICAgbm9ybWFsRW5kcG9pbnQgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgICAgcG9zaXRpb24sXG4gICAgICBub3JtYWwsXG4gICAgICBub3JtYWxFbmRwb2ludFNjcmF0Y2hcbiAgICApO1xuICAgIG5vcm1hbEVuZHBvaW50Q2FydG9ncmFwaGljID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgICAgbm9ybWFsRW5kcG9pbnQsXG4gICAgICBlbmRQb3NDYXJ0b2dyYXBoaWNTY3JhdGNoXG4gICAgKTtcbiAgfVxuXG4gIG5vcm1hbEVuZHBvaW50Q2FydG9ncmFwaGljLmhlaWdodCA9IDAuMDtcbiAgdmFyIG5vcm1hbEVuZHBvaW50UHJvamVjdGVkID0gcHJvamVjdGlvbi5wcm9qZWN0KFxuICAgIG5vcm1hbEVuZHBvaW50Q2FydG9ncmFwaGljLFxuICAgIHJlc3VsdFxuICApO1xuICByZXN1bHQgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgIG5vcm1hbEVuZHBvaW50UHJvamVjdGVkLFxuICAgIHByb2plY3RlZFBvc2l0aW9uLFxuICAgIHJlc3VsdFxuICApO1xuICByZXN1bHQueiA9IDAuMDtcbiAgcmVzdWx0ID0gQ2FydGVzaWFuMy5ub3JtYWxpemUocmVzdWx0LCByZXN1bHQpO1xuICBpZiAoZmxpcE5vcm1hbCkge1xuICAgIENhcnRlc2lhbjMubmVnYXRlKHJlc3VsdCwgcmVzdWx0KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgYWRqdXN0SGVpZ2h0Tm9ybWFsU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgYWRqdXN0SGVpZ2h0T2Zmc2V0U2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5mdW5jdGlvbiBhZGp1c3RIZWlnaHRzKFxuICBib3R0b20sXG4gIHRvcCxcbiAgbWluSGVpZ2h0LFxuICBtYXhIZWlnaHQsXG4gIGFkanVzdEhlaWdodEJvdHRvbSxcbiAgYWRqdXN0SGVpZ2h0VG9wXG4pIHtcbiAgLy8gYm90dG9tIGFuZCB0b3Agc2hvdWxkIGJlIGF0IFdBTExfSU5JVElBTF9NSU5fSEVJR0hUIGFuZCBXQUxMX0lOSVRJQUxfTUFYX0hFSUdIVCwgcmVzcGVjdGl2ZWx5XG4gIHZhciBhZGp1c3RIZWlnaHROb3JtYWwgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgIHRvcCxcbiAgICBib3R0b20sXG4gICAgYWRqdXN0SGVpZ2h0Tm9ybWFsU2NyYXRjaFxuICApO1xuICBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShhZGp1c3RIZWlnaHROb3JtYWwsIGFkanVzdEhlaWdodE5vcm1hbCk7XG5cbiAgdmFyIGRpc3RhbmNlRm9yQm90dG9tID0gbWluSGVpZ2h0IC0gV0FMTF9JTklUSUFMX01JTl9IRUlHSFQ7XG4gIHZhciBhZGp1c3RIZWlnaHRPZmZzZXQgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgYWRqdXN0SGVpZ2h0Tm9ybWFsLFxuICAgIGRpc3RhbmNlRm9yQm90dG9tLFxuICAgIGFkanVzdEhlaWdodE9mZnNldFNjcmF0Y2hcbiAgKTtcbiAgQ2FydGVzaWFuMy5hZGQoYm90dG9tLCBhZGp1c3RIZWlnaHRPZmZzZXQsIGFkanVzdEhlaWdodEJvdHRvbSk7XG5cbiAgdmFyIGRpc3RhbmNlRm9yVG9wID0gbWF4SGVpZ2h0IC0gV0FMTF9JTklUSUFMX01BWF9IRUlHSFQ7XG4gIGFkanVzdEhlaWdodE9mZnNldCA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICBhZGp1c3RIZWlnaHROb3JtYWwsXG4gICAgZGlzdGFuY2VGb3JUb3AsXG4gICAgYWRqdXN0SGVpZ2h0T2Zmc2V0U2NyYXRjaFxuICApO1xuICBDYXJ0ZXNpYW4zLmFkZCh0b3AsIGFkanVzdEhlaWdodE9mZnNldCwgYWRqdXN0SGVpZ2h0VG9wKTtcbn1cblxudmFyIG51ZGdlRGlyZWN0aW9uU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5mdW5jdGlvbiBudWRnZVhaKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHN0YXJ0VG9YWmRpc3RhbmNlID0gUGxhbmUuZ2V0UG9pbnREaXN0YW5jZShYWl9QTEFORSwgc3RhcnQpO1xuICB2YXIgZW5kVG9YWmRpc3RhbmNlID0gUGxhbmUuZ2V0UG9pbnREaXN0YW5jZShYWl9QTEFORSwgZW5kKTtcbiAgdmFyIG9mZnNldCA9IG51ZGdlRGlyZWN0aW9uU2NyYXRjaDtcbiAgLy8gTGFyZ2VyIGVwc2lsb24gdGhhbiB3aGF0J3MgdXNlZCBpbiBHZW9tZXRyeVBpcGVsaW5lLCBhIGNlbnRpbWV0ZXIgaW4gd29ybGQgc3BhY2VcbiAgaWYgKENlc2l1bU1hdGguZXF1YWxzRXBzaWxvbihzdGFydFRvWFpkaXN0YW5jZSwgMC4wLCBDZXNpdW1NYXRoLkVQU0lMT04yKSkge1xuICAgIG9mZnNldCA9IGRpcmVjdGlvbihlbmQsIHN0YXJ0LCBvZmZzZXQpO1xuICAgIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihvZmZzZXQsIENlc2l1bU1hdGguRVBTSUxPTjIsIG9mZnNldCk7XG4gICAgQ2FydGVzaWFuMy5hZGQoc3RhcnQsIG9mZnNldCwgc3RhcnQpO1xuICB9IGVsc2UgaWYgKFxuICAgIENlc2l1bU1hdGguZXF1YWxzRXBzaWxvbihlbmRUb1haZGlzdGFuY2UsIDAuMCwgQ2VzaXVtTWF0aC5FUFNJTE9OMilcbiAgKSB7XG4gICAgb2Zmc2V0ID0gZGlyZWN0aW9uKHN0YXJ0LCBlbmQsIG9mZnNldCk7XG4gICAgQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKG9mZnNldCwgQ2VzaXVtTWF0aC5FUFNJTE9OMiwgb2Zmc2V0KTtcbiAgICBDYXJ0ZXNpYW4zLmFkZChlbmQsIG9mZnNldCwgZW5kKTtcbiAgfVxufVxuXG4vLyBcIk51ZGdlXCIgY2FydG9ncmFwaGljIGNvb3JkaW5hdGVzIHNvIHN0YXJ0IGFuZCBlbmQgYXJlIG9uIHRoZSBzYW1lIHNpZGUgb2YgdGhlIElETC5cbi8vIE51ZGdlIGFtb3VudHMgYXJlIHRpbnksIGJhc2ljYWxseSBqdXN0IGFuIElETCBmbGlwLlxuLy8gT25seSB1c2VkIGZvciAyRC9DVi5cbmZ1bmN0aW9uIG51ZGdlQ2FydG9ncmFwaGljKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGFic1N0YXJ0TG9uID0gTWF0aC5hYnMoc3RhcnQubG9uZ2l0dWRlKTtcbiAgdmFyIGFic0VuZExvbiA9IE1hdGguYWJzKGVuZC5sb25naXR1ZGUpO1xuICBpZiAoXG4gICAgQ2VzaXVtTWF0aC5lcXVhbHNFcHNpbG9uKGFic1N0YXJ0TG9uLCBDZXNpdW1NYXRoLlBJLCBDZXNpdW1NYXRoLkVQU0lMT04xMSlcbiAgKSB7XG4gICAgdmFyIGVuZFNpZ24gPSBDZXNpdW1NYXRoLnNpZ24oZW5kLmxvbmdpdHVkZSk7XG4gICAgc3RhcnQubG9uZ2l0dWRlID0gZW5kU2lnbiAqIChhYnNTdGFydExvbiAtIENlc2l1bU1hdGguRVBTSUxPTjExKTtcbiAgICByZXR1cm4gMTtcbiAgfSBlbHNlIGlmIChcbiAgICBDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oYWJzRW5kTG9uLCBDZXNpdW1NYXRoLlBJLCBDZXNpdW1NYXRoLkVQU0lMT04xMSlcbiAgKSB7XG4gICAgdmFyIHN0YXJ0U2lnbiA9IENlc2l1bU1hdGguc2lnbihzdGFydC5sb25naXR1ZGUpO1xuICAgIGVuZC5sb25naXR1ZGUgPSBzdGFydFNpZ24gKiAoYWJzRW5kTG9uIC0gQ2VzaXVtTWF0aC5FUFNJTE9OMTEpO1xuICAgIHJldHVybiAyO1xuICB9XG4gIHJldHVybiAwO1xufVxuXG52YXIgc3RhcnRDYXJ0b2dyYXBoaWNTY3JhdGNoID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIGVuZENhcnRvZ3JhcGhpY1NjcmF0Y2ggPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5cbnZhciBzZWdtZW50U3RhcnRUb3BTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzZWdtZW50RW5kVG9wU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2VnbWVudFN0YXJ0Qm90dG9tU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2VnbWVudEVuZEJvdHRvbVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNlZ21lbnRTdGFydE5vcm1hbFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNlZ21lbnRFbmROb3JtYWxTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcblxudmFyIGdldEhlaWdodENhcnRvZ3JhcGhpY3MgPSBbc3RhcnRDYXJ0b2dyYXBoaWNTY3JhdGNoLCBlbmRDYXJ0b2dyYXBoaWNTY3JhdGNoXTtcbnZhciBnZXRIZWlnaHRSZWN0YW5nbGVTY3JhdGNoID0gbmV3IFJlY3RhbmdsZSgpO1xuXG52YXIgYWRqdXN0SGVpZ2h0U3RhcnRUb3BTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBhZGp1c3RIZWlnaHRFbmRUb3BTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBhZGp1c3RIZWlnaHRTdGFydEJvdHRvbVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGFkanVzdEhlaWdodEVuZEJvdHRvbVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuXG52YXIgc2VnbWVudFN0YXJ0MkRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzZWdtZW50RW5kMkRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzZWdtZW50U3RhcnROb3JtYWwyRFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNlZ21lbnRFbmROb3JtYWwyRFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuXG52YXIgb2Zmc2V0U2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc3RhcnRVcFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGVuZFVwU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcmlnaHRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzdGFydFBsYW5lTm9ybWFsU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgZW5kUGxhbmVOb3JtYWxTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBlbmNvZGVTY3JhdGNoID0gbmV3IEVuY29kZWRDYXJ0ZXNpYW4zKCk7XG5cbnZhciBlbmNvZGVTY3JhdGNoMkQgPSBuZXcgRW5jb2RlZENhcnRlc2lhbjMoKTtcbnZhciBmb3J3YXJkT2Zmc2V0MkRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciByaWdodDJEU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbnZhciBub3JtYWxOdWRnZVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuXG52YXIgc2NyYXRjaEJvdW5kaW5nU3BoZXJlcyA9IFtuZXcgQm91bmRpbmdTcGhlcmUoKSwgbmV3IEJvdW5kaW5nU3BoZXJlKCldO1xuXG4vLyBXaW5kaW5nIG9yZGVyIGlzIHJldmVyc2VkIHNvIGVhY2ggc2VnbWVudCdzIHZvbHVtZSBpcyBpbnNpZGUtb3V0XG52YXIgUkVGRVJFTkNFX0lORElDRVMgPSBbXG4gIDAsXG4gIDIsXG4gIDEsXG4gIDAsXG4gIDMsXG4gIDIsIC8vIHJpZ2h0XG4gIDAsXG4gIDcsXG4gIDMsXG4gIDAsXG4gIDQsXG4gIDcsIC8vIHN0YXJ0XG4gIDAsXG4gIDUsXG4gIDQsXG4gIDAsXG4gIDEsXG4gIDUsIC8vIGJvdHRvbVxuICA1LFxuICA3LFxuICA0LFxuICA1LFxuICA2LFxuICA3LCAvLyBsZWZ0XG4gIDUsXG4gIDIsXG4gIDYsXG4gIDUsXG4gIDEsXG4gIDIsIC8vIGVuZFxuICAzLFxuICA2LFxuICAyLFxuICAzLFxuICA3LFxuICA2LCAvLyB0b3Bcbl07XG52YXIgUkVGRVJFTkNFX0lORElDRVNfTEVOR1RIID0gUkVGRVJFTkNFX0lORElDRVMubGVuZ3RoO1xuXG4vLyBEZWNvbXBvc2UgdGhlIFwid2FsbFwiIGludG8gYSBzZXJpZXMgb2Ygc2hhZG93IHZvbHVtZXMuXG4vLyBFYWNoIHNoYWRvdyB2b2x1bWUncyB2ZXJ0aWNlcyBlbmNvZGUgYSBkZXNjcmlwdGlvbiBvZiB0aGUgbGluZSBpdCBjb250YWlucyxcbi8vIGluY2x1ZGluZyBtaXRlcmluZyBwbGFuZXMgYXQgdGhlIGVuZCBwb2ludHMsIGEgcGxhbmUgYWxvbmcgdGhlIGxpbmUgaXRzZWxmLFxuLy8gYW5kIGF0dHJpYnV0ZXMgZm9yIGNvbXB1dGluZyBsZW5ndGgtd2lzZSB0ZXh0dXJlIGNvb3JkaW5hdGVzLlxuZnVuY3Rpb24gZ2VuZXJhdGVHZW9tZXRyeUF0dHJpYnV0ZXMoXG4gIGxvb3AsXG4gIHByb2plY3Rpb24sXG4gIGJvdHRvbVBvc2l0aW9uc0FycmF5LFxuICB0b3BQb3NpdGlvbnNBcnJheSxcbiAgbm9ybWFsc0FycmF5LFxuICBjYXJ0b2dyYXBoaWNzQXJyYXksXG4gIGNvbXB1dGUyZEF0dHJpYnV0ZXNcbikge1xuICB2YXIgaTtcbiAgdmFyIGluZGV4O1xuICB2YXIgZWxsaXBzb2lkID0gcHJvamVjdGlvbi5fZWxsaXBzb2lkO1xuXG4gIC8vIEVhY2ggc2VnbWVudCB3aWxsIGhhdmUgOCB2ZXJ0aWNlc1xuICB2YXIgc2VnbWVudENvdW50ID0gYm90dG9tUG9zaXRpb25zQXJyYXkubGVuZ3RoIC8gMyAtIDE7XG4gIHZhciB2ZXJ0ZXhDb3VudCA9IHNlZ21lbnRDb3VudCAqIDg7XG4gIHZhciBhcnJheVNpemVWZWM0ID0gdmVydGV4Q291bnQgKiA0O1xuICB2YXIgaW5kZXhDb3VudCA9IHNlZ21lbnRDb3VudCAqIDM2O1xuXG4gIHZhciBpbmRpY2VzID1cbiAgICB2ZXJ0ZXhDb3VudCA+IDY1NTM1XG4gICAgICA/IG5ldyBVaW50MzJBcnJheShpbmRleENvdW50KVxuICAgICAgOiBuZXcgVWludDE2QXJyYXkoaW5kZXhDb3VudCk7XG4gIHZhciBwb3NpdGlvbnNBcnJheSA9IG5ldyBGbG9hdDY0QXJyYXkodmVydGV4Q291bnQgKiAzKTtcblxuICB2YXIgc3RhcnRIaUFuZEZvcndhcmRPZmZzZXRYID0gbmV3IEZsb2F0MzJBcnJheShhcnJheVNpemVWZWM0KTtcbiAgdmFyIHN0YXJ0TG9BbmRGb3J3YXJkT2Zmc2V0WSA9IG5ldyBGbG9hdDMyQXJyYXkoYXJyYXlTaXplVmVjNCk7XG4gIHZhciBzdGFydE5vcm1hbEFuZEZvcndhcmRPZmZzZXRaID0gbmV3IEZsb2F0MzJBcnJheShhcnJheVNpemVWZWM0KTtcbiAgdmFyIGVuZE5vcm1hbEFuZFRleHR1cmVDb29yZGluYXRlTm9ybWFsaXphdGlvblggPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgIGFycmF5U2l6ZVZlYzRcbiAgKTtcbiAgdmFyIHJpZ2h0Tm9ybWFsQW5kVGV4dHVyZUNvb3JkaW5hdGVOb3JtYWxpemF0aW9uWSA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgYXJyYXlTaXplVmVjNFxuICApO1xuXG4gIHZhciBzdGFydEhpTG8yRDtcbiAgdmFyIG9mZnNldEFuZFJpZ2h0MkQ7XG4gIHZhciBzdGFydEVuZE5vcm1hbHMyRDtcbiAgdmFyIHRleGNvb3JkTm9ybWFsaXphdGlvbjJEO1xuXG4gIGlmIChjb21wdXRlMmRBdHRyaWJ1dGVzKSB7XG4gICAgc3RhcnRIaUxvMkQgPSBuZXcgRmxvYXQzMkFycmF5KGFycmF5U2l6ZVZlYzQpO1xuICAgIG9mZnNldEFuZFJpZ2h0MkQgPSBuZXcgRmxvYXQzMkFycmF5KGFycmF5U2l6ZVZlYzQpO1xuICAgIHN0YXJ0RW5kTm9ybWFsczJEID0gbmV3IEZsb2F0MzJBcnJheShhcnJheVNpemVWZWM0KTtcbiAgICB0ZXhjb29yZE5vcm1hbGl6YXRpb24yRCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAyKTtcbiAgfVxuXG4gIC8qKiogQ29tcHV0ZSB0b3RhbCBsZW5ndGhzIGZvciB0ZXh0dXJlIGNvb3JkaW5hdGUgbm9ybWFsaXphdGlvbiAqKiovXG4gIC8vIDJEXG4gIHZhciBjYXJ0b2dyYXBoaWNzTGVuZ3RoID0gY2FydG9ncmFwaGljc0FycmF5Lmxlbmd0aCAvIDI7XG4gIHZhciBsZW5ndGgyRCA9IDAuMDtcblxuICB2YXIgc3RhcnRDYXJ0b2dyYXBoaWMgPSBzdGFydENhcnRvZ3JhcGhpY1NjcmF0Y2g7XG4gIHN0YXJ0Q2FydG9ncmFwaGljLmhlaWdodCA9IDAuMDtcbiAgdmFyIGVuZENhcnRvZ3JhcGhpYyA9IGVuZENhcnRvZ3JhcGhpY1NjcmF0Y2g7XG4gIGVuZENhcnRvZ3JhcGhpYy5oZWlnaHQgPSAwLjA7XG5cbiAgdmFyIHNlZ21lbnRTdGFydENhcnRlc2lhbiA9IHNlZ21lbnRTdGFydFRvcFNjcmF0Y2g7XG4gIHZhciBzZWdtZW50RW5kQ2FydGVzaWFuID0gc2VnbWVudEVuZFRvcFNjcmF0Y2g7XG5cbiAgaWYgKGNvbXB1dGUyZEF0dHJpYnV0ZXMpIHtcbiAgICBpbmRleCA9IDA7XG4gICAgZm9yIChpID0gMTsgaSA8IGNhcnRvZ3JhcGhpY3NMZW5ndGg7IGkrKykge1xuICAgICAgLy8gRG9uJ3QgY2xvbmUgYW55dGhpbmcgZnJvbSBwcmV2aW91cyBzZWdtZW50IGIvYyBwb3NzaWJsZSBJREwgdG91Y2hcbiAgICAgIHN0YXJ0Q2FydG9ncmFwaGljLmxhdGl0dWRlID0gY2FydG9ncmFwaGljc0FycmF5W2luZGV4XTtcbiAgICAgIHN0YXJ0Q2FydG9ncmFwaGljLmxvbmdpdHVkZSA9IGNhcnRvZ3JhcGhpY3NBcnJheVtpbmRleCArIDFdO1xuICAgICAgZW5kQ2FydG9ncmFwaGljLmxhdGl0dWRlID0gY2FydG9ncmFwaGljc0FycmF5W2luZGV4ICsgMl07XG4gICAgICBlbmRDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlID0gY2FydG9ncmFwaGljc0FycmF5W2luZGV4ICsgM107XG5cbiAgICAgIHNlZ21lbnRTdGFydENhcnRlc2lhbiA9IHByb2plY3Rpb24ucHJvamVjdChcbiAgICAgICAgc3RhcnRDYXJ0b2dyYXBoaWMsXG4gICAgICAgIHNlZ21lbnRTdGFydENhcnRlc2lhblxuICAgICAgKTtcbiAgICAgIHNlZ21lbnRFbmRDYXJ0ZXNpYW4gPSBwcm9qZWN0aW9uLnByb2plY3QoXG4gICAgICAgIGVuZENhcnRvZ3JhcGhpYyxcbiAgICAgICAgc2VnbWVudEVuZENhcnRlc2lhblxuICAgICAgKTtcbiAgICAgIGxlbmd0aDJEICs9IENhcnRlc2lhbjMuZGlzdGFuY2UoXG4gICAgICAgIHNlZ21lbnRTdGFydENhcnRlc2lhbixcbiAgICAgICAgc2VnbWVudEVuZENhcnRlc2lhblxuICAgICAgKTtcbiAgICAgIGluZGV4ICs9IDI7XG4gICAgfVxuICB9XG5cbiAgLy8gM0RcbiAgdmFyIHBvc2l0aW9uc0xlbmd0aCA9IHRvcFBvc2l0aW9uc0FycmF5Lmxlbmd0aCAvIDM7XG4gIHNlZ21lbnRFbmRDYXJ0ZXNpYW4gPSBDYXJ0ZXNpYW4zLnVucGFjayhcbiAgICB0b3BQb3NpdGlvbnNBcnJheSxcbiAgICAwLFxuICAgIHNlZ21lbnRFbmRDYXJ0ZXNpYW5cbiAgKTtcbiAgdmFyIGxlbmd0aDNEID0gMC4wO1xuXG4gIGluZGV4ID0gMztcbiAgZm9yIChpID0gMTsgaSA8IHBvc2l0aW9uc0xlbmd0aDsgaSsrKSB7XG4gICAgc2VnbWVudFN0YXJ0Q2FydGVzaWFuID0gQ2FydGVzaWFuMy5jbG9uZShcbiAgICAgIHNlZ21lbnRFbmRDYXJ0ZXNpYW4sXG4gICAgICBzZWdtZW50U3RhcnRDYXJ0ZXNpYW5cbiAgICApO1xuICAgIHNlZ21lbnRFbmRDYXJ0ZXNpYW4gPSBDYXJ0ZXNpYW4zLnVucGFjayhcbiAgICAgIHRvcFBvc2l0aW9uc0FycmF5LFxuICAgICAgaW5kZXgsXG4gICAgICBzZWdtZW50RW5kQ2FydGVzaWFuXG4gICAgKTtcbiAgICBsZW5ndGgzRCArPSBDYXJ0ZXNpYW4zLmRpc3RhbmNlKHNlZ21lbnRTdGFydENhcnRlc2lhbiwgc2VnbWVudEVuZENhcnRlc2lhbik7XG4gICAgaW5kZXggKz0gMztcbiAgfVxuXG4gIC8qKiogR2VuZXJhdGUgc2VnbWVudHMgKioqL1xuICB2YXIgajtcbiAgaW5kZXggPSAzO1xuICB2YXIgY2FydG9ncmFwaGljc0luZGV4ID0gMDtcbiAgdmFyIHZlYzJzV3JpdGVJbmRleCA9IDA7XG4gIHZhciB2ZWMzc1dyaXRlSW5kZXggPSAwO1xuICB2YXIgdmVjNHNXcml0ZUluZGV4ID0gMDtcbiAgdmFyIG1pdGVyQnJva2VuID0gZmFsc2U7XG5cbiAgdmFyIGVuZEJvdHRvbSA9IENhcnRlc2lhbjMudW5wYWNrKFxuICAgIGJvdHRvbVBvc2l0aW9uc0FycmF5LFxuICAgIDAsXG4gICAgc2VnbWVudEVuZEJvdHRvbVNjcmF0Y2hcbiAgKTtcbiAgdmFyIGVuZFRvcCA9IENhcnRlc2lhbjMudW5wYWNrKHRvcFBvc2l0aW9uc0FycmF5LCAwLCBzZWdtZW50RW5kVG9wU2NyYXRjaCk7XG4gIHZhciBlbmRHZW9tZXRyeU5vcm1hbCA9IENhcnRlc2lhbjMudW5wYWNrKFxuICAgIG5vcm1hbHNBcnJheSxcbiAgICAwLFxuICAgIHNlZ21lbnRFbmROb3JtYWxTY3JhdGNoXG4gICk7XG5cbiAgaWYgKGxvb3ApIHtcbiAgICB2YXIgcHJlRW5kQm90dG9tID0gQ2FydGVzaWFuMy51bnBhY2soXG4gICAgICBib3R0b21Qb3NpdGlvbnNBcnJheSxcbiAgICAgIGJvdHRvbVBvc2l0aW9uc0FycmF5Lmxlbmd0aCAtIDYsXG4gICAgICBzZWdtZW50U3RhcnRCb3R0b21TY3JhdGNoXG4gICAgKTtcbiAgICBpZiAoYnJlYWtNaXRlcihlbmRHZW9tZXRyeU5vcm1hbCwgcHJlRW5kQm90dG9tLCBlbmRCb3R0b20sIGVuZFRvcCkpIHtcbiAgICAgIC8vIE1pdGVyIGJyb2tlbiBhcyBpZiBmb3IgdGhlIGxhc3QgcG9pbnQgaW4gdGhlIGxvb3AsIG5lZWRzIHRvIGJlIGludmVydGVkIGZvciBmaXJzdCBwb2ludCAoY2xvbmUgb2YgZW5kQm90dG9tKVxuICAgICAgZW5kR2VvbWV0cnlOb3JtYWwgPSBDYXJ0ZXNpYW4zLm5lZ2F0ZShcbiAgICAgICAgZW5kR2VvbWV0cnlOb3JtYWwsXG4gICAgICAgIGVuZEdlb21ldHJ5Tm9ybWFsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsZW5ndGhTb0ZhcjNEID0gMC4wO1xuICB2YXIgbGVuZ3RoU29GYXIyRCA9IDAuMDtcblxuICAvLyBGb3IgdHJhbnNsYXRpbmcgYm91bmRpbmcgdm9sdW1lXG4gIHZhciBzdW1IZWlnaHRzID0gMC4wO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzZWdtZW50Q291bnQ7IGkrKykge1xuICAgIHZhciBzdGFydEJvdHRvbSA9IENhcnRlc2lhbjMuY2xvbmUoZW5kQm90dG9tLCBzZWdtZW50U3RhcnRCb3R0b21TY3JhdGNoKTtcbiAgICB2YXIgc3RhcnRUb3AgPSBDYXJ0ZXNpYW4zLmNsb25lKGVuZFRvcCwgc2VnbWVudFN0YXJ0VG9wU2NyYXRjaCk7XG4gICAgdmFyIHN0YXJ0R2VvbWV0cnlOb3JtYWwgPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgZW5kR2VvbWV0cnlOb3JtYWwsXG4gICAgICBzZWdtZW50U3RhcnROb3JtYWxTY3JhdGNoXG4gICAgKTtcblxuICAgIGlmIChtaXRlckJyb2tlbikge1xuICAgICAgc3RhcnRHZW9tZXRyeU5vcm1hbCA9IENhcnRlc2lhbjMubmVnYXRlKFxuICAgICAgICBzdGFydEdlb21ldHJ5Tm9ybWFsLFxuICAgICAgICBzdGFydEdlb21ldHJ5Tm9ybWFsXG4gICAgICApO1xuICAgIH1cblxuICAgIGVuZEJvdHRvbSA9IENhcnRlc2lhbjMudW5wYWNrKFxuICAgICAgYm90dG9tUG9zaXRpb25zQXJyYXksXG4gICAgICBpbmRleCxcbiAgICAgIHNlZ21lbnRFbmRCb3R0b21TY3JhdGNoXG4gICAgKTtcbiAgICBlbmRUb3AgPSBDYXJ0ZXNpYW4zLnVucGFjayh0b3BQb3NpdGlvbnNBcnJheSwgaW5kZXgsIHNlZ21lbnRFbmRUb3BTY3JhdGNoKTtcbiAgICBlbmRHZW9tZXRyeU5vcm1hbCA9IENhcnRlc2lhbjMudW5wYWNrKFxuICAgICAgbm9ybWFsc0FycmF5LFxuICAgICAgaW5kZXgsXG4gICAgICBzZWdtZW50RW5kTm9ybWFsU2NyYXRjaFxuICAgICk7XG5cbiAgICBtaXRlckJyb2tlbiA9IGJyZWFrTWl0ZXIoZW5kR2VvbWV0cnlOb3JtYWwsIHN0YXJ0Qm90dG9tLCBlbmRCb3R0b20sIGVuZFRvcCk7XG5cbiAgICAvLyAyRCAtIGRvbid0IGNsb25lIGFueXRoaW5nIGZyb20gcHJldmlvdXMgc2VnbWVudCBiL2MgcG9zc2libGUgSURMIHRvdWNoXG4gICAgc3RhcnRDYXJ0b2dyYXBoaWMubGF0aXR1ZGUgPSBjYXJ0b2dyYXBoaWNzQXJyYXlbY2FydG9ncmFwaGljc0luZGV4XTtcbiAgICBzdGFydENhcnRvZ3JhcGhpYy5sb25naXR1ZGUgPSBjYXJ0b2dyYXBoaWNzQXJyYXlbY2FydG9ncmFwaGljc0luZGV4ICsgMV07XG4gICAgZW5kQ2FydG9ncmFwaGljLmxhdGl0dWRlID0gY2FydG9ncmFwaGljc0FycmF5W2NhcnRvZ3JhcGhpY3NJbmRleCArIDJdO1xuICAgIGVuZENhcnRvZ3JhcGhpYy5sb25naXR1ZGUgPSBjYXJ0b2dyYXBoaWNzQXJyYXlbY2FydG9ncmFwaGljc0luZGV4ICsgM107XG4gICAgdmFyIHN0YXJ0MkQ7XG4gICAgdmFyIGVuZDJEO1xuICAgIHZhciBzdGFydEdlb21ldHJ5Tm9ybWFsMkQ7XG4gICAgdmFyIGVuZEdlb21ldHJ5Tm9ybWFsMkQ7XG5cbiAgICBpZiAoY29tcHV0ZTJkQXR0cmlidXRlcykge1xuICAgICAgdmFyIG51ZGdlUmVzdWx0ID0gbnVkZ2VDYXJ0b2dyYXBoaWMoc3RhcnRDYXJ0b2dyYXBoaWMsIGVuZENhcnRvZ3JhcGhpYyk7XG4gICAgICBzdGFydDJEID0gcHJvamVjdGlvbi5wcm9qZWN0KHN0YXJ0Q2FydG9ncmFwaGljLCBzZWdtZW50U3RhcnQyRFNjcmF0Y2gpO1xuICAgICAgZW5kMkQgPSBwcm9qZWN0aW9uLnByb2plY3QoZW5kQ2FydG9ncmFwaGljLCBzZWdtZW50RW5kMkRTY3JhdGNoKTtcbiAgICAgIHZhciBkaXJlY3Rpb24yRCA9IGRpcmVjdGlvbihlbmQyRCwgc3RhcnQyRCwgZm9yd2FyZE9mZnNldDJEU2NyYXRjaCk7XG4gICAgICBkaXJlY3Rpb24yRC55ID0gTWF0aC5hYnMoZGlyZWN0aW9uMkQueSk7XG5cbiAgICAgIHN0YXJ0R2VvbWV0cnlOb3JtYWwyRCA9IHNlZ21lbnRTdGFydE5vcm1hbDJEU2NyYXRjaDtcbiAgICAgIGVuZEdlb21ldHJ5Tm9ybWFsMkQgPSBzZWdtZW50RW5kTm9ybWFsMkRTY3JhdGNoO1xuICAgICAgaWYgKFxuICAgICAgICBudWRnZVJlc3VsdCA9PT0gMCB8fFxuICAgICAgICBDYXJ0ZXNpYW4zLmRvdChkaXJlY3Rpb24yRCwgQ2FydGVzaWFuMy5VTklUX1kpID4gTUlURVJfQlJFQUtfU01BTExcbiAgICAgICkge1xuICAgICAgICAvLyBObyBudWRnZSAtIHByb2plY3QgdGhlIG9yaWdpbmFsIG5vcm1hbFxuICAgICAgICAvLyBPciwgaWYgdGhlIGxpbmUncyBhbmdsZSByZWxhdGl2ZSB0byB0aGUgSURMIGlzIHZlcnkgYWN1dGUsXG4gICAgICAgIC8vIGluIHdoaWNoIGNhc2Ugc25hcHBpbmcgd2lsbCBwcm9kdWNlIG9kZGx5IHNoYXBlZCB2b2x1bWVzLlxuICAgICAgICBzdGFydEdlb21ldHJ5Tm9ybWFsMkQgPSBwcm9qZWN0Tm9ybWFsKFxuICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgc3RhcnRDYXJ0b2dyYXBoaWMsXG4gICAgICAgICAgc3RhcnRHZW9tZXRyeU5vcm1hbCxcbiAgICAgICAgICBzdGFydDJELFxuICAgICAgICAgIHNlZ21lbnRTdGFydE5vcm1hbDJEU2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBlbmRHZW9tZXRyeU5vcm1hbDJEID0gcHJvamVjdE5vcm1hbChcbiAgICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICAgIGVuZENhcnRvZ3JhcGhpYyxcbiAgICAgICAgICBlbmRHZW9tZXRyeU5vcm1hbCxcbiAgICAgICAgICBlbmQyRCxcbiAgICAgICAgICBzZWdtZW50RW5kTm9ybWFsMkRTY3JhdGNoXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKG51ZGdlUmVzdWx0ID09PSAxKSB7XG4gICAgICAgIC8vIFN0YXJ0IGlzIGNsb3NlIHRvIElETCAtIHNuYXAgc3RhcnQgbm9ybWFsIHRvIGFsaWduIHdpdGggSURMXG4gICAgICAgIGVuZEdlb21ldHJ5Tm9ybWFsMkQgPSBwcm9qZWN0Tm9ybWFsKFxuICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgZW5kQ2FydG9ncmFwaGljLFxuICAgICAgICAgIGVuZEdlb21ldHJ5Tm9ybWFsLFxuICAgICAgICAgIGVuZDJELFxuICAgICAgICAgIHNlZ21lbnRFbmROb3JtYWwyRFNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgc3RhcnRHZW9tZXRyeU5vcm1hbDJELnggPSAwLjA7XG4gICAgICAgIC8vIElmIHN0YXJ0IGxvbmdpdHVkZSBpcyBuZWdhdGl2ZSBhbmQgZW5kIGxvbmdpdHVkZSBpcyBsZXNzIG5lZ2F0aXZlLCByZWxhdGl2ZSByaWdodCBpcyB1bml0IC1ZXG4gICAgICAgIC8vIElmIHN0YXJ0IGxvbmdpdHVkZSBpcyBwb3NpdGl2ZSBhbmQgZW5kIGxvbmdpdHVkZSBpcyBsZXNzIHBvc2l0aXZlLCByZWxhdGl2ZSByaWdodCBpcyB1bml0ICtZXG4gICAgICAgIHN0YXJ0R2VvbWV0cnlOb3JtYWwyRC55ID0gQ2VzaXVtTWF0aC5zaWduKFxuICAgICAgICAgIHN0YXJ0Q2FydG9ncmFwaGljLmxvbmdpdHVkZSAtIE1hdGguYWJzKGVuZENhcnRvZ3JhcGhpYy5sb25naXR1ZGUpXG4gICAgICAgICk7XG4gICAgICAgIHN0YXJ0R2VvbWV0cnlOb3JtYWwyRC56ID0gMC4wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRW5kIGlzIGNsb3NlIHRvIElETCAtIHNuYXAgZW5kIG5vcm1hbCB0byBhbGlnbiB3aXRoIElETFxuICAgICAgICBzdGFydEdlb21ldHJ5Tm9ybWFsMkQgPSBwcm9qZWN0Tm9ybWFsKFxuICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgc3RhcnRDYXJ0b2dyYXBoaWMsXG4gICAgICAgICAgc3RhcnRHZW9tZXRyeU5vcm1hbCxcbiAgICAgICAgICBzdGFydDJELFxuICAgICAgICAgIHNlZ21lbnRTdGFydE5vcm1hbDJEU2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBlbmRHZW9tZXRyeU5vcm1hbDJELnggPSAwLjA7XG4gICAgICAgIC8vIElmIGVuZCBsb25naXR1ZGUgaXMgbmVnYXRpdmUgYW5kIHN0YXJ0IGxvbmdpdHVkZSBpcyBsZXNzIG5lZ2F0aXZlLCByZWxhdGl2ZSByaWdodCBpcyB1bml0IFlcbiAgICAgICAgLy8gSWYgZW5kIGxvbmdpdHVkZSBpcyBwb3NpdGl2ZSBhbmQgc3RhcnQgbG9uZ2l0dWRlIGlzIGxlc3MgcG9zaXRpdmUsIHJlbGF0aXZlIHJpZ2h0IGlzIHVuaXQgLVlcbiAgICAgICAgZW5kR2VvbWV0cnlOb3JtYWwyRC55ID0gQ2VzaXVtTWF0aC5zaWduKFxuICAgICAgICAgIHN0YXJ0Q2FydG9ncmFwaGljLmxvbmdpdHVkZSAtIGVuZENhcnRvZ3JhcGhpYy5sb25naXR1ZGVcbiAgICAgICAgKTtcbiAgICAgICAgZW5kR2VvbWV0cnlOb3JtYWwyRC56ID0gMC4wO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogR2VvbWV0cnkgZGVzY3JpcHRvcnMgb2YgYSBcImxpbmUgb24gdGVycmFpbixcIlxuICAgICAqIGFzIG9wcG9zZWQgdG8gdGhlIFwic2hhZG93IHZvbHVtZSB1c2VkIHRvIGRyYXdcbiAgICAgKiB0aGUgbGluZSBvbiB0ZXJyYWluXCI6XG4gICAgICogLSBwb3NpdGlvbiBvZiBzdGFydCArIG9mZnNldCB0byBlbmRcbiAgICAgKiAtIHN0YXJ0LCBlbmQsIGFuZCByaWdodC1mYWNpbmcgcGxhbmVzXG4gICAgICogLSBlbmNvZGVkIHRleHR1cmUgY29vcmRpbmF0ZSBvZmZzZXRzXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKiAzRCAqL1xuICAgIHZhciBzZWdtZW50TGVuZ3RoM0QgPSBDYXJ0ZXNpYW4zLmRpc3RhbmNlKHN0YXJ0VG9wLCBlbmRUb3ApO1xuXG4gICAgdmFyIGVuY29kZWRTdGFydCA9IEVuY29kZWRDYXJ0ZXNpYW4zLmZyb21DYXJ0ZXNpYW4oXG4gICAgICBzdGFydEJvdHRvbSxcbiAgICAgIGVuY29kZVNjcmF0Y2hcbiAgICApO1xuICAgIHZhciBmb3J3YXJkT2Zmc2V0ID0gQ2FydGVzaWFuMy5zdWJ0cmFjdChcbiAgICAgIGVuZEJvdHRvbSxcbiAgICAgIHN0YXJ0Qm90dG9tLFxuICAgICAgb2Zmc2V0U2NyYXRjaFxuICAgICk7XG4gICAgdmFyIGZvcndhcmQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShmb3J3YXJkT2Zmc2V0LCByaWdodFNjcmF0Y2gpO1xuXG4gICAgdmFyIHN0YXJ0VXAgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHN0YXJ0VG9wLCBzdGFydEJvdHRvbSwgc3RhcnRVcFNjcmF0Y2gpO1xuICAgIHN0YXJ0VXAgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShzdGFydFVwLCBzdGFydFVwKTtcbiAgICB2YXIgcmlnaHROb3JtYWwgPSBDYXJ0ZXNpYW4zLmNyb3NzKGZvcndhcmQsIHN0YXJ0VXAsIHJpZ2h0U2NyYXRjaCk7XG4gICAgcmlnaHROb3JtYWwgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShyaWdodE5vcm1hbCwgcmlnaHROb3JtYWwpO1xuXG4gICAgdmFyIHN0YXJ0UGxhbmVOb3JtYWwgPSBDYXJ0ZXNpYW4zLmNyb3NzKFxuICAgICAgc3RhcnRVcCxcbiAgICAgIHN0YXJ0R2VvbWV0cnlOb3JtYWwsXG4gICAgICBzdGFydFBsYW5lTm9ybWFsU2NyYXRjaFxuICAgICk7XG4gICAgc3RhcnRQbGFuZU5vcm1hbCA9IENhcnRlc2lhbjMubm9ybWFsaXplKHN0YXJ0UGxhbmVOb3JtYWwsIHN0YXJ0UGxhbmVOb3JtYWwpO1xuXG4gICAgdmFyIGVuZFVwID0gQ2FydGVzaWFuMy5zdWJ0cmFjdChlbmRUb3AsIGVuZEJvdHRvbSwgZW5kVXBTY3JhdGNoKTtcbiAgICBlbmRVcCA9IENhcnRlc2lhbjMubm9ybWFsaXplKGVuZFVwLCBlbmRVcCk7XG4gICAgdmFyIGVuZFBsYW5lTm9ybWFsID0gQ2FydGVzaWFuMy5jcm9zcyhcbiAgICAgIGVuZEdlb21ldHJ5Tm9ybWFsLFxuICAgICAgZW5kVXAsXG4gICAgICBlbmRQbGFuZU5vcm1hbFNjcmF0Y2hcbiAgICApO1xuICAgIGVuZFBsYW5lTm9ybWFsID0gQ2FydGVzaWFuMy5ub3JtYWxpemUoZW5kUGxhbmVOb3JtYWwsIGVuZFBsYW5lTm9ybWFsKTtcblxuICAgIHZhciB0ZXhjb29yZE5vcm1hbGl6YXRpb24zRFggPSBzZWdtZW50TGVuZ3RoM0QgLyBsZW5ndGgzRDtcbiAgICB2YXIgdGV4Y29vcmROb3JtYWxpemF0aW9uM0RZID0gbGVuZ3RoU29GYXIzRCAvIGxlbmd0aDNEO1xuXG4gICAgLyogMkQgKi9cbiAgICB2YXIgc2VnbWVudExlbmd0aDJEID0gMC4wO1xuICAgIHZhciBlbmNvZGVkU3RhcnQyRDtcbiAgICB2YXIgZm9yd2FyZE9mZnNldDJEO1xuICAgIHZhciByaWdodDJEO1xuICAgIHZhciB0ZXhjb29yZE5vcm1hbGl6YXRpb24yRFggPSAwLjA7XG4gICAgdmFyIHRleGNvb3JkTm9ybWFsaXphdGlvbjJEWSA9IDAuMDtcbiAgICBpZiAoY29tcHV0ZTJkQXR0cmlidXRlcykge1xuICAgICAgc2VnbWVudExlbmd0aDJEID0gQ2FydGVzaWFuMy5kaXN0YW5jZShzdGFydDJELCBlbmQyRCk7XG5cbiAgICAgIGVuY29kZWRTdGFydDJEID0gRW5jb2RlZENhcnRlc2lhbjMuZnJvbUNhcnRlc2lhbihcbiAgICAgICAgc3RhcnQyRCxcbiAgICAgICAgZW5jb2RlU2NyYXRjaDJEXG4gICAgICApO1xuICAgICAgZm9yd2FyZE9mZnNldDJEID0gQ2FydGVzaWFuMy5zdWJ0cmFjdChcbiAgICAgICAgZW5kMkQsXG4gICAgICAgIHN0YXJ0MkQsXG4gICAgICAgIGZvcndhcmRPZmZzZXQyRFNjcmF0Y2hcbiAgICAgICk7XG5cbiAgICAgIC8vIFJpZ2h0IGRpcmVjdGlvbiBpcyBqdXN0IGZvcndhcmQgZGlyZWN0aW9uIHJvdGF0ZWQgYnkgLTkwIGRlZ3JlZXMgYXJvdW5kIFpcbiAgICAgIC8vIFNpbWlsYXJseSB3aXRoIHBsYW5lIG5vcm1hbHNcbiAgICAgIHJpZ2h0MkQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShmb3J3YXJkT2Zmc2V0MkQsIHJpZ2h0MkRTY3JhdGNoKTtcbiAgICAgIHZhciBzd2FwID0gcmlnaHQyRC54O1xuICAgICAgcmlnaHQyRC54ID0gcmlnaHQyRC55O1xuICAgICAgcmlnaHQyRC55ID0gLXN3YXA7XG5cbiAgICAgIHRleGNvb3JkTm9ybWFsaXphdGlvbjJEWCA9IHNlZ21lbnRMZW5ndGgyRCAvIGxlbmd0aDJEO1xuICAgICAgdGV4Y29vcmROb3JtYWxpemF0aW9uMkRZID0gbGVuZ3RoU29GYXIyRCAvIGxlbmd0aDJEO1xuICAgIH1cbiAgICAvKiogUGFjayAqKi9cbiAgICBmb3IgKGogPSAwOyBqIDwgODsgaisrKSB7XG4gICAgICB2YXIgdmVjNEluZGV4ID0gdmVjNHNXcml0ZUluZGV4ICsgaiAqIDQ7XG4gICAgICB2YXIgdmVjMkluZGV4ID0gdmVjMnNXcml0ZUluZGV4ICsgaiAqIDI7XG4gICAgICB2YXIgd0luZGV4ID0gdmVjNEluZGV4ICsgMztcblxuICAgICAgLy8gRW5jb2RlIHNpZGVkbmVzcyBvZiB2ZXJ0ZXggcmVsYXRpdmUgdG8gcmlnaHQgcGxhbmUgaW4gdGV4dHVyZSBjb29yZGluYXRlIG5vcm1hbGl6YXRpb24gWCxcbiAgICAgIC8vIHdoZXRoZXIgdmVydGV4IGlzIHRvcCBvciBib3R0b20gb2Ygdm9sdW1lIGluIHNpZ24vbWFnbml0dWRlIG9mIG5vcm1hbGl6YXRpb24gWS5cbiAgICAgIHZhciByaWdodFBsYW5lU2lkZSA9IGogPCA0ID8gMS4wIDogLTEuMDtcbiAgICAgIHZhciB0b3BCb3R0b21TaWRlID0gaiA9PT0gMiB8fCBqID09PSAzIHx8IGogPT09IDYgfHwgaiA9PT0gNyA/IDEuMCA6IC0xLjA7XG5cbiAgICAgIC8vIDNEXG4gICAgICBDYXJ0ZXNpYW4zLnBhY2soZW5jb2RlZFN0YXJ0LmhpZ2gsIHN0YXJ0SGlBbmRGb3J3YXJkT2Zmc2V0WCwgdmVjNEluZGV4KTtcbiAgICAgIHN0YXJ0SGlBbmRGb3J3YXJkT2Zmc2V0WFt3SW5kZXhdID0gZm9yd2FyZE9mZnNldC54O1xuXG4gICAgICBDYXJ0ZXNpYW4zLnBhY2soZW5jb2RlZFN0YXJ0Lmxvdywgc3RhcnRMb0FuZEZvcndhcmRPZmZzZXRZLCB2ZWM0SW5kZXgpO1xuICAgICAgc3RhcnRMb0FuZEZvcndhcmRPZmZzZXRZW3dJbmRleF0gPSBmb3J3YXJkT2Zmc2V0Lnk7XG5cbiAgICAgIENhcnRlc2lhbjMucGFjayhcbiAgICAgICAgc3RhcnRQbGFuZU5vcm1hbCxcbiAgICAgICAgc3RhcnROb3JtYWxBbmRGb3J3YXJkT2Zmc2V0WixcbiAgICAgICAgdmVjNEluZGV4XG4gICAgICApO1xuICAgICAgc3RhcnROb3JtYWxBbmRGb3J3YXJkT2Zmc2V0Wlt3SW5kZXhdID0gZm9yd2FyZE9mZnNldC56O1xuXG4gICAgICBDYXJ0ZXNpYW4zLnBhY2soXG4gICAgICAgIGVuZFBsYW5lTm9ybWFsLFxuICAgICAgICBlbmROb3JtYWxBbmRUZXh0dXJlQ29vcmRpbmF0ZU5vcm1hbGl6YXRpb25YLFxuICAgICAgICB2ZWM0SW5kZXhcbiAgICAgICk7XG4gICAgICBlbmROb3JtYWxBbmRUZXh0dXJlQ29vcmRpbmF0ZU5vcm1hbGl6YXRpb25YW3dJbmRleF0gPVxuICAgICAgICB0ZXhjb29yZE5vcm1hbGl6YXRpb24zRFggKiByaWdodFBsYW5lU2lkZTtcblxuICAgICAgQ2FydGVzaWFuMy5wYWNrKFxuICAgICAgICByaWdodE5vcm1hbCxcbiAgICAgICAgcmlnaHROb3JtYWxBbmRUZXh0dXJlQ29vcmRpbmF0ZU5vcm1hbGl6YXRpb25ZLFxuICAgICAgICB2ZWM0SW5kZXhcbiAgICAgICk7XG5cbiAgICAgIHZhciB0ZXhjb29yZE5vcm1hbGl6YXRpb24gPSB0ZXhjb29yZE5vcm1hbGl6YXRpb24zRFkgKiB0b3BCb3R0b21TaWRlO1xuICAgICAgaWYgKHRleGNvb3JkTm9ybWFsaXphdGlvbiA9PT0gMC4wICYmIHRvcEJvdHRvbVNpZGUgPCAwLjApIHtcbiAgICAgICAgdGV4Y29vcmROb3JtYWxpemF0aW9uID0gOS4wOyAvLyBzb21lIHZhbHVlIGdyZWF0ZXIgdGhhbiAxLjBcbiAgICAgIH1cbiAgICAgIHJpZ2h0Tm9ybWFsQW5kVGV4dHVyZUNvb3JkaW5hdGVOb3JtYWxpemF0aW9uWVtcbiAgICAgICAgd0luZGV4XG4gICAgICBdID0gdGV4Y29vcmROb3JtYWxpemF0aW9uO1xuXG4gICAgICAvLyAyRFxuICAgICAgaWYgKGNvbXB1dGUyZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgc3RhcnRIaUxvMkRbdmVjNEluZGV4XSA9IGVuY29kZWRTdGFydDJELmhpZ2gueDtcbiAgICAgICAgc3RhcnRIaUxvMkRbdmVjNEluZGV4ICsgMV0gPSBlbmNvZGVkU3RhcnQyRC5oaWdoLnk7XG4gICAgICAgIHN0YXJ0SGlMbzJEW3ZlYzRJbmRleCArIDJdID0gZW5jb2RlZFN0YXJ0MkQubG93Lng7XG4gICAgICAgIHN0YXJ0SGlMbzJEW3ZlYzRJbmRleCArIDNdID0gZW5jb2RlZFN0YXJ0MkQubG93Lnk7XG5cbiAgICAgICAgc3RhcnRFbmROb3JtYWxzMkRbdmVjNEluZGV4XSA9IC1zdGFydEdlb21ldHJ5Tm9ybWFsMkQueTtcbiAgICAgICAgc3RhcnRFbmROb3JtYWxzMkRbdmVjNEluZGV4ICsgMV0gPSBzdGFydEdlb21ldHJ5Tm9ybWFsMkQueDtcbiAgICAgICAgc3RhcnRFbmROb3JtYWxzMkRbdmVjNEluZGV4ICsgMl0gPSBlbmRHZW9tZXRyeU5vcm1hbDJELnk7XG4gICAgICAgIHN0YXJ0RW5kTm9ybWFsczJEW3ZlYzRJbmRleCArIDNdID0gLWVuZEdlb21ldHJ5Tm9ybWFsMkQueDtcblxuICAgICAgICBvZmZzZXRBbmRSaWdodDJEW3ZlYzRJbmRleF0gPSBmb3J3YXJkT2Zmc2V0MkQueDtcbiAgICAgICAgb2Zmc2V0QW5kUmlnaHQyRFt2ZWM0SW5kZXggKyAxXSA9IGZvcndhcmRPZmZzZXQyRC55O1xuICAgICAgICBvZmZzZXRBbmRSaWdodDJEW3ZlYzRJbmRleCArIDJdID0gcmlnaHQyRC54O1xuICAgICAgICBvZmZzZXRBbmRSaWdodDJEW3ZlYzRJbmRleCArIDNdID0gcmlnaHQyRC55O1xuXG4gICAgICAgIHRleGNvb3JkTm9ybWFsaXphdGlvbjJEW3ZlYzJJbmRleF0gPVxuICAgICAgICAgIHRleGNvb3JkTm9ybWFsaXphdGlvbjJEWCAqIHJpZ2h0UGxhbmVTaWRlO1xuXG4gICAgICAgIHRleGNvb3JkTm9ybWFsaXphdGlvbiA9IHRleGNvb3JkTm9ybWFsaXphdGlvbjJEWSAqIHRvcEJvdHRvbVNpZGU7XG4gICAgICAgIGlmICh0ZXhjb29yZE5vcm1hbGl6YXRpb24gPT09IDAuMCAmJiB0b3BCb3R0b21TaWRlIDwgMC4wKSB7XG4gICAgICAgICAgdGV4Y29vcmROb3JtYWxpemF0aW9uID0gOS4wOyAvLyBzb21lIHZhbHVlIGdyZWF0ZXIgdGhhbiAxLjBcbiAgICAgICAgfVxuICAgICAgICB0ZXhjb29yZE5vcm1hbGl6YXRpb24yRFt2ZWMySW5kZXggKyAxXSA9IHRleGNvb3JkTm9ybWFsaXphdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgaGVpZ2h0IG9mIHZvbHVtZSBpbiAzRFxuICAgIHZhciBhZGp1c3RIZWlnaHRTdGFydEJvdHRvbSA9IGFkanVzdEhlaWdodFN0YXJ0Qm90dG9tU2NyYXRjaDtcbiAgICB2YXIgYWRqdXN0SGVpZ2h0RW5kQm90dG9tID0gYWRqdXN0SGVpZ2h0RW5kQm90dG9tU2NyYXRjaDtcbiAgICB2YXIgYWRqdXN0SGVpZ2h0U3RhcnRUb3AgPSBhZGp1c3RIZWlnaHRTdGFydFRvcFNjcmF0Y2g7XG4gICAgdmFyIGFkanVzdEhlaWdodEVuZFRvcCA9IGFkanVzdEhlaWdodEVuZFRvcFNjcmF0Y2g7XG5cbiAgICB2YXIgZ2V0SGVpZ2h0c1JlY3RhbmdsZSA9IFJlY3RhbmdsZS5mcm9tQ2FydG9ncmFwaGljQXJyYXkoXG4gICAgICBnZXRIZWlnaHRDYXJ0b2dyYXBoaWNzLFxuICAgICAgZ2V0SGVpZ2h0UmVjdGFuZ2xlU2NyYXRjaFxuICAgICk7XG4gICAgdmFyIG1pbk1heEhlaWdodHMgPSBBcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLmdldE1pbmltdW1NYXhpbXVtSGVpZ2h0cyhcbiAgICAgIGdldEhlaWdodHNSZWN0YW5nbGUsXG4gICAgICBlbGxpcHNvaWRcbiAgICApO1xuICAgIHZhciBtaW5IZWlnaHQgPSBtaW5NYXhIZWlnaHRzLm1pbmltdW1UZXJyYWluSGVpZ2h0O1xuICAgIHZhciBtYXhIZWlnaHQgPSBtaW5NYXhIZWlnaHRzLm1heGltdW1UZXJyYWluSGVpZ2h0O1xuXG4gICAgc3VtSGVpZ2h0cyArPSBtaW5IZWlnaHQ7XG4gICAgc3VtSGVpZ2h0cyArPSBtYXhIZWlnaHQ7XG5cbiAgICBhZGp1c3RIZWlnaHRzKFxuICAgICAgc3RhcnRCb3R0b20sXG4gICAgICBzdGFydFRvcCxcbiAgICAgIG1pbkhlaWdodCxcbiAgICAgIG1heEhlaWdodCxcbiAgICAgIGFkanVzdEhlaWdodFN0YXJ0Qm90dG9tLFxuICAgICAgYWRqdXN0SGVpZ2h0U3RhcnRUb3BcbiAgICApO1xuICAgIGFkanVzdEhlaWdodHMoXG4gICAgICBlbmRCb3R0b20sXG4gICAgICBlbmRUb3AsXG4gICAgICBtaW5IZWlnaHQsXG4gICAgICBtYXhIZWlnaHQsXG4gICAgICBhZGp1c3RIZWlnaHRFbmRCb3R0b20sXG4gICAgICBhZGp1c3RIZWlnaHRFbmRUb3BcbiAgICApO1xuXG4gICAgLy8gTnVkZ2UgdGhlIHBvc2l0aW9ucyBhd2F5IGZyb20gdGhlIFwicG9seWxpbmVcIiBhIGxpdHRsZSBiaXQgdG8gcHJldmVudCBlcnJvcnMgaW4gR2VvbWV0cnlQaXBlbGluZVxuICAgIHZhciBub3JtYWxOdWRnZSA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgIHJpZ2h0Tm9ybWFsLFxuICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ONSxcbiAgICAgIG5vcm1hbE51ZGdlU2NyYXRjaFxuICAgICk7XG4gICAgQ2FydGVzaWFuMy5hZGQoXG4gICAgICBhZGp1c3RIZWlnaHRTdGFydEJvdHRvbSxcbiAgICAgIG5vcm1hbE51ZGdlLFxuICAgICAgYWRqdXN0SGVpZ2h0U3RhcnRCb3R0b21cbiAgICApO1xuICAgIENhcnRlc2lhbjMuYWRkKGFkanVzdEhlaWdodEVuZEJvdHRvbSwgbm9ybWFsTnVkZ2UsIGFkanVzdEhlaWdodEVuZEJvdHRvbSk7XG4gICAgQ2FydGVzaWFuMy5hZGQoYWRqdXN0SGVpZ2h0U3RhcnRUb3AsIG5vcm1hbE51ZGdlLCBhZGp1c3RIZWlnaHRTdGFydFRvcCk7XG4gICAgQ2FydGVzaWFuMy5hZGQoYWRqdXN0SGVpZ2h0RW5kVG9wLCBub3JtYWxOdWRnZSwgYWRqdXN0SGVpZ2h0RW5kVG9wKTtcblxuICAgIC8vIElmIHRoZSBzZWdtZW50IGlzIHZlcnkgY2xvc2UgdG8gdGhlIFhaIHBsYW5lLCBudWRnZSB0aGUgdmVydGljZXMgc2xpZ2h0bHkgdG8gYXZvaWQgdG91Y2hpbmcgaXQuXG4gICAgbnVkZ2VYWihhZGp1c3RIZWlnaHRTdGFydEJvdHRvbSwgYWRqdXN0SGVpZ2h0RW5kQm90dG9tKTtcbiAgICBudWRnZVhaKGFkanVzdEhlaWdodFN0YXJ0VG9wLCBhZGp1c3RIZWlnaHRFbmRUb3ApO1xuXG4gICAgQ2FydGVzaWFuMy5wYWNrKGFkanVzdEhlaWdodFN0YXJ0Qm90dG9tLCBwb3NpdGlvbnNBcnJheSwgdmVjM3NXcml0ZUluZGV4KTtcbiAgICBDYXJ0ZXNpYW4zLnBhY2soYWRqdXN0SGVpZ2h0RW5kQm90dG9tLCBwb3NpdGlvbnNBcnJheSwgdmVjM3NXcml0ZUluZGV4ICsgMyk7XG4gICAgQ2FydGVzaWFuMy5wYWNrKGFkanVzdEhlaWdodEVuZFRvcCwgcG9zaXRpb25zQXJyYXksIHZlYzNzV3JpdGVJbmRleCArIDYpO1xuICAgIENhcnRlc2lhbjMucGFjayhhZGp1c3RIZWlnaHRTdGFydFRvcCwgcG9zaXRpb25zQXJyYXksIHZlYzNzV3JpdGVJbmRleCArIDkpO1xuXG4gICAgbm9ybWFsTnVkZ2UgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgICByaWdodE5vcm1hbCxcbiAgICAgIC0yLjAgKiBDZXNpdW1NYXRoLkVQU0lMT041LFxuICAgICAgbm9ybWFsTnVkZ2VTY3JhdGNoXG4gICAgKTtcbiAgICBDYXJ0ZXNpYW4zLmFkZChcbiAgICAgIGFkanVzdEhlaWdodFN0YXJ0Qm90dG9tLFxuICAgICAgbm9ybWFsTnVkZ2UsXG4gICAgICBhZGp1c3RIZWlnaHRTdGFydEJvdHRvbVxuICAgICk7XG4gICAgQ2FydGVzaWFuMy5hZGQoYWRqdXN0SGVpZ2h0RW5kQm90dG9tLCBub3JtYWxOdWRnZSwgYWRqdXN0SGVpZ2h0RW5kQm90dG9tKTtcbiAgICBDYXJ0ZXNpYW4zLmFkZChhZGp1c3RIZWlnaHRTdGFydFRvcCwgbm9ybWFsTnVkZ2UsIGFkanVzdEhlaWdodFN0YXJ0VG9wKTtcbiAgICBDYXJ0ZXNpYW4zLmFkZChhZGp1c3RIZWlnaHRFbmRUb3AsIG5vcm1hbE51ZGdlLCBhZGp1c3RIZWlnaHRFbmRUb3ApO1xuXG4gICAgbnVkZ2VYWihhZGp1c3RIZWlnaHRTdGFydEJvdHRvbSwgYWRqdXN0SGVpZ2h0RW5kQm90dG9tKTtcbiAgICBudWRnZVhaKGFkanVzdEhlaWdodFN0YXJ0VG9wLCBhZGp1c3RIZWlnaHRFbmRUb3ApO1xuXG4gICAgQ2FydGVzaWFuMy5wYWNrKFxuICAgICAgYWRqdXN0SGVpZ2h0U3RhcnRCb3R0b20sXG4gICAgICBwb3NpdGlvbnNBcnJheSxcbiAgICAgIHZlYzNzV3JpdGVJbmRleCArIDEyXG4gICAgKTtcbiAgICBDYXJ0ZXNpYW4zLnBhY2soXG4gICAgICBhZGp1c3RIZWlnaHRFbmRCb3R0b20sXG4gICAgICBwb3NpdGlvbnNBcnJheSxcbiAgICAgIHZlYzNzV3JpdGVJbmRleCArIDE1XG4gICAgKTtcbiAgICBDYXJ0ZXNpYW4zLnBhY2soYWRqdXN0SGVpZ2h0RW5kVG9wLCBwb3NpdGlvbnNBcnJheSwgdmVjM3NXcml0ZUluZGV4ICsgMTgpO1xuICAgIENhcnRlc2lhbjMucGFjayhhZGp1c3RIZWlnaHRTdGFydFRvcCwgcG9zaXRpb25zQXJyYXksIHZlYzNzV3JpdGVJbmRleCArIDIxKTtcblxuICAgIGNhcnRvZ3JhcGhpY3NJbmRleCArPSAyO1xuICAgIGluZGV4ICs9IDM7XG5cbiAgICB2ZWMyc1dyaXRlSW5kZXggKz0gMTY7XG4gICAgdmVjM3NXcml0ZUluZGV4ICs9IDI0O1xuICAgIHZlYzRzV3JpdGVJbmRleCArPSAzMjtcblxuICAgIGxlbmd0aFNvRmFyM0QgKz0gc2VnbWVudExlbmd0aDNEO1xuICAgIGxlbmd0aFNvRmFyMkQgKz0gc2VnbWVudExlbmd0aDJEO1xuICB9XG5cbiAgaW5kZXggPSAwO1xuICB2YXIgaW5kZXhPZmZzZXQgPSAwO1xuICBmb3IgKGkgPSAwOyBpIDwgc2VnbWVudENvdW50OyBpKyspIHtcbiAgICBmb3IgKGogPSAwOyBqIDwgUkVGRVJFTkNFX0lORElDRVNfTEVOR1RIOyBqKyspIHtcbiAgICAgIGluZGljZXNbaW5kZXggKyBqXSA9IFJFRkVSRU5DRV9JTkRJQ0VTW2pdICsgaW5kZXhPZmZzZXQ7XG4gICAgfVxuICAgIGluZGV4T2Zmc2V0ICs9IDg7XG4gICAgaW5kZXggKz0gUkVGRVJFTkNFX0lORElDRVNfTEVOR1RIO1xuICB9XG5cbiAgdmFyIGJvdW5kaW5nU3BoZXJlcyA9IHNjcmF0Y2hCb3VuZGluZ1NwaGVyZXM7XG4gIEJvdW5kaW5nU3BoZXJlLmZyb21WZXJ0aWNlcyhcbiAgICBib3R0b21Qb3NpdGlvbnNBcnJheSxcbiAgICBDYXJ0ZXNpYW4zLlpFUk8sXG4gICAgMyxcbiAgICBib3VuZGluZ1NwaGVyZXNbMF1cbiAgKTtcbiAgQm91bmRpbmdTcGhlcmUuZnJvbVZlcnRpY2VzKFxuICAgIHRvcFBvc2l0aW9uc0FycmF5LFxuICAgIENhcnRlc2lhbjMuWkVSTyxcbiAgICAzLFxuICAgIGJvdW5kaW5nU3BoZXJlc1sxXVxuICApO1xuICB2YXIgYm91bmRpbmdTcGhlcmUgPSBCb3VuZGluZ1NwaGVyZS5mcm9tQm91bmRpbmdTcGhlcmVzKGJvdW5kaW5nU3BoZXJlcyk7XG5cbiAgLy8gQWRqdXN0IGJvdW5kaW5nIHNwaGVyZSBoZWlnaHQgYW5kIHJhZGl1cyB0byBjb3ZlciBtb3JlIG9mIHRoZSB2b2x1bWVcbiAgYm91bmRpbmdTcGhlcmUucmFkaXVzICs9IHN1bUhlaWdodHMgLyAoc2VnbWVudENvdW50ICogMi4wKTtcblxuICB2YXIgYXR0cmlidXRlcyA9IHtcbiAgICBwb3NpdGlvbjogbmV3IEdlb21ldHJ5QXR0cmlidXRlKHtcbiAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5ET1VCTEUsXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAzLFxuICAgICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICAgIHZhbHVlczogcG9zaXRpb25zQXJyYXksXG4gICAgfSksXG4gICAgc3RhcnRIaUFuZEZvcndhcmRPZmZzZXRYOiBnZXRWZWM0R2VvbWV0cnlBdHRyaWJ1dGUoXG4gICAgICBzdGFydEhpQW5kRm9yd2FyZE9mZnNldFhcbiAgICApLFxuICAgIHN0YXJ0TG9BbmRGb3J3YXJkT2Zmc2V0WTogZ2V0VmVjNEdlb21ldHJ5QXR0cmlidXRlKFxuICAgICAgc3RhcnRMb0FuZEZvcndhcmRPZmZzZXRZXG4gICAgKSxcbiAgICBzdGFydE5vcm1hbEFuZEZvcndhcmRPZmZzZXRaOiBnZXRWZWM0R2VvbWV0cnlBdHRyaWJ1dGUoXG4gICAgICBzdGFydE5vcm1hbEFuZEZvcndhcmRPZmZzZXRaXG4gICAgKSxcbiAgICBlbmROb3JtYWxBbmRUZXh0dXJlQ29vcmRpbmF0ZU5vcm1hbGl6YXRpb25YOiBnZXRWZWM0R2VvbWV0cnlBdHRyaWJ1dGUoXG4gICAgICBlbmROb3JtYWxBbmRUZXh0dXJlQ29vcmRpbmF0ZU5vcm1hbGl6YXRpb25YXG4gICAgKSxcbiAgICByaWdodE5vcm1hbEFuZFRleHR1cmVDb29yZGluYXRlTm9ybWFsaXphdGlvblk6IGdldFZlYzRHZW9tZXRyeUF0dHJpYnV0ZShcbiAgICAgIHJpZ2h0Tm9ybWFsQW5kVGV4dHVyZUNvb3JkaW5hdGVOb3JtYWxpemF0aW9uWVxuICAgICksXG4gIH07XG5cbiAgaWYgKGNvbXB1dGUyZEF0dHJpYnV0ZXMpIHtcbiAgICBhdHRyaWJ1dGVzLnN0YXJ0SGlMbzJEID0gZ2V0VmVjNEdlb21ldHJ5QXR0cmlidXRlKHN0YXJ0SGlMbzJEKTtcbiAgICBhdHRyaWJ1dGVzLm9mZnNldEFuZFJpZ2h0MkQgPSBnZXRWZWM0R2VvbWV0cnlBdHRyaWJ1dGUob2Zmc2V0QW5kUmlnaHQyRCk7XG4gICAgYXR0cmlidXRlcy5zdGFydEVuZE5vcm1hbHMyRCA9IGdldFZlYzRHZW9tZXRyeUF0dHJpYnV0ZShzdGFydEVuZE5vcm1hbHMyRCk7XG4gICAgYXR0cmlidXRlcy50ZXhjb29yZE5vcm1hbGl6YXRpb24yRCA9IG5ldyBHZW9tZXRyeUF0dHJpYnV0ZSh7XG4gICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAyLFxuICAgICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICAgIHZhbHVlczogdGV4Y29vcmROb3JtYWxpemF0aW9uMkQsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gbmV3IEdlb21ldHJ5KHtcbiAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgIGluZGljZXM6IGluZGljZXMsXG4gICAgYm91bmRpbmdTcGhlcmU6IGJvdW5kaW5nU3BoZXJlLFxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0VmVjNEdlb21ldHJ5QXR0cmlidXRlKHR5cGVkQXJyYXkpIHtcbiAgcmV0dXJuIG5ldyBHZW9tZXRyeUF0dHJpYnV0ZSh7XG4gICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXG4gICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICB2YWx1ZXM6IHR5cGVkQXJyYXksXG4gIH0pO1xufVxuXG4vKipcbiAqIEFwcHJveGltYXRlcyBhbiBlbGxpcHNvaWQtdGFuZ2VudCB2ZWN0b3IgaW4gMkQgYnkgcHJvamVjdGluZyB0aGUgZW5kIHBvaW50IGludG8gMkQuXG4gKiBFeHBvc2VkIGZvciB0ZXN0aW5nLlxuICpcbiAqIEBwYXJhbSB7TWFwUHJvamVjdGlvbn0gcHJvamVjdGlvbiBNYXAgUHJvamVjdGlvbiBmb3IgcHJvamVjdGluZyBjb29yZGluYXRlcyB0byAyRC5cbiAqIEBwYXJhbSB7Q2FydG9ncmFwaGljfSBjYXJ0b2dyYXBoaWMgVGhlIGNhcnRvZ3JhcGhpYyBvcmlnaW4gcG9pbnQgb2YgdGhlIG5vcm1hbC5cbiAqICAgVXNlZCB0byBjaGVjayBpZiB0aGUgbm9ybWFsIGNyb3NzZXMgdGhlIElETCBkdXJpbmcgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gbm9ybWFsIFRoZSBub3JtYWwgaW4gM0QuXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjN9IHByb2plY3RlZFBvc2l0aW9uIFRoZSBwcm9qZWN0ZWQgb3JpZ2luIHBvaW50IG9mIHRoZSBub3JtYWwgaW4gMkQuXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjN9IHJlc3VsdCBSZXN1bHQgcGFyYW1ldGVyIG9uIHdoaWNoIHRvIHN0b3JlIHRoZSBwcm9qZWN0ZWQgbm9ybWFsLlxuICogQHByaXZhdGVcbiAqL1xuR3JvdW5kUG9seWxpbmVHZW9tZXRyeS5fcHJvamVjdE5vcm1hbCA9IHByb2plY3ROb3JtYWw7XG5leHBvcnQgZGVmYXVsdCBHcm91bmRQb2x5bGluZUdlb21ldHJ5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///46031\n')},99819:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82982);\n\n\n\n/**\n * Defines a heading angle, pitch angle, and range in a local frame.\n * Heading is the rotation from the local north direction where a positive angle is increasing eastward.\n * Pitch is the rotation from the local xy-plane. Positive pitch angles are above the plane. Negative pitch\n * angles are below the plane. Range is the distance from the center of the frame.\n * @alias HeadingPitchRange\n * @constructor\n *\n * @param {Number} [heading=0.0] The heading angle in radians.\n * @param {Number} [pitch=0.0] The pitch angle in radians.\n * @param {Number} [range=0.0] The distance from the center in meters.\n */\nfunction HeadingPitchRange(heading, pitch, range) {\n  /**\n   * Heading is the rotation from the local north direction where a positive angle is increasing eastward.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.heading = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(heading, 0.0);\n\n  /**\n   * Pitch is the rotation from the local xy-plane. Positive pitch angles\n   * are above the plane. Negative pitch angles are below the plane.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.pitch = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(pitch, 0.0);\n\n  /**\n   * Range is the distance from the center of the local frame.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.range = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(range, 0.0);\n}\n\n/**\n * Duplicates a HeadingPitchRange instance.\n *\n * @param {HeadingPitchRange} hpr The HeadingPitchRange to duplicate.\n * @param {HeadingPitchRange} [result] The object onto which to store the result.\n * @returns {HeadingPitchRange} The modified result parameter or a new HeadingPitchRange instance if one was not provided. (Returns undefined if hpr is undefined)\n */\nHeadingPitchRange.clone = function (hpr, result) {\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(hpr)) {\n    return undefined;\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(result)) {\n    result = new HeadingPitchRange();\n  }\n\n  result.heading = hpr.heading;\n  result.pitch = hpr.pitch;\n  result.range = hpr.range;\n  return result;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (HeadingPitchRange);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTk4MTkuanMiLCJtYXBwaW5ncyI6Ijs7QUFBNkM7QUFDVjs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxpQkFBaUIscUVBQVk7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsZUFBZSxxRUFBWTs7QUFFM0I7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsZUFBZSxxRUFBWTtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1CQUFtQjtBQUM5QixXQUFXLG1CQUFtQjtBQUM5QixhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0EsT0FBTyxnRUFBTztBQUNkO0FBQ0E7QUFDQSxPQUFPLGdFQUFPO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsaUJBQWlCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvQ29yZS9IZWFkaW5nUGl0Y2hSYW5nZS5qcz9iNjgxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4vZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi9kZWZpbmVkLmpzXCI7XG5cbi8qKlxuICogRGVmaW5lcyBhIGhlYWRpbmcgYW5nbGUsIHBpdGNoIGFuZ2xlLCBhbmQgcmFuZ2UgaW4gYSBsb2NhbCBmcmFtZS5cbiAqIEhlYWRpbmcgaXMgdGhlIHJvdGF0aW9uIGZyb20gdGhlIGxvY2FsIG5vcnRoIGRpcmVjdGlvbiB3aGVyZSBhIHBvc2l0aXZlIGFuZ2xlIGlzIGluY3JlYXNpbmcgZWFzdHdhcmQuXG4gKiBQaXRjaCBpcyB0aGUgcm90YXRpb24gZnJvbSB0aGUgbG9jYWwgeHktcGxhbmUuIFBvc2l0aXZlIHBpdGNoIGFuZ2xlcyBhcmUgYWJvdmUgdGhlIHBsYW5lLiBOZWdhdGl2ZSBwaXRjaFxuICogYW5nbGVzIGFyZSBiZWxvdyB0aGUgcGxhbmUuIFJhbmdlIGlzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGZyYW1lLlxuICogQGFsaWFzIEhlYWRpbmdQaXRjaFJhbmdlXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW2hlYWRpbmc9MC4wXSBUaGUgaGVhZGluZyBhbmdsZSBpbiByYWRpYW5zLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtwaXRjaD0wLjBdIFRoZSBwaXRjaCBhbmdsZSBpbiByYWRpYW5zLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtyYW5nZT0wLjBdIFRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgaW4gbWV0ZXJzLlxuICovXG5mdW5jdGlvbiBIZWFkaW5nUGl0Y2hSYW5nZShoZWFkaW5nLCBwaXRjaCwgcmFuZ2UpIHtcbiAgLyoqXG4gICAqIEhlYWRpbmcgaXMgdGhlIHJvdGF0aW9uIGZyb20gdGhlIGxvY2FsIG5vcnRoIGRpcmVjdGlvbiB3aGVyZSBhIHBvc2l0aXZlIGFuZ2xlIGlzIGluY3JlYXNpbmcgZWFzdHdhcmQuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDAuMFxuICAgKi9cbiAgdGhpcy5oZWFkaW5nID0gZGVmYXVsdFZhbHVlKGhlYWRpbmcsIDAuMCk7XG5cbiAgLyoqXG4gICAqIFBpdGNoIGlzIHRoZSByb3RhdGlvbiBmcm9tIHRoZSBsb2NhbCB4eS1wbGFuZS4gUG9zaXRpdmUgcGl0Y2ggYW5nbGVzXG4gICAqIGFyZSBhYm92ZSB0aGUgcGxhbmUuIE5lZ2F0aXZlIHBpdGNoIGFuZ2xlcyBhcmUgYmVsb3cgdGhlIHBsYW5lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwLjBcbiAgICovXG4gIHRoaXMucGl0Y2ggPSBkZWZhdWx0VmFsdWUocGl0Y2gsIDAuMCk7XG5cbiAgLyoqXG4gICAqIFJhbmdlIGlzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGxvY2FsIGZyYW1lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwLjBcbiAgICovXG4gIHRoaXMucmFuZ2UgPSBkZWZhdWx0VmFsdWUocmFuZ2UsIDAuMCk7XG59XG5cbi8qKlxuICogRHVwbGljYXRlcyBhIEhlYWRpbmdQaXRjaFJhbmdlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7SGVhZGluZ1BpdGNoUmFuZ2V9IGhwciBUaGUgSGVhZGluZ1BpdGNoUmFuZ2UgdG8gZHVwbGljYXRlLlxuICogQHBhcmFtIHtIZWFkaW5nUGl0Y2hSYW5nZX0gW3Jlc3VsdF0gVGhlIG9iamVjdCBvbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7SGVhZGluZ1BpdGNoUmFuZ2V9IFRoZSBtb2RpZmllZCByZXN1bHQgcGFyYW1ldGVyIG9yIGEgbmV3IEhlYWRpbmdQaXRjaFJhbmdlIGluc3RhbmNlIGlmIG9uZSB3YXMgbm90IHByb3ZpZGVkLiAoUmV0dXJucyB1bmRlZmluZWQgaWYgaHByIGlzIHVuZGVmaW5lZClcbiAqL1xuSGVhZGluZ1BpdGNoUmFuZ2UuY2xvbmUgPSBmdW5jdGlvbiAoaHByLCByZXN1bHQpIHtcbiAgaWYgKCFkZWZpbmVkKGhwcikpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IEhlYWRpbmdQaXRjaFJhbmdlKCk7XG4gIH1cblxuICByZXN1bHQuaGVhZGluZyA9IGhwci5oZWFkaW5nO1xuICByZXN1bHQucGl0Y2ggPSBocHIucGl0Y2g7XG4gIHJlc3VsdC5yYW5nZSA9IGhwci5yYW5nZTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5leHBvcnQgZGVmYXVsdCBIZWFkaW5nUGl0Y2hSYW5nZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///99819\n')},57674:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82982);\n/* harmony import */ var _DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _Math_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99417);\n\n\n\n\n\n/**\n * A rotation expressed as a heading, pitch, and roll. Heading is the rotation about the\n * negative z axis. Pitch is the rotation about the negative y axis. Roll is the rotation about\n * the positive x axis.\n * @alias HeadingPitchRoll\n * @constructor\n *\n * @param {Number} [heading=0.0] The heading component in radians.\n * @param {Number} [pitch=0.0] The pitch component in radians.\n * @param {Number} [roll=0.0] The roll component in radians.\n */\nfunction HeadingPitchRoll(heading, pitch, roll) {\n  /**\n   * Gets or sets the heading.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.heading = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(heading, 0.0);\n  /**\n   * Gets or sets the pitch.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.pitch = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(pitch, 0.0);\n  /**\n   * Gets or sets the roll.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.roll = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(roll, 0.0);\n}\n\n/**\n * Computes the heading, pitch and roll from a quaternion (see http://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles )\n *\n * @param {Quaternion} quaternion The quaternion from which to retrieve heading, pitch, and roll, all expressed in radians.\n * @param {HeadingPitchRoll} [result] The object in which to store the result. If not provided, a new instance is created and returned.\n * @returns {HeadingPitchRoll} The modified result parameter or a new HeadingPitchRoll instance if one was not provided.\n */\nHeadingPitchRoll.fromQuaternion = function (quaternion, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(quaternion)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("quaternion is required");\n  }\n  //>>includeEnd(\'debug\');\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(result)) {\n    result = new HeadingPitchRoll();\n  }\n  var test = 2 * (quaternion.w * quaternion.y - quaternion.z * quaternion.x);\n  var denominatorRoll =\n    1 - 2 * (quaternion.x * quaternion.x + quaternion.y * quaternion.y);\n  var numeratorRoll =\n    2 * (quaternion.w * quaternion.x + quaternion.y * quaternion.z);\n  var denominatorHeading =\n    1 - 2 * (quaternion.y * quaternion.y + quaternion.z * quaternion.z);\n  var numeratorHeading =\n    2 * (quaternion.w * quaternion.z + quaternion.x * quaternion.y);\n  result.heading = -Math.atan2(numeratorHeading, denominatorHeading);\n  result.roll = Math.atan2(numeratorRoll, denominatorRoll);\n  result.pitch = -_Math_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].asinClamped */ .Z.asinClamped(test);\n  return result;\n};\n\n/**\n * Returns a new HeadingPitchRoll instance from angles given in degrees.\n *\n * @param {Number} heading the heading in degrees\n * @param {Number} pitch the pitch in degrees\n * @param {Number} roll the heading in degrees\n * @param {HeadingPitchRoll} [result] The object in which to store the result. If not provided, a new instance is created and returned.\n * @returns {HeadingPitchRoll} A new HeadingPitchRoll instance\n */\nHeadingPitchRoll.fromDegrees = function (heading, pitch, roll, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(heading)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("heading is required");\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(pitch)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("pitch is required");\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(roll)) {\n    throw new _DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("roll is required");\n  }\n  //>>includeEnd(\'debug\');\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(result)) {\n    result = new HeadingPitchRoll();\n  }\n  result.heading = heading * _Math_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE;\n  result.pitch = pitch * _Math_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE;\n  result.roll = roll * _Math_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE;\n  return result;\n};\n\n/**\n * Duplicates a HeadingPitchRoll instance.\n *\n * @param {HeadingPitchRoll} headingPitchRoll The HeadingPitchRoll to duplicate.\n * @param {HeadingPitchRoll} [result] The object onto which to store the result.\n * @returns {HeadingPitchRoll} The modified result parameter or a new HeadingPitchRoll instance if one was not provided. (Returns undefined if headingPitchRoll is undefined)\n */\nHeadingPitchRoll.clone = function (headingPitchRoll, result) {\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(headingPitchRoll)) {\n    return undefined;\n  }\n  if (!(0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(result)) {\n    return new HeadingPitchRoll(\n      headingPitchRoll.heading,\n      headingPitchRoll.pitch,\n      headingPitchRoll.roll\n    );\n  }\n  result.heading = headingPitchRoll.heading;\n  result.pitch = headingPitchRoll.pitch;\n  result.roll = headingPitchRoll.roll;\n  return result;\n};\n\n/**\n * Compares the provided HeadingPitchRolls componentwise and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {HeadingPitchRoll} [left] The first HeadingPitchRoll.\n * @param {HeadingPitchRoll} [right] The second HeadingPitchRoll.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nHeadingPitchRoll.equals = function (left, right) {\n  return (\n    left === right ||\n    ((0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(left) &&\n      (0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(right) &&\n      left.heading === right.heading &&\n      left.pitch === right.pitch &&\n      left.roll === right.roll)\n  );\n};\n\n/**\n * Compares the provided HeadingPitchRolls componentwise and returns\n * <code>true</code> if they pass an absolute or relative tolerance test,\n * <code>false</code> otherwise.\n *\n * @param {HeadingPitchRoll} [left] The first HeadingPitchRoll.\n * @param {HeadingPitchRoll} [right] The second HeadingPitchRoll.\n * @param {Number} [relativeEpsilon=0] The relative epsilon tolerance to use for equality testing.\n * @param {Number} [absoluteEpsilon=relativeEpsilon] The absolute epsilon tolerance to use for equality testing.\n * @returns {Boolean} <code>true</code> if left and right are within the provided epsilon, <code>false</code> otherwise.\n */\nHeadingPitchRoll.equalsEpsilon = function (\n  left,\n  right,\n  relativeEpsilon,\n  absoluteEpsilon\n) {\n  return (\n    left === right ||\n    ((0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(left) &&\n      (0,_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(right) &&\n      _Math_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n        left.heading,\n        right.heading,\n        relativeEpsilon,\n        absoluteEpsilon\n      ) &&\n      _Math_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n        left.pitch,\n        right.pitch,\n        relativeEpsilon,\n        absoluteEpsilon\n      ) &&\n      _Math_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n        left.roll,\n        right.roll,\n        relativeEpsilon,\n        absoluteEpsilon\n      ))\n  );\n};\n\n/**\n * Duplicates this HeadingPitchRoll instance.\n *\n * @param {HeadingPitchRoll} [result] The object onto which to store the result.\n * @returns {HeadingPitchRoll} The modified result parameter or a new HeadingPitchRoll instance if one was not provided.\n */\nHeadingPitchRoll.prototype.clone = function (result) {\n  return HeadingPitchRoll.clone(this, result);\n};\n\n/**\n * Compares this HeadingPitchRoll against the provided HeadingPitchRoll componentwise and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {HeadingPitchRoll} [right] The right hand side HeadingPitchRoll.\n * @returns {Boolean} <code>true</code> if they are equal, <code>false</code> otherwise.\n */\nHeadingPitchRoll.prototype.equals = function (right) {\n  return HeadingPitchRoll.equals(this, right);\n};\n\n/**\n * Compares this HeadingPitchRoll against the provided HeadingPitchRoll componentwise and returns\n * <code>true</code> if they pass an absolute or relative tolerance test,\n * <code>false</code> otherwise.\n *\n * @param {HeadingPitchRoll} [right] The right hand side HeadingPitchRoll.\n * @param {Number} [relativeEpsilon=0] The relative epsilon tolerance to use for equality testing.\n * @param {Number} [absoluteEpsilon=relativeEpsilon] The absolute epsilon tolerance to use for equality testing.\n * @returns {Boolean} <code>true</code> if they are within the provided epsilon, <code>false</code> otherwise.\n */\nHeadingPitchRoll.prototype.equalsEpsilon = function (\n  right,\n  relativeEpsilon,\n  absoluteEpsilon\n) {\n  return HeadingPitchRoll.equalsEpsilon(\n    this,\n    right,\n    relativeEpsilon,\n    absoluteEpsilon\n  );\n};\n\n/**\n * Creates a string representing this HeadingPitchRoll in the format \'(heading, pitch, roll)\' in radians.\n *\n * @returns {String} A string representing the provided HeadingPitchRoll in the format \'(heading, pitch, roll)\'.\n */\nHeadingPitchRoll.prototype.toString = function () {\n  return "(" + this.heading + ", " + this.pitch + ", " + this.roll + ")";\n};\n/* harmony default export */ __webpack_exports__["Z"] = (HeadingPitchRoll);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTc2NzQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUE2QztBQUNWO0FBQ2M7QUFDZDs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsaUJBQWlCLHFFQUFZO0FBQzdCO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGVBQWUscUVBQVk7QUFDM0I7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsY0FBYyxxRUFBWTtBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxrQkFBa0I7QUFDN0IsYUFBYSxrQkFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsT0FBTyxnRUFBTztBQUNkLGNBQWMsbUVBQWM7QUFDNUI7QUFDQTtBQUNBLE9BQU8sZ0VBQU87QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRkFBc0I7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLGtCQUFrQjtBQUM3QixhQUFhLGtCQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPLGdFQUFPO0FBQ2QsY0FBYyxtRUFBYztBQUM1QjtBQUNBLE9BQU8sZ0VBQU87QUFDZCxjQUFjLG1FQUFjO0FBQzVCO0FBQ0EsT0FBTyxnRUFBTztBQUNkLGNBQWMsbUVBQWM7QUFDNUI7QUFDQTtBQUNBLE9BQU8sZ0VBQU87QUFDZDtBQUNBO0FBQ0EsNkJBQTZCLCtGQUE2QjtBQUMxRCx5QkFBeUIsK0ZBQTZCO0FBQ3RELHVCQUF1QiwrRkFBNkI7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QixXQUFXLGtCQUFrQjtBQUM3QixhQUFhLGtCQUFrQjtBQUMvQjtBQUNBO0FBQ0EsT0FBTyxnRUFBTztBQUNkO0FBQ0E7QUFDQSxPQUFPLGdFQUFPO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCLFdBQVcsa0JBQWtCO0FBQzdCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssZ0VBQU87QUFDWixNQUFNLGdFQUFPO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0IsV0FBVyxrQkFBa0I7QUFDN0IsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxnRUFBTztBQUNaLE1BQU0sZ0VBQU87QUFDYixNQUFNLHFGQUF3QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxxRkFBd0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scUZBQXdCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCLGFBQWEsa0JBQWtCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0IsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxnQkFBZ0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9Db3JlL0hlYWRpbmdQaXRjaFJvbGwuanM/MWViZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4vZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi9NYXRoLmpzXCI7XG5cbi8qKlxuICogQSByb3RhdGlvbiBleHByZXNzZWQgYXMgYSBoZWFkaW5nLCBwaXRjaCwgYW5kIHJvbGwuIEhlYWRpbmcgaXMgdGhlIHJvdGF0aW9uIGFib3V0IHRoZVxuICogbmVnYXRpdmUgeiBheGlzLiBQaXRjaCBpcyB0aGUgcm90YXRpb24gYWJvdXQgdGhlIG5lZ2F0aXZlIHkgYXhpcy4gUm9sbCBpcyB0aGUgcm90YXRpb24gYWJvdXRcbiAqIHRoZSBwb3NpdGl2ZSB4IGF4aXMuXG4gKiBAYWxpYXMgSGVhZGluZ1BpdGNoUm9sbFxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFtoZWFkaW5nPTAuMF0gVGhlIGhlYWRpbmcgY29tcG9uZW50IGluIHJhZGlhbnMuXG4gKiBAcGFyYW0ge051bWJlcn0gW3BpdGNoPTAuMF0gVGhlIHBpdGNoIGNvbXBvbmVudCBpbiByYWRpYW5zLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtyb2xsPTAuMF0gVGhlIHJvbGwgY29tcG9uZW50IGluIHJhZGlhbnMuXG4gKi9cbmZ1bmN0aW9uIEhlYWRpbmdQaXRjaFJvbGwoaGVhZGluZywgcGl0Y2gsIHJvbGwpIHtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgaGVhZGluZy5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMC4wXG4gICAqL1xuICB0aGlzLmhlYWRpbmcgPSBkZWZhdWx0VmFsdWUoaGVhZGluZywgMC4wKTtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgcGl0Y2guXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDAuMFxuICAgKi9cbiAgdGhpcy5waXRjaCA9IGRlZmF1bHRWYWx1ZShwaXRjaCwgMC4wKTtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgcm9sbC5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMC4wXG4gICAqL1xuICB0aGlzLnJvbGwgPSBkZWZhdWx0VmFsdWUocm9sbCwgMC4wKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgaGVhZGluZywgcGl0Y2ggYW5kIHJvbGwgZnJvbSBhIHF1YXRlcm5pb24gKHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbnZlcnNpb25fYmV0d2Vlbl9xdWF0ZXJuaW9uc19hbmRfRXVsZXJfYW5nbGVzIClcbiAqXG4gKiBAcGFyYW0ge1F1YXRlcm5pb259IHF1YXRlcm5pb24gVGhlIHF1YXRlcm5pb24gZnJvbSB3aGljaCB0byByZXRyaWV2ZSBoZWFkaW5nLCBwaXRjaCwgYW5kIHJvbGwsIGFsbCBleHByZXNzZWQgaW4gcmFkaWFucy5cbiAqIEBwYXJhbSB7SGVhZGluZ1BpdGNoUm9sbH0gW3Jlc3VsdF0gVGhlIG9iamVjdCBpbiB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LiBJZiBub3QgcHJvdmlkZWQsIGEgbmV3IGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxuICogQHJldHVybnMge0hlYWRpbmdQaXRjaFJvbGx9IFRoZSBtb2RpZmllZCByZXN1bHQgcGFyYW1ldGVyIG9yIGEgbmV3IEhlYWRpbmdQaXRjaFJvbGwgaW5zdGFuY2UgaWYgb25lIHdhcyBub3QgcHJvdmlkZWQuXG4gKi9cbkhlYWRpbmdQaXRjaFJvbGwuZnJvbVF1YXRlcm5pb24gPSBmdW5jdGlvbiAocXVhdGVybmlvbiwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChxdWF0ZXJuaW9uKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInF1YXRlcm5pb24gaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IEhlYWRpbmdQaXRjaFJvbGwoKTtcbiAgfVxuICB2YXIgdGVzdCA9IDIgKiAocXVhdGVybmlvbi53ICogcXVhdGVybmlvbi55IC0gcXVhdGVybmlvbi56ICogcXVhdGVybmlvbi54KTtcbiAgdmFyIGRlbm9taW5hdG9yUm9sbCA9XG4gICAgMSAtIDIgKiAocXVhdGVybmlvbi54ICogcXVhdGVybmlvbi54ICsgcXVhdGVybmlvbi55ICogcXVhdGVybmlvbi55KTtcbiAgdmFyIG51bWVyYXRvclJvbGwgPVxuICAgIDIgKiAocXVhdGVybmlvbi53ICogcXVhdGVybmlvbi54ICsgcXVhdGVybmlvbi55ICogcXVhdGVybmlvbi56KTtcbiAgdmFyIGRlbm9taW5hdG9ySGVhZGluZyA9XG4gICAgMSAtIDIgKiAocXVhdGVybmlvbi55ICogcXVhdGVybmlvbi55ICsgcXVhdGVybmlvbi56ICogcXVhdGVybmlvbi56KTtcbiAgdmFyIG51bWVyYXRvckhlYWRpbmcgPVxuICAgIDIgKiAocXVhdGVybmlvbi53ICogcXVhdGVybmlvbi56ICsgcXVhdGVybmlvbi54ICogcXVhdGVybmlvbi55KTtcbiAgcmVzdWx0LmhlYWRpbmcgPSAtTWF0aC5hdGFuMihudW1lcmF0b3JIZWFkaW5nLCBkZW5vbWluYXRvckhlYWRpbmcpO1xuICByZXN1bHQucm9sbCA9IE1hdGguYXRhbjIobnVtZXJhdG9yUm9sbCwgZGVub21pbmF0b3JSb2xsKTtcbiAgcmVzdWx0LnBpdGNoID0gLUNlc2l1bU1hdGguYXNpbkNsYW1wZWQodGVzdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgSGVhZGluZ1BpdGNoUm9sbCBpbnN0YW5jZSBmcm9tIGFuZ2xlcyBnaXZlbiBpbiBkZWdyZWVzLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBoZWFkaW5nIHRoZSBoZWFkaW5nIGluIGRlZ3JlZXNcbiAqIEBwYXJhbSB7TnVtYmVyfSBwaXRjaCB0aGUgcGl0Y2ggaW4gZGVncmVlc1xuICogQHBhcmFtIHtOdW1iZXJ9IHJvbGwgdGhlIGhlYWRpbmcgaW4gZGVncmVlc1xuICogQHBhcmFtIHtIZWFkaW5nUGl0Y2hSb2xsfSBbcmVzdWx0XSBUaGUgb2JqZWN0IGluIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7SGVhZGluZ1BpdGNoUm9sbH0gQSBuZXcgSGVhZGluZ1BpdGNoUm9sbCBpbnN0YW5jZVxuICovXG5IZWFkaW5nUGl0Y2hSb2xsLmZyb21EZWdyZWVzID0gZnVuY3Rpb24gKGhlYWRpbmcsIHBpdGNoLCByb2xsLCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGhlYWRpbmcpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiaGVhZGluZyBpcyByZXF1aXJlZFwiKTtcbiAgfVxuICBpZiAoIWRlZmluZWQocGl0Y2gpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwicGl0Y2ggaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKHJvbGwpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwicm9sbCBpcyByZXF1aXJlZFwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgSGVhZGluZ1BpdGNoUm9sbCgpO1xuICB9XG4gIHJlc3VsdC5oZWFkaW5nID0gaGVhZGluZyAqIENlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFO1xuICByZXN1bHQucGl0Y2ggPSBwaXRjaCAqIENlc2l1bU1hdGguUkFESUFOU19QRVJfREVHUkVFO1xuICByZXN1bHQucm9sbCA9IHJvbGwgKiBDZXNpdW1NYXRoLlJBRElBTlNfUEVSX0RFR1JFRTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogRHVwbGljYXRlcyBhIEhlYWRpbmdQaXRjaFJvbGwgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtIZWFkaW5nUGl0Y2hSb2xsfSBoZWFkaW5nUGl0Y2hSb2xsIFRoZSBIZWFkaW5nUGl0Y2hSb2xsIHRvIGR1cGxpY2F0ZS5cbiAqIEBwYXJhbSB7SGVhZGluZ1BpdGNoUm9sbH0gW3Jlc3VsdF0gVGhlIG9iamVjdCBvbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7SGVhZGluZ1BpdGNoUm9sbH0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgSGVhZGluZ1BpdGNoUm9sbCBpbnN0YW5jZSBpZiBvbmUgd2FzIG5vdCBwcm92aWRlZC4gKFJldHVybnMgdW5kZWZpbmVkIGlmIGhlYWRpbmdQaXRjaFJvbGwgaXMgdW5kZWZpbmVkKVxuICovXG5IZWFkaW5nUGl0Y2hSb2xsLmNsb25lID0gZnVuY3Rpb24gKGhlYWRpbmdQaXRjaFJvbGwsIHJlc3VsdCkge1xuICBpZiAoIWRlZmluZWQoaGVhZGluZ1BpdGNoUm9sbCkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmV0dXJuIG5ldyBIZWFkaW5nUGl0Y2hSb2xsKFxuICAgICAgaGVhZGluZ1BpdGNoUm9sbC5oZWFkaW5nLFxuICAgICAgaGVhZGluZ1BpdGNoUm9sbC5waXRjaCxcbiAgICAgIGhlYWRpbmdQaXRjaFJvbGwucm9sbFxuICAgICk7XG4gIH1cbiAgcmVzdWx0LmhlYWRpbmcgPSBoZWFkaW5nUGl0Y2hSb2xsLmhlYWRpbmc7XG4gIHJlc3VsdC5waXRjaCA9IGhlYWRpbmdQaXRjaFJvbGwucGl0Y2g7XG4gIHJlc3VsdC5yb2xsID0gaGVhZGluZ1BpdGNoUm9sbC5yb2xsO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgcHJvdmlkZWQgSGVhZGluZ1BpdGNoUm9sbHMgY29tcG9uZW50d2lzZSBhbmQgcmV0dXJuc1xuICogPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhleSBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtIZWFkaW5nUGl0Y2hSb2xsfSBbbGVmdF0gVGhlIGZpcnN0IEhlYWRpbmdQaXRjaFJvbGwuXG4gKiBAcGFyYW0ge0hlYWRpbmdQaXRjaFJvbGx9IFtyaWdodF0gVGhlIHNlY29uZCBIZWFkaW5nUGl0Y2hSb2xsLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIGxlZnQgYW5kIHJpZ2h0IGFyZSBlcXVhbCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqL1xuSGVhZGluZ1BpdGNoUm9sbC5lcXVhbHMgPSBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIChcbiAgICBsZWZ0ID09PSByaWdodCB8fFxuICAgIChkZWZpbmVkKGxlZnQpICYmXG4gICAgICBkZWZpbmVkKHJpZ2h0KSAmJlxuICAgICAgbGVmdC5oZWFkaW5nID09PSByaWdodC5oZWFkaW5nICYmXG4gICAgICBsZWZ0LnBpdGNoID09PSByaWdodC5waXRjaCAmJlxuICAgICAgbGVmdC5yb2xsID09PSByaWdodC5yb2xsKVxuICApO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgcHJvdmlkZWQgSGVhZGluZ1BpdGNoUm9sbHMgY29tcG9uZW50d2lzZSBhbmQgcmV0dXJuc1xuICogPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhleSBwYXNzIGFuIGFic29sdXRlIG9yIHJlbGF0aXZlIHRvbGVyYW5jZSB0ZXN0LFxuICogPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge0hlYWRpbmdQaXRjaFJvbGx9IFtsZWZ0XSBUaGUgZmlyc3QgSGVhZGluZ1BpdGNoUm9sbC5cbiAqIEBwYXJhbSB7SGVhZGluZ1BpdGNoUm9sbH0gW3JpZ2h0XSBUaGUgc2Vjb25kIEhlYWRpbmdQaXRjaFJvbGwuXG4gKiBAcGFyYW0ge051bWJlcn0gW3JlbGF0aXZlRXBzaWxvbj0wXSBUaGUgcmVsYXRpdmUgZXBzaWxvbiB0b2xlcmFuY2UgdG8gdXNlIGZvciBlcXVhbGl0eSB0ZXN0aW5nLlxuICogQHBhcmFtIHtOdW1iZXJ9IFthYnNvbHV0ZUVwc2lsb249cmVsYXRpdmVFcHNpbG9uXSBUaGUgYWJzb2x1dGUgZXBzaWxvbiB0b2xlcmFuY2UgdG8gdXNlIGZvciBlcXVhbGl0eSB0ZXN0aW5nLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIGxlZnQgYW5kIHJpZ2h0IGFyZSB3aXRoaW4gdGhlIHByb3ZpZGVkIGVwc2lsb24sIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKi9cbkhlYWRpbmdQaXRjaFJvbGwuZXF1YWxzRXBzaWxvbiA9IGZ1bmN0aW9uIChcbiAgbGVmdCxcbiAgcmlnaHQsXG4gIHJlbGF0aXZlRXBzaWxvbixcbiAgYWJzb2x1dGVFcHNpbG9uXG4pIHtcbiAgcmV0dXJuIChcbiAgICBsZWZ0ID09PSByaWdodCB8fFxuICAgIChkZWZpbmVkKGxlZnQpICYmXG4gICAgICBkZWZpbmVkKHJpZ2h0KSAmJlxuICAgICAgQ2VzaXVtTWF0aC5lcXVhbHNFcHNpbG9uKFxuICAgICAgICBsZWZ0LmhlYWRpbmcsXG4gICAgICAgIHJpZ2h0LmhlYWRpbmcsXG4gICAgICAgIHJlbGF0aXZlRXBzaWxvbixcbiAgICAgICAgYWJzb2x1dGVFcHNpbG9uXG4gICAgICApICYmXG4gICAgICBDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oXG4gICAgICAgIGxlZnQucGl0Y2gsXG4gICAgICAgIHJpZ2h0LnBpdGNoLFxuICAgICAgICByZWxhdGl2ZUVwc2lsb24sXG4gICAgICAgIGFic29sdXRlRXBzaWxvblxuICAgICAgKSAmJlxuICAgICAgQ2VzaXVtTWF0aC5lcXVhbHNFcHNpbG9uKFxuICAgICAgICBsZWZ0LnJvbGwsXG4gICAgICAgIHJpZ2h0LnJvbGwsXG4gICAgICAgIHJlbGF0aXZlRXBzaWxvbixcbiAgICAgICAgYWJzb2x1dGVFcHNpbG9uXG4gICAgICApKVxuICApO1xufTtcblxuLyoqXG4gKiBEdXBsaWNhdGVzIHRoaXMgSGVhZGluZ1BpdGNoUm9sbCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge0hlYWRpbmdQaXRjaFJvbGx9IFtyZXN1bHRdIFRoZSBvYmplY3Qgb250byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge0hlYWRpbmdQaXRjaFJvbGx9IFRoZSBtb2RpZmllZCByZXN1bHQgcGFyYW1ldGVyIG9yIGEgbmV3IEhlYWRpbmdQaXRjaFJvbGwgaW5zdGFuY2UgaWYgb25lIHdhcyBub3QgcHJvdmlkZWQuXG4gKi9cbkhlYWRpbmdQaXRjaFJvbGwucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICByZXR1cm4gSGVhZGluZ1BpdGNoUm9sbC5jbG9uZSh0aGlzLCByZXN1bHQpO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0aGlzIEhlYWRpbmdQaXRjaFJvbGwgYWdhaW5zdCB0aGUgcHJvdmlkZWQgSGVhZGluZ1BpdGNoUm9sbCBjb21wb25lbnR3aXNlIGFuZCByZXR1cm5zXG4gKiA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGV5IGFyZSBlcXVhbCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge0hlYWRpbmdQaXRjaFJvbGx9IFtyaWdodF0gVGhlIHJpZ2h0IGhhbmQgc2lkZSBIZWFkaW5nUGl0Y2hSb2xsLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZXkgYXJlIGVxdWFsLCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICovXG5IZWFkaW5nUGl0Y2hSb2xsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAocmlnaHQpIHtcbiAgcmV0dXJuIEhlYWRpbmdQaXRjaFJvbGwuZXF1YWxzKHRoaXMsIHJpZ2h0KTtcbn07XG5cbi8qKlxuICogQ29tcGFyZXMgdGhpcyBIZWFkaW5nUGl0Y2hSb2xsIGFnYWluc3QgdGhlIHByb3ZpZGVkIEhlYWRpbmdQaXRjaFJvbGwgY29tcG9uZW50d2lzZSBhbmQgcmV0dXJuc1xuICogPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhleSBwYXNzIGFuIGFic29sdXRlIG9yIHJlbGF0aXZlIHRvbGVyYW5jZSB0ZXN0LFxuICogPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge0hlYWRpbmdQaXRjaFJvbGx9IFtyaWdodF0gVGhlIHJpZ2h0IGhhbmQgc2lkZSBIZWFkaW5nUGl0Y2hSb2xsLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtyZWxhdGl2ZUVwc2lsb249MF0gVGhlIHJlbGF0aXZlIGVwc2lsb24gdG9sZXJhbmNlIHRvIHVzZSBmb3IgZXF1YWxpdHkgdGVzdGluZy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbYWJzb2x1dGVFcHNpbG9uPXJlbGF0aXZlRXBzaWxvbl0gVGhlIGFic29sdXRlIGVwc2lsb24gdG9sZXJhbmNlIHRvIHVzZSBmb3IgZXF1YWxpdHkgdGVzdGluZy5cbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGV5IGFyZSB3aXRoaW4gdGhlIHByb3ZpZGVkIGVwc2lsb24sIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKi9cbkhlYWRpbmdQaXRjaFJvbGwucHJvdG90eXBlLmVxdWFsc0Vwc2lsb24gPSBmdW5jdGlvbiAoXG4gIHJpZ2h0LFxuICByZWxhdGl2ZUVwc2lsb24sXG4gIGFic29sdXRlRXBzaWxvblxuKSB7XG4gIHJldHVybiBIZWFkaW5nUGl0Y2hSb2xsLmVxdWFsc0Vwc2lsb24oXG4gICAgdGhpcyxcbiAgICByaWdodCxcbiAgICByZWxhdGl2ZUVwc2lsb24sXG4gICAgYWJzb2x1dGVFcHNpbG9uXG4gICk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoaXMgSGVhZGluZ1BpdGNoUm9sbCBpbiB0aGUgZm9ybWF0ICcoaGVhZGluZywgcGl0Y2gsIHJvbGwpJyBpbiByYWRpYW5zLlxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcHJvdmlkZWQgSGVhZGluZ1BpdGNoUm9sbCBpbiB0aGUgZm9ybWF0ICcoaGVhZGluZywgcGl0Y2gsIHJvbGwpJy5cbiAqL1xuSGVhZGluZ1BpdGNoUm9sbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBcIihcIiArIHRoaXMuaGVhZGluZyArIFwiLCBcIiArIHRoaXMucGl0Y2ggKyBcIiwgXCIgKyB0aGlzLnJvbGwgKyBcIilcIjtcbn07XG5leHBvcnQgZGVmYXVsdCBIZWFkaW5nUGl0Y2hSb2xsO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///57674\n')},81598:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _defined_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82982);\n\n\n\n\n/**\n * Array implementation of a heap.\n *\n * @alias Heap\n * @constructor\n * @private\n *\n * @param {Object} options Object with the following properties:\n * @param {Heap.ComparatorCallback} options.comparator The comparator to use for the heap. If comparator(a, b) is less than 0, sort a to a lower index than b, otherwise sort to a higher index.\n */\nfunction Heap(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options", options);\n  _Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("options.comparator", options.comparator);\n  //>>includeEnd(\'debug\');\n\n  this._comparator = options.comparator;\n  this._array = [];\n  this._length = 0;\n  this._maximumLength = undefined;\n}\n\nObject.defineProperties(Heap.prototype, {\n  /**\n   * Gets the length of the heap.\n   *\n   * @memberof Heap.prototype\n   *\n   * @type {Number}\n   * @readonly\n   */\n  length: {\n    get: function () {\n      return this._length;\n    },\n  },\n\n  /**\n   * Gets the internal array.\n   *\n   * @memberof Heap.prototype\n   *\n   * @type {Array}\n   * @readonly\n   */\n  internalArray: {\n    get: function () {\n      return this._array;\n    },\n  },\n\n  /**\n   * Gets and sets the maximum length of the heap.\n   *\n   * @memberof Heap.prototype\n   *\n   * @type {Number}\n   */\n  maximumLength: {\n    get: function () {\n      return this._maximumLength;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("maximumLength", value, 0);\n      //>>includeEnd(\'debug\');\n      var originalLength = this._length;\n      if (value < originalLength) {\n        var array = this._array;\n        // Remove trailing references\n        for (var i = value; i < originalLength; ++i) {\n          array[i] = undefined;\n        }\n        this._length = value;\n        array.length = value;\n      }\n      this._maximumLength = value;\n    },\n  },\n\n  /**\n   * The comparator to use for the heap. If comparator(a, b) is less than 0, sort a to a lower index than b, otherwise sort to a higher index.\n   *\n   * @memberof Heap.prototype\n   *\n   * @type {Heap.ComparatorCallback}\n   */\n  comparator: {\n    get: function () {\n      return this._comparator;\n    },\n  },\n});\n\nfunction swap(array, a, b) {\n  var temp = array[a];\n  array[a] = array[b];\n  array[b] = temp;\n}\n\n/**\n * Resizes the internal array of the heap.\n *\n * @param {Number} [length] The length to resize internal array to. Defaults to the current length of the heap.\n */\nHeap.prototype.reserve = function (length) {\n  length = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(length, this._length);\n  this._array.length = length;\n};\n\n/**\n * Update the heap so that index and all descendants satisfy the heap property.\n *\n * @param {Number} [index=0] The starting index to heapify from.\n */\nHeap.prototype.heapify = function (index) {\n  index = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(index, 0);\n  var length = this._length;\n  var comparator = this._comparator;\n  var array = this._array;\n  var candidate = -1;\n  var inserting = true;\n\n  while (inserting) {\n    var right = 2 * (index + 1);\n    var left = right - 1;\n\n    if (left < length && comparator(array[left], array[index]) < 0) {\n      candidate = left;\n    } else {\n      candidate = index;\n    }\n\n    if (right < length && comparator(array[right], array[candidate]) < 0) {\n      candidate = right;\n    }\n    if (candidate !== index) {\n      swap(array, candidate, index);\n      index = candidate;\n    } else {\n      inserting = false;\n    }\n  }\n};\n\n/**\n * Resort the heap.\n */\nHeap.prototype.resort = function () {\n  var length = this._length;\n  for (var i = Math.ceil(length / 2); i >= 0; --i) {\n    this.heapify(i);\n  }\n};\n\n/**\n * Insert an element into the heap. If the length would grow greater than maximumLength\n * of the heap, extra elements are removed.\n *\n * @param {*} element The element to insert\n *\n * @return {*} The element that was removed from the heap if the heap is at full capacity.\n */\nHeap.prototype.insert = function (element) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("element", element);\n  //>>includeEnd(\'debug\');\n\n  var array = this._array;\n  var comparator = this._comparator;\n  var maximumLength = this._maximumLength;\n\n  var index = this._length++;\n  if (index < array.length) {\n    array[index] = element;\n  } else {\n    array.push(element);\n  }\n\n  while (index !== 0) {\n    var parent = Math.floor((index - 1) / 2);\n    if (comparator(array[index], array[parent]) < 0) {\n      swap(array, index, parent);\n      index = parent;\n    } else {\n      break;\n    }\n  }\n\n  var removedElement;\n\n  if ((0,_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(maximumLength) && this._length > maximumLength) {\n    removedElement = array[maximumLength];\n    this._length = maximumLength;\n  }\n\n  return removedElement;\n};\n\n/**\n * Remove the element specified by index from the heap and return it.\n *\n * @param {Number} [index=0] The index to remove.\n * @returns {*} The specified element of the heap.\n */\nHeap.prototype.pop = function (index) {\n  index = (0,_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(index, 0);\n  if (this._length === 0) {\n    return undefined;\n  }\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number.lessThan */ .Z.typeOf.number.lessThan("index", index, this._length);\n  //>>includeEnd(\'debug\');\n\n  var array = this._array;\n  var root = array[index];\n  swap(array, index, --this._length);\n  this.heapify(index);\n  array[this._length] = undefined; // Remove trailing reference\n  return root;\n};\n\n/**\n * The comparator to use for the heap.\n * @callback Heap.ComparatorCallback\n * @param {*} a An element in the heap.\n * @param {*} b An element in the heap.\n * @returns {Number} If the result of the comparison is less than 0, sort a to a lower index than b, otherwise sort to a higher index.\n */\n/* harmony default export */ __webpack_exports__["Z"] = (Heap);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODE1OTguanMiLCJtYXBwaW5ncyI6Ijs7O0FBQStCO0FBQ2M7QUFDVjs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsRUFBRSxzRkFBbUI7QUFDckIsRUFBRSwwRUFBYTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNLDhIQUF1QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9CQUFvQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxXQUFXLHFFQUFZO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxVQUFVLHFFQUFZO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkO0FBQ0EsWUFBWSxHQUFHO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsRUFBRSwwRUFBYTtBQUNmOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxNQUFNLGdFQUFPO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsR0FBRztBQUNoQjtBQUNBO0FBQ0EsVUFBVSxxRUFBWTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsd0dBQTRCO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2QsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EseURBQWUsSUFBSSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0NvcmUvSGVhcC5qcz80ZTJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGVjayBmcm9tIFwiLi9DaGVjay5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBBcnJheSBpbXBsZW1lbnRhdGlvbiBvZiBhIGhlYXAuXG4gKlxuICogQGFsaWFzIEhlYXBcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0hlYXAuQ29tcGFyYXRvckNhbGxiYWNrfSBvcHRpb25zLmNvbXBhcmF0b3IgVGhlIGNvbXBhcmF0b3IgdG8gdXNlIGZvciB0aGUgaGVhcC4gSWYgY29tcGFyYXRvcihhLCBiKSBpcyBsZXNzIHRoYW4gMCwgc29ydCBhIHRvIGEgbG93ZXIgaW5kZXggdGhhbiBiLCBvdGhlcndpc2Ugc29ydCB0byBhIGhpZ2hlciBpbmRleC5cbiAqL1xuZnVuY3Rpb24gSGVhcChvcHRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zXCIsIG9wdGlvbnMpO1xuICBDaGVjay5kZWZpbmVkKFwib3B0aW9ucy5jb21wYXJhdG9yXCIsIG9wdGlvbnMuY29tcGFyYXRvcik7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX2NvbXBhcmF0b3IgPSBvcHRpb25zLmNvbXBhcmF0b3I7XG4gIHRoaXMuX2FycmF5ID0gW107XG4gIHRoaXMuX2xlbmd0aCA9IDA7XG4gIHRoaXMuX21heGltdW1MZW5ndGggPSB1bmRlZmluZWQ7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEhlYXAucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBsZW5ndGggb2YgdGhlIGhlYXAuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBIZWFwLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbnRlcm5hbCBhcnJheS5cbiAgICpcbiAgICogQG1lbWJlcm9mIEhlYXAucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpbnRlcm5hbEFycmF5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYXJyYXk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhbmQgc2V0cyB0aGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIGhlYXAuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBIZWFwLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbWF4aW11bUxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX21heGltdW1MZW5ndGg7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIENoZWNrLnR5cGVPZi5udW1iZXIuZ3JlYXRlclRoYW5PckVxdWFscyhcIm1heGltdW1MZW5ndGhcIiwgdmFsdWUsIDApO1xuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICB2YXIgb3JpZ2luYWxMZW5ndGggPSB0aGlzLl9sZW5ndGg7XG4gICAgICBpZiAodmFsdWUgPCBvcmlnaW5hbExlbmd0aCkge1xuICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLl9hcnJheTtcbiAgICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nIHJlZmVyZW5jZXNcbiAgICAgICAgZm9yICh2YXIgaSA9IHZhbHVlOyBpIDwgb3JpZ2luYWxMZW5ndGg7ICsraSkge1xuICAgICAgICAgIGFycmF5W2ldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IHZhbHVlO1xuICAgICAgICBhcnJheS5sZW5ndGggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX21heGltdW1MZW5ndGggPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgY29tcGFyYXRvciB0byB1c2UgZm9yIHRoZSBoZWFwLiBJZiBjb21wYXJhdG9yKGEsIGIpIGlzIGxlc3MgdGhhbiAwLCBzb3J0IGEgdG8gYSBsb3dlciBpbmRleCB0aGFuIGIsIG90aGVyd2lzZSBzb3J0IHRvIGEgaGlnaGVyIGluZGV4LlxuICAgKlxuICAgKiBAbWVtYmVyb2YgSGVhcC5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0hlYXAuQ29tcGFyYXRvckNhbGxiYWNrfVxuICAgKi9cbiAgY29tcGFyYXRvcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbXBhcmF0b3I7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiBzd2FwKGFycmF5LCBhLCBiKSB7XG4gIHZhciB0ZW1wID0gYXJyYXlbYV07XG4gIGFycmF5W2FdID0gYXJyYXlbYl07XG4gIGFycmF5W2JdID0gdGVtcDtcbn1cblxuLyoqXG4gKiBSZXNpemVzIHRoZSBpbnRlcm5hbCBhcnJheSBvZiB0aGUgaGVhcC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW2xlbmd0aF0gVGhlIGxlbmd0aCB0byByZXNpemUgaW50ZXJuYWwgYXJyYXkgdG8uIERlZmF1bHRzIHRvIHRoZSBjdXJyZW50IGxlbmd0aCBvZiB0aGUgaGVhcC5cbiAqL1xuSGVhcC5wcm90b3R5cGUucmVzZXJ2ZSA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcbiAgbGVuZ3RoID0gZGVmYXVsdFZhbHVlKGxlbmd0aCwgdGhpcy5fbGVuZ3RoKTtcbiAgdGhpcy5fYXJyYXkubGVuZ3RoID0gbGVuZ3RoO1xufTtcblxuLyoqXG4gKiBVcGRhdGUgdGhlIGhlYXAgc28gdGhhdCBpbmRleCBhbmQgYWxsIGRlc2NlbmRhbnRzIHNhdGlzZnkgdGhlIGhlYXAgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFtpbmRleD0wXSBUaGUgc3RhcnRpbmcgaW5kZXggdG8gaGVhcGlmeSBmcm9tLlxuICovXG5IZWFwLnByb3RvdHlwZS5oZWFwaWZ5ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIGluZGV4ID0gZGVmYXVsdFZhbHVlKGluZGV4LCAwKTtcbiAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgdmFyIGNvbXBhcmF0b3IgPSB0aGlzLl9jb21wYXJhdG9yO1xuICB2YXIgYXJyYXkgPSB0aGlzLl9hcnJheTtcbiAgdmFyIGNhbmRpZGF0ZSA9IC0xO1xuICB2YXIgaW5zZXJ0aW5nID0gdHJ1ZTtcblxuICB3aGlsZSAoaW5zZXJ0aW5nKSB7XG4gICAgdmFyIHJpZ2h0ID0gMiAqIChpbmRleCArIDEpO1xuICAgIHZhciBsZWZ0ID0gcmlnaHQgLSAxO1xuXG4gICAgaWYgKGxlZnQgPCBsZW5ndGggJiYgY29tcGFyYXRvcihhcnJheVtsZWZ0XSwgYXJyYXlbaW5kZXhdKSA8IDApIHtcbiAgICAgIGNhbmRpZGF0ZSA9IGxlZnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmRpZGF0ZSA9IGluZGV4O1xuICAgIH1cblxuICAgIGlmIChyaWdodCA8IGxlbmd0aCAmJiBjb21wYXJhdG9yKGFycmF5W3JpZ2h0XSwgYXJyYXlbY2FuZGlkYXRlXSkgPCAwKSB7XG4gICAgICBjYW5kaWRhdGUgPSByaWdodDtcbiAgICB9XG4gICAgaWYgKGNhbmRpZGF0ZSAhPT0gaW5kZXgpIHtcbiAgICAgIHN3YXAoYXJyYXksIGNhbmRpZGF0ZSwgaW5kZXgpO1xuICAgICAgaW5kZXggPSBjYW5kaWRhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc2VydGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZXNvcnQgdGhlIGhlYXAuXG4gKi9cbkhlYXAucHJvdG90eXBlLnJlc29ydCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgZm9yICh2YXIgaSA9IE1hdGguY2VpbChsZW5ndGggLyAyKTsgaSA+PSAwOyAtLWkpIHtcbiAgICB0aGlzLmhlYXBpZnkoaSk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5zZXJ0IGFuIGVsZW1lbnQgaW50byB0aGUgaGVhcC4gSWYgdGhlIGxlbmd0aCB3b3VsZCBncm93IGdyZWF0ZXIgdGhhbiBtYXhpbXVtTGVuZ3RoXG4gKiBvZiB0aGUgaGVhcCwgZXh0cmEgZWxlbWVudHMgYXJlIHJlbW92ZWQuXG4gKlxuICogQHBhcmFtIHsqfSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGluc2VydFxuICpcbiAqIEByZXR1cm4geyp9IFRoZSBlbGVtZW50IHRoYXQgd2FzIHJlbW92ZWQgZnJvbSB0aGUgaGVhcCBpZiB0aGUgaGVhcCBpcyBhdCBmdWxsIGNhcGFjaXR5LlxuICovXG5IZWFwLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay5kZWZpbmVkKFwiZWxlbWVudFwiLCBlbGVtZW50KTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGFycmF5ID0gdGhpcy5fYXJyYXk7XG4gIHZhciBjb21wYXJhdG9yID0gdGhpcy5fY29tcGFyYXRvcjtcbiAgdmFyIG1heGltdW1MZW5ndGggPSB0aGlzLl9tYXhpbXVtTGVuZ3RoO1xuXG4gIHZhciBpbmRleCA9IHRoaXMuX2xlbmd0aCsrO1xuICBpZiAoaW5kZXggPCBhcnJheS5sZW5ndGgpIHtcbiAgICBhcnJheVtpbmRleF0gPSBlbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIGFycmF5LnB1c2goZWxlbWVudCk7XG4gIH1cblxuICB3aGlsZSAoaW5kZXggIT09IDApIHtcbiAgICB2YXIgcGFyZW50ID0gTWF0aC5mbG9vcigoaW5kZXggLSAxKSAvIDIpO1xuICAgIGlmIChjb21wYXJhdG9yKGFycmF5W2luZGV4XSwgYXJyYXlbcGFyZW50XSkgPCAwKSB7XG4gICAgICBzd2FwKGFycmF5LCBpbmRleCwgcGFyZW50KTtcbiAgICAgIGluZGV4ID0gcGFyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgcmVtb3ZlZEVsZW1lbnQ7XG5cbiAgaWYgKGRlZmluZWQobWF4aW11bUxlbmd0aCkgJiYgdGhpcy5fbGVuZ3RoID4gbWF4aW11bUxlbmd0aCkge1xuICAgIHJlbW92ZWRFbGVtZW50ID0gYXJyYXlbbWF4aW11bUxlbmd0aF07XG4gICAgdGhpcy5fbGVuZ3RoID0gbWF4aW11bUxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiByZW1vdmVkRWxlbWVudDtcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBlbGVtZW50IHNwZWNpZmllZCBieSBpbmRleCBmcm9tIHRoZSBoZWFwIGFuZCByZXR1cm4gaXQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFtpbmRleD0wXSBUaGUgaW5kZXggdG8gcmVtb3ZlLlxuICogQHJldHVybnMgeyp9IFRoZSBzcGVjaWZpZWQgZWxlbWVudCBvZiB0aGUgaGVhcC5cbiAqL1xuSGVhcC5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIGluZGV4ID0gZGVmYXVsdFZhbHVlKGluZGV4LCAwKTtcbiAgaWYgKHRoaXMuX2xlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlci5sZXNzVGhhbihcImluZGV4XCIsIGluZGV4LCB0aGlzLl9sZW5ndGgpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgYXJyYXkgPSB0aGlzLl9hcnJheTtcbiAgdmFyIHJvb3QgPSBhcnJheVtpbmRleF07XG4gIHN3YXAoYXJyYXksIGluZGV4LCAtLXRoaXMuX2xlbmd0aCk7XG4gIHRoaXMuaGVhcGlmeShpbmRleCk7XG4gIGFycmF5W3RoaXMuX2xlbmd0aF0gPSB1bmRlZmluZWQ7IC8vIFJlbW92ZSB0cmFpbGluZyByZWZlcmVuY2VcbiAgcmV0dXJuIHJvb3Q7XG59O1xuXG4vKipcbiAqIFRoZSBjb21wYXJhdG9yIHRvIHVzZSBmb3IgdGhlIGhlYXAuXG4gKiBAY2FsbGJhY2sgSGVhcC5Db21wYXJhdG9yQ2FsbGJhY2tcbiAqIEBwYXJhbSB7Kn0gYSBBbiBlbGVtZW50IGluIHRoZSBoZWFwLlxuICogQHBhcmFtIHsqfSBiIEFuIGVsZW1lbnQgaW4gdGhlIGhlYXAuXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBJZiB0aGUgcmVzdWx0IG9mIHRoZSBjb21wYXJpc29uIGlzIGxlc3MgdGhhbiAwLCBzb3J0IGEgdG8gYSBsb3dlciBpbmRleCB0aGFuIGIsIG90aGVyd2lzZSBzb3J0IHRvIGEgaGlnaGVyIGluZGV4LlxuICovXG5leHBvcnQgZGVmYXVsdCBIZWFwO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///81598\n')}}]);