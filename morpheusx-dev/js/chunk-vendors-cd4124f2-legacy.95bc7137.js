"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[7286],{35492:function(e,t,i){var n=i(62200),r=i(14459),o=i(55293),a=i(61841),s=i(45633);function u(e,t,i){this._name=i.name,this._startTime=o.Z.clone(e.startTime),this._delay=(0,n.Z)(e.delay,0),this._stopTime=e.stopTime,this.removeOnStop=(0,n.Z)(e.removeOnStop,!1),this._multiplier=(0,n.Z)(e.multiplier,1),this._reverse=(0,n.Z)(e.reverse,!1),this._loop=(0,n.Z)(e.loop,a.Z.NONE),this.start=new r.Z,this.update=new r.Z,this.stop=new r.Z,this._state=s.Z.STOPPED,this._runtimeAnimation=i,this._computedStartTime=void 0,this._duration=void 0;var u=this;this._raiseStartEvent=function(){u.start.raiseEvent(t,u)},this._updateEventTime=0,this._raiseUpdateEvent=function(){u.update.raiseEvent(t,u,u._updateEventTime)},this._raiseStopEvent=function(){u.stop.raiseEvent(t,u)}}Object.defineProperties(u.prototype,{name:{get:function(){return this._name}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}}}),t["Z"]=u},81977:function(e,t,i){var n=i(60216),r=i(84828),o=i(62200),a=i(82982),s=i(96304),u=i(72248),d=i(87811),c=i(30172),l=i(84543),f=i(52200),h=i(32988),m=i(93224),p=i(26806),_=i(77072);function v(){}var Z=/^data\:/i;function g(e,t){var i=e.gltf,n=i.buffers,r=i.bufferViews,o=r[t.bufferView],a=n[o.buffer],s=o.byteOffset+t.byteOffset,u=t.count*(0,p.Z)(t.type),d=Z.test(a.uri)?"":a.uri;return e.cacheKey+"//"+d+"/"+s+"/"+u}var T={};v.getAnimationParameterValues=function(e,t){var i=g(e,t),s=T[i];if(!(0,a.Z)(s)){var u=e.gltf,c=u.buffers,l=u.bufferViews,f=l[t.bufferView],h=f.buffer,_=c[h],v=_.extras._pipeline.source,Z=t.componentType,A=t.type,b=(0,p.Z)(A),E=t.count,S=(0,m.Z)(u,t);s=new Array(E);for(var y=(0,o.Z)(t.byteOffset,0),x=f.byteOffset+y,w=0;w<E;w++){var C=r.Z.createArrayBufferView(Z,v.buffer,v.byteOffset+x,b);"SCALAR"===A?s[w]=C[0]:"VEC3"===A?s[w]=n.Z.fromArray(C):"VEC4"===A&&(s[w]=d.Z.unpack(C)),x+=S}(0,a.Z)(e.cacheKey)&&(T[i]=s)}return s};var A={};function b(e,t,i){return e.cacheKey+"//"+t+"/"+i}function E(e){this._value=e}function S(e){this._spline=e,this._lastTimeIndex=0}E.prototype.evaluate=function(e,t){return this._value},E.prototype.wrapTime=function(e){return 0},E.prototype.clampTime=function(e){return 0},S.prototype.findTimeInterval=l.Z.prototype.findTimeInterval,S.prototype.evaluate=function(e,t){var i=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),n=this._spline.times,r=e>=n[i+1]?n[i+1]:n[i];return this._spline.evaluate(r,t)},Object.defineProperties(S.prototype,{times:{get:function(){return this._spline.times}}}),S.prototype.wrapTime=function(e){return this._spline.wrapTime(e)},S.prototype.clampTime=function(e){return this._spline.clampTime(e)},v.getAnimationSpline=function(e,t,i,n,r,o,u,d){var l=b(e,t,n),f=A[l];if(!(0,a.Z)(f)){var m=o,p=d;1===m.length&&1===p.length?f=new E(p[0]):"LINEAR"!==r.interpolation&&"STEP"!==r.interpolation||("translation"===u||"scale"===u?f=new s.Z({times:m,points:p}):"rotation"===u?f=new c.Z({times:m,points:p}):"weights"===u&&(f=new h.Z({times:m,weights:p})),(0,a.Z)(f)&&"STEP"===r.interpolation&&(f=new S(f))),(0,a.Z)(e.cacheKey)&&(A[l]=f)}return f};var y={};v.getSkinInverseBindMatrices=function(e,t){var i=g(e,t),n=y[i];if(!(0,a.Z)(n)){var o=e.gltf,s=o.buffers,d=o.bufferViews,c=t.bufferView,l=d[c],h=l.buffer,v=s[h],Z=v.extras._pipeline.source,T=t.componentType,A=t.type,b=t.count,E=(0,m.Z)(o,t),S=l.byteOffset+t.byteOffset,x=(0,p.Z)(A);if(n=new Array(b),T===f.Z.FLOAT&&A===_.Z.MAT4)for(var w=0;w<b;++w){var C=r.Z.createArrayBufferView(T,Z.buffer,Z.byteOffset+S,x);n[w]=u.Z.fromArray(C),S+=E}y[i]=n}return n},t["Z"]=v},73431:function(e,t,i){var n=i(62200),r=i(82982),o=i(12572),a=i(14459),s=i(55293),u=i(99417),d=i(35492),c=i(61841),l=i(45633);function f(e){this.animationAdded=new a.Z,this.animationRemoved=new a.Z,this._model=e,this._scheduledAnimations=[],this._previousTime=void 0}function h(e,t,i){var n=e._model,r=n._runtime.animations,o=r[t],a=new d.Z(i,n,o);return e._scheduledAnimations.push(a),e.animationAdded.raiseEvent(n,a),a}function m(e,t){for(var i=e.channelEvaluators,n=i.length,r=0;r<n;++r)i[r](t)}Object.defineProperties(f.prototype,{length:{get:function(){return this._scheduledAnimations.length}}}),f.prototype.add=function(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT);var t,i=this._model,a=i._runtime.animations;if(!(0,r.Z)(a))throw new o.Z("Animations are not loaded.  Wait for Model.readyPromise to resolve.");if(!(0,r.Z)(e.name)&&!(0,r.Z)(e.index))throw new o.Z("Either options.name or options.index must be defined.");if((0,r.Z)(e.multiplier)&&e.multiplier<=0)throw new o.Z("options.multiplier must be greater than zero.");if((0,r.Z)(e.index)&&(e.index>=a.length||e.index<0))throw new o.Z("options.index must be a valid animation index.");if((0,r.Z)(e.index))return h(this,e.index,e);for(var s=a.length,u=0;u<s;++u)if(a[u].name===e.name){t=u;break}if(!(0,r.Z)(t))throw new o.Z("options.name must be a valid animation name.");return h(this,t,e)},f.prototype.addAll=function(e){if(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),!(0,r.Z)(this._model._runtime.animations))throw new o.Z("Animations are not loaded.  Wait for Model.readyPromise to resolve.");if((0,r.Z)(e.multiplier)&&e.multiplier<=0)throw new o.Z("options.multiplier must be greater than zero.");for(var t=[],i=this._model,a=i._runtime.animations,s=a.length,u=0;u<s;++u)t.push(h(this,u,e));return t},f.prototype.remove=function(e){if((0,r.Z)(e)){var t=this._scheduledAnimations,i=t.indexOf(e);if(-1!==i)return t.splice(i,1),this.animationRemoved.raiseEvent(this._model,e),!0}return!1},f.prototype.removeAll=function(){var e=this._model,t=this._scheduledAnimations,i=t.length;this._scheduledAnimations=[];for(var n=0;n<i;++n)this.animationRemoved.raiseEvent(e,t[n])},f.prototype.contains=function(e){return!!(0,r.Z)(e)&&-1!==this._scheduledAnimations.indexOf(e)},f.prototype.get=function(e){if(!(0,r.Z)(e))throw new o.Z("index is required.");return this._scheduledAnimations[e]};var p=[];function _(e,t,i){return function(){e.animationRemoved.raiseEvent(t,i)}}f.prototype.update=function(e){var t=this._scheduledAnimations,i=t.length;if(0===i)return this._previousTime=void 0,!1;if(s.Z.equals(e.time,this._previousTime))return!1;this._previousTime=s.Z.clone(e.time,this._previousTime);for(var o=!1,a=e.time,d=this._model,f=0;f<i;++f){var h=t[f],v=h._runtimeAnimation;(0,r.Z)(h._computedStartTime)||(h._computedStartTime=s.Z.addSeconds((0,n.Z)(h.startTime,a),h.delay,new s.Z)),(0,r.Z)(h._duration)||(h._duration=v.stopTime*(1/h.multiplier));var Z=h._computedStartTime,g=h._duration,T=h.stopTime,A=0!==g?s.Z.secondsDifference(a,Z)/g:0;0!==g&&(0,r.Z)(T)&&s.Z.greaterThan(a,T)&&(A=s.Z.secondsDifference(T,Z)/g);var b=A>=0,E=h.loop===c.Z.REPEAT||h.loop===c.Z.MIRRORED_REPEAT,S=(b||E&&!(0,r.Z)(h.startTime))&&(A<=1||E)&&(!(0,r.Z)(T)||s.Z.lessThanOrEquals(a,T));if(S||h._state===l.Z.ANIMATING){if(S&&h._state===l.Z.STOPPED&&(h._state=l.Z.ANIMATING,h.start.numberOfListeners>0&&e.afterRender.push(h._raiseStartEvent)),h.loop===c.Z.REPEAT)A-=Math.floor(A);else if(h.loop===c.Z.MIRRORED_REPEAT){var y=Math.floor(A),x=A-y;A=y%2===1?1-x:x}h.reverse&&(A=1-A);var w=A*g*h.multiplier;w=u.Z.clamp(w,v.startTime,v.stopTime),m(v,w),h.update.numberOfListeners>0&&(h._updateEventTime=w,e.afterRender.push(h._raiseUpdateEvent)),o=!0,S||(h._state=l.Z.STOPPED,h.stop.numberOfListeners>0&&e.afterRender.push(h._raiseStopEvent),h.removeOnStop&&p.push(h))}}i=p.length;for(var C=0;C<i;++C){var O=p[C];t.splice(t.indexOf(O),1),e.afterRender.push(_(this,d,O))}return p.length=0,o},t["Z"]=f},61841:function(e,t){var i={NONE:0,REPEAT:1,MIRRORED_REPEAT:2};t["Z"]=Object.freeze(i)},45633:function(e,t){t["Z"]=Object.freeze({STOPPED:0,ANIMATING:1})},7896:function(e,t,i){var n=i(60216),r=i(63367),o=i(68201),a=i(82075),s={};function u(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.componentDatatype=void 0,this.type=void 0}function d(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0}function c(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0}function l(){this.featureTableId=void 0,this.setIndex=void 0,this.constant=0,this.divisor=0}function f(){this.featureTableId=void 0,this.textureReader=void 0}function h(){this.attributes=[]}function m(){this.attributes=[],this.morphTargets=[],this.morphWeights=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIdAttributes=[],this.featureIdTextures=[],this.featureTextureIds=[]}function p(){this.attributes=[],this.featureIdAttributes=[]}function _(){this.joints=void 0,this.inverseBindMatrices=void 0}function v(){this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0}function Z(){this.nodes=[],this.upAxis=void 0,this.forwardAxis=void 0}function g(){this.scene=void 0,this.nodes=void 0,this.featureMetadata=void 0}function T(){this.texture=void 0,this.texCoord=0,this.transform=o.Z.clone(o.Z.IDENTITY),this.channels=void 0}function A(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=r.Z.clone(A.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=A.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=A.DEFAULT_ROUGHNESS_FACTOR}function b(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=r.Z.clone(b.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=n.Z.clone(b.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=b.DEFAULT_GLOSSINESS_FACTOR}function E(){this.metallicRoughness=new A,this.specularGlossiness=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=n.Z.clone(E.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=a.Z.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}A.DEFAULT_BASE_COLOR_FACTOR=r.Z.ONE,A.DEFAULT_METALLIC_FACTOR=1,A.DEFAULT_ROUGHNESS_FACTOR=1,b.DEFAULT_DIFFUSE_FACTOR=r.Z.ONE,b.DEFAULT_SPECULAR_FACTOR=n.Z.ONE,b.DEFAULT_GLOSSINESS_FACTOR=1,E.DEFAULT_EMISSIVE_FACTOR=n.Z.ZERO,s.Quantization=u,s.Attribute=d,s.Indices=c,s.FeatureIdAttribute=l,s.FeatureIdTexture=f,s.MorphTarget=h,s.Primitive=m,s.Instances=p,s.Skin=_,s.Node=v,s.Scene=Z,s.Components=g,s.TextureReader=T,s.MetallicRoughness=A,s.SpecularGlossiness=b,s.Material=E,t["Z"]=s},66913:function(e,t,i){var n=i(62200),r=i(87826),o=i(82075),a=i(13633),s=i(8379),u={name:"AlphaPipelineStage",process:function(e,t,i){var u=e.alphaOptions,d=e.model;u.pass=(0,n.Z)(u.pass,d.opaquePass);var c=e.renderStateOptions;u.pass===s.Z.TRANSLUCENT?c.blending=a.Z.ALPHA_BLEND:c.blending=a.Z.DISABLED;var l=e.shaderBuilder,f=e.uniformMap,h=u.alphaMode;h===o.Z.MASK?(l.addDefine("ALPHA_MODE_MASK",void 0,r.Z.FRAGMENT),l.addUniform("float","u_alphaCutoff",r.Z.FRAGMENT),f.u_alphaCutoff=function(){return u.alphaCutoff}):h===o.Z.BLEND?l.addDefine("ALPHA_MODE_BLEND",void 0,r.Z.FRAGMENT):l.addDefine("ALPHA_MODE_OPAQUE",void 0,r.Z.FRAGMENT)}};t["Z"]=u},68359:function(e,t,i){var n=i(66553),r=i(62200),o=i(82982),a=i(86511),s=i(12572),u=i(7377),d=i(34754),c=i(77174);function l(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),this.mode=(0,r.Z)(e.mode,u.Z.MODIFY_MATERIAL),this.lightingModel=e.lightingModel,this.uniforms=(0,r.Z)(e.uniforms,r.Z.EMPTY_OBJECT),this.varyings=(0,r.Z)(e.varyings,r.Z.EMPTY_OBJECT),this.vertexShaderText=e.vertexShaderText,this.fragmentShaderText=e.fragmentShaderText,this.isTranslucent=(0,r.Z)(e.isTranslucent,!1),this._textureManager=new c.Z,this._defaultTexture=void 0,this.uniformMap=f(this),this.usedVariablesVertex={attributeSet:{}},this.usedVariablesFragment={positionSet:{},attributeSet:{},materialSet:{}},_(this)}function f(e){var t=e.uniforms,i={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o=r.type;if(o===d.Z.SAMPLER_CUBE)throw new s.Z("CustomShader does not support samplerCube uniforms");o===d.Z.SAMPLER_2D?(e._textureManager.loadTexture2D(n,r.value),i[n]=h(e,n)):i[n]=m(e,n)}return i}function h(e,t){return function(){return(0,r.Z)(e._textureManager.getTexture(t),e._defaultTexture)}}function m(e,t){return function(){return e.uniforms[t].value}}function p(e,t,i){var n;while(null!==(n=t.exec(e))){var r=n[1];i[r]=!0}}function _(e){var t,i=/[vf]sInput\.attributes\.(\w+)/g,n=e.vertexShaderText;(0,o.Z)(n)&&(t=e.usedVariablesVertex.attributeSet,p(n,i,t));var r=e.fragmentShaderText;if((0,o.Z)(r)){t=e.usedVariablesFragment.attributeSet,p(r,i,t);var a=/fsInput\.(position\w+)/g,s=e.usedVariablesFragment.positionSet;p(r,a,s);var u=/material\.(\w+)/g,d=e.usedVariablesFragment.materialSet;p(r,u,d)}}l.prototype.setUniform=function(e,t){if(n.Z.typeOf.string("uniformName",e),n.Z.defined("value",t),!(0,o.Z)(this.uniforms[e]))throw new s.Z("Uniform "+e+" must be declared in the CustomShader constructor.");var i=this.uniforms[e];i.type===d.Z.SAMPLER_2D?this._textureManager.loadTexture2D(e,t):(0,o.Z)(t.clone)?i.value=t.clone(i.value):i.value=t},l.prototype.update=function(e){this._defaultTexture=e.context.defaultTexture,this._textureManager.update(e)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){this._textureManager=this._textureManager&&this._textureManager.destroy(),(0,a.Z)(this)}},7377:function(e,t){var i={MODIFY_MATERIAL:"MODIFY_MATERIAL",REPLACE_MATERIAL:"REPLACE_MATERIAL",getDefineName:function(e){return"CUSTOM_SHADER_"+e}};t["Z"]=Object.freeze(i)},85262:function(e,t,i){var n=i(8182),r=i(82982),o=i(27671),a=i(87826),s=i(8379),u=i(87932),d=i(94077),c=i(26998),l=i(77072),f=i(82075),h=i(7377),m={};function p(e){for(var t={},i=0;i<e.length;i++){var n,o=e[i],a=o.semantic,s=o.setIndex;n=(0,r.Z)(a)?c.Z.getVariableName(a,s):o.name.substring(1).toLowerCase(),t[n]=o}return t}function _(e,t){return"    "+e+" "+t+";"}function v(e,t){var i=t.type,n=l.Z.getGlslType(i);return _(n,e)}m.name="CustomShaderStage",m.process=function(e,t,i){var o=e.shaderBuilder,u=e.model.customShader,d=y(u,t);if(d.customShaderEnabled){if(o.addVertexLines(d.vertexLines),o.addFragmentLines(d.fragmentLines),d.vertexLinesEnabled&&o.addDefine("USE_CUSTOM_SHADER",void 0,a.Z.VERTEX),d.shouldComputePositionWC&&(o.addDefine("COMPUTE_POSITION_WC",void 0,a.Z.VERTEX),o.addVarying("vec3","v_positionWC")),(0,r.Z)(u.vertexShaderText)&&o.addDefine("HAS_CUSTOM_VERTEX_SHADER",void 0,a.Z.VERTEX),(0,r.Z)(u.fragmentShaderText)){o.addDefine("HAS_CUSTOM_FRAGMENT_SHADER",void 0,a.Z.FRAGMENT);var c=h.Z.getDefineName(u.mode);o.addDefine(c,void 0,a.Z.FRAGMENT)}var l=u.uniforms;for(var m in l)if(l.hasOwnProperty(m)){var p=l[m];o.addUniform(p.type,m)}var _=u.varyings;for(var v in _)if(_.hasOwnProperty(v)){var Z=_[v];o.addVarying(Z,v)}(0,r.Z)(u.lightingModel)&&(e.lightingOptions.lightingModel=u.lightingModel);var g=e.alphaOptions;u.isTranslucent?(g.pass=s.Z.TRANSLUCENT,g.alphaMode=f.Z.BLEND):(g.pass=void 0,g.alphaMode=f.Z.OPAQUE),e.uniformMap=(0,n.Z)(e.uniformMap,u.uniformMap)}};var Z={position:"vec3",normal:"vec3",tangent:"vec4",texCoord:"vec2",joints:"ivec4",weights:"vec4"},g={position:"vec3(0.0)",normal:"vec3(0.0, 0.0, 1.0)",tangent:"vec4(1.0, 0.0, 0.0, 1.0)",texCoord:"vec2(0.0)",joints:"ivec4(0)",weights:"vec4(0.0)"};function T(e){var t=e.replace(/_[0-9]+$/,""),i=Z[t],n=g[t];if((0,r.Z)(i))return{attributeField:_(i,e),value:n}}function A(e,t){var i,n,o=S(t,e.usedVariablesVertex.attributeSet),a=o.addToShader,s=o.missingAttributes,u=[],d=[];for(i in a)if(a.hasOwnProperty(i)){var c=a[i],l=v(i,c);u.push(l),n="    vsInput.attributes."+i+" = a_"+i+";",d.push(n)}for(var f=0;f<s.length;f++){i=s[f];var h=T(i);if(!(0,r.Z)(h))return m._oneTimeWarning("CustomShaderStage.incompatiblePrimitiveVS","Primitive is missing attribute "+i+", disabling custom vertex shader"),[];u.push(h.attributeField),n="    vsInput.attributes."+i+" = "+h.value+";",d.push(n)}return 0===u.length&&u.push("    float _padding;"),[].concat("struct Attributes","{",u,"};","","struct VertexInput","{","    Attributes attributes;","};","","void initializeInputStruct(out VertexInput vsInput)","{",d,"}")}function b(e){var t=[],i=[],n=e.usedVariablesFragment.positionSet;return n.hasOwnProperty("positionMC")&&(t.push("    vec3 positionMC;"),i.push("    fsInput.positionMC = v_position;")),n.hasOwnProperty("positionWC")&&(t.push("    vec3 positionWC;"),i.push("    fsInput.positionWC = v_positionWC;")),n.hasOwnProperty("positionEC")&&(t.push("    vec3 positionEC;"),i.push("    fsInput.positionEC = v_positionEC;")),{fragmentInputFields:t,initializationLines:i}}function E(e,t){var i,n,o=S(t,e.usedVariablesFragment.attributeSet),a=o.addToShader,s=o.missingAttributes,u=[],d=[];for(i in a)if(a.hasOwnProperty(i)){var c=a[i],l=v(i,c);u.push(l),n="    fsInput.attributes."+i+" = v_"+i+";",d.push(n)}for(var f=0;f<s.length;f++){i=s[f];var h=T(i);if(!(0,r.Z)(h))return m._oneTimeWarning("CustomShaderStage.incompatiblePrimitiveFS","Primitive is missing attribute "+i+", disabling custom fragment shader."),[];u.push(h.attributeField),n="    fsInput.attributes."+i+" = "+h.value+";",d.push(n)}var p=b(e);return 0===u.length&&u.push("    float _padding;"),[].concat("struct Attributes","{",u,"};","","struct FragmentInput","{","    Attributes attributes;",p.fragmentInputFields,"};","","void initializeInputStruct(out FragmentInput fsInput)","{",p.initializationLines,d,"}")}function S(e,t){var i,n={};for(i in e)if(e.hasOwnProperty(i)){var r=e[i];t.hasOwnProperty(i)&&(n[i]=r)}var o=[];for(i in t)e.hasOwnProperty(i)||o.push(i);return{addToShader:n,missingAttributes:o}}function y(e,t){var i=[],n=[],o=p(t.attributes);(0,r.Z)(e.vertexShaderText)&&(i=A(e,o));var a=i.length>0;(0,r.Z)(e.fragmentShaderText)&&(n=E(e,o));var s=n.length>0,c="positionWC"in e.usedVariablesFragment.positionSet&&s;return a&&i.push("#line 0",e.vertexShaderText),(a||c)&&(i.push(u.Z),a=!0),s&&n.push("#line 0",e.fragmentShaderText,d.Z),{vertexLines:i,fragmentLines:n,vertexLinesEnabled:a,fragmentLinesEnabled:s,customShaderEnabled:a||s,shouldComputePositionWC:c}}m._oneTimeWarning=o.Z,t["Z"]=m},97943:function(e,t,i){var n=i(82982),r=i(97264),o=i(77072),a=i(26998),s=i(20885),u=i(87826),d={};function c(e,t,i,r,s){var u,d,c=t.semantic,l=t.setIndex,f=t.type,h=e.shaderBuilder,m=o.Z.getGlslType(f);if((0,n.Z)(c))switch(u=a.Z.getVariableName(c,l),d="v_"+u,c){case a.Z.NORMAL:h.addDefine("HAS_NORMALS");break;case a.Z.TANGENT:h.addDefine("HAS_TANGENTS");break;case a.Z.FEATURE_ID:case a.Z.TEXCOORD:case a.Z.COLOR:h.addDefine("HAS_"+c+"_"+l),r.push("    #ifdef HAS_"+c+"_"+l),r.push("    "+d+" = a_"+u+";"),r.push("    #endif")}var p={index:i,value:(0,n.Z)(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,componentsPerAttribute:o.Z.getNumberOfComponents(f),componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};if(!(0,n.Z)(u)){u=t.name,u=u.substring(1),u=u.toLowerCase(),d="v_"+u;var _="    "+d+" = a_"+u+";";s.push(_)}u="a_"+u,h.addVarying(m,d),c===a.Z.POSITION?h.setPositionAttribute(m,u):h.addAttribute(m,u),e.attributes.push(p)}d.name="GeometryPipelineStage",d.process=function(e,t){for(var i,n=[],o=[],d=0;d<t.attributes.length;d++){var l=t.attributes[d];i=l.semantic===a.Z.POSITION?0:e.attributeIndex++,c(e,l,i,n,o)}var f,h=e.shaderBuilder;n.length>0&&(h.addDefine("HAS_SET_INDEXED_ATTRIBUTES",void 0,u.Z.VERTEX),f=[].concat("void initializeSetIndexedAttributes()","{",n,"}"),h.addVertexLines(f)),o.length>0&&(h.addDefine("HAS_CUSTOM_ATTRIBUTES"),f=[].concat("void initializeCustomAttributes()","{",o,"}"),h.addVertexLines(f)),t.primitiveType===r.Z.POINTS&&h.addDefine("PRIMITIVE_TYPE_POINTS"),h.addVertexLines([s.Z]),h.addVarying("vec3","v_positionEC")},t["Z"]=d},22086:function(e,t,i){var n=i(60216),r=i(84828),o=i(82982),a=i(72248),s=i(77072),u=i(87811),d=i(99095),c=i(58597),l=i(57325),f=i(60426),h=i(70903),m={name:"InstancingPipelineStage",process:function(e,t,i){var n=t.instances,r=[],a=e.shaderBuilder;a.addDefine("HAS_INSTANCING"),a.addVertexLines([h.Z]);var u,d,c=f.Z.getAttributeBySemantic(n,l.Z.TRANSLATION);(0,o.Z)(c)&&(u=c.max,d=c.min);var m=f.Z.getAttributeBySemantic(n,l.Z.ROTATION);if(!(0,o.Z)(m)&&(0,o.Z)(u)&&(0,o.Z)(d)){(0,o.Z)(c)&&(r.push({index:e.attributeIndex++,vertexBuffer:c.buffer,componentsPerAttribute:s.Z.getNumberOfComponents(c.type),componentDatatype:c.componentDatatype,normalize:!1,offsetInBytes:c.byteOffset,strideInBytes:c.byteStride,instanceDivisor:1}),e.instancingTranslationMax=u,e.instancingTranslationMin=d,a.addDefine("HAS_INSTANCE_TRANSLATION"),a.addAttribute("vec3","a_instanceTranslation"));var p=f.Z.getAttributeBySemantic(n,l.Z.SCALE);(0,o.Z)(p)&&(r.push({index:e.attributeIndex++,vertexBuffer:p.buffer,componentsPerAttribute:s.Z.getNumberOfComponents(p.type),componentDatatype:p.componentDatatype,normalize:!1,offsetInBytes:p.byteOffset,strideInBytes:p.byteStride,instanceDivisor:1}),a.addDefine("HAS_INSTANCE_SCALE"),a.addAttribute("vec3","a_instanceScale"))}else r=T(t,e,i);e.instanceCount=t.instances.attributes[0].count,e.attributes.push.apply(e.attributes,r)}},p=new n.Z,_=new u.Z,v=new n.Z,Z=new a.Z;function g(e,t){var i,r=e.attributes[0].count,s=12,d=new Float32Array(r*s),c=f.Z.getAttributeBySemantic(e,l.Z.TRANSLATION),h=f.Z.getAttributeBySemantic(e,l.Z.ROTATION),m=f.Z.getAttributeBySemantic(e,l.Z.SCALE),g=new n.Z(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),T=new n.Z(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),A=(0,o.Z)(c),b=(0,o.Z)(h),E=(0,o.Z)(m),S=A?c.typedArray:new Float32Array(3*r),y=b?h.typedArray:new Float32Array(4*r);E?i=m.typedArray:(i=new Float32Array(3*r),i.fill(1));for(var x=0;x<r;x++){var w=new n.Z(S[3*x],S[3*x+1],S[3*x+2],p);n.Z.maximumByComponent(g,w,g),n.Z.minimumByComponent(T,w,T);var C=new u.Z(y[4*x],y[4*x+1],y[4*x+2],b?y[4*x+3]:1,_),O=new n.Z(i[3*x],i[3*x+1],i[3*x+2],v),I=a.Z.fromTranslationQuaternionRotationScale(w,C,O,Z),M=s*x;d[M+0]=I[0],d[M+1]=I[4],d[M+2]=I[8],d[M+3]=I[12],d[M+4]=I[1],d[M+5]=I[5],d[M+6]=I[9],d[M+7]=I[13],d[M+8]=I[2],d[M+9]=I[6],d[M+10]=I[10],d[M+11]=I[14],t.instancingTranslationMax=g,t.instancingTranslationMin=T}return d}function T(e,t,i){var n=g(e.instances,t),o=d.Z.createVertexBuffer({context:i.context,typedArray:n,usage:c.Z.STATIC_DRAW});o.vertexArrayDestroyable=!1,t.model._resources.push(o);var a=12,s=r.Z.getSizeInBytes(r.Z.FLOAT),u=[{index:t.attributeIndex++,vertexBuffer:o,componentsPerAttribute:4,componentDatatype:r.Z.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:s*a,instanceDivisor:1},{index:t.attributeIndex++,vertexBuffer:o,componentsPerAttribute:4,componentDatatype:r.Z.FLOAT,normalize:!1,offsetInBytes:4*s,strideInBytes:s*a,instanceDivisor:1},{index:t.attributeIndex++,vertexBuffer:o,componentsPerAttribute:4,componentDatatype:r.Z.FLOAT,normalize:!1,offsetInBytes:8*s,strideInBytes:s*a,instanceDivisor:1}],l=t.shaderBuilder;return l.addDefine("HAS_INSTANCE_MATRICES"),l.addAttribute("vec4","a_instancingTransformRow0"),l.addAttribute("vec4","a_instancingTransformRow1"),l.addAttribute("vec4","a_instancingTransformRow2"),u}m._getInstanceTransformsTypedArray=g,t["Z"]=m},84775:function(e,t){var i={UNLIT:0,PBR:1};t["Z"]=Object.freeze(i)},93362:function(e,t,i){var n=i(87826),r=i(36564),o=i(84775),a={name:"LightingPipelineStage",process:function(e,t){var i=e.lightingOptions,a=e.shaderBuilder,s=i.lightingModel;s===o.Z.PBR?a.addDefine("LIGHTING_PBR",void 0,n.Z.FRAGMENT):a.addDefine("LIGHTING_UNLIT",void 0,n.Z.FRAGMENT),a.addFragmentLines([r.Z])}};t["Z"]=a},25152:function(e,t,i){var n=i(82982),r=i(62200),o=i(87826),a=i(82075),s=i(84775),u=i(92667),d=i(8379),c=i(68201),l=i(60216),f=i(63367),h=i(7896),m=h.Z.Material,p=h.Z.MetallicRoughness,_=h.Z.SpecularGlossiness,v={};function Z(e,t,i,n,r){var a="HAS_"+r+"_TEXTURE_TRANSFORM";e.addDefine(a,void 0,o.Z.FRAGMENT);var s=n+"Transform";e.addUniform("mat3",s,o.Z.FRAGMENT),t[s]=function(){return i.transform}}function g(e,t,i,a,s,u){e.addUniform("sampler2D",a,o.Z.FRAGMENT),t[a]=function(){return(0,r.Z)(i.texture,u)};var d="HAS_"+s+"_TEXTURE";e.addDefine(d,void 0,o.Z.FRAGMENT);var l=i.texCoord,f="v_texCoord_"+l,h="TEXCOORD_"+s;e.addDefine(h,f,o.Z.FRAGMENT);var m=i.transform;(0,n.Z)(m)&&!c.Z.equals(m,c.Z.IDENTITY)&&Z(e,t,i,a,s)}function T(e,t,i,r,a,s){var u=e.emissiveTexture;(0,n.Z)(u)&&g(i,t,u,"u_emissiveTexture","EMISSIVE",s);var d=e.emissiveFactor;(0,n.Z)(d)&&!l.Z.equals(d,m.DEFAULT_EMISSIVE_FACTOR)&&(i.addUniform("vec3","u_emissiveFactor",o.Z.FRAGMENT),t.u_emissiveFactor=function(){return e.emissiveFactor},i.addDefine("HAS_EMISSIVE_FACTOR",void 0,o.Z.FRAGMENT));var c=e.normalTexture;(0,n.Z)(c)&&g(i,t,c,"u_normalTexture","NORMAL",a);var f=e.occlusionTexture;(0,n.Z)(f)&&g(i,t,f,"u_occlusionTexture","OCCLUSION",r)}function A(e,t,i,r){var a=e.specularGlossiness;i.addDefine("USE_SPECULAR_GLOSSINESS",void 0,o.Z.FRAGMENT);var s=a.diffuseTexture;(0,n.Z)(s)&&g(i,t,s,"u_diffuseTexture","DIFFUSE",r);var u=a.diffuseFactor;(0,n.Z)(u)&&!f.Z.equals(u,_.DEFAULT_DIFFUSE_FACTOR)&&(i.addUniform("vec4","u_diffuseFactor",o.Z.FRAGMENT),t.u_diffuseFactor=function(){return a.diffuseFactor},i.addDefine("HAS_DIFFUSE_FACTOR",void 0,o.Z.FRAGMENT));var d=a.specularGlossinessTexture;(0,n.Z)(d)&&g(i,t,d,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",r);var c=a.specularFactor;(0,n.Z)(c)&&!l.Z.equals(c,_.DEFAULT_SPECULAR_FACTOR)&&(i.addUniform("vec3","u_specularFactor",o.Z.FRAGMENT),t.u_specularFactor=function(){return a.specularFactor},i.addDefine("HAS_SPECULAR_FACTOR",void 0,o.Z.FRAGMENT));var h=a.glossinessFactor;(0,n.Z)(h)&&h!==_.DEFAULT_GLOSSINESS_FACTOR&&(i.addUniform("float","u_glossinessFactor",o.Z.FRAGMENT),t.u_glossinessFactor=function(){return a.glossinessFactor},i.addDefine("HAS_GLOSSINESS_FACTOR",void 0,o.Z.FRAGMENT))}function b(e,t,i,r){var a=e.metallicRoughness;i.addDefine("USE_METALLIC_ROUGHNESS",void 0,o.Z.FRAGMENT);var s=a.baseColorTexture;(0,n.Z)(s)&&g(i,t,s,"u_baseColorTexture","BASE_COLOR",r);var u=a.baseColorFactor;(0,n.Z)(u)&&!f.Z.equals(u,p.DEFAULT_BASE_COLOR_FACTOR)&&(i.addUniform("vec4","u_baseColorFactor",o.Z.FRAGMENT),t.u_baseColorFactor=function(){return a.baseColorFactor},i.addDefine("HAS_BASE_COLOR_FACTOR",void 0,o.Z.FRAGMENT));var d=a.metallicRoughnessTexture;(0,n.Z)(d)&&g(i,t,d,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",r);var c=a.metallicFactor;(0,n.Z)(c)&&c!==p.DEFAULT_METALLIC_FACTOR&&(i.addUniform("float","u_metallicFactor",o.Z.FRAGMENT),t.u_metallicFactor=function(){return a.metallicFactor},i.addDefine("HAS_METALLIC_FACTOR",void 0,o.Z.FRAGMENT));var l=a.roughnessFactor;(0,n.Z)(l)&&l!==p.DEFAULT_ROUGHNESS_FACTOR&&(i.addUniform("float","u_roughnessFactor",o.Z.FRAGMENT),t.u_roughnessFactor=function(){return a.roughnessFactor},i.addDefine("HAS_ROUGHNESS_FACTOR",void 0,o.Z.FRAGMENT))}v.name="MaterialPipelineStage",v.process=function(e,t,i){var r=t.material,o=e.uniformMap,c=e.shaderBuilder,l=i.context.defaultTexture,f=i.context.defaultNormalTexture,h=i.context.defaultEmissiveTexture;T(r,o,c,l,f,h),(0,n.Z)(r.specularGlossiness)?A(r,o,c,l):b(r,o,c,l);var m=e.lightingOptions;r.unlit?m.lightingModel=s.Z.UNLIT:m.lightingModel=s.Z.PBR;var p=!r.doubleSided;e.renderStateOptions.cull={enabled:p};var _=e.alphaOptions;_.alphaMode=r.alphaMode,r.alphaMode===a.Z.BLEND?_.pass=d.Z.TRANSLUCENT:r.alphaMode===a.Z.MASK&&(_.alphaCutoff=r.alphaCutoff),c.addFragmentLines([u.Z])},v._processTexture=g,v._processTextureTransform=Z,t["Z"]=v},50999:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(82075);function r(){this.pass=void 0,this.alphaMode=n.Z.OPAQUE,this.alphaCutoff=void 0}},46521:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(66553),r=i(82982),o=i(62200),a=i(12572),s=i(6366),u=i(60426),d=i(46238),c=i(8379),l=i(68985),f=i(13222),h=i(86511),m=i(72248);function p(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),n.Z.typeOf.object("options.loader",e.loader),n.Z.typeOf.object("options.resource",e.resource),this._loader=e.loader,this._resource=e.resource,this._modelMatrix=(0,o.Z)(e.modelMatrix,m.Z.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._readyPromise=f.Z.defer(),this._customShader=e.customShader,this._texturesLoaded=!1,this._cull=(0,o.Z)(e.cull,!0),this._opaquePass=(0,o.Z)(e.opaquePass,c.Z.OPAQUE),this._allowPicking=(0,o.Z)(e.allowPicking,!0),this._show=(0,o.Z)(e.show,!0),this._resources=[],this._boundingSphere=void 0,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=(0,o.Z)(e.debugShowBoundingVolume,!1),_(this)}function _(e){var t=e._loader,i=e._resource,n=e._modelMatrix;t.load(),t.promise.then((function(t){e._sceneGraph=new d.Z({model:e,modelComponents:t.components,modelMatrix:n}),e._resourcesLoaded=!0})).otherwise((function(){u.Z.getFailedLoadFunction(this,"model",i)})),t.texturesLoadedPromise.then((function(){e._texturesLoaded=!0})).otherwise((function(){u.Z.getFailedLoadFunction(this,"model",i)}))}function v(e,t){for(var i=e._drawCommands,n=0;n<i.length;n++)i[n].debugShowBoundingVolume=t}Object.defineProperties(p.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},customShader:{get:function(){return this._customShader}},allowPicking:{get:function(){return this._allowPicking}},boundingSphere:{get:function(){if(!this._ready)throw new a.Z("The model is not loaded. Use ModelExperimental.readyPromise or wait for ModelExperimental.ready to be true.");return this._sceneGraph._boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=e}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},show:{get:function(){return this._show},set:function(e){this._show=e}}}),p.prototype.update=function(e){if(this._resourcesLoaded&&this._texturesLoaded||this._loader.process(e),(0,r.Z)(this._customShader)&&this._customShader.update(e),this._resourcesLoaded){if(!this._drawCommandsBuilt){this._sceneGraph.buildDrawCommands(e),this._drawCommandsBuilt=!0;var t=this;e.afterRender.push((function(){t._ready=!0,t._readyPromise.resolve(t)}))}this._debugShowBoundingVolumeDirty&&(v(this._sceneGraph,this._debugShowBoundingVolume),this._debugShowBoundingVolumeDirty=!1),this._show&&e.commandList.push.apply(e.commandList,this._sceneGraph._drawCommands)}},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){var e=this._loader;(0,r.Z)(e)&&e.destroy();for(var t=this._resources,i=0;i<t.length;i++)t[i].destroy();(0,h.Z)(this)},p.fromGltf=function(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),n.Z.defined("options.gltf",e.gltf);var t={releaseGltfJson:e.releaseGltfJson,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis},i=e.gltf,a=(0,o.Z)(e.basePath,""),u=l.Z.createIfNeeded(a);(0,r.Z)(i.asset)?(t.gltfJson=i,t.baseResource=u,t.gltfResource=u):i instanceof Uint8Array?(t.typedArray=i,t.baseResource=u,t.gltfResource=u):t.gltfResource=l.Z.createIfNeeded(e.gltf);var d=new s.Z(t),c={loader:d,resource:t.gltfResource,modelMatrix:e.modelMatrix,debugShowBoundingVolume:e.debugShowBoundingVolume,cull:e.cull,opaquePass:e.opaquePass,allowPicking:e.allowPicking,customShader:e.customShader,show:e.show},f=new p(c);return f}},71640:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(66553),r=i(62200),o=i(82982),a=i(22086);function s(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),n.Z.typeOf.object("options.node",e.node),n.Z.typeOf.object("options.modelMatrix",e.modelMatrix),this.node=e.node,this.modelMatrix=e.modelMatrix,this.pipelineStages=[],this.runtimePrimitives=[],u(this)}function u(e){var t=e.node,i=e.pipelineStages;(0,o.Z)(t.instances)&&i.push(a.Z)}},8942:function(e,t,i){i.d(t,{Z:function(){return h}});var n=i(66553),r=i(62200),o=i(82982),a=i(85262),s=i(7377),u=i(66913),d=i(97943),c=i(93362),l=i(25152),f=i(39522);function h(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),n.Z.typeOf.object("options.primitive",e.primitive),n.Z.typeOf.object("options.model",e.model),this.primitive=e.primitive,this.model=e.model,this.pipelineStages=[],m(this)}function m(e){var t=e.pipelineStages;t.push(d.Z);var i=e.model,n=i.customShader,r=(0,o.Z)(n),h=r&&(0,o.Z)(n.fragmentShaderText),m=!h||n.mode!==s.Z.REPLACE_MATERIAL;m&&t.push(l.Z),r&&t.push(a.Z),t.push(c.Z),i.allowPicking&&t.push(f.Z),t.push(u.Z)}},46238:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(32347),r=i(48243),o=i(66553),a=i(62200),s=i(82982),u=i(72248),d=i(8942),c=i(71640),l=i(60426),f=i(29265),h=i(6095),m=i(37627);function p(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),o.Z.typeOf.object("options.model",e.model),o.Z.typeOf.object("options.modelComponents",e.modelComponents),this._model=e.model,this._modelComponents=e.modelComponents,this._pipelineStages=[],this._runtimeNodes=[],this._drawCommands=[],this._boundingSphere=void 0,this._boundingSpheres=[],_(this)}function _(e){var t=u.Z.clone(e._model.modelMatrix),i=e._modelComponents.scene;l.Z.correctModelMatrix(t,i.upAxis,i.forwardAxis);for(var n=e._modelComponents.scene.nodes,r=0;r<n.length;r++){var o=e._modelComponents.scene.nodes[r],a=u.Z.multiply(t,l.Z.getNodeTransform(o),new u.Z);v(e,o,a)}}function v(e,t,i){if((0,s.Z)(t.children)||(0,s.Z)(t.primitives)){var n;if((0,s.Z)(t.children))for(n=0;n<t.children.length;n++){var r=t.children[n],o=u.Z.multiply(i,l.Z.getNodeTransform(r),new u.Z);v(e,r,o)}var a=new c.Z({node:t,modelMatrix:i});if((0,s.Z)(t.primitives))for(n=0;n<t.primitives.length;n++)a.runtimePrimitives.push(new d.Z({primitive:t.primitives[n],model:e._model}));e._runtimeNodes.push(a)}}p.prototype.buildDrawCommands=function(e){var t,i,o,a=new f.Z(this._model);for(t=0;t<this._runtimeNodes.length;t++){var s=this._runtimeNodes[t],u=new h.Z(a,s);for(i=0;i<s.pipelineStages.length;i++){var d=s.pipelineStages[i];d.process(u,s.node,e)}for(i=0;i<s.runtimePrimitives.length;i++){var c=s.runtimePrimitives[i],l=new m.Z(u,c);for(o=0;o<c.pipelineStages.length;o++){var p=c.pipelineStages[o];p.process(l,c.primitive,e)}this._boundingSpheres.push(l.boundingSphere);var _=(0,n.Z)(l,e);this._drawCommands.push(_)}}this._boundingSphere=r.Z.fromBoundingSpheres(this._boundingSpheres)}},60426:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(48243),r=i(60216),o=i(82982),a=i(72248),s=i(87811),u=i(9407),d=i(66577);function c(){}c.getFailedLoadFunction=function(e,t,i){return function(n){var r="Failed to load "+t+": "+i;(0,o.Z)(n)&&(r+="\n"+n.message),e._readyPromise.reject(new u.Z(r))}},c.getNodeTransform=function(e){return(0,o.Z)(e.matrix)?e.matrix:a.Z.fromTranslationQuaternionRotationScale((0,o.Z)(e.translation)?e.translation:r.Z.ZERO,(0,o.Z)(e.rotation)?e.rotation:s.Z.IDENTITY,(0,o.Z)(e.scale)?e.scale:r.Z.ONE)},c.getAttributeBySemantic=function(e,t,i){for(var n=e.attributes,r=n.length,a=0;a<r;++a){var s=n[a],u=!(0,o.Z)(i)||s.setIndex===i;if(s.semantic===t&&u)return s}};var l=new r.Z,f=new r.Z;c.createBoundingSphere=function(e,t,i,a){var s,u=c.getAttributeBySemantic(e,"POSITION"),d=u.max,h=u.min;if((0,o.Z)(i)&&(0,o.Z)(a)){var m=r.Z.add(h,a,f),p=r.Z.add(d,i,l);s=n.Z.fromCornerPoints(m,p)}else s=n.Z.fromCornerPoints(h,d);return n.Z.transform(s,t,s),s},c.correctModelMatrix=function(e,t,i){t===d.Z.Y?a.Z.multiplyTransformation(e,d.Z.Y_UP_TO_Z_UP,e):t===d.Z.X&&a.Z.multiplyTransformation(e,d.Z.X_UP_TO_Z_UP,e),i===d.Z.Z&&a.Z.multiplyTransformation(e,d.Z.Z_UP_TO_X_UP,e)}},12918:function(e,t,i){i.d(t,{Z:function(){return o}});var n=i(62200),r=i(84775);function o(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),this.lightingModel=(0,n.Z)(e.lightingModel,r.Z.UNLIT)}},29265:function(e,t,i){i.d(t,{Z:function(){return o}});var n=i(66553),r=i(62099);function o(e){n.Z.typeOf.object("model",e),this.shaderBuilder=new r.Z,this.model=e}},6095:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(66553);function r(e,t){n.Z.typeOf.object("modelRenderResources",e),n.Z.typeOf.object("runtimeNode",t),this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.runtimeNode=t,this.modelMatrix=t.modelMatrix,this.attributes=[],this.attributeIndex=1,this.instanceCount=0,this.instancingTranslationMax=void 0,this.instancingTranslationMin=void 0}},39522:function(e,t,i){var n=i(59947),r=i(84828),o=i(82982),a=i(99095),s=i(58597),u=i(87826),d={};function c(e,t){for(var i=e.instanceCount,o=new Array(i),u=new Uint8Array(4*i),d=e.model._resources,c=0;c<i;c++){var l={model:e.model,node:e.runtimeNode,primitive:e.runtimePrimitive,instanceId:c},f=t.createPickId(l);d.push(f),o[c]=f;var h=f.color;u[4*c+0]=n.Z.floatToByte(h.red),u[4*c+1]=n.Z.floatToByte(h.green),u[4*c+2]=n.Z.floatToByte(h.blue),u[4*c+3]=n.Z.floatToByte(h.alpha)}var m=a.Z.createVertexBuffer({context:t,typedArray:u,usage:s.Z.STATIC_DRAW});m.vertexArrayDestroyable=!1,d.push(m);var p={index:e.attributeIndex++,vertexBuffer:m,componentsPerAttribute:4,componentDatatype:r.Z.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};e.attributes.push(p);var _=e.shaderBuilder;_.addAttribute("vec4","a_pickColor"),_.addVarying("vec4","v_pickColor"),e.pickId="v_pickColor"}d.name="PickingPipelineStage",d.process=function(e,t,i){var n=i.context,r=e.runtimeNode,a=e.shaderBuilder;if(a.addDefine("USE_PICKING"),(0,o.Z)(r.node.instances))c(e,n);else{var s=e.model,d={model:s,node:e.runtimeNode,primitive:e.runtimePrimitive},l=n.createPickId(d);s._resources.push(l),a.addUniform("vec4","czm_pickColor",u.Z.FRAGMENT);var f=e.uniformMap;f.czm_pickColor=function(){return l.color},e.pickId="czm_pickColor"}},t["Z"]=d},37627:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(66553),r=i(82982),o=i(13633),a=i(7976),s=i(50999),u=i(60426),d=i(12918);function c(e,t){n.Z.typeOf.object("nodeRenderResources",e),n.Z.typeOf.object("runtimePrimitive",t),this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.modelMatrix=e.modelMatrix.clone(),this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;var i=t.primitive;this.count=(0,r.Z)(i.indices)?i.indices.count:u.Z.getAttributeBySemantic(i,"POSITION").count,this.indices=i.indices,this.primitiveType=i.primitiveType,this.boundingSphere=u.Z.createBoundingSphere(i,this.modelMatrix,e.instancingTranslationMax,e.instancingTranslationMin),this.uniformMap={},this.lightingOptions=new d.Z,this.alphaOptions=new s.Z,this.pickId=void 0,this.renderStateOptions={depthTest:{enabled:!0,func:a.Z.LESS_OR_EQUAL},blending:o.Z.DISABLED}}},77174:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i(82982),r=i(86511),o=i(8743);function a(){this._defaultTexture=void 0,this._textures={},this._loadedImages=[],this._lastUpdatedFrame=-1}function s(e,t,i){i.resource.fetchImage().then((function(n){e._loadedImages.push({id:t,image:n,textureUniform:i})})).otherwise((function(){var i=e._textures[t];(0,n.Z)(i)&&i!==e._defaultTexture&&i.destroy(),e._textures[t]=e._defaultTexture}))}function u(e,t,i){var r,a=t.id,s=t.textureUniform,u=s.typedArray,d=s.sampler;r=(0,n.Z)(u)?new o.Z({context:i,pixelFormat:s.pixelFormat,pixelDatatype:s.pixelDatatype,source:{arrayBufferView:u,width:s.width,height:s.height},sampler:d,flipY:!1}):new o.Z({context:i,source:t.image,sampler:d});var c=e._textures[a];(0,n.Z)(c)&&c!==i.defaultTexture&&c.destroy(),e._textures[a]=r}a.prototype.getTexture=function(e){return this._textures[e]},a.prototype.loadTexture2D=function(e,t){(0,n.Z)(t.typedArray)?this._loadedImages.push({id:e,textureUniform:t}):s(this,e,t)},a.prototype.update=function(e){if(e.frameNumber!==this._lastUpdatedFrame){this._lastUpdatedFrame=e.frameNumber;var t=e.context;this._defaultTexture=t.defaultTexture;for(var i=this._loadedImages,n=0;n<i.length;n++){var r=i[n];u(this,r,t)}i.length=0}},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){var e=this._textures;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];i!==this._defaultTexture&&i.destroy()}return(0,r.Z)(this)}},9774:function(e,t,i){i(62200),i(12572),i(68985),i(38443),i(21572),i(87721),i(88453)},34754:function(e,t){var i={FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};t["Z"]=Object.freeze(i)},11773:function(){var e={FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4"};Object.freeze(e)},32347:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(82982),r=i(60072),o=i(3166),a=i(73373),s=i(10667),u=i(18192);function d(e,t){var i=e.shaderBuilder;i.addVertexLines([a.Z]),i.addFragmentLines([o.Z]);var d=(0,n.Z)(e.indices)?e.indices.buffer:void 0,c=new u.Z({context:t.context,indexBuffer:d,attributes:e.attributes}),l=e.model;l._resources.push(c);var f=s.Z.fromCache(e.renderStateOptions),h=i.buildShaderProgram(t.context);return l._resources.push(h),new r.Z({boundingVolume:e.boundingSphere,modelMatrix:e.modelMatrix,uniformMap:e.uniformMap,renderState:f,vertexArray:c,shaderProgram:h,cull:l.cull,pass:e.alphaOptions.pass,count:e.count,pickId:e.pickId,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:l.debugShowBoundingVolume})}},61021:function(e,t,i){var n=i(72248);function r(e,t,i){this.primitive=e,this._modelMatrix=n.Z.clone(t),this._instanceId=i}Object.defineProperties(r.prototype,{instanceId:{get:function(){return this._instanceId}},model:{get:function(){return this.primitive._model}},modelMatrix:{get:function(){return n.Z.clone(this._modelMatrix)},set:function(e){n.Z.clone(e,this._modelMatrix),this.primitive.expandBoundingSphere(this._modelMatrix),this.primitive._dirty=!0}}}),t["Z"]=r},41074:function(e,t,i){var n=i(48243),r=i(60838),o=i(60216),a=i(66553),s=i(83856),u=i(59947),d=i(84828),c=i(62200),l=i(82982),f=i(86511),h=i(12572),m=i(72248),p=i(97264),_=i(68985),v=i(9407),Z=i(95555),g=i(99095),T=i(58597),A=i(60072),b=i(8379),E=i(10667),S=i(53642),y=i(56629),x=i(13222),w=i(16626),C=i(61021),O=i(15322),I=i(89917),M=i(34125),R={NEEDS_LOAD:0,LOADING:1,LOADED:2,FAILED:3};function L(e){if(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT),!(0,l.Z)(e.gltf)&&!(0,l.Z)(e.url))throw new h.Z("Either options.gltf or options.url is required.");if((0,l.Z)(e.gltf)&&(0,l.Z)(e.url))throw new h.Z("Cannot pass in both options.gltf and options.url.");this.show=(0,c.Z)(e.show,!0),this._instancingSupported=!1,this._dynamic=(0,c.Z)(e.dynamic,!1),this._allowPicking=(0,c.Z)(e.allowPicking,!0),this._ready=!1,this._readyPromise=x.Z.defer(),this._state=R.NEEDS_LOAD,this._dirty=!1,this._cull=(0,c.Z)(e.cull,!0),this._opaquePass=(0,c.Z)(e.opaquePass,b.Z.OPAQUE),this._instances=B(this,e.instances),this._batchTable=e.batchTable,this._model=void 0,this._vertexBufferTypedArray=void 0,this._vertexBuffer=void 0,this._batchIdBuffer=void 0,this._instancedUniformsByProgram=void 0,this._drawCommands=[],this._modelCommands=void 0,this._renderStates=void 0,this._disableCullingRenderStates=void 0,this._boundingSphere=D(this),this._center=o.Z.clone(this._boundingSphere.center),this._rtcTransform=new m.Z,this._rtcModelView=new m.Z,this._mode=void 0,this.modelMatrix=m.Z.clone(m.Z.IDENTITY),this._modelMatrix=m.Z.clone(this.modelMatrix),this._url=_.Z.createIfNeeded(e.url),this._requestType=e.requestType,this._gltf=e.gltf,this._basePath=_.Z.createIfNeeded(e.basePath),this._asynchronous=e.asynchronous,this._incrementallyLoadTextures=e.incrementallyLoadTextures,this._upAxis=e.upAxis,this._forwardAxis=e.forwardAxis,this.shadows=(0,c.Z)(e.shadows,M.Z.ENABLED),this._shadows=this.shadows,this._pickIdLoaded=e.pickIdLoaded,this.debugShowBoundingVolume=(0,c.Z)(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=(0,c.Z)(e.debugWireframe,!1),this._debugWireframe=!1,this._imageBasedLightingFactor=new r.Z(1,1),r.Z.clone(e.imageBasedLightingFactor,this._imageBasedLightingFactor),this.lightColor=e.lightColor,this.luminanceAtZenith=e.luminanceAtZenith,this.sphericalHarmonicCoefficients=e.sphericalHarmonicCoefficients,this.specularEnvironmentMaps=e.specularEnvironmentMaps,this.backFaceCulling=(0,c.Z)(e.backFaceCulling,!0),this._backFaceCulling=this.backFaceCulling}function B(e,t){t=(0,c.Z)(t,[]);for(var i=t.length,n=new Array(i),r=0;r<i;++r){var o=t[r],a=o.modelMatrix,s=(0,c.Z)(o.batchId,r);n[r]=new C.Z(e,a,s)}return n}function D(e){for(var t=e.length,i=new Array(t),r=0;r<t;++r)i[r]=m.Z.getTranslation(e._instances[r]._modelMatrix,new o.Z);return n.Z.fromPoints(i)}Object.defineProperties(L.prototype,{allowPicking:{get:function(){return this._allowPicking}},length:{get:function(){return this._instances.length}},activeAnimations:{get:function(){return this._model.activeAnimations}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){a.Z.typeOf.object("imageBasedLightingFactor",e),a.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),a.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),a.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),a.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1),r.Z.clone(e,this._imageBasedLightingFactor)}}});var F=new o.Z,P=new m.Z;function N(e,t,i,n){return function(r,o){var a=r.semantic;if((0,l.Z)(a)&&e.indexOf(a)>-1){if(!(t.indexOf(a)>-1))throw new v.Z('Shader program cannot be optimized for instancing. Uniform "'+o+'" in program "'+i+'" uses unsupported semantic "'+a+'"');n[o]=a}}}function V(e,t){if((0,l.Z)(e._instancedUniformsByProgram))return e._instancedUniformsByProgram[t];var i={};e._instancedUniformsByProgram=i;var n=["MODEL","MODELVIEW","CESIUM_RTC_MODELVIEW","MODELVIEWPROJECTION","MODELINVERSE","MODELVIEWINVERSE","MODELVIEWPROJECTIONINVERSE","MODELINVERSETRANSPOSE","MODELVIEWINVERSETRANSPOSE"],r=["MODELVIEW","CESIUM_RTC_MODELVIEW","MODELVIEWPROJECTION","MODELVIEWINVERSETRANSPOSE"],o=e._model._sourceTechniques;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a],u=s.program;if(!(0,l.Z)(i[u])){var d={};i[u]=d,y.Z.techniqueUniform(s,N(n,r,t,d))}}return i[t]}function U(e){return function(t,i){var n=V(e,i),r=(0,l.Z)(e._batchTable),o=S.Z.replaceMain(t,"czm_instancing_main"),a="",s="";for(var u in n)if(n.hasOwnProperty(u)){var d,c=n[u];"MODELVIEW"===c||"CESIUM_RTC_MODELVIEW"===c?d="czm_instanced_modelView":"MODELVIEWPROJECTION"===c?(d="czm_instanced_modelViewProjection",a+="mat4 czm_instanced_modelViewProjection;\n",s+="czm_instanced_modelViewProjection = czm_projection * czm_instanced_modelView;\n"):"MODELVIEWINVERSETRANSPOSE"===c&&(d="czm_instanced_modelViewInverseTranspose",a+="mat3 czm_instanced_modelViewInverseTranspose;\n",s+="czm_instanced_modelViewInverseTranspose = mat3(czm_instanced_modelView);\n");var f=new RegExp("uniform.*"+u+".*");o=o.replace(f,""),f=new RegExp(u+"\\b","g"),o=o.replace(f,d)}var h,m,p,_="uniform mat4 czm_instanced_modifiedModelView;\nuniform mat4 czm_instanced_nodeTransform;\n";r?(h="attribute float a_batchId;\n",m="",p=""):(h="",m="attribute vec4 pickColor;\nvarying vec4 v_pickColor;\n",p="    v_pickColor = pickColor;\n");var v=_+a+"mat4 czm_instanced_modelView;\nattribute vec4 czm_modelMatrixRow0;\nattribute vec4 czm_modelMatrixRow1;\nattribute vec4 czm_modelMatrixRow2;\n"+h+m+o+"void main()\n{\n    mat4 czm_instanced_model = mat4(czm_modelMatrixRow0.x, czm_modelMatrixRow1.x, czm_modelMatrixRow2.x, 0.0, czm_modelMatrixRow0.y, czm_modelMatrixRow1.y, czm_modelMatrixRow2.y, 0.0, czm_modelMatrixRow0.z, czm_modelMatrixRow1.z, czm_modelMatrixRow2.z, 0.0, czm_modelMatrixRow0.w, czm_modelMatrixRow1.w, czm_modelMatrixRow2.w, 1.0);\n    czm_instanced_modelView = czm_instanced_modifiedModelView * czm_instanced_model * czm_instanced_nodeTransform;\n"+s+"    czm_instancing_main();\n"+p+"}\n";if(r){var Z=e._model.gltf,g=O.Z.getDiffuseAttributeOrUniform(Z,i);v=e._batchTable.getVertexShaderCallback(!0,"a_batchId",g)(v)}return v}}function z(e){return function(t,i){var n=e._batchTable;if((0,l.Z)(n)){var r=e._model.gltf,o=O.Z.getDiffuseAttributeOrUniform(r,i);t=n.getFragmentShaderCallback(!0,o,!1)(t)}else t="varying vec4 v_pickColor;\n"+t;return t}}function k(e,t){return function(){return m.Z.multiply(t.uniformState.view,e._rtcTransform,e._rtcModelView)}}function G(e){return function(){return e.computedMatrix}}function H(e,t){return function(i,n,r){i=(0,s.Z)(i),i.czm_instanced_modifiedModelView=k(e,t),i.czm_instanced_nodeTransform=G(r);var o=V(e,n);for(var a in o)o.hasOwnProperty(a)&&delete i[a];return(0,l.Z)(e._batchTable)&&(i=e._batchTable.getUniformMapCallback()(i)),i}}function W(e){return function(t,i){if((0,l.Z)(e._batchTable)){var n=e._model.gltf,r=O.Z.getDiffuseAttributeOrUniform(n,i);t=e._batchTable.getVertexShaderCallback(!0,"a_batchId",r)(t),t="uniform float a_batchId\n;"+t}return t}}function j(e){return function(t,i){var n=e._batchTable;if((0,l.Z)(n)){var r=e._model.gltf,o=O.Z.getDiffuseAttributeOrUniform(r,i);t=n.getFragmentShaderCallback(!0,o,!1)(t)}else t="uniform vec4 czm_pickColor;\n"+t;return t}}function q(e){return function(t){return(0,l.Z)(e._batchTable)&&(t=e._batchTable.getUniformMapCallback()(t)),t}}function Y(e){var t=e._instances,i=e.length,n=e._center,r=12,o=e._vertexBufferTypedArray;(0,l.Z)(o)||(o=new Float32Array(i*r)),e._dynamic&&(e._vertexBufferTypedArray=o);for(var a=0;a<i;++a){var s=t[a]._modelMatrix,u=m.Z.clone(s,P);u[12]-=n.x,u[13]-=n.y,u[14]-=n.z;var d=a*r;o[d+0]=u[0],o[d+1]=u[4],o[d+2]=u[8],o[d+3]=u[12],o[d+4]=u[1],o[d+5]=u[5],o[d+6]=u[9],o[d+7]=u[13],o[d+8]=u[2],o[d+9]=u[6],o[d+10]=u[10],o[d+11]=u[14]}return o}function X(e,t){var i,n=e._instances,r=e.length,o=e._dynamic,a=(0,l.Z)(e._batchTable);if(a){var s=new Uint16Array(r);for(i=0;i<r;++i)s[i]=n[i]._instanceId;e._batchIdBuffer=g.Z.createVertexBuffer({context:t,typedArray:s,usage:T.Z.STATIC_DRAW})}if(!a){var d=new Uint8Array(4*r);for(i=0;i<r;++i){var c=e._pickIds[i],f=c.color,h=4*i;d[h]=u.Z.floatToByte(f.red),d[h+1]=u.Z.floatToByte(f.green),d[h+2]=u.Z.floatToByte(f.blue),d[h+3]=u.Z.floatToByte(f.alpha)}e._pickIdBuffer=g.Z.createVertexBuffer({context:t,typedArray:d,usage:T.Z.STATIC_DRAW})}var m=Y(e);e._vertexBuffer=g.Z.createVertexBuffer({context:t,typedArray:m,usage:o?T.Z.STREAM_DRAW:T.Z.STATIC_DRAW})}function J(e){var t=Y(e);e._vertexBuffer.copyFromArrayView(t)}function K(e,t){for(var i=e._instances,n=i.length,r=new Array(n),o=0;o<n;++o)r[o]=t.createPickId(i[o]);return r}function Q(e,t){var i=e._instancingSupported,n=(0,l.Z)(e._batchTable),r=e._allowPicking,o={url:e._url,requestType:e._requestType,gltf:e._gltf,basePath:e._basePath,shadows:e._shadows,cacheKey:void 0,asynchronous:e._asynchronous,allowPicking:r,incrementallyLoadTextures:e._incrementallyLoadTextures,upAxis:e._upAxis,forwardAxis:e._forwardAxis,precreatedAttributes:void 0,vertexShaderLoaded:void 0,fragmentShaderLoaded:void 0,uniformMapLoaded:void 0,pickIdLoaded:e._pickIdLoaded,ignoreCommands:!0,opaquePass:e._opaquePass,imageBasedLightingFactor:e.imageBasedLightingFactor,lightColor:e.lightColor,luminanceAtZenith:e.luminanceAtZenith,sphericalHarmonicCoefficients:e.sphericalHarmonicCoefficients,specularEnvironmentMaps:e.specularEnvironmentMaps,showOutline:e.showOutline};if(n||(e._pickIds=K(e,t)),i){X(e,t);var a=12,s=d.Z.getSizeInBytes(d.Z.FLOAT),u={czm_modelMatrixRow0:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:d.Z.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:s*a,instanceDivisor:1},czm_modelMatrixRow1:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:d.Z.FLOAT,normalize:!1,offsetInBytes:4*s,strideInBytes:s*a,instanceDivisor:1},czm_modelMatrixRow2:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:d.Z.FLOAT,normalize:!1,offsetInBytes:8*s,strideInBytes:s*a,instanceDivisor:1}};n&&(u.a_batchId={index:0,vertexBuffer:e._batchIdBuffer,componentsPerAttribute:1,componentDatatype:d.Z.UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0,instanceDivisor:1}),n||(u.pickColor={index:0,vertexBuffer:e._pickIdBuffer,componentsPerAttribute:4,componentDatatype:d.Z.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1}),o.precreatedAttributes=u,o.vertexShaderLoaded=U(e),o.fragmentShaderLoaded=z(e),o.uniformMapLoaded=H(e,t),(0,l.Z)(e._url)&&(o.cacheKey=e._url.getUrlComponent()+"#instanced")}else o.vertexShaderLoaded=W(e),o.fragmentShaderLoaded=j(e),o.uniformMapLoaded=q(e,t);(0,l.Z)(e._url)?e._model=w.Z.fromGltf(o):e._model=new w.Z(o)}function $(e,t){if(e._debugWireframe!==e.debugWireframe||t){e._debugWireframe=e.debugWireframe;for(var i=e.debugWireframe?p.Z.LINES:p.Z.TRIANGLES,n=e._drawCommands,r=n.length,o=0;o<r;++o)n[o].primitiveType=i}}function ee(e){var t=(0,s.Z)(e,!0);return t.cull.enabled=!1,E.Z.fromCache(t)}function te(e,t){if(e._backFaceCulling!==e.backFaceCulling||t){e._backFaceCulling=e.backFaceCulling;var i,n=e._drawCommands,r=n.length;if(!(0,l.Z)(e._disableCullingRenderStates))for(e._disableCullingRenderStates=new Array(r),e._renderStates=new Array(r),i=0;i<r;++i){var o=n[i].renderState,a=ee(o);e._disableCullingRenderStates[i]=a,e._renderStates[i]=o}for(i=0;i<r;++i)n[i].renderState=e._backFaceCulling?e._renderStates[i]:e._disableCullingRenderStates[i]}}function ie(e,t){if(e.debugShowBoundingVolume!==e._debugShowBoundingVolume||t){e._debugShowBoundingVolume=e.debugShowBoundingVolume;for(var i=e._drawCommands,n=i.length,r=0;r<n;++r)i[r].debugShowBoundingVolume=e.debugShowBoundingVolume}}function ne(e,t){for(var i=t.length,n=e.length,r=e._boundingSphere,o=e._cull,a=0;a<i;++a){var s=A.Z.shallowClone(t[a]);s.instanceCount=n,s.boundingVolume=r,s.cull=o,(0,l.Z)(e._batchTable)?s.pickId=e._batchTable.getPickId():s.pickId="v_pickColor",e._drawCommands.push(s)}}function re(e){return function(){return e}}function oe(e){return function(){return e}}function ae(e,t){for(var i=e._instances,r=t.length,o=e.length,a=e._batchTable,u=(0,l.Z)(a),d=e._cull,c=0;c<r;++c)for(var f=0;f<o;++f){var h=A.Z.shallowClone(t[c]);if(h.modelMatrix=new m.Z,h.boundingVolume=new n.Z,h.cull=d,h.uniformMap=(0,s.Z)(h.uniformMap),u)h.uniformMap.a_batchId=re(i[f]._instanceId);else{var p=e._pickIds[f];h.uniformMap.czm_pickColor=oe(p.color)}e._drawCommands.push(h)}}function se(e){for(var t=e._modelCommands,i=t.length,r=e.length,o=e._rtcTransform,a=e._center,s=0;s<i;++s)for(var u=t[s],d=0;d<r;++d){var c=s*r+d,l=e._drawCommands[c],f=m.Z.clone(e._instances[d]._modelMatrix,P);f[12]-=a.x,f[13]-=a.y,f[14]-=a.z,f=m.Z.multiply(o,f,P);var h=u.modelMatrix,p=l.modelMatrix;m.Z.multiply(f,h,p);var _=u.boundingVolume,v=l.boundingVolume;n.Z.transform(_,f,v)}}function ue(e){for(var t=e._nodeCommands,i=t.length,n=[],r=0;r<i;++r){var o=t[r];o.show&&n.push(o.command)}return n}function de(e){for(var t=e._nodeCommands,i=t.length,n=!1,r=0;r<i;r++){var o=t[r];o.command.dirty&&(o.command.dirty=!1,n=!0)}return n}function ce(e,t){e._drawCommands=[];var i=ue(e._model);t?ne(e,i):(ae(e,i),se(e))}function le(e,t){if(e.shadows!==e._shadows||t){e._shadows=e.shadows;for(var i=M.Z.castShadows(e.shadows),n=M.Z.receiveShadows(e.shadows),r=e._drawCommands,o=r.length,a=0;a<o;++a){var s=r[a];s.castShadows=i,s.receiveShadows=n}}}L.prototype.expandBoundingSphere=function(e){var t=m.Z.getTranslation(e,F);n.Z.expand(this._boundingSphere,t,this._boundingSphere)},L.prototype.update=function(e){if(e.mode!==I.Z.MORPHING&&this.show&&0!==this.length){var t=e.context;if(this._state===R.NEEDS_LOAD){this._state=R.LOADING,this._instancingSupported=t.instancedArrays,Q(this,t);var i=this;this._model.readyPromise.otherwise((function(e){i._state=R.FAILED,i._readyPromise.reject(e)}))}var n=this._instancingSupported,r=this._model;if(r.imageBasedLightingFactor=this.imageBasedLightingFactor,r.lightColor=this.lightColor,r.luminanceAtZenith=this.luminanceAtZenith,r.sphericalHarmonicCoefficients=this.sphericalHarmonicCoefficients,r.specularEnvironmentMaps=this.specularEnvironmentMaps,r.update(e),r.ready&&this._state===R.LOADING){this._state=R.LOADED,this._ready=!0;var a=r.boundingSphere.radius+o.Z.magnitude(r.boundingSphere.center);return this._boundingSphere.radius+=a,this._modelCommands=ue(r),ce(this,n),void this._readyPromise.resolve(this)}if(this._state===R.LOADED){var s=e.mode!==this._mode,u=this.modelMatrix,d=!m.Z.equals(this._modelMatrix,u);if(s||d){this._mode=e.mode,m.Z.clone(u,this._modelMatrix);var c=m.Z.multiplyByTranslation(this._modelMatrix,this._center,this._rtcTransform);this._mode!==I.Z.SCENE3D&&(c=Z.Z.basisTo2D(e.mapProjection,c,c)),m.Z.getTranslation(c,this._boundingSphere.center)}n&&this._dirty&&(this._dynamic=!0,this._dirty=!1,J(this));var l=de(r);l&&ce(this,n),!n&&(r.dirty||this._dirty||s||d)&&se(this),le(this,l),$(this,l),te(this,l),ie(this,l);var f=e.passes;if(f.render||f.pick)for(var h=e.commandList,p=this._drawCommands,_=p.length,v=0;v<_;++v)h.push(p[v])}}},L.prototype.isDestroyed=function(){return!1},L.prototype.destroy=function(){this._model=this._model&&this._model.destroy();var e=this._pickIds;if((0,l.Z)(e))for(var t=e.length,i=0;i<t;++i)e[i].destroy();return(0,f.Z)(this)},t["Z"]=L},28770:function(e,t,i){var n=i(79120);function r(){this.initialized=!1,this.resourcesParsed=!1,this.vertexBuffersToCreate=new n.Z,this.indexBuffersToCreate=new n.Z,this.buffers={},this.pendingBufferLoads=0,this.programsToCreate=new n.Z,this.shaders={},this.pendingShaderLoads=0,this.texturesToCreate=new n.Z,this.pendingTextureLoads=0,this.texturesToCreateFromBufferView=new n.Z,this.pendingBufferViewToImage=0,this.createSamplers=!0,this.createSkins=!0,this.createRuntimeAnimations=!0,this.createVertexArrays=!0,this.createRenderStates=!0,this.createUniformMaps=!0,this.createRuntimeNodes=!0,this.createdBufferViews={},this.primitivesToDecode=new n.Z,this.activeDecodingTasks=0,this.pendingDecodingCache=!1,this.skinnedNodesIds=[]}function o(e,t,i){return e.subarray(t,t+i)}r.prototype.getBuffer=function(e){return o(this.buffers[e.buffer],e.byteOffset,e.byteLength)},r.prototype.finishedPendingBufferLoads=function(){return 0===this.pendingBufferLoads},r.prototype.finishedBuffersCreation=function(){return 0===this.pendingBufferLoads&&0===this.vertexBuffersToCreate.length&&0===this.indexBuffersToCreate.length},r.prototype.finishedProgramCreation=function(){return 0===this.pendingShaderLoads&&0===this.programsToCreate.length},r.prototype.finishedTextureCreation=function(){var e=0===this.pendingTextureLoads,t=0===this.texturesToCreate.length&&0===this.texturesToCreateFromBufferView.length;return e&&t},r.prototype.finishedEverythingButTextureCreation=function(){var e=0===this.pendingBufferLoads&&0===this.pendingShaderLoads,t=0===this.vertexBuffersToCreate.length&&0===this.indexBuffersToCreate.length&&0===this.programsToCreate.length&&0===this.pendingBufferViewToImage;return this.finishedDecoding()&&e&&t},r.prototype.finishedDecoding=function(){return 0===this.primitivesToDecode.length&&0===this.activeDecodingTasks&&!this.pendingDecodingCache},r.prototype.finished=function(){return this.finishedDecoding()&&this.finishedTextureCreation()&&this.finishedEverythingButTextureCreation()},t["Z"]=r}}]);
//# sourceMappingURL=chunk-vendors-cd4124f2-legacy.95bc7137.js.map