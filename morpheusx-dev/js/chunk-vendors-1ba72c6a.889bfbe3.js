"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[440],{4260:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * Represents the position relative to the terrain.\n *\n * @enum {Number}\n */\nvar HeightReference = {\n  /**\n   * The position is absolute.\n   * @type {Number}\n   * @constant\n   */\n  NONE: 0,\n\n  /**\n   * The position is clamped to the terrain.\n   * @type {Number}\n   * @constant\n   */\n  CLAMP_TO_GROUND: 1,\n\n  /**\n   * The position height is the height above the terrain.\n   * @type {Number}\n   * @constant\n   */\n  RELATIVE_TO_GROUND: 2,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(HeightReference));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDI2MC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSw4QkFBOEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9IZWlnaHRSZWZlcmVuY2UuanM/MjMxMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJlcHJlc2VudHMgdGhlIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB0ZXJyYWluLlxuICpcbiAqIEBlbnVtIHtOdW1iZXJ9XG4gKi9cbnZhciBIZWlnaHRSZWZlcmVuY2UgPSB7XG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpb24gaXMgYWJzb2x1dGUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTk9ORTogMCxcblxuICAvKipcbiAgICogVGhlIHBvc2l0aW9uIGlzIGNsYW1wZWQgdG8gdGhlIHRlcnJhaW4uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgQ0xBTVBfVE9fR1JPVU5EOiAxLFxuXG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpb24gaGVpZ2h0IGlzIHRoZSBoZWlnaHQgYWJvdmUgdGhlIHRlcnJhaW4uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgUkVMQVRJVkVfVE9fR1JPVU5EOiAyLFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoSGVpZ2h0UmVmZXJlbmNlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4260\n')},62919:function(__unused_webpack___webpack_module__,__webpack_exports__){eval("/**\n * The horizontal location of an origin relative to an object, e.g., a {@link Billboard}\n * or {@link Label}.  For example, setting the horizontal origin to <code>LEFT</code>\n * or <code>RIGHT</code> will display a billboard to the left or right (in screen space)\n * of the anchor position.\n * <br /><br />\n * <div align='center'>\n * <img src='Images/Billboard.setHorizontalOrigin.png' width='648' height='196' /><br />\n * </div>\n *\n * @enum {Number}\n *\n * @see Billboard#horizontalOrigin\n * @see Label#horizontalOrigin\n */\nvar HorizontalOrigin = {\n  /**\n   * The origin is at the horizontal center of the object.\n   *\n   * @type {Number}\n   * @constant\n   */\n  CENTER: 0,\n\n  /**\n   * The origin is on the left side of the object.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LEFT: 1,\n\n  /**\n   * The origin is on the right side of the object.\n   *\n   * @type {Number}\n   * @constant\n   */\n  RIGHT: -1,\n};\n/* harmony default export */ __webpack_exports__[\"Z\"] = (Object.freeze(HorizontalOrigin));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjI5MTkuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSx3RUFBd0U7QUFDeEUsT0FBTyxZQUFZO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsK0JBQStCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSG9yaXpvbnRhbE9yaWdpbi5qcz8yMWRhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhlIGhvcml6b250YWwgbG9jYXRpb24gb2YgYW4gb3JpZ2luIHJlbGF0aXZlIHRvIGFuIG9iamVjdCwgZS5nLiwgYSB7QGxpbmsgQmlsbGJvYXJkfVxuICogb3Ige0BsaW5rIExhYmVsfS4gIEZvciBleGFtcGxlLCBzZXR0aW5nIHRoZSBob3Jpem9udGFsIG9yaWdpbiB0byA8Y29kZT5MRUZUPC9jb2RlPlxuICogb3IgPGNvZGU+UklHSFQ8L2NvZGU+IHdpbGwgZGlzcGxheSBhIGJpbGxib2FyZCB0byB0aGUgbGVmdCBvciByaWdodCAoaW4gc2NyZWVuIHNwYWNlKVxuICogb2YgdGhlIGFuY2hvciBwb3NpdGlvbi5cbiAqIDxiciAvPjxiciAvPlxuICogPGRpdiBhbGlnbj0nY2VudGVyJz5cbiAqIDxpbWcgc3JjPSdJbWFnZXMvQmlsbGJvYXJkLnNldEhvcml6b250YWxPcmlnaW4ucG5nJyB3aWR0aD0nNjQ4JyBoZWlnaHQ9JzE5NicgLz48YnIgLz5cbiAqIDwvZGl2PlxuICpcbiAqIEBlbnVtIHtOdW1iZXJ9XG4gKlxuICogQHNlZSBCaWxsYm9hcmQjaG9yaXpvbnRhbE9yaWdpblxuICogQHNlZSBMYWJlbCNob3Jpem9udGFsT3JpZ2luXG4gKi9cbnZhciBIb3Jpem9udGFsT3JpZ2luID0ge1xuICAvKipcbiAgICogVGhlIG9yaWdpbiBpcyBhdCB0aGUgaG9yaXpvbnRhbCBjZW50ZXIgb2YgdGhlIG9iamVjdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBDRU5URVI6IDAsXG5cbiAgLyoqXG4gICAqIFRoZSBvcmlnaW4gaXMgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgb2JqZWN0LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIExFRlQ6IDEsXG5cbiAgLyoqXG4gICAqIFRoZSBvcmlnaW4gaXMgb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIG9iamVjdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBSSUdIVDogLTEsXG59O1xuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZShIb3Jpem9udGFsT3JpZ2luKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///62919\n")},53901:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86511);\n/* harmony import */ var _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73919);\n\n\n\n\n/**\n * Stores details about a tile of imagery.\n *\n * @alias Imagery\n * @private\n */\nfunction Imagery(imageryLayer, x, y, level, rectangle) {\n  this.imageryLayer = imageryLayer;\n  this.x = x;\n  this.y = y;\n  this.level = level;\n  this.request = undefined;\n\n  if (level !== 0) {\n    var parentX = (x / 2) | 0;\n    var parentY = (y / 2) | 0;\n    var parentLevel = level - 1;\n    this.parent = imageryLayer.getImageryFromCache(\n      parentX,\n      parentY,\n      parentLevel\n    );\n  }\n\n  this.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].UNLOADED */ .Z.UNLOADED;\n  this.imageUrl = undefined;\n  this.image = undefined;\n  this.texture = undefined;\n  this.textureWebMercator = undefined;\n  this.credits = undefined;\n  this.referenceCount = 0;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(rectangle) && imageryLayer.imageryProvider.ready) {\n    var tilingScheme = imageryLayer.imageryProvider.tilingScheme;\n    rectangle = tilingScheme.tileXYToRectangle(x, y, level);\n  }\n\n  this.rectangle = rectangle;\n}\nImagery.createPlaceholder = function (imageryLayer) {\n  var result = new Imagery(imageryLayer, 0, 0, 0);\n  result.addReference();\n  result.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].PLACEHOLDER */ .Z.PLACEHOLDER;\n  return result;\n};\n\nImagery.prototype.addReference = function () {\n  ++this.referenceCount;\n};\n\nImagery.prototype.releaseReference = function () {\n  --this.referenceCount;\n\n  if (this.referenceCount === 0) {\n    this.imageryLayer.removeImageryFromCache(this);\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this.parent)) {\n      this.parent.releaseReference();\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this.image) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this.image.destroy)) {\n      this.image.destroy();\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this.texture)) {\n      this.texture.destroy();\n    }\n\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this.textureWebMercator) &&\n      this.texture !== this.textureWebMercator\n    ) {\n      this.textureWebMercator.destroy();\n    }\n\n    (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this);\n\n    return 0;\n  }\n\n  return this.referenceCount;\n};\n\nImagery.prototype.processStateMachine = function (\n  frameState,\n  needGeographicProjection,\n  skipLoading\n) {\n  if (this.state === _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].UNLOADED */ .Z.UNLOADED && !skipLoading) {\n    this.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].TRANSITIONING */ .Z.TRANSITIONING;\n    this.imageryLayer._requestImagery(this);\n  }\n\n  if (this.state === _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].RECEIVED */ .Z.RECEIVED) {\n    this.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].TRANSITIONING */ .Z.TRANSITIONING;\n    this.imageryLayer._createTexture(frameState.context, this);\n  }\n\n  // If the imagery is already ready, but we need a geographic version and don\'t have it yet,\n  // we still need to do the reprojection step. This can happen if the Web Mercator version\n  // is fine initially, but the geographic one is needed later.\n  var needsReprojection =\n    this.state === _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].READY */ .Z.READY &&\n    needGeographicProjection &&\n    !this.texture;\n\n  if (this.state === _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].TEXTURE_LOADED */ .Z.TEXTURE_LOADED || needsReprojection) {\n    this.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].TRANSITIONING */ .Z.TRANSITIONING;\n    this.imageryLayer._reprojectTexture(\n      frameState,\n      this,\n      needGeographicProjection\n    );\n  }\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Imagery);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM5MDEuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQXlDO0FBQ1k7QUFDUjs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGVBQWUsbUZBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPLHFFQUFPO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIseUZBQXdCO0FBQ3pDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxRQUFRLHFFQUFPO0FBQ2Y7QUFDQTs7QUFFQSxRQUFRLHFFQUFPLGdCQUFnQixxRUFBTztBQUN0QztBQUNBOztBQUVBLFFBQVEscUVBQU87QUFDZjtBQUNBOztBQUVBO0FBQ0EsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksMkVBQWE7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1GQUFxQjtBQUMxQyxpQkFBaUIsNkZBQTBCO0FBQzNDO0FBQ0E7O0FBRUEscUJBQXFCLG1GQUFxQjtBQUMxQyxpQkFBaUIsNkZBQTBCO0FBQzNDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkVBQWtCO0FBQ3JDO0FBQ0E7O0FBRUEscUJBQXFCLCtGQUEyQjtBQUNoRCxpQkFBaUIsNkZBQTBCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0ltYWdlcnkuanM/MTM0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgSW1hZ2VyeVN0YXRlIGZyb20gXCIuL0ltYWdlcnlTdGF0ZS5qc1wiO1xuXG4vKipcbiAqIFN0b3JlcyBkZXRhaWxzIGFib3V0IGEgdGlsZSBvZiBpbWFnZXJ5LlxuICpcbiAqIEBhbGlhcyBJbWFnZXJ5XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBJbWFnZXJ5KGltYWdlcnlMYXllciwgeCwgeSwgbGV2ZWwsIHJlY3RhbmdsZSkge1xuICB0aGlzLmltYWdlcnlMYXllciA9IGltYWdlcnlMYXllcjtcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbiAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICB0aGlzLnJlcXVlc3QgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGxldmVsICE9PSAwKSB7XG4gICAgdmFyIHBhcmVudFggPSAoeCAvIDIpIHwgMDtcbiAgICB2YXIgcGFyZW50WSA9ICh5IC8gMikgfCAwO1xuICAgIHZhciBwYXJlbnRMZXZlbCA9IGxldmVsIC0gMTtcbiAgICB0aGlzLnBhcmVudCA9IGltYWdlcnlMYXllci5nZXRJbWFnZXJ5RnJvbUNhY2hlKFxuICAgICAgcGFyZW50WCxcbiAgICAgIHBhcmVudFksXG4gICAgICBwYXJlbnRMZXZlbFxuICAgICk7XG4gIH1cblxuICB0aGlzLnN0YXRlID0gSW1hZ2VyeVN0YXRlLlVOTE9BREVEO1xuICB0aGlzLmltYWdlVXJsID0gdW5kZWZpbmVkO1xuICB0aGlzLmltYWdlID0gdW5kZWZpbmVkO1xuICB0aGlzLnRleHR1cmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMudGV4dHVyZVdlYk1lcmNhdG9yID0gdW5kZWZpbmVkO1xuICB0aGlzLmNyZWRpdHMgPSB1bmRlZmluZWQ7XG4gIHRoaXMucmVmZXJlbmNlQ291bnQgPSAwO1xuXG4gIGlmICghZGVmaW5lZChyZWN0YW5nbGUpICYmIGltYWdlcnlMYXllci5pbWFnZXJ5UHJvdmlkZXIucmVhZHkpIHtcbiAgICB2YXIgdGlsaW5nU2NoZW1lID0gaW1hZ2VyeUxheWVyLmltYWdlcnlQcm92aWRlci50aWxpbmdTY2hlbWU7XG4gICAgcmVjdGFuZ2xlID0gdGlsaW5nU2NoZW1lLnRpbGVYWVRvUmVjdGFuZ2xlKHgsIHksIGxldmVsKTtcbiAgfVxuXG4gIHRoaXMucmVjdGFuZ2xlID0gcmVjdGFuZ2xlO1xufVxuSW1hZ2VyeS5jcmVhdGVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChpbWFnZXJ5TGF5ZXIpIHtcbiAgdmFyIHJlc3VsdCA9IG5ldyBJbWFnZXJ5KGltYWdlcnlMYXllciwgMCwgMCwgMCk7XG4gIHJlc3VsdC5hZGRSZWZlcmVuY2UoKTtcbiAgcmVzdWx0LnN0YXRlID0gSW1hZ2VyeVN0YXRlLlBMQUNFSE9MREVSO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuSW1hZ2VyeS5wcm90b3R5cGUuYWRkUmVmZXJlbmNlID0gZnVuY3Rpb24gKCkge1xuICArK3RoaXMucmVmZXJlbmNlQ291bnQ7XG59O1xuXG5JbWFnZXJ5LnByb3RvdHlwZS5yZWxlYXNlUmVmZXJlbmNlID0gZnVuY3Rpb24gKCkge1xuICAtLXRoaXMucmVmZXJlbmNlQ291bnQ7XG5cbiAgaWYgKHRoaXMucmVmZXJlbmNlQ291bnQgPT09IDApIHtcbiAgICB0aGlzLmltYWdlcnlMYXllci5yZW1vdmVJbWFnZXJ5RnJvbUNhY2hlKHRoaXMpO1xuXG4gICAgaWYgKGRlZmluZWQodGhpcy5wYXJlbnQpKSB7XG4gICAgICB0aGlzLnBhcmVudC5yZWxlYXNlUmVmZXJlbmNlKCk7XG4gICAgfVxuXG4gICAgaWYgKGRlZmluZWQodGhpcy5pbWFnZSkgJiYgZGVmaW5lZCh0aGlzLmltYWdlLmRlc3Ryb3kpKSB7XG4gICAgICB0aGlzLmltYWdlLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBpZiAoZGVmaW5lZCh0aGlzLnRleHR1cmUpKSB7XG4gICAgICB0aGlzLnRleHR1cmUuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRlZmluZWQodGhpcy50ZXh0dXJlV2ViTWVyY2F0b3IpICYmXG4gICAgICB0aGlzLnRleHR1cmUgIT09IHRoaXMudGV4dHVyZVdlYk1lcmNhdG9yXG4gICAgKSB7XG4gICAgICB0aGlzLnRleHR1cmVXZWJNZXJjYXRvci5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgZGVzdHJveU9iamVjdCh0aGlzKTtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMucmVmZXJlbmNlQ291bnQ7XG59O1xuXG5JbWFnZXJ5LnByb3RvdHlwZS5wcm9jZXNzU3RhdGVNYWNoaW5lID0gZnVuY3Rpb24gKFxuICBmcmFtZVN0YXRlLFxuICBuZWVkR2VvZ3JhcGhpY1Byb2plY3Rpb24sXG4gIHNraXBMb2FkaW5nXG4pIHtcbiAgaWYgKHRoaXMuc3RhdGUgPT09IEltYWdlcnlTdGF0ZS5VTkxPQURFRCAmJiAhc2tpcExvYWRpbmcpIHtcbiAgICB0aGlzLnN0YXRlID0gSW1hZ2VyeVN0YXRlLlRSQU5TSVRJT05JTkc7XG4gICAgdGhpcy5pbWFnZXJ5TGF5ZXIuX3JlcXVlc3RJbWFnZXJ5KHRoaXMpO1xuICB9XG5cbiAgaWYgKHRoaXMuc3RhdGUgPT09IEltYWdlcnlTdGF0ZS5SRUNFSVZFRCkge1xuICAgIHRoaXMuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuVFJBTlNJVElPTklORztcbiAgICB0aGlzLmltYWdlcnlMYXllci5fY3JlYXRlVGV4dHVyZShmcmFtZVN0YXRlLmNvbnRleHQsIHRoaXMpO1xuICB9XG5cbiAgLy8gSWYgdGhlIGltYWdlcnkgaXMgYWxyZWFkeSByZWFkeSwgYnV0IHdlIG5lZWQgYSBnZW9ncmFwaGljIHZlcnNpb24gYW5kIGRvbid0IGhhdmUgaXQgeWV0LFxuICAvLyB3ZSBzdGlsbCBuZWVkIHRvIGRvIHRoZSByZXByb2plY3Rpb24gc3RlcC4gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBXZWIgTWVyY2F0b3IgdmVyc2lvblxuICAvLyBpcyBmaW5lIGluaXRpYWxseSwgYnV0IHRoZSBnZW9ncmFwaGljIG9uZSBpcyBuZWVkZWQgbGF0ZXIuXG4gIHZhciBuZWVkc1JlcHJvamVjdGlvbiA9XG4gICAgdGhpcy5zdGF0ZSA9PT0gSW1hZ2VyeVN0YXRlLlJFQURZICYmXG4gICAgbmVlZEdlb2dyYXBoaWNQcm9qZWN0aW9uICYmXG4gICAgIXRoaXMudGV4dHVyZTtcblxuICBpZiAodGhpcy5zdGF0ZSA9PT0gSW1hZ2VyeVN0YXRlLlRFWFRVUkVfTE9BREVEIHx8IG5lZWRzUmVwcm9qZWN0aW9uKSB7XG4gICAgdGhpcy5zdGF0ZSA9IEltYWdlcnlTdGF0ZS5UUkFOU0lUSU9OSU5HO1xuICAgIHRoaXMuaW1hZ2VyeUxheWVyLl9yZXByb2plY3RUZXh0dXJlKFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIHRoaXMsXG4gICAgICBuZWVkR2VvZ3JhcGhpY1Byb2plY3Rpb25cbiAgICApO1xuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgSW1hZ2VyeTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///53901\n')},59379:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63367);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96037);\n/* harmony import */ var _Core_GeographicProjection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39756);\n/* harmony import */ var _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22832);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99417);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(38443);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(96190);\n/* harmony import */ var _Core_Request_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(22426);\n/* harmony import */ var _Core_RequestState_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(6224);\n/* harmony import */ var _Core_RequestType_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(82968);\n/* harmony import */ var _Core_TerrainProvider_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(1497);\n/* harmony import */ var _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(9121);\n/* harmony import */ var _Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(79962);\n/* harmony import */ var _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(99095);\n/* harmony import */ var _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(58597);\n/* harmony import */ var _Renderer_ComputeCommand_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(92357);\n/* harmony import */ var _Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(20521);\n/* harmony import */ var _Renderer_MipmapHint_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(45368);\n/* harmony import */ var _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(87721);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(53642);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(8743);\n/* harmony import */ var _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(42246);\n/* harmony import */ var _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(80188);\n/* harmony import */ var _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(88453);\n/* harmony import */ var _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(18192);\n/* harmony import */ var _Shaders_ReprojectWebMercatorFS_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(4443);\n/* harmony import */ var _Shaders_ReprojectWebMercatorVS_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(29560);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(13222);\n/* harmony import */ var _Imagery_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(53901);\n/* harmony import */ var _ImagerySplitDirection_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(80955);\n/* harmony import */ var _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(73919);\n/* harmony import */ var _TileImagery_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(70262);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * An imagery layer that displays tiled image data from a single imagery provider\n * on a {@link Globe}.\n *\n * @alias ImageryLayer\n * @constructor\n *\n * @param {ImageryProvider} imageryProvider The imagery provider to use.\n * @param {Object} [options] Object with the following properties:\n * @param {Rectangle} [options.rectangle=imageryProvider.rectangle] The rectangle of the layer.  This rectangle\n *        can limit the visible portion of the imagery provider.\n * @param {Number|Function} [options.alpha=1.0] The alpha blending value of this layer, from 0.0 to 1.0.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates of the\n *                          imagery tile for which the alpha is required, and it is expected to return\n *                          the alpha value to use for the tile.\n * @param {Number|Function} [options.nightAlpha=1.0] The alpha blending value of this layer on the night side of the globe, from 0.0 to 1.0.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates of the\n *                          imagery tile for which the alpha is required, and it is expected to return\n *                          the alpha value to use for the tile. This only takes effect when <code>enableLighting</code> is <code>true</code>.\n * @param {Number|Function} [options.dayAlpha=1.0] The alpha blending value of this layer on the day side of the globe, from 0.0 to 1.0.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates of the\n *                          imagery tile for which the alpha is required, and it is expected to return\n *                          the alpha value to use for the tile. This only takes effect when <code>enableLighting</code> is <code>true</code>.\n * @param {Number|Function} [options.brightness=1.0] The brightness of this layer.  1.0 uses the unmodified imagery\n *                          color.  Less than 1.0 makes the imagery darker while greater than 1.0 makes it brighter.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates of the\n *                          imagery tile for which the brightness is required, and it is expected to return\n *                          the brightness value to use for the tile.  The function is executed for every\n *                          frame and for every tile, so it must be fast.\n * @param {Number|Function} [options.contrast=1.0] The contrast of this layer.  1.0 uses the unmodified imagery color.\n *                          Less than 1.0 reduces the contrast while greater than 1.0 increases it.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates of the\n *                          imagery tile for which the contrast is required, and it is expected to return\n *                          the contrast value to use for the tile.  The function is executed for every\n *                          frame and for every tile, so it must be fast.\n * @param {Number|Function} [options.hue=0.0] The hue of this layer.  0.0 uses the unmodified imagery color.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates\n *                          of the imagery tile for which the hue is required, and it is expected to return\n *                          the contrast value to use for the tile.  The function is executed for every\n *                          frame and for every tile, so it must be fast.\n * @param {Number|Function} [options.saturation=1.0] The saturation of this layer.  1.0 uses the unmodified imagery color.\n *                          Less than 1.0 reduces the saturation while greater than 1.0 increases it.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates\n *                          of the imagery tile for which the saturation is required, and it is expected to return\n *                          the contrast value to use for the tile.  The function is executed for every\n *                          frame and for every tile, so it must be fast.\n * @param {Number|Function} [options.gamma=1.0] The gamma correction to apply to this layer.  1.0 uses the unmodified imagery color.\n *                          This can either be a simple number or a function with the signature\n *                          <code>function(frameState, layer, x, y, level)</code>.  The function is passed the\n *                          current frame state, this layer, and the x, y, and level coordinates of the\n *                          imagery tile for which the gamma is required, and it is expected to return\n *                          the gamma value to use for the tile.  The function is executed for every\n *                          frame and for every tile, so it must be fast.\n * @param {ImagerySplitDirection|Function} [options.splitDirection=ImagerySplitDirection.NONE] The {@link ImagerySplitDirection} split to apply to this layer.\n * @param {TextureMinificationFilter} [options.minificationFilter=TextureMinificationFilter.LINEAR] The\n *                                    texture minification filter to apply to this layer. Possible values\n *                                    are <code>TextureMinificationFilter.LINEAR</code> and\n *                                    <code>TextureMinificationFilter.NEAREST</code>.\n * @param {TextureMagnificationFilter} [options.magnificationFilter=TextureMagnificationFilter.LINEAR] The\n *                                     texture minification filter to apply to this layer. Possible values\n *                                     are <code>TextureMagnificationFilter.LINEAR</code> and\n *                                     <code>TextureMagnificationFilter.NEAREST</code>.\n * @param {Boolean} [options.show=true] True if the layer is shown; otherwise, false.\n * @param {Number} [options.maximumAnisotropy=maximum supported] The maximum anisotropy level to use\n *        for texture filtering.  If this parameter is not specified, the maximum anisotropy supported\n *        by the WebGL stack will be used.  Larger values make the imagery look better in horizon\n *        views.\n * @param {Number} [options.minimumTerrainLevel] The minimum terrain level-of-detail at which to show this imagery layer,\n *                 or undefined to show it at all levels.  Level zero is the least-detailed level.\n * @param {Number} [options.maximumTerrainLevel] The maximum terrain level-of-detail at which to show this imagery layer,\n *                 or undefined to show it at all levels.  Level zero is the least-detailed level.\n * @param {Rectangle} [options.cutoutRectangle] Cartographic rectangle for cutting out a portion of this ImageryLayer.\n * @param {Color} [options.colorToAlpha] Color to be used as alpha.\n * @param {Number} [options.colorToAlphaThreshold=0.004] Threshold for color-to-alpha.\n */\nfunction ImageryLayer(imageryProvider, options) {\n  this._imageryProvider = imageryProvider;\n\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  /**\n   * The alpha blending value of this layer, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number}\n   * @default 1.0\n   */\n  this.alpha = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.alpha,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(imageryProvider.defaultAlpha, 1.0)\n  );\n\n  /**\n   * The alpha blending value of this layer on the night side of the globe, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque. This only takes effect when {@link Globe#enableLighting} is <code>true</code>.\n   *\n   * @type {Number}\n   * @default 1.0\n   */\n  this.nightAlpha = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.nightAlpha,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(imageryProvider.defaultNightAlpha, 1.0)\n  );\n\n  /**\n   * The alpha blending value of this layer on the day side of the globe, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque. This only takes effect when {@link Globe#enableLighting} is <code>true</code>.\n   *\n   * @type {Number}\n   * @default 1.0\n   */\n  this.dayAlpha = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.dayAlpha,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(imageryProvider.defaultDayAlpha, 1.0)\n  );\n\n  /**\n   * The brightness of this layer.  1.0 uses the unmodified imagery color.  Less than 1.0\n   * makes the imagery darker while greater than 1.0 makes it brighter.\n   *\n   * @type {Number}\n   * @default {@link ImageryLayer.DEFAULT_BRIGHTNESS}\n   */\n  this.brightness = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.brightness,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n      imageryProvider.defaultBrightness,\n      ImageryLayer.DEFAULT_BRIGHTNESS\n    )\n  );\n\n  /**\n   * The contrast of this layer.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces\n   * the contrast while greater than 1.0 increases it.\n   *\n   * @type {Number}\n   * @default {@link ImageryLayer.DEFAULT_CONTRAST}\n   */\n  this.contrast = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.contrast,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(imageryProvider.defaultContrast, ImageryLayer.DEFAULT_CONTRAST)\n  );\n\n  /**\n   * The hue of this layer in radians. 0.0 uses the unmodified imagery color.\n   *\n   * @type {Number}\n   * @default {@link ImageryLayer.DEFAULT_HUE}\n   */\n  this.hue = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.hue,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(imageryProvider.defaultHue, ImageryLayer.DEFAULT_HUE)\n  );\n\n  /**\n   * The saturation of this layer. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the\n   * saturation while greater than 1.0 increases it.\n   *\n   * @type {Number}\n   * @default {@link ImageryLayer.DEFAULT_SATURATION}\n   */\n  this.saturation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.saturation,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n      imageryProvider.defaultSaturation,\n      ImageryLayer.DEFAULT_SATURATION\n    )\n  );\n\n  /**\n   * The gamma correction to apply to this layer.  1.0 uses the unmodified imagery color.\n   *\n   * @type {Number}\n   * @default {@link ImageryLayer.DEFAULT_GAMMA}\n   */\n  this.gamma = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.gamma,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(imageryProvider.defaultGamma, ImageryLayer.DEFAULT_GAMMA)\n  );\n\n  /**\n   * The {@link ImagerySplitDirection} to apply to this layer.\n   *\n   * @type {ImagerySplitDirection}\n   * @default {@link ImageryLayer.DEFAULT_SPLIT}\n   */\n  this.splitDirection = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.splitDirection,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(imageryProvider.defaultSplit, ImageryLayer.DEFAULT_SPLIT)\n  );\n\n  /**\n   * The {@link TextureMinificationFilter} to apply to this layer.\n   * Possible values are {@link TextureMinificationFilter.LINEAR} (the default)\n   * and {@link TextureMinificationFilter.NEAREST}.\n   *\n   * To take effect, this property must be set immediately after adding the imagery layer.\n   * Once a texture is loaded it won\'t be possible to change the texture filter used.\n   *\n   * @type {TextureMinificationFilter}\n   * @default {@link ImageryLayer.DEFAULT_MINIFICATION_FILTER}\n   */\n  this.minificationFilter = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.minificationFilter,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n      imageryProvider.defaultMinificationFilter,\n      ImageryLayer.DEFAULT_MINIFICATION_FILTER\n    )\n  );\n\n  /**\n   * The {@link TextureMagnificationFilter} to apply to this layer.\n   * Possible values are {@link TextureMagnificationFilter.LINEAR} (the default)\n   * and {@link TextureMagnificationFilter.NEAREST}.\n   *\n   * To take effect, this property must be set immediately after adding the imagery layer.\n   * Once a texture is loaded it won\'t be possible to change the texture filter used.\n   *\n   * @type {TextureMagnificationFilter}\n   * @default {@link ImageryLayer.DEFAULT_MAGNIFICATION_FILTER}\n   */\n  this.magnificationFilter = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.magnificationFilter,\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n      imageryProvider.defaultMagnificationFilter,\n      ImageryLayer.DEFAULT_MAGNIFICATION_FILTER\n    )\n  );\n\n  /**\n   * Determines if this layer is shown.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.show, true);\n\n  this._minimumTerrainLevel = options.minimumTerrainLevel;\n  this._maximumTerrainLevel = options.maximumTerrainLevel;\n\n  this._rectangle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.rectangle, _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].MAX_VALUE */ .Z.MAX_VALUE);\n  this._maximumAnisotropy = options.maximumAnisotropy;\n\n  this._imageryCache = {};\n\n  this._skeletonPlaceholder = new _TileImagery_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z(_Imagery_js__WEBPACK_IMPORTED_MODULE_31__/* ["default"].createPlaceholder */ .Z.createPlaceholder(this));\n\n  // The value of the show property on the last update.\n  this._show = true;\n\n  // The index of this layer in the ImageryLayerCollection.\n  this._layerIndex = -1;\n\n  // true if this is the base (lowest shown) layer.\n  this._isBaseLayer = false;\n\n  this._requestImageError = undefined;\n\n  this._reprojectComputeCommands = [];\n\n  /**\n   * Rectangle cutout in this layer of imagery.\n   *\n   * @type {Rectangle}\n   */\n  this.cutoutRectangle = options.cutoutRectangle;\n\n  /**\n   * Color value that should be set to transparent.\n   *\n   * @type {Color}\n   */\n  this.colorToAlpha = options.colorToAlpha;\n\n  /**\n   * Normalized (0-1) threshold for color-to-alpha.\n   *\n   * @type {Number}\n   */\n  this.colorToAlphaThreshold = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.colorToAlphaThreshold,\n    ImageryLayer.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD\n  );\n}\n\nObject.defineProperties(ImageryLayer.prototype, {\n  /**\n   * Gets the imagery provider for this layer.\n   * @memberof ImageryLayer.prototype\n   * @type {ImageryProvider}\n   * @readonly\n   */\n  imageryProvider: {\n    get: function () {\n      return this._imageryProvider;\n    },\n  },\n\n  /**\n   * Gets the rectangle of this layer.  If this rectangle is smaller than the rectangle of the\n   * {@link ImageryProvider}, only a portion of the imagery provider is shown.\n   * @memberof ImageryLayer.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      return this._rectangle;\n    },\n  },\n});\n\n/**\n * This value is used as the default brightness for the imagery layer if one is not provided during construction\n * or by the imagery provider. This value does not modify the brightness of the imagery.\n * @type {Number}\n * @default 1.0\n */\nImageryLayer.DEFAULT_BRIGHTNESS = 1.0;\n/**\n * This value is used as the default contrast for the imagery layer if one is not provided during construction\n * or by the imagery provider. This value does not modify the contrast of the imagery.\n * @type {Number}\n * @default 1.0\n */\nImageryLayer.DEFAULT_CONTRAST = 1.0;\n/**\n * This value is used as the default hue for the imagery layer if one is not provided during construction\n * or by the imagery provider. This value does not modify the hue of the imagery.\n * @type {Number}\n * @default 0.0\n */\nImageryLayer.DEFAULT_HUE = 0.0;\n/**\n * This value is used as the default saturation for the imagery layer if one is not provided during construction\n * or by the imagery provider. This value does not modify the saturation of the imagery.\n * @type {Number}\n * @default 1.0\n */\nImageryLayer.DEFAULT_SATURATION = 1.0;\n/**\n * This value is used as the default gamma for the imagery layer if one is not provided during construction\n * or by the imagery provider. This value does not modify the gamma of the imagery.\n * @type {Number}\n * @default 1.0\n */\nImageryLayer.DEFAULT_GAMMA = 1.0;\n\n/**\n * This value is used as the default split for the imagery layer if one is not provided during construction\n * or by the imagery provider.\n * @type {ImagerySplitDirection}\n * @default ImagerySplitDirection.NONE\n */\nImageryLayer.DEFAULT_SPLIT = _ImagerySplitDirection_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].NONE */ .Z.NONE;\n\n/**\n * This value is used as the default texture minification filter for the imagery layer if one is not provided\n * during construction or by the imagery provider.\n * @type {TextureMinificationFilter}\n * @default TextureMinificationFilter.LINEAR\n */\nImageryLayer.DEFAULT_MINIFICATION_FILTER = _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].LINEAR */ .Z.LINEAR;\n\n/**\n * This value is used as the default texture magnification filter for the imagery layer if one is not provided\n * during construction or by the imagery provider.\n * @type {TextureMagnificationFilter}\n * @default TextureMagnificationFilter.LINEAR\n */\nImageryLayer.DEFAULT_MAGNIFICATION_FILTER = _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].LINEAR */ .Z.LINEAR;\n\n/**\n * This value is used as the default threshold for color-to-alpha if one is not provided\n * during construction or by the imagery provider.\n * @type {Number}\n * @default 0.004\n */\nImageryLayer.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD = 0.004;\n\n/**\n * Gets a value indicating whether this layer is the base layer in the\n * {@link ImageryLayerCollection}.  The base layer is the one that underlies all\n * others.  It is special in that it is treated as if it has global rectangle, even if\n * it actually does not, by stretching the texels at the edges over the entire\n * globe.\n *\n * @returns {Boolean} true if this is the base layer; otherwise, false.\n */\nImageryLayer.prototype.isBaseLayer = function () {\n  return this._isBaseLayer;\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n *\n * @see ImageryLayer#destroy\n */\nImageryLayer.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * imageryLayer = imageryLayer && imageryLayer.destroy();\n *\n * @see ImageryLayer#isDestroyed\n */\nImageryLayer.prototype.destroy = function () {\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n\nvar imageryBoundsScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\nvar tileImageryBoundsScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\nvar clippedRectangleScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\nvar terrainRectangleScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\n\n/**\n * Computes the intersection of this layer\'s rectangle with the imagery provider\'s availability rectangle,\n * producing the overall bounds of imagery that can be produced by this layer.\n *\n * @returns {Promise.<Rectangle>} A promise to a rectangle which defines the overall bounds of imagery that can be produced by this layer.\n *\n * @example\n * // Zoom to an imagery layer.\n * imageryLayer.getViewableRectangle().then(function (rectangle) {\n *     return camera.flyTo({\n *         destination: rectangle\n *     });\n * });\n */\nImageryLayer.prototype.getViewableRectangle = function () {\n  var imageryProvider = this._imageryProvider;\n  var rectangle = this._rectangle;\n  return imageryProvider.readyPromise.then(function () {\n    return _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].intersection */ .Z.intersection(imageryProvider.rectangle, rectangle);\n  });\n};\n\n/**\n * Create skeletons for the imagery tiles that partially or completely overlap a given terrain\n * tile.\n *\n * @private\n *\n * @param {Tile} tile The terrain tile.\n * @param {TerrainProvider} terrainProvider The terrain provider associated with the terrain tile.\n * @param {Number} insertionPoint The position to insert new skeletons before in the tile\'s imagery list.\n * @returns {Boolean} true if this layer overlaps any portion of the terrain tile; otherwise, false.\n */\nImageryLayer.prototype._createTileImagerySkeletons = function (\n  tile,\n  terrainProvider,\n  insertionPoint\n) {\n  var surfaceTile = tile.data;\n\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(this._minimumTerrainLevel) &&\n    tile.level < this._minimumTerrainLevel\n  ) {\n    return false;\n  }\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(this._maximumTerrainLevel) &&\n    tile.level > this._maximumTerrainLevel\n  ) {\n    return false;\n  }\n\n  var imageryProvider = this._imageryProvider;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(insertionPoint)) {\n    insertionPoint = surfaceTile.imagery.length;\n  }\n\n  if (!imageryProvider.ready) {\n    // The imagery provider is not ready, so we can\'t create skeletons, yet.\n    // Instead, add a placeholder so that we\'ll know to create\n    // the skeletons once the provider is ready.\n    this._skeletonPlaceholder.loadingImagery.addReference();\n    surfaceTile.imagery.splice(insertionPoint, 0, this._skeletonPlaceholder);\n    return true;\n  }\n\n  // Use Web Mercator for our texture coordinate computations if this imagery layer uses\n  // that projection and the terrain tile falls entirely inside the valid bounds of the\n  // projection.\n  var useWebMercatorT =\n    imageryProvider.tilingScheme.projection instanceof _Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z &&\n    tile.rectangle.north < _Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].MaximumLatitude */ .Z.MaximumLatitude &&\n    tile.rectangle.south > -_Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].MaximumLatitude */ .Z.MaximumLatitude;\n\n  // Compute the rectangle of the imagery from this imageryProvider that overlaps\n  // the geometry tile.  The ImageryProvider and ImageryLayer both have the\n  // opportunity to constrain the rectangle.  The imagery TilingScheme\'s rectangle\n  // always fully contains the ImageryProvider\'s rectangle.\n  var imageryBounds = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].intersection */ .Z.intersection(\n    imageryProvider.rectangle,\n    this._rectangle,\n    imageryBoundsScratch\n  );\n  var rectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].intersection */ .Z.intersection(\n    tile.rectangle,\n    imageryBounds,\n    tileImageryBoundsScratch\n  );\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(rectangle)) {\n    // There is no overlap between this terrain tile and this imagery\n    // provider.  Unless this is the base layer, no skeletons need to be created.\n    // We stretch texels at the edge of the base layer over the entire globe.\n    if (!this.isBaseLayer()) {\n      return false;\n    }\n\n    var baseImageryRectangle = imageryBounds;\n    var baseTerrainRectangle = tile.rectangle;\n    rectangle = tileImageryBoundsScratch;\n\n    if (baseTerrainRectangle.south >= baseImageryRectangle.north) {\n      rectangle.north = rectangle.south = baseImageryRectangle.north;\n    } else if (baseTerrainRectangle.north <= baseImageryRectangle.south) {\n      rectangle.north = rectangle.south = baseImageryRectangle.south;\n    } else {\n      rectangle.south = Math.max(\n        baseTerrainRectangle.south,\n        baseImageryRectangle.south\n      );\n      rectangle.north = Math.min(\n        baseTerrainRectangle.north,\n        baseImageryRectangle.north\n      );\n    }\n\n    if (baseTerrainRectangle.west >= baseImageryRectangle.east) {\n      rectangle.west = rectangle.east = baseImageryRectangle.east;\n    } else if (baseTerrainRectangle.east <= baseImageryRectangle.west) {\n      rectangle.west = rectangle.east = baseImageryRectangle.west;\n    } else {\n      rectangle.west = Math.max(\n        baseTerrainRectangle.west,\n        baseImageryRectangle.west\n      );\n      rectangle.east = Math.min(\n        baseTerrainRectangle.east,\n        baseImageryRectangle.east\n      );\n    }\n  }\n\n  var latitudeClosestToEquator = 0.0;\n  if (rectangle.south > 0.0) {\n    latitudeClosestToEquator = rectangle.south;\n  } else if (rectangle.north < 0.0) {\n    latitudeClosestToEquator = rectangle.north;\n  }\n\n  // Compute the required level in the imagery tiling scheme.\n  // The errorRatio should really be imagerySSE / terrainSSE rather than this hard-coded value.\n  // But first we need configurable imagery SSE and we need the rendering to be able to handle more\n  // images attached to a terrain tile than there are available texture units.  So that\'s for the future.\n  var errorRatio = 1.0;\n  var targetGeometricError =\n    errorRatio * terrainProvider.getLevelMaximumGeometricError(tile.level);\n  var imageryLevel = getLevelWithMaximumTexelSpacing(\n    this,\n    targetGeometricError,\n    latitudeClosestToEquator\n  );\n  imageryLevel = Math.max(0, imageryLevel);\n  var maximumLevel = imageryProvider.maximumLevel;\n  if (imageryLevel > maximumLevel) {\n    imageryLevel = maximumLevel;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(imageryProvider.minimumLevel)) {\n    var minimumLevel = imageryProvider.minimumLevel;\n    if (imageryLevel < minimumLevel) {\n      imageryLevel = minimumLevel;\n    }\n  }\n\n  var imageryTilingScheme = imageryProvider.tilingScheme;\n  var northwestTileCoordinates = imageryTilingScheme.positionToTileXY(\n    _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].northwest */ .Z.northwest(rectangle),\n    imageryLevel\n  );\n  var southeastTileCoordinates = imageryTilingScheme.positionToTileXY(\n    _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].southeast */ .Z.southeast(rectangle),\n    imageryLevel\n  );\n\n  // If the southeast corner of the rectangle lies very close to the north or west side\n  // of the southeast tile, we don\'t actually need the southernmost or easternmost\n  // tiles.\n  // Similarly, if the northwest corner of the rectangle lies very close to the south or east side\n  // of the northwest tile, we don\'t actually need the northernmost or westernmost tiles.\n\n  // We define "very close" as being within 1/512 of the width of the tile.\n  var veryCloseX = tile.rectangle.width / 512.0;\n  var veryCloseY = tile.rectangle.height / 512.0;\n\n  var northwestTileRectangle = imageryTilingScheme.tileXYToRectangle(\n    northwestTileCoordinates.x,\n    northwestTileCoordinates.y,\n    imageryLevel\n  );\n  if (\n    Math.abs(northwestTileRectangle.south - tile.rectangle.north) <\n      veryCloseY &&\n    northwestTileCoordinates.y < southeastTileCoordinates.y\n  ) {\n    ++northwestTileCoordinates.y;\n  }\n  if (\n    Math.abs(northwestTileRectangle.east - tile.rectangle.west) < veryCloseX &&\n    northwestTileCoordinates.x < southeastTileCoordinates.x\n  ) {\n    ++northwestTileCoordinates.x;\n  }\n\n  var southeastTileRectangle = imageryTilingScheme.tileXYToRectangle(\n    southeastTileCoordinates.x,\n    southeastTileCoordinates.y,\n    imageryLevel\n  );\n  if (\n    Math.abs(southeastTileRectangle.north - tile.rectangle.south) <\n      veryCloseY &&\n    southeastTileCoordinates.y > northwestTileCoordinates.y\n  ) {\n    --southeastTileCoordinates.y;\n  }\n  if (\n    Math.abs(southeastTileRectangle.west - tile.rectangle.east) < veryCloseX &&\n    southeastTileCoordinates.x > northwestTileCoordinates.x\n  ) {\n    --southeastTileCoordinates.x;\n  }\n\n  // Create TileImagery instances for each imagery tile overlapping this terrain tile.\n  // We need to do all texture coordinate computations in the imagery tile\'s tiling scheme.\n\n  var terrainRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].clone */ .Z.clone(\n    tile.rectangle,\n    terrainRectangleScratch\n  );\n  var imageryRectangle = imageryTilingScheme.tileXYToRectangle(\n    northwestTileCoordinates.x,\n    northwestTileCoordinates.y,\n    imageryLevel\n  );\n  var clippedImageryRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].intersection */ .Z.intersection(\n    imageryRectangle,\n    imageryBounds,\n    clippedRectangleScratch\n  );\n\n  var imageryTileXYToRectangle;\n  if (useWebMercatorT) {\n    imageryTilingScheme.rectangleToNativeRectangle(\n      terrainRectangle,\n      terrainRectangle\n    );\n    imageryTilingScheme.rectangleToNativeRectangle(\n      imageryRectangle,\n      imageryRectangle\n    );\n    imageryTilingScheme.rectangleToNativeRectangle(\n      clippedImageryRectangle,\n      clippedImageryRectangle\n    );\n    imageryTilingScheme.rectangleToNativeRectangle(\n      imageryBounds,\n      imageryBounds\n    );\n    imageryTileXYToRectangle = imageryTilingScheme.tileXYToNativeRectangle.bind(\n      imageryTilingScheme\n    );\n    veryCloseX = terrainRectangle.width / 512.0;\n    veryCloseY = terrainRectangle.height / 512.0;\n  } else {\n    imageryTileXYToRectangle = imageryTilingScheme.tileXYToRectangle.bind(\n      imageryTilingScheme\n    );\n  }\n\n  var minU;\n  var maxU = 0.0;\n\n  var minV = 1.0;\n  var maxV;\n\n  // If this is the northern-most or western-most tile in the imagery tiling scheme,\n  // it may not start at the northern or western edge of the terrain tile.\n  // Calculate where it does start.\n  if (\n    !this.isBaseLayer() &&\n    Math.abs(clippedImageryRectangle.west - terrainRectangle.west) >= veryCloseX\n  ) {\n    maxU = Math.min(\n      1.0,\n      (clippedImageryRectangle.west - terrainRectangle.west) /\n        terrainRectangle.width\n    );\n  }\n\n  if (\n    !this.isBaseLayer() &&\n    Math.abs(clippedImageryRectangle.north - terrainRectangle.north) >=\n      veryCloseY\n  ) {\n    minV = Math.max(\n      0.0,\n      (clippedImageryRectangle.north - terrainRectangle.south) /\n        terrainRectangle.height\n    );\n  }\n\n  var initialMinV = minV;\n\n  for (\n    var i = northwestTileCoordinates.x;\n    i <= southeastTileCoordinates.x;\n    i++\n  ) {\n    minU = maxU;\n\n    imageryRectangle = imageryTileXYToRectangle(\n      i,\n      northwestTileCoordinates.y,\n      imageryLevel\n    );\n    clippedImageryRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].simpleIntersection */ .Z.simpleIntersection(\n      imageryRectangle,\n      imageryBounds,\n      clippedRectangleScratch\n    );\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(clippedImageryRectangle)) {\n      continue;\n    }\n\n    maxU = Math.min(\n      1.0,\n      (clippedImageryRectangle.east - terrainRectangle.west) /\n        terrainRectangle.width\n    );\n\n    // If this is the eastern-most imagery tile mapped to this terrain tile,\n    // and there are more imagery tiles to the east of this one, the maxU\n    // should be 1.0 to make sure rounding errors don\'t make the last\n    // image fall shy of the edge of the terrain tile.\n    if (\n      i === southeastTileCoordinates.x &&\n      (this.isBaseLayer() ||\n        Math.abs(clippedImageryRectangle.east - terrainRectangle.east) <\n          veryCloseX)\n    ) {\n      maxU = 1.0;\n    }\n\n    minV = initialMinV;\n\n    for (\n      var j = northwestTileCoordinates.y;\n      j <= southeastTileCoordinates.y;\n      j++\n    ) {\n      maxV = minV;\n\n      imageryRectangle = imageryTileXYToRectangle(i, j, imageryLevel);\n      clippedImageryRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].simpleIntersection */ .Z.simpleIntersection(\n        imageryRectangle,\n        imageryBounds,\n        clippedRectangleScratch\n      );\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(clippedImageryRectangle)) {\n        continue;\n      }\n\n      minV = Math.max(\n        0.0,\n        (clippedImageryRectangle.south - terrainRectangle.south) /\n          terrainRectangle.height\n      );\n\n      // If this is the southern-most imagery tile mapped to this terrain tile,\n      // and there are more imagery tiles to the south of this one, the minV\n      // should be 0.0 to make sure rounding errors don\'t make the last\n      // image fall shy of the edge of the terrain tile.\n      if (\n        j === southeastTileCoordinates.y &&\n        (this.isBaseLayer() ||\n          Math.abs(clippedImageryRectangle.south - terrainRectangle.south) <\n            veryCloseY)\n      ) {\n        minV = 0.0;\n      }\n\n      var texCoordsRectangle = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(minU, minV, maxU, maxV);\n      var imagery = this.getImageryFromCache(i, j, imageryLevel);\n      surfaceTile.imagery.splice(\n        insertionPoint,\n        0,\n        new _TileImagery_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z(imagery, texCoordsRectangle, useWebMercatorT)\n      );\n      ++insertionPoint;\n    }\n  }\n\n  return true;\n};\n\n/**\n * Calculate the translation and scale for a particular {@link TileImagery} attached to a\n * particular terrain tile.\n *\n * @private\n *\n * @param {Tile} tile The terrain tile.\n * @param {TileImagery} tileImagery The imagery tile mapping.\n * @returns {Cartesian4} The translation and scale where X and Y are the translation and Z and W\n *          are the scale.\n */\nImageryLayer.prototype._calculateTextureTranslationAndScale = function (\n  tile,\n  tileImagery\n) {\n  var imageryRectangle = tileImagery.readyImagery.rectangle;\n  var terrainRectangle = tile.rectangle;\n\n  if (tileImagery.useWebMercatorT) {\n    var tilingScheme =\n      tileImagery.readyImagery.imageryLayer.imageryProvider.tilingScheme;\n    imageryRectangle = tilingScheme.rectangleToNativeRectangle(\n      imageryRectangle,\n      imageryBoundsScratch\n    );\n    terrainRectangle = tilingScheme.rectangleToNativeRectangle(\n      terrainRectangle,\n      terrainRectangleScratch\n    );\n  }\n\n  var terrainWidth = terrainRectangle.width;\n  var terrainHeight = terrainRectangle.height;\n\n  var scaleX = terrainWidth / imageryRectangle.width;\n  var scaleY = terrainHeight / imageryRectangle.height;\n  return new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(\n    (scaleX * (terrainRectangle.west - imageryRectangle.west)) / terrainWidth,\n    (scaleY * (terrainRectangle.south - imageryRectangle.south)) /\n      terrainHeight,\n    scaleX,\n    scaleY\n  );\n};\n\n/**\n * Request a particular piece of imagery from the imagery provider.  This method handles raising an\n * error event if the request fails, and retrying the request if necessary.\n *\n * @private\n *\n * @param {Imagery} imagery The imagery to request.\n */\nImageryLayer.prototype._requestImagery = function (imagery) {\n  var imageryProvider = this._imageryProvider;\n\n  var that = this;\n\n  function success(image) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(image)) {\n      return failure();\n    }\n\n    imagery.image = image;\n    imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].RECEIVED */ .Z.RECEIVED;\n    imagery.request = undefined;\n\n    _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].handleSuccess */ .Z.handleSuccess(that._requestImageError);\n  }\n\n  function failure(e) {\n    if (imagery.request.state === _Core_RequestState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].CANCELLED */ .Z.CANCELLED) {\n      // Cancelled due to low priority - try again later.\n      imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].UNLOADED */ .Z.UNLOADED;\n      imagery.request = undefined;\n      return;\n    }\n\n    // Initially assume failure.  handleError may retry, in which case the state will\n    // change to TRANSITIONING.\n    imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].FAILED */ .Z.FAILED;\n    imagery.request = undefined;\n\n    var message =\n      "Failed to obtain image tile X: " +\n      imagery.x +\n      " Y: " +\n      imagery.y +\n      " Level: " +\n      imagery.level +\n      ".";\n    that._requestImageError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].handleError */ .Z.handleError(\n      that._requestImageError,\n      imageryProvider,\n      imageryProvider.errorEvent,\n      message,\n      imagery.x,\n      imagery.y,\n      imagery.level,\n      doRequest,\n      e\n    );\n  }\n\n  function doRequest() {\n    var request = new _Core_Request_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n      throttle: false,\n      throttleByServer: true,\n      type: _Core_RequestType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].IMAGERY */ .Z.IMAGERY,\n    });\n    imagery.request = request;\n    imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].TRANSITIONING */ .Z.TRANSITIONING;\n    var imagePromise = imageryProvider.requestImage(\n      imagery.x,\n      imagery.y,\n      imagery.level,\n      request\n    );\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(imagePromise)) {\n      // Too many parallel requests, so postpone loading tile.\n      imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].UNLOADED */ .Z.UNLOADED;\n      imagery.request = undefined;\n      return;\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(imageryProvider.getTileCredits)) {\n      imagery.credits = imageryProvider.getTileCredits(\n        imagery.x,\n        imagery.y,\n        imagery.level\n      );\n    }\n\n    (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(imagePromise, success, failure);\n  }\n\n  doRequest();\n};\n\nImageryLayer.prototype._createTextureWebGL = function (context, imagery) {\n  var sampler = new _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z({\n    minificationFilter: this.minificationFilter,\n    magnificationFilter: this.magnificationFilter,\n  });\n\n  var image = imagery.image;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(image.internalFormat)) {\n    return new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z({\n      context: context,\n      pixelFormat: image.internalFormat,\n      width: image.width,\n      height: image.height,\n      source: {\n        arrayBufferView: image.bufferView,\n      },\n      sampler: sampler,\n    });\n  }\n  return new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z({\n    context: context,\n    source: image,\n    pixelFormat: this._imageryProvider.hasAlphaChannel\n      ? _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].RGBA */ .Z.RGBA\n      : _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].RGB */ .Z.RGB,\n    sampler: sampler,\n  });\n};\n\n/**\n * Create a WebGL texture for a given {@link Imagery} instance.\n *\n * @private\n *\n * @param {Context} context The rendered context to use to create textures.\n * @param {Imagery} imagery The imagery for which to create a texture.\n */\nImageryLayer.prototype._createTexture = function (context, imagery) {\n  var imageryProvider = this._imageryProvider;\n  var image = imagery.image;\n\n  // If this imagery provider has a discard policy, use it to check if this\n  // image should be discarded.\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(imageryProvider.tileDiscardPolicy)) {\n    var discardPolicy = imageryProvider.tileDiscardPolicy;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(discardPolicy)) {\n      // If the discard policy is not ready yet, transition back to the\n      // RECEIVED state and we\'ll try again next time.\n      if (!discardPolicy.isReady()) {\n        imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].RECEIVED */ .Z.RECEIVED;\n        return;\n      }\n\n      // Mark discarded imagery tiles invalid.  Parent imagery will be used instead.\n      if (discardPolicy.shouldDiscardImage(image)) {\n        imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].INVALID */ .Z.INVALID;\n        return;\n      }\n    }\n  }\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (\n    this.minificationFilter !== _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].NEAREST */ .Z.NEAREST &&\n    this.minificationFilter !== _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].LINEAR */ .Z.LINEAR\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "ImageryLayer minification filter must be NEAREST or LINEAR"\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  // Imagery does not need to be discarded, so upload it to WebGL.\n  var texture = this._createTextureWebGL(context, imagery);\n\n  if (\n    imageryProvider.tilingScheme.projection instanceof _Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z\n  ) {\n    imagery.textureWebMercator = texture;\n  } else {\n    imagery.texture = texture;\n  }\n  imagery.image = undefined;\n  imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].TEXTURE_LOADED */ .Z.TEXTURE_LOADED;\n};\n\nfunction getSamplerKey(\n  minificationFilter,\n  magnificationFilter,\n  maximumAnisotropy\n) {\n  return (\n    minificationFilter + ":" + magnificationFilter + ":" + maximumAnisotropy\n  );\n}\n\nImageryLayer.prototype._finalizeReprojectTexture = function (context, texture) {\n  var minificationFilter = this.minificationFilter;\n  var magnificationFilter = this.magnificationFilter;\n  var usesLinearTextureFilter =\n    minificationFilter === _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].LINEAR */ .Z.LINEAR &&\n    magnificationFilter === _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].LINEAR */ .Z.LINEAR;\n  // Use mipmaps if this texture has power-of-two dimensions.\n  // In addition, mipmaps are only generated if the texture filters are both LINEAR.\n  if (\n    usesLinearTextureFilter &&\n    !_Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].isCompressedFormat */ .Z.isCompressedFormat(texture.pixelFormat) &&\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].isPowerOfTwo */ .Z.isPowerOfTwo(texture.width) &&\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].isPowerOfTwo */ .Z.isPowerOfTwo(texture.height)\n  ) {\n    minificationFilter = _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].LINEAR_MIPMAP_LINEAR */ .Z.LINEAR_MIPMAP_LINEAR;\n    var maximumSupportedAnisotropy =\n      _Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].maximumTextureFilterAnisotropy */ .Z.maximumTextureFilterAnisotropy;\n    var maximumAnisotropy = Math.min(\n      maximumSupportedAnisotropy,\n      (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this._maximumAnisotropy, maximumSupportedAnisotropy)\n    );\n    var mipmapSamplerKey = getSamplerKey(\n      minificationFilter,\n      magnificationFilter,\n      maximumAnisotropy\n    );\n    var mipmapSamplers = context.cache.imageryLayerMipmapSamplers;\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(mipmapSamplers)) {\n      mipmapSamplers = {};\n      context.cache.imageryLayerMipmapSamplers = mipmapSamplers;\n    }\n    var mipmapSampler = mipmapSamplers[mipmapSamplerKey];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(mipmapSampler)) {\n      mipmapSampler = mipmapSamplers[mipmapSamplerKey] = new _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z({\n        wrapS: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n        wrapT: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n        minificationFilter: minificationFilter,\n        magnificationFilter: magnificationFilter,\n        maximumAnisotropy: maximumAnisotropy,\n      });\n    }\n    texture.generateMipmap(_Renderer_MipmapHint_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].NICEST */ .Z.NICEST);\n    texture.sampler = mipmapSampler;\n  } else {\n    var nonMipmapSamplerKey = getSamplerKey(\n      minificationFilter,\n      magnificationFilter,\n      0\n    );\n    var nonMipmapSamplers = context.cache.imageryLayerNonMipmapSamplers;\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(nonMipmapSamplers)) {\n      nonMipmapSamplers = {};\n      context.cache.imageryLayerNonMipmapSamplers = nonMipmapSamplers;\n    }\n    var nonMipmapSampler = nonMipmapSamplers[nonMipmapSamplerKey];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(nonMipmapSampler)) {\n      nonMipmapSampler = nonMipmapSamplers[nonMipmapSamplerKey] = new _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z({\n        wrapS: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n        wrapT: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n        minificationFilter: minificationFilter,\n        magnificationFilter: magnificationFilter,\n      });\n    }\n    texture.sampler = nonMipmapSampler;\n  }\n};\n\n/**\n * Enqueues a command re-projecting a texture to a {@link GeographicProjection} on the next update, if necessary, and generate\n * mipmaps for the geographic texture.\n *\n * @private\n *\n * @param {FrameState} frameState The frameState.\n * @param {Imagery} imagery The imagery instance to reproject.\n * @param {Boolean} [needGeographicProjection=true] True to reproject to geographic, or false if Web Mercator is fine.\n */\nImageryLayer.prototype._reprojectTexture = function (\n  frameState,\n  imagery,\n  needGeographicProjection\n) {\n  var texture = imagery.textureWebMercator || imagery.texture;\n  var rectangle = imagery.rectangle;\n  var context = frameState.context;\n\n  needGeographicProjection = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(needGeographicProjection, true);\n\n  // Reproject this texture if it is not already in a geographic projection and\n  // the pixels are more than 1e-5 radians apart.  The pixel spacing cutoff\n  // avoids precision problems in the reprojection transformation while making\n  // no noticeable difference in the georeferencing of the image.\n  if (\n    needGeographicProjection &&\n    !(\n      this._imageryProvider.tilingScheme.projection instanceof\n      _Core_GeographicProjection_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z\n    ) &&\n    rectangle.width / texture.width > 1e-5\n  ) {\n    var that = this;\n    imagery.addReference();\n    var computeCommand = new _Renderer_ComputeCommand_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z({\n      persists: true,\n      owner: this,\n      // Update render resources right before execution instead of now.\n      // This allows different ImageryLayers to share the same vao and buffers.\n      preExecute: function (command) {\n        reprojectToGeographic(command, context, texture, imagery.rectangle);\n      },\n      postExecute: function (outputTexture) {\n        imagery.texture = outputTexture;\n        that._finalizeReprojectTexture(context, outputTexture);\n        imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].READY */ .Z.READY;\n        imagery.releaseReference();\n      },\n      canceled: function () {\n        imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].TEXTURE_LOADED */ .Z.TEXTURE_LOADED;\n        imagery.releaseReference();\n      },\n    });\n    this._reprojectComputeCommands.push(computeCommand);\n  } else {\n    if (needGeographicProjection) {\n      imagery.texture = texture;\n    }\n    this._finalizeReprojectTexture(context, texture);\n    imagery.state = _ImageryState_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].READY */ .Z.READY;\n  }\n};\n\n/**\n * Updates frame state to execute any queued texture re-projections.\n *\n * @private\n *\n * @param {FrameState} frameState The frameState.\n */\nImageryLayer.prototype.queueReprojectionCommands = function (frameState) {\n  var computeCommands = this._reprojectComputeCommands;\n  var length = computeCommands.length;\n  for (var i = 0; i < length; ++i) {\n    frameState.commandList.push(computeCommands[i]);\n  }\n  computeCommands.length = 0;\n};\n\n/**\n * Cancels re-projection commands queued for the next frame.\n *\n * @private\n */\nImageryLayer.prototype.cancelReprojections = function () {\n  this._reprojectComputeCommands.forEach(function (command) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(command.canceled)) {\n      command.canceled();\n    }\n  });\n  this._reprojectComputeCommands.length = 0;\n};\n\nImageryLayer.prototype.getImageryFromCache = function (\n  x,\n  y,\n  level,\n  imageryRectangle\n) {\n  var cacheKey = getImageryCacheKey(x, y, level);\n  var imagery = this._imageryCache[cacheKey];\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(imagery)) {\n    imagery = new _Imagery_js__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z(this, x, y, level, imageryRectangle);\n    this._imageryCache[cacheKey] = imagery;\n  }\n\n  imagery.addReference();\n  return imagery;\n};\n\nImageryLayer.prototype.removeImageryFromCache = function (imagery) {\n  var cacheKey = getImageryCacheKey(imagery.x, imagery.y, imagery.level);\n  delete this._imageryCache[cacheKey];\n};\n\nfunction getImageryCacheKey(x, y, level) {\n  return JSON.stringify([x, y, level]);\n}\n\nvar uniformMap = {\n  u_textureDimensions: function () {\n    return this.textureDimensions;\n  },\n  u_texture: function () {\n    return this.texture;\n  },\n\n  textureDimensions: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n  texture: undefined,\n};\n\nvar float32ArrayScratch = _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].supportsTypedArrays */ .Z.supportsTypedArrays()\n  ? new Float32Array(2 * 64)\n  : undefined;\n\nfunction reprojectToGeographic(command, context, texture, rectangle) {\n  // This function has gone through a number of iterations, because GPUs are awesome.\n  //\n  // Originally, we had a very simple vertex shader and computed the Web Mercator texture coordinates\n  // per-fragment in the fragment shader.  That worked well, except on mobile devices, because\n  // fragment shaders have limited precision on many mobile devices.  The result was smearing artifacts\n  // at medium zoom levels because different geographic texture coordinates would be reprojected to Web\n  // Mercator as the same value.\n  //\n  // Our solution was to reproject to Web Mercator in the vertex shader instead of the fragment shader.\n  // This required far more vertex data.  With fragment shader reprojection, we only needed a single quad.\n  // But to achieve the same precision with vertex shader reprojection, we needed a vertex for each\n  // output pixel.  So we used a grid of 256x256 vertices, because most of our imagery\n  // tiles are 256x256.  Fortunately the grid could be created and uploaded to the GPU just once and\n  // re-used for all reprojections, so the performance was virtually unchanged from our original fragment\n  // shader approach.  See https://github.com/CesiumGS/cesium/pull/714.\n  //\n  // Over a year later, we noticed (https://github.com/CesiumGS/cesium/issues/2110)\n  // that our reprojection code was creating a rare but severe artifact on some GPUs (Intel HD 4600\n  // for one).  The problem was that the GLSL sin function on these GPUs had a discontinuity at fine scales in\n  // a few places.\n  //\n  // We solved this by implementing a more reliable sin function based on the CORDIC algorithm\n  // (https://github.com/CesiumGS/cesium/pull/2111).  Even though this was a fair\n  // amount of code to be executing per vertex, the performance seemed to be pretty good on most GPUs.\n  // Unfortunately, on some GPUs, the performance was absolutely terrible\n  // (https://github.com/CesiumGS/cesium/issues/2258).\n  //\n  // So that brings us to our current solution, the one you see here.  Effectively, we compute the Web\n  // Mercator texture coordinates on the CPU and store the T coordinate with each vertex (the S coordinate\n  // is the same in Geographic and Web Mercator).  To make this faster, we reduced our reprojection mesh\n  // to be only 2 vertices wide and 64 vertices high.  We should have reduced the width to 2 sooner,\n  // because the extra vertices weren\'t buying us anything.  The height of 64 means we are technically\n  // doing a slightly less accurate reprojection than we were before, but we can\'t see the difference\n  // so it\'s worth the 4x speedup.\n\n  var reproject = context.cache.imageryLayer_reproject;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(reproject)) {\n    reproject = context.cache.imageryLayer_reproject = {\n      vertexArray: undefined,\n      shaderProgram: undefined,\n      sampler: undefined,\n      destroy: function () {\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(this.framebuffer)) {\n          this.framebuffer.destroy();\n        }\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(this.vertexArray)) {\n          this.vertexArray.destroy();\n        }\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z)(this.shaderProgram)) {\n          this.shaderProgram.destroy();\n        }\n      },\n    };\n\n    var positions = new Float32Array(2 * 64 * 2);\n    var index = 0;\n    for (var j = 0; j < 64; ++j) {\n      var y = j / 63.0;\n      positions[index++] = 0.0;\n      positions[index++] = y;\n      positions[index++] = 1.0;\n      positions[index++] = y;\n    }\n\n    var reprojectAttributeIndices = {\n      position: 0,\n      webMercatorT: 1,\n    };\n\n    var indices = _Core_TerrainProvider_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].getRegularGridIndices */ .Z.getRegularGridIndices(2, 64);\n    var indexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].createIndexBuffer */ .Z.createIndexBuffer({\n      context: context,\n      typedArray: indices,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n      indexDatatype: _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n    });\n\n    reproject.vertexArray = new _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z({\n      context: context,\n      attributes: [\n        {\n          index: reprojectAttributeIndices.position,\n          vertexBuffer: _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n            context: context,\n            typedArray: positions,\n            usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n          }),\n          componentsPerAttribute: 2,\n        },\n        {\n          index: reprojectAttributeIndices.webMercatorT,\n          vertexBuffer: _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n            context: context,\n            sizeInBytes: 64 * 2 * 4,\n            usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].STREAM_DRAW */ .Z.STREAM_DRAW,\n          }),\n          componentsPerAttribute: 1,\n        },\n      ],\n      indexBuffer: indexBuffer,\n    });\n\n    var vs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z({\n      sources: [_Shaders_ReprojectWebMercatorVS_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z],\n    });\n\n    reproject.shaderProgram = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].fromCache */ .Z.fromCache({\n      context: context,\n      vertexShaderSource: vs,\n      fragmentShaderSource: _Shaders_ReprojectWebMercatorFS_js__WEBPACK_IMPORTED_MODULE_37__/* ["default"] */ .Z,\n      attributeLocations: reprojectAttributeIndices,\n    });\n\n    reproject.sampler = new _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z({\n      wrapS: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n      wrapT: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].CLAMP_TO_EDGE */ .Z.CLAMP_TO_EDGE,\n      minificationFilter: _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].LINEAR */ .Z.LINEAR,\n      magnificationFilter: _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].LINEAR */ .Z.LINEAR,\n    });\n  }\n\n  texture.sampler = reproject.sampler;\n\n  var width = texture.width;\n  var height = texture.height;\n\n  uniformMap.textureDimensions.x = width;\n  uniformMap.textureDimensions.y = height;\n  uniformMap.texture = texture;\n\n  var sinLatitude = Math.sin(rectangle.south);\n  var southMercatorY = 0.5 * Math.log((1 + sinLatitude) / (1 - sinLatitude));\n\n  sinLatitude = Math.sin(rectangle.north);\n  var northMercatorY = 0.5 * Math.log((1 + sinLatitude) / (1 - sinLatitude));\n  var oneOverMercatorHeight = 1.0 / (northMercatorY - southMercatorY);\n\n  var outputTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z({\n    context: context,\n    width: width,\n    height: height,\n    pixelFormat: texture.pixelFormat,\n    pixelDatatype: texture.pixelDatatype,\n    preMultiplyAlpha: texture.preMultiplyAlpha,\n  });\n\n  // Allocate memory for the mipmaps.  Failure to do this before rendering\n  // to the texture via the FBO, and calling generateMipmap later,\n  // will result in the texture appearing blank.  I can\'t pretend to\n  // understand exactly why this is.\n  if (_Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].isPowerOfTwo */ .Z.isPowerOfTwo(width) && _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].isPowerOfTwo */ .Z.isPowerOfTwo(height)) {\n    outputTexture.generateMipmap(_Renderer_MipmapHint_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].NICEST */ .Z.NICEST);\n  }\n\n  var south = rectangle.south;\n  var north = rectangle.north;\n\n  var webMercatorT = float32ArrayScratch;\n\n  var outputIndex = 0;\n  for (var webMercatorTIndex = 0; webMercatorTIndex < 64; ++webMercatorTIndex) {\n    var fraction = webMercatorTIndex / 63.0;\n    var latitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].lerp */ .Z.lerp(south, north, fraction);\n    sinLatitude = Math.sin(latitude);\n    var mercatorY = 0.5 * Math.log((1.0 + sinLatitude) / (1.0 - sinLatitude));\n    var mercatorFraction = (mercatorY - southMercatorY) * oneOverMercatorHeight;\n    webMercatorT[outputIndex++] = mercatorFraction;\n    webMercatorT[outputIndex++] = mercatorFraction;\n  }\n\n  reproject.vertexArray\n    .getAttribute(1)\n    .vertexBuffer.copyFromArrayView(webMercatorT);\n\n  command.shaderProgram = reproject.shaderProgram;\n  command.outputTexture = outputTexture;\n  command.uniformMap = uniformMap;\n  command.vertexArray = reproject.vertexArray;\n}\n\n/**\n * Gets the level with the specified world coordinate spacing between texels, or less.\n *\n * @param {ImageryLayer} layer The imagery layer to use.\n * @param {Number} texelSpacing The texel spacing for which to find a corresponding level.\n * @param {Number} latitudeClosestToEquator The latitude closest to the equator that we\'re concerned with.\n * @returns {Number} The level with the specified texel spacing or less.\n * @private\n */\nfunction getLevelWithMaximumTexelSpacing(\n  layer,\n  texelSpacing,\n  latitudeClosestToEquator\n) {\n  // PERFORMANCE_IDEA: factor out the stuff that doesn\'t change.\n  var imageryProvider = layer._imageryProvider;\n  var tilingScheme = imageryProvider.tilingScheme;\n  var ellipsoid = tilingScheme.ellipsoid;\n  var latitudeFactor = !(\n    layer._imageryProvider.tilingScheme.projection instanceof\n    _Core_GeographicProjection_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z\n  )\n    ? Math.cos(latitudeClosestToEquator)\n    : 1.0;\n  var tilingSchemeRectangle = tilingScheme.rectangle;\n  var levelZeroMaximumTexelSpacing =\n    (ellipsoid.maximumRadius * tilingSchemeRectangle.width * latitudeFactor) /\n    (imageryProvider.tileWidth * tilingScheme.getNumberOfXTilesAtLevel(0));\n\n  var twoToTheLevelPower = levelZeroMaximumTexelSpacing / texelSpacing;\n  var level = Math.log(twoToTheLevelPower) / Math.log(2);\n  var rounded = Math.round(level);\n  return rounded | 0;\n}\n/* harmony default export */ __webpack_exports__["Z"] = (ImageryLayer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxzRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUksd0ZBQW1CO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLElBQUksd0ZBQW1CO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHlCQUF5QixnRkFBZTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDhGQUFzQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDBHQUE0QjtBQUMxRDtB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OztBQUVBO0FBQ0E7QUFDQTs7QUFFQSwwQkFBMEIsc0VBQU87QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0ZBQXVCLFdBQVcsd0ZBQXVCO0FBQy9ELGlDQUFpQyx1RkFBaUI7QUFDbEQ7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGtDQUFrQyx3QkFBd0I7QUFDMUQ7QUFDQSxtQkFBbUIsd0VBQWU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsY0FBYztBQUN6QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksOEVBQW9CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxZQUFZLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSW1hZ2VyeUxheWVyLmpzPzdjZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjQgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuNC5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEZlYXR1cmVEZXRlY3Rpb24gZnJvbSBcIi4uL0NvcmUvRmVhdHVyZURldGVjdGlvbi5qc1wiO1xuaW1wb3J0IEdlb2dyYXBoaWNQcm9qZWN0aW9uIGZyb20gXCIuLi9Db3JlL0dlb2dyYXBoaWNQcm9qZWN0aW9uLmpzXCI7XG5pbXBvcnQgSW5kZXhEYXRhdHlwZSBmcm9tIFwiLi4vQ29yZS9JbmRleERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi4vQ29yZS9NYXRoLmpzXCI7XG5pbXBvcnQgUGl4ZWxGb3JtYXQgZnJvbSBcIi4uL0NvcmUvUGl4ZWxGb3JtYXQuanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgUmVxdWVzdCBmcm9tIFwiLi4vQ29yZS9SZXF1ZXN0LmpzXCI7XG5pbXBvcnQgUmVxdWVzdFN0YXRlIGZyb20gXCIuLi9Db3JlL1JlcXVlc3RTdGF0ZS5qc1wiO1xuaW1wb3J0IFJlcXVlc3RUeXBlIGZyb20gXCIuLi9Db3JlL1JlcXVlc3RUeXBlLmpzXCI7XG5pbXBvcnQgVGVycmFpblByb3ZpZGVyIGZyb20gXCIuLi9Db3JlL1RlcnJhaW5Qcm92aWRlci5qc1wiO1xuaW1wb3J0IFRpbGVQcm92aWRlckVycm9yIGZyb20gXCIuLi9Db3JlL1RpbGVQcm92aWRlckVycm9yLmpzXCI7XG5pbXBvcnQgV2ViTWVyY2F0b3JQcm9qZWN0aW9uIGZyb20gXCIuLi9Db3JlL1dlYk1lcmNhdG9yUHJvamVjdGlvbi5qc1wiO1xuaW1wb3J0IEJ1ZmZlciBmcm9tIFwiLi4vUmVuZGVyZXIvQnVmZmVyLmpzXCI7XG5pbXBvcnQgQnVmZmVyVXNhZ2UgZnJvbSBcIi4uL1JlbmRlcmVyL0J1ZmZlclVzYWdlLmpzXCI7XG5pbXBvcnQgQ29tcHV0ZUNvbW1hbmQgZnJvbSBcIi4uL1JlbmRlcmVyL0NvbXB1dGVDb21tYW5kLmpzXCI7XG5pbXBvcnQgQ29udGV4dExpbWl0cyBmcm9tIFwiLi4vUmVuZGVyZXIvQ29udGV4dExpbWl0cy5qc1wiO1xuaW1wb3J0IE1pcG1hcEhpbnQgZnJvbSBcIi4uL1JlbmRlcmVyL01pcG1hcEhpbnQuanNcIjtcbmltcG9ydCBTYW1wbGVyIGZyb20gXCIuLi9SZW5kZXJlci9TYW1wbGVyLmpzXCI7XG5pbXBvcnQgU2hhZGVyUHJvZ3JhbSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyUHJvZ3JhbS5qc1wiO1xuaW1wb3J0IFNoYWRlclNvdXJjZSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyU291cmNlLmpzXCI7XG5pbXBvcnQgVGV4dHVyZSBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZS5qc1wiO1xuaW1wb3J0IFRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyIGZyb20gXCIuLi9SZW5kZXJlci9UZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlci5qc1wiO1xuaW1wb3J0IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIgZnJvbSBcIi4uL1JlbmRlcmVyL1RleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuanNcIjtcbmltcG9ydCBUZXh0dXJlV3JhcCBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZVdyYXAuanNcIjtcbmltcG9ydCBWZXJ0ZXhBcnJheSBmcm9tIFwiLi4vUmVuZGVyZXIvVmVydGV4QXJyYXkuanNcIjtcbmltcG9ydCBSZXByb2plY3RXZWJNZXJjYXRvckZTIGZyb20gXCIuLi9TaGFkZXJzL1JlcHJvamVjdFdlYk1lcmNhdG9yRlMuanNcIjtcbmltcG9ydCBSZXByb2plY3RXZWJNZXJjYXRvclZTIGZyb20gXCIuLi9TaGFkZXJzL1JlcHJvamVjdFdlYk1lcmNhdG9yVlMuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcbmltcG9ydCBJbWFnZXJ5IGZyb20gXCIuL0ltYWdlcnkuanNcIjtcbmltcG9ydCBJbWFnZXJ5U3BsaXREaXJlY3Rpb24gZnJvbSBcIi4vSW1hZ2VyeVNwbGl0RGlyZWN0aW9uLmpzXCI7XG5pbXBvcnQgSW1hZ2VyeVN0YXRlIGZyb20gXCIuL0ltYWdlcnlTdGF0ZS5qc1wiO1xuaW1wb3J0IFRpbGVJbWFnZXJ5IGZyb20gXCIuL1RpbGVJbWFnZXJ5LmpzXCI7XG5cbi8qKlxuICogQW4gaW1hZ2VyeSBsYXllciB0aGF0IGRpc3BsYXlzIHRpbGVkIGltYWdlIGRhdGEgZnJvbSBhIHNpbmdsZSBpbWFnZXJ5IHByb3ZpZGVyXG4gKiBvbiBhIHtAbGluayBHbG9iZX0uXG4gKlxuICogQGFsaWFzIEltYWdlcnlMYXllclxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtJbWFnZXJ5UHJvdmlkZXJ9IGltYWdlcnlQcm92aWRlciBUaGUgaW1hZ2VyeSBwcm92aWRlciB0byB1c2UuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UmVjdGFuZ2xlfSBbb3B0aW9ucy5yZWN0YW5nbGU9aW1hZ2VyeVByb3ZpZGVyLnJlY3RhbmdsZV0gVGhlIHJlY3RhbmdsZSBvZiB0aGUgbGF5ZXIuICBUaGlzIHJlY3RhbmdsZVxuICogICAgICAgIGNhbiBsaW1pdCB0aGUgdmlzaWJsZSBwb3J0aW9uIG9mIHRoZSBpbWFnZXJ5IHByb3ZpZGVyLlxuICogQHBhcmFtIHtOdW1iZXJ8RnVuY3Rpb259IFtvcHRpb25zLmFscGhhPTEuMF0gVGhlIGFscGhhIGJsZW5kaW5nIHZhbHVlIG9mIHRoaXMgbGF5ZXIsIGZyb20gMC4wIHRvIDEuMC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGNhbiBlaXRoZXIgYmUgYSBzaW1wbGUgbnVtYmVyIG9yIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2lnbmF0dXJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgPGNvZGU+ZnVuY3Rpb24oZnJhbWVTdGF0ZSwgbGF5ZXIsIHgsIHksIGxldmVsKTwvY29kZT4uICBUaGUgZnVuY3Rpb24gaXMgcGFzc2VkIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZnJhbWUgc3RhdGUsIHRoaXMgbGF5ZXIsIGFuZCB0aGUgeCwgeSwgYW5kIGxldmVsIGNvb3JkaW5hdGVzIG9mIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlcnkgdGlsZSBmb3Igd2hpY2ggdGhlIGFscGhhIGlzIHJlcXVpcmVkLCBhbmQgaXQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGFscGhhIHZhbHVlIHRvIHVzZSBmb3IgdGhlIHRpbGUuXG4gKiBAcGFyYW0ge051bWJlcnxGdW5jdGlvbn0gW29wdGlvbnMubmlnaHRBbHBoYT0xLjBdIFRoZSBhbHBoYSBibGVuZGluZyB2YWx1ZSBvZiB0aGlzIGxheWVyIG9uIHRoZSBuaWdodCBzaWRlIG9mIHRoZSBnbG9iZSwgZnJvbSAwLjAgdG8gMS4wLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgY2FuIGVpdGhlciBiZSBhIHNpbXBsZSBudW1iZXIgb3IgYSBmdW5jdGlvbiB3aXRoIHRoZSBzaWduYXR1cmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICA8Y29kZT5mdW5jdGlvbihmcmFtZVN0YXRlLCBsYXllciwgeCwgeSwgbGV2ZWwpPC9jb2RlPi4gIFRoZSBmdW5jdGlvbiBpcyBwYXNzZWQgdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCBmcmFtZSBzdGF0ZSwgdGhpcyBsYXllciwgYW5kIHRoZSB4LCB5LCBhbmQgbGV2ZWwgY29vcmRpbmF0ZXMgb2YgdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VyeSB0aWxlIGZvciB3aGljaCB0aGUgYWxwaGEgaXMgcmVxdWlyZWQsIGFuZCBpdCBpcyBleHBlY3RlZCB0byByZXR1cm5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgYWxwaGEgdmFsdWUgdG8gdXNlIGZvciB0aGUgdGlsZS4gVGhpcyBvbmx5IHRha2VzIGVmZmVjdCB3aGVuIDxjb2RlPmVuYWJsZUxpZ2h0aW5nPC9jb2RlPiBpcyA8Y29kZT50cnVlPC9jb2RlPi5cbiAqIEBwYXJhbSB7TnVtYmVyfEZ1bmN0aW9ufSBbb3B0aW9ucy5kYXlBbHBoYT0xLjBdIFRoZSBhbHBoYSBibGVuZGluZyB2YWx1ZSBvZiB0aGlzIGxheWVyIG9uIHRoZSBkYXkgc2lkZSBvZiB0aGUgZ2xvYmUsIGZyb20gMC4wIHRvIDEuMC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGNhbiBlaXRoZXIgYmUgYSBzaW1wbGUgbnVtYmVyIG9yIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2lnbmF0dXJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgPGNvZGU+ZnVuY3Rpb24oZnJhbWVTdGF0ZSwgbGF5ZXIsIHgsIHksIGxldmVsKTwvY29kZT4uICBUaGUgZnVuY3Rpb24gaXMgcGFzc2VkIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZnJhbWUgc3RhdGUsIHRoaXMgbGF5ZXIsIGFuZCB0aGUgeCwgeSwgYW5kIGxldmVsIGNvb3JkaW5hdGVzIG9mIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlcnkgdGlsZSBmb3Igd2hpY2ggdGhlIGFscGhhIGlzIHJlcXVpcmVkLCBhbmQgaXQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGFscGhhIHZhbHVlIHRvIHVzZSBmb3IgdGhlIHRpbGUuIFRoaXMgb25seSB0YWtlcyBlZmZlY3Qgd2hlbiA8Y29kZT5lbmFibGVMaWdodGluZzwvY29kZT4gaXMgPGNvZGU+dHJ1ZTwvY29kZT4uXG4gKiBAcGFyYW0ge051bWJlcnxGdW5jdGlvbn0gW29wdGlvbnMuYnJpZ2h0bmVzcz0xLjBdIFRoZSBicmlnaHRuZXNzIG9mIHRoaXMgbGF5ZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IuICBMZXNzIHRoYW4gMS4wIG1ha2VzIHRoZSBpbWFnZXJ5IGRhcmtlciB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIG1ha2VzIGl0IGJyaWdodGVyLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgY2FuIGVpdGhlciBiZSBhIHNpbXBsZSBudW1iZXIgb3IgYSBmdW5jdGlvbiB3aXRoIHRoZSBzaWduYXR1cmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICA8Y29kZT5mdW5jdGlvbihmcmFtZVN0YXRlLCBsYXllciwgeCwgeSwgbGV2ZWwpPC9jb2RlPi4gIFRoZSBmdW5jdGlvbiBpcyBwYXNzZWQgdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCBmcmFtZSBzdGF0ZSwgdGhpcyBsYXllciwgYW5kIHRoZSB4LCB5LCBhbmQgbGV2ZWwgY29vcmRpbmF0ZXMgb2YgdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VyeSB0aWxlIGZvciB3aGljaCB0aGUgYnJpZ2h0bmVzcyBpcyByZXF1aXJlZCwgYW5kIGl0IGlzIGV4cGVjdGVkIHRvIHJldHVyblxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBicmlnaHRuZXNzIHZhbHVlIHRvIHVzZSBmb3IgdGhlIHRpbGUuICBUaGUgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZm9yIGV2ZXJ5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUgYW5kIGZvciBldmVyeSB0aWxlLCBzbyBpdCBtdXN0IGJlIGZhc3QuXG4gKiBAcGFyYW0ge051bWJlcnxGdW5jdGlvbn0gW29wdGlvbnMuY29udHJhc3Q9MS4wXSBUaGUgY29udHJhc3Qgb2YgdGhpcyBsYXllci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgTGVzcyB0aGFuIDEuMCByZWR1Y2VzIHRoZSBjb250cmFzdCB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIGluY3JlYXNlcyBpdC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGNhbiBlaXRoZXIgYmUgYSBzaW1wbGUgbnVtYmVyIG9yIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2lnbmF0dXJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgPGNvZGU+ZnVuY3Rpb24oZnJhbWVTdGF0ZSwgbGF5ZXIsIHgsIHksIGxldmVsKTwvY29kZT4uICBUaGUgZnVuY3Rpb24gaXMgcGFzc2VkIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZnJhbWUgc3RhdGUsIHRoaXMgbGF5ZXIsIGFuZCB0aGUgeCwgeSwgYW5kIGxldmVsIGNvb3JkaW5hdGVzIG9mIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlcnkgdGlsZSBmb3Igd2hpY2ggdGhlIGNvbnRyYXN0IGlzIHJlcXVpcmVkLCBhbmQgaXQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGNvbnRyYXN0IHZhbHVlIHRvIHVzZSBmb3IgdGhlIHRpbGUuICBUaGUgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZm9yIGV2ZXJ5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUgYW5kIGZvciBldmVyeSB0aWxlLCBzbyBpdCBtdXN0IGJlIGZhc3QuXG4gKiBAcGFyYW0ge051bWJlcnxGdW5jdGlvbn0gW29wdGlvbnMuaHVlPTAuMF0gVGhlIGh1ZSBvZiB0aGlzIGxheWVyLiAgMC4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGNhbiBlaXRoZXIgYmUgYSBzaW1wbGUgbnVtYmVyIG9yIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2lnbmF0dXJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgPGNvZGU+ZnVuY3Rpb24oZnJhbWVTdGF0ZSwgbGF5ZXIsIHgsIHksIGxldmVsKTwvY29kZT4uICBUaGUgZnVuY3Rpb24gaXMgcGFzc2VkIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZnJhbWUgc3RhdGUsIHRoaXMgbGF5ZXIsIGFuZCB0aGUgeCwgeSwgYW5kIGxldmVsIGNvb3JkaW5hdGVzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgb2YgdGhlIGltYWdlcnkgdGlsZSBmb3Igd2hpY2ggdGhlIGh1ZSBpcyByZXF1aXJlZCwgYW5kIGl0IGlzIGV4cGVjdGVkIHRvIHJldHVyblxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBjb250cmFzdCB2YWx1ZSB0byB1c2UgZm9yIHRoZSB0aWxlLiAgVGhlIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGZvciBldmVyeVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lIGFuZCBmb3IgZXZlcnkgdGlsZSwgc28gaXQgbXVzdCBiZSBmYXN0LlxuICogQHBhcmFtIHtOdW1iZXJ8RnVuY3Rpb259IFtvcHRpb25zLnNhdHVyYXRpb249MS4wXSBUaGUgc2F0dXJhdGlvbiBvZiB0aGlzIGxheWVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBMZXNzIHRoYW4gMS4wIHJlZHVjZXMgdGhlIHNhdHVyYXRpb24gd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBpbmNyZWFzZXMgaXQuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBjYW4gZWl0aGVyIGJlIGEgc2ltcGxlIG51bWJlciBvciBhIGZ1bmN0aW9uIHdpdGggdGhlIHNpZ25hdHVyZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlPmZ1bmN0aW9uKGZyYW1lU3RhdGUsIGxheWVyLCB4LCB5LCBsZXZlbCk8L2NvZGU+LiAgVGhlIGZ1bmN0aW9uIGlzIHBhc3NlZCB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50IGZyYW1lIHN0YXRlLCB0aGlzIGxheWVyLCBhbmQgdGhlIHgsIHksIGFuZCBsZXZlbCBjb29yZGluYXRlc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgIG9mIHRoZSBpbWFnZXJ5IHRpbGUgZm9yIHdoaWNoIHRoZSBzYXR1cmF0aW9uIGlzIHJlcXVpcmVkLCBhbmQgaXQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGNvbnRyYXN0IHZhbHVlIHRvIHVzZSBmb3IgdGhlIHRpbGUuICBUaGUgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZm9yIGV2ZXJ5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUgYW5kIGZvciBldmVyeSB0aWxlLCBzbyBpdCBtdXN0IGJlIGZhc3QuXG4gKiBAcGFyYW0ge051bWJlcnxGdW5jdGlvbn0gW29wdGlvbnMuZ2FtbWE9MS4wXSBUaGUgZ2FtbWEgY29ycmVjdGlvbiB0byBhcHBseSB0byB0aGlzIGxheWVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGNhbiBlaXRoZXIgYmUgYSBzaW1wbGUgbnVtYmVyIG9yIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2lnbmF0dXJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgPGNvZGU+ZnVuY3Rpb24oZnJhbWVTdGF0ZSwgbGF5ZXIsIHgsIHksIGxldmVsKTwvY29kZT4uICBUaGUgZnVuY3Rpb24gaXMgcGFzc2VkIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZnJhbWUgc3RhdGUsIHRoaXMgbGF5ZXIsIGFuZCB0aGUgeCwgeSwgYW5kIGxldmVsIGNvb3JkaW5hdGVzIG9mIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlcnkgdGlsZSBmb3Igd2hpY2ggdGhlIGdhbW1hIGlzIHJlcXVpcmVkLCBhbmQgaXQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGdhbW1hIHZhbHVlIHRvIHVzZSBmb3IgdGhlIHRpbGUuICBUaGUgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZm9yIGV2ZXJ5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUgYW5kIGZvciBldmVyeSB0aWxlLCBzbyBpdCBtdXN0IGJlIGZhc3QuXG4gKiBAcGFyYW0ge0ltYWdlcnlTcGxpdERpcmVjdGlvbnxGdW5jdGlvbn0gW29wdGlvbnMuc3BsaXREaXJlY3Rpb249SW1hZ2VyeVNwbGl0RGlyZWN0aW9uLk5PTkVdIFRoZSB7QGxpbmsgSW1hZ2VyeVNwbGl0RGlyZWN0aW9ufSBzcGxpdCB0byBhcHBseSB0byB0aGlzIGxheWVyLlxuICogQHBhcmFtIHtUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyfSBbb3B0aW9ucy5taW5pZmljYXRpb25GaWx0ZXI9VGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlci5MSU5FQVJdIFRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlIG1pbmlmaWNhdGlvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhpcyBsYXllci4gUG9zc2libGUgdmFsdWVzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZSA8Y29kZT5UZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyLkxJTkVBUjwvY29kZT4gYW5kXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlPlRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuTkVBUkVTVDwvY29kZT4uXG4gKiBAcGFyYW0ge1RleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyfSBbb3B0aW9ucy5tYWduaWZpY2F0aW9uRmlsdGVyPVRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyLkxJTkVBUl0gVGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlIG1pbmlmaWNhdGlvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhpcyBsYXllci4gUG9zc2libGUgdmFsdWVzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmUgPGNvZGU+VGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXIuTElORUFSPC9jb2RlPiBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlPlRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyLk5FQVJFU1Q8L2NvZGU+LlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zaG93PXRydWVdIFRydWUgaWYgdGhlIGxheWVyIGlzIHNob3duOyBvdGhlcndpc2UsIGZhbHNlLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heGltdW1Bbmlzb3Ryb3B5PW1heGltdW0gc3VwcG9ydGVkXSBUaGUgbWF4aW11bSBhbmlzb3Ryb3B5IGxldmVsIHRvIHVzZVxuICogICAgICAgIGZvciB0ZXh0dXJlIGZpbHRlcmluZy4gIElmIHRoaXMgcGFyYW1ldGVyIGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBtYXhpbXVtIGFuaXNvdHJvcHkgc3VwcG9ydGVkXG4gKiAgICAgICAgYnkgdGhlIFdlYkdMIHN0YWNrIHdpbGwgYmUgdXNlZC4gIExhcmdlciB2YWx1ZXMgbWFrZSB0aGUgaW1hZ2VyeSBsb29rIGJldHRlciBpbiBob3Jpem9uXG4gKiAgICAgICAgdmlld3MuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWluaW11bVRlcnJhaW5MZXZlbF0gVGhlIG1pbmltdW0gdGVycmFpbiBsZXZlbC1vZi1kZXRhaWwgYXQgd2hpY2ggdG8gc2hvdyB0aGlzIGltYWdlcnkgbGF5ZXIsXG4gKiAgICAgICAgICAgICAgICAgb3IgdW5kZWZpbmVkIHRvIHNob3cgaXQgYXQgYWxsIGxldmVscy4gIExldmVsIHplcm8gaXMgdGhlIGxlYXN0LWRldGFpbGVkIGxldmVsLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heGltdW1UZXJyYWluTGV2ZWxdIFRoZSBtYXhpbXVtIHRlcnJhaW4gbGV2ZWwtb2YtZGV0YWlsIGF0IHdoaWNoIHRvIHNob3cgdGhpcyBpbWFnZXJ5IGxheWVyLFxuICogICAgICAgICAgICAgICAgIG9yIHVuZGVmaW5lZCB0byBzaG93IGl0IGF0IGFsbCBsZXZlbHMuICBMZXZlbCB6ZXJvIGlzIHRoZSBsZWFzdC1kZXRhaWxlZCBsZXZlbC5cbiAqIEBwYXJhbSB7UmVjdGFuZ2xlfSBbb3B0aW9ucy5jdXRvdXRSZWN0YW5nbGVdIENhcnRvZ3JhcGhpYyByZWN0YW5nbGUgZm9yIGN1dHRpbmcgb3V0IGEgcG9ydGlvbiBvZiB0aGlzIEltYWdlcnlMYXllci5cbiAqIEBwYXJhbSB7Q29sb3J9IFtvcHRpb25zLmNvbG9yVG9BbHBoYV0gQ29sb3IgdG8gYmUgdXNlZCBhcyBhbHBoYS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5jb2xvclRvQWxwaGFUaHJlc2hvbGQ9MC4wMDRdIFRocmVzaG9sZCBmb3IgY29sb3ItdG8tYWxwaGEuXG4gKi9cbmZ1bmN0aW9uIEltYWdlcnlMYXllcihpbWFnZXJ5UHJvdmlkZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5faW1hZ2VyeVByb3ZpZGVyID0gaW1hZ2VyeVByb3ZpZGVyO1xuXG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgLyoqXG4gICAqIFRoZSBhbHBoYSBibGVuZGluZyB2YWx1ZSBvZiB0aGlzIGxheWVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAxLjBcbiAgICovXG4gIHRoaXMuYWxwaGEgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5hbHBoYSxcbiAgICBkZWZhdWx0VmFsdWUoaW1hZ2VyeVByb3ZpZGVyLmRlZmF1bHRBbHBoYSwgMS4wKVxuICApO1xuXG4gIC8qKlxuICAgKiBUaGUgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb2YgdGhpcyBsYXllciBvbiB0aGUgbmlnaHQgc2lkZSBvZiB0aGUgZ2xvYmUsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuIFRoaXMgb25seSB0YWtlcyBlZmZlY3Qgd2hlbiB7QGxpbmsgR2xvYmUjZW5hYmxlTGlnaHRpbmd9IGlzIDxjb2RlPnRydWU8L2NvZGU+LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAxLjBcbiAgICovXG4gIHRoaXMubmlnaHRBbHBoYSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLm5pZ2h0QWxwaGEsXG4gICAgZGVmYXVsdFZhbHVlKGltYWdlcnlQcm92aWRlci5kZWZhdWx0TmlnaHRBbHBoYSwgMS4wKVxuICApO1xuXG4gIC8qKlxuICAgKiBUaGUgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb2YgdGhpcyBsYXllciBvbiB0aGUgZGF5IHNpZGUgb2YgdGhlIGdsb2JlLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLiBUaGlzIG9ubHkgdGFrZXMgZWZmZWN0IHdoZW4ge0BsaW5rIEdsb2JlI2VuYWJsZUxpZ2h0aW5nfSBpcyA8Y29kZT50cnVlPC9jb2RlPi5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqL1xuICB0aGlzLmRheUFscGhhID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZGF5QWxwaGEsXG4gICAgZGVmYXVsdFZhbHVlKGltYWdlcnlQcm92aWRlci5kZWZhdWx0RGF5QWxwaGEsIDEuMClcbiAgKTtcblxuICAvKipcbiAgICogVGhlIGJyaWdodG5lc3Mgb2YgdGhpcyBsYXllci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuICBMZXNzIHRoYW4gMS4wXG4gICAqIG1ha2VzIHRoZSBpbWFnZXJ5IGRhcmtlciB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIG1ha2VzIGl0IGJyaWdodGVyLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCB7QGxpbmsgSW1hZ2VyeUxheWVyLkRFRkFVTFRfQlJJR0hUTkVTU31cbiAgICovXG4gIHRoaXMuYnJpZ2h0bmVzcyA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmJyaWdodG5lc3MsXG4gICAgZGVmYXVsdFZhbHVlKFxuICAgICAgaW1hZ2VyeVByb3ZpZGVyLmRlZmF1bHRCcmlnaHRuZXNzLFxuICAgICAgSW1hZ2VyeUxheWVyLkRFRkFVTFRfQlJJR0hUTkVTU1xuICAgIClcbiAgKTtcblxuICAvKipcbiAgICogVGhlIGNvbnRyYXN0IG9mIHRoaXMgbGF5ZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiAgTGVzcyB0aGFuIDEuMCByZWR1Y2VzXG4gICAqIHRoZSBjb250cmFzdCB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIGluY3JlYXNlcyBpdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQge0BsaW5rIEltYWdlcnlMYXllci5ERUZBVUxUX0NPTlRSQVNUfVxuICAgKi9cbiAgdGhpcy5jb250cmFzdCA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmNvbnRyYXN0LFxuICAgIGRlZmF1bHRWYWx1ZShpbWFnZXJ5UHJvdmlkZXIuZGVmYXVsdENvbnRyYXN0LCBJbWFnZXJ5TGF5ZXIuREVGQVVMVF9DT05UUkFTVClcbiAgKTtcblxuICAvKipcbiAgICogVGhlIGh1ZSBvZiB0aGlzIGxheWVyIGluIHJhZGlhbnMuIDAuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IHtAbGluayBJbWFnZXJ5TGF5ZXIuREVGQVVMVF9IVUV9XG4gICAqL1xuICB0aGlzLmh1ZSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmh1ZSxcbiAgICBkZWZhdWx0VmFsdWUoaW1hZ2VyeVByb3ZpZGVyLmRlZmF1bHRIdWUsIEltYWdlcnlMYXllci5ERUZBVUxUX0hVRSlcbiAgKTtcblxuICAvKipcbiAgICogVGhlIHNhdHVyYXRpb24gb2YgdGhpcyBsYXllci4gMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gTGVzcyB0aGFuIDEuMCByZWR1Y2VzIHRoZVxuICAgKiBzYXR1cmF0aW9uIHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgaW5jcmVhc2VzIGl0LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCB7QGxpbmsgSW1hZ2VyeUxheWVyLkRFRkFVTFRfU0FUVVJBVElPTn1cbiAgICovXG4gIHRoaXMuc2F0dXJhdGlvbiA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLnNhdHVyYXRpb24sXG4gICAgZGVmYXVsdFZhbHVlKFxuICAgICAgaW1hZ2VyeVByb3ZpZGVyLmRlZmF1bHRTYXR1cmF0aW9uLFxuICAgICAgSW1hZ2VyeUxheWVyLkRFRkFVTFRfU0FUVVJBVElPTlxuICAgIClcbiAgKTtcblxuICAvKipcbiAgICogVGhlIGdhbW1hIGNvcnJlY3Rpb24gdG8gYXBwbHkgdG8gdGhpcyBsYXllci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IHtAbGluayBJbWFnZXJ5TGF5ZXIuREVGQVVMVF9HQU1NQX1cbiAgICovXG4gIHRoaXMuZ2FtbWEgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5nYW1tYSxcbiAgICBkZWZhdWx0VmFsdWUoaW1hZ2VyeVByb3ZpZGVyLmRlZmF1bHRHYW1tYSwgSW1hZ2VyeUxheWVyLkRFRkFVTFRfR0FNTUEpXG4gICk7XG5cbiAgLyoqXG4gICAqIFRoZSB7QGxpbmsgSW1hZ2VyeVNwbGl0RGlyZWN0aW9ufSB0byBhcHBseSB0byB0aGlzIGxheWVyLlxuICAgKlxuICAgKiBAdHlwZSB7SW1hZ2VyeVNwbGl0RGlyZWN0aW9ufVxuICAgKiBAZGVmYXVsdCB7QGxpbmsgSW1hZ2VyeUxheWVyLkRFRkFVTFRfU1BMSVR9XG4gICAqL1xuICB0aGlzLnNwbGl0RGlyZWN0aW9uID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuc3BsaXREaXJlY3Rpb24sXG4gICAgZGVmYXVsdFZhbHVlKGltYWdlcnlQcm92aWRlci5kZWZhdWx0U3BsaXQsIEltYWdlcnlMYXllci5ERUZBVUxUX1NQTElUKVxuICApO1xuXG4gIC8qKlxuICAgKiBUaGUge0BsaW5rIFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXJ9IHRvIGFwcGx5IHRvIHRoaXMgbGF5ZXIuXG4gICAqIFBvc3NpYmxlIHZhbHVlcyBhcmUge0BsaW5rIFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuTElORUFSfSAodGhlIGRlZmF1bHQpXG4gICAqIGFuZCB7QGxpbmsgVGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlci5ORUFSRVNUfS5cbiAgICpcbiAgICogVG8gdGFrZSBlZmZlY3QsIHRoaXMgcHJvcGVydHkgbXVzdCBiZSBzZXQgaW1tZWRpYXRlbHkgYWZ0ZXIgYWRkaW5nIHRoZSBpbWFnZXJ5IGxheWVyLlxuICAgKiBPbmNlIGEgdGV4dHVyZSBpcyBsb2FkZWQgaXQgd29uJ3QgYmUgcG9zc2libGUgdG8gY2hhbmdlIHRoZSB0ZXh0dXJlIGZpbHRlciB1c2VkLlxuICAgKlxuICAgKiBAdHlwZSB7VGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlcn1cbiAgICogQGRlZmF1bHQge0BsaW5rIEltYWdlcnlMYXllci5ERUZBVUxUX01JTklGSUNBVElPTl9GSUxURVJ9XG4gICAqL1xuICB0aGlzLm1pbmlmaWNhdGlvbkZpbHRlciA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLm1pbmlmaWNhdGlvbkZpbHRlcixcbiAgICBkZWZhdWx0VmFsdWUoXG4gICAgICBpbWFnZXJ5UHJvdmlkZXIuZGVmYXVsdE1pbmlmaWNhdGlvbkZpbHRlcixcbiAgICAgIEltYWdlcnlMYXllci5ERUZBVUxUX01JTklGSUNBVElPTl9GSUxURVJcbiAgICApXG4gICk7XG5cbiAgLyoqXG4gICAqIFRoZSB7QGxpbmsgVGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXJ9IHRvIGFwcGx5IHRvIHRoaXMgbGF5ZXIuXG4gICAqIFBvc3NpYmxlIHZhbHVlcyBhcmUge0BsaW5rIFRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyLkxJTkVBUn0gKHRoZSBkZWZhdWx0KVxuICAgKiBhbmQge0BsaW5rIFRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyLk5FQVJFU1R9LlxuICAgKlxuICAgKiBUbyB0YWtlIGVmZmVjdCwgdGhpcyBwcm9wZXJ0eSBtdXN0IGJlIHNldCBpbW1lZGlhdGVseSBhZnRlciBhZGRpbmcgdGhlIGltYWdlcnkgbGF5ZXIuXG4gICAqIE9uY2UgYSB0ZXh0dXJlIGlzIGxvYWRlZCBpdCB3b24ndCBiZSBwb3NzaWJsZSB0byBjaGFuZ2UgdGhlIHRleHR1cmUgZmlsdGVyIHVzZWQuXG4gICAqXG4gICAqIEB0eXBlIHtUZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlcn1cbiAgICogQGRlZmF1bHQge0BsaW5rIEltYWdlcnlMYXllci5ERUZBVUxUX01BR05JRklDQVRJT05fRklMVEVSfVxuICAgKi9cbiAgdGhpcy5tYWduaWZpY2F0aW9uRmlsdGVyID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMubWFnbmlmaWNhdGlvbkZpbHRlcixcbiAgICBkZWZhdWx0VmFsdWUoXG4gICAgICBpbWFnZXJ5UHJvdmlkZXIuZGVmYXVsdE1hZ25pZmljYXRpb25GaWx0ZXIsXG4gICAgICBJbWFnZXJ5TGF5ZXIuREVGQVVMVF9NQUdOSUZJQ0FUSU9OX0ZJTFRFUlxuICAgIClcbiAgKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGxheWVyIGlzIHNob3duLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5zaG93ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2hvdywgdHJ1ZSk7XG5cbiAgdGhpcy5fbWluaW11bVRlcnJhaW5MZXZlbCA9IG9wdGlvbnMubWluaW11bVRlcnJhaW5MZXZlbDtcbiAgdGhpcy5fbWF4aW11bVRlcnJhaW5MZXZlbCA9IG9wdGlvbnMubWF4aW11bVRlcnJhaW5MZXZlbDtcblxuICB0aGlzLl9yZWN0YW5nbGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5yZWN0YW5nbGUsIFJlY3RhbmdsZS5NQVhfVkFMVUUpO1xuICB0aGlzLl9tYXhpbXVtQW5pc290cm9weSA9IG9wdGlvbnMubWF4aW11bUFuaXNvdHJvcHk7XG5cbiAgdGhpcy5faW1hZ2VyeUNhY2hlID0ge307XG5cbiAgdGhpcy5fc2tlbGV0b25QbGFjZWhvbGRlciA9IG5ldyBUaWxlSW1hZ2VyeShJbWFnZXJ5LmNyZWF0ZVBsYWNlaG9sZGVyKHRoaXMpKTtcblxuICAvLyBUaGUgdmFsdWUgb2YgdGhlIHNob3cgcHJvcGVydHkgb24gdGhlIGxhc3QgdXBkYXRlLlxuICB0aGlzLl9zaG93ID0gdHJ1ZTtcblxuICAvLyBUaGUgaW5kZXggb2YgdGhpcyBsYXllciBpbiB0aGUgSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5cbiAgdGhpcy5fbGF5ZXJJbmRleCA9IC0xO1xuXG4gIC8vIHRydWUgaWYgdGhpcyBpcyB0aGUgYmFzZSAobG93ZXN0IHNob3duKSBsYXllci5cbiAgdGhpcy5faXNCYXNlTGF5ZXIgPSBmYWxzZTtcblxuICB0aGlzLl9yZXF1ZXN0SW1hZ2VFcnJvciA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9yZXByb2plY3RDb21wdXRlQ29tbWFuZHMgPSBbXTtcblxuICAvKipcbiAgICogUmVjdGFuZ2xlIGN1dG91dCBpbiB0aGlzIGxheWVyIG9mIGltYWdlcnkuXG4gICAqXG4gICAqIEB0eXBlIHtSZWN0YW5nbGV9XG4gICAqL1xuICB0aGlzLmN1dG91dFJlY3RhbmdsZSA9IG9wdGlvbnMuY3V0b3V0UmVjdGFuZ2xlO1xuXG4gIC8qKlxuICAgKiBDb2xvciB2YWx1ZSB0aGF0IHNob3VsZCBiZSBzZXQgdG8gdHJhbnNwYXJlbnQuXG4gICAqXG4gICAqIEB0eXBlIHtDb2xvcn1cbiAgICovXG4gIHRoaXMuY29sb3JUb0FscGhhID0gb3B0aW9ucy5jb2xvclRvQWxwaGE7XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZWQgKDAtMSkgdGhyZXNob2xkIGZvciBjb2xvci10by1hbHBoYS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHRoaXMuY29sb3JUb0FscGhhVGhyZXNob2xkID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuY29sb3JUb0FscGhhVGhyZXNob2xkLFxuICAgIEltYWdlcnlMYXllci5ERUZBVUxUX0FQUExZX0NPTE9SX1RPX0FMUEhBX1RIUkVTSE9MRFxuICApO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhJbWFnZXJ5TGF5ZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGZvciB0aGlzIGxheWVyLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VyeUxheWVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7SW1hZ2VyeVByb3ZpZGVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGltYWdlcnlQcm92aWRlcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcnlQcm92aWRlcjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWN0YW5nbGUgb2YgdGhpcyBsYXllci4gIElmIHRoaXMgcmVjdGFuZ2xlIGlzIHNtYWxsZXIgdGhhbiB0aGUgcmVjdGFuZ2xlIG9mIHRoZVxuICAgKiB7QGxpbmsgSW1hZ2VyeVByb3ZpZGVyfSwgb25seSBhIHBvcnRpb24gb2YgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgc2hvd24uXG4gICAqIEBtZW1iZXJvZiBJbWFnZXJ5TGF5ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtSZWN0YW5nbGV9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVjdGFuZ2xlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVjdGFuZ2xlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBUaGlzIHZhbHVlIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgYnJpZ2h0bmVzcyBmb3IgdGhlIGltYWdlcnkgbGF5ZXIgaWYgb25lIGlzIG5vdCBwcm92aWRlZCBkdXJpbmcgY29uc3RydWN0aW9uXG4gKiBvciBieSB0aGUgaW1hZ2VyeSBwcm92aWRlci4gVGhpcyB2YWx1ZSBkb2VzIG5vdCBtb2RpZnkgdGhlIGJyaWdodG5lc3Mgb2YgdGhlIGltYWdlcnkuXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQGRlZmF1bHQgMS4wXG4gKi9cbkltYWdlcnlMYXllci5ERUZBVUxUX0JSSUdIVE5FU1MgPSAxLjA7XG4vKipcbiAqIFRoaXMgdmFsdWUgaXMgdXNlZCBhcyB0aGUgZGVmYXVsdCBjb250cmFzdCBmb3IgdGhlIGltYWdlcnkgbGF5ZXIgaWYgb25lIGlzIG5vdCBwcm92aWRlZCBkdXJpbmcgY29uc3RydWN0aW9uXG4gKiBvciBieSB0aGUgaW1hZ2VyeSBwcm92aWRlci4gVGhpcyB2YWx1ZSBkb2VzIG5vdCBtb2RpZnkgdGhlIGNvbnRyYXN0IG9mIHRoZSBpbWFnZXJ5LlxuICogQHR5cGUge051bWJlcn1cbiAqIEBkZWZhdWx0IDEuMFxuICovXG5JbWFnZXJ5TGF5ZXIuREVGQVVMVF9DT05UUkFTVCA9IDEuMDtcbi8qKlxuICogVGhpcyB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IGh1ZSBmb3IgdGhlIGltYWdlcnkgbGF5ZXIgaWYgb25lIGlzIG5vdCBwcm92aWRlZCBkdXJpbmcgY29uc3RydWN0aW9uXG4gKiBvciBieSB0aGUgaW1hZ2VyeSBwcm92aWRlci4gVGhpcyB2YWx1ZSBkb2VzIG5vdCBtb2RpZnkgdGhlIGh1ZSBvZiB0aGUgaW1hZ2VyeS5cbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKiBAZGVmYXVsdCAwLjBcbiAqL1xuSW1hZ2VyeUxheWVyLkRFRkFVTFRfSFVFID0gMC4wO1xuLyoqXG4gKiBUaGlzIHZhbHVlIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgc2F0dXJhdGlvbiBmb3IgdGhlIGltYWdlcnkgbGF5ZXIgaWYgb25lIGlzIG5vdCBwcm92aWRlZCBkdXJpbmcgY29uc3RydWN0aW9uXG4gKiBvciBieSB0aGUgaW1hZ2VyeSBwcm92aWRlci4gVGhpcyB2YWx1ZSBkb2VzIG5vdCBtb2RpZnkgdGhlIHNhdHVyYXRpb24gb2YgdGhlIGltYWdlcnkuXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQGRlZmF1bHQgMS4wXG4gKi9cbkltYWdlcnlMYXllci5ERUZBVUxUX1NBVFVSQVRJT04gPSAxLjA7XG4vKipcbiAqIFRoaXMgdmFsdWUgaXMgdXNlZCBhcyB0aGUgZGVmYXVsdCBnYW1tYSBmb3IgdGhlIGltYWdlcnkgbGF5ZXIgaWYgb25lIGlzIG5vdCBwcm92aWRlZCBkdXJpbmcgY29uc3RydWN0aW9uXG4gKiBvciBieSB0aGUgaW1hZ2VyeSBwcm92aWRlci4gVGhpcyB2YWx1ZSBkb2VzIG5vdCBtb2RpZnkgdGhlIGdhbW1hIG9mIHRoZSBpbWFnZXJ5LlxuICogQHR5cGUge051bWJlcn1cbiAqIEBkZWZhdWx0IDEuMFxuICovXG5JbWFnZXJ5TGF5ZXIuREVGQVVMVF9HQU1NQSA9IDEuMDtcblxuLyoqXG4gKiBUaGlzIHZhbHVlIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgc3BsaXQgZm9yIHRoZSBpbWFnZXJ5IGxheWVyIGlmIG9uZSBpcyBub3QgcHJvdmlkZWQgZHVyaW5nIGNvbnN0cnVjdGlvblxuICogb3IgYnkgdGhlIGltYWdlcnkgcHJvdmlkZXIuXG4gKiBAdHlwZSB7SW1hZ2VyeVNwbGl0RGlyZWN0aW9ufVxuICogQGRlZmF1bHQgSW1hZ2VyeVNwbGl0RGlyZWN0aW9uLk5PTkVcbiAqL1xuSW1hZ2VyeUxheWVyLkRFRkFVTFRfU1BMSVQgPSBJbWFnZXJ5U3BsaXREaXJlY3Rpb24uTk9ORTtcblxuLyoqXG4gKiBUaGlzIHZhbHVlIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgdGV4dHVyZSBtaW5pZmljYXRpb24gZmlsdGVyIGZvciB0aGUgaW1hZ2VyeSBsYXllciBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG4gKiBkdXJpbmcgY29uc3RydWN0aW9uIG9yIGJ5IHRoZSBpbWFnZXJ5IHByb3ZpZGVyLlxuICogQHR5cGUge1RleHR1cmVNaW5pZmljYXRpb25GaWx0ZXJ9XG4gKiBAZGVmYXVsdCBUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyLkxJTkVBUlxuICovXG5JbWFnZXJ5TGF5ZXIuREVGQVVMVF9NSU5JRklDQVRJT05fRklMVEVSID0gVGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlci5MSU5FQVI7XG5cbi8qKlxuICogVGhpcyB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IHRleHR1cmUgbWFnbmlmaWNhdGlvbiBmaWx0ZXIgZm9yIHRoZSBpbWFnZXJ5IGxheWVyIGlmIG9uZSBpcyBub3QgcHJvdmlkZWRcbiAqIGR1cmluZyBjb25zdHJ1Y3Rpb24gb3IgYnkgdGhlIGltYWdlcnkgcHJvdmlkZXIuXG4gKiBAdHlwZSB7VGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXJ9XG4gKiBAZGVmYXVsdCBUZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlci5MSU5FQVJcbiAqL1xuSW1hZ2VyeUxheWVyLkRFRkFVTFRfTUFHTklGSUNBVElPTl9GSUxURVIgPSBUZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlci5MSU5FQVI7XG5cbi8qKlxuICogVGhpcyB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IHRocmVzaG9sZCBmb3IgY29sb3ItdG8tYWxwaGEgaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuICogZHVyaW5nIGNvbnN0cnVjdGlvbiBvciBieSB0aGUgaW1hZ2VyeSBwcm92aWRlci5cbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKiBAZGVmYXVsdCAwLjAwNFxuICovXG5JbWFnZXJ5TGF5ZXIuREVGQVVMVF9BUFBMWV9DT0xPUl9UT19BTFBIQV9USFJFU0hPTEQgPSAwLjAwNDtcblxuLyoqXG4gKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoaXMgbGF5ZXIgaXMgdGhlIGJhc2UgbGF5ZXIgaW4gdGhlXG4gKiB7QGxpbmsgSW1hZ2VyeUxheWVyQ29sbGVjdGlvbn0uICBUaGUgYmFzZSBsYXllciBpcyB0aGUgb25lIHRoYXQgdW5kZXJsaWVzIGFsbFxuICogb3RoZXJzLiAgSXQgaXMgc3BlY2lhbCBpbiB0aGF0IGl0IGlzIHRyZWF0ZWQgYXMgaWYgaXQgaGFzIGdsb2JhbCByZWN0YW5nbGUsIGV2ZW4gaWZcbiAqIGl0IGFjdHVhbGx5IGRvZXMgbm90LCBieSBzdHJldGNoaW5nIHRoZSB0ZXhlbHMgYXQgdGhlIGVkZ2VzIG92ZXIgdGhlIGVudGlyZVxuICogZ2xvYmUuXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGhpcyBpcyB0aGUgYmFzZSBsYXllcjsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5pc0Jhc2VMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX2lzQmFzZUxheWVyO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICpcbiAqIEBzZWUgSW1hZ2VyeUxheWVyI2Rlc3Ryb3lcbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgV2ViR0wgcmVzb3VyY2VzIGhlbGQgYnkgdGhpcyBvYmplY3QuICBEZXN0cm95aW5nIGFuIG9iamVjdCBhbGxvd3MgZm9yIGRldGVybWluaXN0aWNcbiAqIHJlbGVhc2Ugb2YgV2ViR0wgcmVzb3VyY2VzLCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvIGRlc3Ryb3kgdGhpcyBvYmplY3QuXG4gKiA8YnIgLz48YnIgLz5cbiAqIE9uY2UgYW4gb2JqZWN0IGlzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi4gIFRoZXJlZm9yZSxcbiAqIGFzc2lnbiB0aGUgcmV0dXJuIHZhbHVlICg8Y29kZT51bmRlZmluZWQ8L2NvZGU+KSB0byB0aGUgb2JqZWN0IGFzIGRvbmUgaW4gdGhlIGV4YW1wbGUuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1hZ2VyeUxheWVyID0gaW1hZ2VyeUxheWVyICYmIGltYWdlcnlMYXllci5kZXN0cm95KCk7XG4gKlxuICogQHNlZSBJbWFnZXJ5TGF5ZXIjaXNEZXN0cm95ZWRcbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG5cbnZhciBpbWFnZXJ5Qm91bmRzU2NyYXRjaCA9IG5ldyBSZWN0YW5nbGUoKTtcbnZhciB0aWxlSW1hZ2VyeUJvdW5kc1NjcmF0Y2ggPSBuZXcgUmVjdGFuZ2xlKCk7XG52YXIgY2xpcHBlZFJlY3RhbmdsZVNjcmF0Y2ggPSBuZXcgUmVjdGFuZ2xlKCk7XG52YXIgdGVycmFpblJlY3RhbmdsZVNjcmF0Y2ggPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIGxheWVyJ3MgcmVjdGFuZ2xlIHdpdGggdGhlIGltYWdlcnkgcHJvdmlkZXIncyBhdmFpbGFiaWxpdHkgcmVjdGFuZ2xlLFxuICogcHJvZHVjaW5nIHRoZSBvdmVyYWxsIGJvdW5kcyBvZiBpbWFnZXJ5IHRoYXQgY2FuIGJlIHByb2R1Y2VkIGJ5IHRoaXMgbGF5ZXIuXG4gKlxuICogQHJldHVybnMge1Byb21pc2UuPFJlY3RhbmdsZT59IEEgcHJvbWlzZSB0byBhIHJlY3RhbmdsZSB3aGljaCBkZWZpbmVzIHRoZSBvdmVyYWxsIGJvdW5kcyBvZiBpbWFnZXJ5IHRoYXQgY2FuIGJlIHByb2R1Y2VkIGJ5IHRoaXMgbGF5ZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFpvb20gdG8gYW4gaW1hZ2VyeSBsYXllci5cbiAqIGltYWdlcnlMYXllci5nZXRWaWV3YWJsZVJlY3RhbmdsZSgpLnRoZW4oZnVuY3Rpb24gKHJlY3RhbmdsZSkge1xuICogICAgIHJldHVybiBjYW1lcmEuZmx5VG8oe1xuICogICAgICAgICBkZXN0aW5hdGlvbjogcmVjdGFuZ2xlXG4gKiAgICAgfSk7XG4gKiB9KTtcbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5nZXRWaWV3YWJsZVJlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGltYWdlcnlQcm92aWRlciA9IHRoaXMuX2ltYWdlcnlQcm92aWRlcjtcbiAgdmFyIHJlY3RhbmdsZSA9IHRoaXMuX3JlY3RhbmdsZTtcbiAgcmV0dXJuIGltYWdlcnlQcm92aWRlci5yZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFJlY3RhbmdsZS5pbnRlcnNlY3Rpb24oaW1hZ2VyeVByb3ZpZGVyLnJlY3RhbmdsZSwgcmVjdGFuZ2xlKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBza2VsZXRvbnMgZm9yIHRoZSBpbWFnZXJ5IHRpbGVzIHRoYXQgcGFydGlhbGx5IG9yIGNvbXBsZXRlbHkgb3ZlcmxhcCBhIGdpdmVuIHRlcnJhaW5cbiAqIHRpbGUuXG4gKlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0ge1RpbGV9IHRpbGUgVGhlIHRlcnJhaW4gdGlsZS5cbiAqIEBwYXJhbSB7VGVycmFpblByb3ZpZGVyfSB0ZXJyYWluUHJvdmlkZXIgVGhlIHRlcnJhaW4gcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSB0ZXJyYWluIHRpbGUuXG4gKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0aW9uUG9pbnQgVGhlIHBvc2l0aW9uIHRvIGluc2VydCBuZXcgc2tlbGV0b25zIGJlZm9yZSBpbiB0aGUgdGlsZSdzIGltYWdlcnkgbGlzdC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoaXMgbGF5ZXIgb3ZlcmxhcHMgYW55IHBvcnRpb24gb2YgdGhlIHRlcnJhaW4gdGlsZTsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5fY3JlYXRlVGlsZUltYWdlcnlTa2VsZXRvbnMgPSBmdW5jdGlvbiAoXG4gIHRpbGUsXG4gIHRlcnJhaW5Qcm92aWRlcixcbiAgaW5zZXJ0aW9uUG9pbnRcbikge1xuICB2YXIgc3VyZmFjZVRpbGUgPSB0aWxlLmRhdGE7XG5cbiAgaWYgKFxuICAgIGRlZmluZWQodGhpcy5fbWluaW11bVRlcnJhaW5MZXZlbCkgJiZcbiAgICB0aWxlLmxldmVsIDwgdGhpcy5fbWluaW11bVRlcnJhaW5MZXZlbFxuICApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKFxuICAgIGRlZmluZWQodGhpcy5fbWF4aW11bVRlcnJhaW5MZXZlbCkgJiZcbiAgICB0aWxlLmxldmVsID4gdGhpcy5fbWF4aW11bVRlcnJhaW5MZXZlbFxuICApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgaW1hZ2VyeVByb3ZpZGVyID0gdGhpcy5faW1hZ2VyeVByb3ZpZGVyO1xuXG4gIGlmICghZGVmaW5lZChpbnNlcnRpb25Qb2ludCkpIHtcbiAgICBpbnNlcnRpb25Qb2ludCA9IHN1cmZhY2VUaWxlLmltYWdlcnkubGVuZ3RoO1xuICB9XG5cbiAgaWYgKCFpbWFnZXJ5UHJvdmlkZXIucmVhZHkpIHtcbiAgICAvLyBUaGUgaW1hZ2VyeSBwcm92aWRlciBpcyBub3QgcmVhZHksIHNvIHdlIGNhbid0IGNyZWF0ZSBza2VsZXRvbnMsIHlldC5cbiAgICAvLyBJbnN0ZWFkLCBhZGQgYSBwbGFjZWhvbGRlciBzbyB0aGF0IHdlJ2xsIGtub3cgdG8gY3JlYXRlXG4gICAgLy8gdGhlIHNrZWxldG9ucyBvbmNlIHRoZSBwcm92aWRlciBpcyByZWFkeS5cbiAgICB0aGlzLl9za2VsZXRvblBsYWNlaG9sZGVyLmxvYWRpbmdJbWFnZXJ5LmFkZFJlZmVyZW5jZSgpO1xuICAgIHN1cmZhY2VUaWxlLmltYWdlcnkuc3BsaWNlKGluc2VydGlvblBvaW50LCAwLCB0aGlzLl9za2VsZXRvblBsYWNlaG9sZGVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIFVzZSBXZWIgTWVyY2F0b3IgZm9yIG91ciB0ZXh0dXJlIGNvb3JkaW5hdGUgY29tcHV0YXRpb25zIGlmIHRoaXMgaW1hZ2VyeSBsYXllciB1c2VzXG4gIC8vIHRoYXQgcHJvamVjdGlvbiBhbmQgdGhlIHRlcnJhaW4gdGlsZSBmYWxscyBlbnRpcmVseSBpbnNpZGUgdGhlIHZhbGlkIGJvdW5kcyBvZiB0aGVcbiAgLy8gcHJvamVjdGlvbi5cbiAgdmFyIHVzZVdlYk1lcmNhdG9yVCA9XG4gICAgaW1hZ2VyeVByb3ZpZGVyLnRpbGluZ1NjaGVtZS5wcm9qZWN0aW9uIGluc3RhbmNlb2YgV2ViTWVyY2F0b3JQcm9qZWN0aW9uICYmXG4gICAgdGlsZS5yZWN0YW5nbGUubm9ydGggPCBXZWJNZXJjYXRvclByb2plY3Rpb24uTWF4aW11bUxhdGl0dWRlICYmXG4gICAgdGlsZS5yZWN0YW5nbGUuc291dGggPiAtV2ViTWVyY2F0b3JQcm9qZWN0aW9uLk1heGltdW1MYXRpdHVkZTtcblxuICAvLyBDb21wdXRlIHRoZSByZWN0YW5nbGUgb2YgdGhlIGltYWdlcnkgZnJvbSB0aGlzIGltYWdlcnlQcm92aWRlciB0aGF0IG92ZXJsYXBzXG4gIC8vIHRoZSBnZW9tZXRyeSB0aWxlLiAgVGhlIEltYWdlcnlQcm92aWRlciBhbmQgSW1hZ2VyeUxheWVyIGJvdGggaGF2ZSB0aGVcbiAgLy8gb3Bwb3J0dW5pdHkgdG8gY29uc3RyYWluIHRoZSByZWN0YW5nbGUuICBUaGUgaW1hZ2VyeSBUaWxpbmdTY2hlbWUncyByZWN0YW5nbGVcbiAgLy8gYWx3YXlzIGZ1bGx5IGNvbnRhaW5zIHRoZSBJbWFnZXJ5UHJvdmlkZXIncyByZWN0YW5nbGUuXG4gIHZhciBpbWFnZXJ5Qm91bmRzID0gUmVjdGFuZ2xlLmludGVyc2VjdGlvbihcbiAgICBpbWFnZXJ5UHJvdmlkZXIucmVjdGFuZ2xlLFxuICAgIHRoaXMuX3JlY3RhbmdsZSxcbiAgICBpbWFnZXJ5Qm91bmRzU2NyYXRjaFxuICApO1xuICB2YXIgcmVjdGFuZ2xlID0gUmVjdGFuZ2xlLmludGVyc2VjdGlvbihcbiAgICB0aWxlLnJlY3RhbmdsZSxcbiAgICBpbWFnZXJ5Qm91bmRzLFxuICAgIHRpbGVJbWFnZXJ5Qm91bmRzU2NyYXRjaFxuICApO1xuXG4gIGlmICghZGVmaW5lZChyZWN0YW5nbGUpKSB7XG4gICAgLy8gVGhlcmUgaXMgbm8gb3ZlcmxhcCBiZXR3ZWVuIHRoaXMgdGVycmFpbiB0aWxlIGFuZCB0aGlzIGltYWdlcnlcbiAgICAvLyBwcm92aWRlci4gIFVubGVzcyB0aGlzIGlzIHRoZSBiYXNlIGxheWVyLCBubyBza2VsZXRvbnMgbmVlZCB0byBiZSBjcmVhdGVkLlxuICAgIC8vIFdlIHN0cmV0Y2ggdGV4ZWxzIGF0IHRoZSBlZGdlIG9mIHRoZSBiYXNlIGxheWVyIG92ZXIgdGhlIGVudGlyZSBnbG9iZS5cbiAgICBpZiAoIXRoaXMuaXNCYXNlTGF5ZXIoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBiYXNlSW1hZ2VyeVJlY3RhbmdsZSA9IGltYWdlcnlCb3VuZHM7XG4gICAgdmFyIGJhc2VUZXJyYWluUmVjdGFuZ2xlID0gdGlsZS5yZWN0YW5nbGU7XG4gICAgcmVjdGFuZ2xlID0gdGlsZUltYWdlcnlCb3VuZHNTY3JhdGNoO1xuXG4gICAgaWYgKGJhc2VUZXJyYWluUmVjdGFuZ2xlLnNvdXRoID49IGJhc2VJbWFnZXJ5UmVjdGFuZ2xlLm5vcnRoKSB7XG4gICAgICByZWN0YW5nbGUubm9ydGggPSByZWN0YW5nbGUuc291dGggPSBiYXNlSW1hZ2VyeVJlY3RhbmdsZS5ub3J0aDtcbiAgICB9IGVsc2UgaWYgKGJhc2VUZXJyYWluUmVjdGFuZ2xlLm5vcnRoIDw9IGJhc2VJbWFnZXJ5UmVjdGFuZ2xlLnNvdXRoKSB7XG4gICAgICByZWN0YW5nbGUubm9ydGggPSByZWN0YW5nbGUuc291dGggPSBiYXNlSW1hZ2VyeVJlY3RhbmdsZS5zb3V0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVjdGFuZ2xlLnNvdXRoID0gTWF0aC5tYXgoXG4gICAgICAgIGJhc2VUZXJyYWluUmVjdGFuZ2xlLnNvdXRoLFxuICAgICAgICBiYXNlSW1hZ2VyeVJlY3RhbmdsZS5zb3V0aFxuICAgICAgKTtcbiAgICAgIHJlY3RhbmdsZS5ub3J0aCA9IE1hdGgubWluKFxuICAgICAgICBiYXNlVGVycmFpblJlY3RhbmdsZS5ub3J0aCxcbiAgICAgICAgYmFzZUltYWdlcnlSZWN0YW5nbGUubm9ydGhcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGJhc2VUZXJyYWluUmVjdGFuZ2xlLndlc3QgPj0gYmFzZUltYWdlcnlSZWN0YW5nbGUuZWFzdCkge1xuICAgICAgcmVjdGFuZ2xlLndlc3QgPSByZWN0YW5nbGUuZWFzdCA9IGJhc2VJbWFnZXJ5UmVjdGFuZ2xlLmVhc3Q7XG4gICAgfSBlbHNlIGlmIChiYXNlVGVycmFpblJlY3RhbmdsZS5lYXN0IDw9IGJhc2VJbWFnZXJ5UmVjdGFuZ2xlLndlc3QpIHtcbiAgICAgIHJlY3RhbmdsZS53ZXN0ID0gcmVjdGFuZ2xlLmVhc3QgPSBiYXNlSW1hZ2VyeVJlY3RhbmdsZS53ZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZWN0YW5nbGUud2VzdCA9IE1hdGgubWF4KFxuICAgICAgICBiYXNlVGVycmFpblJlY3RhbmdsZS53ZXN0LFxuICAgICAgICBiYXNlSW1hZ2VyeVJlY3RhbmdsZS53ZXN0XG4gICAgICApO1xuICAgICAgcmVjdGFuZ2xlLmVhc3QgPSBNYXRoLm1pbihcbiAgICAgICAgYmFzZVRlcnJhaW5SZWN0YW5nbGUuZWFzdCxcbiAgICAgICAgYmFzZUltYWdlcnlSZWN0YW5nbGUuZWFzdFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbGF0aXR1ZGVDbG9zZXN0VG9FcXVhdG9yID0gMC4wO1xuICBpZiAocmVjdGFuZ2xlLnNvdXRoID4gMC4wKSB7XG4gICAgbGF0aXR1ZGVDbG9zZXN0VG9FcXVhdG9yID0gcmVjdGFuZ2xlLnNvdXRoO1xuICB9IGVsc2UgaWYgKHJlY3RhbmdsZS5ub3J0aCA8IDAuMCkge1xuICAgIGxhdGl0dWRlQ2xvc2VzdFRvRXF1YXRvciA9IHJlY3RhbmdsZS5ub3J0aDtcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIHJlcXVpcmVkIGxldmVsIGluIHRoZSBpbWFnZXJ5IHRpbGluZyBzY2hlbWUuXG4gIC8vIFRoZSBlcnJvclJhdGlvIHNob3VsZCByZWFsbHkgYmUgaW1hZ2VyeVNTRSAvIHRlcnJhaW5TU0UgcmF0aGVyIHRoYW4gdGhpcyBoYXJkLWNvZGVkIHZhbHVlLlxuICAvLyBCdXQgZmlyc3Qgd2UgbmVlZCBjb25maWd1cmFibGUgaW1hZ2VyeSBTU0UgYW5kIHdlIG5lZWQgdGhlIHJlbmRlcmluZyB0byBiZSBhYmxlIHRvIGhhbmRsZSBtb3JlXG4gIC8vIGltYWdlcyBhdHRhY2hlZCB0byBhIHRlcnJhaW4gdGlsZSB0aGFuIHRoZXJlIGFyZSBhdmFpbGFibGUgdGV4dHVyZSB1bml0cy4gIFNvIHRoYXQncyBmb3IgdGhlIGZ1dHVyZS5cbiAgdmFyIGVycm9yUmF0aW8gPSAxLjA7XG4gIHZhciB0YXJnZXRHZW9tZXRyaWNFcnJvciA9XG4gICAgZXJyb3JSYXRpbyAqIHRlcnJhaW5Qcm92aWRlci5nZXRMZXZlbE1heGltdW1HZW9tZXRyaWNFcnJvcih0aWxlLmxldmVsKTtcbiAgdmFyIGltYWdlcnlMZXZlbCA9IGdldExldmVsV2l0aE1heGltdW1UZXhlbFNwYWNpbmcoXG4gICAgdGhpcyxcbiAgICB0YXJnZXRHZW9tZXRyaWNFcnJvcixcbiAgICBsYXRpdHVkZUNsb3Nlc3RUb0VxdWF0b3JcbiAgKTtcbiAgaW1hZ2VyeUxldmVsID0gTWF0aC5tYXgoMCwgaW1hZ2VyeUxldmVsKTtcbiAgdmFyIG1heGltdW1MZXZlbCA9IGltYWdlcnlQcm92aWRlci5tYXhpbXVtTGV2ZWw7XG4gIGlmIChpbWFnZXJ5TGV2ZWwgPiBtYXhpbXVtTGV2ZWwpIHtcbiAgICBpbWFnZXJ5TGV2ZWwgPSBtYXhpbXVtTGV2ZWw7XG4gIH1cblxuICBpZiAoZGVmaW5lZChpbWFnZXJ5UHJvdmlkZXIubWluaW11bUxldmVsKSkge1xuICAgIHZhciBtaW5pbXVtTGV2ZWwgPSBpbWFnZXJ5UHJvdmlkZXIubWluaW11bUxldmVsO1xuICAgIGlmIChpbWFnZXJ5TGV2ZWwgPCBtaW5pbXVtTGV2ZWwpIHtcbiAgICAgIGltYWdlcnlMZXZlbCA9IG1pbmltdW1MZXZlbDtcbiAgICB9XG4gIH1cblxuICB2YXIgaW1hZ2VyeVRpbGluZ1NjaGVtZSA9IGltYWdlcnlQcm92aWRlci50aWxpbmdTY2hlbWU7XG4gIHZhciBub3J0aHdlc3RUaWxlQ29vcmRpbmF0ZXMgPSBpbWFnZXJ5VGlsaW5nU2NoZW1lLnBvc2l0aW9uVG9UaWxlWFkoXG4gICAgUmVjdGFuZ2xlLm5vcnRod2VzdChyZWN0YW5nbGUpLFxuICAgIGltYWdlcnlMZXZlbFxuICApO1xuICB2YXIgc291dGhlYXN0VGlsZUNvb3JkaW5hdGVzID0gaW1hZ2VyeVRpbGluZ1NjaGVtZS5wb3NpdGlvblRvVGlsZVhZKFxuICAgIFJlY3RhbmdsZS5zb3V0aGVhc3QocmVjdGFuZ2xlKSxcbiAgICBpbWFnZXJ5TGV2ZWxcbiAgKTtcblxuICAvLyBJZiB0aGUgc291dGhlYXN0IGNvcm5lciBvZiB0aGUgcmVjdGFuZ2xlIGxpZXMgdmVyeSBjbG9zZSB0byB0aGUgbm9ydGggb3Igd2VzdCBzaWRlXG4gIC8vIG9mIHRoZSBzb3V0aGVhc3QgdGlsZSwgd2UgZG9uJ3QgYWN0dWFsbHkgbmVlZCB0aGUgc291dGhlcm5tb3N0IG9yIGVhc3Rlcm5tb3N0XG4gIC8vIHRpbGVzLlxuICAvLyBTaW1pbGFybHksIGlmIHRoZSBub3J0aHdlc3QgY29ybmVyIG9mIHRoZSByZWN0YW5nbGUgbGllcyB2ZXJ5IGNsb3NlIHRvIHRoZSBzb3V0aCBvciBlYXN0IHNpZGVcbiAgLy8gb2YgdGhlIG5vcnRod2VzdCB0aWxlLCB3ZSBkb24ndCBhY3R1YWxseSBuZWVkIHRoZSBub3J0aGVybm1vc3Qgb3Igd2VzdGVybm1vc3QgdGlsZXMuXG5cbiAgLy8gV2UgZGVmaW5lIFwidmVyeSBjbG9zZVwiIGFzIGJlaW5nIHdpdGhpbiAxLzUxMiBvZiB0aGUgd2lkdGggb2YgdGhlIHRpbGUuXG4gIHZhciB2ZXJ5Q2xvc2VYID0gdGlsZS5yZWN0YW5nbGUud2lkdGggLyA1MTIuMDtcbiAgdmFyIHZlcnlDbG9zZVkgPSB0aWxlLnJlY3RhbmdsZS5oZWlnaHQgLyA1MTIuMDtcblxuICB2YXIgbm9ydGh3ZXN0VGlsZVJlY3RhbmdsZSA9IGltYWdlcnlUaWxpbmdTY2hlbWUudGlsZVhZVG9SZWN0YW5nbGUoXG4gICAgbm9ydGh3ZXN0VGlsZUNvb3JkaW5hdGVzLngsXG4gICAgbm9ydGh3ZXN0VGlsZUNvb3JkaW5hdGVzLnksXG4gICAgaW1hZ2VyeUxldmVsXG4gICk7XG4gIGlmIChcbiAgICBNYXRoLmFicyhub3J0aHdlc3RUaWxlUmVjdGFuZ2xlLnNvdXRoIC0gdGlsZS5yZWN0YW5nbGUubm9ydGgpIDxcbiAgICAgIHZlcnlDbG9zZVkgJiZcbiAgICBub3J0aHdlc3RUaWxlQ29vcmRpbmF0ZXMueSA8IHNvdXRoZWFzdFRpbGVDb29yZGluYXRlcy55XG4gICkge1xuICAgICsrbm9ydGh3ZXN0VGlsZUNvb3JkaW5hdGVzLnk7XG4gIH1cbiAgaWYgKFxuICAgIE1hdGguYWJzKG5vcnRod2VzdFRpbGVSZWN0YW5nbGUuZWFzdCAtIHRpbGUucmVjdGFuZ2xlLndlc3QpIDwgdmVyeUNsb3NlWCAmJlxuICAgIG5vcnRod2VzdFRpbGVDb29yZGluYXRlcy54IDwgc291dGhlYXN0VGlsZUNvb3JkaW5hdGVzLnhcbiAgKSB7XG4gICAgKytub3J0aHdlc3RUaWxlQ29vcmRpbmF0ZXMueDtcbiAgfVxuXG4gIHZhciBzb3V0aGVhc3RUaWxlUmVjdGFuZ2xlID0gaW1hZ2VyeVRpbGluZ1NjaGVtZS50aWxlWFlUb1JlY3RhbmdsZShcbiAgICBzb3V0aGVhc3RUaWxlQ29vcmRpbmF0ZXMueCxcbiAgICBzb3V0aGVhc3RUaWxlQ29vcmRpbmF0ZXMueSxcbiAgICBpbWFnZXJ5TGV2ZWxcbiAgKTtcbiAgaWYgKFxuICAgIE1hdGguYWJzKHNvdXRoZWFzdFRpbGVSZWN0YW5nbGUubm9ydGggLSB0aWxlLnJlY3RhbmdsZS5zb3V0aCkgPFxuICAgICAgdmVyeUNsb3NlWSAmJlxuICAgIHNvdXRoZWFzdFRpbGVDb29yZGluYXRlcy55ID4gbm9ydGh3ZXN0VGlsZUNvb3JkaW5hdGVzLnlcbiAgKSB7XG4gICAgLS1zb3V0aGVhc3RUaWxlQ29vcmRpbmF0ZXMueTtcbiAgfVxuICBpZiAoXG4gICAgTWF0aC5hYnMoc291dGhlYXN0VGlsZVJlY3RhbmdsZS53ZXN0IC0gdGlsZS5yZWN0YW5nbGUuZWFzdCkgPCB2ZXJ5Q2xvc2VYICYmXG4gICAgc291dGhlYXN0VGlsZUNvb3JkaW5hdGVzLnggPiBub3J0aHdlc3RUaWxlQ29vcmRpbmF0ZXMueFxuICApIHtcbiAgICAtLXNvdXRoZWFzdFRpbGVDb29yZGluYXRlcy54O1xuICB9XG5cbiAgLy8gQ3JlYXRlIFRpbGVJbWFnZXJ5IGluc3RhbmNlcyBmb3IgZWFjaCBpbWFnZXJ5IHRpbGUgb3ZlcmxhcHBpbmcgdGhpcyB0ZXJyYWluIHRpbGUuXG4gIC8vIFdlIG5lZWQgdG8gZG8gYWxsIHRleHR1cmUgY29vcmRpbmF0ZSBjb21wdXRhdGlvbnMgaW4gdGhlIGltYWdlcnkgdGlsZSdzIHRpbGluZyBzY2hlbWUuXG5cbiAgdmFyIHRlcnJhaW5SZWN0YW5nbGUgPSBSZWN0YW5nbGUuY2xvbmUoXG4gICAgdGlsZS5yZWN0YW5nbGUsXG4gICAgdGVycmFpblJlY3RhbmdsZVNjcmF0Y2hcbiAgKTtcbiAgdmFyIGltYWdlcnlSZWN0YW5nbGUgPSBpbWFnZXJ5VGlsaW5nU2NoZW1lLnRpbGVYWVRvUmVjdGFuZ2xlKFxuICAgIG5vcnRod2VzdFRpbGVDb29yZGluYXRlcy54LFxuICAgIG5vcnRod2VzdFRpbGVDb29yZGluYXRlcy55LFxuICAgIGltYWdlcnlMZXZlbFxuICApO1xuICB2YXIgY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUgPSBSZWN0YW5nbGUuaW50ZXJzZWN0aW9uKFxuICAgIGltYWdlcnlSZWN0YW5nbGUsXG4gICAgaW1hZ2VyeUJvdW5kcyxcbiAgICBjbGlwcGVkUmVjdGFuZ2xlU2NyYXRjaFxuICApO1xuXG4gIHZhciBpbWFnZXJ5VGlsZVhZVG9SZWN0YW5nbGU7XG4gIGlmICh1c2VXZWJNZXJjYXRvclQpIHtcbiAgICBpbWFnZXJ5VGlsaW5nU2NoZW1lLnJlY3RhbmdsZVRvTmF0aXZlUmVjdGFuZ2xlKFxuICAgICAgdGVycmFpblJlY3RhbmdsZSxcbiAgICAgIHRlcnJhaW5SZWN0YW5nbGVcbiAgICApO1xuICAgIGltYWdlcnlUaWxpbmdTY2hlbWUucmVjdGFuZ2xlVG9OYXRpdmVSZWN0YW5nbGUoXG4gICAgICBpbWFnZXJ5UmVjdGFuZ2xlLFxuICAgICAgaW1hZ2VyeVJlY3RhbmdsZVxuICAgICk7XG4gICAgaW1hZ2VyeVRpbGluZ1NjaGVtZS5yZWN0YW5nbGVUb05hdGl2ZVJlY3RhbmdsZShcbiAgICAgIGNsaXBwZWRJbWFnZXJ5UmVjdGFuZ2xlLFxuICAgICAgY2xpcHBlZEltYWdlcnlSZWN0YW5nbGVcbiAgICApO1xuICAgIGltYWdlcnlUaWxpbmdTY2hlbWUucmVjdGFuZ2xlVG9OYXRpdmVSZWN0YW5nbGUoXG4gICAgICBpbWFnZXJ5Qm91bmRzLFxuICAgICAgaW1hZ2VyeUJvdW5kc1xuICAgICk7XG4gICAgaW1hZ2VyeVRpbGVYWVRvUmVjdGFuZ2xlID0gaW1hZ2VyeVRpbGluZ1NjaGVtZS50aWxlWFlUb05hdGl2ZVJlY3RhbmdsZS5iaW5kKFxuICAgICAgaW1hZ2VyeVRpbGluZ1NjaGVtZVxuICAgICk7XG4gICAgdmVyeUNsb3NlWCA9IHRlcnJhaW5SZWN0YW5nbGUud2lkdGggLyA1MTIuMDtcbiAgICB2ZXJ5Q2xvc2VZID0gdGVycmFpblJlY3RhbmdsZS5oZWlnaHQgLyA1MTIuMDtcbiAgfSBlbHNlIHtcbiAgICBpbWFnZXJ5VGlsZVhZVG9SZWN0YW5nbGUgPSBpbWFnZXJ5VGlsaW5nU2NoZW1lLnRpbGVYWVRvUmVjdGFuZ2xlLmJpbmQoXG4gICAgICBpbWFnZXJ5VGlsaW5nU2NoZW1lXG4gICAgKTtcbiAgfVxuXG4gIHZhciBtaW5VO1xuICB2YXIgbWF4VSA9IDAuMDtcblxuICB2YXIgbWluViA9IDEuMDtcbiAgdmFyIG1heFY7XG5cbiAgLy8gSWYgdGhpcyBpcyB0aGUgbm9ydGhlcm4tbW9zdCBvciB3ZXN0ZXJuLW1vc3QgdGlsZSBpbiB0aGUgaW1hZ2VyeSB0aWxpbmcgc2NoZW1lLFxuICAvLyBpdCBtYXkgbm90IHN0YXJ0IGF0IHRoZSBub3J0aGVybiBvciB3ZXN0ZXJuIGVkZ2Ugb2YgdGhlIHRlcnJhaW4gdGlsZS5cbiAgLy8gQ2FsY3VsYXRlIHdoZXJlIGl0IGRvZXMgc3RhcnQuXG4gIGlmIChcbiAgICAhdGhpcy5pc0Jhc2VMYXllcigpICYmXG4gICAgTWF0aC5hYnMoY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUud2VzdCAtIHRlcnJhaW5SZWN0YW5nbGUud2VzdCkgPj0gdmVyeUNsb3NlWFxuICApIHtcbiAgICBtYXhVID0gTWF0aC5taW4oXG4gICAgICAxLjAsXG4gICAgICAoY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUud2VzdCAtIHRlcnJhaW5SZWN0YW5nbGUud2VzdCkgL1xuICAgICAgICB0ZXJyYWluUmVjdGFuZ2xlLndpZHRoXG4gICAgKTtcbiAgfVxuXG4gIGlmIChcbiAgICAhdGhpcy5pc0Jhc2VMYXllcigpICYmXG4gICAgTWF0aC5hYnMoY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUubm9ydGggLSB0ZXJyYWluUmVjdGFuZ2xlLm5vcnRoKSA+PVxuICAgICAgdmVyeUNsb3NlWVxuICApIHtcbiAgICBtaW5WID0gTWF0aC5tYXgoXG4gICAgICAwLjAsXG4gICAgICAoY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUubm9ydGggLSB0ZXJyYWluUmVjdGFuZ2xlLnNvdXRoKSAvXG4gICAgICAgIHRlcnJhaW5SZWN0YW5nbGUuaGVpZ2h0XG4gICAgKTtcbiAgfVxuXG4gIHZhciBpbml0aWFsTWluViA9IG1pblY7XG5cbiAgZm9yIChcbiAgICB2YXIgaSA9IG5vcnRod2VzdFRpbGVDb29yZGluYXRlcy54O1xuICAgIGkgPD0gc291dGhlYXN0VGlsZUNvb3JkaW5hdGVzLng7XG4gICAgaSsrXG4gICkge1xuICAgIG1pblUgPSBtYXhVO1xuXG4gICAgaW1hZ2VyeVJlY3RhbmdsZSA9IGltYWdlcnlUaWxlWFlUb1JlY3RhbmdsZShcbiAgICAgIGksXG4gICAgICBub3J0aHdlc3RUaWxlQ29vcmRpbmF0ZXMueSxcbiAgICAgIGltYWdlcnlMZXZlbFxuICAgICk7XG4gICAgY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUgPSBSZWN0YW5nbGUuc2ltcGxlSW50ZXJzZWN0aW9uKFxuICAgICAgaW1hZ2VyeVJlY3RhbmdsZSxcbiAgICAgIGltYWdlcnlCb3VuZHMsXG4gICAgICBjbGlwcGVkUmVjdGFuZ2xlU2NyYXRjaFxuICAgICk7XG5cbiAgICBpZiAoIWRlZmluZWQoY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBtYXhVID0gTWF0aC5taW4oXG4gICAgICAxLjAsXG4gICAgICAoY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUuZWFzdCAtIHRlcnJhaW5SZWN0YW5nbGUud2VzdCkgL1xuICAgICAgICB0ZXJyYWluUmVjdGFuZ2xlLndpZHRoXG4gICAgKTtcblxuICAgIC8vIElmIHRoaXMgaXMgdGhlIGVhc3Rlcm4tbW9zdCBpbWFnZXJ5IHRpbGUgbWFwcGVkIHRvIHRoaXMgdGVycmFpbiB0aWxlLFxuICAgIC8vIGFuZCB0aGVyZSBhcmUgbW9yZSBpbWFnZXJ5IHRpbGVzIHRvIHRoZSBlYXN0IG9mIHRoaXMgb25lLCB0aGUgbWF4VVxuICAgIC8vIHNob3VsZCBiZSAxLjAgdG8gbWFrZSBzdXJlIHJvdW5kaW5nIGVycm9ycyBkb24ndCBtYWtlIHRoZSBsYXN0XG4gICAgLy8gaW1hZ2UgZmFsbCBzaHkgb2YgdGhlIGVkZ2Ugb2YgdGhlIHRlcnJhaW4gdGlsZS5cbiAgICBpZiAoXG4gICAgICBpID09PSBzb3V0aGVhc3RUaWxlQ29vcmRpbmF0ZXMueCAmJlxuICAgICAgKHRoaXMuaXNCYXNlTGF5ZXIoKSB8fFxuICAgICAgICBNYXRoLmFicyhjbGlwcGVkSW1hZ2VyeVJlY3RhbmdsZS5lYXN0IC0gdGVycmFpblJlY3RhbmdsZS5lYXN0KSA8XG4gICAgICAgICAgdmVyeUNsb3NlWClcbiAgICApIHtcbiAgICAgIG1heFUgPSAxLjA7XG4gICAgfVxuXG4gICAgbWluViA9IGluaXRpYWxNaW5WO1xuXG4gICAgZm9yIChcbiAgICAgIHZhciBqID0gbm9ydGh3ZXN0VGlsZUNvb3JkaW5hdGVzLnk7XG4gICAgICBqIDw9IHNvdXRoZWFzdFRpbGVDb29yZGluYXRlcy55O1xuICAgICAgaisrXG4gICAgKSB7XG4gICAgICBtYXhWID0gbWluVjtcblxuICAgICAgaW1hZ2VyeVJlY3RhbmdsZSA9IGltYWdlcnlUaWxlWFlUb1JlY3RhbmdsZShpLCBqLCBpbWFnZXJ5TGV2ZWwpO1xuICAgICAgY2xpcHBlZEltYWdlcnlSZWN0YW5nbGUgPSBSZWN0YW5nbGUuc2ltcGxlSW50ZXJzZWN0aW9uKFxuICAgICAgICBpbWFnZXJ5UmVjdGFuZ2xlLFxuICAgICAgICBpbWFnZXJ5Qm91bmRzLFxuICAgICAgICBjbGlwcGVkUmVjdGFuZ2xlU2NyYXRjaFxuICAgICAgKTtcblxuICAgICAgaWYgKCFkZWZpbmVkKGNsaXBwZWRJbWFnZXJ5UmVjdGFuZ2xlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbWluViA9IE1hdGgubWF4KFxuICAgICAgICAwLjAsXG4gICAgICAgIChjbGlwcGVkSW1hZ2VyeVJlY3RhbmdsZS5zb3V0aCAtIHRlcnJhaW5SZWN0YW5nbGUuc291dGgpIC9cbiAgICAgICAgICB0ZXJyYWluUmVjdGFuZ2xlLmhlaWdodFxuICAgICAgKTtcblxuICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgc291dGhlcm4tbW9zdCBpbWFnZXJ5IHRpbGUgbWFwcGVkIHRvIHRoaXMgdGVycmFpbiB0aWxlLFxuICAgICAgLy8gYW5kIHRoZXJlIGFyZSBtb3JlIGltYWdlcnkgdGlsZXMgdG8gdGhlIHNvdXRoIG9mIHRoaXMgb25lLCB0aGUgbWluVlxuICAgICAgLy8gc2hvdWxkIGJlIDAuMCB0byBtYWtlIHN1cmUgcm91bmRpbmcgZXJyb3JzIGRvbid0IG1ha2UgdGhlIGxhc3RcbiAgICAgIC8vIGltYWdlIGZhbGwgc2h5IG9mIHRoZSBlZGdlIG9mIHRoZSB0ZXJyYWluIHRpbGUuXG4gICAgICBpZiAoXG4gICAgICAgIGogPT09IHNvdXRoZWFzdFRpbGVDb29yZGluYXRlcy55ICYmXG4gICAgICAgICh0aGlzLmlzQmFzZUxheWVyKCkgfHxcbiAgICAgICAgICBNYXRoLmFicyhjbGlwcGVkSW1hZ2VyeVJlY3RhbmdsZS5zb3V0aCAtIHRlcnJhaW5SZWN0YW5nbGUuc291dGgpIDxcbiAgICAgICAgICAgIHZlcnlDbG9zZVkpXG4gICAgICApIHtcbiAgICAgICAgbWluViA9IDAuMDtcbiAgICAgIH1cblxuICAgICAgdmFyIHRleENvb3Jkc1JlY3RhbmdsZSA9IG5ldyBDYXJ0ZXNpYW40KG1pblUsIG1pblYsIG1heFUsIG1heFYpO1xuICAgICAgdmFyIGltYWdlcnkgPSB0aGlzLmdldEltYWdlcnlGcm9tQ2FjaGUoaSwgaiwgaW1hZ2VyeUxldmVsKTtcbiAgICAgIHN1cmZhY2VUaWxlLmltYWdlcnkuc3BsaWNlKFxuICAgICAgICBpbnNlcnRpb25Qb2ludCxcbiAgICAgICAgMCxcbiAgICAgICAgbmV3IFRpbGVJbWFnZXJ5KGltYWdlcnksIHRleENvb3Jkc1JlY3RhbmdsZSwgdXNlV2ViTWVyY2F0b3JUKVxuICAgICAgKTtcbiAgICAgICsraW5zZXJ0aW9uUG9pbnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgdHJhbnNsYXRpb24gYW5kIHNjYWxlIGZvciBhIHBhcnRpY3VsYXIge0BsaW5rIFRpbGVJbWFnZXJ5fSBhdHRhY2hlZCB0byBhXG4gKiBwYXJ0aWN1bGFyIHRlcnJhaW4gdGlsZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7VGlsZX0gdGlsZSBUaGUgdGVycmFpbiB0aWxlLlxuICogQHBhcmFtIHtUaWxlSW1hZ2VyeX0gdGlsZUltYWdlcnkgVGhlIGltYWdlcnkgdGlsZSBtYXBwaW5nLlxuICogQHJldHVybnMge0NhcnRlc2lhbjR9IFRoZSB0cmFuc2xhdGlvbiBhbmQgc2NhbGUgd2hlcmUgWCBhbmQgWSBhcmUgdGhlIHRyYW5zbGF0aW9uIGFuZCBaIGFuZCBXXG4gKiAgICAgICAgICBhcmUgdGhlIHNjYWxlLlxuICovXG5JbWFnZXJ5TGF5ZXIucHJvdG90eXBlLl9jYWxjdWxhdGVUZXh0dXJlVHJhbnNsYXRpb25BbmRTY2FsZSA9IGZ1bmN0aW9uIChcbiAgdGlsZSxcbiAgdGlsZUltYWdlcnlcbikge1xuICB2YXIgaW1hZ2VyeVJlY3RhbmdsZSA9IHRpbGVJbWFnZXJ5LnJlYWR5SW1hZ2VyeS5yZWN0YW5nbGU7XG4gIHZhciB0ZXJyYWluUmVjdGFuZ2xlID0gdGlsZS5yZWN0YW5nbGU7XG5cbiAgaWYgKHRpbGVJbWFnZXJ5LnVzZVdlYk1lcmNhdG9yVCkge1xuICAgIHZhciB0aWxpbmdTY2hlbWUgPVxuICAgICAgdGlsZUltYWdlcnkucmVhZHlJbWFnZXJ5LmltYWdlcnlMYXllci5pbWFnZXJ5UHJvdmlkZXIudGlsaW5nU2NoZW1lO1xuICAgIGltYWdlcnlSZWN0YW5nbGUgPSB0aWxpbmdTY2hlbWUucmVjdGFuZ2xlVG9OYXRpdmVSZWN0YW5nbGUoXG4gICAgICBpbWFnZXJ5UmVjdGFuZ2xlLFxuICAgICAgaW1hZ2VyeUJvdW5kc1NjcmF0Y2hcbiAgICApO1xuICAgIHRlcnJhaW5SZWN0YW5nbGUgPSB0aWxpbmdTY2hlbWUucmVjdGFuZ2xlVG9OYXRpdmVSZWN0YW5nbGUoXG4gICAgICB0ZXJyYWluUmVjdGFuZ2xlLFxuICAgICAgdGVycmFpblJlY3RhbmdsZVNjcmF0Y2hcbiAgICApO1xuICB9XG5cbiAgdmFyIHRlcnJhaW5XaWR0aCA9IHRlcnJhaW5SZWN0YW5nbGUud2lkdGg7XG4gIHZhciB0ZXJyYWluSGVpZ2h0ID0gdGVycmFpblJlY3RhbmdsZS5oZWlnaHQ7XG5cbiAgdmFyIHNjYWxlWCA9IHRlcnJhaW5XaWR0aCAvIGltYWdlcnlSZWN0YW5nbGUud2lkdGg7XG4gIHZhciBzY2FsZVkgPSB0ZXJyYWluSGVpZ2h0IC8gaW1hZ2VyeVJlY3RhbmdsZS5oZWlnaHQ7XG4gIHJldHVybiBuZXcgQ2FydGVzaWFuNChcbiAgICAoc2NhbGVYICogKHRlcnJhaW5SZWN0YW5nbGUud2VzdCAtIGltYWdlcnlSZWN0YW5nbGUud2VzdCkpIC8gdGVycmFpbldpZHRoLFxuICAgIChzY2FsZVkgKiAodGVycmFpblJlY3RhbmdsZS5zb3V0aCAtIGltYWdlcnlSZWN0YW5nbGUuc291dGgpKSAvXG4gICAgICB0ZXJyYWluSGVpZ2h0LFxuICAgIHNjYWxlWCxcbiAgICBzY2FsZVlcbiAgKTtcbn07XG5cbi8qKlxuICogUmVxdWVzdCBhIHBhcnRpY3VsYXIgcGllY2Ugb2YgaW1hZ2VyeSBmcm9tIHRoZSBpbWFnZXJ5IHByb3ZpZGVyLiAgVGhpcyBtZXRob2QgaGFuZGxlcyByYWlzaW5nIGFuXG4gKiBlcnJvciBldmVudCBpZiB0aGUgcmVxdWVzdCBmYWlscywgYW5kIHJldHJ5aW5nIHRoZSByZXF1ZXN0IGlmIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7SW1hZ2VyeX0gaW1hZ2VyeSBUaGUgaW1hZ2VyeSB0byByZXF1ZXN0LlxuICovXG5JbWFnZXJ5TGF5ZXIucHJvdG90eXBlLl9yZXF1ZXN0SW1hZ2VyeSA9IGZ1bmN0aW9uIChpbWFnZXJ5KSB7XG4gIHZhciBpbWFnZXJ5UHJvdmlkZXIgPSB0aGlzLl9pbWFnZXJ5UHJvdmlkZXI7XG5cbiAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gIGZ1bmN0aW9uIHN1Y2Nlc3MoaW1hZ2UpIHtcbiAgICBpZiAoIWRlZmluZWQoaW1hZ2UpKSB7XG4gICAgICByZXR1cm4gZmFpbHVyZSgpO1xuICAgIH1cblxuICAgIGltYWdlcnkuaW1hZ2UgPSBpbWFnZTtcbiAgICBpbWFnZXJ5LnN0YXRlID0gSW1hZ2VyeVN0YXRlLlJFQ0VJVkVEO1xuICAgIGltYWdlcnkucmVxdWVzdCA9IHVuZGVmaW5lZDtcblxuICAgIFRpbGVQcm92aWRlckVycm9yLmhhbmRsZVN1Y2Nlc3ModGhhdC5fcmVxdWVzdEltYWdlRXJyb3IpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmFpbHVyZShlKSB7XG4gICAgaWYgKGltYWdlcnkucmVxdWVzdC5zdGF0ZSA9PT0gUmVxdWVzdFN0YXRlLkNBTkNFTExFRCkge1xuICAgICAgLy8gQ2FuY2VsbGVkIGR1ZSB0byBsb3cgcHJpb3JpdHkgLSB0cnkgYWdhaW4gbGF0ZXIuXG4gICAgICBpbWFnZXJ5LnN0YXRlID0gSW1hZ2VyeVN0YXRlLlVOTE9BREVEO1xuICAgICAgaW1hZ2VyeS5yZXF1ZXN0ID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxseSBhc3N1bWUgZmFpbHVyZS4gIGhhbmRsZUVycm9yIG1heSByZXRyeSwgaW4gd2hpY2ggY2FzZSB0aGUgc3RhdGUgd2lsbFxuICAgIC8vIGNoYW5nZSB0byBUUkFOU0lUSU9OSU5HLlxuICAgIGltYWdlcnkuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuRkFJTEVEO1xuICAgIGltYWdlcnkucmVxdWVzdCA9IHVuZGVmaW5lZDtcblxuICAgIHZhciBtZXNzYWdlID1cbiAgICAgIFwiRmFpbGVkIHRvIG9idGFpbiBpbWFnZSB0aWxlIFg6IFwiICtcbiAgICAgIGltYWdlcnkueCArXG4gICAgICBcIiBZOiBcIiArXG4gICAgICBpbWFnZXJ5LnkgK1xuICAgICAgXCIgTGV2ZWw6IFwiICtcbiAgICAgIGltYWdlcnkubGV2ZWwgK1xuICAgICAgXCIuXCI7XG4gICAgdGhhdC5fcmVxdWVzdEltYWdlRXJyb3IgPSBUaWxlUHJvdmlkZXJFcnJvci5oYW5kbGVFcnJvcihcbiAgICAgIHRoYXQuX3JlcXVlc3RJbWFnZUVycm9yLFxuICAgICAgaW1hZ2VyeVByb3ZpZGVyLFxuICAgICAgaW1hZ2VyeVByb3ZpZGVyLmVycm9yRXZlbnQsXG4gICAgICBtZXNzYWdlLFxuICAgICAgaW1hZ2VyeS54LFxuICAgICAgaW1hZ2VyeS55LFxuICAgICAgaW1hZ2VyeS5sZXZlbCxcbiAgICAgIGRvUmVxdWVzdCxcbiAgICAgIGVcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gZG9SZXF1ZXN0KCkge1xuICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3Qoe1xuICAgICAgdGhyb3R0bGU6IGZhbHNlLFxuICAgICAgdGhyb3R0bGVCeVNlcnZlcjogdHJ1ZSxcbiAgICAgIHR5cGU6IFJlcXVlc3RUeXBlLklNQUdFUlksXG4gICAgfSk7XG4gICAgaW1hZ2VyeS5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICBpbWFnZXJ5LnN0YXRlID0gSW1hZ2VyeVN0YXRlLlRSQU5TSVRJT05JTkc7XG4gICAgdmFyIGltYWdlUHJvbWlzZSA9IGltYWdlcnlQcm92aWRlci5yZXF1ZXN0SW1hZ2UoXG4gICAgICBpbWFnZXJ5LngsXG4gICAgICBpbWFnZXJ5LnksXG4gICAgICBpbWFnZXJ5LmxldmVsLFxuICAgICAgcmVxdWVzdFxuICAgICk7XG5cbiAgICBpZiAoIWRlZmluZWQoaW1hZ2VQcm9taXNlKSkge1xuICAgICAgLy8gVG9vIG1hbnkgcGFyYWxsZWwgcmVxdWVzdHMsIHNvIHBvc3Rwb25lIGxvYWRpbmcgdGlsZS5cbiAgICAgIGltYWdlcnkuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuVU5MT0FERUQ7XG4gICAgICBpbWFnZXJ5LnJlcXVlc3QgPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRlZmluZWQoaW1hZ2VyeVByb3ZpZGVyLmdldFRpbGVDcmVkaXRzKSkge1xuICAgICAgaW1hZ2VyeS5jcmVkaXRzID0gaW1hZ2VyeVByb3ZpZGVyLmdldFRpbGVDcmVkaXRzKFxuICAgICAgICBpbWFnZXJ5LngsXG4gICAgICAgIGltYWdlcnkueSxcbiAgICAgICAgaW1hZ2VyeS5sZXZlbFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB3aGVuKGltYWdlUHJvbWlzZSwgc3VjY2VzcywgZmFpbHVyZSk7XG4gIH1cblxuICBkb1JlcXVlc3QoKTtcbn07XG5cbkltYWdlcnlMYXllci5wcm90b3R5cGUuX2NyZWF0ZVRleHR1cmVXZWJHTCA9IGZ1bmN0aW9uIChjb250ZXh0LCBpbWFnZXJ5KSB7XG4gIHZhciBzYW1wbGVyID0gbmV3IFNhbXBsZXIoe1xuICAgIG1pbmlmaWNhdGlvbkZpbHRlcjogdGhpcy5taW5pZmljYXRpb25GaWx0ZXIsXG4gICAgbWFnbmlmaWNhdGlvbkZpbHRlcjogdGhpcy5tYWduaWZpY2F0aW9uRmlsdGVyLFxuICB9KTtcblxuICB2YXIgaW1hZ2UgPSBpbWFnZXJ5LmltYWdlO1xuXG4gIGlmIChkZWZpbmVkKGltYWdlLmludGVybmFsRm9ybWF0KSkge1xuICAgIHJldHVybiBuZXcgVGV4dHVyZSh7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgcGl4ZWxGb3JtYXQ6IGltYWdlLmludGVybmFsRm9ybWF0LFxuICAgICAgd2lkdGg6IGltYWdlLndpZHRoLFxuICAgICAgaGVpZ2h0OiBpbWFnZS5oZWlnaHQsXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgYXJyYXlCdWZmZXJWaWV3OiBpbWFnZS5idWZmZXJWaWV3LFxuICAgICAgfSxcbiAgICAgIHNhbXBsZXI6IHNhbXBsZXIsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5ldyBUZXh0dXJlKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHNvdXJjZTogaW1hZ2UsXG4gICAgcGl4ZWxGb3JtYXQ6IHRoaXMuX2ltYWdlcnlQcm92aWRlci5oYXNBbHBoYUNoYW5uZWxcbiAgICAgID8gUGl4ZWxGb3JtYXQuUkdCQVxuICAgICAgOiBQaXhlbEZvcm1hdC5SR0IsXG4gICAgc2FtcGxlcjogc2FtcGxlcixcbiAgfSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIFdlYkdMIHRleHR1cmUgZm9yIGEgZ2l2ZW4ge0BsaW5rIEltYWdlcnl9IGluc3RhbmNlLlxuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtIHtDb250ZXh0fSBjb250ZXh0IFRoZSByZW5kZXJlZCBjb250ZXh0IHRvIHVzZSB0byBjcmVhdGUgdGV4dHVyZXMuXG4gKiBAcGFyYW0ge0ltYWdlcnl9IGltYWdlcnkgVGhlIGltYWdlcnkgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIHRleHR1cmUuXG4gKi9cbkltYWdlcnlMYXllci5wcm90b3R5cGUuX2NyZWF0ZVRleHR1cmUgPSBmdW5jdGlvbiAoY29udGV4dCwgaW1hZ2VyeSkge1xuICB2YXIgaW1hZ2VyeVByb3ZpZGVyID0gdGhpcy5faW1hZ2VyeVByb3ZpZGVyO1xuICB2YXIgaW1hZ2UgPSBpbWFnZXJ5LmltYWdlO1xuXG4gIC8vIElmIHRoaXMgaW1hZ2VyeSBwcm92aWRlciBoYXMgYSBkaXNjYXJkIHBvbGljeSwgdXNlIGl0IHRvIGNoZWNrIGlmIHRoaXNcbiAgLy8gaW1hZ2Ugc2hvdWxkIGJlIGRpc2NhcmRlZC5cbiAgaWYgKGRlZmluZWQoaW1hZ2VyeVByb3ZpZGVyLnRpbGVEaXNjYXJkUG9saWN5KSkge1xuICAgIHZhciBkaXNjYXJkUG9saWN5ID0gaW1hZ2VyeVByb3ZpZGVyLnRpbGVEaXNjYXJkUG9saWN5O1xuICAgIGlmIChkZWZpbmVkKGRpc2NhcmRQb2xpY3kpKSB7XG4gICAgICAvLyBJZiB0aGUgZGlzY2FyZCBwb2xpY3kgaXMgbm90IHJlYWR5IHlldCwgdHJhbnNpdGlvbiBiYWNrIHRvIHRoZVxuICAgICAgLy8gUkVDRUlWRUQgc3RhdGUgYW5kIHdlJ2xsIHRyeSBhZ2FpbiBuZXh0IHRpbWUuXG4gICAgICBpZiAoIWRpc2NhcmRQb2xpY3kuaXNSZWFkeSgpKSB7XG4gICAgICAgIGltYWdlcnkuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuUkVDRUlWRUQ7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFyayBkaXNjYXJkZWQgaW1hZ2VyeSB0aWxlcyBpbnZhbGlkLiAgUGFyZW50IGltYWdlcnkgd2lsbCBiZSB1c2VkIGluc3RlYWQuXG4gICAgICBpZiAoZGlzY2FyZFBvbGljeS5zaG91bGREaXNjYXJkSW1hZ2UoaW1hZ2UpKSB7XG4gICAgICAgIGltYWdlcnkuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuSU5WQUxJRDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChcbiAgICB0aGlzLm1pbmlmaWNhdGlvbkZpbHRlciAhPT0gVGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlci5ORUFSRVNUICYmXG4gICAgdGhpcy5taW5pZmljYXRpb25GaWx0ZXIgIT09IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuTElORUFSXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiSW1hZ2VyeUxheWVyIG1pbmlmaWNhdGlvbiBmaWx0ZXIgbXVzdCBiZSBORUFSRVNUIG9yIExJTkVBUlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAvLyBJbWFnZXJ5IGRvZXMgbm90IG5lZWQgdG8gYmUgZGlzY2FyZGVkLCBzbyB1cGxvYWQgaXQgdG8gV2ViR0wuXG4gIHZhciB0ZXh0dXJlID0gdGhpcy5fY3JlYXRlVGV4dHVyZVdlYkdMKGNvbnRleHQsIGltYWdlcnkpO1xuXG4gIGlmIChcbiAgICBpbWFnZXJ5UHJvdmlkZXIudGlsaW5nU2NoZW1lLnByb2plY3Rpb24gaW5zdGFuY2VvZiBXZWJNZXJjYXRvclByb2plY3Rpb25cbiAgKSB7XG4gICAgaW1hZ2VyeS50ZXh0dXJlV2ViTWVyY2F0b3IgPSB0ZXh0dXJlO1xuICB9IGVsc2Uge1xuICAgIGltYWdlcnkudGV4dHVyZSA9IHRleHR1cmU7XG4gIH1cbiAgaW1hZ2VyeS5pbWFnZSA9IHVuZGVmaW5lZDtcbiAgaW1hZ2VyeS5zdGF0ZSA9IEltYWdlcnlTdGF0ZS5URVhUVVJFX0xPQURFRDtcbn07XG5cbmZ1bmN0aW9uIGdldFNhbXBsZXJLZXkoXG4gIG1pbmlmaWNhdGlvbkZpbHRlcixcbiAgbWFnbmlmaWNhdGlvbkZpbHRlcixcbiAgbWF4aW11bUFuaXNvdHJvcHlcbikge1xuICByZXR1cm4gKFxuICAgIG1pbmlmaWNhdGlvbkZpbHRlciArIFwiOlwiICsgbWFnbmlmaWNhdGlvbkZpbHRlciArIFwiOlwiICsgbWF4aW11bUFuaXNvdHJvcHlcbiAgKTtcbn1cblxuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5fZmluYWxpemVSZXByb2plY3RUZXh0dXJlID0gZnVuY3Rpb24gKGNvbnRleHQsIHRleHR1cmUpIHtcbiAgdmFyIG1pbmlmaWNhdGlvbkZpbHRlciA9IHRoaXMubWluaWZpY2F0aW9uRmlsdGVyO1xuICB2YXIgbWFnbmlmaWNhdGlvbkZpbHRlciA9IHRoaXMubWFnbmlmaWNhdGlvbkZpbHRlcjtcbiAgdmFyIHVzZXNMaW5lYXJUZXh0dXJlRmlsdGVyID1cbiAgICBtaW5pZmljYXRpb25GaWx0ZXIgPT09IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuTElORUFSICYmXG4gICAgbWFnbmlmaWNhdGlvbkZpbHRlciA9PT0gVGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXIuTElORUFSO1xuICAvLyBVc2UgbWlwbWFwcyBpZiB0aGlzIHRleHR1cmUgaGFzIHBvd2VyLW9mLXR3byBkaW1lbnNpb25zLlxuICAvLyBJbiBhZGRpdGlvbiwgbWlwbWFwcyBhcmUgb25seSBnZW5lcmF0ZWQgaWYgdGhlIHRleHR1cmUgZmlsdGVycyBhcmUgYm90aCBMSU5FQVIuXG4gIGlmIChcbiAgICB1c2VzTGluZWFyVGV4dHVyZUZpbHRlciAmJlxuICAgICFQaXhlbEZvcm1hdC5pc0NvbXByZXNzZWRGb3JtYXQodGV4dHVyZS5waXhlbEZvcm1hdCkgJiZcbiAgICBDZXNpdW1NYXRoLmlzUG93ZXJPZlR3byh0ZXh0dXJlLndpZHRoKSAmJlxuICAgIENlc2l1bU1hdGguaXNQb3dlck9mVHdvKHRleHR1cmUuaGVpZ2h0KVxuICApIHtcbiAgICBtaW5pZmljYXRpb25GaWx0ZXIgPSBUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyLkxJTkVBUl9NSVBNQVBfTElORUFSO1xuICAgIHZhciBtYXhpbXVtU3VwcG9ydGVkQW5pc290cm9weSA9XG4gICAgICBDb250ZXh0TGltaXRzLm1heGltdW1UZXh0dXJlRmlsdGVyQW5pc290cm9weTtcbiAgICB2YXIgbWF4aW11bUFuaXNvdHJvcHkgPSBNYXRoLm1pbihcbiAgICAgIG1heGltdW1TdXBwb3J0ZWRBbmlzb3Ryb3B5LFxuICAgICAgZGVmYXVsdFZhbHVlKHRoaXMuX21heGltdW1Bbmlzb3Ryb3B5LCBtYXhpbXVtU3VwcG9ydGVkQW5pc290cm9weSlcbiAgICApO1xuICAgIHZhciBtaXBtYXBTYW1wbGVyS2V5ID0gZ2V0U2FtcGxlcktleShcbiAgICAgIG1pbmlmaWNhdGlvbkZpbHRlcixcbiAgICAgIG1hZ25pZmljYXRpb25GaWx0ZXIsXG4gICAgICBtYXhpbXVtQW5pc290cm9weVxuICAgICk7XG4gICAgdmFyIG1pcG1hcFNhbXBsZXJzID0gY29udGV4dC5jYWNoZS5pbWFnZXJ5TGF5ZXJNaXBtYXBTYW1wbGVycztcbiAgICBpZiAoIWRlZmluZWQobWlwbWFwU2FtcGxlcnMpKSB7XG4gICAgICBtaXBtYXBTYW1wbGVycyA9IHt9O1xuICAgICAgY29udGV4dC5jYWNoZS5pbWFnZXJ5TGF5ZXJNaXBtYXBTYW1wbGVycyA9IG1pcG1hcFNhbXBsZXJzO1xuICAgIH1cbiAgICB2YXIgbWlwbWFwU2FtcGxlciA9IG1pcG1hcFNhbXBsZXJzW21pcG1hcFNhbXBsZXJLZXldO1xuICAgIGlmICghZGVmaW5lZChtaXBtYXBTYW1wbGVyKSkge1xuICAgICAgbWlwbWFwU2FtcGxlciA9IG1pcG1hcFNhbXBsZXJzW21pcG1hcFNhbXBsZXJLZXldID0gbmV3IFNhbXBsZXIoe1xuICAgICAgICB3cmFwUzogVGV4dHVyZVdyYXAuQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgd3JhcFQ6IFRleHR1cmVXcmFwLkNMQU1QX1RPX0VER0UsXG4gICAgICAgIG1pbmlmaWNhdGlvbkZpbHRlcjogbWluaWZpY2F0aW9uRmlsdGVyLFxuICAgICAgICBtYWduaWZpY2F0aW9uRmlsdGVyOiBtYWduaWZpY2F0aW9uRmlsdGVyLFxuICAgICAgICBtYXhpbXVtQW5pc290cm9weTogbWF4aW11bUFuaXNvdHJvcHksXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGV4dHVyZS5nZW5lcmF0ZU1pcG1hcChNaXBtYXBIaW50Lk5JQ0VTVCk7XG4gICAgdGV4dHVyZS5zYW1wbGVyID0gbWlwbWFwU2FtcGxlcjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbm9uTWlwbWFwU2FtcGxlcktleSA9IGdldFNhbXBsZXJLZXkoXG4gICAgICBtaW5pZmljYXRpb25GaWx0ZXIsXG4gICAgICBtYWduaWZpY2F0aW9uRmlsdGVyLFxuICAgICAgMFxuICAgICk7XG4gICAgdmFyIG5vbk1pcG1hcFNhbXBsZXJzID0gY29udGV4dC5jYWNoZS5pbWFnZXJ5TGF5ZXJOb25NaXBtYXBTYW1wbGVycztcbiAgICBpZiAoIWRlZmluZWQobm9uTWlwbWFwU2FtcGxlcnMpKSB7XG4gICAgICBub25NaXBtYXBTYW1wbGVycyA9IHt9O1xuICAgICAgY29udGV4dC5jYWNoZS5pbWFnZXJ5TGF5ZXJOb25NaXBtYXBTYW1wbGVycyA9IG5vbk1pcG1hcFNhbXBsZXJzO1xuICAgIH1cbiAgICB2YXIgbm9uTWlwbWFwU2FtcGxlciA9IG5vbk1pcG1hcFNhbXBsZXJzW25vbk1pcG1hcFNhbXBsZXJLZXldO1xuICAgIGlmICghZGVmaW5lZChub25NaXBtYXBTYW1wbGVyKSkge1xuICAgICAgbm9uTWlwbWFwU2FtcGxlciA9IG5vbk1pcG1hcFNhbXBsZXJzW25vbk1pcG1hcFNhbXBsZXJLZXldID0gbmV3IFNhbXBsZXIoe1xuICAgICAgICB3cmFwUzogVGV4dHVyZVdyYXAuQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgd3JhcFQ6IFRleHR1cmVXcmFwLkNMQU1QX1RPX0VER0UsXG4gICAgICAgIG1pbmlmaWNhdGlvbkZpbHRlcjogbWluaWZpY2F0aW9uRmlsdGVyLFxuICAgICAgICBtYWduaWZpY2F0aW9uRmlsdGVyOiBtYWduaWZpY2F0aW9uRmlsdGVyLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRleHR1cmUuc2FtcGxlciA9IG5vbk1pcG1hcFNhbXBsZXI7XG4gIH1cbn07XG5cbi8qKlxuICogRW5xdWV1ZXMgYSBjb21tYW5kIHJlLXByb2plY3RpbmcgYSB0ZXh0dXJlIHRvIGEge0BsaW5rIEdlb2dyYXBoaWNQcm9qZWN0aW9ufSBvbiB0aGUgbmV4dCB1cGRhdGUsIGlmIG5lY2Vzc2FyeSwgYW5kIGdlbmVyYXRlXG4gKiBtaXBtYXBzIGZvciB0aGUgZ2VvZ3JhcGhpYyB0ZXh0dXJlLlxuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtIHtGcmFtZVN0YXRlfSBmcmFtZVN0YXRlIFRoZSBmcmFtZVN0YXRlLlxuICogQHBhcmFtIHtJbWFnZXJ5fSBpbWFnZXJ5IFRoZSBpbWFnZXJ5IGluc3RhbmNlIHRvIHJlcHJvamVjdC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW25lZWRHZW9ncmFwaGljUHJvamVjdGlvbj10cnVlXSBUcnVlIHRvIHJlcHJvamVjdCB0byBnZW9ncmFwaGljLCBvciBmYWxzZSBpZiBXZWIgTWVyY2F0b3IgaXMgZmluZS5cbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5fcmVwcm9qZWN0VGV4dHVyZSA9IGZ1bmN0aW9uIChcbiAgZnJhbWVTdGF0ZSxcbiAgaW1hZ2VyeSxcbiAgbmVlZEdlb2dyYXBoaWNQcm9qZWN0aW9uXG4pIHtcbiAgdmFyIHRleHR1cmUgPSBpbWFnZXJ5LnRleHR1cmVXZWJNZXJjYXRvciB8fCBpbWFnZXJ5LnRleHR1cmU7XG4gIHZhciByZWN0YW5nbGUgPSBpbWFnZXJ5LnJlY3RhbmdsZTtcbiAgdmFyIGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XG5cbiAgbmVlZEdlb2dyYXBoaWNQcm9qZWN0aW9uID0gZGVmYXVsdFZhbHVlKG5lZWRHZW9ncmFwaGljUHJvamVjdGlvbiwgdHJ1ZSk7XG5cbiAgLy8gUmVwcm9qZWN0IHRoaXMgdGV4dHVyZSBpZiBpdCBpcyBub3QgYWxyZWFkeSBpbiBhIGdlb2dyYXBoaWMgcHJvamVjdGlvbiBhbmRcbiAgLy8gdGhlIHBpeGVscyBhcmUgbW9yZSB0aGFuIDFlLTUgcmFkaWFucyBhcGFydC4gIFRoZSBwaXhlbCBzcGFjaW5nIGN1dG9mZlxuICAvLyBhdm9pZHMgcHJlY2lzaW9uIHByb2JsZW1zIGluIHRoZSByZXByb2plY3Rpb24gdHJhbnNmb3JtYXRpb24gd2hpbGUgbWFraW5nXG4gIC8vIG5vIG5vdGljZWFibGUgZGlmZmVyZW5jZSBpbiB0aGUgZ2VvcmVmZXJlbmNpbmcgb2YgdGhlIGltYWdlLlxuICBpZiAoXG4gICAgbmVlZEdlb2dyYXBoaWNQcm9qZWN0aW9uICYmXG4gICAgIShcbiAgICAgIHRoaXMuX2ltYWdlcnlQcm92aWRlci50aWxpbmdTY2hlbWUucHJvamVjdGlvbiBpbnN0YW5jZW9mXG4gICAgICBHZW9ncmFwaGljUHJvamVjdGlvblxuICAgICkgJiZcbiAgICByZWN0YW5nbGUud2lkdGggLyB0ZXh0dXJlLndpZHRoID4gMWUtNVxuICApIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgaW1hZ2VyeS5hZGRSZWZlcmVuY2UoKTtcbiAgICB2YXIgY29tcHV0ZUNvbW1hbmQgPSBuZXcgQ29tcHV0ZUNvbW1hbmQoe1xuICAgICAgcGVyc2lzdHM6IHRydWUsXG4gICAgICBvd25lcjogdGhpcyxcbiAgICAgIC8vIFVwZGF0ZSByZW5kZXIgcmVzb3VyY2VzIHJpZ2h0IGJlZm9yZSBleGVjdXRpb24gaW5zdGVhZCBvZiBub3cuXG4gICAgICAvLyBUaGlzIGFsbG93cyBkaWZmZXJlbnQgSW1hZ2VyeUxheWVycyB0byBzaGFyZSB0aGUgc2FtZSB2YW8gYW5kIGJ1ZmZlcnMuXG4gICAgICBwcmVFeGVjdXRlOiBmdW5jdGlvbiAoY29tbWFuZCkge1xuICAgICAgICByZXByb2plY3RUb0dlb2dyYXBoaWMoY29tbWFuZCwgY29udGV4dCwgdGV4dHVyZSwgaW1hZ2VyeS5yZWN0YW5nbGUpO1xuICAgICAgfSxcbiAgICAgIHBvc3RFeGVjdXRlOiBmdW5jdGlvbiAob3V0cHV0VGV4dHVyZSkge1xuICAgICAgICBpbWFnZXJ5LnRleHR1cmUgPSBvdXRwdXRUZXh0dXJlO1xuICAgICAgICB0aGF0Ll9maW5hbGl6ZVJlcHJvamVjdFRleHR1cmUoY29udGV4dCwgb3V0cHV0VGV4dHVyZSk7XG4gICAgICAgIGltYWdlcnkuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuUkVBRFk7XG4gICAgICAgIGltYWdlcnkucmVsZWFzZVJlZmVyZW5jZSgpO1xuICAgICAgfSxcbiAgICAgIGNhbmNlbGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGltYWdlcnkuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuVEVYVFVSRV9MT0FERUQ7XG4gICAgICAgIGltYWdlcnkucmVsZWFzZVJlZmVyZW5jZSgpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICB0aGlzLl9yZXByb2plY3RDb21wdXRlQ29tbWFuZHMucHVzaChjb21wdXRlQ29tbWFuZCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKG5lZWRHZW9ncmFwaGljUHJvamVjdGlvbikge1xuICAgICAgaW1hZ2VyeS50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICB9XG4gICAgdGhpcy5fZmluYWxpemVSZXByb2plY3RUZXh0dXJlKGNvbnRleHQsIHRleHR1cmUpO1xuICAgIGltYWdlcnkuc3RhdGUgPSBJbWFnZXJ5U3RhdGUuUkVBRFk7XG4gIH1cbn07XG5cbi8qKlxuICogVXBkYXRlcyBmcmFtZSBzdGF0ZSB0byBleGVjdXRlIGFueSBxdWV1ZWQgdGV4dHVyZSByZS1wcm9qZWN0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7RnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBUaGUgZnJhbWVTdGF0ZS5cbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5xdWV1ZVJlcHJvamVjdGlvbkNvbW1hbmRzID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgdmFyIGNvbXB1dGVDb21tYW5kcyA9IHRoaXMuX3JlcHJvamVjdENvbXB1dGVDb21tYW5kcztcbiAgdmFyIGxlbmd0aCA9IGNvbXB1dGVDb21tYW5kcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBmcmFtZVN0YXRlLmNvbW1hbmRMaXN0LnB1c2goY29tcHV0ZUNvbW1hbmRzW2ldKTtcbiAgfVxuICBjb21wdXRlQ29tbWFuZHMubGVuZ3RoID0gMDtcbn07XG5cbi8qKlxuICogQ2FuY2VscyByZS1wcm9qZWN0aW9uIGNvbW1hbmRzIHF1ZXVlZCBmb3IgdGhlIG5leHQgZnJhbWUuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuSW1hZ2VyeUxheWVyLnByb3RvdHlwZS5jYW5jZWxSZXByb2plY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9yZXByb2plY3RDb21wdXRlQ29tbWFuZHMuZm9yRWFjaChmdW5jdGlvbiAoY29tbWFuZCkge1xuICAgIGlmIChkZWZpbmVkKGNvbW1hbmQuY2FuY2VsZWQpKSB7XG4gICAgICBjb21tYW5kLmNhbmNlbGVkKCk7XG4gICAgfVxuICB9KTtcbiAgdGhpcy5fcmVwcm9qZWN0Q29tcHV0ZUNvbW1hbmRzLmxlbmd0aCA9IDA7XG59O1xuXG5JbWFnZXJ5TGF5ZXIucHJvdG90eXBlLmdldEltYWdlcnlGcm9tQ2FjaGUgPSBmdW5jdGlvbiAoXG4gIHgsXG4gIHksXG4gIGxldmVsLFxuICBpbWFnZXJ5UmVjdGFuZ2xlXG4pIHtcbiAgdmFyIGNhY2hlS2V5ID0gZ2V0SW1hZ2VyeUNhY2hlS2V5KHgsIHksIGxldmVsKTtcbiAgdmFyIGltYWdlcnkgPSB0aGlzLl9pbWFnZXJ5Q2FjaGVbY2FjaGVLZXldO1xuXG4gIGlmICghZGVmaW5lZChpbWFnZXJ5KSkge1xuICAgIGltYWdlcnkgPSBuZXcgSW1hZ2VyeSh0aGlzLCB4LCB5LCBsZXZlbCwgaW1hZ2VyeVJlY3RhbmdsZSk7XG4gICAgdGhpcy5faW1hZ2VyeUNhY2hlW2NhY2hlS2V5XSA9IGltYWdlcnk7XG4gIH1cblxuICBpbWFnZXJ5LmFkZFJlZmVyZW5jZSgpO1xuICByZXR1cm4gaW1hZ2VyeTtcbn07XG5cbkltYWdlcnlMYXllci5wcm90b3R5cGUucmVtb3ZlSW1hZ2VyeUZyb21DYWNoZSA9IGZ1bmN0aW9uIChpbWFnZXJ5KSB7XG4gIHZhciBjYWNoZUtleSA9IGdldEltYWdlcnlDYWNoZUtleShpbWFnZXJ5LngsIGltYWdlcnkueSwgaW1hZ2VyeS5sZXZlbCk7XG4gIGRlbGV0ZSB0aGlzLl9pbWFnZXJ5Q2FjaGVbY2FjaGVLZXldO1xufTtcblxuZnVuY3Rpb24gZ2V0SW1hZ2VyeUNhY2hlS2V5KHgsIHksIGxldmVsKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShbeCwgeSwgbGV2ZWxdKTtcbn1cblxudmFyIHVuaWZvcm1NYXAgPSB7XG4gIHVfdGV4dHVyZURpbWVuc2lvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0dXJlRGltZW5zaW9ucztcbiAgfSxcbiAgdV90ZXh0dXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGV4dHVyZTtcbiAgfSxcblxuICB0ZXh0dXJlRGltZW5zaW9uczogbmV3IENhcnRlc2lhbjIoKSxcbiAgdGV4dHVyZTogdW5kZWZpbmVkLFxufTtcblxudmFyIGZsb2F0MzJBcnJheVNjcmF0Y2ggPSBGZWF0dXJlRGV0ZWN0aW9uLnN1cHBvcnRzVHlwZWRBcnJheXMoKVxuICA/IG5ldyBGbG9hdDMyQXJyYXkoMiAqIDY0KVxuICA6IHVuZGVmaW5lZDtcblxuZnVuY3Rpb24gcmVwcm9qZWN0VG9HZW9ncmFwaGljKGNvbW1hbmQsIGNvbnRleHQsIHRleHR1cmUsIHJlY3RhbmdsZSkge1xuICAvLyBUaGlzIGZ1bmN0aW9uIGhhcyBnb25lIHRocm91Z2ggYSBudW1iZXIgb2YgaXRlcmF0aW9ucywgYmVjYXVzZSBHUFVzIGFyZSBhd2Vzb21lLlxuICAvL1xuICAvLyBPcmlnaW5hbGx5LCB3ZSBoYWQgYSB2ZXJ5IHNpbXBsZSB2ZXJ0ZXggc2hhZGVyIGFuZCBjb21wdXRlZCB0aGUgV2ViIE1lcmNhdG9yIHRleHR1cmUgY29vcmRpbmF0ZXNcbiAgLy8gcGVyLWZyYWdtZW50IGluIHRoZSBmcmFnbWVudCBzaGFkZXIuICBUaGF0IHdvcmtlZCB3ZWxsLCBleGNlcHQgb24gbW9iaWxlIGRldmljZXMsIGJlY2F1c2VcbiAgLy8gZnJhZ21lbnQgc2hhZGVycyBoYXZlIGxpbWl0ZWQgcHJlY2lzaW9uIG9uIG1hbnkgbW9iaWxlIGRldmljZXMuICBUaGUgcmVzdWx0IHdhcyBzbWVhcmluZyBhcnRpZmFjdHNcbiAgLy8gYXQgbWVkaXVtIHpvb20gbGV2ZWxzIGJlY2F1c2UgZGlmZmVyZW50IGdlb2dyYXBoaWMgdGV4dHVyZSBjb29yZGluYXRlcyB3b3VsZCBiZSByZXByb2plY3RlZCB0byBXZWJcbiAgLy8gTWVyY2F0b3IgYXMgdGhlIHNhbWUgdmFsdWUuXG4gIC8vXG4gIC8vIE91ciBzb2x1dGlvbiB3YXMgdG8gcmVwcm9qZWN0IHRvIFdlYiBNZXJjYXRvciBpbiB0aGUgdmVydGV4IHNoYWRlciBpbnN0ZWFkIG9mIHRoZSBmcmFnbWVudCBzaGFkZXIuXG4gIC8vIFRoaXMgcmVxdWlyZWQgZmFyIG1vcmUgdmVydGV4IGRhdGEuICBXaXRoIGZyYWdtZW50IHNoYWRlciByZXByb2plY3Rpb24sIHdlIG9ubHkgbmVlZGVkIGEgc2luZ2xlIHF1YWQuXG4gIC8vIEJ1dCB0byBhY2hpZXZlIHRoZSBzYW1lIHByZWNpc2lvbiB3aXRoIHZlcnRleCBzaGFkZXIgcmVwcm9qZWN0aW9uLCB3ZSBuZWVkZWQgYSB2ZXJ0ZXggZm9yIGVhY2hcbiAgLy8gb3V0cHV0IHBpeGVsLiAgU28gd2UgdXNlZCBhIGdyaWQgb2YgMjU2eDI1NiB2ZXJ0aWNlcywgYmVjYXVzZSBtb3N0IG9mIG91ciBpbWFnZXJ5XG4gIC8vIHRpbGVzIGFyZSAyNTZ4MjU2LiAgRm9ydHVuYXRlbHkgdGhlIGdyaWQgY291bGQgYmUgY3JlYXRlZCBhbmQgdXBsb2FkZWQgdG8gdGhlIEdQVSBqdXN0IG9uY2UgYW5kXG4gIC8vIHJlLXVzZWQgZm9yIGFsbCByZXByb2plY3Rpb25zLCBzbyB0aGUgcGVyZm9ybWFuY2Ugd2FzIHZpcnR1YWxseSB1bmNoYW5nZWQgZnJvbSBvdXIgb3JpZ2luYWwgZnJhZ21lbnRcbiAgLy8gc2hhZGVyIGFwcHJvYWNoLiAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy9jZXNpdW0vcHVsbC83MTQuXG4gIC8vXG4gIC8vIE92ZXIgYSB5ZWFyIGxhdGVyLCB3ZSBub3RpY2VkIChodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvY2VzaXVtL2lzc3Vlcy8yMTEwKVxuICAvLyB0aGF0IG91ciByZXByb2plY3Rpb24gY29kZSB3YXMgY3JlYXRpbmcgYSByYXJlIGJ1dCBzZXZlcmUgYXJ0aWZhY3Qgb24gc29tZSBHUFVzIChJbnRlbCBIRCA0NjAwXG4gIC8vIGZvciBvbmUpLiAgVGhlIHByb2JsZW0gd2FzIHRoYXQgdGhlIEdMU0wgc2luIGZ1bmN0aW9uIG9uIHRoZXNlIEdQVXMgaGFkIGEgZGlzY29udGludWl0eSBhdCBmaW5lIHNjYWxlcyBpblxuICAvLyBhIGZldyBwbGFjZXMuXG4gIC8vXG4gIC8vIFdlIHNvbHZlZCB0aGlzIGJ5IGltcGxlbWVudGluZyBhIG1vcmUgcmVsaWFibGUgc2luIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBDT1JESUMgYWxnb3JpdGhtXG4gIC8vIChodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvY2VzaXVtL3B1bGwvMjExMSkuICBFdmVuIHRob3VnaCB0aGlzIHdhcyBhIGZhaXJcbiAgLy8gYW1vdW50IG9mIGNvZGUgdG8gYmUgZXhlY3V0aW5nIHBlciB2ZXJ0ZXgsIHRoZSBwZXJmb3JtYW5jZSBzZWVtZWQgdG8gYmUgcHJldHR5IGdvb2Qgb24gbW9zdCBHUFVzLlxuICAvLyBVbmZvcnR1bmF0ZWx5LCBvbiBzb21lIEdQVXMsIHRoZSBwZXJmb3JtYW5jZSB3YXMgYWJzb2x1dGVseSB0ZXJyaWJsZVxuICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL0Nlc2l1bUdTL2Nlc2l1bS9pc3N1ZXMvMjI1OCkuXG4gIC8vXG4gIC8vIFNvIHRoYXQgYnJpbmdzIHVzIHRvIG91ciBjdXJyZW50IHNvbHV0aW9uLCB0aGUgb25lIHlvdSBzZWUgaGVyZS4gIEVmZmVjdGl2ZWx5LCB3ZSBjb21wdXRlIHRoZSBXZWJcbiAgLy8gTWVyY2F0b3IgdGV4dHVyZSBjb29yZGluYXRlcyBvbiB0aGUgQ1BVIGFuZCBzdG9yZSB0aGUgVCBjb29yZGluYXRlIHdpdGggZWFjaCB2ZXJ0ZXggKHRoZSBTIGNvb3JkaW5hdGVcbiAgLy8gaXMgdGhlIHNhbWUgaW4gR2VvZ3JhcGhpYyBhbmQgV2ViIE1lcmNhdG9yKS4gIFRvIG1ha2UgdGhpcyBmYXN0ZXIsIHdlIHJlZHVjZWQgb3VyIHJlcHJvamVjdGlvbiBtZXNoXG4gIC8vIHRvIGJlIG9ubHkgMiB2ZXJ0aWNlcyB3aWRlIGFuZCA2NCB2ZXJ0aWNlcyBoaWdoLiAgV2Ugc2hvdWxkIGhhdmUgcmVkdWNlZCB0aGUgd2lkdGggdG8gMiBzb29uZXIsXG4gIC8vIGJlY2F1c2UgdGhlIGV4dHJhIHZlcnRpY2VzIHdlcmVuJ3QgYnV5aW5nIHVzIGFueXRoaW5nLiAgVGhlIGhlaWdodCBvZiA2NCBtZWFucyB3ZSBhcmUgdGVjaG5pY2FsbHlcbiAgLy8gZG9pbmcgYSBzbGlnaHRseSBsZXNzIGFjY3VyYXRlIHJlcHJvamVjdGlvbiB0aGFuIHdlIHdlcmUgYmVmb3JlLCBidXQgd2UgY2FuJ3Qgc2VlIHRoZSBkaWZmZXJlbmNlXG4gIC8vIHNvIGl0J3Mgd29ydGggdGhlIDR4IHNwZWVkdXAuXG5cbiAgdmFyIHJlcHJvamVjdCA9IGNvbnRleHQuY2FjaGUuaW1hZ2VyeUxheWVyX3JlcHJvamVjdDtcblxuICBpZiAoIWRlZmluZWQocmVwcm9qZWN0KSkge1xuICAgIHJlcHJvamVjdCA9IGNvbnRleHQuY2FjaGUuaW1hZ2VyeUxheWVyX3JlcHJvamVjdCA9IHtcbiAgICAgIHZlcnRleEFycmF5OiB1bmRlZmluZWQsXG4gICAgICBzaGFkZXJQcm9ncmFtOiB1bmRlZmluZWQsXG4gICAgICBzYW1wbGVyOiB1bmRlZmluZWQsXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkZWZpbmVkKHRoaXMuZnJhbWVidWZmZXIpKSB7XG4gICAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlci5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluZWQodGhpcy52ZXJ0ZXhBcnJheSkpIHtcbiAgICAgICAgICB0aGlzLnZlcnRleEFycmF5LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmaW5lZCh0aGlzLnNoYWRlclByb2dyYW0pKSB7XG4gICAgICAgICAgdGhpcy5zaGFkZXJQcm9ncmFtLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgdmFyIHBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoMiAqIDY0ICogMik7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IDY0OyArK2opIHtcbiAgICAgIHZhciB5ID0gaiAvIDYzLjA7XG4gICAgICBwb3NpdGlvbnNbaW5kZXgrK10gPSAwLjA7XG4gICAgICBwb3NpdGlvbnNbaW5kZXgrK10gPSB5O1xuICAgICAgcG9zaXRpb25zW2luZGV4KytdID0gMS4wO1xuICAgICAgcG9zaXRpb25zW2luZGV4KytdID0geTtcbiAgICB9XG5cbiAgICB2YXIgcmVwcm9qZWN0QXR0cmlidXRlSW5kaWNlcyA9IHtcbiAgICAgIHBvc2l0aW9uOiAwLFxuICAgICAgd2ViTWVyY2F0b3JUOiAxLFxuICAgIH07XG5cbiAgICB2YXIgaW5kaWNlcyA9IFRlcnJhaW5Qcm92aWRlci5nZXRSZWd1bGFyR3JpZEluZGljZXMoMiwgNjQpO1xuICAgIHZhciBpbmRleEJ1ZmZlciA9IEJ1ZmZlci5jcmVhdGVJbmRleEJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdHlwZWRBcnJheTogaW5kaWNlcyxcbiAgICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyxcbiAgICAgIGluZGV4RGF0YXR5cGU6IEluZGV4RGF0YXR5cGUuVU5TSUdORURfU0hPUlQsXG4gICAgfSk7XG5cbiAgICByZXByb2plY3QudmVydGV4QXJyYXkgPSBuZXcgVmVydGV4QXJyYXkoe1xuICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGluZGV4OiByZXByb2plY3RBdHRyaWJ1dGVJbmRpY2VzLnBvc2l0aW9uLFxuICAgICAgICAgIHZlcnRleEJ1ZmZlcjogQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgdHlwZWRBcnJheTogcG9zaXRpb25zLFxuICAgICAgICAgICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDIsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpbmRleDogcmVwcm9qZWN0QXR0cmlidXRlSW5kaWNlcy53ZWJNZXJjYXRvclQsXG4gICAgICAgICAgdmVydGV4QnVmZmVyOiBCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKHtcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICBzaXplSW5CeXRlczogNjQgKiAyICogNCxcbiAgICAgICAgICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVFJFQU1fRFJBVyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAxLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGluZGV4QnVmZmVyOiBpbmRleEJ1ZmZlcixcbiAgICB9KTtcblxuICAgIHZhciB2cyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgc291cmNlczogW1JlcHJvamVjdFdlYk1lcmNhdG9yVlNdLFxuICAgIH0pO1xuXG4gICAgcmVwcm9qZWN0LnNoYWRlclByb2dyYW0gPSBTaGFkZXJQcm9ncmFtLmZyb21DYWNoZSh7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdmVydGV4U2hhZGVyU291cmNlOiB2cyxcbiAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBSZXByb2plY3RXZWJNZXJjYXRvckZTLFxuICAgICAgYXR0cmlidXRlTG9jYXRpb25zOiByZXByb2plY3RBdHRyaWJ1dGVJbmRpY2VzLFxuICAgIH0pO1xuXG4gICAgcmVwcm9qZWN0LnNhbXBsZXIgPSBuZXcgU2FtcGxlcih7XG4gICAgICB3cmFwUzogVGV4dHVyZVdyYXAuQ0xBTVBfVE9fRURHRSxcbiAgICAgIHdyYXBUOiBUZXh0dXJlV3JhcC5DTEFNUF9UT19FREdFLFxuICAgICAgbWluaWZpY2F0aW9uRmlsdGVyOiBUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyLkxJTkVBUixcbiAgICAgIG1hZ25pZmljYXRpb25GaWx0ZXI6IFRleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyLkxJTkVBUixcbiAgICB9KTtcbiAgfVxuXG4gIHRleHR1cmUuc2FtcGxlciA9IHJlcHJvamVjdC5zYW1wbGVyO1xuXG4gIHZhciB3aWR0aCA9IHRleHR1cmUud2lkdGg7XG4gIHZhciBoZWlnaHQgPSB0ZXh0dXJlLmhlaWdodDtcblxuICB1bmlmb3JtTWFwLnRleHR1cmVEaW1lbnNpb25zLnggPSB3aWR0aDtcbiAgdW5pZm9ybU1hcC50ZXh0dXJlRGltZW5zaW9ucy55ID0gaGVpZ2h0O1xuICB1bmlmb3JtTWFwLnRleHR1cmUgPSB0ZXh0dXJlO1xuXG4gIHZhciBzaW5MYXRpdHVkZSA9IE1hdGguc2luKHJlY3RhbmdsZS5zb3V0aCk7XG4gIHZhciBzb3V0aE1lcmNhdG9yWSA9IDAuNSAqIE1hdGgubG9nKCgxICsgc2luTGF0aXR1ZGUpIC8gKDEgLSBzaW5MYXRpdHVkZSkpO1xuXG4gIHNpbkxhdGl0dWRlID0gTWF0aC5zaW4ocmVjdGFuZ2xlLm5vcnRoKTtcbiAgdmFyIG5vcnRoTWVyY2F0b3JZID0gMC41ICogTWF0aC5sb2coKDEgKyBzaW5MYXRpdHVkZSkgLyAoMSAtIHNpbkxhdGl0dWRlKSk7XG4gIHZhciBvbmVPdmVyTWVyY2F0b3JIZWlnaHQgPSAxLjAgLyAobm9ydGhNZXJjYXRvclkgLSBzb3V0aE1lcmNhdG9yWSk7XG5cbiAgdmFyIG91dHB1dFRleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgcGl4ZWxGb3JtYXQ6IHRleHR1cmUucGl4ZWxGb3JtYXQsXG4gICAgcGl4ZWxEYXRhdHlwZTogdGV4dHVyZS5waXhlbERhdGF0eXBlLFxuICAgIHByZU11bHRpcGx5QWxwaGE6IHRleHR1cmUucHJlTXVsdGlwbHlBbHBoYSxcbiAgfSk7XG5cbiAgLy8gQWxsb2NhdGUgbWVtb3J5IGZvciB0aGUgbWlwbWFwcy4gIEZhaWx1cmUgdG8gZG8gdGhpcyBiZWZvcmUgcmVuZGVyaW5nXG4gIC8vIHRvIHRoZSB0ZXh0dXJlIHZpYSB0aGUgRkJPLCBhbmQgY2FsbGluZyBnZW5lcmF0ZU1pcG1hcCBsYXRlcixcbiAgLy8gd2lsbCByZXN1bHQgaW4gdGhlIHRleHR1cmUgYXBwZWFyaW5nIGJsYW5rLiAgSSBjYW4ndCBwcmV0ZW5kIHRvXG4gIC8vIHVuZGVyc3RhbmQgZXhhY3RseSB3aHkgdGhpcyBpcy5cbiAgaWYgKENlc2l1bU1hdGguaXNQb3dlck9mVHdvKHdpZHRoKSAmJiBDZXNpdW1NYXRoLmlzUG93ZXJPZlR3byhoZWlnaHQpKSB7XG4gICAgb3V0cHV0VGV4dHVyZS5nZW5lcmF0ZU1pcG1hcChNaXBtYXBIaW50Lk5JQ0VTVCk7XG4gIH1cblxuICB2YXIgc291dGggPSByZWN0YW5nbGUuc291dGg7XG4gIHZhciBub3J0aCA9IHJlY3RhbmdsZS5ub3J0aDtcblxuICB2YXIgd2ViTWVyY2F0b3JUID0gZmxvYXQzMkFycmF5U2NyYXRjaDtcblxuICB2YXIgb3V0cHV0SW5kZXggPSAwO1xuICBmb3IgKHZhciB3ZWJNZXJjYXRvclRJbmRleCA9IDA7IHdlYk1lcmNhdG9yVEluZGV4IDwgNjQ7ICsrd2ViTWVyY2F0b3JUSW5kZXgpIHtcbiAgICB2YXIgZnJhY3Rpb24gPSB3ZWJNZXJjYXRvclRJbmRleCAvIDYzLjA7XG4gICAgdmFyIGxhdGl0dWRlID0gQ2VzaXVtTWF0aC5sZXJwKHNvdXRoLCBub3J0aCwgZnJhY3Rpb24pO1xuICAgIHNpbkxhdGl0dWRlID0gTWF0aC5zaW4obGF0aXR1ZGUpO1xuICAgIHZhciBtZXJjYXRvclkgPSAwLjUgKiBNYXRoLmxvZygoMS4wICsgc2luTGF0aXR1ZGUpIC8gKDEuMCAtIHNpbkxhdGl0dWRlKSk7XG4gICAgdmFyIG1lcmNhdG9yRnJhY3Rpb24gPSAobWVyY2F0b3JZIC0gc291dGhNZXJjYXRvclkpICogb25lT3Zlck1lcmNhdG9ySGVpZ2h0O1xuICAgIHdlYk1lcmNhdG9yVFtvdXRwdXRJbmRleCsrXSA9IG1lcmNhdG9yRnJhY3Rpb247XG4gICAgd2ViTWVyY2F0b3JUW291dHB1dEluZGV4KytdID0gbWVyY2F0b3JGcmFjdGlvbjtcbiAgfVxuXG4gIHJlcHJvamVjdC52ZXJ0ZXhBcnJheVxuICAgIC5nZXRBdHRyaWJ1dGUoMSlcbiAgICAudmVydGV4QnVmZmVyLmNvcHlGcm9tQXJyYXlWaWV3KHdlYk1lcmNhdG9yVCk7XG5cbiAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID0gcmVwcm9qZWN0LnNoYWRlclByb2dyYW07XG4gIGNvbW1hbmQub3V0cHV0VGV4dHVyZSA9IG91dHB1dFRleHR1cmU7XG4gIGNvbW1hbmQudW5pZm9ybU1hcCA9IHVuaWZvcm1NYXA7XG4gIGNvbW1hbmQudmVydGV4QXJyYXkgPSByZXByb2plY3QudmVydGV4QXJyYXk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGV2ZWwgd2l0aCB0aGUgc3BlY2lmaWVkIHdvcmxkIGNvb3JkaW5hdGUgc3BhY2luZyBiZXR3ZWVuIHRleGVscywgb3IgbGVzcy5cbiAqXG4gKiBAcGFyYW0ge0ltYWdlcnlMYXllcn0gbGF5ZXIgVGhlIGltYWdlcnkgbGF5ZXIgdG8gdXNlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHRleGVsU3BhY2luZyBUaGUgdGV4ZWwgc3BhY2luZyBmb3Igd2hpY2ggdG8gZmluZCBhIGNvcnJlc3BvbmRpbmcgbGV2ZWwuXG4gKiBAcGFyYW0ge051bWJlcn0gbGF0aXR1ZGVDbG9zZXN0VG9FcXVhdG9yIFRoZSBsYXRpdHVkZSBjbG9zZXN0IHRvIHRoZSBlcXVhdG9yIHRoYXQgd2UncmUgY29uY2VybmVkIHdpdGguXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbGV2ZWwgd2l0aCB0aGUgc3BlY2lmaWVkIHRleGVsIHNwYWNpbmcgb3IgbGVzcy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldExldmVsV2l0aE1heGltdW1UZXhlbFNwYWNpbmcoXG4gIGxheWVyLFxuICB0ZXhlbFNwYWNpbmcsXG4gIGxhdGl0dWRlQ2xvc2VzdFRvRXF1YXRvclxuKSB7XG4gIC8vIFBFUkZPUk1BTkNFX0lERUE6IGZhY3RvciBvdXQgdGhlIHN0dWZmIHRoYXQgZG9lc24ndCBjaGFuZ2UuXG4gIHZhciBpbWFnZXJ5UHJvdmlkZXIgPSBsYXllci5faW1hZ2VyeVByb3ZpZGVyO1xuICB2YXIgdGlsaW5nU2NoZW1lID0gaW1hZ2VyeVByb3ZpZGVyLnRpbGluZ1NjaGVtZTtcbiAgdmFyIGVsbGlwc29pZCA9IHRpbGluZ1NjaGVtZS5lbGxpcHNvaWQ7XG4gIHZhciBsYXRpdHVkZUZhY3RvciA9ICEoXG4gICAgbGF5ZXIuX2ltYWdlcnlQcm92aWRlci50aWxpbmdTY2hlbWUucHJvamVjdGlvbiBpbnN0YW5jZW9mXG4gICAgR2VvZ3JhcGhpY1Byb2plY3Rpb25cbiAgKVxuICAgID8gTWF0aC5jb3MobGF0aXR1ZGVDbG9zZXN0VG9FcXVhdG9yKVxuICAgIDogMS4wO1xuICB2YXIgdGlsaW5nU2NoZW1lUmVjdGFuZ2xlID0gdGlsaW5nU2NoZW1lLnJlY3RhbmdsZTtcbiAgdmFyIGxldmVsWmVyb01heGltdW1UZXhlbFNwYWNpbmcgPVxuICAgIChlbGxpcHNvaWQubWF4aW11bVJhZGl1cyAqIHRpbGluZ1NjaGVtZVJlY3RhbmdsZS53aWR0aCAqIGxhdGl0dWRlRmFjdG9yKSAvXG4gICAgKGltYWdlcnlQcm92aWRlci50aWxlV2lkdGggKiB0aWxpbmdTY2hlbWUuZ2V0TnVtYmVyT2ZYVGlsZXNBdExldmVsKDApKTtcblxuICB2YXIgdHdvVG9UaGVMZXZlbFBvd2VyID0gbGV2ZWxaZXJvTWF4aW11bVRleGVsU3BhY2luZyAvIHRleGVsU3BhY2luZztcbiAgdmFyIGxldmVsID0gTWF0aC5sb2codHdvVG9UaGVMZXZlbFBvd2VyKSAvIE1hdGgubG9nKDIpO1xuICB2YXIgcm91bmRlZCA9IE1hdGgucm91bmQobGV2ZWwpO1xuICByZXR1cm4gcm91bmRlZCB8IDA7XG59XG5leHBvcnQgZGVmYXVsdCBJbWFnZXJ5TGF5ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///59379\n')},59848:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14459);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96190);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13222);\n/* harmony import */ var _ImageryLayer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(59379);\n\n\n\n\n\n\n\n\n\n\n/**\n * An ordered collection of imagery layers.\n *\n * @alias ImageryLayerCollection\n * @constructor\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Imagery%20Adjustment.html|Cesium Sandcastle Imagery Adjustment Demo}\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Imagery%20Layers%20Manipulation.html|Cesium Sandcastle Imagery Manipulation Demo}\n */\nfunction ImageryLayerCollection() {\n  this._layers = [];\n\n  /**\n   * An event that is raised when a layer is added to the collection.  Event handlers are passed the layer that\n   * was added and the index at which it was added.\n   * @type {Event}\n   * @default Event()\n   */\n  this.layerAdded = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n  /**\n   * An event that is raised when a layer is removed from the collection.  Event handlers are passed the layer that\n   * was removed and the index from which it was removed.\n   * @type {Event}\n   * @default Event()\n   */\n  this.layerRemoved = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n  /**\n   * An event that is raised when a layer changes position in the collection.  Event handlers are passed the layer that\n   * was moved, its new index after the move, and its old index prior to the move.\n   * @type {Event}\n   * @default Event()\n   */\n  this.layerMoved = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n  /**\n   * An event that is raised when a layer is shown or hidden by setting the\n   * {@link ImageryLayer#show} property.  Event handlers are passed a reference to this layer,\n   * the index of the layer in the collection, and a flag that is true if the layer is now\n   * shown or false if it is now hidden.\n   *\n   * @type {Event}\n   * @default Event()\n   */\n  this.layerShownOrHidden = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n}\n\nObject.defineProperties(ImageryLayerCollection.prototype, {\n  /**\n   * Gets the number of layers in this collection.\n   * @memberof ImageryLayerCollection.prototype\n   * @type {Number}\n   */\n  length: {\n    get: function () {\n      return this._layers.length;\n    },\n  },\n});\n\n/**\n * Adds a layer to the collection.\n *\n * @param {ImageryLayer} layer the layer to add.\n * @param {Number} [index] the index to add the layer at.  If omitted, the layer will\n *                         be added on top of all existing layers.\n *\n * @exception {DeveloperError} index, if supplied, must be greater than or equal to zero and less than or equal to the number of the layers.\n */\nImageryLayerCollection.prototype.add = function (layer, index) {\n  var hasIndex = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(index);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(layer)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("layer is required.");\n  }\n  if (hasIndex) {\n    if (index < 0) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("index must be greater than or equal to zero.");\n    } else if (index > this._layers.length) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n        "index must be less than or equal to the number of layers."\n      );\n    }\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!hasIndex) {\n    index = this._layers.length;\n    this._layers.push(layer);\n  } else {\n    this._layers.splice(index, 0, layer);\n  }\n\n  this._update();\n  this.layerAdded.raiseEvent(layer, index);\n};\n\n/**\n * Creates a new layer using the given ImageryProvider and adds it to the collection.\n *\n * @param {ImageryProvider} imageryProvider the imagery provider to create a new layer for.\n * @param {Number} [index] the index to add the layer at.  If omitted, the layer will\n *                         added on top of all existing layers.\n * @returns {ImageryLayer} The newly created layer.\n */\nImageryLayerCollection.prototype.addImageryProvider = function (\n  imageryProvider,\n  index\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(imageryProvider)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("imageryProvider is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var layer = new _ImageryLayer_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(imageryProvider);\n  this.add(layer, index);\n  return layer;\n};\n\n/**\n * Removes a layer from this collection, if present.\n *\n * @param {ImageryLayer} layer The layer to remove.\n * @param {Boolean} [destroy=true] whether to destroy the layers in addition to removing them.\n * @returns {Boolean} true if the layer was in the collection and was removed,\n *                    false if the layer was not in the collection.\n */\nImageryLayerCollection.prototype.remove = function (layer, destroy) {\n  destroy = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(destroy, true);\n\n  var index = this._layers.indexOf(layer);\n  if (index !== -1) {\n    this._layers.splice(index, 1);\n\n    this._update();\n\n    this.layerRemoved.raiseEvent(layer, index);\n\n    if (destroy) {\n      layer.destroy();\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Removes all layers from this collection.\n *\n * @param {Boolean} [destroy=true] whether to destroy the layers in addition to removing them.\n */\nImageryLayerCollection.prototype.removeAll = function (destroy) {\n  destroy = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(destroy, true);\n\n  var layers = this._layers;\n  for (var i = 0, len = layers.length; i < len; i++) {\n    var layer = layers[i];\n    this.layerRemoved.raiseEvent(layer, i);\n\n    if (destroy) {\n      layer.destroy();\n    }\n  }\n\n  this._layers = [];\n};\n\n/**\n * Checks to see if the collection contains a given layer.\n *\n * @param {ImageryLayer} layer the layer to check for.\n *\n * @returns {Boolean} true if the collection contains the layer, false otherwise.\n */\nImageryLayerCollection.prototype.contains = function (layer) {\n  return this.indexOf(layer) !== -1;\n};\n\n/**\n * Determines the index of a given layer in the collection.\n *\n * @param {ImageryLayer} layer The layer to find the index of.\n *\n * @returns {Number} The index of the layer in the collection, or -1 if the layer does not exist in the collection.\n */\nImageryLayerCollection.prototype.indexOf = function (layer) {\n  return this._layers.indexOf(layer);\n};\n\n/**\n * Gets a layer by index from the collection.\n *\n * @param {Number} index the index to retrieve.\n *\n * @returns {ImageryLayer} The imagery layer at the given index.\n */\nImageryLayerCollection.prototype.get = function (index) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(index)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("index is required.", "index");\n  }\n  //>>includeEnd(\'debug\');\n\n  return this._layers[index];\n};\n\nfunction getLayerIndex(layers, layer) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(layer)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("layer is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var index = layers.indexOf(layer);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (index === -1) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("layer is not in this collection.");\n  }\n  //>>includeEnd(\'debug\');\n\n  return index;\n}\n\nfunction swapLayers(collection, i, j) {\n  var arr = collection._layers;\n  i = _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clamp */ .Z.clamp(i, 0, arr.length - 1);\n  j = _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clamp */ .Z.clamp(j, 0, arr.length - 1);\n\n  if (i === j) {\n    return;\n  }\n\n  var temp = arr[i];\n  arr[i] = arr[j];\n  arr[j] = temp;\n\n  collection._update();\n\n  collection.layerMoved.raiseEvent(temp, j, i);\n}\n\n/**\n * Raises a layer up one position in the collection.\n *\n * @param {ImageryLayer} layer the layer to move.\n *\n * @exception {DeveloperError} layer is not in this collection.\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nImageryLayerCollection.prototype.raise = function (layer) {\n  var index = getLayerIndex(this._layers, layer);\n  swapLayers(this, index, index + 1);\n};\n\n/**\n * Lowers a layer down one position in the collection.\n *\n * @param {ImageryLayer} layer the layer to move.\n *\n * @exception {DeveloperError} layer is not in this collection.\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nImageryLayerCollection.prototype.lower = function (layer) {\n  var index = getLayerIndex(this._layers, layer);\n  swapLayers(this, index, index - 1);\n};\n\n/**\n * Raises a layer to the top of the collection.\n *\n * @param {ImageryLayer} layer the layer to move.\n *\n * @exception {DeveloperError} layer is not in this collection.\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nImageryLayerCollection.prototype.raiseToTop = function (layer) {\n  var index = getLayerIndex(this._layers, layer);\n  if (index === this._layers.length - 1) {\n    return;\n  }\n  this._layers.splice(index, 1);\n  this._layers.push(layer);\n\n  this._update();\n\n  this.layerMoved.raiseEvent(layer, this._layers.length - 1, index);\n};\n\n/**\n * Lowers a layer to the bottom of the collection.\n *\n * @param {ImageryLayer} layer the layer to move.\n *\n * @exception {DeveloperError} layer is not in this collection.\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nImageryLayerCollection.prototype.lowerToBottom = function (layer) {\n  var index = getLayerIndex(this._layers, layer);\n  if (index === 0) {\n    return;\n  }\n  this._layers.splice(index, 1);\n  this._layers.splice(0, 0, layer);\n\n  this._update();\n\n  this.layerMoved.raiseEvent(layer, 0, index);\n};\n\nvar applicableRectangleScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n\nfunction pickImageryHelper(scene, pickedLocation, pickFeatures, callback) {\n  // Find the terrain tile containing the picked location.\n  var tilesToRender = scene.globe._surface._tilesToRender;\n  var pickedTile;\n\n  for (\n    var textureIndex = 0;\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(pickedTile) && textureIndex < tilesToRender.length;\n    ++textureIndex\n  ) {\n    var tile = tilesToRender[textureIndex];\n    if (_Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].contains */ .Z.contains(tile.rectangle, pickedLocation)) {\n      pickedTile = tile;\n    }\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(pickedTile)) {\n    return;\n  }\n\n  // Pick against all attached imagery tiles containing the pickedLocation.\n  var imageryTiles = pickedTile.data.imagery;\n\n  for (var i = imageryTiles.length - 1; i >= 0; --i) {\n    var terrainImagery = imageryTiles[i];\n    var imagery = terrainImagery.readyImagery;\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(imagery)) {\n      continue;\n    }\n    var provider = imagery.imageryLayer.imageryProvider;\n    if (pickFeatures && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(provider.pickFeatures)) {\n      continue;\n    }\n\n    if (!_Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].contains */ .Z.contains(imagery.rectangle, pickedLocation)) {\n      continue;\n    }\n\n    // If this imagery came from a parent, it may not be applicable to its entire rectangle.\n    // Check the textureCoordinateRectangle.\n    var applicableRectangle = applicableRectangleScratch;\n\n    var epsilon = 1 / 1024; // 1/4 of a pixel in a typical 256x256 tile.\n    applicableRectangle.west = _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].lerp */ .Z.lerp(\n      pickedTile.rectangle.west,\n      pickedTile.rectangle.east,\n      terrainImagery.textureCoordinateRectangle.x - epsilon\n    );\n    applicableRectangle.east = _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].lerp */ .Z.lerp(\n      pickedTile.rectangle.west,\n      pickedTile.rectangle.east,\n      terrainImagery.textureCoordinateRectangle.z + epsilon\n    );\n    applicableRectangle.south = _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].lerp */ .Z.lerp(\n      pickedTile.rectangle.south,\n      pickedTile.rectangle.north,\n      terrainImagery.textureCoordinateRectangle.y - epsilon\n    );\n    applicableRectangle.north = _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].lerp */ .Z.lerp(\n      pickedTile.rectangle.south,\n      pickedTile.rectangle.north,\n      terrainImagery.textureCoordinateRectangle.w + epsilon\n    );\n    if (!_Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].contains */ .Z.contains(applicableRectangle, pickedLocation)) {\n      continue;\n    }\n\n    callback(imagery);\n  }\n}\n\n/**\n * Determines the imagery layers that are intersected by a pick ray. To compute a pick ray from a\n * location on the screen, use {@link Camera.getPickRay}.\n *\n * @param {Ray} ray The ray to test for intersection.\n * @param {Scene} scene The scene.\n * @return {ImageryLayer[]|undefined} An array that includes all of\n *                                 the layers that are intersected by a given pick ray. Undefined if\n *                                 no layers are selected.\n *\n */\nImageryLayerCollection.prototype.pickImageryLayers = function (ray, scene) {\n  // Find the picked location on the globe.\n  var pickedPosition = scene.globe.pick(ray, scene);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(pickedPosition)) {\n    return;\n  }\n\n  var pickedLocation = scene.globe.ellipsoid.cartesianToCartographic(\n    pickedPosition\n  );\n\n  var imageryLayers = [];\n\n  pickImageryHelper(scene, pickedLocation, false, function (imagery) {\n    imageryLayers.push(imagery.imageryLayer);\n  });\n\n  if (imageryLayers.length === 0) {\n    return undefined;\n  }\n\n  return imageryLayers;\n};\n\n/**\n * Asynchronously determines the imagery layer features that are intersected by a pick ray.  The intersected imagery\n * layer features are found by invoking {@link ImageryProvider#pickFeatures} for each imagery layer tile intersected\n * by the pick ray.  To compute a pick ray from a location on the screen, use {@link Camera.getPickRay}.\n *\n * @param {Ray} ray The ray to test for intersection.\n * @param {Scene} scene The scene.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise that resolves to an array of features intersected by the pick ray.\n *                                             If it can be quickly determined that no features are intersected (for example,\n *                                             because no active imagery providers support {@link ImageryProvider#pickFeatures}\n *                                             or because the pick ray does not intersect the surface), this function will\n *                                             return undefined.\n *\n * @example\n * var pickRay = viewer.camera.getPickRay(windowPosition);\n * var featuresPromise = viewer.imageryLayers.pickImageryLayerFeatures(pickRay, viewer.scene);\n * if (!Cesium.defined(featuresPromise)) {\n *     console.log(\'No features picked.\');\n * } else {\n *     Cesium.when(featuresPromise, function(features) {\n *         // This function is called asynchronously when the list if picked features is available.\n *         console.log(\'Number of features: \' + features.length);\n *         if (features.length > 0) {\n *             console.log(\'First feature name: \' + features[0].name);\n *         }\n *     });\n * }\n */\nImageryLayerCollection.prototype.pickImageryLayerFeatures = function (\n  ray,\n  scene\n) {\n  // Find the picked location on the globe.\n  var pickedPosition = scene.globe.pick(ray, scene);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(pickedPosition)) {\n    return;\n  }\n\n  var pickedLocation = scene.globe.ellipsoid.cartesianToCartographic(\n    pickedPosition\n  );\n\n  var promises = [];\n  var imageryLayers = [];\n\n  pickImageryHelper(scene, pickedLocation, true, function (imagery) {\n    var provider = imagery.imageryLayer.imageryProvider;\n    var promise = provider.pickFeatures(\n      imagery.x,\n      imagery.y,\n      imagery.level,\n      pickedLocation.longitude,\n      pickedLocation.latitude\n    );\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(promise)) {\n      promises.push(promise);\n      imageryLayers.push(imagery.imageryLayer);\n    }\n  });\n\n  if (promises.length === 0) {\n    return undefined;\n  }\n  return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].all */ .Z.all(promises, function (results) {\n    var features = [];\n    for (var resultIndex = 0; resultIndex < results.length; ++resultIndex) {\n      var result = results[resultIndex];\n      var image = imageryLayers[resultIndex];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(result) && result.length > 0) {\n        for (\n          var featureIndex = 0;\n          featureIndex < result.length;\n          ++featureIndex\n        ) {\n          var feature = result[featureIndex];\n          feature.imageryLayer = image;\n          // For features without a position, use the picked location.\n          if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(feature.position)) {\n            feature.position = pickedLocation;\n          }\n          features.push(feature);\n        }\n      }\n    }\n    return features;\n  });\n};\n\n/**\n * Updates frame state to execute any queued texture re-projections.\n *\n * @private\n *\n * @param {FrameState} frameState The frameState.\n */\nImageryLayerCollection.prototype.queueReprojectionCommands = function (\n  frameState\n) {\n  var layers = this._layers;\n  for (var i = 0, len = layers.length; i < len; ++i) {\n    layers[i].queueReprojectionCommands(frameState);\n  }\n};\n\n/**\n * Cancels re-projection commands queued for the next frame.\n *\n * @private\n */\nImageryLayerCollection.prototype.cancelReprojections = function () {\n  var layers = this._layers;\n  for (var i = 0, len = layers.length; i < len; ++i) {\n    layers[i].cancelReprojections();\n  }\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} true if this object was destroyed; otherwise, false.\n *\n * @see ImageryLayerCollection#destroy\n */\nImageryLayerCollection.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by all layers in this collection.  Explicitly destroying this\n * object allows for deterministic release of WebGL resources, instead of relying on the garbage\n * collector.\n * <br /><br />\n * Once this object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * layerCollection = layerCollection && layerCollection.destroy();\n *\n * @see ImageryLayerCollection#isDestroyed\n */\nImageryLayerCollection.prototype.destroy = function () {\n  this.removeAll(true);\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this);\n};\n\nImageryLayerCollection.prototype._update = function () {\n  var isBaseLayer = true;\n  var layers = this._layers;\n  var layersShownOrHidden;\n  var layer;\n  var i, len;\n  for (i = 0, len = layers.length; i < len; ++i) {\n    layer = layers[i];\n\n    layer._layerIndex = i;\n\n    if (layer.show) {\n      layer._isBaseLayer = isBaseLayer;\n      isBaseLayer = false;\n    } else {\n      layer._isBaseLayer = false;\n    }\n\n    if (layer.show !== layer._show) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(layer._show)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(layersShownOrHidden)) {\n          layersShownOrHidden = [];\n        }\n        layersShownOrHidden.push(layer);\n      }\n      layer._show = layer.show;\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(layersShownOrHidden)) {\n    for (i = 0, len = layersShownOrHidden.length; i < len; ++i) {\n      layer = layersShownOrHidden[i];\n      this.layerShownOrHidden.raiseEvent(layer, layer._layerIndex, layer.show);\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ImageryLayerCollection);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsU0FBUztBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSx3REFBd0Q7QUFDeEQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBLGFBQWEsU0FBUyxtQ0FBbUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywyRUFBYTtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsU0FBUztBQUM1Qzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBLFVBQVUscUVBQU87QUFDakIsYUFBYSxxRUFBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNLHFFQUFPO0FBQ2Isa0RBQWtELFNBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLHNCQUFzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0ltYWdlcnlMYXllckNvbGxlY3Rpb24uanM/ZWRjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5pbXBvcnQgSW1hZ2VyeUxheWVyIGZyb20gXCIuL0ltYWdlcnlMYXllci5qc1wiO1xuXG4vKipcbiAqIEFuIG9yZGVyZWQgY29sbGVjdGlvbiBvZiBpbWFnZXJ5IGxheWVycy5cbiAqXG4gKiBAYWxpYXMgSW1hZ2VyeUxheWVyQ29sbGVjdGlvblxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUltYWdlcnklMjBBZGp1c3RtZW50Lmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgSW1hZ2VyeSBBZGp1c3RtZW50IERlbW99XG4gKiBAZGVtbyB7QGxpbmsgaHR0cHM6Ly9zYW5kY2FzdGxlLmNlc2l1bS5jb20vaW5kZXguaHRtbD9zcmM9SW1hZ2VyeSUyMExheWVycyUyME1hbmlwdWxhdGlvbi5odG1sfENlc2l1bSBTYW5kY2FzdGxlIEltYWdlcnkgTWFuaXB1bGF0aW9uIERlbW99XG4gKi9cbmZ1bmN0aW9uIEltYWdlcnlMYXllckNvbGxlY3Rpb24oKSB7XG4gIHRoaXMuX2xheWVycyA9IFtdO1xuXG4gIC8qKlxuICAgKiBBbiBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuIGEgbGF5ZXIgaXMgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24uICBFdmVudCBoYW5kbGVycyBhcmUgcGFzc2VkIHRoZSBsYXllciB0aGF0XG4gICAqIHdhcyBhZGRlZCBhbmQgdGhlIGluZGV4IGF0IHdoaWNoIGl0IHdhcyBhZGRlZC5cbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAZGVmYXVsdCBFdmVudCgpXG4gICAqL1xuICB0aGlzLmxheWVyQWRkZWQgPSBuZXcgRXZlbnQoKTtcblxuICAvKipcbiAgICogQW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiBhIGxheWVyIGlzIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi4gIEV2ZW50IGhhbmRsZXJzIGFyZSBwYXNzZWQgdGhlIGxheWVyIHRoYXRcbiAgICogd2FzIHJlbW92ZWQgYW5kIHRoZSBpbmRleCBmcm9tIHdoaWNoIGl0IHdhcyByZW1vdmVkLlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEBkZWZhdWx0IEV2ZW50KClcbiAgICovXG4gIHRoaXMubGF5ZXJSZW1vdmVkID0gbmV3IEV2ZW50KCk7XG5cbiAgLyoqXG4gICAqIEFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gYSBsYXllciBjaGFuZ2VzIHBvc2l0aW9uIGluIHRoZSBjb2xsZWN0aW9uLiAgRXZlbnQgaGFuZGxlcnMgYXJlIHBhc3NlZCB0aGUgbGF5ZXIgdGhhdFxuICAgKiB3YXMgbW92ZWQsIGl0cyBuZXcgaW5kZXggYWZ0ZXIgdGhlIG1vdmUsIGFuZCBpdHMgb2xkIGluZGV4IHByaW9yIHRvIHRoZSBtb3ZlLlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEBkZWZhdWx0IEV2ZW50KClcbiAgICovXG4gIHRoaXMubGF5ZXJNb3ZlZCA9IG5ldyBFdmVudCgpO1xuXG4gIC8qKlxuICAgKiBBbiBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuIGEgbGF5ZXIgaXMgc2hvd24gb3IgaGlkZGVuIGJ5IHNldHRpbmcgdGhlXG4gICAqIHtAbGluayBJbWFnZXJ5TGF5ZXIjc2hvd30gcHJvcGVydHkuICBFdmVudCBoYW5kbGVycyBhcmUgcGFzc2VkIGEgcmVmZXJlbmNlIHRvIHRoaXMgbGF5ZXIsXG4gICAqIHRoZSBpbmRleCBvZiB0aGUgbGF5ZXIgaW4gdGhlIGNvbGxlY3Rpb24sIGFuZCBhIGZsYWcgdGhhdCBpcyB0cnVlIGlmIHRoZSBsYXllciBpcyBub3dcbiAgICogc2hvd24gb3IgZmFsc2UgaWYgaXQgaXMgbm93IGhpZGRlbi5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAZGVmYXVsdCBFdmVudCgpXG4gICAqL1xuICB0aGlzLmxheWVyU2hvd25PckhpZGRlbiA9IG5ldyBFdmVudCgpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhJbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyB0aGUgbnVtYmVyIG9mIGxheWVycyBpbiB0aGlzIGNvbGxlY3Rpb24uXG4gICAqIEBtZW1iZXJvZiBJbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbGF5ZXJzLmxlbmd0aDtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogQWRkcyBhIGxheWVyIHRvIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7SW1hZ2VyeUxheWVyfSBsYXllciB0aGUgbGF5ZXIgdG8gYWRkLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtpbmRleF0gdGhlIGluZGV4IHRvIGFkZCB0aGUgbGF5ZXIgYXQuICBJZiBvbWl0dGVkLCB0aGUgbGF5ZXIgd2lsbFxuICogICAgICAgICAgICAgICAgICAgICAgICAgYmUgYWRkZWQgb24gdG9wIG9mIGFsbCBleGlzdGluZyBsYXllcnMuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IGluZGV4LCBpZiBzdXBwbGllZCwgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVybyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIgb2YgdGhlIGxheWVycy5cbiAqL1xuSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGxheWVyLCBpbmRleCkge1xuICB2YXIgaGFzSW5kZXggPSBkZWZpbmVkKGluZGV4KTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQobGF5ZXIpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwibGF5ZXIgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmIChoYXNJbmRleCkge1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImluZGV4IG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHplcm8uXCIpO1xuICAgIH0gZWxzZSBpZiAoaW5kZXggPiB0aGlzLl9sYXllcnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgIFwiaW5kZXggbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBsYXllcnMuXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGlmICghaGFzSW5kZXgpIHtcbiAgICBpbmRleCA9IHRoaXMuX2xheWVycy5sZW5ndGg7XG4gICAgdGhpcy5fbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2xheWVycy5zcGxpY2UoaW5kZXgsIDAsIGxheWVyKTtcbiAgfVxuXG4gIHRoaXMuX3VwZGF0ZSgpO1xuICB0aGlzLmxheWVyQWRkZWQucmFpc2VFdmVudChsYXllciwgaW5kZXgpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGxheWVyIHVzaW5nIHRoZSBnaXZlbiBJbWFnZXJ5UHJvdmlkZXIgYW5kIGFkZHMgaXQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHtJbWFnZXJ5UHJvdmlkZXJ9IGltYWdlcnlQcm92aWRlciB0aGUgaW1hZ2VyeSBwcm92aWRlciB0byBjcmVhdGUgYSBuZXcgbGF5ZXIgZm9yLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtpbmRleF0gdGhlIGluZGV4IHRvIGFkZCB0aGUgbGF5ZXIgYXQuICBJZiBvbWl0dGVkLCB0aGUgbGF5ZXIgd2lsbFxuICogICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQgb24gdG9wIG9mIGFsbCBleGlzdGluZyBsYXllcnMuXG4gKiBAcmV0dXJucyB7SW1hZ2VyeUxheWVyfSBUaGUgbmV3bHkgY3JlYXRlZCBsYXllci5cbiAqL1xuSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkSW1hZ2VyeVByb3ZpZGVyID0gZnVuY3Rpb24gKFxuICBpbWFnZXJ5UHJvdmlkZXIsXG4gIGluZGV4XG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGltYWdlcnlQcm92aWRlcikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJpbWFnZXJ5UHJvdmlkZXIgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBsYXllciA9IG5ldyBJbWFnZXJ5TGF5ZXIoaW1hZ2VyeVByb3ZpZGVyKTtcbiAgdGhpcy5hZGQobGF5ZXIsIGluZGV4KTtcbiAgcmV0dXJuIGxheWVyO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgbGF5ZXIgZnJvbSB0aGlzIGNvbGxlY3Rpb24sIGlmIHByZXNlbnQuXG4gKlxuICogQHBhcmFtIHtJbWFnZXJ5TGF5ZXJ9IGxheWVyIFRoZSBsYXllciB0byByZW1vdmUuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtkZXN0cm95PXRydWVdIHdoZXRoZXIgdG8gZGVzdHJveSB0aGUgbGF5ZXJzIGluIGFkZGl0aW9uIHRvIHJlbW92aW5nIHRoZW0uXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgbGF5ZXIgd2FzIGluIHRoZSBjb2xsZWN0aW9uIGFuZCB3YXMgcmVtb3ZlZCxcbiAqICAgICAgICAgICAgICAgICAgICBmYWxzZSBpZiB0aGUgbGF5ZXIgd2FzIG5vdCBpbiB0aGUgY29sbGVjdGlvbi5cbiAqL1xuSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGxheWVyLCBkZXN0cm95KSB7XG4gIGRlc3Ryb3kgPSBkZWZhdWx0VmFsdWUoZGVzdHJveSwgdHJ1ZSk7XG5cbiAgdmFyIGluZGV4ID0gdGhpcy5fbGF5ZXJzLmluZGV4T2YobGF5ZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgdGhpcy5fbGF5ZXJzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICB0aGlzLl91cGRhdGUoKTtcblxuICAgIHRoaXMubGF5ZXJSZW1vdmVkLnJhaXNlRXZlbnQobGF5ZXIsIGluZGV4KTtcblxuICAgIGlmIChkZXN0cm95KSB7XG4gICAgICBsYXllci5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGxheWVycyBmcm9tIHRoaXMgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtkZXN0cm95PXRydWVdIHdoZXRoZXIgdG8gZGVzdHJveSB0aGUgbGF5ZXJzIGluIGFkZGl0aW9uIHRvIHJlbW92aW5nIHRoZW0uXG4gKi9cbkltYWdlcnlMYXllckNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uIChkZXN0cm95KSB7XG4gIGRlc3Ryb3kgPSBkZWZhdWx0VmFsdWUoZGVzdHJveSwgdHJ1ZSk7XG5cbiAgdmFyIGxheWVycyA9IHRoaXMuX2xheWVycztcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxheWVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBsYXllciA9IGxheWVyc1tpXTtcbiAgICB0aGlzLmxheWVyUmVtb3ZlZC5yYWlzZUV2ZW50KGxheWVyLCBpKTtcblxuICAgIGlmIChkZXN0cm95KSB7XG4gICAgICBsYXllci5kZXN0cm95KCk7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5fbGF5ZXJzID0gW107XG59O1xuXG4vKipcbiAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGNvbGxlY3Rpb24gY29udGFpbnMgYSBnaXZlbiBsYXllci5cbiAqXG4gKiBAcGFyYW0ge0ltYWdlcnlMYXllcn0gbGF5ZXIgdGhlIGxheWVyIHRvIGNoZWNrIGZvci5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgY29sbGVjdGlvbiBjb250YWlucyB0aGUgbGF5ZXIsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgcmV0dXJuIHRoaXMuaW5kZXhPZihsYXllcikgIT09IC0xO1xufTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHRoZSBpbmRleCBvZiBhIGdpdmVuIGxheWVyIGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7SW1hZ2VyeUxheWVyfSBsYXllciBUaGUgbGF5ZXIgdG8gZmluZCB0aGUgaW5kZXggb2YuXG4gKlxuICogQHJldHVybnMge051bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBsYXllciBpbiB0aGUgY29sbGVjdGlvbiwgb3IgLTEgaWYgdGhlIGxheWVyIGRvZXMgbm90IGV4aXN0IGluIHRoZSBjb2xsZWN0aW9uLlxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gIHJldHVybiB0aGlzLl9sYXllcnMuaW5kZXhPZihsYXllcik7XG59O1xuXG4vKipcbiAqIEdldHMgYSBsYXllciBieSBpbmRleCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCB0aGUgaW5kZXggdG8gcmV0cmlldmUuXG4gKlxuICogQHJldHVybnMge0ltYWdlcnlMYXllcn0gVGhlIGltYWdlcnkgbGF5ZXIgYXQgdGhlIGdpdmVuIGluZGV4LlxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGluZGV4KSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImluZGV4IGlzIHJlcXVpcmVkLlwiLCBcImluZGV4XCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHJldHVybiB0aGlzLl9sYXllcnNbaW5kZXhdO1xufTtcblxuZnVuY3Rpb24gZ2V0TGF5ZXJJbmRleChsYXllcnMsIGxheWVyKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChsYXllcikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJsYXllciBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGluZGV4ID0gbGF5ZXJzLmluZGV4T2YobGF5ZXIpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJsYXllciBpcyBub3QgaW4gdGhpcyBjb2xsZWN0aW9uLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICByZXR1cm4gaW5kZXg7XG59XG5cbmZ1bmN0aW9uIHN3YXBMYXllcnMoY29sbGVjdGlvbiwgaSwgaikge1xuICB2YXIgYXJyID0gY29sbGVjdGlvbi5fbGF5ZXJzO1xuICBpID0gQ2VzaXVtTWF0aC5jbGFtcChpLCAwLCBhcnIubGVuZ3RoIC0gMSk7XG4gIGogPSBDZXNpdW1NYXRoLmNsYW1wKGosIDAsIGFyci5sZW5ndGggLSAxKTtcblxuICBpZiAoaSA9PT0gaikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0ZW1wID0gYXJyW2ldO1xuICBhcnJbaV0gPSBhcnJbal07XG4gIGFycltqXSA9IHRlbXA7XG5cbiAgY29sbGVjdGlvbi5fdXBkYXRlKCk7XG5cbiAgY29sbGVjdGlvbi5sYXllck1vdmVkLnJhaXNlRXZlbnQodGVtcCwgaiwgaSk7XG59XG5cbi8qKlxuICogUmFpc2VzIGEgbGF5ZXIgdXAgb25lIHBvc2l0aW9uIGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7SW1hZ2VyeUxheWVyfSBsYXllciB0aGUgbGF5ZXIgdG8gbW92ZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gbGF5ZXIgaXMgbm90IGluIHRoaXMgY29sbGVjdGlvbi5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqL1xuSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5wcm90b3R5cGUucmFpc2UgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgdmFyIGluZGV4ID0gZ2V0TGF5ZXJJbmRleCh0aGlzLl9sYXllcnMsIGxheWVyKTtcbiAgc3dhcExheWVycyh0aGlzLCBpbmRleCwgaW5kZXggKyAxKTtcbn07XG5cbi8qKlxuICogTG93ZXJzIGEgbGF5ZXIgZG93biBvbmUgcG9zaXRpb24gaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHtJbWFnZXJ5TGF5ZXJ9IGxheWVyIHRoZSBsYXllciB0byBtb3ZlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBsYXllciBpcyBub3QgaW4gdGhpcyBjb2xsZWN0aW9uLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5sb3dlciA9IGZ1bmN0aW9uIChsYXllcikge1xuICB2YXIgaW5kZXggPSBnZXRMYXllckluZGV4KHRoaXMuX2xheWVycywgbGF5ZXIpO1xuICBzd2FwTGF5ZXJzKHRoaXMsIGluZGV4LCBpbmRleCAtIDEpO1xufTtcblxuLyoqXG4gKiBSYWlzZXMgYSBsYXllciB0byB0aGUgdG9wIG9mIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7SW1hZ2VyeUxheWVyfSBsYXllciB0aGUgbGF5ZXIgdG8gbW92ZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gbGF5ZXIgaXMgbm90IGluIHRoaXMgY29sbGVjdGlvbi5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqL1xuSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5wcm90b3R5cGUucmFpc2VUb1RvcCA9IGZ1bmN0aW9uIChsYXllcikge1xuICB2YXIgaW5kZXggPSBnZXRMYXllckluZGV4KHRoaXMuX2xheWVycywgbGF5ZXIpO1xuICBpZiAoaW5kZXggPT09IHRoaXMuX2xheWVycy5sZW5ndGggLSAxKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuX2xheWVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICB0aGlzLl9sYXllcnMucHVzaChsYXllcik7XG5cbiAgdGhpcy5fdXBkYXRlKCk7XG5cbiAgdGhpcy5sYXllck1vdmVkLnJhaXNlRXZlbnQobGF5ZXIsIHRoaXMuX2xheWVycy5sZW5ndGggLSAxLCBpbmRleCk7XG59O1xuXG4vKipcbiAqIExvd2VycyBhIGxheWVyIHRvIHRoZSBib3R0b20gb2YgdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHtJbWFnZXJ5TGF5ZXJ9IGxheWVyIHRoZSBsYXllciB0byBtb3ZlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBsYXllciBpcyBub3QgaW4gdGhpcyBjb2xsZWN0aW9uLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5sb3dlclRvQm90dG9tID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gIHZhciBpbmRleCA9IGdldExheWVySW5kZXgodGhpcy5fbGF5ZXJzLCBsYXllcik7XG4gIGlmIChpbmRleCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLl9sYXllcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgdGhpcy5fbGF5ZXJzLnNwbGljZSgwLCAwLCBsYXllcik7XG5cbiAgdGhpcy5fdXBkYXRlKCk7XG5cbiAgdGhpcy5sYXllck1vdmVkLnJhaXNlRXZlbnQobGF5ZXIsIDAsIGluZGV4KTtcbn07XG5cbnZhciBhcHBsaWNhYmxlUmVjdGFuZ2xlU2NyYXRjaCA9IG5ldyBSZWN0YW5nbGUoKTtcblxuZnVuY3Rpb24gcGlja0ltYWdlcnlIZWxwZXIoc2NlbmUsIHBpY2tlZExvY2F0aW9uLCBwaWNrRmVhdHVyZXMsIGNhbGxiYWNrKSB7XG4gIC8vIEZpbmQgdGhlIHRlcnJhaW4gdGlsZSBjb250YWluaW5nIHRoZSBwaWNrZWQgbG9jYXRpb24uXG4gIHZhciB0aWxlc1RvUmVuZGVyID0gc2NlbmUuZ2xvYmUuX3N1cmZhY2UuX3RpbGVzVG9SZW5kZXI7XG4gIHZhciBwaWNrZWRUaWxlO1xuXG4gIGZvciAoXG4gICAgdmFyIHRleHR1cmVJbmRleCA9IDA7XG4gICAgIWRlZmluZWQocGlja2VkVGlsZSkgJiYgdGV4dHVyZUluZGV4IDwgdGlsZXNUb1JlbmRlci5sZW5ndGg7XG4gICAgKyt0ZXh0dXJlSW5kZXhcbiAgKSB7XG4gICAgdmFyIHRpbGUgPSB0aWxlc1RvUmVuZGVyW3RleHR1cmVJbmRleF07XG4gICAgaWYgKFJlY3RhbmdsZS5jb250YWlucyh0aWxlLnJlY3RhbmdsZSwgcGlja2VkTG9jYXRpb24pKSB7XG4gICAgICBwaWNrZWRUaWxlID0gdGlsZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWRlZmluZWQocGlja2VkVGlsZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBQaWNrIGFnYWluc3QgYWxsIGF0dGFjaGVkIGltYWdlcnkgdGlsZXMgY29udGFpbmluZyB0aGUgcGlja2VkTG9jYXRpb24uXG4gIHZhciBpbWFnZXJ5VGlsZXMgPSBwaWNrZWRUaWxlLmRhdGEuaW1hZ2VyeTtcblxuICBmb3IgKHZhciBpID0gaW1hZ2VyeVRpbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgdmFyIHRlcnJhaW5JbWFnZXJ5ID0gaW1hZ2VyeVRpbGVzW2ldO1xuICAgIHZhciBpbWFnZXJ5ID0gdGVycmFpbkltYWdlcnkucmVhZHlJbWFnZXJ5O1xuICAgIGlmICghZGVmaW5lZChpbWFnZXJ5KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhciBwcm92aWRlciA9IGltYWdlcnkuaW1hZ2VyeUxheWVyLmltYWdlcnlQcm92aWRlcjtcbiAgICBpZiAocGlja0ZlYXR1cmVzICYmICFkZWZpbmVkKHByb3ZpZGVyLnBpY2tGZWF0dXJlcykpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghUmVjdGFuZ2xlLmNvbnRhaW5zKGltYWdlcnkucmVjdGFuZ2xlLCBwaWNrZWRMb2NhdGlvbikpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIElmIHRoaXMgaW1hZ2VyeSBjYW1lIGZyb20gYSBwYXJlbnQsIGl0IG1heSBub3QgYmUgYXBwbGljYWJsZSB0byBpdHMgZW50aXJlIHJlY3RhbmdsZS5cbiAgICAvLyBDaGVjayB0aGUgdGV4dHVyZUNvb3JkaW5hdGVSZWN0YW5nbGUuXG4gICAgdmFyIGFwcGxpY2FibGVSZWN0YW5nbGUgPSBhcHBsaWNhYmxlUmVjdGFuZ2xlU2NyYXRjaDtcblxuICAgIHZhciBlcHNpbG9uID0gMSAvIDEwMjQ7IC8vIDEvNCBvZiBhIHBpeGVsIGluIGEgdHlwaWNhbCAyNTZ4MjU2IHRpbGUuXG4gICAgYXBwbGljYWJsZVJlY3RhbmdsZS53ZXN0ID0gQ2VzaXVtTWF0aC5sZXJwKFxuICAgICAgcGlja2VkVGlsZS5yZWN0YW5nbGUud2VzdCxcbiAgICAgIHBpY2tlZFRpbGUucmVjdGFuZ2xlLmVhc3QsXG4gICAgICB0ZXJyYWluSW1hZ2VyeS50ZXh0dXJlQ29vcmRpbmF0ZVJlY3RhbmdsZS54IC0gZXBzaWxvblxuICAgICk7XG4gICAgYXBwbGljYWJsZVJlY3RhbmdsZS5lYXN0ID0gQ2VzaXVtTWF0aC5sZXJwKFxuICAgICAgcGlja2VkVGlsZS5yZWN0YW5nbGUud2VzdCxcbiAgICAgIHBpY2tlZFRpbGUucmVjdGFuZ2xlLmVhc3QsXG4gICAgICB0ZXJyYWluSW1hZ2VyeS50ZXh0dXJlQ29vcmRpbmF0ZVJlY3RhbmdsZS56ICsgZXBzaWxvblxuICAgICk7XG4gICAgYXBwbGljYWJsZVJlY3RhbmdsZS5zb3V0aCA9IENlc2l1bU1hdGgubGVycChcbiAgICAgIHBpY2tlZFRpbGUucmVjdGFuZ2xlLnNvdXRoLFxuICAgICAgcGlja2VkVGlsZS5yZWN0YW5nbGUubm9ydGgsXG4gICAgICB0ZXJyYWluSW1hZ2VyeS50ZXh0dXJlQ29vcmRpbmF0ZVJlY3RhbmdsZS55IC0gZXBzaWxvblxuICAgICk7XG4gICAgYXBwbGljYWJsZVJlY3RhbmdsZS5ub3J0aCA9IENlc2l1bU1hdGgubGVycChcbiAgICAgIHBpY2tlZFRpbGUucmVjdGFuZ2xlLnNvdXRoLFxuICAgICAgcGlja2VkVGlsZS5yZWN0YW5nbGUubm9ydGgsXG4gICAgICB0ZXJyYWluSW1hZ2VyeS50ZXh0dXJlQ29vcmRpbmF0ZVJlY3RhbmdsZS53ICsgZXBzaWxvblxuICAgICk7XG4gICAgaWYgKCFSZWN0YW5nbGUuY29udGFpbnMoYXBwbGljYWJsZVJlY3RhbmdsZSwgcGlja2VkTG9jYXRpb24pKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjYWxsYmFjayhpbWFnZXJ5KTtcbiAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgdGhlIGltYWdlcnkgbGF5ZXJzIHRoYXQgYXJlIGludGVyc2VjdGVkIGJ5IGEgcGljayByYXkuIFRvIGNvbXB1dGUgYSBwaWNrIHJheSBmcm9tIGFcbiAqIGxvY2F0aW9uIG9uIHRoZSBzY3JlZW4sIHVzZSB7QGxpbmsgQ2FtZXJhLmdldFBpY2tSYXl9LlxuICpcbiAqIEBwYXJhbSB7UmF5fSByYXkgVGhlIHJheSB0byB0ZXN0IGZvciBpbnRlcnNlY3Rpb24uXG4gKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSBUaGUgc2NlbmUuXG4gKiBAcmV0dXJuIHtJbWFnZXJ5TGF5ZXJbXXx1bmRlZmluZWR9IEFuIGFycmF5IHRoYXQgaW5jbHVkZXMgYWxsIG9mXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBsYXllcnMgdGhhdCBhcmUgaW50ZXJzZWN0ZWQgYnkgYSBnaXZlbiBwaWNrIHJheS4gVW5kZWZpbmVkIGlmXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vIGxheWVycyBhcmUgc2VsZWN0ZWQuXG4gKlxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5waWNrSW1hZ2VyeUxheWVycyA9IGZ1bmN0aW9uIChyYXksIHNjZW5lKSB7XG4gIC8vIEZpbmQgdGhlIHBpY2tlZCBsb2NhdGlvbiBvbiB0aGUgZ2xvYmUuXG4gIHZhciBwaWNrZWRQb3NpdGlvbiA9IHNjZW5lLmdsb2JlLnBpY2socmF5LCBzY2VuZSk7XG4gIGlmICghZGVmaW5lZChwaWNrZWRQb3NpdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcGlja2VkTG9jYXRpb24gPSBzY2VuZS5nbG9iZS5lbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgcGlja2VkUG9zaXRpb25cbiAgKTtcblxuICB2YXIgaW1hZ2VyeUxheWVycyA9IFtdO1xuXG4gIHBpY2tJbWFnZXJ5SGVscGVyKHNjZW5lLCBwaWNrZWRMb2NhdGlvbiwgZmFsc2UsIGZ1bmN0aW9uIChpbWFnZXJ5KSB7XG4gICAgaW1hZ2VyeUxheWVycy5wdXNoKGltYWdlcnkuaW1hZ2VyeUxheWVyKTtcbiAgfSk7XG5cbiAgaWYgKGltYWdlcnlMYXllcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiBpbWFnZXJ5TGF5ZXJzO1xufTtcblxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBkZXRlcm1pbmVzIHRoZSBpbWFnZXJ5IGxheWVyIGZlYXR1cmVzIHRoYXQgYXJlIGludGVyc2VjdGVkIGJ5IGEgcGljayByYXkuICBUaGUgaW50ZXJzZWN0ZWQgaW1hZ2VyeVxuICogbGF5ZXIgZmVhdHVyZXMgYXJlIGZvdW5kIGJ5IGludm9raW5nIHtAbGluayBJbWFnZXJ5UHJvdmlkZXIjcGlja0ZlYXR1cmVzfSBmb3IgZWFjaCBpbWFnZXJ5IGxheWVyIHRpbGUgaW50ZXJzZWN0ZWRcbiAqIGJ5IHRoZSBwaWNrIHJheS4gIFRvIGNvbXB1dGUgYSBwaWNrIHJheSBmcm9tIGEgbG9jYXRpb24gb24gdGhlIHNjcmVlbiwgdXNlIHtAbGluayBDYW1lcmEuZ2V0UGlja1JheX0uXG4gKlxuICogQHBhcmFtIHtSYXl9IHJheSBUaGUgcmF5IHRvIHRlc3QgZm9yIGludGVyc2VjdGlvbi5cbiAqIEBwYXJhbSB7U2NlbmV9IHNjZW5lIFRoZSBzY2VuZS5cbiAqIEByZXR1cm4ge1Byb21pc2UuPEltYWdlcnlMYXllckZlYXR1cmVJbmZvW10+fHVuZGVmaW5lZH0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgZmVhdHVyZXMgaW50ZXJzZWN0ZWQgYnkgdGhlIHBpY2sgcmF5LlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBpdCBjYW4gYmUgcXVpY2tseSBkZXRlcm1pbmVkIHRoYXQgbm8gZmVhdHVyZXMgYXJlIGludGVyc2VjdGVkIChmb3IgZXhhbXBsZSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVjYXVzZSBubyBhY3RpdmUgaW1hZ2VyeSBwcm92aWRlcnMgc3VwcG9ydCB7QGxpbmsgSW1hZ2VyeVByb3ZpZGVyI3BpY2tGZWF0dXJlc31cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYmVjYXVzZSB0aGUgcGljayByYXkgZG9lcyBub3QgaW50ZXJzZWN0IHRoZSBzdXJmYWNlKSwgdGhpcyBmdW5jdGlvbiB3aWxsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBwaWNrUmF5ID0gdmlld2VyLmNhbWVyYS5nZXRQaWNrUmF5KHdpbmRvd1Bvc2l0aW9uKTtcbiAqIHZhciBmZWF0dXJlc1Byb21pc2UgPSB2aWV3ZXIuaW1hZ2VyeUxheWVycy5waWNrSW1hZ2VyeUxheWVyRmVhdHVyZXMocGlja1JheSwgdmlld2VyLnNjZW5lKTtcbiAqIGlmICghQ2VzaXVtLmRlZmluZWQoZmVhdHVyZXNQcm9taXNlKSkge1xuICogICAgIGNvbnNvbGUubG9nKCdObyBmZWF0dXJlcyBwaWNrZWQuJyk7XG4gKiB9IGVsc2Uge1xuICogICAgIENlc2l1bS53aGVuKGZlYXR1cmVzUHJvbWlzZSwgZnVuY3Rpb24oZmVhdHVyZXMpIHtcbiAqICAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgd2hlbiB0aGUgbGlzdCBpZiBwaWNrZWQgZmVhdHVyZXMgaXMgYXZhaWxhYmxlLlxuICogICAgICAgICBjb25zb2xlLmxvZygnTnVtYmVyIG9mIGZlYXR1cmVzOiAnICsgZmVhdHVyZXMubGVuZ3RoKTtcbiAqICAgICAgICAgaWYgKGZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAqICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGaXJzdCBmZWF0dXJlIG5hbWU6ICcgKyBmZWF0dXJlc1swXS5uYW1lKTtcbiAqICAgICAgICAgfVxuICogICAgIH0pO1xuICogfVxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5waWNrSW1hZ2VyeUxheWVyRmVhdHVyZXMgPSBmdW5jdGlvbiAoXG4gIHJheSxcbiAgc2NlbmVcbikge1xuICAvLyBGaW5kIHRoZSBwaWNrZWQgbG9jYXRpb24gb24gdGhlIGdsb2JlLlxuICB2YXIgcGlja2VkUG9zaXRpb24gPSBzY2VuZS5nbG9iZS5waWNrKHJheSwgc2NlbmUpO1xuICBpZiAoIWRlZmluZWQocGlja2VkUG9zaXRpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHBpY2tlZExvY2F0aW9uID0gc2NlbmUuZ2xvYmUuZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgIHBpY2tlZFBvc2l0aW9uXG4gICk7XG5cbiAgdmFyIHByb21pc2VzID0gW107XG4gIHZhciBpbWFnZXJ5TGF5ZXJzID0gW107XG5cbiAgcGlja0ltYWdlcnlIZWxwZXIoc2NlbmUsIHBpY2tlZExvY2F0aW9uLCB0cnVlLCBmdW5jdGlvbiAoaW1hZ2VyeSkge1xuICAgIHZhciBwcm92aWRlciA9IGltYWdlcnkuaW1hZ2VyeUxheWVyLmltYWdlcnlQcm92aWRlcjtcbiAgICB2YXIgcHJvbWlzZSA9IHByb3ZpZGVyLnBpY2tGZWF0dXJlcyhcbiAgICAgIGltYWdlcnkueCxcbiAgICAgIGltYWdlcnkueSxcbiAgICAgIGltYWdlcnkubGV2ZWwsXG4gICAgICBwaWNrZWRMb2NhdGlvbi5sb25naXR1ZGUsXG4gICAgICBwaWNrZWRMb2NhdGlvbi5sYXRpdHVkZVxuICAgICk7XG4gICAgaWYgKGRlZmluZWQocHJvbWlzZSkpIHtcbiAgICAgIHByb21pc2VzLnB1c2gocHJvbWlzZSk7XG4gICAgICBpbWFnZXJ5TGF5ZXJzLnB1c2goaW1hZ2VyeS5pbWFnZXJ5TGF5ZXIpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHByb21pc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIHdoZW4uYWxsKHByb21pc2VzLCBmdW5jdGlvbiAocmVzdWx0cykge1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIGZvciAodmFyIHJlc3VsdEluZGV4ID0gMDsgcmVzdWx0SW5kZXggPCByZXN1bHRzLmxlbmd0aDsgKytyZXN1bHRJbmRleCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdHNbcmVzdWx0SW5kZXhdO1xuICAgICAgdmFyIGltYWdlID0gaW1hZ2VyeUxheWVyc1tyZXN1bHRJbmRleF07XG4gICAgICBpZiAoZGVmaW5lZChyZXN1bHQpICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgdmFyIGZlYXR1cmVJbmRleCA9IDA7XG4gICAgICAgICAgZmVhdHVyZUluZGV4IDwgcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICArK2ZlYXR1cmVJbmRleFxuICAgICAgICApIHtcbiAgICAgICAgICB2YXIgZmVhdHVyZSA9IHJlc3VsdFtmZWF0dXJlSW5kZXhdO1xuICAgICAgICAgIGZlYXR1cmUuaW1hZ2VyeUxheWVyID0gaW1hZ2U7XG4gICAgICAgICAgLy8gRm9yIGZlYXR1cmVzIHdpdGhvdXQgYSBwb3NpdGlvbiwgdXNlIHRoZSBwaWNrZWQgbG9jYXRpb24uXG4gICAgICAgICAgaWYgKCFkZWZpbmVkKGZlYXR1cmUucG9zaXRpb24pKSB7XG4gICAgICAgICAgICBmZWF0dXJlLnBvc2l0aW9uID0gcGlja2VkTG9jYXRpb247XG4gICAgICAgICAgfVxuICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9KTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyBmcmFtZSBzdGF0ZSB0byBleGVjdXRlIGFueSBxdWV1ZWQgdGV4dHVyZSByZS1wcm9qZWN0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7RnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBUaGUgZnJhbWVTdGF0ZS5cbiAqL1xuSW1hZ2VyeUxheWVyQ29sbGVjdGlvbi5wcm90b3R5cGUucXVldWVSZXByb2plY3Rpb25Db21tYW5kcyA9IGZ1bmN0aW9uIChcbiAgZnJhbWVTdGF0ZVxuKSB7XG4gIHZhciBsYXllcnMgPSB0aGlzLl9sYXllcnM7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsYXllcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBsYXllcnNbaV0ucXVldWVSZXByb2plY3Rpb25Db21tYW5kcyhmcmFtZVN0YXRlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYW5jZWxzIHJlLXByb2plY3Rpb24gY29tbWFuZHMgcXVldWVkIGZvciB0aGUgbmV4dCBmcmFtZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5jYW5jZWxSZXByb2plY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGF5ZXJzID0gdGhpcy5fbGF5ZXJzO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGF5ZXJzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgbGF5ZXJzW2ldLmNhbmNlbFJlcHJvamVjdGlvbnMoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICpcbiAqIEBzZWUgSW1hZ2VyeUxheWVyQ29sbGVjdGlvbiNkZXN0cm95XG4gKi9cbkltYWdlcnlMYXllckNvbGxlY3Rpb24ucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIERlc3Ryb3lzIHRoZSBXZWJHTCByZXNvdXJjZXMgaGVsZCBieSBhbGwgbGF5ZXJzIGluIHRoaXMgY29sbGVjdGlvbi4gIEV4cGxpY2l0bHkgZGVzdHJveWluZyB0aGlzXG4gKiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljIHJlbGVhc2Ugb2YgV2ViR0wgcmVzb3VyY2VzLCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gdGhlIGdhcmJhZ2VcbiAqIGNvbGxlY3Rvci5cbiAqIDxiciAvPjxiciAvPlxuICogT25jZSB0aGlzIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uICBUaGVyZWZvcmUsXG4gKiBhc3NpZ24gdGhlIHJldHVybiB2YWx1ZSAoPGNvZGU+dW5kZWZpbmVkPC9jb2RlPikgdG8gdGhlIG9iamVjdCBhcyBkb25lIGluIHRoZSBleGFtcGxlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGxheWVyQ29sbGVjdGlvbiA9IGxheWVyQ29sbGVjdGlvbiAmJiBsYXllckNvbGxlY3Rpb24uZGVzdHJveSgpO1xuICpcbiAqIEBzZWUgSW1hZ2VyeUxheWVyQ29sbGVjdGlvbiNpc0Rlc3Ryb3llZFxuICovXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnJlbW92ZUFsbCh0cnVlKTtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuXG5JbWFnZXJ5TGF5ZXJDb2xsZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaXNCYXNlTGF5ZXIgPSB0cnVlO1xuICB2YXIgbGF5ZXJzID0gdGhpcy5fbGF5ZXJzO1xuICB2YXIgbGF5ZXJzU2hvd25PckhpZGRlbjtcbiAgdmFyIGxheWVyO1xuICB2YXIgaSwgbGVuO1xuICBmb3IgKGkgPSAwLCBsZW4gPSBsYXllcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBsYXllciA9IGxheWVyc1tpXTtcblxuICAgIGxheWVyLl9sYXllckluZGV4ID0gaTtcblxuICAgIGlmIChsYXllci5zaG93KSB7XG4gICAgICBsYXllci5faXNCYXNlTGF5ZXIgPSBpc0Jhc2VMYXllcjtcbiAgICAgIGlzQmFzZUxheWVyID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxheWVyLl9pc0Jhc2VMYXllciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChsYXllci5zaG93ICE9PSBsYXllci5fc2hvdykge1xuICAgICAgaWYgKGRlZmluZWQobGF5ZXIuX3Nob3cpKSB7XG4gICAgICAgIGlmICghZGVmaW5lZChsYXllcnNTaG93bk9ySGlkZGVuKSkge1xuICAgICAgICAgIGxheWVyc1Nob3duT3JIaWRkZW4gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBsYXllcnNTaG93bk9ySGlkZGVuLnB1c2gobGF5ZXIpO1xuICAgICAgfVxuICAgICAgbGF5ZXIuX3Nob3cgPSBsYXllci5zaG93O1xuICAgIH1cbiAgfVxuXG4gIGlmIChkZWZpbmVkKGxheWVyc1Nob3duT3JIaWRkZW4pKSB7XG4gICAgZm9yIChpID0gMCwgbGVuID0gbGF5ZXJzU2hvd25PckhpZGRlbi5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgbGF5ZXIgPSBsYXllcnNTaG93bk9ySGlkZGVuW2ldO1xuICAgICAgdGhpcy5sYXllclNob3duT3JIaWRkZW4ucmFpc2VFdmVudChsYXllciwgbGF5ZXIuX2xheWVySW5kZXgsIGxheWVyLnNob3cpO1xuICAgIH1cbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlcnlMYXllckNvbGxlY3Rpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///59848\n')},93855:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82982);\n\n\n/**\n * Describes a rasterized feature, such as a point, polygon, polyline, etc., in an imagery layer.\n *\n * @alias ImageryLayerFeatureInfo\n * @constructor\n */\nfunction ImageryLayerFeatureInfo() {\n  /**\n   * Gets or sets the name of the feature.\n   * @type {String|undefined}\n   */\n  this.name = undefined;\n\n  /**\n   * Gets or sets an HTML description of the feature.  The HTML is not trusted and should\n   * be sanitized before display to the user.\n   * @type {String|undefined}\n   */\n  this.description = undefined;\n\n  /**\n   * Gets or sets the position of the feature, or undefined if the position is not known.\n   *\n   * @type {Cartographic|undefined}\n   */\n  this.position = undefined;\n\n  /**\n   * Gets or sets the raw data describing the feature.  The raw data may be in any\n   * number of formats, such as GeoJSON, KML, etc.\n   * @type {Object|undefined}\n   */\n  this.data = undefined;\n\n  /**\n   * Gets or sets the image layer of the feature.\n   * @type {Object|undefined}\n   */\n  this.imageryLayer = undefined;\n}\n\n/**\n * Configures the name of this feature by selecting an appropriate property.  The name will be obtained from\n * one of the following sources, in this order: 1) the property with the name \'name\', 2) the property with the name \'title\',\n * 3) the first property containing the word \'name\', 4) the first property containing the word \'title\'.  If\n * the name cannot be obtained from any of these sources, the existing name will be left unchanged.\n *\n * @param {Object} properties An object literal containing the properties of the feature.\n */\nImageryLayerFeatureInfo.prototype.configureNameFromProperties = function (\n  properties\n) {\n  var namePropertyPrecedence = 10;\n  var nameProperty;\n\n  for (var key in properties) {\n    if (properties.hasOwnProperty(key) && properties[key]) {\n      var lowerKey = key.toLowerCase();\n\n      if (namePropertyPrecedence > 1 && lowerKey === "name") {\n        namePropertyPrecedence = 1;\n        nameProperty = key;\n      } else if (namePropertyPrecedence > 2 && lowerKey === "title") {\n        namePropertyPrecedence = 2;\n        nameProperty = key;\n      } else if (namePropertyPrecedence > 3 && /name/i.test(key)) {\n        namePropertyPrecedence = 3;\n        nameProperty = key;\n      } else if (namePropertyPrecedence > 4 && /title/i.test(key)) {\n        namePropertyPrecedence = 4;\n        nameProperty = key;\n      }\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(nameProperty)) {\n    this.name = properties[nameProperty];\n  }\n};\n\n/**\n * Configures the description of this feature by creating an HTML table of properties and their values.\n *\n * @param {Object} properties An object literal containing the properties of the feature.\n */\nImageryLayerFeatureInfo.prototype.configureDescriptionFromProperties = function (\n  properties\n) {\n  function describe(properties) {\n    var html = \'<table class="cesium-infoBox-defaultTable">\';\n    for (var key in properties) {\n      if (properties.hasOwnProperty(key)) {\n        var value = properties[key];\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n          if (typeof value === "object") {\n            html +=\n              "<tr><td>" + key + "</td><td>" + describe(value) + "</td></tr>";\n          } else {\n            html += "<tr><td>" + key + "</td><td>" + value + "</td></tr>";\n          }\n        }\n      }\n    }\n    html += "</table>";\n\n    return html;\n  }\n\n  this.description = describe(properties);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ImageryLayerFeatureInfo);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTM4NTUuanMiLCJtYXBwaW5ncyI6IjtBQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUVBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5REFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9JbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mby5qcz8zZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBEZXNjcmliZXMgYSByYXN0ZXJpemVkIGZlYXR1cmUsIHN1Y2ggYXMgYSBwb2ludCwgcG9seWdvbiwgcG9seWxpbmUsIGV0Yy4sIGluIGFuIGltYWdlcnkgbGF5ZXIuXG4gKlxuICogQGFsaWFzIEltYWdlcnlMYXllckZlYXR1cmVJbmZvXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSW1hZ2VyeUxheWVyRmVhdHVyZUluZm8oKSB7XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIG5hbWUgb2YgdGhlIGZlYXR1cmUuXG4gICAqIEB0eXBlIHtTdHJpbmd8dW5kZWZpbmVkfVxuICAgKi9cbiAgdGhpcy5uYW1lID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgYW4gSFRNTCBkZXNjcmlwdGlvbiBvZiB0aGUgZmVhdHVyZS4gIFRoZSBIVE1MIGlzIG5vdCB0cnVzdGVkIGFuZCBzaG91bGRcbiAgICogYmUgc2FuaXRpemVkIGJlZm9yZSBkaXNwbGF5IHRvIHRoZSB1c2VyLlxuICAgKiBAdHlwZSB7U3RyaW5nfHVuZGVmaW5lZH1cbiAgICovXG4gIHRoaXMuZGVzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIGZlYXR1cmUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgcG9zaXRpb24gaXMgbm90IGtub3duLlxuICAgKlxuICAgKiBAdHlwZSB7Q2FydG9ncmFwaGljfHVuZGVmaW5lZH1cbiAgICovXG4gIHRoaXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgcmF3IGRhdGEgZGVzY3JpYmluZyB0aGUgZmVhdHVyZS4gIFRoZSByYXcgZGF0YSBtYXkgYmUgaW4gYW55XG4gICAqIG51bWJlciBvZiBmb3JtYXRzLCBzdWNoIGFzIEdlb0pTT04sIEtNTCwgZXRjLlxuICAgKiBAdHlwZSB7T2JqZWN0fHVuZGVmaW5lZH1cbiAgICovXG4gIHRoaXMuZGF0YSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBpbWFnZSBsYXllciBvZiB0aGUgZmVhdHVyZS5cbiAgICogQHR5cGUge09iamVjdHx1bmRlZmluZWR9XG4gICAqL1xuICB0aGlzLmltYWdlcnlMYXllciA9IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDb25maWd1cmVzIHRoZSBuYW1lIG9mIHRoaXMgZmVhdHVyZSBieSBzZWxlY3RpbmcgYW4gYXBwcm9wcmlhdGUgcHJvcGVydHkuICBUaGUgbmFtZSB3aWxsIGJlIG9idGFpbmVkIGZyb21cbiAqIG9uZSBvZiB0aGUgZm9sbG93aW5nIHNvdXJjZXMsIGluIHRoaXMgb3JkZXI6IDEpIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBuYW1lICduYW1lJywgMikgdGhlIHByb3BlcnR5IHdpdGggdGhlIG5hbWUgJ3RpdGxlJyxcbiAqIDMpIHRoZSBmaXJzdCBwcm9wZXJ0eSBjb250YWluaW5nIHRoZSB3b3JkICduYW1lJywgNCkgdGhlIGZpcnN0IHByb3BlcnR5IGNvbnRhaW5pbmcgdGhlIHdvcmQgJ3RpdGxlJy4gIElmXG4gKiB0aGUgbmFtZSBjYW5ub3QgYmUgb2J0YWluZWQgZnJvbSBhbnkgb2YgdGhlc2Ugc291cmNlcywgdGhlIGV4aXN0aW5nIG5hbWUgd2lsbCBiZSBsZWZ0IHVuY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBBbiBvYmplY3QgbGl0ZXJhbCBjb250YWluaW5nIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBmZWF0dXJlLlxuICovXG5JbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mby5wcm90b3R5cGUuY29uZmlndXJlTmFtZUZyb21Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKFxuICBwcm9wZXJ0aWVzXG4pIHtcbiAgdmFyIG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPSAxMDtcbiAgdmFyIG5hbWVQcm9wZXJ0eTtcblxuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkgJiYgcHJvcGVydGllc1trZXldKSB7XG4gICAgICB2YXIgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgaWYgKG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPiAxICYmIGxvd2VyS2V5ID09PSBcIm5hbWVcIikge1xuICAgICAgICBuYW1lUHJvcGVydHlQcmVjZWRlbmNlID0gMTtcbiAgICAgICAgbmFtZVByb3BlcnR5ID0ga2V5O1xuICAgICAgfSBlbHNlIGlmIChuYW1lUHJvcGVydHlQcmVjZWRlbmNlID4gMiAmJiBsb3dlcktleSA9PT0gXCJ0aXRsZVwiKSB7XG4gICAgICAgIG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPSAyO1xuICAgICAgICBuYW1lUHJvcGVydHkgPSBrZXk7XG4gICAgICB9IGVsc2UgaWYgKG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPiAzICYmIC9uYW1lL2kudGVzdChrZXkpKSB7XG4gICAgICAgIG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPSAzO1xuICAgICAgICBuYW1lUHJvcGVydHkgPSBrZXk7XG4gICAgICB9IGVsc2UgaWYgKG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPiA0ICYmIC90aXRsZS9pLnRlc3Qoa2V5KSkge1xuICAgICAgICBuYW1lUHJvcGVydHlQcmVjZWRlbmNlID0gNDtcbiAgICAgICAgbmFtZVByb3BlcnR5ID0ga2V5O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkZWZpbmVkKG5hbWVQcm9wZXJ0eSkpIHtcbiAgICB0aGlzLm5hbWUgPSBwcm9wZXJ0aWVzW25hbWVQcm9wZXJ0eV07XG4gIH1cbn07XG5cbi8qKlxuICogQ29uZmlndXJlcyB0aGUgZGVzY3JpcHRpb24gb2YgdGhpcyBmZWF0dXJlIGJ5IGNyZWF0aW5nIGFuIEhUTUwgdGFibGUgb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIEFuIG9iamVjdCBsaXRlcmFsIGNvbnRhaW5pbmcgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGZlYXR1cmUuXG4gKi9cbkltYWdlcnlMYXllckZlYXR1cmVJbmZvLnByb3RvdHlwZS5jb25maWd1cmVEZXNjcmlwdGlvbkZyb21Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKFxuICBwcm9wZXJ0aWVzXG4pIHtcbiAgZnVuY3Rpb24gZGVzY3JpYmUocHJvcGVydGllcykge1xuICAgIHZhciBodG1sID0gJzx0YWJsZSBjbGFzcz1cImNlc2l1bS1pbmZvQm94LWRlZmF1bHRUYWJsZVwiPic7XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1trZXldO1xuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBodG1sICs9XG4gICAgICAgICAgICAgIFwiPHRyPjx0ZD5cIiArIGtleSArIFwiPC90ZD48dGQ+XCIgKyBkZXNjcmliZSh2YWx1ZSkgKyBcIjwvdGQ+PC90cj5cIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHRtbCArPSBcIjx0cj48dGQ+XCIgKyBrZXkgKyBcIjwvdGQ+PHRkPlwiICsgdmFsdWUgKyBcIjwvdGQ+PC90cj5cIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaHRtbCArPSBcIjwvdGFibGU+XCI7XG5cbiAgICByZXR1cm4gaHRtbDtcbiAgfVxuXG4gIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmliZShwcm9wZXJ0aWVzKTtcbn07XG5leHBvcnQgZGVmYXVsdCBJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mbztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///93855\n')},95451:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _Core_loadKTX2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(54973);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(68985);\n\n\n\n\n\n\n/**\n * Provides imagery to be displayed on the surface of an ellipsoid.  This type describes an\n * interface and is not intended to be instantiated directly.\n *\n * @alias ImageryProvider\n * @constructor\n * @abstract\n *\n * @see ArcGisMapServerImageryProvider\n * @see BingMapsImageryProvider\n * @see OpenStreetMapImageryProvider\n * @see TileMapServiceImageryProvider\n * @see GoogleEarthEnterpriseImageryProvider\n * @see GoogleEarthEnterpriseMapsProvider\n * @see GridImageryProvider\n * @see IonImageryProvider\n * @see MapboxImageryProvider\n * @see MapboxStyleImageryProvider\n * @see SingleTileImageryProvider\n * @see TileCoordinatesImageryProvider\n * @see UrlTemplateImageryProvider\n * @see WebMapServiceImageryProvider\n * @see WebMapTileServiceImageryProvider\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Imagery%20Layers.html|Cesium Sandcastle Imagery Layers Demo}\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Imagery%20Layers%20Manipulation.html|Cesium Sandcastle Imagery Manipulation Demo}\n */\nfunction ImageryProvider() {\n  /**\n   * The default alpha blending value of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the night side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultNightAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the day side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultDayAlpha = undefined;\n\n  /**\n   * The default brightness of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0\n   * makes the imagery darker while greater than 1.0 makes it brighter.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultBrightness = undefined;\n\n  /**\n   * The default contrast of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces\n   * the contrast while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultContrast = undefined;\n\n  /**\n   * The default hue of this provider in radians. 0.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultHue = undefined;\n\n  /**\n   * The default saturation of this provider. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the\n   * saturation while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultSaturation = undefined;\n\n  /**\n   * The default gamma correction to apply to this provider.  1.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultGamma = undefined;\n\n  /**\n   * The default texture minification filter to apply to this provider.\n   *\n   * @type {TextureMinificationFilter}\n   * @default undefined\n   */\n  this.defaultMinificationFilter = undefined;\n\n  /**\n   * The default texture magnification filter to apply to this provider.\n   *\n   * @type {TextureMagnificationFilter}\n   * @default undefined\n   */\n  this.defaultMagnificationFilter = undefined;\n\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n}\n\nObject.defineProperties(ImageryProvider.prototype, {\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof ImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof ImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by the instance.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof ImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the width of each tile, in pixels.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof ImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof ImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof ImageryProvider.prototype\n   * @type {Number|undefined}\n   * @readonly\n   */\n  maximumLevel: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true. Generally,\n   * a minimum level should only be used when the rectangle of the imagery is small\n   * enough that the number of tiles at the minimum level is small.  An imagery\n   * provider with more than a few tiles at the minimum level will lead to\n   * rendering problems.\n   * @memberof ImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the tiling scheme used by the provider.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof ImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out "missing" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof ImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error..  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof ImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery. This function should\n   * not be called before {@link ImageryProvider#ready} returns true.\n   * @memberof ImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof ImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.\n   * @memberof ImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n});\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link ImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n *\n * @exception {DeveloperError} <code>requestImage</code> must not be called before the imagery provider is ready.\n */\nImageryProvider.prototype.requestImage = function (x, y, level, request) {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\n/**\n * Asynchronously determines what features, if any, are located at a given longitude and latitude within\n * a tile.  This function should not be called before {@link ImageryProvider#ready} returns true.\n * This function is optional, so it may not exist on all ImageryProviders.\n *\n * @function\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n *\n * @exception {DeveloperError} <code>pickFeatures</code> must not be called before the imagery provider is ready.\n */\nImageryProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\nvar ktx2Regex = /\\.ktx2$/i;\n\n/**\n * Loads an image from a given URL.  If the server referenced by the URL already has\n * too many requests pending, this function will instead return undefined, indicating\n * that the request should be retried later.\n *\n * @param {ImageryProvider} imageryProvider The imagery provider for the URL.\n * @param {Resource|String} url The URL of the image.\n * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n */\nImageryProvider.loadImage = function (imageryProvider, url) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("url", url);\n  //>>includeEnd(\'debug\');\n\n  var resource = _Core_Resource_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].createIfNeeded */ .Z.createIfNeeded(url);\n\n  if (ktx2Regex.test(resource.url)) {\n    return (0,_Core_loadKTX2_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(resource);\n  } else if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(imageryProvider) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(imageryProvider.tileDiscardPolicy)\n  ) {\n    return resource.fetchImage({\n      preferBlob: true,\n      preferImageBitmap: true,\n      flipY: true,\n    });\n  }\n\n  return resource.fetchImage({\n    preferImageBitmap: true,\n    flipY: true,\n  });\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ImageryProvider);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx5REFBZSxlQUFlLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvSW1hZ2VyeVByb3ZpZGVyLmpzPzEyNmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBsb2FkS1RYMiBmcm9tIFwiLi4vQ29yZS9sb2FkS1RYMi5qc1wiO1xuaW1wb3J0IFJlc291cmNlIGZyb20gXCIuLi9Db3JlL1Jlc291cmNlLmpzXCI7XG5cbi8qKlxuICogUHJvdmlkZXMgaW1hZ2VyeSB0byBiZSBkaXNwbGF5ZWQgb24gdGhlIHN1cmZhY2Ugb2YgYW4gZWxsaXBzb2lkLiAgVGhpcyB0eXBlIGRlc2NyaWJlcyBhblxuICogaW50ZXJmYWNlIGFuZCBpcyBub3QgaW50ZW5kZWQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxuICpcbiAqIEBhbGlhcyBJbWFnZXJ5UHJvdmlkZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFic3RyYWN0XG4gKlxuICogQHNlZSBBcmNHaXNNYXBTZXJ2ZXJJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgT3BlblN0cmVldE1hcEltYWdlcnlQcm92aWRlclxuICogQHNlZSBUaWxlTWFwU2VydmljZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyXG4gKiBAc2VlIEdyaWRJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgSW9uSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIE1hcGJveEltYWdlcnlQcm92aWRlclxuICogQHNlZSBNYXBib3hTdHlsZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBTaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlclxuICogQHNlZSBVcmxUZW1wbGF0ZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBXZWJNYXBTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFdlYk1hcFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyXG4gKlxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUltYWdlcnklMjBMYXllcnMuaHRtbHxDZXNpdW0gU2FuZGNhc3RsZSBJbWFnZXJ5IExheWVycyBEZW1vfVxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUltYWdlcnklMjBMYXllcnMlMjBNYW5pcHVsYXRpb24uaHRtbHxDZXNpdW0gU2FuZGNhc3RsZSBJbWFnZXJ5IE1hbmlwdWxhdGlvbiBEZW1vfVxuICovXG5mdW5jdGlvbiBJbWFnZXJ5UHJvdmlkZXIoKSB7XG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbHBoYSBibGVuZGluZyB2YWx1ZSBvZiB0aGlzIHByb3ZpZGVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRBbHBoYSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb24gdGhlIG5pZ2h0IHNpZGUgb2YgdGhlIGdsb2JlIG9mIHRoaXMgcHJvdmlkZXIsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdE5pZ2h0QWxwaGEgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFscGhhIGJsZW5kaW5nIHZhbHVlIG9uIHRoZSBkYXkgc2lkZSBvZiB0aGUgZ2xvYmUgb2YgdGhpcyBwcm92aWRlciwgd2l0aCAwLjAgcmVwcmVzZW50aW5nIGZ1bGx5IHRyYW5zcGFyZW50IGFuZFxuICAgKiAxLjAgcmVwcmVzZW50aW5nIGZ1bGx5IG9wYXF1ZS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0RGF5QWxwaGEgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGJyaWdodG5lc3Mgb2YgdGhpcyBwcm92aWRlci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuICBMZXNzIHRoYW4gMS4wXG4gICAqIG1ha2VzIHRoZSBpbWFnZXJ5IGRhcmtlciB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIG1ha2VzIGl0IGJyaWdodGVyLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRCcmlnaHRuZXNzID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBjb250cmFzdCBvZiB0aGlzIHByb3ZpZGVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gIExlc3MgdGhhbiAxLjAgcmVkdWNlc1xuICAgKiB0aGUgY29udHJhc3Qgd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBpbmNyZWFzZXMgaXQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdENvbnRyYXN0ID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBodWUgb2YgdGhpcyBwcm92aWRlciBpbiByYWRpYW5zLiAwLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRIdWUgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHNhdHVyYXRpb24gb2YgdGhpcyBwcm92aWRlci4gMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gTGVzcyB0aGFuIDEuMCByZWR1Y2VzIHRoZVxuICAgKiBzYXR1cmF0aW9uIHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgaW5jcmVhc2VzIGl0LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRTYXR1cmF0aW9uID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBnYW1tYSBjb3JyZWN0aW9uIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRHYW1tYSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgdGV4dHVyZSBtaW5pZmljYXRpb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuXG4gICAqXG4gICAqIEB0eXBlIHtUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdE1pbmlmaWNhdGlvbkZpbHRlciA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgdGV4dHVyZSBtYWduaWZpY2F0aW9uIGZpbHRlciB0byBhcHBseSB0byB0aGlzIHByb3ZpZGVyLlxuICAgKlxuICAgKiBAdHlwZSB7VGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXJ9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0TWFnbmlmaWNhdGlvbkZpbHRlciA9IHVuZGVmaW5lZDtcblxuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcigpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHk6IHtcbiAgICBnZXQ6IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yLFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRydWUgd2hlbiB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb21pc2UuPEJvb2xlYW4+fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5UHJvbWlzZToge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJlY3RhbmdsZSwgaW4gcmFkaWFucywgb2YgdGhlIGltYWdlcnkgcHJvdmlkZWQgYnkgdGhlIGluc3RhbmNlLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UmVjdGFuZ2xlfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlY3RhbmdsZToge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHdpZHRoIG9mIGVhY2ggdGlsZSwgaW4gcGl4ZWxzLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVXaWR0aDoge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGhlaWdodCBvZiBlYWNoIHRpbGUsIGluIHBpeGVscy4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxlSGVpZ2h0OiB7XG4gICAgZ2V0OiBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcixcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgbWF4aW11bSBsZXZlbC1vZi1kZXRhaWwgdGhhdCBjYW4gYmUgcmVxdWVzdGVkLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBtYXhpbXVtTGV2ZWw6IHtcbiAgICBnZXQ6IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yLFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtaW5pbXVtIGxldmVsLW9mLWRldGFpbCB0aGF0IGNhbiBiZSByZXF1ZXN0ZWQuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuIEdlbmVyYWxseSxcbiAgICogYSBtaW5pbXVtIGxldmVsIHNob3VsZCBvbmx5IGJlIHVzZWQgd2hlbiB0aGUgcmVjdGFuZ2xlIG9mIHRoZSBpbWFnZXJ5IGlzIHNtYWxsXG4gICAqIGVub3VnaCB0aGF0IHRoZSBudW1iZXIgb2YgdGlsZXMgYXQgdGhlIG1pbmltdW0gbGV2ZWwgaXMgc21hbGwuICBBbiBpbWFnZXJ5XG4gICAqIHByb3ZpZGVyIHdpdGggbW9yZSB0aGFuIGEgZmV3IHRpbGVzIGF0IHRoZSBtaW5pbXVtIGxldmVsIHdpbGwgbGVhZCB0b1xuICAgKiByZW5kZXJpbmcgcHJvYmxlbXMuXG4gICAqIEBtZW1iZXJvZiBJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgbWluaW11bUxldmVsOiB7XG4gICAgZ2V0OiBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcixcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgdGlsaW5nIHNjaGVtZSB1c2VkIGJ5IHRoZSBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxpbmdTY2hlbWU6IHtcbiAgICBnZXQ6IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yLFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxlIGRpc2NhcmQgcG9saWN5LiAgSWYgbm90IHVuZGVmaW5lZCwgdGhlIGRpc2NhcmQgcG9saWN5IGlzIHJlc3BvbnNpYmxlXG4gICAqIGZvciBmaWx0ZXJpbmcgb3V0IFwibWlzc2luZ1wiIHRpbGVzIHZpYSBpdHMgc2hvdWxkRGlzY2FyZEltYWdlIGZ1bmN0aW9uLiAgSWYgdGhpcyBmdW5jdGlvblxuICAgKiByZXR1cm5zIHVuZGVmaW5lZCwgbm8gdGlsZXMgYXJlIGZpbHRlcmVkLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7VGlsZURpc2NhcmRQb2xpY3l9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdGlsZURpc2NhcmRQb2xpY3k6IHtcbiAgICBnZXQ6IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yLFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gdGhlIGltYWdlcnkgcHJvdmlkZXIgZW5jb3VudGVycyBhbiBhc3luY2hyb25vdXMgZXJyb3IuLiAgQnkgc3Vic2NyaWJpbmdcbiAgICogdG8gdGhlIGV2ZW50LCB5b3Ugd2lsbCBiZSBub3RpZmllZCBvZiB0aGUgZXJyb3IgYW5kIGNhbiBwb3RlbnRpYWxseSByZWNvdmVyIGZyb20gaXQuICBFdmVudCBsaXN0ZW5lcnNcbiAgICogYXJlIHBhc3NlZCBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgVGlsZVByb3ZpZGVyRXJyb3J9LlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZXJyb3JFdmVudDoge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNyZWRpdCB0byBkaXNwbGF5IHdoZW4gdGhpcyBpbWFnZXJ5IHByb3ZpZGVyIGlzIGFjdGl2ZS4gIFR5cGljYWxseSB0aGlzIGlzIHVzZWQgdG8gY3JlZGl0XG4gICAqIHRoZSBzb3VyY2Ugb2YgdGhlIGltYWdlcnkuIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0NyZWRpdH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjcmVkaXQ6IHtcbiAgICBnZXQ6IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yLFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm94eSB1c2VkIGJ5IHRoaXMgcHJvdmlkZXIuXG4gICAqIEBtZW1iZXJvZiBJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm94eX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBwcm94eToge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZXMgcHJvdmlkZWQgYnkgdGhpcyBpbWFnZXJ5IHByb3ZpZGVyXG4gICAqIGluY2x1ZGUgYW4gYWxwaGEgY2hhbm5lbC4gIElmIHRoaXMgcHJvcGVydHkgaXMgZmFsc2UsIGFuIGFscGhhIGNoYW5uZWwsIGlmIHByZXNlbnQsIHdpbGxcbiAgICogYmUgaWdub3JlZC4gIElmIHRoaXMgcHJvcGVydHkgaXMgdHJ1ZSwgYW55IGltYWdlcyB3aXRob3V0IGFuIGFscGhhIGNoYW5uZWwgd2lsbCBiZSB0cmVhdGVkXG4gICAqIGFzIGlmIHRoZWlyIGFscGhhIGlzIDEuMCBldmVyeXdoZXJlLiAgV2hlbiB0aGlzIHByb3BlcnR5IGlzIGZhbHNlLCBtZW1vcnkgdXNhZ2VcbiAgICogYW5kIHRleHR1cmUgdXBsb2FkIHRpbWUgYXJlIHJlZHVjZWQuXG4gICAqIEBtZW1iZXJvZiBJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhhc0FscGhhQ2hhbm5lbDoge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG59KTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjcmVkaXRzIHRvIGJlIGRpc3BsYXllZCB3aGVuIGEgZ2l2ZW4gdGlsZSBpcyBkaXNwbGF5ZWQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHRpbGUgWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHRpbGUgWSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsO1xuICogQHJldHVybnMge0NyZWRpdFtdfSBUaGUgY3JlZGl0cyB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgdGlsZSBpcyBkaXNwbGF5ZWQuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IDxjb2RlPmdldFRpbGVDcmVkaXRzPC9jb2RlPiBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlxuICovXG5JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLmdldFRpbGVDcmVkaXRzID0gZnVuY3Rpb24gKHgsIHksIGxldmVsKSB7XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yKCk7XG59O1xuXG4vKipcbiAqIFJlcXVlc3RzIHRoZSBpbWFnZSBmb3IgYSBnaXZlbiB0aWxlLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWwuXG4gKiBAcGFyYW0ge1JlcXVlc3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdCBvYmplY3QuIEludGVuZGVkIGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50Pnx1bmRlZmluZWR9IEEgcHJvbWlzZSBmb3IgdGhlIGltYWdlIHRoYXQgd2lsbCByZXNvbHZlIHdoZW4gdGhlIGltYWdlIGlzIGF2YWlsYWJsZSwgb3JcbiAqICAgICAgICAgIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgdG9vIG1hbnkgYWN0aXZlIHJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIsIGFuZCB0aGUgcmVxdWVzdFxuICogICAgICAgICAgc2hvdWxkIGJlIHJldHJpZWQgbGF0ZXIuICBUaGUgcmVzb2x2ZWQgaW1hZ2UgbWF5IGJlIGVpdGhlciBhblxuICogICAgICAgICAgSW1hZ2Ugb3IgYSBDYW52YXMgRE9NIG9iamVjdC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gPGNvZGU+cmVxdWVzdEltYWdlPC9jb2RlPiBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlxuICovXG5JbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLnJlcXVlc3RJbWFnZSA9IGZ1bmN0aW9uICh4LCB5LCBsZXZlbCwgcmVxdWVzdCkge1xuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcigpO1xufTtcblxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBkZXRlcm1pbmVzIHdoYXQgZmVhdHVyZXMsIGlmIGFueSwgYXJlIGxvY2F0ZWQgYXQgYSBnaXZlbiBsb25naXR1ZGUgYW5kIGxhdGl0dWRlIHdpdGhpblxuICogYSB0aWxlLiAgVGhpcyBmdW5jdGlvbiBzaG91bGQgbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICogVGhpcyBmdW5jdGlvbiBpcyBvcHRpb25hbCwgc28gaXQgbWF5IG5vdCBleGlzdCBvbiBhbGwgSW1hZ2VyeVByb3ZpZGVycy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWwuXG4gKiBAcGFyYW0ge051bWJlcn0gbG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgYXQgd2hpY2ggdG8gcGljayBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsYXRpdHVkZSAgVGhlIGxhdGl0dWRlIGF0IHdoaWNoIHRvIHBpY2sgZmVhdHVyZXMuXG4gKiBAcmV0dXJuIHtQcm9taXNlLjxJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mb1tdPnx1bmRlZmluZWR9IEEgcHJvbWlzZSBmb3IgdGhlIHBpY2tlZCBmZWF0dXJlcyB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBhc3luY2hyb25vdXNcbiAqICAgICAgICAgICAgICAgICAgIHBpY2tpbmcgY29tcGxldGVzLiAgVGhlIHJlc29sdmVkIHZhbHVlIGlzIGFuIGFycmF5IG9mIHtAbGluayBJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mb31cbiAqICAgICAgICAgICAgICAgICAgIGluc3RhbmNlcy4gIFRoZSBhcnJheSBtYXkgYmUgZW1wdHkgaWYgbm8gZmVhdHVyZXMgYXJlIGZvdW5kIGF0IHRoZSBnaXZlbiBsb2NhdGlvbi5cbiAqICAgICAgICAgICAgICAgICAgIEl0IG1heSBhbHNvIGJlIHVuZGVmaW5lZCBpZiBwaWNraW5nIGlzIG5vdCBzdXBwb3J0ZWQuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IDxjb2RlPnBpY2tGZWF0dXJlczwvY29kZT4gbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cbiAqL1xuSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZS5waWNrRmVhdHVyZXMgPSBmdW5jdGlvbiAoXG4gIHgsXG4gIHksXG4gIGxldmVsLFxuICBsb25naXR1ZGUsXG4gIGxhdGl0dWRlXG4pIHtcbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IoKTtcbn07XG5cbnZhciBrdHgyUmVnZXggPSAvXFwua3R4MiQvaTtcblxuLyoqXG4gKiBMb2FkcyBhbiBpbWFnZSBmcm9tIGEgZ2l2ZW4gVVJMLiAgSWYgdGhlIHNlcnZlciByZWZlcmVuY2VkIGJ5IHRoZSBVUkwgYWxyZWFkeSBoYXNcbiAqIHRvbyBtYW55IHJlcXVlc3RzIHBlbmRpbmcsIHRoaXMgZnVuY3Rpb24gd2lsbCBpbnN0ZWFkIHJldHVybiB1bmRlZmluZWQsIGluZGljYXRpbmdcbiAqIHRoYXQgdGhlIHJlcXVlc3Qgc2hvdWxkIGJlIHJldHJpZWQgbGF0ZXIuXG4gKlxuICogQHBhcmFtIHtJbWFnZXJ5UHJvdmlkZXJ9IGltYWdlcnlQcm92aWRlciBUaGUgaW1hZ2VyeSBwcm92aWRlciBmb3IgdGhlIFVSTC5cbiAqIEBwYXJhbSB7UmVzb3VyY2V8U3RyaW5nfSB1cmwgVGhlIFVSTCBvZiB0aGUgaW1hZ2UuXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudD58dW5kZWZpbmVkfSBBIHByb21pc2UgZm9yIHRoZSBpbWFnZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBpbWFnZSBpcyBhdmFpbGFibGUsIG9yXG4gKiAgICAgICAgICB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIHRvbyBtYW55IGFjdGl2ZSByZXF1ZXN0cyB0byB0aGUgc2VydmVyLCBhbmQgdGhlIHJlcXVlc3RcbiAqICAgICAgICAgIHNob3VsZCBiZSByZXRyaWVkIGxhdGVyLiAgVGhlIHJlc29sdmVkIGltYWdlIG1heSBiZSBlaXRoZXIgYW5cbiAqICAgICAgICAgIEltYWdlIG9yIGEgQ2FudmFzIERPTSBvYmplY3QuXG4gKi9cbkltYWdlcnlQcm92aWRlci5sb2FkSW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2VyeVByb3ZpZGVyLCB1cmwpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInVybFwiLCB1cmwpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgcmVzb3VyY2UgPSBSZXNvdXJjZS5jcmVhdGVJZk5lZWRlZCh1cmwpO1xuXG4gIGlmIChrdHgyUmVnZXgudGVzdChyZXNvdXJjZS51cmwpKSB7XG4gICAgcmV0dXJuIGxvYWRLVFgyKHJlc291cmNlKTtcbiAgfSBlbHNlIGlmIChcbiAgICBkZWZpbmVkKGltYWdlcnlQcm92aWRlcikgJiZcbiAgICBkZWZpbmVkKGltYWdlcnlQcm92aWRlci50aWxlRGlzY2FyZFBvbGljeSlcbiAgKSB7XG4gICAgcmV0dXJuIHJlc291cmNlLmZldGNoSW1hZ2Uoe1xuICAgICAgcHJlZmVyQmxvYjogdHJ1ZSxcbiAgICAgIHByZWZlckltYWdlQml0bWFwOiB0cnVlLFxuICAgICAgZmxpcFk6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzb3VyY2UuZmV0Y2hJbWFnZSh7XG4gICAgcHJlZmVySW1hZ2VCaXRtYXA6IHRydWUsXG4gICAgZmxpcFk6IHRydWUsXG4gIH0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlcnlQcm92aWRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///95451\n')},80955:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * The direction to display an ImageryLayer relative to the {@link Scene#imagerySplitPosition}.\n *\n * @enum {Number}\n *\n * @see ImageryLayer#splitDirection\n */\nvar ImagerySplitDirection = {\n  /**\n   * Display the ImageryLayer to the left of the {@link Scene#imagerySplitPosition}.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LEFT: -1.0,\n\n  /**\n   *  Always display the ImageryLayer.\n   *\n   * @type {Number}\n   * @constant\n   */\n  NONE: 0.0,\n\n  /**\n   * Display the ImageryLayer to the right of the {@link Scene#imagerySplitPosition}.\n   *\n   * @type {Number}\n   * @constant\n   */\n  RIGHT: 1.0,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(ImagerySplitDirection));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODA5NTUuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSw2REFBNkQsaUNBQWlDO0FBQzlGO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsaUNBQWlDO0FBQ25GO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbURBQW1ELGlDQUFpQztBQUNwRjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLG9DQUFvQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0ltYWdlcnlTcGxpdERpcmVjdGlvbi5qcz9kNjQxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhlIGRpcmVjdGlvbiB0byBkaXNwbGF5IGFuIEltYWdlcnlMYXllciByZWxhdGl2ZSB0byB0aGUge0BsaW5rIFNjZW5lI2ltYWdlcnlTcGxpdFBvc2l0aW9ufS5cbiAqXG4gKiBAZW51bSB7TnVtYmVyfVxuICpcbiAqIEBzZWUgSW1hZ2VyeUxheWVyI3NwbGl0RGlyZWN0aW9uXG4gKi9cbnZhciBJbWFnZXJ5U3BsaXREaXJlY3Rpb24gPSB7XG4gIC8qKlxuICAgKiBEaXNwbGF5IHRoZSBJbWFnZXJ5TGF5ZXIgdG8gdGhlIGxlZnQgb2YgdGhlIHtAbGluayBTY2VuZSNpbWFnZXJ5U3BsaXRQb3NpdGlvbn0uXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTEVGVDogLTEuMCxcblxuICAvKipcbiAgICogIEFsd2F5cyBkaXNwbGF5IHRoZSBJbWFnZXJ5TGF5ZXIuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTk9ORTogMC4wLFxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHRoZSBJbWFnZXJ5TGF5ZXIgdG8gdGhlIHJpZ2h0IG9mIHRoZSB7QGxpbmsgU2NlbmUjaW1hZ2VyeVNwbGl0UG9zaXRpb259LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFJJR0hUOiAxLjAsXG59O1xuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZShJbWFnZXJ5U3BsaXREaXJlY3Rpb24pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///80955\n')},73919:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * @private\n */\nvar ImageryState = {\n  UNLOADED: 0,\n  TRANSITIONING: 1,\n  RECEIVED: 2,\n  TEXTURE_LOADED: 3,\n  READY: 4,\n  FAILED: 5,\n  INVALID: 6,\n  PLACEHOLDER: 7,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(ImageryState));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzM5MTkuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSwyQkFBMkIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9JbWFnZXJ5U3RhdGUuanM/MmFjNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBJbWFnZXJ5U3RhdGUgPSB7XG4gIFVOTE9BREVEOiAwLFxuICBUUkFOU0lUSU9OSU5HOiAxLFxuICBSRUNFSVZFRDogMixcbiAgVEVYVFVSRV9MT0FERUQ6IDMsXG4gIFJFQURZOiA0LFxuICBGQUlMRUQ6IDUsXG4gIElOVkFMSUQ6IDYsXG4gIFBMQUNFSE9MREVSOiA3LFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoSW1hZ2VyeVN0YXRlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///73919\n')}}]);