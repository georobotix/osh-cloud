"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[382],{39485:function(e,t,r){var i=r(60216),o=r(66553),n=r(62200),a=r(99417);function s(e){e=(0,n.Z)(e,1),o.Z.typeOf.number.greaterThan("radius",e,0),this._radius=(0,n.Z)(e,1)}Object.defineProperties(s.prototype,{radius:{get:function(){return this._radius},set:function(e){o.Z.typeOf.number.greaterThan("value",e,0),this._radius=e}}}),s.prototype.emit=function(e){var t=a.Z.randomBetween(0,a.Z.TWO_PI),r=a.Z.randomBetween(0,a.Z.PI),o=a.Z.randomBetween(0,this._radius),n=o*Math.cos(t)*Math.sin(r),s=o*Math.sin(t)*Math.sin(r),h=o*Math.cos(r);e.position=i.Z.fromElements(n,s,h,e.position),e.velocity=i.Z.normalize(e.position,e.velocity)}},87233:function(e,t,r){var i=r(77053),o=r(81255),n={CESIUM_3D_TILE_MASK:128,SKIP_LOD_MASK:112,SKIP_LOD_BIT_SHIFT:4,CLASSIFICATION_MASK:15,setCesium3DTileBit:function(){return{enabled:!0,frontFunction:i.Z.ALWAYS,frontOperation:{fail:o.Z.KEEP,zFail:o.Z.KEEP,zPass:o.Z.REPLACE},backFunction:i.Z.ALWAYS,backOperation:{fail:o.Z.KEEP,zFail:o.Z.KEEP,zPass:o.Z.REPLACE},reference:n.CESIUM_3D_TILE_MASK,mask:n.CESIUM_3D_TILE_MASK}}};t["Z"]=Object.freeze(n)},77053:function(e,t,r){var i=r(52200),o={NEVER:i.Z.NEVER,LESS:i.Z.LESS,EQUAL:i.Z.EQUAL,LESS_OR_EQUAL:i.Z.LEQUAL,GREATER:i.Z.GREATER,NOT_EQUAL:i.Z.NOTEQUAL,GREATER_OR_EQUAL:i.Z.GEQUAL,ALWAYS:i.Z.ALWAYS};t["Z"]=Object.freeze(o)},81255:function(e,t,r){var i=r(52200),o={ZERO:i.Z.ZERO,KEEP:i.Z.KEEP,REPLACE:i.Z.REPLACE,INCREMENT:i.Z.INCR,DECREMENT:i.Z.DECR,INVERT:i.Z.INVERT,INCREMENT_WRAP:i.Z.INCR_WRAP,DECREMENT_WRAP:i.Z.DECR_WRAP};t["Z"]=Object.freeze(o)},78002:function(e,t,r){var i=r(12572);function o(){}o.prototype.evaluate=function(e,t){i.Z.throwInstantiationError()},o.prototype.evaluateColor=function(e,t){i.Z.throwInstantiationError()},o.prototype.getShaderFunction=function(e,t,r,o){i.Z.throwInstantiationError()},o.prototype.getVariables=function(){i.Z.throwInstantiationError()}},76027:function(e,t,r){var i=r(48243),o=r(60838),n=r(60216),a=r(63367),s=r(84828),h=r(82982),u=r(86511),d=r(22832),c=r(99417),l=r(72248),Z=r(38443),f=r(97264),g=r(99095),m=r(58597),T=r(92357),w=r(60072),x=r(21572),v=r(10667),_=r(46588),p=r(8743),S=r(18192),E=r(26103),y=r(44242),b=r(54830),M=r(13633),A=r(89917),N=r(48244);function O(){this.show=!0,this._drawCommand=new w.Z({primitiveType:f.Z.TRIANGLES,boundingVolume:new i.Z,owner:this}),this._commands={drawCommand:this._drawCommand,computeCommand:void 0},this._boundingVolume=new i.Z,this._boundingVolume2D=new i.Z,this._texture=void 0,this._drawingBufferWidth=void 0,this._drawingBufferHeight=void 0,this._radiusTS=void 0,this._size=void 0,this.glowFactor=1,this._glowFactorDirty=!1,this._useHdr=void 0;var e=this;this._uniformMap={u_texture:function(){return e._texture},u_size:function(){return e._size}}}Object.defineProperties(O.prototype,{glowFactor:{get:function(){return this._glowFactor},set:function(e){e=Math.max(e,0),this._glowFactor=e,this._glowFactorDirty=!0}}});var R=new o.Z,C=new o.Z,I=new a.Z,L=new a.Z;O.prototype.update=function(e,t,r){if(this.show){var a=e.mode;if(a!==A.Z.SCENE2D&&a!==A.Z.MORPHING&&e.passes.render){var u=e.context,f=t.viewport.width,w=t.viewport.height;if(!(0,h.Z)(this._texture)||f!==this._drawingBufferWidth||w!==this._drawingBufferHeight||this._glowFactorDirty||r!==this._useHdr){this._texture=this._texture&&this._texture.destroy(),this._drawingBufferWidth=f,this._drawingBufferHeight=w,this._glowFactorDirty=!1,this._useHdr=r;var O=Math.max(f,w);O=Math.pow(2,Math.ceil(Math.log(O)/Math.log(2))-2),O=Math.max(1,O);var P=r?u.halfFloatingPointTexture?x.Z.HALF_FLOAT:x.Z.FLOAT:x.Z.UNSIGNED_BYTE;this._texture=new p.Z({context:u,width:O,height:O,pixelFormat:Z.Z.RGBA,pixelDatatype:P}),this._glowLengthTS=5*this._glowFactor,this._radiusTS=1/(1+2*this._glowLengthTS)*.5;var W=this,F={u_radiusTS:function(){return W._radiusTS}};this._commands.computeCommand=new T.Z({fragmentShaderSource:y.Z,outputTexture:this._texture,uniformMap:F,persists:!1,owner:this,postExecute:function(){W._commands.computeCommand=void 0}})}var H=this._drawCommand;if(!(0,h.Z)(H.vertexArray)){var k={direction:0},U=new Uint8Array(8);U[0]=0,U[1]=0,U[2]=255,U[3]=0,U[4]=255,U[5]=255,U[6]=0,U[7]=255;var D=g.Z.createVertexBuffer({context:u,typedArray:U,usage:m.Z.STATIC_DRAW}),B=[{index:k.direction,vertexBuffer:D,componentsPerAttribute:2,normalize:!0,componentDatatype:s.Z.UNSIGNED_BYTE}],z=g.Z.createIndexBuffer({context:u,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:m.Z.STATIC_DRAW,indexDatatype:d.Z.UNSIGNED_SHORT});H.vertexArray=new S.Z({context:u,attributes:B,indexBuffer:z}),H.shaderProgram=_.Z.fromCache({context:u,vertexShaderSource:b.Z,fragmentShaderSource:E.Z,attributeLocations:k}),H.renderState=v.Z.fromCache({blending:M.Z.ALPHA_BLEND}),H.uniformMap=this._uniformMap}var V=u.uniformState.sunPositionWC,G=u.uniformState.sunPositionColumbusView,q=this._boundingVolume,K=this._boundingVolume2D;n.Z.clone(V,q.center),K.center.x=G.z,K.center.y=G.x,K.center.z=G.y,q.radius=c.Z.SOLAR_RADIUS+c.Z.SOLAR_RADIUS*this._glowLengthTS,K.radius=q.radius,a===A.Z.SCENE3D?i.Z.clone(q,H.boundingVolume):a===A.Z.COLUMBUS_VIEW&&i.Z.clone(K,H.boundingVolume);var Y=N.Z.computeActualWgs84Position(e,V,L),j=n.Z.magnitude(n.Z.subtract(Y,e.camera.position,L)),Q=u.uniformState.projection,J=I;J.x=0,J.y=0,J.z=-j,J.w=1;var X=l.Z.multiplyByVector(Q,J,L),$=N.Z.clipToGLWindowCoordinates(t.viewport,X,R);J.x=c.Z.SOLAR_RADIUS;var ee=l.Z.multiplyByVector(Q,J,L),te=N.Z.clipToGLWindowCoordinates(t.viewport,ee,C);return this._size=o.Z.magnitude(o.Z.subtract(te,$,L)),this._size=2*this._size*(1+2*this._glowLengthTS),this._size=Math.ceil(this._size),this._commands}}},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){var e=this._drawCommand;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._texture=this._texture&&this._texture.destroy(),(0,u.Z)(this)},t["Z"]=O},44747:function(e,t,r){var i=r(59947),o=r(62200);function n(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this.color=i.Z.clone((0,o.Z)(e.color,i.Z.WHITE)),this.intensity=(0,o.Z)(e.intensity,2)}t["Z"]=n},80480:function(e,t,r){var i=r(88108),o=r(60838),n=r(63367),a=r(82982),s=r(86511),h=r(99417),u=r(72248),d=r(95555),c=r(40995),l=r(87641),Z=r(23077),f=r(7571),g=r(11184),m=r(53798),T=r(26615),w=r(87878),x=r(65448);function v(){this._sceneFramebuffer=new x.Z;var e=.125,t=new Array(6);t[0]=new g.Z({fragmentShader:f.Z,textureScale:e,forcePowerOfTwo:!0,sampleMode:T.Z.LINEAR});var r=t[1]=new g.Z({fragmentShader:l.Z,uniforms:{avgLuminance:.5,threshold:.25,offset:.1},textureScale:e,forcePowerOfTwo:!0}),i=this;this._delta=1,this._sigma=2,this._blurStep=new o.Z,t[2]=new g.Z({fragmentShader:Z.Z,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/r.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:0},textureScale:e,forcePowerOfTwo:!0}),t[3]=new g.Z({fragmentShader:Z.Z,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/r.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:1},textureScale:e,forcePowerOfTwo:!0}),t[4]=new g.Z({fragmentShader:f.Z,sampleMode:T.Z.LINEAR}),this._uCenter=new o.Z,this._uRadius=void 0,t[5]=new g.Z({fragmentShader:c.Z,uniforms:{center:function(){return i._uCenter},radius:function(){return i._uRadius},colorTexture2:function(){return i._sceneFramebuffer.getFramebuffer().getColorTexture(0)}}}),this._stages=new m.Z({stages:t});for(var n=new w.Z(this),a=t.length,s=0;s<a;++s)t[s]._textureCache=n;this._textureCache=n,this.length=t.length}v.prototype.get=function(e){return this._stages.get(e)},v.prototype.getStageByName=function(e){for(var t=this._stages.length,r=0;r<t;++r){var i=this._stages.get(r);if(i.name===e)return i}};var _=new n.Z,p=new o.Z,S=new o.Z,E=new u.Z;function y(e,t,r){var n=t.uniformState,a=n.sunPositionWC,s=n.view,c=n.viewProjection,l=n.projection,Z=u.Z.computeViewportTransformation(r,0,1,E),f=u.Z.multiplyByPoint(s,a,_),g=d.Z.pointToGLWindowCoordinates(c,Z,a,p);f.x+=h.Z.SOLAR_RADIUS;var m=d.Z.pointToGLWindowCoordinates(l,Z,f,f),T=30*o.Z.magnitude(o.Z.subtract(m,g,m))*2,w=S;w.x=T,w.y=T,e._uCenter=o.Z.clone(g,e._uCenter),e._uRadius=.15*Math.max(w.x,w.y);var x=t.drawingBufferWidth,v=t.drawingBufferHeight,y=e._stages,b=y.get(0),M=b.outputTexture.width,A=b.outputTexture.height,N=new i.Z;N.width=M,N.height=A,Z=u.Z.computeViewportTransformation(N,0,1,E),g=d.Z.pointToGLWindowCoordinates(c,Z,a,p),w.x*=M/x,w.y*=A/v;var O=b.scissorRectangle;O.x=Math.max(g.x-.5*w.x,0),O.y=Math.max(g.y-.5*w.y,0),O.width=Math.min(w.x,x),O.height=Math.min(w.y,v);for(var R=1;R<4;++R)i.Z.clone(O,y.get(R).scissorRectangle)}v.prototype.clear=function(e,t,r){this._sceneFramebuffer.clear(e,t,r),this._textureCache.clear(e)},v.prototype.update=function(e){var t=e.context,r=e.viewport,i=this._sceneFramebuffer;i.update(t,r);var o=i.getFramebuffer();return this._textureCache.update(t),this._stages.update(t,!1),y(this,t,r),o},v.prototype.execute=function(e){var t=this._sceneFramebuffer.getFramebuffer().getColorTexture(0),r=this._stages,i=r.length;r.get(0).execute(e,t);for(var o=1;o<i;++o)r.get(o).execute(e,r.get(o-1).outputTexture)},v.prototype.copy=function(e,t){if(!(0,a.Z)(this._copyColorCommand)){var r=this;this._copyColorCommand=e.createViewportQuadCommand(f.Z,{uniformMap:{colorTexture:function(){return r._stages.get(r._stages.length-1).outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._textureCache.destroy(),this._stages.destroy(),(0,s.Z)(this)},t["Z"]=v},70922:function(e,t,r){r.d(t,{Z:function(){return o}});var i=r(62200);function o(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),this.webp=(0,i.Z)(e.webp,!1),this.basis=(0,i.Z)(e.basis,!1)}},11590:function(e,t,r){var i=r(52323),o=r(377),n=r(48243),a=r(60838),s=r(60216),h=r(63367),u=r(51688),d=r(82982),c=r(12572),l=r(57134),Z=r(99417),f=r(25405),g=r(79120),m=r(96190),T=r(41782),w=r(13758),x=r(41534),v=r(79962),_=r(14648),p=r(37728);function S(e){this.tile=e,this.frameLastUpdated=void 0,this.westMeshes=[],this.westTiles=[],this.southMeshes=[],this.southTiles=[],this.eastMeshes=[],this.eastTiles=[],this.northMeshes=[],this.northTiles=[],this.southwestMesh=void 0,this.southwestTile=void 0,this.southeastMesh=void 0,this.southeastTile=void 0,this.northwestMesh=void 0,this.northwestTile=void 0,this.northeastMesh=void 0,this.northeastTile=void 0,this.changedThisFrame=!0,this.visitedFrame=void 0,this.enqueuedFrame=void 0,this.mesh=void 0,this.vertexArray=void 0,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new h.Z}S.prototype.update=function(e,t,r){this.changedThisFrame&&(G(e,t,this.tile,r),this.changedThisFrame=!1)},S.prototype.destroy=function(e){this._destroyVertexArray(e),(0,d.Z)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0)},S.prototype._destroyVertexArray=function(e){(0,d.Z)(this.vertexArray)&&((0,d.Z)(e)?e.push(this.vertexArray):_.Z._freeVertexArray(this.vertexArray),this.vertexArray=void 0)};var E=new g.Z;function y(e,t,r,i,o,n,a,s,h){if(void 0!==i){var u=i;while(u&&(u._lastSelectionResultFrame!==o||p.Z.wasKicked(u._lastSelectionResult)||p.Z.originalResult(u._lastSelectionResult)===p.Z.CULLED)){if(a)return;var l=u.parent;if(n>=x.Z.NORTHWEST&&void 0!==l)switch(n){case x.Z.NORTHWEST:u=u===l.northwestChild?l:void 0;break;case x.Z.NORTHEAST:u=u===l.northeastChild?l:void 0;break;case x.Z.SOUTHWEST:u=u===l.southwestChild?l:void 0;break;case x.Z.SOUTHEAST:u=u===l.southeastChild?l:void 0;break}else u=l}if(void 0!==u)if(u._lastSelectionResult!==p.Z.RENDERED){if(p.Z.originalResult(i._lastSelectionResult)!==p.Z.CULLED)switch(n){case x.Z.WEST:y(e,t,r,i.northwestChild,o,n,!0,s,h),y(e,t,r,i.southwestChild,o,n,!0,s,h);break;case x.Z.EAST:y(e,t,r,i.southeastChild,o,n,!0,s,h),y(e,t,r,i.northeastChild,o,n,!0,s,h);break;case x.Z.SOUTH:y(e,t,r,i.southwestChild,o,n,!0,s,h),y(e,t,r,i.southeastChild,o,n,!0,s,h);break;case x.Z.NORTH:y(e,t,r,i.northeastChild,o,n,!0,s,h),y(e,t,r,i.northwestChild,o,n,!0,s,h);break;case x.Z.NORTHWEST:y(e,t,r,i.northwestChild,o,n,!0,s,h);break;case x.Z.NORTHEAST:y(e,t,r,i.northeastChild,o,n,!0,s,h);break;case x.Z.SOUTHWEST:y(e,t,r,i.southwestChild,o,n,!0,s,h);break;case x.Z.SOUTHEAST:y(e,t,r,i.southeastChild,o,n,!0,s,h);break;default:throw new c.Z("Invalid edge")}}else{if((0,d.Z)(u.data.vertexArray))return;b(e,t,r,u,n,o,s,h)}}}function b(e,t,r,i,o,n,a,s){var h=i.data;if(void 0===h.fill)h.fill=new S(i);else if(h.fill.visitedFrame===n)return;h.fill.enqueuedFrame!==n&&(h.fill.enqueuedFrame=n,h.fill.changedThisFrame=!1,a.enqueue(i)),M(e,t,r,i,o,s)}function M(e,t,r,i,o,n){var a,s,h,u,c,l,f,g=i.data.fill,m=r.data.fill;switch((0,d.Z)(m)?(m.visitedFrame=t.frameNumber,m.changedThisFrame&&(G(e,t,r,n),m.changedThisFrame=!1),a=r.data.fill.mesh):a=r.data.mesh,o){case x.Z.WEST:s=g.westMeshes,h=g.westTiles;break;case x.Z.SOUTH:s=g.southMeshes,h=g.southTiles;break;case x.Z.EAST:s=g.eastMeshes,h=g.eastTiles;break;case x.Z.NORTH:s=g.northMeshes,h=g.northTiles;break;case x.Z.NORTHWEST:return g.changedThisFrame=g.changedThisFrame||g.northwestMesh!==a,g.northwestMesh=a,void(g.northwestTile=r);case x.Z.NORTHEAST:return g.changedThisFrame=g.changedThisFrame||g.northeastMesh!==a,g.northeastMesh=a,void(g.northeastTile=r);case x.Z.SOUTHWEST:return g.changedThisFrame=g.changedThisFrame||g.southwestMesh!==a,g.southwestMesh=a,void(g.southwestTile=r);case x.Z.SOUTHEAST:return g.changedThisFrame=g.changedThisFrame||g.southeastMesh!==a,g.southeastMesh=a,void(g.southeastTile=r)}if(r.level<=i.level)return g.changedThisFrame=g.changedThisFrame||s[0]!==a||1!==s.length,s[0]=a,h[0]=r,s.length=1,void(h.length=1);var T,w=r.rectangle,v=i.rectangle;switch(o){case x.Z.WEST:for(T=(v.north-v.south)*Z.Z.EPSILON5,u=0;u<h.length;++u)if(l=h[u],f=l.rectangle,Z.Z.greaterThan(w.north,f.south,T))break;for(c=u;c<h.length;++c)if(l=h[c],f=l.rectangle,Z.Z.greaterThanOrEquals(w.south,f.north,T))break;break;case x.Z.SOUTH:for(T=(v.east-v.west)*Z.Z.EPSILON5,u=0;u<h.length;++u)if(l=h[u],f=l.rectangle,Z.Z.lessThan(w.west,f.east,T))break;for(c=u;c<h.length;++c)if(l=h[c],f=l.rectangle,Z.Z.lessThanOrEquals(w.east,f.west,T))break;break;case x.Z.EAST:for(T=(v.north-v.south)*Z.Z.EPSILON5,u=0;u<h.length;++u)if(l=h[u],f=l.rectangle,Z.Z.lessThan(w.south,f.north,T))break;for(c=u;c<h.length;++c)if(l=h[c],f=l.rectangle,Z.Z.lessThanOrEquals(w.north,f.south,T))break;break;case x.Z.NORTH:for(T=(v.east-v.west)*Z.Z.EPSILON5,u=0;u<h.length;++u)if(l=h[u],f=l.rectangle,Z.Z.greaterThan(w.east,f.west,T))break;for(c=u;c<h.length;++c)if(l=h[c],f=l.rectangle,Z.Z.greaterThanOrEquals(w.west,f.east,T))break;break}c-u===1?(g.changedThisFrame=g.changedThisFrame||s[u]!==a,s[u]=a,h[u]=r):(g.changedThisFrame=!0,s.splice(u,c-u,a),h.splice(u,c-u,r))}S.updateFillTiles=function(e,t,r,i){var o=e._quadtree,n=o._levelZeroTiles,a=o._lastSelectionFrameNumber,s=E;s.clear();for(var h=0;h<t.length;++h){var u=t[h];(0,d.Z)(u.data.vertexArray)&&s.enqueue(t[h])}var c=s.dequeue();while(void 0!==c){var l=c.findTileToWest(n),Z=c.findTileToSouth(n),f=c.findTileToEast(n),g=c.findTileToNorth(n);y(e,r,c,l,a,x.Z.EAST,!1,s,i),y(e,r,c,Z,a,x.Z.NORTH,!1,s,i),y(e,r,c,f,a,x.Z.WEST,!1,s,i),y(e,r,c,g,a,x.Z.SOUTH,!1,s,i);var m=l.findTileToNorth(n),T=l.findTileToSouth(n),w=f.findTileToNorth(n),v=f.findTileToSouth(n);y(e,r,c,m,a,x.Z.SOUTHEAST,!1,s,i),y(e,r,c,w,a,x.Z.SOUTHWEST,!1,s,i),y(e,r,c,T,a,x.Z.NORTHEAST,!1,s,i),y(e,r,c,v,a,x.Z.NORTHWEST,!1,s,i),c=s.dequeue()}};var A=new u.Z,N=new u.Z,O=new s.Z,R=new s.Z,C=new a.Z,I=new a.Z,L=new a.Z;function P(){this.height=0,this.encodedNormal=new a.Z}function W(e,t,r,i,o,n,a,s,h){if((0,d.Z)(o))return o;var u;if((0,d.Z)(n)&&(0,d.Z)(a))u=.5*(n.height+a.height);else if((0,d.Z)(n))u=n.height;else if((0,d.Z)(a))u=a.height;else if((0,d.Z)(s))u=s.height;else{var c=e.tile.data,l=c.tileBoundingRegion,Z=0,f=0;(0,d.Z)(l)&&(Z=l.minimumHeight,f=l.maximumHeight),u=.5*(Z+f)}return ee(e,t,r,i,u,h),h}var F={minimumHeight:0,maximumHeight:0},H=new s.Z,k=new P,U=new P,D=new P,B=new P,z="undefined"!==typeof Uint8Array?new Uint8Array(81):void 0,V={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0};function G(e,t,r,o){_.Z.initialize(r,e.terrainProvider,e._imageryLayers);var s=r.data,h=s.fill,u=r.rectangle,c=t.terrainExaggeration,Z=t.terrainExaggerationRelativeHeight,g=1!==c,p=r.tilingScheme.ellipsoid,S=te(h,p,0,1,h.northwestTile,h.northwestMesh,h.northTiles,h.northMeshes,h.westTiles,h.westMeshes,D),E=te(h,p,0,0,h.southwestTile,h.southwestMesh,h.westTiles,h.westMeshes,h.southTiles,h.southMeshes,k),y=te(h,p,1,0,h.southeastTile,h.southeastMesh,h.southTiles,h.southMeshes,h.eastTiles,h.eastMeshes,U),b=te(h,p,1,1,h.northeastTile,h.northeastMesh,h.eastTiles,h.eastMeshes,h.northTiles,h.northMeshes,B);S=W(h,p,0,1,S,E,b,y,D),E=W(h,p,0,0,E,S,y,b,k),y=W(h,p,1,1,y,E,b,S,U),b=W(h,p,1,1,b,y,S,E,B);var M,O,I=E.height,P=y.height,G=S.height,K=b.height,Y=Math.min(I,P,G,K),j=Math.max(I,P,G,K),Q=.5*(Y+j),J=e.getLevelMaximumGeometricError(r.level),X=p.maximumRadius-J,$=4*Math.acos(X/p.maximumRadius);if($*=1.5,u.width>$&&j-Y<=J){var ee=new l.Z({width:9,height:9,buffer:z,structure:{heightOffset:j}}),re=V;re.tilingScheme=r.tilingScheme,re.x=r.x,re.y=r.y,re.level=r.level,re.exaggeration=c,re.exaggerationRelativeHeight=Z,h.mesh=ee._createMeshSync(re)}else{var oe=g,ne=m.Z.center(u,N);ne.height=Q;var ae,se=p.cartographicToCartesian(ne,H),he=new T.Z(se,void 0,void 0,void 0,void 0,!0,!0,oe,c,Z),de=5;for(ae=h.westMeshes,M=0,O=ae.length;M<O;++M)de+=ae[M].eastIndicesNorthToSouth.length;for(ae=h.southMeshes,M=0,O=ae.length;M<O;++M)de+=ae[M].northIndicesWestToEast.length;for(ae=h.eastMeshes,M=0,O=ae.length;M<O;++M)de+=ae[M].westIndicesSouthToNorth.length;for(ae=h.northMeshes,M=0,O=ae.length;M<O;++M)de+=ae[M].southIndicesEastToWest.length;var ce=F;ce.minimumHeight=Y,ce.maximumHeight=j;var le=he.stride,Ze=new Float32Array(de*le),fe=0,ge=fe;fe=q(p,u,he,Ze,fe,0,1,S.height,S.encodedNormal,1,ce),fe=ie(h,p,he,Ze,fe,h.westTiles,h.westMeshes,x.Z.EAST,ce);var me=fe;fe=q(p,u,he,Ze,fe,0,0,E.height,E.encodedNormal,0,ce),fe=ie(h,p,he,Ze,fe,h.southTiles,h.southMeshes,x.Z.NORTH,ce);var Te=fe;fe=q(p,u,he,Ze,fe,1,0,y.height,y.encodedNormal,0,ce),fe=ie(h,p,he,Ze,fe,h.eastTiles,h.eastMeshes,x.Z.WEST,ce);var we=fe;fe=q(p,u,he,Ze,fe,1,1,b.height,b.encodedNormal,1,ce),fe=ie(h,p,he,Ze,fe,h.northTiles,h.northMeshes,x.Z.SOUTH,ce),Y=ce.minimumHeight,j=ce.maximumHeight;var xe=f.Z.fromRectangle(u,Y,j,r.tilingScheme.ellipsoid),ve=v.Z.geodeticLatitudeToMercatorAngle(u.south),_e=1/(v.Z.geodeticLatitudeToMercatorAngle(u.north)-ve),pe=(v.Z.geodeticLatitudeToMercatorAngle(ne.latitude)-ve)*_e,Se=p.geodeticSurfaceNormalCartographic(A,R),Ee=i.Z.octEncode(Se,C),ye=fe;he.encode(Ze,fe*le,xe.center,a.Z.fromElements(.5,.5,L),Q,Ee,pe,Se),++fe;var be,Me=fe,Ae=Me<256?1:2,Ne=3*(Me-1),Oe=Ne*Ae,Re=(Ze.length-Me*le)*Float32Array.BYTES_PER_ELEMENT;if(Re>=Oe){var Ce=Me*le*Float32Array.BYTES_PER_ELEMENT;be=Me<256?new Uint8Array(Ze.buffer,Ce,Ne):new Uint16Array(Ze.buffer,Ce,Ne)}else be=Me<256?new Uint8Array(Ne):new Uint16Array(Ne);Ze=new Float32Array(Ze.buffer,0,Me*le);var Ie=0;for(M=0;M<Me-2;++M)be[Ie++]=ye,be[Ie++]=M,be[Ie++]=M+1;be[Ie++]=ye,be[Ie++]=M,be[Ie++]=0;var Le=[];for(M=me;M>=ge;--M)Le.push(M);var Pe=[];for(M=Te;M>=me;--M)Pe.push(M);var We=[];for(M=we;M>=Te;--M)We.push(M);var Fe=[];for(Fe.push(0),M=ye-1;M>=we;--M)Fe.push(M);h.mesh=new w.Z(he.center,Ze,be,Ne,Me,Y,j,n.Z.fromOrientedBoundingBox(xe),ue(e,xe.center,u,Y,j),he.stride,xe,he,Le,Pe,We,Fe)}var He=t.context;h._destroyVertexArray(o),h.vertexArray=_.Z._createVertexArrayForMesh(He,h.mesh),s.processImagery(r,e.terrainProvider,t,!0);var ke=h.waterMaskTexture;if(h.waterMaskTexture=void 0,e.terrainProvider.hasWaterMask){var Ue=s._findAncestorTileWithTerrainData(r);(0,d.Z)(Ue)&&(0,d.Z)(Ue.data.waterMaskTexture)&&(h.waterMaskTexture=Ue.data.waterMaskTexture,++h.waterMaskTexture.referenceCount,s._computeWaterMaskTranslationAndScale(r,Ue,h.waterMaskTranslationAndScale))}(0,d.Z)(ke)&&(--ke.referenceCount,0===ke.referenceCount&&ke.destroy())}function q(e,t,r,i,o,n,a,s,h,u,d){var c=A;c.longitude=Z.Z.lerp(t.west,t.east,n),c.latitude=Z.Z.lerp(t.south,t.north,a),c.height=s;var l,f=e.cartographicToCartesian(c,O);r.hasGeodeticSurfaceNormals&&(l=e.geodeticSurfaceNormal(f,R));var g=I;return g.x=n,g.y=a,r.encode(i,o*r.stride,f,g,s,h,u,l),d.minimumHeight=Math.min(d.minimumHeight,s),d.maximumHeight=Math.max(d.maximumHeight,s),o+1}var K=new m.Z;function Y(e,t,r,i){var o=e.rectangle,n=t.rectangle;0===t.x&&1===r.x&&e.x===e.tilingScheme.getNumberOfXTilesAtLevel(e.level)-1?(o=m.Z.clone(e.rectangle,K),o.west-=Z.Z.TWO_PI,o.east-=Z.Z.TWO_PI):0===e.x&&0===r.x&&t.x===t.tilingScheme.getNumberOfXTilesAtLevel(t.level)-1&&(o=m.Z.clone(e.rectangle,K),o.west+=Z.Z.TWO_PI,o.east+=Z.Z.TWO_PI);var a=o.east-o.west,s=(n.west-o.west)/a,h=(n.east-o.west)/a,u=o.north-o.south,d=(n.south-o.south)/u,c=(n.north-o.south)/u,l=(r.x-s)/(h-s),f=(r.y-d)/(c-d);return Math.abs(l)<Math.EPSILON5?l=0:Math.abs(l-1)<Math.EPSILON5&&(l=1),Math.abs(f)<Math.EPSILON5?f=0:Math.abs(f-1)<Math.EPSILON5&&(f=1),i.x=l,i.y=f,i}var j=new a.Z;function Q(e,t,r,i,o){var n=e.encoding,a=e.vertices;if(o.height=n.decodeHeight(a,t),n.hasVertexNormals)n.getOctEncodedNormal(a,t,o.encodedNormal);else{var s=o.encodedNormal;s.x=0,s.y=0}}var J=new a.Z,X=new s.Z;function $(e,t,r,o,n,a,h,u,d,c){var l,f=o.encoding,g=o.vertices,m=Y(t,r,f.decodeTextureCoordinates(g,n,L),L),T=Y(t,r,f.decodeTextureCoordinates(g,a,I),I);l=d?(h-m.x)/(T.x-m.x):(u-m.y)/(T.y-m.y);var w,x=f.decodeHeight(g,n),v=f.decodeHeight(g,a),_=r.rectangle;if(A.longitude=Z.Z.lerp(_.west,_.east,h),A.latitude=Z.Z.lerp(_.south,_.north,u),c.height=A.height=Z.Z.lerp(x,v,l),f.hasVertexNormals){var p=f.getOctEncodedNormal(g,n,j),S=f.getOctEncodedNormal(g,a,J),E=i.Z.octDecode(p.x,p.y,O),y=i.Z.octDecode(S.x,S.y,X);w=s.Z.lerp(E,y,l,O),s.Z.normalize(w,w),i.Z.octEncode(w,c.encodedNormal)}else w=e.geodeticSurfaceNormalCartographic(A,O),i.Z.octEncode(w,c.encodedNormal)}function ee(e,t,r,o,n,a){a.height=n;var s=t.geodeticSurfaceNormalCartographic(A,O);i.Z.octEncode(s,a.encodedNormal)}function te(e,t,r,i,o,n,a,s,h,u,c){var l,Z,f=se(e,t,s,a,!1,r,i,c)||se(e,t,u,h,!0,r,i,c);return f?c:ae(o,n)?(l=0===r?0===i?n.eastIndicesNorthToSouth[0]:n.southIndicesEastToWest[0]:0===i?n.northIndicesWestToEast[0]:n.westIndicesSouthToNorth[0],Q(n,l,r,i,c),c):(Z=0===r?0===i?re(e.westMeshes,e.westTiles,x.Z.EAST,e.southMeshes,e.southTiles,x.Z.NORTH,r,i):re(e.northMeshes,e.northTiles,x.Z.SOUTH,e.westMeshes,e.westTiles,x.Z.EAST,r,i):0===i?re(e.southMeshes,e.southTiles,x.Z.NORTH,e.eastMeshes,e.eastTiles,x.Z.WEST,r,i):re(e.eastMeshes,e.eastTiles,x.Z.WEST,e.northMeshes,e.northTiles,x.Z.SOUTH,r,i),(0,d.Z)(Z)?(ee(e,t,r,i,Z,c),c):void 0)}function re(e,t,r,i,o,n,a,s){var h=ne(e,t,!1,r,a,s),u=ne(i,o,!0,n,a,s);return(0,d.Z)(h)&&(0,d.Z)(u)?.5*(h+u):(0,d.Z)(h)?h:u}function ie(e,t,r,i,o,n,a,s,h){for(var u=0;u<n.length;++u)o=oe(e,t,r,i,o,n[u],a[u],s,h);return o}function oe(e,t,r,i,o,n,a,s,h){var u=n.rectangle;s===x.Z.EAST&&0===e.tile.x?(u=m.Z.clone(n.rectangle,K),u.west-=Z.Z.TWO_PI,u.east-=Z.Z.TWO_PI):s===x.Z.WEST&&0===n.x&&(u=m.Z.clone(n.rectangle,K),u.west+=Z.Z.TWO_PI,u.east+=Z.Z.TWO_PI);var d,c,l,f,g=e.tile.rectangle;switch(o>0&&(r.decodeTextureCoordinates(i,o-1,L),d=L.x,c=L.y),s){case x.Z.WEST:l=a.westIndicesSouthToNorth,f=!1;break;case x.Z.NORTH:l=a.northIndicesWestToEast,f=!0;break;case x.Z.EAST:l=a.eastIndicesNorthToSouth,f=!1;break;case x.Z.SOUTH:l=a.southIndicesEastToWest,f=!0;break}var T,w,_=n,p=e.tile,S=a.encoding,E=a.vertices,y=r.stride;S.hasWebMercatorT&&(T=v.Z.geodeticLatitudeToMercatorAngle(g.south),w=1/(v.Z.geodeticLatitudeToMercatorAngle(g.north)-T));for(var b=0;b<l.length;++b){var M=l[b],A=S.decodeTextureCoordinates(E,M,L);Y(_,p,A,A);var N=A.x,I=A.y,P=f?N:I;if(!(P<0||P>1)&&!(Math.abs(N-d)<Z.Z.EPSILON5&&Math.abs(I-c)<Z.Z.EPSILON5)){var W=Math.abs(N)<Z.Z.EPSILON5||Math.abs(N-1)<Z.Z.EPSILON5,F=Math.abs(I)<Z.Z.EPSILON5||Math.abs(I-1)<Z.Z.EPSILON5;if(!W||!F){var H,k=S.decodePosition(E,M,O),U=S.decodeHeight(E,M);S.hasVertexNormals?H=S.getOctEncodedNormal(E,M,C):(H=C,H.x=0,H.y=0);var D,B=I;if(S.hasWebMercatorT){var z=Z.Z.lerp(g.south,g.north,I);B=(v.Z.geodeticLatitudeToMercatorAngle(z)-T)*w}r.hasGeodeticSurfaceNormals&&(D=t.geodeticSurfaceNormal(k,R)),r.encode(i,o*y,k,A,U,H,B,D),h.minimumHeight=Math.min(h.minimumHeight,U),h.maximumHeight=Math.max(h.maximumHeight,U),++o}}}return o}function ne(e,t,r,i,o,n){var a,s,h;r?(a=0,s=e.length,h=1):(a=e.length-1,s=-1,h=-1);for(var u=a;u!==s;u+=h){var c=e[u],l=t[u];if(ae(l,c)){var Z;switch(i){case x.Z.WEST:Z=c.westIndicesSouthToNorth;break;case x.Z.SOUTH:Z=c.southIndicesEastToWest;break;case x.Z.EAST:Z=c.eastIndicesNorthToSouth;break;case x.Z.NORTH:Z=c.northIndicesWestToEast;break}var f=Z[r?0:Z.length-1];if((0,d.Z)(f))return c.encoding.decodeHeight(c.vertices,f)}}}function ae(e,t){return(0,d.Z)(t)&&(!(0,d.Z)(e.data.fill)||!e.data.fill.changedThisFrame)}function se(e,t,r,i,n,a,s,h){var u,d,c,l,Z,f=i[n?0:r.length-1],g=r[n?0:r.length-1];if(ae(f,g)&&(0===a?0===s?(u=n?g.northIndicesWestToEast:g.eastIndicesNorthToSouth,d=n,c=n):(u=n?g.eastIndicesNorthToSouth:g.southIndicesEastToWest,d=!n,c=!1):0===s?(u=n?g.westIndicesSouthToNorth:g.northIndicesWestToEast,d=!n,c=!0):(u=n?g.southIndicesEastToWest:g.westIndicesSouthToNorth,d=n,c=!n),u.length>0)){l=n?0:u.length-1,Z=u[l],g.encoding.decodeTextureCoordinates(g.vertices,Z,L);var m=Y(f,e.tile,L,L);if(m.x===a&&m.y===s)return Q(g,Z,a,s,h),!0;if(l=(0,o.Z)(u,d?a:s,(function(t,r){g.encoding.decodeTextureCoordinates(g.vertices,t,L);var i=Y(f,e.tile,L,L);return c?d?i.x-a:i.y-s:d?a-i.x:s-i.y})),!(l<0))return Q(g,u[l],a,s,h),!0;if(l=~l,l>0&&l<u.length)return $(t,f,e.tile,g,u[l-1],u[l],a,s,d,h),!0}return!1}var he=[new s.Z,new s.Z,new s.Z,new s.Z];function ue(e,t,r,i,o,n){var a=e.quadtree._occluders.ellipsoid,h=a.ellipsoid,u=he;return s.Z.fromRadians(r.west,r.south,o,h,u[0]),s.Z.fromRadians(r.east,r.south,o,h,u[1]),s.Z.fromRadians(r.west,r.north,o,h,u[2]),s.Z.fromRadians(r.east,r.north,o,h,u[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,u,i,n)}t["Z"]=S},46547:function(e,t){var r={FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6};t["Z"]=Object.freeze(r)},54230:function(e,t,r){var i=r(88108),o=r(60838),n=r(39960),a=r(62200),s=r(82982),h=r(86511),u=r(12572),d=r(38443),c=r(68985),l=r(9407),Z=r(2932),f=r(8743),g=r(13222);function m(e,t,r,i,n){this.bottomLeft=(0,a.Z)(e,o.Z.ZERO),this.topRight=(0,a.Z)(t,o.Z.ZERO),this.childNode1=r,this.childNode2=i,this.imageIndex=n}var T=new o.Z(16,16);function w(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT);var t=(0,a.Z)(e.borderWidthInPixels,1),r=(0,a.Z)(e.initialSize,T);if(!(0,s.Z)(e.context))throw new u.Z("context is required.");if(t<0)throw new u.Z("borderWidthInPixels must be greater than or equal to zero.");if(r.x<1||r.y<1)throw new u.Z("initialSize must be greater than zero.");this._context=e.context,this._pixelFormat=(0,a.Z)(e.pixelFormat,d.Z.RGBA),this._borderWidthInPixels=t,this._textureCoordinates=[],this._guid=(0,n.Z)(),this._idHash={},this._initialSize=r,this._root=void 0}function x(e,t){var r=e._context,i=e.numberOfImages,n=2,a=e._borderWidthInPixels;if(i>0){for(var h=e._texture.width,u=e._texture.height,d=n*(h+t.width+a),c=n*(u+t.height+a),l=h/d,g=u/c,T=new m(new o.Z(h+a,a),new o.Z(d,u)),w=new m(new o.Z,new o.Z(d,u),e._root,T),x=new m(new o.Z(a,u+a),new o.Z(d,c)),v=new m(new o.Z,new o.Z(d,c),w,x),_=0;_<e._textureCoordinates.length;_++){var p=e._textureCoordinates[_];(0,s.Z)(p)&&(p.x*=l,p.y*=g,p.width*=l,p.height*=g)}var S=new f.Z({context:e._context,width:d,height:c,pixelFormat:e._pixelFormat}),E=new Z.Z({context:r,colorTextures:[e._texture],destroyAttachments:!1});E._bind(),S.copyFromFramebuffer(0,0,0,0,d,c),E._unBind(),E.destroy(),e._texture=e._texture&&e._texture.destroy(),e._texture=S,e._root=v}else{var y=n*(t.width+2*a),b=n*(t.height+2*a);y<e._initialSize.x&&(y=e._initialSize.x),b<e._initialSize.y&&(b=e._initialSize.y),e._texture=e._texture&&e._texture.destroy(),e._texture=new f.Z({context:e._context,width:y,height:b,pixelFormat:e._pixelFormat}),e._root=new m(new o.Z(a,a),new o.Z(y,b))}}function v(e,t,r){if((0,s.Z)(t)){if(!(0,s.Z)(t.childNode1)&&!(0,s.Z)(t.childNode2)){if((0,s.Z)(t.imageIndex))return;var i=t.topRight.x-t.bottomLeft.x,n=t.topRight.y-t.bottomLeft.y,a=i-r.width,h=n-r.height;if(a<0||h<0)return;if(0===a&&0===h)return t;if(a>h){t.childNode1=new m(new o.Z(t.bottomLeft.x,t.bottomLeft.y),new o.Z(t.bottomLeft.x+r.width,t.topRight.y));var u=t.bottomLeft.x+r.width+e._borderWidthInPixels;u<t.topRight.x&&(t.childNode2=new m(new o.Z(u,t.bottomLeft.y),new o.Z(t.topRight.x,t.topRight.y)))}else{t.childNode1=new m(new o.Z(t.bottomLeft.x,t.bottomLeft.y),new o.Z(t.topRight.x,t.bottomLeft.y+r.height));var d=t.bottomLeft.y+r.height+e._borderWidthInPixels;d<t.topRight.y&&(t.childNode2=new m(new o.Z(t.bottomLeft.x,d),new o.Z(t.topRight.x,t.topRight.y)))}return v(e,t.childNode1,r)}return v(e,t.childNode1,r)||v(e,t.childNode2,r)}}function _(e,t,r){var o=v(e,e._root,t);if((0,s.Z)(o)){o.imageIndex=r;var a=e._texture.width,h=e._texture.height,u=o.topRight.x-o.bottomLeft.x,d=o.topRight.y-o.bottomLeft.y,c=o.bottomLeft.x/a,l=o.bottomLeft.y/h,Z=u/a,f=d/h;e._textureCoordinates[r]=new i.Z(c,l,Z,f),e._texture.copyFrom({source:t,xOffset:o.bottomLeft.x,yOffset:o.bottomLeft.y})}else x(e,t),_(e,t,r);e._guid=(0,n.Z)()}Object.defineProperties(w.prototype,{borderWidthInPixels:{get:function(){return this._borderWidthInPixels}},textureCoordinates:{get:function(){return this._textureCoordinates}},texture:{get:function(){return(0,s.Z)(this._texture)||(this._texture=new f.Z({context:this._context,width:this._initialSize.x,height:this._initialSize.y,pixelFormat:this._pixelFormat})),this._texture}},numberOfImages:{get:function(){return this._textureCoordinates.length}},guid:{get:function(){return this._guid}}}),w.prototype.addImage=function(e,t){if(!(0,s.Z)(e))throw new u.Z("id is required.");if(!(0,s.Z)(t))throw new u.Z("image is required.");var r=this._idHash[e];if((0,s.Z)(r))return r;if("function"===typeof t){if(t=t(e),!(0,s.Z)(t))throw new u.Z("image is required.")}else if("string"===typeof t||t instanceof c.Z){var i=c.Z.createIfNeeded(t);t=i.fetchImage()}var o=this;return r=(0,g.Z)(t,(function(e){if(o.isDestroyed())return-1;var t=o.numberOfImages;return _(o,e,t),t})),this._idHash[e]=r,r},w.prototype.addSubRegion=function(e,t){if(!(0,s.Z)(e))throw new u.Z("id is required.");if(!(0,s.Z)(t))throw new u.Z("subRegion is required.");var r=this._idHash[e];if(!(0,s.Z)(r))throw new l.Z('image with id "'+e+'" not found in the atlas.');var o=this;return(0,g.Z)(r,(function(e){if(-1===e)return-1;var r=o._texture.width,a=o._texture.height,s=o.numberOfImages,h=o._textureCoordinates[e],u=h.x+t.x/r,d=h.y+t.y/a,c=t.width/r,l=t.height/a;return o._textureCoordinates.push(new i.Z(u,d,c,l)),o._guid=(0,n.Z)(),s}))},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),(0,h.Z)(this)},t["Z"]=w}}]);
//# sourceMappingURL=chunk-vendors-3aaaed8c.3a50faa5.js.map