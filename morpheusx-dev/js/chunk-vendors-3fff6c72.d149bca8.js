"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[8259],{63640:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_EllipsoidalOccluder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(61252);\n\n\n\n/**\n * A set of occluders that can be used to test quadtree tiles for occlusion.\n *\n * @alias QuadtreeOccluders\n * @constructor\n * @private\n *\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid that potentially occludes tiles.\n */\nfunction QuadtreeOccluders(options) {\n  this._ellipsoid = new _Core_EllipsoidalOccluder_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(options.ellipsoid, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO);\n}\n\nObject.defineProperties(QuadtreeOccluders.prototype, {\n  /**\n   * Gets the {@link EllipsoidalOccluder} that can be used to determine if a point is\n   * occluded by an {@link Ellipsoid}.\n   * @type {EllipsoidalOccluder}\n   * @memberof QuadtreeOccluders.prototype\n   */\n  ellipsoid: {\n    get: function () {\n      return this._ellipsoid;\n    },\n  },\n});\n/* harmony default export */ __webpack_exports__["Z"] = (QuadtreeOccluders);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjM2NDAuanMiLCJtYXBwaW5ncyI6Ijs7QUFBK0M7QUFDa0I7O0FBRWpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxXQUFXO0FBQ3RCO0FBQ0E7QUFDQSx3QkFBd0IsNkVBQW1CLG9CQUFvQiw4RUFBZTtBQUM5RTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUMscUJBQXFCLGdCQUFnQjtBQUNyQyxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNELHlEQUFlLGlCQUFpQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1F1YWR0cmVlT2NjbHVkZXJzLmpzPzFlOTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZGFsT2NjbHVkZXIgZnJvbSBcIi4uL0NvcmUvRWxsaXBzb2lkYWxPY2NsdWRlci5qc1wiO1xuXG4vKipcbiAqIEEgc2V0IG9mIG9jY2x1ZGVycyB0aGF0IGNhbiBiZSB1c2VkIHRvIHRlc3QgcXVhZHRyZWUgdGlsZXMgZm9yIG9jY2x1c2lvbi5cbiAqXG4gKiBAYWxpYXMgUXVhZHRyZWVPY2NsdWRlcnNcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gW29wdGlvbnMuZWxsaXBzb2lkPUVsbGlwc29pZC5XR1M4NF0gVGhlIGVsbGlwc29pZCB0aGF0IHBvdGVudGlhbGx5IG9jY2x1ZGVzIHRpbGVzLlxuICovXG5mdW5jdGlvbiBRdWFkdHJlZU9jY2x1ZGVycyhvcHRpb25zKSB7XG4gIHRoaXMuX2VsbGlwc29pZCA9IG5ldyBFbGxpcHNvaWRhbE9jY2x1ZGVyKG9wdGlvbnMuZWxsaXBzb2lkLCBDYXJ0ZXNpYW4zLlpFUk8pO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhRdWFkdHJlZU9jY2x1ZGVycy5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgdGhlIHtAbGluayBFbGxpcHNvaWRhbE9jY2x1ZGVyfSB0aGF0IGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSBpZiBhIHBvaW50IGlzXG4gICAqIG9jY2x1ZGVkIGJ5IGFuIHtAbGluayBFbGxpcHNvaWR9LlxuICAgKiBAdHlwZSB7RWxsaXBzb2lkYWxPY2NsdWRlcn1cbiAgICogQG1lbWJlcm9mIFF1YWR0cmVlT2NjbHVkZXJzLnByb3RvdHlwZVxuICAgKi9cbiAgZWxsaXBzb2lkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZWxsaXBzb2lkO1xuICAgIH0sXG4gIH0sXG59KTtcbmV4cG9ydCBkZWZhdWx0IFF1YWR0cmVlT2NjbHVkZXJzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///63640\n')},9733:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(51688);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14459);\n/* harmony import */ var _Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(59081);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(72248);\n/* harmony import */ var _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(91473);\n/* harmony import */ var _Core_OrthographicOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(35131);\n/* harmony import */ var _Core_Ray_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(68457);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(96190);\n/* harmony import */ var _Core_Visibility_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(54933);\n/* harmony import */ var _QuadtreeOccluders_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(63640);\n/* harmony import */ var _QuadtreeTile_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(19543);\n/* harmony import */ var _QuadtreeTileLoadState_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(85828);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(89917);\n/* harmony import */ var _TileReplacementQueue_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(26561);\n/* harmony import */ var _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(37728);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Renders massive sets of data by utilizing level-of-detail and culling.  The globe surface is divided into\n * a quadtree of tiles with large, low-detail tiles at the root and small, high-detail tiles at the leaves.\n * The set of tiles to render is selected by projecting an estimate of the geometric error in a tile onto\n * the screen to estimate screen-space error, in pixels, which must be below a user-specified threshold.\n * The actual content of the tiles is arbitrary and is specified using a {@link QuadtreeTileProvider}.\n *\n * @alias QuadtreePrimitive\n * @constructor\n * @private\n *\n * @param {QuadtreeTileProvider} options.tileProvider The tile provider that loads, renders, and estimates\n *        the distance to individual tiles.\n * @param {Number} [options.maximumScreenSpaceError=2] The maximum screen-space error, in pixels, that is allowed.\n *        A higher maximum error will render fewer tiles and improve performance, while a lower\n *        value will improve visual quality.\n * @param {Number} [options.tileCacheSize=100] The maximum number of tiles that will be retained in the tile cache.\n *        Note that tiles will never be unloaded if they were used for rendering the last\n *        frame, so the actual number of resident tiles may be higher.  The value of\n *        this property will not affect visual quality.\n */\nfunction QuadtreePrimitive(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(options) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(options.tileProvider)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z("options.tileProvider is required.");\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(options.tileProvider.quadtree)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "A QuadtreeTileProvider can only be used with a single QuadtreePrimitive"\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  this._tileProvider = options.tileProvider;\n  this._tileProvider.quadtree = this;\n\n  this._debug = {\n    enableDebugOutput: false,\n\n    maxDepth: 0,\n    maxDepthVisited: 0,\n    tilesVisited: 0,\n    tilesCulled: 0,\n    tilesRendered: 0,\n    tilesWaitingForChildren: 0,\n\n    lastMaxDepth: -1,\n    lastMaxDepthVisited: -1,\n    lastTilesVisited: -1,\n    lastTilesCulled: -1,\n    lastTilesRendered: -1,\n    lastTilesWaitingForChildren: -1,\n\n    suspendLodUpdate: false,\n  };\n\n  var tilingScheme = this._tileProvider.tilingScheme;\n  var ellipsoid = tilingScheme.ellipsoid;\n\n  this._tilesToRender = [];\n  this._tileLoadQueueHigh = []; // high priority tiles are preventing refinement\n  this._tileLoadQueueMedium = []; // medium priority tiles are being rendered\n  this._tileLoadQueueLow = []; // low priority tiles were refined past or are non-visible parts of quads.\n  this._tileReplacementQueue = new _TileReplacementQueue_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\n  this._levelZeroTiles = undefined;\n  this._loadQueueTimeSlice = 5.0;\n  this._tilesInvalidated = false;\n\n  this._addHeightCallbacks = [];\n  this._removeHeightCallbacks = [];\n\n  this._tileToUpdateHeights = [];\n  this._lastTileIndex = 0;\n  this._updateHeightsTimeSlice = 2.0;\n\n  // If a culled tile contains _cameraPositionCartographic or _cameraReferenceFrameOriginCartographic, it will be marked\n  // TileSelectionResult.CULLED_BUT_NEEDED and added to the list of tiles to update heights,\n  // even though it is not rendered.\n  // These are updated each frame in `selectTilesForRendering`.\n  this._cameraPositionCartographic = undefined;\n  this._cameraReferenceFrameOriginCartographic = undefined;\n\n  /**\n   * Gets or sets the maximum screen-space error, in pixels, that is allowed.\n   * A higher maximum error will render fewer tiles and improve performance, while a lower\n   * value will improve visual quality.\n   * @type {Number}\n   * @default 2\n   */\n  this.maximumScreenSpaceError = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.maximumScreenSpaceError,\n    2\n  );\n\n  /**\n   * Gets or sets the maximum number of tiles that will be retained in the tile cache.\n   * Note that tiles will never be unloaded if they were used for rendering the last\n   * frame, so the actual number of resident tiles may be higher.  The value of\n   * this property will not affect visual quality.\n   * @type {Number}\n   * @default 100\n   */\n  this.tileCacheSize = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.tileCacheSize, 100);\n\n  /**\n   * Gets or sets the number of loading descendant tiles that is considered "too many".\n   * If a tile has too many loading descendants, that tile will be loaded and rendered before any of\n   * its descendants are loaded and rendered. This means more feedback for the user that something\n   * is happening at the cost of a longer overall load time. Setting this to 0 will cause each\n   * tile level to be loaded successively, significantly increasing load time. Setting it to a large\n   * number (e.g. 1000) will minimize the number of tiles that are loaded but tend to make\n   * detail appear all at once after a long wait.\n   * @type {Number}\n   * @default 20\n   */\n  this.loadingDescendantLimit = 20;\n\n  /**\n   * Gets or sets a value indicating whether the ancestors of rendered tiles should be preloaded.\n   * Setting this to true optimizes the zoom-out experience and provides more detail in\n   * newly-exposed areas when panning. The down side is that it requires loading more tiles.\n   * @type {Boolean}\n   * @default true\n   */\n  this.preloadAncestors = true;\n\n  /**\n   * Gets or sets a value indicating whether the siblings of rendered tiles should be preloaded.\n   * Setting this to true causes tiles with the same parent as a rendered tile to be loaded, even\n   * if they are culled. Setting this to true may provide a better panning experience at the\n   * cost of loading more tiles.\n   * @type {Boolean}\n   * @default false\n   */\n  this.preloadSiblings = false;\n\n  this._occluders = new _QuadtreeOccluders_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z({\n    ellipsoid: ellipsoid,\n  });\n\n  this._tileLoadProgressEvent = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n  this._lastTileLoadQueueLength = 0;\n\n  this._lastSelectionFrameNumber = undefined;\n}\n\nObject.defineProperties(QuadtreePrimitive.prototype, {\n  /**\n   * Gets the provider of {@link QuadtreeTile} instances for this quadtree.\n   * @type {QuadtreeTile}\n   * @memberof QuadtreePrimitive.prototype\n   */\n  tileProvider: {\n    get: function () {\n      return this._tileProvider;\n    },\n  },\n  /**\n   * Gets an event that\'s raised when the length of the tile load queue has changed since the last render frame.  When the load queue is empty,\n   * all terrain and imagery for the current view have been loaded.  The event passes the new length of the tile load queue.\n   *\n   * @memberof QuadtreePrimitive.prototype\n   * @type {Event}\n   */\n  tileLoadProgressEvent: {\n    get: function () {\n      return this._tileLoadProgressEvent;\n    },\n  },\n\n  occluders: {\n    get: function () {\n      return this._occluders;\n    },\n  },\n});\n\n/**\n * Invalidates and frees all the tiles in the quadtree.  The tiles must be reloaded\n * before they can be displayed.\n *\n * @memberof QuadtreePrimitive\n */\nQuadtreePrimitive.prototype.invalidateAllTiles = function () {\n  this._tilesInvalidated = true;\n};\n\nfunction invalidateAllTiles(primitive) {\n  // Clear the replacement queue\n  var replacementQueue = primitive._tileReplacementQueue;\n  replacementQueue.head = undefined;\n  replacementQueue.tail = undefined;\n  replacementQueue.count = 0;\n\n  clearTileLoadQueue(primitive);\n\n  // Free and recreate the level zero tiles.\n  var levelZeroTiles = primitive._levelZeroTiles;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(levelZeroTiles)) {\n    for (var i = 0; i < levelZeroTiles.length; ++i) {\n      var tile = levelZeroTiles[i];\n      var customData = tile.customData;\n      var customDataLength = customData.length;\n\n      for (var j = 0; j < customDataLength; ++j) {\n        var data = customData[j];\n        data.level = 0;\n        primitive._addHeightCallbacks.push(data);\n      }\n\n      levelZeroTiles[i].freeResources();\n    }\n  }\n\n  primitive._levelZeroTiles = undefined;\n\n  primitive._tileProvider.cancelReprojections();\n}\n\n/**\n * Invokes a specified function for each {@link QuadtreeTile} that is partially\n * or completely loaded.\n *\n * @param {Function} tileFunction The function to invoke for each loaded tile.  The\n *        function is passed a reference to the tile as its only parameter.\n */\nQuadtreePrimitive.prototype.forEachLoadedTile = function (tileFunction) {\n  var tile = this._tileReplacementQueue.head;\n  while ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile)) {\n    if (tile.state !== _QuadtreeTileLoadState_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].START */ .Z.START) {\n      tileFunction(tile);\n    }\n    tile = tile.replacementNext;\n  }\n};\n\n/**\n * Invokes a specified function for each {@link QuadtreeTile} that was rendered\n * in the most recent frame.\n *\n * @param {Function} tileFunction The function to invoke for each rendered tile.  The\n *        function is passed a reference to the tile as its only parameter.\n */\nQuadtreePrimitive.prototype.forEachRenderedTile = function (tileFunction) {\n  var tilesRendered = this._tilesToRender;\n  for (var i = 0, len = tilesRendered.length; i < len; ++i) {\n    tileFunction(tilesRendered[i]);\n  }\n};\n\n/**\n * Calls the callback when a new tile is rendered that contains the given cartographic. The only parameter\n * is the cartesian position on the tile.\n *\n * @param {Cartographic} cartographic The cartographic position.\n * @param {Function} callback The function to be called when a new tile is loaded containing cartographic.\n * @returns {Function} The function to remove this callback from the quadtree.\n */\nQuadtreePrimitive.prototype.updateHeight = function (cartographic, callback) {\n  var primitive = this;\n  var object = {\n    positionOnEllipsoidSurface: undefined,\n    positionCartographic: cartographic,\n    level: -1,\n    callback: callback,\n  };\n\n  object.removeFunc = function () {\n    var addedCallbacks = primitive._addHeightCallbacks;\n    var length = addedCallbacks.length;\n    for (var i = 0; i < length; ++i) {\n      if (addedCallbacks[i] === object) {\n        addedCallbacks.splice(i, 1);\n        break;\n      }\n    }\n    primitive._removeHeightCallbacks.push(object);\n  };\n\n  primitive._addHeightCallbacks.push(object);\n  return object.removeFunc;\n};\n\n/**\n * Updates the tile provider imagery and continues to process the tile load queue.\n * @private\n */\nQuadtreePrimitive.prototype.update = function (frameState) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(this._tileProvider.update)) {\n    this._tileProvider.update(frameState);\n  }\n};\n\nfunction clearTileLoadQueue(primitive) {\n  var debug = primitive._debug;\n  debug.maxDepth = 0;\n  debug.maxDepthVisited = 0;\n  debug.tilesVisited = 0;\n  debug.tilesCulled = 0;\n  debug.tilesRendered = 0;\n  debug.tilesWaitingForChildren = 0;\n\n  primitive._tileLoadQueueHigh.length = 0;\n  primitive._tileLoadQueueMedium.length = 0;\n  primitive._tileLoadQueueLow.length = 0;\n}\n\n/**\n * Initializes values for a new render frame and prepare the tile load queue.\n * @private\n */\nQuadtreePrimitive.prototype.beginFrame = function (frameState) {\n  var passes = frameState.passes;\n  if (!passes.render) {\n    return;\n  }\n\n  if (this._tilesInvalidated) {\n    invalidateAllTiles(this);\n    this._tilesInvalidated = false;\n  }\n\n  // Gets commands for any texture re-projections\n  this._tileProvider.initialize(frameState);\n\n  clearTileLoadQueue(this);\n\n  if (this._debug.suspendLodUpdate) {\n    return;\n  }\n\n  this._tileReplacementQueue.markStartOfRenderFrame();\n};\n\n/**\n * Selects new tiles to load based on the frame state and creates render commands.\n * @private\n */\nQuadtreePrimitive.prototype.render = function (frameState) {\n  var passes = frameState.passes;\n  var tileProvider = this._tileProvider;\n\n  if (passes.render) {\n    tileProvider.beginUpdate(frameState);\n\n    selectTilesForRendering(this, frameState);\n    createRenderCommandsForSelectedTiles(this, frameState);\n\n    tileProvider.endUpdate(frameState);\n  }\n\n  if (passes.pick && this._tilesToRender.length > 0) {\n    tileProvider.updateForPick(frameState);\n  }\n};\n\n/**\n * Checks if the load queue length has changed since the last time we raised a queue change event - if so, raises\n * a new change event at the end of the render cycle.\n * @private\n */\nfunction updateTileLoadProgress(primitive, frameState) {\n  var currentLoadQueueLength =\n    primitive._tileLoadQueueHigh.length +\n    primitive._tileLoadQueueMedium.length +\n    primitive._tileLoadQueueLow.length;\n\n  if (\n    currentLoadQueueLength !== primitive._lastTileLoadQueueLength ||\n    primitive._tilesInvalidated\n  ) {\n    frameState.afterRender.push(\n      _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].prototype.raiseEvent.bind */ .Z.prototype.raiseEvent.bind(\n        primitive._tileLoadProgressEvent,\n        currentLoadQueueLength\n      )\n    );\n    primitive._lastTileLoadQueueLength = currentLoadQueueLength;\n  }\n\n  var debug = primitive._debug;\n  if (debug.enableDebugOutput && !debug.suspendLodUpdate) {\n    debug.maxDepth = primitive._tilesToRender.reduce(function (max, tile) {\n      return Math.max(max, tile.level);\n    }, -1);\n    debug.tilesRendered = primitive._tilesToRender.length;\n\n    if (\n      debug.tilesVisited !== debug.lastTilesVisited ||\n      debug.tilesRendered !== debug.lastTilesRendered ||\n      debug.tilesCulled !== debug.lastTilesCulled ||\n      debug.maxDepth !== debug.lastMaxDepth ||\n      debug.tilesWaitingForChildren !== debug.lastTilesWaitingForChildren ||\n      debug.maxDepthVisited !== debug.lastMaxDepthVisited\n    ) {\n      console.log(\n        "Visited " +\n          debug.tilesVisited +\n          ", Rendered: " +\n          debug.tilesRendered +\n          ", Culled: " +\n          debug.tilesCulled +\n          ", Max Depth Rendered: " +\n          debug.maxDepth +\n          ", Max Depth Visited: " +\n          debug.maxDepthVisited +\n          ", Waiting for children: " +\n          debug.tilesWaitingForChildren\n      );\n\n      debug.lastTilesVisited = debug.tilesVisited;\n      debug.lastTilesRendered = debug.tilesRendered;\n      debug.lastTilesCulled = debug.tilesCulled;\n      debug.lastMaxDepth = debug.maxDepth;\n      debug.lastTilesWaitingForChildren = debug.tilesWaitingForChildren;\n      debug.lastMaxDepthVisited = debug.maxDepthVisited;\n    }\n  }\n}\n\n/**\n * Updates terrain heights.\n * @private\n */\nQuadtreePrimitive.prototype.endFrame = function (frameState) {\n  var passes = frameState.passes;\n  if (!passes.render || frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].MORPHING */ .Z.MORPHING) {\n    // Only process the load queue for a single pass.\n    // Don\'t process the load queue or update heights during the morph flights.\n    return;\n  }\n\n  // Load/create resources for terrain and imagery. Prepare texture re-projections for the next frame.\n  processTileLoadQueue(this, frameState);\n  updateHeights(this, frameState);\n  updateTileLoadProgress(this, frameState);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @memberof QuadtreePrimitive\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n *\n * @see QuadtreePrimitive#destroy\n */\nQuadtreePrimitive.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @memberof QuadtreePrimitive\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * primitive = primitive && primitive.destroy();\n *\n * @see QuadtreePrimitive#isDestroyed\n */\nQuadtreePrimitive.prototype.destroy = function () {\n  this._tileProvider = this._tileProvider && this._tileProvider.destroy();\n};\n\nvar comparisonPoint;\nvar centerScratch = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nfunction compareDistanceToPoint(a, b) {\n  var center = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].center */ .Z.center(a.rectangle, centerScratch);\n  var alon = center.longitude - comparisonPoint.longitude;\n  var alat = center.latitude - comparisonPoint.latitude;\n\n  center = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].center */ .Z.center(b.rectangle, centerScratch);\n  var blon = center.longitude - comparisonPoint.longitude;\n  var blat = center.latitude - comparisonPoint.latitude;\n\n  return alon * alon + alat * alat - (blon * blon + blat * blat);\n}\n\nvar cameraOriginScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar rootTraversalDetails = [];\n\nfunction selectTilesForRendering(primitive, frameState) {\n  var debug = primitive._debug;\n  if (debug.suspendLodUpdate) {\n    return;\n  }\n\n  // Clear the render list.\n  var tilesToRender = primitive._tilesToRender;\n  tilesToRender.length = 0;\n\n  // We can\'t render anything before the level zero tiles exist.\n  var i;\n  var tileProvider = primitive._tileProvider;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(primitive._levelZeroTiles)) {\n    if (tileProvider.ready) {\n      var tilingScheme = tileProvider.tilingScheme;\n      primitive._levelZeroTiles = _QuadtreeTile_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].createLevelZeroTiles */ .Z.createLevelZeroTiles(\n        tilingScheme\n      );\n      var numberOfRootTiles = primitive._levelZeroTiles.length;\n      if (rootTraversalDetails.length < numberOfRootTiles) {\n        rootTraversalDetails = new Array(numberOfRootTiles);\n        for (i = 0; i < numberOfRootTiles; ++i) {\n          if (rootTraversalDetails[i] === undefined) {\n            rootTraversalDetails[i] = new TraversalDetails();\n          }\n        }\n      }\n    } else {\n      // Nothing to do until the provider is ready.\n      return;\n    }\n  }\n\n  primitive._occluders.ellipsoid.cameraPosition = frameState.camera.positionWC;\n\n  var tile;\n  var levelZeroTiles = primitive._levelZeroTiles;\n  var occluders = levelZeroTiles.length > 1 ? primitive._occluders : undefined;\n\n  // Sort the level zero tiles by the distance from the center to the camera.\n  // The level zero tiles aren\'t necessarily a nice neat quad, so we can\'t use the\n  // quadtree ordering we use elsewhere in the tree\n  comparisonPoint = frameState.camera.positionCartographic;\n  levelZeroTiles.sort(compareDistanceToPoint);\n\n  var customDataAdded = primitive._addHeightCallbacks;\n  var customDataRemoved = primitive._removeHeightCallbacks;\n  var frameNumber = frameState.frameNumber;\n\n  var len;\n  if (customDataAdded.length > 0 || customDataRemoved.length > 0) {\n    for (i = 0, len = levelZeroTiles.length; i < len; ++i) {\n      tile = levelZeroTiles[i];\n      tile._updateCustomData(frameNumber, customDataAdded, customDataRemoved);\n    }\n\n    customDataAdded.length = 0;\n    customDataRemoved.length = 0;\n  }\n\n  var camera = frameState.camera;\n\n  primitive._cameraPositionCartographic = camera.positionCartographic;\n  var cameraFrameOrigin = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].getTranslation */ .Z.getTranslation(\n    camera.transform,\n    cameraOriginScratch\n  );\n  primitive._cameraReferenceFrameOriginCartographic = primitive.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(\n    cameraFrameOrigin,\n    primitive._cameraReferenceFrameOriginCartographic\n  );\n\n  // Traverse in depth-first, near-to-far order.\n  for (i = 0, len = levelZeroTiles.length; i < len; ++i) {\n    tile = levelZeroTiles[i];\n    primitive._tileReplacementQueue.markTileRendered(tile);\n    if (!tile.renderable) {\n      queueTileLoad(primitive, primitive._tileLoadQueueHigh, tile, frameState);\n      ++debug.tilesWaitingForChildren;\n    } else {\n      visitIfVisible(\n        primitive,\n        tile,\n        tileProvider,\n        frameState,\n        occluders,\n        false,\n        rootTraversalDetails[i]\n      );\n    }\n  }\n\n  primitive._lastSelectionFrameNumber = frameNumber;\n}\n\nfunction queueTileLoad(primitive, queue, tile, frameState) {\n  if (!tile.needsLoading) {\n    return;\n  }\n\n  if (primitive.tileProvider.computeTileLoadPriority !== undefined) {\n    tile._loadPriority = primitive.tileProvider.computeTileLoadPriority(\n      tile,\n      frameState\n    );\n  }\n  queue.push(tile);\n}\n\n/**\n * Tracks details of traversing a tile while selecting tiles for rendering.\n * @alias TraversalDetails\n * @constructor\n * @private\n */\nfunction TraversalDetails() {\n  /**\n   * True if all selected (i.e. not culled or refined) tiles in this tile\'s subtree\n   * are renderable. If the subtree is renderable, we\'ll render it; no drama.\n   */\n  this.allAreRenderable = true;\n\n  /**\n   * True if any tiles in this tile\'s subtree were rendered last frame. If any\n   * were, we must render the subtree rather than this tile, because rendering\n   * this tile would cause detail to vanish that was visible last frame, and\n   * that\'s no good.\n   */\n  this.anyWereRenderedLastFrame = false;\n\n  /**\n   * Counts the number of selected tiles in this tile\'s subtree that are\n   * not yet ready to be rendered because they need more loading. Note that\n   * this value will _not_ necessarily be zero when\n   * {@link TraversalDetails#allAreRenderable} is true, for subtle reasons.\n   * When {@link TraversalDetails#allAreRenderable} and\n   * {@link TraversalDetails#anyWereRenderedLastFrame} are both false, we\n   * will render this tile instead of any tiles in its subtree and\n   * the `allAreRenderable` value for this tile will reflect only whether _this_\n   * tile is renderable. The `notYetRenderableCount` value, however, will still\n   * reflect the total number of tiles that we are waiting on, including the\n   * ones that we\'re not rendering. `notYetRenderableCount` is only reset\n   * when a subtree is removed from the render queue because the\n   * `notYetRenderableCount` exceeds the\n   * {@link QuadtreePrimitive#loadingDescendantLimit}.\n   */\n  this.notYetRenderableCount = 0;\n}\n\nfunction TraversalQuadDetails() {\n  this.southwest = new TraversalDetails();\n  this.southeast = new TraversalDetails();\n  this.northwest = new TraversalDetails();\n  this.northeast = new TraversalDetails();\n}\n\nTraversalQuadDetails.prototype.combine = function (result) {\n  var southwest = this.southwest;\n  var southeast = this.southeast;\n  var northwest = this.northwest;\n  var northeast = this.northeast;\n\n  result.allAreRenderable =\n    southwest.allAreRenderable &&\n    southeast.allAreRenderable &&\n    northwest.allAreRenderable &&\n    northeast.allAreRenderable;\n  result.anyWereRenderedLastFrame =\n    southwest.anyWereRenderedLastFrame ||\n    southeast.anyWereRenderedLastFrame ||\n    northwest.anyWereRenderedLastFrame ||\n    northeast.anyWereRenderedLastFrame;\n  result.notYetRenderableCount =\n    southwest.notYetRenderableCount +\n    southeast.notYetRenderableCount +\n    northwest.notYetRenderableCount +\n    northeast.notYetRenderableCount;\n};\n\nvar traversalQuadsByLevel = new Array(31); // level 30 tiles are ~2cm wide at the equator, should be good enough.\nfor (var i = 0; i < traversalQuadsByLevel.length; ++i) {\n  traversalQuadsByLevel[i] = new TraversalQuadDetails();\n}\n\n/**\n * Visits a tile for possible rendering. When we call this function with a tile:\n *\n *    * the tile has been determined to be visible (possibly based on a bounding volume that is not very tight-fitting)\n *    * its parent tile does _not_ meet the SSE (unless ancestorMeetsSse=true, see comments below)\n *    * the tile may or may not be renderable\n *\n * @private\n *\n * @param {Primitive} primitive The QuadtreePrimitive.\n * @param {FrameState} frameState The frame state.\n * @param {QuadtreeTile} tile The tile to visit\n * @param {Boolean} ancestorMeetsSse True if a tile higher in the tile tree already met the SSE and we\'re refining further only\n *                  to maintain detail while that higher tile loads.\n * @param {TraversalDetails} traveralDetails On return, populated with details of how the traversal of this tile went.\n */\nfunction visitTile(\n  primitive,\n  frameState,\n  tile,\n  ancestorMeetsSse,\n  traversalDetails\n) {\n  var debug = primitive._debug;\n\n  ++debug.tilesVisited;\n\n  primitive._tileReplacementQueue.markTileRendered(tile);\n  tile._updateCustomData(frameState.frameNumber);\n\n  if (tile.level > debug.maxDepthVisited) {\n    debug.maxDepthVisited = tile.level;\n  }\n\n  var meetsSse =\n    screenSpaceError(primitive, frameState, tile) <\n    primitive.maximumScreenSpaceError;\n\n  var southwestChild = tile.southwestChild;\n  var southeastChild = tile.southeastChild;\n  var northwestChild = tile.northwestChild;\n  var northeastChild = tile.northeastChild;\n\n  var lastFrame = primitive._lastSelectionFrameNumber;\n  var lastFrameSelectionResult =\n    tile._lastSelectionResultFrame === lastFrame\n      ? tile._lastSelectionResult\n      : _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].NONE */ .Z.NONE;\n\n  var tileProvider = primitive.tileProvider;\n\n  if (meetsSse || ancestorMeetsSse) {\n    // This tile (or an ancestor) is the one we want to render this frame, but we\'ll do different things depending\n    // on the state of this tile and on what we did _last_ frame.\n\n    // We can render it if _any_ of the following are true:\n    // 1. We rendered it (or kicked it) last frame.\n    // 2. This tile was culled last frame, or it wasn\'t even visited because an ancestor was culled.\n    // 3. The tile is completely done loading.\n    // 4. a) Terrain is ready, and\n    //    b) All necessary imagery is ready. Necessary imagery is imagery that was rendered with this tile\n    //       or any descendants last frame. Such imagery is required because rendering this tile without\n    //       it would cause detail to disappear.\n    //\n    // Determining condition 4 is more expensive, so we check the others first.\n    //\n    // Note that even if we decide to render a tile here, it may later get "kicked" in favor of an ancestor.\n\n    var oneRenderedLastFrame =\n      _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].originalResult */ .Z.originalResult(lastFrameSelectionResult) ===\n      _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n    var twoCulledOrNotVisited =\n      _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].originalResult */ .Z.originalResult(lastFrameSelectionResult) ===\n        _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED */ .Z.CULLED ||\n      lastFrameSelectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].NONE */ .Z.NONE;\n    var threeCompletelyLoaded = tile.state === _QuadtreeTileLoadState_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].DONE */ .Z.DONE;\n\n    var renderable =\n      oneRenderedLastFrame || twoCulledOrNotVisited || threeCompletelyLoaded;\n\n    if (!renderable) {\n      // Check the more expensive condition 4 above. This requires details of the thing\n      // we\'re rendering (e.g. the globe surface), so delegate it to the tile provider.\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tileProvider.canRenderWithoutLosingDetail)) {\n        renderable = tileProvider.canRenderWithoutLosingDetail(tile);\n      }\n    }\n\n    if (renderable) {\n      // Only load this tile if it (not just an ancestor) meets the SSE.\n      if (meetsSse) {\n        queueTileLoad(\n          primitive,\n          primitive._tileLoadQueueMedium,\n          tile,\n          frameState\n        );\n      }\n      addTileToRenderList(primitive, tile);\n\n      traversalDetails.allAreRenderable = tile.renderable;\n      traversalDetails.anyWereRenderedLastFrame =\n        lastFrameSelectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n      traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;\n\n      tile._lastSelectionResultFrame = frameState.frameNumber;\n      tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n\n      if (!traversalDetails.anyWereRenderedLastFrame) {\n        // Tile is newly-rendered this frame, so update its heights.\n        primitive._tileToUpdateHeights.push(tile);\n      }\n\n      return;\n    }\n\n    // Otherwise, we can\'t render this tile (or its fill) because doing so would cause detail to disappear\n    // that was visible last frame. Instead, keep rendering any still-visible descendants that were rendered\n    // last frame and render fills for newly-visible descendants. E.g. if we were rendering level 15 last\n    // frame but this frame we want level 14 and the closest renderable level <= 14 is 0, rendering level\n    // zero would be pretty jarring so instead we keep rendering level 15 even though its SSE is better\n    // than required. So fall through to continue traversal...\n    ancestorMeetsSse = true;\n\n    // Load this blocker tile with high priority, but only if this tile (not just an ancestor) meets the SSE.\n    if (meetsSse) {\n      queueTileLoad(primitive, primitive._tileLoadQueueHigh, tile, frameState);\n    }\n  }\n\n  if (tileProvider.canRefine(tile)) {\n    var allAreUpsampled =\n      southwestChild.upsampledFromParent &&\n      southeastChild.upsampledFromParent &&\n      northwestChild.upsampledFromParent &&\n      northeastChild.upsampledFromParent;\n\n    if (allAreUpsampled) {\n      // No point in rendering the children because they\'re all upsampled.  Render this tile instead.\n      addTileToRenderList(primitive, tile);\n\n      // Rendered tile that\'s not waiting on children loads with medium priority.\n      queueTileLoad(\n        primitive,\n        primitive._tileLoadQueueMedium,\n        tile,\n        frameState\n      );\n\n      // Make sure we don\'t unload the children and forget they\'re upsampled.\n      primitive._tileReplacementQueue.markTileRendered(southwestChild);\n      primitive._tileReplacementQueue.markTileRendered(southeastChild);\n      primitive._tileReplacementQueue.markTileRendered(northwestChild);\n      primitive._tileReplacementQueue.markTileRendered(northeastChild);\n\n      traversalDetails.allAreRenderable = tile.renderable;\n      traversalDetails.anyWereRenderedLastFrame =\n        lastFrameSelectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n      traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;\n\n      tile._lastSelectionResultFrame = frameState.frameNumber;\n      tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n\n      if (!traversalDetails.anyWereRenderedLastFrame) {\n        // Tile is newly-rendered this frame, so update its heights.\n        primitive._tileToUpdateHeights.push(tile);\n      }\n\n      return;\n    }\n\n    // SSE is not good enough, so refine.\n    tile._lastSelectionResultFrame = frameState.frameNumber;\n    tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].REFINED */ .Z.REFINED;\n\n    var firstRenderedDescendantIndex = primitive._tilesToRender.length;\n    var loadIndexLow = primitive._tileLoadQueueLow.length;\n    var loadIndexMedium = primitive._tileLoadQueueMedium.length;\n    var loadIndexHigh = primitive._tileLoadQueueHigh.length;\n    var tilesToUpdateHeightsIndex = primitive._tileToUpdateHeights.length;\n\n    // No need to add the children to the load queue because they\'ll be added (if necessary) when they\'re visited.\n    visitVisibleChildrenNearToFar(\n      primitive,\n      southwestChild,\n      southeastChild,\n      northwestChild,\n      northeastChild,\n      frameState,\n      ancestorMeetsSse,\n      traversalDetails\n    );\n\n    // If no descendant tiles were added to the render list by the function above, it means they were all\n    // culled even though this tile was deemed visible. That\'s pretty common.\n\n    if (firstRenderedDescendantIndex !== primitive._tilesToRender.length) {\n      // At least one descendant tile was added to the render list.\n      // The traversalDetails tell us what happened while visiting the children.\n\n      var allAreRenderable = traversalDetails.allAreRenderable;\n      var anyWereRenderedLastFrame = traversalDetails.anyWereRenderedLastFrame;\n      var notYetRenderableCount = traversalDetails.notYetRenderableCount;\n      var queuedForLoad = false;\n\n      if (!allAreRenderable && !anyWereRenderedLastFrame) {\n        // Some of our descendants aren\'t ready to render yet, and none were rendered last frame,\n        // so kick them all out of the render list and render this tile instead. Continue to load them though!\n\n        // Mark the rendered descendants and their ancestors - up to this tile - as kicked.\n        var renderList = primitive._tilesToRender;\n        for (var i = firstRenderedDescendantIndex; i < renderList.length; ++i) {\n          var workTile = renderList[i];\n          while (\n            workTile !== undefined &&\n            workTile._lastSelectionResult !== _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].KICKED */ .Z.KICKED &&\n            workTile !== tile\n          ) {\n            workTile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].kick */ .Z.kick(\n              workTile._lastSelectionResult\n            );\n            workTile = workTile.parent;\n          }\n        }\n\n        // Remove all descendants from the render list and add this tile.\n        primitive._tilesToRender.length = firstRenderedDescendantIndex;\n        primitive._tileToUpdateHeights.length = tilesToUpdateHeightsIndex;\n        addTileToRenderList(primitive, tile);\n\n        tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n\n        // If we\'re waiting on heaps of descendants, the above will take too long. So in that case,\n        // load this tile INSTEAD of loading any of the descendants, and tell the up-level we\'re only waiting\n        // on this tile. Keep doing this until we actually manage to render this tile.\n        var wasRenderedLastFrame =\n          lastFrameSelectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n        if (\n          !wasRenderedLastFrame &&\n          notYetRenderableCount > primitive.loadingDescendantLimit\n        ) {\n          // Remove all descendants from the load queues.\n          primitive._tileLoadQueueLow.length = loadIndexLow;\n          primitive._tileLoadQueueMedium.length = loadIndexMedium;\n          primitive._tileLoadQueueHigh.length = loadIndexHigh;\n          queueTileLoad(\n            primitive,\n            primitive._tileLoadQueueMedium,\n            tile,\n            frameState\n          );\n          traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;\n          queuedForLoad = true;\n        }\n\n        traversalDetails.allAreRenderable = tile.renderable;\n        traversalDetails.anyWereRenderedLastFrame = wasRenderedLastFrame;\n\n        if (!wasRenderedLastFrame) {\n          // Tile is newly-rendered this frame, so update its heights.\n          primitive._tileToUpdateHeights.push(tile);\n        }\n\n        ++debug.tilesWaitingForChildren;\n      }\n\n      if (primitive.preloadAncestors && !queuedForLoad) {\n        queueTileLoad(primitive, primitive._tileLoadQueueLow, tile, frameState);\n      }\n    }\n\n    return;\n  }\n\n  tile._lastSelectionResultFrame = frameState.frameNumber;\n  tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n\n  // We\'d like to refine but can\'t because we have no availability data for this tile\'s children,\n  // so we have no idea if refinining would involve a load or an upsample. We\'ll have to finish\n  // loading this tile first in order to find that out, so load this refinement blocker with\n  // high priority.\n  addTileToRenderList(primitive, tile);\n  queueTileLoad(primitive, primitive._tileLoadQueueHigh, tile, frameState);\n\n  traversalDetails.allAreRenderable = tile.renderable;\n  traversalDetails.anyWereRenderedLastFrame =\n    lastFrameSelectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED;\n  traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;\n}\n\nfunction visitVisibleChildrenNearToFar(\n  primitive,\n  southwest,\n  southeast,\n  northwest,\n  northeast,\n  frameState,\n  ancestorMeetsSse,\n  traversalDetails\n) {\n  var cameraPosition = frameState.camera.positionCartographic;\n  var tileProvider = primitive._tileProvider;\n  var occluders = primitive._occluders;\n\n  var quadDetails = traversalQuadsByLevel[southwest.level];\n  var southwestDetails = quadDetails.southwest;\n  var southeastDetails = quadDetails.southeast;\n  var northwestDetails = quadDetails.northwest;\n  var northeastDetails = quadDetails.northeast;\n\n  if (cameraPosition.longitude < southwest.rectangle.east) {\n    if (cameraPosition.latitude < southwest.rectangle.north) {\n      // Camera in southwest quadrant\n      visitIfVisible(\n        primitive,\n        southwest,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        southwestDetails\n      );\n      visitIfVisible(\n        primitive,\n        southeast,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        southeastDetails\n      );\n      visitIfVisible(\n        primitive,\n        northwest,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        northwestDetails\n      );\n      visitIfVisible(\n        primitive,\n        northeast,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        northeastDetails\n      );\n    } else {\n      // Camera in northwest quadrant\n      visitIfVisible(\n        primitive,\n        northwest,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        northwestDetails\n      );\n      visitIfVisible(\n        primitive,\n        southwest,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        southwestDetails\n      );\n      visitIfVisible(\n        primitive,\n        northeast,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        northeastDetails\n      );\n      visitIfVisible(\n        primitive,\n        southeast,\n        tileProvider,\n        frameState,\n        occluders,\n        ancestorMeetsSse,\n        southeastDetails\n      );\n    }\n  } else if (cameraPosition.latitude < southwest.rectangle.north) {\n    // Camera southeast quadrant\n    visitIfVisible(\n      primitive,\n      southeast,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      southeastDetails\n    );\n    visitIfVisible(\n      primitive,\n      southwest,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      southwestDetails\n    );\n    visitIfVisible(\n      primitive,\n      northeast,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      northeastDetails\n    );\n    visitIfVisible(\n      primitive,\n      northwest,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      northwestDetails\n    );\n  } else {\n    // Camera in northeast quadrant\n    visitIfVisible(\n      primitive,\n      northeast,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      northeastDetails\n    );\n    visitIfVisible(\n      primitive,\n      northwest,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      northwestDetails\n    );\n    visitIfVisible(\n      primitive,\n      southeast,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      southeastDetails\n    );\n    visitIfVisible(\n      primitive,\n      southwest,\n      tileProvider,\n      frameState,\n      occluders,\n      ancestorMeetsSse,\n      southwestDetails\n    );\n  }\n\n  quadDetails.combine(traversalDetails);\n}\n\nfunction containsNeededPosition(primitive, tile) {\n  var rectangle = tile.rectangle;\n  return (\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(primitive._cameraPositionCartographic) &&\n      _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].contains */ .Z.contains(rectangle, primitive._cameraPositionCartographic)) ||\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(primitive._cameraReferenceFrameOriginCartographic) &&\n      _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].contains */ .Z.contains(\n        rectangle,\n        primitive._cameraReferenceFrameOriginCartographic\n      ))\n  );\n}\n\nfunction visitIfVisible(\n  primitive,\n  tile,\n  tileProvider,\n  frameState,\n  occluders,\n  ancestorMeetsSse,\n  traversalDetails\n) {\n  if (\n    tileProvider.computeTileVisibility(tile, frameState, occluders) !==\n    _Core_Visibility_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].NONE */ .Z.NONE\n  ) {\n    return visitTile(\n      primitive,\n      frameState,\n      tile,\n      ancestorMeetsSse,\n      traversalDetails\n    );\n  }\n\n  ++primitive._debug.tilesCulled;\n  primitive._tileReplacementQueue.markTileRendered(tile);\n\n  traversalDetails.allAreRenderable = true;\n  traversalDetails.anyWereRenderedLastFrame = false;\n  traversalDetails.notYetRenderableCount = 0;\n\n  if (containsNeededPosition(primitive, tile)) {\n    // Load the tile(s) that contains the camera\'s position and\n    // the origin of its reference frame with medium priority.\n    // But we only need to load until the terrain is available, no need to load imagery.\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile.data) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile.data.vertexArray)) {\n      queueTileLoad(\n        primitive,\n        primitive._tileLoadQueueMedium,\n        tile,\n        frameState\n      );\n    }\n\n    var lastFrame = primitive._lastSelectionFrameNumber;\n    var lastFrameSelectionResult =\n      tile._lastSelectionResultFrame === lastFrame\n        ? tile._lastSelectionResult\n        : _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].NONE */ .Z.NONE;\n    if (\n      lastFrameSelectionResult !== _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED_BUT_NEEDED */ .Z.CULLED_BUT_NEEDED &&\n      lastFrameSelectionResult !== _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED\n    ) {\n      primitive._tileToUpdateHeights.push(tile);\n    }\n\n    tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED_BUT_NEEDED */ .Z.CULLED_BUT_NEEDED;\n  } else if (primitive.preloadSiblings || tile.level === 0) {\n    // Load culled level zero tiles with low priority.\n    // For all other levels, only load culled tiles if preloadSiblings is enabled.\n    queueTileLoad(primitive, primitive._tileLoadQueueLow, tile, frameState);\n    tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED */ .Z.CULLED;\n  } else {\n    tile._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED */ .Z.CULLED;\n  }\n\n  tile._lastSelectionResultFrame = frameState.frameNumber;\n}\n\nfunction screenSpaceError(primitive, frameState, tile) {\n  if (\n    frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].SCENE2D */ .Z.SCENE2D ||\n    frameState.camera.frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z ||\n    frameState.camera.frustum instanceof _Core_OrthographicOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z\n  ) {\n    return screenSpaceError2D(primitive, frameState, tile);\n  }\n\n  var maxGeometricError = primitive._tileProvider.getLevelMaximumGeometricError(\n    tile.level\n  );\n\n  var distance = tile._distance;\n  var height = frameState.context.drawingBufferHeight;\n  var sseDenominator = frameState.camera.frustum.sseDenominator;\n\n  var error = (maxGeometricError * height) / (distance * sseDenominator);\n\n  if (frameState.fog.enabled) {\n    error -=\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fog */ .Z.fog(distance, frameState.fog.density) * frameState.fog.sse;\n  }\n\n  error /= frameState.pixelRatio;\n\n  return error;\n}\n\nfunction screenSpaceError2D(primitive, frameState, tile) {\n  var camera = frameState.camera;\n  var frustum = camera.frustum;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(frustum._offCenterFrustum)) {\n    frustum = frustum._offCenterFrustum;\n  }\n\n  var context = frameState.context;\n  var width = context.drawingBufferWidth;\n  var height = context.drawingBufferHeight;\n\n  var maxGeometricError = primitive._tileProvider.getLevelMaximumGeometricError(\n    tile.level\n  );\n  var pixelSize =\n    Math.max(frustum.top - frustum.bottom, frustum.right - frustum.left) /\n    Math.max(width, height);\n  var error = maxGeometricError / pixelSize;\n\n  if (frameState.fog.enabled && frameState.mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    error -=\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fog */ .Z.fog(tile._distance, frameState.fog.density) *\n      frameState.fog.sse;\n  }\n\n  error /= frameState.pixelRatio;\n\n  return error;\n}\n\nfunction addTileToRenderList(primitive, tile) {\n  primitive._tilesToRender.push(tile);\n}\n\nfunction processTileLoadQueue(primitive, frameState) {\n  var tileLoadQueueHigh = primitive._tileLoadQueueHigh;\n  var tileLoadQueueMedium = primitive._tileLoadQueueMedium;\n  var tileLoadQueueLow = primitive._tileLoadQueueLow;\n\n  if (\n    tileLoadQueueHigh.length === 0 &&\n    tileLoadQueueMedium.length === 0 &&\n    tileLoadQueueLow.length === 0\n  ) {\n    return;\n  }\n\n  // Remove any tiles that were not used this frame beyond the number\n  // we\'re allowed to keep.\n  primitive._tileReplacementQueue.trimTiles(primitive.tileCacheSize);\n\n  var endTime = (0,_Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)() + primitive._loadQueueTimeSlice;\n  var tileProvider = primitive._tileProvider;\n\n  var didSomeLoading = processSinglePriorityLoadQueue(\n    primitive,\n    frameState,\n    tileProvider,\n    endTime,\n    tileLoadQueueHigh,\n    false\n  );\n  didSomeLoading = processSinglePriorityLoadQueue(\n    primitive,\n    frameState,\n    tileProvider,\n    endTime,\n    tileLoadQueueMedium,\n    didSomeLoading\n  );\n  processSinglePriorityLoadQueue(\n    primitive,\n    frameState,\n    tileProvider,\n    endTime,\n    tileLoadQueueLow,\n    didSomeLoading\n  );\n}\n\nfunction sortByLoadPriority(a, b) {\n  return a._loadPriority - b._loadPriority;\n}\n\nfunction processSinglePriorityLoadQueue(\n  primitive,\n  frameState,\n  tileProvider,\n  endTime,\n  loadQueue,\n  didSomeLoading\n) {\n  if (tileProvider.computeTileLoadPriority !== undefined) {\n    loadQueue.sort(sortByLoadPriority);\n  }\n\n  for (\n    var i = 0, len = loadQueue.length;\n    i < len && ((0,_Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)() < endTime || !didSomeLoading);\n    ++i\n  ) {\n    var tile = loadQueue[i];\n    primitive._tileReplacementQueue.markTileRendered(tile);\n    tileProvider.loadTile(frameState, tile);\n    didSomeLoading = true;\n  }\n\n  return didSomeLoading;\n}\n\nvar scratchRay = new _Core_Ray_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\nvar scratchCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchPosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar scratchArray = [];\n\nfunction updateHeights(primitive, frameState) {\n  if (!primitive.tileProvider.ready) {\n    return;\n  }\n\n  var tryNextFrame = scratchArray;\n  tryNextFrame.length = 0;\n  var tilesToUpdateHeights = primitive._tileToUpdateHeights;\n\n  var startTime = (0,_Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)();\n  var timeSlice = primitive._updateHeightsTimeSlice;\n  var endTime = startTime + timeSlice;\n\n  var mode = frameState.mode;\n  var projection = frameState.mapProjection;\n  var ellipsoid = primitive.tileProvider.tilingScheme.ellipsoid;\n  var i;\n\n  while (tilesToUpdateHeights.length > 0) {\n    var tile = tilesToUpdateHeights[0];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile.data) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile.data.mesh)) {\n      // Tile isn\'t loaded enough yet, so try again next frame if this tile is still\n      // being rendered.\n      var selectionResult =\n        tile._lastSelectionResultFrame === primitive._lastSelectionFrameNumber\n          ? tile._lastSelectionResult\n          : _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].NONE */ .Z.NONE;\n      if (\n        selectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED ||\n        selectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED_BUT_NEEDED */ .Z.CULLED_BUT_NEEDED\n      ) {\n        tryNextFrame.push(tile);\n      }\n      tilesToUpdateHeights.shift();\n      primitive._lastTileIndex = 0;\n      continue;\n    }\n    var customData = tile.customData;\n    var customDataLength = customData.length;\n\n    var timeSliceMax = false;\n    for (i = primitive._lastTileIndex; i < customDataLength; ++i) {\n      var data = customData[i];\n\n      // No need to run this code when the tile is upsampled, because the height will be the same as its parent.\n      var terrainData = tile.data.terrainData;\n      var upsampledGeometryFromParent =\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(terrainData) && terrainData.wasCreatedByUpsampling();\n\n      if (tile.level > data.level && !upsampledGeometryFromParent) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(data.positionOnEllipsoidSurface)) {\n          // cartesian has to be on the ellipsoid surface for `ellipsoid.geodeticSurfaceNormal`\n          data.positionOnEllipsoidSurface = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromRadians */ .Z.fromRadians(\n            data.positionCartographic.longitude,\n            data.positionCartographic.latitude,\n            0.0,\n            ellipsoid\n          );\n        }\n\n        if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n          var surfaceNormal = ellipsoid.geodeticSurfaceNormal(\n            data.positionOnEllipsoidSurface,\n            scratchRay.direction\n          );\n\n          // compute origin point\n\n          // Try to find the intersection point between the surface normal and z-axis.\n          // minimum height (-11500.0) for the terrain set, need to get this information from the terrain provider\n          var rayOrigin = ellipsoid.getSurfaceNormalIntersectionWithZAxis(\n            data.positionOnEllipsoidSurface,\n            11500.0,\n            scratchRay.origin\n          );\n\n          // Theoretically, not with Earth datums, the intersection point can be outside the ellipsoid\n          if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(rayOrigin)) {\n            // intersection point is outside the ellipsoid, try other value\n            // minimum height (-11500.0) for the terrain set, need to get this information from the terrain provider\n            var minimumHeight;\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile.data.tileBoundingRegion)) {\n              minimumHeight = tile.data.tileBoundingRegion.minimumHeight;\n            }\n            var magnitude = Math.min(\n              (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(minimumHeight, 0.0),\n              -11500.0\n            );\n\n            // multiply by the *positive* value of the magnitude\n            var vectorToMinimumPoint = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n              surfaceNormal,\n              Math.abs(magnitude) + 1,\n              scratchPosition\n            );\n            _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].subtract */ .Z.subtract(\n              data.positionOnEllipsoidSurface,\n              vectorToMinimumPoint,\n              scratchRay.origin\n            );\n          }\n        } else {\n          _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(data.positionCartographic, scratchCartographic);\n\n          // minimum height for the terrain set, need to get this information from the terrain provider\n          scratchCartographic.height = -11500.0;\n          projection.project(scratchCartographic, scratchPosition);\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromElements */ .Z.fromElements(\n            scratchPosition.z,\n            scratchPosition.x,\n            scratchPosition.y,\n            scratchPosition\n          );\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(scratchPosition, scratchRay.origin);\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNIT_X */ .Z.UNIT_X, scratchRay.direction);\n        }\n\n        var position = tile.data.pick(\n          scratchRay,\n          mode,\n          projection,\n          false,\n          scratchPosition\n        );\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(position)) {\n          data.callback(position);\n          data.level = tile.level;\n        }\n      }\n\n      if ((0,_Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)() >= endTime) {\n        timeSliceMax = true;\n        break;\n      }\n    }\n\n    if (timeSliceMax) {\n      primitive._lastTileIndex = i;\n      break;\n    } else {\n      primitive._lastTileIndex = 0;\n      tilesToUpdateHeights.shift();\n    }\n  }\n  for (i = 0; i < tryNextFrame.length; i++) {\n    tilesToUpdateHeights.push(tryNextFrame[i]);\n  }\n}\n\nfunction createRenderCommandsForSelectedTiles(primitive, frameState) {\n  var tileProvider = primitive._tileProvider;\n  var tilesToRender = primitive._tilesToRender;\n\n  for (var i = 0, len = tilesToRender.length; i < len; ++i) {\n    var tile = tilesToRender[i];\n    tileProvider.showTileThisFrame(tile, frameState);\n  }\n}\n/* harmony default export */ __webpack_exports__["Z"] = (QuadtreePrimitive);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MkZBQTRCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsMkZBQTRCOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQywyRkFBNEI7QUFDN0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Y2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvUXVhZHRyZWVQcmltaXRpdmUuanM/NDc4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCIuLi9Db3JlL0NhcnRvZ3JhcGhpYy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgZ2V0VGltZXN0YW1wIGZyb20gXCIuLi9Db3JlL2dldFRpbWVzdGFtcC5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IE9ydGhvZ3JhcGhpY0ZydXN0dW0gZnJvbSBcIi4uL0NvcmUvT3J0aG9ncmFwaGljRnJ1c3R1bS5qc1wiO1xuaW1wb3J0IE9ydGhvZ3JhcGhpY09mZkNlbnRlckZydXN0dW0gZnJvbSBcIi4uL0NvcmUvT3J0aG9ncmFwaGljT2ZmQ2VudGVyRnJ1c3R1bS5qc1wiO1xuaW1wb3J0IFJheSBmcm9tIFwiLi4vQ29yZS9SYXkuanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgVmlzaWJpbGl0eSBmcm9tIFwiLi4vQ29yZS9WaXNpYmlsaXR5LmpzXCI7XG5pbXBvcnQgUXVhZHRyZWVPY2NsdWRlcnMgZnJvbSBcIi4vUXVhZHRyZWVPY2NsdWRlcnMuanNcIjtcbmltcG9ydCBRdWFkdHJlZVRpbGUgZnJvbSBcIi4vUXVhZHRyZWVUaWxlLmpzXCI7XG5pbXBvcnQgUXVhZHRyZWVUaWxlTG9hZFN0YXRlIGZyb20gXCIuL1F1YWR0cmVlVGlsZUxvYWRTdGF0ZS5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi9TY2VuZU1vZGUuanNcIjtcbmltcG9ydCBUaWxlUmVwbGFjZW1lbnRRdWV1ZSBmcm9tIFwiLi9UaWxlUmVwbGFjZW1lbnRRdWV1ZS5qc1wiO1xuaW1wb3J0IFRpbGVTZWxlY3Rpb25SZXN1bHQgZnJvbSBcIi4vVGlsZVNlbGVjdGlvblJlc3VsdC5qc1wiO1xuXG4vKipcbiAqIFJlbmRlcnMgbWFzc2l2ZSBzZXRzIG9mIGRhdGEgYnkgdXRpbGl6aW5nIGxldmVsLW9mLWRldGFpbCBhbmQgY3VsbGluZy4gIFRoZSBnbG9iZSBzdXJmYWNlIGlzIGRpdmlkZWQgaW50b1xuICogYSBxdWFkdHJlZSBvZiB0aWxlcyB3aXRoIGxhcmdlLCBsb3ctZGV0YWlsIHRpbGVzIGF0IHRoZSByb290IGFuZCBzbWFsbCwgaGlnaC1kZXRhaWwgdGlsZXMgYXQgdGhlIGxlYXZlcy5cbiAqIFRoZSBzZXQgb2YgdGlsZXMgdG8gcmVuZGVyIGlzIHNlbGVjdGVkIGJ5IHByb2plY3RpbmcgYW4gZXN0aW1hdGUgb2YgdGhlIGdlb21ldHJpYyBlcnJvciBpbiBhIHRpbGUgb250b1xuICogdGhlIHNjcmVlbiB0byBlc3RpbWF0ZSBzY3JlZW4tc3BhY2UgZXJyb3IsIGluIHBpeGVscywgd2hpY2ggbXVzdCBiZSBiZWxvdyBhIHVzZXItc3BlY2lmaWVkIHRocmVzaG9sZC5cbiAqIFRoZSBhY3R1YWwgY29udGVudCBvZiB0aGUgdGlsZXMgaXMgYXJiaXRyYXJ5IGFuZCBpcyBzcGVjaWZpZWQgdXNpbmcgYSB7QGxpbmsgUXVhZHRyZWVUaWxlUHJvdmlkZXJ9LlxuICpcbiAqIEBhbGlhcyBRdWFkdHJlZVByaW1pdGl2ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7UXVhZHRyZWVUaWxlUHJvdmlkZXJ9IG9wdGlvbnMudGlsZVByb3ZpZGVyIFRoZSB0aWxlIHByb3ZpZGVyIHRoYXQgbG9hZHMsIHJlbmRlcnMsIGFuZCBlc3RpbWF0ZXNcbiAqICAgICAgICB0aGUgZGlzdGFuY2UgdG8gaW5kaXZpZHVhbCB0aWxlcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5tYXhpbXVtU2NyZWVuU3BhY2VFcnJvcj0yXSBUaGUgbWF4aW11bSBzY3JlZW4tc3BhY2UgZXJyb3IsIGluIHBpeGVscywgdGhhdCBpcyBhbGxvd2VkLlxuICogICAgICAgIEEgaGlnaGVyIG1heGltdW0gZXJyb3Igd2lsbCByZW5kZXIgZmV3ZXIgdGlsZXMgYW5kIGltcHJvdmUgcGVyZm9ybWFuY2UsIHdoaWxlIGEgbG93ZXJcbiAqICAgICAgICB2YWx1ZSB3aWxsIGltcHJvdmUgdmlzdWFsIHF1YWxpdHkuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMudGlsZUNhY2hlU2l6ZT0xMDBdIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aWxlcyB0aGF0IHdpbGwgYmUgcmV0YWluZWQgaW4gdGhlIHRpbGUgY2FjaGUuXG4gKiAgICAgICAgTm90ZSB0aGF0IHRpbGVzIHdpbGwgbmV2ZXIgYmUgdW5sb2FkZWQgaWYgdGhleSB3ZXJlIHVzZWQgZm9yIHJlbmRlcmluZyB0aGUgbGFzdFxuICogICAgICAgIGZyYW1lLCBzbyB0aGUgYWN0dWFsIG51bWJlciBvZiByZXNpZGVudCB0aWxlcyBtYXkgYmUgaGlnaGVyLiAgVGhlIHZhbHVlIG9mXG4gKiAgICAgICAgdGhpcyBwcm9wZXJ0eSB3aWxsIG5vdCBhZmZlY3QgdmlzdWFsIHF1YWxpdHkuXG4gKi9cbmZ1bmN0aW9uIFF1YWR0cmVlUHJpbWl0aXZlKG9wdGlvbnMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKG9wdGlvbnMpIHx8ICFkZWZpbmVkKG9wdGlvbnMudGlsZVByb3ZpZGVyKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIm9wdGlvbnMudGlsZVByb3ZpZGVyIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICBpZiAoZGVmaW5lZChvcHRpb25zLnRpbGVQcm92aWRlci5xdWFkdHJlZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIkEgUXVhZHRyZWVUaWxlUHJvdmlkZXIgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIGEgc2luZ2xlIFF1YWR0cmVlUHJpbWl0aXZlXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX3RpbGVQcm92aWRlciA9IG9wdGlvbnMudGlsZVByb3ZpZGVyO1xuICB0aGlzLl90aWxlUHJvdmlkZXIucXVhZHRyZWUgPSB0aGlzO1xuXG4gIHRoaXMuX2RlYnVnID0ge1xuICAgIGVuYWJsZURlYnVnT3V0cHV0OiBmYWxzZSxcblxuICAgIG1heERlcHRoOiAwLFxuICAgIG1heERlcHRoVmlzaXRlZDogMCxcbiAgICB0aWxlc1Zpc2l0ZWQ6IDAsXG4gICAgdGlsZXNDdWxsZWQ6IDAsXG4gICAgdGlsZXNSZW5kZXJlZDogMCxcbiAgICB0aWxlc1dhaXRpbmdGb3JDaGlsZHJlbjogMCxcblxuICAgIGxhc3RNYXhEZXB0aDogLTEsXG4gICAgbGFzdE1heERlcHRoVmlzaXRlZDogLTEsXG4gICAgbGFzdFRpbGVzVmlzaXRlZDogLTEsXG4gICAgbGFzdFRpbGVzQ3VsbGVkOiAtMSxcbiAgICBsYXN0VGlsZXNSZW5kZXJlZDogLTEsXG4gICAgbGFzdFRpbGVzV2FpdGluZ0ZvckNoaWxkcmVuOiAtMSxcblxuICAgIHN1c3BlbmRMb2RVcGRhdGU6IGZhbHNlLFxuICB9O1xuXG4gIHZhciB0aWxpbmdTY2hlbWUgPSB0aGlzLl90aWxlUHJvdmlkZXIudGlsaW5nU2NoZW1lO1xuICB2YXIgZWxsaXBzb2lkID0gdGlsaW5nU2NoZW1lLmVsbGlwc29pZDtcblxuICB0aGlzLl90aWxlc1RvUmVuZGVyID0gW107XG4gIHRoaXMuX3RpbGVMb2FkUXVldWVIaWdoID0gW107IC8vIGhpZ2ggcHJpb3JpdHkgdGlsZXMgYXJlIHByZXZlbnRpbmcgcmVmaW5lbWVudFxuICB0aGlzLl90aWxlTG9hZFF1ZXVlTWVkaXVtID0gW107IC8vIG1lZGl1bSBwcmlvcml0eSB0aWxlcyBhcmUgYmVpbmcgcmVuZGVyZWRcbiAgdGhpcy5fdGlsZUxvYWRRdWV1ZUxvdyA9IFtdOyAvLyBsb3cgcHJpb3JpdHkgdGlsZXMgd2VyZSByZWZpbmVkIHBhc3Qgb3IgYXJlIG5vbi12aXNpYmxlIHBhcnRzIG9mIHF1YWRzLlxuICB0aGlzLl90aWxlUmVwbGFjZW1lbnRRdWV1ZSA9IG5ldyBUaWxlUmVwbGFjZW1lbnRRdWV1ZSgpO1xuICB0aGlzLl9sZXZlbFplcm9UaWxlcyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbG9hZFF1ZXVlVGltZVNsaWNlID0gNS4wO1xuICB0aGlzLl90aWxlc0ludmFsaWRhdGVkID0gZmFsc2U7XG5cbiAgdGhpcy5fYWRkSGVpZ2h0Q2FsbGJhY2tzID0gW107XG4gIHRoaXMuX3JlbW92ZUhlaWdodENhbGxiYWNrcyA9IFtdO1xuXG4gIHRoaXMuX3RpbGVUb1VwZGF0ZUhlaWdodHMgPSBbXTtcbiAgdGhpcy5fbGFzdFRpbGVJbmRleCA9IDA7XG4gIHRoaXMuX3VwZGF0ZUhlaWdodHNUaW1lU2xpY2UgPSAyLjA7XG5cbiAgLy8gSWYgYSBjdWxsZWQgdGlsZSBjb250YWlucyBfY2FtZXJhUG9zaXRpb25DYXJ0b2dyYXBoaWMgb3IgX2NhbWVyYVJlZmVyZW5jZUZyYW1lT3JpZ2luQ2FydG9ncmFwaGljLCBpdCB3aWxsIGJlIG1hcmtlZFxuICAvLyBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRF9CVVRfTkVFREVEIGFuZCBhZGRlZCB0byB0aGUgbGlzdCBvZiB0aWxlcyB0byB1cGRhdGUgaGVpZ2h0cyxcbiAgLy8gZXZlbiB0aG91Z2ggaXQgaXMgbm90IHJlbmRlcmVkLlxuICAvLyBUaGVzZSBhcmUgdXBkYXRlZCBlYWNoIGZyYW1lIGluIGBzZWxlY3RUaWxlc0ZvclJlbmRlcmluZ2AuXG4gIHRoaXMuX2NhbWVyYVBvc2l0aW9uQ2FydG9ncmFwaGljID0gdW5kZWZpbmVkO1xuICB0aGlzLl9jYW1lcmFSZWZlcmVuY2VGcmFtZU9yaWdpbkNhcnRvZ3JhcGhpYyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBtYXhpbXVtIHNjcmVlbi1zcGFjZSBlcnJvciwgaW4gcGl4ZWxzLCB0aGF0IGlzIGFsbG93ZWQuXG4gICAqIEEgaGlnaGVyIG1heGltdW0gZXJyb3Igd2lsbCByZW5kZXIgZmV3ZXIgdGlsZXMgYW5kIGltcHJvdmUgcGVyZm9ybWFuY2UsIHdoaWxlIGEgbG93ZXJcbiAgICogdmFsdWUgd2lsbCBpbXByb3ZlIHZpc3VhbCBxdWFsaXR5LlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAyXG4gICAqL1xuICB0aGlzLm1heGltdW1TY3JlZW5TcGFjZUVycm9yID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMubWF4aW11bVNjcmVlblNwYWNlRXJyb3IsXG4gICAgMlxuICApO1xuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbGVzIHRoYXQgd2lsbCBiZSByZXRhaW5lZCBpbiB0aGUgdGlsZSBjYWNoZS5cbiAgICogTm90ZSB0aGF0IHRpbGVzIHdpbGwgbmV2ZXIgYmUgdW5sb2FkZWQgaWYgdGhleSB3ZXJlIHVzZWQgZm9yIHJlbmRlcmluZyB0aGUgbGFzdFxuICAgKiBmcmFtZSwgc28gdGhlIGFjdHVhbCBudW1iZXIgb2YgcmVzaWRlbnQgdGlsZXMgbWF5IGJlIGhpZ2hlci4gIFRoZSB2YWx1ZSBvZlxuICAgKiB0aGlzIHByb3BlcnR5IHdpbGwgbm90IGFmZmVjdCB2aXN1YWwgcXVhbGl0eS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMTAwXG4gICAqL1xuICB0aGlzLnRpbGVDYWNoZVNpemUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy50aWxlQ2FjaGVTaXplLCAxMDApO1xuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIG51bWJlciBvZiBsb2FkaW5nIGRlc2NlbmRhbnQgdGlsZXMgdGhhdCBpcyBjb25zaWRlcmVkIFwidG9vIG1hbnlcIi5cbiAgICogSWYgYSB0aWxlIGhhcyB0b28gbWFueSBsb2FkaW5nIGRlc2NlbmRhbnRzLCB0aGF0IHRpbGUgd2lsbCBiZSBsb2FkZWQgYW5kIHJlbmRlcmVkIGJlZm9yZSBhbnkgb2ZcbiAgICogaXRzIGRlc2NlbmRhbnRzIGFyZSBsb2FkZWQgYW5kIHJlbmRlcmVkLiBUaGlzIG1lYW5zIG1vcmUgZmVlZGJhY2sgZm9yIHRoZSB1c2VyIHRoYXQgc29tZXRoaW5nXG4gICAqIGlzIGhhcHBlbmluZyBhdCB0aGUgY29zdCBvZiBhIGxvbmdlciBvdmVyYWxsIGxvYWQgdGltZS4gU2V0dGluZyB0aGlzIHRvIDAgd2lsbCBjYXVzZSBlYWNoXG4gICAqIHRpbGUgbGV2ZWwgdG8gYmUgbG9hZGVkIHN1Y2Nlc3NpdmVseSwgc2lnbmlmaWNhbnRseSBpbmNyZWFzaW5nIGxvYWQgdGltZS4gU2V0dGluZyBpdCB0byBhIGxhcmdlXG4gICAqIG51bWJlciAoZS5nLiAxMDAwKSB3aWxsIG1pbmltaXplIHRoZSBudW1iZXIgb2YgdGlsZXMgdGhhdCBhcmUgbG9hZGVkIGJ1dCB0ZW5kIHRvIG1ha2VcbiAgICogZGV0YWlsIGFwcGVhciBhbGwgYXQgb25jZSBhZnRlciBhIGxvbmcgd2FpdC5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMjBcbiAgICovXG4gIHRoaXMubG9hZGluZ0Rlc2NlbmRhbnRMaW1pdCA9IDIwO1xuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGFuY2VzdG9ycyBvZiByZW5kZXJlZCB0aWxlcyBzaG91bGQgYmUgcHJlbG9hZGVkLlxuICAgKiBTZXR0aW5nIHRoaXMgdG8gdHJ1ZSBvcHRpbWl6ZXMgdGhlIHpvb20tb3V0IGV4cGVyaWVuY2UgYW5kIHByb3ZpZGVzIG1vcmUgZGV0YWlsIGluXG4gICAqIG5ld2x5LWV4cG9zZWQgYXJlYXMgd2hlbiBwYW5uaW5nLiBUaGUgZG93biBzaWRlIGlzIHRoYXQgaXQgcmVxdWlyZXMgbG9hZGluZyBtb3JlIHRpbGVzLlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5wcmVsb2FkQW5jZXN0b3JzID0gdHJ1ZTtcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzaWJsaW5ncyBvZiByZW5kZXJlZCB0aWxlcyBzaG91bGQgYmUgcHJlbG9hZGVkLlxuICAgKiBTZXR0aW5nIHRoaXMgdG8gdHJ1ZSBjYXVzZXMgdGlsZXMgd2l0aCB0aGUgc2FtZSBwYXJlbnQgYXMgYSByZW5kZXJlZCB0aWxlIHRvIGJlIGxvYWRlZCwgZXZlblxuICAgKiBpZiB0aGV5IGFyZSBjdWxsZWQuIFNldHRpbmcgdGhpcyB0byB0cnVlIG1heSBwcm92aWRlIGEgYmV0dGVyIHBhbm5pbmcgZXhwZXJpZW5jZSBhdCB0aGVcbiAgICogY29zdCBvZiBsb2FkaW5nIG1vcmUgdGlsZXMuXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgdGhpcy5wcmVsb2FkU2libGluZ3MgPSBmYWxzZTtcblxuICB0aGlzLl9vY2NsdWRlcnMgPSBuZXcgUXVhZHRyZWVPY2NsdWRlcnMoe1xuICAgIGVsbGlwc29pZDogZWxsaXBzb2lkLFxuICB9KTtcblxuICB0aGlzLl90aWxlTG9hZFByb2dyZXNzRXZlbnQgPSBuZXcgRXZlbnQoKTtcbiAgdGhpcy5fbGFzdFRpbGVMb2FkUXVldWVMZW5ndGggPSAwO1xuXG4gIHRoaXMuX2xhc3RTZWxlY3Rpb25GcmFtZU51bWJlciA9IHVuZGVmaW5lZDtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUXVhZHRyZWVQcmltaXRpdmUucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm92aWRlciBvZiB7QGxpbmsgUXVhZHRyZWVUaWxlfSBpbnN0YW5jZXMgZm9yIHRoaXMgcXVhZHRyZWUuXG4gICAqIEB0eXBlIHtRdWFkdHJlZVRpbGV9XG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICovXG4gIHRpbGVQcm92aWRlcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbGVQcm92aWRlcjtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhbiBldmVudCB0aGF0J3MgcmFpc2VkIHdoZW4gdGhlIGxlbmd0aCBvZiB0aGUgdGlsZSBsb2FkIHF1ZXVlIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IHJlbmRlciBmcmFtZS4gIFdoZW4gdGhlIGxvYWQgcXVldWUgaXMgZW1wdHksXG4gICAqIGFsbCB0ZXJyYWluIGFuZCBpbWFnZXJ5IGZvciB0aGUgY3VycmVudCB2aWV3IGhhdmUgYmVlbiBsb2FkZWQuICBUaGUgZXZlbnQgcGFzc2VzIHRoZSBuZXcgbGVuZ3RoIG9mIHRoZSB0aWxlIGxvYWQgcXVldWUuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKi9cbiAgdGlsZUxvYWRQcm9ncmVzc0V2ZW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdGlsZUxvYWRQcm9ncmVzc0V2ZW50O1xuICAgIH0sXG4gIH0sXG5cbiAgb2NjbHVkZXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb2NjbHVkZXJzO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBJbnZhbGlkYXRlcyBhbmQgZnJlZXMgYWxsIHRoZSB0aWxlcyBpbiB0aGUgcXVhZHRyZWUuICBUaGUgdGlsZXMgbXVzdCBiZSByZWxvYWRlZFxuICogYmVmb3JlIHRoZXkgY2FuIGJlIGRpc3BsYXllZC5cbiAqXG4gKiBAbWVtYmVyb2YgUXVhZHRyZWVQcmltaXRpdmVcbiAqL1xuUXVhZHRyZWVQcmltaXRpdmUucHJvdG90eXBlLmludmFsaWRhdGVBbGxUaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fdGlsZXNJbnZhbGlkYXRlZCA9IHRydWU7XG59O1xuXG5mdW5jdGlvbiBpbnZhbGlkYXRlQWxsVGlsZXMocHJpbWl0aXZlKSB7XG4gIC8vIENsZWFyIHRoZSByZXBsYWNlbWVudCBxdWV1ZVxuICB2YXIgcmVwbGFjZW1lbnRRdWV1ZSA9IHByaW1pdGl2ZS5fdGlsZVJlcGxhY2VtZW50UXVldWU7XG4gIHJlcGxhY2VtZW50UXVldWUuaGVhZCA9IHVuZGVmaW5lZDtcbiAgcmVwbGFjZW1lbnRRdWV1ZS50YWlsID0gdW5kZWZpbmVkO1xuICByZXBsYWNlbWVudFF1ZXVlLmNvdW50ID0gMDtcblxuICBjbGVhclRpbGVMb2FkUXVldWUocHJpbWl0aXZlKTtcblxuICAvLyBGcmVlIGFuZCByZWNyZWF0ZSB0aGUgbGV2ZWwgemVybyB0aWxlcy5cbiAgdmFyIGxldmVsWmVyb1RpbGVzID0gcHJpbWl0aXZlLl9sZXZlbFplcm9UaWxlcztcbiAgaWYgKGRlZmluZWQobGV2ZWxaZXJvVGlsZXMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZXZlbFplcm9UaWxlcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHRpbGUgPSBsZXZlbFplcm9UaWxlc1tpXTtcbiAgICAgIHZhciBjdXN0b21EYXRhID0gdGlsZS5jdXN0b21EYXRhO1xuICAgICAgdmFyIGN1c3RvbURhdGFMZW5ndGggPSBjdXN0b21EYXRhLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjdXN0b21EYXRhTGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIGRhdGEgPSBjdXN0b21EYXRhW2pdO1xuICAgICAgICBkYXRhLmxldmVsID0gMDtcbiAgICAgICAgcHJpbWl0aXZlLl9hZGRIZWlnaHRDYWxsYmFja3MucHVzaChkYXRhKTtcbiAgICAgIH1cblxuICAgICAgbGV2ZWxaZXJvVGlsZXNbaV0uZnJlZVJlc291cmNlcygpO1xuICAgIH1cbiAgfVxuXG4gIHByaW1pdGl2ZS5fbGV2ZWxaZXJvVGlsZXMgPSB1bmRlZmluZWQ7XG5cbiAgcHJpbWl0aXZlLl90aWxlUHJvdmlkZXIuY2FuY2VsUmVwcm9qZWN0aW9ucygpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYSBzcGVjaWZpZWQgZnVuY3Rpb24gZm9yIGVhY2gge0BsaW5rIFF1YWR0cmVlVGlsZX0gdGhhdCBpcyBwYXJ0aWFsbHlcbiAqIG9yIGNvbXBsZXRlbHkgbG9hZGVkLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbGVGdW5jdGlvbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGxvYWRlZCB0aWxlLiAgVGhlXG4gKiAgICAgICAgZnVuY3Rpb24gaXMgcGFzc2VkIGEgcmVmZXJlbmNlIHRvIHRoZSB0aWxlIGFzIGl0cyBvbmx5IHBhcmFtZXRlci5cbiAqL1xuUXVhZHRyZWVQcmltaXRpdmUucHJvdG90eXBlLmZvckVhY2hMb2FkZWRUaWxlID0gZnVuY3Rpb24gKHRpbGVGdW5jdGlvbikge1xuICB2YXIgdGlsZSA9IHRoaXMuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLmhlYWQ7XG4gIHdoaWxlIChkZWZpbmVkKHRpbGUpKSB7XG4gICAgaWYgKHRpbGUuc3RhdGUgIT09IFF1YWR0cmVlVGlsZUxvYWRTdGF0ZS5TVEFSVCkge1xuICAgICAgdGlsZUZ1bmN0aW9uKHRpbGUpO1xuICAgIH1cbiAgICB0aWxlID0gdGlsZS5yZXBsYWNlbWVudE5leHQ7XG4gIH1cbn07XG5cbi8qKlxuICogSW52b2tlcyBhIHNwZWNpZmllZCBmdW5jdGlvbiBmb3IgZWFjaCB7QGxpbmsgUXVhZHRyZWVUaWxlfSB0aGF0IHdhcyByZW5kZXJlZFxuICogaW4gdGhlIG1vc3QgcmVjZW50IGZyYW1lLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbGVGdW5jdGlvbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHJlbmRlcmVkIHRpbGUuICBUaGVcbiAqICAgICAgICBmdW5jdGlvbiBpcyBwYXNzZWQgYSByZWZlcmVuY2UgdG8gdGhlIHRpbGUgYXMgaXRzIG9ubHkgcGFyYW1ldGVyLlxuICovXG5RdWFkdHJlZVByaW1pdGl2ZS5wcm90b3R5cGUuZm9yRWFjaFJlbmRlcmVkVGlsZSA9IGZ1bmN0aW9uICh0aWxlRnVuY3Rpb24pIHtcbiAgdmFyIHRpbGVzUmVuZGVyZWQgPSB0aGlzLl90aWxlc1RvUmVuZGVyO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGlsZXNSZW5kZXJlZC5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIHRpbGVGdW5jdGlvbih0aWxlc1JlbmRlcmVkW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiBhIG5ldyB0aWxlIGlzIHJlbmRlcmVkIHRoYXQgY29udGFpbnMgdGhlIGdpdmVuIGNhcnRvZ3JhcGhpYy4gVGhlIG9ubHkgcGFyYW1ldGVyXG4gKiBpcyB0aGUgY2FydGVzaWFuIHBvc2l0aW9uIG9uIHRoZSB0aWxlLlxuICpcbiAqIEBwYXJhbSB7Q2FydG9ncmFwaGljfSBjYXJ0b2dyYXBoaWMgVGhlIGNhcnRvZ3JhcGhpYyBwb3NpdGlvbi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhIG5ldyB0aWxlIGlzIGxvYWRlZCBjb250YWluaW5nIGNhcnRvZ3JhcGhpYy5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGlzIGNhbGxiYWNrIGZyb20gdGhlIHF1YWR0cmVlLlxuICovXG5RdWFkdHJlZVByaW1pdGl2ZS5wcm90b3R5cGUudXBkYXRlSGVpZ2h0ID0gZnVuY3Rpb24gKGNhcnRvZ3JhcGhpYywgY2FsbGJhY2spIHtcbiAgdmFyIHByaW1pdGl2ZSA9IHRoaXM7XG4gIHZhciBvYmplY3QgPSB7XG4gICAgcG9zaXRpb25PbkVsbGlwc29pZFN1cmZhY2U6IHVuZGVmaW5lZCxcbiAgICBwb3NpdGlvbkNhcnRvZ3JhcGhpYzogY2FydG9ncmFwaGljLFxuICAgIGxldmVsOiAtMSxcbiAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gIH07XG5cbiAgb2JqZWN0LnJlbW92ZUZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFkZGVkQ2FsbGJhY2tzID0gcHJpbWl0aXZlLl9hZGRIZWlnaHRDYWxsYmFja3M7XG4gICAgdmFyIGxlbmd0aCA9IGFkZGVkQ2FsbGJhY2tzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoYWRkZWRDYWxsYmFja3NbaV0gPT09IG9iamVjdCkge1xuICAgICAgICBhZGRlZENhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBwcmltaXRpdmUuX3JlbW92ZUhlaWdodENhbGxiYWNrcy5wdXNoKG9iamVjdCk7XG4gIH07XG5cbiAgcHJpbWl0aXZlLl9hZGRIZWlnaHRDYWxsYmFja3MucHVzaChvYmplY3QpO1xuICByZXR1cm4gb2JqZWN0LnJlbW92ZUZ1bmM7XG59O1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIHRpbGUgcHJvdmlkZXIgaW1hZ2VyeSBhbmQgY29udGludWVzIHRvIHByb2Nlc3MgdGhlIHRpbGUgbG9hZCBxdWV1ZS5cbiAqIEBwcml2YXRlXG4gKi9cblF1YWR0cmVlUHJpbWl0aXZlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICBpZiAoZGVmaW5lZCh0aGlzLl90aWxlUHJvdmlkZXIudXBkYXRlKSkge1xuICAgIHRoaXMuX3RpbGVQcm92aWRlci51cGRhdGUoZnJhbWVTdGF0ZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNsZWFyVGlsZUxvYWRRdWV1ZShwcmltaXRpdmUpIHtcbiAgdmFyIGRlYnVnID0gcHJpbWl0aXZlLl9kZWJ1ZztcbiAgZGVidWcubWF4RGVwdGggPSAwO1xuICBkZWJ1Zy5tYXhEZXB0aFZpc2l0ZWQgPSAwO1xuICBkZWJ1Zy50aWxlc1Zpc2l0ZWQgPSAwO1xuICBkZWJ1Zy50aWxlc0N1bGxlZCA9IDA7XG4gIGRlYnVnLnRpbGVzUmVuZGVyZWQgPSAwO1xuICBkZWJ1Zy50aWxlc1dhaXRpbmdGb3JDaGlsZHJlbiA9IDA7XG5cbiAgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlSGlnaC5sZW5ndGggPSAwO1xuICBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0ubGVuZ3RoID0gMDtcbiAgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTG93Lmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdmFsdWVzIGZvciBhIG5ldyByZW5kZXIgZnJhbWUgYW5kIHByZXBhcmUgdGhlIHRpbGUgbG9hZCBxdWV1ZS5cbiAqIEBwcml2YXRlXG4gKi9cblF1YWR0cmVlUHJpbWl0aXZlLnByb3RvdHlwZS5iZWdpbkZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgdmFyIHBhc3NlcyA9IGZyYW1lU3RhdGUucGFzc2VzO1xuICBpZiAoIXBhc3Nlcy5yZW5kZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGhpcy5fdGlsZXNJbnZhbGlkYXRlZCkge1xuICAgIGludmFsaWRhdGVBbGxUaWxlcyh0aGlzKTtcbiAgICB0aGlzLl90aWxlc0ludmFsaWRhdGVkID0gZmFsc2U7XG4gIH1cblxuICAvLyBHZXRzIGNvbW1hbmRzIGZvciBhbnkgdGV4dHVyZSByZS1wcm9qZWN0aW9uc1xuICB0aGlzLl90aWxlUHJvdmlkZXIuaW5pdGlhbGl6ZShmcmFtZVN0YXRlKTtcblxuICBjbGVhclRpbGVMb2FkUXVldWUodGhpcyk7XG5cbiAgaWYgKHRoaXMuX2RlYnVnLnN1c3BlbmRMb2RVcGRhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLl90aWxlUmVwbGFjZW1lbnRRdWV1ZS5tYXJrU3RhcnRPZlJlbmRlckZyYW1lKCk7XG59O1xuXG4vKipcbiAqIFNlbGVjdHMgbmV3IHRpbGVzIHRvIGxvYWQgYmFzZWQgb24gdGhlIGZyYW1lIHN0YXRlIGFuZCBjcmVhdGVzIHJlbmRlciBjb21tYW5kcy5cbiAqIEBwcml2YXRlXG4gKi9cblF1YWR0cmVlUHJpbWl0aXZlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICB2YXIgcGFzc2VzID0gZnJhbWVTdGF0ZS5wYXNzZXM7XG4gIHZhciB0aWxlUHJvdmlkZXIgPSB0aGlzLl90aWxlUHJvdmlkZXI7XG5cbiAgaWYgKHBhc3Nlcy5yZW5kZXIpIHtcbiAgICB0aWxlUHJvdmlkZXIuYmVnaW5VcGRhdGUoZnJhbWVTdGF0ZSk7XG5cbiAgICBzZWxlY3RUaWxlc0ZvclJlbmRlcmluZyh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgICBjcmVhdGVSZW5kZXJDb21tYW5kc0ZvclNlbGVjdGVkVGlsZXModGhpcywgZnJhbWVTdGF0ZSk7XG5cbiAgICB0aWxlUHJvdmlkZXIuZW5kVXBkYXRlKGZyYW1lU3RhdGUpO1xuICB9XG5cbiAgaWYgKHBhc3Nlcy5waWNrICYmIHRoaXMuX3RpbGVzVG9SZW5kZXIubGVuZ3RoID4gMCkge1xuICAgIHRpbGVQcm92aWRlci51cGRhdGVGb3JQaWNrKGZyYW1lU3RhdGUpO1xuICB9XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgbG9hZCBxdWV1ZSBsZW5ndGggaGFzIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgdGltZSB3ZSByYWlzZWQgYSBxdWV1ZSBjaGFuZ2UgZXZlbnQgLSBpZiBzbywgcmFpc2VzXG4gKiBhIG5ldyBjaGFuZ2UgZXZlbnQgYXQgdGhlIGVuZCBvZiB0aGUgcmVuZGVyIGN5Y2xlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdXBkYXRlVGlsZUxvYWRQcm9ncmVzcyhwcmltaXRpdmUsIGZyYW1lU3RhdGUpIHtcbiAgdmFyIGN1cnJlbnRMb2FkUXVldWVMZW5ndGggPVxuICAgIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZUhpZ2gubGVuZ3RoICtcbiAgICBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0ubGVuZ3RoICtcbiAgICBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVMb3cubGVuZ3RoO1xuXG4gIGlmIChcbiAgICBjdXJyZW50TG9hZFF1ZXVlTGVuZ3RoICE9PSBwcmltaXRpdmUuX2xhc3RUaWxlTG9hZFF1ZXVlTGVuZ3RoIHx8XG4gICAgcHJpbWl0aXZlLl90aWxlc0ludmFsaWRhdGVkXG4gICkge1xuICAgIGZyYW1lU3RhdGUuYWZ0ZXJSZW5kZXIucHVzaChcbiAgICAgIEV2ZW50LnByb3RvdHlwZS5yYWlzZUV2ZW50LmJpbmQoXG4gICAgICAgIHByaW1pdGl2ZS5fdGlsZUxvYWRQcm9ncmVzc0V2ZW50LFxuICAgICAgICBjdXJyZW50TG9hZFF1ZXVlTGVuZ3RoXG4gICAgICApXG4gICAgKTtcbiAgICBwcmltaXRpdmUuX2xhc3RUaWxlTG9hZFF1ZXVlTGVuZ3RoID0gY3VycmVudExvYWRRdWV1ZUxlbmd0aDtcbiAgfVxuXG4gIHZhciBkZWJ1ZyA9IHByaW1pdGl2ZS5fZGVidWc7XG4gIGlmIChkZWJ1Zy5lbmFibGVEZWJ1Z091dHB1dCAmJiAhZGVidWcuc3VzcGVuZExvZFVwZGF0ZSkge1xuICAgIGRlYnVnLm1heERlcHRoID0gcHJpbWl0aXZlLl90aWxlc1RvUmVuZGVyLnJlZHVjZShmdW5jdGlvbiAobWF4LCB0aWxlKSB7XG4gICAgICByZXR1cm4gTWF0aC5tYXgobWF4LCB0aWxlLmxldmVsKTtcbiAgICB9LCAtMSk7XG4gICAgZGVidWcudGlsZXNSZW5kZXJlZCA9IHByaW1pdGl2ZS5fdGlsZXNUb1JlbmRlci5sZW5ndGg7XG5cbiAgICBpZiAoXG4gICAgICBkZWJ1Zy50aWxlc1Zpc2l0ZWQgIT09IGRlYnVnLmxhc3RUaWxlc1Zpc2l0ZWQgfHxcbiAgICAgIGRlYnVnLnRpbGVzUmVuZGVyZWQgIT09IGRlYnVnLmxhc3RUaWxlc1JlbmRlcmVkIHx8XG4gICAgICBkZWJ1Zy50aWxlc0N1bGxlZCAhPT0gZGVidWcubGFzdFRpbGVzQ3VsbGVkIHx8XG4gICAgICBkZWJ1Zy5tYXhEZXB0aCAhPT0gZGVidWcubGFzdE1heERlcHRoIHx8XG4gICAgICBkZWJ1Zy50aWxlc1dhaXRpbmdGb3JDaGlsZHJlbiAhPT0gZGVidWcubGFzdFRpbGVzV2FpdGluZ0ZvckNoaWxkcmVuIHx8XG4gICAgICBkZWJ1Zy5tYXhEZXB0aFZpc2l0ZWQgIT09IGRlYnVnLmxhc3RNYXhEZXB0aFZpc2l0ZWRcbiAgICApIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIlZpc2l0ZWQgXCIgK1xuICAgICAgICAgIGRlYnVnLnRpbGVzVmlzaXRlZCArXG4gICAgICAgICAgXCIsIFJlbmRlcmVkOiBcIiArXG4gICAgICAgICAgZGVidWcudGlsZXNSZW5kZXJlZCArXG4gICAgICAgICAgXCIsIEN1bGxlZDogXCIgK1xuICAgICAgICAgIGRlYnVnLnRpbGVzQ3VsbGVkICtcbiAgICAgICAgICBcIiwgTWF4IERlcHRoIFJlbmRlcmVkOiBcIiArXG4gICAgICAgICAgZGVidWcubWF4RGVwdGggK1xuICAgICAgICAgIFwiLCBNYXggRGVwdGggVmlzaXRlZDogXCIgK1xuICAgICAgICAgIGRlYnVnLm1heERlcHRoVmlzaXRlZCArXG4gICAgICAgICAgXCIsIFdhaXRpbmcgZm9yIGNoaWxkcmVuOiBcIiArXG4gICAgICAgICAgZGVidWcudGlsZXNXYWl0aW5nRm9yQ2hpbGRyZW5cbiAgICAgICk7XG5cbiAgICAgIGRlYnVnLmxhc3RUaWxlc1Zpc2l0ZWQgPSBkZWJ1Zy50aWxlc1Zpc2l0ZWQ7XG4gICAgICBkZWJ1Zy5sYXN0VGlsZXNSZW5kZXJlZCA9IGRlYnVnLnRpbGVzUmVuZGVyZWQ7XG4gICAgICBkZWJ1Zy5sYXN0VGlsZXNDdWxsZWQgPSBkZWJ1Zy50aWxlc0N1bGxlZDtcbiAgICAgIGRlYnVnLmxhc3RNYXhEZXB0aCA9IGRlYnVnLm1heERlcHRoO1xuICAgICAgZGVidWcubGFzdFRpbGVzV2FpdGluZ0ZvckNoaWxkcmVuID0gZGVidWcudGlsZXNXYWl0aW5nRm9yQ2hpbGRyZW47XG4gICAgICBkZWJ1Zy5sYXN0TWF4RGVwdGhWaXNpdGVkID0gZGVidWcubWF4RGVwdGhWaXNpdGVkO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGVycmFpbiBoZWlnaHRzLlxuICogQHByaXZhdGVcbiAqL1xuUXVhZHRyZWVQcmltaXRpdmUucHJvdG90eXBlLmVuZEZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgdmFyIHBhc3NlcyA9IGZyYW1lU3RhdGUucGFzc2VzO1xuICBpZiAoIXBhc3Nlcy5yZW5kZXIgfHwgZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuTU9SUEhJTkcpIHtcbiAgICAvLyBPbmx5IHByb2Nlc3MgdGhlIGxvYWQgcXVldWUgZm9yIGEgc2luZ2xlIHBhc3MuXG4gICAgLy8gRG9uJ3QgcHJvY2VzcyB0aGUgbG9hZCBxdWV1ZSBvciB1cGRhdGUgaGVpZ2h0cyBkdXJpbmcgdGhlIG1vcnBoIGZsaWdodHMuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gTG9hZC9jcmVhdGUgcmVzb3VyY2VzIGZvciB0ZXJyYWluIGFuZCBpbWFnZXJ5LiBQcmVwYXJlIHRleHR1cmUgcmUtcHJvamVjdGlvbnMgZm9yIHRoZSBuZXh0IGZyYW1lLlxuICBwcm9jZXNzVGlsZUxvYWRRdWV1ZSh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgdXBkYXRlSGVpZ2h0cyh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgdXBkYXRlVGlsZUxvYWRQcm9ncmVzcyh0aGlzLCBmcmFtZVN0YXRlKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgZmFsc2UuXG4gKiA8YnIgLz48YnIgLz5cbiAqIElmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uXG4gKlxuICogQG1lbWJlcm9mIFF1YWR0cmVlUHJpbWl0aXZlXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqXG4gKiBAc2VlIFF1YWR0cmVlUHJpbWl0aXZlI2Rlc3Ryb3lcbiAqL1xuUXVhZHRyZWVQcmltaXRpdmUucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIERlc3Ryb3lzIHRoZSBXZWJHTCByZXNvdXJjZXMgaGVsZCBieSB0aGlzIG9iamVjdC4gIERlc3Ryb3lpbmcgYW4gb2JqZWN0IGFsbG93cyBmb3IgZGV0ZXJtaW5pc3RpY1xuICogcmVsZWFzZSBvZiBXZWJHTCByZXNvdXJjZXMsIGluc3RlYWQgb2YgcmVseWluZyBvbiB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZGVzdHJveSB0aGlzIG9iamVjdC5cbiAqIDxiciAvPjxiciAvPlxuICogT25jZSBhbiBvYmplY3QgaXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLiAgVGhlcmVmb3JlLFxuICogYXNzaWduIHRoZSByZXR1cm4gdmFsdWUgKDxjb2RlPnVuZGVmaW5lZDwvY29kZT4pIHRvIHRoZSBvYmplY3QgYXMgZG9uZSBpbiB0aGUgZXhhbXBsZS5cbiAqXG4gKiBAbWVtYmVyb2YgUXVhZHRyZWVQcmltaXRpdmVcbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBwcmltaXRpdmUgPSBwcmltaXRpdmUgJiYgcHJpbWl0aXZlLmRlc3Ryb3koKTtcbiAqXG4gKiBAc2VlIFF1YWR0cmVlUHJpbWl0aXZlI2lzRGVzdHJveWVkXG4gKi9cblF1YWR0cmVlUHJpbWl0aXZlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl90aWxlUHJvdmlkZXIgPSB0aGlzLl90aWxlUHJvdmlkZXIgJiYgdGhpcy5fdGlsZVByb3ZpZGVyLmRlc3Ryb3koKTtcbn07XG5cbnZhciBjb21wYXJpc29uUG9pbnQ7XG52YXIgY2VudGVyU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbmZ1bmN0aW9uIGNvbXBhcmVEaXN0YW5jZVRvUG9pbnQoYSwgYikge1xuICB2YXIgY2VudGVyID0gUmVjdGFuZ2xlLmNlbnRlcihhLnJlY3RhbmdsZSwgY2VudGVyU2NyYXRjaCk7XG4gIHZhciBhbG9uID0gY2VudGVyLmxvbmdpdHVkZSAtIGNvbXBhcmlzb25Qb2ludC5sb25naXR1ZGU7XG4gIHZhciBhbGF0ID0gY2VudGVyLmxhdGl0dWRlIC0gY29tcGFyaXNvblBvaW50LmxhdGl0dWRlO1xuXG4gIGNlbnRlciA9IFJlY3RhbmdsZS5jZW50ZXIoYi5yZWN0YW5nbGUsIGNlbnRlclNjcmF0Y2gpO1xuICB2YXIgYmxvbiA9IGNlbnRlci5sb25naXR1ZGUgLSBjb21wYXJpc29uUG9pbnQubG9uZ2l0dWRlO1xuICB2YXIgYmxhdCA9IGNlbnRlci5sYXRpdHVkZSAtIGNvbXBhcmlzb25Qb2ludC5sYXRpdHVkZTtcblxuICByZXR1cm4gYWxvbiAqIGFsb24gKyBhbGF0ICogYWxhdCAtIChibG9uICogYmxvbiArIGJsYXQgKiBibGF0KTtcbn1cblxudmFyIGNhbWVyYU9yaWdpblNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHJvb3RUcmF2ZXJzYWxEZXRhaWxzID0gW107XG5cbmZ1bmN0aW9uIHNlbGVjdFRpbGVzRm9yUmVuZGVyaW5nKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSkge1xuICB2YXIgZGVidWcgPSBwcmltaXRpdmUuX2RlYnVnO1xuICBpZiAoZGVidWcuc3VzcGVuZExvZFVwZGF0ZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIENsZWFyIHRoZSByZW5kZXIgbGlzdC5cbiAgdmFyIHRpbGVzVG9SZW5kZXIgPSBwcmltaXRpdmUuX3RpbGVzVG9SZW5kZXI7XG4gIHRpbGVzVG9SZW5kZXIubGVuZ3RoID0gMDtcblxuICAvLyBXZSBjYW4ndCByZW5kZXIgYW55dGhpbmcgYmVmb3JlIHRoZSBsZXZlbCB6ZXJvIHRpbGVzIGV4aXN0LlxuICB2YXIgaTtcbiAgdmFyIHRpbGVQcm92aWRlciA9IHByaW1pdGl2ZS5fdGlsZVByb3ZpZGVyO1xuICBpZiAoIWRlZmluZWQocHJpbWl0aXZlLl9sZXZlbFplcm9UaWxlcykpIHtcbiAgICBpZiAodGlsZVByb3ZpZGVyLnJlYWR5KSB7XG4gICAgICB2YXIgdGlsaW5nU2NoZW1lID0gdGlsZVByb3ZpZGVyLnRpbGluZ1NjaGVtZTtcbiAgICAgIHByaW1pdGl2ZS5fbGV2ZWxaZXJvVGlsZXMgPSBRdWFkdHJlZVRpbGUuY3JlYXRlTGV2ZWxaZXJvVGlsZXMoXG4gICAgICAgIHRpbGluZ1NjaGVtZVxuICAgICAgKTtcbiAgICAgIHZhciBudW1iZXJPZlJvb3RUaWxlcyA9IHByaW1pdGl2ZS5fbGV2ZWxaZXJvVGlsZXMubGVuZ3RoO1xuICAgICAgaWYgKHJvb3RUcmF2ZXJzYWxEZXRhaWxzLmxlbmd0aCA8IG51bWJlck9mUm9vdFRpbGVzKSB7XG4gICAgICAgIHJvb3RUcmF2ZXJzYWxEZXRhaWxzID0gbmV3IEFycmF5KG51bWJlck9mUm9vdFRpbGVzKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bWJlck9mUm9vdFRpbGVzOyArK2kpIHtcbiAgICAgICAgICBpZiAocm9vdFRyYXZlcnNhbERldGFpbHNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcm9vdFRyYXZlcnNhbERldGFpbHNbaV0gPSBuZXcgVHJhdmVyc2FsRGV0YWlscygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOb3RoaW5nIHRvIGRvIHVudGlsIHRoZSBwcm92aWRlciBpcyByZWFkeS5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBwcmltaXRpdmUuX29jY2x1ZGVycy5lbGxpcHNvaWQuY2FtZXJhUG9zaXRpb24gPSBmcmFtZVN0YXRlLmNhbWVyYS5wb3NpdGlvbldDO1xuXG4gIHZhciB0aWxlO1xuICB2YXIgbGV2ZWxaZXJvVGlsZXMgPSBwcmltaXRpdmUuX2xldmVsWmVyb1RpbGVzO1xuICB2YXIgb2NjbHVkZXJzID0gbGV2ZWxaZXJvVGlsZXMubGVuZ3RoID4gMSA/IHByaW1pdGl2ZS5fb2NjbHVkZXJzIDogdW5kZWZpbmVkO1xuXG4gIC8vIFNvcnQgdGhlIGxldmVsIHplcm8gdGlsZXMgYnkgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciB0byB0aGUgY2FtZXJhLlxuICAvLyBUaGUgbGV2ZWwgemVybyB0aWxlcyBhcmVuJ3QgbmVjZXNzYXJpbHkgYSBuaWNlIG5lYXQgcXVhZCwgc28gd2UgY2FuJ3QgdXNlIHRoZVxuICAvLyBxdWFkdHJlZSBvcmRlcmluZyB3ZSB1c2UgZWxzZXdoZXJlIGluIHRoZSB0cmVlXG4gIGNvbXBhcmlzb25Qb2ludCA9IGZyYW1lU3RhdGUuY2FtZXJhLnBvc2l0aW9uQ2FydG9ncmFwaGljO1xuICBsZXZlbFplcm9UaWxlcy5zb3J0KGNvbXBhcmVEaXN0YW5jZVRvUG9pbnQpO1xuXG4gIHZhciBjdXN0b21EYXRhQWRkZWQgPSBwcmltaXRpdmUuX2FkZEhlaWdodENhbGxiYWNrcztcbiAgdmFyIGN1c3RvbURhdGFSZW1vdmVkID0gcHJpbWl0aXZlLl9yZW1vdmVIZWlnaHRDYWxsYmFja3M7XG4gIHZhciBmcmFtZU51bWJlciA9IGZyYW1lU3RhdGUuZnJhbWVOdW1iZXI7XG5cbiAgdmFyIGxlbjtcbiAgaWYgKGN1c3RvbURhdGFBZGRlZC5sZW5ndGggPiAwIHx8IGN1c3RvbURhdGFSZW1vdmVkLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBsZXZlbFplcm9UaWxlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGlsZSA9IGxldmVsWmVyb1RpbGVzW2ldO1xuICAgICAgdGlsZS5fdXBkYXRlQ3VzdG9tRGF0YShmcmFtZU51bWJlciwgY3VzdG9tRGF0YUFkZGVkLCBjdXN0b21EYXRhUmVtb3ZlZCk7XG4gICAgfVxuXG4gICAgY3VzdG9tRGF0YUFkZGVkLmxlbmd0aCA9IDA7XG4gICAgY3VzdG9tRGF0YVJlbW92ZWQubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHZhciBjYW1lcmEgPSBmcmFtZVN0YXRlLmNhbWVyYTtcblxuICBwcmltaXRpdmUuX2NhbWVyYVBvc2l0aW9uQ2FydG9ncmFwaGljID0gY2FtZXJhLnBvc2l0aW9uQ2FydG9ncmFwaGljO1xuICB2YXIgY2FtZXJhRnJhbWVPcmlnaW4gPSBNYXRyaXg0LmdldFRyYW5zbGF0aW9uKFxuICAgIGNhbWVyYS50cmFuc2Zvcm0sXG4gICAgY2FtZXJhT3JpZ2luU2NyYXRjaFxuICApO1xuICBwcmltaXRpdmUuX2NhbWVyYVJlZmVyZW5jZUZyYW1lT3JpZ2luQ2FydG9ncmFwaGljID0gcHJpbWl0aXZlLnRpbGVQcm92aWRlci50aWxpbmdTY2hlbWUuZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgIGNhbWVyYUZyYW1lT3JpZ2luLFxuICAgIHByaW1pdGl2ZS5fY2FtZXJhUmVmZXJlbmNlRnJhbWVPcmlnaW5DYXJ0b2dyYXBoaWNcbiAgKTtcblxuICAvLyBUcmF2ZXJzZSBpbiBkZXB0aC1maXJzdCwgbmVhci10by1mYXIgb3JkZXIuXG4gIGZvciAoaSA9IDAsIGxlbiA9IGxldmVsWmVyb1RpbGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdGlsZSA9IGxldmVsWmVyb1RpbGVzW2ldO1xuICAgIHByaW1pdGl2ZS5fdGlsZVJlcGxhY2VtZW50UXVldWUubWFya1RpbGVSZW5kZXJlZCh0aWxlKTtcbiAgICBpZiAoIXRpbGUucmVuZGVyYWJsZSkge1xuICAgICAgcXVldWVUaWxlTG9hZChwcmltaXRpdmUsIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZUhpZ2gsIHRpbGUsIGZyYW1lU3RhdGUpO1xuICAgICAgKytkZWJ1Zy50aWxlc1dhaXRpbmdGb3JDaGlsZHJlbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlzaXRJZlZpc2libGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgdGlsZSxcbiAgICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICBvY2NsdWRlcnMsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICByb290VHJhdmVyc2FsRGV0YWlsc1tpXVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcmltaXRpdmUuX2xhc3RTZWxlY3Rpb25GcmFtZU51bWJlciA9IGZyYW1lTnVtYmVyO1xufVxuXG5mdW5jdGlvbiBxdWV1ZVRpbGVMb2FkKHByaW1pdGl2ZSwgcXVldWUsIHRpbGUsIGZyYW1lU3RhdGUpIHtcbiAgaWYgKCF0aWxlLm5lZWRzTG9hZGluZykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChwcmltaXRpdmUudGlsZVByb3ZpZGVyLmNvbXB1dGVUaWxlTG9hZFByaW9yaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aWxlLl9sb2FkUHJpb3JpdHkgPSBwcmltaXRpdmUudGlsZVByb3ZpZGVyLmNvbXB1dGVUaWxlTG9hZFByaW9yaXR5KFxuICAgICAgdGlsZSxcbiAgICAgIGZyYW1lU3RhdGVcbiAgICApO1xuICB9XG4gIHF1ZXVlLnB1c2godGlsZSk7XG59XG5cbi8qKlxuICogVHJhY2tzIGRldGFpbHMgb2YgdHJhdmVyc2luZyBhIHRpbGUgd2hpbGUgc2VsZWN0aW5nIHRpbGVzIGZvciByZW5kZXJpbmcuXG4gKiBAYWxpYXMgVHJhdmVyc2FsRGV0YWlsc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBUcmF2ZXJzYWxEZXRhaWxzKCkge1xuICAvKipcbiAgICogVHJ1ZSBpZiBhbGwgc2VsZWN0ZWQgKGkuZS4gbm90IGN1bGxlZCBvciByZWZpbmVkKSB0aWxlcyBpbiB0aGlzIHRpbGUncyBzdWJ0cmVlXG4gICAqIGFyZSByZW5kZXJhYmxlLiBJZiB0aGUgc3VidHJlZSBpcyByZW5kZXJhYmxlLCB3ZSdsbCByZW5kZXIgaXQ7IG5vIGRyYW1hLlxuICAgKi9cbiAgdGhpcy5hbGxBcmVSZW5kZXJhYmxlID0gdHJ1ZTtcblxuICAvKipcbiAgICogVHJ1ZSBpZiBhbnkgdGlsZXMgaW4gdGhpcyB0aWxlJ3Mgc3VidHJlZSB3ZXJlIHJlbmRlcmVkIGxhc3QgZnJhbWUuIElmIGFueVxuICAgKiB3ZXJlLCB3ZSBtdXN0IHJlbmRlciB0aGUgc3VidHJlZSByYXRoZXIgdGhhbiB0aGlzIHRpbGUsIGJlY2F1c2UgcmVuZGVyaW5nXG4gICAqIHRoaXMgdGlsZSB3b3VsZCBjYXVzZSBkZXRhaWwgdG8gdmFuaXNoIHRoYXQgd2FzIHZpc2libGUgbGFzdCBmcmFtZSwgYW5kXG4gICAqIHRoYXQncyBubyBnb29kLlxuICAgKi9cbiAgdGhpcy5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPSBmYWxzZTtcblxuICAvKipcbiAgICogQ291bnRzIHRoZSBudW1iZXIgb2Ygc2VsZWN0ZWQgdGlsZXMgaW4gdGhpcyB0aWxlJ3Mgc3VidHJlZSB0aGF0IGFyZVxuICAgKiBub3QgeWV0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGJlY2F1c2UgdGhleSBuZWVkIG1vcmUgbG9hZGluZy4gTm90ZSB0aGF0XG4gICAqIHRoaXMgdmFsdWUgd2lsbCBfbm90XyBuZWNlc3NhcmlseSBiZSB6ZXJvIHdoZW5cbiAgICoge0BsaW5rIFRyYXZlcnNhbERldGFpbHMjYWxsQXJlUmVuZGVyYWJsZX0gaXMgdHJ1ZSwgZm9yIHN1YnRsZSByZWFzb25zLlxuICAgKiBXaGVuIHtAbGluayBUcmF2ZXJzYWxEZXRhaWxzI2FsbEFyZVJlbmRlcmFibGV9IGFuZFxuICAgKiB7QGxpbmsgVHJhdmVyc2FsRGV0YWlscyNhbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWV9IGFyZSBib3RoIGZhbHNlLCB3ZVxuICAgKiB3aWxsIHJlbmRlciB0aGlzIHRpbGUgaW5zdGVhZCBvZiBhbnkgdGlsZXMgaW4gaXRzIHN1YnRyZWUgYW5kXG4gICAqIHRoZSBgYWxsQXJlUmVuZGVyYWJsZWAgdmFsdWUgZm9yIHRoaXMgdGlsZSB3aWxsIHJlZmxlY3Qgb25seSB3aGV0aGVyIF90aGlzX1xuICAgKiB0aWxlIGlzIHJlbmRlcmFibGUuIFRoZSBgbm90WWV0UmVuZGVyYWJsZUNvdW50YCB2YWx1ZSwgaG93ZXZlciwgd2lsbCBzdGlsbFxuICAgKiByZWZsZWN0IHRoZSB0b3RhbCBudW1iZXIgb2YgdGlsZXMgdGhhdCB3ZSBhcmUgd2FpdGluZyBvbiwgaW5jbHVkaW5nIHRoZVxuICAgKiBvbmVzIHRoYXQgd2UncmUgbm90IHJlbmRlcmluZy4gYG5vdFlldFJlbmRlcmFibGVDb3VudGAgaXMgb25seSByZXNldFxuICAgKiB3aGVuIGEgc3VidHJlZSBpcyByZW1vdmVkIGZyb20gdGhlIHJlbmRlciBxdWV1ZSBiZWNhdXNlIHRoZVxuICAgKiBgbm90WWV0UmVuZGVyYWJsZUNvdW50YCBleGNlZWRzIHRoZVxuICAgKiB7QGxpbmsgUXVhZHRyZWVQcmltaXRpdmUjbG9hZGluZ0Rlc2NlbmRhbnRMaW1pdH0uXG4gICAqL1xuICB0aGlzLm5vdFlldFJlbmRlcmFibGVDb3VudCA9IDA7XG59XG5cbmZ1bmN0aW9uIFRyYXZlcnNhbFF1YWREZXRhaWxzKCkge1xuICB0aGlzLnNvdXRod2VzdCA9IG5ldyBUcmF2ZXJzYWxEZXRhaWxzKCk7XG4gIHRoaXMuc291dGhlYXN0ID0gbmV3IFRyYXZlcnNhbERldGFpbHMoKTtcbiAgdGhpcy5ub3J0aHdlc3QgPSBuZXcgVHJhdmVyc2FsRGV0YWlscygpO1xuICB0aGlzLm5vcnRoZWFzdCA9IG5ldyBUcmF2ZXJzYWxEZXRhaWxzKCk7XG59XG5cblRyYXZlcnNhbFF1YWREZXRhaWxzLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICB2YXIgc291dGh3ZXN0ID0gdGhpcy5zb3V0aHdlc3Q7XG4gIHZhciBzb3V0aGVhc3QgPSB0aGlzLnNvdXRoZWFzdDtcbiAgdmFyIG5vcnRod2VzdCA9IHRoaXMubm9ydGh3ZXN0O1xuICB2YXIgbm9ydGhlYXN0ID0gdGhpcy5ub3J0aGVhc3Q7XG5cbiAgcmVzdWx0LmFsbEFyZVJlbmRlcmFibGUgPVxuICAgIHNvdXRod2VzdC5hbGxBcmVSZW5kZXJhYmxlICYmXG4gICAgc291dGhlYXN0LmFsbEFyZVJlbmRlcmFibGUgJiZcbiAgICBub3J0aHdlc3QuYWxsQXJlUmVuZGVyYWJsZSAmJlxuICAgIG5vcnRoZWFzdC5hbGxBcmVSZW5kZXJhYmxlO1xuICByZXN1bHQuYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lID1cbiAgICBzb3V0aHdlc3QuYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lIHx8XG4gICAgc291dGhlYXN0LmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSB8fFxuICAgIG5vcnRod2VzdC5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgfHxcbiAgICBub3J0aGVhc3QuYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lO1xuICByZXN1bHQubm90WWV0UmVuZGVyYWJsZUNvdW50ID1cbiAgICBzb3V0aHdlc3Qubm90WWV0UmVuZGVyYWJsZUNvdW50ICtcbiAgICBzb3V0aGVhc3Qubm90WWV0UmVuZGVyYWJsZUNvdW50ICtcbiAgICBub3J0aHdlc3Qubm90WWV0UmVuZGVyYWJsZUNvdW50ICtcbiAgICBub3J0aGVhc3Qubm90WWV0UmVuZGVyYWJsZUNvdW50O1xufTtcblxudmFyIHRyYXZlcnNhbFF1YWRzQnlMZXZlbCA9IG5ldyBBcnJheSgzMSk7IC8vIGxldmVsIDMwIHRpbGVzIGFyZSB+MmNtIHdpZGUgYXQgdGhlIGVxdWF0b3IsIHNob3VsZCBiZSBnb29kIGVub3VnaC5cbmZvciAodmFyIGkgPSAwOyBpIDwgdHJhdmVyc2FsUXVhZHNCeUxldmVsLmxlbmd0aDsgKytpKSB7XG4gIHRyYXZlcnNhbFF1YWRzQnlMZXZlbFtpXSA9IG5ldyBUcmF2ZXJzYWxRdWFkRGV0YWlscygpO1xufVxuXG4vKipcbiAqIFZpc2l0cyBhIHRpbGUgZm9yIHBvc3NpYmxlIHJlbmRlcmluZy4gV2hlbiB3ZSBjYWxsIHRoaXMgZnVuY3Rpb24gd2l0aCBhIHRpbGU6XG4gKlxuICogICAgKiB0aGUgdGlsZSBoYXMgYmVlbiBkZXRlcm1pbmVkIHRvIGJlIHZpc2libGUgKHBvc3NpYmx5IGJhc2VkIG9uIGEgYm91bmRpbmcgdm9sdW1lIHRoYXQgaXMgbm90IHZlcnkgdGlnaHQtZml0dGluZylcbiAqICAgICogaXRzIHBhcmVudCB0aWxlIGRvZXMgX25vdF8gbWVldCB0aGUgU1NFICh1bmxlc3MgYW5jZXN0b3JNZWV0c1NzZT10cnVlLCBzZWUgY29tbWVudHMgYmVsb3cpXG4gKiAgICAqIHRoZSB0aWxlIG1heSBvciBtYXkgbm90IGJlIHJlbmRlcmFibGVcbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7UHJpbWl0aXZlfSBwcmltaXRpdmUgVGhlIFF1YWR0cmVlUHJpbWl0aXZlLlxuICogQHBhcmFtIHtGcmFtZVN0YXRlfSBmcmFtZVN0YXRlIFRoZSBmcmFtZSBzdGF0ZS5cbiAqIEBwYXJhbSB7UXVhZHRyZWVUaWxlfSB0aWxlIFRoZSB0aWxlIHRvIHZpc2l0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFuY2VzdG9yTWVldHNTc2UgVHJ1ZSBpZiBhIHRpbGUgaGlnaGVyIGluIHRoZSB0aWxlIHRyZWUgYWxyZWFkeSBtZXQgdGhlIFNTRSBhbmQgd2UncmUgcmVmaW5pbmcgZnVydGhlciBvbmx5XG4gKiAgICAgICAgICAgICAgICAgIHRvIG1haW50YWluIGRldGFpbCB3aGlsZSB0aGF0IGhpZ2hlciB0aWxlIGxvYWRzLlxuICogQHBhcmFtIHtUcmF2ZXJzYWxEZXRhaWxzfSB0cmF2ZXJhbERldGFpbHMgT24gcmV0dXJuLCBwb3B1bGF0ZWQgd2l0aCBkZXRhaWxzIG9mIGhvdyB0aGUgdHJhdmVyc2FsIG9mIHRoaXMgdGlsZSB3ZW50LlxuICovXG5mdW5jdGlvbiB2aXNpdFRpbGUoXG4gIHByaW1pdGl2ZSxcbiAgZnJhbWVTdGF0ZSxcbiAgdGlsZSxcbiAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgdHJhdmVyc2FsRGV0YWlsc1xuKSB7XG4gIHZhciBkZWJ1ZyA9IHByaW1pdGl2ZS5fZGVidWc7XG5cbiAgKytkZWJ1Zy50aWxlc1Zpc2l0ZWQ7XG5cbiAgcHJpbWl0aXZlLl90aWxlUmVwbGFjZW1lbnRRdWV1ZS5tYXJrVGlsZVJlbmRlcmVkKHRpbGUpO1xuICB0aWxlLl91cGRhdGVDdXN0b21EYXRhKGZyYW1lU3RhdGUuZnJhbWVOdW1iZXIpO1xuXG4gIGlmICh0aWxlLmxldmVsID4gZGVidWcubWF4RGVwdGhWaXNpdGVkKSB7XG4gICAgZGVidWcubWF4RGVwdGhWaXNpdGVkID0gdGlsZS5sZXZlbDtcbiAgfVxuXG4gIHZhciBtZWV0c1NzZSA9XG4gICAgc2NyZWVuU3BhY2VFcnJvcihwcmltaXRpdmUsIGZyYW1lU3RhdGUsIHRpbGUpIDxcbiAgICBwcmltaXRpdmUubWF4aW11bVNjcmVlblNwYWNlRXJyb3I7XG5cbiAgdmFyIHNvdXRod2VzdENoaWxkID0gdGlsZS5zb3V0aHdlc3RDaGlsZDtcbiAgdmFyIHNvdXRoZWFzdENoaWxkID0gdGlsZS5zb3V0aGVhc3RDaGlsZDtcbiAgdmFyIG5vcnRod2VzdENoaWxkID0gdGlsZS5ub3J0aHdlc3RDaGlsZDtcbiAgdmFyIG5vcnRoZWFzdENoaWxkID0gdGlsZS5ub3J0aGVhc3RDaGlsZDtcblxuICB2YXIgbGFzdEZyYW1lID0gcHJpbWl0aXZlLl9sYXN0U2VsZWN0aW9uRnJhbWVOdW1iZXI7XG4gIHZhciBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPVxuICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9PT0gbGFzdEZyYW1lXG4gICAgICA/IHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRcbiAgICAgIDogVGlsZVNlbGVjdGlvblJlc3VsdC5OT05FO1xuXG4gIHZhciB0aWxlUHJvdmlkZXIgPSBwcmltaXRpdmUudGlsZVByb3ZpZGVyO1xuXG4gIGlmIChtZWV0c1NzZSB8fCBhbmNlc3Rvck1lZXRzU3NlKSB7XG4gICAgLy8gVGhpcyB0aWxlIChvciBhbiBhbmNlc3RvcikgaXMgdGhlIG9uZSB3ZSB3YW50IHRvIHJlbmRlciB0aGlzIGZyYW1lLCBidXQgd2UnbGwgZG8gZGlmZmVyZW50IHRoaW5ncyBkZXBlbmRpbmdcbiAgICAvLyBvbiB0aGUgc3RhdGUgb2YgdGhpcyB0aWxlIGFuZCBvbiB3aGF0IHdlIGRpZCBfbGFzdF8gZnJhbWUuXG5cbiAgICAvLyBXZSBjYW4gcmVuZGVyIGl0IGlmIF9hbnlfIG9mIHRoZSBmb2xsb3dpbmcgYXJlIHRydWU6XG4gICAgLy8gMS4gV2UgcmVuZGVyZWQgaXQgKG9yIGtpY2tlZCBpdCkgbGFzdCBmcmFtZS5cbiAgICAvLyAyLiBUaGlzIHRpbGUgd2FzIGN1bGxlZCBsYXN0IGZyYW1lLCBvciBpdCB3YXNuJ3QgZXZlbiB2aXNpdGVkIGJlY2F1c2UgYW4gYW5jZXN0b3Igd2FzIGN1bGxlZC5cbiAgICAvLyAzLiBUaGUgdGlsZSBpcyBjb21wbGV0ZWx5IGRvbmUgbG9hZGluZy5cbiAgICAvLyA0LiBhKSBUZXJyYWluIGlzIHJlYWR5LCBhbmRcbiAgICAvLyAgICBiKSBBbGwgbmVjZXNzYXJ5IGltYWdlcnkgaXMgcmVhZHkuIE5lY2Vzc2FyeSBpbWFnZXJ5IGlzIGltYWdlcnkgdGhhdCB3YXMgcmVuZGVyZWQgd2l0aCB0aGlzIHRpbGVcbiAgICAvLyAgICAgICBvciBhbnkgZGVzY2VuZGFudHMgbGFzdCBmcmFtZS4gU3VjaCBpbWFnZXJ5IGlzIHJlcXVpcmVkIGJlY2F1c2UgcmVuZGVyaW5nIHRoaXMgdGlsZSB3aXRob3V0XG4gICAgLy8gICAgICAgaXQgd291bGQgY2F1c2UgZGV0YWlsIHRvIGRpc2FwcGVhci5cbiAgICAvL1xuICAgIC8vIERldGVybWluaW5nIGNvbmRpdGlvbiA0IGlzIG1vcmUgZXhwZW5zaXZlLCBzbyB3ZSBjaGVjayB0aGUgb3RoZXJzIGZpcnN0LlxuICAgIC8vXG4gICAgLy8gTm90ZSB0aGF0IGV2ZW4gaWYgd2UgZGVjaWRlIHRvIHJlbmRlciBhIHRpbGUgaGVyZSwgaXQgbWF5IGxhdGVyIGdldCBcImtpY2tlZFwiIGluIGZhdm9yIG9mIGFuIGFuY2VzdG9yLlxuXG4gICAgdmFyIG9uZVJlbmRlcmVkTGFzdEZyYW1lID1cbiAgICAgIFRpbGVTZWxlY3Rpb25SZXN1bHQub3JpZ2luYWxSZXN1bHQobGFzdEZyYW1lU2VsZWN0aW9uUmVzdWx0KSA9PT1cbiAgICAgIFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQ7XG4gICAgdmFyIHR3b0N1bGxlZE9yTm90VmlzaXRlZCA9XG4gICAgICBUaWxlU2VsZWN0aW9uUmVzdWx0Lm9yaWdpbmFsUmVzdWx0KGxhc3RGcmFtZVNlbGVjdGlvblJlc3VsdCkgPT09XG4gICAgICAgIFRpbGVTZWxlY3Rpb25SZXN1bHQuQ1VMTEVEIHx8XG4gICAgICBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuTk9ORTtcbiAgICB2YXIgdGhyZWVDb21wbGV0ZWx5TG9hZGVkID0gdGlsZS5zdGF0ZSA9PT0gUXVhZHRyZWVUaWxlTG9hZFN0YXRlLkRPTkU7XG5cbiAgICB2YXIgcmVuZGVyYWJsZSA9XG4gICAgICBvbmVSZW5kZXJlZExhc3RGcmFtZSB8fCB0d29DdWxsZWRPck5vdFZpc2l0ZWQgfHwgdGhyZWVDb21wbGV0ZWx5TG9hZGVkO1xuXG4gICAgaWYgKCFyZW5kZXJhYmxlKSB7XG4gICAgICAvLyBDaGVjayB0aGUgbW9yZSBleHBlbnNpdmUgY29uZGl0aW9uIDQgYWJvdmUuIFRoaXMgcmVxdWlyZXMgZGV0YWlscyBvZiB0aGUgdGhpbmdcbiAgICAgIC8vIHdlJ3JlIHJlbmRlcmluZyAoZS5nLiB0aGUgZ2xvYmUgc3VyZmFjZSksIHNvIGRlbGVnYXRlIGl0IHRvIHRoZSB0aWxlIHByb3ZpZGVyLlxuICAgICAgaWYgKGRlZmluZWQodGlsZVByb3ZpZGVyLmNhblJlbmRlcldpdGhvdXRMb3NpbmdEZXRhaWwpKSB7XG4gICAgICAgIHJlbmRlcmFibGUgPSB0aWxlUHJvdmlkZXIuY2FuUmVuZGVyV2l0aG91dExvc2luZ0RldGFpbCh0aWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVuZGVyYWJsZSkge1xuICAgICAgLy8gT25seSBsb2FkIHRoaXMgdGlsZSBpZiBpdCAobm90IGp1c3QgYW4gYW5jZXN0b3IpIG1lZXRzIHRoZSBTU0UuXG4gICAgICBpZiAobWVldHNTc2UpIHtcbiAgICAgICAgcXVldWVUaWxlTG9hZChcbiAgICAgICAgICBwcmltaXRpdmUsXG4gICAgICAgICAgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTWVkaXVtLFxuICAgICAgICAgIHRpbGUsXG4gICAgICAgICAgZnJhbWVTdGF0ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYWRkVGlsZVRvUmVuZGVyTGlzdChwcmltaXRpdmUsIHRpbGUpO1xuXG4gICAgICB0cmF2ZXJzYWxEZXRhaWxzLmFsbEFyZVJlbmRlcmFibGUgPSB0aWxlLnJlbmRlcmFibGU7XG4gICAgICB0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSA9XG4gICAgICAgIGxhc3RGcmFtZVNlbGVjdGlvblJlc3VsdCA9PT0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcbiAgICAgIHRyYXZlcnNhbERldGFpbHMubm90WWV0UmVuZGVyYWJsZUNvdW50ID0gdGlsZS5yZW5kZXJhYmxlID8gMCA6IDE7XG5cbiAgICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9IGZyYW1lU3RhdGUuZnJhbWVOdW1iZXI7XG4gICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcblxuICAgICAgaWYgKCF0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSkge1xuICAgICAgICAvLyBUaWxlIGlzIG5ld2x5LXJlbmRlcmVkIHRoaXMgZnJhbWUsIHNvIHVwZGF0ZSBpdHMgaGVpZ2h0cy5cbiAgICAgICAgcHJpbWl0aXZlLl90aWxlVG9VcGRhdGVIZWlnaHRzLnB1c2godGlsZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UsIHdlIGNhbid0IHJlbmRlciB0aGlzIHRpbGUgKG9yIGl0cyBmaWxsKSBiZWNhdXNlIGRvaW5nIHNvIHdvdWxkIGNhdXNlIGRldGFpbCB0byBkaXNhcHBlYXJcbiAgICAvLyB0aGF0IHdhcyB2aXNpYmxlIGxhc3QgZnJhbWUuIEluc3RlYWQsIGtlZXAgcmVuZGVyaW5nIGFueSBzdGlsbC12aXNpYmxlIGRlc2NlbmRhbnRzIHRoYXQgd2VyZSByZW5kZXJlZFxuICAgIC8vIGxhc3QgZnJhbWUgYW5kIHJlbmRlciBmaWxscyBmb3IgbmV3bHktdmlzaWJsZSBkZXNjZW5kYW50cy4gRS5nLiBpZiB3ZSB3ZXJlIHJlbmRlcmluZyBsZXZlbCAxNSBsYXN0XG4gICAgLy8gZnJhbWUgYnV0IHRoaXMgZnJhbWUgd2Ugd2FudCBsZXZlbCAxNCBhbmQgdGhlIGNsb3Nlc3QgcmVuZGVyYWJsZSBsZXZlbCA8PSAxNCBpcyAwLCByZW5kZXJpbmcgbGV2ZWxcbiAgICAvLyB6ZXJvIHdvdWxkIGJlIHByZXR0eSBqYXJyaW5nIHNvIGluc3RlYWQgd2Uga2VlcCByZW5kZXJpbmcgbGV2ZWwgMTUgZXZlbiB0aG91Z2ggaXRzIFNTRSBpcyBiZXR0ZXJcbiAgICAvLyB0aGFuIHJlcXVpcmVkLiBTbyBmYWxsIHRocm91Z2ggdG8gY29udGludWUgdHJhdmVyc2FsLi4uXG4gICAgYW5jZXN0b3JNZWV0c1NzZSA9IHRydWU7XG5cbiAgICAvLyBMb2FkIHRoaXMgYmxvY2tlciB0aWxlIHdpdGggaGlnaCBwcmlvcml0eSwgYnV0IG9ubHkgaWYgdGhpcyB0aWxlIChub3QganVzdCBhbiBhbmNlc3RvcikgbWVldHMgdGhlIFNTRS5cbiAgICBpZiAobWVldHNTc2UpIHtcbiAgICAgIHF1ZXVlVGlsZUxvYWQocHJpbWl0aXZlLCBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVIaWdoLCB0aWxlLCBmcmFtZVN0YXRlKTtcbiAgICB9XG4gIH1cblxuICBpZiAodGlsZVByb3ZpZGVyLmNhblJlZmluZSh0aWxlKSkge1xuICAgIHZhciBhbGxBcmVVcHNhbXBsZWQgPVxuICAgICAgc291dGh3ZXN0Q2hpbGQudXBzYW1wbGVkRnJvbVBhcmVudCAmJlxuICAgICAgc291dGhlYXN0Q2hpbGQudXBzYW1wbGVkRnJvbVBhcmVudCAmJlxuICAgICAgbm9ydGh3ZXN0Q2hpbGQudXBzYW1wbGVkRnJvbVBhcmVudCAmJlxuICAgICAgbm9ydGhlYXN0Q2hpbGQudXBzYW1wbGVkRnJvbVBhcmVudDtcblxuICAgIGlmIChhbGxBcmVVcHNhbXBsZWQpIHtcbiAgICAgIC8vIE5vIHBvaW50IGluIHJlbmRlcmluZyB0aGUgY2hpbGRyZW4gYmVjYXVzZSB0aGV5J3JlIGFsbCB1cHNhbXBsZWQuICBSZW5kZXIgdGhpcyB0aWxlIGluc3RlYWQuXG4gICAgICBhZGRUaWxlVG9SZW5kZXJMaXN0KHByaW1pdGl2ZSwgdGlsZSk7XG5cbiAgICAgIC8vIFJlbmRlcmVkIHRpbGUgdGhhdCdzIG5vdCB3YWl0aW5nIG9uIGNoaWxkcmVuIGxvYWRzIHdpdGggbWVkaXVtIHByaW9yaXR5LlxuICAgICAgcXVldWVUaWxlTG9hZChcbiAgICAgICAgcHJpbWl0aXZlLFxuICAgICAgICBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0sXG4gICAgICAgIHRpbGUsXG4gICAgICAgIGZyYW1lU3RhdGVcbiAgICAgICk7XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCB1bmxvYWQgdGhlIGNoaWxkcmVuIGFuZCBmb3JnZXQgdGhleSdyZSB1cHNhbXBsZWQuXG4gICAgICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLm1hcmtUaWxlUmVuZGVyZWQoc291dGh3ZXN0Q2hpbGQpO1xuICAgICAgcHJpbWl0aXZlLl90aWxlUmVwbGFjZW1lbnRRdWV1ZS5tYXJrVGlsZVJlbmRlcmVkKHNvdXRoZWFzdENoaWxkKTtcbiAgICAgIHByaW1pdGl2ZS5fdGlsZVJlcGxhY2VtZW50UXVldWUubWFya1RpbGVSZW5kZXJlZChub3J0aHdlc3RDaGlsZCk7XG4gICAgICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLm1hcmtUaWxlUmVuZGVyZWQobm9ydGhlYXN0Q2hpbGQpO1xuXG4gICAgICB0cmF2ZXJzYWxEZXRhaWxzLmFsbEFyZVJlbmRlcmFibGUgPSB0aWxlLnJlbmRlcmFibGU7XG4gICAgICB0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSA9XG4gICAgICAgIGxhc3RGcmFtZVNlbGVjdGlvblJlc3VsdCA9PT0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcbiAgICAgIHRyYXZlcnNhbERldGFpbHMubm90WWV0UmVuZGVyYWJsZUNvdW50ID0gdGlsZS5yZW5kZXJhYmxlID8gMCA6IDE7XG5cbiAgICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9IGZyYW1lU3RhdGUuZnJhbWVOdW1iZXI7XG4gICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcblxuICAgICAgaWYgKCF0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSkge1xuICAgICAgICAvLyBUaWxlIGlzIG5ld2x5LXJlbmRlcmVkIHRoaXMgZnJhbWUsIHNvIHVwZGF0ZSBpdHMgaGVpZ2h0cy5cbiAgICAgICAgcHJpbWl0aXZlLl90aWxlVG9VcGRhdGVIZWlnaHRzLnB1c2godGlsZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTU0UgaXMgbm90IGdvb2QgZW5vdWdoLCBzbyByZWZpbmUuXG4gICAgdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdEZyYW1lID0gZnJhbWVTdGF0ZS5mcmFtZU51bWJlcjtcbiAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRUZJTkVEO1xuXG4gICAgdmFyIGZpcnN0UmVuZGVyZWREZXNjZW5kYW50SW5kZXggPSBwcmltaXRpdmUuX3RpbGVzVG9SZW5kZXIubGVuZ3RoO1xuICAgIHZhciBsb2FkSW5kZXhMb3cgPSBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVMb3cubGVuZ3RoO1xuICAgIHZhciBsb2FkSW5kZXhNZWRpdW0gPSBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0ubGVuZ3RoO1xuICAgIHZhciBsb2FkSW5kZXhIaWdoID0gcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlSGlnaC5sZW5ndGg7XG4gICAgdmFyIHRpbGVzVG9VcGRhdGVIZWlnaHRzSW5kZXggPSBwcmltaXRpdmUuX3RpbGVUb1VwZGF0ZUhlaWdodHMubGVuZ3RoO1xuXG4gICAgLy8gTm8gbmVlZCB0byBhZGQgdGhlIGNoaWxkcmVuIHRvIHRoZSBsb2FkIHF1ZXVlIGJlY2F1c2UgdGhleSdsbCBiZSBhZGRlZCAoaWYgbmVjZXNzYXJ5KSB3aGVuIHRoZXkncmUgdmlzaXRlZC5cbiAgICB2aXNpdFZpc2libGVDaGlsZHJlbk5lYXJUb0ZhcihcbiAgICAgIHByaW1pdGl2ZSxcbiAgICAgIHNvdXRod2VzdENoaWxkLFxuICAgICAgc291dGhlYXN0Q2hpbGQsXG4gICAgICBub3J0aHdlc3RDaGlsZCxcbiAgICAgIG5vcnRoZWFzdENoaWxkLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIGFuY2VzdG9yTWVldHNTc2UsXG4gICAgICB0cmF2ZXJzYWxEZXRhaWxzXG4gICAgKTtcblxuICAgIC8vIElmIG5vIGRlc2NlbmRhbnQgdGlsZXMgd2VyZSBhZGRlZCB0byB0aGUgcmVuZGVyIGxpc3QgYnkgdGhlIGZ1bmN0aW9uIGFib3ZlLCBpdCBtZWFucyB0aGV5IHdlcmUgYWxsXG4gICAgLy8gY3VsbGVkIGV2ZW4gdGhvdWdoIHRoaXMgdGlsZSB3YXMgZGVlbWVkIHZpc2libGUuIFRoYXQncyBwcmV0dHkgY29tbW9uLlxuXG4gICAgaWYgKGZpcnN0UmVuZGVyZWREZXNjZW5kYW50SW5kZXggIT09IHByaW1pdGl2ZS5fdGlsZXNUb1JlbmRlci5sZW5ndGgpIHtcbiAgICAgIC8vIEF0IGxlYXN0IG9uZSBkZXNjZW5kYW50IHRpbGUgd2FzIGFkZGVkIHRvIHRoZSByZW5kZXIgbGlzdC5cbiAgICAgIC8vIFRoZSB0cmF2ZXJzYWxEZXRhaWxzIHRlbGwgdXMgd2hhdCBoYXBwZW5lZCB3aGlsZSB2aXNpdGluZyB0aGUgY2hpbGRyZW4uXG5cbiAgICAgIHZhciBhbGxBcmVSZW5kZXJhYmxlID0gdHJhdmVyc2FsRGV0YWlscy5hbGxBcmVSZW5kZXJhYmxlO1xuICAgICAgdmFyIGFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSA9IHRyYXZlcnNhbERldGFpbHMuYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lO1xuICAgICAgdmFyIG5vdFlldFJlbmRlcmFibGVDb3VudCA9IHRyYXZlcnNhbERldGFpbHMubm90WWV0UmVuZGVyYWJsZUNvdW50O1xuICAgICAgdmFyIHF1ZXVlZEZvckxvYWQgPSBmYWxzZTtcblxuICAgICAgaWYgKCFhbGxBcmVSZW5kZXJhYmxlICYmICFhbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUpIHtcbiAgICAgICAgLy8gU29tZSBvZiBvdXIgZGVzY2VuZGFudHMgYXJlbid0IHJlYWR5IHRvIHJlbmRlciB5ZXQsIGFuZCBub25lIHdlcmUgcmVuZGVyZWQgbGFzdCBmcmFtZSxcbiAgICAgICAgLy8gc28ga2ljayB0aGVtIGFsbCBvdXQgb2YgdGhlIHJlbmRlciBsaXN0IGFuZCByZW5kZXIgdGhpcyB0aWxlIGluc3RlYWQuIENvbnRpbnVlIHRvIGxvYWQgdGhlbSB0aG91Z2ghXG5cbiAgICAgICAgLy8gTWFyayB0aGUgcmVuZGVyZWQgZGVzY2VuZGFudHMgYW5kIHRoZWlyIGFuY2VzdG9ycyAtIHVwIHRvIHRoaXMgdGlsZSAtIGFzIGtpY2tlZC5cbiAgICAgICAgdmFyIHJlbmRlckxpc3QgPSBwcmltaXRpdmUuX3RpbGVzVG9SZW5kZXI7XG4gICAgICAgIGZvciAodmFyIGkgPSBmaXJzdFJlbmRlcmVkRGVzY2VuZGFudEluZGV4OyBpIDwgcmVuZGVyTGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciB3b3JrVGlsZSA9IHJlbmRlckxpc3RbaV07XG4gICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgd29ya1RpbGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgd29ya1RpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHQgIT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuS0lDS0VEICYmXG4gICAgICAgICAgICB3b3JrVGlsZSAhPT0gdGlsZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgd29ya1RpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHQgPSBUaWxlU2VsZWN0aW9uUmVzdWx0LmtpY2soXG4gICAgICAgICAgICAgIHdvcmtUaWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgd29ya1RpbGUgPSB3b3JrVGlsZS5wYXJlbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIGFsbCBkZXNjZW5kYW50cyBmcm9tIHRoZSByZW5kZXIgbGlzdCBhbmQgYWRkIHRoaXMgdGlsZS5cbiAgICAgICAgcHJpbWl0aXZlLl90aWxlc1RvUmVuZGVyLmxlbmd0aCA9IGZpcnN0UmVuZGVyZWREZXNjZW5kYW50SW5kZXg7XG4gICAgICAgIHByaW1pdGl2ZS5fdGlsZVRvVXBkYXRlSGVpZ2h0cy5sZW5ndGggPSB0aWxlc1RvVXBkYXRlSGVpZ2h0c0luZGV4O1xuICAgICAgICBhZGRUaWxlVG9SZW5kZXJMaXN0KHByaW1pdGl2ZSwgdGlsZSk7XG5cbiAgICAgICAgdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdCA9IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQ7XG5cbiAgICAgICAgLy8gSWYgd2UncmUgd2FpdGluZyBvbiBoZWFwcyBvZiBkZXNjZW5kYW50cywgdGhlIGFib3ZlIHdpbGwgdGFrZSB0b28gbG9uZy4gU28gaW4gdGhhdCBjYXNlLFxuICAgICAgICAvLyBsb2FkIHRoaXMgdGlsZSBJTlNURUFEIG9mIGxvYWRpbmcgYW55IG9mIHRoZSBkZXNjZW5kYW50cywgYW5kIHRlbGwgdGhlIHVwLWxldmVsIHdlJ3JlIG9ubHkgd2FpdGluZ1xuICAgICAgICAvLyBvbiB0aGlzIHRpbGUuIEtlZXAgZG9pbmcgdGhpcyB1bnRpbCB3ZSBhY3R1YWxseSBtYW5hZ2UgdG8gcmVuZGVyIHRoaXMgdGlsZS5cbiAgICAgICAgdmFyIHdhc1JlbmRlcmVkTGFzdEZyYW1lID1cbiAgICAgICAgICBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQ7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhd2FzUmVuZGVyZWRMYXN0RnJhbWUgJiZcbiAgICAgICAgICBub3RZZXRSZW5kZXJhYmxlQ291bnQgPiBwcmltaXRpdmUubG9hZGluZ0Rlc2NlbmRhbnRMaW1pdFxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBSZW1vdmUgYWxsIGRlc2NlbmRhbnRzIGZyb20gdGhlIGxvYWQgcXVldWVzLlxuICAgICAgICAgIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZUxvdy5sZW5ndGggPSBsb2FkSW5kZXhMb3c7XG4gICAgICAgICAgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTWVkaXVtLmxlbmd0aCA9IGxvYWRJbmRleE1lZGl1bTtcbiAgICAgICAgICBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVIaWdoLmxlbmd0aCA9IGxvYWRJbmRleEhpZ2g7XG4gICAgICAgICAgcXVldWVUaWxlTG9hZChcbiAgICAgICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgICAgIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZU1lZGl1bSxcbiAgICAgICAgICAgIHRpbGUsXG4gICAgICAgICAgICBmcmFtZVN0YXRlXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0cmF2ZXJzYWxEZXRhaWxzLm5vdFlldFJlbmRlcmFibGVDb3VudCA9IHRpbGUucmVuZGVyYWJsZSA/IDAgOiAxO1xuICAgICAgICAgIHF1ZXVlZEZvckxvYWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJhdmVyc2FsRGV0YWlscy5hbGxBcmVSZW5kZXJhYmxlID0gdGlsZS5yZW5kZXJhYmxlO1xuICAgICAgICB0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSA9IHdhc1JlbmRlcmVkTGFzdEZyYW1lO1xuXG4gICAgICAgIGlmICghd2FzUmVuZGVyZWRMYXN0RnJhbWUpIHtcbiAgICAgICAgICAvLyBUaWxlIGlzIG5ld2x5LXJlbmRlcmVkIHRoaXMgZnJhbWUsIHNvIHVwZGF0ZSBpdHMgaGVpZ2h0cy5cbiAgICAgICAgICBwcmltaXRpdmUuX3RpbGVUb1VwZGF0ZUhlaWdodHMucHVzaCh0aWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICsrZGVidWcudGlsZXNXYWl0aW5nRm9yQ2hpbGRyZW47XG4gICAgICB9XG5cbiAgICAgIGlmIChwcmltaXRpdmUucHJlbG9hZEFuY2VzdG9ycyAmJiAhcXVldWVkRm9yTG9hZCkge1xuICAgICAgICBxdWV1ZVRpbGVMb2FkKHByaW1pdGl2ZSwgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTG93LCB0aWxlLCBmcmFtZVN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0RnJhbWUgPSBmcmFtZVN0YXRlLmZyYW1lTnVtYmVyO1xuICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcblxuICAvLyBXZSdkIGxpa2UgdG8gcmVmaW5lIGJ1dCBjYW4ndCBiZWNhdXNlIHdlIGhhdmUgbm8gYXZhaWxhYmlsaXR5IGRhdGEgZm9yIHRoaXMgdGlsZSdzIGNoaWxkcmVuLFxuICAvLyBzbyB3ZSBoYXZlIG5vIGlkZWEgaWYgcmVmaW5pbmluZyB3b3VsZCBpbnZvbHZlIGEgbG9hZCBvciBhbiB1cHNhbXBsZS4gV2UnbGwgaGF2ZSB0byBmaW5pc2hcbiAgLy8gbG9hZGluZyB0aGlzIHRpbGUgZmlyc3QgaW4gb3JkZXIgdG8gZmluZCB0aGF0IG91dCwgc28gbG9hZCB0aGlzIHJlZmluZW1lbnQgYmxvY2tlciB3aXRoXG4gIC8vIGhpZ2ggcHJpb3JpdHkuXG4gIGFkZFRpbGVUb1JlbmRlckxpc3QocHJpbWl0aXZlLCB0aWxlKTtcbiAgcXVldWVUaWxlTG9hZChwcmltaXRpdmUsIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZUhpZ2gsIHRpbGUsIGZyYW1lU3RhdGUpO1xuXG4gIHRyYXZlcnNhbERldGFpbHMuYWxsQXJlUmVuZGVyYWJsZSA9IHRpbGUucmVuZGVyYWJsZTtcbiAgdHJhdmVyc2FsRGV0YWlscy5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPVxuICAgIGxhc3RGcmFtZVNlbGVjdGlvblJlc3VsdCA9PT0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcbiAgdHJhdmVyc2FsRGV0YWlscy5ub3RZZXRSZW5kZXJhYmxlQ291bnQgPSB0aWxlLnJlbmRlcmFibGUgPyAwIDogMTtcbn1cblxuZnVuY3Rpb24gdmlzaXRWaXNpYmxlQ2hpbGRyZW5OZWFyVG9GYXIoXG4gIHByaW1pdGl2ZSxcbiAgc291dGh3ZXN0LFxuICBzb3V0aGVhc3QsXG4gIG5vcnRod2VzdCxcbiAgbm9ydGhlYXN0LFxuICBmcmFtZVN0YXRlLFxuICBhbmNlc3Rvck1lZXRzU3NlLFxuICB0cmF2ZXJzYWxEZXRhaWxzXG4pIHtcbiAgdmFyIGNhbWVyYVBvc2l0aW9uID0gZnJhbWVTdGF0ZS5jYW1lcmEucG9zaXRpb25DYXJ0b2dyYXBoaWM7XG4gIHZhciB0aWxlUHJvdmlkZXIgPSBwcmltaXRpdmUuX3RpbGVQcm92aWRlcjtcbiAgdmFyIG9jY2x1ZGVycyA9IHByaW1pdGl2ZS5fb2NjbHVkZXJzO1xuXG4gIHZhciBxdWFkRGV0YWlscyA9IHRyYXZlcnNhbFF1YWRzQnlMZXZlbFtzb3V0aHdlc3QubGV2ZWxdO1xuICB2YXIgc291dGh3ZXN0RGV0YWlscyA9IHF1YWREZXRhaWxzLnNvdXRod2VzdDtcbiAgdmFyIHNvdXRoZWFzdERldGFpbHMgPSBxdWFkRGV0YWlscy5zb3V0aGVhc3Q7XG4gIHZhciBub3J0aHdlc3REZXRhaWxzID0gcXVhZERldGFpbHMubm9ydGh3ZXN0O1xuICB2YXIgbm9ydGhlYXN0RGV0YWlscyA9IHF1YWREZXRhaWxzLm5vcnRoZWFzdDtcblxuICBpZiAoY2FtZXJhUG9zaXRpb24ubG9uZ2l0dWRlIDwgc291dGh3ZXN0LnJlY3RhbmdsZS5lYXN0KSB7XG4gICAgaWYgKGNhbWVyYVBvc2l0aW9uLmxhdGl0dWRlIDwgc291dGh3ZXN0LnJlY3RhbmdsZS5ub3J0aCkge1xuICAgICAgLy8gQ2FtZXJhIGluIHNvdXRod2VzdCBxdWFkcmFudFxuICAgICAgdmlzaXRJZlZpc2libGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgc291dGh3ZXN0LFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIG9jY2x1ZGVycyxcbiAgICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgICAgc291dGh3ZXN0RGV0YWlsc1xuICAgICAgKTtcbiAgICAgIHZpc2l0SWZWaXNpYmxlKFxuICAgICAgICBwcmltaXRpdmUsXG4gICAgICAgIHNvdXRoZWFzdCxcbiAgICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICBvY2NsdWRlcnMsXG4gICAgICAgIGFuY2VzdG9yTWVldHNTc2UsXG4gICAgICAgIHNvdXRoZWFzdERldGFpbHNcbiAgICAgICk7XG4gICAgICB2aXNpdElmVmlzaWJsZShcbiAgICAgICAgcHJpbWl0aXZlLFxuICAgICAgICBub3J0aHdlc3QsXG4gICAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgb2NjbHVkZXJzLFxuICAgICAgICBhbmNlc3Rvck1lZXRzU3NlLFxuICAgICAgICBub3J0aHdlc3REZXRhaWxzXG4gICAgICApO1xuICAgICAgdmlzaXRJZlZpc2libGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgbm9ydGhlYXN0LFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIG9jY2x1ZGVycyxcbiAgICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgICAgbm9ydGhlYXN0RGV0YWlsc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FtZXJhIGluIG5vcnRod2VzdCBxdWFkcmFudFxuICAgICAgdmlzaXRJZlZpc2libGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgbm9ydGh3ZXN0LFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIG9jY2x1ZGVycyxcbiAgICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgICAgbm9ydGh3ZXN0RGV0YWlsc1xuICAgICAgKTtcbiAgICAgIHZpc2l0SWZWaXNpYmxlKFxuICAgICAgICBwcmltaXRpdmUsXG4gICAgICAgIHNvdXRod2VzdCxcbiAgICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICBvY2NsdWRlcnMsXG4gICAgICAgIGFuY2VzdG9yTWVldHNTc2UsXG4gICAgICAgIHNvdXRod2VzdERldGFpbHNcbiAgICAgICk7XG4gICAgICB2aXNpdElmVmlzaWJsZShcbiAgICAgICAgcHJpbWl0aXZlLFxuICAgICAgICBub3J0aGVhc3QsXG4gICAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgb2NjbHVkZXJzLFxuICAgICAgICBhbmNlc3Rvck1lZXRzU3NlLFxuICAgICAgICBub3J0aGVhc3REZXRhaWxzXG4gICAgICApO1xuICAgICAgdmlzaXRJZlZpc2libGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgc291dGhlYXN0LFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIG9jY2x1ZGVycyxcbiAgICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgICAgc291dGhlYXN0RGV0YWlsc1xuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoY2FtZXJhUG9zaXRpb24ubGF0aXR1ZGUgPCBzb3V0aHdlc3QucmVjdGFuZ2xlLm5vcnRoKSB7XG4gICAgLy8gQ2FtZXJhIHNvdXRoZWFzdCBxdWFkcmFudFxuICAgIHZpc2l0SWZWaXNpYmxlKFxuICAgICAgcHJpbWl0aXZlLFxuICAgICAgc291dGhlYXN0LFxuICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIG9jY2x1ZGVycyxcbiAgICAgIGFuY2VzdG9yTWVldHNTc2UsXG4gICAgICBzb3V0aGVhc3REZXRhaWxzXG4gICAgKTtcbiAgICB2aXNpdElmVmlzaWJsZShcbiAgICAgIHByaW1pdGl2ZSxcbiAgICAgIHNvdXRod2VzdCxcbiAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICBvY2NsdWRlcnMsXG4gICAgICBhbmNlc3Rvck1lZXRzU3NlLFxuICAgICAgc291dGh3ZXN0RGV0YWlsc1xuICAgICk7XG4gICAgdmlzaXRJZlZpc2libGUoXG4gICAgICBwcmltaXRpdmUsXG4gICAgICBub3J0aGVhc3QsXG4gICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgb2NjbHVkZXJzLFxuICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgIG5vcnRoZWFzdERldGFpbHNcbiAgICApO1xuICAgIHZpc2l0SWZWaXNpYmxlKFxuICAgICAgcHJpbWl0aXZlLFxuICAgICAgbm9ydGh3ZXN0LFxuICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIG9jY2x1ZGVycyxcbiAgICAgIGFuY2VzdG9yTWVldHNTc2UsXG4gICAgICBub3J0aHdlc3REZXRhaWxzXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDYW1lcmEgaW4gbm9ydGhlYXN0IHF1YWRyYW50XG4gICAgdmlzaXRJZlZpc2libGUoXG4gICAgICBwcmltaXRpdmUsXG4gICAgICBub3J0aGVhc3QsXG4gICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgb2NjbHVkZXJzLFxuICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgIG5vcnRoZWFzdERldGFpbHNcbiAgICApO1xuICAgIHZpc2l0SWZWaXNpYmxlKFxuICAgICAgcHJpbWl0aXZlLFxuICAgICAgbm9ydGh3ZXN0LFxuICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIG9jY2x1ZGVycyxcbiAgICAgIGFuY2VzdG9yTWVldHNTc2UsXG4gICAgICBub3J0aHdlc3REZXRhaWxzXG4gICAgKTtcbiAgICB2aXNpdElmVmlzaWJsZShcbiAgICAgIHByaW1pdGl2ZSxcbiAgICAgIHNvdXRoZWFzdCxcbiAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICBvY2NsdWRlcnMsXG4gICAgICBhbmNlc3Rvck1lZXRzU3NlLFxuICAgICAgc291dGhlYXN0RGV0YWlsc1xuICAgICk7XG4gICAgdmlzaXRJZlZpc2libGUoXG4gICAgICBwcmltaXRpdmUsXG4gICAgICBzb3V0aHdlc3QsXG4gICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgb2NjbHVkZXJzLFxuICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgIHNvdXRod2VzdERldGFpbHNcbiAgICApO1xuICB9XG5cbiAgcXVhZERldGFpbHMuY29tYmluZSh0cmF2ZXJzYWxEZXRhaWxzKTtcbn1cblxuZnVuY3Rpb24gY29udGFpbnNOZWVkZWRQb3NpdGlvbihwcmltaXRpdmUsIHRpbGUpIHtcbiAgdmFyIHJlY3RhbmdsZSA9IHRpbGUucmVjdGFuZ2xlO1xuICByZXR1cm4gKFxuICAgIChkZWZpbmVkKHByaW1pdGl2ZS5fY2FtZXJhUG9zaXRpb25DYXJ0b2dyYXBoaWMpICYmXG4gICAgICBSZWN0YW5nbGUuY29udGFpbnMocmVjdGFuZ2xlLCBwcmltaXRpdmUuX2NhbWVyYVBvc2l0aW9uQ2FydG9ncmFwaGljKSkgfHxcbiAgICAoZGVmaW5lZChwcmltaXRpdmUuX2NhbWVyYVJlZmVyZW5jZUZyYW1lT3JpZ2luQ2FydG9ncmFwaGljKSAmJlxuICAgICAgUmVjdGFuZ2xlLmNvbnRhaW5zKFxuICAgICAgICByZWN0YW5nbGUsXG4gICAgICAgIHByaW1pdGl2ZS5fY2FtZXJhUmVmZXJlbmNlRnJhbWVPcmlnaW5DYXJ0b2dyYXBoaWNcbiAgICAgICkpXG4gICk7XG59XG5cbmZ1bmN0aW9uIHZpc2l0SWZWaXNpYmxlKFxuICBwcmltaXRpdmUsXG4gIHRpbGUsXG4gIHRpbGVQcm92aWRlcixcbiAgZnJhbWVTdGF0ZSxcbiAgb2NjbHVkZXJzLFxuICBhbmNlc3Rvck1lZXRzU3NlLFxuICB0cmF2ZXJzYWxEZXRhaWxzXG4pIHtcbiAgaWYgKFxuICAgIHRpbGVQcm92aWRlci5jb21wdXRlVGlsZVZpc2liaWxpdHkodGlsZSwgZnJhbWVTdGF0ZSwgb2NjbHVkZXJzKSAhPT1cbiAgICBWaXNpYmlsaXR5Lk5PTkVcbiAgKSB7XG4gICAgcmV0dXJuIHZpc2l0VGlsZShcbiAgICAgIHByaW1pdGl2ZSxcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICB0aWxlLFxuICAgICAgYW5jZXN0b3JNZWV0c1NzZSxcbiAgICAgIHRyYXZlcnNhbERldGFpbHNcbiAgICApO1xuICB9XG5cbiAgKytwcmltaXRpdmUuX2RlYnVnLnRpbGVzQ3VsbGVkO1xuICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLm1hcmtUaWxlUmVuZGVyZWQodGlsZSk7XG5cbiAgdHJhdmVyc2FsRGV0YWlscy5hbGxBcmVSZW5kZXJhYmxlID0gdHJ1ZTtcbiAgdHJhdmVyc2FsRGV0YWlscy5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPSBmYWxzZTtcbiAgdHJhdmVyc2FsRGV0YWlscy5ub3RZZXRSZW5kZXJhYmxlQ291bnQgPSAwO1xuXG4gIGlmIChjb250YWluc05lZWRlZFBvc2l0aW9uKHByaW1pdGl2ZSwgdGlsZSkpIHtcbiAgICAvLyBMb2FkIHRoZSB0aWxlKHMpIHRoYXQgY29udGFpbnMgdGhlIGNhbWVyYSdzIHBvc2l0aW9uIGFuZFxuICAgIC8vIHRoZSBvcmlnaW4gb2YgaXRzIHJlZmVyZW5jZSBmcmFtZSB3aXRoIG1lZGl1bSBwcmlvcml0eS5cbiAgICAvLyBCdXQgd2Ugb25seSBuZWVkIHRvIGxvYWQgdW50aWwgdGhlIHRlcnJhaW4gaXMgYXZhaWxhYmxlLCBubyBuZWVkIHRvIGxvYWQgaW1hZ2VyeS5cbiAgICBpZiAoIWRlZmluZWQodGlsZS5kYXRhKSB8fCAhZGVmaW5lZCh0aWxlLmRhdGEudmVydGV4QXJyYXkpKSB7XG4gICAgICBxdWV1ZVRpbGVMb2FkKFxuICAgICAgICBwcmltaXRpdmUsXG4gICAgICAgIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZU1lZGl1bSxcbiAgICAgICAgdGlsZSxcbiAgICAgICAgZnJhbWVTdGF0ZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgbGFzdEZyYW1lID0gcHJpbWl0aXZlLl9sYXN0U2VsZWN0aW9uRnJhbWVOdW1iZXI7XG4gICAgdmFyIGxhc3RGcmFtZVNlbGVjdGlvblJlc3VsdCA9XG4gICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0RnJhbWUgPT09IGxhc3RGcmFtZVxuICAgICAgICA/IHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRcbiAgICAgICAgOiBUaWxlU2VsZWN0aW9uUmVzdWx0Lk5PTkU7XG4gICAgaWYgKFxuICAgICAgbGFzdEZyYW1lU2VsZWN0aW9uUmVzdWx0ICE9PSBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRF9CVVRfTkVFREVEICYmXG4gICAgICBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgIT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRURcbiAgICApIHtcbiAgICAgIHByaW1pdGl2ZS5fdGlsZVRvVXBkYXRlSGVpZ2h0cy5wdXNoKHRpbGUpO1xuICAgIH1cblxuICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHQgPSBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRF9CVVRfTkVFREVEO1xuICB9IGVsc2UgaWYgKHByaW1pdGl2ZS5wcmVsb2FkU2libGluZ3MgfHwgdGlsZS5sZXZlbCA9PT0gMCkge1xuICAgIC8vIExvYWQgY3VsbGVkIGxldmVsIHplcm8gdGlsZXMgd2l0aCBsb3cgcHJpb3JpdHkuXG4gICAgLy8gRm9yIGFsbCBvdGhlciBsZXZlbHMsIG9ubHkgbG9hZCBjdWxsZWQgdGlsZXMgaWYgcHJlbG9hZFNpYmxpbmdzIGlzIGVuYWJsZWQuXG4gICAgcXVldWVUaWxlTG9hZChwcmltaXRpdmUsIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZUxvdywgdGlsZSwgZnJhbWVTdGF0ZSk7XG4gICAgdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdCA9IFRpbGVTZWxlY3Rpb25SZXN1bHQuQ1VMTEVEO1xuICB9IGVsc2Uge1xuICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHQgPSBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRDtcbiAgfVxuXG4gIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9IGZyYW1lU3RhdGUuZnJhbWVOdW1iZXI7XG59XG5cbmZ1bmN0aW9uIHNjcmVlblNwYWNlRXJyb3IocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCB0aWxlKSB7XG4gIGlmIChcbiAgICBmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEIHx8XG4gICAgZnJhbWVTdGF0ZS5jYW1lcmEuZnJ1c3R1bSBpbnN0YW5jZW9mIE9ydGhvZ3JhcGhpY0ZydXN0dW0gfHxcbiAgICBmcmFtZVN0YXRlLmNhbWVyYS5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljT2ZmQ2VudGVyRnJ1c3R1bVxuICApIHtcbiAgICByZXR1cm4gc2NyZWVuU3BhY2VFcnJvcjJEKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSwgdGlsZSk7XG4gIH1cblxuICB2YXIgbWF4R2VvbWV0cmljRXJyb3IgPSBwcmltaXRpdmUuX3RpbGVQcm92aWRlci5nZXRMZXZlbE1heGltdW1HZW9tZXRyaWNFcnJvcihcbiAgICB0aWxlLmxldmVsXG4gICk7XG5cbiAgdmFyIGRpc3RhbmNlID0gdGlsZS5fZGlzdGFuY2U7XG4gIHZhciBoZWlnaHQgPSBmcmFtZVN0YXRlLmNvbnRleHQuZHJhd2luZ0J1ZmZlckhlaWdodDtcbiAgdmFyIHNzZURlbm9taW5hdG9yID0gZnJhbWVTdGF0ZS5jYW1lcmEuZnJ1c3R1bS5zc2VEZW5vbWluYXRvcjtcblxuICB2YXIgZXJyb3IgPSAobWF4R2VvbWV0cmljRXJyb3IgKiBoZWlnaHQpIC8gKGRpc3RhbmNlICogc3NlRGVub21pbmF0b3IpO1xuXG4gIGlmIChmcmFtZVN0YXRlLmZvZy5lbmFibGVkKSB7XG4gICAgZXJyb3IgLT1cbiAgICAgIENlc2l1bU1hdGguZm9nKGRpc3RhbmNlLCBmcmFtZVN0YXRlLmZvZy5kZW5zaXR5KSAqIGZyYW1lU3RhdGUuZm9nLnNzZTtcbiAgfVxuXG4gIGVycm9yIC89IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcblxuICByZXR1cm4gZXJyb3I7XG59XG5cbmZ1bmN0aW9uIHNjcmVlblNwYWNlRXJyb3IyRChwcmltaXRpdmUsIGZyYW1lU3RhdGUsIHRpbGUpIHtcbiAgdmFyIGNhbWVyYSA9IGZyYW1lU3RhdGUuY2FtZXJhO1xuICB2YXIgZnJ1c3R1bSA9IGNhbWVyYS5mcnVzdHVtO1xuICBpZiAoZGVmaW5lZChmcnVzdHVtLl9vZmZDZW50ZXJGcnVzdHVtKSkge1xuICAgIGZydXN0dW0gPSBmcnVzdHVtLl9vZmZDZW50ZXJGcnVzdHVtO1xuICB9XG5cbiAgdmFyIGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XG4gIHZhciB3aWR0aCA9IGNvbnRleHQuZHJhd2luZ0J1ZmZlcldpZHRoO1xuICB2YXIgaGVpZ2h0ID0gY29udGV4dC5kcmF3aW5nQnVmZmVySGVpZ2h0O1xuXG4gIHZhciBtYXhHZW9tZXRyaWNFcnJvciA9IHByaW1pdGl2ZS5fdGlsZVByb3ZpZGVyLmdldExldmVsTWF4aW11bUdlb21ldHJpY0Vycm9yKFxuICAgIHRpbGUubGV2ZWxcbiAgKTtcbiAgdmFyIHBpeGVsU2l6ZSA9XG4gICAgTWF0aC5tYXgoZnJ1c3R1bS50b3AgLSBmcnVzdHVtLmJvdHRvbSwgZnJ1c3R1bS5yaWdodCAtIGZydXN0dW0ubGVmdCkgL1xuICAgIE1hdGgubWF4KHdpZHRoLCBoZWlnaHQpO1xuICB2YXIgZXJyb3IgPSBtYXhHZW9tZXRyaWNFcnJvciAvIHBpeGVsU2l6ZTtcblxuICBpZiAoZnJhbWVTdGF0ZS5mb2cuZW5hYmxlZCAmJiBmcmFtZVN0YXRlLm1vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgZXJyb3IgLT1cbiAgICAgIENlc2l1bU1hdGguZm9nKHRpbGUuX2Rpc3RhbmNlLCBmcmFtZVN0YXRlLmZvZy5kZW5zaXR5KSAqXG4gICAgICBmcmFtZVN0YXRlLmZvZy5zc2U7XG4gIH1cblxuICBlcnJvciAvPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG5cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5mdW5jdGlvbiBhZGRUaWxlVG9SZW5kZXJMaXN0KHByaW1pdGl2ZSwgdGlsZSkge1xuICBwcmltaXRpdmUuX3RpbGVzVG9SZW5kZXIucHVzaCh0aWxlKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1RpbGVMb2FkUXVldWUocHJpbWl0aXZlLCBmcmFtZVN0YXRlKSB7XG4gIHZhciB0aWxlTG9hZFF1ZXVlSGlnaCA9IHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZUhpZ2g7XG4gIHZhciB0aWxlTG9hZFF1ZXVlTWVkaXVtID0gcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTWVkaXVtO1xuICB2YXIgdGlsZUxvYWRRdWV1ZUxvdyA9IHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZUxvdztcblxuICBpZiAoXG4gICAgdGlsZUxvYWRRdWV1ZUhpZ2gubGVuZ3RoID09PSAwICYmXG4gICAgdGlsZUxvYWRRdWV1ZU1lZGl1bS5sZW5ndGggPT09IDAgJiZcbiAgICB0aWxlTG9hZFF1ZXVlTG93Lmxlbmd0aCA9PT0gMFxuICApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBSZW1vdmUgYW55IHRpbGVzIHRoYXQgd2VyZSBub3QgdXNlZCB0aGlzIGZyYW1lIGJleW9uZCB0aGUgbnVtYmVyXG4gIC8vIHdlJ3JlIGFsbG93ZWQgdG8ga2VlcC5cbiAgcHJpbWl0aXZlLl90aWxlUmVwbGFjZW1lbnRRdWV1ZS50cmltVGlsZXMocHJpbWl0aXZlLnRpbGVDYWNoZVNpemUpO1xuXG4gIHZhciBlbmRUaW1lID0gZ2V0VGltZXN0YW1wKCkgKyBwcmltaXRpdmUuX2xvYWRRdWV1ZVRpbWVTbGljZTtcbiAgdmFyIHRpbGVQcm92aWRlciA9IHByaW1pdGl2ZS5fdGlsZVByb3ZpZGVyO1xuXG4gIHZhciBkaWRTb21lTG9hZGluZyA9IHByb2Nlc3NTaW5nbGVQcmlvcml0eUxvYWRRdWV1ZShcbiAgICBwcmltaXRpdmUsXG4gICAgZnJhbWVTdGF0ZSxcbiAgICB0aWxlUHJvdmlkZXIsXG4gICAgZW5kVGltZSxcbiAgICB0aWxlTG9hZFF1ZXVlSGlnaCxcbiAgICBmYWxzZVxuICApO1xuICBkaWRTb21lTG9hZGluZyA9IHByb2Nlc3NTaW5nbGVQcmlvcml0eUxvYWRRdWV1ZShcbiAgICBwcmltaXRpdmUsXG4gICAgZnJhbWVTdGF0ZSxcbiAgICB0aWxlUHJvdmlkZXIsXG4gICAgZW5kVGltZSxcbiAgICB0aWxlTG9hZFF1ZXVlTWVkaXVtLFxuICAgIGRpZFNvbWVMb2FkaW5nXG4gICk7XG4gIHByb2Nlc3NTaW5nbGVQcmlvcml0eUxvYWRRdWV1ZShcbiAgICBwcmltaXRpdmUsXG4gICAgZnJhbWVTdGF0ZSxcbiAgICB0aWxlUHJvdmlkZXIsXG4gICAgZW5kVGltZSxcbiAgICB0aWxlTG9hZFF1ZXVlTG93LFxuICAgIGRpZFNvbWVMb2FkaW5nXG4gICk7XG59XG5cbmZ1bmN0aW9uIHNvcnRCeUxvYWRQcmlvcml0eShhLCBiKSB7XG4gIHJldHVybiBhLl9sb2FkUHJpb3JpdHkgLSBiLl9sb2FkUHJpb3JpdHk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NTaW5nbGVQcmlvcml0eUxvYWRRdWV1ZShcbiAgcHJpbWl0aXZlLFxuICBmcmFtZVN0YXRlLFxuICB0aWxlUHJvdmlkZXIsXG4gIGVuZFRpbWUsXG4gIGxvYWRRdWV1ZSxcbiAgZGlkU29tZUxvYWRpbmdcbikge1xuICBpZiAodGlsZVByb3ZpZGVyLmNvbXB1dGVUaWxlTG9hZFByaW9yaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICBsb2FkUXVldWUuc29ydChzb3J0QnlMb2FkUHJpb3JpdHkpO1xuICB9XG5cbiAgZm9yIChcbiAgICB2YXIgaSA9IDAsIGxlbiA9IGxvYWRRdWV1ZS5sZW5ndGg7XG4gICAgaSA8IGxlbiAmJiAoZ2V0VGltZXN0YW1wKCkgPCBlbmRUaW1lIHx8ICFkaWRTb21lTG9hZGluZyk7XG4gICAgKytpXG4gICkge1xuICAgIHZhciB0aWxlID0gbG9hZFF1ZXVlW2ldO1xuICAgIHByaW1pdGl2ZS5fdGlsZVJlcGxhY2VtZW50UXVldWUubWFya1RpbGVSZW5kZXJlZCh0aWxlKTtcbiAgICB0aWxlUHJvdmlkZXIubG9hZFRpbGUoZnJhbWVTdGF0ZSwgdGlsZSk7XG4gICAgZGlkU29tZUxvYWRpbmcgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGRpZFNvbWVMb2FkaW5nO1xufVxuXG52YXIgc2NyYXRjaFJheSA9IG5ldyBSYXkoKTtcbnZhciBzY3JhdGNoQ2FydG9ncmFwaGljID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIHNjcmF0Y2hQb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaEFycmF5ID0gW107XG5cbmZ1bmN0aW9uIHVwZGF0ZUhlaWdodHMocHJpbWl0aXZlLCBmcmFtZVN0YXRlKSB7XG4gIGlmICghcHJpbWl0aXZlLnRpbGVQcm92aWRlci5yZWFkeSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0cnlOZXh0RnJhbWUgPSBzY3JhdGNoQXJyYXk7XG4gIHRyeU5leHRGcmFtZS5sZW5ndGggPSAwO1xuICB2YXIgdGlsZXNUb1VwZGF0ZUhlaWdodHMgPSBwcmltaXRpdmUuX3RpbGVUb1VwZGF0ZUhlaWdodHM7XG5cbiAgdmFyIHN0YXJ0VGltZSA9IGdldFRpbWVzdGFtcCgpO1xuICB2YXIgdGltZVNsaWNlID0gcHJpbWl0aXZlLl91cGRhdGVIZWlnaHRzVGltZVNsaWNlO1xuICB2YXIgZW5kVGltZSA9IHN0YXJ0VGltZSArIHRpbWVTbGljZTtcblxuICB2YXIgbW9kZSA9IGZyYW1lU3RhdGUubW9kZTtcbiAgdmFyIHByb2plY3Rpb24gPSBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb247XG4gIHZhciBlbGxpcHNvaWQgPSBwcmltaXRpdmUudGlsZVByb3ZpZGVyLnRpbGluZ1NjaGVtZS5lbGxpcHNvaWQ7XG4gIHZhciBpO1xuXG4gIHdoaWxlICh0aWxlc1RvVXBkYXRlSGVpZ2h0cy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIHRpbGUgPSB0aWxlc1RvVXBkYXRlSGVpZ2h0c1swXTtcbiAgICBpZiAoIWRlZmluZWQodGlsZS5kYXRhKSB8fCAhZGVmaW5lZCh0aWxlLmRhdGEubWVzaCkpIHtcbiAgICAgIC8vIFRpbGUgaXNuJ3QgbG9hZGVkIGVub3VnaCB5ZXQsIHNvIHRyeSBhZ2FpbiBuZXh0IGZyYW1lIGlmIHRoaXMgdGlsZSBpcyBzdGlsbFxuICAgICAgLy8gYmVpbmcgcmVuZGVyZWQuXG4gICAgICB2YXIgc2VsZWN0aW9uUmVzdWx0ID1cbiAgICAgICAgdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdEZyYW1lID09PSBwcmltaXRpdmUuX2xhc3RTZWxlY3Rpb25GcmFtZU51bWJlclxuICAgICAgICAgID8gdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdFxuICAgICAgICAgIDogVGlsZVNlbGVjdGlvblJlc3VsdC5OT05FO1xuICAgICAgaWYgKFxuICAgICAgICBzZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQgfHxcbiAgICAgICAgc2VsZWN0aW9uUmVzdWx0ID09PSBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRF9CVVRfTkVFREVEXG4gICAgICApIHtcbiAgICAgICAgdHJ5TmV4dEZyYW1lLnB1c2godGlsZSk7XG4gICAgICB9XG4gICAgICB0aWxlc1RvVXBkYXRlSGVpZ2h0cy5zaGlmdCgpO1xuICAgICAgcHJpbWl0aXZlLl9sYXN0VGlsZUluZGV4ID0gMDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgY3VzdG9tRGF0YSA9IHRpbGUuY3VzdG9tRGF0YTtcbiAgICB2YXIgY3VzdG9tRGF0YUxlbmd0aCA9IGN1c3RvbURhdGEubGVuZ3RoO1xuXG4gICAgdmFyIHRpbWVTbGljZU1heCA9IGZhbHNlO1xuICAgIGZvciAoaSA9IHByaW1pdGl2ZS5fbGFzdFRpbGVJbmRleDsgaSA8IGN1c3RvbURhdGFMZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGRhdGEgPSBjdXN0b21EYXRhW2ldO1xuXG4gICAgICAvLyBObyBuZWVkIHRvIHJ1biB0aGlzIGNvZGUgd2hlbiB0aGUgdGlsZSBpcyB1cHNhbXBsZWQsIGJlY2F1c2UgdGhlIGhlaWdodCB3aWxsIGJlIHRoZSBzYW1lIGFzIGl0cyBwYXJlbnQuXG4gICAgICB2YXIgdGVycmFpbkRhdGEgPSB0aWxlLmRhdGEudGVycmFpbkRhdGE7XG4gICAgICB2YXIgdXBzYW1wbGVkR2VvbWV0cnlGcm9tUGFyZW50ID1cbiAgICAgICAgZGVmaW5lZCh0ZXJyYWluRGF0YSkgJiYgdGVycmFpbkRhdGEud2FzQ3JlYXRlZEJ5VXBzYW1wbGluZygpO1xuXG4gICAgICBpZiAodGlsZS5sZXZlbCA+IGRhdGEubGV2ZWwgJiYgIXVwc2FtcGxlZEdlb21ldHJ5RnJvbVBhcmVudCkge1xuICAgICAgICBpZiAoIWRlZmluZWQoZGF0YS5wb3NpdGlvbk9uRWxsaXBzb2lkU3VyZmFjZSkpIHtcbiAgICAgICAgICAvLyBjYXJ0ZXNpYW4gaGFzIHRvIGJlIG9uIHRoZSBlbGxpcHNvaWQgc3VyZmFjZSBmb3IgYGVsbGlwc29pZC5nZW9kZXRpY1N1cmZhY2VOb3JtYWxgXG4gICAgICAgICAgZGF0YS5wb3NpdGlvbk9uRWxsaXBzb2lkU3VyZmFjZSA9IENhcnRlc2lhbjMuZnJvbVJhZGlhbnMoXG4gICAgICAgICAgICBkYXRhLnBvc2l0aW9uQ2FydG9ncmFwaGljLmxvbmdpdHVkZSxcbiAgICAgICAgICAgIGRhdGEucG9zaXRpb25DYXJ0b2dyYXBoaWMubGF0aXR1ZGUsXG4gICAgICAgICAgICAwLjAsXG4gICAgICAgICAgICBlbGxpcHNvaWRcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgICAgICAgdmFyIHN1cmZhY2VOb3JtYWwgPSBlbGxpcHNvaWQuZ2VvZGV0aWNTdXJmYWNlTm9ybWFsKFxuICAgICAgICAgICAgZGF0YS5wb3NpdGlvbk9uRWxsaXBzb2lkU3VyZmFjZSxcbiAgICAgICAgICAgIHNjcmF0Y2hSYXkuZGlyZWN0aW9uXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIGNvbXB1dGUgb3JpZ2luIHBvaW50XG5cbiAgICAgICAgICAvLyBUcnkgdG8gZmluZCB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gdGhlIHN1cmZhY2Ugbm9ybWFsIGFuZCB6LWF4aXMuXG4gICAgICAgICAgLy8gbWluaW11bSBoZWlnaHQgKC0xMTUwMC4wKSBmb3IgdGhlIHRlcnJhaW4gc2V0LCBuZWVkIHRvIGdldCB0aGlzIGluZm9ybWF0aW9uIGZyb20gdGhlIHRlcnJhaW4gcHJvdmlkZXJcbiAgICAgICAgICB2YXIgcmF5T3JpZ2luID0gZWxsaXBzb2lkLmdldFN1cmZhY2VOb3JtYWxJbnRlcnNlY3Rpb25XaXRoWkF4aXMoXG4gICAgICAgICAgICBkYXRhLnBvc2l0aW9uT25FbGxpcHNvaWRTdXJmYWNlLFxuICAgICAgICAgICAgMTE1MDAuMCxcbiAgICAgICAgICAgIHNjcmF0Y2hSYXkub3JpZ2luXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFRoZW9yZXRpY2FsbHksIG5vdCB3aXRoIEVhcnRoIGRhdHVtcywgdGhlIGludGVyc2VjdGlvbiBwb2ludCBjYW4gYmUgb3V0c2lkZSB0aGUgZWxsaXBzb2lkXG4gICAgICAgICAgaWYgKCFkZWZpbmVkKHJheU9yaWdpbikpIHtcbiAgICAgICAgICAgIC8vIGludGVyc2VjdGlvbiBwb2ludCBpcyBvdXRzaWRlIHRoZSBlbGxpcHNvaWQsIHRyeSBvdGhlciB2YWx1ZVxuICAgICAgICAgICAgLy8gbWluaW11bSBoZWlnaHQgKC0xMTUwMC4wKSBmb3IgdGhlIHRlcnJhaW4gc2V0LCBuZWVkIHRvIGdldCB0aGlzIGluZm9ybWF0aW9uIGZyb20gdGhlIHRlcnJhaW4gcHJvdmlkZXJcbiAgICAgICAgICAgIHZhciBtaW5pbXVtSGVpZ2h0O1xuICAgICAgICAgICAgaWYgKGRlZmluZWQodGlsZS5kYXRhLnRpbGVCb3VuZGluZ1JlZ2lvbikpIHtcbiAgICAgICAgICAgICAgbWluaW11bUhlaWdodCA9IHRpbGUuZGF0YS50aWxlQm91bmRpbmdSZWdpb24ubWluaW11bUhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtYWduaXR1ZGUgPSBNYXRoLm1pbihcbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlKG1pbmltdW1IZWlnaHQsIDAuMCksXG4gICAgICAgICAgICAgIC0xMTUwMC4wXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBtdWx0aXBseSBieSB0aGUgKnBvc2l0aXZlKiB2YWx1ZSBvZiB0aGUgbWFnbml0dWRlXG4gICAgICAgICAgICB2YXIgdmVjdG9yVG9NaW5pbXVtUG9pbnQgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgICAgICAgICAgIHN1cmZhY2VOb3JtYWwsXG4gICAgICAgICAgICAgIE1hdGguYWJzKG1hZ25pdHVkZSkgKyAxLFxuICAgICAgICAgICAgICBzY3JhdGNoUG9zaXRpb25cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgICAgICAgICAgICBkYXRhLnBvc2l0aW9uT25FbGxpcHNvaWRTdXJmYWNlLFxuICAgICAgICAgICAgICB2ZWN0b3JUb01pbmltdW1Qb2ludCxcbiAgICAgICAgICAgICAgc2NyYXRjaFJheS5vcmlnaW5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIENhcnRvZ3JhcGhpYy5jbG9uZShkYXRhLnBvc2l0aW9uQ2FydG9ncmFwaGljLCBzY3JhdGNoQ2FydG9ncmFwaGljKTtcblxuICAgICAgICAgIC8vIG1pbmltdW0gaGVpZ2h0IGZvciB0aGUgdGVycmFpbiBzZXQsIG5lZWQgdG8gZ2V0IHRoaXMgaW5mb3JtYXRpb24gZnJvbSB0aGUgdGVycmFpbiBwcm92aWRlclxuICAgICAgICAgIHNjcmF0Y2hDYXJ0b2dyYXBoaWMuaGVpZ2h0ID0gLTExNTAwLjA7XG4gICAgICAgICAgcHJvamVjdGlvbi5wcm9qZWN0KHNjcmF0Y2hDYXJ0b2dyYXBoaWMsIHNjcmF0Y2hQb3NpdGlvbik7XG4gICAgICAgICAgQ2FydGVzaWFuMy5mcm9tRWxlbWVudHMoXG4gICAgICAgICAgICBzY3JhdGNoUG9zaXRpb24ueixcbiAgICAgICAgICAgIHNjcmF0Y2hQb3NpdGlvbi54LFxuICAgICAgICAgICAgc2NyYXRjaFBvc2l0aW9uLnksXG4gICAgICAgICAgICBzY3JhdGNoUG9zaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIENhcnRlc2lhbjMuY2xvbmUoc2NyYXRjaFBvc2l0aW9uLCBzY3JhdGNoUmF5Lm9yaWdpbik7XG4gICAgICAgICAgQ2FydGVzaWFuMy5jbG9uZShDYXJ0ZXNpYW4zLlVOSVRfWCwgc2NyYXRjaFJheS5kaXJlY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGlsZS5kYXRhLnBpY2soXG4gICAgICAgICAgc2NyYXRjaFJheSxcbiAgICAgICAgICBtb2RlLFxuICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgc2NyYXRjaFBvc2l0aW9uXG4gICAgICAgICk7XG4gICAgICAgIGlmIChkZWZpbmVkKHBvc2l0aW9uKSkge1xuICAgICAgICAgIGRhdGEuY2FsbGJhY2socG9zaXRpb24pO1xuICAgICAgICAgIGRhdGEubGV2ZWwgPSB0aWxlLmxldmVsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnZXRUaW1lc3RhbXAoKSA+PSBlbmRUaW1lKSB7XG4gICAgICAgIHRpbWVTbGljZU1heCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aW1lU2xpY2VNYXgpIHtcbiAgICAgIHByaW1pdGl2ZS5fbGFzdFRpbGVJbmRleCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9IGVsc2Uge1xuICAgICAgcHJpbWl0aXZlLl9sYXN0VGlsZUluZGV4ID0gMDtcbiAgICAgIHRpbGVzVG9VcGRhdGVIZWlnaHRzLnNoaWZ0KCk7XG4gICAgfVxuICB9XG4gIGZvciAoaSA9IDA7IGkgPCB0cnlOZXh0RnJhbWUubGVuZ3RoOyBpKyspIHtcbiAgICB0aWxlc1RvVXBkYXRlSGVpZ2h0cy5wdXNoKHRyeU5leHRGcmFtZVtpXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUmVuZGVyQ29tbWFuZHNGb3JTZWxlY3RlZFRpbGVzKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSkge1xuICB2YXIgdGlsZVByb3ZpZGVyID0gcHJpbWl0aXZlLl90aWxlUHJvdmlkZXI7XG4gIHZhciB0aWxlc1RvUmVuZGVyID0gcHJpbWl0aXZlLl90aWxlc1RvUmVuZGVyO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aWxlc1RvUmVuZGVyLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIHRpbGUgPSB0aWxlc1RvUmVuZGVyW2ldO1xuICAgIHRpbGVQcm92aWRlci5zaG93VGlsZVRoaXNGcmFtZSh0aWxlLCBmcmFtZVN0YXRlKTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgUXVhZHRyZWVQcmltaXRpdmU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9733\n')},19543:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96190);\n/* harmony import */ var _QuadtreeTileLoadState_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85828);\n/* harmony import */ var _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37728);\n\n\n\n\n\n\n/**\n * A single tile in a {@link QuadtreePrimitive}.\n *\n * @alias QuadtreeTile\n * @constructor\n * @private\n *\n * @param {Number} options.level The level of the tile in the quadtree.\n * @param {Number} options.x The X coordinate of the tile in the quadtree.  0 is the westernmost tile.\n * @param {Number} options.y The Y coordinate of the tile in the quadtree.  0 is the northernmost tile.\n * @param {TilingScheme} options.tilingScheme The tiling scheme in which this tile exists.\n * @param {QuadtreeTile} [options.parent] This tile\'s parent, or undefined if this is a root tile.\n */\nfunction QuadtreeTile(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("options is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.x)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("options.x is required.");\n  } else if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.y)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("options.y is required.");\n  } else if (options.x < 0 || options.y < 0) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(\n      "options.x and options.y must be greater than or equal to zero."\n    );\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.level)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(\n      "options.level is required and must be greater than or equal to zero."\n    );\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.tilingScheme)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("options.tilingScheme is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this._tilingScheme = options.tilingScheme;\n  this._x = options.x;\n  this._y = options.y;\n  this._level = options.level;\n  this._parent = options.parent;\n  this._rectangle = this._tilingScheme.tileXYToRectangle(\n    this._x,\n    this._y,\n    this._level\n  );\n\n  this._southwestChild = undefined;\n  this._southeastChild = undefined;\n  this._northwestChild = undefined;\n  this._northeastChild = undefined;\n\n  // TileReplacementQueue gets/sets these private properties.\n  this.replacementPrevious = undefined;\n  this.replacementNext = undefined;\n\n  // The distance from the camera to this tile, updated when the tile is selected\n  // for rendering.  We can get rid of this if we have a better way to sort by\n  // distance - for example, by using the natural ordering of a quadtree.\n  // QuadtreePrimitive gets/sets this private property.\n  this._distance = 0.0;\n  this._loadPriority = 0.0;\n\n  this._customData = [];\n  this._frameUpdated = undefined;\n  this._lastSelectionResult = _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].NONE */ .Z.NONE;\n  this._lastSelectionResultFrame = undefined;\n  this._loadedCallbacks = {};\n\n  /**\n   * Gets or sets the current state of the tile in the tile load pipeline.\n   * @type {QuadtreeTileLoadState}\n   * @default {@link QuadtreeTileLoadState.START}\n   */\n  this.state = _QuadtreeTileLoadState_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].START */ .Z.START;\n\n  /**\n   * Gets or sets a value indicating whether or not the tile is currently renderable.\n   * @type {Boolean}\n   * @default false\n   */\n  this.renderable = false;\n\n  /**\n   * Gets or set a value indicating whether or not the tile was entirely upsampled from its\n   * parent tile.  If all four children of a parent tile were upsampled from the parent,\n   * we will render the parent instead of the children even if the LOD indicates that\n   * the children would be preferable.\n   * @type {Boolean}\n   * @default false\n   */\n  this.upsampledFromParent = false;\n\n  /**\n   * Gets or sets the additional data associated with this tile.  The exact content is specific to the\n   * {@link QuadtreeTileProvider}.\n   * @type {Object}\n   * @default undefined\n   */\n  this.data = undefined;\n}\n\n/**\n * Creates a rectangular set of tiles for level of detail zero, the coarsest, least detailed level.\n *\n * @memberof QuadtreeTile\n *\n * @param {TilingScheme} tilingScheme The tiling scheme for which the tiles are to be created.\n * @returns {QuadtreeTile[]} An array containing the tiles at level of detail zero, starting with the\n * tile in the northwest corner and followed by the tile (if any) to its east.\n */\nQuadtreeTile.createLevelZeroTiles = function (tilingScheme) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(tilingScheme)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("tilingScheme is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var numberOfLevelZeroTilesX = tilingScheme.getNumberOfXTilesAtLevel(0);\n  var numberOfLevelZeroTilesY = tilingScheme.getNumberOfYTilesAtLevel(0);\n\n  var result = new Array(numberOfLevelZeroTilesX * numberOfLevelZeroTilesY);\n\n  var index = 0;\n  for (var y = 0; y < numberOfLevelZeroTilesY; ++y) {\n    for (var x = 0; x < numberOfLevelZeroTilesX; ++x) {\n      result[index++] = new QuadtreeTile({\n        tilingScheme: tilingScheme,\n        x: x,\n        y: y,\n        level: 0,\n      });\n    }\n  }\n\n  return result;\n};\n\nQuadtreeTile.prototype._updateCustomData = function (\n  frameNumber,\n  added,\n  removed\n) {\n  var customData = this.customData;\n\n  var i;\n  var data;\n  var rectangle;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(added) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(removed)) {\n    customData = customData.filter(function (value) {\n      return removed.indexOf(value) === -1;\n    });\n    this._customData = customData;\n\n    rectangle = this._rectangle;\n    for (i = 0; i < added.length; ++i) {\n      data = added[i];\n      if (_Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].contains */ .Z.contains(rectangle, data.positionCartographic)) {\n        customData.push(data);\n      }\n    }\n\n    this._frameUpdated = frameNumber;\n  } else {\n    // interior or leaf tile, update from parent\n    var parent = this._parent;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(parent) && this._frameUpdated !== parent._frameUpdated) {\n      customData.length = 0;\n\n      rectangle = this._rectangle;\n      var parentCustomData = parent.customData;\n      for (i = 0; i < parentCustomData.length; ++i) {\n        data = parentCustomData[i];\n        if (_Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].contains */ .Z.contains(rectangle, data.positionCartographic)) {\n          customData.push(data);\n        }\n      }\n\n      this._frameUpdated = parent._frameUpdated;\n    }\n  }\n};\n\nObject.defineProperties(QuadtreeTile.prototype, {\n  /**\n   * Gets the tiling scheme used to tile the surface.\n   * @memberof QuadtreeTile.prototype\n   * @type {TilingScheme}\n   */\n  tilingScheme: {\n    get: function () {\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the tile X coordinate.\n   * @memberof QuadtreeTile.prototype\n   * @type {Number}\n   */\n  x: {\n    get: function () {\n      return this._x;\n    },\n  },\n\n  /**\n   * Gets the tile Y coordinate.\n   * @memberof QuadtreeTile.prototype\n   * @type {Number}\n   */\n  y: {\n    get: function () {\n      return this._y;\n    },\n  },\n\n  /**\n   * Gets the level-of-detail, where zero is the coarsest, least-detailed.\n   * @memberof QuadtreeTile.prototype\n   * @type {Number}\n   */\n  level: {\n    get: function () {\n      return this._level;\n    },\n  },\n\n  /**\n   * Gets the parent tile of this tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  parent: {\n    get: function () {\n      return this._parent;\n    },\n  },\n\n  /**\n   * Gets the cartographic rectangle of the tile, with north, south, east and\n   * west properties in radians.\n   * @memberof QuadtreeTile.prototype\n   * @type {Rectangle}\n   */\n  rectangle: {\n    get: function () {\n      return this._rectangle;\n    },\n  },\n\n  /**\n   * An array of tiles that is at the next level of the tile tree.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile[]}\n   */\n  children: {\n    get: function () {\n      return [\n        this.northwestChild,\n        this.northeastChild,\n        this.southwestChild,\n        this.southeastChild,\n      ];\n    },\n  },\n\n  /**\n   * Gets the southwest child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  southwestChild: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this._southwestChild)) {\n        this._southwestChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2,\n          y: this.y * 2 + 1,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._southwestChild;\n    },\n  },\n\n  /**\n   * Gets the southeast child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  southeastChild: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this._southeastChild)) {\n        this._southeastChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2 + 1,\n          y: this.y * 2 + 1,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._southeastChild;\n    },\n  },\n\n  /**\n   * Gets the northwest child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  northwestChild: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this._northwestChild)) {\n        this._northwestChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2,\n          y: this.y * 2,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._northwestChild;\n    },\n  },\n\n  /**\n   * Gets the northeast child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  northeastChild: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this._northeastChild)) {\n        this._northeastChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2 + 1,\n          y: this.y * 2,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._northeastChild;\n    },\n  },\n\n  /**\n   * An array of objects associated with this tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {Array}\n   */\n  customData: {\n    get: function () {\n      return this._customData;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not this tile needs further loading.\n   * This property will return true if the {@link QuadtreeTile#state} is\n   * <code>START</code> or <code>LOADING</code>.\n   * @memberof QuadtreeTile.prototype\n   * @type {Boolean}\n   */\n  needsLoading: {\n    get: function () {\n      return this.state < _QuadtreeTileLoadState_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].DONE */ .Z.DONE;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not this tile is eligible to be unloaded.\n   * Typically, a tile is ineligible to be unloaded while an asynchronous operation,\n   * such as a request for data, is in progress on it.  A tile will never be\n   * unloaded while it is needed for rendering, regardless of the value of this\n   * property.  If {@link QuadtreeTile#data} is defined and has an\n   * <code>eligibleForUnloading</code> property, the value of that property is returned.\n   * Otherwise, this property returns true.\n   * @memberof QuadtreeTile.prototype\n   * @type {Boolean}\n   */\n  eligibleForUnloading: {\n    get: function () {\n      var result = true;\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this.data)) {\n        result = this.data.eligibleForUnloading;\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(result)) {\n          result = true;\n        }\n      }\n\n      return result;\n    },\n  },\n});\n\nQuadtreeTile.prototype.findLevelZeroTile = function (levelZeroTiles, x, y) {\n  var xTiles = this.tilingScheme.getNumberOfXTilesAtLevel(0);\n  if (x < 0) {\n    x += xTiles;\n  } else if (x >= xTiles) {\n    x -= xTiles;\n  }\n\n  if (y < 0 || y >= this.tilingScheme.getNumberOfYTilesAtLevel(0)) {\n    return undefined;\n  }\n\n  return levelZeroTiles.filter(function (tile) {\n    return tile.x === x && tile.y === y;\n  })[0];\n};\n\nQuadtreeTile.prototype.findTileToWest = function (levelZeroTiles) {\n  var parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x - 1, this.y);\n  }\n\n  if (parent.southeastChild === this) {\n    return parent.southwestChild;\n  } else if (parent.northeastChild === this) {\n    return parent.northwestChild;\n  }\n\n  var westOfParent = parent.findTileToWest(levelZeroTiles);\n  if (westOfParent === undefined) {\n    return undefined;\n  } else if (parent.southwestChild === this) {\n    return westOfParent.southeastChild;\n  }\n  return westOfParent.northeastChild;\n};\n\nQuadtreeTile.prototype.findTileToEast = function (levelZeroTiles) {\n  var parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x + 1, this.y);\n  }\n\n  if (parent.southwestChild === this) {\n    return parent.southeastChild;\n  } else if (parent.northwestChild === this) {\n    return parent.northeastChild;\n  }\n\n  var eastOfParent = parent.findTileToEast(levelZeroTiles);\n  if (eastOfParent === undefined) {\n    return undefined;\n  } else if (parent.southeastChild === this) {\n    return eastOfParent.southwestChild;\n  }\n  return eastOfParent.northwestChild;\n};\n\nQuadtreeTile.prototype.findTileToSouth = function (levelZeroTiles) {\n  var parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x, this.y + 1);\n  }\n\n  if (parent.northwestChild === this) {\n    return parent.southwestChild;\n  } else if (parent.northeastChild === this) {\n    return parent.southeastChild;\n  }\n\n  var southOfParent = parent.findTileToSouth(levelZeroTiles);\n  if (southOfParent === undefined) {\n    return undefined;\n  } else if (parent.southwestChild === this) {\n    return southOfParent.northwestChild;\n  }\n  return southOfParent.northeastChild;\n};\n\nQuadtreeTile.prototype.findTileToNorth = function (levelZeroTiles) {\n  var parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x, this.y - 1);\n  }\n\n  if (parent.southwestChild === this) {\n    return parent.northwestChild;\n  } else if (parent.southeastChild === this) {\n    return parent.northeastChild;\n  }\n\n  var northOfParent = parent.findTileToNorth(levelZeroTiles);\n  if (northOfParent === undefined) {\n    return undefined;\n  } else if (parent.northwestChild === this) {\n    return northOfParent.southwestChild;\n  }\n  return northOfParent.southeastChild;\n};\n\n/**\n * Frees the resources associated with this tile and returns it to the <code>START</code>\n * {@link QuadtreeTileLoadState}.  If the {@link QuadtreeTile#data} property is defined and it\n * has a <code>freeResources</code> method, the method will be invoked.\n *\n * @memberof QuadtreeTile\n */\nQuadtreeTile.prototype.freeResources = function () {\n  this.state = _QuadtreeTileLoadState_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].START */ .Z.START;\n  this.renderable = false;\n  this.upsampledFromParent = false;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this.data) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this.data.freeResources)) {\n    this.data.freeResources();\n  }\n\n  freeTile(this._southwestChild);\n  this._southwestChild = undefined;\n  freeTile(this._southeastChild);\n  this._southeastChild = undefined;\n  freeTile(this._northwestChild);\n  this._northwestChild = undefined;\n  freeTile(this._northeastChild);\n  this._northeastChild = undefined;\n};\n\nfunction freeTile(tile) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(tile)) {\n    tile.freeResources();\n  }\n}\n/* harmony default export */ __webpack_exports__["Z"] = (QuadtreeTile);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSSw0QkFBNEIsV0FBVyx5QkFBeUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0ZBQTJCO0FBQzFDO0FBQ0E7O0FBRUEsTUFBTSxxRUFBTyxlQUFlLHFFQUFPO0FBQ25DO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLFlBQVksRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9RdWFkdHJlZVRpbGUuanM/OWNkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgUXVhZHRyZWVUaWxlTG9hZFN0YXRlIGZyb20gXCIuL1F1YWR0cmVlVGlsZUxvYWRTdGF0ZS5qc1wiO1xuaW1wb3J0IFRpbGVTZWxlY3Rpb25SZXN1bHQgZnJvbSBcIi4vVGlsZVNlbGVjdGlvblJlc3VsdC5qc1wiO1xuXG4vKipcbiAqIEEgc2luZ2xlIHRpbGUgaW4gYSB7QGxpbmsgUXVhZHRyZWVQcmltaXRpdmV9LlxuICpcbiAqIEBhbGlhcyBRdWFkdHJlZVRpbGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5sZXZlbCBUaGUgbGV2ZWwgb2YgdGhlIHRpbGUgaW4gdGhlIHF1YWR0cmVlLlxuICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMueCBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSB0aWxlIGluIHRoZSBxdWFkdHJlZS4gIDAgaXMgdGhlIHdlc3Rlcm5tb3N0IHRpbGUuXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy55IFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHRpbGUgaW4gdGhlIHF1YWR0cmVlLiAgMCBpcyB0aGUgbm9ydGhlcm5tb3N0IHRpbGUuXG4gKiBAcGFyYW0ge1RpbGluZ1NjaGVtZX0gb3B0aW9ucy50aWxpbmdTY2hlbWUgVGhlIHRpbGluZyBzY2hlbWUgaW4gd2hpY2ggdGhpcyB0aWxlIGV4aXN0cy5cbiAqIEBwYXJhbSB7UXVhZHRyZWVUaWxlfSBbb3B0aW9ucy5wYXJlbnRdIFRoaXMgdGlsZSdzIHBhcmVudCwgb3IgdW5kZWZpbmVkIGlmIHRoaXMgaXMgYSByb290IHRpbGUuXG4gKi9cbmZ1bmN0aW9uIFF1YWR0cmVlVGlsZShvcHRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChvcHRpb25zKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIm9wdGlvbnMgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChvcHRpb25zLngpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy54IGlzIHJlcXVpcmVkLlwiKTtcbiAgfSBlbHNlIGlmICghZGVmaW5lZChvcHRpb25zLnkpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy55IGlzIHJlcXVpcmVkLlwiKTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLnggPCAwIHx8IG9wdGlvbnMueSA8IDApIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIm9wdGlvbnMueCBhbmQgb3B0aW9ucy55IG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHplcm8uXCJcbiAgICApO1xuICB9XG4gIGlmICghZGVmaW5lZChvcHRpb25zLmxldmVsKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwib3B0aW9ucy5sZXZlbCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVyby5cIlxuICAgICk7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKG9wdGlvbnMudGlsaW5nU2NoZW1lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIm9wdGlvbnMudGlsaW5nU2NoZW1lIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLl90aWxpbmdTY2hlbWUgPSBvcHRpb25zLnRpbGluZ1NjaGVtZTtcbiAgdGhpcy5feCA9IG9wdGlvbnMueDtcbiAgdGhpcy5feSA9IG9wdGlvbnMueTtcbiAgdGhpcy5fbGV2ZWwgPSBvcHRpb25zLmxldmVsO1xuICB0aGlzLl9wYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgdGhpcy5fcmVjdGFuZ2xlID0gdGhpcy5fdGlsaW5nU2NoZW1lLnRpbGVYWVRvUmVjdGFuZ2xlKFxuICAgIHRoaXMuX3gsXG4gICAgdGhpcy5feSxcbiAgICB0aGlzLl9sZXZlbFxuICApO1xuXG4gIHRoaXMuX3NvdXRod2VzdENoaWxkID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zb3V0aGVhc3RDaGlsZCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbm9ydGh3ZXN0Q2hpbGQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX25vcnRoZWFzdENoaWxkID0gdW5kZWZpbmVkO1xuXG4gIC8vIFRpbGVSZXBsYWNlbWVudFF1ZXVlIGdldHMvc2V0cyB0aGVzZSBwcml2YXRlIHByb3BlcnRpZXMuXG4gIHRoaXMucmVwbGFjZW1lbnRQcmV2aW91cyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5yZXBsYWNlbWVudE5leHQgPSB1bmRlZmluZWQ7XG5cbiAgLy8gVGhlIGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSB0byB0aGlzIHRpbGUsIHVwZGF0ZWQgd2hlbiB0aGUgdGlsZSBpcyBzZWxlY3RlZFxuICAvLyBmb3IgcmVuZGVyaW5nLiAgV2UgY2FuIGdldCByaWQgb2YgdGhpcyBpZiB3ZSBoYXZlIGEgYmV0dGVyIHdheSB0byBzb3J0IGJ5XG4gIC8vIGRpc3RhbmNlIC0gZm9yIGV4YW1wbGUsIGJ5IHVzaW5nIHRoZSBuYXR1cmFsIG9yZGVyaW5nIG9mIGEgcXVhZHRyZWUuXG4gIC8vIFF1YWR0cmVlUHJpbWl0aXZlIGdldHMvc2V0cyB0aGlzIHByaXZhdGUgcHJvcGVydHkuXG4gIHRoaXMuX2Rpc3RhbmNlID0gMC4wO1xuICB0aGlzLl9sb2FkUHJpb3JpdHkgPSAwLjA7XG5cbiAgdGhpcy5fY3VzdG9tRGF0YSA9IFtdO1xuICB0aGlzLl9mcmFtZVVwZGF0ZWQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2xhc3RTZWxlY3Rpb25SZXN1bHQgPSBUaWxlU2VsZWN0aW9uUmVzdWx0Lk5PTkU7XG4gIHRoaXMuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbG9hZGVkQ2FsbGJhY2tzID0ge307XG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgdGlsZSBpbiB0aGUgdGlsZSBsb2FkIHBpcGVsaW5lLlxuICAgKiBAdHlwZSB7UXVhZHRyZWVUaWxlTG9hZFN0YXRlfVxuICAgKiBAZGVmYXVsdCB7QGxpbmsgUXVhZHRyZWVUaWxlTG9hZFN0YXRlLlNUQVJUfVxuICAgKi9cbiAgdGhpcy5zdGF0ZSA9IFF1YWR0cmVlVGlsZUxvYWRTdGF0ZS5TVEFSVDtcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgdGlsZSBpcyBjdXJyZW50bHkgcmVuZGVyYWJsZS5cbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB0aGlzLnJlbmRlcmFibGUgPSBmYWxzZTtcblxuICAvKipcbiAgICogR2V0cyBvciBzZXQgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoZSB0aWxlIHdhcyBlbnRpcmVseSB1cHNhbXBsZWQgZnJvbSBpdHNcbiAgICogcGFyZW50IHRpbGUuICBJZiBhbGwgZm91ciBjaGlsZHJlbiBvZiBhIHBhcmVudCB0aWxlIHdlcmUgdXBzYW1wbGVkIGZyb20gdGhlIHBhcmVudCxcbiAgICogd2Ugd2lsbCByZW5kZXIgdGhlIHBhcmVudCBpbnN0ZWFkIG9mIHRoZSBjaGlsZHJlbiBldmVuIGlmIHRoZSBMT0QgaW5kaWNhdGVzIHRoYXRcbiAgICogdGhlIGNoaWxkcmVuIHdvdWxkIGJlIHByZWZlcmFibGUuXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgdGhpcy51cHNhbXBsZWRGcm9tUGFyZW50ID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgYWRkaXRpb25hbCBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRpbGUuICBUaGUgZXhhY3QgY29udGVudCBpcyBzcGVjaWZpYyB0byB0aGVcbiAgICoge0BsaW5rIFF1YWR0cmVlVGlsZVByb3ZpZGVyfS5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRhdGEgPSB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHJlY3Rhbmd1bGFyIHNldCBvZiB0aWxlcyBmb3IgbGV2ZWwgb2YgZGV0YWlsIHplcm8sIHRoZSBjb2Fyc2VzdCwgbGVhc3QgZGV0YWlsZWQgbGV2ZWwuXG4gKlxuICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZVxuICpcbiAqIEBwYXJhbSB7VGlsaW5nU2NoZW1lfSB0aWxpbmdTY2hlbWUgVGhlIHRpbGluZyBzY2hlbWUgZm9yIHdoaWNoIHRoZSB0aWxlcyBhcmUgdG8gYmUgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHtRdWFkdHJlZVRpbGVbXX0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgdGlsZXMgYXQgbGV2ZWwgb2YgZGV0YWlsIHplcm8sIHN0YXJ0aW5nIHdpdGggdGhlXG4gKiB0aWxlIGluIHRoZSBub3J0aHdlc3QgY29ybmVyIGFuZCBmb2xsb3dlZCBieSB0aGUgdGlsZSAoaWYgYW55KSB0byBpdHMgZWFzdC5cbiAqL1xuUXVhZHRyZWVUaWxlLmNyZWF0ZUxldmVsWmVyb1RpbGVzID0gZnVuY3Rpb24gKHRpbGluZ1NjaGVtZSkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQodGlsaW5nU2NoZW1lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInRpbGluZ1NjaGVtZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNYID0gdGlsaW5nU2NoZW1lLmdldE51bWJlck9mWFRpbGVzQXRMZXZlbCgwKTtcbiAgdmFyIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNZID0gdGlsaW5nU2NoZW1lLmdldE51bWJlck9mWVRpbGVzQXRMZXZlbCgwKTtcblxuICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KG51bWJlck9mTGV2ZWxaZXJvVGlsZXNYICogbnVtYmVyT2ZMZXZlbFplcm9UaWxlc1kpO1xuXG4gIHZhciBpbmRleCA9IDA7XG4gIGZvciAodmFyIHkgPSAwOyB5IDwgbnVtYmVyT2ZMZXZlbFplcm9UaWxlc1k7ICsreSkge1xuICAgIGZvciAodmFyIHggPSAwOyB4IDwgbnVtYmVyT2ZMZXZlbFplcm9UaWxlc1g7ICsreCkge1xuICAgICAgcmVzdWx0W2luZGV4KytdID0gbmV3IFF1YWR0cmVlVGlsZSh7XG4gICAgICAgIHRpbGluZ1NjaGVtZTogdGlsaW5nU2NoZW1lLFxuICAgICAgICB4OiB4LFxuICAgICAgICB5OiB5LFxuICAgICAgICBsZXZlbDogMCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5RdWFkdHJlZVRpbGUucHJvdG90eXBlLl91cGRhdGVDdXN0b21EYXRhID0gZnVuY3Rpb24gKFxuICBmcmFtZU51bWJlcixcbiAgYWRkZWQsXG4gIHJlbW92ZWRcbikge1xuICB2YXIgY3VzdG9tRGF0YSA9IHRoaXMuY3VzdG9tRGF0YTtcblxuICB2YXIgaTtcbiAgdmFyIGRhdGE7XG4gIHZhciByZWN0YW5nbGU7XG5cbiAgaWYgKGRlZmluZWQoYWRkZWQpICYmIGRlZmluZWQocmVtb3ZlZCkpIHtcbiAgICBjdXN0b21EYXRhID0gY3VzdG9tRGF0YS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVtb3ZlZC5pbmRleE9mKHZhbHVlKSA9PT0gLTE7XG4gICAgfSk7XG4gICAgdGhpcy5fY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XG5cbiAgICByZWN0YW5nbGUgPSB0aGlzLl9yZWN0YW5nbGU7XG4gICAgZm9yIChpID0gMDsgaSA8IGFkZGVkLmxlbmd0aDsgKytpKSB7XG4gICAgICBkYXRhID0gYWRkZWRbaV07XG4gICAgICBpZiAoUmVjdGFuZ2xlLmNvbnRhaW5zKHJlY3RhbmdsZSwgZGF0YS5wb3NpdGlvbkNhcnRvZ3JhcGhpYykpIHtcbiAgICAgICAgY3VzdG9tRGF0YS5wdXNoKGRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2ZyYW1lVXBkYXRlZCA9IGZyYW1lTnVtYmVyO1xuICB9IGVsc2Uge1xuICAgIC8vIGludGVyaW9yIG9yIGxlYWYgdGlsZSwgdXBkYXRlIGZyb20gcGFyZW50XG4gICAgdmFyIHBhcmVudCA9IHRoaXMuX3BhcmVudDtcbiAgICBpZiAoZGVmaW5lZChwYXJlbnQpICYmIHRoaXMuX2ZyYW1lVXBkYXRlZCAhPT0gcGFyZW50Ll9mcmFtZVVwZGF0ZWQpIHtcbiAgICAgIGN1c3RvbURhdGEubGVuZ3RoID0gMDtcblxuICAgICAgcmVjdGFuZ2xlID0gdGhpcy5fcmVjdGFuZ2xlO1xuICAgICAgdmFyIHBhcmVudEN1c3RvbURhdGEgPSBwYXJlbnQuY3VzdG9tRGF0YTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXJlbnRDdXN0b21EYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGRhdGEgPSBwYXJlbnRDdXN0b21EYXRhW2ldO1xuICAgICAgICBpZiAoUmVjdGFuZ2xlLmNvbnRhaW5zKHJlY3RhbmdsZSwgZGF0YS5wb3NpdGlvbkNhcnRvZ3JhcGhpYykpIHtcbiAgICAgICAgICBjdXN0b21EYXRhLnB1c2goZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fZnJhbWVVcGRhdGVkID0gcGFyZW50Ll9mcmFtZVVwZGF0ZWQ7XG4gICAgfVxuICB9XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhRdWFkdHJlZVRpbGUucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxpbmcgc2NoZW1lIHVzZWQgdG8gdGlsZSB0aGUgc3VyZmFjZS5cbiAgICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZS5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICovXG4gIHRpbGluZ1NjaGVtZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxlIFggY29vcmRpbmF0ZS5cbiAgICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZS5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl94O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRpbGUgWSBjb29yZGluYXRlLlxuICAgKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgeToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3k7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgbGV2ZWwtb2YtZGV0YWlsLCB3aGVyZSB6ZXJvIGlzIHRoZSBjb2Fyc2VzdCwgbGVhc3QtZGV0YWlsZWQuXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBsZXZlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2xldmVsO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHBhcmVudCB0aWxlIG9mIHRoaXMgdGlsZS5cbiAgICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZS5wcm90b3R5cGVcbiAgICogQHR5cGUge1F1YWR0cmVlVGlsZX1cbiAgICovXG4gIHBhcmVudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjYXJ0b2dyYXBoaWMgcmVjdGFuZ2xlIG9mIHRoZSB0aWxlLCB3aXRoIG5vcnRoLCBzb3V0aCwgZWFzdCBhbmRcbiAgICogd2VzdCBwcm9wZXJ0aWVzIGluIHJhZGlhbnMuXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtSZWN0YW5nbGV9XG4gICAqL1xuICByZWN0YW5nbGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWN0YW5nbGU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgdGlsZXMgdGhhdCBpcyBhdCB0aGUgbmV4dCBsZXZlbCBvZiB0aGUgdGlsZSB0cmVlLlxuICAgKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UXVhZHRyZWVUaWxlW119XG4gICAqL1xuICBjaGlsZHJlbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgdGhpcy5ub3J0aHdlc3RDaGlsZCxcbiAgICAgICAgdGhpcy5ub3J0aGVhc3RDaGlsZCxcbiAgICAgICAgdGhpcy5zb3V0aHdlc3RDaGlsZCxcbiAgICAgICAgdGhpcy5zb3V0aGVhc3RDaGlsZCxcbiAgICAgIF07XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgc291dGh3ZXN0IGNoaWxkIHRpbGUuXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtRdWFkdHJlZVRpbGV9XG4gICAqL1xuICBzb3V0aHdlc3RDaGlsZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFkZWZpbmVkKHRoaXMuX3NvdXRod2VzdENoaWxkKSkge1xuICAgICAgICB0aGlzLl9zb3V0aHdlc3RDaGlsZCA9IG5ldyBRdWFkdHJlZVRpbGUoe1xuICAgICAgICAgIHRpbGluZ1NjaGVtZTogdGhpcy50aWxpbmdTY2hlbWUsXG4gICAgICAgICAgeDogdGhpcy54ICogMixcbiAgICAgICAgICB5OiB0aGlzLnkgKiAyICsgMSxcbiAgICAgICAgICBsZXZlbDogdGhpcy5sZXZlbCArIDEsXG4gICAgICAgICAgcGFyZW50OiB0aGlzLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9zb3V0aHdlc3RDaGlsZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzb3V0aGVhc3QgY2hpbGQgdGlsZS5cbiAgICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZS5wcm90b3R5cGVcbiAgICogQHR5cGUge1F1YWR0cmVlVGlsZX1cbiAgICovXG4gIHNvdXRoZWFzdENoaWxkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWRlZmluZWQodGhpcy5fc291dGhlYXN0Q2hpbGQpKSB7XG4gICAgICAgIHRoaXMuX3NvdXRoZWFzdENoaWxkID0gbmV3IFF1YWR0cmVlVGlsZSh7XG4gICAgICAgICAgdGlsaW5nU2NoZW1lOiB0aGlzLnRpbGluZ1NjaGVtZSxcbiAgICAgICAgICB4OiB0aGlzLnggKiAyICsgMSxcbiAgICAgICAgICB5OiB0aGlzLnkgKiAyICsgMSxcbiAgICAgICAgICBsZXZlbDogdGhpcy5sZXZlbCArIDEsXG4gICAgICAgICAgcGFyZW50OiB0aGlzLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9zb3V0aGVhc3RDaGlsZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBub3J0aHdlc3QgY2hpbGQgdGlsZS5cbiAgICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZS5wcm90b3R5cGVcbiAgICogQHR5cGUge1F1YWR0cmVlVGlsZX1cbiAgICovXG4gIG5vcnRod2VzdENoaWxkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWRlZmluZWQodGhpcy5fbm9ydGh3ZXN0Q2hpbGQpKSB7XG4gICAgICAgIHRoaXMuX25vcnRod2VzdENoaWxkID0gbmV3IFF1YWR0cmVlVGlsZSh7XG4gICAgICAgICAgdGlsaW5nU2NoZW1lOiB0aGlzLnRpbGluZ1NjaGVtZSxcbiAgICAgICAgICB4OiB0aGlzLnggKiAyLFxuICAgICAgICAgIHk6IHRoaXMueSAqIDIsXG4gICAgICAgICAgbGV2ZWw6IHRoaXMubGV2ZWwgKyAxLFxuICAgICAgICAgIHBhcmVudDogdGhpcyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fbm9ydGh3ZXN0Q2hpbGQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgbm9ydGhlYXN0IGNoaWxkIHRpbGUuXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtRdWFkdHJlZVRpbGV9XG4gICAqL1xuICBub3J0aGVhc3RDaGlsZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFkZWZpbmVkKHRoaXMuX25vcnRoZWFzdENoaWxkKSkge1xuICAgICAgICB0aGlzLl9ub3J0aGVhc3RDaGlsZCA9IG5ldyBRdWFkdHJlZVRpbGUoe1xuICAgICAgICAgIHRpbGluZ1NjaGVtZTogdGhpcy50aWxpbmdTY2hlbWUsXG4gICAgICAgICAgeDogdGhpcy54ICogMiArIDEsXG4gICAgICAgICAgeTogdGhpcy55ICogMixcbiAgICAgICAgICBsZXZlbDogdGhpcy5sZXZlbCArIDEsXG4gICAgICAgICAgcGFyZW50OiB0aGlzLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9ub3J0aGVhc3RDaGlsZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBvYmplY3RzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRpbGUuXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICovXG4gIGN1c3RvbURhdGE6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jdXN0b21EYXRhO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoaXMgdGlsZSBuZWVkcyBmdXJ0aGVyIGxvYWRpbmcuXG4gICAqIFRoaXMgcHJvcGVydHkgd2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGUge0BsaW5rIFF1YWR0cmVlVGlsZSNzdGF0ZX0gaXNcbiAgICogPGNvZGU+U1RBUlQ8L2NvZGU+IG9yIDxjb2RlPkxPQURJTkc8L2NvZGU+LlxuICAgKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIG5lZWRzTG9hZGluZzoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPCBRdWFkdHJlZVRpbGVMb2FkU3RhdGUuRE9ORTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGlzIHRpbGUgaXMgZWxpZ2libGUgdG8gYmUgdW5sb2FkZWQuXG4gICAqIFR5cGljYWxseSwgYSB0aWxlIGlzIGluZWxpZ2libGUgdG8gYmUgdW5sb2FkZWQgd2hpbGUgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbixcbiAgICogc3VjaCBhcyBhIHJlcXVlc3QgZm9yIGRhdGEsIGlzIGluIHByb2dyZXNzIG9uIGl0LiAgQSB0aWxlIHdpbGwgbmV2ZXIgYmVcbiAgICogdW5sb2FkZWQgd2hpbGUgaXQgaXMgbmVlZGVkIGZvciByZW5kZXJpbmcsIHJlZ2FyZGxlc3Mgb2YgdGhlIHZhbHVlIG9mIHRoaXNcbiAgICogcHJvcGVydHkuICBJZiB7QGxpbmsgUXVhZHRyZWVUaWxlI2RhdGF9IGlzIGRlZmluZWQgYW5kIGhhcyBhblxuICAgKiA8Y29kZT5lbGlnaWJsZUZvclVubG9hZGluZzwvY29kZT4gcHJvcGVydHksIHRoZSB2YWx1ZSBvZiB0aGF0IHByb3BlcnR5IGlzIHJldHVybmVkLlxuICAgKiBPdGhlcndpc2UsIHRoaXMgcHJvcGVydHkgcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIGVsaWdpYmxlRm9yVW5sb2FkaW5nOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblxuICAgICAgaWYgKGRlZmluZWQodGhpcy5kYXRhKSkge1xuICAgICAgICByZXN1bHQgPSB0aGlzLmRhdGEuZWxpZ2libGVGb3JVbmxvYWRpbmc7XG4gICAgICAgIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gIH0sXG59KTtcblxuUXVhZHRyZWVUaWxlLnByb3RvdHlwZS5maW5kTGV2ZWxaZXJvVGlsZSA9IGZ1bmN0aW9uIChsZXZlbFplcm9UaWxlcywgeCwgeSkge1xuICB2YXIgeFRpbGVzID0gdGhpcy50aWxpbmdTY2hlbWUuZ2V0TnVtYmVyT2ZYVGlsZXNBdExldmVsKDApO1xuICBpZiAoeCA8IDApIHtcbiAgICB4ICs9IHhUaWxlcztcbiAgfSBlbHNlIGlmICh4ID49IHhUaWxlcykge1xuICAgIHggLT0geFRpbGVzO1xuICB9XG5cbiAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy50aWxpbmdTY2hlbWUuZ2V0TnVtYmVyT2ZZVGlsZXNBdExldmVsKDApKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiBsZXZlbFplcm9UaWxlcy5maWx0ZXIoZnVuY3Rpb24gKHRpbGUpIHtcbiAgICByZXR1cm4gdGlsZS54ID09PSB4ICYmIHRpbGUueSA9PT0geTtcbiAgfSlbMF07XG59O1xuXG5RdWFkdHJlZVRpbGUucHJvdG90eXBlLmZpbmRUaWxlVG9XZXN0ID0gZnVuY3Rpb24gKGxldmVsWmVyb1RpbGVzKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDtcbiAgaWYgKHBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZExldmVsWmVyb1RpbGUobGV2ZWxaZXJvVGlsZXMsIHRoaXMueCAtIDEsIHRoaXMueSk7XG4gIH1cblxuICBpZiAocGFyZW50LnNvdXRoZWFzdENoaWxkID09PSB0aGlzKSB7XG4gICAgcmV0dXJuIHBhcmVudC5zb3V0aHdlc3RDaGlsZDtcbiAgfSBlbHNlIGlmIChwYXJlbnQubm9ydGhlYXN0Q2hpbGQgPT09IHRoaXMpIHtcbiAgICByZXR1cm4gcGFyZW50Lm5vcnRod2VzdENoaWxkO1xuICB9XG5cbiAgdmFyIHdlc3RPZlBhcmVudCA9IHBhcmVudC5maW5kVGlsZVRvV2VzdChsZXZlbFplcm9UaWxlcyk7XG4gIGlmICh3ZXN0T2ZQYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAocGFyZW50LnNvdXRod2VzdENoaWxkID09PSB0aGlzKSB7XG4gICAgcmV0dXJuIHdlc3RPZlBhcmVudC5zb3V0aGVhc3RDaGlsZDtcbiAgfVxuICByZXR1cm4gd2VzdE9mUGFyZW50Lm5vcnRoZWFzdENoaWxkO1xufTtcblxuUXVhZHRyZWVUaWxlLnByb3RvdHlwZS5maW5kVGlsZVRvRWFzdCA9IGZ1bmN0aW9uIChsZXZlbFplcm9UaWxlcykge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gIGlmIChwYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLmZpbmRMZXZlbFplcm9UaWxlKGxldmVsWmVyb1RpbGVzLCB0aGlzLnggKyAxLCB0aGlzLnkpO1xuICB9XG5cbiAgaWYgKHBhcmVudC5zb3V0aHdlc3RDaGlsZCA9PT0gdGhpcykge1xuICAgIHJldHVybiBwYXJlbnQuc291dGhlYXN0Q2hpbGQ7XG4gIH0gZWxzZSBpZiAocGFyZW50Lm5vcnRod2VzdENoaWxkID09PSB0aGlzKSB7XG4gICAgcmV0dXJuIHBhcmVudC5ub3J0aGVhc3RDaGlsZDtcbiAgfVxuXG4gIHZhciBlYXN0T2ZQYXJlbnQgPSBwYXJlbnQuZmluZFRpbGVUb0Vhc3QobGV2ZWxaZXJvVGlsZXMpO1xuICBpZiAoZWFzdE9mUGFyZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKHBhcmVudC5zb3V0aGVhc3RDaGlsZCA9PT0gdGhpcykge1xuICAgIHJldHVybiBlYXN0T2ZQYXJlbnQuc291dGh3ZXN0Q2hpbGQ7XG4gIH1cbiAgcmV0dXJuIGVhc3RPZlBhcmVudC5ub3J0aHdlc3RDaGlsZDtcbn07XG5cblF1YWR0cmVlVGlsZS5wcm90b3R5cGUuZmluZFRpbGVUb1NvdXRoID0gZnVuY3Rpb24gKGxldmVsWmVyb1RpbGVzKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDtcbiAgaWYgKHBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZExldmVsWmVyb1RpbGUobGV2ZWxaZXJvVGlsZXMsIHRoaXMueCwgdGhpcy55ICsgMSk7XG4gIH1cblxuICBpZiAocGFyZW50Lm5vcnRod2VzdENoaWxkID09PSB0aGlzKSB7XG4gICAgcmV0dXJuIHBhcmVudC5zb3V0aHdlc3RDaGlsZDtcbiAgfSBlbHNlIGlmIChwYXJlbnQubm9ydGhlYXN0Q2hpbGQgPT09IHRoaXMpIHtcbiAgICByZXR1cm4gcGFyZW50LnNvdXRoZWFzdENoaWxkO1xuICB9XG5cbiAgdmFyIHNvdXRoT2ZQYXJlbnQgPSBwYXJlbnQuZmluZFRpbGVUb1NvdXRoKGxldmVsWmVyb1RpbGVzKTtcbiAgaWYgKHNvdXRoT2ZQYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAocGFyZW50LnNvdXRod2VzdENoaWxkID09PSB0aGlzKSB7XG4gICAgcmV0dXJuIHNvdXRoT2ZQYXJlbnQubm9ydGh3ZXN0Q2hpbGQ7XG4gIH1cbiAgcmV0dXJuIHNvdXRoT2ZQYXJlbnQubm9ydGhlYXN0Q2hpbGQ7XG59O1xuXG5RdWFkdHJlZVRpbGUucHJvdG90eXBlLmZpbmRUaWxlVG9Ob3J0aCA9IGZ1bmN0aW9uIChsZXZlbFplcm9UaWxlcykge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gIGlmIChwYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLmZpbmRMZXZlbFplcm9UaWxlKGxldmVsWmVyb1RpbGVzLCB0aGlzLngsIHRoaXMueSAtIDEpO1xuICB9XG5cbiAgaWYgKHBhcmVudC5zb3V0aHdlc3RDaGlsZCA9PT0gdGhpcykge1xuICAgIHJldHVybiBwYXJlbnQubm9ydGh3ZXN0Q2hpbGQ7XG4gIH0gZWxzZSBpZiAocGFyZW50LnNvdXRoZWFzdENoaWxkID09PSB0aGlzKSB7XG4gICAgcmV0dXJuIHBhcmVudC5ub3J0aGVhc3RDaGlsZDtcbiAgfVxuXG4gIHZhciBub3J0aE9mUGFyZW50ID0gcGFyZW50LmZpbmRUaWxlVG9Ob3J0aChsZXZlbFplcm9UaWxlcyk7XG4gIGlmIChub3J0aE9mUGFyZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKHBhcmVudC5ub3J0aHdlc3RDaGlsZCA9PT0gdGhpcykge1xuICAgIHJldHVybiBub3J0aE9mUGFyZW50LnNvdXRod2VzdENoaWxkO1xuICB9XG4gIHJldHVybiBub3J0aE9mUGFyZW50LnNvdXRoZWFzdENoaWxkO1xufTtcblxuLyoqXG4gKiBGcmVlcyB0aGUgcmVzb3VyY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRpbGUgYW5kIHJldHVybnMgaXQgdG8gdGhlIDxjb2RlPlNUQVJUPC9jb2RlPlxuICoge0BsaW5rIFF1YWR0cmVlVGlsZUxvYWRTdGF0ZX0uICBJZiB0aGUge0BsaW5rIFF1YWR0cmVlVGlsZSNkYXRhfSBwcm9wZXJ0eSBpcyBkZWZpbmVkIGFuZCBpdFxuICogaGFzIGEgPGNvZGU+ZnJlZVJlc291cmNlczwvY29kZT4gbWV0aG9kLCB0aGUgbWV0aG9kIHdpbGwgYmUgaW52b2tlZC5cbiAqXG4gKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlXG4gKi9cblF1YWR0cmVlVGlsZS5wcm90b3R5cGUuZnJlZVJlc291cmNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5zdGF0ZSA9IFF1YWR0cmVlVGlsZUxvYWRTdGF0ZS5TVEFSVDtcbiAgdGhpcy5yZW5kZXJhYmxlID0gZmFsc2U7XG4gIHRoaXMudXBzYW1wbGVkRnJvbVBhcmVudCA9IGZhbHNlO1xuXG4gIGlmIChkZWZpbmVkKHRoaXMuZGF0YSkgJiYgZGVmaW5lZCh0aGlzLmRhdGEuZnJlZVJlc291cmNlcykpIHtcbiAgICB0aGlzLmRhdGEuZnJlZVJlc291cmNlcygpO1xuICB9XG5cbiAgZnJlZVRpbGUodGhpcy5fc291dGh3ZXN0Q2hpbGQpO1xuICB0aGlzLl9zb3V0aHdlc3RDaGlsZCA9IHVuZGVmaW5lZDtcbiAgZnJlZVRpbGUodGhpcy5fc291dGhlYXN0Q2hpbGQpO1xuICB0aGlzLl9zb3V0aGVhc3RDaGlsZCA9IHVuZGVmaW5lZDtcbiAgZnJlZVRpbGUodGhpcy5fbm9ydGh3ZXN0Q2hpbGQpO1xuICB0aGlzLl9ub3J0aHdlc3RDaGlsZCA9IHVuZGVmaW5lZDtcbiAgZnJlZVRpbGUodGhpcy5fbm9ydGhlYXN0Q2hpbGQpO1xuICB0aGlzLl9ub3J0aGVhc3RDaGlsZCA9IHVuZGVmaW5lZDtcbn07XG5cbmZ1bmN0aW9uIGZyZWVUaWxlKHRpbGUpIHtcbiAgaWYgKGRlZmluZWQodGlsZSkpIHtcbiAgICB0aWxlLmZyZWVSZXNvdXJjZXMoKTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgUXVhZHRyZWVUaWxlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///19543\n')},85828:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * The state of a {@link QuadtreeTile} in the tile load pipeline.\n * @enum {Number}\n * @private\n */\nvar QuadtreeTileLoadState = {\n  /**\n   * The tile is new and loading has not yet begun.\n   * @type QuadtreeTileLoadState\n   * @constant\n   * @default 0\n   */\n  START: 0,\n\n  /**\n   * Loading is in progress.\n   * @type QuadtreeTileLoadState\n   * @constant\n   * @default 1\n   */\n  LOADING: 1,\n\n  /**\n   * Loading is complete.\n   * @type QuadtreeTileLoadState\n   * @constant\n   * @default 2\n   */\n  DONE: 2,\n\n  /**\n   * The tile has failed to load.\n   * @type QuadtreeTileLoadState\n   * @constant\n   * @default 3\n   */\n  FAILED: 3,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(QuadtreeTileLoadState));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODU4MjguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsb0NBQW9DLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvUXVhZHRyZWVUaWxlTG9hZFN0YXRlLmpzPzc5M2MiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgc3RhdGUgb2YgYSB7QGxpbmsgUXVhZHRyZWVUaWxlfSBpbiB0aGUgdGlsZSBsb2FkIHBpcGVsaW5lLlxuICogQGVudW0ge051bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBRdWFkdHJlZVRpbGVMb2FkU3RhdGUgPSB7XG4gIC8qKlxuICAgKiBUaGUgdGlsZSBpcyBuZXcgYW5kIGxvYWRpbmcgaGFzIG5vdCB5ZXQgYmVndW4uXG4gICAqIEB0eXBlIFF1YWR0cmVlVGlsZUxvYWRTdGF0ZVxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgU1RBUlQ6IDAsXG5cbiAgLyoqXG4gICAqIExvYWRpbmcgaXMgaW4gcHJvZ3Jlc3MuXG4gICAqIEB0eXBlIFF1YWR0cmVlVGlsZUxvYWRTdGF0ZVxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlZmF1bHQgMVxuICAgKi9cbiAgTE9BRElORzogMSxcblxuICAvKipcbiAgICogTG9hZGluZyBpcyBjb21wbGV0ZS5cbiAgICogQHR5cGUgUXVhZHRyZWVUaWxlTG9hZFN0YXRlXG4gICAqIEBjb25zdGFudFxuICAgKiBAZGVmYXVsdCAyXG4gICAqL1xuICBET05FOiAyLFxuXG4gIC8qKlxuICAgKiBUaGUgdGlsZSBoYXMgZmFpbGVkIHRvIGxvYWQuXG4gICAqIEB0eXBlIFF1YWR0cmVlVGlsZUxvYWRTdGF0ZVxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlZmF1bHQgM1xuICAgKi9cbiAgRkFJTEVEOiAzLFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoUXVhZHRyZWVUaWxlTG9hZFN0YXRlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///85828\n')},8158:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n\n\n/**\n * Provides general quadtree tiles to be displayed on or near the surface of an ellipsoid.  It is intended to be\n * used with the {@link QuadtreePrimitive}.  This type describes an interface and is not intended to be\n * instantiated directly.\n *\n * @alias QuadtreeTileProvider\n * @constructor\n * @private\n */\nfunction QuadtreeTileProvider() {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n}\n\n/**\n * Computes the default geometric error for level zero of the quadtree.\n *\n * @memberof QuadtreeTileProvider\n *\n * @param {TilingScheme} tilingScheme The tiling scheme for which to compute the geometric error.\n * @returns {Number} The maximum geometric error at level zero, in meters.\n */\nQuadtreeTileProvider.computeDefaultLevelZeroMaximumGeometricError = function (\n  tilingScheme\n) {\n  return (\n    (tilingScheme.ellipsoid.maximumRadius * 2 * Math.PI * 0.25) /\n    (65 * tilingScheme.getNumberOfXTilesAtLevel(0))\n  );\n};\n\nObject.defineProperties(QuadtreeTileProvider.prototype, {\n  /**\n   * Gets or sets the {@link QuadtreePrimitive} for which this provider is\n   * providing tiles.\n   * @memberof QuadtreeTileProvider.prototype\n   * @type {QuadtreePrimitive}\n   */\n  quadtree: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n    set: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof QuadtreeTileProvider.prototype\n   * @type {Boolean}\n   */\n  ready: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets the tiling scheme used by the provider.  This property should\n   * not be accessed before {@link QuadtreeTileProvider#ready} returns true.\n   * @memberof QuadtreeTileProvider.prototype\n   * @type {TilingScheme}\n   */\n  tilingScheme: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n\n  /**\n   * Gets an event that is raised when the geometry provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof QuadtreeTileProvider.prototype\n   * @type {Event}\n   */\n  errorEvent: {\n    get: _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError,\n  },\n});\n\n/**\n * Called at the beginning of the update cycle, regardless of id a new frame is being rendered, before {@link QuadtreeTileProvider#beginUpdate}\n * @memberof QuadtreeTileProvider\n * @function\n *\n * @param {Context} context The rendering context.\n * @param {FrameState} frameState The frame state.\n */\nQuadtreeTileProvider.prototype.update = _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Called at the beginning of the update cycle for each render frame, before {@link QuadtreeTileProvider#showTileThisFrame}\n * or any other functions.\n * @memberof QuadtreeTileProvider\n * @function\n *\n * @param {Context} context The rendering context.\n * @param {FrameState} frameState The frame state.\n * @param {DrawCommand[]} commandList An array of rendering commands.  This method may push\n *        commands into this array.\n */\nQuadtreeTileProvider.prototype.beginUpdate =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Called at the end of the update cycle for each render frame, after {@link QuadtreeTileProvider#showTileThisFrame}\n * and any other functions.\n * @memberof QuadtreeTileProvider\n * @function\n *\n * @param {Context} context The rendering context.\n * @param {FrameState} frameState The frame state.\n * @param {DrawCommand[]} commandList An array of rendering commands.  This method may push\n *        commands into this array.\n */\nQuadtreeTileProvider.prototype.endUpdate =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Gets the maximum geometric error allowed in a tile at a given level, in meters.  This function should not be\n * called before {@link QuadtreeTileProvider#ready} returns true.\n *\n * @see QuadtreeTileProvider#computeDefaultLevelZeroMaximumGeometricError\n *\n * @memberof QuadtreeTileProvider\n * @function\n *\n * @param {Number} level The tile level for which to get the maximum geometric error.\n * @returns {Number} The maximum geometric error in meters.\n */\nQuadtreeTileProvider.prototype.getLevelMaximumGeometricError =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Loads, or continues loading, a given tile.  This function will continue to be called\n * until {@link QuadtreeTile#state} is no longer {@link QuadtreeTileLoadState#LOADING}.  This function should\n * not be called before {@link QuadtreeTileProvider#ready} returns true.\n *\n * @memberof QuadtreeTileProvider\n * @function\n *\n * @param {Context} context The rendering context.\n * @param {FrameState} frameState The frame state.\n * @param {QuadtreeTile} tile The tile to load.\n *\n * @exception {DeveloperError} <code>loadTile</code> must not be called before the tile provider is ready.\n */\nQuadtreeTileProvider.prototype.loadTile =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Determines the visibility of a given tile.  The tile may be fully visible, partially visible, or not\n * visible at all.  Tiles that are renderable and are at least partially visible will be shown by a call\n * to {@link QuadtreeTileProvider#showTileThisFrame}.\n *\n * @memberof QuadtreeTileProvider\n *\n * @param {QuadtreeTile} tile The tile instance.\n * @param {FrameState} frameState The state information about the current frame.\n * @param {QuadtreeOccluders} occluders The objects that may occlude this tile.\n *\n * @returns {Visibility} The visibility of the tile.\n */\nQuadtreeTileProvider.prototype.computeTileVisibility =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Shows a specified tile in this frame.  The provider can cause the tile to be shown by adding\n * render commands to the commandList, or use any other method as appropriate.  The tile is not\n * expected to be visible next frame as well, unless this method is call next frame, too.\n *\n * @memberof QuadtreeTileProvider\n * @function\n *\n * @param {QuadtreeTile} tile The tile instance.\n * @param {Context} context The rendering context.\n * @param {FrameState} frameState The state information of the current rendering frame.\n * @param {DrawCommand[]} commandList The list of rendering commands.  This method may add additional commands to this list.\n */\nQuadtreeTileProvider.prototype.showTileThisFrame =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Gets the distance from the camera to the closest point on the tile.  This is used for level-of-detail selection.\n *\n * @memberof QuadtreeTileProvider\n * @function\n *\n * @param {QuadtreeTile} tile The tile instance.\n * @param {FrameState} frameState The state information of the current rendering frame.\n *\n * @returns {Number} The distance from the camera to the closest point on the tile, in meters.\n */\nQuadtreeTileProvider.prototype.computeDistanceToTile =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @memberof QuadtreeTileProvider\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n *\n * @see QuadtreeTileProvider#destroy\n */\nQuadtreeTileProvider.prototype.isDestroyed =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @memberof QuadtreeTileProvider\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * provider = provider && provider();\n *\n * @see QuadtreeTileProvider#isDestroyed\n */\nQuadtreeTileProvider.prototype.destroy = _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (QuadtreeTileProvider)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0JBQXNCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsd0hBQXNDO0FBQy9FLHNFQUFlLG9FQUFvQixJQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1F1YWR0cmVlVGlsZVByb3ZpZGVyLmpzP2IxNTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5cbi8qKlxuICogUHJvdmlkZXMgZ2VuZXJhbCBxdWFkdHJlZSB0aWxlcyB0byBiZSBkaXNwbGF5ZWQgb24gb3IgbmVhciB0aGUgc3VyZmFjZSBvZiBhbiBlbGxpcHNvaWQuICBJdCBpcyBpbnRlbmRlZCB0byBiZVxuICogdXNlZCB3aXRoIHRoZSB7QGxpbmsgUXVhZHRyZWVQcmltaXRpdmV9LiAgVGhpcyB0eXBlIGRlc2NyaWJlcyBhbiBpbnRlcmZhY2UgYW5kIGlzIG5vdCBpbnRlbmRlZCB0byBiZVxuICogaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxuICpcbiAqIEBhbGlhcyBRdWFkdHJlZVRpbGVQcm92aWRlclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBRdWFkdHJlZVRpbGVQcm92aWRlcigpIHtcbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IoKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGVmYXVsdCBnZW9tZXRyaWMgZXJyb3IgZm9yIGxldmVsIHplcm8gb2YgdGhlIHF1YWR0cmVlLlxuICpcbiAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGVQcm92aWRlclxuICpcbiAqIEBwYXJhbSB7VGlsaW5nU2NoZW1lfSB0aWxpbmdTY2hlbWUgVGhlIHRpbGluZyBzY2hlbWUgZm9yIHdoaWNoIHRvIGNvbXB1dGUgdGhlIGdlb21ldHJpYyBlcnJvci5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBtYXhpbXVtIGdlb21ldHJpYyBlcnJvciBhdCBsZXZlbCB6ZXJvLCBpbiBtZXRlcnMuXG4gKi9cblF1YWR0cmVlVGlsZVByb3ZpZGVyLmNvbXB1dGVEZWZhdWx0TGV2ZWxaZXJvTWF4aW11bUdlb21ldHJpY0Vycm9yID0gZnVuY3Rpb24gKFxuICB0aWxpbmdTY2hlbWVcbikge1xuICByZXR1cm4gKFxuICAgICh0aWxpbmdTY2hlbWUuZWxsaXBzb2lkLm1heGltdW1SYWRpdXMgKiAyICogTWF0aC5QSSAqIDAuMjUpIC9cbiAgICAoNjUgKiB0aWxpbmdTY2hlbWUuZ2V0TnVtYmVyT2ZYVGlsZXNBdExldmVsKDApKVxuICApO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUXVhZHRyZWVUaWxlUHJvdmlkZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHtAbGluayBRdWFkdHJlZVByaW1pdGl2ZX0gZm9yIHdoaWNoIHRoaXMgcHJvdmlkZXIgaXNcbiAgICogcHJvdmlkaW5nIHRpbGVzLlxuICAgKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlUHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtRdWFkdHJlZVByaW1pdGl2ZX1cbiAgICovXG4gIHF1YWR0cmVlOiB7XG4gICAgZ2V0OiBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcixcbiAgICBzZXQ6IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yLFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIHJlYWR5OiB7XG4gICAgZ2V0OiBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcixcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgdGlsaW5nIHNjaGVtZSB1c2VkIGJ5IHRoZSBwcm92aWRlci4gIFRoaXMgcHJvcGVydHkgc2hvdWxkXG4gICAqIG5vdCBiZSBhY2Nlc3NlZCBiZWZvcmUge0BsaW5rIFF1YWR0cmVlVGlsZVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGVQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICovXG4gIHRpbGluZ1NjaGVtZToge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiB0aGUgZ2VvbWV0cnkgcHJvdmlkZXIgZW5jb3VudGVycyBhbiBhc3luY2hyb25vdXMgZXJyb3IuICBCeSBzdWJzY3JpYmluZ1xuICAgKiB0byB0aGUgZXZlbnQsIHlvdSB3aWxsIGJlIG5vdGlmaWVkIG9mIHRoZSBlcnJvciBhbmQgY2FuIHBvdGVudGlhbGx5IHJlY292ZXIgZnJvbSBpdC4gIEV2ZW50IGxpc3RlbmVyc1xuICAgKiBhcmUgcGFzc2VkIGFuIGluc3RhbmNlIG9mIHtAbGluayBUaWxlUHJvdmlkZXJFcnJvcn0uXG4gICAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGVQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKi9cbiAgZXJyb3JFdmVudDoge1xuICAgIGdldDogRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IsXG4gIH0sXG59KTtcblxuLyoqXG4gKiBDYWxsZWQgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgdXBkYXRlIGN5Y2xlLCByZWdhcmRsZXNzIG9mIGlkIGEgbmV3IGZyYW1lIGlzIGJlaW5nIHJlbmRlcmVkLCBiZWZvcmUge0BsaW5rIFF1YWR0cmVlVGlsZVByb3ZpZGVyI2JlZ2luVXBkYXRlfVxuICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZVByb3ZpZGVyXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge0NvbnRleHR9IGNvbnRleHQgVGhlIHJlbmRlcmluZyBjb250ZXh0LlxuICogQHBhcmFtIHtGcmFtZVN0YXRlfSBmcmFtZVN0YXRlIFRoZSBmcmFtZSBzdGF0ZS5cbiAqL1xuUXVhZHRyZWVUaWxlUHJvdmlkZXIucHJvdG90eXBlLnVwZGF0ZSA9IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIENhbGxlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSB1cGRhdGUgY3ljbGUgZm9yIGVhY2ggcmVuZGVyIGZyYW1lLCBiZWZvcmUge0BsaW5rIFF1YWR0cmVlVGlsZVByb3ZpZGVyI3Nob3dUaWxlVGhpc0ZyYW1lfVxuICogb3IgYW55IG90aGVyIGZ1bmN0aW9ucy5cbiAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGVQcm92aWRlclxuICogQGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtDb250ZXh0fSBjb250ZXh0IFRoZSByZW5kZXJpbmcgY29udGV4dC5cbiAqIEBwYXJhbSB7RnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBUaGUgZnJhbWUgc3RhdGUuXG4gKiBAcGFyYW0ge0RyYXdDb21tYW5kW119IGNvbW1hbmRMaXN0IEFuIGFycmF5IG9mIHJlbmRlcmluZyBjb21tYW5kcy4gIFRoaXMgbWV0aG9kIG1heSBwdXNoXG4gKiAgICAgICAgY29tbWFuZHMgaW50byB0aGlzIGFycmF5LlxuICovXG5RdWFkdHJlZVRpbGVQcm92aWRlci5wcm90b3R5cGUuYmVnaW5VcGRhdGUgPVxuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcjtcblxuLyoqXG4gKiBDYWxsZWQgYXQgdGhlIGVuZCBvZiB0aGUgdXBkYXRlIGN5Y2xlIGZvciBlYWNoIHJlbmRlciBmcmFtZSwgYWZ0ZXIge0BsaW5rIFF1YWR0cmVlVGlsZVByb3ZpZGVyI3Nob3dUaWxlVGhpc0ZyYW1lfVxuICogYW5kIGFueSBvdGhlciBmdW5jdGlvbnMuXG4gKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlUHJvdmlkZXJcbiAqIEBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7Q29udGV4dH0gY29udGV4dCBUaGUgcmVuZGVyaW5nIGNvbnRleHQuXG4gKiBAcGFyYW0ge0ZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgVGhlIGZyYW1lIHN0YXRlLlxuICogQHBhcmFtIHtEcmF3Q29tbWFuZFtdfSBjb21tYW5kTGlzdCBBbiBhcnJheSBvZiByZW5kZXJpbmcgY29tbWFuZHMuICBUaGlzIG1ldGhvZCBtYXkgcHVzaFxuICogICAgICAgIGNvbW1hbmRzIGludG8gdGhpcyBhcnJheS5cbiAqL1xuUXVhZHRyZWVUaWxlUHJvdmlkZXIucHJvdG90eXBlLmVuZFVwZGF0ZSA9XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIEdldHMgdGhlIG1heGltdW0gZ2VvbWV0cmljIGVycm9yIGFsbG93ZWQgaW4gYSB0aWxlIGF0IGEgZ2l2ZW4gbGV2ZWwsIGluIG1ldGVycy4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZVxuICogY2FsbGVkIGJlZm9yZSB7QGxpbmsgUXVhZHRyZWVUaWxlUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAqXG4gKiBAc2VlIFF1YWR0cmVlVGlsZVByb3ZpZGVyI2NvbXB1dGVEZWZhdWx0TGV2ZWxaZXJvTWF4aW11bUdlb21ldHJpY0Vycm9yXG4gKlxuICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZVByb3ZpZGVyXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWwgZm9yIHdoaWNoIHRvIGdldCB0aGUgbWF4aW11bSBnZW9tZXRyaWMgZXJyb3IuXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbWF4aW11bSBnZW9tZXRyaWMgZXJyb3IgaW4gbWV0ZXJzLlxuICovXG5RdWFkdHJlZVRpbGVQcm92aWRlci5wcm90b3R5cGUuZ2V0TGV2ZWxNYXhpbXVtR2VvbWV0cmljRXJyb3IgPVxuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcjtcblxuLyoqXG4gKiBMb2Fkcywgb3IgY29udGludWVzIGxvYWRpbmcsIGEgZ2l2ZW4gdGlsZS4gIFRoaXMgZnVuY3Rpb24gd2lsbCBjb250aW51ZSB0byBiZSBjYWxsZWRcbiAqIHVudGlsIHtAbGluayBRdWFkdHJlZVRpbGUjc3RhdGV9IGlzIG5vIGxvbmdlciB7QGxpbmsgUXVhZHRyZWVUaWxlTG9hZFN0YXRlI0xPQURJTkd9LiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBRdWFkdHJlZVRpbGVQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICpcbiAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGVQcm92aWRlclxuICogQGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtDb250ZXh0fSBjb250ZXh0IFRoZSByZW5kZXJpbmcgY29udGV4dC5cbiAqIEBwYXJhbSB7RnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBUaGUgZnJhbWUgc3RhdGUuXG4gKiBAcGFyYW0ge1F1YWR0cmVlVGlsZX0gdGlsZSBUaGUgdGlsZSB0byBsb2FkLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSA8Y29kZT5sb2FkVGlsZTwvY29kZT4gbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgdGlsZSBwcm92aWRlciBpcyByZWFkeS5cbiAqL1xuUXVhZHRyZWVUaWxlUHJvdmlkZXIucHJvdG90eXBlLmxvYWRUaWxlID1cbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3I7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgdmlzaWJpbGl0eSBvZiBhIGdpdmVuIHRpbGUuICBUaGUgdGlsZSBtYXkgYmUgZnVsbHkgdmlzaWJsZSwgcGFydGlhbGx5IHZpc2libGUsIG9yIG5vdFxuICogdmlzaWJsZSBhdCBhbGwuICBUaWxlcyB0aGF0IGFyZSByZW5kZXJhYmxlIGFuZCBhcmUgYXQgbGVhc3QgcGFydGlhbGx5IHZpc2libGUgd2lsbCBiZSBzaG93biBieSBhIGNhbGxcbiAqIHRvIHtAbGluayBRdWFkdHJlZVRpbGVQcm92aWRlciNzaG93VGlsZVRoaXNGcmFtZX0uXG4gKlxuICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZVByb3ZpZGVyXG4gKlxuICogQHBhcmFtIHtRdWFkdHJlZVRpbGV9IHRpbGUgVGhlIHRpbGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0ZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgVGhlIHN0YXRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IGZyYW1lLlxuICogQHBhcmFtIHtRdWFkdHJlZU9jY2x1ZGVyc30gb2NjbHVkZXJzIFRoZSBvYmplY3RzIHRoYXQgbWF5IG9jY2x1ZGUgdGhpcyB0aWxlLlxuICpcbiAqIEByZXR1cm5zIHtWaXNpYmlsaXR5fSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgdGlsZS5cbiAqL1xuUXVhZHRyZWVUaWxlUHJvdmlkZXIucHJvdG90eXBlLmNvbXB1dGVUaWxlVmlzaWJpbGl0eSA9XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIFNob3dzIGEgc3BlY2lmaWVkIHRpbGUgaW4gdGhpcyBmcmFtZS4gIFRoZSBwcm92aWRlciBjYW4gY2F1c2UgdGhlIHRpbGUgdG8gYmUgc2hvd24gYnkgYWRkaW5nXG4gKiByZW5kZXIgY29tbWFuZHMgdG8gdGhlIGNvbW1hbmRMaXN0LCBvciB1c2UgYW55IG90aGVyIG1ldGhvZCBhcyBhcHByb3ByaWF0ZS4gIFRoZSB0aWxlIGlzIG5vdFxuICogZXhwZWN0ZWQgdG8gYmUgdmlzaWJsZSBuZXh0IGZyYW1lIGFzIHdlbGwsIHVubGVzcyB0aGlzIG1ldGhvZCBpcyBjYWxsIG5leHQgZnJhbWUsIHRvby5cbiAqXG4gKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlUHJvdmlkZXJcbiAqIEBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7UXVhZHRyZWVUaWxlfSB0aWxlIFRoZSB0aWxlIGluc3RhbmNlLlxuICogQHBhcmFtIHtDb250ZXh0fSBjb250ZXh0IFRoZSByZW5kZXJpbmcgY29udGV4dC5cbiAqIEBwYXJhbSB7RnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBUaGUgc3RhdGUgaW5mb3JtYXRpb24gb2YgdGhlIGN1cnJlbnQgcmVuZGVyaW5nIGZyYW1lLlxuICogQHBhcmFtIHtEcmF3Q29tbWFuZFtdfSBjb21tYW5kTGlzdCBUaGUgbGlzdCBvZiByZW5kZXJpbmcgY29tbWFuZHMuICBUaGlzIG1ldGhvZCBtYXkgYWRkIGFkZGl0aW9uYWwgY29tbWFuZHMgdG8gdGhpcyBsaXN0LlxuICovXG5RdWFkdHJlZVRpbGVQcm92aWRlci5wcm90b3R5cGUuc2hvd1RpbGVUaGlzRnJhbWUgPVxuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcjtcblxuLyoqXG4gKiBHZXRzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgdG8gdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHRpbGUuICBUaGlzIGlzIHVzZWQgZm9yIGxldmVsLW9mLWRldGFpbCBzZWxlY3Rpb24uXG4gKlxuICogQG1lbWJlcm9mIFF1YWR0cmVlVGlsZVByb3ZpZGVyXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1F1YWR0cmVlVGlsZX0gdGlsZSBUaGUgdGlsZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7RnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBUaGUgc3RhdGUgaW5mb3JtYXRpb24gb2YgdGhlIGN1cnJlbnQgcmVuZGVyaW5nIGZyYW1lLlxuICpcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgdG8gdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHRpbGUsIGluIG1ldGVycy5cbiAqL1xuUXVhZHRyZWVUaWxlUHJvdmlkZXIucHJvdG90eXBlLmNvbXB1dGVEaXN0YW5jZVRvVGlsZSA9XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICogPGJyIC8+PGJyIC8+XG4gKiBJZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLlxuICpcbiAqIEBtZW1iZXJvZiBRdWFkdHJlZVRpbGVQcm92aWRlclxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgZmFsc2UuXG4gKlxuICogQHNlZSBRdWFkdHJlZVRpbGVQcm92aWRlciNkZXN0cm95XG4gKi9cblF1YWR0cmVlVGlsZVByb3ZpZGVyLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIERlc3Ryb3lzIHRoZSBXZWJHTCByZXNvdXJjZXMgaGVsZCBieSB0aGlzIG9iamVjdC4gIERlc3Ryb3lpbmcgYW4gb2JqZWN0IGFsbG93cyBmb3IgZGV0ZXJtaW5pc3RpY1xuICogcmVsZWFzZSBvZiBXZWJHTCByZXNvdXJjZXMsIGluc3RlYWQgb2YgcmVseWluZyBvbiB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZGVzdHJveSB0aGlzIG9iamVjdC5cbiAqIDxiciAvPjxiciAvPlxuICogT25jZSBhbiBvYmplY3QgaXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLiAgVGhlcmVmb3JlLFxuICogYXNzaWduIHRoZSByZXR1cm4gdmFsdWUgKDxjb2RlPnVuZGVmaW5lZDwvY29kZT4pIHRvIHRoZSBvYmplY3QgYXMgZG9uZSBpbiB0aGUgZXhhbXBsZS5cbiAqXG4gKiBAbWVtYmVyb2YgUXVhZHRyZWVUaWxlUHJvdmlkZXJcbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBwcm92aWRlciA9IHByb3ZpZGVyICYmIHByb3ZpZGVyKCk7XG4gKlxuICogQHNlZSBRdWFkdHJlZVRpbGVQcm92aWRlciNpc0Rlc3Ryb3llZFxuICovXG5RdWFkdHJlZVRpbGVQcm92aWRlci5wcm90b3R5cGUuZGVzdHJveSA9IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuZXhwb3J0IGRlZmF1bHQgUXVhZHRyZWVUaWxlUHJvdmlkZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8158\n')},38956:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _BufferLoader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(61446);\n/* harmony import */ var _GltfBufferViewLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42306);\n/* harmony import */ var _GltfDracoLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69179);\n/* harmony import */ var _GltfImageLoader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(24351);\n/* harmony import */ var _GltfIndexBufferLoader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(28096);\n/* harmony import */ var _GltfJsonLoader_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(60785);\n/* harmony import */ var _GltfTextureLoader_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(31129);\n/* harmony import */ var _GltfVertexBufferLoader_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(46398);\n/* harmony import */ var _MetadataSchemaLoader_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(87508);\n/* harmony import */ var _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(72638);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Cache for resources shared across 3D Tiles and glTF.\n *\n * @namespace ResourceCache\n *\n * @private\n */\nfunction ResourceCache() {}\n\nResourceCache.cacheEntries = {};\n\n/**\n * A reference-counted cache entry.\n *\n * @param {ResourceLoader} resourceLoader The resource.\n *\n * @alias CacheEntry\n * @constructor\n *\n * @private\n */\nfunction CacheEntry(resourceLoader) {\n  this.referenceCount = 1;\n  this.resourceLoader = resourceLoader;\n}\n\n/**\n * Gets a resource from the cache. If the resource exists its reference count is\n * incremented. Otherwise, if no resource loader exists, undefined is returned.\n *\n * @param {String} cacheKey The cache key of the resource.\n *\n * @returns {ResourceLoader|undefined} The resource.\n * @private\n */\nResourceCache.get = function (cacheKey) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("cacheKey", cacheKey);\n  //>>includeEnd(\'debug\');\n\n  var cacheEntry = ResourceCache.cacheEntries[cacheKey];\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(cacheEntry)) {\n    ++cacheEntry.referenceCount;\n    return cacheEntry.resourceLoader;\n  }\n  return undefined;\n};\n\n/**\n * Loads a resource and adds it to the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {ResourceLoader} options.resourceLoader The resource.\n *\n * @exception {DeveloperError} Resource with this cacheKey is already in the cach\n * @private\n */\nResourceCache.load = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var resourceLoader = options.resourceLoader;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.resourceLoader", resourceLoader);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = resourceLoader.cacheKey;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("options.resourceLoader.cacheKey", cacheKey);\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(ResourceCache.cacheEntries[cacheKey])) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "Resource with this cacheKey is already in the cache: " + cacheKey\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  ResourceCache.cacheEntries[cacheKey] = new CacheEntry(resourceLoader);\n\n  resourceLoader.load();\n};\n\n/**\n * Unloads a resource from the cache. When the reference count hits zero the\n * resource is destroyed.\n *\n * @param {ResourceLoader} resourceLoader The resource.\n *\n * @exception {DeveloperError} Resource is not in the cache.\n * @exception {DeveloperError} Cannot unload resource that has no references.\n * @private\n */\nResourceCache.unload = function (resourceLoader) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("resourceLoader", resourceLoader);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = resourceLoader.cacheKey;\n  var cacheEntry = ResourceCache.cacheEntries[cacheKey];\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(cacheEntry)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("Resource is not in the cache: " + cacheKey);\n  }\n  //>>includeEnd(\'debug\');\n\n  --cacheEntry.referenceCount;\n\n  if (cacheEntry.referenceCount === 0) {\n    resourceLoader.destroy();\n    delete ResourceCache.cacheEntries[cacheKey];\n  }\n};\n\n/**\n * Loads a schema from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} [options.schema] An object that explicitly defines a schema JSON. Mutually exclusive with options.resource.\n * @param {Resource} [options.resource] The {@link Resource} pointing to the schema JSON. Mutually exclusive with options.schema.\n *\n * @returns {MetadataSchemaLoader} The schema resource.\n *\n * @exception {DeveloperError} One of options.schema and options.resource must be defined.\n * @private\n */\nResourceCache.loadSchema = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var schema = options.schema;\n  var resource = options.resource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(schema) === (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(resource)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "One of options.schema and options.resource must be defined."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getSchemaCacheKey */ .Z.getSchemaCacheKey({\n    schema: schema,\n    resource: resource,\n  });\n\n  var schemaLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(schemaLoader)) {\n    return schemaLoader;\n  }\n\n  schemaLoader = new _MetadataSchemaLoader_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n    schema: schema,\n    resource: resource,\n    cacheKey: cacheKey,\n  });\n\n  ResourceCache.load({\n    resourceLoader: schemaLoader,\n  });\n\n  return schemaLoader;\n};\n\n/**\n * Load an embedded buffer from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource} options.parentResource The {@link Resource} containing the embedded buffer.\n * @param {Number} options.bufferId A unique identifier of the embedded buffer within the parent resource.\n * @param {Uint8Array} [options.typedArray] The typed array containing the embedded buffer contents.\n *\n * @returns {BufferLoader} The buffer loader.\n * @private\n */\nResourceCache.loadEmbeddedBuffer = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var parentResource = options.parentResource;\n  var bufferId = options.bufferId;\n  var typedArray = options.typedArray;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.parentResource", parentResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.bufferId", bufferId);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getEmbeddedBufferCacheKey */ .Z.getEmbeddedBufferCacheKey({\n    parentResource: parentResource,\n    bufferId: bufferId,\n  });\n\n  var bufferLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(bufferLoader)) {\n    return bufferLoader;\n  }\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.typedArray", typedArray);\n  //>>includeEnd(\'debug\');\n\n  bufferLoader = new _BufferLoader_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({\n    typedArray: typedArray,\n    cacheKey: cacheKey,\n  });\n\n  ResourceCache.load({\n    resourceLoader: bufferLoader,\n  });\n\n  return bufferLoader;\n};\n\n/**\n * Loads an external buffer from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource} options.resource The {@link Resource} pointing to the external buffer.\n *\n * @returns {BufferLoader} The buffer loader.\n * @private\n */\nResourceCache.loadExternalBuffer = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var resource = options.resource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.resource", resource);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getExternalBufferCacheKey */ .Z.getExternalBufferCacheKey({\n    resource: resource,\n  });\n\n  var bufferLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(bufferLoader)) {\n    return bufferLoader;\n  }\n\n  bufferLoader = new _BufferLoader_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({\n    resource: resource,\n    cacheKey: cacheKey,\n  });\n\n  ResourceCache.load({\n    resourceLoader: bufferLoader,\n  });\n\n  return bufferLoader;\n};\n\n/**\n * Loads a glTF JSON from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {Uint8Array} [options.typedArray] The typed array containing the glTF contents.\n * @param {Object} [options.gltfJson] The parsed glTF JSON contents.\n *\n * @returns {GltfJsonLoader} The glTF JSON.\n * @private\n */\nResourceCache.loadGltfJson = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var typedArray = options.typedArray;\n  var gltfJson = options.gltfJson;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getGltfCacheKey */ .Z.getGltfCacheKey({\n    gltfResource: gltfResource,\n  });\n\n  var gltfJsonLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(gltfJsonLoader)) {\n    return gltfJsonLoader;\n  }\n\n  gltfJsonLoader = new _GltfJsonLoader_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n    resourceCache: ResourceCache,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    typedArray: typedArray,\n    gltfJson: gltfJson,\n    cacheKey: cacheKey,\n  });\n\n  ResourceCache.load({\n    resourceLoader: gltfJsonLoader,\n  });\n\n  return gltfJsonLoader;\n};\n\n/**\n * Loads a glTF buffer view from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Number} options.bufferViewId The bufferView ID.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n *\n * @returns {GltfBufferViewLoader} The buffer view loader.\n * @private\n */\nResourceCache.loadBufferView = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var bufferViewId = options.bufferViewId;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.bufferViewId", bufferViewId);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getBufferViewCacheKey */ .Z.getBufferViewCacheKey({\n    gltf: gltf,\n    bufferViewId: bufferViewId,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n  });\n\n  var bufferViewLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(bufferViewLoader)) {\n    return bufferViewLoader;\n  }\n\n  bufferViewLoader = new _GltfBufferViewLoader_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z({\n    resourceCache: ResourceCache,\n    gltf: gltf,\n    bufferViewId: bufferViewId,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    cacheKey: cacheKey,\n  });\n\n  ResourceCache.load({\n    resourceLoader: bufferViewLoader,\n  });\n\n  return bufferViewLoader;\n};\n\n/**\n * Loads Draco data from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Object} options.draco The Draco extension object.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n *\n * @returns {GltfDracoLoader} The Draco loader.\n * @private\n */\nResourceCache.loadDraco = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var draco = options.draco;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.draco", draco);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getDracoCacheKey */ .Z.getDracoCacheKey({\n    gltf: gltf,\n    draco: draco,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n  });\n\n  var dracoLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(dracoLoader)) {\n    return dracoLoader;\n  }\n\n  dracoLoader = new _GltfDracoLoader_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n    resourceCache: ResourceCache,\n    gltf: gltf,\n    draco: draco,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    cacheKey: cacheKey,\n  });\n\n  ResourceCache.load({\n    resourceLoader: dracoLoader,\n  });\n\n  return dracoLoader;\n};\n\n/**\n * Loads a glTF vertex buffer from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {Number} [options.bufferViewId] The bufferView ID corresponding to the vertex buffer.\n * @param {Object} [options.draco] The Draco extension object.\n * @param {String} [options.attributeSemantic] The attribute semantic, e.g. POSITION or NORMAL.\n * @param {Number} [options.accessorId] The accessor ID.\n * @param {Boolean} [options.asynchronous=true] Determines if WebGL resource creation will be spread out over several frames or block until all WebGL resources are created.\n * @param {Boolean} [dequantize=false] Determines whether or not the vertex buffer will be dequantized on the CPU.\n *\n * @exception {DeveloperError} One of options.bufferViewId and options.draco must be defined.\n * @exception {DeveloperError} When options.draco is defined options.attributeSemantic must also be defined.\n * @exception {DeveloperError} When options.draco is defined options.accessorId must also be defined.\n *\n * @returns {GltfVertexBufferLoader} The vertex buffer loader.\n * @private\n */\nResourceCache.loadVertexBuffer = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var bufferViewId = options.bufferViewId;\n  var draco = options.draco;\n  var attributeSemantic = options.attributeSemantic;\n  var accessorId = options.accessorId;\n  var asynchronous = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.asynchronous, true);\n  var dequantize = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.dequantize, false);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n\n  var hasBufferViewId = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(bufferViewId);\n  var hasDraco = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(draco);\n  var hasAttributeSemantic = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributeSemantic);\n  var hasAccessorId = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(accessorId);\n\n  if (hasBufferViewId === hasDraco) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "One of options.bufferViewId and options.draco must be defined."\n    );\n  }\n\n  if (hasDraco && !hasAttributeSemantic) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "When options.draco is defined options.attributeSemantic must also be defined."\n    );\n  }\n\n  if (hasDraco && !hasAccessorId) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "When options.draco is defined options.haAccessorId must also be defined."\n    );\n  }\n\n  if (hasDraco) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.draco", draco);\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("options.attributeSemantic", attributeSemantic);\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.accessorId", accessorId);\n  }\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getVertexBufferCacheKey */ .Z.getVertexBufferCacheKey({\n    gltf: gltf,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    bufferViewId: bufferViewId,\n    draco: draco,\n    attributeSemantic: attributeSemantic,\n  });\n\n  var vertexBufferLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(vertexBufferLoader)) {\n    return vertexBufferLoader;\n  }\n\n  vertexBufferLoader = new _GltfVertexBufferLoader_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    resourceCache: ResourceCache,\n    gltf: gltf,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    bufferViewId: bufferViewId,\n    draco: draco,\n    attributeSemantic: attributeSemantic,\n    accessorId: accessorId,\n    cacheKey: cacheKey,\n    asynchronous: asynchronous,\n    dequantize: dequantize,\n  });\n\n  ResourceCache.load({\n    resourceLoader: vertexBufferLoader,\n  });\n\n  return vertexBufferLoader;\n};\n\n/**\n * Loads a glTF index buffer from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Number} options.accessorId The accessor ID corresponding to the index buffer.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {Object} [options.draco] The Draco extension object.\n * @param {Boolean} [options.asynchronous=true] Determines if WebGL resource creation will be spread out over several frames or block until all WebGL resources are created.\n *\n * @returns {GltfIndexBufferLoader} The index buffer loader.\n * @private\n */\nResourceCache.loadIndexBuffer = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var accessorId = options.accessorId;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var draco = options.draco;\n  var asynchronous = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.asynchronous, true);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.accessorId", accessorId);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getIndexBufferCacheKey */ .Z.getIndexBufferCacheKey({\n    gltf: gltf,\n    accessorId: accessorId,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    draco: draco,\n  });\n\n  var indexBufferLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(indexBufferLoader)) {\n    return indexBufferLoader;\n  }\n\n  indexBufferLoader = new _GltfIndexBufferLoader_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    resourceCache: ResourceCache,\n    gltf: gltf,\n    accessorId: accessorId,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    draco: draco,\n    cacheKey: cacheKey,\n    asynchronous: asynchronous,\n  });\n\n  ResourceCache.load({\n    resourceLoader: indexBufferLoader,\n  });\n\n  return indexBufferLoader;\n};\n\n/**\n * Loads a glTF image from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Number} options.imageId The image ID.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n *\n * @returns {GltfImageLoader} The image loader.\n * @private\n */\nResourceCache.loadImage = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var imageId = options.imageId;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.imageId", imageId);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getImageCacheKey */ .Z.getImageCacheKey({\n    gltf: gltf,\n    imageId: imageId,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n  });\n\n  var imageLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(imageLoader)) {\n    return imageLoader;\n  }\n\n  imageLoader = new _GltfImageLoader_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n    resourceCache: ResourceCache,\n    gltf: gltf,\n    imageId: imageId,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    cacheKey: cacheKey,\n  });\n\n  ResourceCache.load({\n    resourceLoader: imageLoader,\n  });\n\n  return imageLoader;\n};\n\n/**\n * Loads a glTF texture from the cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Object} options.textureInfo The texture info object.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {SupportedImageFormats} options.supportedImageFormats The supported image formats.\n * @param {Boolean} [options.asynchronous=true] Determines if WebGL resource creation will be spread out over several frames or block until all WebGL resources are created.\n *\n * @returns {GltfTextureLoader} The texture loader.\n * @private\n */\nResourceCache.loadTexture = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var textureInfo = options.textureInfo;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var supportedImageFormats = options.supportedImageFormats;\n  var asynchronous = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.asynchronous, true);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.textureInfo", textureInfo);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var cacheKey = _ResourceCacheKey_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getTextureCacheKey */ .Z.getTextureCacheKey({\n    gltf: gltf,\n    textureInfo: textureInfo,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    supportedImageFormats: supportedImageFormats,\n  });\n\n  var textureLoader = ResourceCache.get(cacheKey);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(textureLoader)) {\n    return textureLoader;\n  }\n\n  textureLoader = new _GltfTextureLoader_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n    resourceCache: ResourceCache,\n    gltf: gltf,\n    textureInfo: textureInfo,\n    gltfResource: gltfResource,\n    baseResource: baseResource,\n    supportedImageFormats: supportedImageFormats,\n    cacheKey: cacheKey,\n    asynchronous: asynchronous,\n  });\n\n  ResourceCache.load({\n    resourceLoader: textureLoader,\n  });\n\n  return textureLoader;\n};\n\n/**\n * Unload everything from the cache. This is used for unit testing.\n *\n * @private\n */\nResourceCache.clearForSpecs = function () {\n  // Unload in the order below. This prevents an unload function from unloading\n  // a resource that has already been unloaded.\n  var precedence = [\n    _GltfVertexBufferLoader_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z,\n    _GltfIndexBufferLoader_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z,\n    _GltfDracoLoader_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z,\n    _GltfTextureLoader_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,\n    _GltfImageLoader_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z,\n    _GltfBufferViewLoader_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z,\n    _BufferLoader_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z,\n    _MetadataSchemaLoader_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z,\n    _GltfJsonLoader_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z,\n  ];\n\n  var cacheKey;\n  var cacheEntries = ResourceCache.cacheEntries;\n\n  var cacheEntriesSorted = [];\n  for (cacheKey in cacheEntries) {\n    if (cacheEntries.hasOwnProperty(cacheKey)) {\n      cacheEntriesSorted.push(cacheEntries[cacheKey]);\n    }\n  }\n\n  cacheEntriesSorted.sort(function (a, b) {\n    var indexA = precedence.indexOf(a.resourceLoader.constructor);\n    var indexB = precedence.indexOf(b.resourceLoader.constructor);\n    return indexA - indexB;\n  });\n\n  var cacheEntriesLength = cacheEntriesSorted.length;\n  for (var i = 0; i < cacheEntriesLength; ++i) {\n    var cacheEntry = cacheEntriesSorted[i];\n    cacheKey = cacheEntry.resourceLoader.cacheKey;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(cacheEntries[cacheKey])) {\n      cacheEntry.resourceLoader.destroy();\n      delete cacheEntries[cacheKey];\n    }\n  }\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (ResourceCache);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMvRCxXQUFXLHVCQUF1QjtBQUNsQyxXQUFXLFNBQVM7QUFDcEI7QUFDQSxhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0E7QUFDQSxZQUFZLDBFQUFZLFVBQVUsZ0dBQXlCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMEVBQVk7O0FBRWpDO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckI7O0FBRUEsaUJBQWlCLDRHQUFtQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLE1BQU0sc0VBQU87QUFDYjtBQUNBOztBQUVBLHNCQUFzQixzRUFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRFQUFzQjtBQUMxQixJQUFJLDBFQUFxQjtBQUN6QixJQUFJLG9FQUFlO0FBQ25CLElBQUksc0VBQWlCO0FBQ3JCLElBQUksb0VBQWU7QUFDbkIsSUFBSSx5RUFBb0I7QUFDeEIsSUFBSSxpRUFBWTtBQUNoQixJQUFJLDBFQUFvQjtBQUN4QixJQUFJLG1FQUFjO0FBQ2xCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGtCQUFrQix3QkFBd0I7QUFDMUM7QUFDQTtBQUNBLFFBQVEsc0VBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlEQUFlLGFBQWEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9SZXNvdXJjZUNhY2hlLmpzP2YwZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgQnVmZmVyTG9hZGVyIGZyb20gXCIuL0J1ZmZlckxvYWRlci5qc1wiO1xuaW1wb3J0IEdsdGZCdWZmZXJWaWV3TG9hZGVyIGZyb20gXCIuL0dsdGZCdWZmZXJWaWV3TG9hZGVyLmpzXCI7XG5pbXBvcnQgR2x0ZkRyYWNvTG9hZGVyIGZyb20gXCIuL0dsdGZEcmFjb0xvYWRlci5qc1wiO1xuaW1wb3J0IEdsdGZJbWFnZUxvYWRlciBmcm9tIFwiLi9HbHRmSW1hZ2VMb2FkZXIuanNcIjtcbmltcG9ydCBHbHRmSW5kZXhCdWZmZXJMb2FkZXIgZnJvbSBcIi4vR2x0ZkluZGV4QnVmZmVyTG9hZGVyLmpzXCI7XG5pbXBvcnQgR2x0Zkpzb25Mb2FkZXIgZnJvbSBcIi4vR2x0Zkpzb25Mb2FkZXIuanNcIjtcbmltcG9ydCBHbHRmVGV4dHVyZUxvYWRlciBmcm9tIFwiLi9HbHRmVGV4dHVyZUxvYWRlci5qc1wiO1xuaW1wb3J0IEdsdGZWZXJ0ZXhCdWZmZXJMb2FkZXIgZnJvbSBcIi4vR2x0ZlZlcnRleEJ1ZmZlckxvYWRlci5qc1wiO1xuaW1wb3J0IE1ldGFkYXRhU2NoZW1hTG9hZGVyIGZyb20gXCIuL01ldGFkYXRhU2NoZW1hTG9hZGVyLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2VDYWNoZUtleSBmcm9tIFwiLi9SZXNvdXJjZUNhY2hlS2V5LmpzXCI7XG5cbi8qKlxuICogQ2FjaGUgZm9yIHJlc291cmNlcyBzaGFyZWQgYWNyb3NzIDNEIFRpbGVzIGFuZCBnbFRGLlxuICpcbiAqIEBuYW1lc3BhY2UgUmVzb3VyY2VDYWNoZVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIFJlc291cmNlQ2FjaGUoKSB7fVxuXG5SZXNvdXJjZUNhY2hlLmNhY2hlRW50cmllcyA9IHt9O1xuXG4vKipcbiAqIEEgcmVmZXJlbmNlLWNvdW50ZWQgY2FjaGUgZW50cnkuXG4gKlxuICogQHBhcmFtIHtSZXNvdXJjZUxvYWRlcn0gcmVzb3VyY2VMb2FkZXIgVGhlIHJlc291cmNlLlxuICpcbiAqIEBhbGlhcyBDYWNoZUVudHJ5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBDYWNoZUVudHJ5KHJlc291cmNlTG9hZGVyKSB7XG4gIHRoaXMucmVmZXJlbmNlQ291bnQgPSAxO1xuICB0aGlzLnJlc291cmNlTG9hZGVyID0gcmVzb3VyY2VMb2FkZXI7XG59XG5cbi8qKlxuICogR2V0cyBhIHJlc291cmNlIGZyb20gdGhlIGNhY2hlLiBJZiB0aGUgcmVzb3VyY2UgZXhpc3RzIGl0cyByZWZlcmVuY2UgY291bnQgaXNcbiAqIGluY3JlbWVudGVkLiBPdGhlcndpc2UsIGlmIG5vIHJlc291cmNlIGxvYWRlciBleGlzdHMsIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2FjaGVLZXkgVGhlIGNhY2hlIGtleSBvZiB0aGUgcmVzb3VyY2UuXG4gKlxuICogQHJldHVybnMge1Jlc291cmNlTG9hZGVyfHVuZGVmaW5lZH0gVGhlIHJlc291cmNlLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZS5nZXQgPSBmdW5jdGlvbiAoY2FjaGVLZXkpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLnN0cmluZyhcImNhY2hlS2V5XCIsIGNhY2hlS2V5KTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGNhY2hlRW50cnkgPSBSZXNvdXJjZUNhY2hlLmNhY2hlRW50cmllc1tjYWNoZUtleV07XG4gIGlmIChkZWZpbmVkKGNhY2hlRW50cnkpKSB7XG4gICAgKytjYWNoZUVudHJ5LnJlZmVyZW5jZUNvdW50O1xuICAgIHJldHVybiBjYWNoZUVudHJ5LnJlc291cmNlTG9hZGVyO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIExvYWRzIGEgcmVzb3VyY2UgYW5kIGFkZHMgaXQgdG8gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UmVzb3VyY2VMb2FkZXJ9IG9wdGlvbnMucmVzb3VyY2VMb2FkZXIgVGhlIHJlc291cmNlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBSZXNvdXJjZSB3aXRoIHRoaXMgY2FjaGVLZXkgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaFxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZS5sb2FkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIHJlc291cmNlTG9hZGVyID0gb3B0aW9ucy5yZXNvdXJjZUxvYWRlcjtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5yZXNvdXJjZUxvYWRlclwiLCByZXNvdXJjZUxvYWRlcik7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBjYWNoZUtleSA9IHJlc291cmNlTG9hZGVyLmNhY2hlS2V5O1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5zdHJpbmcoXCJvcHRpb25zLnJlc291cmNlTG9hZGVyLmNhY2hlS2V5XCIsIGNhY2hlS2V5KTtcblxuICBpZiAoZGVmaW5lZChSZXNvdXJjZUNhY2hlLmNhY2hlRW50cmllc1tjYWNoZUtleV0pKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJSZXNvdXJjZSB3aXRoIHRoaXMgY2FjaGVLZXkgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGU6IFwiICsgY2FjaGVLZXlcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIFJlc291cmNlQ2FjaGUuY2FjaGVFbnRyaWVzW2NhY2hlS2V5XSA9IG5ldyBDYWNoZUVudHJ5KHJlc291cmNlTG9hZGVyKTtcblxuICByZXNvdXJjZUxvYWRlci5sb2FkKCk7XG59O1xuXG4vKipcbiAqIFVubG9hZHMgYSByZXNvdXJjZSBmcm9tIHRoZSBjYWNoZS4gV2hlbiB0aGUgcmVmZXJlbmNlIGNvdW50IGhpdHMgemVybyB0aGVcbiAqIHJlc291cmNlIGlzIGRlc3Ryb3llZC5cbiAqXG4gKiBAcGFyYW0ge1Jlc291cmNlTG9hZGVyfSByZXNvdXJjZUxvYWRlciBUaGUgcmVzb3VyY2UuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFJlc291cmNlIGlzIG5vdCBpbiB0aGUgY2FjaGUuXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gQ2Fubm90IHVubG9hZCByZXNvdXJjZSB0aGF0IGhhcyBubyByZWZlcmVuY2VzLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZS51bmxvYWQgPSBmdW5jdGlvbiAocmVzb3VyY2VMb2FkZXIpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcInJlc291cmNlTG9hZGVyXCIsIHJlc291cmNlTG9hZGVyKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGNhY2hlS2V5ID0gcmVzb3VyY2VMb2FkZXIuY2FjaGVLZXk7XG4gIHZhciBjYWNoZUVudHJ5ID0gUmVzb3VyY2VDYWNoZS5jYWNoZUVudHJpZXNbY2FjaGVLZXldO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChjYWNoZUVudHJ5KSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIlJlc291cmNlIGlzIG5vdCBpbiB0aGUgY2FjaGU6IFwiICsgY2FjaGVLZXkpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIC0tY2FjaGVFbnRyeS5yZWZlcmVuY2VDb3VudDtcblxuICBpZiAoY2FjaGVFbnRyeS5yZWZlcmVuY2VDb3VudCA9PT0gMCkge1xuICAgIHJlc291cmNlTG9hZGVyLmRlc3Ryb3koKTtcbiAgICBkZWxldGUgUmVzb3VyY2VDYWNoZS5jYWNoZUVudHJpZXNbY2FjaGVLZXldO1xuICB9XG59O1xuXG4vKipcbiAqIExvYWRzIGEgc2NoZW1hIGZyb20gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5zY2hlbWFdIEFuIG9iamVjdCB0aGF0IGV4cGxpY2l0bHkgZGVmaW5lcyBhIHNjaGVtYSBKU09OLiBNdXR1YWxseSBleGNsdXNpdmUgd2l0aCBvcHRpb25zLnJlc291cmNlLlxuICogQHBhcmFtIHtSZXNvdXJjZX0gW29wdGlvbnMucmVzb3VyY2VdIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHBvaW50aW5nIHRvIHRoZSBzY2hlbWEgSlNPTi4gTXV0dWFsbHkgZXhjbHVzaXZlIHdpdGggb3B0aW9ucy5zY2hlbWEuXG4gKlxuICogQHJldHVybnMge01ldGFkYXRhU2NoZW1hTG9hZGVyfSBUaGUgc2NoZW1hIHJlc291cmNlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBPbmUgb2Ygb3B0aW9ucy5zY2hlbWEgYW5kIG9wdGlvbnMucmVzb3VyY2UgbXVzdCBiZSBkZWZpbmVkLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZS5sb2FkU2NoZW1hID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIHNjaGVtYSA9IG9wdGlvbnMuc2NoZW1hO1xuICB2YXIgcmVzb3VyY2UgPSBvcHRpb25zLnJlc291cmNlO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChkZWZpbmVkKHNjaGVtYSkgPT09IGRlZmluZWQocmVzb3VyY2UpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJPbmUgb2Ygb3B0aW9ucy5zY2hlbWEgYW5kIG9wdGlvbnMucmVzb3VyY2UgbXVzdCBiZSBkZWZpbmVkLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgY2FjaGVLZXkgPSBSZXNvdXJjZUNhY2hlS2V5LmdldFNjaGVtYUNhY2hlS2V5KHtcbiAgICBzY2hlbWE6IHNjaGVtYSxcbiAgICByZXNvdXJjZTogcmVzb3VyY2UsXG4gIH0pO1xuXG4gIHZhciBzY2hlbWFMb2FkZXIgPSBSZXNvdXJjZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChkZWZpbmVkKHNjaGVtYUxvYWRlcikpIHtcbiAgICByZXR1cm4gc2NoZW1hTG9hZGVyO1xuICB9XG5cbiAgc2NoZW1hTG9hZGVyID0gbmV3IE1ldGFkYXRhU2NoZW1hTG9hZGVyKHtcbiAgICBzY2hlbWE6IHNjaGVtYSxcbiAgICByZXNvdXJjZTogcmVzb3VyY2UsXG4gICAgY2FjaGVLZXk6IGNhY2hlS2V5LFxuICB9KTtcblxuICBSZXNvdXJjZUNhY2hlLmxvYWQoe1xuICAgIHJlc291cmNlTG9hZGVyOiBzY2hlbWFMb2FkZXIsXG4gIH0pO1xuXG4gIHJldHVybiBzY2hlbWFMb2FkZXI7XG59O1xuXG4vKipcbiAqIExvYWQgYW4gZW1iZWRkZWQgYnVmZmVyIGZyb20gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMucGFyZW50UmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gY29udGFpbmluZyB0aGUgZW1iZWRkZWQgYnVmZmVyLlxuICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMuYnVmZmVySWQgQSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgZW1iZWRkZWQgYnVmZmVyIHdpdGhpbiB0aGUgcGFyZW50IHJlc291cmNlLlxuICogQHBhcmFtIHtVaW50OEFycmF5fSBbb3B0aW9ucy50eXBlZEFycmF5XSBUaGUgdHlwZWQgYXJyYXkgY29udGFpbmluZyB0aGUgZW1iZWRkZWQgYnVmZmVyIGNvbnRlbnRzLlxuICpcbiAqIEByZXR1cm5zIHtCdWZmZXJMb2FkZXJ9IFRoZSBidWZmZXIgbG9hZGVyLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZS5sb2FkRW1iZWRkZWRCdWZmZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgcGFyZW50UmVzb3VyY2UgPSBvcHRpb25zLnBhcmVudFJlc291cmNlO1xuICB2YXIgYnVmZmVySWQgPSBvcHRpb25zLmJ1ZmZlcklkO1xuICB2YXIgdHlwZWRBcnJheSA9IG9wdGlvbnMudHlwZWRBcnJheTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5wYXJlbnRSZXNvdXJjZVwiLCBwYXJlbnRSZXNvdXJjZSk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLmJ1ZmZlcklkXCIsIGJ1ZmZlcklkKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGNhY2hlS2V5ID0gUmVzb3VyY2VDYWNoZUtleS5nZXRFbWJlZGRlZEJ1ZmZlckNhY2hlS2V5KHtcbiAgICBwYXJlbnRSZXNvdXJjZTogcGFyZW50UmVzb3VyY2UsXG4gICAgYnVmZmVySWQ6IGJ1ZmZlcklkLFxuICB9KTtcblxuICB2YXIgYnVmZmVyTG9hZGVyID0gUmVzb3VyY2VDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICBpZiAoZGVmaW5lZChidWZmZXJMb2FkZXIpKSB7XG4gICAgcmV0dXJuIGJ1ZmZlckxvYWRlcjtcbiAgfVxuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLnR5cGVkQXJyYXlcIiwgdHlwZWRBcnJheSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGJ1ZmZlckxvYWRlciA9IG5ldyBCdWZmZXJMb2FkZXIoe1xuICAgIHR5cGVkQXJyYXk6IHR5cGVkQXJyYXksXG4gICAgY2FjaGVLZXk6IGNhY2hlS2V5LFxuICB9KTtcblxuICBSZXNvdXJjZUNhY2hlLmxvYWQoe1xuICAgIHJlc291cmNlTG9hZGVyOiBidWZmZXJMb2FkZXIsXG4gIH0pO1xuXG4gIHJldHVybiBidWZmZXJMb2FkZXI7XG59O1xuXG4vKipcbiAqIExvYWRzIGFuIGV4dGVybmFsIGJ1ZmZlciBmcm9tIHRoZSBjYWNoZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLnJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHBvaW50aW5nIHRvIHRoZSBleHRlcm5hbCBidWZmZXIuXG4gKlxuICogQHJldHVybnMge0J1ZmZlckxvYWRlcn0gVGhlIGJ1ZmZlciBsb2FkZXIuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlLmxvYWRFeHRlcm5hbEJ1ZmZlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciByZXNvdXJjZSA9IG9wdGlvbnMucmVzb3VyY2U7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMucmVzb3VyY2VcIiwgcmVzb3VyY2UpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgY2FjaGVLZXkgPSBSZXNvdXJjZUNhY2hlS2V5LmdldEV4dGVybmFsQnVmZmVyQ2FjaGVLZXkoe1xuICAgIHJlc291cmNlOiByZXNvdXJjZSxcbiAgfSk7XG5cbiAgdmFyIGJ1ZmZlckxvYWRlciA9IFJlc291cmNlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgaWYgKGRlZmluZWQoYnVmZmVyTG9hZGVyKSkge1xuICAgIHJldHVybiBidWZmZXJMb2FkZXI7XG4gIH1cblxuICBidWZmZXJMb2FkZXIgPSBuZXcgQnVmZmVyTG9hZGVyKHtcbiAgICByZXNvdXJjZTogcmVzb3VyY2UsXG4gICAgY2FjaGVLZXk6IGNhY2hlS2V5LFxuICB9KTtcblxuICBSZXNvdXJjZUNhY2hlLmxvYWQoe1xuICAgIHJlc291cmNlTG9hZGVyOiBidWZmZXJMb2FkZXIsXG4gIH0pO1xuXG4gIHJldHVybiBidWZmZXJMb2FkZXI7XG59O1xuXG4vKipcbiAqIExvYWRzIGEgZ2xURiBKU09OIGZyb20gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmJhc2VSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSB0aGF0IHBhdGhzIGluIHRoZSBnbFRGIEpTT04gYXJlIHJlbGF0aXZlIHRvLlxuICogQHBhcmFtIHtVaW50OEFycmF5fSBbb3B0aW9ucy50eXBlZEFycmF5XSBUaGUgdHlwZWQgYXJyYXkgY29udGFpbmluZyB0aGUgZ2xURiBjb250ZW50cy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5nbHRmSnNvbl0gVGhlIHBhcnNlZCBnbFRGIEpTT04gY29udGVudHMuXG4gKlxuICogQHJldHVybnMge0dsdGZKc29uTG9hZGVyfSBUaGUgZ2xURiBKU09OLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZS5sb2FkR2x0Zkpzb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZ2x0ZlJlc291cmNlID0gb3B0aW9ucy5nbHRmUmVzb3VyY2U7XG4gIHZhciBiYXNlUmVzb3VyY2UgPSBvcHRpb25zLmJhc2VSZXNvdXJjZTtcbiAgdmFyIHR5cGVkQXJyYXkgPSBvcHRpb25zLnR5cGVkQXJyYXk7XG4gIHZhciBnbHRmSnNvbiA9IG9wdGlvbnMuZ2x0Zkpzb247XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlJlc291cmNlXCIsIGdsdGZSZXNvdXJjZSk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmJhc2VSZXNvdXJjZVwiLCBiYXNlUmVzb3VyY2UpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgY2FjaGVLZXkgPSBSZXNvdXJjZUNhY2hlS2V5LmdldEdsdGZDYWNoZUtleSh7XG4gICAgZ2x0ZlJlc291cmNlOiBnbHRmUmVzb3VyY2UsXG4gIH0pO1xuXG4gIHZhciBnbHRmSnNvbkxvYWRlciA9IFJlc291cmNlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgaWYgKGRlZmluZWQoZ2x0Zkpzb25Mb2FkZXIpKSB7XG4gICAgcmV0dXJuIGdsdGZKc29uTG9hZGVyO1xuICB9XG5cbiAgZ2x0Zkpzb25Mb2FkZXIgPSBuZXcgR2x0Zkpzb25Mb2FkZXIoe1xuICAgIHJlc291cmNlQ2FjaGU6IFJlc291cmNlQ2FjaGUsXG4gICAgZ2x0ZlJlc291cmNlOiBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlOiBiYXNlUmVzb3VyY2UsXG4gICAgdHlwZWRBcnJheTogdHlwZWRBcnJheSxcbiAgICBnbHRmSnNvbjogZ2x0Zkpzb24sXG4gICAgY2FjaGVLZXk6IGNhY2hlS2V5LFxuICB9KTtcblxuICBSZXNvdXJjZUNhY2hlLmxvYWQoe1xuICAgIHJlc291cmNlTG9hZGVyOiBnbHRmSnNvbkxvYWRlcixcbiAgfSk7XG5cbiAgcmV0dXJuIGdsdGZKc29uTG9hZGVyO1xufTtcblxuLyoqXG4gKiBMb2FkcyBhIGdsVEYgYnVmZmVyIHZpZXcgZnJvbSB0aGUgY2FjaGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZ2x0ZiBUaGUgZ2xURiBKU09OLlxuICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMuYnVmZmVyVmlld0lkIFRoZSBidWZmZXJWaWV3IElELlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5nbHRmUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gY29udGFpbmluZyB0aGUgZ2xURi5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuYmFzZVJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHRoYXQgcGF0aHMgaW4gdGhlIGdsVEYgSlNPTiBhcmUgcmVsYXRpdmUgdG8uXG4gKlxuICogQHJldHVybnMge0dsdGZCdWZmZXJWaWV3TG9hZGVyfSBUaGUgYnVmZmVyIHZpZXcgbG9hZGVyLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZS5sb2FkQnVmZmVyVmlldyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBnbHRmID0gb3B0aW9ucy5nbHRmO1xuICB2YXIgYnVmZmVyVmlld0lkID0gb3B0aW9ucy5idWZmZXJWaWV3SWQ7XG4gIHZhciBnbHRmUmVzb3VyY2UgPSBvcHRpb25zLmdsdGZSZXNvdXJjZTtcbiAgdmFyIGJhc2VSZXNvdXJjZSA9IG9wdGlvbnMuYmFzZVJlc291cmNlO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLmJ1ZmZlclZpZXdJZFwiLCBidWZmZXJWaWV3SWQpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmUmVzb3VyY2VcIiwgZ2x0ZlJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuYmFzZVJlc291cmNlXCIsIGJhc2VSZXNvdXJjZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBjYWNoZUtleSA9IFJlc291cmNlQ2FjaGVLZXkuZ2V0QnVmZmVyVmlld0NhY2hlS2V5KHtcbiAgICBnbHRmOiBnbHRmLFxuICAgIGJ1ZmZlclZpZXdJZDogYnVmZmVyVmlld0lkLFxuICAgIGdsdGZSZXNvdXJjZTogZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZTogYmFzZVJlc291cmNlLFxuICB9KTtcblxuICB2YXIgYnVmZmVyVmlld0xvYWRlciA9IFJlc291cmNlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgaWYgKGRlZmluZWQoYnVmZmVyVmlld0xvYWRlcikpIHtcbiAgICByZXR1cm4gYnVmZmVyVmlld0xvYWRlcjtcbiAgfVxuXG4gIGJ1ZmZlclZpZXdMb2FkZXIgPSBuZXcgR2x0ZkJ1ZmZlclZpZXdMb2FkZXIoe1xuICAgIHJlc291cmNlQ2FjaGU6IFJlc291cmNlQ2FjaGUsXG4gICAgZ2x0ZjogZ2x0ZixcbiAgICBidWZmZXJWaWV3SWQ6IGJ1ZmZlclZpZXdJZCxcbiAgICBnbHRmUmVzb3VyY2U6IGdsdGZSZXNvdXJjZSxcbiAgICBiYXNlUmVzb3VyY2U6IGJhc2VSZXNvdXJjZSxcbiAgICBjYWNoZUtleTogY2FjaGVLZXksXG4gIH0pO1xuXG4gIFJlc291cmNlQ2FjaGUubG9hZCh7XG4gICAgcmVzb3VyY2VMb2FkZXI6IGJ1ZmZlclZpZXdMb2FkZXIsXG4gIH0pO1xuXG4gIHJldHVybiBidWZmZXJWaWV3TG9hZGVyO1xufTtcblxuLyoqXG4gKiBMb2FkcyBEcmFjbyBkYXRhIGZyb20gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmdsdGYgVGhlIGdsVEYgSlNPTi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmRyYWNvIFRoZSBEcmFjbyBleHRlbnNpb24gb2JqZWN0LlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5nbHRmUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gY29udGFpbmluZyB0aGUgZ2xURi5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuYmFzZVJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHRoYXQgcGF0aHMgaW4gdGhlIGdsVEYgSlNPTiBhcmUgcmVsYXRpdmUgdG8uXG4gKlxuICogQHJldHVybnMge0dsdGZEcmFjb0xvYWRlcn0gVGhlIERyYWNvIGxvYWRlci5cbiAqIEBwcml2YXRlXG4gKi9cblJlc291cmNlQ2FjaGUubG9hZERyYWNvID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIGdsdGYgPSBvcHRpb25zLmdsdGY7XG4gIHZhciBkcmFjbyA9IG9wdGlvbnMuZHJhY287XG4gIHZhciBnbHRmUmVzb3VyY2UgPSBvcHRpb25zLmdsdGZSZXNvdXJjZTtcbiAgdmFyIGJhc2VSZXNvdXJjZSA9IG9wdGlvbnMuYmFzZVJlc291cmNlO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmRyYWNvXCIsIGRyYWNvKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlJlc291cmNlXCIsIGdsdGZSZXNvdXJjZSk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmJhc2VSZXNvdXJjZVwiLCBiYXNlUmVzb3VyY2UpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgY2FjaGVLZXkgPSBSZXNvdXJjZUNhY2hlS2V5LmdldERyYWNvQ2FjaGVLZXkoe1xuICAgIGdsdGY6IGdsdGYsXG4gICAgZHJhY286IGRyYWNvLFxuICAgIGdsdGZSZXNvdXJjZTogZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZTogYmFzZVJlc291cmNlLFxuICB9KTtcblxuICB2YXIgZHJhY29Mb2FkZXIgPSBSZXNvdXJjZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChkZWZpbmVkKGRyYWNvTG9hZGVyKSkge1xuICAgIHJldHVybiBkcmFjb0xvYWRlcjtcbiAgfVxuXG4gIGRyYWNvTG9hZGVyID0gbmV3IEdsdGZEcmFjb0xvYWRlcih7XG4gICAgcmVzb3VyY2VDYWNoZTogUmVzb3VyY2VDYWNoZSxcbiAgICBnbHRmOiBnbHRmLFxuICAgIGRyYWNvOiBkcmFjbyxcbiAgICBnbHRmUmVzb3VyY2U6IGdsdGZSZXNvdXJjZSxcbiAgICBiYXNlUmVzb3VyY2U6IGJhc2VSZXNvdXJjZSxcbiAgICBjYWNoZUtleTogY2FjaGVLZXksXG4gIH0pO1xuXG4gIFJlc291cmNlQ2FjaGUubG9hZCh7XG4gICAgcmVzb3VyY2VMb2FkZXI6IGRyYWNvTG9hZGVyLFxuICB9KTtcblxuICByZXR1cm4gZHJhY29Mb2FkZXI7XG59O1xuXG4vKipcbiAqIExvYWRzIGEgZ2xURiB2ZXJ0ZXggYnVmZmVyIGZyb20gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmdsdGYgVGhlIGdsVEYgSlNPTi5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmJhc2VSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSB0aGF0IHBhdGhzIGluIHRoZSBnbFRGIEpTT04gYXJlIHJlbGF0aXZlIHRvLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmJ1ZmZlclZpZXdJZF0gVGhlIGJ1ZmZlclZpZXcgSUQgY29ycmVzcG9uZGluZyB0byB0aGUgdmVydGV4IGJ1ZmZlci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5kcmFjb10gVGhlIERyYWNvIGV4dGVuc2lvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYXR0cmlidXRlU2VtYW50aWNdIFRoZSBhdHRyaWJ1dGUgc2VtYW50aWMsIGUuZy4gUE9TSVRJT04gb3IgTk9STUFMLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmFjY2Vzc29ySWRdIFRoZSBhY2Nlc3NvciBJRC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYXN5bmNocm9ub3VzPXRydWVdIERldGVybWluZXMgaWYgV2ViR0wgcmVzb3VyY2UgY3JlYXRpb24gd2lsbCBiZSBzcHJlYWQgb3V0IG92ZXIgc2V2ZXJhbCBmcmFtZXMgb3IgYmxvY2sgdW50aWwgYWxsIFdlYkdMIHJlc291cmNlcyBhcmUgY3JlYXRlZC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2RlcXVhbnRpemU9ZmFsc2VdIERldGVybWluZXMgd2hldGhlciBvciBub3QgdGhlIHZlcnRleCBidWZmZXIgd2lsbCBiZSBkZXF1YW50aXplZCBvbiB0aGUgQ1BVLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBPbmUgb2Ygb3B0aW9ucy5idWZmZXJWaWV3SWQgYW5kIG9wdGlvbnMuZHJhY28gbXVzdCBiZSBkZWZpbmVkLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFdoZW4gb3B0aW9ucy5kcmFjbyBpcyBkZWZpbmVkIG9wdGlvbnMuYXR0cmlidXRlU2VtYW50aWMgbXVzdCBhbHNvIGJlIGRlZmluZWQuXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gV2hlbiBvcHRpb25zLmRyYWNvIGlzIGRlZmluZWQgb3B0aW9ucy5hY2Nlc3NvcklkIG11c3QgYWxzbyBiZSBkZWZpbmVkLlxuICpcbiAqIEByZXR1cm5zIHtHbHRmVmVydGV4QnVmZmVyTG9hZGVyfSBUaGUgdmVydGV4IGJ1ZmZlciBsb2FkZXIuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlLmxvYWRWZXJ0ZXhCdWZmZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZ2x0ZiA9IG9wdGlvbnMuZ2x0ZjtcbiAgdmFyIGdsdGZSZXNvdXJjZSA9IG9wdGlvbnMuZ2x0ZlJlc291cmNlO1xuICB2YXIgYmFzZVJlc291cmNlID0gb3B0aW9ucy5iYXNlUmVzb3VyY2U7XG4gIHZhciBidWZmZXJWaWV3SWQgPSBvcHRpb25zLmJ1ZmZlclZpZXdJZDtcbiAgdmFyIGRyYWNvID0gb3B0aW9ucy5kcmFjbztcbiAgdmFyIGF0dHJpYnV0ZVNlbWFudGljID0gb3B0aW9ucy5hdHRyaWJ1dGVTZW1hbnRpYztcbiAgdmFyIGFjY2Vzc29ySWQgPSBvcHRpb25zLmFjY2Vzc29ySWQ7XG4gIHZhciBhc3luY2hyb25vdXMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5hc3luY2hyb25vdXMsIHRydWUpO1xuICB2YXIgZGVxdWFudGl6ZSA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmRlcXVhbnRpemUsIGZhbHNlKTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmXCIsIGdsdGYpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmUmVzb3VyY2VcIiwgZ2x0ZlJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuYmFzZVJlc291cmNlXCIsIGJhc2VSZXNvdXJjZSk7XG5cbiAgdmFyIGhhc0J1ZmZlclZpZXdJZCA9IGRlZmluZWQoYnVmZmVyVmlld0lkKTtcbiAgdmFyIGhhc0RyYWNvID0gZGVmaW5lZChkcmFjbyk7XG4gIHZhciBoYXNBdHRyaWJ1dGVTZW1hbnRpYyA9IGRlZmluZWQoYXR0cmlidXRlU2VtYW50aWMpO1xuICB2YXIgaGFzQWNjZXNzb3JJZCA9IGRlZmluZWQoYWNjZXNzb3JJZCk7XG5cbiAgaWYgKGhhc0J1ZmZlclZpZXdJZCA9PT0gaGFzRHJhY28pIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIk9uZSBvZiBvcHRpb25zLmJ1ZmZlclZpZXdJZCBhbmQgb3B0aW9ucy5kcmFjbyBtdXN0IGJlIGRlZmluZWQuXCJcbiAgICApO1xuICB9XG5cbiAgaWYgKGhhc0RyYWNvICYmICFoYXNBdHRyaWJ1dGVTZW1hbnRpYykge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiV2hlbiBvcHRpb25zLmRyYWNvIGlzIGRlZmluZWQgb3B0aW9ucy5hdHRyaWJ1dGVTZW1hbnRpYyBtdXN0IGFsc28gYmUgZGVmaW5lZC5cIlxuICAgICk7XG4gIH1cblxuICBpZiAoaGFzRHJhY28gJiYgIWhhc0FjY2Vzc29ySWQpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIldoZW4gb3B0aW9ucy5kcmFjbyBpcyBkZWZpbmVkIG9wdGlvbnMuaGFBY2Nlc3NvcklkIG11c3QgYWxzbyBiZSBkZWZpbmVkLlwiXG4gICAgKTtcbiAgfVxuXG4gIGlmIChoYXNEcmFjbykge1xuICAgIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmRyYWNvXCIsIGRyYWNvKTtcbiAgICBDaGVjay50eXBlT2Yuc3RyaW5nKFwib3B0aW9ucy5hdHRyaWJ1dGVTZW1hbnRpY1wiLCBhdHRyaWJ1dGVTZW1hbnRpYyk7XG4gICAgQ2hlY2sudHlwZU9mLm51bWJlcihcIm9wdGlvbnMuYWNjZXNzb3JJZFwiLCBhY2Nlc3NvcklkKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgY2FjaGVLZXkgPSBSZXNvdXJjZUNhY2hlS2V5LmdldFZlcnRleEJ1ZmZlckNhY2hlS2V5KHtcbiAgICBnbHRmOiBnbHRmLFxuICAgIGdsdGZSZXNvdXJjZTogZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZTogYmFzZVJlc291cmNlLFxuICAgIGJ1ZmZlclZpZXdJZDogYnVmZmVyVmlld0lkLFxuICAgIGRyYWNvOiBkcmFjbyxcbiAgICBhdHRyaWJ1dGVTZW1hbnRpYzogYXR0cmlidXRlU2VtYW50aWMsXG4gIH0pO1xuXG4gIHZhciB2ZXJ0ZXhCdWZmZXJMb2FkZXIgPSBSZXNvdXJjZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChkZWZpbmVkKHZlcnRleEJ1ZmZlckxvYWRlcikpIHtcbiAgICByZXR1cm4gdmVydGV4QnVmZmVyTG9hZGVyO1xuICB9XG5cbiAgdmVydGV4QnVmZmVyTG9hZGVyID0gbmV3IEdsdGZWZXJ0ZXhCdWZmZXJMb2FkZXIoe1xuICAgIHJlc291cmNlQ2FjaGU6IFJlc291cmNlQ2FjaGUsXG4gICAgZ2x0ZjogZ2x0ZixcbiAgICBnbHRmUmVzb3VyY2U6IGdsdGZSZXNvdXJjZSxcbiAgICBiYXNlUmVzb3VyY2U6IGJhc2VSZXNvdXJjZSxcbiAgICBidWZmZXJWaWV3SWQ6IGJ1ZmZlclZpZXdJZCxcbiAgICBkcmFjbzogZHJhY28sXG4gICAgYXR0cmlidXRlU2VtYW50aWM6IGF0dHJpYnV0ZVNlbWFudGljLFxuICAgIGFjY2Vzc29ySWQ6IGFjY2Vzc29ySWQsXG4gICAgY2FjaGVLZXk6IGNhY2hlS2V5LFxuICAgIGFzeW5jaHJvbm91czogYXN5bmNocm9ub3VzLFxuICAgIGRlcXVhbnRpemU6IGRlcXVhbnRpemUsXG4gIH0pO1xuXG4gIFJlc291cmNlQ2FjaGUubG9hZCh7XG4gICAgcmVzb3VyY2VMb2FkZXI6IHZlcnRleEJ1ZmZlckxvYWRlcixcbiAgfSk7XG5cbiAgcmV0dXJuIHZlcnRleEJ1ZmZlckxvYWRlcjtcbn07XG5cbi8qKlxuICogTG9hZHMgYSBnbFRGIGluZGV4IGJ1ZmZlciBmcm9tIHRoZSBjYWNoZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5nbHRmIFRoZSBnbFRGIEpTT04uXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5hY2Nlc3NvcklkIFRoZSBhY2Nlc3NvciBJRCBjb3JyZXNwb25kaW5nIHRvIHRoZSBpbmRleCBidWZmZXIuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmdsdGZSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSBjb250YWluaW5nIHRoZSBnbFRGLlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5iYXNlUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gdGhhdCBwYXRocyBpbiB0aGUgZ2xURiBKU09OIGFyZSByZWxhdGl2ZSB0by5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5kcmFjb10gVGhlIERyYWNvIGV4dGVuc2lvbiBvYmplY3QuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFzeW5jaHJvbm91cz10cnVlXSBEZXRlcm1pbmVzIGlmIFdlYkdMIHJlc291cmNlIGNyZWF0aW9uIHdpbGwgYmUgc3ByZWFkIG91dCBvdmVyIHNldmVyYWwgZnJhbWVzIG9yIGJsb2NrIHVudGlsIGFsbCBXZWJHTCByZXNvdXJjZXMgYXJlIGNyZWF0ZWQuXG4gKlxuICogQHJldHVybnMge0dsdGZJbmRleEJ1ZmZlckxvYWRlcn0gVGhlIGluZGV4IGJ1ZmZlciBsb2FkZXIuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlLmxvYWRJbmRleEJ1ZmZlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBnbHRmID0gb3B0aW9ucy5nbHRmO1xuICB2YXIgYWNjZXNzb3JJZCA9IG9wdGlvbnMuYWNjZXNzb3JJZDtcbiAgdmFyIGdsdGZSZXNvdXJjZSA9IG9wdGlvbnMuZ2x0ZlJlc291cmNlO1xuICB2YXIgYmFzZVJlc291cmNlID0gb3B0aW9ucy5iYXNlUmVzb3VyY2U7XG4gIHZhciBkcmFjbyA9IG9wdGlvbnMuZHJhY287XG4gIHZhciBhc3luY2hyb25vdXMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5hc3luY2hyb25vdXMsIHRydWUpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLmFjY2Vzc29ySWRcIiwgYWNjZXNzb3JJZCk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZSZXNvdXJjZVwiLCBnbHRmUmVzb3VyY2UpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5iYXNlUmVzb3VyY2VcIiwgYmFzZVJlc291cmNlKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGNhY2hlS2V5ID0gUmVzb3VyY2VDYWNoZUtleS5nZXRJbmRleEJ1ZmZlckNhY2hlS2V5KHtcbiAgICBnbHRmOiBnbHRmLFxuICAgIGFjY2Vzc29ySWQ6IGFjY2Vzc29ySWQsXG4gICAgZ2x0ZlJlc291cmNlOiBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlOiBiYXNlUmVzb3VyY2UsXG4gICAgZHJhY286IGRyYWNvLFxuICB9KTtcblxuICB2YXIgaW5kZXhCdWZmZXJMb2FkZXIgPSBSZXNvdXJjZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChkZWZpbmVkKGluZGV4QnVmZmVyTG9hZGVyKSkge1xuICAgIHJldHVybiBpbmRleEJ1ZmZlckxvYWRlcjtcbiAgfVxuXG4gIGluZGV4QnVmZmVyTG9hZGVyID0gbmV3IEdsdGZJbmRleEJ1ZmZlckxvYWRlcih7XG4gICAgcmVzb3VyY2VDYWNoZTogUmVzb3VyY2VDYWNoZSxcbiAgICBnbHRmOiBnbHRmLFxuICAgIGFjY2Vzc29ySWQ6IGFjY2Vzc29ySWQsXG4gICAgZ2x0ZlJlc291cmNlOiBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlOiBiYXNlUmVzb3VyY2UsXG4gICAgZHJhY286IGRyYWNvLFxuICAgIGNhY2hlS2V5OiBjYWNoZUtleSxcbiAgICBhc3luY2hyb25vdXM6IGFzeW5jaHJvbm91cyxcbiAgfSk7XG5cbiAgUmVzb3VyY2VDYWNoZS5sb2FkKHtcbiAgICByZXNvdXJjZUxvYWRlcjogaW5kZXhCdWZmZXJMb2FkZXIsXG4gIH0pO1xuXG4gIHJldHVybiBpbmRleEJ1ZmZlckxvYWRlcjtcbn07XG5cbi8qKlxuICogTG9hZHMgYSBnbFRGIGltYWdlIGZyb20gdGhlIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmdsdGYgVGhlIGdsVEYgSlNPTi5cbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmltYWdlSWQgVGhlIGltYWdlIElELlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5nbHRmUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gY29udGFpbmluZyB0aGUgZ2xURi5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuYmFzZVJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHRoYXQgcGF0aHMgaW4gdGhlIGdsVEYgSlNPTiBhcmUgcmVsYXRpdmUgdG8uXG4gKlxuICogQHJldHVybnMge0dsdGZJbWFnZUxvYWRlcn0gVGhlIGltYWdlIGxvYWRlci5cbiAqIEBwcml2YXRlXG4gKi9cblJlc291cmNlQ2FjaGUubG9hZEltYWdlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIGdsdGYgPSBvcHRpb25zLmdsdGY7XG4gIHZhciBpbWFnZUlkID0gb3B0aW9ucy5pbWFnZUlkO1xuICB2YXIgZ2x0ZlJlc291cmNlID0gb3B0aW9ucy5nbHRmUmVzb3VyY2U7XG4gIHZhciBiYXNlUmVzb3VyY2UgPSBvcHRpb25zLmJhc2VSZXNvdXJjZTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmXCIsIGdsdGYpO1xuICBDaGVjay50eXBlT2YubnVtYmVyKFwib3B0aW9ucy5pbWFnZUlkXCIsIGltYWdlSWQpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmUmVzb3VyY2VcIiwgZ2x0ZlJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuYmFzZVJlc291cmNlXCIsIGJhc2VSZXNvdXJjZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBjYWNoZUtleSA9IFJlc291cmNlQ2FjaGVLZXkuZ2V0SW1hZ2VDYWNoZUtleSh7XG4gICAgZ2x0ZjogZ2x0ZixcbiAgICBpbWFnZUlkOiBpbWFnZUlkLFxuICAgIGdsdGZSZXNvdXJjZTogZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZTogYmFzZVJlc291cmNlLFxuICB9KTtcblxuICB2YXIgaW1hZ2VMb2FkZXIgPSBSZXNvdXJjZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChkZWZpbmVkKGltYWdlTG9hZGVyKSkge1xuICAgIHJldHVybiBpbWFnZUxvYWRlcjtcbiAgfVxuXG4gIGltYWdlTG9hZGVyID0gbmV3IEdsdGZJbWFnZUxvYWRlcih7XG4gICAgcmVzb3VyY2VDYWNoZTogUmVzb3VyY2VDYWNoZSxcbiAgICBnbHRmOiBnbHRmLFxuICAgIGltYWdlSWQ6IGltYWdlSWQsXG4gICAgZ2x0ZlJlc291cmNlOiBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlOiBiYXNlUmVzb3VyY2UsXG4gICAgY2FjaGVLZXk6IGNhY2hlS2V5LFxuICB9KTtcblxuICBSZXNvdXJjZUNhY2hlLmxvYWQoe1xuICAgIHJlc291cmNlTG9hZGVyOiBpbWFnZUxvYWRlcixcbiAgfSk7XG5cbiAgcmV0dXJuIGltYWdlTG9hZGVyO1xufTtcblxuLyoqXG4gKiBMb2FkcyBhIGdsVEYgdGV4dHVyZSBmcm9tIHRoZSBjYWNoZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5nbHRmIFRoZSBnbFRGIEpTT04uXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy50ZXh0dXJlSW5mbyBUaGUgdGV4dHVyZSBpbmZvIG9iamVjdC5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmJhc2VSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSB0aGF0IHBhdGhzIGluIHRoZSBnbFRGIEpTT04gYXJlIHJlbGF0aXZlIHRvLlxuICogQHBhcmFtIHtTdXBwb3J0ZWRJbWFnZUZvcm1hdHN9IG9wdGlvbnMuc3VwcG9ydGVkSW1hZ2VGb3JtYXRzIFRoZSBzdXBwb3J0ZWQgaW1hZ2UgZm9ybWF0cy5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYXN5bmNocm9ub3VzPXRydWVdIERldGVybWluZXMgaWYgV2ViR0wgcmVzb3VyY2UgY3JlYXRpb24gd2lsbCBiZSBzcHJlYWQgb3V0IG92ZXIgc2V2ZXJhbCBmcmFtZXMgb3IgYmxvY2sgdW50aWwgYWxsIFdlYkdMIHJlc291cmNlcyBhcmUgY3JlYXRlZC5cbiAqXG4gKiBAcmV0dXJucyB7R2x0ZlRleHR1cmVMb2FkZXJ9IFRoZSB0ZXh0dXJlIGxvYWRlci5cbiAqIEBwcml2YXRlXG4gKi9cblJlc291cmNlQ2FjaGUubG9hZFRleHR1cmUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZ2x0ZiA9IG9wdGlvbnMuZ2x0ZjtcbiAgdmFyIHRleHR1cmVJbmZvID0gb3B0aW9ucy50ZXh0dXJlSW5mbztcbiAgdmFyIGdsdGZSZXNvdXJjZSA9IG9wdGlvbnMuZ2x0ZlJlc291cmNlO1xuICB2YXIgYmFzZVJlc291cmNlID0gb3B0aW9ucy5iYXNlUmVzb3VyY2U7XG4gIHZhciBzdXBwb3J0ZWRJbWFnZUZvcm1hdHMgPSBvcHRpb25zLnN1cHBvcnRlZEltYWdlRm9ybWF0cztcbiAgdmFyIGFzeW5jaHJvbm91cyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmFzeW5jaHJvbm91cywgdHJ1ZSk7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlwiLCBnbHRmKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMudGV4dHVyZUluZm9cIiwgdGV4dHVyZUluZm8pO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmUmVzb3VyY2VcIiwgZ2x0ZlJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuYmFzZVJlc291cmNlXCIsIGJhc2VSZXNvdXJjZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBjYWNoZUtleSA9IFJlc291cmNlQ2FjaGVLZXkuZ2V0VGV4dHVyZUNhY2hlS2V5KHtcbiAgICBnbHRmOiBnbHRmLFxuICAgIHRleHR1cmVJbmZvOiB0ZXh0dXJlSW5mbyxcbiAgICBnbHRmUmVzb3VyY2U6IGdsdGZSZXNvdXJjZSxcbiAgICBiYXNlUmVzb3VyY2U6IGJhc2VSZXNvdXJjZSxcbiAgICBzdXBwb3J0ZWRJbWFnZUZvcm1hdHM6IHN1cHBvcnRlZEltYWdlRm9ybWF0cyxcbiAgfSk7XG5cbiAgdmFyIHRleHR1cmVMb2FkZXIgPSBSZXNvdXJjZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChkZWZpbmVkKHRleHR1cmVMb2FkZXIpKSB7XG4gICAgcmV0dXJuIHRleHR1cmVMb2FkZXI7XG4gIH1cblxuICB0ZXh0dXJlTG9hZGVyID0gbmV3IEdsdGZUZXh0dXJlTG9hZGVyKHtcbiAgICByZXNvdXJjZUNhY2hlOiBSZXNvdXJjZUNhY2hlLFxuICAgIGdsdGY6IGdsdGYsXG4gICAgdGV4dHVyZUluZm86IHRleHR1cmVJbmZvLFxuICAgIGdsdGZSZXNvdXJjZTogZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZTogYmFzZVJlc291cmNlLFxuICAgIHN1cHBvcnRlZEltYWdlRm9ybWF0czogc3VwcG9ydGVkSW1hZ2VGb3JtYXRzLFxuICAgIGNhY2hlS2V5OiBjYWNoZUtleSxcbiAgICBhc3luY2hyb25vdXM6IGFzeW5jaHJvbm91cyxcbiAgfSk7XG5cbiAgUmVzb3VyY2VDYWNoZS5sb2FkKHtcbiAgICByZXNvdXJjZUxvYWRlcjogdGV4dHVyZUxvYWRlcixcbiAgfSk7XG5cbiAgcmV0dXJuIHRleHR1cmVMb2FkZXI7XG59O1xuXG4vKipcbiAqIFVubG9hZCBldmVyeXRoaW5nIGZyb20gdGhlIGNhY2hlLiBUaGlzIGlzIHVzZWQgZm9yIHVuaXQgdGVzdGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlLmNsZWFyRm9yU3BlY3MgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFVubG9hZCBpbiB0aGUgb3JkZXIgYmVsb3cuIFRoaXMgcHJldmVudHMgYW4gdW5sb2FkIGZ1bmN0aW9uIGZyb20gdW5sb2FkaW5nXG4gIC8vIGEgcmVzb3VyY2UgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHVubG9hZGVkLlxuICB2YXIgcHJlY2VkZW5jZSA9IFtcbiAgICBHbHRmVmVydGV4QnVmZmVyTG9hZGVyLFxuICAgIEdsdGZJbmRleEJ1ZmZlckxvYWRlcixcbiAgICBHbHRmRHJhY29Mb2FkZXIsXG4gICAgR2x0ZlRleHR1cmVMb2FkZXIsXG4gICAgR2x0ZkltYWdlTG9hZGVyLFxuICAgIEdsdGZCdWZmZXJWaWV3TG9hZGVyLFxuICAgIEJ1ZmZlckxvYWRlcixcbiAgICBNZXRhZGF0YVNjaGVtYUxvYWRlcixcbiAgICBHbHRmSnNvbkxvYWRlcixcbiAgXTtcblxuICB2YXIgY2FjaGVLZXk7XG4gIHZhciBjYWNoZUVudHJpZXMgPSBSZXNvdXJjZUNhY2hlLmNhY2hlRW50cmllcztcblxuICB2YXIgY2FjaGVFbnRyaWVzU29ydGVkID0gW107XG4gIGZvciAoY2FjaGVLZXkgaW4gY2FjaGVFbnRyaWVzKSB7XG4gICAgaWYgKGNhY2hlRW50cmllcy5oYXNPd25Qcm9wZXJ0eShjYWNoZUtleSkpIHtcbiAgICAgIGNhY2hlRW50cmllc1NvcnRlZC5wdXNoKGNhY2hlRW50cmllc1tjYWNoZUtleV0pO1xuICAgIH1cbiAgfVxuXG4gIGNhY2hlRW50cmllc1NvcnRlZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgdmFyIGluZGV4QSA9IHByZWNlZGVuY2UuaW5kZXhPZihhLnJlc291cmNlTG9hZGVyLmNvbnN0cnVjdG9yKTtcbiAgICB2YXIgaW5kZXhCID0gcHJlY2VkZW5jZS5pbmRleE9mKGIucmVzb3VyY2VMb2FkZXIuY29uc3RydWN0b3IpO1xuICAgIHJldHVybiBpbmRleEEgLSBpbmRleEI7XG4gIH0pO1xuXG4gIHZhciBjYWNoZUVudHJpZXNMZW5ndGggPSBjYWNoZUVudHJpZXNTb3J0ZWQubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNhY2hlRW50cmllc0xlbmd0aDsgKytpKSB7XG4gICAgdmFyIGNhY2hlRW50cnkgPSBjYWNoZUVudHJpZXNTb3J0ZWRbaV07XG4gICAgY2FjaGVLZXkgPSBjYWNoZUVudHJ5LnJlc291cmNlTG9hZGVyLmNhY2hlS2V5O1xuICAgIGlmIChkZWZpbmVkKGNhY2hlRW50cmllc1tjYWNoZUtleV0pKSB7XG4gICAgICBjYWNoZUVudHJ5LnJlc291cmNlTG9hZGVyLmRlc3Ryb3koKTtcbiAgICAgIGRlbGV0ZSBjYWNoZUVudHJpZXNbY2FjaGVLZXldO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgUmVzb3VyY2VDYWNoZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///38956\n')},72638:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_getAbsoluteUri_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(83295);\n/* harmony import */ var _GltfLoaderUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(61120);\n/* harmony import */ var _hasExtension_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(81326);\n\n\n\n\n\n\n\n\n/**\n * Compute cache keys for resources in {@link ResourceCache}.\n *\n * @namespace ResourceCacheKey\n *\n * @private\n */\nvar ResourceCacheKey = {};\n\nfunction getExternalResourceCacheKey(resource) {\n  return (0,_Core_getAbsoluteUri_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(resource.url);\n}\n\nfunction getBufferViewCacheKey(bufferView) {\n  var byteOffset = bufferView.byteOffset;\n  var byteLength = bufferView.byteLength;\n\n  if ((0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(bufferView, "EXT_meshopt_compression")) {\n    var meshopt = bufferView.extensions.EXT_meshopt_compression;\n    byteOffset = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(meshopt.byteOffset, 0);\n    byteLength = meshopt.byteLength;\n  }\n\n  return byteOffset + "-" + (byteOffset + byteLength);\n}\n\nfunction getAccessorCacheKey(accessor, bufferView) {\n  var byteOffset = bufferView.byteOffset + accessor.byteOffset;\n  var componentType = accessor.componentType;\n  var type = accessor.type;\n  var count = accessor.count;\n  return byteOffset + "-" + componentType + "-" + type + "-" + count;\n}\n\nfunction getExternalBufferCacheKey(resource) {\n  return getExternalResourceCacheKey(resource);\n}\n\nfunction getEmbeddedBufferCacheKey(parentResource, bufferId) {\n  var parentCacheKey = getExternalResourceCacheKey(parentResource);\n  return parentCacheKey + "-buffer-id-" + bufferId;\n}\n\nfunction getBufferCacheKey(buffer, bufferId, gltfResource, baseResource) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(buffer.uri)) {\n    var resource = baseResource.getDerivedResource({\n      url: buffer.uri,\n    });\n    return getExternalBufferCacheKey(resource);\n  }\n\n  return getEmbeddedBufferCacheKey(gltfResource, bufferId);\n}\n\nfunction getDracoCacheKey(gltf, draco, gltfResource, baseResource) {\n  var bufferViewId = draco.bufferView;\n  var bufferView = gltf.bufferViews[bufferViewId];\n  var bufferId = bufferView.buffer;\n  var buffer = gltf.buffers[bufferId];\n\n  var bufferCacheKey = getBufferCacheKey(\n    buffer,\n    bufferId,\n    gltfResource,\n    baseResource\n  );\n\n  var bufferViewCacheKey = getBufferViewCacheKey(bufferView);\n\n  return bufferCacheKey + "-range-" + bufferViewCacheKey;\n}\n\nfunction getImageCacheKey(gltf, imageId, gltfResource, baseResource) {\n  var image = gltf.images[imageId];\n  var bufferViewId = image.bufferView;\n  var uri = image.uri;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(uri)) {\n    var resource = baseResource.getDerivedResource({\n      url: uri,\n    });\n    return getExternalResourceCacheKey(resource);\n  }\n\n  var bufferView = gltf.bufferViews[bufferViewId];\n  var bufferId = bufferView.buffer;\n  var buffer = gltf.buffers[bufferId];\n\n  var bufferCacheKey = getBufferCacheKey(\n    buffer,\n    bufferId,\n    gltfResource,\n    baseResource\n  );\n\n  var bufferViewCacheKey = getBufferViewCacheKey(bufferView);\n\n  return bufferCacheKey + "-range-" + bufferViewCacheKey;\n}\n\nfunction getSamplerCacheKey(gltf, textureInfo) {\n  var sampler = _GltfLoaderUtil_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].createSampler */ .Z.createSampler({\n    gltf: gltf,\n    textureInfo: textureInfo,\n  });\n\n  return (\n    sampler.wrapS +\n    "-" +\n    sampler.wrapT +\n    "-" +\n    sampler.minificationFilter +\n    "-" +\n    sampler.magnificationFilter\n  );\n}\n\n/**\n * Gets the schema cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} [options.schema] An object that explicitly defines a schema JSON. Mutually exclusive with options.resource.\n * @param {Resource} [options.resource] The {@link Resource} pointing to the schema JSON. Mutually exclusive with options.schema.\n *\n * @returns {String} The schema cache key.\n *\n * @exception {DeveloperError} One of options.schema and options.resource must be defined.\n * @private\n */\nResourceCacheKey.getSchemaCacheKey = function (options) {\n  var schema = options.schema;\n  var resource = options.resource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(schema) === (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(resource)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "One of options.schema and options.resource must be defined."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(schema)) {\n    return "embedded-schema:" + JSON.stringify(schema);\n  }\n\n  return "external-schema:" + getExternalResourceCacheKey(resource);\n};\n\n/**\n * Gets the external buffer cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource} options.resource The {@link Resource} pointing to the external buffer.\n *\n * @returns {String} The external buffer cache key.\n * @private\n */\nResourceCacheKey.getExternalBufferCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var resource = options.resource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.resource", resource);\n  //>>includeEnd(\'debug\');\n\n  return "external-buffer:" + getExternalBufferCacheKey(resource);\n};\n\n/**\n * Gets the embedded buffer cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource} options.parentResource The {@link Resource} containing the embedded buffer.\n * @param {Number} options.bufferId A unique identifier of the embedded buffer within the parent resource.\n *\n * @returns {String} The embedded buffer cache key.\n * @private\n */\nResourceCacheKey.getEmbeddedBufferCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var parentResource = options.parentResource;\n  var bufferId = options.bufferId;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.parentResource", parentResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.bufferId", bufferId);\n  //>>includeEnd(\'debug\');\n\n  return (\n    "embedded-buffer:" + getEmbeddedBufferCacheKey(parentResource, bufferId)\n  );\n};\n\n/**\n * Gets the glTF cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n *\n * @returns {String} The glTF cache key.\n * @private\n */\nResourceCacheKey.getGltfCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltfResource = options.gltfResource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  //>>includeEnd(\'debug\');\n\n  return "gltf:" + getExternalResourceCacheKey(gltfResource);\n};\n\n/**\n * Gets the buffer view cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Number} options.bufferViewId The bufferView ID.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n *\n * @returns {String} The buffer view cache key.\n * @private\n */\nResourceCacheKey.getBufferViewCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var bufferViewId = options.bufferViewId;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.bufferViewId", bufferViewId);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var bufferView = gltf.bufferViews[bufferViewId];\n  var bufferId = bufferView.buffer;\n  var buffer = gltf.buffers[bufferId];\n  if ((0,_hasExtension_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(bufferView, "EXT_meshopt_compression")) {\n    var meshopt = bufferView.extensions.EXT_meshopt_compression;\n    bufferId = meshopt.buffer;\n  }\n\n  var bufferCacheKey = getBufferCacheKey(\n    buffer,\n    bufferId,\n    gltfResource,\n    baseResource\n  );\n\n  var bufferViewCacheKey = getBufferViewCacheKey(bufferView);\n\n  return "buffer-view:" + bufferCacheKey + "-range-" + bufferViewCacheKey;\n};\n\n/**\n * Gets the Draco cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Object} options.draco The Draco extension object.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n *\n * @returns {String} The Draco cache key.\n * @private\n */\nResourceCacheKey.getDracoCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var draco = options.draco;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.draco", draco);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  return "draco:" + getDracoCacheKey(gltf, draco, gltfResource, baseResource);\n};\n\n/**\n * Gets the vertex buffer cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {Number} [options.bufferViewId] The bufferView ID corresponding to the vertex buffer.\n * @param {Object} [options.draco] The Draco extension object.\n * @param {String} [options.attributeSemantic] The attribute semantic, e.g. POSITION or NORMAL.\n *\n * @exception {DeveloperError} One of options.bufferViewId and options.draco must be defined.\n * @exception {DeveloperError} When options.draco is defined options.attributeSemantic must also be defined.\n *\n * @returns {String} The vertex buffer cache key.\n * @private\n */\nResourceCacheKey.getVertexBufferCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var bufferViewId = options.bufferViewId;\n  var draco = options.draco;\n  var attributeSemantic = options.attributeSemantic;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n\n  var hasBufferViewId = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(bufferViewId);\n  var hasDraco = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(draco);\n  var hasAttributeSemantic = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(attributeSemantic);\n\n  if (hasBufferViewId === hasDraco) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "One of options.bufferViewId and options.draco must be defined."\n    );\n  }\n\n  if (hasDraco && !hasAttributeSemantic) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      "When options.draco is defined options.attributeSemantic must also be defined."\n    );\n  }\n\n  if (hasDraco) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.draco", draco);\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("options.attributeSemantic", attributeSemantic);\n  }\n  //>>includeEnd(\'debug\');\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(draco)) {\n    var dracoCacheKey = getDracoCacheKey(\n      gltf,\n      draco,\n      gltfResource,\n      baseResource\n    );\n    return "vertex-buffer:" + dracoCacheKey + "-draco-" + attributeSemantic;\n  }\n\n  var bufferView = gltf.bufferViews[bufferViewId];\n  var bufferId = bufferView.buffer;\n  var buffer = gltf.buffers[bufferId];\n\n  var bufferCacheKey = getBufferCacheKey(\n    buffer,\n    bufferId,\n    gltfResource,\n    baseResource\n  );\n\n  var bufferViewCacheKey = getBufferViewCacheKey(bufferView);\n\n  return "vertex-buffer:" + bufferCacheKey + "-range-" + bufferViewCacheKey;\n};\n\n/**\n * Gets the index buffer cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Number} options.accessorId The accessor ID corresponding to the index buffer.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {Object} [options.draco] The Draco extension object.\n *\n * @returns {String} The index buffer cache key.\n * @private\n */\nResourceCacheKey.getIndexBufferCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var accessorId = options.accessorId;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var draco = options.draco;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.accessorId", accessorId);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(draco)) {\n    var dracoCacheKey = getDracoCacheKey(\n      gltf,\n      draco,\n      gltfResource,\n      baseResource\n    );\n    return "index-buffer:" + dracoCacheKey + "-draco";\n  }\n\n  var accessor = gltf.accessors[accessorId];\n  var bufferViewId = accessor.bufferView;\n  var bufferView = gltf.bufferViews[bufferViewId];\n  var bufferId = bufferView.buffer;\n  var buffer = gltf.buffers[bufferId];\n\n  var bufferCacheKey = getBufferCacheKey(\n    buffer,\n    bufferId,\n    gltfResource,\n    baseResource\n  );\n\n  var accessorCacheKey = getAccessorCacheKey(accessor, bufferView);\n\n  return "index-buffer:" + bufferCacheKey + "-accessor-" + accessorCacheKey;\n};\n\n/**\n * Gets the image cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Number} options.imageId The image ID.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n *\n * @returns {String} The image cache key.\n * @private\n */\nResourceCacheKey.getImageCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var imageId = options.imageId;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.number */ .Z.typeOf.number("options.imageId", imageId);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  //>>includeEnd(\'debug\');\n\n  var imageCacheKey = getImageCacheKey(\n    gltf,\n    imageId,\n    gltfResource,\n    baseResource\n  );\n\n  return "image:" + imageCacheKey;\n};\n\n/**\n * Gets the texture cache key.\n *\n * @param {Object} options Object with the following properties:\n * @param {Object} options.gltf The glTF JSON.\n * @param {Object} options.textureInfo The texture info object.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {SupportedImageFormats} options.supportedImageFormats The supported image formats.\n *\n * @returns {String} The texture cache key.\n * @private\n */\nResourceCacheKey.getTextureCacheKey = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var gltf = options.gltf;\n  var textureInfo = options.textureInfo;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var supportedImageFormats = options.supportedImageFormats;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.textureInfo", textureInfo);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.supportedImageFormats", supportedImageFormats);\n  //>>includeEnd(\'debug\');\n\n  var textureId = textureInfo.index;\n\n  var imageId = _GltfLoaderUtil_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getImageIdFromTexture */ .Z.getImageIdFromTexture({\n    gltf: gltf,\n    textureId: textureId,\n    supportedImageFormats: supportedImageFormats,\n  });\n\n  var imageCacheKey = getImageCacheKey(\n    gltf,\n    imageId,\n    gltfResource,\n    baseResource\n  );\n\n  // Include the sampler cache key in the texture cache key since textures and\n  // samplers are coupled in WebGL 1. When upgrading to WebGL 2 consider\n  // removing the sampleCacheKey here.\n  var samplerCacheKey = getSamplerCacheKey(gltf, textureInfo);\n\n  return "texture:" + imageCacheKey + "-sampler-" + samplerCacheKey;\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (ResourceCacheKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVUsMEJBQTBCLGdCQUFnQjtBQUMvRCxXQUFXLFVBQVUsMEJBQTBCLGdCQUFnQjtBQUMvRCxXQUFXLHVCQUF1QjtBQUNsQztBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBFQUFZLFVBQVUsZ0dBQXlCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFLDJGQUFtQjtBQUNyQixFQUFFLDJGQUFtQjtBQUNyQixFQUFFLDJGQUFtQjtBQUNyQixFQUFFLDJGQUFtQjtBQUNyQixFQUFFLDJGQUFtQjtBQUNyQjs7QUFFQTs7QUFFQSxnQkFBZ0IsK0dBQW9DO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEseURBQWUsZ0JBQWdCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvUmVzb3VyY2VDYWNoZUtleS5qcz9iNGYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IGdldEFic29sdXRlVXJpIGZyb20gXCIuLi9Db3JlL2dldEFic29sdXRlVXJpLmpzXCI7XG5pbXBvcnQgR2x0ZkxvYWRlclV0aWwgZnJvbSBcIi4vR2x0ZkxvYWRlclV0aWwuanNcIjtcbmltcG9ydCBoYXNFeHRlbnNpb24gZnJvbSBcIi4vaGFzRXh0ZW5zaW9uLmpzXCI7XG5cbi8qKlxuICogQ29tcHV0ZSBjYWNoZSBrZXlzIGZvciByZXNvdXJjZXMgaW4ge0BsaW5rIFJlc291cmNlQ2FjaGV9LlxuICpcbiAqIEBuYW1lc3BhY2UgUmVzb3VyY2VDYWNoZUtleVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBSZXNvdXJjZUNhY2hlS2V5ID0ge307XG5cbmZ1bmN0aW9uIGdldEV4dGVybmFsUmVzb3VyY2VDYWNoZUtleShyZXNvdXJjZSkge1xuICByZXR1cm4gZ2V0QWJzb2x1dGVVcmkocmVzb3VyY2UudXJsKTtcbn1cblxuZnVuY3Rpb24gZ2V0QnVmZmVyVmlld0NhY2hlS2V5KGJ1ZmZlclZpZXcpIHtcbiAgdmFyIGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3LmJ5dGVPZmZzZXQ7XG4gIHZhciBieXRlTGVuZ3RoID0gYnVmZmVyVmlldy5ieXRlTGVuZ3RoO1xuXG4gIGlmIChoYXNFeHRlbnNpb24oYnVmZmVyVmlldywgXCJFWFRfbWVzaG9wdF9jb21wcmVzc2lvblwiKSkge1xuICAgIHZhciBtZXNob3B0ID0gYnVmZmVyVmlldy5leHRlbnNpb25zLkVYVF9tZXNob3B0X2NvbXByZXNzaW9uO1xuICAgIGJ5dGVPZmZzZXQgPSBkZWZhdWx0VmFsdWUobWVzaG9wdC5ieXRlT2Zmc2V0LCAwKTtcbiAgICBieXRlTGVuZ3RoID0gbWVzaG9wdC5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIGJ5dGVPZmZzZXQgKyBcIi1cIiArIChieXRlT2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIGdldEFjY2Vzc29yQ2FjaGVLZXkoYWNjZXNzb3IsIGJ1ZmZlclZpZXcpIHtcbiAgdmFyIGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3LmJ5dGVPZmZzZXQgKyBhY2Nlc3Nvci5ieXRlT2Zmc2V0O1xuICB2YXIgY29tcG9uZW50VHlwZSA9IGFjY2Vzc29yLmNvbXBvbmVudFR5cGU7XG4gIHZhciB0eXBlID0gYWNjZXNzb3IudHlwZTtcbiAgdmFyIGNvdW50ID0gYWNjZXNzb3IuY291bnQ7XG4gIHJldHVybiBieXRlT2Zmc2V0ICsgXCItXCIgKyBjb21wb25lbnRUeXBlICsgXCItXCIgKyB0eXBlICsgXCItXCIgKyBjb3VudDtcbn1cblxuZnVuY3Rpb24gZ2V0RXh0ZXJuYWxCdWZmZXJDYWNoZUtleShyZXNvdXJjZSkge1xuICByZXR1cm4gZ2V0RXh0ZXJuYWxSZXNvdXJjZUNhY2hlS2V5KHJlc291cmNlKTtcbn1cblxuZnVuY3Rpb24gZ2V0RW1iZWRkZWRCdWZmZXJDYWNoZUtleShwYXJlbnRSZXNvdXJjZSwgYnVmZmVySWQpIHtcbiAgdmFyIHBhcmVudENhY2hlS2V5ID0gZ2V0RXh0ZXJuYWxSZXNvdXJjZUNhY2hlS2V5KHBhcmVudFJlc291cmNlKTtcbiAgcmV0dXJuIHBhcmVudENhY2hlS2V5ICsgXCItYnVmZmVyLWlkLVwiICsgYnVmZmVySWQ7XG59XG5cbmZ1bmN0aW9uIGdldEJ1ZmZlckNhY2hlS2V5KGJ1ZmZlciwgYnVmZmVySWQsIGdsdGZSZXNvdXJjZSwgYmFzZVJlc291cmNlKSB7XG4gIGlmIChkZWZpbmVkKGJ1ZmZlci51cmkpKSB7XG4gICAgdmFyIHJlc291cmNlID0gYmFzZVJlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgICB1cmw6IGJ1ZmZlci51cmksXG4gICAgfSk7XG4gICAgcmV0dXJuIGdldEV4dGVybmFsQnVmZmVyQ2FjaGVLZXkocmVzb3VyY2UpO1xuICB9XG5cbiAgcmV0dXJuIGdldEVtYmVkZGVkQnVmZmVyQ2FjaGVLZXkoZ2x0ZlJlc291cmNlLCBidWZmZXJJZCk7XG59XG5cbmZ1bmN0aW9uIGdldERyYWNvQ2FjaGVLZXkoZ2x0ZiwgZHJhY28sIGdsdGZSZXNvdXJjZSwgYmFzZVJlc291cmNlKSB7XG4gIHZhciBidWZmZXJWaWV3SWQgPSBkcmFjby5idWZmZXJWaWV3O1xuICB2YXIgYnVmZmVyVmlldyA9IGdsdGYuYnVmZmVyVmlld3NbYnVmZmVyVmlld0lkXTtcbiAgdmFyIGJ1ZmZlcklkID0gYnVmZmVyVmlldy5idWZmZXI7XG4gIHZhciBidWZmZXIgPSBnbHRmLmJ1ZmZlcnNbYnVmZmVySWRdO1xuXG4gIHZhciBidWZmZXJDYWNoZUtleSA9IGdldEJ1ZmZlckNhY2hlS2V5KFxuICAgIGJ1ZmZlcixcbiAgICBidWZmZXJJZCxcbiAgICBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlXG4gICk7XG5cbiAgdmFyIGJ1ZmZlclZpZXdDYWNoZUtleSA9IGdldEJ1ZmZlclZpZXdDYWNoZUtleShidWZmZXJWaWV3KTtcblxuICByZXR1cm4gYnVmZmVyQ2FjaGVLZXkgKyBcIi1yYW5nZS1cIiArIGJ1ZmZlclZpZXdDYWNoZUtleTtcbn1cblxuZnVuY3Rpb24gZ2V0SW1hZ2VDYWNoZUtleShnbHRmLCBpbWFnZUlkLCBnbHRmUmVzb3VyY2UsIGJhc2VSZXNvdXJjZSkge1xuICB2YXIgaW1hZ2UgPSBnbHRmLmltYWdlc1tpbWFnZUlkXTtcbiAgdmFyIGJ1ZmZlclZpZXdJZCA9IGltYWdlLmJ1ZmZlclZpZXc7XG4gIHZhciB1cmkgPSBpbWFnZS51cmk7XG5cbiAgaWYgKGRlZmluZWQodXJpKSkge1xuICAgIHZhciByZXNvdXJjZSA9IGJhc2VSZXNvdXJjZS5nZXREZXJpdmVkUmVzb3VyY2Uoe1xuICAgICAgdXJsOiB1cmksXG4gICAgfSk7XG4gICAgcmV0dXJuIGdldEV4dGVybmFsUmVzb3VyY2VDYWNoZUtleShyZXNvdXJjZSk7XG4gIH1cblxuICB2YXIgYnVmZmVyVmlldyA9IGdsdGYuYnVmZmVyVmlld3NbYnVmZmVyVmlld0lkXTtcbiAgdmFyIGJ1ZmZlcklkID0gYnVmZmVyVmlldy5idWZmZXI7XG4gIHZhciBidWZmZXIgPSBnbHRmLmJ1ZmZlcnNbYnVmZmVySWRdO1xuXG4gIHZhciBidWZmZXJDYWNoZUtleSA9IGdldEJ1ZmZlckNhY2hlS2V5KFxuICAgIGJ1ZmZlcixcbiAgICBidWZmZXJJZCxcbiAgICBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlXG4gICk7XG5cbiAgdmFyIGJ1ZmZlclZpZXdDYWNoZUtleSA9IGdldEJ1ZmZlclZpZXdDYWNoZUtleShidWZmZXJWaWV3KTtcblxuICByZXR1cm4gYnVmZmVyQ2FjaGVLZXkgKyBcIi1yYW5nZS1cIiArIGJ1ZmZlclZpZXdDYWNoZUtleTtcbn1cblxuZnVuY3Rpb24gZ2V0U2FtcGxlckNhY2hlS2V5KGdsdGYsIHRleHR1cmVJbmZvKSB7XG4gIHZhciBzYW1wbGVyID0gR2x0ZkxvYWRlclV0aWwuY3JlYXRlU2FtcGxlcih7XG4gICAgZ2x0ZjogZ2x0ZixcbiAgICB0ZXh0dXJlSW5mbzogdGV4dHVyZUluZm8sXG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgc2FtcGxlci53cmFwUyArXG4gICAgXCItXCIgK1xuICAgIHNhbXBsZXIud3JhcFQgK1xuICAgIFwiLVwiICtcbiAgICBzYW1wbGVyLm1pbmlmaWNhdGlvbkZpbHRlciArXG4gICAgXCItXCIgK1xuICAgIHNhbXBsZXIubWFnbmlmaWNhdGlvbkZpbHRlclxuICApO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHNjaGVtYSBjYWNoZSBrZXkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnNjaGVtYV0gQW4gb2JqZWN0IHRoYXQgZXhwbGljaXRseSBkZWZpbmVzIGEgc2NoZW1hIEpTT04uIE11dHVhbGx5IGV4Y2x1c2l2ZSB3aXRoIG9wdGlvbnMucmVzb3VyY2UuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBbb3B0aW9ucy5yZXNvdXJjZV0gVGhlIHtAbGluayBSZXNvdXJjZX0gcG9pbnRpbmcgdG8gdGhlIHNjaGVtYSBKU09OLiBNdXR1YWxseSBleGNsdXNpdmUgd2l0aCBvcHRpb25zLnNjaGVtYS5cbiAqXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgc2NoZW1hIGNhY2hlIGtleS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gT25lIG9mIG9wdGlvbnMuc2NoZW1hIGFuZCBvcHRpb25zLnJlc291cmNlIG11c3QgYmUgZGVmaW5lZC5cbiAqIEBwcml2YXRlXG4gKi9cblJlc291cmNlQ2FjaGVLZXkuZ2V0U2NoZW1hQ2FjaGVLZXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICB2YXIgc2NoZW1hID0gb3B0aW9ucy5zY2hlbWE7XG4gIHZhciByZXNvdXJjZSA9IG9wdGlvbnMucmVzb3VyY2U7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKGRlZmluZWQoc2NoZW1hKSA9PT0gZGVmaW5lZChyZXNvdXJjZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIk9uZSBvZiBvcHRpb25zLnNjaGVtYSBhbmQgb3B0aW9ucy5yZXNvdXJjZSBtdXN0IGJlIGRlZmluZWQuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGlmIChkZWZpbmVkKHNjaGVtYSkpIHtcbiAgICByZXR1cm4gXCJlbWJlZGRlZC1zY2hlbWE6XCIgKyBKU09OLnN0cmluZ2lmeShzY2hlbWEpO1xuICB9XG5cbiAgcmV0dXJuIFwiZXh0ZXJuYWwtc2NoZW1hOlwiICsgZ2V0RXh0ZXJuYWxSZXNvdXJjZUNhY2hlS2V5KHJlc291cmNlKTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgZXh0ZXJuYWwgYnVmZmVyIGNhY2hlIGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLnJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHBvaW50aW5nIHRvIHRoZSBleHRlcm5hbCBidWZmZXIuXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIGV4dGVybmFsIGJ1ZmZlciBjYWNoZSBrZXkuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlS2V5LmdldEV4dGVybmFsQnVmZmVyQ2FjaGVLZXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgcmVzb3VyY2UgPSBvcHRpb25zLnJlc291cmNlO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLnJlc291cmNlXCIsIHJlc291cmNlKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgcmV0dXJuIFwiZXh0ZXJuYWwtYnVmZmVyOlwiICsgZ2V0RXh0ZXJuYWxCdWZmZXJDYWNoZUtleShyZXNvdXJjZSk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGVtYmVkZGVkIGJ1ZmZlciBjYWNoZSBrZXkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5wYXJlbnRSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSBjb250YWluaW5nIHRoZSBlbWJlZGRlZCBidWZmZXIuXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5idWZmZXJJZCBBIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSBlbWJlZGRlZCBidWZmZXIgd2l0aGluIHRoZSBwYXJlbnQgcmVzb3VyY2UuXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIGVtYmVkZGVkIGJ1ZmZlciBjYWNoZSBrZXkuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlS2V5LmdldEVtYmVkZGVkQnVmZmVyQ2FjaGVLZXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgcGFyZW50UmVzb3VyY2UgPSBvcHRpb25zLnBhcmVudFJlc291cmNlO1xuICB2YXIgYnVmZmVySWQgPSBvcHRpb25zLmJ1ZmZlcklkO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLnBhcmVudFJlc291cmNlXCIsIHBhcmVudFJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcIm9wdGlvbnMuYnVmZmVySWRcIiwgYnVmZmVySWQpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICByZXR1cm4gKFxuICAgIFwiZW1iZWRkZWQtYnVmZmVyOlwiICsgZ2V0RW1iZWRkZWRCdWZmZXJDYWNoZUtleShwYXJlbnRSZXNvdXJjZSwgYnVmZmVySWQpXG4gICk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGdsVEYgY2FjaGUga2V5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIGdsVEYgY2FjaGUga2V5LlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZUtleS5nZXRHbHRmQ2FjaGVLZXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZ2x0ZlJlc291cmNlID0gb3B0aW9ucy5nbHRmUmVzb3VyY2U7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlJlc291cmNlXCIsIGdsdGZSZXNvdXJjZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHJldHVybiBcImdsdGY6XCIgKyBnZXRFeHRlcm5hbFJlc291cmNlQ2FjaGVLZXkoZ2x0ZlJlc291cmNlKTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgYnVmZmVyIHZpZXcgY2FjaGUga2V5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmdsdGYgVGhlIGdsVEYgSlNPTi5cbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmJ1ZmZlclZpZXdJZCBUaGUgYnVmZmVyVmlldyBJRC5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmJhc2VSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSB0aGF0IHBhdGhzIGluIHRoZSBnbFRGIEpTT04gYXJlIHJlbGF0aXZlIHRvLlxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBidWZmZXIgdmlldyBjYWNoZSBrZXkuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlS2V5LmdldEJ1ZmZlclZpZXdDYWNoZUtleSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBnbHRmID0gb3B0aW9ucy5nbHRmO1xuICB2YXIgYnVmZmVyVmlld0lkID0gb3B0aW9ucy5idWZmZXJWaWV3SWQ7XG4gIHZhciBnbHRmUmVzb3VyY2UgPSBvcHRpb25zLmdsdGZSZXNvdXJjZTtcbiAgdmFyIGJhc2VSZXNvdXJjZSA9IG9wdGlvbnMuYmFzZVJlc291cmNlO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLmJ1ZmZlclZpZXdJZFwiLCBidWZmZXJWaWV3SWQpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmUmVzb3VyY2VcIiwgZ2x0ZlJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuYmFzZVJlc291cmNlXCIsIGJhc2VSZXNvdXJjZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBidWZmZXJWaWV3ID0gZ2x0Zi5idWZmZXJWaWV3c1tidWZmZXJWaWV3SWRdO1xuICB2YXIgYnVmZmVySWQgPSBidWZmZXJWaWV3LmJ1ZmZlcjtcbiAgdmFyIGJ1ZmZlciA9IGdsdGYuYnVmZmVyc1tidWZmZXJJZF07XG4gIGlmIChoYXNFeHRlbnNpb24oYnVmZmVyVmlldywgXCJFWFRfbWVzaG9wdF9jb21wcmVzc2lvblwiKSkge1xuICAgIHZhciBtZXNob3B0ID0gYnVmZmVyVmlldy5leHRlbnNpb25zLkVYVF9tZXNob3B0X2NvbXByZXNzaW9uO1xuICAgIGJ1ZmZlcklkID0gbWVzaG9wdC5idWZmZXI7XG4gIH1cblxuICB2YXIgYnVmZmVyQ2FjaGVLZXkgPSBnZXRCdWZmZXJDYWNoZUtleShcbiAgICBidWZmZXIsXG4gICAgYnVmZmVySWQsXG4gICAgZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZVxuICApO1xuXG4gIHZhciBidWZmZXJWaWV3Q2FjaGVLZXkgPSBnZXRCdWZmZXJWaWV3Q2FjaGVLZXkoYnVmZmVyVmlldyk7XG5cbiAgcmV0dXJuIFwiYnVmZmVyLXZpZXc6XCIgKyBidWZmZXJDYWNoZUtleSArIFwiLXJhbmdlLVwiICsgYnVmZmVyVmlld0NhY2hlS2V5O1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBEcmFjbyBjYWNoZSBrZXkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZ2x0ZiBUaGUgZ2xURiBKU09OLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZHJhY28gVGhlIERyYWNvIGV4dGVuc2lvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmdsdGZSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSBjb250YWluaW5nIHRoZSBnbFRGLlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5iYXNlUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gdGhhdCBwYXRocyBpbiB0aGUgZ2xURiBKU09OIGFyZSByZWxhdGl2ZSB0by5cbiAqXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgRHJhY28gY2FjaGUga2V5LlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VDYWNoZUtleS5nZXREcmFjb0NhY2hlS2V5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIGdsdGYgPSBvcHRpb25zLmdsdGY7XG4gIHZhciBkcmFjbyA9IG9wdGlvbnMuZHJhY287XG4gIHZhciBnbHRmUmVzb3VyY2UgPSBvcHRpb25zLmdsdGZSZXNvdXJjZTtcbiAgdmFyIGJhc2VSZXNvdXJjZSA9IG9wdGlvbnMuYmFzZVJlc291cmNlO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmRyYWNvXCIsIGRyYWNvKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlJlc291cmNlXCIsIGdsdGZSZXNvdXJjZSk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmJhc2VSZXNvdXJjZVwiLCBiYXNlUmVzb3VyY2UpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICByZXR1cm4gXCJkcmFjbzpcIiArIGdldERyYWNvQ2FjaGVLZXkoZ2x0ZiwgZHJhY28sIGdsdGZSZXNvdXJjZSwgYmFzZVJlc291cmNlKTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgdmVydGV4IGJ1ZmZlciBjYWNoZSBrZXkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZ2x0ZiBUaGUgZ2xURiBKU09OLlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5nbHRmUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gY29udGFpbmluZyB0aGUgZ2xURi5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuYmFzZVJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHRoYXQgcGF0aHMgaW4gdGhlIGdsVEYgSlNPTiBhcmUgcmVsYXRpdmUgdG8uXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuYnVmZmVyVmlld0lkXSBUaGUgYnVmZmVyVmlldyBJRCBjb3JyZXNwb25kaW5nIHRvIHRoZSB2ZXJ0ZXggYnVmZmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmRyYWNvXSBUaGUgRHJhY28gZXh0ZW5zaW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5hdHRyaWJ1dGVTZW1hbnRpY10gVGhlIGF0dHJpYnV0ZSBzZW1hbnRpYywgZS5nLiBQT1NJVElPTiBvciBOT1JNQUwuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IE9uZSBvZiBvcHRpb25zLmJ1ZmZlclZpZXdJZCBhbmQgb3B0aW9ucy5kcmFjbyBtdXN0IGJlIGRlZmluZWQuXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gV2hlbiBvcHRpb25zLmRyYWNvIGlzIGRlZmluZWQgb3B0aW9ucy5hdHRyaWJ1dGVTZW1hbnRpYyBtdXN0IGFsc28gYmUgZGVmaW5lZC5cbiAqXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgdmVydGV4IGJ1ZmZlciBjYWNoZSBrZXkuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlS2V5LmdldFZlcnRleEJ1ZmZlckNhY2hlS2V5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIGdsdGYgPSBvcHRpb25zLmdsdGY7XG4gIHZhciBnbHRmUmVzb3VyY2UgPSBvcHRpb25zLmdsdGZSZXNvdXJjZTtcbiAgdmFyIGJhc2VSZXNvdXJjZSA9IG9wdGlvbnMuYmFzZVJlc291cmNlO1xuICB2YXIgYnVmZmVyVmlld0lkID0gb3B0aW9ucy5idWZmZXJWaWV3SWQ7XG4gIHZhciBkcmFjbyA9IG9wdGlvbnMuZHJhY287XG4gIHZhciBhdHRyaWJ1dGVTZW1hbnRpYyA9IG9wdGlvbnMuYXR0cmlidXRlU2VtYW50aWM7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlwiLCBnbHRmKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlJlc291cmNlXCIsIGdsdGZSZXNvdXJjZSk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmJhc2VSZXNvdXJjZVwiLCBiYXNlUmVzb3VyY2UpO1xuXG4gIHZhciBoYXNCdWZmZXJWaWV3SWQgPSBkZWZpbmVkKGJ1ZmZlclZpZXdJZCk7XG4gIHZhciBoYXNEcmFjbyA9IGRlZmluZWQoZHJhY28pO1xuICB2YXIgaGFzQXR0cmlidXRlU2VtYW50aWMgPSBkZWZpbmVkKGF0dHJpYnV0ZVNlbWFudGljKTtcblxuICBpZiAoaGFzQnVmZmVyVmlld0lkID09PSBoYXNEcmFjbykge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiT25lIG9mIG9wdGlvbnMuYnVmZmVyVmlld0lkIGFuZCBvcHRpb25zLmRyYWNvIG11c3QgYmUgZGVmaW5lZC5cIlxuICAgICk7XG4gIH1cblxuICBpZiAoaGFzRHJhY28gJiYgIWhhc0F0dHJpYnV0ZVNlbWFudGljKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJXaGVuIG9wdGlvbnMuZHJhY28gaXMgZGVmaW5lZCBvcHRpb25zLmF0dHJpYnV0ZVNlbWFudGljIG11c3QgYWxzbyBiZSBkZWZpbmVkLlwiXG4gICAgKTtcbiAgfVxuXG4gIGlmIChoYXNEcmFjbykge1xuICAgIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmRyYWNvXCIsIGRyYWNvKTtcbiAgICBDaGVjay50eXBlT2Yuc3RyaW5nKFwib3B0aW9ucy5hdHRyaWJ1dGVTZW1hbnRpY1wiLCBhdHRyaWJ1dGVTZW1hbnRpYyk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKGRlZmluZWQoZHJhY28pKSB7XG4gICAgdmFyIGRyYWNvQ2FjaGVLZXkgPSBnZXREcmFjb0NhY2hlS2V5KFxuICAgICAgZ2x0ZixcbiAgICAgIGRyYWNvLFxuICAgICAgZ2x0ZlJlc291cmNlLFxuICAgICAgYmFzZVJlc291cmNlXG4gICAgKTtcbiAgICByZXR1cm4gXCJ2ZXJ0ZXgtYnVmZmVyOlwiICsgZHJhY29DYWNoZUtleSArIFwiLWRyYWNvLVwiICsgYXR0cmlidXRlU2VtYW50aWM7XG4gIH1cblxuICB2YXIgYnVmZmVyVmlldyA9IGdsdGYuYnVmZmVyVmlld3NbYnVmZmVyVmlld0lkXTtcbiAgdmFyIGJ1ZmZlcklkID0gYnVmZmVyVmlldy5idWZmZXI7XG4gIHZhciBidWZmZXIgPSBnbHRmLmJ1ZmZlcnNbYnVmZmVySWRdO1xuXG4gIHZhciBidWZmZXJDYWNoZUtleSA9IGdldEJ1ZmZlckNhY2hlS2V5KFxuICAgIGJ1ZmZlcixcbiAgICBidWZmZXJJZCxcbiAgICBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlXG4gICk7XG5cbiAgdmFyIGJ1ZmZlclZpZXdDYWNoZUtleSA9IGdldEJ1ZmZlclZpZXdDYWNoZUtleShidWZmZXJWaWV3KTtcblxuICByZXR1cm4gXCJ2ZXJ0ZXgtYnVmZmVyOlwiICsgYnVmZmVyQ2FjaGVLZXkgKyBcIi1yYW5nZS1cIiArIGJ1ZmZlclZpZXdDYWNoZUtleTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggYnVmZmVyIGNhY2hlIGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5nbHRmIFRoZSBnbFRGIEpTT04uXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5hY2Nlc3NvcklkIFRoZSBhY2Nlc3NvciBJRCBjb3JyZXNwb25kaW5nIHRvIHRoZSBpbmRleCBidWZmZXIuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmdsdGZSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSBjb250YWluaW5nIHRoZSBnbFRGLlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5iYXNlUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gdGhhdCBwYXRocyBpbiB0aGUgZ2xURiBKU09OIGFyZSByZWxhdGl2ZSB0by5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5kcmFjb10gVGhlIERyYWNvIGV4dGVuc2lvbiBvYmplY3QuXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIGluZGV4IGJ1ZmZlciBjYWNoZSBrZXkuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlS2V5LmdldEluZGV4QnVmZmVyQ2FjaGVLZXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZ2x0ZiA9IG9wdGlvbnMuZ2x0ZjtcbiAgdmFyIGFjY2Vzc29ySWQgPSBvcHRpb25zLmFjY2Vzc29ySWQ7XG4gIHZhciBnbHRmUmVzb3VyY2UgPSBvcHRpb25zLmdsdGZSZXNvdXJjZTtcbiAgdmFyIGJhc2VSZXNvdXJjZSA9IG9wdGlvbnMuYmFzZVJlc291cmNlO1xuICB2YXIgZHJhY28gPSBvcHRpb25zLmRyYWNvO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLmFjY2Vzc29ySWRcIiwgYWNjZXNzb3JJZCk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZSZXNvdXJjZVwiLCBnbHRmUmVzb3VyY2UpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5iYXNlUmVzb3VyY2VcIiwgYmFzZVJlc291cmNlKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKGRlZmluZWQoZHJhY28pKSB7XG4gICAgdmFyIGRyYWNvQ2FjaGVLZXkgPSBnZXREcmFjb0NhY2hlS2V5KFxuICAgICAgZ2x0ZixcbiAgICAgIGRyYWNvLFxuICAgICAgZ2x0ZlJlc291cmNlLFxuICAgICAgYmFzZVJlc291cmNlXG4gICAgKTtcbiAgICByZXR1cm4gXCJpbmRleC1idWZmZXI6XCIgKyBkcmFjb0NhY2hlS2V5ICsgXCItZHJhY29cIjtcbiAgfVxuXG4gIHZhciBhY2Nlc3NvciA9IGdsdGYuYWNjZXNzb3JzW2FjY2Vzc29ySWRdO1xuICB2YXIgYnVmZmVyVmlld0lkID0gYWNjZXNzb3IuYnVmZmVyVmlldztcbiAgdmFyIGJ1ZmZlclZpZXcgPSBnbHRmLmJ1ZmZlclZpZXdzW2J1ZmZlclZpZXdJZF07XG4gIHZhciBidWZmZXJJZCA9IGJ1ZmZlclZpZXcuYnVmZmVyO1xuICB2YXIgYnVmZmVyID0gZ2x0Zi5idWZmZXJzW2J1ZmZlcklkXTtcblxuICB2YXIgYnVmZmVyQ2FjaGVLZXkgPSBnZXRCdWZmZXJDYWNoZUtleShcbiAgICBidWZmZXIsXG4gICAgYnVmZmVySWQsXG4gICAgZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZVxuICApO1xuXG4gIHZhciBhY2Nlc3NvckNhY2hlS2V5ID0gZ2V0QWNjZXNzb3JDYWNoZUtleShhY2Nlc3NvciwgYnVmZmVyVmlldyk7XG5cbiAgcmV0dXJuIFwiaW5kZXgtYnVmZmVyOlwiICsgYnVmZmVyQ2FjaGVLZXkgKyBcIi1hY2Nlc3Nvci1cIiArIGFjY2Vzc29yQ2FjaGVLZXk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGltYWdlIGNhY2hlIGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5nbHRmIFRoZSBnbFRGIEpTT04uXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5pbWFnZUlkIFRoZSBpbWFnZSBJRC5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmJhc2VSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSB0aGF0IHBhdGhzIGluIHRoZSBnbFRGIEpTT04gYXJlIHJlbGF0aXZlIHRvLlxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBpbWFnZSBjYWNoZSBrZXkuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlS2V5LmdldEltYWdlQ2FjaGVLZXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZ2x0ZiA9IG9wdGlvbnMuZ2x0ZjtcbiAgdmFyIGltYWdlSWQgPSBvcHRpb25zLmltYWdlSWQ7XG4gIHZhciBnbHRmUmVzb3VyY2UgPSBvcHRpb25zLmdsdGZSZXNvdXJjZTtcbiAgdmFyIGJhc2VSZXNvdXJjZSA9IG9wdGlvbnMuYmFzZVJlc291cmNlO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLmltYWdlSWRcIiwgaW1hZ2VJZCk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZSZXNvdXJjZVwiLCBnbHRmUmVzb3VyY2UpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5iYXNlUmVzb3VyY2VcIiwgYmFzZVJlc291cmNlKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGltYWdlQ2FjaGVLZXkgPSBnZXRJbWFnZUNhY2hlS2V5KFxuICAgIGdsdGYsXG4gICAgaW1hZ2VJZCxcbiAgICBnbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlXG4gICk7XG5cbiAgcmV0dXJuIFwiaW1hZ2U6XCIgKyBpbWFnZUNhY2hlS2V5O1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSB0ZXh0dXJlIGNhY2hlIGtleS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5nbHRmIFRoZSBnbFRGIEpTT04uXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy50ZXh0dXJlSW5mbyBUaGUgdGV4dHVyZSBpbmZvIG9iamVjdC5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmJhc2VSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSB0aGF0IHBhdGhzIGluIHRoZSBnbFRGIEpTT04gYXJlIHJlbGF0aXZlIHRvLlxuICogQHBhcmFtIHtTdXBwb3J0ZWRJbWFnZUZvcm1hdHN9IG9wdGlvbnMuc3VwcG9ydGVkSW1hZ2VGb3JtYXRzIFRoZSBzdXBwb3J0ZWQgaW1hZ2UgZm9ybWF0cy5cbiAqXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgdGV4dHVyZSBjYWNoZSBrZXkuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUNhY2hlS2V5LmdldFRleHR1cmVDYWNoZUtleSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBnbHRmID0gb3B0aW9ucy5nbHRmO1xuICB2YXIgdGV4dHVyZUluZm8gPSBvcHRpb25zLnRleHR1cmVJbmZvO1xuICB2YXIgZ2x0ZlJlc291cmNlID0gb3B0aW9ucy5nbHRmUmVzb3VyY2U7XG4gIHZhciBiYXNlUmVzb3VyY2UgPSBvcHRpb25zLmJhc2VSZXNvdXJjZTtcbiAgdmFyIHN1cHBvcnRlZEltYWdlRm9ybWF0cyA9IG9wdGlvbnMuc3VwcG9ydGVkSW1hZ2VGb3JtYXRzO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmdsdGZcIiwgZ2x0Zik7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLnRleHR1cmVJbmZvXCIsIHRleHR1cmVJbmZvKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlJlc291cmNlXCIsIGdsdGZSZXNvdXJjZSk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLmJhc2VSZXNvdXJjZVwiLCBiYXNlUmVzb3VyY2UpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5zdXBwb3J0ZWRJbWFnZUZvcm1hdHNcIiwgc3VwcG9ydGVkSW1hZ2VGb3JtYXRzKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHRleHR1cmVJZCA9IHRleHR1cmVJbmZvLmluZGV4O1xuXG4gIHZhciBpbWFnZUlkID0gR2x0ZkxvYWRlclV0aWwuZ2V0SW1hZ2VJZEZyb21UZXh0dXJlKHtcbiAgICBnbHRmOiBnbHRmLFxuICAgIHRleHR1cmVJZDogdGV4dHVyZUlkLFxuICAgIHN1cHBvcnRlZEltYWdlRm9ybWF0czogc3VwcG9ydGVkSW1hZ2VGb3JtYXRzLFxuICB9KTtcblxuICB2YXIgaW1hZ2VDYWNoZUtleSA9IGdldEltYWdlQ2FjaGVLZXkoXG4gICAgZ2x0ZixcbiAgICBpbWFnZUlkLFxuICAgIGdsdGZSZXNvdXJjZSxcbiAgICBiYXNlUmVzb3VyY2VcbiAgKTtcblxuICAvLyBJbmNsdWRlIHRoZSBzYW1wbGVyIGNhY2hlIGtleSBpbiB0aGUgdGV4dHVyZSBjYWNoZSBrZXkgc2luY2UgdGV4dHVyZXMgYW5kXG4gIC8vIHNhbXBsZXJzIGFyZSBjb3VwbGVkIGluIFdlYkdMIDEuIFdoZW4gdXBncmFkaW5nIHRvIFdlYkdMIDIgY29uc2lkZXJcbiAgLy8gcmVtb3ZpbmcgdGhlIHNhbXBsZUNhY2hlS2V5IGhlcmUuXG4gIHZhciBzYW1wbGVyQ2FjaGVLZXkgPSBnZXRTYW1wbGVyQ2FjaGVLZXkoZ2x0ZiwgdGV4dHVyZUluZm8pO1xuXG4gIHJldHVybiBcInRleHR1cmU6XCIgKyBpbWFnZUNhY2hlS2V5ICsgXCItc2FtcGxlci1cIiArIHNhbXBsZXJDYWNoZUtleTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlc291cmNlQ2FjaGVLZXk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///72638\n')},29789:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ ResourceLoader; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9407);\n\n\n\n\n\n\n/**\n * A cache resource.\n * <p>\n * This type describes an interface and is not intended to be instantiated directly.\n * </p>\n *\n * @alias ResourceLoader\n * @constructor\n *\n * @see ResourceCache\n *\n * @private\n */\nfunction ResourceLoader() {}\n\nObject.defineProperties(ResourceLoader.prototype, {\n  /**\n   * A promise that resolves to the resource when the resource is ready.\n   *\n   * @memberof ResourceLoader.prototype\n   *\n   * @type {Promise.<ResourceLoader>}\n   * @readonly\n   * @private\n   */\n  promise: {\n    // eslint-disable-next-line getter-return\n    get: function () {\n      _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n    },\n  },\n  /**\n   * The cache key of the resource.\n   *\n   * @memberof ResourceLoader.prototype\n   *\n   * @type {String}\n   * @readonly\n   * @private\n   */\n  cacheKey: {\n    // eslint-disable-next-line getter-return\n    get: function () {\n      _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n    },\n  },\n});\n\n/**\n * Loads the resource.\n * @private\n */\nResourceLoader.prototype.load = function () {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\n/**\n * Unloads the resource.\n * @private\n */\nResourceLoader.prototype.unload = function () {};\n\n/**\n * Processes the resource until it becomes ready.\n *\n * @param {FrameState} frameState The frame state.\n * @private\n */\nResourceLoader.prototype.process = function (frameState) {};\n\n/**\n * Constructs a {@link RuntimeError} from an errorMessage and an error.\n *\n * @param {String} errorMessage The error message.\n * @param {Error} [error] The error.\n *\n * @returns {RuntimeError} The runtime error.\n * @private\n */\nResourceLoader.prototype.getError = function (errorMessage, error) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("errorMessage", errorMessage);\n  //>>includeEnd(\'debug\');\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(error)) {\n    errorMessage += "\\n" + error.message;\n  }\n  return new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(errorMessage);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see ResourceLoader#destroy\n * @private\n */\nResourceLoader.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the loaded resource.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * resourceLoader = resourceLoader && resourceLoader.destroy();\n *\n * @see ResourceLoader#isDestroyed\n * @private\n */\nResourceLoader.prototype.destroy = function () {\n  this.unload();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjk3ODkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUM7QUFDSTtBQUNZO0FBQ0U7QUFDSjs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTs7QUFFZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx3SEFBc0M7QUFDNUMsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0hBQXNDO0FBQzVDLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx3SEFBc0M7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLG9CQUFvQjtBQUNyQztBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLE9BQU87QUFDbEI7QUFDQSxhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDJGQUFtQjtBQUNyQjs7QUFFQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBLGFBQWEsc0VBQVk7QUFDekI7O0FBRUE7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSx3REFBd0Q7QUFDeEQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBLGFBQWEsU0FBUyxnREFBZ0Q7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkVBQWE7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvUmVzb3VyY2VMb2FkZXIuanM/NzkxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IFJ1bnRpbWVFcnJvciBmcm9tIFwiLi4vQ29yZS9SdW50aW1lRXJyb3IuanNcIjtcblxuLyoqXG4gKiBBIGNhY2hlIHJlc291cmNlLlxuICogPHA+XG4gKiBUaGlzIHR5cGUgZGVzY3JpYmVzIGFuIGludGVyZmFjZSBhbmQgaXMgbm90IGludGVuZGVkIHRvIGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cbiAqIDwvcD5cbiAqXG4gKiBAYWxpYXMgUmVzb3VyY2VMb2FkZXJcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBzZWUgUmVzb3VyY2VDYWNoZVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc291cmNlTG9hZGVyKCkge31cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgcmVzb3VyY2Ugd2hlbiB0aGUgcmVzb3VyY2UgaXMgcmVhZHkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBSZXNvdXJjZUxvYWRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1Byb21pc2UuPFJlc291cmNlTG9hZGVyPn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcm9taXNlOiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGdldHRlci1yZXR1cm5cbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yKCk7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIFRoZSBjYWNoZSBrZXkgb2YgdGhlIHJlc291cmNlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FjaGVLZXk6IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2V0dGVyLXJldHVyblxuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IoKTtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogTG9hZHMgdGhlIHJlc291cmNlLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yKCk7XG59O1xuXG4vKipcbiAqIFVubG9hZHMgdGhlIHJlc291cmNlLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlLnVubG9hZCA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vKipcbiAqIFByb2Nlc3NlcyB0aGUgcmVzb3VyY2UgdW50aWwgaXQgYmVjb21lcyByZWFkeS5cbiAqXG4gKiBAcGFyYW0ge0ZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgVGhlIGZyYW1lIHN0YXRlLlxuICogQHByaXZhdGVcbiAqL1xuUmVzb3VyY2VMb2FkZXIucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge307XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIHtAbGluayBSdW50aW1lRXJyb3J9IGZyb20gYW4gZXJyb3JNZXNzYWdlIGFuZCBhbiBlcnJvci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXJyb3JNZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtFcnJvcn0gW2Vycm9yXSBUaGUgZXJyb3IuXG4gKlxuICogQHJldHVybnMge1J1bnRpbWVFcnJvcn0gVGhlIHJ1bnRpbWUgZXJyb3IuXG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUxvYWRlci5wcm90b3R5cGUuZ2V0RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JNZXNzYWdlLCBlcnJvcikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yuc3RyaW5nKFwiZXJyb3JNZXNzYWdlXCIsIGVycm9yTWVzc2FnZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGlmIChkZWZpbmVkKGVycm9yKSkge1xuICAgIGVycm9yTWVzc2FnZSArPSBcIlxcblwiICsgZXJyb3IubWVzc2FnZTtcbiAgfVxuICByZXR1cm4gbmV3IFJ1bnRpbWVFcnJvcihlcnJvck1lc3NhZ2UpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKlxuICogQHNlZSBSZXNvdXJjZUxvYWRlciNkZXN0cm95XG4gKiBAcHJpdmF0ZVxuICovXG5SZXNvdXJjZUxvYWRlci5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIGxvYWRlZCByZXNvdXJjZS5cbiAqIDxiciAvPjxiciAvPlxuICogT25jZSBhbiBvYmplY3QgaXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLiAgVGhlcmVmb3JlLFxuICogYXNzaWduIHRoZSByZXR1cm4gdmFsdWUgKDxjb2RlPnVuZGVmaW5lZDwvY29kZT4pIHRvIHRoZSBvYmplY3QgYXMgZG9uZSBpbiB0aGUgZXhhbXBsZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIHJlc291cmNlTG9hZGVyID0gcmVzb3VyY2VMb2FkZXIgJiYgcmVzb3VyY2VMb2FkZXIuZGVzdHJveSgpO1xuICpcbiAqIEBzZWUgUmVzb3VyY2VMb2FkZXIjaXNEZXN0cm95ZWRcbiAqIEBwcml2YXRlXG4gKi9cblJlc291cmNlTG9hZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnVubG9hZCgpO1xuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///29789\n')},89356:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * The {@link ResourceLoader} state.\n *\n * @private\n */\nvar ResourceLoaderState = {\n  /**\n   * The resource has not yet been loaded.\n   *\n   * @type {Number}\n   * @constant\n   * @private\n   */\n  UNLOADED: 0,\n  /**\n   * The resource is loading. In this state, external resources are fetched as needed.\n   *\n   * @type {Number}\n   * @constant\n   * @private\n   */\n  LOADING: 1,\n  /**\n   * The resource has finished loading, but requires further processing. GPU resources are allocated in this state as needed.\n   *\n   * @type {Number}\n   * @constant\n   * @private\n   */\n  PROCESSING: 2,\n  /**\n   * The resource has finished loading and processing; the results are ready to be used.\n   *\n   * @type {Number}\n   * @constant\n   * @private\n   */\n  READY: 3,\n  /**\n   * The resource loading or processing has failed due to an error.\n   *\n   * @type {Number}\n   * @constant\n   * @private\n   */\n  FAILED: 4,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(ResourceLoaderState));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODkzNTYuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxRQUFRLHNCQUFzQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxrQ0FBa0MsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9SZXNvdXJjZUxvYWRlclN0YXRlLmpzP2EyMDUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUge0BsaW5rIFJlc291cmNlTG9hZGVyfSBzdGF0ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgUmVzb3VyY2VMb2FkZXJTdGF0ZSA9IHtcbiAgLyoqXG4gICAqIFRoZSByZXNvdXJjZSBoYXMgbm90IHlldCBiZWVuIGxvYWRlZC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBVTkxPQURFRDogMCxcbiAgLyoqXG4gICAqIFRoZSByZXNvdXJjZSBpcyBsb2FkaW5nLiBJbiB0aGlzIHN0YXRlLCBleHRlcm5hbCByZXNvdXJjZXMgYXJlIGZldGNoZWQgYXMgbmVlZGVkLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIExPQURJTkc6IDEsXG4gIC8qKlxuICAgKiBUaGUgcmVzb3VyY2UgaGFzIGZpbmlzaGVkIGxvYWRpbmcsIGJ1dCByZXF1aXJlcyBmdXJ0aGVyIHByb2Nlc3NpbmcuIEdQVSByZXNvdXJjZXMgYXJlIGFsbG9jYXRlZCBpbiB0aGlzIHN0YXRlIGFzIG5lZWRlZC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQUk9DRVNTSU5HOiAyLFxuICAvKipcbiAgICogVGhlIHJlc291cmNlIGhhcyBmaW5pc2hlZCBsb2FkaW5nIGFuZCBwcm9jZXNzaW5nOyB0aGUgcmVzdWx0cyBhcmUgcmVhZHkgdG8gYmUgdXNlZC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBSRUFEWTogMyxcbiAgLyoqXG4gICAqIFRoZSByZXNvdXJjZSBsb2FkaW5nIG9yIHByb2Nlc3NpbmcgaGFzIGZhaWxlZCBkdWUgdG8gYW4gZXJyb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRkFJTEVEOiA0LFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoUmVzb3VyY2VMb2FkZXJTdGF0ZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///89356\n')}}]);