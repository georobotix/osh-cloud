"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[1731],{53773:function(e,t,i){var r=i(48243),a=i(72e3),n=i(60838),o=i(60216),l=i(51688),s=i(66553),u=i(62200),h=i(82982),d=i(12572),c=i(50491),f=i(71351),v=i(96190),Z=i(68985),m=new o.Z,g=new o.Z,_=new l.Z,w=new o.Z,y=new o.Z,p=new r.Z,b=new f.Z,x=[new l.Z,new l.Z,new l.Z,new l.Z],A=new n.Z,T={};function M(e){l.Z.fromRadians(e.east,e.north,0,x[0]),l.Z.fromRadians(e.west,e.north,0,x[1]),l.Z.fromRadians(e.east,e.south,0,x[2]),l.Z.fromRadians(e.west,e.south,0,x[3]);var t,i=0,r=0,a=0,n=0,o=T._terrainHeightsMaxLevel;for(t=0;t<=o;++t){for(var s=!1,u=0;u<4;++u){var h=x[u];if(b.positionToTileXY(h,t,A),0===u)a=A.x,n=A.y;else if(a!==A.x||n!==A.y){s=!0;break}}if(s)break;i=a,r=n}if(0!==t)return{x:i,y:r,level:t>o?o:t-1}}T.initialize=function(){var e=T._initPromise;return(0,h.Z)(e)||(e=Z.Z.fetchJson((0,a.Z)("Assets/approximateTerrainHeights.json")).then((function(e){T._terrainHeights=e})),T._initPromise=e),e},T.getMinimumMaximumHeights=function(e,t){if(s.Z.defined("rectangle",e),!(0,h.Z)(T._terrainHeights))throw new d.Z("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");t=(0,u.Z)(t,c.Z.WGS84);var i=M(e),r=T._defaultMinTerrainHeight,a=T._defaultMaxTerrainHeight;if((0,h.Z)(i)){var n=i.level+"-"+i.x+"-"+i.y,l=T._terrainHeights[n];(0,h.Z)(l)&&(r=l[0],a=l[1]),t.cartographicToCartesian(v.Z.northeast(e,_),m),t.cartographicToCartesian(v.Z.southwest(e,_),g),o.Z.midpoint(g,m,w);var f=t.scaleToGeodeticSurface(w,y);if((0,h.Z)(f)){var Z=o.Z.distance(w,f);r=Math.min(r,-Z)}else r=T._defaultMinTerrainHeight}return r=Math.max(T._defaultMinTerrainHeight,r),{minimumTerrainHeight:r,maximumTerrainHeight:a}},T.getBoundingSphere=function(e,t){if(s.Z.defined("rectangle",e),!(0,h.Z)(T._terrainHeights))throw new d.Z("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");t=(0,u.Z)(t,c.Z.WGS84);var i=M(e),a=T._defaultMaxTerrainHeight;if((0,h.Z)(i)){var n=i.level+"-"+i.x+"-"+i.y,o=T._terrainHeights[n];(0,h.Z)(o)&&(a=o[1])}var l=r.Z.fromRectangle3D(e,t,0);return r.Z.fromRectangle3D(e,t,a,p),r.Z.union(l,p,l)},T._terrainHeightsMaxLevel=6,T._defaultMaxTerrainHeight=9e3,T._defaultMinTerrainHeight=-1e5,T._terrainHeights=void 0,T._initPromise=void 0,Object.defineProperties(T,{initialized:{get:function(){return(0,h.Z)(T._terrainHeights)}}}),t["Z"]=T},52890:function(e,t,i){var r=i(13222),a=i(60838),n=i(52975),o=i(62200),l=i(82982),s=i(12572),u=i(50491),h=i(14459),d=i(71351),c=i(25489),f=i(57134),v=i(96190),Z=i(22426),m=i(6224),g=i(82968),_=i(68985),w=i(9407),y=i(1497),p=i(25707),b=i(9121),x=i(42423),A=15;function T(e){if(!(0,l.Z)(e)||!(0,l.Z)(e.url))throw new s.Z("options.url is required.");this._resource=void 0,this._credit=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._maxLevel=void 0,this._terrainDataStructure=void 0,this._ready=!1,this._width=void 0,this._height=void 0,this._encoding=void 0;var t=e.token;this._hasAvailability=!1,this._tilesAvailable=void 0,this._tilesAvailablityLoaded=void 0,this._availableCache={};var i=this,f=(0,o.Z)(e.ellipsoid,u.Z.WGS84);this._readyPromise=(0,r.Z)(e.url).then((function(e){var r=_.Z.createIfNeeded(e);r.appendForwardSlash(),(0,l.Z)(t)&&(r=r.getDerivedResource({queryParameters:{token:t}})),i._resource=r;var a=r.getDerivedResource({queryParameters:{f:"pjson"}});return a.fetchJson()})).then((function(e){var t=e.copyrightText;(0,l.Z)(t)&&(i._credit=new n.Z(t));var s=e.spatialReference,u=(0,o.Z)(s.latestWkid,s.wkid),h=e.extent,Z={ellipsoid:f};if(4326===u)Z.rectangle=v.Z.fromDegrees(h.xmin,h.ymin,h.xmax,h.ymax),i._tilingScheme=new d.Z(Z);else{if(3857!==u)return r.Z.reject(new w.Z("Invalid spatial reference"));Z.rectangleSouthwestInMeters=new a.Z(h.xmin,h.ymin),Z.rectangleNortheastInMeters=new a.Z(h.xmax,h.ymax),i._tilingScheme=new x.Z(Z)}var m=e.tileInfo;if(!(0,l.Z)(m))return r.Z.reject(new w.Z("tileInfo is required"));i._width=m.rows+1,i._height=m.cols+1,i._encoding="LERC"===m.format?c.Z.LERC:c.Z.NONE,i._lodCount=m.lods.length-1;var g=i._hasAvailability=-1!==e.capabilities.indexOf("Tilemap");return g&&(i._tilesAvailable=new p.Z(i._tilingScheme,i._lodCount),i._tilesAvailable.addAvailableTileRange(0,0,0,i._tilingScheme.getNumberOfXTilesAtLevel(0),i._tilingScheme.getNumberOfYTilesAtLevel(0)),i._tilesAvailablityLoaded=new p.Z(i._tilingScheme,i._lodCount)),i._levelZeroMaximumGeometricError=y.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(i._tilingScheme.ellipsoid,i._width,i._tilingScheme.getNumberOfXTilesAtLevel(0)),e.bandCount>1&&console.log("ArcGISTiledElevationTerrainProvider: Terrain data has more than 1 band. Using the first one."),i._terrainDataStructure={elementMultiplier:1,lowestEncodedHeight:e.minValues[0],highestEncodedHeight:e.maxValues[0]},i._ready=!0,!0})).otherwise((function(e){var t="An error occurred while accessing "+i._resource.url+".";return b.Z.handleError(void 0,i,i._errorEvent,t),r.Z.reject(e)})),this._errorEvent=new h.Z}function M(e,t,i,r){if(e._hasAvailability){var a=e._tilesAvailablityLoaded,n=e._tilesAvailable;return!(t>e._lodCount)&&(!!n.isTileAvailable(t,i,r)||!a.isTileAvailable(t,i,r)&&void 0)}}function H(e,t,i,r){var n=t-1,o=i-1,l=r[e.y*t+e.x],s=[],u={startX:e.x,startY:e.y,endX:0,endY:0},h=new a.Z(e.x+1,e.y+1),d=!1,c=!1;while(!d||!c){var f=h.x,v=c?h.y+1:h.y;if(!d){for(var Z=e.y;Z<v;++Z)if(r[Z*t+h.x]!==l){d=!0;break}d?(s.push(new a.Z(h.x,e.y)),--h.x,--f,u.endX=h.x):h.x===n?(u.endX=h.x,d=!0):++h.x}if(!c){for(var m=h.y*t,g=e.x;g<=f;++g)if(r[m+g]!==l){c=!0;break}c?(s.push(new a.Z(e.x,h.y)),--h.y,u.endY=h.y):h.y===o?(u.endY=h.y,c=!0):++h.y}}return{endingIndices:s,range:u,value:l}}function S(e,t,i,r,n){var o=[],l=n.every((function(e){return e===n[0]}));if(l)return 1===n[0]&&o.push({startX:e,startY:t,endX:e+i-1,endY:t+r-1}),o;var s=[new a.Z(0,0)];while(s.length>0){var u=s.pop(),h=H(u,i,r,n);if(1===h.value){var d=h.range;d.startX+=e,d.endX+=e,d.startY+=t,d.endY+=t,o.push(d)}var c=h.endingIndices;c.length>0&&(s=s.concat(c))}return o}function E(e,t,i,r){if(!e._hasAvailability)return{};var a=128*Math.floor(i/128),n=128*Math.floor(r/128),o=Math.min(1<<t,128),s="tilemap/"+t+"/"+n+"/"+a+"/"+o+"/"+o,u=e._availableCache;if((0,l.Z)(u[s]))return u[s];var h=new Z.Z({throttle:!1,throttleByServer:!0,type:g.Z.TERRAIN}),d=e._resource.getDerivedResource({url:s,request:h}),c=d.fetchJson();return(0,l.Z)(c)?(c=c.then((function(l){var s=S(a,n,o,o,l.data);e._tilesAvailablityLoaded.addAvailableTileRange(t,a,n,a+o,n+o);for(var u=e._tilesAvailable,h=0;h<s.length;++h){var d=s[h];u.addAvailableTileRange(t,d.startX,d.startY,d.endX,d.endY)}return M(e,t,i,r)})),u[s]={promise:c,request:h},c=c.always((function(e){return delete u[s],e})),{promise:c,request:h}):{}}Object.defineProperties(T.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){if(!this.ready)throw new s.Z("credit must not be called before ready returns true.");return this._credit}},tilingScheme:{get:function(){if(!this.ready)throw new s.Z("tilingScheme must not be called before ready returns true.");return this._tilingScheme}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){if(!this._ready)throw new s.Z("availability must not be called before the terrain provider is ready.");return this._tilesAvailable}}}),T.prototype.requestTileGeometry=function(e,t,i,a){if(!this._ready)throw new s.Z("requestTileGeometry must not be called before the terrain provider is ready.");var n,o=this._resource.getDerivedResource({url:"tile/"+i+"/"+t+"/"+e,request:a}),u=this._hasAvailability,h=r.Z.resolve(!0);if(u&&!(0,l.Z)(M(this,i+1,2*e,2*t))){var d=E(this,i+1,2*e,2*t);h=d.promise,n=d.request}var c=o.fetchArrayBuffer();if((0,l.Z)(c)&&(0,l.Z)(h)){var v=this,Z=this._tilesAvailable;return r.Z.join(c,h).then((function(r){return new f.Z({buffer:r[0],width:v._width,height:v._height,childTileMask:u?Z.computeChildMaskForTile(i,e,t):A,structure:v._terrainDataStructure,encoding:v._encoding})})).otherwise((function(e){return(0,l.Z)(n)&&n.state===m.Z.CANCELLED?(a.cancel(),a.deferred.promise.always((function(){return a.state=m.Z.CANCELLED,r.Z.reject(e)}))):r.Z.reject(e)}))}},T.prototype.getLevelMaximumGeometricError=function(e){if(!this.ready)throw new s.Z("getLevelMaximumGeometricError must not be called before ready returns true.");return this._levelZeroMaximumGeometricError/(1<<e)},T.prototype.getTileDataAvailable=function(e,t,i){if(this._hasAvailability){var r=M(this,i,e,t);if((0,l.Z)(r))return r;E(this,i,e,t)}},T.prototype.loadTileDataAvailability=function(e,t,i){}}}]);
//# sourceMappingURL=chunk-vendors-9d26f472-legacy.7bf4e032.js.map