"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[1882],{40370:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_arraySlice_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68591);\n/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63367);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(59947);\n/* harmony import */ var _Core_combine_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(8182);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(12572);\n/* harmony import */ var _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(96037);\n/* harmony import */ var _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(22832);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(72248);\n/* harmony import */ var _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97264);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(9407);\n/* harmony import */ var _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(95555);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(52200);\n/* harmony import */ var _GltfPipeline_addDefaults_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(32550);\n/* harmony import */ var _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(56629);\n/* harmony import */ var _GltfPipeline_getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(93224);\n/* harmony import */ var _GltfPipeline_numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(26806);\n/* harmony import */ var _GltfPipeline_parseGlb_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(52655);\n/* harmony import */ var _GltfPipeline_updateVersion_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(6186);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(13222);\n/* harmony import */ var _Axis_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(66577);\n/* harmony import */ var _ModelLoadResources_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(28770);\n/* harmony import */ var _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(15322);\n/* harmony import */ var _processModelMaterialsCommon_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(51240);\n/* harmony import */ var _processPbrMaterials_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(14503);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(89917);\n/* harmony import */ var _Vector3DTileBatch_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(51867);\n/* harmony import */ var _Vector3DTilePrimitive_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(90082);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar boundingSphereCartesian3Scratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nvar ModelState = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].ModelState */ .Z.ModelState;\n\n///////////////////////////////////////////////////////////////////////////\n\n/**\n * A 3D model for classifying other 3D assets based on glTF, the runtime 3D asset format.\n * This is a special case when a model of a 3D tileset becomes a classifier when setting {@link Cesium3DTileset#classificationType}.\n *\n * @alias ClassificationModel\n * @constructor\n *\n * @private\n *\n * @param {Object} options Object with the following properties:\n * @param {ArrayBuffer|Uint8Array} options.gltf A binary glTF buffer.\n * @param {Boolean} [options.show=true] Determines if the model primitive will be shown.\n * @param {Matrix4} [options.modelMatrix=Matrix4.IDENTITY] The 4x4 transformation matrix that transforms the model from model to world coordinates.\n * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Draws the bounding sphere for each draw command in the model.\n * @param {Boolean} [options.debugWireframe=false] For debugging only. Draws the model in wireframe.\n * @param {ClassificationType} [options.classificationType] What this model will classify.\n *\n * @exception {RuntimeError} Only binary glTF is supported.\n * @exception {RuntimeError} Buffer data must be embedded in the binary glTF.\n * @exception {RuntimeError} Only one node is supported for classification and it must have a mesh.\n * @exception {RuntimeError} Only one mesh is supported when using b3dm for classification.\n * @exception {RuntimeError} Only one primitive per mesh is supported when using b3dm for classification.\n * @exception {RuntimeError} The mesh must have a position attribute.\n * @exception {RuntimeError} The mesh must have a batch id attribute.\n */\nfunction ClassificationModel(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  var gltf = options.gltf;\n  if (gltf instanceof ArrayBuffer) {\n    gltf = new Uint8Array(gltf);\n  }\n\n  if (gltf instanceof Uint8Array) {\n    // Parse and update binary glTF\n    gltf = (0,_GltfPipeline_parseGlb_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z)(gltf);\n    (0,_GltfPipeline_updateVersion_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z)(gltf);\n    (0,_GltfPipeline_addDefaults_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(gltf);\n    (0,_processModelMaterialsCommon_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z)(gltf);\n    (0,_processPbrMaterials_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z)(gltf);\n  } else {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z("Only binary glTF is supported as a classifier.");\n  }\n\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].buffer */ .Z.buffer(gltf, function (buffer) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(buffer.extras._pipeline.source)) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z(\n        "Buffer data must be embedded in the binary gltf."\n      );\n    }\n  });\n\n  var gltfNodes = gltf.nodes;\n  var gltfMeshes = gltf.meshes;\n\n  var gltfNode = gltfNodes[0];\n  var meshId = gltfNode.mesh;\n  if (gltfNodes.length !== 1 || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(meshId)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z(\n      "Only one node is supported for classification and it must have a mesh."\n    );\n  }\n\n  if (gltfMeshes.length !== 1) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z(\n      "Only one mesh is supported when using b3dm for classification."\n    );\n  }\n\n  var gltfPrimitives = gltfMeshes[0].primitives;\n  if (gltfPrimitives.length !== 1) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z(\n      "Only one primitive per mesh is supported when using b3dm for classification."\n    );\n  }\n\n  var gltfPositionAttribute = gltfPrimitives[0].attributes.POSITION;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(gltfPositionAttribute)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z("The mesh must have a position attribute.");\n  }\n\n  var gltfBatchIdAttribute = gltfPrimitives[0].attributes._BATCHID;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(gltfBatchIdAttribute)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z("The mesh must have a batch id attribute.");\n  }\n\n  this._gltf = gltf;\n\n  /**\n   * Determines if the model primitive will be shown.\n   *\n   * @type {Boolean}\n   *\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.show, true);\n\n  /**\n   * The 4x4 transformation matrix that transforms the model from model to world coordinates.\n   * When this is the identity matrix, the model is drawn in world coordinates, i.e., Earth\'s WGS84 coordinates.\n   * Local reference frames can be used by providing a different transformation matrix, like that returned\n   * by {@link Transforms.eastNorthUpToFixedFrame}.\n   *\n   * @type {Matrix4}\n   *\n   * @default {@link Matrix4.IDENTITY}\n   *\n   * @example\n   * var origin = Cesium.Cartesian3.fromDegrees(-95.0, 40.0, 200000.0);\n   * m.modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(origin);\n   */\n  this.modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.modelMatrix, _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].IDENTITY */ .Z.IDENTITY)\n  );\n  this._modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(this.modelMatrix);\n\n  this._ready = false;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].defer */ .Z.defer();\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the bounding sphere for each draw command in the model.  A glTF primitive corresponds\n   * to one draw command.  A glTF mesh has an array of primitives, often of length one.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowBoundingVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(\n    options.debugShowBoundingVolume,\n    false\n  );\n  this._debugShowBoundingVolume = false;\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the model in wireframe.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugWireframe = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.debugWireframe, false);\n  this._debugWireframe = false;\n\n  this._classificationType = options.classificationType;\n\n  // Undocumented options\n  this._vertexShaderLoaded = options.vertexShaderLoaded;\n  this._classificationShaderLoaded = options.classificationShaderLoaded;\n  this._uniformMapLoaded = options.uniformMapLoaded;\n  this._pickIdLoaded = options.pickIdLoaded;\n  this._ignoreCommands = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.ignoreCommands, false);\n  this._upAxis = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(options.upAxis, _Axis_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].Y */ .Z.Y);\n  this._batchTable = options.batchTable;\n\n  this._computedModelMatrix = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(); // Derived from modelMatrix and axis\n  this._initialRadius = undefined; // Radius without model\'s scale property, model-matrix scale, animations, or skins\n  this._boundingSphere = undefined;\n  this._scaledBoundingSphere = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  this._state = ModelState.NEEDS_LOAD;\n  this._loadResources = undefined;\n\n  this._mode = undefined;\n  this._dirty = false; // true when the model was transformed this frame\n\n  this._nodeMatrix = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\n  this._primitive = undefined;\n\n  this._extensionsUsed = undefined; // Cached used glTF extensions\n  this._extensionsRequired = undefined; // Cached required glTF extensions\n  this._quantizedUniforms = undefined; // Quantized uniforms for WEB3D_quantized_attributes\n\n  this._buffers = {};\n  this._vertexArray = undefined;\n  this._shaderProgram = undefined;\n  this._uniformMap = undefined;\n\n  this._geometryByteLength = 0;\n  this._trianglesLength = 0;\n\n  // CESIUM_RTC extension\n  this._rtcCenter = undefined; // reference to either 3D or 2D\n  this._rtcCenterEye = undefined; // in eye coordinates\n  this._rtcCenter3D = undefined; // in world coordinates\n  this._rtcCenter2D = undefined; // in projected world coordinates\n}\n\nObject.defineProperties(ClassificationModel.prototype, {\n  /**\n   * The object for the glTF JSON, including properties with default values omitted\n   * from the JSON provided to this model.\n   *\n   * @memberof ClassificationModel.prototype\n   *\n   * @type {Object}\n   * @readonly\n   *\n   * @default undefined\n   */\n  gltf: {\n    get: function () {\n      return this._gltf;\n    },\n  },\n\n  /**\n   * The model\'s bounding sphere in its local coordinate system.\n   *\n   * @memberof ClassificationModel.prototype\n   *\n   * @type {BoundingSphere}\n   * @readonly\n   *\n   * @default undefined\n   *\n   * @exception {DeveloperError} The model is not loaded.  Use ClassificationModel.readyPromise or wait for ClassificationModel.ready to be true.\n   *\n   * @example\n   * // Center in WGS84 coordinates\n   * var center = Cesium.Matrix4.multiplyByPoint(model.modelMatrix, model.boundingSphere.center, new Cesium.Cartesian3());\n   */\n  boundingSphere: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (this._state !== ModelState.LOADED) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(\n          "The model is not loaded.  Use ClassificationModel.readyPromise or wait for ClassificationModel.ready to be true."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      var modelMatrix = this.modelMatrix;\n      var nonUniformScale = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getScale */ .Z.getScale(\n        modelMatrix,\n        boundingSphereCartesian3Scratch\n      );\n\n      var scaledBoundingSphere = this._scaledBoundingSphere;\n      scaledBoundingSphere.center = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyComponents */ .Z.multiplyComponents(\n        this._boundingSphere.center,\n        nonUniformScale,\n        scaledBoundingSphere.center\n      );\n      scaledBoundingSphere.radius =\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].maximumComponent */ .Z.maximumComponent(nonUniformScale) * this._initialRadius;\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(this._rtcCenter)) {\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(\n          this._rtcCenter,\n          scaledBoundingSphere.center,\n          scaledBoundingSphere.center\n        );\n      }\n\n      return scaledBoundingSphere;\n    },\n  },\n\n  /**\n   * When <code>true</code>, this model is ready to render, i.e., the external binary, image,\n   * and shader files were downloaded and the WebGL resources were created.  This is set to\n   * <code>true</code> right before {@link ClassificationModel#readyPromise} is resolved.\n   *\n   * @memberof ClassificationModel.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets the promise that will be resolved when this model is ready to render, i.e., when the external binary, image,\n   * and shader files were downloaded and the WebGL resources were created.\n   * <p>\n   * This promise is resolved at the end of the frame before the first frame the model is rendered in.\n   * </p>\n   *\n   * @memberof ClassificationModel.prototype\n   * @type {Promise.<ClassificationModel>}\n   * @readonly\n   *\n   * @see ClassificationModel#ready\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  /**\n   * Returns true if the model was transformed this frame\n   *\n   * @memberof ClassificationModel.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @private\n   */\n  dirty: {\n    get: function () {\n      return this._dirty;\n    },\n  },\n\n  /**\n   * Returns an object with all of the glTF extensions used.\n   *\n   * @memberof ClassificationModel.prototype\n   *\n   * @type {Object}\n   * @readonly\n   */\n  extensionsUsed: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(this._extensionsUsed)) {\n        this._extensionsUsed = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getUsedExtensions */ .Z.getUsedExtensions(this.gltf);\n      }\n      return this._extensionsUsed;\n    },\n  },\n\n  /**\n   * Returns an object with all of the glTF extensions required.\n   *\n   * @memberof ClassificationModel.prototype\n   *\n   * @type {Object}\n   * @readonly\n   */\n  extensionsRequired: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(this._extensionsRequired)) {\n        this._extensionsRequired = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getRequiredExtensions */ .Z.getRequiredExtensions(\n          this.gltf\n        );\n      }\n      return this._extensionsRequired;\n    },\n  },\n\n  /**\n   * Gets the model\'s up-axis.\n   * By default models are y-up according to the glTF spec, however geo-referenced models will typically be z-up.\n   *\n   * @memberof ClassificationModel.prototype\n   *\n   * @type {Number}\n   * @default Axis.Y\n   * @readonly\n   *\n   * @private\n   */\n  upAxis: {\n    get: function () {\n      return this._upAxis;\n    },\n  },\n\n  /**\n   * Gets the model\'s triangle count.\n   *\n   * @private\n   */\n  trianglesLength: {\n    get: function () {\n      return this._trianglesLength;\n    },\n  },\n\n  /**\n   * Gets the model\'s geometry memory in bytes. This includes all vertex and index buffers.\n   *\n   * @private\n   */\n  geometryByteLength: {\n    get: function () {\n      return this._geometryByteLength;\n    },\n  },\n\n  /**\n   * Gets the model\'s texture memory in bytes.\n   *\n   * @private\n   */\n  texturesByteLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  /**\n   * Gets the model\'s classification type.\n   * @memberof ClassificationModel.prototype\n   * @type {ClassificationType}\n   */\n  classificationType: {\n    get: function () {\n      return this._classificationType;\n    },\n  },\n});\n\n///////////////////////////////////////////////////////////////////////////\n\nfunction addBuffersToLoadResources(model) {\n  var gltf = model.gltf;\n  var loadResources = model._loadResources;\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].buffer */ .Z.buffer(gltf, function (buffer, id) {\n    loadResources.buffers[id] = buffer.extras._pipeline.source;\n  });\n}\n\nfunction parseBufferViews(model) {\n  var bufferViews = model.gltf.bufferViews;\n\n  var vertexBuffersToCreate = model._loadResources.vertexBuffersToCreate;\n\n  // Only ARRAY_BUFFER here.  ELEMENT_ARRAY_BUFFER created below.\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].bufferView */ .Z.bufferView(model.gltf, function (bufferView, id) {\n    if (bufferView.target === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].ARRAY_BUFFER */ .Z.ARRAY_BUFFER) {\n      vertexBuffersToCreate.enqueue(id);\n    }\n  });\n\n  var indexBuffersToCreate = model._loadResources.indexBuffersToCreate;\n  var indexBufferIds = {};\n\n  // The Cesium Renderer requires knowing the datatype for an index buffer\n  // at creation type, which is not part of the glTF bufferview so loop\n  // through glTF accessors to create the bufferview\'s index buffer.\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].accessor */ .Z.accessor(model.gltf, function (accessor) {\n    var bufferViewId = accessor.bufferView;\n    var bufferView = bufferViews[bufferViewId];\n\n    if (\n      bufferView.target === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].ELEMENT_ARRAY_BUFFER */ .Z.ELEMENT_ARRAY_BUFFER &&\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(indexBufferIds[bufferViewId])\n    ) {\n      indexBufferIds[bufferViewId] = true;\n      indexBuffersToCreate.enqueue({\n        id: bufferViewId,\n        componentType: accessor.componentType,\n      });\n    }\n  });\n}\n\nfunction createVertexBuffer(bufferViewId, model) {\n  var loadResources = model._loadResources;\n  var bufferViews = model.gltf.bufferViews;\n  var bufferView = bufferViews[bufferViewId];\n  var vertexBuffer = loadResources.getBuffer(bufferView);\n  model._buffers[bufferViewId] = vertexBuffer;\n  model._geometryByteLength += vertexBuffer.byteLength;\n}\n\nfunction createIndexBuffer(bufferViewId, componentType, model) {\n  var loadResources = model._loadResources;\n  var bufferViews = model.gltf.bufferViews;\n  var bufferView = bufferViews[bufferViewId];\n  var indexBuffer = {\n    typedArray: loadResources.getBuffer(bufferView),\n    indexDatatype: componentType,\n  };\n  model._buffers[bufferViewId] = indexBuffer;\n  model._geometryByteLength += indexBuffer.typedArray.byteLength;\n}\n\nfunction createBuffers(model) {\n  var loadResources = model._loadResources;\n\n  if (loadResources.pendingBufferLoads !== 0) {\n    return;\n  }\n\n  var vertexBuffersToCreate = loadResources.vertexBuffersToCreate;\n  var indexBuffersToCreate = loadResources.indexBuffersToCreate;\n\n  while (vertexBuffersToCreate.length > 0) {\n    createVertexBuffer(vertexBuffersToCreate.dequeue(), model);\n  }\n\n  while (indexBuffersToCreate.length > 0) {\n    var i = indexBuffersToCreate.dequeue();\n    createIndexBuffer(i.id, i.componentType, model);\n  }\n}\n\nfunction modifyShaderForQuantizedAttributes(shader, model) {\n  var primitive = model.gltf.meshes[0].primitives[0];\n  var result = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].modifyShaderForQuantizedAttributes */ .Z.modifyShaderForQuantizedAttributes(\n    model.gltf,\n    primitive,\n    shader\n  );\n  model._quantizedUniforms = result.uniforms;\n  return result.shader;\n}\n\nfunction modifyShader(shader, callback) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(callback)) {\n    shader = callback(shader);\n  }\n  return shader;\n}\n\nfunction createProgram(model) {\n  var gltf = model.gltf;\n\n  var positionName = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getAttributeOrUniformBySemantic */ .Z.getAttributeOrUniformBySemantic(\n    gltf,\n    "POSITION"\n  );\n  var batchIdName = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getAttributeOrUniformBySemantic */ .Z.getAttributeOrUniformBySemantic(\n    gltf,\n    "_BATCHID"\n  );\n\n  var attributeLocations = {};\n  attributeLocations[positionName] = 0;\n  attributeLocations[batchIdName] = 1;\n\n  var modelViewProjectionName = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getAttributeOrUniformBySemantic */ .Z.getAttributeOrUniformBySemantic(\n    gltf,\n    "MODELVIEWPROJECTION"\n  );\n\n  var uniformDecl;\n  var toClip;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(modelViewProjectionName)) {\n    var projectionName = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getAttributeOrUniformBySemantic */ .Z.getAttributeOrUniformBySemantic(\n      gltf,\n      "PROJECTION"\n    );\n    var modelViewName = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getAttributeOrUniformBySemantic */ .Z.getAttributeOrUniformBySemantic(\n      gltf,\n      "MODELVIEW"\n    );\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(modelViewName)) {\n      modelViewName = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getAttributeOrUniformBySemantic */ .Z.getAttributeOrUniformBySemantic(\n        gltf,\n        "CESIUM_RTC_MODELVIEW"\n      );\n    }\n\n    uniformDecl =\n      "uniform mat4 " +\n      modelViewName +\n      ";\\n" +\n      "uniform mat4 " +\n      projectionName +\n      ";\\n";\n    toClip =\n      projectionName +\n      " * " +\n      modelViewName +\n      " * vec4(" +\n      positionName +\n      ", 1.0)";\n  } else {\n    uniformDecl = "uniform mat4 " + modelViewProjectionName + ";\\n";\n    toClip = modelViewProjectionName + " * vec4(" + positionName + ", 1.0)";\n  }\n\n  var computePosition = "    vec4 positionInClipCoords = " + toClip + ";\\n";\n\n  var vs =\n    "attribute vec3 " +\n    positionName +\n    ";\\n" +\n    "attribute float " +\n    batchIdName +\n    ";\\n" +\n    uniformDecl +\n    "void main() {\\n" +\n    computePosition +\n    "    gl_Position = czm_depthClamp(positionInClipCoords);\\n" +\n    "}\\n";\n  var fs =\n    "#ifdef GL_EXT_frag_depth\\n" +\n    "#extension GL_EXT_frag_depth : enable\\n" +\n    "#endif\\n" +\n    "void main() \\n" +\n    "{ \\n" +\n    "    gl_FragColor = vec4(1.0); \\n" +\n    "    czm_writeDepthClamp();\\n" +\n    "}\\n";\n\n  if (model.extensionsUsed.WEB3D_quantized_attributes) {\n    vs = modifyShaderForQuantizedAttributes(vs, model);\n  }\n\n  var drawVS = modifyShader(vs, model._vertexShaderLoaded);\n  var drawFS = modifyShader(fs, model._classificationShaderLoaded);\n\n  model._shaderProgram = {\n    vertexShaderSource: drawVS,\n    fragmentShaderSource: drawFS,\n    attributeLocations: attributeLocations,\n  };\n}\n\nfunction getAttributeLocations() {\n  return {\n    POSITION: 0,\n    _BATCHID: 1,\n  };\n}\n\nfunction createVertexArray(model) {\n  var loadResources = model._loadResources;\n  if (!loadResources.finishedBuffersCreation() || (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(model._vertexArray)) {\n    return;\n  }\n\n  var rendererBuffers = model._buffers;\n  var gltf = model.gltf;\n  var accessors = gltf.accessors;\n  var meshes = gltf.meshes;\n  var primitives = meshes[0].primitives;\n\n  var primitive = primitives[0];\n  var attributeLocations = getAttributeLocations();\n  var attributes = {};\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].meshPrimitiveAttribute */ .Z.meshPrimitiveAttribute(primitive, function (\n    accessorId,\n    attributeName\n  ) {\n    // Skip if the attribute is not used by the material, e.g., because the asset\n    // was exported with an attribute that wasn\'t used and the asset wasn\'t optimized.\n    var attributeLocation = attributeLocations[attributeName];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(attributeLocation)) {\n      var a = accessors[accessorId];\n      attributes[attributeName] = {\n        index: attributeLocation,\n        vertexBuffer: rendererBuffers[a.bufferView],\n        componentsPerAttribute: (0,_GltfPipeline_numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z)(a.type),\n        componentDatatype: a.componentType,\n        offsetInBytes: a.byteOffset,\n        strideInBytes: (0,_GltfPipeline_getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(gltf, a),\n      };\n    }\n  });\n\n  var indexBuffer;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(primitive.indices)) {\n    var accessor = accessors[primitive.indices];\n    indexBuffer = rendererBuffers[accessor.bufferView];\n  }\n  model._vertexArray = {\n    attributes: attributes,\n    indexBuffer: indexBuffer,\n  };\n}\n\nvar gltfSemanticUniforms = {\n  PROJECTION: function (uniformState, model) {\n    return _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getGltfSemanticUniforms */ .Z.getGltfSemanticUniforms().PROJECTION(\n      uniformState,\n      model\n    );\n  },\n  MODELVIEW: function (uniformState, model) {\n    return _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getGltfSemanticUniforms */ .Z.getGltfSemanticUniforms().MODELVIEW(\n      uniformState,\n      model\n    );\n  },\n  CESIUM_RTC_MODELVIEW: function (uniformState, model) {\n    return _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getGltfSemanticUniforms */ .Z.getGltfSemanticUniforms().CESIUM_RTC_MODELVIEW(\n      uniformState,\n      model\n    );\n  },\n  MODELVIEWPROJECTION: function (uniformState, model) {\n    return _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getGltfSemanticUniforms */ .Z.getGltfSemanticUniforms().MODELVIEWPROJECTION(\n      uniformState,\n      model\n    );\n  },\n};\n\nfunction createUniformMap(model, context) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(model._uniformMap)) {\n    return;\n  }\n\n  var uniformMap = {};\n  _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].technique */ .Z.technique(model.gltf, function (technique) {\n    _GltfPipeline_ForEach_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].techniqueUniform */ .Z.techniqueUniform(technique, function (uniform, uniformName) {\n      if (\n        !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(uniform.semantic) ||\n        !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(gltfSemanticUniforms[uniform.semantic])\n      ) {\n        return;\n      }\n\n      uniformMap[uniformName] = gltfSemanticUniforms[uniform.semantic](\n        context.uniformState,\n        model\n      );\n    });\n  });\n\n  model._uniformMap = uniformMap;\n}\n\nfunction createUniformsForQuantizedAttributes(model, primitive) {\n  return _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].createUniformsForQuantizedAttributes */ .Z.createUniformsForQuantizedAttributes(\n    model.gltf,\n    primitive,\n    model._quantizedUniforms\n  );\n}\n\nfunction triangleCountFromPrimitiveIndices(primitive, indicesCount) {\n  switch (primitive.mode) {\n    case _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].TRIANGLES */ .Z.TRIANGLES:\n      return indicesCount / 3;\n    case _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].TRIANGLE_STRIP */ .Z.TRIANGLE_STRIP:\n    case _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].TRIANGLE_FAN */ .Z.TRIANGLE_FAN:\n      return Math.max(indicesCount - 2, 0);\n    default:\n      return 0;\n  }\n}\n\nfunction createPrimitive(model) {\n  var batchTable = model._batchTable;\n\n  var uniformMap = model._uniformMap;\n  var vertexArray = model._vertexArray;\n\n  var gltf = model.gltf;\n  var accessors = gltf.accessors;\n  var gltfMeshes = gltf.meshes;\n  var primitive = gltfMeshes[0].primitives[0];\n  var ix = accessors[primitive.indices];\n\n  var positionAccessor = primitive.attributes.POSITION;\n  var minMax = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getAccessorMinMax */ .Z.getAccessorMinMax(gltf, positionAccessor);\n  var boundingSphere = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromCornerPoints */ .Z.fromCornerPoints(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(minMax.min),\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(minMax.max)\n  );\n\n  var offset;\n  var count;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(ix)) {\n    count = ix.count;\n    offset = ix.byteOffset / _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getSizeInBytes */ .Z.getSizeInBytes(ix.componentType); // glTF has offset in bytes.  Cesium has offsets in indices\n  } else {\n    var positions = accessors[primitive.attributes.POSITION];\n    count = positions.count;\n    offset = 0;\n  }\n\n  // Update model triangle count using number of indices\n  model._trianglesLength += triangleCountFromPrimitiveIndices(primitive, count);\n\n  // Allow callback to modify the uniformMap\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(model._uniformMapLoaded)) {\n    uniformMap = model._uniformMapLoaded(uniformMap);\n  }\n\n  // Add uniforms for decoding quantized attributes if used\n  if (model.extensionsUsed.WEB3D_quantized_attributes) {\n    var quantizedUniformMap = createUniformsForQuantizedAttributes(\n      model,\n      primitive\n    );\n    uniformMap = (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(uniformMap, quantizedUniformMap);\n  }\n\n  var attribute = vertexArray.attributes.POSITION;\n  var componentDatatype = attribute.componentDatatype;\n  var typedArray = attribute.vertexBuffer;\n  var byteOffset = typedArray.byteOffset;\n  var bufferLength =\n    typedArray.byteLength / _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].getSizeInBytes */ .Z.getSizeInBytes(componentDatatype);\n  var positionsBuffer = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].createArrayBufferView */ .Z.createArrayBufferView(\n    componentDatatype,\n    typedArray.buffer,\n    byteOffset,\n    bufferLength\n  );\n\n  attribute = vertexArray.attributes._BATCHID;\n  componentDatatype = attribute.componentDatatype;\n  typedArray = attribute.vertexBuffer;\n  byteOffset = typedArray.byteOffset;\n  bufferLength =\n    typedArray.byteLength / _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].getSizeInBytes */ .Z.getSizeInBytes(componentDatatype);\n  var vertexBatchIds = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].createArrayBufferView */ .Z.createArrayBufferView(\n    componentDatatype,\n    typedArray.buffer,\n    byteOffset,\n    bufferLength\n  );\n\n  var buffer = vertexArray.indexBuffer.typedArray;\n  var indices;\n  if (vertexArray.indexBuffer.indexDatatype === _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT) {\n    indices = new Uint16Array(\n      buffer.buffer,\n      buffer.byteOffset,\n      buffer.byteLength / Uint16Array.BYTES_PER_ELEMENT\n    );\n  } else {\n    indices = new Uint32Array(\n      buffer.buffer,\n      buffer.byteOffset,\n      buffer.byteLength / Uint32Array.BYTES_PER_ELEMENT\n    );\n  }\n\n  positionsBuffer = (0,_Core_arraySlice_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(positionsBuffer);\n  vertexBatchIds = (0,_Core_arraySlice_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(vertexBatchIds);\n  indices = (0,_Core_arraySlice_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(indices, offset, offset + count);\n\n  var batchIds = [];\n  var indexCounts = [];\n  var indexOffsets = [];\n  var batchedIndices = [];\n\n  var currentId = vertexBatchIds[indices[0]];\n  batchIds.push(currentId);\n  indexOffsets.push(0);\n\n  var batchId;\n  var indexOffset;\n  var indexCount;\n  var indicesLength = indices.length;\n  for (var j = 1; j < indicesLength; ++j) {\n    batchId = vertexBatchIds[indices[j]];\n    if (batchId !== currentId) {\n      indexOffset = indexOffsets[indexOffsets.length - 1];\n      indexCount = j - indexOffset;\n\n      batchIds.push(batchId);\n      indexCounts.push(indexCount);\n      indexOffsets.push(j);\n\n      batchedIndices.push(\n        new _Vector3DTileBatch_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z({\n          offset: indexOffset,\n          count: indexCount,\n          batchIds: [currentId],\n          color: _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].WHITE */ .Z.WHITE,\n        })\n      );\n\n      currentId = batchId;\n    }\n  }\n\n  indexOffset = indexOffsets[indexOffsets.length - 1];\n  indexCount = indicesLength - indexOffset;\n\n  indexCounts.push(indexCount);\n  batchedIndices.push(\n    new _Vector3DTileBatch_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z({\n      offset: indexOffset,\n      count: indexCount,\n      batchIds: [currentId],\n      color: _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].WHITE */ .Z.WHITE,\n    })\n  );\n\n  var shader = model._shaderProgram;\n  var vertexShaderSource = shader.vertexShaderSource;\n  var fragmentShaderSource = shader.fragmentShaderSource;\n  var attributeLocations = shader.attributeLocations;\n  var pickId = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(model._pickIdLoaded) ? model._pickIdLoaded() : undefined;\n\n  model._primitive = new _Vector3DTilePrimitive_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z({\n    classificationType: model._classificationType,\n    positions: positionsBuffer,\n    indices: indices,\n    indexOffsets: indexOffsets,\n    indexCounts: indexCounts,\n    batchIds: batchIds,\n    vertexBatchIds: vertexBatchIds,\n    batchedIndices: batchedIndices,\n    batchTable: batchTable,\n    boundingVolume: new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(), // updated in update()\n    _vertexShaderSource: vertexShaderSource,\n    _fragmentShaderSource: fragmentShaderSource,\n    _attributeLocations: attributeLocations,\n    _uniformMap: uniformMap,\n    _pickId: pickId,\n    _modelMatrix: new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(), // updated in update()\n    _boundingSphere: boundingSphere, // used to update boundingVolume\n  });\n\n  // Release CPU resources\n  model._buffers = undefined;\n  model._vertexArray = undefined;\n  model._shaderProgram = undefined;\n  model._uniformMap = undefined;\n}\n\nfunction createRuntimeNodes(model) {\n  var loadResources = model._loadResources;\n  if (!loadResources.finished()) {\n    return;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(model._primitive)) {\n    return;\n  }\n\n  var gltf = model.gltf;\n  var nodes = gltf.nodes;\n  var gltfNode = nodes[0];\n  model._nodeMatrix = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].getTransform */ .Z.getTransform(gltfNode, model._nodeMatrix);\n\n  createPrimitive(model);\n}\n\nfunction createResources(model, frameState) {\n  var context = frameState.context;\n\n  _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].checkSupportedGlExtensions */ .Z.checkSupportedGlExtensions(model.gltf.glExtensionsUsed, context);\n  createBuffers(model); // using glTF bufferViews\n  createProgram(model);\n  createVertexArray(model); // using glTF meshes\n  createUniformMap(model, context); // using glTF materials/techniques\n  createRuntimeNodes(model); // using glTF scene\n}\n\n///////////////////////////////////////////////////////////////////////////\n\nvar scratchComputedTranslation = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchComputedMatrixIn2D = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\n\nfunction updateNodeModelMatrix(\n  model,\n  modelTransformChanged,\n  justLoaded,\n  projection\n) {\n  var computedModelMatrix = model._computedModelMatrix;\n\n  if (model._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D && !model._ignoreCommands) {\n    var translation = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getColumn */ .Z.getColumn(\n      computedModelMatrix,\n      3,\n      scratchComputedTranslation\n    );\n    if (!_Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(translation, _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNIT_W */ .Z.UNIT_W)) {\n      computedModelMatrix = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].basisTo2D */ .Z.basisTo2D(\n        projection,\n        computedModelMatrix,\n        scratchComputedMatrixIn2D\n      );\n      model._rtcCenter = model._rtcCenter3D;\n    } else {\n      var center = model.boundingSphere.center;\n      var to2D = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].wgs84To2DModelMatrix */ .Z.wgs84To2DModelMatrix(\n        projection,\n        center,\n        scratchComputedMatrixIn2D\n      );\n      computedModelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].multiply */ .Z.multiply(\n        to2D,\n        computedModelMatrix,\n        scratchComputedMatrixIn2D\n      );\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(model._rtcCenter)) {\n        _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].setTranslation */ .Z.setTranslation(\n          computedModelMatrix,\n          _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNIT_W */ .Z.UNIT_W,\n          computedModelMatrix\n        );\n        model._rtcCenter = model._rtcCenter2D;\n      }\n    }\n  }\n\n  var primitive = model._primitive;\n\n  if (modelTransformChanged || justLoaded) {\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].multiplyTransformation */ .Z.multiplyTransformation(\n      computedModelMatrix,\n      model._nodeMatrix,\n      primitive._modelMatrix\n    );\n    _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].transform */ .Z.transform(\n      primitive._boundingSphere,\n      primitive._modelMatrix,\n      primitive._boundingVolume\n    );\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(model._rtcCenter)) {\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(\n        model._rtcCenter,\n        primitive._boundingVolume.center,\n        primitive._boundingVolume.center\n      );\n    }\n  }\n}\n\n///////////////////////////////////////////////////////////////////////////\n\nClassificationModel.prototype.updateCommands = function (batchId, color) {\n  this._primitive.updateCommands(batchId, color);\n};\n\nClassificationModel.prototype.update = function (frameState) {\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n    return;\n  }\n\n  if (!_Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].supportsWebP.initialized */ .Z.supportsWebP.initialized) {\n    _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].supportsWebP.initialize */ .Z.supportsWebP.initialize();\n    return;\n  }\n  var supportsWebP = _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].supportsWebP */ .Z.supportsWebP();\n\n  if (this._state === ModelState.NEEDS_LOAD && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(this.gltf)) {\n    this._state = ModelState.LOADING;\n    if (this._state !== ModelState.FAILED) {\n      var extensions = this.gltf.extensions;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(extensions) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(extensions.CESIUM_RTC)) {\n        var center = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromArray */ .Z.fromArray(extensions.CESIUM_RTC.center);\n        if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(center, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO)) {\n          this._rtcCenter3D = center;\n\n          var projection = frameState.mapProjection;\n          var ellipsoid = projection.ellipsoid;\n          var cartographic = ellipsoid.cartesianToCartographic(\n            this._rtcCenter3D\n          );\n          var projectedCart = projection.project(cartographic);\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromElements */ .Z.fromElements(\n            projectedCart.z,\n            projectedCart.x,\n            projectedCart.y,\n            projectedCart\n          );\n          this._rtcCenter2D = projectedCart;\n\n          this._rtcCenterEye = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n          this._rtcCenter = this._rtcCenter3D;\n        }\n      }\n\n      this._loadResources = new _ModelLoadResources_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z();\n      _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].parseBuffers */ .Z.parseBuffers(this);\n    }\n  }\n\n  var loadResources = this._loadResources;\n  var justLoaded = false;\n\n  if (this._state === ModelState.LOADING) {\n    // Transition from LOADING -> LOADED once resources are downloaded and created.\n    // Textures may continue to stream in while in the LOADED state.\n    if (loadResources.pendingBufferLoads === 0) {\n      _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].checkSupportedExtensions */ .Z.checkSupportedExtensions(\n        this.extensionsRequired,\n        supportsWebP\n      );\n\n      addBuffersToLoadResources(this);\n      parseBufferViews(this);\n\n      this._boundingSphere = _ModelUtility_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].computeBoundingSphere */ .Z.computeBoundingSphere(this);\n      this._initialRadius = this._boundingSphere.radius;\n      createResources(this, frameState);\n    }\n    if (loadResources.finished()) {\n      this._state = ModelState.LOADED;\n      justLoaded = true;\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(loadResources) && this._state === ModelState.LOADED) {\n    if (!justLoaded) {\n      createResources(this, frameState);\n    }\n\n    if (loadResources.finished()) {\n      this._loadResources = undefined; // Clear CPU memory since WebGL resources were created.\n    }\n  }\n\n  var show = this.show;\n\n  if ((show && this._state === ModelState.LOADED) || justLoaded) {\n    this._dirty = false;\n    var modelMatrix = this.modelMatrix;\n\n    var modeChanged = frameState.mode !== this._mode;\n    this._mode = frameState.mode;\n\n    // ClassificationModel\'s model matrix needs to be updated\n    var modelTransformChanged =\n      !_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].equals */ .Z.equals(this._modelMatrix, modelMatrix) || modeChanged;\n\n    if (modelTransformChanged || justLoaded) {\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(modelMatrix, this._modelMatrix);\n\n      var computedModelMatrix = this._computedModelMatrix;\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(modelMatrix, computedModelMatrix);\n      if (this._upAxis === _Axis_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].Y */ .Z.Y) {\n        _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].multiplyTransformation */ .Z.multiplyTransformation(\n          computedModelMatrix,\n          _Axis_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].Y_UP_TO_Z_UP */ .Z.Y_UP_TO_Z_UP,\n          computedModelMatrix\n        );\n      } else if (this._upAxis === _Axis_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].X */ .Z.X) {\n        _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].multiplyTransformation */ .Z.multiplyTransformation(\n          computedModelMatrix,\n          _Axis_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].X_UP_TO_Z_UP */ .Z.X_UP_TO_Z_UP,\n          computedModelMatrix\n        );\n      }\n    }\n\n    // Update modelMatrix throughout the graph as needed\n    if (modelTransformChanged || justLoaded) {\n      updateNodeModelMatrix(\n        this,\n        modelTransformChanged,\n        justLoaded,\n        frameState.mapProjection\n      );\n      this._dirty = true;\n    }\n  }\n\n  if (justLoaded) {\n    // Called after modelMatrix update.\n    var model = this;\n    frameState.afterRender.push(function () {\n      model._ready = true;\n      model._readyPromise.resolve(model);\n    });\n    return;\n  }\n\n  if (show && !this._ignoreCommands) {\n    this._primitive.debugShowBoundingVolume = this.debugShowBoundingVolume;\n    this._primitive.debugWireframe = this.debugWireframe;\n    this._primitive.update(frameState);\n  }\n};\n\nClassificationModel.prototype.isDestroyed = function () {\n  return false;\n};\n\nClassificationModel.prototype.destroy = function () {\n  this._primitive = this._primitive && this._primitive.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ClassificationModel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLDJFQUFhO0FBQ3RCO0FBQ0EseURBQWUsbUJBQW1CLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvQ2xhc3NpZmljYXRpb25Nb2RlbC5qcz8zYTcwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcnJheVNsaWNlIGZyb20gXCIuLi9Db3JlL2FycmF5U2xpY2UuanNcIjtcbmltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi4vQ29yZS9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjQgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuNC5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgY29tYmluZSBmcm9tIFwiLi4vQ29yZS9jb21iaW5lLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBGZWF0dXJlRGV0ZWN0aW9uIGZyb20gXCIuLi9Db3JlL0ZlYXR1cmVEZXRlY3Rpb24uanNcIjtcbmltcG9ydCBJbmRleERhdGF0eXBlIGZyb20gXCIuLi9Db3JlL0luZGV4RGF0YXR5cGUuanNcIjtcbmltcG9ydCBNYXRyaXg0IGZyb20gXCIuLi9Db3JlL01hdHJpeDQuanNcIjtcbmltcG9ydCBQcmltaXRpdmVUeXBlIGZyb20gXCIuLi9Db3JlL1ByaW1pdGl2ZVR5cGUuanNcIjtcbmltcG9ydCBSdW50aW1lRXJyb3IgZnJvbSBcIi4uL0NvcmUvUnVudGltZUVycm9yLmpzXCI7XG5pbXBvcnQgVHJhbnNmb3JtcyBmcm9tIFwiLi4vQ29yZS9UcmFuc2Zvcm1zLmpzXCI7XG5pbXBvcnQgV2ViR0xDb25zdGFudHMgZnJvbSBcIi4uL0NvcmUvV2ViR0xDb25zdGFudHMuanNcIjtcbmltcG9ydCBhZGREZWZhdWx0cyBmcm9tIFwiLi9HbHRmUGlwZWxpbmUvYWRkRGVmYXVsdHMuanNcIjtcbmltcG9ydCBGb3JFYWNoIGZyb20gXCIuL0dsdGZQaXBlbGluZS9Gb3JFYWNoLmpzXCI7XG5pbXBvcnQgZ2V0QWNjZXNzb3JCeXRlU3RyaWRlIGZyb20gXCIuL0dsdGZQaXBlbGluZS9nZXRBY2Nlc3NvckJ5dGVTdHJpZGUuanNcIjtcbmltcG9ydCBudW1iZXJPZkNvbXBvbmVudHNGb3JUeXBlIGZyb20gXCIuL0dsdGZQaXBlbGluZS9udW1iZXJPZkNvbXBvbmVudHNGb3JUeXBlLmpzXCI7XG5pbXBvcnQgcGFyc2VHbGIgZnJvbSBcIi4vR2x0ZlBpcGVsaW5lL3BhcnNlR2xiLmpzXCI7XG5pbXBvcnQgdXBkYXRlVmVyc2lvbiBmcm9tIFwiLi9HbHRmUGlwZWxpbmUvdXBkYXRlVmVyc2lvbi5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuaW1wb3J0IEF4aXMgZnJvbSBcIi4vQXhpcy5qc1wiO1xuaW1wb3J0IE1vZGVsTG9hZFJlc291cmNlcyBmcm9tIFwiLi9Nb2RlbExvYWRSZXNvdXJjZXMuanNcIjtcbmltcG9ydCBNb2RlbFV0aWxpdHkgZnJvbSBcIi4vTW9kZWxVdGlsaXR5LmpzXCI7XG5pbXBvcnQgcHJvY2Vzc01vZGVsTWF0ZXJpYWxzQ29tbW9uIGZyb20gXCIuL3Byb2Nlc3NNb2RlbE1hdGVyaWFsc0NvbW1vbi5qc1wiO1xuaW1wb3J0IHByb2Nlc3NQYnJNYXRlcmlhbHMgZnJvbSBcIi4vcHJvY2Vzc1Bick1hdGVyaWFscy5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi9TY2VuZU1vZGUuanNcIjtcbmltcG9ydCBWZWN0b3IzRFRpbGVCYXRjaCBmcm9tIFwiLi9WZWN0b3IzRFRpbGVCYXRjaC5qc1wiO1xuaW1wb3J0IFZlY3RvcjNEVGlsZVByaW1pdGl2ZSBmcm9tIFwiLi9WZWN0b3IzRFRpbGVQcmltaXRpdmUuanNcIjtcblxudmFyIGJvdW5kaW5nU3BoZXJlQ2FydGVzaWFuM1NjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuXG52YXIgTW9kZWxTdGF0ZSA9IE1vZGVsVXRpbGl0eS5Nb2RlbFN0YXRlO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqXG4gKiBBIDNEIG1vZGVsIGZvciBjbGFzc2lmeWluZyBvdGhlciAzRCBhc3NldHMgYmFzZWQgb24gZ2xURiwgdGhlIHJ1bnRpbWUgM0QgYXNzZXQgZm9ybWF0LlxuICogVGhpcyBpcyBhIHNwZWNpYWwgY2FzZSB3aGVuIGEgbW9kZWwgb2YgYSAzRCB0aWxlc2V0IGJlY29tZXMgYSBjbGFzc2lmaWVyIHdoZW4gc2V0dGluZyB7QGxpbmsgQ2VzaXVtM0RUaWxlc2V0I2NsYXNzaWZpY2F0aW9uVHlwZX0uXG4gKlxuICogQGFsaWFzIENsYXNzaWZpY2F0aW9uTW9kZWxcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcnxVaW50OEFycmF5fSBvcHRpb25zLmdsdGYgQSBiaW5hcnkgZ2xURiBidWZmZXIuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNob3c9dHJ1ZV0gRGV0ZXJtaW5lcyBpZiB0aGUgbW9kZWwgcHJpbWl0aXZlIHdpbGwgYmUgc2hvd24uXG4gKiBAcGFyYW0ge01hdHJpeDR9IFtvcHRpb25zLm1vZGVsTWF0cml4PU1hdHJpeDQuSURFTlRJVFldIFRoZSA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRoYXQgdHJhbnNmb3JtcyB0aGUgbW9kZWwgZnJvbSBtb2RlbCB0byB3b3JsZCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU9ZmFsc2VdIEZvciBkZWJ1Z2dpbmcgb25seS4gRHJhd3MgdGhlIGJvdW5kaW5nIHNwaGVyZSBmb3IgZWFjaCBkcmF3IGNvbW1hbmQgaW4gdGhlIG1vZGVsLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5kZWJ1Z1dpcmVmcmFtZT1mYWxzZV0gRm9yIGRlYnVnZ2luZyBvbmx5LiBEcmF3cyB0aGUgbW9kZWwgaW4gd2lyZWZyYW1lLlxuICogQHBhcmFtIHtDbGFzc2lmaWNhdGlvblR5cGV9IFtvcHRpb25zLmNsYXNzaWZpY2F0aW9uVHlwZV0gV2hhdCB0aGlzIG1vZGVsIHdpbGwgY2xhc3NpZnkuXG4gKlxuICogQGV4Y2VwdGlvbiB7UnVudGltZUVycm9yfSBPbmx5IGJpbmFyeSBnbFRGIGlzIHN1cHBvcnRlZC5cbiAqIEBleGNlcHRpb24ge1J1bnRpbWVFcnJvcn0gQnVmZmVyIGRhdGEgbXVzdCBiZSBlbWJlZGRlZCBpbiB0aGUgYmluYXJ5IGdsVEYuXG4gKiBAZXhjZXB0aW9uIHtSdW50aW1lRXJyb3J9IE9ubHkgb25lIG5vZGUgaXMgc3VwcG9ydGVkIGZvciBjbGFzc2lmaWNhdGlvbiBhbmQgaXQgbXVzdCBoYXZlIGEgbWVzaC5cbiAqIEBleGNlcHRpb24ge1J1bnRpbWVFcnJvcn0gT25seSBvbmUgbWVzaCBpcyBzdXBwb3J0ZWQgd2hlbiB1c2luZyBiM2RtIGZvciBjbGFzc2lmaWNhdGlvbi5cbiAqIEBleGNlcHRpb24ge1J1bnRpbWVFcnJvcn0gT25seSBvbmUgcHJpbWl0aXZlIHBlciBtZXNoIGlzIHN1cHBvcnRlZCB3aGVuIHVzaW5nIGIzZG0gZm9yIGNsYXNzaWZpY2F0aW9uLlxuICogQGV4Y2VwdGlvbiB7UnVudGltZUVycm9yfSBUaGUgbWVzaCBtdXN0IGhhdmUgYSBwb3NpdGlvbiBhdHRyaWJ1dGUuXG4gKiBAZXhjZXB0aW9uIHtSdW50aW1lRXJyb3J9IFRoZSBtZXNoIG11c3QgaGF2ZSBhIGJhdGNoIGlkIGF0dHJpYnV0ZS5cbiAqL1xuZnVuY3Rpb24gQ2xhc3NpZmljYXRpb25Nb2RlbChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgdmFyIGdsdGYgPSBvcHRpb25zLmdsdGY7XG4gIGlmIChnbHRmIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICBnbHRmID0gbmV3IFVpbnQ4QXJyYXkoZ2x0Zik7XG4gIH1cblxuICBpZiAoZ2x0ZiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAvLyBQYXJzZSBhbmQgdXBkYXRlIGJpbmFyeSBnbFRGXG4gICAgZ2x0ZiA9IHBhcnNlR2xiKGdsdGYpO1xuICAgIHVwZGF0ZVZlcnNpb24oZ2x0Zik7XG4gICAgYWRkRGVmYXVsdHMoZ2x0Zik7XG4gICAgcHJvY2Vzc01vZGVsTWF0ZXJpYWxzQ29tbW9uKGdsdGYpO1xuICAgIHByb2Nlc3NQYnJNYXRlcmlhbHMoZ2x0Zik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcIk9ubHkgYmluYXJ5IGdsVEYgaXMgc3VwcG9ydGVkIGFzIGEgY2xhc3NpZmllci5cIik7XG4gIH1cblxuICBGb3JFYWNoLmJ1ZmZlcihnbHRmLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgaWYgKCFkZWZpbmVkKGJ1ZmZlci5leHRyYXMuX3BpcGVsaW5lLnNvdXJjZSkpIHtcbiAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgIFwiQnVmZmVyIGRhdGEgbXVzdCBiZSBlbWJlZGRlZCBpbiB0aGUgYmluYXJ5IGdsdGYuXCJcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgZ2x0Zk5vZGVzID0gZ2x0Zi5ub2RlcztcbiAgdmFyIGdsdGZNZXNoZXMgPSBnbHRmLm1lc2hlcztcblxuICB2YXIgZ2x0Zk5vZGUgPSBnbHRmTm9kZXNbMF07XG4gIHZhciBtZXNoSWQgPSBnbHRmTm9kZS5tZXNoO1xuICBpZiAoZ2x0Zk5vZGVzLmxlbmd0aCAhPT0gMSB8fCAhZGVmaW5lZChtZXNoSWQpKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiT25seSBvbmUgbm9kZSBpcyBzdXBwb3J0ZWQgZm9yIGNsYXNzaWZpY2F0aW9uIGFuZCBpdCBtdXN0IGhhdmUgYSBtZXNoLlwiXG4gICAgKTtcbiAgfVxuXG4gIGlmIChnbHRmTWVzaGVzLmxlbmd0aCAhPT0gMSkge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICBcIk9ubHkgb25lIG1lc2ggaXMgc3VwcG9ydGVkIHdoZW4gdXNpbmcgYjNkbSBmb3IgY2xhc3NpZmljYXRpb24uXCJcbiAgICApO1xuICB9XG5cbiAgdmFyIGdsdGZQcmltaXRpdmVzID0gZ2x0Zk1lc2hlc1swXS5wcmltaXRpdmVzO1xuICBpZiAoZ2x0ZlByaW1pdGl2ZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgIFwiT25seSBvbmUgcHJpbWl0aXZlIHBlciBtZXNoIGlzIHN1cHBvcnRlZCB3aGVuIHVzaW5nIGIzZG0gZm9yIGNsYXNzaWZpY2F0aW9uLlwiXG4gICAgKTtcbiAgfVxuXG4gIHZhciBnbHRmUG9zaXRpb25BdHRyaWJ1dGUgPSBnbHRmUHJpbWl0aXZlc1swXS5hdHRyaWJ1dGVzLlBPU0lUSU9OO1xuICBpZiAoIWRlZmluZWQoZ2x0ZlBvc2l0aW9uQXR0cmlidXRlKSkge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJUaGUgbWVzaCBtdXN0IGhhdmUgYSBwb3NpdGlvbiBhdHRyaWJ1dGUuXCIpO1xuICB9XG5cbiAgdmFyIGdsdGZCYXRjaElkQXR0cmlidXRlID0gZ2x0ZlByaW1pdGl2ZXNbMF0uYXR0cmlidXRlcy5fQkFUQ0hJRDtcbiAgaWYgKCFkZWZpbmVkKGdsdGZCYXRjaElkQXR0cmlidXRlKSkge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJUaGUgbWVzaCBtdXN0IGhhdmUgYSBiYXRjaCBpZCBhdHRyaWJ1dGUuXCIpO1xuICB9XG5cbiAgdGhpcy5fZ2x0ZiA9IGdsdGY7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIG1vZGVsIHByaW1pdGl2ZSB3aWxsIGJlIHNob3duLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5zaG93ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2hvdywgdHJ1ZSk7XG5cbiAgLyoqXG4gICAqIFRoZSA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRoYXQgdHJhbnNmb3JtcyB0aGUgbW9kZWwgZnJvbSBtb2RlbCB0byB3b3JsZCBjb29yZGluYXRlcy5cbiAgICogV2hlbiB0aGlzIGlzIHRoZSBpZGVudGl0eSBtYXRyaXgsIHRoZSBtb2RlbCBpcyBkcmF3biBpbiB3b3JsZCBjb29yZGluYXRlcywgaS5lLiwgRWFydGgncyBXR1M4NCBjb29yZGluYXRlcy5cbiAgICogTG9jYWwgcmVmZXJlbmNlIGZyYW1lcyBjYW4gYmUgdXNlZCBieSBwcm92aWRpbmcgYSBkaWZmZXJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LCBsaWtlIHRoYXQgcmV0dXJuZWRcbiAgICogYnkge0BsaW5rIFRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWV9LlxuICAgKlxuICAgKiBAdHlwZSB7TWF0cml4NH1cbiAgICpcbiAgICogQGRlZmF1bHQge0BsaW5rIE1hdHJpeDQuSURFTlRJVFl9XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBvcmlnaW4gPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcygtOTUuMCwgNDAuMCwgMjAwMDAwLjApO1xuICAgKiBtLm1vZGVsTWF0cml4ID0gQ2VzaXVtLlRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWUob3JpZ2luKTtcbiAgICovXG4gIHRoaXMubW9kZWxNYXRyaXggPSBNYXRyaXg0LmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLm1vZGVsTWF0cml4LCBNYXRyaXg0LklERU5USVRZKVxuICApO1xuICB0aGlzLl9tb2RlbE1hdHJpeCA9IE1hdHJpeDQuY2xvbmUodGhpcy5tb2RlbE1hdHJpeCk7XG5cbiAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgdGhpcy5fcmVhZHlQcm9taXNlID0gd2hlbi5kZWZlcigpO1xuXG4gIC8qKlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGZvciBkZWJ1Z2dpbmcgb25seTsgaXQgaXMgbm90IGZvciBwcm9kdWN0aW9uIHVzZSBub3IgaXMgaXQgb3B0aW1pemVkLlxuICAgKiA8cD5cbiAgICogRHJhd3MgdGhlIGJvdW5kaW5nIHNwaGVyZSBmb3IgZWFjaCBkcmF3IGNvbW1hbmQgaW4gdGhlIG1vZGVsLiAgQSBnbFRGIHByaW1pdGl2ZSBjb3JyZXNwb25kc1xuICAgKiB0byBvbmUgZHJhdyBjb21tYW5kLiAgQSBnbFRGIG1lc2ggaGFzIGFuIGFycmF5IG9mIHByaW1pdGl2ZXMsIG9mdGVuIG9mIGxlbmd0aCBvbmUuXG4gICAqIDwvcD5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB0aGlzLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gICAgZmFsc2VcbiAgKTtcbiAgdGhpcy5fZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBmb3IgZGVidWdnaW5nIG9ubHk7IGl0IGlzIG5vdCBmb3IgcHJvZHVjdGlvbiB1c2Ugbm9yIGlzIGl0IG9wdGltaXplZC5cbiAgICogPHA+XG4gICAqIERyYXdzIHRoZSBtb2RlbCBpbiB3aXJlZnJhbWUuXG4gICAqIDwvcD5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB0aGlzLmRlYnVnV2lyZWZyYW1lID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZGVidWdXaXJlZnJhbWUsIGZhbHNlKTtcbiAgdGhpcy5fZGVidWdXaXJlZnJhbWUgPSBmYWxzZTtcblxuICB0aGlzLl9jbGFzc2lmaWNhdGlvblR5cGUgPSBvcHRpb25zLmNsYXNzaWZpY2F0aW9uVHlwZTtcblxuICAvLyBVbmRvY3VtZW50ZWQgb3B0aW9uc1xuICB0aGlzLl92ZXJ0ZXhTaGFkZXJMb2FkZWQgPSBvcHRpb25zLnZlcnRleFNoYWRlckxvYWRlZDtcbiAgdGhpcy5fY2xhc3NpZmljYXRpb25TaGFkZXJMb2FkZWQgPSBvcHRpb25zLmNsYXNzaWZpY2F0aW9uU2hhZGVyTG9hZGVkO1xuICB0aGlzLl91bmlmb3JtTWFwTG9hZGVkID0gb3B0aW9ucy51bmlmb3JtTWFwTG9hZGVkO1xuICB0aGlzLl9waWNrSWRMb2FkZWQgPSBvcHRpb25zLnBpY2tJZExvYWRlZDtcbiAgdGhpcy5faWdub3JlQ29tbWFuZHMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5pZ25vcmVDb21tYW5kcywgZmFsc2UpO1xuICB0aGlzLl91cEF4aXMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy51cEF4aXMsIEF4aXMuWSk7XG4gIHRoaXMuX2JhdGNoVGFibGUgPSBvcHRpb25zLmJhdGNoVGFibGU7XG5cbiAgdGhpcy5fY29tcHV0ZWRNb2RlbE1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7IC8vIERlcml2ZWQgZnJvbSBtb2RlbE1hdHJpeCBhbmQgYXhpc1xuICB0aGlzLl9pbml0aWFsUmFkaXVzID0gdW5kZWZpbmVkOyAvLyBSYWRpdXMgd2l0aG91dCBtb2RlbCdzIHNjYWxlIHByb3BlcnR5LCBtb2RlbC1tYXRyaXggc2NhbGUsIGFuaW1hdGlvbnMsIG9yIHNraW5zXG4gIHRoaXMuX2JvdW5kaW5nU3BoZXJlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zY2FsZWRCb3VuZGluZ1NwaGVyZSA9IG5ldyBCb3VuZGluZ1NwaGVyZSgpO1xuICB0aGlzLl9zdGF0ZSA9IE1vZGVsU3RhdGUuTkVFRFNfTE9BRDtcbiAgdGhpcy5fbG9hZFJlc291cmNlcyA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9tb2RlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9kaXJ0eSA9IGZhbHNlOyAvLyB0cnVlIHdoZW4gdGhlIG1vZGVsIHdhcyB0cmFuc2Zvcm1lZCB0aGlzIGZyYW1lXG5cbiAgdGhpcy5fbm9kZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gIHRoaXMuX3ByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9leHRlbnNpb25zVXNlZCA9IHVuZGVmaW5lZDsgLy8gQ2FjaGVkIHVzZWQgZ2xURiBleHRlbnNpb25zXG4gIHRoaXMuX2V4dGVuc2lvbnNSZXF1aXJlZCA9IHVuZGVmaW5lZDsgLy8gQ2FjaGVkIHJlcXVpcmVkIGdsVEYgZXh0ZW5zaW9uc1xuICB0aGlzLl9xdWFudGl6ZWRVbmlmb3JtcyA9IHVuZGVmaW5lZDsgLy8gUXVhbnRpemVkIHVuaWZvcm1zIGZvciBXRUIzRF9xdWFudGl6ZWRfYXR0cmlidXRlc1xuXG4gIHRoaXMuX2J1ZmZlcnMgPSB7fTtcbiAgdGhpcy5fdmVydGV4QXJyYXkgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NoYWRlclByb2dyYW0gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3VuaWZvcm1NYXAgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fZ2VvbWV0cnlCeXRlTGVuZ3RoID0gMDtcbiAgdGhpcy5fdHJpYW5nbGVzTGVuZ3RoID0gMDtcblxuICAvLyBDRVNJVU1fUlRDIGV4dGVuc2lvblxuICB0aGlzLl9ydGNDZW50ZXIgPSB1bmRlZmluZWQ7IC8vIHJlZmVyZW5jZSB0byBlaXRoZXIgM0Qgb3IgMkRcbiAgdGhpcy5fcnRjQ2VudGVyRXllID0gdW5kZWZpbmVkOyAvLyBpbiBleWUgY29vcmRpbmF0ZXNcbiAgdGhpcy5fcnRjQ2VudGVyM0QgPSB1bmRlZmluZWQ7IC8vIGluIHdvcmxkIGNvb3JkaW5hdGVzXG4gIHRoaXMuX3J0Y0NlbnRlcjJEID0gdW5kZWZpbmVkOyAvLyBpbiBwcm9qZWN0ZWQgd29ybGQgY29vcmRpbmF0ZXNcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQ2xhc3NpZmljYXRpb25Nb2RlbC5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgZm9yIHRoZSBnbFRGIEpTT04sIGluY2x1ZGluZyBwcm9wZXJ0aWVzIHdpdGggZGVmYXVsdCB2YWx1ZXMgb21pdHRlZFxuICAgKiBmcm9tIHRoZSBKU09OIHByb3ZpZGVkIHRvIHRoaXMgbW9kZWwuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGFzc2lmaWNhdGlvbk1vZGVsLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICBnbHRmOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2x0ZjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwncyBib3VuZGluZyBzcGhlcmUgaW4gaXRzIGxvY2FsIGNvb3JkaW5hdGUgc3lzdGVtLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25Nb2RlbC5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0JvdW5kaW5nU3BoZXJlfVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqXG4gICAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGUgbW9kZWwgaXMgbm90IGxvYWRlZC4gIFVzZSBDbGFzc2lmaWNhdGlvbk1vZGVsLnJlYWR5UHJvbWlzZSBvciB3YWl0IGZvciBDbGFzc2lmaWNhdGlvbk1vZGVsLnJlYWR5IHRvIGJlIHRydWUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIENlbnRlciBpbiBXR1M4NCBjb29yZGluYXRlc1xuICAgKiB2YXIgY2VudGVyID0gQ2VzaXVtLk1hdHJpeDQubXVsdGlwbHlCeVBvaW50KG1vZGVsLm1vZGVsTWF0cml4LCBtb2RlbC5ib3VuZGluZ1NwaGVyZS5jZW50ZXIsIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKTtcbiAgICovXG4gIGJvdW5kaW5nU3BoZXJlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSBNb2RlbFN0YXRlLkxPQURFRCkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJUaGUgbW9kZWwgaXMgbm90IGxvYWRlZC4gIFVzZSBDbGFzc2lmaWNhdGlvbk1vZGVsLnJlYWR5UHJvbWlzZSBvciB3YWl0IGZvciBDbGFzc2lmaWNhdGlvbk1vZGVsLnJlYWR5IHRvIGJlIHRydWUuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICB2YXIgbW9kZWxNYXRyaXggPSB0aGlzLm1vZGVsTWF0cml4O1xuICAgICAgdmFyIG5vblVuaWZvcm1TY2FsZSA9IE1hdHJpeDQuZ2V0U2NhbGUoXG4gICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICBib3VuZGluZ1NwaGVyZUNhcnRlc2lhbjNTY3JhdGNoXG4gICAgICApO1xuXG4gICAgICB2YXIgc2NhbGVkQm91bmRpbmdTcGhlcmUgPSB0aGlzLl9zY2FsZWRCb3VuZGluZ1NwaGVyZTtcbiAgICAgIHNjYWxlZEJvdW5kaW5nU3BoZXJlLmNlbnRlciA9IENhcnRlc2lhbjMubXVsdGlwbHlDb21wb25lbnRzKFxuICAgICAgICB0aGlzLl9ib3VuZGluZ1NwaGVyZS5jZW50ZXIsXG4gICAgICAgIG5vblVuaWZvcm1TY2FsZSxcbiAgICAgICAgc2NhbGVkQm91bmRpbmdTcGhlcmUuY2VudGVyXG4gICAgICApO1xuICAgICAgc2NhbGVkQm91bmRpbmdTcGhlcmUucmFkaXVzID1cbiAgICAgICAgQ2FydGVzaWFuMy5tYXhpbXVtQ29tcG9uZW50KG5vblVuaWZvcm1TY2FsZSkgKiB0aGlzLl9pbml0aWFsUmFkaXVzO1xuXG4gICAgICBpZiAoZGVmaW5lZCh0aGlzLl9ydGNDZW50ZXIpKSB7XG4gICAgICAgIENhcnRlc2lhbjMuYWRkKFxuICAgICAgICAgIHRoaXMuX3J0Y0NlbnRlcixcbiAgICAgICAgICBzY2FsZWRCb3VuZGluZ1NwaGVyZS5jZW50ZXIsXG4gICAgICAgICAgc2NhbGVkQm91bmRpbmdTcGhlcmUuY2VudGVyXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzY2FsZWRCb3VuZGluZ1NwaGVyZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCB0aGlzIG1vZGVsIGlzIHJlYWR5IHRvIHJlbmRlciwgaS5lLiwgdGhlIGV4dGVybmFsIGJpbmFyeSwgaW1hZ2UsXG4gICAqIGFuZCBzaGFkZXIgZmlsZXMgd2VyZSBkb3dubG9hZGVkIGFuZCB0aGUgV2ViR0wgcmVzb3VyY2VzIHdlcmUgY3JlYXRlZC4gIFRoaXMgaXMgc2V0IHRvXG4gICAqIDxjb2RlPnRydWU8L2NvZGU+IHJpZ2h0IGJlZm9yZSB7QGxpbmsgQ2xhc3NpZmljYXRpb25Nb2RlbCNyZWFkeVByb21pc2V9IGlzIHJlc29sdmVkLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25Nb2RlbC5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmVhZHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIHRoaXMgbW9kZWwgaXMgcmVhZHkgdG8gcmVuZGVyLCBpLmUuLCB3aGVuIHRoZSBleHRlcm5hbCBiaW5hcnksIGltYWdlLFxuICAgKiBhbmQgc2hhZGVyIGZpbGVzIHdlcmUgZG93bmxvYWRlZCBhbmQgdGhlIFdlYkdMIHJlc291cmNlcyB3ZXJlIGNyZWF0ZWQuXG4gICAqIDxwPlxuICAgKiBUaGlzIHByb21pc2UgaXMgcmVzb2x2ZWQgYXQgdGhlIGVuZCBvZiB0aGUgZnJhbWUgYmVmb3JlIHRoZSBmaXJzdCBmcmFtZSB0aGUgbW9kZWwgaXMgcmVuZGVyZWQgaW4uXG4gICAqIDwvcD5cbiAgICpcbiAgICogQG1lbWJlcm9mIENsYXNzaWZpY2F0aW9uTW9kZWwucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9taXNlLjxDbGFzc2lmaWNhdGlvbk1vZGVsPn1cbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBzZWUgQ2xhc3NpZmljYXRpb25Nb2RlbCNyZWFkeVxuICAgKi9cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlLnByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBtb2RlbCB3YXMgdHJhbnNmb3JtZWQgdGhpcyBmcmFtZVxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25Nb2RlbC5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlydHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kaXJ0eTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGFsbCBvZiB0aGUgZ2xURiBleHRlbnNpb25zIHVzZWQuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGFzc2lmaWNhdGlvbk1vZGVsLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGV4dGVuc2lvbnNVc2VkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWRlZmluZWQodGhpcy5fZXh0ZW5zaW9uc1VzZWQpKSB7XG4gICAgICAgIHRoaXMuX2V4dGVuc2lvbnNVc2VkID0gTW9kZWxVdGlsaXR5LmdldFVzZWRFeHRlbnNpb25zKHRoaXMuZ2x0Zik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fZXh0ZW5zaW9uc1VzZWQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBhbGwgb2YgdGhlIGdsVEYgZXh0ZW5zaW9ucyByZXF1aXJlZC5cbiAgICpcbiAgICogQG1lbWJlcm9mIENsYXNzaWZpY2F0aW9uTW9kZWwucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZXh0ZW5zaW9uc1JlcXVpcmVkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWRlZmluZWQodGhpcy5fZXh0ZW5zaW9uc1JlcXVpcmVkKSkge1xuICAgICAgICB0aGlzLl9leHRlbnNpb25zUmVxdWlyZWQgPSBNb2RlbFV0aWxpdHkuZ2V0UmVxdWlyZWRFeHRlbnNpb25zKFxuICAgICAgICAgIHRoaXMuZ2x0ZlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2V4dGVuc2lvbnNSZXF1aXJlZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtb2RlbCdzIHVwLWF4aXMuXG4gICAqIEJ5IGRlZmF1bHQgbW9kZWxzIGFyZSB5LXVwIGFjY29yZGluZyB0byB0aGUgZ2xURiBzcGVjLCBob3dldmVyIGdlby1yZWZlcmVuY2VkIG1vZGVscyB3aWxsIHR5cGljYWxseSBiZSB6LXVwLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25Nb2RlbC5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgQXhpcy5ZXG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBBeGlzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdXBBeGlzO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1vZGVsJ3MgdHJpYW5nbGUgY291bnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlhbmdsZXNMZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90cmlhbmdsZXNMZW5ndGg7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgbW9kZWwncyBnZW9tZXRyeSBtZW1vcnkgaW4gYnl0ZXMuIFRoaXMgaW5jbHVkZXMgYWxsIHZlcnRleCBhbmQgaW5kZXggYnVmZmVycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdlb21ldHJ5Qnl0ZUxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dlb21ldHJ5Qnl0ZUxlbmd0aDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtb2RlbCdzIHRleHR1cmUgbWVtb3J5IGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGV4dHVyZXNCeXRlTGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtb2RlbCdzIGNsYXNzaWZpY2F0aW9uIHR5cGUuXG4gICAqIEBtZW1iZXJvZiBDbGFzc2lmaWNhdGlvbk1vZGVsLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q2xhc3NpZmljYXRpb25UeXBlfVxuICAgKi9cbiAgY2xhc3NpZmljYXRpb25UeXBlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3NpZmljYXRpb25UeXBlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGFkZEJ1ZmZlcnNUb0xvYWRSZXNvdXJjZXMobW9kZWwpIHtcbiAgdmFyIGdsdGYgPSBtb2RlbC5nbHRmO1xuICB2YXIgbG9hZFJlc291cmNlcyA9IG1vZGVsLl9sb2FkUmVzb3VyY2VzO1xuICBGb3JFYWNoLmJ1ZmZlcihnbHRmLCBmdW5jdGlvbiAoYnVmZmVyLCBpZCkge1xuICAgIGxvYWRSZXNvdXJjZXMuYnVmZmVyc1tpZF0gPSBidWZmZXIuZXh0cmFzLl9waXBlbGluZS5zb3VyY2U7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwYXJzZUJ1ZmZlclZpZXdzKG1vZGVsKSB7XG4gIHZhciBidWZmZXJWaWV3cyA9IG1vZGVsLmdsdGYuYnVmZmVyVmlld3M7XG5cbiAgdmFyIHZlcnRleEJ1ZmZlcnNUb0NyZWF0ZSA9IG1vZGVsLl9sb2FkUmVzb3VyY2VzLnZlcnRleEJ1ZmZlcnNUb0NyZWF0ZTtcblxuICAvLyBPbmx5IEFSUkFZX0JVRkZFUiBoZXJlLiAgRUxFTUVOVF9BUlJBWV9CVUZGRVIgY3JlYXRlZCBiZWxvdy5cbiAgRm9yRWFjaC5idWZmZXJWaWV3KG1vZGVsLmdsdGYsIGZ1bmN0aW9uIChidWZmZXJWaWV3LCBpZCkge1xuICAgIGlmIChidWZmZXJWaWV3LnRhcmdldCA9PT0gV2ViR0xDb25zdGFudHMuQVJSQVlfQlVGRkVSKSB7XG4gICAgICB2ZXJ0ZXhCdWZmZXJzVG9DcmVhdGUuZW5xdWV1ZShpZCk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgaW5kZXhCdWZmZXJzVG9DcmVhdGUgPSBtb2RlbC5fbG9hZFJlc291cmNlcy5pbmRleEJ1ZmZlcnNUb0NyZWF0ZTtcbiAgdmFyIGluZGV4QnVmZmVySWRzID0ge307XG5cbiAgLy8gVGhlIENlc2l1bSBSZW5kZXJlciByZXF1aXJlcyBrbm93aW5nIHRoZSBkYXRhdHlwZSBmb3IgYW4gaW5kZXggYnVmZmVyXG4gIC8vIGF0IGNyZWF0aW9uIHR5cGUsIHdoaWNoIGlzIG5vdCBwYXJ0IG9mIHRoZSBnbFRGIGJ1ZmZlcnZpZXcgc28gbG9vcFxuICAvLyB0aHJvdWdoIGdsVEYgYWNjZXNzb3JzIHRvIGNyZWF0ZSB0aGUgYnVmZmVydmlldydzIGluZGV4IGJ1ZmZlci5cbiAgRm9yRWFjaC5hY2Nlc3Nvcihtb2RlbC5nbHRmLCBmdW5jdGlvbiAoYWNjZXNzb3IpIHtcbiAgICB2YXIgYnVmZmVyVmlld0lkID0gYWNjZXNzb3IuYnVmZmVyVmlldztcbiAgICB2YXIgYnVmZmVyVmlldyA9IGJ1ZmZlclZpZXdzW2J1ZmZlclZpZXdJZF07XG5cbiAgICBpZiAoXG4gICAgICBidWZmZXJWaWV3LnRhcmdldCA9PT0gV2ViR0xDb25zdGFudHMuRUxFTUVOVF9BUlJBWV9CVUZGRVIgJiZcbiAgICAgICFkZWZpbmVkKGluZGV4QnVmZmVySWRzW2J1ZmZlclZpZXdJZF0pXG4gICAgKSB7XG4gICAgICBpbmRleEJ1ZmZlcklkc1tidWZmZXJWaWV3SWRdID0gdHJ1ZTtcbiAgICAgIGluZGV4QnVmZmVyc1RvQ3JlYXRlLmVucXVldWUoe1xuICAgICAgICBpZDogYnVmZmVyVmlld0lkLFxuICAgICAgICBjb21wb25lbnRUeXBlOiBhY2Nlc3Nvci5jb21wb25lbnRUeXBlLFxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVmVydGV4QnVmZmVyKGJ1ZmZlclZpZXdJZCwgbW9kZWwpIHtcbiAgdmFyIGxvYWRSZXNvdXJjZXMgPSBtb2RlbC5fbG9hZFJlc291cmNlcztcbiAgdmFyIGJ1ZmZlclZpZXdzID0gbW9kZWwuZ2x0Zi5idWZmZXJWaWV3cztcbiAgdmFyIGJ1ZmZlclZpZXcgPSBidWZmZXJWaWV3c1tidWZmZXJWaWV3SWRdO1xuICB2YXIgdmVydGV4QnVmZmVyID0gbG9hZFJlc291cmNlcy5nZXRCdWZmZXIoYnVmZmVyVmlldyk7XG4gIG1vZGVsLl9idWZmZXJzW2J1ZmZlclZpZXdJZF0gPSB2ZXJ0ZXhCdWZmZXI7XG4gIG1vZGVsLl9nZW9tZXRyeUJ5dGVMZW5ndGggKz0gdmVydGV4QnVmZmVyLmJ5dGVMZW5ndGg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUluZGV4QnVmZmVyKGJ1ZmZlclZpZXdJZCwgY29tcG9uZW50VHlwZSwgbW9kZWwpIHtcbiAgdmFyIGxvYWRSZXNvdXJjZXMgPSBtb2RlbC5fbG9hZFJlc291cmNlcztcbiAgdmFyIGJ1ZmZlclZpZXdzID0gbW9kZWwuZ2x0Zi5idWZmZXJWaWV3cztcbiAgdmFyIGJ1ZmZlclZpZXcgPSBidWZmZXJWaWV3c1tidWZmZXJWaWV3SWRdO1xuICB2YXIgaW5kZXhCdWZmZXIgPSB7XG4gICAgdHlwZWRBcnJheTogbG9hZFJlc291cmNlcy5nZXRCdWZmZXIoYnVmZmVyVmlldyksXG4gICAgaW5kZXhEYXRhdHlwZTogY29tcG9uZW50VHlwZSxcbiAgfTtcbiAgbW9kZWwuX2J1ZmZlcnNbYnVmZmVyVmlld0lkXSA9IGluZGV4QnVmZmVyO1xuICBtb2RlbC5fZ2VvbWV0cnlCeXRlTGVuZ3RoICs9IGluZGV4QnVmZmVyLnR5cGVkQXJyYXkuYnl0ZUxlbmd0aDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVycyhtb2RlbCkge1xuICB2YXIgbG9hZFJlc291cmNlcyA9IG1vZGVsLl9sb2FkUmVzb3VyY2VzO1xuXG4gIGlmIChsb2FkUmVzb3VyY2VzLnBlbmRpbmdCdWZmZXJMb2FkcyAhPT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB2ZXJ0ZXhCdWZmZXJzVG9DcmVhdGUgPSBsb2FkUmVzb3VyY2VzLnZlcnRleEJ1ZmZlcnNUb0NyZWF0ZTtcbiAgdmFyIGluZGV4QnVmZmVyc1RvQ3JlYXRlID0gbG9hZFJlc291cmNlcy5pbmRleEJ1ZmZlcnNUb0NyZWF0ZTtcblxuICB3aGlsZSAodmVydGV4QnVmZmVyc1RvQ3JlYXRlLmxlbmd0aCA+IDApIHtcbiAgICBjcmVhdGVWZXJ0ZXhCdWZmZXIodmVydGV4QnVmZmVyc1RvQ3JlYXRlLmRlcXVldWUoKSwgbW9kZWwpO1xuICB9XG5cbiAgd2hpbGUgKGluZGV4QnVmZmVyc1RvQ3JlYXRlLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgaSA9IGluZGV4QnVmZmVyc1RvQ3JlYXRlLmRlcXVldWUoKTtcbiAgICBjcmVhdGVJbmRleEJ1ZmZlcihpLmlkLCBpLmNvbXBvbmVudFR5cGUsIG1vZGVsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtb2RpZnlTaGFkZXJGb3JRdWFudGl6ZWRBdHRyaWJ1dGVzKHNoYWRlciwgbW9kZWwpIHtcbiAgdmFyIHByaW1pdGl2ZSA9IG1vZGVsLmdsdGYubWVzaGVzWzBdLnByaW1pdGl2ZXNbMF07XG4gIHZhciByZXN1bHQgPSBNb2RlbFV0aWxpdHkubW9kaWZ5U2hhZGVyRm9yUXVhbnRpemVkQXR0cmlidXRlcyhcbiAgICBtb2RlbC5nbHRmLFxuICAgIHByaW1pdGl2ZSxcbiAgICBzaGFkZXJcbiAgKTtcbiAgbW9kZWwuX3F1YW50aXplZFVuaWZvcm1zID0gcmVzdWx0LnVuaWZvcm1zO1xuICByZXR1cm4gcmVzdWx0LnNoYWRlcjtcbn1cblxuZnVuY3Rpb24gbW9kaWZ5U2hhZGVyKHNoYWRlciwgY2FsbGJhY2spIHtcbiAgaWYgKGRlZmluZWQoY2FsbGJhY2spKSB7XG4gICAgc2hhZGVyID0gY2FsbGJhY2soc2hhZGVyKTtcbiAgfVxuICByZXR1cm4gc2hhZGVyO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmFtKG1vZGVsKSB7XG4gIHZhciBnbHRmID0gbW9kZWwuZ2x0ZjtcblxuICB2YXIgcG9zaXRpb25OYW1lID0gTW9kZWxVdGlsaXR5LmdldEF0dHJpYnV0ZU9yVW5pZm9ybUJ5U2VtYW50aWMoXG4gICAgZ2x0ZixcbiAgICBcIlBPU0lUSU9OXCJcbiAgKTtcbiAgdmFyIGJhdGNoSWROYW1lID0gTW9kZWxVdGlsaXR5LmdldEF0dHJpYnV0ZU9yVW5pZm9ybUJ5U2VtYW50aWMoXG4gICAgZ2x0ZixcbiAgICBcIl9CQVRDSElEXCJcbiAgKTtcblxuICB2YXIgYXR0cmlidXRlTG9jYXRpb25zID0ge307XG4gIGF0dHJpYnV0ZUxvY2F0aW9uc1twb3NpdGlvbk5hbWVdID0gMDtcbiAgYXR0cmlidXRlTG9jYXRpb25zW2JhdGNoSWROYW1lXSA9IDE7XG5cbiAgdmFyIG1vZGVsVmlld1Byb2plY3Rpb25OYW1lID0gTW9kZWxVdGlsaXR5LmdldEF0dHJpYnV0ZU9yVW5pZm9ybUJ5U2VtYW50aWMoXG4gICAgZ2x0ZixcbiAgICBcIk1PREVMVklFV1BST0pFQ1RJT05cIlxuICApO1xuXG4gIHZhciB1bmlmb3JtRGVjbDtcbiAgdmFyIHRvQ2xpcDtcblxuICBpZiAoIWRlZmluZWQobW9kZWxWaWV3UHJvamVjdGlvbk5hbWUpKSB7XG4gICAgdmFyIHByb2plY3Rpb25OYW1lID0gTW9kZWxVdGlsaXR5LmdldEF0dHJpYnV0ZU9yVW5pZm9ybUJ5U2VtYW50aWMoXG4gICAgICBnbHRmLFxuICAgICAgXCJQUk9KRUNUSU9OXCJcbiAgICApO1xuICAgIHZhciBtb2RlbFZpZXdOYW1lID0gTW9kZWxVdGlsaXR5LmdldEF0dHJpYnV0ZU9yVW5pZm9ybUJ5U2VtYW50aWMoXG4gICAgICBnbHRmLFxuICAgICAgXCJNT0RFTFZJRVdcIlxuICAgICk7XG4gICAgaWYgKCFkZWZpbmVkKG1vZGVsVmlld05hbWUpKSB7XG4gICAgICBtb2RlbFZpZXdOYW1lID0gTW9kZWxVdGlsaXR5LmdldEF0dHJpYnV0ZU9yVW5pZm9ybUJ5U2VtYW50aWMoXG4gICAgICAgIGdsdGYsXG4gICAgICAgIFwiQ0VTSVVNX1JUQ19NT0RFTFZJRVdcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB1bmlmb3JtRGVjbCA9XG4gICAgICBcInVuaWZvcm0gbWF0NCBcIiArXG4gICAgICBtb2RlbFZpZXdOYW1lICtcbiAgICAgIFwiO1xcblwiICtcbiAgICAgIFwidW5pZm9ybSBtYXQ0IFwiICtcbiAgICAgIHByb2plY3Rpb25OYW1lICtcbiAgICAgIFwiO1xcblwiO1xuICAgIHRvQ2xpcCA9XG4gICAgICBwcm9qZWN0aW9uTmFtZSArXG4gICAgICBcIiAqIFwiICtcbiAgICAgIG1vZGVsVmlld05hbWUgK1xuICAgICAgXCIgKiB2ZWM0KFwiICtcbiAgICAgIHBvc2l0aW9uTmFtZSArXG4gICAgICBcIiwgMS4wKVwiO1xuICB9IGVsc2Uge1xuICAgIHVuaWZvcm1EZWNsID0gXCJ1bmlmb3JtIG1hdDQgXCIgKyBtb2RlbFZpZXdQcm9qZWN0aW9uTmFtZSArIFwiO1xcblwiO1xuICAgIHRvQ2xpcCA9IG1vZGVsVmlld1Byb2plY3Rpb25OYW1lICsgXCIgKiB2ZWM0KFwiICsgcG9zaXRpb25OYW1lICsgXCIsIDEuMClcIjtcbiAgfVxuXG4gIHZhciBjb21wdXRlUG9zaXRpb24gPSBcIiAgICB2ZWM0IHBvc2l0aW9uSW5DbGlwQ29vcmRzID0gXCIgKyB0b0NsaXAgKyBcIjtcXG5cIjtcblxuICB2YXIgdnMgPVxuICAgIFwiYXR0cmlidXRlIHZlYzMgXCIgK1xuICAgIHBvc2l0aW9uTmFtZSArXG4gICAgXCI7XFxuXCIgK1xuICAgIFwiYXR0cmlidXRlIGZsb2F0IFwiICtcbiAgICBiYXRjaElkTmFtZSArXG4gICAgXCI7XFxuXCIgK1xuICAgIHVuaWZvcm1EZWNsICtcbiAgICBcInZvaWQgbWFpbigpIHtcXG5cIiArXG4gICAgY29tcHV0ZVBvc2l0aW9uICtcbiAgICBcIiAgICBnbF9Qb3NpdGlvbiA9IGN6bV9kZXB0aENsYW1wKHBvc2l0aW9uSW5DbGlwQ29vcmRzKTtcXG5cIiArXG4gICAgXCJ9XFxuXCI7XG4gIHZhciBmcyA9XG4gICAgXCIjaWZkZWYgR0xfRVhUX2ZyYWdfZGVwdGhcXG5cIiArXG4gICAgXCIjZXh0ZW5zaW9uIEdMX0VYVF9mcmFnX2RlcHRoIDogZW5hYmxlXFxuXCIgK1xuICAgIFwiI2VuZGlmXFxuXCIgK1xuICAgIFwidm9pZCBtYWluKCkgXFxuXCIgK1xuICAgIFwieyBcXG5cIiArXG4gICAgXCIgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApOyBcXG5cIiArXG4gICAgXCIgICAgY3ptX3dyaXRlRGVwdGhDbGFtcCgpO1xcblwiICtcbiAgICBcIn1cXG5cIjtcblxuICBpZiAobW9kZWwuZXh0ZW5zaW9uc1VzZWQuV0VCM0RfcXVhbnRpemVkX2F0dHJpYnV0ZXMpIHtcbiAgICB2cyA9IG1vZGlmeVNoYWRlckZvclF1YW50aXplZEF0dHJpYnV0ZXModnMsIG1vZGVsKTtcbiAgfVxuXG4gIHZhciBkcmF3VlMgPSBtb2RpZnlTaGFkZXIodnMsIG1vZGVsLl92ZXJ0ZXhTaGFkZXJMb2FkZWQpO1xuICB2YXIgZHJhd0ZTID0gbW9kaWZ5U2hhZGVyKGZzLCBtb2RlbC5fY2xhc3NpZmljYXRpb25TaGFkZXJMb2FkZWQpO1xuXG4gIG1vZGVsLl9zaGFkZXJQcm9ncmFtID0ge1xuICAgIHZlcnRleFNoYWRlclNvdXJjZTogZHJhd1ZTLFxuICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBkcmF3RlMsXG4gICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZUxvY2F0aW9ucygpIHtcbiAgcmV0dXJuIHtcbiAgICBQT1NJVElPTjogMCxcbiAgICBfQkFUQ0hJRDogMSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVmVydGV4QXJyYXkobW9kZWwpIHtcbiAgdmFyIGxvYWRSZXNvdXJjZXMgPSBtb2RlbC5fbG9hZFJlc291cmNlcztcbiAgaWYgKCFsb2FkUmVzb3VyY2VzLmZpbmlzaGVkQnVmZmVyc0NyZWF0aW9uKCkgfHwgZGVmaW5lZChtb2RlbC5fdmVydGV4QXJyYXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHJlbmRlcmVyQnVmZmVycyA9IG1vZGVsLl9idWZmZXJzO1xuICB2YXIgZ2x0ZiA9IG1vZGVsLmdsdGY7XG4gIHZhciBhY2Nlc3NvcnMgPSBnbHRmLmFjY2Vzc29ycztcbiAgdmFyIG1lc2hlcyA9IGdsdGYubWVzaGVzO1xuICB2YXIgcHJpbWl0aXZlcyA9IG1lc2hlc1swXS5wcmltaXRpdmVzO1xuXG4gIHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWzBdO1xuICB2YXIgYXR0cmlidXRlTG9jYXRpb25zID0gZ2V0QXR0cmlidXRlTG9jYXRpb25zKCk7XG4gIHZhciBhdHRyaWJ1dGVzID0ge307XG4gIEZvckVhY2gubWVzaFByaW1pdGl2ZUF0dHJpYnV0ZShwcmltaXRpdmUsIGZ1bmN0aW9uIChcbiAgICBhY2Nlc3NvcklkLFxuICAgIGF0dHJpYnV0ZU5hbWVcbiAgKSB7XG4gICAgLy8gU2tpcCBpZiB0aGUgYXR0cmlidXRlIGlzIG5vdCB1c2VkIGJ5IHRoZSBtYXRlcmlhbCwgZS5nLiwgYmVjYXVzZSB0aGUgYXNzZXRcbiAgICAvLyB3YXMgZXhwb3J0ZWQgd2l0aCBhbiBhdHRyaWJ1dGUgdGhhdCB3YXNuJ3QgdXNlZCBhbmQgdGhlIGFzc2V0IHdhc24ndCBvcHRpbWl6ZWQuXG4gICAgdmFyIGF0dHJpYnV0ZUxvY2F0aW9uID0gYXR0cmlidXRlTG9jYXRpb25zW2F0dHJpYnV0ZU5hbWVdO1xuICAgIGlmIChkZWZpbmVkKGF0dHJpYnV0ZUxvY2F0aW9uKSkge1xuICAgICAgdmFyIGEgPSBhY2Nlc3NvcnNbYWNjZXNzb3JJZF07XG4gICAgICBhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdID0ge1xuICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb24sXG4gICAgICAgIHZlcnRleEJ1ZmZlcjogcmVuZGVyZXJCdWZmZXJzW2EuYnVmZmVyVmlld10sXG4gICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IG51bWJlck9mQ29tcG9uZW50c0ZvclR5cGUoYS50eXBlKSxcbiAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IGEuY29tcG9uZW50VHlwZSxcbiAgICAgICAgb2Zmc2V0SW5CeXRlczogYS5ieXRlT2Zmc2V0LFxuICAgICAgICBzdHJpZGVJbkJ5dGVzOiBnZXRBY2Nlc3NvckJ5dGVTdHJpZGUoZ2x0ZiwgYSksXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGluZGV4QnVmZmVyO1xuICBpZiAoZGVmaW5lZChwcmltaXRpdmUuaW5kaWNlcykpIHtcbiAgICB2YXIgYWNjZXNzb3IgPSBhY2Nlc3NvcnNbcHJpbWl0aXZlLmluZGljZXNdO1xuICAgIGluZGV4QnVmZmVyID0gcmVuZGVyZXJCdWZmZXJzW2FjY2Vzc29yLmJ1ZmZlclZpZXddO1xuICB9XG4gIG1vZGVsLl92ZXJ0ZXhBcnJheSA9IHtcbiAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgIGluZGV4QnVmZmVyOiBpbmRleEJ1ZmZlcixcbiAgfTtcbn1cblxudmFyIGdsdGZTZW1hbnRpY1VuaWZvcm1zID0ge1xuICBQUk9KRUNUSU9OOiBmdW5jdGlvbiAodW5pZm9ybVN0YXRlLCBtb2RlbCkge1xuICAgIHJldHVybiBNb2RlbFV0aWxpdHkuZ2V0R2x0ZlNlbWFudGljVW5pZm9ybXMoKS5QUk9KRUNUSU9OKFxuICAgICAgdW5pZm9ybVN0YXRlLFxuICAgICAgbW9kZWxcbiAgICApO1xuICB9LFxuICBNT0RFTFZJRVc6IGZ1bmN0aW9uICh1bmlmb3JtU3RhdGUsIG1vZGVsKSB7XG4gICAgcmV0dXJuIE1vZGVsVXRpbGl0eS5nZXRHbHRmU2VtYW50aWNVbmlmb3JtcygpLk1PREVMVklFVyhcbiAgICAgIHVuaWZvcm1TdGF0ZSxcbiAgICAgIG1vZGVsXG4gICAgKTtcbiAgfSxcbiAgQ0VTSVVNX1JUQ19NT0RFTFZJRVc6IGZ1bmN0aW9uICh1bmlmb3JtU3RhdGUsIG1vZGVsKSB7XG4gICAgcmV0dXJuIE1vZGVsVXRpbGl0eS5nZXRHbHRmU2VtYW50aWNVbmlmb3JtcygpLkNFU0lVTV9SVENfTU9ERUxWSUVXKFxuICAgICAgdW5pZm9ybVN0YXRlLFxuICAgICAgbW9kZWxcbiAgICApO1xuICB9LFxuICBNT0RFTFZJRVdQUk9KRUNUSU9OOiBmdW5jdGlvbiAodW5pZm9ybVN0YXRlLCBtb2RlbCkge1xuICAgIHJldHVybiBNb2RlbFV0aWxpdHkuZ2V0R2x0ZlNlbWFudGljVW5pZm9ybXMoKS5NT0RFTFZJRVdQUk9KRUNUSU9OKFxuICAgICAgdW5pZm9ybVN0YXRlLFxuICAgICAgbW9kZWxcbiAgICApO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlVW5pZm9ybU1hcChtb2RlbCwgY29udGV4dCkge1xuICBpZiAoZGVmaW5lZChtb2RlbC5fdW5pZm9ybU1hcCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdW5pZm9ybU1hcCA9IHt9O1xuICBGb3JFYWNoLnRlY2huaXF1ZShtb2RlbC5nbHRmLCBmdW5jdGlvbiAodGVjaG5pcXVlKSB7XG4gICAgRm9yRWFjaC50ZWNobmlxdWVVbmlmb3JtKHRlY2huaXF1ZSwgZnVuY3Rpb24gKHVuaWZvcm0sIHVuaWZvcm1OYW1lKSB7XG4gICAgICBpZiAoXG4gICAgICAgICFkZWZpbmVkKHVuaWZvcm0uc2VtYW50aWMpIHx8XG4gICAgICAgICFkZWZpbmVkKGdsdGZTZW1hbnRpY1VuaWZvcm1zW3VuaWZvcm0uc2VtYW50aWNdKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdW5pZm9ybU1hcFt1bmlmb3JtTmFtZV0gPSBnbHRmU2VtYW50aWNVbmlmb3Jtc1t1bmlmb3JtLnNlbWFudGljXShcbiAgICAgICAgY29udGV4dC51bmlmb3JtU3RhdGUsXG4gICAgICAgIG1vZGVsXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBtb2RlbC5fdW5pZm9ybU1hcCA9IHVuaWZvcm1NYXA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVuaWZvcm1zRm9yUXVhbnRpemVkQXR0cmlidXRlcyhtb2RlbCwgcHJpbWl0aXZlKSB7XG4gIHJldHVybiBNb2RlbFV0aWxpdHkuY3JlYXRlVW5pZm9ybXNGb3JRdWFudGl6ZWRBdHRyaWJ1dGVzKFxuICAgIG1vZGVsLmdsdGYsXG4gICAgcHJpbWl0aXZlLFxuICAgIG1vZGVsLl9xdWFudGl6ZWRVbmlmb3Jtc1xuICApO1xufVxuXG5mdW5jdGlvbiB0cmlhbmdsZUNvdW50RnJvbVByaW1pdGl2ZUluZGljZXMocHJpbWl0aXZlLCBpbmRpY2VzQ291bnQpIHtcbiAgc3dpdGNoIChwcmltaXRpdmUubW9kZSkge1xuICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5UUklBTkdMRVM6XG4gICAgICByZXR1cm4gaW5kaWNlc0NvdW50IC8gMztcbiAgICBjYXNlIFByaW1pdGl2ZVR5cGUuVFJJQU5HTEVfU1RSSVA6XG4gICAgY2FzZSBQcmltaXRpdmVUeXBlLlRSSUFOR0xFX0ZBTjpcbiAgICAgIHJldHVybiBNYXRoLm1heChpbmRpY2VzQ291bnQgLSAyLCAwKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIDA7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlKG1vZGVsKSB7XG4gIHZhciBiYXRjaFRhYmxlID0gbW9kZWwuX2JhdGNoVGFibGU7XG5cbiAgdmFyIHVuaWZvcm1NYXAgPSBtb2RlbC5fdW5pZm9ybU1hcDtcbiAgdmFyIHZlcnRleEFycmF5ID0gbW9kZWwuX3ZlcnRleEFycmF5O1xuXG4gIHZhciBnbHRmID0gbW9kZWwuZ2x0ZjtcbiAgdmFyIGFjY2Vzc29ycyA9IGdsdGYuYWNjZXNzb3JzO1xuICB2YXIgZ2x0Zk1lc2hlcyA9IGdsdGYubWVzaGVzO1xuICB2YXIgcHJpbWl0aXZlID0gZ2x0Zk1lc2hlc1swXS5wcmltaXRpdmVzWzBdO1xuICB2YXIgaXggPSBhY2Nlc3NvcnNbcHJpbWl0aXZlLmluZGljZXNdO1xuXG4gIHZhciBwb3NpdGlvbkFjY2Vzc29yID0gcHJpbWl0aXZlLmF0dHJpYnV0ZXMuUE9TSVRJT047XG4gIHZhciBtaW5NYXggPSBNb2RlbFV0aWxpdHkuZ2V0QWNjZXNzb3JNaW5NYXgoZ2x0ZiwgcG9zaXRpb25BY2Nlc3Nvcik7XG4gIHZhciBib3VuZGluZ1NwaGVyZSA9IEJvdW5kaW5nU3BoZXJlLmZyb21Db3JuZXJQb2ludHMoXG4gICAgQ2FydGVzaWFuMy5mcm9tQXJyYXkobWluTWF4Lm1pbiksXG4gICAgQ2FydGVzaWFuMy5mcm9tQXJyYXkobWluTWF4Lm1heClcbiAgKTtcblxuICB2YXIgb2Zmc2V0O1xuICB2YXIgY291bnQ7XG4gIGlmIChkZWZpbmVkKGl4KSkge1xuICAgIGNvdW50ID0gaXguY291bnQ7XG4gICAgb2Zmc2V0ID0gaXguYnl0ZU9mZnNldCAvIEluZGV4RGF0YXR5cGUuZ2V0U2l6ZUluQnl0ZXMoaXguY29tcG9uZW50VHlwZSk7IC8vIGdsVEYgaGFzIG9mZnNldCBpbiBieXRlcy4gIENlc2l1bSBoYXMgb2Zmc2V0cyBpbiBpbmRpY2VzXG4gIH0gZWxzZSB7XG4gICAgdmFyIHBvc2l0aW9ucyA9IGFjY2Vzc29yc1twcmltaXRpdmUuYXR0cmlidXRlcy5QT1NJVElPTl07XG4gICAgY291bnQgPSBwb3NpdGlvbnMuY291bnQ7XG4gICAgb2Zmc2V0ID0gMDtcbiAgfVxuXG4gIC8vIFVwZGF0ZSBtb2RlbCB0cmlhbmdsZSBjb3VudCB1c2luZyBudW1iZXIgb2YgaW5kaWNlc1xuICBtb2RlbC5fdHJpYW5nbGVzTGVuZ3RoICs9IHRyaWFuZ2xlQ291bnRGcm9tUHJpbWl0aXZlSW5kaWNlcyhwcmltaXRpdmUsIGNvdW50KTtcblxuICAvLyBBbGxvdyBjYWxsYmFjayB0byBtb2RpZnkgdGhlIHVuaWZvcm1NYXBcbiAgaWYgKGRlZmluZWQobW9kZWwuX3VuaWZvcm1NYXBMb2FkZWQpKSB7XG4gICAgdW5pZm9ybU1hcCA9IG1vZGVsLl91bmlmb3JtTWFwTG9hZGVkKHVuaWZvcm1NYXApO1xuICB9XG5cbiAgLy8gQWRkIHVuaWZvcm1zIGZvciBkZWNvZGluZyBxdWFudGl6ZWQgYXR0cmlidXRlcyBpZiB1c2VkXG4gIGlmIChtb2RlbC5leHRlbnNpb25zVXNlZC5XRUIzRF9xdWFudGl6ZWRfYXR0cmlidXRlcykge1xuICAgIHZhciBxdWFudGl6ZWRVbmlmb3JtTWFwID0gY3JlYXRlVW5pZm9ybXNGb3JRdWFudGl6ZWRBdHRyaWJ1dGVzKFxuICAgICAgbW9kZWwsXG4gICAgICBwcmltaXRpdmVcbiAgICApO1xuICAgIHVuaWZvcm1NYXAgPSBjb21iaW5lKHVuaWZvcm1NYXAsIHF1YW50aXplZFVuaWZvcm1NYXApO1xuICB9XG5cbiAgdmFyIGF0dHJpYnV0ZSA9IHZlcnRleEFycmF5LmF0dHJpYnV0ZXMuUE9TSVRJT047XG4gIHZhciBjb21wb25lbnREYXRhdHlwZSA9IGF0dHJpYnV0ZS5jb21wb25lbnREYXRhdHlwZTtcbiAgdmFyIHR5cGVkQXJyYXkgPSBhdHRyaWJ1dGUudmVydGV4QnVmZmVyO1xuICB2YXIgYnl0ZU9mZnNldCA9IHR5cGVkQXJyYXkuYnl0ZU9mZnNldDtcbiAgdmFyIGJ1ZmZlckxlbmd0aCA9XG4gICAgdHlwZWRBcnJheS5ieXRlTGVuZ3RoIC8gQ29tcG9uZW50RGF0YXR5cGUuZ2V0U2l6ZUluQnl0ZXMoY29tcG9uZW50RGF0YXR5cGUpO1xuICB2YXIgcG9zaXRpb25zQnVmZmVyID0gQ29tcG9uZW50RGF0YXR5cGUuY3JlYXRlQXJyYXlCdWZmZXJWaWV3KFxuICAgIGNvbXBvbmVudERhdGF0eXBlLFxuICAgIHR5cGVkQXJyYXkuYnVmZmVyLFxuICAgIGJ5dGVPZmZzZXQsXG4gICAgYnVmZmVyTGVuZ3RoXG4gICk7XG5cbiAgYXR0cmlidXRlID0gdmVydGV4QXJyYXkuYXR0cmlidXRlcy5fQkFUQ0hJRDtcbiAgY29tcG9uZW50RGF0YXR5cGUgPSBhdHRyaWJ1dGUuY29tcG9uZW50RGF0YXR5cGU7XG4gIHR5cGVkQXJyYXkgPSBhdHRyaWJ1dGUudmVydGV4QnVmZmVyO1xuICBieXRlT2Zmc2V0ID0gdHlwZWRBcnJheS5ieXRlT2Zmc2V0O1xuICBidWZmZXJMZW5ndGggPVxuICAgIHR5cGVkQXJyYXkuYnl0ZUxlbmd0aCAvIENvbXBvbmVudERhdGF0eXBlLmdldFNpemVJbkJ5dGVzKGNvbXBvbmVudERhdGF0eXBlKTtcbiAgdmFyIHZlcnRleEJhdGNoSWRzID0gQ29tcG9uZW50RGF0YXR5cGUuY3JlYXRlQXJyYXlCdWZmZXJWaWV3KFxuICAgIGNvbXBvbmVudERhdGF0eXBlLFxuICAgIHR5cGVkQXJyYXkuYnVmZmVyLFxuICAgIGJ5dGVPZmZzZXQsXG4gICAgYnVmZmVyTGVuZ3RoXG4gICk7XG5cbiAgdmFyIGJ1ZmZlciA9IHZlcnRleEFycmF5LmluZGV4QnVmZmVyLnR5cGVkQXJyYXk7XG4gIHZhciBpbmRpY2VzO1xuICBpZiAodmVydGV4QXJyYXkuaW5kZXhCdWZmZXIuaW5kZXhEYXRhdHlwZSA9PT0gSW5kZXhEYXRhdHlwZS5VTlNJR05FRF9TSE9SVCkge1xuICAgIGluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoXG4gICAgICBidWZmZXIuYnVmZmVyLFxuICAgICAgYnVmZmVyLmJ5dGVPZmZzZXQsXG4gICAgICBidWZmZXIuYnl0ZUxlbmd0aCAvIFVpbnQxNkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBpbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KFxuICAgICAgYnVmZmVyLmJ1ZmZlcixcbiAgICAgIGJ1ZmZlci5ieXRlT2Zmc2V0LFxuICAgICAgYnVmZmVyLmJ5dGVMZW5ndGggLyBVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVFxuICAgICk7XG4gIH1cblxuICBwb3NpdGlvbnNCdWZmZXIgPSBhcnJheVNsaWNlKHBvc2l0aW9uc0J1ZmZlcik7XG4gIHZlcnRleEJhdGNoSWRzID0gYXJyYXlTbGljZSh2ZXJ0ZXhCYXRjaElkcyk7XG4gIGluZGljZXMgPSBhcnJheVNsaWNlKGluZGljZXMsIG9mZnNldCwgb2Zmc2V0ICsgY291bnQpO1xuXG4gIHZhciBiYXRjaElkcyA9IFtdO1xuICB2YXIgaW5kZXhDb3VudHMgPSBbXTtcbiAgdmFyIGluZGV4T2Zmc2V0cyA9IFtdO1xuICB2YXIgYmF0Y2hlZEluZGljZXMgPSBbXTtcblxuICB2YXIgY3VycmVudElkID0gdmVydGV4QmF0Y2hJZHNbaW5kaWNlc1swXV07XG4gIGJhdGNoSWRzLnB1c2goY3VycmVudElkKTtcbiAgaW5kZXhPZmZzZXRzLnB1c2goMCk7XG5cbiAgdmFyIGJhdGNoSWQ7XG4gIHZhciBpbmRleE9mZnNldDtcbiAgdmFyIGluZGV4Q291bnQ7XG4gIHZhciBpbmRpY2VzTGVuZ3RoID0gaW5kaWNlcy5sZW5ndGg7XG4gIGZvciAodmFyIGogPSAxOyBqIDwgaW5kaWNlc0xlbmd0aDsgKytqKSB7XG4gICAgYmF0Y2hJZCA9IHZlcnRleEJhdGNoSWRzW2luZGljZXNbal1dO1xuICAgIGlmIChiYXRjaElkICE9PSBjdXJyZW50SWQpIHtcbiAgICAgIGluZGV4T2Zmc2V0ID0gaW5kZXhPZmZzZXRzW2luZGV4T2Zmc2V0cy5sZW5ndGggLSAxXTtcbiAgICAgIGluZGV4Q291bnQgPSBqIC0gaW5kZXhPZmZzZXQ7XG5cbiAgICAgIGJhdGNoSWRzLnB1c2goYmF0Y2hJZCk7XG4gICAgICBpbmRleENvdW50cy5wdXNoKGluZGV4Q291bnQpO1xuICAgICAgaW5kZXhPZmZzZXRzLnB1c2goaik7XG5cbiAgICAgIGJhdGNoZWRJbmRpY2VzLnB1c2goXG4gICAgICAgIG5ldyBWZWN0b3IzRFRpbGVCYXRjaCh7XG4gICAgICAgICAgb2Zmc2V0OiBpbmRleE9mZnNldCxcbiAgICAgICAgICBjb3VudDogaW5kZXhDb3VudCxcbiAgICAgICAgICBiYXRjaElkczogW2N1cnJlbnRJZF0sXG4gICAgICAgICAgY29sb3I6IENvbG9yLldISVRFLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgY3VycmVudElkID0gYmF0Y2hJZDtcbiAgICB9XG4gIH1cblxuICBpbmRleE9mZnNldCA9IGluZGV4T2Zmc2V0c1tpbmRleE9mZnNldHMubGVuZ3RoIC0gMV07XG4gIGluZGV4Q291bnQgPSBpbmRpY2VzTGVuZ3RoIC0gaW5kZXhPZmZzZXQ7XG5cbiAgaW5kZXhDb3VudHMucHVzaChpbmRleENvdW50KTtcbiAgYmF0Y2hlZEluZGljZXMucHVzaChcbiAgICBuZXcgVmVjdG9yM0RUaWxlQmF0Y2goe1xuICAgICAgb2Zmc2V0OiBpbmRleE9mZnNldCxcbiAgICAgIGNvdW50OiBpbmRleENvdW50LFxuICAgICAgYmF0Y2hJZHM6IFtjdXJyZW50SWRdLFxuICAgICAgY29sb3I6IENvbG9yLldISVRFLFxuICAgIH0pXG4gICk7XG5cbiAgdmFyIHNoYWRlciA9IG1vZGVsLl9zaGFkZXJQcm9ncmFtO1xuICB2YXIgdmVydGV4U2hhZGVyU291cmNlID0gc2hhZGVyLnZlcnRleFNoYWRlclNvdXJjZTtcbiAgdmFyIGZyYWdtZW50U2hhZGVyU291cmNlID0gc2hhZGVyLmZyYWdtZW50U2hhZGVyU291cmNlO1xuICB2YXIgYXR0cmlidXRlTG9jYXRpb25zID0gc2hhZGVyLmF0dHJpYnV0ZUxvY2F0aW9ucztcbiAgdmFyIHBpY2tJZCA9IGRlZmluZWQobW9kZWwuX3BpY2tJZExvYWRlZCkgPyBtb2RlbC5fcGlja0lkTG9hZGVkKCkgOiB1bmRlZmluZWQ7XG5cbiAgbW9kZWwuX3ByaW1pdGl2ZSA9IG5ldyBWZWN0b3IzRFRpbGVQcmltaXRpdmUoe1xuICAgIGNsYXNzaWZpY2F0aW9uVHlwZTogbW9kZWwuX2NsYXNzaWZpY2F0aW9uVHlwZSxcbiAgICBwb3NpdGlvbnM6IHBvc2l0aW9uc0J1ZmZlcixcbiAgICBpbmRpY2VzOiBpbmRpY2VzLFxuICAgIGluZGV4T2Zmc2V0czogaW5kZXhPZmZzZXRzLFxuICAgIGluZGV4Q291bnRzOiBpbmRleENvdW50cyxcbiAgICBiYXRjaElkczogYmF0Y2hJZHMsXG4gICAgdmVydGV4QmF0Y2hJZHM6IHZlcnRleEJhdGNoSWRzLFxuICAgIGJhdGNoZWRJbmRpY2VzOiBiYXRjaGVkSW5kaWNlcyxcbiAgICBiYXRjaFRhYmxlOiBiYXRjaFRhYmxlLFxuICAgIGJvdW5kaW5nVm9sdW1lOiBuZXcgQm91bmRpbmdTcGhlcmUoKSwgLy8gdXBkYXRlZCBpbiB1cGRhdGUoKVxuICAgIF92ZXJ0ZXhTaGFkZXJTb3VyY2U6IHZlcnRleFNoYWRlclNvdXJjZSxcbiAgICBfZnJhZ21lbnRTaGFkZXJTb3VyY2U6IGZyYWdtZW50U2hhZGVyU291cmNlLFxuICAgIF9hdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgICBfdW5pZm9ybU1hcDogdW5pZm9ybU1hcCxcbiAgICBfcGlja0lkOiBwaWNrSWQsXG4gICAgX21vZGVsTWF0cml4OiBuZXcgTWF0cml4NCgpLCAvLyB1cGRhdGVkIGluIHVwZGF0ZSgpXG4gICAgX2JvdW5kaW5nU3BoZXJlOiBib3VuZGluZ1NwaGVyZSwgLy8gdXNlZCB0byB1cGRhdGUgYm91bmRpbmdWb2x1bWVcbiAgfSk7XG5cbiAgLy8gUmVsZWFzZSBDUFUgcmVzb3VyY2VzXG4gIG1vZGVsLl9idWZmZXJzID0gdW5kZWZpbmVkO1xuICBtb2RlbC5fdmVydGV4QXJyYXkgPSB1bmRlZmluZWQ7XG4gIG1vZGVsLl9zaGFkZXJQcm9ncmFtID0gdW5kZWZpbmVkO1xuICBtb2RlbC5fdW5pZm9ybU1hcCA9IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUnVudGltZU5vZGVzKG1vZGVsKSB7XG4gIHZhciBsb2FkUmVzb3VyY2VzID0gbW9kZWwuX2xvYWRSZXNvdXJjZXM7XG4gIGlmICghbG9hZFJlc291cmNlcy5maW5pc2hlZCgpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGRlZmluZWQobW9kZWwuX3ByaW1pdGl2ZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZ2x0ZiA9IG1vZGVsLmdsdGY7XG4gIHZhciBub2RlcyA9IGdsdGYubm9kZXM7XG4gIHZhciBnbHRmTm9kZSA9IG5vZGVzWzBdO1xuICBtb2RlbC5fbm9kZU1hdHJpeCA9IE1vZGVsVXRpbGl0eS5nZXRUcmFuc2Zvcm0oZ2x0Zk5vZGUsIG1vZGVsLl9ub2RlTWF0cml4KTtcblxuICBjcmVhdGVQcmltaXRpdmUobW9kZWwpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSZXNvdXJjZXMobW9kZWwsIGZyYW1lU3RhdGUpIHtcbiAgdmFyIGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XG5cbiAgTW9kZWxVdGlsaXR5LmNoZWNrU3VwcG9ydGVkR2xFeHRlbnNpb25zKG1vZGVsLmdsdGYuZ2xFeHRlbnNpb25zVXNlZCwgY29udGV4dCk7XG4gIGNyZWF0ZUJ1ZmZlcnMobW9kZWwpOyAvLyB1c2luZyBnbFRGIGJ1ZmZlclZpZXdzXG4gIGNyZWF0ZVByb2dyYW0obW9kZWwpO1xuICBjcmVhdGVWZXJ0ZXhBcnJheShtb2RlbCk7IC8vIHVzaW5nIGdsVEYgbWVzaGVzXG4gIGNyZWF0ZVVuaWZvcm1NYXAobW9kZWwsIGNvbnRleHQpOyAvLyB1c2luZyBnbFRGIG1hdGVyaWFscy90ZWNobmlxdWVzXG4gIGNyZWF0ZVJ1bnRpbWVOb2Rlcyhtb2RlbCk7IC8vIHVzaW5nIGdsVEYgc2NlbmVcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbnZhciBzY3JhdGNoQ29tcHV0ZWRUcmFuc2xhdGlvbiA9IG5ldyBDYXJ0ZXNpYW40KCk7XG52YXIgc2NyYXRjaENvbXB1dGVkTWF0cml4SW4yRCA9IG5ldyBNYXRyaXg0KCk7XG5cbmZ1bmN0aW9uIHVwZGF0ZU5vZGVNb2RlbE1hdHJpeChcbiAgbW9kZWwsXG4gIG1vZGVsVHJhbnNmb3JtQ2hhbmdlZCxcbiAganVzdExvYWRlZCxcbiAgcHJvamVjdGlvblxuKSB7XG4gIHZhciBjb21wdXRlZE1vZGVsTWF0cml4ID0gbW9kZWwuX2NvbXB1dGVkTW9kZWxNYXRyaXg7XG5cbiAgaWYgKG1vZGVsLl9tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUzRCAmJiAhbW9kZWwuX2lnbm9yZUNvbW1hbmRzKSB7XG4gICAgdmFyIHRyYW5zbGF0aW9uID0gTWF0cml4NC5nZXRDb2x1bW4oXG4gICAgICBjb21wdXRlZE1vZGVsTWF0cml4LFxuICAgICAgMyxcbiAgICAgIHNjcmF0Y2hDb21wdXRlZFRyYW5zbGF0aW9uXG4gICAgKTtcbiAgICBpZiAoIUNhcnRlc2lhbjQuZXF1YWxzKHRyYW5zbGF0aW9uLCBDYXJ0ZXNpYW40LlVOSVRfVykpIHtcbiAgICAgIGNvbXB1dGVkTW9kZWxNYXRyaXggPSBUcmFuc2Zvcm1zLmJhc2lzVG8yRChcbiAgICAgICAgcHJvamVjdGlvbixcbiAgICAgICAgY29tcHV0ZWRNb2RlbE1hdHJpeCxcbiAgICAgICAgc2NyYXRjaENvbXB1dGVkTWF0cml4SW4yRFxuICAgICAgKTtcbiAgICAgIG1vZGVsLl9ydGNDZW50ZXIgPSBtb2RlbC5fcnRjQ2VudGVyM0Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjZW50ZXIgPSBtb2RlbC5ib3VuZGluZ1NwaGVyZS5jZW50ZXI7XG4gICAgICB2YXIgdG8yRCA9IFRyYW5zZm9ybXMud2dzODRUbzJETW9kZWxNYXRyaXgoXG4gICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgIGNlbnRlcixcbiAgICAgICAgc2NyYXRjaENvbXB1dGVkTWF0cml4SW4yRFxuICAgICAgKTtcbiAgICAgIGNvbXB1dGVkTW9kZWxNYXRyaXggPSBNYXRyaXg0Lm11bHRpcGx5KFxuICAgICAgICB0bzJELFxuICAgICAgICBjb21wdXRlZE1vZGVsTWF0cml4LFxuICAgICAgICBzY3JhdGNoQ29tcHV0ZWRNYXRyaXhJbjJEXG4gICAgICApO1xuXG4gICAgICBpZiAoZGVmaW5lZChtb2RlbC5fcnRjQ2VudGVyKSkge1xuICAgICAgICBNYXRyaXg0LnNldFRyYW5zbGF0aW9uKFxuICAgICAgICAgIGNvbXB1dGVkTW9kZWxNYXRyaXgsXG4gICAgICAgICAgQ2FydGVzaWFuNC5VTklUX1csXG4gICAgICAgICAgY29tcHV0ZWRNb2RlbE1hdHJpeFxuICAgICAgICApO1xuICAgICAgICBtb2RlbC5fcnRjQ2VudGVyID0gbW9kZWwuX3J0Y0NlbnRlcjJEO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBwcmltaXRpdmUgPSBtb2RlbC5fcHJpbWl0aXZlO1xuXG4gIGlmIChtb2RlbFRyYW5zZm9ybUNoYW5nZWQgfHwganVzdExvYWRlZCkge1xuICAgIE1hdHJpeDQubXVsdGlwbHlUcmFuc2Zvcm1hdGlvbihcbiAgICAgIGNvbXB1dGVkTW9kZWxNYXRyaXgsXG4gICAgICBtb2RlbC5fbm9kZU1hdHJpeCxcbiAgICAgIHByaW1pdGl2ZS5fbW9kZWxNYXRyaXhcbiAgICApO1xuICAgIEJvdW5kaW5nU3BoZXJlLnRyYW5zZm9ybShcbiAgICAgIHByaW1pdGl2ZS5fYm91bmRpbmdTcGhlcmUsXG4gICAgICBwcmltaXRpdmUuX21vZGVsTWF0cml4LFxuICAgICAgcHJpbWl0aXZlLl9ib3VuZGluZ1ZvbHVtZVxuICAgICk7XG5cbiAgICBpZiAoZGVmaW5lZChtb2RlbC5fcnRjQ2VudGVyKSkge1xuICAgICAgQ2FydGVzaWFuMy5hZGQoXG4gICAgICAgIG1vZGVsLl9ydGNDZW50ZXIsXG4gICAgICAgIHByaW1pdGl2ZS5fYm91bmRpbmdWb2x1bWUuY2VudGVyLFxuICAgICAgICBwcmltaXRpdmUuX2JvdW5kaW5nVm9sdW1lLmNlbnRlclxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbkNsYXNzaWZpY2F0aW9uTW9kZWwucHJvdG90eXBlLnVwZGF0ZUNvbW1hbmRzID0gZnVuY3Rpb24gKGJhdGNoSWQsIGNvbG9yKSB7XG4gIHRoaXMuX3ByaW1pdGl2ZS51cGRhdGVDb21tYW5kcyhiYXRjaElkLCBjb2xvcik7XG59O1xuXG5DbGFzc2lmaWNhdGlvbk1vZGVsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICBpZiAoZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuTU9SUEhJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIUZlYXR1cmVEZXRlY3Rpb24uc3VwcG9ydHNXZWJQLmluaXRpYWxpemVkKSB7XG4gICAgRmVhdHVyZURldGVjdGlvbi5zdXBwb3J0c1dlYlAuaW5pdGlhbGl6ZSgpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgc3VwcG9ydHNXZWJQID0gRmVhdHVyZURldGVjdGlvbi5zdXBwb3J0c1dlYlAoKTtcblxuICBpZiAodGhpcy5fc3RhdGUgPT09IE1vZGVsU3RhdGUuTkVFRFNfTE9BRCAmJiBkZWZpbmVkKHRoaXMuZ2x0ZikpIHtcbiAgICB0aGlzLl9zdGF0ZSA9IE1vZGVsU3RhdGUuTE9BRElORztcbiAgICBpZiAodGhpcy5fc3RhdGUgIT09IE1vZGVsU3RhdGUuRkFJTEVEKSB7XG4gICAgICB2YXIgZXh0ZW5zaW9ucyA9IHRoaXMuZ2x0Zi5leHRlbnNpb25zO1xuICAgICAgaWYgKGRlZmluZWQoZXh0ZW5zaW9ucykgJiYgZGVmaW5lZChleHRlbnNpb25zLkNFU0lVTV9SVEMpKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSBDYXJ0ZXNpYW4zLmZyb21BcnJheShleHRlbnNpb25zLkNFU0lVTV9SVEMuY2VudGVyKTtcbiAgICAgICAgaWYgKCFDYXJ0ZXNpYW4zLmVxdWFscyhjZW50ZXIsIENhcnRlc2lhbjMuWkVSTykpIHtcbiAgICAgICAgICB0aGlzLl9ydGNDZW50ZXIzRCA9IGNlbnRlcjtcblxuICAgICAgICAgIHZhciBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uO1xuICAgICAgICAgIHZhciBlbGxpcHNvaWQgPSBwcm9qZWN0aW9uLmVsbGlwc29pZDtcbiAgICAgICAgICB2YXIgY2FydG9ncmFwaGljID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgICAgICAgICAgdGhpcy5fcnRjQ2VudGVyM0RcbiAgICAgICAgICApO1xuICAgICAgICAgIHZhciBwcm9qZWN0ZWRDYXJ0ID0gcHJvamVjdGlvbi5wcm9qZWN0KGNhcnRvZ3JhcGhpYyk7XG4gICAgICAgICAgQ2FydGVzaWFuMy5mcm9tRWxlbWVudHMoXG4gICAgICAgICAgICBwcm9qZWN0ZWRDYXJ0LnosXG4gICAgICAgICAgICBwcm9qZWN0ZWRDYXJ0LngsXG4gICAgICAgICAgICBwcm9qZWN0ZWRDYXJ0LnksXG4gICAgICAgICAgICBwcm9qZWN0ZWRDYXJ0XG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLl9ydGNDZW50ZXIyRCA9IHByb2plY3RlZENhcnQ7XG5cbiAgICAgICAgICB0aGlzLl9ydGNDZW50ZXJFeWUgPSBuZXcgQ2FydGVzaWFuMygpO1xuICAgICAgICAgIHRoaXMuX3J0Y0NlbnRlciA9IHRoaXMuX3J0Y0NlbnRlcjNEO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2xvYWRSZXNvdXJjZXMgPSBuZXcgTW9kZWxMb2FkUmVzb3VyY2VzKCk7XG4gICAgICBNb2RlbFV0aWxpdHkucGFyc2VCdWZmZXJzKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsb2FkUmVzb3VyY2VzID0gdGhpcy5fbG9hZFJlc291cmNlcztcbiAgdmFyIGp1c3RMb2FkZWQgPSBmYWxzZTtcblxuICBpZiAodGhpcy5fc3RhdGUgPT09IE1vZGVsU3RhdGUuTE9BRElORykge1xuICAgIC8vIFRyYW5zaXRpb24gZnJvbSBMT0FESU5HIC0+IExPQURFRCBvbmNlIHJlc291cmNlcyBhcmUgZG93bmxvYWRlZCBhbmQgY3JlYXRlZC5cbiAgICAvLyBUZXh0dXJlcyBtYXkgY29udGludWUgdG8gc3RyZWFtIGluIHdoaWxlIGluIHRoZSBMT0FERUQgc3RhdGUuXG4gICAgaWYgKGxvYWRSZXNvdXJjZXMucGVuZGluZ0J1ZmZlckxvYWRzID09PSAwKSB7XG4gICAgICBNb2RlbFV0aWxpdHkuY2hlY2tTdXBwb3J0ZWRFeHRlbnNpb25zKFxuICAgICAgICB0aGlzLmV4dGVuc2lvbnNSZXF1aXJlZCxcbiAgICAgICAgc3VwcG9ydHNXZWJQXG4gICAgICApO1xuXG4gICAgICBhZGRCdWZmZXJzVG9Mb2FkUmVzb3VyY2VzKHRoaXMpO1xuICAgICAgcGFyc2VCdWZmZXJWaWV3cyh0aGlzKTtcblxuICAgICAgdGhpcy5fYm91bmRpbmdTcGhlcmUgPSBNb2RlbFV0aWxpdHkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKHRoaXMpO1xuICAgICAgdGhpcy5faW5pdGlhbFJhZGl1cyA9IHRoaXMuX2JvdW5kaW5nU3BoZXJlLnJhZGl1cztcbiAgICAgIGNyZWF0ZVJlc291cmNlcyh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgICB9XG4gICAgaWYgKGxvYWRSZXNvdXJjZXMuZmluaXNoZWQoKSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBNb2RlbFN0YXRlLkxPQURFRDtcbiAgICAgIGp1c3RMb2FkZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkZWZpbmVkKGxvYWRSZXNvdXJjZXMpICYmIHRoaXMuX3N0YXRlID09PSBNb2RlbFN0YXRlLkxPQURFRCkge1xuICAgIGlmICghanVzdExvYWRlZCkge1xuICAgICAgY3JlYXRlUmVzb3VyY2VzKHRoaXMsIGZyYW1lU3RhdGUpO1xuICAgIH1cblxuICAgIGlmIChsb2FkUmVzb3VyY2VzLmZpbmlzaGVkKCkpIHtcbiAgICAgIHRoaXMuX2xvYWRSZXNvdXJjZXMgPSB1bmRlZmluZWQ7IC8vIENsZWFyIENQVSBtZW1vcnkgc2luY2UgV2ViR0wgcmVzb3VyY2VzIHdlcmUgY3JlYXRlZC5cbiAgICB9XG4gIH1cblxuICB2YXIgc2hvdyA9IHRoaXMuc2hvdztcblxuICBpZiAoKHNob3cgJiYgdGhpcy5fc3RhdGUgPT09IE1vZGVsU3RhdGUuTE9BREVEKSB8fCBqdXN0TG9hZGVkKSB7XG4gICAgdGhpcy5fZGlydHkgPSBmYWxzZTtcbiAgICB2YXIgbW9kZWxNYXRyaXggPSB0aGlzLm1vZGVsTWF0cml4O1xuXG4gICAgdmFyIG1vZGVDaGFuZ2VkID0gZnJhbWVTdGF0ZS5tb2RlICE9PSB0aGlzLl9tb2RlO1xuICAgIHRoaXMuX21vZGUgPSBmcmFtZVN0YXRlLm1vZGU7XG5cbiAgICAvLyBDbGFzc2lmaWNhdGlvbk1vZGVsJ3MgbW9kZWwgbWF0cml4IG5lZWRzIHRvIGJlIHVwZGF0ZWRcbiAgICB2YXIgbW9kZWxUcmFuc2Zvcm1DaGFuZ2VkID1cbiAgICAgICFNYXRyaXg0LmVxdWFscyh0aGlzLl9tb2RlbE1hdHJpeCwgbW9kZWxNYXRyaXgpIHx8IG1vZGVDaGFuZ2VkO1xuXG4gICAgaWYgKG1vZGVsVHJhbnNmb3JtQ2hhbmdlZCB8fCBqdXN0TG9hZGVkKSB7XG4gICAgICBNYXRyaXg0LmNsb25lKG1vZGVsTWF0cml4LCB0aGlzLl9tb2RlbE1hdHJpeCk7XG5cbiAgICAgIHZhciBjb21wdXRlZE1vZGVsTWF0cml4ID0gdGhpcy5fY29tcHV0ZWRNb2RlbE1hdHJpeDtcbiAgICAgIE1hdHJpeDQuY2xvbmUobW9kZWxNYXRyaXgsIGNvbXB1dGVkTW9kZWxNYXRyaXgpO1xuICAgICAgaWYgKHRoaXMuX3VwQXhpcyA9PT0gQXhpcy5ZKSB7XG4gICAgICAgIE1hdHJpeDQubXVsdGlwbHlUcmFuc2Zvcm1hdGlvbihcbiAgICAgICAgICBjb21wdXRlZE1vZGVsTWF0cml4LFxuICAgICAgICAgIEF4aXMuWV9VUF9UT19aX1VQLFxuICAgICAgICAgIGNvbXB1dGVkTW9kZWxNYXRyaXhcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fdXBBeGlzID09PSBBeGlzLlgpIHtcbiAgICAgICAgTWF0cml4NC5tdWx0aXBseVRyYW5zZm9ybWF0aW9uKFxuICAgICAgICAgIGNvbXB1dGVkTW9kZWxNYXRyaXgsXG4gICAgICAgICAgQXhpcy5YX1VQX1RPX1pfVVAsXG4gICAgICAgICAgY29tcHV0ZWRNb2RlbE1hdHJpeFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBtb2RlbE1hdHJpeCB0aHJvdWdob3V0IHRoZSBncmFwaCBhcyBuZWVkZWRcbiAgICBpZiAobW9kZWxUcmFuc2Zvcm1DaGFuZ2VkIHx8IGp1c3RMb2FkZWQpIHtcbiAgICAgIHVwZGF0ZU5vZGVNb2RlbE1hdHJpeChcbiAgICAgICAgdGhpcyxcbiAgICAgICAgbW9kZWxUcmFuc2Zvcm1DaGFuZ2VkLFxuICAgICAgICBqdXN0TG9hZGVkLFxuICAgICAgICBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb25cbiAgICAgICk7XG4gICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGp1c3RMb2FkZWQpIHtcbiAgICAvLyBDYWxsZWQgYWZ0ZXIgbW9kZWxNYXRyaXggdXBkYXRlLlxuICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgZnJhbWVTdGF0ZS5hZnRlclJlbmRlci5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vZGVsLl9yZWFkeSA9IHRydWU7XG4gICAgICBtb2RlbC5fcmVhZHlQcm9taXNlLnJlc29sdmUobW9kZWwpO1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzaG93ICYmICF0aGlzLl9pZ25vcmVDb21tYW5kcykge1xuICAgIHRoaXMuX3ByaW1pdGl2ZS5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XG4gICAgdGhpcy5fcHJpbWl0aXZlLmRlYnVnV2lyZWZyYW1lID0gdGhpcy5kZWJ1Z1dpcmVmcmFtZTtcbiAgICB0aGlzLl9wcmltaXRpdmUudXBkYXRlKGZyYW1lU3RhdGUpO1xuICB9XG59O1xuXG5DbGFzc2lmaWNhdGlvbk1vZGVsLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuQ2xhc3NpZmljYXRpb25Nb2RlbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fcHJpbWl0aXZlID0gdGhpcy5fcHJpbWl0aXZlICYmIHRoaXMuX3ByaW1pdGl2ZS5kZXN0cm95KCk7XG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcbmV4cG9ydCBkZWZhdWx0IENsYXNzaWZpY2F0aW9uTW9kZWw7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///40370\n')},14662:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92062);\n/* harmony import */ var _Core_combine_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8182);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(26865);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(60072);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8379);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(53642);\n/* harmony import */ var _Shaders_ShadowVolumeAppearanceVS_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(73257);\n/* harmony import */ var _Shaders_ShadowVolumeFS_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(79863);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(13222);\n/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(13633);\n/* harmony import */ var _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(73001);\n/* harmony import */ var _DepthFunction_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(7976);\n/* harmony import */ var _PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(64060);\n/* harmony import */ var _Primitive_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(34380);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(89917);\n/* harmony import */ var _ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(88472);\n/* harmony import */ var _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(87233);\n/* harmony import */ var _StencilFunction_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(77053);\n/* harmony import */ var _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(81255);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A classification primitive represents a volume enclosing geometry in the {@link Scene} to be highlighted.\n * <p>\n * A primitive combines geometry instances with an {@link Appearance} that describes the full shading, including\n * {@link Material} and {@link RenderState}.  Roughly, the geometry instance defines the structure and placement,\n * and the appearance defines the visual characteristics.  Decoupling geometry and appearance allows us to mix\n * and match most of them and add a new geometry or appearance independently of each other.\n * Only {@link PerInstanceColorAppearance} with the same color across all instances is supported at this time when using\n * ClassificationPrimitive directly.\n * For full {@link Appearance} support when classifying terrain or 3D Tiles use {@link GroundPrimitive} instead.\n * </p>\n * <p>\n * For correct rendering, this feature requires the EXT_frag_depth WebGL extension. For hardware that do not support this extension, there\n * will be rendering artifacts for some viewing angles.\n * </p>\n * <p>\n * Valid geometries are {@link BoxGeometry}, {@link CylinderGeometry}, {@link EllipsoidGeometry}, {@link PolylineVolumeGeometry}, and {@link SphereGeometry}.\n * </p>\n * <p>\n * Geometries that follow the surface of the ellipsoid, such as {@link CircleGeometry}, {@link CorridorGeometry}, {@link EllipseGeometry}, {@link PolygonGeometry}, and {@link RectangleGeometry},\n * are also valid if they are extruded volumes; otherwise, they will not be rendered.\n * </p>\n *\n * @alias ClassificationPrimitive\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Array|GeometryInstance} [options.geometryInstances] The geometry instances to render. This can either be a single instance or an array of length one.\n * @param {Appearance} [options.appearance] The appearance used to render the primitive. Defaults to PerInstanceColorAppearance when GeometryInstances have a color attribute.\n * @param {Boolean} [options.show=true] Determines if this primitive will be shown.\n * @param {Boolean} [options.vertexCacheOptimize=false] When <code>true</code>, geometry vertices are optimized for the pre and post-vertex-shader caches.\n * @param {Boolean} [options.interleave=false] When <code>true</code>, geometry vertex attributes are interleaved, which can slightly improve rendering performance but increases load time.\n * @param {Boolean} [options.compressVertices=true] When <code>true</code>, the geometry vertices are compressed, which will save memory.\n * @param {Boolean} [options.releaseGeometryInstances=true] When <code>true</code>, the primitive does not keep a reference to the input <code>geometryInstances</code> to save memory.\n * @param {Boolean} [options.allowPicking=true] When <code>true</code>, each geometry instance will only be pickable with {@link Scene#pick}.  When <code>false</code>, GPU memory is saved.\n * @param {Boolean} [options.asynchronous=true] Determines if the primitive will be created asynchronously or block until ready. If false initializeTerrainHeights() must be called first.\n * @param {ClassificationType} [options.classificationType=ClassificationType.BOTH] Determines whether terrain, 3D Tiles or both will be classified.\n * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Determines if this primitive\'s commands\' bounding spheres are shown.\n * @param {Boolean} [options.debugShowShadowVolume=false] For debugging only. Determines if the shadow volume for each geometry in the primitive is drawn. Must be <code>true</code> on\n *                  creation for the volumes to be created before the geometry is released or options.releaseGeometryInstance must be <code>false</code>.\n *\n * @see Primitive\n * @see GroundPrimitive\n * @see GeometryInstance\n * @see Appearance\n */\nfunction ClassificationPrimitive(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var geometryInstances = options.geometryInstances;\n\n  /**\n   * The geometry instance rendered with this primitive.  This may\n   * be <code>undefined</code> if <code>options.releaseGeometryInstances</code>\n   * is <code>true</code> when the primitive is constructed.\n   * <p>\n   * Changing this property after the primitive is rendered has no effect.\n   * </p>\n   * <p>\n   * Because of the rendering technique used, all geometry instances must be the same color.\n   * If there is an instance with a differing color, a <code>DeveloperError</code> will be thrown\n   * on the first attempt to render.\n   * </p>\n   *\n   * @readonly\n   * @type {Array|GeometryInstance}\n   *\n   * @default undefined\n   */\n  this.geometryInstances = geometryInstances;\n  /**\n   * Determines if the primitive will be shown.  This affects all geometry\n   * instances in the primitive.\n   *\n   * @type {Boolean}\n   *\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.show, true);\n  /**\n   * Determines whether terrain, 3D Tiles or both will be classified.\n   *\n   * @type {ClassificationType}\n   *\n   * @default ClassificationType.BOTH\n   */\n  this.classificationType = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.classificationType,\n    _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BOTH */ .Z.BOTH\n  );\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the bounding sphere for each draw command in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowBoundingVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.debugShowBoundingVolume,\n    false\n  );\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the shadow volume for each geometry in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowShadowVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.debugShowShadowVolume,\n    false\n  );\n  this._debugShowShadowVolume = false;\n\n  // These are used by GroundPrimitive to augment the shader and uniform map.\n  this._extruded = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options._extruded, false);\n  this._uniformMap = options._uniformMap;\n\n  this._sp = undefined;\n  this._spStencil = undefined;\n  this._spPick = undefined;\n  this._spColor = undefined;\n\n  this._spPick2D = undefined; // only derived if necessary\n  this._spColor2D = undefined; // only derived if necessary\n\n  this._rsStencilDepthPass = undefined;\n  this._rsStencilDepthPass3DTiles = undefined;\n  this._rsColorPass = undefined;\n  this._rsPickPass = undefined;\n\n  this._commandsIgnoreShow = [];\n\n  this._ready = false;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].defer */ .Z.defer();\n\n  this._primitive = undefined;\n  this._pickPrimitive = options._pickPrimitive;\n\n  // Set in update\n  this._hasSphericalExtentsAttribute = false;\n  this._hasPlanarExtentsAttributes = false;\n  this._hasPerColorAttribute = false;\n\n  this.appearance = options.appearance;\n\n  this._createBoundingVolumeFunction = options._createBoundingVolumeFunction;\n  this._updateAndQueueCommandsFunction =\n    options._updateAndQueueCommandsFunction;\n\n  this._usePickOffsets = false;\n\n  this._primitiveOptions = {\n    geometryInstances: undefined,\n    appearance: undefined,\n    vertexCacheOptimize: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.vertexCacheOptimize, false),\n    interleave: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.interleave, false),\n    releaseGeometryInstances: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n      options.releaseGeometryInstances,\n      true\n    ),\n    allowPicking: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.allowPicking, true),\n    asynchronous: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.asynchronous, true),\n    compressVertices: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.compressVertices, true),\n    _createBoundingVolumeFunction: undefined,\n    _createRenderStatesFunction: undefined,\n    _createShaderProgramFunction: undefined,\n    _createCommandsFunction: undefined,\n    _updateAndQueueCommandsFunction: undefined,\n    _createPickOffsets: true,\n  };\n}\n\nObject.defineProperties(ClassificationPrimitive.prototype, {\n  /**\n   * When <code>true</code>, geometry vertices are optimized for the pre and post-vertex-shader caches.\n   *\n   * @memberof ClassificationPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  vertexCacheOptimize: {\n    get: function () {\n      return this._primitiveOptions.vertexCacheOptimize;\n    },\n  },\n\n  /**\n   * Determines if geometry vertex attributes are interleaved, which can slightly improve rendering performance.\n   *\n   * @memberof ClassificationPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  interleave: {\n    get: function () {\n      return this._primitiveOptions.interleave;\n    },\n  },\n\n  /**\n   * When <code>true</code>, the primitive does not keep a reference to the input <code>geometryInstances</code> to save memory.\n   *\n   * @memberof ClassificationPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  releaseGeometryInstances: {\n    get: function () {\n      return this._primitiveOptions.releaseGeometryInstances;\n    },\n  },\n\n  /**\n   * When <code>true</code>, each geometry instance will only be pickable with {@link Scene#pick}.  When <code>false</code>, GPU memory is saved.\n   *\n   * @memberof ClassificationPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  allowPicking: {\n    get: function () {\n      return this._primitiveOptions.allowPicking;\n    },\n  },\n\n  /**\n   * Determines if the geometry instances will be created and batched on a web worker.\n   *\n   * @memberof ClassificationPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  asynchronous: {\n    get: function () {\n      return this._primitiveOptions.asynchronous;\n    },\n  },\n\n  /**\n   * When <code>true</code>, geometry vertices are compressed, which will save memory.\n   *\n   * @memberof ClassificationPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  compressVertices: {\n    get: function () {\n      return this._primitiveOptions.compressVertices;\n    },\n  },\n\n  /**\n   * Determines if the primitive is complete and ready to render.  If this property is\n   * true, the primitive will be rendered the next time that {@link ClassificationPrimitive#update}\n   * is called.\n   *\n   * @memberof ClassificationPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves when the primitive is ready to render.\n   * @memberof ClassificationPrimitive.prototype\n   * @type {Promise.<ClassificationPrimitive>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  /**\n   * Returns true if the ClassificationPrimitive needs a separate shader and commands for 2D.\n   * This is because texture coordinates on ClassificationPrimitives are computed differently,\n   * and are used for culling when multiple GeometryInstances are batched in one ClassificationPrimitive.\n   * @memberof ClassificationPrimitive.prototype\n   * @type {Boolean}\n   * @readonly\n   * @private\n   */\n  _needs2DShader: {\n    get: function () {\n      return (\n        this._hasPlanarExtentsAttributes || this._hasSphericalExtentsAttribute\n      );\n    },\n  },\n});\n\n/**\n * Determines if ClassificationPrimitive rendering is supported.\n *\n * @param {Scene} scene The scene.\n * @returns {Boolean} <code>true</code> if ClassificationPrimitives are supported; otherwise, returns <code>false</code>\n */\nClassificationPrimitive.isSupported = function (scene) {\n  return scene.context.stencilBuffer;\n};\n\nfunction getStencilDepthRenderState(enableStencil, mask3DTiles) {\n  var stencilFunction = mask3DTiles\n    ? _StencilFunction_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].EQUAL */ .Z.EQUAL\n    : _StencilFunction_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].ALWAYS */ .Z.ALWAYS;\n  return {\n    colorMask: {\n      red: false,\n      green: false,\n      blue: false,\n      alpha: false,\n    },\n    stencilTest: {\n      enabled: enableStencil,\n      frontFunction: stencilFunction,\n      frontOperation: {\n        fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].KEEP */ .Z.KEEP,\n        zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].DECREMENT_WRAP */ .Z.DECREMENT_WRAP,\n        zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].KEEP */ .Z.KEEP,\n      },\n      backFunction: stencilFunction,\n      backOperation: {\n        fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].KEEP */ .Z.KEEP,\n        zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].INCREMENT_WRAP */ .Z.INCREMENT_WRAP,\n        zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].KEEP */ .Z.KEEP,\n      },\n      reference: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK,\n      mask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK,\n    },\n    stencilMask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].CLASSIFICATION_MASK */ .Z.CLASSIFICATION_MASK,\n    depthTest: {\n      enabled: true,\n      func: _DepthFunction_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].LESS_OR_EQUAL */ .Z.LESS_OR_EQUAL,\n    },\n    depthMask: false,\n  };\n}\n\nfunction getColorRenderState(enableStencil) {\n  return {\n    stencilTest: {\n      enabled: enableStencil,\n      frontFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].NOT_EQUAL */ .Z.NOT_EQUAL,\n      frontOperation: {\n        fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n        zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n        zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n      },\n      backFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].NOT_EQUAL */ .Z.NOT_EQUAL,\n      backOperation: {\n        fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n        zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n        zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n      },\n      reference: 0,\n      mask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].CLASSIFICATION_MASK */ .Z.CLASSIFICATION_MASK,\n    },\n    stencilMask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].CLASSIFICATION_MASK */ .Z.CLASSIFICATION_MASK,\n    depthTest: {\n      enabled: false,\n    },\n    depthMask: false,\n    blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].PRE_MULTIPLIED_ALPHA_BLEND */ .Z.PRE_MULTIPLIED_ALPHA_BLEND,\n  };\n}\n\nvar pickRenderState = {\n  stencilTest: {\n    enabled: true,\n    frontFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].NOT_EQUAL */ .Z.NOT_EQUAL,\n    frontOperation: {\n      fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n      zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n      zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n    },\n    backFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].NOT_EQUAL */ .Z.NOT_EQUAL,\n    backOperation: {\n      fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n      zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n      zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].ZERO */ .Z.ZERO,\n    },\n    reference: 0,\n    mask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].CLASSIFICATION_MASK */ .Z.CLASSIFICATION_MASK,\n  },\n  stencilMask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].CLASSIFICATION_MASK */ .Z.CLASSIFICATION_MASK,\n  depthTest: {\n    enabled: false,\n  },\n  depthMask: false,\n};\n\nfunction createRenderStates(\n  classificationPrimitive,\n  context,\n  appearance,\n  twoPasses\n) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(classificationPrimitive._rsStencilDepthPass)) {\n    return;\n  }\n  var stencilEnabled = !classificationPrimitive.debugShowShadowVolume;\n\n  classificationPrimitive._rsStencilDepthPass = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(\n    getStencilDepthRenderState(stencilEnabled, false)\n  );\n  classificationPrimitive._rsStencilDepthPass3DTiles = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(\n    getStencilDepthRenderState(stencilEnabled, true)\n  );\n  classificationPrimitive._rsColorPass = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(\n    getColorRenderState(stencilEnabled, false)\n  );\n  classificationPrimitive._rsPickPass = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(pickRenderState);\n}\n\nfunction modifyForEncodedNormals(primitive, vertexShaderSource) {\n  if (!primitive.compressVertices) {\n    return vertexShaderSource;\n  }\n\n  if (\n    vertexShaderSource.search(/attribute\\s+vec3\\s+extrudeDirection;/g) !== -1\n  ) {\n    var attributeName = "compressedAttributes";\n\n    //only shadow volumes use extrudeDirection, and shadow volumes use vertexFormat: POSITION_ONLY so we don\'t need to check other attributes\n    var attributeDecl = "attribute vec2 " + attributeName + ";";\n\n    var globalDecl = "vec3 extrudeDirection;\\n";\n    var decode =\n      "    extrudeDirection = czm_octDecode(" + attributeName + ", 65535.0);\\n";\n\n    var modifiedVS = vertexShaderSource;\n    modifiedVS = modifiedVS.replace(\n      /attribute\\s+vec3\\s+extrudeDirection;/g,\n      ""\n    );\n    modifiedVS = _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].replaceMain */ .Z.replaceMain(\n      modifiedVS,\n      "czm_non_compressed_main"\n    );\n    var compressedMain =\n      "void main() \\n" +\n      "{ \\n" +\n      decode +\n      "    czm_non_compressed_main(); \\n" +\n      "}";\n\n    return [attributeDecl, globalDecl, modifiedVS, compressedMain].join("\\n");\n  }\n}\n\nfunction createShaderProgram(classificationPrimitive, frameState) {\n  var context = frameState.context;\n  var primitive = classificationPrimitive._primitive;\n  var vs = _Shaders_ShadowVolumeAppearanceVS_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z;\n  vs = classificationPrimitive._primitive._batchTable.getVertexShaderCallback()(\n    vs\n  );\n  vs = _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"]._appendDistanceDisplayConditionToShader */ .Z._appendDistanceDisplayConditionToShader(primitive, vs);\n  vs = _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"]._modifyShaderPosition */ .Z._modifyShaderPosition(\n    classificationPrimitive,\n    vs,\n    frameState.scene3DOnly\n  );\n  vs = _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"]._updateColorAttribute */ .Z._updateColorAttribute(primitive, vs);\n\n  var planarExtents = classificationPrimitive._hasPlanarExtentsAttributes;\n  var cullFragmentsUsingExtents =\n    planarExtents || classificationPrimitive._hasSphericalExtentsAttribute;\n\n  if (classificationPrimitive._extruded) {\n    vs = modifyForEncodedNormals(primitive, vs);\n  }\n\n  var extrudedDefine = classificationPrimitive._extruded\n    ? "EXTRUDED_GEOMETRY"\n    : "";\n\n  var vsSource = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    defines: [extrudedDefine],\n    sources: [vs],\n  });\n  var fsSource = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    sources: [_Shaders_ShadowVolumeFS_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z],\n  });\n  var attributeLocations =\n    classificationPrimitive._primitive._attributeLocations;\n\n  var shadowVolumeAppearance = new _ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z(\n    cullFragmentsUsingExtents,\n    planarExtents,\n    classificationPrimitive.appearance\n  );\n\n  classificationPrimitive._spStencil = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].replaceCache */ .Z.replaceCache({\n    context: context,\n    shaderProgram: classificationPrimitive._spStencil,\n    vertexShaderSource: vsSource,\n    fragmentShaderSource: fsSource,\n    attributeLocations: attributeLocations,\n  });\n\n  if (classificationPrimitive._primitive.allowPicking) {\n    var vsPick = _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].createPickVertexShaderSource */ .Z.createPickVertexShaderSource(vs);\n    vsPick = _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"]._appendShowToShader */ .Z._appendShowToShader(primitive, vsPick);\n    vsPick = _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"]._updatePickColorAttribute */ .Z._updatePickColorAttribute(vsPick);\n\n    var pickFS3D = shadowVolumeAppearance.createPickFragmentShader(false);\n    var pickVS3D = shadowVolumeAppearance.createPickVertexShader(\n      [extrudedDefine],\n      vsPick,\n      false,\n      frameState.mapProjection\n    );\n\n    classificationPrimitive._spPick = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].replaceCache */ .Z.replaceCache({\n      context: context,\n      shaderProgram: classificationPrimitive._spPick,\n      vertexShaderSource: pickVS3D,\n      fragmentShaderSource: pickFS3D,\n      attributeLocations: attributeLocations,\n    });\n\n    // Derive a 2D pick shader if the primitive uses texture coordinate-based fragment culling,\n    // since texture coordinates are computed differently in 2D.\n    if (cullFragmentsUsingExtents) {\n      var pickProgram2D = context.shaderCache.getDerivedShaderProgram(\n        classificationPrimitive._spPick,\n        "2dPick"\n      );\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(pickProgram2D)) {\n        var pickFS2D = shadowVolumeAppearance.createPickFragmentShader(true);\n        var pickVS2D = shadowVolumeAppearance.createPickVertexShader(\n          [extrudedDefine],\n          vsPick,\n          true,\n          frameState.mapProjection\n        );\n\n        pickProgram2D = context.shaderCache.createDerivedShaderProgram(\n          classificationPrimitive._spPick,\n          "2dPick",\n          {\n            vertexShaderSource: pickVS2D,\n            fragmentShaderSource: pickFS2D,\n            attributeLocations: attributeLocations,\n          }\n        );\n      }\n      classificationPrimitive._spPick2D = pickProgram2D;\n    }\n  } else {\n    classificationPrimitive._spPick = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].fromCache */ .Z.fromCache({\n      context: context,\n      vertexShaderSource: vsSource,\n      fragmentShaderSource: fsSource,\n      attributeLocations: attributeLocations,\n    });\n  }\n\n  vs = _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"]._appendShowToShader */ .Z._appendShowToShader(primitive, vs);\n  vsSource = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n    defines: [extrudedDefine],\n    sources: [vs],\n  });\n\n  classificationPrimitive._sp = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].replaceCache */ .Z.replaceCache({\n    context: context,\n    shaderProgram: classificationPrimitive._sp,\n    vertexShaderSource: vsSource,\n    fragmentShaderSource: fsSource,\n    attributeLocations: attributeLocations,\n  });\n\n  // Create a fragment shader that computes only required material hookups using screen space techniques\n  var fsColorSource = shadowVolumeAppearance.createFragmentShader(false);\n  var vsColorSource = shadowVolumeAppearance.createVertexShader(\n    [extrudedDefine],\n    vs,\n    false,\n    frameState.mapProjection\n  );\n\n  classificationPrimitive._spColor = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].replaceCache */ .Z.replaceCache({\n    context: context,\n    shaderProgram: classificationPrimitive._spColor,\n    vertexShaderSource: vsColorSource,\n    fragmentShaderSource: fsColorSource,\n    attributeLocations: attributeLocations,\n  });\n\n  // Derive a 2D shader if the primitive uses texture coordinate-based fragment culling,\n  // since texture coordinates are computed differently in 2D.\n  // Any material that uses texture coordinates will also equip texture coordinate-based fragment culling.\n  if (cullFragmentsUsingExtents) {\n    var colorProgram2D = context.shaderCache.getDerivedShaderProgram(\n      classificationPrimitive._spColor,\n      "2dColor"\n    );\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(colorProgram2D)) {\n      var fsColorSource2D = shadowVolumeAppearance.createFragmentShader(true);\n      var vsColorSource2D = shadowVolumeAppearance.createVertexShader(\n        [extrudedDefine],\n        vs,\n        true,\n        frameState.mapProjection\n      );\n\n      colorProgram2D = context.shaderCache.createDerivedShaderProgram(\n        classificationPrimitive._spColor,\n        "2dColor",\n        {\n          vertexShaderSource: vsColorSource2D,\n          fragmentShaderSource: fsColorSource2D,\n          attributeLocations: attributeLocations,\n        }\n      );\n    }\n    classificationPrimitive._spColor2D = colorProgram2D;\n  }\n}\n\nfunction createColorCommands(classificationPrimitive, colorCommands) {\n  var primitive = classificationPrimitive._primitive;\n  var length = primitive._va.length * 2; // each geometry (pack of vertex attributes) needs 2 commands: front/back stencils and fill\n  colorCommands.length = length;\n\n  var i;\n  var command;\n  var derivedCommand;\n  var vaIndex = 0;\n  var uniformMap = primitive._batchTable.getUniformMapCallback()(\n    classificationPrimitive._uniformMap\n  );\n\n  var needs2DShader = classificationPrimitive._needs2DShader;\n\n  for (i = 0; i < length; i += 2) {\n    var vertexArray = primitive._va[vaIndex++];\n\n    // Stencil depth command\n    command = colorCommands[i];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(command)) {\n      command = colorCommands[i] = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n        owner: classificationPrimitive,\n        primitiveType: primitive._primitiveType,\n      });\n    }\n\n    command.vertexArray = vertexArray;\n    command.renderState = classificationPrimitive._rsStencilDepthPass;\n    command.shaderProgram = classificationPrimitive._sp;\n    command.uniformMap = uniformMap;\n    command.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].TERRAIN_CLASSIFICATION */ .Z.TERRAIN_CLASSIFICATION;\n\n    derivedCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n      command,\n      command.derivedCommands.tileset\n    );\n    derivedCommand.renderState =\n      classificationPrimitive._rsStencilDepthPass3DTiles;\n    derivedCommand.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].CESIUM_3D_TILE_CLASSIFICATION */ .Z.CESIUM_3D_TILE_CLASSIFICATION;\n    command.derivedCommands.tileset = derivedCommand;\n\n    // Color command\n    command = colorCommands[i + 1];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(command)) {\n      command = colorCommands[i + 1] = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n        owner: classificationPrimitive,\n        primitiveType: primitive._primitiveType,\n      });\n    }\n\n    command.vertexArray = vertexArray;\n    command.renderState = classificationPrimitive._rsColorPass;\n    command.shaderProgram = classificationPrimitive._spColor;\n    command.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].TERRAIN_CLASSIFICATION */ .Z.TERRAIN_CLASSIFICATION;\n\n    var appearance = classificationPrimitive.appearance;\n    var material = appearance.material;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(material)) {\n      uniformMap = (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(uniformMap, material._uniforms);\n    }\n\n    command.uniformMap = uniformMap;\n\n    derivedCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n      command,\n      command.derivedCommands.tileset\n    );\n    derivedCommand.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].CESIUM_3D_TILE_CLASSIFICATION */ .Z.CESIUM_3D_TILE_CLASSIFICATION;\n    command.derivedCommands.tileset = derivedCommand;\n\n    // Derive for 2D if texture coordinates are ever computed\n    if (needs2DShader) {\n      // First derive from the terrain command\n      var derived2DCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n        command,\n        command.derivedCommands.appearance2D\n      );\n      derived2DCommand.shaderProgram = classificationPrimitive._spColor2D;\n      command.derivedCommands.appearance2D = derived2DCommand;\n\n      // Then derive from the 3D Tiles command\n      derived2DCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n        derivedCommand,\n        derivedCommand.derivedCommands.appearance2D\n      );\n      derived2DCommand.shaderProgram = classificationPrimitive._spColor2D;\n      derivedCommand.derivedCommands.appearance2D = derived2DCommand;\n    }\n  }\n\n  var commandsIgnoreShow = classificationPrimitive._commandsIgnoreShow;\n  var spStencil = classificationPrimitive._spStencil;\n\n  var commandIndex = 0;\n  length = commandsIgnoreShow.length = length / 2;\n\n  for (var j = 0; j < length; ++j) {\n    var commandIgnoreShow = (commandsIgnoreShow[j] = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n      colorCommands[commandIndex],\n      commandsIgnoreShow[j]\n    ));\n    commandIgnoreShow.shaderProgram = spStencil;\n    commandIgnoreShow.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW */ .Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW;\n\n    commandIndex += 2;\n  }\n}\n\nfunction createPickCommands(classificationPrimitive, pickCommands) {\n  var usePickOffsets = classificationPrimitive._usePickOffsets;\n\n  var primitive = classificationPrimitive._primitive;\n  var length = primitive._va.length * 2; // each geometry (pack of vertex attributes) needs 2 commands: front/back stencils and fill\n\n  // Fallback for batching same-color geometry instances\n  var pickOffsets;\n  var pickIndex = 0;\n  var pickOffset;\n  if (usePickOffsets) {\n    pickOffsets = primitive._pickOffsets;\n    length = pickOffsets.length * 2;\n  }\n\n  pickCommands.length = length;\n\n  var j;\n  var command;\n  var derivedCommand;\n  var vaIndex = 0;\n  var uniformMap = primitive._batchTable.getUniformMapCallback()(\n    classificationPrimitive._uniformMap\n  );\n\n  var needs2DShader = classificationPrimitive._needs2DShader;\n\n  for (j = 0; j < length; j += 2) {\n    var vertexArray = primitive._va[vaIndex++];\n    if (usePickOffsets) {\n      pickOffset = pickOffsets[pickIndex++];\n      vertexArray = primitive._va[pickOffset.index];\n    }\n\n    // Stencil depth command\n    command = pickCommands[j];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(command)) {\n      command = pickCommands[j] = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n        owner: classificationPrimitive,\n        primitiveType: primitive._primitiveType,\n        pickOnly: true,\n      });\n    }\n\n    command.vertexArray = vertexArray;\n    command.renderState = classificationPrimitive._rsStencilDepthPass;\n    command.shaderProgram = classificationPrimitive._sp;\n    command.uniformMap = uniformMap;\n    command.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].TERRAIN_CLASSIFICATION */ .Z.TERRAIN_CLASSIFICATION;\n    if (usePickOffsets) {\n      command.offset = pickOffset.offset;\n      command.count = pickOffset.count;\n    }\n\n    // Derive for 3D Tiles classification\n    derivedCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n      command,\n      command.derivedCommands.tileset\n    );\n    derivedCommand.renderState =\n      classificationPrimitive._rsStencilDepthPass3DTiles;\n    derivedCommand.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].CESIUM_3D_TILE_CLASSIFICATION */ .Z.CESIUM_3D_TILE_CLASSIFICATION;\n    command.derivedCommands.tileset = derivedCommand;\n\n    // Pick color command\n    command = pickCommands[j + 1];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(command)) {\n      command = pickCommands[j + 1] = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n        owner: classificationPrimitive,\n        primitiveType: primitive._primitiveType,\n        pickOnly: true,\n      });\n    }\n\n    command.vertexArray = vertexArray;\n    command.renderState = classificationPrimitive._rsPickPass;\n    command.shaderProgram = classificationPrimitive._spPick;\n    command.uniformMap = uniformMap;\n    command.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].TERRAIN_CLASSIFICATION */ .Z.TERRAIN_CLASSIFICATION;\n    if (usePickOffsets) {\n      command.offset = pickOffset.offset;\n      command.count = pickOffset.count;\n    }\n\n    derivedCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n      command,\n      command.derivedCommands.tileset\n    );\n    derivedCommand.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].CESIUM_3D_TILE_CLASSIFICATION */ .Z.CESIUM_3D_TILE_CLASSIFICATION;\n    command.derivedCommands.tileset = derivedCommand;\n\n    // Derive for 2D if texture coordinates are ever computed\n    if (needs2DShader) {\n      // First derive from the terrain command\n      var derived2DCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n        command,\n        command.derivedCommands.pick2D\n      );\n      derived2DCommand.shaderProgram = classificationPrimitive._spPick2D;\n      command.derivedCommands.pick2D = derived2DCommand;\n\n      // Then derive from the 3D Tiles command\n      derived2DCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shallowClone */ .Z.shallowClone(\n        derivedCommand,\n        derivedCommand.derivedCommands.pick2D\n      );\n      derived2DCommand.shaderProgram = classificationPrimitive._spPick2D;\n      derivedCommand.derivedCommands.pick2D = derived2DCommand;\n    }\n  }\n}\n\nfunction createCommands(\n  classificationPrimitive,\n  appearance,\n  material,\n  translucent,\n  twoPasses,\n  colorCommands,\n  pickCommands\n) {\n  createColorCommands(classificationPrimitive, colorCommands);\n  createPickCommands(classificationPrimitive, pickCommands);\n}\n\nfunction boundingVolumeIndex(commandIndex, length) {\n  return Math.floor((commandIndex % length) / 2);\n}\n\nfunction updateAndQueueRenderCommand(\n  command,\n  frameState,\n  modelMatrix,\n  cull,\n  boundingVolume,\n  debugShowBoundingVolume\n) {\n  command.modelMatrix = modelMatrix;\n  command.boundingVolume = boundingVolume;\n  command.cull = cull;\n  command.debugShowBoundingVolume = debugShowBoundingVolume;\n\n  frameState.commandList.push(command);\n}\n\nfunction updateAndQueuePickCommand(\n  command,\n  frameState,\n  modelMatrix,\n  cull,\n  boundingVolume\n) {\n  command.modelMatrix = modelMatrix;\n  command.boundingVolume = boundingVolume;\n  command.cull = cull;\n\n  frameState.commandList.push(command);\n}\n\nfunction updateAndQueueCommands(\n  classificationPrimitive,\n  frameState,\n  colorCommands,\n  pickCommands,\n  modelMatrix,\n  cull,\n  debugShowBoundingVolume,\n  twoPasses\n) {\n  var primitive = classificationPrimitive._primitive;\n  _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"]._updateBoundingVolumes */ .Z._updateBoundingVolumes(primitive, frameState, modelMatrix);\n\n  var boundingVolumes;\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    boundingVolumes = primitive._boundingSphereWC;\n  } else if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    boundingVolumes = primitive._boundingSphereCV;\n  } else if (\n    frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].SCENE2D */ .Z.SCENE2D &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(primitive._boundingSphere2D)\n  ) {\n    boundingVolumes = primitive._boundingSphere2D;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(primitive._boundingSphereMorph)) {\n    boundingVolumes = primitive._boundingSphereMorph;\n  }\n\n  var classificationType = classificationPrimitive.classificationType;\n  var queueTerrainCommands =\n    classificationType !== _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE;\n  var queue3DTilesCommands = classificationType !== _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].TERRAIN */ .Z.TERRAIN;\n\n  var passes = frameState.passes;\n\n  var i;\n  var boundingVolume;\n  var command;\n\n  if (passes.render) {\n    var colorLength = colorCommands.length;\n    for (i = 0; i < colorLength; ++i) {\n      boundingVolume = boundingVolumes[boundingVolumeIndex(i, colorLength)];\n      if (queueTerrainCommands) {\n        command = colorCommands[i];\n        updateAndQueueRenderCommand(\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n      if (queue3DTilesCommands) {\n        command = colorCommands[i].derivedCommands.tileset;\n        updateAndQueueRenderCommand(\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n    }\n\n    if (frameState.invertClassification) {\n      var ignoreShowCommands = classificationPrimitive._commandsIgnoreShow;\n      var ignoreShowCommandsLength = ignoreShowCommands.length;\n      for (i = 0; i < ignoreShowCommandsLength; ++i) {\n        boundingVolume = boundingVolumes[i];\n        command = ignoreShowCommands[i];\n        updateAndQueueRenderCommand(\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n    }\n  }\n\n  if (passes.pick) {\n    var pickLength = pickCommands.length;\n    var pickOffsets = primitive._pickOffsets;\n    for (i = 0; i < pickLength; ++i) {\n      var pickOffset = pickOffsets[boundingVolumeIndex(i, pickLength)];\n      boundingVolume = boundingVolumes[pickOffset.index];\n      if (queueTerrainCommands) {\n        command = pickCommands[i];\n        updateAndQueuePickCommand(\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume\n        );\n      }\n      if (queue3DTilesCommands) {\n        command = pickCommands[i].derivedCommands.tileset;\n        updateAndQueuePickCommand(\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume\n        );\n      }\n    }\n  }\n}\n\n/**\n * Called when {@link Viewer} or {@link CesiumWidget} render the scene to\n * get the draw commands needed to render this primitive.\n * <p>\n * Do not call this function directly.  This is documented just to\n * list the exceptions that may be propagated when the scene is rendered:\n * </p>\n *\n * @exception {DeveloperError} All instance geometries must have the same primitiveType.\n * @exception {DeveloperError} Appearance and material have a uniform with the same name.\n * @exception {DeveloperError} Not all of the geometry instances have the same color attribute.\n */\nClassificationPrimitive.prototype.update = function (frameState) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(this._primitive) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(this.geometryInstances)) {\n    return;\n  }\n\n  var appearance = this.appearance;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(appearance) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(appearance.material)) {\n    appearance.material.update(frameState.context);\n  }\n\n  var that = this;\n  var primitiveOptions = this._primitiveOptions;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(this._primitive)) {\n    var instances = Array.isArray(this.geometryInstances)\n      ? this.geometryInstances\n      : [this.geometryInstances];\n    var length = instances.length;\n\n    var i;\n    var instance;\n    var attributes;\n\n    var hasPerColorAttribute = false;\n    var allColorsSame = true;\n    var firstColor;\n    var hasSphericalExtentsAttribute = false;\n    var hasPlanarExtentsAttributes = false;\n\n    if (length > 0) {\n      attributes = instances[0].attributes;\n      // Not expecting these to be set by users, should only be set via GroundPrimitive.\n      // So don\'t check for mismatch.\n      hasSphericalExtentsAttribute = _ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].hasAttributesForSphericalExtents */ .Z.hasAttributesForSphericalExtents(\n        attributes\n      );\n      hasPlanarExtentsAttributes = _ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].hasAttributesForTextureCoordinatePlanes */ .Z.hasAttributesForTextureCoordinatePlanes(\n        attributes\n      );\n      firstColor = attributes.color;\n    }\n\n    for (i = 0; i < length; i++) {\n      instance = instances[i];\n      var color = instance.attributes.color;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(color)) {\n        hasPerColorAttribute = true;\n      }\n      //>>includeStart(\'debug\', pragmas.debug);\n      else if (hasPerColorAttribute) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "All GeometryInstances must have color attributes to use per-instance color."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      allColorsSame =\n        allColorsSame &&\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(color) &&\n        _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equals */ .Z.equals(firstColor, color);\n    }\n\n    // If no attributes exist for computing spherical extents or fragment culling,\n    // throw if the colors aren\'t all the same.\n    if (\n      !allColorsSame &&\n      !hasSphericalExtentsAttribute &&\n      !hasPlanarExtentsAttributes\n    ) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n        "All GeometryInstances must have the same color attribute except via GroundPrimitives"\n      );\n    }\n\n    // default to a color appearance\n    if (hasPerColorAttribute && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(appearance)) {\n      appearance = new _PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z({\n        flat: true,\n      });\n      this.appearance = appearance;\n    }\n\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (\n      !hasPerColorAttribute &&\n      appearance instanceof _PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z\n    ) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n        "PerInstanceColorAppearance requires color GeometryInstanceAttributes on all GeometryInstances"\n      );\n    }\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(appearance.material) &&\n      !hasSphericalExtentsAttribute &&\n      !hasPlanarExtentsAttributes\n    ) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n        "Materials on ClassificationPrimitives are not supported except via GroundPrimitives"\n      );\n    }\n    //>>includeEnd(\'debug\');\n\n    this._usePickOffsets =\n      !hasSphericalExtentsAttribute && !hasPlanarExtentsAttributes;\n    this._hasSphericalExtentsAttribute = hasSphericalExtentsAttribute;\n    this._hasPlanarExtentsAttributes = hasPlanarExtentsAttributes;\n    this._hasPerColorAttribute = hasPerColorAttribute;\n\n    var geometryInstances = new Array(length);\n    for (i = 0; i < length; ++i) {\n      instance = instances[i];\n      geometryInstances[i] = new _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n        geometry: instance.geometry,\n        attributes: instance.attributes,\n        modelMatrix: instance.modelMatrix,\n        id: instance.id,\n        pickPrimitive: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this._pickPrimitive, that),\n      });\n    }\n\n    primitiveOptions.appearance = appearance;\n    primitiveOptions.geometryInstances = geometryInstances;\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(this._createBoundingVolumeFunction)) {\n      primitiveOptions._createBoundingVolumeFunction = function (\n        frameState,\n        geometry\n      ) {\n        that._createBoundingVolumeFunction(frameState, geometry);\n      };\n    }\n\n    primitiveOptions._createRenderStatesFunction = function (\n      primitive,\n      context,\n      appearance,\n      twoPasses\n    ) {\n      createRenderStates(that, context);\n    };\n    primitiveOptions._createShaderProgramFunction = function (\n      primitive,\n      frameState,\n      appearance\n    ) {\n      createShaderProgram(that, frameState);\n    };\n    primitiveOptions._createCommandsFunction = function (\n      primitive,\n      appearance,\n      material,\n      translucent,\n      twoPasses,\n      colorCommands,\n      pickCommands\n    ) {\n      createCommands(\n        that,\n        undefined,\n        undefined,\n        true,\n        false,\n        colorCommands,\n        pickCommands\n      );\n    };\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(this._updateAndQueueCommandsFunction)) {\n      primitiveOptions._updateAndQueueCommandsFunction = function (\n        primitive,\n        frameState,\n        colorCommands,\n        pickCommands,\n        modelMatrix,\n        cull,\n        debugShowBoundingVolume,\n        twoPasses\n      ) {\n        that._updateAndQueueCommandsFunction(\n          primitive,\n          frameState,\n          colorCommands,\n          pickCommands,\n          modelMatrix,\n          cull,\n          debugShowBoundingVolume,\n          twoPasses\n        );\n      };\n    } else {\n      primitiveOptions._updateAndQueueCommandsFunction = function (\n        primitive,\n        frameState,\n        colorCommands,\n        pickCommands,\n        modelMatrix,\n        cull,\n        debugShowBoundingVolume,\n        twoPasses\n      ) {\n        updateAndQueueCommands(\n          that,\n          frameState,\n          colorCommands,\n          pickCommands,\n          modelMatrix,\n          cull,\n          debugShowBoundingVolume,\n          twoPasses\n        );\n      };\n    }\n\n    this._primitive = new _Primitive_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z(primitiveOptions);\n    this._primitive.readyPromise.then(function (primitive) {\n      that._ready = true;\n\n      if (that.releaseGeometryInstances) {\n        that.geometryInstances = undefined;\n      }\n\n      var error = primitive._error;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(error)) {\n        that._readyPromise.resolve(that);\n      } else {\n        that._readyPromise.reject(error);\n      }\n    });\n  }\n\n  if (\n    this.debugShowShadowVolume &&\n    !this._debugShowShadowVolume &&\n    this._ready\n  ) {\n    this._debugShowShadowVolume = true;\n    this._rsStencilDepthPass = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(\n      getStencilDepthRenderState(false, false)\n    );\n    this._rsStencilDepthPass3DTiles = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(\n      getStencilDepthRenderState(false, true)\n    );\n    this._rsColorPass = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(getColorRenderState(false));\n  } else if (!this.debugShowShadowVolume && this._debugShowShadowVolume) {\n    this._debugShowShadowVolume = false;\n    this._rsStencilDepthPass = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(\n      getStencilDepthRenderState(true, false)\n    );\n    this._rsStencilDepthPass3DTiles = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(\n      getStencilDepthRenderState(true, true)\n    );\n    this._rsColorPass = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fromCache */ .Z.fromCache(getColorRenderState(true));\n  }\n  // Update primitive appearance\n  if (this._primitive.appearance !== appearance) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    // Check if the appearance is supported by the geometry attributes\n    if (\n      !this._hasSphericalExtentsAttribute &&\n      !this._hasPlanarExtentsAttributes &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(appearance.material)\n    ) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n        "Materials on ClassificationPrimitives are not supported except via GroundPrimitive"\n      );\n    }\n    if (\n      !this._hasPerColorAttribute &&\n      appearance instanceof _PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z\n    ) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n        "PerInstanceColorAppearance requires color GeometryInstanceAttribute"\n      );\n    }\n    //>>includeEnd(\'debug\');\n    this._primitive.appearance = appearance;\n  }\n\n  this._primitive.show = this.show;\n  this._primitive.debugShowBoundingVolume = this.debugShowBoundingVolume;\n  this._primitive.update(frameState);\n};\n\n/**\n * Returns the modifiable per-instance attributes for a {@link GeometryInstance}.\n *\n * @param {*} id The id of the {@link GeometryInstance}.\n * @returns {Object} The typed array in the attribute\'s format or undefined if the is no instance with id.\n *\n * @exception {DeveloperError} must call update before calling getGeometryInstanceAttributes.\n *\n * @example\n * var attributes = primitive.getGeometryInstanceAttributes(\'an id\');\n * attributes.color = Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.AQUA);\n * attributes.show = Cesium.ShowGeometryInstanceAttribute.toValue(true);\n */\nClassificationPrimitive.prototype.getGeometryInstanceAttributes = function (\n  id\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z)(this._primitive)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "must call update before calling getGeometryInstanceAttributes"\n    );\n  }\n  //>>includeEnd(\'debug\');\n  return this._primitive.getGeometryInstanceAttributes(id);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <p>\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n * </p>\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see ClassificationPrimitive#destroy\n */\nClassificationPrimitive.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <p>\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n * </p>\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * e = e && e.destroy();\n *\n * @see ClassificationPrimitive#isDestroyed\n */\nClassificationPrimitive.prototype.destroy = function () {\n  this._primitive = this._primitive && this._primitive.destroy();\n  this._sp = this._sp && this._sp.destroy();\n  this._spPick = this._spPick && this._spPick.destroy();\n  this._spColor = this._spColor && this._spColor.destroy();\n\n  // Derived programs, destroyed above if they existed.\n  this._spPick2D = undefined;\n  this._spColor2D = undefined;\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ClassificationPrimitive);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBLHlEQUFlLHVCQUF1QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0NsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLmpzPzJhZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBjb21iaW5lIGZyb20gXCIuLi9Db3JlL2NvbWJpbmUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBHZW9tZXRyeUluc3RhbmNlIGZyb20gXCIuLi9Db3JlL0dlb21ldHJ5SW5zdGFuY2UuanNcIjtcbmltcG9ydCBEcmF3Q29tbWFuZCBmcm9tIFwiLi4vUmVuZGVyZXIvRHJhd0NvbW1hbmQuanNcIjtcbmltcG9ydCBQYXNzIGZyb20gXCIuLi9SZW5kZXJlci9QYXNzLmpzXCI7XG5pbXBvcnQgUmVuZGVyU3RhdGUgZnJvbSBcIi4uL1JlbmRlcmVyL1JlbmRlclN0YXRlLmpzXCI7XG5pbXBvcnQgU2hhZGVyUHJvZ3JhbSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyUHJvZ3JhbS5qc1wiO1xuaW1wb3J0IFNoYWRlclNvdXJjZSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyU291cmNlLmpzXCI7XG5pbXBvcnQgU2hhZG93Vm9sdW1lQXBwZWFyYW5jZVZTIGZyb20gXCIuLi9TaGFkZXJzL1NoYWRvd1ZvbHVtZUFwcGVhcmFuY2VWUy5qc1wiO1xuaW1wb3J0IFNoYWRvd1ZvbHVtZUZTIGZyb20gXCIuLi9TaGFkZXJzL1NoYWRvd1ZvbHVtZUZTLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5pbXBvcnQgQmxlbmRpbmdTdGF0ZSBmcm9tIFwiLi9CbGVuZGluZ1N0YXRlLmpzXCI7XG5pbXBvcnQgQ2xhc3NpZmljYXRpb25UeXBlIGZyb20gXCIuL0NsYXNzaWZpY2F0aW9uVHlwZS5qc1wiO1xuaW1wb3J0IERlcHRoRnVuY3Rpb24gZnJvbSBcIi4vRGVwdGhGdW5jdGlvbi5qc1wiO1xuaW1wb3J0IFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlIGZyb20gXCIuL1Blckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlLmpzXCI7XG5pbXBvcnQgUHJpbWl0aXZlIGZyb20gXCIuL1ByaW1pdGl2ZS5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi9TY2VuZU1vZGUuanNcIjtcbmltcG9ydCBTaGFkb3dWb2x1bWVBcHBlYXJhbmNlIGZyb20gXCIuL1NoYWRvd1ZvbHVtZUFwcGVhcmFuY2UuanNcIjtcbmltcG9ydCBTdGVuY2lsQ29uc3RhbnRzIGZyb20gXCIuL1N0ZW5jaWxDb25zdGFudHMuanNcIjtcbmltcG9ydCBTdGVuY2lsRnVuY3Rpb24gZnJvbSBcIi4vU3RlbmNpbEZ1bmN0aW9uLmpzXCI7XG5pbXBvcnQgU3RlbmNpbE9wZXJhdGlvbiBmcm9tIFwiLi9TdGVuY2lsT3BlcmF0aW9uLmpzXCI7XG5cbi8qKlxuICogQSBjbGFzc2lmaWNhdGlvbiBwcmltaXRpdmUgcmVwcmVzZW50cyBhIHZvbHVtZSBlbmNsb3NpbmcgZ2VvbWV0cnkgaW4gdGhlIHtAbGluayBTY2VuZX0gdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gKiA8cD5cbiAqIEEgcHJpbWl0aXZlIGNvbWJpbmVzIGdlb21ldHJ5IGluc3RhbmNlcyB3aXRoIGFuIHtAbGluayBBcHBlYXJhbmNlfSB0aGF0IGRlc2NyaWJlcyB0aGUgZnVsbCBzaGFkaW5nLCBpbmNsdWRpbmdcbiAqIHtAbGluayBNYXRlcmlhbH0gYW5kIHtAbGluayBSZW5kZXJTdGF0ZX0uICBSb3VnaGx5LCB0aGUgZ2VvbWV0cnkgaW5zdGFuY2UgZGVmaW5lcyB0aGUgc3RydWN0dXJlIGFuZCBwbGFjZW1lbnQsXG4gKiBhbmQgdGhlIGFwcGVhcmFuY2UgZGVmaW5lcyB0aGUgdmlzdWFsIGNoYXJhY3RlcmlzdGljcy4gIERlY291cGxpbmcgZ2VvbWV0cnkgYW5kIGFwcGVhcmFuY2UgYWxsb3dzIHVzIHRvIG1peFxuICogYW5kIG1hdGNoIG1vc3Qgb2YgdGhlbSBhbmQgYWRkIGEgbmV3IGdlb21ldHJ5IG9yIGFwcGVhcmFuY2UgaW5kZXBlbmRlbnRseSBvZiBlYWNoIG90aGVyLlxuICogT25seSB7QGxpbmsgUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2V9IHdpdGggdGhlIHNhbWUgY29sb3IgYWNyb3NzIGFsbCBpbnN0YW5jZXMgaXMgc3VwcG9ydGVkIGF0IHRoaXMgdGltZSB3aGVuIHVzaW5nXG4gKiBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZSBkaXJlY3RseS5cbiAqIEZvciBmdWxsIHtAbGluayBBcHBlYXJhbmNlfSBzdXBwb3J0IHdoZW4gY2xhc3NpZnlpbmcgdGVycmFpbiBvciAzRCBUaWxlcyB1c2Uge0BsaW5rIEdyb3VuZFByaW1pdGl2ZX0gaW5zdGVhZC5cbiAqIDwvcD5cbiAqIDxwPlxuICogRm9yIGNvcnJlY3QgcmVuZGVyaW5nLCB0aGlzIGZlYXR1cmUgcmVxdWlyZXMgdGhlIEVYVF9mcmFnX2RlcHRoIFdlYkdMIGV4dGVuc2lvbi4gRm9yIGhhcmR3YXJlIHRoYXQgZG8gbm90IHN1cHBvcnQgdGhpcyBleHRlbnNpb24sIHRoZXJlXG4gKiB3aWxsIGJlIHJlbmRlcmluZyBhcnRpZmFjdHMgZm9yIHNvbWUgdmlld2luZyBhbmdsZXMuXG4gKiA8L3A+XG4gKiA8cD5cbiAqIFZhbGlkIGdlb21ldHJpZXMgYXJlIHtAbGluayBCb3hHZW9tZXRyeX0sIHtAbGluayBDeWxpbmRlckdlb21ldHJ5fSwge0BsaW5rIEVsbGlwc29pZEdlb21ldHJ5fSwge0BsaW5rIFBvbHlsaW5lVm9sdW1lR2VvbWV0cnl9LCBhbmQge0BsaW5rIFNwaGVyZUdlb21ldHJ5fS5cbiAqIDwvcD5cbiAqIDxwPlxuICogR2VvbWV0cmllcyB0aGF0IGZvbGxvdyB0aGUgc3VyZmFjZSBvZiB0aGUgZWxsaXBzb2lkLCBzdWNoIGFzIHtAbGluayBDaXJjbGVHZW9tZXRyeX0sIHtAbGluayBDb3JyaWRvckdlb21ldHJ5fSwge0BsaW5rIEVsbGlwc2VHZW9tZXRyeX0sIHtAbGluayBQb2x5Z29uR2VvbWV0cnl9LCBhbmQge0BsaW5rIFJlY3RhbmdsZUdlb21ldHJ5fSxcbiAqIGFyZSBhbHNvIHZhbGlkIGlmIHRoZXkgYXJlIGV4dHJ1ZGVkIHZvbHVtZXM7IG90aGVyd2lzZSwgdGhleSB3aWxsIG5vdCBiZSByZW5kZXJlZC5cbiAqIDwvcD5cbiAqXG4gKiBAYWxpYXMgQ2xhc3NpZmljYXRpb25QcmltaXRpdmVcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtBcnJheXxHZW9tZXRyeUluc3RhbmNlfSBbb3B0aW9ucy5nZW9tZXRyeUluc3RhbmNlc10gVGhlIGdlb21ldHJ5IGluc3RhbmNlcyB0byByZW5kZXIuIFRoaXMgY2FuIGVpdGhlciBiZSBhIHNpbmdsZSBpbnN0YW5jZSBvciBhbiBhcnJheSBvZiBsZW5ndGggb25lLlxuICogQHBhcmFtIHtBcHBlYXJhbmNlfSBbb3B0aW9ucy5hcHBlYXJhbmNlXSBUaGUgYXBwZWFyYW5jZSB1c2VkIHRvIHJlbmRlciB0aGUgcHJpbWl0aXZlLiBEZWZhdWx0cyB0byBQZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZSB3aGVuIEdlb21ldHJ5SW5zdGFuY2VzIGhhdmUgYSBjb2xvciBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNob3c9dHJ1ZV0gRGV0ZXJtaW5lcyBpZiB0aGlzIHByaW1pdGl2ZSB3aWxsIGJlIHNob3duLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy52ZXJ0ZXhDYWNoZU9wdGltaXplPWZhbHNlXSBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBnZW9tZXRyeSB2ZXJ0aWNlcyBhcmUgb3B0aW1pemVkIGZvciB0aGUgcHJlIGFuZCBwb3N0LXZlcnRleC1zaGFkZXIgY2FjaGVzLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pbnRlcmxlYXZlPWZhbHNlXSBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBnZW9tZXRyeSB2ZXJ0ZXggYXR0cmlidXRlcyBhcmUgaW50ZXJsZWF2ZWQsIHdoaWNoIGNhbiBzbGlnaHRseSBpbXByb3ZlIHJlbmRlcmluZyBwZXJmb3JtYW5jZSBidXQgaW5jcmVhc2VzIGxvYWQgdGltZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY29tcHJlc3NWZXJ0aWNlcz10cnVlXSBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCB0aGUgZ2VvbWV0cnkgdmVydGljZXMgYXJlIGNvbXByZXNzZWQsIHdoaWNoIHdpbGwgc2F2ZSBtZW1vcnkuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlcz10cnVlXSBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCB0aGUgcHJpbWl0aXZlIGRvZXMgbm90IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGlucHV0IDxjb2RlPmdlb21ldHJ5SW5zdGFuY2VzPC9jb2RlPiB0byBzYXZlIG1lbW9yeS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYWxsb3dQaWNraW5nPXRydWVdIFdoZW4gPGNvZGU+dHJ1ZTwvY29kZT4sIGVhY2ggZ2VvbWV0cnkgaW5zdGFuY2Ugd2lsbCBvbmx5IGJlIHBpY2thYmxlIHdpdGgge0BsaW5rIFNjZW5lI3BpY2t9LiAgV2hlbiA8Y29kZT5mYWxzZTwvY29kZT4sIEdQVSBtZW1vcnkgaXMgc2F2ZWQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFzeW5jaHJvbm91cz10cnVlXSBEZXRlcm1pbmVzIGlmIHRoZSBwcmltaXRpdmUgd2lsbCBiZSBjcmVhdGVkIGFzeW5jaHJvbm91c2x5IG9yIGJsb2NrIHVudGlsIHJlYWR5LiBJZiBmYWxzZSBpbml0aWFsaXplVGVycmFpbkhlaWdodHMoKSBtdXN0IGJlIGNhbGxlZCBmaXJzdC5cbiAqIEBwYXJhbSB7Q2xhc3NpZmljYXRpb25UeXBlfSBbb3B0aW9ucy5jbGFzc2lmaWNhdGlvblR5cGU9Q2xhc3NpZmljYXRpb25UeXBlLkJPVEhdIERldGVybWluZXMgd2hldGhlciB0ZXJyYWluLCAzRCBUaWxlcyBvciBib3RoIHdpbGwgYmUgY2xhc3NpZmllZC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU9ZmFsc2VdIEZvciBkZWJ1Z2dpbmcgb25seS4gRGV0ZXJtaW5lcyBpZiB0aGlzIHByaW1pdGl2ZSdzIGNvbW1hbmRzJyBib3VuZGluZyBzcGhlcmVzIGFyZSBzaG93bi5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZGVidWdTaG93U2hhZG93Vm9sdW1lPWZhbHNlXSBGb3IgZGVidWdnaW5nIG9ubHkuIERldGVybWluZXMgaWYgdGhlIHNoYWRvdyB2b2x1bWUgZm9yIGVhY2ggZ2VvbWV0cnkgaW4gdGhlIHByaW1pdGl2ZSBpcyBkcmF3bi4gTXVzdCBiZSA8Y29kZT50cnVlPC9jb2RlPiBvblxuICogICAgICAgICAgICAgICAgICBjcmVhdGlvbiBmb3IgdGhlIHZvbHVtZXMgdG8gYmUgY3JlYXRlZCBiZWZvcmUgdGhlIGdlb21ldHJ5IGlzIHJlbGVhc2VkIG9yIG9wdGlvbnMucmVsZWFzZUdlb21ldHJ5SW5zdGFuY2UgbXVzdCBiZSA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKlxuICogQHNlZSBQcmltaXRpdmVcbiAqIEBzZWUgR3JvdW5kUHJpbWl0aXZlXG4gKiBAc2VlIEdlb21ldHJ5SW5zdGFuY2VcbiAqIEBzZWUgQXBwZWFyYW5jZVxuICovXG5mdW5jdGlvbiBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZShvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBnZW9tZXRyeUluc3RhbmNlcyA9IG9wdGlvbnMuZ2VvbWV0cnlJbnN0YW5jZXM7XG5cbiAgLyoqXG4gICAqIFRoZSBnZW9tZXRyeSBpbnN0YW5jZSByZW5kZXJlZCB3aXRoIHRoaXMgcHJpbWl0aXZlLiAgVGhpcyBtYXlcbiAgICogYmUgPGNvZGU+dW5kZWZpbmVkPC9jb2RlPiBpZiA8Y29kZT5vcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlczwvY29kZT5cbiAgICogaXMgPGNvZGU+dHJ1ZTwvY29kZT4gd2hlbiB0aGUgcHJpbWl0aXZlIGlzIGNvbnN0cnVjdGVkLlxuICAgKiA8cD5cbiAgICogQ2hhbmdpbmcgdGhpcyBwcm9wZXJ0eSBhZnRlciB0aGUgcHJpbWl0aXZlIGlzIHJlbmRlcmVkIGhhcyBubyBlZmZlY3QuXG4gICAqIDwvcD5cbiAgICogPHA+XG4gICAqIEJlY2F1c2Ugb2YgdGhlIHJlbmRlcmluZyB0ZWNobmlxdWUgdXNlZCwgYWxsIGdlb21ldHJ5IGluc3RhbmNlcyBtdXN0IGJlIHRoZSBzYW1lIGNvbG9yLlxuICAgKiBJZiB0aGVyZSBpcyBhbiBpbnN0YW5jZSB3aXRoIGEgZGlmZmVyaW5nIGNvbG9yLCBhIDxjb2RlPkRldmVsb3BlckVycm9yPC9jb2RlPiB3aWxsIGJlIHRocm93blxuICAgKiBvbiB0aGUgZmlyc3QgYXR0ZW1wdCB0byByZW5kZXIuXG4gICAqIDwvcD5cbiAgICpcbiAgICogQHJlYWRvbmx5XG4gICAqIEB0eXBlIHtBcnJheXxHZW9tZXRyeUluc3RhbmNlfVxuICAgKlxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZ2VvbWV0cnlJbnN0YW5jZXMgPSBnZW9tZXRyeUluc3RhbmNlcztcbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIHByaW1pdGl2ZSB3aWxsIGJlIHNob3duLiAgVGhpcyBhZmZlY3RzIGFsbCBnZW9tZXRyeVxuICAgKiBpbnN0YW5jZXMgaW4gdGhlIHByaW1pdGl2ZS5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHRoaXMuc2hvdyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnNob3csIHRydWUpO1xuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRlcnJhaW4sIDNEIFRpbGVzIG9yIGJvdGggd2lsbCBiZSBjbGFzc2lmaWVkLlxuICAgKlxuICAgKiBAdHlwZSB7Q2xhc3NpZmljYXRpb25UeXBlfVxuICAgKlxuICAgKiBAZGVmYXVsdCBDbGFzc2lmaWNhdGlvblR5cGUuQk9USFxuICAgKi9cbiAgdGhpcy5jbGFzc2lmaWNhdGlvblR5cGUgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5jbGFzc2lmaWNhdGlvblR5cGUsXG4gICAgQ2xhc3NpZmljYXRpb25UeXBlLkJPVEhcbiAgKTtcbiAgLyoqXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgZm9yIGRlYnVnZ2luZyBvbmx5OyBpdCBpcyBub3QgZm9yIHByb2R1Y3Rpb24gdXNlIG5vciBpcyBpdCBvcHRpbWl6ZWQuXG4gICAqIDxwPlxuICAgKiBEcmF3cyB0aGUgYm91bmRpbmcgc3BoZXJlIGZvciBlYWNoIGRyYXcgY29tbWFuZCBpbiB0aGUgcHJpbWl0aXZlLlxuICAgKiA8L3A+XG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgdGhpcy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lLFxuICAgIGZhbHNlXG4gICk7XG4gIC8qKlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGZvciBkZWJ1Z2dpbmcgb25seTsgaXQgaXMgbm90IGZvciBwcm9kdWN0aW9uIHVzZSBub3IgaXMgaXQgb3B0aW1pemVkLlxuICAgKiA8cD5cbiAgICogRHJhd3MgdGhlIHNoYWRvdyB2b2x1bWUgZm9yIGVhY2ggZ2VvbWV0cnkgaW4gdGhlIHByaW1pdGl2ZS5cbiAgICogPC9wPlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHRoaXMuZGVidWdTaG93U2hhZG93Vm9sdW1lID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZGVidWdTaG93U2hhZG93Vm9sdW1lLFxuICAgIGZhbHNlXG4gICk7XG4gIHRoaXMuX2RlYnVnU2hvd1NoYWRvd1ZvbHVtZSA9IGZhbHNlO1xuXG4gIC8vIFRoZXNlIGFyZSB1c2VkIGJ5IEdyb3VuZFByaW1pdGl2ZSB0byBhdWdtZW50IHRoZSBzaGFkZXIgYW5kIHVuaWZvcm0gbWFwLlxuICB0aGlzLl9leHRydWRlZCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLl9leHRydWRlZCwgZmFsc2UpO1xuICB0aGlzLl91bmlmb3JtTWFwID0gb3B0aW9ucy5fdW5pZm9ybU1hcDtcblxuICB0aGlzLl9zcCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3BTdGVuY2lsID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zcFBpY2sgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NwQ29sb3IgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fc3BQaWNrMkQgPSB1bmRlZmluZWQ7IC8vIG9ubHkgZGVyaXZlZCBpZiBuZWNlc3NhcnlcbiAgdGhpcy5fc3BDb2xvcjJEID0gdW5kZWZpbmVkOyAvLyBvbmx5IGRlcml2ZWQgaWYgbmVjZXNzYXJ5XG5cbiAgdGhpcy5fcnNTdGVuY2lsRGVwdGhQYXNzID0gdW5kZWZpbmVkO1xuICB0aGlzLl9yc1N0ZW5jaWxEZXB0aFBhc3MzRFRpbGVzID0gdW5kZWZpbmVkO1xuICB0aGlzLl9yc0NvbG9yUGFzcyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcnNQaWNrUGFzcyA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9jb21tYW5kc0lnbm9yZVNob3cgPSBbXTtcblxuICB0aGlzLl9yZWFkeSA9IGZhbHNlO1xuICB0aGlzLl9yZWFkeVByb21pc2UgPSB3aGVuLmRlZmVyKCk7XG5cbiAgdGhpcy5fcHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9waWNrUHJpbWl0aXZlID0gb3B0aW9ucy5fcGlja1ByaW1pdGl2ZTtcblxuICAvLyBTZXQgaW4gdXBkYXRlXG4gIHRoaXMuX2hhc1NwaGVyaWNhbEV4dGVudHNBdHRyaWJ1dGUgPSBmYWxzZTtcbiAgdGhpcy5faGFzUGxhbmFyRXh0ZW50c0F0dHJpYnV0ZXMgPSBmYWxzZTtcbiAgdGhpcy5faGFzUGVyQ29sb3JBdHRyaWJ1dGUgPSBmYWxzZTtcblxuICB0aGlzLmFwcGVhcmFuY2UgPSBvcHRpb25zLmFwcGVhcmFuY2U7XG5cbiAgdGhpcy5fY3JlYXRlQm91bmRpbmdWb2x1bWVGdW5jdGlvbiA9IG9wdGlvbnMuX2NyZWF0ZUJvdW5kaW5nVm9sdW1lRnVuY3Rpb247XG4gIHRoaXMuX3VwZGF0ZUFuZFF1ZXVlQ29tbWFuZHNGdW5jdGlvbiA9XG4gICAgb3B0aW9ucy5fdXBkYXRlQW5kUXVldWVDb21tYW5kc0Z1bmN0aW9uO1xuXG4gIHRoaXMuX3VzZVBpY2tPZmZzZXRzID0gZmFsc2U7XG5cbiAgdGhpcy5fcHJpbWl0aXZlT3B0aW9ucyA9IHtcbiAgICBnZW9tZXRyeUluc3RhbmNlczogdW5kZWZpbmVkLFxuICAgIGFwcGVhcmFuY2U6IHVuZGVmaW5lZCxcbiAgICB2ZXJ0ZXhDYWNoZU9wdGltaXplOiBkZWZhdWx0VmFsdWUob3B0aW9ucy52ZXJ0ZXhDYWNoZU9wdGltaXplLCBmYWxzZSksXG4gICAgaW50ZXJsZWF2ZTogZGVmYXVsdFZhbHVlKG9wdGlvbnMuaW50ZXJsZWF2ZSwgZmFsc2UpLFxuICAgIHJlbGVhc2VHZW9tZXRyeUluc3RhbmNlczogZGVmYXVsdFZhbHVlKFxuICAgICAgb3B0aW9ucy5yZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXMsXG4gICAgICB0cnVlXG4gICAgKSxcbiAgICBhbGxvd1BpY2tpbmc6IGRlZmF1bHRWYWx1ZShvcHRpb25zLmFsbG93UGlja2luZywgdHJ1ZSksXG4gICAgYXN5bmNocm9ub3VzOiBkZWZhdWx0VmFsdWUob3B0aW9ucy5hc3luY2hyb25vdXMsIHRydWUpLFxuICAgIGNvbXByZXNzVmVydGljZXM6IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNvbXByZXNzVmVydGljZXMsIHRydWUpLFxuICAgIF9jcmVhdGVCb3VuZGluZ1ZvbHVtZUZ1bmN0aW9uOiB1bmRlZmluZWQsXG4gICAgX2NyZWF0ZVJlbmRlclN0YXRlc0Z1bmN0aW9uOiB1bmRlZmluZWQsXG4gICAgX2NyZWF0ZVNoYWRlclByb2dyYW1GdW5jdGlvbjogdW5kZWZpbmVkLFxuICAgIF9jcmVhdGVDb21tYW5kc0Z1bmN0aW9uOiB1bmRlZmluZWQsXG4gICAgX3VwZGF0ZUFuZFF1ZXVlQ29tbWFuZHNGdW5jdGlvbjogdW5kZWZpbmVkLFxuICAgIF9jcmVhdGVQaWNrT2Zmc2V0czogdHJ1ZSxcbiAgfTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQ2xhc3NpZmljYXRpb25QcmltaXRpdmUucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBnZW9tZXRyeSB2ZXJ0aWNlcyBhcmUgb3B0aW1pemVkIGZvciB0aGUgcHJlIGFuZCBwb3N0LXZlcnRleC1zaGFkZXIgY2FjaGVzLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdmVydGV4Q2FjaGVPcHRpbWl6ZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU9wdGlvbnMudmVydGV4Q2FjaGVPcHRpbWl6ZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIGdlb21ldHJ5IHZlcnRleCBhdHRyaWJ1dGVzIGFyZSBpbnRlcmxlYXZlZCwgd2hpY2ggY2FuIHNsaWdodGx5IGltcHJvdmUgcmVuZGVyaW5nIHBlcmZvcm1hbmNlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGludGVybGVhdmU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVPcHRpb25zLmludGVybGVhdmU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIHByaW1pdGl2ZSBkb2VzIG5vdCBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnB1dCA8Y29kZT5nZW9tZXRyeUluc3RhbmNlczwvY29kZT4gdG8gc2F2ZSBtZW1vcnkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICByZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVPcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlcztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBlYWNoIGdlb21ldHJ5IGluc3RhbmNlIHdpbGwgb25seSBiZSBwaWNrYWJsZSB3aXRoIHtAbGluayBTY2VuZSNwaWNrfS4gIFdoZW4gPGNvZGU+ZmFsc2U8L2NvZGU+LCBHUFUgbWVtb3J5IGlzIHNhdmVkLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgYWxsb3dQaWNraW5nOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJpbWl0aXZlT3B0aW9ucy5hbGxvd1BpY2tpbmc7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2VvbWV0cnkgaW5zdGFuY2VzIHdpbGwgYmUgY3JlYXRlZCBhbmQgYmF0Y2hlZCBvbiBhIHdlYiB3b3JrZXIuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBhc3luY2hyb25vdXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVPcHRpb25zLmFzeW5jaHJvbm91cztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBnZW9tZXRyeSB2ZXJ0aWNlcyBhcmUgY29tcHJlc3NlZCwgd2hpY2ggd2lsbCBzYXZlIG1lbW9yeS5cbiAgICpcbiAgICogQG1lbWJlcm9mIENsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIGNvbXByZXNzVmVydGljZXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVPcHRpb25zLmNvbXByZXNzVmVydGljZXM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgcHJpbWl0aXZlIGlzIGNvbXBsZXRlIGFuZCByZWFkeSB0byByZW5kZXIuICBJZiB0aGlzIHByb3BlcnR5IGlzXG4gICAqIHRydWUsIHRoZSBwcmltaXRpdmUgd2lsbCBiZSByZW5kZXJlZCB0aGUgbmV4dCB0aW1lIHRoYXQge0BsaW5rIENsYXNzaWZpY2F0aW9uUHJpbWl0aXZlI3VwZGF0ZX1cbiAgICogaXMgY2FsbGVkLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBwcmltaXRpdmUgaXMgcmVhZHkgdG8gcmVuZGVyLlxuICAgKiBAbWVtYmVyb2YgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9taXNlLjxDbGFzc2lmaWNhdGlvblByaW1pdGl2ZT59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlLnByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZSBuZWVkcyBhIHNlcGFyYXRlIHNoYWRlciBhbmQgY29tbWFuZHMgZm9yIDJELlxuICAgKiBUaGlzIGlzIGJlY2F1c2UgdGV4dHVyZSBjb29yZGluYXRlcyBvbiBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZXMgYXJlIGNvbXB1dGVkIGRpZmZlcmVudGx5LFxuICAgKiBhbmQgYXJlIHVzZWQgZm9yIGN1bGxpbmcgd2hlbiBtdWx0aXBsZSBHZW9tZXRyeUluc3RhbmNlcyBhcmUgYmF0Y2hlZCBpbiBvbmUgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUuXG4gICAqIEBtZW1iZXJvZiBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX25lZWRzMkRTaGFkZXI6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX2hhc1BsYW5hckV4dGVudHNBdHRyaWJ1dGVzIHx8IHRoaXMuX2hhc1NwaGVyaWNhbEV4dGVudHNBdHRyaWJ1dGVcbiAgICAgICk7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUgcmVuZGVyaW5nIGlzIHN1cHBvcnRlZC5cbiAqXG4gKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSBUaGUgc2NlbmUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgQ2xhc3NpZmljYXRpb25QcmltaXRpdmVzIGFyZSBzdXBwb3J0ZWQ7IG90aGVyd2lzZSwgcmV0dXJucyA8Y29kZT5mYWxzZTwvY29kZT5cbiAqL1xuQ2xhc3NpZmljYXRpb25QcmltaXRpdmUuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgcmV0dXJuIHNjZW5lLmNvbnRleHQuc3RlbmNpbEJ1ZmZlcjtcbn07XG5cbmZ1bmN0aW9uIGdldFN0ZW5jaWxEZXB0aFJlbmRlclN0YXRlKGVuYWJsZVN0ZW5jaWwsIG1hc2szRFRpbGVzKSB7XG4gIHZhciBzdGVuY2lsRnVuY3Rpb24gPSBtYXNrM0RUaWxlc1xuICAgID8gU3RlbmNpbEZ1bmN0aW9uLkVRVUFMXG4gICAgOiBTdGVuY2lsRnVuY3Rpb24uQUxXQVlTO1xuICByZXR1cm4ge1xuICAgIGNvbG9yTWFzazoge1xuICAgICAgcmVkOiBmYWxzZSxcbiAgICAgIGdyZWVuOiBmYWxzZSxcbiAgICAgIGJsdWU6IGZhbHNlLFxuICAgICAgYWxwaGE6IGZhbHNlLFxuICAgIH0sXG4gICAgc3RlbmNpbFRlc3Q6IHtcbiAgICAgIGVuYWJsZWQ6IGVuYWJsZVN0ZW5jaWwsXG4gICAgICBmcm9udEZ1bmN0aW9uOiBzdGVuY2lsRnVuY3Rpb24sXG4gICAgICBmcm9udE9wZXJhdGlvbjoge1xuICAgICAgICBmYWlsOiBTdGVuY2lsT3BlcmF0aW9uLktFRVAsXG4gICAgICAgIHpGYWlsOiBTdGVuY2lsT3BlcmF0aW9uLkRFQ1JFTUVOVF9XUkFQLFxuICAgICAgICB6UGFzczogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgfSxcbiAgICAgIGJhY2tGdW5jdGlvbjogc3RlbmNpbEZ1bmN0aW9uLFxuICAgICAgYmFja09wZXJhdGlvbjoge1xuICAgICAgICBmYWlsOiBTdGVuY2lsT3BlcmF0aW9uLktFRVAsXG4gICAgICAgIHpGYWlsOiBTdGVuY2lsT3BlcmF0aW9uLklOQ1JFTUVOVF9XUkFQLFxuICAgICAgICB6UGFzczogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgfSxcbiAgICAgIHJlZmVyZW5jZTogU3RlbmNpbENvbnN0YW50cy5DRVNJVU1fM0RfVElMRV9NQVNLLFxuICAgICAgbWFzazogU3RlbmNpbENvbnN0YW50cy5DRVNJVU1fM0RfVElMRV9NQVNLLFxuICAgIH0sXG4gICAgc3RlbmNpbE1hc2s6IFN0ZW5jaWxDb25zdGFudHMuQ0xBU1NJRklDQVRJT05fTUFTSyxcbiAgICBkZXB0aFRlc3Q6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBmdW5jOiBEZXB0aEZ1bmN0aW9uLkxFU1NfT1JfRVFVQUwsXG4gICAgfSxcbiAgICBkZXB0aE1hc2s6IGZhbHNlLFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRDb2xvclJlbmRlclN0YXRlKGVuYWJsZVN0ZW5jaWwpIHtcbiAgcmV0dXJuIHtcbiAgICBzdGVuY2lsVGVzdDoge1xuICAgICAgZW5hYmxlZDogZW5hYmxlU3RlbmNpbCxcbiAgICAgIGZyb250RnVuY3Rpb246IFN0ZW5jaWxGdW5jdGlvbi5OT1RfRVFVQUwsXG4gICAgICBmcm9udE9wZXJhdGlvbjoge1xuICAgICAgICBmYWlsOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICAgIHpGYWlsOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICAgIHpQYXNzOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICB9LFxuICAgICAgYmFja0Z1bmN0aW9uOiBTdGVuY2lsRnVuY3Rpb24uTk9UX0VRVUFMLFxuICAgICAgYmFja09wZXJhdGlvbjoge1xuICAgICAgICBmYWlsOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICAgIHpGYWlsOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICAgIHpQYXNzOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICB9LFxuICAgICAgcmVmZXJlbmNlOiAwLFxuICAgICAgbWFzazogU3RlbmNpbENvbnN0YW50cy5DTEFTU0lGSUNBVElPTl9NQVNLLFxuICAgIH0sXG4gICAgc3RlbmNpbE1hc2s6IFN0ZW5jaWxDb25zdGFudHMuQ0xBU1NJRklDQVRJT05fTUFTSyxcbiAgICBkZXB0aFRlc3Q6IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgIH0sXG4gICAgZGVwdGhNYXNrOiBmYWxzZSxcbiAgICBibGVuZGluZzogQmxlbmRpbmdTdGF0ZS5QUkVfTVVMVElQTElFRF9BTFBIQV9CTEVORCxcbiAgfTtcbn1cblxudmFyIHBpY2tSZW5kZXJTdGF0ZSA9IHtcbiAgc3RlbmNpbFRlc3Q6IHtcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGZyb250RnVuY3Rpb246IFN0ZW5jaWxGdW5jdGlvbi5OT1RfRVFVQUwsXG4gICAgZnJvbnRPcGVyYXRpb246IHtcbiAgICAgIGZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uWkVSTyxcbiAgICAgIHpGYWlsOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICB6UGFzczogU3RlbmNpbE9wZXJhdGlvbi5aRVJPLFxuICAgIH0sXG4gICAgYmFja0Z1bmN0aW9uOiBTdGVuY2lsRnVuY3Rpb24uTk9UX0VRVUFMLFxuICAgIGJhY2tPcGVyYXRpb246IHtcbiAgICAgIGZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uWkVSTyxcbiAgICAgIHpGYWlsOiBTdGVuY2lsT3BlcmF0aW9uLlpFUk8sXG4gICAgICB6UGFzczogU3RlbmNpbE9wZXJhdGlvbi5aRVJPLFxuICAgIH0sXG4gICAgcmVmZXJlbmNlOiAwLFxuICAgIG1hc2s6IFN0ZW5jaWxDb25zdGFudHMuQ0xBU1NJRklDQVRJT05fTUFTSyxcbiAgfSxcbiAgc3RlbmNpbE1hc2s6IFN0ZW5jaWxDb25zdGFudHMuQ0xBU1NJRklDQVRJT05fTUFTSyxcbiAgZGVwdGhUZXN0OiB7XG4gICAgZW5hYmxlZDogZmFsc2UsXG4gIH0sXG4gIGRlcHRoTWFzazogZmFsc2UsXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVSZW5kZXJTdGF0ZXMoXG4gIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLFxuICBjb250ZXh0LFxuICBhcHBlYXJhbmNlLFxuICB0d29QYXNzZXNcbikge1xuICBpZiAoZGVmaW5lZChjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcnNTdGVuY2lsRGVwdGhQYXNzKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgc3RlbmNpbEVuYWJsZWQgPSAhY2xhc3NpZmljYXRpb25QcmltaXRpdmUuZGVidWdTaG93U2hhZG93Vm9sdW1lO1xuXG4gIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9yc1N0ZW5jaWxEZXB0aFBhc3MgPSBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUoXG4gICAgZ2V0U3RlbmNpbERlcHRoUmVuZGVyU3RhdGUoc3RlbmNpbEVuYWJsZWQsIGZhbHNlKVxuICApO1xuICBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcnNTdGVuY2lsRGVwdGhQYXNzM0RUaWxlcyA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShcbiAgICBnZXRTdGVuY2lsRGVwdGhSZW5kZXJTdGF0ZShzdGVuY2lsRW5hYmxlZCwgdHJ1ZSlcbiAgKTtcbiAgY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3JzQ29sb3JQYXNzID0gUmVuZGVyU3RhdGUuZnJvbUNhY2hlKFxuICAgIGdldENvbG9yUmVuZGVyU3RhdGUoc3RlbmNpbEVuYWJsZWQsIGZhbHNlKVxuICApO1xuICBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcnNQaWNrUGFzcyA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShwaWNrUmVuZGVyU3RhdGUpO1xufVxuXG5mdW5jdGlvbiBtb2RpZnlGb3JFbmNvZGVkTm9ybWFscyhwcmltaXRpdmUsIHZlcnRleFNoYWRlclNvdXJjZSkge1xuICBpZiAoIXByaW1pdGl2ZS5jb21wcmVzc1ZlcnRpY2VzKSB7XG4gICAgcmV0dXJuIHZlcnRleFNoYWRlclNvdXJjZTtcbiAgfVxuXG4gIGlmIChcbiAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2Uuc2VhcmNoKC9hdHRyaWJ1dGVcXHMrdmVjM1xccytleHRydWRlRGlyZWN0aW9uOy9nKSAhPT0gLTFcbiAgKSB7XG4gICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBcImNvbXByZXNzZWRBdHRyaWJ1dGVzXCI7XG5cbiAgICAvL29ubHkgc2hhZG93IHZvbHVtZXMgdXNlIGV4dHJ1ZGVEaXJlY3Rpb24sIGFuZCBzaGFkb3cgdm9sdW1lcyB1c2UgdmVydGV4Rm9ybWF0OiBQT1NJVElPTl9PTkxZIHNvIHdlIGRvbid0IG5lZWQgdG8gY2hlY2sgb3RoZXIgYXR0cmlidXRlc1xuICAgIHZhciBhdHRyaWJ1dGVEZWNsID0gXCJhdHRyaWJ1dGUgdmVjMiBcIiArIGF0dHJpYnV0ZU5hbWUgKyBcIjtcIjtcblxuICAgIHZhciBnbG9iYWxEZWNsID0gXCJ2ZWMzIGV4dHJ1ZGVEaXJlY3Rpb247XFxuXCI7XG4gICAgdmFyIGRlY29kZSA9XG4gICAgICBcIiAgICBleHRydWRlRGlyZWN0aW9uID0gY3ptX29jdERlY29kZShcIiArIGF0dHJpYnV0ZU5hbWUgKyBcIiwgNjU1MzUuMCk7XFxuXCI7XG5cbiAgICB2YXIgbW9kaWZpZWRWUyA9IHZlcnRleFNoYWRlclNvdXJjZTtcbiAgICBtb2RpZmllZFZTID0gbW9kaWZpZWRWUy5yZXBsYWNlKFxuICAgICAgL2F0dHJpYnV0ZVxccyt2ZWMzXFxzK2V4dHJ1ZGVEaXJlY3Rpb247L2csXG4gICAgICBcIlwiXG4gICAgKTtcbiAgICBtb2RpZmllZFZTID0gU2hhZGVyU291cmNlLnJlcGxhY2VNYWluKFxuICAgICAgbW9kaWZpZWRWUyxcbiAgICAgIFwiY3ptX25vbl9jb21wcmVzc2VkX21haW5cIlxuICAgICk7XG4gICAgdmFyIGNvbXByZXNzZWRNYWluID1cbiAgICAgIFwidm9pZCBtYWluKCkgXFxuXCIgK1xuICAgICAgXCJ7IFxcblwiICtcbiAgICAgIGRlY29kZSArXG4gICAgICBcIiAgICBjem1fbm9uX2NvbXByZXNzZWRfbWFpbigpOyBcXG5cIiArXG4gICAgICBcIn1cIjtcblxuICAgIHJldHVybiBbYXR0cmlidXRlRGVjbCwgZ2xvYmFsRGVjbCwgbW9kaWZpZWRWUywgY29tcHJlc3NlZE1haW5dLmpvaW4oXCJcXG5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU2hhZGVyUHJvZ3JhbShjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSwgZnJhbWVTdGF0ZSkge1xuICB2YXIgY29udGV4dCA9IGZyYW1lU3RhdGUuY29udGV4dDtcbiAgdmFyIHByaW1pdGl2ZSA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9wcmltaXRpdmU7XG4gIHZhciB2cyA9IFNoYWRvd1ZvbHVtZUFwcGVhcmFuY2VWUztcbiAgdnMgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcHJpbWl0aXZlLl9iYXRjaFRhYmxlLmdldFZlcnRleFNoYWRlckNhbGxiYWNrKCkoXG4gICAgdnNcbiAgKTtcbiAgdnMgPSBQcmltaXRpdmUuX2FwcGVuZERpc3RhbmNlRGlzcGxheUNvbmRpdGlvblRvU2hhZGVyKHByaW1pdGl2ZSwgdnMpO1xuICB2cyA9IFByaW1pdGl2ZS5fbW9kaWZ5U2hhZGVyUG9zaXRpb24oXG4gICAgY2xhc3NpZmljYXRpb25QcmltaXRpdmUsXG4gICAgdnMsXG4gICAgZnJhbWVTdGF0ZS5zY2VuZTNET25seVxuICApO1xuICB2cyA9IFByaW1pdGl2ZS5fdXBkYXRlQ29sb3JBdHRyaWJ1dGUocHJpbWl0aXZlLCB2cyk7XG5cbiAgdmFyIHBsYW5hckV4dGVudHMgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5faGFzUGxhbmFyRXh0ZW50c0F0dHJpYnV0ZXM7XG4gIHZhciBjdWxsRnJhZ21lbnRzVXNpbmdFeHRlbnRzID1cbiAgICBwbGFuYXJFeHRlbnRzIHx8IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9oYXNTcGhlcmljYWxFeHRlbnRzQXR0cmlidXRlO1xuXG4gIGlmIChjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fZXh0cnVkZWQpIHtcbiAgICB2cyA9IG1vZGlmeUZvckVuY29kZWROb3JtYWxzKHByaW1pdGl2ZSwgdnMpO1xuICB9XG5cbiAgdmFyIGV4dHJ1ZGVkRGVmaW5lID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX2V4dHJ1ZGVkXG4gICAgPyBcIkVYVFJVREVEX0dFT01FVFJZXCJcbiAgICA6IFwiXCI7XG5cbiAgdmFyIHZzU291cmNlID0gbmV3IFNoYWRlclNvdXJjZSh7XG4gICAgZGVmaW5lczogW2V4dHJ1ZGVkRGVmaW5lXSxcbiAgICBzb3VyY2VzOiBbdnNdLFxuICB9KTtcbiAgdmFyIGZzU291cmNlID0gbmV3IFNoYWRlclNvdXJjZSh7XG4gICAgc291cmNlczogW1NoYWRvd1ZvbHVtZUZTXSxcbiAgfSk7XG4gIHZhciBhdHRyaWJ1dGVMb2NhdGlvbnMgPVxuICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9wcmltaXRpdmUuX2F0dHJpYnV0ZUxvY2F0aW9ucztcblxuICB2YXIgc2hhZG93Vm9sdW1lQXBwZWFyYW5jZSA9IG5ldyBTaGFkb3dWb2x1bWVBcHBlYXJhbmNlKFxuICAgIGN1bGxGcmFnbWVudHNVc2luZ0V4dGVudHMsXG4gICAgcGxhbmFyRXh0ZW50cyxcbiAgICBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5hcHBlYXJhbmNlXG4gICk7XG5cbiAgY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3NwU3RlbmNpbCA9IFNoYWRlclByb2dyYW0ucmVwbGFjZUNhY2hlKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHNoYWRlclByb2dyYW06IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcFN0ZW5jaWwsXG4gICAgdmVydGV4U2hhZGVyU291cmNlOiB2c1NvdXJjZSxcbiAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnNTb3VyY2UsXG4gICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gIH0pO1xuXG4gIGlmIChjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcHJpbWl0aXZlLmFsbG93UGlja2luZykge1xuICAgIHZhciB2c1BpY2sgPSBTaGFkZXJTb3VyY2UuY3JlYXRlUGlja1ZlcnRleFNoYWRlclNvdXJjZSh2cyk7XG4gICAgdnNQaWNrID0gUHJpbWl0aXZlLl9hcHBlbmRTaG93VG9TaGFkZXIocHJpbWl0aXZlLCB2c1BpY2spO1xuICAgIHZzUGljayA9IFByaW1pdGl2ZS5fdXBkYXRlUGlja0NvbG9yQXR0cmlidXRlKHZzUGljayk7XG5cbiAgICB2YXIgcGlja0ZTM0QgPSBzaGFkb3dWb2x1bWVBcHBlYXJhbmNlLmNyZWF0ZVBpY2tGcmFnbWVudFNoYWRlcihmYWxzZSk7XG4gICAgdmFyIHBpY2tWUzNEID0gc2hhZG93Vm9sdW1lQXBwZWFyYW5jZS5jcmVhdGVQaWNrVmVydGV4U2hhZGVyKFxuICAgICAgW2V4dHJ1ZGVkRGVmaW5lXSxcbiAgICAgIHZzUGljayxcbiAgICAgIGZhbHNlLFxuICAgICAgZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uXG4gICAgKTtcblxuICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcFBpY2sgPSBTaGFkZXJQcm9ncmFtLnJlcGxhY2VDYWNoZSh7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgc2hhZGVyUHJvZ3JhbTogY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3NwUGljayxcbiAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogcGlja1ZTM0QsXG4gICAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogcGlja0ZTM0QsXG4gICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgICB9KTtcblxuICAgIC8vIERlcml2ZSBhIDJEIHBpY2sgc2hhZGVyIGlmIHRoZSBwcmltaXRpdmUgdXNlcyB0ZXh0dXJlIGNvb3JkaW5hdGUtYmFzZWQgZnJhZ21lbnQgY3VsbGluZyxcbiAgICAvLyBzaW5jZSB0ZXh0dXJlIGNvb3JkaW5hdGVzIGFyZSBjb21wdXRlZCBkaWZmZXJlbnRseSBpbiAyRC5cbiAgICBpZiAoY3VsbEZyYWdtZW50c1VzaW5nRXh0ZW50cykge1xuICAgICAgdmFyIHBpY2tQcm9ncmFtMkQgPSBjb250ZXh0LnNoYWRlckNhY2hlLmdldERlcml2ZWRTaGFkZXJQcm9ncmFtKFxuICAgICAgICBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fc3BQaWNrLFxuICAgICAgICBcIjJkUGlja1wiXG4gICAgICApO1xuICAgICAgaWYgKCFkZWZpbmVkKHBpY2tQcm9ncmFtMkQpKSB7XG4gICAgICAgIHZhciBwaWNrRlMyRCA9IHNoYWRvd1ZvbHVtZUFwcGVhcmFuY2UuY3JlYXRlUGlja0ZyYWdtZW50U2hhZGVyKHRydWUpO1xuICAgICAgICB2YXIgcGlja1ZTMkQgPSBzaGFkb3dWb2x1bWVBcHBlYXJhbmNlLmNyZWF0ZVBpY2tWZXJ0ZXhTaGFkZXIoXG4gICAgICAgICAgW2V4dHJ1ZGVkRGVmaW5lXSxcbiAgICAgICAgICB2c1BpY2ssXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb25cbiAgICAgICAgKTtcblxuICAgICAgICBwaWNrUHJvZ3JhbTJEID0gY29udGV4dC5zaGFkZXJDYWNoZS5jcmVhdGVEZXJpdmVkU2hhZGVyUHJvZ3JhbShcbiAgICAgICAgICBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fc3BQaWNrLFxuICAgICAgICAgIFwiMmRQaWNrXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlOiBwaWNrVlMyRCxcbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBwaWNrRlMyRCxcbiAgICAgICAgICAgIGF0dHJpYnV0ZUxvY2F0aW9uczogYXR0cmlidXRlTG9jYXRpb25zLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcFBpY2syRCA9IHBpY2tQcm9ncmFtMkQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcFBpY2sgPSBTaGFkZXJQcm9ncmFtLmZyb21DYWNoZSh7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdmVydGV4U2hhZGVyU291cmNlOiB2c1NvdXJjZSxcbiAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBmc1NvdXJjZSxcbiAgICAgIGF0dHJpYnV0ZUxvY2F0aW9uczogYXR0cmlidXRlTG9jYXRpb25zLFxuICAgIH0pO1xuICB9XG5cbiAgdnMgPSBQcmltaXRpdmUuX2FwcGVuZFNob3dUb1NoYWRlcihwcmltaXRpdmUsIHZzKTtcbiAgdnNTb3VyY2UgPSBuZXcgU2hhZGVyU291cmNlKHtcbiAgICBkZWZpbmVzOiBbZXh0cnVkZWREZWZpbmVdLFxuICAgIHNvdXJjZXM6IFt2c10sXG4gIH0pO1xuXG4gIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcCA9IFNoYWRlclByb2dyYW0ucmVwbGFjZUNhY2hlKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHNoYWRlclByb2dyYW06IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcCxcbiAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2U6IHZzU291cmNlLFxuICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBmc1NvdXJjZSxcbiAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgfSk7XG5cbiAgLy8gQ3JlYXRlIGEgZnJhZ21lbnQgc2hhZGVyIHRoYXQgY29tcHV0ZXMgb25seSByZXF1aXJlZCBtYXRlcmlhbCBob29rdXBzIHVzaW5nIHNjcmVlbiBzcGFjZSB0ZWNobmlxdWVzXG4gIHZhciBmc0NvbG9yU291cmNlID0gc2hhZG93Vm9sdW1lQXBwZWFyYW5jZS5jcmVhdGVGcmFnbWVudFNoYWRlcihmYWxzZSk7XG4gIHZhciB2c0NvbG9yU291cmNlID0gc2hhZG93Vm9sdW1lQXBwZWFyYW5jZS5jcmVhdGVWZXJ0ZXhTaGFkZXIoXG4gICAgW2V4dHJ1ZGVkRGVmaW5lXSxcbiAgICB2cyxcbiAgICBmYWxzZSxcbiAgICBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb25cbiAgKTtcblxuICBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fc3BDb2xvciA9IFNoYWRlclByb2dyYW0ucmVwbGFjZUNhY2hlKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHNoYWRlclByb2dyYW06IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcENvbG9yLFxuICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnNDb2xvclNvdXJjZSxcbiAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnNDb2xvclNvdXJjZSxcbiAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgfSk7XG5cbiAgLy8gRGVyaXZlIGEgMkQgc2hhZGVyIGlmIHRoZSBwcmltaXRpdmUgdXNlcyB0ZXh0dXJlIGNvb3JkaW5hdGUtYmFzZWQgZnJhZ21lbnQgY3VsbGluZyxcbiAgLy8gc2luY2UgdGV4dHVyZSBjb29yZGluYXRlcyBhcmUgY29tcHV0ZWQgZGlmZmVyZW50bHkgaW4gMkQuXG4gIC8vIEFueSBtYXRlcmlhbCB0aGF0IHVzZXMgdGV4dHVyZSBjb29yZGluYXRlcyB3aWxsIGFsc28gZXF1aXAgdGV4dHVyZSBjb29yZGluYXRlLWJhc2VkIGZyYWdtZW50IGN1bGxpbmcuXG4gIGlmIChjdWxsRnJhZ21lbnRzVXNpbmdFeHRlbnRzKSB7XG4gICAgdmFyIGNvbG9yUHJvZ3JhbTJEID0gY29udGV4dC5zaGFkZXJDYWNoZS5nZXREZXJpdmVkU2hhZGVyUHJvZ3JhbShcbiAgICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcENvbG9yLFxuICAgICAgXCIyZENvbG9yXCJcbiAgICApO1xuICAgIGlmICghZGVmaW5lZChjb2xvclByb2dyYW0yRCkpIHtcbiAgICAgIHZhciBmc0NvbG9yU291cmNlMkQgPSBzaGFkb3dWb2x1bWVBcHBlYXJhbmNlLmNyZWF0ZUZyYWdtZW50U2hhZGVyKHRydWUpO1xuICAgICAgdmFyIHZzQ29sb3JTb3VyY2UyRCA9IHNoYWRvd1ZvbHVtZUFwcGVhcmFuY2UuY3JlYXRlVmVydGV4U2hhZGVyKFxuICAgICAgICBbZXh0cnVkZWREZWZpbmVdLFxuICAgICAgICB2cyxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uXG4gICAgICApO1xuXG4gICAgICBjb2xvclByb2dyYW0yRCA9IGNvbnRleHQuc2hhZGVyQ2FjaGUuY3JlYXRlRGVyaXZlZFNoYWRlclByb2dyYW0oXG4gICAgICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcENvbG9yLFxuICAgICAgICBcIjJkQ29sb3JcIixcbiAgICAgICAge1xuICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnNDb2xvclNvdXJjZTJELFxuICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBmc0NvbG9yU291cmNlMkQsXG4gICAgICAgICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcENvbG9yMkQgPSBjb2xvclByb2dyYW0yRDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb2xvckNvbW1hbmRzKGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLCBjb2xvckNvbW1hbmRzKSB7XG4gIHZhciBwcmltaXRpdmUgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcHJpbWl0aXZlO1xuICB2YXIgbGVuZ3RoID0gcHJpbWl0aXZlLl92YS5sZW5ndGggKiAyOyAvLyBlYWNoIGdlb21ldHJ5IChwYWNrIG9mIHZlcnRleCBhdHRyaWJ1dGVzKSBuZWVkcyAyIGNvbW1hbmRzOiBmcm9udC9iYWNrIHN0ZW5jaWxzIGFuZCBmaWxsXG4gIGNvbG9yQ29tbWFuZHMubGVuZ3RoID0gbGVuZ3RoO1xuXG4gIHZhciBpO1xuICB2YXIgY29tbWFuZDtcbiAgdmFyIGRlcml2ZWRDb21tYW5kO1xuICB2YXIgdmFJbmRleCA9IDA7XG4gIHZhciB1bmlmb3JtTWFwID0gcHJpbWl0aXZlLl9iYXRjaFRhYmxlLmdldFVuaWZvcm1NYXBDYWxsYmFjaygpKFxuICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl91bmlmb3JtTWFwXG4gICk7XG5cbiAgdmFyIG5lZWRzMkRTaGFkZXIgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fbmVlZHMyRFNoYWRlcjtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDIpIHtcbiAgICB2YXIgdmVydGV4QXJyYXkgPSBwcmltaXRpdmUuX3ZhW3ZhSW5kZXgrK107XG5cbiAgICAvLyBTdGVuY2lsIGRlcHRoIGNvbW1hbmRcbiAgICBjb21tYW5kID0gY29sb3JDb21tYW5kc1tpXTtcbiAgICBpZiAoIWRlZmluZWQoY29tbWFuZCkpIHtcbiAgICAgIGNvbW1hbmQgPSBjb2xvckNvbW1hbmRzW2ldID0gbmV3IERyYXdDb21tYW5kKHtcbiAgICAgICAgb3duZXI6IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLFxuICAgICAgICBwcmltaXRpdmVUeXBlOiBwcmltaXRpdmUuX3ByaW1pdGl2ZVR5cGUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21tYW5kLnZlcnRleEFycmF5ID0gdmVydGV4QXJyYXk7XG4gICAgY29tbWFuZC5yZW5kZXJTdGF0ZSA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9yc1N0ZW5jaWxEZXB0aFBhc3M7XG4gICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3NwO1xuICAgIGNvbW1hbmQudW5pZm9ybU1hcCA9IHVuaWZvcm1NYXA7XG4gICAgY29tbWFuZC5wYXNzID0gUGFzcy5URVJSQUlOX0NMQVNTSUZJQ0FUSU9OO1xuXG4gICAgZGVyaXZlZENvbW1hbmQgPSBEcmF3Q29tbWFuZC5zaGFsbG93Q2xvbmUoXG4gICAgICBjb21tYW5kLFxuICAgICAgY29tbWFuZC5kZXJpdmVkQ29tbWFuZHMudGlsZXNldFxuICAgICk7XG4gICAgZGVyaXZlZENvbW1hbmQucmVuZGVyU3RhdGUgPVxuICAgICAgY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3JzU3RlbmNpbERlcHRoUGFzczNEVGlsZXM7XG4gICAgZGVyaXZlZENvbW1hbmQucGFzcyA9IFBhc3MuQ0VTSVVNXzNEX1RJTEVfQ0xBU1NJRklDQVRJT047XG4gICAgY29tbWFuZC5kZXJpdmVkQ29tbWFuZHMudGlsZXNldCA9IGRlcml2ZWRDb21tYW5kO1xuXG4gICAgLy8gQ29sb3IgY29tbWFuZFxuICAgIGNvbW1hbmQgPSBjb2xvckNvbW1hbmRzW2kgKyAxXTtcbiAgICBpZiAoIWRlZmluZWQoY29tbWFuZCkpIHtcbiAgICAgIGNvbW1hbmQgPSBjb2xvckNvbW1hbmRzW2kgKyAxXSA9IG5ldyBEcmF3Q29tbWFuZCh7XG4gICAgICAgIG93bmVyOiBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSxcbiAgICAgICAgcHJpbWl0aXZlVHlwZTogcHJpbWl0aXZlLl9wcmltaXRpdmVUeXBlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tbWFuZC52ZXJ0ZXhBcnJheSA9IHZlcnRleEFycmF5O1xuICAgIGNvbW1hbmQucmVuZGVyU3RhdGUgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcnNDb2xvclBhc3M7XG4gICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3NwQ29sb3I7XG4gICAgY29tbWFuZC5wYXNzID0gUGFzcy5URVJSQUlOX0NMQVNTSUZJQ0FUSU9OO1xuXG4gICAgdmFyIGFwcGVhcmFuY2UgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5hcHBlYXJhbmNlO1xuICAgIHZhciBtYXRlcmlhbCA9IGFwcGVhcmFuY2UubWF0ZXJpYWw7XG4gICAgaWYgKGRlZmluZWQobWF0ZXJpYWwpKSB7XG4gICAgICB1bmlmb3JtTWFwID0gY29tYmluZSh1bmlmb3JtTWFwLCBtYXRlcmlhbC5fdW5pZm9ybXMpO1xuICAgIH1cblxuICAgIGNvbW1hbmQudW5pZm9ybU1hcCA9IHVuaWZvcm1NYXA7XG5cbiAgICBkZXJpdmVkQ29tbWFuZCA9IERyYXdDb21tYW5kLnNoYWxsb3dDbG9uZShcbiAgICAgIGNvbW1hbmQsXG4gICAgICBjb21tYW5kLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0XG4gICAgKTtcbiAgICBkZXJpdmVkQ29tbWFuZC5wYXNzID0gUGFzcy5DRVNJVU1fM0RfVElMRV9DTEFTU0lGSUNBVElPTjtcbiAgICBjb21tYW5kLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0ID0gZGVyaXZlZENvbW1hbmQ7XG5cbiAgICAvLyBEZXJpdmUgZm9yIDJEIGlmIHRleHR1cmUgY29vcmRpbmF0ZXMgYXJlIGV2ZXIgY29tcHV0ZWRcbiAgICBpZiAobmVlZHMyRFNoYWRlcikge1xuICAgICAgLy8gRmlyc3QgZGVyaXZlIGZyb20gdGhlIHRlcnJhaW4gY29tbWFuZFxuICAgICAgdmFyIGRlcml2ZWQyRENvbW1hbmQgPSBEcmF3Q29tbWFuZC5zaGFsbG93Q2xvbmUoXG4gICAgICAgIGNvbW1hbmQsXG4gICAgICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLmFwcGVhcmFuY2UyRFxuICAgICAgKTtcbiAgICAgIGRlcml2ZWQyRENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcENvbG9yMkQ7XG4gICAgICBjb21tYW5kLmRlcml2ZWRDb21tYW5kcy5hcHBlYXJhbmNlMkQgPSBkZXJpdmVkMkRDb21tYW5kO1xuXG4gICAgICAvLyBUaGVuIGRlcml2ZSBmcm9tIHRoZSAzRCBUaWxlcyBjb21tYW5kXG4gICAgICBkZXJpdmVkMkRDb21tYW5kID0gRHJhd0NvbW1hbmQuc2hhbGxvd0Nsb25lKFxuICAgICAgICBkZXJpdmVkQ29tbWFuZCxcbiAgICAgICAgZGVyaXZlZENvbW1hbmQuZGVyaXZlZENvbW1hbmRzLmFwcGVhcmFuY2UyRFxuICAgICAgKTtcbiAgICAgIGRlcml2ZWQyRENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcENvbG9yMkQ7XG4gICAgICBkZXJpdmVkQ29tbWFuZC5kZXJpdmVkQ29tbWFuZHMuYXBwZWFyYW5jZTJEID0gZGVyaXZlZDJEQ29tbWFuZDtcbiAgICB9XG4gIH1cblxuICB2YXIgY29tbWFuZHNJZ25vcmVTaG93ID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX2NvbW1hbmRzSWdub3JlU2hvdztcbiAgdmFyIHNwU3RlbmNpbCA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcFN0ZW5jaWw7XG5cbiAgdmFyIGNvbW1hbmRJbmRleCA9IDA7XG4gIGxlbmd0aCA9IGNvbW1hbmRzSWdub3JlU2hvdy5sZW5ndGggPSBsZW5ndGggLyAyO1xuXG4gIGZvciAodmFyIGogPSAwOyBqIDwgbGVuZ3RoOyArK2opIHtcbiAgICB2YXIgY29tbWFuZElnbm9yZVNob3cgPSAoY29tbWFuZHNJZ25vcmVTaG93W2pdID0gRHJhd0NvbW1hbmQuc2hhbGxvd0Nsb25lKFxuICAgICAgY29sb3JDb21tYW5kc1tjb21tYW5kSW5kZXhdLFxuICAgICAgY29tbWFuZHNJZ25vcmVTaG93W2pdXG4gICAgKSk7XG4gICAgY29tbWFuZElnbm9yZVNob3cuc2hhZGVyUHJvZ3JhbSA9IHNwU3RlbmNpbDtcbiAgICBjb21tYW5kSWdub3JlU2hvdy5wYXNzID0gUGFzcy5DRVNJVU1fM0RfVElMRV9DTEFTU0lGSUNBVElPTl9JR05PUkVfU0hPVztcblxuICAgIGNvbW1hbmRJbmRleCArPSAyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBpY2tDb21tYW5kcyhjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSwgcGlja0NvbW1hbmRzKSB7XG4gIHZhciB1c2VQaWNrT2Zmc2V0cyA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl91c2VQaWNrT2Zmc2V0cztcblxuICB2YXIgcHJpbWl0aXZlID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3ByaW1pdGl2ZTtcbiAgdmFyIGxlbmd0aCA9IHByaW1pdGl2ZS5fdmEubGVuZ3RoICogMjsgLy8gZWFjaCBnZW9tZXRyeSAocGFjayBvZiB2ZXJ0ZXggYXR0cmlidXRlcykgbmVlZHMgMiBjb21tYW5kczogZnJvbnQvYmFjayBzdGVuY2lscyBhbmQgZmlsbFxuXG4gIC8vIEZhbGxiYWNrIGZvciBiYXRjaGluZyBzYW1lLWNvbG9yIGdlb21ldHJ5IGluc3RhbmNlc1xuICB2YXIgcGlja09mZnNldHM7XG4gIHZhciBwaWNrSW5kZXggPSAwO1xuICB2YXIgcGlja09mZnNldDtcbiAgaWYgKHVzZVBpY2tPZmZzZXRzKSB7XG4gICAgcGlja09mZnNldHMgPSBwcmltaXRpdmUuX3BpY2tPZmZzZXRzO1xuICAgIGxlbmd0aCA9IHBpY2tPZmZzZXRzLmxlbmd0aCAqIDI7XG4gIH1cblxuICBwaWNrQ29tbWFuZHMubGVuZ3RoID0gbGVuZ3RoO1xuXG4gIHZhciBqO1xuICB2YXIgY29tbWFuZDtcbiAgdmFyIGRlcml2ZWRDb21tYW5kO1xuICB2YXIgdmFJbmRleCA9IDA7XG4gIHZhciB1bmlmb3JtTWFwID0gcHJpbWl0aXZlLl9iYXRjaFRhYmxlLmdldFVuaWZvcm1NYXBDYWxsYmFjaygpKFxuICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl91bmlmb3JtTWFwXG4gICk7XG5cbiAgdmFyIG5lZWRzMkRTaGFkZXIgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fbmVlZHMyRFNoYWRlcjtcblxuICBmb3IgKGogPSAwOyBqIDwgbGVuZ3RoOyBqICs9IDIpIHtcbiAgICB2YXIgdmVydGV4QXJyYXkgPSBwcmltaXRpdmUuX3ZhW3ZhSW5kZXgrK107XG4gICAgaWYgKHVzZVBpY2tPZmZzZXRzKSB7XG4gICAgICBwaWNrT2Zmc2V0ID0gcGlja09mZnNldHNbcGlja0luZGV4KytdO1xuICAgICAgdmVydGV4QXJyYXkgPSBwcmltaXRpdmUuX3ZhW3BpY2tPZmZzZXQuaW5kZXhdO1xuICAgIH1cblxuICAgIC8vIFN0ZW5jaWwgZGVwdGggY29tbWFuZFxuICAgIGNvbW1hbmQgPSBwaWNrQ29tbWFuZHNbal07XG4gICAgaWYgKCFkZWZpbmVkKGNvbW1hbmQpKSB7XG4gICAgICBjb21tYW5kID0gcGlja0NvbW1hbmRzW2pdID0gbmV3IERyYXdDb21tYW5kKHtcbiAgICAgICAgb3duZXI6IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLFxuICAgICAgICBwcmltaXRpdmVUeXBlOiBwcmltaXRpdmUuX3ByaW1pdGl2ZVR5cGUsXG4gICAgICAgIHBpY2tPbmx5OiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tbWFuZC52ZXJ0ZXhBcnJheSA9IHZlcnRleEFycmF5O1xuICAgIGNvbW1hbmQucmVuZGVyU3RhdGUgPSBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5fcnNTdGVuY2lsRGVwdGhQYXNzO1xuICAgIGNvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcDtcbiAgICBjb21tYW5kLnVuaWZvcm1NYXAgPSB1bmlmb3JtTWFwO1xuICAgIGNvbW1hbmQucGFzcyA9IFBhc3MuVEVSUkFJTl9DTEFTU0lGSUNBVElPTjtcbiAgICBpZiAodXNlUGlja09mZnNldHMpIHtcbiAgICAgIGNvbW1hbmQub2Zmc2V0ID0gcGlja09mZnNldC5vZmZzZXQ7XG4gICAgICBjb21tYW5kLmNvdW50ID0gcGlja09mZnNldC5jb3VudDtcbiAgICB9XG5cbiAgICAvLyBEZXJpdmUgZm9yIDNEIFRpbGVzIGNsYXNzaWZpY2F0aW9uXG4gICAgZGVyaXZlZENvbW1hbmQgPSBEcmF3Q29tbWFuZC5zaGFsbG93Q2xvbmUoXG4gICAgICBjb21tYW5kLFxuICAgICAgY29tbWFuZC5kZXJpdmVkQ29tbWFuZHMudGlsZXNldFxuICAgICk7XG4gICAgZGVyaXZlZENvbW1hbmQucmVuZGVyU3RhdGUgPVxuICAgICAgY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3JzU3RlbmNpbERlcHRoUGFzczNEVGlsZXM7XG4gICAgZGVyaXZlZENvbW1hbmQucGFzcyA9IFBhc3MuQ0VTSVVNXzNEX1RJTEVfQ0xBU1NJRklDQVRJT047XG4gICAgY29tbWFuZC5kZXJpdmVkQ29tbWFuZHMudGlsZXNldCA9IGRlcml2ZWRDb21tYW5kO1xuXG4gICAgLy8gUGljayBjb2xvciBjb21tYW5kXG4gICAgY29tbWFuZCA9IHBpY2tDb21tYW5kc1tqICsgMV07XG4gICAgaWYgKCFkZWZpbmVkKGNvbW1hbmQpKSB7XG4gICAgICBjb21tYW5kID0gcGlja0NvbW1hbmRzW2ogKyAxXSA9IG5ldyBEcmF3Q29tbWFuZCh7XG4gICAgICAgIG93bmVyOiBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSxcbiAgICAgICAgcHJpbWl0aXZlVHlwZTogcHJpbWl0aXZlLl9wcmltaXRpdmVUeXBlLFxuICAgICAgICBwaWNrT25seTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbW1hbmQudmVydGV4QXJyYXkgPSB2ZXJ0ZXhBcnJheTtcbiAgICBjb21tYW5kLnJlbmRlclN0YXRlID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3JzUGlja1Bhc3M7XG4gICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3NwUGljaztcbiAgICBjb21tYW5kLnVuaWZvcm1NYXAgPSB1bmlmb3JtTWFwO1xuICAgIGNvbW1hbmQucGFzcyA9IFBhc3MuVEVSUkFJTl9DTEFTU0lGSUNBVElPTjtcbiAgICBpZiAodXNlUGlja09mZnNldHMpIHtcbiAgICAgIGNvbW1hbmQub2Zmc2V0ID0gcGlja09mZnNldC5vZmZzZXQ7XG4gICAgICBjb21tYW5kLmNvdW50ID0gcGlja09mZnNldC5jb3VudDtcbiAgICB9XG5cbiAgICBkZXJpdmVkQ29tbWFuZCA9IERyYXdDb21tYW5kLnNoYWxsb3dDbG9uZShcbiAgICAgIGNvbW1hbmQsXG4gICAgICBjb21tYW5kLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0XG4gICAgKTtcbiAgICBkZXJpdmVkQ29tbWFuZC5wYXNzID0gUGFzcy5DRVNJVU1fM0RfVElMRV9DTEFTU0lGSUNBVElPTjtcbiAgICBjb21tYW5kLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0ID0gZGVyaXZlZENvbW1hbmQ7XG5cbiAgICAvLyBEZXJpdmUgZm9yIDJEIGlmIHRleHR1cmUgY29vcmRpbmF0ZXMgYXJlIGV2ZXIgY29tcHV0ZWRcbiAgICBpZiAobmVlZHMyRFNoYWRlcikge1xuICAgICAgLy8gRmlyc3QgZGVyaXZlIGZyb20gdGhlIHRlcnJhaW4gY29tbWFuZFxuICAgICAgdmFyIGRlcml2ZWQyRENvbW1hbmQgPSBEcmF3Q29tbWFuZC5zaGFsbG93Q2xvbmUoXG4gICAgICAgIGNvbW1hbmQsXG4gICAgICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLnBpY2syRFxuICAgICAgKTtcbiAgICAgIGRlcml2ZWQyRENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcFBpY2syRDtcbiAgICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLnBpY2syRCA9IGRlcml2ZWQyRENvbW1hbmQ7XG5cbiAgICAgIC8vIFRoZW4gZGVyaXZlIGZyb20gdGhlIDNEIFRpbGVzIGNvbW1hbmRcbiAgICAgIGRlcml2ZWQyRENvbW1hbmQgPSBEcmF3Q29tbWFuZC5zaGFsbG93Q2xvbmUoXG4gICAgICAgIGRlcml2ZWRDb21tYW5kLFxuICAgICAgICBkZXJpdmVkQ29tbWFuZC5kZXJpdmVkQ29tbWFuZHMucGljazJEXG4gICAgICApO1xuICAgICAgZGVyaXZlZDJEQ29tbWFuZC5zaGFkZXJQcm9ncmFtID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3NwUGljazJEO1xuICAgICAgZGVyaXZlZENvbW1hbmQuZGVyaXZlZENvbW1hbmRzLnBpY2syRCA9IGRlcml2ZWQyRENvbW1hbmQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbW1hbmRzKFxuICBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSxcbiAgYXBwZWFyYW5jZSxcbiAgbWF0ZXJpYWwsXG4gIHRyYW5zbHVjZW50LFxuICB0d29QYXNzZXMsXG4gIGNvbG9yQ29tbWFuZHMsXG4gIHBpY2tDb21tYW5kc1xuKSB7XG4gIGNyZWF0ZUNvbG9yQ29tbWFuZHMoY2xhc3NpZmljYXRpb25QcmltaXRpdmUsIGNvbG9yQ29tbWFuZHMpO1xuICBjcmVhdGVQaWNrQ29tbWFuZHMoY2xhc3NpZmljYXRpb25QcmltaXRpdmUsIHBpY2tDb21tYW5kcyk7XG59XG5cbmZ1bmN0aW9uIGJvdW5kaW5nVm9sdW1lSW5kZXgoY29tbWFuZEluZGV4LCBsZW5ndGgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoKGNvbW1hbmRJbmRleCAlIGxlbmd0aCkgLyAyKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQW5kUXVldWVSZW5kZXJDb21tYW5kKFxuICBjb21tYW5kLFxuICBmcmFtZVN0YXRlLFxuICBtb2RlbE1hdHJpeCxcbiAgY3VsbCxcbiAgYm91bmRpbmdWb2x1bWUsXG4gIGRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lXG4pIHtcbiAgY29tbWFuZC5tb2RlbE1hdHJpeCA9IG1vZGVsTWF0cml4O1xuICBjb21tYW5kLmJvdW5kaW5nVm9sdW1lID0gYm91bmRpbmdWb2x1bWU7XG4gIGNvbW1hbmQuY3VsbCA9IGN1bGw7XG4gIGNvbW1hbmQuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZTtcblxuICBmcmFtZVN0YXRlLmNvbW1hbmRMaXN0LnB1c2goY29tbWFuZCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUFuZFF1ZXVlUGlja0NvbW1hbmQoXG4gIGNvbW1hbmQsXG4gIGZyYW1lU3RhdGUsXG4gIG1vZGVsTWF0cml4LFxuICBjdWxsLFxuICBib3VuZGluZ1ZvbHVtZVxuKSB7XG4gIGNvbW1hbmQubW9kZWxNYXRyaXggPSBtb2RlbE1hdHJpeDtcbiAgY29tbWFuZC5ib3VuZGluZ1ZvbHVtZSA9IGJvdW5kaW5nVm9sdW1lO1xuICBjb21tYW5kLmN1bGwgPSBjdWxsO1xuXG4gIGZyYW1lU3RhdGUuY29tbWFuZExpc3QucHVzaChjb21tYW5kKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQW5kUXVldWVDb21tYW5kcyhcbiAgY2xhc3NpZmljYXRpb25QcmltaXRpdmUsXG4gIGZyYW1lU3RhdGUsXG4gIGNvbG9yQ29tbWFuZHMsXG4gIHBpY2tDb21tYW5kcyxcbiAgbW9kZWxNYXRyaXgsXG4gIGN1bGwsXG4gIGRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lLFxuICB0d29QYXNzZXNcbikge1xuICB2YXIgcHJpbWl0aXZlID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3ByaW1pdGl2ZTtcbiAgUHJpbWl0aXZlLl91cGRhdGVCb3VuZGluZ1ZvbHVtZXMocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCBtb2RlbE1hdHJpeCk7XG5cbiAgdmFyIGJvdW5kaW5nVm9sdW1lcztcbiAgaWYgKGZyYW1lU3RhdGUubW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0QpIHtcbiAgICBib3VuZGluZ1ZvbHVtZXMgPSBwcmltaXRpdmUuX2JvdW5kaW5nU3BoZXJlV0M7XG4gIH0gZWxzZSBpZiAoZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuQ09MVU1CVVNfVklFVykge1xuICAgIGJvdW5kaW5nVm9sdW1lcyA9IHByaW1pdGl2ZS5fYm91bmRpbmdTcGhlcmVDVjtcbiAgfSBlbHNlIGlmIChcbiAgICBmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEICYmXG4gICAgZGVmaW5lZChwcmltaXRpdmUuX2JvdW5kaW5nU3BoZXJlMkQpXG4gICkge1xuICAgIGJvdW5kaW5nVm9sdW1lcyA9IHByaW1pdGl2ZS5fYm91bmRpbmdTcGhlcmUyRDtcbiAgfSBlbHNlIGlmIChkZWZpbmVkKHByaW1pdGl2ZS5fYm91bmRpbmdTcGhlcmVNb3JwaCkpIHtcbiAgICBib3VuZGluZ1ZvbHVtZXMgPSBwcmltaXRpdmUuX2JvdW5kaW5nU3BoZXJlTW9ycGg7XG4gIH1cblxuICB2YXIgY2xhc3NpZmljYXRpb25UeXBlID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuY2xhc3NpZmljYXRpb25UeXBlO1xuICB2YXIgcXVldWVUZXJyYWluQ29tbWFuZHMgPVxuICAgIGNsYXNzaWZpY2F0aW9uVHlwZSAhPT0gQ2xhc3NpZmljYXRpb25UeXBlLkNFU0lVTV8zRF9USUxFO1xuICB2YXIgcXVldWUzRFRpbGVzQ29tbWFuZHMgPSBjbGFzc2lmaWNhdGlvblR5cGUgIT09IENsYXNzaWZpY2F0aW9uVHlwZS5URVJSQUlOO1xuXG4gIHZhciBwYXNzZXMgPSBmcmFtZVN0YXRlLnBhc3NlcztcblxuICB2YXIgaTtcbiAgdmFyIGJvdW5kaW5nVm9sdW1lO1xuICB2YXIgY29tbWFuZDtcblxuICBpZiAocGFzc2VzLnJlbmRlcikge1xuICAgIHZhciBjb2xvckxlbmd0aCA9IGNvbG9yQ29tbWFuZHMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjb2xvckxlbmd0aDsgKytpKSB7XG4gICAgICBib3VuZGluZ1ZvbHVtZSA9IGJvdW5kaW5nVm9sdW1lc1tib3VuZGluZ1ZvbHVtZUluZGV4KGksIGNvbG9yTGVuZ3RoKV07XG4gICAgICBpZiAocXVldWVUZXJyYWluQ29tbWFuZHMpIHtcbiAgICAgICAgY29tbWFuZCA9IGNvbG9yQ29tbWFuZHNbaV07XG4gICAgICAgIHVwZGF0ZUFuZFF1ZXVlUmVuZGVyQ29tbWFuZChcbiAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgICAgY3VsbCxcbiAgICAgICAgICBib3VuZGluZ1ZvbHVtZSxcbiAgICAgICAgICBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXVlM0RUaWxlc0NvbW1hbmRzKSB7XG4gICAgICAgIGNvbW1hbmQgPSBjb2xvckNvbW1hbmRzW2ldLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0O1xuICAgICAgICB1cGRhdGVBbmRRdWV1ZVJlbmRlckNvbW1hbmQoXG4gICAgICAgICAgY29tbWFuZCxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICAgIGN1bGwsXG4gICAgICAgICAgYm91bmRpbmdWb2x1bWUsXG4gICAgICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZnJhbWVTdGF0ZS5pbnZlcnRDbGFzc2lmaWNhdGlvbikge1xuICAgICAgdmFyIGlnbm9yZVNob3dDb21tYW5kcyA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9jb21tYW5kc0lnbm9yZVNob3c7XG4gICAgICB2YXIgaWdub3JlU2hvd0NvbW1hbmRzTGVuZ3RoID0gaWdub3JlU2hvd0NvbW1hbmRzLmxlbmd0aDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBpZ25vcmVTaG93Q29tbWFuZHNMZW5ndGg7ICsraSkge1xuICAgICAgICBib3VuZGluZ1ZvbHVtZSA9IGJvdW5kaW5nVm9sdW1lc1tpXTtcbiAgICAgICAgY29tbWFuZCA9IGlnbm9yZVNob3dDb21tYW5kc1tpXTtcbiAgICAgICAgdXBkYXRlQW5kUXVldWVSZW5kZXJDb21tYW5kKFxuICAgICAgICAgIGNvbW1hbmQsXG4gICAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgICBtb2RlbE1hdHJpeCxcbiAgICAgICAgICBjdWxsLFxuICAgICAgICAgIGJvdW5kaW5nVm9sdW1lLFxuICAgICAgICAgIGRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHBhc3Nlcy5waWNrKSB7XG4gICAgdmFyIHBpY2tMZW5ndGggPSBwaWNrQ29tbWFuZHMubGVuZ3RoO1xuICAgIHZhciBwaWNrT2Zmc2V0cyA9IHByaW1pdGl2ZS5fcGlja09mZnNldHM7XG4gICAgZm9yIChpID0gMDsgaSA8IHBpY2tMZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHBpY2tPZmZzZXQgPSBwaWNrT2Zmc2V0c1tib3VuZGluZ1ZvbHVtZUluZGV4KGksIHBpY2tMZW5ndGgpXTtcbiAgICAgIGJvdW5kaW5nVm9sdW1lID0gYm91bmRpbmdWb2x1bWVzW3BpY2tPZmZzZXQuaW5kZXhdO1xuICAgICAgaWYgKHF1ZXVlVGVycmFpbkNvbW1hbmRzKSB7XG4gICAgICAgIGNvbW1hbmQgPSBwaWNrQ29tbWFuZHNbaV07XG4gICAgICAgIHVwZGF0ZUFuZFF1ZXVlUGlja0NvbW1hbmQoXG4gICAgICAgICAgY29tbWFuZCxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICAgIGN1bGwsXG4gICAgICAgICAgYm91bmRpbmdWb2x1bWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChxdWV1ZTNEVGlsZXNDb21tYW5kcykge1xuICAgICAgICBjb21tYW5kID0gcGlja0NvbW1hbmRzW2ldLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0O1xuICAgICAgICB1cGRhdGVBbmRRdWV1ZVBpY2tDb21tYW5kKFxuICAgICAgICAgIGNvbW1hbmQsXG4gICAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgICBtb2RlbE1hdHJpeCxcbiAgICAgICAgICBjdWxsLFxuICAgICAgICAgIGJvdW5kaW5nVm9sdW1lXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2FsbGVkIHdoZW4ge0BsaW5rIFZpZXdlcn0gb3Ige0BsaW5rIENlc2l1bVdpZGdldH0gcmVuZGVyIHRoZSBzY2VuZSB0b1xuICogZ2V0IHRoZSBkcmF3IGNvbW1hbmRzIG5lZWRlZCB0byByZW5kZXIgdGhpcyBwcmltaXRpdmUuXG4gKiA8cD5cbiAqIERvIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24gZGlyZWN0bHkuICBUaGlzIGlzIGRvY3VtZW50ZWQganVzdCB0b1xuICogbGlzdCB0aGUgZXhjZXB0aW9ucyB0aGF0IG1heSBiZSBwcm9wYWdhdGVkIHdoZW4gdGhlIHNjZW5lIGlzIHJlbmRlcmVkOlxuICogPC9wPlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBBbGwgaW5zdGFuY2UgZ2VvbWV0cmllcyBtdXN0IGhhdmUgdGhlIHNhbWUgcHJpbWl0aXZlVHlwZS5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBBcHBlYXJhbmNlIGFuZCBtYXRlcmlhbCBoYXZlIGEgdW5pZm9ybSB3aXRoIHRoZSBzYW1lIG5hbWUuXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gTm90IGFsbCBvZiB0aGUgZ2VvbWV0cnkgaW5zdGFuY2VzIGhhdmUgdGhlIHNhbWUgY29sb3IgYXR0cmlidXRlLlxuICovXG5DbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3ByaW1pdGl2ZSkgJiYgIWRlZmluZWQodGhpcy5nZW9tZXRyeUluc3RhbmNlcykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYXBwZWFyYW5jZSA9IHRoaXMuYXBwZWFyYW5jZTtcbiAgaWYgKGRlZmluZWQoYXBwZWFyYW5jZSkgJiYgZGVmaW5lZChhcHBlYXJhbmNlLm1hdGVyaWFsKSkge1xuICAgIGFwcGVhcmFuY2UubWF0ZXJpYWwudXBkYXRlKGZyYW1lU3RhdGUuY29udGV4dCk7XG4gIH1cblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBwcmltaXRpdmVPcHRpb25zID0gdGhpcy5fcHJpbWl0aXZlT3B0aW9ucztcblxuICBpZiAoIWRlZmluZWQodGhpcy5fcHJpbWl0aXZlKSkge1xuICAgIHZhciBpbnN0YW5jZXMgPSBBcnJheS5pc0FycmF5KHRoaXMuZ2VvbWV0cnlJbnN0YW5jZXMpXG4gICAgICA/IHRoaXMuZ2VvbWV0cnlJbnN0YW5jZXNcbiAgICAgIDogW3RoaXMuZ2VvbWV0cnlJbnN0YW5jZXNdO1xuICAgIHZhciBsZW5ndGggPSBpbnN0YW5jZXMubGVuZ3RoO1xuXG4gICAgdmFyIGk7XG4gICAgdmFyIGluc3RhbmNlO1xuICAgIHZhciBhdHRyaWJ1dGVzO1xuXG4gICAgdmFyIGhhc1BlckNvbG9yQXR0cmlidXRlID0gZmFsc2U7XG4gICAgdmFyIGFsbENvbG9yc1NhbWUgPSB0cnVlO1xuICAgIHZhciBmaXJzdENvbG9yO1xuICAgIHZhciBoYXNTcGhlcmljYWxFeHRlbnRzQXR0cmlidXRlID0gZmFsc2U7XG4gICAgdmFyIGhhc1BsYW5hckV4dGVudHNBdHRyaWJ1dGVzID0gZmFsc2U7XG5cbiAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgYXR0cmlidXRlcyA9IGluc3RhbmNlc1swXS5hdHRyaWJ1dGVzO1xuICAgICAgLy8gTm90IGV4cGVjdGluZyB0aGVzZSB0byBiZSBzZXQgYnkgdXNlcnMsIHNob3VsZCBvbmx5IGJlIHNldCB2aWEgR3JvdW5kUHJpbWl0aXZlLlxuICAgICAgLy8gU28gZG9uJ3QgY2hlY2sgZm9yIG1pc21hdGNoLlxuICAgICAgaGFzU3BoZXJpY2FsRXh0ZW50c0F0dHJpYnV0ZSA9IFNoYWRvd1ZvbHVtZUFwcGVhcmFuY2UuaGFzQXR0cmlidXRlc0ZvclNwaGVyaWNhbEV4dGVudHMoXG4gICAgICAgIGF0dHJpYnV0ZXNcbiAgICAgICk7XG4gICAgICBoYXNQbGFuYXJFeHRlbnRzQXR0cmlidXRlcyA9IFNoYWRvd1ZvbHVtZUFwcGVhcmFuY2UuaGFzQXR0cmlidXRlc0ZvclRleHR1cmVDb29yZGluYXRlUGxhbmVzKFxuICAgICAgICBhdHRyaWJ1dGVzXG4gICAgICApO1xuICAgICAgZmlyc3RDb2xvciA9IGF0dHJpYnV0ZXMuY29sb3I7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpbnN0YW5jZSA9IGluc3RhbmNlc1tpXTtcbiAgICAgIHZhciBjb2xvciA9IGluc3RhbmNlLmF0dHJpYnV0ZXMuY29sb3I7XG4gICAgICBpZiAoZGVmaW5lZChjb2xvcikpIHtcbiAgICAgICAgaGFzUGVyQ29sb3JBdHRyaWJ1dGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGVsc2UgaWYgKGhhc1BlckNvbG9yQXR0cmlidXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcIkFsbCBHZW9tZXRyeUluc3RhbmNlcyBtdXN0IGhhdmUgY29sb3IgYXR0cmlidXRlcyB0byB1c2UgcGVyLWluc3RhbmNlIGNvbG9yLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgYWxsQ29sb3JzU2FtZSA9XG4gICAgICAgIGFsbENvbG9yc1NhbWUgJiZcbiAgICAgICAgZGVmaW5lZChjb2xvcikgJiZcbiAgICAgICAgQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmVxdWFscyhmaXJzdENvbG9yLCBjb2xvcik7XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gYXR0cmlidXRlcyBleGlzdCBmb3IgY29tcHV0aW5nIHNwaGVyaWNhbCBleHRlbnRzIG9yIGZyYWdtZW50IGN1bGxpbmcsXG4gICAgLy8gdGhyb3cgaWYgdGhlIGNvbG9ycyBhcmVuJ3QgYWxsIHRoZSBzYW1lLlxuICAgIGlmIChcbiAgICAgICFhbGxDb2xvcnNTYW1lICYmXG4gICAgICAhaGFzU3BoZXJpY2FsRXh0ZW50c0F0dHJpYnV0ZSAmJlxuICAgICAgIWhhc1BsYW5hckV4dGVudHNBdHRyaWJ1dGVzXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgIFwiQWxsIEdlb21ldHJ5SW5zdGFuY2VzIG11c3QgaGF2ZSB0aGUgc2FtZSBjb2xvciBhdHRyaWJ1dGUgZXhjZXB0IHZpYSBHcm91bmRQcmltaXRpdmVzXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gZGVmYXVsdCB0byBhIGNvbG9yIGFwcGVhcmFuY2VcbiAgICBpZiAoaGFzUGVyQ29sb3JBdHRyaWJ1dGUgJiYgIWRlZmluZWQoYXBwZWFyYW5jZSkpIHtcbiAgICAgIGFwcGVhcmFuY2UgPSBuZXcgUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2Uoe1xuICAgICAgICBmbGF0OiB0cnVlLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmFwcGVhcmFuY2UgPSBhcHBlYXJhbmNlO1xuICAgIH1cblxuICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgaWYgKFxuICAgICAgIWhhc1BlckNvbG9yQXR0cmlidXRlICYmXG4gICAgICBhcHBlYXJhbmNlIGluc3RhbmNlb2YgUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2VcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgXCJQZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZSByZXF1aXJlcyBjb2xvciBHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyBvbiBhbGwgR2VvbWV0cnlJbnN0YW5jZXNcIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZGVmaW5lZChhcHBlYXJhbmNlLm1hdGVyaWFsKSAmJlxuICAgICAgIWhhc1NwaGVyaWNhbEV4dGVudHNBdHRyaWJ1dGUgJiZcbiAgICAgICFoYXNQbGFuYXJFeHRlbnRzQXR0cmlidXRlc1xuICAgICkge1xuICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICBcIk1hdGVyaWFscyBvbiBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgZXhjZXB0IHZpYSBHcm91bmRQcmltaXRpdmVzXCJcbiAgICAgICk7XG4gICAgfVxuICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgdGhpcy5fdXNlUGlja09mZnNldHMgPVxuICAgICAgIWhhc1NwaGVyaWNhbEV4dGVudHNBdHRyaWJ1dGUgJiYgIWhhc1BsYW5hckV4dGVudHNBdHRyaWJ1dGVzO1xuICAgIHRoaXMuX2hhc1NwaGVyaWNhbEV4dGVudHNBdHRyaWJ1dGUgPSBoYXNTcGhlcmljYWxFeHRlbnRzQXR0cmlidXRlO1xuICAgIHRoaXMuX2hhc1BsYW5hckV4dGVudHNBdHRyaWJ1dGVzID0gaGFzUGxhbmFyRXh0ZW50c0F0dHJpYnV0ZXM7XG4gICAgdGhpcy5faGFzUGVyQ29sb3JBdHRyaWJ1dGUgPSBoYXNQZXJDb2xvckF0dHJpYnV0ZTtcblxuICAgIHZhciBnZW9tZXRyeUluc3RhbmNlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgaW5zdGFuY2UgPSBpbnN0YW5jZXNbaV07XG4gICAgICBnZW9tZXRyeUluc3RhbmNlc1tpXSA9IG5ldyBHZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgZ2VvbWV0cnk6IGluc3RhbmNlLmdlb21ldHJ5LFxuICAgICAgICBhdHRyaWJ1dGVzOiBpbnN0YW5jZS5hdHRyaWJ1dGVzLFxuICAgICAgICBtb2RlbE1hdHJpeDogaW5zdGFuY2UubW9kZWxNYXRyaXgsXG4gICAgICAgIGlkOiBpbnN0YW5jZS5pZCxcbiAgICAgICAgcGlja1ByaW1pdGl2ZTogZGVmYXVsdFZhbHVlKHRoaXMuX3BpY2tQcmltaXRpdmUsIHRoYXQpLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpbWl0aXZlT3B0aW9ucy5hcHBlYXJhbmNlID0gYXBwZWFyYW5jZTtcbiAgICBwcmltaXRpdmVPcHRpb25zLmdlb21ldHJ5SW5zdGFuY2VzID0gZ2VvbWV0cnlJbnN0YW5jZXM7XG5cbiAgICBpZiAoZGVmaW5lZCh0aGlzLl9jcmVhdGVCb3VuZGluZ1ZvbHVtZUZ1bmN0aW9uKSkge1xuICAgICAgcHJpbWl0aXZlT3B0aW9ucy5fY3JlYXRlQm91bmRpbmdWb2x1bWVGdW5jdGlvbiA9IGZ1bmN0aW9uIChcbiAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgZ2VvbWV0cnlcbiAgICAgICkge1xuICAgICAgICB0aGF0Ll9jcmVhdGVCb3VuZGluZ1ZvbHVtZUZ1bmN0aW9uKGZyYW1lU3RhdGUsIGdlb21ldHJ5KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpbWl0aXZlT3B0aW9ucy5fY3JlYXRlUmVuZGVyU3RhdGVzRnVuY3Rpb24gPSBmdW5jdGlvbiAoXG4gICAgICBwcmltaXRpdmUsXG4gICAgICBjb250ZXh0LFxuICAgICAgYXBwZWFyYW5jZSxcbiAgICAgIHR3b1Bhc3Nlc1xuICAgICkge1xuICAgICAgY3JlYXRlUmVuZGVyU3RhdGVzKHRoYXQsIGNvbnRleHQpO1xuICAgIH07XG4gICAgcHJpbWl0aXZlT3B0aW9ucy5fY3JlYXRlU2hhZGVyUHJvZ3JhbUZ1bmN0aW9uID0gZnVuY3Rpb24gKFxuICAgICAgcHJpbWl0aXZlLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIGFwcGVhcmFuY2VcbiAgICApIHtcbiAgICAgIGNyZWF0ZVNoYWRlclByb2dyYW0odGhhdCwgZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICBwcmltaXRpdmVPcHRpb25zLl9jcmVhdGVDb21tYW5kc0Z1bmN0aW9uID0gZnVuY3Rpb24gKFxuICAgICAgcHJpbWl0aXZlLFxuICAgICAgYXBwZWFyYW5jZSxcbiAgICAgIG1hdGVyaWFsLFxuICAgICAgdHJhbnNsdWNlbnQsXG4gICAgICB0d29QYXNzZXMsXG4gICAgICBjb2xvckNvbW1hbmRzLFxuICAgICAgcGlja0NvbW1hbmRzXG4gICAgKSB7XG4gICAgICBjcmVhdGVDb21tYW5kcyhcbiAgICAgICAgdGhhdCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBjb2xvckNvbW1hbmRzLFxuICAgICAgICBwaWNrQ29tbWFuZHNcbiAgICAgICk7XG4gICAgfTtcblxuICAgIGlmIChkZWZpbmVkKHRoaXMuX3VwZGF0ZUFuZFF1ZXVlQ29tbWFuZHNGdW5jdGlvbikpIHtcbiAgICAgIHByaW1pdGl2ZU9wdGlvbnMuX3VwZGF0ZUFuZFF1ZXVlQ29tbWFuZHNGdW5jdGlvbiA9IGZ1bmN0aW9uIChcbiAgICAgICAgcHJpbWl0aXZlLFxuICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICBjb2xvckNvbW1hbmRzLFxuICAgICAgICBwaWNrQ29tbWFuZHMsXG4gICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICBjdWxsLFxuICAgICAgICBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSxcbiAgICAgICAgdHdvUGFzc2VzXG4gICAgICApIHtcbiAgICAgICAgdGhhdC5fdXBkYXRlQW5kUXVldWVDb21tYW5kc0Z1bmN0aW9uKFxuICAgICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIGNvbG9yQ29tbWFuZHMsXG4gICAgICAgICAgcGlja0NvbW1hbmRzLFxuICAgICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICAgIGN1bGwsXG4gICAgICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gICAgICAgICAgdHdvUGFzc2VzXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmltaXRpdmVPcHRpb25zLl91cGRhdGVBbmRRdWV1ZUNvbW1hbmRzRnVuY3Rpb24gPSBmdW5jdGlvbiAoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgY29sb3JDb21tYW5kcyxcbiAgICAgICAgcGlja0NvbW1hbmRzLFxuICAgICAgICBtb2RlbE1hdHJpeCxcbiAgICAgICAgY3VsbCxcbiAgICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gICAgICAgIHR3b1Bhc3Nlc1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZUFuZFF1ZXVlQ29tbWFuZHMoXG4gICAgICAgICAgdGhhdCxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIGNvbG9yQ29tbWFuZHMsXG4gICAgICAgICAgcGlja0NvbW1hbmRzLFxuICAgICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICAgIGN1bGwsXG4gICAgICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gICAgICAgICAgdHdvUGFzc2VzXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuX3ByaW1pdGl2ZSA9IG5ldyBQcmltaXRpdmUocHJpbWl0aXZlT3B0aW9ucyk7XG4gICAgdGhpcy5fcHJpbWl0aXZlLnJlYWR5UHJvbWlzZS50aGVuKGZ1bmN0aW9uIChwcmltaXRpdmUpIHtcbiAgICAgIHRoYXQuX3JlYWR5ID0gdHJ1ZTtcblxuICAgICAgaWYgKHRoYXQucmVsZWFzZUdlb21ldHJ5SW5zdGFuY2VzKSB7XG4gICAgICAgIHRoYXQuZ2VvbWV0cnlJbnN0YW5jZXMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBlcnJvciA9IHByaW1pdGl2ZS5fZXJyb3I7XG4gICAgICBpZiAoIWRlZmluZWQoZXJyb3IpKSB7XG4gICAgICAgIHRoYXQuX3JlYWR5UHJvbWlzZS5yZXNvbHZlKHRoYXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhhdC5fcmVhZHlQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoXG4gICAgdGhpcy5kZWJ1Z1Nob3dTaGFkb3dWb2x1bWUgJiZcbiAgICAhdGhpcy5fZGVidWdTaG93U2hhZG93Vm9sdW1lICYmXG4gICAgdGhpcy5fcmVhZHlcbiAgKSB7XG4gICAgdGhpcy5fZGVidWdTaG93U2hhZG93Vm9sdW1lID0gdHJ1ZTtcbiAgICB0aGlzLl9yc1N0ZW5jaWxEZXB0aFBhc3MgPSBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUoXG4gICAgICBnZXRTdGVuY2lsRGVwdGhSZW5kZXJTdGF0ZShmYWxzZSwgZmFsc2UpXG4gICAgKTtcbiAgICB0aGlzLl9yc1N0ZW5jaWxEZXB0aFBhc3MzRFRpbGVzID0gUmVuZGVyU3RhdGUuZnJvbUNhY2hlKFxuICAgICAgZ2V0U3RlbmNpbERlcHRoUmVuZGVyU3RhdGUoZmFsc2UsIHRydWUpXG4gICAgKTtcbiAgICB0aGlzLl9yc0NvbG9yUGFzcyA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShnZXRDb2xvclJlbmRlclN0YXRlKGZhbHNlKSk7XG4gIH0gZWxzZSBpZiAoIXRoaXMuZGVidWdTaG93U2hhZG93Vm9sdW1lICYmIHRoaXMuX2RlYnVnU2hvd1NoYWRvd1ZvbHVtZSkge1xuICAgIHRoaXMuX2RlYnVnU2hvd1NoYWRvd1ZvbHVtZSA9IGZhbHNlO1xuICAgIHRoaXMuX3JzU3RlbmNpbERlcHRoUGFzcyA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShcbiAgICAgIGdldFN0ZW5jaWxEZXB0aFJlbmRlclN0YXRlKHRydWUsIGZhbHNlKVxuICAgICk7XG4gICAgdGhpcy5fcnNTdGVuY2lsRGVwdGhQYXNzM0RUaWxlcyA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShcbiAgICAgIGdldFN0ZW5jaWxEZXB0aFJlbmRlclN0YXRlKHRydWUsIHRydWUpXG4gICAgKTtcbiAgICB0aGlzLl9yc0NvbG9yUGFzcyA9IFJlbmRlclN0YXRlLmZyb21DYWNoZShnZXRDb2xvclJlbmRlclN0YXRlKHRydWUpKTtcbiAgfVxuICAvLyBVcGRhdGUgcHJpbWl0aXZlIGFwcGVhcmFuY2VcbiAgaWYgKHRoaXMuX3ByaW1pdGl2ZS5hcHBlYXJhbmNlICE9PSBhcHBlYXJhbmNlKSB7XG4gICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAvLyBDaGVjayBpZiB0aGUgYXBwZWFyYW5jZSBpcyBzdXBwb3J0ZWQgYnkgdGhlIGdlb21ldHJ5IGF0dHJpYnV0ZXNcbiAgICBpZiAoXG4gICAgICAhdGhpcy5faGFzU3BoZXJpY2FsRXh0ZW50c0F0dHJpYnV0ZSAmJlxuICAgICAgIXRoaXMuX2hhc1BsYW5hckV4dGVudHNBdHRyaWJ1dGVzICYmXG4gICAgICBkZWZpbmVkKGFwcGVhcmFuY2UubWF0ZXJpYWwpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgIFwiTWF0ZXJpYWxzIG9uIENsYXNzaWZpY2F0aW9uUHJpbWl0aXZlcyBhcmUgbm90IHN1cHBvcnRlZCBleGNlcHQgdmlhIEdyb3VuZFByaW1pdGl2ZVwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAhdGhpcy5faGFzUGVyQ29sb3JBdHRyaWJ1dGUgJiZcbiAgICAgIGFwcGVhcmFuY2UgaW5zdGFuY2VvZiBQZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICBcIlBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlIHJlcXVpcmVzIGNvbG9yIEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVcIlxuICAgICAgKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgdGhpcy5fcHJpbWl0aXZlLmFwcGVhcmFuY2UgPSBhcHBlYXJhbmNlO1xuICB9XG5cbiAgdGhpcy5fcHJpbWl0aXZlLnNob3cgPSB0aGlzLnNob3c7XG4gIHRoaXMuX3ByaW1pdGl2ZS5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XG4gIHRoaXMuX3ByaW1pdGl2ZS51cGRhdGUoZnJhbWVTdGF0ZSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1vZGlmaWFibGUgcGVyLWluc3RhbmNlIGF0dHJpYnV0ZXMgZm9yIGEge0BsaW5rIEdlb21ldHJ5SW5zdGFuY2V9LlxuICpcbiAqIEBwYXJhbSB7Kn0gaWQgVGhlIGlkIG9mIHRoZSB7QGxpbmsgR2VvbWV0cnlJbnN0YW5jZX0uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgdHlwZWQgYXJyYXkgaW4gdGhlIGF0dHJpYnV0ZSdzIGZvcm1hdCBvciB1bmRlZmluZWQgaWYgdGhlIGlzIG5vIGluc3RhbmNlIHdpdGggaWQuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IG11c3QgY2FsbCB1cGRhdGUgYmVmb3JlIGNhbGxpbmcgZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKCdhbiBpZCcpO1xuICogYXR0cmlidXRlcy5jb2xvciA9IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShDZXNpdW0uQ29sb3IuQVFVQSk7XG4gKiBhdHRyaWJ1dGVzLnNob3cgPSBDZXNpdW0uU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZSh0cnVlKTtcbiAqL1xuQ2xhc3NpZmljYXRpb25QcmltaXRpdmUucHJvdG90eXBlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKFxuICBpZFxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh0aGlzLl9wcmltaXRpdmUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJtdXN0IGNhbGwgdXBkYXRlIGJlZm9yZSBjYWxsaW5nIGdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICByZXR1cm4gdGhpcy5fcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKGlkKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgZmFsc2UuXG4gKiA8cD5cbiAqIElmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uXG4gKiA8L3A+XG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgPGNvZGU+ZmFsc2U8L2NvZGU+LlxuICpcbiAqIEBzZWUgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUjZGVzdHJveVxuICovXG5DbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIFdlYkdMIHJlc291cmNlcyBoZWxkIGJ5IHRoaXMgb2JqZWN0LiAgRGVzdHJveWluZyBhbiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljXG4gKiByZWxlYXNlIG9mIFdlYkdMIHJlc291cmNlcywgaW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0byBkZXN0cm95IHRoaXMgb2JqZWN0LlxuICogPHA+XG4gKiBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uICBUaGVyZWZvcmUsXG4gKiBhc3NpZ24gdGhlIHJldHVybiB2YWx1ZSAoPGNvZGU+dW5kZWZpbmVkPC9jb2RlPikgdG8gdGhlIG9iamVjdCBhcyBkb25lIGluIHRoZSBleGFtcGxlLlxuICogPC9wPlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogZSA9IGUgJiYgZS5kZXN0cm95KCk7XG4gKlxuICogQHNlZSBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZSNpc0Rlc3Ryb3llZFxuICovXG5DbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fcHJpbWl0aXZlID0gdGhpcy5fcHJpbWl0aXZlICYmIHRoaXMuX3ByaW1pdGl2ZS5kZXN0cm95KCk7XG4gIHRoaXMuX3NwID0gdGhpcy5fc3AgJiYgdGhpcy5fc3AuZGVzdHJveSgpO1xuICB0aGlzLl9zcFBpY2sgPSB0aGlzLl9zcFBpY2sgJiYgdGhpcy5fc3BQaWNrLmRlc3Ryb3koKTtcbiAgdGhpcy5fc3BDb2xvciA9IHRoaXMuX3NwQ29sb3IgJiYgdGhpcy5fc3BDb2xvci5kZXN0cm95KCk7XG5cbiAgLy8gRGVyaXZlZCBwcm9ncmFtcywgZGVzdHJveWVkIGFib3ZlIGlmIHRoZXkgZXhpc3RlZC5cbiAgdGhpcy5fc3BQaWNrMkQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NwQ29sb3IyRCA9IHVuZGVmaW5lZDtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgQ2xhc3NpZmljYXRpb25QcmltaXRpdmU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14662\n')},73001:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * Whether a classification affects terrain, 3D Tiles or both.\n *\n * @enum {Number}\n */\nvar ClassificationType = {\n  /**\n   * Only terrain will be classified.\n   *\n   * @type {Number}\n   * @constant\n   */\n  TERRAIN: 0,\n  /**\n   * Only 3D Tiles will be classified.\n   *\n   * @type {Number}\n   * @constant\n   */\n  CESIUM_3D_TILE: 1,\n  /**\n   * Both terrain and 3D Tiles will be classified.\n   *\n   * @type {Number}\n   * @constant\n   */\n  BOTH: 2,\n};\n\n/**\n * @private\n */\nClassificationType.NUMBER_OF_CLASSIFICATION_TYPES = 3;\n\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(ClassificationType));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMwMDEuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5REFBZSxpQ0FBaUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9DbGFzc2lmaWNhdGlvblR5cGUuanM/NzM4NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFdoZXRoZXIgYSBjbGFzc2lmaWNhdGlvbiBhZmZlY3RzIHRlcnJhaW4sIDNEIFRpbGVzIG9yIGJvdGguXG4gKlxuICogQGVudW0ge051bWJlcn1cbiAqL1xudmFyIENsYXNzaWZpY2F0aW9uVHlwZSA9IHtcbiAgLyoqXG4gICAqIE9ubHkgdGVycmFpbiB3aWxsIGJlIGNsYXNzaWZpZWQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgVEVSUkFJTjogMCxcbiAgLyoqXG4gICAqIE9ubHkgM0QgVGlsZXMgd2lsbCBiZSBjbGFzc2lmaWVkLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIENFU0lVTV8zRF9USUxFOiAxLFxuICAvKipcbiAgICogQm90aCB0ZXJyYWluIGFuZCAzRCBUaWxlcyB3aWxsIGJlIGNsYXNzaWZpZWQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgQk9USDogMixcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuQ2xhc3NpZmljYXRpb25UeXBlLk5VTUJFUl9PRl9DTEFTU0lGSUNBVElPTl9UWVBFUyA9IDM7XG5cbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoQ2xhc3NpZmljYXRpb25UeXBlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///73001\n')},44683:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82982);\n\n\n\n\n/**\n * A Plane in Hessian Normal form to be used with {@link ClippingPlaneCollection}.\n * Compatible with mathematics functions in {@link Plane}\n *\n * @alias ClippingPlane\n * @constructor\n *\n * @param {Cartesian3} normal The plane\'s normal (normalized).\n * @param {Number} distance The shortest distance from the origin to the plane.  The sign of\n * <code>distance</code> determines which side of the plane the origin\n * is on.  If <code>distance</code> is positive, the origin is in the half-space\n * in the direction of the normal; if negative, the origin is in the half-space\n * opposite to the normal; if zero, the plane passes through the origin.\n */\nfunction ClippingPlane(normal, distance) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("normal", normal);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("distance", distance);\n  //>>includeEnd(\'debug\');\n\n  this._distance = distance;\n  this._normal = new UpdateChangedCartesian3(normal, this);\n  this.onChangeCallback = undefined;\n  this.index = -1; // to be set by ClippingPlaneCollection\n}\n\nObject.defineProperties(ClippingPlane.prototype, {\n  /**\n   * The shortest distance from the origin to the plane.  The sign of\n   * <code>distance</code> determines which side of the plane the origin\n   * is on.  If <code>distance</code> is positive, the origin is in the half-space\n   * in the direction of the normal; if negative, the origin is in the half-space\n   * opposite to the normal; if zero, the plane passes through the origin.\n   *\n   * @type {Number}\n   * @memberof ClippingPlane.prototype\n   */\n  distance: {\n    get: function () {\n      return this._distance;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("value", value);\n      //>>includeEnd(\'debug\');\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this.onChangeCallback) && value !== this._distance) {\n        this.onChangeCallback(this.index);\n      }\n      this._distance = value;\n    },\n  },\n  /**\n   * The plane\'s normal.\n   *\n   * @type {Cartesian3}\n   * @memberof ClippingPlane.prototype\n   */\n  normal: {\n    get: function () {\n      return this._normal;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("value", value);\n      //>>includeEnd(\'debug\');\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this.onChangeCallback) &&\n        !_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equals */ .Z.equals(this._normal._cartesian3, value)\n      ) {\n        this.onChangeCallback(this.index);\n      }\n      // Set without firing callback again\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(value, this._normal._cartesian3);\n    },\n  },\n});\n\n/**\n * Create a ClippingPlane from a Plane object.\n *\n * @param {Plane} plane The plane containing parameters to copy\n * @param {ClippingPlane} [result] The object on which to store the result\n * @returns {ClippingPlane} The ClippingPlane generated from the plane\'s parameters.\n */\nClippingPlane.fromPlane = function (plane, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("plane", plane);\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(result)) {\n    result = new ClippingPlane(plane.normal, plane.distance);\n  } else {\n    result.normal = plane.normal;\n    result.distance = plane.distance;\n  }\n  return result;\n};\n\n/**\n * Clones the ClippingPlane without setting its ownership.\n * @param {ClippingPlane} clippingPlane The ClippingPlane to be cloned\n * @param {ClippingPlane} [result] The object on which to store the cloned parameters.\n * @returns {ClippingPlane} a clone of the input ClippingPlane\n */\nClippingPlane.clone = function (clippingPlane, result) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(result)) {\n    return new ClippingPlane(clippingPlane.normal, clippingPlane.distance);\n  }\n  result.normal = clippingPlane.normal;\n  result.distance = clippingPlane.distance;\n  return result;\n};\n\n/**\n * Wrapper on Cartesian3 that allows detection of Plane changes from "members of members," for example:\n *\n * var clippingPlane = new ClippingPlane(...);\n * clippingPlane.normal.z = -1.0;\n *\n * @private\n */\nfunction UpdateChangedCartesian3(normal, clippingPlane) {\n  this._clippingPlane = clippingPlane;\n  this._cartesian3 = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(normal);\n}\n\nObject.defineProperties(UpdateChangedCartesian3.prototype, {\n  x: {\n    get: function () {\n      return this._cartesian3.x;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("value", value);\n      //>>includeEnd(\'debug\');\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this._clippingPlane.onChangeCallback) &&\n        value !== this._cartesian3.x\n      ) {\n        this._clippingPlane.onChangeCallback(this._clippingPlane.index);\n      }\n      this._cartesian3.x = value;\n    },\n  },\n  y: {\n    get: function () {\n      return this._cartesian3.y;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("value", value);\n      //>>includeEnd(\'debug\');\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this._clippingPlane.onChangeCallback) &&\n        value !== this._cartesian3.y\n      ) {\n        this._clippingPlane.onChangeCallback(this._clippingPlane.index);\n      }\n      this._cartesian3.y = value;\n    },\n  },\n  z: {\n    get: function () {\n      return this._cartesian3.z;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("value", value);\n      //>>includeEnd(\'debug\');\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(this._clippingPlane.onChangeCallback) &&\n        value !== this._cartesian3.z\n      ) {\n        this._clippingPlane.onChangeCallback(this._clippingPlane.index);\n      }\n      this._cartesian3.z = value;\n    },\n  },\n});\n/* harmony default export */ __webpack_exports__["Z"] = (ClippingPlane);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQ2ODMuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQStDO0FBQ1Y7QUFDSTs7QUFFekM7QUFDQSxtREFBbUQsOEJBQThCO0FBQ2pGLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBLG1DQUFtQztBQUNuQywyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsNkJBQTZCO0FBQzdCO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU0sMkZBQW1CO0FBQ3pCO0FBQ0EsVUFBVSxxRUFBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNLDJGQUFtQjtBQUN6QjtBQUNBO0FBQ0EsUUFBUSxxRUFBTztBQUNmLFNBQVMsa0ZBQWlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxnRkFBZ0I7QUFDdEIsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLGVBQWU7QUFDMUIsYUFBYSxlQUFlO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMkZBQW1CO0FBQ3JCOztBQUVBLE9BQU8scUVBQU87QUFDZDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUIsV0FBVyxlQUFlO0FBQzFCLGFBQWEsZUFBZTtBQUM1QjtBQUNBO0FBQ0EsT0FBTyxxRUFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnRkFBZ0I7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU0sMkZBQW1CO0FBQ3pCO0FBQ0E7QUFDQSxRQUFRLHFFQUFPO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNLDJGQUFtQjtBQUN6QjtBQUNBO0FBQ0EsUUFBUSxxRUFBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTSwyRkFBbUI7QUFDekI7QUFDQTtBQUNBLFFBQVEscUVBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0QseURBQWUsYUFBYSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0NsaXBwaW5nUGxhbmUuanM/NTQ0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBBIFBsYW5lIGluIEhlc3NpYW4gTm9ybWFsIGZvcm0gdG8gYmUgdXNlZCB3aXRoIHtAbGluayBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbn0uXG4gKiBDb21wYXRpYmxlIHdpdGggbWF0aGVtYXRpY3MgZnVuY3Rpb25zIGluIHtAbGluayBQbGFuZX1cbiAqXG4gKiBAYWxpYXMgQ2xpcHBpbmdQbGFuZVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBub3JtYWwgVGhlIHBsYW5lJ3Mgbm9ybWFsIChub3JtYWxpemVkKS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBkaXN0YW5jZSBUaGUgc2hvcnRlc3QgZGlzdGFuY2UgZnJvbSB0aGUgb3JpZ2luIHRvIHRoZSBwbGFuZS4gIFRoZSBzaWduIG9mXG4gKiA8Y29kZT5kaXN0YW5jZTwvY29kZT4gZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBwbGFuZSB0aGUgb3JpZ2luXG4gKiBpcyBvbi4gIElmIDxjb2RlPmRpc3RhbmNlPC9jb2RlPiBpcyBwb3NpdGl2ZSwgdGhlIG9yaWdpbiBpcyBpbiB0aGUgaGFsZi1zcGFjZVxuICogaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgbm9ybWFsOyBpZiBuZWdhdGl2ZSwgdGhlIG9yaWdpbiBpcyBpbiB0aGUgaGFsZi1zcGFjZVxuICogb3Bwb3NpdGUgdG8gdGhlIG5vcm1hbDsgaWYgemVybywgdGhlIHBsYW5lIHBhc3NlcyB0aHJvdWdoIHRoZSBvcmlnaW4uXG4gKi9cbmZ1bmN0aW9uIENsaXBwaW5nUGxhbmUobm9ybWFsLCBkaXN0YW5jZSkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwibm9ybWFsXCIsIG5vcm1hbCk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJkaXN0YW5jZVwiLCBkaXN0YW5jZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX2Rpc3RhbmNlID0gZGlzdGFuY2U7XG4gIHRoaXMuX25vcm1hbCA9IG5ldyBVcGRhdGVDaGFuZ2VkQ2FydGVzaWFuMyhub3JtYWwsIHRoaXMpO1xuICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gIHRoaXMuaW5kZXggPSAtMTsgLy8gdG8gYmUgc2V0IGJ5IENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uXG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKENsaXBwaW5nUGxhbmUucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBUaGUgc2hvcnRlc3QgZGlzdGFuY2UgZnJvbSB0aGUgb3JpZ2luIHRvIHRoZSBwbGFuZS4gIFRoZSBzaWduIG9mXG4gICAqIDxjb2RlPmRpc3RhbmNlPC9jb2RlPiBkZXRlcm1pbmVzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHRoZSBvcmlnaW5cbiAgICogaXMgb24uICBJZiA8Y29kZT5kaXN0YW5jZTwvY29kZT4gaXMgcG9zaXRpdmUsIHRoZSBvcmlnaW4gaXMgaW4gdGhlIGhhbGYtc3BhY2VcbiAgICogaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgbm9ybWFsOyBpZiBuZWdhdGl2ZSwgdGhlIG9yaWdpbiBpcyBpbiB0aGUgaGFsZi1zcGFjZVxuICAgKiBvcHBvc2l0ZSB0byB0aGUgbm9ybWFsOyBpZiB6ZXJvLCB0aGUgcGxhbmUgcGFzc2VzIHRocm91Z2ggdGhlIG9yaWdpbi5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQG1lbWJlcm9mIENsaXBwaW5nUGxhbmUucHJvdG90eXBlXG4gICAqL1xuICBkaXN0YW5jZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Rpc3RhbmNlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBDaGVjay50eXBlT2YubnVtYmVyKFwidmFsdWVcIiwgdmFsdWUpO1xuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICBpZiAoZGVmaW5lZCh0aGlzLm9uQ2hhbmdlQ2FsbGJhY2spICYmIHZhbHVlICE9PSB0aGlzLl9kaXN0YW5jZSkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcy5pbmRleCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9kaXN0YW5jZSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBUaGUgcGxhbmUncyBub3JtYWwuXG4gICAqXG4gICAqIEB0eXBlIHtDYXJ0ZXNpYW4zfVxuICAgKiBAbWVtYmVyb2YgQ2xpcHBpbmdQbGFuZS5wcm90b3R5cGVcbiAgICovXG4gIG5vcm1hbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX25vcm1hbDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgQ2hlY2sudHlwZU9mLm9iamVjdChcInZhbHVlXCIsIHZhbHVlKTtcbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgaWYgKFxuICAgICAgICBkZWZpbmVkKHRoaXMub25DaGFuZ2VDYWxsYmFjaykgJiZcbiAgICAgICAgIUNhcnRlc2lhbjMuZXF1YWxzKHRoaXMuX25vcm1hbC5fY2FydGVzaWFuMywgdmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMuaW5kZXgpO1xuICAgICAgfVxuICAgICAgLy8gU2V0IHdpdGhvdXQgZmlyaW5nIGNhbGxiYWNrIGFnYWluXG4gICAgICBDYXJ0ZXNpYW4zLmNsb25lKHZhbHVlLCB0aGlzLl9ub3JtYWwuX2NhcnRlc2lhbjMpO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBDcmVhdGUgYSBDbGlwcGluZ1BsYW5lIGZyb20gYSBQbGFuZSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtQbGFuZX0gcGxhbmUgVGhlIHBsYW5lIGNvbnRhaW5pbmcgcGFyYW1ldGVycyB0byBjb3B5XG4gKiBAcGFyYW0ge0NsaXBwaW5nUGxhbmV9IFtyZXN1bHRdIFRoZSBvYmplY3Qgb24gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdFxuICogQHJldHVybnMge0NsaXBwaW5nUGxhbmV9IFRoZSBDbGlwcGluZ1BsYW5lIGdlbmVyYXRlZCBmcm9tIHRoZSBwbGFuZSdzIHBhcmFtZXRlcnMuXG4gKi9cbkNsaXBwaW5nUGxhbmUuZnJvbVBsYW5lID0gZnVuY3Rpb24gKHBsYW5lLCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcInBsYW5lXCIsIHBsYW5lKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgQ2xpcHBpbmdQbGFuZShwbGFuZS5ub3JtYWwsIHBsYW5lLmRpc3RhbmNlKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQubm9ybWFsID0gcGxhbmUubm9ybWFsO1xuICAgIHJlc3VsdC5kaXN0YW5jZSA9IHBsYW5lLmRpc3RhbmNlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIENsb25lcyB0aGUgQ2xpcHBpbmdQbGFuZSB3aXRob3V0IHNldHRpbmcgaXRzIG93bmVyc2hpcC5cbiAqIEBwYXJhbSB7Q2xpcHBpbmdQbGFuZX0gY2xpcHBpbmdQbGFuZSBUaGUgQ2xpcHBpbmdQbGFuZSB0byBiZSBjbG9uZWRcbiAqIEBwYXJhbSB7Q2xpcHBpbmdQbGFuZX0gW3Jlc3VsdF0gVGhlIG9iamVjdCBvbiB3aGljaCB0byBzdG9yZSB0aGUgY2xvbmVkIHBhcmFtZXRlcnMuXG4gKiBAcmV0dXJucyB7Q2xpcHBpbmdQbGFuZX0gYSBjbG9uZSBvZiB0aGUgaW5wdXQgQ2xpcHBpbmdQbGFuZVxuICovXG5DbGlwcGluZ1BsYW5lLmNsb25lID0gZnVuY3Rpb24gKGNsaXBwaW5nUGxhbmUsIHJlc3VsdCkge1xuICBpZiAoIWRlZmluZWQocmVzdWx0KSkge1xuICAgIHJldHVybiBuZXcgQ2xpcHBpbmdQbGFuZShjbGlwcGluZ1BsYW5lLm5vcm1hbCwgY2xpcHBpbmdQbGFuZS5kaXN0YW5jZSk7XG4gIH1cbiAgcmVzdWx0Lm5vcm1hbCA9IGNsaXBwaW5nUGxhbmUubm9ybWFsO1xuICByZXN1bHQuZGlzdGFuY2UgPSBjbGlwcGluZ1BsYW5lLmRpc3RhbmNlO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBXcmFwcGVyIG9uIENhcnRlc2lhbjMgdGhhdCBhbGxvd3MgZGV0ZWN0aW9uIG9mIFBsYW5lIGNoYW5nZXMgZnJvbSBcIm1lbWJlcnMgb2YgbWVtYmVycyxcIiBmb3IgZXhhbXBsZTpcbiAqXG4gKiB2YXIgY2xpcHBpbmdQbGFuZSA9IG5ldyBDbGlwcGluZ1BsYW5lKC4uLik7XG4gKiBjbGlwcGluZ1BsYW5lLm5vcm1hbC56ID0gLTEuMDtcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBVcGRhdGVDaGFuZ2VkQ2FydGVzaWFuMyhub3JtYWwsIGNsaXBwaW5nUGxhbmUpIHtcbiAgdGhpcy5fY2xpcHBpbmdQbGFuZSA9IGNsaXBwaW5nUGxhbmU7XG4gIHRoaXMuX2NhcnRlc2lhbjMgPSBDYXJ0ZXNpYW4zLmNsb25lKG5vcm1hbCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFVwZGF0ZUNoYW5nZWRDYXJ0ZXNpYW4zLnByb3RvdHlwZSwge1xuICB4OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2FydGVzaWFuMy54O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBDaGVjay50eXBlT2YubnVtYmVyKFwidmFsdWVcIiwgdmFsdWUpO1xuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICBpZiAoXG4gICAgICAgIGRlZmluZWQodGhpcy5fY2xpcHBpbmdQbGFuZS5vbkNoYW5nZUNhbGxiYWNrKSAmJlxuICAgICAgICB2YWx1ZSAhPT0gdGhpcy5fY2FydGVzaWFuMy54XG4gICAgICApIHtcbiAgICAgICAgdGhpcy5fY2xpcHBpbmdQbGFuZS5vbkNoYW5nZUNhbGxiYWNrKHRoaXMuX2NsaXBwaW5nUGxhbmUuaW5kZXgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2FydGVzaWFuMy54ID0gdmFsdWU7XG4gICAgfSxcbiAgfSxcbiAgeToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NhcnRlc2lhbjMueTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgQ2hlY2sudHlwZU9mLm51bWJlcihcInZhbHVlXCIsIHZhbHVlKTtcbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgaWYgKFxuICAgICAgICBkZWZpbmVkKHRoaXMuX2NsaXBwaW5nUGxhbmUub25DaGFuZ2VDYWxsYmFjaykgJiZcbiAgICAgICAgdmFsdWUgIT09IHRoaXMuX2NhcnRlc2lhbjMueVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2NsaXBwaW5nUGxhbmUub25DaGFuZ2VDYWxsYmFjayh0aGlzLl9jbGlwcGluZ1BsYW5lLmluZGV4KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NhcnRlc2lhbjMueSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIHo6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jYXJ0ZXNpYW4zLno7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIENoZWNrLnR5cGVPZi5udW1iZXIoXCJ2YWx1ZVwiLCB2YWx1ZSk7XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIGlmIChcbiAgICAgICAgZGVmaW5lZCh0aGlzLl9jbGlwcGluZ1BsYW5lLm9uQ2hhbmdlQ2FsbGJhY2spICYmXG4gICAgICAgIHZhbHVlICE9PSB0aGlzLl9jYXJ0ZXNpYW4zLnpcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9jbGlwcGluZ1BsYW5lLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcy5fY2xpcHBpbmdQbGFuZS5pbmRleCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jYXJ0ZXNpYW4zLnogPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxufSk7XG5leHBvcnQgZGVmYXVsdCBDbGlwcGluZ1BsYW5lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///44683\n')},21809:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52323);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63367);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66553);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(14459);\n/* harmony import */ var _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(84935);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(72248);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(38443);\n/* harmony import */ var _Core_Plane_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(7749);\n/* harmony import */ var _Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(20521);\n/* harmony import */ var _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(21572);\n/* harmony import */ var _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(87721);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(8743);\n/* harmony import */ var _ClippingPlane_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(44683);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Specifies a set of clipping planes. Clipping planes selectively disable rendering in a region on the\n * outside of the specified list of {@link ClippingPlane} objects for a single gltf model, 3D Tileset, or the globe.\n * <p>\n * In general the clipping planes\' coordinates are relative to the object they\'re attached to, so a plane with distance set to 0 will clip\n * through the center of the object.\n * </p>\n * <p>\n * For 3D Tiles, the root tile\'s transform is used to position the clipping planes. If a transform is not defined, the root tile\'s {@link Cesium3DTile#boundingSphere} is used instead.\n * </p>\n *\n * @alias ClippingPlaneCollection\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {ClippingPlane[]} [options.planes=[]] An array of {@link ClippingPlane} objects used to selectively disable rendering on the outside of each plane.\n * @param {Boolean} [options.enabled=true] Determines whether the clipping planes are active.\n * @param {Matrix4} [options.modelMatrix=Matrix4.IDENTITY] The 4x4 transformation matrix specifying an additional transform relative to the clipping planes original coordinate system.\n * @param {Boolean} [options.unionClippingRegions=false] If true, a region will be clipped if it is on the outside of any plane in the collection. Otherwise, a region will only be clipped if it is on the outside of every plane.\n * @param {Color} [options.edgeColor=Color.WHITE] The color applied to highlight the edge along which an object is clipped.\n * @param {Number} [options.edgeWidth=0.0] The width, in pixels, of the highlight applied to the edge along which an object is clipped.\n *\n * @demo {@link https://sandcastle.cesium.com/?src=3D%20Tiles%20Clipping%20Planes.html|Clipping 3D Tiles and glTF models.}\n * @demo {@link https://sandcastle.cesium.com/?src=Terrain%20Clipping%20Planes.html|Clipping the Globe.}\n *\n * @example\n * // This clipping plane\'s distance is positive, which means its normal\n * // is facing the origin. This will clip everything that is behind\n * // the plane, which is anything with y coordinate < -5.\n * var clippingPlanes = new Cesium.ClippingPlaneCollection({\n *     planes : [\n *         new Cesium.ClippingPlane(new Cesium.Cartesian3(0.0, 1.0, 0.0), 5.0)\n *     ],\n * });\n * // Create an entity and attach the ClippingPlaneCollection to the model.\n * var entity = viewer.entities.add({\n *     position : Cesium.Cartesian3.fromDegrees(-123.0744619, 44.0503706, 10000),\n *     model : {\n *         uri : \'model.gltf\',\n *         minimumPixelSize : 128,\n *         maximumScale : 20000,\n *         clippingPlanes : clippingPlanes\n *     }\n * });\n * viewer.zoomTo(entity);\n */\nfunction ClippingPlaneCollection(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._planes = [];\n\n  // Do partial texture updates if just one plane is dirty.\n  // If many planes are dirty, refresh the entire texture.\n  this._dirtyIndex = -1;\n  this._multipleDirtyPlanes = false;\n\n  this._enabled = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.enabled, true);\n\n  /**\n   * The 4x4 transformation matrix specifying an additional transform relative to the clipping planes\n   * original coordinate system.\n   *\n   * @type {Matrix4}\n   * @default Matrix4.IDENTITY\n   */\n  this.modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.modelMatrix, _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].IDENTITY */ .Z.IDENTITY)\n  );\n\n  /**\n   * The color applied to highlight the edge along which an object is clipped.\n   *\n   * @type {Color}\n   * @default Color.WHITE\n   */\n  this.edgeColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].clone */ .Z.clone((0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.edgeColor, _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].WHITE */ .Z.WHITE));\n\n  /**\n   * The width, in pixels, of the highlight applied to the edge along which an object is clipped.\n   *\n   * @type {Number}\n   * @default 0.0\n   */\n  this.edgeWidth = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.edgeWidth, 0.0);\n\n  /**\n   * An event triggered when a new clipping plane is added to the collection.  Event handlers\n   * are passed the new plane and the index at which it was added.\n   * @type {Event}\n   * @default Event()\n   */\n  this.planeAdded = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z();\n\n  /**\n   * An event triggered when a new clipping plane is removed from the collection.  Event handlers\n   * are passed the new plane and the index from which it was removed.\n   * @type {Event}\n   * @default Event()\n   */\n  this.planeRemoved = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z();\n\n  // If this ClippingPlaneCollection has an owner, only its owner should update or destroy it.\n  // This is because in a Cesium3DTileset multiple models may reference the tileset\'s ClippingPlaneCollection.\n  this._owner = undefined;\n\n  var unionClippingRegions = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(options.unionClippingRegions, false);\n  this._unionClippingRegions = unionClippingRegions;\n  this._testIntersection = unionClippingRegions\n    ? unionIntersectFunction\n    : defaultIntersectFunction;\n\n  this._uint8View = undefined;\n  this._float32View = undefined;\n\n  this._clippingPlanesTexture = undefined;\n\n  // Add each ClippingPlane object.\n  var planes = options.planes;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(planes)) {\n    var planesLength = planes.length;\n    for (var i = 0; i < planesLength; ++i) {\n      this.add(planes[i]);\n    }\n  }\n}\n\nfunction unionIntersectFunction(value) {\n  return value === _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].OUTSIDE */ .Z.OUTSIDE;\n}\n\nfunction defaultIntersectFunction(value) {\n  return value === _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].INSIDE */ .Z.INSIDE;\n}\n\nObject.defineProperties(ClippingPlaneCollection.prototype, {\n  /**\n   * Returns the number of planes in this collection.  This is commonly used with\n   * {@link ClippingPlaneCollection#get} to iterate over all the planes\n   * in the collection.\n   *\n   * @memberof ClippingPlaneCollection.prototype\n   * @type {Number}\n   * @readonly\n   */\n  length: {\n    get: function () {\n      return this._planes.length;\n    },\n  },\n\n  /**\n   * If true, a region will be clipped if it is on the outside of any plane in the\n   * collection. Otherwise, a region will only be clipped if it is on the\n   * outside of every plane.\n   *\n   * @memberof ClippingPlaneCollection.prototype\n   * @type {Boolean}\n   * @default false\n   */\n  unionClippingRegions: {\n    get: function () {\n      return this._unionClippingRegions;\n    },\n    set: function (value) {\n      if (this._unionClippingRegions === value) {\n        return;\n      }\n      this._unionClippingRegions = value;\n      this._testIntersection = value\n        ? unionIntersectFunction\n        : defaultIntersectFunction;\n    },\n  },\n\n  /**\n   * If true, clipping will be enabled.\n   *\n   * @memberof ClippingPlaneCollection.prototype\n   * @type {Boolean}\n   * @default true\n   */\n  enabled: {\n    get: function () {\n      return this._enabled;\n    },\n    set: function (value) {\n      if (this._enabled === value) {\n        return;\n      }\n      this._enabled = value;\n    },\n  },\n\n  /**\n   * Returns a texture containing packed, untransformed clipping planes.\n   *\n   * @memberof ClippingPlaneCollection.prototype\n   * @type {Texture}\n   * @readonly\n   * @private\n   */\n  texture: {\n    get: function () {\n      return this._clippingPlanesTexture;\n    },\n  },\n\n  /**\n   * A reference to the ClippingPlaneCollection\'s owner, if any.\n   *\n   * @memberof ClippingPlaneCollection.prototype\n   * @readonly\n   * @private\n   */\n  owner: {\n    get: function () {\n      return this._owner;\n    },\n  },\n\n  /**\n   * Returns a Number encapsulating the state for this ClippingPlaneCollection.\n   *\n   * Clipping mode is encoded in the sign of the number, which is just the plane count.\n   * Used for checking if shader regeneration is necessary.\n   *\n   * @memberof ClippingPlaneCollection.prototype\n   * @returns {Number} A Number that describes the ClippingPlaneCollection\'s state.\n   * @readonly\n   * @private\n   */\n  clippingPlanesState: {\n    get: function () {\n      return this._unionClippingRegions\n        ? this._planes.length\n        : -this._planes.length;\n    },\n  },\n});\n\nfunction setIndexDirty(collection, index) {\n  // If there\'s already a different _dirtyIndex set, more than one plane has changed since update.\n  // Entire texture must be reloaded\n  collection._multipleDirtyPlanes =\n    collection._multipleDirtyPlanes ||\n    (collection._dirtyIndex !== -1 && collection._dirtyIndex !== index);\n  collection._dirtyIndex = index;\n}\n\n/**\n * Adds the specified {@link ClippingPlane} to the collection to be used to selectively disable rendering\n * on the outside of each plane. Use {@link ClippingPlaneCollection#unionClippingRegions} to modify\n * how modify the clipping behavior of multiple planes.\n *\n * @param {ClippingPlane} plane The ClippingPlane to add to the collection.\n *\n * @see ClippingPlaneCollection#unionClippingRegions\n * @see ClippingPlaneCollection#remove\n * @see ClippingPlaneCollection#removeAll\n */\nClippingPlaneCollection.prototype.add = function (plane) {\n  var newPlaneIndex = this._planes.length;\n\n  var that = this;\n  plane.onChangeCallback = function (index) {\n    setIndexDirty(that, index);\n  };\n  plane.index = newPlaneIndex;\n\n  setIndexDirty(this, newPlaneIndex);\n  this._planes.push(plane);\n  this.planeAdded.raiseEvent(plane, newPlaneIndex);\n};\n\n/**\n * Returns the plane in the collection at the specified index.  Indices are zero-based\n * and increase as planes are added.  Removing a plane shifts all planes after\n * it to the left, changing their indices.  This function is commonly used with\n * {@link ClippingPlaneCollection#length} to iterate over all the planes\n * in the collection.\n *\n * @param {Number} index The zero-based index of the plane.\n * @returns {ClippingPlane} The ClippingPlane at the specified index.\n *\n * @see ClippingPlaneCollection#length\n */\nClippingPlaneCollection.prototype.get = function (index) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number */ .Z.typeOf.number("index", index);\n  //>>includeEnd(\'debug\');\n\n  return this._planes[index];\n};\n\nfunction indexOf(planes, plane) {\n  var length = planes.length;\n  for (var i = 0; i < length; ++i) {\n    if (_Core_Plane_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].equals */ .Z.equals(planes[i], plane)) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * Checks whether this collection contains a ClippingPlane equal to the given ClippingPlane.\n *\n * @param {ClippingPlane} [clippingPlane] The ClippingPlane to check for.\n * @returns {Boolean} true if this collection contains the ClippingPlane, false otherwise.\n *\n * @see ClippingPlaneCollection#get\n */\nClippingPlaneCollection.prototype.contains = function (clippingPlane) {\n  return indexOf(this._planes, clippingPlane) !== -1;\n};\n\n/**\n * Removes the first occurrence of the given ClippingPlane from the collection.\n *\n * @param {ClippingPlane} clippingPlane\n * @returns {Boolean} <code>true</code> if the plane was removed; <code>false</code> if the plane was not found in the collection.\n *\n * @see ClippingPlaneCollection#add\n * @see ClippingPlaneCollection#contains\n * @see ClippingPlaneCollection#removeAll\n */\nClippingPlaneCollection.prototype.remove = function (clippingPlane) {\n  var planes = this._planes;\n  var index = indexOf(planes, clippingPlane);\n\n  if (index === -1) {\n    return false;\n  }\n\n  // Unlink this ClippingPlaneCollection from the ClippingPlane\n  if (clippingPlane instanceof _ClippingPlane_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z) {\n    clippingPlane.onChangeCallback = undefined;\n    clippingPlane.index = -1;\n  }\n\n  // Shift and update indices\n  var length = planes.length - 1;\n  for (var i = index; i < length; ++i) {\n    var planeToKeep = planes[i + 1];\n    planes[i] = planeToKeep;\n    if (planeToKeep instanceof _ClippingPlane_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z) {\n      planeToKeep.index = i;\n    }\n  }\n\n  // Indicate planes texture is dirty\n  this._multipleDirtyPlanes = true;\n  planes.length = length;\n\n  this.planeRemoved.raiseEvent(clippingPlane, index);\n\n  return true;\n};\n\n/**\n * Removes all planes from the collection.\n *\n * @see ClippingPlaneCollection#add\n * @see ClippingPlaneCollection#remove\n */\nClippingPlaneCollection.prototype.removeAll = function () {\n  // Dereference this ClippingPlaneCollection from all ClippingPlanes\n  var planes = this._planes;\n  var planesCount = planes.length;\n  for (var i = 0; i < planesCount; ++i) {\n    var plane = planes[i];\n    if (plane instanceof _ClippingPlane_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z) {\n      plane.onChangeCallback = undefined;\n      plane.index = -1;\n    }\n    this.planeRemoved.raiseEvent(plane, i);\n  }\n  this._multipleDirtyPlanes = true;\n  this._planes = [];\n};\n\nvar distanceEncodeScratch = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar oct32EncodeScratch = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nfunction packPlanesAsUint8(clippingPlaneCollection, startIndex, endIndex) {\n  var uint8View = clippingPlaneCollection._uint8View;\n  var planes = clippingPlaneCollection._planes;\n  var byteIndex = 0;\n  for (var i = startIndex; i < endIndex; ++i) {\n    var plane = planes[i];\n\n    var oct32Normal = _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octEncodeToCartesian4 */ .Z.octEncodeToCartesian4(\n      plane.normal,\n      oct32EncodeScratch\n    );\n    uint8View[byteIndex] = oct32Normal.x;\n    uint8View[byteIndex + 1] = oct32Normal.y;\n    uint8View[byteIndex + 2] = oct32Normal.z;\n    uint8View[byteIndex + 3] = oct32Normal.w;\n\n    var encodedDistance = _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].packFloat */ .Z.packFloat(\n      plane.distance,\n      distanceEncodeScratch\n    );\n    uint8View[byteIndex + 4] = encodedDistance.x;\n    uint8View[byteIndex + 5] = encodedDistance.y;\n    uint8View[byteIndex + 6] = encodedDistance.z;\n    uint8View[byteIndex + 7] = encodedDistance.w;\n\n    byteIndex += 8;\n  }\n}\n\n// Pack starting at the beginning of the buffer to allow partial update\nfunction packPlanesAsFloats(clippingPlaneCollection, startIndex, endIndex) {\n  var float32View = clippingPlaneCollection._float32View;\n  var planes = clippingPlaneCollection._planes;\n\n  var floatIndex = 0;\n  for (var i = startIndex; i < endIndex; ++i) {\n    var plane = planes[i];\n    var normal = plane.normal;\n\n    float32View[floatIndex] = normal.x;\n    float32View[floatIndex + 1] = normal.y;\n    float32View[floatIndex + 2] = normal.z;\n    float32View[floatIndex + 3] = plane.distance;\n\n    floatIndex += 4; // each plane is 4 floats\n  }\n}\n\nfunction computeTextureResolution(pixelsNeeded, result) {\n  var maxSize = _Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].maximumTextureSize */ .Z.maximumTextureSize;\n  result.x = Math.min(pixelsNeeded, maxSize);\n  result.y = Math.ceil(pixelsNeeded / result.x);\n  return result;\n}\n\nvar textureResolutionScratch = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n/**\n * Called when {@link Viewer} or {@link CesiumWidget} render the scene to\n * build the resources for clipping planes.\n * <p>\n * Do not call this function directly.\n * </p>\n */\nClippingPlaneCollection.prototype.update = function (frameState) {\n  var clippingPlanesTexture = this._clippingPlanesTexture;\n  var context = frameState.context;\n  var useFloatTexture = ClippingPlaneCollection.useFloatTexture(context);\n\n  // Compute texture requirements for current planes\n  // In RGBA FLOAT, A plane is 4 floats packed to a RGBA.\n  // In RGBA UNSIGNED_BYTE, A plane is a float in [0, 1) packed to RGBA and an Oct32 quantized normal,\n  // so 8 bits or 2 pixels in RGBA.\n  var pixelsNeeded = useFloatTexture ? this.length : this.length * 2;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(clippingPlanesTexture)) {\n    var currentPixelCount =\n      clippingPlanesTexture.width * clippingPlanesTexture.height;\n    // Recreate the texture to double current requirement if it isn\'t big enough or is 4 times larger than it needs to be.\n    // Optimization note: this isn\'t exactly the classic resizeable array algorithm\n    // * not necessarily checking for resize after each add/remove operation\n    // * random-access deletes instead of just pops\n    // * alloc ops likely more expensive than demonstrable via big-O analysis\n    if (\n      currentPixelCount < pixelsNeeded ||\n      pixelsNeeded < 0.25 * currentPixelCount\n    ) {\n      clippingPlanesTexture.destroy();\n      clippingPlanesTexture = undefined;\n      this._clippingPlanesTexture = undefined;\n    }\n  }\n\n  // If there are no clipping planes, there\'s nothing to update.\n  if (this.length === 0) {\n    return;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(clippingPlanesTexture)) {\n    var requiredResolution = computeTextureResolution(\n      pixelsNeeded,\n      textureResolutionScratch\n    );\n    // Allocate twice as much space as needed to avoid frequent texture reallocation.\n    // Allocate in the Y direction, since texture may be as wide as context texture support.\n    requiredResolution.y *= 2;\n\n    if (useFloatTexture) {\n      clippingPlanesTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z({\n        context: context,\n        width: requiredResolution.x,\n        height: requiredResolution.y,\n        pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].RGBA */ .Z.RGBA,\n        pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].FLOAT */ .Z.FLOAT,\n        sampler: _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].NEAREST */ .Z.NEAREST,\n        flipY: false,\n      });\n      this._float32View = new Float32Array(\n        requiredResolution.x * requiredResolution.y * 4\n      );\n    } else {\n      clippingPlanesTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z({\n        context: context,\n        width: requiredResolution.x,\n        height: requiredResolution.y,\n        pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].RGBA */ .Z.RGBA,\n        pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n        sampler: _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].NEAREST */ .Z.NEAREST,\n        flipY: false,\n      });\n      this._uint8View = new Uint8Array(\n        requiredResolution.x * requiredResolution.y * 4\n      );\n    }\n\n    this._clippingPlanesTexture = clippingPlanesTexture;\n    this._multipleDirtyPlanes = true;\n  }\n\n  var dirtyIndex = this._dirtyIndex;\n  if (!this._multipleDirtyPlanes && dirtyIndex === -1) {\n    return;\n  }\n  if (!this._multipleDirtyPlanes) {\n    // partial updates possible\n    var offsetX = 0;\n    var offsetY = 0;\n    if (useFloatTexture) {\n      offsetY = Math.floor(dirtyIndex / clippingPlanesTexture.width);\n      offsetX = Math.floor(dirtyIndex - offsetY * clippingPlanesTexture.width);\n\n      packPlanesAsFloats(this, dirtyIndex, dirtyIndex + 1);\n      clippingPlanesTexture.copyFrom({\n        source: {\n          width: 1,\n          height: 1,\n          arrayBufferView: this._float32View,\n        },\n        xOffset: offsetX,\n        yOffset: offsetY,\n      });\n    } else {\n      offsetY = Math.floor((dirtyIndex * 2) / clippingPlanesTexture.width);\n      offsetX = Math.floor(\n        dirtyIndex * 2 - offsetY * clippingPlanesTexture.width\n      );\n      packPlanesAsUint8(this, dirtyIndex, dirtyIndex + 1);\n      clippingPlanesTexture.copyFrom({\n        source: {\n          width: 2,\n          height: 1,\n          arrayBufferView: this._uint8View,\n        },\n        xOffset: offsetX,\n        yOffset: offsetY,\n      });\n    }\n  } else if (useFloatTexture) {\n    packPlanesAsFloats(this, 0, this._planes.length);\n    clippingPlanesTexture.copyFrom({\n      source: {\n        width: clippingPlanesTexture.width,\n        height: clippingPlanesTexture.height,\n        arrayBufferView: this._float32View,\n      },\n    });\n  } else {\n    packPlanesAsUint8(this, 0, this._planes.length);\n    clippingPlanesTexture.copyFrom({\n      source: {\n        width: clippingPlanesTexture.width,\n        height: clippingPlanesTexture.height,\n        arrayBufferView: this._uint8View,\n      },\n    });\n  }\n\n  this._multipleDirtyPlanes = false;\n  this._dirtyIndex = -1;\n};\n\nvar scratchMatrix = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\nvar scratchPlane = new _Core_Plane_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_X */ .Z.UNIT_X, 0.0);\n/**\n * Determines the type intersection with the planes of this ClippingPlaneCollection instance and the specified {@link TileBoundingVolume}.\n * @private\n *\n * @param {Object} tileBoundingVolume The volume to determine the intersection with the planes.\n * @param {Matrix4} [transform] An optional, additional matrix to transform the plane to world coordinates.\n * @returns {Intersect} {@link Intersect.INSIDE} if the entire volume is on the side of the planes\n *                      the normal is pointing and should be entirely rendered, {@link Intersect.OUTSIDE}\n *                      if the entire volume is on the opposite side and should be clipped, and\n *                      {@link Intersect.INTERSECTING} if the volume intersects the planes.\n */\nClippingPlaneCollection.prototype.computeIntersectionWithBoundingVolume = function (\n  tileBoundingVolume,\n  transform\n) {\n  var planes = this._planes;\n  var length = planes.length;\n\n  var modelMatrix = this.modelMatrix;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(transform)) {\n    modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].multiply */ .Z.multiply(transform, modelMatrix, scratchMatrix);\n  }\n\n  // If the collection is not set to union the clipping regions, the volume must be outside of all planes to be\n  // considered completely clipped. If the collection is set to union the clipping regions, if the volume can be\n  // outside any the planes, it is considered completely clipped.\n  // Lastly, if not completely clipped, if any plane is intersecting, more calculations must be performed.\n  var intersection = _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].INSIDE */ .Z.INSIDE;\n  if (!this.unionClippingRegions && length > 0) {\n    intersection = _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].OUTSIDE */ .Z.OUTSIDE;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var plane = planes[i];\n\n    _Core_Plane_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].transform */ .Z.transform(plane, modelMatrix, scratchPlane); // ClippingPlane can be used for Plane math\n\n    var value = tileBoundingVolume.intersectPlane(scratchPlane);\n    if (value === _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].INTERSECTING */ .Z.INTERSECTING) {\n      intersection = value;\n    } else if (this._testIntersection(value)) {\n      return value;\n    }\n  }\n\n  return intersection;\n};\n\n/**\n * Sets the owner for the input ClippingPlaneCollection if there wasn\'t another owner.\n * Destroys the owner\'s previous ClippingPlaneCollection if setting is successful.\n *\n * @param {ClippingPlaneCollection} [clippingPlaneCollection] A ClippingPlaneCollection (or undefined) being attached to an object\n * @param {Object} owner An Object that should receive the new ClippingPlaneCollection\n * @param {String} key The Key for the Object to reference the ClippingPlaneCollection\n * @private\n */\nClippingPlaneCollection.setOwner = function (\n  clippingPlaneCollection,\n  owner,\n  key\n) {\n  // Don\'t destroy the ClippingPlaneCollection if it is already owned by newOwner\n  if (clippingPlaneCollection === owner[key]) {\n    return;\n  }\n  // Destroy the existing ClippingPlaneCollection, if any\n  owner[key] = owner[key] && owner[key].destroy();\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(clippingPlaneCollection)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(clippingPlaneCollection._owner)) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(\n        "ClippingPlaneCollection should only be assigned to one object"\n      );\n    }\n    //>>includeEnd(\'debug\');\n    clippingPlaneCollection._owner = owner;\n    owner[key] = clippingPlaneCollection;\n  }\n};\n\n/**\n * Function for checking if the context will allow clipping planes with floating point textures.\n *\n * @param {Context} context The Context that will contain clipped objects and clipping textures.\n * @returns {Boolean} <code>true</code> if floating point textures can be used for clipping planes.\n * @private\n */\nClippingPlaneCollection.useFloatTexture = function (context) {\n  return context.floatingPointTexture;\n};\n\n/**\n * Function for getting the clipping plane collection\'s texture resolution.\n * If the ClippingPlaneCollection hasn\'t been updated, returns the resolution that will be\n * allocated based on the current plane count.\n *\n * @param {ClippingPlaneCollection} clippingPlaneCollection The clipping plane collection\n * @param {Context} context The rendering context\n * @param {Cartesian2} result A Cartesian2 for the result.\n * @returns {Cartesian2} The required resolution.\n * @private\n */\nClippingPlaneCollection.getTextureResolution = function (\n  clippingPlaneCollection,\n  context,\n  result\n) {\n  var texture = clippingPlaneCollection.texture;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(texture)) {\n    result.x = texture.width;\n    result.y = texture.height;\n    return result;\n  }\n\n  var pixelsNeeded = ClippingPlaneCollection.useFloatTexture(context)\n    ? clippingPlaneCollection.length\n    : clippingPlaneCollection.length * 2;\n  var requiredResolution = computeTextureResolution(pixelsNeeded, result);\n\n  // Allocate twice as much space as needed to avoid frequent texture reallocation.\n  requiredResolution.y *= 2;\n  return requiredResolution;\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see ClippingPlaneCollection#destroy\n */\nClippingPlaneCollection.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * clippingPlanes = clippingPlanes && clippingPlanes.destroy();\n *\n * @see ClippingPlaneCollection#isDestroyed\n */\nClippingPlaneCollection.prototype.destroy = function () {\n  this._clippingPlanesTexture =\n    this._clippingPlanesTexture && this._clippingPlanesTexture.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ClippingPlaneCollection);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0VBQU87QUFDYjtBQUNBLFFBQVEsc0VBQU87QUFDZixnQkFBZ0Isd0VBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUJBQXlCO0FBQ3BDLFdBQVcsU0FBUztBQUNwQixXQUFXLFlBQVk7QUFDdkIsYUFBYSxZQUFZO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNFQUFPO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSx3REFBd0Q7QUFDeEQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBLGFBQWEsU0FBUyxnREFBZ0Q7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywyRUFBYTtBQUN0QjtBQUNBLHlEQUFlLHVCQUF1QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0NsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLmpzPzA4ZDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEF0dHJpYnV0ZUNvbXByZXNzaW9uIGZyb20gXCIuLi9Db3JlL0F0dHJpYnV0ZUNvbXByZXNzaW9uLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuNCBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW40LmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vQ29yZS9Db2xvci5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgSW50ZXJzZWN0IGZyb20gXCIuLi9Db3JlL0ludGVyc2VjdC5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IFBpeGVsRm9ybWF0IGZyb20gXCIuLi9Db3JlL1BpeGVsRm9ybWF0LmpzXCI7XG5pbXBvcnQgUGxhbmUgZnJvbSBcIi4uL0NvcmUvUGxhbmUuanNcIjtcbmltcG9ydCBDb250ZXh0TGltaXRzIGZyb20gXCIuLi9SZW5kZXJlci9Db250ZXh0TGltaXRzLmpzXCI7XG5pbXBvcnQgUGl4ZWxEYXRhdHlwZSBmcm9tIFwiLi4vUmVuZGVyZXIvUGl4ZWxEYXRhdHlwZS5qc1wiO1xuaW1wb3J0IFNhbXBsZXIgZnJvbSBcIi4uL1JlbmRlcmVyL1NhbXBsZXIuanNcIjtcbmltcG9ydCBUZXh0dXJlIGZyb20gXCIuLi9SZW5kZXJlci9UZXh0dXJlLmpzXCI7XG5pbXBvcnQgQ2xpcHBpbmdQbGFuZSBmcm9tIFwiLi9DbGlwcGluZ1BsYW5lLmpzXCI7XG5cbi8qKlxuICogU3BlY2lmaWVzIGEgc2V0IG9mIGNsaXBwaW5nIHBsYW5lcy4gQ2xpcHBpbmcgcGxhbmVzIHNlbGVjdGl2ZWx5IGRpc2FibGUgcmVuZGVyaW5nIGluIGEgcmVnaW9uIG9uIHRoZVxuICogb3V0c2lkZSBvZiB0aGUgc3BlY2lmaWVkIGxpc3Qgb2Yge0BsaW5rIENsaXBwaW5nUGxhbmV9IG9iamVjdHMgZm9yIGEgc2luZ2xlIGdsdGYgbW9kZWwsIDNEIFRpbGVzZXQsIG9yIHRoZSBnbG9iZS5cbiAqIDxwPlxuICogSW4gZ2VuZXJhbCB0aGUgY2xpcHBpbmcgcGxhbmVzJyBjb29yZGluYXRlcyBhcmUgcmVsYXRpdmUgdG8gdGhlIG9iamVjdCB0aGV5J3JlIGF0dGFjaGVkIHRvLCBzbyBhIHBsYW5lIHdpdGggZGlzdGFuY2Ugc2V0IHRvIDAgd2lsbCBjbGlwXG4gKiB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIG9iamVjdC5cbiAqIDwvcD5cbiAqIDxwPlxuICogRm9yIDNEIFRpbGVzLCB0aGUgcm9vdCB0aWxlJ3MgdHJhbnNmb3JtIGlzIHVzZWQgdG8gcG9zaXRpb24gdGhlIGNsaXBwaW5nIHBsYW5lcy4gSWYgYSB0cmFuc2Zvcm0gaXMgbm90IGRlZmluZWQsIHRoZSByb290IHRpbGUncyB7QGxpbmsgQ2VzaXVtM0RUaWxlI2JvdW5kaW5nU3BoZXJlfSBpcyB1c2VkIGluc3RlYWQuXG4gKiA8L3A+XG4gKlxuICogQGFsaWFzIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7Q2xpcHBpbmdQbGFuZVtdfSBbb3B0aW9ucy5wbGFuZXM9W11dIEFuIGFycmF5IG9mIHtAbGluayBDbGlwcGluZ1BsYW5lfSBvYmplY3RzIHVzZWQgdG8gc2VsZWN0aXZlbHkgZGlzYWJsZSByZW5kZXJpbmcgb24gdGhlIG91dHNpZGUgb2YgZWFjaCBwbGFuZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZW5hYmxlZD10cnVlXSBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNsaXBwaW5nIHBsYW5lcyBhcmUgYWN0aXZlLlxuICogQHBhcmFtIHtNYXRyaXg0fSBbb3B0aW9ucy5tb2RlbE1hdHJpeD1NYXRyaXg0LklERU5USVRZXSBUaGUgNHg0IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBzcGVjaWZ5aW5nIGFuIGFkZGl0aW9uYWwgdHJhbnNmb3JtIHJlbGF0aXZlIHRvIHRoZSBjbGlwcGluZyBwbGFuZXMgb3JpZ2luYWwgY29vcmRpbmF0ZSBzeXN0ZW0uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnVuaW9uQ2xpcHBpbmdSZWdpb25zPWZhbHNlXSBJZiB0cnVlLCBhIHJlZ2lvbiB3aWxsIGJlIGNsaXBwZWQgaWYgaXQgaXMgb24gdGhlIG91dHNpZGUgb2YgYW55IHBsYW5lIGluIHRoZSBjb2xsZWN0aW9uLiBPdGhlcndpc2UsIGEgcmVnaW9uIHdpbGwgb25seSBiZSBjbGlwcGVkIGlmIGl0IGlzIG9uIHRoZSBvdXRzaWRlIG9mIGV2ZXJ5IHBsYW5lLlxuICogQHBhcmFtIHtDb2xvcn0gW29wdGlvbnMuZWRnZUNvbG9yPUNvbG9yLldISVRFXSBUaGUgY29sb3IgYXBwbGllZCB0byBoaWdobGlnaHQgdGhlIGVkZ2UgYWxvbmcgd2hpY2ggYW4gb2JqZWN0IGlzIGNsaXBwZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZWRnZVdpZHRoPTAuMF0gVGhlIHdpZHRoLCBpbiBwaXhlbHMsIG9mIHRoZSBoaWdobGlnaHQgYXBwbGllZCB0byB0aGUgZWRnZSBhbG9uZyB3aGljaCBhbiBvYmplY3QgaXMgY2xpcHBlZC5cbiAqXG4gKiBAZGVtbyB7QGxpbmsgaHR0cHM6Ly9zYW5kY2FzdGxlLmNlc2l1bS5jb20vP3NyYz0zRCUyMFRpbGVzJTIwQ2xpcHBpbmclMjBQbGFuZXMuaHRtbHxDbGlwcGluZyAzRCBUaWxlcyBhbmQgZ2xURiBtb2RlbHMufVxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tLz9zcmM9VGVycmFpbiUyMENsaXBwaW5nJTIwUGxhbmVzLmh0bWx8Q2xpcHBpbmcgdGhlIEdsb2JlLn1cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhpcyBjbGlwcGluZyBwbGFuZSdzIGRpc3RhbmNlIGlzIHBvc2l0aXZlLCB3aGljaCBtZWFucyBpdHMgbm9ybWFsXG4gKiAvLyBpcyBmYWNpbmcgdGhlIG9yaWdpbi4gVGhpcyB3aWxsIGNsaXAgZXZlcnl0aGluZyB0aGF0IGlzIGJlaGluZFxuICogLy8gdGhlIHBsYW5lLCB3aGljaCBpcyBhbnl0aGluZyB3aXRoIHkgY29vcmRpbmF0ZSA8IC01LlxuICogdmFyIGNsaXBwaW5nUGxhbmVzID0gbmV3IENlc2l1bS5DbGlwcGluZ1BsYW5lQ29sbGVjdGlvbih7XG4gKiAgICAgcGxhbmVzIDogW1xuICogICAgICAgICBuZXcgQ2VzaXVtLkNsaXBwaW5nUGxhbmUobmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDAuMCwgMS4wLCAwLjApLCA1LjApXG4gKiAgICAgXSxcbiAqIH0pO1xuICogLy8gQ3JlYXRlIGFuIGVudGl0eSBhbmQgYXR0YWNoIHRoZSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiB0byB0aGUgbW9kZWwuXG4gKiB2YXIgZW50aXR5ID0gdmlld2VyLmVudGl0aWVzLmFkZCh7XG4gKiAgICAgcG9zaXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcygtMTIzLjA3NDQ2MTksIDQ0LjA1MDM3MDYsIDEwMDAwKSxcbiAqICAgICBtb2RlbCA6IHtcbiAqICAgICAgICAgdXJpIDogJ21vZGVsLmdsdGYnLFxuICogICAgICAgICBtaW5pbXVtUGl4ZWxTaXplIDogMTI4LFxuICogICAgICAgICBtYXhpbXVtU2NhbGUgOiAyMDAwMCxcbiAqICAgICAgICAgY2xpcHBpbmdQbGFuZXMgOiBjbGlwcGluZ1BsYW5lc1xuICogICAgIH1cbiAqIH0pO1xuICogdmlld2VyLnpvb21UbyhlbnRpdHkpO1xuICovXG5mdW5jdGlvbiBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgdGhpcy5fcGxhbmVzID0gW107XG5cbiAgLy8gRG8gcGFydGlhbCB0ZXh0dXJlIHVwZGF0ZXMgaWYganVzdCBvbmUgcGxhbmUgaXMgZGlydHkuXG4gIC8vIElmIG1hbnkgcGxhbmVzIGFyZSBkaXJ0eSwgcmVmcmVzaCB0aGUgZW50aXJlIHRleHR1cmUuXG4gIHRoaXMuX2RpcnR5SW5kZXggPSAtMTtcbiAgdGhpcy5fbXVsdGlwbGVEaXJ0eVBsYW5lcyA9IGZhbHNlO1xuXG4gIHRoaXMuX2VuYWJsZWQgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5lbmFibGVkLCB0cnVlKTtcblxuICAvKipcbiAgICogVGhlIDR4NCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggc3BlY2lmeWluZyBhbiBhZGRpdGlvbmFsIHRyYW5zZm9ybSByZWxhdGl2ZSB0byB0aGUgY2xpcHBpbmcgcGxhbmVzXG4gICAqIG9yaWdpbmFsIGNvb3JkaW5hdGUgc3lzdGVtLlxuICAgKlxuICAgKiBAdHlwZSB7TWF0cml4NH1cbiAgICogQGRlZmF1bHQgTWF0cml4NC5JREVOVElUWVxuICAgKi9cbiAgdGhpcy5tb2RlbE1hdHJpeCA9IE1hdHJpeDQuY2xvbmUoXG4gICAgZGVmYXVsdFZhbHVlKG9wdGlvbnMubW9kZWxNYXRyaXgsIE1hdHJpeDQuSURFTlRJVFkpXG4gICk7XG5cbiAgLyoqXG4gICAqIFRoZSBjb2xvciBhcHBsaWVkIHRvIGhpZ2hsaWdodCB0aGUgZWRnZSBhbG9uZyB3aGljaCBhbiBvYmplY3QgaXMgY2xpcHBlZC5cbiAgICpcbiAgICogQHR5cGUge0NvbG9yfVxuICAgKiBAZGVmYXVsdCBDb2xvci5XSElURVxuICAgKi9cbiAgdGhpcy5lZGdlQ29sb3IgPSBDb2xvci5jbG9uZShkZWZhdWx0VmFsdWUob3B0aW9ucy5lZGdlQ29sb3IsIENvbG9yLldISVRFKSk7XG5cbiAgLyoqXG4gICAqIFRoZSB3aWR0aCwgaW4gcGl4ZWxzLCBvZiB0aGUgaGlnaGxpZ2h0IGFwcGxpZWQgdG8gdGhlIGVkZ2UgYWxvbmcgd2hpY2ggYW4gb2JqZWN0IGlzIGNsaXBwZWQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDAuMFxuICAgKi9cbiAgdGhpcy5lZGdlV2lkdGggPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5lZGdlV2lkdGgsIDAuMCk7XG5cbiAgLyoqXG4gICAqIEFuIGV2ZW50IHRyaWdnZXJlZCB3aGVuIGEgbmV3IGNsaXBwaW5nIHBsYW5lIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLiAgRXZlbnQgaGFuZGxlcnNcbiAgICogYXJlIHBhc3NlZCB0aGUgbmV3IHBsYW5lIGFuZCB0aGUgaW5kZXggYXQgd2hpY2ggaXQgd2FzIGFkZGVkLlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEBkZWZhdWx0IEV2ZW50KClcbiAgICovXG4gIHRoaXMucGxhbmVBZGRlZCA9IG5ldyBFdmVudCgpO1xuXG4gIC8qKlxuICAgKiBBbiBldmVudCB0cmlnZ2VyZWQgd2hlbiBhIG5ldyBjbGlwcGluZyBwbGFuZSBpcyByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uICBFdmVudCBoYW5kbGVyc1xuICAgKiBhcmUgcGFzc2VkIHRoZSBuZXcgcGxhbmUgYW5kIHRoZSBpbmRleCBmcm9tIHdoaWNoIGl0IHdhcyByZW1vdmVkLlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEBkZWZhdWx0IEV2ZW50KClcbiAgICovXG4gIHRoaXMucGxhbmVSZW1vdmVkID0gbmV3IEV2ZW50KCk7XG5cbiAgLy8gSWYgdGhpcyBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiBoYXMgYW4gb3duZXIsIG9ubHkgaXRzIG93bmVyIHNob3VsZCB1cGRhdGUgb3IgZGVzdHJveSBpdC5cbiAgLy8gVGhpcyBpcyBiZWNhdXNlIGluIGEgQ2VzaXVtM0RUaWxlc2V0IG11bHRpcGxlIG1vZGVscyBtYXkgcmVmZXJlbmNlIHRoZSB0aWxlc2V0J3MgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24uXG4gIHRoaXMuX293bmVyID0gdW5kZWZpbmVkO1xuXG4gIHZhciB1bmlvbkNsaXBwaW5nUmVnaW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnVuaW9uQ2xpcHBpbmdSZWdpb25zLCBmYWxzZSk7XG4gIHRoaXMuX3VuaW9uQ2xpcHBpbmdSZWdpb25zID0gdW5pb25DbGlwcGluZ1JlZ2lvbnM7XG4gIHRoaXMuX3Rlc3RJbnRlcnNlY3Rpb24gPSB1bmlvbkNsaXBwaW5nUmVnaW9uc1xuICAgID8gdW5pb25JbnRlcnNlY3RGdW5jdGlvblxuICAgIDogZGVmYXVsdEludGVyc2VjdEZ1bmN0aW9uO1xuXG4gIHRoaXMuX3VpbnQ4VmlldyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZmxvYXQzMlZpZXcgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fY2xpcHBpbmdQbGFuZXNUZXh0dXJlID0gdW5kZWZpbmVkO1xuXG4gIC8vIEFkZCBlYWNoIENsaXBwaW5nUGxhbmUgb2JqZWN0LlxuICB2YXIgcGxhbmVzID0gb3B0aW9ucy5wbGFuZXM7XG4gIGlmIChkZWZpbmVkKHBsYW5lcykpIHtcbiAgICB2YXIgcGxhbmVzTGVuZ3RoID0gcGxhbmVzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsYW5lc0xlbmd0aDsgKytpKSB7XG4gICAgICB0aGlzLmFkZChwbGFuZXNbaV0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1bmlvbkludGVyc2VjdEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gSW50ZXJzZWN0Lk9VVFNJREU7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRJbnRlcnNlY3RGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IEludGVyc2VjdC5JTlNJREU7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHBsYW5lcyBpbiB0aGlzIGNvbGxlY3Rpb24uICBUaGlzIGlzIGNvbW1vbmx5IHVzZWQgd2l0aFxuICAgKiB7QGxpbmsgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24jZ2V0fSB0byBpdGVyYXRlIG92ZXIgYWxsIHRoZSBwbGFuZXNcbiAgICogaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBsZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wbGFuZXMubGVuZ3RoO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIElmIHRydWUsIGEgcmVnaW9uIHdpbGwgYmUgY2xpcHBlZCBpZiBpdCBpcyBvbiB0aGUgb3V0c2lkZSBvZiBhbnkgcGxhbmUgaW4gdGhlXG4gICAqIGNvbGxlY3Rpb24uIE90aGVyd2lzZSwgYSByZWdpb24gd2lsbCBvbmx5IGJlIGNsaXBwZWQgaWYgaXQgaXMgb24gdGhlXG4gICAqIG91dHNpZGUgb2YgZXZlcnkgcGxhbmUuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB1bmlvbkNsaXBwaW5nUmVnaW9uczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3VuaW9uQ2xpcHBpbmdSZWdpb25zO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl91bmlvbkNsaXBwaW5nUmVnaW9ucyA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fdW5pb25DbGlwcGluZ1JlZ2lvbnMgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX3Rlc3RJbnRlcnNlY3Rpb24gPSB2YWx1ZVxuICAgICAgICA/IHVuaW9uSW50ZXJzZWN0RnVuY3Rpb25cbiAgICAgICAgOiBkZWZhdWx0SW50ZXJzZWN0RnVuY3Rpb247XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgY2xpcHBpbmcgd2lsbCBiZSBlbmFibGVkLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24ucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBlbmFibGVkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5fZW5hYmxlZCA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fZW5hYmxlZCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB0ZXh0dXJlIGNvbnRhaW5pbmcgcGFja2VkLCB1bnRyYW5zZm9ybWVkIGNsaXBwaW5nIHBsYW5lcy5cbiAgICpcbiAgICogQG1lbWJlcm9mIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7VGV4dHVyZX1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0ZXh0dXJlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xpcHBpbmdQbGFuZXNUZXh0dXJlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbidzIG93bmVyLCBpZiBhbnkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGVcbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvd25lcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX293bmVyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBOdW1iZXIgZW5jYXBzdWxhdGluZyB0aGUgc3RhdGUgZm9yIHRoaXMgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24uXG4gICAqXG4gICAqIENsaXBwaW5nIG1vZGUgaXMgZW5jb2RlZCBpbiB0aGUgc2lnbiBvZiB0aGUgbnVtYmVyLCB3aGljaCBpcyBqdXN0IHRoZSBwbGFuZSBjb3VudC5cbiAgICogVXNlZCBmb3IgY2hlY2tpbmcgaWYgc2hhZGVyIHJlZ2VuZXJhdGlvbiBpcyBuZWNlc3NhcnkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGVcbiAgICogQHJldHVybnMge051bWJlcn0gQSBOdW1iZXIgdGhhdCBkZXNjcmliZXMgdGhlIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uJ3Mgc3RhdGUuXG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2xpcHBpbmdQbGFuZXNTdGF0ZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3VuaW9uQ2xpcHBpbmdSZWdpb25zXG4gICAgICAgID8gdGhpcy5fcGxhbmVzLmxlbmd0aFxuICAgICAgICA6IC10aGlzLl9wbGFuZXMubGVuZ3RoO1xuICAgIH0sXG4gIH0sXG59KTtcblxuZnVuY3Rpb24gc2V0SW5kZXhEaXJ0eShjb2xsZWN0aW9uLCBpbmRleCkge1xuICAvLyBJZiB0aGVyZSdzIGFscmVhZHkgYSBkaWZmZXJlbnQgX2RpcnR5SW5kZXggc2V0LCBtb3JlIHRoYW4gb25lIHBsYW5lIGhhcyBjaGFuZ2VkIHNpbmNlIHVwZGF0ZS5cbiAgLy8gRW50aXJlIHRleHR1cmUgbXVzdCBiZSByZWxvYWRlZFxuICBjb2xsZWN0aW9uLl9tdWx0aXBsZURpcnR5UGxhbmVzID1cbiAgICBjb2xsZWN0aW9uLl9tdWx0aXBsZURpcnR5UGxhbmVzIHx8XG4gICAgKGNvbGxlY3Rpb24uX2RpcnR5SW5kZXggIT09IC0xICYmIGNvbGxlY3Rpb24uX2RpcnR5SW5kZXggIT09IGluZGV4KTtcbiAgY29sbGVjdGlvbi5fZGlydHlJbmRleCA9IGluZGV4O1xufVxuXG4vKipcbiAqIEFkZHMgdGhlIHNwZWNpZmllZCB7QGxpbmsgQ2xpcHBpbmdQbGFuZX0gdG8gdGhlIGNvbGxlY3Rpb24gdG8gYmUgdXNlZCB0byBzZWxlY3RpdmVseSBkaXNhYmxlIHJlbmRlcmluZ1xuICogb24gdGhlIG91dHNpZGUgb2YgZWFjaCBwbGFuZS4gVXNlIHtAbGluayBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiN1bmlvbkNsaXBwaW5nUmVnaW9uc30gdG8gbW9kaWZ5XG4gKiBob3cgbW9kaWZ5IHRoZSBjbGlwcGluZyBiZWhhdmlvciBvZiBtdWx0aXBsZSBwbGFuZXMuXG4gKlxuICogQHBhcmFtIHtDbGlwcGluZ1BsYW5lfSBwbGFuZSBUaGUgQ2xpcHBpbmdQbGFuZSB0byBhZGQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHNlZSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiN1bmlvbkNsaXBwaW5nUmVnaW9uc1xuICogQHNlZSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiNyZW1vdmVcbiAqIEBzZWUgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24jcmVtb3ZlQWxsXG4gKi9cbkNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAocGxhbmUpIHtcbiAgdmFyIG5ld1BsYW5lSW5kZXggPSB0aGlzLl9wbGFuZXMubGVuZ3RoO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgcGxhbmUub25DaGFuZ2VDYWxsYmFjayA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHNldEluZGV4RGlydHkodGhhdCwgaW5kZXgpO1xuICB9O1xuICBwbGFuZS5pbmRleCA9IG5ld1BsYW5lSW5kZXg7XG5cbiAgc2V0SW5kZXhEaXJ0eSh0aGlzLCBuZXdQbGFuZUluZGV4KTtcbiAgdGhpcy5fcGxhbmVzLnB1c2gocGxhbmUpO1xuICB0aGlzLnBsYW5lQWRkZWQucmFpc2VFdmVudChwbGFuZSwgbmV3UGxhbmVJbmRleCk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHBsYW5lIGluIHRoZSBjb2xsZWN0aW9uIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguICBJbmRpY2VzIGFyZSB6ZXJvLWJhc2VkXG4gKiBhbmQgaW5jcmVhc2UgYXMgcGxhbmVzIGFyZSBhZGRlZC4gIFJlbW92aW5nIGEgcGxhbmUgc2hpZnRzIGFsbCBwbGFuZXMgYWZ0ZXJcbiAqIGl0IHRvIHRoZSBsZWZ0LCBjaGFuZ2luZyB0aGVpciBpbmRpY2VzLiAgVGhpcyBmdW5jdGlvbiBpcyBjb21tb25seSB1c2VkIHdpdGhcbiAqIHtAbGluayBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiNsZW5ndGh9IHRvIGl0ZXJhdGUgb3ZlciBhbGwgdGhlIHBsYW5lc1xuICogaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSB6ZXJvLWJhc2VkIGluZGV4IG9mIHRoZSBwbGFuZS5cbiAqIEByZXR1cm5zIHtDbGlwcGluZ1BsYW5lfSBUaGUgQ2xpcHBpbmdQbGFuZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICpcbiAqIEBzZWUgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24jbGVuZ3RoXG4gKi9cbkNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLm51bWJlcihcImluZGV4XCIsIGluZGV4KTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgcmV0dXJuIHRoaXMuX3BsYW5lc1tpbmRleF07XG59O1xuXG5mdW5jdGlvbiBpbmRleE9mKHBsYW5lcywgcGxhbmUpIHtcbiAgdmFyIGxlbmd0aCA9IHBsYW5lcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoUGxhbmUuZXF1YWxzKHBsYW5lc1tpXSwgcGxhbmUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgdGhpcyBjb2xsZWN0aW9uIGNvbnRhaW5zIGEgQ2xpcHBpbmdQbGFuZSBlcXVhbCB0byB0aGUgZ2l2ZW4gQ2xpcHBpbmdQbGFuZS5cbiAqXG4gKiBAcGFyYW0ge0NsaXBwaW5nUGxhbmV9IFtjbGlwcGluZ1BsYW5lXSBUaGUgQ2xpcHBpbmdQbGFuZSB0byBjaGVjayBmb3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGlzIGNvbGxlY3Rpb24gY29udGFpbnMgdGhlIENsaXBwaW5nUGxhbmUsIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAc2VlIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uI2dldFxuICovXG5DbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAoY2xpcHBpbmdQbGFuZSkge1xuICByZXR1cm4gaW5kZXhPZih0aGlzLl9wbGFuZXMsIGNsaXBwaW5nUGxhbmUpICE9PSAtMTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiB0aGUgZ2l2ZW4gQ2xpcHBpbmdQbGFuZSBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Q2xpcHBpbmdQbGFuZX0gY2xpcHBpbmdQbGFuZVxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZSBwbGFuZSB3YXMgcmVtb3ZlZDsgPGNvZGU+ZmFsc2U8L2NvZGU+IGlmIHRoZSBwbGFuZSB3YXMgbm90IGZvdW5kIGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBzZWUgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24jYWRkXG4gKiBAc2VlIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uI2NvbnRhaW5zXG4gKiBAc2VlIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uI3JlbW92ZUFsbFxuICovXG5DbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGNsaXBwaW5nUGxhbmUpIHtcbiAgdmFyIHBsYW5lcyA9IHRoaXMuX3BsYW5lcztcbiAgdmFyIGluZGV4ID0gaW5kZXhPZihwbGFuZXMsIGNsaXBwaW5nUGxhbmUpO1xuXG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBVbmxpbmsgdGhpcyBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiBmcm9tIHRoZSBDbGlwcGluZ1BsYW5lXG4gIGlmIChjbGlwcGluZ1BsYW5lIGluc3RhbmNlb2YgQ2xpcHBpbmdQbGFuZSkge1xuICAgIGNsaXBwaW5nUGxhbmUub25DaGFuZ2VDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICBjbGlwcGluZ1BsYW5lLmluZGV4ID0gLTE7XG4gIH1cblxuICAvLyBTaGlmdCBhbmQgdXBkYXRlIGluZGljZXNcbiAgdmFyIGxlbmd0aCA9IHBsYW5lcy5sZW5ndGggLSAxO1xuICBmb3IgKHZhciBpID0gaW5kZXg7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwbGFuZVRvS2VlcCA9IHBsYW5lc1tpICsgMV07XG4gICAgcGxhbmVzW2ldID0gcGxhbmVUb0tlZXA7XG4gICAgaWYgKHBsYW5lVG9LZWVwIGluc3RhbmNlb2YgQ2xpcHBpbmdQbGFuZSkge1xuICAgICAgcGxhbmVUb0tlZXAuaW5kZXggPSBpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEluZGljYXRlIHBsYW5lcyB0ZXh0dXJlIGlzIGRpcnR5XG4gIHRoaXMuX211bHRpcGxlRGlydHlQbGFuZXMgPSB0cnVlO1xuICBwbGFuZXMubGVuZ3RoID0gbGVuZ3RoO1xuXG4gIHRoaXMucGxhbmVSZW1vdmVkLnJhaXNlRXZlbnQoY2xpcHBpbmdQbGFuZSwgaW5kZXgpO1xuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBwbGFuZXMgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAc2VlIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uI2FkZFxuICogQHNlZSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiNyZW1vdmVcbiAqL1xuQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gRGVyZWZlcmVuY2UgdGhpcyBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiBmcm9tIGFsbCBDbGlwcGluZ1BsYW5lc1xuICB2YXIgcGxhbmVzID0gdGhpcy5fcGxhbmVzO1xuICB2YXIgcGxhbmVzQ291bnQgPSBwbGFuZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBsYW5lc0NvdW50OyArK2kpIHtcbiAgICB2YXIgcGxhbmUgPSBwbGFuZXNbaV07XG4gICAgaWYgKHBsYW5lIGluc3RhbmNlb2YgQ2xpcHBpbmdQbGFuZSkge1xuICAgICAgcGxhbmUub25DaGFuZ2VDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgIHBsYW5lLmluZGV4ID0gLTE7XG4gICAgfVxuICAgIHRoaXMucGxhbmVSZW1vdmVkLnJhaXNlRXZlbnQocGxhbmUsIGkpO1xuICB9XG4gIHRoaXMuX211bHRpcGxlRGlydHlQbGFuZXMgPSB0cnVlO1xuICB0aGlzLl9wbGFuZXMgPSBbXTtcbn07XG5cbnZhciBkaXN0YW5jZUVuY29kZVNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuNCgpO1xudmFyIG9jdDMyRW5jb2RlU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW40KCk7XG5mdW5jdGlvbiBwYWNrUGxhbmVzQXNVaW50OChjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiwgc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgdmFyIHVpbnQ4VmlldyA9IGNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLl91aW50OFZpZXc7XG4gIHZhciBwbGFuZXMgPSBjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5fcGxhbmVzO1xuICB2YXIgYnl0ZUluZGV4ID0gMDtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPCBlbmRJbmRleDsgKytpKSB7XG4gICAgdmFyIHBsYW5lID0gcGxhbmVzW2ldO1xuXG4gICAgdmFyIG9jdDMyTm9ybWFsID0gQXR0cmlidXRlQ29tcHJlc3Npb24ub2N0RW5jb2RlVG9DYXJ0ZXNpYW40KFxuICAgICAgcGxhbmUubm9ybWFsLFxuICAgICAgb2N0MzJFbmNvZGVTY3JhdGNoXG4gICAgKTtcbiAgICB1aW50OFZpZXdbYnl0ZUluZGV4XSA9IG9jdDMyTm9ybWFsLng7XG4gICAgdWludDhWaWV3W2J5dGVJbmRleCArIDFdID0gb2N0MzJOb3JtYWwueTtcbiAgICB1aW50OFZpZXdbYnl0ZUluZGV4ICsgMl0gPSBvY3QzMk5vcm1hbC56O1xuICAgIHVpbnQ4Vmlld1tieXRlSW5kZXggKyAzXSA9IG9jdDMyTm9ybWFsLnc7XG5cbiAgICB2YXIgZW5jb2RlZERpc3RhbmNlID0gQ2FydGVzaWFuNC5wYWNrRmxvYXQoXG4gICAgICBwbGFuZS5kaXN0YW5jZSxcbiAgICAgIGRpc3RhbmNlRW5jb2RlU2NyYXRjaFxuICAgICk7XG4gICAgdWludDhWaWV3W2J5dGVJbmRleCArIDRdID0gZW5jb2RlZERpc3RhbmNlLng7XG4gICAgdWludDhWaWV3W2J5dGVJbmRleCArIDVdID0gZW5jb2RlZERpc3RhbmNlLnk7XG4gICAgdWludDhWaWV3W2J5dGVJbmRleCArIDZdID0gZW5jb2RlZERpc3RhbmNlLno7XG4gICAgdWludDhWaWV3W2J5dGVJbmRleCArIDddID0gZW5jb2RlZERpc3RhbmNlLnc7XG5cbiAgICBieXRlSW5kZXggKz0gODtcbiAgfVxufVxuXG4vLyBQYWNrIHN0YXJ0aW5nIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGJ1ZmZlciB0byBhbGxvdyBwYXJ0aWFsIHVwZGF0ZVxuZnVuY3Rpb24gcGFja1BsYW5lc0FzRmxvYXRzKGNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLCBzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICB2YXIgZmxvYXQzMlZpZXcgPSBjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5fZmxvYXQzMlZpZXc7XG4gIHZhciBwbGFuZXMgPSBjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5fcGxhbmVzO1xuXG4gIHZhciBmbG9hdEluZGV4ID0gMDtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPCBlbmRJbmRleDsgKytpKSB7XG4gICAgdmFyIHBsYW5lID0gcGxhbmVzW2ldO1xuICAgIHZhciBub3JtYWwgPSBwbGFuZS5ub3JtYWw7XG5cbiAgICBmbG9hdDMyVmlld1tmbG9hdEluZGV4XSA9IG5vcm1hbC54O1xuICAgIGZsb2F0MzJWaWV3W2Zsb2F0SW5kZXggKyAxXSA9IG5vcm1hbC55O1xuICAgIGZsb2F0MzJWaWV3W2Zsb2F0SW5kZXggKyAyXSA9IG5vcm1hbC56O1xuICAgIGZsb2F0MzJWaWV3W2Zsb2F0SW5kZXggKyAzXSA9IHBsYW5lLmRpc3RhbmNlO1xuXG4gICAgZmxvYXRJbmRleCArPSA0OyAvLyBlYWNoIHBsYW5lIGlzIDQgZmxvYXRzXG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcHV0ZVRleHR1cmVSZXNvbHV0aW9uKHBpeGVsc05lZWRlZCwgcmVzdWx0KSB7XG4gIHZhciBtYXhTaXplID0gQ29udGV4dExpbWl0cy5tYXhpbXVtVGV4dHVyZVNpemU7XG4gIHJlc3VsdC54ID0gTWF0aC5taW4ocGl4ZWxzTmVlZGVkLCBtYXhTaXplKTtcbiAgcmVzdWx0LnkgPSBNYXRoLmNlaWwocGl4ZWxzTmVlZGVkIC8gcmVzdWx0LngpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgdGV4dHVyZVJlc29sdXRpb25TY3JhdGNoID0gbmV3IENhcnRlc2lhbjIoKTtcbi8qKlxuICogQ2FsbGVkIHdoZW4ge0BsaW5rIFZpZXdlcn0gb3Ige0BsaW5rIENlc2l1bVdpZGdldH0gcmVuZGVyIHRoZSBzY2VuZSB0b1xuICogYnVpbGQgdGhlIHJlc291cmNlcyBmb3IgY2xpcHBpbmcgcGxhbmVzLlxuICogPHA+XG4gKiBEbyBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uIGRpcmVjdGx5LlxuICogPC9wPlxuICovXG5DbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgdmFyIGNsaXBwaW5nUGxhbmVzVGV4dHVyZSA9IHRoaXMuX2NsaXBwaW5nUGxhbmVzVGV4dHVyZTtcbiAgdmFyIGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XG4gIHZhciB1c2VGbG9hdFRleHR1cmUgPSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi51c2VGbG9hdFRleHR1cmUoY29udGV4dCk7XG5cbiAgLy8gQ29tcHV0ZSB0ZXh0dXJlIHJlcXVpcmVtZW50cyBmb3IgY3VycmVudCBwbGFuZXNcbiAgLy8gSW4gUkdCQSBGTE9BVCwgQSBwbGFuZSBpcyA0IGZsb2F0cyBwYWNrZWQgdG8gYSBSR0JBLlxuICAvLyBJbiBSR0JBIFVOU0lHTkVEX0JZVEUsIEEgcGxhbmUgaXMgYSBmbG9hdCBpbiBbMCwgMSkgcGFja2VkIHRvIFJHQkEgYW5kIGFuIE9jdDMyIHF1YW50aXplZCBub3JtYWwsXG4gIC8vIHNvIDggYml0cyBvciAyIHBpeGVscyBpbiBSR0JBLlxuICB2YXIgcGl4ZWxzTmVlZGVkID0gdXNlRmxvYXRUZXh0dXJlID8gdGhpcy5sZW5ndGggOiB0aGlzLmxlbmd0aCAqIDI7XG5cbiAgaWYgKGRlZmluZWQoY2xpcHBpbmdQbGFuZXNUZXh0dXJlKSkge1xuICAgIHZhciBjdXJyZW50UGl4ZWxDb3VudCA9XG4gICAgICBjbGlwcGluZ1BsYW5lc1RleHR1cmUud2lkdGggKiBjbGlwcGluZ1BsYW5lc1RleHR1cmUuaGVpZ2h0O1xuICAgIC8vIFJlY3JlYXRlIHRoZSB0ZXh0dXJlIHRvIGRvdWJsZSBjdXJyZW50IHJlcXVpcmVtZW50IGlmIGl0IGlzbid0IGJpZyBlbm91Z2ggb3IgaXMgNCB0aW1lcyBsYXJnZXIgdGhhbiBpdCBuZWVkcyB0byBiZS5cbiAgICAvLyBPcHRpbWl6YXRpb24gbm90ZTogdGhpcyBpc24ndCBleGFjdGx5IHRoZSBjbGFzc2ljIHJlc2l6ZWFibGUgYXJyYXkgYWxnb3JpdGhtXG4gICAgLy8gKiBub3QgbmVjZXNzYXJpbHkgY2hlY2tpbmcgZm9yIHJlc2l6ZSBhZnRlciBlYWNoIGFkZC9yZW1vdmUgb3BlcmF0aW9uXG4gICAgLy8gKiByYW5kb20tYWNjZXNzIGRlbGV0ZXMgaW5zdGVhZCBvZiBqdXN0IHBvcHNcbiAgICAvLyAqIGFsbG9jIG9wcyBsaWtlbHkgbW9yZSBleHBlbnNpdmUgdGhhbiBkZW1vbnN0cmFibGUgdmlhIGJpZy1PIGFuYWx5c2lzXG4gICAgaWYgKFxuICAgICAgY3VycmVudFBpeGVsQ291bnQgPCBwaXhlbHNOZWVkZWQgfHxcbiAgICAgIHBpeGVsc05lZWRlZCA8IDAuMjUgKiBjdXJyZW50UGl4ZWxDb3VudFxuICAgICkge1xuICAgICAgY2xpcHBpbmdQbGFuZXNUZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgIGNsaXBwaW5nUGxhbmVzVGV4dHVyZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2NsaXBwaW5nUGxhbmVzVGV4dHVyZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvLyBJZiB0aGVyZSBhcmUgbm8gY2xpcHBpbmcgcGxhbmVzLCB0aGVyZSdzIG5vdGhpbmcgdG8gdXBkYXRlLlxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIWRlZmluZWQoY2xpcHBpbmdQbGFuZXNUZXh0dXJlKSkge1xuICAgIHZhciByZXF1aXJlZFJlc29sdXRpb24gPSBjb21wdXRlVGV4dHVyZVJlc29sdXRpb24oXG4gICAgICBwaXhlbHNOZWVkZWQsXG4gICAgICB0ZXh0dXJlUmVzb2x1dGlvblNjcmF0Y2hcbiAgICApO1xuICAgIC8vIEFsbG9jYXRlIHR3aWNlIGFzIG11Y2ggc3BhY2UgYXMgbmVlZGVkIHRvIGF2b2lkIGZyZXF1ZW50IHRleHR1cmUgcmVhbGxvY2F0aW9uLlxuICAgIC8vIEFsbG9jYXRlIGluIHRoZSBZIGRpcmVjdGlvbiwgc2luY2UgdGV4dHVyZSBtYXkgYmUgYXMgd2lkZSBhcyBjb250ZXh0IHRleHR1cmUgc3VwcG9ydC5cbiAgICByZXF1aXJlZFJlc29sdXRpb24ueSAqPSAyO1xuXG4gICAgaWYgKHVzZUZsb2F0VGV4dHVyZSkge1xuICAgICAgY2xpcHBpbmdQbGFuZXNUZXh0dXJlID0gbmV3IFRleHR1cmUoe1xuICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICB3aWR0aDogcmVxdWlyZWRSZXNvbHV0aW9uLngsXG4gICAgICAgIGhlaWdodDogcmVxdWlyZWRSZXNvbHV0aW9uLnksXG4gICAgICAgIHBpeGVsRm9ybWF0OiBQaXhlbEZvcm1hdC5SR0JBLFxuICAgICAgICBwaXhlbERhdGF0eXBlOiBQaXhlbERhdGF0eXBlLkZMT0FULFxuICAgICAgICBzYW1wbGVyOiBTYW1wbGVyLk5FQVJFU1QsXG4gICAgICAgIGZsaXBZOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fZmxvYXQzMlZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICByZXF1aXJlZFJlc29sdXRpb24ueCAqIHJlcXVpcmVkUmVzb2x1dGlvbi55ICogNFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xpcHBpbmdQbGFuZXNUZXh0dXJlID0gbmV3IFRleHR1cmUoe1xuICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICB3aWR0aDogcmVxdWlyZWRSZXNvbHV0aW9uLngsXG4gICAgICAgIGhlaWdodDogcmVxdWlyZWRSZXNvbHV0aW9uLnksXG4gICAgICAgIHBpeGVsRm9ybWF0OiBQaXhlbEZvcm1hdC5SR0JBLFxuICAgICAgICBwaXhlbERhdGF0eXBlOiBQaXhlbERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgIHNhbXBsZXI6IFNhbXBsZXIuTkVBUkVTVCxcbiAgICAgICAgZmxpcFk6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICB0aGlzLl91aW50OFZpZXcgPSBuZXcgVWludDhBcnJheShcbiAgICAgICAgcmVxdWlyZWRSZXNvbHV0aW9uLnggKiByZXF1aXJlZFJlc29sdXRpb24ueSAqIDRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2xpcHBpbmdQbGFuZXNUZXh0dXJlID0gY2xpcHBpbmdQbGFuZXNUZXh0dXJlO1xuICAgIHRoaXMuX211bHRpcGxlRGlydHlQbGFuZXMgPSB0cnVlO1xuICB9XG5cbiAgdmFyIGRpcnR5SW5kZXggPSB0aGlzLl9kaXJ0eUluZGV4O1xuICBpZiAoIXRoaXMuX211bHRpcGxlRGlydHlQbGFuZXMgJiYgZGlydHlJbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCF0aGlzLl9tdWx0aXBsZURpcnR5UGxhbmVzKSB7XG4gICAgLy8gcGFydGlhbCB1cGRhdGVzIHBvc3NpYmxlXG4gICAgdmFyIG9mZnNldFggPSAwO1xuICAgIHZhciBvZmZzZXRZID0gMDtcbiAgICBpZiAodXNlRmxvYXRUZXh0dXJlKSB7XG4gICAgICBvZmZzZXRZID0gTWF0aC5mbG9vcihkaXJ0eUluZGV4IC8gY2xpcHBpbmdQbGFuZXNUZXh0dXJlLndpZHRoKTtcbiAgICAgIG9mZnNldFggPSBNYXRoLmZsb29yKGRpcnR5SW5kZXggLSBvZmZzZXRZICogY2xpcHBpbmdQbGFuZXNUZXh0dXJlLndpZHRoKTtcblxuICAgICAgcGFja1BsYW5lc0FzRmxvYXRzKHRoaXMsIGRpcnR5SW5kZXgsIGRpcnR5SW5kZXggKyAxKTtcbiAgICAgIGNsaXBwaW5nUGxhbmVzVGV4dHVyZS5jb3B5RnJvbSh7XG4gICAgICAgIHNvdXJjZToge1xuICAgICAgICAgIHdpZHRoOiAxLFxuICAgICAgICAgIGhlaWdodDogMSxcbiAgICAgICAgICBhcnJheUJ1ZmZlclZpZXc6IHRoaXMuX2Zsb2F0MzJWaWV3LFxuICAgICAgICB9LFxuICAgICAgICB4T2Zmc2V0OiBvZmZzZXRYLFxuICAgICAgICB5T2Zmc2V0OiBvZmZzZXRZLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldFkgPSBNYXRoLmZsb29yKChkaXJ0eUluZGV4ICogMikgLyBjbGlwcGluZ1BsYW5lc1RleHR1cmUud2lkdGgpO1xuICAgICAgb2Zmc2V0WCA9IE1hdGguZmxvb3IoXG4gICAgICAgIGRpcnR5SW5kZXggKiAyIC0gb2Zmc2V0WSAqIGNsaXBwaW5nUGxhbmVzVGV4dHVyZS53aWR0aFxuICAgICAgKTtcbiAgICAgIHBhY2tQbGFuZXNBc1VpbnQ4KHRoaXMsIGRpcnR5SW5kZXgsIGRpcnR5SW5kZXggKyAxKTtcbiAgICAgIGNsaXBwaW5nUGxhbmVzVGV4dHVyZS5jb3B5RnJvbSh7XG4gICAgICAgIHNvdXJjZToge1xuICAgICAgICAgIHdpZHRoOiAyLFxuICAgICAgICAgIGhlaWdodDogMSxcbiAgICAgICAgICBhcnJheUJ1ZmZlclZpZXc6IHRoaXMuX3VpbnQ4VmlldyxcbiAgICAgICAgfSxcbiAgICAgICAgeE9mZnNldDogb2Zmc2V0WCxcbiAgICAgICAgeU9mZnNldDogb2Zmc2V0WSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmICh1c2VGbG9hdFRleHR1cmUpIHtcbiAgICBwYWNrUGxhbmVzQXNGbG9hdHModGhpcywgMCwgdGhpcy5fcGxhbmVzLmxlbmd0aCk7XG4gICAgY2xpcHBpbmdQbGFuZXNUZXh0dXJlLmNvcHlGcm9tKHtcbiAgICAgIHNvdXJjZToge1xuICAgICAgICB3aWR0aDogY2xpcHBpbmdQbGFuZXNUZXh0dXJlLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IGNsaXBwaW5nUGxhbmVzVGV4dHVyZS5oZWlnaHQsXG4gICAgICAgIGFycmF5QnVmZmVyVmlldzogdGhpcy5fZmxvYXQzMlZpZXcsXG4gICAgICB9LFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHBhY2tQbGFuZXNBc1VpbnQ4KHRoaXMsIDAsIHRoaXMuX3BsYW5lcy5sZW5ndGgpO1xuICAgIGNsaXBwaW5nUGxhbmVzVGV4dHVyZS5jb3B5RnJvbSh7XG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgd2lkdGg6IGNsaXBwaW5nUGxhbmVzVGV4dHVyZS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBjbGlwcGluZ1BsYW5lc1RleHR1cmUuaGVpZ2h0LFxuICAgICAgICBhcnJheUJ1ZmZlclZpZXc6IHRoaXMuX3VpbnQ4VmlldyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICB0aGlzLl9tdWx0aXBsZURpcnR5UGxhbmVzID0gZmFsc2U7XG4gIHRoaXMuX2RpcnR5SW5kZXggPSAtMTtcbn07XG5cbnZhciBzY3JhdGNoTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcbnZhciBzY3JhdGNoUGxhbmUgPSBuZXcgUGxhbmUoQ2FydGVzaWFuMy5VTklUX1gsIDAuMCk7XG4vKipcbiAqIERldGVybWluZXMgdGhlIHR5cGUgaW50ZXJzZWN0aW9uIHdpdGggdGhlIHBsYW5lcyBvZiB0aGlzIENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uIGluc3RhbmNlIGFuZCB0aGUgc3BlY2lmaWVkIHtAbGluayBUaWxlQm91bmRpbmdWb2x1bWV9LlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGlsZUJvdW5kaW5nVm9sdW1lIFRoZSB2b2x1bWUgdG8gZGV0ZXJtaW5lIHRoZSBpbnRlcnNlY3Rpb24gd2l0aCB0aGUgcGxhbmVzLlxuICogQHBhcmFtIHtNYXRyaXg0fSBbdHJhbnNmb3JtXSBBbiBvcHRpb25hbCwgYWRkaXRpb25hbCBtYXRyaXggdG8gdHJhbnNmb3JtIHRoZSBwbGFuZSB0byB3b3JsZCBjb29yZGluYXRlcy5cbiAqIEByZXR1cm5zIHtJbnRlcnNlY3R9IHtAbGluayBJbnRlcnNlY3QuSU5TSURFfSBpZiB0aGUgZW50aXJlIHZvbHVtZSBpcyBvbiB0aGUgc2lkZSBvZiB0aGUgcGxhbmVzXG4gKiAgICAgICAgICAgICAgICAgICAgICB0aGUgbm9ybWFsIGlzIHBvaW50aW5nIGFuZCBzaG91bGQgYmUgZW50aXJlbHkgcmVuZGVyZWQsIHtAbGluayBJbnRlcnNlY3QuT1VUU0lERX1cbiAqICAgICAgICAgICAgICAgICAgICAgIGlmIHRoZSBlbnRpcmUgdm9sdW1lIGlzIG9uIHRoZSBvcHBvc2l0ZSBzaWRlIGFuZCBzaG91bGQgYmUgY2xpcHBlZCwgYW5kXG4gKiAgICAgICAgICAgICAgICAgICAgICB7QGxpbmsgSW50ZXJzZWN0LklOVEVSU0VDVElOR30gaWYgdGhlIHZvbHVtZSBpbnRlcnNlY3RzIHRoZSBwbGFuZXMuXG4gKi9cbkNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9uV2l0aEJvdW5kaW5nVm9sdW1lID0gZnVuY3Rpb24gKFxuICB0aWxlQm91bmRpbmdWb2x1bWUsXG4gIHRyYW5zZm9ybVxuKSB7XG4gIHZhciBwbGFuZXMgPSB0aGlzLl9wbGFuZXM7XG4gIHZhciBsZW5ndGggPSBwbGFuZXMubGVuZ3RoO1xuXG4gIHZhciBtb2RlbE1hdHJpeCA9IHRoaXMubW9kZWxNYXRyaXg7XG4gIGlmIChkZWZpbmVkKHRyYW5zZm9ybSkpIHtcbiAgICBtb2RlbE1hdHJpeCA9IE1hdHJpeDQubXVsdGlwbHkodHJhbnNmb3JtLCBtb2RlbE1hdHJpeCwgc2NyYXRjaE1hdHJpeCk7XG4gIH1cblxuICAvLyBJZiB0aGUgY29sbGVjdGlvbiBpcyBub3Qgc2V0IHRvIHVuaW9uIHRoZSBjbGlwcGluZyByZWdpb25zLCB0aGUgdm9sdW1lIG11c3QgYmUgb3V0c2lkZSBvZiBhbGwgcGxhbmVzIHRvIGJlXG4gIC8vIGNvbnNpZGVyZWQgY29tcGxldGVseSBjbGlwcGVkLiBJZiB0aGUgY29sbGVjdGlvbiBpcyBzZXQgdG8gdW5pb24gdGhlIGNsaXBwaW5nIHJlZ2lvbnMsIGlmIHRoZSB2b2x1bWUgY2FuIGJlXG4gIC8vIG91dHNpZGUgYW55IHRoZSBwbGFuZXMsIGl0IGlzIGNvbnNpZGVyZWQgY29tcGxldGVseSBjbGlwcGVkLlxuICAvLyBMYXN0bHksIGlmIG5vdCBjb21wbGV0ZWx5IGNsaXBwZWQsIGlmIGFueSBwbGFuZSBpcyBpbnRlcnNlY3RpbmcsIG1vcmUgY2FsY3VsYXRpb25zIG11c3QgYmUgcGVyZm9ybWVkLlxuICB2YXIgaW50ZXJzZWN0aW9uID0gSW50ZXJzZWN0LklOU0lERTtcbiAgaWYgKCF0aGlzLnVuaW9uQ2xpcHBpbmdSZWdpb25zICYmIGxlbmd0aCA+IDApIHtcbiAgICBpbnRlcnNlY3Rpb24gPSBJbnRlcnNlY3QuT1VUU0lERTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGxhbmUgPSBwbGFuZXNbaV07XG5cbiAgICBQbGFuZS50cmFuc2Zvcm0ocGxhbmUsIG1vZGVsTWF0cml4LCBzY3JhdGNoUGxhbmUpOyAvLyBDbGlwcGluZ1BsYW5lIGNhbiBiZSB1c2VkIGZvciBQbGFuZSBtYXRoXG5cbiAgICB2YXIgdmFsdWUgPSB0aWxlQm91bmRpbmdWb2x1bWUuaW50ZXJzZWN0UGxhbmUoc2NyYXRjaFBsYW5lKTtcbiAgICBpZiAodmFsdWUgPT09IEludGVyc2VjdC5JTlRFUlNFQ1RJTkcpIHtcbiAgICAgIGludGVyc2VjdGlvbiA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fdGVzdEludGVyc2VjdGlvbih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaW50ZXJzZWN0aW9uO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBvd25lciBmb3IgdGhlIGlucHV0IENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uIGlmIHRoZXJlIHdhc24ndCBhbm90aGVyIG93bmVyLlxuICogRGVzdHJveXMgdGhlIG93bmVyJ3MgcHJldmlvdXMgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24gaWYgc2V0dGluZyBpcyBzdWNjZXNzZnVsLlxuICpcbiAqIEBwYXJhbSB7Q2xpcHBpbmdQbGFuZUNvbGxlY3Rpb259IFtjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbl0gQSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiAob3IgdW5kZWZpbmVkKSBiZWluZyBhdHRhY2hlZCB0byBhbiBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvd25lciBBbiBPYmplY3QgdGhhdCBzaG91bGQgcmVjZWl2ZSB0aGUgbmV3IENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBLZXkgZm9yIHRoZSBPYmplY3QgdG8gcmVmZXJlbmNlIHRoZSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvblxuICogQHByaXZhdGVcbiAqL1xuQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24uc2V0T3duZXIgPSBmdW5jdGlvbiAoXG4gIGNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLFxuICBvd25lcixcbiAga2V5XG4pIHtcbiAgLy8gRG9uJ3QgZGVzdHJveSB0aGUgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24gaWYgaXQgaXMgYWxyZWFkeSBvd25lZCBieSBuZXdPd25lclxuICBpZiAoY2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24gPT09IG93bmVyW2tleV0pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gRGVzdHJveSB0aGUgZXhpc3RpbmcgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24sIGlmIGFueVxuICBvd25lcltrZXldID0gb3duZXJba2V5XSAmJiBvd25lcltrZXldLmRlc3Ryb3koKTtcbiAgaWYgKGRlZmluZWQoY2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24pKSB7XG4gICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICBpZiAoZGVmaW5lZChjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5fb3duZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgIFwiQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24gc2hvdWxkIG9ubHkgYmUgYXNzaWduZWQgdG8gb25lIG9iamVjdFwiXG4gICAgICApO1xuICAgIH1cbiAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICBjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5fb3duZXIgPSBvd25lcjtcbiAgICBvd25lcltrZXldID0gY2xpcHBpbmdQbGFuZUNvbGxlY3Rpb247XG4gIH1cbn07XG5cbi8qKlxuICogRnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIHRoZSBjb250ZXh0IHdpbGwgYWxsb3cgY2xpcHBpbmcgcGxhbmVzIHdpdGggZmxvYXRpbmcgcG9pbnQgdGV4dHVyZXMuXG4gKlxuICogQHBhcmFtIHtDb250ZXh0fSBjb250ZXh0IFRoZSBDb250ZXh0IHRoYXQgd2lsbCBjb250YWluIGNsaXBwZWQgb2JqZWN0cyBhbmQgY2xpcHBpbmcgdGV4dHVyZXMuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgZmxvYXRpbmcgcG9pbnQgdGV4dHVyZXMgY2FuIGJlIHVzZWQgZm9yIGNsaXBwaW5nIHBsYW5lcy5cbiAqIEBwcml2YXRlXG4gKi9cbkNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLnVzZUZsb2F0VGV4dHVyZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gIHJldHVybiBjb250ZXh0LmZsb2F0aW5nUG9pbnRUZXh0dXJlO1xufTtcblxuLyoqXG4gKiBGdW5jdGlvbiBmb3IgZ2V0dGluZyB0aGUgY2xpcHBpbmcgcGxhbmUgY29sbGVjdGlvbidzIHRleHR1cmUgcmVzb2x1dGlvbi5cbiAqIElmIHRoZSBDbGlwcGluZ1BsYW5lQ29sbGVjdGlvbiBoYXNuJ3QgYmVlbiB1cGRhdGVkLCByZXR1cm5zIHRoZSByZXNvbHV0aW9uIHRoYXQgd2lsbCBiZVxuICogYWxsb2NhdGVkIGJhc2VkIG9uIHRoZSBjdXJyZW50IHBsYW5lIGNvdW50LlxuICpcbiAqIEBwYXJhbSB7Q2xpcHBpbmdQbGFuZUNvbGxlY3Rpb259IGNsaXBwaW5nUGxhbmVDb2xsZWN0aW9uIFRoZSBjbGlwcGluZyBwbGFuZSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0NvbnRleHR9IGNvbnRleHQgVGhlIHJlbmRlcmluZyBjb250ZXh0XG4gKiBAcGFyYW0ge0NhcnRlc2lhbjJ9IHJlc3VsdCBBIENhcnRlc2lhbjIgZm9yIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuMn0gVGhlIHJlcXVpcmVkIHJlc29sdXRpb24uXG4gKiBAcHJpdmF0ZVxuICovXG5DbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5nZXRUZXh0dXJlUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChcbiAgY2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24sXG4gIGNvbnRleHQsXG4gIHJlc3VsdFxuKSB7XG4gIHZhciB0ZXh0dXJlID0gY2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24udGV4dHVyZTtcbiAgaWYgKGRlZmluZWQodGV4dHVyZSkpIHtcbiAgICByZXN1bHQueCA9IHRleHR1cmUud2lkdGg7XG4gICAgcmVzdWx0LnkgPSB0ZXh0dXJlLmhlaWdodDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgdmFyIHBpeGVsc05lZWRlZCA9IENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uLnVzZUZsb2F0VGV4dHVyZShjb250ZXh0KVxuICAgID8gY2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24ubGVuZ3RoXG4gICAgOiBjbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5sZW5ndGggKiAyO1xuICB2YXIgcmVxdWlyZWRSZXNvbHV0aW9uID0gY29tcHV0ZVRleHR1cmVSZXNvbHV0aW9uKHBpeGVsc05lZWRlZCwgcmVzdWx0KTtcblxuICAvLyBBbGxvY2F0ZSB0d2ljZSBhcyBtdWNoIHNwYWNlIGFzIG5lZWRlZCB0byBhdm9pZCBmcmVxdWVudCB0ZXh0dXJlIHJlYWxsb2NhdGlvbi5cbiAgcmVxdWlyZWRSZXNvbHV0aW9uLnkgKj0gMjtcbiAgcmV0dXJuIHJlcXVpcmVkUmVzb2x1dGlvbjtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgZmFsc2UuXG4gKiA8YnIgLz48YnIgLz5cbiAqIElmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgPGNvZGU+ZmFsc2U8L2NvZGU+LlxuICpcbiAqIEBzZWUgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24jZGVzdHJveVxuICovXG5DbGlwcGluZ1BsYW5lQ29sbGVjdGlvbi5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIFdlYkdMIHJlc291cmNlcyBoZWxkIGJ5IHRoaXMgb2JqZWN0LiAgRGVzdHJveWluZyBhbiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljXG4gKiByZWxlYXNlIG9mIFdlYkdMIHJlc291cmNlcywgaW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0byBkZXN0cm95IHRoaXMgb2JqZWN0LlxuICogPGJyIC8+PGJyIC8+XG4gKiBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uICBUaGVyZWZvcmUsXG4gKiBhc3NpZ24gdGhlIHJldHVybiB2YWx1ZSAoPGNvZGU+dW5kZWZpbmVkPC9jb2RlPikgdG8gdGhlIG9iamVjdCBhcyBkb25lIGluIHRoZSBleGFtcGxlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIGNsaXBwaW5nUGxhbmVzID0gY2xpcHBpbmdQbGFuZXMgJiYgY2xpcHBpbmdQbGFuZXMuZGVzdHJveSgpO1xuICpcbiAqIEBzZWUgQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24jaXNEZXN0cm95ZWRcbiAqL1xuQ2xpcHBpbmdQbGFuZUNvbGxlY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2NsaXBwaW5nUGxhbmVzVGV4dHVyZSA9XG4gICAgdGhpcy5fY2xpcHBpbmdQbGFuZXNUZXh0dXJlICYmIHRoaXMuX2NsaXBwaW5nUGxhbmVzVGV4dHVyZS5kZXN0cm95KCk7XG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcbmV4cG9ydCBkZWZhdWx0IENsaXBwaW5nUGxhbmVDb2xsZWN0aW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21809\n')},43495:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13633);\n/* harmony import */ var _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99095);\n/* harmony import */ var _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58597);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66553);\n/* harmony import */ var _Renderer_ComputeCommand_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(92357);\n/* harmony import */ var _CloudType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(91757);\n/* harmony import */ var _Shaders_CloudCollectionFS_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(50442);\n/* harmony import */ var _Shaders_CloudCollectionVS_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(16999);\n/* harmony import */ var _Shaders_CloudNoiseFS_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(12444);\n/* harmony import */ var _Shaders_CloudNoiseVS_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(61968);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(84828);\n/* harmony import */ var _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(93030);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(12572);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(60072);\n/* harmony import */ var _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(74938);\n/* harmony import */ var _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(22832);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(8379);\n/* harmony import */ var _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(21572);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(38443);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(87721);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(53642);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(8743);\n/* harmony import */ var _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(42246);\n/* harmony import */ var _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(80188);\n/* harmony import */ var _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(88453);\n/* harmony import */ var _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(18192);\n/* harmony import */ var _Renderer_VertexArrayFacade_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(52851);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(52200);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar attributeLocations;\n\nvar attributeLocationsBatched = {\n  positionHighAndScaleX: 0,\n  positionLowAndScaleY: 1,\n  packedAttribute0: 2, // show, brightness, direction\n  packedAttribute1: 3, // cloudSize, slice\n};\n\nvar attributeLocationsInstanced = {\n  direction: 0,\n  positionHighAndScaleX: 1,\n  positionLowAndScaleY: 2,\n  packedAttribute0: 3, // show, brightness\n  packedAttribute1: 4, // cloudSize, slice\n};\n\nvar SHOW_INDEX = _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].SHOW_INDEX */ .Z.SHOW_INDEX;\nvar POSITION_INDEX = _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].POSITION_INDEX */ .Z.POSITION_INDEX;\nvar SCALE_INDEX = _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].SCALE_INDEX */ .Z.SCALE_INDEX;\nvar MAXIMUM_SIZE_INDEX = _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].MAXIMUM_SIZE_INDEX */ .Z.MAXIMUM_SIZE_INDEX;\nvar SLICE_INDEX = _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].SLICE_INDEX */ .Z.SLICE_INDEX;\nvar BRIGHTNESS_INDEX = _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].BRIGHTNESS_INDEX */ .Z.BRIGHTNESS_INDEX;\nvar NUMBER_OF_PROPERTIES = _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].NUMBER_OF_PROPERTIES */ .Z.NUMBER_OF_PROPERTIES;\n\n/**\n * A renderable collection of clouds in the 3D scene.\n * <br /><br />\n * <div align=\'center\'>\n * <img src=\'Images/CumulusCloud.png\' width=\'400\' height=\'300\' /><br />\n * Example cumulus clouds\n * </div>\n * <br /><br />\n * Clouds are added and removed from the collection using {@link CloudCollection#add}\n * and {@link CloudCollection#remove}.\n * @alias CloudCollection\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Boolean} [options.show=true] Whether to display the clouds.\n * @param {Number} [options.noiseDetail=16.0] Desired amount of detail in the noise texture.\n * @param {Number} [options.noiseOffset=Cartesian3.ZERO] Desired translation of data in noise texture.\n * @param {Boolean} [options.debugBillboards=false] For debugging only. Determines if the billboards are rendered with an opaque color.\n * @param {Boolean} [options.debugEllipsoids=false] For debugging only. Determines if the clouds will be rendered as opaque ellipsoids.\n * @see CloudCollection#add\n * @see CloudCollection#remove\n * @see CumulusCloud\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Clouds.html|Cesium Sandcastle Clouds Demo}\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Cloud%20Parameters.html|Cesium Sandcastle Cloud Parameters Demo}\n *\n * @example\n * // Create a cloud collection with two cumulus clouds\n * var clouds = scene.primitives.add(new Cesium.CloudCollection());\n * clouds.add({\n *   position : new Cesium.Cartesian3(1.0, 2.0, 3.0),\n *   maximumSize: new Cesium.Cartesian3(20.0, 12.0, 8.0)\n * });\n * clouds.add({\n *   position : new Cesium.Cartesian3(4.0, 5.0, 6.0),\n *   maximumSize: new Cesium.Cartesian3(15.0, 9.0, 9.0),\n *   slice: 0.5\n * });\n *\n */\nfunction CloudCollection(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._clouds = [];\n  this._cloudsToUpdate = [];\n  this._cloudsToUpdateIndex = 0;\n  this._cloudsRemoved = false;\n  this._createVertexArray = false;\n\n  this._propertiesChanged = new Uint32Array(NUMBER_OF_PROPERTIES);\n\n  this._noiseTexture = undefined;\n  this._noiseTextureLength = 128;\n\n  /**\n   * <p>\n   * Controls the amount of detail captured in the precomputed noise texture\n   * used to render the cumulus clouds. In order for the texture to be tileable,\n   * this must be a power of two. For best results, set this to be a power of two\n   * between <code>8.0</code> and <code>32.0</code> (inclusive).\n   * </p>\n   *\n   * <div align=\'center\'>\n   * <table border=\'0\' cellpadding=\'5\'><tr>\n   * <td align=\'center\'>\n   *   <code>clouds.noiseDetail = 8.0;</code><br/>\n   *   <img src=\'Images/CloudCollection.noiseDetail8.png\' width=\'250\' height=\'158\' />\n   * </td>\n   * <td align=\'center\'>\n   *   <code>clouds.noiseDetail = 32.0;</code><br/>\n   *   <img src=\'Images/CloudCollection.noiseDetail32.png\' width=\'250\' height=\'158\' />\n   * </td>\n   * </tr></table>\n   * </div>\n   *\n   * @type {Number}\n   *\n   * @default 16.0\n   */\n  this.noiseDetail = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.noiseDetail, 16.0);\n\n  /**\n   * <p>\n   * Applies a translation to noise texture coordinates to generate different data.\n   * This can be modified if the default noise does not generate good-looking clouds.\n   * </p>\n   *\n   * <div align=\'center\'>\n   * <table border=\'0\' cellpadding=\'5\'><tr>\n   * <td align=\'center\'>\n   *   <code>default</code><br/>\n   *   <img src=\'Images/CloudCollection.noiseOffsetdefault.png\' width=\'250\' height=\'158\' />\n   * </td>\n   * <td align=\'center\'>\n   *   <code>clouds.noiseOffset = new Cesium.Cartesian3(10, 20, 10);</code><br/>\n   *   <img src=\'Images/CloudCollection.noiseOffsetx10y20z10.png\' width=\'250\' height=\'158\' />\n   * </td>\n   * </tr></table>\n   * </div>\n   * @type {Cartesian3}\n   *\n   * @default Cartesian3.ZERO\n   */\n  this.noiseOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.noiseOffset, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ZERO */ .Z.ZERO)\n  );\n\n  this._loading = false;\n  this._ready = false;\n\n  var that = this;\n  this._uniforms = {\n    u_noiseTexture: function () {\n      return that._noiseTexture;\n    },\n    u_noiseTextureLength: function () {\n      return that._noiseTextureLength;\n    },\n    u_noiseDetail: function () {\n      return that.noiseDetail;\n    },\n  };\n\n  this._vaNoise = undefined;\n  this._spNoise = undefined;\n\n  this._spCreated = false;\n  this._sp = undefined;\n  this._rs = undefined;\n\n  /**\n   * Determines if billboards in this collection will be shown.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.show, true);\n\n  this._colorCommands = [];\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Renders the billboards with one opaque color for the sake of debugging.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugBillboards = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.debugBillboards, false);\n  this._compiledDebugBillboards = false;\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the clouds as opaque, monochrome ellipsoids for the sake of debugging.\n   * If <code>debugBillboards</code> is also true, then the ellipsoids will draw on top of the billboards.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugEllipsoids = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.debugEllipsoids, false);\n  this._compiledDebugEllipsoids = false;\n}\n\nObject.defineProperties(CloudCollection.prototype, {\n  /**\n   * Returns the number of clouds in this collection.\n   * @memberof CloudCollection.prototype\n   * @type {Number}\n   */\n  length: {\n    get: function () {\n      removeClouds(this);\n      return this._clouds.length;\n    },\n  },\n});\n\nfunction destroyClouds(clouds) {\n  var length = clouds.length;\n  for (var i = 0; i < length; ++i) {\n    if (clouds[i]) {\n      clouds[i]._destroy();\n    }\n  }\n}\n\n/**\n * Creates and adds a cloud with the specified initial properties to the collection.\n * The added cloud is returned so it can be modified or removed from the collection later.\n *\n * @param {Object}[options] A template describing the cloud\'s properties as shown in Example 1.\n * @returns {CumulusCloud} The cloud that was added to the collection.\n *\n * @performance Calling <code>add</code> is expected constant time.  However, the collection\'s vertex buffer\n * is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.  For\n * best performance, add as many clouds as possible before calling <code>update</code>.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * // Example 1:  Add a cumulus cloud, specifying all the default values.\n * var c = clouds.add({\n *   show : true,\n *   position : Cesium.Cartesian3.ZERO,\n *   scale : new Cesium.Cartesian2(20.0, 12.0),\n *   maximumSize: new Cesium.Cartesian3(20.0, 12.0, 12.0),\n *   slice: -1.0,\n *   cloudType : CloudType.CUMULUS\n * });\n *\n * @example\n * // Example 2:  Specify only the cloud\'s cartographic position.\n * var c = clouds.add({\n *   position : Cesium.Cartesian3.fromDegrees(longitude, latitude, height)\n * });\n *\n * @see CloudCollection#remove\n * @see CloudCollection#removeAll\n */\nCloudCollection.prototype.add = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var cloudType = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(options.cloudType, _CloudType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].CUMULUS */ .Z.CUMULUS);\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!_CloudType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].validate */ .Z.validate(cloudType)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z("invalid cloud type");\n  }\n  //>>includeEnd(\'debug\');\n\n  var cloud;\n  if (cloudType === _CloudType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].CUMULUS */ .Z.CUMULUS) {\n    cloud = new _CumulusCloud_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(options, this);\n    cloud._index = this._clouds.length;\n    this._clouds.push(cloud);\n    this._createVertexArray = true;\n  }\n\n  return cloud;\n};\n\n/**\n * Removes a cloud from the collection.\n *\n * @param {CumulusCloud} cloud The cloud to remove.\n * @returns {Boolean} <code>true</code> if the cloud was removed; <code>false</code> if the cloud was not found in the collection.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * var c = clouds.add(...);\n * clouds.remove(c);  // Returns true\n *\n * @see CloudCollection#add\n * @see CloudCollection#removeAll\n * @see CumulusCloud#show\n */\nCloudCollection.prototype.remove = function (cloud) {\n  if (this.contains(cloud)) {\n    this._clouds[cloud._index] = undefined; // Removed later in removeClouds()\n    this._cloudsRemoved = true;\n    this._createVertexArray = true;\n    cloud._destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Removes all clouds from the collection.\n *\n * @performance <code>O(n)</code>.  It is more efficient to remove all the clouds\n * from a collection and then add new ones than to create a new collection entirely.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * clouds.add(...);\n * clouds.add(...);\n * clouds.removeAll();\n *\n * @see CloudCollection#add\n * @see CloudCollection#remove\n */\nCloudCollection.prototype.removeAll = function () {\n  destroyClouds(this._clouds);\n  this._clouds = [];\n  this._cloudsToUpdate = [];\n  this._cloudsToUpdateIndex = 0;\n  this._cloudsRemoved = false;\n\n  this._createVertexArray = true;\n};\n\nfunction removeClouds(cloudCollection) {\n  if (cloudCollection._cloudsRemoved) {\n    cloudCollection._cloudsRemoved = false;\n\n    var newClouds = [];\n    var clouds = cloudCollection._clouds;\n    var length = clouds.length;\n    for (var i = 0, j = 0; i < length; ++i) {\n      var cloud = clouds[i];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cloud)) {\n        clouds._index = j++;\n        newClouds.push(cloud);\n      }\n    }\n\n    cloudCollection._clouds = newClouds;\n  }\n}\n\nCloudCollection.prototype._updateCloud = function (cloud, propertyChanged) {\n  if (!cloud._dirty) {\n    this._cloudsToUpdate[this._cloudsToUpdateIndex++] = cloud;\n  }\n\n  ++this._propertiesChanged[propertyChanged];\n};\n\n/**\n * Check whether this collection contains a given cloud.\n *\n * @param {CumulusCloud} [cloud] The cloud to check for.\n * @returns {Boolean} true if this collection contains the cloud, false otherwise.\n *\n * @see CloudCollection#get\n */\nCloudCollection.prototype.contains = function (cloud) {\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cloud) && cloud._cloudCollection === this;\n};\n\n/**\n * Returns the cloud in the collection at the specified index. Indices are zero-based\n * and increase as clouds are added. Removing a cloud shifts all clouds after\n * it to the left, changing their indices. This function is commonly used with\n * {@link CloudCollection#length} to iterate over all the clouds in the collection.\n *\n * @param {Number} index The zero-based index of the cloud.\n * @returns {CumulusCloud} The cloud at the specified index.\n *\n * @performance Expected constant time. If clouds were removed from the collection and\n * {@link CloudCollection#update} was not called, an implicit <code>O(n)</code>\n * operation is performed.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * // Toggle the show property of every cloud in the collection\n * var len = clouds.length;\n * for (var i = 0; i < len; ++i) {\n *   var c = clouds.get(i);\n *   c.show = !c.show;\n * }\n *\n * @see CloudCollection#length\n */\nCloudCollection.prototype.get = function (index) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.number */ .Z.typeOf.number("index", index);\n  //>>includeEnd(\'debug\');\n\n  removeClouds(this);\n  return this._clouds[index];\n};\n\nvar texturePositions = new Float32Array([\n  -1.0,\n  -1.0,\n  1.0,\n  -1.0,\n  1.0,\n  1.0,\n  -1.0,\n  1.0,\n]);\n\nvar textureIndices = new Uint16Array([0, 1, 2, 0, 2, 3]);\n\nfunction createTextureVA(context) {\n  var positionBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n    context: context,\n    typedArray: texturePositions,\n    usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n  });\n  var indexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].createIndexBuffer */ .Z.createIndexBuffer({\n    context: context,\n    typedArray: textureIndices,\n    usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    indexDatatype: _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n  });\n\n  var attributes = [\n    {\n      index: 0,\n      vertexBuffer: positionBuffer,\n      componentsPerAttribute: 2,\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n    },\n  ];\n\n  return new _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z({\n    context: context,\n    attributes: attributes,\n    indexBuffer: indexBuffer,\n  });\n}\n\nvar getIndexBuffer;\n\nfunction getIndexBufferBatched(context) {\n  var sixteenK = 16 * 1024;\n\n  var indexBuffer = context.cache.cloudCollection_indexBufferBatched;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(indexBuffer)) {\n    return indexBuffer;\n  }\n\n  // Subtract 6 because the last index is reserved for primitive restart.\n  // https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.18\n  var length = sixteenK * 6 - 6;\n  var indices = new Uint16Array(length);\n  for (var i = 0, j = 0; i < length; i += 6, j += 4) {\n    indices[i] = j;\n    indices[i + 1] = j + 1;\n    indices[i + 2] = j + 2;\n\n    indices[i + 3] = j;\n    indices[i + 4] = j + 2;\n    indices[i + 5] = j + 3;\n  }\n\n  indexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].createIndexBuffer */ .Z.createIndexBuffer({\n    context: context,\n    typedArray: indices,\n    usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    indexDatatype: _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n  });\n  indexBuffer.vertexArrayDestroyable = false;\n  context.cache.cloudCollection_indexBufferBatched = indexBuffer;\n  return indexBuffer;\n}\n\nfunction getIndexBufferInstanced(context) {\n  var indexBuffer = context.cache.cloudCollection_indexBufferInstanced;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(indexBuffer)) {\n    return indexBuffer;\n  }\n\n  indexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].createIndexBuffer */ .Z.createIndexBuffer({\n    context: context,\n    typedArray: new Uint16Array([0, 1, 2, 0, 2, 3]),\n    usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    indexDatatype: _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n  });\n\n  indexBuffer.vertexArrayDestroyable = false;\n  context.cache.cloudCollection_indexBufferInstanced = indexBuffer;\n  return indexBuffer;\n}\n\nfunction getVertexBufferInstanced(context) {\n  var vertexBuffer = context.cache.cloudCollection_vertexBufferInstanced;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(vertexBuffer)) {\n    return vertexBuffer;\n  }\n\n  vertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n    context: context,\n    typedArray: new Float32Array([0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0]),\n    usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n  });\n\n  vertexBuffer.vertexArrayDestroyable = false;\n  context.cache.cloudCollection_vertexBufferInstanced = vertexBuffer;\n  return vertexBuffer;\n}\n\nfunction createVAF(context, numberOfClouds, instanced) {\n  var attributes = [\n    {\n      index: attributeLocations.positionHighAndScaleX,\n      componentsPerAttribute: 4,\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    },\n    {\n      index: attributeLocations.positionLowAndScaleY,\n      componentsPerAttribute: 4,\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    },\n    {\n      index: attributeLocations.packedAttribute0,\n      componentsPerAttribute: 4,\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    },\n    {\n      index: attributeLocations.packedAttribute1,\n      componentsPerAttribute: 4,\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    },\n  ];\n\n  if (instanced) {\n    attributes.push({\n      index: attributeLocations.direction,\n      componentsPerAttribute: 2,\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      vertexBuffer: getVertexBufferInstanced(context),\n    });\n  }\n\n  var sizeInVertices = instanced ? numberOfClouds : 4 * numberOfClouds;\n  return new _Renderer_VertexArrayFacade_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z(context, attributes, sizeInVertices, instanced);\n}\n\nvar writePositionScratch = new _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\n\nfunction writePositionAndScale(cloudCollection, frameState, vafWriters, cloud) {\n  var i;\n  var positionHighWriter = vafWriters[attributeLocations.positionHighAndScaleX];\n  var positionLowWriter = vafWriters[attributeLocations.positionLowAndScaleY];\n  var position = cloud.position;\n\n  _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].fromCartesian */ .Z.fromCartesian(position, writePositionScratch);\n  var scale = cloud.scale;\n\n  var high = writePositionScratch.high;\n  var low = writePositionScratch.low;\n\n  if (cloudCollection._instanced) {\n    i = cloud._index;\n    positionHighWriter(i, high.x, high.y, high.z, scale.x);\n    positionLowWriter(i, low.x, low.y, low.z, scale.y);\n  } else {\n    i = cloud._index * 4;\n    positionHighWriter(i + 0, high.x, high.y, high.z, scale.x);\n    positionHighWriter(i + 1, high.x, high.y, high.z, scale.x);\n    positionHighWriter(i + 2, high.x, high.y, high.z, scale.x);\n    positionHighWriter(i + 3, high.x, high.y, high.z, scale.x);\n\n    positionLowWriter(i + 0, low.x, low.y, low.z, scale.y);\n    positionLowWriter(i + 1, low.x, low.y, low.z, scale.y);\n    positionLowWriter(i + 2, low.x, low.y, low.z, scale.y);\n    positionLowWriter(i + 3, low.x, low.y, low.z, scale.y);\n  }\n}\n\nfunction writePackedAttribute0(cloudCollection, frameState, vafWriters, cloud) {\n  var i;\n  var writer = vafWriters[attributeLocations.packedAttribute0];\n  var show = cloud.show;\n  var brightness = cloud.brightness;\n\n  if (cloudCollection._instanced) {\n    i = cloud._index;\n    writer(i, show, brightness, 0.0, 0.0);\n  } else {\n    i = cloud._index * 4;\n    writer(i + 0, show, brightness, 0.0, 0.0);\n    writer(i + 1, show, brightness, 1.0, 0.0);\n    writer(i + 2, show, brightness, 1.0, 1.0);\n    writer(i + 3, show, brightness, 0.0, 1.0);\n  }\n}\n\nfunction writePackedAttribute1(cloudCollection, frameState, vafWriters, cloud) {\n  var i;\n  var writer = vafWriters[attributeLocations.packedAttribute1];\n  var maximumSize = cloud.maximumSize;\n  var slice = cloud.slice;\n\n  if (cloudCollection._instanced) {\n    i = cloud._index;\n    writer(i, maximumSize.x, maximumSize.y, maximumSize.z, slice);\n  } else {\n    i = cloud._index * 4;\n    writer(i + 0, maximumSize.x, maximumSize.y, maximumSize.z, slice);\n    writer(i + 1, maximumSize.x, maximumSize.y, maximumSize.z, slice);\n    writer(i + 2, maximumSize.x, maximumSize.y, maximumSize.z, slice);\n    writer(i + 3, maximumSize.x, maximumSize.y, maximumSize.z, slice);\n  }\n}\n\nfunction writeCloud(cloudCollection, frameState, vafWriters, cloud) {\n  writePositionAndScale(cloudCollection, frameState, vafWriters, cloud);\n  writePackedAttribute0(cloudCollection, frameState, vafWriters, cloud);\n  writePackedAttribute1(cloudCollection, frameState, vafWriters, cloud);\n}\n\nfunction createNoiseTexture(cloudCollection, frameState, vsSource, fsSource) {\n  var that = cloudCollection;\n  var context = frameState.context;\n  that._vaNoise = createTextureVA(context);\n  that._spNoise = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].fromCache */ .Z.fromCache({\n    context: context,\n    vertexShaderSource: vsSource,\n    fragmentShaderSource: fsSource,\n    attributeLocations: {\n      position: 0,\n    },\n  });\n\n  var noiseTextureLength = that._noiseTextureLength;\n  var noiseDetail = that.noiseDetail;\n  var noiseOffset = that.noiseOffset;\n\n  that._noiseTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z({\n    context: context,\n    width: noiseTextureLength * noiseTextureLength,\n    height: noiseTextureLength,\n    pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n    pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].RGBA */ .Z.RGBA,\n    sampler: new _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z({\n      wrapS: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].REPEAT */ .Z.REPEAT,\n      wrapT: _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].REPEAT */ .Z.REPEAT,\n      minificationFilter: _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].NEAREST */ .Z.NEAREST,\n      magnificationFilter: _Renderer_TextureMagnificationFilter_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].NEAREST */ .Z.NEAREST,\n    }),\n  });\n\n  var textureCommand = new _Renderer_ComputeCommand_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n    vertexArray: that._vaNoise,\n    shaderProgram: that._spNoise,\n    outputTexture: that._noiseTexture,\n    uniformMap: {\n      u_noiseTextureLength: function () {\n        return noiseTextureLength;\n      },\n      u_noiseDetail: function () {\n        return noiseDetail;\n      },\n      u_noiseOffset: function () {\n        return noiseOffset;\n      },\n    },\n    persists: false,\n    owner: cloudCollection,\n    postExecute: function (texture) {\n      that._ready = true;\n      that._loading = false;\n    },\n  });\n\n  frameState.commandList.push(textureCommand);\n  that._loading = true;\n}\n\nfunction createVertexArray(cloudCollection, frameState) {\n  var that = cloudCollection;\n  var context = frameState.context;\n  that._createVertexArray = false;\n  that._vaf = that._vaf && that._vaf.destroy();\n\n  var clouds = cloudCollection._clouds;\n  var cloudsLength = clouds.length;\n  if (cloudsLength > 0) {\n    that._vaf = createVAF(context, cloudsLength, that._instanced);\n    var vafWriters = that._vaf.writers;\n\n    var i;\n    // Rewrite entire buffer if clouds were added or removed.\n    for (i = 0; i < cloudsLength; ++i) {\n      var cloud = clouds[i];\n      writeCloud(cloudCollection, frameState, vafWriters, cloud);\n    }\n\n    // Different cloud collections share the same index buffer.\n    that._vaf.commit(getIndexBuffer(context));\n  }\n}\n\nvar scratchWriterArray = [];\n\nfunction updateClouds(cloudCollection, frameState) {\n  var context = frameState.context;\n  var that = cloudCollection;\n  var clouds = that._clouds;\n  var cloudsLength = clouds.length;\n  var cloudsToUpdate = that._cloudsToUpdate;\n  var cloudsToUpdateLength = that._cloudsToUpdateIndex;\n\n  var properties = that._propertiesChanged;\n\n  var writers = scratchWriterArray;\n  writers.length = 0;\n\n  if (properties[POSITION_INDEX] || properties[SCALE_INDEX]) {\n    writers.push(writePositionAndScale);\n  }\n\n  if (properties[SHOW_INDEX] || properties[BRIGHTNESS_INDEX]) {\n    writers.push(writePackedAttribute0);\n  }\n\n  if (properties[MAXIMUM_SIZE_INDEX] || properties[SLICE_INDEX]) {\n    writers.push(writePackedAttribute1);\n  }\n\n  var numWriters = writers.length;\n  var vafWriters = that._vaf.writers;\n\n  var i, c, w;\n  if (cloudsToUpdateLength / cloudsLength > 0.1) {\n    // Like BillboardCollection, if more than 10% of clouds change,\n    // rewrite the entire buffer.\n\n    for (i = 0; i < cloudsToUpdateLength; ++i) {\n      c = cloudsToUpdate[i];\n      c._dirty = false;\n\n      for (w = 0; w < numWriters; ++w) {\n        writers[w](cloudCollection, frameState, vafWriters, c);\n      }\n    }\n\n    that._vaf.commit(getIndexBuffer(context));\n  } else {\n    for (i = 0; i < cloudsToUpdateLength; ++i) {\n      c = cloudsToUpdate[i];\n      c._dirty = false;\n\n      for (w = 0; w < numWriters; ++w) {\n        writers[w](cloudCollection, frameState, vafWriters, c);\n      }\n\n      if (that._instanced) {\n        that._vaf.subCommit(c._index, 1);\n      } else {\n        that._vaf.subCommit(c._index * 4, 4);\n      }\n    }\n    that._vaf.endSubCommits();\n  }\n\n  that._cloudsToUpdateIndex = 0;\n}\n\nfunction createShaderProgram(cloudCollection, frameState, vsSource, fsSource) {\n  var context = frameState.context;\n  var that = cloudCollection;\n  var vs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z({\n    defines: [],\n    sources: [vsSource],\n  });\n\n  if (that._instanced) {\n    vs.defines.push("INSTANCED");\n  }\n\n  var fs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z({\n    defines: [],\n    sources: [fsSource],\n  });\n\n  if (that.debugBillboards) {\n    fs.defines.push("DEBUG_BILLBOARDS");\n  }\n\n  if (that.debugEllipsoids) {\n    fs.defines.push("DEBUG_ELLIPSOIDS");\n  }\n\n  that._sp = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].replaceCache */ .Z.replaceCache({\n    context: context,\n    shaderProgram: that._sp,\n    vertexShaderSource: vs,\n    fragmentShaderSource: fs,\n    attributeLocations: attributeLocations,\n  });\n\n  that._rs = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].fromCache */ .Z.fromCache({\n    depthTest: {\n      enabled: true,\n      func: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].LESS */ .Z.LESS,\n    },\n    depthMask: false,\n    blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n  });\n\n  that._spCreated = true;\n  that._compiledDebugBillboards = that.debugBillboards;\n  that._compiledDebugEllipsoids = that.debugEllipsoids;\n}\n\nfunction createDrawCommands(cloudCollection, frameState) {\n  var that = cloudCollection;\n  var pass = frameState.passes;\n  var uniforms = that._uniforms;\n  var commandList = frameState.commandList;\n  if (pass.render) {\n    var colorList = that._colorCommands;\n\n    var va = that._vaf.va;\n    var vaLength = va.length;\n    colorList.length = vaLength;\n    for (var i = 0; i < vaLength; i++) {\n      var command = colorList[i];\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(command)) {\n        command = colorList[i] = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\n      }\n      command.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT;\n      command.owner = cloudCollection;\n      command.uniformMap = uniforms;\n      command.count = va[i].indicesCount;\n      command.vertexArray = va[i].va;\n      command.shaderProgram = that._sp;\n      command.renderState = that._rs;\n      if (that._instanced) {\n        command.count = 6;\n        command.instanceCount = that._clouds.length;\n      }\n\n      commandList.push(command);\n    }\n  }\n}\n\n/**\n * @private\n */\nCloudCollection.prototype.update = function (frameState) {\n  removeClouds(this);\n  if (!this.show) {\n    return;\n  }\n\n  var debugging = this.debugBillboards || this.debugEllipsoids;\n  this._ready = debugging ? true : (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(this._noiseTexture);\n\n  if (!this._ready && !this._loading && !debugging) {\n    createNoiseTexture(this, frameState, _Shaders_CloudNoiseVS_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z, _Shaders_CloudNoiseFS_js__WEBPACK_IMPORTED_MODULE_31__/* ["default"] */ .Z);\n  }\n\n  this._instanced = frameState.context.instancedArrays;\n  attributeLocations = this._instanced\n    ? attributeLocationsInstanced\n    : attributeLocationsBatched;\n  getIndexBuffer = this._instanced\n    ? getIndexBufferInstanced\n    : getIndexBufferBatched;\n\n  var clouds = this._clouds;\n  var cloudsLength = clouds.length;\n  var cloudsToUpdate = this._cloudsToUpdate;\n  var cloudsToUpdateLength = this._cloudsToUpdateIndex;\n\n  if (this._createVertexArray) {\n    createVertexArray(this, frameState);\n  } else if (cloudsToUpdateLength > 0) {\n    // Clouds were modified, but none were added or removed.\n    updateClouds(this, frameState);\n  }\n\n  // If the number of total clouds ever shrinks considerably,\n  // truncate cloudsToUpdate so that we free memory that\n  // we are no longer using.\n  if (cloudsToUpdateLength > cloudsLength * 1.5) {\n    cloudsToUpdate.length = cloudsLength;\n  }\n\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(this._vaf) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(this._vaf.va) ||\n    !this._ready & !debugging\n  ) {\n    return;\n  }\n\n  if (\n    !this._spCreated ||\n    this.debugBillboards !== this._compiledDebugBillboards ||\n    this.debugEllipsoids !== this._compiledDebugEllipsoids\n  ) {\n    createShaderProgram(this, frameState, _Shaders_CloudCollectionVS_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z, _Shaders_CloudCollectionFS_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"] */ .Z);\n  }\n\n  createDrawCommands(this, frameState);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see CloudCollection#destroy\n */\nCloudCollection.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * clouds = clouds && clouds.destroy();\n *\n * @see CloudCollection#isDestroyed\n */\nCloudCollection.prototype.destroy = function () {\n  this._noiseTexture = this._noiseTexture && this._noiseTexture.destroy();\n  this._sp = this._sp && this._sp.destroy();\n  this._vaf = this._vaf && this._vaf.destroy();\n\n  destroyClouds(this._clouds);\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this);\n};\n\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (CloudCollection)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YSxTQUFTLGdEQUFnRDtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxTQUFTLDRFQUFhO0FBQ3RCOztBQUVBLHNFQUFlLCtEQUFlLElBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvQ2xvdWRDb2xsZWN0aW9uLmpzPzMzNzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJsZW5kaW5nU3RhdGUgZnJvbSBcIi4vQmxlbmRpbmdTdGF0ZS5qc1wiO1xuaW1wb3J0IEJ1ZmZlciBmcm9tIFwiLi4vUmVuZGVyZXIvQnVmZmVyLmpzXCI7XG5pbXBvcnQgQnVmZmVyVXNhZ2UgZnJvbSBcIi4uL1JlbmRlcmVyL0J1ZmZlclVzYWdlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBDb21wdXRlQ29tbWFuZCBmcm9tIFwiLi4vUmVuZGVyZXIvQ29tcHV0ZUNvbW1hbmQuanNcIjtcbmltcG9ydCBDbG91ZFR5cGUgZnJvbSBcIi4vQ2xvdWRUeXBlLmpzXCI7XG5pbXBvcnQgQ2xvdWRDb2xsZWN0aW9uRlMgZnJvbSBcIi4uL1NoYWRlcnMvQ2xvdWRDb2xsZWN0aW9uRlMuanNcIjtcbmltcG9ydCBDbG91ZENvbGxlY3Rpb25WUyBmcm9tIFwiLi4vU2hhZGVycy9DbG91ZENvbGxlY3Rpb25WUy5qc1wiO1xuaW1wb3J0IENsb3VkTm9pc2VGUyBmcm9tIFwiLi4vU2hhZGVycy9DbG91ZE5vaXNlRlMuanNcIjtcbmltcG9ydCBDbG91ZE5vaXNlVlMgZnJvbSBcIi4uL1NoYWRlcnMvQ2xvdWROb2lzZVZTLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBDdW11bHVzQ2xvdWQgZnJvbSBcIi4vQ3VtdWx1c0Nsb3VkLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRHJhd0NvbW1hbmQgZnJvbSBcIi4uL1JlbmRlcmVyL0RyYXdDb21tYW5kLmpzXCI7XG5pbXBvcnQgRW5jb2RlZENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvRW5jb2RlZENhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBJbmRleERhdGF0eXBlIGZyb20gXCIuLi9Db3JlL0luZGV4RGF0YXR5cGUuanNcIjtcbmltcG9ydCBQYXNzIGZyb20gXCIuLi9SZW5kZXJlci9QYXNzLmpzXCI7XG5pbXBvcnQgUGl4ZWxEYXRhdHlwZSBmcm9tIFwiLi4vUmVuZGVyZXIvUGl4ZWxEYXRhdHlwZS5qc1wiO1xuaW1wb3J0IFBpeGVsRm9ybWF0IGZyb20gXCIuLi9Db3JlL1BpeGVsRm9ybWF0LmpzXCI7XG5pbXBvcnQgUmVuZGVyU3RhdGUgZnJvbSBcIi4uL1JlbmRlcmVyL1JlbmRlclN0YXRlLmpzXCI7XG5pbXBvcnQgU2FtcGxlciBmcm9tIFwiLi4vUmVuZGVyZXIvU2FtcGxlci5qc1wiO1xuaW1wb3J0IFNoYWRlclNvdXJjZSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyU291cmNlLmpzXCI7XG5pbXBvcnQgU2hhZGVyUHJvZ3JhbSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyUHJvZ3JhbS5qc1wiO1xuaW1wb3J0IFRleHR1cmUgZnJvbSBcIi4uL1JlbmRlcmVyL1RleHR1cmUuanNcIjtcbmltcG9ydCBUZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlciBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXIuanNcIjtcbmltcG9ydCBUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyIGZyb20gXCIuLi9SZW5kZXJlci9UZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyLmpzXCI7XG5pbXBvcnQgVGV4dHVyZVdyYXAgZnJvbSBcIi4uL1JlbmRlcmVyL1RleHR1cmVXcmFwLmpzXCI7XG5pbXBvcnQgVmVydGV4QXJyYXkgZnJvbSBcIi4uL1JlbmRlcmVyL1ZlcnRleEFycmF5LmpzXCI7XG5pbXBvcnQgVmVydGV4QXJyYXlGYWNhZGUgZnJvbSBcIi4uL1JlbmRlcmVyL1ZlcnRleEFycmF5RmFjYWRlLmpzXCI7XG5pbXBvcnQgV2ViR0xDb25zdGFudHMgZnJvbSBcIi4uL0NvcmUvV2ViR0xDb25zdGFudHMuanNcIjtcblxudmFyIGF0dHJpYnV0ZUxvY2F0aW9ucztcblxudmFyIGF0dHJpYnV0ZUxvY2F0aW9uc0JhdGNoZWQgPSB7XG4gIHBvc2l0aW9uSGlnaEFuZFNjYWxlWDogMCxcbiAgcG9zaXRpb25Mb3dBbmRTY2FsZVk6IDEsXG4gIHBhY2tlZEF0dHJpYnV0ZTA6IDIsIC8vIHNob3csIGJyaWdodG5lc3MsIGRpcmVjdGlvblxuICBwYWNrZWRBdHRyaWJ1dGUxOiAzLCAvLyBjbG91ZFNpemUsIHNsaWNlXG59O1xuXG52YXIgYXR0cmlidXRlTG9jYXRpb25zSW5zdGFuY2VkID0ge1xuICBkaXJlY3Rpb246IDAsXG4gIHBvc2l0aW9uSGlnaEFuZFNjYWxlWDogMSxcbiAgcG9zaXRpb25Mb3dBbmRTY2FsZVk6IDIsXG4gIHBhY2tlZEF0dHJpYnV0ZTA6IDMsIC8vIHNob3csIGJyaWdodG5lc3NcbiAgcGFja2VkQXR0cmlidXRlMTogNCwgLy8gY2xvdWRTaXplLCBzbGljZVxufTtcblxudmFyIFNIT1dfSU5ERVggPSBDdW11bHVzQ2xvdWQuU0hPV19JTkRFWDtcbnZhciBQT1NJVElPTl9JTkRFWCA9IEN1bXVsdXNDbG91ZC5QT1NJVElPTl9JTkRFWDtcbnZhciBTQ0FMRV9JTkRFWCA9IEN1bXVsdXNDbG91ZC5TQ0FMRV9JTkRFWDtcbnZhciBNQVhJTVVNX1NJWkVfSU5ERVggPSBDdW11bHVzQ2xvdWQuTUFYSU1VTV9TSVpFX0lOREVYO1xudmFyIFNMSUNFX0lOREVYID0gQ3VtdWx1c0Nsb3VkLlNMSUNFX0lOREVYO1xudmFyIEJSSUdIVE5FU1NfSU5ERVggPSBDdW11bHVzQ2xvdWQuQlJJR0hUTkVTU19JTkRFWDtcbnZhciBOVU1CRVJfT0ZfUFJPUEVSVElFUyA9IEN1bXVsdXNDbG91ZC5OVU1CRVJfT0ZfUFJPUEVSVElFUztcblxuLyoqXG4gKiBBIHJlbmRlcmFibGUgY29sbGVjdGlvbiBvZiBjbG91ZHMgaW4gdGhlIDNEIHNjZW5lLlxuICogPGJyIC8+PGJyIC8+XG4gKiA8ZGl2IGFsaWduPSdjZW50ZXInPlxuICogPGltZyBzcmM9J0ltYWdlcy9DdW11bHVzQ2xvdWQucG5nJyB3aWR0aD0nNDAwJyBoZWlnaHQ9JzMwMCcgLz48YnIgLz5cbiAqIEV4YW1wbGUgY3VtdWx1cyBjbG91ZHNcbiAqIDwvZGl2PlxuICogPGJyIC8+PGJyIC8+XG4gKiBDbG91ZHMgYXJlIGFkZGVkIGFuZCByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24gdXNpbmcge0BsaW5rIENsb3VkQ29sbGVjdGlvbiNhZGR9XG4gKiBhbmQge0BsaW5rIENsb3VkQ29sbGVjdGlvbiNyZW1vdmV9LlxuICogQGFsaWFzIENsb3VkQ29sbGVjdGlvblxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNob3c9dHJ1ZV0gV2hldGhlciB0byBkaXNwbGF5IHRoZSBjbG91ZHMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubm9pc2VEZXRhaWw9MTYuMF0gRGVzaXJlZCBhbW91bnQgb2YgZGV0YWlsIGluIHRoZSBub2lzZSB0ZXh0dXJlLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm5vaXNlT2Zmc2V0PUNhcnRlc2lhbjMuWkVST10gRGVzaXJlZCB0cmFuc2xhdGlvbiBvZiBkYXRhIGluIG5vaXNlIHRleHR1cmUuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmRlYnVnQmlsbGJvYXJkcz1mYWxzZV0gRm9yIGRlYnVnZ2luZyBvbmx5LiBEZXRlcm1pbmVzIGlmIHRoZSBiaWxsYm9hcmRzIGFyZSByZW5kZXJlZCB3aXRoIGFuIG9wYXF1ZSBjb2xvci5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZGVidWdFbGxpcHNvaWRzPWZhbHNlXSBGb3IgZGVidWdnaW5nIG9ubHkuIERldGVybWluZXMgaWYgdGhlIGNsb3VkcyB3aWxsIGJlIHJlbmRlcmVkIGFzIG9wYXF1ZSBlbGxpcHNvaWRzLlxuICogQHNlZSBDbG91ZENvbGxlY3Rpb24jYWRkXG4gKiBAc2VlIENsb3VkQ29sbGVjdGlvbiNyZW1vdmVcbiAqIEBzZWUgQ3VtdWx1c0Nsb3VkXG4gKlxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUNsb3Vkcy5odG1sfENlc2l1bSBTYW5kY2FzdGxlIENsb3VkcyBEZW1vfVxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUNsb3VkJTIwUGFyYW1ldGVycy5odG1sfENlc2l1bSBTYW5kY2FzdGxlIENsb3VkIFBhcmFtZXRlcnMgRGVtb31cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ3JlYXRlIGEgY2xvdWQgY29sbGVjdGlvbiB3aXRoIHR3byBjdW11bHVzIGNsb3Vkc1xuICogdmFyIGNsb3VkcyA9IHNjZW5lLnByaW1pdGl2ZXMuYWRkKG5ldyBDZXNpdW0uQ2xvdWRDb2xsZWN0aW9uKCkpO1xuICogY2xvdWRzLmFkZCh7XG4gKiAgIHBvc2l0aW9uIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDEuMCwgMi4wLCAzLjApLFxuICogICBtYXhpbXVtU2l6ZTogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDIwLjAsIDEyLjAsIDguMClcbiAqIH0pO1xuICogY2xvdWRzLmFkZCh7XG4gKiAgIHBvc2l0aW9uIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDQuMCwgNS4wLCA2LjApLFxuICogICBtYXhpbXVtU2l6ZTogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDE1LjAsIDkuMCwgOS4wKSxcbiAqICAgc2xpY2U6IDAuNVxuICogfSk7XG4gKlxuICovXG5mdW5jdGlvbiBDbG91ZENvbGxlY3Rpb24ob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHRoaXMuX2Nsb3VkcyA9IFtdO1xuICB0aGlzLl9jbG91ZHNUb1VwZGF0ZSA9IFtdO1xuICB0aGlzLl9jbG91ZHNUb1VwZGF0ZUluZGV4ID0gMDtcbiAgdGhpcy5fY2xvdWRzUmVtb3ZlZCA9IGZhbHNlO1xuICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IGZhbHNlO1xuXG4gIHRoaXMuX3Byb3BlcnRpZXNDaGFuZ2VkID0gbmV3IFVpbnQzMkFycmF5KE5VTUJFUl9PRl9QUk9QRVJUSUVTKTtcblxuICB0aGlzLl9ub2lzZVRleHR1cmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX25vaXNlVGV4dHVyZUxlbmd0aCA9IDEyODtcblxuICAvKipcbiAgICogPHA+XG4gICAqIENvbnRyb2xzIHRoZSBhbW91bnQgb2YgZGV0YWlsIGNhcHR1cmVkIGluIHRoZSBwcmVjb21wdXRlZCBub2lzZSB0ZXh0dXJlXG4gICAqIHVzZWQgdG8gcmVuZGVyIHRoZSBjdW11bHVzIGNsb3Vkcy4gSW4gb3JkZXIgZm9yIHRoZSB0ZXh0dXJlIHRvIGJlIHRpbGVhYmxlLFxuICAgKiB0aGlzIG11c3QgYmUgYSBwb3dlciBvZiB0d28uIEZvciBiZXN0IHJlc3VsdHMsIHNldCB0aGlzIHRvIGJlIGEgcG93ZXIgb2YgdHdvXG4gICAqIGJldHdlZW4gPGNvZGU+OC4wPC9jb2RlPiBhbmQgPGNvZGU+MzIuMDwvY29kZT4gKGluY2x1c2l2ZSkuXG4gICAqIDwvcD5cbiAgICpcbiAgICogPGRpdiBhbGlnbj0nY2VudGVyJz5cbiAgICogPHRhYmxlIGJvcmRlcj0nMCcgY2VsbHBhZGRpbmc9JzUnPjx0cj5cbiAgICogPHRkIGFsaWduPSdjZW50ZXInPlxuICAgKiAgIDxjb2RlPmNsb3Vkcy5ub2lzZURldGFpbCA9IDguMDs8L2NvZGU+PGJyLz5cbiAgICogICA8aW1nIHNyYz0nSW1hZ2VzL0Nsb3VkQ29sbGVjdGlvbi5ub2lzZURldGFpbDgucG5nJyB3aWR0aD0nMjUwJyBoZWlnaHQ9JzE1OCcgLz5cbiAgICogPC90ZD5cbiAgICogPHRkIGFsaWduPSdjZW50ZXInPlxuICAgKiAgIDxjb2RlPmNsb3Vkcy5ub2lzZURldGFpbCA9IDMyLjA7PC9jb2RlPjxici8+XG4gICAqICAgPGltZyBzcmM9J0ltYWdlcy9DbG91ZENvbGxlY3Rpb24ubm9pc2VEZXRhaWwzMi5wbmcnIHdpZHRoPScyNTAnIGhlaWdodD0nMTU4JyAvPlxuICAgKiA8L3RkPlxuICAgKiA8L3RyPjwvdGFibGU+XG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKlxuICAgKiBAZGVmYXVsdCAxNi4wXG4gICAqL1xuICB0aGlzLm5vaXNlRGV0YWlsID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMubm9pc2VEZXRhaWwsIDE2LjApO1xuXG4gIC8qKlxuICAgKiA8cD5cbiAgICogQXBwbGllcyBhIHRyYW5zbGF0aW9uIHRvIG5vaXNlIHRleHR1cmUgY29vcmRpbmF0ZXMgdG8gZ2VuZXJhdGUgZGlmZmVyZW50IGRhdGEuXG4gICAqIFRoaXMgY2FuIGJlIG1vZGlmaWVkIGlmIHRoZSBkZWZhdWx0IG5vaXNlIGRvZXMgbm90IGdlbmVyYXRlIGdvb2QtbG9va2luZyBjbG91ZHMuXG4gICAqIDwvcD5cbiAgICpcbiAgICogPGRpdiBhbGlnbj0nY2VudGVyJz5cbiAgICogPHRhYmxlIGJvcmRlcj0nMCcgY2VsbHBhZGRpbmc9JzUnPjx0cj5cbiAgICogPHRkIGFsaWduPSdjZW50ZXInPlxuICAgKiAgIDxjb2RlPmRlZmF1bHQ8L2NvZGU+PGJyLz5cbiAgICogICA8aW1nIHNyYz0nSW1hZ2VzL0Nsb3VkQ29sbGVjdGlvbi5ub2lzZU9mZnNldGRlZmF1bHQucG5nJyB3aWR0aD0nMjUwJyBoZWlnaHQ9JzE1OCcgLz5cbiAgICogPC90ZD5cbiAgICogPHRkIGFsaWduPSdjZW50ZXInPlxuICAgKiAgIDxjb2RlPmNsb3Vkcy5ub2lzZU9mZnNldCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygxMCwgMjAsIDEwKTs8L2NvZGU+PGJyLz5cbiAgICogICA8aW1nIHNyYz0nSW1hZ2VzL0Nsb3VkQ29sbGVjdGlvbi5ub2lzZU9mZnNldHgxMHkyMHoxMC5wbmcnIHdpZHRoPScyNTAnIGhlaWdodD0nMTU4JyAvPlxuICAgKiA8L3RkPlxuICAgKiA8L3RyPjwvdGFibGU+XG4gICAqIDwvZGl2PlxuICAgKiBAdHlwZSB7Q2FydGVzaWFuM31cbiAgICpcbiAgICogQGRlZmF1bHQgQ2FydGVzaWFuMy5aRVJPXG4gICAqL1xuICB0aGlzLm5vaXNlT2Zmc2V0ID0gQ2FydGVzaWFuMy5jbG9uZShcbiAgICBkZWZhdWx0VmFsdWUob3B0aW9ucy5ub2lzZU9mZnNldCwgQ2FydGVzaWFuMy5aRVJPKVxuICApO1xuXG4gIHRoaXMuX2xvYWRpbmcgPSBmYWxzZTtcbiAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHRoaXMuX3VuaWZvcm1zID0ge1xuICAgIHVfbm9pc2VUZXh0dXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhhdC5fbm9pc2VUZXh0dXJlO1xuICAgIH0sXG4gICAgdV9ub2lzZVRleHR1cmVMZW5ndGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0Ll9ub2lzZVRleHR1cmVMZW5ndGg7XG4gICAgfSxcbiAgICB1X25vaXNlRGV0YWlsOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhhdC5ub2lzZURldGFpbDtcbiAgICB9LFxuICB9O1xuXG4gIHRoaXMuX3ZhTm9pc2UgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NwTm9pc2UgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fc3BDcmVhdGVkID0gZmFsc2U7XG4gIHRoaXMuX3NwID0gdW5kZWZpbmVkO1xuICB0aGlzLl9ycyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBiaWxsYm9hcmRzIGluIHRoaXMgY29sbGVjdGlvbiB3aWxsIGJlIHNob3duLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5zaG93ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2hvdywgdHJ1ZSk7XG5cbiAgdGhpcy5fY29sb3JDb21tYW5kcyA9IFtdO1xuXG4gIC8qKlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGZvciBkZWJ1Z2dpbmcgb25seTsgaXQgaXMgbm90IGZvciBwcm9kdWN0aW9uIHVzZSBub3IgaXMgaXQgb3B0aW1pemVkLlxuICAgKiA8cD5cbiAgICogUmVuZGVycyB0aGUgYmlsbGJvYXJkcyB3aXRoIG9uZSBvcGFxdWUgY29sb3IgZm9yIHRoZSBzYWtlIG9mIGRlYnVnZ2luZy5cbiAgICogPC9wPlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHRoaXMuZGVidWdCaWxsYm9hcmRzID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZGVidWdCaWxsYm9hcmRzLCBmYWxzZSk7XG4gIHRoaXMuX2NvbXBpbGVkRGVidWdCaWxsYm9hcmRzID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgZm9yIGRlYnVnZ2luZyBvbmx5OyBpdCBpcyBub3QgZm9yIHByb2R1Y3Rpb24gdXNlIG5vciBpcyBpdCBvcHRpbWl6ZWQuXG4gICAqIDxwPlxuICAgKiBEcmF3cyB0aGUgY2xvdWRzIGFzIG9wYXF1ZSwgbW9ub2Nocm9tZSBlbGxpcHNvaWRzIGZvciB0aGUgc2FrZSBvZiBkZWJ1Z2dpbmcuXG4gICAqIElmIDxjb2RlPmRlYnVnQmlsbGJvYXJkczwvY29kZT4gaXMgYWxzbyB0cnVlLCB0aGVuIHRoZSBlbGxpcHNvaWRzIHdpbGwgZHJhdyBvbiB0b3Agb2YgdGhlIGJpbGxib2FyZHMuXG4gICAqIDwvcD5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB0aGlzLmRlYnVnRWxsaXBzb2lkcyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmRlYnVnRWxsaXBzb2lkcywgZmFsc2UpO1xuICB0aGlzLl9jb21waWxlZERlYnVnRWxsaXBzb2lkcyA9IGZhbHNlO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhDbG91ZENvbGxlY3Rpb24ucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgY2xvdWRzIGluIHRoaXMgY29sbGVjdGlvbi5cbiAgICogQG1lbWJlcm9mIENsb3VkQ29sbGVjdGlvbi5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGxlbmd0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmVtb3ZlQ2xvdWRzKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXMuX2Nsb3Vkcy5sZW5ndGg7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiBkZXN0cm95Q2xvdWRzKGNsb3Vkcykge1xuICB2YXIgbGVuZ3RoID0gY2xvdWRzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmIChjbG91ZHNbaV0pIHtcbiAgICAgIGNsb3Vkc1tpXS5fZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW5kIGFkZHMgYSBjbG91ZCB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBwcm9wZXJ0aWVzIHRvIHRoZSBjb2xsZWN0aW9uLlxuICogVGhlIGFkZGVkIGNsb3VkIGlzIHJldHVybmVkIHNvIGl0IGNhbiBiZSBtb2RpZmllZCBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24gbGF0ZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9W29wdGlvbnNdIEEgdGVtcGxhdGUgZGVzY3JpYmluZyB0aGUgY2xvdWQncyBwcm9wZXJ0aWVzIGFzIHNob3duIGluIEV4YW1wbGUgMS5cbiAqIEByZXR1cm5zIHtDdW11bHVzQ2xvdWR9IFRoZSBjbG91ZCB0aGF0IHdhcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgQ2FsbGluZyA8Y29kZT5hZGQ8L2NvZGU+IGlzIGV4cGVjdGVkIGNvbnN0YW50IHRpbWUuICBIb3dldmVyLCB0aGUgY29sbGVjdGlvbidzIHZlcnRleCBidWZmZXJcbiAqIGlzIHJld3JpdHRlbiAtIGFuIDxjb2RlPk8obik8L2NvZGU+IG9wZXJhdGlvbiB0aGF0IGFsc28gaW5jdXJzIENQVSB0byBHUFUgb3ZlcmhlYWQuICBGb3JcbiAqIGJlc3QgcGVyZm9ybWFuY2UsIGFkZCBhcyBtYW55IGNsb3VkcyBhcyBwb3NzaWJsZSBiZWZvcmUgY2FsbGluZyA8Y29kZT51cGRhdGU8L2NvZGU+LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEV4YW1wbGUgMTogIEFkZCBhIGN1bXVsdXMgY2xvdWQsIHNwZWNpZnlpbmcgYWxsIHRoZSBkZWZhdWx0IHZhbHVlcy5cbiAqIHZhciBjID0gY2xvdWRzLmFkZCh7XG4gKiAgIHNob3cgOiB0cnVlLFxuICogICBwb3NpdGlvbiA6IENlc2l1bS5DYXJ0ZXNpYW4zLlpFUk8sXG4gKiAgIHNjYWxlIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKDIwLjAsIDEyLjApLFxuICogICBtYXhpbXVtU2l6ZTogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDIwLjAsIDEyLjAsIDEyLjApLFxuICogICBzbGljZTogLTEuMCxcbiAqICAgY2xvdWRUeXBlIDogQ2xvdWRUeXBlLkNVTVVMVVNcbiAqIH0pO1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBFeGFtcGxlIDI6ICBTcGVjaWZ5IG9ubHkgdGhlIGNsb3VkJ3MgY2FydG9ncmFwaGljIHBvc2l0aW9uLlxuICogdmFyIGMgPSBjbG91ZHMuYWRkKHtcbiAqICAgcG9zaXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcyhsb25naXR1ZGUsIGxhdGl0dWRlLCBoZWlnaHQpXG4gKiB9KTtcbiAqXG4gKiBAc2VlIENsb3VkQ29sbGVjdGlvbiNyZW1vdmVcbiAqIEBzZWUgQ2xvdWRDb2xsZWN0aW9uI3JlbW92ZUFsbFxuICovXG5DbG91ZENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBjbG91ZFR5cGUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5jbG91ZFR5cGUsIENsb3VkVHlwZS5DVU1VTFVTKTtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFDbG91ZFR5cGUudmFsaWRhdGUoY2xvdWRUeXBlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImludmFsaWQgY2xvdWQgdHlwZVwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgY2xvdWQ7XG4gIGlmIChjbG91ZFR5cGUgPT09IENsb3VkVHlwZS5DVU1VTFVTKSB7XG4gICAgY2xvdWQgPSBuZXcgQ3VtdWx1c0Nsb3VkKG9wdGlvbnMsIHRoaXMpO1xuICAgIGNsb3VkLl9pbmRleCA9IHRoaXMuX2Nsb3Vkcy5sZW5ndGg7XG4gICAgdGhpcy5fY2xvdWRzLnB1c2goY2xvdWQpO1xuICAgIHRoaXMuX2NyZWF0ZVZlcnRleEFycmF5ID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBjbG91ZDtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIGNsb3VkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHtDdW11bHVzQ2xvdWR9IGNsb3VkIFRoZSBjbG91ZCB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhlIGNsb3VkIHdhcyByZW1vdmVkOyA8Y29kZT5mYWxzZTwvY29kZT4gaWYgdGhlIGNsb3VkIHdhcyBub3QgZm91bmQgaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIGMgPSBjbG91ZHMuYWRkKC4uLik7XG4gKiBjbG91ZHMucmVtb3ZlKGMpOyAgLy8gUmV0dXJucyB0cnVlXG4gKlxuICogQHNlZSBDbG91ZENvbGxlY3Rpb24jYWRkXG4gKiBAc2VlIENsb3VkQ29sbGVjdGlvbiNyZW1vdmVBbGxcbiAqIEBzZWUgQ3VtdWx1c0Nsb3VkI3Nob3dcbiAqL1xuQ2xvdWRDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoY2xvdWQpIHtcbiAgaWYgKHRoaXMuY29udGFpbnMoY2xvdWQpKSB7XG4gICAgdGhpcy5fY2xvdWRzW2Nsb3VkLl9pbmRleF0gPSB1bmRlZmluZWQ7IC8vIFJlbW92ZWQgbGF0ZXIgaW4gcmVtb3ZlQ2xvdWRzKClcbiAgICB0aGlzLl9jbG91ZHNSZW1vdmVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XG4gICAgY2xvdWQuX2Rlc3Ryb3koKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgY2xvdWRzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBlcmZvcm1hbmNlIDxjb2RlPk8obik8L2NvZGU+LiAgSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gcmVtb3ZlIGFsbCB0aGUgY2xvdWRzXG4gKiBmcm9tIGEgY29sbGVjdGlvbiBhbmQgdGhlbiBhZGQgbmV3IG9uZXMgdGhhbiB0byBjcmVhdGUgYSBuZXcgY29sbGVjdGlvbiBlbnRpcmVseS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNsb3Vkcy5hZGQoLi4uKTtcbiAqIGNsb3Vkcy5hZGQoLi4uKTtcbiAqIGNsb3Vkcy5yZW1vdmVBbGwoKTtcbiAqXG4gKiBAc2VlIENsb3VkQ29sbGVjdGlvbiNhZGRcbiAqIEBzZWUgQ2xvdWRDb2xsZWN0aW9uI3JlbW92ZVxuICovXG5DbG91ZENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgZGVzdHJveUNsb3Vkcyh0aGlzLl9jbG91ZHMpO1xuICB0aGlzLl9jbG91ZHMgPSBbXTtcbiAgdGhpcy5fY2xvdWRzVG9VcGRhdGUgPSBbXTtcbiAgdGhpcy5fY2xvdWRzVG9VcGRhdGVJbmRleCA9IDA7XG4gIHRoaXMuX2Nsb3Vkc1JlbW92ZWQgPSBmYWxzZTtcblxuICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XG59O1xuXG5mdW5jdGlvbiByZW1vdmVDbG91ZHMoY2xvdWRDb2xsZWN0aW9uKSB7XG4gIGlmIChjbG91ZENvbGxlY3Rpb24uX2Nsb3Vkc1JlbW92ZWQpIHtcbiAgICBjbG91ZENvbGxlY3Rpb24uX2Nsb3Vkc1JlbW92ZWQgPSBmYWxzZTtcblxuICAgIHZhciBuZXdDbG91ZHMgPSBbXTtcbiAgICB2YXIgY2xvdWRzID0gY2xvdWRDb2xsZWN0aW9uLl9jbG91ZHM7XG4gICAgdmFyIGxlbmd0aCA9IGNsb3Vkcy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBjbG91ZCA9IGNsb3Vkc1tpXTtcbiAgICAgIGlmIChkZWZpbmVkKGNsb3VkKSkge1xuICAgICAgICBjbG91ZHMuX2luZGV4ID0gaisrO1xuICAgICAgICBuZXdDbG91ZHMucHVzaChjbG91ZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2xvdWRDb2xsZWN0aW9uLl9jbG91ZHMgPSBuZXdDbG91ZHM7XG4gIH1cbn1cblxuQ2xvdWRDb2xsZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlQ2xvdWQgPSBmdW5jdGlvbiAoY2xvdWQsIHByb3BlcnR5Q2hhbmdlZCkge1xuICBpZiAoIWNsb3VkLl9kaXJ0eSkge1xuICAgIHRoaXMuX2Nsb3Vkc1RvVXBkYXRlW3RoaXMuX2Nsb3Vkc1RvVXBkYXRlSW5kZXgrK10gPSBjbG91ZDtcbiAgfVxuXG4gICsrdGhpcy5fcHJvcGVydGllc0NoYW5nZWRbcHJvcGVydHlDaGFuZ2VkXTtcbn07XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGlzIGNvbGxlY3Rpb24gY29udGFpbnMgYSBnaXZlbiBjbG91ZC5cbiAqXG4gKiBAcGFyYW0ge0N1bXVsdXNDbG91ZH0gW2Nsb3VkXSBUaGUgY2xvdWQgdG8gY2hlY2sgZm9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGhpcyBjb2xsZWN0aW9uIGNvbnRhaW5zIHRoZSBjbG91ZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICpcbiAqIEBzZWUgQ2xvdWRDb2xsZWN0aW9uI2dldFxuICovXG5DbG91ZENvbGxlY3Rpb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGNsb3VkKSB7XG4gIHJldHVybiBkZWZpbmVkKGNsb3VkKSAmJiBjbG91ZC5fY2xvdWRDb2xsZWN0aW9uID09PSB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjbG91ZCBpbiB0aGUgY29sbGVjdGlvbiBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LiBJbmRpY2VzIGFyZSB6ZXJvLWJhc2VkXG4gKiBhbmQgaW5jcmVhc2UgYXMgY2xvdWRzIGFyZSBhZGRlZC4gUmVtb3ZpbmcgYSBjbG91ZCBzaGlmdHMgYWxsIGNsb3VkcyBhZnRlclxuICogaXQgdG8gdGhlIGxlZnQsIGNoYW5naW5nIHRoZWlyIGluZGljZXMuIFRoaXMgZnVuY3Rpb24gaXMgY29tbW9ubHkgdXNlZCB3aXRoXG4gKiB7QGxpbmsgQ2xvdWRDb2xsZWN0aW9uI2xlbmd0aH0gdG8gaXRlcmF0ZSBvdmVyIGFsbCB0aGUgY2xvdWRzIGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgY2xvdWQuXG4gKiBAcmV0dXJucyB7Q3VtdWx1c0Nsb3VkfSBUaGUgY2xvdWQgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgRXhwZWN0ZWQgY29uc3RhbnQgdGltZS4gSWYgY2xvdWRzIHdlcmUgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZFxuICoge0BsaW5rIENsb3VkQ29sbGVjdGlvbiN1cGRhdGV9IHdhcyBub3QgY2FsbGVkLCBhbiBpbXBsaWNpdCA8Y29kZT5PKG4pPC9jb2RlPlxuICogb3BlcmF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUb2dnbGUgdGhlIHNob3cgcHJvcGVydHkgb2YgZXZlcnkgY2xvdWQgaW4gdGhlIGNvbGxlY3Rpb25cbiAqIHZhciBsZW4gPSBjbG91ZHMubGVuZ3RoO1xuICogZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICogICB2YXIgYyA9IGNsb3Vkcy5nZXQoaSk7XG4gKiAgIGMuc2hvdyA9ICFjLnNob3c7XG4gKiB9XG4gKlxuICogQHNlZSBDbG91ZENvbGxlY3Rpb24jbGVuZ3RoXG4gKi9cbkNsb3VkQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIoXCJpbmRleFwiLCBpbmRleCk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHJlbW92ZUNsb3Vkcyh0aGlzKTtcbiAgcmV0dXJuIHRoaXMuX2Nsb3Vkc1tpbmRleF07XG59O1xuXG52YXIgdGV4dHVyZVBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAtMS4wLFxuICAtMS4wLFxuICAxLjAsXG4gIC0xLjAsXG4gIDEuMCxcbiAgMS4wLFxuICAtMS4wLFxuICAxLjAsXG5dKTtcblxudmFyIHRleHR1cmVJbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAwLCAyLCAzXSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHR1cmVWQShjb250ZXh0KSB7XG4gIHZhciBwb3NpdGlvbkJ1ZmZlciA9IEJ1ZmZlci5jcmVhdGVWZXJ0ZXhCdWZmZXIoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgdHlwZWRBcnJheTogdGV4dHVyZVBvc2l0aW9ucyxcbiAgICB1c2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXG4gIH0pO1xuICB2YXIgaW5kZXhCdWZmZXIgPSBCdWZmZXIuY3JlYXRlSW5kZXhCdWZmZXIoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgdHlwZWRBcnJheTogdGV4dHVyZUluZGljZXMsXG4gICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICAgIGluZGV4RGF0YXR5cGU6IEluZGV4RGF0YXR5cGUuVU5TSUdORURfU0hPUlQsXG4gIH0pO1xuXG4gIHZhciBhdHRyaWJ1dGVzID0gW1xuICAgIHtcbiAgICAgIGluZGV4OiAwLFxuICAgICAgdmVydGV4QnVmZmVyOiBwb3NpdGlvbkJ1ZmZlcixcbiAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDIsXG4gICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgfSxcbiAgXTtcblxuICByZXR1cm4gbmV3IFZlcnRleEFycmF5KHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgaW5kZXhCdWZmZXI6IGluZGV4QnVmZmVyLFxuICB9KTtcbn1cblxudmFyIGdldEluZGV4QnVmZmVyO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ1ZmZlckJhdGNoZWQoY29udGV4dCkge1xuICB2YXIgc2l4dGVlbksgPSAxNiAqIDEwMjQ7XG5cbiAgdmFyIGluZGV4QnVmZmVyID0gY29udGV4dC5jYWNoZS5jbG91ZENvbGxlY3Rpb25faW5kZXhCdWZmZXJCYXRjaGVkO1xuICBpZiAoZGVmaW5lZChpbmRleEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gaW5kZXhCdWZmZXI7XG4gIH1cblxuICAvLyBTdWJ0cmFjdCA2IGJlY2F1c2UgdGhlIGxhc3QgaW5kZXggaXMgcmVzZXJ2ZWQgZm9yIHByaW1pdGl2ZSByZXN0YXJ0LlxuICAvLyBodHRwczovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9zcGVjcy9sYXRlc3QvMi4wLyM1LjE4XG4gIHZhciBsZW5ndGggPSBzaXh0ZWVuSyAqIDYgLSA2O1xuICB2YXIgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShsZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gNiwgaiArPSA0KSB7XG4gICAgaW5kaWNlc1tpXSA9IGo7XG4gICAgaW5kaWNlc1tpICsgMV0gPSBqICsgMTtcbiAgICBpbmRpY2VzW2kgKyAyXSA9IGogKyAyO1xuXG4gICAgaW5kaWNlc1tpICsgM10gPSBqO1xuICAgIGluZGljZXNbaSArIDRdID0gaiArIDI7XG4gICAgaW5kaWNlc1tpICsgNV0gPSBqICsgMztcbiAgfVxuXG4gIGluZGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZUluZGV4QnVmZmVyKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHR5cGVkQXJyYXk6IGluZGljZXMsXG4gICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICAgIGluZGV4RGF0YXR5cGU6IEluZGV4RGF0YXR5cGUuVU5TSUdORURfU0hPUlQsXG4gIH0pO1xuICBpbmRleEJ1ZmZlci52ZXJ0ZXhBcnJheURlc3Ryb3lhYmxlID0gZmFsc2U7XG4gIGNvbnRleHQuY2FjaGUuY2xvdWRDb2xsZWN0aW9uX2luZGV4QnVmZmVyQmF0Y2hlZCA9IGluZGV4QnVmZmVyO1xuICByZXR1cm4gaW5kZXhCdWZmZXI7XG59XG5cbmZ1bmN0aW9uIGdldEluZGV4QnVmZmVySW5zdGFuY2VkKGNvbnRleHQpIHtcbiAgdmFyIGluZGV4QnVmZmVyID0gY29udGV4dC5jYWNoZS5jbG91ZENvbGxlY3Rpb25faW5kZXhCdWZmZXJJbnN0YW5jZWQ7XG4gIGlmIChkZWZpbmVkKGluZGV4QnVmZmVyKSkge1xuICAgIHJldHVybiBpbmRleEJ1ZmZlcjtcbiAgfVxuXG4gIGluZGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZUluZGV4QnVmZmVyKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHR5cGVkQXJyYXk6IG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgMCwgMiwgM10pLFxuICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyxcbiAgICBpbmRleERhdGF0eXBlOiBJbmRleERhdGF0eXBlLlVOU0lHTkVEX1NIT1JULFxuICB9KTtcblxuICBpbmRleEJ1ZmZlci52ZXJ0ZXhBcnJheURlc3Ryb3lhYmxlID0gZmFsc2U7XG4gIGNvbnRleHQuY2FjaGUuY2xvdWRDb2xsZWN0aW9uX2luZGV4QnVmZmVySW5zdGFuY2VkID0gaW5kZXhCdWZmZXI7XG4gIHJldHVybiBpbmRleEJ1ZmZlcjtcbn1cblxuZnVuY3Rpb24gZ2V0VmVydGV4QnVmZmVySW5zdGFuY2VkKGNvbnRleHQpIHtcbiAgdmFyIHZlcnRleEJ1ZmZlciA9IGNvbnRleHQuY2FjaGUuY2xvdWRDb2xsZWN0aW9uX3ZlcnRleEJ1ZmZlckluc3RhbmNlZDtcbiAgaWYgKGRlZmluZWQodmVydGV4QnVmZmVyKSkge1xuICAgIHJldHVybiB2ZXJ0ZXhCdWZmZXI7XG4gIH1cblxuICB2ZXJ0ZXhCdWZmZXIgPSBCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHR5cGVkQXJyYXk6IG5ldyBGbG9hdDMyQXJyYXkoWzAuMCwgMC4wLCAxLjAsIDAuMCwgMS4wLCAxLjAsIDAuMCwgMS4wXSksXG4gICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICB9KTtcblxuICB2ZXJ0ZXhCdWZmZXIudmVydGV4QXJyYXlEZXN0cm95YWJsZSA9IGZhbHNlO1xuICBjb250ZXh0LmNhY2hlLmNsb3VkQ29sbGVjdGlvbl92ZXJ0ZXhCdWZmZXJJbnN0YW5jZWQgPSB2ZXJ0ZXhCdWZmZXI7XG4gIHJldHVybiB2ZXJ0ZXhCdWZmZXI7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVZBRihjb250ZXh0LCBudW1iZXJPZkNsb3VkcywgaW5zdGFuY2VkKSB7XG4gIHZhciBhdHRyaWJ1dGVzID0gW1xuICAgIHtcbiAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMucG9zaXRpb25IaWdoQW5kU2NhbGVYLFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogNCxcbiAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMucG9zaXRpb25Mb3dBbmRTY2FsZVksXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxuICAgIH0sXG4gICAge1xuICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5wYWNrZWRBdHRyaWJ1dGUwLFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogNCxcbiAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMucGFja2VkQXR0cmlidXRlMSxcbiAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXG4gICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICB1c2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXG4gICAgfSxcbiAgXTtcblxuICBpZiAoaW5zdGFuY2VkKSB7XG4gICAgYXR0cmlidXRlcy5wdXNoKHtcbiAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMuZGlyZWN0aW9uLFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMixcbiAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgIHZlcnRleEJ1ZmZlcjogZ2V0VmVydGV4QnVmZmVySW5zdGFuY2VkKGNvbnRleHQpLFxuICAgIH0pO1xuICB9XG5cbiAgdmFyIHNpemVJblZlcnRpY2VzID0gaW5zdGFuY2VkID8gbnVtYmVyT2ZDbG91ZHMgOiA0ICogbnVtYmVyT2ZDbG91ZHM7XG4gIHJldHVybiBuZXcgVmVydGV4QXJyYXlGYWNhZGUoY29udGV4dCwgYXR0cmlidXRlcywgc2l6ZUluVmVydGljZXMsIGluc3RhbmNlZCk7XG59XG5cbnZhciB3cml0ZVBvc2l0aW9uU2NyYXRjaCA9IG5ldyBFbmNvZGVkQ2FydGVzaWFuMygpO1xuXG5mdW5jdGlvbiB3cml0ZVBvc2l0aW9uQW5kU2NhbGUoY2xvdWRDb2xsZWN0aW9uLCBmcmFtZVN0YXRlLCB2YWZXcml0ZXJzLCBjbG91ZCkge1xuICB2YXIgaTtcbiAgdmFyIHBvc2l0aW9uSGlnaFdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uSGlnaEFuZFNjYWxlWF07XG4gIHZhciBwb3NpdGlvbkxvd1dyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uTG93QW5kU2NhbGVZXTtcbiAgdmFyIHBvc2l0aW9uID0gY2xvdWQucG9zaXRpb247XG5cbiAgRW5jb2RlZENhcnRlc2lhbjMuZnJvbUNhcnRlc2lhbihwb3NpdGlvbiwgd3JpdGVQb3NpdGlvblNjcmF0Y2gpO1xuICB2YXIgc2NhbGUgPSBjbG91ZC5zY2FsZTtcblxuICB2YXIgaGlnaCA9IHdyaXRlUG9zaXRpb25TY3JhdGNoLmhpZ2g7XG4gIHZhciBsb3cgPSB3cml0ZVBvc2l0aW9uU2NyYXRjaC5sb3c7XG5cbiAgaWYgKGNsb3VkQ29sbGVjdGlvbi5faW5zdGFuY2VkKSB7XG4gICAgaSA9IGNsb3VkLl9pbmRleDtcbiAgICBwb3NpdGlvbkhpZ2hXcml0ZXIoaSwgaGlnaC54LCBoaWdoLnksIGhpZ2gueiwgc2NhbGUueCk7XG4gICAgcG9zaXRpb25Mb3dXcml0ZXIoaSwgbG93LngsIGxvdy55LCBsb3cueiwgc2NhbGUueSk7XG4gIH0gZWxzZSB7XG4gICAgaSA9IGNsb3VkLl9pbmRleCAqIDQ7XG4gICAgcG9zaXRpb25IaWdoV3JpdGVyKGkgKyAwLCBoaWdoLngsIGhpZ2gueSwgaGlnaC56LCBzY2FsZS54KTtcbiAgICBwb3NpdGlvbkhpZ2hXcml0ZXIoaSArIDEsIGhpZ2gueCwgaGlnaC55LCBoaWdoLnosIHNjYWxlLngpO1xuICAgIHBvc2l0aW9uSGlnaFdyaXRlcihpICsgMiwgaGlnaC54LCBoaWdoLnksIGhpZ2gueiwgc2NhbGUueCk7XG4gICAgcG9zaXRpb25IaWdoV3JpdGVyKGkgKyAzLCBoaWdoLngsIGhpZ2gueSwgaGlnaC56LCBzY2FsZS54KTtcblxuICAgIHBvc2l0aW9uTG93V3JpdGVyKGkgKyAwLCBsb3cueCwgbG93LnksIGxvdy56LCBzY2FsZS55KTtcbiAgICBwb3NpdGlvbkxvd1dyaXRlcihpICsgMSwgbG93LngsIGxvdy55LCBsb3cueiwgc2NhbGUueSk7XG4gICAgcG9zaXRpb25Mb3dXcml0ZXIoaSArIDIsIGxvdy54LCBsb3cueSwgbG93LnosIHNjYWxlLnkpO1xuICAgIHBvc2l0aW9uTG93V3JpdGVyKGkgKyAzLCBsb3cueCwgbG93LnksIGxvdy56LCBzY2FsZS55KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cml0ZVBhY2tlZEF0dHJpYnV0ZTAoY2xvdWRDb2xsZWN0aW9uLCBmcmFtZVN0YXRlLCB2YWZXcml0ZXJzLCBjbG91ZCkge1xuICB2YXIgaTtcbiAgdmFyIHdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLnBhY2tlZEF0dHJpYnV0ZTBdO1xuICB2YXIgc2hvdyA9IGNsb3VkLnNob3c7XG4gIHZhciBicmlnaHRuZXNzID0gY2xvdWQuYnJpZ2h0bmVzcztcblxuICBpZiAoY2xvdWRDb2xsZWN0aW9uLl9pbnN0YW5jZWQpIHtcbiAgICBpID0gY2xvdWQuX2luZGV4O1xuICAgIHdyaXRlcihpLCBzaG93LCBicmlnaHRuZXNzLCAwLjAsIDAuMCk7XG4gIH0gZWxzZSB7XG4gICAgaSA9IGNsb3VkLl9pbmRleCAqIDQ7XG4gICAgd3JpdGVyKGkgKyAwLCBzaG93LCBicmlnaHRuZXNzLCAwLjAsIDAuMCk7XG4gICAgd3JpdGVyKGkgKyAxLCBzaG93LCBicmlnaHRuZXNzLCAxLjAsIDAuMCk7XG4gICAgd3JpdGVyKGkgKyAyLCBzaG93LCBicmlnaHRuZXNzLCAxLjAsIDEuMCk7XG4gICAgd3JpdGVyKGkgKyAzLCBzaG93LCBicmlnaHRuZXNzLCAwLjAsIDEuMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JpdGVQYWNrZWRBdHRyaWJ1dGUxKGNsb3VkQ29sbGVjdGlvbiwgZnJhbWVTdGF0ZSwgdmFmV3JpdGVycywgY2xvdWQpIHtcbiAgdmFyIGk7XG4gIHZhciB3cml0ZXIgPSB2YWZXcml0ZXJzW2F0dHJpYnV0ZUxvY2F0aW9ucy5wYWNrZWRBdHRyaWJ1dGUxXTtcbiAgdmFyIG1heGltdW1TaXplID0gY2xvdWQubWF4aW11bVNpemU7XG4gIHZhciBzbGljZSA9IGNsb3VkLnNsaWNlO1xuXG4gIGlmIChjbG91ZENvbGxlY3Rpb24uX2luc3RhbmNlZCkge1xuICAgIGkgPSBjbG91ZC5faW5kZXg7XG4gICAgd3JpdGVyKGksIG1heGltdW1TaXplLngsIG1heGltdW1TaXplLnksIG1heGltdW1TaXplLnosIHNsaWNlKTtcbiAgfSBlbHNlIHtcbiAgICBpID0gY2xvdWQuX2luZGV4ICogNDtcbiAgICB3cml0ZXIoaSArIDAsIG1heGltdW1TaXplLngsIG1heGltdW1TaXplLnksIG1heGltdW1TaXplLnosIHNsaWNlKTtcbiAgICB3cml0ZXIoaSArIDEsIG1heGltdW1TaXplLngsIG1heGltdW1TaXplLnksIG1heGltdW1TaXplLnosIHNsaWNlKTtcbiAgICB3cml0ZXIoaSArIDIsIG1heGltdW1TaXplLngsIG1heGltdW1TaXplLnksIG1heGltdW1TaXplLnosIHNsaWNlKTtcbiAgICB3cml0ZXIoaSArIDMsIG1heGltdW1TaXplLngsIG1heGltdW1TaXplLnksIG1heGltdW1TaXplLnosIHNsaWNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cml0ZUNsb3VkKGNsb3VkQ29sbGVjdGlvbiwgZnJhbWVTdGF0ZSwgdmFmV3JpdGVycywgY2xvdWQpIHtcbiAgd3JpdGVQb3NpdGlvbkFuZFNjYWxlKGNsb3VkQ29sbGVjdGlvbiwgZnJhbWVTdGF0ZSwgdmFmV3JpdGVycywgY2xvdWQpO1xuICB3cml0ZVBhY2tlZEF0dHJpYnV0ZTAoY2xvdWRDb2xsZWN0aW9uLCBmcmFtZVN0YXRlLCB2YWZXcml0ZXJzLCBjbG91ZCk7XG4gIHdyaXRlUGFja2VkQXR0cmlidXRlMShjbG91ZENvbGxlY3Rpb24sIGZyYW1lU3RhdGUsIHZhZldyaXRlcnMsIGNsb3VkKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9pc2VUZXh0dXJlKGNsb3VkQ29sbGVjdGlvbiwgZnJhbWVTdGF0ZSwgdnNTb3VyY2UsIGZzU291cmNlKSB7XG4gIHZhciB0aGF0ID0gY2xvdWRDb2xsZWN0aW9uO1xuICB2YXIgY29udGV4dCA9IGZyYW1lU3RhdGUuY29udGV4dDtcbiAgdGhhdC5fdmFOb2lzZSA9IGNyZWF0ZVRleHR1cmVWQShjb250ZXh0KTtcbiAgdGhhdC5fc3BOb2lzZSA9IFNoYWRlclByb2dyYW0uZnJvbUNhY2hlKHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnNTb3VyY2UsXG4gICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IGZzU291cmNlLFxuICAgIGF0dHJpYnV0ZUxvY2F0aW9uczoge1xuICAgICAgcG9zaXRpb246IDAsXG4gICAgfSxcbiAgfSk7XG5cbiAgdmFyIG5vaXNlVGV4dHVyZUxlbmd0aCA9IHRoYXQuX25vaXNlVGV4dHVyZUxlbmd0aDtcbiAgdmFyIG5vaXNlRGV0YWlsID0gdGhhdC5ub2lzZURldGFpbDtcbiAgdmFyIG5vaXNlT2Zmc2V0ID0gdGhhdC5ub2lzZU9mZnNldDtcblxuICB0aGF0Ll9ub2lzZVRleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICB3aWR0aDogbm9pc2VUZXh0dXJlTGVuZ3RoICogbm9pc2VUZXh0dXJlTGVuZ3RoLFxuICAgIGhlaWdodDogbm9pc2VUZXh0dXJlTGVuZ3RoLFxuICAgIHBpeGVsRGF0YXR5cGU6IFBpeGVsRGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICBwaXhlbEZvcm1hdDogUGl4ZWxGb3JtYXQuUkdCQSxcbiAgICBzYW1wbGVyOiBuZXcgU2FtcGxlcih7XG4gICAgICB3cmFwUzogVGV4dHVyZVdyYXAuUkVQRUFULFxuICAgICAgd3JhcFQ6IFRleHR1cmVXcmFwLlJFUEVBVCxcbiAgICAgIG1pbmlmaWNhdGlvbkZpbHRlcjogVGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlci5ORUFSRVNULFxuICAgICAgbWFnbmlmaWNhdGlvbkZpbHRlcjogVGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXIuTkVBUkVTVCxcbiAgICB9KSxcbiAgfSk7XG5cbiAgdmFyIHRleHR1cmVDb21tYW5kID0gbmV3IENvbXB1dGVDb21tYW5kKHtcbiAgICB2ZXJ0ZXhBcnJheTogdGhhdC5fdmFOb2lzZSxcbiAgICBzaGFkZXJQcm9ncmFtOiB0aGF0Ll9zcE5vaXNlLFxuICAgIG91dHB1dFRleHR1cmU6IHRoYXQuX25vaXNlVGV4dHVyZSxcbiAgICB1bmlmb3JtTWFwOiB7XG4gICAgICB1X25vaXNlVGV4dHVyZUxlbmd0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbm9pc2VUZXh0dXJlTGVuZ3RoO1xuICAgICAgfSxcbiAgICAgIHVfbm9pc2VEZXRhaWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5vaXNlRGV0YWlsO1xuICAgICAgfSxcbiAgICAgIHVfbm9pc2VPZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5vaXNlT2Zmc2V0O1xuICAgICAgfSxcbiAgICB9LFxuICAgIHBlcnNpc3RzOiBmYWxzZSxcbiAgICBvd25lcjogY2xvdWRDb2xsZWN0aW9uLFxuICAgIHBvc3RFeGVjdXRlOiBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgICAgdGhhdC5fcmVhZHkgPSB0cnVlO1xuICAgICAgdGhhdC5fbG9hZGluZyA9IGZhbHNlO1xuICAgIH0sXG4gIH0pO1xuXG4gIGZyYW1lU3RhdGUuY29tbWFuZExpc3QucHVzaCh0ZXh0dXJlQ29tbWFuZCk7XG4gIHRoYXQuX2xvYWRpbmcgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVWZXJ0ZXhBcnJheShjbG91ZENvbGxlY3Rpb24sIGZyYW1lU3RhdGUpIHtcbiAgdmFyIHRoYXQgPSBjbG91ZENvbGxlY3Rpb247XG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuICB0aGF0Ll9jcmVhdGVWZXJ0ZXhBcnJheSA9IGZhbHNlO1xuICB0aGF0Ll92YWYgPSB0aGF0Ll92YWYgJiYgdGhhdC5fdmFmLmRlc3Ryb3koKTtcblxuICB2YXIgY2xvdWRzID0gY2xvdWRDb2xsZWN0aW9uLl9jbG91ZHM7XG4gIHZhciBjbG91ZHNMZW5ndGggPSBjbG91ZHMubGVuZ3RoO1xuICBpZiAoY2xvdWRzTGVuZ3RoID4gMCkge1xuICAgIHRoYXQuX3ZhZiA9IGNyZWF0ZVZBRihjb250ZXh0LCBjbG91ZHNMZW5ndGgsIHRoYXQuX2luc3RhbmNlZCk7XG4gICAgdmFyIHZhZldyaXRlcnMgPSB0aGF0Ll92YWYud3JpdGVycztcblxuICAgIHZhciBpO1xuICAgIC8vIFJld3JpdGUgZW50aXJlIGJ1ZmZlciBpZiBjbG91ZHMgd2VyZSBhZGRlZCBvciByZW1vdmVkLlxuICAgIGZvciAoaSA9IDA7IGkgPCBjbG91ZHNMZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGNsb3VkID0gY2xvdWRzW2ldO1xuICAgICAgd3JpdGVDbG91ZChjbG91ZENvbGxlY3Rpb24sIGZyYW1lU3RhdGUsIHZhZldyaXRlcnMsIGNsb3VkKTtcbiAgICB9XG5cbiAgICAvLyBEaWZmZXJlbnQgY2xvdWQgY29sbGVjdGlvbnMgc2hhcmUgdGhlIHNhbWUgaW5kZXggYnVmZmVyLlxuICAgIHRoYXQuX3ZhZi5jb21taXQoZ2V0SW5kZXhCdWZmZXIoY29udGV4dCkpO1xuICB9XG59XG5cbnZhciBzY3JhdGNoV3JpdGVyQXJyYXkgPSBbXTtcblxuZnVuY3Rpb24gdXBkYXRlQ2xvdWRzKGNsb3VkQ29sbGVjdGlvbiwgZnJhbWVTdGF0ZSkge1xuICB2YXIgY29udGV4dCA9IGZyYW1lU3RhdGUuY29udGV4dDtcbiAgdmFyIHRoYXQgPSBjbG91ZENvbGxlY3Rpb247XG4gIHZhciBjbG91ZHMgPSB0aGF0Ll9jbG91ZHM7XG4gIHZhciBjbG91ZHNMZW5ndGggPSBjbG91ZHMubGVuZ3RoO1xuICB2YXIgY2xvdWRzVG9VcGRhdGUgPSB0aGF0Ll9jbG91ZHNUb1VwZGF0ZTtcbiAgdmFyIGNsb3Vkc1RvVXBkYXRlTGVuZ3RoID0gdGhhdC5fY2xvdWRzVG9VcGRhdGVJbmRleDtcblxuICB2YXIgcHJvcGVydGllcyA9IHRoYXQuX3Byb3BlcnRpZXNDaGFuZ2VkO1xuXG4gIHZhciB3cml0ZXJzID0gc2NyYXRjaFdyaXRlckFycmF5O1xuICB3cml0ZXJzLmxlbmd0aCA9IDA7XG5cbiAgaWYgKHByb3BlcnRpZXNbUE9TSVRJT05fSU5ERVhdIHx8IHByb3BlcnRpZXNbU0NBTEVfSU5ERVhdKSB7XG4gICAgd3JpdGVycy5wdXNoKHdyaXRlUG9zaXRpb25BbmRTY2FsZSk7XG4gIH1cblxuICBpZiAocHJvcGVydGllc1tTSE9XX0lOREVYXSB8fCBwcm9wZXJ0aWVzW0JSSUdIVE5FU1NfSU5ERVhdKSB7XG4gICAgd3JpdGVycy5wdXNoKHdyaXRlUGFja2VkQXR0cmlidXRlMCk7XG4gIH1cblxuICBpZiAocHJvcGVydGllc1tNQVhJTVVNX1NJWkVfSU5ERVhdIHx8IHByb3BlcnRpZXNbU0xJQ0VfSU5ERVhdKSB7XG4gICAgd3JpdGVycy5wdXNoKHdyaXRlUGFja2VkQXR0cmlidXRlMSk7XG4gIH1cblxuICB2YXIgbnVtV3JpdGVycyA9IHdyaXRlcnMubGVuZ3RoO1xuICB2YXIgdmFmV3JpdGVycyA9IHRoYXQuX3ZhZi53cml0ZXJzO1xuXG4gIHZhciBpLCBjLCB3O1xuICBpZiAoY2xvdWRzVG9VcGRhdGVMZW5ndGggLyBjbG91ZHNMZW5ndGggPiAwLjEpIHtcbiAgICAvLyBMaWtlIEJpbGxib2FyZENvbGxlY3Rpb24sIGlmIG1vcmUgdGhhbiAxMCUgb2YgY2xvdWRzIGNoYW5nZSxcbiAgICAvLyByZXdyaXRlIHRoZSBlbnRpcmUgYnVmZmVyLlxuXG4gICAgZm9yIChpID0gMDsgaSA8IGNsb3Vkc1RvVXBkYXRlTGVuZ3RoOyArK2kpIHtcbiAgICAgIGMgPSBjbG91ZHNUb1VwZGF0ZVtpXTtcbiAgICAgIGMuX2RpcnR5ID0gZmFsc2U7XG5cbiAgICAgIGZvciAodyA9IDA7IHcgPCBudW1Xcml0ZXJzOyArK3cpIHtcbiAgICAgICAgd3JpdGVyc1t3XShjbG91ZENvbGxlY3Rpb24sIGZyYW1lU3RhdGUsIHZhZldyaXRlcnMsIGMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoYXQuX3ZhZi5jb21taXQoZ2V0SW5kZXhCdWZmZXIoY29udGV4dCkpO1xuICB9IGVsc2Uge1xuICAgIGZvciAoaSA9IDA7IGkgPCBjbG91ZHNUb1VwZGF0ZUxlbmd0aDsgKytpKSB7XG4gICAgICBjID0gY2xvdWRzVG9VcGRhdGVbaV07XG4gICAgICBjLl9kaXJ0eSA9IGZhbHNlO1xuXG4gICAgICBmb3IgKHcgPSAwOyB3IDwgbnVtV3JpdGVyczsgKyt3KSB7XG4gICAgICAgIHdyaXRlcnNbd10oY2xvdWRDb2xsZWN0aW9uLCBmcmFtZVN0YXRlLCB2YWZXcml0ZXJzLCBjKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoYXQuX2luc3RhbmNlZCkge1xuICAgICAgICB0aGF0Ll92YWYuc3ViQ29tbWl0KGMuX2luZGV4LCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoYXQuX3ZhZi5zdWJDb21taXQoYy5faW5kZXggKiA0LCA0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhhdC5fdmFmLmVuZFN1YkNvbW1pdHMoKTtcbiAgfVxuXG4gIHRoYXQuX2Nsb3Vkc1RvVXBkYXRlSW5kZXggPSAwO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTaGFkZXJQcm9ncmFtKGNsb3VkQ29sbGVjdGlvbiwgZnJhbWVTdGF0ZSwgdnNTb3VyY2UsIGZzU291cmNlKSB7XG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuICB2YXIgdGhhdCA9IGNsb3VkQ29sbGVjdGlvbjtcbiAgdmFyIHZzID0gbmV3IFNoYWRlclNvdXJjZSh7XG4gICAgZGVmaW5lczogW10sXG4gICAgc291cmNlczogW3ZzU291cmNlXSxcbiAgfSk7XG5cbiAgaWYgKHRoYXQuX2luc3RhbmNlZCkge1xuICAgIHZzLmRlZmluZXMucHVzaChcIklOU1RBTkNFRFwiKTtcbiAgfVxuXG4gIHZhciBmcyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgIGRlZmluZXM6IFtdLFxuICAgIHNvdXJjZXM6IFtmc1NvdXJjZV0sXG4gIH0pO1xuXG4gIGlmICh0aGF0LmRlYnVnQmlsbGJvYXJkcykge1xuICAgIGZzLmRlZmluZXMucHVzaChcIkRFQlVHX0JJTExCT0FSRFNcIik7XG4gIH1cblxuICBpZiAodGhhdC5kZWJ1Z0VsbGlwc29pZHMpIHtcbiAgICBmcy5kZWZpbmVzLnB1c2goXCJERUJVR19FTExJUFNPSURTXCIpO1xuICB9XG5cbiAgdGhhdC5fc3AgPSBTaGFkZXJQcm9ncmFtLnJlcGxhY2VDYWNoZSh7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICBzaGFkZXJQcm9ncmFtOiB0aGF0Ll9zcCxcbiAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2U6IHZzLFxuICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBmcyxcbiAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgfSk7XG5cbiAgdGhhdC5fcnMgPSBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUoe1xuICAgIGRlcHRoVGVzdDoge1xuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGZ1bmM6IFdlYkdMQ29uc3RhbnRzLkxFU1MsXG4gICAgfSxcbiAgICBkZXB0aE1hc2s6IGZhbHNlLFxuICAgIGJsZW5kaW5nOiBCbGVuZGluZ1N0YXRlLkFMUEhBX0JMRU5ELFxuICB9KTtcblxuICB0aGF0Ll9zcENyZWF0ZWQgPSB0cnVlO1xuICB0aGF0Ll9jb21waWxlZERlYnVnQmlsbGJvYXJkcyA9IHRoYXQuZGVidWdCaWxsYm9hcmRzO1xuICB0aGF0Ll9jb21waWxlZERlYnVnRWxsaXBzb2lkcyA9IHRoYXQuZGVidWdFbGxpcHNvaWRzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEcmF3Q29tbWFuZHMoY2xvdWRDb2xsZWN0aW9uLCBmcmFtZVN0YXRlKSB7XG4gIHZhciB0aGF0ID0gY2xvdWRDb2xsZWN0aW9uO1xuICB2YXIgcGFzcyA9IGZyYW1lU3RhdGUucGFzc2VzO1xuICB2YXIgdW5pZm9ybXMgPSB0aGF0Ll91bmlmb3JtcztcbiAgdmFyIGNvbW1hbmRMaXN0ID0gZnJhbWVTdGF0ZS5jb21tYW5kTGlzdDtcbiAgaWYgKHBhc3MucmVuZGVyKSB7XG4gICAgdmFyIGNvbG9yTGlzdCA9IHRoYXQuX2NvbG9yQ29tbWFuZHM7XG5cbiAgICB2YXIgdmEgPSB0aGF0Ll92YWYudmE7XG4gICAgdmFyIHZhTGVuZ3RoID0gdmEubGVuZ3RoO1xuICAgIGNvbG9yTGlzdC5sZW5ndGggPSB2YUxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhTGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjb21tYW5kID0gY29sb3JMaXN0W2ldO1xuICAgICAgaWYgKCFkZWZpbmVkKGNvbW1hbmQpKSB7XG4gICAgICAgIGNvbW1hbmQgPSBjb2xvckxpc3RbaV0gPSBuZXcgRHJhd0NvbW1hbmQoKTtcbiAgICAgIH1cbiAgICAgIGNvbW1hbmQucGFzcyA9IFBhc3MuVFJBTlNMVUNFTlQ7XG4gICAgICBjb21tYW5kLm93bmVyID0gY2xvdWRDb2xsZWN0aW9uO1xuICAgICAgY29tbWFuZC51bmlmb3JtTWFwID0gdW5pZm9ybXM7XG4gICAgICBjb21tYW5kLmNvdW50ID0gdmFbaV0uaW5kaWNlc0NvdW50O1xuICAgICAgY29tbWFuZC52ZXJ0ZXhBcnJheSA9IHZhW2ldLnZhO1xuICAgICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID0gdGhhdC5fc3A7XG4gICAgICBjb21tYW5kLnJlbmRlclN0YXRlID0gdGhhdC5fcnM7XG4gICAgICBpZiAodGhhdC5faW5zdGFuY2VkKSB7XG4gICAgICAgIGNvbW1hbmQuY291bnQgPSA2O1xuICAgICAgICBjb21tYW5kLmluc3RhbmNlQ291bnQgPSB0aGF0Ll9jbG91ZHMubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBjb21tYW5kTGlzdC5wdXNoKGNvbW1hbmQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkNsb3VkQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgcmVtb3ZlQ2xvdWRzKHRoaXMpO1xuICBpZiAoIXRoaXMuc2hvdykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBkZWJ1Z2dpbmcgPSB0aGlzLmRlYnVnQmlsbGJvYXJkcyB8fCB0aGlzLmRlYnVnRWxsaXBzb2lkcztcbiAgdGhpcy5fcmVhZHkgPSBkZWJ1Z2dpbmcgPyB0cnVlIDogZGVmaW5lZCh0aGlzLl9ub2lzZVRleHR1cmUpO1xuXG4gIGlmICghdGhpcy5fcmVhZHkgJiYgIXRoaXMuX2xvYWRpbmcgJiYgIWRlYnVnZ2luZykge1xuICAgIGNyZWF0ZU5vaXNlVGV4dHVyZSh0aGlzLCBmcmFtZVN0YXRlLCBDbG91ZE5vaXNlVlMsIENsb3VkTm9pc2VGUyk7XG4gIH1cblxuICB0aGlzLl9pbnN0YW5jZWQgPSBmcmFtZVN0YXRlLmNvbnRleHQuaW5zdGFuY2VkQXJyYXlzO1xuICBhdHRyaWJ1dGVMb2NhdGlvbnMgPSB0aGlzLl9pbnN0YW5jZWRcbiAgICA/IGF0dHJpYnV0ZUxvY2F0aW9uc0luc3RhbmNlZFxuICAgIDogYXR0cmlidXRlTG9jYXRpb25zQmF0Y2hlZDtcbiAgZ2V0SW5kZXhCdWZmZXIgPSB0aGlzLl9pbnN0YW5jZWRcbiAgICA/IGdldEluZGV4QnVmZmVySW5zdGFuY2VkXG4gICAgOiBnZXRJbmRleEJ1ZmZlckJhdGNoZWQ7XG5cbiAgdmFyIGNsb3VkcyA9IHRoaXMuX2Nsb3VkcztcbiAgdmFyIGNsb3Vkc0xlbmd0aCA9IGNsb3Vkcy5sZW5ndGg7XG4gIHZhciBjbG91ZHNUb1VwZGF0ZSA9IHRoaXMuX2Nsb3Vkc1RvVXBkYXRlO1xuICB2YXIgY2xvdWRzVG9VcGRhdGVMZW5ndGggPSB0aGlzLl9jbG91ZHNUb1VwZGF0ZUluZGV4O1xuXG4gIGlmICh0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSkge1xuICAgIGNyZWF0ZVZlcnRleEFycmF5KHRoaXMsIGZyYW1lU3RhdGUpO1xuICB9IGVsc2UgaWYgKGNsb3Vkc1RvVXBkYXRlTGVuZ3RoID4gMCkge1xuICAgIC8vIENsb3VkcyB3ZXJlIG1vZGlmaWVkLCBidXQgbm9uZSB3ZXJlIGFkZGVkIG9yIHJlbW92ZWQuXG4gICAgdXBkYXRlQ2xvdWRzKHRoaXMsIGZyYW1lU3RhdGUpO1xuICB9XG5cbiAgLy8gSWYgdGhlIG51bWJlciBvZiB0b3RhbCBjbG91ZHMgZXZlciBzaHJpbmtzIGNvbnNpZGVyYWJseSxcbiAgLy8gdHJ1bmNhdGUgY2xvdWRzVG9VcGRhdGUgc28gdGhhdCB3ZSBmcmVlIG1lbW9yeSB0aGF0XG4gIC8vIHdlIGFyZSBubyBsb25nZXIgdXNpbmcuXG4gIGlmIChjbG91ZHNUb1VwZGF0ZUxlbmd0aCA+IGNsb3Vkc0xlbmd0aCAqIDEuNSkge1xuICAgIGNsb3Vkc1RvVXBkYXRlLmxlbmd0aCA9IGNsb3Vkc0xlbmd0aDtcbiAgfVxuXG4gIGlmIChcbiAgICAhZGVmaW5lZCh0aGlzLl92YWYpIHx8XG4gICAgIWRlZmluZWQodGhpcy5fdmFmLnZhKSB8fFxuICAgICF0aGlzLl9yZWFkeSAmICFkZWJ1Z2dpbmdcbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKFxuICAgICF0aGlzLl9zcENyZWF0ZWQgfHxcbiAgICB0aGlzLmRlYnVnQmlsbGJvYXJkcyAhPT0gdGhpcy5fY29tcGlsZWREZWJ1Z0JpbGxib2FyZHMgfHxcbiAgICB0aGlzLmRlYnVnRWxsaXBzb2lkcyAhPT0gdGhpcy5fY29tcGlsZWREZWJ1Z0VsbGlwc29pZHNcbiAgKSB7XG4gICAgY3JlYXRlU2hhZGVyUHJvZ3JhbSh0aGlzLCBmcmFtZVN0YXRlLCBDbG91ZENvbGxlY3Rpb25WUywgQ2xvdWRDb2xsZWN0aW9uRlMpO1xuICB9XG5cbiAgY3JlYXRlRHJhd0NvbW1hbmRzKHRoaXMsIGZyYW1lU3RhdGUpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKlxuICogQHNlZSBDbG91ZENvbGxlY3Rpb24jZGVzdHJveVxuICovXG5DbG91ZENvbGxlY3Rpb24ucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIERlc3Ryb3lzIHRoZSBXZWJHTCByZXNvdXJjZXMgaGVsZCBieSB0aGlzIG9iamVjdC4gIERlc3Ryb3lpbmcgYW4gb2JqZWN0IGFsbG93cyBmb3IgZGV0ZXJtaW5pc3RpY1xuICogcmVsZWFzZSBvZiBXZWJHTCByZXNvdXJjZXMsIGluc3RlYWQgb2YgcmVseWluZyBvbiB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZGVzdHJveSB0aGlzIG9iamVjdC5cbiAqIDxiciAvPjxiciAvPlxuICogT25jZSBhbiBvYmplY3QgaXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLiAgVGhlcmVmb3JlLFxuICogYXNzaWduIHRoZSByZXR1cm4gdmFsdWUgKDxjb2RlPnVuZGVmaW5lZDwvY29kZT4pIHRvIHRoZSBvYmplY3QgYXMgZG9uZSBpbiB0aGUgZXhhbXBsZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBjbG91ZHMgPSBjbG91ZHMgJiYgY2xvdWRzLmRlc3Ryb3koKTtcbiAqXG4gKiBAc2VlIENsb3VkQ29sbGVjdGlvbiNpc0Rlc3Ryb3llZFxuICovXG5DbG91ZENvbGxlY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX25vaXNlVGV4dHVyZSA9IHRoaXMuX25vaXNlVGV4dHVyZSAmJiB0aGlzLl9ub2lzZVRleHR1cmUuZGVzdHJveSgpO1xuICB0aGlzLl9zcCA9IHRoaXMuX3NwICYmIHRoaXMuX3NwLmRlc3Ryb3koKTtcbiAgdGhpcy5fdmFmID0gdGhpcy5fdmFmICYmIHRoaXMuX3ZhZi5kZXN0cm95KCk7XG5cbiAgZGVzdHJveUNsb3Vkcyh0aGlzLl9jbG91ZHMpO1xuXG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2xvdWRDb2xsZWN0aW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///43495\n')},91757:function(__unused_webpack___webpack_module__,__webpack_exports__){eval("/**\n * Specifies the type of the cloud that is added to a {@link CloudCollection} in {@link CloudCollection#add}.\n *\n * @enum {Number}\n */\n\nvar CloudType = {\n  /**\n   * Cumulus cloud.\n   *\n   * @type {Number}\n   * @constant\n   */\n  CUMULUS: 0,\n};\n\n/**\n * Validates that the provided cloud type is a valid {@link CloudType}\n *\n * @param {CloudType} cloudType The cloud type to validate.\n * @returns {Boolean} <code>true</code> if the provided cloud type is a valid value; otherwise, <code>false</code>.\n *\n * @example\n * if (!Cesium.CloudType.validate(cloudType)) {\n *   throw new Cesium.DeveloperError('cloudType must be a valid value.');\n * }\n */\n\nCloudType.validate = function (cloudType) {\n  return cloudType === CloudType.CUMULUS;\n};\n\n/* harmony default export */ __webpack_exports__[\"Z\"] = (Object.freeze(CloudType));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTE3NTcuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSx1REFBdUQsdUJBQXVCLElBQUksMEJBQTBCO0FBQzVHO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0EsV0FBVyxXQUFXO0FBQ3RCLGFBQWEsU0FBUywrREFBK0Q7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx5REFBZSx3QkFBd0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9DbG91ZFR5cGUuanM/NDZlNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNwZWNpZmllcyB0aGUgdHlwZSBvZiB0aGUgY2xvdWQgdGhhdCBpcyBhZGRlZCB0byBhIHtAbGluayBDbG91ZENvbGxlY3Rpb259IGluIHtAbGluayBDbG91ZENvbGxlY3Rpb24jYWRkfS5cbiAqXG4gKiBAZW51bSB7TnVtYmVyfVxuICovXG5cbnZhciBDbG91ZFR5cGUgPSB7XG4gIC8qKlxuICAgKiBDdW11bHVzIGNsb3VkLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIENVTVVMVVM6IDAsXG59O1xuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwcm92aWRlZCBjbG91ZCB0eXBlIGlzIGEgdmFsaWQge0BsaW5rIENsb3VkVHlwZX1cbiAqXG4gKiBAcGFyYW0ge0Nsb3VkVHlwZX0gY2xvdWRUeXBlIFRoZSBjbG91ZCB0eXBlIHRvIHZhbGlkYXRlLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZSBwcm92aWRlZCBjbG91ZCB0eXBlIGlzIGEgdmFsaWQgdmFsdWU7IG90aGVyd2lzZSwgPGNvZGU+ZmFsc2U8L2NvZGU+LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpZiAoIUNlc2l1bS5DbG91ZFR5cGUudmFsaWRhdGUoY2xvdWRUeXBlKSkge1xuICogICB0aHJvdyBuZXcgQ2VzaXVtLkRldmVsb3BlckVycm9yKCdjbG91ZFR5cGUgbXVzdCBiZSBhIHZhbGlkIHZhbHVlLicpO1xuICogfVxuICovXG5cbkNsb3VkVHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIChjbG91ZFR5cGUpIHtcbiAgcmV0dXJuIGNsb3VkVHlwZSA9PT0gQ2xvdWRUeXBlLkNVTVVMVVM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBPYmplY3QuZnJlZXplKENsb3VkVHlwZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///91757\n")}}]);