"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[8778],{36514:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88108);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63367);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12572);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(47861);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(72248);\n/* harmony import */ var _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(15720);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(89917);\n/* harmony import */ var _SceneTransforms_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(48244);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A graphical point positioned in the 3D scene, that is created\n * and rendered using a {@link PointPrimitiveCollection}.  A point is created and its initial\n * properties are set by calling {@link PointPrimitiveCollection#add}.\n *\n * @alias PointPrimitive\n *\n * @performance Reading a property, e.g., {@link PointPrimitive#show}, is constant time.\n * Assigning to a property is constant time but results in\n * CPU to GPU traffic when {@link PointPrimitiveCollection#update} is called.  The per-pointPrimitive traffic is\n * the same regardless of how many properties were updated.  If most pointPrimitives in a collection need to be\n * updated, it may be more efficient to clear the collection with {@link PointPrimitiveCollection#removeAll}\n * and add new pointPrimitives instead of modifying each one.\n *\n * @exception {DeveloperError} scaleByDistance.far must be greater than scaleByDistance.near\n * @exception {DeveloperError} translucencyByDistance.far must be greater than translucencyByDistance.near\n * @exception {DeveloperError} distanceDisplayCondition.far must be greater than distanceDisplayCondition.near\n *\n * @see PointPrimitiveCollection\n * @see PointPrimitiveCollection#add\n *\n * @internalConstructor\n * @class\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Points.html|Cesium Sandcastle Points Demo}\n */\nfunction PointPrimitive(options, pointPrimitiveCollection) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(options.disableDepthTestDistance) &&\n    options.disableDepthTestDistance < 0.0\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "disableDepthTestDistance must be greater than or equal to 0.0."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var translucencyByDistance = options.translucencyByDistance;\n  var scaleByDistance = options.scaleByDistance;\n  var distanceDisplayCondition = options.distanceDisplayCondition;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(translucencyByDistance)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (translucencyByDistance.far <= translucencyByDistance.near) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n        "translucencyByDistance.far must be greater than translucencyByDistance.near."\n      );\n    }\n    //>>includeEnd(\'debug\');\n    translucencyByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(translucencyByDistance);\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(scaleByDistance)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (scaleByDistance.far <= scaleByDistance.near) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n        "scaleByDistance.far must be greater than scaleByDistance.near."\n      );\n    }\n    //>>includeEnd(\'debug\');\n    scaleByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(scaleByDistance);\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(distanceDisplayCondition)) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (distanceDisplayCondition.far <= distanceDisplayCondition.near) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n        "distanceDisplayCondition.far must be greater than distanceDisplayCondition.near."\n      );\n    }\n    //>>includeEnd(\'debug\');\n    distanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(\n      distanceDisplayCondition\n    );\n  }\n\n  this._show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.show, true);\n  this._position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.position, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO)\n  );\n  this._actualPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(this._position); // For columbus view and 2D\n  this._color = _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone((0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.color, _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].WHITE */ .Z.WHITE));\n  this._outlineColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.outlineColor, _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].TRANSPARENT */ .Z.TRANSPARENT)\n  );\n  this._outlineWidth = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.outlineWidth, 0.0);\n  this._pixelSize = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.pixelSize, 10.0);\n  this._scaleByDistance = scaleByDistance;\n  this._translucencyByDistance = translucencyByDistance;\n  this._distanceDisplayCondition = distanceDisplayCondition;\n  this._disableDepthTestDistance = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.disableDepthTestDistance,\n    0.0\n  );\n  this._id = options.id;\n  this._collection = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.collection, pointPrimitiveCollection);\n\n  this._clusterShow = true;\n\n  this._pickId = undefined;\n  this._pointPrimitiveCollection = pointPrimitiveCollection;\n  this._dirty = false;\n  this._index = -1; //Used only by PointPrimitiveCollection\n}\n\nvar SHOW_INDEX = (PointPrimitive.SHOW_INDEX = 0);\nvar POSITION_INDEX = (PointPrimitive.POSITION_INDEX = 1);\nvar COLOR_INDEX = (PointPrimitive.COLOR_INDEX = 2);\nvar OUTLINE_COLOR_INDEX = (PointPrimitive.OUTLINE_COLOR_INDEX = 3);\nvar OUTLINE_WIDTH_INDEX = (PointPrimitive.OUTLINE_WIDTH_INDEX = 4);\nvar PIXEL_SIZE_INDEX = (PointPrimitive.PIXEL_SIZE_INDEX = 5);\nvar SCALE_BY_DISTANCE_INDEX = (PointPrimitive.SCALE_BY_DISTANCE_INDEX = 6);\nvar TRANSLUCENCY_BY_DISTANCE_INDEX = (PointPrimitive.TRANSLUCENCY_BY_DISTANCE_INDEX = 7);\nvar DISTANCE_DISPLAY_CONDITION_INDEX = (PointPrimitive.DISTANCE_DISPLAY_CONDITION_INDEX = 8);\nvar DISABLE_DEPTH_DISTANCE_INDEX = (PointPrimitive.DISABLE_DEPTH_DISTANCE_INDEX = 9);\nPointPrimitive.NUMBER_OF_PROPERTIES = 10;\n\nfunction makeDirty(pointPrimitive, propertyChanged) {\n  var pointPrimitiveCollection = pointPrimitive._pointPrimitiveCollection;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(pointPrimitiveCollection)) {\n    pointPrimitiveCollection._updatePointPrimitive(\n      pointPrimitive,\n      propertyChanged\n    );\n    pointPrimitive._dirty = true;\n  }\n}\n\nObject.defineProperties(PointPrimitive.prototype, {\n  /**\n   * Determines if this point will be shown.  Use this to hide or show a point, instead\n   * of removing it and re-adding it to the collection.\n   * @memberof PointPrimitive.prototype\n   * @type {Boolean}\n   */\n  show: {\n    get: function () {\n      return this._show;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._show !== value) {\n        this._show = value;\n        makeDirty(this, SHOW_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the Cartesian position of this point.\n   * @memberof PointPrimitive.prototype\n   * @type {Cartesian3}\n   */\n  position: {\n    get: function () {\n      return this._position;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug)\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var position = this._position;\n      if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(position, value)) {\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(value, position);\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(value, this._actualPosition);\n\n        makeDirty(this, POSITION_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets near and far scaling properties of a point based on the point\'s distance from the camera.\n   * A point\'s scale will interpolate between the {@link NearFarScalar#nearValue} and\n   * {@link NearFarScalar#farValue} while the camera distance falls within the lower and upper bounds\n   * of the specified {@link NearFarScalar#near} and {@link NearFarScalar#far}.\n   * Outside of these ranges the point\'s scale remains clamped to the nearest bound.  This scale\n   * multiplies the pixelSize and outlineWidth to affect the total size of the point.  If undefined,\n   * scaleByDistance will be disabled.\n   * @memberof PointPrimitive.prototype\n   * @type {NearFarScalar}\n   *\n   * @example\n   * // Example 1.\n   * // Set a pointPrimitive\'s scaleByDistance to scale to 15 when the\n   * // camera is 1500 meters from the pointPrimitive and disappear as\n   * // the camera distance approaches 8.0e6 meters.\n   * p.scaleByDistance = new Cesium.NearFarScalar(1.5e2, 15, 8.0e6, 0.0);\n   *\n   * @example\n   * // Example 2.\n   * // disable scaling by distance\n   * p.scaleByDistance = undefined;\n   */\n  scaleByDistance: {\n    get: function () {\n      return this._scaleByDistance;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n          "far distance must be greater than near distance."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      var scaleByDistance = this._scaleByDistance;\n      if (!_Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].equals */ .Z.equals(scaleByDistance, value)) {\n        this._scaleByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(value, scaleByDistance);\n        makeDirty(this, SCALE_BY_DISTANCE_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets near and far translucency properties of a point based on the point\'s distance from the camera.\n   * A point\'s translucency will interpolate between the {@link NearFarScalar#nearValue} and\n   * {@link NearFarScalar#farValue} while the camera distance falls within the lower and upper bounds\n   * of the specified {@link NearFarScalar#near} and {@link NearFarScalar#far}.\n   * Outside of these ranges the point\'s translucency remains clamped to the nearest bound.  If undefined,\n   * translucencyByDistance will be disabled.\n   * @memberof PointPrimitive.prototype\n   * @type {NearFarScalar}\n   *\n   * @example\n   * // Example 1.\n   * // Set a point\'s translucency to 1.0 when the\n   * // camera is 1500 meters from the point and disappear as\n   * // the camera distance approaches 8.0e6 meters.\n   * p.translucencyByDistance = new Cesium.NearFarScalar(1.5e2, 1.0, 8.0e6, 0.0);\n   *\n   * @example\n   * // Example 2.\n   * // disable translucency by distance\n   * p.translucencyByDistance = undefined;\n   */\n  translucencyByDistance: {\n    get: function () {\n      return this._translucencyByDistance;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n          "far distance must be greater than near distance."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      var translucencyByDistance = this._translucencyByDistance;\n      if (!_Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].equals */ .Z.equals(translucencyByDistance, value)) {\n        this._translucencyByDistance = _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].clone */ .Z.clone(\n          value,\n          translucencyByDistance\n        );\n        makeDirty(this, TRANSLUCENCY_BY_DISTANCE_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the inner size of the point in pixels.\n   * @memberof PointPrimitive.prototype\n   * @type {Number}\n   */\n  pixelSize: {\n    get: function () {\n      return this._pixelSize;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._pixelSize !== value) {\n        this._pixelSize = value;\n        makeDirty(this, PIXEL_SIZE_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the inner color of the point.\n   * The red, green, blue, and alpha values are indicated by <code>value</code>\'s <code>red</code>, <code>green</code>,\n   * <code>blue</code>, and <code>alpha</code> properties as shown in Example 1.  These components range from <code>0.0</code>\n   * (no intensity) to <code>1.0</code> (full intensity).\n   * @memberof PointPrimitive.prototype\n   * @type {Color}\n   *\n   * @example\n   * // Example 1. Assign yellow.\n   * p.color = Cesium.Color.YELLOW;\n   *\n   * @example\n   * // Example 2. Make a pointPrimitive 50% translucent.\n   * p.color = new Cesium.Color(1.0, 1.0, 1.0, 0.5);\n   */\n  color: {\n    get: function () {\n      return this._color;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var color = this._color;\n      if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(color, value)) {\n        _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(value, color);\n        makeDirty(this, COLOR_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the outline color of the point.\n   * @memberof PointPrimitive.prototype\n   * @type {Color}\n   */\n  outlineColor: {\n    get: function () {\n      return this._outlineColor;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var outlineColor = this._outlineColor;\n      if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(outlineColor, value)) {\n        _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(value, outlineColor);\n        makeDirty(this, OUTLINE_COLOR_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the outline width in pixels.  This width adds to pixelSize,\n   * increasing the total size of the point.\n   * @memberof PointPrimitive.prototype\n   * @type {Number}\n   */\n  outlineWidth: {\n    get: function () {\n      return this._outlineWidth;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._outlineWidth !== value) {\n        this._outlineWidth = value;\n        makeDirty(this, OUTLINE_WIDTH_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the condition specifying at what distance from the camera that this point will be displayed.\n   * @memberof PointPrimitive.prototype\n   * @type {DistanceDisplayCondition}\n   * @default undefined\n   */\n  distanceDisplayCondition: {\n    get: function () {\n      return this._distanceDisplayCondition;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("far must be greater than near");\n      }\n      //>>includeEnd(\'debug\');\n      if (\n        !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(this._distanceDisplayCondition, value)\n      ) {\n        this._distanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(\n          value,\n          this._distanceDisplayCondition\n        );\n        makeDirty(this, DISTANCE_DISPLAY_CONDITION_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the distance from the camera at which to disable the depth test to, for example, prevent clipping against terrain.\n   * When set to zero, the depth test is always applied. When set to Number.POSITIVE_INFINITY, the depth test is never applied.\n   * @memberof PointPrimitive.prototype\n   * @type {Number}\n   * @default 0.0\n   */\n  disableDepthTestDistance: {\n    get: function () {\n      return this._disableDepthTestDistance;\n    },\n    set: function (value) {\n      if (this._disableDepthTestDistance !== value) {\n        //>>includeStart(\'debug\', pragmas.debug);\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(value) || value < 0.0) {\n          throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n            "disableDepthTestDistance must be greater than or equal to 0.0."\n          );\n        }\n        //>>includeEnd(\'debug\');\n        this._disableDepthTestDistance = value;\n        makeDirty(this, DISABLE_DEPTH_DISTANCE_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the user-defined value returned when the point is picked.\n   * @memberof PointPrimitive.prototype\n   * @type {*}\n   */\n  id: {\n    get: function () {\n      return this._id;\n    },\n    set: function (value) {\n      this._id = value;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._pickId)) {\n        this._pickId.object.id = value;\n      }\n    },\n  },\n\n  /**\n   * @private\n   */\n  pickId: {\n    get: function () {\n      return this._pickId;\n    },\n  },\n\n  /**\n   * Determines whether or not this point will be shown or hidden because it was clustered.\n   * @memberof PointPrimitive.prototype\n   * @type {Boolean}\n   * @private\n   */\n  clusterShow: {\n    get: function () {\n      return this._clusterShow;\n    },\n    set: function (value) {\n      if (this._clusterShow !== value) {\n        this._clusterShow = value;\n        makeDirty(this, SHOW_INDEX);\n      }\n    },\n  },\n});\n\nPointPrimitive.prototype.getPickId = function (context) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._pickId)) {\n    this._pickId = context.createPickId({\n      primitive: this,\n      collection: this._collection,\n      id: this._id,\n    });\n  }\n\n  return this._pickId;\n};\n\nPointPrimitive.prototype._getActualPosition = function () {\n  return this._actualPosition;\n};\n\nPointPrimitive.prototype._setActualPosition = function (value) {\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(value, this._actualPosition);\n  makeDirty(this, POSITION_INDEX);\n};\n\nvar tempCartesian3 = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nPointPrimitive._computeActualPosition = function (\n  position,\n  frameState,\n  modelMatrix\n) {\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    return position;\n  }\n\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(modelMatrix, position, tempCartesian3);\n  return _SceneTransforms_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].computeActualWgs84Position */ .Z.computeActualWgs84Position(frameState, tempCartesian3);\n};\n\nvar scratchCartesian4 = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n// This function is basically a stripped-down JavaScript version of PointPrimitiveCollectionVS.glsl\nPointPrimitive._computeScreenSpacePosition = function (\n  modelMatrix,\n  position,\n  scene,\n  result\n) {\n  // Model to world coordinates\n  var positionWorld = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].multiplyByVector */ .Z.multiplyByVector(\n    modelMatrix,\n    _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromElements */ .Z.fromElements(\n      position.x,\n      position.y,\n      position.z,\n      1,\n      scratchCartesian4\n    ),\n    scratchCartesian4\n  );\n  var positionWC = _SceneTransforms_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].wgs84ToWindowCoordinates */ .Z.wgs84ToWindowCoordinates(\n    scene,\n    positionWorld,\n    result\n  );\n  return positionWC;\n};\n\n/**\n * Computes the screen-space position of the point\'s origin.\n * The screen space origin is the top, left corner of the canvas; <code>x</code> increases from\n * left to right, and <code>y</code> increases from top to bottom.\n *\n * @param {Scene} scene The scene.\n * @param {Cartesian2} [result] The object onto which to store the result.\n * @returns {Cartesian2} The screen-space position of the point.\n *\n * @exception {DeveloperError} PointPrimitive must be in a collection.\n *\n * @example\n * console.log(p.computeScreenSpacePosition(scene).toString());\n */\nPointPrimitive.prototype.computeScreenSpacePosition = function (scene, result) {\n  var pointPrimitiveCollection = this._pointPrimitiveCollection;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  }\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(pointPrimitiveCollection)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("PointPrimitive must be in a collection.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(scene)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("scene is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var modelMatrix = pointPrimitiveCollection.modelMatrix;\n  var windowCoordinates = PointPrimitive._computeScreenSpacePosition(\n    modelMatrix,\n    this._actualPosition,\n    scene,\n    result\n  );\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(windowCoordinates)) {\n    return undefined;\n  }\n\n  windowCoordinates.y = scene.canvas.clientHeight - windowCoordinates.y;\n  return windowCoordinates;\n};\n\n/**\n * Gets a point\'s screen space bounding box centered around screenSpacePosition.\n * @param {PointPrimitive} point The point to get the screen space bounding box for.\n * @param {Cartesian2} screenSpacePosition The screen space center of the label.\n * @param {BoundingRectangle} [result] The object onto which to store the result.\n * @returns {BoundingRectangle} The screen space bounding box.\n *\n * @private\n */\nPointPrimitive.getScreenSpaceBoundingBox = function (\n  point,\n  screenSpacePosition,\n  result\n) {\n  var size = point.pixelSize;\n  var halfSize = size * 0.5;\n\n  var x = screenSpacePosition.x - halfSize;\n  var y = screenSpacePosition.y - halfSize;\n  var width = size;\n  var height = size;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(result)) {\n    result = new _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  }\n\n  result.x = x;\n  result.y = y;\n  result.width = width;\n  result.height = height;\n\n  return result;\n};\n\n/**\n * Determines if this point equals another point.  Points are equal if all their properties\n * are equal.  Points in different collections can be equal.\n *\n * @param {PointPrimitive} other The point to compare for equality.\n * @returns {Boolean} <code>true</code> if the points are equal; otherwise, <code>false</code>.\n */\nPointPrimitive.prototype.equals = function (other) {\n  return (\n    this === other ||\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(other) &&\n      this._id === other._id &&\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(this._position, other._position) &&\n      _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(this._color, other._color) &&\n      this._pixelSize === other._pixelSize &&\n      this._outlineWidth === other._outlineWidth &&\n      this._show === other._show &&\n      _Core_Color_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(this._outlineColor, other._outlineColor) &&\n      _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].equals */ .Z.equals(this._scaleByDistance, other._scaleByDistance) &&\n      _Core_NearFarScalar_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].equals */ .Z.equals(\n        this._translucencyByDistance,\n        other._translucencyByDistance\n      ) &&\n      _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(\n        this._distanceDisplayCondition,\n        other._distanceDisplayCondition\n      ) &&\n      this._disableDepthTestDistance === other._disableDepthTestDistance)\n  );\n};\n\nPointPrimitive.prototype._destroy = function () {\n  this._pickId = this._pickId && this._pickId.destroy();\n  this._pointPrimitiveCollection = undefined;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PointPrimitive);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WTtBQUN2QixXQUFXLG1CQUFtQjtBQUM5QixhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPLHNFQUFPO0FBQ2QsaUJBQWlCLDJFQUFpQjtBQUNsQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYSxTQUFTLDJDQUEyQztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssc0VBQU87QUFDWjtBQUNBLE1BQU0sa0ZBQWlCO0FBQ3ZCLE1BQU0sNkVBQVk7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2RUFBWTtBQUNsQixNQUFNLHFGQUFvQjtBQUMxQixNQUFNLHFGQUFvQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdHQUErQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxjQUFjLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvUG9pbnRQcmltaXRpdmUuanM/OWEyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm91bmRpbmdSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvQm91bmRpbmdSZWN0YW5nbGUuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4yIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjIuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW40IGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjQuanNcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vQ29yZS9Db2xvci5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiBmcm9tIFwiLi4vQ29yZS9EaXN0YW5jZURpc3BsYXlDb25kaXRpb24uanNcIjtcbmltcG9ydCBNYXRyaXg0IGZyb20gXCIuLi9Db3JlL01hdHJpeDQuanNcIjtcbmltcG9ydCBOZWFyRmFyU2NhbGFyIGZyb20gXCIuLi9Db3JlL05lYXJGYXJTY2FsYXIuanNcIjtcbmltcG9ydCBTY2VuZU1vZGUgZnJvbSBcIi4vU2NlbmVNb2RlLmpzXCI7XG5pbXBvcnQgU2NlbmVUcmFuc2Zvcm1zIGZyb20gXCIuL1NjZW5lVHJhbnNmb3Jtcy5qc1wiO1xuXG4vKipcbiAqIEEgZ3JhcGhpY2FsIHBvaW50IHBvc2l0aW9uZWQgaW4gdGhlIDNEIHNjZW5lLCB0aGF0IGlzIGNyZWF0ZWRcbiAqIGFuZCByZW5kZXJlZCB1c2luZyBhIHtAbGluayBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb259LiAgQSBwb2ludCBpcyBjcmVhdGVkIGFuZCBpdHMgaW5pdGlhbFxuICogcHJvcGVydGllcyBhcmUgc2V0IGJ5IGNhbGxpbmcge0BsaW5rIFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiNhZGR9LlxuICpcbiAqIEBhbGlhcyBQb2ludFByaW1pdGl2ZVxuICpcbiAqIEBwZXJmb3JtYW5jZSBSZWFkaW5nIGEgcHJvcGVydHksIGUuZy4sIHtAbGluayBQb2ludFByaW1pdGl2ZSNzaG93fSwgaXMgY29uc3RhbnQgdGltZS5cbiAqIEFzc2lnbmluZyB0byBhIHByb3BlcnR5IGlzIGNvbnN0YW50IHRpbWUgYnV0IHJlc3VsdHMgaW5cbiAqIENQVSB0byBHUFUgdHJhZmZpYyB3aGVuIHtAbGluayBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jdXBkYXRlfSBpcyBjYWxsZWQuICBUaGUgcGVyLXBvaW50UHJpbWl0aXZlIHRyYWZmaWMgaXNcbiAqIHRoZSBzYW1lIHJlZ2FyZGxlc3Mgb2YgaG93IG1hbnkgcHJvcGVydGllcyB3ZXJlIHVwZGF0ZWQuICBJZiBtb3N0IHBvaW50UHJpbWl0aXZlcyBpbiBhIGNvbGxlY3Rpb24gbmVlZCB0byBiZVxuICogdXBkYXRlZCwgaXQgbWF5IGJlIG1vcmUgZWZmaWNpZW50IHRvIGNsZWFyIHRoZSBjb2xsZWN0aW9uIHdpdGgge0BsaW5rIFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiNyZW1vdmVBbGx9XG4gKiBhbmQgYWRkIG5ldyBwb2ludFByaW1pdGl2ZXMgaW5zdGVhZCBvZiBtb2RpZnlpbmcgZWFjaCBvbmUuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IHNjYWxlQnlEaXN0YW5jZS5mYXIgbXVzdCBiZSBncmVhdGVyIHRoYW4gc2NhbGVCeURpc3RhbmNlLm5lYXJcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSB0cmFuc2x1Y2VuY3lCeURpc3RhbmNlLmZhciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB0cmFuc2x1Y2VuY3lCeURpc3RhbmNlLm5lYXJcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZmFyIG11c3QgYmUgZ3JlYXRlciB0aGFuIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5uZWFyXG4gKlxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb25cbiAqIEBzZWUgUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uI2FkZFxuICpcbiAqIEBpbnRlcm5hbENvbnN0cnVjdG9yXG4gKiBAY2xhc3NcbiAqXG4gKiBAZGVtbyB7QGxpbmsgaHR0cHM6Ly9zYW5kY2FzdGxlLmNlc2l1bS5jb20vaW5kZXguaHRtbD9zcmM9UG9pbnRzLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgUG9pbnRzIERlbW99XG4gKi9cbmZ1bmN0aW9uIFBvaW50UHJpbWl0aXZlKG9wdGlvbnMsIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbikge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChcbiAgICBkZWZpbmVkKG9wdGlvbnMuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlKSAmJlxuICAgIG9wdGlvbnMuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlIDwgMC4wXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDAuMC5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBvcHRpb25zLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2U7XG4gIHZhciBzY2FsZUJ5RGlzdGFuY2UgPSBvcHRpb25zLnNjYWxlQnlEaXN0YW5jZTtcbiAgdmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IG9wdGlvbnMuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xuICBpZiAoZGVmaW5lZCh0cmFuc2x1Y2VuY3lCeURpc3RhbmNlKSkge1xuICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgaWYgKHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UuZmFyIDw9IHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UubmVhcikge1xuICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICBcInRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UuZmFyIG11c3QgYmUgZ3JlYXRlciB0aGFuIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UubmVhci5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgdHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IE5lYXJGYXJTY2FsYXIuY2xvbmUodHJhbnNsdWNlbmN5QnlEaXN0YW5jZSk7XG4gIH1cbiAgaWYgKGRlZmluZWQoc2NhbGVCeURpc3RhbmNlKSkge1xuICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgaWYgKHNjYWxlQnlEaXN0YW5jZS5mYXIgPD0gc2NhbGVCeURpc3RhbmNlLm5lYXIpIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgXCJzY2FsZUJ5RGlzdGFuY2UuZmFyIG11c3QgYmUgZ3JlYXRlciB0aGFuIHNjYWxlQnlEaXN0YW5jZS5uZWFyLlwiXG4gICAgICApO1xuICAgIH1cbiAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICBzY2FsZUJ5RGlzdGFuY2UgPSBOZWFyRmFyU2NhbGFyLmNsb25lKHNjYWxlQnlEaXN0YW5jZSk7XG4gIH1cbiAgaWYgKGRlZmluZWQoZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKSkge1xuICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgaWYgKGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5mYXIgPD0gZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLm5lYXIpIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgXCJkaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZmFyIG11c3QgYmUgZ3JlYXRlciB0aGFuIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5uZWFyLlwiXG4gICAgICApO1xuICAgIH1cbiAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24uY2xvbmUoXG4gICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICApO1xuICB9XG5cbiAgdGhpcy5fc2hvdyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnNob3csIHRydWUpO1xuICB0aGlzLl9wb3NpdGlvbiA9IENhcnRlc2lhbjMuY2xvbmUoXG4gICAgZGVmYXVsdFZhbHVlKG9wdGlvbnMucG9zaXRpb24sIENhcnRlc2lhbjMuWkVSTylcbiAgKTtcbiAgdGhpcy5fYWN0dWFsUG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKHRoaXMuX3Bvc2l0aW9uKTsgLy8gRm9yIGNvbHVtYnVzIHZpZXcgYW5kIDJEXG4gIHRoaXMuX2NvbG9yID0gQ29sb3IuY2xvbmUoZGVmYXVsdFZhbHVlKG9wdGlvbnMuY29sb3IsIENvbG9yLldISVRFKSk7XG4gIHRoaXMuX291dGxpbmVDb2xvciA9IENvbG9yLmNsb25lKFxuICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLm91dGxpbmVDb2xvciwgQ29sb3IuVFJBTlNQQVJFTlQpXG4gICk7XG4gIHRoaXMuX291dGxpbmVXaWR0aCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLm91dGxpbmVXaWR0aCwgMC4wKTtcbiAgdGhpcy5fcGl4ZWxTaXplID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMucGl4ZWxTaXplLCAxMC4wKTtcbiAgdGhpcy5fc2NhbGVCeURpc3RhbmNlID0gc2NhbGVCeURpc3RhbmNlO1xuICB0aGlzLl90cmFuc2x1Y2VuY3lCeURpc3RhbmNlID0gdHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcbiAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xuICB0aGlzLl9kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UsXG4gICAgMC4wXG4gICk7XG4gIHRoaXMuX2lkID0gb3B0aW9ucy5pZDtcbiAgdGhpcy5fY29sbGVjdGlvbiA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNvbGxlY3Rpb24sIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbik7XG5cbiAgdGhpcy5fY2x1c3RlclNob3cgPSB0cnVlO1xuXG4gIHRoaXMuX3BpY2tJZCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uID0gcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uO1xuICB0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuICB0aGlzLl9pbmRleCA9IC0xOyAvL1VzZWQgb25seSBieSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb25cbn1cblxudmFyIFNIT1dfSU5ERVggPSAoUG9pbnRQcmltaXRpdmUuU0hPV19JTkRFWCA9IDApO1xudmFyIFBPU0lUSU9OX0lOREVYID0gKFBvaW50UHJpbWl0aXZlLlBPU0lUSU9OX0lOREVYID0gMSk7XG52YXIgQ09MT1JfSU5ERVggPSAoUG9pbnRQcmltaXRpdmUuQ09MT1JfSU5ERVggPSAyKTtcbnZhciBPVVRMSU5FX0NPTE9SX0lOREVYID0gKFBvaW50UHJpbWl0aXZlLk9VVExJTkVfQ09MT1JfSU5ERVggPSAzKTtcbnZhciBPVVRMSU5FX1dJRFRIX0lOREVYID0gKFBvaW50UHJpbWl0aXZlLk9VVExJTkVfV0lEVEhfSU5ERVggPSA0KTtcbnZhciBQSVhFTF9TSVpFX0lOREVYID0gKFBvaW50UHJpbWl0aXZlLlBJWEVMX1NJWkVfSU5ERVggPSA1KTtcbnZhciBTQ0FMRV9CWV9ESVNUQU5DRV9JTkRFWCA9IChQb2ludFByaW1pdGl2ZS5TQ0FMRV9CWV9ESVNUQU5DRV9JTkRFWCA9IDYpO1xudmFyIFRSQU5TTFVDRU5DWV9CWV9ESVNUQU5DRV9JTkRFWCA9IChQb2ludFByaW1pdGl2ZS5UUkFOU0xVQ0VOQ1lfQllfRElTVEFOQ0VfSU5ERVggPSA3KTtcbnZhciBESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTl9JTkRFWCA9IChQb2ludFByaW1pdGl2ZS5ESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTl9JTkRFWCA9IDgpO1xudmFyIERJU0FCTEVfREVQVEhfRElTVEFOQ0VfSU5ERVggPSAoUG9pbnRQcmltaXRpdmUuRElTQUJMRV9ERVBUSF9ESVNUQU5DRV9JTkRFWCA9IDkpO1xuUG9pbnRQcmltaXRpdmUuTlVNQkVSX09GX1BST1BFUlRJRVMgPSAxMDtcblxuZnVuY3Rpb24gbWFrZURpcnR5KHBvaW50UHJpbWl0aXZlLCBwcm9wZXJ0eUNoYW5nZWQpIHtcbiAgdmFyIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiA9IHBvaW50UHJpbWl0aXZlLl9wb2ludFByaW1pdGl2ZUNvbGxlY3Rpb247XG4gIGlmIChkZWZpbmVkKHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbikpIHtcbiAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX3VwZGF0ZVBvaW50UHJpbWl0aXZlKFxuICAgICAgcG9pbnRQcmltaXRpdmUsXG4gICAgICBwcm9wZXJ0eUNoYW5nZWRcbiAgICApO1xuICAgIHBvaW50UHJpbWl0aXZlLl9kaXJ0eSA9IHRydWU7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUG9pbnRQcmltaXRpdmUucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgcG9pbnQgd2lsbCBiZSBzaG93bi4gIFVzZSB0aGlzIHRvIGhpZGUgb3Igc2hvdyBhIHBvaW50LCBpbnN0ZWFkXG4gICAqIG9mIHJlbW92aW5nIGl0IGFuZCByZS1hZGRpbmcgaXQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBtZW1iZXJvZiBQb2ludFByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBzaG93OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvdztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgaWYgKHRoaXMuX3Nob3cgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3Nob3cgPSB2YWx1ZTtcbiAgICAgICAgbWFrZURpcnR5KHRoaXMsIFNIT1dfSU5ERVgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgQ2FydGVzaWFuIHBvc2l0aW9uIG9mIHRoaXMgcG9pbnQuXG4gICAqIEBtZW1iZXJvZiBQb2ludFByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0NhcnRlc2lhbjN9XG4gICAqL1xuICBwb3NpdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1ZylcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uO1xuICAgICAgaWYgKCFDYXJ0ZXNpYW4zLmVxdWFscyhwb3NpdGlvbiwgdmFsdWUpKSB7XG4gICAgICAgIENhcnRlc2lhbjMuY2xvbmUodmFsdWUsIHBvc2l0aW9uKTtcbiAgICAgICAgQ2FydGVzaWFuMy5jbG9uZSh2YWx1ZSwgdGhpcy5fYWN0dWFsUG9zaXRpb24pO1xuXG4gICAgICAgIG1ha2VEaXJ0eSh0aGlzLCBQT1NJVElPTl9JTkRFWCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIG5lYXIgYW5kIGZhciBzY2FsaW5nIHByb3BlcnRpZXMgb2YgYSBwb2ludCBiYXNlZCBvbiB0aGUgcG9pbnQncyBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEuXG4gICAqIEEgcG9pbnQncyBzY2FsZSB3aWxsIGludGVycG9sYXRlIGJldHdlZW4gdGhlIHtAbGluayBOZWFyRmFyU2NhbGFyI25lYXJWYWx1ZX0gYW5kXG4gICAqIHtAbGluayBOZWFyRmFyU2NhbGFyI2ZhclZhbHVlfSB3aGlsZSB0aGUgY2FtZXJhIGRpc3RhbmNlIGZhbGxzIHdpdGhpbiB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kc1xuICAgKiBvZiB0aGUgc3BlY2lmaWVkIHtAbGluayBOZWFyRmFyU2NhbGFyI25lYXJ9IGFuZCB7QGxpbmsgTmVhckZhclNjYWxhciNmYXJ9LlxuICAgKiBPdXRzaWRlIG9mIHRoZXNlIHJhbmdlcyB0aGUgcG9pbnQncyBzY2FsZSByZW1haW5zIGNsYW1wZWQgdG8gdGhlIG5lYXJlc3QgYm91bmQuICBUaGlzIHNjYWxlXG4gICAqIG11bHRpcGxpZXMgdGhlIHBpeGVsU2l6ZSBhbmQgb3V0bGluZVdpZHRoIHRvIGFmZmVjdCB0aGUgdG90YWwgc2l6ZSBvZiB0aGUgcG9pbnQuICBJZiB1bmRlZmluZWQsXG4gICAqIHNjYWxlQnlEaXN0YW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICAgKiBAbWVtYmVyb2YgUG9pbnRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOZWFyRmFyU2NhbGFyfVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBFeGFtcGxlIDEuXG4gICAqIC8vIFNldCBhIHBvaW50UHJpbWl0aXZlJ3Mgc2NhbGVCeURpc3RhbmNlIHRvIHNjYWxlIHRvIDE1IHdoZW4gdGhlXG4gICAqIC8vIGNhbWVyYSBpcyAxNTAwIG1ldGVycyBmcm9tIHRoZSBwb2ludFByaW1pdGl2ZSBhbmQgZGlzYXBwZWFyIGFzXG4gICAqIC8vIHRoZSBjYW1lcmEgZGlzdGFuY2UgYXBwcm9hY2hlcyA4LjBlNiBtZXRlcnMuXG4gICAqIHAuc2NhbGVCeURpc3RhbmNlID0gbmV3IENlc2l1bS5OZWFyRmFyU2NhbGFyKDEuNWUyLCAxNSwgOC4wZTYsIDAuMCk7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIEV4YW1wbGUgMi5cbiAgICogLy8gZGlzYWJsZSBzY2FsaW5nIGJ5IGRpc3RhbmNlXG4gICAqIHAuc2NhbGVCeURpc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgKi9cbiAgc2NhbGVCeURpc3RhbmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NhbGVCeURpc3RhbmNlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUuZmFyIDw9IHZhbHVlLm5lYXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwiZmFyIGRpc3RhbmNlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG5lYXIgZGlzdGFuY2UuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICB2YXIgc2NhbGVCeURpc3RhbmNlID0gdGhpcy5fc2NhbGVCeURpc3RhbmNlO1xuICAgICAgaWYgKCFOZWFyRmFyU2NhbGFyLmVxdWFscyhzY2FsZUJ5RGlzdGFuY2UsIHZhbHVlKSkge1xuICAgICAgICB0aGlzLl9zY2FsZUJ5RGlzdGFuY2UgPSBOZWFyRmFyU2NhbGFyLmNsb25lKHZhbHVlLCBzY2FsZUJ5RGlzdGFuY2UpO1xuICAgICAgICBtYWtlRGlydHkodGhpcywgU0NBTEVfQllfRElTVEFOQ0VfSU5ERVgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyBuZWFyIGFuZCBmYXIgdHJhbnNsdWNlbmN5IHByb3BlcnRpZXMgb2YgYSBwb2ludCBiYXNlZCBvbiB0aGUgcG9pbnQncyBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEuXG4gICAqIEEgcG9pbnQncyB0cmFuc2x1Y2VuY3kgd2lsbCBpbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZSB7QGxpbmsgTmVhckZhclNjYWxhciNuZWFyVmFsdWV9IGFuZFxuICAgKiB7QGxpbmsgTmVhckZhclNjYWxhciNmYXJWYWx1ZX0gd2hpbGUgdGhlIGNhbWVyYSBkaXN0YW5jZSBmYWxscyB3aXRoaW4gdGhlIGxvd2VyIGFuZCB1cHBlciBib3VuZHNcbiAgICogb2YgdGhlIHNwZWNpZmllZCB7QGxpbmsgTmVhckZhclNjYWxhciNuZWFyfSBhbmQge0BsaW5rIE5lYXJGYXJTY2FsYXIjZmFyfS5cbiAgICogT3V0c2lkZSBvZiB0aGVzZSByYW5nZXMgdGhlIHBvaW50J3MgdHJhbnNsdWNlbmN5IHJlbWFpbnMgY2xhbXBlZCB0byB0aGUgbmVhcmVzdCBib3VuZC4gIElmIHVuZGVmaW5lZCxcbiAgICogdHJhbnNsdWNlbmN5QnlEaXN0YW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICAgKiBAbWVtYmVyb2YgUG9pbnRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOZWFyRmFyU2NhbGFyfVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBFeGFtcGxlIDEuXG4gICAqIC8vIFNldCBhIHBvaW50J3MgdHJhbnNsdWNlbmN5IHRvIDEuMCB3aGVuIHRoZVxuICAgKiAvLyBjYW1lcmEgaXMgMTUwMCBtZXRlcnMgZnJvbSB0aGUgcG9pbnQgYW5kIGRpc2FwcGVhciBhc1xuICAgKiAvLyB0aGUgY2FtZXJhIGRpc3RhbmNlIGFwcHJvYWNoZXMgOC4wZTYgbWV0ZXJzLlxuICAgKiBwLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBuZXcgQ2VzaXVtLk5lYXJGYXJTY2FsYXIoMS41ZTIsIDEuMCwgOC4wZTYsIDAuMCk7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIEV4YW1wbGUgMi5cbiAgICogLy8gZGlzYWJsZSB0cmFuc2x1Y2VuY3kgYnkgZGlzdGFuY2VcbiAgICogcC50cmFuc2x1Y2VuY3lCeURpc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgKi9cbiAgdHJhbnNsdWNlbmN5QnlEaXN0YW5jZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zbHVjZW5jeUJ5RGlzdGFuY2U7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZS5mYXIgPD0gdmFsdWUubmVhcikge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJmYXIgZGlzdGFuY2UgbXVzdCBiZSBncmVhdGVyIHRoYW4gbmVhciBkaXN0YW5jZS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHZhciB0cmFuc2x1Y2VuY3lCeURpc3RhbmNlID0gdGhpcy5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcbiAgICAgIGlmICghTmVhckZhclNjYWxhci5lcXVhbHModHJhbnNsdWNlbmN5QnlEaXN0YW5jZSwgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX3RyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBOZWFyRmFyU2NhbGFyLmNsb25lKFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2VcbiAgICAgICAgKTtcbiAgICAgICAgbWFrZURpcnR5KHRoaXMsIFRSQU5TTFVDRU5DWV9CWV9ESVNUQU5DRV9JTkRFWCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBpbm5lciBzaXplIG9mIHRoZSBwb2ludCBpbiBwaXhlbHMuXG4gICAqIEBtZW1iZXJvZiBQb2ludFByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHBpeGVsU2l6ZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3BpeGVsU2l6ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgaWYgKHRoaXMuX3BpeGVsU2l6ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcGl4ZWxTaXplID0gdmFsdWU7XG4gICAgICAgIG1ha2VEaXJ0eSh0aGlzLCBQSVhFTF9TSVpFX0lOREVYKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGlubmVyIGNvbG9yIG9mIHRoZSBwb2ludC5cbiAgICogVGhlIHJlZCwgZ3JlZW4sIGJsdWUsIGFuZCBhbHBoYSB2YWx1ZXMgYXJlIGluZGljYXRlZCBieSA8Y29kZT52YWx1ZTwvY29kZT4ncyA8Y29kZT5yZWQ8L2NvZGU+LCA8Y29kZT5ncmVlbjwvY29kZT4sXG4gICAqIDxjb2RlPmJsdWU8L2NvZGU+LCBhbmQgPGNvZGU+YWxwaGE8L2NvZGU+IHByb3BlcnRpZXMgYXMgc2hvd24gaW4gRXhhbXBsZSAxLiAgVGhlc2UgY29tcG9uZW50cyByYW5nZSBmcm9tIDxjb2RlPjAuMDwvY29kZT5cbiAgICogKG5vIGludGVuc2l0eSkgdG8gPGNvZGU+MS4wPC9jb2RlPiAoZnVsbCBpbnRlbnNpdHkpLlxuICAgKiBAbWVtYmVyb2YgUG9pbnRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtDb2xvcn1cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gRXhhbXBsZSAxLiBBc3NpZ24geWVsbG93LlxuICAgKiBwLmNvbG9yID0gQ2VzaXVtLkNvbG9yLllFTExPVztcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gRXhhbXBsZSAyLiBNYWtlIGEgcG9pbnRQcmltaXRpdmUgNTAlIHRyYW5zbHVjZW50LlxuICAgKiBwLmNvbG9yID0gbmV3IENlc2l1bS5Db2xvcigxLjAsIDEuMCwgMS4wLCAwLjUpO1xuICAgKi9cbiAgY29sb3I6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb2xvcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgdmFyIGNvbG9yID0gdGhpcy5fY29sb3I7XG4gICAgICBpZiAoIUNvbG9yLmVxdWFscyhjb2xvciwgdmFsdWUpKSB7XG4gICAgICAgIENvbG9yLmNsb25lKHZhbHVlLCBjb2xvcik7XG4gICAgICAgIG1ha2VEaXJ0eSh0aGlzLCBDT0xPUl9JTkRFWCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBvdXRsaW5lIGNvbG9yIG9mIHRoZSBwb2ludC5cbiAgICogQG1lbWJlcm9mIFBvaW50UHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q29sb3J9XG4gICAqL1xuICBvdXRsaW5lQ29sb3I6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9vdXRsaW5lQ29sb3I7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHZhciBvdXRsaW5lQ29sb3IgPSB0aGlzLl9vdXRsaW5lQ29sb3I7XG4gICAgICBpZiAoIUNvbG9yLmVxdWFscyhvdXRsaW5lQ29sb3IsIHZhbHVlKSkge1xuICAgICAgICBDb2xvci5jbG9uZSh2YWx1ZSwgb3V0bGluZUNvbG9yKTtcbiAgICAgICAgbWFrZURpcnR5KHRoaXMsIE9VVExJTkVfQ09MT1JfSU5ERVgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgb3V0bGluZSB3aWR0aCBpbiBwaXhlbHMuICBUaGlzIHdpZHRoIGFkZHMgdG8gcGl4ZWxTaXplLFxuICAgKiBpbmNyZWFzaW5nIHRoZSB0b3RhbCBzaXplIG9mIHRoZSBwb2ludC5cbiAgICogQG1lbWJlcm9mIFBvaW50UHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgb3V0bGluZVdpZHRoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb3V0bGluZVdpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICBpZiAodGhpcy5fb3V0bGluZVdpZHRoICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9vdXRsaW5lV2lkdGggPSB2YWx1ZTtcbiAgICAgICAgbWFrZURpcnR5KHRoaXMsIE9VVExJTkVfV0lEVEhfSU5ERVgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgY29uZGl0aW9uIHNwZWNpZnlpbmcgYXQgd2hhdCBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgdGhhdCB0aGlzIHBvaW50IHdpbGwgYmUgZGlzcGxheWVkLlxuICAgKiBAbWVtYmVyb2YgUG9pbnRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtEaXN0YW5jZURpc3BsYXlDb25kaXRpb259XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUuZmFyIDw9IHZhbHVlLm5lYXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiZmFyIG11c3QgYmUgZ3JlYXRlciB0aGFuIG5lYXJcIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIGlmIChcbiAgICAgICAgIURpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5lcXVhbHModGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLCB2YWx1ZSlcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24uY2xvbmUoXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uXG4gICAgICAgICk7XG4gICAgICAgIG1ha2VEaXJ0eSh0aGlzLCBESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTl9JTkRFWCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgYXQgd2hpY2ggdG8gZGlzYWJsZSB0aGUgZGVwdGggdGVzdCB0bywgZm9yIGV4YW1wbGUsIHByZXZlbnQgY2xpcHBpbmcgYWdhaW5zdCB0ZXJyYWluLlxuICAgKiBXaGVuIHNldCB0byB6ZXJvLCB0aGUgZGVwdGggdGVzdCBpcyBhbHdheXMgYXBwbGllZC4gV2hlbiBzZXQgdG8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCB0aGUgZGVwdGggdGVzdCBpcyBuZXZlciBhcHBsaWVkLlxuICAgKiBAbWVtYmVyb2YgUG9pbnRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDAuMFxuICAgKi9cbiAgZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl9kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgIT09IHZhbHVlKSB7XG4gICAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkgfHwgdmFsdWUgPCAwLjApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgICBcImRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAwLjAuXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICAgICAgICB0aGlzLl9kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSB2YWx1ZTtcbiAgICAgICAgbWFrZURpcnR5KHRoaXMsIERJU0FCTEVfREVQVEhfRElTVEFOQ0VfSU5ERVgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgdXNlci1kZWZpbmVkIHZhbHVlIHJldHVybmVkIHdoZW4gdGhlIHBvaW50IGlzIHBpY2tlZC5cbiAgICogQG1lbWJlcm9mIFBvaW50UHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Kn1cbiAgICovXG4gIGlkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5faWQgPSB2YWx1ZTtcbiAgICAgIGlmIChkZWZpbmVkKHRoaXMuX3BpY2tJZCkpIHtcbiAgICAgICAgdGhpcy5fcGlja0lkLm9iamVjdC5pZCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwaWNrSWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9waWNrSWQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0aGlzIHBvaW50IHdpbGwgYmUgc2hvd24gb3IgaGlkZGVuIGJlY2F1c2UgaXQgd2FzIGNsdXN0ZXJlZC5cbiAgICogQG1lbWJlcm9mIFBvaW50UHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNsdXN0ZXJTaG93OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2x1c3RlclNob3c7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuX2NsdXN0ZXJTaG93ICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jbHVzdGVyU2hvdyA9IHZhbHVlO1xuICAgICAgICBtYWtlRGlydHkodGhpcywgU0hPV19JTkRFWCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5Qb2ludFByaW1pdGl2ZS5wcm90b3R5cGUuZ2V0UGlja0lkID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3BpY2tJZCkpIHtcbiAgICB0aGlzLl9waWNrSWQgPSBjb250ZXh0LmNyZWF0ZVBpY2tJZCh7XG4gICAgICBwcmltaXRpdmU6IHRoaXMsXG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLl9jb2xsZWN0aW9uLFxuICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuX3BpY2tJZDtcbn07XG5cblBvaW50UHJpbWl0aXZlLnByb3RvdHlwZS5fZ2V0QWN0dWFsUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9hY3R1YWxQb3NpdGlvbjtcbn07XG5cblBvaW50UHJpbWl0aXZlLnByb3RvdHlwZS5fc2V0QWN0dWFsUG9zaXRpb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgQ2FydGVzaWFuMy5jbG9uZSh2YWx1ZSwgdGhpcy5fYWN0dWFsUG9zaXRpb24pO1xuICBtYWtlRGlydHkodGhpcywgUE9TSVRJT05fSU5ERVgpO1xufTtcblxudmFyIHRlbXBDYXJ0ZXNpYW4zID0gbmV3IENhcnRlc2lhbjQoKTtcblBvaW50UHJpbWl0aXZlLl9jb21wdXRlQWN0dWFsUG9zaXRpb24gPSBmdW5jdGlvbiAoXG4gIHBvc2l0aW9uLFxuICBmcmFtZVN0YXRlLFxuICBtb2RlbE1hdHJpeFxuKSB7XG4gIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG5cbiAgTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQobW9kZWxNYXRyaXgsIHBvc2l0aW9uLCB0ZW1wQ2FydGVzaWFuMyk7XG4gIHJldHVybiBTY2VuZVRyYW5zZm9ybXMuY29tcHV0ZUFjdHVhbFdnczg0UG9zaXRpb24oZnJhbWVTdGF0ZSwgdGVtcENhcnRlc2lhbjMpO1xufTtcblxudmFyIHNjcmF0Y2hDYXJ0ZXNpYW40ID0gbmV3IENhcnRlc2lhbjQoKTtcblxuLy8gVGhpcyBmdW5jdGlvbiBpcyBiYXNpY2FsbHkgYSBzdHJpcHBlZC1kb3duIEphdmFTY3JpcHQgdmVyc2lvbiBvZiBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb25WUy5nbHNsXG5Qb2ludFByaW1pdGl2ZS5fY29tcHV0ZVNjcmVlblNwYWNlUG9zaXRpb24gPSBmdW5jdGlvbiAoXG4gIG1vZGVsTWF0cml4LFxuICBwb3NpdGlvbixcbiAgc2NlbmUsXG4gIHJlc3VsdFxuKSB7XG4gIC8vIE1vZGVsIHRvIHdvcmxkIGNvb3JkaW5hdGVzXG4gIHZhciBwb3NpdGlvbldvcmxkID0gTWF0cml4NC5tdWx0aXBseUJ5VmVjdG9yKFxuICAgIG1vZGVsTWF0cml4LFxuICAgIENhcnRlc2lhbjQuZnJvbUVsZW1lbnRzKFxuICAgICAgcG9zaXRpb24ueCxcbiAgICAgIHBvc2l0aW9uLnksXG4gICAgICBwb3NpdGlvbi56LFxuICAgICAgMSxcbiAgICAgIHNjcmF0Y2hDYXJ0ZXNpYW40XG4gICAgKSxcbiAgICBzY3JhdGNoQ2FydGVzaWFuNFxuICApO1xuICB2YXIgcG9zaXRpb25XQyA9IFNjZW5lVHJhbnNmb3Jtcy53Z3M4NFRvV2luZG93Q29vcmRpbmF0ZXMoXG4gICAgc2NlbmUsXG4gICAgcG9zaXRpb25Xb3JsZCxcbiAgICByZXN1bHRcbiAgKTtcbiAgcmV0dXJuIHBvc2l0aW9uV0M7XG59O1xuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBzY3JlZW4tc3BhY2UgcG9zaXRpb24gb2YgdGhlIHBvaW50J3Mgb3JpZ2luLlxuICogVGhlIHNjcmVlbiBzcGFjZSBvcmlnaW4gaXMgdGhlIHRvcCwgbGVmdCBjb3JuZXIgb2YgdGhlIGNhbnZhczsgPGNvZGU+eDwvY29kZT4gaW5jcmVhc2VzIGZyb21cbiAqIGxlZnQgdG8gcmlnaHQsIGFuZCA8Y29kZT55PC9jb2RlPiBpbmNyZWFzZXMgZnJvbSB0b3AgdG8gYm90dG9tLlxuICpcbiAqIEBwYXJhbSB7U2NlbmV9IHNjZW5lIFRoZSBzY2VuZS5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuMn0gW3Jlc3VsdF0gVGhlIG9iamVjdCBvbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuMn0gVGhlIHNjcmVlbi1zcGFjZSBwb3NpdGlvbiBvZiB0aGUgcG9pbnQuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFBvaW50UHJpbWl0aXZlIG11c3QgYmUgaW4gYSBjb2xsZWN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zb2xlLmxvZyhwLmNvbXB1dGVTY3JlZW5TcGFjZVBvc2l0aW9uKHNjZW5lKS50b1N0cmluZygpKTtcbiAqL1xuUG9pbnRQcmltaXRpdmUucHJvdG90eXBlLmNvbXB1dGVTY3JlZW5TcGFjZVBvc2l0aW9uID0gZnVuY3Rpb24gKHNjZW5lLCByZXN1bHQpIHtcbiAgdmFyIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiA9IHRoaXMuX3BvaW50UHJpbWl0aXZlQ29sbGVjdGlvbjtcbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgQ2FydGVzaWFuMigpO1xuICB9XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJQb2ludFByaW1pdGl2ZSBtdXN0IGJlIGluIGEgY29sbGVjdGlvbi5cIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKHNjZW5lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInNjZW5lIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgbW9kZWxNYXRyaXggPSBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24ubW9kZWxNYXRyaXg7XG4gIHZhciB3aW5kb3dDb29yZGluYXRlcyA9IFBvaW50UHJpbWl0aXZlLl9jb21wdXRlU2NyZWVuU3BhY2VQb3NpdGlvbihcbiAgICBtb2RlbE1hdHJpeCxcbiAgICB0aGlzLl9hY3R1YWxQb3NpdGlvbixcbiAgICBzY2VuZSxcbiAgICByZXN1bHRcbiAgKTtcbiAgaWYgKCFkZWZpbmVkKHdpbmRvd0Nvb3JkaW5hdGVzKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB3aW5kb3dDb29yZGluYXRlcy55ID0gc2NlbmUuY2FudmFzLmNsaWVudEhlaWdodCAtIHdpbmRvd0Nvb3JkaW5hdGVzLnk7XG4gIHJldHVybiB3aW5kb3dDb29yZGluYXRlcztcbn07XG5cbi8qKlxuICogR2V0cyBhIHBvaW50J3Mgc2NyZWVuIHNwYWNlIGJvdW5kaW5nIGJveCBjZW50ZXJlZCBhcm91bmQgc2NyZWVuU3BhY2VQb3NpdGlvbi5cbiAqIEBwYXJhbSB7UG9pbnRQcmltaXRpdmV9IHBvaW50IFRoZSBwb2ludCB0byBnZXQgdGhlIHNjcmVlbiBzcGFjZSBib3VuZGluZyBib3ggZm9yLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4yfSBzY3JlZW5TcGFjZVBvc2l0aW9uIFRoZSBzY3JlZW4gc3BhY2UgY2VudGVyIG9mIHRoZSBsYWJlbC5cbiAqIEBwYXJhbSB7Qm91bmRpbmdSZWN0YW5nbGV9IFtyZXN1bHRdIFRoZSBvYmplY3Qgb250byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge0JvdW5kaW5nUmVjdGFuZ2xlfSBUaGUgc2NyZWVuIHNwYWNlIGJvdW5kaW5nIGJveC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5Qb2ludFByaW1pdGl2ZS5nZXRTY3JlZW5TcGFjZUJvdW5kaW5nQm94ID0gZnVuY3Rpb24gKFxuICBwb2ludCxcbiAgc2NyZWVuU3BhY2VQb3NpdGlvbixcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIHNpemUgPSBwb2ludC5waXhlbFNpemU7XG4gIHZhciBoYWxmU2l6ZSA9IHNpemUgKiAwLjU7XG5cbiAgdmFyIHggPSBzY3JlZW5TcGFjZVBvc2l0aW9uLnggLSBoYWxmU2l6ZTtcbiAgdmFyIHkgPSBzY3JlZW5TcGFjZVBvc2l0aW9uLnkgLSBoYWxmU2l6ZTtcbiAgdmFyIHdpZHRoID0gc2l6ZTtcbiAgdmFyIGhlaWdodCA9IHNpemU7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgQm91bmRpbmdSZWN0YW5nbGUoKTtcbiAgfVxuXG4gIHJlc3VsdC54ID0geDtcbiAgcmVzdWx0LnkgPSB5O1xuICByZXN1bHQud2lkdGggPSB3aWR0aDtcbiAgcmVzdWx0LmhlaWdodCA9IGhlaWdodDtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoaXMgcG9pbnQgZXF1YWxzIGFub3RoZXIgcG9pbnQuICBQb2ludHMgYXJlIGVxdWFsIGlmIGFsbCB0aGVpciBwcm9wZXJ0aWVzXG4gKiBhcmUgZXF1YWwuICBQb2ludHMgaW4gZGlmZmVyZW50IGNvbGxlY3Rpb25zIGNhbiBiZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge1BvaW50UHJpbWl0aXZlfSBvdGhlciBUaGUgcG9pbnQgdG8gY29tcGFyZSBmb3IgZXF1YWxpdHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhlIHBvaW50cyBhcmUgZXF1YWw7IG90aGVyd2lzZSwgPGNvZGU+ZmFsc2U8L2NvZGU+LlxuICovXG5Qb2ludFByaW1pdGl2ZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIHJldHVybiAoXG4gICAgdGhpcyA9PT0gb3RoZXIgfHxcbiAgICAoZGVmaW5lZChvdGhlcikgJiZcbiAgICAgIHRoaXMuX2lkID09PSBvdGhlci5faWQgJiZcbiAgICAgIENhcnRlc2lhbjMuZXF1YWxzKHRoaXMuX3Bvc2l0aW9uLCBvdGhlci5fcG9zaXRpb24pICYmXG4gICAgICBDb2xvci5lcXVhbHModGhpcy5fY29sb3IsIG90aGVyLl9jb2xvcikgJiZcbiAgICAgIHRoaXMuX3BpeGVsU2l6ZSA9PT0gb3RoZXIuX3BpeGVsU2l6ZSAmJlxuICAgICAgdGhpcy5fb3V0bGluZVdpZHRoID09PSBvdGhlci5fb3V0bGluZVdpZHRoICYmXG4gICAgICB0aGlzLl9zaG93ID09PSBvdGhlci5fc2hvdyAmJlxuICAgICAgQ29sb3IuZXF1YWxzKHRoaXMuX291dGxpbmVDb2xvciwgb3RoZXIuX291dGxpbmVDb2xvcikgJiZcbiAgICAgIE5lYXJGYXJTY2FsYXIuZXF1YWxzKHRoaXMuX3NjYWxlQnlEaXN0YW5jZSwgb3RoZXIuX3NjYWxlQnlEaXN0YW5jZSkgJiZcbiAgICAgIE5lYXJGYXJTY2FsYXIuZXF1YWxzKFxuICAgICAgICB0aGlzLl90cmFuc2x1Y2VuY3lCeURpc3RhbmNlLFxuICAgICAgICBvdGhlci5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZVxuICAgICAgKSAmJlxuICAgICAgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmVxdWFscyhcbiAgICAgICAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICBvdGhlci5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uXG4gICAgICApICYmXG4gICAgICB0aGlzLl9kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPT09IG90aGVyLl9kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UpXG4gICk7XG59O1xuXG5Qb2ludFByaW1pdGl2ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3BpY2tJZCA9IHRoaXMuX3BpY2tJZCAmJiB0aGlzLl9waWNrSWQuZGVzdHJveSgpO1xuICB0aGlzLl9wb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24gPSB1bmRlZmluZWQ7XG59O1xuZXhwb3J0IGRlZmF1bHQgUG9pbnRQcmltaXRpdmU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///36514\n')},9462:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12572);\n/* harmony import */ var _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(74938);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(72248);\n/* harmony import */ var _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97264);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(52200);\n/* harmony import */ var _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(58597);\n/* harmony import */ var _Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20521);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(60072);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(8379);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(53642);\n/* harmony import */ var _Renderer_VertexArrayFacade_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(52851);\n/* harmony import */ var _Shaders_PointPrimitiveCollectionFS_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(12049);\n/* harmony import */ var _Shaders_PointPrimitiveCollectionVS_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(16586);\n/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(13633);\n/* harmony import */ var _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(27384);\n/* harmony import */ var _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(36514);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(89917);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar SHOW_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].SHOW_INDEX */ .Z.SHOW_INDEX;\nvar POSITION_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].POSITION_INDEX */ .Z.POSITION_INDEX;\nvar COLOR_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].COLOR_INDEX */ .Z.COLOR_INDEX;\nvar OUTLINE_COLOR_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].OUTLINE_COLOR_INDEX */ .Z.OUTLINE_COLOR_INDEX;\nvar OUTLINE_WIDTH_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].OUTLINE_WIDTH_INDEX */ .Z.OUTLINE_WIDTH_INDEX;\nvar PIXEL_SIZE_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].PIXEL_SIZE_INDEX */ .Z.PIXEL_SIZE_INDEX;\nvar SCALE_BY_DISTANCE_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].SCALE_BY_DISTANCE_INDEX */ .Z.SCALE_BY_DISTANCE_INDEX;\nvar TRANSLUCENCY_BY_DISTANCE_INDEX =\n  _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].TRANSLUCENCY_BY_DISTANCE_INDEX */ .Z.TRANSLUCENCY_BY_DISTANCE_INDEX;\nvar DISTANCE_DISPLAY_CONDITION_INDEX =\n  _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].DISTANCE_DISPLAY_CONDITION_INDEX */ .Z.DISTANCE_DISPLAY_CONDITION_INDEX;\nvar DISABLE_DEPTH_DISTANCE_INDEX = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].DISABLE_DEPTH_DISTANCE_INDEX */ .Z.DISABLE_DEPTH_DISTANCE_INDEX;\nvar NUMBER_OF_PROPERTIES = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].NUMBER_OF_PROPERTIES */ .Z.NUMBER_OF_PROPERTIES;\n\nvar attributeLocations = {\n  positionHighAndSize: 0,\n  positionLowAndOutline: 1,\n  compressedAttribute0: 2, // color, outlineColor, pick color\n  compressedAttribute1: 3, // show, translucency by distance, some free space\n  scaleByDistance: 4,\n  distanceDisplayConditionAndDisableDepth: 5,\n};\n\n/**\n * A renderable collection of points.\n * <br /><br />\n * Points are added and removed from the collection using {@link PointPrimitiveCollection#add}\n * and {@link PointPrimitiveCollection#remove}.\n *\n * @alias PointPrimitiveCollection\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Matrix4} [options.modelMatrix=Matrix4.IDENTITY] The 4x4 transformation matrix that transforms each point from model to world coordinates.\n * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Determines if this primitive\'s commands\' bounding spheres are shown.\n * @param {BlendOption} [options.blendOption=BlendOption.OPAQUE_AND_TRANSLUCENT] The point blending option. The default\n * is used for rendering both opaque and translucent points. However, if either all of the points are completely opaque or all are completely translucent,\n * setting the technique to BlendOption.OPAQUE or BlendOption.TRANSLUCENT can improve performance by up to 2x.\n * @param {Boolean} [options.show=true] Determines if the primitives in the collection will be shown.\n *\n * @performance For best performance, prefer a few collections, each with many points, to\n * many collections with only a few points each.  Organize collections so that points\n * with the same update frequency are in the same collection, i.e., points that do not\n * change should be in one collection; points that change every frame should be in another\n * collection; and so on.\n *\n *\n * @example\n * // Create a pointPrimitive collection with two points\n * var points = scene.primitives.add(new Cesium.PointPrimitiveCollection());\n * points.add({\n *   position : new Cesium.Cartesian3(1.0, 2.0, 3.0),\n *   color : Cesium.Color.YELLOW\n * });\n * points.add({\n *   position : new Cesium.Cartesian3(4.0, 5.0, 6.0),\n *   color : Cesium.Color.CYAN\n * });\n *\n * @see PointPrimitiveCollection#add\n * @see PointPrimitiveCollection#remove\n * @see PointPrimitive\n */\nfunction PointPrimitiveCollection(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._sp = undefined;\n  this._spTranslucent = undefined;\n  this._rsOpaque = undefined;\n  this._rsTranslucent = undefined;\n  this._vaf = undefined;\n\n  this._pointPrimitives = [];\n  this._pointPrimitivesToUpdate = [];\n  this._pointPrimitivesToUpdateIndex = 0;\n  this._pointPrimitivesRemoved = false;\n  this._createVertexArray = false;\n\n  this._shaderScaleByDistance = false;\n  this._compiledShaderScaleByDistance = false;\n\n  this._shaderTranslucencyByDistance = false;\n  this._compiledShaderTranslucencyByDistance = false;\n\n  this._shaderDistanceDisplayCondition = false;\n  this._compiledShaderDistanceDisplayCondition = false;\n\n  this._shaderDisableDepthDistance = false;\n  this._compiledShaderDisableDepthDistance = false;\n\n  this._propertiesChanged = new Uint32Array(NUMBER_OF_PROPERTIES);\n\n  this._maxPixelSize = 1.0;\n\n  this._baseVolume = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._baseVolumeWC = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._baseVolume2D = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._boundingVolume = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._boundingVolumeDirty = false;\n\n  this._colorCommands = [];\n\n  /**\n   * Determines if primitives in this collection will be shown.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.show, true);\n\n  /**\n   * The 4x4 transformation matrix that transforms each point in this collection from model to world coordinates.\n   * When this is the identity matrix, the pointPrimitives are drawn in world coordinates, i.e., Earth\'s WGS84 coordinates.\n   * Local reference frames can be used by providing a different transformation matrix, like that returned\n   * by {@link Transforms.eastNorthUpToFixedFrame}.\n   *\n   * @type {Matrix4}\n   * @default {@link Matrix4.IDENTITY}\n   *\n   *\n   * @example\n   * var center = Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883);\n   * pointPrimitives.modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(center);\n   * pointPrimitives.add({\n   *   color : Cesium.Color.ORANGE,\n   *   position : new Cesium.Cartesian3(0.0, 0.0, 0.0) // center\n   * });\n   * pointPrimitives.add({\n   *   color : Cesium.Color.YELLOW,\n   *   position : new Cesium.Cartesian3(1000000.0, 0.0, 0.0) // east\n   * });\n   * pointPrimitives.add({\n   *   color : Cesium.Color.GREEN,\n   *   position : new Cesium.Cartesian3(0.0, 1000000.0, 0.0) // north\n   * });\n   * pointPrimitives.add({\n   *   color : Cesium.Color.CYAN,\n   *   position : new Cesium.Cartesian3(0.0, 0.0, 1000000.0) // up\n   * });\n   *\n   * @see Transforms.eastNorthUpToFixedFrame\n   */\n  this.modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.modelMatrix, _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].IDENTITY */ .Z.IDENTITY)\n  );\n  this._modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the bounding sphere for each draw command in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowBoundingVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n    options.debugShowBoundingVolume,\n    false\n  );\n\n  /**\n   * The point blending option. The default is used for rendering both opaque and translucent points.\n   * However, if either all of the points are completely opaque or all are completely translucent,\n   * setting the technique to BlendOption.OPAQUE or BlendOption.TRANSLUCENT can improve\n   * performance by up to 2x.\n   * @type {BlendOption}\n   * @default BlendOption.OPAQUE_AND_TRANSLUCENT\n   */\n  this.blendOption = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n    options.blendOption,\n    _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE_AND_TRANSLUCENT */ .Z.OPAQUE_AND_TRANSLUCENT\n  );\n  this._blendOption = undefined;\n\n  this._mode = _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D;\n  this._maxTotalPointSize = 1;\n\n  // The buffer usage for each attribute is determined based on the usage of the attribute over time.\n  this._buffersUsage = [\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // SHOW_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // POSITION_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // COLOR_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // OUTLINE_COLOR_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // OUTLINE_WIDTH_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // PIXEL_SIZE_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // SCALE_BY_DISTANCE_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // TRANSLUCENCY_BY_DISTANCE_INDEX\n    _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW, // DISTANCE_DISPLAY_CONDITION_INDEX\n  ];\n\n  var that = this;\n  this._uniforms = {\n    u_maxTotalPointSize: function () {\n      return that._maxTotalPointSize;\n    },\n  };\n}\n\nObject.defineProperties(PointPrimitiveCollection.prototype, {\n  /**\n   * Returns the number of points in this collection.  This is commonly used with\n   * {@link PointPrimitiveCollection#get} to iterate over all the points\n   * in the collection.\n   * @memberof PointPrimitiveCollection.prototype\n   * @type {Number}\n   */\n  length: {\n    get: function () {\n      removePointPrimitives(this);\n      return this._pointPrimitives.length;\n    },\n  },\n});\n\nfunction destroyPointPrimitives(pointPrimitives) {\n  var length = pointPrimitives.length;\n  for (var i = 0; i < length; ++i) {\n    if (pointPrimitives[i]) {\n      pointPrimitives[i]._destroy();\n    }\n  }\n}\n\n/**\n * Creates and adds a point with the specified initial properties to the collection.\n * The added point is returned so it can be modified or removed from the collection later.\n *\n * @param {Object}[options] A template describing the point\'s properties as shown in Example 1.\n * @returns {PointPrimitive} The point that was added to the collection.\n *\n * @performance Calling <code>add</code> is expected constant time.  However, the collection\'s vertex buffer\n * is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.  For\n * best performance, add as many pointPrimitives as possible before calling <code>update</code>.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * // Example 1:  Add a point, specifying all the default values.\n * var p = pointPrimitives.add({\n *   show : true,\n *   position : Cesium.Cartesian3.ZERO,\n *   pixelSize : 10.0,\n *   color : Cesium.Color.WHITE,\n *   outlineColor : Cesium.Color.TRANSPARENT,\n *   outlineWidth : 0.0,\n *   id : undefined\n * });\n *\n * @example\n * // Example 2:  Specify only the point\'s cartographic position.\n * var p = pointPrimitives.add({\n *   position : Cesium.Cartesian3.fromDegrees(longitude, latitude, height)\n * });\n *\n * @see PointPrimitiveCollection#remove\n * @see PointPrimitiveCollection#removeAll\n */\nPointPrimitiveCollection.prototype.add = function (options) {\n  var p = new _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z(options, this);\n  p._index = this._pointPrimitives.length;\n\n  this._pointPrimitives.push(p);\n  this._createVertexArray = true;\n\n  return p;\n};\n\n/**\n * Removes a point from the collection.\n *\n * @param {PointPrimitive} pointPrimitive The point to remove.\n * @returns {Boolean} <code>true</code> if the point was removed; <code>false</code> if the point was not found in the collection.\n *\n * @performance Calling <code>remove</code> is expected constant time.  However, the collection\'s vertex buffer\n * is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.  For\n * best performance, remove as many points as possible before calling <code>update</code>.\n * If you intend to temporarily hide a point, it is usually more efficient to call\n * {@link PointPrimitive#show} instead of removing and re-adding the point.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * var p = pointPrimitives.add(...);\n * pointPrimitives.remove(p);  // Returns true\n *\n * @see PointPrimitiveCollection#add\n * @see PointPrimitiveCollection#removeAll\n * @see PointPrimitive#show\n */\nPointPrimitiveCollection.prototype.remove = function (pointPrimitive) {\n  if (this.contains(pointPrimitive)) {\n    this._pointPrimitives[pointPrimitive._index] = null; // Removed later\n    this._pointPrimitivesRemoved = true;\n    this._createVertexArray = true;\n    pointPrimitive._destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Removes all points from the collection.\n *\n * @performance <code>O(n)</code>.  It is more efficient to remove all the points\n * from a collection and then add new ones than to create a new collection entirely.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * pointPrimitives.add(...);\n * pointPrimitives.add(...);\n * pointPrimitives.removeAll();\n *\n * @see PointPrimitiveCollection#add\n * @see PointPrimitiveCollection#remove\n */\nPointPrimitiveCollection.prototype.removeAll = function () {\n  destroyPointPrimitives(this._pointPrimitives);\n  this._pointPrimitives = [];\n  this._pointPrimitivesToUpdate = [];\n  this._pointPrimitivesToUpdateIndex = 0;\n  this._pointPrimitivesRemoved = false;\n\n  this._createVertexArray = true;\n};\n\nfunction removePointPrimitives(pointPrimitiveCollection) {\n  if (pointPrimitiveCollection._pointPrimitivesRemoved) {\n    pointPrimitiveCollection._pointPrimitivesRemoved = false;\n\n    var newPointPrimitives = [];\n    var pointPrimitives = pointPrimitiveCollection._pointPrimitives;\n    var length = pointPrimitives.length;\n    for (var i = 0, j = 0; i < length; ++i) {\n      var pointPrimitive = pointPrimitives[i];\n      if (pointPrimitive) {\n        pointPrimitive._index = j++;\n        newPointPrimitives.push(pointPrimitive);\n      }\n    }\n\n    pointPrimitiveCollection._pointPrimitives = newPointPrimitives;\n  }\n}\n\nPointPrimitiveCollection.prototype._updatePointPrimitive = function (\n  pointPrimitive,\n  propertyChanged\n) {\n  if (!pointPrimitive._dirty) {\n    this._pointPrimitivesToUpdate[\n      this._pointPrimitivesToUpdateIndex++\n    ] = pointPrimitive;\n  }\n\n  ++this._propertiesChanged[propertyChanged];\n};\n\n/**\n * Check whether this collection contains a given point.\n *\n * @param {PointPrimitive} [pointPrimitive] The point to check for.\n * @returns {Boolean} true if this collection contains the point, false otherwise.\n *\n * @see PointPrimitiveCollection#get\n */\nPointPrimitiveCollection.prototype.contains = function (pointPrimitive) {\n  return (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(pointPrimitive) && pointPrimitive._pointPrimitiveCollection === this\n  );\n};\n\n/**\n * Returns the point in the collection at the specified index.  Indices are zero-based\n * and increase as points are added.  Removing a point shifts all points after\n * it to the left, changing their indices.  This function is commonly used with\n * {@link PointPrimitiveCollection#length} to iterate over all the points\n * in the collection.\n *\n * @param {Number} index The zero-based index of the point.\n * @returns {PointPrimitive} The point at the specified index.\n *\n * @performance Expected constant time.  If points were removed from the collection and\n * {@link PointPrimitiveCollection#update} was not called, an implicit <code>O(n)</code>\n * operation is performed.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * // Toggle the show property of every point in the collection\n * var len = pointPrimitives.length;\n * for (var i = 0; i < len; ++i) {\n *   var p = pointPrimitives.get(i);\n *   p.show = !p.show;\n * }\n *\n * @see PointPrimitiveCollection#length\n */\nPointPrimitiveCollection.prototype.get = function (index) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(index)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("index is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  removePointPrimitives(this);\n  return this._pointPrimitives[index];\n};\n\nPointPrimitiveCollection.prototype.computeNewBuffersUsage = function () {\n  var buffersUsage = this._buffersUsage;\n  var usageChanged = false;\n\n  var properties = this._propertiesChanged;\n  for (var k = 0; k < NUMBER_OF_PROPERTIES; ++k) {\n    var newUsage =\n      properties[k] === 0 ? _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW : _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].STREAM_DRAW */ .Z.STREAM_DRAW;\n    usageChanged = usageChanged || buffersUsage[k] !== newUsage;\n    buffersUsage[k] = newUsage;\n  }\n\n  return usageChanged;\n};\n\nfunction createVAF(context, numberOfPointPrimitives, buffersUsage) {\n  return new _Renderer_VertexArrayFacade_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z(\n    context,\n    [\n      {\n        index: attributeLocations.positionHighAndSize,\n        componentsPerAttribute: 4,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].FLOAT */ .Z.FLOAT,\n        usage: buffersUsage[POSITION_INDEX],\n      },\n      {\n        index: attributeLocations.positionLowAndShow,\n        componentsPerAttribute: 4,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].FLOAT */ .Z.FLOAT,\n        usage: buffersUsage[POSITION_INDEX],\n      },\n      {\n        index: attributeLocations.compressedAttribute0,\n        componentsPerAttribute: 4,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].FLOAT */ .Z.FLOAT,\n        usage: buffersUsage[COLOR_INDEX],\n      },\n      {\n        index: attributeLocations.compressedAttribute1,\n        componentsPerAttribute: 4,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].FLOAT */ .Z.FLOAT,\n        usage: buffersUsage[TRANSLUCENCY_BY_DISTANCE_INDEX],\n      },\n      {\n        index: attributeLocations.scaleByDistance,\n        componentsPerAttribute: 4,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].FLOAT */ .Z.FLOAT,\n        usage: buffersUsage[SCALE_BY_DISTANCE_INDEX],\n      },\n      {\n        index: attributeLocations.distanceDisplayConditionAndDisableDepth,\n        componentsPerAttribute: 3,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].FLOAT */ .Z.FLOAT,\n        usage: buffersUsage[DISTANCE_DISPLAY_CONDITION_INDEX],\n      },\n    ],\n    numberOfPointPrimitives\n  ); // 1 vertex per pointPrimitive\n}\n\n///////////////////////////////////////////////////////////////////////////\n\n// PERFORMANCE_IDEA:  Save memory if a property is the same for all pointPrimitives, use a latched attribute state,\n// instead of storing it in a vertex buffer.\n\nvar writePositionScratch = new _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n\nfunction writePositionSizeAndOutline(\n  pointPrimitiveCollection,\n  context,\n  vafWriters,\n  pointPrimitive\n) {\n  var i = pointPrimitive._index;\n  var position = pointPrimitive._getActualPosition();\n\n  if (pointPrimitiveCollection._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].expand */ .Z.expand(\n      pointPrimitiveCollection._baseVolume,\n      position,\n      pointPrimitiveCollection._baseVolume\n    );\n    pointPrimitiveCollection._boundingVolumeDirty = true;\n  }\n\n  _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fromCartesian */ .Z.fromCartesian(position, writePositionScratch);\n  var pixelSize = pointPrimitive.pixelSize;\n  var outlineWidth = pointPrimitive.outlineWidth;\n\n  pointPrimitiveCollection._maxPixelSize = Math.max(\n    pointPrimitiveCollection._maxPixelSize,\n    pixelSize + outlineWidth\n  );\n\n  var positionHighWriter = vafWriters[attributeLocations.positionHighAndSize];\n  var high = writePositionScratch.high;\n  positionHighWriter(i, high.x, high.y, high.z, pixelSize);\n\n  var positionLowWriter = vafWriters[attributeLocations.positionLowAndOutline];\n  var low = writePositionScratch.low;\n  positionLowWriter(i, low.x, low.y, low.z, outlineWidth);\n}\n\nvar LEFT_SHIFT16 = 65536.0; // 2^16\nvar LEFT_SHIFT8 = 256.0; // 2^8\n\nfunction writeCompressedAttrib0(\n  pointPrimitiveCollection,\n  context,\n  vafWriters,\n  pointPrimitive\n) {\n  var i = pointPrimitive._index;\n\n  var color = pointPrimitive.color;\n  var pickColor = pointPrimitive.getPickId(context).color;\n  var outlineColor = pointPrimitive.outlineColor;\n\n  var red = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(color.red);\n  var green = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(color.green);\n  var blue = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(color.blue);\n  var compressed0 = red * LEFT_SHIFT16 + green * LEFT_SHIFT8 + blue;\n\n  red = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(outlineColor.red);\n  green = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(outlineColor.green);\n  blue = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(outlineColor.blue);\n  var compressed1 = red * LEFT_SHIFT16 + green * LEFT_SHIFT8 + blue;\n\n  red = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.red);\n  green = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.green);\n  blue = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.blue);\n  var compressed2 = red * LEFT_SHIFT16 + green * LEFT_SHIFT8 + blue;\n\n  var compressed3 =\n    _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(color.alpha) * LEFT_SHIFT16 +\n    _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(outlineColor.alpha) * LEFT_SHIFT8 +\n    _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.alpha);\n\n  var writer = vafWriters[attributeLocations.compressedAttribute0];\n  writer(i, compressed0, compressed1, compressed2, compressed3);\n}\n\nfunction writeCompressedAttrib1(\n  pointPrimitiveCollection,\n  context,\n  vafWriters,\n  pointPrimitive\n) {\n  var i = pointPrimitive._index;\n\n  var near = 0.0;\n  var nearValue = 1.0;\n  var far = 1.0;\n  var farValue = 1.0;\n\n  var translucency = pointPrimitive.translucencyByDistance;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(translucency)) {\n    near = translucency.near;\n    nearValue = translucency.nearValue;\n    far = translucency.far;\n    farValue = translucency.farValue;\n\n    if (nearValue !== 1.0 || farValue !== 1.0) {\n      // translucency by distance calculation in shader need not be enabled\n      // until a pointPrimitive with near and far !== 1.0 is found\n      pointPrimitiveCollection._shaderTranslucencyByDistance = true;\n    }\n  }\n\n  var show = pointPrimitive.show && pointPrimitive.clusterShow;\n\n  // If the color alphas are zero, do not show this pointPrimitive.  This lets us avoid providing\n  // color during the pick pass and also eliminates a discard in the fragment shader.\n  if (\n    pointPrimitive.color.alpha === 0.0 &&\n    pointPrimitive.outlineColor.alpha === 0.0\n  ) {\n    show = false;\n  }\n\n  nearValue = _Core_Math_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clamp */ .Z.clamp(nearValue, 0.0, 1.0);\n  nearValue = nearValue === 1.0 ? 255.0 : (nearValue * 255.0) | 0;\n  var compressed0 = (show ? 1.0 : 0.0) * LEFT_SHIFT8 + nearValue;\n\n  farValue = _Core_Math_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clamp */ .Z.clamp(farValue, 0.0, 1.0);\n  farValue = farValue === 1.0 ? 255.0 : (farValue * 255.0) | 0;\n  var compressed1 = farValue;\n\n  var writer = vafWriters[attributeLocations.compressedAttribute1];\n  writer(i, compressed0, compressed1, near, far);\n}\n\nfunction writeScaleByDistance(\n  pointPrimitiveCollection,\n  context,\n  vafWriters,\n  pointPrimitive\n) {\n  var i = pointPrimitive._index;\n  var writer = vafWriters[attributeLocations.scaleByDistance];\n  var near = 0.0;\n  var nearValue = 1.0;\n  var far = 1.0;\n  var farValue = 1.0;\n\n  var scale = pointPrimitive.scaleByDistance;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(scale)) {\n    near = scale.near;\n    nearValue = scale.nearValue;\n    far = scale.far;\n    farValue = scale.farValue;\n\n    if (nearValue !== 1.0 || farValue !== 1.0) {\n      // scale by distance calculation in shader need not be enabled\n      // until a pointPrimitive with near and far !== 1.0 is found\n      pointPrimitiveCollection._shaderScaleByDistance = true;\n    }\n  }\n\n  writer(i, near, nearValue, far, farValue);\n}\n\nfunction writeDistanceDisplayConditionAndDepthDisable(\n  pointPrimitiveCollection,\n  context,\n  vafWriters,\n  pointPrimitive\n) {\n  var i = pointPrimitive._index;\n  var writer =\n    vafWriters[attributeLocations.distanceDisplayConditionAndDisableDepth];\n  var near = 0.0;\n  var far = Number.MAX_VALUE;\n\n  var distanceDisplayCondition = pointPrimitive.distanceDisplayCondition;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(distanceDisplayCondition)) {\n    near = distanceDisplayCondition.near;\n    far = distanceDisplayCondition.far;\n\n    near *= near;\n    far *= far;\n\n    pointPrimitiveCollection._shaderDistanceDisplayCondition = true;\n  }\n\n  var disableDepthTestDistance = pointPrimitive.disableDepthTestDistance;\n  disableDepthTestDistance *= disableDepthTestDistance;\n  if (disableDepthTestDistance > 0.0) {\n    pointPrimitiveCollection._shaderDisableDepthDistance = true;\n    if (disableDepthTestDistance === Number.POSITIVE_INFINITY) {\n      disableDepthTestDistance = -1.0;\n    }\n  }\n\n  writer(i, near, far, disableDepthTestDistance);\n}\n\nfunction writePointPrimitive(\n  pointPrimitiveCollection,\n  context,\n  vafWriters,\n  pointPrimitive\n) {\n  writePositionSizeAndOutline(\n    pointPrimitiveCollection,\n    context,\n    vafWriters,\n    pointPrimitive\n  );\n  writeCompressedAttrib0(\n    pointPrimitiveCollection,\n    context,\n    vafWriters,\n    pointPrimitive\n  );\n  writeCompressedAttrib1(\n    pointPrimitiveCollection,\n    context,\n    vafWriters,\n    pointPrimitive\n  );\n  writeScaleByDistance(\n    pointPrimitiveCollection,\n    context,\n    vafWriters,\n    pointPrimitive\n  );\n  writeDistanceDisplayConditionAndDepthDisable(\n    pointPrimitiveCollection,\n    context,\n    vafWriters,\n    pointPrimitive\n  );\n}\n\nfunction recomputeActualPositions(\n  pointPrimitiveCollection,\n  pointPrimitives,\n  length,\n  frameState,\n  modelMatrix,\n  recomputeBoundingVolume\n) {\n  var boundingVolume;\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    boundingVolume = pointPrimitiveCollection._baseVolume;\n    pointPrimitiveCollection._boundingVolumeDirty = true;\n  } else {\n    boundingVolume = pointPrimitiveCollection._baseVolume2D;\n  }\n\n  var positions = [];\n  for (var i = 0; i < length; ++i) {\n    var pointPrimitive = pointPrimitives[i];\n    var position = pointPrimitive.position;\n    var actualPosition = _PointPrimitive_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"]._computeActualPosition */ .Z._computeActualPosition(\n      position,\n      frameState,\n      modelMatrix\n    );\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(actualPosition)) {\n      pointPrimitive._setActualPosition(actualPosition);\n\n      if (recomputeBoundingVolume) {\n        positions.push(actualPosition);\n      } else {\n        _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].expand */ .Z.expand(boundingVolume, actualPosition, boundingVolume);\n      }\n    }\n  }\n\n  if (recomputeBoundingVolume) {\n    _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromPoints */ .Z.fromPoints(positions, boundingVolume);\n  }\n}\n\nfunction updateMode(pointPrimitiveCollection, frameState) {\n  var mode = frameState.mode;\n\n  var pointPrimitives = pointPrimitiveCollection._pointPrimitives;\n  var pointPrimitivesToUpdate =\n    pointPrimitiveCollection._pointPrimitivesToUpdate;\n  var modelMatrix = pointPrimitiveCollection._modelMatrix;\n\n  if (\n    pointPrimitiveCollection._createVertexArray ||\n    pointPrimitiveCollection._mode !== mode ||\n    (mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D &&\n      !_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].equals */ .Z.equals(modelMatrix, pointPrimitiveCollection.modelMatrix))\n  ) {\n    pointPrimitiveCollection._mode = mode;\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].clone */ .Z.clone(pointPrimitiveCollection.modelMatrix, modelMatrix);\n    pointPrimitiveCollection._createVertexArray = true;\n\n    if (\n      mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D ||\n      mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE2D */ .Z.SCENE2D ||\n      mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW\n    ) {\n      recomputeActualPositions(\n        pointPrimitiveCollection,\n        pointPrimitives,\n        pointPrimitives.length,\n        frameState,\n        modelMatrix,\n        true\n      );\n    }\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].MORPHING */ .Z.MORPHING) {\n    recomputeActualPositions(\n      pointPrimitiveCollection,\n      pointPrimitives,\n      pointPrimitives.length,\n      frameState,\n      modelMatrix,\n      true\n    );\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE2D */ .Z.SCENE2D || mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    recomputeActualPositions(\n      pointPrimitiveCollection,\n      pointPrimitivesToUpdate,\n      pointPrimitiveCollection._pointPrimitivesToUpdateIndex,\n      frameState,\n      modelMatrix,\n      false\n    );\n  }\n}\n\nfunction updateBoundingVolume(collection, frameState, boundingVolume) {\n  var pixelSize = frameState.camera.getPixelSize(\n    boundingVolume,\n    frameState.context.drawingBufferWidth,\n    frameState.context.drawingBufferHeight\n  );\n  var size = pixelSize * collection._maxPixelSize;\n  boundingVolume.radius += size;\n}\n\nvar scratchWriterArray = [];\n\n/**\n * @private\n */\nPointPrimitiveCollection.prototype.update = function (frameState) {\n  removePointPrimitives(this);\n\n  if (!this.show) {\n    return;\n  }\n\n  this._maxTotalPointSize = _Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].maximumAliasedPointSize */ .Z.maximumAliasedPointSize;\n\n  updateMode(this, frameState);\n\n  var pointPrimitives = this._pointPrimitives;\n  var pointPrimitivesLength = pointPrimitives.length;\n  var pointPrimitivesToUpdate = this._pointPrimitivesToUpdate;\n  var pointPrimitivesToUpdateLength = this._pointPrimitivesToUpdateIndex;\n\n  var properties = this._propertiesChanged;\n\n  var createVertexArray = this._createVertexArray;\n\n  var vafWriters;\n  var context = frameState.context;\n  var pass = frameState.passes;\n  var picking = pass.pick;\n\n  // PERFORMANCE_IDEA: Round robin multiple buffers.\n  if (createVertexArray || (!picking && this.computeNewBuffersUsage())) {\n    this._createVertexArray = false;\n\n    for (var k = 0; k < NUMBER_OF_PROPERTIES; ++k) {\n      properties[k] = 0;\n    }\n\n    this._vaf = this._vaf && this._vaf.destroy();\n\n    if (pointPrimitivesLength > 0) {\n      // PERFORMANCE_IDEA:  Instead of creating a new one, resize like std::vector.\n      this._vaf = createVAF(context, pointPrimitivesLength, this._buffersUsage);\n      vafWriters = this._vaf.writers;\n\n      // Rewrite entire buffer if pointPrimitives were added or removed.\n      for (var i = 0; i < pointPrimitivesLength; ++i) {\n        var pointPrimitive = this._pointPrimitives[i];\n        pointPrimitive._dirty = false; // In case it needed an update.\n        writePointPrimitive(this, context, vafWriters, pointPrimitive);\n      }\n\n      this._vaf.commit();\n    }\n\n    this._pointPrimitivesToUpdateIndex = 0;\n  } else if (pointPrimitivesToUpdateLength > 0) {\n    // PointPrimitives were modified, but none were added or removed.\n    var writers = scratchWriterArray;\n    writers.length = 0;\n\n    if (\n      properties[POSITION_INDEX] ||\n      properties[OUTLINE_WIDTH_INDEX] ||\n      properties[PIXEL_SIZE_INDEX]\n    ) {\n      writers.push(writePositionSizeAndOutline);\n    }\n\n    if (properties[COLOR_INDEX] || properties[OUTLINE_COLOR_INDEX]) {\n      writers.push(writeCompressedAttrib0);\n    }\n\n    if (properties[SHOW_INDEX] || properties[TRANSLUCENCY_BY_DISTANCE_INDEX]) {\n      writers.push(writeCompressedAttrib1);\n    }\n\n    if (properties[SCALE_BY_DISTANCE_INDEX]) {\n      writers.push(writeScaleByDistance);\n    }\n\n    if (\n      properties[DISTANCE_DISPLAY_CONDITION_INDEX] ||\n      properties[DISABLE_DEPTH_DISTANCE_INDEX]\n    ) {\n      writers.push(writeDistanceDisplayConditionAndDepthDisable);\n    }\n\n    var numWriters = writers.length;\n\n    vafWriters = this._vaf.writers;\n\n    if (pointPrimitivesToUpdateLength / pointPrimitivesLength > 0.1) {\n      // If more than 10% of pointPrimitive change, rewrite the entire buffer.\n\n      // PERFORMANCE_IDEA:  I totally made up 10% :).\n\n      for (var m = 0; m < pointPrimitivesToUpdateLength; ++m) {\n        var b = pointPrimitivesToUpdate[m];\n        b._dirty = false;\n\n        for (var n = 0; n < numWriters; ++n) {\n          writers[n](this, context, vafWriters, b);\n        }\n      }\n      this._vaf.commit();\n    } else {\n      for (var h = 0; h < pointPrimitivesToUpdateLength; ++h) {\n        var bb = pointPrimitivesToUpdate[h];\n        bb._dirty = false;\n\n        for (var o = 0; o < numWriters; ++o) {\n          writers[o](this, context, vafWriters, bb);\n        }\n        this._vaf.subCommit(bb._index, 1);\n      }\n      this._vaf.endSubCommits();\n    }\n\n    this._pointPrimitivesToUpdateIndex = 0;\n  }\n\n  // If the number of total pointPrimitives ever shrinks considerably\n  // Truncate pointPrimitivesToUpdate so that we free memory that we\'re\n  // not going to be using.\n  if (pointPrimitivesToUpdateLength > pointPrimitivesLength * 1.5) {\n    pointPrimitivesToUpdate.length = pointPrimitivesLength;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(this._vaf) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(this._vaf.va)) {\n    return;\n  }\n\n  if (this._boundingVolumeDirty) {\n    this._boundingVolumeDirty = false;\n    _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].transform */ .Z.transform(\n      this._baseVolume,\n      this.modelMatrix,\n      this._baseVolumeWC\n    );\n  }\n\n  var boundingVolume;\n  var modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].IDENTITY */ .Z.IDENTITY;\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    modelMatrix = this.modelMatrix;\n    boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n      this._baseVolumeWC,\n      this._boundingVolume\n    );\n  } else {\n    boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n      this._baseVolume2D,\n      this._boundingVolume\n    );\n  }\n  updateBoundingVolume(this, frameState, boundingVolume);\n\n  var blendOptionChanged = this._blendOption !== this.blendOption;\n  this._blendOption = this.blendOption;\n\n  if (blendOptionChanged) {\n    if (\n      this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE */ .Z.OPAQUE ||\n      this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE_AND_TRANSLUCENT */ .Z.OPAQUE_AND_TRANSLUCENT\n    ) {\n      this._rsOpaque = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].fromCache */ .Z.fromCache({\n        depthTest: {\n          enabled: true,\n          func: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].LEQUAL */ .Z.LEQUAL,\n        },\n        depthMask: true,\n      });\n    } else {\n      this._rsOpaque = undefined;\n    }\n\n    if (\n      this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT ||\n      this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE_AND_TRANSLUCENT */ .Z.OPAQUE_AND_TRANSLUCENT\n    ) {\n      this._rsTranslucent = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].fromCache */ .Z.fromCache({\n        depthTest: {\n          enabled: true,\n          func: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].LEQUAL */ .Z.LEQUAL,\n        },\n        depthMask: false,\n        blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n      });\n    } else {\n      this._rsTranslucent = undefined;\n    }\n  }\n\n  this._shaderDisableDepthDistance =\n    this._shaderDisableDepthDistance ||\n    frameState.minimumDisableDepthTestDistance !== 0.0;\n  var vs;\n  var fs;\n\n  if (\n    blendOptionChanged ||\n    (this._shaderScaleByDistance && !this._compiledShaderScaleByDistance) ||\n    (this._shaderTranslucencyByDistance &&\n      !this._compiledShaderTranslucencyByDistance) ||\n    (this._shaderDistanceDisplayCondition &&\n      !this._compiledShaderDistanceDisplayCondition) ||\n    this._shaderDisableDepthDistance !==\n      this._compiledShaderDisableDepthDistance\n  ) {\n    vs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z({\n      sources: [_Shaders_PointPrimitiveCollectionVS_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z],\n    });\n    if (this._shaderScaleByDistance) {\n      vs.defines.push("EYE_DISTANCE_SCALING");\n    }\n    if (this._shaderTranslucencyByDistance) {\n      vs.defines.push("EYE_DISTANCE_TRANSLUCENCY");\n    }\n    if (this._shaderDistanceDisplayCondition) {\n      vs.defines.push("DISTANCE_DISPLAY_CONDITION");\n    }\n    if (this._shaderDisableDepthDistance) {\n      vs.defines.push("DISABLE_DEPTH_DISTANCE");\n    }\n\n    if (this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE_AND_TRANSLUCENT */ .Z.OPAQUE_AND_TRANSLUCENT) {\n      fs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z({\n        defines: ["OPAQUE"],\n        sources: [_Shaders_PointPrimitiveCollectionFS_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z],\n      });\n      this._sp = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].replaceCache */ .Z.replaceCache({\n        context: context,\n        shaderProgram: this._sp,\n        vertexShaderSource: vs,\n        fragmentShaderSource: fs,\n        attributeLocations: attributeLocations,\n      });\n\n      fs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z({\n        defines: ["TRANSLUCENT"],\n        sources: [_Shaders_PointPrimitiveCollectionFS_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z],\n      });\n      this._spTranslucent = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].replaceCache */ .Z.replaceCache({\n        context: context,\n        shaderProgram: this._spTranslucent,\n        vertexShaderSource: vs,\n        fragmentShaderSource: fs,\n        attributeLocations: attributeLocations,\n      });\n    }\n\n    if (this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE */ .Z.OPAQUE) {\n      fs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z({\n        sources: [_Shaders_PointPrimitiveCollectionFS_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z],\n      });\n      this._sp = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].replaceCache */ .Z.replaceCache({\n        context: context,\n        shaderProgram: this._sp,\n        vertexShaderSource: vs,\n        fragmentShaderSource: fs,\n        attributeLocations: attributeLocations,\n      });\n    }\n\n    if (this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT) {\n      fs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z({\n        sources: [_Shaders_PointPrimitiveCollectionFS_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z],\n      });\n      this._spTranslucent = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].replaceCache */ .Z.replaceCache({\n        context: context,\n        shaderProgram: this._spTranslucent,\n        vertexShaderSource: vs,\n        fragmentShaderSource: fs,\n        attributeLocations: attributeLocations,\n      });\n    }\n\n    this._compiledShaderScaleByDistance = this._shaderScaleByDistance;\n    this._compiledShaderTranslucencyByDistance = this._shaderTranslucencyByDistance;\n    this._compiledShaderDistanceDisplayCondition = this._shaderDistanceDisplayCondition;\n    this._compiledShaderDisableDepthDistance = this._shaderDisableDepthDistance;\n  }\n\n  var va;\n  var vaLength;\n  var command;\n  var j;\n\n  var commandList = frameState.commandList;\n\n  if (pass.render || picking) {\n    var colorList = this._colorCommands;\n\n    var opaque = this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE */ .Z.OPAQUE;\n    var opaqueAndTranslucent =\n      this._blendOption === _BlendOption_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].OPAQUE_AND_TRANSLUCENT */ .Z.OPAQUE_AND_TRANSLUCENT;\n\n    va = this._vaf.va;\n    vaLength = va.length;\n\n    colorList.length = vaLength;\n    var totalLength = opaqueAndTranslucent ? vaLength * 2 : vaLength;\n    for (j = 0; j < totalLength; ++j) {\n      var opaqueCommand = opaque || (opaqueAndTranslucent && j % 2 === 0);\n\n      command = colorList[j];\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(command)) {\n        command = colorList[j] = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\n      }\n\n      command.primitiveType = _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].POINTS */ .Z.POINTS;\n      command.pass =\n        opaqueCommand || !opaqueAndTranslucent ? _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].OPAQUE */ .Z.OPAQUE : _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT;\n      command.owner = this;\n\n      var index = opaqueAndTranslucent ? Math.floor(j / 2.0) : j;\n      command.boundingVolume = boundingVolume;\n      command.modelMatrix = modelMatrix;\n      command.shaderProgram = opaqueCommand ? this._sp : this._spTranslucent;\n      command.uniformMap = this._uniforms;\n      command.vertexArray = va[index].va;\n      command.renderState = opaqueCommand\n        ? this._rsOpaque\n        : this._rsTranslucent;\n      command.debugShowBoundingVolume = this.debugShowBoundingVolume;\n      command.pickId = "v_pickColor";\n\n      commandList.push(command);\n    }\n  }\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see PointPrimitiveCollection#destroy\n */\nPointPrimitiveCollection.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * pointPrimitives = pointPrimitives && pointPrimitives.destroy();\n *\n * @see PointPrimitiveCollection#isDestroyed\n */\nPointPrimitiveCollection.prototype.destroy = function () {\n  this._sp = this._sp && this._sp.destroy();\n  this._spTranslucent = this._spTranslucent && this._spTranslucent.destroy();\n  this._spPick = this._spPick && this._spPick.destroy();\n  this._vaf = this._vaf && this._vaf.destroy();\n  destroyPointPrimitives(this._pointPrimitives);\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PointPrimitiveCollection);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUywyRUFBYTtBQUN0QjtBQUNBLHlEQUFlLHdCQUF3QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1BvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5qcz9hZWY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi4vQ29yZS9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFbmNvZGVkQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9FbmNvZGVkQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IFByaW1pdGl2ZVR5cGUgZnJvbSBcIi4uL0NvcmUvUHJpbWl0aXZlVHlwZS5qc1wiO1xuaW1wb3J0IFdlYkdMQ29uc3RhbnRzIGZyb20gXCIuLi9Db3JlL1dlYkdMQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQnVmZmVyVXNhZ2UgZnJvbSBcIi4uL1JlbmRlcmVyL0J1ZmZlclVzYWdlLmpzXCI7XG5pbXBvcnQgQ29udGV4dExpbWl0cyBmcm9tIFwiLi4vUmVuZGVyZXIvQ29udGV4dExpbWl0cy5qc1wiO1xuaW1wb3J0IERyYXdDb21tYW5kIGZyb20gXCIuLi9SZW5kZXJlci9EcmF3Q29tbWFuZC5qc1wiO1xuaW1wb3J0IFBhc3MgZnJvbSBcIi4uL1JlbmRlcmVyL1Bhc3MuanNcIjtcbmltcG9ydCBSZW5kZXJTdGF0ZSBmcm9tIFwiLi4vUmVuZGVyZXIvUmVuZGVyU3RhdGUuanNcIjtcbmltcG9ydCBTaGFkZXJQcm9ncmFtIGZyb20gXCIuLi9SZW5kZXJlci9TaGFkZXJQcm9ncmFtLmpzXCI7XG5pbXBvcnQgU2hhZGVyU291cmNlIGZyb20gXCIuLi9SZW5kZXJlci9TaGFkZXJTb3VyY2UuanNcIjtcbmltcG9ydCBWZXJ0ZXhBcnJheUZhY2FkZSBmcm9tIFwiLi4vUmVuZGVyZXIvVmVydGV4QXJyYXlGYWNhZGUuanNcIjtcbmltcG9ydCBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb25GUyBmcm9tIFwiLi4vU2hhZGVycy9Qb2ludFByaW1pdGl2ZUNvbGxlY3Rpb25GUy5qc1wiO1xuaW1wb3J0IFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvblZTIGZyb20gXCIuLi9TaGFkZXJzL1BvaW50UHJpbWl0aXZlQ29sbGVjdGlvblZTLmpzXCI7XG5pbXBvcnQgQmxlbmRpbmdTdGF0ZSBmcm9tIFwiLi9CbGVuZGluZ1N0YXRlLmpzXCI7XG5pbXBvcnQgQmxlbmRPcHRpb24gZnJvbSBcIi4vQmxlbmRPcHRpb24uanNcIjtcbmltcG9ydCBQb2ludFByaW1pdGl2ZSBmcm9tIFwiLi9Qb2ludFByaW1pdGl2ZS5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi9TY2VuZU1vZGUuanNcIjtcblxudmFyIFNIT1dfSU5ERVggPSBQb2ludFByaW1pdGl2ZS5TSE9XX0lOREVYO1xudmFyIFBPU0lUSU9OX0lOREVYID0gUG9pbnRQcmltaXRpdmUuUE9TSVRJT05fSU5ERVg7XG52YXIgQ09MT1JfSU5ERVggPSBQb2ludFByaW1pdGl2ZS5DT0xPUl9JTkRFWDtcbnZhciBPVVRMSU5FX0NPTE9SX0lOREVYID0gUG9pbnRQcmltaXRpdmUuT1VUTElORV9DT0xPUl9JTkRFWDtcbnZhciBPVVRMSU5FX1dJRFRIX0lOREVYID0gUG9pbnRQcmltaXRpdmUuT1VUTElORV9XSURUSF9JTkRFWDtcbnZhciBQSVhFTF9TSVpFX0lOREVYID0gUG9pbnRQcmltaXRpdmUuUElYRUxfU0laRV9JTkRFWDtcbnZhciBTQ0FMRV9CWV9ESVNUQU5DRV9JTkRFWCA9IFBvaW50UHJpbWl0aXZlLlNDQUxFX0JZX0RJU1RBTkNFX0lOREVYO1xudmFyIFRSQU5TTFVDRU5DWV9CWV9ESVNUQU5DRV9JTkRFWCA9XG4gIFBvaW50UHJpbWl0aXZlLlRSQU5TTFVDRU5DWV9CWV9ESVNUQU5DRV9JTkRFWDtcbnZhciBESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTl9JTkRFWCA9XG4gIFBvaW50UHJpbWl0aXZlLkRJU1RBTkNFX0RJU1BMQVlfQ09ORElUSU9OX0lOREVYO1xudmFyIERJU0FCTEVfREVQVEhfRElTVEFOQ0VfSU5ERVggPSBQb2ludFByaW1pdGl2ZS5ESVNBQkxFX0RFUFRIX0RJU1RBTkNFX0lOREVYO1xudmFyIE5VTUJFUl9PRl9QUk9QRVJUSUVTID0gUG9pbnRQcmltaXRpdmUuTlVNQkVSX09GX1BST1BFUlRJRVM7XG5cbnZhciBhdHRyaWJ1dGVMb2NhdGlvbnMgPSB7XG4gIHBvc2l0aW9uSGlnaEFuZFNpemU6IDAsXG4gIHBvc2l0aW9uTG93QW5kT3V0bGluZTogMSxcbiAgY29tcHJlc3NlZEF0dHJpYnV0ZTA6IDIsIC8vIGNvbG9yLCBvdXRsaW5lQ29sb3IsIHBpY2sgY29sb3JcbiAgY29tcHJlc3NlZEF0dHJpYnV0ZTE6IDMsIC8vIHNob3csIHRyYW5zbHVjZW5jeSBieSBkaXN0YW5jZSwgc29tZSBmcmVlIHNwYWNlXG4gIHNjYWxlQnlEaXN0YW5jZTogNCxcbiAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uQW5kRGlzYWJsZURlcHRoOiA1LFxufTtcblxuLyoqXG4gKiBBIHJlbmRlcmFibGUgY29sbGVjdGlvbiBvZiBwb2ludHMuXG4gKiA8YnIgLz48YnIgLz5cbiAqIFBvaW50cyBhcmUgYWRkZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbiB1c2luZyB7QGxpbmsgUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uI2FkZH1cbiAqIGFuZCB7QGxpbmsgUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uI3JlbW92ZX0uXG4gKlxuICogQGFsaWFzIFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvblxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge01hdHJpeDR9IFtvcHRpb25zLm1vZGVsTWF0cml4PU1hdHJpeDQuSURFTlRJVFldIFRoZSA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRoYXQgdHJhbnNmb3JtcyBlYWNoIHBvaW50IGZyb20gbW9kZWwgdG8gd29ybGQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lPWZhbHNlXSBGb3IgZGVidWdnaW5nIG9ubHkuIERldGVybWluZXMgaWYgdGhpcyBwcmltaXRpdmUncyBjb21tYW5kcycgYm91bmRpbmcgc3BoZXJlcyBhcmUgc2hvd24uXG4gKiBAcGFyYW0ge0JsZW5kT3B0aW9ufSBbb3B0aW9ucy5ibGVuZE9wdGlvbj1CbGVuZE9wdGlvbi5PUEFRVUVfQU5EX1RSQU5TTFVDRU5UXSBUaGUgcG9pbnQgYmxlbmRpbmcgb3B0aW9uLiBUaGUgZGVmYXVsdFxuICogaXMgdXNlZCBmb3IgcmVuZGVyaW5nIGJvdGggb3BhcXVlIGFuZCB0cmFuc2x1Y2VudCBwb2ludHMuIEhvd2V2ZXIsIGlmIGVpdGhlciBhbGwgb2YgdGhlIHBvaW50cyBhcmUgY29tcGxldGVseSBvcGFxdWUgb3IgYWxsIGFyZSBjb21wbGV0ZWx5IHRyYW5zbHVjZW50LFxuICogc2V0dGluZyB0aGUgdGVjaG5pcXVlIHRvIEJsZW5kT3B0aW9uLk9QQVFVRSBvciBCbGVuZE9wdGlvbi5UUkFOU0xVQ0VOVCBjYW4gaW1wcm92ZSBwZXJmb3JtYW5jZSBieSB1cCB0byAyeC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2hvdz10cnVlXSBEZXRlcm1pbmVzIGlmIHRoZSBwcmltaXRpdmVzIGluIHRoZSBjb2xsZWN0aW9uIHdpbGwgYmUgc2hvd24uXG4gKlxuICogQHBlcmZvcm1hbmNlIEZvciBiZXN0IHBlcmZvcm1hbmNlLCBwcmVmZXIgYSBmZXcgY29sbGVjdGlvbnMsIGVhY2ggd2l0aCBtYW55IHBvaW50cywgdG9cbiAqIG1hbnkgY29sbGVjdGlvbnMgd2l0aCBvbmx5IGEgZmV3IHBvaW50cyBlYWNoLiAgT3JnYW5pemUgY29sbGVjdGlvbnMgc28gdGhhdCBwb2ludHNcbiAqIHdpdGggdGhlIHNhbWUgdXBkYXRlIGZyZXF1ZW5jeSBhcmUgaW4gdGhlIHNhbWUgY29sbGVjdGlvbiwgaS5lLiwgcG9pbnRzIHRoYXQgZG8gbm90XG4gKiBjaGFuZ2Ugc2hvdWxkIGJlIGluIG9uZSBjb2xsZWN0aW9uOyBwb2ludHMgdGhhdCBjaGFuZ2UgZXZlcnkgZnJhbWUgc2hvdWxkIGJlIGluIGFub3RoZXJcbiAqIGNvbGxlY3Rpb247IGFuZCBzbyBvbi5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENyZWF0ZSBhIHBvaW50UHJpbWl0aXZlIGNvbGxlY3Rpb24gd2l0aCB0d28gcG9pbnRzXG4gKiB2YXIgcG9pbnRzID0gc2NlbmUucHJpbWl0aXZlcy5hZGQobmV3IENlc2l1bS5Qb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24oKSk7XG4gKiBwb2ludHMuYWRkKHtcbiAqICAgcG9zaXRpb24gOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoMS4wLCAyLjAsIDMuMCksXG4gKiAgIGNvbG9yIDogQ2VzaXVtLkNvbG9yLllFTExPV1xuICogfSk7XG4gKiBwb2ludHMuYWRkKHtcbiAqICAgcG9zaXRpb24gOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoNC4wLCA1LjAsIDYuMCksXG4gKiAgIGNvbG9yIDogQ2VzaXVtLkNvbG9yLkNZQU5cbiAqIH0pO1xuICpcbiAqIEBzZWUgUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uI2FkZFxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jcmVtb3ZlXG4gKiBAc2VlIFBvaW50UHJpbWl0aXZlXG4gKi9cbmZ1bmN0aW9uIFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgdGhpcy5fc3AgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NwVHJhbnNsdWNlbnQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3JzT3BhcXVlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9yc1RyYW5zbHVjZW50ID0gdW5kZWZpbmVkO1xuICB0aGlzLl92YWYgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fcG9pbnRQcmltaXRpdmVzID0gW107XG4gIHRoaXMuX3BvaW50UHJpbWl0aXZlc1RvVXBkYXRlID0gW107XG4gIHRoaXMuX3BvaW50UHJpbWl0aXZlc1RvVXBkYXRlSW5kZXggPSAwO1xuICB0aGlzLl9wb2ludFByaW1pdGl2ZXNSZW1vdmVkID0gZmFsc2U7XG4gIHRoaXMuX2NyZWF0ZVZlcnRleEFycmF5ID0gZmFsc2U7XG5cbiAgdGhpcy5fc2hhZGVyU2NhbGVCeURpc3RhbmNlID0gZmFsc2U7XG4gIHRoaXMuX2NvbXBpbGVkU2hhZGVyU2NhbGVCeURpc3RhbmNlID0gZmFsc2U7XG5cbiAgdGhpcy5fc2hhZGVyVHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IGZhbHNlO1xuICB0aGlzLl9jb21waWxlZFNoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBmYWxzZTtcblxuICB0aGlzLl9zaGFkZXJEaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBmYWxzZTtcbiAgdGhpcy5fY29tcGlsZWRTaGFkZXJEaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBmYWxzZTtcblxuICB0aGlzLl9zaGFkZXJEaXNhYmxlRGVwdGhEaXN0YW5jZSA9IGZhbHNlO1xuICB0aGlzLl9jb21waWxlZFNoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlID0gZmFsc2U7XG5cbiAgdGhpcy5fcHJvcGVydGllc0NoYW5nZWQgPSBuZXcgVWludDMyQXJyYXkoTlVNQkVSX09GX1BST1BFUlRJRVMpO1xuXG4gIHRoaXMuX21heFBpeGVsU2l6ZSA9IDEuMDtcblxuICB0aGlzLl9iYXNlVm9sdW1lID0gbmV3IEJvdW5kaW5nU3BoZXJlKCk7XG4gIHRoaXMuX2Jhc2VWb2x1bWVXQyA9IG5ldyBCb3VuZGluZ1NwaGVyZSgpO1xuICB0aGlzLl9iYXNlVm9sdW1lMkQgPSBuZXcgQm91bmRpbmdTcGhlcmUoKTtcbiAgdGhpcy5fYm91bmRpbmdWb2x1bWUgPSBuZXcgQm91bmRpbmdTcGhlcmUoKTtcbiAgdGhpcy5fYm91bmRpbmdWb2x1bWVEaXJ0eSA9IGZhbHNlO1xuXG4gIHRoaXMuX2NvbG9yQ29tbWFuZHMgPSBbXTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBwcmltaXRpdmVzIGluIHRoaXMgY29sbGVjdGlvbiB3aWxsIGJlIHNob3duLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5zaG93ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2hvdywgdHJ1ZSk7XG5cbiAgLyoqXG4gICAqIFRoZSA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRoYXQgdHJhbnNmb3JtcyBlYWNoIHBvaW50IGluIHRoaXMgY29sbGVjdGlvbiBmcm9tIG1vZGVsIHRvIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVuIHRoaXMgaXMgdGhlIGlkZW50aXR5IG1hdHJpeCwgdGhlIHBvaW50UHJpbWl0aXZlcyBhcmUgZHJhd24gaW4gd29ybGQgY29vcmRpbmF0ZXMsIGkuZS4sIEVhcnRoJ3MgV0dTODQgY29vcmRpbmF0ZXMuXG4gICAqIExvY2FsIHJlZmVyZW5jZSBmcmFtZXMgY2FuIGJlIHVzZWQgYnkgcHJvdmlkaW5nIGEgZGlmZmVyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCwgbGlrZSB0aGF0IHJldHVybmVkXG4gICAqIGJ5IHtAbGluayBUcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lfS5cbiAgICpcbiAgICogQHR5cGUge01hdHJpeDR9XG4gICAqIEBkZWZhdWx0IHtAbGluayBNYXRyaXg0LklERU5USVRZfVxuICAgKlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgY2VudGVyID0gQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMoLTc1LjU5Nzc3LCA0MC4wMzg4Myk7XG4gICAqIHBvaW50UHJpbWl0aXZlcy5tb2RlbE1hdHJpeCA9IENlc2l1bS5UcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lKGNlbnRlcik7XG4gICAqIHBvaW50UHJpbWl0aXZlcy5hZGQoe1xuICAgKiAgIGNvbG9yIDogQ2VzaXVtLkNvbG9yLk9SQU5HRSxcbiAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDAuMCwgMC4wKSAvLyBjZW50ZXJcbiAgICogfSk7XG4gICAqIHBvaW50UHJpbWl0aXZlcy5hZGQoe1xuICAgKiAgIGNvbG9yIDogQ2VzaXVtLkNvbG9yLllFTExPVyxcbiAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygxMDAwMDAwLjAsIDAuMCwgMC4wKSAvLyBlYXN0XG4gICAqIH0pO1xuICAgKiBwb2ludFByaW1pdGl2ZXMuYWRkKHtcbiAgICogICBjb2xvciA6IENlc2l1bS5Db2xvci5HUkVFTixcbiAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDEwMDAwMDAuMCwgMC4wKSAvLyBub3J0aFxuICAgKiB9KTtcbiAgICogcG9pbnRQcmltaXRpdmVzLmFkZCh7XG4gICAqICAgY29sb3IgOiBDZXNpdW0uQ29sb3IuQ1lBTixcbiAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDAuMCwgMTAwMDAwMC4wKSAvLyB1cFxuICAgKiB9KTtcbiAgICpcbiAgICogQHNlZSBUcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lXG4gICAqL1xuICB0aGlzLm1vZGVsTWF0cml4ID0gTWF0cml4NC5jbG9uZShcbiAgICBkZWZhdWx0VmFsdWUob3B0aW9ucy5tb2RlbE1hdHJpeCwgTWF0cml4NC5JREVOVElUWSlcbiAgKTtcbiAgdGhpcy5fbW9kZWxNYXRyaXggPSBNYXRyaXg0LmNsb25lKE1hdHJpeDQuSURFTlRJVFkpO1xuXG4gIC8qKlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGZvciBkZWJ1Z2dpbmcgb25seTsgaXQgaXMgbm90IGZvciBwcm9kdWN0aW9uIHVzZSBub3IgaXMgaXQgb3B0aW1pemVkLlxuICAgKiA8cD5cbiAgICogRHJhd3MgdGhlIGJvdW5kaW5nIHNwaGVyZSBmb3IgZWFjaCBkcmF3IGNvbW1hbmQgaW4gdGhlIHByaW1pdGl2ZS5cbiAgICogPC9wPlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSxcbiAgICBmYWxzZVxuICApO1xuXG4gIC8qKlxuICAgKiBUaGUgcG9pbnQgYmxlbmRpbmcgb3B0aW9uLiBUaGUgZGVmYXVsdCBpcyB1c2VkIGZvciByZW5kZXJpbmcgYm90aCBvcGFxdWUgYW5kIHRyYW5zbHVjZW50IHBvaW50cy5cbiAgICogSG93ZXZlciwgaWYgZWl0aGVyIGFsbCBvZiB0aGUgcG9pbnRzIGFyZSBjb21wbGV0ZWx5IG9wYXF1ZSBvciBhbGwgYXJlIGNvbXBsZXRlbHkgdHJhbnNsdWNlbnQsXG4gICAqIHNldHRpbmcgdGhlIHRlY2huaXF1ZSB0byBCbGVuZE9wdGlvbi5PUEFRVUUgb3IgQmxlbmRPcHRpb24uVFJBTlNMVUNFTlQgY2FuIGltcHJvdmVcbiAgICogcGVyZm9ybWFuY2UgYnkgdXAgdG8gMnguXG4gICAqIEB0eXBlIHtCbGVuZE9wdGlvbn1cbiAgICogQGRlZmF1bHQgQmxlbmRPcHRpb24uT1BBUVVFX0FORF9UUkFOU0xVQ0VOVFxuICAgKi9cbiAgdGhpcy5ibGVuZE9wdGlvbiA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmJsZW5kT3B0aW9uLFxuICAgIEJsZW5kT3B0aW9uLk9QQVFVRV9BTkRfVFJBTlNMVUNFTlRcbiAgKTtcbiAgdGhpcy5fYmxlbmRPcHRpb24gPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fbW9kZSA9IFNjZW5lTW9kZS5TQ0VORTNEO1xuICB0aGlzLl9tYXhUb3RhbFBvaW50U2l6ZSA9IDE7XG5cbiAgLy8gVGhlIGJ1ZmZlciB1c2FnZSBmb3IgZWFjaCBhdHRyaWJ1dGUgaXMgZGV0ZXJtaW5lZCBiYXNlZCBvbiB0aGUgdXNhZ2Ugb2YgdGhlIGF0dHJpYnV0ZSBvdmVyIHRpbWUuXG4gIHRoaXMuX2J1ZmZlcnNVc2FnZSA9IFtcbiAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gU0hPV19JTkRFWFxuICAgIEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLCAvLyBQT1NJVElPTl9JTkRFWFxuICAgIEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLCAvLyBDT0xPUl9JTkRFWFxuICAgIEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLCAvLyBPVVRMSU5FX0NPTE9SX0lOREVYXG4gICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIE9VVExJTkVfV0lEVEhfSU5ERVhcbiAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gUElYRUxfU0laRV9JTkRFWFxuICAgIEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLCAvLyBTQ0FMRV9CWV9ESVNUQU5DRV9JTkRFWFxuICAgIEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLCAvLyBUUkFOU0xVQ0VOQ1lfQllfRElTVEFOQ0VfSU5ERVhcbiAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gRElTVEFOQ0VfRElTUExBWV9DT05ESVRJT05fSU5ERVhcbiAgXTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHRoaXMuX3VuaWZvcm1zID0ge1xuICAgIHVfbWF4VG90YWxQb2ludFNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0Ll9tYXhUb3RhbFBvaW50U2l6ZTtcbiAgICB9LFxuICB9O1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24ucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgcG9pbnRzIGluIHRoaXMgY29sbGVjdGlvbi4gIFRoaXMgaXMgY29tbW9ubHkgdXNlZCB3aXRoXG4gICAqIHtAbGluayBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jZ2V0fSB0byBpdGVyYXRlIG92ZXIgYWxsIHRoZSBwb2ludHNcbiAgICogaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBtZW1iZXJvZiBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24ucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBsZW5ndGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZVBvaW50UHJpbWl0aXZlcyh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLl9wb2ludFByaW1pdGl2ZXMubGVuZ3RoO1xuICAgIH0sXG4gIH0sXG59KTtcblxuZnVuY3Rpb24gZGVzdHJveVBvaW50UHJpbWl0aXZlcyhwb2ludFByaW1pdGl2ZXMpIHtcbiAgdmFyIGxlbmd0aCA9IHBvaW50UHJpbWl0aXZlcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAocG9pbnRQcmltaXRpdmVzW2ldKSB7XG4gICAgICBwb2ludFByaW1pdGl2ZXNbaV0uX2Rlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuZCBhZGRzIGEgcG9pbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgcHJvcGVydGllcyB0byB0aGUgY29sbGVjdGlvbi5cbiAqIFRoZSBhZGRlZCBwb2ludCBpcyByZXR1cm5lZCBzbyBpdCBjYW4gYmUgbW9kaWZpZWQgb3IgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uIGxhdGVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fVtvcHRpb25zXSBBIHRlbXBsYXRlIGRlc2NyaWJpbmcgdGhlIHBvaW50J3MgcHJvcGVydGllcyBhcyBzaG93biBpbiBFeGFtcGxlIDEuXG4gKiBAcmV0dXJucyB7UG9pbnRQcmltaXRpdmV9IFRoZSBwb2ludCB0aGF0IHdhcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgQ2FsbGluZyA8Y29kZT5hZGQ8L2NvZGU+IGlzIGV4cGVjdGVkIGNvbnN0YW50IHRpbWUuICBIb3dldmVyLCB0aGUgY29sbGVjdGlvbidzIHZlcnRleCBidWZmZXJcbiAqIGlzIHJld3JpdHRlbiAtIGFuIDxjb2RlPk8obik8L2NvZGU+IG9wZXJhdGlvbiB0aGF0IGFsc28gaW5jdXJzIENQVSB0byBHUFUgb3ZlcmhlYWQuICBGb3JcbiAqIGJlc3QgcGVyZm9ybWFuY2UsIGFkZCBhcyBtYW55IHBvaW50UHJpbWl0aXZlcyBhcyBwb3NzaWJsZSBiZWZvcmUgY2FsbGluZyA8Y29kZT51cGRhdGU8L2NvZGU+LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEV4YW1wbGUgMTogIEFkZCBhIHBvaW50LCBzcGVjaWZ5aW5nIGFsbCB0aGUgZGVmYXVsdCB2YWx1ZXMuXG4gKiB2YXIgcCA9IHBvaW50UHJpbWl0aXZlcy5hZGQoe1xuICogICBzaG93IDogdHJ1ZSxcbiAqICAgcG9zaXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5aRVJPLFxuICogICBwaXhlbFNpemUgOiAxMC4wLFxuICogICBjb2xvciA6IENlc2l1bS5Db2xvci5XSElURSxcbiAqICAgb3V0bGluZUNvbG9yIDogQ2VzaXVtLkNvbG9yLlRSQU5TUEFSRU5ULFxuICogICBvdXRsaW5lV2lkdGggOiAwLjAsXG4gKiAgIGlkIDogdW5kZWZpbmVkXG4gKiB9KTtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRXhhbXBsZSAyOiAgU3BlY2lmeSBvbmx5IHRoZSBwb2ludCdzIGNhcnRvZ3JhcGhpYyBwb3NpdGlvbi5cbiAqIHZhciBwID0gcG9pbnRQcmltaXRpdmVzLmFkZCh7XG4gKiAgIHBvc2l0aW9uIDogQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMobG9uZ2l0dWRlLCBsYXRpdHVkZSwgaGVpZ2h0KVxuICogfSk7XG4gKlxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jcmVtb3ZlXG4gKiBAc2VlIFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiNyZW1vdmVBbGxcbiAqL1xuUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICB2YXIgcCA9IG5ldyBQb2ludFByaW1pdGl2ZShvcHRpb25zLCB0aGlzKTtcbiAgcC5faW5kZXggPSB0aGlzLl9wb2ludFByaW1pdGl2ZXMubGVuZ3RoO1xuXG4gIHRoaXMuX3BvaW50UHJpbWl0aXZlcy5wdXNoKHApO1xuICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XG5cbiAgcmV0dXJuIHA7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYSBwb2ludCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UG9pbnRQcmltaXRpdmV9IHBvaW50UHJpbWl0aXZlIFRoZSBwb2ludCB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhlIHBvaW50IHdhcyByZW1vdmVkOyA8Y29kZT5mYWxzZTwvY29kZT4gaWYgdGhlIHBvaW50IHdhcyBub3QgZm91bmQgaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBlcmZvcm1hbmNlIENhbGxpbmcgPGNvZGU+cmVtb3ZlPC9jb2RlPiBpcyBleHBlY3RlZCBjb25zdGFudCB0aW1lLiAgSG93ZXZlciwgdGhlIGNvbGxlY3Rpb24ncyB2ZXJ0ZXggYnVmZmVyXG4gKiBpcyByZXdyaXR0ZW4gLSBhbiA8Y29kZT5PKG4pPC9jb2RlPiBvcGVyYXRpb24gdGhhdCBhbHNvIGluY3VycyBDUFUgdG8gR1BVIG92ZXJoZWFkLiAgRm9yXG4gKiBiZXN0IHBlcmZvcm1hbmNlLCByZW1vdmUgYXMgbWFueSBwb2ludHMgYXMgcG9zc2libGUgYmVmb3JlIGNhbGxpbmcgPGNvZGU+dXBkYXRlPC9jb2RlPi5cbiAqIElmIHlvdSBpbnRlbmQgdG8gdGVtcG9yYXJpbHkgaGlkZSBhIHBvaW50LCBpdCBpcyB1c3VhbGx5IG1vcmUgZWZmaWNpZW50IHRvIGNhbGxcbiAqIHtAbGluayBQb2ludFByaW1pdGl2ZSNzaG93fSBpbnN0ZWFkIG9mIHJlbW92aW5nIGFuZCByZS1hZGRpbmcgdGhlIHBvaW50LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBwID0gcG9pbnRQcmltaXRpdmVzLmFkZCguLi4pO1xuICogcG9pbnRQcmltaXRpdmVzLnJlbW92ZShwKTsgIC8vIFJldHVybnMgdHJ1ZVxuICpcbiAqIEBzZWUgUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uI2FkZFxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jcmVtb3ZlQWxsXG4gKiBAc2VlIFBvaW50UHJpbWl0aXZlI3Nob3dcbiAqL1xuUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAocG9pbnRQcmltaXRpdmUpIHtcbiAgaWYgKHRoaXMuY29udGFpbnMocG9pbnRQcmltaXRpdmUpKSB7XG4gICAgdGhpcy5fcG9pbnRQcmltaXRpdmVzW3BvaW50UHJpbWl0aXZlLl9pbmRleF0gPSBudWxsOyAvLyBSZW1vdmVkIGxhdGVyXG4gICAgdGhpcy5fcG9pbnRQcmltaXRpdmVzUmVtb3ZlZCA9IHRydWU7XG4gICAgdGhpcy5fY3JlYXRlVmVydGV4QXJyYXkgPSB0cnVlO1xuICAgIHBvaW50UHJpbWl0aXZlLl9kZXN0cm95KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIHBvaW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwZXJmb3JtYW5jZSA8Y29kZT5PKG4pPC9jb2RlPi4gIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHJlbW92ZSBhbGwgdGhlIHBvaW50c1xuICogZnJvbSBhIGNvbGxlY3Rpb24gYW5kIHRoZW4gYWRkIG5ldyBvbmVzIHRoYW4gdG8gY3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gZW50aXJlbHkuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogcG9pbnRQcmltaXRpdmVzLmFkZCguLi4pO1xuICogcG9pbnRQcmltaXRpdmVzLmFkZCguLi4pO1xuICogcG9pbnRQcmltaXRpdmVzLnJlbW92ZUFsbCgpO1xuICpcbiAqIEBzZWUgUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uI2FkZFxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jcmVtb3ZlXG4gKi9cblBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKCkge1xuICBkZXN0cm95UG9pbnRQcmltaXRpdmVzKHRoaXMuX3BvaW50UHJpbWl0aXZlcyk7XG4gIHRoaXMuX3BvaW50UHJpbWl0aXZlcyA9IFtdO1xuICB0aGlzLl9wb2ludFByaW1pdGl2ZXNUb1VwZGF0ZSA9IFtdO1xuICB0aGlzLl9wb2ludFByaW1pdGl2ZXNUb1VwZGF0ZUluZGV4ID0gMDtcbiAgdGhpcy5fcG9pbnRQcmltaXRpdmVzUmVtb3ZlZCA9IGZhbHNlO1xuXG4gIHRoaXMuX2NyZWF0ZVZlcnRleEFycmF5ID0gdHJ1ZTtcbn07XG5cbmZ1bmN0aW9uIHJlbW92ZVBvaW50UHJpbWl0aXZlcyhwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24pIHtcbiAgaWYgKHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5fcG9pbnRQcmltaXRpdmVzUmVtb3ZlZCkge1xuICAgIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5fcG9pbnRQcmltaXRpdmVzUmVtb3ZlZCA9IGZhbHNlO1xuXG4gICAgdmFyIG5ld1BvaW50UHJpbWl0aXZlcyA9IFtdO1xuICAgIHZhciBwb2ludFByaW1pdGl2ZXMgPSBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX3BvaW50UHJpbWl0aXZlcztcbiAgICB2YXIgbGVuZ3RoID0gcG9pbnRQcmltaXRpdmVzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHBvaW50UHJpbWl0aXZlID0gcG9pbnRQcmltaXRpdmVzW2ldO1xuICAgICAgaWYgKHBvaW50UHJpbWl0aXZlKSB7XG4gICAgICAgIHBvaW50UHJpbWl0aXZlLl9pbmRleCA9IGorKztcbiAgICAgICAgbmV3UG9pbnRQcmltaXRpdmVzLnB1c2gocG9pbnRQcmltaXRpdmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5fcG9pbnRQcmltaXRpdmVzID0gbmV3UG9pbnRQcmltaXRpdmVzO1xuICB9XG59XG5cblBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZVBvaW50UHJpbWl0aXZlID0gZnVuY3Rpb24gKFxuICBwb2ludFByaW1pdGl2ZSxcbiAgcHJvcGVydHlDaGFuZ2VkXG4pIHtcbiAgaWYgKCFwb2ludFByaW1pdGl2ZS5fZGlydHkpIHtcbiAgICB0aGlzLl9wb2ludFByaW1pdGl2ZXNUb1VwZGF0ZVtcbiAgICAgIHRoaXMuX3BvaW50UHJpbWl0aXZlc1RvVXBkYXRlSW5kZXgrK1xuICAgIF0gPSBwb2ludFByaW1pdGl2ZTtcbiAgfVxuXG4gICsrdGhpcy5fcHJvcGVydGllc0NoYW5nZWRbcHJvcGVydHlDaGFuZ2VkXTtcbn07XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGlzIGNvbGxlY3Rpb24gY29udGFpbnMgYSBnaXZlbiBwb2ludC5cbiAqXG4gKiBAcGFyYW0ge1BvaW50UHJpbWl0aXZlfSBbcG9pbnRQcmltaXRpdmVdIFRoZSBwb2ludCB0byBjaGVjayBmb3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGlzIGNvbGxlY3Rpb24gY29udGFpbnMgdGhlIHBvaW50LCBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jZ2V0XG4gKi9cblBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAocG9pbnRQcmltaXRpdmUpIHtcbiAgcmV0dXJuIChcbiAgICBkZWZpbmVkKHBvaW50UHJpbWl0aXZlKSAmJiBwb2ludFByaW1pdGl2ZS5fcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uID09PSB0aGlzXG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IGluIHRoZSBjb2xsZWN0aW9uIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguICBJbmRpY2VzIGFyZSB6ZXJvLWJhc2VkXG4gKiBhbmQgaW5jcmVhc2UgYXMgcG9pbnRzIGFyZSBhZGRlZC4gIFJlbW92aW5nIGEgcG9pbnQgc2hpZnRzIGFsbCBwb2ludHMgYWZ0ZXJcbiAqIGl0IHRvIHRoZSBsZWZ0LCBjaGFuZ2luZyB0aGVpciBpbmRpY2VzLiAgVGhpcyBmdW5jdGlvbiBpcyBjb21tb25seSB1c2VkIHdpdGhcbiAqIHtAbGluayBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jbGVuZ3RofSB0byBpdGVyYXRlIG92ZXIgYWxsIHRoZSBwb2ludHNcbiAqIGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgcG9pbnQuXG4gKiBAcmV0dXJucyB7UG9pbnRQcmltaXRpdmV9IFRoZSBwb2ludCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICpcbiAqIEBwZXJmb3JtYW5jZSBFeHBlY3RlZCBjb25zdGFudCB0aW1lLiAgSWYgcG9pbnRzIHdlcmUgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZFxuICoge0BsaW5rIFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiN1cGRhdGV9IHdhcyBub3QgY2FsbGVkLCBhbiBpbXBsaWNpdCA8Y29kZT5PKG4pPC9jb2RlPlxuICogb3BlcmF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUb2dnbGUgdGhlIHNob3cgcHJvcGVydHkgb2YgZXZlcnkgcG9pbnQgaW4gdGhlIGNvbGxlY3Rpb25cbiAqIHZhciBsZW4gPSBwb2ludFByaW1pdGl2ZXMubGVuZ3RoO1xuICogZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICogICB2YXIgcCA9IHBvaW50UHJpbWl0aXZlcy5nZXQoaSk7XG4gKiAgIHAuc2hvdyA9ICFwLnNob3c7XG4gKiB9XG4gKlxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jbGVuZ3RoXG4gKi9cblBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChpbmRleCkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJpbmRleCBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgcmVtb3ZlUG9pbnRQcmltaXRpdmVzKHRoaXMpO1xuICByZXR1cm4gdGhpcy5fcG9pbnRQcmltaXRpdmVzW2luZGV4XTtcbn07XG5cblBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5wcm90b3R5cGUuY29tcHV0ZU5ld0J1ZmZlcnNVc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGJ1ZmZlcnNVc2FnZSA9IHRoaXMuX2J1ZmZlcnNVc2FnZTtcbiAgdmFyIHVzYWdlQ2hhbmdlZCA9IGZhbHNlO1xuXG4gIHZhciBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllc0NoYW5nZWQ7XG4gIGZvciAodmFyIGsgPSAwOyBrIDwgTlVNQkVSX09GX1BST1BFUlRJRVM7ICsraykge1xuICAgIHZhciBuZXdVc2FnZSA9XG4gICAgICBwcm9wZXJ0aWVzW2tdID09PSAwID8gQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcgOiBCdWZmZXJVc2FnZS5TVFJFQU1fRFJBVztcbiAgICB1c2FnZUNoYW5nZWQgPSB1c2FnZUNoYW5nZWQgfHwgYnVmZmVyc1VzYWdlW2tdICE9PSBuZXdVc2FnZTtcbiAgICBidWZmZXJzVXNhZ2Vba10gPSBuZXdVc2FnZTtcbiAgfVxuXG4gIHJldHVybiB1c2FnZUNoYW5nZWQ7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVWQUYoY29udGV4dCwgbnVtYmVyT2ZQb2ludFByaW1pdGl2ZXMsIGJ1ZmZlcnNVc2FnZSkge1xuICByZXR1cm4gbmV3IFZlcnRleEFycmF5RmFjYWRlKFxuICAgIGNvbnRleHQsXG4gICAgW1xuICAgICAge1xuICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uSGlnaEFuZFNpemUsXG4gICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXG4gICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtQT1NJVElPTl9JTkRFWF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uTG93QW5kU2hvdyxcbiAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogNCxcbiAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgICB1c2FnZTogYnVmZmVyc1VzYWdlW1BPU0lUSU9OX0lOREVYXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMuY29tcHJlc3NlZEF0dHJpYnV0ZTAsXG4gICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXG4gICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtDT0xPUl9JTkRFWF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLmNvbXByZXNzZWRBdHRyaWJ1dGUxLFxuICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxuICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgIHVzYWdlOiBidWZmZXJzVXNhZ2VbVFJBTlNMVUNFTkNZX0JZX0RJU1RBTkNFX0lOREVYXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMuc2NhbGVCeURpc3RhbmNlLFxuICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxuICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgIHVzYWdlOiBidWZmZXJzVXNhZ2VbU0NBTEVfQllfRElTVEFOQ0VfSU5ERVhdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25BbmREaXNhYmxlRGVwdGgsXG4gICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTl9JTkRFWF0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgbnVtYmVyT2ZQb2ludFByaW1pdGl2ZXNcbiAgKTsgLy8gMSB2ZXJ0ZXggcGVyIHBvaW50UHJpbWl0aXZlXG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vLyBQRVJGT1JNQU5DRV9JREVBOiAgU2F2ZSBtZW1vcnkgaWYgYSBwcm9wZXJ0eSBpcyB0aGUgc2FtZSBmb3IgYWxsIHBvaW50UHJpbWl0aXZlcywgdXNlIGEgbGF0Y2hlZCBhdHRyaWJ1dGUgc3RhdGUsXG4vLyBpbnN0ZWFkIG9mIHN0b3JpbmcgaXQgaW4gYSB2ZXJ0ZXggYnVmZmVyLlxuXG52YXIgd3JpdGVQb3NpdGlvblNjcmF0Y2ggPSBuZXcgRW5jb2RlZENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gd3JpdGVQb3NpdGlvblNpemVBbmRPdXRsaW5lKFxuICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24sXG4gIGNvbnRleHQsXG4gIHZhZldyaXRlcnMsXG4gIHBvaW50UHJpbWl0aXZlXG4pIHtcbiAgdmFyIGkgPSBwb2ludFByaW1pdGl2ZS5faW5kZXg7XG4gIHZhciBwb3NpdGlvbiA9IHBvaW50UHJpbWl0aXZlLl9nZXRBY3R1YWxQb3NpdGlvbigpO1xuXG4gIGlmIChwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX21vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgQm91bmRpbmdTcGhlcmUuZXhwYW5kKFxuICAgICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9iYXNlVm9sdW1lLFxuICAgICAgcG9zaXRpb24sXG4gICAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX2Jhc2VWb2x1bWVcbiAgICApO1xuICAgIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5fYm91bmRpbmdWb2x1bWVEaXJ0eSA9IHRydWU7XG4gIH1cblxuICBFbmNvZGVkQ2FydGVzaWFuMy5mcm9tQ2FydGVzaWFuKHBvc2l0aW9uLCB3cml0ZVBvc2l0aW9uU2NyYXRjaCk7XG4gIHZhciBwaXhlbFNpemUgPSBwb2ludFByaW1pdGl2ZS5waXhlbFNpemU7XG4gIHZhciBvdXRsaW5lV2lkdGggPSBwb2ludFByaW1pdGl2ZS5vdXRsaW5lV2lkdGg7XG5cbiAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9tYXhQaXhlbFNpemUgPSBNYXRoLm1heChcbiAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX21heFBpeGVsU2l6ZSxcbiAgICBwaXhlbFNpemUgKyBvdXRsaW5lV2lkdGhcbiAgKTtcblxuICB2YXIgcG9zaXRpb25IaWdoV3JpdGVyID0gdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMucG9zaXRpb25IaWdoQW5kU2l6ZV07XG4gIHZhciBoaWdoID0gd3JpdGVQb3NpdGlvblNjcmF0Y2guaGlnaDtcbiAgcG9zaXRpb25IaWdoV3JpdGVyKGksIGhpZ2gueCwgaGlnaC55LCBoaWdoLnosIHBpeGVsU2l6ZSk7XG5cbiAgdmFyIHBvc2l0aW9uTG93V3JpdGVyID0gdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMucG9zaXRpb25Mb3dBbmRPdXRsaW5lXTtcbiAgdmFyIGxvdyA9IHdyaXRlUG9zaXRpb25TY3JhdGNoLmxvdztcbiAgcG9zaXRpb25Mb3dXcml0ZXIoaSwgbG93LngsIGxvdy55LCBsb3cueiwgb3V0bGluZVdpZHRoKTtcbn1cblxudmFyIExFRlRfU0hJRlQxNiA9IDY1NTM2LjA7IC8vIDJeMTZcbnZhciBMRUZUX1NISUZUOCA9IDI1Ni4wOyAvLyAyXjhcblxuZnVuY3Rpb24gd3JpdGVDb21wcmVzc2VkQXR0cmliMChcbiAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLFxuICBjb250ZXh0LFxuICB2YWZXcml0ZXJzLFxuICBwb2ludFByaW1pdGl2ZVxuKSB7XG4gIHZhciBpID0gcG9pbnRQcmltaXRpdmUuX2luZGV4O1xuXG4gIHZhciBjb2xvciA9IHBvaW50UHJpbWl0aXZlLmNvbG9yO1xuICB2YXIgcGlja0NvbG9yID0gcG9pbnRQcmltaXRpdmUuZ2V0UGlja0lkKGNvbnRleHQpLmNvbG9yO1xuICB2YXIgb3V0bGluZUNvbG9yID0gcG9pbnRQcmltaXRpdmUub3V0bGluZUNvbG9yO1xuXG4gIHZhciByZWQgPSBDb2xvci5mbG9hdFRvQnl0ZShjb2xvci5yZWQpO1xuICB2YXIgZ3JlZW4gPSBDb2xvci5mbG9hdFRvQnl0ZShjb2xvci5ncmVlbik7XG4gIHZhciBibHVlID0gQ29sb3IuZmxvYXRUb0J5dGUoY29sb3IuYmx1ZSk7XG4gIHZhciBjb21wcmVzc2VkMCA9IHJlZCAqIExFRlRfU0hJRlQxNiArIGdyZWVuICogTEVGVF9TSElGVDggKyBibHVlO1xuXG4gIHJlZCA9IENvbG9yLmZsb2F0VG9CeXRlKG91dGxpbmVDb2xvci5yZWQpO1xuICBncmVlbiA9IENvbG9yLmZsb2F0VG9CeXRlKG91dGxpbmVDb2xvci5ncmVlbik7XG4gIGJsdWUgPSBDb2xvci5mbG9hdFRvQnl0ZShvdXRsaW5lQ29sb3IuYmx1ZSk7XG4gIHZhciBjb21wcmVzc2VkMSA9IHJlZCAqIExFRlRfU0hJRlQxNiArIGdyZWVuICogTEVGVF9TSElGVDggKyBibHVlO1xuXG4gIHJlZCA9IENvbG9yLmZsb2F0VG9CeXRlKHBpY2tDb2xvci5yZWQpO1xuICBncmVlbiA9IENvbG9yLmZsb2F0VG9CeXRlKHBpY2tDb2xvci5ncmVlbik7XG4gIGJsdWUgPSBDb2xvci5mbG9hdFRvQnl0ZShwaWNrQ29sb3IuYmx1ZSk7XG4gIHZhciBjb21wcmVzc2VkMiA9IHJlZCAqIExFRlRfU0hJRlQxNiArIGdyZWVuICogTEVGVF9TSElGVDggKyBibHVlO1xuXG4gIHZhciBjb21wcmVzc2VkMyA9XG4gICAgQ29sb3IuZmxvYXRUb0J5dGUoY29sb3IuYWxwaGEpICogTEVGVF9TSElGVDE2ICtcbiAgICBDb2xvci5mbG9hdFRvQnl0ZShvdXRsaW5lQ29sb3IuYWxwaGEpICogTEVGVF9TSElGVDggK1xuICAgIENvbG9yLmZsb2F0VG9CeXRlKHBpY2tDb2xvci5hbHBoYSk7XG5cbiAgdmFyIHdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLmNvbXByZXNzZWRBdHRyaWJ1dGUwXTtcbiAgd3JpdGVyKGksIGNvbXByZXNzZWQwLCBjb21wcmVzc2VkMSwgY29tcHJlc3NlZDIsIGNvbXByZXNzZWQzKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVDb21wcmVzc2VkQXR0cmliMShcbiAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLFxuICBjb250ZXh0LFxuICB2YWZXcml0ZXJzLFxuICBwb2ludFByaW1pdGl2ZVxuKSB7XG4gIHZhciBpID0gcG9pbnRQcmltaXRpdmUuX2luZGV4O1xuXG4gIHZhciBuZWFyID0gMC4wO1xuICB2YXIgbmVhclZhbHVlID0gMS4wO1xuICB2YXIgZmFyID0gMS4wO1xuICB2YXIgZmFyVmFsdWUgPSAxLjA7XG5cbiAgdmFyIHRyYW5zbHVjZW5jeSA9IHBvaW50UHJpbWl0aXZlLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2U7XG4gIGlmIChkZWZpbmVkKHRyYW5zbHVjZW5jeSkpIHtcbiAgICBuZWFyID0gdHJhbnNsdWNlbmN5Lm5lYXI7XG4gICAgbmVhclZhbHVlID0gdHJhbnNsdWNlbmN5Lm5lYXJWYWx1ZTtcbiAgICBmYXIgPSB0cmFuc2x1Y2VuY3kuZmFyO1xuICAgIGZhclZhbHVlID0gdHJhbnNsdWNlbmN5LmZhclZhbHVlO1xuXG4gICAgaWYgKG5lYXJWYWx1ZSAhPT0gMS4wIHx8IGZhclZhbHVlICE9PSAxLjApIHtcbiAgICAgIC8vIHRyYW5zbHVjZW5jeSBieSBkaXN0YW5jZSBjYWxjdWxhdGlvbiBpbiBzaGFkZXIgbmVlZCBub3QgYmUgZW5hYmxlZFxuICAgICAgLy8gdW50aWwgYSBwb2ludFByaW1pdGl2ZSB3aXRoIG5lYXIgYW5kIGZhciAhPT0gMS4wIGlzIGZvdW5kXG4gICAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX3NoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzaG93ID0gcG9pbnRQcmltaXRpdmUuc2hvdyAmJiBwb2ludFByaW1pdGl2ZS5jbHVzdGVyU2hvdztcblxuICAvLyBJZiB0aGUgY29sb3IgYWxwaGFzIGFyZSB6ZXJvLCBkbyBub3Qgc2hvdyB0aGlzIHBvaW50UHJpbWl0aXZlLiAgVGhpcyBsZXRzIHVzIGF2b2lkIHByb3ZpZGluZ1xuICAvLyBjb2xvciBkdXJpbmcgdGhlIHBpY2sgcGFzcyBhbmQgYWxzbyBlbGltaW5hdGVzIGEgZGlzY2FyZCBpbiB0aGUgZnJhZ21lbnQgc2hhZGVyLlxuICBpZiAoXG4gICAgcG9pbnRQcmltaXRpdmUuY29sb3IuYWxwaGEgPT09IDAuMCAmJlxuICAgIHBvaW50UHJpbWl0aXZlLm91dGxpbmVDb2xvci5hbHBoYSA9PT0gMC4wXG4gICkge1xuICAgIHNob3cgPSBmYWxzZTtcbiAgfVxuXG4gIG5lYXJWYWx1ZSA9IENlc2l1bU1hdGguY2xhbXAobmVhclZhbHVlLCAwLjAsIDEuMCk7XG4gIG5lYXJWYWx1ZSA9IG5lYXJWYWx1ZSA9PT0gMS4wID8gMjU1LjAgOiAobmVhclZhbHVlICogMjU1LjApIHwgMDtcbiAgdmFyIGNvbXByZXNzZWQwID0gKHNob3cgPyAxLjAgOiAwLjApICogTEVGVF9TSElGVDggKyBuZWFyVmFsdWU7XG5cbiAgZmFyVmFsdWUgPSBDZXNpdW1NYXRoLmNsYW1wKGZhclZhbHVlLCAwLjAsIDEuMCk7XG4gIGZhclZhbHVlID0gZmFyVmFsdWUgPT09IDEuMCA/IDI1NS4wIDogKGZhclZhbHVlICogMjU1LjApIHwgMDtcbiAgdmFyIGNvbXByZXNzZWQxID0gZmFyVmFsdWU7XG5cbiAgdmFyIHdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLmNvbXByZXNzZWRBdHRyaWJ1dGUxXTtcbiAgd3JpdGVyKGksIGNvbXByZXNzZWQwLCBjb21wcmVzc2VkMSwgbmVhciwgZmFyKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVTY2FsZUJ5RGlzdGFuY2UoXG4gIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbixcbiAgY29udGV4dCxcbiAgdmFmV3JpdGVycyxcbiAgcG9pbnRQcmltaXRpdmVcbikge1xuICB2YXIgaSA9IHBvaW50UHJpbWl0aXZlLl9pbmRleDtcbiAgdmFyIHdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLnNjYWxlQnlEaXN0YW5jZV07XG4gIHZhciBuZWFyID0gMC4wO1xuICB2YXIgbmVhclZhbHVlID0gMS4wO1xuICB2YXIgZmFyID0gMS4wO1xuICB2YXIgZmFyVmFsdWUgPSAxLjA7XG5cbiAgdmFyIHNjYWxlID0gcG9pbnRQcmltaXRpdmUuc2NhbGVCeURpc3RhbmNlO1xuICBpZiAoZGVmaW5lZChzY2FsZSkpIHtcbiAgICBuZWFyID0gc2NhbGUubmVhcjtcbiAgICBuZWFyVmFsdWUgPSBzY2FsZS5uZWFyVmFsdWU7XG4gICAgZmFyID0gc2NhbGUuZmFyO1xuICAgIGZhclZhbHVlID0gc2NhbGUuZmFyVmFsdWU7XG5cbiAgICBpZiAobmVhclZhbHVlICE9PSAxLjAgfHwgZmFyVmFsdWUgIT09IDEuMCkge1xuICAgICAgLy8gc2NhbGUgYnkgZGlzdGFuY2UgY2FsY3VsYXRpb24gaW4gc2hhZGVyIG5lZWQgbm90IGJlIGVuYWJsZWRcbiAgICAgIC8vIHVudGlsIGEgcG9pbnRQcmltaXRpdmUgd2l0aCBuZWFyIGFuZCBmYXIgIT09IDEuMCBpcyBmb3VuZFxuICAgICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9zaGFkZXJTY2FsZUJ5RGlzdGFuY2UgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHdyaXRlcihpLCBuZWFyLCBuZWFyVmFsdWUsIGZhciwgZmFyVmFsdWUpO1xufVxuXG5mdW5jdGlvbiB3cml0ZURpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkFuZERlcHRoRGlzYWJsZShcbiAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLFxuICBjb250ZXh0LFxuICB2YWZXcml0ZXJzLFxuICBwb2ludFByaW1pdGl2ZVxuKSB7XG4gIHZhciBpID0gcG9pbnRQcmltaXRpdmUuX2luZGV4O1xuICB2YXIgd3JpdGVyID1cbiAgICB2YWZXcml0ZXJzW2F0dHJpYnV0ZUxvY2F0aW9ucy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25BbmREaXNhYmxlRGVwdGhdO1xuICB2YXIgbmVhciA9IDAuMDtcbiAgdmFyIGZhciA9IE51bWJlci5NQVhfVkFMVUU7XG5cbiAgdmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IHBvaW50UHJpbWl0aXZlLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbjtcbiAgaWYgKGRlZmluZWQoZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKSkge1xuICAgIG5lYXIgPSBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24ubmVhcjtcbiAgICBmYXIgPSBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZmFyO1xuXG4gICAgbmVhciAqPSBuZWFyO1xuICAgIGZhciAqPSBmYXI7XG5cbiAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX3NoYWRlckRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IHRydWU7XG4gIH1cblxuICB2YXIgZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlID0gcG9pbnRQcmltaXRpdmUuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlO1xuICBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgKj0gZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlO1xuICBpZiAoZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlID4gMC4wKSB7XG4gICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9zaGFkZXJEaXNhYmxlRGVwdGhEaXN0YW5jZSA9IHRydWU7XG4gICAgaWYgKGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gICAgICBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSAtMS4wO1xuICAgIH1cbiAgfVxuXG4gIHdyaXRlcihpLCBuZWFyLCBmYXIsIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlUG9pbnRQcmltaXRpdmUoXG4gIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbixcbiAgY29udGV4dCxcbiAgdmFmV3JpdGVycyxcbiAgcG9pbnRQcmltaXRpdmVcbikge1xuICB3cml0ZVBvc2l0aW9uU2l6ZUFuZE91dGxpbmUoXG4gICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLFxuICAgIGNvbnRleHQsXG4gICAgdmFmV3JpdGVycyxcbiAgICBwb2ludFByaW1pdGl2ZVxuICApO1xuICB3cml0ZUNvbXByZXNzZWRBdHRyaWIwKFxuICAgIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbixcbiAgICBjb250ZXh0LFxuICAgIHZhZldyaXRlcnMsXG4gICAgcG9pbnRQcmltaXRpdmVcbiAgKTtcbiAgd3JpdGVDb21wcmVzc2VkQXR0cmliMShcbiAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24sXG4gICAgY29udGV4dCxcbiAgICB2YWZXcml0ZXJzLFxuICAgIHBvaW50UHJpbWl0aXZlXG4gICk7XG4gIHdyaXRlU2NhbGVCeURpc3RhbmNlKFxuICAgIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbixcbiAgICBjb250ZXh0LFxuICAgIHZhZldyaXRlcnMsXG4gICAgcG9pbnRQcmltaXRpdmVcbiAgKTtcbiAgd3JpdGVEaXN0YW5jZURpc3BsYXlDb25kaXRpb25BbmREZXB0aERpc2FibGUoXG4gICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLFxuICAgIGNvbnRleHQsXG4gICAgdmFmV3JpdGVycyxcbiAgICBwb2ludFByaW1pdGl2ZVxuICApO1xufVxuXG5mdW5jdGlvbiByZWNvbXB1dGVBY3R1YWxQb3NpdGlvbnMoXG4gIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbixcbiAgcG9pbnRQcmltaXRpdmVzLFxuICBsZW5ndGgsXG4gIGZyYW1lU3RhdGUsXG4gIG1vZGVsTWF0cml4LFxuICByZWNvbXB1dGVCb3VuZGluZ1ZvbHVtZVxuKSB7XG4gIHZhciBib3VuZGluZ1ZvbHVtZTtcbiAgaWYgKGZyYW1lU3RhdGUubW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0QpIHtcbiAgICBib3VuZGluZ1ZvbHVtZSA9IHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5fYmFzZVZvbHVtZTtcbiAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX2JvdW5kaW5nVm9sdW1lRGlydHkgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGJvdW5kaW5nVm9sdW1lID0gcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9iYXNlVm9sdW1lMkQ7XG4gIH1cblxuICB2YXIgcG9zaXRpb25zID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcG9pbnRQcmltaXRpdmUgPSBwb2ludFByaW1pdGl2ZXNbaV07XG4gICAgdmFyIHBvc2l0aW9uID0gcG9pbnRQcmltaXRpdmUucG9zaXRpb247XG4gICAgdmFyIGFjdHVhbFBvc2l0aW9uID0gUG9pbnRQcmltaXRpdmUuX2NvbXB1dGVBY3R1YWxQb3NpdGlvbihcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIG1vZGVsTWF0cml4XG4gICAgKTtcbiAgICBpZiAoZGVmaW5lZChhY3R1YWxQb3NpdGlvbikpIHtcbiAgICAgIHBvaW50UHJpbWl0aXZlLl9zZXRBY3R1YWxQb3NpdGlvbihhY3R1YWxQb3NpdGlvbik7XG5cbiAgICAgIGlmIChyZWNvbXB1dGVCb3VuZGluZ1ZvbHVtZSkge1xuICAgICAgICBwb3NpdGlvbnMucHVzaChhY3R1YWxQb3NpdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBCb3VuZGluZ1NwaGVyZS5leHBhbmQoYm91bmRpbmdWb2x1bWUsIGFjdHVhbFBvc2l0aW9uLCBib3VuZGluZ1ZvbHVtZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHJlY29tcHV0ZUJvdW5kaW5nVm9sdW1lKSB7XG4gICAgQm91bmRpbmdTcGhlcmUuZnJvbVBvaW50cyhwb3NpdGlvbnMsIGJvdW5kaW5nVm9sdW1lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVNb2RlKHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiwgZnJhbWVTdGF0ZSkge1xuICB2YXIgbW9kZSA9IGZyYW1lU3RhdGUubW9kZTtcblxuICB2YXIgcG9pbnRQcmltaXRpdmVzID0gcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9wb2ludFByaW1pdGl2ZXM7XG4gIHZhciBwb2ludFByaW1pdGl2ZXNUb1VwZGF0ZSA9XG4gICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9wb2ludFByaW1pdGl2ZXNUb1VwZGF0ZTtcbiAgdmFyIG1vZGVsTWF0cml4ID0gcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9tb2RlbE1hdHJpeDtcblxuICBpZiAoXG4gICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9jcmVhdGVWZXJ0ZXhBcnJheSB8fFxuICAgIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5fbW9kZSAhPT0gbW9kZSB8fFxuICAgIChtb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUzRCAmJlxuICAgICAgIU1hdHJpeDQuZXF1YWxzKG1vZGVsTWF0cml4LCBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24ubW9kZWxNYXRyaXgpKVxuICApIHtcbiAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX21vZGUgPSBtb2RlO1xuICAgIE1hdHJpeDQuY2xvbmUocG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLm1vZGVsTWF0cml4LCBtb2RlbE1hdHJpeCk7XG4gICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XG5cbiAgICBpZiAoXG4gICAgICBtb2RlID09PSBTY2VuZU1vZGUuU0NFTkUzRCB8fFxuICAgICAgbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHxcbiAgICAgIG1vZGUgPT09IFNjZW5lTW9kZS5DT0xVTUJVU19WSUVXXG4gICAgKSB7XG4gICAgICByZWNvbXB1dGVBY3R1YWxQb3NpdGlvbnMoXG4gICAgICAgIHBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbixcbiAgICAgICAgcG9pbnRQcmltaXRpdmVzLFxuICAgICAgICBwb2ludFByaW1pdGl2ZXMubGVuZ3RoLFxuICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICBtb2RlbE1hdHJpeCxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgcmVjb21wdXRlQWN0dWFsUG9zaXRpb25zKFxuICAgICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLFxuICAgICAgcG9pbnRQcmltaXRpdmVzLFxuICAgICAgcG9pbnRQcmltaXRpdmVzLmxlbmd0aCxcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICBtb2RlbE1hdHJpeCxcbiAgICAgIHRydWVcbiAgICApO1xuICB9IGVsc2UgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEIHx8IG1vZGUgPT09IFNjZW5lTW9kZS5DT0xVTUJVU19WSUVXKSB7XG4gICAgcmVjb21wdXRlQWN0dWFsUG9zaXRpb25zKFxuICAgICAgcG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uLFxuICAgICAgcG9pbnRQcmltaXRpdmVzVG9VcGRhdGUsXG4gICAgICBwb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24uX3BvaW50UHJpbWl0aXZlc1RvVXBkYXRlSW5kZXgsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlQm91bmRpbmdWb2x1bWUoY29sbGVjdGlvbiwgZnJhbWVTdGF0ZSwgYm91bmRpbmdWb2x1bWUpIHtcbiAgdmFyIHBpeGVsU2l6ZSA9IGZyYW1lU3RhdGUuY2FtZXJhLmdldFBpeGVsU2l6ZShcbiAgICBib3VuZGluZ1ZvbHVtZSxcbiAgICBmcmFtZVN0YXRlLmNvbnRleHQuZHJhd2luZ0J1ZmZlcldpZHRoLFxuICAgIGZyYW1lU3RhdGUuY29udGV4dC5kcmF3aW5nQnVmZmVySGVpZ2h0XG4gICk7XG4gIHZhciBzaXplID0gcGl4ZWxTaXplICogY29sbGVjdGlvbi5fbWF4UGl4ZWxTaXplO1xuICBib3VuZGluZ1ZvbHVtZS5yYWRpdXMgKz0gc2l6ZTtcbn1cblxudmFyIHNjcmF0Y2hXcml0ZXJBcnJheSA9IFtdO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgcmVtb3ZlUG9pbnRQcmltaXRpdmVzKHRoaXMpO1xuXG4gIGlmICghdGhpcy5zaG93KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5fbWF4VG90YWxQb2ludFNpemUgPSBDb250ZXh0TGltaXRzLm1heGltdW1BbGlhc2VkUG9pbnRTaXplO1xuXG4gIHVwZGF0ZU1vZGUodGhpcywgZnJhbWVTdGF0ZSk7XG5cbiAgdmFyIHBvaW50UHJpbWl0aXZlcyA9IHRoaXMuX3BvaW50UHJpbWl0aXZlcztcbiAgdmFyIHBvaW50UHJpbWl0aXZlc0xlbmd0aCA9IHBvaW50UHJpbWl0aXZlcy5sZW5ndGg7XG4gIHZhciBwb2ludFByaW1pdGl2ZXNUb1VwZGF0ZSA9IHRoaXMuX3BvaW50UHJpbWl0aXZlc1RvVXBkYXRlO1xuICB2YXIgcG9pbnRQcmltaXRpdmVzVG9VcGRhdGVMZW5ndGggPSB0aGlzLl9wb2ludFByaW1pdGl2ZXNUb1VwZGF0ZUluZGV4O1xuXG4gIHZhciBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllc0NoYW5nZWQ7XG5cbiAgdmFyIGNyZWF0ZVZlcnRleEFycmF5ID0gdGhpcy5fY3JlYXRlVmVydGV4QXJyYXk7XG5cbiAgdmFyIHZhZldyaXRlcnM7XG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuICB2YXIgcGFzcyA9IGZyYW1lU3RhdGUucGFzc2VzO1xuICB2YXIgcGlja2luZyA9IHBhc3MucGljaztcblxuICAvLyBQRVJGT1JNQU5DRV9JREVBOiBSb3VuZCByb2JpbiBtdWx0aXBsZSBidWZmZXJzLlxuICBpZiAoY3JlYXRlVmVydGV4QXJyYXkgfHwgKCFwaWNraW5nICYmIHRoaXMuY29tcHV0ZU5ld0J1ZmZlcnNVc2FnZSgpKSkge1xuICAgIHRoaXMuX2NyZWF0ZVZlcnRleEFycmF5ID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IE5VTUJFUl9PRl9QUk9QRVJUSUVTOyArK2spIHtcbiAgICAgIHByb3BlcnRpZXNba10gPSAwO1xuICAgIH1cblxuICAgIHRoaXMuX3ZhZiA9IHRoaXMuX3ZhZiAmJiB0aGlzLl92YWYuZGVzdHJveSgpO1xuXG4gICAgaWYgKHBvaW50UHJpbWl0aXZlc0xlbmd0aCA+IDApIHtcbiAgICAgIC8vIFBFUkZPUk1BTkNFX0lERUE6ICBJbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9uZSwgcmVzaXplIGxpa2Ugc3RkOjp2ZWN0b3IuXG4gICAgICB0aGlzLl92YWYgPSBjcmVhdGVWQUYoY29udGV4dCwgcG9pbnRQcmltaXRpdmVzTGVuZ3RoLCB0aGlzLl9idWZmZXJzVXNhZ2UpO1xuICAgICAgdmFmV3JpdGVycyA9IHRoaXMuX3ZhZi53cml0ZXJzO1xuXG4gICAgICAvLyBSZXdyaXRlIGVudGlyZSBidWZmZXIgaWYgcG9pbnRQcmltaXRpdmVzIHdlcmUgYWRkZWQgb3IgcmVtb3ZlZC5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRQcmltaXRpdmVzTGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHBvaW50UHJpbWl0aXZlID0gdGhpcy5fcG9pbnRQcmltaXRpdmVzW2ldO1xuICAgICAgICBwb2ludFByaW1pdGl2ZS5fZGlydHkgPSBmYWxzZTsgLy8gSW4gY2FzZSBpdCBuZWVkZWQgYW4gdXBkYXRlLlxuICAgICAgICB3cml0ZVBvaW50UHJpbWl0aXZlKHRoaXMsIGNvbnRleHQsIHZhZldyaXRlcnMsIHBvaW50UHJpbWl0aXZlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fdmFmLmNvbW1pdCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3BvaW50UHJpbWl0aXZlc1RvVXBkYXRlSW5kZXggPSAwO1xuICB9IGVsc2UgaWYgKHBvaW50UHJpbWl0aXZlc1RvVXBkYXRlTGVuZ3RoID4gMCkge1xuICAgIC8vIFBvaW50UHJpbWl0aXZlcyB3ZXJlIG1vZGlmaWVkLCBidXQgbm9uZSB3ZXJlIGFkZGVkIG9yIHJlbW92ZWQuXG4gICAgdmFyIHdyaXRlcnMgPSBzY3JhdGNoV3JpdGVyQXJyYXk7XG4gICAgd3JpdGVycy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKFxuICAgICAgcHJvcGVydGllc1tQT1NJVElPTl9JTkRFWF0gfHxcbiAgICAgIHByb3BlcnRpZXNbT1VUTElORV9XSURUSF9JTkRFWF0gfHxcbiAgICAgIHByb3BlcnRpZXNbUElYRUxfU0laRV9JTkRFWF1cbiAgICApIHtcbiAgICAgIHdyaXRlcnMucHVzaCh3cml0ZVBvc2l0aW9uU2l6ZUFuZE91dGxpbmUpO1xuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0aWVzW0NPTE9SX0lOREVYXSB8fCBwcm9wZXJ0aWVzW09VVExJTkVfQ09MT1JfSU5ERVhdKSB7XG4gICAgICB3cml0ZXJzLnB1c2god3JpdGVDb21wcmVzc2VkQXR0cmliMCk7XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnRpZXNbU0hPV19JTkRFWF0gfHwgcHJvcGVydGllc1tUUkFOU0xVQ0VOQ1lfQllfRElTVEFOQ0VfSU5ERVhdKSB7XG4gICAgICB3cml0ZXJzLnB1c2god3JpdGVDb21wcmVzc2VkQXR0cmliMSk7XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnRpZXNbU0NBTEVfQllfRElTVEFOQ0VfSU5ERVhdKSB7XG4gICAgICB3cml0ZXJzLnB1c2god3JpdGVTY2FsZUJ5RGlzdGFuY2UpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHByb3BlcnRpZXNbRElTVEFOQ0VfRElTUExBWV9DT05ESVRJT05fSU5ERVhdIHx8XG4gICAgICBwcm9wZXJ0aWVzW0RJU0FCTEVfREVQVEhfRElTVEFOQ0VfSU5ERVhdXG4gICAgKSB7XG4gICAgICB3cml0ZXJzLnB1c2god3JpdGVEaXN0YW5jZURpc3BsYXlDb25kaXRpb25BbmREZXB0aERpc2FibGUpO1xuICAgIH1cblxuICAgIHZhciBudW1Xcml0ZXJzID0gd3JpdGVycy5sZW5ndGg7XG5cbiAgICB2YWZXcml0ZXJzID0gdGhpcy5fdmFmLndyaXRlcnM7XG5cbiAgICBpZiAocG9pbnRQcmltaXRpdmVzVG9VcGRhdGVMZW5ndGggLyBwb2ludFByaW1pdGl2ZXNMZW5ndGggPiAwLjEpIHtcbiAgICAgIC8vIElmIG1vcmUgdGhhbiAxMCUgb2YgcG9pbnRQcmltaXRpdmUgY2hhbmdlLCByZXdyaXRlIHRoZSBlbnRpcmUgYnVmZmVyLlxuXG4gICAgICAvLyBQRVJGT1JNQU5DRV9JREVBOiAgSSB0b3RhbGx5IG1hZGUgdXAgMTAlIDopLlxuXG4gICAgICBmb3IgKHZhciBtID0gMDsgbSA8IHBvaW50UHJpbWl0aXZlc1RvVXBkYXRlTGVuZ3RoOyArK20pIHtcbiAgICAgICAgdmFyIGIgPSBwb2ludFByaW1pdGl2ZXNUb1VwZGF0ZVttXTtcbiAgICAgICAgYi5fZGlydHkgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IG51bVdyaXRlcnM7ICsrbikge1xuICAgICAgICAgIHdyaXRlcnNbbl0odGhpcywgY29udGV4dCwgdmFmV3JpdGVycywgYik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3ZhZi5jb21taXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCBwb2ludFByaW1pdGl2ZXNUb1VwZGF0ZUxlbmd0aDsgKytoKSB7XG4gICAgICAgIHZhciBiYiA9IHBvaW50UHJpbWl0aXZlc1RvVXBkYXRlW2hdO1xuICAgICAgICBiYi5fZGlydHkgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IG51bVdyaXRlcnM7ICsrbykge1xuICAgICAgICAgIHdyaXRlcnNbb10odGhpcywgY29udGV4dCwgdmFmV3JpdGVycywgYmIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhZi5zdWJDb21taXQoYmIuX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3ZhZi5lbmRTdWJDb21taXRzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fcG9pbnRQcmltaXRpdmVzVG9VcGRhdGVJbmRleCA9IDA7XG4gIH1cblxuICAvLyBJZiB0aGUgbnVtYmVyIG9mIHRvdGFsIHBvaW50UHJpbWl0aXZlcyBldmVyIHNocmlua3MgY29uc2lkZXJhYmx5XG4gIC8vIFRydW5jYXRlIHBvaW50UHJpbWl0aXZlc1RvVXBkYXRlIHNvIHRoYXQgd2UgZnJlZSBtZW1vcnkgdGhhdCB3ZSdyZVxuICAvLyBub3QgZ29pbmcgdG8gYmUgdXNpbmcuXG4gIGlmIChwb2ludFByaW1pdGl2ZXNUb1VwZGF0ZUxlbmd0aCA+IHBvaW50UHJpbWl0aXZlc0xlbmd0aCAqIDEuNSkge1xuICAgIHBvaW50UHJpbWl0aXZlc1RvVXBkYXRlLmxlbmd0aCA9IHBvaW50UHJpbWl0aXZlc0xlbmd0aDtcbiAgfVxuXG4gIGlmICghZGVmaW5lZCh0aGlzLl92YWYpIHx8ICFkZWZpbmVkKHRoaXMuX3ZhZi52YSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGhpcy5fYm91bmRpbmdWb2x1bWVEaXJ0eSkge1xuICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lRGlydHkgPSBmYWxzZTtcbiAgICBCb3VuZGluZ1NwaGVyZS50cmFuc2Zvcm0oXG4gICAgICB0aGlzLl9iYXNlVm9sdW1lLFxuICAgICAgdGhpcy5tb2RlbE1hdHJpeCxcbiAgICAgIHRoaXMuX2Jhc2VWb2x1bWVXQ1xuICAgICk7XG4gIH1cblxuICB2YXIgYm91bmRpbmdWb2x1bWU7XG4gIHZhciBtb2RlbE1hdHJpeCA9IE1hdHJpeDQuSURFTlRJVFk7XG4gIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgbW9kZWxNYXRyaXggPSB0aGlzLm1vZGVsTWF0cml4O1xuICAgIGJvdW5kaW5nVm9sdW1lID0gQm91bmRpbmdTcGhlcmUuY2xvbmUoXG4gICAgICB0aGlzLl9iYXNlVm9sdW1lV0MsXG4gICAgICB0aGlzLl9ib3VuZGluZ1ZvbHVtZVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgYm91bmRpbmdWb2x1bWUgPSBCb3VuZGluZ1NwaGVyZS5jbG9uZShcbiAgICAgIHRoaXMuX2Jhc2VWb2x1bWUyRCxcbiAgICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lXG4gICAgKTtcbiAgfVxuICB1cGRhdGVCb3VuZGluZ1ZvbHVtZSh0aGlzLCBmcmFtZVN0YXRlLCBib3VuZGluZ1ZvbHVtZSk7XG5cbiAgdmFyIGJsZW5kT3B0aW9uQ2hhbmdlZCA9IHRoaXMuX2JsZW5kT3B0aW9uICE9PSB0aGlzLmJsZW5kT3B0aW9uO1xuICB0aGlzLl9ibGVuZE9wdGlvbiA9IHRoaXMuYmxlbmRPcHRpb247XG5cbiAgaWYgKGJsZW5kT3B0aW9uQ2hhbmdlZCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX2JsZW5kT3B0aW9uID09PSBCbGVuZE9wdGlvbi5PUEFRVUUgfHxcbiAgICAgIHRoaXMuX2JsZW5kT3B0aW9uID09PSBCbGVuZE9wdGlvbi5PUEFRVUVfQU5EX1RSQU5TTFVDRU5UXG4gICAgKSB7XG4gICAgICB0aGlzLl9yc09wYXF1ZSA9IFJlbmRlclN0YXRlLmZyb21DYWNoZSh7XG4gICAgICAgIGRlcHRoVGVzdDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgZnVuYzogV2ViR0xDb25zdGFudHMuTEVRVUFMLFxuICAgICAgICB9LFxuICAgICAgICBkZXB0aE1hc2s6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcnNPcGFxdWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UIHx8XG4gICAgICB0aGlzLl9ibGVuZE9wdGlvbiA9PT0gQmxlbmRPcHRpb24uT1BBUVVFX0FORF9UUkFOU0xVQ0VOVFxuICAgICkge1xuICAgICAgdGhpcy5fcnNUcmFuc2x1Y2VudCA9IFJlbmRlclN0YXRlLmZyb21DYWNoZSh7XG4gICAgICAgIGRlcHRoVGVzdDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgZnVuYzogV2ViR0xDb25zdGFudHMuTEVRVUFMLFxuICAgICAgICB9LFxuICAgICAgICBkZXB0aE1hc2s6IGZhbHNlLFxuICAgICAgICBibGVuZGluZzogQmxlbmRpbmdTdGF0ZS5BTFBIQV9CTEVORCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yc1RyYW5zbHVjZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuX3NoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlID1cbiAgICB0aGlzLl9zaGFkZXJEaXNhYmxlRGVwdGhEaXN0YW5jZSB8fFxuICAgIGZyYW1lU3RhdGUubWluaW11bURpc2FibGVEZXB0aFRlc3REaXN0YW5jZSAhPT0gMC4wO1xuICB2YXIgdnM7XG4gIHZhciBmcztcblxuICBpZiAoXG4gICAgYmxlbmRPcHRpb25DaGFuZ2VkIHx8XG4gICAgKHRoaXMuX3NoYWRlclNjYWxlQnlEaXN0YW5jZSAmJiAhdGhpcy5fY29tcGlsZWRTaGFkZXJTY2FsZUJ5RGlzdGFuY2UpIHx8XG4gICAgKHRoaXMuX3NoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgJiZcbiAgICAgICF0aGlzLl9jb21waWxlZFNoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UpIHx8XG4gICAgKHRoaXMuX3NoYWRlckRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiAmJlxuICAgICAgIXRoaXMuX2NvbXBpbGVkU2hhZGVyRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKSB8fFxuICAgIHRoaXMuX3NoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlICE9PVxuICAgICAgdGhpcy5fY29tcGlsZWRTaGFkZXJEaXNhYmxlRGVwdGhEaXN0YW5jZVxuICApIHtcbiAgICB2cyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgc291cmNlczogW1BvaW50UHJpbWl0aXZlQ29sbGVjdGlvblZTXSxcbiAgICB9KTtcbiAgICBpZiAodGhpcy5fc2hhZGVyU2NhbGVCeURpc3RhbmNlKSB7XG4gICAgICB2cy5kZWZpbmVzLnB1c2goXCJFWUVfRElTVEFOQ0VfU0NBTElOR1wiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3NoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UpIHtcbiAgICAgIHZzLmRlZmluZXMucHVzaChcIkVZRV9ESVNUQU5DRV9UUkFOU0xVQ0VOQ1lcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zaGFkZXJEaXN0YW5jZURpc3BsYXlDb25kaXRpb24pIHtcbiAgICAgIHZzLmRlZmluZXMucHVzaChcIkRJU1RBTkNFX0RJU1BMQVlfQ09ORElUSU9OXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc2hhZGVyRGlzYWJsZURlcHRoRGlzdGFuY2UpIHtcbiAgICAgIHZzLmRlZmluZXMucHVzaChcIkRJU0FCTEVfREVQVEhfRElTVEFOQ0VcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2JsZW5kT3B0aW9uID09PSBCbGVuZE9wdGlvbi5PUEFRVUVfQU5EX1RSQU5TTFVDRU5UKSB7XG4gICAgICBmcyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgICBkZWZpbmVzOiBbXCJPUEFRVUVcIl0sXG4gICAgICAgIHNvdXJjZXM6IFtQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb25GU10sXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3NwID0gU2hhZGVyUHJvZ3JhbS5yZXBsYWNlQ2FjaGUoe1xuICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICBzaGFkZXJQcm9ncmFtOiB0aGlzLl9zcCxcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlOiB2cyxcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IGZzLFxuICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgICAgIH0pO1xuXG4gICAgICBmcyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgICBkZWZpbmVzOiBbXCJUUkFOU0xVQ0VOVFwiXSxcbiAgICAgICAgc291cmNlczogW1BvaW50UHJpbWl0aXZlQ29sbGVjdGlvbkZTXSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fc3BUcmFuc2x1Y2VudCA9IFNoYWRlclByb2dyYW0ucmVwbGFjZUNhY2hlKHtcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgc2hhZGVyUHJvZ3JhbTogdGhpcy5fc3BUcmFuc2x1Y2VudCxcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlOiB2cyxcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IGZzLFxuICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ibGVuZE9wdGlvbiA9PT0gQmxlbmRPcHRpb24uT1BBUVVFKSB7XG4gICAgICBmcyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgICBzb3VyY2VzOiBbUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uRlNdLFxuICAgICAgfSk7XG4gICAgICB0aGlzLl9zcCA9IFNoYWRlclByb2dyYW0ucmVwbGFjZUNhY2hlKHtcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgc2hhZGVyUHJvZ3JhbTogdGhpcy5fc3AsXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnMsXG4gICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBmcyxcbiAgICAgICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UKSB7XG4gICAgICBmcyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgICBzb3VyY2VzOiBbUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uRlNdLFxuICAgICAgfSk7XG4gICAgICB0aGlzLl9zcFRyYW5zbHVjZW50ID0gU2hhZGVyUHJvZ3JhbS5yZXBsYWNlQ2FjaGUoe1xuICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICBzaGFkZXJQcm9ncmFtOiB0aGlzLl9zcFRyYW5zbHVjZW50LFxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2U6IHZzLFxuICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnMsXG4gICAgICAgIGF0dHJpYnV0ZUxvY2F0aW9uczogYXR0cmlidXRlTG9jYXRpb25zLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fY29tcGlsZWRTaGFkZXJTY2FsZUJ5RGlzdGFuY2UgPSB0aGlzLl9zaGFkZXJTY2FsZUJ5RGlzdGFuY2U7XG4gICAgdGhpcy5fY29tcGlsZWRTaGFkZXJUcmFuc2x1Y2VuY3lCeURpc3RhbmNlID0gdGhpcy5fc2hhZGVyVHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcbiAgICB0aGlzLl9jb21waWxlZFNoYWRlckRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IHRoaXMuX3NoYWRlckRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbjtcbiAgICB0aGlzLl9jb21waWxlZFNoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlID0gdGhpcy5fc2hhZGVyRGlzYWJsZURlcHRoRGlzdGFuY2U7XG4gIH1cblxuICB2YXIgdmE7XG4gIHZhciB2YUxlbmd0aDtcbiAgdmFyIGNvbW1hbmQ7XG4gIHZhciBqO1xuXG4gIHZhciBjb21tYW5kTGlzdCA9IGZyYW1lU3RhdGUuY29tbWFuZExpc3Q7XG5cbiAgaWYgKHBhc3MucmVuZGVyIHx8IHBpY2tpbmcpIHtcbiAgICB2YXIgY29sb3JMaXN0ID0gdGhpcy5fY29sb3JDb21tYW5kcztcblxuICAgIHZhciBvcGFxdWUgPSB0aGlzLl9ibGVuZE9wdGlvbiA9PT0gQmxlbmRPcHRpb24uT1BBUVVFO1xuICAgIHZhciBvcGFxdWVBbmRUcmFuc2x1Y2VudCA9XG4gICAgICB0aGlzLl9ibGVuZE9wdGlvbiA9PT0gQmxlbmRPcHRpb24uT1BBUVVFX0FORF9UUkFOU0xVQ0VOVDtcblxuICAgIHZhID0gdGhpcy5fdmFmLnZhO1xuICAgIHZhTGVuZ3RoID0gdmEubGVuZ3RoO1xuXG4gICAgY29sb3JMaXN0Lmxlbmd0aCA9IHZhTGVuZ3RoO1xuICAgIHZhciB0b3RhbExlbmd0aCA9IG9wYXF1ZUFuZFRyYW5zbHVjZW50ID8gdmFMZW5ndGggKiAyIDogdmFMZW5ndGg7XG4gICAgZm9yIChqID0gMDsgaiA8IHRvdGFsTGVuZ3RoOyArK2opIHtcbiAgICAgIHZhciBvcGFxdWVDb21tYW5kID0gb3BhcXVlIHx8IChvcGFxdWVBbmRUcmFuc2x1Y2VudCAmJiBqICUgMiA9PT0gMCk7XG5cbiAgICAgIGNvbW1hbmQgPSBjb2xvckxpc3Rbal07XG4gICAgICBpZiAoIWRlZmluZWQoY29tbWFuZCkpIHtcbiAgICAgICAgY29tbWFuZCA9IGNvbG9yTGlzdFtqXSA9IG5ldyBEcmF3Q29tbWFuZCgpO1xuICAgICAgfVxuXG4gICAgICBjb21tYW5kLnByaW1pdGl2ZVR5cGUgPSBQcmltaXRpdmVUeXBlLlBPSU5UUztcbiAgICAgIGNvbW1hbmQucGFzcyA9XG4gICAgICAgIG9wYXF1ZUNvbW1hbmQgfHwgIW9wYXF1ZUFuZFRyYW5zbHVjZW50ID8gUGFzcy5PUEFRVUUgOiBQYXNzLlRSQU5TTFVDRU5UO1xuICAgICAgY29tbWFuZC5vd25lciA9IHRoaXM7XG5cbiAgICAgIHZhciBpbmRleCA9IG9wYXF1ZUFuZFRyYW5zbHVjZW50ID8gTWF0aC5mbG9vcihqIC8gMi4wKSA6IGo7XG4gICAgICBjb21tYW5kLmJvdW5kaW5nVm9sdW1lID0gYm91bmRpbmdWb2x1bWU7XG4gICAgICBjb21tYW5kLm1vZGVsTWF0cml4ID0gbW9kZWxNYXRyaXg7XG4gICAgICBjb21tYW5kLnNoYWRlclByb2dyYW0gPSBvcGFxdWVDb21tYW5kID8gdGhpcy5fc3AgOiB0aGlzLl9zcFRyYW5zbHVjZW50O1xuICAgICAgY29tbWFuZC51bmlmb3JtTWFwID0gdGhpcy5fdW5pZm9ybXM7XG4gICAgICBjb21tYW5kLnZlcnRleEFycmF5ID0gdmFbaW5kZXhdLnZhO1xuICAgICAgY29tbWFuZC5yZW5kZXJTdGF0ZSA9IG9wYXF1ZUNvbW1hbmRcbiAgICAgICAgPyB0aGlzLl9yc09wYXF1ZVxuICAgICAgICA6IHRoaXMuX3JzVHJhbnNsdWNlbnQ7XG4gICAgICBjb21tYW5kLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gdGhpcy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZTtcbiAgICAgIGNvbW1hbmQucGlja0lkID0gXCJ2X3BpY2tDb2xvclwiO1xuXG4gICAgICBjb21tYW5kTGlzdC5wdXNoKGNvbW1hbmQpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKlxuICogQHNlZSBQb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24jZGVzdHJveVxuICovXG5Qb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24ucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIERlc3Ryb3lzIHRoZSBXZWJHTCByZXNvdXJjZXMgaGVsZCBieSB0aGlzIG9iamVjdC4gIERlc3Ryb3lpbmcgYW4gb2JqZWN0IGFsbG93cyBmb3IgZGV0ZXJtaW5pc3RpY1xuICogcmVsZWFzZSBvZiBXZWJHTCByZXNvdXJjZXMsIGluc3RlYWQgb2YgcmVseWluZyBvbiB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZGVzdHJveSB0aGlzIG9iamVjdC5cbiAqIDxiciAvPjxiciAvPlxuICogT25jZSBhbiBvYmplY3QgaXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLiAgVGhlcmVmb3JlLFxuICogYXNzaWduIHRoZSByZXR1cm4gdmFsdWUgKDxjb2RlPnVuZGVmaW5lZDwvY29kZT4pIHRvIHRoZSBvYmplY3QgYXMgZG9uZSBpbiB0aGUgZXhhbXBsZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiBwb2ludFByaW1pdGl2ZXMgPSBwb2ludFByaW1pdGl2ZXMgJiYgcG9pbnRQcmltaXRpdmVzLmRlc3Ryb3koKTtcbiAqXG4gKiBAc2VlIFBvaW50UHJpbWl0aXZlQ29sbGVjdGlvbiNpc0Rlc3Ryb3llZFxuICovXG5Qb2ludFByaW1pdGl2ZUNvbGxlY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3NwID0gdGhpcy5fc3AgJiYgdGhpcy5fc3AuZGVzdHJveSgpO1xuICB0aGlzLl9zcFRyYW5zbHVjZW50ID0gdGhpcy5fc3BUcmFuc2x1Y2VudCAmJiB0aGlzLl9zcFRyYW5zbHVjZW50LmRlc3Ryb3koKTtcbiAgdGhpcy5fc3BQaWNrID0gdGhpcy5fc3BQaWNrICYmIHRoaXMuX3NwUGljay5kZXN0cm95KCk7XG4gIHRoaXMuX3ZhZiA9IHRoaXMuX3ZhZiAmJiB0aGlzLl92YWYuZGVzdHJveSgpO1xuICBkZXN0cm95UG9pbnRQcmltaXRpdmVzKHRoaXMuX3BvaW50UHJpbWl0aXZlcyk7XG5cbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgUG9pbnRQcmltaXRpdmVDb2xsZWN0aW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9462\n')},28509:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(32378);\n/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12572);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(47861);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(72248);\n/* harmony import */ var _Core_PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(61733);\n/* harmony import */ var _Material_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69592);\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A renderable polyline. Create this by calling {@link PolylineCollection#add}\n *\n * @alias Polyline\n * @internalConstructor\n * @class\n *\n * @param {Object} options Object with the following properties:\n * @param {Boolean} [options.show=true] <code>true</code> if this polyline will be shown; otherwise, <code>false</code>.\n * @param {Number} [options.width=1.0] The width of the polyline in pixels.\n * @param {Boolean} [options.loop=false] Whether a line segment will be added between the last and first line positions to make this line a loop.\n * @param {Material} [options.material=Material.ColorType] The material.\n * @param {Cartesian3[]} [options.positions] The positions.\n * @param {Object} [options.id] The user-defined object to be returned when this polyline is picked.\n * @param {DistanceDisplayCondition} [options.distanceDisplayCondition] The condition specifying at what distance from the camera that this polyline will be displayed.\n * @param {PolylineCollection} polylineCollection The renderable polyline collection.\n *\n * @see PolylineCollection\n *\n */\nfunction Polyline(options, polylineCollection) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.show, true);\n  this._width = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.width, 1.0);\n  this._loop = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.loop, false);\n  this._distanceDisplayCondition = options.distanceDisplayCondition;\n\n  this._material = options.material;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._material)) {\n    this._material = _Material_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].fromType */ .Z.fromType(_Material_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].ColorType */ .Z.ColorType, {\n      color: new _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(1.0, 1.0, 1.0, 1.0),\n    });\n  }\n\n  var positions = options.positions;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(positions)) {\n    positions = [];\n  }\n\n  this._positions = positions;\n  this._actualPositions = (0,_Core_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    positions,\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon\n  );\n\n  if (this._loop && this._actualPositions.length > 2) {\n    if (this._actualPositions === this._positions) {\n      this._actualPositions = positions.slice();\n    }\n    this._actualPositions.push(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(this._actualPositions[0]));\n  }\n\n  this._length = this._actualPositions.length;\n  this._id = options.id;\n\n  var modelMatrix;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(polylineCollection)) {\n    modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(polylineCollection.modelMatrix);\n  }\n\n  this._modelMatrix = modelMatrix;\n  this._segments = _Core_PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].wrapLongitude */ .Z.wrapLongitude(\n    this._actualPositions,\n    modelMatrix\n  );\n\n  this._actualLength = undefined;\n\n  // eslint-disable-next-line no-use-before-define\n  this._propertiesChanged = new Uint32Array(NUMBER_OF_PROPERTIES);\n  this._polylineCollection = polylineCollection;\n  this._dirty = false;\n  this._pickId = undefined;\n  this._boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromPoints */ .Z.fromPoints(this._actualPositions);\n  this._boundingVolumeWC = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].transform */ .Z.transform(\n    this._boundingVolume,\n    this._modelMatrix\n  );\n  this._boundingVolume2D = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(); // modified in PolylineCollection\n}\n\nvar POSITION_INDEX = (Polyline.POSITION_INDEX = 0);\nvar SHOW_INDEX = (Polyline.SHOW_INDEX = 1);\nvar WIDTH_INDEX = (Polyline.WIDTH_INDEX = 2);\nvar MATERIAL_INDEX = (Polyline.MATERIAL_INDEX = 3);\nvar POSITION_SIZE_INDEX = (Polyline.POSITION_SIZE_INDEX = 4);\nvar DISTANCE_DISPLAY_CONDITION = (Polyline.DISTANCE_DISPLAY_CONDITION = 5);\nvar NUMBER_OF_PROPERTIES = (Polyline.NUMBER_OF_PROPERTIES = 6);\n\nfunction makeDirty(polyline, propertyChanged) {\n  ++polyline._propertiesChanged[propertyChanged];\n  var polylineCollection = polyline._polylineCollection;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(polylineCollection)) {\n    polylineCollection._updatePolyline(polyline, propertyChanged);\n    polyline._dirty = true;\n  }\n}\n\nObject.defineProperties(Polyline.prototype, {\n  /**\n   * Determines if this polyline will be shown.  Use this to hide or show a polyline, instead\n   * of removing it and re-adding it to the collection.\n   * @memberof Polyline.prototype\n   * @type {Boolean}\n   */\n  show: {\n    get: function () {\n      return this._show;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (value !== this._show) {\n        this._show = value;\n        makeDirty(this, SHOW_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the positions of the polyline.\n   * @memberof Polyline.prototype\n   * @type {Cartesian3[]}\n   * @example\n   * polyline.positions = Cesium.Cartesian3.fromDegreesArray([\n   *     0.0, 0.0,\n   *     10.0, 0.0,\n   *     0.0, 20.0\n   * ]);\n   */\n  positions: {\n    get: function () {\n      return this._positions;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var positions = (0,_Core_arrayRemoveDuplicates_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon);\n\n      if (this._loop && positions.length > 2) {\n        if (positions === value) {\n          positions = value.slice();\n        }\n        positions.push(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(positions[0]));\n      }\n\n      if (\n        this._actualPositions.length !== positions.length ||\n        this._actualPositions.length !== this._length\n      ) {\n        makeDirty(this, POSITION_SIZE_INDEX);\n      }\n\n      this._positions = value;\n      this._actualPositions = positions;\n      this._length = positions.length;\n      this._boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromPoints */ .Z.fromPoints(\n        this._actualPositions,\n        this._boundingVolume\n      );\n      this._boundingVolumeWC = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].transform */ .Z.transform(\n        this._boundingVolume,\n        this._modelMatrix,\n        this._boundingVolumeWC\n      );\n      makeDirty(this, POSITION_INDEX);\n\n      this.update();\n    },\n  },\n\n  /**\n   * Gets or sets the surface appearance of the polyline.  This can be one of several built-in {@link Material} objects or a custom material, scripted with\n   * {@link https://github.com/CesiumGS/cesium/wiki/Fabric|Fabric}.\n   * @memberof Polyline.prototype\n   * @type {Material}\n   */\n  material: {\n    get: function () {\n      return this._material;\n    },\n    set: function (material) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(material)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("material is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (this._material !== material) {\n        this._material = material;\n        makeDirty(this, MATERIAL_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the width of the polyline.\n   * @memberof Polyline.prototype\n   * @type {Number}\n   */\n  width: {\n    get: function () {\n      return this._width;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug)\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      var width = this._width;\n      if (value !== width) {\n        this._width = value;\n        makeDirty(this, WIDTH_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets whether a line segment will be added between the first and last polyline positions.\n   * @memberof Polyline.prototype\n   * @type {Boolean}\n   */\n  loop: {\n    get: function () {\n      return this._loop;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug)\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value is required.");\n      }\n      //>>includeEnd(\'debug\');\n\n      if (value !== this._loop) {\n        var positions = this._actualPositions;\n        if (value) {\n          if (\n            positions.length > 2 &&\n            !_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(positions[0], positions[positions.length - 1])\n          ) {\n            if (positions.length === this._positions.length) {\n              this._actualPositions = positions = this._positions.slice();\n            }\n            positions.push(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(positions[0]));\n          }\n        } else if (\n          positions.length > 2 &&\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(positions[0], positions[positions.length - 1])\n        ) {\n          if (positions.length - 1 === this._positions.length) {\n            this._actualPositions = this._positions;\n          } else {\n            positions.pop();\n          }\n        }\n\n        this._loop = value;\n        makeDirty(this, POSITION_SIZE_INDEX);\n      }\n    },\n  },\n\n  /**\n   * Gets or sets the user-defined value returned when the polyline is picked.\n   * @memberof Polyline.prototype\n   * @type {*}\n   */\n  id: {\n    get: function () {\n      return this._id;\n    },\n    set: function (value) {\n      this._id = value;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._pickId)) {\n        this._pickId.object.id = value;\n      }\n    },\n  },\n\n  /**\n   * @private\n   */\n  pickId: {\n    get: function () {\n      return this._pickId;\n    },\n  },\n\n  /**\n   * Gets the destruction status of this polyline\n   * @memberof Polyline.prototype\n   * @type {Boolean}\n   * @default false\n   * @private\n   */\n  isDestroyed: {\n    get: function () {\n      return !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._polylineCollection);\n    },\n  },\n\n  /**\n   * Gets or sets the condition specifying at what distance from the camera that this polyline will be displayed.\n   * @memberof Polyline.prototype\n   * @type {DistanceDisplayCondition}\n   * @default undefined\n   */\n  distanceDisplayCondition: {\n    get: function () {\n      return this._distanceDisplayCondition;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(value) && value.far <= value.near) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(\n          "far distance must be greater than near distance."\n        );\n      }\n      //>>includeEnd(\'debug\');\n      if (\n        !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equals */ .Z.equals(value, this._distanceDisplayCondition)\n      ) {\n        this._distanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].clone */ .Z.clone(\n          value,\n          this._distanceDisplayCondition\n        );\n        makeDirty(this, DISTANCE_DISPLAY_CONDITION);\n      }\n    },\n  },\n});\n\n/**\n * @private\n */\nPolyline.prototype.update = function () {\n  var modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].IDENTITY */ .Z.IDENTITY;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._polylineCollection)) {\n    modelMatrix = this._polylineCollection.modelMatrix;\n  }\n\n  var segmentPositionsLength = this._segments.positions.length;\n  var segmentLengths = this._segments.lengths;\n\n  var positionsChanged =\n    this._propertiesChanged[POSITION_INDEX] > 0 ||\n    this._propertiesChanged[POSITION_SIZE_INDEX] > 0;\n  if (!_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(modelMatrix, this._modelMatrix) || positionsChanged) {\n    this._segments = _Core_PolylinePipeline_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].wrapLongitude */ .Z.wrapLongitude(\n      this._actualPositions,\n      modelMatrix\n    );\n    this._boundingVolumeWC = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].transform */ .Z.transform(\n      this._boundingVolume,\n      modelMatrix,\n      this._boundingVolumeWC\n    );\n  }\n\n  this._modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].clone */ .Z.clone(modelMatrix, this._modelMatrix);\n\n  if (this._segments.positions.length !== segmentPositionsLength) {\n    // number of positions changed\n    makeDirty(this, POSITION_SIZE_INDEX);\n  } else {\n    var length = segmentLengths.length;\n    for (var i = 0; i < length; ++i) {\n      if (segmentLengths[i] !== this._segments.lengths[i]) {\n        // indices changed\n        makeDirty(this, POSITION_SIZE_INDEX);\n        break;\n      }\n    }\n  }\n};\n\n/**\n * @private\n */\nPolyline.prototype.getPickId = function (context) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._pickId)) {\n    this._pickId = context.createPickId({\n      primitive: this,\n      collection: this._polylineCollection,\n      id: this._id,\n    });\n  }\n  return this._pickId;\n};\n\nPolyline.prototype._clean = function () {\n  this._dirty = false;\n  var properties = this._propertiesChanged;\n  for (var k = 0; k < NUMBER_OF_PROPERTIES - 1; ++k) {\n    properties[k] = 0;\n  }\n};\n\nPolyline.prototype._destroy = function () {\n  this._pickId = this._pickId && this._pickId.destroy();\n  this._material = this._material && this._material.destroy();\n  this._polylineCollection = undefined;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Polyline);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTywrRUFBYztBQUNyQixxQkFBcUIsc0dBQThCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBd0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsNkVBQWE7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHNFQUFPO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4QkFBOEI7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxRQUFRLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvUG9seWxpbmUuanM/YjM2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXJyYXlSZW1vdmVEdXBsaWNhdGVzIGZyb20gXCIuLi9Db3JlL2FycmF5UmVtb3ZlRHVwbGljYXRlcy5qc1wiO1xuaW1wb3J0IEJvdW5kaW5nU3BoZXJlIGZyb20gXCIuLi9Db3JlL0JvdW5kaW5nU3BoZXJlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL0NvcmUvQ29sb3IuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24gZnJvbSBcIi4uL0NvcmUvRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmpzXCI7XG5pbXBvcnQgTWF0cml4NCBmcm9tIFwiLi4vQ29yZS9NYXRyaXg0LmpzXCI7XG5pbXBvcnQgUG9seWxpbmVQaXBlbGluZSBmcm9tIFwiLi4vQ29yZS9Qb2x5bGluZVBpcGVsaW5lLmpzXCI7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSBcIi4vTWF0ZXJpYWwuanNcIjtcblxuLyoqXG4gKiBBIHJlbmRlcmFibGUgcG9seWxpbmUuIENyZWF0ZSB0aGlzIGJ5IGNhbGxpbmcge0BsaW5rIFBvbHlsaW5lQ29sbGVjdGlvbiNhZGR9XG4gKlxuICogQGFsaWFzIFBvbHlsaW5lXG4gKiBAaW50ZXJuYWxDb25zdHJ1Y3RvclxuICogQGNsYXNzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zaG93PXRydWVdIDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoaXMgcG9seWxpbmUgd2lsbCBiZSBzaG93bjsgb3RoZXJ3aXNlLCA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMud2lkdGg9MS4wXSBUaGUgd2lkdGggb2YgdGhlIHBvbHlsaW5lIGluIHBpeGVscy5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubG9vcD1mYWxzZV0gV2hldGhlciBhIGxpbmUgc2VnbWVudCB3aWxsIGJlIGFkZGVkIGJldHdlZW4gdGhlIGxhc3QgYW5kIGZpcnN0IGxpbmUgcG9zaXRpb25zIHRvIG1ha2UgdGhpcyBsaW5lIGEgbG9vcC5cbiAqIEBwYXJhbSB7TWF0ZXJpYWx9IFtvcHRpb25zLm1hdGVyaWFsPU1hdGVyaWFsLkNvbG9yVHlwZV0gVGhlIG1hdGVyaWFsLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zW119IFtvcHRpb25zLnBvc2l0aW9uc10gVGhlIHBvc2l0aW9ucy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5pZF0gVGhlIHVzZXItZGVmaW5lZCBvYmplY3QgdG8gYmUgcmV0dXJuZWQgd2hlbiB0aGlzIHBvbHlsaW5lIGlzIHBpY2tlZC5cbiAqIEBwYXJhbSB7RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9ufSBbb3B0aW9ucy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25dIFRoZSBjb25kaXRpb24gc3BlY2lmeWluZyBhdCB3aGF0IGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSB0aGF0IHRoaXMgcG9seWxpbmUgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gKiBAcGFyYW0ge1BvbHlsaW5lQ29sbGVjdGlvbn0gcG9seWxpbmVDb2xsZWN0aW9uIFRoZSByZW5kZXJhYmxlIHBvbHlsaW5lIGNvbGxlY3Rpb24uXG4gKlxuICogQHNlZSBQb2x5bGluZUNvbGxlY3Rpb25cbiAqXG4gKi9cbmZ1bmN0aW9uIFBvbHlsaW5lKG9wdGlvbnMsIHBvbHlsaW5lQ29sbGVjdGlvbikge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHRoaXMuX3Nob3cgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5zaG93LCB0cnVlKTtcbiAgdGhpcy5fd2lkdGggPSBkZWZhdWx0VmFsdWUob3B0aW9ucy53aWR0aCwgMS4wKTtcbiAgdGhpcy5fbG9vcCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmxvb3AsIGZhbHNlKTtcbiAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gb3B0aW9ucy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb247XG5cbiAgdGhpcy5fbWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsO1xuICBpZiAoIWRlZmluZWQodGhpcy5fbWF0ZXJpYWwpKSB7XG4gICAgdGhpcy5fbWF0ZXJpYWwgPSBNYXRlcmlhbC5mcm9tVHlwZShNYXRlcmlhbC5Db2xvclR5cGUsIHtcbiAgICAgIGNvbG9yOiBuZXcgQ29sb3IoMS4wLCAxLjAsIDEuMCwgMS4wKSxcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbnMgPSBvcHRpb25zLnBvc2l0aW9ucztcbiAgaWYgKCFkZWZpbmVkKHBvc2l0aW9ucykpIHtcbiAgICBwb3NpdGlvbnMgPSBbXTtcbiAgfVxuXG4gIHRoaXMuX3Bvc2l0aW9ucyA9IHBvc2l0aW9ucztcbiAgdGhpcy5fYWN0dWFsUG9zaXRpb25zID0gYXJyYXlSZW1vdmVEdXBsaWNhdGVzKFxuICAgIHBvc2l0aW9ucyxcbiAgICBDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb25cbiAgKTtcblxuICBpZiAodGhpcy5fbG9vcCAmJiB0aGlzLl9hY3R1YWxQb3NpdGlvbnMubGVuZ3RoID4gMikge1xuICAgIGlmICh0aGlzLl9hY3R1YWxQb3NpdGlvbnMgPT09IHRoaXMuX3Bvc2l0aW9ucykge1xuICAgICAgdGhpcy5fYWN0dWFsUG9zaXRpb25zID0gcG9zaXRpb25zLnNsaWNlKCk7XG4gICAgfVxuICAgIHRoaXMuX2FjdHVhbFBvc2l0aW9ucy5wdXNoKENhcnRlc2lhbjMuY2xvbmUodGhpcy5fYWN0dWFsUG9zaXRpb25zWzBdKSk7XG4gIH1cblxuICB0aGlzLl9sZW5ndGggPSB0aGlzLl9hY3R1YWxQb3NpdGlvbnMubGVuZ3RoO1xuICB0aGlzLl9pZCA9IG9wdGlvbnMuaWQ7XG5cbiAgdmFyIG1vZGVsTWF0cml4O1xuICBpZiAoZGVmaW5lZChwb2x5bGluZUNvbGxlY3Rpb24pKSB7XG4gICAgbW9kZWxNYXRyaXggPSBNYXRyaXg0LmNsb25lKHBvbHlsaW5lQ29sbGVjdGlvbi5tb2RlbE1hdHJpeCk7XG4gIH1cblxuICB0aGlzLl9tb2RlbE1hdHJpeCA9IG1vZGVsTWF0cml4O1xuICB0aGlzLl9zZWdtZW50cyA9IFBvbHlsaW5lUGlwZWxpbmUud3JhcExvbmdpdHVkZShcbiAgICB0aGlzLl9hY3R1YWxQb3NpdGlvbnMsXG4gICAgbW9kZWxNYXRyaXhcbiAgKTtcblxuICB0aGlzLl9hY3R1YWxMZW5ndGggPSB1bmRlZmluZWQ7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gIHRoaXMuX3Byb3BlcnRpZXNDaGFuZ2VkID0gbmV3IFVpbnQzMkFycmF5KE5VTUJFUl9PRl9QUk9QRVJUSUVTKTtcbiAgdGhpcy5fcG9seWxpbmVDb2xsZWN0aW9uID0gcG9seWxpbmVDb2xsZWN0aW9uO1xuICB0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuICB0aGlzLl9waWNrSWQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2JvdW5kaW5nVm9sdW1lID0gQm91bmRpbmdTcGhlcmUuZnJvbVBvaW50cyh0aGlzLl9hY3R1YWxQb3NpdGlvbnMpO1xuICB0aGlzLl9ib3VuZGluZ1ZvbHVtZVdDID0gQm91bmRpbmdTcGhlcmUudHJhbnNmb3JtKFxuICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lLFxuICAgIHRoaXMuX21vZGVsTWF0cml4XG4gICk7XG4gIHRoaXMuX2JvdW5kaW5nVm9sdW1lMkQgPSBuZXcgQm91bmRpbmdTcGhlcmUoKTsgLy8gbW9kaWZpZWQgaW4gUG9seWxpbmVDb2xsZWN0aW9uXG59XG5cbnZhciBQT1NJVElPTl9JTkRFWCA9IChQb2x5bGluZS5QT1NJVElPTl9JTkRFWCA9IDApO1xudmFyIFNIT1dfSU5ERVggPSAoUG9seWxpbmUuU0hPV19JTkRFWCA9IDEpO1xudmFyIFdJRFRIX0lOREVYID0gKFBvbHlsaW5lLldJRFRIX0lOREVYID0gMik7XG52YXIgTUFURVJJQUxfSU5ERVggPSAoUG9seWxpbmUuTUFURVJJQUxfSU5ERVggPSAzKTtcbnZhciBQT1NJVElPTl9TSVpFX0lOREVYID0gKFBvbHlsaW5lLlBPU0lUSU9OX1NJWkVfSU5ERVggPSA0KTtcbnZhciBESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTiA9IChQb2x5bGluZS5ESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTiA9IDUpO1xudmFyIE5VTUJFUl9PRl9QUk9QRVJUSUVTID0gKFBvbHlsaW5lLk5VTUJFUl9PRl9QUk9QRVJUSUVTID0gNik7XG5cbmZ1bmN0aW9uIG1ha2VEaXJ0eShwb2x5bGluZSwgcHJvcGVydHlDaGFuZ2VkKSB7XG4gICsrcG9seWxpbmUuX3Byb3BlcnRpZXNDaGFuZ2VkW3Byb3BlcnR5Q2hhbmdlZF07XG4gIHZhciBwb2x5bGluZUNvbGxlY3Rpb24gPSBwb2x5bGluZS5fcG9seWxpbmVDb2xsZWN0aW9uO1xuICBpZiAoZGVmaW5lZChwb2x5bGluZUNvbGxlY3Rpb24pKSB7XG4gICAgcG9seWxpbmVDb2xsZWN0aW9uLl91cGRhdGVQb2x5bGluZShwb2x5bGluZSwgcHJvcGVydHlDaGFuZ2VkKTtcbiAgICBwb2x5bGluZS5fZGlydHkgPSB0cnVlO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBvbHlsaW5lLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIHBvbHlsaW5lIHdpbGwgYmUgc2hvd24uICBVc2UgdGhpcyB0byBoaWRlIG9yIHNob3cgYSBwb2x5bGluZSwgaW5zdGVhZFxuICAgKiBvZiByZW1vdmluZyBpdCBhbmQgcmUtYWRkaW5nIGl0IHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAbWVtYmVyb2YgUG9seWxpbmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgc2hvdzoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3c7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fc2hvdykge1xuICAgICAgICB0aGlzLl9zaG93ID0gdmFsdWU7XG4gICAgICAgIG1ha2VEaXJ0eSh0aGlzLCBTSE9XX0lOREVYKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHBvc2l0aW9ucyBvZiB0aGUgcG9seWxpbmUuXG4gICAqIEBtZW1iZXJvZiBQb2x5bGluZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0NhcnRlc2lhbjNbXX1cbiAgICogQGV4YW1wbGVcbiAgICogcG9seWxpbmUucG9zaXRpb25zID0gQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXNBcnJheShbXG4gICAqICAgICAwLjAsIDAuMCxcbiAgICogICAgIDEwLjAsIDAuMCxcbiAgICogICAgIDAuMCwgMjAuMFxuICAgKiBdKTtcbiAgICovXG4gIHBvc2l0aW9uczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9ucztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgdmFyIHBvc2l0aW9ucyA9IGFycmF5UmVtb3ZlRHVwbGljYXRlcyh2YWx1ZSwgQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uKTtcblxuICAgICAgaWYgKHRoaXMuX2xvb3AgJiYgcG9zaXRpb25zLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9ucyA9PT0gdmFsdWUpIHtcbiAgICAgICAgICBwb3NpdGlvbnMgPSB2YWx1ZS5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb25zWzBdKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fYWN0dWFsUG9zaXRpb25zLmxlbmd0aCAhPT0gcG9zaXRpb25zLmxlbmd0aCB8fFxuICAgICAgICB0aGlzLl9hY3R1YWxQb3NpdGlvbnMubGVuZ3RoICE9PSB0aGlzLl9sZW5ndGhcbiAgICAgICkge1xuICAgICAgICBtYWtlRGlydHkodGhpcywgUE9TSVRJT05fU0laRV9JTkRFWCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3Bvc2l0aW9ucyA9IHZhbHVlO1xuICAgICAgdGhpcy5fYWN0dWFsUG9zaXRpb25zID0gcG9zaXRpb25zO1xuICAgICAgdGhpcy5fbGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lID0gQm91bmRpbmdTcGhlcmUuZnJvbVBvaW50cyhcbiAgICAgICAgdGhpcy5fYWN0dWFsUG9zaXRpb25zLFxuICAgICAgICB0aGlzLl9ib3VuZGluZ1ZvbHVtZVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lV0MgPSBCb3VuZGluZ1NwaGVyZS50cmFuc2Zvcm0oXG4gICAgICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lLFxuICAgICAgICB0aGlzLl9tb2RlbE1hdHJpeCxcbiAgICAgICAgdGhpcy5fYm91bmRpbmdWb2x1bWVXQ1xuICAgICAgKTtcbiAgICAgIG1ha2VEaXJ0eSh0aGlzLCBQT1NJVElPTl9JTkRFWCk7XG5cbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBzdXJmYWNlIGFwcGVhcmFuY2Ugb2YgdGhlIHBvbHlsaW5lLiAgVGhpcyBjYW4gYmUgb25lIG9mIHNldmVyYWwgYnVpbHQtaW4ge0BsaW5rIE1hdGVyaWFsfSBvYmplY3RzIG9yIGEgY3VzdG9tIG1hdGVyaWFsLCBzY3JpcHRlZCB3aXRoXG4gICAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvY2VzaXVtL3dpa2kvRmFicmljfEZhYnJpY30uXG4gICAqIEBtZW1iZXJvZiBQb2x5bGluZS5wcm90b3R5cGVcbiAgICogQHR5cGUge01hdGVyaWFsfVxuICAgKi9cbiAgbWF0ZXJpYWw6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKG1hdGVyaWFsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJtYXRlcmlhbCBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgaWYgKHRoaXMuX21hdGVyaWFsICE9PSBtYXRlcmlhbCkge1xuICAgICAgICB0aGlzLl9tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICBtYWtlRGlydHkodGhpcywgTUFURVJJQUxfSU5ERVgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgd2lkdGggb2YgdGhlIHBvbHlsaW5lLlxuICAgKiBAbWVtYmVyb2YgUG9seWxpbmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICB3aWR0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1ZylcbiAgICAgIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidmFsdWUgaXMgcmVxdWlyZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoO1xuICAgICAgaWYgKHZhbHVlICE9PSB3aWR0aCkge1xuICAgICAgICB0aGlzLl93aWR0aCA9IHZhbHVlO1xuICAgICAgICBtYWtlRGlydHkodGhpcywgV0lEVEhfSU5ERVgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB3aGV0aGVyIGEgbGluZSBzZWdtZW50IHdpbGwgYmUgYWRkZWQgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgcG9seWxpbmUgcG9zaXRpb25zLlxuICAgKiBAbWVtYmVyb2YgUG9seWxpbmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgbG9vcDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2xvb3A7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKVxuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLl9sb29wKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbnMgPSB0aGlzLl9hY3R1YWxQb3NpdGlvbnM7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBvc2l0aW9ucy5sZW5ndGggPiAyICYmXG4gICAgICAgICAgICAhQ2FydGVzaWFuMy5lcXVhbHMocG9zaXRpb25zWzBdLCBwb3NpdGlvbnNbcG9zaXRpb25zLmxlbmd0aCAtIDFdKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9ucy5sZW5ndGggPT09IHRoaXMuX3Bvc2l0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhpcy5fYWN0dWFsUG9zaXRpb25zID0gcG9zaXRpb25zID0gdGhpcy5fcG9zaXRpb25zLnNsaWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaChDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uc1swXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBwb3NpdGlvbnMubGVuZ3RoID4gMiAmJlxuICAgICAgICAgIENhcnRlc2lhbjMuZXF1YWxzKHBvc2l0aW9uc1swXSwgcG9zaXRpb25zW3Bvc2l0aW9ucy5sZW5ndGggLSAxXSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHBvc2l0aW9ucy5sZW5ndGggLSAxID09PSB0aGlzLl9wb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3R1YWxQb3NpdGlvbnMgPSB0aGlzLl9wb3NpdGlvbnM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9sb29wID0gdmFsdWU7XG4gICAgICAgIG1ha2VEaXJ0eSh0aGlzLCBQT1NJVElPTl9TSVpFX0lOREVYKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHVzZXItZGVmaW5lZCB2YWx1ZSByZXR1cm5lZCB3aGVuIHRoZSBwb2x5bGluZSBpcyBwaWNrZWQuXG4gICAqIEBtZW1iZXJvZiBQb2x5bGluZS5wcm90b3R5cGVcbiAgICogQHR5cGUgeyp9XG4gICAqL1xuICBpZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMuX2lkID0gdmFsdWU7XG4gICAgICBpZiAoZGVmaW5lZCh0aGlzLl9waWNrSWQpKSB7XG4gICAgICAgIHRoaXMuX3BpY2tJZC5vYmplY3QuaWQgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcGlja0lkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGlja0lkO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRlc3RydWN0aW9uIHN0YXR1cyBvZiB0aGlzIHBvbHlsaW5lXG4gICAqIEBtZW1iZXJvZiBQb2x5bGluZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Rlc3Ryb3llZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICFkZWZpbmVkKHRoaXMuX3BvbHlsaW5lQ29sbGVjdGlvbik7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBjb25kaXRpb24gc3BlY2lmeWluZyBhdCB3aGF0IGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSB0aGF0IHRoaXMgcG9seWxpbmUgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gICAqIEBtZW1iZXJvZiBQb2x5bGluZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbn1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb247XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZS5mYXIgPD0gdmFsdWUubmVhcikge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJmYXIgZGlzdGFuY2UgbXVzdCBiZSBncmVhdGVyIHRoYW4gbmVhciBkaXN0YW5jZS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICBpZiAoXG4gICAgICAgICFEaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZXF1YWxzKHZhbHVlLCB0aGlzLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb24pXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmNsb25lKFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIHRoaXMuX2Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICApO1xuICAgICAgICBtYWtlRGlydHkodGhpcywgRElTVEFOQ0VfRElTUExBWV9DT05ESVRJT04pO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5Qb2x5bGluZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbW9kZWxNYXRyaXggPSBNYXRyaXg0LklERU5USVRZO1xuICBpZiAoZGVmaW5lZCh0aGlzLl9wb2x5bGluZUNvbGxlY3Rpb24pKSB7XG4gICAgbW9kZWxNYXRyaXggPSB0aGlzLl9wb2x5bGluZUNvbGxlY3Rpb24ubW9kZWxNYXRyaXg7XG4gIH1cblxuICB2YXIgc2VnbWVudFBvc2l0aW9uc0xlbmd0aCA9IHRoaXMuX3NlZ21lbnRzLnBvc2l0aW9ucy5sZW5ndGg7XG4gIHZhciBzZWdtZW50TGVuZ3RocyA9IHRoaXMuX3NlZ21lbnRzLmxlbmd0aHM7XG5cbiAgdmFyIHBvc2l0aW9uc0NoYW5nZWQgPVxuICAgIHRoaXMuX3Byb3BlcnRpZXNDaGFuZ2VkW1BPU0lUSU9OX0lOREVYXSA+IDAgfHxcbiAgICB0aGlzLl9wcm9wZXJ0aWVzQ2hhbmdlZFtQT1NJVElPTl9TSVpFX0lOREVYXSA+IDA7XG4gIGlmICghTWF0cml4NC5lcXVhbHMobW9kZWxNYXRyaXgsIHRoaXMuX21vZGVsTWF0cml4KSB8fCBwb3NpdGlvbnNDaGFuZ2VkKSB7XG4gICAgdGhpcy5fc2VnbWVudHMgPSBQb2x5bGluZVBpcGVsaW5lLndyYXBMb25naXR1ZGUoXG4gICAgICB0aGlzLl9hY3R1YWxQb3NpdGlvbnMsXG4gICAgICBtb2RlbE1hdHJpeFxuICAgICk7XG4gICAgdGhpcy5fYm91bmRpbmdWb2x1bWVXQyA9IEJvdW5kaW5nU3BoZXJlLnRyYW5zZm9ybShcbiAgICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lLFxuICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICB0aGlzLl9ib3VuZGluZ1ZvbHVtZVdDXG4gICAgKTtcbiAgfVxuXG4gIHRoaXMuX21vZGVsTWF0cml4ID0gTWF0cml4NC5jbG9uZShtb2RlbE1hdHJpeCwgdGhpcy5fbW9kZWxNYXRyaXgpO1xuXG4gIGlmICh0aGlzLl9zZWdtZW50cy5wb3NpdGlvbnMubGVuZ3RoICE9PSBzZWdtZW50UG9zaXRpb25zTGVuZ3RoKSB7XG4gICAgLy8gbnVtYmVyIG9mIHBvc2l0aW9ucyBjaGFuZ2VkXG4gICAgbWFrZURpcnR5KHRoaXMsIFBPU0lUSU9OX1NJWkVfSU5ERVgpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBzZWdtZW50TGVuZ3Rocy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgaWYgKHNlZ21lbnRMZW5ndGhzW2ldICE9PSB0aGlzLl9zZWdtZW50cy5sZW5ndGhzW2ldKSB7XG4gICAgICAgIC8vIGluZGljZXMgY2hhbmdlZFxuICAgICAgICBtYWtlRGlydHkodGhpcywgUE9TSVRJT05fU0laRV9JTkRFWCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5Qb2x5bGluZS5wcm90b3R5cGUuZ2V0UGlja0lkID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3BpY2tJZCkpIHtcbiAgICB0aGlzLl9waWNrSWQgPSBjb250ZXh0LmNyZWF0ZVBpY2tJZCh7XG4gICAgICBwcmltaXRpdmU6IHRoaXMsXG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLl9wb2x5bGluZUNvbGxlY3Rpb24sXG4gICAgICBpZDogdGhpcy5faWQsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX3BpY2tJZDtcbn07XG5cblBvbHlsaW5lLnByb3RvdHlwZS5fY2xlYW4gPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG4gIHZhciBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllc0NoYW5nZWQ7XG4gIGZvciAodmFyIGsgPSAwOyBrIDwgTlVNQkVSX09GX1BST1BFUlRJRVMgLSAxOyArK2spIHtcbiAgICBwcm9wZXJ0aWVzW2tdID0gMDtcbiAgfVxufTtcblxuUG9seWxpbmUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9waWNrSWQgPSB0aGlzLl9waWNrSWQgJiYgdGhpcy5fcGlja0lkLmRlc3Ryb3koKTtcbiAgdGhpcy5fbWF0ZXJpYWwgPSB0aGlzLl9tYXRlcmlhbCAmJiB0aGlzLl9tYXRlcmlhbC5kZXN0cm95KCk7XG4gIHRoaXMuX3BvbHlsaW5lQ29sbGVjdGlvbiA9IHVuZGVmaW5lZDtcbn07XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///28509\n')},56764:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63367);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(51688);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(59947);\n/* harmony import */ var _Core_combine_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8182);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(12572);\n/* harmony import */ var _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(74938);\n/* harmony import */ var _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(96037);\n/* harmony import */ var _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(22832);\n/* harmony import */ var _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(84935);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(72248);\n/* harmony import */ var _Core_Plane_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(7749);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(9407);\n/* harmony import */ var _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(99095);\n/* harmony import */ var _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(58597);\n/* harmony import */ var _Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(20521);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(60072);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(8379);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(53642);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(8743);\n/* harmony import */ var _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(18192);\n/* harmony import */ var _Shaders_PolylineCommon_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(94373);\n/* harmony import */ var _Shaders_PolylineFS_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(36449);\n/* harmony import */ var _Shaders_PolylineVS_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(9067);\n/* harmony import */ var _BatchTable_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(7164);\n/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(13633);\n/* harmony import */ var _Material_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(69592);\n/* harmony import */ var _Polyline_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(28509);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(89917);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar SHOW_INDEX = _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].SHOW_INDEX */ .Z.SHOW_INDEX;\nvar WIDTH_INDEX = _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].WIDTH_INDEX */ .Z.WIDTH_INDEX;\nvar POSITION_INDEX = _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].POSITION_INDEX */ .Z.POSITION_INDEX;\nvar MATERIAL_INDEX = _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].MATERIAL_INDEX */ .Z.MATERIAL_INDEX;\n//POSITION_SIZE_INDEX is needed for when the polyline\'s position array changes size.\n//When it does, we need to recreate the indicesBuffer.\nvar POSITION_SIZE_INDEX = _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].POSITION_SIZE_INDEX */ .Z.POSITION_SIZE_INDEX;\nvar DISTANCE_DISPLAY_CONDITION = _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].DISTANCE_DISPLAY_CONDITION */ .Z.DISTANCE_DISPLAY_CONDITION;\nvar NUMBER_OF_PROPERTIES = _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"].NUMBER_OF_PROPERTIES */ .Z.NUMBER_OF_PROPERTIES;\n\nvar attributeLocations = {\n  texCoordExpandAndBatchIndex: 0,\n  position3DHigh: 1,\n  position3DLow: 2,\n  position2DHigh: 3,\n  position2DLow: 4,\n  prevPosition3DHigh: 5,\n  prevPosition3DLow: 6,\n  prevPosition2DHigh: 7,\n  prevPosition2DLow: 8,\n  nextPosition3DHigh: 9,\n  nextPosition3DLow: 10,\n  nextPosition2DHigh: 11,\n  nextPosition2DLow: 12,\n};\n\n/**\n * A renderable collection of polylines.\n * <br /><br />\n * <div align="center">\n * <img src="Images/Polyline.png" width="400" height="300" /><br />\n * Example polylines\n * </div>\n * <br /><br />\n * Polylines are added and removed from the collection using {@link PolylineCollection#add}\n * and {@link PolylineCollection#remove}.\n *\n * @alias PolylineCollection\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Matrix4} [options.modelMatrix=Matrix4.IDENTITY] The 4x4 transformation matrix that transforms each polyline from model to world coordinates.\n * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Determines if this primitive\'s commands\' bounding spheres are shown.\n * @param {Boolean} [options.show=true] Determines if the polylines in the collection will be shown.\n *\n * @performance For best performance, prefer a few collections, each with many polylines, to\n * many collections with only a few polylines each.  Organize collections so that polylines\n * with the same update frequency are in the same collection, i.e., polylines that do not\n * change should be in one collection; polylines that change every frame should be in another\n * collection; and so on.\n *\n * @see PolylineCollection#add\n * @see PolylineCollection#remove\n * @see Polyline\n * @see LabelCollection\n *\n * @example\n * // Create a polyline collection with two polylines\n * var polylines = new Cesium.PolylineCollection();\n * polylines.add({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     -75.10, 39.57,\n *     -77.02, 38.53,\n *     -80.50, 35.14,\n *     -80.12, 25.46]),\n *   width : 2\n * });\n *\n * polylines.add({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     -73.10, 37.57,\n *     -75.02, 36.53,\n *     -78.50, 33.14,\n *     -78.12, 23.46]),\n *   width : 4\n * });\n */\nfunction PolylineCollection(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  /**\n   * Determines if polylines in this collection will be shown.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options.show, true);\n\n  /**\n   * The 4x4 transformation matrix that transforms each polyline in this collection from model to world coordinates.\n   * When this is the identity matrix, the polylines are drawn in world coordinates, i.e., Earth\'s WGS84 coordinates.\n   * Local reference frames can be used by providing a different transformation matrix, like that returned\n   * by {@link Transforms.eastNorthUpToFixedFrame}.\n   *\n   * @type {Matrix4}\n   * @default {@link Matrix4.IDENTITY}\n   */\n  this.modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options.modelMatrix, _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].IDENTITY */ .Z.IDENTITY)\n  );\n  this._modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the bounding sphere for each draw command in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowBoundingVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(\n    options.debugShowBoundingVolume,\n    false\n  );\n\n  this._opaqueRS = undefined;\n  this._translucentRS = undefined;\n\n  this._colorCommands = [];\n\n  this._polylinesUpdated = false;\n  this._polylinesRemoved = false;\n  this._createVertexArray = false;\n  this._propertiesChanged = new Uint32Array(NUMBER_OF_PROPERTIES);\n  this._polylines = [];\n  this._polylineBuckets = {};\n\n  // The buffer usage is determined based on the usage of the attribute over time.\n  this._positionBufferUsage = {\n    bufferUsage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    frameCount: 0,\n  };\n\n  this._mode = undefined;\n\n  this._polylinesToUpdate = [];\n  this._vertexArrays = [];\n  this._positionBuffer = undefined;\n  this._texCoordExpandAndBatchIndexBuffer = undefined;\n\n  this._batchTable = undefined;\n  this._createBatchTable = false;\n\n  // Only used by Vector3DTilePoints\n  this._useHighlightColor = false;\n  this._highlightColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].clone */ .Z.clone(_Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].WHITE */ .Z.WHITE);\n\n  var that = this;\n  this._uniformMap = {\n    u_highlightColor: function () {\n      return that._highlightColor;\n    },\n  };\n}\n\nObject.defineProperties(PolylineCollection.prototype, {\n  /**\n   * Returns the number of polylines in this collection.  This is commonly used with\n   * {@link PolylineCollection#get} to iterate over all the polylines\n   * in the collection.\n   * @memberof PolylineCollection.prototype\n   * @type {Number}\n   */\n  length: {\n    get: function () {\n      removePolylines(this);\n      return this._polylines.length;\n    },\n  },\n});\n\n/**\n     * Creates and adds a polyline with the specified initial properties to the collection.\n     * The added polyline is returned so it can be modified or removed from the collection later.\n     *\n     * @param {Object}[options] A template describing the polyline\'s properties as shown in Example 1.\n     * @returns {Polyline} The polyline that was added to the collection.\n     *\n     * @performance After calling <code>add</code>, {@link PolylineCollection#update} is called and\n     * the collection\'s vertex buffer is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.\n     * For best performance, add as many polylines as possible before calling <code>update</code>.\n     *\n     * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n     *\n     *\n     * @example\n     * // Example 1:  Add a polyline, specifying all the default values.\n     * var p = polylines.add({\n     *   show : true,\n     *   positions : ellipsoid.cartographicArrayToCartesianArray([\n           Cesium.Cartographic.fromDegrees(-75.10, 39.57),\n           Cesium.Cartographic.fromDegrees(-77.02, 38.53)]),\n     *   width : 1\n     * });\n     *\n     * @see PolylineCollection#remove\n     * @see PolylineCollection#removeAll\n     * @see PolylineCollection#update\n     */\nPolylineCollection.prototype.add = function (options) {\n  var p = new _Polyline_js__WEBPACK_IMPORTED_MODULE_32__/* ["default"] */ .Z(options, this);\n  p._index = this._polylines.length;\n  this._polylines.push(p);\n  this._createVertexArray = true;\n  this._createBatchTable = true;\n  return p;\n};\n\n/**\n * Removes a polyline from the collection.\n *\n * @param {Polyline} polyline The polyline to remove.\n * @returns {Boolean} <code>true</code> if the polyline was removed; <code>false</code> if the polyline was not found in the collection.\n *\n * @performance After calling <code>remove</code>, {@link PolylineCollection#update} is called and\n * the collection\'s vertex buffer is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.\n * For best performance, remove as many polylines as possible before calling <code>update</code>.\n * If you intend to temporarily hide a polyline, it is usually more efficient to call\n * {@link Polyline#show} instead of removing and re-adding the polyline.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * var p = polylines.add(...);\n * polylines.remove(p);  // Returns true\n *\n * @see PolylineCollection#add\n * @see PolylineCollection#removeAll\n * @see PolylineCollection#update\n * @see Polyline#show\n */\nPolylineCollection.prototype.remove = function (polyline) {\n  if (this.contains(polyline)) {\n    this._polylinesRemoved = true;\n    this._createVertexArray = true;\n    this._createBatchTable = true;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(polyline._bucket)) {\n      var bucket = polyline._bucket;\n      bucket.shaderProgram =\n        bucket.shaderProgram && bucket.shaderProgram.destroy();\n    }\n    polyline._destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Removes all polylines from the collection.\n *\n * @performance <code>O(n)</code>.  It is more efficient to remove all the polylines\n * from a collection and then add new ones than to create a new collection entirely.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * polylines.add(...);\n * polylines.add(...);\n * polylines.removeAll();\n *\n * @see PolylineCollection#add\n * @see PolylineCollection#remove\n * @see PolylineCollection#update\n */\nPolylineCollection.prototype.removeAll = function () {\n  releaseShaders(this);\n  destroyPolylines(this);\n  this._polylineBuckets = {};\n  this._polylinesRemoved = false;\n  this._polylines.length = 0;\n  this._polylinesToUpdate.length = 0;\n  this._createVertexArray = true;\n};\n\n/**\n * Determines if this collection contains the specified polyline.\n *\n * @param {Polyline} polyline The polyline to check for.\n * @returns {Boolean} true if this collection contains the polyline, false otherwise.\n *\n * @see PolylineCollection#get\n */\nPolylineCollection.prototype.contains = function (polyline) {\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(polyline) && polyline._polylineCollection === this;\n};\n\n/**\n * Returns the polyline in the collection at the specified index.  Indices are zero-based\n * and increase as polylines are added.  Removing a polyline shifts all polylines after\n * it to the left, changing their indices.  This function is commonly used with\n * {@link PolylineCollection#length} to iterate over all the polylines\n * in the collection.\n *\n * @param {Number} index The zero-based index of the polyline.\n * @returns {Polyline} The polyline at the specified index.\n *\n * @performance If polylines were removed from the collection and\n * {@link PolylineCollection#update} was not called, an implicit <code>O(n)</code>\n * operation is performed.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * // Toggle the show property of every polyline in the collection\n * var len = polylines.length;\n * for (var i = 0; i < len; ++i) {\n *   var p = polylines.get(i);\n *   p.show = !p.show;\n * }\n *\n * @see PolylineCollection#length\n */\nPolylineCollection.prototype.get = function (index) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(index)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("index is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  removePolylines(this);\n  return this._polylines[index];\n};\n\nfunction createBatchTable(collection, context) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(collection._batchTable)) {\n    collection._batchTable.destroy();\n  }\n\n  var attributes = [\n    {\n      functionName: "batchTable_getWidthAndShow",\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n      componentsPerAttribute: 2,\n    },\n    {\n      functionName: "batchTable_getPickColor",\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n      componentsPerAttribute: 4,\n      normalize: true,\n    },\n    {\n      functionName: "batchTable_getCenterHigh",\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      componentsPerAttribute: 3,\n    },\n    {\n      functionName: "batchTable_getCenterLowAndRadius",\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      componentsPerAttribute: 4,\n    },\n    {\n      functionName: "batchTable_getDistanceDisplayCondition",\n      componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n      componentsPerAttribute: 2,\n    },\n  ];\n\n  collection._batchTable = new _BatchTable_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z(\n    context,\n    attributes,\n    collection._polylines.length\n  );\n}\n\nvar scratchUpdatePolylineEncodedCartesian = new _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\nvar scratchUpdatePolylineCartesian4 = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchNearFarCartesian2 = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * Called when {@link Viewer} or {@link CesiumWidget} render the scene to\n * get the draw commands needed to render this primitive.\n * <p>\n * Do not call this function directly.  This is documented just to\n * list the exceptions that may be propagated when the scene is rendered:\n * </p>\n *\n * @exception {RuntimeError} Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.\n */\nPolylineCollection.prototype.update = function (frameState) {\n  removePolylines(this);\n\n  if (this._polylines.length === 0 || !this.show) {\n    return;\n  }\n\n  updateMode(this, frameState);\n\n  var context = frameState.context;\n  var projection = frameState.mapProjection;\n  var polyline;\n  var properties = this._propertiesChanged;\n\n  if (this._createBatchTable) {\n    if (_Renderer_ContextLimits_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].maximumVertexTextureImageUnits */ .Z.maximumVertexTextureImageUnits === 0) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z(\n        "Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero."\n      );\n    }\n    createBatchTable(this, context);\n    this._createBatchTable = false;\n  }\n\n  if (this._createVertexArray || computeNewBuffersUsage(this)) {\n    createVertexArrays(this, context, projection);\n  } else if (this._polylinesUpdated) {\n    // Polylines were modified, but no polylines were added or removed.\n    var polylinesToUpdate = this._polylinesToUpdate;\n    if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n      var updateLength = polylinesToUpdate.length;\n      for (var i = 0; i < updateLength; ++i) {\n        polyline = polylinesToUpdate[i];\n        polyline.update();\n      }\n    }\n\n    // if a polyline\'s positions size changes, we need to recreate the vertex arrays and vertex buffers because the indices will be different.\n    // if a polyline\'s material changes, we need to recreate the VAOs and VBOs because they will be batched differently.\n    if (properties[POSITION_SIZE_INDEX] || properties[MATERIAL_INDEX]) {\n      createVertexArrays(this, context, projection);\n    } else {\n      var length = polylinesToUpdate.length;\n      var polylineBuckets = this._polylineBuckets;\n      for (var ii = 0; ii < length; ++ii) {\n        polyline = polylinesToUpdate[ii];\n        properties = polyline._propertiesChanged;\n        var bucket = polyline._bucket;\n        var index = 0;\n        for (var x in polylineBuckets) {\n          if (polylineBuckets.hasOwnProperty(x)) {\n            if (polylineBuckets[x] === bucket) {\n              if (properties[POSITION_INDEX]) {\n                bucket.writeUpdate(\n                  index,\n                  polyline,\n                  this._positionBuffer,\n                  projection\n                );\n              }\n              break;\n            }\n            index += polylineBuckets[x].lengthOfPositions;\n          }\n        }\n\n        if (properties[SHOW_INDEX] || properties[WIDTH_INDEX]) {\n          this._batchTable.setBatchedAttribute(\n            polyline._index,\n            0,\n            new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(polyline._width, polyline._show)\n          );\n        }\n\n        if (this._batchTable.attributes.length > 2) {\n          if (properties[POSITION_INDEX] || properties[POSITION_SIZE_INDEX]) {\n            var boundingSphere =\n              frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D\n                ? polyline._boundingVolume2D\n                : polyline._boundingVolumeWC;\n            var encodedCenter = _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].fromCartesian */ .Z.fromCartesian(\n              boundingSphere.center,\n              scratchUpdatePolylineEncodedCartesian\n            );\n            var low = _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromElements */ .Z.fromElements(\n              encodedCenter.low.x,\n              encodedCenter.low.y,\n              encodedCenter.low.z,\n              boundingSphere.radius,\n              scratchUpdatePolylineCartesian4\n            );\n            this._batchTable.setBatchedAttribute(\n              polyline._index,\n              2,\n              encodedCenter.high\n            );\n            this._batchTable.setBatchedAttribute(polyline._index, 3, low);\n          }\n\n          if (properties[DISTANCE_DISPLAY_CONDITION]) {\n            var nearFarCartesian = scratchNearFarCartesian2;\n            nearFarCartesian.x = 0.0;\n            nearFarCartesian.y = Number.MAX_VALUE;\n\n            var distanceDisplayCondition = polyline.distanceDisplayCondition;\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(distanceDisplayCondition)) {\n              nearFarCartesian.x = distanceDisplayCondition.near;\n              nearFarCartesian.y = distanceDisplayCondition.far;\n            }\n\n            this._batchTable.setBatchedAttribute(\n              polyline._index,\n              4,\n              nearFarCartesian\n            );\n          }\n        }\n\n        polyline._clean();\n      }\n    }\n    polylinesToUpdate.length = 0;\n    this._polylinesUpdated = false;\n  }\n\n  properties = this._propertiesChanged;\n  for (var k = 0; k < NUMBER_OF_PROPERTIES; ++k) {\n    properties[k] = 0;\n  }\n\n  var modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].IDENTITY */ .Z.IDENTITY;\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    modelMatrix = this.modelMatrix;\n  }\n\n  var pass = frameState.passes;\n  var useDepthTest = frameState.morphTime !== 0.0;\n\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(this._opaqueRS) ||\n    this._opaqueRS.depthTest.enabled !== useDepthTest\n  ) {\n    this._opaqueRS = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].fromCache */ .Z.fromCache({\n      depthMask: useDepthTest,\n      depthTest: {\n        enabled: useDepthTest,\n      },\n    });\n  }\n\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(this._translucentRS) ||\n    this._translucentRS.depthTest.enabled !== useDepthTest\n  ) {\n    this._translucentRS = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].fromCache */ .Z.fromCache({\n      blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n      depthMask: !useDepthTest,\n      depthTest: {\n        enabled: useDepthTest,\n      },\n    });\n  }\n\n  this._batchTable.update(frameState);\n\n  if (pass.render || pass.pick) {\n    var colorList = this._colorCommands;\n    createCommandLists(this, frameState, colorList, modelMatrix);\n  }\n};\n\nvar boundingSphereScratch = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar boundingSphereScratch2 = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\nfunction createCommandLists(\n  polylineCollection,\n  frameState,\n  commands,\n  modelMatrix\n) {\n  var context = frameState.context;\n  var commandList = frameState.commandList;\n\n  var commandsLength = commands.length;\n  var commandIndex = 0;\n  var cloneBoundingSphere = true;\n\n  var vertexArrays = polylineCollection._vertexArrays;\n  var debugShowBoundingVolume = polylineCollection.debugShowBoundingVolume;\n\n  var batchTable = polylineCollection._batchTable;\n  var uniformCallback = batchTable.getUniformMapCallback();\n\n  var length = vertexArrays.length;\n  for (var m = 0; m < length; ++m) {\n    var va = vertexArrays[m];\n    var buckets = va.buckets;\n    var bucketLength = buckets.length;\n\n    for (var n = 0; n < bucketLength; ++n) {\n      var bucketLocator = buckets[n];\n\n      var offset = bucketLocator.offset;\n      var sp = bucketLocator.bucket.shaderProgram;\n\n      var polylines = bucketLocator.bucket.polylines;\n      var polylineLength = polylines.length;\n      var currentId;\n      var currentMaterial;\n      var count = 0;\n      var command;\n      var uniformMap;\n\n      for (var s = 0; s < polylineLength; ++s) {\n        var polyline = polylines[s];\n        var mId = createMaterialId(polyline._material);\n        if (mId !== currentId) {\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(currentId) && count > 0) {\n            var translucent = currentMaterial.isTranslucent();\n\n            if (commandIndex >= commandsLength) {\n              command = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z({\n                owner: polylineCollection,\n              });\n              commands.push(command);\n            } else {\n              command = commands[commandIndex];\n            }\n\n            ++commandIndex;\n\n            uniformMap = (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(\n              uniformCallback(currentMaterial._uniforms),\n              polylineCollection._uniformMap\n            );\n\n            command.boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n              boundingSphereScratch,\n              command.boundingVolume\n            );\n            command.modelMatrix = modelMatrix;\n            command.shaderProgram = sp;\n            command.vertexArray = va.va;\n            command.renderState = translucent\n              ? polylineCollection._translucentRS\n              : polylineCollection._opaqueRS;\n            command.pass = translucent ? _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT : _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].OPAQUE */ .Z.OPAQUE;\n            command.debugShowBoundingVolume = debugShowBoundingVolume;\n            command.pickId = "v_pickColor";\n\n            command.uniformMap = uniformMap;\n            command.count = count;\n            command.offset = offset;\n\n            offset += count;\n            count = 0;\n            cloneBoundingSphere = true;\n\n            commandList.push(command);\n          }\n\n          currentMaterial = polyline._material;\n          currentMaterial.update(context);\n          currentId = mId;\n        }\n\n        var locators = polyline._locatorBuckets;\n        var locatorLength = locators.length;\n        for (var t = 0; t < locatorLength; ++t) {\n          var locator = locators[t];\n          if (locator.locator === bucketLocator) {\n            count += locator.count;\n          }\n        }\n\n        var boundingVolume;\n        if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n          boundingVolume = polyline._boundingVolumeWC;\n        } else if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n          boundingVolume = polyline._boundingVolume2D;\n        } else if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(polyline._boundingVolume2D)) {\n            boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n              polyline._boundingVolume2D,\n              boundingSphereScratch2\n            );\n            boundingVolume.center.x = 0.0;\n          }\n        } else if (\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(polyline._boundingVolumeWC) &&\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(polyline._boundingVolume2D)\n        ) {\n          boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].union */ .Z.union(\n            polyline._boundingVolumeWC,\n            polyline._boundingVolume2D,\n            boundingSphereScratch2\n          );\n        }\n\n        if (cloneBoundingSphere) {\n          cloneBoundingSphere = false;\n          _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(boundingVolume, boundingSphereScratch);\n        } else {\n          _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].union */ .Z.union(\n            boundingVolume,\n            boundingSphereScratch,\n            boundingSphereScratch\n          );\n        }\n      }\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(currentId) && count > 0) {\n        if (commandIndex >= commandsLength) {\n          command = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z({\n            owner: polylineCollection,\n          });\n          commands.push(command);\n        } else {\n          command = commands[commandIndex];\n        }\n\n        ++commandIndex;\n\n        uniformMap = (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(\n          uniformCallback(currentMaterial._uniforms),\n          polylineCollection._uniformMap\n        );\n\n        command.boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n          boundingSphereScratch,\n          command.boundingVolume\n        );\n        command.modelMatrix = modelMatrix;\n        command.shaderProgram = sp;\n        command.vertexArray = va.va;\n        command.renderState = currentMaterial.isTranslucent()\n          ? polylineCollection._translucentRS\n          : polylineCollection._opaqueRS;\n        command.pass = currentMaterial.isTranslucent()\n          ? _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].TRANSLUCENT */ .Z.TRANSLUCENT\n          : _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].OPAQUE */ .Z.OPAQUE;\n        command.debugShowBoundingVolume = debugShowBoundingVolume;\n        command.pickId = "v_pickColor";\n\n        command.uniformMap = uniformMap;\n        command.count = count;\n        command.offset = offset;\n\n        cloneBoundingSphere = true;\n\n        commandList.push(command);\n      }\n\n      currentId = undefined;\n    }\n  }\n\n  commands.length = commandIndex;\n}\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see PolylineCollection#destroy\n */\nPolylineCollection.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * polylines = polylines && polylines.destroy();\n *\n * @see PolylineCollection#isDestroyed\n */\nPolylineCollection.prototype.destroy = function () {\n  destroyVertexArrays(this);\n  releaseShaders(this);\n  destroyPolylines(this);\n  this._batchTable = this._batchTable && this._batchTable.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(this);\n};\n\nfunction computeNewBuffersUsage(collection) {\n  var usageChanged = false;\n  var properties = collection._propertiesChanged;\n  var bufferUsage = collection._positionBufferUsage;\n  if (properties[POSITION_INDEX]) {\n    if (bufferUsage.bufferUsage !== _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STREAM_DRAW */ .Z.STREAM_DRAW) {\n      usageChanged = true;\n      bufferUsage.bufferUsage = _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STREAM_DRAW */ .Z.STREAM_DRAW;\n      bufferUsage.frameCount = 100;\n    } else {\n      bufferUsage.frameCount = 100;\n    }\n  } else if (bufferUsage.bufferUsage !== _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW) {\n    if (bufferUsage.frameCount === 0) {\n      usageChanged = true;\n      bufferUsage.bufferUsage = _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW;\n    } else {\n      bufferUsage.frameCount--;\n    }\n  }\n\n  return usageChanged;\n}\n\nvar emptyVertexBuffer = [0.0, 0.0, 0.0];\n\nfunction createVertexArrays(collection, context, projection) {\n  collection._createVertexArray = false;\n  releaseShaders(collection);\n  destroyVertexArrays(collection);\n  sortPolylinesIntoBuckets(collection);\n\n  //stores all of the individual indices arrays.\n  var totalIndices = [[]];\n  var indices = totalIndices[0];\n\n  var batchTable = collection._batchTable;\n  var useHighlightColor = collection._useHighlightColor;\n\n  //used to determine the vertexBuffer offset if the indicesArray goes over 64k.\n  //if it\'s the same polyline while it goes over 64k, the offset needs to backtrack componentsPerAttribute * componentDatatype bytes\n  //so that the polyline looks contiguous.\n  //if the polyline ends at the 64k mark, then the offset is just 64k * componentsPerAttribute * componentDatatype\n  var vertexBufferOffset = [0];\n  var offset = 0;\n  var vertexArrayBuckets = [[]];\n  var totalLength = 0;\n  var polylineBuckets = collection._polylineBuckets;\n  var x;\n  var bucket;\n  for (x in polylineBuckets) {\n    if (polylineBuckets.hasOwnProperty(x)) {\n      bucket = polylineBuckets[x];\n      bucket.updateShader(context, batchTable, useHighlightColor);\n      totalLength += bucket.lengthOfPositions;\n    }\n  }\n\n  if (totalLength > 0) {\n    var mode = collection._mode;\n\n    var positionArray = new Float32Array(6 * totalLength * 3);\n    var texCoordExpandAndBatchIndexArray = new Float32Array(totalLength * 4);\n    var position3DArray;\n\n    var positionIndex = 0;\n    var colorIndex = 0;\n    var texCoordExpandAndBatchIndexIndex = 0;\n    for (x in polylineBuckets) {\n      if (polylineBuckets.hasOwnProperty(x)) {\n        bucket = polylineBuckets[x];\n        bucket.write(\n          positionArray,\n          texCoordExpandAndBatchIndexArray,\n          positionIndex,\n          colorIndex,\n          texCoordExpandAndBatchIndexIndex,\n          batchTable,\n          context,\n          projection\n        );\n\n        if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].MORPHING */ .Z.MORPHING) {\n          if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(position3DArray)) {\n            position3DArray = new Float32Array(6 * totalLength * 3);\n          }\n          bucket.writeForMorph(position3DArray, positionIndex);\n        }\n\n        var bucketLength = bucket.lengthOfPositions;\n        positionIndex += 6 * bucketLength * 3;\n        colorIndex += bucketLength * 4;\n        texCoordExpandAndBatchIndexIndex += bucketLength * 4;\n        offset = bucket.updateIndices(\n          totalIndices,\n          vertexBufferOffset,\n          vertexArrayBuckets,\n          offset\n        );\n      }\n    }\n\n    var positionBufferUsage = collection._positionBufferUsage.bufferUsage;\n    var texCoordExpandAndBatchIndexBufferUsage = _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW;\n\n    collection._positionBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n      context: context,\n      typedArray: positionArray,\n      usage: positionBufferUsage,\n    });\n    var position3DBuffer;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(position3DArray)) {\n      position3DBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n        context: context,\n        typedArray: position3DArray,\n        usage: positionBufferUsage,\n      });\n    }\n    collection._texCoordExpandAndBatchIndexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n      context: context,\n      typedArray: texCoordExpandAndBatchIndexArray,\n      usage: texCoordExpandAndBatchIndexBufferUsage,\n    });\n\n    var positionSizeInBytes = 3 * Float32Array.BYTES_PER_ELEMENT;\n    var texCoordExpandAndBatchIndexSizeInBytes =\n      4 * Float32Array.BYTES_PER_ELEMENT;\n\n    var vbo = 0;\n    var numberOfIndicesArrays = totalIndices.length;\n    for (var k = 0; k < numberOfIndicesArrays; ++k) {\n      indices = totalIndices[k];\n\n      if (indices.length > 0) {\n        var indicesArray = new Uint16Array(indices);\n        var indexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].createIndexBuffer */ .Z.createIndexBuffer({\n          context: context,\n          typedArray: indicesArray,\n          usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n          indexDatatype: _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n        });\n\n        vbo += vertexBufferOffset[k];\n\n        var positionHighOffset =\n          6 *\n          (k * (positionSizeInBytes * _Core_Math_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SIXTY_FOUR_KILOBYTES */ .Z.SIXTY_FOUR_KILOBYTES) -\n            vbo * positionSizeInBytes); //componentsPerAttribute(3) * componentDatatype(4)\n        var positionLowOffset = positionSizeInBytes + positionHighOffset;\n        var prevPositionHighOffset = positionSizeInBytes + positionLowOffset;\n        var prevPositionLowOffset =\n          positionSizeInBytes + prevPositionHighOffset;\n        var nextPositionHighOffset =\n          positionSizeInBytes + prevPositionLowOffset;\n        var nextPositionLowOffset =\n          positionSizeInBytes + nextPositionHighOffset;\n        var vertexTexCoordExpandAndBatchIndexBufferOffset =\n          k *\n            (texCoordExpandAndBatchIndexSizeInBytes *\n              _Core_Math_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SIXTY_FOUR_KILOBYTES */ .Z.SIXTY_FOUR_KILOBYTES) -\n          vbo * texCoordExpandAndBatchIndexSizeInBytes;\n\n        var attributes = [\n          {\n            index: attributeLocations.position3DHigh,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: positionHighOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.position3DLow,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: positionLowOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.position2DHigh,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: positionHighOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.position2DLow,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: positionLowOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.prevPosition3DHigh,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: prevPositionHighOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.prevPosition3DLow,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: prevPositionLowOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.prevPosition2DHigh,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: prevPositionHighOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.prevPosition2DLow,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: prevPositionLowOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.nextPosition3DHigh,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: nextPositionHighOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.nextPosition3DLow,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: nextPositionLowOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.nextPosition2DHigh,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: nextPositionHighOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.nextPosition2DLow,\n            componentsPerAttribute: 3,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            offsetInBytes: nextPositionLowOffset,\n            strideInBytes: 6 * positionSizeInBytes,\n          },\n          {\n            index: attributeLocations.texCoordExpandAndBatchIndex,\n            componentsPerAttribute: 4,\n            componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FLOAT */ .Z.FLOAT,\n            vertexBuffer: collection._texCoordExpandAndBatchIndexBuffer,\n            offsetInBytes: vertexTexCoordExpandAndBatchIndexBufferOffset,\n          },\n        ];\n\n        var buffer3D;\n        var bufferProperty3D;\n        var buffer2D;\n        var bufferProperty2D;\n\n        if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n          buffer3D = collection._positionBuffer;\n          bufferProperty3D = "vertexBuffer";\n          buffer2D = emptyVertexBuffer;\n          bufferProperty2D = "value";\n        } else if (\n          mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D ||\n          mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW\n        ) {\n          buffer3D = emptyVertexBuffer;\n          bufferProperty3D = "value";\n          buffer2D = collection._positionBuffer;\n          bufferProperty2D = "vertexBuffer";\n        } else {\n          buffer3D = position3DBuffer;\n          bufferProperty3D = "vertexBuffer";\n          buffer2D = collection._positionBuffer;\n          bufferProperty2D = "vertexBuffer";\n        }\n\n        attributes[0][bufferProperty3D] = buffer3D;\n        attributes[1][bufferProperty3D] = buffer3D;\n        attributes[2][bufferProperty2D] = buffer2D;\n        attributes[3][bufferProperty2D] = buffer2D;\n        attributes[4][bufferProperty3D] = buffer3D;\n        attributes[5][bufferProperty3D] = buffer3D;\n        attributes[6][bufferProperty2D] = buffer2D;\n        attributes[7][bufferProperty2D] = buffer2D;\n        attributes[8][bufferProperty3D] = buffer3D;\n        attributes[9][bufferProperty3D] = buffer3D;\n        attributes[10][bufferProperty2D] = buffer2D;\n        attributes[11][bufferProperty2D] = buffer2D;\n\n        var va = new _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z({\n          context: context,\n          attributes: attributes,\n          indexBuffer: indexBuffer,\n        });\n        collection._vertexArrays.push({\n          va: va,\n          buckets: vertexArrayBuckets[k],\n        });\n      }\n    }\n  }\n}\n\nfunction replacer(key, value) {\n  if (value instanceof _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z) {\n    return value.id;\n  }\n\n  return value;\n}\n\nvar scratchUniformArray = [];\nfunction createMaterialId(material) {\n  var uniforms = _Material_js__WEBPACK_IMPORTED_MODULE_31__/* ["default"]._uniformList */ .Z._uniformList[material.type];\n  var length = uniforms.length;\n  scratchUniformArray.length = 2.0 * length;\n\n  var index = 0;\n  for (var i = 0; i < length; ++i) {\n    var uniform = uniforms[i];\n    scratchUniformArray[index] = uniform;\n    scratchUniformArray[index + 1] = material._uniforms[uniform]();\n    index += 2;\n  }\n\n  return material.type + ":" + JSON.stringify(scratchUniformArray, replacer);\n}\n\nfunction sortPolylinesIntoBuckets(collection) {\n  var mode = collection._mode;\n  var modelMatrix = collection._modelMatrix;\n\n  var polylineBuckets = (collection._polylineBuckets = {});\n  var polylines = collection._polylines;\n  var length = polylines.length;\n  for (var i = 0; i < length; ++i) {\n    var p = polylines[i];\n    if (p._actualPositions.length > 1) {\n      p.update();\n      var material = p.material;\n      var value = polylineBuckets[material.type];\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(value)) {\n        value = polylineBuckets[material.type] = new PolylineBucket(\n          material,\n          mode,\n          modelMatrix\n        );\n      }\n      value.addPolyline(p);\n    }\n  }\n}\n\nfunction updateMode(collection, frameState) {\n  var mode = frameState.mode;\n\n  if (\n    collection._mode !== mode ||\n    !_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].equals */ .Z.equals(collection._modelMatrix, collection.modelMatrix)\n  ) {\n    collection._mode = mode;\n    collection._modelMatrix = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].clone */ .Z.clone(collection.modelMatrix);\n    collection._createVertexArray = true;\n  }\n}\n\nfunction removePolylines(collection) {\n  if (collection._polylinesRemoved) {\n    collection._polylinesRemoved = false;\n    var definedPolylines = [];\n    var definedPolylinesToUpdate = [];\n    var polyIndex = 0;\n    var polyline;\n\n    var length = collection._polylines.length;\n    for (var i = 0; i < length; ++i) {\n      polyline = collection._polylines[i];\n      if (!polyline.isDestroyed) {\n        polyline._index = polyIndex++;\n        definedPolylinesToUpdate.push(polyline);\n        definedPolylines.push(polyline);\n      }\n    }\n\n    collection._polylines = definedPolylines;\n    collection._polylinesToUpdate = definedPolylinesToUpdate;\n  }\n}\n\nfunction releaseShaders(collection) {\n  var polylines = collection._polylines;\n  var length = polylines.length;\n  for (var i = 0; i < length; ++i) {\n    if (!polylines[i].isDestroyed) {\n      var bucket = polylines[i]._bucket;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(bucket)) {\n        bucket.shaderProgram =\n          bucket.shaderProgram && bucket.shaderProgram.destroy();\n      }\n    }\n  }\n}\n\nfunction destroyVertexArrays(collection) {\n  var length = collection._vertexArrays.length;\n  for (var t = 0; t < length; ++t) {\n    collection._vertexArrays[t].va.destroy();\n  }\n  collection._vertexArrays.length = 0;\n}\n\nPolylineCollection.prototype._updatePolyline = function (\n  polyline,\n  propertyChanged\n) {\n  this._polylinesUpdated = true;\n  if (!polyline._dirty) {\n    this._polylinesToUpdate.push(polyline);\n  }\n  ++this._propertiesChanged[propertyChanged];\n};\n\nfunction destroyPolylines(collection) {\n  var polylines = collection._polylines;\n  var length = polylines.length;\n  for (var i = 0; i < length; ++i) {\n    if (!polylines[i].isDestroyed) {\n      polylines[i]._destroy();\n    }\n  }\n}\n\nfunction VertexArrayBucketLocator(count, offset, bucket) {\n  this.count = count;\n  this.offset = offset;\n  this.bucket = bucket;\n}\n\nfunction PolylineBucket(material, mode, modelMatrix) {\n  this.polylines = [];\n  this.lengthOfPositions = 0;\n  this.material = material;\n  this.shaderProgram = undefined;\n  this.mode = mode;\n  this.modelMatrix = modelMatrix;\n}\n\nPolylineBucket.prototype.addPolyline = function (p) {\n  var polylines = this.polylines;\n  polylines.push(p);\n  p._actualLength = this.getPolylinePositionsLength(p);\n  this.lengthOfPositions += p._actualLength;\n  p._bucket = this;\n};\n\nPolylineBucket.prototype.updateShader = function (\n  context,\n  batchTable,\n  useHighlightColor\n) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(this.shaderProgram)) {\n    return;\n  }\n\n  var defines = ["DISTANCE_DISPLAY_CONDITION"];\n  if (useHighlightColor) {\n    defines.push("VECTOR_TILE");\n  }\n\n  // Check for use of v_polylineAngle in material shader\n  if (\n    this.material.shaderSource.search(/varying\\s+float\\s+v_polylineAngle;/g) !==\n    -1\n  ) {\n    defines.push("POLYLINE_DASH");\n  }\n\n  if (!_Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isInternetExplorer */ .Z.isInternetExplorer()) {\n    defines.push("CLIP_POLYLINE");\n  }\n\n  var fs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z({\n    defines: defines,\n    sources: [\n      "varying vec4 v_pickColor;\\n",\n      this.material.shaderSource,\n      _Shaders_PolylineFS_js__WEBPACK_IMPORTED_MODULE_35__/* ["default"] */ .Z,\n    ],\n  });\n\n  var vsSource = batchTable.getVertexShaderCallback()(_Shaders_PolylineVS_js__WEBPACK_IMPORTED_MODULE_36__/* ["default"] */ .Z);\n  var vs = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z({\n    defines: defines,\n    sources: [_Shaders_PolylineCommon_js__WEBPACK_IMPORTED_MODULE_37__/* ["default"] */ .Z, vsSource],\n  });\n\n  this.shaderProgram = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].fromCache */ .Z.fromCache({\n    context: context,\n    vertexShaderSource: vs,\n    fragmentShaderSource: fs,\n    attributeLocations: attributeLocations,\n  });\n};\n\nfunction intersectsIDL(polyline) {\n  return (\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_X */ .Z.UNIT_X, polyline._boundingVolume.center) < 0 ||\n    polyline._boundingVolume.intersectPlane(_Core_Plane_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].ORIGIN_ZX_PLANE */ .Z.ORIGIN_ZX_PLANE) ===\n      _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].INTERSECTING */ .Z.INTERSECTING\n  );\n}\n\nPolylineBucket.prototype.getPolylinePositionsLength = function (polyline) {\n  var length;\n  if (this.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D || !intersectsIDL(polyline)) {\n    length = polyline._actualPositions.length;\n    return length * 4.0 - 4.0;\n  }\n\n  var count = 0;\n  var segmentLengths = polyline._segments.lengths;\n  length = segmentLengths.length;\n  for (var i = 0; i < length; ++i) {\n    count += segmentLengths[i] * 4.0 - 4.0;\n  }\n\n  return count;\n};\n\nvar scratchWritePosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchWritePrevPosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchWriteNextPosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchWriteVector = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchPickColorCartesian = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchWidthShowCartesian = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nPolylineBucket.prototype.write = function (\n  positionArray,\n  texCoordExpandAndBatchIndexArray,\n  positionIndex,\n  colorIndex,\n  texCoordExpandAndBatchIndexIndex,\n  batchTable,\n  context,\n  projection\n) {\n  var mode = this.mode;\n  var maxLon = projection.ellipsoid.maximumRadius * _Core_Math_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].PI */ .Z.PI;\n\n  var polylines = this.polylines;\n  var length = polylines.length;\n  for (var i = 0; i < length; ++i) {\n    var polyline = polylines[i];\n    var width = polyline.width;\n    var show = polyline.show && width > 0.0;\n    var polylineBatchIndex = polyline._index;\n    var segments = this.getSegments(polyline, projection);\n    var positions = segments.positions;\n    var lengths = segments.lengths;\n    var positionsLength = positions.length;\n\n    var pickColor = polyline.getPickId(context).color;\n\n    var segmentIndex = 0;\n    var count = 0;\n    var position;\n\n    for (var j = 0; j < positionsLength; ++j) {\n      if (j === 0) {\n        if (polyline._loop) {\n          position = positions[positionsLength - 2];\n        } else {\n          position = scratchWriteVector;\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(positions[0], positions[1], position);\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(positions[0], position, position);\n        }\n      } else {\n        position = positions[j - 1];\n      }\n\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(position, scratchWritePrevPosition);\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(positions[j], scratchWritePosition);\n\n      if (j === positionsLength - 1) {\n        if (polyline._loop) {\n          position = positions[1];\n        } else {\n          position = scratchWriteVector;\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(\n            positions[positionsLength - 1],\n            positions[positionsLength - 2],\n            position\n          );\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(positions[positionsLength - 1], position, position);\n        }\n      } else {\n        position = positions[j + 1];\n      }\n\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(position, scratchWriteNextPosition);\n\n      var segmentLength = lengths[segmentIndex];\n      if (j === count + segmentLength) {\n        count += segmentLength;\n        ++segmentIndex;\n      }\n\n      var segmentStart = j - count === 0;\n      var segmentEnd = j === count + lengths[segmentIndex] - 1;\n\n      if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n        scratchWritePrevPosition.z = 0.0;\n        scratchWritePosition.z = 0.0;\n        scratchWriteNextPosition.z = 0.0;\n      }\n\n      if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D || mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].MORPHING */ .Z.MORPHING) {\n        if (\n          (segmentStart || segmentEnd) &&\n          maxLon - Math.abs(scratchWritePosition.x) < 1.0\n        ) {\n          if (\n            (scratchWritePosition.x < 0.0 &&\n              scratchWritePrevPosition.x > 0.0) ||\n            (scratchWritePosition.x > 0.0 && scratchWritePrevPosition.x < 0.0)\n          ) {\n            _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(scratchWritePosition, scratchWritePrevPosition);\n          }\n\n          if (\n            (scratchWritePosition.x < 0.0 &&\n              scratchWriteNextPosition.x > 0.0) ||\n            (scratchWritePosition.x > 0.0 && scratchWriteNextPosition.x < 0.0)\n          ) {\n            _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(scratchWritePosition, scratchWriteNextPosition);\n          }\n        }\n      }\n\n      var startK = segmentStart ? 2 : 0;\n      var endK = segmentEnd ? 2 : 4;\n\n      for (var k = startK; k < endK; ++k) {\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          scratchWritePosition,\n          positionArray,\n          positionIndex\n        );\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          scratchWritePrevPosition,\n          positionArray,\n          positionIndex + 6\n        );\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          scratchWriteNextPosition,\n          positionArray,\n          positionIndex + 12\n        );\n\n        var direction = k - 2 < 0 ? -1.0 : 1.0;\n        texCoordExpandAndBatchIndexArray[texCoordExpandAndBatchIndexIndex] =\n          j / (positionsLength - 1); // s tex coord\n        texCoordExpandAndBatchIndexArray[texCoordExpandAndBatchIndexIndex + 1] =\n          2 * (k % 2) - 1; // expand direction\n        texCoordExpandAndBatchIndexArray[\n          texCoordExpandAndBatchIndexIndex + 2\n        ] = direction;\n        texCoordExpandAndBatchIndexArray[\n          texCoordExpandAndBatchIndexIndex + 3\n        ] = polylineBatchIndex;\n\n        positionIndex += 6 * 3;\n        texCoordExpandAndBatchIndexIndex += 4;\n      }\n    }\n\n    var colorCartesian = scratchPickColorCartesian;\n    colorCartesian.x = _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.red);\n    colorCartesian.y = _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.green);\n    colorCartesian.z = _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.blue);\n    colorCartesian.w = _Core_Color_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].floatToByte */ .Z.floatToByte(pickColor.alpha);\n\n    var widthShowCartesian = scratchWidthShowCartesian;\n    widthShowCartesian.x = width;\n    widthShowCartesian.y = show ? 1.0 : 0.0;\n\n    var boundingSphere =\n      mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D\n        ? polyline._boundingVolume2D\n        : polyline._boundingVolumeWC;\n    var encodedCenter = _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].fromCartesian */ .Z.fromCartesian(\n      boundingSphere.center,\n      scratchUpdatePolylineEncodedCartesian\n    );\n    var high = encodedCenter.high;\n    var low = _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromElements */ .Z.fromElements(\n      encodedCenter.low.x,\n      encodedCenter.low.y,\n      encodedCenter.low.z,\n      boundingSphere.radius,\n      scratchUpdatePolylineCartesian4\n    );\n\n    var nearFarCartesian = scratchNearFarCartesian2;\n    nearFarCartesian.x = 0.0;\n    nearFarCartesian.y = Number.MAX_VALUE;\n\n    var distanceDisplayCondition = polyline.distanceDisplayCondition;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(distanceDisplayCondition)) {\n      nearFarCartesian.x = distanceDisplayCondition.near;\n      nearFarCartesian.y = distanceDisplayCondition.far;\n    }\n\n    batchTable.setBatchedAttribute(polylineBatchIndex, 0, widthShowCartesian);\n    batchTable.setBatchedAttribute(polylineBatchIndex, 1, colorCartesian);\n\n    if (batchTable.attributes.length > 2) {\n      batchTable.setBatchedAttribute(polylineBatchIndex, 2, high);\n      batchTable.setBatchedAttribute(polylineBatchIndex, 3, low);\n      batchTable.setBatchedAttribute(polylineBatchIndex, 4, nearFarCartesian);\n    }\n  }\n};\n\nvar morphPositionScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar morphPrevPositionScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar morphNextPositionScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar morphVectorScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nPolylineBucket.prototype.writeForMorph = function (\n  positionArray,\n  positionIndex\n) {\n  var modelMatrix = this.modelMatrix;\n  var polylines = this.polylines;\n  var length = polylines.length;\n  for (var i = 0; i < length; ++i) {\n    var polyline = polylines[i];\n    var positions = polyline._segments.positions;\n    var lengths = polyline._segments.lengths;\n    var positionsLength = positions.length;\n\n    var segmentIndex = 0;\n    var count = 0;\n\n    for (var j = 0; j < positionsLength; ++j) {\n      var prevPosition;\n      if (j === 0) {\n        if (polyline._loop) {\n          prevPosition = positions[positionsLength - 2];\n        } else {\n          prevPosition = morphVectorScratch;\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(positions[0], positions[1], prevPosition);\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(positions[0], prevPosition, prevPosition);\n        }\n      } else {\n        prevPosition = positions[j - 1];\n      }\n\n      prevPosition = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(\n        modelMatrix,\n        prevPosition,\n        morphPrevPositionScratch\n      );\n\n      var position = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(\n        modelMatrix,\n        positions[j],\n        morphPositionScratch\n      );\n\n      var nextPosition;\n      if (j === positionsLength - 1) {\n        if (polyline._loop) {\n          nextPosition = positions[1];\n        } else {\n          nextPosition = morphVectorScratch;\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(\n            positions[positionsLength - 1],\n            positions[positionsLength - 2],\n            nextPosition\n          );\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(\n            positions[positionsLength - 1],\n            nextPosition,\n            nextPosition\n          );\n        }\n      } else {\n        nextPosition = positions[j + 1];\n      }\n\n      nextPosition = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(\n        modelMatrix,\n        nextPosition,\n        morphNextPositionScratch\n      );\n\n      var segmentLength = lengths[segmentIndex];\n      if (j === count + segmentLength) {\n        count += segmentLength;\n        ++segmentIndex;\n      }\n\n      var segmentStart = j - count === 0;\n      var segmentEnd = j === count + lengths[segmentIndex] - 1;\n\n      var startK = segmentStart ? 2 : 0;\n      var endK = segmentEnd ? 2 : 4;\n\n      for (var k = startK; k < endK; ++k) {\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(position, positionArray, positionIndex);\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          prevPosition,\n          positionArray,\n          positionIndex + 6\n        );\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          nextPosition,\n          positionArray,\n          positionIndex + 12\n        );\n\n        positionIndex += 6 * 3;\n      }\n    }\n  }\n};\n\nvar scratchSegmentLengths = new Array(1);\n\nPolylineBucket.prototype.updateIndices = function (\n  totalIndices,\n  vertexBufferOffset,\n  vertexArrayBuckets,\n  offset\n) {\n  var vaCount = vertexArrayBuckets.length - 1;\n  var bucketLocator = new VertexArrayBucketLocator(0, offset, this);\n  vertexArrayBuckets[vaCount].push(bucketLocator);\n  var count = 0;\n  var indices = totalIndices[totalIndices.length - 1];\n  var indicesCount = 0;\n  if (indices.length > 0) {\n    indicesCount = indices[indices.length - 1] + 1;\n  }\n  var polylines = this.polylines;\n  var length = polylines.length;\n  for (var i = 0; i < length; ++i) {\n    var polyline = polylines[i];\n    polyline._locatorBuckets = [];\n\n    var segments;\n    if (this.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n      segments = scratchSegmentLengths;\n      var positionsLength = polyline._actualPositions.length;\n      if (positionsLength > 0) {\n        segments[0] = positionsLength;\n      } else {\n        continue;\n      }\n    } else {\n      segments = polyline._segments.lengths;\n    }\n\n    var numberOfSegments = segments.length;\n    if (numberOfSegments > 0) {\n      var segmentIndexCount = 0;\n      for (var j = 0; j < numberOfSegments; ++j) {\n        var segmentLength = segments[j] - 1.0;\n        for (var k = 0; k < segmentLength; ++k) {\n          if (indicesCount + 4 > _Core_Math_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SIXTY_FOUR_KILOBYTES */ .Z.SIXTY_FOUR_KILOBYTES) {\n            polyline._locatorBuckets.push({\n              locator: bucketLocator,\n              count: segmentIndexCount,\n            });\n            segmentIndexCount = 0;\n            vertexBufferOffset.push(4);\n            indices = [];\n            totalIndices.push(indices);\n            indicesCount = 0;\n            bucketLocator.count = count;\n            count = 0;\n            offset = 0;\n            bucketLocator = new VertexArrayBucketLocator(0, 0, this);\n            vertexArrayBuckets[++vaCount] = [bucketLocator];\n          }\n\n          indices.push(indicesCount, indicesCount + 2, indicesCount + 1);\n          indices.push(indicesCount + 1, indicesCount + 2, indicesCount + 3);\n\n          segmentIndexCount += 6;\n          count += 6;\n          offset += 6;\n          indicesCount += 4;\n        }\n      }\n\n      polyline._locatorBuckets.push({\n        locator: bucketLocator,\n        count: segmentIndexCount,\n      });\n\n      if (indicesCount + 4 > _Core_Math_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SIXTY_FOUR_KILOBYTES */ .Z.SIXTY_FOUR_KILOBYTES) {\n        vertexBufferOffset.push(0);\n        indices = [];\n        totalIndices.push(indices);\n        indicesCount = 0;\n        bucketLocator.count = count;\n        offset = 0;\n        count = 0;\n        bucketLocator = new VertexArrayBucketLocator(0, 0, this);\n        vertexArrayBuckets[++vaCount] = [bucketLocator];\n      }\n    }\n    polyline._clean();\n  }\n  bucketLocator.count = count;\n  return offset;\n};\n\nPolylineBucket.prototype.getPolylineStartIndex = function (polyline) {\n  var polylines = this.polylines;\n  var positionIndex = 0;\n  var length = polylines.length;\n  for (var i = 0; i < length; ++i) {\n    var p = polylines[i];\n    if (p === polyline) {\n      break;\n    }\n    positionIndex += p._actualLength;\n  }\n  return positionIndex;\n};\n\nvar scratchSegments = {\n  positions: undefined,\n  lengths: undefined,\n};\nvar scratchLengths = new Array(1);\nvar pscratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nPolylineBucket.prototype.getSegments = function (polyline, projection) {\n  var positions = polyline._actualPositions;\n\n  if (this.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    scratchLengths[0] = positions.length;\n    scratchSegments.positions = positions;\n    scratchSegments.lengths = scratchLengths;\n    return scratchSegments;\n  }\n\n  if (intersectsIDL(polyline)) {\n    positions = polyline._segments.positions;\n  }\n\n  var ellipsoid = projection.ellipsoid;\n  var newPositions = [];\n  var modelMatrix = this.modelMatrix;\n  var length = positions.length;\n  var position;\n  var p = pscratch;\n\n  for (var n = 0; n < length; ++n) {\n    position = positions[n];\n    p = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(modelMatrix, position, p);\n    newPositions.push(\n      projection.project(\n        ellipsoid.cartesianToCartographic(p, scratchCartographic)\n      )\n    );\n  }\n\n  if (newPositions.length > 0) {\n    polyline._boundingVolume2D = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromPoints */ .Z.fromPoints(\n      newPositions,\n      polyline._boundingVolume2D\n    );\n    var center2D = polyline._boundingVolume2D.center;\n    polyline._boundingVolume2D.center = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      center2D.z,\n      center2D.x,\n      center2D.y\n    );\n  }\n\n  scratchSegments.positions = newPositions;\n  scratchSegments.lengths = polyline._segments.lengths;\n  return scratchSegments;\n};\n\nvar scratchPositionsArray;\n\nPolylineBucket.prototype.writeUpdate = function (\n  index,\n  polyline,\n  positionBuffer,\n  projection\n) {\n  var mode = this.mode;\n  var maxLon = projection.ellipsoid.maximumRadius * _Core_Math_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].PI */ .Z.PI;\n\n  var positionsLength = polyline._actualLength;\n  if (positionsLength) {\n    index += this.getPolylineStartIndex(polyline);\n\n    var positionArray = scratchPositionsArray;\n    var positionsArrayLength = 6 * positionsLength * 3;\n\n    if (\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_34__/* ["default"] */ .Z)(positionArray) ||\n      positionArray.length < positionsArrayLength\n    ) {\n      positionArray = scratchPositionsArray = new Float32Array(\n        positionsArrayLength\n      );\n    } else if (positionArray.length > positionsArrayLength) {\n      positionArray = new Float32Array(\n        positionArray.buffer,\n        0,\n        positionsArrayLength\n      );\n    }\n\n    var segments = this.getSegments(polyline, projection);\n    var positions = segments.positions;\n    var lengths = segments.lengths;\n\n    var positionIndex = 0;\n    var segmentIndex = 0;\n    var count = 0;\n    var position;\n\n    positionsLength = positions.length;\n    for (var i = 0; i < positionsLength; ++i) {\n      if (i === 0) {\n        if (polyline._loop) {\n          position = positions[positionsLength - 2];\n        } else {\n          position = scratchWriteVector;\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(positions[0], positions[1], position);\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(positions[0], position, position);\n        }\n      } else {\n        position = positions[i - 1];\n      }\n\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(position, scratchWritePrevPosition);\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(positions[i], scratchWritePosition);\n\n      if (i === positionsLength - 1) {\n        if (polyline._loop) {\n          position = positions[1];\n        } else {\n          position = scratchWriteVector;\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(\n            positions[positionsLength - 1],\n            positions[positionsLength - 2],\n            position\n          );\n          _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(positions[positionsLength - 1], position, position);\n        }\n      } else {\n        position = positions[i + 1];\n      }\n\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(position, scratchWriteNextPosition);\n\n      var segmentLength = lengths[segmentIndex];\n      if (i === count + segmentLength) {\n        count += segmentLength;\n        ++segmentIndex;\n      }\n\n      var segmentStart = i - count === 0;\n      var segmentEnd = i === count + lengths[segmentIndex] - 1;\n\n      if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n        scratchWritePrevPosition.z = 0.0;\n        scratchWritePosition.z = 0.0;\n        scratchWriteNextPosition.z = 0.0;\n      }\n\n      if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].SCENE2D */ .Z.SCENE2D || mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_33__/* ["default"].MORPHING */ .Z.MORPHING) {\n        if (\n          (segmentStart || segmentEnd) &&\n          maxLon - Math.abs(scratchWritePosition.x) < 1.0\n        ) {\n          if (\n            (scratchWritePosition.x < 0.0 &&\n              scratchWritePrevPosition.x > 0.0) ||\n            (scratchWritePosition.x > 0.0 && scratchWritePrevPosition.x < 0.0)\n          ) {\n            _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(scratchWritePosition, scratchWritePrevPosition);\n          }\n\n          if (\n            (scratchWritePosition.x < 0.0 &&\n              scratchWriteNextPosition.x > 0.0) ||\n            (scratchWritePosition.x > 0.0 && scratchWriteNextPosition.x < 0.0)\n          ) {\n            _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(scratchWritePosition, scratchWriteNextPosition);\n          }\n        }\n      }\n\n      var startJ = segmentStart ? 2 : 0;\n      var endJ = segmentEnd ? 2 : 4;\n\n      for (var j = startJ; j < endJ; ++j) {\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          scratchWritePosition,\n          positionArray,\n          positionIndex\n        );\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          scratchWritePrevPosition,\n          positionArray,\n          positionIndex + 6\n        );\n        _Core_EncodedCartesian3_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].writeElements */ .Z.writeElements(\n          scratchWriteNextPosition,\n          positionArray,\n          positionIndex + 12\n        );\n        positionIndex += 6 * 3;\n      }\n    }\n\n    positionBuffer.copyFromArrayView(\n      positionArray,\n      6 * 3 * Float32Array.BYTES_PER_ELEMENT * index\n    );\n  }\n};\n/* harmony default export */ __webpack_exports__["Z"] = (PolylineCollection);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RkFBZ0I7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxtQkFBbUIsK0VBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQiwrRUFBaUIsYUFBYSxpRkFBa0I7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnRkFBZ0I7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0ZBQWdCO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDJCQUEyQixVQUFVO0FBQ3JDLFFBQVEsd0dBQStCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx3R0FBK0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdHQUErQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxrQkFBa0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Qb2x5bGluZUNvbGxlY3Rpb24uanM/YWU5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm91bmRpbmdTcGhlcmUgZnJvbSBcIi4uL0NvcmUvQm91bmRpbmdTcGhlcmUuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4yIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjIuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW40IGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjQuanNcIjtcbmltcG9ydCBDYXJ0b2dyYXBoaWMgZnJvbSBcIi4uL0NvcmUvQ2FydG9ncmFwaGljLmpzXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL0NvcmUvQ29sb3IuanNcIjtcbmltcG9ydCBjb21iaW5lIGZyb20gXCIuLi9Db3JlL2NvbWJpbmUuanNcIjtcbmltcG9ydCBDb21wb25lbnREYXRhdHlwZSBmcm9tIFwiLi4vQ29yZS9Db21wb25lbnREYXRhdHlwZS5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEVuY29kZWRDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0VuY29kZWRDYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgRmVhdHVyZURldGVjdGlvbiBmcm9tIFwiLi4vQ29yZS9GZWF0dXJlRGV0ZWN0aW9uLmpzXCI7XG5pbXBvcnQgSW5kZXhEYXRhdHlwZSBmcm9tIFwiLi4vQ29yZS9JbmRleERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgSW50ZXJzZWN0IGZyb20gXCIuLi9Db3JlL0ludGVyc2VjdC5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSBcIi4uL0NvcmUvTWF0cml4NC5qc1wiO1xuaW1wb3J0IFBsYW5lIGZyb20gXCIuLi9Db3JlL1BsYW5lLmpzXCI7XG5pbXBvcnQgUnVudGltZUVycm9yIGZyb20gXCIuLi9Db3JlL1J1bnRpbWVFcnJvci5qc1wiO1xuaW1wb3J0IEJ1ZmZlciBmcm9tIFwiLi4vUmVuZGVyZXIvQnVmZmVyLmpzXCI7XG5pbXBvcnQgQnVmZmVyVXNhZ2UgZnJvbSBcIi4uL1JlbmRlcmVyL0J1ZmZlclVzYWdlLmpzXCI7XG5pbXBvcnQgQ29udGV4dExpbWl0cyBmcm9tIFwiLi4vUmVuZGVyZXIvQ29udGV4dExpbWl0cy5qc1wiO1xuaW1wb3J0IERyYXdDb21tYW5kIGZyb20gXCIuLi9SZW5kZXJlci9EcmF3Q29tbWFuZC5qc1wiO1xuaW1wb3J0IFBhc3MgZnJvbSBcIi4uL1JlbmRlcmVyL1Bhc3MuanNcIjtcbmltcG9ydCBSZW5kZXJTdGF0ZSBmcm9tIFwiLi4vUmVuZGVyZXIvUmVuZGVyU3RhdGUuanNcIjtcbmltcG9ydCBTaGFkZXJQcm9ncmFtIGZyb20gXCIuLi9SZW5kZXJlci9TaGFkZXJQcm9ncmFtLmpzXCI7XG5pbXBvcnQgU2hhZGVyU291cmNlIGZyb20gXCIuLi9SZW5kZXJlci9TaGFkZXJTb3VyY2UuanNcIjtcbmltcG9ydCBUZXh0dXJlIGZyb20gXCIuLi9SZW5kZXJlci9UZXh0dXJlLmpzXCI7XG5pbXBvcnQgVmVydGV4QXJyYXkgZnJvbSBcIi4uL1JlbmRlcmVyL1ZlcnRleEFycmF5LmpzXCI7XG5pbXBvcnQgUG9seWxpbmVDb21tb24gZnJvbSBcIi4uL1NoYWRlcnMvUG9seWxpbmVDb21tb24uanNcIjtcbmltcG9ydCBQb2x5bGluZUZTIGZyb20gXCIuLi9TaGFkZXJzL1BvbHlsaW5lRlMuanNcIjtcbmltcG9ydCBQb2x5bGluZVZTIGZyb20gXCIuLi9TaGFkZXJzL1BvbHlsaW5lVlMuanNcIjtcbmltcG9ydCBCYXRjaFRhYmxlIGZyb20gXCIuL0JhdGNoVGFibGUuanNcIjtcbmltcG9ydCBCbGVuZGluZ1N0YXRlIGZyb20gXCIuL0JsZW5kaW5nU3RhdGUuanNcIjtcbmltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi9NYXRlcmlhbC5qc1wiO1xuaW1wb3J0IFBvbHlsaW5lIGZyb20gXCIuL1BvbHlsaW5lLmpzXCI7XG5pbXBvcnQgU2NlbmVNb2RlIGZyb20gXCIuL1NjZW5lTW9kZS5qc1wiO1xuXG52YXIgU0hPV19JTkRFWCA9IFBvbHlsaW5lLlNIT1dfSU5ERVg7XG52YXIgV0lEVEhfSU5ERVggPSBQb2x5bGluZS5XSURUSF9JTkRFWDtcbnZhciBQT1NJVElPTl9JTkRFWCA9IFBvbHlsaW5lLlBPU0lUSU9OX0lOREVYO1xudmFyIE1BVEVSSUFMX0lOREVYID0gUG9seWxpbmUuTUFURVJJQUxfSU5ERVg7XG4vL1BPU0lUSU9OX1NJWkVfSU5ERVggaXMgbmVlZGVkIGZvciB3aGVuIHRoZSBwb2x5bGluZSdzIHBvc2l0aW9uIGFycmF5IGNoYW5nZXMgc2l6ZS5cbi8vV2hlbiBpdCBkb2VzLCB3ZSBuZWVkIHRvIHJlY3JlYXRlIHRoZSBpbmRpY2VzQnVmZmVyLlxudmFyIFBPU0lUSU9OX1NJWkVfSU5ERVggPSBQb2x5bGluZS5QT1NJVElPTl9TSVpFX0lOREVYO1xudmFyIERJU1RBTkNFX0RJU1BMQVlfQ09ORElUSU9OID0gUG9seWxpbmUuRElTVEFOQ0VfRElTUExBWV9DT05ESVRJT047XG52YXIgTlVNQkVSX09GX1BST1BFUlRJRVMgPSBQb2x5bGluZS5OVU1CRVJfT0ZfUFJPUEVSVElFUztcblxudmFyIGF0dHJpYnV0ZUxvY2F0aW9ucyA9IHtcbiAgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4OiAwLFxuICBwb3NpdGlvbjNESGlnaDogMSxcbiAgcG9zaXRpb24zRExvdzogMixcbiAgcG9zaXRpb24yREhpZ2g6IDMsXG4gIHBvc2l0aW9uMkRMb3c6IDQsXG4gIHByZXZQb3NpdGlvbjNESGlnaDogNSxcbiAgcHJldlBvc2l0aW9uM0RMb3c6IDYsXG4gIHByZXZQb3NpdGlvbjJESGlnaDogNyxcbiAgcHJldlBvc2l0aW9uMkRMb3c6IDgsXG4gIG5leHRQb3NpdGlvbjNESGlnaDogOSxcbiAgbmV4dFBvc2l0aW9uM0RMb3c6IDEwLFxuICBuZXh0UG9zaXRpb24yREhpZ2g6IDExLFxuICBuZXh0UG9zaXRpb24yRExvdzogMTIsXG59O1xuXG4vKipcbiAqIEEgcmVuZGVyYWJsZSBjb2xsZWN0aW9uIG9mIHBvbHlsaW5lcy5cbiAqIDxiciAvPjxiciAvPlxuICogPGRpdiBhbGlnbj1cImNlbnRlclwiPlxuICogPGltZyBzcmM9XCJJbWFnZXMvUG9seWxpbmUucG5nXCIgd2lkdGg9XCI0MDBcIiBoZWlnaHQ9XCIzMDBcIiAvPjxiciAvPlxuICogRXhhbXBsZSBwb2x5bGluZXNcbiAqIDwvZGl2PlxuICogPGJyIC8+PGJyIC8+XG4gKiBQb2x5bGluZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24gdXNpbmcge0BsaW5rIFBvbHlsaW5lQ29sbGVjdGlvbiNhZGR9XG4gKiBhbmQge0BsaW5rIFBvbHlsaW5lQ29sbGVjdGlvbiNyZW1vdmV9LlxuICpcbiAqIEBhbGlhcyBQb2x5bGluZUNvbGxlY3Rpb25cbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtNYXRyaXg0fSBbb3B0aW9ucy5tb2RlbE1hdHJpeD1NYXRyaXg0LklERU5USVRZXSBUaGUgNHg0IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCB0aGF0IHRyYW5zZm9ybXMgZWFjaCBwb2x5bGluZSBmcm9tIG1vZGVsIHRvIHdvcmxkIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZT1mYWxzZV0gRm9yIGRlYnVnZ2luZyBvbmx5LiBEZXRlcm1pbmVzIGlmIHRoaXMgcHJpbWl0aXZlJ3MgY29tbWFuZHMnIGJvdW5kaW5nIHNwaGVyZXMgYXJlIHNob3duLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zaG93PXRydWVdIERldGVybWluZXMgaWYgdGhlIHBvbHlsaW5lcyBpbiB0aGUgY29sbGVjdGlvbiB3aWxsIGJlIHNob3duLlxuICpcbiAqIEBwZXJmb3JtYW5jZSBGb3IgYmVzdCBwZXJmb3JtYW5jZSwgcHJlZmVyIGEgZmV3IGNvbGxlY3Rpb25zLCBlYWNoIHdpdGggbWFueSBwb2x5bGluZXMsIHRvXG4gKiBtYW55IGNvbGxlY3Rpb25zIHdpdGggb25seSBhIGZldyBwb2x5bGluZXMgZWFjaC4gIE9yZ2FuaXplIGNvbGxlY3Rpb25zIHNvIHRoYXQgcG9seWxpbmVzXG4gKiB3aXRoIHRoZSBzYW1lIHVwZGF0ZSBmcmVxdWVuY3kgYXJlIGluIHRoZSBzYW1lIGNvbGxlY3Rpb24sIGkuZS4sIHBvbHlsaW5lcyB0aGF0IGRvIG5vdFxuICogY2hhbmdlIHNob3VsZCBiZSBpbiBvbmUgY29sbGVjdGlvbjsgcG9seWxpbmVzIHRoYXQgY2hhbmdlIGV2ZXJ5IGZyYW1lIHNob3VsZCBiZSBpbiBhbm90aGVyXG4gKiBjb2xsZWN0aW9uOyBhbmQgc28gb24uXG4gKlxuICogQHNlZSBQb2x5bGluZUNvbGxlY3Rpb24jYWRkXG4gKiBAc2VlIFBvbHlsaW5lQ29sbGVjdGlvbiNyZW1vdmVcbiAqIEBzZWUgUG9seWxpbmVcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENyZWF0ZSBhIHBvbHlsaW5lIGNvbGxlY3Rpb24gd2l0aCB0d28gcG9seWxpbmVzXG4gKiB2YXIgcG9seWxpbmVzID0gbmV3IENlc2l1bS5Qb2x5bGluZUNvbGxlY3Rpb24oKTtcbiAqIHBvbHlsaW5lcy5hZGQoe1xuICogICBwb3NpdGlvbnMgOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAtNzUuMTAsIDM5LjU3LFxuICogICAgIC03Ny4wMiwgMzguNTMsXG4gKiAgICAgLTgwLjUwLCAzNS4xNCxcbiAqICAgICAtODAuMTIsIDI1LjQ2XSksXG4gKiAgIHdpZHRoIDogMlxuICogfSk7XG4gKlxuICogcG9seWxpbmVzLmFkZCh7XG4gKiAgIHBvc2l0aW9ucyA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgIC03My4xMCwgMzcuNTcsXG4gKiAgICAgLTc1LjAyLCAzNi41MyxcbiAqICAgICAtNzguNTAsIDMzLjE0LFxuICogICAgIC03OC4xMiwgMjMuNDZdKSxcbiAqICAgd2lkdGggOiA0XG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gUG9seWxpbmVDb2xsZWN0aW9uKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBwb2x5bGluZXMgaW4gdGhpcyBjb2xsZWN0aW9uIHdpbGwgYmUgc2hvd24uXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICB0aGlzLnNob3cgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5zaG93LCB0cnVlKTtcblxuICAvKipcbiAgICogVGhlIDR4NCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggdGhhdCB0cmFuc2Zvcm1zIGVhY2ggcG9seWxpbmUgaW4gdGhpcyBjb2xsZWN0aW9uIGZyb20gbW9kZWwgdG8gd29ybGQgY29vcmRpbmF0ZXMuXG4gICAqIFdoZW4gdGhpcyBpcyB0aGUgaWRlbnRpdHkgbWF0cml4LCB0aGUgcG9seWxpbmVzIGFyZSBkcmF3biBpbiB3b3JsZCBjb29yZGluYXRlcywgaS5lLiwgRWFydGgncyBXR1M4NCBjb29yZGluYXRlcy5cbiAgICogTG9jYWwgcmVmZXJlbmNlIGZyYW1lcyBjYW4gYmUgdXNlZCBieSBwcm92aWRpbmcgYSBkaWZmZXJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LCBsaWtlIHRoYXQgcmV0dXJuZWRcbiAgICogYnkge0BsaW5rIFRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWV9LlxuICAgKlxuICAgKiBAdHlwZSB7TWF0cml4NH1cbiAgICogQGRlZmF1bHQge0BsaW5rIE1hdHJpeDQuSURFTlRJVFl9XG4gICAqL1xuICB0aGlzLm1vZGVsTWF0cml4ID0gTWF0cml4NC5jbG9uZShcbiAgICBkZWZhdWx0VmFsdWUob3B0aW9ucy5tb2RlbE1hdHJpeCwgTWF0cml4NC5JREVOVElUWSlcbiAgKTtcbiAgdGhpcy5fbW9kZWxNYXRyaXggPSBNYXRyaXg0LmNsb25lKE1hdHJpeDQuSURFTlRJVFkpO1xuXG4gIC8qKlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGZvciBkZWJ1Z2dpbmcgb25seTsgaXQgaXMgbm90IGZvciBwcm9kdWN0aW9uIHVzZSBub3IgaXMgaXQgb3B0aW1pemVkLlxuICAgKiA8cD5cbiAgICogRHJhd3MgdGhlIGJvdW5kaW5nIHNwaGVyZSBmb3IgZWFjaCBkcmF3IGNvbW1hbmQgaW4gdGhlIHByaW1pdGl2ZS5cbiAgICogPC9wPlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSxcbiAgICBmYWxzZVxuICApO1xuXG4gIHRoaXMuX29wYXF1ZVJTID0gdW5kZWZpbmVkO1xuICB0aGlzLl90cmFuc2x1Y2VudFJTID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX2NvbG9yQ29tbWFuZHMgPSBbXTtcblxuICB0aGlzLl9wb2x5bGluZXNVcGRhdGVkID0gZmFsc2U7XG4gIHRoaXMuX3BvbHlsaW5lc1JlbW92ZWQgPSBmYWxzZTtcbiAgdGhpcy5fY3JlYXRlVmVydGV4QXJyYXkgPSBmYWxzZTtcbiAgdGhpcy5fcHJvcGVydGllc0NoYW5nZWQgPSBuZXcgVWludDMyQXJyYXkoTlVNQkVSX09GX1BST1BFUlRJRVMpO1xuICB0aGlzLl9wb2x5bGluZXMgPSBbXTtcbiAgdGhpcy5fcG9seWxpbmVCdWNrZXRzID0ge307XG5cbiAgLy8gVGhlIGJ1ZmZlciB1c2FnZSBpcyBkZXRlcm1pbmVkIGJhc2VkIG9uIHRoZSB1c2FnZSBvZiB0aGUgYXR0cmlidXRlIG92ZXIgdGltZS5cbiAgdGhpcy5fcG9zaXRpb25CdWZmZXJVc2FnZSA9IHtcbiAgICBidWZmZXJVc2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXG4gICAgZnJhbWVDb3VudDogMCxcbiAgfTtcblxuICB0aGlzLl9tb2RlID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX3BvbHlsaW5lc1RvVXBkYXRlID0gW107XG4gIHRoaXMuX3ZlcnRleEFycmF5cyA9IFtdO1xuICB0aGlzLl9wb3NpdGlvbkJ1ZmZlciA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4QnVmZmVyID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX2JhdGNoVGFibGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2NyZWF0ZUJhdGNoVGFibGUgPSBmYWxzZTtcblxuICAvLyBPbmx5IHVzZWQgYnkgVmVjdG9yM0RUaWxlUG9pbnRzXG4gIHRoaXMuX3VzZUhpZ2hsaWdodENvbG9yID0gZmFsc2U7XG4gIHRoaXMuX2hpZ2hsaWdodENvbG9yID0gQ29sb3IuY2xvbmUoQ29sb3IuV0hJVEUpO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdGhpcy5fdW5pZm9ybU1hcCA9IHtcbiAgICB1X2hpZ2hsaWdodENvbG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhhdC5faGlnaGxpZ2h0Q29sb3I7XG4gICAgfSxcbiAgfTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUG9seWxpbmVDb2xsZWN0aW9uLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHBvbHlsaW5lcyBpbiB0aGlzIGNvbGxlY3Rpb24uICBUaGlzIGlzIGNvbW1vbmx5IHVzZWQgd2l0aFxuICAgKiB7QGxpbmsgUG9seWxpbmVDb2xsZWN0aW9uI2dldH0gdG8gaXRlcmF0ZSBvdmVyIGFsbCB0aGUgcG9seWxpbmVzXG4gICAqIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAbWVtYmVyb2YgUG9seWxpbmVDb2xsZWN0aW9uLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbGVuZ3RoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmVQb2x5bGluZXModGhpcyk7XG4gICAgICByZXR1cm4gdGhpcy5fcG9seWxpbmVzLmxlbmd0aDtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGFkZHMgYSBwb2x5bGluZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBwcm9wZXJ0aWVzIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIFRoZSBhZGRlZCBwb2x5bGluZSBpcyByZXR1cm5lZCBzbyBpdCBjYW4gYmUgbW9kaWZpZWQgb3IgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uIGxhdGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9W29wdGlvbnNdIEEgdGVtcGxhdGUgZGVzY3JpYmluZyB0aGUgcG9seWxpbmUncyBwcm9wZXJ0aWVzIGFzIHNob3duIGluIEV4YW1wbGUgMS5cbiAgICAgKiBAcmV0dXJucyB7UG9seWxpbmV9IFRoZSBwb2x5bGluZSB0aGF0IHdhcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwZXJmb3JtYW5jZSBBZnRlciBjYWxsaW5nIDxjb2RlPmFkZDwvY29kZT4sIHtAbGluayBQb2x5bGluZUNvbGxlY3Rpb24jdXBkYXRlfSBpcyBjYWxsZWQgYW5kXG4gICAgICogdGhlIGNvbGxlY3Rpb24ncyB2ZXJ0ZXggYnVmZmVyIGlzIHJld3JpdHRlbiAtIGFuIDxjb2RlPk8obik8L2NvZGU+IG9wZXJhdGlvbiB0aGF0IGFsc28gaW5jdXJzIENQVSB0byBHUFUgb3ZlcmhlYWQuXG4gICAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIGFkZCBhcyBtYW55IHBvbHlsaW5lcyBhcyBwb3NzaWJsZSBiZWZvcmUgY2FsbGluZyA8Y29kZT51cGRhdGU8L2NvZGU+LlxuICAgICAqXG4gICAgICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIEV4YW1wbGUgMTogIEFkZCBhIHBvbHlsaW5lLCBzcGVjaWZ5aW5nIGFsbCB0aGUgZGVmYXVsdCB2YWx1ZXMuXG4gICAgICogdmFyIHAgPSBwb2x5bGluZXMuYWRkKHtcbiAgICAgKiAgIHNob3cgOiB0cnVlLFxuICAgICAqICAgcG9zaXRpb25zIDogZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY0FycmF5VG9DYXJ0ZXNpYW5BcnJheShbXG4gICAgICAgICAgIENlc2l1bS5DYXJ0b2dyYXBoaWMuZnJvbURlZ3JlZXMoLTc1LjEwLCAzOS41NyksXG4gICAgICAgICAgIENlc2l1bS5DYXJ0b2dyYXBoaWMuZnJvbURlZ3JlZXMoLTc3LjAyLCAzOC41MyldKSxcbiAgICAgKiAgIHdpZHRoIDogMVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogQHNlZSBQb2x5bGluZUNvbGxlY3Rpb24jcmVtb3ZlXG4gICAgICogQHNlZSBQb2x5bGluZUNvbGxlY3Rpb24jcmVtb3ZlQWxsXG4gICAgICogQHNlZSBQb2x5bGluZUNvbGxlY3Rpb24jdXBkYXRlXG4gICAgICovXG5Qb2x5bGluZUNvbGxlY3Rpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHZhciBwID0gbmV3IFBvbHlsaW5lKG9wdGlvbnMsIHRoaXMpO1xuICBwLl9pbmRleCA9IHRoaXMuX3BvbHlsaW5lcy5sZW5ndGg7XG4gIHRoaXMuX3BvbHlsaW5lcy5wdXNoKHApO1xuICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XG4gIHRoaXMuX2NyZWF0ZUJhdGNoVGFibGUgPSB0cnVlO1xuICByZXR1cm4gcDtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIHBvbHlsaW5lIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQb2x5bGluZX0gcG9seWxpbmUgVGhlIHBvbHlsaW5lIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgcG9seWxpbmUgd2FzIHJlbW92ZWQ7IDxjb2RlPmZhbHNlPC9jb2RlPiBpZiB0aGUgcG9seWxpbmUgd2FzIG5vdCBmb3VuZCBpbiB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgQWZ0ZXIgY2FsbGluZyA8Y29kZT5yZW1vdmU8L2NvZGU+LCB7QGxpbmsgUG9seWxpbmVDb2xsZWN0aW9uI3VwZGF0ZX0gaXMgY2FsbGVkIGFuZFxuICogdGhlIGNvbGxlY3Rpb24ncyB2ZXJ0ZXggYnVmZmVyIGlzIHJld3JpdHRlbiAtIGFuIDxjb2RlPk8obik8L2NvZGU+IG9wZXJhdGlvbiB0aGF0IGFsc28gaW5jdXJzIENQVSB0byBHUFUgb3ZlcmhlYWQuXG4gKiBGb3IgYmVzdCBwZXJmb3JtYW5jZSwgcmVtb3ZlIGFzIG1hbnkgcG9seWxpbmVzIGFzIHBvc3NpYmxlIGJlZm9yZSBjYWxsaW5nIDxjb2RlPnVwZGF0ZTwvY29kZT4uXG4gKiBJZiB5b3UgaW50ZW5kIHRvIHRlbXBvcmFyaWx5IGhpZGUgYSBwb2x5bGluZSwgaXQgaXMgdXN1YWxseSBtb3JlIGVmZmljaWVudCB0byBjYWxsXG4gKiB7QGxpbmsgUG9seWxpbmUjc2hvd30gaW5zdGVhZCBvZiByZW1vdmluZyBhbmQgcmUtYWRkaW5nIHRoZSBwb2x5bGluZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgcCA9IHBvbHlsaW5lcy5hZGQoLi4uKTtcbiAqIHBvbHlsaW5lcy5yZW1vdmUocCk7ICAvLyBSZXR1cm5zIHRydWVcbiAqXG4gKiBAc2VlIFBvbHlsaW5lQ29sbGVjdGlvbiNhZGRcbiAqIEBzZWUgUG9seWxpbmVDb2xsZWN0aW9uI3JlbW92ZUFsbFxuICogQHNlZSBQb2x5bGluZUNvbGxlY3Rpb24jdXBkYXRlXG4gKiBAc2VlIFBvbHlsaW5lI3Nob3dcbiAqL1xuUG9seWxpbmVDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAocG9seWxpbmUpIHtcbiAgaWYgKHRoaXMuY29udGFpbnMocG9seWxpbmUpKSB7XG4gICAgdGhpcy5fcG9seWxpbmVzUmVtb3ZlZCA9IHRydWU7XG4gICAgdGhpcy5fY3JlYXRlVmVydGV4QXJyYXkgPSB0cnVlO1xuICAgIHRoaXMuX2NyZWF0ZUJhdGNoVGFibGUgPSB0cnVlO1xuICAgIGlmIChkZWZpbmVkKHBvbHlsaW5lLl9idWNrZXQpKSB7XG4gICAgICB2YXIgYnVja2V0ID0gcG9seWxpbmUuX2J1Y2tldDtcbiAgICAgIGJ1Y2tldC5zaGFkZXJQcm9ncmFtID1cbiAgICAgICAgYnVja2V0LnNoYWRlclByb2dyYW0gJiYgYnVja2V0LnNoYWRlclByb2dyYW0uZGVzdHJveSgpO1xuICAgIH1cbiAgICBwb2x5bGluZS5fZGVzdHJveSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBwb2x5bGluZXMgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgPGNvZGU+TyhuKTwvY29kZT4uICBJdCBpcyBtb3JlIGVmZmljaWVudCB0byByZW1vdmUgYWxsIHRoZSBwb2x5bGluZXNcbiAqIGZyb20gYSBjb2xsZWN0aW9uIGFuZCB0aGVuIGFkZCBuZXcgb25lcyB0aGFuIHRvIGNyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uIGVudGlyZWx5LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIHBvbHlsaW5lcy5hZGQoLi4uKTtcbiAqIHBvbHlsaW5lcy5hZGQoLi4uKTtcbiAqIHBvbHlsaW5lcy5yZW1vdmVBbGwoKTtcbiAqXG4gKiBAc2VlIFBvbHlsaW5lQ29sbGVjdGlvbiNhZGRcbiAqIEBzZWUgUG9seWxpbmVDb2xsZWN0aW9uI3JlbW92ZVxuICogQHNlZSBQb2x5bGluZUNvbGxlY3Rpb24jdXBkYXRlXG4gKi9cblBvbHlsaW5lQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKCkge1xuICByZWxlYXNlU2hhZGVycyh0aGlzKTtcbiAgZGVzdHJveVBvbHlsaW5lcyh0aGlzKTtcbiAgdGhpcy5fcG9seWxpbmVCdWNrZXRzID0ge307XG4gIHRoaXMuX3BvbHlsaW5lc1JlbW92ZWQgPSBmYWxzZTtcbiAgdGhpcy5fcG9seWxpbmVzLmxlbmd0aCA9IDA7XG4gIHRoaXMuX3BvbHlsaW5lc1RvVXBkYXRlLmxlbmd0aCA9IDA7XG4gIHRoaXMuX2NyZWF0ZVZlcnRleEFycmF5ID0gdHJ1ZTtcbn07XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGlzIGNvbGxlY3Rpb24gY29udGFpbnMgdGhlIHNwZWNpZmllZCBwb2x5bGluZS5cbiAqXG4gKiBAcGFyYW0ge1BvbHlsaW5lfSBwb2x5bGluZSBUaGUgcG9seWxpbmUgdG8gY2hlY2sgZm9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGhpcyBjb2xsZWN0aW9uIGNvbnRhaW5zIHRoZSBwb2x5bGluZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICpcbiAqIEBzZWUgUG9seWxpbmVDb2xsZWN0aW9uI2dldFxuICovXG5Qb2x5bGluZUNvbGxlY3Rpb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHBvbHlsaW5lKSB7XG4gIHJldHVybiBkZWZpbmVkKHBvbHlsaW5lKSAmJiBwb2x5bGluZS5fcG9seWxpbmVDb2xsZWN0aW9uID09PSB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb2x5bGluZSBpbiB0aGUgY29sbGVjdGlvbiBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LiAgSW5kaWNlcyBhcmUgemVyby1iYXNlZFxuICogYW5kIGluY3JlYXNlIGFzIHBvbHlsaW5lcyBhcmUgYWRkZWQuICBSZW1vdmluZyBhIHBvbHlsaW5lIHNoaWZ0cyBhbGwgcG9seWxpbmVzIGFmdGVyXG4gKiBpdCB0byB0aGUgbGVmdCwgY2hhbmdpbmcgdGhlaXIgaW5kaWNlcy4gIFRoaXMgZnVuY3Rpb24gaXMgY29tbW9ubHkgdXNlZCB3aXRoXG4gKiB7QGxpbmsgUG9seWxpbmVDb2xsZWN0aW9uI2xlbmd0aH0gdG8gaXRlcmF0ZSBvdmVyIGFsbCB0aGUgcG9seWxpbmVzXG4gKiBpbiB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhlIHBvbHlsaW5lLlxuICogQHJldHVybnMge1BvbHlsaW5lfSBUaGUgcG9seWxpbmUgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAqXG4gKiBAcGVyZm9ybWFuY2UgSWYgcG9seWxpbmVzIHdlcmUgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZFxuICoge0BsaW5rIFBvbHlsaW5lQ29sbGVjdGlvbiN1cGRhdGV9IHdhcyBub3QgY2FsbGVkLCBhbiBpbXBsaWNpdCA8Y29kZT5PKG4pPC9jb2RlPlxuICogb3BlcmF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRvZ2dsZSB0aGUgc2hvdyBwcm9wZXJ0eSBvZiBldmVyeSBwb2x5bGluZSBpbiB0aGUgY29sbGVjdGlvblxuICogdmFyIGxlbiA9IHBvbHlsaW5lcy5sZW5ndGg7XG4gKiBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gKiAgIHZhciBwID0gcG9seWxpbmVzLmdldChpKTtcbiAqICAgcC5zaG93ID0gIXAuc2hvdztcbiAqIH1cbiAqXG4gKiBAc2VlIFBvbHlsaW5lQ29sbGVjdGlvbiNsZW5ndGhcbiAqL1xuUG9seWxpbmVDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGluZGV4KSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImluZGV4IGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICByZW1vdmVQb2x5bGluZXModGhpcyk7XG4gIHJldHVybiB0aGlzLl9wb2x5bGluZXNbaW5kZXhdO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlQmF0Y2hUYWJsZShjb2xsZWN0aW9uLCBjb250ZXh0KSB7XG4gIGlmIChkZWZpbmVkKGNvbGxlY3Rpb24uX2JhdGNoVGFibGUpKSB7XG4gICAgY29sbGVjdGlvbi5fYmF0Y2hUYWJsZS5kZXN0cm95KCk7XG4gIH1cblxuICB2YXIgYXR0cmlidXRlcyA9IFtcbiAgICB7XG4gICAgICBmdW5jdGlvbk5hbWU6IFwiYmF0Y2hUYWJsZV9nZXRXaWR0aEFuZFNob3dcIixcbiAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFLFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMixcbiAgICB9LFxuICAgIHtcbiAgICAgIGZ1bmN0aW9uTmFtZTogXCJiYXRjaFRhYmxlX2dldFBpY2tDb2xvclwiLFxuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxuICAgICAgbm9ybWFsaXplOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgZnVuY3Rpb25OYW1lOiBcImJhdGNoVGFibGVfZ2V0Q2VudGVySGlnaFwiLFxuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGZ1bmN0aW9uTmFtZTogXCJiYXRjaFRhYmxlX2dldENlbnRlckxvd0FuZFJhZGl1c1wiLFxuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogNCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGZ1bmN0aW9uTmFtZTogXCJiYXRjaFRhYmxlX2dldERpc3RhbmNlRGlzcGxheUNvbmRpdGlvblwiLFxuICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMixcbiAgICB9LFxuICBdO1xuXG4gIGNvbGxlY3Rpb24uX2JhdGNoVGFibGUgPSBuZXcgQmF0Y2hUYWJsZShcbiAgICBjb250ZXh0LFxuICAgIGF0dHJpYnV0ZXMsXG4gICAgY29sbGVjdGlvbi5fcG9seWxpbmVzLmxlbmd0aFxuICApO1xufVxuXG52YXIgc2NyYXRjaFVwZGF0ZVBvbHlsaW5lRW5jb2RlZENhcnRlc2lhbiA9IG5ldyBFbmNvZGVkQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hVcGRhdGVQb2x5bGluZUNhcnRlc2lhbjQgPSBuZXcgQ2FydGVzaWFuNCgpO1xudmFyIHNjcmF0Y2hOZWFyRmFyQ2FydGVzaWFuMiA9IG5ldyBDYXJ0ZXNpYW4yKCk7XG5cbi8qKlxuICogQ2FsbGVkIHdoZW4ge0BsaW5rIFZpZXdlcn0gb3Ige0BsaW5rIENlc2l1bVdpZGdldH0gcmVuZGVyIHRoZSBzY2VuZSB0b1xuICogZ2V0IHRoZSBkcmF3IGNvbW1hbmRzIG5lZWRlZCB0byByZW5kZXIgdGhpcyBwcmltaXRpdmUuXG4gKiA8cD5cbiAqIERvIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24gZGlyZWN0bHkuICBUaGlzIGlzIGRvY3VtZW50ZWQganVzdCB0b1xuICogbGlzdCB0aGUgZXhjZXB0aW9ucyB0aGF0IG1heSBiZSBwcm9wYWdhdGVkIHdoZW4gdGhlIHNjZW5lIGlzIHJlbmRlcmVkOlxuICogPC9wPlxuICpcbiAqIEBleGNlcHRpb24ge1J1bnRpbWVFcnJvcn0gVmVydGV4IHRleHR1cmUgZmV0Y2ggc3VwcG9ydCBpcyByZXF1aXJlZCB0byByZW5kZXIgcHJpbWl0aXZlcyB3aXRoIHBlci1pbnN0YW5jZSBhdHRyaWJ1dGVzLiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdmVydGV4IHRleHR1cmUgaW1hZ2UgdW5pdHMgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby5cbiAqL1xuUG9seWxpbmVDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICByZW1vdmVQb2x5bGluZXModGhpcyk7XG5cbiAgaWYgKHRoaXMuX3BvbHlsaW5lcy5sZW5ndGggPT09IDAgfHwgIXRoaXMuc2hvdykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHVwZGF0ZU1vZGUodGhpcywgZnJhbWVTdGF0ZSk7XG5cbiAgdmFyIGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XG4gIHZhciBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uO1xuICB2YXIgcG9seWxpbmU7XG4gIHZhciBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllc0NoYW5nZWQ7XG5cbiAgaWYgKHRoaXMuX2NyZWF0ZUJhdGNoVGFibGUpIHtcbiAgICBpZiAoQ29udGV4dExpbWl0cy5tYXhpbXVtVmVydGV4VGV4dHVyZUltYWdlVW5pdHMgPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgIFwiVmVydGV4IHRleHR1cmUgZmV0Y2ggc3VwcG9ydCBpcyByZXF1aXJlZCB0byByZW5kZXIgcG9seWxpbmVzLiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdmVydGV4IHRleHR1cmUgaW1hZ2UgdW5pdHMgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgY3JlYXRlQmF0Y2hUYWJsZSh0aGlzLCBjb250ZXh0KTtcbiAgICB0aGlzLl9jcmVhdGVCYXRjaFRhYmxlID0gZmFsc2U7XG4gIH1cblxuICBpZiAodGhpcy5fY3JlYXRlVmVydGV4QXJyYXkgfHwgY29tcHV0ZU5ld0J1ZmZlcnNVc2FnZSh0aGlzKSkge1xuICAgIGNyZWF0ZVZlcnRleEFycmF5cyh0aGlzLCBjb250ZXh0LCBwcm9qZWN0aW9uKTtcbiAgfSBlbHNlIGlmICh0aGlzLl9wb2x5bGluZXNVcGRhdGVkKSB7XG4gICAgLy8gUG9seWxpbmVzIHdlcmUgbW9kaWZpZWQsIGJ1dCBubyBwb2x5bGluZXMgd2VyZSBhZGRlZCBvciByZW1vdmVkLlxuICAgIHZhciBwb2x5bGluZXNUb1VwZGF0ZSA9IHRoaXMuX3BvbHlsaW5lc1RvVXBkYXRlO1xuICAgIGlmICh0aGlzLl9tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUzRCkge1xuICAgICAgdmFyIHVwZGF0ZUxlbmd0aCA9IHBvbHlsaW5lc1RvVXBkYXRlLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXBkYXRlTGVuZ3RoOyArK2kpIHtcbiAgICAgICAgcG9seWxpbmUgPSBwb2x5bGluZXNUb1VwZGF0ZVtpXTtcbiAgICAgICAgcG9seWxpbmUudXBkYXRlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaWYgYSBwb2x5bGluZSdzIHBvc2l0aW9ucyBzaXplIGNoYW5nZXMsIHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIHZlcnRleCBhcnJheXMgYW5kIHZlcnRleCBidWZmZXJzIGJlY2F1c2UgdGhlIGluZGljZXMgd2lsbCBiZSBkaWZmZXJlbnQuXG4gICAgLy8gaWYgYSBwb2x5bGluZSdzIG1hdGVyaWFsIGNoYW5nZXMsIHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIFZBT3MgYW5kIFZCT3MgYmVjYXVzZSB0aGV5IHdpbGwgYmUgYmF0Y2hlZCBkaWZmZXJlbnRseS5cbiAgICBpZiAocHJvcGVydGllc1tQT1NJVElPTl9TSVpFX0lOREVYXSB8fCBwcm9wZXJ0aWVzW01BVEVSSUFMX0lOREVYXSkge1xuICAgICAgY3JlYXRlVmVydGV4QXJyYXlzKHRoaXMsIGNvbnRleHQsIHByb2plY3Rpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGVuZ3RoID0gcG9seWxpbmVzVG9VcGRhdGUubGVuZ3RoO1xuICAgICAgdmFyIHBvbHlsaW5lQnVja2V0cyA9IHRoaXMuX3BvbHlsaW5lQnVja2V0cztcbiAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBsZW5ndGg7ICsraWkpIHtcbiAgICAgICAgcG9seWxpbmUgPSBwb2x5bGluZXNUb1VwZGF0ZVtpaV07XG4gICAgICAgIHByb3BlcnRpZXMgPSBwb2x5bGluZS5fcHJvcGVydGllc0NoYW5nZWQ7XG4gICAgICAgIHZhciBidWNrZXQgPSBwb2x5bGluZS5fYnVja2V0O1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICBmb3IgKHZhciB4IGluIHBvbHlsaW5lQnVja2V0cykge1xuICAgICAgICAgIGlmIChwb2x5bGluZUJ1Y2tldHMuaGFzT3duUHJvcGVydHkoeCkpIHtcbiAgICAgICAgICAgIGlmIChwb2x5bGluZUJ1Y2tldHNbeF0gPT09IGJ1Y2tldCkge1xuICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1tQT1NJVElPTl9JTkRFWF0pIHtcbiAgICAgICAgICAgICAgICBidWNrZXQud3JpdGVVcGRhdGUoXG4gICAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICAgIHBvbHlsaW5lLFxuICAgICAgICAgICAgICAgICAgdGhpcy5fcG9zaXRpb25CdWZmZXIsXG4gICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ICs9IHBvbHlsaW5lQnVja2V0c1t4XS5sZW5ndGhPZlBvc2l0aW9ucztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvcGVydGllc1tTSE9XX0lOREVYXSB8fCBwcm9wZXJ0aWVzW1dJRFRIX0lOREVYXSkge1xuICAgICAgICAgIHRoaXMuX2JhdGNoVGFibGUuc2V0QmF0Y2hlZEF0dHJpYnV0ZShcbiAgICAgICAgICAgIHBvbHlsaW5lLl9pbmRleCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBuZXcgQ2FydGVzaWFuMihwb2x5bGluZS5fd2lkdGgsIHBvbHlsaW5lLl9zaG93KVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fYmF0Y2hUYWJsZS5hdHRyaWJ1dGVzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICBpZiAocHJvcGVydGllc1tQT1NJVElPTl9JTkRFWF0gfHwgcHJvcGVydGllc1tQT1NJVElPTl9TSVpFX0lOREVYXSkge1xuICAgICAgICAgICAgdmFyIGJvdW5kaW5nU3BoZXJlID1cbiAgICAgICAgICAgICAgZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRFxuICAgICAgICAgICAgICAgID8gcG9seWxpbmUuX2JvdW5kaW5nVm9sdW1lMkRcbiAgICAgICAgICAgICAgICA6IHBvbHlsaW5lLl9ib3VuZGluZ1ZvbHVtZVdDO1xuICAgICAgICAgICAgdmFyIGVuY29kZWRDZW50ZXIgPSBFbmNvZGVkQ2FydGVzaWFuMy5mcm9tQ2FydGVzaWFuKFxuICAgICAgICAgICAgICBib3VuZGluZ1NwaGVyZS5jZW50ZXIsXG4gICAgICAgICAgICAgIHNjcmF0Y2hVcGRhdGVQb2x5bGluZUVuY29kZWRDYXJ0ZXNpYW5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB2YXIgbG93ID0gQ2FydGVzaWFuNC5mcm9tRWxlbWVudHMoXG4gICAgICAgICAgICAgIGVuY29kZWRDZW50ZXIubG93LngsXG4gICAgICAgICAgICAgIGVuY29kZWRDZW50ZXIubG93LnksXG4gICAgICAgICAgICAgIGVuY29kZWRDZW50ZXIubG93LnosXG4gICAgICAgICAgICAgIGJvdW5kaW5nU3BoZXJlLnJhZGl1cyxcbiAgICAgICAgICAgICAgc2NyYXRjaFVwZGF0ZVBvbHlsaW5lQ2FydGVzaWFuNFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuX2JhdGNoVGFibGUuc2V0QmF0Y2hlZEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgcG9seWxpbmUuX2luZGV4LFxuICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgICBlbmNvZGVkQ2VudGVyLmhpZ2hcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9iYXRjaFRhYmxlLnNldEJhdGNoZWRBdHRyaWJ1dGUocG9seWxpbmUuX2luZGV4LCAzLCBsb3cpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW0RJU1RBTkNFX0RJU1BMQVlfQ09ORElUSU9OXSkge1xuICAgICAgICAgICAgdmFyIG5lYXJGYXJDYXJ0ZXNpYW4gPSBzY3JhdGNoTmVhckZhckNhcnRlc2lhbjI7XG4gICAgICAgICAgICBuZWFyRmFyQ2FydGVzaWFuLnggPSAwLjA7XG4gICAgICAgICAgICBuZWFyRmFyQ2FydGVzaWFuLnkgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuXG4gICAgICAgICAgICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gcG9seWxpbmUuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xuICAgICAgICAgICAgaWYgKGRlZmluZWQoZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKSkge1xuICAgICAgICAgICAgICBuZWFyRmFyQ2FydGVzaWFuLnggPSBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24ubmVhcjtcbiAgICAgICAgICAgICAgbmVhckZhckNhcnRlc2lhbi55ID0gZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmZhcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fYmF0Y2hUYWJsZS5zZXRCYXRjaGVkQXR0cmlidXRlKFxuICAgICAgICAgICAgICBwb2x5bGluZS5faW5kZXgsXG4gICAgICAgICAgICAgIDQsXG4gICAgICAgICAgICAgIG5lYXJGYXJDYXJ0ZXNpYW5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcG9seWxpbmUuX2NsZWFuKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHBvbHlsaW5lc1RvVXBkYXRlLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fcG9seWxpbmVzVXBkYXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHJvcGVydGllcyA9IHRoaXMuX3Byb3BlcnRpZXNDaGFuZ2VkO1xuICBmb3IgKHZhciBrID0gMDsgayA8IE5VTUJFUl9PRl9QUk9QRVJUSUVTOyArK2spIHtcbiAgICBwcm9wZXJ0aWVzW2tdID0gMDtcbiAgfVxuXG4gIHZhciBtb2RlbE1hdHJpeCA9IE1hdHJpeDQuSURFTlRJVFk7XG4gIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgbW9kZWxNYXRyaXggPSB0aGlzLm1vZGVsTWF0cml4O1xuICB9XG5cbiAgdmFyIHBhc3MgPSBmcmFtZVN0YXRlLnBhc3NlcztcbiAgdmFyIHVzZURlcHRoVGVzdCA9IGZyYW1lU3RhdGUubW9ycGhUaW1lICE9PSAwLjA7XG5cbiAgaWYgKFxuICAgICFkZWZpbmVkKHRoaXMuX29wYXF1ZVJTKSB8fFxuICAgIHRoaXMuX29wYXF1ZVJTLmRlcHRoVGVzdC5lbmFibGVkICE9PSB1c2VEZXB0aFRlc3RcbiAgKSB7XG4gICAgdGhpcy5fb3BhcXVlUlMgPSBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUoe1xuICAgICAgZGVwdGhNYXNrOiB1c2VEZXB0aFRlc3QsXG4gICAgICBkZXB0aFRlc3Q6IHtcbiAgICAgICAgZW5hYmxlZDogdXNlRGVwdGhUZXN0LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChcbiAgICAhZGVmaW5lZCh0aGlzLl90cmFuc2x1Y2VudFJTKSB8fFxuICAgIHRoaXMuX3RyYW5zbHVjZW50UlMuZGVwdGhUZXN0LmVuYWJsZWQgIT09IHVzZURlcHRoVGVzdFxuICApIHtcbiAgICB0aGlzLl90cmFuc2x1Y2VudFJTID0gUmVuZGVyU3RhdGUuZnJvbUNhY2hlKHtcbiAgICAgIGJsZW5kaW5nOiBCbGVuZGluZ1N0YXRlLkFMUEhBX0JMRU5ELFxuICAgICAgZGVwdGhNYXNrOiAhdXNlRGVwdGhUZXN0LFxuICAgICAgZGVwdGhUZXN0OiB7XG4gICAgICAgIGVuYWJsZWQ6IHVzZURlcHRoVGVzdCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICB0aGlzLl9iYXRjaFRhYmxlLnVwZGF0ZShmcmFtZVN0YXRlKTtcblxuICBpZiAocGFzcy5yZW5kZXIgfHwgcGFzcy5waWNrKSB7XG4gICAgdmFyIGNvbG9yTGlzdCA9IHRoaXMuX2NvbG9yQ29tbWFuZHM7XG4gICAgY3JlYXRlQ29tbWFuZExpc3RzKHRoaXMsIGZyYW1lU3RhdGUsIGNvbG9yTGlzdCwgbW9kZWxNYXRyaXgpO1xuICB9XG59O1xuXG52YXIgYm91bmRpbmdTcGhlcmVTY3JhdGNoID0gbmV3IEJvdW5kaW5nU3BoZXJlKCk7XG52YXIgYm91bmRpbmdTcGhlcmVTY3JhdGNoMiA9IG5ldyBCb3VuZGluZ1NwaGVyZSgpO1xuXG5mdW5jdGlvbiBjcmVhdGVDb21tYW5kTGlzdHMoXG4gIHBvbHlsaW5lQ29sbGVjdGlvbixcbiAgZnJhbWVTdGF0ZSxcbiAgY29tbWFuZHMsXG4gIG1vZGVsTWF0cml4XG4pIHtcbiAgdmFyIGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XG4gIHZhciBjb21tYW5kTGlzdCA9IGZyYW1lU3RhdGUuY29tbWFuZExpc3Q7XG5cbiAgdmFyIGNvbW1hbmRzTGVuZ3RoID0gY29tbWFuZHMubGVuZ3RoO1xuICB2YXIgY29tbWFuZEluZGV4ID0gMDtcbiAgdmFyIGNsb25lQm91bmRpbmdTcGhlcmUgPSB0cnVlO1xuXG4gIHZhciB2ZXJ0ZXhBcnJheXMgPSBwb2x5bGluZUNvbGxlY3Rpb24uX3ZlcnRleEFycmF5cztcbiAgdmFyIGRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gcG9seWxpbmVDb2xsZWN0aW9uLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lO1xuXG4gIHZhciBiYXRjaFRhYmxlID0gcG9seWxpbmVDb2xsZWN0aW9uLl9iYXRjaFRhYmxlO1xuICB2YXIgdW5pZm9ybUNhbGxiYWNrID0gYmF0Y2hUYWJsZS5nZXRVbmlmb3JtTWFwQ2FsbGJhY2soKTtcblxuICB2YXIgbGVuZ3RoID0gdmVydGV4QXJyYXlzLmxlbmd0aDtcbiAgZm9yICh2YXIgbSA9IDA7IG0gPCBsZW5ndGg7ICsrbSkge1xuICAgIHZhciB2YSA9IHZlcnRleEFycmF5c1ttXTtcbiAgICB2YXIgYnVja2V0cyA9IHZhLmJ1Y2tldHM7XG4gICAgdmFyIGJ1Y2tldExlbmd0aCA9IGJ1Y2tldHMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCBidWNrZXRMZW5ndGg7ICsrbikge1xuICAgICAgdmFyIGJ1Y2tldExvY2F0b3IgPSBidWNrZXRzW25dO1xuXG4gICAgICB2YXIgb2Zmc2V0ID0gYnVja2V0TG9jYXRvci5vZmZzZXQ7XG4gICAgICB2YXIgc3AgPSBidWNrZXRMb2NhdG9yLmJ1Y2tldC5zaGFkZXJQcm9ncmFtO1xuXG4gICAgICB2YXIgcG9seWxpbmVzID0gYnVja2V0TG9jYXRvci5idWNrZXQucG9seWxpbmVzO1xuICAgICAgdmFyIHBvbHlsaW5lTGVuZ3RoID0gcG9seWxpbmVzLmxlbmd0aDtcbiAgICAgIHZhciBjdXJyZW50SWQ7XG4gICAgICB2YXIgY3VycmVudE1hdGVyaWFsO1xuICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgIHZhciBjb21tYW5kO1xuICAgICAgdmFyIHVuaWZvcm1NYXA7XG5cbiAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgcG9seWxpbmVMZW5ndGg7ICsrcykge1xuICAgICAgICB2YXIgcG9seWxpbmUgPSBwb2x5bGluZXNbc107XG4gICAgICAgIHZhciBtSWQgPSBjcmVhdGVNYXRlcmlhbElkKHBvbHlsaW5lLl9tYXRlcmlhbCk7XG4gICAgICAgIGlmIChtSWQgIT09IGN1cnJlbnRJZCkge1xuICAgICAgICAgIGlmIChkZWZpbmVkKGN1cnJlbnRJZCkgJiYgY291bnQgPiAwKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNsdWNlbnQgPSBjdXJyZW50TWF0ZXJpYWwuaXNUcmFuc2x1Y2VudCgpO1xuXG4gICAgICAgICAgICBpZiAoY29tbWFuZEluZGV4ID49IGNvbW1hbmRzTGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbW1hbmQgPSBuZXcgRHJhd0NvbW1hbmQoe1xuICAgICAgICAgICAgICAgIG93bmVyOiBwb2x5bGluZUNvbGxlY3Rpb24sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjb21tYW5kcy5wdXNoKGNvbW1hbmQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29tbWFuZCA9IGNvbW1hbmRzW2NvbW1hbmRJbmRleF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICsrY29tbWFuZEluZGV4O1xuXG4gICAgICAgICAgICB1bmlmb3JtTWFwID0gY29tYmluZShcbiAgICAgICAgICAgICAgdW5pZm9ybUNhbGxiYWNrKGN1cnJlbnRNYXRlcmlhbC5fdW5pZm9ybXMpLFxuICAgICAgICAgICAgICBwb2x5bGluZUNvbGxlY3Rpb24uX3VuaWZvcm1NYXBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbW1hbmQuYm91bmRpbmdWb2x1bWUgPSBCb3VuZGluZ1NwaGVyZS5jbG9uZShcbiAgICAgICAgICAgICAgYm91bmRpbmdTcGhlcmVTY3JhdGNoLFxuICAgICAgICAgICAgICBjb21tYW5kLmJvdW5kaW5nVm9sdW1lXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29tbWFuZC5tb2RlbE1hdHJpeCA9IG1vZGVsTWF0cml4O1xuICAgICAgICAgICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID0gc3A7XG4gICAgICAgICAgICBjb21tYW5kLnZlcnRleEFycmF5ID0gdmEudmE7XG4gICAgICAgICAgICBjb21tYW5kLnJlbmRlclN0YXRlID0gdHJhbnNsdWNlbnRcbiAgICAgICAgICAgICAgPyBwb2x5bGluZUNvbGxlY3Rpb24uX3RyYW5zbHVjZW50UlNcbiAgICAgICAgICAgICAgOiBwb2x5bGluZUNvbGxlY3Rpb24uX29wYXF1ZVJTO1xuICAgICAgICAgICAgY29tbWFuZC5wYXNzID0gdHJhbnNsdWNlbnQgPyBQYXNzLlRSQU5TTFVDRU5UIDogUGFzcy5PUEFRVUU7XG4gICAgICAgICAgICBjb21tYW5kLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XG4gICAgICAgICAgICBjb21tYW5kLnBpY2tJZCA9IFwidl9waWNrQ29sb3JcIjtcblxuICAgICAgICAgICAgY29tbWFuZC51bmlmb3JtTWFwID0gdW5pZm9ybU1hcDtcbiAgICAgICAgICAgIGNvbW1hbmQuY291bnQgPSBjb3VudDtcbiAgICAgICAgICAgIGNvbW1hbmQub2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgICAgICAgICBvZmZzZXQgKz0gY291bnQ7XG4gICAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgICAgICBjbG9uZUJvdW5kaW5nU3BoZXJlID0gdHJ1ZTtcblxuICAgICAgICAgICAgY29tbWFuZExpc3QucHVzaChjb21tYW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyZW50TWF0ZXJpYWwgPSBwb2x5bGluZS5fbWF0ZXJpYWw7XG4gICAgICAgICAgY3VycmVudE1hdGVyaWFsLnVwZGF0ZShjb250ZXh0KTtcbiAgICAgICAgICBjdXJyZW50SWQgPSBtSWQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbG9jYXRvcnMgPSBwb2x5bGluZS5fbG9jYXRvckJ1Y2tldHM7XG4gICAgICAgIHZhciBsb2NhdG9yTGVuZ3RoID0gbG9jYXRvcnMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGxvY2F0b3JMZW5ndGg7ICsrdCkge1xuICAgICAgICAgIHZhciBsb2NhdG9yID0gbG9jYXRvcnNbdF07XG4gICAgICAgICAgaWYgKGxvY2F0b3IubG9jYXRvciA9PT0gYnVja2V0TG9jYXRvcikge1xuICAgICAgICAgICAgY291bnQgKz0gbG9jYXRvci5jb3VudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYm91bmRpbmdWb2x1bWU7XG4gICAgICAgIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgICAgICAgYm91bmRpbmdWb2x1bWUgPSBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWVXQztcbiAgICAgICAgfSBlbHNlIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5DT0xVTUJVU19WSUVXKSB7XG4gICAgICAgICAgYm91bmRpbmdWb2x1bWUgPSBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWUyRDtcbiAgICAgICAgfSBlbHNlIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgICAgICAgaWYgKGRlZmluZWQocG9seWxpbmUuX2JvdW5kaW5nVm9sdW1lMkQpKSB7XG4gICAgICAgICAgICBib3VuZGluZ1ZvbHVtZSA9IEJvdW5kaW5nU3BoZXJlLmNsb25lKFxuICAgICAgICAgICAgICBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWUyRCxcbiAgICAgICAgICAgICAgYm91bmRpbmdTcGhlcmVTY3JhdGNoMlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJvdW5kaW5nVm9sdW1lLmNlbnRlci54ID0gMC4wO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBkZWZpbmVkKHBvbHlsaW5lLl9ib3VuZGluZ1ZvbHVtZVdDKSAmJlxuICAgICAgICAgIGRlZmluZWQocG9seWxpbmUuX2JvdW5kaW5nVm9sdW1lMkQpXG4gICAgICAgICkge1xuICAgICAgICAgIGJvdW5kaW5nVm9sdW1lID0gQm91bmRpbmdTcGhlcmUudW5pb24oXG4gICAgICAgICAgICBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWVXQyxcbiAgICAgICAgICAgIHBvbHlsaW5lLl9ib3VuZGluZ1ZvbHVtZTJELFxuICAgICAgICAgICAgYm91bmRpbmdTcGhlcmVTY3JhdGNoMlxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2xvbmVCb3VuZGluZ1NwaGVyZSkge1xuICAgICAgICAgIGNsb25lQm91bmRpbmdTcGhlcmUgPSBmYWxzZTtcbiAgICAgICAgICBCb3VuZGluZ1NwaGVyZS5jbG9uZShib3VuZGluZ1ZvbHVtZSwgYm91bmRpbmdTcGhlcmVTY3JhdGNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBCb3VuZGluZ1NwaGVyZS51bmlvbihcbiAgICAgICAgICAgIGJvdW5kaW5nVm9sdW1lLFxuICAgICAgICAgICAgYm91bmRpbmdTcGhlcmVTY3JhdGNoLFxuICAgICAgICAgICAgYm91bmRpbmdTcGhlcmVTY3JhdGNoXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGVmaW5lZChjdXJyZW50SWQpICYmIGNvdW50ID4gMCkge1xuICAgICAgICBpZiAoY29tbWFuZEluZGV4ID49IGNvbW1hbmRzTGVuZ3RoKSB7XG4gICAgICAgICAgY29tbWFuZCA9IG5ldyBEcmF3Q29tbWFuZCh7XG4gICAgICAgICAgICBvd25lcjogcG9seWxpbmVDb2xsZWN0aW9uLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbW1hbmRzLnB1c2goY29tbWFuZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29tbWFuZCA9IGNvbW1hbmRzW2NvbW1hbmRJbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICArK2NvbW1hbmRJbmRleDtcblxuICAgICAgICB1bmlmb3JtTWFwID0gY29tYmluZShcbiAgICAgICAgICB1bmlmb3JtQ2FsbGJhY2soY3VycmVudE1hdGVyaWFsLl91bmlmb3JtcyksXG4gICAgICAgICAgcG9seWxpbmVDb2xsZWN0aW9uLl91bmlmb3JtTWFwXG4gICAgICAgICk7XG5cbiAgICAgICAgY29tbWFuZC5ib3VuZGluZ1ZvbHVtZSA9IEJvdW5kaW5nU3BoZXJlLmNsb25lKFxuICAgICAgICAgIGJvdW5kaW5nU3BoZXJlU2NyYXRjaCxcbiAgICAgICAgICBjb21tYW5kLmJvdW5kaW5nVm9sdW1lXG4gICAgICAgICk7XG4gICAgICAgIGNvbW1hbmQubW9kZWxNYXRyaXggPSBtb2RlbE1hdHJpeDtcbiAgICAgICAgY29tbWFuZC5zaGFkZXJQcm9ncmFtID0gc3A7XG4gICAgICAgIGNvbW1hbmQudmVydGV4QXJyYXkgPSB2YS52YTtcbiAgICAgICAgY29tbWFuZC5yZW5kZXJTdGF0ZSA9IGN1cnJlbnRNYXRlcmlhbC5pc1RyYW5zbHVjZW50KClcbiAgICAgICAgICA/IHBvbHlsaW5lQ29sbGVjdGlvbi5fdHJhbnNsdWNlbnRSU1xuICAgICAgICAgIDogcG9seWxpbmVDb2xsZWN0aW9uLl9vcGFxdWVSUztcbiAgICAgICAgY29tbWFuZC5wYXNzID0gY3VycmVudE1hdGVyaWFsLmlzVHJhbnNsdWNlbnQoKVxuICAgICAgICAgID8gUGFzcy5UUkFOU0xVQ0VOVFxuICAgICAgICAgIDogUGFzcy5PUEFRVUU7XG4gICAgICAgIGNvbW1hbmQuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZTtcbiAgICAgICAgY29tbWFuZC5waWNrSWQgPSBcInZfcGlja0NvbG9yXCI7XG5cbiAgICAgICAgY29tbWFuZC51bmlmb3JtTWFwID0gdW5pZm9ybU1hcDtcbiAgICAgICAgY29tbWFuZC5jb3VudCA9IGNvdW50O1xuICAgICAgICBjb21tYW5kLm9mZnNldCA9IG9mZnNldDtcblxuICAgICAgICBjbG9uZUJvdW5kaW5nU3BoZXJlID0gdHJ1ZTtcblxuICAgICAgICBjb21tYW5kTGlzdC5wdXNoKGNvbW1hbmQpO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50SWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgY29tbWFuZHMubGVuZ3RoID0gY29tbWFuZEluZGV4O1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICogPGJyIC8+PGJyIC8+XG4gKiBJZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIDxjb2RlPmZhbHNlPC9jb2RlPi5cbiAqXG4gKiBAc2VlIFBvbHlsaW5lQ29sbGVjdGlvbiNkZXN0cm95XG4gKi9cblBvbHlsaW5lQ29sbGVjdGlvbi5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIFdlYkdMIHJlc291cmNlcyBoZWxkIGJ5IHRoaXMgb2JqZWN0LiAgRGVzdHJveWluZyBhbiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljXG4gKiByZWxlYXNlIG9mIFdlYkdMIHJlc291cmNlcywgaW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0byBkZXN0cm95IHRoaXMgb2JqZWN0LlxuICogPGJyIC8+PGJyIC8+XG4gKiBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uICBUaGVyZWZvcmUsXG4gKiBhc3NpZ24gdGhlIHJldHVybiB2YWx1ZSAoPGNvZGU+dW5kZWZpbmVkPC9jb2RlPikgdG8gdGhlIG9iamVjdCBhcyBkb25lIGluIHRoZSBleGFtcGxlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIHBvbHlsaW5lcyA9IHBvbHlsaW5lcyAmJiBwb2x5bGluZXMuZGVzdHJveSgpO1xuICpcbiAqIEBzZWUgUG9seWxpbmVDb2xsZWN0aW9uI2lzRGVzdHJveWVkXG4gKi9cblBvbHlsaW5lQ29sbGVjdGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgZGVzdHJveVZlcnRleEFycmF5cyh0aGlzKTtcbiAgcmVsZWFzZVNoYWRlcnModGhpcyk7XG4gIGRlc3Ryb3lQb2x5bGluZXModGhpcyk7XG4gIHRoaXMuX2JhdGNoVGFibGUgPSB0aGlzLl9iYXRjaFRhYmxlICYmIHRoaXMuX2JhdGNoVGFibGUuZGVzdHJveSgpO1xuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG5cbmZ1bmN0aW9uIGNvbXB1dGVOZXdCdWZmZXJzVXNhZ2UoY29sbGVjdGlvbikge1xuICB2YXIgdXNhZ2VDaGFuZ2VkID0gZmFsc2U7XG4gIHZhciBwcm9wZXJ0aWVzID0gY29sbGVjdGlvbi5fcHJvcGVydGllc0NoYW5nZWQ7XG4gIHZhciBidWZmZXJVc2FnZSA9IGNvbGxlY3Rpb24uX3Bvc2l0aW9uQnVmZmVyVXNhZ2U7XG4gIGlmIChwcm9wZXJ0aWVzW1BPU0lUSU9OX0lOREVYXSkge1xuICAgIGlmIChidWZmZXJVc2FnZS5idWZmZXJVc2FnZSAhPT0gQnVmZmVyVXNhZ2UuU1RSRUFNX0RSQVcpIHtcbiAgICAgIHVzYWdlQ2hhbmdlZCA9IHRydWU7XG4gICAgICBidWZmZXJVc2FnZS5idWZmZXJVc2FnZSA9IEJ1ZmZlclVzYWdlLlNUUkVBTV9EUkFXO1xuICAgICAgYnVmZmVyVXNhZ2UuZnJhbWVDb3VudCA9IDEwMDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyVXNhZ2UuZnJhbWVDb3VudCA9IDEwMDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYnVmZmVyVXNhZ2UuYnVmZmVyVXNhZ2UgIT09IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXKSB7XG4gICAgaWYgKGJ1ZmZlclVzYWdlLmZyYW1lQ291bnQgPT09IDApIHtcbiAgICAgIHVzYWdlQ2hhbmdlZCA9IHRydWU7XG4gICAgICBidWZmZXJVc2FnZS5idWZmZXJVc2FnZSA9IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXO1xuICAgIH0gZWxzZSB7XG4gICAgICBidWZmZXJVc2FnZS5mcmFtZUNvdW50LS07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVzYWdlQ2hhbmdlZDtcbn1cblxudmFyIGVtcHR5VmVydGV4QnVmZmVyID0gWzAuMCwgMC4wLCAwLjBdO1xuXG5mdW5jdGlvbiBjcmVhdGVWZXJ0ZXhBcnJheXMoY29sbGVjdGlvbiwgY29udGV4dCwgcHJvamVjdGlvbikge1xuICBjb2xsZWN0aW9uLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IGZhbHNlO1xuICByZWxlYXNlU2hhZGVycyhjb2xsZWN0aW9uKTtcbiAgZGVzdHJveVZlcnRleEFycmF5cyhjb2xsZWN0aW9uKTtcbiAgc29ydFBvbHlsaW5lc0ludG9CdWNrZXRzKGNvbGxlY3Rpb24pO1xuXG4gIC8vc3RvcmVzIGFsbCBvZiB0aGUgaW5kaXZpZHVhbCBpbmRpY2VzIGFycmF5cy5cbiAgdmFyIHRvdGFsSW5kaWNlcyA9IFtbXV07XG4gIHZhciBpbmRpY2VzID0gdG90YWxJbmRpY2VzWzBdO1xuXG4gIHZhciBiYXRjaFRhYmxlID0gY29sbGVjdGlvbi5fYmF0Y2hUYWJsZTtcbiAgdmFyIHVzZUhpZ2hsaWdodENvbG9yID0gY29sbGVjdGlvbi5fdXNlSGlnaGxpZ2h0Q29sb3I7XG5cbiAgLy91c2VkIHRvIGRldGVybWluZSB0aGUgdmVydGV4QnVmZmVyIG9mZnNldCBpZiB0aGUgaW5kaWNlc0FycmF5IGdvZXMgb3ZlciA2NGsuXG4gIC8vaWYgaXQncyB0aGUgc2FtZSBwb2x5bGluZSB3aGlsZSBpdCBnb2VzIG92ZXIgNjRrLCB0aGUgb2Zmc2V0IG5lZWRzIHRvIGJhY2t0cmFjayBjb21wb25lbnRzUGVyQXR0cmlidXRlICogY29tcG9uZW50RGF0YXR5cGUgYnl0ZXNcbiAgLy9zbyB0aGF0IHRoZSBwb2x5bGluZSBsb29rcyBjb250aWd1b3VzLlxuICAvL2lmIHRoZSBwb2x5bGluZSBlbmRzIGF0IHRoZSA2NGsgbWFyaywgdGhlbiB0aGUgb2Zmc2V0IGlzIGp1c3QgNjRrICogY29tcG9uZW50c1BlckF0dHJpYnV0ZSAqIGNvbXBvbmVudERhdGF0eXBlXG4gIHZhciB2ZXJ0ZXhCdWZmZXJPZmZzZXQgPSBbMF07XG4gIHZhciBvZmZzZXQgPSAwO1xuICB2YXIgdmVydGV4QXJyYXlCdWNrZXRzID0gW1tdXTtcbiAgdmFyIHRvdGFsTGVuZ3RoID0gMDtcbiAgdmFyIHBvbHlsaW5lQnVja2V0cyA9IGNvbGxlY3Rpb24uX3BvbHlsaW5lQnVja2V0cztcbiAgdmFyIHg7XG4gIHZhciBidWNrZXQ7XG4gIGZvciAoeCBpbiBwb2x5bGluZUJ1Y2tldHMpIHtcbiAgICBpZiAocG9seWxpbmVCdWNrZXRzLmhhc093blByb3BlcnR5KHgpKSB7XG4gICAgICBidWNrZXQgPSBwb2x5bGluZUJ1Y2tldHNbeF07XG4gICAgICBidWNrZXQudXBkYXRlU2hhZGVyKGNvbnRleHQsIGJhdGNoVGFibGUsIHVzZUhpZ2hsaWdodENvbG9yKTtcbiAgICAgIHRvdGFsTGVuZ3RoICs9IGJ1Y2tldC5sZW5ndGhPZlBvc2l0aW9ucztcbiAgICB9XG4gIH1cblxuICBpZiAodG90YWxMZW5ndGggPiAwKSB7XG4gICAgdmFyIG1vZGUgPSBjb2xsZWN0aW9uLl9tb2RlO1xuXG4gICAgdmFyIHBvc2l0aW9uQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDYgKiB0b3RhbExlbmd0aCAqIDMpO1xuICAgIHZhciB0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkodG90YWxMZW5ndGggKiA0KTtcbiAgICB2YXIgcG9zaXRpb24zREFycmF5O1xuXG4gICAgdmFyIHBvc2l0aW9uSW5kZXggPSAwO1xuICAgIHZhciBjb2xvckluZGV4ID0gMDtcbiAgICB2YXIgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4SW5kZXggPSAwO1xuICAgIGZvciAoeCBpbiBwb2x5bGluZUJ1Y2tldHMpIHtcbiAgICAgIGlmIChwb2x5bGluZUJ1Y2tldHMuaGFzT3duUHJvcGVydHkoeCkpIHtcbiAgICAgICAgYnVja2V0ID0gcG9seWxpbmVCdWNrZXRzW3hdO1xuICAgICAgICBidWNrZXQud3JpdGUoXG4gICAgICAgICAgcG9zaXRpb25BcnJheSxcbiAgICAgICAgICB0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhBcnJheSxcbiAgICAgICAgICBwb3NpdGlvbkluZGV4LFxuICAgICAgICAgIGNvbG9ySW5kZXgsXG4gICAgICAgICAgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4SW5kZXgsXG4gICAgICAgICAgYmF0Y2hUYWJsZSxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIHByb2plY3Rpb25cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgICAgICAgaWYgKCFkZWZpbmVkKHBvc2l0aW9uM0RBcnJheSkpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uM0RBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoNiAqIHRvdGFsTGVuZ3RoICogMyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJ1Y2tldC53cml0ZUZvck1vcnBoKHBvc2l0aW9uM0RBcnJheSwgcG9zaXRpb25JbmRleCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYnVja2V0TGVuZ3RoID0gYnVja2V0Lmxlbmd0aE9mUG9zaXRpb25zO1xuICAgICAgICBwb3NpdGlvbkluZGV4ICs9IDYgKiBidWNrZXRMZW5ndGggKiAzO1xuICAgICAgICBjb2xvckluZGV4ICs9IGJ1Y2tldExlbmd0aCAqIDQ7XG4gICAgICAgIHRleENvb3JkRXhwYW5kQW5kQmF0Y2hJbmRleEluZGV4ICs9IGJ1Y2tldExlbmd0aCAqIDQ7XG4gICAgICAgIG9mZnNldCA9IGJ1Y2tldC51cGRhdGVJbmRpY2VzKFxuICAgICAgICAgIHRvdGFsSW5kaWNlcyxcbiAgICAgICAgICB2ZXJ0ZXhCdWZmZXJPZmZzZXQsXG4gICAgICAgICAgdmVydGV4QXJyYXlCdWNrZXRzLFxuICAgICAgICAgIG9mZnNldFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwb3NpdGlvbkJ1ZmZlclVzYWdlID0gY29sbGVjdGlvbi5fcG9zaXRpb25CdWZmZXJVc2FnZS5idWZmZXJVc2FnZTtcbiAgICB2YXIgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4QnVmZmVyVXNhZ2UgPSBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVztcblxuICAgIGNvbGxlY3Rpb24uX3Bvc2l0aW9uQnVmZmVyID0gQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdHlwZWRBcnJheTogcG9zaXRpb25BcnJheSxcbiAgICAgIHVzYWdlOiBwb3NpdGlvbkJ1ZmZlclVzYWdlLFxuICAgIH0pO1xuICAgIHZhciBwb3NpdGlvbjNEQnVmZmVyO1xuICAgIGlmIChkZWZpbmVkKHBvc2l0aW9uM0RBcnJheSkpIHtcbiAgICAgIHBvc2l0aW9uM0RCdWZmZXIgPSBCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKHtcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgdHlwZWRBcnJheTogcG9zaXRpb24zREFycmF5LFxuICAgICAgICB1c2FnZTogcG9zaXRpb25CdWZmZXJVc2FnZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb2xsZWN0aW9uLl90ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhCdWZmZXIgPSBCdWZmZXIuY3JlYXRlVmVydGV4QnVmZmVyKHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICB0eXBlZEFycmF5OiB0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhBcnJheSxcbiAgICAgIHVzYWdlOiB0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhCdWZmZXJVc2FnZSxcbiAgICB9KTtcblxuICAgIHZhciBwb3NpdGlvblNpemVJbkJ5dGVzID0gMyAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICB2YXIgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4U2l6ZUluQnl0ZXMgPVxuICAgICAgNCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcblxuICAgIHZhciB2Ym8gPSAwO1xuICAgIHZhciBudW1iZXJPZkluZGljZXNBcnJheXMgPSB0b3RhbEluZGljZXMubGVuZ3RoO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbnVtYmVyT2ZJbmRpY2VzQXJyYXlzOyArK2spIHtcbiAgICAgIGluZGljZXMgPSB0b3RhbEluZGljZXNba107XG5cbiAgICAgIGlmIChpbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGluZGljZXNBcnJheSA9IG5ldyBVaW50MTZBcnJheShpbmRpY2VzKTtcbiAgICAgICAgdmFyIGluZGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZUluZGV4QnVmZmVyKHtcbiAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgIHR5cGVkQXJyYXk6IGluZGljZXNBcnJheSxcbiAgICAgICAgICB1c2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXG4gICAgICAgICAgaW5kZXhEYXRhdHlwZTogSW5kZXhEYXRhdHlwZS5VTlNJR05FRF9TSE9SVCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmJvICs9IHZlcnRleEJ1ZmZlck9mZnNldFtrXTtcblxuICAgICAgICB2YXIgcG9zaXRpb25IaWdoT2Zmc2V0ID1cbiAgICAgICAgICA2ICpcbiAgICAgICAgICAoayAqIChwb3NpdGlvblNpemVJbkJ5dGVzICogQ2VzaXVtTWF0aC5TSVhUWV9GT1VSX0tJTE9CWVRFUykgLVxuICAgICAgICAgICAgdmJvICogcG9zaXRpb25TaXplSW5CeXRlcyk7IC8vY29tcG9uZW50c1BlckF0dHJpYnV0ZSgzKSAqIGNvbXBvbmVudERhdGF0eXBlKDQpXG4gICAgICAgIHZhciBwb3NpdGlvbkxvd09mZnNldCA9IHBvc2l0aW9uU2l6ZUluQnl0ZXMgKyBwb3NpdGlvbkhpZ2hPZmZzZXQ7XG4gICAgICAgIHZhciBwcmV2UG9zaXRpb25IaWdoT2Zmc2V0ID0gcG9zaXRpb25TaXplSW5CeXRlcyArIHBvc2l0aW9uTG93T2Zmc2V0O1xuICAgICAgICB2YXIgcHJldlBvc2l0aW9uTG93T2Zmc2V0ID1cbiAgICAgICAgICBwb3NpdGlvblNpemVJbkJ5dGVzICsgcHJldlBvc2l0aW9uSGlnaE9mZnNldDtcbiAgICAgICAgdmFyIG5leHRQb3NpdGlvbkhpZ2hPZmZzZXQgPVxuICAgICAgICAgIHBvc2l0aW9uU2l6ZUluQnl0ZXMgKyBwcmV2UG9zaXRpb25Mb3dPZmZzZXQ7XG4gICAgICAgIHZhciBuZXh0UG9zaXRpb25Mb3dPZmZzZXQgPVxuICAgICAgICAgIHBvc2l0aW9uU2l6ZUluQnl0ZXMgKyBuZXh0UG9zaXRpb25IaWdoT2Zmc2V0O1xuICAgICAgICB2YXIgdmVydGV4VGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4QnVmZmVyT2Zmc2V0ID1cbiAgICAgICAgICBrICpcbiAgICAgICAgICAgICh0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhTaXplSW5CeXRlcyAqXG4gICAgICAgICAgICAgIENlc2l1bU1hdGguU0lYVFlfRk9VUl9LSUxPQllURVMpIC1cbiAgICAgICAgICB2Ym8gKiB0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhTaXplSW5CeXRlcztcblxuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uM0RIaWdoLFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgICAgIG9mZnNldEluQnl0ZXM6IHBvc2l0aW9uSGlnaE9mZnNldCxcbiAgICAgICAgICAgIHN0cmlkZUluQnl0ZXM6IDYgKiBwb3NpdGlvblNpemVJbkJ5dGVzLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5wb3NpdGlvbjNETG93LFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgICAgIG9mZnNldEluQnl0ZXM6IHBvc2l0aW9uTG93T2Zmc2V0LFxuICAgICAgICAgICAgc3RyaWRlSW5CeXRlczogNiAqIHBvc2l0aW9uU2l6ZUluQnl0ZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uMkRIaWdoLFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgICAgIG9mZnNldEluQnl0ZXM6IHBvc2l0aW9uSGlnaE9mZnNldCxcbiAgICAgICAgICAgIHN0cmlkZUluQnl0ZXM6IDYgKiBwb3NpdGlvblNpemVJbkJ5dGVzLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5wb3NpdGlvbjJETG93LFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgICAgIG9mZnNldEluQnl0ZXM6IHBvc2l0aW9uTG93T2Zmc2V0LFxuICAgICAgICAgICAgc3RyaWRlSW5CeXRlczogNiAqIHBvc2l0aW9uU2l6ZUluQnl0ZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnByZXZQb3NpdGlvbjNESGlnaCxcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgICAgICBvZmZzZXRJbkJ5dGVzOiBwcmV2UG9zaXRpb25IaWdoT2Zmc2V0LFxuICAgICAgICAgICAgc3RyaWRlSW5CeXRlczogNiAqIHBvc2l0aW9uU2l6ZUluQnl0ZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnByZXZQb3NpdGlvbjNETG93LFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgICAgIG9mZnNldEluQnl0ZXM6IHByZXZQb3NpdGlvbkxvd09mZnNldCxcbiAgICAgICAgICAgIHN0cmlkZUluQnl0ZXM6IDYgKiBwb3NpdGlvblNpemVJbkJ5dGVzLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5wcmV2UG9zaXRpb24yREhpZ2gsXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAzLFxuICAgICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgICAgICAgb2Zmc2V0SW5CeXRlczogcHJldlBvc2l0aW9uSGlnaE9mZnNldCxcbiAgICAgICAgICAgIHN0cmlkZUluQnl0ZXM6IDYgKiBwb3NpdGlvblNpemVJbkJ5dGVzLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5wcmV2UG9zaXRpb24yRExvdyxcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgICAgICBvZmZzZXRJbkJ5dGVzOiBwcmV2UG9zaXRpb25Mb3dPZmZzZXQsXG4gICAgICAgICAgICBzdHJpZGVJbkJ5dGVzOiA2ICogcG9zaXRpb25TaXplSW5CeXRlcyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMubmV4dFBvc2l0aW9uM0RIaWdoLFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgICAgIG9mZnNldEluQnl0ZXM6IG5leHRQb3NpdGlvbkhpZ2hPZmZzZXQsXG4gICAgICAgICAgICBzdHJpZGVJbkJ5dGVzOiA2ICogcG9zaXRpb25TaXplSW5CeXRlcyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMubmV4dFBvc2l0aW9uM0RMb3csXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAzLFxuICAgICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgICAgICAgb2Zmc2V0SW5CeXRlczogbmV4dFBvc2l0aW9uTG93T2Zmc2V0LFxuICAgICAgICAgICAgc3RyaWRlSW5CeXRlczogNiAqIHBvc2l0aW9uU2l6ZUluQnl0ZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLm5leHRQb3NpdGlvbjJESGlnaCxcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDMsXG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXG4gICAgICAgICAgICBvZmZzZXRJbkJ5dGVzOiBuZXh0UG9zaXRpb25IaWdoT2Zmc2V0LFxuICAgICAgICAgICAgc3RyaWRlSW5CeXRlczogNiAqIHBvc2l0aW9uU2l6ZUluQnl0ZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLm5leHRQb3NpdGlvbjJETG93LFxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMyxcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcbiAgICAgICAgICAgIG9mZnNldEluQnl0ZXM6IG5leHRQb3NpdGlvbkxvd09mZnNldCxcbiAgICAgICAgICAgIHN0cmlkZUluQnl0ZXM6IDYgKiBwb3NpdGlvblNpemVJbkJ5dGVzLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy50ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXgsXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxuICAgICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxuICAgICAgICAgICAgdmVydGV4QnVmZmVyOiBjb2xsZWN0aW9uLl90ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhCdWZmZXIsXG4gICAgICAgICAgICBvZmZzZXRJbkJ5dGVzOiB2ZXJ0ZXhUZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhCdWZmZXJPZmZzZXQsXG4gICAgICAgICAgfSxcbiAgICAgICAgXTtcblxuICAgICAgICB2YXIgYnVmZmVyM0Q7XG4gICAgICAgIHZhciBidWZmZXJQcm9wZXJ0eTNEO1xuICAgICAgICB2YXIgYnVmZmVyMkQ7XG4gICAgICAgIHZhciBidWZmZXJQcm9wZXJ0eTJEO1xuXG4gICAgICAgIGlmIChtb2RlID09PSBTY2VuZU1vZGUuU0NFTkUzRCkge1xuICAgICAgICAgIGJ1ZmZlcjNEID0gY29sbGVjdGlvbi5fcG9zaXRpb25CdWZmZXI7XG4gICAgICAgICAgYnVmZmVyUHJvcGVydHkzRCA9IFwidmVydGV4QnVmZmVyXCI7XG4gICAgICAgICAgYnVmZmVyMkQgPSBlbXB0eVZlcnRleEJ1ZmZlcjtcbiAgICAgICAgICBidWZmZXJQcm9wZXJ0eTJEID0gXCJ2YWx1ZVwiO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEIHx8XG4gICAgICAgICAgbW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVdcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnVmZmVyM0QgPSBlbXB0eVZlcnRleEJ1ZmZlcjtcbiAgICAgICAgICBidWZmZXJQcm9wZXJ0eTNEID0gXCJ2YWx1ZVwiO1xuICAgICAgICAgIGJ1ZmZlcjJEID0gY29sbGVjdGlvbi5fcG9zaXRpb25CdWZmZXI7XG4gICAgICAgICAgYnVmZmVyUHJvcGVydHkyRCA9IFwidmVydGV4QnVmZmVyXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZmVyM0QgPSBwb3NpdGlvbjNEQnVmZmVyO1xuICAgICAgICAgIGJ1ZmZlclByb3BlcnR5M0QgPSBcInZlcnRleEJ1ZmZlclwiO1xuICAgICAgICAgIGJ1ZmZlcjJEID0gY29sbGVjdGlvbi5fcG9zaXRpb25CdWZmZXI7XG4gICAgICAgICAgYnVmZmVyUHJvcGVydHkyRCA9IFwidmVydGV4QnVmZmVyXCI7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVzWzBdW2J1ZmZlclByb3BlcnR5M0RdID0gYnVmZmVyM0Q7XG4gICAgICAgIGF0dHJpYnV0ZXNbMV1bYnVmZmVyUHJvcGVydHkzRF0gPSBidWZmZXIzRDtcbiAgICAgICAgYXR0cmlidXRlc1syXVtidWZmZXJQcm9wZXJ0eTJEXSA9IGJ1ZmZlcjJEO1xuICAgICAgICBhdHRyaWJ1dGVzWzNdW2J1ZmZlclByb3BlcnR5MkRdID0gYnVmZmVyMkQ7XG4gICAgICAgIGF0dHJpYnV0ZXNbNF1bYnVmZmVyUHJvcGVydHkzRF0gPSBidWZmZXIzRDtcbiAgICAgICAgYXR0cmlidXRlc1s1XVtidWZmZXJQcm9wZXJ0eTNEXSA9IGJ1ZmZlcjNEO1xuICAgICAgICBhdHRyaWJ1dGVzWzZdW2J1ZmZlclByb3BlcnR5MkRdID0gYnVmZmVyMkQ7XG4gICAgICAgIGF0dHJpYnV0ZXNbN11bYnVmZmVyUHJvcGVydHkyRF0gPSBidWZmZXIyRDtcbiAgICAgICAgYXR0cmlidXRlc1s4XVtidWZmZXJQcm9wZXJ0eTNEXSA9IGJ1ZmZlcjNEO1xuICAgICAgICBhdHRyaWJ1dGVzWzldW2J1ZmZlclByb3BlcnR5M0RdID0gYnVmZmVyM0Q7XG4gICAgICAgIGF0dHJpYnV0ZXNbMTBdW2J1ZmZlclByb3BlcnR5MkRdID0gYnVmZmVyMkQ7XG4gICAgICAgIGF0dHJpYnV0ZXNbMTFdW2J1ZmZlclByb3BlcnR5MkRdID0gYnVmZmVyMkQ7XG5cbiAgICAgICAgdmFyIHZhID0gbmV3IFZlcnRleEFycmF5KHtcbiAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgICAgaW5kZXhCdWZmZXI6IGluZGV4QnVmZmVyLFxuICAgICAgICB9KTtcbiAgICAgICAgY29sbGVjdGlvbi5fdmVydGV4QXJyYXlzLnB1c2goe1xuICAgICAgICAgIHZhOiB2YSxcbiAgICAgICAgICBidWNrZXRzOiB2ZXJ0ZXhBcnJheUJ1Y2tldHNba10sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXBsYWNlcihrZXksIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRleHR1cmUpIHtcbiAgICByZXR1cm4gdmFsdWUuaWQ7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbnZhciBzY3JhdGNoVW5pZm9ybUFycmF5ID0gW107XG5mdW5jdGlvbiBjcmVhdGVNYXRlcmlhbElkKG1hdGVyaWFsKSB7XG4gIHZhciB1bmlmb3JtcyA9IE1hdGVyaWFsLl91bmlmb3JtTGlzdFttYXRlcmlhbC50eXBlXTtcbiAgdmFyIGxlbmd0aCA9IHVuaWZvcm1zLmxlbmd0aDtcbiAgc2NyYXRjaFVuaWZvcm1BcnJheS5sZW5ndGggPSAyLjAgKiBsZW5ndGg7XG5cbiAgdmFyIGluZGV4ID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciB1bmlmb3JtID0gdW5pZm9ybXNbaV07XG4gICAgc2NyYXRjaFVuaWZvcm1BcnJheVtpbmRleF0gPSB1bmlmb3JtO1xuICAgIHNjcmF0Y2hVbmlmb3JtQXJyYXlbaW5kZXggKyAxXSA9IG1hdGVyaWFsLl91bmlmb3Jtc1t1bmlmb3JtXSgpO1xuICAgIGluZGV4ICs9IDI7XG4gIH1cblxuICByZXR1cm4gbWF0ZXJpYWwudHlwZSArIFwiOlwiICsgSlNPTi5zdHJpbmdpZnkoc2NyYXRjaFVuaWZvcm1BcnJheSwgcmVwbGFjZXIpO1xufVxuXG5mdW5jdGlvbiBzb3J0UG9seWxpbmVzSW50b0J1Y2tldHMoY29sbGVjdGlvbikge1xuICB2YXIgbW9kZSA9IGNvbGxlY3Rpb24uX21vZGU7XG4gIHZhciBtb2RlbE1hdHJpeCA9IGNvbGxlY3Rpb24uX21vZGVsTWF0cml4O1xuXG4gIHZhciBwb2x5bGluZUJ1Y2tldHMgPSAoY29sbGVjdGlvbi5fcG9seWxpbmVCdWNrZXRzID0ge30pO1xuICB2YXIgcG9seWxpbmVzID0gY29sbGVjdGlvbi5fcG9seWxpbmVzO1xuICB2YXIgbGVuZ3RoID0gcG9seWxpbmVzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwID0gcG9seWxpbmVzW2ldO1xuICAgIGlmIChwLl9hY3R1YWxQb3NpdGlvbnMubGVuZ3RoID4gMSkge1xuICAgICAgcC51cGRhdGUoKTtcbiAgICAgIHZhciBtYXRlcmlhbCA9IHAubWF0ZXJpYWw7XG4gICAgICB2YXIgdmFsdWUgPSBwb2x5bGluZUJ1Y2tldHNbbWF0ZXJpYWwudHlwZV07XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gcG9seWxpbmVCdWNrZXRzW21hdGVyaWFsLnR5cGVdID0gbmV3IFBvbHlsaW5lQnVja2V0KFxuICAgICAgICAgIG1hdGVyaWFsLFxuICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgbW9kZWxNYXRyaXhcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlLmFkZFBvbHlsaW5lKHApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVNb2RlKGNvbGxlY3Rpb24sIGZyYW1lU3RhdGUpIHtcbiAgdmFyIG1vZGUgPSBmcmFtZVN0YXRlLm1vZGU7XG5cbiAgaWYgKFxuICAgIGNvbGxlY3Rpb24uX21vZGUgIT09IG1vZGUgfHxcbiAgICAhTWF0cml4NC5lcXVhbHMoY29sbGVjdGlvbi5fbW9kZWxNYXRyaXgsIGNvbGxlY3Rpb24ubW9kZWxNYXRyaXgpXG4gICkge1xuICAgIGNvbGxlY3Rpb24uX21vZGUgPSBtb2RlO1xuICAgIGNvbGxlY3Rpb24uX21vZGVsTWF0cml4ID0gTWF0cml4NC5jbG9uZShjb2xsZWN0aW9uLm1vZGVsTWF0cml4KTtcbiAgICBjb2xsZWN0aW9uLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlUG9seWxpbmVzKGNvbGxlY3Rpb24pIHtcbiAgaWYgKGNvbGxlY3Rpb24uX3BvbHlsaW5lc1JlbW92ZWQpIHtcbiAgICBjb2xsZWN0aW9uLl9wb2x5bGluZXNSZW1vdmVkID0gZmFsc2U7XG4gICAgdmFyIGRlZmluZWRQb2x5bGluZXMgPSBbXTtcbiAgICB2YXIgZGVmaW5lZFBvbHlsaW5lc1RvVXBkYXRlID0gW107XG4gICAgdmFyIHBvbHlJbmRleCA9IDA7XG4gICAgdmFyIHBvbHlsaW5lO1xuXG4gICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24uX3BvbHlsaW5lcy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgcG9seWxpbmUgPSBjb2xsZWN0aW9uLl9wb2x5bGluZXNbaV07XG4gICAgICBpZiAoIXBvbHlsaW5lLmlzRGVzdHJveWVkKSB7XG4gICAgICAgIHBvbHlsaW5lLl9pbmRleCA9IHBvbHlJbmRleCsrO1xuICAgICAgICBkZWZpbmVkUG9seWxpbmVzVG9VcGRhdGUucHVzaChwb2x5bGluZSk7XG4gICAgICAgIGRlZmluZWRQb2x5bGluZXMucHVzaChwb2x5bGluZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29sbGVjdGlvbi5fcG9seWxpbmVzID0gZGVmaW5lZFBvbHlsaW5lcztcbiAgICBjb2xsZWN0aW9uLl9wb2x5bGluZXNUb1VwZGF0ZSA9IGRlZmluZWRQb2x5bGluZXNUb1VwZGF0ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWxlYXNlU2hhZGVycyhjb2xsZWN0aW9uKSB7XG4gIHZhciBwb2x5bGluZXMgPSBjb2xsZWN0aW9uLl9wb2x5bGluZXM7XG4gIHZhciBsZW5ndGggPSBwb2x5bGluZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCFwb2x5bGluZXNbaV0uaXNEZXN0cm95ZWQpIHtcbiAgICAgIHZhciBidWNrZXQgPSBwb2x5bGluZXNbaV0uX2J1Y2tldDtcbiAgICAgIGlmIChkZWZpbmVkKGJ1Y2tldCkpIHtcbiAgICAgICAgYnVja2V0LnNoYWRlclByb2dyYW0gPVxuICAgICAgICAgIGJ1Y2tldC5zaGFkZXJQcm9ncmFtICYmIGJ1Y2tldC5zaGFkZXJQcm9ncmFtLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVzdHJveVZlcnRleEFycmF5cyhjb2xsZWN0aW9uKSB7XG4gIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uLl92ZXJ0ZXhBcnJheXMubGVuZ3RoO1xuICBmb3IgKHZhciB0ID0gMDsgdCA8IGxlbmd0aDsgKyt0KSB7XG4gICAgY29sbGVjdGlvbi5fdmVydGV4QXJyYXlzW3RdLnZhLmRlc3Ryb3koKTtcbiAgfVxuICBjb2xsZWN0aW9uLl92ZXJ0ZXhBcnJheXMubGVuZ3RoID0gMDtcbn1cblxuUG9seWxpbmVDb2xsZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlUG9seWxpbmUgPSBmdW5jdGlvbiAoXG4gIHBvbHlsaW5lLFxuICBwcm9wZXJ0eUNoYW5nZWRcbikge1xuICB0aGlzLl9wb2x5bGluZXNVcGRhdGVkID0gdHJ1ZTtcbiAgaWYgKCFwb2x5bGluZS5fZGlydHkpIHtcbiAgICB0aGlzLl9wb2x5bGluZXNUb1VwZGF0ZS5wdXNoKHBvbHlsaW5lKTtcbiAgfVxuICArK3RoaXMuX3Byb3BlcnRpZXNDaGFuZ2VkW3Byb3BlcnR5Q2hhbmdlZF07XG59O1xuXG5mdW5jdGlvbiBkZXN0cm95UG9seWxpbmVzKGNvbGxlY3Rpb24pIHtcbiAgdmFyIHBvbHlsaW5lcyA9IGNvbGxlY3Rpb24uX3BvbHlsaW5lcztcbiAgdmFyIGxlbmd0aCA9IHBvbHlsaW5lcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoIXBvbHlsaW5lc1tpXS5pc0Rlc3Ryb3llZCkge1xuICAgICAgcG9seWxpbmVzW2ldLl9kZXN0cm95KCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIFZlcnRleEFycmF5QnVja2V0TG9jYXRvcihjb3VudCwgb2Zmc2V0LCBidWNrZXQpIHtcbiAgdGhpcy5jb3VudCA9IGNvdW50O1xuICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgdGhpcy5idWNrZXQgPSBidWNrZXQ7XG59XG5cbmZ1bmN0aW9uIFBvbHlsaW5lQnVja2V0KG1hdGVyaWFsLCBtb2RlLCBtb2RlbE1hdHJpeCkge1xuICB0aGlzLnBvbHlsaW5lcyA9IFtdO1xuICB0aGlzLmxlbmd0aE9mUG9zaXRpb25zID0gMDtcbiAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICB0aGlzLnNoYWRlclByb2dyYW0gPSB1bmRlZmluZWQ7XG4gIHRoaXMubW9kZSA9IG1vZGU7XG4gIHRoaXMubW9kZWxNYXRyaXggPSBtb2RlbE1hdHJpeDtcbn1cblxuUG9seWxpbmVCdWNrZXQucHJvdG90eXBlLmFkZFBvbHlsaW5lID0gZnVuY3Rpb24gKHApIHtcbiAgdmFyIHBvbHlsaW5lcyA9IHRoaXMucG9seWxpbmVzO1xuICBwb2x5bGluZXMucHVzaChwKTtcbiAgcC5fYWN0dWFsTGVuZ3RoID0gdGhpcy5nZXRQb2x5bGluZVBvc2l0aW9uc0xlbmd0aChwKTtcbiAgdGhpcy5sZW5ndGhPZlBvc2l0aW9ucyArPSBwLl9hY3R1YWxMZW5ndGg7XG4gIHAuX2J1Y2tldCA9IHRoaXM7XG59O1xuXG5Qb2x5bGluZUJ1Y2tldC5wcm90b3R5cGUudXBkYXRlU2hhZGVyID0gZnVuY3Rpb24gKFxuICBjb250ZXh0LFxuICBiYXRjaFRhYmxlLFxuICB1c2VIaWdobGlnaHRDb2xvclxuKSB7XG4gIGlmIChkZWZpbmVkKHRoaXMuc2hhZGVyUHJvZ3JhbSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZGVmaW5lcyA9IFtcIkRJU1RBTkNFX0RJU1BMQVlfQ09ORElUSU9OXCJdO1xuICBpZiAodXNlSGlnaGxpZ2h0Q29sb3IpIHtcbiAgICBkZWZpbmVzLnB1c2goXCJWRUNUT1JfVElMRVwiKTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciB1c2Ugb2Ygdl9wb2x5bGluZUFuZ2xlIGluIG1hdGVyaWFsIHNoYWRlclxuICBpZiAoXG4gICAgdGhpcy5tYXRlcmlhbC5zaGFkZXJTb3VyY2Uuc2VhcmNoKC92YXJ5aW5nXFxzK2Zsb2F0XFxzK3ZfcG9seWxpbmVBbmdsZTsvZykgIT09XG4gICAgLTFcbiAgKSB7XG4gICAgZGVmaW5lcy5wdXNoKFwiUE9MWUxJTkVfREFTSFwiKTtcbiAgfVxuXG4gIGlmICghRmVhdHVyZURldGVjdGlvbi5pc0ludGVybmV0RXhwbG9yZXIoKSkge1xuICAgIGRlZmluZXMucHVzaChcIkNMSVBfUE9MWUxJTkVcIik7XG4gIH1cblxuICB2YXIgZnMgPSBuZXcgU2hhZGVyU291cmNlKHtcbiAgICBkZWZpbmVzOiBkZWZpbmVzLFxuICAgIHNvdXJjZXM6IFtcbiAgICAgIFwidmFyeWluZyB2ZWM0IHZfcGlja0NvbG9yO1xcblwiLFxuICAgICAgdGhpcy5tYXRlcmlhbC5zaGFkZXJTb3VyY2UsXG4gICAgICBQb2x5bGluZUZTLFxuICAgIF0sXG4gIH0pO1xuXG4gIHZhciB2c1NvdXJjZSA9IGJhdGNoVGFibGUuZ2V0VmVydGV4U2hhZGVyQ2FsbGJhY2soKShQb2x5bGluZVZTKTtcbiAgdmFyIHZzID0gbmV3IFNoYWRlclNvdXJjZSh7XG4gICAgZGVmaW5lczogZGVmaW5lcyxcbiAgICBzb3VyY2VzOiBbUG9seWxpbmVDb21tb24sIHZzU291cmNlXSxcbiAgfSk7XG5cbiAgdGhpcy5zaGFkZXJQcm9ncmFtID0gU2hhZGVyUHJvZ3JhbS5mcm9tQ2FjaGUoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgdmVydGV4U2hhZGVyU291cmNlOiB2cyxcbiAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnMsXG4gICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gaW50ZXJzZWN0c0lETChwb2x5bGluZSkge1xuICByZXR1cm4gKFxuICAgIENhcnRlc2lhbjMuZG90KENhcnRlc2lhbjMuVU5JVF9YLCBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWUuY2VudGVyKSA8IDAgfHxcbiAgICBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWUuaW50ZXJzZWN0UGxhbmUoUGxhbmUuT1JJR0lOX1pYX1BMQU5FKSA9PT1cbiAgICAgIEludGVyc2VjdC5JTlRFUlNFQ1RJTkdcbiAgKTtcbn1cblxuUG9seWxpbmVCdWNrZXQucHJvdG90eXBlLmdldFBvbHlsaW5lUG9zaXRpb25zTGVuZ3RoID0gZnVuY3Rpb24gKHBvbHlsaW5lKSB7XG4gIHZhciBsZW5ndGg7XG4gIGlmICh0aGlzLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEIHx8ICFpbnRlcnNlY3RzSURMKHBvbHlsaW5lKSkge1xuICAgIGxlbmd0aCA9IHBvbHlsaW5lLl9hY3R1YWxQb3NpdGlvbnMubGVuZ3RoO1xuICAgIHJldHVybiBsZW5ndGggKiA0LjAgLSA0LjA7XG4gIH1cblxuICB2YXIgY291bnQgPSAwO1xuICB2YXIgc2VnbWVudExlbmd0aHMgPSBwb2x5bGluZS5fc2VnbWVudHMubGVuZ3RocztcbiAgbGVuZ3RoID0gc2VnbWVudExlbmd0aHMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY291bnQgKz0gc2VnbWVudExlbmd0aHNbaV0gKiA0LjAgLSA0LjA7XG4gIH1cblxuICByZXR1cm4gY291bnQ7XG59O1xuXG52YXIgc2NyYXRjaFdyaXRlUG9zaXRpb24gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hXcml0ZVByZXZQb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaFdyaXRlTmV4dFBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoV3JpdGVWZWN0b3IgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hQaWNrQ29sb3JDYXJ0ZXNpYW4gPSBuZXcgQ2FydGVzaWFuNCgpO1xudmFyIHNjcmF0Y2hXaWR0aFNob3dDYXJ0ZXNpYW4gPSBuZXcgQ2FydGVzaWFuMigpO1xuXG5Qb2x5bGluZUJ1Y2tldC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoXG4gIHBvc2l0aW9uQXJyYXksXG4gIHRleENvb3JkRXhwYW5kQW5kQmF0Y2hJbmRleEFycmF5LFxuICBwb3NpdGlvbkluZGV4LFxuICBjb2xvckluZGV4LFxuICB0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhJbmRleCxcbiAgYmF0Y2hUYWJsZSxcbiAgY29udGV4dCxcbiAgcHJvamVjdGlvblxuKSB7XG4gIHZhciBtb2RlID0gdGhpcy5tb2RlO1xuICB2YXIgbWF4TG9uID0gcHJvamVjdGlvbi5lbGxpcHNvaWQubWF4aW11bVJhZGl1cyAqIENlc2l1bU1hdGguUEk7XG5cbiAgdmFyIHBvbHlsaW5lcyA9IHRoaXMucG9seWxpbmVzO1xuICB2YXIgbGVuZ3RoID0gcG9seWxpbmVzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwb2x5bGluZSA9IHBvbHlsaW5lc1tpXTtcbiAgICB2YXIgd2lkdGggPSBwb2x5bGluZS53aWR0aDtcbiAgICB2YXIgc2hvdyA9IHBvbHlsaW5lLnNob3cgJiYgd2lkdGggPiAwLjA7XG4gICAgdmFyIHBvbHlsaW5lQmF0Y2hJbmRleCA9IHBvbHlsaW5lLl9pbmRleDtcbiAgICB2YXIgc2VnbWVudHMgPSB0aGlzLmdldFNlZ21lbnRzKHBvbHlsaW5lLCBwcm9qZWN0aW9uKTtcbiAgICB2YXIgcG9zaXRpb25zID0gc2VnbWVudHMucG9zaXRpb25zO1xuICAgIHZhciBsZW5ndGhzID0gc2VnbWVudHMubGVuZ3RocztcbiAgICB2YXIgcG9zaXRpb25zTGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcblxuICAgIHZhciBwaWNrQ29sb3IgPSBwb2x5bGluZS5nZXRQaWNrSWQoY29udGV4dCkuY29sb3I7XG5cbiAgICB2YXIgc2VnbWVudEluZGV4ID0gMDtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBwb3NpdGlvbjtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9zaXRpb25zTGVuZ3RoOyArK2opIHtcbiAgICAgIGlmIChqID09PSAwKSB7XG4gICAgICAgIGlmIChwb2x5bGluZS5fbG9vcCkge1xuICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvc2l0aW9uID0gc2NyYXRjaFdyaXRlVmVjdG9yO1xuICAgICAgICAgIENhcnRlc2lhbjMuc3VidHJhY3QocG9zaXRpb25zWzBdLCBwb3NpdGlvbnNbMV0sIHBvc2l0aW9uKTtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLmFkZChwb3NpdGlvbnNbMF0sIHBvc2l0aW9uLCBwb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb25zW2ogLSAxXTtcbiAgICAgIH1cblxuICAgICAgQ2FydGVzaWFuMy5jbG9uZShwb3NpdGlvbiwgc2NyYXRjaFdyaXRlUHJldlBvc2l0aW9uKTtcbiAgICAgIENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb25zW2pdLCBzY3JhdGNoV3JpdGVQb3NpdGlvbik7XG5cbiAgICAgIGlmIChqID09PSBwb3NpdGlvbnNMZW5ndGggLSAxKSB7XG4gICAgICAgIGlmIChwb2x5bGluZS5fbG9vcCkge1xuICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb25zWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvc2l0aW9uID0gc2NyYXRjaFdyaXRlVmVjdG9yO1xuICAgICAgICAgIENhcnRlc2lhbjMuc3VidHJhY3QoXG4gICAgICAgICAgICBwb3NpdGlvbnNbcG9zaXRpb25zTGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwb3NpdGlvbnNbcG9zaXRpb25zTGVuZ3RoIC0gMl0sXG4gICAgICAgICAgICBwb3NpdGlvblxuICAgICAgICAgICk7XG4gICAgICAgICAgQ2FydGVzaWFuMy5hZGQocG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDFdLCBwb3NpdGlvbiwgcG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uc1tqICsgMV07XG4gICAgICB9XG5cbiAgICAgIENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb24sIHNjcmF0Y2hXcml0ZU5leHRQb3NpdGlvbik7XG5cbiAgICAgIHZhciBzZWdtZW50TGVuZ3RoID0gbGVuZ3Roc1tzZWdtZW50SW5kZXhdO1xuICAgICAgaWYgKGogPT09IGNvdW50ICsgc2VnbWVudExlbmd0aCkge1xuICAgICAgICBjb3VudCArPSBzZWdtZW50TGVuZ3RoO1xuICAgICAgICArK3NlZ21lbnRJbmRleDtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRTdGFydCA9IGogLSBjb3VudCA9PT0gMDtcbiAgICAgIHZhciBzZWdtZW50RW5kID0gaiA9PT0gY291bnQgKyBsZW5ndGhzW3NlZ21lbnRJbmRleF0gLSAxO1xuXG4gICAgICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQpIHtcbiAgICAgICAgc2NyYXRjaFdyaXRlUHJldlBvc2l0aW9uLnogPSAwLjA7XG4gICAgICAgIHNjcmF0Y2hXcml0ZVBvc2l0aW9uLnogPSAwLjA7XG4gICAgICAgIHNjcmF0Y2hXcml0ZU5leHRQb3NpdGlvbi56ID0gMC4wO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHwgbW9kZSA9PT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAoc2VnbWVudFN0YXJ0IHx8IHNlZ21lbnRFbmQpICYmXG4gICAgICAgICAgbWF4TG9uIC0gTWF0aC5hYnMoc2NyYXRjaFdyaXRlUG9zaXRpb24ueCkgPCAxLjBcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHNjcmF0Y2hXcml0ZVBvc2l0aW9uLnggPCAwLjAgJiZcbiAgICAgICAgICAgICAgc2NyYXRjaFdyaXRlUHJldlBvc2l0aW9uLnggPiAwLjApIHx8XG4gICAgICAgICAgICAoc2NyYXRjaFdyaXRlUG9zaXRpb24ueCA+IDAuMCAmJiBzY3JhdGNoV3JpdGVQcmV2UG9zaXRpb24ueCA8IDAuMClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIENhcnRlc2lhbjMuY2xvbmUoc2NyYXRjaFdyaXRlUG9zaXRpb24sIHNjcmF0Y2hXcml0ZVByZXZQb3NpdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHNjcmF0Y2hXcml0ZVBvc2l0aW9uLnggPCAwLjAgJiZcbiAgICAgICAgICAgICAgc2NyYXRjaFdyaXRlTmV4dFBvc2l0aW9uLnggPiAwLjApIHx8XG4gICAgICAgICAgICAoc2NyYXRjaFdyaXRlUG9zaXRpb24ueCA+IDAuMCAmJiBzY3JhdGNoV3JpdGVOZXh0UG9zaXRpb24ueCA8IDAuMClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIENhcnRlc2lhbjMuY2xvbmUoc2NyYXRjaFdyaXRlUG9zaXRpb24sIHNjcmF0Y2hXcml0ZU5leHRQb3NpdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydEsgPSBzZWdtZW50U3RhcnQgPyAyIDogMDtcbiAgICAgIHZhciBlbmRLID0gc2VnbWVudEVuZCA/IDIgOiA0O1xuXG4gICAgICBmb3IgKHZhciBrID0gc3RhcnRLOyBrIDwgZW5kSzsgKytrKSB7XG4gICAgICAgIEVuY29kZWRDYXJ0ZXNpYW4zLndyaXRlRWxlbWVudHMoXG4gICAgICAgICAgc2NyYXRjaFdyaXRlUG9zaXRpb24sXG4gICAgICAgICAgcG9zaXRpb25BcnJheSxcbiAgICAgICAgICBwb3NpdGlvbkluZGV4XG4gICAgICAgICk7XG4gICAgICAgIEVuY29kZWRDYXJ0ZXNpYW4zLndyaXRlRWxlbWVudHMoXG4gICAgICAgICAgc2NyYXRjaFdyaXRlUHJldlBvc2l0aW9uLFxuICAgICAgICAgIHBvc2l0aW9uQXJyYXksXG4gICAgICAgICAgcG9zaXRpb25JbmRleCArIDZcbiAgICAgICAgKTtcbiAgICAgICAgRW5jb2RlZENhcnRlc2lhbjMud3JpdGVFbGVtZW50cyhcbiAgICAgICAgICBzY3JhdGNoV3JpdGVOZXh0UG9zaXRpb24sXG4gICAgICAgICAgcG9zaXRpb25BcnJheSxcbiAgICAgICAgICBwb3NpdGlvbkluZGV4ICsgMTJcbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gayAtIDIgPCAwID8gLTEuMCA6IDEuMDtcbiAgICAgICAgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4QXJyYXlbdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4SW5kZXhdID1cbiAgICAgICAgICBqIC8gKHBvc2l0aW9uc0xlbmd0aCAtIDEpOyAvLyBzIHRleCBjb29yZFxuICAgICAgICB0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhBcnJheVt0ZXhDb29yZEV4cGFuZEFuZEJhdGNoSW5kZXhJbmRleCArIDFdID1cbiAgICAgICAgICAyICogKGsgJSAyKSAtIDE7IC8vIGV4cGFuZCBkaXJlY3Rpb25cbiAgICAgICAgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4QXJyYXlbXG4gICAgICAgICAgdGV4Q29vcmRFeHBhbmRBbmRCYXRjaEluZGV4SW5kZXggKyAyXG4gICAgICAgIF0gPSBkaXJlY3Rpb247XG4gICAgICAgIHRleENvb3JkRXhwYW5kQW5kQmF0Y2hJbmRleEFycmF5W1xuICAgICAgICAgIHRleENvb3JkRXhwYW5kQW5kQmF0Y2hJbmRleEluZGV4ICsgM1xuICAgICAgICBdID0gcG9seWxpbmVCYXRjaEluZGV4O1xuXG4gICAgICAgIHBvc2l0aW9uSW5kZXggKz0gNiAqIDM7XG4gICAgICAgIHRleENvb3JkRXhwYW5kQW5kQmF0Y2hJbmRleEluZGV4ICs9IDQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNvbG9yQ2FydGVzaWFuID0gc2NyYXRjaFBpY2tDb2xvckNhcnRlc2lhbjtcbiAgICBjb2xvckNhcnRlc2lhbi54ID0gQ29sb3IuZmxvYXRUb0J5dGUocGlja0NvbG9yLnJlZCk7XG4gICAgY29sb3JDYXJ0ZXNpYW4ueSA9IENvbG9yLmZsb2F0VG9CeXRlKHBpY2tDb2xvci5ncmVlbik7XG4gICAgY29sb3JDYXJ0ZXNpYW4ueiA9IENvbG9yLmZsb2F0VG9CeXRlKHBpY2tDb2xvci5ibHVlKTtcbiAgICBjb2xvckNhcnRlc2lhbi53ID0gQ29sb3IuZmxvYXRUb0J5dGUocGlja0NvbG9yLmFscGhhKTtcblxuICAgIHZhciB3aWR0aFNob3dDYXJ0ZXNpYW4gPSBzY3JhdGNoV2lkdGhTaG93Q2FydGVzaWFuO1xuICAgIHdpZHRoU2hvd0NhcnRlc2lhbi54ID0gd2lkdGg7XG4gICAgd2lkdGhTaG93Q2FydGVzaWFuLnkgPSBzaG93ID8gMS4wIDogMC4wO1xuXG4gICAgdmFyIGJvdW5kaW5nU3BoZXJlID1cbiAgICAgIG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEXG4gICAgICAgID8gcG9seWxpbmUuX2JvdW5kaW5nVm9sdW1lMkRcbiAgICAgICAgOiBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWVXQztcbiAgICB2YXIgZW5jb2RlZENlbnRlciA9IEVuY29kZWRDYXJ0ZXNpYW4zLmZyb21DYXJ0ZXNpYW4oXG4gICAgICBib3VuZGluZ1NwaGVyZS5jZW50ZXIsXG4gICAgICBzY3JhdGNoVXBkYXRlUG9seWxpbmVFbmNvZGVkQ2FydGVzaWFuXG4gICAgKTtcbiAgICB2YXIgaGlnaCA9IGVuY29kZWRDZW50ZXIuaGlnaDtcbiAgICB2YXIgbG93ID0gQ2FydGVzaWFuNC5mcm9tRWxlbWVudHMoXG4gICAgICBlbmNvZGVkQ2VudGVyLmxvdy54LFxuICAgICAgZW5jb2RlZENlbnRlci5sb3cueSxcbiAgICAgIGVuY29kZWRDZW50ZXIubG93LnosXG4gICAgICBib3VuZGluZ1NwaGVyZS5yYWRpdXMsXG4gICAgICBzY3JhdGNoVXBkYXRlUG9seWxpbmVDYXJ0ZXNpYW40XG4gICAgKTtcblxuICAgIHZhciBuZWFyRmFyQ2FydGVzaWFuID0gc2NyYXRjaE5lYXJGYXJDYXJ0ZXNpYW4yO1xuICAgIG5lYXJGYXJDYXJ0ZXNpYW4ueCA9IDAuMDtcbiAgICBuZWFyRmFyQ2FydGVzaWFuLnkgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuXG4gICAgdmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IHBvbHlsaW5lLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbjtcbiAgICBpZiAoZGVmaW5lZChkaXN0YW5jZURpc3BsYXlDb25kaXRpb24pKSB7XG4gICAgICBuZWFyRmFyQ2FydGVzaWFuLnggPSBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24ubmVhcjtcbiAgICAgIG5lYXJGYXJDYXJ0ZXNpYW4ueSA9IGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5mYXI7XG4gICAgfVxuXG4gICAgYmF0Y2hUYWJsZS5zZXRCYXRjaGVkQXR0cmlidXRlKHBvbHlsaW5lQmF0Y2hJbmRleCwgMCwgd2lkdGhTaG93Q2FydGVzaWFuKTtcbiAgICBiYXRjaFRhYmxlLnNldEJhdGNoZWRBdHRyaWJ1dGUocG9seWxpbmVCYXRjaEluZGV4LCAxLCBjb2xvckNhcnRlc2lhbik7XG5cbiAgICBpZiAoYmF0Y2hUYWJsZS5hdHRyaWJ1dGVzLmxlbmd0aCA+IDIpIHtcbiAgICAgIGJhdGNoVGFibGUuc2V0QmF0Y2hlZEF0dHJpYnV0ZShwb2x5bGluZUJhdGNoSW5kZXgsIDIsIGhpZ2gpO1xuICAgICAgYmF0Y2hUYWJsZS5zZXRCYXRjaGVkQXR0cmlidXRlKHBvbHlsaW5lQmF0Y2hJbmRleCwgMywgbG93KTtcbiAgICAgIGJhdGNoVGFibGUuc2V0QmF0Y2hlZEF0dHJpYnV0ZShwb2x5bGluZUJhdGNoSW5kZXgsIDQsIG5lYXJGYXJDYXJ0ZXNpYW4pO1xuICAgIH1cbiAgfVxufTtcblxudmFyIG1vcnBoUG9zaXRpb25TY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBtb3JwaFByZXZQb3NpdGlvblNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIG1vcnBoTmV4dFBvc2l0aW9uU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgbW9ycGhWZWN0b3JTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcblxuUG9seWxpbmVCdWNrZXQucHJvdG90eXBlLndyaXRlRm9yTW9ycGggPSBmdW5jdGlvbiAoXG4gIHBvc2l0aW9uQXJyYXksXG4gIHBvc2l0aW9uSW5kZXhcbikge1xuICB2YXIgbW9kZWxNYXRyaXggPSB0aGlzLm1vZGVsTWF0cml4O1xuICB2YXIgcG9seWxpbmVzID0gdGhpcy5wb2x5bGluZXM7XG4gIHZhciBsZW5ndGggPSBwb2x5bGluZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHBvbHlsaW5lID0gcG9seWxpbmVzW2ldO1xuICAgIHZhciBwb3NpdGlvbnMgPSBwb2x5bGluZS5fc2VnbWVudHMucG9zaXRpb25zO1xuICAgIHZhciBsZW5ndGhzID0gcG9seWxpbmUuX3NlZ21lbnRzLmxlbmd0aHM7XG4gICAgdmFyIHBvc2l0aW9uc0xlbmd0aCA9IHBvc2l0aW9ucy5sZW5ndGg7XG5cbiAgICB2YXIgc2VnbWVudEluZGV4ID0gMDtcbiAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBwb3NpdGlvbnNMZW5ndGg7ICsraikge1xuICAgICAgdmFyIHByZXZQb3NpdGlvbjtcbiAgICAgIGlmIChqID09PSAwKSB7XG4gICAgICAgIGlmIChwb2x5bGluZS5fbG9vcCkge1xuICAgICAgICAgIHByZXZQb3NpdGlvbiA9IHBvc2l0aW9uc1twb3NpdGlvbnNMZW5ndGggLSAyXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2UG9zaXRpb24gPSBtb3JwaFZlY3RvclNjcmF0Y2g7XG4gICAgICAgICAgQ2FydGVzaWFuMy5zdWJ0cmFjdChwb3NpdGlvbnNbMF0sIHBvc2l0aW9uc1sxXSwgcHJldlBvc2l0aW9uKTtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLmFkZChwb3NpdGlvbnNbMF0sIHByZXZQb3NpdGlvbiwgcHJldlBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldlBvc2l0aW9uID0gcG9zaXRpb25zW2ogLSAxXTtcbiAgICAgIH1cblxuICAgICAgcHJldlBvc2l0aW9uID0gTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQoXG4gICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICBwcmV2UG9zaXRpb24sXG4gICAgICAgIG1vcnBoUHJldlBvc2l0aW9uU2NyYXRjaFxuICAgICAgKTtcblxuICAgICAgdmFyIHBvc2l0aW9uID0gTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQoXG4gICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICBwb3NpdGlvbnNbal0sXG4gICAgICAgIG1vcnBoUG9zaXRpb25TY3JhdGNoXG4gICAgICApO1xuXG4gICAgICB2YXIgbmV4dFBvc2l0aW9uO1xuICAgICAgaWYgKGogPT09IHBvc2l0aW9uc0xlbmd0aCAtIDEpIHtcbiAgICAgICAgaWYgKHBvbHlsaW5lLl9sb29wKSB7XG4gICAgICAgICAgbmV4dFBvc2l0aW9uID0gcG9zaXRpb25zWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHRQb3NpdGlvbiA9IG1vcnBoVmVjdG9yU2NyYXRjaDtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgICAgICAgICAgcG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDJdLFxuICAgICAgICAgICAgbmV4dFBvc2l0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLmFkZChcbiAgICAgICAgICAgIHBvc2l0aW9uc1twb3NpdGlvbnNMZW5ndGggLSAxXSxcbiAgICAgICAgICAgIG5leHRQb3NpdGlvbixcbiAgICAgICAgICAgIG5leHRQb3NpdGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IHBvc2l0aW9uc1tqICsgMV07XG4gICAgICB9XG5cbiAgICAgIG5leHRQb3NpdGlvbiA9IE1hdHJpeDQubXVsdGlwbHlCeVBvaW50KFxuICAgICAgICBtb2RlbE1hdHJpeCxcbiAgICAgICAgbmV4dFBvc2l0aW9uLFxuICAgICAgICBtb3JwaE5leHRQb3NpdGlvblNjcmF0Y2hcbiAgICAgICk7XG5cbiAgICAgIHZhciBzZWdtZW50TGVuZ3RoID0gbGVuZ3Roc1tzZWdtZW50SW5kZXhdO1xuICAgICAgaWYgKGogPT09IGNvdW50ICsgc2VnbWVudExlbmd0aCkge1xuICAgICAgICBjb3VudCArPSBzZWdtZW50TGVuZ3RoO1xuICAgICAgICArK3NlZ21lbnRJbmRleDtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRTdGFydCA9IGogLSBjb3VudCA9PT0gMDtcbiAgICAgIHZhciBzZWdtZW50RW5kID0gaiA9PT0gY291bnQgKyBsZW5ndGhzW3NlZ21lbnRJbmRleF0gLSAxO1xuXG4gICAgICB2YXIgc3RhcnRLID0gc2VnbWVudFN0YXJ0ID8gMiA6IDA7XG4gICAgICB2YXIgZW5kSyA9IHNlZ21lbnRFbmQgPyAyIDogNDtcblxuICAgICAgZm9yICh2YXIgayA9IHN0YXJ0SzsgayA8IGVuZEs7ICsraykge1xuICAgICAgICBFbmNvZGVkQ2FydGVzaWFuMy53cml0ZUVsZW1lbnRzKHBvc2l0aW9uLCBwb3NpdGlvbkFycmF5LCBwb3NpdGlvbkluZGV4KTtcbiAgICAgICAgRW5jb2RlZENhcnRlc2lhbjMud3JpdGVFbGVtZW50cyhcbiAgICAgICAgICBwcmV2UG9zaXRpb24sXG4gICAgICAgICAgcG9zaXRpb25BcnJheSxcbiAgICAgICAgICBwb3NpdGlvbkluZGV4ICsgNlxuICAgICAgICApO1xuICAgICAgICBFbmNvZGVkQ2FydGVzaWFuMy53cml0ZUVsZW1lbnRzKFxuICAgICAgICAgIG5leHRQb3NpdGlvbixcbiAgICAgICAgICBwb3NpdGlvbkFycmF5LFxuICAgICAgICAgIHBvc2l0aW9uSW5kZXggKyAxMlxuICAgICAgICApO1xuXG4gICAgICAgIHBvc2l0aW9uSW5kZXggKz0gNiAqIDM7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG52YXIgc2NyYXRjaFNlZ21lbnRMZW5ndGhzID0gbmV3IEFycmF5KDEpO1xuXG5Qb2x5bGluZUJ1Y2tldC5wcm90b3R5cGUudXBkYXRlSW5kaWNlcyA9IGZ1bmN0aW9uIChcbiAgdG90YWxJbmRpY2VzLFxuICB2ZXJ0ZXhCdWZmZXJPZmZzZXQsXG4gIHZlcnRleEFycmF5QnVja2V0cyxcbiAgb2Zmc2V0XG4pIHtcbiAgdmFyIHZhQ291bnQgPSB2ZXJ0ZXhBcnJheUJ1Y2tldHMubGVuZ3RoIC0gMTtcbiAgdmFyIGJ1Y2tldExvY2F0b3IgPSBuZXcgVmVydGV4QXJyYXlCdWNrZXRMb2NhdG9yKDAsIG9mZnNldCwgdGhpcyk7XG4gIHZlcnRleEFycmF5QnVja2V0c1t2YUNvdW50XS5wdXNoKGJ1Y2tldExvY2F0b3IpO1xuICB2YXIgY291bnQgPSAwO1xuICB2YXIgaW5kaWNlcyA9IHRvdGFsSW5kaWNlc1t0b3RhbEluZGljZXMubGVuZ3RoIC0gMV07XG4gIHZhciBpbmRpY2VzQ291bnQgPSAwO1xuICBpZiAoaW5kaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgaW5kaWNlc0NvdW50ID0gaW5kaWNlc1tpbmRpY2VzLmxlbmd0aCAtIDFdICsgMTtcbiAgfVxuICB2YXIgcG9seWxpbmVzID0gdGhpcy5wb2x5bGluZXM7XG4gIHZhciBsZW5ndGggPSBwb2x5bGluZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHBvbHlsaW5lID0gcG9seWxpbmVzW2ldO1xuICAgIHBvbHlsaW5lLl9sb2NhdG9yQnVja2V0cyA9IFtdO1xuXG4gICAgdmFyIHNlZ21lbnRzO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgICBzZWdtZW50cyA9IHNjcmF0Y2hTZWdtZW50TGVuZ3RocztcbiAgICAgIHZhciBwb3NpdGlvbnNMZW5ndGggPSBwb2x5bGluZS5fYWN0dWFsUG9zaXRpb25zLmxlbmd0aDtcbiAgICAgIGlmIChwb3NpdGlvbnNMZW5ndGggPiAwKSB7XG4gICAgICAgIHNlZ21lbnRzWzBdID0gcG9zaXRpb25zTGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlZ21lbnRzID0gcG9seWxpbmUuX3NlZ21lbnRzLmxlbmd0aHM7XG4gICAgfVxuXG4gICAgdmFyIG51bWJlck9mU2VnbWVudHMgPSBzZWdtZW50cy5sZW5ndGg7XG4gICAgaWYgKG51bWJlck9mU2VnbWVudHMgPiAwKSB7XG4gICAgICB2YXIgc2VnbWVudEluZGV4Q291bnQgPSAwO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1iZXJPZlNlZ21lbnRzOyArK2opIHtcbiAgICAgICAgdmFyIHNlZ21lbnRMZW5ndGggPSBzZWdtZW50c1tqXSAtIDEuMDtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzZWdtZW50TGVuZ3RoOyArK2spIHtcbiAgICAgICAgICBpZiAoaW5kaWNlc0NvdW50ICsgNCA+IENlc2l1bU1hdGguU0lYVFlfRk9VUl9LSUxPQllURVMpIHtcbiAgICAgICAgICAgIHBvbHlsaW5lLl9sb2NhdG9yQnVja2V0cy5wdXNoKHtcbiAgICAgICAgICAgICAgbG9jYXRvcjogYnVja2V0TG9jYXRvcixcbiAgICAgICAgICAgICAgY291bnQ6IHNlZ21lbnRJbmRleENvdW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWdtZW50SW5kZXhDb3VudCA9IDA7XG4gICAgICAgICAgICB2ZXJ0ZXhCdWZmZXJPZmZzZXQucHVzaCg0KTtcbiAgICAgICAgICAgIGluZGljZXMgPSBbXTtcbiAgICAgICAgICAgIHRvdGFsSW5kaWNlcy5wdXNoKGluZGljZXMpO1xuICAgICAgICAgICAgaW5kaWNlc0NvdW50ID0gMDtcbiAgICAgICAgICAgIGJ1Y2tldExvY2F0b3IuY291bnQgPSBjb3VudDtcbiAgICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgICAgICBidWNrZXRMb2NhdG9yID0gbmV3IFZlcnRleEFycmF5QnVja2V0TG9jYXRvcigwLCAwLCB0aGlzKTtcbiAgICAgICAgICAgIHZlcnRleEFycmF5QnVja2V0c1srK3ZhQ291bnRdID0gW2J1Y2tldExvY2F0b3JdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGluZGljZXMucHVzaChpbmRpY2VzQ291bnQsIGluZGljZXNDb3VudCArIDIsIGluZGljZXNDb3VudCArIDEpO1xuICAgICAgICAgIGluZGljZXMucHVzaChpbmRpY2VzQ291bnQgKyAxLCBpbmRpY2VzQ291bnQgKyAyLCBpbmRpY2VzQ291bnQgKyAzKTtcblxuICAgICAgICAgIHNlZ21lbnRJbmRleENvdW50ICs9IDY7XG4gICAgICAgICAgY291bnQgKz0gNjtcbiAgICAgICAgICBvZmZzZXQgKz0gNjtcbiAgICAgICAgICBpbmRpY2VzQ291bnQgKz0gNDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwb2x5bGluZS5fbG9jYXRvckJ1Y2tldHMucHVzaCh7XG4gICAgICAgIGxvY2F0b3I6IGJ1Y2tldExvY2F0b3IsXG4gICAgICAgIGNvdW50OiBzZWdtZW50SW5kZXhDb3VudCxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaW5kaWNlc0NvdW50ICsgNCA+IENlc2l1bU1hdGguU0lYVFlfRk9VUl9LSUxPQllURVMpIHtcbiAgICAgICAgdmVydGV4QnVmZmVyT2Zmc2V0LnB1c2goMCk7XG4gICAgICAgIGluZGljZXMgPSBbXTtcbiAgICAgICAgdG90YWxJbmRpY2VzLnB1c2goaW5kaWNlcyk7XG4gICAgICAgIGluZGljZXNDb3VudCA9IDA7XG4gICAgICAgIGJ1Y2tldExvY2F0b3IuY291bnQgPSBjb3VudDtcbiAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgICBidWNrZXRMb2NhdG9yID0gbmV3IFZlcnRleEFycmF5QnVja2V0TG9jYXRvcigwLCAwLCB0aGlzKTtcbiAgICAgICAgdmVydGV4QXJyYXlCdWNrZXRzWysrdmFDb3VudF0gPSBbYnVja2V0TG9jYXRvcl07XG4gICAgICB9XG4gICAgfVxuICAgIHBvbHlsaW5lLl9jbGVhbigpO1xuICB9XG4gIGJ1Y2tldExvY2F0b3IuY291bnQgPSBjb3VudDtcbiAgcmV0dXJuIG9mZnNldDtcbn07XG5cblBvbHlsaW5lQnVja2V0LnByb3RvdHlwZS5nZXRQb2x5bGluZVN0YXJ0SW5kZXggPSBmdW5jdGlvbiAocG9seWxpbmUpIHtcbiAgdmFyIHBvbHlsaW5lcyA9IHRoaXMucG9seWxpbmVzO1xuICB2YXIgcG9zaXRpb25JbmRleCA9IDA7XG4gIHZhciBsZW5ndGggPSBwb2x5bGluZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHAgPSBwb2x5bGluZXNbaV07XG4gICAgaWYgKHAgPT09IHBvbHlsaW5lKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgcG9zaXRpb25JbmRleCArPSBwLl9hY3R1YWxMZW5ndGg7XG4gIH1cbiAgcmV0dXJuIHBvc2l0aW9uSW5kZXg7XG59O1xuXG52YXIgc2NyYXRjaFNlZ21lbnRzID0ge1xuICBwb3NpdGlvbnM6IHVuZGVmaW5lZCxcbiAgbGVuZ3RoczogdW5kZWZpbmVkLFxufTtcbnZhciBzY3JhdGNoTGVuZ3RocyA9IG5ldyBBcnJheSgxKTtcbnZhciBwc2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaENhcnRvZ3JhcGhpYyA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcblxuUG9seWxpbmVCdWNrZXQucHJvdG90eXBlLmdldFNlZ21lbnRzID0gZnVuY3Rpb24gKHBvbHlsaW5lLCBwcm9qZWN0aW9uKSB7XG4gIHZhciBwb3NpdGlvbnMgPSBwb2x5bGluZS5fYWN0dWFsUG9zaXRpb25zO1xuXG4gIGlmICh0aGlzLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgc2NyYXRjaExlbmd0aHNbMF0gPSBwb3NpdGlvbnMubGVuZ3RoO1xuICAgIHNjcmF0Y2hTZWdtZW50cy5wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG4gICAgc2NyYXRjaFNlZ21lbnRzLmxlbmd0aHMgPSBzY3JhdGNoTGVuZ3RocztcbiAgICByZXR1cm4gc2NyYXRjaFNlZ21lbnRzO1xuICB9XG5cbiAgaWYgKGludGVyc2VjdHNJREwocG9seWxpbmUpKSB7XG4gICAgcG9zaXRpb25zID0gcG9seWxpbmUuX3NlZ21lbnRzLnBvc2l0aW9ucztcbiAgfVxuXG4gIHZhciBlbGxpcHNvaWQgPSBwcm9qZWN0aW9uLmVsbGlwc29pZDtcbiAgdmFyIG5ld1Bvc2l0aW9ucyA9IFtdO1xuICB2YXIgbW9kZWxNYXRyaXggPSB0aGlzLm1vZGVsTWF0cml4O1xuICB2YXIgbGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgdmFyIHBvc2l0aW9uO1xuICB2YXIgcCA9IHBzY3JhdGNoO1xuXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgbGVuZ3RoOyArK24pIHtcbiAgICBwb3NpdGlvbiA9IHBvc2l0aW9uc1tuXTtcbiAgICBwID0gTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQobW9kZWxNYXRyaXgsIHBvc2l0aW9uLCBwKTtcbiAgICBuZXdQb3NpdGlvbnMucHVzaChcbiAgICAgIHByb2plY3Rpb24ucHJvamVjdChcbiAgICAgICAgZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKHAsIHNjcmF0Y2hDYXJ0b2dyYXBoaWMpXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIGlmIChuZXdQb3NpdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIHBvbHlsaW5lLl9ib3VuZGluZ1ZvbHVtZTJEID0gQm91bmRpbmdTcGhlcmUuZnJvbVBvaW50cyhcbiAgICAgIG5ld1Bvc2l0aW9ucyxcbiAgICAgIHBvbHlsaW5lLl9ib3VuZGluZ1ZvbHVtZTJEXG4gICAgKTtcbiAgICB2YXIgY2VudGVyMkQgPSBwb2x5bGluZS5fYm91bmRpbmdWb2x1bWUyRC5jZW50ZXI7XG4gICAgcG9seWxpbmUuX2JvdW5kaW5nVm9sdW1lMkQuY2VudGVyID0gbmV3IENhcnRlc2lhbjMoXG4gICAgICBjZW50ZXIyRC56LFxuICAgICAgY2VudGVyMkQueCxcbiAgICAgIGNlbnRlcjJELnlcbiAgICApO1xuICB9XG5cbiAgc2NyYXRjaFNlZ21lbnRzLnBvc2l0aW9ucyA9IG5ld1Bvc2l0aW9ucztcbiAgc2NyYXRjaFNlZ21lbnRzLmxlbmd0aHMgPSBwb2x5bGluZS5fc2VnbWVudHMubGVuZ3RocztcbiAgcmV0dXJuIHNjcmF0Y2hTZWdtZW50cztcbn07XG5cbnZhciBzY3JhdGNoUG9zaXRpb25zQXJyYXk7XG5cblBvbHlsaW5lQnVja2V0LnByb3RvdHlwZS53cml0ZVVwZGF0ZSA9IGZ1bmN0aW9uIChcbiAgaW5kZXgsXG4gIHBvbHlsaW5lLFxuICBwb3NpdGlvbkJ1ZmZlcixcbiAgcHJvamVjdGlvblxuKSB7XG4gIHZhciBtb2RlID0gdGhpcy5tb2RlO1xuICB2YXIgbWF4TG9uID0gcHJvamVjdGlvbi5lbGxpcHNvaWQubWF4aW11bVJhZGl1cyAqIENlc2l1bU1hdGguUEk7XG5cbiAgdmFyIHBvc2l0aW9uc0xlbmd0aCA9IHBvbHlsaW5lLl9hY3R1YWxMZW5ndGg7XG4gIGlmIChwb3NpdGlvbnNMZW5ndGgpIHtcbiAgICBpbmRleCArPSB0aGlzLmdldFBvbHlsaW5lU3RhcnRJbmRleChwb2x5bGluZSk7XG5cbiAgICB2YXIgcG9zaXRpb25BcnJheSA9IHNjcmF0Y2hQb3NpdGlvbnNBcnJheTtcbiAgICB2YXIgcG9zaXRpb25zQXJyYXlMZW5ndGggPSA2ICogcG9zaXRpb25zTGVuZ3RoICogMztcblxuICAgIGlmIChcbiAgICAgICFkZWZpbmVkKHBvc2l0aW9uQXJyYXkpIHx8XG4gICAgICBwb3NpdGlvbkFycmF5Lmxlbmd0aCA8IHBvc2l0aW9uc0FycmF5TGVuZ3RoXG4gICAgKSB7XG4gICAgICBwb3NpdGlvbkFycmF5ID0gc2NyYXRjaFBvc2l0aW9uc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgcG9zaXRpb25zQXJyYXlMZW5ndGhcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbkFycmF5Lmxlbmd0aCA+IHBvc2l0aW9uc0FycmF5TGVuZ3RoKSB7XG4gICAgICBwb3NpdGlvbkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgcG9zaXRpb25BcnJheS5idWZmZXIsXG4gICAgICAgIDAsXG4gICAgICAgIHBvc2l0aW9uc0FycmF5TGVuZ3RoXG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciBzZWdtZW50cyA9IHRoaXMuZ2V0U2VnbWVudHMocG9seWxpbmUsIHByb2plY3Rpb24pO1xuICAgIHZhciBwb3NpdGlvbnMgPSBzZWdtZW50cy5wb3NpdGlvbnM7XG4gICAgdmFyIGxlbmd0aHMgPSBzZWdtZW50cy5sZW5ndGhzO1xuXG4gICAgdmFyIHBvc2l0aW9uSW5kZXggPSAwO1xuICAgIHZhciBzZWdtZW50SW5kZXggPSAwO1xuICAgIHZhciBjb3VudCA9IDA7XG4gICAgdmFyIHBvc2l0aW9uO1xuXG4gICAgcG9zaXRpb25zTGVuZ3RoID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc2l0aW9uc0xlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBpZiAocG9seWxpbmUuX2xvb3ApIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uc1twb3NpdGlvbnNMZW5ndGggLSAyXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IHNjcmF0Y2hXcml0ZVZlY3RvcjtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHBvc2l0aW9uc1swXSwgcG9zaXRpb25zWzFdLCBwb3NpdGlvbik7XG4gICAgICAgICAgQ2FydGVzaWFuMy5hZGQocG9zaXRpb25zWzBdLCBwb3NpdGlvbiwgcG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uc1tpIC0gMV07XG4gICAgICB9XG5cbiAgICAgIENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb24sIHNjcmF0Y2hXcml0ZVByZXZQb3NpdGlvbik7XG4gICAgICBDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uc1tpXSwgc2NyYXRjaFdyaXRlUG9zaXRpb24pO1xuXG4gICAgICBpZiAoaSA9PT0gcG9zaXRpb25zTGVuZ3RoIC0gMSkge1xuICAgICAgICBpZiAocG9seWxpbmUuX2xvb3ApIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uc1sxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IHNjcmF0Y2hXcml0ZVZlY3RvcjtcbiAgICAgICAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgICAgICAgICAgcG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcG9zaXRpb25zW3Bvc2l0aW9uc0xlbmd0aCAtIDJdLFxuICAgICAgICAgICAgcG9zaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIENhcnRlc2lhbjMuYWRkKHBvc2l0aW9uc1twb3NpdGlvbnNMZW5ndGggLSAxXSwgcG9zaXRpb24sIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbnNbaSArIDFdO1xuICAgICAgfVxuXG4gICAgICBDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uLCBzY3JhdGNoV3JpdGVOZXh0UG9zaXRpb24pO1xuXG4gICAgICB2YXIgc2VnbWVudExlbmd0aCA9IGxlbmd0aHNbc2VnbWVudEluZGV4XTtcbiAgICAgIGlmIChpID09PSBjb3VudCArIHNlZ21lbnRMZW5ndGgpIHtcbiAgICAgICAgY291bnQgKz0gc2VnbWVudExlbmd0aDtcbiAgICAgICAgKytzZWdtZW50SW5kZXg7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWdtZW50U3RhcnQgPSBpIC0gY291bnQgPT09IDA7XG4gICAgICB2YXIgc2VnbWVudEVuZCA9IGkgPT09IGNvdW50ICsgbGVuZ3Roc1tzZWdtZW50SW5kZXhdIC0gMTtcblxuICAgICAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgICAgIHNjcmF0Y2hXcml0ZVByZXZQb3NpdGlvbi56ID0gMC4wO1xuICAgICAgICBzY3JhdGNoV3JpdGVQb3NpdGlvbi56ID0gMC4wO1xuICAgICAgICBzY3JhdGNoV3JpdGVOZXh0UG9zaXRpb24ueiA9IDAuMDtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEIHx8IG1vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgKHNlZ21lbnRTdGFydCB8fCBzZWdtZW50RW5kKSAmJlxuICAgICAgICAgIG1heExvbiAtIE1hdGguYWJzKHNjcmF0Y2hXcml0ZVBvc2l0aW9uLngpIDwgMS4wXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIChzY3JhdGNoV3JpdGVQb3NpdGlvbi54IDwgMC4wICYmXG4gICAgICAgICAgICAgIHNjcmF0Y2hXcml0ZVByZXZQb3NpdGlvbi54ID4gMC4wKSB8fFxuICAgICAgICAgICAgKHNjcmF0Y2hXcml0ZVBvc2l0aW9uLnggPiAwLjAgJiYgc2NyYXRjaFdyaXRlUHJldlBvc2l0aW9uLnggPCAwLjApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBDYXJ0ZXNpYW4zLmNsb25lKHNjcmF0Y2hXcml0ZVBvc2l0aW9uLCBzY3JhdGNoV3JpdGVQcmV2UG9zaXRpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIChzY3JhdGNoV3JpdGVQb3NpdGlvbi54IDwgMC4wICYmXG4gICAgICAgICAgICAgIHNjcmF0Y2hXcml0ZU5leHRQb3NpdGlvbi54ID4gMC4wKSB8fFxuICAgICAgICAgICAgKHNjcmF0Y2hXcml0ZVBvc2l0aW9uLnggPiAwLjAgJiYgc2NyYXRjaFdyaXRlTmV4dFBvc2l0aW9uLnggPCAwLjApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBDYXJ0ZXNpYW4zLmNsb25lKHNjcmF0Y2hXcml0ZVBvc2l0aW9uLCBzY3JhdGNoV3JpdGVOZXh0UG9zaXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnRKID0gc2VnbWVudFN0YXJ0ID8gMiA6IDA7XG4gICAgICB2YXIgZW5kSiA9IHNlZ21lbnRFbmQgPyAyIDogNDtcblxuICAgICAgZm9yICh2YXIgaiA9IHN0YXJ0SjsgaiA8IGVuZEo7ICsraikge1xuICAgICAgICBFbmNvZGVkQ2FydGVzaWFuMy53cml0ZUVsZW1lbnRzKFxuICAgICAgICAgIHNjcmF0Y2hXcml0ZVBvc2l0aW9uLFxuICAgICAgICAgIHBvc2l0aW9uQXJyYXksXG4gICAgICAgICAgcG9zaXRpb25JbmRleFxuICAgICAgICApO1xuICAgICAgICBFbmNvZGVkQ2FydGVzaWFuMy53cml0ZUVsZW1lbnRzKFxuICAgICAgICAgIHNjcmF0Y2hXcml0ZVByZXZQb3NpdGlvbixcbiAgICAgICAgICBwb3NpdGlvbkFycmF5LFxuICAgICAgICAgIHBvc2l0aW9uSW5kZXggKyA2XG4gICAgICAgICk7XG4gICAgICAgIEVuY29kZWRDYXJ0ZXNpYW4zLndyaXRlRWxlbWVudHMoXG4gICAgICAgICAgc2NyYXRjaFdyaXRlTmV4dFBvc2l0aW9uLFxuICAgICAgICAgIHBvc2l0aW9uQXJyYXksXG4gICAgICAgICAgcG9zaXRpb25JbmRleCArIDEyXG4gICAgICAgICk7XG4gICAgICAgIHBvc2l0aW9uSW5kZXggKz0gNiAqIDM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcG9zaXRpb25CdWZmZXIuY29weUZyb21BcnJheVZpZXcoXG4gICAgICBwb3NpdGlvbkFycmF5LFxuICAgICAgNiAqIDMgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQgKiBpbmRleFxuICAgICk7XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZUNvbGxlY3Rpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///56764\n')},54052:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96037);\n/* harmony import */ var _Core_VertexFormat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67252);\n/* harmony import */ var _Shaders_Appearances_PerInstanceFlatColorAppearanceFS_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(76257);\n/* harmony import */ var _Shaders_Appearances_PolylineColorAppearanceVS_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12120);\n/* harmony import */ var _Shaders_PolylineCommon_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(94373);\n/* harmony import */ var _Appearance_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12804);\n\n\n\n\n\n\n\n\nvar defaultVertexShaderSource =\n  _Shaders_PolylineCommon_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z + "\\n" + _Shaders_Appearances_PolylineColorAppearanceVS_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z;\nvar defaultFragmentShaderSource = _Shaders_Appearances_PerInstanceFlatColorAppearanceFS_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z;\n\nif (!_Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isInternetExplorer */ .Z.isInternetExplorer()) {\n  defaultVertexShaderSource =\n    "#define CLIP_POLYLINE \\n" + defaultVertexShaderSource;\n}\n\n/**\n * An appearance for {@link GeometryInstance} instances with color attributes and\n * {@link PolylineGeometry} or {@link GroundPolylineGeometry}.\n * This allows several geometry instances, each with a different color, to\n * be drawn with the same {@link Primitive}.\n *\n * @alias PolylineColorAppearance\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Boolean} [options.translucent=true] When <code>true</code>, the geometry is expected to appear translucent so {@link PolylineColorAppearance#renderState} has alpha blending enabled.\n * @param {String} [options.vertexShaderSource] Optional GLSL vertex shader source to override the default vertex shader.\n * @param {String} [options.fragmentShaderSource] Optional GLSL fragment shader source to override the default fragment shader.\n * @param {Object} [options.renderState] Optional render state to override the default render state.\n *\n * @example\n * // A solid white line segment\n * var primitive = new Cesium.Primitive({\n *   geometryInstances : new Cesium.GeometryInstance({\n *     geometry : new Cesium.PolylineGeometry({\n *       positions : Cesium.Cartesian3.fromDegreesArray([\n *         0.0, 0.0,\n *         5.0, 0.0\n *       ]),\n *       width : 10.0,\n *       vertexFormat : Cesium.PolylineColorAppearance.VERTEX_FORMAT\n *     }),\n *     attributes : {\n *       color : Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(1.0, 1.0, 1.0, 1.0))\n *     }\n *   }),\n *   appearance : new Cesium.PolylineColorAppearance({\n *     translucent : false\n *   })\n * });\n */\nfunction PolylineColorAppearance(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  var translucent = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options.translucent, true);\n  var closed = false;\n  var vertexFormat = PolylineColorAppearance.VERTEX_FORMAT;\n\n  /**\n   * This property is part of the {@link Appearance} interface, but is not\n   * used by {@link PolylineColorAppearance} since a fully custom fragment shader is used.\n   *\n   * @type Material\n   *\n   * @default undefined\n   */\n  this.material = undefined;\n\n  /**\n   * When <code>true</code>, the geometry is expected to appear translucent so\n   * {@link PolylineColorAppearance#renderState} has alpha blending enabled.\n   *\n   * @type {Boolean}\n   *\n   * @default true\n   */\n  this.translucent = translucent;\n\n  this._vertexShaderSource = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    options.vertexShaderSource,\n    defaultVertexShaderSource\n  );\n  this._fragmentShaderSource = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    options.fragmentShaderSource,\n    defaultFragmentShaderSource\n  );\n  this._renderState = _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getDefaultRenderState */ .Z.getDefaultRenderState(\n    translucent,\n    closed,\n    options.renderState\n  );\n  this._closed = closed;\n\n  // Non-derived members\n\n  this._vertexFormat = vertexFormat;\n}\n\nObject.defineProperties(PolylineColorAppearance.prototype, {\n  /**\n   * The GLSL source code for the vertex shader.\n   *\n   * @memberof PolylineColorAppearance.prototype\n   *\n   * @type {String}\n   * @readonly\n   */\n  vertexShaderSource: {\n    get: function () {\n      return this._vertexShaderSource;\n    },\n  },\n\n  /**\n   * The GLSL source code for the fragment shader.\n   *\n   * @memberof PolylineColorAppearance.prototype\n   *\n   * @type {String}\n   * @readonly\n   */\n  fragmentShaderSource: {\n    get: function () {\n      return this._fragmentShaderSource;\n    },\n  },\n\n  /**\n   * The WebGL fixed-function state to use when rendering the geometry.\n   * <p>\n   * The render state can be explicitly defined when constructing a {@link PolylineColorAppearance}\n   * instance, or it is set implicitly via {@link PolylineColorAppearance#translucent}.\n   * </p>\n   *\n   * @memberof PolylineColorAppearance.prototype\n   *\n   * @type {Object}\n   * @readonly\n   */\n  renderState: {\n    get: function () {\n      return this._renderState;\n    },\n  },\n\n  /**\n   * When <code>true</code>, the geometry is expected to be closed so\n   * {@link PolylineColorAppearance#renderState} has backface culling enabled.\n   * This is always <code>false</code> for <code>PolylineColorAppearance</code>.\n   *\n   * @memberof PolylineColorAppearance.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  closed: {\n    get: function () {\n      return this._closed;\n    },\n  },\n\n  /**\n   * The {@link VertexFormat} that this appearance instance is compatible with.\n   * A geometry can have more vertex attributes and still be compatible - at a\n   * potential performance cost - but it can\'t have less.\n   *\n   * @memberof PolylineColorAppearance.prototype\n   *\n   * @type VertexFormat\n   * @readonly\n   *\n   * @default {@link PolylineColorAppearance.VERTEX_FORMAT}\n   */\n  vertexFormat: {\n    get: function () {\n      return this._vertexFormat;\n    },\n  },\n});\n\n/**\n * The {@link VertexFormat} that all {@link PolylineColorAppearance} instances\n * are compatible with. This requires only a <code>position</code> attribute.\n *\n * @type VertexFormat\n *\n * @constant\n */\nPolylineColorAppearance.VERTEX_FORMAT = _Core_VertexFormat_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].POSITION_ONLY */ .Z.POSITION_ONLY;\n\n/**\n * Procedurally creates the full GLSL fragment shader source.\n *\n * @function\n *\n * @returns {String} The full GLSL fragment shader source.\n */\nPolylineColorAppearance.prototype.getFragmentShaderSource =\n  _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].prototype.getFragmentShaderSource */ .Z.prototype.getFragmentShaderSource;\n\n/**\n * Determines if the geometry is translucent based on {@link PolylineColorAppearance#translucent}.\n *\n * @function\n *\n * @returns {Boolean} <code>true</code> if the appearance is translucent.\n */\nPolylineColorAppearance.prototype.isTranslucent =\n  _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].prototype.isTranslucent */ .Z.prototype.isTranslucent;\n\n/**\n * Creates a render state.  This is not the final render state instance; instead,\n * it can contain a subset of render state properties identical to the render state\n * created in the context.\n *\n * @function\n *\n * @returns {Object} The render state.\n */\nPolylineColorAppearance.prototype.getRenderState =\n  _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].prototype.getRenderState */ .Z.prototype.getRenderState;\n/* harmony default export */ __webpack_exports__["Z"] = (PolylineColorAppearance);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQwNTIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDtBQUNRO0FBQ1I7QUFDdUQ7QUFDZDtBQUNsQztBQUNqQjs7QUFFekM7QUFDQSxFQUFFLDJFQUFjLFVBQVUsa0dBQXlCO0FBQ25ELGtDQUFrQyx5R0FBZ0M7O0FBRWxFLEtBQUssZ0hBQW1DO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUMsSUFBSSx3QkFBd0IsSUFBSSw2QkFBNkI7QUFDN0Q7QUFDQSwyQkFBMkIsZ0JBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUyxzR0FBc0csMkNBQTJDO0FBQ3JLLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBLFlBQVksMEVBQVksVUFBVSxnR0FBeUI7O0FBRTNELG9CQUFvQiwwRUFBWTtBQUNoQztBQUNBOztBQUVBO0FBQ0EsbUNBQW1DLGtCQUFrQjtBQUNyRCxjQUFjLCtCQUErQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU0sMkNBQTJDO0FBQ2pEO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZCQUE2QiwwRUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMEVBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDJHQUFnQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxxRUFBcUU7QUFDckUsNENBQTRDLDBDQUEwQztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBLE1BQU0sMkNBQTJDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQSxVQUFVLG9CQUFvQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0EsUUFBUSxvQkFBb0IsVUFBVSwrQkFBK0I7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGtHQUEwQjs7QUFFbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0EsRUFBRSxtSUFBNEM7O0FBRTlDO0FBQ0EsdURBQXVELDBDQUEwQztBQUNqRztBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBLEVBQUUsK0dBQWtDOztBQUVwQztBQUNBLHlFQUF5RTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQSxFQUFFLGlIQUFtQztBQUNyQyx5REFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Qb2x5bGluZUNvbG9yQXBwZWFyYW5jZS5qcz9kOGYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgRmVhdHVyZURldGVjdGlvbiBmcm9tIFwiLi4vQ29yZS9GZWF0dXJlRGV0ZWN0aW9uLmpzXCI7XG5pbXBvcnQgVmVydGV4Rm9ybWF0IGZyb20gXCIuLi9Db3JlL1ZlcnRleEZvcm1hdC5qc1wiO1xuaW1wb3J0IFBlckluc3RhbmNlRmxhdENvbG9yQXBwZWFyYW5jZUZTIGZyb20gXCIuLi9TaGFkZXJzL0FwcGVhcmFuY2VzL1Blckluc3RhbmNlRmxhdENvbG9yQXBwZWFyYW5jZUZTLmpzXCI7XG5pbXBvcnQgUG9seWxpbmVDb2xvckFwcGVhcmFuY2VWUyBmcm9tIFwiLi4vU2hhZGVycy9BcHBlYXJhbmNlcy9Qb2x5bGluZUNvbG9yQXBwZWFyYW5jZVZTLmpzXCI7XG5pbXBvcnQgUG9seWxpbmVDb21tb24gZnJvbSBcIi4uL1NoYWRlcnMvUG9seWxpbmVDb21tb24uanNcIjtcbmltcG9ydCBBcHBlYXJhbmNlIGZyb20gXCIuL0FwcGVhcmFuY2UuanNcIjtcblxudmFyIGRlZmF1bHRWZXJ0ZXhTaGFkZXJTb3VyY2UgPVxuICBQb2x5bGluZUNvbW1vbiArIFwiXFxuXCIgKyBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZVZTO1xudmFyIGRlZmF1bHRGcmFnbWVudFNoYWRlclNvdXJjZSA9IFBlckluc3RhbmNlRmxhdENvbG9yQXBwZWFyYW5jZUZTO1xuXG5pZiAoIUZlYXR1cmVEZXRlY3Rpb24uaXNJbnRlcm5ldEV4cGxvcmVyKCkpIHtcbiAgZGVmYXVsdFZlcnRleFNoYWRlclNvdXJjZSA9XG4gICAgXCIjZGVmaW5lIENMSVBfUE9MWUxJTkUgXFxuXCIgKyBkZWZhdWx0VmVydGV4U2hhZGVyU291cmNlO1xufVxuXG4vKipcbiAqIEFuIGFwcGVhcmFuY2UgZm9yIHtAbGluayBHZW9tZXRyeUluc3RhbmNlfSBpbnN0YW5jZXMgd2l0aCBjb2xvciBhdHRyaWJ1dGVzIGFuZFxuICoge0BsaW5rIFBvbHlsaW5lR2VvbWV0cnl9IG9yIHtAbGluayBHcm91bmRQb2x5bGluZUdlb21ldHJ5fS5cbiAqIFRoaXMgYWxsb3dzIHNldmVyYWwgZ2VvbWV0cnkgaW5zdGFuY2VzLCBlYWNoIHdpdGggYSBkaWZmZXJlbnQgY29sb3IsIHRvXG4gKiBiZSBkcmF3biB3aXRoIHRoZSBzYW1lIHtAbGluayBQcmltaXRpdmV9LlxuICpcbiAqIEBhbGlhcyBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnRyYW5zbHVjZW50PXRydWVdIFdoZW4gPGNvZGU+dHJ1ZTwvY29kZT4sIHRoZSBnZW9tZXRyeSBpcyBleHBlY3RlZCB0byBhcHBlYXIgdHJhbnNsdWNlbnQgc28ge0BsaW5rIFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlI3JlbmRlclN0YXRlfSBoYXMgYWxwaGEgYmxlbmRpbmcgZW5hYmxlZC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy52ZXJ0ZXhTaGFkZXJTb3VyY2VdIE9wdGlvbmFsIEdMU0wgdmVydGV4IHNoYWRlciBzb3VyY2UgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgdmVydGV4IHNoYWRlci5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5mcmFnbWVudFNoYWRlclNvdXJjZV0gT3B0aW9uYWwgR0xTTCBmcmFnbWVudCBzaGFkZXIgc291cmNlIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGZyYWdtZW50IHNoYWRlci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5yZW5kZXJTdGF0ZV0gT3B0aW9uYWwgcmVuZGVyIHN0YXRlIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHJlbmRlciBzdGF0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQSBzb2xpZCB3aGl0ZSBsaW5lIHNlZ21lbnRcbiAqIHZhciBwcmltaXRpdmUgPSBuZXcgQ2VzaXVtLlByaW1pdGl2ZSh7XG4gKiAgIGdlb21ldHJ5SW5zdGFuY2VzIDogbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAqICAgICBnZW9tZXRyeSA6IG5ldyBDZXNpdW0uUG9seWxpbmVHZW9tZXRyeSh7XG4gKiAgICAgICBwb3NpdGlvbnMgOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAgICAgMC4wLCAwLjAsXG4gKiAgICAgICAgIDUuMCwgMC4wXG4gKiAgICAgICBdKSxcbiAqICAgICAgIHdpZHRoIDogMTAuMCxcbiAqICAgICAgIHZlcnRleEZvcm1hdCA6IENlc2l1bS5Qb2x5bGluZUNvbG9yQXBwZWFyYW5jZS5WRVJURVhfRk9STUFUXG4gKiAgICAgfSksXG4gKiAgICAgYXR0cmlidXRlcyA6IHtcbiAqICAgICAgIGNvbG9yIDogQ2VzaXVtLkNvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5mcm9tQ29sb3IobmV3IENlc2l1bS5Db2xvcigxLjAsIDEuMCwgMS4wLCAxLjApKVxuICogICAgIH1cbiAqICAgfSksXG4gKiAgIGFwcGVhcmFuY2UgOiBuZXcgQ2VzaXVtLlBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlKHtcbiAqICAgICB0cmFuc2x1Y2VudCA6IGZhbHNlXG4gKiAgIH0pXG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gUG9seWxpbmVDb2xvckFwcGVhcmFuY2Uob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHZhciB0cmFuc2x1Y2VudCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRyYW5zbHVjZW50LCB0cnVlKTtcbiAgdmFyIGNsb3NlZCA9IGZhbHNlO1xuICB2YXIgdmVydGV4Rm9ybWF0ID0gUG9seWxpbmVDb2xvckFwcGVhcmFuY2UuVkVSVEVYX0ZPUk1BVDtcblxuICAvKipcbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBwYXJ0IG9mIHRoZSB7QGxpbmsgQXBwZWFyYW5jZX0gaW50ZXJmYWNlLCBidXQgaXMgbm90XG4gICAqIHVzZWQgYnkge0BsaW5rIFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlfSBzaW5jZSBhIGZ1bGx5IGN1c3RvbSBmcmFnbWVudCBzaGFkZXIgaXMgdXNlZC5cbiAgICpcbiAgICogQHR5cGUgTWF0ZXJpYWxcbiAgICpcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLm1hdGVyaWFsID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCB0aGUgZ2VvbWV0cnkgaXMgZXhwZWN0ZWQgdG8gYXBwZWFyIHRyYW5zbHVjZW50IHNvXG4gICAqIHtAbGluayBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZSNyZW5kZXJTdGF0ZX0gaGFzIGFscGhhIGJsZW5kaW5nIGVuYWJsZWQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICB0aGlzLnRyYW5zbHVjZW50ID0gdHJhbnNsdWNlbnQ7XG5cbiAgdGhpcy5fdmVydGV4U2hhZGVyU291cmNlID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMudmVydGV4U2hhZGVyU291cmNlLFxuICAgIGRlZmF1bHRWZXJ0ZXhTaGFkZXJTb3VyY2VcbiAgKTtcbiAgdGhpcy5fZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5mcmFnbWVudFNoYWRlclNvdXJjZSxcbiAgICBkZWZhdWx0RnJhZ21lbnRTaGFkZXJTb3VyY2VcbiAgKTtcbiAgdGhpcy5fcmVuZGVyU3RhdGUgPSBBcHBlYXJhbmNlLmdldERlZmF1bHRSZW5kZXJTdGF0ZShcbiAgICB0cmFuc2x1Y2VudCxcbiAgICBjbG9zZWQsXG4gICAgb3B0aW9ucy5yZW5kZXJTdGF0ZVxuICApO1xuICB0aGlzLl9jbG9zZWQgPSBjbG9zZWQ7XG5cbiAgLy8gTm9uLWRlcml2ZWQgbWVtYmVyc1xuXG4gIHRoaXMuX3ZlcnRleEZvcm1hdCA9IHZlcnRleEZvcm1hdDtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUG9seWxpbmVDb2xvckFwcGVhcmFuY2UucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBUaGUgR0xTTCBzb3VyY2UgY29kZSBmb3IgdGhlIHZlcnRleCBzaGFkZXIuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB2ZXJ0ZXhTaGFkZXJTb3VyY2U6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl92ZXJ0ZXhTaGFkZXJTb3VyY2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogVGhlIEdMU0wgc291cmNlIGNvZGUgZm9yIHRoZSBmcmFnbWVudCBzaGFkZXIuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBmcmFnbWVudFNoYWRlclNvdXJjZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZyYWdtZW50U2hhZGVyU291cmNlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBXZWJHTCBmaXhlZC1mdW5jdGlvbiBzdGF0ZSB0byB1c2Ugd2hlbiByZW5kZXJpbmcgdGhlIGdlb21ldHJ5LlxuICAgKiA8cD5cbiAgICogVGhlIHJlbmRlciBzdGF0ZSBjYW4gYmUgZXhwbGljaXRseSBkZWZpbmVkIHdoZW4gY29uc3RydWN0aW5nIGEge0BsaW5rIFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlfVxuICAgKiBpbnN0YW5jZSwgb3IgaXQgaXMgc2V0IGltcGxpY2l0bHkgdmlhIHtAbGluayBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZSN0cmFuc2x1Y2VudH0uXG4gICAqIDwvcD5cbiAgICpcbiAgICogQG1lbWJlcm9mIFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlbmRlclN0YXRlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVuZGVyU3RhdGU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIGdlb21ldHJ5IGlzIGV4cGVjdGVkIHRvIGJlIGNsb3NlZCBzb1xuICAgKiB7QGxpbmsgUG9seWxpbmVDb2xvckFwcGVhcmFuY2UjcmVuZGVyU3RhdGV9IGhhcyBiYWNrZmFjZSBjdWxsaW5nIGVuYWJsZWQuXG4gICAqIFRoaXMgaXMgYWx3YXlzIDxjb2RlPmZhbHNlPC9jb2RlPiBmb3IgPGNvZGU+UG9seWxpbmVDb2xvckFwcGVhcmFuY2U8L2NvZGU+LlxuICAgKlxuICAgKiBAbWVtYmVyb2YgUG9seWxpbmVDb2xvckFwcGVhcmFuY2UucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGNsb3NlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Nsb3NlZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUge0BsaW5rIFZlcnRleEZvcm1hdH0gdGhhdCB0aGlzIGFwcGVhcmFuY2UgaW5zdGFuY2UgaXMgY29tcGF0aWJsZSB3aXRoLlxuICAgKiBBIGdlb21ldHJ5IGNhbiBoYXZlIG1vcmUgdmVydGV4IGF0dHJpYnV0ZXMgYW5kIHN0aWxsIGJlIGNvbXBhdGlibGUgLSBhdCBhXG4gICAqIHBvdGVudGlhbCBwZXJmb3JtYW5jZSBjb3N0IC0gYnV0IGl0IGNhbid0IGhhdmUgbGVzcy5cbiAgICpcbiAgICogQG1lbWJlcm9mIFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSBWZXJ0ZXhGb3JtYXRcbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBkZWZhdWx0IHtAbGluayBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZS5WRVJURVhfRk9STUFUfVxuICAgKi9cbiAgdmVydGV4Rm9ybWF0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmVydGV4Rm9ybWF0O1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBUaGUge0BsaW5rIFZlcnRleEZvcm1hdH0gdGhhdCBhbGwge0BsaW5rIFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlfSBpbnN0YW5jZXNcbiAqIGFyZSBjb21wYXRpYmxlIHdpdGguIFRoaXMgcmVxdWlyZXMgb25seSBhIDxjb2RlPnBvc2l0aW9uPC9jb2RlPiBhdHRyaWJ1dGUuXG4gKlxuICogQHR5cGUgVmVydGV4Rm9ybWF0XG4gKlxuICogQGNvbnN0YW50XG4gKi9cblBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlLlZFUlRFWF9GT1JNQVQgPSBWZXJ0ZXhGb3JtYXQuUE9TSVRJT05fT05MWTtcblxuLyoqXG4gKiBQcm9jZWR1cmFsbHkgY3JlYXRlcyB0aGUgZnVsbCBHTFNMIGZyYWdtZW50IHNoYWRlciBzb3VyY2UuXG4gKlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIGZ1bGwgR0xTTCBmcmFnbWVudCBzaGFkZXIgc291cmNlLlxuICovXG5Qb2x5bGluZUNvbG9yQXBwZWFyYW5jZS5wcm90b3R5cGUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UgPVxuICBBcHBlYXJhbmNlLnByb3RvdHlwZS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBnZW9tZXRyeSBpcyB0cmFuc2x1Y2VudCBiYXNlZCBvbiB7QGxpbmsgUG9seWxpbmVDb2xvckFwcGVhcmFuY2UjdHJhbnNsdWNlbnR9LlxuICpcbiAqIEBmdW5jdGlvblxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgYXBwZWFyYW5jZSBpcyB0cmFuc2x1Y2VudC5cbiAqL1xuUG9seWxpbmVDb2xvckFwcGVhcmFuY2UucHJvdG90eXBlLmlzVHJhbnNsdWNlbnQgPVxuICBBcHBlYXJhbmNlLnByb3RvdHlwZS5pc1RyYW5zbHVjZW50O1xuXG4vKipcbiAqIENyZWF0ZXMgYSByZW5kZXIgc3RhdGUuICBUaGlzIGlzIG5vdCB0aGUgZmluYWwgcmVuZGVyIHN0YXRlIGluc3RhbmNlOyBpbnN0ZWFkLFxuICogaXQgY2FuIGNvbnRhaW4gYSBzdWJzZXQgb2YgcmVuZGVyIHN0YXRlIHByb3BlcnRpZXMgaWRlbnRpY2FsIHRvIHRoZSByZW5kZXIgc3RhdGVcbiAqIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHJldHVybnMge09iamVjdH0gVGhlIHJlbmRlciBzdGF0ZS5cbiAqL1xuUG9seWxpbmVDb2xvckFwcGVhcmFuY2UucHJvdG90eXBlLmdldFJlbmRlclN0YXRlID1cbiAgQXBwZWFyYW5jZS5wcm90b3R5cGUuZ2V0UmVuZGVyU3RhdGU7XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///54052\n')},13597:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(82982);\n/* harmony import */ var _Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96037);\n/* harmony import */ var _Core_VertexFormat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67252);\n/* harmony import */ var _Shaders_Appearances_PolylineMaterialAppearanceVS_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(93981);\n/* harmony import */ var _Shaders_PolylineCommon_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(94373);\n/* harmony import */ var _Shaders_PolylineFS_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(36449);\n/* harmony import */ var _Appearance_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12804);\n/* harmony import */ var _Material_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69592);\n\n\n\n\n\n\n\n\n\n\nvar defaultVertexShaderSource =\n  _Shaders_PolylineCommon_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z + "\\n" + _Shaders_Appearances_PolylineMaterialAppearanceVS_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z;\nvar defaultFragmentShaderSource = _Shaders_PolylineFS_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z;\n\nif (!_Core_FeatureDetection_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isInternetExplorer */ .Z.isInternetExplorer()) {\n  defaultVertexShaderSource =\n    "#define CLIP_POLYLINE \\n" + defaultVertexShaderSource;\n}\n\n/**\n * An appearance for {@link PolylineGeometry} that supports shading with materials.\n *\n * @alias PolylineMaterialAppearance\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Boolean} [options.translucent=true] When <code>true</code>, the geometry is expected to appear translucent so {@link PolylineMaterialAppearance#renderState} has alpha blending enabled.\n * @param {Material} [options.material=Material.ColorType] The material used to determine the fragment color.\n * @param {String} [options.vertexShaderSource] Optional GLSL vertex shader source to override the default vertex shader.\n * @param {String} [options.fragmentShaderSource] Optional GLSL fragment shader source to override the default fragment shader.\n * @param {Object} [options.renderState] Optional render state to override the default render state.\n *\n * @see {@link https://github.com/CesiumGS/cesium/wiki/Fabric|Fabric}\n *\n * @example\n * var primitive = new Cesium.Primitive({\n *   geometryInstances : new Cesium.GeometryInstance({\n *     geometry : new Cesium.PolylineGeometry({\n *       positions : Cesium.Cartesian3.fromDegreesArray([\n *         0.0, 0.0,\n *         5.0, 0.0\n *       ]),\n *       width : 10.0,\n *       vertexFormat : Cesium.PolylineMaterialAppearance.VERTEX_FORMAT\n *     })\n *   }),\n *   appearance : new Cesium.PolylineMaterialAppearance({\n *     material : Cesium.Material.fromType(\'Color\')\n *   })\n * });\n */\nfunction PolylineMaterialAppearance(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  var translucent = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options.translucent, true);\n  var closed = false;\n  var vertexFormat = PolylineMaterialAppearance.VERTEX_FORMAT;\n\n  /**\n   * The material used to determine the fragment color.  Unlike other {@link PolylineMaterialAppearance}\n   * properties, this is not read-only, so an appearance\'s material can change on the fly.\n   *\n   * @type Material\n   *\n   * @default {@link Material.ColorType}\n   *\n   * @see {@link https://github.com/CesiumGS/cesium/wiki/Fabric|Fabric}\n   */\n  this.material = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options.material)\n    ? options.material\n    : _Material_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fromType */ .Z.fromType(_Material_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ColorType */ .Z.ColorType);\n\n  /**\n   * When <code>true</code>, the geometry is expected to appear translucent so\n   * {@link PolylineMaterialAppearance#renderState} has alpha blending enabled.\n   *\n   * @type {Boolean}\n   *\n   * @default true\n   */\n  this.translucent = translucent;\n\n  this._vertexShaderSource = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    options.vertexShaderSource,\n    defaultVertexShaderSource\n  );\n  this._fragmentShaderSource = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    options.fragmentShaderSource,\n    defaultFragmentShaderSource\n  );\n  this._renderState = _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getDefaultRenderState */ .Z.getDefaultRenderState(\n    translucent,\n    closed,\n    options.renderState\n  );\n  this._closed = closed;\n\n  // Non-derived members\n\n  this._vertexFormat = vertexFormat;\n}\n\nObject.defineProperties(PolylineMaterialAppearance.prototype, {\n  /**\n   * The GLSL source code for the vertex shader.\n   *\n   * @memberof PolylineMaterialAppearance.prototype\n   *\n   * @type {String}\n   * @readonly\n   */\n  vertexShaderSource: {\n    get: function () {\n      var vs = this._vertexShaderSource;\n      if (\n        this.material.shaderSource.search(\n          /varying\\s+float\\s+v_polylineAngle;/g\n        ) !== -1\n      ) {\n        vs = "#define POLYLINE_DASH\\n" + vs;\n      }\n      return vs;\n    },\n  },\n\n  /**\n   * The GLSL source code for the fragment shader.\n   *\n   * @memberof PolylineMaterialAppearance.prototype\n   *\n   * @type {String}\n   * @readonly\n   */\n  fragmentShaderSource: {\n    get: function () {\n      return this._fragmentShaderSource;\n    },\n  },\n\n  /**\n   * The WebGL fixed-function state to use when rendering the geometry.\n   * <p>\n   * The render state can be explicitly defined when constructing a {@link PolylineMaterialAppearance}\n   * instance, or it is set implicitly via {@link PolylineMaterialAppearance#translucent}\n   * and {@link PolylineMaterialAppearance#closed}.\n   * </p>\n   *\n   * @memberof PolylineMaterialAppearance.prototype\n   *\n   * @type {Object}\n   * @readonly\n   */\n  renderState: {\n    get: function () {\n      return this._renderState;\n    },\n  },\n\n  /**\n   * When <code>true</code>, the geometry is expected to be closed so\n   * {@link PolylineMaterialAppearance#renderState} has backface culling enabled.\n   * This is always <code>false</code> for <code>PolylineMaterialAppearance</code>.\n   *\n   * @memberof PolylineMaterialAppearance.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  closed: {\n    get: function () {\n      return this._closed;\n    },\n  },\n\n  /**\n   * The {@link VertexFormat} that this appearance instance is compatible with.\n   * A geometry can have more vertex attributes and still be compatible - at a\n   * potential performance cost - but it can\'t have less.\n   *\n   * @memberof PolylineMaterialAppearance.prototype\n   *\n   * @type VertexFormat\n   * @readonly\n   *\n   * @default {@link PolylineMaterialAppearance.VERTEX_FORMAT}\n   */\n  vertexFormat: {\n    get: function () {\n      return this._vertexFormat;\n    },\n  },\n});\n\n/**\n * The {@link VertexFormat} that all {@link PolylineMaterialAppearance} instances\n * are compatible with. This requires <code>position</code> and <code>st</code> attributes.\n *\n * @type VertexFormat\n *\n * @constant\n */\nPolylineMaterialAppearance.VERTEX_FORMAT = _Core_VertexFormat_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].POSITION_AND_ST */ .Z.POSITION_AND_ST;\n\n/**\n * Procedurally creates the full GLSL fragment shader source.  For {@link PolylineMaterialAppearance},\n * this is derived from {@link PolylineMaterialAppearance#fragmentShaderSource} and {@link PolylineMaterialAppearance#material}.\n *\n * @function\n *\n * @returns {String} The full GLSL fragment shader source.\n */\nPolylineMaterialAppearance.prototype.getFragmentShaderSource =\n  _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].prototype.getFragmentShaderSource */ .Z.prototype.getFragmentShaderSource;\n\n/**\n * Determines if the geometry is translucent based on {@link PolylineMaterialAppearance#translucent} and {@link Material#isTranslucent}.\n *\n * @function\n *\n * @returns {Boolean} <code>true</code> if the appearance is translucent.\n */\nPolylineMaterialAppearance.prototype.isTranslucent =\n  _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].prototype.isTranslucent */ .Z.prototype.isTranslucent;\n\n/**\n * Creates a render state.  This is not the final render state instance; instead,\n * it can contain a subset of render state properties identical to the render state\n * created in the context.\n *\n * @function\n *\n * @returns {Object} The render state.\n */\nPolylineMaterialAppearance.prototype.getRenderState =\n  _Appearance_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].prototype.getRenderState */ .Z.prototype.getRenderState;\n/* harmony default export */ __webpack_exports__["Z"] = (PolylineMaterialAppearance);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDckI7QUFDQTtBQUNBLEVBQUUsaUhBQW1DO0FBQ3JDLHlEQUFlLDBCQUEwQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1BvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlLmpzPzg0NmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBGZWF0dXJlRGV0ZWN0aW9uIGZyb20gXCIuLi9Db3JlL0ZlYXR1cmVEZXRlY3Rpb24uanNcIjtcbmltcG9ydCBWZXJ0ZXhGb3JtYXQgZnJvbSBcIi4uL0NvcmUvVmVydGV4Rm9ybWF0LmpzXCI7XG5pbXBvcnQgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2VWUyBmcm9tIFwiLi4vU2hhZGVycy9BcHBlYXJhbmNlcy9Qb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZVZTLmpzXCI7XG5pbXBvcnQgUG9seWxpbmVDb21tb24gZnJvbSBcIi4uL1NoYWRlcnMvUG9seWxpbmVDb21tb24uanNcIjtcbmltcG9ydCBQb2x5bGluZUZTIGZyb20gXCIuLi9TaGFkZXJzL1BvbHlsaW5lRlMuanNcIjtcbmltcG9ydCBBcHBlYXJhbmNlIGZyb20gXCIuL0FwcGVhcmFuY2UuanNcIjtcbmltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi9NYXRlcmlhbC5qc1wiO1xuXG52YXIgZGVmYXVsdFZlcnRleFNoYWRlclNvdXJjZSA9XG4gIFBvbHlsaW5lQ29tbW9uICsgXCJcXG5cIiArIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlVlM7XG52YXIgZGVmYXVsdEZyYWdtZW50U2hhZGVyU291cmNlID0gUG9seWxpbmVGUztcblxuaWYgKCFGZWF0dXJlRGV0ZWN0aW9uLmlzSW50ZXJuZXRFeHBsb3JlcigpKSB7XG4gIGRlZmF1bHRWZXJ0ZXhTaGFkZXJTb3VyY2UgPVxuICAgIFwiI2RlZmluZSBDTElQX1BPTFlMSU5FIFxcblwiICsgZGVmYXVsdFZlcnRleFNoYWRlclNvdXJjZTtcbn1cblxuLyoqXG4gKiBBbiBhcHBlYXJhbmNlIGZvciB7QGxpbmsgUG9seWxpbmVHZW9tZXRyeX0gdGhhdCBzdXBwb3J0cyBzaGFkaW5nIHdpdGggbWF0ZXJpYWxzLlxuICpcbiAqIEBhbGlhcyBQb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnRyYW5zbHVjZW50PXRydWVdIFdoZW4gPGNvZGU+dHJ1ZTwvY29kZT4sIHRoZSBnZW9tZXRyeSBpcyBleHBlY3RlZCB0byBhcHBlYXIgdHJhbnNsdWNlbnQgc28ge0BsaW5rIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlI3JlbmRlclN0YXRlfSBoYXMgYWxwaGEgYmxlbmRpbmcgZW5hYmxlZC5cbiAqIEBwYXJhbSB7TWF0ZXJpYWx9IFtvcHRpb25zLm1hdGVyaWFsPU1hdGVyaWFsLkNvbG9yVHlwZV0gVGhlIG1hdGVyaWFsIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBmcmFnbWVudCBjb2xvci5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy52ZXJ0ZXhTaGFkZXJTb3VyY2VdIE9wdGlvbmFsIEdMU0wgdmVydGV4IHNoYWRlciBzb3VyY2UgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgdmVydGV4IHNoYWRlci5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5mcmFnbWVudFNoYWRlclNvdXJjZV0gT3B0aW9uYWwgR0xTTCBmcmFnbWVudCBzaGFkZXIgc291cmNlIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGZyYWdtZW50IHNoYWRlci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5yZW5kZXJTdGF0ZV0gT3B0aW9uYWwgcmVuZGVyIHN0YXRlIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHJlbmRlciBzdGF0ZS5cbiAqXG4gKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvY2VzaXVtL3dpa2kvRmFicmljfEZhYnJpY31cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlKHtcbiAqICAgZ2VvbWV0cnlJbnN0YW5jZXMgOiBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xuICogICAgIGdlb21ldHJ5IDogbmV3IENlc2l1bS5Qb2x5bGluZUdlb21ldHJ5KHtcbiAqICAgICAgIHBvc2l0aW9ucyA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgICAgICAwLjAsIDAuMCxcbiAqICAgICAgICAgNS4wLCAwLjBcbiAqICAgICAgIF0pLFxuICogICAgICAgd2lkdGggOiAxMC4wLFxuICogICAgICAgdmVydGV4Rm9ybWF0IDogQ2VzaXVtLlBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlLlZFUlRFWF9GT1JNQVRcbiAqICAgICB9KVxuICogICB9KSxcbiAqICAgYXBwZWFyYW5jZSA6IG5ldyBDZXNpdW0uUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2Uoe1xuICogICAgIG1hdGVyaWFsIDogQ2VzaXVtLk1hdGVyaWFsLmZyb21UeXBlKCdDb2xvcicpXG4gKiAgIH0pXG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2Uob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHZhciB0cmFuc2x1Y2VudCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRyYW5zbHVjZW50LCB0cnVlKTtcbiAgdmFyIGNsb3NlZCA9IGZhbHNlO1xuICB2YXIgdmVydGV4Rm9ybWF0ID0gUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UuVkVSVEVYX0ZPUk1BVDtcblxuICAvKipcbiAgICogVGhlIG1hdGVyaWFsIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBmcmFnbWVudCBjb2xvci4gIFVubGlrZSBvdGhlciB7QGxpbmsgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2V9XG4gICAqIHByb3BlcnRpZXMsIHRoaXMgaXMgbm90IHJlYWQtb25seSwgc28gYW4gYXBwZWFyYW5jZSdzIG1hdGVyaWFsIGNhbiBjaGFuZ2Ugb24gdGhlIGZseS5cbiAgICpcbiAgICogQHR5cGUgTWF0ZXJpYWxcbiAgICpcbiAgICogQGRlZmF1bHQge0BsaW5rIE1hdGVyaWFsLkNvbG9yVHlwZX1cbiAgICpcbiAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0Nlc2l1bUdTL2Nlc2l1bS93aWtpL0ZhYnJpY3xGYWJyaWN9XG4gICAqL1xuICB0aGlzLm1hdGVyaWFsID0gZGVmaW5lZChvcHRpb25zLm1hdGVyaWFsKVxuICAgID8gb3B0aW9ucy5tYXRlcmlhbFxuICAgIDogTWF0ZXJpYWwuZnJvbVR5cGUoTWF0ZXJpYWwuQ29sb3JUeXBlKTtcblxuICAvKipcbiAgICogV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIGdlb21ldHJ5IGlzIGV4cGVjdGVkIHRvIGFwcGVhciB0cmFuc2x1Y2VudCBzb1xuICAgKiB7QGxpbmsgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UjcmVuZGVyU3RhdGV9IGhhcyBhbHBoYSBibGVuZGluZyBlbmFibGVkLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy50cmFuc2x1Y2VudCA9IHRyYW5zbHVjZW50O1xuXG4gIHRoaXMuX3ZlcnRleFNoYWRlclNvdXJjZSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLnZlcnRleFNoYWRlclNvdXJjZSxcbiAgICBkZWZhdWx0VmVydGV4U2hhZGVyU291cmNlXG4gICk7XG4gIHRoaXMuX2ZyYWdtZW50U2hhZGVyU291cmNlID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZnJhZ21lbnRTaGFkZXJTb3VyY2UsXG4gICAgZGVmYXVsdEZyYWdtZW50U2hhZGVyU291cmNlXG4gICk7XG4gIHRoaXMuX3JlbmRlclN0YXRlID0gQXBwZWFyYW5jZS5nZXREZWZhdWx0UmVuZGVyU3RhdGUoXG4gICAgdHJhbnNsdWNlbnQsXG4gICAgY2xvc2VkLFxuICAgIG9wdGlvbnMucmVuZGVyU3RhdGVcbiAgKTtcbiAgdGhpcy5fY2xvc2VkID0gY2xvc2VkO1xuXG4gIC8vIE5vbi1kZXJpdmVkIG1lbWJlcnNcblxuICB0aGlzLl92ZXJ0ZXhGb3JtYXQgPSB2ZXJ0ZXhGb3JtYXQ7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogVGhlIEdMU0wgc291cmNlIGNvZGUgZm9yIHRoZSB2ZXJ0ZXggc2hhZGVyLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdmVydGV4U2hhZGVyU291cmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdnMgPSB0aGlzLl92ZXJ0ZXhTaGFkZXJTb3VyY2U7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMubWF0ZXJpYWwuc2hhZGVyU291cmNlLnNlYXJjaChcbiAgICAgICAgICAvdmFyeWluZ1xccytmbG9hdFxccyt2X3BvbHlsaW5lQW5nbGU7L2dcbiAgICAgICAgKSAhPT0gLTFcbiAgICAgICkge1xuICAgICAgICB2cyA9IFwiI2RlZmluZSBQT0xZTElORV9EQVNIXFxuXCIgKyB2cztcbiAgICAgIH1cbiAgICAgIHJldHVybiB2cztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgR0xTTCBzb3VyY2UgY29kZSBmb3IgdGhlIGZyYWdtZW50IHNoYWRlci5cbiAgICpcbiAgICogQG1lbWJlcm9mIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGZyYWdtZW50U2hhZGVyU291cmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZnJhZ21lbnRTaGFkZXJTb3VyY2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogVGhlIFdlYkdMIGZpeGVkLWZ1bmN0aW9uIHN0YXRlIHRvIHVzZSB3aGVuIHJlbmRlcmluZyB0aGUgZ2VvbWV0cnkuXG4gICAqIDxwPlxuICAgKiBUaGUgcmVuZGVyIHN0YXRlIGNhbiBiZSBleHBsaWNpdGx5IGRlZmluZWQgd2hlbiBjb25zdHJ1Y3RpbmcgYSB7QGxpbmsgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2V9XG4gICAqIGluc3RhbmNlLCBvciBpdCBpcyBzZXQgaW1wbGljaXRseSB2aWEge0BsaW5rIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlI3RyYW5zbHVjZW50fVxuICAgKiBhbmQge0BsaW5rIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlI2Nsb3NlZH0uXG4gICAqIDwvcD5cbiAgICpcbiAgICogQG1lbWJlcm9mIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlbmRlclN0YXRlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVuZGVyU3RhdGU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIGdlb21ldHJ5IGlzIGV4cGVjdGVkIHRvIGJlIGNsb3NlZCBzb1xuICAgKiB7QGxpbmsgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UjcmVuZGVyU3RhdGV9IGhhcyBiYWNrZmFjZSBjdWxsaW5nIGVuYWJsZWQuXG4gICAqIFRoaXMgaXMgYWx3YXlzIDxjb2RlPmZhbHNlPC9jb2RlPiBmb3IgPGNvZGU+UG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2U8L2NvZGU+LlxuICAgKlxuICAgKiBAbWVtYmVyb2YgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGNsb3NlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Nsb3NlZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUge0BsaW5rIFZlcnRleEZvcm1hdH0gdGhhdCB0aGlzIGFwcGVhcmFuY2UgaW5zdGFuY2UgaXMgY29tcGF0aWJsZSB3aXRoLlxuICAgKiBBIGdlb21ldHJ5IGNhbiBoYXZlIG1vcmUgdmVydGV4IGF0dHJpYnV0ZXMgYW5kIHN0aWxsIGJlIGNvbXBhdGlibGUgLSBhdCBhXG4gICAqIHBvdGVudGlhbCBwZXJmb3JtYW5jZSBjb3N0IC0gYnV0IGl0IGNhbid0IGhhdmUgbGVzcy5cbiAgICpcbiAgICogQG1lbWJlcm9mIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSBWZXJ0ZXhGb3JtYXRcbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBkZWZhdWx0IHtAbGluayBQb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZS5WRVJURVhfRk9STUFUfVxuICAgKi9cbiAgdmVydGV4Rm9ybWF0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmVydGV4Rm9ybWF0O1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBUaGUge0BsaW5rIFZlcnRleEZvcm1hdH0gdGhhdCBhbGwge0BsaW5rIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlfSBpbnN0YW5jZXNcbiAqIGFyZSBjb21wYXRpYmxlIHdpdGguIFRoaXMgcmVxdWlyZXMgPGNvZGU+cG9zaXRpb248L2NvZGU+IGFuZCA8Y29kZT5zdDwvY29kZT4gYXR0cmlidXRlcy5cbiAqXG4gKiBAdHlwZSBWZXJ0ZXhGb3JtYXRcbiAqXG4gKiBAY29uc3RhbnRcbiAqL1xuUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UuVkVSVEVYX0ZPUk1BVCA9IFZlcnRleEZvcm1hdC5QT1NJVElPTl9BTkRfU1Q7XG5cbi8qKlxuICogUHJvY2VkdXJhbGx5IGNyZWF0ZXMgdGhlIGZ1bGwgR0xTTCBmcmFnbWVudCBzaGFkZXIgc291cmNlLiAgRm9yIHtAbGluayBQb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZX0sXG4gKiB0aGlzIGlzIGRlcml2ZWQgZnJvbSB7QGxpbmsgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UjZnJhZ21lbnRTaGFkZXJTb3VyY2V9IGFuZCB7QGxpbmsgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UjbWF0ZXJpYWx9LlxuICpcbiAqIEBmdW5jdGlvblxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBmdWxsIEdMU0wgZnJhZ21lbnQgc2hhZGVyIHNvdXJjZS5cbiAqL1xuUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UucHJvdG90eXBlLmdldEZyYWdtZW50U2hhZGVyU291cmNlID1cbiAgQXBwZWFyYW5jZS5wcm90b3R5cGUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2U7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2VvbWV0cnkgaXMgdHJhbnNsdWNlbnQgYmFzZWQgb24ge0BsaW5rIFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlI3RyYW5zbHVjZW50fSBhbmQge0BsaW5rIE1hdGVyaWFsI2lzVHJhbnNsdWNlbnR9LlxuICpcbiAqIEBmdW5jdGlvblxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgYXBwZWFyYW5jZSBpcyB0cmFuc2x1Y2VudC5cbiAqL1xuUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UucHJvdG90eXBlLmlzVHJhbnNsdWNlbnQgPVxuICBBcHBlYXJhbmNlLnByb3RvdHlwZS5pc1RyYW5zbHVjZW50O1xuXG4vKipcbiAqIENyZWF0ZXMgYSByZW5kZXIgc3RhdGUuICBUaGlzIGlzIG5vdCB0aGUgZmluYWwgcmVuZGVyIHN0YXRlIGluc3RhbmNlOyBpbnN0ZWFkLFxuICogaXQgY2FuIGNvbnRhaW4gYSBzdWJzZXQgb2YgcmVuZGVyIHN0YXRlIHByb3BlcnRpZXMgaWRlbnRpY2FsIHRvIHRoZSByZW5kZXIgc3RhdGVcbiAqIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHJldHVybnMge09iamVjdH0gVGhlIHJlbmRlciBzdGF0ZS5cbiAqL1xuUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UucHJvdG90eXBlLmdldFJlbmRlclN0YXRlID1cbiAgQXBwZWFyYW5jZS5wcm90b3R5cGUuZ2V0UmVuZGVyU3RhdGU7XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13597\n')}}]);