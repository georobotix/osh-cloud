"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[5979],{87207:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14459);\n/* harmony import */ var _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(17964);\n/* harmony import */ var _PositionProperty_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(69188);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(40112);\n/* harmony import */ var _SampledProperty_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(23470);\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A {@link SampledProperty} which is also a {@link PositionProperty}.\n *\n * @alias SampledPositionProperty\n * @constructor\n *\n * @param {ReferenceFrame} [referenceFrame=ReferenceFrame.FIXED] The reference frame in which the position is defined.\n * @param {Number} [numberOfDerivatives=0] The number of derivatives that accompany each position; i.e. velocity, acceleration, etc...\n */\nfunction SampledPositionProperty(referenceFrame, numberOfDerivatives) {\n  numberOfDerivatives = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(numberOfDerivatives, 0);\n\n  var derivativeTypes;\n  if (numberOfDerivatives > 0) {\n    derivativeTypes = new Array(numberOfDerivatives);\n    for (var i = 0; i < numberOfDerivatives; i++) {\n      derivativeTypes[i] = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z;\n    }\n  }\n\n  this._numberOfDerivatives = numberOfDerivatives;\n  this._property = new _SampledProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z, derivativeTypes);\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n  this._referenceFrame = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(referenceFrame, _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].FIXED */ .Z.FIXED);\n\n  this._property._definitionChanged.addEventListener(function () {\n    this._definitionChanged.raiseEvent(this);\n  }, this);\n}\n\nObject.defineProperties(SampledPositionProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.  A property is considered\n   * constant if getValue always returns the same result for the current definition.\n   * @memberof SampledPositionProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return this._property.isConstant;\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * The definition is considered to have changed if a call to getValue would return\n   * a different result for the same time.\n   * @memberof SampledPositionProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n  /**\n   * Gets the reference frame in which the position is defined.\n   * @memberof SampledPositionProperty.prototype\n   * @type {ReferenceFrame}\n   * @default ReferenceFrame.FIXED;\n   */\n  referenceFrame: {\n    get: function () {\n      return this._referenceFrame;\n    },\n  },\n  /**\n   * Gets the degree of interpolation to perform when retrieving a value. Call <code>setInterpolationOptions</code> to set this.\n   * @memberof SampledPositionProperty.prototype\n   *\n   * @type {Number}\n   * @default 1\n   * @readonly\n   */\n  interpolationDegree: {\n    get: function () {\n      return this._property.interpolationDegree;\n    },\n  },\n  /**\n   * Gets the interpolation algorithm to use when retrieving a value. Call <code>setInterpolationOptions</code> to set this.\n   * @memberof SampledPositionProperty.prototype\n   *\n   * @type {InterpolationAlgorithm}\n   * @default LinearApproximation\n   * @readonly\n   */\n  interpolationAlgorithm: {\n    get: function () {\n      return this._property.interpolationAlgorithm;\n    },\n  },\n  /**\n   * The number of derivatives contained by this property; i.e. 0 for just position, 1 for velocity, etc.\n   * @memberof SampledPositionProperty.prototype\n   *\n   * @type {Number}\n   * @default 0\n   */\n  numberOfDerivatives: {\n    get: function () {\n      return this._numberOfDerivatives;\n    },\n  },\n  /**\n   * Gets or sets the type of extrapolation to perform when a value\n   * is requested at a time after any available samples.\n   * @memberof SampledPositionProperty.prototype\n   * @type {ExtrapolationType}\n   * @default ExtrapolationType.NONE\n   */\n  forwardExtrapolationType: {\n    get: function () {\n      return this._property.forwardExtrapolationType;\n    },\n    set: function (value) {\n      this._property.forwardExtrapolationType = value;\n    },\n  },\n  /**\n   * Gets or sets the amount of time to extrapolate forward before\n   * the property becomes undefined.  A value of 0 will extrapolate forever.\n   * @memberof SampledPositionProperty.prototype\n   * @type {Number}\n   * @default 0\n   */\n  forwardExtrapolationDuration: {\n    get: function () {\n      return this._property.forwardExtrapolationDuration;\n    },\n    set: function (value) {\n      this._property.forwardExtrapolationDuration = value;\n    },\n  },\n  /**\n   * Gets or sets the type of extrapolation to perform when a value\n   * is requested at a time before any available samples.\n   * @memberof SampledPositionProperty.prototype\n   * @type {ExtrapolationType}\n   * @default ExtrapolationType.NONE\n   */\n  backwardExtrapolationType: {\n    get: function () {\n      return this._property.backwardExtrapolationType;\n    },\n    set: function (value) {\n      this._property.backwardExtrapolationType = value;\n    },\n  },\n  /**\n   * Gets or sets the amount of time to extrapolate backward\n   * before the property becomes undefined.  A value of 0 will extrapolate forever.\n   * @memberof SampledPositionProperty.prototype\n   * @type {Number}\n   * @default 0\n   */\n  backwardExtrapolationDuration: {\n    get: function () {\n      return this._property.backwardExtrapolationDuration;\n    },\n    set: function (value) {\n      this._property.backwardExtrapolationDuration = value;\n    },\n  },\n});\n\n/**\n * Gets the position at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {Cartesian3} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Cartesian3} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nSampledPositionProperty.prototype.getValue = function (time, result) {\n  return this.getValueInReferenceFrame(time, _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].FIXED */ .Z.FIXED, result);\n};\n\n/**\n * Gets the position at the provided time and in the provided reference frame.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {ReferenceFrame} referenceFrame The desired referenceFrame of the result.\n * @param {Cartesian3} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Cartesian3} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nSampledPositionProperty.prototype.getValueInReferenceFrame = function (\n  time,\n  referenceFrame,\n  result\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("time", time);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("referenceFrame", referenceFrame);\n  //>>includeEnd(\'debug\');\n\n  result = this._property.getValue(time, result);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(result)) {\n    return _PositionProperty_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].convertToReferenceFrame */ .Z.convertToReferenceFrame(\n      time,\n      result,\n      this._referenceFrame,\n      referenceFrame,\n      result\n    );\n  }\n  return undefined;\n};\n\n/**\n * Sets the algorithm and degree to use when interpolating a position.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {InterpolationAlgorithm} [options.interpolationAlgorithm] The new interpolation algorithm.  If undefined, the existing property will be unchanged.\n * @param {Number} [options.interpolationDegree] The new interpolation degree.  If undefined, the existing property will be unchanged.\n */\nSampledPositionProperty.prototype.setInterpolationOptions = function (options) {\n  this._property.setInterpolationOptions(options);\n};\n\n/**\n * Adds a new sample.\n *\n * @param {JulianDate} time The sample time.\n * @param {Cartesian3} position The position at the provided time.\n * @param {Cartesian3[]} [derivatives] The array of derivative values at the provided time.\n */\nSampledPositionProperty.prototype.addSample = function (\n  time,\n  position,\n  derivatives\n) {\n  var numberOfDerivatives = this._numberOfDerivatives;\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (\n    numberOfDerivatives > 0 &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(derivatives) || derivatives.length !== numberOfDerivatives)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "derivatives length must be equal to the number of derivatives."\n    );\n  }\n  //>>includeEnd(\'debug\');\n  this._property.addSample(time, position, derivatives);\n};\n\n/**\n * Adds multiple samples via parallel arrays.\n *\n * @param {JulianDate[]} times An array of JulianDate instances where each index is a sample time.\n * @param {Cartesian3[]} positions An array of Cartesian3 position instances, where each value corresponds to the provided time index.\n * @param {Array[]} [derivatives] An array where each value is another array containing derivatives for the corresponding time index.\n *\n * @exception {DeveloperError} All arrays must be the same length.\n */\nSampledPositionProperty.prototype.addSamples = function (\n  times,\n  positions,\n  derivatives\n) {\n  this._property.addSamples(times, positions, derivatives);\n};\n\n/**\n * Adds samples as a single packed array where each new sample is represented as a date,\n * followed by the packed representation of the corresponding value and derivatives.\n *\n * @param {Number[]} packedSamples The array of packed samples.\n * @param {JulianDate} [epoch] If any of the dates in packedSamples are numbers, they are considered an offset from this epoch, in seconds.\n */\nSampledPositionProperty.prototype.addSamplesPackedArray = function (\n  packedSamples,\n  epoch\n) {\n  this._property.addSamplesPackedArray(packedSamples, epoch);\n};\n\n/**\n * Removes a sample at the given time, if present.\n *\n * @param {JulianDate} time The sample time.\n * @returns {Boolean} <code>true</code> if a sample at time was removed, <code>false</code> otherwise.\n */\nSampledPositionProperty.prototype.removeSample = function (time) {\n  return this._property.removeSample(time);\n};\n\n/**\n * Removes all samples for the given time interval.\n *\n * @param {TimeInterval} time The time interval for which to remove all samples.\n */\nSampledPositionProperty.prototype.removeSamples = function (timeInterval) {\n  this._property.removeSamples(timeInterval);\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nSampledPositionProperty.prototype.equals = function (other) {\n  return (\n    this === other || //\n    (other instanceof SampledPositionProperty &&\n      _Property_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(this._property, other._property) && //\n      this._referenceFrame === other._referenceFrame)\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (SampledPositionProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQSxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVyxjQUFjO0FBQ3pCLFdBQVcsU0FBUztBQUNwQjtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFVBQVU7QUFDckIsV0FBVyxZQUFZO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyRUFBZTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSx5REFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9TYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5qcz8zYmI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgUmVmZXJlbmNlRnJhbWUgZnJvbSBcIi4uL0NvcmUvUmVmZXJlbmNlRnJhbWUuanNcIjtcbmltcG9ydCBQb3NpdGlvblByb3BlcnR5IGZyb20gXCIuL1Bvc2l0aW9uUHJvcGVydHkuanNcIjtcbmltcG9ydCBQcm9wZXJ0eSBmcm9tIFwiLi9Qcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IFNhbXBsZWRQcm9wZXJ0eSBmcm9tIFwiLi9TYW1wbGVkUHJvcGVydHkuanNcIjtcblxuLyoqXG4gKiBBIHtAbGluayBTYW1wbGVkUHJvcGVydHl9IHdoaWNoIGlzIGFsc28gYSB7QGxpbmsgUG9zaXRpb25Qcm9wZXJ0eX0uXG4gKlxuICogQGFsaWFzIFNhbXBsZWRQb3NpdGlvblByb3BlcnR5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlZmVyZW5jZUZyYW1lfSBbcmVmZXJlbmNlRnJhbWU9UmVmZXJlbmNlRnJhbWUuRklYRURdIFRoZSByZWZlcmVuY2UgZnJhbWUgaW4gd2hpY2ggdGhlIHBvc2l0aW9uIGlzIGRlZmluZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gW251bWJlck9mRGVyaXZhdGl2ZXM9MF0gVGhlIG51bWJlciBvZiBkZXJpdmF0aXZlcyB0aGF0IGFjY29tcGFueSBlYWNoIHBvc2l0aW9uOyBpLmUuIHZlbG9jaXR5LCBhY2NlbGVyYXRpb24sIGV0Yy4uLlxuICovXG5mdW5jdGlvbiBTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eShyZWZlcmVuY2VGcmFtZSwgbnVtYmVyT2ZEZXJpdmF0aXZlcykge1xuICBudW1iZXJPZkRlcml2YXRpdmVzID0gZGVmYXVsdFZhbHVlKG51bWJlck9mRGVyaXZhdGl2ZXMsIDApO1xuXG4gIHZhciBkZXJpdmF0aXZlVHlwZXM7XG4gIGlmIChudW1iZXJPZkRlcml2YXRpdmVzID4gMCkge1xuICAgIGRlcml2YXRpdmVUeXBlcyA9IG5ldyBBcnJheShudW1iZXJPZkRlcml2YXRpdmVzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mRGVyaXZhdGl2ZXM7IGkrKykge1xuICAgICAgZGVyaXZhdGl2ZVR5cGVzW2ldID0gQ2FydGVzaWFuMztcbiAgICB9XG4gIH1cblxuICB0aGlzLl9udW1iZXJPZkRlcml2YXRpdmVzID0gbnVtYmVyT2ZEZXJpdmF0aXZlcztcbiAgdGhpcy5fcHJvcGVydHkgPSBuZXcgU2FtcGxlZFByb3BlcnR5KENhcnRlc2lhbjMsIGRlcml2YXRpdmVUeXBlcyk7XG4gIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkID0gbmV3IEV2ZW50KCk7XG4gIHRoaXMuX3JlZmVyZW5jZUZyYW1lID0gZGVmYXVsdFZhbHVlKHJlZmVyZW5jZUZyYW1lLCBSZWZlcmVuY2VGcmFtZS5GSVhFRCk7XG5cbiAgdGhpcy5fcHJvcGVydHkuX2RlZmluaXRpb25DaGFuZ2VkLmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gIH0sIHRoaXMpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoaXMgcHJvcGVydHkgaXMgY29uc3RhbnQuICBBIHByb3BlcnR5IGlzIGNvbnNpZGVyZWRcbiAgICogY29uc3RhbnQgaWYgZ2V0VmFsdWUgYWx3YXlzIHJldHVybnMgdGhlIHNhbWUgcmVzdWx0IGZvciB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAbWVtYmVyb2YgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGlzQ29uc3RhbnQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0eS5pc0NvbnN0YW50O1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuZXZlciB0aGUgZGVmaW5pdGlvbiBvZiB0aGlzIHByb3BlcnR5IGNoYW5nZXMuXG4gICAqIFRoZSBkZWZpbml0aW9uIGlzIGNvbnNpZGVyZWQgdG8gaGF2ZSBjaGFuZ2VkIGlmIGEgY2FsbCB0byBnZXRWYWx1ZSB3b3VsZCByZXR1cm5cbiAgICogYSBkaWZmZXJlbnQgcmVzdWx0IGZvciB0aGUgc2FtZSB0aW1lLlxuICAgKiBAbWVtYmVyb2YgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBkZWZpbml0aW9uQ2hhbmdlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWZlcmVuY2UgZnJhbWUgaW4gd2hpY2ggdGhlIHBvc2l0aW9uIGlzIGRlZmluZWQuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge1JlZmVyZW5jZUZyYW1lfVxuICAgKiBAZGVmYXVsdCBSZWZlcmVuY2VGcmFtZS5GSVhFRDtcbiAgICovXG4gIHJlZmVyZW5jZUZyYW1lOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVmZXJlbmNlRnJhbWU7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGRlZ3JlZSBvZiBpbnRlcnBvbGF0aW9uIHRvIHBlcmZvcm0gd2hlbiByZXRyaWV2aW5nIGEgdmFsdWUuIENhbGwgPGNvZGU+c2V0SW50ZXJwb2xhdGlvbk9wdGlvbnM8L2NvZGU+IHRvIHNldCB0aGlzLlxuICAgKiBAbWVtYmVyb2YgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDFcbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpbnRlcnBvbGF0aW9uRGVncmVlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvcGVydHkuaW50ZXJwb2xhdGlvbkRlZ3JlZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgaW50ZXJwb2xhdGlvbiBhbGdvcml0aG0gdG8gdXNlIHdoZW4gcmV0cmlldmluZyBhIHZhbHVlLiBDYWxsIDxjb2RlPnNldEludGVycG9sYXRpb25PcHRpb25zPC9jb2RlPiB0byBzZXQgdGhpcy5cbiAgICogQG1lbWJlcm9mIFNhbXBsZWRQb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7SW50ZXJwb2xhdGlvbkFsZ29yaXRobX1cbiAgICogQGRlZmF1bHQgTGluZWFyQXBwcm94aW1hdGlvblxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGludGVycG9sYXRpb25BbGdvcml0aG06IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0eS5pbnRlcnBvbGF0aW9uQWxnb3JpdGhtO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGRlcml2YXRpdmVzIGNvbnRhaW5lZCBieSB0aGlzIHByb3BlcnR5OyBpLmUuIDAgZm9yIGp1c3QgcG9zaXRpb24sIDEgZm9yIHZlbG9jaXR5LCBldGMuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgbnVtYmVyT2ZEZXJpdmF0aXZlczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX251bWJlck9mRGVyaXZhdGl2ZXM7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgdHlwZSBvZiBleHRyYXBvbGF0aW9uIHRvIHBlcmZvcm0gd2hlbiBhIHZhbHVlXG4gICAqIGlzIHJlcXVlc3RlZCBhdCBhIHRpbWUgYWZ0ZXIgYW55IGF2YWlsYWJsZSBzYW1wbGVzLlxuICAgKiBAbWVtYmVyb2YgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFeHRyYXBvbGF0aW9uVHlwZX1cbiAgICogQGRlZmF1bHQgRXh0cmFwb2xhdGlvblR5cGUuTk9ORVxuICAgKi9cbiAgZm9yd2FyZEV4dHJhcG9sYXRpb25UeXBlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvcGVydHkuZm9yd2FyZEV4dHJhcG9sYXRpb25UeXBlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMuX3Byb3BlcnR5LmZvcndhcmRFeHRyYXBvbGF0aW9uVHlwZSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGFtb3VudCBvZiB0aW1lIHRvIGV4dHJhcG9sYXRlIGZvcndhcmQgYmVmb3JlXG4gICAqIHRoZSBwcm9wZXJ0eSBiZWNvbWVzIHVuZGVmaW5lZC4gIEEgdmFsdWUgb2YgMCB3aWxsIGV4dHJhcG9sYXRlIGZvcmV2ZXIuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgZm9yd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnR5LmZvcndhcmRFeHRyYXBvbGF0aW9uRHVyYXRpb247XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fcHJvcGVydHkuZm9yd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbiA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHR5cGUgb2YgZXh0cmFwb2xhdGlvbiB0byBwZXJmb3JtIHdoZW4gYSB2YWx1ZVxuICAgKiBpcyByZXF1ZXN0ZWQgYXQgYSB0aW1lIGJlZm9yZSBhbnkgYXZhaWxhYmxlIHNhbXBsZXMuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V4dHJhcG9sYXRpb25UeXBlfVxuICAgKiBAZGVmYXVsdCBFeHRyYXBvbGF0aW9uVHlwZS5OT05FXG4gICAqL1xuICBiYWNrd2FyZEV4dHJhcG9sYXRpb25UeXBlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvcGVydHkuYmFja3dhcmRFeHRyYXBvbGF0aW9uVHlwZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0eS5iYWNrd2FyZEV4dHJhcG9sYXRpb25UeXBlID0gdmFsdWU7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgYW1vdW50IG9mIHRpbWUgdG8gZXh0cmFwb2xhdGUgYmFja3dhcmRcbiAgICogYmVmb3JlIHRoZSBwcm9wZXJ0eSBiZWNvbWVzIHVuZGVmaW5lZC4gIEEgdmFsdWUgb2YgMCB3aWxsIGV4dHJhcG9sYXRlIGZvcmV2ZXIuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgYmFja3dhcmRFeHRyYXBvbGF0aW9uRHVyYXRpb246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0eS5iYWNrd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0eS5iYWNrd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbiA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBHZXRzIHRoZSBwb3NpdGlvbiBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHRpbWUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gW3Jlc3VsdF0gVGhlIG9iamVjdCB0byBzdG9yZSB0aGUgdmFsdWUgaW50bywgaWYgb21pdHRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuM30gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgaW5zdGFuY2UgaWYgdGhlIHJlc3VsdCBwYXJhbWV0ZXIgd2FzIG5vdCBzdXBwbGllZC5cbiAqL1xuU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKHRpbWUsIHJlc3VsdCkge1xuICByZXR1cm4gdGhpcy5nZXRWYWx1ZUluUmVmZXJlbmNlRnJhbWUodGltZSwgUmVmZXJlbmNlRnJhbWUuRklYRUQsIHJlc3VsdCk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIHBvc2l0aW9uIGF0IHRoZSBwcm92aWRlZCB0aW1lIGFuZCBpbiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlIGZyYW1lLlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIHZhbHVlLlxuICogQHBhcmFtIHtSZWZlcmVuY2VGcmFtZX0gcmVmZXJlbmNlRnJhbWUgVGhlIGRlc2lyZWQgcmVmZXJlbmNlRnJhbWUgb2YgdGhlIHJlc3VsdC5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gW3Jlc3VsdF0gVGhlIG9iamVjdCB0byBzdG9yZSB0aGUgdmFsdWUgaW50bywgaWYgb21pdHRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuM30gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgaW5zdGFuY2UgaWYgdGhlIHJlc3VsdCBwYXJhbWV0ZXIgd2FzIG5vdCBzdXBwbGllZC5cbiAqL1xuU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlLmdldFZhbHVlSW5SZWZlcmVuY2VGcmFtZSA9IGZ1bmN0aW9uIChcbiAgdGltZSxcbiAgcmVmZXJlbmNlRnJhbWUsXG4gIHJlc3VsdFxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLmRlZmluZWQoXCJ0aW1lXCIsIHRpbWUpO1xuICBDaGVjay5kZWZpbmVkKFwicmVmZXJlbmNlRnJhbWVcIiwgcmVmZXJlbmNlRnJhbWUpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICByZXN1bHQgPSB0aGlzLl9wcm9wZXJ0eS5nZXRWYWx1ZSh0aW1lLCByZXN1bHQpO1xuICBpZiAoZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmV0dXJuIFBvc2l0aW9uUHJvcGVydHkuY29udmVydFRvUmVmZXJlbmNlRnJhbWUoXG4gICAgICB0aW1lLFxuICAgICAgcmVzdWx0LFxuICAgICAgdGhpcy5fcmVmZXJlbmNlRnJhbWUsXG4gICAgICByZWZlcmVuY2VGcmFtZSxcbiAgICAgIHJlc3VsdFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgYWxnb3JpdGhtIGFuZCBkZWdyZWUgdG8gdXNlIHdoZW4gaW50ZXJwb2xhdGluZyBhIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtJbnRlcnBvbGF0aW9uQWxnb3JpdGhtfSBbb3B0aW9ucy5pbnRlcnBvbGF0aW9uQWxnb3JpdGhtXSBUaGUgbmV3IGludGVycG9sYXRpb24gYWxnb3JpdGhtLiAgSWYgdW5kZWZpbmVkLCB0aGUgZXhpc3RpbmcgcHJvcGVydHkgd2lsbCBiZSB1bmNoYW5nZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuaW50ZXJwb2xhdGlvbkRlZ3JlZV0gVGhlIG5ldyBpbnRlcnBvbGF0aW9uIGRlZ3JlZS4gIElmIHVuZGVmaW5lZCwgdGhlIGV4aXN0aW5nIHByb3BlcnR5IHdpbGwgYmUgdW5jaGFuZ2VkLlxuICovXG5TYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUuc2V0SW50ZXJwb2xhdGlvbk9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICB0aGlzLl9wcm9wZXJ0eS5zZXRJbnRlcnBvbGF0aW9uT3B0aW9ucyhvcHRpb25zKTtcbn07XG5cbi8qKlxuICogQWRkcyBhIG5ldyBzYW1wbGUuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSBzYW1wbGUgdGltZS5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gcG9zaXRpb24gVGhlIHBvc2l0aW9uIGF0IHRoZSBwcm92aWRlZCB0aW1lLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zW119IFtkZXJpdmF0aXZlc10gVGhlIGFycmF5IG9mIGRlcml2YXRpdmUgdmFsdWVzIGF0IHRoZSBwcm92aWRlZCB0aW1lLlxuICovXG5TYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUuYWRkU2FtcGxlID0gZnVuY3Rpb24gKFxuICB0aW1lLFxuICBwb3NpdGlvbixcbiAgZGVyaXZhdGl2ZXNcbikge1xuICB2YXIgbnVtYmVyT2ZEZXJpdmF0aXZlcyA9IHRoaXMuX251bWJlck9mRGVyaXZhdGl2ZXM7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChcbiAgICBudW1iZXJPZkRlcml2YXRpdmVzID4gMCAmJlxuICAgICghZGVmaW5lZChkZXJpdmF0aXZlcykgfHwgZGVyaXZhdGl2ZXMubGVuZ3RoICE9PSBudW1iZXJPZkRlcml2YXRpdmVzKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcImRlcml2YXRpdmVzIGxlbmd0aCBtdXN0IGJlIGVxdWFsIHRvIHRoZSBudW1iZXIgb2YgZGVyaXZhdGl2ZXMuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuICB0aGlzLl9wcm9wZXJ0eS5hZGRTYW1wbGUodGltZSwgcG9zaXRpb24sIGRlcml2YXRpdmVzKTtcbn07XG5cbi8qKlxuICogQWRkcyBtdWx0aXBsZSBzYW1wbGVzIHZpYSBwYXJhbGxlbCBhcnJheXMuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlW119IHRpbWVzIEFuIGFycmF5IG9mIEp1bGlhbkRhdGUgaW5zdGFuY2VzIHdoZXJlIGVhY2ggaW5kZXggaXMgYSBzYW1wbGUgdGltZS5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM1tdfSBwb3NpdGlvbnMgQW4gYXJyYXkgb2YgQ2FydGVzaWFuMyBwb3NpdGlvbiBpbnN0YW5jZXMsIHdoZXJlIGVhY2ggdmFsdWUgY29ycmVzcG9uZHMgdG8gdGhlIHByb3ZpZGVkIHRpbWUgaW5kZXguXG4gKiBAcGFyYW0ge0FycmF5W119IFtkZXJpdmF0aXZlc10gQW4gYXJyYXkgd2hlcmUgZWFjaCB2YWx1ZSBpcyBhbm90aGVyIGFycmF5IGNvbnRhaW5pbmcgZGVyaXZhdGl2ZXMgZm9yIHRoZSBjb3JyZXNwb25kaW5nIHRpbWUgaW5kZXguXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEFsbCBhcnJheXMgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGguXG4gKi9cblNhbXBsZWRQb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZS5hZGRTYW1wbGVzID0gZnVuY3Rpb24gKFxuICB0aW1lcyxcbiAgcG9zaXRpb25zLFxuICBkZXJpdmF0aXZlc1xuKSB7XG4gIHRoaXMuX3Byb3BlcnR5LmFkZFNhbXBsZXModGltZXMsIHBvc2l0aW9ucywgZGVyaXZhdGl2ZXMpO1xufTtcblxuLyoqXG4gKiBBZGRzIHNhbXBsZXMgYXMgYSBzaW5nbGUgcGFja2VkIGFycmF5IHdoZXJlIGVhY2ggbmV3IHNhbXBsZSBpcyByZXByZXNlbnRlZCBhcyBhIGRhdGUsXG4gKiBmb2xsb3dlZCBieSB0aGUgcGFja2VkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGFuZCBkZXJpdmF0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcltdfSBwYWNrZWRTYW1wbGVzIFRoZSBhcnJheSBvZiBwYWNrZWQgc2FtcGxlcy5cbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gW2Vwb2NoXSBJZiBhbnkgb2YgdGhlIGRhdGVzIGluIHBhY2tlZFNhbXBsZXMgYXJlIG51bWJlcnMsIHRoZXkgYXJlIGNvbnNpZGVyZWQgYW4gb2Zmc2V0IGZyb20gdGhpcyBlcG9jaCwgaW4gc2Vjb25kcy5cbiAqL1xuU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlLmFkZFNhbXBsZXNQYWNrZWRBcnJheSA9IGZ1bmN0aW9uIChcbiAgcGFja2VkU2FtcGxlcyxcbiAgZXBvY2hcbikge1xuICB0aGlzLl9wcm9wZXJ0eS5hZGRTYW1wbGVzUGFja2VkQXJyYXkocGFja2VkU2FtcGxlcywgZXBvY2gpO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgc2FtcGxlIGF0IHRoZSBnaXZlbiB0aW1lLCBpZiBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgc2FtcGxlIHRpbWUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgYSBzYW1wbGUgYXQgdGltZSB3YXMgcmVtb3ZlZCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqL1xuU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlLnJlbW92ZVNhbXBsZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHJldHVybiB0aGlzLl9wcm9wZXJ0eS5yZW1vdmVTYW1wbGUodGltZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIHNhbXBsZXMgZm9yIHRoZSBnaXZlbiB0aW1lIGludGVydmFsLlxuICpcbiAqIEBwYXJhbSB7VGltZUludGVydmFsfSB0aW1lIFRoZSB0aW1lIGludGVydmFsIGZvciB3aGljaCB0byByZW1vdmUgYWxsIHNhbXBsZXMuXG4gKi9cblNhbXBsZWRQb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZS5yZW1vdmVTYW1wbGVzID0gZnVuY3Rpb24gKHRpbWVJbnRlcnZhbCkge1xuICB0aGlzLl9wcm9wZXJ0eS5yZW1vdmVTYW1wbGVzKHRpbWVJbnRlcnZhbCk7XG59O1xuXG4vKipcbiAqIENvbXBhcmVzIHRoaXMgcHJvcGVydHkgdG8gdGhlIHByb3ZpZGVkIHByb3BlcnR5IGFuZCByZXR1cm5zXG4gKiA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGV5IGFyZSBlcXVhbCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1Byb3BlcnR5fSBbb3RoZXJdIFRoZSBvdGhlciBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiBsZWZ0IGFuZCByaWdodCBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKi9cblNhbXBsZWRQb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgcmV0dXJuIChcbiAgICB0aGlzID09PSBvdGhlciB8fCAvL1xuICAgIChvdGhlciBpbnN0YW5jZW9mIFNhbXBsZWRQb3NpdGlvblByb3BlcnR5ICYmXG4gICAgICBQcm9wZXJ0eS5lcXVhbHModGhpcy5fcHJvcGVydHksIG90aGVyLl9wcm9wZXJ0eSkgJiYgLy9cbiAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lID09PSBvdGhlci5fcmVmZXJlbmNlRnJhbWUpXG4gICk7XG59O1xuZXhwb3J0IGRlZmF1bHQgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///87207\n')},23470:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(377);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14459);\n/* harmony import */ var _Core_ExtrapolationType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11074);\n/* harmony import */ var _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(55293);\n/* harmony import */ var _Core_LinearApproximation_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(54935);\n\n\n\n\n\n\n\n\n\n\nvar PackableNumber = {\n  packedLength: 1,\n  pack: function (value, array, startingIndex) {\n    startingIndex = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(startingIndex, 0);\n    array[startingIndex] = value;\n  },\n  unpack: function (array, startingIndex, result) {\n    startingIndex = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(startingIndex, 0);\n    return array[startingIndex];\n  },\n};\n\n//We can\'t use splice for inserting new elements because function apply can\'t handle\n//a huge number of arguments.  See https://code.google.com/p/chromium/issues/detail?id=56588\nfunction arrayInsert(array, startIndex, items) {\n  var i;\n  var arrayLength = array.length;\n  var itemsLength = items.length;\n  var newLength = arrayLength + itemsLength;\n\n  array.length = newLength;\n  if (arrayLength !== startIndex) {\n    var q = arrayLength - 1;\n    for (i = newLength - 1; i >= startIndex; i--) {\n      array[i] = array[q--];\n    }\n  }\n\n  for (i = 0; i < itemsLength; i++) {\n    array[startIndex++] = items[i];\n  }\n}\n\nfunction convertDate(date, epoch) {\n  if (date instanceof _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z) {\n    return date;\n  }\n  if (typeof date === "string") {\n    return _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].fromIso8601 */ .Z.fromIso8601(date);\n  }\n  return _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].addSeconds */ .Z.addSeconds(epoch, date, new _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z());\n}\n\nvar timesSpliceArgs = [];\nvar valuesSpliceArgs = [];\n\nfunction mergeNewSamples(epoch, times, values, newData, packedLength) {\n  var newDataIndex = 0;\n  var i;\n  var prevItem;\n  var timesInsertionPoint;\n  var valuesInsertionPoint;\n  var currentTime;\n  var nextTime;\n\n  while (newDataIndex < newData.length) {\n    currentTime = convertDate(newData[newDataIndex], epoch);\n    timesInsertionPoint = (0,_Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(times, currentTime, _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].compare */ .Z.compare);\n    var timesSpliceArgsCount = 0;\n    var valuesSpliceArgsCount = 0;\n\n    if (timesInsertionPoint < 0) {\n      //Doesn\'t exist, insert as many additional values as we can.\n      timesInsertionPoint = ~timesInsertionPoint;\n\n      valuesInsertionPoint = timesInsertionPoint * packedLength;\n      prevItem = undefined;\n      nextTime = times[timesInsertionPoint];\n      while (newDataIndex < newData.length) {\n        currentTime = convertDate(newData[newDataIndex], epoch);\n        if (\n          ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(prevItem) &&\n            _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].compare */ .Z.compare(prevItem, currentTime) >= 0) ||\n          ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(nextTime) && _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].compare */ .Z.compare(currentTime, nextTime) >= 0)\n        ) {\n          break;\n        }\n        timesSpliceArgs[timesSpliceArgsCount++] = currentTime;\n        newDataIndex = newDataIndex + 1;\n        for (i = 0; i < packedLength; i++) {\n          valuesSpliceArgs[valuesSpliceArgsCount++] = newData[newDataIndex];\n          newDataIndex = newDataIndex + 1;\n        }\n        prevItem = currentTime;\n      }\n\n      if (timesSpliceArgsCount > 0) {\n        valuesSpliceArgs.length = valuesSpliceArgsCount;\n        arrayInsert(values, valuesInsertionPoint, valuesSpliceArgs);\n\n        timesSpliceArgs.length = timesSpliceArgsCount;\n        arrayInsert(times, timesInsertionPoint, timesSpliceArgs);\n      }\n    } else {\n      //Found an exact match\n      for (i = 0; i < packedLength; i++) {\n        newDataIndex++;\n        values[timesInsertionPoint * packedLength + i] = newData[newDataIndex];\n      }\n      newDataIndex++;\n    }\n  }\n}\n\n/**\n * A {@link Property} whose value is interpolated for a given time from the\n * provided set of samples and specified interpolation algorithm and degree.\n * @alias SampledProperty\n * @constructor\n *\n * @param {Number|Packable} type The type of property.\n * @param {Packable[]} [derivativeTypes] When supplied, indicates that samples will contain derivative information of the specified types.\n *\n *\n * @example\n * //Create a linearly interpolated Cartesian2\n * var property = new Cesium.SampledProperty(Cesium.Cartesian2);\n *\n * //Populate it with data\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:00:00.00Z\'), new Cesium.Cartesian2(0, 0));\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-02T00:00:00.00Z\'), new Cesium.Cartesian2(4, 7));\n *\n * //Retrieve an interpolated value\n * var result = property.getValue(Cesium.JulianDate.fromIso8601(\'2012-08-01T12:00:00.00Z\'));\n *\n * @example\n * //Create a simple numeric SampledProperty that uses third degree Hermite Polynomial Approximation\n * var property = new Cesium.SampledProperty(Number);\n * property.setInterpolationOptions({\n *     interpolationDegree : 3,\n *     interpolationAlgorithm : Cesium.HermitePolynomialApproximation\n * });\n *\n * //Populate it with data\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:00:00.00Z\'), 1.0);\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:01:00.00Z\'), 6.0);\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:02:00.00Z\'), 12.0);\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:03:30.00Z\'), 5.0);\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:06:30.00Z\'), 2.0);\n *\n * //Samples can be added in any order.\n * property.addSample(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:00:30.00Z\'), 6.2);\n *\n * //Retrieve an interpolated value\n * var result = property.getValue(Cesium.JulianDate.fromIso8601(\'2012-08-01T00:02:34.00Z\'));\n *\n * @see SampledPositionProperty\n */\nfunction SampledProperty(type, derivativeTypes) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("type", type);\n  //>>includeEnd(\'debug\');\n\n  var innerType = type;\n  if (innerType === Number) {\n    innerType = PackableNumber;\n  }\n  var packedLength = innerType.packedLength;\n  var packedInterpolationLength = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    innerType.packedInterpolationLength,\n    packedLength\n  );\n\n  var inputOrder = 0;\n  var innerDerivativeTypes;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(derivativeTypes)) {\n    var length = derivativeTypes.length;\n    innerDerivativeTypes = new Array(length);\n    for (var i = 0; i < length; i++) {\n      var derivativeType = derivativeTypes[i];\n      if (derivativeType === Number) {\n        derivativeType = PackableNumber;\n      }\n      var derivativePackedLength = derivativeType.packedLength;\n      packedLength += derivativePackedLength;\n      packedInterpolationLength += (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n        derivativeType.packedInterpolationLength,\n        derivativePackedLength\n      );\n      innerDerivativeTypes[i] = derivativeType;\n    }\n    inputOrder = length;\n  }\n\n  this._type = type;\n  this._innerType = innerType;\n  this._interpolationDegree = 1;\n  this._interpolationAlgorithm = _Core_LinearApproximation_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z;\n  this._numberOfPoints = 0;\n  this._times = [];\n  this._values = [];\n  this._xTable = [];\n  this._yTable = [];\n  this._packedLength = packedLength;\n  this._packedInterpolationLength = packedInterpolationLength;\n  this._updateTableLength = true;\n  this._interpolationResult = new Array(packedInterpolationLength);\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n  this._derivativeTypes = derivativeTypes;\n  this._innerDerivativeTypes = innerDerivativeTypes;\n  this._inputOrder = inputOrder;\n  this._forwardExtrapolationType = _Core_ExtrapolationType_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].NONE */ .Z.NONE;\n  this._forwardExtrapolationDuration = 0;\n  this._backwardExtrapolationType = _Core_ExtrapolationType_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].NONE */ .Z.NONE;\n  this._backwardExtrapolationDuration = 0;\n}\n\nObject.defineProperties(SampledProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.  A property is considered\n   * constant if getValue always returns the same result for the current definition.\n   * @memberof SampledProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return this._values.length === 0;\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * The definition is considered to have changed if a call to getValue would return\n   * a different result for the same time.\n   * @memberof SampledProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n  /**\n   * Gets the type of property.\n   * @memberof SampledProperty.prototype\n   * @type {*}\n   */\n  type: {\n    get: function () {\n      return this._type;\n    },\n  },\n  /**\n   * Gets the derivative types used by this property.\n   * @memberof SampledProperty.prototype\n   * @type {Packable[]}\n   */\n  derivativeTypes: {\n    get: function () {\n      return this._derivativeTypes;\n    },\n  },\n  /**\n   * Gets the degree of interpolation to perform when retrieving a value.\n   * @memberof SampledProperty.prototype\n   * @type {Number}\n   * @default 1\n   */\n  interpolationDegree: {\n    get: function () {\n      return this._interpolationDegree;\n    },\n  },\n  /**\n   * Gets the interpolation algorithm to use when retrieving a value.\n   * @memberof SampledProperty.prototype\n   * @type {InterpolationAlgorithm}\n   * @default LinearApproximation\n   */\n  interpolationAlgorithm: {\n    get: function () {\n      return this._interpolationAlgorithm;\n    },\n  },\n  /**\n   * Gets or sets the type of extrapolation to perform when a value\n   * is requested at a time after any available samples.\n   * @memberof SampledProperty.prototype\n   * @type {ExtrapolationType}\n   * @default ExtrapolationType.NONE\n   */\n  forwardExtrapolationType: {\n    get: function () {\n      return this._forwardExtrapolationType;\n    },\n    set: function (value) {\n      if (this._forwardExtrapolationType !== value) {\n        this._forwardExtrapolationType = value;\n        this._definitionChanged.raiseEvent(this);\n      }\n    },\n  },\n  /**\n   * Gets or sets the amount of time to extrapolate forward before\n   * the property becomes undefined.  A value of 0 will extrapolate forever.\n   * @memberof SampledProperty.prototype\n   * @type {Number}\n   * @default 0\n   */\n  forwardExtrapolationDuration: {\n    get: function () {\n      return this._forwardExtrapolationDuration;\n    },\n    set: function (value) {\n      if (this._forwardExtrapolationDuration !== value) {\n        this._forwardExtrapolationDuration = value;\n        this._definitionChanged.raiseEvent(this);\n      }\n    },\n  },\n  /**\n   * Gets or sets the type of extrapolation to perform when a value\n   * is requested at a time before any available samples.\n   * @memberof SampledProperty.prototype\n   * @type {ExtrapolationType}\n   * @default ExtrapolationType.NONE\n   */\n  backwardExtrapolationType: {\n    get: function () {\n      return this._backwardExtrapolationType;\n    },\n    set: function (value) {\n      if (this._backwardExtrapolationType !== value) {\n        this._backwardExtrapolationType = value;\n        this._definitionChanged.raiseEvent(this);\n      }\n    },\n  },\n  /**\n   * Gets or sets the amount of time to extrapolate backward\n   * before the property becomes undefined.  A value of 0 will extrapolate forever.\n   * @memberof SampledProperty.prototype\n   * @type {Number}\n   * @default 0\n   */\n  backwardExtrapolationDuration: {\n    get: function () {\n      return this._backwardExtrapolationDuration;\n    },\n    set: function (value) {\n      if (this._backwardExtrapolationDuration !== value) {\n        this._backwardExtrapolationDuration = value;\n        this._definitionChanged.raiseEvent(this);\n      }\n    },\n  },\n});\n\n/**\n * Gets the value of the property at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {Object} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Object} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nSampledProperty.prototype.getValue = function (time, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("time", time);\n  //>>includeEnd(\'debug\');\n\n  var times = this._times;\n  var timesLength = times.length;\n  if (timesLength === 0) {\n    return undefined;\n  }\n\n  var timeout;\n  var innerType = this._innerType;\n  var values = this._values;\n  var index = (0,_Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(times, time, _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].compare */ .Z.compare);\n\n  if (index < 0) {\n    index = ~index;\n\n    if (index === 0) {\n      var startTime = times[index];\n      timeout = this._backwardExtrapolationDuration;\n      if (\n        this._backwardExtrapolationType === _Core_ExtrapolationType_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].NONE */ .Z.NONE ||\n        (timeout !== 0 &&\n          _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].secondsDifference */ .Z.secondsDifference(startTime, time) > timeout)\n      ) {\n        return undefined;\n      }\n      if (this._backwardExtrapolationType === _Core_ExtrapolationType_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].HOLD */ .Z.HOLD) {\n        return innerType.unpack(values, 0, result);\n      }\n    }\n\n    if (index >= timesLength) {\n      index = timesLength - 1;\n      var endTime = times[index];\n      timeout = this._forwardExtrapolationDuration;\n      if (\n        this._forwardExtrapolationType === _Core_ExtrapolationType_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].NONE */ .Z.NONE ||\n        (timeout !== 0 && _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].secondsDifference */ .Z.secondsDifference(time, endTime) > timeout)\n      ) {\n        return undefined;\n      }\n      if (this._forwardExtrapolationType === _Core_ExtrapolationType_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].HOLD */ .Z.HOLD) {\n        index = timesLength - 1;\n        return innerType.unpack(values, index * innerType.packedLength, result);\n      }\n    }\n\n    var xTable = this._xTable;\n    var yTable = this._yTable;\n    var interpolationAlgorithm = this._interpolationAlgorithm;\n    var packedInterpolationLength = this._packedInterpolationLength;\n    var inputOrder = this._inputOrder;\n\n    if (this._updateTableLength) {\n      this._updateTableLength = false;\n      var numberOfPoints = Math.min(\n        interpolationAlgorithm.getRequiredDataPoints(\n          this._interpolationDegree,\n          inputOrder\n        ),\n        timesLength\n      );\n      if (numberOfPoints !== this._numberOfPoints) {\n        this._numberOfPoints = numberOfPoints;\n        xTable.length = numberOfPoints;\n        yTable.length = numberOfPoints * packedInterpolationLength;\n      }\n    }\n\n    var degree = this._numberOfPoints - 1;\n    if (degree < 1) {\n      return undefined;\n    }\n\n    var firstIndex = 0;\n    var lastIndex = timesLength - 1;\n    var pointsInCollection = lastIndex - firstIndex + 1;\n\n    if (pointsInCollection >= degree + 1) {\n      var computedFirstIndex = index - ((degree / 2) | 0) - 1;\n      if (computedFirstIndex < firstIndex) {\n        computedFirstIndex = firstIndex;\n      }\n      var computedLastIndex = computedFirstIndex + degree;\n      if (computedLastIndex > lastIndex) {\n        computedLastIndex = lastIndex;\n        computedFirstIndex = computedLastIndex - degree;\n        if (computedFirstIndex < firstIndex) {\n          computedFirstIndex = firstIndex;\n        }\n      }\n\n      firstIndex = computedFirstIndex;\n      lastIndex = computedLastIndex;\n    }\n    var length = lastIndex - firstIndex + 1;\n\n    // Build the tables\n    for (var i = 0; i < length; ++i) {\n      xTable[i] = _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].secondsDifference */ .Z.secondsDifference(\n        times[firstIndex + i],\n        times[lastIndex]\n      );\n    }\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(innerType.convertPackedArrayForInterpolation)) {\n      var destinationIndex = 0;\n      var packedLength = this._packedLength;\n      var sourceIndex = firstIndex * packedLength;\n      var stop = (lastIndex + 1) * packedLength;\n\n      while (sourceIndex < stop) {\n        yTable[destinationIndex] = values[sourceIndex];\n        sourceIndex++;\n        destinationIndex++;\n      }\n    } else {\n      innerType.convertPackedArrayForInterpolation(\n        values,\n        firstIndex,\n        lastIndex,\n        yTable\n      );\n    }\n\n    // Interpolate!\n    var x = _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].secondsDifference */ .Z.secondsDifference(time, times[lastIndex]);\n    var interpolationResult;\n    if (inputOrder === 0 || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(interpolationAlgorithm.interpolate)) {\n      interpolationResult = interpolationAlgorithm.interpolateOrderZero(\n        x,\n        xTable,\n        yTable,\n        packedInterpolationLength,\n        this._interpolationResult\n      );\n    } else {\n      var yStride = Math.floor(packedInterpolationLength / (inputOrder + 1));\n      interpolationResult = interpolationAlgorithm.interpolate(\n        x,\n        xTable,\n        yTable,\n        yStride,\n        inputOrder,\n        inputOrder,\n        this._interpolationResult\n      );\n    }\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(innerType.unpackInterpolationResult)) {\n      return innerType.unpack(interpolationResult, 0, result);\n    }\n    return innerType.unpackInterpolationResult(\n      interpolationResult,\n      values,\n      firstIndex,\n      lastIndex,\n      result\n    );\n  }\n  return innerType.unpack(values, index * this._packedLength, result);\n};\n\n/**\n * Sets the algorithm and degree to use when interpolating a value.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {InterpolationAlgorithm} [options.interpolationAlgorithm] The new interpolation algorithm.  If undefined, the existing property will be unchanged.\n * @param {Number} [options.interpolationDegree] The new interpolation degree.  If undefined, the existing property will be unchanged.\n */\nSampledProperty.prototype.setInterpolationOptions = function (options) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(options)) {\n    return;\n  }\n\n  var valuesChanged = false;\n\n  var interpolationAlgorithm = options.interpolationAlgorithm;\n  var interpolationDegree = options.interpolationDegree;\n\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(interpolationAlgorithm) &&\n    this._interpolationAlgorithm !== interpolationAlgorithm\n  ) {\n    this._interpolationAlgorithm = interpolationAlgorithm;\n    valuesChanged = true;\n  }\n\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(interpolationDegree) &&\n    this._interpolationDegree !== interpolationDegree\n  ) {\n    this._interpolationDegree = interpolationDegree;\n    valuesChanged = true;\n  }\n\n  if (valuesChanged) {\n    this._updateTableLength = true;\n    this._definitionChanged.raiseEvent(this);\n  }\n};\n\n/**\n * Adds a new sample.\n *\n * @param {JulianDate} time The sample time.\n * @param {Packable} value The value at the provided time.\n * @param {Packable[]} [derivatives] The array of derivatives at the provided time.\n */\nSampledProperty.prototype.addSample = function (time, value, derivatives) {\n  var innerDerivativeTypes = this._innerDerivativeTypes;\n  var hasDerivatives = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(innerDerivativeTypes);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("time", time);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("value", value);\n  if (hasDerivatives) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("derivatives", derivatives);\n  }\n  //>>includeEnd(\'debug\');\n\n  var innerType = this._innerType;\n  var data = [];\n  data.push(time);\n  innerType.pack(value, data, data.length);\n\n  if (hasDerivatives) {\n    var derivativesLength = innerDerivativeTypes.length;\n    for (var x = 0; x < derivativesLength; x++) {\n      innerDerivativeTypes[x].pack(derivatives[x], data, data.length);\n    }\n  }\n  mergeNewSamples(\n    undefined,\n    this._times,\n    this._values,\n    data,\n    this._packedLength\n  );\n  this._updateTableLength = true;\n  this._definitionChanged.raiseEvent(this);\n};\n\n/**\n * Adds an array of samples.\n *\n * @param {JulianDate[]} times An array of JulianDate instances where each index is a sample time.\n * @param {Packable[]} values The array of values, where each value corresponds to the provided times index.\n * @param {Array[]} [derivativeValues] An array where each item is the array of derivatives at the equivalent time index.\n *\n * @exception {DeveloperError} times and values must be the same length.\n * @exception {DeveloperError} times and derivativeValues must be the same length.\n */\nSampledProperty.prototype.addSamples = function (\n  times,\n  values,\n  derivativeValues\n) {\n  var innerDerivativeTypes = this._innerDerivativeTypes;\n  var hasDerivatives = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(innerDerivativeTypes);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("times", times);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("values", values);\n  if (times.length !== values.length) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z("times and values must be the same length.");\n  }\n  if (\n    hasDerivatives &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(derivativeValues) || derivativeValues.length !== times.length)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "times and derivativeValues must be the same length."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var innerType = this._innerType;\n  var length = times.length;\n  var data = [];\n  for (var i = 0; i < length; i++) {\n    data.push(times[i]);\n    innerType.pack(values[i], data, data.length);\n\n    if (hasDerivatives) {\n      var derivatives = derivativeValues[i];\n      var derivativesLength = innerDerivativeTypes.length;\n      for (var x = 0; x < derivativesLength; x++) {\n        innerDerivativeTypes[x].pack(derivatives[x], data, data.length);\n      }\n    }\n  }\n  mergeNewSamples(\n    undefined,\n    this._times,\n    this._values,\n    data,\n    this._packedLength\n  );\n  this._updateTableLength = true;\n  this._definitionChanged.raiseEvent(this);\n};\n\n/**\n * Adds samples as a single packed array where each new sample is represented as a date,\n * followed by the packed representation of the corresponding value and derivatives.\n *\n * @param {Number[]} packedSamples The array of packed samples.\n * @param {JulianDate} [epoch] If any of the dates in packedSamples are numbers, they are considered an offset from this epoch, in seconds.\n */\nSampledProperty.prototype.addSamplesPackedArray = function (\n  packedSamples,\n  epoch\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("packedSamples", packedSamples);\n  //>>includeEnd(\'debug\');\n\n  mergeNewSamples(\n    epoch,\n    this._times,\n    this._values,\n    packedSamples,\n    this._packedLength\n  );\n  this._updateTableLength = true;\n  this._definitionChanged.raiseEvent(this);\n};\n\n/**\n * Removes a sample at the given time, if present.\n *\n * @param {JulianDate} time The sample time.\n * @returns {Boolean} <code>true</code> if a sample at time was removed, <code>false</code> otherwise.\n */\nSampledProperty.prototype.removeSample = function (time) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("time", time);\n  //>>includeEnd(\'debug\');\n\n  var index = (0,_Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this._times, time, _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].compare */ .Z.compare);\n  if (index < 0) {\n    return false;\n  }\n  removeSamples(this, index, 1);\n  return true;\n};\n\nfunction removeSamples(property, startIndex, numberToRemove) {\n  var packedLength = property._packedLength;\n  property._times.splice(startIndex, numberToRemove);\n  property._values.splice(\n    startIndex * packedLength,\n    numberToRemove * packedLength\n  );\n  property._updateTableLength = true;\n  property._definitionChanged.raiseEvent(property);\n}\n\n/**\n * Removes all samples for the given time interval.\n *\n * @param {TimeInterval} time The time interval for which to remove all samples.\n */\nSampledProperty.prototype.removeSamples = function (timeInterval) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("timeInterval", timeInterval);\n  //>>includeEnd(\'debug\');\n\n  var times = this._times;\n  var startIndex = (0,_Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(times, timeInterval.start, _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].compare */ .Z.compare);\n  if (startIndex < 0) {\n    startIndex = ~startIndex;\n  } else if (!timeInterval.isStartIncluded) {\n    ++startIndex;\n  }\n  var stopIndex = (0,_Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(times, timeInterval.stop, _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].compare */ .Z.compare);\n  if (stopIndex < 0) {\n    stopIndex = ~stopIndex;\n  } else if (timeInterval.isStopIncluded) {\n    ++stopIndex;\n  }\n\n  removeSamples(this, startIndex, stopIndex - startIndex);\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nSampledProperty.prototype.equals = function (other) {\n  if (this === other) {\n    return true;\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(other)) {\n    return false;\n  }\n\n  if (\n    this._type !== other._type || //\n    this._interpolationDegree !== other._interpolationDegree || //\n    this._interpolationAlgorithm !== other._interpolationAlgorithm\n  ) {\n    return false;\n  }\n\n  var derivativeTypes = this._derivativeTypes;\n  var hasDerivatives = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(derivativeTypes);\n  var otherDerivativeTypes = other._derivativeTypes;\n  var otherHasDerivatives = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(otherDerivativeTypes);\n  if (hasDerivatives !== otherHasDerivatives) {\n    return false;\n  }\n\n  var i;\n  var length;\n  if (hasDerivatives) {\n    length = derivativeTypes.length;\n    if (length !== otherDerivativeTypes.length) {\n      return false;\n    }\n\n    for (i = 0; i < length; i++) {\n      if (derivativeTypes[i] !== otherDerivativeTypes[i]) {\n        return false;\n      }\n    }\n  }\n\n  var times = this._times;\n  var otherTimes = other._times;\n  length = times.length;\n\n  if (length !== otherTimes.length) {\n    return false;\n  }\n\n  for (i = 0; i < length; i++) {\n    if (!_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equals */ .Z.equals(times[i], otherTimes[i])) {\n      return false;\n    }\n  }\n\n  var values = this._values;\n  var otherValues = other._values;\n  length = values.length;\n\n  //Since time lengths are equal, values length and other length are guaranteed to be equal.\n  for (i = 0; i < length; i++) {\n    if (values[i] !== otherValues[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n//Exposed for testing.\nSampledProperty._mergeNewSamples = mergeNewSamples;\n/* harmony default export */ __webpack_exports__["Z"] = (SampledProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvU2FtcGxlZFByb3BlcnR5LmpzP2VkMDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJpbmFyeVNlYXJjaCBmcm9tIFwiLi4vQ29yZS9iaW5hcnlTZWFyY2guanNcIjtcbmltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgRXh0cmFwb2xhdGlvblR5cGUgZnJvbSBcIi4uL0NvcmUvRXh0cmFwb2xhdGlvblR5cGUuanNcIjtcbmltcG9ydCBKdWxpYW5EYXRlIGZyb20gXCIuLi9Db3JlL0p1bGlhbkRhdGUuanNcIjtcbmltcG9ydCBMaW5lYXJBcHByb3hpbWF0aW9uIGZyb20gXCIuLi9Db3JlL0xpbmVhckFwcHJveGltYXRpb24uanNcIjtcblxudmFyIFBhY2thYmxlTnVtYmVyID0ge1xuICBwYWNrZWRMZW5ndGg6IDEsXG4gIHBhY2s6IGZ1bmN0aW9uICh2YWx1ZSwgYXJyYXksIHN0YXJ0aW5nSW5kZXgpIHtcbiAgICBzdGFydGluZ0luZGV4ID0gZGVmYXVsdFZhbHVlKHN0YXJ0aW5nSW5kZXgsIDApO1xuICAgIGFycmF5W3N0YXJ0aW5nSW5kZXhdID0gdmFsdWU7XG4gIH0sXG4gIHVucGFjazogZnVuY3Rpb24gKGFycmF5LCBzdGFydGluZ0luZGV4LCByZXN1bHQpIHtcbiAgICBzdGFydGluZ0luZGV4ID0gZGVmYXVsdFZhbHVlKHN0YXJ0aW5nSW5kZXgsIDApO1xuICAgIHJldHVybiBhcnJheVtzdGFydGluZ0luZGV4XTtcbiAgfSxcbn07XG5cbi8vV2UgY2FuJ3QgdXNlIHNwbGljZSBmb3IgaW5zZXJ0aW5nIG5ldyBlbGVtZW50cyBiZWNhdXNlIGZ1bmN0aW9uIGFwcGx5IGNhbid0IGhhbmRsZVxuLy9hIGh1Z2UgbnVtYmVyIG9mIGFyZ3VtZW50cy4gIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTY1ODhcbmZ1bmN0aW9uIGFycmF5SW5zZXJ0KGFycmF5LCBzdGFydEluZGV4LCBpdGVtcykge1xuICB2YXIgaTtcbiAgdmFyIGFycmF5TGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICB2YXIgaXRlbXNMZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIHZhciBuZXdMZW5ndGggPSBhcnJheUxlbmd0aCArIGl0ZW1zTGVuZ3RoO1xuXG4gIGFycmF5Lmxlbmd0aCA9IG5ld0xlbmd0aDtcbiAgaWYgKGFycmF5TGVuZ3RoICE9PSBzdGFydEluZGV4KSB7XG4gICAgdmFyIHEgPSBhcnJheUxlbmd0aCAtIDE7XG4gICAgZm9yIChpID0gbmV3TGVuZ3RoIC0gMTsgaSA+PSBzdGFydEluZGV4OyBpLS0pIHtcbiAgICAgIGFycmF5W2ldID0gYXJyYXlbcS0tXTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgaXRlbXNMZW5ndGg7IGkrKykge1xuICAgIGFycmF5W3N0YXJ0SW5kZXgrK10gPSBpdGVtc1tpXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0RGF0ZShkYXRlLCBlcG9jaCkge1xuICBpZiAoZGF0ZSBpbnN0YW5jZW9mIEp1bGlhbkRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuICBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gSnVsaWFuRGF0ZS5mcm9tSXNvODYwMShkYXRlKTtcbiAgfVxuICByZXR1cm4gSnVsaWFuRGF0ZS5hZGRTZWNvbmRzKGVwb2NoLCBkYXRlLCBuZXcgSnVsaWFuRGF0ZSgpKTtcbn1cblxudmFyIHRpbWVzU3BsaWNlQXJncyA9IFtdO1xudmFyIHZhbHVlc1NwbGljZUFyZ3MgPSBbXTtcblxuZnVuY3Rpb24gbWVyZ2VOZXdTYW1wbGVzKGVwb2NoLCB0aW1lcywgdmFsdWVzLCBuZXdEYXRhLCBwYWNrZWRMZW5ndGgpIHtcbiAgdmFyIG5ld0RhdGFJbmRleCA9IDA7XG4gIHZhciBpO1xuICB2YXIgcHJldkl0ZW07XG4gIHZhciB0aW1lc0luc2VydGlvblBvaW50O1xuICB2YXIgdmFsdWVzSW5zZXJ0aW9uUG9pbnQ7XG4gIHZhciBjdXJyZW50VGltZTtcbiAgdmFyIG5leHRUaW1lO1xuXG4gIHdoaWxlIChuZXdEYXRhSW5kZXggPCBuZXdEYXRhLmxlbmd0aCkge1xuICAgIGN1cnJlbnRUaW1lID0gY29udmVydERhdGUobmV3RGF0YVtuZXdEYXRhSW5kZXhdLCBlcG9jaCk7XG4gICAgdGltZXNJbnNlcnRpb25Qb2ludCA9IGJpbmFyeVNlYXJjaCh0aW1lcywgY3VycmVudFRpbWUsIEp1bGlhbkRhdGUuY29tcGFyZSk7XG4gICAgdmFyIHRpbWVzU3BsaWNlQXJnc0NvdW50ID0gMDtcbiAgICB2YXIgdmFsdWVzU3BsaWNlQXJnc0NvdW50ID0gMDtcblxuICAgIGlmICh0aW1lc0luc2VydGlvblBvaW50IDwgMCkge1xuICAgICAgLy9Eb2Vzbid0IGV4aXN0LCBpbnNlcnQgYXMgbWFueSBhZGRpdGlvbmFsIHZhbHVlcyBhcyB3ZSBjYW4uXG4gICAgICB0aW1lc0luc2VydGlvblBvaW50ID0gfnRpbWVzSW5zZXJ0aW9uUG9pbnQ7XG5cbiAgICAgIHZhbHVlc0luc2VydGlvblBvaW50ID0gdGltZXNJbnNlcnRpb25Qb2ludCAqIHBhY2tlZExlbmd0aDtcbiAgICAgIHByZXZJdGVtID0gdW5kZWZpbmVkO1xuICAgICAgbmV4dFRpbWUgPSB0aW1lc1t0aW1lc0luc2VydGlvblBvaW50XTtcbiAgICAgIHdoaWxlIChuZXdEYXRhSW5kZXggPCBuZXdEYXRhLmxlbmd0aCkge1xuICAgICAgICBjdXJyZW50VGltZSA9IGNvbnZlcnREYXRlKG5ld0RhdGFbbmV3RGF0YUluZGV4XSwgZXBvY2gpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgKGRlZmluZWQocHJldkl0ZW0pICYmXG4gICAgICAgICAgICBKdWxpYW5EYXRlLmNvbXBhcmUocHJldkl0ZW0sIGN1cnJlbnRUaW1lKSA+PSAwKSB8fFxuICAgICAgICAgIChkZWZpbmVkKG5leHRUaW1lKSAmJiBKdWxpYW5EYXRlLmNvbXBhcmUoY3VycmVudFRpbWUsIG5leHRUaW1lKSA+PSAwKVxuICAgICAgICApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aW1lc1NwbGljZUFyZ3NbdGltZXNTcGxpY2VBcmdzQ291bnQrK10gPSBjdXJyZW50VGltZTtcbiAgICAgICAgbmV3RGF0YUluZGV4ID0gbmV3RGF0YUluZGV4ICsgMTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhY2tlZExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFsdWVzU3BsaWNlQXJnc1t2YWx1ZXNTcGxpY2VBcmdzQ291bnQrK10gPSBuZXdEYXRhW25ld0RhdGFJbmRleF07XG4gICAgICAgICAgbmV3RGF0YUluZGV4ID0gbmV3RGF0YUluZGV4ICsgMTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2SXRlbSA9IGN1cnJlbnRUaW1lO1xuICAgICAgfVxuXG4gICAgICBpZiAodGltZXNTcGxpY2VBcmdzQ291bnQgPiAwKSB7XG4gICAgICAgIHZhbHVlc1NwbGljZUFyZ3MubGVuZ3RoID0gdmFsdWVzU3BsaWNlQXJnc0NvdW50O1xuICAgICAgICBhcnJheUluc2VydCh2YWx1ZXMsIHZhbHVlc0luc2VydGlvblBvaW50LCB2YWx1ZXNTcGxpY2VBcmdzKTtcblxuICAgICAgICB0aW1lc1NwbGljZUFyZ3MubGVuZ3RoID0gdGltZXNTcGxpY2VBcmdzQ291bnQ7XG4gICAgICAgIGFycmF5SW5zZXJ0KHRpbWVzLCB0aW1lc0luc2VydGlvblBvaW50LCB0aW1lc1NwbGljZUFyZ3MpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvL0ZvdW5kIGFuIGV4YWN0IG1hdGNoXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcGFja2VkTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbmV3RGF0YUluZGV4Kys7XG4gICAgICAgIHZhbHVlc1t0aW1lc0luc2VydGlvblBvaW50ICogcGFja2VkTGVuZ3RoICsgaV0gPSBuZXdEYXRhW25ld0RhdGFJbmRleF07XG4gICAgICB9XG4gICAgICBuZXdEYXRhSW5kZXgrKztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBIHtAbGluayBQcm9wZXJ0eX0gd2hvc2UgdmFsdWUgaXMgaW50ZXJwb2xhdGVkIGZvciBhIGdpdmVuIHRpbWUgZnJvbSB0aGVcbiAqIHByb3ZpZGVkIHNldCBvZiBzYW1wbGVzIGFuZCBzcGVjaWZpZWQgaW50ZXJwb2xhdGlvbiBhbGdvcml0aG0gYW5kIGRlZ3JlZS5cbiAqIEBhbGlhcyBTYW1wbGVkUHJvcGVydHlcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfFBhY2thYmxlfSB0eXBlIFRoZSB0eXBlIG9mIHByb3BlcnR5LlxuICogQHBhcmFtIHtQYWNrYWJsZVtdfSBbZGVyaXZhdGl2ZVR5cGVzXSBXaGVuIHN1cHBsaWVkLCBpbmRpY2F0ZXMgdGhhdCBzYW1wbGVzIHdpbGwgY29udGFpbiBkZXJpdmF0aXZlIGluZm9ybWF0aW9uIG9mIHRoZSBzcGVjaWZpZWQgdHlwZXMuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiAvL0NyZWF0ZSBhIGxpbmVhcmx5IGludGVycG9sYXRlZCBDYXJ0ZXNpYW4yXG4gKiB2YXIgcHJvcGVydHkgPSBuZXcgQ2VzaXVtLlNhbXBsZWRQcm9wZXJ0eShDZXNpdW0uQ2FydGVzaWFuMik7XG4gKlxuICogLy9Qb3B1bGF0ZSBpdCB3aXRoIGRhdGFcbiAqIHByb3BlcnR5LmFkZFNhbXBsZShDZXNpdW0uSnVsaWFuRGF0ZS5mcm9tSXNvODYwMSgnMjAxMi0wOC0wMVQwMDowMDowMC4wMFonKSwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKDAsIDApKTtcbiAqIHByb3BlcnR5LmFkZFNhbXBsZShDZXNpdW0uSnVsaWFuRGF0ZS5mcm9tSXNvODYwMSgnMjAxMi0wOC0wMlQwMDowMDowMC4wMFonKSwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKDQsIDcpKTtcbiAqXG4gKiAvL1JldHJpZXZlIGFuIGludGVycG9sYXRlZCB2YWx1ZVxuICogdmFyIHJlc3VsdCA9IHByb3BlcnR5LmdldFZhbHVlKENlc2l1bS5KdWxpYW5EYXRlLmZyb21Jc284NjAxKCcyMDEyLTA4LTAxVDEyOjAwOjAwLjAwWicpKTtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy9DcmVhdGUgYSBzaW1wbGUgbnVtZXJpYyBTYW1wbGVkUHJvcGVydHkgdGhhdCB1c2VzIHRoaXJkIGRlZ3JlZSBIZXJtaXRlIFBvbHlub21pYWwgQXBwcm94aW1hdGlvblxuICogdmFyIHByb3BlcnR5ID0gbmV3IENlc2l1bS5TYW1wbGVkUHJvcGVydHkoTnVtYmVyKTtcbiAqIHByb3BlcnR5LnNldEludGVycG9sYXRpb25PcHRpb25zKHtcbiAqICAgICBpbnRlcnBvbGF0aW9uRGVncmVlIDogMyxcbiAqICAgICBpbnRlcnBvbGF0aW9uQWxnb3JpdGhtIDogQ2VzaXVtLkhlcm1pdGVQb2x5bm9taWFsQXBwcm94aW1hdGlvblxuICogfSk7XG4gKlxuICogLy9Qb3B1bGF0ZSBpdCB3aXRoIGRhdGFcbiAqIHByb3BlcnR5LmFkZFNhbXBsZShDZXNpdW0uSnVsaWFuRGF0ZS5mcm9tSXNvODYwMSgnMjAxMi0wOC0wMVQwMDowMDowMC4wMFonKSwgMS4wKTtcbiAqIHByb3BlcnR5LmFkZFNhbXBsZShDZXNpdW0uSnVsaWFuRGF0ZS5mcm9tSXNvODYwMSgnMjAxMi0wOC0wMVQwMDowMTowMC4wMFonKSwgNi4wKTtcbiAqIHByb3BlcnR5LmFkZFNhbXBsZShDZXNpdW0uSnVsaWFuRGF0ZS5mcm9tSXNvODYwMSgnMjAxMi0wOC0wMVQwMDowMjowMC4wMFonKSwgMTIuMCk7XG4gKiBwcm9wZXJ0eS5hZGRTYW1wbGUoQ2VzaXVtLkp1bGlhbkRhdGUuZnJvbUlzbzg2MDEoJzIwMTItMDgtMDFUMDA6MDM6MzAuMDBaJyksIDUuMCk7XG4gKiBwcm9wZXJ0eS5hZGRTYW1wbGUoQ2VzaXVtLkp1bGlhbkRhdGUuZnJvbUlzbzg2MDEoJzIwMTItMDgtMDFUMDA6MDY6MzAuMDBaJyksIDIuMCk7XG4gKlxuICogLy9TYW1wbGVzIGNhbiBiZSBhZGRlZCBpbiBhbnkgb3JkZXIuXG4gKiBwcm9wZXJ0eS5hZGRTYW1wbGUoQ2VzaXVtLkp1bGlhbkRhdGUuZnJvbUlzbzg2MDEoJzIwMTItMDgtMDFUMDA6MDA6MzAuMDBaJyksIDYuMik7XG4gKlxuICogLy9SZXRyaWV2ZSBhbiBpbnRlcnBvbGF0ZWQgdmFsdWVcbiAqIHZhciByZXN1bHQgPSBwcm9wZXJ0eS5nZXRWYWx1ZShDZXNpdW0uSnVsaWFuRGF0ZS5mcm9tSXNvODYwMSgnMjAxMi0wOC0wMVQwMDowMjozNC4wMFonKSk7XG4gKlxuICogQHNlZSBTYW1wbGVkUG9zaXRpb25Qcm9wZXJ0eVxuICovXG5mdW5jdGlvbiBTYW1wbGVkUHJvcGVydHkodHlwZSwgZGVyaXZhdGl2ZVR5cGVzKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLmRlZmluZWQoXCJ0eXBlXCIsIHR5cGUpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgaW5uZXJUeXBlID0gdHlwZTtcbiAgaWYgKGlubmVyVHlwZSA9PT0gTnVtYmVyKSB7XG4gICAgaW5uZXJUeXBlID0gUGFja2FibGVOdW1iZXI7XG4gIH1cbiAgdmFyIHBhY2tlZExlbmd0aCA9IGlubmVyVHlwZS5wYWNrZWRMZW5ndGg7XG4gIHZhciBwYWNrZWRJbnRlcnBvbGF0aW9uTGVuZ3RoID0gZGVmYXVsdFZhbHVlKFxuICAgIGlubmVyVHlwZS5wYWNrZWRJbnRlcnBvbGF0aW9uTGVuZ3RoLFxuICAgIHBhY2tlZExlbmd0aFxuICApO1xuXG4gIHZhciBpbnB1dE9yZGVyID0gMDtcbiAgdmFyIGlubmVyRGVyaXZhdGl2ZVR5cGVzO1xuICBpZiAoZGVmaW5lZChkZXJpdmF0aXZlVHlwZXMpKSB7XG4gICAgdmFyIGxlbmd0aCA9IGRlcml2YXRpdmVUeXBlcy5sZW5ndGg7XG4gICAgaW5uZXJEZXJpdmF0aXZlVHlwZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVyaXZhdGl2ZVR5cGUgPSBkZXJpdmF0aXZlVHlwZXNbaV07XG4gICAgICBpZiAoZGVyaXZhdGl2ZVR5cGUgPT09IE51bWJlcikge1xuICAgICAgICBkZXJpdmF0aXZlVHlwZSA9IFBhY2thYmxlTnVtYmVyO1xuICAgICAgfVxuICAgICAgdmFyIGRlcml2YXRpdmVQYWNrZWRMZW5ndGggPSBkZXJpdmF0aXZlVHlwZS5wYWNrZWRMZW5ndGg7XG4gICAgICBwYWNrZWRMZW5ndGggKz0gZGVyaXZhdGl2ZVBhY2tlZExlbmd0aDtcbiAgICAgIHBhY2tlZEludGVycG9sYXRpb25MZW5ndGggKz0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBkZXJpdmF0aXZlVHlwZS5wYWNrZWRJbnRlcnBvbGF0aW9uTGVuZ3RoLFxuICAgICAgICBkZXJpdmF0aXZlUGFja2VkTGVuZ3RoXG4gICAgICApO1xuICAgICAgaW5uZXJEZXJpdmF0aXZlVHlwZXNbaV0gPSBkZXJpdmF0aXZlVHlwZTtcbiAgICB9XG4gICAgaW5wdXRPcmRlciA9IGxlbmd0aDtcbiAgfVxuXG4gIHRoaXMuX3R5cGUgPSB0eXBlO1xuICB0aGlzLl9pbm5lclR5cGUgPSBpbm5lclR5cGU7XG4gIHRoaXMuX2ludGVycG9sYXRpb25EZWdyZWUgPSAxO1xuICB0aGlzLl9pbnRlcnBvbGF0aW9uQWxnb3JpdGhtID0gTGluZWFyQXBwcm94aW1hdGlvbjtcbiAgdGhpcy5fbnVtYmVyT2ZQb2ludHMgPSAwO1xuICB0aGlzLl90aW1lcyA9IFtdO1xuICB0aGlzLl92YWx1ZXMgPSBbXTtcbiAgdGhpcy5feFRhYmxlID0gW107XG4gIHRoaXMuX3lUYWJsZSA9IFtdO1xuICB0aGlzLl9wYWNrZWRMZW5ndGggPSBwYWNrZWRMZW5ndGg7XG4gIHRoaXMuX3BhY2tlZEludGVycG9sYXRpb25MZW5ndGggPSBwYWNrZWRJbnRlcnBvbGF0aW9uTGVuZ3RoO1xuICB0aGlzLl91cGRhdGVUYWJsZUxlbmd0aCA9IHRydWU7XG4gIHRoaXMuX2ludGVycG9sYXRpb25SZXN1bHQgPSBuZXcgQXJyYXkocGFja2VkSW50ZXJwb2xhdGlvbkxlbmd0aCk7XG4gIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkID0gbmV3IEV2ZW50KCk7XG4gIHRoaXMuX2Rlcml2YXRpdmVUeXBlcyA9IGRlcml2YXRpdmVUeXBlcztcbiAgdGhpcy5faW5uZXJEZXJpdmF0aXZlVHlwZXMgPSBpbm5lckRlcml2YXRpdmVUeXBlcztcbiAgdGhpcy5faW5wdXRPcmRlciA9IGlucHV0T3JkZXI7XG4gIHRoaXMuX2ZvcndhcmRFeHRyYXBvbGF0aW9uVHlwZSA9IEV4dHJhcG9sYXRpb25UeXBlLk5PTkU7XG4gIHRoaXMuX2ZvcndhcmRFeHRyYXBvbGF0aW9uRHVyYXRpb24gPSAwO1xuICB0aGlzLl9iYWNrd2FyZEV4dHJhcG9sYXRpb25UeXBlID0gRXh0cmFwb2xhdGlvblR5cGUuTk9ORTtcbiAgdGhpcy5fYmFja3dhcmRFeHRyYXBvbGF0aW9uRHVyYXRpb24gPSAwO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhTYW1wbGVkUHJvcGVydHkucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyBpZiB0aGlzIHByb3BlcnR5IGlzIGNvbnN0YW50LiAgQSBwcm9wZXJ0eSBpcyBjb25zaWRlcmVkXG4gICAqIGNvbnN0YW50IGlmIGdldFZhbHVlIGFsd2F5cyByZXR1cm5zIHRoZSBzYW1lIHJlc3VsdCBmb3IgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQG1lbWJlcm9mIFNhbXBsZWRQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaXNDb25zdGFudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlcy5sZW5ndGggPT09IDA7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW5ldmVyIHRoZSBkZWZpbml0aW9uIG9mIHRoaXMgcHJvcGVydHkgY2hhbmdlcy5cbiAgICogVGhlIGRlZmluaXRpb24gaXMgY29uc2lkZXJlZCB0byBoYXZlIGNoYW5nZWQgaWYgYSBjYWxsIHRvIGdldFZhbHVlIHdvdWxkIHJldHVyblxuICAgKiBhIGRpZmZlcmVudCByZXN1bHQgZm9yIHRoZSBzYW1lIHRpbWUuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBkZWZpbml0aW9uQ2hhbmdlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0eXBlIG9mIHByb3BlcnR5LlxuICAgKiBAbWVtYmVyb2YgU2FtcGxlZFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Kn1cbiAgICovXG4gIHR5cGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90eXBlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkZXJpdmF0aXZlIHR5cGVzIHVzZWQgYnkgdGhpcyBwcm9wZXJ0eS5cbiAgICogQG1lbWJlcm9mIFNhbXBsZWRQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge1BhY2thYmxlW119XG4gICAqL1xuICBkZXJpdmF0aXZlVHlwZXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kZXJpdmF0aXZlVHlwZXM7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGRlZ3JlZSBvZiBpbnRlcnBvbGF0aW9uIHRvIHBlcmZvcm0gd2hlbiByZXRyaWV2aW5nIGEgdmFsdWUuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG4gIGludGVycG9sYXRpb25EZWdyZWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnBvbGF0aW9uRGVncmVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbnRlcnBvbGF0aW9uIGFsZ29yaXRobSB0byB1c2Ugd2hlbiByZXRyaWV2aW5nIGEgdmFsdWUuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtJbnRlcnBvbGF0aW9uQWxnb3JpdGhtfVxuICAgKiBAZGVmYXVsdCBMaW5lYXJBcHByb3hpbWF0aW9uXG4gICAqL1xuICBpbnRlcnBvbGF0aW9uQWxnb3JpdGhtOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faW50ZXJwb2xhdGlvbkFsZ29yaXRobTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSB0eXBlIG9mIGV4dHJhcG9sYXRpb24gdG8gcGVyZm9ybSB3aGVuIGEgdmFsdWVcbiAgICogaXMgcmVxdWVzdGVkIGF0IGEgdGltZSBhZnRlciBhbnkgYXZhaWxhYmxlIHNhbXBsZXMuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFeHRyYXBvbGF0aW9uVHlwZX1cbiAgICogQGRlZmF1bHQgRXh0cmFwb2xhdGlvblR5cGUuTk9ORVxuICAgKi9cbiAgZm9yd2FyZEV4dHJhcG9sYXRpb25UeXBlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZm9yd2FyZEV4dHJhcG9sYXRpb25UeXBlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl9mb3J3YXJkRXh0cmFwb2xhdGlvblR5cGUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2ZvcndhcmRFeHRyYXBvbGF0aW9uVHlwZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGFtb3VudCBvZiB0aW1lIHRvIGV4dHJhcG9sYXRlIGZvcndhcmQgYmVmb3JlXG4gICAqIHRoZSBwcm9wZXJ0eSBiZWNvbWVzIHVuZGVmaW5lZC4gIEEgdmFsdWUgb2YgMCB3aWxsIGV4dHJhcG9sYXRlIGZvcmV2ZXIuXG4gICAqIEBtZW1iZXJvZiBTYW1wbGVkUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIGZvcndhcmRFeHRyYXBvbGF0aW9uRHVyYXRpb246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9mb3J3YXJkRXh0cmFwb2xhdGlvbkR1cmF0aW9uO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl9mb3J3YXJkRXh0cmFwb2xhdGlvbkR1cmF0aW9uICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9mb3J3YXJkRXh0cmFwb2xhdGlvbkR1cmF0aW9uID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgdHlwZSBvZiBleHRyYXBvbGF0aW9uIHRvIHBlcmZvcm0gd2hlbiBhIHZhbHVlXG4gICAqIGlzIHJlcXVlc3RlZCBhdCBhIHRpbWUgYmVmb3JlIGFueSBhdmFpbGFibGUgc2FtcGxlcy5cbiAgICogQG1lbWJlcm9mIFNhbXBsZWRQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V4dHJhcG9sYXRpb25UeXBlfVxuICAgKiBAZGVmYXVsdCBFeHRyYXBvbGF0aW9uVHlwZS5OT05FXG4gICAqL1xuICBiYWNrd2FyZEV4dHJhcG9sYXRpb25UeXBlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYmFja3dhcmRFeHRyYXBvbGF0aW9uVHlwZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5fYmFja3dhcmRFeHRyYXBvbGF0aW9uVHlwZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fYmFja3dhcmRFeHRyYXBvbGF0aW9uVHlwZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGFtb3VudCBvZiB0aW1lIHRvIGV4dHJhcG9sYXRlIGJhY2t3YXJkXG4gICAqIGJlZm9yZSB0aGUgcHJvcGVydHkgYmVjb21lcyB1bmRlZmluZWQuICBBIHZhbHVlIG9mIDAgd2lsbCBleHRyYXBvbGF0ZSBmb3JldmVyLlxuICAgKiBAbWVtYmVyb2YgU2FtcGxlZFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICBiYWNrd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2JhY2t3YXJkRXh0cmFwb2xhdGlvbkR1cmF0aW9uO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl9iYWNrd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbiAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fYmFja3dhcmRFeHRyYXBvbGF0aW9uRHVyYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQucmFpc2VFdmVudCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IGF0IHRoZSBwcm92aWRlZCB0aW1lLlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIHZhbHVlLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXN1bHRdIFRoZSBvYmplY3QgdG8gc3RvcmUgdGhlIHZhbHVlIGludG8sIGlmIG9taXR0ZWQsIGEgbmV3IGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxuICogQHJldHVybnMge09iamVjdH0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgaW5zdGFuY2UgaWYgdGhlIHJlc3VsdCBwYXJhbWV0ZXIgd2FzIG5vdCBzdXBwbGllZC5cbiAqL1xuU2FtcGxlZFByb3BlcnR5LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh0aW1lLCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInRpbWVcIiwgdGltZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciB0aW1lcyA9IHRoaXMuX3RpbWVzO1xuICB2YXIgdGltZXNMZW5ndGggPSB0aW1lcy5sZW5ndGg7XG4gIGlmICh0aW1lc0xlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgdGltZW91dDtcbiAgdmFyIGlubmVyVHlwZSA9IHRoaXMuX2lubmVyVHlwZTtcbiAgdmFyIHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgdmFyIGluZGV4ID0gYmluYXJ5U2VhcmNoKHRpbWVzLCB0aW1lLCBKdWxpYW5EYXRlLmNvbXBhcmUpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICBpbmRleCA9IH5pbmRleDtcblxuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgdmFyIHN0YXJ0VGltZSA9IHRpbWVzW2luZGV4XTtcbiAgICAgIHRpbWVvdXQgPSB0aGlzLl9iYWNrd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbjtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fYmFja3dhcmRFeHRyYXBvbGF0aW9uVHlwZSA9PT0gRXh0cmFwb2xhdGlvblR5cGUuTk9ORSB8fFxuICAgICAgICAodGltZW91dCAhPT0gMCAmJlxuICAgICAgICAgIEp1bGlhbkRhdGUuc2Vjb25kc0RpZmZlcmVuY2Uoc3RhcnRUaW1lLCB0aW1lKSA+IHRpbWVvdXQpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9iYWNrd2FyZEV4dHJhcG9sYXRpb25UeXBlID09PSBFeHRyYXBvbGF0aW9uVHlwZS5IT0xEKSB7XG4gICAgICAgIHJldHVybiBpbm5lclR5cGUudW5wYWNrKHZhbHVlcywgMCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPj0gdGltZXNMZW5ndGgpIHtcbiAgICAgIGluZGV4ID0gdGltZXNMZW5ndGggLSAxO1xuICAgICAgdmFyIGVuZFRpbWUgPSB0aW1lc1tpbmRleF07XG4gICAgICB0aW1lb3V0ID0gdGhpcy5fZm9yd2FyZEV4dHJhcG9sYXRpb25EdXJhdGlvbjtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fZm9yd2FyZEV4dHJhcG9sYXRpb25UeXBlID09PSBFeHRyYXBvbGF0aW9uVHlwZS5OT05FIHx8XG4gICAgICAgICh0aW1lb3V0ICE9PSAwICYmIEp1bGlhbkRhdGUuc2Vjb25kc0RpZmZlcmVuY2UodGltZSwgZW5kVGltZSkgPiB0aW1lb3V0KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fZm9yd2FyZEV4dHJhcG9sYXRpb25UeXBlID09PSBFeHRyYXBvbGF0aW9uVHlwZS5IT0xEKSB7XG4gICAgICAgIGluZGV4ID0gdGltZXNMZW5ndGggLSAxO1xuICAgICAgICByZXR1cm4gaW5uZXJUeXBlLnVucGFjayh2YWx1ZXMsIGluZGV4ICogaW5uZXJUeXBlLnBhY2tlZExlbmd0aCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgeFRhYmxlID0gdGhpcy5feFRhYmxlO1xuICAgIHZhciB5VGFibGUgPSB0aGlzLl95VGFibGU7XG4gICAgdmFyIGludGVycG9sYXRpb25BbGdvcml0aG0gPSB0aGlzLl9pbnRlcnBvbGF0aW9uQWxnb3JpdGhtO1xuICAgIHZhciBwYWNrZWRJbnRlcnBvbGF0aW9uTGVuZ3RoID0gdGhpcy5fcGFja2VkSW50ZXJwb2xhdGlvbkxlbmd0aDtcbiAgICB2YXIgaW5wdXRPcmRlciA9IHRoaXMuX2lucHV0T3JkZXI7XG5cbiAgICBpZiAodGhpcy5fdXBkYXRlVGFibGVMZW5ndGgpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZVRhYmxlTGVuZ3RoID0gZmFsc2U7XG4gICAgICB2YXIgbnVtYmVyT2ZQb2ludHMgPSBNYXRoLm1pbihcbiAgICAgICAgaW50ZXJwb2xhdGlvbkFsZ29yaXRobS5nZXRSZXF1aXJlZERhdGFQb2ludHMoXG4gICAgICAgICAgdGhpcy5faW50ZXJwb2xhdGlvbkRlZ3JlZSxcbiAgICAgICAgICBpbnB1dE9yZGVyXG4gICAgICAgICksXG4gICAgICAgIHRpbWVzTGVuZ3RoXG4gICAgICApO1xuICAgICAgaWYgKG51bWJlck9mUG9pbnRzICE9PSB0aGlzLl9udW1iZXJPZlBvaW50cykge1xuICAgICAgICB0aGlzLl9udW1iZXJPZlBvaW50cyA9IG51bWJlck9mUG9pbnRzO1xuICAgICAgICB4VGFibGUubGVuZ3RoID0gbnVtYmVyT2ZQb2ludHM7XG4gICAgICAgIHlUYWJsZS5sZW5ndGggPSBudW1iZXJPZlBvaW50cyAqIHBhY2tlZEludGVycG9sYXRpb25MZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGRlZ3JlZSA9IHRoaXMuX251bWJlck9mUG9pbnRzIC0gMTtcbiAgICBpZiAoZGVncmVlIDwgMSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB2YXIgZmlyc3RJbmRleCA9IDA7XG4gICAgdmFyIGxhc3RJbmRleCA9IHRpbWVzTGVuZ3RoIC0gMTtcbiAgICB2YXIgcG9pbnRzSW5Db2xsZWN0aW9uID0gbGFzdEluZGV4IC0gZmlyc3RJbmRleCArIDE7XG5cbiAgICBpZiAocG9pbnRzSW5Db2xsZWN0aW9uID49IGRlZ3JlZSArIDEpIHtcbiAgICAgIHZhciBjb21wdXRlZEZpcnN0SW5kZXggPSBpbmRleCAtICgoZGVncmVlIC8gMikgfCAwKSAtIDE7XG4gICAgICBpZiAoY29tcHV0ZWRGaXJzdEluZGV4IDwgZmlyc3RJbmRleCkge1xuICAgICAgICBjb21wdXRlZEZpcnN0SW5kZXggPSBmaXJzdEluZGV4O1xuICAgICAgfVxuICAgICAgdmFyIGNvbXB1dGVkTGFzdEluZGV4ID0gY29tcHV0ZWRGaXJzdEluZGV4ICsgZGVncmVlO1xuICAgICAgaWYgKGNvbXB1dGVkTGFzdEluZGV4ID4gbGFzdEluZGV4KSB7XG4gICAgICAgIGNvbXB1dGVkTGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICBjb21wdXRlZEZpcnN0SW5kZXggPSBjb21wdXRlZExhc3RJbmRleCAtIGRlZ3JlZTtcbiAgICAgICAgaWYgKGNvbXB1dGVkRmlyc3RJbmRleCA8IGZpcnN0SW5kZXgpIHtcbiAgICAgICAgICBjb21wdXRlZEZpcnN0SW5kZXggPSBmaXJzdEluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpcnN0SW5kZXggPSBjb21wdXRlZEZpcnN0SW5kZXg7XG4gICAgICBsYXN0SW5kZXggPSBjb21wdXRlZExhc3RJbmRleDtcbiAgICB9XG4gICAgdmFyIGxlbmd0aCA9IGxhc3RJbmRleCAtIGZpcnN0SW5kZXggKyAxO1xuXG4gICAgLy8gQnVpbGQgdGhlIHRhYmxlc1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIHhUYWJsZVtpXSA9IEp1bGlhbkRhdGUuc2Vjb25kc0RpZmZlcmVuY2UoXG4gICAgICAgIHRpbWVzW2ZpcnN0SW5kZXggKyBpXSxcbiAgICAgICAgdGltZXNbbGFzdEluZGV4XVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIWRlZmluZWQoaW5uZXJUeXBlLmNvbnZlcnRQYWNrZWRBcnJheUZvckludGVycG9sYXRpb24pKSB7XG4gICAgICB2YXIgZGVzdGluYXRpb25JbmRleCA9IDA7XG4gICAgICB2YXIgcGFja2VkTGVuZ3RoID0gdGhpcy5fcGFja2VkTGVuZ3RoO1xuICAgICAgdmFyIHNvdXJjZUluZGV4ID0gZmlyc3RJbmRleCAqIHBhY2tlZExlbmd0aDtcbiAgICAgIHZhciBzdG9wID0gKGxhc3RJbmRleCArIDEpICogcGFja2VkTGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoc291cmNlSW5kZXggPCBzdG9wKSB7XG4gICAgICAgIHlUYWJsZVtkZXN0aW5hdGlvbkluZGV4XSA9IHZhbHVlc1tzb3VyY2VJbmRleF07XG4gICAgICAgIHNvdXJjZUluZGV4Kys7XG4gICAgICAgIGRlc3RpbmF0aW9uSW5kZXgrKztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaW5uZXJUeXBlLmNvbnZlcnRQYWNrZWRBcnJheUZvckludGVycG9sYXRpb24oXG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgZmlyc3RJbmRleCxcbiAgICAgICAgbGFzdEluZGV4LFxuICAgICAgICB5VGFibGVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gSW50ZXJwb2xhdGUhXG4gICAgdmFyIHggPSBKdWxpYW5EYXRlLnNlY29uZHNEaWZmZXJlbmNlKHRpbWUsIHRpbWVzW2xhc3RJbmRleF0pO1xuICAgIHZhciBpbnRlcnBvbGF0aW9uUmVzdWx0O1xuICAgIGlmIChpbnB1dE9yZGVyID09PSAwIHx8ICFkZWZpbmVkKGludGVycG9sYXRpb25BbGdvcml0aG0uaW50ZXJwb2xhdGUpKSB7XG4gICAgICBpbnRlcnBvbGF0aW9uUmVzdWx0ID0gaW50ZXJwb2xhdGlvbkFsZ29yaXRobS5pbnRlcnBvbGF0ZU9yZGVyWmVybyhcbiAgICAgICAgeCxcbiAgICAgICAgeFRhYmxlLFxuICAgICAgICB5VGFibGUsXG4gICAgICAgIHBhY2tlZEludGVycG9sYXRpb25MZW5ndGgsXG4gICAgICAgIHRoaXMuX2ludGVycG9sYXRpb25SZXN1bHRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB5U3RyaWRlID0gTWF0aC5mbG9vcihwYWNrZWRJbnRlcnBvbGF0aW9uTGVuZ3RoIC8gKGlucHV0T3JkZXIgKyAxKSk7XG4gICAgICBpbnRlcnBvbGF0aW9uUmVzdWx0ID0gaW50ZXJwb2xhdGlvbkFsZ29yaXRobS5pbnRlcnBvbGF0ZShcbiAgICAgICAgeCxcbiAgICAgICAgeFRhYmxlLFxuICAgICAgICB5VGFibGUsXG4gICAgICAgIHlTdHJpZGUsXG4gICAgICAgIGlucHV0T3JkZXIsXG4gICAgICAgIGlucHV0T3JkZXIsXG4gICAgICAgIHRoaXMuX2ludGVycG9sYXRpb25SZXN1bHRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFkZWZpbmVkKGlubmVyVHlwZS51bnBhY2tJbnRlcnBvbGF0aW9uUmVzdWx0KSkge1xuICAgICAgcmV0dXJuIGlubmVyVHlwZS51bnBhY2soaW50ZXJwb2xhdGlvblJlc3VsdCwgMCwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIGlubmVyVHlwZS51bnBhY2tJbnRlcnBvbGF0aW9uUmVzdWx0KFxuICAgICAgaW50ZXJwb2xhdGlvblJlc3VsdCxcbiAgICAgIHZhbHVlcyxcbiAgICAgIGZpcnN0SW5kZXgsXG4gICAgICBsYXN0SW5kZXgsXG4gICAgICByZXN1bHRcbiAgICApO1xuICB9XG4gIHJldHVybiBpbm5lclR5cGUudW5wYWNrKHZhbHVlcywgaW5kZXggKiB0aGlzLl9wYWNrZWRMZW5ndGgsIHJlc3VsdCk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGFsZ29yaXRobSBhbmQgZGVncmVlIHRvIHVzZSB3aGVuIGludGVycG9sYXRpbmcgYSB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7SW50ZXJwb2xhdGlvbkFsZ29yaXRobX0gW29wdGlvbnMuaW50ZXJwb2xhdGlvbkFsZ29yaXRobV0gVGhlIG5ldyBpbnRlcnBvbGF0aW9uIGFsZ29yaXRobS4gIElmIHVuZGVmaW5lZCwgdGhlIGV4aXN0aW5nIHByb3BlcnR5IHdpbGwgYmUgdW5jaGFuZ2VkLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmludGVycG9sYXRpb25EZWdyZWVdIFRoZSBuZXcgaW50ZXJwb2xhdGlvbiBkZWdyZWUuICBJZiB1bmRlZmluZWQsIHRoZSBleGlzdGluZyBwcm9wZXJ0eSB3aWxsIGJlIHVuY2hhbmdlZC5cbiAqL1xuU2FtcGxlZFByb3BlcnR5LnByb3RvdHlwZS5zZXRJbnRlcnBvbGF0aW9uT3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIGlmICghZGVmaW5lZChvcHRpb25zKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB2YWx1ZXNDaGFuZ2VkID0gZmFsc2U7XG5cbiAgdmFyIGludGVycG9sYXRpb25BbGdvcml0aG0gPSBvcHRpb25zLmludGVycG9sYXRpb25BbGdvcml0aG07XG4gIHZhciBpbnRlcnBvbGF0aW9uRGVncmVlID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uRGVncmVlO1xuXG4gIGlmIChcbiAgICBkZWZpbmVkKGludGVycG9sYXRpb25BbGdvcml0aG0pICYmXG4gICAgdGhpcy5faW50ZXJwb2xhdGlvbkFsZ29yaXRobSAhPT0gaW50ZXJwb2xhdGlvbkFsZ29yaXRobVxuICApIHtcbiAgICB0aGlzLl9pbnRlcnBvbGF0aW9uQWxnb3JpdGhtID0gaW50ZXJwb2xhdGlvbkFsZ29yaXRobTtcbiAgICB2YWx1ZXNDaGFuZ2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChcbiAgICBkZWZpbmVkKGludGVycG9sYXRpb25EZWdyZWUpICYmXG4gICAgdGhpcy5faW50ZXJwb2xhdGlvbkRlZ3JlZSAhPT0gaW50ZXJwb2xhdGlvbkRlZ3JlZVxuICApIHtcbiAgICB0aGlzLl9pbnRlcnBvbGF0aW9uRGVncmVlID0gaW50ZXJwb2xhdGlvbkRlZ3JlZTtcbiAgICB2YWx1ZXNDaGFuZ2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmICh2YWx1ZXNDaGFuZ2VkKSB7XG4gICAgdGhpcy5fdXBkYXRlVGFibGVMZW5ndGggPSB0cnVlO1xuICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gIH1cbn07XG5cbi8qKlxuICogQWRkcyBhIG5ldyBzYW1wbGUuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSBzYW1wbGUgdGltZS5cbiAqIEBwYXJhbSB7UGFja2FibGV9IHZhbHVlIFRoZSB2YWx1ZSBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqIEBwYXJhbSB7UGFja2FibGVbXX0gW2Rlcml2YXRpdmVzXSBUaGUgYXJyYXkgb2YgZGVyaXZhdGl2ZXMgYXQgdGhlIHByb3ZpZGVkIHRpbWUuXG4gKi9cblNhbXBsZWRQcm9wZXJ0eS5wcm90b3R5cGUuYWRkU2FtcGxlID0gZnVuY3Rpb24gKHRpbWUsIHZhbHVlLCBkZXJpdmF0aXZlcykge1xuICB2YXIgaW5uZXJEZXJpdmF0aXZlVHlwZXMgPSB0aGlzLl9pbm5lckRlcml2YXRpdmVUeXBlcztcbiAgdmFyIGhhc0Rlcml2YXRpdmVzID0gZGVmaW5lZChpbm5lckRlcml2YXRpdmVUeXBlcyk7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInRpbWVcIiwgdGltZSk7XG4gIENoZWNrLmRlZmluZWQoXCJ2YWx1ZVwiLCB2YWx1ZSk7XG4gIGlmIChoYXNEZXJpdmF0aXZlcykge1xuICAgIENoZWNrLmRlZmluZWQoXCJkZXJpdmF0aXZlc1wiLCBkZXJpdmF0aXZlcyk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGlubmVyVHlwZSA9IHRoaXMuX2lubmVyVHlwZTtcbiAgdmFyIGRhdGEgPSBbXTtcbiAgZGF0YS5wdXNoKHRpbWUpO1xuICBpbm5lclR5cGUucGFjayh2YWx1ZSwgZGF0YSwgZGF0YS5sZW5ndGgpO1xuXG4gIGlmIChoYXNEZXJpdmF0aXZlcykge1xuICAgIHZhciBkZXJpdmF0aXZlc0xlbmd0aCA9IGlubmVyRGVyaXZhdGl2ZVR5cGVzLmxlbmd0aDtcbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRlcml2YXRpdmVzTGVuZ3RoOyB4KyspIHtcbiAgICAgIGlubmVyRGVyaXZhdGl2ZVR5cGVzW3hdLnBhY2soZGVyaXZhdGl2ZXNbeF0sIGRhdGEsIGRhdGEubGVuZ3RoKTtcbiAgICB9XG4gIH1cbiAgbWVyZ2VOZXdTYW1wbGVzKFxuICAgIHVuZGVmaW5lZCxcbiAgICB0aGlzLl90aW1lcyxcbiAgICB0aGlzLl92YWx1ZXMsXG4gICAgZGF0YSxcbiAgICB0aGlzLl9wYWNrZWRMZW5ndGhcbiAgKTtcbiAgdGhpcy5fdXBkYXRlVGFibGVMZW5ndGggPSB0cnVlO1xuICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xufTtcblxuLyoqXG4gKiBBZGRzIGFuIGFycmF5IG9mIHNhbXBsZXMuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlW119IHRpbWVzIEFuIGFycmF5IG9mIEp1bGlhbkRhdGUgaW5zdGFuY2VzIHdoZXJlIGVhY2ggaW5kZXggaXMgYSBzYW1wbGUgdGltZS5cbiAqIEBwYXJhbSB7UGFja2FibGVbXX0gdmFsdWVzIFRoZSBhcnJheSBvZiB2YWx1ZXMsIHdoZXJlIGVhY2ggdmFsdWUgY29ycmVzcG9uZHMgdG8gdGhlIHByb3ZpZGVkIHRpbWVzIGluZGV4LlxuICogQHBhcmFtIHtBcnJheVtdfSBbZGVyaXZhdGl2ZVZhbHVlc10gQW4gYXJyYXkgd2hlcmUgZWFjaCBpdGVtIGlzIHRoZSBhcnJheSBvZiBkZXJpdmF0aXZlcyBhdCB0aGUgZXF1aXZhbGVudCB0aW1lIGluZGV4LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSB0aW1lcyBhbmQgdmFsdWVzIG11c3QgYmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IHRpbWVzIGFuZCBkZXJpdmF0aXZlVmFsdWVzIG11c3QgYmUgdGhlIHNhbWUgbGVuZ3RoLlxuICovXG5TYW1wbGVkUHJvcGVydHkucHJvdG90eXBlLmFkZFNhbXBsZXMgPSBmdW5jdGlvbiAoXG4gIHRpbWVzLFxuICB2YWx1ZXMsXG4gIGRlcml2YXRpdmVWYWx1ZXNcbikge1xuICB2YXIgaW5uZXJEZXJpdmF0aXZlVHlwZXMgPSB0aGlzLl9pbm5lckRlcml2YXRpdmVUeXBlcztcbiAgdmFyIGhhc0Rlcml2YXRpdmVzID0gZGVmaW5lZChpbm5lckRlcml2YXRpdmVUeXBlcyk7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInRpbWVzXCIsIHRpbWVzKTtcbiAgQ2hlY2suZGVmaW5lZChcInZhbHVlc1wiLCB2YWx1ZXMpO1xuICBpZiAodGltZXMubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidGltZXMgYW5kIHZhbHVlcyBtdXN0IGJlIHRoZSBzYW1lIGxlbmd0aC5cIik7XG4gIH1cbiAgaWYgKFxuICAgIGhhc0Rlcml2YXRpdmVzICYmXG4gICAgKCFkZWZpbmVkKGRlcml2YXRpdmVWYWx1ZXMpIHx8IGRlcml2YXRpdmVWYWx1ZXMubGVuZ3RoICE9PSB0aW1lcy5sZW5ndGgpXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwidGltZXMgYW5kIGRlcml2YXRpdmVWYWx1ZXMgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGguXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBpbm5lclR5cGUgPSB0aGlzLl9pbm5lclR5cGU7XG4gIHZhciBsZW5ndGggPSB0aW1lcy5sZW5ndGg7XG4gIHZhciBkYXRhID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBkYXRhLnB1c2godGltZXNbaV0pO1xuICAgIGlubmVyVHlwZS5wYWNrKHZhbHVlc1tpXSwgZGF0YSwgZGF0YS5sZW5ndGgpO1xuXG4gICAgaWYgKGhhc0Rlcml2YXRpdmVzKSB7XG4gICAgICB2YXIgZGVyaXZhdGl2ZXMgPSBkZXJpdmF0aXZlVmFsdWVzW2ldO1xuICAgICAgdmFyIGRlcml2YXRpdmVzTGVuZ3RoID0gaW5uZXJEZXJpdmF0aXZlVHlwZXMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBkZXJpdmF0aXZlc0xlbmd0aDsgeCsrKSB7XG4gICAgICAgIGlubmVyRGVyaXZhdGl2ZVR5cGVzW3hdLnBhY2soZGVyaXZhdGl2ZXNbeF0sIGRhdGEsIGRhdGEubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbWVyZ2VOZXdTYW1wbGVzKFxuICAgIHVuZGVmaW5lZCxcbiAgICB0aGlzLl90aW1lcyxcbiAgICB0aGlzLl92YWx1ZXMsXG4gICAgZGF0YSxcbiAgICB0aGlzLl9wYWNrZWRMZW5ndGhcbiAgKTtcbiAgdGhpcy5fdXBkYXRlVGFibGVMZW5ndGggPSB0cnVlO1xuICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xufTtcblxuLyoqXG4gKiBBZGRzIHNhbXBsZXMgYXMgYSBzaW5nbGUgcGFja2VkIGFycmF5IHdoZXJlIGVhY2ggbmV3IHNhbXBsZSBpcyByZXByZXNlbnRlZCBhcyBhIGRhdGUsXG4gKiBmb2xsb3dlZCBieSB0aGUgcGFja2VkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGFuZCBkZXJpdmF0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcltdfSBwYWNrZWRTYW1wbGVzIFRoZSBhcnJheSBvZiBwYWNrZWQgc2FtcGxlcy5cbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gW2Vwb2NoXSBJZiBhbnkgb2YgdGhlIGRhdGVzIGluIHBhY2tlZFNhbXBsZXMgYXJlIG51bWJlcnMsIHRoZXkgYXJlIGNvbnNpZGVyZWQgYW4gb2Zmc2V0IGZyb20gdGhpcyBlcG9jaCwgaW4gc2Vjb25kcy5cbiAqL1xuU2FtcGxlZFByb3BlcnR5LnByb3RvdHlwZS5hZGRTYW1wbGVzUGFja2VkQXJyYXkgPSBmdW5jdGlvbiAoXG4gIHBhY2tlZFNhbXBsZXMsXG4gIGVwb2NoXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInBhY2tlZFNhbXBsZXNcIiwgcGFja2VkU2FtcGxlcyk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIG1lcmdlTmV3U2FtcGxlcyhcbiAgICBlcG9jaCxcbiAgICB0aGlzLl90aW1lcyxcbiAgICB0aGlzLl92YWx1ZXMsXG4gICAgcGFja2VkU2FtcGxlcyxcbiAgICB0aGlzLl9wYWNrZWRMZW5ndGhcbiAgKTtcbiAgdGhpcy5fdXBkYXRlVGFibGVMZW5ndGggPSB0cnVlO1xuICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgc2FtcGxlIGF0IHRoZSBnaXZlbiB0aW1lLCBpZiBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgc2FtcGxlIHRpbWUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgYSBzYW1wbGUgYXQgdGltZSB3YXMgcmVtb3ZlZCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqL1xuU2FtcGxlZFByb3BlcnR5LnByb3RvdHlwZS5yZW1vdmVTYW1wbGUgPSBmdW5jdGlvbiAodGltZSkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay5kZWZpbmVkKFwidGltZVwiLCB0aW1lKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGluZGV4ID0gYmluYXJ5U2VhcmNoKHRoaXMuX3RpbWVzLCB0aW1lLCBKdWxpYW5EYXRlLmNvbXBhcmUpO1xuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJlbW92ZVNhbXBsZXModGhpcywgaW5kZXgsIDEpO1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmZ1bmN0aW9uIHJlbW92ZVNhbXBsZXMocHJvcGVydHksIHN0YXJ0SW5kZXgsIG51bWJlclRvUmVtb3ZlKSB7XG4gIHZhciBwYWNrZWRMZW5ndGggPSBwcm9wZXJ0eS5fcGFja2VkTGVuZ3RoO1xuICBwcm9wZXJ0eS5fdGltZXMuc3BsaWNlKHN0YXJ0SW5kZXgsIG51bWJlclRvUmVtb3ZlKTtcbiAgcHJvcGVydHkuX3ZhbHVlcy5zcGxpY2UoXG4gICAgc3RhcnRJbmRleCAqIHBhY2tlZExlbmd0aCxcbiAgICBudW1iZXJUb1JlbW92ZSAqIHBhY2tlZExlbmd0aFxuICApO1xuICBwcm9wZXJ0eS5fdXBkYXRlVGFibGVMZW5ndGggPSB0cnVlO1xuICBwcm9wZXJ0eS5fZGVmaW5pdGlvbkNoYW5nZWQucmFpc2VFdmVudChwcm9wZXJ0eSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgc2FtcGxlcyBmb3IgdGhlIGdpdmVuIHRpbWUgaW50ZXJ2YWwuXG4gKlxuICogQHBhcmFtIHtUaW1lSW50ZXJ2YWx9IHRpbWUgVGhlIHRpbWUgaW50ZXJ2YWwgZm9yIHdoaWNoIHRvIHJlbW92ZSBhbGwgc2FtcGxlcy5cbiAqL1xuU2FtcGxlZFByb3BlcnR5LnByb3RvdHlwZS5yZW1vdmVTYW1wbGVzID0gZnVuY3Rpb24gKHRpbWVJbnRlcnZhbCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay5kZWZpbmVkKFwidGltZUludGVydmFsXCIsIHRpbWVJbnRlcnZhbCk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciB0aW1lcyA9IHRoaXMuX3RpbWVzO1xuICB2YXIgc3RhcnRJbmRleCA9IGJpbmFyeVNlYXJjaCh0aW1lcywgdGltZUludGVydmFsLnN0YXJ0LCBKdWxpYW5EYXRlLmNvbXBhcmUpO1xuICBpZiAoc3RhcnRJbmRleCA8IDApIHtcbiAgICBzdGFydEluZGV4ID0gfnN0YXJ0SW5kZXg7XG4gIH0gZWxzZSBpZiAoIXRpbWVJbnRlcnZhbC5pc1N0YXJ0SW5jbHVkZWQpIHtcbiAgICArK3N0YXJ0SW5kZXg7XG4gIH1cbiAgdmFyIHN0b3BJbmRleCA9IGJpbmFyeVNlYXJjaCh0aW1lcywgdGltZUludGVydmFsLnN0b3AsIEp1bGlhbkRhdGUuY29tcGFyZSk7XG4gIGlmIChzdG9wSW5kZXggPCAwKSB7XG4gICAgc3RvcEluZGV4ID0gfnN0b3BJbmRleDtcbiAgfSBlbHNlIGlmICh0aW1lSW50ZXJ2YWwuaXNTdG9wSW5jbHVkZWQpIHtcbiAgICArK3N0b3BJbmRleDtcbiAgfVxuXG4gIHJlbW92ZVNhbXBsZXModGhpcywgc3RhcnRJbmRleCwgc3RvcEluZGV4IC0gc3RhcnRJbmRleCk7XG59O1xuXG4vKipcbiAqIENvbXBhcmVzIHRoaXMgcHJvcGVydHkgdG8gdGhlIHByb3ZpZGVkIHByb3BlcnR5IGFuZCByZXR1cm5zXG4gKiA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGV5IGFyZSBlcXVhbCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1Byb3BlcnR5fSBbb3RoZXJdIFRoZSBvdGhlciBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiBsZWZ0IGFuZCByaWdodCBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKi9cblNhbXBsZWRQcm9wZXJ0eS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIGlmICh0aGlzID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICghZGVmaW5lZChvdGhlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoXG4gICAgdGhpcy5fdHlwZSAhPT0gb3RoZXIuX3R5cGUgfHwgLy9cbiAgICB0aGlzLl9pbnRlcnBvbGF0aW9uRGVncmVlICE9PSBvdGhlci5faW50ZXJwb2xhdGlvbkRlZ3JlZSB8fCAvL1xuICAgIHRoaXMuX2ludGVycG9sYXRpb25BbGdvcml0aG0gIT09IG90aGVyLl9pbnRlcnBvbGF0aW9uQWxnb3JpdGhtXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBkZXJpdmF0aXZlVHlwZXMgPSB0aGlzLl9kZXJpdmF0aXZlVHlwZXM7XG4gIHZhciBoYXNEZXJpdmF0aXZlcyA9IGRlZmluZWQoZGVyaXZhdGl2ZVR5cGVzKTtcbiAgdmFyIG90aGVyRGVyaXZhdGl2ZVR5cGVzID0gb3RoZXIuX2Rlcml2YXRpdmVUeXBlcztcbiAgdmFyIG90aGVySGFzRGVyaXZhdGl2ZXMgPSBkZWZpbmVkKG90aGVyRGVyaXZhdGl2ZVR5cGVzKTtcbiAgaWYgKGhhc0Rlcml2YXRpdmVzICE9PSBvdGhlckhhc0Rlcml2YXRpdmVzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGk7XG4gIHZhciBsZW5ndGg7XG4gIGlmIChoYXNEZXJpdmF0aXZlcykge1xuICAgIGxlbmd0aCA9IGRlcml2YXRpdmVUeXBlcy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCAhPT0gb3RoZXJEZXJpdmF0aXZlVHlwZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZGVyaXZhdGl2ZVR5cGVzW2ldICE9PSBvdGhlckRlcml2YXRpdmVUeXBlc1tpXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIHRpbWVzID0gdGhpcy5fdGltZXM7XG4gIHZhciBvdGhlclRpbWVzID0gb3RoZXIuX3RpbWVzO1xuICBsZW5ndGggPSB0aW1lcy5sZW5ndGg7XG5cbiAgaWYgKGxlbmd0aCAhPT0gb3RoZXJUaW1lcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIUp1bGlhbkRhdGUuZXF1YWxzKHRpbWVzW2ldLCBvdGhlclRpbWVzW2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gIHZhciBvdGhlclZhbHVlcyA9IG90aGVyLl92YWx1ZXM7XG4gIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGg7XG5cbiAgLy9TaW5jZSB0aW1lIGxlbmd0aHMgYXJlIGVxdWFsLCB2YWx1ZXMgbGVuZ3RoIGFuZCBvdGhlciBsZW5ndGggYXJlIGd1YXJhbnRlZWQgdG8gYmUgZXF1YWwuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICh2YWx1ZXNbaV0gIT09IG90aGVyVmFsdWVzW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vL0V4cG9zZWQgZm9yIHRlc3RpbmcuXG5TYW1wbGVkUHJvcGVydHkuX21lcmdlTmV3U2FtcGxlcyA9IG1lcmdlTmV3U2FtcGxlcztcbmV4cG9ydCBkZWZhdWx0IFNhbXBsZWRQcm9wZXJ0eTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///23470\n')},42098:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50491);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14459);\n/* harmony import */ var _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(17964);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n/**\n * This is a temporary class for scaling position properties to the WGS84 surface.\n * It will go away or be refactored to support data with arbitrary height references.\n * @private\n */\nfunction ScaledPositionProperty(value) {\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._value = undefined;\n  this._removeSubscription = undefined;\n  this.setValue(value);\n}\n\nObject.defineProperties(ScaledPositionProperty.prototype, {\n  isConstant: {\n    get: function () {\n      return _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isConstant */ .Z.isConstant(this._value);\n    },\n  },\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n  referenceFrame: {\n    get: function () {\n      return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(this._value)\n        ? this._value.referenceFrame\n        : _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FIXED */ .Z.FIXED;\n    },\n  },\n});\n\nScaledPositionProperty.prototype.getValue = function (time, result) {\n  return this.getValueInReferenceFrame(time, _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FIXED */ .Z.FIXED, result);\n};\n\nScaledPositionProperty.prototype.setValue = function (value) {\n  if (this._value !== value) {\n    this._value = value;\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(this._removeSubscription)) {\n      this._removeSubscription();\n      this._removeSubscription = undefined;\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(value)) {\n      this._removeSubscription = value.definitionChanged.addEventListener(\n        this._raiseDefinitionChanged,\n        this\n      );\n    }\n    this._definitionChanged.raiseEvent(this);\n  }\n};\n\nScaledPositionProperty.prototype.getValueInReferenceFrame = function (\n  time,\n  referenceFrame,\n  result\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(time)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("time is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(referenceFrame)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("referenceFrame is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(this._value)) {\n    return undefined;\n  }\n\n  result = this._value.getValueInReferenceFrame(time, referenceFrame, result);\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(result)\n    ? _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].WGS84.scaleToGeodeticSurface */ .Z.WGS84.scaleToGeodeticSurface(result, result)\n    : undefined;\n};\n\nScaledPositionProperty.prototype.equals = function (other) {\n  return (\n    this === other ||\n    (other instanceof ScaledPositionProperty && this._value === other._value)\n  );\n};\n\nScaledPositionProperty.prototype._raiseDefinitionChanged = function () {\n  this._definitionChanged.raiseEvent(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ScaledPositionProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIwOTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlDO0FBQ2M7QUFDVjtBQUNSO0FBQ2tCO0FBQ2xCOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0RBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtRkFBbUI7QUFDaEMsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxhQUFhLHFFQUFPO0FBQ3BCO0FBQ0EsVUFBVSxvRkFBb0I7QUFDOUIsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0EsNkNBQTZDLG9GQUFvQjtBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxxRUFBTztBQUNmO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLHFFQUFPO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHFFQUFPO0FBQ2QsY0FBYyx3RUFBYztBQUM1QjtBQUNBLE9BQU8scUVBQU87QUFDZCxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7O0FBRUEsT0FBTyxxRUFBTztBQUNkO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLHFFQUFPO0FBQ2hCLE1BQU0sNkhBQXNDO0FBQzVDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLHNCQUFzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL1NjYWxlZFBvc2l0aW9uUHJvcGVydHkuanM/NzRhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFbGxpcHNvaWQgZnJvbSBcIi4uL0NvcmUvRWxsaXBzb2lkLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBSZWZlcmVuY2VGcmFtZSBmcm9tIFwiLi4vQ29yZS9SZWZlcmVuY2VGcmFtZS5qc1wiO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gXCIuL1Byb3BlcnR5LmpzXCI7XG5cbi8qKlxuICogVGhpcyBpcyBhIHRlbXBvcmFyeSBjbGFzcyBmb3Igc2NhbGluZyBwb3NpdGlvbiBwcm9wZXJ0aWVzIHRvIHRoZSBXR1M4NCBzdXJmYWNlLlxuICogSXQgd2lsbCBnbyBhd2F5IG9yIGJlIHJlZmFjdG9yZWQgdG8gc3VwcG9ydCBkYXRhIHdpdGggYXJiaXRyYXJ5IGhlaWdodCByZWZlcmVuY2VzLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gU2NhbGVkUG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSkge1xuICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl92YWx1ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcmVtb3ZlU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLnNldFZhbHVlKHZhbHVlKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoU2NhbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUsIHtcbiAgaXNDb25zdGFudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFByb3BlcnR5LmlzQ29uc3RhbnQodGhpcy5fdmFsdWUpO1xuICAgIH0sXG4gIH0sXG4gIGRlZmluaXRpb25DaGFuZ2VkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQ7XG4gICAgfSxcbiAgfSxcbiAgcmVmZXJlbmNlRnJhbWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkZWZpbmVkKHRoaXMuX3ZhbHVlKVxuICAgICAgICA/IHRoaXMuX3ZhbHVlLnJlZmVyZW5jZUZyYW1lXG4gICAgICAgIDogUmVmZXJlbmNlRnJhbWUuRklYRUQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5TY2FsZWRQb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh0aW1lLCByZXN1bHQpIHtcbiAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVJblJlZmVyZW5jZUZyYW1lKHRpbWUsIFJlZmVyZW5jZUZyYW1lLkZJWEVELCByZXN1bHQpO1xufTtcblxuU2NhbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKHRoaXMuX3ZhbHVlICE9PSB2YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG5cbiAgICBpZiAoZGVmaW5lZCh0aGlzLl9yZW1vdmVTdWJzY3JpcHRpb24pKSB7XG4gICAgICB0aGlzLl9yZW1vdmVTdWJzY3JpcHRpb24oKTtcbiAgICAgIHRoaXMuX3JlbW92ZVN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuX3JlbW92ZVN1YnNjcmlwdGlvbiA9IHZhbHVlLmRlZmluaXRpb25DaGFuZ2VkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIHRoaXMuX3JhaXNlRGVmaW5pdGlvbkNoYW5nZWQsXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gIH1cbn07XG5cblNjYWxlZFBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlLmdldFZhbHVlSW5SZWZlcmVuY2VGcmFtZSA9IGZ1bmN0aW9uIChcbiAgdGltZSxcbiAgcmVmZXJlbmNlRnJhbWUsXG4gIHJlc3VsdFxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh0aW1lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInRpbWUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChyZWZlcmVuY2VGcmFtZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJyZWZlcmVuY2VGcmFtZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3ZhbHVlKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXN1bHQgPSB0aGlzLl92YWx1ZS5nZXRWYWx1ZUluUmVmZXJlbmNlRnJhbWUodGltZSwgcmVmZXJlbmNlRnJhbWUsIHJlc3VsdCk7XG4gIHJldHVybiBkZWZpbmVkKHJlc3VsdClcbiAgICA/IEVsbGlwc29pZC5XR1M4NC5zY2FsZVRvR2VvZGV0aWNTdXJmYWNlKHJlc3VsdCwgcmVzdWx0KVxuICAgIDogdW5kZWZpbmVkO1xufTtcblxuU2NhbGVkUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIHJldHVybiAoXG4gICAgdGhpcyA9PT0gb3RoZXIgfHxcbiAgICAob3RoZXIgaW5zdGFuY2VvZiBTY2FsZWRQb3NpdGlvblByb3BlcnR5ICYmIHRoaXMuX3ZhbHVlID09PSBvdGhlci5fdmFsdWUpXG4gICk7XG59O1xuXG5TY2FsZWRQb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZS5fcmFpc2VEZWZpbml0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQucmFpc2VFdmVudCh0aGlzKTtcbn07XG5leHBvcnQgZGVmYXVsdCBTY2FsZWRQb3NpdGlvblByb3BlcnR5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///42098\n')},81189:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8629);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(92062);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47861);\n/* harmony import */ var _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24689);\n/* harmony import */ var _Core_OffsetGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82223);\n/* harmony import */ var _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37939);\n/* harmony import */ var _Scene_Primitive_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(34380);\n/* harmony import */ var _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69895);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20174);\n/* harmony import */ var _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(46317);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar colorScratch = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar distanceDisplayConditionScratch = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar defaultDistanceDisplayCondition = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar defaultOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO;\nvar offsetScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction Batch(\n  primitives,\n  translucent,\n  appearanceType,\n  depthFailAppearanceType,\n  depthFailMaterialProperty,\n  closed,\n  shadows\n) {\n  this.translucent = translucent;\n  this.appearanceType = appearanceType;\n  this.depthFailAppearanceType = depthFailAppearanceType;\n  this.depthFailMaterialProperty = depthFailMaterialProperty;\n  this.depthFailMaterial = undefined;\n  this.closed = closed;\n  this.shadows = shadows;\n  this.primitives = primitives;\n  this.createPrimitive = false;\n  this.waitingOnCreate = false;\n  this.primitive = undefined;\n  this.oldPrimitive = undefined;\n  this.geometry = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.updaters = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.updatersWithAttributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.attributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.subscriptions = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.showsUpdated = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.itemsToRemove = [];\n  this.invalidated = false;\n\n  var removeMaterialSubscription;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(depthFailMaterialProperty)) {\n    removeMaterialSubscription = depthFailMaterialProperty.definitionChanged.addEventListener(\n      Batch.prototype.onMaterialChanged,\n      this\n    );\n  }\n  this.removeMaterialSubscription = removeMaterialSubscription;\n}\n\nBatch.prototype.onMaterialChanged = function () {\n  this.invalidated = true;\n};\n\nBatch.prototype.isMaterial = function (updater) {\n  var material = this.depthFailMaterialProperty;\n  var updaterMaterial = updater.depthFailMaterialProperty;\n  if (updaterMaterial === material) {\n    return true;\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(material)) {\n    return material.equals(updaterMaterial);\n  }\n  return false;\n};\n\nBatch.prototype.add = function (updater, instance) {\n  var id = updater.id;\n  this.createPrimitive = true;\n  this.geometry.set(id, instance);\n  this.updaters.set(id, updater);\n  if (\n    !updater.hasConstantFill ||\n    !updater.fillMaterialProperty.isConstant ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(updater.distanceDisplayConditionProperty) ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(updater.terrainOffsetProperty)\n  ) {\n    this.updatersWithAttributes.set(id, updater);\n  } else {\n    var that = this;\n    this.subscriptions.set(\n      id,\n      updater.entity.definitionChanged.addEventListener(function (\n        entity,\n        propertyName,\n        newValue,\n        oldValue\n      ) {\n        if (propertyName === "isShowing") {\n          that.showsUpdated.set(updater.id, updater);\n        }\n      })\n    );\n  }\n};\n\nBatch.prototype.remove = function (updater) {\n  var id = updater.id;\n  this.createPrimitive = this.geometry.remove(id) || this.createPrimitive;\n  if (this.updaters.remove(id)) {\n    this.updatersWithAttributes.remove(id);\n    var unsubscribe = this.subscriptions.get(id);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(unsubscribe)) {\n      unsubscribe();\n      this.subscriptions.remove(id);\n      this.showsUpdated.remove(id);\n    }\n    return true;\n  }\n  return false;\n};\n\nBatch.prototype.update = function (time) {\n  var isUpdated = true;\n  var removedCount = 0;\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  var i;\n\n  if (this.createPrimitive) {\n    var geometries = this.geometry.values;\n    var geometriesLength = geometries.length;\n    if (geometriesLength > 0) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.oldPrimitive)) {\n          this.oldPrimitive = primitive;\n        } else {\n          primitives.remove(primitive);\n        }\n      }\n\n      var depthFailAppearance;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.depthFailAppearanceType)) {\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.depthFailMaterialProperty)) {\n          this.depthFailMaterial = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValue */ .Z.getValue(\n            time,\n            this.depthFailMaterialProperty,\n            this.depthFailMaterial\n          );\n        }\n        depthFailAppearance = new this.depthFailAppearanceType({\n          material: this.depthFailMaterial,\n          translucent: this.translucent,\n          closed: this.closed,\n        });\n      }\n\n      primitive = new _Scene_Primitive_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n        show: false,\n        asynchronous: true,\n        geometryInstances: geometries.slice(),\n        appearance: new this.appearanceType({\n          translucent: this.translucent,\n          closed: this.closed,\n        }),\n        depthFailAppearance: depthFailAppearance,\n        shadows: this.shadows,\n      });\n      primitives.add(primitive);\n      isUpdated = false;\n    } else {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive)) {\n        primitives.remove(primitive);\n        primitive = undefined;\n      }\n      var oldPrimitive = this.oldPrimitive;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(oldPrimitive)) {\n        primitives.remove(oldPrimitive);\n        this.oldPrimitive = undefined;\n      }\n    }\n\n    this.attributes.removeAll();\n    this.primitive = primitive;\n    this.createPrimitive = false;\n    this.waitingOnCreate = true;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive) && primitive.ready) {\n    primitive.show = true;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.oldPrimitive)) {\n      primitives.remove(this.oldPrimitive);\n      this.oldPrimitive = undefined;\n    }\n\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.depthFailAppearanceType) &&\n      !(this.depthFailMaterialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)\n    ) {\n      this.depthFailMaterial = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValue */ .Z.getValue(\n        time,\n        this.depthFailMaterialProperty,\n        this.depthFailMaterial\n      );\n      this.primitive.depthFailAppearance.material = this.depthFailMaterial;\n    }\n\n    var updatersWithAttributes = this.updatersWithAttributes.values;\n    var length = updatersWithAttributes.length;\n    var waitingOnCreate = this.waitingOnCreate;\n    for (i = 0; i < length; i++) {\n      var updater = updatersWithAttributes[i];\n      var instance = this.geometry.get(updater.id);\n\n      var attributes = this.attributes.get(instance.id.id);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes)) {\n        attributes = primitive.getGeometryInstanceAttributes(instance.id);\n        this.attributes.set(instance.id.id, attributes);\n      }\n\n      if (!updater.fillMaterialProperty.isConstant || waitingOnCreate) {\n        var colorProperty = updater.fillMaterialProperty.color;\n        var resultColor = _Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          colorProperty,\n          time,\n          _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE,\n          colorScratch\n        );\n        if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(attributes._lastColor, resultColor)) {\n          attributes._lastColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n            resultColor,\n            attributes._lastColor\n          );\n          attributes.color = _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].toValue */ .Z.toValue(\n            resultColor,\n            attributes.color\n          );\n          if (\n            (this.translucent && attributes.color[3] === 255) ||\n            (!this.translucent && attributes.color[3] !== 255)\n          ) {\n            this.itemsToRemove[removedCount++] = updater;\n          }\n        }\n      }\n\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.depthFailAppearanceType) &&\n        updater.depthFailMaterialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z &&\n        (!updater.depthFailMaterialProperty.isConstant || waitingOnCreate)\n      ) {\n        var depthFailColorProperty = updater.depthFailMaterialProperty.color;\n        var depthColor = _Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          depthFailColorProperty,\n          time,\n          _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE,\n          colorScratch\n        );\n        if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(attributes._lastDepthFailColor, depthColor)) {\n          attributes._lastDepthFailColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n            depthColor,\n            attributes._lastDepthFailColor\n          );\n          attributes.depthFailColor = _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].toValue */ .Z.toValue(\n            depthColor,\n            attributes.depthFailColor\n          );\n        }\n      }\n\n      var show =\n        updater.entity.isShowing &&\n        (updater.hasConstantFill || updater.isFilled(time));\n      var currentShow = attributes.show[0] === 1;\n      if (show !== currentShow) {\n        attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].toValue */ .Z.toValue(\n          show,\n          attributes.show\n        );\n      }\n\n      var distanceDisplayConditionProperty =\n        updater.distanceDisplayConditionProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(distanceDisplayConditionProperty)) {\n        var distanceDisplayCondition = _Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          distanceDisplayConditionProperty,\n          time,\n          defaultDistanceDisplayCondition,\n          distanceDisplayConditionScratch\n        );\n        if (\n          !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          )\n        ) {\n          attributes._lastDistanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          );\n          attributes.distanceDisplayCondition = _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toValue */ .Z.toValue(\n            distanceDisplayCondition,\n            attributes.distanceDisplayCondition\n          );\n        }\n      }\n\n      var offsetProperty = updater.terrainOffsetProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(offsetProperty)) {\n        var offset = _Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          offsetProperty,\n          time,\n          defaultOffset,\n          offsetScratch\n        );\n        if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(offset, attributes._lastOffset)) {\n          attributes._lastOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n            offset,\n            attributes._lastOffset\n          );\n          attributes.offset = _Core_OffsetGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toValue */ .Z.toValue(\n            offset,\n            attributes.offset\n          );\n        }\n      }\n    }\n\n    this.updateShows(primitive);\n    this.waitingOnCreate = false;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive) && !primitive.ready) {\n    isUpdated = false;\n  }\n  this.itemsToRemove.length = removedCount;\n  return isUpdated;\n};\n\nBatch.prototype.updateShows = function (primitive) {\n  var showsUpdated = this.showsUpdated.values;\n  var length = showsUpdated.length;\n  for (var i = 0; i < length; i++) {\n    var updater = showsUpdated[i];\n    var instance = this.geometry.get(updater.id);\n\n    var attributes = this.attributes.get(instance.id.id);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes)) {\n      attributes = primitive.getGeometryInstanceAttributes(instance.id);\n      this.attributes.set(instance.id.id, attributes);\n    }\n\n    var show = updater.entity.isShowing;\n    var currentShow = attributes.show[0] === 1;\n    if (show !== currentShow) {\n      attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].toValue */ .Z.toValue(\n        show,\n        attributes.show\n      );\n      instance.attributes.show.value[0] = attributes.show[0];\n    }\n  }\n  this.showsUpdated.removeAll();\n};\n\nBatch.prototype.contains = function (updater) {\n  return this.updaters.contains(updater.id);\n};\n\nBatch.prototype.getBoundingSphere = function (updater, result) {\n  var primitive = this.primitive;\n  if (!primitive.ready) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].PENDING */ .Z.PENDING;\n  }\n  var attributes = primitive.getGeometryInstanceAttributes(updater.entity);\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes.boundingSphere) || //\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes.show) && attributes.show[0] === 0)\n  ) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].FAILED */ .Z.FAILED;\n  }\n  attributes.boundingSphere.clone(result);\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].DONE */ .Z.DONE;\n};\n\nBatch.prototype.destroy = function () {\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive)) {\n    primitives.remove(primitive);\n  }\n  var oldPrimitive = this.oldPrimitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(oldPrimitive)) {\n    primitives.remove(oldPrimitive);\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.removeMaterialSubscription)) {\n    this.removeMaterialSubscription();\n  }\n};\n\n/**\n * @private\n */\nfunction StaticGeometryColorBatch(\n  primitives,\n  appearanceType,\n  depthFailAppearanceType,\n  closed,\n  shadows\n) {\n  this._solidItems = [];\n  this._translucentItems = [];\n  this._primitives = primitives;\n  this._appearanceType = appearanceType;\n  this._depthFailAppearanceType = depthFailAppearanceType;\n  this._closed = closed;\n  this._shadows = shadows;\n}\n\nStaticGeometryColorBatch.prototype.add = function (time, updater) {\n  var items;\n  var translucent;\n  var instance = updater.createFillGeometryInstance(time);\n  if (instance.attributes.color.value[3] === 255) {\n    items = this._solidItems;\n    translucent = false;\n  } else {\n    items = this._translucentItems;\n    translucent = true;\n  }\n\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    var item = items[i];\n    if (item.isMaterial(updater)) {\n      item.add(updater, instance);\n      return;\n    }\n  }\n  var batch = new Batch(\n    this._primitives,\n    translucent,\n    this._appearanceType,\n    this._depthFailAppearanceType,\n    updater.depthFailMaterialProperty,\n    this._closed,\n    this._shadows\n  );\n  batch.add(updater, instance);\n  items.push(batch);\n};\n\nfunction removeItem(items, updater) {\n  var length = items.length;\n  for (var i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.remove(updater)) {\n      if (item.updaters.length === 0) {\n        items.splice(i, 1);\n        item.destroy();\n      }\n      return true;\n    }\n  }\n  return false;\n}\n\nStaticGeometryColorBatch.prototype.remove = function (updater) {\n  if (!removeItem(this._solidItems, updater)) {\n    removeItem(this._translucentItems, updater);\n  }\n};\n\nfunction moveItems(batch, items, time) {\n  var itemsMoved = false;\n  var length = items.length;\n  for (var i = 0; i < length; ++i) {\n    var item = items[i];\n    var itemsToRemove = item.itemsToRemove;\n    var itemsToMoveLength = itemsToRemove.length;\n    if (itemsToMoveLength > 0) {\n      for (i = 0; i < itemsToMoveLength; i++) {\n        var updater = itemsToRemove[i];\n        item.remove(updater);\n        batch.add(time, updater);\n        itemsMoved = true;\n      }\n    }\n  }\n  return itemsMoved;\n}\n\nfunction updateItems(batch, items, time, isUpdated) {\n  var length = items.length;\n  var i;\n  for (i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.invalidated) {\n      items.splice(i, 1);\n      var updaters = item.updaters.values;\n      var updatersLength = updaters.length;\n      for (var h = 0; h < updatersLength; h++) {\n        batch.add(time, updaters[h]);\n      }\n      item.destroy();\n    }\n  }\n\n  length = items.length;\n  for (i = 0; i < length; ++i) {\n    isUpdated = items[i].update(time) && isUpdated;\n  }\n  return isUpdated;\n}\n\nStaticGeometryColorBatch.prototype.update = function (time) {\n  //Perform initial update\n  var isUpdated = updateItems(this, this._solidItems, time, true);\n  isUpdated =\n    updateItems(this, this._translucentItems, time, isUpdated) && isUpdated;\n\n  //If any items swapped between solid/translucent, we need to\n  //move them between batches\n  var solidsMoved = moveItems(this, this._solidItems, time);\n  var translucentsMoved = moveItems(this, this._translucentItems, time);\n\n  //If we moved anything around, we need to re-build the primitive\n  if (solidsMoved || translucentsMoved) {\n    isUpdated =\n      updateItems(this, this._solidItems, time, isUpdated) && isUpdated;\n    isUpdated =\n      updateItems(this, this._translucentItems, time, isUpdated) && isUpdated;\n  }\n\n  return isUpdated;\n};\n\nfunction getBoundingSphere(items, updater, result) {\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    var item = items[i];\n    if (item.contains(updater)) {\n      return item.getBoundingSphere(updater, result);\n    }\n  }\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].FAILED */ .Z.FAILED;\n}\n\nStaticGeometryColorBatch.prototype.getBoundingSphere = function (\n  updater,\n  result\n) {\n  var boundingSphere = getBoundingSphere(this._solidItems, updater, result);\n  if (boundingSphere === _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].FAILED */ .Z.FAILED) {\n    return getBoundingSphere(this._translucentItems, updater, result);\n  }\n  return boundingSphere;\n};\n\nfunction removeAllPrimitives(items) {\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    items[i].destroy();\n  }\n  items.length = 0;\n}\n\nStaticGeometryColorBatch.prototype.removeAllPrimitives = function () {\n  removeAllPrimitives(this._solidItems);\n  removeAllPrimitives(this._translucentItems);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (StaticGeometryColorBatch);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxzRkFBMEI7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzRkFBMEI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsd0JBQXdCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoLmpzPzU0ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFzc29jaWF0aXZlQXJyYXkgZnJvbSBcIi4uL0NvcmUvQXNzb2NpYXRpdmVBcnJheS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0NvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiBmcm9tIFwiLi4vQ29yZS9EaXN0YW5jZURpc3BsYXlDb25kaXRpb24uanNcIjtcbmltcG9ydCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBPZmZzZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL09mZnNldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9TaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IFByaW1pdGl2ZSBmcm9tIFwiLi4vU2NlbmUvUHJpbWl0aXZlLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmVTdGF0ZSBmcm9tIFwiLi9Cb3VuZGluZ1NwaGVyZVN0YXRlLmpzXCI7XG5pbXBvcnQgQ29sb3JNYXRlcmlhbFByb3BlcnR5IGZyb20gXCIuL0NvbG9yTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IE1hdGVyaWFsUHJvcGVydHkgZnJvbSBcIi4vTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gXCIuL1Byb3BlcnR5LmpzXCI7XG5cbnZhciBjb2xvclNjcmF0Y2ggPSBuZXcgQ29sb3IoKTtcbnZhciBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25TY3JhdGNoID0gbmV3IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbigpO1xudmFyIGRlZmF1bHREaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBuZXcgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKCk7XG52YXIgZGVmYXVsdE9mZnNldCA9IENhcnRlc2lhbjMuWkVSTztcbnZhciBvZmZzZXRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gQmF0Y2goXG4gIHByaW1pdGl2ZXMsXG4gIHRyYW5zbHVjZW50LFxuICBhcHBlYXJhbmNlVHlwZSxcbiAgZGVwdGhGYWlsQXBwZWFyYW5jZVR5cGUsXG4gIGRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHksXG4gIGNsb3NlZCxcbiAgc2hhZG93c1xuKSB7XG4gIHRoaXMudHJhbnNsdWNlbnQgPSB0cmFuc2x1Y2VudDtcbiAgdGhpcy5hcHBlYXJhbmNlVHlwZSA9IGFwcGVhcmFuY2VUeXBlO1xuICB0aGlzLmRlcHRoRmFpbEFwcGVhcmFuY2VUeXBlID0gZGVwdGhGYWlsQXBwZWFyYW5jZVR5cGU7XG4gIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSA9IGRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHk7XG4gIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWwgPSB1bmRlZmluZWQ7XG4gIHRoaXMuY2xvc2VkID0gY2xvc2VkO1xuICB0aGlzLnNoYWRvd3MgPSBzaGFkb3dzO1xuICB0aGlzLnByaW1pdGl2ZXMgPSBwcmltaXRpdmVzO1xuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IGZhbHNlO1xuICB0aGlzLndhaXRpbmdPbkNyZWF0ZSA9IGZhbHNlO1xuICB0aGlzLnByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5vbGRQcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuZ2VvbWV0cnkgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLnVwZGF0ZXJzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5hdHRyaWJ1dGVzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5zaG93c1VwZGF0ZWQgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLml0ZW1zVG9SZW1vdmUgPSBbXTtcbiAgdGhpcy5pbnZhbGlkYXRlZCA9IGZhbHNlO1xuXG4gIHZhciByZW1vdmVNYXRlcmlhbFN1YnNjcmlwdGlvbjtcbiAgaWYgKGRlZmluZWQoZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSkpIHtcbiAgICByZW1vdmVNYXRlcmlhbFN1YnNjcmlwdGlvbiA9IGRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHkuZGVmaW5pdGlvbkNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIEJhdGNoLnByb3RvdHlwZS5vbk1hdGVyaWFsQ2hhbmdlZCxcbiAgICAgIHRoaXNcbiAgICApO1xuICB9XG4gIHRoaXMucmVtb3ZlTWF0ZXJpYWxTdWJzY3JpcHRpb24gPSByZW1vdmVNYXRlcmlhbFN1YnNjcmlwdGlvbjtcbn1cblxuQmF0Y2gucHJvdG90eXBlLm9uTWF0ZXJpYWxDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmludmFsaWRhdGVkID0gdHJ1ZTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5pc01hdGVyaWFsID0gZnVuY3Rpb24gKHVwZGF0ZXIpIHtcbiAgdmFyIG1hdGVyaWFsID0gdGhpcy5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5O1xuICB2YXIgdXBkYXRlck1hdGVyaWFsID0gdXBkYXRlci5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5O1xuICBpZiAodXBkYXRlck1hdGVyaWFsID09PSBtYXRlcmlhbCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChkZWZpbmVkKG1hdGVyaWFsKSkge1xuICAgIHJldHVybiBtYXRlcmlhbC5lcXVhbHModXBkYXRlck1hdGVyaWFsKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHVwZGF0ZXIsIGluc3RhbmNlKSB7XG4gIHZhciBpZCA9IHVwZGF0ZXIuaWQ7XG4gIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcbiAgdGhpcy5nZW9tZXRyeS5zZXQoaWQsIGluc3RhbmNlKTtcbiAgdGhpcy51cGRhdGVycy5zZXQoaWQsIHVwZGF0ZXIpO1xuICBpZiAoXG4gICAgIXVwZGF0ZXIuaGFzQ29uc3RhbnRGaWxsIHx8XG4gICAgIXVwZGF0ZXIuZmlsbE1hdGVyaWFsUHJvcGVydHkuaXNDb25zdGFudCB8fFxuICAgICFQcm9wZXJ0eS5pc0NvbnN0YW50KHVwZGF0ZXIuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkpIHx8XG4gICAgIVByb3BlcnR5LmlzQ29uc3RhbnQodXBkYXRlci50ZXJyYWluT2Zmc2V0UHJvcGVydHkpXG4gICkge1xuICAgIHRoaXMudXBkYXRlcnNXaXRoQXR0cmlidXRlcy5zZXQoaWQsIHVwZGF0ZXIpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc2V0KFxuICAgICAgaWQsXG4gICAgICB1cGRhdGVyLmVudGl0eS5kZWZpbml0aW9uQ2hhbmdlZC5hZGRFdmVudExpc3RlbmVyKGZ1bmN0aW9uIChcbiAgICAgICAgZW50aXR5LFxuICAgICAgICBwcm9wZXJ0eU5hbWUsXG4gICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICBvbGRWYWx1ZVxuICAgICAgKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IFwiaXNTaG93aW5nXCIpIHtcbiAgICAgICAgICB0aGF0LnNob3dzVXBkYXRlZC5zZXQodXBkYXRlci5pZCwgdXBkYXRlcik7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgfVxufTtcblxuQmF0Y2gucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIHZhciBpZCA9IHVwZGF0ZXIuaWQ7XG4gIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gdGhpcy5nZW9tZXRyeS5yZW1vdmUoaWQpIHx8IHRoaXMuY3JlYXRlUHJpbWl0aXZlO1xuICBpZiAodGhpcy51cGRhdGVycy5yZW1vdmUoaWQpKSB7XG4gICAgdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnJlbW92ZShpZCk7XG4gICAgdmFyIHVuc3Vic2NyaWJlID0gdGhpcy5zdWJzY3JpcHRpb25zLmdldChpZCk7XG4gICAgaWYgKGRlZmluZWQodW5zdWJzY3JpYmUpKSB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnJlbW92ZShpZCk7XG4gICAgICB0aGlzLnNob3dzVXBkYXRlZC5yZW1vdmUoaWQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgdmFyIGlzVXBkYXRlZCA9IHRydWU7XG4gIHZhciByZW1vdmVkQ291bnQgPSAwO1xuICB2YXIgcHJpbWl0aXZlID0gdGhpcy5wcmltaXRpdmU7XG4gIHZhciBwcmltaXRpdmVzID0gdGhpcy5wcmltaXRpdmVzO1xuICB2YXIgaTtcblxuICBpZiAodGhpcy5jcmVhdGVQcmltaXRpdmUpIHtcbiAgICB2YXIgZ2VvbWV0cmllcyA9IHRoaXMuZ2VvbWV0cnkudmFsdWVzO1xuICAgIHZhciBnZW9tZXRyaWVzTGVuZ3RoID0gZ2VvbWV0cmllcy5sZW5ndGg7XG4gICAgaWYgKGdlb21ldHJpZXNMZW5ndGggPiAwKSB7XG4gICAgICBpZiAoZGVmaW5lZChwcmltaXRpdmUpKSB7XG4gICAgICAgIGlmICghZGVmaW5lZCh0aGlzLm9sZFByaW1pdGl2ZSkpIHtcbiAgICAgICAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmltaXRpdmVzLnJlbW92ZShwcmltaXRpdmUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBkZXB0aEZhaWxBcHBlYXJhbmNlO1xuICAgICAgaWYgKGRlZmluZWQodGhpcy5kZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSkpIHtcbiAgICAgICAgaWYgKGRlZmluZWQodGhpcy5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5KSkge1xuICAgICAgICAgIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWwgPSBNYXRlcmlhbFByb3BlcnR5LmdldFZhbHVlKFxuICAgICAgICAgICAgdGltZSxcbiAgICAgICAgICAgIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSxcbiAgICAgICAgICAgIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGRlcHRoRmFpbEFwcGVhcmFuY2UgPSBuZXcgdGhpcy5kZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSh7XG4gICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWwsXG4gICAgICAgICAgdHJhbnNsdWNlbnQ6IHRoaXMudHJhbnNsdWNlbnQsXG4gICAgICAgICAgY2xvc2VkOiB0aGlzLmNsb3NlZCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHByaW1pdGl2ZSA9IG5ldyBQcmltaXRpdmUoe1xuICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgYXN5bmNocm9ub3VzOiB0cnVlLFxuICAgICAgICBnZW9tZXRyeUluc3RhbmNlczogZ2VvbWV0cmllcy5zbGljZSgpLFxuICAgICAgICBhcHBlYXJhbmNlOiBuZXcgdGhpcy5hcHBlYXJhbmNlVHlwZSh7XG4gICAgICAgICAgdHJhbnNsdWNlbnQ6IHRoaXMudHJhbnNsdWNlbnQsXG4gICAgICAgICAgY2xvc2VkOiB0aGlzLmNsb3NlZCxcbiAgICAgICAgfSksXG4gICAgICAgIGRlcHRoRmFpbEFwcGVhcmFuY2U6IGRlcHRoRmFpbEFwcGVhcmFuY2UsXG4gICAgICAgIHNoYWRvd3M6IHRoaXMuc2hhZG93cyxcbiAgICAgIH0pO1xuICAgICAgcHJpbWl0aXZlcy5hZGQocHJpbWl0aXZlKTtcbiAgICAgIGlzVXBkYXRlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGVmaW5lZChwcmltaXRpdmUpKSB7XG4gICAgICAgIHByaW1pdGl2ZXMucmVtb3ZlKHByaW1pdGl2ZSk7XG4gICAgICAgIHByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBvbGRQcmltaXRpdmUgPSB0aGlzLm9sZFByaW1pdGl2ZTtcbiAgICAgIGlmIChkZWZpbmVkKG9sZFByaW1pdGl2ZSkpIHtcbiAgICAgICAgcHJpbWl0aXZlcy5yZW1vdmUob2xkUHJpbWl0aXZlKTtcbiAgICAgICAgdGhpcy5vbGRQcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hdHRyaWJ1dGVzLnJlbW92ZUFsbCgpO1xuICAgIHRoaXMucHJpbWl0aXZlID0gcHJpbWl0aXZlO1xuICAgIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gZmFsc2U7XG4gICAgdGhpcy53YWl0aW5nT25DcmVhdGUgPSB0cnVlO1xuICB9IGVsc2UgaWYgKGRlZmluZWQocHJpbWl0aXZlKSAmJiBwcmltaXRpdmUucmVhZHkpIHtcbiAgICBwcmltaXRpdmUuc2hvdyA9IHRydWU7XG4gICAgaWYgKGRlZmluZWQodGhpcy5vbGRQcmltaXRpdmUpKSB7XG4gICAgICBwcmltaXRpdmVzLnJlbW92ZSh0aGlzLm9sZFByaW1pdGl2ZSk7XG4gICAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkZWZpbmVkKHRoaXMuZGVwdGhGYWlsQXBwZWFyYW5jZVR5cGUpICYmXG4gICAgICAhKHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSBpbnN0YW5jZW9mIENvbG9yTWF0ZXJpYWxQcm9wZXJ0eSlcbiAgICApIHtcbiAgICAgIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWwgPSBNYXRlcmlhbFByb3BlcnR5LmdldFZhbHVlKFxuICAgICAgICB0aW1lLFxuICAgICAgICB0aGlzLmRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHksXG4gICAgICAgIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxcbiAgICAgICk7XG4gICAgICB0aGlzLnByaW1pdGl2ZS5kZXB0aEZhaWxBcHBlYXJhbmNlLm1hdGVyaWFsID0gdGhpcy5kZXB0aEZhaWxNYXRlcmlhbDtcbiAgICB9XG5cbiAgICB2YXIgdXBkYXRlcnNXaXRoQXR0cmlidXRlcyA9IHRoaXMudXBkYXRlcnNXaXRoQXR0cmlidXRlcy52YWx1ZXM7XG4gICAgdmFyIGxlbmd0aCA9IHVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXMubGVuZ3RoO1xuICAgIHZhciB3YWl0aW5nT25DcmVhdGUgPSB0aGlzLndhaXRpbmdPbkNyZWF0ZTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB1cGRhdGVyID0gdXBkYXRlcnNXaXRoQXR0cmlidXRlc1tpXTtcbiAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2VvbWV0cnkuZ2V0KHVwZGF0ZXIuaWQpO1xuXG4gICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcy5nZXQoaW5zdGFuY2UuaWQuaWQpO1xuICAgICAgaWYgKCFkZWZpbmVkKGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMoaW5zdGFuY2UuaWQpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuc2V0KGluc3RhbmNlLmlkLmlkLCBhdHRyaWJ1dGVzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5LmlzQ29uc3RhbnQgfHwgd2FpdGluZ09uQ3JlYXRlKSB7XG4gICAgICAgIHZhciBjb2xvclByb3BlcnR5ID0gdXBkYXRlci5maWxsTWF0ZXJpYWxQcm9wZXJ0eS5jb2xvcjtcbiAgICAgICAgdmFyIHJlc3VsdENvbG9yID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgICAgY29sb3JQcm9wZXJ0eSxcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIENvbG9yLldISVRFLFxuICAgICAgICAgIGNvbG9yU2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBpZiAoIUNvbG9yLmVxdWFscyhhdHRyaWJ1dGVzLl9sYXN0Q29sb3IsIHJlc3VsdENvbG9yKSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3RDb2xvciA9IENvbG9yLmNsb25lKFxuICAgICAgICAgICAgcmVzdWx0Q29sb3IsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0Q29sb3JcbiAgICAgICAgICApO1xuICAgICAgICAgIGF0dHJpYnV0ZXMuY29sb3IgPSBDb2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgICAgIHJlc3VsdENvbG9yLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5jb2xvclxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHRoaXMudHJhbnNsdWNlbnQgJiYgYXR0cmlidXRlcy5jb2xvclszXSA9PT0gMjU1KSB8fFxuICAgICAgICAgICAgKCF0aGlzLnRyYW5zbHVjZW50ICYmIGF0dHJpYnV0ZXMuY29sb3JbM10gIT09IDI1NSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNUb1JlbW92ZVtyZW1vdmVkQ291bnQrK10gPSB1cGRhdGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGRlZmluZWQodGhpcy5kZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSkgJiZcbiAgICAgICAgdXBkYXRlci5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5IGluc3RhbmNlb2YgQ29sb3JNYXRlcmlhbFByb3BlcnR5ICYmXG4gICAgICAgICghdXBkYXRlci5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5LmlzQ29uc3RhbnQgfHwgd2FpdGluZ09uQ3JlYXRlKVxuICAgICAgKSB7XG4gICAgICAgIHZhciBkZXB0aEZhaWxDb2xvclByb3BlcnR5ID0gdXBkYXRlci5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5LmNvbG9yO1xuICAgICAgICB2YXIgZGVwdGhDb2xvciA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgICAgICAgIGRlcHRoRmFpbENvbG9yUHJvcGVydHksXG4gICAgICAgICAgdGltZSxcbiAgICAgICAgICBDb2xvci5XSElURSxcbiAgICAgICAgICBjb2xvclNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFDb2xvci5lcXVhbHMoYXR0cmlidXRlcy5fbGFzdERlcHRoRmFpbENvbG9yLCBkZXB0aENvbG9yKSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3REZXB0aEZhaWxDb2xvciA9IENvbG9yLmNsb25lKFxuICAgICAgICAgICAgZGVwdGhDb2xvcixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3REZXB0aEZhaWxDb2xvclxuICAgICAgICAgICk7XG4gICAgICAgICAgYXR0cmlidXRlcy5kZXB0aEZhaWxDb2xvciA9IENvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICAgICAgZGVwdGhDb2xvcixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuZGVwdGhGYWlsQ29sb3JcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93ID1cbiAgICAgICAgdXBkYXRlci5lbnRpdHkuaXNTaG93aW5nICYmXG4gICAgICAgICh1cGRhdGVyLmhhc0NvbnN0YW50RmlsbCB8fCB1cGRhdGVyLmlzRmlsbGVkKHRpbWUpKTtcbiAgICAgIHZhciBjdXJyZW50U2hvdyA9IGF0dHJpYnV0ZXMuc2hvd1swXSA9PT0gMTtcbiAgICAgIGlmIChzaG93ICE9PSBjdXJyZW50U2hvdykge1xuICAgICAgICBhdHRyaWJ1dGVzLnNob3cgPSBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICAgIHNob3csXG4gICAgICAgICAgYXR0cmlidXRlcy5zaG93XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eSA9XG4gICAgICAgIHVwZGF0ZXIuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHk7XG4gICAgICBpZiAoIVByb3BlcnR5LmlzQ29uc3RhbnQoZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkpKSB7XG4gICAgICAgIHZhciBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yRGVmYXVsdChcbiAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eSxcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIGRlZmF1bHREaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uU2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIURpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5lcXVhbHMoXG4gICAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmNsb25lKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICAgICk7XG4gICAgICAgICAgYXR0cmlidXRlcy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIG9mZnNldFByb3BlcnR5ID0gdXBkYXRlci50ZXJyYWluT2Zmc2V0UHJvcGVydHk7XG4gICAgICBpZiAoIVByb3BlcnR5LmlzQ29uc3RhbnQob2Zmc2V0UHJvcGVydHkpKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yRGVmYXVsdChcbiAgICAgICAgICBvZmZzZXRQcm9wZXJ0eSxcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIGRlZmF1bHRPZmZzZXQsXG4gICAgICAgICAgb2Zmc2V0U2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBpZiAoIUNhcnRlc2lhbjMuZXF1YWxzKG9mZnNldCwgYXR0cmlidXRlcy5fbGFzdE9mZnNldCkpIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0T2Zmc2V0ID0gQ2FydGVzaWFuMy5jbG9uZShcbiAgICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3RPZmZzZXRcbiAgICAgICAgICApO1xuICAgICAgICAgIGF0dHJpYnV0ZXMub2Zmc2V0ID0gT2Zmc2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgYXR0cmlidXRlcy5vZmZzZXRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTaG93cyhwcmltaXRpdmUpO1xuICAgIHRoaXMud2FpdGluZ09uQ3JlYXRlID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChwcmltaXRpdmUpICYmICFwcmltaXRpdmUucmVhZHkpIHtcbiAgICBpc1VwZGF0ZWQgPSBmYWxzZTtcbiAgfVxuICB0aGlzLml0ZW1zVG9SZW1vdmUubGVuZ3RoID0gcmVtb3ZlZENvdW50O1xuICByZXR1cm4gaXNVcGRhdGVkO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnVwZGF0ZVNob3dzID0gZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICB2YXIgc2hvd3NVcGRhdGVkID0gdGhpcy5zaG93c1VwZGF0ZWQudmFsdWVzO1xuICB2YXIgbGVuZ3RoID0gc2hvd3NVcGRhdGVkLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciB1cGRhdGVyID0gc2hvd3NVcGRhdGVkW2ldO1xuICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2VvbWV0cnkuZ2V0KHVwZGF0ZXIuaWQpO1xuXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0KGluc3RhbmNlLmlkLmlkKTtcbiAgICBpZiAoIWRlZmluZWQoYXR0cmlidXRlcykpIHtcbiAgICAgIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMoaW5zdGFuY2UuaWQpO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNldChpbnN0YW5jZS5pZC5pZCwgYXR0cmlidXRlcyk7XG4gICAgfVxuXG4gICAgdmFyIHNob3cgPSB1cGRhdGVyLmVudGl0eS5pc1Nob3dpbmc7XG4gICAgdmFyIGN1cnJlbnRTaG93ID0gYXR0cmlidXRlcy5zaG93WzBdID09PSAxO1xuICAgIGlmIChzaG93ICE9PSBjdXJyZW50U2hvdykge1xuICAgICAgYXR0cmlidXRlcy5zaG93ID0gU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgc2hvdyxcbiAgICAgICAgYXR0cmlidXRlcy5zaG93XG4gICAgICApO1xuICAgICAgaW5zdGFuY2UuYXR0cmlidXRlcy5zaG93LnZhbHVlWzBdID0gYXR0cmlidXRlcy5zaG93WzBdO1xuICAgIH1cbiAgfVxuICB0aGlzLnNob3dzVXBkYXRlZC5yZW1vdmVBbGwoKTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIHJldHVybiB0aGlzLnVwZGF0ZXJzLmNvbnRhaW5zKHVwZGF0ZXIuaWQpO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLmdldEJvdW5kaW5nU3BoZXJlID0gZnVuY3Rpb24gKHVwZGF0ZXIsIHJlc3VsdCkge1xuICB2YXIgcHJpbWl0aXZlID0gdGhpcy5wcmltaXRpdmU7XG4gIGlmICghcHJpbWl0aXZlLnJlYWR5KSB7XG4gICAgcmV0dXJuIEJvdW5kaW5nU3BoZXJlU3RhdGUuUEVORElORztcbiAgfVxuICB2YXIgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5nZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyh1cGRhdGVyLmVudGl0eSk7XG4gIGlmIChcbiAgICAhZGVmaW5lZChhdHRyaWJ1dGVzKSB8fFxuICAgICFkZWZpbmVkKGF0dHJpYnV0ZXMuYm91bmRpbmdTcGhlcmUpIHx8IC8vXG4gICAgKGRlZmluZWQoYXR0cmlidXRlcy5zaG93KSAmJiBhdHRyaWJ1dGVzLnNob3dbMF0gPT09IDApXG4gICkge1xuICAgIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLkZBSUxFRDtcbiAgfVxuICBhdHRyaWJ1dGVzLmJvdW5kaW5nU3BoZXJlLmNsb25lKHJlc3VsdCk7XG4gIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLkRPTkU7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHByaW1pdGl2ZSA9IHRoaXMucHJpbWl0aXZlO1xuICB2YXIgcHJpbWl0aXZlcyA9IHRoaXMucHJpbWl0aXZlcztcbiAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgIHByaW1pdGl2ZXMucmVtb3ZlKHByaW1pdGl2ZSk7XG4gIH1cbiAgdmFyIG9sZFByaW1pdGl2ZSA9IHRoaXMub2xkUHJpbWl0aXZlO1xuICBpZiAoZGVmaW5lZChvbGRQcmltaXRpdmUpKSB7XG4gICAgcHJpbWl0aXZlcy5yZW1vdmUob2xkUHJpbWl0aXZlKTtcbiAgfVxuICBpZiAoZGVmaW5lZCh0aGlzLnJlbW92ZU1hdGVyaWFsU3Vic2NyaXB0aW9uKSkge1xuICAgIHRoaXMucmVtb3ZlTWF0ZXJpYWxTdWJzY3JpcHRpb24oKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBTdGF0aWNHZW9tZXRyeUNvbG9yQmF0Y2goXG4gIHByaW1pdGl2ZXMsXG4gIGFwcGVhcmFuY2VUeXBlLFxuICBkZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSxcbiAgY2xvc2VkLFxuICBzaGFkb3dzXG4pIHtcbiAgdGhpcy5fc29saWRJdGVtcyA9IFtdO1xuICB0aGlzLl90cmFuc2x1Y2VudEl0ZW1zID0gW107XG4gIHRoaXMuX3ByaW1pdGl2ZXMgPSBwcmltaXRpdmVzO1xuICB0aGlzLl9hcHBlYXJhbmNlVHlwZSA9IGFwcGVhcmFuY2VUeXBlO1xuICB0aGlzLl9kZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSA9IGRlcHRoRmFpbEFwcGVhcmFuY2VUeXBlO1xuICB0aGlzLl9jbG9zZWQgPSBjbG9zZWQ7XG4gIHRoaXMuX3NoYWRvd3MgPSBzaGFkb3dzO1xufVxuXG5TdGF0aWNHZW9tZXRyeUNvbG9yQmF0Y2gucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0aW1lLCB1cGRhdGVyKSB7XG4gIHZhciBpdGVtcztcbiAgdmFyIHRyYW5zbHVjZW50O1xuICB2YXIgaW5zdGFuY2UgPSB1cGRhdGVyLmNyZWF0ZUZpbGxHZW9tZXRyeUluc3RhbmNlKHRpbWUpO1xuICBpZiAoaW5zdGFuY2UuYXR0cmlidXRlcy5jb2xvci52YWx1ZVszXSA9PT0gMjU1KSB7XG4gICAgaXRlbXMgPSB0aGlzLl9zb2xpZEl0ZW1zO1xuICAgIHRyYW5zbHVjZW50ID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgaXRlbXMgPSB0aGlzLl90cmFuc2x1Y2VudEl0ZW1zO1xuICAgIHRyYW5zbHVjZW50ID0gdHJ1ZTtcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLmlzTWF0ZXJpYWwodXBkYXRlcikpIHtcbiAgICAgIGl0ZW0uYWRkKHVwZGF0ZXIsIGluc3RhbmNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgdmFyIGJhdGNoID0gbmV3IEJhdGNoKFxuICAgIHRoaXMuX3ByaW1pdGl2ZXMsXG4gICAgdHJhbnNsdWNlbnQsXG4gICAgdGhpcy5fYXBwZWFyYW5jZVR5cGUsXG4gICAgdGhpcy5fZGVwdGhGYWlsQXBwZWFyYW5jZVR5cGUsXG4gICAgdXBkYXRlci5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5LFxuICAgIHRoaXMuX2Nsb3NlZCxcbiAgICB0aGlzLl9zaGFkb3dzXG4gICk7XG4gIGJhdGNoLmFkZCh1cGRhdGVyLCBpbnN0YW5jZSk7XG4gIGl0ZW1zLnB1c2goYmF0Y2gpO1xufTtcblxuZnVuY3Rpb24gcmVtb3ZlSXRlbShpdGVtcywgdXBkYXRlcikge1xuICB2YXIgbGVuZ3RoID0gaXRlbXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gbGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLnJlbW92ZSh1cGRhdGVyKSkge1xuICAgICAgaWYgKGl0ZW0udXBkYXRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGl0ZW1zLnNwbGljZShpLCAxKTtcbiAgICAgICAgaXRlbS5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5TdGF0aWNHZW9tZXRyeUNvbG9yQmF0Y2gucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIGlmICghcmVtb3ZlSXRlbSh0aGlzLl9zb2xpZEl0ZW1zLCB1cGRhdGVyKSkge1xuICAgIHJlbW92ZUl0ZW0odGhpcy5fdHJhbnNsdWNlbnRJdGVtcywgdXBkYXRlcik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG1vdmVJdGVtcyhiYXRjaCwgaXRlbXMsIHRpbWUpIHtcbiAgdmFyIGl0ZW1zTW92ZWQgPSBmYWxzZTtcbiAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgdmFyIGl0ZW1zVG9SZW1vdmUgPSBpdGVtLml0ZW1zVG9SZW1vdmU7XG4gICAgdmFyIGl0ZW1zVG9Nb3ZlTGVuZ3RoID0gaXRlbXNUb1JlbW92ZS5sZW5ndGg7XG4gICAgaWYgKGl0ZW1zVG9Nb3ZlTGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGl0ZW1zVG9Nb3ZlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHVwZGF0ZXIgPSBpdGVtc1RvUmVtb3ZlW2ldO1xuICAgICAgICBpdGVtLnJlbW92ZSh1cGRhdGVyKTtcbiAgICAgICAgYmF0Y2guYWRkKHRpbWUsIHVwZGF0ZXIpO1xuICAgICAgICBpdGVtc01vdmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGl0ZW1zTW92ZWQ7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUl0ZW1zKGJhdGNoLCBpdGVtcywgdGltZSwgaXNVcGRhdGVkKSB7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIHZhciBpO1xuICBmb3IgKGkgPSBsZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgaWYgKGl0ZW0uaW52YWxpZGF0ZWQpIHtcbiAgICAgIGl0ZW1zLnNwbGljZShpLCAxKTtcbiAgICAgIHZhciB1cGRhdGVycyA9IGl0ZW0udXBkYXRlcnMudmFsdWVzO1xuICAgICAgdmFyIHVwZGF0ZXJzTGVuZ3RoID0gdXBkYXRlcnMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCB1cGRhdGVyc0xlbmd0aDsgaCsrKSB7XG4gICAgICAgIGJhdGNoLmFkZCh0aW1lLCB1cGRhdGVyc1toXSk7XG4gICAgICB9XG4gICAgICBpdGVtLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cblxuICBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlzVXBkYXRlZCA9IGl0ZW1zW2ldLnVwZGF0ZSh0aW1lKSAmJiBpc1VwZGF0ZWQ7XG4gIH1cbiAgcmV0dXJuIGlzVXBkYXRlZDtcbn1cblxuU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodGltZSkge1xuICAvL1BlcmZvcm0gaW5pdGlhbCB1cGRhdGVcbiAgdmFyIGlzVXBkYXRlZCA9IHVwZGF0ZUl0ZW1zKHRoaXMsIHRoaXMuX3NvbGlkSXRlbXMsIHRpbWUsIHRydWUpO1xuICBpc1VwZGF0ZWQgPVxuICAgIHVwZGF0ZUl0ZW1zKHRoaXMsIHRoaXMuX3RyYW5zbHVjZW50SXRlbXMsIHRpbWUsIGlzVXBkYXRlZCkgJiYgaXNVcGRhdGVkO1xuXG4gIC8vSWYgYW55IGl0ZW1zIHN3YXBwZWQgYmV0d2VlbiBzb2xpZC90cmFuc2x1Y2VudCwgd2UgbmVlZCB0b1xuICAvL21vdmUgdGhlbSBiZXR3ZWVuIGJhdGNoZXNcbiAgdmFyIHNvbGlkc01vdmVkID0gbW92ZUl0ZW1zKHRoaXMsIHRoaXMuX3NvbGlkSXRlbXMsIHRpbWUpO1xuICB2YXIgdHJhbnNsdWNlbnRzTW92ZWQgPSBtb3ZlSXRlbXModGhpcywgdGhpcy5fdHJhbnNsdWNlbnRJdGVtcywgdGltZSk7XG5cbiAgLy9JZiB3ZSBtb3ZlZCBhbnl0aGluZyBhcm91bmQsIHdlIG5lZWQgdG8gcmUtYnVpbGQgdGhlIHByaW1pdGl2ZVxuICBpZiAoc29saWRzTW92ZWQgfHwgdHJhbnNsdWNlbnRzTW92ZWQpIHtcbiAgICBpc1VwZGF0ZWQgPVxuICAgICAgdXBkYXRlSXRlbXModGhpcywgdGhpcy5fc29saWRJdGVtcywgdGltZSwgaXNVcGRhdGVkKSAmJiBpc1VwZGF0ZWQ7XG4gICAgaXNVcGRhdGVkID1cbiAgICAgIHVwZGF0ZUl0ZW1zKHRoaXMsIHRoaXMuX3RyYW5zbHVjZW50SXRlbXMsIHRpbWUsIGlzVXBkYXRlZCkgJiYgaXNVcGRhdGVkO1xuICB9XG5cbiAgcmV0dXJuIGlzVXBkYXRlZDtcbn07XG5cbmZ1bmN0aW9uIGdldEJvdW5kaW5nU3BoZXJlKGl0ZW1zLCB1cGRhdGVyLCByZXN1bHQpIHtcbiAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgaWYgKGl0ZW0uY29udGFpbnModXBkYXRlcikpIHtcbiAgICAgIHJldHVybiBpdGVtLmdldEJvdW5kaW5nU3BoZXJlKHVwZGF0ZXIsIHJlc3VsdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLkZBSUxFRDtcbn1cblxuU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoLnByb3RvdHlwZS5nZXRCb3VuZGluZ1NwaGVyZSA9IGZ1bmN0aW9uIChcbiAgdXBkYXRlcixcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIGJvdW5kaW5nU3BoZXJlID0gZ2V0Qm91bmRpbmdTcGhlcmUodGhpcy5fc29saWRJdGVtcywgdXBkYXRlciwgcmVzdWx0KTtcbiAgaWYgKGJvdW5kaW5nU3BoZXJlID09PSBCb3VuZGluZ1NwaGVyZVN0YXRlLkZBSUxFRCkge1xuICAgIHJldHVybiBnZXRCb3VuZGluZ1NwaGVyZSh0aGlzLl90cmFuc2x1Y2VudEl0ZW1zLCB1cGRhdGVyLCByZXN1bHQpO1xuICB9XG4gIHJldHVybiBib3VuZGluZ1NwaGVyZTtcbn07XG5cbmZ1bmN0aW9uIHJlbW92ZUFsbFByaW1pdGl2ZXMoaXRlbXMpIHtcbiAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGl0ZW1zW2ldLmRlc3Ryb3koKTtcbiAgfVxuICBpdGVtcy5sZW5ndGggPSAwO1xufVxuXG5TdGF0aWNHZW9tZXRyeUNvbG9yQmF0Y2gucHJvdG90eXBlLnJlbW92ZUFsbFByaW1pdGl2ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJlbW92ZUFsbFByaW1pdGl2ZXModGhpcy5fc29saWRJdGVtcyk7XG4gIHJlbW92ZUFsbFByaW1pdGl2ZXModGhpcy5fdHJhbnNsdWNlbnRJdGVtcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///81189\n')},30487:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8629);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(92062);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47861);\n/* harmony import */ var _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24689);\n/* harmony import */ var _Core_OffsetGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82223);\n/* harmony import */ var _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37939);\n/* harmony import */ var _Scene_Primitive_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(34380);\n/* harmony import */ var _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(69895);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20174);\n/* harmony import */ var _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(46317);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar distanceDisplayConditionScratch = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar defaultDistanceDisplayCondition = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar defaultOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO;\nvar offsetScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction Batch(\n  primitives,\n  appearanceType,\n  materialProperty,\n  depthFailAppearanceType,\n  depthFailMaterialProperty,\n  closed,\n  shadows\n) {\n  this.primitives = primitives;\n  this.appearanceType = appearanceType;\n  this.materialProperty = materialProperty;\n  this.depthFailAppearanceType = depthFailAppearanceType;\n  this.depthFailMaterialProperty = depthFailMaterialProperty;\n  this.closed = closed;\n  this.shadows = shadows;\n  this.updaters = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.createPrimitive = true;\n  this.primitive = undefined;\n  this.oldPrimitive = undefined;\n  this.geometry = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.material = undefined;\n  this.depthFailMaterial = undefined;\n  this.updatersWithAttributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.attributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.invalidated = false;\n  this.removeMaterialSubscription = materialProperty.definitionChanged.addEventListener(\n    Batch.prototype.onMaterialChanged,\n    this\n  );\n  this.subscriptions = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.showsUpdated = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n}\n\nBatch.prototype.onMaterialChanged = function () {\n  this.invalidated = true;\n};\n\nBatch.prototype.isMaterial = function (updater) {\n  var material = this.materialProperty;\n  var updaterMaterial = updater.fillMaterialProperty;\n  var depthFailMaterial = this.depthFailMaterialProperty;\n  var updaterDepthFailMaterial = updater.depthFailMaterialProperty;\n\n  if (\n    updaterMaterial === material &&\n    updaterDepthFailMaterial === depthFailMaterial\n  ) {\n    return true;\n  }\n  var equals = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(material) && material.equals(updaterMaterial);\n  equals =\n    ((!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(depthFailMaterial) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(updaterDepthFailMaterial)) ||\n      ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(depthFailMaterial) &&\n        depthFailMaterial.equals(updaterDepthFailMaterial))) &&\n    equals;\n  return equals;\n};\n\nBatch.prototype.add = function (time, updater) {\n  var id = updater.id;\n  this.updaters.set(id, updater);\n  this.geometry.set(id, updater.createFillGeometryInstance(time));\n  if (\n    !updater.hasConstantFill ||\n    !updater.fillMaterialProperty.isConstant ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(updater.distanceDisplayConditionProperty) ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(updater.terrainOffsetProperty)\n  ) {\n    this.updatersWithAttributes.set(id, updater);\n  } else {\n    var that = this;\n    this.subscriptions.set(\n      id,\n      updater.entity.definitionChanged.addEventListener(function (\n        entity,\n        propertyName,\n        newValue,\n        oldValue\n      ) {\n        if (propertyName === "isShowing") {\n          that.showsUpdated.set(updater.id, updater);\n        }\n      })\n    );\n  }\n  this.createPrimitive = true;\n};\n\nBatch.prototype.remove = function (updater) {\n  var id = updater.id;\n  this.createPrimitive = this.geometry.remove(id) || this.createPrimitive;\n  if (this.updaters.remove(id)) {\n    this.updatersWithAttributes.remove(id);\n    var unsubscribe = this.subscriptions.get(id);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(unsubscribe)) {\n      unsubscribe();\n      this.subscriptions.remove(id);\n      this.showsUpdated.remove(id);\n    }\n    return true;\n  }\n  return false;\n};\n\nvar colorScratch = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nBatch.prototype.update = function (time) {\n  var isUpdated = true;\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  var geometries = this.geometry.values;\n  var i;\n\n  if (this.createPrimitive) {\n    var geometriesLength = geometries.length;\n    if (geometriesLength > 0) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.oldPrimitive)) {\n          this.oldPrimitive = primitive;\n        } else {\n          primitives.remove(primitive);\n        }\n      }\n\n      this.material = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValue */ .Z.getValue(\n        time,\n        this.materialProperty,\n        this.material\n      );\n\n      var depthFailAppearance;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.depthFailMaterialProperty)) {\n        this.depthFailMaterial = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValue */ .Z.getValue(\n          time,\n          this.depthFailMaterialProperty,\n          this.depthFailMaterial\n        );\n        depthFailAppearance = new this.depthFailAppearanceType({\n          material: this.depthFailMaterial,\n          translucent: this.depthFailMaterial.isTranslucent(),\n          closed: this.closed,\n        });\n      }\n\n      primitive = new _Scene_Primitive_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n        show: false,\n        asynchronous: true,\n        geometryInstances: geometries.slice(),\n        appearance: new this.appearanceType({\n          material: this.material,\n          translucent: this.material.isTranslucent(),\n          closed: this.closed,\n        }),\n        depthFailAppearance: depthFailAppearance,\n        shadows: this.shadows,\n      });\n\n      primitives.add(primitive);\n      isUpdated = false;\n    } else {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive)) {\n        primitives.remove(primitive);\n        primitive = undefined;\n      }\n      var oldPrimitive = this.oldPrimitive;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(oldPrimitive)) {\n        primitives.remove(oldPrimitive);\n        this.oldPrimitive = undefined;\n      }\n    }\n\n    this.attributes.removeAll();\n    this.primitive = primitive;\n    this.createPrimitive = false;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive) && primitive.ready) {\n    primitive.show = true;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.oldPrimitive)) {\n      primitives.remove(this.oldPrimitive);\n      this.oldPrimitive = undefined;\n    }\n\n    this.material = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValue */ .Z.getValue(\n      time,\n      this.materialProperty,\n      this.material\n    );\n    this.primitive.appearance.material = this.material;\n\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.depthFailAppearanceType) &&\n      !(this.depthFailMaterialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)\n    ) {\n      this.depthFailMaterial = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValue */ .Z.getValue(\n        time,\n        this.depthFailMaterialProperty,\n        this.depthFailMaterial\n      );\n      this.primitive.depthFailAppearance.material = this.depthFailMaterial;\n    }\n\n    var updatersWithAttributes = this.updatersWithAttributes.values;\n    var length = updatersWithAttributes.length;\n    for (i = 0; i < length; i++) {\n      var updater = updatersWithAttributes[i];\n      var entity = updater.entity;\n      var instance = this.geometry.get(updater.id);\n\n      var attributes = this.attributes.get(instance.id.id);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes)) {\n        attributes = primitive.getGeometryInstanceAttributes(instance.id);\n        this.attributes.set(instance.id.id, attributes);\n      }\n\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(this.depthFailAppearanceType) &&\n        this.depthFailMaterialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z &&\n        !updater.depthFailMaterialProperty.isConstant\n      ) {\n        var depthFailColorProperty = updater.depthFailMaterialProperty.color;\n        var depthFailColor = _Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          depthFailColorProperty,\n          time,\n          _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE,\n          colorScratch\n        );\n        if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(attributes._lastDepthFailColor, depthFailColor)) {\n          attributes._lastDepthFailColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n            depthFailColor,\n            attributes._lastDepthFailColor\n          );\n          attributes.depthFailColor = _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].toValue */ .Z.toValue(\n            depthFailColor,\n            attributes.depthFailColor\n          );\n        }\n      }\n\n      var show =\n        entity.isShowing && (updater.hasConstantFill || updater.isFilled(time));\n      var currentShow = attributes.show[0] === 1;\n      if (show !== currentShow) {\n        attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].toValue */ .Z.toValue(\n          show,\n          attributes.show\n        );\n      }\n\n      var distanceDisplayConditionProperty =\n        updater.distanceDisplayConditionProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(distanceDisplayConditionProperty)) {\n        var distanceDisplayCondition = _Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          distanceDisplayConditionProperty,\n          time,\n          defaultDistanceDisplayCondition,\n          distanceDisplayConditionScratch\n        );\n        if (\n          !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          )\n        ) {\n          attributes._lastDistanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          );\n          attributes.distanceDisplayCondition = _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toValue */ .Z.toValue(\n            distanceDisplayCondition,\n            attributes.distanceDisplayCondition\n          );\n        }\n      }\n\n      var offsetProperty = updater.terrainOffsetProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isConstant */ .Z.isConstant(offsetProperty)) {\n        var offset = _Property_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          offsetProperty,\n          time,\n          defaultOffset,\n          offsetScratch\n        );\n        if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(offset, attributes._lastOffset)) {\n          attributes._lastOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n            offset,\n            attributes._lastOffset\n          );\n          attributes.offset = _Core_OffsetGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toValue */ .Z.toValue(\n            offset,\n            attributes.offset\n          );\n        }\n      }\n    }\n\n    this.updateShows(primitive);\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive) && !primitive.ready) {\n    isUpdated = false;\n  }\n  return isUpdated;\n};\n\nBatch.prototype.updateShows = function (primitive) {\n  var showsUpdated = this.showsUpdated.values;\n  var length = showsUpdated.length;\n  for (var i = 0; i < length; i++) {\n    var updater = showsUpdated[i];\n    var entity = updater.entity;\n    var instance = this.geometry.get(updater.id);\n\n    var attributes = this.attributes.get(instance.id.id);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes)) {\n      attributes = primitive.getGeometryInstanceAttributes(instance.id);\n      this.attributes.set(instance.id.id, attributes);\n    }\n\n    var show = entity.isShowing;\n    var currentShow = attributes.show[0] === 1;\n    if (show !== currentShow) {\n      attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].toValue */ .Z.toValue(\n        show,\n        attributes.show\n      );\n      instance.attributes.show.value[0] = attributes.show[0];\n    }\n  }\n  this.showsUpdated.removeAll();\n};\n\nBatch.prototype.contains = function (updater) {\n  return this.updaters.contains(updater.id);\n};\n\nBatch.prototype.getBoundingSphere = function (updater, result) {\n  var primitive = this.primitive;\n  if (!primitive.ready) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].PENDING */ .Z.PENDING;\n  }\n  var attributes = primitive.getGeometryInstanceAttributes(updater.entity);\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes.boundingSphere) ||\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(attributes.show) && attributes.show[0] === 0)\n  ) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].FAILED */ .Z.FAILED;\n  }\n  attributes.boundingSphere.clone(result);\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].DONE */ .Z.DONE;\n};\n\nBatch.prototype.destroy = function () {\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive)) {\n    primitives.remove(primitive);\n  }\n  var oldPrimitive = this.oldPrimitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(oldPrimitive)) {\n    primitives.remove(oldPrimitive);\n  }\n  this.removeMaterialSubscription();\n};\n\n/**\n * @private\n */\nfunction StaticGeometryPerMaterialBatch(\n  primitives,\n  appearanceType,\n  depthFailAppearanceType,\n  closed,\n  shadows\n) {\n  this._items = [];\n  this._primitives = primitives;\n  this._appearanceType = appearanceType;\n  this._depthFailAppearanceType = depthFailAppearanceType;\n  this._closed = closed;\n  this._shadows = shadows;\n}\n\nStaticGeometryPerMaterialBatch.prototype.add = function (time, updater) {\n  var items = this._items;\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    var item = items[i];\n    if (item.isMaterial(updater)) {\n      item.add(time, updater);\n      return;\n    }\n  }\n  var batch = new Batch(\n    this._primitives,\n    this._appearanceType,\n    updater.fillMaterialProperty,\n    this._depthFailAppearanceType,\n    updater.depthFailMaterialProperty,\n    this._closed,\n    this._shadows\n  );\n  batch.add(time, updater);\n  items.push(batch);\n};\n\nStaticGeometryPerMaterialBatch.prototype.remove = function (updater) {\n  var items = this._items;\n  var length = items.length;\n  for (var i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.remove(updater)) {\n      if (item.updaters.length === 0) {\n        items.splice(i, 1);\n        item.destroy();\n      }\n      break;\n    }\n  }\n};\n\nStaticGeometryPerMaterialBatch.prototype.update = function (time) {\n  var i;\n  var items = this._items;\n  var length = items.length;\n\n  for (i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.invalidated) {\n      items.splice(i, 1);\n      var updaters = item.updaters.values;\n      var updatersLength = updaters.length;\n      for (var h = 0; h < updatersLength; h++) {\n        this.add(time, updaters[h]);\n      }\n      item.destroy();\n    }\n  }\n\n  var isUpdated = true;\n  for (i = 0; i < items.length; i++) {\n    isUpdated = items[i].update(time) && isUpdated;\n  }\n  return isUpdated;\n};\n\nStaticGeometryPerMaterialBatch.prototype.getBoundingSphere = function (\n  updater,\n  result\n) {\n  var items = this._items;\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    var item = items[i];\n    if (item.contains(updater)) {\n      return item.getBoundingSphere(updater, result);\n    }\n  }\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].FAILED */ .Z.FAILED;\n};\n\nStaticGeometryPerMaterialBatch.prototype.removeAllPrimitives = function () {\n  var items = this._items;\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    items[i].destroy();\n  }\n  this._items.length = 0;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (StaticGeometryPerMaterialBatch);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztBQUNiO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0VBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9CQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyxrQkFBa0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsc0ZBQTBCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsOEJBQThCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvU3RhdGljR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoLmpzP2JhYjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFzc29jaWF0aXZlQXJyYXkgZnJvbSBcIi4uL0NvcmUvQXNzb2NpYXRpdmVBcnJheS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0NvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiBmcm9tIFwiLi4vQ29yZS9EaXN0YW5jZURpc3BsYXlDb25kaXRpb24uanNcIjtcbmltcG9ydCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBPZmZzZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL09mZnNldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9TaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IFByaW1pdGl2ZSBmcm9tIFwiLi4vU2NlbmUvUHJpbWl0aXZlLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmVTdGF0ZSBmcm9tIFwiLi9Cb3VuZGluZ1NwaGVyZVN0YXRlLmpzXCI7XG5pbXBvcnQgQ29sb3JNYXRlcmlhbFByb3BlcnR5IGZyb20gXCIuL0NvbG9yTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IE1hdGVyaWFsUHJvcGVydHkgZnJvbSBcIi4vTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gXCIuL1Byb3BlcnR5LmpzXCI7XG5cbnZhciBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25TY3JhdGNoID0gbmV3IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbigpO1xudmFyIGRlZmF1bHREaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBuZXcgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKCk7XG52YXIgZGVmYXVsdE9mZnNldCA9IENhcnRlc2lhbjMuWkVSTztcbnZhciBvZmZzZXRTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gQmF0Y2goXG4gIHByaW1pdGl2ZXMsXG4gIGFwcGVhcmFuY2VUeXBlLFxuICBtYXRlcmlhbFByb3BlcnR5LFxuICBkZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSxcbiAgZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSxcbiAgY2xvc2VkLFxuICBzaGFkb3dzXG4pIHtcbiAgdGhpcy5wcmltaXRpdmVzID0gcHJpbWl0aXZlcztcbiAgdGhpcy5hcHBlYXJhbmNlVHlwZSA9IGFwcGVhcmFuY2VUeXBlO1xuICB0aGlzLm1hdGVyaWFsUHJvcGVydHkgPSBtYXRlcmlhbFByb3BlcnR5O1xuICB0aGlzLmRlcHRoRmFpbEFwcGVhcmFuY2VUeXBlID0gZGVwdGhGYWlsQXBwZWFyYW5jZVR5cGU7XG4gIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSA9IGRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHk7XG4gIHRoaXMuY2xvc2VkID0gY2xvc2VkO1xuICB0aGlzLnNoYWRvd3MgPSBzaGFkb3dzO1xuICB0aGlzLnVwZGF0ZXJzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xuICB0aGlzLnByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5vbGRQcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuZ2VvbWV0cnkgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLm1hdGVyaWFsID0gdW5kZWZpbmVkO1xuICB0aGlzLmRlcHRoRmFpbE1hdGVyaWFsID0gdW5kZWZpbmVkO1xuICB0aGlzLnVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLmF0dHJpYnV0ZXMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLmludmFsaWRhdGVkID0gZmFsc2U7XG4gIHRoaXMucmVtb3ZlTWF0ZXJpYWxTdWJzY3JpcHRpb24gPSBtYXRlcmlhbFByb3BlcnR5LmRlZmluaXRpb25DaGFuZ2VkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgQmF0Y2gucHJvdG90eXBlLm9uTWF0ZXJpYWxDaGFuZ2VkLFxuICAgIHRoaXNcbiAgKTtcbiAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5zaG93c1VwZGF0ZWQgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xufVxuXG5CYXRjaC5wcm90b3R5cGUub25NYXRlcmlhbENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuaW52YWxpZGF0ZWQgPSB0cnVlO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLmlzTWF0ZXJpYWwgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICB2YXIgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsUHJvcGVydHk7XG4gIHZhciB1cGRhdGVyTWF0ZXJpYWwgPSB1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5O1xuICB2YXIgZGVwdGhGYWlsTWF0ZXJpYWwgPSB0aGlzLmRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHk7XG4gIHZhciB1cGRhdGVyRGVwdGhGYWlsTWF0ZXJpYWwgPSB1cGRhdGVyLmRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHk7XG5cbiAgaWYgKFxuICAgIHVwZGF0ZXJNYXRlcmlhbCA9PT0gbWF0ZXJpYWwgJiZcbiAgICB1cGRhdGVyRGVwdGhGYWlsTWF0ZXJpYWwgPT09IGRlcHRoRmFpbE1hdGVyaWFsXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHZhciBlcXVhbHMgPSBkZWZpbmVkKG1hdGVyaWFsKSAmJiBtYXRlcmlhbC5lcXVhbHModXBkYXRlck1hdGVyaWFsKTtcbiAgZXF1YWxzID1cbiAgICAoKCFkZWZpbmVkKGRlcHRoRmFpbE1hdGVyaWFsKSAmJiAhZGVmaW5lZCh1cGRhdGVyRGVwdGhGYWlsTWF0ZXJpYWwpKSB8fFxuICAgICAgKGRlZmluZWQoZGVwdGhGYWlsTWF0ZXJpYWwpICYmXG4gICAgICAgIGRlcHRoRmFpbE1hdGVyaWFsLmVxdWFscyh1cGRhdGVyRGVwdGhGYWlsTWF0ZXJpYWwpKSkgJiZcbiAgICBlcXVhbHM7XG4gIHJldHVybiBlcXVhbHM7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRpbWUsIHVwZGF0ZXIpIHtcbiAgdmFyIGlkID0gdXBkYXRlci5pZDtcbiAgdGhpcy51cGRhdGVycy5zZXQoaWQsIHVwZGF0ZXIpO1xuICB0aGlzLmdlb21ldHJ5LnNldChpZCwgdXBkYXRlci5jcmVhdGVGaWxsR2VvbWV0cnlJbnN0YW5jZSh0aW1lKSk7XG4gIGlmIChcbiAgICAhdXBkYXRlci5oYXNDb25zdGFudEZpbGwgfHxcbiAgICAhdXBkYXRlci5maWxsTWF0ZXJpYWxQcm9wZXJ0eS5pc0NvbnN0YW50IHx8XG4gICAgIVByb3BlcnR5LmlzQ29uc3RhbnQodXBkYXRlci5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eSkgfHxcbiAgICAhUHJvcGVydHkuaXNDb25zdGFudCh1cGRhdGVyLnRlcnJhaW5PZmZzZXRQcm9wZXJ0eSlcbiAgKSB7XG4gICAgdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnNldChpZCwgdXBkYXRlcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zZXQoXG4gICAgICBpZCxcbiAgICAgIHVwZGF0ZXIuZW50aXR5LmRlZmluaXRpb25DaGFuZ2VkLmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24gKFxuICAgICAgICBlbnRpdHksXG4gICAgICAgIHByb3BlcnR5TmFtZSxcbiAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgIG9sZFZhbHVlXG4gICAgICApIHtcbiAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gXCJpc1Nob3dpbmdcIikge1xuICAgICAgICAgIHRoYXQuc2hvd3NVcGRhdGVkLnNldCh1cGRhdGVyLmlkLCB1cGRhdGVyKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICB2YXIgaWQgPSB1cGRhdGVyLmlkO1xuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IHRoaXMuZ2VvbWV0cnkucmVtb3ZlKGlkKSB8fCB0aGlzLmNyZWF0ZVByaW1pdGl2ZTtcbiAgaWYgKHRoaXMudXBkYXRlcnMucmVtb3ZlKGlkKSkge1xuICAgIHRoaXMudXBkYXRlcnNXaXRoQXR0cmlidXRlcy5yZW1vdmUoaWQpO1xuICAgIHZhciB1bnN1YnNjcmliZSA9IHRoaXMuc3Vic2NyaXB0aW9ucy5nZXQoaWQpO1xuICAgIGlmIChkZWZpbmVkKHVuc3Vic2NyaWJlKSkge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5yZW1vdmUoaWQpO1xuICAgICAgdGhpcy5zaG93c1VwZGF0ZWQucmVtb3ZlKGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxudmFyIGNvbG9yU2NyYXRjaCA9IG5ldyBDb2xvcigpO1xuXG5CYXRjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgdmFyIGlzVXBkYXRlZCA9IHRydWU7XG4gIHZhciBwcmltaXRpdmUgPSB0aGlzLnByaW1pdGl2ZTtcbiAgdmFyIHByaW1pdGl2ZXMgPSB0aGlzLnByaW1pdGl2ZXM7XG4gIHZhciBnZW9tZXRyaWVzID0gdGhpcy5nZW9tZXRyeS52YWx1ZXM7XG4gIHZhciBpO1xuXG4gIGlmICh0aGlzLmNyZWF0ZVByaW1pdGl2ZSkge1xuICAgIHZhciBnZW9tZXRyaWVzTGVuZ3RoID0gZ2VvbWV0cmllcy5sZW5ndGg7XG4gICAgaWYgKGdlb21ldHJpZXNMZW5ndGggPiAwKSB7XG4gICAgICBpZiAoZGVmaW5lZChwcmltaXRpdmUpKSB7XG4gICAgICAgIGlmICghZGVmaW5lZCh0aGlzLm9sZFByaW1pdGl2ZSkpIHtcbiAgICAgICAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmltaXRpdmVzLnJlbW92ZShwcmltaXRpdmUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWF0ZXJpYWwgPSBNYXRlcmlhbFByb3BlcnR5LmdldFZhbHVlKFxuICAgICAgICB0aW1lLFxuICAgICAgICB0aGlzLm1hdGVyaWFsUHJvcGVydHksXG4gICAgICAgIHRoaXMubWF0ZXJpYWxcbiAgICAgICk7XG5cbiAgICAgIHZhciBkZXB0aEZhaWxBcHBlYXJhbmNlO1xuICAgICAgaWYgKGRlZmluZWQodGhpcy5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5KSkge1xuICAgICAgICB0aGlzLmRlcHRoRmFpbE1hdGVyaWFsID0gTWF0ZXJpYWxQcm9wZXJ0eS5nZXRWYWx1ZShcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSxcbiAgICAgICAgICB0aGlzLmRlcHRoRmFpbE1hdGVyaWFsXG4gICAgICAgICk7XG4gICAgICAgIGRlcHRoRmFpbEFwcGVhcmFuY2UgPSBuZXcgdGhpcy5kZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSh7XG4gICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWwsXG4gICAgICAgICAgdHJhbnNsdWNlbnQ6IHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWwuaXNUcmFuc2x1Y2VudCgpLFxuICAgICAgICAgIGNsb3NlZDogdGhpcy5jbG9zZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBwcmltaXRpdmUgPSBuZXcgUHJpbWl0aXZlKHtcbiAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgIGFzeW5jaHJvbm91czogdHJ1ZSxcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGdlb21ldHJpZXMuc2xpY2UoKSxcbiAgICAgICAgYXBwZWFyYW5jZTogbmV3IHRoaXMuYXBwZWFyYW5jZVR5cGUoe1xuICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLm1hdGVyaWFsLFxuICAgICAgICAgIHRyYW5zbHVjZW50OiB0aGlzLm1hdGVyaWFsLmlzVHJhbnNsdWNlbnQoKSxcbiAgICAgICAgICBjbG9zZWQ6IHRoaXMuY2xvc2VkLFxuICAgICAgICB9KSxcbiAgICAgICAgZGVwdGhGYWlsQXBwZWFyYW5jZTogZGVwdGhGYWlsQXBwZWFyYW5jZSxcbiAgICAgICAgc2hhZG93czogdGhpcy5zaGFkb3dzLFxuICAgICAgfSk7XG5cbiAgICAgIHByaW1pdGl2ZXMuYWRkKHByaW1pdGl2ZSk7XG4gICAgICBpc1VwZGF0ZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgICAgICBwcmltaXRpdmVzLnJlbW92ZShwcmltaXRpdmUpO1xuICAgICAgICBwcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgb2xkUHJpbWl0aXZlID0gdGhpcy5vbGRQcmltaXRpdmU7XG4gICAgICBpZiAoZGVmaW5lZChvbGRQcmltaXRpdmUpKSB7XG4gICAgICAgIHByaW1pdGl2ZXMucmVtb3ZlKG9sZFByaW1pdGl2ZSk7XG4gICAgICAgIHRoaXMub2xkUHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYXR0cmlidXRlcy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKGRlZmluZWQocHJpbWl0aXZlKSAmJiBwcmltaXRpdmUucmVhZHkpIHtcbiAgICBwcmltaXRpdmUuc2hvdyA9IHRydWU7XG4gICAgaWYgKGRlZmluZWQodGhpcy5vbGRQcmltaXRpdmUpKSB7XG4gICAgICBwcmltaXRpdmVzLnJlbW92ZSh0aGlzLm9sZFByaW1pdGl2ZSk7XG4gICAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0aGlzLm1hdGVyaWFsID0gTWF0ZXJpYWxQcm9wZXJ0eS5nZXRWYWx1ZShcbiAgICAgIHRpbWUsXG4gICAgICB0aGlzLm1hdGVyaWFsUHJvcGVydHksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcbiAgICB0aGlzLnByaW1pdGl2ZS5hcHBlYXJhbmNlLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcblxuICAgIGlmIChcbiAgICAgIGRlZmluZWQodGhpcy5kZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSkgJiZcbiAgICAgICEodGhpcy5kZXB0aEZhaWxNYXRlcmlhbFByb3BlcnR5IGluc3RhbmNlb2YgQ29sb3JNYXRlcmlhbFByb3BlcnR5KVxuICAgICkge1xuICAgICAgdGhpcy5kZXB0aEZhaWxNYXRlcmlhbCA9IE1hdGVyaWFsUHJvcGVydHkuZ2V0VmFsdWUoXG4gICAgICAgIHRpbWUsXG4gICAgICAgIHRoaXMuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSxcbiAgICAgICAgdGhpcy5kZXB0aEZhaWxNYXRlcmlhbFxuICAgICAgKTtcbiAgICAgIHRoaXMucHJpbWl0aXZlLmRlcHRoRmFpbEFwcGVhcmFuY2UubWF0ZXJpYWwgPSB0aGlzLmRlcHRoRmFpbE1hdGVyaWFsO1xuICAgIH1cblxuICAgIHZhciB1cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnZhbHVlcztcbiAgICB2YXIgbGVuZ3RoID0gdXBkYXRlcnNXaXRoQXR0cmlidXRlcy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdXBkYXRlciA9IHVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXNbaV07XG4gICAgICB2YXIgZW50aXR5ID0gdXBkYXRlci5lbnRpdHk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdlb21ldHJ5LmdldCh1cGRhdGVyLmlkKTtcblxuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0KGluc3RhbmNlLmlkLmlkKTtcbiAgICAgIGlmICghZGVmaW5lZChhdHRyaWJ1dGVzKSkge1xuICAgICAgICBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKGluc3RhbmNlLmlkKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNldChpbnN0YW5jZS5pZC5pZCwgYXR0cmlidXRlcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgZGVmaW5lZCh0aGlzLmRlcHRoRmFpbEFwcGVhcmFuY2VUeXBlKSAmJlxuICAgICAgICB0aGlzLmRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHkgaW5zdGFuY2VvZiBDb2xvck1hdGVyaWFsUHJvcGVydHkgJiZcbiAgICAgICAgIXVwZGF0ZXIuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eS5pc0NvbnN0YW50XG4gICAgICApIHtcbiAgICAgICAgdmFyIGRlcHRoRmFpbENvbG9yUHJvcGVydHkgPSB1cGRhdGVyLmRlcHRoRmFpbE1hdGVyaWFsUHJvcGVydHkuY29sb3I7XG4gICAgICAgIHZhciBkZXB0aEZhaWxDb2xvciA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgICAgICAgIGRlcHRoRmFpbENvbG9yUHJvcGVydHksXG4gICAgICAgICAgdGltZSxcbiAgICAgICAgICBDb2xvci5XSElURSxcbiAgICAgICAgICBjb2xvclNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFDb2xvci5lcXVhbHMoYXR0cmlidXRlcy5fbGFzdERlcHRoRmFpbENvbG9yLCBkZXB0aEZhaWxDb2xvcikpIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0RGVwdGhGYWlsQ29sb3IgPSBDb2xvci5jbG9uZShcbiAgICAgICAgICAgIGRlcHRoRmFpbENvbG9yLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERlcHRoRmFpbENvbG9yXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhdHRyaWJ1dGVzLmRlcHRoRmFpbENvbG9yID0gQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgICAgICBkZXB0aEZhaWxDb2xvcixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuZGVwdGhGYWlsQ29sb3JcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93ID1cbiAgICAgICAgZW50aXR5LmlzU2hvd2luZyAmJiAodXBkYXRlci5oYXNDb25zdGFudEZpbGwgfHwgdXBkYXRlci5pc0ZpbGxlZCh0aW1lKSk7XG4gICAgICB2YXIgY3VycmVudFNob3cgPSBhdHRyaWJ1dGVzLnNob3dbMF0gPT09IDE7XG4gICAgICBpZiAoc2hvdyAhPT0gY3VycmVudFNob3cpIHtcbiAgICAgICAgYXR0cmlidXRlcy5zaG93ID0gU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgICBzaG93LFxuICAgICAgICAgIGF0dHJpYnV0ZXMuc2hvd1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkgPVxuICAgICAgICB1cGRhdGVyLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5O1xuICAgICAgaWYgKCFQcm9wZXJ0eS5pc0NvbnN0YW50KGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5KSkge1xuICAgICAgICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHksXG4gICAgICAgICAgdGltZSxcbiAgICAgICAgICBkZWZhdWx0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFEaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZXF1YWxzKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5jbG9uZShcbiAgICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3REaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIGF0dHJpYnV0ZXMuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBvZmZzZXRQcm9wZXJ0eSA9IHVwZGF0ZXIudGVycmFpbk9mZnNldFByb3BlcnR5O1xuICAgICAgaWYgKCFQcm9wZXJ0eS5pc0NvbnN0YW50KG9mZnNldFByb3BlcnR5KSkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgICAgb2Zmc2V0UHJvcGVydHksXG4gICAgICAgICAgdGltZSxcbiAgICAgICAgICBkZWZhdWx0T2Zmc2V0LFxuICAgICAgICAgIG9mZnNldFNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFDYXJ0ZXNpYW4zLmVxdWFscyhvZmZzZXQsIGF0dHJpYnV0ZXMuX2xhc3RPZmZzZXQpKSB7XG4gICAgICAgICAgYXR0cmlidXRlcy5fbGFzdE9mZnNldCA9IENhcnRlc2lhbjMuY2xvbmUoXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0T2Zmc2V0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBhdHRyaWJ1dGVzLm9mZnNldCA9IE9mZnNldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMub2Zmc2V0XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU2hvd3MocHJpbWl0aXZlKTtcbiAgfSBlbHNlIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkgJiYgIXByaW1pdGl2ZS5yZWFkeSkge1xuICAgIGlzVXBkYXRlZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiBpc1VwZGF0ZWQ7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUudXBkYXRlU2hvd3MgPSBmdW5jdGlvbiAocHJpbWl0aXZlKSB7XG4gIHZhciBzaG93c1VwZGF0ZWQgPSB0aGlzLnNob3dzVXBkYXRlZC52YWx1ZXM7XG4gIHZhciBsZW5ndGggPSBzaG93c1VwZGF0ZWQubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHVwZGF0ZXIgPSBzaG93c1VwZGF0ZWRbaV07XG4gICAgdmFyIGVudGl0eSA9IHVwZGF0ZXIuZW50aXR5O1xuICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2VvbWV0cnkuZ2V0KHVwZGF0ZXIuaWQpO1xuXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0KGluc3RhbmNlLmlkLmlkKTtcbiAgICBpZiAoIWRlZmluZWQoYXR0cmlidXRlcykpIHtcbiAgICAgIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMoaW5zdGFuY2UuaWQpO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNldChpbnN0YW5jZS5pZC5pZCwgYXR0cmlidXRlcyk7XG4gICAgfVxuXG4gICAgdmFyIHNob3cgPSBlbnRpdHkuaXNTaG93aW5nO1xuICAgIHZhciBjdXJyZW50U2hvdyA9IGF0dHJpYnV0ZXMuc2hvd1swXSA9PT0gMTtcbiAgICBpZiAoc2hvdyAhPT0gY3VycmVudFNob3cpIHtcbiAgICAgIGF0dHJpYnV0ZXMuc2hvdyA9IFNob3dHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgIHNob3csXG4gICAgICAgIGF0dHJpYnV0ZXMuc2hvd1xuICAgICAgKTtcbiAgICAgIGluc3RhbmNlLmF0dHJpYnV0ZXMuc2hvdy52YWx1ZVswXSA9IGF0dHJpYnV0ZXMuc2hvd1swXTtcbiAgICB9XG4gIH1cbiAgdGhpcy5zaG93c1VwZGF0ZWQucmVtb3ZlQWxsKCk7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICByZXR1cm4gdGhpcy51cGRhdGVycy5jb250YWlucyh1cGRhdGVyLmlkKTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5nZXRCb3VuZGluZ1NwaGVyZSA9IGZ1bmN0aW9uICh1cGRhdGVyLCByZXN1bHQpIHtcbiAgdmFyIHByaW1pdGl2ZSA9IHRoaXMucHJpbWl0aXZlO1xuICBpZiAoIXByaW1pdGl2ZS5yZWFkeSkge1xuICAgIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLlBFTkRJTkc7XG4gIH1cbiAgdmFyIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXModXBkYXRlci5lbnRpdHkpO1xuICBpZiAoXG4gICAgIWRlZmluZWQoYXR0cmlidXRlcykgfHxcbiAgICAhZGVmaW5lZChhdHRyaWJ1dGVzLmJvdW5kaW5nU3BoZXJlKSB8fFxuICAgIChkZWZpbmVkKGF0dHJpYnV0ZXMuc2hvdykgJiYgYXR0cmlidXRlcy5zaG93WzBdID09PSAwKVxuICApIHtcbiAgICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQ7XG4gIH1cbiAgYXR0cmlidXRlcy5ib3VuZGluZ1NwaGVyZS5jbG9uZShyZXN1bHQpO1xuICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5ET05FO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwcmltaXRpdmUgPSB0aGlzLnByaW1pdGl2ZTtcbiAgdmFyIHByaW1pdGl2ZXMgPSB0aGlzLnByaW1pdGl2ZXM7XG4gIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkpIHtcbiAgICBwcmltaXRpdmVzLnJlbW92ZShwcmltaXRpdmUpO1xuICB9XG4gIHZhciBvbGRQcmltaXRpdmUgPSB0aGlzLm9sZFByaW1pdGl2ZTtcbiAgaWYgKGRlZmluZWQob2xkUHJpbWl0aXZlKSkge1xuICAgIHByaW1pdGl2ZXMucmVtb3ZlKG9sZFByaW1pdGl2ZSk7XG4gIH1cbiAgdGhpcy5yZW1vdmVNYXRlcmlhbFN1YnNjcmlwdGlvbigpO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBTdGF0aWNHZW9tZXRyeVBlck1hdGVyaWFsQmF0Y2goXG4gIHByaW1pdGl2ZXMsXG4gIGFwcGVhcmFuY2VUeXBlLFxuICBkZXB0aEZhaWxBcHBlYXJhbmNlVHlwZSxcbiAgY2xvc2VkLFxuICBzaGFkb3dzXG4pIHtcbiAgdGhpcy5faXRlbXMgPSBbXTtcbiAgdGhpcy5fcHJpbWl0aXZlcyA9IHByaW1pdGl2ZXM7XG4gIHRoaXMuX2FwcGVhcmFuY2VUeXBlID0gYXBwZWFyYW5jZVR5cGU7XG4gIHRoaXMuX2RlcHRoRmFpbEFwcGVhcmFuY2VUeXBlID0gZGVwdGhGYWlsQXBwZWFyYW5jZVR5cGU7XG4gIHRoaXMuX2Nsb3NlZCA9IGNsb3NlZDtcbiAgdGhpcy5fc2hhZG93cyA9IHNoYWRvd3M7XG59XG5cblN0YXRpY0dlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRpbWUsIHVwZGF0ZXIpIHtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLmlzTWF0ZXJpYWwodXBkYXRlcikpIHtcbiAgICAgIGl0ZW0uYWRkKHRpbWUsIHVwZGF0ZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICB2YXIgYmF0Y2ggPSBuZXcgQmF0Y2goXG4gICAgdGhpcy5fcHJpbWl0aXZlcyxcbiAgICB0aGlzLl9hcHBlYXJhbmNlVHlwZSxcbiAgICB1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5LFxuICAgIHRoaXMuX2RlcHRoRmFpbEFwcGVhcmFuY2VUeXBlLFxuICAgIHVwZGF0ZXIuZGVwdGhGYWlsTWF0ZXJpYWxQcm9wZXJ0eSxcbiAgICB0aGlzLl9jbG9zZWQsXG4gICAgdGhpcy5fc2hhZG93c1xuICApO1xuICBiYXRjaC5hZGQodGltZSwgdXBkYXRlcik7XG4gIGl0ZW1zLnB1c2goYmF0Y2gpO1xufTtcblxuU3RhdGljR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IGxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTtcbiAgICBpZiAoaXRlbS5yZW1vdmUodXBkYXRlcikpIHtcbiAgICAgIGlmIChpdGVtLnVwZGF0ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpdGVtcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGl0ZW0uZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59O1xuXG5TdGF0aWNHZW9tZXRyeVBlck1hdGVyaWFsQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBpO1xuICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcblxuICBmb3IgKGkgPSBsZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgaWYgKGl0ZW0uaW52YWxpZGF0ZWQpIHtcbiAgICAgIGl0ZW1zLnNwbGljZShpLCAxKTtcbiAgICAgIHZhciB1cGRhdGVycyA9IGl0ZW0udXBkYXRlcnMudmFsdWVzO1xuICAgICAgdmFyIHVwZGF0ZXJzTGVuZ3RoID0gdXBkYXRlcnMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCB1cGRhdGVyc0xlbmd0aDsgaCsrKSB7XG4gICAgICAgIHRoaXMuYWRkKHRpbWUsIHVwZGF0ZXJzW2hdKTtcbiAgICAgIH1cbiAgICAgIGl0ZW0uZGVzdHJveSgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBpc1VwZGF0ZWQgPSB0cnVlO1xuICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICBpc1VwZGF0ZWQgPSBpdGVtc1tpXS51cGRhdGUodGltZSkgJiYgaXNVcGRhdGVkO1xuICB9XG4gIHJldHVybiBpc1VwZGF0ZWQ7XG59O1xuXG5TdGF0aWNHZW9tZXRyeVBlck1hdGVyaWFsQmF0Y2gucHJvdG90eXBlLmdldEJvdW5kaW5nU3BoZXJlID0gZnVuY3Rpb24gKFxuICB1cGRhdGVyLFxuICByZXN1bHRcbikge1xuICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgaWYgKGl0ZW0uY29udGFpbnModXBkYXRlcikpIHtcbiAgICAgIHJldHVybiBpdGVtLmdldEJvdW5kaW5nU3BoZXJlKHVwZGF0ZXIsIHJlc3VsdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLkZBSUxFRDtcbn07XG5cblN0YXRpY0dlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaC5wcm90b3R5cGUucmVtb3ZlQWxsUHJpbWl0aXZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpdGVtc1tpXS5kZXN0cm95KCk7XG4gIH1cbiAgdGhpcy5faXRlbXMubGVuZ3RoID0gMDtcbn07XG5leHBvcnQgZGVmYXVsdCBTdGF0aWNHZW9tZXRyeVBlck1hdGVyaWFsQmF0Y2g7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///30487\n')},4371:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8629);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92062);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(47861);\n/* harmony import */ var _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24689);\n/* harmony import */ var _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(37939);\n/* harmony import */ var _Scene_GroundPrimitive_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(47780);\n/* harmony import */ var _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69895);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(40112);\n/* harmony import */ var _Core_RectangleCollisionChecker_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(8185);\n\n\n\n\n\n\n\n\n\n\n\n\nvar colorScratch = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar distanceDisplayConditionScratch = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar defaultDistanceDisplayCondition = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\nfunction Batch(primitives, classificationType, color, zIndex) {\n  this.primitives = primitives;\n  this.zIndex = zIndex;\n  this.classificationType = classificationType;\n  this.color = color;\n  this.createPrimitive = false;\n  this.waitingOnCreate = false;\n  this.primitive = undefined;\n  this.oldPrimitive = undefined;\n  this.geometry = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.updaters = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.updatersWithAttributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.attributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.subscriptions = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.showsUpdated = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.itemsToRemove = [];\n  this.isDirty = false;\n  this.rectangleCollisionCheck = new _Core_RectangleCollisionChecker_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z();\n}\n\nBatch.prototype.overlapping = function (rectangle) {\n  return this.rectangleCollisionCheck.collides(rectangle);\n};\n\nBatch.prototype.add = function (updater, instance) {\n  var id = updater.id;\n  this.createPrimitive = true;\n  this.geometry.set(id, instance);\n  this.updaters.set(id, updater);\n  this.rectangleCollisionCheck.insert(id, instance.geometry.rectangle);\n  if (\n    !updater.hasConstantFill ||\n    !updater.fillMaterialProperty.isConstant ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].isConstant */ .Z.isConstant(updater.distanceDisplayConditionProperty)\n  ) {\n    this.updatersWithAttributes.set(id, updater);\n  } else {\n    var that = this;\n    this.subscriptions.set(\n      id,\n      updater.entity.definitionChanged.addEventListener(function (\n        entity,\n        propertyName,\n        newValue,\n        oldValue\n      ) {\n        if (propertyName === "isShowing") {\n          that.showsUpdated.set(updater.id, updater);\n        }\n      })\n    );\n  }\n};\n\nBatch.prototype.remove = function (updater) {\n  var id = updater.id;\n  var geometryInstance = this.geometry.get(id);\n  this.createPrimitive = this.geometry.remove(id) || this.createPrimitive;\n  if (this.updaters.remove(id)) {\n    this.rectangleCollisionCheck.remove(\n      id,\n      geometryInstance.geometry.rectangle\n    );\n    this.updatersWithAttributes.remove(id);\n    var unsubscribe = this.subscriptions.get(id);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(unsubscribe)) {\n      unsubscribe();\n      this.subscriptions.remove(id);\n      this.showsUpdated.remove(id);\n    }\n    return true;\n  }\n  return false;\n};\n\nBatch.prototype.update = function (time) {\n  var isUpdated = true;\n  var removedCount = 0;\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  var i;\n\n  if (this.createPrimitive) {\n    var geometries = this.geometry.values;\n    var geometriesLength = geometries.length;\n    if (geometriesLength > 0) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(primitive)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this.oldPrimitive)) {\n          this.oldPrimitive = primitive;\n        } else {\n          primitives.remove(primitive);\n        }\n      }\n\n      primitive = new _Scene_GroundPrimitive_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n        show: false,\n        asynchronous: true,\n        geometryInstances: geometries.slice(),\n        classificationType: this.classificationType,\n      });\n      primitives.add(primitive, this.zIndex);\n      isUpdated = false;\n    } else {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(primitive)) {\n        primitives.remove(primitive);\n        primitive = undefined;\n      }\n      var oldPrimitive = this.oldPrimitive;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(oldPrimitive)) {\n        primitives.remove(oldPrimitive);\n        this.oldPrimitive = undefined;\n      }\n    }\n\n    this.attributes.removeAll();\n    this.primitive = primitive;\n    this.createPrimitive = false;\n    this.waitingOnCreate = true;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(primitive) && primitive.ready) {\n    primitive.show = true;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this.oldPrimitive)) {\n      primitives.remove(this.oldPrimitive);\n      this.oldPrimitive = undefined;\n    }\n    var updatersWithAttributes = this.updatersWithAttributes.values;\n    var length = updatersWithAttributes.length;\n    var waitingOnCreate = this.waitingOnCreate;\n    for (i = 0; i < length; i++) {\n      var updater = updatersWithAttributes[i];\n      var instance = this.geometry.get(updater.id);\n\n      var attributes = this.attributes.get(instance.id.id);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(attributes)) {\n        attributes = primitive.getGeometryInstanceAttributes(instance.id);\n        this.attributes.set(instance.id.id, attributes);\n      }\n\n      if (!updater.fillMaterialProperty.isConstant || waitingOnCreate) {\n        var colorProperty = updater.fillMaterialProperty.color;\n        var fillColor = _Property_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          colorProperty,\n          time,\n          _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].WHITE */ .Z.WHITE,\n          colorScratch\n        );\n\n        if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(attributes._lastColor, fillColor)) {\n          attributes._lastColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(fillColor, attributes._lastColor);\n          attributes.color = _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].toValue */ .Z.toValue(\n            fillColor,\n            attributes.color\n          );\n        }\n      }\n\n      var show =\n        updater.entity.isShowing &&\n        (updater.hasConstantFill || updater.isFilled(time));\n      var currentShow = attributes.show[0] === 1;\n      if (show !== currentShow) {\n        attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toValue */ .Z.toValue(\n          show,\n          attributes.show\n        );\n      }\n\n      var distanceDisplayConditionProperty =\n        updater.distanceDisplayConditionProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].isConstant */ .Z.isConstant(distanceDisplayConditionProperty)) {\n        var distanceDisplayCondition = _Property_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          distanceDisplayConditionProperty,\n          time,\n          defaultDistanceDisplayCondition,\n          distanceDisplayConditionScratch\n        );\n        if (\n          !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          )\n        ) {\n          attributes._lastDistanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          );\n          attributes.distanceDisplayCondition = _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].toValue */ .Z.toValue(\n            distanceDisplayCondition,\n            attributes.distanceDisplayCondition\n          );\n        }\n      }\n    }\n\n    this.updateShows(primitive);\n    this.waitingOnCreate = false;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(primitive) && !primitive.ready) {\n    isUpdated = false;\n  }\n  this.itemsToRemove.length = removedCount;\n  return isUpdated;\n};\n\nBatch.prototype.updateShows = function (primitive) {\n  var showsUpdated = this.showsUpdated.values;\n  var length = showsUpdated.length;\n  for (var i = 0; i < length; i++) {\n    var updater = showsUpdated[i];\n    var instance = this.geometry.get(updater.id);\n\n    var attributes = this.attributes.get(instance.id.id);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(attributes)) {\n      attributes = primitive.getGeometryInstanceAttributes(instance.id);\n      this.attributes.set(instance.id.id, attributes);\n    }\n\n    var show = updater.entity.isShowing;\n    var currentShow = attributes.show[0] === 1;\n    if (show !== currentShow) {\n      attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toValue */ .Z.toValue(\n        show,\n        attributes.show\n      );\n      instance.attributes.show.value[0] = attributes.show[0];\n    }\n  }\n  this.showsUpdated.removeAll();\n};\n\nBatch.prototype.contains = function (updater) {\n  return this.updaters.contains(updater.id);\n};\n\nBatch.prototype.getBoundingSphere = function (updater, result) {\n  var primitive = this.primitive;\n  if (!primitive.ready) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].PENDING */ .Z.PENDING;\n  }\n\n  var bs = primitive.getBoundingSphere(updater.entity);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(bs)) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FAILED */ .Z.FAILED;\n  }\n\n  bs.clone(result);\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].DONE */ .Z.DONE;\n};\n\nBatch.prototype.removeAllPrimitives = function () {\n  var primitives = this.primitives;\n\n  var primitive = this.primitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(primitive)) {\n    primitives.remove(primitive);\n    this.primitive = undefined;\n    this.geometry.removeAll();\n    this.updaters.removeAll();\n  }\n\n  var oldPrimitive = this.oldPrimitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(oldPrimitive)) {\n    primitives.remove(oldPrimitive);\n    this.oldPrimitive = undefined;\n  }\n};\n\n/**\n * @private\n */\nfunction StaticGroundGeometryColorBatch(primitives, classificationType) {\n  this._batches = [];\n  this._primitives = primitives;\n  this._classificationType = classificationType;\n}\n\nStaticGroundGeometryColorBatch.prototype.add = function (time, updater) {\n  var instance = updater.createFillGeometryInstance(time);\n  var batches = this._batches;\n  var zIndex = _Property_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(updater.zIndex, 0);\n  var batch;\n  var length = batches.length;\n  for (var i = 0; i < length; ++i) {\n    var item = batches[i];\n    if (\n      item.zIndex === zIndex &&\n      !item.overlapping(instance.geometry.rectangle)\n    ) {\n      batch = item;\n      break;\n    }\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(batch)) {\n    batch = new Batch(\n      this._primitives,\n      this._classificationType,\n      instance.attributes.color.value,\n      zIndex\n    );\n    batches.push(batch);\n  }\n  batch.add(updater, instance);\n  return batch;\n};\n\nStaticGroundGeometryColorBatch.prototype.remove = function (updater) {\n  var batches = this._batches;\n  var count = batches.length;\n  for (var i = 0; i < count; ++i) {\n    if (batches[i].remove(updater)) {\n      return;\n    }\n  }\n};\n\nStaticGroundGeometryColorBatch.prototype.update = function (time) {\n  var i;\n  var updater;\n\n  //Perform initial update\n  var isUpdated = true;\n  var batches = this._batches;\n  var batchCount = batches.length;\n  for (i = 0; i < batchCount; ++i) {\n    isUpdated = batches[i].update(time) && isUpdated;\n  }\n\n  //If any items swapped between batches we need to move them\n  for (i = 0; i < batchCount; ++i) {\n    var oldBatch = batches[i];\n    var itemsToRemove = oldBatch.itemsToRemove;\n    var itemsToMoveLength = itemsToRemove.length;\n    for (var j = 0; j < itemsToMoveLength; j++) {\n      updater = itemsToRemove[j];\n      oldBatch.remove(updater);\n      var newBatch = this.add(time, updater);\n      oldBatch.isDirty = true;\n      newBatch.isDirty = true;\n    }\n  }\n\n  //If we moved anything around, we need to re-build the primitive and remove empty batches\n  for (i = batchCount - 1; i >= 0; --i) {\n    var batch = batches[i];\n    if (batch.isDirty) {\n      isUpdated = batches[i].update(time) && isUpdated;\n      batch.isDirty = false;\n    }\n    if (batch.geometry.length === 0) {\n      batches.splice(i, 1);\n    }\n  }\n\n  return isUpdated;\n};\n\nStaticGroundGeometryColorBatch.prototype.getBoundingSphere = function (\n  updater,\n  result\n) {\n  var batches = this._batches;\n  var batchCount = batches.length;\n  for (var i = 0; i < batchCount; ++i) {\n    var batch = batches[i];\n    if (batch.contains(updater)) {\n      return batch.getBoundingSphere(updater, result);\n    }\n  }\n\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FAILED */ .Z.FAILED;\n};\n\nStaticGroundGeometryColorBatch.prototype.removeAllPrimitives = function () {\n  var batches = this._batches;\n  var batchCount = batches.length;\n  for (var i = 0; i < batchCount; ++i) {\n    batches[i].removeAllPrimitives();\n  }\n};\n/* harmony default export */ __webpack_exports__["Z"] = (StaticGroundGeometryColorBatch);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvU3RhdGljR3JvdW5kR2VvbWV0cnlDb2xvckJhdGNoLmpzPzM0ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFzc29jaWF0aXZlQXJyYXkgZnJvbSBcIi4uL0NvcmUvQXNzb2NpYXRpdmVBcnJheS5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0NvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiBmcm9tIFwiLi4vQ29yZS9EaXN0YW5jZURpc3BsYXlDb25kaXRpb24uanNcIjtcbmltcG9ydCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9TaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IEdyb3VuZFByaW1pdGl2ZSBmcm9tIFwiLi4vU2NlbmUvR3JvdW5kUHJpbWl0aXZlLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmVTdGF0ZSBmcm9tIFwiLi9Cb3VuZGluZ1NwaGVyZVN0YXRlLmpzXCI7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSBcIi4vUHJvcGVydHkuanNcIjtcbmltcG9ydCBSZWN0YW5nbGVDb2xsaXNpb25DaGVja2VyIGZyb20gXCIuLi9Db3JlL1JlY3RhbmdsZUNvbGxpc2lvbkNoZWNrZXIuanNcIjtcblxudmFyIGNvbG9yU2NyYXRjaCA9IG5ldyBDb2xvcigpO1xudmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblNjcmF0Y2ggPSBuZXcgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKCk7XG52YXIgZGVmYXVsdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IG5ldyBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24oKTtcblxuZnVuY3Rpb24gQmF0Y2gocHJpbWl0aXZlcywgY2xhc3NpZmljYXRpb25UeXBlLCBjb2xvciwgekluZGV4KSB7XG4gIHRoaXMucHJpbWl0aXZlcyA9IHByaW1pdGl2ZXM7XG4gIHRoaXMuekluZGV4ID0gekluZGV4O1xuICB0aGlzLmNsYXNzaWZpY2F0aW9uVHlwZSA9IGNsYXNzaWZpY2F0aW9uVHlwZTtcbiAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IGZhbHNlO1xuICB0aGlzLndhaXRpbmdPbkNyZWF0ZSA9IGZhbHNlO1xuICB0aGlzLnByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5vbGRQcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuZ2VvbWV0cnkgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLnVwZGF0ZXJzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5hdHRyaWJ1dGVzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5zaG93c1VwZGF0ZWQgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLml0ZW1zVG9SZW1vdmUgPSBbXTtcbiAgdGhpcy5pc0RpcnR5ID0gZmFsc2U7XG4gIHRoaXMucmVjdGFuZ2xlQ29sbGlzaW9uQ2hlY2sgPSBuZXcgUmVjdGFuZ2xlQ29sbGlzaW9uQ2hlY2tlcigpO1xufVxuXG5CYXRjaC5wcm90b3R5cGUub3ZlcmxhcHBpbmcgPSBmdW5jdGlvbiAocmVjdGFuZ2xlKSB7XG4gIHJldHVybiB0aGlzLnJlY3RhbmdsZUNvbGxpc2lvbkNoZWNrLmNvbGxpZGVzKHJlY3RhbmdsZSk7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHVwZGF0ZXIsIGluc3RhbmNlKSB7XG4gIHZhciBpZCA9IHVwZGF0ZXIuaWQ7XG4gIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcbiAgdGhpcy5nZW9tZXRyeS5zZXQoaWQsIGluc3RhbmNlKTtcbiAgdGhpcy51cGRhdGVycy5zZXQoaWQsIHVwZGF0ZXIpO1xuICB0aGlzLnJlY3RhbmdsZUNvbGxpc2lvbkNoZWNrLmluc2VydChpZCwgaW5zdGFuY2UuZ2VvbWV0cnkucmVjdGFuZ2xlKTtcbiAgaWYgKFxuICAgICF1cGRhdGVyLmhhc0NvbnN0YW50RmlsbCB8fFxuICAgICF1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5LmlzQ29uc3RhbnQgfHxcbiAgICAhUHJvcGVydHkuaXNDb25zdGFudCh1cGRhdGVyLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5KVxuICApIHtcbiAgICB0aGlzLnVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXMuc2V0KGlkLCB1cGRhdGVyKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnNldChcbiAgICAgIGlkLFxuICAgICAgdXBkYXRlci5lbnRpdHkuZGVmaW5pdGlvbkNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihmdW5jdGlvbiAoXG4gICAgICAgIGVudGl0eSxcbiAgICAgICAgcHJvcGVydHlOYW1lLFxuICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgb2xkVmFsdWVcbiAgICAgICkge1xuICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSBcImlzU2hvd2luZ1wiKSB7XG4gICAgICAgICAgdGhhdC5zaG93c1VwZGF0ZWQuc2V0KHVwZGF0ZXIuaWQsIHVwZGF0ZXIpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cbn07XG5cbkJhdGNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICB2YXIgaWQgPSB1cGRhdGVyLmlkO1xuICB2YXIgZ2VvbWV0cnlJbnN0YW5jZSA9IHRoaXMuZ2VvbWV0cnkuZ2V0KGlkKTtcbiAgdGhpcy5jcmVhdGVQcmltaXRpdmUgPSB0aGlzLmdlb21ldHJ5LnJlbW92ZShpZCkgfHwgdGhpcy5jcmVhdGVQcmltaXRpdmU7XG4gIGlmICh0aGlzLnVwZGF0ZXJzLnJlbW92ZShpZCkpIHtcbiAgICB0aGlzLnJlY3RhbmdsZUNvbGxpc2lvbkNoZWNrLnJlbW92ZShcbiAgICAgIGlkLFxuICAgICAgZ2VvbWV0cnlJbnN0YW5jZS5nZW9tZXRyeS5yZWN0YW5nbGVcbiAgICApO1xuICAgIHRoaXMudXBkYXRlcnNXaXRoQXR0cmlidXRlcy5yZW1vdmUoaWQpO1xuICAgIHZhciB1bnN1YnNjcmliZSA9IHRoaXMuc3Vic2NyaXB0aW9ucy5nZXQoaWQpO1xuICAgIGlmIChkZWZpbmVkKHVuc3Vic2NyaWJlKSkge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5yZW1vdmUoaWQpO1xuICAgICAgdGhpcy5zaG93c1VwZGF0ZWQucmVtb3ZlKGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBpc1VwZGF0ZWQgPSB0cnVlO1xuICB2YXIgcmVtb3ZlZENvdW50ID0gMDtcbiAgdmFyIHByaW1pdGl2ZSA9IHRoaXMucHJpbWl0aXZlO1xuICB2YXIgcHJpbWl0aXZlcyA9IHRoaXMucHJpbWl0aXZlcztcbiAgdmFyIGk7XG5cbiAgaWYgKHRoaXMuY3JlYXRlUHJpbWl0aXZlKSB7XG4gICAgdmFyIGdlb21ldHJpZXMgPSB0aGlzLmdlb21ldHJ5LnZhbHVlcztcbiAgICB2YXIgZ2VvbWV0cmllc0xlbmd0aCA9IGdlb21ldHJpZXMubGVuZ3RoO1xuICAgIGlmIChnZW9tZXRyaWVzTGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgICAgICBpZiAoIWRlZmluZWQodGhpcy5vbGRQcmltaXRpdmUpKSB7XG4gICAgICAgICAgdGhpcy5vbGRQcmltaXRpdmUgPSBwcmltaXRpdmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJpbWl0aXZlcy5yZW1vdmUocHJpbWl0aXZlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcmltaXRpdmUgPSBuZXcgR3JvdW5kUHJpbWl0aXZlKHtcbiAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgIGFzeW5jaHJvbm91czogdHJ1ZSxcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGdlb21ldHJpZXMuc2xpY2UoKSxcbiAgICAgICAgY2xhc3NpZmljYXRpb25UeXBlOiB0aGlzLmNsYXNzaWZpY2F0aW9uVHlwZSxcbiAgICAgIH0pO1xuICAgICAgcHJpbWl0aXZlcy5hZGQocHJpbWl0aXZlLCB0aGlzLnpJbmRleCk7XG4gICAgICBpc1VwZGF0ZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgICAgICBwcmltaXRpdmVzLnJlbW92ZShwcmltaXRpdmUpO1xuICAgICAgICBwcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgb2xkUHJpbWl0aXZlID0gdGhpcy5vbGRQcmltaXRpdmU7XG4gICAgICBpZiAoZGVmaW5lZChvbGRQcmltaXRpdmUpKSB7XG4gICAgICAgIHByaW1pdGl2ZXMucmVtb3ZlKG9sZFByaW1pdGl2ZSk7XG4gICAgICAgIHRoaXMub2xkUHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYXR0cmlidXRlcy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMud2FpdGluZ09uQ3JlYXRlID0gdHJ1ZTtcbiAgfSBlbHNlIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkgJiYgcHJpbWl0aXZlLnJlYWR5KSB7XG4gICAgcHJpbWl0aXZlLnNob3cgPSB0cnVlO1xuICAgIGlmIChkZWZpbmVkKHRoaXMub2xkUHJpbWl0aXZlKSkge1xuICAgICAgcHJpbWl0aXZlcy5yZW1vdmUodGhpcy5vbGRQcmltaXRpdmUpO1xuICAgICAgdGhpcy5vbGRQcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHZhciB1cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnZhbHVlcztcbiAgICB2YXIgbGVuZ3RoID0gdXBkYXRlcnNXaXRoQXR0cmlidXRlcy5sZW5ndGg7XG4gICAgdmFyIHdhaXRpbmdPbkNyZWF0ZSA9IHRoaXMud2FpdGluZ09uQ3JlYXRlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHVwZGF0ZXIgPSB1cGRhdGVyc1dpdGhBdHRyaWJ1dGVzW2ldO1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZW9tZXRyeS5nZXQodXBkYXRlci5pZCk7XG5cbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzLmdldChpbnN0YW5jZS5pZC5pZCk7XG4gICAgICBpZiAoIWRlZmluZWQoYXR0cmlidXRlcykpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5nZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyhpbnN0YW5jZS5pZCk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy5zZXQoaW5zdGFuY2UuaWQuaWQsIGF0dHJpYnV0ZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXVwZGF0ZXIuZmlsbE1hdGVyaWFsUHJvcGVydHkuaXNDb25zdGFudCB8fCB3YWl0aW5nT25DcmVhdGUpIHtcbiAgICAgICAgdmFyIGNvbG9yUHJvcGVydHkgPSB1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5LmNvbG9yO1xuICAgICAgICB2YXIgZmlsbENvbG9yID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgICAgY29sb3JQcm9wZXJ0eSxcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIENvbG9yLldISVRFLFxuICAgICAgICAgIGNvbG9yU2NyYXRjaFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghQ29sb3IuZXF1YWxzKGF0dHJpYnV0ZXMuX2xhc3RDb2xvciwgZmlsbENvbG9yKSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3RDb2xvciA9IENvbG9yLmNsb25lKGZpbGxDb2xvciwgYXR0cmlidXRlcy5fbGFzdENvbG9yKTtcbiAgICAgICAgICBhdHRyaWJ1dGVzLmNvbG9yID0gQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgICAgICBmaWxsQ29sb3IsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmNvbG9yXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgc2hvdyA9XG4gICAgICAgIHVwZGF0ZXIuZW50aXR5LmlzU2hvd2luZyAmJlxuICAgICAgICAodXBkYXRlci5oYXNDb25zdGFudEZpbGwgfHwgdXBkYXRlci5pc0ZpbGxlZCh0aW1lKSk7XG4gICAgICB2YXIgY3VycmVudFNob3cgPSBhdHRyaWJ1dGVzLnNob3dbMF0gPT09IDE7XG4gICAgICBpZiAoc2hvdyAhPT0gY3VycmVudFNob3cpIHtcbiAgICAgICAgYXR0cmlidXRlcy5zaG93ID0gU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgICBzaG93LFxuICAgICAgICAgIGF0dHJpYnV0ZXMuc2hvd1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkgPVxuICAgICAgICB1cGRhdGVyLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5O1xuICAgICAgaWYgKCFQcm9wZXJ0eS5pc0NvbnN0YW50KGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5KSkge1xuICAgICAgICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHksXG4gICAgICAgICAgdGltZSxcbiAgICAgICAgICBkZWZhdWx0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFEaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZXF1YWxzKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5jbG9uZShcbiAgICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3REaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIGF0dHJpYnV0ZXMuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTaG93cyhwcmltaXRpdmUpO1xuICAgIHRoaXMud2FpdGluZ09uQ3JlYXRlID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChwcmltaXRpdmUpICYmICFwcmltaXRpdmUucmVhZHkpIHtcbiAgICBpc1VwZGF0ZWQgPSBmYWxzZTtcbiAgfVxuICB0aGlzLml0ZW1zVG9SZW1vdmUubGVuZ3RoID0gcmVtb3ZlZENvdW50O1xuICByZXR1cm4gaXNVcGRhdGVkO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnVwZGF0ZVNob3dzID0gZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICB2YXIgc2hvd3NVcGRhdGVkID0gdGhpcy5zaG93c1VwZGF0ZWQudmFsdWVzO1xuICB2YXIgbGVuZ3RoID0gc2hvd3NVcGRhdGVkLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciB1cGRhdGVyID0gc2hvd3NVcGRhdGVkW2ldO1xuICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2VvbWV0cnkuZ2V0KHVwZGF0ZXIuaWQpO1xuXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0KGluc3RhbmNlLmlkLmlkKTtcbiAgICBpZiAoIWRlZmluZWQoYXR0cmlidXRlcykpIHtcbiAgICAgIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMoaW5zdGFuY2UuaWQpO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNldChpbnN0YW5jZS5pZC5pZCwgYXR0cmlidXRlcyk7XG4gICAgfVxuXG4gICAgdmFyIHNob3cgPSB1cGRhdGVyLmVudGl0eS5pc1Nob3dpbmc7XG4gICAgdmFyIGN1cnJlbnRTaG93ID0gYXR0cmlidXRlcy5zaG93WzBdID09PSAxO1xuICAgIGlmIChzaG93ICE9PSBjdXJyZW50U2hvdykge1xuICAgICAgYXR0cmlidXRlcy5zaG93ID0gU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgc2hvdyxcbiAgICAgICAgYXR0cmlidXRlcy5zaG93XG4gICAgICApO1xuICAgICAgaW5zdGFuY2UuYXR0cmlidXRlcy5zaG93LnZhbHVlWzBdID0gYXR0cmlidXRlcy5zaG93WzBdO1xuICAgIH1cbiAgfVxuICB0aGlzLnNob3dzVXBkYXRlZC5yZW1vdmVBbGwoKTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIHJldHVybiB0aGlzLnVwZGF0ZXJzLmNvbnRhaW5zKHVwZGF0ZXIuaWQpO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLmdldEJvdW5kaW5nU3BoZXJlID0gZnVuY3Rpb24gKHVwZGF0ZXIsIHJlc3VsdCkge1xuICB2YXIgcHJpbWl0aXZlID0gdGhpcy5wcmltaXRpdmU7XG4gIGlmICghcHJpbWl0aXZlLnJlYWR5KSB7XG4gICAgcmV0dXJuIEJvdW5kaW5nU3BoZXJlU3RhdGUuUEVORElORztcbiAgfVxuXG4gIHZhciBicyA9IHByaW1pdGl2ZS5nZXRCb3VuZGluZ1NwaGVyZSh1cGRhdGVyLmVudGl0eSk7XG4gIGlmICghZGVmaW5lZChicykpIHtcbiAgICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQ7XG4gIH1cblxuICBicy5jbG9uZShyZXN1bHQpO1xuICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5ET05FO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnJlbW92ZUFsbFByaW1pdGl2ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwcmltaXRpdmVzID0gdGhpcy5wcmltaXRpdmVzO1xuXG4gIHZhciBwcmltaXRpdmUgPSB0aGlzLnByaW1pdGl2ZTtcbiAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgIHByaW1pdGl2ZXMucmVtb3ZlKHByaW1pdGl2ZSk7XG4gICAgdGhpcy5wcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5nZW9tZXRyeS5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnVwZGF0ZXJzLnJlbW92ZUFsbCgpO1xuICB9XG5cbiAgdmFyIG9sZFByaW1pdGl2ZSA9IHRoaXMub2xkUHJpbWl0aXZlO1xuICBpZiAoZGVmaW5lZChvbGRQcmltaXRpdmUpKSB7XG4gICAgcHJpbWl0aXZlcy5yZW1vdmUob2xkUHJpbWl0aXZlKTtcbiAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBTdGF0aWNHcm91bmRHZW9tZXRyeUNvbG9yQmF0Y2gocHJpbWl0aXZlcywgY2xhc3NpZmljYXRpb25UeXBlKSB7XG4gIHRoaXMuX2JhdGNoZXMgPSBbXTtcbiAgdGhpcy5fcHJpbWl0aXZlcyA9IHByaW1pdGl2ZXM7XG4gIHRoaXMuX2NsYXNzaWZpY2F0aW9uVHlwZSA9IGNsYXNzaWZpY2F0aW9uVHlwZTtcbn1cblxuU3RhdGljR3JvdW5kR2VvbWV0cnlDb2xvckJhdGNoLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGltZSwgdXBkYXRlcikge1xuICB2YXIgaW5zdGFuY2UgPSB1cGRhdGVyLmNyZWF0ZUZpbGxHZW9tZXRyeUluc3RhbmNlKHRpbWUpO1xuICB2YXIgYmF0Y2hlcyA9IHRoaXMuX2JhdGNoZXM7XG4gIHZhciB6SW5kZXggPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yRGVmYXVsdCh1cGRhdGVyLnpJbmRleCwgMCk7XG4gIHZhciBiYXRjaDtcbiAgdmFyIGxlbmd0aCA9IGJhdGNoZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGl0ZW0gPSBiYXRjaGVzW2ldO1xuICAgIGlmIChcbiAgICAgIGl0ZW0uekluZGV4ID09PSB6SW5kZXggJiZcbiAgICAgICFpdGVtLm92ZXJsYXBwaW5nKGluc3RhbmNlLmdlb21ldHJ5LnJlY3RhbmdsZSlcbiAgICApIHtcbiAgICAgIGJhdGNoID0gaXRlbTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZGVmaW5lZChiYXRjaCkpIHtcbiAgICBiYXRjaCA9IG5ldyBCYXRjaChcbiAgICAgIHRoaXMuX3ByaW1pdGl2ZXMsXG4gICAgICB0aGlzLl9jbGFzc2lmaWNhdGlvblR5cGUsXG4gICAgICBpbnN0YW5jZS5hdHRyaWJ1dGVzLmNvbG9yLnZhbHVlLFxuICAgICAgekluZGV4XG4gICAgKTtcbiAgICBiYXRjaGVzLnB1c2goYmF0Y2gpO1xuICB9XG4gIGJhdGNoLmFkZCh1cGRhdGVyLCBpbnN0YW5jZSk7XG4gIHJldHVybiBiYXRjaDtcbn07XG5cblN0YXRpY0dyb3VuZEdlb21ldHJ5Q29sb3JCYXRjaC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHVwZGF0ZXIpIHtcbiAgdmFyIGJhdGNoZXMgPSB0aGlzLl9iYXRjaGVzO1xuICB2YXIgY291bnQgPSBiYXRjaGVzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgaWYgKGJhdGNoZXNbaV0ucmVtb3ZlKHVwZGF0ZXIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG59O1xuXG5TdGF0aWNHcm91bmRHZW9tZXRyeUNvbG9yQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBpO1xuICB2YXIgdXBkYXRlcjtcblxuICAvL1BlcmZvcm0gaW5pdGlhbCB1cGRhdGVcbiAgdmFyIGlzVXBkYXRlZCA9IHRydWU7XG4gIHZhciBiYXRjaGVzID0gdGhpcy5fYmF0Y2hlcztcbiAgdmFyIGJhdGNoQ291bnQgPSBiYXRjaGVzLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGJhdGNoQ291bnQ7ICsraSkge1xuICAgIGlzVXBkYXRlZCA9IGJhdGNoZXNbaV0udXBkYXRlKHRpbWUpICYmIGlzVXBkYXRlZDtcbiAgfVxuXG4gIC8vSWYgYW55IGl0ZW1zIHN3YXBwZWQgYmV0d2VlbiBiYXRjaGVzIHdlIG5lZWQgdG8gbW92ZSB0aGVtXG4gIGZvciAoaSA9IDA7IGkgPCBiYXRjaENvdW50OyArK2kpIHtcbiAgICB2YXIgb2xkQmF0Y2ggPSBiYXRjaGVzW2ldO1xuICAgIHZhciBpdGVtc1RvUmVtb3ZlID0gb2xkQmF0Y2guaXRlbXNUb1JlbW92ZTtcbiAgICB2YXIgaXRlbXNUb01vdmVMZW5ndGggPSBpdGVtc1RvUmVtb3ZlLmxlbmd0aDtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGl0ZW1zVG9Nb3ZlTGVuZ3RoOyBqKyspIHtcbiAgICAgIHVwZGF0ZXIgPSBpdGVtc1RvUmVtb3ZlW2pdO1xuICAgICAgb2xkQmF0Y2gucmVtb3ZlKHVwZGF0ZXIpO1xuICAgICAgdmFyIG5ld0JhdGNoID0gdGhpcy5hZGQodGltZSwgdXBkYXRlcik7XG4gICAgICBvbGRCYXRjaC5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgIG5ld0JhdGNoLmlzRGlydHkgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vSWYgd2UgbW92ZWQgYW55dGhpbmcgYXJvdW5kLCB3ZSBuZWVkIHRvIHJlLWJ1aWxkIHRoZSBwcmltaXRpdmUgYW5kIHJlbW92ZSBlbXB0eSBiYXRjaGVzXG4gIGZvciAoaSA9IGJhdGNoQ291bnQgLSAxOyBpID49IDA7IC0taSkge1xuICAgIHZhciBiYXRjaCA9IGJhdGNoZXNbaV07XG4gICAgaWYgKGJhdGNoLmlzRGlydHkpIHtcbiAgICAgIGlzVXBkYXRlZCA9IGJhdGNoZXNbaV0udXBkYXRlKHRpbWUpICYmIGlzVXBkYXRlZDtcbiAgICAgIGJhdGNoLmlzRGlydHkgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGJhdGNoLmdlb21ldHJ5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYmF0Y2hlcy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGlzVXBkYXRlZDtcbn07XG5cblN0YXRpY0dyb3VuZEdlb21ldHJ5Q29sb3JCYXRjaC5wcm90b3R5cGUuZ2V0Qm91bmRpbmdTcGhlcmUgPSBmdW5jdGlvbiAoXG4gIHVwZGF0ZXIsXG4gIHJlc3VsdFxuKSB7XG4gIHZhciBiYXRjaGVzID0gdGhpcy5fYmF0Y2hlcztcbiAgdmFyIGJhdGNoQ291bnQgPSBiYXRjaGVzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYXRjaENvdW50OyArK2kpIHtcbiAgICB2YXIgYmF0Y2ggPSBiYXRjaGVzW2ldO1xuICAgIGlmIChiYXRjaC5jb250YWlucyh1cGRhdGVyKSkge1xuICAgICAgcmV0dXJuIGJhdGNoLmdldEJvdW5kaW5nU3BoZXJlKHVwZGF0ZXIsIHJlc3VsdCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEJvdW5kaW5nU3BoZXJlU3RhdGUuRkFJTEVEO1xufTtcblxuU3RhdGljR3JvdW5kR2VvbWV0cnlDb2xvckJhdGNoLnByb3RvdHlwZS5yZW1vdmVBbGxQcmltaXRpdmVzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYmF0Y2hlcyA9IHRoaXMuX2JhdGNoZXM7XG4gIHZhciBiYXRjaENvdW50ID0gYmF0Y2hlcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYmF0Y2hDb3VudDsgKytpKSB7XG4gICAgYmF0Y2hlc1tpXS5yZW1vdmVBbGxQcmltaXRpdmVzKCk7XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBTdGF0aWNHcm91bmRHZW9tZXRyeUNvbG9yQmF0Y2g7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4371\n')},65249:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8629);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(47861);\n/* harmony import */ var _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24689);\n/* harmony import */ var _Core_RectangleCollisionChecker_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8185);\n/* harmony import */ var _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37939);\n/* harmony import */ var _Scene_GroundPrimitive_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(47780);\n/* harmony import */ var _Scene_ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(88472);\n/* harmony import */ var _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69895);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20174);\n/* harmony import */ var _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(46317);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar distanceDisplayConditionScratch = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar defaultDistanceDisplayCondition = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n// Encapsulates a Primitive and all the entities that it represents.\nfunction Batch(\n  primitives,\n  classificationType,\n  appearanceType,\n  materialProperty,\n  usingSphericalTextureCoordinates,\n  zIndex\n) {\n  this.primitives = primitives; // scene level primitive collection\n  this.classificationType = classificationType;\n  this.appearanceType = appearanceType;\n  this.materialProperty = materialProperty;\n  this.updaters = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.createPrimitive = true;\n  this.primitive = undefined; // a GroundPrimitive encapsulating all the entities\n  this.oldPrimitive = undefined;\n  this.geometry = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.material = undefined;\n  this.updatersWithAttributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.attributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.invalidated = false;\n  this.removeMaterialSubscription = materialProperty.definitionChanged.addEventListener(\n    Batch.prototype.onMaterialChanged,\n    this\n  );\n  this.subscriptions = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.showsUpdated = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.usingSphericalTextureCoordinates = usingSphericalTextureCoordinates;\n  this.zIndex = zIndex;\n  this.rectangleCollisionCheck = new _Core_RectangleCollisionChecker_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n}\n\nBatch.prototype.onMaterialChanged = function () {\n  this.invalidated = true;\n};\n\nBatch.prototype.overlapping = function (rectangle) {\n  return this.rectangleCollisionCheck.collides(rectangle);\n};\n\n// Check if the given updater\'s material is compatible with this batch\nBatch.prototype.isMaterial = function (updater) {\n  var material = this.materialProperty;\n  var updaterMaterial = updater.fillMaterialProperty;\n\n  if (\n    updaterMaterial === material ||\n    (updaterMaterial instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z &&\n      material instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)\n  ) {\n    return true;\n  }\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(material) && material.equals(updaterMaterial);\n};\n\nBatch.prototype.add = function (time, updater, geometryInstance) {\n  var id = updater.id;\n  this.updaters.set(id, updater);\n  this.geometry.set(id, geometryInstance);\n  this.rectangleCollisionCheck.insert(id, geometryInstance.geometry.rectangle);\n  // Updaters with dynamic attributes must be tracked separately, may exit the batch\n  if (\n    !updater.hasConstantFill ||\n    !updater.fillMaterialProperty.isConstant ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].isConstant */ .Z.isConstant(updater.distanceDisplayConditionProperty)\n  ) {\n    this.updatersWithAttributes.set(id, updater);\n  } else {\n    var that = this;\n    // Listen for show changes. These will be synchronized in updateShows.\n    this.subscriptions.set(\n      id,\n      updater.entity.definitionChanged.addEventListener(function (\n        entity,\n        propertyName,\n        newValue,\n        oldValue\n      ) {\n        if (propertyName === "isShowing") {\n          that.showsUpdated.set(updater.id, updater);\n        }\n      })\n    );\n  }\n  this.createPrimitive = true;\n};\n\nBatch.prototype.remove = function (updater) {\n  var id = updater.id;\n  var geometryInstance = this.geometry.get(id);\n  this.createPrimitive = this.geometry.remove(id) || this.createPrimitive;\n  if (this.updaters.remove(id)) {\n    this.rectangleCollisionCheck.remove(\n      id,\n      geometryInstance.geometry.rectangle\n    );\n    this.updatersWithAttributes.remove(id);\n    var unsubscribe = this.subscriptions.get(id);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(unsubscribe)) {\n      unsubscribe();\n      this.subscriptions.remove(id);\n    }\n    return true;\n  }\n  return false;\n};\n\nBatch.prototype.update = function (time) {\n  var isUpdated = true;\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  var geometries = this.geometry.values;\n  var i;\n\n  if (this.createPrimitive) {\n    var geometriesLength = geometries.length;\n    if (geometriesLength > 0) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(primitive)) {\n        // Keep a handle to the old primitive so it can be removed when the updated version is ready.\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(this.oldPrimitive)) {\n          this.oldPrimitive = primitive;\n        } else {\n          // For if the new primitive changes again before it is ready.\n          primitives.remove(primitive);\n        }\n      }\n\n      this.material = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].getValue */ .Z.getValue(\n        time,\n        this.materialProperty,\n        this.material\n      );\n\n      primitive = new _Scene_GroundPrimitive_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n        show: false,\n        asynchronous: true,\n        geometryInstances: geometries.slice(),\n        appearance: new this.appearanceType({\n          material: this.material,\n          // translucent and closed properties overridden\n        }),\n        classificationType: this.classificationType,\n      });\n\n      primitives.add(primitive, this.zIndex);\n      isUpdated = false;\n    } else {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(primitive)) {\n        primitives.remove(primitive);\n        primitive = undefined;\n      }\n      var oldPrimitive = this.oldPrimitive;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(oldPrimitive)) {\n        primitives.remove(oldPrimitive);\n        this.oldPrimitive = undefined;\n      }\n    }\n\n    this.attributes.removeAll();\n    this.primitive = primitive;\n    this.createPrimitive = false;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(primitive) && primitive.ready) {\n    primitive.show = true;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(this.oldPrimitive)) {\n      primitives.remove(this.oldPrimitive);\n      this.oldPrimitive = undefined;\n    }\n\n    this.material = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].getValue */ .Z.getValue(\n      time,\n      this.materialProperty,\n      this.material\n    );\n    this.primitive.appearance.material = this.material;\n\n    var updatersWithAttributes = this.updatersWithAttributes.values;\n    var length = updatersWithAttributes.length;\n    for (i = 0; i < length; i++) {\n      var updater = updatersWithAttributes[i];\n      var entity = updater.entity;\n      var instance = this.geometry.get(updater.id);\n\n      var attributes = this.attributes.get(instance.id.id);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(attributes)) {\n        attributes = primitive.getGeometryInstanceAttributes(instance.id);\n        this.attributes.set(instance.id.id, attributes);\n      }\n\n      var show =\n        entity.isShowing && (updater.hasConstantFill || updater.isFilled(time));\n      var currentShow = attributes.show[0] === 1;\n      if (show !== currentShow) {\n        attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].toValue */ .Z.toValue(\n          show,\n          attributes.show\n        );\n      }\n\n      var distanceDisplayConditionProperty =\n        updater.distanceDisplayConditionProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].isConstant */ .Z.isConstant(distanceDisplayConditionProperty)) {\n        var distanceDisplayCondition = _Property_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          distanceDisplayConditionProperty,\n          time,\n          defaultDistanceDisplayCondition,\n          distanceDisplayConditionScratch\n        );\n        if (\n          !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          )\n        ) {\n          attributes._lastDistanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          );\n          attributes.distanceDisplayCondition = _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].toValue */ .Z.toValue(\n            distanceDisplayCondition,\n            attributes.distanceDisplayCondition\n          );\n        }\n      }\n    }\n\n    this.updateShows(primitive);\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(primitive) && !primitive.ready) {\n    isUpdated = false;\n  }\n  return isUpdated;\n};\n\nBatch.prototype.updateShows = function (primitive) {\n  var showsUpdated = this.showsUpdated.values;\n  var length = showsUpdated.length;\n  for (var i = 0; i < length; i++) {\n    var updater = showsUpdated[i];\n    var entity = updater.entity;\n    var instance = this.geometry.get(updater.id);\n\n    var attributes = this.attributes.get(instance.id.id);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(attributes)) {\n      attributes = primitive.getGeometryInstanceAttributes(instance.id);\n      this.attributes.set(instance.id.id, attributes);\n    }\n\n    var show = entity.isShowing;\n    var currentShow = attributes.show[0] === 1;\n    if (show !== currentShow) {\n      attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].toValue */ .Z.toValue(\n        show,\n        attributes.show\n      );\n      instance.attributes.show.value[0] = attributes.show[0];\n    }\n  }\n  this.showsUpdated.removeAll();\n};\n\nBatch.prototype.contains = function (updater) {\n  return this.updaters.contains(updater.id);\n};\n\nBatch.prototype.getBoundingSphere = function (updater, result) {\n  var primitive = this.primitive;\n  if (!primitive.ready) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].PENDING */ .Z.PENDING;\n  }\n  var attributes = primitive.getGeometryInstanceAttributes(updater.entity);\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(attributes) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(attributes.boundingSphere) ||\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(attributes.show) && attributes.show[0] === 0)\n  ) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FAILED */ .Z.FAILED;\n  }\n  attributes.boundingSphere.clone(result);\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].DONE */ .Z.DONE;\n};\n\nBatch.prototype.destroy = function () {\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(primitive)) {\n    primitives.remove(primitive);\n  }\n  var oldPrimitive = this.oldPrimitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(oldPrimitive)) {\n    primitives.remove(oldPrimitive);\n  }\n  this.removeMaterialSubscription();\n};\n\n/**\n * @private\n */\nfunction StaticGroundGeometryPerMaterialBatch(\n  primitives,\n  classificationType,\n  appearanceType\n) {\n  this._items = [];\n  this._primitives = primitives;\n  this._classificationType = classificationType;\n  this._appearanceType = appearanceType;\n}\n\nStaticGroundGeometryPerMaterialBatch.prototype.add = function (time, updater) {\n  var items = this._items;\n  var length = items.length;\n  var geometryInstance = updater.createFillGeometryInstance(time);\n  var usingSphericalTextureCoordinates = _Scene_ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].shouldUseSphericalCoordinates */ .Z.shouldUseSphericalCoordinates(\n    geometryInstance.geometry.rectangle\n  );\n  var zIndex = _Property_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(updater.zIndex, 0);\n  // Check if the Entity represented by the updater can be placed in an existing batch. Requirements:\n  // * compatible material (same material or same color)\n  // * same type of texture coordinates (spherical vs. planar)\n  // * conservatively non-overlapping with any entities in the existing batch\n  for (var i = 0; i < length; ++i) {\n    var item = items[i];\n    if (\n      item.isMaterial(updater) &&\n      item.usingSphericalTextureCoordinates ===\n        usingSphericalTextureCoordinates &&\n      item.zIndex === zIndex &&\n      !item.overlapping(geometryInstance.geometry.rectangle)\n    ) {\n      item.add(time, updater, geometryInstance);\n      return;\n    }\n  }\n  // If a compatible batch wasn\'t found, create a new batch.\n  var batch = new Batch(\n    this._primitives,\n    this._classificationType,\n    this._appearanceType,\n    updater.fillMaterialProperty,\n    usingSphericalTextureCoordinates,\n    zIndex\n  );\n  batch.add(time, updater, geometryInstance);\n  items.push(batch);\n};\n\nStaticGroundGeometryPerMaterialBatch.prototype.remove = function (updater) {\n  var items = this._items;\n  var length = items.length;\n  for (var i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.remove(updater)) {\n      if (item.updaters.length === 0) {\n        items.splice(i, 1);\n        item.destroy();\n      }\n      break;\n    }\n  }\n};\n\nStaticGroundGeometryPerMaterialBatch.prototype.update = function (time) {\n  var i;\n  var items = this._items;\n  var length = items.length;\n\n  for (i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.invalidated) {\n      items.splice(i, 1);\n      var updaters = item.updaters.values;\n      var updatersLength = updaters.length;\n      for (var h = 0; h < updatersLength; h++) {\n        this.add(time, updaters[h]);\n      }\n      item.destroy();\n    }\n  }\n\n  var isUpdated = true;\n  for (i = 0; i < items.length; i++) {\n    isUpdated = items[i].update(time) && isUpdated;\n  }\n  return isUpdated;\n};\n\nStaticGroundGeometryPerMaterialBatch.prototype.getBoundingSphere = function (\n  updater,\n  result\n) {\n  var items = this._items;\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    var item = items[i];\n    if (item.contains(updater)) {\n      return item.getBoundingSphere(updater, result);\n    }\n  }\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].FAILED */ .Z.FAILED;\n};\n\nStaticGroundGeometryPerMaterialBatch.prototype.removeAllPrimitives = function () {\n  var items = this._items;\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    items[i].destroy();\n  }\n  this._items.length = 0;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (StaticGroundGeometryPerMaterialBatch);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsc0ZBQTBCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsb0NBQW9DLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvU3RhdGljR3JvdW5kR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoLmpzP2ViMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFzc29jaWF0aXZlQXJyYXkgZnJvbSBcIi4uL0NvcmUvQXNzb2NpYXRpdmVBcnJheS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiBmcm9tIFwiLi4vQ29yZS9EaXN0YW5jZURpc3BsYXlDb25kaXRpb24uanNcIjtcbmltcG9ydCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBSZWN0YW5nbGVDb2xsaXNpb25DaGVja2VyIGZyb20gXCIuLi9Db3JlL1JlY3RhbmdsZUNvbGxpc2lvbkNoZWNrZXIuanNcIjtcbmltcG9ydCBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9TaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IEdyb3VuZFByaW1pdGl2ZSBmcm9tIFwiLi4vU2NlbmUvR3JvdW5kUHJpbWl0aXZlLmpzXCI7XG5pbXBvcnQgU2hhZG93Vm9sdW1lQXBwZWFyYW5jZSBmcm9tIFwiLi4vU2NlbmUvU2hhZG93Vm9sdW1lQXBwZWFyYW5jZS5qc1wiO1xuaW1wb3J0IEJvdW5kaW5nU3BoZXJlU3RhdGUgZnJvbSBcIi4vQm91bmRpbmdTcGhlcmVTdGF0ZS5qc1wiO1xuaW1wb3J0IENvbG9yTWF0ZXJpYWxQcm9wZXJ0eSBmcm9tIFwiLi9Db2xvck1hdGVyaWFsUHJvcGVydHkuanNcIjtcbmltcG9ydCBNYXRlcmlhbFByb3BlcnR5IGZyb20gXCIuL01hdGVyaWFsUHJvcGVydHkuanNcIjtcbmltcG9ydCBQcm9wZXJ0eSBmcm9tIFwiLi9Qcm9wZXJ0eS5qc1wiO1xuXG52YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uU2NyYXRjaCA9IG5ldyBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24oKTtcbnZhciBkZWZhdWx0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gbmV3IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbigpO1xuXG4vLyBFbmNhcHN1bGF0ZXMgYSBQcmltaXRpdmUgYW5kIGFsbCB0aGUgZW50aXRpZXMgdGhhdCBpdCByZXByZXNlbnRzLlxuZnVuY3Rpb24gQmF0Y2goXG4gIHByaW1pdGl2ZXMsXG4gIGNsYXNzaWZpY2F0aW9uVHlwZSxcbiAgYXBwZWFyYW5jZVR5cGUsXG4gIG1hdGVyaWFsUHJvcGVydHksXG4gIHVzaW5nU3BoZXJpY2FsVGV4dHVyZUNvb3JkaW5hdGVzLFxuICB6SW5kZXhcbikge1xuICB0aGlzLnByaW1pdGl2ZXMgPSBwcmltaXRpdmVzOyAvLyBzY2VuZSBsZXZlbCBwcmltaXRpdmUgY29sbGVjdGlvblxuICB0aGlzLmNsYXNzaWZpY2F0aW9uVHlwZSA9IGNsYXNzaWZpY2F0aW9uVHlwZTtcbiAgdGhpcy5hcHBlYXJhbmNlVHlwZSA9IGFwcGVhcmFuY2VUeXBlO1xuICB0aGlzLm1hdGVyaWFsUHJvcGVydHkgPSBtYXRlcmlhbFByb3BlcnR5O1xuICB0aGlzLnVwZGF0ZXJzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5jcmVhdGVQcmltaXRpdmUgPSB0cnVlO1xuICB0aGlzLnByaW1pdGl2ZSA9IHVuZGVmaW5lZDsgLy8gYSBHcm91bmRQcmltaXRpdmUgZW5jYXBzdWxhdGluZyBhbGwgdGhlIGVudGl0aWVzXG4gIHRoaXMub2xkUHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICB0aGlzLmdlb21ldHJ5ID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5tYXRlcmlhbCA9IHVuZGVmaW5lZDtcbiAgdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5hdHRyaWJ1dGVzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5pbnZhbGlkYXRlZCA9IGZhbHNlO1xuICB0aGlzLnJlbW92ZU1hdGVyaWFsU3Vic2NyaXB0aW9uID0gbWF0ZXJpYWxQcm9wZXJ0eS5kZWZpbml0aW9uQ2hhbmdlZC5hZGRFdmVudExpc3RlbmVyKFxuICAgIEJhdGNoLnByb3RvdHlwZS5vbk1hdGVyaWFsQ2hhbmdlZCxcbiAgICB0aGlzXG4gICk7XG4gIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMuc2hvd3NVcGRhdGVkID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy51c2luZ1NwaGVyaWNhbFRleHR1cmVDb29yZGluYXRlcyA9IHVzaW5nU3BoZXJpY2FsVGV4dHVyZUNvb3JkaW5hdGVzO1xuICB0aGlzLnpJbmRleCA9IHpJbmRleDtcbiAgdGhpcy5yZWN0YW5nbGVDb2xsaXNpb25DaGVjayA9IG5ldyBSZWN0YW5nbGVDb2xsaXNpb25DaGVja2VyKCk7XG59XG5cbkJhdGNoLnByb3RvdHlwZS5vbk1hdGVyaWFsQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5pbnZhbGlkYXRlZCA9IHRydWU7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUub3ZlcmxhcHBpbmcgPSBmdW5jdGlvbiAocmVjdGFuZ2xlKSB7XG4gIHJldHVybiB0aGlzLnJlY3RhbmdsZUNvbGxpc2lvbkNoZWNrLmNvbGxpZGVzKHJlY3RhbmdsZSk7XG59O1xuXG4vLyBDaGVjayBpZiB0aGUgZ2l2ZW4gdXBkYXRlcidzIG1hdGVyaWFsIGlzIGNvbXBhdGlibGUgd2l0aCB0aGlzIGJhdGNoXG5CYXRjaC5wcm90b3R5cGUuaXNNYXRlcmlhbCA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIHZhciBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxQcm9wZXJ0eTtcbiAgdmFyIHVwZGF0ZXJNYXRlcmlhbCA9IHVwZGF0ZXIuZmlsbE1hdGVyaWFsUHJvcGVydHk7XG5cbiAgaWYgKFxuICAgIHVwZGF0ZXJNYXRlcmlhbCA9PT0gbWF0ZXJpYWwgfHxcbiAgICAodXBkYXRlck1hdGVyaWFsIGluc3RhbmNlb2YgQ29sb3JNYXRlcmlhbFByb3BlcnR5ICYmXG4gICAgICBtYXRlcmlhbCBpbnN0YW5jZW9mIENvbG9yTWF0ZXJpYWxQcm9wZXJ0eSlcbiAgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGRlZmluZWQobWF0ZXJpYWwpICYmIG1hdGVyaWFsLmVxdWFscyh1cGRhdGVyTWF0ZXJpYWwpO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0aW1lLCB1cGRhdGVyLCBnZW9tZXRyeUluc3RhbmNlKSB7XG4gIHZhciBpZCA9IHVwZGF0ZXIuaWQ7XG4gIHRoaXMudXBkYXRlcnMuc2V0KGlkLCB1cGRhdGVyKTtcbiAgdGhpcy5nZW9tZXRyeS5zZXQoaWQsIGdlb21ldHJ5SW5zdGFuY2UpO1xuICB0aGlzLnJlY3RhbmdsZUNvbGxpc2lvbkNoZWNrLmluc2VydChpZCwgZ2VvbWV0cnlJbnN0YW5jZS5nZW9tZXRyeS5yZWN0YW5nbGUpO1xuICAvLyBVcGRhdGVycyB3aXRoIGR5bmFtaWMgYXR0cmlidXRlcyBtdXN0IGJlIHRyYWNrZWQgc2VwYXJhdGVseSwgbWF5IGV4aXQgdGhlIGJhdGNoXG4gIGlmIChcbiAgICAhdXBkYXRlci5oYXNDb25zdGFudEZpbGwgfHxcbiAgICAhdXBkYXRlci5maWxsTWF0ZXJpYWxQcm9wZXJ0eS5pc0NvbnN0YW50IHx8XG4gICAgIVByb3BlcnR5LmlzQ29uc3RhbnQodXBkYXRlci5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eSlcbiAgKSB7XG4gICAgdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnNldChpZCwgdXBkYXRlcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIC8vIExpc3RlbiBmb3Igc2hvdyBjaGFuZ2VzLiBUaGVzZSB3aWxsIGJlIHN5bmNocm9uaXplZCBpbiB1cGRhdGVTaG93cy5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc2V0KFxuICAgICAgaWQsXG4gICAgICB1cGRhdGVyLmVudGl0eS5kZWZpbml0aW9uQ2hhbmdlZC5hZGRFdmVudExpc3RlbmVyKGZ1bmN0aW9uIChcbiAgICAgICAgZW50aXR5LFxuICAgICAgICBwcm9wZXJ0eU5hbWUsXG4gICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICBvbGRWYWx1ZVxuICAgICAgKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IFwiaXNTaG93aW5nXCIpIHtcbiAgICAgICAgICB0aGF0LnNob3dzVXBkYXRlZC5zZXQodXBkYXRlci5pZCwgdXBkYXRlcik7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHVwZGF0ZXIpIHtcbiAgdmFyIGlkID0gdXBkYXRlci5pZDtcbiAgdmFyIGdlb21ldHJ5SW5zdGFuY2UgPSB0aGlzLmdlb21ldHJ5LmdldChpZCk7XG4gIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gdGhpcy5nZW9tZXRyeS5yZW1vdmUoaWQpIHx8IHRoaXMuY3JlYXRlUHJpbWl0aXZlO1xuICBpZiAodGhpcy51cGRhdGVycy5yZW1vdmUoaWQpKSB7XG4gICAgdGhpcy5yZWN0YW5nbGVDb2xsaXNpb25DaGVjay5yZW1vdmUoXG4gICAgICBpZCxcbiAgICAgIGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnkucmVjdGFuZ2xlXG4gICAgKTtcbiAgICB0aGlzLnVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXMucmVtb3ZlKGlkKTtcbiAgICB2YXIgdW5zdWJzY3JpYmUgPSB0aGlzLnN1YnNjcmlwdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoZGVmaW5lZCh1bnN1YnNjcmliZSkpIHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucmVtb3ZlKGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBpc1VwZGF0ZWQgPSB0cnVlO1xuICB2YXIgcHJpbWl0aXZlID0gdGhpcy5wcmltaXRpdmU7XG4gIHZhciBwcmltaXRpdmVzID0gdGhpcy5wcmltaXRpdmVzO1xuICB2YXIgZ2VvbWV0cmllcyA9IHRoaXMuZ2VvbWV0cnkudmFsdWVzO1xuICB2YXIgaTtcblxuICBpZiAodGhpcy5jcmVhdGVQcmltaXRpdmUpIHtcbiAgICB2YXIgZ2VvbWV0cmllc0xlbmd0aCA9IGdlb21ldHJpZXMubGVuZ3RoO1xuICAgIGlmIChnZW9tZXRyaWVzTGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgICAgICAvLyBLZWVwIGEgaGFuZGxlIHRvIHRoZSBvbGQgcHJpbWl0aXZlIHNvIGl0IGNhbiBiZSByZW1vdmVkIHdoZW4gdGhlIHVwZGF0ZWQgdmVyc2lvbiBpcyByZWFkeS5cbiAgICAgICAgaWYgKCFkZWZpbmVkKHRoaXMub2xkUHJpbWl0aXZlKSkge1xuICAgICAgICAgIHRoaXMub2xkUHJpbWl0aXZlID0gcHJpbWl0aXZlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZvciBpZiB0aGUgbmV3IHByaW1pdGl2ZSBjaGFuZ2VzIGFnYWluIGJlZm9yZSBpdCBpcyByZWFkeS5cbiAgICAgICAgICBwcmltaXRpdmVzLnJlbW92ZShwcmltaXRpdmUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWF0ZXJpYWwgPSBNYXRlcmlhbFByb3BlcnR5LmdldFZhbHVlKFxuICAgICAgICB0aW1lLFxuICAgICAgICB0aGlzLm1hdGVyaWFsUHJvcGVydHksXG4gICAgICAgIHRoaXMubWF0ZXJpYWxcbiAgICAgICk7XG5cbiAgICAgIHByaW1pdGl2ZSA9IG5ldyBHcm91bmRQcmltaXRpdmUoe1xuICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgYXN5bmNocm9ub3VzOiB0cnVlLFxuICAgICAgICBnZW9tZXRyeUluc3RhbmNlczogZ2VvbWV0cmllcy5zbGljZSgpLFxuICAgICAgICBhcHBlYXJhbmNlOiBuZXcgdGhpcy5hcHBlYXJhbmNlVHlwZSh7XG4gICAgICAgICAgbWF0ZXJpYWw6IHRoaXMubWF0ZXJpYWwsXG4gICAgICAgICAgLy8gdHJhbnNsdWNlbnQgYW5kIGNsb3NlZCBwcm9wZXJ0aWVzIG92ZXJyaWRkZW5cbiAgICAgICAgfSksXG4gICAgICAgIGNsYXNzaWZpY2F0aW9uVHlwZTogdGhpcy5jbGFzc2lmaWNhdGlvblR5cGUsXG4gICAgICB9KTtcblxuICAgICAgcHJpbWl0aXZlcy5hZGQocHJpbWl0aXZlLCB0aGlzLnpJbmRleCk7XG4gICAgICBpc1VwZGF0ZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgICAgICBwcmltaXRpdmVzLnJlbW92ZShwcmltaXRpdmUpO1xuICAgICAgICBwcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgb2xkUHJpbWl0aXZlID0gdGhpcy5vbGRQcmltaXRpdmU7XG4gICAgICBpZiAoZGVmaW5lZChvbGRQcmltaXRpdmUpKSB7XG4gICAgICAgIHByaW1pdGl2ZXMucmVtb3ZlKG9sZFByaW1pdGl2ZSk7XG4gICAgICAgIHRoaXMub2xkUHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYXR0cmlidXRlcy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKGRlZmluZWQocHJpbWl0aXZlKSAmJiBwcmltaXRpdmUucmVhZHkpIHtcbiAgICBwcmltaXRpdmUuc2hvdyA9IHRydWU7XG4gICAgaWYgKGRlZmluZWQodGhpcy5vbGRQcmltaXRpdmUpKSB7XG4gICAgICBwcmltaXRpdmVzLnJlbW92ZSh0aGlzLm9sZFByaW1pdGl2ZSk7XG4gICAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0aGlzLm1hdGVyaWFsID0gTWF0ZXJpYWxQcm9wZXJ0eS5nZXRWYWx1ZShcbiAgICAgIHRpbWUsXG4gICAgICB0aGlzLm1hdGVyaWFsUHJvcGVydHksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcbiAgICB0aGlzLnByaW1pdGl2ZS5hcHBlYXJhbmNlLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcblxuICAgIHZhciB1cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnZhbHVlcztcbiAgICB2YXIgbGVuZ3RoID0gdXBkYXRlcnNXaXRoQXR0cmlidXRlcy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdXBkYXRlciA9IHVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXNbaV07XG4gICAgICB2YXIgZW50aXR5ID0gdXBkYXRlci5lbnRpdHk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdlb21ldHJ5LmdldCh1cGRhdGVyLmlkKTtcblxuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0KGluc3RhbmNlLmlkLmlkKTtcbiAgICAgIGlmICghZGVmaW5lZChhdHRyaWJ1dGVzKSkge1xuICAgICAgICBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKGluc3RhbmNlLmlkKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNldChpbnN0YW5jZS5pZC5pZCwgYXR0cmlidXRlcyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93ID1cbiAgICAgICAgZW50aXR5LmlzU2hvd2luZyAmJiAodXBkYXRlci5oYXNDb25zdGFudEZpbGwgfHwgdXBkYXRlci5pc0ZpbGxlZCh0aW1lKSk7XG4gICAgICB2YXIgY3VycmVudFNob3cgPSBhdHRyaWJ1dGVzLnNob3dbMF0gPT09IDE7XG4gICAgICBpZiAoc2hvdyAhPT0gY3VycmVudFNob3cpIHtcbiAgICAgICAgYXR0cmlidXRlcy5zaG93ID0gU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgICBzaG93LFxuICAgICAgICAgIGF0dHJpYnV0ZXMuc2hvd1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkgPVxuICAgICAgICB1cGRhdGVyLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5O1xuICAgICAgaWYgKCFQcm9wZXJ0eS5pc0NvbnN0YW50KGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5KSkge1xuICAgICAgICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHksXG4gICAgICAgICAgdGltZSxcbiAgICAgICAgICBkZWZhdWx0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFEaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZXF1YWxzKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5jbG9uZShcbiAgICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3REaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIGF0dHJpYnV0ZXMuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTaG93cyhwcmltaXRpdmUpO1xuICB9IGVsc2UgaWYgKGRlZmluZWQocHJpbWl0aXZlKSAmJiAhcHJpbWl0aXZlLnJlYWR5KSB7XG4gICAgaXNVcGRhdGVkID0gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzVXBkYXRlZDtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS51cGRhdGVTaG93cyA9IGZ1bmN0aW9uIChwcmltaXRpdmUpIHtcbiAgdmFyIHNob3dzVXBkYXRlZCA9IHRoaXMuc2hvd3NVcGRhdGVkLnZhbHVlcztcbiAgdmFyIGxlbmd0aCA9IHNob3dzVXBkYXRlZC5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdXBkYXRlciA9IHNob3dzVXBkYXRlZFtpXTtcbiAgICB2YXIgZW50aXR5ID0gdXBkYXRlci5lbnRpdHk7XG4gICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZW9tZXRyeS5nZXQodXBkYXRlci5pZCk7XG5cbiAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcy5nZXQoaW5zdGFuY2UuaWQuaWQpO1xuICAgIGlmICghZGVmaW5lZChhdHRyaWJ1dGVzKSkge1xuICAgICAgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5nZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyhpbnN0YW5jZS5pZCk7XG4gICAgICB0aGlzLmF0dHJpYnV0ZXMuc2V0KGluc3RhbmNlLmlkLmlkLCBhdHRyaWJ1dGVzKTtcbiAgICB9XG5cbiAgICB2YXIgc2hvdyA9IGVudGl0eS5pc1Nob3dpbmc7XG4gICAgdmFyIGN1cnJlbnRTaG93ID0gYXR0cmlidXRlcy5zaG93WzBdID09PSAxO1xuICAgIGlmIChzaG93ICE9PSBjdXJyZW50U2hvdykge1xuICAgICAgYXR0cmlidXRlcy5zaG93ID0gU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgc2hvdyxcbiAgICAgICAgYXR0cmlidXRlcy5zaG93XG4gICAgICApO1xuICAgICAgaW5zdGFuY2UuYXR0cmlidXRlcy5zaG93LnZhbHVlWzBdID0gYXR0cmlidXRlcy5zaG93WzBdO1xuICAgIH1cbiAgfVxuICB0aGlzLnNob3dzVXBkYXRlZC5yZW1vdmVBbGwoKTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIHJldHVybiB0aGlzLnVwZGF0ZXJzLmNvbnRhaW5zKHVwZGF0ZXIuaWQpO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLmdldEJvdW5kaW5nU3BoZXJlID0gZnVuY3Rpb24gKHVwZGF0ZXIsIHJlc3VsdCkge1xuICB2YXIgcHJpbWl0aXZlID0gdGhpcy5wcmltaXRpdmU7XG4gIGlmICghcHJpbWl0aXZlLnJlYWR5KSB7XG4gICAgcmV0dXJuIEJvdW5kaW5nU3BoZXJlU3RhdGUuUEVORElORztcbiAgfVxuICB2YXIgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5nZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyh1cGRhdGVyLmVudGl0eSk7XG4gIGlmIChcbiAgICAhZGVmaW5lZChhdHRyaWJ1dGVzKSB8fFxuICAgICFkZWZpbmVkKGF0dHJpYnV0ZXMuYm91bmRpbmdTcGhlcmUpIHx8XG4gICAgKGRlZmluZWQoYXR0cmlidXRlcy5zaG93KSAmJiBhdHRyaWJ1dGVzLnNob3dbMF0gPT09IDApXG4gICkge1xuICAgIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLkZBSUxFRDtcbiAgfVxuICBhdHRyaWJ1dGVzLmJvdW5kaW5nU3BoZXJlLmNsb25lKHJlc3VsdCk7XG4gIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLkRPTkU7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHByaW1pdGl2ZSA9IHRoaXMucHJpbWl0aXZlO1xuICB2YXIgcHJpbWl0aXZlcyA9IHRoaXMucHJpbWl0aXZlcztcbiAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgIHByaW1pdGl2ZXMucmVtb3ZlKHByaW1pdGl2ZSk7XG4gIH1cbiAgdmFyIG9sZFByaW1pdGl2ZSA9IHRoaXMub2xkUHJpbWl0aXZlO1xuICBpZiAoZGVmaW5lZChvbGRQcmltaXRpdmUpKSB7XG4gICAgcHJpbWl0aXZlcy5yZW1vdmUob2xkUHJpbWl0aXZlKTtcbiAgfVxuICB0aGlzLnJlbW92ZU1hdGVyaWFsU3Vic2NyaXB0aW9uKCk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIFN0YXRpY0dyb3VuZEdlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaChcbiAgcHJpbWl0aXZlcyxcbiAgY2xhc3NpZmljYXRpb25UeXBlLFxuICBhcHBlYXJhbmNlVHlwZVxuKSB7XG4gIHRoaXMuX2l0ZW1zID0gW107XG4gIHRoaXMuX3ByaW1pdGl2ZXMgPSBwcmltaXRpdmVzO1xuICB0aGlzLl9jbGFzc2lmaWNhdGlvblR5cGUgPSBjbGFzc2lmaWNhdGlvblR5cGU7XG4gIHRoaXMuX2FwcGVhcmFuY2VUeXBlID0gYXBwZWFyYW5jZVR5cGU7XG59XG5cblN0YXRpY0dyb3VuZEdlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRpbWUsIHVwZGF0ZXIpIHtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIHZhciBnZW9tZXRyeUluc3RhbmNlID0gdXBkYXRlci5jcmVhdGVGaWxsR2VvbWV0cnlJbnN0YW5jZSh0aW1lKTtcbiAgdmFyIHVzaW5nU3BoZXJpY2FsVGV4dHVyZUNvb3JkaW5hdGVzID0gU2hhZG93Vm9sdW1lQXBwZWFyYW5jZS5zaG91bGRVc2VTcGhlcmljYWxDb29yZGluYXRlcyhcbiAgICBnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5LnJlY3RhbmdsZVxuICApO1xuICB2YXIgekluZGV4ID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQodXBkYXRlci56SW5kZXgsIDApO1xuICAvLyBDaGVjayBpZiB0aGUgRW50aXR5IHJlcHJlc2VudGVkIGJ5IHRoZSB1cGRhdGVyIGNhbiBiZSBwbGFjZWQgaW4gYW4gZXhpc3RpbmcgYmF0Y2guIFJlcXVpcmVtZW50czpcbiAgLy8gKiBjb21wYXRpYmxlIG1hdGVyaWFsIChzYW1lIG1hdGVyaWFsIG9yIHNhbWUgY29sb3IpXG4gIC8vICogc2FtZSB0eXBlIG9mIHRleHR1cmUgY29vcmRpbmF0ZXMgKHNwaGVyaWNhbCB2cy4gcGxhbmFyKVxuICAvLyAqIGNvbnNlcnZhdGl2ZWx5IG5vbi1vdmVybGFwcGluZyB3aXRoIGFueSBlbnRpdGllcyBpbiB0aGUgZXhpc3RpbmcgYmF0Y2hcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgaWYgKFxuICAgICAgaXRlbS5pc01hdGVyaWFsKHVwZGF0ZXIpICYmXG4gICAgICBpdGVtLnVzaW5nU3BoZXJpY2FsVGV4dHVyZUNvb3JkaW5hdGVzID09PVxuICAgICAgICB1c2luZ1NwaGVyaWNhbFRleHR1cmVDb29yZGluYXRlcyAmJlxuICAgICAgaXRlbS56SW5kZXggPT09IHpJbmRleCAmJlxuICAgICAgIWl0ZW0ub3ZlcmxhcHBpbmcoZ2VvbWV0cnlJbnN0YW5jZS5nZW9tZXRyeS5yZWN0YW5nbGUpXG4gICAgKSB7XG4gICAgICBpdGVtLmFkZCh0aW1lLCB1cGRhdGVyLCBnZW9tZXRyeUluc3RhbmNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgLy8gSWYgYSBjb21wYXRpYmxlIGJhdGNoIHdhc24ndCBmb3VuZCwgY3JlYXRlIGEgbmV3IGJhdGNoLlxuICB2YXIgYmF0Y2ggPSBuZXcgQmF0Y2goXG4gICAgdGhpcy5fcHJpbWl0aXZlcyxcbiAgICB0aGlzLl9jbGFzc2lmaWNhdGlvblR5cGUsXG4gICAgdGhpcy5fYXBwZWFyYW5jZVR5cGUsXG4gICAgdXBkYXRlci5maWxsTWF0ZXJpYWxQcm9wZXJ0eSxcbiAgICB1c2luZ1NwaGVyaWNhbFRleHR1cmVDb29yZGluYXRlcyxcbiAgICB6SW5kZXhcbiAgKTtcbiAgYmF0Y2guYWRkKHRpbWUsIHVwZGF0ZXIsIGdlb21ldHJ5SW5zdGFuY2UpO1xuICBpdGVtcy5wdXNoKGJhdGNoKTtcbn07XG5cblN0YXRpY0dyb3VuZEdlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHVwZGF0ZXIpIHtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgaWYgKGl0ZW0ucmVtb3ZlKHVwZGF0ZXIpKSB7XG4gICAgICBpZiAoaXRlbS51cGRhdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaXRlbXMuc3BsaWNlKGksIDEpO1xuICAgICAgICBpdGVtLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufTtcblxuU3RhdGljR3JvdW5kR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodGltZSkge1xuICB2YXIgaTtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG5cbiAgZm9yIChpID0gbGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLmludmFsaWRhdGVkKSB7XG4gICAgICBpdGVtcy5zcGxpY2UoaSwgMSk7XG4gICAgICB2YXIgdXBkYXRlcnMgPSBpdGVtLnVwZGF0ZXJzLnZhbHVlcztcbiAgICAgIHZhciB1cGRhdGVyc0xlbmd0aCA9IHVwZGF0ZXJzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGggPSAwOyBoIDwgdXBkYXRlcnNMZW5ndGg7IGgrKykge1xuICAgICAgICB0aGlzLmFkZCh0aW1lLCB1cGRhdGVyc1toXSk7XG4gICAgICB9XG4gICAgICBpdGVtLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cblxuICB2YXIgaXNVcGRhdGVkID0gdHJ1ZTtcbiAgZm9yIChpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgaXNVcGRhdGVkID0gaXRlbXNbaV0udXBkYXRlKHRpbWUpICYmIGlzVXBkYXRlZDtcbiAgfVxuICByZXR1cm4gaXNVcGRhdGVkO1xufTtcblxuU3RhdGljR3JvdW5kR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoLnByb3RvdHlwZS5nZXRCb3VuZGluZ1NwaGVyZSA9IGZ1bmN0aW9uIChcbiAgdXBkYXRlcixcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLmNvbnRhaW5zKHVwZGF0ZXIpKSB7XG4gICAgICByZXR1cm4gaXRlbS5nZXRCb3VuZGluZ1NwaGVyZSh1cGRhdGVyLCByZXN1bHQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQ7XG59O1xuXG5TdGF0aWNHcm91bmRHZW9tZXRyeVBlck1hdGVyaWFsQmF0Y2gucHJvdG90eXBlLnJlbW92ZUFsbFByaW1pdGl2ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpdGVtcyA9IHRoaXMuX2l0ZW1zO1xuICB2YXIgbGVuZ3RoID0gaXRlbXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbXNbaV0uZGVzdHJveSgpO1xuICB9XG4gIHRoaXMuX2l0ZW1zLmxlbmd0aCA9IDA7XG59O1xuZXhwb3J0IGRlZmF1bHQgU3RhdGljR3JvdW5kR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///65249\n')},44172:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8629);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92062);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47861);\n/* harmony import */ var _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24689);\n/* harmony import */ var _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(37939);\n/* harmony import */ var _Scene_GroundPolylinePrimitive_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(14978);\n/* harmony import */ var _Scene_PolylineColorAppearance_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(54052);\n/* harmony import */ var _Scene_PolylineMaterialAppearance_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(13597);\n/* harmony import */ var _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69895);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(20174);\n/* harmony import */ var _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(46317);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar scratchColor = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar distanceDisplayConditionScratch = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar defaultDistanceDisplayCondition = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\n// Encapsulates a Primitive and all the entities that it represents.\nfunction Batch(\n  orderedGroundPrimitives,\n  classificationType,\n  materialProperty,\n  zIndex,\n  asynchronous\n) {\n  var appearanceType;\n  if (materialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z) {\n    appearanceType = _Scene_PolylineColorAppearance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z;\n  } else {\n    appearanceType = _Scene_PolylineMaterialAppearance_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z;\n  }\n\n  this.orderedGroundPrimitives = orderedGroundPrimitives; // scene level primitive collection\n  this.classificationType = classificationType;\n  this.appearanceType = appearanceType;\n  this.materialProperty = materialProperty;\n  this.updaters = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.createPrimitive = true;\n  this.primitive = undefined; // a GroundPolylinePrimitive encapsulating all the entities\n  this.oldPrimitive = undefined;\n  this.geometry = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.material = undefined;\n  this.updatersWithAttributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.attributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.invalidated = false;\n  this.removeMaterialSubscription = materialProperty.definitionChanged.addEventListener(\n    Batch.prototype.onMaterialChanged,\n    this\n  );\n  this.subscriptions = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.showsUpdated = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.zIndex = zIndex;\n\n  this._asynchronous = asynchronous;\n}\n\nBatch.prototype.onMaterialChanged = function () {\n  this.invalidated = true;\n};\n\n// Check if the given updater\'s material is compatible with this batch\nBatch.prototype.isMaterial = function (updater) {\n  var material = this.materialProperty;\n  var updaterMaterial = updater.fillMaterialProperty;\n\n  if (\n    updaterMaterial === material ||\n    (updaterMaterial instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z &&\n      material instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)\n  ) {\n    return true;\n  }\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(material) && material.equals(updaterMaterial);\n};\n\nBatch.prototype.add = function (time, updater, geometryInstance) {\n  var id = updater.id;\n  this.updaters.set(id, updater);\n  this.geometry.set(id, geometryInstance);\n  // Updaters with dynamic attributes must be tracked separately, may exit the batch\n  if (\n    !updater.hasConstantFill ||\n    !updater.fillMaterialProperty.isConstant ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].isConstant */ .Z.isConstant(updater.distanceDisplayConditionProperty)\n  ) {\n    this.updatersWithAttributes.set(id, updater);\n  } else {\n    var that = this;\n    // Listen for show changes. These will be synchronized in updateShows.\n    this.subscriptions.set(\n      id,\n      updater.entity.definitionChanged.addEventListener(function (\n        entity,\n        propertyName,\n        newValue,\n        oldValue\n      ) {\n        if (propertyName === "isShowing") {\n          that.showsUpdated.set(updater.id, updater);\n        }\n      })\n    );\n  }\n  this.createPrimitive = true;\n};\n\nBatch.prototype.remove = function (updater) {\n  var id = updater.id;\n  this.createPrimitive = this.geometry.remove(id) || this.createPrimitive;\n  if (this.updaters.remove(id)) {\n    this.updatersWithAttributes.remove(id);\n    var unsubscribe = this.subscriptions.get(id);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(unsubscribe)) {\n      unsubscribe();\n      this.subscriptions.remove(id);\n    }\n    return true;\n  }\n  return false;\n};\n\nBatch.prototype.update = function (time) {\n  var isUpdated = true;\n  var primitive = this.primitive;\n  var orderedGroundPrimitives = this.orderedGroundPrimitives;\n  var geometries = this.geometry.values;\n  var i;\n\n  if (this.createPrimitive) {\n    var geometriesLength = geometries.length;\n    if (geometriesLength > 0) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(primitive)) {\n        // Keep a handle to the old primitive so it can be removed when the updated version is ready.\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this.oldPrimitive)) {\n          this.oldPrimitive = primitive;\n        } else {\n          // For if the new primitive changes again before it is ready.\n          orderedGroundPrimitives.remove(primitive);\n        }\n      }\n\n      primitive = new _Scene_GroundPolylinePrimitive_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n        show: false,\n        asynchronous: this._asynchronous,\n        geometryInstances: geometries.slice(),\n        appearance: new this.appearanceType(),\n        classificationType: this.classificationType,\n      });\n\n      if (this.appearanceType === _Scene_PolylineMaterialAppearance_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z) {\n        this.material = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValue */ .Z.getValue(\n          time,\n          this.materialProperty,\n          this.material\n        );\n        primitive.appearance.material = this.material;\n      }\n\n      orderedGroundPrimitives.add(primitive, this.zIndex);\n      isUpdated = false;\n    } else {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(primitive)) {\n        orderedGroundPrimitives.remove(primitive);\n        primitive = undefined;\n      }\n      var oldPrimitive = this.oldPrimitive;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(oldPrimitive)) {\n        orderedGroundPrimitives.remove(oldPrimitive);\n        this.oldPrimitive = undefined;\n      }\n    }\n\n    this.attributes.removeAll();\n    this.primitive = primitive;\n    this.createPrimitive = false;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(primitive) && primitive.ready) {\n    primitive.show = true;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this.oldPrimitive)) {\n      orderedGroundPrimitives.remove(this.oldPrimitive);\n      this.oldPrimitive = undefined;\n    }\n\n    if (this.appearanceType === _Scene_PolylineMaterialAppearance_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z) {\n      this.material = _MaterialProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].getValue */ .Z.getValue(\n        time,\n        this.materialProperty,\n        this.material\n      );\n      this.primitive.appearance.material = this.material;\n    }\n    var updatersWithAttributes = this.updatersWithAttributes.values;\n    var length = updatersWithAttributes.length;\n    for (i = 0; i < length; i++) {\n      var updater = updatersWithAttributes[i];\n      var entity = updater.entity;\n      var instance = this.geometry.get(updater.id);\n\n      var attributes = this.attributes.get(instance.id.id);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(attributes)) {\n        attributes = primitive.getGeometryInstanceAttributes(instance.id);\n        this.attributes.set(instance.id.id, attributes);\n      }\n\n      if (!updater.fillMaterialProperty.isConstant) {\n        var colorProperty = updater.fillMaterialProperty.color;\n        var resultColor = _Property_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          colorProperty,\n          time,\n          _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].WHITE */ .Z.WHITE,\n          scratchColor\n        );\n        if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(attributes._lastColor, resultColor)) {\n          attributes._lastColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n            resultColor,\n            attributes._lastColor\n          );\n          attributes.color = _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].toValue */ .Z.toValue(\n            resultColor,\n            attributes.color\n          );\n        }\n      }\n\n      var show =\n        entity.isShowing && (updater.hasConstantFill || updater.isFilled(time));\n      var currentShow = attributes.show[0] === 1;\n      if (show !== currentShow) {\n        attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toValue */ .Z.toValue(\n          show,\n          attributes.show\n        );\n      }\n\n      var distanceDisplayConditionProperty =\n        updater.distanceDisplayConditionProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].isConstant */ .Z.isConstant(distanceDisplayConditionProperty)) {\n        var distanceDisplayCondition = _Property_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          distanceDisplayConditionProperty,\n          time,\n          defaultDistanceDisplayCondition,\n          distanceDisplayConditionScratch\n        );\n        if (\n          !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          )\n        ) {\n          attributes._lastDistanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          );\n          attributes.distanceDisplayCondition = _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toValue */ .Z.toValue(\n            distanceDisplayCondition,\n            attributes.distanceDisplayCondition\n          );\n        }\n      }\n    }\n\n    this.updateShows(primitive);\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(primitive) && !primitive.ready) {\n    isUpdated = false;\n  }\n  return isUpdated;\n};\n\nBatch.prototype.updateShows = function (primitive) {\n  var showsUpdated = this.showsUpdated.values;\n  var length = showsUpdated.length;\n  for (var i = 0; i < length; i++) {\n    var updater = showsUpdated[i];\n    var entity = updater.entity;\n    var instance = this.geometry.get(updater.id);\n\n    var attributes = this.attributes.get(instance.id.id);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(attributes)) {\n      attributes = primitive.getGeometryInstanceAttributes(instance.id);\n      this.attributes.set(instance.id.id, attributes);\n    }\n\n    var show = entity.isShowing;\n    var currentShow = attributes.show[0] === 1;\n    if (show !== currentShow) {\n      attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toValue */ .Z.toValue(\n        show,\n        attributes.show\n      );\n      instance.attributes.show.value[0] = attributes.show[0];\n    }\n  }\n  this.showsUpdated.removeAll();\n};\n\nBatch.prototype.contains = function (updater) {\n  return this.updaters.contains(updater.id);\n};\n\nBatch.prototype.getBoundingSphere = function (updater, result) {\n  var primitive = this.primitive;\n  if (!primitive.ready) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].PENDING */ .Z.PENDING;\n  }\n  var attributes = primitive.getGeometryInstanceAttributes(updater.entity);\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(attributes) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(attributes.boundingSphere) ||\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(attributes.show) && attributes.show[0] === 0)\n  ) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].FAILED */ .Z.FAILED;\n  }\n  attributes.boundingSphere.clone(result);\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].DONE */ .Z.DONE;\n};\n\nBatch.prototype.destroy = function () {\n  var primitive = this.primitive;\n  var orderedGroundPrimitives = this.orderedGroundPrimitives;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(primitive)) {\n    orderedGroundPrimitives.remove(primitive);\n  }\n  var oldPrimitive = this.oldPrimitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(oldPrimitive)) {\n    orderedGroundPrimitives.remove(oldPrimitive);\n  }\n  this.removeMaterialSubscription();\n};\n\n/**\n * @private\n */\nfunction StaticGroundPolylinePerMaterialBatch(\n  orderedGroundPrimitives,\n  classificationType,\n  asynchronous\n) {\n  this._items = [];\n  this._orderedGroundPrimitives = orderedGroundPrimitives;\n  this._classificationType = classificationType;\n  this._asynchronous = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(asynchronous, true);\n}\n\nStaticGroundPolylinePerMaterialBatch.prototype.add = function (time, updater) {\n  var items = this._items;\n  var length = items.length;\n  var geometryInstance = updater.createFillGeometryInstance(time);\n  var zIndex = _Property_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(updater.zIndex, 0);\n  // Check if the Entity represented by the updater has the same material or a material representable with per-instance color.\n  for (var i = 0; i < length; ++i) {\n    var item = items[i];\n    if (item.isMaterial(updater) && item.zIndex === zIndex) {\n      item.add(time, updater, geometryInstance);\n      return;\n    }\n  }\n  // If a compatible batch wasn\'t found, create a new batch.\n  var batch = new Batch(\n    this._orderedGroundPrimitives,\n    this._classificationType,\n    updater.fillMaterialProperty,\n    zIndex,\n    this._asynchronous\n  );\n  batch.add(time, updater, geometryInstance);\n  items.push(batch);\n};\n\nStaticGroundPolylinePerMaterialBatch.prototype.remove = function (updater) {\n  var items = this._items;\n  var length = items.length;\n  for (var i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.remove(updater)) {\n      if (item.updaters.length === 0) {\n        items.splice(i, 1);\n        item.destroy();\n      }\n      break;\n    }\n  }\n};\n\nStaticGroundPolylinePerMaterialBatch.prototype.update = function (time) {\n  var i;\n  var items = this._items;\n  var length = items.length;\n\n  for (i = length - 1; i >= 0; i--) {\n    var item = items[i];\n    if (item.invalidated) {\n      items.splice(i, 1);\n      var updaters = item.updaters.values;\n      var updatersLength = updaters.length;\n      for (var h = 0; h < updatersLength; h++) {\n        this.add(time, updaters[h]);\n      }\n      item.destroy();\n    }\n  }\n\n  var isUpdated = true;\n  for (i = 0; i < items.length; i++) {\n    isUpdated = items[i].update(time) && isUpdated;\n  }\n  return isUpdated;\n};\n\nStaticGroundPolylinePerMaterialBatch.prototype.getBoundingSphere = function (\n  updater,\n  result\n) {\n  var items = this._items;\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    var item = items[i];\n    if (item.contains(updater)) {\n      return item.getBoundingSphere(updater, result);\n    }\n  }\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].FAILED */ .Z.FAILED;\n};\n\nStaticGroundPolylinePerMaterialBatch.prototype.removeAllPrimitives = function () {\n  var items = this._items;\n  var length = items.length;\n  for (var i = 0; i < length; i++) {\n    items[i].destroy();\n  }\n  this._items.length = 0;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (StaticGroundPolylinePerMaterialBatch);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9CQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyxrQkFBa0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQTBCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsb0NBQW9DLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvU3RhdGljR3JvdW5kUG9seWxpbmVQZXJNYXRlcmlhbEJhdGNoLmpzPzM3ZjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFzc29jaWF0aXZlQXJyYXkgZnJvbSBcIi4uL0NvcmUvQXNzb2NpYXRpdmVBcnJheS5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0NvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24gZnJvbSBcIi4uL0NvcmUvRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmpzXCI7XG5pbXBvcnQgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9EaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmpzXCI7XG5pbXBvcnQgU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUgZnJvbSBcIi4uL0NvcmUvU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBHcm91bmRQb2x5bGluZVByaW1pdGl2ZSBmcm9tIFwiLi4vU2NlbmUvR3JvdW5kUG9seWxpbmVQcmltaXRpdmUuanNcIjtcbmltcG9ydCBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZSBmcm9tIFwiLi4vU2NlbmUvUG9seWxpbmVDb2xvckFwcGVhcmFuY2UuanNcIjtcbmltcG9ydCBQb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZSBmcm9tIFwiLi4vU2NlbmUvUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2UuanNcIjtcbmltcG9ydCBCb3VuZGluZ1NwaGVyZVN0YXRlIGZyb20gXCIuL0JvdW5kaW5nU3BoZXJlU3RhdGUuanNcIjtcbmltcG9ydCBDb2xvck1hdGVyaWFsUHJvcGVydHkgZnJvbSBcIi4vQ29sb3JNYXRlcmlhbFByb3BlcnR5LmpzXCI7XG5pbXBvcnQgTWF0ZXJpYWxQcm9wZXJ0eSBmcm9tIFwiLi9NYXRlcmlhbFByb3BlcnR5LmpzXCI7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSBcIi4vUHJvcGVydHkuanNcIjtcblxudmFyIHNjcmF0Y2hDb2xvciA9IG5ldyBDb2xvcigpO1xudmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblNjcmF0Y2ggPSBuZXcgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKCk7XG52YXIgZGVmYXVsdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IG5ldyBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24oKTtcblxuLy8gRW5jYXBzdWxhdGVzIGEgUHJpbWl0aXZlIGFuZCBhbGwgdGhlIGVudGl0aWVzIHRoYXQgaXQgcmVwcmVzZW50cy5cbmZ1bmN0aW9uIEJhdGNoKFxuICBvcmRlcmVkR3JvdW5kUHJpbWl0aXZlcyxcbiAgY2xhc3NpZmljYXRpb25UeXBlLFxuICBtYXRlcmlhbFByb3BlcnR5LFxuICB6SW5kZXgsXG4gIGFzeW5jaHJvbm91c1xuKSB7XG4gIHZhciBhcHBlYXJhbmNlVHlwZTtcbiAgaWYgKG1hdGVyaWFsUHJvcGVydHkgaW5zdGFuY2VvZiBDb2xvck1hdGVyaWFsUHJvcGVydHkpIHtcbiAgICBhcHBlYXJhbmNlVHlwZSA9IFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlO1xuICB9IGVsc2Uge1xuICAgIGFwcGVhcmFuY2VUeXBlID0gUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2U7XG4gIH1cblxuICB0aGlzLm9yZGVyZWRHcm91bmRQcmltaXRpdmVzID0gb3JkZXJlZEdyb3VuZFByaW1pdGl2ZXM7IC8vIHNjZW5lIGxldmVsIHByaW1pdGl2ZSBjb2xsZWN0aW9uXG4gIHRoaXMuY2xhc3NpZmljYXRpb25UeXBlID0gY2xhc3NpZmljYXRpb25UeXBlO1xuICB0aGlzLmFwcGVhcmFuY2VUeXBlID0gYXBwZWFyYW5jZVR5cGU7XG4gIHRoaXMubWF0ZXJpYWxQcm9wZXJ0eSA9IG1hdGVyaWFsUHJvcGVydHk7XG4gIHRoaXMudXBkYXRlcnMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XG4gIHRoaXMucHJpbWl0aXZlID0gdW5kZWZpbmVkOyAvLyBhIEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlIGVuY2Fwc3VsYXRpbmcgYWxsIHRoZSBlbnRpdGllc1xuICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5nZW9tZXRyeSA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMubWF0ZXJpYWwgPSB1bmRlZmluZWQ7XG4gIHRoaXMudXBkYXRlcnNXaXRoQXR0cmlidXRlcyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMuYXR0cmlidXRlcyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMuaW52YWxpZGF0ZWQgPSBmYWxzZTtcbiAgdGhpcy5yZW1vdmVNYXRlcmlhbFN1YnNjcmlwdGlvbiA9IG1hdGVyaWFsUHJvcGVydHkuZGVmaW5pdGlvbkNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBCYXRjaC5wcm90b3R5cGUub25NYXRlcmlhbENoYW5nZWQsXG4gICAgdGhpc1xuICApO1xuICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLnNob3dzVXBkYXRlZCA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMuekluZGV4ID0gekluZGV4O1xuXG4gIHRoaXMuX2FzeW5jaHJvbm91cyA9IGFzeW5jaHJvbm91cztcbn1cblxuQmF0Y2gucHJvdG90eXBlLm9uTWF0ZXJpYWxDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmludmFsaWRhdGVkID0gdHJ1ZTtcbn07XG5cbi8vIENoZWNrIGlmIHRoZSBnaXZlbiB1cGRhdGVyJ3MgbWF0ZXJpYWwgaXMgY29tcGF0aWJsZSB3aXRoIHRoaXMgYmF0Y2hcbkJhdGNoLnByb3RvdHlwZS5pc01hdGVyaWFsID0gZnVuY3Rpb24gKHVwZGF0ZXIpIHtcbiAgdmFyIG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbFByb3BlcnR5O1xuICB2YXIgdXBkYXRlck1hdGVyaWFsID0gdXBkYXRlci5maWxsTWF0ZXJpYWxQcm9wZXJ0eTtcblxuICBpZiAoXG4gICAgdXBkYXRlck1hdGVyaWFsID09PSBtYXRlcmlhbCB8fFxuICAgICh1cGRhdGVyTWF0ZXJpYWwgaW5zdGFuY2VvZiBDb2xvck1hdGVyaWFsUHJvcGVydHkgJiZcbiAgICAgIG1hdGVyaWFsIGluc3RhbmNlb2YgQ29sb3JNYXRlcmlhbFByb3BlcnR5KVxuICApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZGVmaW5lZChtYXRlcmlhbCkgJiYgbWF0ZXJpYWwuZXF1YWxzKHVwZGF0ZXJNYXRlcmlhbCk7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRpbWUsIHVwZGF0ZXIsIGdlb21ldHJ5SW5zdGFuY2UpIHtcbiAgdmFyIGlkID0gdXBkYXRlci5pZDtcbiAgdGhpcy51cGRhdGVycy5zZXQoaWQsIHVwZGF0ZXIpO1xuICB0aGlzLmdlb21ldHJ5LnNldChpZCwgZ2VvbWV0cnlJbnN0YW5jZSk7XG4gIC8vIFVwZGF0ZXJzIHdpdGggZHluYW1pYyBhdHRyaWJ1dGVzIG11c3QgYmUgdHJhY2tlZCBzZXBhcmF0ZWx5LCBtYXkgZXhpdCB0aGUgYmF0Y2hcbiAgaWYgKFxuICAgICF1cGRhdGVyLmhhc0NvbnN0YW50RmlsbCB8fFxuICAgICF1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5LmlzQ29uc3RhbnQgfHxcbiAgICAhUHJvcGVydHkuaXNDb25zdGFudCh1cGRhdGVyLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5KVxuICApIHtcbiAgICB0aGlzLnVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXMuc2V0KGlkLCB1cGRhdGVyKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgLy8gTGlzdGVuIGZvciBzaG93IGNoYW5nZXMuIFRoZXNlIHdpbGwgYmUgc3luY2hyb25pemVkIGluIHVwZGF0ZVNob3dzLlxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zZXQoXG4gICAgICBpZCxcbiAgICAgIHVwZGF0ZXIuZW50aXR5LmRlZmluaXRpb25DaGFuZ2VkLmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24gKFxuICAgICAgICBlbnRpdHksXG4gICAgICAgIHByb3BlcnR5TmFtZSxcbiAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgIG9sZFZhbHVlXG4gICAgICApIHtcbiAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gXCJpc1Nob3dpbmdcIikge1xuICAgICAgICAgIHRoYXQuc2hvd3NVcGRhdGVkLnNldCh1cGRhdGVyLmlkLCB1cGRhdGVyKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gdHJ1ZTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICB2YXIgaWQgPSB1cGRhdGVyLmlkO1xuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IHRoaXMuZ2VvbWV0cnkucmVtb3ZlKGlkKSB8fCB0aGlzLmNyZWF0ZVByaW1pdGl2ZTtcbiAgaWYgKHRoaXMudXBkYXRlcnMucmVtb3ZlKGlkKSkge1xuICAgIHRoaXMudXBkYXRlcnNXaXRoQXR0cmlidXRlcy5yZW1vdmUoaWQpO1xuICAgIHZhciB1bnN1YnNjcmliZSA9IHRoaXMuc3Vic2NyaXB0aW9ucy5nZXQoaWQpO1xuICAgIGlmIChkZWZpbmVkKHVuc3Vic2NyaWJlKSkge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5yZW1vdmUoaWQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgdmFyIGlzVXBkYXRlZCA9IHRydWU7XG4gIHZhciBwcmltaXRpdmUgPSB0aGlzLnByaW1pdGl2ZTtcbiAgdmFyIG9yZGVyZWRHcm91bmRQcmltaXRpdmVzID0gdGhpcy5vcmRlcmVkR3JvdW5kUHJpbWl0aXZlcztcbiAgdmFyIGdlb21ldHJpZXMgPSB0aGlzLmdlb21ldHJ5LnZhbHVlcztcbiAgdmFyIGk7XG5cbiAgaWYgKHRoaXMuY3JlYXRlUHJpbWl0aXZlKSB7XG4gICAgdmFyIGdlb21ldHJpZXNMZW5ndGggPSBnZW9tZXRyaWVzLmxlbmd0aDtcbiAgICBpZiAoZ2VvbWV0cmllc0xlbmd0aCA+IDApIHtcbiAgICAgIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkpIHtcbiAgICAgICAgLy8gS2VlcCBhIGhhbmRsZSB0byB0aGUgb2xkIHByaW1pdGl2ZSBzbyBpdCBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoZSB1cGRhdGVkIHZlcnNpb24gaXMgcmVhZHkuXG4gICAgICAgIGlmICghZGVmaW5lZCh0aGlzLm9sZFByaW1pdGl2ZSkpIHtcbiAgICAgICAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGb3IgaWYgdGhlIG5ldyBwcmltaXRpdmUgY2hhbmdlcyBhZ2FpbiBiZWZvcmUgaXQgaXMgcmVhZHkuXG4gICAgICAgICAgb3JkZXJlZEdyb3VuZFByaW1pdGl2ZXMucmVtb3ZlKHByaW1pdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcHJpbWl0aXZlID0gbmV3IEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlKHtcbiAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgIGFzeW5jaHJvbm91czogdGhpcy5fYXN5bmNocm9ub3VzLFxuICAgICAgICBnZW9tZXRyeUluc3RhbmNlczogZ2VvbWV0cmllcy5zbGljZSgpLFxuICAgICAgICBhcHBlYXJhbmNlOiBuZXcgdGhpcy5hcHBlYXJhbmNlVHlwZSgpLFxuICAgICAgICBjbGFzc2lmaWNhdGlvblR5cGU6IHRoaXMuY2xhc3NpZmljYXRpb25UeXBlLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLmFwcGVhcmFuY2VUeXBlID09PSBQb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZSkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gTWF0ZXJpYWxQcm9wZXJ0eS5nZXRWYWx1ZShcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIHRoaXMubWF0ZXJpYWxQcm9wZXJ0eSxcbiAgICAgICAgICB0aGlzLm1hdGVyaWFsXG4gICAgICAgICk7XG4gICAgICAgIHByaW1pdGl2ZS5hcHBlYXJhbmNlLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgIH1cblxuICAgICAgb3JkZXJlZEdyb3VuZFByaW1pdGl2ZXMuYWRkKHByaW1pdGl2ZSwgdGhpcy56SW5kZXgpO1xuICAgICAgaXNVcGRhdGVkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkpIHtcbiAgICAgICAgb3JkZXJlZEdyb3VuZFByaW1pdGl2ZXMucmVtb3ZlKHByaW1pdGl2ZSk7XG4gICAgICAgIHByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBvbGRQcmltaXRpdmUgPSB0aGlzLm9sZFByaW1pdGl2ZTtcbiAgICAgIGlmIChkZWZpbmVkKG9sZFByaW1pdGl2ZSkpIHtcbiAgICAgICAgb3JkZXJlZEdyb3VuZFByaW1pdGl2ZXMucmVtb3ZlKG9sZFByaW1pdGl2ZSk7XG4gICAgICAgIHRoaXMub2xkUHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYXR0cmlidXRlcy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKGRlZmluZWQocHJpbWl0aXZlKSAmJiBwcmltaXRpdmUucmVhZHkpIHtcbiAgICBwcmltaXRpdmUuc2hvdyA9IHRydWU7XG4gICAgaWYgKGRlZmluZWQodGhpcy5vbGRQcmltaXRpdmUpKSB7XG4gICAgICBvcmRlcmVkR3JvdW5kUHJpbWl0aXZlcy5yZW1vdmUodGhpcy5vbGRQcmltaXRpdmUpO1xuICAgICAgdGhpcy5vbGRQcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXBwZWFyYW5jZVR5cGUgPT09IFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlKSB7XG4gICAgICB0aGlzLm1hdGVyaWFsID0gTWF0ZXJpYWxQcm9wZXJ0eS5nZXRWYWx1ZShcbiAgICAgICAgdGltZSxcbiAgICAgICAgdGhpcy5tYXRlcmlhbFByb3BlcnR5LFxuICAgICAgICB0aGlzLm1hdGVyaWFsXG4gICAgICApO1xuICAgICAgdGhpcy5wcmltaXRpdmUuYXBwZWFyYW5jZS5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gICAgfVxuICAgIHZhciB1cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnZhbHVlcztcbiAgICB2YXIgbGVuZ3RoID0gdXBkYXRlcnNXaXRoQXR0cmlidXRlcy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdXBkYXRlciA9IHVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXNbaV07XG4gICAgICB2YXIgZW50aXR5ID0gdXBkYXRlci5lbnRpdHk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdlb21ldHJ5LmdldCh1cGRhdGVyLmlkKTtcblxuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0KGluc3RhbmNlLmlkLmlkKTtcbiAgICAgIGlmICghZGVmaW5lZChhdHRyaWJ1dGVzKSkge1xuICAgICAgICBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKGluc3RhbmNlLmlkKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNldChpbnN0YW5jZS5pZC5pZCwgYXR0cmlidXRlcyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdXBkYXRlci5maWxsTWF0ZXJpYWxQcm9wZXJ0eS5pc0NvbnN0YW50KSB7XG4gICAgICAgIHZhciBjb2xvclByb3BlcnR5ID0gdXBkYXRlci5maWxsTWF0ZXJpYWxQcm9wZXJ0eS5jb2xvcjtcbiAgICAgICAgdmFyIHJlc3VsdENvbG9yID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQoXG4gICAgICAgICAgY29sb3JQcm9wZXJ0eSxcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIENvbG9yLldISVRFLFxuICAgICAgICAgIHNjcmF0Y2hDb2xvclxuICAgICAgICApO1xuICAgICAgICBpZiAoIUNvbG9yLmVxdWFscyhhdHRyaWJ1dGVzLl9sYXN0Q29sb3IsIHJlc3VsdENvbG9yKSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3RDb2xvciA9IENvbG9yLmNsb25lKFxuICAgICAgICAgICAgcmVzdWx0Q29sb3IsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0Q29sb3JcbiAgICAgICAgICApO1xuICAgICAgICAgIGF0dHJpYnV0ZXMuY29sb3IgPSBDb2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgICAgIHJlc3VsdENvbG9yLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5jb2xvclxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHNob3cgPVxuICAgICAgICBlbnRpdHkuaXNTaG93aW5nICYmICh1cGRhdGVyLmhhc0NvbnN0YW50RmlsbCB8fCB1cGRhdGVyLmlzRmlsbGVkKHRpbWUpKTtcbiAgICAgIHZhciBjdXJyZW50U2hvdyA9IGF0dHJpYnV0ZXMuc2hvd1swXSA9PT0gMTtcbiAgICAgIGlmIChzaG93ICE9PSBjdXJyZW50U2hvdykge1xuICAgICAgICBhdHRyaWJ1dGVzLnNob3cgPSBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICAgIHNob3csXG4gICAgICAgICAgYXR0cmlidXRlcy5zaG93XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eSA9XG4gICAgICAgIHVwZGF0ZXIuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHk7XG4gICAgICBpZiAoIVByb3BlcnR5LmlzQ29uc3RhbnQoZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkpKSB7XG4gICAgICAgIHZhciBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yRGVmYXVsdChcbiAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eSxcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIGRlZmF1bHREaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uU2NyYXRjaFxuICAgICAgICApO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIURpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5lcXVhbHMoXG4gICAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmNsb25lKFxuICAgICAgICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICAgICk7XG4gICAgICAgICAgYXR0cmlidXRlcy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVNob3dzKHByaW1pdGl2ZSk7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChwcmltaXRpdmUpICYmICFwcmltaXRpdmUucmVhZHkpIHtcbiAgICBpc1VwZGF0ZWQgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gaXNVcGRhdGVkO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnVwZGF0ZVNob3dzID0gZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICB2YXIgc2hvd3NVcGRhdGVkID0gdGhpcy5zaG93c1VwZGF0ZWQudmFsdWVzO1xuICB2YXIgbGVuZ3RoID0gc2hvd3NVcGRhdGVkLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciB1cGRhdGVyID0gc2hvd3NVcGRhdGVkW2ldO1xuICAgIHZhciBlbnRpdHkgPSB1cGRhdGVyLmVudGl0eTtcbiAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdlb21ldHJ5LmdldCh1cGRhdGVyLmlkKTtcblxuICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzLmdldChpbnN0YW5jZS5pZC5pZCk7XG4gICAgaWYgKCFkZWZpbmVkKGF0dHJpYnV0ZXMpKSB7XG4gICAgICBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKGluc3RhbmNlLmlkKTtcbiAgICAgIHRoaXMuYXR0cmlidXRlcy5zZXQoaW5zdGFuY2UuaWQuaWQsIGF0dHJpYnV0ZXMpO1xuICAgIH1cblxuICAgIHZhciBzaG93ID0gZW50aXR5LmlzU2hvd2luZztcbiAgICB2YXIgY3VycmVudFNob3cgPSBhdHRyaWJ1dGVzLnNob3dbMF0gPT09IDE7XG4gICAgaWYgKHNob3cgIT09IGN1cnJlbnRTaG93KSB7XG4gICAgICBhdHRyaWJ1dGVzLnNob3cgPSBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKFxuICAgICAgICBzaG93LFxuICAgICAgICBhdHRyaWJ1dGVzLnNob3dcbiAgICAgICk7XG4gICAgICBpbnN0YW5jZS5hdHRyaWJ1dGVzLnNob3cudmFsdWVbMF0gPSBhdHRyaWJ1dGVzLnNob3dbMF07XG4gICAgfVxuICB9XG4gIHRoaXMuc2hvd3NVcGRhdGVkLnJlbW92ZUFsbCgpO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHVwZGF0ZXIpIHtcbiAgcmV0dXJuIHRoaXMudXBkYXRlcnMuY29udGFpbnModXBkYXRlci5pZCk7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuZ2V0Qm91bmRpbmdTcGhlcmUgPSBmdW5jdGlvbiAodXBkYXRlciwgcmVzdWx0KSB7XG4gIHZhciBwcmltaXRpdmUgPSB0aGlzLnByaW1pdGl2ZTtcbiAgaWYgKCFwcmltaXRpdmUucmVhZHkpIHtcbiAgICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5QRU5ESU5HO1xuICB9XG4gIHZhciBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKHVwZGF0ZXIuZW50aXR5KTtcbiAgaWYgKFxuICAgICFkZWZpbmVkKGF0dHJpYnV0ZXMpIHx8XG4gICAgIWRlZmluZWQoYXR0cmlidXRlcy5ib3VuZGluZ1NwaGVyZSkgfHxcbiAgICAoZGVmaW5lZChhdHRyaWJ1dGVzLnNob3cpICYmIGF0dHJpYnV0ZXMuc2hvd1swXSA9PT0gMClcbiAgKSB7XG4gICAgcmV0dXJuIEJvdW5kaW5nU3BoZXJlU3RhdGUuRkFJTEVEO1xuICB9XG4gIGF0dHJpYnV0ZXMuYm91bmRpbmdTcGhlcmUuY2xvbmUocmVzdWx0KTtcbiAgcmV0dXJuIEJvdW5kaW5nU3BoZXJlU3RhdGUuRE9ORTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcHJpbWl0aXZlID0gdGhpcy5wcmltaXRpdmU7XG4gIHZhciBvcmRlcmVkR3JvdW5kUHJpbWl0aXZlcyA9IHRoaXMub3JkZXJlZEdyb3VuZFByaW1pdGl2ZXM7XG4gIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkpIHtcbiAgICBvcmRlcmVkR3JvdW5kUHJpbWl0aXZlcy5yZW1vdmUocHJpbWl0aXZlKTtcbiAgfVxuICB2YXIgb2xkUHJpbWl0aXZlID0gdGhpcy5vbGRQcmltaXRpdmU7XG4gIGlmIChkZWZpbmVkKG9sZFByaW1pdGl2ZSkpIHtcbiAgICBvcmRlcmVkR3JvdW5kUHJpbWl0aXZlcy5yZW1vdmUob2xkUHJpbWl0aXZlKTtcbiAgfVxuICB0aGlzLnJlbW92ZU1hdGVyaWFsU3Vic2NyaXB0aW9uKCk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIFN0YXRpY0dyb3VuZFBvbHlsaW5lUGVyTWF0ZXJpYWxCYXRjaChcbiAgb3JkZXJlZEdyb3VuZFByaW1pdGl2ZXMsXG4gIGNsYXNzaWZpY2F0aW9uVHlwZSxcbiAgYXN5bmNocm9ub3VzXG4pIHtcbiAgdGhpcy5faXRlbXMgPSBbXTtcbiAgdGhpcy5fb3JkZXJlZEdyb3VuZFByaW1pdGl2ZXMgPSBvcmRlcmVkR3JvdW5kUHJpbWl0aXZlcztcbiAgdGhpcy5fY2xhc3NpZmljYXRpb25UeXBlID0gY2xhc3NpZmljYXRpb25UeXBlO1xuICB0aGlzLl9hc3luY2hyb25vdXMgPSBkZWZhdWx0VmFsdWUoYXN5bmNocm9ub3VzLCB0cnVlKTtcbn1cblxuU3RhdGljR3JvdW5kUG9seWxpbmVQZXJNYXRlcmlhbEJhdGNoLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGltZSwgdXBkYXRlcikge1xuICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgdmFyIGdlb21ldHJ5SW5zdGFuY2UgPSB1cGRhdGVyLmNyZWF0ZUZpbGxHZW9tZXRyeUluc3RhbmNlKHRpbWUpO1xuICB2YXIgekluZGV4ID0gUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQodXBkYXRlci56SW5kZXgsIDApO1xuICAvLyBDaGVjayBpZiB0aGUgRW50aXR5IHJlcHJlc2VudGVkIGJ5IHRoZSB1cGRhdGVyIGhhcyB0aGUgc2FtZSBtYXRlcmlhbCBvciBhIG1hdGVyaWFsIHJlcHJlc2VudGFibGUgd2l0aCBwZXItaW5zdGFuY2UgY29sb3IuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLmlzTWF0ZXJpYWwodXBkYXRlcikgJiYgaXRlbS56SW5kZXggPT09IHpJbmRleCkge1xuICAgICAgaXRlbS5hZGQodGltZSwgdXBkYXRlciwgZ2VvbWV0cnlJbnN0YW5jZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIC8vIElmIGEgY29tcGF0aWJsZSBiYXRjaCB3YXNuJ3QgZm91bmQsIGNyZWF0ZSBhIG5ldyBiYXRjaC5cbiAgdmFyIGJhdGNoID0gbmV3IEJhdGNoKFxuICAgIHRoaXMuX29yZGVyZWRHcm91bmRQcmltaXRpdmVzLFxuICAgIHRoaXMuX2NsYXNzaWZpY2F0aW9uVHlwZSxcbiAgICB1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5LFxuICAgIHpJbmRleCxcbiAgICB0aGlzLl9hc3luY2hyb25vdXNcbiAgKTtcbiAgYmF0Y2guYWRkKHRpbWUsIHVwZGF0ZXIsIGdlb21ldHJ5SW5zdGFuY2UpO1xuICBpdGVtcy5wdXNoKGJhdGNoKTtcbn07XG5cblN0YXRpY0dyb3VuZFBvbHlsaW5lUGVyTWF0ZXJpYWxCYXRjaC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHVwZGF0ZXIpIHtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSBsZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgaWYgKGl0ZW0ucmVtb3ZlKHVwZGF0ZXIpKSB7XG4gICAgICBpZiAoaXRlbS51cGRhdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaXRlbXMuc3BsaWNlKGksIDEpO1xuICAgICAgICBpdGVtLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufTtcblxuU3RhdGljR3JvdW5kUG9seWxpbmVQZXJNYXRlcmlhbEJhdGNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodGltZSkge1xuICB2YXIgaTtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG5cbiAgZm9yIChpID0gbGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLmludmFsaWRhdGVkKSB7XG4gICAgICBpdGVtcy5zcGxpY2UoaSwgMSk7XG4gICAgICB2YXIgdXBkYXRlcnMgPSBpdGVtLnVwZGF0ZXJzLnZhbHVlcztcbiAgICAgIHZhciB1cGRhdGVyc0xlbmd0aCA9IHVwZGF0ZXJzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGggPSAwOyBoIDwgdXBkYXRlcnNMZW5ndGg7IGgrKykge1xuICAgICAgICB0aGlzLmFkZCh0aW1lLCB1cGRhdGVyc1toXSk7XG4gICAgICB9XG4gICAgICBpdGVtLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cblxuICB2YXIgaXNVcGRhdGVkID0gdHJ1ZTtcbiAgZm9yIChpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgaXNVcGRhdGVkID0gaXRlbXNbaV0udXBkYXRlKHRpbWUpICYmIGlzVXBkYXRlZDtcbiAgfVxuICByZXR1cm4gaXNVcGRhdGVkO1xufTtcblxuU3RhdGljR3JvdW5kUG9seWxpbmVQZXJNYXRlcmlhbEJhdGNoLnByb3RvdHlwZS5nZXRCb3VuZGluZ1NwaGVyZSA9IGZ1bmN0aW9uIChcbiAgdXBkYXRlcixcbiAgcmVzdWx0XG4pIHtcbiAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XG4gIHZhciBsZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgIGlmIChpdGVtLmNvbnRhaW5zKHVwZGF0ZXIpKSB7XG4gICAgICByZXR1cm4gaXRlbS5nZXRCb3VuZGluZ1NwaGVyZSh1cGRhdGVyLCByZXN1bHQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQ7XG59O1xuXG5TdGF0aWNHcm91bmRQb2x5bGluZVBlck1hdGVyaWFsQmF0Y2gucHJvdG90eXBlLnJlbW92ZUFsbFByaW1pdGl2ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpdGVtcyA9IHRoaXMuX2l0ZW1zO1xuICB2YXIgbGVuZ3RoID0gaXRlbXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbXNbaV0uZGVzdHJveSgpO1xuICB9XG4gIHRoaXMuX2l0ZW1zLmxlbmd0aCA9IDA7XG59O1xuZXhwb3J0IGRlZmF1bHQgU3RhdGljR3JvdW5kUG9seWxpbmVQZXJNYXRlcmlhbEJhdGNoO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///44172\n')},29596:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8629);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(92062);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47861);\n/* harmony import */ var _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24689);\n/* harmony import */ var _Core_OffsetGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82223);\n/* harmony import */ var _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37939);\n/* harmony import */ var _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(64060);\n/* harmony import */ var _Scene_Primitive_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(34380);\n/* harmony import */ var _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69895);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar colorScratch = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar distanceDisplayConditionScratch = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar defaultDistanceDisplayCondition = new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar defaultOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO;\nvar offsetScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction Batch(primitives, translucent, width, shadows) {\n  this.translucent = translucent;\n  this.width = width;\n  this.shadows = shadows;\n  this.primitives = primitives;\n  this.createPrimitive = false;\n  this.waitingOnCreate = false;\n  this.primitive = undefined;\n  this.oldPrimitive = undefined;\n  this.geometry = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.updaters = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.updatersWithAttributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.attributes = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.itemsToRemove = [];\n  this.subscriptions = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this.showsUpdated = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n}\nBatch.prototype.add = function (updater, instance) {\n  var id = updater.id;\n  this.createPrimitive = true;\n  this.geometry.set(id, instance);\n  this.updaters.set(id, updater);\n  if (\n    !updater.hasConstantOutline ||\n    !updater.outlineColorProperty.isConstant ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].isConstant */ .Z.isConstant(updater.distanceDisplayConditionProperty) ||\n    !_Property_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].isConstant */ .Z.isConstant(updater.terrainOffsetProperty)\n  ) {\n    this.updatersWithAttributes.set(id, updater);\n  } else {\n    var that = this;\n    this.subscriptions.set(\n      id,\n      updater.entity.definitionChanged.addEventListener(function (\n        entity,\n        propertyName,\n        newValue,\n        oldValue\n      ) {\n        if (propertyName === "isShowing") {\n          that.showsUpdated.set(updater.id, updater);\n        }\n      })\n    );\n  }\n};\n\nBatch.prototype.remove = function (updater) {\n  var id = updater.id;\n  this.createPrimitive = this.geometry.remove(id) || this.createPrimitive;\n  if (this.updaters.remove(id)) {\n    this.updatersWithAttributes.remove(id);\n    var unsubscribe = this.subscriptions.get(id);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(unsubscribe)) {\n      unsubscribe();\n      this.subscriptions.remove(id);\n      this.showsUpdated.remove(id);\n    }\n    return true;\n  }\n  return false;\n};\n\nBatch.prototype.update = function (time) {\n  var isUpdated = true;\n  var removedCount = 0;\n  var primitive = this.primitive;\n  var primitives = this.primitives;\n  var i;\n\n  if (this.createPrimitive) {\n    var geometries = this.geometry.values;\n    var geometriesLength = geometries.length;\n    if (geometriesLength > 0) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(primitive)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this.oldPrimitive)) {\n          this.oldPrimitive = primitive;\n        } else {\n          primitives.remove(primitive);\n        }\n      }\n\n      primitive = new _Scene_Primitive_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n        show: false,\n        asynchronous: true,\n        geometryInstances: geometries.slice(),\n        appearance: new _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n          flat: true,\n          translucent: this.translucent,\n          renderState: {\n            lineWidth: this.width,\n          },\n        }),\n        shadows: this.shadows,\n      });\n\n      primitives.add(primitive);\n      isUpdated = false;\n    } else {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(primitive)) {\n        primitives.remove(primitive);\n        primitive = undefined;\n      }\n      var oldPrimitive = this.oldPrimitive;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(oldPrimitive)) {\n        primitives.remove(oldPrimitive);\n        this.oldPrimitive = undefined;\n      }\n    }\n\n    this.attributes.removeAll();\n    this.primitive = primitive;\n    this.createPrimitive = false;\n    this.waitingOnCreate = true;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(primitive) && primitive.ready) {\n    primitive.show = true;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this.oldPrimitive)) {\n      primitives.remove(this.oldPrimitive);\n      this.oldPrimitive = undefined;\n    }\n\n    var updatersWithAttributes = this.updatersWithAttributes.values;\n    var length = updatersWithAttributes.length;\n    var waitingOnCreate = this.waitingOnCreate;\n    for (i = 0; i < length; i++) {\n      var updater = updatersWithAttributes[i];\n      var instance = this.geometry.get(updater.id);\n\n      var attributes = this.attributes.get(instance.id.id);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(attributes)) {\n        attributes = primitive.getGeometryInstanceAttributes(instance.id);\n        this.attributes.set(instance.id.id, attributes);\n      }\n\n      if (!updater.outlineColorProperty.isConstant || waitingOnCreate) {\n        var outlineColorProperty = updater.outlineColorProperty;\n        var outlineColor = _Property_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          outlineColorProperty,\n          time,\n          _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WHITE */ .Z.WHITE,\n          colorScratch\n        );\n        if (!_Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(attributes._lastColor, outlineColor)) {\n          attributes._lastColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n            outlineColor,\n            attributes._lastColor\n          );\n          attributes.color = _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].toValue */ .Z.toValue(\n            outlineColor,\n            attributes.color\n          );\n          if (\n            (this.translucent && attributes.color[3] === 255) ||\n            (!this.translucent && attributes.color[3] !== 255)\n          ) {\n            this.itemsToRemove[removedCount++] = updater;\n          }\n        }\n      }\n\n      var show =\n        updater.entity.isShowing &&\n        (updater.hasConstantOutline || updater.isOutlineVisible(time));\n      var currentShow = attributes.show[0] === 1;\n      if (show !== currentShow) {\n        attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].toValue */ .Z.toValue(\n          show,\n          attributes.show\n        );\n      }\n\n      var distanceDisplayConditionProperty =\n        updater.distanceDisplayConditionProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].isConstant */ .Z.isConstant(distanceDisplayConditionProperty)) {\n        var distanceDisplayCondition = _Property_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          distanceDisplayConditionProperty,\n          time,\n          defaultDistanceDisplayCondition,\n          distanceDisplayConditionScratch\n        );\n        if (\n          !_Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          )\n        ) {\n          attributes._lastDistanceDisplayCondition = _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].clone */ .Z.clone(\n            distanceDisplayCondition,\n            attributes._lastDistanceDisplayCondition\n          );\n          attributes.distanceDisplayCondition = _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].toValue */ .Z.toValue(\n            distanceDisplayCondition,\n            attributes.distanceDisplayCondition\n          );\n        }\n      }\n\n      var offsetProperty = updater.terrainOffsetProperty;\n      if (!_Property_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].isConstant */ .Z.isConstant(offsetProperty)) {\n        var offset = _Property_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n          offsetProperty,\n          time,\n          defaultOffset,\n          offsetScratch\n        );\n        if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(offset, attributes._lastOffset)) {\n          attributes._lastOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n            offset,\n            attributes._lastOffset\n          );\n          attributes.offset = _Core_OffsetGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toValue */ .Z.toValue(\n            offset,\n            attributes.offset\n          );\n        }\n      }\n    }\n\n    this.updateShows(primitive);\n    this.waitingOnCreate = false;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(primitive) && !primitive.ready) {\n    isUpdated = false;\n  }\n\n  this.itemsToRemove.length = removedCount;\n  return isUpdated;\n};\n\nBatch.prototype.updateShows = function (primitive) {\n  var showsUpdated = this.showsUpdated.values;\n  var length = showsUpdated.length;\n  for (var i = 0; i < length; i++) {\n    var updater = showsUpdated[i];\n    var instance = this.geometry.get(updater.id);\n\n    var attributes = this.attributes.get(instance.id.id);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(attributes)) {\n      attributes = primitive.getGeometryInstanceAttributes(instance.id);\n      this.attributes.set(instance.id.id, attributes);\n    }\n\n    var show = updater.entity.isShowing;\n    var currentShow = attributes.show[0] === 1;\n    if (show !== currentShow) {\n      attributes.show = _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].toValue */ .Z.toValue(\n        show,\n        attributes.show\n      );\n      instance.attributes.show.value[0] = attributes.show[0];\n    }\n  }\n  this.showsUpdated.removeAll();\n};\n\nBatch.prototype.contains = function (updater) {\n  return this.updaters.contains(updater.id);\n};\n\nBatch.prototype.getBoundingSphere = function (updater, result) {\n  var primitive = this.primitive;\n  if (!primitive.ready) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].PENDING */ .Z.PENDING;\n  }\n  var attributes = primitive.getGeometryInstanceAttributes(updater.entity);\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(attributes) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(attributes.boundingSphere) || //\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(attributes.show) && attributes.show[0] === 0)\n  ) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].FAILED */ .Z.FAILED;\n  }\n  attributes.boundingSphere.clone(result);\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].DONE */ .Z.DONE;\n};\n\nBatch.prototype.removeAllPrimitives = function () {\n  var primitives = this.primitives;\n\n  var primitive = this.primitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(primitive)) {\n    primitives.remove(primitive);\n    this.primitive = undefined;\n    this.geometry.removeAll();\n    this.updaters.removeAll();\n  }\n\n  var oldPrimitive = this.oldPrimitive;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(oldPrimitive)) {\n    primitives.remove(oldPrimitive);\n    this.oldPrimitive = undefined;\n  }\n};\n\n/**\n * @private\n */\nfunction StaticOutlineGeometryBatch(primitives, scene, shadows) {\n  this._primitives = primitives;\n  this._scene = scene;\n  this._shadows = shadows;\n  this._solidBatches = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._translucentBatches = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n}\nStaticOutlineGeometryBatch.prototype.add = function (time, updater) {\n  var instance = updater.createOutlineGeometryInstance(time);\n  var width = this._scene.clampLineWidth(updater.outlineWidth);\n  var batches;\n  var batch;\n  if (instance.attributes.color.value[3] === 255) {\n    batches = this._solidBatches;\n    batch = batches.get(width);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(batch)) {\n      batch = new Batch(this._primitives, false, width, this._shadows);\n      batches.set(width, batch);\n    }\n    batch.add(updater, instance);\n  } else {\n    batches = this._translucentBatches;\n    batch = batches.get(width);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(batch)) {\n      batch = new Batch(this._primitives, true, width, this._shadows);\n      batches.set(width, batch);\n    }\n    batch.add(updater, instance);\n  }\n};\n\nStaticOutlineGeometryBatch.prototype.remove = function (updater) {\n  var i;\n\n  var solidBatches = this._solidBatches.values;\n  var solidBatchesLength = solidBatches.length;\n  for (i = 0; i < solidBatchesLength; i++) {\n    if (solidBatches[i].remove(updater)) {\n      return;\n    }\n  }\n\n  var translucentBatches = this._translucentBatches.values;\n  var translucentBatchesLength = translucentBatches.length;\n  for (i = 0; i < translucentBatchesLength; i++) {\n    if (translucentBatches[i].remove(updater)) {\n      return;\n    }\n  }\n};\n\nStaticOutlineGeometryBatch.prototype.update = function (time) {\n  var i;\n  var x;\n  var updater;\n  var batch;\n  var solidBatches = this._solidBatches.values;\n  var solidBatchesLength = solidBatches.length;\n  var translucentBatches = this._translucentBatches.values;\n  var translucentBatchesLength = translucentBatches.length;\n  var itemsToRemove;\n  var isUpdated = true;\n  var needUpdate = false;\n\n  do {\n    needUpdate = false;\n    for (x = 0; x < solidBatchesLength; x++) {\n      batch = solidBatches[x];\n      //Perform initial update\n      isUpdated = batch.update(time);\n\n      //If any items swapped between solid/translucent, we need to\n      //move them between batches\n      itemsToRemove = batch.itemsToRemove;\n      var solidsToMoveLength = itemsToRemove.length;\n      if (solidsToMoveLength > 0) {\n        needUpdate = true;\n        for (i = 0; i < solidsToMoveLength; i++) {\n          updater = itemsToRemove[i];\n          batch.remove(updater);\n          this.add(time, updater);\n        }\n      }\n    }\n    for (x = 0; x < translucentBatchesLength; x++) {\n      batch = translucentBatches[x];\n      //Perform initial update\n      isUpdated = batch.update(time);\n\n      //If any items swapped between solid/translucent, we need to\n      //move them between batches\n      itemsToRemove = batch.itemsToRemove;\n      var translucentToMoveLength = itemsToRemove.length;\n      if (translucentToMoveLength > 0) {\n        needUpdate = true;\n        for (i = 0; i < translucentToMoveLength; i++) {\n          updater = itemsToRemove[i];\n          batch.remove(updater);\n          this.add(time, updater);\n        }\n      }\n    }\n  } while (needUpdate);\n\n  return isUpdated;\n};\n\nStaticOutlineGeometryBatch.prototype.getBoundingSphere = function (\n  updater,\n  result\n) {\n  var i;\n\n  var solidBatches = this._solidBatches.values;\n  var solidBatchesLength = solidBatches.length;\n  for (i = 0; i < solidBatchesLength; i++) {\n    var solidBatch = solidBatches[i];\n    if (solidBatch.contains(updater)) {\n      return solidBatch.getBoundingSphere(updater, result);\n    }\n  }\n\n  var translucentBatches = this._translucentBatches.values;\n  var translucentBatchesLength = translucentBatches.length;\n  for (i = 0; i < translucentBatchesLength; i++) {\n    var translucentBatch = translucentBatches[i];\n    if (translucentBatch.contains(updater)) {\n      return translucentBatch.getBoundingSphere(updater, result);\n    }\n  }\n\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].FAILED */ .Z.FAILED;\n};\n\nStaticOutlineGeometryBatch.prototype.removeAllPrimitives = function () {\n  var i;\n\n  var solidBatches = this._solidBatches.values;\n  var solidBatchesLength = solidBatches.length;\n  for (i = 0; i < solidBatchesLength; i++) {\n    solidBatches[i].removeAllPrimitives();\n  }\n\n  var translucentBatches = this._translucentBatches.values;\n  var translucentBatchesLength = translucentBatches.length;\n  for (i = 0; i < translucentBatchesLength; i++) {\n    translucentBatches[i].removeAllPrimitives();\n  }\n};\n/* harmony default export */ __webpack_exports__["Z"] = (StaticOutlineGeometryBatch);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN4QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNkJBQTZCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLHdCQUF3QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLDhCQUE4QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVMsdUZBQTBCO0FBQ25DOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWMsd0JBQXdCO0FBQ3RDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWMsOEJBQThCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLDBCQUEwQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL1N0YXRpY091dGxpbmVHZW9tZXRyeUJhdGNoLmpzPzg4MGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFzc29jaWF0aXZlQXJyYXkgZnJvbSBcIi4uL0NvcmUvQXNzb2NpYXRpdmVBcnJheS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0NvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiBmcm9tIFwiLi4vQ29yZS9EaXN0YW5jZURpc3BsYXlDb25kaXRpb24uanNcIjtcbmltcG9ydCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBPZmZzZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL09mZnNldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBTaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9TaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlIGZyb20gXCIuLi9TY2VuZS9QZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZS5qc1wiO1xuaW1wb3J0IFByaW1pdGl2ZSBmcm9tIFwiLi4vU2NlbmUvUHJpbWl0aXZlLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmVTdGF0ZSBmcm9tIFwiLi9Cb3VuZGluZ1NwaGVyZVN0YXRlLmpzXCI7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSBcIi4vUHJvcGVydHkuanNcIjtcblxudmFyIGNvbG9yU2NyYXRjaCA9IG5ldyBDb2xvcigpO1xudmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblNjcmF0Y2ggPSBuZXcgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKCk7XG52YXIgZGVmYXVsdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IG5ldyBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24oKTtcbnZhciBkZWZhdWx0T2Zmc2V0ID0gQ2FydGVzaWFuMy5aRVJPO1xudmFyIG9mZnNldFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xuXG5mdW5jdGlvbiBCYXRjaChwcmltaXRpdmVzLCB0cmFuc2x1Y2VudCwgd2lkdGgsIHNoYWRvd3MpIHtcbiAgdGhpcy50cmFuc2x1Y2VudCA9IHRyYW5zbHVjZW50O1xuICB0aGlzLndpZHRoID0gd2lkdGg7XG4gIHRoaXMuc2hhZG93cyA9IHNoYWRvd3M7XG4gIHRoaXMucHJpbWl0aXZlcyA9IHByaW1pdGl2ZXM7XG4gIHRoaXMuY3JlYXRlUHJpbWl0aXZlID0gZmFsc2U7XG4gIHRoaXMud2FpdGluZ09uQ3JlYXRlID0gZmFsc2U7XG4gIHRoaXMucHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5nZW9tZXRyeSA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMudXBkYXRlcnMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLnVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLmF0dHJpYnV0ZXMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLml0ZW1zVG9SZW1vdmUgPSBbXTtcbiAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcbiAgdGhpcy5zaG93c1VwZGF0ZWQgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xufVxuQmF0Y2gucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh1cGRhdGVyLCBpbnN0YW5jZSkge1xuICB2YXIgaWQgPSB1cGRhdGVyLmlkO1xuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IHRydWU7XG4gIHRoaXMuZ2VvbWV0cnkuc2V0KGlkLCBpbnN0YW5jZSk7XG4gIHRoaXMudXBkYXRlcnMuc2V0KGlkLCB1cGRhdGVyKTtcbiAgaWYgKFxuICAgICF1cGRhdGVyLmhhc0NvbnN0YW50T3V0bGluZSB8fFxuICAgICF1cGRhdGVyLm91dGxpbmVDb2xvclByb3BlcnR5LmlzQ29uc3RhbnQgfHxcbiAgICAhUHJvcGVydHkuaXNDb25zdGFudCh1cGRhdGVyLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5KSB8fFxuICAgICFQcm9wZXJ0eS5pc0NvbnN0YW50KHVwZGF0ZXIudGVycmFpbk9mZnNldFByb3BlcnR5KVxuICApIHtcbiAgICB0aGlzLnVwZGF0ZXJzV2l0aEF0dHJpYnV0ZXMuc2V0KGlkLCB1cGRhdGVyKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnNldChcbiAgICAgIGlkLFxuICAgICAgdXBkYXRlci5lbnRpdHkuZGVmaW5pdGlvbkNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihmdW5jdGlvbiAoXG4gICAgICAgIGVudGl0eSxcbiAgICAgICAgcHJvcGVydHlOYW1lLFxuICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgb2xkVmFsdWVcbiAgICAgICkge1xuICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSBcImlzU2hvd2luZ1wiKSB7XG4gICAgICAgICAgdGhhdC5zaG93c1VwZGF0ZWQuc2V0KHVwZGF0ZXIuaWQsIHVwZGF0ZXIpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cbn07XG5cbkJhdGNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICB2YXIgaWQgPSB1cGRhdGVyLmlkO1xuICB0aGlzLmNyZWF0ZVByaW1pdGl2ZSA9IHRoaXMuZ2VvbWV0cnkucmVtb3ZlKGlkKSB8fCB0aGlzLmNyZWF0ZVByaW1pdGl2ZTtcbiAgaWYgKHRoaXMudXBkYXRlcnMucmVtb3ZlKGlkKSkge1xuICAgIHRoaXMudXBkYXRlcnNXaXRoQXR0cmlidXRlcy5yZW1vdmUoaWQpO1xuICAgIHZhciB1bnN1YnNjcmliZSA9IHRoaXMuc3Vic2NyaXB0aW9ucy5nZXQoaWQpO1xuICAgIGlmIChkZWZpbmVkKHVuc3Vic2NyaWJlKSkge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5yZW1vdmUoaWQpO1xuICAgICAgdGhpcy5zaG93c1VwZGF0ZWQucmVtb3ZlKGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBpc1VwZGF0ZWQgPSB0cnVlO1xuICB2YXIgcmVtb3ZlZENvdW50ID0gMDtcbiAgdmFyIHByaW1pdGl2ZSA9IHRoaXMucHJpbWl0aXZlO1xuICB2YXIgcHJpbWl0aXZlcyA9IHRoaXMucHJpbWl0aXZlcztcbiAgdmFyIGk7XG5cbiAgaWYgKHRoaXMuY3JlYXRlUHJpbWl0aXZlKSB7XG4gICAgdmFyIGdlb21ldHJpZXMgPSB0aGlzLmdlb21ldHJ5LnZhbHVlcztcbiAgICB2YXIgZ2VvbWV0cmllc0xlbmd0aCA9IGdlb21ldHJpZXMubGVuZ3RoO1xuICAgIGlmIChnZW9tZXRyaWVzTGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgICAgICBpZiAoIWRlZmluZWQodGhpcy5vbGRQcmltaXRpdmUpKSB7XG4gICAgICAgICAgdGhpcy5vbGRQcmltaXRpdmUgPSBwcmltaXRpdmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJpbWl0aXZlcy5yZW1vdmUocHJpbWl0aXZlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcmltaXRpdmUgPSBuZXcgUHJpbWl0aXZlKHtcbiAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgIGFzeW5jaHJvbm91czogdHJ1ZSxcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGdlb21ldHJpZXMuc2xpY2UoKSxcbiAgICAgICAgYXBwZWFyYW5jZTogbmV3IFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlKHtcbiAgICAgICAgICBmbGF0OiB0cnVlLFxuICAgICAgICAgIHRyYW5zbHVjZW50OiB0aGlzLnRyYW5zbHVjZW50LFxuICAgICAgICAgIHJlbmRlclN0YXRlOiB7XG4gICAgICAgICAgICBsaW5lV2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHNoYWRvd3M6IHRoaXMuc2hhZG93cyxcbiAgICAgIH0pO1xuXG4gICAgICBwcmltaXRpdmVzLmFkZChwcmltaXRpdmUpO1xuICAgICAgaXNVcGRhdGVkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkpIHtcbiAgICAgICAgcHJpbWl0aXZlcy5yZW1vdmUocHJpbWl0aXZlKTtcbiAgICAgICAgcHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIG9sZFByaW1pdGl2ZSA9IHRoaXMub2xkUHJpbWl0aXZlO1xuICAgICAgaWYgKGRlZmluZWQob2xkUHJpbWl0aXZlKSkge1xuICAgICAgICBwcmltaXRpdmVzLnJlbW92ZShvbGRQcmltaXRpdmUpO1xuICAgICAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmF0dHJpYnV0ZXMucmVtb3ZlQWxsKCk7XG4gICAgdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7XG4gICAgdGhpcy5jcmVhdGVQcmltaXRpdmUgPSBmYWxzZTtcbiAgICB0aGlzLndhaXRpbmdPbkNyZWF0ZSA9IHRydWU7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChwcmltaXRpdmUpICYmIHByaW1pdGl2ZS5yZWFkeSkge1xuICAgIHByaW1pdGl2ZS5zaG93ID0gdHJ1ZTtcbiAgICBpZiAoZGVmaW5lZCh0aGlzLm9sZFByaW1pdGl2ZSkpIHtcbiAgICAgIHByaW1pdGl2ZXMucmVtb3ZlKHRoaXMub2xkUHJpbWl0aXZlKTtcbiAgICAgIHRoaXMub2xkUHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciB1cGRhdGVyc1dpdGhBdHRyaWJ1dGVzID0gdGhpcy51cGRhdGVyc1dpdGhBdHRyaWJ1dGVzLnZhbHVlcztcbiAgICB2YXIgbGVuZ3RoID0gdXBkYXRlcnNXaXRoQXR0cmlidXRlcy5sZW5ndGg7XG4gICAgdmFyIHdhaXRpbmdPbkNyZWF0ZSA9IHRoaXMud2FpdGluZ09uQ3JlYXRlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHVwZGF0ZXIgPSB1cGRhdGVyc1dpdGhBdHRyaWJ1dGVzW2ldO1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZW9tZXRyeS5nZXQodXBkYXRlci5pZCk7XG5cbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzLmdldChpbnN0YW5jZS5pZC5pZCk7XG4gICAgICBpZiAoIWRlZmluZWQoYXR0cmlidXRlcykpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5nZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyhpbnN0YW5jZS5pZCk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy5zZXQoaW5zdGFuY2UuaWQuaWQsIGF0dHJpYnV0ZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXVwZGF0ZXIub3V0bGluZUNvbG9yUHJvcGVydHkuaXNDb25zdGFudCB8fCB3YWl0aW5nT25DcmVhdGUpIHtcbiAgICAgICAgdmFyIG91dGxpbmVDb2xvclByb3BlcnR5ID0gdXBkYXRlci5vdXRsaW5lQ29sb3JQcm9wZXJ0eTtcbiAgICAgICAgdmFyIG91dGxpbmVDb2xvciA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgICAgICAgIG91dGxpbmVDb2xvclByb3BlcnR5LFxuICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgQ29sb3IuV0hJVEUsXG4gICAgICAgICAgY29sb3JTY3JhdGNoXG4gICAgICAgICk7XG4gICAgICAgIGlmICghQ29sb3IuZXF1YWxzKGF0dHJpYnV0ZXMuX2xhc3RDb2xvciwgb3V0bGluZUNvbG9yKSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3RDb2xvciA9IENvbG9yLmNsb25lKFxuICAgICAgICAgICAgb3V0bGluZUNvbG9yLFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdENvbG9yXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhdHRyaWJ1dGVzLmNvbG9yID0gQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgICAgICBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmNvbG9yXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAodGhpcy50cmFuc2x1Y2VudCAmJiBhdHRyaWJ1dGVzLmNvbG9yWzNdID09PSAyNTUpIHx8XG4gICAgICAgICAgICAoIXRoaXMudHJhbnNsdWNlbnQgJiYgYXR0cmlidXRlcy5jb2xvclszXSAhPT0gMjU1KVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1RvUmVtb3ZlW3JlbW92ZWRDb3VudCsrXSA9IHVwZGF0ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93ID1cbiAgICAgICAgdXBkYXRlci5lbnRpdHkuaXNTaG93aW5nICYmXG4gICAgICAgICh1cGRhdGVyLmhhc0NvbnN0YW50T3V0bGluZSB8fCB1cGRhdGVyLmlzT3V0bGluZVZpc2libGUodGltZSkpO1xuICAgICAgdmFyIGN1cnJlbnRTaG93ID0gYXR0cmlidXRlcy5zaG93WzBdID09PSAxO1xuICAgICAgaWYgKHNob3cgIT09IGN1cnJlbnRTaG93KSB7XG4gICAgICAgIGF0dHJpYnV0ZXMuc2hvdyA9IFNob3dHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgICAgc2hvdyxcbiAgICAgICAgICBhdHRyaWJ1dGVzLnNob3dcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5ID1cbiAgICAgICAgdXBkYXRlci5kaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eTtcbiAgICAgIGlmICghUHJvcGVydHkuaXNDb25zdGFudChkaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eSkpIHtcbiAgICAgICAgdmFyIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5LFxuICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgZGVmYXVsdERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbixcbiAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb25TY3JhdGNoXG4gICAgICAgICk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLmVxdWFscyhcbiAgICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3REaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3REaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBEaXN0YW5jZURpc3BsYXlDb25kaXRpb24uY2xvbmUoXG4gICAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLl9sYXN0RGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhdHRyaWJ1dGVzLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShcbiAgICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgb2Zmc2V0UHJvcGVydHkgPSB1cGRhdGVyLnRlcnJhaW5PZmZzZXRQcm9wZXJ0eTtcbiAgICAgIGlmICghUHJvcGVydHkuaXNDb25zdGFudChvZmZzZXRQcm9wZXJ0eSkpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgICAgICAgIG9mZnNldFByb3BlcnR5LFxuICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgZGVmYXVsdE9mZnNldCxcbiAgICAgICAgICBvZmZzZXRTY3JhdGNoXG4gICAgICAgICk7XG4gICAgICAgIGlmICghQ2FydGVzaWFuMy5lcXVhbHMob2Zmc2V0LCBhdHRyaWJ1dGVzLl9sYXN0T2Zmc2V0KSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXMuX2xhc3RPZmZzZXQgPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgYXR0cmlidXRlcy5fbGFzdE9mZnNldFxuICAgICAgICAgICk7XG4gICAgICAgICAgYXR0cmlidXRlcy5vZmZzZXQgPSBPZmZzZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLm9mZnNldFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVNob3dzKHByaW1pdGl2ZSk7XG4gICAgdGhpcy53YWl0aW5nT25DcmVhdGUgPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChkZWZpbmVkKHByaW1pdGl2ZSkgJiYgIXByaW1pdGl2ZS5yZWFkeSkge1xuICAgIGlzVXBkYXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgdGhpcy5pdGVtc1RvUmVtb3ZlLmxlbmd0aCA9IHJlbW92ZWRDb3VudDtcbiAgcmV0dXJuIGlzVXBkYXRlZDtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS51cGRhdGVTaG93cyA9IGZ1bmN0aW9uIChwcmltaXRpdmUpIHtcbiAgdmFyIHNob3dzVXBkYXRlZCA9IHRoaXMuc2hvd3NVcGRhdGVkLnZhbHVlcztcbiAgdmFyIGxlbmd0aCA9IHNob3dzVXBkYXRlZC5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdXBkYXRlciA9IHNob3dzVXBkYXRlZFtpXTtcbiAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdlb21ldHJ5LmdldCh1cGRhdGVyLmlkKTtcblxuICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzLmdldChpbnN0YW5jZS5pZC5pZCk7XG4gICAgaWYgKCFkZWZpbmVkKGF0dHJpYnV0ZXMpKSB7XG4gICAgICBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKGluc3RhbmNlLmlkKTtcbiAgICAgIHRoaXMuYXR0cmlidXRlcy5zZXQoaW5zdGFuY2UuaWQuaWQsIGF0dHJpYnV0ZXMpO1xuICAgIH1cblxuICAgIHZhciBzaG93ID0gdXBkYXRlci5lbnRpdHkuaXNTaG93aW5nO1xuICAgIHZhciBjdXJyZW50U2hvdyA9IGF0dHJpYnV0ZXMuc2hvd1swXSA9PT0gMTtcbiAgICBpZiAoc2hvdyAhPT0gY3VycmVudFNob3cpIHtcbiAgICAgIGF0dHJpYnV0ZXMuc2hvdyA9IFNob3dHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLnRvVmFsdWUoXG4gICAgICAgIHNob3csXG4gICAgICAgIGF0dHJpYnV0ZXMuc2hvd1xuICAgICAgKTtcbiAgICAgIGluc3RhbmNlLmF0dHJpYnV0ZXMuc2hvdy52YWx1ZVswXSA9IGF0dHJpYnV0ZXMuc2hvd1swXTtcbiAgICB9XG4gIH1cbiAgdGhpcy5zaG93c1VwZGF0ZWQucmVtb3ZlQWxsKCk7XG59O1xuXG5CYXRjaC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICByZXR1cm4gdGhpcy51cGRhdGVycy5jb250YWlucyh1cGRhdGVyLmlkKTtcbn07XG5cbkJhdGNoLnByb3RvdHlwZS5nZXRCb3VuZGluZ1NwaGVyZSA9IGZ1bmN0aW9uICh1cGRhdGVyLCByZXN1bHQpIHtcbiAgdmFyIHByaW1pdGl2ZSA9IHRoaXMucHJpbWl0aXZlO1xuICBpZiAoIXByaW1pdGl2ZS5yZWFkeSkge1xuICAgIHJldHVybiBCb3VuZGluZ1NwaGVyZVN0YXRlLlBFTkRJTkc7XG4gIH1cbiAgdmFyIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXModXBkYXRlci5lbnRpdHkpO1xuICBpZiAoXG4gICAgIWRlZmluZWQoYXR0cmlidXRlcykgfHxcbiAgICAhZGVmaW5lZChhdHRyaWJ1dGVzLmJvdW5kaW5nU3BoZXJlKSB8fCAvL1xuICAgIChkZWZpbmVkKGF0dHJpYnV0ZXMuc2hvdykgJiYgYXR0cmlidXRlcy5zaG93WzBdID09PSAwKVxuICApIHtcbiAgICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQ7XG4gIH1cbiAgYXR0cmlidXRlcy5ib3VuZGluZ1NwaGVyZS5jbG9uZShyZXN1bHQpO1xuICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5ET05FO1xufTtcblxuQmF0Y2gucHJvdG90eXBlLnJlbW92ZUFsbFByaW1pdGl2ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwcmltaXRpdmVzID0gdGhpcy5wcmltaXRpdmVzO1xuXG4gIHZhciBwcmltaXRpdmUgPSB0aGlzLnByaW1pdGl2ZTtcbiAgaWYgKGRlZmluZWQocHJpbWl0aXZlKSkge1xuICAgIHByaW1pdGl2ZXMucmVtb3ZlKHByaW1pdGl2ZSk7XG4gICAgdGhpcy5wcmltaXRpdmUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5nZW9tZXRyeS5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnVwZGF0ZXJzLnJlbW92ZUFsbCgpO1xuICB9XG5cbiAgdmFyIG9sZFByaW1pdGl2ZSA9IHRoaXMub2xkUHJpbWl0aXZlO1xuICBpZiAoZGVmaW5lZChvbGRQcmltaXRpdmUpKSB7XG4gICAgcHJpbWl0aXZlcy5yZW1vdmUob2xkUHJpbWl0aXZlKTtcbiAgICB0aGlzLm9sZFByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBTdGF0aWNPdXRsaW5lR2VvbWV0cnlCYXRjaChwcmltaXRpdmVzLCBzY2VuZSwgc2hhZG93cykge1xuICB0aGlzLl9wcmltaXRpdmVzID0gcHJpbWl0aXZlcztcbiAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgdGhpcy5fc2hhZG93cyA9IHNoYWRvd3M7XG4gIHRoaXMuX3NvbGlkQmF0Y2hlcyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMuX3RyYW5zbHVjZW50QmF0Y2hlcyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG59XG5TdGF0aWNPdXRsaW5lR2VvbWV0cnlCYXRjaC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRpbWUsIHVwZGF0ZXIpIHtcbiAgdmFyIGluc3RhbmNlID0gdXBkYXRlci5jcmVhdGVPdXRsaW5lR2VvbWV0cnlJbnN0YW5jZSh0aW1lKTtcbiAgdmFyIHdpZHRoID0gdGhpcy5fc2NlbmUuY2xhbXBMaW5lV2lkdGgodXBkYXRlci5vdXRsaW5lV2lkdGgpO1xuICB2YXIgYmF0Y2hlcztcbiAgdmFyIGJhdGNoO1xuICBpZiAoaW5zdGFuY2UuYXR0cmlidXRlcy5jb2xvci52YWx1ZVszXSA9PT0gMjU1KSB7XG4gICAgYmF0Y2hlcyA9IHRoaXMuX3NvbGlkQmF0Y2hlcztcbiAgICBiYXRjaCA9IGJhdGNoZXMuZ2V0KHdpZHRoKTtcbiAgICBpZiAoIWRlZmluZWQoYmF0Y2gpKSB7XG4gICAgICBiYXRjaCA9IG5ldyBCYXRjaCh0aGlzLl9wcmltaXRpdmVzLCBmYWxzZSwgd2lkdGgsIHRoaXMuX3NoYWRvd3MpO1xuICAgICAgYmF0Y2hlcy5zZXQod2lkdGgsIGJhdGNoKTtcbiAgICB9XG4gICAgYmF0Y2guYWRkKHVwZGF0ZXIsIGluc3RhbmNlKTtcbiAgfSBlbHNlIHtcbiAgICBiYXRjaGVzID0gdGhpcy5fdHJhbnNsdWNlbnRCYXRjaGVzO1xuICAgIGJhdGNoID0gYmF0Y2hlcy5nZXQod2lkdGgpO1xuICAgIGlmICghZGVmaW5lZChiYXRjaCkpIHtcbiAgICAgIGJhdGNoID0gbmV3IEJhdGNoKHRoaXMuX3ByaW1pdGl2ZXMsIHRydWUsIHdpZHRoLCB0aGlzLl9zaGFkb3dzKTtcbiAgICAgIGJhdGNoZXMuc2V0KHdpZHRoLCBiYXRjaCk7XG4gICAgfVxuICAgIGJhdGNoLmFkZCh1cGRhdGVyLCBpbnN0YW5jZSk7XG4gIH1cbn07XG5cblN0YXRpY091dGxpbmVHZW9tZXRyeUJhdGNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodXBkYXRlcikge1xuICB2YXIgaTtcblxuICB2YXIgc29saWRCYXRjaGVzID0gdGhpcy5fc29saWRCYXRjaGVzLnZhbHVlcztcbiAgdmFyIHNvbGlkQmF0Y2hlc0xlbmd0aCA9IHNvbGlkQmF0Y2hlcy5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBzb2xpZEJhdGNoZXNMZW5ndGg7IGkrKykge1xuICAgIGlmIChzb2xpZEJhdGNoZXNbaV0ucmVtb3ZlKHVwZGF0ZXIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgdmFyIHRyYW5zbHVjZW50QmF0Y2hlcyA9IHRoaXMuX3RyYW5zbHVjZW50QmF0Y2hlcy52YWx1ZXM7XG4gIHZhciB0cmFuc2x1Y2VudEJhdGNoZXNMZW5ndGggPSB0cmFuc2x1Y2VudEJhdGNoZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgdHJhbnNsdWNlbnRCYXRjaGVzTGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodHJhbnNsdWNlbnRCYXRjaGVzW2ldLnJlbW92ZSh1cGRhdGVyKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxufTtcblxuU3RhdGljT3V0bGluZUdlb21ldHJ5QmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBpO1xuICB2YXIgeDtcbiAgdmFyIHVwZGF0ZXI7XG4gIHZhciBiYXRjaDtcbiAgdmFyIHNvbGlkQmF0Y2hlcyA9IHRoaXMuX3NvbGlkQmF0Y2hlcy52YWx1ZXM7XG4gIHZhciBzb2xpZEJhdGNoZXNMZW5ndGggPSBzb2xpZEJhdGNoZXMubGVuZ3RoO1xuICB2YXIgdHJhbnNsdWNlbnRCYXRjaGVzID0gdGhpcy5fdHJhbnNsdWNlbnRCYXRjaGVzLnZhbHVlcztcbiAgdmFyIHRyYW5zbHVjZW50QmF0Y2hlc0xlbmd0aCA9IHRyYW5zbHVjZW50QmF0Y2hlcy5sZW5ndGg7XG4gIHZhciBpdGVtc1RvUmVtb3ZlO1xuICB2YXIgaXNVcGRhdGVkID0gdHJ1ZTtcbiAgdmFyIG5lZWRVcGRhdGUgPSBmYWxzZTtcblxuICBkbyB7XG4gICAgbmVlZFVwZGF0ZSA9IGZhbHNlO1xuICAgIGZvciAoeCA9IDA7IHggPCBzb2xpZEJhdGNoZXNMZW5ndGg7IHgrKykge1xuICAgICAgYmF0Y2ggPSBzb2xpZEJhdGNoZXNbeF07XG4gICAgICAvL1BlcmZvcm0gaW5pdGlhbCB1cGRhdGVcbiAgICAgIGlzVXBkYXRlZCA9IGJhdGNoLnVwZGF0ZSh0aW1lKTtcblxuICAgICAgLy9JZiBhbnkgaXRlbXMgc3dhcHBlZCBiZXR3ZWVuIHNvbGlkL3RyYW5zbHVjZW50LCB3ZSBuZWVkIHRvXG4gICAgICAvL21vdmUgdGhlbSBiZXR3ZWVuIGJhdGNoZXNcbiAgICAgIGl0ZW1zVG9SZW1vdmUgPSBiYXRjaC5pdGVtc1RvUmVtb3ZlO1xuICAgICAgdmFyIHNvbGlkc1RvTW92ZUxlbmd0aCA9IGl0ZW1zVG9SZW1vdmUubGVuZ3RoO1xuICAgICAgaWYgKHNvbGlkc1RvTW92ZUxlbmd0aCA+IDApIHtcbiAgICAgICAgbmVlZFVwZGF0ZSA9IHRydWU7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzb2xpZHNUb01vdmVMZW5ndGg7IGkrKykge1xuICAgICAgICAgIHVwZGF0ZXIgPSBpdGVtc1RvUmVtb3ZlW2ldO1xuICAgICAgICAgIGJhdGNoLnJlbW92ZSh1cGRhdGVyKTtcbiAgICAgICAgICB0aGlzLmFkZCh0aW1lLCB1cGRhdGVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHggPSAwOyB4IDwgdHJhbnNsdWNlbnRCYXRjaGVzTGVuZ3RoOyB4KyspIHtcbiAgICAgIGJhdGNoID0gdHJhbnNsdWNlbnRCYXRjaGVzW3hdO1xuICAgICAgLy9QZXJmb3JtIGluaXRpYWwgdXBkYXRlXG4gICAgICBpc1VwZGF0ZWQgPSBiYXRjaC51cGRhdGUodGltZSk7XG5cbiAgICAgIC8vSWYgYW55IGl0ZW1zIHN3YXBwZWQgYmV0d2VlbiBzb2xpZC90cmFuc2x1Y2VudCwgd2UgbmVlZCB0b1xuICAgICAgLy9tb3ZlIHRoZW0gYmV0d2VlbiBiYXRjaGVzXG4gICAgICBpdGVtc1RvUmVtb3ZlID0gYmF0Y2guaXRlbXNUb1JlbW92ZTtcbiAgICAgIHZhciB0cmFuc2x1Y2VudFRvTW92ZUxlbmd0aCA9IGl0ZW1zVG9SZW1vdmUubGVuZ3RoO1xuICAgICAgaWYgKHRyYW5zbHVjZW50VG9Nb3ZlTGVuZ3RoID4gMCkge1xuICAgICAgICBuZWVkVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRyYW5zbHVjZW50VG9Nb3ZlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB1cGRhdGVyID0gaXRlbXNUb1JlbW92ZVtpXTtcbiAgICAgICAgICBiYXRjaC5yZW1vdmUodXBkYXRlcik7XG4gICAgICAgICAgdGhpcy5hZGQodGltZSwgdXBkYXRlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gd2hpbGUgKG5lZWRVcGRhdGUpO1xuXG4gIHJldHVybiBpc1VwZGF0ZWQ7XG59O1xuXG5TdGF0aWNPdXRsaW5lR2VvbWV0cnlCYXRjaC5wcm90b3R5cGUuZ2V0Qm91bmRpbmdTcGhlcmUgPSBmdW5jdGlvbiAoXG4gIHVwZGF0ZXIsXG4gIHJlc3VsdFxuKSB7XG4gIHZhciBpO1xuXG4gIHZhciBzb2xpZEJhdGNoZXMgPSB0aGlzLl9zb2xpZEJhdGNoZXMudmFsdWVzO1xuICB2YXIgc29saWRCYXRjaGVzTGVuZ3RoID0gc29saWRCYXRjaGVzLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IHNvbGlkQmF0Y2hlc0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvbGlkQmF0Y2ggPSBzb2xpZEJhdGNoZXNbaV07XG4gICAgaWYgKHNvbGlkQmF0Y2guY29udGFpbnModXBkYXRlcikpIHtcbiAgICAgIHJldHVybiBzb2xpZEJhdGNoLmdldEJvdW5kaW5nU3BoZXJlKHVwZGF0ZXIsIHJlc3VsdCk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHRyYW5zbHVjZW50QmF0Y2hlcyA9IHRoaXMuX3RyYW5zbHVjZW50QmF0Y2hlcy52YWx1ZXM7XG4gIHZhciB0cmFuc2x1Y2VudEJhdGNoZXNMZW5ndGggPSB0cmFuc2x1Y2VudEJhdGNoZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgdHJhbnNsdWNlbnRCYXRjaGVzTGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdHJhbnNsdWNlbnRCYXRjaCA9IHRyYW5zbHVjZW50QmF0Y2hlc1tpXTtcbiAgICBpZiAodHJhbnNsdWNlbnRCYXRjaC5jb250YWlucyh1cGRhdGVyKSkge1xuICAgICAgcmV0dXJuIHRyYW5zbHVjZW50QmF0Y2guZ2V0Qm91bmRpbmdTcGhlcmUodXBkYXRlciwgcmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQ7XG59O1xuXG5TdGF0aWNPdXRsaW5lR2VvbWV0cnlCYXRjaC5wcm90b3R5cGUucmVtb3ZlQWxsUHJpbWl0aXZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGk7XG5cbiAgdmFyIHNvbGlkQmF0Y2hlcyA9IHRoaXMuX3NvbGlkQmF0Y2hlcy52YWx1ZXM7XG4gIHZhciBzb2xpZEJhdGNoZXNMZW5ndGggPSBzb2xpZEJhdGNoZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgc29saWRCYXRjaGVzTGVuZ3RoOyBpKyspIHtcbiAgICBzb2xpZEJhdGNoZXNbaV0ucmVtb3ZlQWxsUHJpbWl0aXZlcygpO1xuICB9XG5cbiAgdmFyIHRyYW5zbHVjZW50QmF0Y2hlcyA9IHRoaXMuX3RyYW5zbHVjZW50QmF0Y2hlcy52YWx1ZXM7XG4gIHZhciB0cmFuc2x1Y2VudEJhdGNoZXNMZW5ndGggPSB0cmFuc2x1Y2VudEJhdGNoZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgdHJhbnNsdWNlbnRCYXRjaGVzTGVuZ3RoOyBpKyspIHtcbiAgICB0cmFuc2x1Y2VudEJhdGNoZXNbaV0ucmVtb3ZlQWxsUHJpbWl0aXZlcygpO1xuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgU3RhdGljT3V0bGluZUdlb21ldHJ5QmF0Y2g7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///29596\n')},79818:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14459);\n/* harmony import */ var _createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90203);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(40112);\n/* harmony import */ var _StripeOrientation_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(28742);\n\n\n\n\n\n\n\n\nvar defaultOrientation = _StripeOrientation_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].HORIZONTAL */ .Z.HORIZONTAL;\nvar defaultEvenColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].WHITE */ .Z.WHITE;\nvar defaultOddColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].BLACK */ .Z.BLACK;\nvar defaultOffset = 0;\nvar defaultRepeat = 1;\n\n/**\n * A {@link MaterialProperty} that maps to stripe {@link Material} uniforms.\n * @alias StripeMaterialProperty\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Property|StripeOrientation} [options.orientation=StripeOrientation.HORIZONTAL] A Property specifying the {@link StripeOrientation}.\n * @param {Property|Color} [options.evenColor=Color.WHITE] A Property specifying the first {@link Color}.\n * @param {Property|Color} [options.oddColor=Color.BLACK] A Property specifying the second {@link Color}.\n * @param {Property|Number} [options.offset=0] A numeric Property specifying how far into the pattern to start the material.\n * @param {Property|Number} [options.repeat=1] A numeric Property specifying how many times the stripes repeat.\n */\nfunction StripeMaterialProperty(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._orientation = undefined;\n  this._orientationSubscription = undefined;\n  this._evenColor = undefined;\n  this._evenColorSubscription = undefined;\n  this._oddColor = undefined;\n  this._oddColorSubscription = undefined;\n  this._offset = undefined;\n  this._offsetSubscription = undefined;\n  this._repeat = undefined;\n  this._repeatSubscription = undefined;\n\n  this.orientation = options.orientation;\n  this.evenColor = options.evenColor;\n  this.oddColor = options.oddColor;\n  this.offset = options.offset;\n  this.repeat = options.repeat;\n}\n\nObject.defineProperties(StripeMaterialProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.  A property is considered\n   * constant if getValue always returns the same result for the current definition.\n   * @memberof StripeMaterialProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return (\n        _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isConstant */ .Z.isConstant(this._orientation) && //\n        _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isConstant */ .Z.isConstant(this._evenColor) && //\n        _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isConstant */ .Z.isConstant(this._oddColor) && //\n        _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isConstant */ .Z.isConstant(this._offset) && //\n        _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isConstant */ .Z.isConstant(this._repeat)\n      );\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * The definition is considered to have changed if a call to getValue would return\n   * a different result for the same time.\n   * @memberof StripeMaterialProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n\n  /**\n   * Gets or sets the Property specifying the {@link StripeOrientation}/\n   * @memberof StripeMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default StripeOrientation.HORIZONTAL\n   */\n  orientation: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)("orientation"),\n\n  /**\n   * Gets or sets the Property specifying the first {@link Color}.\n   * @memberof StripeMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default Color.WHITE\n   */\n  evenColor: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)("evenColor"),\n\n  /**\n   * Gets or sets the Property specifying the second {@link Color}.\n   * @memberof StripeMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default Color.BLACK\n   */\n  oddColor: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)("oddColor"),\n\n  /**\n   * Gets or sets the numeric Property specifying the point into the pattern\n   * to begin drawing; with 0.0 being the beginning of the even color, 1.0 the beginning\n   * of the odd color, 2.0 being the even color again, and any multiple or fractional values\n   * being in between.\n   * @memberof StripeMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default 0.0\n   */\n  offset: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)("offset"),\n\n  /**\n   * Gets or sets the numeric Property specifying how many times the stripes repeat.\n   * @memberof StripeMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default 1.0\n   */\n  repeat: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)("repeat"),\n});\n\n/**\n * Gets the {@link Material} type at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the type.\n * @returns {String} The type of material.\n */\nStripeMaterialProperty.prototype.getType = function (time) {\n  return "Stripe";\n};\n\n/**\n * Gets the value of the property at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {Object} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Object} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nStripeMaterialProperty.prototype.getValue = function (time, result) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(result)) {\n    result = {};\n  }\n  result.horizontal =\n    _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(this._orientation, time, defaultOrientation) ===\n    _StripeOrientation_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].HORIZONTAL */ .Z.HORIZONTAL;\n  result.evenColor = _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._evenColor,\n    time,\n    defaultEvenColor,\n    result.evenColor\n  );\n  result.oddColor = _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._oddColor,\n    time,\n    defaultOddColor,\n    result.oddColor\n  );\n  result.offset = _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(this._offset, time, defaultOffset);\n  result.repeat = _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(this._repeat, time, defaultRepeat);\n  return result;\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nStripeMaterialProperty.prototype.equals = function (other) {\n  return (\n    this === other || //\n    (other instanceof StripeMaterialProperty && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(this._orientation, other._orientation) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(this._evenColor, other._evenColor) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(this._oddColor, other._oddColor) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(this._offset, other._offset) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].equals */ .Z.equals(this._repeat, other._repeat))\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (StripeMaterialProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzk4MTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxQztBQUNjO0FBQ1Y7QUFDSjtBQUNnQztBQUNoQztBQUNrQjs7QUFFdkQseUJBQXlCLDRGQUE0QjtBQUNyRCx1QkFBdUIsMkVBQVc7QUFDbEMsc0JBQXNCLDJFQUFXO0FBQ2pDO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLHdCQUF3QixxQkFBcUIsZ0JBQWdCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLDRCQUE0Qiw4RUFBOEUsd0JBQXdCO0FBQzdJLFdBQVcsZ0JBQWdCLGlFQUFpRSxZQUFZO0FBQ3hHLFdBQVcsZ0JBQWdCLGlFQUFpRSxZQUFZO0FBQ3hHLFdBQVcsaUJBQWlCO0FBQzVCLFdBQVcsaUJBQWlCO0FBQzVCO0FBQ0E7QUFDQSxZQUFZLDBFQUFZLFVBQVUsZ0dBQXlCOztBQUUzRCxnQ0FBZ0MsK0RBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRkFBbUI7QUFDM0IsUUFBUSxtRkFBbUI7QUFDM0IsUUFBUSxtRkFBbUI7QUFDM0IsUUFBUSxtRkFBbUI7QUFDM0IsUUFBUSxtRkFBbUI7QUFDM0I7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQSwrQ0FBK0Msd0JBQXdCO0FBQ3ZFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxlQUFlLGlGQUF3Qjs7QUFFdkM7QUFDQSxxREFBcUQsWUFBWTtBQUNqRTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsYUFBYSxpRkFBd0I7O0FBRXJDO0FBQ0Esc0RBQXNELFlBQVk7QUFDbEU7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFlBQVksaUZBQXdCOztBQUVwQztBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsVUFBVSxpRkFBd0I7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsVUFBVSxpRkFBd0I7QUFDbEMsQ0FBQzs7QUFFRDtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0EsT0FBTyxxRUFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBLElBQUksaUdBQTBCO0FBQzlCLElBQUksNEZBQTRCO0FBQ2hDLHFCQUFxQiw2R0FBZ0M7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2R0FBZ0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpR0FBMEI7QUFDNUMsa0JBQWtCLGlHQUEwQjtBQUM1QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyRUFBZTtBQUNyQixNQUFNLDJFQUFlO0FBQ3JCLE1BQU0sMkVBQWU7QUFDckIsTUFBTSwyRUFBZTtBQUNyQixNQUFNLDJFQUFlO0FBQ3JCO0FBQ0E7QUFDQSx5REFBZSxzQkFBc0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9TdHJpcGVNYXRlcmlhbFByb3BlcnR5LmpzPzAzYTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yIGZyb20gXCIuL2NyZWF0ZVByb3BlcnR5RGVzY3JpcHRvci5qc1wiO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gXCIuL1Byb3BlcnR5LmpzXCI7XG5pbXBvcnQgU3RyaXBlT3JpZW50YXRpb24gZnJvbSBcIi4vU3RyaXBlT3JpZW50YXRpb24uanNcIjtcblxudmFyIGRlZmF1bHRPcmllbnRhdGlvbiA9IFN0cmlwZU9yaWVudGF0aW9uLkhPUklaT05UQUw7XG52YXIgZGVmYXVsdEV2ZW5Db2xvciA9IENvbG9yLldISVRFO1xudmFyIGRlZmF1bHRPZGRDb2xvciA9IENvbG9yLkJMQUNLO1xudmFyIGRlZmF1bHRPZmZzZXQgPSAwO1xudmFyIGRlZmF1bHRSZXBlYXQgPSAxO1xuXG4vKipcbiAqIEEge0BsaW5rIE1hdGVyaWFsUHJvcGVydHl9IHRoYXQgbWFwcyB0byBzdHJpcGUge0BsaW5rIE1hdGVyaWFsfSB1bmlmb3Jtcy5cbiAqIEBhbGlhcyBTdHJpcGVNYXRlcmlhbFByb3BlcnR5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UHJvcGVydHl8U3RyaXBlT3JpZW50YXRpb259IFtvcHRpb25zLm9yaWVudGF0aW9uPVN0cmlwZU9yaWVudGF0aW9uLkhPUklaT05UQUxdIEEgUHJvcGVydHkgc3BlY2lmeWluZyB0aGUge0BsaW5rIFN0cmlwZU9yaWVudGF0aW9ufS5cbiAqIEBwYXJhbSB7UHJvcGVydHl8Q29sb3J9IFtvcHRpb25zLmV2ZW5Db2xvcj1Db2xvci5XSElURV0gQSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSBmaXJzdCB7QGxpbmsgQ29sb3J9LlxuICogQHBhcmFtIHtQcm9wZXJ0eXxDb2xvcn0gW29wdGlvbnMub2RkQ29sb3I9Q29sb3IuQkxBQ0tdIEEgUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgc2Vjb25kIHtAbGluayBDb2xvcn0uXG4gKiBAcGFyYW0ge1Byb3BlcnR5fE51bWJlcn0gW29wdGlvbnMub2Zmc2V0PTBdIEEgbnVtZXJpYyBQcm9wZXJ0eSBzcGVjaWZ5aW5nIGhvdyBmYXIgaW50byB0aGUgcGF0dGVybiB0byBzdGFydCB0aGUgbWF0ZXJpYWwuXG4gKiBAcGFyYW0ge1Byb3BlcnR5fE51bWJlcn0gW29wdGlvbnMucmVwZWF0PTFdIEEgbnVtZXJpYyBQcm9wZXJ0eSBzcGVjaWZ5aW5nIGhvdyBtYW55IHRpbWVzIHRoZSBzdHJpcGVzIHJlcGVhdC5cbiAqL1xuZnVuY3Rpb24gU3RyaXBlTWF0ZXJpYWxQcm9wZXJ0eShvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQgPSBuZXcgRXZlbnQoKTtcbiAgdGhpcy5fb3JpZW50YXRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX29yaWVudGF0aW9uU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9ldmVuQ29sb3IgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2V2ZW5Db2xvclN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fb2RkQ29sb3IgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX29kZENvbG9yU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9vZmZzZXQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX29mZnNldFN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcmVwZWF0ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9yZXBlYXRTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5vcmllbnRhdGlvbiA9IG9wdGlvbnMub3JpZW50YXRpb247XG4gIHRoaXMuZXZlbkNvbG9yID0gb3B0aW9ucy5ldmVuQ29sb3I7XG4gIHRoaXMub2RkQ29sb3IgPSBvcHRpb25zLm9kZENvbG9yO1xuICB0aGlzLm9mZnNldCA9IG9wdGlvbnMub2Zmc2V0O1xuICB0aGlzLnJlcGVhdCA9IG9wdGlvbnMucmVwZWF0O1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhTdHJpcGVNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgaWYgdGhpcyBwcm9wZXJ0eSBpcyBjb25zdGFudC4gIEEgcHJvcGVydHkgaXMgY29uc2lkZXJlZFxuICAgKiBjb25zdGFudCBpZiBnZXRWYWx1ZSBhbHdheXMgcmV0dXJucyB0aGUgc2FtZSByZXN1bHQgZm9yIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBtZW1iZXJvZiBTdHJpcGVNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpc0NvbnN0YW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBQcm9wZXJ0eS5pc0NvbnN0YW50KHRoaXMuX29yaWVudGF0aW9uKSAmJiAvL1xuICAgICAgICBQcm9wZXJ0eS5pc0NvbnN0YW50KHRoaXMuX2V2ZW5Db2xvcikgJiYgLy9cbiAgICAgICAgUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl9vZGRDb2xvcikgJiYgLy9cbiAgICAgICAgUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl9vZmZzZXQpICYmIC8vXG4gICAgICAgIFByb3BlcnR5LmlzQ29uc3RhbnQodGhpcy5fcmVwZWF0KVxuICAgICAgKTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbmV2ZXIgdGhlIGRlZmluaXRpb24gb2YgdGhpcyBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKiBUaGUgZGVmaW5pdGlvbiBpcyBjb25zaWRlcmVkIHRvIGhhdmUgY2hhbmdlZCBpZiBhIGNhbGwgdG8gZ2V0VmFsdWUgd291bGQgcmV0dXJuXG4gICAqIGEgZGlmZmVyZW50IHJlc3VsdCBmb3IgdGhlIHNhbWUgdGltZS5cbiAgICogQG1lbWJlcm9mIFN0cmlwZU1hdGVyaWFsUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBkZWZpbml0aW9uQ2hhbmdlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgUHJvcGVydHkgc3BlY2lmeWluZyB0aGUge0BsaW5rIFN0cmlwZU9yaWVudGF0aW9ufS9cbiAgICogQG1lbWJlcm9mIFN0cmlwZU1hdGVyaWFsUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IFN0cmlwZU9yaWVudGF0aW9uLkhPUklaT05UQUxcbiAgICovXG4gIG9yaWVudGF0aW9uOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJvcmllbnRhdGlvblwiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSBmaXJzdCB7QGxpbmsgQ29sb3J9LlxuICAgKiBAbWVtYmVyb2YgU3RyaXBlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb3BlcnR5fHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgQ29sb3IuV0hJVEVcbiAgICovXG4gIGV2ZW5Db2xvcjogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwiZXZlbkNvbG9yXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIHNlY29uZCB7QGxpbmsgQ29sb3J9LlxuICAgKiBAbWVtYmVyb2YgU3RyaXBlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb3BlcnR5fHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgQ29sb3IuQkxBQ0tcbiAgICovXG4gIG9kZENvbG9yOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJvZGRDb2xvclwiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBudW1lcmljIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIHBvaW50IGludG8gdGhlIHBhdHRlcm5cbiAgICogdG8gYmVnaW4gZHJhd2luZzsgd2l0aCAwLjAgYmVpbmcgdGhlIGJlZ2lubmluZyBvZiB0aGUgZXZlbiBjb2xvciwgMS4wIHRoZSBiZWdpbm5pbmdcbiAgICogb2YgdGhlIG9kZCBjb2xvciwgMi4wIGJlaW5nIHRoZSBldmVuIGNvbG9yIGFnYWluLCBhbmQgYW55IG11bHRpcGxlIG9yIGZyYWN0aW9uYWwgdmFsdWVzXG4gICAqIGJlaW5nIGluIGJldHdlZW4uXG4gICAqIEBtZW1iZXJvZiBTdHJpcGVNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCAwLjBcbiAgICovXG4gIG9mZnNldDogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwib2Zmc2V0XCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIG51bWVyaWMgUHJvcGVydHkgc3BlY2lmeWluZyBob3cgbWFueSB0aW1lcyB0aGUgc3RyaXBlcyByZXBlYXQuXG4gICAqIEBtZW1iZXJvZiBTdHJpcGVNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCAxLjBcbiAgICovXG4gIHJlcGVhdDogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwicmVwZWF0XCIpLFxufSk7XG5cbi8qKlxuICogR2V0cyB0aGUge0BsaW5rIE1hdGVyaWFsfSB0eXBlIGF0IHRoZSBwcm92aWRlZCB0aW1lLlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIHR5cGUuXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgdHlwZSBvZiBtYXRlcmlhbC5cbiAqL1xuU3RyaXBlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHJldHVybiBcIlN0cmlwZVwiO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgYXQgdGhlIHByb3ZpZGVkIHRpbWUuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSB0aW1lIGZvciB3aGljaCB0byByZXRyaWV2ZSB0aGUgdmFsdWUuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3VsdF0gVGhlIG9iamVjdCB0byBzdG9yZSB0aGUgdmFsdWUgaW50bywgaWYgb21pdHRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbW9kaWZpZWQgcmVzdWx0IHBhcmFtZXRlciBvciBhIG5ldyBpbnN0YW5jZSBpZiB0aGUgcmVzdWx0IHBhcmFtZXRlciB3YXMgbm90IHN1cHBsaWVkLlxuICovXG5TdHJpcGVNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh0aW1lLCByZXN1bHQpIHtcbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSB7fTtcbiAgfVxuICByZXN1bHQuaG9yaXpvbnRhbCA9XG4gICAgUHJvcGVydHkuZ2V0VmFsdWVPckRlZmF1bHQodGhpcy5fb3JpZW50YXRpb24sIHRpbWUsIGRlZmF1bHRPcmllbnRhdGlvbikgPT09XG4gICAgU3RyaXBlT3JpZW50YXRpb24uSE9SSVpPTlRBTDtcbiAgcmVzdWx0LmV2ZW5Db2xvciA9IFByb3BlcnR5LmdldFZhbHVlT3JDbG9uZWREZWZhdWx0KFxuICAgIHRoaXMuX2V2ZW5Db2xvcixcbiAgICB0aW1lLFxuICAgIGRlZmF1bHRFdmVuQ29sb3IsXG4gICAgcmVzdWx0LmV2ZW5Db2xvclxuICApO1xuICByZXN1bHQub2RkQ29sb3IgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yQ2xvbmVkRGVmYXVsdChcbiAgICB0aGlzLl9vZGRDb2xvcixcbiAgICB0aW1lLFxuICAgIGRlZmF1bHRPZGRDb2xvcixcbiAgICByZXN1bHQub2RkQ29sb3JcbiAgKTtcbiAgcmVzdWx0Lm9mZnNldCA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KHRoaXMuX29mZnNldCwgdGltZSwgZGVmYXVsdE9mZnNldCk7XG4gIHJlc3VsdC5yZXBlYXQgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yRGVmYXVsdCh0aGlzLl9yZXBlYXQsIHRpbWUsIGRlZmF1bHRSZXBlYXQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0aGlzIHByb3BlcnR5IHRvIHRoZSBwcm92aWRlZCBwcm9wZXJ0eSBhbmQgcmV0dXJuc1xuICogPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhleSBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtQcm9wZXJ0eX0gW290aGVyXSBUaGUgb3RoZXIgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgbGVmdCBhbmQgcmlnaHQgYXJlIGVxdWFsLCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICovXG5TdHJpcGVNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgcmV0dXJuIChcbiAgICB0aGlzID09PSBvdGhlciB8fCAvL1xuICAgIChvdGhlciBpbnN0YW5jZW9mIFN0cmlwZU1hdGVyaWFsUHJvcGVydHkgJiYgLy9cbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9vcmllbnRhdGlvbiwgb3RoZXIuX29yaWVudGF0aW9uKSAmJiAvL1xuICAgICAgUHJvcGVydHkuZXF1YWxzKHRoaXMuX2V2ZW5Db2xvciwgb3RoZXIuX2V2ZW5Db2xvcikgJiYgLy9cbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9vZGRDb2xvciwgb3RoZXIuX29kZENvbG9yKSAmJiAvL1xuICAgICAgUHJvcGVydHkuZXF1YWxzKHRoaXMuX29mZnNldCwgb3RoZXIuX29mZnNldCkgJiYgLy9cbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9yZXBlYXQsIG90aGVyLl9yZXBlYXQpKVxuICApO1xufTtcbmV4cG9ydCBkZWZhdWx0IFN0cmlwZU1hdGVyaWFsUHJvcGVydHk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///79818\n')},28742:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * Defined the orientation of stripes in {@link StripeMaterialProperty}.\n *\n * @enum {Number}\n */\nvar StripeOrientation = {\n  /**\n   * Horizontal orientation.\n   * @type {Number}\n   */\n  HORIZONTAL: 0,\n\n  /**\n   * Vertical orientation.\n   * @type {Number}\n   */\n  VERTICAL: 1,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(StripeOrientation));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjg3NDIuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSwwQ0FBMEMsNkJBQTZCO0FBQ3ZFO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSx5REFBZSxnQ0FBZ0MsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9TdHJpcGVPcmllbnRhdGlvbi5qcz84Nzg5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGVmaW5lZCB0aGUgb3JpZW50YXRpb24gb2Ygc3RyaXBlcyBpbiB7QGxpbmsgU3RyaXBlTWF0ZXJpYWxQcm9wZXJ0eX0uXG4gKlxuICogQGVudW0ge051bWJlcn1cbiAqL1xudmFyIFN0cmlwZU9yaWVudGF0aW9uID0ge1xuICAvKipcbiAgICogSG9yaXpvbnRhbCBvcmllbnRhdGlvbi5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIEhPUklaT05UQUw6IDAsXG5cbiAgLyoqXG4gICAqIFZlcnRpY2FsIG9yaWVudGF0aW9uLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgVkVSVElDQUw6IDEsXG59O1xuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZShTdHJpcGVPcmllbnRhdGlvbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28742\n')},18743:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(51688);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14459);\n/* harmony import */ var _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22841);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99417);\n/* harmony import */ var _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(4260);\n/* harmony import */ var _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(89917);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\nvar scratchPosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar scratchCarto = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * @private\n */\nfunction TerrainOffsetProperty(\n  scene,\n  positionProperty,\n  heightReferenceProperty,\n  extrudedHeightReferenceProperty\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defined */ .Z.defined("scene", scene);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defined */ .Z.defined("positionProperty", positionProperty);\n  //>>includeEnd(\'debug\');\n\n  this._scene = scene;\n  this._heightReference = heightReferenceProperty;\n  this._extrudedHeightReference = extrudedHeightReferenceProperty;\n  this._positionProperty = positionProperty;\n\n  this._position = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._cartographicPosition = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  this._normal = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n  this._terrainHeight = 0;\n  this._removeCallbackFunc = undefined;\n  this._removeEventListener = undefined;\n  this._removeModeListener = undefined;\n\n  var that = this;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(scene.globe)) {\n    this._removeEventListener = scene.terrainProviderChanged.addEventListener(\n      function () {\n        that._updateClamping();\n      }\n    );\n    this._removeModeListener = scene.morphComplete.addEventListener(\n      function () {\n        that._updateClamping();\n      }\n    );\n  }\n\n  if (positionProperty.isConstant) {\n    var position = positionProperty.getValue(\n      _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE,\n      scratchPosition\n    );\n    if (\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(position) ||\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equals */ .Z.equals(position, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO) ||\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(scene.globe)\n    ) {\n      return;\n    }\n    this._position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(position, this._position);\n\n    this._updateClamping();\n\n    this._normal = scene.globe.ellipsoid.geodeticSurfaceNormal(\n      position,\n      this._normal\n    );\n  }\n}\n\nObject.defineProperties(TerrainOffsetProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.\n   * @memberof TerrainOffsetProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return false;\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * @memberof TerrainOffsetProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n});\n\n/**\n * @private\n */\nTerrainOffsetProperty.prototype._updateClamping = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._removeCallbackFunc)) {\n    this._removeCallbackFunc();\n  }\n\n  var scene = this._scene;\n  var globe = scene.globe;\n  var position = this._position;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(globe) || _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equals */ .Z.equals(position, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO)) {\n    this._terrainHeight = 0;\n    return;\n  }\n  var ellipsoid = globe.ellipsoid;\n  var surface = globe._surface;\n\n  var that = this;\n  var cartographicPosition = ellipsoid.cartesianToCartographic(\n    position,\n    this._cartographicPosition\n  );\n  var height = globe.getHeight(cartographicPosition);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(height)) {\n    this._terrainHeight = height;\n  } else {\n    this._terrainHeight = 0;\n  }\n\n  function updateFunction(clampedPosition) {\n    if (scene.mode === _Scene_SceneMode_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n      var carto = ellipsoid.cartesianToCartographic(\n        clampedPosition,\n        scratchCarto\n      );\n      that._terrainHeight = carto.height;\n    } else {\n      that._terrainHeight = clampedPosition.x;\n    }\n    that.definitionChanged.raiseEvent();\n  }\n  this._removeCallbackFunc = surface.updateHeight(\n    cartographicPosition,\n    updateFunction\n  );\n};\n\n/**\n * Gets the height relative to the terrain based on the positions.\n *\n * @returns {Cartesian3} The offset\n */\nTerrainOffsetProperty.prototype.getValue = function (time, result) {\n  var heightReference = _Property_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n    this._heightReference,\n    time,\n    _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].NONE */ .Z.NONE\n  );\n  var extrudedHeightReference = _Property_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n    this._extrudedHeightReference,\n    time,\n    _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].NONE */ .Z.NONE\n  );\n\n  if (\n    heightReference === _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].NONE */ .Z.NONE &&\n    extrudedHeightReference !== _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].RELATIVE_TO_GROUND */ .Z.RELATIVE_TO_GROUND\n  ) {\n    this._position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO, this._position);\n    return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO, result);\n  }\n\n  if (this._positionProperty.isConstant) {\n    return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      this._normal,\n      this._terrainHeight,\n      result\n    );\n  }\n\n  var scene = this._scene;\n  var position = this._positionProperty.getValue(time, scratchPosition);\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(position) ||\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equals */ .Z.equals(position, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(scene.globe)\n  ) {\n    return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO, result);\n  }\n\n  if (\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(this._position, position, _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON10 */ .Z.EPSILON10)\n  ) {\n    return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      this._normal,\n      this._terrainHeight,\n      result\n    );\n  }\n\n  this._position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(position, this._position);\n\n  this._updateClamping();\n\n  var normal = scene.globe.ellipsoid.geodeticSurfaceNormal(\n    position,\n    this._normal\n  );\n  return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(normal, this._terrainHeight, result);\n};\n\nTerrainOffsetProperty.prototype.isDestroyed = function () {\n  return false;\n};\n\nTerrainOffsetProperty.prototype.destroy = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._removeEventListener)) {\n    this._removeEventListener();\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._removeModeListener)) {\n    this._removeModeListener();\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(this._removeCallbackFunc)) {\n    this._removeCallbackFunc();\n  }\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n\n/**\n * A function which creates one or more providers.\n * @callback TerrainOffsetProperty.PositionFunction\n * @param {JulianDate} time The clock time at which to retrieve the position\n * @param {Cartesian3} result The result position\n * @returns {Cartesian3} The position at which to do the terrain height check\n */\n/* harmony default export */ __webpack_exports__["Z"] = (TerrainOffsetProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsWUFBWTtBQUN2QixhQUFhLFlBQVk7QUFDekI7QUFDQSx5REFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9UZXJyYWluT2Zmc2V0UHJvcGVydHkuanM/YTNkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCIuLi9Db3JlL0NhcnRvZ3JhcGhpYy5qc1wiO1xuaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBJc284NjAxIGZyb20gXCIuLi9Db3JlL0lzbzg2MDEuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBIZWlnaHRSZWZlcmVuY2UgZnJvbSBcIi4uL1NjZW5lL0hlaWdodFJlZmVyZW5jZS5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi4vU2NlbmUvU2NlbmVNb2RlLmpzXCI7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSBcIi4vUHJvcGVydHkuanNcIjtcblxudmFyIHNjcmF0Y2hQb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaENhcnRvID0gbmV3IENhcnRvZ3JhcGhpYygpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIFRlcnJhaW5PZmZzZXRQcm9wZXJ0eShcbiAgc2NlbmUsXG4gIHBvc2l0aW9uUHJvcGVydHksXG4gIGhlaWdodFJlZmVyZW5jZVByb3BlcnR5LFxuICBleHRydWRlZEhlaWdodFJlZmVyZW5jZVByb3BlcnR5XG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInNjZW5lXCIsIHNjZW5lKTtcbiAgQ2hlY2suZGVmaW5lZChcInBvc2l0aW9uUHJvcGVydHlcIiwgcG9zaXRpb25Qcm9wZXJ0eSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gIHRoaXMuX2hlaWdodFJlZmVyZW5jZSA9IGhlaWdodFJlZmVyZW5jZVByb3BlcnR5O1xuICB0aGlzLl9leHRydWRlZEhlaWdodFJlZmVyZW5jZSA9IGV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlUHJvcGVydHk7XG4gIHRoaXMuX3Bvc2l0aW9uUHJvcGVydHkgPSBwb3NpdGlvblByb3BlcnR5O1xuXG4gIHRoaXMuX3Bvc2l0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbiAgdGhpcy5fY2FydG9ncmFwaGljUG9zaXRpb24gPSBuZXcgQ2FydG9ncmFwaGljKCk7XG4gIHRoaXMuX25vcm1hbCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbiAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQgPSBuZXcgRXZlbnQoKTtcbiAgdGhpcy5fdGVycmFpbkhlaWdodCA9IDA7XG4gIHRoaXMuX3JlbW92ZUNhbGxiYWNrRnVuYyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcmVtb3ZlTW9kZUxpc3RlbmVyID0gdW5kZWZpbmVkO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgaWYgKGRlZmluZWQoc2NlbmUuZ2xvYmUpKSB7XG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHNjZW5lLnRlcnJhaW5Qcm92aWRlckNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5fdXBkYXRlQ2xhbXBpbmcoKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuX3JlbW92ZU1vZGVMaXN0ZW5lciA9IHNjZW5lLm1vcnBoQ29tcGxldGUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5fdXBkYXRlQ2xhbXBpbmcoKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgaWYgKHBvc2l0aW9uUHJvcGVydHkuaXNDb25zdGFudCkge1xuICAgIHZhciBwb3NpdGlvbiA9IHBvc2l0aW9uUHJvcGVydHkuZ2V0VmFsdWUoXG4gICAgICBJc284NjAxLk1JTklNVU1fVkFMVUUsXG4gICAgICBzY3JhdGNoUG9zaXRpb25cbiAgICApO1xuICAgIGlmIChcbiAgICAgICFkZWZpbmVkKHBvc2l0aW9uKSB8fFxuICAgICAgQ2FydGVzaWFuMy5lcXVhbHMocG9zaXRpb24sIENhcnRlc2lhbjMuWkVSTykgfHxcbiAgICAgICFkZWZpbmVkKHNjZW5lLmdsb2JlKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9wb3NpdGlvbiA9IENhcnRlc2lhbjMuY2xvbmUocG9zaXRpb24sIHRoaXMuX3Bvc2l0aW9uKTtcblxuICAgIHRoaXMuX3VwZGF0ZUNsYW1waW5nKCk7XG5cbiAgICB0aGlzLl9ub3JtYWwgPSBzY2VuZS5nbG9iZS5lbGxpcHNvaWQuZ2VvZGV0aWNTdXJmYWNlTm9ybWFsKFxuICAgICAgcG9zaXRpb24sXG4gICAgICB0aGlzLl9ub3JtYWxcbiAgICApO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRlcnJhaW5PZmZzZXRQcm9wZXJ0eS5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoaXMgcHJvcGVydHkgaXMgY29uc3RhbnQuXG4gICAqIEBtZW1iZXJvZiBUZXJyYWluT2Zmc2V0UHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGlzQ29uc3RhbnQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbmV2ZXIgdGhlIGRlZmluaXRpb24gb2YgdGhpcyBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKiBAbWVtYmVyb2YgVGVycmFpbk9mZnNldFByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZGVmaW5pdGlvbkNoYW5nZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZDtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVGVycmFpbk9mZnNldFByb3BlcnR5LnByb3RvdHlwZS5fdXBkYXRlQ2xhbXBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChkZWZpbmVkKHRoaXMuX3JlbW92ZUNhbGxiYWNrRnVuYykpIHtcbiAgICB0aGlzLl9yZW1vdmVDYWxsYmFja0Z1bmMoKTtcbiAgfVxuXG4gIHZhciBzY2VuZSA9IHRoaXMuX3NjZW5lO1xuICB2YXIgZ2xvYmUgPSBzY2VuZS5nbG9iZTtcbiAgdmFyIHBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XG5cbiAgaWYgKCFkZWZpbmVkKGdsb2JlKSB8fCBDYXJ0ZXNpYW4zLmVxdWFscyhwb3NpdGlvbiwgQ2FydGVzaWFuMy5aRVJPKSkge1xuICAgIHRoaXMuX3RlcnJhaW5IZWlnaHQgPSAwO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZWxsaXBzb2lkID0gZ2xvYmUuZWxsaXBzb2lkO1xuICB2YXIgc3VyZmFjZSA9IGdsb2JlLl9zdXJmYWNlO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIGNhcnRvZ3JhcGhpY1Bvc2l0aW9uID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgIHBvc2l0aW9uLFxuICAgIHRoaXMuX2NhcnRvZ3JhcGhpY1Bvc2l0aW9uXG4gICk7XG4gIHZhciBoZWlnaHQgPSBnbG9iZS5nZXRIZWlnaHQoY2FydG9ncmFwaGljUG9zaXRpb24pO1xuICBpZiAoZGVmaW5lZChoZWlnaHQpKSB7XG4gICAgdGhpcy5fdGVycmFpbkhlaWdodCA9IGhlaWdodDtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl90ZXJyYWluSGVpZ2h0ID0gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUZ1bmN0aW9uKGNsYW1wZWRQb3NpdGlvbikge1xuICAgIGlmIChzY2VuZS5tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUzRCkge1xuICAgICAgdmFyIGNhcnRvID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgICAgICBjbGFtcGVkUG9zaXRpb24sXG4gICAgICAgIHNjcmF0Y2hDYXJ0b1xuICAgICAgKTtcbiAgICAgIHRoYXQuX3RlcnJhaW5IZWlnaHQgPSBjYXJ0by5oZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoYXQuX3RlcnJhaW5IZWlnaHQgPSBjbGFtcGVkUG9zaXRpb24ueDtcbiAgICB9XG4gICAgdGhhdC5kZWZpbml0aW9uQ2hhbmdlZC5yYWlzZUV2ZW50KCk7XG4gIH1cbiAgdGhpcy5fcmVtb3ZlQ2FsbGJhY2tGdW5jID0gc3VyZmFjZS51cGRhdGVIZWlnaHQoXG4gICAgY2FydG9ncmFwaGljUG9zaXRpb24sXG4gICAgdXBkYXRlRnVuY3Rpb25cbiAgKTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgaGVpZ2h0IHJlbGF0aXZlIHRvIHRoZSB0ZXJyYWluIGJhc2VkIG9uIHRoZSBwb3NpdGlvbnMuXG4gKlxuICogQHJldHVybnMge0NhcnRlc2lhbjN9IFRoZSBvZmZzZXRcbiAqL1xuVGVycmFpbk9mZnNldFByb3BlcnR5LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh0aW1lLCByZXN1bHQpIHtcbiAgdmFyIGhlaWdodFJlZmVyZW5jZSA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgIHRoaXMuX2hlaWdodFJlZmVyZW5jZSxcbiAgICB0aW1lLFxuICAgIEhlaWdodFJlZmVyZW5jZS5OT05FXG4gICk7XG4gIHZhciBleHRydWRlZEhlaWdodFJlZmVyZW5jZSA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgIHRoaXMuX2V4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlLFxuICAgIHRpbWUsXG4gICAgSGVpZ2h0UmVmZXJlbmNlLk5PTkVcbiAgKTtcblxuICBpZiAoXG4gICAgaGVpZ2h0UmVmZXJlbmNlID09PSBIZWlnaHRSZWZlcmVuY2UuTk9ORSAmJlxuICAgIGV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlICE9PSBIZWlnaHRSZWZlcmVuY2UuUkVMQVRJVkVfVE9fR1JPVU5EXG4gICkge1xuICAgIHRoaXMuX3Bvc2l0aW9uID0gQ2FydGVzaWFuMy5jbG9uZShDYXJ0ZXNpYW4zLlpFUk8sIHRoaXMuX3Bvc2l0aW9uKTtcbiAgICByZXR1cm4gQ2FydGVzaWFuMy5jbG9uZShDYXJ0ZXNpYW4zLlpFUk8sIHJlc3VsdCk7XG4gIH1cblxuICBpZiAodGhpcy5fcG9zaXRpb25Qcm9wZXJ0eS5pc0NvbnN0YW50KSB7XG4gICAgcmV0dXJuIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgIHRoaXMuX25vcm1hbCxcbiAgICAgIHRoaXMuX3RlcnJhaW5IZWlnaHQsXG4gICAgICByZXN1bHRcbiAgICApO1xuICB9XG5cbiAgdmFyIHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gIHZhciBwb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uUHJvcGVydHkuZ2V0VmFsdWUodGltZSwgc2NyYXRjaFBvc2l0aW9uKTtcbiAgaWYgKFxuICAgICFkZWZpbmVkKHBvc2l0aW9uKSB8fFxuICAgIENhcnRlc2lhbjMuZXF1YWxzKHBvc2l0aW9uLCBDYXJ0ZXNpYW4zLlpFUk8pIHx8XG4gICAgIWRlZmluZWQoc2NlbmUuZ2xvYmUpXG4gICkge1xuICAgIHJldHVybiBDYXJ0ZXNpYW4zLmNsb25lKENhcnRlc2lhbjMuWkVSTywgcmVzdWx0KTtcbiAgfVxuXG4gIGlmIChcbiAgICBDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb24odGhpcy5fcG9zaXRpb24sIHBvc2l0aW9uLCBDZXNpdW1NYXRoLkVQU0lMT04xMClcbiAgKSB7XG4gICAgcmV0dXJuIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgIHRoaXMuX25vcm1hbCxcbiAgICAgIHRoaXMuX3RlcnJhaW5IZWlnaHQsXG4gICAgICByZXN1bHRcbiAgICApO1xuICB9XG5cbiAgdGhpcy5fcG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbik7XG5cbiAgdGhpcy5fdXBkYXRlQ2xhbXBpbmcoKTtcblxuICB2YXIgbm9ybWFsID0gc2NlbmUuZ2xvYmUuZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbChcbiAgICBwb3NpdGlvbixcbiAgICB0aGlzLl9ub3JtYWxcbiAgKTtcbiAgcmV0dXJuIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihub3JtYWwsIHRoaXMuX3RlcnJhaW5IZWlnaHQsIHJlc3VsdCk7XG59O1xuXG5UZXJyYWluT2Zmc2V0UHJvcGVydHkucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG5UZXJyYWluT2Zmc2V0UHJvcGVydHkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChkZWZpbmVkKHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXIpKSB7XG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICB9XG4gIGlmIChkZWZpbmVkKHRoaXMuX3JlbW92ZU1vZGVMaXN0ZW5lcikpIHtcbiAgICB0aGlzLl9yZW1vdmVNb2RlTGlzdGVuZXIoKTtcbiAgfVxuICBpZiAoZGVmaW5lZCh0aGlzLl9yZW1vdmVDYWxsYmFja0Z1bmMpKSB7XG4gICAgdGhpcy5fcmVtb3ZlQ2FsbGJhY2tGdW5jKCk7XG4gIH1cbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gd2hpY2ggY3JlYXRlcyBvbmUgb3IgbW9yZSBwcm92aWRlcnMuXG4gKiBAY2FsbGJhY2sgVGVycmFpbk9mZnNldFByb3BlcnR5LlBvc2l0aW9uRnVuY3Rpb25cbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgY2xvY2sgdGltZSBhdCB3aGljaCB0byByZXRyaWV2ZSB0aGUgcG9zaXRpb25cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gcmVzdWx0IFRoZSByZXN1bHQgcG9zaXRpb25cbiAqIEByZXR1cm5zIHtDYXJ0ZXNpYW4zfSBUaGUgcG9zaXRpb24gYXQgd2hpY2ggdG8gZG8gdGhlIHRlcnJhaW4gaGVpZ2h0IGNoZWNrXG4gKi9cbmV4cG9ydCBkZWZhdWx0IFRlcnJhaW5PZmZzZXRQcm9wZXJ0eTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///18743\n')},4129:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14459);\n/* harmony import */ var _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(17964);\n/* harmony import */ var _Core_TimeIntervalCollection_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46026);\n/* harmony import */ var _PositionProperty_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69188);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n/**\n * A {@link TimeIntervalCollectionProperty} which is also a {@link PositionProperty}.\n *\n * @alias TimeIntervalCollectionPositionProperty\n * @constructor\n *\n * @param {ReferenceFrame} [referenceFrame=ReferenceFrame.FIXED] The reference frame in which the position is defined.\n */\nfunction TimeIntervalCollectionPositionProperty(referenceFrame) {\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._intervals = new _Core_TimeIntervalCollection_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n  this._intervals.changedEvent.addEventListener(\n    TimeIntervalCollectionPositionProperty.prototype._intervalsChanged,\n    this\n  );\n  this._referenceFrame = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(referenceFrame, _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FIXED */ .Z.FIXED);\n}\n\nObject.defineProperties(TimeIntervalCollectionPositionProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.  A property is considered\n   * constant if getValue always returns the same result for the current definition.\n   * @memberof TimeIntervalCollectionPositionProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return this._intervals.isEmpty;\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * The definition is considered to have changed if a call to getValue would return\n   * a different result for the same time.\n   * @memberof TimeIntervalCollectionPositionProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n  /**\n   * Gets the interval collection.\n   * @memberof TimeIntervalCollectionPositionProperty.prototype\n   * @type {TimeIntervalCollection}\n   */\n  intervals: {\n    get: function () {\n      return this._intervals;\n    },\n  },\n  /**\n   * Gets the reference frame in which the position is defined.\n   * @memberof TimeIntervalCollectionPositionProperty.prototype\n   * @type {ReferenceFrame}\n   * @default ReferenceFrame.FIXED;\n   */\n  referenceFrame: {\n    get: function () {\n      return this._referenceFrame;\n    },\n  },\n});\n\n/**\n * Gets the value of the property at the provided time in the fixed frame.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {Object} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Object} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nTimeIntervalCollectionPositionProperty.prototype.getValue = function (\n  time,\n  result\n) {\n  return this.getValueInReferenceFrame(time, _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FIXED */ .Z.FIXED, result);\n};\n\n/**\n * Gets the value of the property at the provided time and in the provided reference frame.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {ReferenceFrame} referenceFrame The desired referenceFrame of the result.\n * @param {Cartesian3} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Cartesian3} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nTimeIntervalCollectionPositionProperty.prototype.getValueInReferenceFrame = function (\n  time,\n  referenceFrame,\n  result\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(time)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("time is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(referenceFrame)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("referenceFrame is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var position = this._intervals.findDataForIntervalContainingDate(time);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(position)) {\n    return _PositionProperty_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].convertToReferenceFrame */ .Z.convertToReferenceFrame(\n      time,\n      position,\n      this._referenceFrame,\n      referenceFrame,\n      result\n    );\n  }\n  return undefined;\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nTimeIntervalCollectionPositionProperty.prototype.equals = function (other) {\n  return (\n    this === other || //\n    (other instanceof TimeIntervalCollectionPositionProperty && //\n      this._intervals.equals(other._intervals, _Property_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equals */ .Z.equals) && //\n      this._referenceFrame === other._referenceFrame)\n  );\n};\n\n/**\n * @private\n */\nTimeIntervalCollectionPositionProperty.prototype._intervalsChanged = function () {\n  this._definitionChanged.raiseEvent(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (TimeIntervalCollectionPositionProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEyOS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtRDtBQUNWO0FBQ2M7QUFDbEI7QUFDa0I7QUFDZ0I7QUFDbEI7QUFDaEI7O0FBRXJDO0FBQ0EsTUFBTSxzQ0FBc0MsaUJBQWlCLHVCQUF1QjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0E7QUFDQSxnQ0FBZ0MsK0RBQUs7QUFDckMsd0JBQXdCLGdGQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwRUFBWSxpQkFBaUIsb0ZBQW9CO0FBQzFFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLG9GQUFvQjtBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxnQkFBZ0I7QUFDM0IsV0FBVyxZQUFZO0FBQ3ZCLGFBQWEsWUFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8scUVBQU87QUFDZCxjQUFjLHdFQUFjO0FBQzVCO0FBQ0EsT0FBTyxxRUFBTztBQUNkLGNBQWMsd0VBQWM7QUFDNUI7QUFDQTs7QUFFQTtBQUNBLE1BQU0scUVBQU87QUFDYixXQUFXLHFIQUF3QztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFVBQVU7QUFDckIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsMkVBQWU7QUFDOUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLHNDQUFzQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL1RpbWVJbnRlcnZhbENvbGxlY3Rpb25Qb3NpdGlvblByb3BlcnR5LmpzP2U0YmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgUmVmZXJlbmNlRnJhbWUgZnJvbSBcIi4uL0NvcmUvUmVmZXJlbmNlRnJhbWUuanNcIjtcbmltcG9ydCBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uIGZyb20gXCIuLi9Db3JlL1RpbWVJbnRlcnZhbENvbGxlY3Rpb24uanNcIjtcbmltcG9ydCBQb3NpdGlvblByb3BlcnR5IGZyb20gXCIuL1Bvc2l0aW9uUHJvcGVydHkuanNcIjtcbmltcG9ydCBQcm9wZXJ0eSBmcm9tIFwiLi9Qcm9wZXJ0eS5qc1wiO1xuXG4vKipcbiAqIEEge0BsaW5rIFRpbWVJbnRlcnZhbENvbGxlY3Rpb25Qcm9wZXJ0eX0gd2hpY2ggaXMgYWxzbyBhIHtAbGluayBQb3NpdGlvblByb3BlcnR5fS5cbiAqXG4gKiBAYWxpYXMgVGltZUludGVydmFsQ29sbGVjdGlvblBvc2l0aW9uUHJvcGVydHlcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7UmVmZXJlbmNlRnJhbWV9IFtyZWZlcmVuY2VGcmFtZT1SZWZlcmVuY2VGcmFtZS5GSVhFRF0gVGhlIHJlZmVyZW5jZSBmcmFtZSBpbiB3aGljaCB0aGUgcG9zaXRpb24gaXMgZGVmaW5lZC5cbiAqL1xuZnVuY3Rpb24gVGltZUludGVydmFsQ29sbGVjdGlvblBvc2l0aW9uUHJvcGVydHkocmVmZXJlbmNlRnJhbWUpIHtcbiAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQgPSBuZXcgRXZlbnQoKTtcbiAgdGhpcy5faW50ZXJ2YWxzID0gbmV3IFRpbWVJbnRlcnZhbENvbGxlY3Rpb24oKTtcbiAgdGhpcy5faW50ZXJ2YWxzLmNoYW5nZWRFdmVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgIFRpbWVJbnRlcnZhbENvbGxlY3Rpb25Qb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZS5faW50ZXJ2YWxzQ2hhbmdlZCxcbiAgICB0aGlzXG4gICk7XG4gIHRoaXMuX3JlZmVyZW5jZUZyYW1lID0gZGVmYXVsdFZhbHVlKHJlZmVyZW5jZUZyYW1lLCBSZWZlcmVuY2VGcmFtZS5GSVhFRCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRpbWVJbnRlcnZhbENvbGxlY3Rpb25Qb3NpdGlvblByb3BlcnR5LnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgaWYgdGhpcyBwcm9wZXJ0eSBpcyBjb25zdGFudC4gIEEgcHJvcGVydHkgaXMgY29uc2lkZXJlZFxuICAgKiBjb25zdGFudCBpZiBnZXRWYWx1ZSBhbHdheXMgcmV0dXJucyB0aGUgc2FtZSByZXN1bHQgZm9yIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBtZW1iZXJvZiBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaXNDb25zdGFudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ludGVydmFscy5pc0VtcHR5O1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuZXZlciB0aGUgZGVmaW5pdGlvbiBvZiB0aGlzIHByb3BlcnR5IGNoYW5nZXMuXG4gICAqIFRoZSBkZWZpbml0aW9uIGlzIGNvbnNpZGVyZWQgdG8gaGF2ZSBjaGFuZ2VkIGlmIGEgY2FsbCB0byBnZXRWYWx1ZSB3b3VsZCByZXR1cm5cbiAgICogYSBkaWZmZXJlbnQgcmVzdWx0IGZvciB0aGUgc2FtZSB0aW1lLlxuICAgKiBAbWVtYmVyb2YgVGltZUludGVydmFsQ29sbGVjdGlvblBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBkZWZpbml0aW9uQ2hhbmdlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbnRlcnZhbCBjb2xsZWN0aW9uLlxuICAgKiBAbWVtYmVyb2YgVGltZUludGVydmFsQ29sbGVjdGlvblBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtUaW1lSW50ZXJ2YWxDb2xsZWN0aW9ufVxuICAgKi9cbiAgaW50ZXJ2YWxzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faW50ZXJ2YWxzO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWZlcmVuY2UgZnJhbWUgaW4gd2hpY2ggdGhlIHBvc2l0aW9uIGlzIGRlZmluZWQuXG4gICAqIEBtZW1iZXJvZiBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge1JlZmVyZW5jZUZyYW1lfVxuICAgKiBAZGVmYXVsdCBSZWZlcmVuY2VGcmFtZS5GSVhFRDtcbiAgICovXG4gIHJlZmVyZW5jZUZyYW1lOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVmZXJlbmNlRnJhbWU7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBhdCB0aGUgcHJvdmlkZWQgdGltZSBpbiB0aGUgZml4ZWQgZnJhbWUuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSB0aW1lIGZvciB3aGljaCB0byByZXRyaWV2ZSB0aGUgdmFsdWUuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3VsdF0gVGhlIG9iamVjdCB0byBzdG9yZSB0aGUgdmFsdWUgaW50bywgaWYgb21pdHRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbW9kaWZpZWQgcmVzdWx0IHBhcmFtZXRlciBvciBhIG5ldyBpbnN0YW5jZSBpZiB0aGUgcmVzdWx0IHBhcmFtZXRlciB3YXMgbm90IHN1cHBsaWVkLlxuICovXG5UaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoXG4gIHRpbWUsXG4gIHJlc3VsdFxuKSB7XG4gIHJldHVybiB0aGlzLmdldFZhbHVlSW5SZWZlcmVuY2VGcmFtZSh0aW1lLCBSZWZlcmVuY2VGcmFtZS5GSVhFRCwgcmVzdWx0KTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IGF0IHRoZSBwcm92aWRlZCB0aW1lIGFuZCBpbiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlIGZyYW1lLlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIHZhbHVlLlxuICogQHBhcmFtIHtSZWZlcmVuY2VGcmFtZX0gcmVmZXJlbmNlRnJhbWUgVGhlIGRlc2lyZWQgcmVmZXJlbmNlRnJhbWUgb2YgdGhlIHJlc3VsdC5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gW3Jlc3VsdF0gVGhlIG9iamVjdCB0byBzdG9yZSB0aGUgdmFsdWUgaW50bywgaWYgb21pdHRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuM30gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgaW5zdGFuY2UgaWYgdGhlIHJlc3VsdCBwYXJhbWV0ZXIgd2FzIG5vdCBzdXBwbGllZC5cbiAqL1xuVGltZUludGVydmFsQ29sbGVjdGlvblBvc2l0aW9uUHJvcGVydHkucHJvdG90eXBlLmdldFZhbHVlSW5SZWZlcmVuY2VGcmFtZSA9IGZ1bmN0aW9uIChcbiAgdGltZSxcbiAgcmVmZXJlbmNlRnJhbWUsXG4gIHJlc3VsdFxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh0aW1lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInRpbWUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChyZWZlcmVuY2VGcmFtZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJyZWZlcmVuY2VGcmFtZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHBvc2l0aW9uID0gdGhpcy5faW50ZXJ2YWxzLmZpbmREYXRhRm9ySW50ZXJ2YWxDb250YWluaW5nRGF0ZSh0aW1lKTtcbiAgaWYgKGRlZmluZWQocG9zaXRpb24pKSB7XG4gICAgcmV0dXJuIFBvc2l0aW9uUHJvcGVydHkuY29udmVydFRvUmVmZXJlbmNlRnJhbWUoXG4gICAgICB0aW1lLFxuICAgICAgcG9zaXRpb24sXG4gICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZSxcbiAgICAgIHJlZmVyZW5jZUZyYW1lLFxuICAgICAgcmVzdWx0XG4gICAgKTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0aGlzIHByb3BlcnR5IHRvIHRoZSBwcm92aWRlZCBwcm9wZXJ0eSBhbmQgcmV0dXJuc1xuICogPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhleSBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtQcm9wZXJ0eX0gW290aGVyXSBUaGUgb3RoZXIgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgbGVmdCBhbmQgcmlnaHQgYXJlIGVxdWFsLCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICovXG5UaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIHJldHVybiAoXG4gICAgdGhpcyA9PT0gb3RoZXIgfHwgLy9cbiAgICAob3RoZXIgaW5zdGFuY2VvZiBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUG9zaXRpb25Qcm9wZXJ0eSAmJiAvL1xuICAgICAgdGhpcy5faW50ZXJ2YWxzLmVxdWFscyhvdGhlci5faW50ZXJ2YWxzLCBQcm9wZXJ0eS5lcXVhbHMpICYmIC8vXG4gICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZSA9PT0gb3RoZXIuX3JlZmVyZW5jZUZyYW1lKVxuICApO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5UaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUG9zaXRpb25Qcm9wZXJ0eS5wcm90b3R5cGUuX2ludGVydmFsc0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgVGltZUludGVydmFsQ29sbGVjdGlvblBvc2l0aW9uUHJvcGVydHk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4129\n')},36811:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(14459);\n/* harmony import */ var _Core_TimeIntervalCollection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46026);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40112);\n\n\n\n\n\n\n/**\n * A {@link Property} which is defined by a {@link TimeIntervalCollection}, where the\n * data property of each {@link TimeInterval} represents the value at time.\n *\n * @alias TimeIntervalCollectionProperty\n * @constructor\n *\n * @example\n * //Create a Cartesian2 interval property which contains data on August 1st, 2012\n * //and uses a different value every 6 hours.\n * var composite = new Cesium.TimeIntervalCollectionProperty();\n * composite.intervals.addInterval(Cesium.TimeInterval.fromIso8601({\n *     iso8601 : \'2012-08-01T00:00:00.00Z/2012-08-01T06:00:00.00Z\',\n *     isStartIncluded : true,\n *     isStopIncluded : false,\n *     data : new Cesium.Cartesian2(2.0, 3.4)\n * }));\n * composite.intervals.addInterval(Cesium.TimeInterval.fromIso8601({\n *     iso8601 : \'2012-08-01T06:00:00.00Z/2012-08-01T12:00:00.00Z\',\n *     isStartIncluded : true,\n *     isStopIncluded : false,\n *     data : new Cesium.Cartesian2(12.0, 2.7)\n * }));\n * composite.intervals.addInterval(Cesium.TimeInterval.fromIso8601({\n *     iso8601 : \'2012-08-01T12:00:00.00Z/2012-08-01T18:00:00.00Z\',\n *     isStartIncluded : true,\n *     isStopIncluded : false,\n *     data : new Cesium.Cartesian2(5.0, 12.4)\n * }));\n * composite.intervals.addInterval(Cesium.TimeInterval.fromIso8601({\n *     iso8601 : \'2012-08-01T18:00:00.00Z/2012-08-02T00:00:00.00Z\',\n *     isStartIncluded : true,\n *     isStopIncluded : true,\n *     data : new Cesium.Cartesian2(85.0, 4.1)\n * }));\n */\nfunction TimeIntervalCollectionProperty() {\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  this._intervals = new _Core_TimeIntervalCollection_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._intervals.changedEvent.addEventListener(\n    TimeIntervalCollectionProperty.prototype._intervalsChanged,\n    this\n  );\n}\n\nObject.defineProperties(TimeIntervalCollectionProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.  A property is considered\n   * constant if getValue always returns the same result for the current definition.\n   * @memberof TimeIntervalCollectionProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return this._intervals.isEmpty;\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * The definition is changed whenever setValue is called with data different\n   * than the current value.\n   * @memberof TimeIntervalCollectionProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n  /**\n   * Gets the interval collection.\n   * @memberof TimeIntervalCollectionProperty.prototype\n   *\n   * @type {TimeIntervalCollection}\n   */\n  intervals: {\n    get: function () {\n      return this._intervals;\n    },\n  },\n});\n\n/**\n * Gets the value of the property at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {Object} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Object} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nTimeIntervalCollectionProperty.prototype.getValue = function (time, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(time)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z("time is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  var value = this._intervals.findDataForIntervalContainingDate(time);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(value) && typeof value.clone === "function") {\n    return value.clone(result);\n  }\n  return value;\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nTimeIntervalCollectionProperty.prototype.equals = function (other) {\n  return (\n    this === other || //\n    (other instanceof TimeIntervalCollectionProperty && //\n      this._intervals.equals(other._intervals, _Property_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].equals */ .Z.equals))\n  );\n};\n\n/**\n * @private\n */\nTimeIntervalCollectionProperty.prototype._intervalsChanged = function () {\n  this._definitionChanged.raiseEvent(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (TimeIntervalCollectionProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzY4MTEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUM7QUFDYztBQUNsQjtBQUNrQztBQUNsQzs7QUFFckM7QUFDQSxNQUFNLGdCQUFnQix1QkFBdUIsNkJBQTZCO0FBQzFFLDBCQUEwQixvQkFBb0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGdDQUFnQywrREFBSztBQUNyQyx3QkFBd0IsZ0ZBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxPQUFPLHFFQUFPO0FBQ2QsY0FBYyx3RUFBYztBQUM1QjtBQUNBOztBQUVBO0FBQ0EsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDJFQUFlO0FBQzlEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsOEJBQThCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5LmpzPzY0MGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uIGZyb20gXCIuLi9Db3JlL1RpbWVJbnRlcnZhbENvbGxlY3Rpb24uanNcIjtcbmltcG9ydCBQcm9wZXJ0eSBmcm9tIFwiLi9Qcm9wZXJ0eS5qc1wiO1xuXG4vKipcbiAqIEEge0BsaW5rIFByb3BlcnR5fSB3aGljaCBpcyBkZWZpbmVkIGJ5IGEge0BsaW5rIFRpbWVJbnRlcnZhbENvbGxlY3Rpb259LCB3aGVyZSB0aGVcbiAqIGRhdGEgcHJvcGVydHkgb2YgZWFjaCB7QGxpbmsgVGltZUludGVydmFsfSByZXByZXNlbnRzIHRoZSB2YWx1ZSBhdCB0aW1lLlxuICpcbiAqIEBhbGlhcyBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUHJvcGVydHlcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBleGFtcGxlXG4gKiAvL0NyZWF0ZSBhIENhcnRlc2lhbjIgaW50ZXJ2YWwgcHJvcGVydHkgd2hpY2ggY29udGFpbnMgZGF0YSBvbiBBdWd1c3QgMXN0LCAyMDEyXG4gKiAvL2FuZCB1c2VzIGEgZGlmZmVyZW50IHZhbHVlIGV2ZXJ5IDYgaG91cnMuXG4gKiB2YXIgY29tcG9zaXRlID0gbmV3IENlc2l1bS5UaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUHJvcGVydHkoKTtcbiAqIGNvbXBvc2l0ZS5pbnRlcnZhbHMuYWRkSW50ZXJ2YWwoQ2VzaXVtLlRpbWVJbnRlcnZhbC5mcm9tSXNvODYwMSh7XG4gKiAgICAgaXNvODYwMSA6ICcyMDEyLTA4LTAxVDAwOjAwOjAwLjAwWi8yMDEyLTA4LTAxVDA2OjAwOjAwLjAwWicsXG4gKiAgICAgaXNTdGFydEluY2x1ZGVkIDogdHJ1ZSxcbiAqICAgICBpc1N0b3BJbmNsdWRlZCA6IGZhbHNlLFxuICogICAgIGRhdGEgOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoMi4wLCAzLjQpXG4gKiB9KSk7XG4gKiBjb21wb3NpdGUuaW50ZXJ2YWxzLmFkZEludGVydmFsKENlc2l1bS5UaW1lSW50ZXJ2YWwuZnJvbUlzbzg2MDEoe1xuICogICAgIGlzbzg2MDEgOiAnMjAxMi0wOC0wMVQwNjowMDowMC4wMFovMjAxMi0wOC0wMVQxMjowMDowMC4wMFonLFxuICogICAgIGlzU3RhcnRJbmNsdWRlZCA6IHRydWUsXG4gKiAgICAgaXNTdG9wSW5jbHVkZWQgOiBmYWxzZSxcbiAqICAgICBkYXRhIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKDEyLjAsIDIuNylcbiAqIH0pKTtcbiAqIGNvbXBvc2l0ZS5pbnRlcnZhbHMuYWRkSW50ZXJ2YWwoQ2VzaXVtLlRpbWVJbnRlcnZhbC5mcm9tSXNvODYwMSh7XG4gKiAgICAgaXNvODYwMSA6ICcyMDEyLTA4LTAxVDEyOjAwOjAwLjAwWi8yMDEyLTA4LTAxVDE4OjAwOjAwLjAwWicsXG4gKiAgICAgaXNTdGFydEluY2x1ZGVkIDogdHJ1ZSxcbiAqICAgICBpc1N0b3BJbmNsdWRlZCA6IGZhbHNlLFxuICogICAgIGRhdGEgOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoNS4wLCAxMi40KVxuICogfSkpO1xuICogY29tcG9zaXRlLmludGVydmFscy5hZGRJbnRlcnZhbChDZXNpdW0uVGltZUludGVydmFsLmZyb21Jc284NjAxKHtcbiAqICAgICBpc284NjAxIDogJzIwMTItMDgtMDFUMTg6MDA6MDAuMDBaLzIwMTItMDgtMDJUMDA6MDA6MDAuMDBaJyxcbiAqICAgICBpc1N0YXJ0SW5jbHVkZWQgOiB0cnVlLFxuICogICAgIGlzU3RvcEluY2x1ZGVkIDogdHJ1ZSxcbiAqICAgICBkYXRhIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKDg1LjAsIDQuMSlcbiAqIH0pKTtcbiAqL1xuZnVuY3Rpb24gVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5KCkge1xuICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9pbnRlcnZhbHMgPSBuZXcgVGltZUludGVydmFsQ29sbGVjdGlvbigpO1xuICB0aGlzLl9pbnRlcnZhbHMuY2hhbmdlZEV2ZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5LnByb3RvdHlwZS5faW50ZXJ2YWxzQ2hhbmdlZCxcbiAgICB0aGlzXG4gICk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRpbWVJbnRlcnZhbENvbGxlY3Rpb25Qcm9wZXJ0eS5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoaXMgcHJvcGVydHkgaXMgY29uc3RhbnQuICBBIHByb3BlcnR5IGlzIGNvbnNpZGVyZWRcbiAgICogY29uc3RhbnQgaWYgZ2V0VmFsdWUgYWx3YXlzIHJldHVybnMgdGhlIHNhbWUgcmVzdWx0IGZvciB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAbWVtYmVyb2YgVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpc0NvbnN0YW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faW50ZXJ2YWxzLmlzRW1wdHk7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW5ldmVyIHRoZSBkZWZpbml0aW9uIG9mIHRoaXMgcHJvcGVydHkgY2hhbmdlcy5cbiAgICogVGhlIGRlZmluaXRpb24gaXMgY2hhbmdlZCB3aGVuZXZlciBzZXRWYWx1ZSBpcyBjYWxsZWQgd2l0aCBkYXRhIGRpZmZlcmVudFxuICAgKiB0aGFuIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgKiBAbWVtYmVyb2YgVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZGVmaW5pdGlvbkNoYW5nZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZDtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgaW50ZXJ2YWwgY29sbGVjdGlvbi5cbiAgICogQG1lbWJlcm9mIFRpbWVJbnRlcnZhbENvbGxlY3Rpb25Qcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1RpbWVJbnRlcnZhbENvbGxlY3Rpb259XG4gICAqL1xuICBpbnRlcnZhbHM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnZhbHM7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHRpbWUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzdWx0XSBUaGUgb2JqZWN0IHRvIHN0b3JlIHRoZSB2YWx1ZSBpbnRvLCBpZiBvbWl0dGVkLCBhIG5ldyBpbnN0YW5jZSBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBtb2RpZmllZCByZXN1bHQgcGFyYW1ldGVyIG9yIGEgbmV3IGluc3RhbmNlIGlmIHRoZSByZXN1bHQgcGFyYW1ldGVyIHdhcyBub3Qgc3VwcGxpZWQuXG4gKi9cblRpbWVJbnRlcnZhbENvbGxlY3Rpb25Qcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAodGltZSwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh0aW1lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInRpbWUgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHZhbHVlID0gdGhpcy5faW50ZXJ2YWxzLmZpbmREYXRhRm9ySW50ZXJ2YWxDb250YWluaW5nRGF0ZSh0aW1lKTtcbiAgaWYgKGRlZmluZWQodmFsdWUpICYmIHR5cGVvZiB2YWx1ZS5jbG9uZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHZhbHVlLmNsb25lKHJlc3VsdCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0aGlzIHByb3BlcnR5IHRvIHRoZSBwcm92aWRlZCBwcm9wZXJ0eSBhbmQgcmV0dXJuc1xuICogPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhleSBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtQcm9wZXJ0eX0gW290aGVyXSBUaGUgb3RoZXIgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgbGVmdCBhbmQgcmlnaHQgYXJlIGVxdWFsLCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICovXG5UaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUHJvcGVydHkucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICByZXR1cm4gKFxuICAgIHRoaXMgPT09IG90aGVyIHx8IC8vXG4gICAgKG90aGVyIGluc3RhbmNlb2YgVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5ICYmIC8vXG4gICAgICB0aGlzLl9pbnRlcnZhbHMuZXF1YWxzKG90aGVyLl9pbnRlcnZhbHMsIFByb3BlcnR5LmVxdWFscykpXG4gICk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblRpbWVJbnRlcnZhbENvbGxlY3Rpb25Qcm9wZXJ0eS5wcm90b3R5cGUuX2ludGVydmFsc0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///36811\n')},1435:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50491);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14459);\n/* harmony import */ var _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(68201);\n/* harmony import */ var _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87811);\n/* harmony import */ var _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(95555);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(40112);\n/* harmony import */ var _VelocityVectorProperty_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(39671);\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A {@link Property} which evaluates to a {@link Quaternion} rotation\n * based on the velocity of the provided {@link PositionProperty}.\n *\n * @alias VelocityOrientationProperty\n * @constructor\n *\n * @param {PositionProperty} [position] The position property used to compute the orientation.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid used to determine which way is up.\n *\n * @example\n * //Create an entity with position and orientation.\n * var position = new Cesium.SampledProperty();\n * position.addSamples(...);\n * var entity = viewer.entities.add({\n *   position : position,\n *   orientation : new Cesium.VelocityOrientationProperty(position)\n * }));\n */\nfunction VelocityOrientationProperty(position, ellipsoid) {\n  this._velocityVectorProperty = new _VelocityVectorProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(position, true);\n  this._subscription = undefined;\n  this._ellipsoid = undefined;\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n  this.ellipsoid = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(ellipsoid, _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].WGS84 */ .Z.WGS84);\n\n  var that = this;\n  this._velocityVectorProperty.definitionChanged.addEventListener(function () {\n    that._definitionChanged.raiseEvent(that);\n  });\n}\n\nObject.defineProperties(VelocityOrientationProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.\n   * @memberof VelocityOrientationProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return _Property_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].isConstant */ .Z.isConstant(this._velocityVectorProperty);\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * @memberof VelocityOrientationProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n  /**\n   * Gets or sets the position property used to compute orientation.\n   * @memberof VelocityOrientationProperty.prototype\n   *\n   * @type {Property|undefined}\n   */\n  position: {\n    get: function () {\n      return this._velocityVectorProperty.position;\n    },\n    set: function (value) {\n      this._velocityVectorProperty.position = value;\n    },\n  },\n  /**\n   * Gets or sets the ellipsoid used to determine which way is up.\n   * @memberof VelocityOrientationProperty.prototype\n   *\n   * @type {Property|undefined}\n   */\n  ellipsoid: {\n    get: function () {\n      return this._ellipsoid;\n    },\n    set: function (value) {\n      var oldValue = this._ellipsoid;\n      if (oldValue !== value) {\n        this._ellipsoid = value;\n        this._definitionChanged.raiseEvent(this);\n      }\n    },\n  },\n});\n\nvar positionScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar velocityScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar rotationScratch = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\n/**\n * Gets the value of the property at the provided time.\n *\n * @param {JulianDate} [time] The time for which to retrieve the value.\n * @param {Quaternion} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Quaternion} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nVelocityOrientationProperty.prototype.getValue = function (time, result) {\n  var velocity = this._velocityVectorProperty._getValue(\n    time,\n    velocityScratch,\n    positionScratch\n  );\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(velocity)) {\n    return undefined;\n  }\n\n  _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].rotationMatrixFromPositionVelocity */ .Z.rotationMatrixFromPositionVelocity(\n    positionScratch,\n    velocity,\n    this._ellipsoid,\n    rotationScratch\n  );\n  return _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].fromRotationMatrix */ .Z.fromRotationMatrix(rotationScratch, result);\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nVelocityOrientationProperty.prototype.equals = function (other) {\n  return (\n    this === other || //\n    (other instanceof VelocityOrientationProperty &&\n      _Property_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].equals */ .Z.equals(\n        this._velocityVectorProperty,\n        other._velocityVectorProperty\n      ) &&\n      (this._ellipsoid === other._ellipsoid ||\n        this._ellipsoid.equals(other._ellipsoid)))\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (VelocityOrientationProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQzNS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStDO0FBQ0k7QUFDVjtBQUNJO0FBQ1I7QUFDSTtBQUNNO0FBQ0E7QUFDVjtBQUM0Qjs7QUFFakU7QUFDQSxNQUFNLGdCQUFnQixzQkFBc0Isa0JBQWtCO0FBQzlELDBDQUEwQyx1QkFBdUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QixXQUFXLFdBQVc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EscUNBQXFDLDJFQUFzQjtBQUMzRDtBQUNBO0FBQ0EsZ0NBQWdDLCtEQUFLOztBQUVyQyxtQkFBbUIsMEVBQVksWUFBWSwrRUFBZTs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1GQUFtQjtBQUNoQyxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRCwwQkFBMEIsb0VBQVU7QUFDcEMsMEJBQTBCLG9FQUFVO0FBQ3BDLDBCQUEwQixpRUFBTzs7QUFFakM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsWUFBWTtBQUN2QixhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTyxxRUFBTztBQUNkO0FBQ0E7O0FBRUEsRUFBRSwwSUFBNkM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMEdBQTZCO0FBQ3RDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyRUFBZTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLDJCQUEyQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL1ZlbG9jaXR5T3JpZW50YXRpb25Qcm9wZXJ0eS5qcz9lYjcwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRWxsaXBzb2lkIGZyb20gXCIuLi9Db3JlL0VsbGlwc29pZC5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgTWF0cml4MyBmcm9tIFwiLi4vQ29yZS9NYXRyaXgzLmpzXCI7XG5pbXBvcnQgUXVhdGVybmlvbiBmcm9tIFwiLi4vQ29yZS9RdWF0ZXJuaW9uLmpzXCI7XG5pbXBvcnQgVHJhbnNmb3JtcyBmcm9tIFwiLi4vQ29yZS9UcmFuc2Zvcm1zLmpzXCI7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSBcIi4vUHJvcGVydHkuanNcIjtcbmltcG9ydCBWZWxvY2l0eVZlY3RvclByb3BlcnR5IGZyb20gXCIuL1ZlbG9jaXR5VmVjdG9yUHJvcGVydHkuanNcIjtcblxuLyoqXG4gKiBBIHtAbGluayBQcm9wZXJ0eX0gd2hpY2ggZXZhbHVhdGVzIHRvIGEge0BsaW5rIFF1YXRlcm5pb259IHJvdGF0aW9uXG4gKiBiYXNlZCBvbiB0aGUgdmVsb2NpdHkgb2YgdGhlIHByb3ZpZGVkIHtAbGluayBQb3NpdGlvblByb3BlcnR5fS5cbiAqXG4gKiBAYWxpYXMgVmVsb2NpdHlPcmllbnRhdGlvblByb3BlcnR5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1Bvc2l0aW9uUHJvcGVydHl9IFtwb3NpdGlvbl0gVGhlIHBvc2l0aW9uIHByb3BlcnR5IHVzZWQgdG8gY29tcHV0ZSB0aGUgb3JpZW50YXRpb24uXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gW2VsbGlwc29pZD1FbGxpcHNvaWQuV0dTODRdIFRoZSBlbGxpcHNvaWQgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggd2F5IGlzIHVwLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvL0NyZWF0ZSBhbiBlbnRpdHkgd2l0aCBwb3NpdGlvbiBhbmQgb3JpZW50YXRpb24uXG4gKiB2YXIgcG9zaXRpb24gPSBuZXcgQ2VzaXVtLlNhbXBsZWRQcm9wZXJ0eSgpO1xuICogcG9zaXRpb24uYWRkU2FtcGxlcyguLi4pO1xuICogdmFyIGVudGl0eSA9IHZpZXdlci5lbnRpdGllcy5hZGQoe1xuICogICBwb3NpdGlvbiA6IHBvc2l0aW9uLFxuICogICBvcmllbnRhdGlvbiA6IG5ldyBDZXNpdW0uVmVsb2NpdHlPcmllbnRhdGlvblByb3BlcnR5KHBvc2l0aW9uKVxuICogfSkpO1xuICovXG5mdW5jdGlvbiBWZWxvY2l0eU9yaWVudGF0aW9uUHJvcGVydHkocG9zaXRpb24sIGVsbGlwc29pZCkge1xuICB0aGlzLl92ZWxvY2l0eVZlY3RvclByb3BlcnR5ID0gbmV3IFZlbG9jaXR5VmVjdG9yUHJvcGVydHkocG9zaXRpb24sIHRydWUpO1xuICB0aGlzLl9zdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2VsbGlwc29pZCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQgPSBuZXcgRXZlbnQoKTtcblxuICB0aGlzLmVsbGlwc29pZCA9IGRlZmF1bHRWYWx1ZShlbGxpcHNvaWQsIEVsbGlwc29pZC5XR1M4NCk7XG5cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB0aGlzLl92ZWxvY2l0eVZlY3RvclByb3BlcnR5LmRlZmluaXRpb25DaGFuZ2VkLmFkZEV2ZW50TGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuICAgIHRoYXQuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhhdCk7XG4gIH0pO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhWZWxvY2l0eU9yaWVudGF0aW9uUHJvcGVydHkucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyBpZiB0aGlzIHByb3BlcnR5IGlzIGNvbnN0YW50LlxuICAgKiBAbWVtYmVyb2YgVmVsb2NpdHlPcmllbnRhdGlvblByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpc0NvbnN0YW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl92ZWxvY2l0eVZlY3RvclByb3BlcnR5KTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbmV2ZXIgdGhlIGRlZmluaXRpb24gb2YgdGhpcyBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKiBAbWVtYmVyb2YgVmVsb2NpdHlPcmllbnRhdGlvblByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZGVmaW5pdGlvbkNoYW5nZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZDtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBwb3NpdGlvbiBwcm9wZXJ0eSB1c2VkIHRvIGNvbXB1dGUgb3JpZW50YXRpb24uXG4gICAqIEBtZW1iZXJvZiBWZWxvY2l0eU9yaWVudGF0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqL1xuICBwb3NpdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZlbG9jaXR5VmVjdG9yUHJvcGVydHkucG9zaXRpb247XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fdmVsb2NpdHlWZWN0b3JQcm9wZXJ0eS5wb3NpdGlvbiA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGVsbGlwc29pZCB1c2VkIHRvIGRldGVybWluZSB3aGljaCB3YXkgaXMgdXAuXG4gICAqIEBtZW1iZXJvZiBWZWxvY2l0eU9yaWVudGF0aW9uUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqL1xuICBlbGxpcHNvaWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbGxpcHNvaWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5fZWxsaXBzb2lkO1xuICAgICAgaWYgKG9sZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9lbGxpcHNvaWQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQucmFpc2VFdmVudCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxufSk7XG5cbnZhciBwb3NpdGlvblNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHZlbG9jaXR5U2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcm90YXRpb25TY3JhdGNoID0gbmV3IE1hdHJpeDMoKTtcblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgYXQgdGhlIHByb3ZpZGVkIHRpbWUuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSBbdGltZV0gVGhlIHRpbWUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSB7UXVhdGVybmlvbn0gW3Jlc3VsdF0gVGhlIG9iamVjdCB0byBzdG9yZSB0aGUgdmFsdWUgaW50bywgaWYgb21pdHRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7UXVhdGVybmlvbn0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgaW5zdGFuY2UgaWYgdGhlIHJlc3VsdCBwYXJhbWV0ZXIgd2FzIG5vdCBzdXBwbGllZC5cbiAqL1xuVmVsb2NpdHlPcmllbnRhdGlvblByb3BlcnR5LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh0aW1lLCByZXN1bHQpIHtcbiAgdmFyIHZlbG9jaXR5ID0gdGhpcy5fdmVsb2NpdHlWZWN0b3JQcm9wZXJ0eS5fZ2V0VmFsdWUoXG4gICAgdGltZSxcbiAgICB2ZWxvY2l0eVNjcmF0Y2gsXG4gICAgcG9zaXRpb25TY3JhdGNoXG4gICk7XG5cbiAgaWYgKCFkZWZpbmVkKHZlbG9jaXR5KSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBUcmFuc2Zvcm1zLnJvdGF0aW9uTWF0cml4RnJvbVBvc2l0aW9uVmVsb2NpdHkoXG4gICAgcG9zaXRpb25TY3JhdGNoLFxuICAgIHZlbG9jaXR5LFxuICAgIHRoaXMuX2VsbGlwc29pZCxcbiAgICByb3RhdGlvblNjcmF0Y2hcbiAgKTtcbiAgcmV0dXJuIFF1YXRlcm5pb24uZnJvbVJvdGF0aW9uTWF0cml4KHJvdGF0aW9uU2NyYXRjaCwgcmVzdWx0KTtcbn07XG5cbi8qKlxuICogQ29tcGFyZXMgdGhpcyBwcm9wZXJ0eSB0byB0aGUgcHJvdmlkZWQgcHJvcGVydHkgYW5kIHJldHVybnNcbiAqIDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZXkgYXJlIGVxdWFsLCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7UHJvcGVydHl9IFtvdGhlcl0gVGhlIG90aGVyIHByb3BlcnR5LlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIGxlZnQgYW5kIHJpZ2h0IGFyZSBlcXVhbCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqL1xuVmVsb2NpdHlPcmllbnRhdGlvblByb3BlcnR5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgcmV0dXJuIChcbiAgICB0aGlzID09PSBvdGhlciB8fCAvL1xuICAgIChvdGhlciBpbnN0YW5jZW9mIFZlbG9jaXR5T3JpZW50YXRpb25Qcm9wZXJ0eSAmJlxuICAgICAgUHJvcGVydHkuZXF1YWxzKFxuICAgICAgICB0aGlzLl92ZWxvY2l0eVZlY3RvclByb3BlcnR5LFxuICAgICAgICBvdGhlci5fdmVsb2NpdHlWZWN0b3JQcm9wZXJ0eVxuICAgICAgKSAmJlxuICAgICAgKHRoaXMuX2VsbGlwc29pZCA9PT0gb3RoZXIuX2VsbGlwc29pZCB8fFxuICAgICAgICB0aGlzLl9lbGxpcHNvaWQuZXF1YWxzKG90aGVyLl9lbGxpcHNvaWQpKSlcbiAgKTtcbn07XG5leHBvcnQgZGVmYXVsdCBWZWxvY2l0eU9yaWVudGF0aW9uUHJvcGVydHk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1435\n')},39671:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14459);\n/* harmony import */ var _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(55293);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n/**\n * A {@link Property} which evaluates to a {@link Cartesian3} vector\n * based on the velocity of the provided {@link PositionProperty}.\n *\n * @alias VelocityVectorProperty\n * @constructor\n *\n * @param {PositionProperty} [position] The position property used to compute the velocity.\n * @param {Boolean} [normalize=true] Whether to normalize the computed velocity vector.\n *\n * @example\n * //Create an entity with a billboard rotated to match its velocity.\n * var position = new Cesium.SampledProperty();\n * position.addSamples(...);\n * var entity = viewer.entities.add({\n *   position : position,\n *   billboard : {\n *     image : \'image.png\',\n *     alignedAxis : new Cesium.VelocityVectorProperty(position, true) // alignedAxis must be a unit vector\n *   }\n * }));\n */\nfunction VelocityVectorProperty(position, normalize) {\n  this._position = undefined;\n  this._subscription = undefined;\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n  this._normalize = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(normalize, true);\n\n  this.position = position;\n}\n\nObject.defineProperties(VelocityVectorProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.\n   * @memberof VelocityVectorProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._position);\n    },\n  },\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * @memberof VelocityVectorProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n  /**\n   * Gets or sets the position property used to compute the velocity vector.\n   * @memberof VelocityVectorProperty.prototype\n   *\n   * @type {Property|undefined}\n   */\n  position: {\n    get: function () {\n      return this._position;\n    },\n    set: function (value) {\n      var oldValue = this._position;\n      if (oldValue !== value) {\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(oldValue)) {\n          this._subscription();\n        }\n\n        this._position = value;\n\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(value)) {\n          this._subscription = value._definitionChanged.addEventListener(\n            function () {\n              this._definitionChanged.raiseEvent(this);\n            },\n            this\n          );\n        }\n\n        this._definitionChanged.raiseEvent(this);\n      }\n    },\n  },\n  /**\n   * Gets or sets whether the vector produced by this property\n   * will be normalized or not.\n   * @memberof VelocityVectorProperty.prototype\n   *\n   * @type {Boolean}\n   */\n  normalize: {\n    get: function () {\n      return this._normalize;\n    },\n    set: function (value) {\n      if (this._normalize === value) {\n        return;\n      }\n\n      this._normalize = value;\n      this._definitionChanged.raiseEvent(this);\n    },\n  },\n});\n\nvar position1Scratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar position2Scratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\nvar timeScratch = new _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar step = 1.0 / 60.0;\n\n/**\n * Gets the value of the property at the provided time.\n *\n * @param {JulianDate} [time] The time for which to retrieve the value.\n * @param {Cartesian3} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Cartesian3} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nVelocityVectorProperty.prototype.getValue = function (time, result) {\n  return this._getValue(time, result);\n};\n\n/**\n * @private\n */\nVelocityVectorProperty.prototype._getValue = function (\n  time,\n  velocityResult,\n  positionResult\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(time)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("time is required");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(velocityResult)) {\n    velocityResult = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  }\n\n  var property = this._position;\n  if (_Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(property)) {\n    return this._normalize\n      ? undefined\n      : _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO, velocityResult);\n  }\n\n  var position1 = property.getValue(time, position1Scratch);\n  var position2 = property.getValue(\n    _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].addSeconds */ .Z.addSeconds(time, step, timeScratch),\n    position2Scratch\n  );\n\n  //If we don\'t have a position for now, return undefined.\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(position1)) {\n    return undefined;\n  }\n\n  //If we don\'t have a position for now + step, see if we have a position for now - step.\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(position2)) {\n    position2 = position1;\n    position1 = property.getValue(\n      _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].addSeconds */ .Z.addSeconds(time, -step, timeScratch),\n      position2Scratch\n    );\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(position1)) {\n      return undefined;\n    }\n  }\n\n  if (_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equals */ .Z.equals(position1, position2)) {\n    return this._normalize\n      ? undefined\n      : _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO, velocityResult);\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(positionResult)) {\n    position1.clone(positionResult);\n  }\n\n  var velocity = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].subtract */ .Z.subtract(position2, position1, velocityResult);\n  if (this._normalize) {\n    return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].normalize */ .Z.normalize(velocity, velocityResult);\n  }\n\n  return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].divideByScalar */ .Z.divideByScalar(velocity, step, velocityResult);\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nVelocityVectorProperty.prototype.equals = function (other) {\n  return (\n    this === other || //\n    (other instanceof VelocityVectorProperty &&\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._position, other._position))\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (VelocityVectorProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk2NzEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNJO0FBQ1Y7QUFDYztBQUNsQjtBQUNVO0FBQ1Y7O0FBRXJDO0FBQ0EsTUFBTSxnQkFBZ0Isc0JBQXNCLGtCQUFrQjtBQUM5RCwwQ0FBMEMsdUJBQXVCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0IsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0RBQUs7QUFDckMsb0JBQW9CLDBFQUFZOztBQUVoQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1GQUFtQjtBQUNoQyxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUVBQU87QUFDbkI7QUFDQTs7QUFFQTs7QUFFQSxZQUFZLHFFQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVELDJCQUEyQixvRUFBVTtBQUNyQywyQkFBMkIsb0VBQVU7QUFDckMsc0JBQXNCLG9FQUFVO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLFlBQVk7QUFDdkIsYUFBYSxZQUFZO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8scUVBQU87QUFDZCxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7O0FBRUEsT0FBTyxxRUFBTztBQUNkLHlCQUF5QixvRUFBVTtBQUNuQzs7QUFFQTtBQUNBLE1BQU0sbUZBQW1CO0FBQ3pCO0FBQ0E7QUFDQSxRQUFRLGdGQUFnQixDQUFDLDhFQUFlO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQSxJQUFJLDBGQUFxQjtBQUN6QjtBQUNBOztBQUVBO0FBQ0EsT0FBTyxxRUFBTztBQUNkO0FBQ0E7O0FBRUE7QUFDQSxPQUFPLHFFQUFPO0FBQ2Q7QUFDQTtBQUNBLE1BQU0sMEZBQXFCO0FBQzNCO0FBQ0E7O0FBRUEsU0FBUyxxRUFBTztBQUNoQjtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxrRkFBaUI7QUFDdkI7QUFDQTtBQUNBLFFBQVEsZ0ZBQWdCLENBQUMsOEVBQWU7QUFDeEM7O0FBRUEsTUFBTSxxRUFBTztBQUNiO0FBQ0E7O0FBRUEsaUJBQWlCLHNGQUFtQjtBQUNwQztBQUNBLFdBQVcsd0ZBQW9CO0FBQy9COztBQUVBLFNBQVMsa0dBQXlCO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyRUFBZTtBQUNyQjtBQUNBO0FBQ0EseURBQWUsc0JBQXNCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvVmVsb2NpdHlWZWN0b3JQcm9wZXJ0eS5qcz81MWJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFdmVudCBmcm9tIFwiLi4vQ29yZS9FdmVudC5qc1wiO1xuaW1wb3J0IEp1bGlhbkRhdGUgZnJvbSBcIi4uL0NvcmUvSnVsaWFuRGF0ZS5qc1wiO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gXCIuL1Byb3BlcnR5LmpzXCI7XG5cbi8qKlxuICogQSB7QGxpbmsgUHJvcGVydHl9IHdoaWNoIGV2YWx1YXRlcyB0byBhIHtAbGluayBDYXJ0ZXNpYW4zfSB2ZWN0b3JcbiAqIGJhc2VkIG9uIHRoZSB2ZWxvY2l0eSBvZiB0aGUgcHJvdmlkZWQge0BsaW5rIFBvc2l0aW9uUHJvcGVydHl9LlxuICpcbiAqIEBhbGlhcyBWZWxvY2l0eVZlY3RvclByb3BlcnR5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1Bvc2l0aW9uUHJvcGVydHl9IFtwb3NpdGlvbl0gVGhlIHBvc2l0aW9uIHByb3BlcnR5IHVzZWQgdG8gY29tcHV0ZSB0aGUgdmVsb2NpdHkuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtub3JtYWxpemU9dHJ1ZV0gV2hldGhlciB0byBub3JtYWxpemUgdGhlIGNvbXB1dGVkIHZlbG9jaXR5IHZlY3Rvci5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy9DcmVhdGUgYW4gZW50aXR5IHdpdGggYSBiaWxsYm9hcmQgcm90YXRlZCB0byBtYXRjaCBpdHMgdmVsb2NpdHkuXG4gKiB2YXIgcG9zaXRpb24gPSBuZXcgQ2VzaXVtLlNhbXBsZWRQcm9wZXJ0eSgpO1xuICogcG9zaXRpb24uYWRkU2FtcGxlcyguLi4pO1xuICogdmFyIGVudGl0eSA9IHZpZXdlci5lbnRpdGllcy5hZGQoe1xuICogICBwb3NpdGlvbiA6IHBvc2l0aW9uLFxuICogICBiaWxsYm9hcmQgOiB7XG4gKiAgICAgaW1hZ2UgOiAnaW1hZ2UucG5nJyxcbiAqICAgICBhbGlnbmVkQXhpcyA6IG5ldyBDZXNpdW0uVmVsb2NpdHlWZWN0b3JQcm9wZXJ0eShwb3NpdGlvbiwgdHJ1ZSkgLy8gYWxpZ25lZEF4aXMgbXVzdCBiZSBhIHVuaXQgdmVjdG9yXG4gKiAgIH1cbiAqIH0pKTtcbiAqL1xuZnVuY3Rpb24gVmVsb2NpdHlWZWN0b3JQcm9wZXJ0eShwb3NpdGlvbiwgbm9ybWFsaXplKSB7XG4gIHRoaXMuX3Bvc2l0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkID0gbmV3IEV2ZW50KCk7XG4gIHRoaXMuX25vcm1hbGl6ZSA9IGRlZmF1bHRWYWx1ZShub3JtYWxpemUsIHRydWUpO1xuXG4gIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVmVsb2NpdHlWZWN0b3JQcm9wZXJ0eS5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoaXMgcHJvcGVydHkgaXMgY29uc3RhbnQuXG4gICAqIEBtZW1iZXJvZiBWZWxvY2l0eVZlY3RvclByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpc0NvbnN0YW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl9wb3NpdGlvbik7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW5ldmVyIHRoZSBkZWZpbml0aW9uIG9mIHRoaXMgcHJvcGVydHkgY2hhbmdlcy5cbiAgICogQG1lbWJlcm9mIFZlbG9jaXR5VmVjdG9yUHJvcGVydHkucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBkZWZpbml0aW9uQ2hhbmdlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHBvc2l0aW9uIHByb3BlcnR5IHVzZWQgdG8gY29tcHV0ZSB0aGUgdmVsb2NpdHkgdmVjdG9yLlxuICAgKiBAbWVtYmVyb2YgVmVsb2NpdHlWZWN0b3JQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1Byb3BlcnR5fHVuZGVmaW5lZH1cbiAgICovXG4gIHBvc2l0aW9uOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5fcG9zaXRpb247XG4gICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIGlmIChkZWZpbmVkKG9sZFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB2YWx1ZTtcblxuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb24gPSB2YWx1ZS5fZGVmaW5pdGlvbkNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQucmFpc2VFdmVudCh0aGlzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB3aGV0aGVyIHRoZSB2ZWN0b3IgcHJvZHVjZWQgYnkgdGhpcyBwcm9wZXJ0eVxuICAgKiB3aWxsIGJlIG5vcm1hbGl6ZWQgb3Igbm90LlxuICAgKiBAbWVtYmVyb2YgVmVsb2NpdHlWZWN0b3JQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBub3JtYWxpemU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9ub3JtYWxpemU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuX25vcm1hbGl6ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9ub3JtYWxpemUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG52YXIgcG9zaXRpb24xU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcG9zaXRpb24yU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgdGltZVNjcmF0Y2ggPSBuZXcgSnVsaWFuRGF0ZSgpO1xudmFyIHN0ZXAgPSAxLjAgLyA2MC4wO1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IFt0aW1lXSBUaGUgdGltZSBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIHZhbHVlLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBbcmVzdWx0XSBUaGUgb2JqZWN0IHRvIHN0b3JlIHRoZSB2YWx1ZSBpbnRvLCBpZiBvbWl0dGVkLCBhIG5ldyBpbnN0YW5jZSBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAqIEByZXR1cm5zIHtDYXJ0ZXNpYW4zfSBUaGUgbW9kaWZpZWQgcmVzdWx0IHBhcmFtZXRlciBvciBhIG5ldyBpbnN0YW5jZSBpZiB0aGUgcmVzdWx0IHBhcmFtZXRlciB3YXMgbm90IHN1cHBsaWVkLlxuICovXG5WZWxvY2l0eVZlY3RvclByb3BlcnR5LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh0aW1lLCByZXN1bHQpIHtcbiAgcmV0dXJuIHRoaXMuX2dldFZhbHVlKHRpbWUsIHJlc3VsdCk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblZlbG9jaXR5VmVjdG9yUHJvcGVydHkucHJvdG90eXBlLl9nZXRWYWx1ZSA9IGZ1bmN0aW9uIChcbiAgdGltZSxcbiAgdmVsb2NpdHlSZXN1bHQsXG4gIHBvc2l0aW9uUmVzdWx0XG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHRpbWUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidGltZSBpcyByZXF1aXJlZFwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBpZiAoIWRlZmluZWQodmVsb2NpdHlSZXN1bHQpKSB7XG4gICAgdmVsb2NpdHlSZXN1bHQgPSBuZXcgQ2FydGVzaWFuMygpO1xuICB9XG5cbiAgdmFyIHByb3BlcnR5ID0gdGhpcy5fcG9zaXRpb247XG4gIGlmIChQcm9wZXJ0eS5pc0NvbnN0YW50KHByb3BlcnR5KSkge1xuICAgIHJldHVybiB0aGlzLl9ub3JtYWxpemVcbiAgICAgID8gdW5kZWZpbmVkXG4gICAgICA6IENhcnRlc2lhbjMuY2xvbmUoQ2FydGVzaWFuMy5aRVJPLCB2ZWxvY2l0eVJlc3VsdCk7XG4gIH1cblxuICB2YXIgcG9zaXRpb24xID0gcHJvcGVydHkuZ2V0VmFsdWUodGltZSwgcG9zaXRpb24xU2NyYXRjaCk7XG4gIHZhciBwb3NpdGlvbjIgPSBwcm9wZXJ0eS5nZXRWYWx1ZShcbiAgICBKdWxpYW5EYXRlLmFkZFNlY29uZHModGltZSwgc3RlcCwgdGltZVNjcmF0Y2gpLFxuICAgIHBvc2l0aW9uMlNjcmF0Y2hcbiAgKTtcblxuICAvL0lmIHdlIGRvbid0IGhhdmUgYSBwb3NpdGlvbiBmb3Igbm93LCByZXR1cm4gdW5kZWZpbmVkLlxuICBpZiAoIWRlZmluZWQocG9zaXRpb24xKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvL0lmIHdlIGRvbid0IGhhdmUgYSBwb3NpdGlvbiBmb3Igbm93ICsgc3RlcCwgc2VlIGlmIHdlIGhhdmUgYSBwb3NpdGlvbiBmb3Igbm93IC0gc3RlcC5cbiAgaWYgKCFkZWZpbmVkKHBvc2l0aW9uMikpIHtcbiAgICBwb3NpdGlvbjIgPSBwb3NpdGlvbjE7XG4gICAgcG9zaXRpb24xID0gcHJvcGVydHkuZ2V0VmFsdWUoXG4gICAgICBKdWxpYW5EYXRlLmFkZFNlY29uZHModGltZSwgLXN0ZXAsIHRpbWVTY3JhdGNoKSxcbiAgICAgIHBvc2l0aW9uMlNjcmF0Y2hcbiAgICApO1xuXG4gICAgaWYgKCFkZWZpbmVkKHBvc2l0aW9uMSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKENhcnRlc2lhbjMuZXF1YWxzKHBvc2l0aW9uMSwgcG9zaXRpb24yKSkge1xuICAgIHJldHVybiB0aGlzLl9ub3JtYWxpemVcbiAgICAgID8gdW5kZWZpbmVkXG4gICAgICA6IENhcnRlc2lhbjMuY2xvbmUoQ2FydGVzaWFuMy5aRVJPLCB2ZWxvY2l0eVJlc3VsdCk7XG4gIH1cblxuICBpZiAoZGVmaW5lZChwb3NpdGlvblJlc3VsdCkpIHtcbiAgICBwb3NpdGlvbjEuY2xvbmUocG9zaXRpb25SZXN1bHQpO1xuICB9XG5cbiAgdmFyIHZlbG9jaXR5ID0gQ2FydGVzaWFuMy5zdWJ0cmFjdChwb3NpdGlvbjIsIHBvc2l0aW9uMSwgdmVsb2NpdHlSZXN1bHQpO1xuICBpZiAodGhpcy5fbm9ybWFsaXplKSB7XG4gICAgcmV0dXJuIENhcnRlc2lhbjMubm9ybWFsaXplKHZlbG9jaXR5LCB2ZWxvY2l0eVJlc3VsdCk7XG4gIH1cblxuICByZXR1cm4gQ2FydGVzaWFuMy5kaXZpZGVCeVNjYWxhcih2ZWxvY2l0eSwgc3RlcCwgdmVsb2NpdHlSZXN1bHQpO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0aGlzIHByb3BlcnR5IHRvIHRoZSBwcm92aWRlZCBwcm9wZXJ0eSBhbmQgcmV0dXJuc1xuICogPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhleSBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtQcm9wZXJ0eX0gW290aGVyXSBUaGUgb3RoZXIgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgbGVmdCBhbmQgcmlnaHQgYXJlIGVxdWFsLCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICovXG5WZWxvY2l0eVZlY3RvclByb3BlcnR5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgcmV0dXJuIChcbiAgICB0aGlzID09PSBvdGhlciB8fCAvL1xuICAgIChvdGhlciBpbnN0YW5jZW9mIFZlbG9jaXR5VmVjdG9yUHJvcGVydHkgJiZcbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9wb3NpdGlvbiwgb3RoZXIuX3Bvc2l0aW9uKSlcbiAgKTtcbn07XG5leHBvcnQgZGVmYXVsdCBWZWxvY2l0eVZlY3RvclByb3BlcnR5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///39671\n')},95741:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n\n\n/**\n * Defines the interface for visualizers. Visualizers are plug-ins to\n * {@link DataSourceDisplay} that render data associated with\n * {@link DataSource} instances.\n * This object is an interface for documentation purposes and is not intended\n * to be instantiated directly.\n * @alias Visualizer\n * @constructor\n *\n * @see BillboardVisualizer\n * @see LabelVisualizer\n * @see ModelVisualizer\n * @see PathVisualizer\n * @see PointVisualizer\n * @see GeometryVisualizer\n */\nfunction Visualizer() {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n}\n\n/**\n * Updates the visualization to the provided time.\n * @function\n *\n * @param {JulianDate} time The time.\n *\n * @returns {Boolean} True if the display was updated to the provided time,\n * false if the visualizer is waiting for an asynchronous operation to\n * complete before data can be updated.\n */\nVisualizer.prototype.update = _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Computes a bounding sphere which encloses the visualization produced for the specified entity.\n * The bounding sphere is in the fixed frame of the scene\'s globe.\n *\n * @param {Entity} entity The entity whose bounding sphere to compute.\n * @param {BoundingSphere} result The bounding sphere onto which to store the result.\n * @returns {BoundingSphereState} BoundingSphereState.DONE if the result contains the bounding sphere,\n *                       BoundingSphereState.PENDING if the result is still being computed, or\n *                       BoundingSphereState.FAILED if the entity has no visualization in the current scene.\n * @private\n */\nVisualizer.prototype.getBoundingSphere = _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * @function\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n */\nVisualizer.prototype.isDestroyed = _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Removes all visualization and cleans up any resources associated with this instance.\n * @function\n */\nVisualizer.prototype.destroy = _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (Visualizer)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTU3NDEuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBLElBQUkseUJBQXlCO0FBQzdCLElBQUksa0JBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx3SEFBc0M7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkI7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHdIQUFzQzs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYSxxQkFBcUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsd0hBQXNDOztBQUUvRTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0EsYUFBYSxTQUFTLG1DQUFtQztBQUN6RDtBQUNBLG1DQUFtQyx3SEFBc0M7O0FBRXpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdIQUFzQztBQUNyRSxzRUFBZSwwREFBVSxJQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL1Zpc3VhbGl6ZXIuanM/OWVkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBpbnRlcmZhY2UgZm9yIHZpc3VhbGl6ZXJzLiBWaXN1YWxpemVycyBhcmUgcGx1Zy1pbnMgdG9cbiAqIHtAbGluayBEYXRhU291cmNlRGlzcGxheX0gdGhhdCByZW5kZXIgZGF0YSBhc3NvY2lhdGVkIHdpdGhcbiAqIHtAbGluayBEYXRhU291cmNlfSBpbnN0YW5jZXMuXG4gKiBUaGlzIG9iamVjdCBpcyBhbiBpbnRlcmZhY2UgZm9yIGRvY3VtZW50YXRpb24gcHVycG9zZXMgYW5kIGlzIG5vdCBpbnRlbmRlZFxuICogdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxuICogQGFsaWFzIFZpc3VhbGl6ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBzZWUgQmlsbGJvYXJkVmlzdWFsaXplclxuICogQHNlZSBMYWJlbFZpc3VhbGl6ZXJcbiAqIEBzZWUgTW9kZWxWaXN1YWxpemVyXG4gKiBAc2VlIFBhdGhWaXN1YWxpemVyXG4gKiBAc2VlIFBvaW50VmlzdWFsaXplclxuICogQHNlZSBHZW9tZXRyeVZpc3VhbGl6ZXJcbiAqL1xuZnVuY3Rpb24gVmlzdWFsaXplcigpIHtcbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IoKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSB2aXN1YWxpemF0aW9uIHRvIHRoZSBwcm92aWRlZCB0aW1lLlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSB0aW1lLlxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBkaXNwbGF5IHdhcyB1cGRhdGVkIHRvIHRoZSBwcm92aWRlZCB0aW1lLFxuICogZmFsc2UgaWYgdGhlIHZpc3VhbGl6ZXIgaXMgd2FpdGluZyBmb3IgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbiB0b1xuICogY29tcGxldGUgYmVmb3JlIGRhdGEgY2FuIGJlIHVwZGF0ZWQuXG4gKi9cblZpc3VhbGl6ZXIucHJvdG90eXBlLnVwZGF0ZSA9IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIENvbXB1dGVzIGEgYm91bmRpbmcgc3BoZXJlIHdoaWNoIGVuY2xvc2VzIHRoZSB2aXN1YWxpemF0aW9uIHByb2R1Y2VkIGZvciB0aGUgc3BlY2lmaWVkIGVudGl0eS5cbiAqIFRoZSBib3VuZGluZyBzcGhlcmUgaXMgaW4gdGhlIGZpeGVkIGZyYW1lIG9mIHRoZSBzY2VuZSdzIGdsb2JlLlxuICpcbiAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgVGhlIGVudGl0eSB3aG9zZSBib3VuZGluZyBzcGhlcmUgdG8gY29tcHV0ZS5cbiAqIEBwYXJhbSB7Qm91bmRpbmdTcGhlcmV9IHJlc3VsdCBUaGUgYm91bmRpbmcgc3BoZXJlIG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtCb3VuZGluZ1NwaGVyZVN0YXRlfSBCb3VuZGluZ1NwaGVyZVN0YXRlLkRPTkUgaWYgdGhlIHJlc3VsdCBjb250YWlucyB0aGUgYm91bmRpbmcgc3BoZXJlLFxuICogICAgICAgICAgICAgICAgICAgICAgIEJvdW5kaW5nU3BoZXJlU3RhdGUuUEVORElORyBpZiB0aGUgcmVzdWx0IGlzIHN0aWxsIGJlaW5nIGNvbXB1dGVkLCBvclxuICogICAgICAgICAgICAgICAgICAgICAgIEJvdW5kaW5nU3BoZXJlU3RhdGUuRkFJTEVEIGlmIHRoZSBlbnRpdHkgaGFzIG5vIHZpc3VhbGl6YXRpb24gaW4gdGhlIGN1cnJlbnQgc2NlbmUuXG4gKiBAcHJpdmF0ZVxuICovXG5WaXN1YWxpemVyLnByb3RvdHlwZS5nZXRCb3VuZGluZ1NwaGVyZSA9IERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICogQGZ1bmN0aW9uXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqL1xuVmlzdWFsaXplci5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcjtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCB2aXN1YWxpemF0aW9uIGFuZCBjbGVhbnMgdXAgYW55IHJlc291cmNlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAqIEBmdW5jdGlvblxuICovXG5WaXN1YWxpemVyLnByb3RvdHlwZS5kZXN0cm95ID0gRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3I7XG5leHBvcnQgZGVmYXVsdCBWaXN1YWxpemVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///95741\n')},97167:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92062);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24689);\n/* harmony import */ var _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(26865);\n/* harmony import */ var _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22841);\n/* harmony import */ var _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37939);\n/* harmony import */ var _Core_WallGeometry_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(82444);\n/* harmony import */ var _Core_WallOutlineGeometry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(81810);\n/* harmony import */ var _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(79158);\n/* harmony import */ var _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(64060);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20174);\n/* harmony import */ var _DynamicGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(84225);\n/* harmony import */ var _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(17045);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar scratchColor = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction WallGeometryOptions(entity) {\n  this.id = entity;\n  this.vertexFormat = undefined;\n  this.positions = undefined;\n  this.minimumHeights = undefined;\n  this.maximumHeights = undefined;\n  this.granularity = undefined;\n}\n\n/**\n * A {@link GeometryUpdater} for walls.\n * Clients do not normally create this class directly, but instead rely on {@link DataSourceDisplay}.\n * @alias WallGeometryUpdater\n * @constructor\n *\n * @param {Entity} entity The entity containing the geometry to be visualized.\n * @param {Scene} scene The scene where visualization is taking place.\n */\nfunction WallGeometryUpdater(entity, scene) {\n  _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].call */ .Z.call(this, {\n    entity: entity,\n    scene: scene,\n    geometryOptions: new WallGeometryOptions(entity),\n    geometryPropertyName: "wall",\n    observedPropertyNames: ["availability", "wall"],\n  });\n\n  this._onEntityPropertyChanged(entity, "wall", entity.wall, undefined);\n}\n\nif ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(Object.create)) {\n  WallGeometryUpdater.prototype = Object.create(_GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].prototype */ .Z.prototype);\n  WallGeometryUpdater.prototype.constructor = WallGeometryUpdater;\n}\n\n/**\n * Creates the geometry instance which represents the fill of the geometry.\n *\n * @param {JulianDate} time The time to use when retrieving initial attribute values.\n * @returns {GeometryInstance} The geometry instance representing the filled portion of the geometry.\n *\n * @exception {DeveloperError} This instance does not represent a filled geometry.\n */\nWallGeometryUpdater.prototype.createFillGeometryInstance = function (time) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("time", time);\n\n  if (!this._fillEnabled) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "This instance does not represent a filled geometry."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var entity = this._entity;\n  var isAvailable = entity.isAvailable(time);\n\n  var attributes;\n\n  var color;\n  var show = new _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n    isAvailable &&\n      entity.isShowing &&\n      this._showProperty.getValue(time) &&\n      this._fillProperty.getValue(time)\n  );\n  var distanceDisplayCondition = this._distanceDisplayConditionProperty.getValue(\n    time\n  );\n  var distanceDisplayConditionAttribute = _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fromDistanceDisplayCondition */ .Z.fromDistanceDisplayCondition(\n    distanceDisplayCondition\n  );\n  if (this._materialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z) {\n    var currentColor;\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(this._materialProperty.color) &&\n      (this._materialProperty.color.isConstant || isAvailable)\n    ) {\n      currentColor = this._materialProperty.color.getValue(time, scratchColor);\n    }\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(currentColor)) {\n      currentColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].WHITE */ .Z.WHITE;\n    }\n    color = _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromColor */ .Z.fromColor(currentColor);\n    attributes = {\n      show: show,\n      distanceDisplayCondition: distanceDisplayConditionAttribute,\n      color: color,\n    };\n  } else {\n    attributes = {\n      show: show,\n      distanceDisplayCondition: distanceDisplayConditionAttribute,\n    };\n  }\n\n  return new _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n    id: entity,\n    geometry: new _Core_WallGeometry_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(this._options),\n    attributes: attributes,\n  });\n};\n\n/**\n * Creates the geometry instance which represents the outline of the geometry.\n *\n * @param {JulianDate} time The time to use when retrieving initial attribute values.\n * @returns {GeometryInstance} The geometry instance representing the outline portion of the geometry.\n *\n * @exception {DeveloperError} This instance does not represent an outlined geometry.\n */\nWallGeometryUpdater.prototype.createOutlineGeometryInstance = function (time) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("time", time);\n\n  if (!this._outlineEnabled) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "This instance does not represent an outlined geometry."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var entity = this._entity;\n  var isAvailable = entity.isAvailable(time);\n  var outlineColor = _Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n    this._outlineColorProperty,\n    time,\n    _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].BLACK */ .Z.BLACK,\n    scratchColor\n  );\n  var distanceDisplayCondition = this._distanceDisplayConditionProperty.getValue(\n    time\n  );\n\n  return new _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n    id: entity,\n    geometry: new _Core_WallOutlineGeometry_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(this._options),\n    attributes: {\n      show: new _Core_ShowGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n        isAvailable &&\n          entity.isShowing &&\n          this._showProperty.getValue(time) &&\n          this._showOutlineProperty.getValue(time)\n      ),\n      color: _Core_ColorGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromColor */ .Z.fromColor(outlineColor),\n      distanceDisplayCondition: _Core_DistanceDisplayConditionGeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fromDistanceDisplayCondition */ .Z.fromDistanceDisplayCondition(\n        distanceDisplayCondition\n      ),\n    },\n  });\n};\n\nWallGeometryUpdater.prototype._isHidden = function (entity, wall) {\n  return (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(wall.positions) ||\n    _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].prototype._isHidden.call */ .Z.prototype._isHidden.call(this, entity, wall)\n  );\n};\n\nWallGeometryUpdater.prototype._getIsClosed = function (options) {\n  return false;\n};\n\nWallGeometryUpdater.prototype._isDynamic = function (entity, wall) {\n  return (\n    !wall.positions.isConstant || //\n    !_Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].isConstant */ .Z.isConstant(wall.minimumHeights) || //\n    !_Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].isConstant */ .Z.isConstant(wall.maximumHeights) || //\n    !_Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].isConstant */ .Z.isConstant(wall.outlineWidth) || //\n    !_Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].isConstant */ .Z.isConstant(wall.granularity)\n  );\n};\n\nWallGeometryUpdater.prototype._setStaticOptions = function (entity, wall) {\n  var minimumHeights = wall.minimumHeights;\n  var maximumHeights = wall.maximumHeights;\n  var granularity = wall.granularity;\n  var isColorMaterial = this._materialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z;\n\n  var options = this._options;\n  options.vertexFormat = isColorMaterial\n    ? _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].VERTEX_FORMAT */ .Z.VERTEX_FORMAT\n    : _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].MaterialSupport.TEXTURED.vertexFormat */ .Z.MaterialSupport.TEXTURED.vertexFormat;\n  options.positions = wall.positions.getValue(\n    _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE,\n    options.positions\n  );\n  options.minimumHeights = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(minimumHeights)\n    ? minimumHeights.getValue(_Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE, options.minimumHeights)\n    : undefined;\n  options.maximumHeights = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(maximumHeights)\n    ? maximumHeights.getValue(_Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE, options.maximumHeights)\n    : undefined;\n  options.granularity = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(granularity)\n    ? granularity.getValue(_Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE)\n    : undefined;\n};\n\nWallGeometryUpdater.DynamicGeometryUpdater = DynamicWallGeometryUpdater;\n\n/**\n * @private\n */\nfunction DynamicWallGeometryUpdater(\n  geometryUpdater,\n  primitives,\n  groundPrimitives\n) {\n  _DynamicGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].call */ .Z.call(\n    this,\n    geometryUpdater,\n    primitives,\n    groundPrimitives\n  );\n}\n\nif ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(Object.create)) {\n  DynamicWallGeometryUpdater.prototype = Object.create(\n    _DynamicGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].prototype */ .Z.prototype\n  );\n  DynamicWallGeometryUpdater.prototype.constructor = DynamicWallGeometryUpdater;\n}\n\nDynamicWallGeometryUpdater.prototype._isHidden = function (entity, wall, time) {\n  return (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(this._options.positions) ||\n    _DynamicGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].prototype._isHidden.call */ .Z.prototype._isHidden.call(this, entity, wall, time)\n  );\n};\n\nDynamicWallGeometryUpdater.prototype._setOptions = function (\n  entity,\n  wall,\n  time\n) {\n  var options = this._options;\n  options.positions = _Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].getValueOrUndefined */ .Z.getValueOrUndefined(\n    wall.positions,\n    time,\n    options.positions\n  );\n  options.minimumHeights = _Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].getValueOrUndefined */ .Z.getValueOrUndefined(\n    wall.minimumHeights,\n    time,\n    options.minimumHeights\n  );\n  options.maximumHeights = _Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].getValueOrUndefined */ .Z.getValueOrUndefined(\n    wall.maximumHeights,\n    time,\n    options.maximumHeights\n  );\n  options.granularity = _Property_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].getValueOrUndefined */ .Z.getValueOrUndefined(wall.granularity, time);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (WallGeometryUpdater);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0EsRUFBRSxzRkFBMkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksc0VBQU87QUFDWDtBQUNBLElBQUksZ0dBQWdDO0FBQ3BDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSyxzRUFBTztBQUNaLElBQUksOEhBQStDO0FBQ25EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNHQUE0QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzR0FBNEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0dBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNHQUE0QjtBQUNwRDtBQUNBLHlEQUFlLG1CQUFtQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL1dhbGxHZW9tZXRyeVVwZGF0ZXIuanM/OTk1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiLi4vQ29yZS9Db2xvci5qc1wiO1xuaW1wb3J0IENvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUgZnJvbSBcIi4uL0NvcmUvRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5SW5zdGFuY2UgZnJvbSBcIi4uL0NvcmUvR2VvbWV0cnlJbnN0YW5jZS5qc1wiO1xuaW1wb3J0IElzbzg2MDEgZnJvbSBcIi4uL0NvcmUvSXNvODYwMS5qc1wiO1xuaW1wb3J0IFNob3dHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL1Nob3dHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmpzXCI7XG5pbXBvcnQgV2FsbEdlb21ldHJ5IGZyb20gXCIuLi9Db3JlL1dhbGxHZW9tZXRyeS5qc1wiO1xuaW1wb3J0IFdhbGxPdXRsaW5lR2VvbWV0cnkgZnJvbSBcIi4uL0NvcmUvV2FsbE91dGxpbmVHZW9tZXRyeS5qc1wiO1xuaW1wb3J0IE1hdGVyaWFsQXBwZWFyYW5jZSBmcm9tIFwiLi4vU2NlbmUvTWF0ZXJpYWxBcHBlYXJhbmNlLmpzXCI7XG5pbXBvcnQgUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2UgZnJvbSBcIi4uL1NjZW5lL1Blckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlLmpzXCI7XG5pbXBvcnQgQ29sb3JNYXRlcmlhbFByb3BlcnR5IGZyb20gXCIuL0NvbG9yTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IER5bmFtaWNHZW9tZXRyeVVwZGF0ZXIgZnJvbSBcIi4vRHluYW1pY0dlb21ldHJ5VXBkYXRlci5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5VXBkYXRlciBmcm9tIFwiLi9HZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBQcm9wZXJ0eSBmcm9tIFwiLi9Qcm9wZXJ0eS5qc1wiO1xuXG52YXIgc2NyYXRjaENvbG9yID0gbmV3IENvbG9yKCk7XG5cbmZ1bmN0aW9uIFdhbGxHZW9tZXRyeU9wdGlvbnMoZW50aXR5KSB7XG4gIHRoaXMuaWQgPSBlbnRpdHk7XG4gIHRoaXMudmVydGV4Rm9ybWF0ID0gdW5kZWZpbmVkO1xuICB0aGlzLnBvc2l0aW9ucyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5taW5pbXVtSGVpZ2h0cyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5tYXhpbXVtSGVpZ2h0cyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5ncmFudWxhcml0eSA9IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBBIHtAbGluayBHZW9tZXRyeVVwZGF0ZXJ9IGZvciB3YWxscy5cbiAqIENsaWVudHMgZG8gbm90IG5vcm1hbGx5IGNyZWF0ZSB0aGlzIGNsYXNzIGRpcmVjdGx5LCBidXQgaW5zdGVhZCByZWx5IG9uIHtAbGluayBEYXRhU291cmNlRGlzcGxheX0uXG4gKiBAYWxpYXMgV2FsbEdlb21ldHJ5VXBkYXRlclxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBUaGUgZW50aXR5IGNvbnRhaW5pbmcgdGhlIGdlb21ldHJ5IHRvIGJlIHZpc3VhbGl6ZWQuXG4gKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSBUaGUgc2NlbmUgd2hlcmUgdmlzdWFsaXphdGlvbiBpcyB0YWtpbmcgcGxhY2UuXG4gKi9cbmZ1bmN0aW9uIFdhbGxHZW9tZXRyeVVwZGF0ZXIoZW50aXR5LCBzY2VuZSkge1xuICBHZW9tZXRyeVVwZGF0ZXIuY2FsbCh0aGlzLCB7XG4gICAgZW50aXR5OiBlbnRpdHksXG4gICAgc2NlbmU6IHNjZW5lLFxuICAgIGdlb21ldHJ5T3B0aW9uczogbmV3IFdhbGxHZW9tZXRyeU9wdGlvbnMoZW50aXR5KSxcbiAgICBnZW9tZXRyeVByb3BlcnR5TmFtZTogXCJ3YWxsXCIsXG4gICAgb2JzZXJ2ZWRQcm9wZXJ0eU5hbWVzOiBbXCJhdmFpbGFiaWxpdHlcIiwgXCJ3YWxsXCJdLFxuICB9KTtcblxuICB0aGlzLl9vbkVudGl0eVByb3BlcnR5Q2hhbmdlZChlbnRpdHksIFwid2FsbFwiLCBlbnRpdHkud2FsbCwgdW5kZWZpbmVkKTtcbn1cblxuaWYgKGRlZmluZWQoT2JqZWN0LmNyZWF0ZSkpIHtcbiAgV2FsbEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUpO1xuICBXYWxsR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFdhbGxHZW9tZXRyeVVwZGF0ZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgZ2VvbWV0cnkgaW5zdGFuY2Ugd2hpY2ggcmVwcmVzZW50cyB0aGUgZmlsbCBvZiB0aGUgZ2VvbWV0cnkuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSB0aW1lIHRvIHVzZSB3aGVuIHJldHJpZXZpbmcgaW5pdGlhbCBhdHRyaWJ1dGUgdmFsdWVzLlxuICogQHJldHVybnMge0dlb21ldHJ5SW5zdGFuY2V9IFRoZSBnZW9tZXRyeSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpbGxlZCBwb3J0aW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBpbnN0YW5jZSBkb2VzIG5vdCByZXByZXNlbnQgYSBmaWxsZWQgZ2VvbWV0cnkuXG4gKi9cbldhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLmNyZWF0ZUZpbGxHZW9tZXRyeUluc3RhbmNlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInRpbWVcIiwgdGltZSk7XG5cbiAgaWYgKCF0aGlzLl9maWxsRW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiVGhpcyBpbnN0YW5jZSBkb2VzIG5vdCByZXByZXNlbnQgYSBmaWxsZWQgZ2VvbWV0cnkuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBlbnRpdHkgPSB0aGlzLl9lbnRpdHk7XG4gIHZhciBpc0F2YWlsYWJsZSA9IGVudGl0eS5pc0F2YWlsYWJsZSh0aW1lKTtcblxuICB2YXIgYXR0cmlidXRlcztcblxuICB2YXIgY29sb3I7XG4gIHZhciBzaG93ID0gbmV3IFNob3dHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlKFxuICAgIGlzQXZhaWxhYmxlICYmXG4gICAgICBlbnRpdHkuaXNTaG93aW5nICYmXG4gICAgICB0aGlzLl9zaG93UHJvcGVydHkuZ2V0VmFsdWUodGltZSkgJiZcbiAgICAgIHRoaXMuX2ZpbGxQcm9wZXJ0eS5nZXRWYWx1ZSh0aW1lKVxuICApO1xuICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkuZ2V0VmFsdWUoXG4gICAgdGltZVxuICApO1xuICB2YXIgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uQXR0cmlidXRlID0gRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5mcm9tRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKFxuICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICApO1xuICBpZiAodGhpcy5fbWF0ZXJpYWxQcm9wZXJ0eSBpbnN0YW5jZW9mIENvbG9yTWF0ZXJpYWxQcm9wZXJ0eSkge1xuICAgIHZhciBjdXJyZW50Q29sb3I7XG4gICAgaWYgKFxuICAgICAgZGVmaW5lZCh0aGlzLl9tYXRlcmlhbFByb3BlcnR5LmNvbG9yKSAmJlxuICAgICAgKHRoaXMuX21hdGVyaWFsUHJvcGVydHkuY29sb3IuaXNDb25zdGFudCB8fCBpc0F2YWlsYWJsZSlcbiAgICApIHtcbiAgICAgIGN1cnJlbnRDb2xvciA9IHRoaXMuX21hdGVyaWFsUHJvcGVydHkuY29sb3IuZ2V0VmFsdWUodGltZSwgc2NyYXRjaENvbG9yKTtcbiAgICB9XG4gICAgaWYgKCFkZWZpbmVkKGN1cnJlbnRDb2xvcikpIHtcbiAgICAgIGN1cnJlbnRDb2xvciA9IENvbG9yLldISVRFO1xuICAgIH1cbiAgICBjb2xvciA9IENvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS5mcm9tQ29sb3IoY3VycmVudENvbG9yKTtcbiAgICBhdHRyaWJ1dGVzID0ge1xuICAgICAgc2hvdzogc2hvdyxcbiAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbjogZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uQXR0cmlidXRlLFxuICAgICAgY29sb3I6IGNvbG9yLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgYXR0cmlidXRlcyA9IHtcbiAgICAgIHNob3c6IHNob3csXG4gICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb246IGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkF0dHJpYnV0ZSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIG5ldyBHZW9tZXRyeUluc3RhbmNlKHtcbiAgICBpZDogZW50aXR5LFxuICAgIGdlb21ldHJ5OiBuZXcgV2FsbEdlb21ldHJ5KHRoaXMuX29wdGlvbnMpLFxuICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gIH0pO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBnZW9tZXRyeSBpbnN0YW5jZSB3aGljaCByZXByZXNlbnRzIHRoZSBvdXRsaW5lIG9mIHRoZSBnZW9tZXRyeS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHRpbWUgdG8gdXNlIHdoZW4gcmV0cmlldmluZyBpbml0aWFsIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7R2VvbWV0cnlJbnN0YW5jZX0gVGhlIGdlb21ldHJ5IGluc3RhbmNlIHJlcHJlc2VudGluZyB0aGUgb3V0bGluZSBwb3J0aW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBpbnN0YW5jZSBkb2VzIG5vdCByZXByZXNlbnQgYW4gb3V0bGluZWQgZ2VvbWV0cnkuXG4gKi9cbldhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLmNyZWF0ZU91dGxpbmVHZW9tZXRyeUluc3RhbmNlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInRpbWVcIiwgdGltZSk7XG5cbiAgaWYgKCF0aGlzLl9vdXRsaW5lRW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiVGhpcyBpbnN0YW5jZSBkb2VzIG5vdCByZXByZXNlbnQgYW4gb3V0bGluZWQgZ2VvbWV0cnkuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBlbnRpdHkgPSB0aGlzLl9lbnRpdHk7XG4gIHZhciBpc0F2YWlsYWJsZSA9IGVudGl0eS5pc0F2YWlsYWJsZSh0aW1lKTtcbiAgdmFyIG91dGxpbmVDb2xvciA9IFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KFxuICAgIHRoaXMuX291dGxpbmVDb2xvclByb3BlcnR5LFxuICAgIHRpbWUsXG4gICAgQ29sb3IuQkxBQ0ssXG4gICAgc2NyYXRjaENvbG9yXG4gICk7XG4gIHZhciBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSB0aGlzLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eS5nZXRWYWx1ZShcbiAgICB0aW1lXG4gICk7XG5cbiAgcmV0dXJuIG5ldyBHZW9tZXRyeUluc3RhbmNlKHtcbiAgICBpZDogZW50aXR5LFxuICAgIGdlb21ldHJ5OiBuZXcgV2FsbE91dGxpbmVHZW9tZXRyeSh0aGlzLl9vcHRpb25zKSxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICBzaG93OiBuZXcgU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUoXG4gICAgICAgIGlzQXZhaWxhYmxlICYmXG4gICAgICAgICAgZW50aXR5LmlzU2hvd2luZyAmJlxuICAgICAgICAgIHRoaXMuX3Nob3dQcm9wZXJ0eS5nZXRWYWx1ZSh0aW1lKSAmJlxuICAgICAgICAgIHRoaXMuX3Nob3dPdXRsaW5lUHJvcGVydHkuZ2V0VmFsdWUodGltZSlcbiAgICAgICksXG4gICAgICBjb2xvcjogQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmZyb21Db2xvcihvdXRsaW5lQ29sb3IpLFxuICAgICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uOiBEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmZyb21EaXN0YW5jZURpc3BsYXlDb25kaXRpb24oXG4gICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICAgICAgKSxcbiAgICB9LFxuICB9KTtcbn07XG5cbldhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9pc0hpZGRlbiA9IGZ1bmN0aW9uIChlbnRpdHksIHdhbGwpIHtcbiAgcmV0dXJuIChcbiAgICAhZGVmaW5lZCh3YWxsLnBvc2l0aW9ucykgfHxcbiAgICBHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9pc0hpZGRlbi5jYWxsKHRoaXMsIGVudGl0eSwgd2FsbClcbiAgKTtcbn07XG5cbldhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9nZXRJc0Nsb3NlZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbldhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9pc0R5bmFtaWMgPSBmdW5jdGlvbiAoZW50aXR5LCB3YWxsKSB7XG4gIHJldHVybiAoXG4gICAgIXdhbGwucG9zaXRpb25zLmlzQ29uc3RhbnQgfHwgLy9cbiAgICAhUHJvcGVydHkuaXNDb25zdGFudCh3YWxsLm1pbmltdW1IZWlnaHRzKSB8fCAvL1xuICAgICFQcm9wZXJ0eS5pc0NvbnN0YW50KHdhbGwubWF4aW11bUhlaWdodHMpIHx8IC8vXG4gICAgIVByb3BlcnR5LmlzQ29uc3RhbnQod2FsbC5vdXRsaW5lV2lkdGgpIHx8IC8vXG4gICAgIVByb3BlcnR5LmlzQ29uc3RhbnQod2FsbC5ncmFudWxhcml0eSlcbiAgKTtcbn07XG5cbldhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9zZXRTdGF0aWNPcHRpb25zID0gZnVuY3Rpb24gKGVudGl0eSwgd2FsbCkge1xuICB2YXIgbWluaW11bUhlaWdodHMgPSB3YWxsLm1pbmltdW1IZWlnaHRzO1xuICB2YXIgbWF4aW11bUhlaWdodHMgPSB3YWxsLm1heGltdW1IZWlnaHRzO1xuICB2YXIgZ3JhbnVsYXJpdHkgPSB3YWxsLmdyYW51bGFyaXR5O1xuICB2YXIgaXNDb2xvck1hdGVyaWFsID0gdGhpcy5fbWF0ZXJpYWxQcm9wZXJ0eSBpbnN0YW5jZW9mIENvbG9yTWF0ZXJpYWxQcm9wZXJ0eTtcblxuICB2YXIgb3B0aW9ucyA9IHRoaXMuX29wdGlvbnM7XG4gIG9wdGlvbnMudmVydGV4Rm9ybWF0ID0gaXNDb2xvck1hdGVyaWFsXG4gICAgPyBQZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZS5WRVJURVhfRk9STUFUXG4gICAgOiBNYXRlcmlhbEFwcGVhcmFuY2UuTWF0ZXJpYWxTdXBwb3J0LlRFWFRVUkVELnZlcnRleEZvcm1hdDtcbiAgb3B0aW9ucy5wb3NpdGlvbnMgPSB3YWxsLnBvc2l0aW9ucy5nZXRWYWx1ZShcbiAgICBJc284NjAxLk1JTklNVU1fVkFMVUUsXG4gICAgb3B0aW9ucy5wb3NpdGlvbnNcbiAgKTtcbiAgb3B0aW9ucy5taW5pbXVtSGVpZ2h0cyA9IGRlZmluZWQobWluaW11bUhlaWdodHMpXG4gICAgPyBtaW5pbXVtSGVpZ2h0cy5nZXRWYWx1ZShJc284NjAxLk1JTklNVU1fVkFMVUUsIG9wdGlvbnMubWluaW11bUhlaWdodHMpXG4gICAgOiB1bmRlZmluZWQ7XG4gIG9wdGlvbnMubWF4aW11bUhlaWdodHMgPSBkZWZpbmVkKG1heGltdW1IZWlnaHRzKVxuICAgID8gbWF4aW11bUhlaWdodHMuZ2V0VmFsdWUoSXNvODYwMS5NSU5JTVVNX1ZBTFVFLCBvcHRpb25zLm1heGltdW1IZWlnaHRzKVxuICAgIDogdW5kZWZpbmVkO1xuICBvcHRpb25zLmdyYW51bGFyaXR5ID0gZGVmaW5lZChncmFudWxhcml0eSlcbiAgICA/IGdyYW51bGFyaXR5LmdldFZhbHVlKElzbzg2MDEuTUlOSU1VTV9WQUxVRSlcbiAgICA6IHVuZGVmaW5lZDtcbn07XG5cbldhbGxHZW9tZXRyeVVwZGF0ZXIuRHluYW1pY0dlb21ldHJ5VXBkYXRlciA9IER5bmFtaWNXYWxsR2VvbWV0cnlVcGRhdGVyO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIER5bmFtaWNXYWxsR2VvbWV0cnlVcGRhdGVyKFxuICBnZW9tZXRyeVVwZGF0ZXIsXG4gIHByaW1pdGl2ZXMsXG4gIGdyb3VuZFByaW1pdGl2ZXNcbikge1xuICBEeW5hbWljR2VvbWV0cnlVcGRhdGVyLmNhbGwoXG4gICAgdGhpcyxcbiAgICBnZW9tZXRyeVVwZGF0ZXIsXG4gICAgcHJpbWl0aXZlcyxcbiAgICBncm91bmRQcmltaXRpdmVzXG4gICk7XG59XG5cbmlmIChkZWZpbmVkKE9iamVjdC5jcmVhdGUpKSB7XG4gIER5bmFtaWNXYWxsR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoXG4gICAgRHluYW1pY0dlb21ldHJ5VXBkYXRlci5wcm90b3R5cGVcbiAgKTtcbiAgRHluYW1pY1dhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHluYW1pY1dhbGxHZW9tZXRyeVVwZGF0ZXI7XG59XG5cbkR5bmFtaWNXYWxsR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5faXNIaWRkZW4gPSBmdW5jdGlvbiAoZW50aXR5LCB3YWxsLCB0aW1lKSB7XG4gIHJldHVybiAoXG4gICAgIWRlZmluZWQodGhpcy5fb3B0aW9ucy5wb3NpdGlvbnMpIHx8XG4gICAgRHluYW1pY0dlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuX2lzSGlkZGVuLmNhbGwodGhpcywgZW50aXR5LCB3YWxsLCB0aW1lKVxuICApO1xufTtcblxuRHluYW1pY1dhbGxHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9zZXRPcHRpb25zID0gZnVuY3Rpb24gKFxuICBlbnRpdHksXG4gIHdhbGwsXG4gIHRpbWVcbikge1xuICB2YXIgb3B0aW9ucyA9IHRoaXMuX29wdGlvbnM7XG4gIG9wdGlvbnMucG9zaXRpb25zID0gUHJvcGVydHkuZ2V0VmFsdWVPclVuZGVmaW5lZChcbiAgICB3YWxsLnBvc2l0aW9ucyxcbiAgICB0aW1lLFxuICAgIG9wdGlvbnMucG9zaXRpb25zXG4gICk7XG4gIG9wdGlvbnMubWluaW11bUhlaWdodHMgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yVW5kZWZpbmVkKFxuICAgIHdhbGwubWluaW11bUhlaWdodHMsXG4gICAgdGltZSxcbiAgICBvcHRpb25zLm1pbmltdW1IZWlnaHRzXG4gICk7XG4gIG9wdGlvbnMubWF4aW11bUhlaWdodHMgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yVW5kZWZpbmVkKFxuICAgIHdhbGwubWF4aW11bUhlaWdodHMsXG4gICAgdGltZSxcbiAgICBvcHRpb25zLm1heGltdW1IZWlnaHRzXG4gICk7XG4gIG9wdGlvbnMuZ3JhbnVsYXJpdHkgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yVW5kZWZpbmVkKHdhbGwuZ3JhbnVsYXJpdHksIHRpbWUpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFdhbGxHZW9tZXRyeVVwZGF0ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///97167\n')},65269:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14459);\n/* harmony import */ var _createMaterialPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1370);\n/* harmony import */ var _createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90203);\n\n\n\n\n\n\n\n/**\n * @typedef {Object} WallGraphics.ConstructorOptions\n *\n * Initialization options for the WallGraphics constructor\n *\n * @property {Property | boolean} [show=true] A boolean Property specifying the visibility of the wall.\n * @property {Property | Array<Cartesian3>} [positions] A Property specifying the array of {@link Cartesian3} positions which define the top of the wall.\n * @property {Property | Array<number>} [minimumHeights] A Property specifying an array of heights to be used for the bottom of the wall instead of the globe surface.\n * @property {Property | Array<number>} [maximumHeights] A Property specifying an array of heights to be used for the top of the wall instead of the height of each position.\n * @property {Property | number} [granularity=Cesium.Math.RADIANS_PER_DEGREE] A numeric Property specifying the angular distance between each latitude and longitude point.\n * @property {Property | boolean} [fill=true] A boolean Property specifying whether the wall is filled with the provided material.\n * @property {MaterialProperty | Color} [material=Color.WHITE] A Property specifying the material used to fill the wall.\n * @property {Property | boolean} [outline=false] A boolean Property specifying whether the wall is outlined.\n * @property {Property | Color} [outlineColor=Color.BLACK] A Property specifying the {@link Color} of the outline.\n * @property {Property | number} [outlineWidth=1.0] A numeric Property specifying the width of the outline.\n * @property {Property | ShadowMode} [shadows=ShadowMode.DISABLED] An enum Property specifying whether the wall casts or receives shadows from light sources.\n * @property {Property | DistanceDisplayCondition} [distanceDisplayCondition] A Property specifying at what distance from the camera that this wall will be displayed.\n */\n\n/**\n * Describes a two dimensional wall defined as a line strip and optional maximum and minimum heights.\n * The wall conforms to the curvature of the globe and can be placed along the surface or at altitude.\n *\n * @alias WallGraphics\n * @constructor\n *\n * @param {WallGraphics.ConstructorOptions} [options] Object describing initialization options\n *\n * @see Entity\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Wall.html|Cesium Sandcastle Wall Demo}\n */\nfunction WallGraphics(options) {\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._show = undefined;\n  this._showSubscription = undefined;\n  this._positions = undefined;\n  this._positionsSubscription = undefined;\n  this._minimumHeights = undefined;\n  this._minimumHeightsSubscription = undefined;\n  this._maximumHeights = undefined;\n  this._maximumHeightsSubscription = undefined;\n  this._granularity = undefined;\n  this._granularitySubscription = undefined;\n  this._fill = undefined;\n  this._fillSubscription = undefined;\n  this._material = undefined;\n  this._materialSubscription = undefined;\n  this._outline = undefined;\n  this._outlineSubscription = undefined;\n  this._outlineColor = undefined;\n  this._outlineColorSubscription = undefined;\n  this._outlineWidth = undefined;\n  this._outlineWidthSubscription = undefined;\n  this._shadows = undefined;\n  this._shadowsSubscription = undefined;\n  this._distanceDisplayCondition = undefined;\n  this._distanceDisplayConditionSubscription = undefined;\n\n  this.merge((0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT));\n}\n\nObject.defineProperties(WallGraphics.prototype, {\n  /**\n   * Gets the event that is raised whenever a property or sub-property is changed or modified.\n   * @memberof WallGraphics.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n\n  /**\n   * Gets or sets the boolean Property specifying the visibility of the wall.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   * @default true\n   */\n  show: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("show"),\n\n  /**\n   * Gets or sets the Property specifying the array of {@link Cartesian3} positions which define the top of the wall.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   */\n  positions: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("positions"),\n\n  /**\n   * Gets or sets the Property specifying an array of heights to be used for the bottom of the wall instead of the surface of the globe.\n   * If defined, the array must be the same length as {@link Wall#positions}.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   */\n  minimumHeights: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("minimumHeights"),\n\n  /**\n   * Gets or sets the Property specifying an array of heights to be used for the top of the wall instead of the height of each position.\n   * If defined, the array must be the same length as {@link Wall#positions}.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   */\n  maximumHeights: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("maximumHeights"),\n\n  /**\n   * Gets or sets the numeric Property specifying the angular distance between points on the wall.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   * @default {CesiumMath.RADIANS_PER_DEGREE}\n   */\n  granularity: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("granularity"),\n\n  /**\n   * Gets or sets the boolean Property specifying whether the wall is filled with the provided material.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   * @default true\n   */\n  fill: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("fill"),\n\n  /**\n   * Gets or sets the Property specifying the material used to fill the wall.\n   * @memberof WallGraphics.prototype\n   * @type {MaterialProperty}\n   * @default Color.WHITE\n   */\n  material: (0,_createMaterialPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)("material"),\n\n  /**\n   * Gets or sets the Property specifying whether the wall is outlined.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   * @default false\n   */\n  outline: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("outline"),\n\n  /**\n   * Gets or sets the Property specifying the {@link Color} of the outline.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   * @default Color.BLACK\n   */\n  outlineColor: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("outlineColor"),\n\n  /**\n   * Gets or sets the numeric Property specifying the width of the outline.\n   * <p>\n   * Note: This property will be ignored on all major browsers on Windows platforms. For details, see (@link https://github.com/CesiumGS/cesium/issues/40}.\n   * </p>\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   * @default 1.0\n   */\n  outlineWidth: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("outlineWidth"),\n\n  /**\n   * Get or sets the enum Property specifying whether the wall\n   * casts or receives shadows from light sources.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   * @default ShadowMode.DISABLED\n   */\n  shadows: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("shadows"),\n\n  /**\n   * Gets or sets the {@link DistanceDisplayCondition} Property specifying at what distance from the camera that this wall will be displayed.\n   * @memberof WallGraphics.prototype\n   * @type {Property|undefined}\n   */\n  distanceDisplayCondition: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    "distanceDisplayCondition"\n  ),\n});\n\n/**\n * Duplicates this instance.\n *\n * @param {WallGraphics} [result] The object onto which to store the result.\n * @returns {WallGraphics} The modified result parameter or a new instance if one was not provided.\n */\nWallGraphics.prototype.clone = function (result) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(result)) {\n    return new WallGraphics(this);\n  }\n  result.show = this.show;\n  result.positions = this.positions;\n  result.minimumHeights = this.minimumHeights;\n  result.maximumHeights = this.maximumHeights;\n  result.granularity = this.granularity;\n  result.fill = this.fill;\n  result.material = this.material;\n  result.outline = this.outline;\n  result.outlineColor = this.outlineColor;\n  result.outlineWidth = this.outlineWidth;\n  result.shadows = this.shadows;\n  result.distanceDisplayCondition = this.distanceDisplayCondition;\n  return result;\n};\n\n/**\n * Assigns each unassigned property on this object to the value\n * of the same property on the provided source object.\n *\n * @param {WallGraphics} source The object to be merged into this object.\n */\nWallGraphics.prototype.merge = function (source) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(source)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("source is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.show, source.show);\n  this.positions = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.positions, source.positions);\n  this.minimumHeights = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    this.minimumHeights,\n    source.minimumHeights\n  );\n  this.maximumHeights = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    this.maximumHeights,\n    source.maximumHeights\n  );\n  this.granularity = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.granularity, source.granularity);\n  this.fill = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.fill, source.fill);\n  this.material = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.material, source.material);\n  this.outline = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.outline, source.outline);\n  this.outlineColor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.outlineColor, source.outlineColor);\n  this.outlineWidth = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.outlineWidth, source.outlineWidth);\n  this.shadows = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.shadows, source.shadows);\n  this.distanceDisplayCondition = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n    this.distanceDisplayCondition,\n    source.distanceDisplayCondition\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (WallGraphics);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0Esd0JBQXdCLDBFQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwRUFBWTtBQUNqQyxjQUFjLDBFQUFZO0FBQzFCLGtCQUFrQiwwRUFBWTtBQUM5QixpQkFBaUIsMEVBQVk7QUFDN0Isc0JBQXNCLDBFQUFZO0FBQ2xDLHNCQUFzQiwwRUFBWTtBQUNsQyxpQkFBaUIsMEVBQVk7QUFDN0Isa0NBQWtDLDBFQUFZO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsWUFBWSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL1dhbGxHcmFwaGljcy5qcz9hNzRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFdmVudCBmcm9tIFwiLi4vQ29yZS9FdmVudC5qc1wiO1xuaW1wb3J0IGNyZWF0ZU1hdGVyaWFsUHJvcGVydHlEZXNjcmlwdG9yIGZyb20gXCIuL2NyZWF0ZU1hdGVyaWFsUHJvcGVydHlEZXNjcmlwdG9yLmpzXCI7XG5pbXBvcnQgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yIGZyb20gXCIuL2NyZWF0ZVByb3BlcnR5RGVzY3JpcHRvci5qc1wiO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFdhbGxHcmFwaGljcy5Db25zdHJ1Y3Rvck9wdGlvbnNcbiAqXG4gKiBJbml0aWFsaXphdGlvbiBvcHRpb25zIGZvciB0aGUgV2FsbEdyYXBoaWNzIGNvbnN0cnVjdG9yXG4gKlxuICogQHByb3BlcnR5IHtQcm9wZXJ0eSB8IGJvb2xlYW59IFtzaG93PXRydWVdIEEgYm9vbGVhbiBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSB3YWxsLlxuICogQHByb3BlcnR5IHtQcm9wZXJ0eSB8IEFycmF5PENhcnRlc2lhbjM+fSBbcG9zaXRpb25zXSBBIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIGFycmF5IG9mIHtAbGluayBDYXJ0ZXNpYW4zfSBwb3NpdGlvbnMgd2hpY2ggZGVmaW5lIHRoZSB0b3Agb2YgdGhlIHdhbGwuXG4gKiBAcHJvcGVydHkge1Byb3BlcnR5IHwgQXJyYXk8bnVtYmVyPn0gW21pbmltdW1IZWlnaHRzXSBBIFByb3BlcnR5IHNwZWNpZnlpbmcgYW4gYXJyYXkgb2YgaGVpZ2h0cyB0byBiZSB1c2VkIGZvciB0aGUgYm90dG9tIG9mIHRoZSB3YWxsIGluc3RlYWQgb2YgdGhlIGdsb2JlIHN1cmZhY2UuXG4gKiBAcHJvcGVydHkge1Byb3BlcnR5IHwgQXJyYXk8bnVtYmVyPn0gW21heGltdW1IZWlnaHRzXSBBIFByb3BlcnR5IHNwZWNpZnlpbmcgYW4gYXJyYXkgb2YgaGVpZ2h0cyB0byBiZSB1c2VkIGZvciB0aGUgdG9wIG9mIHRoZSB3YWxsIGluc3RlYWQgb2YgdGhlIGhlaWdodCBvZiBlYWNoIHBvc2l0aW9uLlxuICogQHByb3BlcnR5IHtQcm9wZXJ0eSB8IG51bWJlcn0gW2dyYW51bGFyaXR5PUNlc2l1bS5NYXRoLlJBRElBTlNfUEVSX0RFR1JFRV0gQSBudW1lcmljIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIGFuZ3VsYXIgZGlzdGFuY2UgYmV0d2VlbiBlYWNoIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgcG9pbnQuXG4gKiBAcHJvcGVydHkge1Byb3BlcnR5IHwgYm9vbGVhbn0gW2ZpbGw9dHJ1ZV0gQSBib29sZWFuIFByb3BlcnR5IHNwZWNpZnlpbmcgd2hldGhlciB0aGUgd2FsbCBpcyBmaWxsZWQgd2l0aCB0aGUgcHJvdmlkZWQgbWF0ZXJpYWwuXG4gKiBAcHJvcGVydHkge01hdGVyaWFsUHJvcGVydHkgfCBDb2xvcn0gW21hdGVyaWFsPUNvbG9yLldISVRFXSBBIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIG1hdGVyaWFsIHVzZWQgdG8gZmlsbCB0aGUgd2FsbC5cbiAqIEBwcm9wZXJ0eSB7UHJvcGVydHkgfCBib29sZWFufSBbb3V0bGluZT1mYWxzZV0gQSBib29sZWFuIFByb3BlcnR5IHNwZWNpZnlpbmcgd2hldGhlciB0aGUgd2FsbCBpcyBvdXRsaW5lZC5cbiAqIEBwcm9wZXJ0eSB7UHJvcGVydHkgfCBDb2xvcn0gW291dGxpbmVDb2xvcj1Db2xvci5CTEFDS10gQSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSB7QGxpbmsgQ29sb3J9IG9mIHRoZSBvdXRsaW5lLlxuICogQHByb3BlcnR5IHtQcm9wZXJ0eSB8IG51bWJlcn0gW291dGxpbmVXaWR0aD0xLjBdIEEgbnVtZXJpYyBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSB3aWR0aCBvZiB0aGUgb3V0bGluZS5cbiAqIEBwcm9wZXJ0eSB7UHJvcGVydHkgfCBTaGFkb3dNb2RlfSBbc2hhZG93cz1TaGFkb3dNb2RlLkRJU0FCTEVEXSBBbiBlbnVtIFByb3BlcnR5IHNwZWNpZnlpbmcgd2hldGhlciB0aGUgd2FsbCBjYXN0cyBvciByZWNlaXZlcyBzaGFkb3dzIGZyb20gbGlnaHQgc291cmNlcy5cbiAqIEBwcm9wZXJ0eSB7UHJvcGVydHkgfCBEaXN0YW5jZURpc3BsYXlDb25kaXRpb259IFtkaXN0YW5jZURpc3BsYXlDb25kaXRpb25dIEEgUHJvcGVydHkgc3BlY2lmeWluZyBhdCB3aGF0IGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSB0aGF0IHRoaXMgd2FsbCB3aWxsIGJlIGRpc3BsYXllZC5cbiAqL1xuXG4vKipcbiAqIERlc2NyaWJlcyBhIHR3byBkaW1lbnNpb25hbCB3YWxsIGRlZmluZWQgYXMgYSBsaW5lIHN0cmlwIGFuZCBvcHRpb25hbCBtYXhpbXVtIGFuZCBtaW5pbXVtIGhlaWdodHMuXG4gKiBUaGUgd2FsbCBjb25mb3JtcyB0byB0aGUgY3VydmF0dXJlIG9mIHRoZSBnbG9iZSBhbmQgY2FuIGJlIHBsYWNlZCBhbG9uZyB0aGUgc3VyZmFjZSBvciBhdCBhbHRpdHVkZS5cbiAqXG4gKiBAYWxpYXMgV2FsbEdyYXBoaWNzXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1dhbGxHcmFwaGljcy5Db25zdHJ1Y3Rvck9wdGlvbnN9IFtvcHRpb25zXSBPYmplY3QgZGVzY3JpYmluZyBpbml0aWFsaXphdGlvbiBvcHRpb25zXG4gKlxuICogQHNlZSBFbnRpdHlcbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1XYWxsLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgV2FsbCBEZW1vfVxuICovXG5mdW5jdGlvbiBXYWxsR3JhcGhpY3Mob3B0aW9ucykge1xuICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9zaG93ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zaG93U3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9wb3NpdGlvbnMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3Bvc2l0aW9uc1N1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbWluaW11bUhlaWdodHMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX21pbmltdW1IZWlnaHRzU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9tYXhpbXVtSGVpZ2h0cyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbWF4aW11bUhlaWdodHNTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2dyYW51bGFyaXR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9ncmFudWxhcml0eVN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZmlsbCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZmlsbFN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbWF0ZXJpYWwgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX21hdGVyaWFsU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9vdXRsaW5lID0gdW5kZWZpbmVkO1xuICB0aGlzLl9vdXRsaW5lU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9vdXRsaW5lQ29sb3IgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX291dGxpbmVDb2xvclN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fb3V0bGluZVdpZHRoID0gdW5kZWZpbmVkO1xuICB0aGlzLl9vdXRsaW5lV2lkdGhTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NoYWRvd3MgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NoYWRvd3NTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMubWVyZ2UoZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoV2FsbEdyYXBoaWNzLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbmV2ZXIgYSBwcm9wZXJ0eSBvciBzdWItcHJvcGVydHkgaXMgY2hhbmdlZCBvciBtb2RpZmllZC5cbiAgICogQG1lbWJlcm9mIFdhbGxHcmFwaGljcy5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGRlZmluaXRpb25DaGFuZ2VkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBib29sZWFuIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHdhbGwuXG4gICAqIEBtZW1iZXJvZiBXYWxsR3JhcGhpY3MucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHNob3c6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcInNob3dcIiksXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgYXJyYXkgb2Yge0BsaW5rIENhcnRlc2lhbjN9IHBvc2l0aW9ucyB3aGljaCBkZWZpbmUgdGhlIHRvcCBvZiB0aGUgd2FsbC5cbiAgICogQG1lbWJlcm9mIFdhbGxHcmFwaGljcy5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb3BlcnR5fHVuZGVmaW5lZH1cbiAgICovXG4gIHBvc2l0aW9uczogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwicG9zaXRpb25zXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIFByb3BlcnR5IHNwZWNpZnlpbmcgYW4gYXJyYXkgb2YgaGVpZ2h0cyB0byBiZSB1c2VkIGZvciB0aGUgYm90dG9tIG9mIHRoZSB3YWxsIGluc3RlYWQgb2YgdGhlIHN1cmZhY2Ugb2YgdGhlIGdsb2JlLlxuICAgKiBJZiBkZWZpbmVkLCB0aGUgYXJyYXkgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGggYXMge0BsaW5rIFdhbGwjcG9zaXRpb25zfS5cbiAgICogQG1lbWJlcm9mIFdhbGxHcmFwaGljcy5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb3BlcnR5fHVuZGVmaW5lZH1cbiAgICovXG4gIG1pbmltdW1IZWlnaHRzOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJtaW5pbXVtSGVpZ2h0c1wiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIGFuIGFycmF5IG9mIGhlaWdodHMgdG8gYmUgdXNlZCBmb3IgdGhlIHRvcCBvZiB0aGUgd2FsbCBpbnN0ZWFkIG9mIHRoZSBoZWlnaHQgb2YgZWFjaCBwb3NpdGlvbi5cbiAgICogSWYgZGVmaW5lZCwgdGhlIGFycmF5IG11c3QgYmUgdGhlIHNhbWUgbGVuZ3RoIGFzIHtAbGluayBXYWxsI3Bvc2l0aW9uc30uXG4gICAqIEBtZW1iZXJvZiBXYWxsR3JhcGhpY3MucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqL1xuICBtYXhpbXVtSGVpZ2h0czogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwibWF4aW11bUhlaWdodHNcIiksXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgbnVtZXJpYyBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSBhbmd1bGFyIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIG9uIHRoZSB3YWxsLlxuICAgKiBAbWVtYmVyb2YgV2FsbEdyYXBoaWNzLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB7Q2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUV9XG4gICAqL1xuICBncmFudWxhcml0eTogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwiZ3JhbnVsYXJpdHlcIiksXG5cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgYm9vbGVhbiBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHdoZXRoZXIgdGhlIHdhbGwgaXMgZmlsbGVkIHdpdGggdGhlIHByb3ZpZGVkIG1hdGVyaWFsLlxuICAgKiBAbWVtYmVyb2YgV2FsbEdyYXBoaWNzLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBmaWxsOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJmaWxsXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIG1hdGVyaWFsIHVzZWQgdG8gZmlsbCB0aGUgd2FsbC5cbiAgICogQG1lbWJlcm9mIFdhbGxHcmFwaGljcy5wcm90b3R5cGVcbiAgICogQHR5cGUge01hdGVyaWFsUHJvcGVydHl9XG4gICAqIEBkZWZhdWx0IENvbG9yLldISVRFXG4gICAqL1xuICBtYXRlcmlhbDogY3JlYXRlTWF0ZXJpYWxQcm9wZXJ0eURlc2NyaXB0b3IoXCJtYXRlcmlhbFwiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHdoZXRoZXIgdGhlIHdhbGwgaXMgb3V0bGluZWQuXG4gICAqIEBtZW1iZXJvZiBXYWxsR3JhcGhpY3MucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBvdXRsaW5lOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJvdXRsaW5lXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIHtAbGluayBDb2xvcn0gb2YgdGhlIG91dGxpbmUuXG4gICAqIEBtZW1iZXJvZiBXYWxsR3JhcGhpY3MucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IENvbG9yLkJMQUNLXG4gICAqL1xuICBvdXRsaW5lQ29sb3I6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcIm91dGxpbmVDb2xvclwiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBudW1lcmljIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIHdpZHRoIG9mIHRoZSBvdXRsaW5lLlxuICAgKiA8cD5cbiAgICogTm90ZTogVGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQgb24gYWxsIG1ham9yIGJyb3dzZXJzIG9uIFdpbmRvd3MgcGxhdGZvcm1zLiBGb3IgZGV0YWlscywgc2VlIChAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvY2VzaXVtL2lzc3Vlcy80MH0uXG4gICAqIDwvcD5cbiAgICogQG1lbWJlcm9mIFdhbGxHcmFwaGljcy5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb3BlcnR5fHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqL1xuICBvdXRsaW5lV2lkdGg6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcIm91dGxpbmVXaWR0aFwiKSxcblxuICAvKipcbiAgICogR2V0IG9yIHNldHMgdGhlIGVudW0gUHJvcGVydHkgc3BlY2lmeWluZyB3aGV0aGVyIHRoZSB3YWxsXG4gICAqIGNhc3RzIG9yIHJlY2VpdmVzIHNoYWRvd3MgZnJvbSBsaWdodCBzb3VyY2VzLlxuICAgKiBAbWVtYmVyb2YgV2FsbEdyYXBoaWNzLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCBTaGFkb3dNb2RlLkRJU0FCTEVEXG4gICAqL1xuICBzaGFkb3dzOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJzaGFkb3dzXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHtAbGluayBEaXN0YW5jZURpc3BsYXlDb25kaXRpb259IFByb3BlcnR5IHNwZWNpZnlpbmcgYXQgd2hhdCBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgdGhhdCB0aGlzIHdhbGwgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gICAqIEBtZW1iZXJvZiBXYWxsR3JhcGhpY3MucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqL1xuICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb246IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcbiAgICBcImRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblwiXG4gICksXG59KTtcblxuLyoqXG4gKiBEdXBsaWNhdGVzIHRoaXMgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtXYWxsR3JhcGhpY3N9IFtyZXN1bHRdIFRoZSBvYmplY3Qgb250byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge1dhbGxHcmFwaGljc30gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgaW5zdGFuY2UgaWYgb25lIHdhcyBub3QgcHJvdmlkZWQuXG4gKi9cbldhbGxHcmFwaGljcy5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmV0dXJuIG5ldyBXYWxsR3JhcGhpY3ModGhpcyk7XG4gIH1cbiAgcmVzdWx0LnNob3cgPSB0aGlzLnNob3c7XG4gIHJlc3VsdC5wb3NpdGlvbnMgPSB0aGlzLnBvc2l0aW9ucztcbiAgcmVzdWx0Lm1pbmltdW1IZWlnaHRzID0gdGhpcy5taW5pbXVtSGVpZ2h0cztcbiAgcmVzdWx0Lm1heGltdW1IZWlnaHRzID0gdGhpcy5tYXhpbXVtSGVpZ2h0cztcbiAgcmVzdWx0LmdyYW51bGFyaXR5ID0gdGhpcy5ncmFudWxhcml0eTtcbiAgcmVzdWx0LmZpbGwgPSB0aGlzLmZpbGw7XG4gIHJlc3VsdC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gIHJlc3VsdC5vdXRsaW5lID0gdGhpcy5vdXRsaW5lO1xuICByZXN1bHQub3V0bGluZUNvbG9yID0gdGhpcy5vdXRsaW5lQ29sb3I7XG4gIHJlc3VsdC5vdXRsaW5lV2lkdGggPSB0aGlzLm91dGxpbmVXaWR0aDtcbiAgcmVzdWx0LnNoYWRvd3MgPSB0aGlzLnNoYWRvd3M7XG4gIHJlc3VsdC5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSB0aGlzLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbjtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogQXNzaWducyBlYWNoIHVuYXNzaWduZWQgcHJvcGVydHkgb24gdGhpcyBvYmplY3QgdG8gdGhlIHZhbHVlXG4gKiBvZiB0aGUgc2FtZSBwcm9wZXJ0eSBvbiB0aGUgcHJvdmlkZWQgc291cmNlIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1dhbGxHcmFwaGljc30gc291cmNlIFRoZSBvYmplY3QgdG8gYmUgbWVyZ2VkIGludG8gdGhpcyBvYmplY3QuXG4gKi9cbldhbGxHcmFwaGljcy5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChzb3VyY2UpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwic291cmNlIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLnNob3cgPSBkZWZhdWx0VmFsdWUodGhpcy5zaG93LCBzb3VyY2Uuc2hvdyk7XG4gIHRoaXMucG9zaXRpb25zID0gZGVmYXVsdFZhbHVlKHRoaXMucG9zaXRpb25zLCBzb3VyY2UucG9zaXRpb25zKTtcbiAgdGhpcy5taW5pbXVtSGVpZ2h0cyA9IGRlZmF1bHRWYWx1ZShcbiAgICB0aGlzLm1pbmltdW1IZWlnaHRzLFxuICAgIHNvdXJjZS5taW5pbXVtSGVpZ2h0c1xuICApO1xuICB0aGlzLm1heGltdW1IZWlnaHRzID0gZGVmYXVsdFZhbHVlKFxuICAgIHRoaXMubWF4aW11bUhlaWdodHMsXG4gICAgc291cmNlLm1heGltdW1IZWlnaHRzXG4gICk7XG4gIHRoaXMuZ3JhbnVsYXJpdHkgPSBkZWZhdWx0VmFsdWUodGhpcy5ncmFudWxhcml0eSwgc291cmNlLmdyYW51bGFyaXR5KTtcbiAgdGhpcy5maWxsID0gZGVmYXVsdFZhbHVlKHRoaXMuZmlsbCwgc291cmNlLmZpbGwpO1xuICB0aGlzLm1hdGVyaWFsID0gZGVmYXVsdFZhbHVlKHRoaXMubWF0ZXJpYWwsIHNvdXJjZS5tYXRlcmlhbCk7XG4gIHRoaXMub3V0bGluZSA9IGRlZmF1bHRWYWx1ZSh0aGlzLm91dGxpbmUsIHNvdXJjZS5vdXRsaW5lKTtcbiAgdGhpcy5vdXRsaW5lQ29sb3IgPSBkZWZhdWx0VmFsdWUodGhpcy5vdXRsaW5lQ29sb3IsIHNvdXJjZS5vdXRsaW5lQ29sb3IpO1xuICB0aGlzLm91dGxpbmVXaWR0aCA9IGRlZmF1bHRWYWx1ZSh0aGlzLm91dGxpbmVXaWR0aCwgc291cmNlLm91dGxpbmVXaWR0aCk7XG4gIHRoaXMuc2hhZG93cyA9IGRlZmF1bHRWYWx1ZSh0aGlzLnNoYWRvd3MsIHNvdXJjZS5zaGFkb3dzKTtcbiAgdGhpcy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBkZWZhdWx0VmFsdWUoXG4gICAgdGhpcy5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24sXG4gICAgc291cmNlLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvblxuICApO1xufTtcbmV4cG9ydCBkZWZhdWx0IFdhbGxHcmFwaGljcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///65269\n')},1370:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59947);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68985);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(20174);\n/* harmony import */ var _createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90203);\n/* harmony import */ var _ImageMaterialProperty_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(33796);\n\n\n\n\n\n\n\nfunction createMaterialProperty(value) {\n  if (value instanceof _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z) {\n    return new _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(value);\n  }\n\n  if (\n    typeof value === "string" ||\n    value instanceof _Core_Resource_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z ||\n    value instanceof HTMLCanvasElement ||\n    value instanceof HTMLVideoElement\n  ) {\n    var result = new _ImageMaterialProperty_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n    result.image = value;\n    return result;\n  }\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z("Unable to infer material type: " + value);\n  //>>includeEnd(\'debug\');\n}\n\n/**\n * @private\n */\nfunction createMaterialPropertyDescriptor(name, configurable) {\n  return (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(name, configurable, createMaterialProperty);\n}\n/* harmony default export */ __webpack_exports__["Z"] = (createMaterialPropertyDescriptor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM3MC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDa0I7QUFDWjtBQUNvQjtBQUNNO0FBQ047O0FBRS9EO0FBQ0EsdUJBQXVCLCtEQUFLO0FBQzVCLGVBQWUsMEVBQXFCO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsa0VBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDBFQUFxQjtBQUMxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLHdFQUFjO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGlGQUF3QjtBQUNqQztBQUNBLHlEQUFlLGdDQUFnQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL2NyZWF0ZU1hdGVyaWFsUHJvcGVydHlEZXNjcmlwdG9yLmpzPzgyMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBSZXNvdXJjZSBmcm9tIFwiLi4vQ29yZS9SZXNvdXJjZS5qc1wiO1xuaW1wb3J0IENvbG9yTWF0ZXJpYWxQcm9wZXJ0eSBmcm9tIFwiLi9Db2xvck1hdGVyaWFsUHJvcGVydHkuanNcIjtcbmltcG9ydCBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgZnJvbSBcIi4vY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yLmpzXCI7XG5pbXBvcnQgSW1hZ2VNYXRlcmlhbFByb3BlcnR5IGZyb20gXCIuL0ltYWdlTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuXG5mdW5jdGlvbiBjcmVhdGVNYXRlcmlhbFByb3BlcnR5KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIENvbG9yKSB7XG4gICAgcmV0dXJuIG5ldyBDb2xvck1hdGVyaWFsUHJvcGVydHkodmFsdWUpO1xuICB9XG5cbiAgaWYgKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fFxuICAgIHZhbHVlIGluc3RhbmNlb2YgUmVzb3VyY2UgfHxcbiAgICB2YWx1ZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50IHx8XG4gICAgdmFsdWUgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50XG4gICkge1xuICAgIHZhciByZXN1bHQgPSBuZXcgSW1hZ2VNYXRlcmlhbFByb3BlcnR5KCk7XG4gICAgcmVzdWx0LmltYWdlID0gdmFsdWU7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIlVuYWJsZSB0byBpbmZlciBtYXRlcmlhbCB0eXBlOiBcIiArIHZhbHVlKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWF0ZXJpYWxQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwgY29uZmlndXJhYmxlKSB7XG4gIHJldHVybiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwgY29uZmlndXJhYmxlLCBjcmVhdGVNYXRlcmlhbFByb3BlcnR5KTtcbn1cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZU1hdGVyaWFsUHJvcGVydHlEZXNjcmlwdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1370\n')},90203:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82982);\n/* harmony import */ var _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(612);\n\n\n\n\nfunction createProperty(\n  name,\n  privateName,\n  subscriptionName,\n  configurable,\n  createPropertyCallback\n) {\n  return {\n    configurable: configurable,\n    get: function () {\n      return this[privateName];\n    },\n    set: function (value) {\n      var oldValue = this[privateName];\n      var subscription = this[subscriptionName];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(subscription)) {\n        subscription();\n        this[subscriptionName] = undefined;\n      }\n\n      var hasValue = value !== undefined;\n      if (\n        hasValue &&\n        (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value.getValue)) &&\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(createPropertyCallback)\n      ) {\n        value = createPropertyCallback(value);\n      }\n\n      if (oldValue !== value) {\n        this[privateName] = value;\n        this._definitionChanged.raiseEvent(this, name, value, oldValue);\n      }\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value.definitionChanged)) {\n        this[subscriptionName] = value.definitionChanged.addEventListener(\n          function () {\n            this._definitionChanged.raiseEvent(this, name, value, value);\n          },\n          this\n        );\n      }\n    },\n  };\n}\n\nfunction createConstantProperty(value) {\n  return new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(value);\n}\n\n/**\n * Used to consistently define all DataSources graphics objects.\n * This is broken into two functions because the Chrome profiler does a better\n * job of optimizing lookups if it notices that the string is constant throughout the function.\n * @private\n */\nfunction createPropertyDescriptor(name, configurable, createPropertyCallback) {\n  //Safari 8.0.3 has a JavaScript bug that causes it to confuse two variables and treat them as the same.\n  //The two extra toString calls work around the issue.\n  return createProperty(\n    name,\n    "_" + name.toString(),\n    "_" + name.toString() + "Subscription",\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(configurable, false),\n    (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(createPropertyCallback, createConstantProperty)\n  );\n}\n/* harmony default export */ __webpack_exports__["Z"] = (createPropertyDescriptor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTAyMDMuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQW1EO0FBQ1Y7QUFDWTs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFFQUFPO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFFQUFPLFlBQVkscUVBQU87QUFDcEMsUUFBUSxxRUFBTztBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVLHFFQUFPLFdBQVcscUVBQU87QUFDbkM7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsYUFBYSxxRUFBZ0I7QUFDN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBFQUFZO0FBQ2hCLElBQUksMEVBQVk7QUFDaEI7QUFDQTtBQUNBLHlEQUFlLHdCQUF3QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL2NyZWF0ZVByb3BlcnR5RGVzY3JpcHRvci5qcz9iNWVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgQ29uc3RhbnRQcm9wZXJ0eSBmcm9tIFwiLi9Db25zdGFudFByb3BlcnR5LmpzXCI7XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb3BlcnR5KFxuICBuYW1lLFxuICBwcml2YXRlTmFtZSxcbiAgc3Vic2NyaXB0aW9uTmFtZSxcbiAgY29uZmlndXJhYmxlLFxuICBjcmVhdGVQcm9wZXJ0eUNhbGxiYWNrXG4pIHtcbiAgcmV0dXJuIHtcbiAgICBjb25maWd1cmFibGU6IGNvbmZpZ3VyYWJsZSxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzW3ByaXZhdGVOYW1lXTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzW3ByaXZhdGVOYW1lXTtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzW3N1YnNjcmlwdGlvbk5hbWVdO1xuICAgICAgaWYgKGRlZmluZWQoc3Vic2NyaXB0aW9uKSkge1xuICAgICAgICBzdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdGhpc1tzdWJzY3JpcHRpb25OYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgdmFyIGhhc1ZhbHVlID0gdmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgICAgIGlmIChcbiAgICAgICAgaGFzVmFsdWUgJiZcbiAgICAgICAgKCFkZWZpbmVkKHZhbHVlKSB8fCAhZGVmaW5lZCh2YWx1ZS5nZXRWYWx1ZSkpICYmXG4gICAgICAgIGRlZmluZWQoY3JlYXRlUHJvcGVydHlDYWxsYmFjaylcbiAgICAgICkge1xuICAgICAgICB2YWx1ZSA9IGNyZWF0ZVByb3BlcnR5Q2FsbGJhY2sodmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXNbcHJpdmF0ZU5hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcywgbmFtZSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlZmluZWQodmFsdWUpICYmIGRlZmluZWQodmFsdWUuZGVmaW5pdGlvbkNoYW5nZWQpKSB7XG4gICAgICAgIHRoaXNbc3Vic2NyaXB0aW9uTmFtZV0gPSB2YWx1ZS5kZWZpbml0aW9uQ2hhbmdlZC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkLnJhaXNlRXZlbnQodGhpcywgbmFtZSwgdmFsdWUsIHZhbHVlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb25zdGFudFByb3BlcnR5KHZhbHVlKSB7XG4gIHJldHVybiBuZXcgQ29uc3RhbnRQcm9wZXJ0eSh2YWx1ZSk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjb25zaXN0ZW50bHkgZGVmaW5lIGFsbCBEYXRhU291cmNlcyBncmFwaGljcyBvYmplY3RzLlxuICogVGhpcyBpcyBicm9rZW4gaW50byB0d28gZnVuY3Rpb25zIGJlY2F1c2UgdGhlIENocm9tZSBwcm9maWxlciBkb2VzIGEgYmV0dGVyXG4gKiBqb2Igb2Ygb3B0aW1pemluZyBsb29rdXBzIGlmIGl0IG5vdGljZXMgdGhhdCB0aGUgc3RyaW5nIGlzIGNvbnN0YW50IHRocm91Z2hvdXQgdGhlIGZ1bmN0aW9uLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGNvbmZpZ3VyYWJsZSwgY3JlYXRlUHJvcGVydHlDYWxsYmFjaykge1xuICAvL1NhZmFyaSA4LjAuMyBoYXMgYSBKYXZhU2NyaXB0IGJ1ZyB0aGF0IGNhdXNlcyBpdCB0byBjb25mdXNlIHR3byB2YXJpYWJsZXMgYW5kIHRyZWF0IHRoZW0gYXMgdGhlIHNhbWUuXG4gIC8vVGhlIHR3byBleHRyYSB0b1N0cmluZyBjYWxscyB3b3JrIGFyb3VuZCB0aGUgaXNzdWUuXG4gIHJldHVybiBjcmVhdGVQcm9wZXJ0eShcbiAgICBuYW1lLFxuICAgIFwiX1wiICsgbmFtZS50b1N0cmluZygpLFxuICAgIFwiX1wiICsgbmFtZS50b1N0cmluZygpICsgXCJTdWJzY3JpcHRpb25cIixcbiAgICBkZWZhdWx0VmFsdWUoY29uZmlndXJhYmxlLCBmYWxzZSksXG4gICAgZGVmYXVsdFZhbHVlKGNyZWF0ZVByb3BlcnR5Q2FsbGJhY2ssIGNyZWF0ZUNvbnN0YW50UHJvcGVydHkpXG4gICk7XG59XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3I7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///90203\n')},33054:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90203);\n\n\nfunction createRawProperty(value) {\n  return value;\n}\n\n/**\n * @private\n */\nfunction createRawPropertyDescriptor(name, configurable) {\n  return (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(name, configurable, createRawProperty);\n}\n/* harmony default export */ __webpack_exports__["Z"] = (createRawPropertyDescriptor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMwNTQuanMiLCJtYXBwaW5ncyI6IjtBQUFxRTs7QUFFckU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxpRkFBd0I7QUFDakM7QUFDQSx5REFBZSwyQkFBMkIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9jcmVhdGVSYXdQcm9wZXJ0eURlc2NyaXB0b3IuanM/NzEyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yIGZyb20gXCIuL2NyZWF0ZVByb3BlcnR5RGVzY3JpcHRvci5qc1wiO1xuXG5mdW5jdGlvbiBjcmVhdGVSYXdQcm9wZXJ0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUmF3UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGNvbmZpZ3VyYWJsZSkge1xuICByZXR1cm4gY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGNvbmZpZ3VyYWJsZSwgY3JlYXRlUmF3UHJvcGVydHkpO1xufVxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUmF3UHJvcGVydHlEZXNjcmlwdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///33054\n')},53279:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51688);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59947);\n/* harmony import */ var _Core_createGuid_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(39960);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(50491);\n/* harmony import */ var _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22841);\n/* harmony import */ var _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(55293);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(96190);\n/* harmony import */ var _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(17964);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(68985);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(9407);\n/* harmony import */ var _Core_TimeInterval_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(77808);\n/* harmony import */ var _Core_TimeIntervalCollection_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(46026);\n/* harmony import */ var _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(4260);\n/* harmony import */ var _Scene_HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(62919);\n/* harmony import */ var _Scene_VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(60473);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(13222);\n/* harmony import */ var _ThirdParty_zip_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(92678);\n/* harmony import */ var _BillboardGraphics_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(44011);\n/* harmony import */ var _CompositePositionProperty_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(74254);\n/* harmony import */ var _ModelGraphics_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(4949);\n/* harmony import */ var _RectangleGraphics_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(85441);\n/* harmony import */ var _SampledPositionProperty_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(87207);\n/* harmony import */ var _SampledProperty_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(23470);\n/* harmony import */ var _ScaledPositionProperty_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(42098);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar BILLBOARD_SIZE = 32;\nvar kmlNamespace = "http://www.opengis.net/kml/2.2";\nvar gxNamespace = "http://www.google.com/kml/ext/2.2";\nvar xmlnsNamespace = "http://www.w3.org/2000/xmlns/";\n\n//\n// Handles files external to the KML (eg. textures and models)\n//\nfunction ExternalFileHandler(modelCallback) {\n  this._files = {};\n  this._promises = [];\n  this._count = 0;\n  this._modelCallback = modelCallback;\n}\n\nvar imageTypeRegex = /^data:image\\/([^,;]+)/;\nExternalFileHandler.prototype.texture = function (texture) {\n  var that = this;\n  var filename;\n\n  if (typeof texture === "string" || texture instanceof _Core_Resource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z) {\n    texture = _Core_Resource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].createIfNeeded */ .Z.createIfNeeded(texture);\n    if (!texture.isDataUri) {\n      return texture.url;\n    }\n\n    // If its a data URI try and get the correct extension and then fetch the blob\n    var regexResult = texture.url.match(imageTypeRegex);\n    filename = "texture_" + ++this._count;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(regexResult)) {\n      filename += "." + regexResult[1];\n    }\n\n    var promise = texture.fetchBlob().then(function (blob) {\n      that._files[filename] = blob;\n    });\n\n    this._promises.push(promise);\n\n    return filename;\n  }\n\n  if (texture instanceof HTMLCanvasElement) {\n    var deferred = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].defer */ .Z.defer();\n    this._promises.push(deferred.promise);\n\n    filename = "texture_" + ++this._count + ".png";\n    texture.toBlob(function (blob) {\n      that._files[filename] = blob;\n      deferred.resolve();\n    });\n\n    return filename;\n  }\n\n  return "";\n};\n\nfunction getModelBlobHander(that, filename) {\n  return function (blob) {\n    that._files[filename] = blob;\n  };\n}\n\nExternalFileHandler.prototype.model = function (model, time) {\n  var modelCallback = this._modelCallback;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(modelCallback)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z(\n      "Encountered a model entity while exporting to KML, but no model callback was supplied."\n    );\n  }\n\n  var externalFiles = {};\n  var url = modelCallback(model, time, externalFiles);\n\n  // Iterate through external files and add them to our list once the promise resolves\n  for (var filename in externalFiles) {\n    if (externalFiles.hasOwnProperty(filename)) {\n      var promise = (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(externalFiles[filename]);\n      this._promises.push(promise);\n\n      promise.then(getModelBlobHander(this, filename));\n    }\n  }\n\n  return url;\n};\n\nObject.defineProperties(ExternalFileHandler.prototype, {\n  promise: {\n    get: function () {\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].all */ .Z.all(this._promises);\n    },\n  },\n  files: {\n    get: function () {\n      return this._files;\n    },\n  },\n});\n\n//\n// Handles getting values from properties taking the desired time and default values into account\n//\nfunction ValueGetter(time) {\n  this._time = time;\n}\n\nValueGetter.prototype.get = function (property, defaultVal, result) {\n  var value;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(property)) {\n    value = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(property.getValue)\n      ? property.getValue(this._time, result)\n      : property;\n  }\n\n  return (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(value, defaultVal);\n};\n\nValueGetter.prototype.getColor = function (property, defaultVal) {\n  var result = this.get(property, defaultVal);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(result)) {\n    return colorToString(result);\n  }\n};\n\nValueGetter.prototype.getMaterialType = function (property) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(property)) {\n    return;\n  }\n\n  return property.getType(this._time);\n};\n\n//\n// Caches styles so we don\'t generate a ton of duplicate styles\n//\nfunction StyleCache() {\n  this._ids = {};\n  this._styles = {};\n  this._count = 0;\n}\n\nStyleCache.prototype.get = function (element) {\n  var ids = this._ids;\n  var key = element.innerHTML;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(ids[key])) {\n    return ids[key];\n  }\n\n  var styleId = "style-" + ++this._count;\n  element.setAttribute("id", styleId);\n\n  // Store with #\n  styleId = "#" + styleId;\n  ids[key] = styleId;\n  this._styles[key] = element;\n\n  return styleId;\n};\n\nStyleCache.prototype.save = function (parentElement) {\n  var styles = this._styles;\n\n  var firstElement = parentElement.childNodes[0];\n  for (var key in styles) {\n    if (styles.hasOwnProperty(key)) {\n      parentElement.insertBefore(styles[key], firstElement);\n    }\n  }\n};\n\n//\n// Manages the generation of IDs because an entity may have geometry and a Folder for children\n//\nfunction IdManager() {\n  this._ids = {};\n}\n\nIdManager.prototype.get = function (id) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(id)) {\n    return this.get((0,_Core_createGuid_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)());\n  }\n\n  var ids = this._ids;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(ids[id])) {\n    ids[id] = 0;\n    return id;\n  }\n\n  return id.toString() + "-" + ++ids[id];\n};\n\n/**\n * @typedef exportKmlResultKml\n * @type {Object}\n * @property {String} kml The generated KML.\n * @property {Object.<string, Blob>} externalFiles An object dictionary of external files\n */\n\n/**\n * @typedef exportKmlResultKmz\n * @type {Object}\n * @property {Blob} kmz The generated kmz file.\n */\n\n/**\n * Exports an EntityCollection as a KML document. Only Point, Billboard, Model, Path, Polygon, Polyline geometries\n * will be exported. Note that there is not a 1 to 1 mapping of Entity properties to KML Feature properties. For\n * example, entity properties that are time dynamic but cannot be dynamic in KML are exported with their values at\n * options.time or the beginning of the EntityCollection\'s time interval if not specified. For time-dynamic properties\n * that are supported in KML, we use the samples if it is a {@link SampledProperty} otherwise we sample the value using\n * the options.sampleDuration. Point, Billboard, Model and Path geometries with time-dynamic positions will be exported\n * as gx:Track Features. Not all Materials are representable in KML, so for more advanced Materials just the primary\n * color is used. Canvas objects are exported as PNG images.\n *\n * @function exportKml\n *\n * @param {Object} options An object with the following properties:\n * @param {EntityCollection} options.entities The EntityCollection to export as KML.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid for the output file.\n * @param {exportKmlModelCallback} [options.modelCallback] A callback that will be called with a {@link ModelGraphics} instance and should return the URI to use in the KML. Required if a model exists in the entity collection.\n * @param {JulianDate} [options.time=entities.computeAvailability().start] The time value to use to get properties that are not time varying in KML.\n * @param {TimeInterval} [options.defaultAvailability=entities.computeAvailability()] The interval that will be sampled if an entity doesn\'t have an availability.\n * @param {Number} [options.sampleDuration=60] The number of seconds to sample properties that are varying in KML.\n * @param {Boolean} [options.kmz=false] If true KML and external files will be compressed into a kmz file.\n *\n * @returns {Promise<exportKmlResultKml|exportKmlResultKmz>} A promise that resolved to an object containing the KML string and a dictionary of external file blobs, or a kmz file as a blob if options.kmz is true.\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Export%20KML.html|Cesium Sandcastle KML Export Demo}\n * @example\n * Cesium.exportKml({\n *      entities: entityCollection\n *  })\n *   .then(function(result) {\n *     // The XML string is in result.kml\n *\n *     var externalFiles = result.externalFiles\n *     for(var file in externalFiles) {\n *       // file is the name of the file used in the KML document as the href\n *       // externalFiles[file] is a blob with the contents of the file\n *     }\n *   });\n *\n */\nfunction exportKml(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var entities = options.entities;\n  var kmz = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.kmz, false);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(entities)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("entities is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  // Get the state that is passed around during the recursion\n  // This is separated out for testing.\n  var state = exportKml._createState(options);\n\n  // Filter EntityCollection so we only have top level entities\n  var rootEntities = entities.values.filter(function (entity) {\n    return !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(entity.parent);\n  });\n\n  // Add the <Document>\n  var kmlDoc = state.kmlDoc;\n  var kmlElement = kmlDoc.documentElement;\n  kmlElement.setAttributeNS(xmlnsNamespace, "xmlns:gx", gxNamespace);\n  var kmlDocumentElement = kmlDoc.createElement("Document");\n  kmlElement.appendChild(kmlDocumentElement);\n\n  // Create the KML Hierarchy\n  recurseEntities(state, kmlDocumentElement, rootEntities);\n\n  // Write out the <Style> elements\n  state.styleCache.save(kmlDocumentElement);\n\n  // Once all the blobs have resolved return the KML string along with the blob collection\n  var externalFileHandler = state.externalFileHandler;\n  return externalFileHandler.promise.then(function () {\n    var serializer = new XMLSerializer();\n    var kmlString = serializer.serializeToString(state.kmlDoc);\n    if (kmz) {\n      return createKmz(kmlString, externalFileHandler.files);\n    }\n\n    return {\n      kml: kmlString,\n      externalFiles: externalFileHandler.files,\n    };\n  });\n}\n\nfunction createKmz(kmlString, externalFiles) {\n  var blobWriter = new _ThirdParty_zip_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].BlobWriter */ .Z.BlobWriter();\n  var writer = new _ThirdParty_zip_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].ZipWriter */ .Z.ZipWriter(blobWriter);\n  // We need to only write one file at a time so the zip doesn\'t get corrupted\n  return (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(writer.add("doc.kml", new _ThirdParty_zip_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].TextReader */ .Z.TextReader(kmlString)))\n    .then(function () {\n      var keys = Object.keys(externalFiles);\n      return addExternalFilesToZip(writer, keys, externalFiles, 0);\n    })\n    .then(function () {\n      return (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(writer.close()).then(function (blob) {\n        return {\n          kmz: blob,\n        };\n      });\n    });\n}\n\nfunction addExternalFilesToZip(writer, keys, externalFiles, index) {\n  if (keys.length === index) {\n    return;\n  }\n  var filename = keys[index];\n  return (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(\n    writer.add(filename, new _ThirdParty_zip_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].BlobReader */ .Z.BlobReader(externalFiles[filename]))\n  ).then(function () {\n    return addExternalFilesToZip(writer, keys, externalFiles, index + 1);\n  });\n}\n\nexportKml._createState = function (options) {\n  var entities = options.entities;\n\n  var styleCache = new StyleCache();\n\n  // Use the start time as the default because just in case they define\n  //  properties with an interval even if they don\'t change.\n  var entityAvailability = entities.computeAvailability();\n  var time = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(options.time) ? options.time : entityAvailability.start;\n\n  // Figure out how we will sample dynamic position properties\n  var defaultAvailability = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(\n    options.defaultAvailability,\n    entityAvailability\n  );\n  var sampleDuration = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.sampleDuration, 60);\n\n  // Make sure we don\'t have infinite availability if we need to sample\n  if (defaultAvailability.start === _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE) {\n    if (defaultAvailability.stop === _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MAXIMUM_VALUE */ .Z.MAXIMUM_VALUE) {\n      // Infinite, so just use the default\n      defaultAvailability = new _Core_TimeInterval_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z();\n    } else {\n      // No start time, so just sample 10 times before the stop\n      _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].addSeconds */ .Z.addSeconds(\n        defaultAvailability.stop,\n        -10 * sampleDuration,\n        defaultAvailability.start\n      );\n    }\n  } else if (defaultAvailability.stop === _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MAXIMUM_VALUE */ .Z.MAXIMUM_VALUE) {\n    // No stop time, so just sample 10 times after the start\n    _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].addSeconds */ .Z.addSeconds(\n      defaultAvailability.start,\n      10 * sampleDuration,\n      defaultAvailability.stop\n    );\n  }\n\n  var externalFileHandler = new ExternalFileHandler(options.modelCallback);\n\n  var kmlDoc = document.implementation.createDocument(kmlNamespace, "kml");\n  return {\n    kmlDoc: kmlDoc,\n    ellipsoid: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.ellipsoid, _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].WGS84 */ .Z.WGS84),\n    idManager: new IdManager(),\n    styleCache: styleCache,\n    externalFileHandler: externalFileHandler,\n    time: time,\n    valueGetter: new ValueGetter(time),\n    sampleDuration: sampleDuration,\n    // Wrap it in a TimeIntervalCollection because that is what entity.availability is\n    defaultAvailability: new _Core_TimeIntervalCollection_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z([defaultAvailability]),\n  };\n};\n\nfunction recurseEntities(state, parentNode, entities) {\n  var kmlDoc = state.kmlDoc;\n  var styleCache = state.styleCache;\n  var valueGetter = state.valueGetter;\n  var idManager = state.idManager;\n\n  var count = entities.length;\n  var overlays;\n  var geometries;\n  var styles;\n  for (var i = 0; i < count; ++i) {\n    var entity = entities[i];\n    overlays = [];\n    geometries = [];\n    styles = [];\n\n    createPoint(state, entity, geometries, styles);\n    createLineString(state, entity.polyline, geometries, styles);\n    createPolygon(state, entity.rectangle, geometries, styles, overlays);\n    createPolygon(state, entity.polygon, geometries, styles, overlays);\n    createModel(state, entity, entity.model, geometries, styles);\n\n    var timeSpan;\n    var availability = entity.availability;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(availability)) {\n      timeSpan = kmlDoc.createElement("TimeSpan");\n\n      if (!_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].equals */ .Z.equals(availability.start, _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE)) {\n        timeSpan.appendChild(\n          createBasicElementWithText(\n            kmlDoc,\n            "begin",\n            _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(availability.start)\n          )\n        );\n      }\n\n      if (!_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].equals */ .Z.equals(availability.stop, _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MAXIMUM_VALUE */ .Z.MAXIMUM_VALUE)) {\n        timeSpan.appendChild(\n          createBasicElementWithText(\n            kmlDoc,\n            "end",\n            _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(availability.stop)\n          )\n        );\n      }\n    }\n\n    for (var overlayIndex = 0; overlayIndex < overlays.length; ++overlayIndex) {\n      var overlay = overlays[overlayIndex];\n\n      overlay.setAttribute("id", idManager.get(entity.id));\n      overlay.appendChild(\n        createBasicElementWithText(kmlDoc, "name", entity.name)\n      );\n      overlay.appendChild(\n        createBasicElementWithText(kmlDoc, "visibility", entity.show)\n      );\n      overlay.appendChild(\n        createBasicElementWithText(kmlDoc, "description", entity.description)\n      );\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(timeSpan)) {\n        overlay.appendChild(timeSpan);\n      }\n\n      parentNode.appendChild(overlay);\n    }\n\n    var geometryCount = geometries.length;\n    if (geometryCount > 0) {\n      var placemark = kmlDoc.createElement("Placemark");\n      placemark.setAttribute("id", idManager.get(entity.id));\n\n      var name = entity.name;\n      var labelGraphics = entity.label;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(labelGraphics)) {\n        var labelStyle = kmlDoc.createElement("LabelStyle");\n\n        // KML only shows the name as a label, so just change the name if we need to show a label\n        var text = valueGetter.get(labelGraphics.text);\n        name = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(text) && text.length > 0 ? text : name;\n\n        var color = valueGetter.getColor(labelGraphics.fillColor);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(color)) {\n          labelStyle.appendChild(\n            createBasicElementWithText(kmlDoc, "color", color)\n          );\n          labelStyle.appendChild(\n            createBasicElementWithText(kmlDoc, "colorMode", "normal")\n          );\n        }\n\n        var scale = valueGetter.get(labelGraphics.scale);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(scale)) {\n          labelStyle.appendChild(\n            createBasicElementWithText(kmlDoc, "scale", scale)\n          );\n        }\n\n        styles.push(labelStyle);\n      }\n\n      placemark.appendChild(createBasicElementWithText(kmlDoc, "name", name));\n      placemark.appendChild(\n        createBasicElementWithText(kmlDoc, "visibility", entity.show)\n      );\n      placemark.appendChild(\n        createBasicElementWithText(kmlDoc, "description", entity.description)\n      );\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(timeSpan)) {\n        placemark.appendChild(timeSpan);\n      }\n\n      parentNode.appendChild(placemark);\n\n      var styleCount = styles.length;\n      if (styleCount > 0) {\n        var style = kmlDoc.createElement("Style");\n        for (var styleIndex = 0; styleIndex < styleCount; ++styleIndex) {\n          style.appendChild(styles[styleIndex]);\n        }\n\n        placemark.appendChild(\n          createBasicElementWithText(kmlDoc, "styleUrl", styleCache.get(style))\n        );\n      }\n\n      if (geometries.length === 1) {\n        placemark.appendChild(geometries[0]);\n      } else if (geometries.length > 1) {\n        var multigeometry = kmlDoc.createElement("MultiGeometry");\n        for (\n          var geometryIndex = 0;\n          geometryIndex < geometryCount;\n          ++geometryIndex\n        ) {\n          multigeometry.appendChild(geometries[geometryIndex]);\n        }\n        placemark.appendChild(multigeometry);\n      }\n    }\n\n    var children = entity._children;\n    if (children.length > 0) {\n      var folderNode = kmlDoc.createElement("Folder");\n      folderNode.setAttribute("id", idManager.get(entity.id));\n      folderNode.appendChild(\n        createBasicElementWithText(kmlDoc, "name", entity.name)\n      );\n      folderNode.appendChild(\n        createBasicElementWithText(kmlDoc, "visibility", entity.show)\n      );\n      folderNode.appendChild(\n        createBasicElementWithText(kmlDoc, "description", entity.description)\n      );\n\n      parentNode.appendChild(folderNode);\n\n      recurseEntities(state, folderNode, children);\n    }\n  }\n}\n\nvar scratchCartesian3 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchJulianDate = new _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z();\n\nfunction createPoint(state, entity, geometries, styles) {\n  var kmlDoc = state.kmlDoc;\n  var ellipsoid = state.ellipsoid;\n  var valueGetter = state.valueGetter;\n\n  var pointGraphics = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(entity.billboard, entity.point);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(pointGraphics) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(entity.path)) {\n    return;\n  }\n\n  // If the point isn\'t constant then create gx:Track or gx:MultiTrack\n  var entityPositionProperty = entity.position;\n  if (!entityPositionProperty.isConstant) {\n    createTracks(state, entity, pointGraphics, geometries, styles);\n    return;\n  }\n\n  valueGetter.get(entityPositionProperty, undefined, scratchCartesian3);\n  var coordinates = createBasicElementWithText(\n    kmlDoc,\n    "coordinates",\n    getCoordinates(scratchCartesian3, ellipsoid)\n  );\n\n  var pointGeometry = kmlDoc.createElement("Point");\n\n  // Set altitude mode\n  var altitudeMode = kmlDoc.createElement("altitudeMode");\n  altitudeMode.appendChild(\n    getAltitudeMode(state, pointGraphics.heightReference)\n  );\n  pointGeometry.appendChild(altitudeMode);\n\n  pointGeometry.appendChild(coordinates);\n  geometries.push(pointGeometry);\n\n  // Create style\n  var iconStyle =\n    pointGraphics instanceof _BillboardGraphics_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z\n      ? createIconStyleFromBillboard(state, pointGraphics)\n      : createIconStyleFromPoint(state, pointGraphics);\n  styles.push(iconStyle);\n}\n\nfunction createTracks(state, entity, pointGraphics, geometries, styles) {\n  var kmlDoc = state.kmlDoc;\n  var ellipsoid = state.ellipsoid;\n  var valueGetter = state.valueGetter;\n\n  var intervals;\n  var entityPositionProperty = entity.position;\n  var useEntityPositionProperty = true;\n  if (entityPositionProperty instanceof _CompositePositionProperty_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z) {\n    intervals = entityPositionProperty.intervals;\n    useEntityPositionProperty = false;\n  } else {\n    intervals = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(entity.availability, state.defaultAvailability);\n  }\n\n  var isModel = pointGraphics instanceof _ModelGraphics_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z;\n\n  var i, j, times;\n  var tracks = [];\n  for (i = 0; i < intervals.length; ++i) {\n    var interval = intervals.get(i);\n    var positionProperty = useEntityPositionProperty\n      ? entityPositionProperty\n      : interval.data;\n\n    var trackAltitudeMode = kmlDoc.createElement("altitudeMode");\n    // This is something that KML importing uses to handle clampToGround,\n    //  so just extract the internal property and set the altitudeMode.\n    if (positionProperty instanceof _ScaledPositionProperty_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z) {\n      positionProperty = positionProperty._value;\n      trackAltitudeMode.appendChild(\n        getAltitudeMode(state, _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].CLAMP_TO_GROUND */ .Z.CLAMP_TO_GROUND)\n      );\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(pointGraphics)) {\n      trackAltitudeMode.appendChild(\n        getAltitudeMode(state, pointGraphics.heightReference)\n      );\n    } else {\n      // Path graphics only, which has no height reference\n      trackAltitudeMode.appendChild(\n        getAltitudeMode(state, _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].NONE */ .Z.NONE)\n      );\n    }\n\n    var positionTimes = [];\n    var positionValues = [];\n\n    if (positionProperty.isConstant) {\n      valueGetter.get(positionProperty, undefined, scratchCartesian3);\n      var constCoordinates = createBasicElementWithText(\n        kmlDoc,\n        "coordinates",\n        getCoordinates(scratchCartesian3, ellipsoid)\n      );\n\n      // This interval is constant so add a track with the same position\n      positionTimes.push(_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(interval.start));\n      positionValues.push(constCoordinates);\n      positionTimes.push(_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(interval.stop));\n      positionValues.push(constCoordinates);\n    } else if (positionProperty instanceof _SampledPositionProperty_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z) {\n      times = positionProperty._property._times;\n\n      for (j = 0; j < times.length; ++j) {\n        positionTimes.push(_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(times[j]));\n        positionProperty.getValueInReferenceFrame(\n          times[j],\n          _Core_ReferenceFrame_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].FIXED */ .Z.FIXED,\n          scratchCartesian3\n        );\n        positionValues.push(getCoordinates(scratchCartesian3, ellipsoid));\n      }\n    } else if (positionProperty instanceof _SampledProperty_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z) {\n      times = positionProperty._times;\n      var values = positionProperty._values;\n\n      for (j = 0; j < times.length; ++j) {\n        positionTimes.push(_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(times[j]));\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromArray */ .Z.fromArray(values, j * 3, scratchCartesian3);\n        positionValues.push(getCoordinates(scratchCartesian3, ellipsoid));\n      }\n    } else {\n      var duration = state.sampleDuration;\n      interval.start.clone(scratchJulianDate);\n      if (!interval.isStartIncluded) {\n        _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].addSeconds */ .Z.addSeconds(scratchJulianDate, duration, scratchJulianDate);\n      }\n\n      var stopDate = interval.stop;\n      while (_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].lessThan */ .Z.lessThan(scratchJulianDate, stopDate)) {\n        positionProperty.getValue(scratchJulianDate, scratchCartesian3);\n\n        positionTimes.push(_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(scratchJulianDate));\n        positionValues.push(getCoordinates(scratchCartesian3, ellipsoid));\n\n        _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].addSeconds */ .Z.addSeconds(scratchJulianDate, duration, scratchJulianDate);\n      }\n\n      if (\n        interval.isStopIncluded &&\n        _Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].equals */ .Z.equals(scratchJulianDate, stopDate)\n      ) {\n        positionProperty.getValue(scratchJulianDate, scratchCartesian3);\n\n        positionTimes.push(_Core_JulianDate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].toIso8601 */ .Z.toIso8601(scratchJulianDate));\n        positionValues.push(getCoordinates(scratchCartesian3, ellipsoid));\n      }\n    }\n\n    var trackGeometry = kmlDoc.createElementNS(gxNamespace, "Track");\n    trackGeometry.appendChild(trackAltitudeMode);\n\n    for (var k = 0; k < positionTimes.length; ++k) {\n      var when = createBasicElementWithText(kmlDoc, "when", positionTimes[k]);\n      var coord = createBasicElementWithText(\n        kmlDoc,\n        "coord",\n        positionValues[k],\n        gxNamespace\n      );\n\n      trackGeometry.appendChild(when);\n      trackGeometry.appendChild(coord);\n    }\n\n    if (isModel) {\n      trackGeometry.appendChild(createModelGeometry(state, pointGraphics));\n    }\n\n    tracks.push(trackGeometry);\n  }\n\n  // If one track, then use it otherwise combine into a multitrack\n  if (tracks.length === 1) {\n    geometries.push(tracks[0]);\n  } else if (tracks.length > 1) {\n    var multiTrackGeometry = kmlDoc.createElementNS(gxNamespace, "MultiTrack");\n\n    for (i = 0; i < tracks.length; ++i) {\n      multiTrackGeometry.appendChild(tracks[i]);\n    }\n\n    geometries.push(multiTrackGeometry);\n  }\n\n  // Create style\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(pointGraphics) && !isModel) {\n    var iconStyle =\n      pointGraphics instanceof _BillboardGraphics_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z\n        ? createIconStyleFromBillboard(state, pointGraphics)\n        : createIconStyleFromPoint(state, pointGraphics);\n    styles.push(iconStyle);\n  }\n\n  // See if we have a line that needs to be drawn\n  var path = entity.path;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(path)) {\n    var width = valueGetter.get(path.width);\n    var material = path.material;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(material) || (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(width)) {\n      var lineStyle = kmlDoc.createElement("LineStyle");\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(width)) {\n        lineStyle.appendChild(\n          createBasicElementWithText(kmlDoc, "width", width)\n        );\n      }\n\n      processMaterial(state, material, lineStyle);\n      styles.push(lineStyle);\n    }\n  }\n}\n\nfunction createIconStyleFromPoint(state, pointGraphics) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n\n  var iconStyle = kmlDoc.createElement("IconStyle");\n\n  var color = valueGetter.getColor(pointGraphics.color);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(color)) {\n    iconStyle.appendChild(createBasicElementWithText(kmlDoc, "color", color));\n    iconStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "colorMode", "normal")\n    );\n  }\n\n  var pixelSize = valueGetter.get(pointGraphics.pixelSize);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(pixelSize)) {\n    iconStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "scale", pixelSize / BILLBOARD_SIZE)\n    );\n  }\n\n  return iconStyle;\n}\n\nfunction createIconStyleFromBillboard(state, billboardGraphics) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n  var externalFileHandler = state.externalFileHandler;\n\n  var iconStyle = kmlDoc.createElement("IconStyle");\n\n  var image = valueGetter.get(billboardGraphics.image);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(image)) {\n    image = externalFileHandler.texture(image);\n\n    var icon = kmlDoc.createElement("Icon");\n    icon.appendChild(createBasicElementWithText(kmlDoc, "href", image));\n\n    var imageSubRegion = valueGetter.get(billboardGraphics.imageSubRegion);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(imageSubRegion)) {\n      icon.appendChild(\n        createBasicElementWithText(kmlDoc, "x", imageSubRegion.x, gxNamespace)\n      );\n      icon.appendChild(\n        createBasicElementWithText(kmlDoc, "y", imageSubRegion.y, gxNamespace)\n      );\n      icon.appendChild(\n        createBasicElementWithText(\n          kmlDoc,\n          "w",\n          imageSubRegion.width,\n          gxNamespace\n        )\n      );\n      icon.appendChild(\n        createBasicElementWithText(\n          kmlDoc,\n          "h",\n          imageSubRegion.height,\n          gxNamespace\n        )\n      );\n    }\n\n    iconStyle.appendChild(icon);\n  }\n\n  var color = valueGetter.getColor(billboardGraphics.color);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(color)) {\n    iconStyle.appendChild(createBasicElementWithText(kmlDoc, "color", color));\n    iconStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "colorMode", "normal")\n    );\n  }\n\n  var scale = valueGetter.get(billboardGraphics.scale);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(scale)) {\n    iconStyle.appendChild(createBasicElementWithText(kmlDoc, "scale", scale));\n  }\n\n  var pixelOffset = valueGetter.get(billboardGraphics.pixelOffset);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(pixelOffset)) {\n    scale = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(scale, 1.0);\n\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].divideByScalar */ .Z.divideByScalar(pixelOffset, scale, pixelOffset);\n\n    var width = valueGetter.get(billboardGraphics.width, BILLBOARD_SIZE);\n    var height = valueGetter.get(billboardGraphics.height, BILLBOARD_SIZE);\n\n    // KML Hotspots are from the bottom left, but we work from the top left\n\n    // Move to left\n    var horizontalOrigin = valueGetter.get(\n      billboardGraphics.horizontalOrigin,\n      _Scene_HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].CENTER */ .Z.CENTER\n    );\n    if (horizontalOrigin === _Scene_HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].CENTER */ .Z.CENTER) {\n      pixelOffset.x -= width * 0.5;\n    } else if (horizontalOrigin === _Scene_HorizontalOrigin_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].RIGHT */ .Z.RIGHT) {\n      pixelOffset.x -= width;\n    }\n\n    // Move to bottom\n    var verticalOrigin = valueGetter.get(\n      billboardGraphics.verticalOrigin,\n      _Scene_VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CENTER */ .Z.CENTER\n    );\n    if (verticalOrigin === _Scene_VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].TOP */ .Z.TOP) {\n      pixelOffset.y += height;\n    } else if (verticalOrigin === _Scene_VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CENTER */ .Z.CENTER) {\n      pixelOffset.y += height * 0.5;\n    }\n\n    var hotSpot = kmlDoc.createElement("hotSpot");\n    hotSpot.setAttribute("x", -pixelOffset.x);\n    hotSpot.setAttribute("y", pixelOffset.y);\n    hotSpot.setAttribute("xunits", "pixels");\n    hotSpot.setAttribute("yunits", "pixels");\n\n    iconStyle.appendChild(hotSpot);\n  }\n\n  // We can only specify heading so if axis isn\'t Z, then we skip the rotation\n  // GE treats a heading of zero as no heading but can still point north using a 360 degree angle\n  var rotation = valueGetter.get(billboardGraphics.rotation);\n  var alignedAxis = valueGetter.get(billboardGraphics.alignedAxis);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(rotation) && _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equals */ .Z.equals(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].UNIT_Z */ .Z.UNIT_Z, alignedAxis)) {\n    rotation = _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(-rotation);\n    if (rotation === 0) {\n      rotation = 360;\n    }\n\n    iconStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "heading", rotation)\n    );\n  }\n\n  return iconStyle;\n}\n\nfunction createLineString(state, polylineGraphics, geometries, styles) {\n  var kmlDoc = state.kmlDoc;\n  var ellipsoid = state.ellipsoid;\n  var valueGetter = state.valueGetter;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(polylineGraphics)) {\n    return;\n  }\n\n  var lineStringGeometry = kmlDoc.createElement("LineString");\n\n  // Set altitude mode\n  var altitudeMode = kmlDoc.createElement("altitudeMode");\n  var clampToGround = valueGetter.get(polylineGraphics.clampToGround, false);\n  var altitudeModeText;\n  if (clampToGround) {\n    lineStringGeometry.appendChild(\n      createBasicElementWithText(kmlDoc, "tessellate", true)\n    );\n    altitudeModeText = kmlDoc.createTextNode("clampToGround");\n  } else {\n    altitudeModeText = kmlDoc.createTextNode("absolute");\n  }\n  altitudeMode.appendChild(altitudeModeText);\n  lineStringGeometry.appendChild(altitudeMode);\n\n  // Set coordinates\n  var positionsProperty = polylineGraphics.positions;\n  var cartesians = valueGetter.get(positionsProperty);\n  var coordinates = createBasicElementWithText(\n    kmlDoc,\n    "coordinates",\n    getCoordinates(cartesians, ellipsoid)\n  );\n  lineStringGeometry.appendChild(coordinates);\n\n  // Set draw order\n  var zIndex = valueGetter.get(polylineGraphics.zIndex);\n  if (clampToGround && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(zIndex)) {\n    lineStringGeometry.appendChild(\n      createBasicElementWithText(kmlDoc, "drawOrder", zIndex, gxNamespace)\n    );\n  }\n\n  geometries.push(lineStringGeometry);\n\n  // Create style\n  var lineStyle = kmlDoc.createElement("LineStyle");\n\n  var width = valueGetter.get(polylineGraphics.width);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(width)) {\n    lineStyle.appendChild(createBasicElementWithText(kmlDoc, "width", width));\n  }\n\n  processMaterial(state, polylineGraphics.material, lineStyle);\n\n  styles.push(lineStyle);\n}\n\nfunction getRectangleBoundaries(state, rectangleGraphics, extrudedHeight) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n\n  var coordinates;\n  var height = valueGetter.get(rectangleGraphics.height, 0.0);\n\n  if (extrudedHeight > 0) {\n    // We extrude up and KML extrudes down, so if we extrude, set the polygon height to\n    // the extruded height so KML will look similar to Cesium\n    height = extrudedHeight;\n  }\n\n  var coordinatesProperty = rectangleGraphics.coordinates;\n  var rectangle = valueGetter.get(coordinatesProperty);\n\n  var coordinateStrings = [];\n  var cornerFunction = [\n    _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].northeast */ .Z.northeast,\n    _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].southeast */ .Z.southeast,\n    _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].southwest */ .Z.southwest,\n    _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].northwest */ .Z.northwest,\n  ];\n\n  for (var i = 0; i < 4; ++i) {\n    cornerFunction[i](rectangle, scratchCartographic);\n    coordinateStrings.push(\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.longitude) +\n        "," +\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.latitude) +\n        "," +\n        height\n    );\n  }\n\n  coordinates = createBasicElementWithText(\n    kmlDoc,\n    "coordinates",\n    coordinateStrings.join(" ")\n  );\n\n  var outerBoundaryIs = kmlDoc.createElement("outerBoundaryIs");\n  var linearRing = kmlDoc.createElement("LinearRing");\n  linearRing.appendChild(coordinates);\n  outerBoundaryIs.appendChild(linearRing);\n\n  return [outerBoundaryIs];\n}\n\nfunction getLinearRing(state, positions, height, perPositionHeight) {\n  var kmlDoc = state.kmlDoc;\n  var ellipsoid = state.ellipsoid;\n\n  var coordinateStrings = [];\n  var positionCount = positions.length;\n  for (var i = 0; i < positionCount; ++i) {\n    _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCartesian */ .Z.fromCartesian(positions[i], ellipsoid, scratchCartographic);\n    coordinateStrings.push(\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.longitude) +\n        "," +\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.latitude) +\n        "," +\n        (perPositionHeight ? scratchCartographic.height : height)\n    );\n  }\n\n  var coordinates = createBasicElementWithText(\n    kmlDoc,\n    "coordinates",\n    coordinateStrings.join(" ")\n  );\n  var linearRing = kmlDoc.createElement("LinearRing");\n  linearRing.appendChild(coordinates);\n\n  return linearRing;\n}\n\nfunction getPolygonBoundaries(state, polygonGraphics, extrudedHeight) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n\n  var height = valueGetter.get(polygonGraphics.height, 0.0);\n  var perPositionHeight = valueGetter.get(\n    polygonGraphics.perPositionHeight,\n    false\n  );\n\n  if (!perPositionHeight && extrudedHeight > 0) {\n    // We extrude up and KML extrudes down, so if we extrude, set the polygon height to\n    // the extruded height so KML will look similar to Cesium\n    height = extrudedHeight;\n  }\n\n  var boundaries = [];\n  var hierarchyProperty = polygonGraphics.hierarchy;\n  var hierarchy = valueGetter.get(hierarchyProperty);\n\n  // Polygon hierarchy can sometimes just be an array of positions\n  var positions = Array.isArray(hierarchy) ? hierarchy : hierarchy.positions;\n\n  // Polygon boundaries\n  var outerBoundaryIs = kmlDoc.createElement("outerBoundaryIs");\n  outerBoundaryIs.appendChild(\n    getLinearRing(state, positions, height, perPositionHeight)\n  );\n  boundaries.push(outerBoundaryIs);\n\n  // Hole boundaries\n  var holes = hierarchy.holes;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(holes)) {\n    var holeCount = holes.length;\n    for (var i = 0; i < holeCount; ++i) {\n      var innerBoundaryIs = kmlDoc.createElement("innerBoundaryIs");\n      innerBoundaryIs.appendChild(\n        getLinearRing(state, holes[i].positions, height, perPositionHeight)\n      );\n      boundaries.push(innerBoundaryIs);\n    }\n  }\n\n  return boundaries;\n}\n\nfunction createPolygon(state, geometry, geometries, styles, overlays) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(geometry)) {\n    return;\n  }\n\n  // Detect textured quads and use ground overlays instead\n  var isRectangle = geometry instanceof _RectangleGraphics_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z;\n  if (\n    isRectangle &&\n    valueGetter.getMaterialType(geometry.material) === "Image"\n  ) {\n    createGroundOverlay(state, geometry, overlays);\n    return;\n  }\n\n  var polygonGeometry = kmlDoc.createElement("Polygon");\n\n  var extrudedHeight = valueGetter.get(geometry.extrudedHeight, 0.0);\n  if (extrudedHeight > 0) {\n    polygonGeometry.appendChild(\n      createBasicElementWithText(kmlDoc, "extrude", true)\n    );\n  }\n\n  // Set boundaries\n  var boundaries = isRectangle\n    ? getRectangleBoundaries(state, geometry, extrudedHeight)\n    : getPolygonBoundaries(state, geometry, extrudedHeight);\n\n  var boundaryCount = boundaries.length;\n  for (var i = 0; i < boundaryCount; ++i) {\n    polygonGeometry.appendChild(boundaries[i]);\n  }\n\n  // Set altitude mode\n  var altitudeMode = kmlDoc.createElement("altitudeMode");\n  altitudeMode.appendChild(getAltitudeMode(state, geometry.heightReference));\n  polygonGeometry.appendChild(altitudeMode);\n\n  geometries.push(polygonGeometry);\n\n  // Create style\n  var polyStyle = kmlDoc.createElement("PolyStyle");\n\n  var fill = valueGetter.get(geometry.fill, false);\n  if (fill) {\n    polyStyle.appendChild(createBasicElementWithText(kmlDoc, "fill", fill));\n  }\n\n  processMaterial(state, geometry.material, polyStyle);\n\n  var outline = valueGetter.get(geometry.outline, false);\n  if (outline) {\n    polyStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "outline", outline)\n    );\n\n    // Outline uses LineStyle\n    var lineStyle = kmlDoc.createElement("LineStyle");\n\n    var outlineWidth = valueGetter.get(geometry.outlineWidth, 1.0);\n    lineStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "width", outlineWidth)\n    );\n\n    var outlineColor = valueGetter.getColor(geometry.outlineColor, _Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].BLACK */ .Z.BLACK);\n    lineStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "color", outlineColor)\n    );\n    lineStyle.appendChild(\n      createBasicElementWithText(kmlDoc, "colorMode", "normal")\n    );\n\n    styles.push(lineStyle);\n  }\n\n  styles.push(polyStyle);\n}\n\nfunction createGroundOverlay(state, rectangleGraphics, overlays) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n  var externalFileHandler = state.externalFileHandler;\n\n  var groundOverlay = kmlDoc.createElement("GroundOverlay");\n\n  // Set altitude mode\n  var altitudeMode = kmlDoc.createElement("altitudeMode");\n  altitudeMode.appendChild(\n    getAltitudeMode(state, rectangleGraphics.heightReference)\n  );\n  groundOverlay.appendChild(altitudeMode);\n\n  var height = valueGetter.get(rectangleGraphics.height);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(height)) {\n    groundOverlay.appendChild(\n      createBasicElementWithText(kmlDoc, "altitude", height)\n    );\n  }\n\n  var rectangle = valueGetter.get(rectangleGraphics.coordinates);\n  var latLonBox = kmlDoc.createElement("LatLonBox");\n  latLonBox.appendChild(\n    createBasicElementWithText(\n      kmlDoc,\n      "north",\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(rectangle.north)\n    )\n  );\n  latLonBox.appendChild(\n    createBasicElementWithText(\n      kmlDoc,\n      "south",\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(rectangle.south)\n    )\n  );\n  latLonBox.appendChild(\n    createBasicElementWithText(\n      kmlDoc,\n      "east",\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(rectangle.east)\n    )\n  );\n  latLonBox.appendChild(\n    createBasicElementWithText(\n      kmlDoc,\n      "west",\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(rectangle.west)\n    )\n  );\n  groundOverlay.appendChild(latLonBox);\n\n  // We should only end up here if we have an ImageMaterialProperty\n  var material = valueGetter.get(rectangleGraphics.material);\n  var href = externalFileHandler.texture(material.image);\n  var icon = kmlDoc.createElement("Icon");\n  icon.appendChild(createBasicElementWithText(kmlDoc, "href", href));\n  groundOverlay.appendChild(icon);\n\n  var color = material.color;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(color)) {\n    groundOverlay.appendChild(\n      createBasicElementWithText(kmlDoc, "color", colorToString(material.color))\n    );\n  }\n\n  overlays.push(groundOverlay);\n}\n\nfunction createModelGeometry(state, modelGraphics) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n  var externalFileHandler = state.externalFileHandler;\n\n  var modelGeometry = kmlDoc.createElement("Model");\n\n  var scale = valueGetter.get(modelGraphics.scale);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(scale)) {\n    var scaleElement = kmlDoc.createElement("scale");\n    scaleElement.appendChild(createBasicElementWithText(kmlDoc, "x", scale));\n    scaleElement.appendChild(createBasicElementWithText(kmlDoc, "y", scale));\n    scaleElement.appendChild(createBasicElementWithText(kmlDoc, "z", scale));\n    modelGeometry.appendChild(scaleElement);\n  }\n\n  var link = kmlDoc.createElement("Link");\n  var uri = externalFileHandler.model(modelGraphics, state.time);\n\n  link.appendChild(createBasicElementWithText(kmlDoc, "href", uri));\n  modelGeometry.appendChild(link);\n\n  return modelGeometry;\n}\n\nfunction createModel(state, entity, modelGraphics, geometries, styles) {\n  var kmlDoc = state.kmlDoc;\n  var ellipsoid = state.ellipsoid;\n  var valueGetter = state.valueGetter;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(modelGraphics)) {\n    return;\n  }\n\n  // If the point isn\'t constant then create gx:Track or gx:MultiTrack\n  var entityPositionProperty = entity.position;\n  if (!entityPositionProperty.isConstant) {\n    createTracks(state, entity, modelGraphics, geometries, styles);\n    return;\n  }\n\n  var modelGeometry = createModelGeometry(state, modelGraphics);\n\n  // Set altitude mode\n  var altitudeMode = kmlDoc.createElement("altitudeMode");\n  altitudeMode.appendChild(\n    getAltitudeMode(state, modelGraphics.heightReference)\n  );\n  modelGeometry.appendChild(altitudeMode);\n\n  valueGetter.get(entityPositionProperty, undefined, scratchCartesian3);\n  _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCartesian */ .Z.fromCartesian(scratchCartesian3, ellipsoid, scratchCartographic);\n  var location = kmlDoc.createElement("Location");\n  location.appendChild(\n    createBasicElementWithText(\n      kmlDoc,\n      "longitude",\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.longitude)\n    )\n  );\n  location.appendChild(\n    createBasicElementWithText(\n      kmlDoc,\n      "latitude",\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.latitude)\n    )\n  );\n  location.appendChild(\n    createBasicElementWithText(kmlDoc, "altitude", scratchCartographic.height)\n  );\n  modelGeometry.appendChild(location);\n\n  geometries.push(modelGeometry);\n}\n\nfunction processMaterial(state, materialProperty, style) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(materialProperty)) {\n    return;\n  }\n\n  var material = valueGetter.get(materialProperty);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(material)) {\n    return;\n  }\n\n  var color;\n  var type = valueGetter.getMaterialType(materialProperty);\n  switch (type) {\n    case "Image":\n      // Image materials are only able to be represented on rectangles, so if we make it\n      //  here we can\'t texture a generic polygon or polyline in KML, so just use white.\n      color = colorToString(_Core_Color_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].WHITE */ .Z.WHITE);\n      break;\n    case "Color":\n    case "Grid":\n    case "PolylineGlow":\n    case "PolylineArrow":\n    case "PolylineDash":\n      color = colorToString(material.color);\n      break;\n    case "PolylineOutline":\n      color = colorToString(material.color);\n\n      var outlineColor = colorToString(material.outlineColor);\n      var outlineWidth = material.outlineWidth;\n      style.appendChild(\n        createBasicElementWithText(\n          kmlDoc,\n          "outerColor",\n          outlineColor,\n          gxNamespace\n        )\n      );\n      style.appendChild(\n        createBasicElementWithText(\n          kmlDoc,\n          "outerWidth",\n          outlineWidth,\n          gxNamespace\n        )\n      );\n      break;\n    case "Stripe":\n      color = colorToString(material.oddColor);\n      break;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(color)) {\n    style.appendChild(createBasicElementWithText(kmlDoc, "color", color));\n    style.appendChild(\n      createBasicElementWithText(kmlDoc, "colorMode", "normal")\n    );\n  }\n}\n\nfunction getAltitudeMode(state, heightReferenceProperty) {\n  var kmlDoc = state.kmlDoc;\n  var valueGetter = state.valueGetter;\n\n  var heightReference = valueGetter.get(\n    heightReferenceProperty,\n    _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].NONE */ .Z.NONE\n  );\n  var altitudeModeText;\n  switch (heightReference) {\n    case _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].NONE */ .Z.NONE:\n      altitudeModeText = kmlDoc.createTextNode("absolute");\n      break;\n    case _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].CLAMP_TO_GROUND */ .Z.CLAMP_TO_GROUND:\n      altitudeModeText = kmlDoc.createTextNode("clampToGround");\n      break;\n    case _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].RELATIVE_TO_GROUND */ .Z.RELATIVE_TO_GROUND:\n      altitudeModeText = kmlDoc.createTextNode("relativeToGround");\n      break;\n  }\n\n  return altitudeModeText;\n}\n\nfunction getCoordinates(coordinates, ellipsoid) {\n  if (!Array.isArray(coordinates)) {\n    coordinates = [coordinates];\n  }\n\n  var count = coordinates.length;\n  var coordinateStrings = [];\n  for (var i = 0; i < count; ++i) {\n    _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCartesian */ .Z.fromCartesian(coordinates[i], ellipsoid, scratchCartographic);\n    coordinateStrings.push(\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.longitude) +\n        "," +\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].toDegrees */ .Z.toDegrees(scratchCartographic.latitude) +\n        "," +\n        scratchCartographic.height\n    );\n  }\n\n  return coordinateStrings.join(" ");\n}\n\nfunction createBasicElementWithText(\n  kmlDoc,\n  elementName,\n  elementValue,\n  namespace\n) {\n  elementValue = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(elementValue, "");\n\n  if (typeof elementValue === "boolean") {\n    elementValue = elementValue ? "1" : "0";\n  }\n\n  // Create element with optional namespace\n  var element = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z)(namespace)\n    ? kmlDoc.createElementNS(namespace, elementName)\n    : kmlDoc.createElement(elementName);\n\n  // Wrap value in CDATA section if it contains HTML\n  var text =\n    elementValue === "string" && elementValue.indexOf("<") !== -1\n      ? kmlDoc.createCDATASection(elementValue)\n      : kmlDoc.createTextNode(elementValue);\n\n  element.appendChild(text);\n\n  return element;\n}\n\nfunction colorToString(color) {\n  var result = "";\n  var bytes = color.toBytes();\n  for (var i = 3; i >= 0; --i) {\n    result +=\n      bytes[i] < 16 ? "0" + bytes[i].toString(16) : bytes[i].toString(16);\n  }\n\n  return result;\n}\n\n/**\n * Since KML does not support glTF models, this callback is required to specify what URL to use for the model in the KML document.\n * It can also be used to add additional files to the <code>externalFiles</code> object, which is the list of files embedded in the exported KMZ,\n * or otherwise returned with the KML string when exporting.\n *\n * @callback exportKmlModelCallback\n *\n * @param {ModelGraphics} model The ModelGraphics instance for an Entity.\n * @param {JulianDate} time The time that any properties should use to get the value.\n * @param {Object} externalFiles An object that maps a filename to a Blob or a Promise that resolves to a Blob.\n * @returns {String} The URL to use for the href in the KML document.\n */\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (exportKml)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0Esa0JBQWtCLFFBQVE7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUIsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQSxzRUFBZSx5REFBUyxJQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL2V4cG9ydEttbC5qcz8zODliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXJ0ZXNpYW4yIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjIuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDYXJ0b2dyYXBoaWMgZnJvbSBcIi4uL0NvcmUvQ2FydG9ncmFwaGljLmpzXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL0NvcmUvQ29sb3IuanNcIjtcbmltcG9ydCBjcmVhdGVHdWlkIGZyb20gXCIuLi9Db3JlL2NyZWF0ZUd1aWQuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFbGxpcHNvaWQgZnJvbSBcIi4uL0NvcmUvRWxsaXBzb2lkLmpzXCI7XG5pbXBvcnQgSXNvODYwMSBmcm9tIFwiLi4vQ29yZS9Jc284NjAxLmpzXCI7XG5pbXBvcnQgSnVsaWFuRGF0ZSBmcm9tIFwiLi4vQ29yZS9KdWxpYW5EYXRlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi4vQ29yZS9NYXRoLmpzXCI7XG5pbXBvcnQgUmVjdGFuZ2xlIGZyb20gXCIuLi9Db3JlL1JlY3RhbmdsZS5qc1wiO1xuaW1wb3J0IFJlZmVyZW5jZUZyYW1lIGZyb20gXCIuLi9Db3JlL1JlZmVyZW5jZUZyYW1lLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2UgZnJvbSBcIi4uL0NvcmUvUmVzb3VyY2UuanNcIjtcbmltcG9ydCBSdW50aW1lRXJyb3IgZnJvbSBcIi4uL0NvcmUvUnVudGltZUVycm9yLmpzXCI7XG5pbXBvcnQgVGltZUludGVydmFsIGZyb20gXCIuLi9Db3JlL1RpbWVJbnRlcnZhbC5qc1wiO1xuaW1wb3J0IFRpbWVJbnRlcnZhbENvbGxlY3Rpb24gZnJvbSBcIi4uL0NvcmUvVGltZUludGVydmFsQ29sbGVjdGlvbi5qc1wiO1xuaW1wb3J0IEhlaWdodFJlZmVyZW5jZSBmcm9tIFwiLi4vU2NlbmUvSGVpZ2h0UmVmZXJlbmNlLmpzXCI7XG5pbXBvcnQgSG9yaXpvbnRhbE9yaWdpbiBmcm9tIFwiLi4vU2NlbmUvSG9yaXpvbnRhbE9yaWdpbi5qc1wiO1xuaW1wb3J0IFZlcnRpY2FsT3JpZ2luIGZyb20gXCIuLi9TY2VuZS9WZXJ0aWNhbE9yaWdpbi5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuaW1wb3J0IHppcCBmcm9tIFwiLi4vVGhpcmRQYXJ0eS96aXAuanNcIjtcbmltcG9ydCBCaWxsYm9hcmRHcmFwaGljcyBmcm9tIFwiLi9CaWxsYm9hcmRHcmFwaGljcy5qc1wiO1xuaW1wb3J0IENvbXBvc2l0ZVBvc2l0aW9uUHJvcGVydHkgZnJvbSBcIi4vQ29tcG9zaXRlUG9zaXRpb25Qcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IE1vZGVsR3JhcGhpY3MgZnJvbSBcIi4vTW9kZWxHcmFwaGljcy5qc1wiO1xuaW1wb3J0IFJlY3RhbmdsZUdyYXBoaWNzIGZyb20gXCIuL1JlY3RhbmdsZUdyYXBoaWNzLmpzXCI7XG5pbXBvcnQgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkgZnJvbSBcIi4vU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkuanNcIjtcbmltcG9ydCBTYW1wbGVkUHJvcGVydHkgZnJvbSBcIi4vU2FtcGxlZFByb3BlcnR5LmpzXCI7XG5pbXBvcnQgU2NhbGVkUG9zaXRpb25Qcm9wZXJ0eSBmcm9tIFwiLi9TY2FsZWRQb3NpdGlvblByb3BlcnR5LmpzXCI7XG5cbnZhciBCSUxMQk9BUkRfU0laRSA9IDMyO1xudmFyIGttbE5hbWVzcGFjZSA9IFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9rbWwvMi4yXCI7XG52YXIgZ3hOYW1lc3BhY2UgPSBcImh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9rbWwvZXh0LzIuMlwiO1xudmFyIHhtbG5zTmFtZXNwYWNlID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiO1xuXG4vL1xuLy8gSGFuZGxlcyBmaWxlcyBleHRlcm5hbCB0byB0aGUgS01MIChlZy4gdGV4dHVyZXMgYW5kIG1vZGVscylcbi8vXG5mdW5jdGlvbiBFeHRlcm5hbEZpbGVIYW5kbGVyKG1vZGVsQ2FsbGJhY2spIHtcbiAgdGhpcy5fZmlsZXMgPSB7fTtcbiAgdGhpcy5fcHJvbWlzZXMgPSBbXTtcbiAgdGhpcy5fY291bnQgPSAwO1xuICB0aGlzLl9tb2RlbENhbGxiYWNrID0gbW9kZWxDYWxsYmFjaztcbn1cblxudmFyIGltYWdlVHlwZVJlZ2V4ID0gL15kYXRhOmltYWdlXFwvKFteLDtdKykvO1xuRXh0ZXJuYWxGaWxlSGFuZGxlci5wcm90b3R5cGUudGV4dHVyZSA9IGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIGZpbGVuYW1lO1xuXG4gIGlmICh0eXBlb2YgdGV4dHVyZSA9PT0gXCJzdHJpbmdcIiB8fCB0ZXh0dXJlIGluc3RhbmNlb2YgUmVzb3VyY2UpIHtcbiAgICB0ZXh0dXJlID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQodGV4dHVyZSk7XG4gICAgaWYgKCF0ZXh0dXJlLmlzRGF0YVVyaSkge1xuICAgICAgcmV0dXJuIHRleHR1cmUudXJsO1xuICAgIH1cblxuICAgIC8vIElmIGl0cyBhIGRhdGEgVVJJIHRyeSBhbmQgZ2V0IHRoZSBjb3JyZWN0IGV4dGVuc2lvbiBhbmQgdGhlbiBmZXRjaCB0aGUgYmxvYlxuICAgIHZhciByZWdleFJlc3VsdCA9IHRleHR1cmUudXJsLm1hdGNoKGltYWdlVHlwZVJlZ2V4KTtcbiAgICBmaWxlbmFtZSA9IFwidGV4dHVyZV9cIiArICsrdGhpcy5fY291bnQ7XG4gICAgaWYgKGRlZmluZWQocmVnZXhSZXN1bHQpKSB7XG4gICAgICBmaWxlbmFtZSArPSBcIi5cIiArIHJlZ2V4UmVzdWx0WzFdO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gdGV4dHVyZS5mZXRjaEJsb2IoKS50aGVuKGZ1bmN0aW9uIChibG9iKSB7XG4gICAgICB0aGF0Ll9maWxlc1tmaWxlbmFtZV0gPSBibG9iO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcHJvbWlzZXMucHVzaChwcm9taXNlKTtcblxuICAgIHJldHVybiBmaWxlbmFtZTtcbiAgfVxuXG4gIGlmICh0ZXh0dXJlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSB3aGVuLmRlZmVyKCk7XG4gICAgdGhpcy5fcHJvbWlzZXMucHVzaChkZWZlcnJlZC5wcm9taXNlKTtcblxuICAgIGZpbGVuYW1lID0gXCJ0ZXh0dXJlX1wiICsgKyt0aGlzLl9jb3VudCArIFwiLnBuZ1wiO1xuICAgIHRleHR1cmUudG9CbG9iKGZ1bmN0aW9uIChibG9iKSB7XG4gICAgICB0aGF0Ll9maWxlc1tmaWxlbmFtZV0gPSBibG9iO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZpbGVuYW1lO1xuICB9XG5cbiAgcmV0dXJuIFwiXCI7XG59O1xuXG5mdW5jdGlvbiBnZXRNb2RlbEJsb2JIYW5kZXIodGhhdCwgZmlsZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChibG9iKSB7XG4gICAgdGhhdC5fZmlsZXNbZmlsZW5hbWVdID0gYmxvYjtcbiAgfTtcbn1cblxuRXh0ZXJuYWxGaWxlSGFuZGxlci5wcm90b3R5cGUubW9kZWwgPSBmdW5jdGlvbiAobW9kZWwsIHRpbWUpIHtcbiAgdmFyIG1vZGVsQ2FsbGJhY2sgPSB0aGlzLl9tb2RlbENhbGxiYWNrO1xuICBpZiAoIWRlZmluZWQobW9kZWxDYWxsYmFjaykpIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgXCJFbmNvdW50ZXJlZCBhIG1vZGVsIGVudGl0eSB3aGlsZSBleHBvcnRpbmcgdG8gS01MLCBidXQgbm8gbW9kZWwgY2FsbGJhY2sgd2FzIHN1cHBsaWVkLlwiXG4gICAgKTtcbiAgfVxuXG4gIHZhciBleHRlcm5hbEZpbGVzID0ge307XG4gIHZhciB1cmwgPSBtb2RlbENhbGxiYWNrKG1vZGVsLCB0aW1lLCBleHRlcm5hbEZpbGVzKTtcblxuICAvLyBJdGVyYXRlIHRocm91Z2ggZXh0ZXJuYWwgZmlsZXMgYW5kIGFkZCB0aGVtIHRvIG91ciBsaXN0IG9uY2UgdGhlIHByb21pc2UgcmVzb2x2ZXNcbiAgZm9yICh2YXIgZmlsZW5hbWUgaW4gZXh0ZXJuYWxGaWxlcykge1xuICAgIGlmIChleHRlcm5hbEZpbGVzLmhhc093blByb3BlcnR5KGZpbGVuYW1lKSkge1xuICAgICAgdmFyIHByb21pc2UgPSB3aGVuKGV4dGVybmFsRmlsZXNbZmlsZW5hbWVdKTtcbiAgICAgIHRoaXMuX3Byb21pc2VzLnB1c2gocHJvbWlzZSk7XG5cbiAgICAgIHByb21pc2UudGhlbihnZXRNb2RlbEJsb2JIYW5kZXIodGhpcywgZmlsZW5hbWUpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRXh0ZXJuYWxGaWxlSGFuZGxlci5wcm90b3R5cGUsIHtcbiAgcHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHdoZW4uYWxsKHRoaXMuX3Byb21pc2VzKTtcbiAgICB9LFxuICB9LFxuICBmaWxlczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZpbGVzO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLy9cbi8vIEhhbmRsZXMgZ2V0dGluZyB2YWx1ZXMgZnJvbSBwcm9wZXJ0aWVzIHRha2luZyB0aGUgZGVzaXJlZCB0aW1lIGFuZCBkZWZhdWx0IHZhbHVlcyBpbnRvIGFjY291bnRcbi8vXG5mdW5jdGlvbiBWYWx1ZUdldHRlcih0aW1lKSB7XG4gIHRoaXMuX3RpbWUgPSB0aW1lO1xufVxuXG5WYWx1ZUdldHRlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHByb3BlcnR5LCBkZWZhdWx0VmFsLCByZXN1bHQpIHtcbiAgdmFyIHZhbHVlO1xuICBpZiAoZGVmaW5lZChwcm9wZXJ0eSkpIHtcbiAgICB2YWx1ZSA9IGRlZmluZWQocHJvcGVydHkuZ2V0VmFsdWUpXG4gICAgICA/IHByb3BlcnR5LmdldFZhbHVlKHRoaXMuX3RpbWUsIHJlc3VsdClcbiAgICAgIDogcHJvcGVydHk7XG4gIH1cblxuICByZXR1cm4gZGVmYXVsdFZhbHVlKHZhbHVlLCBkZWZhdWx0VmFsKTtcbn07XG5cblZhbHVlR2V0dGVyLnByb3RvdHlwZS5nZXRDb2xvciA9IGZ1bmN0aW9uIChwcm9wZXJ0eSwgZGVmYXVsdFZhbCkge1xuICB2YXIgcmVzdWx0ID0gdGhpcy5nZXQocHJvcGVydHksIGRlZmF1bHRWYWwpO1xuICBpZiAoZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmV0dXJuIGNvbG9yVG9TdHJpbmcocmVzdWx0KTtcbiAgfVxufTtcblxuVmFsdWVHZXR0ZXIucHJvdG90eXBlLmdldE1hdGVyaWFsVHlwZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICBpZiAoIWRlZmluZWQocHJvcGVydHkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIHByb3BlcnR5LmdldFR5cGUodGhpcy5fdGltZSk7XG59O1xuXG4vL1xuLy8gQ2FjaGVzIHN0eWxlcyBzbyB3ZSBkb24ndCBnZW5lcmF0ZSBhIHRvbiBvZiBkdXBsaWNhdGUgc3R5bGVzXG4vL1xuZnVuY3Rpb24gU3R5bGVDYWNoZSgpIHtcbiAgdGhpcy5faWRzID0ge307XG4gIHRoaXMuX3N0eWxlcyA9IHt9O1xuICB0aGlzLl9jb3VudCA9IDA7XG59XG5cblN0eWxlQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciBpZHMgPSB0aGlzLl9pZHM7XG4gIHZhciBrZXkgPSBlbGVtZW50LmlubmVySFRNTDtcbiAgaWYgKGRlZmluZWQoaWRzW2tleV0pKSB7XG4gICAgcmV0dXJuIGlkc1trZXldO1xuICB9XG5cbiAgdmFyIHN0eWxlSWQgPSBcInN0eWxlLVwiICsgKyt0aGlzLl9jb3VudDtcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBzdHlsZUlkKTtcblxuICAvLyBTdG9yZSB3aXRoICNcbiAgc3R5bGVJZCA9IFwiI1wiICsgc3R5bGVJZDtcbiAgaWRzW2tleV0gPSBzdHlsZUlkO1xuICB0aGlzLl9zdHlsZXNba2V5XSA9IGVsZW1lbnQ7XG5cbiAgcmV0dXJuIHN0eWxlSWQ7XG59O1xuXG5TdHlsZUNhY2hlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKHBhcmVudEVsZW1lbnQpIHtcbiAgdmFyIHN0eWxlcyA9IHRoaXMuX3N0eWxlcztcblxuICB2YXIgZmlyc3RFbGVtZW50ID0gcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzBdO1xuICBmb3IgKHZhciBrZXkgaW4gc3R5bGVzKSB7XG4gICAgaWYgKHN0eWxlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShzdHlsZXNba2V5XSwgZmlyc3RFbGVtZW50KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vXG4vLyBNYW5hZ2VzIHRoZSBnZW5lcmF0aW9uIG9mIElEcyBiZWNhdXNlIGFuIGVudGl0eSBtYXkgaGF2ZSBnZW9tZXRyeSBhbmQgYSBGb2xkZXIgZm9yIGNoaWxkcmVuXG4vL1xuZnVuY3Rpb24gSWRNYW5hZ2VyKCkge1xuICB0aGlzLl9pZHMgPSB7fTtcbn1cblxuSWRNYW5hZ2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgaWYgKCFkZWZpbmVkKGlkKSkge1xuICAgIHJldHVybiB0aGlzLmdldChjcmVhdGVHdWlkKCkpO1xuICB9XG5cbiAgdmFyIGlkcyA9IHRoaXMuX2lkcztcbiAgaWYgKCFkZWZpbmVkKGlkc1tpZF0pKSB7XG4gICAgaWRzW2lkXSA9IDA7XG4gICAgcmV0dXJuIGlkO1xuICB9XG5cbiAgcmV0dXJuIGlkLnRvU3RyaW5nKCkgKyBcIi1cIiArICsraWRzW2lkXTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYgZXhwb3J0S21sUmVzdWx0S21sXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByb3BlcnR5IHtTdHJpbmd9IGttbCBUaGUgZ2VuZXJhdGVkIEtNTC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIEJsb2I+fSBleHRlcm5hbEZpbGVzIEFuIG9iamVjdCBkaWN0aW9uYXJ5IG9mIGV4dGVybmFsIGZpbGVzXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBleHBvcnRLbWxSZXN1bHRLbXpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJvcGVydHkge0Jsb2J9IGtteiBUaGUgZ2VuZXJhdGVkIGtteiBmaWxlLlxuICovXG5cbi8qKlxuICogRXhwb3J0cyBhbiBFbnRpdHlDb2xsZWN0aW9uIGFzIGEgS01MIGRvY3VtZW50LiBPbmx5IFBvaW50LCBCaWxsYm9hcmQsIE1vZGVsLCBQYXRoLCBQb2x5Z29uLCBQb2x5bGluZSBnZW9tZXRyaWVzXG4gKiB3aWxsIGJlIGV4cG9ydGVkLiBOb3RlIHRoYXQgdGhlcmUgaXMgbm90IGEgMSB0byAxIG1hcHBpbmcgb2YgRW50aXR5IHByb3BlcnRpZXMgdG8gS01MIEZlYXR1cmUgcHJvcGVydGllcy4gRm9yXG4gKiBleGFtcGxlLCBlbnRpdHkgcHJvcGVydGllcyB0aGF0IGFyZSB0aW1lIGR5bmFtaWMgYnV0IGNhbm5vdCBiZSBkeW5hbWljIGluIEtNTCBhcmUgZXhwb3J0ZWQgd2l0aCB0aGVpciB2YWx1ZXMgYXRcbiAqIG9wdGlvbnMudGltZSBvciB0aGUgYmVnaW5uaW5nIG9mIHRoZSBFbnRpdHlDb2xsZWN0aW9uJ3MgdGltZSBpbnRlcnZhbCBpZiBub3Qgc3BlY2lmaWVkLiBGb3IgdGltZS1keW5hbWljIHByb3BlcnRpZXNcbiAqIHRoYXQgYXJlIHN1cHBvcnRlZCBpbiBLTUwsIHdlIHVzZSB0aGUgc2FtcGxlcyBpZiBpdCBpcyBhIHtAbGluayBTYW1wbGVkUHJvcGVydHl9IG90aGVyd2lzZSB3ZSBzYW1wbGUgdGhlIHZhbHVlIHVzaW5nXG4gKiB0aGUgb3B0aW9ucy5zYW1wbGVEdXJhdGlvbi4gUG9pbnQsIEJpbGxib2FyZCwgTW9kZWwgYW5kIFBhdGggZ2VvbWV0cmllcyB3aXRoIHRpbWUtZHluYW1pYyBwb3NpdGlvbnMgd2lsbCBiZSBleHBvcnRlZFxuICogYXMgZ3g6VHJhY2sgRmVhdHVyZXMuIE5vdCBhbGwgTWF0ZXJpYWxzIGFyZSByZXByZXNlbnRhYmxlIGluIEtNTCwgc28gZm9yIG1vcmUgYWR2YW5jZWQgTWF0ZXJpYWxzIGp1c3QgdGhlIHByaW1hcnlcbiAqIGNvbG9yIGlzIHVzZWQuIENhbnZhcyBvYmplY3RzIGFyZSBleHBvcnRlZCBhcyBQTkcgaW1hZ2VzLlxuICpcbiAqIEBmdW5jdGlvbiBleHBvcnRLbWxcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBBbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0VudGl0eUNvbGxlY3Rpb259IG9wdGlvbnMuZW50aXRpZXMgVGhlIEVudGl0eUNvbGxlY3Rpb24gdG8gZXhwb3J0IGFzIEtNTC5cbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWQ9RWxsaXBzb2lkLldHUzg0XSBUaGUgZWxsaXBzb2lkIGZvciB0aGUgb3V0cHV0IGZpbGUuXG4gKiBAcGFyYW0ge2V4cG9ydEttbE1vZGVsQ2FsbGJhY2t9IFtvcHRpb25zLm1vZGVsQ2FsbGJhY2tdIEEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGEge0BsaW5rIE1vZGVsR3JhcGhpY3N9IGluc3RhbmNlIGFuZCBzaG91bGQgcmV0dXJuIHRoZSBVUkkgdG8gdXNlIGluIHRoZSBLTUwuIFJlcXVpcmVkIGlmIGEgbW9kZWwgZXhpc3RzIGluIHRoZSBlbnRpdHkgY29sbGVjdGlvbi5cbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gW29wdGlvbnMudGltZT1lbnRpdGllcy5jb21wdXRlQXZhaWxhYmlsaXR5KCkuc3RhcnRdIFRoZSB0aW1lIHZhbHVlIHRvIHVzZSB0byBnZXQgcHJvcGVydGllcyB0aGF0IGFyZSBub3QgdGltZSB2YXJ5aW5nIGluIEtNTC5cbiAqIEBwYXJhbSB7VGltZUludGVydmFsfSBbb3B0aW9ucy5kZWZhdWx0QXZhaWxhYmlsaXR5PWVudGl0aWVzLmNvbXB1dGVBdmFpbGFiaWxpdHkoKV0gVGhlIGludGVydmFsIHRoYXQgd2lsbCBiZSBzYW1wbGVkIGlmIGFuIGVudGl0eSBkb2Vzbid0IGhhdmUgYW4gYXZhaWxhYmlsaXR5LlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLnNhbXBsZUR1cmF0aW9uPTYwXSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgdG8gc2FtcGxlIHByb3BlcnRpZXMgdGhhdCBhcmUgdmFyeWluZyBpbiBLTUwuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmttej1mYWxzZV0gSWYgdHJ1ZSBLTUwgYW5kIGV4dGVybmFsIGZpbGVzIHdpbGwgYmUgY29tcHJlc3NlZCBpbnRvIGEga216IGZpbGUuXG4gKlxuICogQHJldHVybnMge1Byb21pc2U8ZXhwb3J0S21sUmVzdWx0S21sfGV4cG9ydEttbFJlc3VsdEttej59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVkIHRvIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBLTUwgc3RyaW5nIGFuZCBhIGRpY3Rpb25hcnkgb2YgZXh0ZXJuYWwgZmlsZSBibG9icywgb3IgYSBrbXogZmlsZSBhcyBhIGJsb2IgaWYgb3B0aW9ucy5rbXogaXMgdHJ1ZS5cbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1FeHBvcnQlMjBLTUwuaHRtbHxDZXNpdW0gU2FuZGNhc3RsZSBLTUwgRXhwb3J0IERlbW99XG4gKiBAZXhhbXBsZVxuICogQ2VzaXVtLmV4cG9ydEttbCh7XG4gKiAgICAgIGVudGl0aWVzOiBlbnRpdHlDb2xsZWN0aW9uXG4gKiAgfSlcbiAqICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gKiAgICAgLy8gVGhlIFhNTCBzdHJpbmcgaXMgaW4gcmVzdWx0LmttbFxuICpcbiAqICAgICB2YXIgZXh0ZXJuYWxGaWxlcyA9IHJlc3VsdC5leHRlcm5hbEZpbGVzXG4gKiAgICAgZm9yKHZhciBmaWxlIGluIGV4dGVybmFsRmlsZXMpIHtcbiAqICAgICAgIC8vIGZpbGUgaXMgdGhlIG5hbWUgb2YgdGhlIGZpbGUgdXNlZCBpbiB0aGUgS01MIGRvY3VtZW50IGFzIHRoZSBocmVmXG4gKiAgICAgICAvLyBleHRlcm5hbEZpbGVzW2ZpbGVdIGlzIGEgYmxvYiB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgZmlsZVxuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICovXG5mdW5jdGlvbiBleHBvcnRLbWwob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZW50aXRpZXMgPSBvcHRpb25zLmVudGl0aWVzO1xuICB2YXIga216ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMua216LCBmYWxzZSk7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGVudGl0aWVzKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImVudGl0aWVzIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAvLyBHZXQgdGhlIHN0YXRlIHRoYXQgaXMgcGFzc2VkIGFyb3VuZCBkdXJpbmcgdGhlIHJlY3Vyc2lvblxuICAvLyBUaGlzIGlzIHNlcGFyYXRlZCBvdXQgZm9yIHRlc3RpbmcuXG4gIHZhciBzdGF0ZSA9IGV4cG9ydEttbC5fY3JlYXRlU3RhdGUob3B0aW9ucyk7XG5cbiAgLy8gRmlsdGVyIEVudGl0eUNvbGxlY3Rpb24gc28gd2Ugb25seSBoYXZlIHRvcCBsZXZlbCBlbnRpdGllc1xuICB2YXIgcm9vdEVudGl0aWVzID0gZW50aXRpZXMudmFsdWVzLmZpbHRlcihmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgcmV0dXJuICFkZWZpbmVkKGVudGl0eS5wYXJlbnQpO1xuICB9KTtcblxuICAvLyBBZGQgdGhlIDxEb2N1bWVudD5cbiAgdmFyIGttbERvYyA9IHN0YXRlLmttbERvYztcbiAgdmFyIGttbEVsZW1lbnQgPSBrbWxEb2MuZG9jdW1lbnRFbGVtZW50O1xuICBrbWxFbGVtZW50LnNldEF0dHJpYnV0ZU5TKHhtbG5zTmFtZXNwYWNlLCBcInhtbG5zOmd4XCIsIGd4TmFtZXNwYWNlKTtcbiAgdmFyIGttbERvY3VtZW50RWxlbWVudCA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiRG9jdW1lbnRcIik7XG4gIGttbEVsZW1lbnQuYXBwZW5kQ2hpbGQoa21sRG9jdW1lbnRFbGVtZW50KTtcblxuICAvLyBDcmVhdGUgdGhlIEtNTCBIaWVyYXJjaHlcbiAgcmVjdXJzZUVudGl0aWVzKHN0YXRlLCBrbWxEb2N1bWVudEVsZW1lbnQsIHJvb3RFbnRpdGllcyk7XG5cbiAgLy8gV3JpdGUgb3V0IHRoZSA8U3R5bGU+IGVsZW1lbnRzXG4gIHN0YXRlLnN0eWxlQ2FjaGUuc2F2ZShrbWxEb2N1bWVudEVsZW1lbnQpO1xuXG4gIC8vIE9uY2UgYWxsIHRoZSBibG9icyBoYXZlIHJlc29sdmVkIHJldHVybiB0aGUgS01MIHN0cmluZyBhbG9uZyB3aXRoIHRoZSBibG9iIGNvbGxlY3Rpb25cbiAgdmFyIGV4dGVybmFsRmlsZUhhbmRsZXIgPSBzdGF0ZS5leHRlcm5hbEZpbGVIYW5kbGVyO1xuICByZXR1cm4gZXh0ZXJuYWxGaWxlSGFuZGxlci5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZXJpYWxpemVyID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTtcbiAgICB2YXIga21sU3RyaW5nID0gc2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyhzdGF0ZS5rbWxEb2MpO1xuICAgIGlmIChrbXopIHtcbiAgICAgIHJldHVybiBjcmVhdGVLbXooa21sU3RyaW5nLCBleHRlcm5hbEZpbGVIYW5kbGVyLmZpbGVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAga21sOiBrbWxTdHJpbmcsXG4gICAgICBleHRlcm5hbEZpbGVzOiBleHRlcm5hbEZpbGVIYW5kbGVyLmZpbGVzLFxuICAgIH07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVLbXooa21sU3RyaW5nLCBleHRlcm5hbEZpbGVzKSB7XG4gIHZhciBibG9iV3JpdGVyID0gbmV3IHppcC5CbG9iV3JpdGVyKCk7XG4gIHZhciB3cml0ZXIgPSBuZXcgemlwLlppcFdyaXRlcihibG9iV3JpdGVyKTtcbiAgLy8gV2UgbmVlZCB0byBvbmx5IHdyaXRlIG9uZSBmaWxlIGF0IGEgdGltZSBzbyB0aGUgemlwIGRvZXNuJ3QgZ2V0IGNvcnJ1cHRlZFxuICByZXR1cm4gd2hlbih3cml0ZXIuYWRkKFwiZG9jLmttbFwiLCBuZXcgemlwLlRleHRSZWFkZXIoa21sU3RyaW5nKSkpXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhleHRlcm5hbEZpbGVzKTtcbiAgICAgIHJldHVybiBhZGRFeHRlcm5hbEZpbGVzVG9aaXAod3JpdGVyLCBrZXlzLCBleHRlcm5hbEZpbGVzLCAwKTtcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB3aGVuKHdyaXRlci5jbG9zZSgpKS50aGVuKGZ1bmN0aW9uIChibG9iKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga216OiBibG9iLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEV4dGVybmFsRmlsZXNUb1ppcCh3cml0ZXIsIGtleXMsIGV4dGVybmFsRmlsZXMsIGluZGV4KSB7XG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gaW5kZXgpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGZpbGVuYW1lID0ga2V5c1tpbmRleF07XG4gIHJldHVybiB3aGVuKFxuICAgIHdyaXRlci5hZGQoZmlsZW5hbWUsIG5ldyB6aXAuQmxvYlJlYWRlcihleHRlcm5hbEZpbGVzW2ZpbGVuYW1lXSkpXG4gICkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFkZEV4dGVybmFsRmlsZXNUb1ppcCh3cml0ZXIsIGtleXMsIGV4dGVybmFsRmlsZXMsIGluZGV4ICsgMSk7XG4gIH0pO1xufVxuXG5leHBvcnRLbWwuX2NyZWF0ZVN0YXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgdmFyIGVudGl0aWVzID0gb3B0aW9ucy5lbnRpdGllcztcblxuICB2YXIgc3R5bGVDYWNoZSA9IG5ldyBTdHlsZUNhY2hlKCk7XG5cbiAgLy8gVXNlIHRoZSBzdGFydCB0aW1lIGFzIHRoZSBkZWZhdWx0IGJlY2F1c2UganVzdCBpbiBjYXNlIHRoZXkgZGVmaW5lXG4gIC8vICBwcm9wZXJ0aWVzIHdpdGggYW4gaW50ZXJ2YWwgZXZlbiBpZiB0aGV5IGRvbid0IGNoYW5nZS5cbiAgdmFyIGVudGl0eUF2YWlsYWJpbGl0eSA9IGVudGl0aWVzLmNvbXB1dGVBdmFpbGFiaWxpdHkoKTtcbiAgdmFyIHRpbWUgPSBkZWZpbmVkKG9wdGlvbnMudGltZSkgPyBvcHRpb25zLnRpbWUgOiBlbnRpdHlBdmFpbGFiaWxpdHkuc3RhcnQ7XG5cbiAgLy8gRmlndXJlIG91dCBob3cgd2Ugd2lsbCBzYW1wbGUgZHluYW1pYyBwb3NpdGlvbiBwcm9wZXJ0aWVzXG4gIHZhciBkZWZhdWx0QXZhaWxhYmlsaXR5ID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuZGVmYXVsdEF2YWlsYWJpbGl0eSxcbiAgICBlbnRpdHlBdmFpbGFiaWxpdHlcbiAgKTtcbiAgdmFyIHNhbXBsZUR1cmF0aW9uID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2FtcGxlRHVyYXRpb24sIDYwKTtcblxuICAvLyBNYWtlIHN1cmUgd2UgZG9uJ3QgaGF2ZSBpbmZpbml0ZSBhdmFpbGFiaWxpdHkgaWYgd2UgbmVlZCB0byBzYW1wbGVcbiAgaWYgKGRlZmF1bHRBdmFpbGFiaWxpdHkuc3RhcnQgPT09IElzbzg2MDEuTUlOSU1VTV9WQUxVRSkge1xuICAgIGlmIChkZWZhdWx0QXZhaWxhYmlsaXR5LnN0b3AgPT09IElzbzg2MDEuTUFYSU1VTV9WQUxVRSkge1xuICAgICAgLy8gSW5maW5pdGUsIHNvIGp1c3QgdXNlIHRoZSBkZWZhdWx0XG4gICAgICBkZWZhdWx0QXZhaWxhYmlsaXR5ID0gbmV3IFRpbWVJbnRlcnZhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBzdGFydCB0aW1lLCBzbyBqdXN0IHNhbXBsZSAxMCB0aW1lcyBiZWZvcmUgdGhlIHN0b3BcbiAgICAgIEp1bGlhbkRhdGUuYWRkU2Vjb25kcyhcbiAgICAgICAgZGVmYXVsdEF2YWlsYWJpbGl0eS5zdG9wLFxuICAgICAgICAtMTAgKiBzYW1wbGVEdXJhdGlvbixcbiAgICAgICAgZGVmYXVsdEF2YWlsYWJpbGl0eS5zdGFydFxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZGVmYXVsdEF2YWlsYWJpbGl0eS5zdG9wID09PSBJc284NjAxLk1BWElNVU1fVkFMVUUpIHtcbiAgICAvLyBObyBzdG9wIHRpbWUsIHNvIGp1c3Qgc2FtcGxlIDEwIHRpbWVzIGFmdGVyIHRoZSBzdGFydFxuICAgIEp1bGlhbkRhdGUuYWRkU2Vjb25kcyhcbiAgICAgIGRlZmF1bHRBdmFpbGFiaWxpdHkuc3RhcnQsXG4gICAgICAxMCAqIHNhbXBsZUR1cmF0aW9uLFxuICAgICAgZGVmYXVsdEF2YWlsYWJpbGl0eS5zdG9wXG4gICAgKTtcbiAgfVxuXG4gIHZhciBleHRlcm5hbEZpbGVIYW5kbGVyID0gbmV3IEV4dGVybmFsRmlsZUhhbmRsZXIob3B0aW9ucy5tb2RlbENhbGxiYWNrKTtcblxuICB2YXIga21sRG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQoa21sTmFtZXNwYWNlLCBcImttbFwiKTtcbiAgcmV0dXJuIHtcbiAgICBrbWxEb2M6IGttbERvYyxcbiAgICBlbGxpcHNvaWQ6IGRlZmF1bHRWYWx1ZShvcHRpb25zLmVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KSxcbiAgICBpZE1hbmFnZXI6IG5ldyBJZE1hbmFnZXIoKSxcbiAgICBzdHlsZUNhY2hlOiBzdHlsZUNhY2hlLFxuICAgIGV4dGVybmFsRmlsZUhhbmRsZXI6IGV4dGVybmFsRmlsZUhhbmRsZXIsXG4gICAgdGltZTogdGltZSxcbiAgICB2YWx1ZUdldHRlcjogbmV3IFZhbHVlR2V0dGVyKHRpbWUpLFxuICAgIHNhbXBsZUR1cmF0aW9uOiBzYW1wbGVEdXJhdGlvbixcbiAgICAvLyBXcmFwIGl0IGluIGEgVGltZUludGVydmFsQ29sbGVjdGlvbiBiZWNhdXNlIHRoYXQgaXMgd2hhdCBlbnRpdHkuYXZhaWxhYmlsaXR5IGlzXG4gICAgZGVmYXVsdEF2YWlsYWJpbGl0eTogbmV3IFRpbWVJbnRlcnZhbENvbGxlY3Rpb24oW2RlZmF1bHRBdmFpbGFiaWxpdHldKSxcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIHJlY3Vyc2VFbnRpdGllcyhzdGF0ZSwgcGFyZW50Tm9kZSwgZW50aXRpZXMpIHtcbiAgdmFyIGttbERvYyA9IHN0YXRlLmttbERvYztcbiAgdmFyIHN0eWxlQ2FjaGUgPSBzdGF0ZS5zdHlsZUNhY2hlO1xuICB2YXIgdmFsdWVHZXR0ZXIgPSBzdGF0ZS52YWx1ZUdldHRlcjtcbiAgdmFyIGlkTWFuYWdlciA9IHN0YXRlLmlkTWFuYWdlcjtcblxuICB2YXIgY291bnQgPSBlbnRpdGllcy5sZW5ndGg7XG4gIHZhciBvdmVybGF5cztcbiAgdmFyIGdlb21ldHJpZXM7XG4gIHZhciBzdHlsZXM7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgIHZhciBlbnRpdHkgPSBlbnRpdGllc1tpXTtcbiAgICBvdmVybGF5cyA9IFtdO1xuICAgIGdlb21ldHJpZXMgPSBbXTtcbiAgICBzdHlsZXMgPSBbXTtcblxuICAgIGNyZWF0ZVBvaW50KHN0YXRlLCBlbnRpdHksIGdlb21ldHJpZXMsIHN0eWxlcyk7XG4gICAgY3JlYXRlTGluZVN0cmluZyhzdGF0ZSwgZW50aXR5LnBvbHlsaW5lLCBnZW9tZXRyaWVzLCBzdHlsZXMpO1xuICAgIGNyZWF0ZVBvbHlnb24oc3RhdGUsIGVudGl0eS5yZWN0YW5nbGUsIGdlb21ldHJpZXMsIHN0eWxlcywgb3ZlcmxheXMpO1xuICAgIGNyZWF0ZVBvbHlnb24oc3RhdGUsIGVudGl0eS5wb2x5Z29uLCBnZW9tZXRyaWVzLCBzdHlsZXMsIG92ZXJsYXlzKTtcbiAgICBjcmVhdGVNb2RlbChzdGF0ZSwgZW50aXR5LCBlbnRpdHkubW9kZWwsIGdlb21ldHJpZXMsIHN0eWxlcyk7XG5cbiAgICB2YXIgdGltZVNwYW47XG4gICAgdmFyIGF2YWlsYWJpbGl0eSA9IGVudGl0eS5hdmFpbGFiaWxpdHk7XG4gICAgaWYgKGRlZmluZWQoYXZhaWxhYmlsaXR5KSkge1xuICAgICAgdGltZVNwYW4gPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIlRpbWVTcGFuXCIpO1xuXG4gICAgICBpZiAoIUp1bGlhbkRhdGUuZXF1YWxzKGF2YWlsYWJpbGl0eS5zdGFydCwgSXNvODYwMS5NSU5JTVVNX1ZBTFVFKSkge1xuICAgICAgICB0aW1lU3Bhbi5hcHBlbmRDaGlsZChcbiAgICAgICAgICBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChcbiAgICAgICAgICAgIGttbERvYyxcbiAgICAgICAgICAgIFwiYmVnaW5cIixcbiAgICAgICAgICAgIEp1bGlhbkRhdGUudG9Jc284NjAxKGF2YWlsYWJpbGl0eS5zdGFydClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICghSnVsaWFuRGF0ZS5lcXVhbHMoYXZhaWxhYmlsaXR5LnN0b3AsIElzbzg2MDEuTUFYSU1VTV9WQUxVRSkpIHtcbiAgICAgICAgdGltZVNwYW4uYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoXG4gICAgICAgICAgICBrbWxEb2MsXG4gICAgICAgICAgICBcImVuZFwiLFxuICAgICAgICAgICAgSnVsaWFuRGF0ZS50b0lzbzg2MDEoYXZhaWxhYmlsaXR5LnN0b3ApXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIG92ZXJsYXlJbmRleCA9IDA7IG92ZXJsYXlJbmRleCA8IG92ZXJsYXlzLmxlbmd0aDsgKytvdmVybGF5SW5kZXgpIHtcbiAgICAgIHZhciBvdmVybGF5ID0gb3ZlcmxheXNbb3ZlcmxheUluZGV4XTtcblxuICAgICAgb3ZlcmxheS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZE1hbmFnZXIuZ2V0KGVudGl0eS5pZCkpO1xuICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChcbiAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcIm5hbWVcIiwgZW50aXR5Lm5hbWUpXG4gICAgICApO1xuICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChcbiAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcInZpc2liaWxpdHlcIiwgZW50aXR5LnNob3cpXG4gICAgICApO1xuICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChcbiAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImRlc2NyaXB0aW9uXCIsIGVudGl0eS5kZXNjcmlwdGlvbilcbiAgICAgICk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHRpbWVTcGFuKSkge1xuICAgICAgICBvdmVybGF5LmFwcGVuZENoaWxkKHRpbWVTcGFuKTtcbiAgICAgIH1cblxuICAgICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbWV0cnlDb3VudCA9IGdlb21ldHJpZXMubGVuZ3RoO1xuICAgIGlmIChnZW9tZXRyeUNvdW50ID4gMCkge1xuICAgICAgdmFyIHBsYWNlbWFyayA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiUGxhY2VtYXJrXCIpO1xuICAgICAgcGxhY2VtYXJrLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkTWFuYWdlci5nZXQoZW50aXR5LmlkKSk7XG5cbiAgICAgIHZhciBuYW1lID0gZW50aXR5Lm5hbWU7XG4gICAgICB2YXIgbGFiZWxHcmFwaGljcyA9IGVudGl0eS5sYWJlbDtcbiAgICAgIGlmIChkZWZpbmVkKGxhYmVsR3JhcGhpY3MpKSB7XG4gICAgICAgIHZhciBsYWJlbFN0eWxlID0ga21sRG9jLmNyZWF0ZUVsZW1lbnQoXCJMYWJlbFN0eWxlXCIpO1xuXG4gICAgICAgIC8vIEtNTCBvbmx5IHNob3dzIHRoZSBuYW1lIGFzIGEgbGFiZWwsIHNvIGp1c3QgY2hhbmdlIHRoZSBuYW1lIGlmIHdlIG5lZWQgdG8gc2hvdyBhIGxhYmVsXG4gICAgICAgIHZhciB0ZXh0ID0gdmFsdWVHZXR0ZXIuZ2V0KGxhYmVsR3JhcGhpY3MudGV4dCk7XG4gICAgICAgIG5hbWUgPSBkZWZpbmVkKHRleHQpICYmIHRleHQubGVuZ3RoID4gMCA/IHRleHQgOiBuYW1lO1xuXG4gICAgICAgIHZhciBjb2xvciA9IHZhbHVlR2V0dGVyLmdldENvbG9yKGxhYmVsR3JhcGhpY3MuZmlsbENvbG9yKTtcbiAgICAgICAgaWYgKGRlZmluZWQoY29sb3IpKSB7XG4gICAgICAgICAgbGFiZWxTdHlsZS5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJjb2xvclwiLCBjb2xvcilcbiAgICAgICAgICApO1xuICAgICAgICAgIGxhYmVsU3R5bGUuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwiY29sb3JNb2RlXCIsIFwibm9ybWFsXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzY2FsZSA9IHZhbHVlR2V0dGVyLmdldChsYWJlbEdyYXBoaWNzLnNjYWxlKTtcbiAgICAgICAgaWYgKGRlZmluZWQoc2NhbGUpKSB7XG4gICAgICAgICAgbGFiZWxTdHlsZS5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJzY2FsZVwiLCBzY2FsZSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgc3R5bGVzLnB1c2gobGFiZWxTdHlsZSk7XG4gICAgICB9XG5cbiAgICAgIHBsYWNlbWFyay5hcHBlbmRDaGlsZChjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwibmFtZVwiLCBuYW1lKSk7XG4gICAgICBwbGFjZW1hcmsuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJ2aXNpYmlsaXR5XCIsIGVudGl0eS5zaG93KVxuICAgICAgKTtcbiAgICAgIHBsYWNlbWFyay5hcHBlbmRDaGlsZChcbiAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImRlc2NyaXB0aW9uXCIsIGVudGl0eS5kZXNjcmlwdGlvbilcbiAgICAgICk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHRpbWVTcGFuKSkge1xuICAgICAgICBwbGFjZW1hcmsuYXBwZW5kQ2hpbGQodGltZVNwYW4pO1xuICAgICAgfVxuXG4gICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKHBsYWNlbWFyayk7XG5cbiAgICAgIHZhciBzdHlsZUNvdW50ID0gc3R5bGVzLmxlbmd0aDtcbiAgICAgIGlmIChzdHlsZUNvdW50ID4gMCkge1xuICAgICAgICB2YXIgc3R5bGUgPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIlN0eWxlXCIpO1xuICAgICAgICBmb3IgKHZhciBzdHlsZUluZGV4ID0gMDsgc3R5bGVJbmRleCA8IHN0eWxlQ291bnQ7ICsrc3R5bGVJbmRleCkge1xuICAgICAgICAgIHN0eWxlLmFwcGVuZENoaWxkKHN0eWxlc1tzdHlsZUluZGV4XSk7XG4gICAgICAgIH1cblxuICAgICAgICBwbGFjZW1hcmsuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcInN0eWxlVXJsXCIsIHN0eWxlQ2FjaGUuZ2V0KHN0eWxlKSlcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdlb21ldHJpZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHBsYWNlbWFyay5hcHBlbmRDaGlsZChnZW9tZXRyaWVzWzBdKTtcbiAgICAgIH0gZWxzZSBpZiAoZ2VvbWV0cmllcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHZhciBtdWx0aWdlb21ldHJ5ID0ga21sRG9jLmNyZWF0ZUVsZW1lbnQoXCJNdWx0aUdlb21ldHJ5XCIpO1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIHZhciBnZW9tZXRyeUluZGV4ID0gMDtcbiAgICAgICAgICBnZW9tZXRyeUluZGV4IDwgZ2VvbWV0cnlDb3VudDtcbiAgICAgICAgICArK2dlb21ldHJ5SW5kZXhcbiAgICAgICAgKSB7XG4gICAgICAgICAgbXVsdGlnZW9tZXRyeS5hcHBlbmRDaGlsZChnZW9tZXRyaWVzW2dlb21ldHJ5SW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICBwbGFjZW1hcmsuYXBwZW5kQ2hpbGQobXVsdGlnZW9tZXRyeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkcmVuID0gZW50aXR5Ll9jaGlsZHJlbjtcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGZvbGRlck5vZGUgPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIkZvbGRlclwiKTtcbiAgICAgIGZvbGRlck5vZGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWRNYW5hZ2VyLmdldChlbnRpdHkuaWQpKTtcbiAgICAgIGZvbGRlck5vZGUuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJuYW1lXCIsIGVudGl0eS5uYW1lKVxuICAgICAgKTtcbiAgICAgIGZvbGRlck5vZGUuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJ2aXNpYmlsaXR5XCIsIGVudGl0eS5zaG93KVxuICAgICAgKTtcbiAgICAgIGZvbGRlck5vZGUuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJkZXNjcmlwdGlvblwiLCBlbnRpdHkuZGVzY3JpcHRpb24pXG4gICAgICApO1xuXG4gICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKGZvbGRlck5vZGUpO1xuXG4gICAgICByZWN1cnNlRW50aXRpZXMoc3RhdGUsIGZvbGRlck5vZGUsIGNoaWxkcmVuKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4zID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQ2FydG9ncmFwaGljID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIHNjcmF0Y2hKdWxpYW5EYXRlID0gbmV3IEp1bGlhbkRhdGUoKTtcblxuZnVuY3Rpb24gY3JlYXRlUG9pbnQoc3RhdGUsIGVudGl0eSwgZ2VvbWV0cmllcywgc3R5bGVzKSB7XG4gIHZhciBrbWxEb2MgPSBzdGF0ZS5rbWxEb2M7XG4gIHZhciBlbGxpcHNvaWQgPSBzdGF0ZS5lbGxpcHNvaWQ7XG4gIHZhciB2YWx1ZUdldHRlciA9IHN0YXRlLnZhbHVlR2V0dGVyO1xuXG4gIHZhciBwb2ludEdyYXBoaWNzID0gZGVmYXVsdFZhbHVlKGVudGl0eS5iaWxsYm9hcmQsIGVudGl0eS5wb2ludCk7XG4gIGlmICghZGVmaW5lZChwb2ludEdyYXBoaWNzKSAmJiAhZGVmaW5lZChlbnRpdHkucGF0aCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB0aGUgcG9pbnQgaXNuJ3QgY29uc3RhbnQgdGhlbiBjcmVhdGUgZ3g6VHJhY2sgb3IgZ3g6TXVsdGlUcmFja1xuICB2YXIgZW50aXR5UG9zaXRpb25Qcm9wZXJ0eSA9IGVudGl0eS5wb3NpdGlvbjtcbiAgaWYgKCFlbnRpdHlQb3NpdGlvblByb3BlcnR5LmlzQ29uc3RhbnQpIHtcbiAgICBjcmVhdGVUcmFja3Moc3RhdGUsIGVudGl0eSwgcG9pbnRHcmFwaGljcywgZ2VvbWV0cmllcywgc3R5bGVzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YWx1ZUdldHRlci5nZXQoZW50aXR5UG9zaXRpb25Qcm9wZXJ0eSwgdW5kZWZpbmVkLCBzY3JhdGNoQ2FydGVzaWFuMyk7XG4gIHZhciBjb29yZGluYXRlcyA9IGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KFxuICAgIGttbERvYyxcbiAgICBcImNvb3JkaW5hdGVzXCIsXG4gICAgZ2V0Q29vcmRpbmF0ZXMoc2NyYXRjaENhcnRlc2lhbjMsIGVsbGlwc29pZClcbiAgKTtcblxuICB2YXIgcG9pbnRHZW9tZXRyeSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiUG9pbnRcIik7XG5cbiAgLy8gU2V0IGFsdGl0dWRlIG1vZGVcbiAgdmFyIGFsdGl0dWRlTW9kZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiYWx0aXR1ZGVNb2RlXCIpO1xuICBhbHRpdHVkZU1vZGUuYXBwZW5kQ2hpbGQoXG4gICAgZ2V0QWx0aXR1ZGVNb2RlKHN0YXRlLCBwb2ludEdyYXBoaWNzLmhlaWdodFJlZmVyZW5jZSlcbiAgKTtcbiAgcG9pbnRHZW9tZXRyeS5hcHBlbmRDaGlsZChhbHRpdHVkZU1vZGUpO1xuXG4gIHBvaW50R2VvbWV0cnkuYXBwZW5kQ2hpbGQoY29vcmRpbmF0ZXMpO1xuICBnZW9tZXRyaWVzLnB1c2gocG9pbnRHZW9tZXRyeSk7XG5cbiAgLy8gQ3JlYXRlIHN0eWxlXG4gIHZhciBpY29uU3R5bGUgPVxuICAgIHBvaW50R3JhcGhpY3MgaW5zdGFuY2VvZiBCaWxsYm9hcmRHcmFwaGljc1xuICAgICAgPyBjcmVhdGVJY29uU3R5bGVGcm9tQmlsbGJvYXJkKHN0YXRlLCBwb2ludEdyYXBoaWNzKVxuICAgICAgOiBjcmVhdGVJY29uU3R5bGVGcm9tUG9pbnQoc3RhdGUsIHBvaW50R3JhcGhpY3MpO1xuICBzdHlsZXMucHVzaChpY29uU3R5bGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUcmFja3Moc3RhdGUsIGVudGl0eSwgcG9pbnRHcmFwaGljcywgZ2VvbWV0cmllcywgc3R5bGVzKSB7XG4gIHZhciBrbWxEb2MgPSBzdGF0ZS5rbWxEb2M7XG4gIHZhciBlbGxpcHNvaWQgPSBzdGF0ZS5lbGxpcHNvaWQ7XG4gIHZhciB2YWx1ZUdldHRlciA9IHN0YXRlLnZhbHVlR2V0dGVyO1xuXG4gIHZhciBpbnRlcnZhbHM7XG4gIHZhciBlbnRpdHlQb3NpdGlvblByb3BlcnR5ID0gZW50aXR5LnBvc2l0aW9uO1xuICB2YXIgdXNlRW50aXR5UG9zaXRpb25Qcm9wZXJ0eSA9IHRydWU7XG4gIGlmIChlbnRpdHlQb3NpdGlvblByb3BlcnR5IGluc3RhbmNlb2YgQ29tcG9zaXRlUG9zaXRpb25Qcm9wZXJ0eSkge1xuICAgIGludGVydmFscyA9IGVudGl0eVBvc2l0aW9uUHJvcGVydHkuaW50ZXJ2YWxzO1xuICAgIHVzZUVudGl0eVBvc2l0aW9uUHJvcGVydHkgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBpbnRlcnZhbHMgPSBkZWZhdWx0VmFsdWUoZW50aXR5LmF2YWlsYWJpbGl0eSwgc3RhdGUuZGVmYXVsdEF2YWlsYWJpbGl0eSk7XG4gIH1cblxuICB2YXIgaXNNb2RlbCA9IHBvaW50R3JhcGhpY3MgaW5zdGFuY2VvZiBNb2RlbEdyYXBoaWNzO1xuXG4gIHZhciBpLCBqLCB0aW1lcztcbiAgdmFyIHRyYWNrcyA9IFtdO1xuICBmb3IgKGkgPSAwOyBpIDwgaW50ZXJ2YWxzLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGludGVydmFsID0gaW50ZXJ2YWxzLmdldChpKTtcbiAgICB2YXIgcG9zaXRpb25Qcm9wZXJ0eSA9IHVzZUVudGl0eVBvc2l0aW9uUHJvcGVydHlcbiAgICAgID8gZW50aXR5UG9zaXRpb25Qcm9wZXJ0eVxuICAgICAgOiBpbnRlcnZhbC5kYXRhO1xuXG4gICAgdmFyIHRyYWNrQWx0aXR1ZGVNb2RlID0ga21sRG9jLmNyZWF0ZUVsZW1lbnQoXCJhbHRpdHVkZU1vZGVcIik7XG4gICAgLy8gVGhpcyBpcyBzb21ldGhpbmcgdGhhdCBLTUwgaW1wb3J0aW5nIHVzZXMgdG8gaGFuZGxlIGNsYW1wVG9Hcm91bmQsXG4gICAgLy8gIHNvIGp1c3QgZXh0cmFjdCB0aGUgaW50ZXJuYWwgcHJvcGVydHkgYW5kIHNldCB0aGUgYWx0aXR1ZGVNb2RlLlxuICAgIGlmIChwb3NpdGlvblByb3BlcnR5IGluc3RhbmNlb2YgU2NhbGVkUG9zaXRpb25Qcm9wZXJ0eSkge1xuICAgICAgcG9zaXRpb25Qcm9wZXJ0eSA9IHBvc2l0aW9uUHJvcGVydHkuX3ZhbHVlO1xuICAgICAgdHJhY2tBbHRpdHVkZU1vZGUuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGdldEFsdGl0dWRlTW9kZShzdGF0ZSwgSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORClcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKHBvaW50R3JhcGhpY3MpKSB7XG4gICAgICB0cmFja0FsdGl0dWRlTW9kZS5hcHBlbmRDaGlsZChcbiAgICAgICAgZ2V0QWx0aXR1ZGVNb2RlKHN0YXRlLCBwb2ludEdyYXBoaWNzLmhlaWdodFJlZmVyZW5jZSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFBhdGggZ3JhcGhpY3Mgb25seSwgd2hpY2ggaGFzIG5vIGhlaWdodCByZWZlcmVuY2VcbiAgICAgIHRyYWNrQWx0aXR1ZGVNb2RlLmFwcGVuZENoaWxkKFxuICAgICAgICBnZXRBbHRpdHVkZU1vZGUoc3RhdGUsIEhlaWdodFJlZmVyZW5jZS5OT05FKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb25UaW1lcyA9IFtdO1xuICAgIHZhciBwb3NpdGlvblZhbHVlcyA9IFtdO1xuXG4gICAgaWYgKHBvc2l0aW9uUHJvcGVydHkuaXNDb25zdGFudCkge1xuICAgICAgdmFsdWVHZXR0ZXIuZ2V0KHBvc2l0aW9uUHJvcGVydHksIHVuZGVmaW5lZCwgc2NyYXRjaENhcnRlc2lhbjMpO1xuICAgICAgdmFyIGNvbnN0Q29vcmRpbmF0ZXMgPSBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChcbiAgICAgICAga21sRG9jLFxuICAgICAgICBcImNvb3JkaW5hdGVzXCIsXG4gICAgICAgIGdldENvb3JkaW5hdGVzKHNjcmF0Y2hDYXJ0ZXNpYW4zLCBlbGxpcHNvaWQpXG4gICAgICApO1xuXG4gICAgICAvLyBUaGlzIGludGVydmFsIGlzIGNvbnN0YW50IHNvIGFkZCBhIHRyYWNrIHdpdGggdGhlIHNhbWUgcG9zaXRpb25cbiAgICAgIHBvc2l0aW9uVGltZXMucHVzaChKdWxpYW5EYXRlLnRvSXNvODYwMShpbnRlcnZhbC5zdGFydCkpO1xuICAgICAgcG9zaXRpb25WYWx1ZXMucHVzaChjb25zdENvb3JkaW5hdGVzKTtcbiAgICAgIHBvc2l0aW9uVGltZXMucHVzaChKdWxpYW5EYXRlLnRvSXNvODYwMShpbnRlcnZhbC5zdG9wKSk7XG4gICAgICBwb3NpdGlvblZhbHVlcy5wdXNoKGNvbnN0Q29vcmRpbmF0ZXMpO1xuICAgIH0gZWxzZSBpZiAocG9zaXRpb25Qcm9wZXJ0eSBpbnN0YW5jZW9mIFNhbXBsZWRQb3NpdGlvblByb3BlcnR5KSB7XG4gICAgICB0aW1lcyA9IHBvc2l0aW9uUHJvcGVydHkuX3Byb3BlcnR5Ll90aW1lcztcblxuICAgICAgZm9yIChqID0gMDsgaiA8IHRpbWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIHBvc2l0aW9uVGltZXMucHVzaChKdWxpYW5EYXRlLnRvSXNvODYwMSh0aW1lc1tqXSkpO1xuICAgICAgICBwb3NpdGlvblByb3BlcnR5LmdldFZhbHVlSW5SZWZlcmVuY2VGcmFtZShcbiAgICAgICAgICB0aW1lc1tqXSxcbiAgICAgICAgICBSZWZlcmVuY2VGcmFtZS5GSVhFRCxcbiAgICAgICAgICBzY3JhdGNoQ2FydGVzaWFuM1xuICAgICAgICApO1xuICAgICAgICBwb3NpdGlvblZhbHVlcy5wdXNoKGdldENvb3JkaW5hdGVzKHNjcmF0Y2hDYXJ0ZXNpYW4zLCBlbGxpcHNvaWQpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uUHJvcGVydHkgaW5zdGFuY2VvZiBTYW1wbGVkUHJvcGVydHkpIHtcbiAgICAgIHRpbWVzID0gcG9zaXRpb25Qcm9wZXJ0eS5fdGltZXM7XG4gICAgICB2YXIgdmFsdWVzID0gcG9zaXRpb25Qcm9wZXJ0eS5fdmFsdWVzO1xuXG4gICAgICBmb3IgKGogPSAwOyBqIDwgdGltZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgcG9zaXRpb25UaW1lcy5wdXNoKEp1bGlhbkRhdGUudG9Jc284NjAxKHRpbWVzW2pdKSk7XG4gICAgICAgIENhcnRlc2lhbjMuZnJvbUFycmF5KHZhbHVlcywgaiAqIDMsIHNjcmF0Y2hDYXJ0ZXNpYW4zKTtcbiAgICAgICAgcG9zaXRpb25WYWx1ZXMucHVzaChnZXRDb29yZGluYXRlcyhzY3JhdGNoQ2FydGVzaWFuMywgZWxsaXBzb2lkKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBkdXJhdGlvbiA9IHN0YXRlLnNhbXBsZUR1cmF0aW9uO1xuICAgICAgaW50ZXJ2YWwuc3RhcnQuY2xvbmUoc2NyYXRjaEp1bGlhbkRhdGUpO1xuICAgICAgaWYgKCFpbnRlcnZhbC5pc1N0YXJ0SW5jbHVkZWQpIHtcbiAgICAgICAgSnVsaWFuRGF0ZS5hZGRTZWNvbmRzKHNjcmF0Y2hKdWxpYW5EYXRlLCBkdXJhdGlvbiwgc2NyYXRjaEp1bGlhbkRhdGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RvcERhdGUgPSBpbnRlcnZhbC5zdG9wO1xuICAgICAgd2hpbGUgKEp1bGlhbkRhdGUubGVzc1RoYW4oc2NyYXRjaEp1bGlhbkRhdGUsIHN0b3BEYXRlKSkge1xuICAgICAgICBwb3NpdGlvblByb3BlcnR5LmdldFZhbHVlKHNjcmF0Y2hKdWxpYW5EYXRlLCBzY3JhdGNoQ2FydGVzaWFuMyk7XG5cbiAgICAgICAgcG9zaXRpb25UaW1lcy5wdXNoKEp1bGlhbkRhdGUudG9Jc284NjAxKHNjcmF0Y2hKdWxpYW5EYXRlKSk7XG4gICAgICAgIHBvc2l0aW9uVmFsdWVzLnB1c2goZ2V0Q29vcmRpbmF0ZXMoc2NyYXRjaENhcnRlc2lhbjMsIGVsbGlwc29pZCkpO1xuXG4gICAgICAgIEp1bGlhbkRhdGUuYWRkU2Vjb25kcyhzY3JhdGNoSnVsaWFuRGF0ZSwgZHVyYXRpb24sIHNjcmF0Y2hKdWxpYW5EYXRlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBpbnRlcnZhbC5pc1N0b3BJbmNsdWRlZCAmJlxuICAgICAgICBKdWxpYW5EYXRlLmVxdWFscyhzY3JhdGNoSnVsaWFuRGF0ZSwgc3RvcERhdGUpXG4gICAgICApIHtcbiAgICAgICAgcG9zaXRpb25Qcm9wZXJ0eS5nZXRWYWx1ZShzY3JhdGNoSnVsaWFuRGF0ZSwgc2NyYXRjaENhcnRlc2lhbjMpO1xuXG4gICAgICAgIHBvc2l0aW9uVGltZXMucHVzaChKdWxpYW5EYXRlLnRvSXNvODYwMShzY3JhdGNoSnVsaWFuRGF0ZSkpO1xuICAgICAgICBwb3NpdGlvblZhbHVlcy5wdXNoKGdldENvb3JkaW5hdGVzKHNjcmF0Y2hDYXJ0ZXNpYW4zLCBlbGxpcHNvaWQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdHJhY2tHZW9tZXRyeSA9IGttbERvYy5jcmVhdGVFbGVtZW50TlMoZ3hOYW1lc3BhY2UsIFwiVHJhY2tcIik7XG4gICAgdHJhY2tHZW9tZXRyeS5hcHBlbmRDaGlsZCh0cmFja0FsdGl0dWRlTW9kZSk7XG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHBvc2l0aW9uVGltZXMubGVuZ3RoOyArK2spIHtcbiAgICAgIHZhciB3aGVuID0gY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcIndoZW5cIiwgcG9zaXRpb25UaW1lc1trXSk7XG4gICAgICB2YXIgY29vcmQgPSBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChcbiAgICAgICAga21sRG9jLFxuICAgICAgICBcImNvb3JkXCIsXG4gICAgICAgIHBvc2l0aW9uVmFsdWVzW2tdLFxuICAgICAgICBneE5hbWVzcGFjZVxuICAgICAgKTtcblxuICAgICAgdHJhY2tHZW9tZXRyeS5hcHBlbmRDaGlsZCh3aGVuKTtcbiAgICAgIHRyYWNrR2VvbWV0cnkuYXBwZW5kQ2hpbGQoY29vcmQpO1xuICAgIH1cblxuICAgIGlmIChpc01vZGVsKSB7XG4gICAgICB0cmFja0dlb21ldHJ5LmFwcGVuZENoaWxkKGNyZWF0ZU1vZGVsR2VvbWV0cnkoc3RhdGUsIHBvaW50R3JhcGhpY3MpKTtcbiAgICB9XG5cbiAgICB0cmFja3MucHVzaCh0cmFja0dlb21ldHJ5KTtcbiAgfVxuXG4gIC8vIElmIG9uZSB0cmFjaywgdGhlbiB1c2UgaXQgb3RoZXJ3aXNlIGNvbWJpbmUgaW50byBhIG11bHRpdHJhY2tcbiAgaWYgKHRyYWNrcy5sZW5ndGggPT09IDEpIHtcbiAgICBnZW9tZXRyaWVzLnB1c2godHJhY2tzWzBdKTtcbiAgfSBlbHNlIGlmICh0cmFja3MubGVuZ3RoID4gMSkge1xuICAgIHZhciBtdWx0aVRyYWNrR2VvbWV0cnkgPSBrbWxEb2MuY3JlYXRlRWxlbWVudE5TKGd4TmFtZXNwYWNlLCBcIk11bHRpVHJhY2tcIik7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgKytpKSB7XG4gICAgICBtdWx0aVRyYWNrR2VvbWV0cnkuYXBwZW5kQ2hpbGQodHJhY2tzW2ldKTtcbiAgICB9XG5cbiAgICBnZW9tZXRyaWVzLnB1c2gobXVsdGlUcmFja0dlb21ldHJ5KTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBzdHlsZVxuICBpZiAoZGVmaW5lZChwb2ludEdyYXBoaWNzKSAmJiAhaXNNb2RlbCkge1xuICAgIHZhciBpY29uU3R5bGUgPVxuICAgICAgcG9pbnRHcmFwaGljcyBpbnN0YW5jZW9mIEJpbGxib2FyZEdyYXBoaWNzXG4gICAgICAgID8gY3JlYXRlSWNvblN0eWxlRnJvbUJpbGxib2FyZChzdGF0ZSwgcG9pbnRHcmFwaGljcylcbiAgICAgICAgOiBjcmVhdGVJY29uU3R5bGVGcm9tUG9pbnQoc3RhdGUsIHBvaW50R3JhcGhpY3MpO1xuICAgIHN0eWxlcy5wdXNoKGljb25TdHlsZSk7XG4gIH1cblxuICAvLyBTZWUgaWYgd2UgaGF2ZSBhIGxpbmUgdGhhdCBuZWVkcyB0byBiZSBkcmF3blxuICB2YXIgcGF0aCA9IGVudGl0eS5wYXRoO1xuICBpZiAoZGVmaW5lZChwYXRoKSkge1xuICAgIHZhciB3aWR0aCA9IHZhbHVlR2V0dGVyLmdldChwYXRoLndpZHRoKTtcbiAgICB2YXIgbWF0ZXJpYWwgPSBwYXRoLm1hdGVyaWFsO1xuICAgIGlmIChkZWZpbmVkKG1hdGVyaWFsKSB8fCBkZWZpbmVkKHdpZHRoKSkge1xuICAgICAgdmFyIGxpbmVTdHlsZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiTGluZVN0eWxlXCIpO1xuICAgICAgaWYgKGRlZmluZWQod2lkdGgpKSB7XG4gICAgICAgIGxpbmVTdHlsZS5hcHBlbmRDaGlsZChcbiAgICAgICAgICBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3NNYXRlcmlhbChzdGF0ZSwgbWF0ZXJpYWwsIGxpbmVTdHlsZSk7XG4gICAgICBzdHlsZXMucHVzaChsaW5lU3R5bGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVJY29uU3R5bGVGcm9tUG9pbnQoc3RhdGUsIHBvaW50R3JhcGhpY3MpIHtcbiAgdmFyIGttbERvYyA9IHN0YXRlLmttbERvYztcbiAgdmFyIHZhbHVlR2V0dGVyID0gc3RhdGUudmFsdWVHZXR0ZXI7XG5cbiAgdmFyIGljb25TdHlsZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiSWNvblN0eWxlXCIpO1xuXG4gIHZhciBjb2xvciA9IHZhbHVlR2V0dGVyLmdldENvbG9yKHBvaW50R3JhcGhpY3MuY29sb3IpO1xuICBpZiAoZGVmaW5lZChjb2xvcikpIHtcbiAgICBpY29uU3R5bGUuYXBwZW5kQ2hpbGQoY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImNvbG9yXCIsIGNvbG9yKSk7XG4gICAgaWNvblN0eWxlLmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImNvbG9yTW9kZVwiLCBcIm5vcm1hbFwiKVxuICAgICk7XG4gIH1cblxuICB2YXIgcGl4ZWxTaXplID0gdmFsdWVHZXR0ZXIuZ2V0KHBvaW50R3JhcGhpY3MucGl4ZWxTaXplKTtcbiAgaWYgKGRlZmluZWQocGl4ZWxTaXplKSkge1xuICAgIGljb25TdHlsZS5hcHBlbmRDaGlsZChcbiAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJzY2FsZVwiLCBwaXhlbFNpemUgLyBCSUxMQk9BUkRfU0laRSlcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGljb25TdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSWNvblN0eWxlRnJvbUJpbGxib2FyZChzdGF0ZSwgYmlsbGJvYXJkR3JhcGhpY3MpIHtcbiAgdmFyIGttbERvYyA9IHN0YXRlLmttbERvYztcbiAgdmFyIHZhbHVlR2V0dGVyID0gc3RhdGUudmFsdWVHZXR0ZXI7XG4gIHZhciBleHRlcm5hbEZpbGVIYW5kbGVyID0gc3RhdGUuZXh0ZXJuYWxGaWxlSGFuZGxlcjtcblxuICB2YXIgaWNvblN0eWxlID0ga21sRG9jLmNyZWF0ZUVsZW1lbnQoXCJJY29uU3R5bGVcIik7XG5cbiAgdmFyIGltYWdlID0gdmFsdWVHZXR0ZXIuZ2V0KGJpbGxib2FyZEdyYXBoaWNzLmltYWdlKTtcbiAgaWYgKGRlZmluZWQoaW1hZ2UpKSB7XG4gICAgaW1hZ2UgPSBleHRlcm5hbEZpbGVIYW5kbGVyLnRleHR1cmUoaW1hZ2UpO1xuXG4gICAgdmFyIGljb24gPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIkljb25cIik7XG4gICAgaWNvbi5hcHBlbmRDaGlsZChjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwiaHJlZlwiLCBpbWFnZSkpO1xuXG4gICAgdmFyIGltYWdlU3ViUmVnaW9uID0gdmFsdWVHZXR0ZXIuZ2V0KGJpbGxib2FyZEdyYXBoaWNzLmltYWdlU3ViUmVnaW9uKTtcbiAgICBpZiAoZGVmaW5lZChpbWFnZVN1YlJlZ2lvbikpIHtcbiAgICAgIGljb24uYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJ4XCIsIGltYWdlU3ViUmVnaW9uLngsIGd4TmFtZXNwYWNlKVxuICAgICAgKTtcbiAgICAgIGljb24uYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJ5XCIsIGltYWdlU3ViUmVnaW9uLnksIGd4TmFtZXNwYWNlKVxuICAgICAgKTtcbiAgICAgIGljb24uYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KFxuICAgICAgICAgIGttbERvYyxcbiAgICAgICAgICBcIndcIixcbiAgICAgICAgICBpbWFnZVN1YlJlZ2lvbi53aWR0aCxcbiAgICAgICAgICBneE5hbWVzcGFjZVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgaWNvbi5hcHBlbmRDaGlsZChcbiAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoXG4gICAgICAgICAga21sRG9jLFxuICAgICAgICAgIFwiaFwiLFxuICAgICAgICAgIGltYWdlU3ViUmVnaW9uLmhlaWdodCxcbiAgICAgICAgICBneE5hbWVzcGFjZVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIGljb25TdHlsZS5hcHBlbmRDaGlsZChpY29uKTtcbiAgfVxuXG4gIHZhciBjb2xvciA9IHZhbHVlR2V0dGVyLmdldENvbG9yKGJpbGxib2FyZEdyYXBoaWNzLmNvbG9yKTtcbiAgaWYgKGRlZmluZWQoY29sb3IpKSB7XG4gICAgaWNvblN0eWxlLmFwcGVuZENoaWxkKGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJjb2xvclwiLCBjb2xvcikpO1xuICAgIGljb25TdHlsZS5hcHBlbmRDaGlsZChcbiAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJjb2xvck1vZGVcIiwgXCJub3JtYWxcIilcbiAgICApO1xuICB9XG5cbiAgdmFyIHNjYWxlID0gdmFsdWVHZXR0ZXIuZ2V0KGJpbGxib2FyZEdyYXBoaWNzLnNjYWxlKTtcbiAgaWYgKGRlZmluZWQoc2NhbGUpKSB7XG4gICAgaWNvblN0eWxlLmFwcGVuZENoaWxkKGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJzY2FsZVwiLCBzY2FsZSkpO1xuICB9XG5cbiAgdmFyIHBpeGVsT2Zmc2V0ID0gdmFsdWVHZXR0ZXIuZ2V0KGJpbGxib2FyZEdyYXBoaWNzLnBpeGVsT2Zmc2V0KTtcbiAgaWYgKGRlZmluZWQocGl4ZWxPZmZzZXQpKSB7XG4gICAgc2NhbGUgPSBkZWZhdWx0VmFsdWUoc2NhbGUsIDEuMCk7XG5cbiAgICBDYXJ0ZXNpYW4yLmRpdmlkZUJ5U2NhbGFyKHBpeGVsT2Zmc2V0LCBzY2FsZSwgcGl4ZWxPZmZzZXQpO1xuXG4gICAgdmFyIHdpZHRoID0gdmFsdWVHZXR0ZXIuZ2V0KGJpbGxib2FyZEdyYXBoaWNzLndpZHRoLCBCSUxMQk9BUkRfU0laRSk7XG4gICAgdmFyIGhlaWdodCA9IHZhbHVlR2V0dGVyLmdldChiaWxsYm9hcmRHcmFwaGljcy5oZWlnaHQsIEJJTExCT0FSRF9TSVpFKTtcblxuICAgIC8vIEtNTCBIb3RzcG90cyBhcmUgZnJvbSB0aGUgYm90dG9tIGxlZnQsIGJ1dCB3ZSB3b3JrIGZyb20gdGhlIHRvcCBsZWZ0XG5cbiAgICAvLyBNb3ZlIHRvIGxlZnRcbiAgICB2YXIgaG9yaXpvbnRhbE9yaWdpbiA9IHZhbHVlR2V0dGVyLmdldChcbiAgICAgIGJpbGxib2FyZEdyYXBoaWNzLmhvcml6b250YWxPcmlnaW4sXG4gICAgICBIb3Jpem9udGFsT3JpZ2luLkNFTlRFUlxuICAgICk7XG4gICAgaWYgKGhvcml6b250YWxPcmlnaW4gPT09IEhvcml6b250YWxPcmlnaW4uQ0VOVEVSKSB7XG4gICAgICBwaXhlbE9mZnNldC54IC09IHdpZHRoICogMC41O1xuICAgIH0gZWxzZSBpZiAoaG9yaXpvbnRhbE9yaWdpbiA9PT0gSG9yaXpvbnRhbE9yaWdpbi5SSUdIVCkge1xuICAgICAgcGl4ZWxPZmZzZXQueCAtPSB3aWR0aDtcbiAgICB9XG5cbiAgICAvLyBNb3ZlIHRvIGJvdHRvbVxuICAgIHZhciB2ZXJ0aWNhbE9yaWdpbiA9IHZhbHVlR2V0dGVyLmdldChcbiAgICAgIGJpbGxib2FyZEdyYXBoaWNzLnZlcnRpY2FsT3JpZ2luLFxuICAgICAgVmVydGljYWxPcmlnaW4uQ0VOVEVSXG4gICAgKTtcbiAgICBpZiAodmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLlRPUCkge1xuICAgICAgcGl4ZWxPZmZzZXQueSArPSBoZWlnaHQ7XG4gICAgfSBlbHNlIGlmICh2ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uQ0VOVEVSKSB7XG4gICAgICBwaXhlbE9mZnNldC55ICs9IGhlaWdodCAqIDAuNTtcbiAgICB9XG5cbiAgICB2YXIgaG90U3BvdCA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiaG90U3BvdFwiKTtcbiAgICBob3RTcG90LnNldEF0dHJpYnV0ZShcInhcIiwgLXBpeGVsT2Zmc2V0LngpO1xuICAgIGhvdFNwb3Quc2V0QXR0cmlidXRlKFwieVwiLCBwaXhlbE9mZnNldC55KTtcbiAgICBob3RTcG90LnNldEF0dHJpYnV0ZShcInh1bml0c1wiLCBcInBpeGVsc1wiKTtcbiAgICBob3RTcG90LnNldEF0dHJpYnV0ZShcInl1bml0c1wiLCBcInBpeGVsc1wiKTtcblxuICAgIGljb25TdHlsZS5hcHBlbmRDaGlsZChob3RTcG90KTtcbiAgfVxuXG4gIC8vIFdlIGNhbiBvbmx5IHNwZWNpZnkgaGVhZGluZyBzbyBpZiBheGlzIGlzbid0IFosIHRoZW4gd2Ugc2tpcCB0aGUgcm90YXRpb25cbiAgLy8gR0UgdHJlYXRzIGEgaGVhZGluZyBvZiB6ZXJvIGFzIG5vIGhlYWRpbmcgYnV0IGNhbiBzdGlsbCBwb2ludCBub3J0aCB1c2luZyBhIDM2MCBkZWdyZWUgYW5nbGVcbiAgdmFyIHJvdGF0aW9uID0gdmFsdWVHZXR0ZXIuZ2V0KGJpbGxib2FyZEdyYXBoaWNzLnJvdGF0aW9uKTtcbiAgdmFyIGFsaWduZWRBeGlzID0gdmFsdWVHZXR0ZXIuZ2V0KGJpbGxib2FyZEdyYXBoaWNzLmFsaWduZWRBeGlzKTtcbiAgaWYgKGRlZmluZWQocm90YXRpb24pICYmIENhcnRlc2lhbjMuZXF1YWxzKENhcnRlc2lhbjMuVU5JVF9aLCBhbGlnbmVkQXhpcykpIHtcbiAgICByb3RhdGlvbiA9IENlc2l1bU1hdGgudG9EZWdyZWVzKC1yb3RhdGlvbik7XG4gICAgaWYgKHJvdGF0aW9uID09PSAwKSB7XG4gICAgICByb3RhdGlvbiA9IDM2MDtcbiAgICB9XG5cbiAgICBpY29uU3R5bGUuYXBwZW5kQ2hpbGQoXG4gICAgICBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwiaGVhZGluZ1wiLCByb3RhdGlvbilcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGljb25TdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGluZVN0cmluZyhzdGF0ZSwgcG9seWxpbmVHcmFwaGljcywgZ2VvbWV0cmllcywgc3R5bGVzKSB7XG4gIHZhciBrbWxEb2MgPSBzdGF0ZS5rbWxEb2M7XG4gIHZhciBlbGxpcHNvaWQgPSBzdGF0ZS5lbGxpcHNvaWQ7XG4gIHZhciB2YWx1ZUdldHRlciA9IHN0YXRlLnZhbHVlR2V0dGVyO1xuXG4gIGlmICghZGVmaW5lZChwb2x5bGluZUdyYXBoaWNzKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBsaW5lU3RyaW5nR2VvbWV0cnkgPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIkxpbmVTdHJpbmdcIik7XG5cbiAgLy8gU2V0IGFsdGl0dWRlIG1vZGVcbiAgdmFyIGFsdGl0dWRlTW9kZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiYWx0aXR1ZGVNb2RlXCIpO1xuICB2YXIgY2xhbXBUb0dyb3VuZCA9IHZhbHVlR2V0dGVyLmdldChwb2x5bGluZUdyYXBoaWNzLmNsYW1wVG9Hcm91bmQsIGZhbHNlKTtcbiAgdmFyIGFsdGl0dWRlTW9kZVRleHQ7XG4gIGlmIChjbGFtcFRvR3JvdW5kKSB7XG4gICAgbGluZVN0cmluZ0dlb21ldHJ5LmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcInRlc3NlbGxhdGVcIiwgdHJ1ZSlcbiAgICApO1xuICAgIGFsdGl0dWRlTW9kZVRleHQgPSBrbWxEb2MuY3JlYXRlVGV4dE5vZGUoXCJjbGFtcFRvR3JvdW5kXCIpO1xuICB9IGVsc2Uge1xuICAgIGFsdGl0dWRlTW9kZVRleHQgPSBrbWxEb2MuY3JlYXRlVGV4dE5vZGUoXCJhYnNvbHV0ZVwiKTtcbiAgfVxuICBhbHRpdHVkZU1vZGUuYXBwZW5kQ2hpbGQoYWx0aXR1ZGVNb2RlVGV4dCk7XG4gIGxpbmVTdHJpbmdHZW9tZXRyeS5hcHBlbmRDaGlsZChhbHRpdHVkZU1vZGUpO1xuXG4gIC8vIFNldCBjb29yZGluYXRlc1xuICB2YXIgcG9zaXRpb25zUHJvcGVydHkgPSBwb2x5bGluZUdyYXBoaWNzLnBvc2l0aW9ucztcbiAgdmFyIGNhcnRlc2lhbnMgPSB2YWx1ZUdldHRlci5nZXQocG9zaXRpb25zUHJvcGVydHkpO1xuICB2YXIgY29vcmRpbmF0ZXMgPSBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChcbiAgICBrbWxEb2MsXG4gICAgXCJjb29yZGluYXRlc1wiLFxuICAgIGdldENvb3JkaW5hdGVzKGNhcnRlc2lhbnMsIGVsbGlwc29pZClcbiAgKTtcbiAgbGluZVN0cmluZ0dlb21ldHJ5LmFwcGVuZENoaWxkKGNvb3JkaW5hdGVzKTtcblxuICAvLyBTZXQgZHJhdyBvcmRlclxuICB2YXIgekluZGV4ID0gdmFsdWVHZXR0ZXIuZ2V0KHBvbHlsaW5lR3JhcGhpY3MuekluZGV4KTtcbiAgaWYgKGNsYW1wVG9Hcm91bmQgJiYgZGVmaW5lZCh6SW5kZXgpKSB7XG4gICAgbGluZVN0cmluZ0dlb21ldHJ5LmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImRyYXdPcmRlclwiLCB6SW5kZXgsIGd4TmFtZXNwYWNlKVxuICAgICk7XG4gIH1cblxuICBnZW9tZXRyaWVzLnB1c2gobGluZVN0cmluZ0dlb21ldHJ5KTtcblxuICAvLyBDcmVhdGUgc3R5bGVcbiAgdmFyIGxpbmVTdHlsZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiTGluZVN0eWxlXCIpO1xuXG4gIHZhciB3aWR0aCA9IHZhbHVlR2V0dGVyLmdldChwb2x5bGluZUdyYXBoaWNzLndpZHRoKTtcbiAgaWYgKGRlZmluZWQod2lkdGgpKSB7XG4gICAgbGluZVN0eWxlLmFwcGVuZENoaWxkKGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJ3aWR0aFwiLCB3aWR0aCkpO1xuICB9XG5cbiAgcHJvY2Vzc01hdGVyaWFsKHN0YXRlLCBwb2x5bGluZUdyYXBoaWNzLm1hdGVyaWFsLCBsaW5lU3R5bGUpO1xuXG4gIHN0eWxlcy5wdXNoKGxpbmVTdHlsZSk7XG59XG5cbmZ1bmN0aW9uIGdldFJlY3RhbmdsZUJvdW5kYXJpZXMoc3RhdGUsIHJlY3RhbmdsZUdyYXBoaWNzLCBleHRydWRlZEhlaWdodCkge1xuICB2YXIga21sRG9jID0gc3RhdGUua21sRG9jO1xuICB2YXIgdmFsdWVHZXR0ZXIgPSBzdGF0ZS52YWx1ZUdldHRlcjtcblxuICB2YXIgY29vcmRpbmF0ZXM7XG4gIHZhciBoZWlnaHQgPSB2YWx1ZUdldHRlci5nZXQocmVjdGFuZ2xlR3JhcGhpY3MuaGVpZ2h0LCAwLjApO1xuXG4gIGlmIChleHRydWRlZEhlaWdodCA+IDApIHtcbiAgICAvLyBXZSBleHRydWRlIHVwIGFuZCBLTUwgZXh0cnVkZXMgZG93biwgc28gaWYgd2UgZXh0cnVkZSwgc2V0IHRoZSBwb2x5Z29uIGhlaWdodCB0b1xuICAgIC8vIHRoZSBleHRydWRlZCBoZWlnaHQgc28gS01MIHdpbGwgbG9vayBzaW1pbGFyIHRvIENlc2l1bVxuICAgIGhlaWdodCA9IGV4dHJ1ZGVkSGVpZ2h0O1xuICB9XG5cbiAgdmFyIGNvb3JkaW5hdGVzUHJvcGVydHkgPSByZWN0YW5nbGVHcmFwaGljcy5jb29yZGluYXRlcztcbiAgdmFyIHJlY3RhbmdsZSA9IHZhbHVlR2V0dGVyLmdldChjb29yZGluYXRlc1Byb3BlcnR5KTtcblxuICB2YXIgY29vcmRpbmF0ZVN0cmluZ3MgPSBbXTtcbiAgdmFyIGNvcm5lckZ1bmN0aW9uID0gW1xuICAgIFJlY3RhbmdsZS5ub3J0aGVhc3QsXG4gICAgUmVjdGFuZ2xlLnNvdXRoZWFzdCxcbiAgICBSZWN0YW5nbGUuc291dGh3ZXN0LFxuICAgIFJlY3RhbmdsZS5ub3J0aHdlc3QsXG4gIF07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyArK2kpIHtcbiAgICBjb3JuZXJGdW5jdGlvbltpXShyZWN0YW5nbGUsIHNjcmF0Y2hDYXJ0b2dyYXBoaWMpO1xuICAgIGNvb3JkaW5hdGVTdHJpbmdzLnB1c2goXG4gICAgICBDZXNpdW1NYXRoLnRvRGVncmVlcyhzY3JhdGNoQ2FydG9ncmFwaGljLmxvbmdpdHVkZSkgK1xuICAgICAgICBcIixcIiArXG4gICAgICAgIENlc2l1bU1hdGgudG9EZWdyZWVzKHNjcmF0Y2hDYXJ0b2dyYXBoaWMubGF0aXR1ZGUpICtcbiAgICAgICAgXCIsXCIgK1xuICAgICAgICBoZWlnaHRcbiAgICApO1xuICB9XG5cbiAgY29vcmRpbmF0ZXMgPSBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChcbiAgICBrbWxEb2MsXG4gICAgXCJjb29yZGluYXRlc1wiLFxuICAgIGNvb3JkaW5hdGVTdHJpbmdzLmpvaW4oXCIgXCIpXG4gICk7XG5cbiAgdmFyIG91dGVyQm91bmRhcnlJcyA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwib3V0ZXJCb3VuZGFyeUlzXCIpO1xuICB2YXIgbGluZWFyUmluZyA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiTGluZWFyUmluZ1wiKTtcbiAgbGluZWFyUmluZy5hcHBlbmRDaGlsZChjb29yZGluYXRlcyk7XG4gIG91dGVyQm91bmRhcnlJcy5hcHBlbmRDaGlsZChsaW5lYXJSaW5nKTtcblxuICByZXR1cm4gW291dGVyQm91bmRhcnlJc107XG59XG5cbmZ1bmN0aW9uIGdldExpbmVhclJpbmcoc3RhdGUsIHBvc2l0aW9ucywgaGVpZ2h0LCBwZXJQb3NpdGlvbkhlaWdodCkge1xuICB2YXIga21sRG9jID0gc3RhdGUua21sRG9jO1xuICB2YXIgZWxsaXBzb2lkID0gc3RhdGUuZWxsaXBzb2lkO1xuXG4gIHZhciBjb29yZGluYXRlU3RyaW5ncyA9IFtdO1xuICB2YXIgcG9zaXRpb25Db3VudCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zaXRpb25Db3VudDsgKytpKSB7XG4gICAgQ2FydG9ncmFwaGljLmZyb21DYXJ0ZXNpYW4ocG9zaXRpb25zW2ldLCBlbGxpcHNvaWQsIHNjcmF0Y2hDYXJ0b2dyYXBoaWMpO1xuICAgIGNvb3JkaW5hdGVTdHJpbmdzLnB1c2goXG4gICAgICBDZXNpdW1NYXRoLnRvRGVncmVlcyhzY3JhdGNoQ2FydG9ncmFwaGljLmxvbmdpdHVkZSkgK1xuICAgICAgICBcIixcIiArXG4gICAgICAgIENlc2l1bU1hdGgudG9EZWdyZWVzKHNjcmF0Y2hDYXJ0b2dyYXBoaWMubGF0aXR1ZGUpICtcbiAgICAgICAgXCIsXCIgK1xuICAgICAgICAocGVyUG9zaXRpb25IZWlnaHQgPyBzY3JhdGNoQ2FydG9ncmFwaGljLmhlaWdodCA6IGhlaWdodClcbiAgICApO1xuICB9XG5cbiAgdmFyIGNvb3JkaW5hdGVzID0gY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoXG4gICAga21sRG9jLFxuICAgIFwiY29vcmRpbmF0ZXNcIixcbiAgICBjb29yZGluYXRlU3RyaW5ncy5qb2luKFwiIFwiKVxuICApO1xuICB2YXIgbGluZWFyUmluZyA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiTGluZWFyUmluZ1wiKTtcbiAgbGluZWFyUmluZy5hcHBlbmRDaGlsZChjb29yZGluYXRlcyk7XG5cbiAgcmV0dXJuIGxpbmVhclJpbmc7XG59XG5cbmZ1bmN0aW9uIGdldFBvbHlnb25Cb3VuZGFyaWVzKHN0YXRlLCBwb2x5Z29uR3JhcGhpY3MsIGV4dHJ1ZGVkSGVpZ2h0KSB7XG4gIHZhciBrbWxEb2MgPSBzdGF0ZS5rbWxEb2M7XG4gIHZhciB2YWx1ZUdldHRlciA9IHN0YXRlLnZhbHVlR2V0dGVyO1xuXG4gIHZhciBoZWlnaHQgPSB2YWx1ZUdldHRlci5nZXQocG9seWdvbkdyYXBoaWNzLmhlaWdodCwgMC4wKTtcbiAgdmFyIHBlclBvc2l0aW9uSGVpZ2h0ID0gdmFsdWVHZXR0ZXIuZ2V0KFxuICAgIHBvbHlnb25HcmFwaGljcy5wZXJQb3NpdGlvbkhlaWdodCxcbiAgICBmYWxzZVxuICApO1xuXG4gIGlmICghcGVyUG9zaXRpb25IZWlnaHQgJiYgZXh0cnVkZWRIZWlnaHQgPiAwKSB7XG4gICAgLy8gV2UgZXh0cnVkZSB1cCBhbmQgS01MIGV4dHJ1ZGVzIGRvd24sIHNvIGlmIHdlIGV4dHJ1ZGUsIHNldCB0aGUgcG9seWdvbiBoZWlnaHQgdG9cbiAgICAvLyB0aGUgZXh0cnVkZWQgaGVpZ2h0IHNvIEtNTCB3aWxsIGxvb2sgc2ltaWxhciB0byBDZXNpdW1cbiAgICBoZWlnaHQgPSBleHRydWRlZEhlaWdodDtcbiAgfVxuXG4gIHZhciBib3VuZGFyaWVzID0gW107XG4gIHZhciBoaWVyYXJjaHlQcm9wZXJ0eSA9IHBvbHlnb25HcmFwaGljcy5oaWVyYXJjaHk7XG4gIHZhciBoaWVyYXJjaHkgPSB2YWx1ZUdldHRlci5nZXQoaGllcmFyY2h5UHJvcGVydHkpO1xuXG4gIC8vIFBvbHlnb24gaGllcmFyY2h5IGNhbiBzb21ldGltZXMganVzdCBiZSBhbiBhcnJheSBvZiBwb3NpdGlvbnNcbiAgdmFyIHBvc2l0aW9ucyA9IEFycmF5LmlzQXJyYXkoaGllcmFyY2h5KSA/IGhpZXJhcmNoeSA6IGhpZXJhcmNoeS5wb3NpdGlvbnM7XG5cbiAgLy8gUG9seWdvbiBib3VuZGFyaWVzXG4gIHZhciBvdXRlckJvdW5kYXJ5SXMgPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIm91dGVyQm91bmRhcnlJc1wiKTtcbiAgb3V0ZXJCb3VuZGFyeUlzLmFwcGVuZENoaWxkKFxuICAgIGdldExpbmVhclJpbmcoc3RhdGUsIHBvc2l0aW9ucywgaGVpZ2h0LCBwZXJQb3NpdGlvbkhlaWdodClcbiAgKTtcbiAgYm91bmRhcmllcy5wdXNoKG91dGVyQm91bmRhcnlJcyk7XG5cbiAgLy8gSG9sZSBib3VuZGFyaWVzXG4gIHZhciBob2xlcyA9IGhpZXJhcmNoeS5ob2xlcztcbiAgaWYgKGRlZmluZWQoaG9sZXMpKSB7XG4gICAgdmFyIGhvbGVDb3VudCA9IGhvbGVzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvbGVDb3VudDsgKytpKSB7XG4gICAgICB2YXIgaW5uZXJCb3VuZGFyeUlzID0ga21sRG9jLmNyZWF0ZUVsZW1lbnQoXCJpbm5lckJvdW5kYXJ5SXNcIik7XG4gICAgICBpbm5lckJvdW5kYXJ5SXMuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGdldExpbmVhclJpbmcoc3RhdGUsIGhvbGVzW2ldLnBvc2l0aW9ucywgaGVpZ2h0LCBwZXJQb3NpdGlvbkhlaWdodClcbiAgICAgICk7XG4gICAgICBib3VuZGFyaWVzLnB1c2goaW5uZXJCb3VuZGFyeUlzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYm91bmRhcmllcztcbn1cblxuZnVuY3Rpb24gY3JlYXRlUG9seWdvbihzdGF0ZSwgZ2VvbWV0cnksIGdlb21ldHJpZXMsIHN0eWxlcywgb3ZlcmxheXMpIHtcbiAgdmFyIGttbERvYyA9IHN0YXRlLmttbERvYztcbiAgdmFyIHZhbHVlR2V0dGVyID0gc3RhdGUudmFsdWVHZXR0ZXI7XG5cbiAgaWYgKCFkZWZpbmVkKGdlb21ldHJ5KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIERldGVjdCB0ZXh0dXJlZCBxdWFkcyBhbmQgdXNlIGdyb3VuZCBvdmVybGF5cyBpbnN0ZWFkXG4gIHZhciBpc1JlY3RhbmdsZSA9IGdlb21ldHJ5IGluc3RhbmNlb2YgUmVjdGFuZ2xlR3JhcGhpY3M7XG4gIGlmIChcbiAgICBpc1JlY3RhbmdsZSAmJlxuICAgIHZhbHVlR2V0dGVyLmdldE1hdGVyaWFsVHlwZShnZW9tZXRyeS5tYXRlcmlhbCkgPT09IFwiSW1hZ2VcIlxuICApIHtcbiAgICBjcmVhdGVHcm91bmRPdmVybGF5KHN0YXRlLCBnZW9tZXRyeSwgb3ZlcmxheXMpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBwb2x5Z29uR2VvbWV0cnkgPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIlBvbHlnb25cIik7XG5cbiAgdmFyIGV4dHJ1ZGVkSGVpZ2h0ID0gdmFsdWVHZXR0ZXIuZ2V0KGdlb21ldHJ5LmV4dHJ1ZGVkSGVpZ2h0LCAwLjApO1xuICBpZiAoZXh0cnVkZWRIZWlnaHQgPiAwKSB7XG4gICAgcG9seWdvbkdlb21ldHJ5LmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImV4dHJ1ZGVcIiwgdHJ1ZSlcbiAgICApO1xuICB9XG5cbiAgLy8gU2V0IGJvdW5kYXJpZXNcbiAgdmFyIGJvdW5kYXJpZXMgPSBpc1JlY3RhbmdsZVxuICAgID8gZ2V0UmVjdGFuZ2xlQm91bmRhcmllcyhzdGF0ZSwgZ2VvbWV0cnksIGV4dHJ1ZGVkSGVpZ2h0KVxuICAgIDogZ2V0UG9seWdvbkJvdW5kYXJpZXMoc3RhdGUsIGdlb21ldHJ5LCBleHRydWRlZEhlaWdodCk7XG5cbiAgdmFyIGJvdW5kYXJ5Q291bnQgPSBib3VuZGFyaWVzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBib3VuZGFyeUNvdW50OyArK2kpIHtcbiAgICBwb2x5Z29uR2VvbWV0cnkuYXBwZW5kQ2hpbGQoYm91bmRhcmllc1tpXSk7XG4gIH1cblxuICAvLyBTZXQgYWx0aXR1ZGUgbW9kZVxuICB2YXIgYWx0aXR1ZGVNb2RlID0ga21sRG9jLmNyZWF0ZUVsZW1lbnQoXCJhbHRpdHVkZU1vZGVcIik7XG4gIGFsdGl0dWRlTW9kZS5hcHBlbmRDaGlsZChnZXRBbHRpdHVkZU1vZGUoc3RhdGUsIGdlb21ldHJ5LmhlaWdodFJlZmVyZW5jZSkpO1xuICBwb2x5Z29uR2VvbWV0cnkuYXBwZW5kQ2hpbGQoYWx0aXR1ZGVNb2RlKTtcblxuICBnZW9tZXRyaWVzLnB1c2gocG9seWdvbkdlb21ldHJ5KTtcblxuICAvLyBDcmVhdGUgc3R5bGVcbiAgdmFyIHBvbHlTdHlsZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiUG9seVN0eWxlXCIpO1xuXG4gIHZhciBmaWxsID0gdmFsdWVHZXR0ZXIuZ2V0KGdlb21ldHJ5LmZpbGwsIGZhbHNlKTtcbiAgaWYgKGZpbGwpIHtcbiAgICBwb2x5U3R5bGUuYXBwZW5kQ2hpbGQoY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImZpbGxcIiwgZmlsbCkpO1xuICB9XG5cbiAgcHJvY2Vzc01hdGVyaWFsKHN0YXRlLCBnZW9tZXRyeS5tYXRlcmlhbCwgcG9seVN0eWxlKTtcblxuICB2YXIgb3V0bGluZSA9IHZhbHVlR2V0dGVyLmdldChnZW9tZXRyeS5vdXRsaW5lLCBmYWxzZSk7XG4gIGlmIChvdXRsaW5lKSB7XG4gICAgcG9seVN0eWxlLmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcIm91dGxpbmVcIiwgb3V0bGluZSlcbiAgICApO1xuXG4gICAgLy8gT3V0bGluZSB1c2VzIExpbmVTdHlsZVxuICAgIHZhciBsaW5lU3R5bGUgPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIkxpbmVTdHlsZVwiKTtcblxuICAgIHZhciBvdXRsaW5lV2lkdGggPSB2YWx1ZUdldHRlci5nZXQoZ2VvbWV0cnkub3V0bGluZVdpZHRoLCAxLjApO1xuICAgIGxpbmVTdHlsZS5hcHBlbmRDaGlsZChcbiAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJ3aWR0aFwiLCBvdXRsaW5lV2lkdGgpXG4gICAgKTtcblxuICAgIHZhciBvdXRsaW5lQ29sb3IgPSB2YWx1ZUdldHRlci5nZXRDb2xvcihnZW9tZXRyeS5vdXRsaW5lQ29sb3IsIENvbG9yLkJMQUNLKTtcbiAgICBsaW5lU3R5bGUuYXBwZW5kQ2hpbGQoXG4gICAgICBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwiY29sb3JcIiwgb3V0bGluZUNvbG9yKVxuICAgICk7XG4gICAgbGluZVN0eWxlLmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImNvbG9yTW9kZVwiLCBcIm5vcm1hbFwiKVxuICAgICk7XG5cbiAgICBzdHlsZXMucHVzaChsaW5lU3R5bGUpO1xuICB9XG5cbiAgc3R5bGVzLnB1c2gocG9seVN0eWxlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JvdW5kT3ZlcmxheShzdGF0ZSwgcmVjdGFuZ2xlR3JhcGhpY3MsIG92ZXJsYXlzKSB7XG4gIHZhciBrbWxEb2MgPSBzdGF0ZS5rbWxEb2M7XG4gIHZhciB2YWx1ZUdldHRlciA9IHN0YXRlLnZhbHVlR2V0dGVyO1xuICB2YXIgZXh0ZXJuYWxGaWxlSGFuZGxlciA9IHN0YXRlLmV4dGVybmFsRmlsZUhhbmRsZXI7XG5cbiAgdmFyIGdyb3VuZE92ZXJsYXkgPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIkdyb3VuZE92ZXJsYXlcIik7XG5cbiAgLy8gU2V0IGFsdGl0dWRlIG1vZGVcbiAgdmFyIGFsdGl0dWRlTW9kZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiYWx0aXR1ZGVNb2RlXCIpO1xuICBhbHRpdHVkZU1vZGUuYXBwZW5kQ2hpbGQoXG4gICAgZ2V0QWx0aXR1ZGVNb2RlKHN0YXRlLCByZWN0YW5nbGVHcmFwaGljcy5oZWlnaHRSZWZlcmVuY2UpXG4gICk7XG4gIGdyb3VuZE92ZXJsYXkuYXBwZW5kQ2hpbGQoYWx0aXR1ZGVNb2RlKTtcblxuICB2YXIgaGVpZ2h0ID0gdmFsdWVHZXR0ZXIuZ2V0KHJlY3RhbmdsZUdyYXBoaWNzLmhlaWdodCk7XG4gIGlmIChkZWZpbmVkKGhlaWdodCkpIHtcbiAgICBncm91bmRPdmVybGF5LmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImFsdGl0dWRlXCIsIGhlaWdodClcbiAgICApO1xuICB9XG5cbiAgdmFyIHJlY3RhbmdsZSA9IHZhbHVlR2V0dGVyLmdldChyZWN0YW5nbGVHcmFwaGljcy5jb29yZGluYXRlcyk7XG4gIHZhciBsYXRMb25Cb3ggPSBrbWxEb2MuY3JlYXRlRWxlbWVudChcIkxhdExvbkJveFwiKTtcbiAgbGF0TG9uQm94LmFwcGVuZENoaWxkKFxuICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KFxuICAgICAga21sRG9jLFxuICAgICAgXCJub3J0aFwiLFxuICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMocmVjdGFuZ2xlLm5vcnRoKVxuICAgIClcbiAgKTtcbiAgbGF0TG9uQm94LmFwcGVuZENoaWxkKFxuICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KFxuICAgICAga21sRG9jLFxuICAgICAgXCJzb3V0aFwiLFxuICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMocmVjdGFuZ2xlLnNvdXRoKVxuICAgIClcbiAgKTtcbiAgbGF0TG9uQm94LmFwcGVuZENoaWxkKFxuICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KFxuICAgICAga21sRG9jLFxuICAgICAgXCJlYXN0XCIsXG4gICAgICBDZXNpdW1NYXRoLnRvRGVncmVlcyhyZWN0YW5nbGUuZWFzdClcbiAgICApXG4gICk7XG4gIGxhdExvbkJveC5hcHBlbmRDaGlsZChcbiAgICBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChcbiAgICAgIGttbERvYyxcbiAgICAgIFwid2VzdFwiLFxuICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMocmVjdGFuZ2xlLndlc3QpXG4gICAgKVxuICApO1xuICBncm91bmRPdmVybGF5LmFwcGVuZENoaWxkKGxhdExvbkJveCk7XG5cbiAgLy8gV2Ugc2hvdWxkIG9ubHkgZW5kIHVwIGhlcmUgaWYgd2UgaGF2ZSBhbiBJbWFnZU1hdGVyaWFsUHJvcGVydHlcbiAgdmFyIG1hdGVyaWFsID0gdmFsdWVHZXR0ZXIuZ2V0KHJlY3RhbmdsZUdyYXBoaWNzLm1hdGVyaWFsKTtcbiAgdmFyIGhyZWYgPSBleHRlcm5hbEZpbGVIYW5kbGVyLnRleHR1cmUobWF0ZXJpYWwuaW1hZ2UpO1xuICB2YXIgaWNvbiA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiSWNvblwiKTtcbiAgaWNvbi5hcHBlbmRDaGlsZChjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwiaHJlZlwiLCBocmVmKSk7XG4gIGdyb3VuZE92ZXJsYXkuYXBwZW5kQ2hpbGQoaWNvbik7XG5cbiAgdmFyIGNvbG9yID0gbWF0ZXJpYWwuY29sb3I7XG4gIGlmIChkZWZpbmVkKGNvbG9yKSkge1xuICAgIGdyb3VuZE92ZXJsYXkuYXBwZW5kQ2hpbGQoXG4gICAgICBjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwiY29sb3JcIiwgY29sb3JUb1N0cmluZyhtYXRlcmlhbC5jb2xvcikpXG4gICAgKTtcbiAgfVxuXG4gIG92ZXJsYXlzLnB1c2goZ3JvdW5kT3ZlcmxheSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1vZGVsR2VvbWV0cnkoc3RhdGUsIG1vZGVsR3JhcGhpY3MpIHtcbiAgdmFyIGttbERvYyA9IHN0YXRlLmttbERvYztcbiAgdmFyIHZhbHVlR2V0dGVyID0gc3RhdGUudmFsdWVHZXR0ZXI7XG4gIHZhciBleHRlcm5hbEZpbGVIYW5kbGVyID0gc3RhdGUuZXh0ZXJuYWxGaWxlSGFuZGxlcjtcblxuICB2YXIgbW9kZWxHZW9tZXRyeSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiTW9kZWxcIik7XG5cbiAgdmFyIHNjYWxlID0gdmFsdWVHZXR0ZXIuZ2V0KG1vZGVsR3JhcGhpY3Muc2NhbGUpO1xuICBpZiAoZGVmaW5lZChzY2FsZSkpIHtcbiAgICB2YXIgc2NhbGVFbGVtZW50ID0ga21sRG9jLmNyZWF0ZUVsZW1lbnQoXCJzY2FsZVwiKTtcbiAgICBzY2FsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcInhcIiwgc2NhbGUpKTtcbiAgICBzY2FsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcInlcIiwgc2NhbGUpKTtcbiAgICBzY2FsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcInpcIiwgc2NhbGUpKTtcbiAgICBtb2RlbEdlb21ldHJ5LmFwcGVuZENoaWxkKHNjYWxlRWxlbWVudCk7XG4gIH1cblxuICB2YXIgbGluayA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiTGlua1wiKTtcbiAgdmFyIHVyaSA9IGV4dGVybmFsRmlsZUhhbmRsZXIubW9kZWwobW9kZWxHcmFwaGljcywgc3RhdGUudGltZSk7XG5cbiAgbGluay5hcHBlbmRDaGlsZChjcmVhdGVCYXNpY0VsZW1lbnRXaXRoVGV4dChrbWxEb2MsIFwiaHJlZlwiLCB1cmkpKTtcbiAgbW9kZWxHZW9tZXRyeS5hcHBlbmRDaGlsZChsaW5rKTtcblxuICByZXR1cm4gbW9kZWxHZW9tZXRyeTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTW9kZWwoc3RhdGUsIGVudGl0eSwgbW9kZWxHcmFwaGljcywgZ2VvbWV0cmllcywgc3R5bGVzKSB7XG4gIHZhciBrbWxEb2MgPSBzdGF0ZS5rbWxEb2M7XG4gIHZhciBlbGxpcHNvaWQgPSBzdGF0ZS5lbGxpcHNvaWQ7XG4gIHZhciB2YWx1ZUdldHRlciA9IHN0YXRlLnZhbHVlR2V0dGVyO1xuXG4gIGlmICghZGVmaW5lZChtb2RlbEdyYXBoaWNzKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIElmIHRoZSBwb2ludCBpc24ndCBjb25zdGFudCB0aGVuIGNyZWF0ZSBneDpUcmFjayBvciBneDpNdWx0aVRyYWNrXG4gIHZhciBlbnRpdHlQb3NpdGlvblByb3BlcnR5ID0gZW50aXR5LnBvc2l0aW9uO1xuICBpZiAoIWVudGl0eVBvc2l0aW9uUHJvcGVydHkuaXNDb25zdGFudCkge1xuICAgIGNyZWF0ZVRyYWNrcyhzdGF0ZSwgZW50aXR5LCBtb2RlbEdyYXBoaWNzLCBnZW9tZXRyaWVzLCBzdHlsZXMpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBtb2RlbEdlb21ldHJ5ID0gY3JlYXRlTW9kZWxHZW9tZXRyeShzdGF0ZSwgbW9kZWxHcmFwaGljcyk7XG5cbiAgLy8gU2V0IGFsdGl0dWRlIG1vZGVcbiAgdmFyIGFsdGl0dWRlTW9kZSA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiYWx0aXR1ZGVNb2RlXCIpO1xuICBhbHRpdHVkZU1vZGUuYXBwZW5kQ2hpbGQoXG4gICAgZ2V0QWx0aXR1ZGVNb2RlKHN0YXRlLCBtb2RlbEdyYXBoaWNzLmhlaWdodFJlZmVyZW5jZSlcbiAgKTtcbiAgbW9kZWxHZW9tZXRyeS5hcHBlbmRDaGlsZChhbHRpdHVkZU1vZGUpO1xuXG4gIHZhbHVlR2V0dGVyLmdldChlbnRpdHlQb3NpdGlvblByb3BlcnR5LCB1bmRlZmluZWQsIHNjcmF0Y2hDYXJ0ZXNpYW4zKTtcbiAgQ2FydG9ncmFwaGljLmZyb21DYXJ0ZXNpYW4oc2NyYXRjaENhcnRlc2lhbjMsIGVsbGlwc29pZCwgc2NyYXRjaENhcnRvZ3JhcGhpYyk7XG4gIHZhciBsb2NhdGlvbiA9IGttbERvYy5jcmVhdGVFbGVtZW50KFwiTG9jYXRpb25cIik7XG4gIGxvY2F0aW9uLmFwcGVuZENoaWxkKFxuICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KFxuICAgICAga21sRG9jLFxuICAgICAgXCJsb25naXR1ZGVcIixcbiAgICAgIENlc2l1bU1hdGgudG9EZWdyZWVzKHNjcmF0Y2hDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlKVxuICAgIClcbiAgKTtcbiAgbG9jYXRpb24uYXBwZW5kQ2hpbGQoXG4gICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoXG4gICAgICBrbWxEb2MsXG4gICAgICBcImxhdGl0dWRlXCIsXG4gICAgICBDZXNpdW1NYXRoLnRvRGVncmVlcyhzY3JhdGNoQ2FydG9ncmFwaGljLmxhdGl0dWRlKVxuICAgIClcbiAgKTtcbiAgbG9jYXRpb24uYXBwZW5kQ2hpbGQoXG4gICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImFsdGl0dWRlXCIsIHNjcmF0Y2hDYXJ0b2dyYXBoaWMuaGVpZ2h0KVxuICApO1xuICBtb2RlbEdlb21ldHJ5LmFwcGVuZENoaWxkKGxvY2F0aW9uKTtcblxuICBnZW9tZXRyaWVzLnB1c2gobW9kZWxHZW9tZXRyeSk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NNYXRlcmlhbChzdGF0ZSwgbWF0ZXJpYWxQcm9wZXJ0eSwgc3R5bGUpIHtcbiAgdmFyIGttbERvYyA9IHN0YXRlLmttbERvYztcbiAgdmFyIHZhbHVlR2V0dGVyID0gc3RhdGUudmFsdWVHZXR0ZXI7XG5cbiAgaWYgKCFkZWZpbmVkKG1hdGVyaWFsUHJvcGVydHkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG1hdGVyaWFsID0gdmFsdWVHZXR0ZXIuZ2V0KG1hdGVyaWFsUHJvcGVydHkpO1xuICBpZiAoIWRlZmluZWQobWF0ZXJpYWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNvbG9yO1xuICB2YXIgdHlwZSA9IHZhbHVlR2V0dGVyLmdldE1hdGVyaWFsVHlwZShtYXRlcmlhbFByb3BlcnR5KTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcIkltYWdlXCI6XG4gICAgICAvLyBJbWFnZSBtYXRlcmlhbHMgYXJlIG9ubHkgYWJsZSB0byBiZSByZXByZXNlbnRlZCBvbiByZWN0YW5nbGVzLCBzbyBpZiB3ZSBtYWtlIGl0XG4gICAgICAvLyAgaGVyZSB3ZSBjYW4ndCB0ZXh0dXJlIGEgZ2VuZXJpYyBwb2x5Z29uIG9yIHBvbHlsaW5lIGluIEtNTCwgc28ganVzdCB1c2Ugd2hpdGUuXG4gICAgICBjb2xvciA9IGNvbG9yVG9TdHJpbmcoQ29sb3IuV0hJVEUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIkNvbG9yXCI6XG4gICAgY2FzZSBcIkdyaWRcIjpcbiAgICBjYXNlIFwiUG9seWxpbmVHbG93XCI6XG4gICAgY2FzZSBcIlBvbHlsaW5lQXJyb3dcIjpcbiAgICBjYXNlIFwiUG9seWxpbmVEYXNoXCI6XG4gICAgICBjb2xvciA9IGNvbG9yVG9TdHJpbmcobWF0ZXJpYWwuY29sb3IpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBvbHlsaW5lT3V0bGluZVwiOlxuICAgICAgY29sb3IgPSBjb2xvclRvU3RyaW5nKG1hdGVyaWFsLmNvbG9yKTtcblxuICAgICAgdmFyIG91dGxpbmVDb2xvciA9IGNvbG9yVG9TdHJpbmcobWF0ZXJpYWwub3V0bGluZUNvbG9yKTtcbiAgICAgIHZhciBvdXRsaW5lV2lkdGggPSBtYXRlcmlhbC5vdXRsaW5lV2lkdGg7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChcbiAgICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoXG4gICAgICAgICAga21sRG9jLFxuICAgICAgICAgIFwib3V0ZXJDb2xvclwiLFxuICAgICAgICAgIG91dGxpbmVDb2xvcixcbiAgICAgICAgICBneE5hbWVzcGFjZVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KFxuICAgICAgICAgIGttbERvYyxcbiAgICAgICAgICBcIm91dGVyV2lkdGhcIixcbiAgICAgICAgICBvdXRsaW5lV2lkdGgsXG4gICAgICAgICAgZ3hOYW1lc3BhY2VcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJTdHJpcGVcIjpcbiAgICAgIGNvbG9yID0gY29sb3JUb1N0cmluZyhtYXRlcmlhbC5vZGRDb2xvcik7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmIChkZWZpbmVkKGNvbG9yKSkge1xuICAgIHN0eWxlLmFwcGVuZENoaWxkKGNyZWF0ZUJhc2ljRWxlbWVudFdpdGhUZXh0KGttbERvYywgXCJjb2xvclwiLCBjb2xvcikpO1xuICAgIHN0eWxlLmFwcGVuZENoaWxkKFxuICAgICAgY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoa21sRG9jLCBcImNvbG9yTW9kZVwiLCBcIm5vcm1hbFwiKVxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0QWx0aXR1ZGVNb2RlKHN0YXRlLCBoZWlnaHRSZWZlcmVuY2VQcm9wZXJ0eSkge1xuICB2YXIga21sRG9jID0gc3RhdGUua21sRG9jO1xuICB2YXIgdmFsdWVHZXR0ZXIgPSBzdGF0ZS52YWx1ZUdldHRlcjtcblxuICB2YXIgaGVpZ2h0UmVmZXJlbmNlID0gdmFsdWVHZXR0ZXIuZ2V0KFxuICAgIGhlaWdodFJlZmVyZW5jZVByb3BlcnR5LFxuICAgIEhlaWdodFJlZmVyZW5jZS5OT05FXG4gICk7XG4gIHZhciBhbHRpdHVkZU1vZGVUZXh0O1xuICBzd2l0Y2ggKGhlaWdodFJlZmVyZW5jZSkge1xuICAgIGNhc2UgSGVpZ2h0UmVmZXJlbmNlLk5PTkU6XG4gICAgICBhbHRpdHVkZU1vZGVUZXh0ID0ga21sRG9jLmNyZWF0ZVRleHROb2RlKFwiYWJzb2x1dGVcIik7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQ6XG4gICAgICBhbHRpdHVkZU1vZGVUZXh0ID0ga21sRG9jLmNyZWF0ZVRleHROb2RlKFwiY2xhbXBUb0dyb3VuZFwiKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgSGVpZ2h0UmVmZXJlbmNlLlJFTEFUSVZFX1RPX0dST1VORDpcbiAgICAgIGFsdGl0dWRlTW9kZVRleHQgPSBrbWxEb2MuY3JlYXRlVGV4dE5vZGUoXCJyZWxhdGl2ZVRvR3JvdW5kXCIpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gYWx0aXR1ZGVNb2RlVGV4dDtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIGVsbGlwc29pZCkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXMpKSB7XG4gICAgY29vcmRpbmF0ZXMgPSBbY29vcmRpbmF0ZXNdO1xuICB9XG5cbiAgdmFyIGNvdW50ID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICB2YXIgY29vcmRpbmF0ZVN0cmluZ3MgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgQ2FydG9ncmFwaGljLmZyb21DYXJ0ZXNpYW4oY29vcmRpbmF0ZXNbaV0sIGVsbGlwc29pZCwgc2NyYXRjaENhcnRvZ3JhcGhpYyk7XG4gICAgY29vcmRpbmF0ZVN0cmluZ3MucHVzaChcbiAgICAgIENlc2l1bU1hdGgudG9EZWdyZWVzKHNjcmF0Y2hDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlKSArXG4gICAgICAgIFwiLFwiICtcbiAgICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMoc2NyYXRjaENhcnRvZ3JhcGhpYy5sYXRpdHVkZSkgK1xuICAgICAgICBcIixcIiArXG4gICAgICAgIHNjcmF0Y2hDYXJ0b2dyYXBoaWMuaGVpZ2h0XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjb29yZGluYXRlU3RyaW5ncy5qb2luKFwiIFwiKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzaWNFbGVtZW50V2l0aFRleHQoXG4gIGttbERvYyxcbiAgZWxlbWVudE5hbWUsXG4gIGVsZW1lbnRWYWx1ZSxcbiAgbmFtZXNwYWNlXG4pIHtcbiAgZWxlbWVudFZhbHVlID0gZGVmYXVsdFZhbHVlKGVsZW1lbnRWYWx1ZSwgXCJcIik7XG5cbiAgaWYgKHR5cGVvZiBlbGVtZW50VmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgZWxlbWVudFZhbHVlID0gZWxlbWVudFZhbHVlID8gXCIxXCIgOiBcIjBcIjtcbiAgfVxuXG4gIC8vIENyZWF0ZSBlbGVtZW50IHdpdGggb3B0aW9uYWwgbmFtZXNwYWNlXG4gIHZhciBlbGVtZW50ID0gZGVmaW5lZChuYW1lc3BhY2UpXG4gICAgPyBrbWxEb2MuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgZWxlbWVudE5hbWUpXG4gICAgOiBrbWxEb2MuY3JlYXRlRWxlbWVudChlbGVtZW50TmFtZSk7XG5cbiAgLy8gV3JhcCB2YWx1ZSBpbiBDREFUQSBzZWN0aW9uIGlmIGl0IGNvbnRhaW5zIEhUTUxcbiAgdmFyIHRleHQgPVxuICAgIGVsZW1lbnRWYWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtZW50VmFsdWUuaW5kZXhPZihcIjxcIikgIT09IC0xXG4gICAgICA/IGttbERvYy5jcmVhdGVDREFUQVNlY3Rpb24oZWxlbWVudFZhbHVlKVxuICAgICAgOiBrbWxEb2MuY3JlYXRlVGV4dE5vZGUoZWxlbWVudFZhbHVlKTtcblxuICBlbGVtZW50LmFwcGVuZENoaWxkKHRleHQpO1xuXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBjb2xvclRvU3RyaW5nKGNvbG9yKSB7XG4gIHZhciByZXN1bHQgPSBcIlwiO1xuICB2YXIgYnl0ZXMgPSBjb2xvci50b0J5dGVzKCk7XG4gIGZvciAodmFyIGkgPSAzOyBpID49IDA7IC0taSkge1xuICAgIHJlc3VsdCArPVxuICAgICAgYnl0ZXNbaV0gPCAxNiA/IFwiMFwiICsgYnl0ZXNbaV0udG9TdHJpbmcoMTYpIDogYnl0ZXNbaV0udG9TdHJpbmcoMTYpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBTaW5jZSBLTUwgZG9lcyBub3Qgc3VwcG9ydCBnbFRGIG1vZGVscywgdGhpcyBjYWxsYmFjayBpcyByZXF1aXJlZCB0byBzcGVjaWZ5IHdoYXQgVVJMIHRvIHVzZSBmb3IgdGhlIG1vZGVsIGluIHRoZSBLTUwgZG9jdW1lbnQuXG4gKiBJdCBjYW4gYWxzbyBiZSB1c2VkIHRvIGFkZCBhZGRpdGlvbmFsIGZpbGVzIHRvIHRoZSA8Y29kZT5leHRlcm5hbEZpbGVzPC9jb2RlPiBvYmplY3QsIHdoaWNoIGlzIHRoZSBsaXN0IG9mIGZpbGVzIGVtYmVkZGVkIGluIHRoZSBleHBvcnRlZCBLTVosXG4gKiBvciBvdGhlcndpc2UgcmV0dXJuZWQgd2l0aCB0aGUgS01MIHN0cmluZyB3aGVuIGV4cG9ydGluZy5cbiAqXG4gKiBAY2FsbGJhY2sgZXhwb3J0S21sTW9kZWxDYWxsYmFja1xuICpcbiAqIEBwYXJhbSB7TW9kZWxHcmFwaGljc30gbW9kZWwgVGhlIE1vZGVsR3JhcGhpY3MgaW5zdGFuY2UgZm9yIGFuIEVudGl0eS5cbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSB0aGF0IGFueSBwcm9wZXJ0aWVzIHNob3VsZCB1c2UgdG8gZ2V0IHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBleHRlcm5hbEZpbGVzIEFuIG9iamVjdCB0aGF0IG1hcHMgYSBmaWxlbmFtZSB0byBhIEJsb2Igb3IgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBCbG9iLlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIFVSTCB0byB1c2UgZm9yIHRoZSBocmVmIGluIHRoZSBLTUwgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGV4cG9ydEttbDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///53279\n')},23502:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82982);\n/* harmony import */ var _CallbackProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11249);\n/* harmony import */ var _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17045);\n/* harmony import */ var _TerrainOffsetProperty_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(18743);\n\n\n\n\n\nfunction heightReferenceOnEntityPropertyChanged(\n  entity,\n  propertyName,\n  newValue,\n  oldValue\n) {\n  _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].prototype._onEntityPropertyChanged.call */ .Z.prototype._onEntityPropertyChanged.call(\n    this,\n    entity,\n    propertyName,\n    newValue,\n    oldValue\n  );\n  if (this._observedPropertyNames.indexOf(propertyName) === -1) {\n    return;\n  }\n\n  var geometry = this._entity[this._geometryPropertyName];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(geometry)) {\n    return;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this._terrainOffsetProperty)) {\n    this._terrainOffsetProperty.destroy();\n    this._terrainOffsetProperty = undefined;\n  }\n\n  var heightReferenceProperty = geometry.heightReference;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(heightReferenceProperty)) {\n    var centerPosition = new _CallbackProperty_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(\n      this._computeCenter.bind(this),\n      !this._dynamic\n    );\n    this._terrainOffsetProperty = new _TerrainOffsetProperty_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n      this._scene,\n      centerPosition,\n      heightReferenceProperty\n    );\n  }\n}\n/* harmony default export */ __webpack_exports__["Z"] = (heightReferenceOnEntityPropertyChanged);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM1MDIuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF5QztBQUNZO0FBQ0Y7QUFDWTs7QUFFL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxvSkFBdUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTyxxRUFBTztBQUNkO0FBQ0E7O0FBRUEsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxNQUFNLHFFQUFPO0FBQ2IsNkJBQTZCLHFFQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsMEVBQXFCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLHNDQUFzQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL2hlaWdodFJlZmVyZW5jZU9uRW50aXR5UHJvcGVydHlDaGFuZ2VkLmpzPzI5NzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IENhbGxiYWNrUHJvcGVydHkgZnJvbSBcIi4vQ2FsbGJhY2tQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5VXBkYXRlciBmcm9tIFwiLi9HZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBUZXJyYWluT2Zmc2V0UHJvcGVydHkgZnJvbSBcIi4vVGVycmFpbk9mZnNldFByb3BlcnR5LmpzXCI7XG5cbmZ1bmN0aW9uIGhlaWdodFJlZmVyZW5jZU9uRW50aXR5UHJvcGVydHlDaGFuZ2VkKFxuICBlbnRpdHksXG4gIHByb3BlcnR5TmFtZSxcbiAgbmV3VmFsdWUsXG4gIG9sZFZhbHVlXG4pIHtcbiAgR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5fb25FbnRpdHlQcm9wZXJ0eUNoYW5nZWQuY2FsbChcbiAgICB0aGlzLFxuICAgIGVudGl0eSxcbiAgICBwcm9wZXJ0eU5hbWUsXG4gICAgbmV3VmFsdWUsXG4gICAgb2xkVmFsdWVcbiAgKTtcbiAgaWYgKHRoaXMuX29ic2VydmVkUHJvcGVydHlOYW1lcy5pbmRleE9mKHByb3BlcnR5TmFtZSkgPT09IC0xKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGdlb21ldHJ5ID0gdGhpcy5fZW50aXR5W3RoaXMuX2dlb21ldHJ5UHJvcGVydHlOYW1lXTtcbiAgaWYgKCFkZWZpbmVkKGdlb21ldHJ5KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHRoaXMuX3RlcnJhaW5PZmZzZXRQcm9wZXJ0eSkpIHtcbiAgICB0aGlzLl90ZXJyYWluT2Zmc2V0UHJvcGVydHkuZGVzdHJveSgpO1xuICAgIHRoaXMuX3RlcnJhaW5PZmZzZXRQcm9wZXJ0eSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBoZWlnaHRSZWZlcmVuY2VQcm9wZXJ0eSA9IGdlb21ldHJ5LmhlaWdodFJlZmVyZW5jZTtcblxuICBpZiAoZGVmaW5lZChoZWlnaHRSZWZlcmVuY2VQcm9wZXJ0eSkpIHtcbiAgICB2YXIgY2VudGVyUG9zaXRpb24gPSBuZXcgQ2FsbGJhY2tQcm9wZXJ0eShcbiAgICAgIHRoaXMuX2NvbXB1dGVDZW50ZXIuYmluZCh0aGlzKSxcbiAgICAgICF0aGlzLl9keW5hbWljXG4gICAgKTtcbiAgICB0aGlzLl90ZXJyYWluT2Zmc2V0UHJvcGVydHkgPSBuZXcgVGVycmFpbk9mZnNldFByb3BlcnR5KFxuICAgICAgdGhpcy5fc2NlbmUsXG4gICAgICBjZW50ZXJQb3NpdGlvbixcbiAgICAgIGhlaWdodFJlZmVyZW5jZVByb3BlcnR5XG4gICAgKTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgaGVpZ2h0UmVmZXJlbmNlT25FbnRpdHlQcm9wZXJ0eUNoYW5nZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///23502\n')}}]);