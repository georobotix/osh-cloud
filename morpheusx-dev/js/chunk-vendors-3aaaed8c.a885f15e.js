"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[382],{39485:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99417);\n\n\n\n\n\n/**\n * A ParticleEmitter that emits particles within a sphere.\n * Particles will be positioned randomly within the sphere and have initial velocities emanating from the center of the sphere.\n *\n * @alias SphereEmitter\n * @constructor\n *\n * @param {Number} [radius=1.0] The radius of the sphere in meters.\n */\nfunction SphereEmitter(radius) {\n  radius = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(radius, 1.0);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThan */ .Z.typeOf.number.greaterThan("radius", radius, 0.0);\n  //>>includeEnd(\'debug\');\n\n  this._radius = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(radius, 1.0);\n}\n\nObject.defineProperties(SphereEmitter.prototype, {\n  /**\n   * The radius of the sphere in meters.\n   * @memberof SphereEmitter.prototype\n   * @type {Number}\n   * @default 1.0\n   */\n  radius: {\n    get: function () {\n      return this._radius;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThan */ .Z.typeOf.number.greaterThan("value", value, 0.0);\n      //>>includeEnd(\'debug\');\n      this._radius = value;\n    },\n  },\n});\n\n/**\n * Initializes the given {Particle} by setting it\'s position and velocity.\n *\n * @private\n * @param {Particle} particle The particle to initialize\n */\nSphereEmitter.prototype.emit = function (particle) {\n  var theta = _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].randomBetween */ .Z.randomBetween(0.0, _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].TWO_PI */ .Z.TWO_PI);\n  var phi = _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].randomBetween */ .Z.randomBetween(0.0, _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].PI */ .Z.PI);\n  var rad = _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].randomBetween */ .Z.randomBetween(0.0, this._radius);\n\n  var x = rad * Math.cos(theta) * Math.sin(phi);\n  var y = rad * Math.sin(theta) * Math.sin(phi);\n  var z = rad * Math.cos(phi);\n\n  particle.position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromElements */ .Z.fromElements(x, y, z, particle.position);\n  particle.velocity = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].normalize */ .Z.normalize(\n    particle.position,\n    particle.velocity\n  );\n};\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (SphereEmitter)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk0ODUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUErQztBQUNWO0FBQ2M7QUFDVjs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBLFdBQVcsMEVBQVk7O0FBRXZCO0FBQ0EsRUFBRSxtSEFBK0I7QUFDakM7O0FBRUEsaUJBQWlCLDBFQUFZO0FBQzdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU0sbUhBQStCO0FBQ3JDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQSwwQkFBMEIsVUFBVTtBQUNwQztBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQSxjQUFjLDBGQUF3QixNQUFNLDRFQUFpQjtBQUM3RCxZQUFZLDBGQUF3QixNQUFNLG9FQUFhO0FBQ3ZELFlBQVksMEZBQXdCOztBQUVwQztBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLDhGQUF1QjtBQUM3QyxzQkFBc0Isd0ZBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQWUsNkRBQWEsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9TcGhlcmVFbWl0dGVyLmpzPzI3NzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuXG4vKipcbiAqIEEgUGFydGljbGVFbWl0dGVyIHRoYXQgZW1pdHMgcGFydGljbGVzIHdpdGhpbiBhIHNwaGVyZS5cbiAqIFBhcnRpY2xlcyB3aWxsIGJlIHBvc2l0aW9uZWQgcmFuZG9tbHkgd2l0aGluIHRoZSBzcGhlcmUgYW5kIGhhdmUgaW5pdGlhbCB2ZWxvY2l0aWVzIGVtYW5hdGluZyBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZS5cbiAqXG4gKiBAYWxpYXMgU3BoZXJlRW1pdHRlclxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFtyYWRpdXM9MS4wXSBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUgaW4gbWV0ZXJzLlxuICovXG5mdW5jdGlvbiBTcGhlcmVFbWl0dGVyKHJhZGl1cykge1xuICByYWRpdXMgPSBkZWZhdWx0VmFsdWUocmFkaXVzLCAxLjApO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIuZ3JlYXRlclRoYW4oXCJyYWRpdXNcIiwgcmFkaXVzLCAwLjApO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLl9yYWRpdXMgPSBkZWZhdWx0VmFsdWUocmFkaXVzLCAxLjApO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhTcGhlcmVFbWl0dGVyLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlIGluIG1ldGVycy5cbiAgICogQG1lbWJlcm9mIFNwaGVyZUVtaXR0ZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDEuMFxuICAgKi9cbiAgcmFkaXVzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmFkaXVzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBDaGVjay50eXBlT2YubnVtYmVyLmdyZWF0ZXJUaGFuKFwidmFsdWVcIiwgdmFsdWUsIDAuMCk7XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIHRoaXMuX3JhZGl1cyA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgZ2l2ZW4ge1BhcnRpY2xlfSBieSBzZXR0aW5nIGl0J3MgcG9zaXRpb24gYW5kIHZlbG9jaXR5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1BhcnRpY2xlfSBwYXJ0aWNsZSBUaGUgcGFydGljbGUgdG8gaW5pdGlhbGl6ZVxuICovXG5TcGhlcmVFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gIHZhciB0aGV0YSA9IENlc2l1bU1hdGgucmFuZG9tQmV0d2VlbigwLjAsIENlc2l1bU1hdGguVFdPX1BJKTtcbiAgdmFyIHBoaSA9IENlc2l1bU1hdGgucmFuZG9tQmV0d2VlbigwLjAsIENlc2l1bU1hdGguUEkpO1xuICB2YXIgcmFkID0gQ2VzaXVtTWF0aC5yYW5kb21CZXR3ZWVuKDAuMCwgdGhpcy5fcmFkaXVzKTtcblxuICB2YXIgeCA9IHJhZCAqIE1hdGguY29zKHRoZXRhKSAqIE1hdGguc2luKHBoaSk7XG4gIHZhciB5ID0gcmFkICogTWF0aC5zaW4odGhldGEpICogTWF0aC5zaW4ocGhpKTtcbiAgdmFyIHogPSByYWQgKiBNYXRoLmNvcyhwaGkpO1xuXG4gIHBhcnRpY2xlLnBvc2l0aW9uID0gQ2FydGVzaWFuMy5mcm9tRWxlbWVudHMoeCwgeSwgeiwgcGFydGljbGUucG9zaXRpb24pO1xuICBwYXJ0aWNsZS52ZWxvY2l0eSA9IENhcnRlc2lhbjMubm9ybWFsaXplKFxuICAgIHBhcnRpY2xlLnBvc2l0aW9uLFxuICAgIHBhcnRpY2xlLnZlbG9jaXR5XG4gICk7XG59O1xuZXhwb3J0IGRlZmF1bHQgU3BoZXJlRW1pdHRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///39485\n')},87233:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _StencilFunction_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(77053);\n/* harmony import */ var _StencilOperation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(81255);\n\n\n\n/**\n * The most significant bit is used to identify whether the pixel is 3D Tiles.\n * The next three bits store selection depth for the skip LODs optimization.\n * The last four bits are for increment/decrement shadow volume operations for classification.\n *\n * @private\n */\nvar StencilConstants = {\n  CESIUM_3D_TILE_MASK: 0x80,\n  SKIP_LOD_MASK: 0x70,\n  SKIP_LOD_BIT_SHIFT: 4,\n  CLASSIFICATION_MASK: 0x0f,\n};\n\nStencilConstants.setCesium3DTileBit = function () {\n  return {\n    enabled: true,\n    frontFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ALWAYS */ .Z.ALWAYS,\n    frontOperation: {\n      fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].KEEP */ .Z.KEEP,\n      zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].KEEP */ .Z.KEEP,\n      zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].REPLACE */ .Z.REPLACE,\n    },\n    backFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ALWAYS */ .Z.ALWAYS,\n    backOperation: {\n      fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].KEEP */ .Z.KEEP,\n      zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].KEEP */ .Z.KEEP,\n      zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].REPLACE */ .Z.REPLACE,\n    },\n    reference: StencilConstants.CESIUM_3D_TILE_MASK,\n    mask: StencilConstants.CESIUM_3D_TILE_MASK,\n  };\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(StencilConstants));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODcyMzMuanMiLCJtYXBwaW5ncyI6Ijs7QUFBbUQ7QUFDRTs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtGQUFzQjtBQUN6QztBQUNBLFlBQVksK0VBQXFCO0FBQ2pDLGFBQWEsK0VBQXFCO0FBQ2xDLGFBQWEscUZBQXdCO0FBQ3JDLEtBQUs7QUFDTCxrQkFBa0Isa0ZBQXNCO0FBQ3hDO0FBQ0EsWUFBWSwrRUFBcUI7QUFDakMsYUFBYSwrRUFBcUI7QUFDbEMsYUFBYSxxRkFBd0I7QUFDckMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsK0JBQStCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvU3RlbmNpbENvbnN0YW50cy5qcz9mOGVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdGVuY2lsRnVuY3Rpb24gZnJvbSBcIi4vU3RlbmNpbEZ1bmN0aW9uLmpzXCI7XG5pbXBvcnQgU3RlbmNpbE9wZXJhdGlvbiBmcm9tIFwiLi9TdGVuY2lsT3BlcmF0aW9uLmpzXCI7XG5cbi8qKlxuICogVGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0IGlzIHVzZWQgdG8gaWRlbnRpZnkgd2hldGhlciB0aGUgcGl4ZWwgaXMgM0QgVGlsZXMuXG4gKiBUaGUgbmV4dCB0aHJlZSBiaXRzIHN0b3JlIHNlbGVjdGlvbiBkZXB0aCBmb3IgdGhlIHNraXAgTE9EcyBvcHRpbWl6YXRpb24uXG4gKiBUaGUgbGFzdCBmb3VyIGJpdHMgYXJlIGZvciBpbmNyZW1lbnQvZGVjcmVtZW50IHNoYWRvdyB2b2x1bWUgb3BlcmF0aW9ucyBmb3IgY2xhc3NpZmljYXRpb24uXG4gKlxuICogQHByaXZhdGVcbiAqL1xudmFyIFN0ZW5jaWxDb25zdGFudHMgPSB7XG4gIENFU0lVTV8zRF9USUxFX01BU0s6IDB4ODAsXG4gIFNLSVBfTE9EX01BU0s6IDB4NzAsXG4gIFNLSVBfTE9EX0JJVF9TSElGVDogNCxcbiAgQ0xBU1NJRklDQVRJT05fTUFTSzogMHgwZixcbn07XG5cblN0ZW5jaWxDb25zdGFudHMuc2V0Q2VzaXVtM0RUaWxlQml0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgZnJvbnRGdW5jdGlvbjogU3RlbmNpbEZ1bmN0aW9uLkFMV0FZUyxcbiAgICBmcm9udE9wZXJhdGlvbjoge1xuICAgICAgZmFpbDogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgekZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uS0VFUCxcbiAgICAgIHpQYXNzOiBTdGVuY2lsT3BlcmF0aW9uLlJFUExBQ0UsXG4gICAgfSxcbiAgICBiYWNrRnVuY3Rpb246IFN0ZW5jaWxGdW5jdGlvbi5BTFdBWVMsXG4gICAgYmFja09wZXJhdGlvbjoge1xuICAgICAgZmFpbDogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgekZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uS0VFUCxcbiAgICAgIHpQYXNzOiBTdGVuY2lsT3BlcmF0aW9uLlJFUExBQ0UsXG4gICAgfSxcbiAgICByZWZlcmVuY2U6IFN0ZW5jaWxDb25zdGFudHMuQ0VTSVVNXzNEX1RJTEVfTUFTSyxcbiAgICBtYXNrOiBTdGVuY2lsQ29uc3RhbnRzLkNFU0lVTV8zRF9USUxFX01BU0ssXG4gIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZShTdGVuY2lsQ29uc3RhbnRzKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///87233\n')},77053:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52200);\n\n\n/**\n * Determines the function used to compare stencil values for the stencil test.\n *\n * @enum {Number}\n */\nvar StencilFunction = {\n  /**\n   * The stencil test never passes.\n   *\n   * @type {Number}\n   * @constant\n   */\n  NEVER: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].NEVER */ .Z.NEVER,\n\n  /**\n   * The stencil test passes when the masked reference value is less than the masked stencil value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LESS: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].LESS */ .Z.LESS,\n\n  /**\n   * The stencil test passes when the masked reference value is equal to the masked stencil value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  EQUAL: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EQUAL */ .Z.EQUAL,\n\n  /**\n   * The stencil test passes when the masked reference value is less than or equal to the masked stencil value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LESS_OR_EQUAL: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].LEQUAL */ .Z.LEQUAL,\n\n  /**\n   * The stencil test passes when the masked reference value is greater than the masked stencil value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  GREATER: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GREATER */ .Z.GREATER,\n\n  /**\n   * The stencil test passes when the masked reference value is not equal to the masked stencil value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  NOT_EQUAL: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].NOTEQUAL */ .Z.NOTEQUAL,\n\n  /**\n   * The stencil test passes when the masked reference value is greater than or equal to the masked stencil value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  GREATER_OR_EQUAL: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].GEQUAL */ .Z.GEQUAL,\n\n  /**\n   * The stencil test always passes.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ALWAYS: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ALWAYS */ .Z.ALWAYS,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(StencilFunction));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzcwNTMuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVMsb0ZBQW9COztBQUU3QjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFFBQVEsa0ZBQW1COztBQUUzQjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVMsb0ZBQW9COztBQUU3QjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGlCQUFpQixzRkFBcUI7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsV0FBVyx3RkFBc0I7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsYUFBYSwwRkFBdUI7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0Esb0JBQW9CLHNGQUFxQjs7QUFFekM7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxVQUFVLHNGQUFxQjtBQUMvQjtBQUNBLHlEQUFlLDhCQUE4QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1N0ZW5jaWxGdW5jdGlvbi5qcz9lOWEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBXZWJHTENvbnN0YW50cyBmcm9tIFwiLi4vQ29yZS9XZWJHTENvbnN0YW50cy5qc1wiO1xuXG4vKipcbiAqIERldGVybWluZXMgdGhlIGZ1bmN0aW9uIHVzZWQgdG8gY29tcGFyZSBzdGVuY2lsIHZhbHVlcyBmb3IgdGhlIHN0ZW5jaWwgdGVzdC5cbiAqXG4gKiBAZW51bSB7TnVtYmVyfVxuICovXG52YXIgU3RlbmNpbEZ1bmN0aW9uID0ge1xuICAvKipcbiAgICogVGhlIHN0ZW5jaWwgdGVzdCBuZXZlciBwYXNzZXMuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTkVWRVI6IFdlYkdMQ29uc3RhbnRzLk5FVkVSLFxuXG4gIC8qKlxuICAgKiBUaGUgc3RlbmNpbCB0ZXN0IHBhc3NlcyB3aGVuIHRoZSBtYXNrZWQgcmVmZXJlbmNlIHZhbHVlIGlzIGxlc3MgdGhhbiB0aGUgbWFza2VkIHN0ZW5jaWwgdmFsdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTEVTUzogV2ViR0xDb25zdGFudHMuTEVTUyxcblxuICAvKipcbiAgICogVGhlIHN0ZW5jaWwgdGVzdCBwYXNzZXMgd2hlbiB0aGUgbWFza2VkIHJlZmVyZW5jZSB2YWx1ZSBpcyBlcXVhbCB0byB0aGUgbWFza2VkIHN0ZW5jaWwgdmFsdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgRVFVQUw6IFdlYkdMQ29uc3RhbnRzLkVRVUFMLFxuXG4gIC8qKlxuICAgKiBUaGUgc3RlbmNpbCB0ZXN0IHBhc3NlcyB3aGVuIHRoZSBtYXNrZWQgcmVmZXJlbmNlIHZhbHVlIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbWFza2VkIHN0ZW5jaWwgdmFsdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTEVTU19PUl9FUVVBTDogV2ViR0xDb25zdGFudHMuTEVRVUFMLFxuXG4gIC8qKlxuICAgKiBUaGUgc3RlbmNpbCB0ZXN0IHBhc3NlcyB3aGVuIHRoZSBtYXNrZWQgcmVmZXJlbmNlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbWFza2VkIHN0ZW5jaWwgdmFsdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgR1JFQVRFUjogV2ViR0xDb25zdGFudHMuR1JFQVRFUixcblxuICAvKipcbiAgICogVGhlIHN0ZW5jaWwgdGVzdCBwYXNzZXMgd2hlbiB0aGUgbWFza2VkIHJlZmVyZW5jZSB2YWx1ZSBpcyBub3QgZXF1YWwgdG8gdGhlIG1hc2tlZCBzdGVuY2lsIHZhbHVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIE5PVF9FUVVBTDogV2ViR0xDb25zdGFudHMuTk9URVFVQUwsXG5cbiAgLyoqXG4gICAqIFRoZSBzdGVuY2lsIHRlc3QgcGFzc2VzIHdoZW4gdGhlIG1hc2tlZCByZWZlcmVuY2UgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBtYXNrZWQgc3RlbmNpbCB2YWx1ZS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBHUkVBVEVSX09SX0VRVUFMOiBXZWJHTENvbnN0YW50cy5HRVFVQUwsXG5cbiAgLyoqXG4gICAqIFRoZSBzdGVuY2lsIHRlc3QgYWx3YXlzIHBhc3Nlcy5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBBTFdBWVM6IFdlYkdMQ29uc3RhbnRzLkFMV0FZUyxcbn07XG5leHBvcnQgZGVmYXVsdCBPYmplY3QuZnJlZXplKFN0ZW5jaWxGdW5jdGlvbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///77053\n')},81255:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52200);\n\n\n/**\n * Determines the action taken based on the result of the stencil test.\n *\n * @enum {Number}\n */\nvar StencilOperation = {\n  /**\n   * Sets the stencil buffer value to zero.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ZERO: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO,\n\n  /**\n   * Does not change the stencil buffer.\n   *\n   * @type {Number}\n   * @constant\n   */\n  KEEP: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].KEEP */ .Z.KEEP,\n\n  /**\n   * Replaces the stencil buffer value with the reference value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  REPLACE: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].REPLACE */ .Z.REPLACE,\n\n  /**\n   * Increments the stencil buffer value, clamping to unsigned byte.\n   *\n   * @type {Number}\n   * @constant\n   */\n  INCREMENT: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].INCR */ .Z.INCR,\n\n  /**\n   * Decrements the stencil buffer value, clamping to zero.\n   *\n   * @type {Number}\n   * @constant\n   */\n  DECREMENT: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].DECR */ .Z.DECR,\n\n  /**\n   * Bitwise inverts the existing stencil buffer value.\n   *\n   * @type {Number}\n   * @constant\n   */\n  INVERT: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].INVERT */ .Z.INVERT,\n\n  /**\n   * Increments the stencil buffer value, wrapping to zero when exceeding the unsigned byte range.\n   *\n   * @type {Number}\n   * @constant\n   */\n  INCREMENT_WRAP: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].INCR_WRAP */ .Z.INCR_WRAP,\n\n  /**\n   * Decrements the stencil buffer value, wrapping to the maximum unsigned byte instead of going below zero.\n   *\n   * @type {Number}\n   * @constant\n   */\n  DECREMENT_WRAP: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].DECR_WRAP */ .Z.DECR_WRAP,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(StencilOperation));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODEyNTUuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFFBQVEsa0ZBQW1COztBQUUzQjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFFBQVEsa0ZBQW1COztBQUUzQjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFdBQVcsd0ZBQXNCOztBQUVqQztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGFBQWEsa0ZBQW1COztBQUVoQztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGFBQWEsa0ZBQW1COztBQUVoQztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFVBQVUsc0ZBQXFCOztBQUUvQjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGtCQUFrQiw0RkFBd0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0Esa0JBQWtCLDRGQUF3QjtBQUMxQztBQUNBLHlEQUFlLCtCQUErQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1N0ZW5jaWxPcGVyYXRpb24uanM/MTg1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2ViR0xDb25zdGFudHMgZnJvbSBcIi4uL0NvcmUvV2ViR0xDb25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHRoZSBhY3Rpb24gdGFrZW4gYmFzZWQgb24gdGhlIHJlc3VsdCBvZiB0aGUgc3RlbmNpbCB0ZXN0LlxuICpcbiAqIEBlbnVtIHtOdW1iZXJ9XG4gKi9cbnZhciBTdGVuY2lsT3BlcmF0aW9uID0ge1xuICAvKipcbiAgICogU2V0cyB0aGUgc3RlbmNpbCBidWZmZXIgdmFsdWUgdG8gemVyby5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBaRVJPOiBXZWJHTENvbnN0YW50cy5aRVJPLFxuXG4gIC8qKlxuICAgKiBEb2VzIG5vdCBjaGFuZ2UgdGhlIHN0ZW5jaWwgYnVmZmVyLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIEtFRVA6IFdlYkdMQ29uc3RhbnRzLktFRVAsXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoZSBzdGVuY2lsIGJ1ZmZlciB2YWx1ZSB3aXRoIHRoZSByZWZlcmVuY2UgdmFsdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgUkVQTEFDRTogV2ViR0xDb25zdGFudHMuUkVQTEFDRSxcblxuICAvKipcbiAgICogSW5jcmVtZW50cyB0aGUgc3RlbmNpbCBidWZmZXIgdmFsdWUsIGNsYW1waW5nIHRvIHVuc2lnbmVkIGJ5dGUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgSU5DUkVNRU5UOiBXZWJHTENvbnN0YW50cy5JTkNSLFxuXG4gIC8qKlxuICAgKiBEZWNyZW1lbnRzIHRoZSBzdGVuY2lsIGJ1ZmZlciB2YWx1ZSwgY2xhbXBpbmcgdG8gemVyby5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBERUNSRU1FTlQ6IFdlYkdMQ29uc3RhbnRzLkRFQ1IsXG5cbiAgLyoqXG4gICAqIEJpdHdpc2UgaW52ZXJ0cyB0aGUgZXhpc3Rpbmcgc3RlbmNpbCBidWZmZXIgdmFsdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgSU5WRVJUOiBXZWJHTENvbnN0YW50cy5JTlZFUlQsXG5cbiAgLyoqXG4gICAqIEluY3JlbWVudHMgdGhlIHN0ZW5jaWwgYnVmZmVyIHZhbHVlLCB3cmFwcGluZyB0byB6ZXJvIHdoZW4gZXhjZWVkaW5nIHRoZSB1bnNpZ25lZCBieXRlIHJhbmdlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIElOQ1JFTUVOVF9XUkFQOiBXZWJHTENvbnN0YW50cy5JTkNSX1dSQVAsXG5cbiAgLyoqXG4gICAqIERlY3JlbWVudHMgdGhlIHN0ZW5jaWwgYnVmZmVyIHZhbHVlLCB3cmFwcGluZyB0byB0aGUgbWF4aW11bSB1bnNpZ25lZCBieXRlIGluc3RlYWQgb2YgZ29pbmcgYmVsb3cgemVyby5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBERUNSRU1FTlRfV1JBUDogV2ViR0xDb25zdGFudHMuREVDUl9XUkFQLFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoU3RlbmNpbE9wZXJhdGlvbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///81255\n')},78002:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12572);\n\n\n/**\n * An expression for a style applied to a {@link Cesium3DTileset}.\n * <p>\n * Derived classes of this interface evaluate expressions in the\n * {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification/Styling|3D Tiles Styling language}.\n * </p>\n * <p>\n * This type describes an interface and is not intended to be instantiated directly.\n * </p>\n *\n * @alias StyleExpression\n * @constructor\n *\n * @see Expression\n * @see ConditionsExpression\n */\nfunction StyleExpression() {}\n\n/**\n * Evaluates the result of an expression, optionally using the provided feature\'s properties. If the result of\n * the expression in the\n * {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification/Styling|3D Tiles Styling language}\n * is of type <code>Boolean</code>, <code>Number</code>, or <code>String</code>, the corresponding JavaScript\n * primitive type will be returned. If the result is a <code>RegExp</code>, a Javascript <code>RegExp</code>\n * object will be returned. If the result is a <code>Cartesian2</code>, <code>Cartesian3</code>, or <code>Cartesian4</code>,\n * a {@link Cartesian2}, {@link Cartesian3}, or {@link Cartesian4} object will be returned. If the <code>result</code> argument is\n * a {@link Color}, the {@link Cartesian4} value is converted to a {@link Color} and then returned.\n *\n * @param {Cesium3DTileFeature} feature The feature whose properties may be used as variables in the expression.\n * @param {Object} [result] The object onto which to store the result.\n * @returns {Boolean|Number|String|RegExp|Cartesian2|Cartesian3|Cartesian4|Color} The result of evaluating the expression.\n */\nStyleExpression.prototype.evaluate = function (feature, result) {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\n/**\n * Evaluates the result of a Color expression, optionally using the provided feature\'s properties.\n * <p>\n * This is equivalent to {@link StyleExpression#evaluate} but always returns a {@link Color} object.\n * </p>\n *\n * @param {Cesium3DTileFeature} feature The feature whose properties may be used as variables in the expression.\n * @param {Color} [result] The object in which to store the result.\n * @returns {Color} The modified result parameter or a new Color instance if one was not provided.\n */\nStyleExpression.prototype.evaluateColor = function (feature, result) {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\n/**\n * Gets the shader function for this expression.\n * Returns undefined if the shader function can\'t be generated from this expression.\n *\n * @param {String} functionSignature Signature of the generated function.\n * @param {Object} variableSubstitutionMap Maps variable names to shader variable names.\n * @param {Object} shaderState Stores information about the generated shader function, including whether it is translucent.\n * @param {String} returnType The return type of the generated function.\n *\n * @returns {String} The shader function.\n *\n * @private\n */\nStyleExpression.prototype.getShaderFunction = function (\n  functionSignature,\n  variableSubstitutionMap,\n  shaderState,\n  returnType\n) {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\n/**\n * Gets the variables used by the expression.\n *\n * @returns {String[]} The variables used by the expression.\n *\n * @private\n */\nStyleExpression.prototype.getVariables = function () {\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError();\n};\n\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (StyleExpression)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzgwMDIuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQSwyQ0FBMkMsc0JBQXNCO0FBQ2pFO0FBQ0E7QUFDQSxJQUFJLHFHQUFxRztBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU0saUJBQWlCLEdBQUcsaUJBQWlCLE1BQU0sa0JBQWtCO0FBQ25FLE1BQU0sWUFBWSxPQUFPLGtCQUFrQix5QkFBeUIsYUFBYTtBQUNqRjtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcsUUFBUTtBQUNuQixhQUFhLHFFQUFxRTtBQUNsRjtBQUNBO0FBQ0EsRUFBRSx3SEFBc0M7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdDQUFnQyxzQkFBc0IsYUFBYTtBQUM3RjtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0EsRUFBRSx3SEFBc0M7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx3SEFBc0M7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx3SEFBc0M7QUFDeEM7O0FBRUEsc0VBQWUsK0RBQWUsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9TdHlsZUV4cHJlc3Npb24uanM/MzU4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcblxuLyoqXG4gKiBBbiBleHByZXNzaW9uIGZvciBhIHN0eWxlIGFwcGxpZWQgdG8gYSB7QGxpbmsgQ2VzaXVtM0RUaWxlc2V0fS5cbiAqIDxwPlxuICogRGVyaXZlZCBjbGFzc2VzIG9mIHRoaXMgaW50ZXJmYWNlIGV2YWx1YXRlIGV4cHJlc3Npb25zIGluIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy8zZC10aWxlcy90cmVlL21haW4vc3BlY2lmaWNhdGlvbi9TdHlsaW5nfDNEIFRpbGVzIFN0eWxpbmcgbGFuZ3VhZ2V9LlxuICogPC9wPlxuICogPHA+XG4gKiBUaGlzIHR5cGUgZGVzY3JpYmVzIGFuIGludGVyZmFjZSBhbmQgaXMgbm90IGludGVuZGVkIHRvIGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cbiAqIDwvcD5cbiAqXG4gKiBAYWxpYXMgU3R5bGVFeHByZXNzaW9uXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAc2VlIEV4cHJlc3Npb25cbiAqIEBzZWUgQ29uZGl0aW9uc0V4cHJlc3Npb25cbiAqL1xuZnVuY3Rpb24gU3R5bGVFeHByZXNzaW9uKCkge31cblxuLyoqXG4gKiBFdmFsdWF0ZXMgdGhlIHJlc3VsdCBvZiBhbiBleHByZXNzaW9uLCBvcHRpb25hbGx5IHVzaW5nIHRoZSBwcm92aWRlZCBmZWF0dXJlJ3MgcHJvcGVydGllcy4gSWYgdGhlIHJlc3VsdCBvZlxuICogdGhlIGV4cHJlc3Npb24gaW4gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0Nlc2l1bUdTLzNkLXRpbGVzL3RyZWUvbWFpbi9zcGVjaWZpY2F0aW9uL1N0eWxpbmd8M0QgVGlsZXMgU3R5bGluZyBsYW5ndWFnZX1cbiAqIGlzIG9mIHR5cGUgPGNvZGU+Qm9vbGVhbjwvY29kZT4sIDxjb2RlPk51bWJlcjwvY29kZT4sIG9yIDxjb2RlPlN0cmluZzwvY29kZT4sIHRoZSBjb3JyZXNwb25kaW5nIEphdmFTY3JpcHRcbiAqIHByaW1pdGl2ZSB0eXBlIHdpbGwgYmUgcmV0dXJuZWQuIElmIHRoZSByZXN1bHQgaXMgYSA8Y29kZT5SZWdFeHA8L2NvZGU+LCBhIEphdmFzY3JpcHQgPGNvZGU+UmVnRXhwPC9jb2RlPlxuICogb2JqZWN0IHdpbGwgYmUgcmV0dXJuZWQuIElmIHRoZSByZXN1bHQgaXMgYSA8Y29kZT5DYXJ0ZXNpYW4yPC9jb2RlPiwgPGNvZGU+Q2FydGVzaWFuMzwvY29kZT4sIG9yIDxjb2RlPkNhcnRlc2lhbjQ8L2NvZGU+LFxuICogYSB7QGxpbmsgQ2FydGVzaWFuMn0sIHtAbGluayBDYXJ0ZXNpYW4zfSwgb3Ige0BsaW5rIENhcnRlc2lhbjR9IG9iamVjdCB3aWxsIGJlIHJldHVybmVkLiBJZiB0aGUgPGNvZGU+cmVzdWx0PC9jb2RlPiBhcmd1bWVudCBpc1xuICogYSB7QGxpbmsgQ29sb3J9LCB0aGUge0BsaW5rIENhcnRlc2lhbjR9IHZhbHVlIGlzIGNvbnZlcnRlZCB0byBhIHtAbGluayBDb2xvcn0gYW5kIHRoZW4gcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHtDZXNpdW0zRFRpbGVGZWF0dXJlfSBmZWF0dXJlIFRoZSBmZWF0dXJlIHdob3NlIHByb3BlcnRpZXMgbWF5IGJlIHVzZWQgYXMgdmFyaWFibGVzIGluIHRoZSBleHByZXNzaW9uLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXN1bHRdIFRoZSBvYmplY3Qgb250byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge0Jvb2xlYW58TnVtYmVyfFN0cmluZ3xSZWdFeHB8Q2FydGVzaWFuMnxDYXJ0ZXNpYW4zfENhcnRlc2lhbjR8Q29sb3J9IFRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyB0aGUgZXhwcmVzc2lvbi5cbiAqL1xuU3R5bGVFeHByZXNzaW9uLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCByZXN1bHQpIHtcbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IoKTtcbn07XG5cbi8qKlxuICogRXZhbHVhdGVzIHRoZSByZXN1bHQgb2YgYSBDb2xvciBleHByZXNzaW9uLCBvcHRpb25hbGx5IHVzaW5nIHRoZSBwcm92aWRlZCBmZWF0dXJlJ3MgcHJvcGVydGllcy5cbiAqIDxwPlxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIHtAbGluayBTdHlsZUV4cHJlc3Npb24jZXZhbHVhdGV9IGJ1dCBhbHdheXMgcmV0dXJucyBhIHtAbGluayBDb2xvcn0gb2JqZWN0LlxuICogPC9wPlxuICpcbiAqIEBwYXJhbSB7Q2VzaXVtM0RUaWxlRmVhdHVyZX0gZmVhdHVyZSBUaGUgZmVhdHVyZSB3aG9zZSBwcm9wZXJ0aWVzIG1heSBiZSB1c2VkIGFzIHZhcmlhYmxlcyBpbiB0aGUgZXhwcmVzc2lvbi5cbiAqIEBwYXJhbSB7Q29sb3J9IFtyZXN1bHRdIFRoZSBvYmplY3QgaW4gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtDb2xvcn0gVGhlIG1vZGlmaWVkIHJlc3VsdCBwYXJhbWV0ZXIgb3IgYSBuZXcgQ29sb3IgaW5zdGFuY2UgaWYgb25lIHdhcyBub3QgcHJvdmlkZWQuXG4gKi9cblN0eWxlRXhwcmVzc2lvbi5wcm90b3R5cGUuZXZhbHVhdGVDb2xvciA9IGZ1bmN0aW9uIChmZWF0dXJlLCByZXN1bHQpIHtcbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3IoKTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgc2hhZGVyIGZ1bmN0aW9uIGZvciB0aGlzIGV4cHJlc3Npb24uXG4gKiBSZXR1cm5zIHVuZGVmaW5lZCBpZiB0aGUgc2hhZGVyIGZ1bmN0aW9uIGNhbid0IGJlIGdlbmVyYXRlZCBmcm9tIHRoaXMgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZnVuY3Rpb25TaWduYXR1cmUgU2lnbmF0dXJlIG9mIHRoZSBnZW5lcmF0ZWQgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdH0gdmFyaWFibGVTdWJzdGl0dXRpb25NYXAgTWFwcyB2YXJpYWJsZSBuYW1lcyB0byBzaGFkZXIgdmFyaWFibGUgbmFtZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gc2hhZGVyU3RhdGUgU3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBnZW5lcmF0ZWQgc2hhZGVyIGZ1bmN0aW9uLCBpbmNsdWRpbmcgd2hldGhlciBpdCBpcyB0cmFuc2x1Y2VudC5cbiAqIEBwYXJhbSB7U3RyaW5nfSByZXR1cm5UeXBlIFRoZSByZXR1cm4gdHlwZSBvZiB0aGUgZ2VuZXJhdGVkIGZ1bmN0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBzaGFkZXIgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqL1xuU3R5bGVFeHByZXNzaW9uLnByb3RvdHlwZS5nZXRTaGFkZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChcbiAgZnVuY3Rpb25TaWduYXR1cmUsXG4gIHZhcmlhYmxlU3Vic3RpdHV0aW9uTWFwLFxuICBzaGFkZXJTdGF0ZSxcbiAgcmV0dXJuVHlwZVxuKSB7XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yKCk7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIHZhcmlhYmxlcyB1c2VkIGJ5IHRoZSBleHByZXNzaW9uLlxuICpcbiAqIEByZXR1cm5zIHtTdHJpbmdbXX0gVGhlIHZhcmlhYmxlcyB1c2VkIGJ5IHRoZSBleHByZXNzaW9uLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblN0eWxlRXhwcmVzc2lvbi5wcm90b3R5cGUuZ2V0VmFyaWFibGVzID0gZnVuY3Rpb24gKCkge1xuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcigpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3R5bGVFeHByZXNzaW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///78002\n')},76027:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63367);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(86511);\n/* harmony import */ var _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22832);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(72248);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(38443);\n/* harmony import */ var _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97264);\n/* harmony import */ var _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(99095);\n/* harmony import */ var _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(58597);\n/* harmony import */ var _Renderer_ComputeCommand_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92357);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(60072);\n/* harmony import */ var _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(21572);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(8743);\n/* harmony import */ var _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(18192);\n/* harmony import */ var _Shaders_SunFS_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(26103);\n/* harmony import */ var _Shaders_SunTextureFS_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(44242);\n/* harmony import */ var _Shaders_SunVS_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(54830);\n/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(13633);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(89917);\n/* harmony import */ var _SceneTransforms_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(48244);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Draws a sun billboard.\n * <p>This is only supported in 3D and Columbus view.</p>\n *\n * @alias Sun\n * @constructor\n *\n *\n * @example\n * scene.sun = new Cesium.Sun();\n *\n * @see Scene#sun\n */\nfunction Sun() {\n  /**\n   * Determines if the sun will be shown.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  this.show = true;\n\n  this._drawCommand = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z({\n    primitiveType: _Core_PrimitiveType_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].TRIANGLES */ .Z.TRIANGLES,\n    boundingVolume: new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n    owner: this,\n  });\n  this._commands = {\n    drawCommand: this._drawCommand,\n    computeCommand: undefined,\n  };\n  this._boundingVolume = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._boundingVolume2D = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  this._texture = undefined;\n  this._drawingBufferWidth = undefined;\n  this._drawingBufferHeight = undefined;\n  this._radiusTS = undefined;\n  this._size = undefined;\n\n  this.glowFactor = 1.0;\n  this._glowFactorDirty = false;\n\n  this._useHdr = undefined;\n\n  var that = this;\n  this._uniformMap = {\n    u_texture: function () {\n      return that._texture;\n    },\n    u_size: function () {\n      return that._size;\n    },\n  };\n}\n\nObject.defineProperties(Sun.prototype, {\n  /**\n   * Gets or sets a number that controls how "bright" the Sun\'s lens flare appears\n   * to be.  Zero shows just the Sun\'s disc without any flare.\n   * Use larger values for a more pronounced flare around the Sun.\n   *\n   * @memberof Sun.prototype\n   * @type {Number}\n   * @default 1.0\n   */\n  glowFactor: {\n    get: function () {\n      return this._glowFactor;\n    },\n    set: function (glowFactor) {\n      glowFactor = Math.max(glowFactor, 0.0);\n      this._glowFactor = glowFactor;\n      this._glowFactorDirty = true;\n    },\n  },\n});\n\nvar scratchPositionWC = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchLimbWC = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchPositionEC = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchCartesian4 = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\n/**\n * @private\n */\nSun.prototype.update = function (frameState, passState, useHdr) {\n  if (!this.show) {\n    return undefined;\n  }\n\n  var mode = frameState.mode;\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].SCENE2D */ .Z.SCENE2D || mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].MORPHING */ .Z.MORPHING) {\n    return undefined;\n  }\n\n  if (!frameState.passes.render) {\n    return undefined;\n  }\n\n  var context = frameState.context;\n  var drawingBufferWidth = passState.viewport.width;\n  var drawingBufferHeight = passState.viewport.height;\n\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(this._texture) ||\n    drawingBufferWidth !== this._drawingBufferWidth ||\n    drawingBufferHeight !== this._drawingBufferHeight ||\n    this._glowFactorDirty ||\n    useHdr !== this._useHdr\n  ) {\n    this._texture = this._texture && this._texture.destroy();\n    this._drawingBufferWidth = drawingBufferWidth;\n    this._drawingBufferHeight = drawingBufferHeight;\n    this._glowFactorDirty = false;\n    this._useHdr = useHdr;\n\n    var size = Math.max(drawingBufferWidth, drawingBufferHeight);\n    size = Math.pow(2.0, Math.ceil(Math.log(size) / Math.log(2.0)) - 2.0);\n\n    // The size computed above can be less than 1.0 if size < 4.0. This will probably\n    // never happen in practice, but does in the tests. Clamp to 1.0 to prevent WebGL\n    // errors in the tests.\n    size = Math.max(1.0, size);\n\n    var pixelDatatype = useHdr\n      ? context.halfFloatingPointTexture\n        ? _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].HALF_FLOAT */ .Z.HALF_FLOAT\n        : _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].FLOAT */ .Z.FLOAT\n      : _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE;\n    this._texture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z({\n      context: context,\n      width: size,\n      height: size,\n      pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].RGBA */ .Z.RGBA,\n      pixelDatatype: pixelDatatype,\n    });\n\n    this._glowLengthTS = this._glowFactor * 5.0;\n    this._radiusTS = (1.0 / (1.0 + 2.0 * this._glowLengthTS)) * 0.5;\n\n    var that = this;\n    var uniformMap = {\n      u_radiusTS: function () {\n        return that._radiusTS;\n      },\n    };\n\n    this._commands.computeCommand = new _Renderer_ComputeCommand_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z({\n      fragmentShaderSource: _Shaders_SunTextureFS_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z,\n      outputTexture: this._texture,\n      uniformMap: uniformMap,\n      persists: false,\n      owner: this,\n      postExecute: function () {\n        that._commands.computeCommand = undefined;\n      },\n    });\n  }\n\n  var drawCommand = this._drawCommand;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z)(drawCommand.vertexArray)) {\n    var attributeLocations = {\n      direction: 0,\n    };\n\n    var directions = new Uint8Array(4 * 2);\n    directions[0] = 0;\n    directions[1] = 0;\n\n    directions[2] = 255;\n    directions[3] = 0.0;\n\n    directions[4] = 255;\n    directions[5] = 255;\n\n    directions[6] = 0.0;\n    directions[7] = 255;\n\n    var vertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n      context: context,\n      typedArray: directions,\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n    });\n    var attributes = [\n      {\n        index: attributeLocations.direction,\n        vertexBuffer: vertexBuffer,\n        componentsPerAttribute: 2,\n        normalize: true,\n        componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n      },\n    ];\n    // Workaround Internet Explorer 11.0.8 lack of TRIANGLE_FAN\n    var indexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].createIndexBuffer */ .Z.createIndexBuffer({\n      context: context,\n      typedArray: new Uint16Array([0, 1, 2, 0, 2, 3]),\n      usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n      indexDatatype: _Core_IndexDatatype_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT,\n    });\n    drawCommand.vertexArray = new _Renderer_VertexArray_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z({\n      context: context,\n      attributes: attributes,\n      indexBuffer: indexBuffer,\n    });\n\n    drawCommand.shaderProgram = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromCache */ .Z.fromCache({\n      context: context,\n      vertexShaderSource: _Shaders_SunVS_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z,\n      fragmentShaderSource: _Shaders_SunFS_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z,\n      attributeLocations: attributeLocations,\n    });\n\n    drawCommand.renderState = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].fromCache */ .Z.fromCache({\n      blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].ALPHA_BLEND */ .Z.ALPHA_BLEND,\n    });\n    drawCommand.uniformMap = this._uniformMap;\n  }\n\n  var sunPosition = context.uniformState.sunPositionWC;\n  var sunPositionCV = context.uniformState.sunPositionColumbusView;\n\n  var boundingVolume = this._boundingVolume;\n  var boundingVolume2D = this._boundingVolume2D;\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(sunPosition, boundingVolume.center);\n  boundingVolume2D.center.x = sunPositionCV.z;\n  boundingVolume2D.center.y = sunPositionCV.x;\n  boundingVolume2D.center.z = sunPositionCV.y;\n\n  boundingVolume.radius =\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].SOLAR_RADIUS */ .Z.SOLAR_RADIUS + _Core_Math_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].SOLAR_RADIUS */ .Z.SOLAR_RADIUS * this._glowLengthTS;\n  boundingVolume2D.radius = boundingVolume.radius;\n\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(boundingVolume, drawCommand.boundingVolume);\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(boundingVolume2D, drawCommand.boundingVolume);\n  }\n\n  var position = _SceneTransforms_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].computeActualWgs84Position */ .Z.computeActualWgs84Position(\n    frameState,\n    sunPosition,\n    scratchCartesian4\n  );\n\n  var dist = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(position, frameState.camera.position, scratchCartesian4)\n  );\n  var projMatrix = context.uniformState.projection;\n\n  var positionEC = scratchPositionEC;\n  positionEC.x = 0;\n  positionEC.y = 0;\n  positionEC.z = -dist;\n  positionEC.w = 1;\n\n  var positionCC = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].multiplyByVector */ .Z.multiplyByVector(\n    projMatrix,\n    positionEC,\n    scratchCartesian4\n  );\n  var positionWC = _SceneTransforms_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].clipToGLWindowCoordinates */ .Z.clipToGLWindowCoordinates(\n    passState.viewport,\n    positionCC,\n    scratchPositionWC\n  );\n\n  positionEC.x = _Core_Math_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].SOLAR_RADIUS */ .Z.SOLAR_RADIUS;\n  var limbCC = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].multiplyByVector */ .Z.multiplyByVector(\n    projMatrix,\n    positionEC,\n    scratchCartesian4\n  );\n  var limbWC = _SceneTransforms_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].clipToGLWindowCoordinates */ .Z.clipToGLWindowCoordinates(\n    passState.viewport,\n    limbCC,\n    scratchLimbWC\n  );\n\n  this._size = _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].magnitude */ .Z.magnitude(\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(limbWC, positionWC, scratchCartesian4)\n  );\n  this._size = 2.0 * this._size * (1.0 + 2.0 * this._glowLengthTS);\n  this._size = Math.ceil(this._size);\n\n  return this._commands;\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see Sun#destroy\n */\nSun.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * sun = sun && sun.destroy();\n *\n *  @see Sun#isDestroyed\n */\nSun.prototype.destroy = function () {\n  var command = this._drawCommand;\n  command.vertexArray = command.vertexArray && command.vertexArray.destroy();\n  command.shaderProgram =\n    command.shaderProgram && command.shaderProgram.destroy();\n\n  this._texture = this._texture && this._texture.destroy();\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Sun);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksd0ZBQXVCLEdBQUcsd0ZBQXVCO0FBQ3JEOztBQUVBLGVBQWUsK0VBQWlCO0FBQ2hDLElBQUksb0ZBQW9CO0FBQ3hCLElBQUksa0JBQWtCLDJGQUF1QjtBQUM3QyxJQUFJLG9GQUFvQjtBQUN4Qjs7QUFFQSxpQkFBaUIsMkhBQTBDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEsd0ZBQW9CO0FBQ2pDLElBQUksc0ZBQW1CO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsbUdBQXdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlIQUF5QztBQUM1RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsd0ZBQXVCO0FBQ3hDLGVBQWUsbUdBQXdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5SEFBeUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZUFBZSx3RkFBb0I7QUFDbkMsSUFBSSxzRkFBbUI7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSx3REFBd0Q7QUFDeEQsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBLGFBQWEsU0FBUyxnREFBZ0Q7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxTQUFTLDJFQUFhO0FBQ3RCO0FBQ0EseURBQWUsR0FBRyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1N1bi5qcz82NDc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi4vQ29yZS9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjQgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuNC5qc1wiO1xuaW1wb3J0IENvbXBvbmVudERhdGF0eXBlIGZyb20gXCIuLi9Db3JlL0NvbXBvbmVudERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgSW5kZXhEYXRhdHlwZSBmcm9tIFwiLi4vQ29yZS9JbmRleERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi4vQ29yZS9NYXRoLmpzXCI7XG5pbXBvcnQgTWF0cml4NCBmcm9tIFwiLi4vQ29yZS9NYXRyaXg0LmpzXCI7XG5pbXBvcnQgUGl4ZWxGb3JtYXQgZnJvbSBcIi4uL0NvcmUvUGl4ZWxGb3JtYXQuanNcIjtcbmltcG9ydCBQcmltaXRpdmVUeXBlIGZyb20gXCIuLi9Db3JlL1ByaW1pdGl2ZVR5cGUuanNcIjtcbmltcG9ydCBCdWZmZXIgZnJvbSBcIi4uL1JlbmRlcmVyL0J1ZmZlci5qc1wiO1xuaW1wb3J0IEJ1ZmZlclVzYWdlIGZyb20gXCIuLi9SZW5kZXJlci9CdWZmZXJVc2FnZS5qc1wiO1xuaW1wb3J0IENvbXB1dGVDb21tYW5kIGZyb20gXCIuLi9SZW5kZXJlci9Db21wdXRlQ29tbWFuZC5qc1wiO1xuaW1wb3J0IERyYXdDb21tYW5kIGZyb20gXCIuLi9SZW5kZXJlci9EcmF3Q29tbWFuZC5qc1wiO1xuaW1wb3J0IFBpeGVsRGF0YXR5cGUgZnJvbSBcIi4uL1JlbmRlcmVyL1BpeGVsRGF0YXR5cGUuanNcIjtcbmltcG9ydCBSZW5kZXJTdGF0ZSBmcm9tIFwiLi4vUmVuZGVyZXIvUmVuZGVyU3RhdGUuanNcIjtcbmltcG9ydCBTaGFkZXJQcm9ncmFtIGZyb20gXCIuLi9SZW5kZXJlci9TaGFkZXJQcm9ncmFtLmpzXCI7XG5pbXBvcnQgVGV4dHVyZSBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZS5qc1wiO1xuaW1wb3J0IFZlcnRleEFycmF5IGZyb20gXCIuLi9SZW5kZXJlci9WZXJ0ZXhBcnJheS5qc1wiO1xuaW1wb3J0IFN1bkZTIGZyb20gXCIuLi9TaGFkZXJzL1N1bkZTLmpzXCI7XG5pbXBvcnQgU3VuVGV4dHVyZUZTIGZyb20gXCIuLi9TaGFkZXJzL1N1blRleHR1cmVGUy5qc1wiO1xuaW1wb3J0IFN1blZTIGZyb20gXCIuLi9TaGFkZXJzL1N1blZTLmpzXCI7XG5pbXBvcnQgQmxlbmRpbmdTdGF0ZSBmcm9tIFwiLi9CbGVuZGluZ1N0YXRlLmpzXCI7XG5pbXBvcnQgU2NlbmVNb2RlIGZyb20gXCIuL1NjZW5lTW9kZS5qc1wiO1xuaW1wb3J0IFNjZW5lVHJhbnNmb3JtcyBmcm9tIFwiLi9TY2VuZVRyYW5zZm9ybXMuanNcIjtcblxuLyoqXG4gKiBEcmF3cyBhIHN1biBiaWxsYm9hcmQuXG4gKiA8cD5UaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGluIDNEIGFuZCBDb2x1bWJ1cyB2aWV3LjwvcD5cbiAqXG4gKiBAYWxpYXMgU3VuXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIHNjZW5lLnN1biA9IG5ldyBDZXNpdW0uU3VuKCk7XG4gKlxuICogQHNlZSBTY2VuZSNzdW5cbiAqL1xuZnVuY3Rpb24gU3VuKCkge1xuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgc3VuIHdpbGwgYmUgc2hvd24uXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICB0aGlzLnNob3cgPSB0cnVlO1xuXG4gIHRoaXMuX2RyYXdDb21tYW5kID0gbmV3IERyYXdDb21tYW5kKHtcbiAgICBwcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLlRSSUFOR0xFUyxcbiAgICBib3VuZGluZ1ZvbHVtZTogbmV3IEJvdW5kaW5nU3BoZXJlKCksXG4gICAgb3duZXI6IHRoaXMsXG4gIH0pO1xuICB0aGlzLl9jb21tYW5kcyA9IHtcbiAgICBkcmF3Q29tbWFuZDogdGhpcy5fZHJhd0NvbW1hbmQsXG4gICAgY29tcHV0ZUNvbW1hbmQ6IHVuZGVmaW5lZCxcbiAgfTtcbiAgdGhpcy5fYm91bmRpbmdWb2x1bWUgPSBuZXcgQm91bmRpbmdTcGhlcmUoKTtcbiAgdGhpcy5fYm91bmRpbmdWb2x1bWUyRCA9IG5ldyBCb3VuZGluZ1NwaGVyZSgpO1xuXG4gIHRoaXMuX3RleHR1cmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2RyYXdpbmdCdWZmZXJXaWR0aCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZHJhd2luZ0J1ZmZlckhlaWdodCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcmFkaXVzVFMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3NpemUgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5nbG93RmFjdG9yID0gMS4wO1xuICB0aGlzLl9nbG93RmFjdG9yRGlydHkgPSBmYWxzZTtcblxuICB0aGlzLl91c2VIZHIgPSB1bmRlZmluZWQ7XG5cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB0aGlzLl91bmlmb3JtTWFwID0ge1xuICAgIHVfdGV4dHVyZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoYXQuX3RleHR1cmU7XG4gICAgfSxcbiAgICB1X3NpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0Ll9zaXplO1xuICAgIH0sXG4gIH07XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFN1bi5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyBhIG51bWJlciB0aGF0IGNvbnRyb2xzIGhvdyBcImJyaWdodFwiIHRoZSBTdW4ncyBsZW5zIGZsYXJlIGFwcGVhcnNcbiAgICogdG8gYmUuICBaZXJvIHNob3dzIGp1c3QgdGhlIFN1bidzIGRpc2Mgd2l0aG91dCBhbnkgZmxhcmUuXG4gICAqIFVzZSBsYXJnZXIgdmFsdWVzIGZvciBhIG1vcmUgcHJvbm91bmNlZCBmbGFyZSBhcm91bmQgdGhlIFN1bi5cbiAgICpcbiAgICogQG1lbWJlcm9mIFN1bi5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqL1xuICBnbG93RmFjdG9yOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2xvd0ZhY3RvcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKGdsb3dGYWN0b3IpIHtcbiAgICAgIGdsb3dGYWN0b3IgPSBNYXRoLm1heChnbG93RmFjdG9yLCAwLjApO1xuICAgICAgdGhpcy5fZ2xvd0ZhY3RvciA9IGdsb3dGYWN0b3I7XG4gICAgICB0aGlzLl9nbG93RmFjdG9yRGlydHkgPSB0cnVlO1xuICAgIH0sXG4gIH0sXG59KTtcblxudmFyIHNjcmF0Y2hQb3NpdGlvbldDID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciBzY3JhdGNoTGltYldDID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciBzY3JhdGNoUG9zaXRpb25FQyA9IG5ldyBDYXJ0ZXNpYW40KCk7XG52YXIgc2NyYXRjaENhcnRlc2lhbjQgPSBuZXcgQ2FydGVzaWFuNCgpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblN1bi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHBhc3NTdGF0ZSwgdXNlSGRyKSB7XG4gIGlmICghdGhpcy5zaG93KSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBtb2RlID0gZnJhbWVTdGF0ZS5tb2RlO1xuICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHwgbW9kZSA9PT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICghZnJhbWVTdGF0ZS5wYXNzZXMucmVuZGVyKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuICB2YXIgZHJhd2luZ0J1ZmZlcldpZHRoID0gcGFzc1N0YXRlLnZpZXdwb3J0LndpZHRoO1xuICB2YXIgZHJhd2luZ0J1ZmZlckhlaWdodCA9IHBhc3NTdGF0ZS52aWV3cG9ydC5oZWlnaHQ7XG5cbiAgaWYgKFxuICAgICFkZWZpbmVkKHRoaXMuX3RleHR1cmUpIHx8XG4gICAgZHJhd2luZ0J1ZmZlcldpZHRoICE9PSB0aGlzLl9kcmF3aW5nQnVmZmVyV2lkdGggfHxcbiAgICBkcmF3aW5nQnVmZmVySGVpZ2h0ICE9PSB0aGlzLl9kcmF3aW5nQnVmZmVySGVpZ2h0IHx8XG4gICAgdGhpcy5fZ2xvd0ZhY3RvckRpcnR5IHx8XG4gICAgdXNlSGRyICE9PSB0aGlzLl91c2VIZHJcbiAgKSB7XG4gICAgdGhpcy5fdGV4dHVyZSA9IHRoaXMuX3RleHR1cmUgJiYgdGhpcy5fdGV4dHVyZS5kZXN0cm95KCk7XG4gICAgdGhpcy5fZHJhd2luZ0J1ZmZlcldpZHRoID0gZHJhd2luZ0J1ZmZlcldpZHRoO1xuICAgIHRoaXMuX2RyYXdpbmdCdWZmZXJIZWlnaHQgPSBkcmF3aW5nQnVmZmVySGVpZ2h0O1xuICAgIHRoaXMuX2dsb3dGYWN0b3JEaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuX3VzZUhkciA9IHVzZUhkcjtcblxuICAgIHZhciBzaXplID0gTWF0aC5tYXgoZHJhd2luZ0J1ZmZlcldpZHRoLCBkcmF3aW5nQnVmZmVySGVpZ2h0KTtcbiAgICBzaXplID0gTWF0aC5wb3coMi4wLCBNYXRoLmNlaWwoTWF0aC5sb2coc2l6ZSkgLyBNYXRoLmxvZygyLjApKSAtIDIuMCk7XG5cbiAgICAvLyBUaGUgc2l6ZSBjb21wdXRlZCBhYm92ZSBjYW4gYmUgbGVzcyB0aGFuIDEuMCBpZiBzaXplIDwgNC4wLiBUaGlzIHdpbGwgcHJvYmFibHlcbiAgICAvLyBuZXZlciBoYXBwZW4gaW4gcHJhY3RpY2UsIGJ1dCBkb2VzIGluIHRoZSB0ZXN0cy4gQ2xhbXAgdG8gMS4wIHRvIHByZXZlbnQgV2ViR0xcbiAgICAvLyBlcnJvcnMgaW4gdGhlIHRlc3RzLlxuICAgIHNpemUgPSBNYXRoLm1heCgxLjAsIHNpemUpO1xuXG4gICAgdmFyIHBpeGVsRGF0YXR5cGUgPSB1c2VIZHJcbiAgICAgID8gY29udGV4dC5oYWxmRmxvYXRpbmdQb2ludFRleHR1cmVcbiAgICAgICAgPyBQaXhlbERhdGF0eXBlLkhBTEZfRkxPQVRcbiAgICAgICAgOiBQaXhlbERhdGF0eXBlLkZMT0FUXG4gICAgICA6IFBpeGVsRGF0YXR5cGUuVU5TSUdORURfQllURTtcbiAgICB0aGlzLl90ZXh0dXJlID0gbmV3IFRleHR1cmUoe1xuICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgIHdpZHRoOiBzaXplLFxuICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgcGl4ZWxGb3JtYXQ6IFBpeGVsRm9ybWF0LlJHQkEsXG4gICAgICBwaXhlbERhdGF0eXBlOiBwaXhlbERhdGF0eXBlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5fZ2xvd0xlbmd0aFRTID0gdGhpcy5fZ2xvd0ZhY3RvciAqIDUuMDtcbiAgICB0aGlzLl9yYWRpdXNUUyA9ICgxLjAgLyAoMS4wICsgMi4wICogdGhpcy5fZ2xvd0xlbmd0aFRTKSkgKiAwLjU7XG5cbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIHVuaWZvcm1NYXAgPSB7XG4gICAgICB1X3JhZGl1c1RTOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGF0Ll9yYWRpdXNUUztcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHRoaXMuX2NvbW1hbmRzLmNvbXB1dGVDb21tYW5kID0gbmV3IENvbXB1dGVDb21tYW5kKHtcbiAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBTdW5UZXh0dXJlRlMsXG4gICAgICBvdXRwdXRUZXh0dXJlOiB0aGlzLl90ZXh0dXJlLFxuICAgICAgdW5pZm9ybU1hcDogdW5pZm9ybU1hcCxcbiAgICAgIHBlcnNpc3RzOiBmYWxzZSxcbiAgICAgIG93bmVyOiB0aGlzLFxuICAgICAgcG9zdEV4ZWN1dGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5fY29tbWFuZHMuY29tcHV0ZUNvbW1hbmQgPSB1bmRlZmluZWQ7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgdmFyIGRyYXdDb21tYW5kID0gdGhpcy5fZHJhd0NvbW1hbmQ7XG5cbiAgaWYgKCFkZWZpbmVkKGRyYXdDb21tYW5kLnZlcnRleEFycmF5KSkge1xuICAgIHZhciBhdHRyaWJ1dGVMb2NhdGlvbnMgPSB7XG4gICAgICBkaXJlY3Rpb246IDAsXG4gICAgfTtcblxuICAgIHZhciBkaXJlY3Rpb25zID0gbmV3IFVpbnQ4QXJyYXkoNCAqIDIpO1xuICAgIGRpcmVjdGlvbnNbMF0gPSAwO1xuICAgIGRpcmVjdGlvbnNbMV0gPSAwO1xuXG4gICAgZGlyZWN0aW9uc1syXSA9IDI1NTtcbiAgICBkaXJlY3Rpb25zWzNdID0gMC4wO1xuXG4gICAgZGlyZWN0aW9uc1s0XSA9IDI1NTtcbiAgICBkaXJlY3Rpb25zWzVdID0gMjU1O1xuXG4gICAgZGlyZWN0aW9uc1s2XSA9IDAuMDtcbiAgICBkaXJlY3Rpb25zWzddID0gMjU1O1xuXG4gICAgdmFyIHZlcnRleEJ1ZmZlciA9IEJ1ZmZlci5jcmVhdGVWZXJ0ZXhCdWZmZXIoe1xuICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgIHR5cGVkQXJyYXk6IGRpcmVjdGlvbnMsXG4gICAgICB1c2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXG4gICAgfSk7XG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBbXG4gICAgICB7XG4gICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMuZGlyZWN0aW9uLFxuICAgICAgICB2ZXJ0ZXhCdWZmZXI6IHZlcnRleEJ1ZmZlcixcbiAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMixcbiAgICAgICAgbm9ybWFsaXplOiB0cnVlLFxuICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgIH0sXG4gICAgXTtcbiAgICAvLyBXb3JrYXJvdW5kIEludGVybmV0IEV4cGxvcmVyIDExLjAuOCBsYWNrIG9mIFRSSUFOR0xFX0ZBTlxuICAgIHZhciBpbmRleEJ1ZmZlciA9IEJ1ZmZlci5jcmVhdGVJbmRleEJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgdHlwZWRBcnJheTogbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAwLCAyLCAzXSksXG4gICAgICB1c2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXG4gICAgICBpbmRleERhdGF0eXBlOiBJbmRleERhdGF0eXBlLlVOU0lHTkVEX1NIT1JULFxuICAgIH0pO1xuICAgIGRyYXdDb21tYW5kLnZlcnRleEFycmF5ID0gbmV3IFZlcnRleEFycmF5KHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgICAgaW5kZXhCdWZmZXI6IGluZGV4QnVmZmVyLFxuICAgIH0pO1xuXG4gICAgZHJhd0NvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IFNoYWRlclByb2dyYW0uZnJvbUNhY2hlKHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2U6IFN1blZTLFxuICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IFN1bkZTLFxuICAgICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gICAgfSk7XG5cbiAgICBkcmF3Q29tbWFuZC5yZW5kZXJTdGF0ZSA9IFJlbmRlclN0YXRlLmZyb21DYWNoZSh7XG4gICAgICBibGVuZGluZzogQmxlbmRpbmdTdGF0ZS5BTFBIQV9CTEVORCxcbiAgICB9KTtcbiAgICBkcmF3Q29tbWFuZC51bmlmb3JtTWFwID0gdGhpcy5fdW5pZm9ybU1hcDtcbiAgfVxuXG4gIHZhciBzdW5Qb3NpdGlvbiA9IGNvbnRleHQudW5pZm9ybVN0YXRlLnN1blBvc2l0aW9uV0M7XG4gIHZhciBzdW5Qb3NpdGlvbkNWID0gY29udGV4dC51bmlmb3JtU3RhdGUuc3VuUG9zaXRpb25Db2x1bWJ1c1ZpZXc7XG5cbiAgdmFyIGJvdW5kaW5nVm9sdW1lID0gdGhpcy5fYm91bmRpbmdWb2x1bWU7XG4gIHZhciBib3VuZGluZ1ZvbHVtZTJEID0gdGhpcy5fYm91bmRpbmdWb2x1bWUyRDtcblxuICBDYXJ0ZXNpYW4zLmNsb25lKHN1blBvc2l0aW9uLCBib3VuZGluZ1ZvbHVtZS5jZW50ZXIpO1xuICBib3VuZGluZ1ZvbHVtZTJELmNlbnRlci54ID0gc3VuUG9zaXRpb25DVi56O1xuICBib3VuZGluZ1ZvbHVtZTJELmNlbnRlci55ID0gc3VuUG9zaXRpb25DVi54O1xuICBib3VuZGluZ1ZvbHVtZTJELmNlbnRlci56ID0gc3VuUG9zaXRpb25DVi55O1xuXG4gIGJvdW5kaW5nVm9sdW1lLnJhZGl1cyA9XG4gICAgQ2VzaXVtTWF0aC5TT0xBUl9SQURJVVMgKyBDZXNpdW1NYXRoLlNPTEFSX1JBRElVUyAqIHRoaXMuX2dsb3dMZW5ndGhUUztcbiAgYm91bmRpbmdWb2x1bWUyRC5yYWRpdXMgPSBib3VuZGluZ1ZvbHVtZS5yYWRpdXM7XG5cbiAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgQm91bmRpbmdTcGhlcmUuY2xvbmUoYm91bmRpbmdWb2x1bWUsIGRyYXdDb21tYW5kLmJvdW5kaW5nVm9sdW1lKTtcbiAgfSBlbHNlIGlmIChtb2RlID09PSBTY2VuZU1vZGUuQ09MVU1CVVNfVklFVykge1xuICAgIEJvdW5kaW5nU3BoZXJlLmNsb25lKGJvdW5kaW5nVm9sdW1lMkQsIGRyYXdDb21tYW5kLmJvdW5kaW5nVm9sdW1lKTtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbiA9IFNjZW5lVHJhbnNmb3Jtcy5jb21wdXRlQWN0dWFsV2dzODRQb3NpdGlvbihcbiAgICBmcmFtZVN0YXRlLFxuICAgIHN1blBvc2l0aW9uLFxuICAgIHNjcmF0Y2hDYXJ0ZXNpYW40XG4gICk7XG5cbiAgdmFyIGRpc3QgPSBDYXJ0ZXNpYW4zLm1hZ25pdHVkZShcbiAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHBvc2l0aW9uLCBmcmFtZVN0YXRlLmNhbWVyYS5wb3NpdGlvbiwgc2NyYXRjaENhcnRlc2lhbjQpXG4gICk7XG4gIHZhciBwcm9qTWF0cml4ID0gY29udGV4dC51bmlmb3JtU3RhdGUucHJvamVjdGlvbjtcblxuICB2YXIgcG9zaXRpb25FQyA9IHNjcmF0Y2hQb3NpdGlvbkVDO1xuICBwb3NpdGlvbkVDLnggPSAwO1xuICBwb3NpdGlvbkVDLnkgPSAwO1xuICBwb3NpdGlvbkVDLnogPSAtZGlzdDtcbiAgcG9zaXRpb25FQy53ID0gMTtcblxuICB2YXIgcG9zaXRpb25DQyA9IE1hdHJpeDQubXVsdGlwbHlCeVZlY3RvcihcbiAgICBwcm9qTWF0cml4LFxuICAgIHBvc2l0aW9uRUMsXG4gICAgc2NyYXRjaENhcnRlc2lhbjRcbiAgKTtcbiAgdmFyIHBvc2l0aW9uV0MgPSBTY2VuZVRyYW5zZm9ybXMuY2xpcFRvR0xXaW5kb3dDb29yZGluYXRlcyhcbiAgICBwYXNzU3RhdGUudmlld3BvcnQsXG4gICAgcG9zaXRpb25DQyxcbiAgICBzY3JhdGNoUG9zaXRpb25XQ1xuICApO1xuXG4gIHBvc2l0aW9uRUMueCA9IENlc2l1bU1hdGguU09MQVJfUkFESVVTO1xuICB2YXIgbGltYkNDID0gTWF0cml4NC5tdWx0aXBseUJ5VmVjdG9yKFxuICAgIHByb2pNYXRyaXgsXG4gICAgcG9zaXRpb25FQyxcbiAgICBzY3JhdGNoQ2FydGVzaWFuNFxuICApO1xuICB2YXIgbGltYldDID0gU2NlbmVUcmFuc2Zvcm1zLmNsaXBUb0dMV2luZG93Q29vcmRpbmF0ZXMoXG4gICAgcGFzc1N0YXRlLnZpZXdwb3J0LFxuICAgIGxpbWJDQyxcbiAgICBzY3JhdGNoTGltYldDXG4gICk7XG5cbiAgdGhpcy5fc2l6ZSA9IENhcnRlc2lhbjIubWFnbml0dWRlKFxuICAgIENhcnRlc2lhbjIuc3VidHJhY3QobGltYldDLCBwb3NpdGlvbldDLCBzY3JhdGNoQ2FydGVzaWFuNClcbiAgKTtcbiAgdGhpcy5fc2l6ZSA9IDIuMCAqIHRoaXMuX3NpemUgKiAoMS4wICsgMi4wICogdGhpcy5fZ2xvd0xlbmd0aFRTKTtcbiAgdGhpcy5fc2l6ZSA9IE1hdGguY2VpbCh0aGlzLl9zaXplKTtcblxuICByZXR1cm4gdGhpcy5fY29tbWFuZHM7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICogPGJyIC8+PGJyIC8+XG4gKiBJZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIDxjb2RlPmZhbHNlPC9jb2RlPi5cbiAqXG4gKiBAc2VlIFN1biNkZXN0cm95XG4gKi9cblN1bi5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIFdlYkdMIHJlc291cmNlcyBoZWxkIGJ5IHRoaXMgb2JqZWN0LiAgRGVzdHJveWluZyBhbiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljXG4gKiByZWxlYXNlIG9mIFdlYkdMIHJlc291cmNlcywgaW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0byBkZXN0cm95IHRoaXMgb2JqZWN0LlxuICogPGJyIC8+PGJyIC8+XG4gKiBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uICBUaGVyZWZvcmUsXG4gKiBhc3NpZ24gdGhlIHJldHVybiB2YWx1ZSAoPGNvZGU+dW5kZWZpbmVkPC9jb2RlPikgdG8gdGhlIG9iamVjdCBhcyBkb25lIGluIHRoZSBleGFtcGxlLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIHN1biA9IHN1biAmJiBzdW4uZGVzdHJveSgpO1xuICpcbiAqICBAc2VlIFN1biNpc0Rlc3Ryb3llZFxuICovXG5TdW4ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjb21tYW5kID0gdGhpcy5fZHJhd0NvbW1hbmQ7XG4gIGNvbW1hbmQudmVydGV4QXJyYXkgPSBjb21tYW5kLnZlcnRleEFycmF5ICYmIGNvbW1hbmQudmVydGV4QXJyYXkuZGVzdHJveSgpO1xuICBjb21tYW5kLnNoYWRlclByb2dyYW0gPVxuICAgIGNvbW1hbmQuc2hhZGVyUHJvZ3JhbSAmJiBjb21tYW5kLnNoYWRlclByb2dyYW0uZGVzdHJveSgpO1xuXG4gIHRoaXMuX3RleHR1cmUgPSB0aGlzLl90ZXh0dXJlICYmIHRoaXMuX3RleHR1cmUuZGVzdHJveSgpO1xuXG4gIHJldHVybiBkZXN0cm95T2JqZWN0KHRoaXMpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFN1bjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///76027\n')},44747:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n\n\n\n/**\n * A directional light source that originates from the Sun.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Color} [options.color=Color.WHITE] The light\'s color.\n * @param {Number} [options.intensity=2.0] The light\'s intensity.\n *\n * @alias SunLight\n * @constructor\n */\nfunction SunLight(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  /**\n   * The color of the light.\n   * @type {Color}\n   * @default Color.WHITE\n   */\n  this.color = _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone((0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.color, _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].WHITE */ .Z.WHITE));\n\n  /**\n   * The intensity of the light.\n   * @type {Number}\n   * @default 2.0\n   */\n  this.intensity = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.intensity, 2.0);\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (SunLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQ3NDcuanMiLCJtYXBwaW5ncyI6Ijs7QUFBcUM7QUFDYzs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsT0FBTztBQUNsQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMEVBQVksVUFBVSxnR0FBeUI7QUFDM0Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsZUFBZSwyRUFBVyxDQUFDLDBFQUFZLGdCQUFnQiwyRUFBVzs7QUFFbEU7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsbUJBQW1CLDBFQUFZO0FBQy9COztBQUVBLHlEQUFlLFFBQVEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9TdW5MaWdodC5qcz9kMzQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb2xvciBmcm9tIFwiLi4vQ29yZS9Db2xvci5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcblxuLyoqXG4gKiBBIGRpcmVjdGlvbmFsIGxpZ2h0IHNvdXJjZSB0aGF0IG9yaWdpbmF0ZXMgZnJvbSB0aGUgU3VuLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtDb2xvcn0gW29wdGlvbnMuY29sb3I9Q29sb3IuV0hJVEVdIFRoZSBsaWdodCdzIGNvbG9yLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmludGVuc2l0eT0yLjBdIFRoZSBsaWdodCdzIGludGVuc2l0eS5cbiAqXG4gKiBAYWxpYXMgU3VuTGlnaHRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBTdW5MaWdodChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIC8qKlxuICAgKiBUaGUgY29sb3Igb2YgdGhlIGxpZ2h0LlxuICAgKiBAdHlwZSB7Q29sb3J9XG4gICAqIEBkZWZhdWx0IENvbG9yLldISVRFXG4gICAqL1xuICB0aGlzLmNvbG9yID0gQ29sb3IuY2xvbmUoZGVmYXVsdFZhbHVlKG9wdGlvbnMuY29sb3IsIENvbG9yLldISVRFKSk7XG5cbiAgLyoqXG4gICAqIFRoZSBpbnRlbnNpdHkgb2YgdGhlIGxpZ2h0LlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAyLjBcbiAgICovXG4gIHRoaXMuaW50ZW5zaXR5ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuaW50ZW5zaXR5LCAyLjApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTdW5MaWdodDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///44747\n')},80480:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88108);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63367);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(72248);\n/* harmony import */ var _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(95555);\n/* harmony import */ var _Shaders_PostProcessStages_AdditiveBlend_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(40995);\n/* harmony import */ var _Shaders_PostProcessStages_BrightPass_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(87641);\n/* harmony import */ var _Shaders_PostProcessStages_GaussianBlur1D_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(23077);\n/* harmony import */ var _Shaders_PostProcessStages_PassThrough_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(7571);\n/* harmony import */ var _PostProcessStage_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11184);\n/* harmony import */ var _PostProcessStageComposite_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(53798);\n/* harmony import */ var _PostProcessStageSampleMode_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(26615);\n/* harmony import */ var _PostProcessStageTextureCache_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(87878);\n/* harmony import */ var _SceneFramebuffer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(65448);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction SunPostProcess() {\n  this._sceneFramebuffer = new _SceneFramebuffer_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\n\n  var scale = 0.125;\n  var stages = new Array(6);\n\n  stages[0] = new _PostProcessStage_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    fragmentShader: _Shaders_PostProcessStages_PassThrough_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z,\n    textureScale: scale,\n    forcePowerOfTwo: true,\n    sampleMode: _PostProcessStageSampleMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].LINEAR */ .Z.LINEAR,\n  });\n\n  var brightPass = (stages[1] = new _PostProcessStage_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    fragmentShader: _Shaders_PostProcessStages_BrightPass_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z,\n    uniforms: {\n      avgLuminance: 0.5, // A guess at the average luminance across the entire scene\n      threshold: 0.25,\n      offset: 0.1,\n    },\n    textureScale: scale,\n    forcePowerOfTwo: true,\n  }));\n\n  var that = this;\n  this._delta = 1.0;\n  this._sigma = 2.0;\n  this._blurStep = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n  stages[2] = new _PostProcessStage_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    fragmentShader: _Shaders_PostProcessStages_GaussianBlur1D_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z,\n    uniforms: {\n      step: function () {\n        that._blurStep.x = that._blurStep.y =\n          1.0 / brightPass.outputTexture.width;\n        return that._blurStep;\n      },\n      delta: function () {\n        return that._delta;\n      },\n      sigma: function () {\n        return that._sigma;\n      },\n      direction: 0.0,\n    },\n    textureScale: scale,\n    forcePowerOfTwo: true,\n  });\n\n  stages[3] = new _PostProcessStage_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    fragmentShader: _Shaders_PostProcessStages_GaussianBlur1D_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z,\n    uniforms: {\n      step: function () {\n        that._blurStep.x = that._blurStep.y =\n          1.0 / brightPass.outputTexture.width;\n        return that._blurStep;\n      },\n      delta: function () {\n        return that._delta;\n      },\n      sigma: function () {\n        return that._sigma;\n      },\n      direction: 1.0,\n    },\n    textureScale: scale,\n    forcePowerOfTwo: true,\n  });\n\n  stages[4] = new _PostProcessStage_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    fragmentShader: _Shaders_PostProcessStages_PassThrough_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z,\n    sampleMode: _PostProcessStageSampleMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].LINEAR */ .Z.LINEAR,\n  });\n\n  this._uCenter = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n  this._uRadius = undefined;\n\n  stages[5] = new _PostProcessStage_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    fragmentShader: _Shaders_PostProcessStages_AdditiveBlend_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z,\n    uniforms: {\n      center: function () {\n        return that._uCenter;\n      },\n      radius: function () {\n        return that._uRadius;\n      },\n      colorTexture2: function () {\n        return that._sceneFramebuffer.getFramebuffer().getColorTexture(0);\n      },\n    },\n  });\n\n  this._stages = new _PostProcessStageComposite_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n    stages: stages,\n  });\n\n  var textureCache = new _PostProcessStageTextureCache_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(this);\n  var length = stages.length;\n  for (var i = 0; i < length; ++i) {\n    stages[i]._textureCache = textureCache;\n  }\n\n  this._textureCache = textureCache;\n  this.length = stages.length;\n}\n\nSunPostProcess.prototype.get = function (index) {\n  return this._stages.get(index);\n};\n\nSunPostProcess.prototype.getStageByName = function (name) {\n  var length = this._stages.length;\n  for (var i = 0; i < length; ++i) {\n    var stage = this._stages.get(i);\n    if (stage.name === name) {\n      return stage;\n    }\n  }\n  return undefined;\n};\n\nvar sunPositionECScratch = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar sunPositionWCScratch = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar sizeScratch = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar postProcessMatrix4Scratch = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n\nfunction updateSunPosition(postProcess, context, viewport) {\n  var us = context.uniformState;\n  var sunPosition = us.sunPositionWC;\n  var viewMatrix = us.view;\n  var viewProjectionMatrix = us.viewProjection;\n  var projectionMatrix = us.projection;\n\n  // create up sampled render state\n  var viewportTransformation = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].computeViewportTransformation */ .Z.computeViewportTransformation(\n    viewport,\n    0.0,\n    1.0,\n    postProcessMatrix4Scratch\n  );\n  var sunPositionEC = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(\n    viewMatrix,\n    sunPosition,\n    sunPositionECScratch\n  );\n  var sunPositionWC = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].pointToGLWindowCoordinates */ .Z.pointToGLWindowCoordinates(\n    viewProjectionMatrix,\n    viewportTransformation,\n    sunPosition,\n    sunPositionWCScratch\n  );\n\n  sunPositionEC.x += _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].SOLAR_RADIUS */ .Z.SOLAR_RADIUS;\n  var limbWC = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].pointToGLWindowCoordinates */ .Z.pointToGLWindowCoordinates(\n    projectionMatrix,\n    viewportTransformation,\n    sunPositionEC,\n    sunPositionEC\n  );\n  var sunSize =\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].magnitude */ .Z.magnitude(_Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(limbWC, sunPositionWC, limbWC)) *\n    30.0 *\n    2.0;\n\n  var size = sizeScratch;\n  size.x = sunSize;\n  size.y = sunSize;\n\n  postProcess._uCenter = _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(sunPositionWC, postProcess._uCenter);\n  postProcess._uRadius = Math.max(size.x, size.y) * 0.15;\n\n  var width = context.drawingBufferWidth;\n  var height = context.drawingBufferHeight;\n\n  var stages = postProcess._stages;\n  var firstStage = stages.get(0);\n\n  var downSampleWidth = firstStage.outputTexture.width;\n  var downSampleHeight = firstStage.outputTexture.height;\n\n  var downSampleViewport = new _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  downSampleViewport.width = downSampleWidth;\n  downSampleViewport.height = downSampleHeight;\n\n  // create down sampled render state\n  viewportTransformation = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].computeViewportTransformation */ .Z.computeViewportTransformation(\n    downSampleViewport,\n    0.0,\n    1.0,\n    postProcessMatrix4Scratch\n  );\n  sunPositionWC = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].pointToGLWindowCoordinates */ .Z.pointToGLWindowCoordinates(\n    viewProjectionMatrix,\n    viewportTransformation,\n    sunPosition,\n    sunPositionWCScratch\n  );\n\n  size.x *= downSampleWidth / width;\n  size.y *= downSampleHeight / height;\n\n  var scissorRectangle = firstStage.scissorRectangle;\n  scissorRectangle.x = Math.max(sunPositionWC.x - size.x * 0.5, 0.0);\n  scissorRectangle.y = Math.max(sunPositionWC.y - size.y * 0.5, 0.0);\n  scissorRectangle.width = Math.min(size.x, width);\n  scissorRectangle.height = Math.min(size.y, height);\n\n  for (var i = 1; i < 4; ++i) {\n    _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(scissorRectangle, stages.get(i).scissorRectangle);\n  }\n}\n\nSunPostProcess.prototype.clear = function (context, passState, clearColor) {\n  this._sceneFramebuffer.clear(context, passState, clearColor);\n  this._textureCache.clear(context);\n};\n\nSunPostProcess.prototype.update = function (passState) {\n  var context = passState.context;\n  var viewport = passState.viewport;\n\n  var sceneFramebuffer = this._sceneFramebuffer;\n  sceneFramebuffer.update(context, viewport);\n  var framebuffer = sceneFramebuffer.getFramebuffer();\n\n  this._textureCache.update(context);\n  this._stages.update(context, false);\n\n  updateSunPosition(this, context, viewport);\n\n  return framebuffer;\n};\n\nSunPostProcess.prototype.execute = function (context) {\n  var colorTexture = this._sceneFramebuffer.getFramebuffer().getColorTexture(0);\n  var stages = this._stages;\n  var length = stages.length;\n  stages.get(0).execute(context, colorTexture);\n  for (var i = 1; i < length; ++i) {\n    stages.get(i).execute(context, stages.get(i - 1).outputTexture);\n  }\n};\n\nSunPostProcess.prototype.copy = function (context, framebuffer) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(this._copyColorCommand)) {\n    var that = this;\n    this._copyColorCommand = context.createViewportQuadCommand(_Shaders_PostProcessStages_PassThrough_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {\n      uniformMap: {\n        colorTexture: function () {\n          return that._stages.get(that._stages.length - 1).outputTexture;\n        },\n      },\n      owner: this,\n    });\n  }\n\n  this._copyColorCommand.framebuffer = framebuffer;\n  this._copyColorCommand.execute(context);\n};\n\nSunPostProcess.prototype.isDestroyed = function () {\n  return false;\n};\n\nSunPostProcess.prototype.destroy = function () {\n  this._textureCache.destroy();\n  this._stages.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (SunPostProcess);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPLHNFQUFPO0FBQ2Q7QUFDQSwrREFBK0QsMkZBQVc7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkVBQWE7QUFDdEI7QUFDQSx5REFBZSxjQUFjLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvU3VuUG9zdFByb2Nlc3MuanM/NGE4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm91bmRpbmdSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvQm91bmRpbmdSZWN0YW5nbGUuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4yIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjIuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW40IGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjQuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBNYXRyaXg0IGZyb20gXCIuLi9Db3JlL01hdHJpeDQuanNcIjtcbmltcG9ydCBUcmFuc2Zvcm1zIGZyb20gXCIuLi9Db3JlL1RyYW5zZm9ybXMuanNcIjtcbmltcG9ydCBBZGRpdGl2ZUJsZW5kIGZyb20gXCIuLi9TaGFkZXJzL1Bvc3RQcm9jZXNzU3RhZ2VzL0FkZGl0aXZlQmxlbmQuanNcIjtcbmltcG9ydCBCcmlnaHRQYXNzIGZyb20gXCIuLi9TaGFkZXJzL1Bvc3RQcm9jZXNzU3RhZ2VzL0JyaWdodFBhc3MuanNcIjtcbmltcG9ydCBHYXVzc2lhbkJsdXIxRCBmcm9tIFwiLi4vU2hhZGVycy9Qb3N0UHJvY2Vzc1N0YWdlcy9HYXVzc2lhbkJsdXIxRC5qc1wiO1xuaW1wb3J0IFBhc3NUaHJvdWdoIGZyb20gXCIuLi9TaGFkZXJzL1Bvc3RQcm9jZXNzU3RhZ2VzL1Bhc3NUaHJvdWdoLmpzXCI7XG5pbXBvcnQgUG9zdFByb2Nlc3NTdGFnZSBmcm9tIFwiLi9Qb3N0UHJvY2Vzc1N0YWdlLmpzXCI7XG5pbXBvcnQgUG9zdFByb2Nlc3NTdGFnZUNvbXBvc2l0ZSBmcm9tIFwiLi9Qb3N0UHJvY2Vzc1N0YWdlQ29tcG9zaXRlLmpzXCI7XG5pbXBvcnQgUG9zdFByb2Nlc3NTdGFnZVNhbXBsZU1vZGUgZnJvbSBcIi4vUG9zdFByb2Nlc3NTdGFnZVNhbXBsZU1vZGUuanNcIjtcbmltcG9ydCBQb3N0UHJvY2Vzc1N0YWdlVGV4dHVyZUNhY2hlIGZyb20gXCIuL1Bvc3RQcm9jZXNzU3RhZ2VUZXh0dXJlQ2FjaGUuanNcIjtcbmltcG9ydCBTY2VuZUZyYW1lYnVmZmVyIGZyb20gXCIuL1NjZW5lRnJhbWVidWZmZXIuanNcIjtcblxuZnVuY3Rpb24gU3VuUG9zdFByb2Nlc3MoKSB7XG4gIHRoaXMuX3NjZW5lRnJhbWVidWZmZXIgPSBuZXcgU2NlbmVGcmFtZWJ1ZmZlcigpO1xuXG4gIHZhciBzY2FsZSA9IDAuMTI1O1xuICB2YXIgc3RhZ2VzID0gbmV3IEFycmF5KDYpO1xuXG4gIHN0YWdlc1swXSA9IG5ldyBQb3N0UHJvY2Vzc1N0YWdlKHtcbiAgICBmcmFnbWVudFNoYWRlcjogUGFzc1Rocm91Z2gsXG4gICAgdGV4dHVyZVNjYWxlOiBzY2FsZSxcbiAgICBmb3JjZVBvd2VyT2ZUd286IHRydWUsXG4gICAgc2FtcGxlTW9kZTogUG9zdFByb2Nlc3NTdGFnZVNhbXBsZU1vZGUuTElORUFSLFxuICB9KTtcblxuICB2YXIgYnJpZ2h0UGFzcyA9IChzdGFnZXNbMV0gPSBuZXcgUG9zdFByb2Nlc3NTdGFnZSh7XG4gICAgZnJhZ21lbnRTaGFkZXI6IEJyaWdodFBhc3MsXG4gICAgdW5pZm9ybXM6IHtcbiAgICAgIGF2Z0x1bWluYW5jZTogMC41LCAvLyBBIGd1ZXNzIGF0IHRoZSBhdmVyYWdlIGx1bWluYW5jZSBhY3Jvc3MgdGhlIGVudGlyZSBzY2VuZVxuICAgICAgdGhyZXNob2xkOiAwLjI1LFxuICAgICAgb2Zmc2V0OiAwLjEsXG4gICAgfSxcbiAgICB0ZXh0dXJlU2NhbGU6IHNjYWxlLFxuICAgIGZvcmNlUG93ZXJPZlR3bzogdHJ1ZSxcbiAgfSkpO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdGhpcy5fZGVsdGEgPSAxLjA7XG4gIHRoaXMuX3NpZ21hID0gMi4wO1xuICB0aGlzLl9ibHVyU3RlcCA9IG5ldyBDYXJ0ZXNpYW4yKCk7XG5cbiAgc3RhZ2VzWzJdID0gbmV3IFBvc3RQcm9jZXNzU3RhZ2Uoe1xuICAgIGZyYWdtZW50U2hhZGVyOiBHYXVzc2lhbkJsdXIxRCxcbiAgICB1bmlmb3Jtczoge1xuICAgICAgc3RlcDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0Ll9ibHVyU3RlcC54ID0gdGhhdC5fYmx1clN0ZXAueSA9XG4gICAgICAgICAgMS4wIC8gYnJpZ2h0UGFzcy5vdXRwdXRUZXh0dXJlLndpZHRoO1xuICAgICAgICByZXR1cm4gdGhhdC5fYmx1clN0ZXA7XG4gICAgICB9LFxuICAgICAgZGVsdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQuX2RlbHRhO1xuICAgICAgfSxcbiAgICAgIHNpZ21hOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGF0Ll9zaWdtYTtcbiAgICAgIH0sXG4gICAgICBkaXJlY3Rpb246IDAuMCxcbiAgICB9LFxuICAgIHRleHR1cmVTY2FsZTogc2NhbGUsXG4gICAgZm9yY2VQb3dlck9mVHdvOiB0cnVlLFxuICB9KTtcblxuICBzdGFnZXNbM10gPSBuZXcgUG9zdFByb2Nlc3NTdGFnZSh7XG4gICAgZnJhZ21lbnRTaGFkZXI6IEdhdXNzaWFuQmx1cjFELFxuICAgIHVuaWZvcm1zOiB7XG4gICAgICBzdGVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoYXQuX2JsdXJTdGVwLnggPSB0aGF0Ll9ibHVyU3RlcC55ID1cbiAgICAgICAgICAxLjAgLyBicmlnaHRQYXNzLm91dHB1dFRleHR1cmUud2lkdGg7XG4gICAgICAgIHJldHVybiB0aGF0Ll9ibHVyU3RlcDtcbiAgICAgIH0sXG4gICAgICBkZWx0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhhdC5fZGVsdGE7XG4gICAgICB9LFxuICAgICAgc2lnbWE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQuX3NpZ21hO1xuICAgICAgfSxcbiAgICAgIGRpcmVjdGlvbjogMS4wLFxuICAgIH0sXG4gICAgdGV4dHVyZVNjYWxlOiBzY2FsZSxcbiAgICBmb3JjZVBvd2VyT2ZUd286IHRydWUsXG4gIH0pO1xuXG4gIHN0YWdlc1s0XSA9IG5ldyBQb3N0UHJvY2Vzc1N0YWdlKHtcbiAgICBmcmFnbWVudFNoYWRlcjogUGFzc1Rocm91Z2gsXG4gICAgc2FtcGxlTW9kZTogUG9zdFByb2Nlc3NTdGFnZVNhbXBsZU1vZGUuTElORUFSLFxuICB9KTtcblxuICB0aGlzLl91Q2VudGVyID0gbmV3IENhcnRlc2lhbjIoKTtcbiAgdGhpcy5fdVJhZGl1cyA9IHVuZGVmaW5lZDtcblxuICBzdGFnZXNbNV0gPSBuZXcgUG9zdFByb2Nlc3NTdGFnZSh7XG4gICAgZnJhZ21lbnRTaGFkZXI6IEFkZGl0aXZlQmxlbmQsXG4gICAgdW5pZm9ybXM6IHtcbiAgICAgIGNlbnRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhhdC5fdUNlbnRlcjtcbiAgICAgIH0sXG4gICAgICByYWRpdXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQuX3VSYWRpdXM7XG4gICAgICB9LFxuICAgICAgY29sb3JUZXh0dXJlMjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhhdC5fc2NlbmVGcmFtZWJ1ZmZlci5nZXRGcmFtZWJ1ZmZlcigpLmdldENvbG9yVGV4dHVyZSgwKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgdGhpcy5fc3RhZ2VzID0gbmV3IFBvc3RQcm9jZXNzU3RhZ2VDb21wb3NpdGUoe1xuICAgIHN0YWdlczogc3RhZ2VzLFxuICB9KTtcblxuICB2YXIgdGV4dHVyZUNhY2hlID0gbmV3IFBvc3RQcm9jZXNzU3RhZ2VUZXh0dXJlQ2FjaGUodGhpcyk7XG4gIHZhciBsZW5ndGggPSBzdGFnZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgc3RhZ2VzW2ldLl90ZXh0dXJlQ2FjaGUgPSB0ZXh0dXJlQ2FjaGU7XG4gIH1cblxuICB0aGlzLl90ZXh0dXJlQ2FjaGUgPSB0ZXh0dXJlQ2FjaGU7XG4gIHRoaXMubGVuZ3RoID0gc3RhZ2VzLmxlbmd0aDtcbn1cblxuU3VuUG9zdFByb2Nlc3MucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICByZXR1cm4gdGhpcy5fc3RhZ2VzLmdldChpbmRleCk7XG59O1xuXG5TdW5Qb3N0UHJvY2Vzcy5wcm90b3R5cGUuZ2V0U3RhZ2VCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5fc3RhZ2VzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBzdGFnZSA9IHRoaXMuX3N0YWdlcy5nZXQoaSk7XG4gICAgaWYgKHN0YWdlLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgIHJldHVybiBzdGFnZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbnZhciBzdW5Qb3NpdGlvbkVDU2NyYXRjaCA9IG5ldyBDYXJ0ZXNpYW40KCk7XG52YXIgc3VuUG9zaXRpb25XQ1NjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMigpO1xudmFyIHNpemVTY3JhdGNoID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciBwb3N0UHJvY2Vzc01hdHJpeDRTY3JhdGNoID0gbmV3IE1hdHJpeDQoKTtcblxuZnVuY3Rpb24gdXBkYXRlU3VuUG9zaXRpb24ocG9zdFByb2Nlc3MsIGNvbnRleHQsIHZpZXdwb3J0KSB7XG4gIHZhciB1cyA9IGNvbnRleHQudW5pZm9ybVN0YXRlO1xuICB2YXIgc3VuUG9zaXRpb24gPSB1cy5zdW5Qb3NpdGlvbldDO1xuICB2YXIgdmlld01hdHJpeCA9IHVzLnZpZXc7XG4gIHZhciB2aWV3UHJvamVjdGlvbk1hdHJpeCA9IHVzLnZpZXdQcm9qZWN0aW9uO1xuICB2YXIgcHJvamVjdGlvbk1hdHJpeCA9IHVzLnByb2plY3Rpb247XG5cbiAgLy8gY3JlYXRlIHVwIHNhbXBsZWQgcmVuZGVyIHN0YXRlXG4gIHZhciB2aWV3cG9ydFRyYW5zZm9ybWF0aW9uID0gTWF0cml4NC5jb21wdXRlVmlld3BvcnRUcmFuc2Zvcm1hdGlvbihcbiAgICB2aWV3cG9ydCxcbiAgICAwLjAsXG4gICAgMS4wLFxuICAgIHBvc3RQcm9jZXNzTWF0cml4NFNjcmF0Y2hcbiAgKTtcbiAgdmFyIHN1blBvc2l0aW9uRUMgPSBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludChcbiAgICB2aWV3TWF0cml4LFxuICAgIHN1blBvc2l0aW9uLFxuICAgIHN1blBvc2l0aW9uRUNTY3JhdGNoXG4gICk7XG4gIHZhciBzdW5Qb3NpdGlvbldDID0gVHJhbnNmb3Jtcy5wb2ludFRvR0xXaW5kb3dDb29yZGluYXRlcyhcbiAgICB2aWV3UHJvamVjdGlvbk1hdHJpeCxcbiAgICB2aWV3cG9ydFRyYW5zZm9ybWF0aW9uLFxuICAgIHN1blBvc2l0aW9uLFxuICAgIHN1blBvc2l0aW9uV0NTY3JhdGNoXG4gICk7XG5cbiAgc3VuUG9zaXRpb25FQy54ICs9IENlc2l1bU1hdGguU09MQVJfUkFESVVTO1xuICB2YXIgbGltYldDID0gVHJhbnNmb3Jtcy5wb2ludFRvR0xXaW5kb3dDb29yZGluYXRlcyhcbiAgICBwcm9qZWN0aW9uTWF0cml4LFxuICAgIHZpZXdwb3J0VHJhbnNmb3JtYXRpb24sXG4gICAgc3VuUG9zaXRpb25FQyxcbiAgICBzdW5Qb3NpdGlvbkVDXG4gICk7XG4gIHZhciBzdW5TaXplID1cbiAgICBDYXJ0ZXNpYW4yLm1hZ25pdHVkZShDYXJ0ZXNpYW4yLnN1YnRyYWN0KGxpbWJXQywgc3VuUG9zaXRpb25XQywgbGltYldDKSkgKlxuICAgIDMwLjAgKlxuICAgIDIuMDtcblxuICB2YXIgc2l6ZSA9IHNpemVTY3JhdGNoO1xuICBzaXplLnggPSBzdW5TaXplO1xuICBzaXplLnkgPSBzdW5TaXplO1xuXG4gIHBvc3RQcm9jZXNzLl91Q2VudGVyID0gQ2FydGVzaWFuMi5jbG9uZShzdW5Qb3NpdGlvbldDLCBwb3N0UHJvY2Vzcy5fdUNlbnRlcik7XG4gIHBvc3RQcm9jZXNzLl91UmFkaXVzID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnkpICogMC4xNTtcblxuICB2YXIgd2lkdGggPSBjb250ZXh0LmRyYXdpbmdCdWZmZXJXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGNvbnRleHQuZHJhd2luZ0J1ZmZlckhlaWdodDtcblxuICB2YXIgc3RhZ2VzID0gcG9zdFByb2Nlc3MuX3N0YWdlcztcbiAgdmFyIGZpcnN0U3RhZ2UgPSBzdGFnZXMuZ2V0KDApO1xuXG4gIHZhciBkb3duU2FtcGxlV2lkdGggPSBmaXJzdFN0YWdlLm91dHB1dFRleHR1cmUud2lkdGg7XG4gIHZhciBkb3duU2FtcGxlSGVpZ2h0ID0gZmlyc3RTdGFnZS5vdXRwdXRUZXh0dXJlLmhlaWdodDtcblxuICB2YXIgZG93blNhbXBsZVZpZXdwb3J0ID0gbmV3IEJvdW5kaW5nUmVjdGFuZ2xlKCk7XG4gIGRvd25TYW1wbGVWaWV3cG9ydC53aWR0aCA9IGRvd25TYW1wbGVXaWR0aDtcbiAgZG93blNhbXBsZVZpZXdwb3J0LmhlaWdodCA9IGRvd25TYW1wbGVIZWlnaHQ7XG5cbiAgLy8gY3JlYXRlIGRvd24gc2FtcGxlZCByZW5kZXIgc3RhdGVcbiAgdmlld3BvcnRUcmFuc2Zvcm1hdGlvbiA9IE1hdHJpeDQuY29tcHV0ZVZpZXdwb3J0VHJhbnNmb3JtYXRpb24oXG4gICAgZG93blNhbXBsZVZpZXdwb3J0LFxuICAgIDAuMCxcbiAgICAxLjAsXG4gICAgcG9zdFByb2Nlc3NNYXRyaXg0U2NyYXRjaFxuICApO1xuICBzdW5Qb3NpdGlvbldDID0gVHJhbnNmb3Jtcy5wb2ludFRvR0xXaW5kb3dDb29yZGluYXRlcyhcbiAgICB2aWV3UHJvamVjdGlvbk1hdHJpeCxcbiAgICB2aWV3cG9ydFRyYW5zZm9ybWF0aW9uLFxuICAgIHN1blBvc2l0aW9uLFxuICAgIHN1blBvc2l0aW9uV0NTY3JhdGNoXG4gICk7XG5cbiAgc2l6ZS54ICo9IGRvd25TYW1wbGVXaWR0aCAvIHdpZHRoO1xuICBzaXplLnkgKj0gZG93blNhbXBsZUhlaWdodCAvIGhlaWdodDtcblxuICB2YXIgc2Npc3NvclJlY3RhbmdsZSA9IGZpcnN0U3RhZ2Uuc2Npc3NvclJlY3RhbmdsZTtcbiAgc2Npc3NvclJlY3RhbmdsZS54ID0gTWF0aC5tYXgoc3VuUG9zaXRpb25XQy54IC0gc2l6ZS54ICogMC41LCAwLjApO1xuICBzY2lzc29yUmVjdGFuZ2xlLnkgPSBNYXRoLm1heChzdW5Qb3NpdGlvbldDLnkgLSBzaXplLnkgKiAwLjUsIDAuMCk7XG4gIHNjaXNzb3JSZWN0YW5nbGUud2lkdGggPSBNYXRoLm1pbihzaXplLngsIHdpZHRoKTtcbiAgc2Npc3NvclJlY3RhbmdsZS5oZWlnaHQgPSBNYXRoLm1pbihzaXplLnksIGhlaWdodCk7XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCA0OyArK2kpIHtcbiAgICBCb3VuZGluZ1JlY3RhbmdsZS5jbG9uZShzY2lzc29yUmVjdGFuZ2xlLCBzdGFnZXMuZ2V0KGkpLnNjaXNzb3JSZWN0YW5nbGUpO1xuICB9XG59XG5cblN1blBvc3RQcm9jZXNzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIChjb250ZXh0LCBwYXNzU3RhdGUsIGNsZWFyQ29sb3IpIHtcbiAgdGhpcy5fc2NlbmVGcmFtZWJ1ZmZlci5jbGVhcihjb250ZXh0LCBwYXNzU3RhdGUsIGNsZWFyQ29sb3IpO1xuICB0aGlzLl90ZXh0dXJlQ2FjaGUuY2xlYXIoY29udGV4dCk7XG59O1xuXG5TdW5Qb3N0UHJvY2Vzcy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHBhc3NTdGF0ZSkge1xuICB2YXIgY29udGV4dCA9IHBhc3NTdGF0ZS5jb250ZXh0O1xuICB2YXIgdmlld3BvcnQgPSBwYXNzU3RhdGUudmlld3BvcnQ7XG5cbiAgdmFyIHNjZW5lRnJhbWVidWZmZXIgPSB0aGlzLl9zY2VuZUZyYW1lYnVmZmVyO1xuICBzY2VuZUZyYW1lYnVmZmVyLnVwZGF0ZShjb250ZXh0LCB2aWV3cG9ydCk7XG4gIHZhciBmcmFtZWJ1ZmZlciA9IHNjZW5lRnJhbWVidWZmZXIuZ2V0RnJhbWVidWZmZXIoKTtcblxuICB0aGlzLl90ZXh0dXJlQ2FjaGUudXBkYXRlKGNvbnRleHQpO1xuICB0aGlzLl9zdGFnZXMudXBkYXRlKGNvbnRleHQsIGZhbHNlKTtcblxuICB1cGRhdGVTdW5Qb3NpdGlvbih0aGlzLCBjb250ZXh0LCB2aWV3cG9ydCk7XG5cbiAgcmV0dXJuIGZyYW1lYnVmZmVyO1xufTtcblxuU3VuUG9zdFByb2Nlc3MucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICB2YXIgY29sb3JUZXh0dXJlID0gdGhpcy5fc2NlbmVGcmFtZWJ1ZmZlci5nZXRGcmFtZWJ1ZmZlcigpLmdldENvbG9yVGV4dHVyZSgwKTtcbiAgdmFyIHN0YWdlcyA9IHRoaXMuX3N0YWdlcztcbiAgdmFyIGxlbmd0aCA9IHN0YWdlcy5sZW5ndGg7XG4gIHN0YWdlcy5nZXQoMCkuZXhlY3V0ZShjb250ZXh0LCBjb2xvclRleHR1cmUpO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgc3RhZ2VzLmdldChpKS5leGVjdXRlKGNvbnRleHQsIHN0YWdlcy5nZXQoaSAtIDEpLm91dHB1dFRleHR1cmUpO1xuICB9XG59O1xuXG5TdW5Qb3N0UHJvY2Vzcy5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChjb250ZXh0LCBmcmFtZWJ1ZmZlcikge1xuICBpZiAoIWRlZmluZWQodGhpcy5fY29weUNvbG9yQ29tbWFuZCkpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5fY29weUNvbG9yQ29tbWFuZCA9IGNvbnRleHQuY3JlYXRlVmlld3BvcnRRdWFkQ29tbWFuZChQYXNzVGhyb3VnaCwge1xuICAgICAgdW5pZm9ybU1hcDoge1xuICAgICAgICBjb2xvclRleHR1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gdGhhdC5fc3RhZ2VzLmdldCh0aGF0Ll9zdGFnZXMubGVuZ3RoIC0gMSkub3V0cHV0VGV4dHVyZTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBvd25lcjogdGhpcyxcbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuX2NvcHlDb2xvckNvbW1hbmQuZnJhbWVidWZmZXIgPSBmcmFtZWJ1ZmZlcjtcbiAgdGhpcy5fY29weUNvbG9yQ29tbWFuZC5leGVjdXRlKGNvbnRleHQpO1xufTtcblxuU3VuUG9zdFByb2Nlc3MucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG5TdW5Qb3N0UHJvY2Vzcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fdGV4dHVyZUNhY2hlLmRlc3Ryb3koKTtcbiAgdGhpcy5fc3RhZ2VzLmRlc3Ryb3koKTtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgU3VuUG9zdFByb2Nlc3M7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///80480\n')},70922:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ SupportedImageFormats; }\n/* harmony export */ });\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n\n\n/**\n * Image formats supported by the browser.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Boolean} [options.webp=false] Whether the browser supports WebP images.\n * @param {Boolean} [options.basis=false] Whether the browser supports compressed textures required to view KTX2 + Basis Universal images.\n *\n * @private\n */\nfunction SupportedImageFormats(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  this.webp = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options.webp, false);\n  this.basis = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options.basis, false);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzA5MjIuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFtRDs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ2U7QUFDZixZQUFZLDBFQUFZLFVBQVUsZ0dBQXlCO0FBQzNELGNBQWMsMEVBQVk7QUFDMUIsZUFBZSwwRUFBWTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9TdXBwb3J0ZWRJbWFnZUZvcm1hdHMuanM/ZGRiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuXG4vKipcbiAqIEltYWdlIGZvcm1hdHMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy53ZWJwPWZhbHNlXSBXaGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIFdlYlAgaW1hZ2VzLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5iYXNpcz1mYWxzZV0gV2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyBjb21wcmVzc2VkIHRleHR1cmVzIHJlcXVpcmVkIHRvIHZpZXcgS1RYMiArIEJhc2lzIFVuaXZlcnNhbCBpbWFnZXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3VwcG9ydGVkSW1hZ2VGb3JtYXRzKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdGhpcy53ZWJwID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMud2VicCwgZmFsc2UpO1xuICB0aGlzLmJhc2lzID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuYmFzaXMsIGZhbHNlKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///70922\n')},11590:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52323);\n/* harmony import */ var _Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(377);\n/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63367);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(51688);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12572);\n/* harmony import */ var _Core_HeightmapTerrainData_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(57134);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(99417);\n/* harmony import */ var _Core_OrientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(25405);\n/* harmony import */ var _Core_Queue_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(79120);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(96190);\n/* harmony import */ var _Core_TerrainEncoding_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(41782);\n/* harmony import */ var _Core_TerrainMesh_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(13758);\n/* harmony import */ var _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(41534);\n/* harmony import */ var _Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(79962);\n/* harmony import */ var _GlobeSurfaceTile_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(14648);\n/* harmony import */ var _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(37728);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction TerrainFillMesh(tile) {\n  this.tile = tile;\n  this.frameLastUpdated = undefined;\n  this.westMeshes = []; // north to south (CCW)\n  this.westTiles = [];\n  this.southMeshes = []; // west to east (CCW)\n  this.southTiles = [];\n  this.eastMeshes = []; // south to north (CCW)\n  this.eastTiles = [];\n  this.northMeshes = []; // east to west (CCW)\n  this.northTiles = [];\n  this.southwestMesh = undefined;\n  this.southwestTile = undefined;\n  this.southeastMesh = undefined;\n  this.southeastTile = undefined;\n  this.northwestMesh = undefined;\n  this.northwestTile = undefined;\n  this.northeastMesh = undefined;\n  this.northeastTile = undefined;\n  this.changedThisFrame = true;\n  this.visitedFrame = undefined;\n  this.enqueuedFrame = undefined;\n  this.mesh = undefined;\n  this.vertexArray = undefined;\n  this.waterMaskTexture = undefined;\n  this.waterMaskTranslationAndScale = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n}\n\nTerrainFillMesh.prototype.update = function (\n  tileProvider,\n  frameState,\n  vertexArraysToDestroy\n) {\n  if (this.changedThisFrame) {\n    createFillMesh(tileProvider, frameState, this.tile, vertexArraysToDestroy);\n    this.changedThisFrame = false;\n  }\n};\n\nTerrainFillMesh.prototype.destroy = function (vertexArraysToDestroy) {\n  this._destroyVertexArray(vertexArraysToDestroy);\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(this.waterMaskTexture)) {\n    --this.waterMaskTexture.referenceCount;\n    if (this.waterMaskTexture.referenceCount === 0) {\n      this.waterMaskTexture.destroy();\n    }\n    this.waterMaskTexture = undefined;\n  }\n\n  return undefined;\n};\n\nTerrainFillMesh.prototype._destroyVertexArray = function (\n  vertexArraysToDestroy\n) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(this.vertexArray)) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(vertexArraysToDestroy)) {\n      vertexArraysToDestroy.push(this.vertexArray);\n    } else {\n      _GlobeSurfaceTile_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"]._freeVertexArray */ .Z._freeVertexArray(this.vertexArray);\n    }\n    this.vertexArray = undefined;\n  }\n};\n\nvar traversalQueueScratch = new _Core_Queue_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z();\n\nTerrainFillMesh.updateFillTiles = function (\n  tileProvider,\n  renderedTiles,\n  frameState,\n  vertexArraysToDestroy\n) {\n  // We want our fill tiles to look natural, which means they should align perfectly with\n  // adjacent loaded tiles, and their edges that are not adjacent to loaded tiles should have\n  // sensible heights (e.g. the average of the heights of loaded edges). Some fill tiles may\n  // be adjacent only to other fill tiles, and in that case heights should be assigned fanning\n  // outward from the loaded tiles so that there are no sudden changes in height.\n\n  // We do this with a breadth-first traversal of the rendered tiles, starting with the loaded\n  // ones. Graph nodes are tiles and graph edges connect to other rendered tiles that are spatially adjacent\n  // to those tiles. As we visit each node, we propagate tile edges to adjacent tiles. If there\'s no data\n  // for a tile edge,  we create an edge with an average height and then propagate it. If an edge is partially defined\n  // (e.g. an edge is adjacent to multiple more-detailed tiles and only some of them are loaded), we\n  // fill in the rest of the edge with the same height.\n  var quadtree = tileProvider._quadtree;\n  var levelZeroTiles = quadtree._levelZeroTiles;\n  var lastSelectionFrameNumber = quadtree._lastSelectionFrameNumber;\n\n  var traversalQueue = traversalQueueScratch;\n  traversalQueue.clear();\n\n  // Add the tiles with real geometry to the traversal queue.\n  for (var i = 0; i < renderedTiles.length; ++i) {\n    var renderedTile = renderedTiles[i];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(renderedTile.data.vertexArray)) {\n      traversalQueue.enqueue(renderedTiles[i]);\n    }\n  }\n\n  var tile = traversalQueue.dequeue();\n\n  while (tile !== undefined) {\n    var tileToWest = tile.findTileToWest(levelZeroTiles);\n    var tileToSouth = tile.findTileToSouth(levelZeroTiles);\n    var tileToEast = tile.findTileToEast(levelZeroTiles);\n    var tileToNorth = tile.findTileToNorth(levelZeroTiles);\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToWest,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToSouth,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToEast,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToNorth,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n\n    var tileToNorthwest = tileToWest.findTileToNorth(levelZeroTiles);\n    var tileToSouthwest = tileToWest.findTileToSouth(levelZeroTiles);\n    var tileToNortheast = tileToEast.findTileToNorth(levelZeroTiles);\n    var tileToSoutheast = tileToEast.findTileToSouth(levelZeroTiles);\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToNorthwest,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHEAST */ .Z.SOUTHEAST,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToNortheast,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHWEST */ .Z.SOUTHWEST,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToSouthwest,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHEAST */ .Z.NORTHEAST,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n    visitRenderedTiles(\n      tileProvider,\n      frameState,\n      tile,\n      tileToSoutheast,\n      lastSelectionFrameNumber,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHWEST */ .Z.NORTHWEST,\n      false,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n\n    tile = traversalQueue.dequeue();\n  }\n};\n\nfunction visitRenderedTiles(\n  tileProvider,\n  frameState,\n  sourceTile,\n  startTile,\n  currentFrameNumber,\n  tileEdge,\n  downOnly,\n  traversalQueue,\n  vertexArraysToDestroy\n) {\n  if (startTile === undefined) {\n    // There are no tiles North or South of the poles.\n    return;\n  }\n\n  var tile = startTile;\n  while (\n    tile &&\n    (tile._lastSelectionResultFrame !== currentFrameNumber ||\n      _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].wasKicked */ .Z.wasKicked(tile._lastSelectionResult) ||\n      _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].originalResult */ .Z.originalResult(tile._lastSelectionResult) ===\n        _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED */ .Z.CULLED)\n  ) {\n    // This tile wasn\'t visited or it was visited and then kicked, so walk up to find the closest ancestor that was rendered.\n    // We also walk up if the tile was culled, because if siblings were kicked an ancestor may have been rendered.\n    if (downOnly) {\n      return;\n    }\n\n    var parent = tile.parent;\n    if (tileEdge >= _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHWEST */ .Z.NORTHWEST && parent !== undefined) {\n      // When we\'re looking for a corner, verify that the parent tile is still relevant.\n      // That is, the parent and child must share the corner in question.\n      switch (tileEdge) {\n        case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHWEST */ .Z.NORTHWEST:\n          tile = tile === parent.northwestChild ? parent : undefined;\n          break;\n        case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHEAST */ .Z.NORTHEAST:\n          tile = tile === parent.northeastChild ? parent : undefined;\n          break;\n        case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHWEST */ .Z.SOUTHWEST:\n          tile = tile === parent.southwestChild ? parent : undefined;\n          break;\n        case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHEAST */ .Z.SOUTHEAST:\n          tile = tile === parent.southeastChild ? parent : undefined;\n          break;\n      }\n    } else {\n      tile = parent;\n    }\n  }\n\n  if (tile === undefined) {\n    return;\n  }\n\n  if (tile._lastSelectionResult === _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].RENDERED */ .Z.RENDERED) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile.data.vertexArray)) {\n      // No further processing necessary for renderable tiles.\n      return;\n    }\n    visitTile(\n      tileProvider,\n      frameState,\n      sourceTile,\n      tile,\n      tileEdge,\n      currentFrameNumber,\n      traversalQueue,\n      vertexArraysToDestroy\n    );\n    return;\n  }\n\n  if (\n    _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].originalResult */ .Z.originalResult(startTile._lastSelectionResult) ===\n    _TileSelectionResult_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].CULLED */ .Z.CULLED\n  ) {\n    return;\n  }\n\n  // This tile was refined, so find rendered children, if any.\n  // Visit the tiles in counter-clockwise order.\n  switch (tileEdge) {\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.northwestChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.southwestChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.southeastChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.northeastChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.southwestChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.southeastChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.northeastChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.northwestChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHWEST */ .Z.NORTHWEST:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.northwestChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHEAST */ .Z.NORTHEAST:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.northeastChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHWEST */ .Z.SOUTHWEST:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.southwestChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHEAST */ .Z.SOUTHEAST:\n      visitRenderedTiles(\n        tileProvider,\n        frameState,\n        sourceTile,\n        startTile.southeastChild,\n        currentFrameNumber,\n        tileEdge,\n        true,\n        traversalQueue,\n        vertexArraysToDestroy\n      );\n      break;\n    default:\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z("Invalid edge");\n  }\n}\n\nfunction visitTile(\n  tileProvider,\n  frameState,\n  sourceTile,\n  destinationTile,\n  tileEdge,\n  frameNumber,\n  traversalQueue,\n  vertexArraysToDestroy\n) {\n  var destinationSurfaceTile = destinationTile.data;\n\n  if (destinationSurfaceTile.fill === undefined) {\n    destinationSurfaceTile.fill = new TerrainFillMesh(destinationTile);\n  } else if (destinationSurfaceTile.fill.visitedFrame === frameNumber) {\n    // Don\'t propagate edges to tiles that have already been visited this frame.\n    return;\n  }\n\n  if (destinationSurfaceTile.fill.enqueuedFrame !== frameNumber) {\n    // First time visiting this tile this frame, add it to the traversal queue.\n    destinationSurfaceTile.fill.enqueuedFrame = frameNumber;\n    destinationSurfaceTile.fill.changedThisFrame = false;\n    traversalQueue.enqueue(destinationTile);\n  }\n\n  propagateEdge(\n    tileProvider,\n    frameState,\n    sourceTile,\n    destinationTile,\n    tileEdge,\n    vertexArraysToDestroy\n  );\n}\n\nfunction propagateEdge(\n  tileProvider,\n  frameState,\n  sourceTile,\n  destinationTile,\n  tileEdge,\n  vertexArraysToDestroy\n) {\n  var destinationFill = destinationTile.data.fill;\n\n  var sourceMesh;\n  var sourceFill = sourceTile.data.fill;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(sourceFill)) {\n    sourceFill.visitedFrame = frameState.frameNumber;\n\n    // Source is a fill, create/update it if necessary.\n    if (sourceFill.changedThisFrame) {\n      createFillMesh(\n        tileProvider,\n        frameState,\n        sourceTile,\n        vertexArraysToDestroy\n      );\n      sourceFill.changedThisFrame = false;\n    }\n    sourceMesh = sourceTile.data.fill.mesh;\n  } else {\n    sourceMesh = sourceTile.data.mesh;\n  }\n\n  var edgeMeshes;\n  var edgeTiles;\n\n  switch (tileEdge) {\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST:\n      edgeMeshes = destinationFill.westMeshes;\n      edgeTiles = destinationFill.westTiles;\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH:\n      edgeMeshes = destinationFill.southMeshes;\n      edgeTiles = destinationFill.southTiles;\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST:\n      edgeMeshes = destinationFill.eastMeshes;\n      edgeTiles = destinationFill.eastTiles;\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH:\n      edgeMeshes = destinationFill.northMeshes;\n      edgeTiles = destinationFill.northTiles;\n      break;\n    // Corners are simpler.\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHWEST */ .Z.NORTHWEST:\n      destinationFill.changedThisFrame =\n        destinationFill.changedThisFrame ||\n        destinationFill.northwestMesh !== sourceMesh;\n      destinationFill.northwestMesh = sourceMesh;\n      destinationFill.northwestTile = sourceTile;\n      return;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTHEAST */ .Z.NORTHEAST:\n      destinationFill.changedThisFrame =\n        destinationFill.changedThisFrame ||\n        destinationFill.northeastMesh !== sourceMesh;\n      destinationFill.northeastMesh = sourceMesh;\n      destinationFill.northeastTile = sourceTile;\n      return;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHWEST */ .Z.SOUTHWEST:\n      destinationFill.changedThisFrame =\n        destinationFill.changedThisFrame ||\n        destinationFill.southwestMesh !== sourceMesh;\n      destinationFill.southwestMesh = sourceMesh;\n      destinationFill.southwestTile = sourceTile;\n      return;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTHEAST */ .Z.SOUTHEAST:\n      destinationFill.changedThisFrame =\n        destinationFill.changedThisFrame ||\n        destinationFill.southeastMesh !== sourceMesh;\n      destinationFill.southeastMesh = sourceMesh;\n      destinationFill.southeastTile = sourceTile;\n      return;\n  }\n\n  if (sourceTile.level <= destinationTile.level) {\n    // Source edge completely spans the destination edge.\n    destinationFill.changedThisFrame =\n      destinationFill.changedThisFrame ||\n      edgeMeshes[0] !== sourceMesh ||\n      edgeMeshes.length !== 1;\n    edgeMeshes[0] = sourceMesh;\n    edgeTiles[0] = sourceTile;\n    edgeMeshes.length = 1;\n    edgeTiles.length = 1;\n    return;\n  }\n\n  // Source edge is a subset of the destination edge.\n  // Figure out the range of meshes we\'re replacing.\n  var startIndex, endIndex, existingTile, existingRectangle;\n  var sourceRectangle = sourceTile.rectangle;\n\n  var epsilon;\n  var destinationRectangle = destinationTile.rectangle;\n\n  switch (tileEdge) {\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST:\n      epsilon =\n        (destinationRectangle.north - destinationRectangle.south) *\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5;\n\n      for (startIndex = 0; startIndex < edgeTiles.length; ++startIndex) {\n        existingTile = edgeTiles[startIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].greaterThan */ .Z.greaterThan(\n            sourceRectangle.north,\n            existingRectangle.south,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      for (endIndex = startIndex; endIndex < edgeTiles.length; ++endIndex) {\n        existingTile = edgeTiles[endIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].greaterThanOrEquals */ .Z.greaterThanOrEquals(\n            sourceRectangle.south,\n            existingRectangle.north,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH:\n      epsilon =\n        (destinationRectangle.east - destinationRectangle.west) *\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5;\n\n      for (startIndex = 0; startIndex < edgeTiles.length; ++startIndex) {\n        existingTile = edgeTiles[startIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lessThan */ .Z.lessThan(\n            sourceRectangle.west,\n            existingRectangle.east,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      for (endIndex = startIndex; endIndex < edgeTiles.length; ++endIndex) {\n        existingTile = edgeTiles[endIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lessThanOrEquals */ .Z.lessThanOrEquals(\n            sourceRectangle.east,\n            existingRectangle.west,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST:\n      epsilon =\n        (destinationRectangle.north - destinationRectangle.south) *\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5;\n\n      for (startIndex = 0; startIndex < edgeTiles.length; ++startIndex) {\n        existingTile = edgeTiles[startIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lessThan */ .Z.lessThan(\n            sourceRectangle.south,\n            existingRectangle.north,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      for (endIndex = startIndex; endIndex < edgeTiles.length; ++endIndex) {\n        existingTile = edgeTiles[endIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lessThanOrEquals */ .Z.lessThanOrEquals(\n            sourceRectangle.north,\n            existingRectangle.south,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH:\n      epsilon =\n        (destinationRectangle.east - destinationRectangle.west) *\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5;\n\n      for (startIndex = 0; startIndex < edgeTiles.length; ++startIndex) {\n        existingTile = edgeTiles[startIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].greaterThan */ .Z.greaterThan(\n            sourceRectangle.east,\n            existingRectangle.west,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      for (endIndex = startIndex; endIndex < edgeTiles.length; ++endIndex) {\n        existingTile = edgeTiles[endIndex];\n        existingRectangle = existingTile.rectangle;\n        if (\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].greaterThanOrEquals */ .Z.greaterThanOrEquals(\n            sourceRectangle.west,\n            existingRectangle.east,\n            epsilon\n          )\n        ) {\n          break;\n        }\n      }\n      break;\n  }\n\n  if (endIndex - startIndex === 1) {\n    destinationFill.changedThisFrame =\n      destinationFill.changedThisFrame || edgeMeshes[startIndex] !== sourceMesh;\n    edgeMeshes[startIndex] = sourceMesh;\n    edgeTiles[startIndex] = sourceTile;\n  } else {\n    destinationFill.changedThisFrame = true;\n    edgeMeshes.splice(startIndex, endIndex - startIndex, sourceMesh);\n    edgeTiles.splice(startIndex, endIndex - startIndex, sourceTile);\n  }\n}\n\nvar cartographicScratch = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\nvar centerCartographicScratch = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\nvar cartesianScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar normalScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar octEncodedNormalScratch = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar uvScratch2 = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar uvScratch = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\nfunction HeightAndNormal() {\n  this.height = 0.0;\n  this.encodedNormal = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n}\n\nfunction fillMissingCorner(\n  fill,\n  ellipsoid,\n  u,\n  v,\n  corner,\n  adjacentCorner1,\n  adjacentCorner2,\n  oppositeCorner,\n  vertex\n) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(corner)) {\n    return corner;\n  }\n\n  var height;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(adjacentCorner1) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(adjacentCorner2)) {\n    height = (adjacentCorner1.height + adjacentCorner2.height) * 0.5;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(adjacentCorner1)) {\n    height = adjacentCorner1.height;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(adjacentCorner2)) {\n    height = adjacentCorner2.height;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(oppositeCorner)) {\n    height = oppositeCorner.height;\n  } else {\n    var surfaceTile = fill.tile.data;\n    var tileBoundingRegion = surfaceTile.tileBoundingRegion;\n    var minimumHeight = 0.0;\n    var maximumHeight = 0.0;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tileBoundingRegion)) {\n      minimumHeight = tileBoundingRegion.minimumHeight;\n      maximumHeight = tileBoundingRegion.maximumHeight;\n    }\n    height = (minimumHeight + maximumHeight) * 0.5;\n  }\n\n  getVertexWithHeightAtCorner(fill, ellipsoid, u, v, height, vertex);\n  return vertex;\n}\n\nvar heightRangeScratch = {\n  minimumHeight: 0.0,\n  maximumHeight: 0.0,\n};\n\nvar scratchCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar swVertexScratch = new HeightAndNormal();\nvar seVertexScratch = new HeightAndNormal();\nvar nwVertexScratch = new HeightAndNormal();\nvar neVertexScratch = new HeightAndNormal();\nvar heightmapBuffer =\n  typeof Uint8Array !== "undefined" ? new Uint8Array(9 * 9) : undefined;\n\nvar scratchCreateMeshSyncOptions = {\n  tilingScheme: undefined,\n  x: 0,\n  y: 0,\n  level: 0,\n  exaggeration: 1.0,\n  exaggerationRelativeHeight: 0.0,\n};\nfunction createFillMesh(tileProvider, frameState, tile, vertexArraysToDestroy) {\n  _GlobeSurfaceTile_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].initialize */ .Z.initialize(\n    tile,\n    tileProvider.terrainProvider,\n    tileProvider._imageryLayers\n  );\n\n  var surfaceTile = tile.data;\n  var fill = surfaceTile.fill;\n  var rectangle = tile.rectangle;\n\n  var exaggeration = frameState.terrainExaggeration;\n  var exaggerationRelativeHeight = frameState.terrainExaggerationRelativeHeight;\n  var hasExaggeration = exaggeration !== 1.0;\n\n  var ellipsoid = tile.tilingScheme.ellipsoid;\n\n  var nwCorner = getCorner(\n    fill,\n    ellipsoid,\n    0.0,\n    1.0,\n    fill.northwestTile,\n    fill.northwestMesh,\n    fill.northTiles,\n    fill.northMeshes,\n    fill.westTiles,\n    fill.westMeshes,\n    nwVertexScratch\n  );\n  var swCorner = getCorner(\n    fill,\n    ellipsoid,\n    0.0,\n    0.0,\n    fill.southwestTile,\n    fill.southwestMesh,\n    fill.westTiles,\n    fill.westMeshes,\n    fill.southTiles,\n    fill.southMeshes,\n    swVertexScratch\n  );\n  var seCorner = getCorner(\n    fill,\n    ellipsoid,\n    1.0,\n    0.0,\n    fill.southeastTile,\n    fill.southeastMesh,\n    fill.southTiles,\n    fill.southMeshes,\n    fill.eastTiles,\n    fill.eastMeshes,\n    seVertexScratch\n  );\n  var neCorner = getCorner(\n    fill,\n    ellipsoid,\n    1.0,\n    1.0,\n    fill.northeastTile,\n    fill.northeastMesh,\n    fill.eastTiles,\n    fill.eastMeshes,\n    fill.northTiles,\n    fill.northMeshes,\n    neVertexScratch\n  );\n\n  nwCorner = fillMissingCorner(\n    fill,\n    ellipsoid,\n    0.0,\n    1.0,\n    nwCorner,\n    swCorner,\n    neCorner,\n    seCorner,\n    nwVertexScratch\n  );\n  swCorner = fillMissingCorner(\n    fill,\n    ellipsoid,\n    0.0,\n    0.0,\n    swCorner,\n    nwCorner,\n    seCorner,\n    neCorner,\n    swVertexScratch\n  );\n  seCorner = fillMissingCorner(\n    fill,\n    ellipsoid,\n    1.0,\n    1.0,\n    seCorner,\n    swCorner,\n    neCorner,\n    nwCorner,\n    seVertexScratch\n  );\n  neCorner = fillMissingCorner(\n    fill,\n    ellipsoid,\n    1.0,\n    1.0,\n    neCorner,\n    seCorner,\n    nwCorner,\n    swCorner,\n    neVertexScratch\n  );\n\n  var southwestHeight = swCorner.height;\n  var southeastHeight = seCorner.height;\n  var northwestHeight = nwCorner.height;\n  var northeastHeight = neCorner.height;\n\n  var minimumHeight = Math.min(\n    southwestHeight,\n    southeastHeight,\n    northwestHeight,\n    northeastHeight\n  );\n  var maximumHeight = Math.max(\n    southwestHeight,\n    southeastHeight,\n    northwestHeight,\n    northeastHeight\n  );\n\n  var middleHeight = (minimumHeight + maximumHeight) * 0.5;\n\n  var i;\n  var len;\n\n  // For low-detail tiles, our usual fill tile approach will create tiles that\n  // look really blocky because they don\'t have enough vertices to account for the\n  // Earth\'s curvature. But the height range will also typically be well within\n  // the allowed geometric error for those levels. So fill such tiles with a\n  // constant-height heightmap.\n  var geometricError = tileProvider.getLevelMaximumGeometricError(tile.level);\n  var minCutThroughRadius = ellipsoid.maximumRadius - geometricError;\n  var maxTileWidth =\n    Math.acos(minCutThroughRadius / ellipsoid.maximumRadius) * 4.0;\n\n  // When the tile width is greater than maxTileWidth as computed above, the error\n  // of a normal fill tile from globe curvature alone will exceed the allowed geometric\n  // error. Terrain won\'t change that much. However, we can allow more error than that.\n  // A little blockiness during load is acceptable. For the WGS84 ellipsoid and\n  // standard geometric error setup, the value here will have us use a heightmap\n  // at levels 1, 2, and 3.\n  maxTileWidth *= 1.5;\n\n  if (\n    rectangle.width > maxTileWidth &&\n    maximumHeight - minimumHeight <= geometricError\n  ) {\n    var terrainData = new _Core_HeightmapTerrainData_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n      width: 9,\n      height: 9,\n      buffer: heightmapBuffer,\n      structure: {\n        // Use the maximum as the constant height so that this tile\'s skirt\n        // covers any cracks with adjacent tiles.\n        heightOffset: maximumHeight,\n      },\n    });\n\n    var createMeshSyncOptions = scratchCreateMeshSyncOptions;\n    createMeshSyncOptions.tilingScheme = tile.tilingScheme;\n    createMeshSyncOptions.x = tile.x;\n    createMeshSyncOptions.y = tile.y;\n    createMeshSyncOptions.level = tile.level;\n    createMeshSyncOptions.exaggeration = exaggeration;\n    createMeshSyncOptions.exaggerationRelativeHeight = exaggerationRelativeHeight;\n\n    fill.mesh = terrainData._createMeshSync(createMeshSyncOptions);\n  } else {\n    var hasGeodeticSurfaceNormals = hasExaggeration;\n    var centerCartographic = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].center */ .Z.center(\n      rectangle,\n      centerCartographicScratch\n    );\n    centerCartographic.height = middleHeight;\n    var center = ellipsoid.cartographicToCartesian(\n      centerCartographic,\n      scratchCenter\n    );\n    var encoding = new _Core_TerrainEncoding_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z(\n      center,\n      undefined,\n      undefined,\n      undefined,\n      undefined,\n      true,\n      true,\n      hasGeodeticSurfaceNormals,\n      exaggeration,\n      exaggerationRelativeHeight\n    );\n\n    // At _most_, we have vertices for the 4 corners, plus 1 center, plus every adjacent edge vertex.\n    // In reality there will be less most of the time, but close enough; better\n    // to overestimate than to re-allocate/copy/traverse the vertices twice.\n    // Also, we\'ll often be able to squeeze the index data into the extra space in the buffer.\n    var maxVertexCount = 5;\n    var meshes;\n\n    meshes = fill.westMeshes;\n    for (i = 0, len = meshes.length; i < len; ++i) {\n      maxVertexCount += meshes[i].eastIndicesNorthToSouth.length;\n    }\n\n    meshes = fill.southMeshes;\n    for (i = 0, len = meshes.length; i < len; ++i) {\n      maxVertexCount += meshes[i].northIndicesWestToEast.length;\n    }\n\n    meshes = fill.eastMeshes;\n    for (i = 0, len = meshes.length; i < len; ++i) {\n      maxVertexCount += meshes[i].westIndicesSouthToNorth.length;\n    }\n\n    meshes = fill.northMeshes;\n    for (i = 0, len = meshes.length; i < len; ++i) {\n      maxVertexCount += meshes[i].southIndicesEastToWest.length;\n    }\n\n    var heightRange = heightRangeScratch;\n    heightRange.minimumHeight = minimumHeight;\n    heightRange.maximumHeight = maximumHeight;\n\n    var stride = encoding.stride;\n    var typedArray = new Float32Array(maxVertexCount * stride);\n\n    var nextIndex = 0;\n    var northwestIndex = nextIndex;\n    nextIndex = addVertexWithComputedPosition(\n      ellipsoid,\n      rectangle,\n      encoding,\n      typedArray,\n      nextIndex,\n      0.0,\n      1.0,\n      nwCorner.height,\n      nwCorner.encodedNormal,\n      1.0,\n      heightRange\n    );\n    nextIndex = addEdge(\n      fill,\n      ellipsoid,\n      encoding,\n      typedArray,\n      nextIndex,\n      fill.westTiles,\n      fill.westMeshes,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST,\n      heightRange\n    );\n    var southwestIndex = nextIndex;\n    nextIndex = addVertexWithComputedPosition(\n      ellipsoid,\n      rectangle,\n      encoding,\n      typedArray,\n      nextIndex,\n      0.0,\n      0.0,\n      swCorner.height,\n      swCorner.encodedNormal,\n      0.0,\n      heightRange\n    );\n    nextIndex = addEdge(\n      fill,\n      ellipsoid,\n      encoding,\n      typedArray,\n      nextIndex,\n      fill.southTiles,\n      fill.southMeshes,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH,\n      heightRange\n    );\n    var southeastIndex = nextIndex;\n    nextIndex = addVertexWithComputedPosition(\n      ellipsoid,\n      rectangle,\n      encoding,\n      typedArray,\n      nextIndex,\n      1.0,\n      0.0,\n      seCorner.height,\n      seCorner.encodedNormal,\n      0.0,\n      heightRange\n    );\n    nextIndex = addEdge(\n      fill,\n      ellipsoid,\n      encoding,\n      typedArray,\n      nextIndex,\n      fill.eastTiles,\n      fill.eastMeshes,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST,\n      heightRange\n    );\n    var northeastIndex = nextIndex;\n    nextIndex = addVertexWithComputedPosition(\n      ellipsoid,\n      rectangle,\n      encoding,\n      typedArray,\n      nextIndex,\n      1.0,\n      1.0,\n      neCorner.height,\n      neCorner.encodedNormal,\n      1.0,\n      heightRange\n    );\n    nextIndex = addEdge(\n      fill,\n      ellipsoid,\n      encoding,\n      typedArray,\n      nextIndex,\n      fill.northTiles,\n      fill.northMeshes,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH,\n      heightRange\n    );\n\n    minimumHeight = heightRange.minimumHeight;\n    maximumHeight = heightRange.maximumHeight;\n\n    var obb = _Core_OrientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromRectangle */ .Z.fromRectangle(\n      rectangle,\n      minimumHeight,\n      maximumHeight,\n      tile.tilingScheme.ellipsoid\n    );\n\n    // Add a single vertex at the center of the tile.\n    var southMercatorY = _Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].geodeticLatitudeToMercatorAngle */ .Z.geodeticLatitudeToMercatorAngle(\n      rectangle.south\n    );\n    var oneOverMercatorHeight =\n      1.0 /\n      (_Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].geodeticLatitudeToMercatorAngle */ .Z.geodeticLatitudeToMercatorAngle(rectangle.north) -\n        southMercatorY);\n    var centerWebMercatorT =\n      (_Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].geodeticLatitudeToMercatorAngle */ .Z.geodeticLatitudeToMercatorAngle(\n        centerCartographic.latitude\n      ) -\n        southMercatorY) *\n      oneOverMercatorHeight;\n\n    var geodeticSurfaceNormal = ellipsoid.geodeticSurfaceNormalCartographic(\n      cartographicScratch,\n      normalScratch\n    );\n    var centerEncodedNormal = _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octEncode */ .Z.octEncode(\n      geodeticSurfaceNormal,\n      octEncodedNormalScratch\n    );\n\n    var centerIndex = nextIndex;\n    encoding.encode(\n      typedArray,\n      nextIndex * stride,\n      obb.center,\n      _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].fromElements */ .Z.fromElements(0.5, 0.5, uvScratch),\n      middleHeight,\n      centerEncodedNormal,\n      centerWebMercatorT,\n      geodeticSurfaceNormal\n    );\n    ++nextIndex;\n\n    var vertexCount = nextIndex;\n\n    var bytesPerIndex = vertexCount < 256 ? 1 : 2;\n    var indexCount = (vertexCount - 1) * 3; // one triangle per edge vertex\n    var indexDataBytes = indexCount * bytesPerIndex;\n    var availableBytesInBuffer =\n      (typedArray.length - vertexCount * stride) *\n      Float32Array.BYTES_PER_ELEMENT;\n\n    var indices;\n    if (availableBytesInBuffer >= indexDataBytes) {\n      // Store the index data in the same buffer as the vertex data.\n      var startIndex = vertexCount * stride * Float32Array.BYTES_PER_ELEMENT;\n      indices =\n        vertexCount < 256\n          ? new Uint8Array(typedArray.buffer, startIndex, indexCount)\n          : new Uint16Array(typedArray.buffer, startIndex, indexCount);\n    } else {\n      // Allocate a new buffer for the index data.\n      indices =\n        vertexCount < 256\n          ? new Uint8Array(indexCount)\n          : new Uint16Array(indexCount);\n    }\n\n    typedArray = new Float32Array(typedArray.buffer, 0, vertexCount * stride);\n\n    var indexOut = 0;\n    for (i = 0; i < vertexCount - 2; ++i) {\n      indices[indexOut++] = centerIndex;\n      indices[indexOut++] = i;\n      indices[indexOut++] = i + 1;\n    }\n\n    indices[indexOut++] = centerIndex;\n    indices[indexOut++] = i;\n    indices[indexOut++] = 0;\n\n    var westIndicesSouthToNorth = [];\n    for (i = southwestIndex; i >= northwestIndex; --i) {\n      westIndicesSouthToNorth.push(i);\n    }\n\n    var southIndicesEastToWest = [];\n    for (i = southeastIndex; i >= southwestIndex; --i) {\n      southIndicesEastToWest.push(i);\n    }\n\n    var eastIndicesNorthToSouth = [];\n    for (i = northeastIndex; i >= southeastIndex; --i) {\n      eastIndicesNorthToSouth.push(i);\n    }\n\n    var northIndicesWestToEast = [];\n    northIndicesWestToEast.push(0);\n    for (i = centerIndex - 1; i >= northeastIndex; --i) {\n      northIndicesWestToEast.push(i);\n    }\n\n    fill.mesh = new _Core_TerrainMesh_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z(\n      encoding.center,\n      typedArray,\n      indices,\n      indexCount,\n      vertexCount,\n      minimumHeight,\n      maximumHeight,\n      _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromOrientedBoundingBox */ .Z.fromOrientedBoundingBox(obb),\n      computeOccludeePoint(\n        tileProvider,\n        obb.center,\n        rectangle,\n        minimumHeight,\n        maximumHeight\n      ),\n      encoding.stride,\n      obb,\n      encoding,\n      westIndicesSouthToNorth,\n      southIndicesEastToWest,\n      eastIndicesNorthToSouth,\n      northIndicesWestToEast\n    );\n  }\n\n  var context = frameState.context;\n\n  fill._destroyVertexArray(vertexArraysToDestroy);\n\n  fill.vertexArray = _GlobeSurfaceTile_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"]._createVertexArrayForMesh */ .Z._createVertexArrayForMesh(\n    context,\n    fill.mesh\n  );\n  surfaceTile.processImagery(\n    tile,\n    tileProvider.terrainProvider,\n    frameState,\n    true\n  );\n\n  var oldTexture = fill.waterMaskTexture;\n  fill.waterMaskTexture = undefined;\n\n  if (tileProvider.terrainProvider.hasWaterMask) {\n    var waterSourceTile = surfaceTile._findAncestorTileWithTerrainData(tile);\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(waterSourceTile) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(waterSourceTile.data.waterMaskTexture)\n    ) {\n      fill.waterMaskTexture = waterSourceTile.data.waterMaskTexture;\n      ++fill.waterMaskTexture.referenceCount;\n      surfaceTile._computeWaterMaskTranslationAndScale(\n        tile,\n        waterSourceTile,\n        fill.waterMaskTranslationAndScale\n      );\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(oldTexture)) {\n    --oldTexture.referenceCount;\n    if (oldTexture.referenceCount === 0) {\n      oldTexture.destroy();\n    }\n  }\n}\n\nfunction addVertexWithComputedPosition(\n  ellipsoid,\n  rectangle,\n  encoding,\n  buffer,\n  index,\n  u,\n  v,\n  height,\n  encodedNormal,\n  webMercatorT,\n  heightRange\n) {\n  var cartographic = cartographicScratch;\n  cartographic.longitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lerp */ .Z.lerp(rectangle.west, rectangle.east, u);\n  cartographic.latitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lerp */ .Z.lerp(rectangle.south, rectangle.north, v);\n  cartographic.height = height;\n  var position = ellipsoid.cartographicToCartesian(\n    cartographic,\n    cartesianScratch\n  );\n\n  var geodeticSurfaceNormal;\n  if (encoding.hasGeodeticSurfaceNormals) {\n    geodeticSurfaceNormal = ellipsoid.geodeticSurfaceNormal(\n      position,\n      normalScratch\n    );\n  }\n\n  var uv = uvScratch2;\n  uv.x = u;\n  uv.y = v;\n\n  encoding.encode(\n    buffer,\n    index * encoding.stride,\n    position,\n    uv,\n    height,\n    encodedNormal,\n    webMercatorT,\n    geodeticSurfaceNormal\n  );\n\n  heightRange.minimumHeight = Math.min(heightRange.minimumHeight, height);\n  heightRange.maximumHeight = Math.max(heightRange.maximumHeight, height);\n\n  return index + 1;\n}\n\nvar sourceRectangleScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z();\n\nfunction transformTextureCoordinates(\n  sourceTile,\n  targetTile,\n  coordinates,\n  result\n) {\n  var sourceRectangle = sourceTile.rectangle;\n  var targetRectangle = targetTile.rectangle;\n\n  // Handle transforming across the anti-meridian.\n  if (\n    targetTile.x === 0 &&\n    coordinates.x === 1.0 &&\n    sourceTile.x ===\n      sourceTile.tilingScheme.getNumberOfXTilesAtLevel(sourceTile.level) - 1\n  ) {\n    sourceRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(\n      sourceTile.rectangle,\n      sourceRectangleScratch\n    );\n    sourceRectangle.west -= _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    sourceRectangle.east -= _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  } else if (\n    sourceTile.x === 0 &&\n    coordinates.x === 0.0 &&\n    targetTile.x ===\n      targetTile.tilingScheme.getNumberOfXTilesAtLevel(targetTile.level) - 1\n  ) {\n    sourceRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(\n      sourceTile.rectangle,\n      sourceRectangleScratch\n    );\n    sourceRectangle.west += _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    sourceRectangle.east += _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  }\n\n  var sourceWidth = sourceRectangle.east - sourceRectangle.west;\n  var umin = (targetRectangle.west - sourceRectangle.west) / sourceWidth;\n  var umax = (targetRectangle.east - sourceRectangle.west) / sourceWidth;\n\n  var sourceHeight = sourceRectangle.north - sourceRectangle.south;\n  var vmin = (targetRectangle.south - sourceRectangle.south) / sourceHeight;\n  var vmax = (targetRectangle.north - sourceRectangle.south) / sourceHeight;\n\n  var u = (coordinates.x - umin) / (umax - umin);\n  var v = (coordinates.y - vmin) / (vmax - vmin);\n\n  // Ensure that coordinates very near the corners are at the corners.\n  if (Math.abs(u) < Math.EPSILON5) {\n    u = 0.0;\n  } else if (Math.abs(u - 1.0) < Math.EPSILON5) {\n    u = 1.0;\n  }\n\n  if (Math.abs(v) < Math.EPSILON5) {\n    v = 0.0;\n  } else if (Math.abs(v - 1.0) < Math.EPSILON5) {\n    v = 1.0;\n  }\n\n  result.x = u;\n  result.y = v;\n  return result;\n}\n\nvar encodedNormalScratch = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\nfunction getVertexFromTileAtCorner(sourceMesh, sourceIndex, u, v, vertex) {\n  var sourceEncoding = sourceMesh.encoding;\n  var sourceVertices = sourceMesh.vertices;\n\n  vertex.height = sourceEncoding.decodeHeight(sourceVertices, sourceIndex);\n\n  if (sourceEncoding.hasVertexNormals) {\n    sourceEncoding.getOctEncodedNormal(\n      sourceVertices,\n      sourceIndex,\n      vertex.encodedNormal\n    );\n  } else {\n    var normal = vertex.encodedNormal;\n    normal.x = 0.0;\n    normal.y = 0.0;\n  }\n}\n\nvar encodedNormalScratch2 = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar cartesianScratch2 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nfunction getInterpolatedVertexAtCorner(\n  ellipsoid,\n  sourceTile,\n  targetTile,\n  sourceMesh,\n  previousIndex,\n  nextIndex,\n  u,\n  v,\n  interpolateU,\n  vertex\n) {\n  var sourceEncoding = sourceMesh.encoding;\n  var sourceVertices = sourceMesh.vertices;\n\n  var previousUv = transformTextureCoordinates(\n    sourceTile,\n    targetTile,\n    sourceEncoding.decodeTextureCoordinates(\n      sourceVertices,\n      previousIndex,\n      uvScratch\n    ),\n    uvScratch\n  );\n  var nextUv = transformTextureCoordinates(\n    sourceTile,\n    targetTile,\n    sourceEncoding.decodeTextureCoordinates(\n      sourceVertices,\n      nextIndex,\n      uvScratch2\n    ),\n    uvScratch2\n  );\n\n  var ratio;\n  if (interpolateU) {\n    ratio = (u - previousUv.x) / (nextUv.x - previousUv.x);\n  } else {\n    ratio = (v - previousUv.y) / (nextUv.y - previousUv.y);\n  }\n\n  var height1 = sourceEncoding.decodeHeight(sourceVertices, previousIndex);\n  var height2 = sourceEncoding.decodeHeight(sourceVertices, nextIndex);\n\n  var targetRectangle = targetTile.rectangle;\n  cartographicScratch.longitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lerp */ .Z.lerp(\n    targetRectangle.west,\n    targetRectangle.east,\n    u\n  );\n  cartographicScratch.latitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lerp */ .Z.lerp(\n    targetRectangle.south,\n    targetRectangle.north,\n    v\n  );\n  vertex.height = cartographicScratch.height = _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lerp */ .Z.lerp(\n    height1,\n    height2,\n    ratio\n  );\n\n  var normal;\n  if (sourceEncoding.hasVertexNormals) {\n    var encodedNormal1 = sourceEncoding.getOctEncodedNormal(\n      sourceVertices,\n      previousIndex,\n      encodedNormalScratch\n    );\n    var encodedNormal2 = sourceEncoding.getOctEncodedNormal(\n      sourceVertices,\n      nextIndex,\n      encodedNormalScratch2\n    );\n    var normal1 = _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octDecode */ .Z.octDecode(\n      encodedNormal1.x,\n      encodedNormal1.y,\n      cartesianScratch\n    );\n    var normal2 = _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octDecode */ .Z.octDecode(\n      encodedNormal2.x,\n      encodedNormal2.y,\n      cartesianScratch2\n    );\n    normal = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].lerp */ .Z.lerp(normal1, normal2, ratio, cartesianScratch);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].normalize */ .Z.normalize(normal, normal);\n    _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octEncode */ .Z.octEncode(normal, vertex.encodedNormal);\n  } else {\n    normal = ellipsoid.geodeticSurfaceNormalCartographic(\n      cartographicScratch,\n      cartesianScratch\n    );\n    _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octEncode */ .Z.octEncode(normal, vertex.encodedNormal);\n  }\n}\n\nfunction getVertexWithHeightAtCorner(\n  terrainFillMesh,\n  ellipsoid,\n  u,\n  v,\n  height,\n  vertex\n) {\n  vertex.height = height;\n  var normal = ellipsoid.geodeticSurfaceNormalCartographic(\n    cartographicScratch,\n    cartesianScratch\n  );\n  _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].octEncode */ .Z.octEncode(normal, vertex.encodedNormal);\n}\n\nfunction getCorner(\n  terrainFillMesh,\n  ellipsoid,\n  u,\n  v,\n  cornerTile,\n  cornerMesh,\n  previousEdgeTiles,\n  previousEdgeMeshes,\n  nextEdgeTiles,\n  nextEdgeMeshes,\n  vertex\n) {\n  var gotCorner =\n    getCornerFromEdge(\n      terrainFillMesh,\n      ellipsoid,\n      previousEdgeMeshes,\n      previousEdgeTiles,\n      false,\n      u,\n      v,\n      vertex\n    ) ||\n    getCornerFromEdge(\n      terrainFillMesh,\n      ellipsoid,\n      nextEdgeMeshes,\n      nextEdgeTiles,\n      true,\n      u,\n      v,\n      vertex\n    );\n  if (gotCorner) {\n    return vertex;\n  }\n\n  var vertexIndex;\n\n  if (meshIsUsable(cornerTile, cornerMesh)) {\n    // Corner mesh is valid, copy its corner vertex to this mesh.\n    if (u === 0.0) {\n      if (v === 0.0) {\n        // southwest destination, northeast source\n        vertexIndex = cornerMesh.eastIndicesNorthToSouth[0];\n      } else {\n        // northwest destination, southeast source\n        vertexIndex = cornerMesh.southIndicesEastToWest[0];\n      }\n    } else if (v === 0.0) {\n      // southeast destination, northwest source\n      vertexIndex = cornerMesh.northIndicesWestToEast[0];\n    } else {\n      // northeast destination, southwest source\n      vertexIndex = cornerMesh.westIndicesSouthToNorth[0];\n    }\n    getVertexFromTileAtCorner(cornerMesh, vertexIndex, u, v, vertex);\n    return vertex;\n  }\n\n  // There is no precise vertex available from the corner or from either adjacent edge.\n  // This is either because there are no tiles at all at the edges and corner, or\n  // because the tiles at the edge are higher-level-number and don\'t extend all the way\n  // to the corner.\n  // Try to grab a height from the adjacent edges.\n  var height;\n  if (u === 0.0) {\n    if (v === 0.0) {\n      // southwest\n      height = getClosestHeightToCorner(\n        terrainFillMesh.westMeshes,\n        terrainFillMesh.westTiles,\n        _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST,\n        terrainFillMesh.southMeshes,\n        terrainFillMesh.southTiles,\n        _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH,\n        u,\n        v\n      );\n    } else {\n      // northwest\n      height = getClosestHeightToCorner(\n        terrainFillMesh.northMeshes,\n        terrainFillMesh.northTiles,\n        _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH,\n        terrainFillMesh.westMeshes,\n        terrainFillMesh.westTiles,\n        _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST,\n        u,\n        v\n      );\n    }\n  } else if (v === 0.0) {\n    // southeast\n    height = getClosestHeightToCorner(\n      terrainFillMesh.southMeshes,\n      terrainFillMesh.southTiles,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH,\n      terrainFillMesh.eastMeshes,\n      terrainFillMesh.eastTiles,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST,\n      u,\n      v\n    );\n  } else {\n    // northeast\n    height = getClosestHeightToCorner(\n      terrainFillMesh.eastMeshes,\n      terrainFillMesh.eastTiles,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST,\n      terrainFillMesh.northMeshes,\n      terrainFillMesh.northTiles,\n      _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH,\n      u,\n      v\n    );\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(height)) {\n    getVertexWithHeightAtCorner(\n      terrainFillMesh,\n      ellipsoid,\n      u,\n      v,\n      height,\n      vertex\n    );\n    return vertex;\n  }\n\n  // No heights available that are closer than the adjacent corners.\n  return undefined;\n}\n\nfunction getClosestHeightToCorner(\n  previousMeshes,\n  previousTiles,\n  previousEdge,\n  nextMeshes,\n  nextTiles,\n  nextEdge,\n  u,\n  v\n) {\n  var height1 = getNearestHeightOnEdge(\n    previousMeshes,\n    previousTiles,\n    false,\n    previousEdge,\n    u,\n    v\n  );\n  var height2 = getNearestHeightOnEdge(\n    nextMeshes,\n    nextTiles,\n    true,\n    nextEdge,\n    u,\n    v\n  );\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(height1) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(height2)) {\n    // It would be slightly better to do a weighted average of the two heights\n    // based on their distance from the corner, but it shouldn\'t matter much in practice.\n    return (height1 + height2) * 0.5;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(height1)) {\n    return height1;\n  }\n  return height2;\n}\n\nfunction addEdge(\n  terrainFillMesh,\n  ellipsoid,\n  encoding,\n  typedArray,\n  nextIndex,\n  edgeTiles,\n  edgeMeshes,\n  tileEdge,\n  heightRange\n) {\n  for (var i = 0; i < edgeTiles.length; ++i) {\n    nextIndex = addEdgeMesh(\n      terrainFillMesh,\n      ellipsoid,\n      encoding,\n      typedArray,\n      nextIndex,\n      edgeTiles[i],\n      edgeMeshes[i],\n      tileEdge,\n      heightRange\n    );\n  }\n  return nextIndex;\n}\n\nfunction addEdgeMesh(\n  terrainFillMesh,\n  ellipsoid,\n  encoding,\n  typedArray,\n  nextIndex,\n  edgeTile,\n  edgeMesh,\n  tileEdge,\n  heightRange\n) {\n  // Handle copying edges across the anti-meridian.\n  var sourceRectangle = edgeTile.rectangle;\n  if (tileEdge === _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST && terrainFillMesh.tile.x === 0) {\n    sourceRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(\n      edgeTile.rectangle,\n      sourceRectangleScratch\n    );\n    sourceRectangle.west -= _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    sourceRectangle.east -= _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  } else if (tileEdge === _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST && edgeTile.x === 0) {\n    sourceRectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(\n      edgeTile.rectangle,\n      sourceRectangleScratch\n    );\n    sourceRectangle.west += _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    sourceRectangle.east += _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  }\n\n  var targetRectangle = terrainFillMesh.tile.rectangle;\n\n  var lastU;\n  var lastV;\n\n  if (nextIndex > 0) {\n    encoding.decodeTextureCoordinates(typedArray, nextIndex - 1, uvScratch);\n    lastU = uvScratch.x;\n    lastV = uvScratch.y;\n  }\n\n  var indices;\n  var compareU;\n\n  switch (tileEdge) {\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST:\n      indices = edgeMesh.westIndicesSouthToNorth;\n      compareU = false;\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH:\n      indices = edgeMesh.northIndicesWestToEast;\n      compareU = true;\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST:\n      indices = edgeMesh.eastIndicesNorthToSouth;\n      compareU = false;\n      break;\n    case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH:\n      indices = edgeMesh.southIndicesEastToWest;\n      compareU = true;\n      break;\n  }\n\n  var sourceTile = edgeTile;\n  var targetTile = terrainFillMesh.tile;\n  var sourceEncoding = edgeMesh.encoding;\n  var sourceVertices = edgeMesh.vertices;\n  var targetStride = encoding.stride;\n\n  var southMercatorY;\n  var oneOverMercatorHeight;\n  if (sourceEncoding.hasWebMercatorT) {\n    southMercatorY = _Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].geodeticLatitudeToMercatorAngle */ .Z.geodeticLatitudeToMercatorAngle(\n      targetRectangle.south\n    );\n    oneOverMercatorHeight =\n      1.0 /\n      (_Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].geodeticLatitudeToMercatorAngle */ .Z.geodeticLatitudeToMercatorAngle(\n        targetRectangle.north\n      ) -\n        southMercatorY);\n  }\n\n  for (var i = 0; i < indices.length; ++i) {\n    var index = indices[i];\n\n    var uv = sourceEncoding.decodeTextureCoordinates(\n      sourceVertices,\n      index,\n      uvScratch\n    );\n    transformTextureCoordinates(sourceTile, targetTile, uv, uv);\n    var u = uv.x;\n    var v = uv.y;\n    var uOrV = compareU ? u : v;\n\n    if (uOrV < 0.0 || uOrV > 1.0) {\n      // Vertex is outside the target tile - skip it.\n      continue;\n    }\n\n    if (\n      Math.abs(u - lastU) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5 &&\n      Math.abs(v - lastV) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5\n    ) {\n      // Vertex is very close to the previous one - skip it.\n      continue;\n    }\n\n    var nearlyEdgeU =\n      Math.abs(u) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5 ||\n      Math.abs(u - 1.0) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5;\n    var nearlyEdgeV =\n      Math.abs(v) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5 ||\n      Math.abs(v - 1.0) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].EPSILON5 */ .Z.EPSILON5;\n\n    if (nearlyEdgeU && nearlyEdgeV) {\n      // Corner vertex - skip it.\n      continue;\n    }\n\n    var position = sourceEncoding.decodePosition(\n      sourceVertices,\n      index,\n      cartesianScratch\n    );\n    var height = sourceEncoding.decodeHeight(sourceVertices, index);\n\n    var normal;\n    if (sourceEncoding.hasVertexNormals) {\n      normal = sourceEncoding.getOctEncodedNormal(\n        sourceVertices,\n        index,\n        octEncodedNormalScratch\n      );\n    } else {\n      normal = octEncodedNormalScratch;\n      normal.x = 0.0;\n      normal.y = 0.0;\n    }\n\n    var webMercatorT = v;\n    if (sourceEncoding.hasWebMercatorT) {\n      var latitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].lerp */ .Z.lerp(\n        targetRectangle.south,\n        targetRectangle.north,\n        v\n      );\n      webMercatorT =\n        (_Core_WebMercatorProjection_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].geodeticLatitudeToMercatorAngle */ .Z.geodeticLatitudeToMercatorAngle(latitude) -\n          southMercatorY) *\n        oneOverMercatorHeight;\n    }\n\n    var geodeticSurfaceNormal;\n    if (encoding.hasGeodeticSurfaceNormals) {\n      geodeticSurfaceNormal = ellipsoid.geodeticSurfaceNormal(\n        position,\n        normalScratch\n      );\n    }\n\n    encoding.encode(\n      typedArray,\n      nextIndex * targetStride,\n      position,\n      uv,\n      height,\n      normal,\n      webMercatorT,\n      geodeticSurfaceNormal\n    );\n\n    heightRange.minimumHeight = Math.min(heightRange.minimumHeight, height);\n    heightRange.maximumHeight = Math.max(heightRange.maximumHeight, height);\n\n    ++nextIndex;\n  }\n\n  return nextIndex;\n}\n\nfunction getNearestHeightOnEdge(meshes, tiles, isNext, edge, u, v) {\n  var meshStart;\n  var meshEnd;\n  var meshStep;\n\n  if (isNext) {\n    meshStart = 0;\n    meshEnd = meshes.length;\n    meshStep = 1;\n  } else {\n    meshStart = meshes.length - 1;\n    meshEnd = -1;\n    meshStep = -1;\n  }\n\n  for (\n    var meshIndex = meshStart;\n    meshIndex !== meshEnd;\n    meshIndex += meshStep\n  ) {\n    var mesh = meshes[meshIndex];\n    var tile = tiles[meshIndex];\n    if (!meshIsUsable(tile, mesh)) {\n      continue;\n    }\n\n    var indices;\n    switch (edge) {\n      case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].WEST */ .Z.WEST:\n        indices = mesh.westIndicesSouthToNorth;\n        break;\n      case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SOUTH */ .Z.SOUTH:\n        indices = mesh.southIndicesEastToWest;\n        break;\n      case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].EAST */ .Z.EAST:\n        indices = mesh.eastIndicesNorthToSouth;\n        break;\n      case _Core_TileEdge_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].NORTH */ .Z.NORTH:\n        indices = mesh.northIndicesWestToEast;\n        break;\n    }\n\n    var index = indices[isNext ? 0 : indices.length - 1];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(index)) {\n      return mesh.encoding.decodeHeight(mesh.vertices, index);\n    }\n  }\n\n  return undefined;\n}\n\nfunction meshIsUsable(tile, mesh) {\n  return (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(mesh) &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)(tile.data.fill) || !tile.data.fill.changedThisFrame)\n  );\n}\n\nfunction getCornerFromEdge(\n  terrainFillMesh,\n  ellipsoid,\n  edgeMeshes,\n  edgeTiles,\n  isNext,\n  u,\n  v,\n  vertex\n) {\n  var edgeVertices;\n  var compareU;\n  var increasing;\n  var vertexIndexIndex;\n  var vertexIndex;\n  var sourceTile = edgeTiles[isNext ? 0 : edgeMeshes.length - 1];\n  var sourceMesh = edgeMeshes[isNext ? 0 : edgeMeshes.length - 1];\n\n  if (meshIsUsable(sourceTile, sourceMesh)) {\n    // Previous mesh is valid, but we don\'t know yet if it covers this corner.\n    if (u === 0.0) {\n      if (v === 0.0) {\n        // southwest\n        edgeVertices = isNext\n          ? sourceMesh.northIndicesWestToEast\n          : sourceMesh.eastIndicesNorthToSouth;\n        compareU = isNext;\n        increasing = isNext;\n      } else {\n        // northwest\n        edgeVertices = isNext\n          ? sourceMesh.eastIndicesNorthToSouth\n          : sourceMesh.southIndicesEastToWest;\n        compareU = !isNext;\n        increasing = false;\n      }\n    } else if (v === 0.0) {\n      // southeast\n      edgeVertices = isNext\n        ? sourceMesh.westIndicesSouthToNorth\n        : sourceMesh.northIndicesWestToEast;\n      compareU = !isNext;\n      increasing = true;\n    } else {\n      // northeast\n      edgeVertices = isNext\n        ? sourceMesh.southIndicesEastToWest\n        : sourceMesh.westIndicesSouthToNorth;\n      compareU = isNext;\n      increasing = !isNext;\n    }\n\n    if (edgeVertices.length > 0) {\n      // The vertex we want will very often be the first/last vertex so check that first.\n      vertexIndexIndex = isNext ? 0 : edgeVertices.length - 1;\n      vertexIndex = edgeVertices[vertexIndexIndex];\n      sourceMesh.encoding.decodeTextureCoordinates(\n        sourceMesh.vertices,\n        vertexIndex,\n        uvScratch\n      );\n      var targetUv = transformTextureCoordinates(\n        sourceTile,\n        terrainFillMesh.tile,\n        uvScratch,\n        uvScratch\n      );\n      if (targetUv.x === u && targetUv.y === v) {\n        // Vertex is good!\n        getVertexFromTileAtCorner(sourceMesh, vertexIndex, u, v, vertex);\n        return true;\n      }\n\n      // The last vertex is not the one we need, try binary searching for the right one.\n      vertexIndexIndex = (0,_Core_binarySearch_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(edgeVertices, compareU ? u : v, function (\n        vertexIndex,\n        textureCoordinate\n      ) {\n        sourceMesh.encoding.decodeTextureCoordinates(\n          sourceMesh.vertices,\n          vertexIndex,\n          uvScratch\n        );\n        var targetUv = transformTextureCoordinates(\n          sourceTile,\n          terrainFillMesh.tile,\n          uvScratch,\n          uvScratch\n        );\n        if (increasing) {\n          if (compareU) {\n            return targetUv.x - u;\n          }\n          return targetUv.y - v;\n        } else if (compareU) {\n          return u - targetUv.x;\n        }\n        return v - targetUv.y;\n      });\n\n      if (vertexIndexIndex < 0) {\n        vertexIndexIndex = ~vertexIndexIndex;\n\n        if (vertexIndexIndex > 0 && vertexIndexIndex < edgeVertices.length) {\n          // The corner falls between two vertices, so interpolate between them.\n          getInterpolatedVertexAtCorner(\n            ellipsoid,\n            sourceTile,\n            terrainFillMesh.tile,\n            sourceMesh,\n            edgeVertices[vertexIndexIndex - 1],\n            edgeVertices[vertexIndexIndex],\n            u,\n            v,\n            compareU,\n            vertex\n          );\n          return true;\n        }\n      } else {\n        // Found a vertex that fits in the corner exactly.\n        getVertexFromTileAtCorner(\n          sourceMesh,\n          edgeVertices[vertexIndexIndex],\n          u,\n          v,\n          vertex\n        );\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nvar cornerPositionsScratch = [\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n];\n\nfunction computeOccludeePoint(\n  tileProvider,\n  center,\n  rectangle,\n  minimumHeight,\n  maximumHeight,\n  result\n) {\n  var ellipsoidalOccluder = tileProvider.quadtree._occluders.ellipsoid;\n  var ellipsoid = ellipsoidalOccluder.ellipsoid;\n\n  var cornerPositions = cornerPositionsScratch;\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fromRadians */ .Z.fromRadians(\n    rectangle.west,\n    rectangle.south,\n    maximumHeight,\n    ellipsoid,\n    cornerPositions[0]\n  );\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fromRadians */ .Z.fromRadians(\n    rectangle.east,\n    rectangle.south,\n    maximumHeight,\n    ellipsoid,\n    cornerPositions[1]\n  );\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fromRadians */ .Z.fromRadians(\n    rectangle.west,\n    rectangle.north,\n    maximumHeight,\n    ellipsoid,\n    cornerPositions[2]\n  );\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].fromRadians */ .Z.fromRadians(\n    rectangle.east,\n    rectangle.north,\n    maximumHeight,\n    ellipsoid,\n    cornerPositions[3]\n  );\n\n  return ellipsoidalOccluder.computeHorizonCullingPointPossiblyUnderEllipsoid(\n    center,\n    cornerPositions,\n    minimumHeight,\n    result\n  );\n}\n/* harmony default export */ __webpack_exports__["Z"] = (TerrainFillMesh);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSx1R0FBa0M7QUFDdEMsSUFBSSx1RkFBMEI7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNkVBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNkVBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0VBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0VBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdFQUFjO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTSxzRUFBTztBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsU0FBUyw2RUFBYTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtFQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNkVBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsU0FBUywrRUFBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUZBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsU0FBUyw2RUFBYTtBQUN0QjtBQUNBO0FBQ0EsUUFBUSxnRkFBbUI7O0FBRTNCLDJCQUEyQiwrQkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzRkFBc0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzR0FBOEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrRUFBYztBQUN2QjtBQUNBO0FBQ0EsUUFBUSxnRkFBbUI7O0FBRTNCLDJCQUEyQiwrQkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnRkFBbUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnR0FBMkI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2RUFBYTtBQUN0QjtBQUNBO0FBQ0EsUUFBUSxnRkFBbUI7O0FBRTNCLDJCQUEyQiwrQkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnRkFBbUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnR0FBMkI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrRUFBYztBQUN2QjtBQUNBO0FBQ0EsUUFBUSxnRkFBbUI7O0FBRTNCLDJCQUEyQiwrQkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzRkFBc0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzR0FBOEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4QixzRUFBWTtBQUMxQyxvQ0FBb0Msc0VBQVk7QUFDaEQsMkJBQTJCLG9FQUFVO0FBQ3JDLHdCQUF3QixvRUFBVTtBQUNsQyxrQ0FBa0Msb0VBQVU7QUFDNUMscUJBQXFCLG9FQUFVO0FBQy9CLG9CQUFvQixvRUFBVTs7QUFFOUI7QUFDQTtBQUNBLDJCQUEyQixvRUFBVTtBQUNyQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzRUFBTztBQUNiO0FBQ0E7O0FBRUE7O0FBRUEsTUFBTSxzRUFBTyxxQkFBcUIsc0VBQU87QUFDekM7QUFDQSxJQUFJLFNBQVMsc0VBQU87QUFDcEI7QUFDQSxJQUFJLFNBQVMsc0VBQU87QUFDcEI7QUFDQSxJQUFJLFNBQVMsc0VBQU87QUFDcEI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNFQUFPO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLG9FQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDRGQUEyQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhFQUFvQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNkJBQTZCLGtGQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBFQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5RUFBeUU7QUFDekU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQ0FBcUMsU0FBUztBQUM5QztBQUNBOztBQUVBO0FBQ0EscUNBQXFDLFNBQVM7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLG9FQUFVO0FBQ2hCLE1BQU0sb0VBQVU7QUFDaEIsTUFBTSxvRUFBVTtBQUNoQixNQUFNLG9FQUFVO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRSw0RkFBc0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw0RkFBc0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw0RkFBc0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw0RkFBc0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsZUFBZSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL1RlcnJhaW5GaWxsTWVzaC5qcz9lZDY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBdHRyaWJ1dGVDb21wcmVzc2lvbiBmcm9tIFwiLi4vQ29yZS9BdHRyaWJ1dGVDb21wcmVzc2lvbi5qc1wiO1xuaW1wb3J0IGJpbmFyeVNlYXJjaCBmcm9tIFwiLi4vQ29yZS9iaW5hcnlTZWFyY2guanNcIjtcbmltcG9ydCBCb3VuZGluZ1NwaGVyZSBmcm9tIFwiLi4vQ29yZS9Cb3VuZGluZ1NwaGVyZS5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjQgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuNC5qc1wiO1xuaW1wb3J0IENhcnRvZ3JhcGhpYyBmcm9tIFwiLi4vQ29yZS9DYXJ0b2dyYXBoaWMuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEhlaWdodG1hcFRlcnJhaW5EYXRhIGZyb20gXCIuLi9Db3JlL0hlaWdodG1hcFRlcnJhaW5EYXRhLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi4vQ29yZS9NYXRoLmpzXCI7XG5pbXBvcnQgT3JpZW50ZWRCb3VuZGluZ0JveCBmcm9tIFwiLi4vQ29yZS9PcmllbnRlZEJvdW5kaW5nQm94LmpzXCI7XG5pbXBvcnQgUXVldWUgZnJvbSBcIi4uL0NvcmUvUXVldWUuanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgVGVycmFpbkVuY29kaW5nIGZyb20gXCIuLi9Db3JlL1RlcnJhaW5FbmNvZGluZy5qc1wiO1xuaW1wb3J0IFRlcnJhaW5NZXNoIGZyb20gXCIuLi9Db3JlL1RlcnJhaW5NZXNoLmpzXCI7XG5pbXBvcnQgVGlsZUVkZ2UgZnJvbSBcIi4uL0NvcmUvVGlsZUVkZ2UuanNcIjtcbmltcG9ydCBXZWJNZXJjYXRvclByb2plY3Rpb24gZnJvbSBcIi4uL0NvcmUvV2ViTWVyY2F0b3JQcm9qZWN0aW9uLmpzXCI7XG5pbXBvcnQgR2xvYmVTdXJmYWNlVGlsZSBmcm9tIFwiLi9HbG9iZVN1cmZhY2VUaWxlLmpzXCI7XG5pbXBvcnQgVGlsZVNlbGVjdGlvblJlc3VsdCBmcm9tIFwiLi9UaWxlU2VsZWN0aW9uUmVzdWx0LmpzXCI7XG5cbmZ1bmN0aW9uIFRlcnJhaW5GaWxsTWVzaCh0aWxlKSB7XG4gIHRoaXMudGlsZSA9IHRpbGU7XG4gIHRoaXMuZnJhbWVMYXN0VXBkYXRlZCA9IHVuZGVmaW5lZDtcbiAgdGhpcy53ZXN0TWVzaGVzID0gW107IC8vIG5vcnRoIHRvIHNvdXRoIChDQ1cpXG4gIHRoaXMud2VzdFRpbGVzID0gW107XG4gIHRoaXMuc291dGhNZXNoZXMgPSBbXTsgLy8gd2VzdCB0byBlYXN0IChDQ1cpXG4gIHRoaXMuc291dGhUaWxlcyA9IFtdO1xuICB0aGlzLmVhc3RNZXNoZXMgPSBbXTsgLy8gc291dGggdG8gbm9ydGggKENDVylcbiAgdGhpcy5lYXN0VGlsZXMgPSBbXTtcbiAgdGhpcy5ub3J0aE1lc2hlcyA9IFtdOyAvLyBlYXN0IHRvIHdlc3QgKENDVylcbiAgdGhpcy5ub3J0aFRpbGVzID0gW107XG4gIHRoaXMuc291dGh3ZXN0TWVzaCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5zb3V0aHdlc3RUaWxlID0gdW5kZWZpbmVkO1xuICB0aGlzLnNvdXRoZWFzdE1lc2ggPSB1bmRlZmluZWQ7XG4gIHRoaXMuc291dGhlYXN0VGlsZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5ub3J0aHdlc3RNZXNoID0gdW5kZWZpbmVkO1xuICB0aGlzLm5vcnRod2VzdFRpbGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMubm9ydGhlYXN0TWVzaCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5ub3J0aGVhc3RUaWxlID0gdW5kZWZpbmVkO1xuICB0aGlzLmNoYW5nZWRUaGlzRnJhbWUgPSB0cnVlO1xuICB0aGlzLnZpc2l0ZWRGcmFtZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5lbnF1ZXVlZEZyYW1lID0gdW5kZWZpbmVkO1xuICB0aGlzLm1lc2ggPSB1bmRlZmluZWQ7XG4gIHRoaXMudmVydGV4QXJyYXkgPSB1bmRlZmluZWQ7XG4gIHRoaXMud2F0ZXJNYXNrVGV4dHVyZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy53YXRlck1hc2tUcmFuc2xhdGlvbkFuZFNjYWxlID0gbmV3IENhcnRlc2lhbjQoKTtcbn1cblxuVGVycmFpbkZpbGxNZXNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoXG4gIHRpbGVQcm92aWRlcixcbiAgZnJhbWVTdGF0ZSxcbiAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4pIHtcbiAgaWYgKHRoaXMuY2hhbmdlZFRoaXNGcmFtZSkge1xuICAgIGNyZWF0ZUZpbGxNZXNoKHRpbGVQcm92aWRlciwgZnJhbWVTdGF0ZSwgdGhpcy50aWxlLCB2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3kpO1xuICAgIHRoaXMuY2hhbmdlZFRoaXNGcmFtZSA9IGZhbHNlO1xuICB9XG59O1xuXG5UZXJyYWluRmlsbE1lc2gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAodmVydGV4QXJyYXlzVG9EZXN0cm95KSB7XG4gIHRoaXMuX2Rlc3Ryb3lWZXJ0ZXhBcnJheSh2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3kpO1xuXG4gIGlmIChkZWZpbmVkKHRoaXMud2F0ZXJNYXNrVGV4dHVyZSkpIHtcbiAgICAtLXRoaXMud2F0ZXJNYXNrVGV4dHVyZS5yZWZlcmVuY2VDb3VudDtcbiAgICBpZiAodGhpcy53YXRlck1hc2tUZXh0dXJlLnJlZmVyZW5jZUNvdW50ID09PSAwKSB7XG4gICAgICB0aGlzLndhdGVyTWFza1RleHR1cmUuZGVzdHJveSgpO1xuICAgIH1cbiAgICB0aGlzLndhdGVyTWFza1RleHR1cmUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuVGVycmFpbkZpbGxNZXNoLnByb3RvdHlwZS5fZGVzdHJveVZlcnRleEFycmF5ID0gZnVuY3Rpb24gKFxuICB2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3lcbikge1xuICBpZiAoZGVmaW5lZCh0aGlzLnZlcnRleEFycmF5KSkge1xuICAgIGlmIChkZWZpbmVkKHZlcnRleEFycmF5c1RvRGVzdHJveSkpIHtcbiAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveS5wdXNoKHRoaXMudmVydGV4QXJyYXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBHbG9iZVN1cmZhY2VUaWxlLl9mcmVlVmVydGV4QXJyYXkodGhpcy52ZXJ0ZXhBcnJheSk7XG4gICAgfVxuICAgIHRoaXMudmVydGV4QXJyYXkgPSB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbnZhciB0cmF2ZXJzYWxRdWV1ZVNjcmF0Y2ggPSBuZXcgUXVldWUoKTtcblxuVGVycmFpbkZpbGxNZXNoLnVwZGF0ZUZpbGxUaWxlcyA9IGZ1bmN0aW9uIChcbiAgdGlsZVByb3ZpZGVyLFxuICByZW5kZXJlZFRpbGVzLFxuICBmcmFtZVN0YXRlLFxuICB2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3lcbikge1xuICAvLyBXZSB3YW50IG91ciBmaWxsIHRpbGVzIHRvIGxvb2sgbmF0dXJhbCwgd2hpY2ggbWVhbnMgdGhleSBzaG91bGQgYWxpZ24gcGVyZmVjdGx5IHdpdGhcbiAgLy8gYWRqYWNlbnQgbG9hZGVkIHRpbGVzLCBhbmQgdGhlaXIgZWRnZXMgdGhhdCBhcmUgbm90IGFkamFjZW50IHRvIGxvYWRlZCB0aWxlcyBzaG91bGQgaGF2ZVxuICAvLyBzZW5zaWJsZSBoZWlnaHRzIChlLmcuIHRoZSBhdmVyYWdlIG9mIHRoZSBoZWlnaHRzIG9mIGxvYWRlZCBlZGdlcykuIFNvbWUgZmlsbCB0aWxlcyBtYXlcbiAgLy8gYmUgYWRqYWNlbnQgb25seSB0byBvdGhlciBmaWxsIHRpbGVzLCBhbmQgaW4gdGhhdCBjYXNlIGhlaWdodHMgc2hvdWxkIGJlIGFzc2lnbmVkIGZhbm5pbmdcbiAgLy8gb3V0d2FyZCBmcm9tIHRoZSBsb2FkZWQgdGlsZXMgc28gdGhhdCB0aGVyZSBhcmUgbm8gc3VkZGVuIGNoYW5nZXMgaW4gaGVpZ2h0LlxuXG4gIC8vIFdlIGRvIHRoaXMgd2l0aCBhIGJyZWFkdGgtZmlyc3QgdHJhdmVyc2FsIG9mIHRoZSByZW5kZXJlZCB0aWxlcywgc3RhcnRpbmcgd2l0aCB0aGUgbG9hZGVkXG4gIC8vIG9uZXMuIEdyYXBoIG5vZGVzIGFyZSB0aWxlcyBhbmQgZ3JhcGggZWRnZXMgY29ubmVjdCB0byBvdGhlciByZW5kZXJlZCB0aWxlcyB0aGF0IGFyZSBzcGF0aWFsbHkgYWRqYWNlbnRcbiAgLy8gdG8gdGhvc2UgdGlsZXMuIEFzIHdlIHZpc2l0IGVhY2ggbm9kZSwgd2UgcHJvcGFnYXRlIHRpbGUgZWRnZXMgdG8gYWRqYWNlbnQgdGlsZXMuIElmIHRoZXJlJ3Mgbm8gZGF0YVxuICAvLyBmb3IgYSB0aWxlIGVkZ2UsICB3ZSBjcmVhdGUgYW4gZWRnZSB3aXRoIGFuIGF2ZXJhZ2UgaGVpZ2h0IGFuZCB0aGVuIHByb3BhZ2F0ZSBpdC4gSWYgYW4gZWRnZSBpcyBwYXJ0aWFsbHkgZGVmaW5lZFxuICAvLyAoZS5nLiBhbiBlZGdlIGlzIGFkamFjZW50IHRvIG11bHRpcGxlIG1vcmUtZGV0YWlsZWQgdGlsZXMgYW5kIG9ubHkgc29tZSBvZiB0aGVtIGFyZSBsb2FkZWQpLCB3ZVxuICAvLyBmaWxsIGluIHRoZSByZXN0IG9mIHRoZSBlZGdlIHdpdGggdGhlIHNhbWUgaGVpZ2h0LlxuICB2YXIgcXVhZHRyZWUgPSB0aWxlUHJvdmlkZXIuX3F1YWR0cmVlO1xuICB2YXIgbGV2ZWxaZXJvVGlsZXMgPSBxdWFkdHJlZS5fbGV2ZWxaZXJvVGlsZXM7XG4gIHZhciBsYXN0U2VsZWN0aW9uRnJhbWVOdW1iZXIgPSBxdWFkdHJlZS5fbGFzdFNlbGVjdGlvbkZyYW1lTnVtYmVyO1xuXG4gIHZhciB0cmF2ZXJzYWxRdWV1ZSA9IHRyYXZlcnNhbFF1ZXVlU2NyYXRjaDtcbiAgdHJhdmVyc2FsUXVldWUuY2xlYXIoKTtcblxuICAvLyBBZGQgdGhlIHRpbGVzIHdpdGggcmVhbCBnZW9tZXRyeSB0byB0aGUgdHJhdmVyc2FsIHF1ZXVlLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbmRlcmVkVGlsZXMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcmVuZGVyZWRUaWxlID0gcmVuZGVyZWRUaWxlc1tpXTtcbiAgICBpZiAoZGVmaW5lZChyZW5kZXJlZFRpbGUuZGF0YS52ZXJ0ZXhBcnJheSkpIHtcbiAgICAgIHRyYXZlcnNhbFF1ZXVlLmVucXVldWUocmVuZGVyZWRUaWxlc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHRpbGUgPSB0cmF2ZXJzYWxRdWV1ZS5kZXF1ZXVlKCk7XG5cbiAgd2hpbGUgKHRpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciB0aWxlVG9XZXN0ID0gdGlsZS5maW5kVGlsZVRvV2VzdChsZXZlbFplcm9UaWxlcyk7XG4gICAgdmFyIHRpbGVUb1NvdXRoID0gdGlsZS5maW5kVGlsZVRvU291dGgobGV2ZWxaZXJvVGlsZXMpO1xuICAgIHZhciB0aWxlVG9FYXN0ID0gdGlsZS5maW5kVGlsZVRvRWFzdChsZXZlbFplcm9UaWxlcyk7XG4gICAgdmFyIHRpbGVUb05vcnRoID0gdGlsZS5maW5kVGlsZVRvTm9ydGgobGV2ZWxaZXJvVGlsZXMpO1xuICAgIHZpc2l0UmVuZGVyZWRUaWxlcyhcbiAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICB0aWxlLFxuICAgICAgdGlsZVRvV2VzdCxcbiAgICAgIGxhc3RTZWxlY3Rpb25GcmFtZU51bWJlcixcbiAgICAgIFRpbGVFZGdlLkVBU1QsXG4gICAgICBmYWxzZSxcbiAgICAgIHRyYXZlcnNhbFF1ZXVlLFxuICAgICAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4gICAgKTtcbiAgICB2aXNpdFJlbmRlcmVkVGlsZXMoXG4gICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgdGlsZSxcbiAgICAgIHRpbGVUb1NvdXRoLFxuICAgICAgbGFzdFNlbGVjdGlvbkZyYW1lTnVtYmVyLFxuICAgICAgVGlsZUVkZ2UuTk9SVEgsXG4gICAgICBmYWxzZSxcbiAgICAgIHRyYXZlcnNhbFF1ZXVlLFxuICAgICAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4gICAgKTtcbiAgICB2aXNpdFJlbmRlcmVkVGlsZXMoXG4gICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgdGlsZSxcbiAgICAgIHRpbGVUb0Vhc3QsXG4gICAgICBsYXN0U2VsZWN0aW9uRnJhbWVOdW1iZXIsXG4gICAgICBUaWxlRWRnZS5XRVNULFxuICAgICAgZmFsc2UsXG4gICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICk7XG4gICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIHRpbGUsXG4gICAgICB0aWxlVG9Ob3J0aCxcbiAgICAgIGxhc3RTZWxlY3Rpb25GcmFtZU51bWJlcixcbiAgICAgIFRpbGVFZGdlLlNPVVRILFxuICAgICAgZmFsc2UsXG4gICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICk7XG5cbiAgICB2YXIgdGlsZVRvTm9ydGh3ZXN0ID0gdGlsZVRvV2VzdC5maW5kVGlsZVRvTm9ydGgobGV2ZWxaZXJvVGlsZXMpO1xuICAgIHZhciB0aWxlVG9Tb3V0aHdlc3QgPSB0aWxlVG9XZXN0LmZpbmRUaWxlVG9Tb3V0aChsZXZlbFplcm9UaWxlcyk7XG4gICAgdmFyIHRpbGVUb05vcnRoZWFzdCA9IHRpbGVUb0Vhc3QuZmluZFRpbGVUb05vcnRoKGxldmVsWmVyb1RpbGVzKTtcbiAgICB2YXIgdGlsZVRvU291dGhlYXN0ID0gdGlsZVRvRWFzdC5maW5kVGlsZVRvU291dGgobGV2ZWxaZXJvVGlsZXMpO1xuICAgIHZpc2l0UmVuZGVyZWRUaWxlcyhcbiAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICB0aWxlLFxuICAgICAgdGlsZVRvTm9ydGh3ZXN0LFxuICAgICAgbGFzdFNlbGVjdGlvbkZyYW1lTnVtYmVyLFxuICAgICAgVGlsZUVkZ2UuU09VVEhFQVNULFxuICAgICAgZmFsc2UsXG4gICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICk7XG4gICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIHRpbGUsXG4gICAgICB0aWxlVG9Ob3J0aGVhc3QsXG4gICAgICBsYXN0U2VsZWN0aW9uRnJhbWVOdW1iZXIsXG4gICAgICBUaWxlRWRnZS5TT1VUSFdFU1QsXG4gICAgICBmYWxzZSxcbiAgICAgIHRyYXZlcnNhbFF1ZXVlLFxuICAgICAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4gICAgKTtcbiAgICB2aXNpdFJlbmRlcmVkVGlsZXMoXG4gICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgdGlsZSxcbiAgICAgIHRpbGVUb1NvdXRod2VzdCxcbiAgICAgIGxhc3RTZWxlY3Rpb25GcmFtZU51bWJlcixcbiAgICAgIFRpbGVFZGdlLk5PUlRIRUFTVCxcbiAgICAgIGZhbHNlLFxuICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICB2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3lcbiAgICApO1xuICAgIHZpc2l0UmVuZGVyZWRUaWxlcyhcbiAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICB0aWxlLFxuICAgICAgdGlsZVRvU291dGhlYXN0LFxuICAgICAgbGFzdFNlbGVjdGlvbkZyYW1lTnVtYmVyLFxuICAgICAgVGlsZUVkZ2UuTk9SVEhXRVNULFxuICAgICAgZmFsc2UsXG4gICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICk7XG5cbiAgICB0aWxlID0gdHJhdmVyc2FsUXVldWUuZGVxdWV1ZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiB2aXNpdFJlbmRlcmVkVGlsZXMoXG4gIHRpbGVQcm92aWRlcixcbiAgZnJhbWVTdGF0ZSxcbiAgc291cmNlVGlsZSxcbiAgc3RhcnRUaWxlLFxuICBjdXJyZW50RnJhbWVOdW1iZXIsXG4gIHRpbGVFZGdlLFxuICBkb3duT25seSxcbiAgdHJhdmVyc2FsUXVldWUsXG4gIHZlcnRleEFycmF5c1RvRGVzdHJveVxuKSB7XG4gIGlmIChzdGFydFRpbGUgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIFRoZXJlIGFyZSBubyB0aWxlcyBOb3J0aCBvciBTb3V0aCBvZiB0aGUgcG9sZXMuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHRpbGUgPSBzdGFydFRpbGU7XG4gIHdoaWxlIChcbiAgICB0aWxlICYmXG4gICAgKHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSAhPT0gY3VycmVudEZyYW1lTnVtYmVyIHx8XG4gICAgICBUaWxlU2VsZWN0aW9uUmVzdWx0Lndhc0tpY2tlZCh0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0KSB8fFxuICAgICAgVGlsZVNlbGVjdGlvblJlc3VsdC5vcmlnaW5hbFJlc3VsdCh0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0KSA9PT1cbiAgICAgICAgVGlsZVNlbGVjdGlvblJlc3VsdC5DVUxMRUQpXG4gICkge1xuICAgIC8vIFRoaXMgdGlsZSB3YXNuJ3QgdmlzaXRlZCBvciBpdCB3YXMgdmlzaXRlZCBhbmQgdGhlbiBraWNrZWQsIHNvIHdhbGsgdXAgdG8gZmluZCB0aGUgY2xvc2VzdCBhbmNlc3RvciB0aGF0IHdhcyByZW5kZXJlZC5cbiAgICAvLyBXZSBhbHNvIHdhbGsgdXAgaWYgdGhlIHRpbGUgd2FzIGN1bGxlZCwgYmVjYXVzZSBpZiBzaWJsaW5ncyB3ZXJlIGtpY2tlZCBhbiBhbmNlc3RvciBtYXkgaGF2ZSBiZWVuIHJlbmRlcmVkLlxuICAgIGlmIChkb3duT25seSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBwYXJlbnQgPSB0aWxlLnBhcmVudDtcbiAgICBpZiAodGlsZUVkZ2UgPj0gVGlsZUVkZ2UuTk9SVEhXRVNUICYmIHBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBXaGVuIHdlJ3JlIGxvb2tpbmcgZm9yIGEgY29ybmVyLCB2ZXJpZnkgdGhhdCB0aGUgcGFyZW50IHRpbGUgaXMgc3RpbGwgcmVsZXZhbnQuXG4gICAgICAvLyBUaGF0IGlzLCB0aGUgcGFyZW50IGFuZCBjaGlsZCBtdXN0IHNoYXJlIHRoZSBjb3JuZXIgaW4gcXVlc3Rpb24uXG4gICAgICBzd2l0Y2ggKHRpbGVFZGdlKSB7XG4gICAgICAgIGNhc2UgVGlsZUVkZ2UuTk9SVEhXRVNUOlxuICAgICAgICAgIHRpbGUgPSB0aWxlID09PSBwYXJlbnQubm9ydGh3ZXN0Q2hpbGQgPyBwYXJlbnQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVGlsZUVkZ2UuTk9SVEhFQVNUOlxuICAgICAgICAgIHRpbGUgPSB0aWxlID09PSBwYXJlbnQubm9ydGhlYXN0Q2hpbGQgPyBwYXJlbnQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVGlsZUVkZ2UuU09VVEhXRVNUOlxuICAgICAgICAgIHRpbGUgPSB0aWxlID09PSBwYXJlbnQuc291dGh3ZXN0Q2hpbGQgPyBwYXJlbnQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVGlsZUVkZ2UuU09VVEhFQVNUOlxuICAgICAgICAgIHRpbGUgPSB0aWxlID09PSBwYXJlbnQuc291dGhlYXN0Q2hpbGQgPyBwYXJlbnQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbGUgPSBwYXJlbnQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRpbGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID09PSBUaWxlU2VsZWN0aW9uUmVzdWx0LlJFTkRFUkVEKSB7XG4gICAgaWYgKGRlZmluZWQodGlsZS5kYXRhLnZlcnRleEFycmF5KSkge1xuICAgICAgLy8gTm8gZnVydGhlciBwcm9jZXNzaW5nIG5lY2Vzc2FyeSBmb3IgcmVuZGVyYWJsZSB0aWxlcy5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmlzaXRUaWxlKFxuICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIHNvdXJjZVRpbGUsXG4gICAgICB0aWxlLFxuICAgICAgdGlsZUVkZ2UsXG4gICAgICBjdXJyZW50RnJhbWVOdW1iZXIsXG4gICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKFxuICAgIFRpbGVTZWxlY3Rpb25SZXN1bHQub3JpZ2luYWxSZXN1bHQoc3RhcnRUaWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0KSA9PT1cbiAgICBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRFxuICApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBUaGlzIHRpbGUgd2FzIHJlZmluZWQsIHNvIGZpbmQgcmVuZGVyZWQgY2hpbGRyZW4sIGlmIGFueS5cbiAgLy8gVmlzaXQgdGhlIHRpbGVzIGluIGNvdW50ZXItY2xvY2t3aXNlIG9yZGVyLlxuICBzd2l0Y2ggKHRpbGVFZGdlKSB7XG4gICAgY2FzZSBUaWxlRWRnZS5XRVNUOlxuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5ub3J0aHdlc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIHZpc2l0UmVuZGVyZWRUaWxlcyhcbiAgICAgICAgdGlsZVByb3ZpZGVyLFxuICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICBzb3VyY2VUaWxlLFxuICAgICAgICBzdGFydFRpbGUuc291dGh3ZXN0Q2hpbGQsXG4gICAgICAgIGN1cnJlbnRGcmFtZU51bWJlcixcbiAgICAgICAgdGlsZUVkZ2UsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHRyYXZlcnNhbFF1ZXVlLFxuICAgICAgICB2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3lcbiAgICAgICk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRpbGVFZGdlLkVBU1Q6XG4gICAgICB2aXNpdFJlbmRlcmVkVGlsZXMoXG4gICAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgc291cmNlVGlsZSxcbiAgICAgICAgc3RhcnRUaWxlLnNvdXRoZWFzdENoaWxkLFxuICAgICAgICBjdXJyZW50RnJhbWVOdW1iZXIsXG4gICAgICAgIHRpbGVFZGdlLFxuICAgICAgICB0cnVlLFxuICAgICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgICAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4gICAgICApO1xuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5ub3J0aGVhc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuU09VVEg6XG4gICAgICB2aXNpdFJlbmRlcmVkVGlsZXMoXG4gICAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgc291cmNlVGlsZSxcbiAgICAgICAgc3RhcnRUaWxlLnNvdXRod2VzdENoaWxkLFxuICAgICAgICBjdXJyZW50RnJhbWVOdW1iZXIsXG4gICAgICAgIHRpbGVFZGdlLFxuICAgICAgICB0cnVlLFxuICAgICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgICAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4gICAgICApO1xuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5zb3V0aGVhc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuTk9SVEg6XG4gICAgICB2aXNpdFJlbmRlcmVkVGlsZXMoXG4gICAgICAgIHRpbGVQcm92aWRlcixcbiAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgc291cmNlVGlsZSxcbiAgICAgICAgc3RhcnRUaWxlLm5vcnRoZWFzdENoaWxkLFxuICAgICAgICBjdXJyZW50RnJhbWVOdW1iZXIsXG4gICAgICAgIHRpbGVFZGdlLFxuICAgICAgICB0cnVlLFxuICAgICAgICB0cmF2ZXJzYWxRdWV1ZSxcbiAgICAgICAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4gICAgICApO1xuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5ub3J0aHdlc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuTk9SVEhXRVNUOlxuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5ub3J0aHdlc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuTk9SVEhFQVNUOlxuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5ub3J0aGVhc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuU09VVEhXRVNUOlxuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5zb3V0aHdlc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuU09VVEhFQVNUOlxuICAgICAgdmlzaXRSZW5kZXJlZFRpbGVzKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHN0YXJ0VGlsZS5zb3V0aGVhc3RDaGlsZCxcbiAgICAgICAgY3VycmVudEZyYW1lTnVtYmVyLFxuICAgICAgICB0aWxlRWRnZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdHJhdmVyc2FsUXVldWUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJJbnZhbGlkIGVkZ2VcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmlzaXRUaWxlKFxuICB0aWxlUHJvdmlkZXIsXG4gIGZyYW1lU3RhdGUsXG4gIHNvdXJjZVRpbGUsXG4gIGRlc3RpbmF0aW9uVGlsZSxcbiAgdGlsZUVkZ2UsXG4gIGZyYW1lTnVtYmVyLFxuICB0cmF2ZXJzYWxRdWV1ZSxcbiAgdmVydGV4QXJyYXlzVG9EZXN0cm95XG4pIHtcbiAgdmFyIGRlc3RpbmF0aW9uU3VyZmFjZVRpbGUgPSBkZXN0aW5hdGlvblRpbGUuZGF0YTtcblxuICBpZiAoZGVzdGluYXRpb25TdXJmYWNlVGlsZS5maWxsID09PSB1bmRlZmluZWQpIHtcbiAgICBkZXN0aW5hdGlvblN1cmZhY2VUaWxlLmZpbGwgPSBuZXcgVGVycmFpbkZpbGxNZXNoKGRlc3RpbmF0aW9uVGlsZSk7XG4gIH0gZWxzZSBpZiAoZGVzdGluYXRpb25TdXJmYWNlVGlsZS5maWxsLnZpc2l0ZWRGcmFtZSA9PT0gZnJhbWVOdW1iZXIpIHtcbiAgICAvLyBEb24ndCBwcm9wYWdhdGUgZWRnZXMgdG8gdGlsZXMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiB2aXNpdGVkIHRoaXMgZnJhbWUuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGRlc3RpbmF0aW9uU3VyZmFjZVRpbGUuZmlsbC5lbnF1ZXVlZEZyYW1lICE9PSBmcmFtZU51bWJlcikge1xuICAgIC8vIEZpcnN0IHRpbWUgdmlzaXRpbmcgdGhpcyB0aWxlIHRoaXMgZnJhbWUsIGFkZCBpdCB0byB0aGUgdHJhdmVyc2FsIHF1ZXVlLlxuICAgIGRlc3RpbmF0aW9uU3VyZmFjZVRpbGUuZmlsbC5lbnF1ZXVlZEZyYW1lID0gZnJhbWVOdW1iZXI7XG4gICAgZGVzdGluYXRpb25TdXJmYWNlVGlsZS5maWxsLmNoYW5nZWRUaGlzRnJhbWUgPSBmYWxzZTtcbiAgICB0cmF2ZXJzYWxRdWV1ZS5lbnF1ZXVlKGRlc3RpbmF0aW9uVGlsZSk7XG4gIH1cblxuICBwcm9wYWdhdGVFZGdlKFxuICAgIHRpbGVQcm92aWRlcixcbiAgICBmcmFtZVN0YXRlLFxuICAgIHNvdXJjZVRpbGUsXG4gICAgZGVzdGluYXRpb25UaWxlLFxuICAgIHRpbGVFZGdlLFxuICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICApO1xufVxuXG5mdW5jdGlvbiBwcm9wYWdhdGVFZGdlKFxuICB0aWxlUHJvdmlkZXIsXG4gIGZyYW1lU3RhdGUsXG4gIHNvdXJjZVRpbGUsXG4gIGRlc3RpbmF0aW9uVGlsZSxcbiAgdGlsZUVkZ2UsXG4gIHZlcnRleEFycmF5c1RvRGVzdHJveVxuKSB7XG4gIHZhciBkZXN0aW5hdGlvbkZpbGwgPSBkZXN0aW5hdGlvblRpbGUuZGF0YS5maWxsO1xuXG4gIHZhciBzb3VyY2VNZXNoO1xuICB2YXIgc291cmNlRmlsbCA9IHNvdXJjZVRpbGUuZGF0YS5maWxsO1xuICBpZiAoZGVmaW5lZChzb3VyY2VGaWxsKSkge1xuICAgIHNvdXJjZUZpbGwudmlzaXRlZEZyYW1lID0gZnJhbWVTdGF0ZS5mcmFtZU51bWJlcjtcblxuICAgIC8vIFNvdXJjZSBpcyBhIGZpbGwsIGNyZWF0ZS91cGRhdGUgaXQgaWYgbmVjZXNzYXJ5LlxuICAgIGlmIChzb3VyY2VGaWxsLmNoYW5nZWRUaGlzRnJhbWUpIHtcbiAgICAgIGNyZWF0ZUZpbGxNZXNoKFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgIHZlcnRleEFycmF5c1RvRGVzdHJveVxuICAgICAgKTtcbiAgICAgIHNvdXJjZUZpbGwuY2hhbmdlZFRoaXNGcmFtZSA9IGZhbHNlO1xuICAgIH1cbiAgICBzb3VyY2VNZXNoID0gc291cmNlVGlsZS5kYXRhLmZpbGwubWVzaDtcbiAgfSBlbHNlIHtcbiAgICBzb3VyY2VNZXNoID0gc291cmNlVGlsZS5kYXRhLm1lc2g7XG4gIH1cblxuICB2YXIgZWRnZU1lc2hlcztcbiAgdmFyIGVkZ2VUaWxlcztcblxuICBzd2l0Y2ggKHRpbGVFZGdlKSB7XG4gICAgY2FzZSBUaWxlRWRnZS5XRVNUOlxuICAgICAgZWRnZU1lc2hlcyA9IGRlc3RpbmF0aW9uRmlsbC53ZXN0TWVzaGVzO1xuICAgICAgZWRnZVRpbGVzID0gZGVzdGluYXRpb25GaWxsLndlc3RUaWxlcztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuU09VVEg6XG4gICAgICBlZGdlTWVzaGVzID0gZGVzdGluYXRpb25GaWxsLnNvdXRoTWVzaGVzO1xuICAgICAgZWRnZVRpbGVzID0gZGVzdGluYXRpb25GaWxsLnNvdXRoVGlsZXM7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRpbGVFZGdlLkVBU1Q6XG4gICAgICBlZGdlTWVzaGVzID0gZGVzdGluYXRpb25GaWxsLmVhc3RNZXNoZXM7XG4gICAgICBlZGdlVGlsZXMgPSBkZXN0aW5hdGlvbkZpbGwuZWFzdFRpbGVzO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUaWxlRWRnZS5OT1JUSDpcbiAgICAgIGVkZ2VNZXNoZXMgPSBkZXN0aW5hdGlvbkZpbGwubm9ydGhNZXNoZXM7XG4gICAgICBlZGdlVGlsZXMgPSBkZXN0aW5hdGlvbkZpbGwubm9ydGhUaWxlcztcbiAgICAgIGJyZWFrO1xuICAgIC8vIENvcm5lcnMgYXJlIHNpbXBsZXIuXG4gICAgY2FzZSBUaWxlRWRnZS5OT1JUSFdFU1Q6XG4gICAgICBkZXN0aW5hdGlvbkZpbGwuY2hhbmdlZFRoaXNGcmFtZSA9XG4gICAgICAgIGRlc3RpbmF0aW9uRmlsbC5jaGFuZ2VkVGhpc0ZyYW1lIHx8XG4gICAgICAgIGRlc3RpbmF0aW9uRmlsbC5ub3J0aHdlc3RNZXNoICE9PSBzb3VyY2VNZXNoO1xuICAgICAgZGVzdGluYXRpb25GaWxsLm5vcnRod2VzdE1lc2ggPSBzb3VyY2VNZXNoO1xuICAgICAgZGVzdGluYXRpb25GaWxsLm5vcnRod2VzdFRpbGUgPSBzb3VyY2VUaWxlO1xuICAgICAgcmV0dXJuO1xuICAgIGNhc2UgVGlsZUVkZ2UuTk9SVEhFQVNUOlxuICAgICAgZGVzdGluYXRpb25GaWxsLmNoYW5nZWRUaGlzRnJhbWUgPVxuICAgICAgICBkZXN0aW5hdGlvbkZpbGwuY2hhbmdlZFRoaXNGcmFtZSB8fFxuICAgICAgICBkZXN0aW5hdGlvbkZpbGwubm9ydGhlYXN0TWVzaCAhPT0gc291cmNlTWVzaDtcbiAgICAgIGRlc3RpbmF0aW9uRmlsbC5ub3J0aGVhc3RNZXNoID0gc291cmNlTWVzaDtcbiAgICAgIGRlc3RpbmF0aW9uRmlsbC5ub3J0aGVhc3RUaWxlID0gc291cmNlVGlsZTtcbiAgICAgIHJldHVybjtcbiAgICBjYXNlIFRpbGVFZGdlLlNPVVRIV0VTVDpcbiAgICAgIGRlc3RpbmF0aW9uRmlsbC5jaGFuZ2VkVGhpc0ZyYW1lID1cbiAgICAgICAgZGVzdGluYXRpb25GaWxsLmNoYW5nZWRUaGlzRnJhbWUgfHxcbiAgICAgICAgZGVzdGluYXRpb25GaWxsLnNvdXRod2VzdE1lc2ggIT09IHNvdXJjZU1lc2g7XG4gICAgICBkZXN0aW5hdGlvbkZpbGwuc291dGh3ZXN0TWVzaCA9IHNvdXJjZU1lc2g7XG4gICAgICBkZXN0aW5hdGlvbkZpbGwuc291dGh3ZXN0VGlsZSA9IHNvdXJjZVRpbGU7XG4gICAgICByZXR1cm47XG4gICAgY2FzZSBUaWxlRWRnZS5TT1VUSEVBU1Q6XG4gICAgICBkZXN0aW5hdGlvbkZpbGwuY2hhbmdlZFRoaXNGcmFtZSA9XG4gICAgICAgIGRlc3RpbmF0aW9uRmlsbC5jaGFuZ2VkVGhpc0ZyYW1lIHx8XG4gICAgICAgIGRlc3RpbmF0aW9uRmlsbC5zb3V0aGVhc3RNZXNoICE9PSBzb3VyY2VNZXNoO1xuICAgICAgZGVzdGluYXRpb25GaWxsLnNvdXRoZWFzdE1lc2ggPSBzb3VyY2VNZXNoO1xuICAgICAgZGVzdGluYXRpb25GaWxsLnNvdXRoZWFzdFRpbGUgPSBzb3VyY2VUaWxlO1xuICAgICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHNvdXJjZVRpbGUubGV2ZWwgPD0gZGVzdGluYXRpb25UaWxlLmxldmVsKSB7XG4gICAgLy8gU291cmNlIGVkZ2UgY29tcGxldGVseSBzcGFucyB0aGUgZGVzdGluYXRpb24gZWRnZS5cbiAgICBkZXN0aW5hdGlvbkZpbGwuY2hhbmdlZFRoaXNGcmFtZSA9XG4gICAgICBkZXN0aW5hdGlvbkZpbGwuY2hhbmdlZFRoaXNGcmFtZSB8fFxuICAgICAgZWRnZU1lc2hlc1swXSAhPT0gc291cmNlTWVzaCB8fFxuICAgICAgZWRnZU1lc2hlcy5sZW5ndGggIT09IDE7XG4gICAgZWRnZU1lc2hlc1swXSA9IHNvdXJjZU1lc2g7XG4gICAgZWRnZVRpbGVzWzBdID0gc291cmNlVGlsZTtcbiAgICBlZGdlTWVzaGVzLmxlbmd0aCA9IDE7XG4gICAgZWRnZVRpbGVzLmxlbmd0aCA9IDE7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU291cmNlIGVkZ2UgaXMgYSBzdWJzZXQgb2YgdGhlIGRlc3RpbmF0aW9uIGVkZ2UuXG4gIC8vIEZpZ3VyZSBvdXQgdGhlIHJhbmdlIG9mIG1lc2hlcyB3ZSdyZSByZXBsYWNpbmcuXG4gIHZhciBzdGFydEluZGV4LCBlbmRJbmRleCwgZXhpc3RpbmdUaWxlLCBleGlzdGluZ1JlY3RhbmdsZTtcbiAgdmFyIHNvdXJjZVJlY3RhbmdsZSA9IHNvdXJjZVRpbGUucmVjdGFuZ2xlO1xuXG4gIHZhciBlcHNpbG9uO1xuICB2YXIgZGVzdGluYXRpb25SZWN0YW5nbGUgPSBkZXN0aW5hdGlvblRpbGUucmVjdGFuZ2xlO1xuXG4gIHN3aXRjaCAodGlsZUVkZ2UpIHtcbiAgICBjYXNlIFRpbGVFZGdlLldFU1Q6XG4gICAgICBlcHNpbG9uID1cbiAgICAgICAgKGRlc3RpbmF0aW9uUmVjdGFuZ2xlLm5vcnRoIC0gZGVzdGluYXRpb25SZWN0YW5nbGUuc291dGgpICpcbiAgICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ONTtcblxuICAgICAgZm9yIChzdGFydEluZGV4ID0gMDsgc3RhcnRJbmRleCA8IGVkZ2VUaWxlcy5sZW5ndGg7ICsrc3RhcnRJbmRleCkge1xuICAgICAgICBleGlzdGluZ1RpbGUgPSBlZGdlVGlsZXNbc3RhcnRJbmRleF07XG4gICAgICAgIGV4aXN0aW5nUmVjdGFuZ2xlID0gZXhpc3RpbmdUaWxlLnJlY3RhbmdsZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIENlc2l1bU1hdGguZ3JlYXRlclRoYW4oXG4gICAgICAgICAgICBzb3VyY2VSZWN0YW5nbGUubm9ydGgsXG4gICAgICAgICAgICBleGlzdGluZ1JlY3RhbmdsZS5zb3V0aCxcbiAgICAgICAgICAgIGVwc2lsb25cbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGVuZEluZGV4ID0gc3RhcnRJbmRleDsgZW5kSW5kZXggPCBlZGdlVGlsZXMubGVuZ3RoOyArK2VuZEluZGV4KSB7XG4gICAgICAgIGV4aXN0aW5nVGlsZSA9IGVkZ2VUaWxlc1tlbmRJbmRleF07XG4gICAgICAgIGV4aXN0aW5nUmVjdGFuZ2xlID0gZXhpc3RpbmdUaWxlLnJlY3RhbmdsZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIENlc2l1bU1hdGguZ3JlYXRlclRoYW5PckVxdWFscyhcbiAgICAgICAgICAgIHNvdXJjZVJlY3RhbmdsZS5zb3V0aCxcbiAgICAgICAgICAgIGV4aXN0aW5nUmVjdGFuZ2xlLm5vcnRoLFxuICAgICAgICAgICAgZXBzaWxvblxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuU09VVEg6XG4gICAgICBlcHNpbG9uID1cbiAgICAgICAgKGRlc3RpbmF0aW9uUmVjdGFuZ2xlLmVhc3QgLSBkZXN0aW5hdGlvblJlY3RhbmdsZS53ZXN0KSAqXG4gICAgICAgIENlc2l1bU1hdGguRVBTSUxPTjU7XG5cbiAgICAgIGZvciAoc3RhcnRJbmRleCA9IDA7IHN0YXJ0SW5kZXggPCBlZGdlVGlsZXMubGVuZ3RoOyArK3N0YXJ0SW5kZXgpIHtcbiAgICAgICAgZXhpc3RpbmdUaWxlID0gZWRnZVRpbGVzW3N0YXJ0SW5kZXhdO1xuICAgICAgICBleGlzdGluZ1JlY3RhbmdsZSA9IGV4aXN0aW5nVGlsZS5yZWN0YW5nbGU7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDZXNpdW1NYXRoLmxlc3NUaGFuKFxuICAgICAgICAgICAgc291cmNlUmVjdGFuZ2xlLndlc3QsXG4gICAgICAgICAgICBleGlzdGluZ1JlY3RhbmdsZS5lYXN0LFxuICAgICAgICAgICAgZXBzaWxvblxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoZW5kSW5kZXggPSBzdGFydEluZGV4OyBlbmRJbmRleCA8IGVkZ2VUaWxlcy5sZW5ndGg7ICsrZW5kSW5kZXgpIHtcbiAgICAgICAgZXhpc3RpbmdUaWxlID0gZWRnZVRpbGVzW2VuZEluZGV4XTtcbiAgICAgICAgZXhpc3RpbmdSZWN0YW5nbGUgPSBleGlzdGluZ1RpbGUucmVjdGFuZ2xlO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgQ2VzaXVtTWF0aC5sZXNzVGhhbk9yRXF1YWxzKFxuICAgICAgICAgICAgc291cmNlUmVjdGFuZ2xlLmVhc3QsXG4gICAgICAgICAgICBleGlzdGluZ1JlY3RhbmdsZS53ZXN0LFxuICAgICAgICAgICAgZXBzaWxvblxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuRUFTVDpcbiAgICAgIGVwc2lsb24gPVxuICAgICAgICAoZGVzdGluYXRpb25SZWN0YW5nbGUubm9ydGggLSBkZXN0aW5hdGlvblJlY3RhbmdsZS5zb3V0aCkgKlxuICAgICAgICBDZXNpdW1NYXRoLkVQU0lMT041O1xuXG4gICAgICBmb3IgKHN0YXJ0SW5kZXggPSAwOyBzdGFydEluZGV4IDwgZWRnZVRpbGVzLmxlbmd0aDsgKytzdGFydEluZGV4KSB7XG4gICAgICAgIGV4aXN0aW5nVGlsZSA9IGVkZ2VUaWxlc1tzdGFydEluZGV4XTtcbiAgICAgICAgZXhpc3RpbmdSZWN0YW5nbGUgPSBleGlzdGluZ1RpbGUucmVjdGFuZ2xlO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgQ2VzaXVtTWF0aC5sZXNzVGhhbihcbiAgICAgICAgICAgIHNvdXJjZVJlY3RhbmdsZS5zb3V0aCxcbiAgICAgICAgICAgIGV4aXN0aW5nUmVjdGFuZ2xlLm5vcnRoLFxuICAgICAgICAgICAgZXBzaWxvblxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoZW5kSW5kZXggPSBzdGFydEluZGV4OyBlbmRJbmRleCA8IGVkZ2VUaWxlcy5sZW5ndGg7ICsrZW5kSW5kZXgpIHtcbiAgICAgICAgZXhpc3RpbmdUaWxlID0gZWRnZVRpbGVzW2VuZEluZGV4XTtcbiAgICAgICAgZXhpc3RpbmdSZWN0YW5nbGUgPSBleGlzdGluZ1RpbGUucmVjdGFuZ2xlO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgQ2VzaXVtTWF0aC5sZXNzVGhhbk9yRXF1YWxzKFxuICAgICAgICAgICAgc291cmNlUmVjdGFuZ2xlLm5vcnRoLFxuICAgICAgICAgICAgZXhpc3RpbmdSZWN0YW5nbGUuc291dGgsXG4gICAgICAgICAgICBlcHNpbG9uXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUaWxlRWRnZS5OT1JUSDpcbiAgICAgIGVwc2lsb24gPVxuICAgICAgICAoZGVzdGluYXRpb25SZWN0YW5nbGUuZWFzdCAtIGRlc3RpbmF0aW9uUmVjdGFuZ2xlLndlc3QpICpcbiAgICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ONTtcblxuICAgICAgZm9yIChzdGFydEluZGV4ID0gMDsgc3RhcnRJbmRleCA8IGVkZ2VUaWxlcy5sZW5ndGg7ICsrc3RhcnRJbmRleCkge1xuICAgICAgICBleGlzdGluZ1RpbGUgPSBlZGdlVGlsZXNbc3RhcnRJbmRleF07XG4gICAgICAgIGV4aXN0aW5nUmVjdGFuZ2xlID0gZXhpc3RpbmdUaWxlLnJlY3RhbmdsZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIENlc2l1bU1hdGguZ3JlYXRlclRoYW4oXG4gICAgICAgICAgICBzb3VyY2VSZWN0YW5nbGUuZWFzdCxcbiAgICAgICAgICAgIGV4aXN0aW5nUmVjdGFuZ2xlLndlc3QsXG4gICAgICAgICAgICBlcHNpbG9uXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChlbmRJbmRleCA9IHN0YXJ0SW5kZXg7IGVuZEluZGV4IDwgZWRnZVRpbGVzLmxlbmd0aDsgKytlbmRJbmRleCkge1xuICAgICAgICBleGlzdGluZ1RpbGUgPSBlZGdlVGlsZXNbZW5kSW5kZXhdO1xuICAgICAgICBleGlzdGluZ1JlY3RhbmdsZSA9IGV4aXN0aW5nVGlsZS5yZWN0YW5nbGU7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDZXNpdW1NYXRoLmdyZWF0ZXJUaGFuT3JFcXVhbHMoXG4gICAgICAgICAgICBzb3VyY2VSZWN0YW5nbGUud2VzdCxcbiAgICAgICAgICAgIGV4aXN0aW5nUmVjdGFuZ2xlLmVhc3QsXG4gICAgICAgICAgICBlcHNpbG9uXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH1cblxuICBpZiAoZW5kSW5kZXggLSBzdGFydEluZGV4ID09PSAxKSB7XG4gICAgZGVzdGluYXRpb25GaWxsLmNoYW5nZWRUaGlzRnJhbWUgPVxuICAgICAgZGVzdGluYXRpb25GaWxsLmNoYW5nZWRUaGlzRnJhbWUgfHwgZWRnZU1lc2hlc1tzdGFydEluZGV4XSAhPT0gc291cmNlTWVzaDtcbiAgICBlZGdlTWVzaGVzW3N0YXJ0SW5kZXhdID0gc291cmNlTWVzaDtcbiAgICBlZGdlVGlsZXNbc3RhcnRJbmRleF0gPSBzb3VyY2VUaWxlO1xuICB9IGVsc2Uge1xuICAgIGRlc3RpbmF0aW9uRmlsbC5jaGFuZ2VkVGhpc0ZyYW1lID0gdHJ1ZTtcbiAgICBlZGdlTWVzaGVzLnNwbGljZShzdGFydEluZGV4LCBlbmRJbmRleCAtIHN0YXJ0SW5kZXgsIHNvdXJjZU1lc2gpO1xuICAgIGVkZ2VUaWxlcy5zcGxpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXggLSBzdGFydEluZGV4LCBzb3VyY2VUaWxlKTtcbiAgfVxufVxuXG52YXIgY2FydG9ncmFwaGljU2NyYXRjaCA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBjZW50ZXJDYXJ0b2dyYXBoaWNTY3JhdGNoID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIGNhcnRlc2lhblNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIG5vcm1hbFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIG9jdEVuY29kZWROb3JtYWxTY3JhdGNoID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciB1dlNjcmF0Y2gyID0gbmV3IENhcnRlc2lhbjIoKTtcbnZhciB1dlNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMigpO1xuXG5mdW5jdGlvbiBIZWlnaHRBbmROb3JtYWwoKSB7XG4gIHRoaXMuaGVpZ2h0ID0gMC4wO1xuICB0aGlzLmVuY29kZWROb3JtYWwgPSBuZXcgQ2FydGVzaWFuMigpO1xufVxuXG5mdW5jdGlvbiBmaWxsTWlzc2luZ0Nvcm5lcihcbiAgZmlsbCxcbiAgZWxsaXBzb2lkLFxuICB1LFxuICB2LFxuICBjb3JuZXIsXG4gIGFkamFjZW50Q29ybmVyMSxcbiAgYWRqYWNlbnRDb3JuZXIyLFxuICBvcHBvc2l0ZUNvcm5lcixcbiAgdmVydGV4XG4pIHtcbiAgaWYgKGRlZmluZWQoY29ybmVyKSkge1xuICAgIHJldHVybiBjb3JuZXI7XG4gIH1cblxuICB2YXIgaGVpZ2h0O1xuXG4gIGlmIChkZWZpbmVkKGFkamFjZW50Q29ybmVyMSkgJiYgZGVmaW5lZChhZGphY2VudENvcm5lcjIpKSB7XG4gICAgaGVpZ2h0ID0gKGFkamFjZW50Q29ybmVyMS5oZWlnaHQgKyBhZGphY2VudENvcm5lcjIuaGVpZ2h0KSAqIDAuNTtcbiAgfSBlbHNlIGlmIChkZWZpbmVkKGFkamFjZW50Q29ybmVyMSkpIHtcbiAgICBoZWlnaHQgPSBhZGphY2VudENvcm5lcjEuaGVpZ2h0O1xuICB9IGVsc2UgaWYgKGRlZmluZWQoYWRqYWNlbnRDb3JuZXIyKSkge1xuICAgIGhlaWdodCA9IGFkamFjZW50Q29ybmVyMi5oZWlnaHQ7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChvcHBvc2l0ZUNvcm5lcikpIHtcbiAgICBoZWlnaHQgPSBvcHBvc2l0ZUNvcm5lci5oZWlnaHQ7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHN1cmZhY2VUaWxlID0gZmlsbC50aWxlLmRhdGE7XG4gICAgdmFyIHRpbGVCb3VuZGluZ1JlZ2lvbiA9IHN1cmZhY2VUaWxlLnRpbGVCb3VuZGluZ1JlZ2lvbjtcbiAgICB2YXIgbWluaW11bUhlaWdodCA9IDAuMDtcbiAgICB2YXIgbWF4aW11bUhlaWdodCA9IDAuMDtcbiAgICBpZiAoZGVmaW5lZCh0aWxlQm91bmRpbmdSZWdpb24pKSB7XG4gICAgICBtaW5pbXVtSGVpZ2h0ID0gdGlsZUJvdW5kaW5nUmVnaW9uLm1pbmltdW1IZWlnaHQ7XG4gICAgICBtYXhpbXVtSGVpZ2h0ID0gdGlsZUJvdW5kaW5nUmVnaW9uLm1heGltdW1IZWlnaHQ7XG4gICAgfVxuICAgIGhlaWdodCA9IChtaW5pbXVtSGVpZ2h0ICsgbWF4aW11bUhlaWdodCkgKiAwLjU7XG4gIH1cblxuICBnZXRWZXJ0ZXhXaXRoSGVpZ2h0QXRDb3JuZXIoZmlsbCwgZWxsaXBzb2lkLCB1LCB2LCBoZWlnaHQsIHZlcnRleCk7XG4gIHJldHVybiB2ZXJ0ZXg7XG59XG5cbnZhciBoZWlnaHRSYW5nZVNjcmF0Y2ggPSB7XG4gIG1pbmltdW1IZWlnaHQ6IDAuMCxcbiAgbWF4aW11bUhlaWdodDogMC4wLFxufTtcblxudmFyIHNjcmF0Y2hDZW50ZXIgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHN3VmVydGV4U2NyYXRjaCA9IG5ldyBIZWlnaHRBbmROb3JtYWwoKTtcbnZhciBzZVZlcnRleFNjcmF0Y2ggPSBuZXcgSGVpZ2h0QW5kTm9ybWFsKCk7XG52YXIgbndWZXJ0ZXhTY3JhdGNoID0gbmV3IEhlaWdodEFuZE5vcm1hbCgpO1xudmFyIG5lVmVydGV4U2NyYXRjaCA9IG5ldyBIZWlnaHRBbmROb3JtYWwoKTtcbnZhciBoZWlnaHRtYXBCdWZmZXIgPVxuICB0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIiA/IG5ldyBVaW50OEFycmF5KDkgKiA5KSA6IHVuZGVmaW5lZDtcblxudmFyIHNjcmF0Y2hDcmVhdGVNZXNoU3luY09wdGlvbnMgPSB7XG4gIHRpbGluZ1NjaGVtZTogdW5kZWZpbmVkLFxuICB4OiAwLFxuICB5OiAwLFxuICBsZXZlbDogMCxcbiAgZXhhZ2dlcmF0aW9uOiAxLjAsXG4gIGV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0OiAwLjAsXG59O1xuZnVuY3Rpb24gY3JlYXRlRmlsbE1lc2godGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCB0aWxlLCB2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3kpIHtcbiAgR2xvYmVTdXJmYWNlVGlsZS5pbml0aWFsaXplKFxuICAgIHRpbGUsXG4gICAgdGlsZVByb3ZpZGVyLnRlcnJhaW5Qcm92aWRlcixcbiAgICB0aWxlUHJvdmlkZXIuX2ltYWdlcnlMYXllcnNcbiAgKTtcblxuICB2YXIgc3VyZmFjZVRpbGUgPSB0aWxlLmRhdGE7XG4gIHZhciBmaWxsID0gc3VyZmFjZVRpbGUuZmlsbDtcbiAgdmFyIHJlY3RhbmdsZSA9IHRpbGUucmVjdGFuZ2xlO1xuXG4gIHZhciBleGFnZ2VyYXRpb24gPSBmcmFtZVN0YXRlLnRlcnJhaW5FeGFnZ2VyYXRpb247XG4gIHZhciBleGFnZ2VyYXRpb25SZWxhdGl2ZUhlaWdodCA9IGZyYW1lU3RhdGUudGVycmFpbkV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0O1xuICB2YXIgaGFzRXhhZ2dlcmF0aW9uID0gZXhhZ2dlcmF0aW9uICE9PSAxLjA7XG5cbiAgdmFyIGVsbGlwc29pZCA9IHRpbGUudGlsaW5nU2NoZW1lLmVsbGlwc29pZDtcblxuICB2YXIgbndDb3JuZXIgPSBnZXRDb3JuZXIoXG4gICAgZmlsbCxcbiAgICBlbGxpcHNvaWQsXG4gICAgMC4wLFxuICAgIDEuMCxcbiAgICBmaWxsLm5vcnRod2VzdFRpbGUsXG4gICAgZmlsbC5ub3J0aHdlc3RNZXNoLFxuICAgIGZpbGwubm9ydGhUaWxlcyxcbiAgICBmaWxsLm5vcnRoTWVzaGVzLFxuICAgIGZpbGwud2VzdFRpbGVzLFxuICAgIGZpbGwud2VzdE1lc2hlcyxcbiAgICBud1ZlcnRleFNjcmF0Y2hcbiAgKTtcbiAgdmFyIHN3Q29ybmVyID0gZ2V0Q29ybmVyKFxuICAgIGZpbGwsXG4gICAgZWxsaXBzb2lkLFxuICAgIDAuMCxcbiAgICAwLjAsXG4gICAgZmlsbC5zb3V0aHdlc3RUaWxlLFxuICAgIGZpbGwuc291dGh3ZXN0TWVzaCxcbiAgICBmaWxsLndlc3RUaWxlcyxcbiAgICBmaWxsLndlc3RNZXNoZXMsXG4gICAgZmlsbC5zb3V0aFRpbGVzLFxuICAgIGZpbGwuc291dGhNZXNoZXMsXG4gICAgc3dWZXJ0ZXhTY3JhdGNoXG4gICk7XG4gIHZhciBzZUNvcm5lciA9IGdldENvcm5lcihcbiAgICBmaWxsLFxuICAgIGVsbGlwc29pZCxcbiAgICAxLjAsXG4gICAgMC4wLFxuICAgIGZpbGwuc291dGhlYXN0VGlsZSxcbiAgICBmaWxsLnNvdXRoZWFzdE1lc2gsXG4gICAgZmlsbC5zb3V0aFRpbGVzLFxuICAgIGZpbGwuc291dGhNZXNoZXMsXG4gICAgZmlsbC5lYXN0VGlsZXMsXG4gICAgZmlsbC5lYXN0TWVzaGVzLFxuICAgIHNlVmVydGV4U2NyYXRjaFxuICApO1xuICB2YXIgbmVDb3JuZXIgPSBnZXRDb3JuZXIoXG4gICAgZmlsbCxcbiAgICBlbGxpcHNvaWQsXG4gICAgMS4wLFxuICAgIDEuMCxcbiAgICBmaWxsLm5vcnRoZWFzdFRpbGUsXG4gICAgZmlsbC5ub3J0aGVhc3RNZXNoLFxuICAgIGZpbGwuZWFzdFRpbGVzLFxuICAgIGZpbGwuZWFzdE1lc2hlcyxcbiAgICBmaWxsLm5vcnRoVGlsZXMsXG4gICAgZmlsbC5ub3J0aE1lc2hlcyxcbiAgICBuZVZlcnRleFNjcmF0Y2hcbiAgKTtcblxuICBud0Nvcm5lciA9IGZpbGxNaXNzaW5nQ29ybmVyKFxuICAgIGZpbGwsXG4gICAgZWxsaXBzb2lkLFxuICAgIDAuMCxcbiAgICAxLjAsXG4gICAgbndDb3JuZXIsXG4gICAgc3dDb3JuZXIsXG4gICAgbmVDb3JuZXIsXG4gICAgc2VDb3JuZXIsXG4gICAgbndWZXJ0ZXhTY3JhdGNoXG4gICk7XG4gIHN3Q29ybmVyID0gZmlsbE1pc3NpbmdDb3JuZXIoXG4gICAgZmlsbCxcbiAgICBlbGxpcHNvaWQsXG4gICAgMC4wLFxuICAgIDAuMCxcbiAgICBzd0Nvcm5lcixcbiAgICBud0Nvcm5lcixcbiAgICBzZUNvcm5lcixcbiAgICBuZUNvcm5lcixcbiAgICBzd1ZlcnRleFNjcmF0Y2hcbiAgKTtcbiAgc2VDb3JuZXIgPSBmaWxsTWlzc2luZ0Nvcm5lcihcbiAgICBmaWxsLFxuICAgIGVsbGlwc29pZCxcbiAgICAxLjAsXG4gICAgMS4wLFxuICAgIHNlQ29ybmVyLFxuICAgIHN3Q29ybmVyLFxuICAgIG5lQ29ybmVyLFxuICAgIG53Q29ybmVyLFxuICAgIHNlVmVydGV4U2NyYXRjaFxuICApO1xuICBuZUNvcm5lciA9IGZpbGxNaXNzaW5nQ29ybmVyKFxuICAgIGZpbGwsXG4gICAgZWxsaXBzb2lkLFxuICAgIDEuMCxcbiAgICAxLjAsXG4gICAgbmVDb3JuZXIsXG4gICAgc2VDb3JuZXIsXG4gICAgbndDb3JuZXIsXG4gICAgc3dDb3JuZXIsXG4gICAgbmVWZXJ0ZXhTY3JhdGNoXG4gICk7XG5cbiAgdmFyIHNvdXRod2VzdEhlaWdodCA9IHN3Q29ybmVyLmhlaWdodDtcbiAgdmFyIHNvdXRoZWFzdEhlaWdodCA9IHNlQ29ybmVyLmhlaWdodDtcbiAgdmFyIG5vcnRod2VzdEhlaWdodCA9IG53Q29ybmVyLmhlaWdodDtcbiAgdmFyIG5vcnRoZWFzdEhlaWdodCA9IG5lQ29ybmVyLmhlaWdodDtcblxuICB2YXIgbWluaW11bUhlaWdodCA9IE1hdGgubWluKFxuICAgIHNvdXRod2VzdEhlaWdodCxcbiAgICBzb3V0aGVhc3RIZWlnaHQsXG4gICAgbm9ydGh3ZXN0SGVpZ2h0LFxuICAgIG5vcnRoZWFzdEhlaWdodFxuICApO1xuICB2YXIgbWF4aW11bUhlaWdodCA9IE1hdGgubWF4KFxuICAgIHNvdXRod2VzdEhlaWdodCxcbiAgICBzb3V0aGVhc3RIZWlnaHQsXG4gICAgbm9ydGh3ZXN0SGVpZ2h0LFxuICAgIG5vcnRoZWFzdEhlaWdodFxuICApO1xuXG4gIHZhciBtaWRkbGVIZWlnaHQgPSAobWluaW11bUhlaWdodCArIG1heGltdW1IZWlnaHQpICogMC41O1xuXG4gIHZhciBpO1xuICB2YXIgbGVuO1xuXG4gIC8vIEZvciBsb3ctZGV0YWlsIHRpbGVzLCBvdXIgdXN1YWwgZmlsbCB0aWxlIGFwcHJvYWNoIHdpbGwgY3JlYXRlIHRpbGVzIHRoYXRcbiAgLy8gbG9vayByZWFsbHkgYmxvY2t5IGJlY2F1c2UgdGhleSBkb24ndCBoYXZlIGVub3VnaCB2ZXJ0aWNlcyB0byBhY2NvdW50IGZvciB0aGVcbiAgLy8gRWFydGgncyBjdXJ2YXR1cmUuIEJ1dCB0aGUgaGVpZ2h0IHJhbmdlIHdpbGwgYWxzbyB0eXBpY2FsbHkgYmUgd2VsbCB3aXRoaW5cbiAgLy8gdGhlIGFsbG93ZWQgZ2VvbWV0cmljIGVycm9yIGZvciB0aG9zZSBsZXZlbHMuIFNvIGZpbGwgc3VjaCB0aWxlcyB3aXRoIGFcbiAgLy8gY29uc3RhbnQtaGVpZ2h0IGhlaWdodG1hcC5cbiAgdmFyIGdlb21ldHJpY0Vycm9yID0gdGlsZVByb3ZpZGVyLmdldExldmVsTWF4aW11bUdlb21ldHJpY0Vycm9yKHRpbGUubGV2ZWwpO1xuICB2YXIgbWluQ3V0VGhyb3VnaFJhZGl1cyA9IGVsbGlwc29pZC5tYXhpbXVtUmFkaXVzIC0gZ2VvbWV0cmljRXJyb3I7XG4gIHZhciBtYXhUaWxlV2lkdGggPVxuICAgIE1hdGguYWNvcyhtaW5DdXRUaHJvdWdoUmFkaXVzIC8gZWxsaXBzb2lkLm1heGltdW1SYWRpdXMpICogNC4wO1xuXG4gIC8vIFdoZW4gdGhlIHRpbGUgd2lkdGggaXMgZ3JlYXRlciB0aGFuIG1heFRpbGVXaWR0aCBhcyBjb21wdXRlZCBhYm92ZSwgdGhlIGVycm9yXG4gIC8vIG9mIGEgbm9ybWFsIGZpbGwgdGlsZSBmcm9tIGdsb2JlIGN1cnZhdHVyZSBhbG9uZSB3aWxsIGV4Y2VlZCB0aGUgYWxsb3dlZCBnZW9tZXRyaWNcbiAgLy8gZXJyb3IuIFRlcnJhaW4gd29uJ3QgY2hhbmdlIHRoYXQgbXVjaC4gSG93ZXZlciwgd2UgY2FuIGFsbG93IG1vcmUgZXJyb3IgdGhhbiB0aGF0LlxuICAvLyBBIGxpdHRsZSBibG9ja2luZXNzIGR1cmluZyBsb2FkIGlzIGFjY2VwdGFibGUuIEZvciB0aGUgV0dTODQgZWxsaXBzb2lkIGFuZFxuICAvLyBzdGFuZGFyZCBnZW9tZXRyaWMgZXJyb3Igc2V0dXAsIHRoZSB2YWx1ZSBoZXJlIHdpbGwgaGF2ZSB1cyB1c2UgYSBoZWlnaHRtYXBcbiAgLy8gYXQgbGV2ZWxzIDEsIDIsIGFuZCAzLlxuICBtYXhUaWxlV2lkdGggKj0gMS41O1xuXG4gIGlmIChcbiAgICByZWN0YW5nbGUud2lkdGggPiBtYXhUaWxlV2lkdGggJiZcbiAgICBtYXhpbXVtSGVpZ2h0IC0gbWluaW11bUhlaWdodCA8PSBnZW9tZXRyaWNFcnJvclxuICApIHtcbiAgICB2YXIgdGVycmFpbkRhdGEgPSBuZXcgSGVpZ2h0bWFwVGVycmFpbkRhdGEoe1xuICAgICAgd2lkdGg6IDksXG4gICAgICBoZWlnaHQ6IDksXG4gICAgICBidWZmZXI6IGhlaWdodG1hcEJ1ZmZlcixcbiAgICAgIHN0cnVjdHVyZToge1xuICAgICAgICAvLyBVc2UgdGhlIG1heGltdW0gYXMgdGhlIGNvbnN0YW50IGhlaWdodCBzbyB0aGF0IHRoaXMgdGlsZSdzIHNraXJ0XG4gICAgICAgIC8vIGNvdmVycyBhbnkgY3JhY2tzIHdpdGggYWRqYWNlbnQgdGlsZXMuXG4gICAgICAgIGhlaWdodE9mZnNldDogbWF4aW11bUhlaWdodCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB2YXIgY3JlYXRlTWVzaFN5bmNPcHRpb25zID0gc2NyYXRjaENyZWF0ZU1lc2hTeW5jT3B0aW9ucztcbiAgICBjcmVhdGVNZXNoU3luY09wdGlvbnMudGlsaW5nU2NoZW1lID0gdGlsZS50aWxpbmdTY2hlbWU7XG4gICAgY3JlYXRlTWVzaFN5bmNPcHRpb25zLnggPSB0aWxlLng7XG4gICAgY3JlYXRlTWVzaFN5bmNPcHRpb25zLnkgPSB0aWxlLnk7XG4gICAgY3JlYXRlTWVzaFN5bmNPcHRpb25zLmxldmVsID0gdGlsZS5sZXZlbDtcbiAgICBjcmVhdGVNZXNoU3luY09wdGlvbnMuZXhhZ2dlcmF0aW9uID0gZXhhZ2dlcmF0aW9uO1xuICAgIGNyZWF0ZU1lc2hTeW5jT3B0aW9ucy5leGFnZ2VyYXRpb25SZWxhdGl2ZUhlaWdodCA9IGV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0O1xuXG4gICAgZmlsbC5tZXNoID0gdGVycmFpbkRhdGEuX2NyZWF0ZU1lc2hTeW5jKGNyZWF0ZU1lc2hTeW5jT3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGhhc0dlb2RldGljU3VyZmFjZU5vcm1hbHMgPSBoYXNFeGFnZ2VyYXRpb247XG4gICAgdmFyIGNlbnRlckNhcnRvZ3JhcGhpYyA9IFJlY3RhbmdsZS5jZW50ZXIoXG4gICAgICByZWN0YW5nbGUsXG4gICAgICBjZW50ZXJDYXJ0b2dyYXBoaWNTY3JhdGNoXG4gICAgKTtcbiAgICBjZW50ZXJDYXJ0b2dyYXBoaWMuaGVpZ2h0ID0gbWlkZGxlSGVpZ2h0O1xuICAgIHZhciBjZW50ZXIgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgICBjZW50ZXJDYXJ0b2dyYXBoaWMsXG4gICAgICBzY3JhdGNoQ2VudGVyXG4gICAgKTtcbiAgICB2YXIgZW5jb2RpbmcgPSBuZXcgVGVycmFpbkVuY29kaW5nKFxuICAgICAgY2VudGVyLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdHJ1ZSxcbiAgICAgIHRydWUsXG4gICAgICBoYXNHZW9kZXRpY1N1cmZhY2VOb3JtYWxzLFxuICAgICAgZXhhZ2dlcmF0aW9uLFxuICAgICAgZXhhZ2dlcmF0aW9uUmVsYXRpdmVIZWlnaHRcbiAgICApO1xuXG4gICAgLy8gQXQgX21vc3RfLCB3ZSBoYXZlIHZlcnRpY2VzIGZvciB0aGUgNCBjb3JuZXJzLCBwbHVzIDEgY2VudGVyLCBwbHVzIGV2ZXJ5IGFkamFjZW50IGVkZ2UgdmVydGV4LlxuICAgIC8vIEluIHJlYWxpdHkgdGhlcmUgd2lsbCBiZSBsZXNzIG1vc3Qgb2YgdGhlIHRpbWUsIGJ1dCBjbG9zZSBlbm91Z2g7IGJldHRlclxuICAgIC8vIHRvIG92ZXJlc3RpbWF0ZSB0aGFuIHRvIHJlLWFsbG9jYXRlL2NvcHkvdHJhdmVyc2UgdGhlIHZlcnRpY2VzIHR3aWNlLlxuICAgIC8vIEFsc28sIHdlJ2xsIG9mdGVuIGJlIGFibGUgdG8gc3F1ZWV6ZSB0aGUgaW5kZXggZGF0YSBpbnRvIHRoZSBleHRyYSBzcGFjZSBpbiB0aGUgYnVmZmVyLlxuICAgIHZhciBtYXhWZXJ0ZXhDb3VudCA9IDU7XG4gICAgdmFyIG1lc2hlcztcblxuICAgIG1lc2hlcyA9IGZpbGwud2VzdE1lc2hlcztcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBtZXNoZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIG1heFZlcnRleENvdW50ICs9IG1lc2hlc1tpXS5lYXN0SW5kaWNlc05vcnRoVG9Tb3V0aC5sZW5ndGg7XG4gICAgfVxuXG4gICAgbWVzaGVzID0gZmlsbC5zb3V0aE1lc2hlcztcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBtZXNoZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIG1heFZlcnRleENvdW50ICs9IG1lc2hlc1tpXS5ub3J0aEluZGljZXNXZXN0VG9FYXN0Lmxlbmd0aDtcbiAgICB9XG5cbiAgICBtZXNoZXMgPSBmaWxsLmVhc3RNZXNoZXM7XG4gICAgZm9yIChpID0gMCwgbGVuID0gbWVzaGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBtYXhWZXJ0ZXhDb3VudCArPSBtZXNoZXNbaV0ud2VzdEluZGljZXNTb3V0aFRvTm9ydGgubGVuZ3RoO1xuICAgIH1cblxuICAgIG1lc2hlcyA9IGZpbGwubm9ydGhNZXNoZXM7XG4gICAgZm9yIChpID0gMCwgbGVuID0gbWVzaGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBtYXhWZXJ0ZXhDb3VudCArPSBtZXNoZXNbaV0uc291dGhJbmRpY2VzRWFzdFRvV2VzdC5sZW5ndGg7XG4gICAgfVxuXG4gICAgdmFyIGhlaWdodFJhbmdlID0gaGVpZ2h0UmFuZ2VTY3JhdGNoO1xuICAgIGhlaWdodFJhbmdlLm1pbmltdW1IZWlnaHQgPSBtaW5pbXVtSGVpZ2h0O1xuICAgIGhlaWdodFJhbmdlLm1heGltdW1IZWlnaHQgPSBtYXhpbXVtSGVpZ2h0O1xuXG4gICAgdmFyIHN0cmlkZSA9IGVuY29kaW5nLnN0cmlkZTtcbiAgICB2YXIgdHlwZWRBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkobWF4VmVydGV4Q291bnQgKiBzdHJpZGUpO1xuXG4gICAgdmFyIG5leHRJbmRleCA9IDA7XG4gICAgdmFyIG5vcnRod2VzdEluZGV4ID0gbmV4dEluZGV4O1xuICAgIG5leHRJbmRleCA9IGFkZFZlcnRleFdpdGhDb21wdXRlZFBvc2l0aW9uKFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgcmVjdGFuZ2xlLFxuICAgICAgZW5jb2RpbmcsXG4gICAgICB0eXBlZEFycmF5LFxuICAgICAgbmV4dEluZGV4LFxuICAgICAgMC4wLFxuICAgICAgMS4wLFxuICAgICAgbndDb3JuZXIuaGVpZ2h0LFxuICAgICAgbndDb3JuZXIuZW5jb2RlZE5vcm1hbCxcbiAgICAgIDEuMCxcbiAgICAgIGhlaWdodFJhbmdlXG4gICAgKTtcbiAgICBuZXh0SW5kZXggPSBhZGRFZGdlKFxuICAgICAgZmlsbCxcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIGVuY29kaW5nLFxuICAgICAgdHlwZWRBcnJheSxcbiAgICAgIG5leHRJbmRleCxcbiAgICAgIGZpbGwud2VzdFRpbGVzLFxuICAgICAgZmlsbC53ZXN0TWVzaGVzLFxuICAgICAgVGlsZUVkZ2UuRUFTVCxcbiAgICAgIGhlaWdodFJhbmdlXG4gICAgKTtcbiAgICB2YXIgc291dGh3ZXN0SW5kZXggPSBuZXh0SW5kZXg7XG4gICAgbmV4dEluZGV4ID0gYWRkVmVydGV4V2l0aENvbXB1dGVkUG9zaXRpb24oXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICByZWN0YW5nbGUsXG4gICAgICBlbmNvZGluZyxcbiAgICAgIHR5cGVkQXJyYXksXG4gICAgICBuZXh0SW5kZXgsXG4gICAgICAwLjAsXG4gICAgICAwLjAsXG4gICAgICBzd0Nvcm5lci5oZWlnaHQsXG4gICAgICBzd0Nvcm5lci5lbmNvZGVkTm9ybWFsLFxuICAgICAgMC4wLFxuICAgICAgaGVpZ2h0UmFuZ2VcbiAgICApO1xuICAgIG5leHRJbmRleCA9IGFkZEVkZ2UoXG4gICAgICBmaWxsLFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgZW5jb2RpbmcsXG4gICAgICB0eXBlZEFycmF5LFxuICAgICAgbmV4dEluZGV4LFxuICAgICAgZmlsbC5zb3V0aFRpbGVzLFxuICAgICAgZmlsbC5zb3V0aE1lc2hlcyxcbiAgICAgIFRpbGVFZGdlLk5PUlRILFxuICAgICAgaGVpZ2h0UmFuZ2VcbiAgICApO1xuICAgIHZhciBzb3V0aGVhc3RJbmRleCA9IG5leHRJbmRleDtcbiAgICBuZXh0SW5kZXggPSBhZGRWZXJ0ZXhXaXRoQ29tcHV0ZWRQb3NpdGlvbihcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIHJlY3RhbmdsZSxcbiAgICAgIGVuY29kaW5nLFxuICAgICAgdHlwZWRBcnJheSxcbiAgICAgIG5leHRJbmRleCxcbiAgICAgIDEuMCxcbiAgICAgIDAuMCxcbiAgICAgIHNlQ29ybmVyLmhlaWdodCxcbiAgICAgIHNlQ29ybmVyLmVuY29kZWROb3JtYWwsXG4gICAgICAwLjAsXG4gICAgICBoZWlnaHRSYW5nZVxuICAgICk7XG4gICAgbmV4dEluZGV4ID0gYWRkRWRnZShcbiAgICAgIGZpbGwsXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBlbmNvZGluZyxcbiAgICAgIHR5cGVkQXJyYXksXG4gICAgICBuZXh0SW5kZXgsXG4gICAgICBmaWxsLmVhc3RUaWxlcyxcbiAgICAgIGZpbGwuZWFzdE1lc2hlcyxcbiAgICAgIFRpbGVFZGdlLldFU1QsXG4gICAgICBoZWlnaHRSYW5nZVxuICAgICk7XG4gICAgdmFyIG5vcnRoZWFzdEluZGV4ID0gbmV4dEluZGV4O1xuICAgIG5leHRJbmRleCA9IGFkZFZlcnRleFdpdGhDb21wdXRlZFBvc2l0aW9uKFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgcmVjdGFuZ2xlLFxuICAgICAgZW5jb2RpbmcsXG4gICAgICB0eXBlZEFycmF5LFxuICAgICAgbmV4dEluZGV4LFxuICAgICAgMS4wLFxuICAgICAgMS4wLFxuICAgICAgbmVDb3JuZXIuaGVpZ2h0LFxuICAgICAgbmVDb3JuZXIuZW5jb2RlZE5vcm1hbCxcbiAgICAgIDEuMCxcbiAgICAgIGhlaWdodFJhbmdlXG4gICAgKTtcbiAgICBuZXh0SW5kZXggPSBhZGRFZGdlKFxuICAgICAgZmlsbCxcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIGVuY29kaW5nLFxuICAgICAgdHlwZWRBcnJheSxcbiAgICAgIG5leHRJbmRleCxcbiAgICAgIGZpbGwubm9ydGhUaWxlcyxcbiAgICAgIGZpbGwubm9ydGhNZXNoZXMsXG4gICAgICBUaWxlRWRnZS5TT1VUSCxcbiAgICAgIGhlaWdodFJhbmdlXG4gICAgKTtcblxuICAgIG1pbmltdW1IZWlnaHQgPSBoZWlnaHRSYW5nZS5taW5pbXVtSGVpZ2h0O1xuICAgIG1heGltdW1IZWlnaHQgPSBoZWlnaHRSYW5nZS5tYXhpbXVtSGVpZ2h0O1xuXG4gICAgdmFyIG9iYiA9IE9yaWVudGVkQm91bmRpbmdCb3guZnJvbVJlY3RhbmdsZShcbiAgICAgIHJlY3RhbmdsZSxcbiAgICAgIG1pbmltdW1IZWlnaHQsXG4gICAgICBtYXhpbXVtSGVpZ2h0LFxuICAgICAgdGlsZS50aWxpbmdTY2hlbWUuZWxsaXBzb2lkXG4gICAgKTtcblxuICAgIC8vIEFkZCBhIHNpbmdsZSB2ZXJ0ZXggYXQgdGhlIGNlbnRlciBvZiB0aGUgdGlsZS5cbiAgICB2YXIgc291dGhNZXJjYXRvclkgPSBXZWJNZXJjYXRvclByb2plY3Rpb24uZ2VvZGV0aWNMYXRpdHVkZVRvTWVyY2F0b3JBbmdsZShcbiAgICAgIHJlY3RhbmdsZS5zb3V0aFxuICAgICk7XG4gICAgdmFyIG9uZU92ZXJNZXJjYXRvckhlaWdodCA9XG4gICAgICAxLjAgL1xuICAgICAgKFdlYk1lcmNhdG9yUHJvamVjdGlvbi5nZW9kZXRpY0xhdGl0dWRlVG9NZXJjYXRvckFuZ2xlKHJlY3RhbmdsZS5ub3J0aCkgLVxuICAgICAgICBzb3V0aE1lcmNhdG9yWSk7XG4gICAgdmFyIGNlbnRlcldlYk1lcmNhdG9yVCA9XG4gICAgICAoV2ViTWVyY2F0b3JQcm9qZWN0aW9uLmdlb2RldGljTGF0aXR1ZGVUb01lcmNhdG9yQW5nbGUoXG4gICAgICAgIGNlbnRlckNhcnRvZ3JhcGhpYy5sYXRpdHVkZVxuICAgICAgKSAtXG4gICAgICAgIHNvdXRoTWVyY2F0b3JZKSAqXG4gICAgICBvbmVPdmVyTWVyY2F0b3JIZWlnaHQ7XG5cbiAgICB2YXIgZ2VvZGV0aWNTdXJmYWNlTm9ybWFsID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbENhcnRvZ3JhcGhpYyhcbiAgICAgIGNhcnRvZ3JhcGhpY1NjcmF0Y2gsXG4gICAgICBub3JtYWxTY3JhdGNoXG4gICAgKTtcbiAgICB2YXIgY2VudGVyRW5jb2RlZE5vcm1hbCA9IEF0dHJpYnV0ZUNvbXByZXNzaW9uLm9jdEVuY29kZShcbiAgICAgIGdlb2RldGljU3VyZmFjZU5vcm1hbCxcbiAgICAgIG9jdEVuY29kZWROb3JtYWxTY3JhdGNoXG4gICAgKTtcblxuICAgIHZhciBjZW50ZXJJbmRleCA9IG5leHRJbmRleDtcbiAgICBlbmNvZGluZy5lbmNvZGUoXG4gICAgICB0eXBlZEFycmF5LFxuICAgICAgbmV4dEluZGV4ICogc3RyaWRlLFxuICAgICAgb2JiLmNlbnRlcixcbiAgICAgIENhcnRlc2lhbjIuZnJvbUVsZW1lbnRzKDAuNSwgMC41LCB1dlNjcmF0Y2gpLFxuICAgICAgbWlkZGxlSGVpZ2h0LFxuICAgICAgY2VudGVyRW5jb2RlZE5vcm1hbCxcbiAgICAgIGNlbnRlcldlYk1lcmNhdG9yVCxcbiAgICAgIGdlb2RldGljU3VyZmFjZU5vcm1hbFxuICAgICk7XG4gICAgKytuZXh0SW5kZXg7XG5cbiAgICB2YXIgdmVydGV4Q291bnQgPSBuZXh0SW5kZXg7XG5cbiAgICB2YXIgYnl0ZXNQZXJJbmRleCA9IHZlcnRleENvdW50IDwgMjU2ID8gMSA6IDI7XG4gICAgdmFyIGluZGV4Q291bnQgPSAodmVydGV4Q291bnQgLSAxKSAqIDM7IC8vIG9uZSB0cmlhbmdsZSBwZXIgZWRnZSB2ZXJ0ZXhcbiAgICB2YXIgaW5kZXhEYXRhQnl0ZXMgPSBpbmRleENvdW50ICogYnl0ZXNQZXJJbmRleDtcbiAgICB2YXIgYXZhaWxhYmxlQnl0ZXNJbkJ1ZmZlciA9XG4gICAgICAodHlwZWRBcnJheS5sZW5ndGggLSB2ZXJ0ZXhDb3VudCAqIHN0cmlkZSkgKlxuICAgICAgRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuXG4gICAgdmFyIGluZGljZXM7XG4gICAgaWYgKGF2YWlsYWJsZUJ5dGVzSW5CdWZmZXIgPj0gaW5kZXhEYXRhQnl0ZXMpIHtcbiAgICAgIC8vIFN0b3JlIHRoZSBpbmRleCBkYXRhIGluIHRoZSBzYW1lIGJ1ZmZlciBhcyB0aGUgdmVydGV4IGRhdGEuXG4gICAgICB2YXIgc3RhcnRJbmRleCA9IHZlcnRleENvdW50ICogc3RyaWRlICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgaW5kaWNlcyA9XG4gICAgICAgIHZlcnRleENvdW50IDwgMjU2XG4gICAgICAgICAgPyBuZXcgVWludDhBcnJheSh0eXBlZEFycmF5LmJ1ZmZlciwgc3RhcnRJbmRleCwgaW5kZXhDb3VudClcbiAgICAgICAgICA6IG5ldyBVaW50MTZBcnJheSh0eXBlZEFycmF5LmJ1ZmZlciwgc3RhcnRJbmRleCwgaW5kZXhDb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFsbG9jYXRlIGEgbmV3IGJ1ZmZlciBmb3IgdGhlIGluZGV4IGRhdGEuXG4gICAgICBpbmRpY2VzID1cbiAgICAgICAgdmVydGV4Q291bnQgPCAyNTZcbiAgICAgICAgICA/IG5ldyBVaW50OEFycmF5KGluZGV4Q291bnQpXG4gICAgICAgICAgOiBuZXcgVWludDE2QXJyYXkoaW5kZXhDb3VudCk7XG4gICAgfVxuXG4gICAgdHlwZWRBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkodHlwZWRBcnJheS5idWZmZXIsIDAsIHZlcnRleENvdW50ICogc3RyaWRlKTtcblxuICAgIHZhciBpbmRleE91dCA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IHZlcnRleENvdW50IC0gMjsgKytpKSB7XG4gICAgICBpbmRpY2VzW2luZGV4T3V0KytdID0gY2VudGVySW5kZXg7XG4gICAgICBpbmRpY2VzW2luZGV4T3V0KytdID0gaTtcbiAgICAgIGluZGljZXNbaW5kZXhPdXQrK10gPSBpICsgMTtcbiAgICB9XG5cbiAgICBpbmRpY2VzW2luZGV4T3V0KytdID0gY2VudGVySW5kZXg7XG4gICAgaW5kaWNlc1tpbmRleE91dCsrXSA9IGk7XG4gICAgaW5kaWNlc1tpbmRleE91dCsrXSA9IDA7XG5cbiAgICB2YXIgd2VzdEluZGljZXNTb3V0aFRvTm9ydGggPSBbXTtcbiAgICBmb3IgKGkgPSBzb3V0aHdlc3RJbmRleDsgaSA+PSBub3J0aHdlc3RJbmRleDsgLS1pKSB7XG4gICAgICB3ZXN0SW5kaWNlc1NvdXRoVG9Ob3J0aC5wdXNoKGkpO1xuICAgIH1cblxuICAgIHZhciBzb3V0aEluZGljZXNFYXN0VG9XZXN0ID0gW107XG4gICAgZm9yIChpID0gc291dGhlYXN0SW5kZXg7IGkgPj0gc291dGh3ZXN0SW5kZXg7IC0taSkge1xuICAgICAgc291dGhJbmRpY2VzRWFzdFRvV2VzdC5wdXNoKGkpO1xuICAgIH1cblxuICAgIHZhciBlYXN0SW5kaWNlc05vcnRoVG9Tb3V0aCA9IFtdO1xuICAgIGZvciAoaSA9IG5vcnRoZWFzdEluZGV4OyBpID49IHNvdXRoZWFzdEluZGV4OyAtLWkpIHtcbiAgICAgIGVhc3RJbmRpY2VzTm9ydGhUb1NvdXRoLnB1c2goaSk7XG4gICAgfVxuXG4gICAgdmFyIG5vcnRoSW5kaWNlc1dlc3RUb0Vhc3QgPSBbXTtcbiAgICBub3J0aEluZGljZXNXZXN0VG9FYXN0LnB1c2goMCk7XG4gICAgZm9yIChpID0gY2VudGVySW5kZXggLSAxOyBpID49IG5vcnRoZWFzdEluZGV4OyAtLWkpIHtcbiAgICAgIG5vcnRoSW5kaWNlc1dlc3RUb0Vhc3QucHVzaChpKTtcbiAgICB9XG5cbiAgICBmaWxsLm1lc2ggPSBuZXcgVGVycmFpbk1lc2goXG4gICAgICBlbmNvZGluZy5jZW50ZXIsXG4gICAgICB0eXBlZEFycmF5LFxuICAgICAgaW5kaWNlcyxcbiAgICAgIGluZGV4Q291bnQsXG4gICAgICB2ZXJ0ZXhDb3VudCxcbiAgICAgIG1pbmltdW1IZWlnaHQsXG4gICAgICBtYXhpbXVtSGVpZ2h0LFxuICAgICAgQm91bmRpbmdTcGhlcmUuZnJvbU9yaWVudGVkQm91bmRpbmdCb3gob2JiKSxcbiAgICAgIGNvbXB1dGVPY2NsdWRlZVBvaW50KFxuICAgICAgICB0aWxlUHJvdmlkZXIsXG4gICAgICAgIG9iYi5jZW50ZXIsXG4gICAgICAgIHJlY3RhbmdsZSxcbiAgICAgICAgbWluaW11bUhlaWdodCxcbiAgICAgICAgbWF4aW11bUhlaWdodFxuICAgICAgKSxcbiAgICAgIGVuY29kaW5nLnN0cmlkZSxcbiAgICAgIG9iYixcbiAgICAgIGVuY29kaW5nLFxuICAgICAgd2VzdEluZGljZXNTb3V0aFRvTm9ydGgsXG4gICAgICBzb3V0aEluZGljZXNFYXN0VG9XZXN0LFxuICAgICAgZWFzdEluZGljZXNOb3J0aFRvU291dGgsXG4gICAgICBub3J0aEluZGljZXNXZXN0VG9FYXN0XG4gICAgKTtcbiAgfVxuXG4gIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuXG4gIGZpbGwuX2Rlc3Ryb3lWZXJ0ZXhBcnJheSh2ZXJ0ZXhBcnJheXNUb0Rlc3Ryb3kpO1xuXG4gIGZpbGwudmVydGV4QXJyYXkgPSBHbG9iZVN1cmZhY2VUaWxlLl9jcmVhdGVWZXJ0ZXhBcnJheUZvck1lc2goXG4gICAgY29udGV4dCxcbiAgICBmaWxsLm1lc2hcbiAgKTtcbiAgc3VyZmFjZVRpbGUucHJvY2Vzc0ltYWdlcnkoXG4gICAgdGlsZSxcbiAgICB0aWxlUHJvdmlkZXIudGVycmFpblByb3ZpZGVyLFxuICAgIGZyYW1lU3RhdGUsXG4gICAgdHJ1ZVxuICApO1xuXG4gIHZhciBvbGRUZXh0dXJlID0gZmlsbC53YXRlck1hc2tUZXh0dXJlO1xuICBmaWxsLndhdGVyTWFza1RleHR1cmUgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKHRpbGVQcm92aWRlci50ZXJyYWluUHJvdmlkZXIuaGFzV2F0ZXJNYXNrKSB7XG4gICAgdmFyIHdhdGVyU291cmNlVGlsZSA9IHN1cmZhY2VUaWxlLl9maW5kQW5jZXN0b3JUaWxlV2l0aFRlcnJhaW5EYXRhKHRpbGUpO1xuICAgIGlmIChcbiAgICAgIGRlZmluZWQod2F0ZXJTb3VyY2VUaWxlKSAmJlxuICAgICAgZGVmaW5lZCh3YXRlclNvdXJjZVRpbGUuZGF0YS53YXRlck1hc2tUZXh0dXJlKVxuICAgICkge1xuICAgICAgZmlsbC53YXRlck1hc2tUZXh0dXJlID0gd2F0ZXJTb3VyY2VUaWxlLmRhdGEud2F0ZXJNYXNrVGV4dHVyZTtcbiAgICAgICsrZmlsbC53YXRlck1hc2tUZXh0dXJlLnJlZmVyZW5jZUNvdW50O1xuICAgICAgc3VyZmFjZVRpbGUuX2NvbXB1dGVXYXRlck1hc2tUcmFuc2xhdGlvbkFuZFNjYWxlKFxuICAgICAgICB0aWxlLFxuICAgICAgICB3YXRlclNvdXJjZVRpbGUsXG4gICAgICAgIGZpbGwud2F0ZXJNYXNrVHJhbnNsYXRpb25BbmRTY2FsZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGVmaW5lZChvbGRUZXh0dXJlKSkge1xuICAgIC0tb2xkVGV4dHVyZS5yZWZlcmVuY2VDb3VudDtcbiAgICBpZiAob2xkVGV4dHVyZS5yZWZlcmVuY2VDb3VudCA9PT0gMCkge1xuICAgICAgb2xkVGV4dHVyZS5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFkZFZlcnRleFdpdGhDb21wdXRlZFBvc2l0aW9uKFxuICBlbGxpcHNvaWQsXG4gIHJlY3RhbmdsZSxcbiAgZW5jb2RpbmcsXG4gIGJ1ZmZlcixcbiAgaW5kZXgsXG4gIHUsXG4gIHYsXG4gIGhlaWdodCxcbiAgZW5jb2RlZE5vcm1hbCxcbiAgd2ViTWVyY2F0b3JULFxuICBoZWlnaHRSYW5nZVxuKSB7XG4gIHZhciBjYXJ0b2dyYXBoaWMgPSBjYXJ0b2dyYXBoaWNTY3JhdGNoO1xuICBjYXJ0b2dyYXBoaWMubG9uZ2l0dWRlID0gQ2VzaXVtTWF0aC5sZXJwKHJlY3RhbmdsZS53ZXN0LCByZWN0YW5nbGUuZWFzdCwgdSk7XG4gIGNhcnRvZ3JhcGhpYy5sYXRpdHVkZSA9IENlc2l1bU1hdGgubGVycChyZWN0YW5nbGUuc291dGgsIHJlY3RhbmdsZS5ub3J0aCwgdik7XG4gIGNhcnRvZ3JhcGhpYy5oZWlnaHQgPSBoZWlnaHQ7XG4gIHZhciBwb3NpdGlvbiA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihcbiAgICBjYXJ0b2dyYXBoaWMsXG4gICAgY2FydGVzaWFuU2NyYXRjaFxuICApO1xuXG4gIHZhciBnZW9kZXRpY1N1cmZhY2VOb3JtYWw7XG4gIGlmIChlbmNvZGluZy5oYXNHZW9kZXRpY1N1cmZhY2VOb3JtYWxzKSB7XG4gICAgZ2VvZGV0aWNTdXJmYWNlTm9ybWFsID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbChcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgbm9ybWFsU2NyYXRjaFxuICAgICk7XG4gIH1cblxuICB2YXIgdXYgPSB1dlNjcmF0Y2gyO1xuICB1di54ID0gdTtcbiAgdXYueSA9IHY7XG5cbiAgZW5jb2RpbmcuZW5jb2RlKFxuICAgIGJ1ZmZlcixcbiAgICBpbmRleCAqIGVuY29kaW5nLnN0cmlkZSxcbiAgICBwb3NpdGlvbixcbiAgICB1dixcbiAgICBoZWlnaHQsXG4gICAgZW5jb2RlZE5vcm1hbCxcbiAgICB3ZWJNZXJjYXRvclQsXG4gICAgZ2VvZGV0aWNTdXJmYWNlTm9ybWFsXG4gICk7XG5cbiAgaGVpZ2h0UmFuZ2UubWluaW11bUhlaWdodCA9IE1hdGgubWluKGhlaWdodFJhbmdlLm1pbmltdW1IZWlnaHQsIGhlaWdodCk7XG4gIGhlaWdodFJhbmdlLm1heGltdW1IZWlnaHQgPSBNYXRoLm1heChoZWlnaHRSYW5nZS5tYXhpbXVtSGVpZ2h0LCBoZWlnaHQpO1xuXG4gIHJldHVybiBpbmRleCArIDE7XG59XG5cbnZhciBzb3VyY2VSZWN0YW5nbGVTY3JhdGNoID0gbmV3IFJlY3RhbmdsZSgpO1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm1UZXh0dXJlQ29vcmRpbmF0ZXMoXG4gIHNvdXJjZVRpbGUsXG4gIHRhcmdldFRpbGUsXG4gIGNvb3JkaW5hdGVzLFxuICByZXN1bHRcbikge1xuICB2YXIgc291cmNlUmVjdGFuZ2xlID0gc291cmNlVGlsZS5yZWN0YW5nbGU7XG4gIHZhciB0YXJnZXRSZWN0YW5nbGUgPSB0YXJnZXRUaWxlLnJlY3RhbmdsZTtcblxuICAvLyBIYW5kbGUgdHJhbnNmb3JtaW5nIGFjcm9zcyB0aGUgYW50aS1tZXJpZGlhbi5cbiAgaWYgKFxuICAgIHRhcmdldFRpbGUueCA9PT0gMCAmJlxuICAgIGNvb3JkaW5hdGVzLnggPT09IDEuMCAmJlxuICAgIHNvdXJjZVRpbGUueCA9PT1cbiAgICAgIHNvdXJjZVRpbGUudGlsaW5nU2NoZW1lLmdldE51bWJlck9mWFRpbGVzQXRMZXZlbChzb3VyY2VUaWxlLmxldmVsKSAtIDFcbiAgKSB7XG4gICAgc291cmNlUmVjdGFuZ2xlID0gUmVjdGFuZ2xlLmNsb25lKFxuICAgICAgc291cmNlVGlsZS5yZWN0YW5nbGUsXG4gICAgICBzb3VyY2VSZWN0YW5nbGVTY3JhdGNoXG4gICAgKTtcbiAgICBzb3VyY2VSZWN0YW5nbGUud2VzdCAtPSBDZXNpdW1NYXRoLlRXT19QSTtcbiAgICBzb3VyY2VSZWN0YW5nbGUuZWFzdCAtPSBDZXNpdW1NYXRoLlRXT19QSTtcbiAgfSBlbHNlIGlmIChcbiAgICBzb3VyY2VUaWxlLnggPT09IDAgJiZcbiAgICBjb29yZGluYXRlcy54ID09PSAwLjAgJiZcbiAgICB0YXJnZXRUaWxlLnggPT09XG4gICAgICB0YXJnZXRUaWxlLnRpbGluZ1NjaGVtZS5nZXROdW1iZXJPZlhUaWxlc0F0TGV2ZWwodGFyZ2V0VGlsZS5sZXZlbCkgLSAxXG4gICkge1xuICAgIHNvdXJjZVJlY3RhbmdsZSA9IFJlY3RhbmdsZS5jbG9uZShcbiAgICAgIHNvdXJjZVRpbGUucmVjdGFuZ2xlLFxuICAgICAgc291cmNlUmVjdGFuZ2xlU2NyYXRjaFxuICAgICk7XG4gICAgc291cmNlUmVjdGFuZ2xlLndlc3QgKz0gQ2VzaXVtTWF0aC5UV09fUEk7XG4gICAgc291cmNlUmVjdGFuZ2xlLmVhc3QgKz0gQ2VzaXVtTWF0aC5UV09fUEk7XG4gIH1cblxuICB2YXIgc291cmNlV2lkdGggPSBzb3VyY2VSZWN0YW5nbGUuZWFzdCAtIHNvdXJjZVJlY3RhbmdsZS53ZXN0O1xuICB2YXIgdW1pbiA9ICh0YXJnZXRSZWN0YW5nbGUud2VzdCAtIHNvdXJjZVJlY3RhbmdsZS53ZXN0KSAvIHNvdXJjZVdpZHRoO1xuICB2YXIgdW1heCA9ICh0YXJnZXRSZWN0YW5nbGUuZWFzdCAtIHNvdXJjZVJlY3RhbmdsZS53ZXN0KSAvIHNvdXJjZVdpZHRoO1xuXG4gIHZhciBzb3VyY2VIZWlnaHQgPSBzb3VyY2VSZWN0YW5nbGUubm9ydGggLSBzb3VyY2VSZWN0YW5nbGUuc291dGg7XG4gIHZhciB2bWluID0gKHRhcmdldFJlY3RhbmdsZS5zb3V0aCAtIHNvdXJjZVJlY3RhbmdsZS5zb3V0aCkgLyBzb3VyY2VIZWlnaHQ7XG4gIHZhciB2bWF4ID0gKHRhcmdldFJlY3RhbmdsZS5ub3J0aCAtIHNvdXJjZVJlY3RhbmdsZS5zb3V0aCkgLyBzb3VyY2VIZWlnaHQ7XG5cbiAgdmFyIHUgPSAoY29vcmRpbmF0ZXMueCAtIHVtaW4pIC8gKHVtYXggLSB1bWluKTtcbiAgdmFyIHYgPSAoY29vcmRpbmF0ZXMueSAtIHZtaW4pIC8gKHZtYXggLSB2bWluKTtcblxuICAvLyBFbnN1cmUgdGhhdCBjb29yZGluYXRlcyB2ZXJ5IG5lYXIgdGhlIGNvcm5lcnMgYXJlIGF0IHRoZSBjb3JuZXJzLlxuICBpZiAoTWF0aC5hYnModSkgPCBNYXRoLkVQU0lMT041KSB7XG4gICAgdSA9IDAuMDtcbiAgfSBlbHNlIGlmIChNYXRoLmFicyh1IC0gMS4wKSA8IE1hdGguRVBTSUxPTjUpIHtcbiAgICB1ID0gMS4wO1xuICB9XG5cbiAgaWYgKE1hdGguYWJzKHYpIDwgTWF0aC5FUFNJTE9ONSkge1xuICAgIHYgPSAwLjA7XG4gIH0gZWxzZSBpZiAoTWF0aC5hYnModiAtIDEuMCkgPCBNYXRoLkVQU0lMT041KSB7XG4gICAgdiA9IDEuMDtcbiAgfVxuXG4gIHJlc3VsdC54ID0gdTtcbiAgcmVzdWx0LnkgPSB2O1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgZW5jb2RlZE5vcm1hbFNjcmF0Y2ggPSBuZXcgQ2FydGVzaWFuMigpO1xuXG5mdW5jdGlvbiBnZXRWZXJ0ZXhGcm9tVGlsZUF0Q29ybmVyKHNvdXJjZU1lc2gsIHNvdXJjZUluZGV4LCB1LCB2LCB2ZXJ0ZXgpIHtcbiAgdmFyIHNvdXJjZUVuY29kaW5nID0gc291cmNlTWVzaC5lbmNvZGluZztcbiAgdmFyIHNvdXJjZVZlcnRpY2VzID0gc291cmNlTWVzaC52ZXJ0aWNlcztcblxuICB2ZXJ0ZXguaGVpZ2h0ID0gc291cmNlRW5jb2RpbmcuZGVjb2RlSGVpZ2h0KHNvdXJjZVZlcnRpY2VzLCBzb3VyY2VJbmRleCk7XG5cbiAgaWYgKHNvdXJjZUVuY29kaW5nLmhhc1ZlcnRleE5vcm1hbHMpIHtcbiAgICBzb3VyY2VFbmNvZGluZy5nZXRPY3RFbmNvZGVkTm9ybWFsKFxuICAgICAgc291cmNlVmVydGljZXMsXG4gICAgICBzb3VyY2VJbmRleCxcbiAgICAgIHZlcnRleC5lbmNvZGVkTm9ybWFsXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbm9ybWFsID0gdmVydGV4LmVuY29kZWROb3JtYWw7XG4gICAgbm9ybWFsLnggPSAwLjA7XG4gICAgbm9ybWFsLnkgPSAwLjA7XG4gIH1cbn1cblxudmFyIGVuY29kZWROb3JtYWxTY3JhdGNoMiA9IG5ldyBDYXJ0ZXNpYW4yKCk7XG52YXIgY2FydGVzaWFuU2NyYXRjaDIgPSBuZXcgQ2FydGVzaWFuMygpO1xuXG5mdW5jdGlvbiBnZXRJbnRlcnBvbGF0ZWRWZXJ0ZXhBdENvcm5lcihcbiAgZWxsaXBzb2lkLFxuICBzb3VyY2VUaWxlLFxuICB0YXJnZXRUaWxlLFxuICBzb3VyY2VNZXNoLFxuICBwcmV2aW91c0luZGV4LFxuICBuZXh0SW5kZXgsXG4gIHUsXG4gIHYsXG4gIGludGVycG9sYXRlVSxcbiAgdmVydGV4XG4pIHtcbiAgdmFyIHNvdXJjZUVuY29kaW5nID0gc291cmNlTWVzaC5lbmNvZGluZztcbiAgdmFyIHNvdXJjZVZlcnRpY2VzID0gc291cmNlTWVzaC52ZXJ0aWNlcztcblxuICB2YXIgcHJldmlvdXNVdiA9IHRyYW5zZm9ybVRleHR1cmVDb29yZGluYXRlcyhcbiAgICBzb3VyY2VUaWxlLFxuICAgIHRhcmdldFRpbGUsXG4gICAgc291cmNlRW5jb2RpbmcuZGVjb2RlVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgc291cmNlVmVydGljZXMsXG4gICAgICBwcmV2aW91c0luZGV4LFxuICAgICAgdXZTY3JhdGNoXG4gICAgKSxcbiAgICB1dlNjcmF0Y2hcbiAgKTtcbiAgdmFyIG5leHRVdiA9IHRyYW5zZm9ybVRleHR1cmVDb29yZGluYXRlcyhcbiAgICBzb3VyY2VUaWxlLFxuICAgIHRhcmdldFRpbGUsXG4gICAgc291cmNlRW5jb2RpbmcuZGVjb2RlVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgc291cmNlVmVydGljZXMsXG4gICAgICBuZXh0SW5kZXgsXG4gICAgICB1dlNjcmF0Y2gyXG4gICAgKSxcbiAgICB1dlNjcmF0Y2gyXG4gICk7XG5cbiAgdmFyIHJhdGlvO1xuICBpZiAoaW50ZXJwb2xhdGVVKSB7XG4gICAgcmF0aW8gPSAodSAtIHByZXZpb3VzVXYueCkgLyAobmV4dFV2LnggLSBwcmV2aW91c1V2LngpO1xuICB9IGVsc2Uge1xuICAgIHJhdGlvID0gKHYgLSBwcmV2aW91c1V2LnkpIC8gKG5leHRVdi55IC0gcHJldmlvdXNVdi55KTtcbiAgfVxuXG4gIHZhciBoZWlnaHQxID0gc291cmNlRW5jb2RpbmcuZGVjb2RlSGVpZ2h0KHNvdXJjZVZlcnRpY2VzLCBwcmV2aW91c0luZGV4KTtcbiAgdmFyIGhlaWdodDIgPSBzb3VyY2VFbmNvZGluZy5kZWNvZGVIZWlnaHQoc291cmNlVmVydGljZXMsIG5leHRJbmRleCk7XG5cbiAgdmFyIHRhcmdldFJlY3RhbmdsZSA9IHRhcmdldFRpbGUucmVjdGFuZ2xlO1xuICBjYXJ0b2dyYXBoaWNTY3JhdGNoLmxvbmdpdHVkZSA9IENlc2l1bU1hdGgubGVycChcbiAgICB0YXJnZXRSZWN0YW5nbGUud2VzdCxcbiAgICB0YXJnZXRSZWN0YW5nbGUuZWFzdCxcbiAgICB1XG4gICk7XG4gIGNhcnRvZ3JhcGhpY1NjcmF0Y2gubGF0aXR1ZGUgPSBDZXNpdW1NYXRoLmxlcnAoXG4gICAgdGFyZ2V0UmVjdGFuZ2xlLnNvdXRoLFxuICAgIHRhcmdldFJlY3RhbmdsZS5ub3J0aCxcbiAgICB2XG4gICk7XG4gIHZlcnRleC5oZWlnaHQgPSBjYXJ0b2dyYXBoaWNTY3JhdGNoLmhlaWdodCA9IENlc2l1bU1hdGgubGVycChcbiAgICBoZWlnaHQxLFxuICAgIGhlaWdodDIsXG4gICAgcmF0aW9cbiAgKTtcblxuICB2YXIgbm9ybWFsO1xuICBpZiAoc291cmNlRW5jb2RpbmcuaGFzVmVydGV4Tm9ybWFscykge1xuICAgIHZhciBlbmNvZGVkTm9ybWFsMSA9IHNvdXJjZUVuY29kaW5nLmdldE9jdEVuY29kZWROb3JtYWwoXG4gICAgICBzb3VyY2VWZXJ0aWNlcyxcbiAgICAgIHByZXZpb3VzSW5kZXgsXG4gICAgICBlbmNvZGVkTm9ybWFsU2NyYXRjaFxuICAgICk7XG4gICAgdmFyIGVuY29kZWROb3JtYWwyID0gc291cmNlRW5jb2RpbmcuZ2V0T2N0RW5jb2RlZE5vcm1hbChcbiAgICAgIHNvdXJjZVZlcnRpY2VzLFxuICAgICAgbmV4dEluZGV4LFxuICAgICAgZW5jb2RlZE5vcm1hbFNjcmF0Y2gyXG4gICAgKTtcbiAgICB2YXIgbm9ybWFsMSA9IEF0dHJpYnV0ZUNvbXByZXNzaW9uLm9jdERlY29kZShcbiAgICAgIGVuY29kZWROb3JtYWwxLngsXG4gICAgICBlbmNvZGVkTm9ybWFsMS55LFxuICAgICAgY2FydGVzaWFuU2NyYXRjaFxuICAgICk7XG4gICAgdmFyIG5vcm1hbDIgPSBBdHRyaWJ1dGVDb21wcmVzc2lvbi5vY3REZWNvZGUoXG4gICAgICBlbmNvZGVkTm9ybWFsMi54LFxuICAgICAgZW5jb2RlZE5vcm1hbDIueSxcbiAgICAgIGNhcnRlc2lhblNjcmF0Y2gyXG4gICAgKTtcbiAgICBub3JtYWwgPSBDYXJ0ZXNpYW4zLmxlcnAobm9ybWFsMSwgbm9ybWFsMiwgcmF0aW8sIGNhcnRlc2lhblNjcmF0Y2gpO1xuICAgIENhcnRlc2lhbjMubm9ybWFsaXplKG5vcm1hbCwgbm9ybWFsKTtcbiAgICBBdHRyaWJ1dGVDb21wcmVzc2lvbi5vY3RFbmNvZGUobm9ybWFsLCB2ZXJ0ZXguZW5jb2RlZE5vcm1hbCk7XG4gIH0gZWxzZSB7XG4gICAgbm9ybWFsID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbENhcnRvZ3JhcGhpYyhcbiAgICAgIGNhcnRvZ3JhcGhpY1NjcmF0Y2gsXG4gICAgICBjYXJ0ZXNpYW5TY3JhdGNoXG4gICAgKTtcbiAgICBBdHRyaWJ1dGVDb21wcmVzc2lvbi5vY3RFbmNvZGUobm9ybWFsLCB2ZXJ0ZXguZW5jb2RlZE5vcm1hbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VmVydGV4V2l0aEhlaWdodEF0Q29ybmVyKFxuICB0ZXJyYWluRmlsbE1lc2gsXG4gIGVsbGlwc29pZCxcbiAgdSxcbiAgdixcbiAgaGVpZ2h0LFxuICB2ZXJ0ZXhcbikge1xuICB2ZXJ0ZXguaGVpZ2h0ID0gaGVpZ2h0O1xuICB2YXIgbm9ybWFsID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbENhcnRvZ3JhcGhpYyhcbiAgICBjYXJ0b2dyYXBoaWNTY3JhdGNoLFxuICAgIGNhcnRlc2lhblNjcmF0Y2hcbiAgKTtcbiAgQXR0cmlidXRlQ29tcHJlc3Npb24ub2N0RW5jb2RlKG5vcm1hbCwgdmVydGV4LmVuY29kZWROb3JtYWwpO1xufVxuXG5mdW5jdGlvbiBnZXRDb3JuZXIoXG4gIHRlcnJhaW5GaWxsTWVzaCxcbiAgZWxsaXBzb2lkLFxuICB1LFxuICB2LFxuICBjb3JuZXJUaWxlLFxuICBjb3JuZXJNZXNoLFxuICBwcmV2aW91c0VkZ2VUaWxlcyxcbiAgcHJldmlvdXNFZGdlTWVzaGVzLFxuICBuZXh0RWRnZVRpbGVzLFxuICBuZXh0RWRnZU1lc2hlcyxcbiAgdmVydGV4XG4pIHtcbiAgdmFyIGdvdENvcm5lciA9XG4gICAgZ2V0Q29ybmVyRnJvbUVkZ2UoXG4gICAgICB0ZXJyYWluRmlsbE1lc2gsXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBwcmV2aW91c0VkZ2VNZXNoZXMsXG4gICAgICBwcmV2aW91c0VkZ2VUaWxlcyxcbiAgICAgIGZhbHNlLFxuICAgICAgdSxcbiAgICAgIHYsXG4gICAgICB2ZXJ0ZXhcbiAgICApIHx8XG4gICAgZ2V0Q29ybmVyRnJvbUVkZ2UoXG4gICAgICB0ZXJyYWluRmlsbE1lc2gsXG4gICAgICBlbGxpcHNvaWQsXG4gICAgICBuZXh0RWRnZU1lc2hlcyxcbiAgICAgIG5leHRFZGdlVGlsZXMsXG4gICAgICB0cnVlLFxuICAgICAgdSxcbiAgICAgIHYsXG4gICAgICB2ZXJ0ZXhcbiAgICApO1xuICBpZiAoZ290Q29ybmVyKSB7XG4gICAgcmV0dXJuIHZlcnRleDtcbiAgfVxuXG4gIHZhciB2ZXJ0ZXhJbmRleDtcblxuICBpZiAobWVzaElzVXNhYmxlKGNvcm5lclRpbGUsIGNvcm5lck1lc2gpKSB7XG4gICAgLy8gQ29ybmVyIG1lc2ggaXMgdmFsaWQsIGNvcHkgaXRzIGNvcm5lciB2ZXJ0ZXggdG8gdGhpcyBtZXNoLlxuICAgIGlmICh1ID09PSAwLjApIHtcbiAgICAgIGlmICh2ID09PSAwLjApIHtcbiAgICAgICAgLy8gc291dGh3ZXN0IGRlc3RpbmF0aW9uLCBub3J0aGVhc3Qgc291cmNlXG4gICAgICAgIHZlcnRleEluZGV4ID0gY29ybmVyTWVzaC5lYXN0SW5kaWNlc05vcnRoVG9Tb3V0aFswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vcnRod2VzdCBkZXN0aW5hdGlvbiwgc291dGhlYXN0IHNvdXJjZVxuICAgICAgICB2ZXJ0ZXhJbmRleCA9IGNvcm5lck1lc2guc291dGhJbmRpY2VzRWFzdFRvV2VzdFswXTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHYgPT09IDAuMCkge1xuICAgICAgLy8gc291dGhlYXN0IGRlc3RpbmF0aW9uLCBub3J0aHdlc3Qgc291cmNlXG4gICAgICB2ZXJ0ZXhJbmRleCA9IGNvcm5lck1lc2gubm9ydGhJbmRpY2VzV2VzdFRvRWFzdFswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ydGhlYXN0IGRlc3RpbmF0aW9uLCBzb3V0aHdlc3Qgc291cmNlXG4gICAgICB2ZXJ0ZXhJbmRleCA9IGNvcm5lck1lc2gud2VzdEluZGljZXNTb3V0aFRvTm9ydGhbMF07XG4gICAgfVxuICAgIGdldFZlcnRleEZyb21UaWxlQXRDb3JuZXIoY29ybmVyTWVzaCwgdmVydGV4SW5kZXgsIHUsIHYsIHZlcnRleCk7XG4gICAgcmV0dXJuIHZlcnRleDtcbiAgfVxuXG4gIC8vIFRoZXJlIGlzIG5vIHByZWNpc2UgdmVydGV4IGF2YWlsYWJsZSBmcm9tIHRoZSBjb3JuZXIgb3IgZnJvbSBlaXRoZXIgYWRqYWNlbnQgZWRnZS5cbiAgLy8gVGhpcyBpcyBlaXRoZXIgYmVjYXVzZSB0aGVyZSBhcmUgbm8gdGlsZXMgYXQgYWxsIGF0IHRoZSBlZGdlcyBhbmQgY29ybmVyLCBvclxuICAvLyBiZWNhdXNlIHRoZSB0aWxlcyBhdCB0aGUgZWRnZSBhcmUgaGlnaGVyLWxldmVsLW51bWJlciBhbmQgZG9uJ3QgZXh0ZW5kIGFsbCB0aGUgd2F5XG4gIC8vIHRvIHRoZSBjb3JuZXIuXG4gIC8vIFRyeSB0byBncmFiIGEgaGVpZ2h0IGZyb20gdGhlIGFkamFjZW50IGVkZ2VzLlxuICB2YXIgaGVpZ2h0O1xuICBpZiAodSA9PT0gMC4wKSB7XG4gICAgaWYgKHYgPT09IDAuMCkge1xuICAgICAgLy8gc291dGh3ZXN0XG4gICAgICBoZWlnaHQgPSBnZXRDbG9zZXN0SGVpZ2h0VG9Db3JuZXIoXG4gICAgICAgIHRlcnJhaW5GaWxsTWVzaC53ZXN0TWVzaGVzLFxuICAgICAgICB0ZXJyYWluRmlsbE1lc2gud2VzdFRpbGVzLFxuICAgICAgICBUaWxlRWRnZS5FQVNULFxuICAgICAgICB0ZXJyYWluRmlsbE1lc2guc291dGhNZXNoZXMsXG4gICAgICAgIHRlcnJhaW5GaWxsTWVzaC5zb3V0aFRpbGVzLFxuICAgICAgICBUaWxlRWRnZS5OT1JUSCxcbiAgICAgICAgdSxcbiAgICAgICAgdlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ydGh3ZXN0XG4gICAgICBoZWlnaHQgPSBnZXRDbG9zZXN0SGVpZ2h0VG9Db3JuZXIoXG4gICAgICAgIHRlcnJhaW5GaWxsTWVzaC5ub3J0aE1lc2hlcyxcbiAgICAgICAgdGVycmFpbkZpbGxNZXNoLm5vcnRoVGlsZXMsXG4gICAgICAgIFRpbGVFZGdlLlNPVVRILFxuICAgICAgICB0ZXJyYWluRmlsbE1lc2gud2VzdE1lc2hlcyxcbiAgICAgICAgdGVycmFpbkZpbGxNZXNoLndlc3RUaWxlcyxcbiAgICAgICAgVGlsZUVkZ2UuRUFTVCxcbiAgICAgICAgdSxcbiAgICAgICAgdlxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodiA9PT0gMC4wKSB7XG4gICAgLy8gc291dGhlYXN0XG4gICAgaGVpZ2h0ID0gZ2V0Q2xvc2VzdEhlaWdodFRvQ29ybmVyKFxuICAgICAgdGVycmFpbkZpbGxNZXNoLnNvdXRoTWVzaGVzLFxuICAgICAgdGVycmFpbkZpbGxNZXNoLnNvdXRoVGlsZXMsXG4gICAgICBUaWxlRWRnZS5OT1JUSCxcbiAgICAgIHRlcnJhaW5GaWxsTWVzaC5lYXN0TWVzaGVzLFxuICAgICAgdGVycmFpbkZpbGxNZXNoLmVhc3RUaWxlcyxcbiAgICAgIFRpbGVFZGdlLldFU1QsXG4gICAgICB1LFxuICAgICAgdlxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbm9ydGhlYXN0XG4gICAgaGVpZ2h0ID0gZ2V0Q2xvc2VzdEhlaWdodFRvQ29ybmVyKFxuICAgICAgdGVycmFpbkZpbGxNZXNoLmVhc3RNZXNoZXMsXG4gICAgICB0ZXJyYWluRmlsbE1lc2guZWFzdFRpbGVzLFxuICAgICAgVGlsZUVkZ2UuV0VTVCxcbiAgICAgIHRlcnJhaW5GaWxsTWVzaC5ub3J0aE1lc2hlcyxcbiAgICAgIHRlcnJhaW5GaWxsTWVzaC5ub3J0aFRpbGVzLFxuICAgICAgVGlsZUVkZ2UuU09VVEgsXG4gICAgICB1LFxuICAgICAgdlxuICAgICk7XG4gIH1cblxuICBpZiAoZGVmaW5lZChoZWlnaHQpKSB7XG4gICAgZ2V0VmVydGV4V2l0aEhlaWdodEF0Q29ybmVyKFxuICAgICAgdGVycmFpbkZpbGxNZXNoLFxuICAgICAgZWxsaXBzb2lkLFxuICAgICAgdSxcbiAgICAgIHYsXG4gICAgICBoZWlnaHQsXG4gICAgICB2ZXJ0ZXhcbiAgICApO1xuICAgIHJldHVybiB2ZXJ0ZXg7XG4gIH1cblxuICAvLyBObyBoZWlnaHRzIGF2YWlsYWJsZSB0aGF0IGFyZSBjbG9zZXIgdGhhbiB0aGUgYWRqYWNlbnQgY29ybmVycy5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xvc2VzdEhlaWdodFRvQ29ybmVyKFxuICBwcmV2aW91c01lc2hlcyxcbiAgcHJldmlvdXNUaWxlcyxcbiAgcHJldmlvdXNFZGdlLFxuICBuZXh0TWVzaGVzLFxuICBuZXh0VGlsZXMsXG4gIG5leHRFZGdlLFxuICB1LFxuICB2XG4pIHtcbiAgdmFyIGhlaWdodDEgPSBnZXROZWFyZXN0SGVpZ2h0T25FZGdlKFxuICAgIHByZXZpb3VzTWVzaGVzLFxuICAgIHByZXZpb3VzVGlsZXMsXG4gICAgZmFsc2UsXG4gICAgcHJldmlvdXNFZGdlLFxuICAgIHUsXG4gICAgdlxuICApO1xuICB2YXIgaGVpZ2h0MiA9IGdldE5lYXJlc3RIZWlnaHRPbkVkZ2UoXG4gICAgbmV4dE1lc2hlcyxcbiAgICBuZXh0VGlsZXMsXG4gICAgdHJ1ZSxcbiAgICBuZXh0RWRnZSxcbiAgICB1LFxuICAgIHZcbiAgKTtcbiAgaWYgKGRlZmluZWQoaGVpZ2h0MSkgJiYgZGVmaW5lZChoZWlnaHQyKSkge1xuICAgIC8vIEl0IHdvdWxkIGJlIHNsaWdodGx5IGJldHRlciB0byBkbyBhIHdlaWdodGVkIGF2ZXJhZ2Ugb2YgdGhlIHR3byBoZWlnaHRzXG4gICAgLy8gYmFzZWQgb24gdGhlaXIgZGlzdGFuY2UgZnJvbSB0aGUgY29ybmVyLCBidXQgaXQgc2hvdWxkbid0IG1hdHRlciBtdWNoIGluIHByYWN0aWNlLlxuICAgIHJldHVybiAoaGVpZ2h0MSArIGhlaWdodDIpICogMC41O1xuICB9IGVsc2UgaWYgKGRlZmluZWQoaGVpZ2h0MSkpIHtcbiAgICByZXR1cm4gaGVpZ2h0MTtcbiAgfVxuICByZXR1cm4gaGVpZ2h0Mjtcbn1cblxuZnVuY3Rpb24gYWRkRWRnZShcbiAgdGVycmFpbkZpbGxNZXNoLFxuICBlbGxpcHNvaWQsXG4gIGVuY29kaW5nLFxuICB0eXBlZEFycmF5LFxuICBuZXh0SW5kZXgsXG4gIGVkZ2VUaWxlcyxcbiAgZWRnZU1lc2hlcyxcbiAgdGlsZUVkZ2UsXG4gIGhlaWdodFJhbmdlXG4pIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlZGdlVGlsZXMubGVuZ3RoOyArK2kpIHtcbiAgICBuZXh0SW5kZXggPSBhZGRFZGdlTWVzaChcbiAgICAgIHRlcnJhaW5GaWxsTWVzaCxcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIGVuY29kaW5nLFxuICAgICAgdHlwZWRBcnJheSxcbiAgICAgIG5leHRJbmRleCxcbiAgICAgIGVkZ2VUaWxlc1tpXSxcbiAgICAgIGVkZ2VNZXNoZXNbaV0sXG4gICAgICB0aWxlRWRnZSxcbiAgICAgIGhlaWdodFJhbmdlXG4gICAgKTtcbiAgfVxuICByZXR1cm4gbmV4dEluZGV4O1xufVxuXG5mdW5jdGlvbiBhZGRFZGdlTWVzaChcbiAgdGVycmFpbkZpbGxNZXNoLFxuICBlbGxpcHNvaWQsXG4gIGVuY29kaW5nLFxuICB0eXBlZEFycmF5LFxuICBuZXh0SW5kZXgsXG4gIGVkZ2VUaWxlLFxuICBlZGdlTWVzaCxcbiAgdGlsZUVkZ2UsXG4gIGhlaWdodFJhbmdlXG4pIHtcbiAgLy8gSGFuZGxlIGNvcHlpbmcgZWRnZXMgYWNyb3NzIHRoZSBhbnRpLW1lcmlkaWFuLlxuICB2YXIgc291cmNlUmVjdGFuZ2xlID0gZWRnZVRpbGUucmVjdGFuZ2xlO1xuICBpZiAodGlsZUVkZ2UgPT09IFRpbGVFZGdlLkVBU1QgJiYgdGVycmFpbkZpbGxNZXNoLnRpbGUueCA9PT0gMCkge1xuICAgIHNvdXJjZVJlY3RhbmdsZSA9IFJlY3RhbmdsZS5jbG9uZShcbiAgICAgIGVkZ2VUaWxlLnJlY3RhbmdsZSxcbiAgICAgIHNvdXJjZVJlY3RhbmdsZVNjcmF0Y2hcbiAgICApO1xuICAgIHNvdXJjZVJlY3RhbmdsZS53ZXN0IC09IENlc2l1bU1hdGguVFdPX1BJO1xuICAgIHNvdXJjZVJlY3RhbmdsZS5lYXN0IC09IENlc2l1bU1hdGguVFdPX1BJO1xuICB9IGVsc2UgaWYgKHRpbGVFZGdlID09PSBUaWxlRWRnZS5XRVNUICYmIGVkZ2VUaWxlLnggPT09IDApIHtcbiAgICBzb3VyY2VSZWN0YW5nbGUgPSBSZWN0YW5nbGUuY2xvbmUoXG4gICAgICBlZGdlVGlsZS5yZWN0YW5nbGUsXG4gICAgICBzb3VyY2VSZWN0YW5nbGVTY3JhdGNoXG4gICAgKTtcbiAgICBzb3VyY2VSZWN0YW5nbGUud2VzdCArPSBDZXNpdW1NYXRoLlRXT19QSTtcbiAgICBzb3VyY2VSZWN0YW5nbGUuZWFzdCArPSBDZXNpdW1NYXRoLlRXT19QSTtcbiAgfVxuXG4gIHZhciB0YXJnZXRSZWN0YW5nbGUgPSB0ZXJyYWluRmlsbE1lc2gudGlsZS5yZWN0YW5nbGU7XG5cbiAgdmFyIGxhc3RVO1xuICB2YXIgbGFzdFY7XG5cbiAgaWYgKG5leHRJbmRleCA+IDApIHtcbiAgICBlbmNvZGluZy5kZWNvZGVUZXh0dXJlQ29vcmRpbmF0ZXModHlwZWRBcnJheSwgbmV4dEluZGV4IC0gMSwgdXZTY3JhdGNoKTtcbiAgICBsYXN0VSA9IHV2U2NyYXRjaC54O1xuICAgIGxhc3RWID0gdXZTY3JhdGNoLnk7XG4gIH1cblxuICB2YXIgaW5kaWNlcztcbiAgdmFyIGNvbXBhcmVVO1xuXG4gIHN3aXRjaCAodGlsZUVkZ2UpIHtcbiAgICBjYXNlIFRpbGVFZGdlLldFU1Q6XG4gICAgICBpbmRpY2VzID0gZWRnZU1lc2gud2VzdEluZGljZXNTb3V0aFRvTm9ydGg7XG4gICAgICBjb21wYXJlVSA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUaWxlRWRnZS5OT1JUSDpcbiAgICAgIGluZGljZXMgPSBlZGdlTWVzaC5ub3J0aEluZGljZXNXZXN0VG9FYXN0O1xuICAgICAgY29tcGFyZVUgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUaWxlRWRnZS5FQVNUOlxuICAgICAgaW5kaWNlcyA9IGVkZ2VNZXNoLmVhc3RJbmRpY2VzTm9ydGhUb1NvdXRoO1xuICAgICAgY29tcGFyZVUgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVGlsZUVkZ2UuU09VVEg6XG4gICAgICBpbmRpY2VzID0gZWRnZU1lc2guc291dGhJbmRpY2VzRWFzdFRvV2VzdDtcbiAgICAgIGNvbXBhcmVVID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgdmFyIHNvdXJjZVRpbGUgPSBlZGdlVGlsZTtcbiAgdmFyIHRhcmdldFRpbGUgPSB0ZXJyYWluRmlsbE1lc2gudGlsZTtcbiAgdmFyIHNvdXJjZUVuY29kaW5nID0gZWRnZU1lc2guZW5jb2Rpbmc7XG4gIHZhciBzb3VyY2VWZXJ0aWNlcyA9IGVkZ2VNZXNoLnZlcnRpY2VzO1xuICB2YXIgdGFyZ2V0U3RyaWRlID0gZW5jb2Rpbmcuc3RyaWRlO1xuXG4gIHZhciBzb3V0aE1lcmNhdG9yWTtcbiAgdmFyIG9uZU92ZXJNZXJjYXRvckhlaWdodDtcbiAgaWYgKHNvdXJjZUVuY29kaW5nLmhhc1dlYk1lcmNhdG9yVCkge1xuICAgIHNvdXRoTWVyY2F0b3JZID0gV2ViTWVyY2F0b3JQcm9qZWN0aW9uLmdlb2RldGljTGF0aXR1ZGVUb01lcmNhdG9yQW5nbGUoXG4gICAgICB0YXJnZXRSZWN0YW5nbGUuc291dGhcbiAgICApO1xuICAgIG9uZU92ZXJNZXJjYXRvckhlaWdodCA9XG4gICAgICAxLjAgL1xuICAgICAgKFdlYk1lcmNhdG9yUHJvamVjdGlvbi5nZW9kZXRpY0xhdGl0dWRlVG9NZXJjYXRvckFuZ2xlKFxuICAgICAgICB0YXJnZXRSZWN0YW5nbGUubm9ydGhcbiAgICAgICkgLVxuICAgICAgICBzb3V0aE1lcmNhdG9yWSk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgaW5kZXggPSBpbmRpY2VzW2ldO1xuXG4gICAgdmFyIHV2ID0gc291cmNlRW5jb2RpbmcuZGVjb2RlVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgc291cmNlVmVydGljZXMsXG4gICAgICBpbmRleCxcbiAgICAgIHV2U2NyYXRjaFxuICAgICk7XG4gICAgdHJhbnNmb3JtVGV4dHVyZUNvb3JkaW5hdGVzKHNvdXJjZVRpbGUsIHRhcmdldFRpbGUsIHV2LCB1dik7XG4gICAgdmFyIHUgPSB1di54O1xuICAgIHZhciB2ID0gdXYueTtcbiAgICB2YXIgdU9yViA9IGNvbXBhcmVVID8gdSA6IHY7XG5cbiAgICBpZiAodU9yViA8IDAuMCB8fCB1T3JWID4gMS4wKSB7XG4gICAgICAvLyBWZXJ0ZXggaXMgb3V0c2lkZSB0aGUgdGFyZ2V0IHRpbGUgLSBza2lwIGl0LlxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgTWF0aC5hYnModSAtIGxhc3RVKSA8IENlc2l1bU1hdGguRVBTSUxPTjUgJiZcbiAgICAgIE1hdGguYWJzKHYgLSBsYXN0VikgPCBDZXNpdW1NYXRoLkVQU0lMT041XG4gICAgKSB7XG4gICAgICAvLyBWZXJ0ZXggaXMgdmVyeSBjbG9zZSB0byB0aGUgcHJldmlvdXMgb25lIC0gc2tpcCBpdC5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBuZWFybHlFZGdlVSA9XG4gICAgICBNYXRoLmFicyh1KSA8IENlc2l1bU1hdGguRVBTSUxPTjUgfHxcbiAgICAgIE1hdGguYWJzKHUgLSAxLjApIDwgQ2VzaXVtTWF0aC5FUFNJTE9ONTtcbiAgICB2YXIgbmVhcmx5RWRnZVYgPVxuICAgICAgTWF0aC5hYnModikgPCBDZXNpdW1NYXRoLkVQU0lMT041IHx8XG4gICAgICBNYXRoLmFicyh2IC0gMS4wKSA8IENlc2l1bU1hdGguRVBTSUxPTjU7XG5cbiAgICBpZiAobmVhcmx5RWRnZVUgJiYgbmVhcmx5RWRnZVYpIHtcbiAgICAgIC8vIENvcm5lciB2ZXJ0ZXggLSBza2lwIGl0LlxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIHBvc2l0aW9uID0gc291cmNlRW5jb2RpbmcuZGVjb2RlUG9zaXRpb24oXG4gICAgICBzb3VyY2VWZXJ0aWNlcyxcbiAgICAgIGluZGV4LFxuICAgICAgY2FydGVzaWFuU2NyYXRjaFxuICAgICk7XG4gICAgdmFyIGhlaWdodCA9IHNvdXJjZUVuY29kaW5nLmRlY29kZUhlaWdodChzb3VyY2VWZXJ0aWNlcywgaW5kZXgpO1xuXG4gICAgdmFyIG5vcm1hbDtcbiAgICBpZiAoc291cmNlRW5jb2RpbmcuaGFzVmVydGV4Tm9ybWFscykge1xuICAgICAgbm9ybWFsID0gc291cmNlRW5jb2RpbmcuZ2V0T2N0RW5jb2RlZE5vcm1hbChcbiAgICAgICAgc291cmNlVmVydGljZXMsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBvY3RFbmNvZGVkTm9ybWFsU2NyYXRjaFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9ybWFsID0gb2N0RW5jb2RlZE5vcm1hbFNjcmF0Y2g7XG4gICAgICBub3JtYWwueCA9IDAuMDtcbiAgICAgIG5vcm1hbC55ID0gMC4wO1xuICAgIH1cblxuICAgIHZhciB3ZWJNZXJjYXRvclQgPSB2O1xuICAgIGlmIChzb3VyY2VFbmNvZGluZy5oYXNXZWJNZXJjYXRvclQpIHtcbiAgICAgIHZhciBsYXRpdHVkZSA9IENlc2l1bU1hdGgubGVycChcbiAgICAgICAgdGFyZ2V0UmVjdGFuZ2xlLnNvdXRoLFxuICAgICAgICB0YXJnZXRSZWN0YW5nbGUubm9ydGgsXG4gICAgICAgIHZcbiAgICAgICk7XG4gICAgICB3ZWJNZXJjYXRvclQgPVxuICAgICAgICAoV2ViTWVyY2F0b3JQcm9qZWN0aW9uLmdlb2RldGljTGF0aXR1ZGVUb01lcmNhdG9yQW5nbGUobGF0aXR1ZGUpIC1cbiAgICAgICAgICBzb3V0aE1lcmNhdG9yWSkgKlxuICAgICAgICBvbmVPdmVyTWVyY2F0b3JIZWlnaHQ7XG4gICAgfVxuXG4gICAgdmFyIGdlb2RldGljU3VyZmFjZU5vcm1hbDtcbiAgICBpZiAoZW5jb2RpbmcuaGFzR2VvZGV0aWNTdXJmYWNlTm9ybWFscykge1xuICAgICAgZ2VvZGV0aWNTdXJmYWNlTm9ybWFsID0gZWxsaXBzb2lkLmdlb2RldGljU3VyZmFjZU5vcm1hbChcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIG5vcm1hbFNjcmF0Y2hcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZW5jb2RpbmcuZW5jb2RlKFxuICAgICAgdHlwZWRBcnJheSxcbiAgICAgIG5leHRJbmRleCAqIHRhcmdldFN0cmlkZSxcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgdXYsXG4gICAgICBoZWlnaHQsXG4gICAgICBub3JtYWwsXG4gICAgICB3ZWJNZXJjYXRvclQsXG4gICAgICBnZW9kZXRpY1N1cmZhY2VOb3JtYWxcbiAgICApO1xuXG4gICAgaGVpZ2h0UmFuZ2UubWluaW11bUhlaWdodCA9IE1hdGgubWluKGhlaWdodFJhbmdlLm1pbmltdW1IZWlnaHQsIGhlaWdodCk7XG4gICAgaGVpZ2h0UmFuZ2UubWF4aW11bUhlaWdodCA9IE1hdGgubWF4KGhlaWdodFJhbmdlLm1heGltdW1IZWlnaHQsIGhlaWdodCk7XG5cbiAgICArK25leHRJbmRleDtcbiAgfVxuXG4gIHJldHVybiBuZXh0SW5kZXg7XG59XG5cbmZ1bmN0aW9uIGdldE5lYXJlc3RIZWlnaHRPbkVkZ2UobWVzaGVzLCB0aWxlcywgaXNOZXh0LCBlZGdlLCB1LCB2KSB7XG4gIHZhciBtZXNoU3RhcnQ7XG4gIHZhciBtZXNoRW5kO1xuICB2YXIgbWVzaFN0ZXA7XG5cbiAgaWYgKGlzTmV4dCkge1xuICAgIG1lc2hTdGFydCA9IDA7XG4gICAgbWVzaEVuZCA9IG1lc2hlcy5sZW5ndGg7XG4gICAgbWVzaFN0ZXAgPSAxO1xuICB9IGVsc2Uge1xuICAgIG1lc2hTdGFydCA9IG1lc2hlcy5sZW5ndGggLSAxO1xuICAgIG1lc2hFbmQgPSAtMTtcbiAgICBtZXNoU3RlcCA9IC0xO1xuICB9XG5cbiAgZm9yIChcbiAgICB2YXIgbWVzaEluZGV4ID0gbWVzaFN0YXJ0O1xuICAgIG1lc2hJbmRleCAhPT0gbWVzaEVuZDtcbiAgICBtZXNoSW5kZXggKz0gbWVzaFN0ZXBcbiAgKSB7XG4gICAgdmFyIG1lc2ggPSBtZXNoZXNbbWVzaEluZGV4XTtcbiAgICB2YXIgdGlsZSA9IHRpbGVzW21lc2hJbmRleF07XG4gICAgaWYgKCFtZXNoSXNVc2FibGUodGlsZSwgbWVzaCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBpbmRpY2VzO1xuICAgIHN3aXRjaCAoZWRnZSkge1xuICAgICAgY2FzZSBUaWxlRWRnZS5XRVNUOlxuICAgICAgICBpbmRpY2VzID0gbWVzaC53ZXN0SW5kaWNlc1NvdXRoVG9Ob3J0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRpbGVFZGdlLlNPVVRIOlxuICAgICAgICBpbmRpY2VzID0gbWVzaC5zb3V0aEluZGljZXNFYXN0VG9XZXN0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGlsZUVkZ2UuRUFTVDpcbiAgICAgICAgaW5kaWNlcyA9IG1lc2guZWFzdEluZGljZXNOb3J0aFRvU291dGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUaWxlRWRnZS5OT1JUSDpcbiAgICAgICAgaW5kaWNlcyA9IG1lc2gubm9ydGhJbmRpY2VzV2VzdFRvRWFzdDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0gaW5kaWNlc1tpc05leHQgPyAwIDogaW5kaWNlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoZGVmaW5lZChpbmRleCkpIHtcbiAgICAgIHJldHVybiBtZXNoLmVuY29kaW5nLmRlY29kZUhlaWdodChtZXNoLnZlcnRpY2VzLCBpbmRleCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gbWVzaElzVXNhYmxlKHRpbGUsIG1lc2gpIHtcbiAgcmV0dXJuIChcbiAgICBkZWZpbmVkKG1lc2gpICYmXG4gICAgKCFkZWZpbmVkKHRpbGUuZGF0YS5maWxsKSB8fCAhdGlsZS5kYXRhLmZpbGwuY2hhbmdlZFRoaXNGcmFtZSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29ybmVyRnJvbUVkZ2UoXG4gIHRlcnJhaW5GaWxsTWVzaCxcbiAgZWxsaXBzb2lkLFxuICBlZGdlTWVzaGVzLFxuICBlZGdlVGlsZXMsXG4gIGlzTmV4dCxcbiAgdSxcbiAgdixcbiAgdmVydGV4XG4pIHtcbiAgdmFyIGVkZ2VWZXJ0aWNlcztcbiAgdmFyIGNvbXBhcmVVO1xuICB2YXIgaW5jcmVhc2luZztcbiAgdmFyIHZlcnRleEluZGV4SW5kZXg7XG4gIHZhciB2ZXJ0ZXhJbmRleDtcbiAgdmFyIHNvdXJjZVRpbGUgPSBlZGdlVGlsZXNbaXNOZXh0ID8gMCA6IGVkZ2VNZXNoZXMubGVuZ3RoIC0gMV07XG4gIHZhciBzb3VyY2VNZXNoID0gZWRnZU1lc2hlc1tpc05leHQgPyAwIDogZWRnZU1lc2hlcy5sZW5ndGggLSAxXTtcblxuICBpZiAobWVzaElzVXNhYmxlKHNvdXJjZVRpbGUsIHNvdXJjZU1lc2gpKSB7XG4gICAgLy8gUHJldmlvdXMgbWVzaCBpcyB2YWxpZCwgYnV0IHdlIGRvbid0IGtub3cgeWV0IGlmIGl0IGNvdmVycyB0aGlzIGNvcm5lci5cbiAgICBpZiAodSA9PT0gMC4wKSB7XG4gICAgICBpZiAodiA9PT0gMC4wKSB7XG4gICAgICAgIC8vIHNvdXRod2VzdFxuICAgICAgICBlZGdlVmVydGljZXMgPSBpc05leHRcbiAgICAgICAgICA/IHNvdXJjZU1lc2gubm9ydGhJbmRpY2VzV2VzdFRvRWFzdFxuICAgICAgICAgIDogc291cmNlTWVzaC5lYXN0SW5kaWNlc05vcnRoVG9Tb3V0aDtcbiAgICAgICAgY29tcGFyZVUgPSBpc05leHQ7XG4gICAgICAgIGluY3JlYXNpbmcgPSBpc05leHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBub3J0aHdlc3RcbiAgICAgICAgZWRnZVZlcnRpY2VzID0gaXNOZXh0XG4gICAgICAgICAgPyBzb3VyY2VNZXNoLmVhc3RJbmRpY2VzTm9ydGhUb1NvdXRoXG4gICAgICAgICAgOiBzb3VyY2VNZXNoLnNvdXRoSW5kaWNlc0Vhc3RUb1dlc3Q7XG4gICAgICAgIGNvbXBhcmVVID0gIWlzTmV4dDtcbiAgICAgICAgaW5jcmVhc2luZyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodiA9PT0gMC4wKSB7XG4gICAgICAvLyBzb3V0aGVhc3RcbiAgICAgIGVkZ2VWZXJ0aWNlcyA9IGlzTmV4dFxuICAgICAgICA/IHNvdXJjZU1lc2gud2VzdEluZGljZXNTb3V0aFRvTm9ydGhcbiAgICAgICAgOiBzb3VyY2VNZXNoLm5vcnRoSW5kaWNlc1dlc3RUb0Vhc3Q7XG4gICAgICBjb21wYXJlVSA9ICFpc05leHQ7XG4gICAgICBpbmNyZWFzaW5nID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ydGhlYXN0XG4gICAgICBlZGdlVmVydGljZXMgPSBpc05leHRcbiAgICAgICAgPyBzb3VyY2VNZXNoLnNvdXRoSW5kaWNlc0Vhc3RUb1dlc3RcbiAgICAgICAgOiBzb3VyY2VNZXNoLndlc3RJbmRpY2VzU291dGhUb05vcnRoO1xuICAgICAgY29tcGFyZVUgPSBpc05leHQ7XG4gICAgICBpbmNyZWFzaW5nID0gIWlzTmV4dDtcbiAgICB9XG5cbiAgICBpZiAoZWRnZVZlcnRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFRoZSB2ZXJ0ZXggd2Ugd2FudCB3aWxsIHZlcnkgb2Z0ZW4gYmUgdGhlIGZpcnN0L2xhc3QgdmVydGV4IHNvIGNoZWNrIHRoYXQgZmlyc3QuXG4gICAgICB2ZXJ0ZXhJbmRleEluZGV4ID0gaXNOZXh0ID8gMCA6IGVkZ2VWZXJ0aWNlcy5sZW5ndGggLSAxO1xuICAgICAgdmVydGV4SW5kZXggPSBlZGdlVmVydGljZXNbdmVydGV4SW5kZXhJbmRleF07XG4gICAgICBzb3VyY2VNZXNoLmVuY29kaW5nLmRlY29kZVRleHR1cmVDb29yZGluYXRlcyhcbiAgICAgICAgc291cmNlTWVzaC52ZXJ0aWNlcyxcbiAgICAgICAgdmVydGV4SW5kZXgsXG4gICAgICAgIHV2U2NyYXRjaFxuICAgICAgKTtcbiAgICAgIHZhciB0YXJnZXRVdiA9IHRyYW5zZm9ybVRleHR1cmVDb29yZGluYXRlcyhcbiAgICAgICAgc291cmNlVGlsZSxcbiAgICAgICAgdGVycmFpbkZpbGxNZXNoLnRpbGUsXG4gICAgICAgIHV2U2NyYXRjaCxcbiAgICAgICAgdXZTY3JhdGNoXG4gICAgICApO1xuICAgICAgaWYgKHRhcmdldFV2LnggPT09IHUgJiYgdGFyZ2V0VXYueSA9PT0gdikge1xuICAgICAgICAvLyBWZXJ0ZXggaXMgZ29vZCFcbiAgICAgICAgZ2V0VmVydGV4RnJvbVRpbGVBdENvcm5lcihzb3VyY2VNZXNoLCB2ZXJ0ZXhJbmRleCwgdSwgdiwgdmVydGV4KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBsYXN0IHZlcnRleCBpcyBub3QgdGhlIG9uZSB3ZSBuZWVkLCB0cnkgYmluYXJ5IHNlYXJjaGluZyBmb3IgdGhlIHJpZ2h0IG9uZS5cbiAgICAgIHZlcnRleEluZGV4SW5kZXggPSBiaW5hcnlTZWFyY2goZWRnZVZlcnRpY2VzLCBjb21wYXJlVSA/IHUgOiB2LCBmdW5jdGlvbiAoXG4gICAgICAgIHZlcnRleEluZGV4LFxuICAgICAgICB0ZXh0dXJlQ29vcmRpbmF0ZVxuICAgICAgKSB7XG4gICAgICAgIHNvdXJjZU1lc2guZW5jb2RpbmcuZGVjb2RlVGV4dHVyZUNvb3JkaW5hdGVzKFxuICAgICAgICAgIHNvdXJjZU1lc2gudmVydGljZXMsXG4gICAgICAgICAgdmVydGV4SW5kZXgsXG4gICAgICAgICAgdXZTY3JhdGNoXG4gICAgICAgICk7XG4gICAgICAgIHZhciB0YXJnZXRVdiA9IHRyYW5zZm9ybVRleHR1cmVDb29yZGluYXRlcyhcbiAgICAgICAgICBzb3VyY2VUaWxlLFxuICAgICAgICAgIHRlcnJhaW5GaWxsTWVzaC50aWxlLFxuICAgICAgICAgIHV2U2NyYXRjaCxcbiAgICAgICAgICB1dlNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGluY3JlYXNpbmcpIHtcbiAgICAgICAgICBpZiAoY29tcGFyZVUpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRVdi54IC0gdTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRhcmdldFV2LnkgLSB2O1xuICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmVVKSB7XG4gICAgICAgICAgcmV0dXJuIHUgLSB0YXJnZXRVdi54O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2IC0gdGFyZ2V0VXYueTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodmVydGV4SW5kZXhJbmRleCA8IDApIHtcbiAgICAgICAgdmVydGV4SW5kZXhJbmRleCA9IH52ZXJ0ZXhJbmRleEluZGV4O1xuXG4gICAgICAgIGlmICh2ZXJ0ZXhJbmRleEluZGV4ID4gMCAmJiB2ZXJ0ZXhJbmRleEluZGV4IDwgZWRnZVZlcnRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgIC8vIFRoZSBjb3JuZXIgZmFsbHMgYmV0d2VlbiB0d28gdmVydGljZXMsIHNvIGludGVycG9sYXRlIGJldHdlZW4gdGhlbS5cbiAgICAgICAgICBnZXRJbnRlcnBvbGF0ZWRWZXJ0ZXhBdENvcm5lcihcbiAgICAgICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgICAgIHNvdXJjZVRpbGUsXG4gICAgICAgICAgICB0ZXJyYWluRmlsbE1lc2gudGlsZSxcbiAgICAgICAgICAgIHNvdXJjZU1lc2gsXG4gICAgICAgICAgICBlZGdlVmVydGljZXNbdmVydGV4SW5kZXhJbmRleCAtIDFdLFxuICAgICAgICAgICAgZWRnZVZlcnRpY2VzW3ZlcnRleEluZGV4SW5kZXhdLFxuICAgICAgICAgICAgdSxcbiAgICAgICAgICAgIHYsXG4gICAgICAgICAgICBjb21wYXJlVSxcbiAgICAgICAgICAgIHZlcnRleFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvdW5kIGEgdmVydGV4IHRoYXQgZml0cyBpbiB0aGUgY29ybmVyIGV4YWN0bHkuXG4gICAgICAgIGdldFZlcnRleEZyb21UaWxlQXRDb3JuZXIoXG4gICAgICAgICAgc291cmNlTWVzaCxcbiAgICAgICAgICBlZGdlVmVydGljZXNbdmVydGV4SW5kZXhJbmRleF0sXG4gICAgICAgICAgdSxcbiAgICAgICAgICB2LFxuICAgICAgICAgIHZlcnRleFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBjb3JuZXJQb3NpdGlvbnNTY3JhdGNoID0gW1xuICBuZXcgQ2FydGVzaWFuMygpLFxuICBuZXcgQ2FydGVzaWFuMygpLFxuICBuZXcgQ2FydGVzaWFuMygpLFxuICBuZXcgQ2FydGVzaWFuMygpLFxuXTtcblxuZnVuY3Rpb24gY29tcHV0ZU9jY2x1ZGVlUG9pbnQoXG4gIHRpbGVQcm92aWRlcixcbiAgY2VudGVyLFxuICByZWN0YW5nbGUsXG4gIG1pbmltdW1IZWlnaHQsXG4gIG1heGltdW1IZWlnaHQsXG4gIHJlc3VsdFxuKSB7XG4gIHZhciBlbGxpcHNvaWRhbE9jY2x1ZGVyID0gdGlsZVByb3ZpZGVyLnF1YWR0cmVlLl9vY2NsdWRlcnMuZWxsaXBzb2lkO1xuICB2YXIgZWxsaXBzb2lkID0gZWxsaXBzb2lkYWxPY2NsdWRlci5lbGxpcHNvaWQ7XG5cbiAgdmFyIGNvcm5lclBvc2l0aW9ucyA9IGNvcm5lclBvc2l0aW9uc1NjcmF0Y2g7XG4gIENhcnRlc2lhbjMuZnJvbVJhZGlhbnMoXG4gICAgcmVjdGFuZ2xlLndlc3QsXG4gICAgcmVjdGFuZ2xlLnNvdXRoLFxuICAgIG1heGltdW1IZWlnaHQsXG4gICAgZWxsaXBzb2lkLFxuICAgIGNvcm5lclBvc2l0aW9uc1swXVxuICApO1xuICBDYXJ0ZXNpYW4zLmZyb21SYWRpYW5zKFxuICAgIHJlY3RhbmdsZS5lYXN0LFxuICAgIHJlY3RhbmdsZS5zb3V0aCxcbiAgICBtYXhpbXVtSGVpZ2h0LFxuICAgIGVsbGlwc29pZCxcbiAgICBjb3JuZXJQb3NpdGlvbnNbMV1cbiAgKTtcbiAgQ2FydGVzaWFuMy5mcm9tUmFkaWFucyhcbiAgICByZWN0YW5nbGUud2VzdCxcbiAgICByZWN0YW5nbGUubm9ydGgsXG4gICAgbWF4aW11bUhlaWdodCxcbiAgICBlbGxpcHNvaWQsXG4gICAgY29ybmVyUG9zaXRpb25zWzJdXG4gICk7XG4gIENhcnRlc2lhbjMuZnJvbVJhZGlhbnMoXG4gICAgcmVjdGFuZ2xlLmVhc3QsXG4gICAgcmVjdGFuZ2xlLm5vcnRoLFxuICAgIG1heGltdW1IZWlnaHQsXG4gICAgZWxsaXBzb2lkLFxuICAgIGNvcm5lclBvc2l0aW9uc1szXVxuICApO1xuXG4gIHJldHVybiBlbGxpcHNvaWRhbE9jY2x1ZGVyLmNvbXB1dGVIb3Jpem9uQ3VsbGluZ1BvaW50UG9zc2libHlVbmRlckVsbGlwc29pZChcbiAgICBjZW50ZXIsXG4gICAgY29ybmVyUG9zaXRpb25zLFxuICAgIG1pbmltdW1IZWlnaHQsXG4gICAgcmVzdWx0XG4gICk7XG59XG5leHBvcnQgZGVmYXVsdCBUZXJyYWluRmlsbE1lc2g7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11590\n')},46547:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * @private\n */\nvar TerrainState = {\n  FAILED: 0,\n  UNLOADED: 1,\n  RECEIVING: 2,\n  RECEIVED: 3,\n  TRANSFORMING: 4,\n  TRANSFORMED: 5,\n  READY: 6,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(TerrainState));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY1NDcuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsMkJBQTJCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvVGVycmFpblN0YXRlLmpzP2E1MGEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgVGVycmFpblN0YXRlID0ge1xuICBGQUlMRUQ6IDAsXG4gIFVOTE9BREVEOiAxLFxuICBSRUNFSVZJTkc6IDIsXG4gIFJFQ0VJVkVEOiAzLFxuICBUUkFOU0ZPUk1JTkc6IDQsXG4gIFRSQU5TRk9STUVEOiA1LFxuICBSRUFEWTogNixcbn07XG5leHBvcnQgZGVmYXVsdCBPYmplY3QuZnJlZXplKFRlcnJhaW5TdGF0ZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///46547\n')},54230:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88108);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_createGuid_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(39960);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(38443);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(68985);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9407);\n/* harmony import */ var _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2932);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(8743);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(13222);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// The atlas is made up of regions of space called nodes that contain images or child nodes.\nfunction TextureAtlasNode(\n  bottomLeft,\n  topRight,\n  childNode1,\n  childNode2,\n  imageIndex\n) {\n  this.bottomLeft = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(bottomLeft, _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO);\n  this.topRight = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(topRight, _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO);\n  this.childNode1 = childNode1;\n  this.childNode2 = childNode2;\n  this.imageIndex = imageIndex;\n}\n\nvar defaultInitialSize = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(16.0, 16.0);\n\n/**\n * A TextureAtlas stores multiple images in one square texture and keeps\n * track of the texture coordinates for each image. TextureAtlas is dynamic,\n * meaning new images can be added at any point in time.\n * Texture coordinates are subject to change if the texture atlas resizes, so it is\n * important to check {@link TextureAtlas#getGUID} before using old values.\n *\n * @alias TextureAtlas\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Scene} options.context The context in which the texture gets created.\n * @param {PixelFormat} [options.pixelFormat=PixelFormat.RGBA] The pixel format of the texture.\n * @param {Number} [options.borderWidthInPixels=1] The amount of spacing between adjacent images in pixels.\n * @param {Cartesian2} [options.initialSize=new Cartesian2(16.0, 16.0)] The initial side lengths of the texture.\n *\n * @exception {DeveloperError} borderWidthInPixels must be greater than or equal to zero.\n * @exception {DeveloperError} initialSize must be greater than zero.\n *\n * @private\n */\nfunction TextureAtlas(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var borderWidthInPixels = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.borderWidthInPixels, 1.0);\n  var initialSize = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.initialSize, defaultInitialSize);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(options.context)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("context is required.");\n  }\n  if (borderWidthInPixels < 0) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "borderWidthInPixels must be greater than or equal to zero."\n    );\n  }\n  if (initialSize.x < 1 || initialSize.y < 1) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("initialSize must be greater than zero.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this._context = options.context;\n  this._pixelFormat = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.pixelFormat, _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].RGBA */ .Z.RGBA);\n  this._borderWidthInPixels = borderWidthInPixels;\n  this._textureCoordinates = [];\n  this._guid = (0,_Core_createGuid_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)();\n  this._idHash = {};\n  this._initialSize = initialSize;\n\n  this._root = undefined;\n}\n\nObject.defineProperties(TextureAtlas.prototype, {\n  /**\n   * The amount of spacing between adjacent images in pixels.\n   * @memberof TextureAtlas.prototype\n   * @type {Number}\n   */\n  borderWidthInPixels: {\n    get: function () {\n      return this._borderWidthInPixels;\n    },\n  },\n\n  /**\n   * An array of {@link BoundingRectangle} texture coordinate regions for all the images in the texture atlas.\n   * The x and y values of the rectangle correspond to the bottom-left corner of the texture coordinate.\n   * The coordinates are in the order that the corresponding images were added to the atlas.\n   * @memberof TextureAtlas.prototype\n   * @type {BoundingRectangle[]}\n   */\n  textureCoordinates: {\n    get: function () {\n      return this._textureCoordinates;\n    },\n  },\n\n  /**\n   * The texture that all of the images are being written to.\n   * @memberof TextureAtlas.prototype\n   * @type {Texture}\n   */\n  texture: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(this._texture)) {\n        this._texture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n          context: this._context,\n          width: this._initialSize.x,\n          height: this._initialSize.y,\n          pixelFormat: this._pixelFormat,\n        });\n      }\n      return this._texture;\n    },\n  },\n\n  /**\n   * The number of images in the texture atlas. This value increases\n   * every time addImage or addImages is called.\n   * Texture coordinates are subject to change if the texture atlas resizes, so it is\n   * important to check {@link TextureAtlas#getGUID} before using old values.\n   * @memberof TextureAtlas.prototype\n   * @type {Number}\n   */\n  numberOfImages: {\n    get: function () {\n      return this._textureCoordinates.length;\n    },\n  },\n\n  /**\n   * The atlas\' globally unique identifier (GUID).\n   * The GUID changes whenever the texture atlas is modified.\n   * Classes that use a texture atlas should check if the GUID\n   * has changed before processing the atlas data.\n   * @memberof TextureAtlas.prototype\n   * @type {String}\n   */\n  guid: {\n    get: function () {\n      return this._guid;\n    },\n  },\n});\n\n// Builds a larger texture and copies the old texture into the new one.\nfunction resizeAtlas(textureAtlas, image) {\n  var context = textureAtlas._context;\n  var numImages = textureAtlas.numberOfImages;\n  var scalingFactor = 2.0;\n  var borderWidthInPixels = textureAtlas._borderWidthInPixels;\n  if (numImages > 0) {\n    var oldAtlasWidth = textureAtlas._texture.width;\n    var oldAtlasHeight = textureAtlas._texture.height;\n    var atlasWidth =\n      scalingFactor * (oldAtlasWidth + image.width + borderWidthInPixels);\n    var atlasHeight =\n      scalingFactor * (oldAtlasHeight + image.height + borderWidthInPixels);\n    var widthRatio = oldAtlasWidth / atlasWidth;\n    var heightRatio = oldAtlasHeight / atlasHeight;\n\n    // Create new node structure, putting the old root node in the bottom left.\n    var nodeBottomRight = new TextureAtlasNode(\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(oldAtlasWidth + borderWidthInPixels, borderWidthInPixels),\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(atlasWidth, oldAtlasHeight)\n    );\n    var nodeBottomHalf = new TextureAtlasNode(\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(),\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(atlasWidth, oldAtlasHeight),\n      textureAtlas._root,\n      nodeBottomRight\n    );\n    var nodeTopHalf = new TextureAtlasNode(\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(borderWidthInPixels, oldAtlasHeight + borderWidthInPixels),\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(atlasWidth, atlasHeight)\n    );\n    var nodeMain = new TextureAtlasNode(\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(),\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(atlasWidth, atlasHeight),\n      nodeBottomHalf,\n      nodeTopHalf\n    );\n\n    // Resize texture coordinates.\n    for (var i = 0; i < textureAtlas._textureCoordinates.length; i++) {\n      var texCoord = textureAtlas._textureCoordinates[i];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(texCoord)) {\n        texCoord.x *= widthRatio;\n        texCoord.y *= heightRatio;\n        texCoord.width *= widthRatio;\n        texCoord.height *= heightRatio;\n      }\n    }\n\n    // Copy larger texture.\n    var newTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n      context: textureAtlas._context,\n      width: atlasWidth,\n      height: atlasHeight,\n      pixelFormat: textureAtlas._pixelFormat,\n    });\n\n    var framebuffer = new _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n      context: context,\n      colorTextures: [textureAtlas._texture],\n      destroyAttachments: false,\n    });\n\n    framebuffer._bind();\n    newTexture.copyFromFramebuffer(0, 0, 0, 0, atlasWidth, atlasHeight);\n    framebuffer._unBind();\n    framebuffer.destroy();\n    textureAtlas._texture =\n      textureAtlas._texture && textureAtlas._texture.destroy();\n    textureAtlas._texture = newTexture;\n    textureAtlas._root = nodeMain;\n  } else {\n    // First image exceeds initialSize\n    var initialWidth = scalingFactor * (image.width + 2 * borderWidthInPixels);\n    var initialHeight =\n      scalingFactor * (image.height + 2 * borderWidthInPixels);\n    if (initialWidth < textureAtlas._initialSize.x) {\n      initialWidth = textureAtlas._initialSize.x;\n    }\n    if (initialHeight < textureAtlas._initialSize.y) {\n      initialHeight = textureAtlas._initialSize.y;\n    }\n    textureAtlas._texture =\n      textureAtlas._texture && textureAtlas._texture.destroy();\n    textureAtlas._texture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z({\n      context: textureAtlas._context,\n      width: initialWidth,\n      height: initialHeight,\n      pixelFormat: textureAtlas._pixelFormat,\n    });\n    textureAtlas._root = new TextureAtlasNode(\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(borderWidthInPixels, borderWidthInPixels),\n      new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(initialWidth, initialHeight)\n    );\n  }\n}\n\n// A recursive function that finds the best place to insert\n// a new image based on existing image \'nodes\'.\n// Inspired by: http://blackpawn.com/texts/lightmaps/default.html\nfunction findNode(textureAtlas, node, image) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(node)) {\n    return undefined;\n  }\n\n  // If a leaf node\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(node.childNode1) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(node.childNode2)) {\n    // Node already contains an image, don\'t add to it.\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(node.imageIndex)) {\n      return undefined;\n    }\n\n    var nodeWidth = node.topRight.x - node.bottomLeft.x;\n    var nodeHeight = node.topRight.y - node.bottomLeft.y;\n    var widthDifference = nodeWidth - image.width;\n    var heightDifference = nodeHeight - image.height;\n\n    // Node is smaller than the image.\n    if (widthDifference < 0 || heightDifference < 0) {\n      return undefined;\n    }\n\n    // If the node is the same size as the image, return the node\n    if (widthDifference === 0 && heightDifference === 0) {\n      return node;\n    }\n\n    // Vertical split (childNode1 = left half, childNode2 = right half).\n    if (widthDifference > heightDifference) {\n      node.childNode1 = new TextureAtlasNode(\n        new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(node.bottomLeft.x, node.bottomLeft.y),\n        new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(node.bottomLeft.x + image.width, node.topRight.y)\n      );\n      // Only make a second child if the border gives enough space.\n      var childNode2BottomLeftX =\n        node.bottomLeft.x + image.width + textureAtlas._borderWidthInPixels;\n      if (childNode2BottomLeftX < node.topRight.x) {\n        node.childNode2 = new TextureAtlasNode(\n          new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(childNode2BottomLeftX, node.bottomLeft.y),\n          new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(node.topRight.x, node.topRight.y)\n        );\n      }\n    }\n    // Horizontal split (childNode1 = bottom half, childNode2 = top half).\n    else {\n      node.childNode1 = new TextureAtlasNode(\n        new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(node.bottomLeft.x, node.bottomLeft.y),\n        new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(node.topRight.x, node.bottomLeft.y + image.height)\n      );\n      // Only make a second child if the border gives enough space.\n      var childNode2BottomLeftY =\n        node.bottomLeft.y + image.height + textureAtlas._borderWidthInPixels;\n      if (childNode2BottomLeftY < node.topRight.y) {\n        node.childNode2 = new TextureAtlasNode(\n          new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(node.bottomLeft.x, childNode2BottomLeftY),\n          new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(node.topRight.x, node.topRight.y)\n        );\n      }\n    }\n    return findNode(textureAtlas, node.childNode1, image);\n  }\n\n  // If not a leaf node\n  return (\n    findNode(textureAtlas, node.childNode1, image) ||\n    findNode(textureAtlas, node.childNode2, image)\n  );\n}\n\n// Adds image of given index to the texture atlas. Called from addImage and addImages.\nfunction addImage(textureAtlas, image, index) {\n  var node = findNode(textureAtlas, textureAtlas._root, image);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(node)) {\n    // Found a node that can hold the image.\n    node.imageIndex = index;\n\n    // Add texture coordinate and write to texture\n    var atlasWidth = textureAtlas._texture.width;\n    var atlasHeight = textureAtlas._texture.height;\n    var nodeWidth = node.topRight.x - node.bottomLeft.x;\n    var nodeHeight = node.topRight.y - node.bottomLeft.y;\n    var x = node.bottomLeft.x / atlasWidth;\n    var y = node.bottomLeft.y / atlasHeight;\n    var w = nodeWidth / atlasWidth;\n    var h = nodeHeight / atlasHeight;\n    textureAtlas._textureCoordinates[index] = new _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(x, y, w, h);\n    textureAtlas._texture.copyFrom({\n      source: image,\n      xOffset: node.bottomLeft.x,\n      yOffset: node.bottomLeft.y,\n    });\n  } else {\n    // No node found, must resize the texture atlas.\n    resizeAtlas(textureAtlas, image);\n    addImage(textureAtlas, image, index);\n  }\n\n  textureAtlas._guid = (0,_Core_createGuid_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)();\n}\n\n/**\n * Adds an image to the atlas.  If the image is already in the atlas, the atlas is unchanged and\n * the existing index is used.\n *\n * @param {String} id An identifier to detect whether the image already exists in the atlas.\n * @param {HTMLImageElement|HTMLCanvasElement|String|Resource|Promise|TextureAtlas.CreateImageCallback} image An image or canvas to add to the texture atlas,\n *        or a URL to an Image, or a Promise for an image, or a function that creates an image.\n * @returns {Promise.<Number>} A Promise for the image index.\n */\nTextureAtlas.prototype.addImage = function (id, image) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(id)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("id is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(image)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("image is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var indexPromise = this._idHash[id];\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(indexPromise)) {\n    // we\'re already aware of this source\n    return indexPromise;\n  }\n\n  // not in atlas, create the promise for the index\n\n  if (typeof image === "function") {\n    // if image is a function, call it\n    image = image(id);\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(image)) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("image is required.");\n    }\n    //>>includeEnd(\'debug\');\n  } else if (typeof image === "string" || image instanceof _Core_Resource_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z) {\n    // Get a resource\n    var resource = _Core_Resource_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].createIfNeeded */ .Z.createIfNeeded(image);\n    image = resource.fetchImage();\n  }\n\n  var that = this;\n\n  indexPromise = (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(image, function (image) {\n    if (that.isDestroyed()) {\n      return -1;\n    }\n\n    var index = that.numberOfImages;\n\n    addImage(that, image, index);\n\n    return index;\n  });\n\n  // store the promise\n  this._idHash[id] = indexPromise;\n\n  return indexPromise;\n};\n\n/**\n * Add a sub-region of an existing atlas image as additional image indices.\n *\n * @param {String} id The identifier of the existing image.\n * @param {BoundingRectangle} subRegion An {@link BoundingRectangle} sub-region measured in pixels from the bottom-left.\n *\n * @returns {Promise.<Number>} A Promise for the image index.\n */\nTextureAtlas.prototype.addSubRegion = function (id, subRegion) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(id)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("id is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(subRegion)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("subRegion is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var indexPromise = this._idHash[id];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(indexPromise)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n      \'image with id "\' + id + \'" not found in the atlas.\'\n    );\n  }\n\n  var that = this;\n  return (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(indexPromise, function (index) {\n    if (index === -1) {\n      // the atlas is destroyed\n      return -1;\n    }\n    var atlasWidth = that._texture.width;\n    var atlasHeight = that._texture.height;\n    var numImages = that.numberOfImages;\n\n    var baseRegion = that._textureCoordinates[index];\n    var x = baseRegion.x + subRegion.x / atlasWidth;\n    var y = baseRegion.y + subRegion.y / atlasHeight;\n    var w = subRegion.width / atlasWidth;\n    var h = subRegion.height / atlasHeight;\n    that._textureCoordinates.push(new _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(x, y, w, h));\n    that._guid = (0,_Core_createGuid_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)();\n\n    return numImages;\n  });\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n *\n * @see TextureAtlas#destroy\n */\nTextureAtlas.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * atlas = atlas && atlas.destroy();\n *\n * @see TextureAtlas#isDestroyed\n */\nTextureAtlas.prototype.destroy = function () {\n  this._texture = this._texture && this._texture.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n\n/**\n * A function that creates an image.\n * @callback TextureAtlas.CreateImageCallback\n * @param {String} id The identifier of the image to load.\n * @returns {HTMLImageElement|Promise<HTMLImageElement>} The image, or a promise that will resolve to an image.\n */\n/* harmony default export */ __webpack_exports__["Z"] = (TextureAtlas);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywyRUFBYTtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSw0Q0FBNEM7QUFDekQ7QUFDQSx5REFBZSxZQUFZLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvVGV4dHVyZUF0bGFzLmpzPzBlZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJvdW5kaW5nUmVjdGFuZ2xlIGZyb20gXCIuLi9Db3JlL0JvdW5kaW5nUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgY3JlYXRlR3VpZCBmcm9tIFwiLi4vQ29yZS9jcmVhdGVHdWlkLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgUGl4ZWxGb3JtYXQgZnJvbSBcIi4uL0NvcmUvUGl4ZWxGb3JtYXQuanNcIjtcbmltcG9ydCBSZXNvdXJjZSBmcm9tIFwiLi4vQ29yZS9SZXNvdXJjZS5qc1wiO1xuaW1wb3J0IFJ1bnRpbWVFcnJvciBmcm9tIFwiLi4vQ29yZS9SdW50aW1lRXJyb3IuanNcIjtcbmltcG9ydCBGcmFtZWJ1ZmZlciBmcm9tIFwiLi4vUmVuZGVyZXIvRnJhbWVidWZmZXIuanNcIjtcbmltcG9ydCBUZXh0dXJlIGZyb20gXCIuLi9SZW5kZXJlci9UZXh0dXJlLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5cbi8vIFRoZSBhdGxhcyBpcyBtYWRlIHVwIG9mIHJlZ2lvbnMgb2Ygc3BhY2UgY2FsbGVkIG5vZGVzIHRoYXQgY29udGFpbiBpbWFnZXMgb3IgY2hpbGQgbm9kZXMuXG5mdW5jdGlvbiBUZXh0dXJlQXRsYXNOb2RlKFxuICBib3R0b21MZWZ0LFxuICB0b3BSaWdodCxcbiAgY2hpbGROb2RlMSxcbiAgY2hpbGROb2RlMixcbiAgaW1hZ2VJbmRleFxuKSB7XG4gIHRoaXMuYm90dG9tTGVmdCA9IGRlZmF1bHRWYWx1ZShib3R0b21MZWZ0LCBDYXJ0ZXNpYW4yLlpFUk8pO1xuICB0aGlzLnRvcFJpZ2h0ID0gZGVmYXVsdFZhbHVlKHRvcFJpZ2h0LCBDYXJ0ZXNpYW4yLlpFUk8pO1xuICB0aGlzLmNoaWxkTm9kZTEgPSBjaGlsZE5vZGUxO1xuICB0aGlzLmNoaWxkTm9kZTIgPSBjaGlsZE5vZGUyO1xuICB0aGlzLmltYWdlSW5kZXggPSBpbWFnZUluZGV4O1xufVxuXG52YXIgZGVmYXVsdEluaXRpYWxTaXplID0gbmV3IENhcnRlc2lhbjIoMTYuMCwgMTYuMCk7XG5cbi8qKlxuICogQSBUZXh0dXJlQXRsYXMgc3RvcmVzIG11bHRpcGxlIGltYWdlcyBpbiBvbmUgc3F1YXJlIHRleHR1cmUgYW5kIGtlZXBzXG4gKiB0cmFjayBvZiB0aGUgdGV4dHVyZSBjb29yZGluYXRlcyBmb3IgZWFjaCBpbWFnZS4gVGV4dHVyZUF0bGFzIGlzIGR5bmFtaWMsXG4gKiBtZWFuaW5nIG5ldyBpbWFnZXMgY2FuIGJlIGFkZGVkIGF0IGFueSBwb2ludCBpbiB0aW1lLlxuICogVGV4dHVyZSBjb29yZGluYXRlcyBhcmUgc3ViamVjdCB0byBjaGFuZ2UgaWYgdGhlIHRleHR1cmUgYXRsYXMgcmVzaXplcywgc28gaXQgaXNcbiAqIGltcG9ydGFudCB0byBjaGVjayB7QGxpbmsgVGV4dHVyZUF0bGFzI2dldEdVSUR9IGJlZm9yZSB1c2luZyBvbGQgdmFsdWVzLlxuICpcbiAqIEBhbGlhcyBUZXh0dXJlQXRsYXNcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7U2NlbmV9IG9wdGlvbnMuY29udGV4dCBUaGUgY29udGV4dCBpbiB3aGljaCB0aGUgdGV4dHVyZSBnZXRzIGNyZWF0ZWQuXG4gKiBAcGFyYW0ge1BpeGVsRm9ybWF0fSBbb3B0aW9ucy5waXhlbEZvcm1hdD1QaXhlbEZvcm1hdC5SR0JBXSBUaGUgcGl4ZWwgZm9ybWF0IG9mIHRoZSB0ZXh0dXJlLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmJvcmRlcldpZHRoSW5QaXhlbHM9MV0gVGhlIGFtb3VudCBvZiBzcGFjaW5nIGJldHdlZW4gYWRqYWNlbnQgaW1hZ2VzIGluIHBpeGVscy5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuMn0gW29wdGlvbnMuaW5pdGlhbFNpemU9bmV3IENhcnRlc2lhbjIoMTYuMCwgMTYuMCldIFRoZSBpbml0aWFsIHNpZGUgbGVuZ3RocyBvZiB0aGUgdGV4dHVyZS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gYm9yZGVyV2lkdGhJblBpeGVscyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IGluaXRpYWxTaXplIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gVGV4dHVyZUF0bGFzKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIGJvcmRlcldpZHRoSW5QaXhlbHMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5ib3JkZXJXaWR0aEluUGl4ZWxzLCAxLjApO1xuICB2YXIgaW5pdGlhbFNpemUgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5pbml0aWFsU2l6ZSwgZGVmYXVsdEluaXRpYWxTaXplKTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQob3B0aW9ucy5jb250ZXh0KSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImNvbnRleHQgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmIChib3JkZXJXaWR0aEluUGl4ZWxzIDwgMCkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiYm9yZGVyV2lkdGhJblBpeGVscyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvLlwiXG4gICAgKTtcbiAgfVxuICBpZiAoaW5pdGlhbFNpemUueCA8IDEgfHwgaW5pdGlhbFNpemUueSA8IDEpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJpbml0aWFsU2l6ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0O1xuICB0aGlzLl9waXhlbEZvcm1hdCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnBpeGVsRm9ybWF0LCBQaXhlbEZvcm1hdC5SR0JBKTtcbiAgdGhpcy5fYm9yZGVyV2lkdGhJblBpeGVscyA9IGJvcmRlcldpZHRoSW5QaXhlbHM7XG4gIHRoaXMuX3RleHR1cmVDb29yZGluYXRlcyA9IFtdO1xuICB0aGlzLl9ndWlkID0gY3JlYXRlR3VpZCgpO1xuICB0aGlzLl9pZEhhc2ggPSB7fTtcbiAgdGhpcy5faW5pdGlhbFNpemUgPSBpbml0aWFsU2l6ZTtcblxuICB0aGlzLl9yb290ID0gdW5kZWZpbmVkO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUZXh0dXJlQXRsYXMucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBUaGUgYW1vdW50IG9mIHNwYWNpbmcgYmV0d2VlbiBhZGphY2VudCBpbWFnZXMgaW4gcGl4ZWxzLlxuICAgKiBAbWVtYmVyb2YgVGV4dHVyZUF0bGFzLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgYm9yZGVyV2lkdGhJblBpeGVsczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2JvcmRlcldpZHRoSW5QaXhlbHM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogQW4gYXJyYXkgb2Yge0BsaW5rIEJvdW5kaW5nUmVjdGFuZ2xlfSB0ZXh0dXJlIGNvb3JkaW5hdGUgcmVnaW9ucyBmb3IgYWxsIHRoZSBpbWFnZXMgaW4gdGhlIHRleHR1cmUgYXRsYXMuXG4gICAqIFRoZSB4IGFuZCB5IHZhbHVlcyBvZiB0aGUgcmVjdGFuZ2xlIGNvcnJlc3BvbmQgdG8gdGhlIGJvdHRvbS1sZWZ0IGNvcm5lciBvZiB0aGUgdGV4dHVyZSBjb29yZGluYXRlLlxuICAgKiBUaGUgY29vcmRpbmF0ZXMgYXJlIGluIHRoZSBvcmRlciB0aGF0IHRoZSBjb3JyZXNwb25kaW5nIGltYWdlcyB3ZXJlIGFkZGVkIHRvIHRoZSBhdGxhcy5cbiAgICogQG1lbWJlcm9mIFRleHR1cmVBdGxhcy5wcm90b3R5cGVcbiAgICogQHR5cGUge0JvdW5kaW5nUmVjdGFuZ2xlW119XG4gICAqL1xuICB0ZXh0dXJlQ29vcmRpbmF0ZXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90ZXh0dXJlQ29vcmRpbmF0ZXM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogVGhlIHRleHR1cmUgdGhhdCBhbGwgb2YgdGhlIGltYWdlcyBhcmUgYmVpbmcgd3JpdHRlbiB0by5cbiAgICogQG1lbWJlcm9mIFRleHR1cmVBdGxhcy5wcm90b3R5cGVcbiAgICogQHR5cGUge1RleHR1cmV9XG4gICAqL1xuICB0ZXh0dXJlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWRlZmluZWQodGhpcy5fdGV4dHVyZSkpIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG5ldyBUZXh0dXJlKHtcbiAgICAgICAgICBjb250ZXh0OiB0aGlzLl9jb250ZXh0LFxuICAgICAgICAgIHdpZHRoOiB0aGlzLl9pbml0aWFsU2l6ZS54LFxuICAgICAgICAgIGhlaWdodDogdGhpcy5faW5pdGlhbFNpemUueSxcbiAgICAgICAgICBwaXhlbEZvcm1hdDogdGhpcy5fcGl4ZWxGb3JtYXQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbWFnZXMgaW4gdGhlIHRleHR1cmUgYXRsYXMuIFRoaXMgdmFsdWUgaW5jcmVhc2VzXG4gICAqIGV2ZXJ5IHRpbWUgYWRkSW1hZ2Ugb3IgYWRkSW1hZ2VzIGlzIGNhbGxlZC5cbiAgICogVGV4dHVyZSBjb29yZGluYXRlcyBhcmUgc3ViamVjdCB0byBjaGFuZ2UgaWYgdGhlIHRleHR1cmUgYXRsYXMgcmVzaXplcywgc28gaXQgaXNcbiAgICogaW1wb3J0YW50IHRvIGNoZWNrIHtAbGluayBUZXh0dXJlQXRsYXMjZ2V0R1VJRH0gYmVmb3JlIHVzaW5nIG9sZCB2YWx1ZXMuXG4gICAqIEBtZW1iZXJvZiBUZXh0dXJlQXRsYXMucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBudW1iZXJPZkltYWdlczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogVGhlIGF0bGFzJyBnbG9iYWxseSB1bmlxdWUgaWRlbnRpZmllciAoR1VJRCkuXG4gICAqIFRoZSBHVUlEIGNoYW5nZXMgd2hlbmV2ZXIgdGhlIHRleHR1cmUgYXRsYXMgaXMgbW9kaWZpZWQuXG4gICAqIENsYXNzZXMgdGhhdCB1c2UgYSB0ZXh0dXJlIGF0bGFzIHNob3VsZCBjaGVjayBpZiB0aGUgR1VJRFxuICAgKiBoYXMgY2hhbmdlZCBiZWZvcmUgcHJvY2Vzc2luZyB0aGUgYXRsYXMgZGF0YS5cbiAgICogQG1lbWJlcm9mIFRleHR1cmVBdGxhcy5wcm90b3R5cGVcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGd1aWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9ndWlkO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLy8gQnVpbGRzIGEgbGFyZ2VyIHRleHR1cmUgYW5kIGNvcGllcyB0aGUgb2xkIHRleHR1cmUgaW50byB0aGUgbmV3IG9uZS5cbmZ1bmN0aW9uIHJlc2l6ZUF0bGFzKHRleHR1cmVBdGxhcywgaW1hZ2UpIHtcbiAgdmFyIGNvbnRleHQgPSB0ZXh0dXJlQXRsYXMuX2NvbnRleHQ7XG4gIHZhciBudW1JbWFnZXMgPSB0ZXh0dXJlQXRsYXMubnVtYmVyT2ZJbWFnZXM7XG4gIHZhciBzY2FsaW5nRmFjdG9yID0gMi4wO1xuICB2YXIgYm9yZGVyV2lkdGhJblBpeGVscyA9IHRleHR1cmVBdGxhcy5fYm9yZGVyV2lkdGhJblBpeGVscztcbiAgaWYgKG51bUltYWdlcyA+IDApIHtcbiAgICB2YXIgb2xkQXRsYXNXaWR0aCA9IHRleHR1cmVBdGxhcy5fdGV4dHVyZS53aWR0aDtcbiAgICB2YXIgb2xkQXRsYXNIZWlnaHQgPSB0ZXh0dXJlQXRsYXMuX3RleHR1cmUuaGVpZ2h0O1xuICAgIHZhciBhdGxhc1dpZHRoID1cbiAgICAgIHNjYWxpbmdGYWN0b3IgKiAob2xkQXRsYXNXaWR0aCArIGltYWdlLndpZHRoICsgYm9yZGVyV2lkdGhJblBpeGVscyk7XG4gICAgdmFyIGF0bGFzSGVpZ2h0ID1cbiAgICAgIHNjYWxpbmdGYWN0b3IgKiAob2xkQXRsYXNIZWlnaHQgKyBpbWFnZS5oZWlnaHQgKyBib3JkZXJXaWR0aEluUGl4ZWxzKTtcbiAgICB2YXIgd2lkdGhSYXRpbyA9IG9sZEF0bGFzV2lkdGggLyBhdGxhc1dpZHRoO1xuICAgIHZhciBoZWlnaHRSYXRpbyA9IG9sZEF0bGFzSGVpZ2h0IC8gYXRsYXNIZWlnaHQ7XG5cbiAgICAvLyBDcmVhdGUgbmV3IG5vZGUgc3RydWN0dXJlLCBwdXR0aW5nIHRoZSBvbGQgcm9vdCBub2RlIGluIHRoZSBib3R0b20gbGVmdC5cbiAgICB2YXIgbm9kZUJvdHRvbVJpZ2h0ID0gbmV3IFRleHR1cmVBdGxhc05vZGUoXG4gICAgICBuZXcgQ2FydGVzaWFuMihvbGRBdGxhc1dpZHRoICsgYm9yZGVyV2lkdGhJblBpeGVscywgYm9yZGVyV2lkdGhJblBpeGVscyksXG4gICAgICBuZXcgQ2FydGVzaWFuMihhdGxhc1dpZHRoLCBvbGRBdGxhc0hlaWdodClcbiAgICApO1xuICAgIHZhciBub2RlQm90dG9tSGFsZiA9IG5ldyBUZXh0dXJlQXRsYXNOb2RlKFxuICAgICAgbmV3IENhcnRlc2lhbjIoKSxcbiAgICAgIG5ldyBDYXJ0ZXNpYW4yKGF0bGFzV2lkdGgsIG9sZEF0bGFzSGVpZ2h0KSxcbiAgICAgIHRleHR1cmVBdGxhcy5fcm9vdCxcbiAgICAgIG5vZGVCb3R0b21SaWdodFxuICAgICk7XG4gICAgdmFyIG5vZGVUb3BIYWxmID0gbmV3IFRleHR1cmVBdGxhc05vZGUoXG4gICAgICBuZXcgQ2FydGVzaWFuMihib3JkZXJXaWR0aEluUGl4ZWxzLCBvbGRBdGxhc0hlaWdodCArIGJvcmRlcldpZHRoSW5QaXhlbHMpLFxuICAgICAgbmV3IENhcnRlc2lhbjIoYXRsYXNXaWR0aCwgYXRsYXNIZWlnaHQpXG4gICAgKTtcbiAgICB2YXIgbm9kZU1haW4gPSBuZXcgVGV4dHVyZUF0bGFzTm9kZShcbiAgICAgIG5ldyBDYXJ0ZXNpYW4yKCksXG4gICAgICBuZXcgQ2FydGVzaWFuMihhdGxhc1dpZHRoLCBhdGxhc0hlaWdodCksXG4gICAgICBub2RlQm90dG9tSGFsZixcbiAgICAgIG5vZGVUb3BIYWxmXG4gICAgKTtcblxuICAgIC8vIFJlc2l6ZSB0ZXh0dXJlIGNvb3JkaW5hdGVzLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dHVyZUF0bGFzLl90ZXh0dXJlQ29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0ZXhDb29yZCA9IHRleHR1cmVBdGxhcy5fdGV4dHVyZUNvb3JkaW5hdGVzW2ldO1xuICAgICAgaWYgKGRlZmluZWQodGV4Q29vcmQpKSB7XG4gICAgICAgIHRleENvb3JkLnggKj0gd2lkdGhSYXRpbztcbiAgICAgICAgdGV4Q29vcmQueSAqPSBoZWlnaHRSYXRpbztcbiAgICAgICAgdGV4Q29vcmQud2lkdGggKj0gd2lkdGhSYXRpbztcbiAgICAgICAgdGV4Q29vcmQuaGVpZ2h0ICo9IGhlaWdodFJhdGlvO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENvcHkgbGFyZ2VyIHRleHR1cmUuXG4gICAgdmFyIG5ld1RleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgICBjb250ZXh0OiB0ZXh0dXJlQXRsYXMuX2NvbnRleHQsXG4gICAgICB3aWR0aDogYXRsYXNXaWR0aCxcbiAgICAgIGhlaWdodDogYXRsYXNIZWlnaHQsXG4gICAgICBwaXhlbEZvcm1hdDogdGV4dHVyZUF0bGFzLl9waXhlbEZvcm1hdCxcbiAgICB9KTtcblxuICAgIHZhciBmcmFtZWJ1ZmZlciA9IG5ldyBGcmFtZWJ1ZmZlcih7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgY29sb3JUZXh0dXJlczogW3RleHR1cmVBdGxhcy5fdGV4dHVyZV0sXG4gICAgICBkZXN0cm95QXR0YWNobWVudHM6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgZnJhbWVidWZmZXIuX2JpbmQoKTtcbiAgICBuZXdUZXh0dXJlLmNvcHlGcm9tRnJhbWVidWZmZXIoMCwgMCwgMCwgMCwgYXRsYXNXaWR0aCwgYXRsYXNIZWlnaHQpO1xuICAgIGZyYW1lYnVmZmVyLl91bkJpbmQoKTtcbiAgICBmcmFtZWJ1ZmZlci5kZXN0cm95KCk7XG4gICAgdGV4dHVyZUF0bGFzLl90ZXh0dXJlID1cbiAgICAgIHRleHR1cmVBdGxhcy5fdGV4dHVyZSAmJiB0ZXh0dXJlQXRsYXMuX3RleHR1cmUuZGVzdHJveSgpO1xuICAgIHRleHR1cmVBdGxhcy5fdGV4dHVyZSA9IG5ld1RleHR1cmU7XG4gICAgdGV4dHVyZUF0bGFzLl9yb290ID0gbm9kZU1haW47XG4gIH0gZWxzZSB7XG4gICAgLy8gRmlyc3QgaW1hZ2UgZXhjZWVkcyBpbml0aWFsU2l6ZVxuICAgIHZhciBpbml0aWFsV2lkdGggPSBzY2FsaW5nRmFjdG9yICogKGltYWdlLndpZHRoICsgMiAqIGJvcmRlcldpZHRoSW5QaXhlbHMpO1xuICAgIHZhciBpbml0aWFsSGVpZ2h0ID1cbiAgICAgIHNjYWxpbmdGYWN0b3IgKiAoaW1hZ2UuaGVpZ2h0ICsgMiAqIGJvcmRlcldpZHRoSW5QaXhlbHMpO1xuICAgIGlmIChpbml0aWFsV2lkdGggPCB0ZXh0dXJlQXRsYXMuX2luaXRpYWxTaXplLngpIHtcbiAgICAgIGluaXRpYWxXaWR0aCA9IHRleHR1cmVBdGxhcy5faW5pdGlhbFNpemUueDtcbiAgICB9XG4gICAgaWYgKGluaXRpYWxIZWlnaHQgPCB0ZXh0dXJlQXRsYXMuX2luaXRpYWxTaXplLnkpIHtcbiAgICAgIGluaXRpYWxIZWlnaHQgPSB0ZXh0dXJlQXRsYXMuX2luaXRpYWxTaXplLnk7XG4gICAgfVxuICAgIHRleHR1cmVBdGxhcy5fdGV4dHVyZSA9XG4gICAgICB0ZXh0dXJlQXRsYXMuX3RleHR1cmUgJiYgdGV4dHVyZUF0bGFzLl90ZXh0dXJlLmRlc3Ryb3koKTtcbiAgICB0ZXh0dXJlQXRsYXMuX3RleHR1cmUgPSBuZXcgVGV4dHVyZSh7XG4gICAgICBjb250ZXh0OiB0ZXh0dXJlQXRsYXMuX2NvbnRleHQsXG4gICAgICB3aWR0aDogaW5pdGlhbFdpZHRoLFxuICAgICAgaGVpZ2h0OiBpbml0aWFsSGVpZ2h0LFxuICAgICAgcGl4ZWxGb3JtYXQ6IHRleHR1cmVBdGxhcy5fcGl4ZWxGb3JtYXQsXG4gICAgfSk7XG4gICAgdGV4dHVyZUF0bGFzLl9yb290ID0gbmV3IFRleHR1cmVBdGxhc05vZGUoXG4gICAgICBuZXcgQ2FydGVzaWFuMihib3JkZXJXaWR0aEluUGl4ZWxzLCBib3JkZXJXaWR0aEluUGl4ZWxzKSxcbiAgICAgIG5ldyBDYXJ0ZXNpYW4yKGluaXRpYWxXaWR0aCwgaW5pdGlhbEhlaWdodClcbiAgICApO1xuICB9XG59XG5cbi8vIEEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgZmluZHMgdGhlIGJlc3QgcGxhY2UgdG8gaW5zZXJ0XG4vLyBhIG5ldyBpbWFnZSBiYXNlZCBvbiBleGlzdGluZyBpbWFnZSAnbm9kZXMnLlxuLy8gSW5zcGlyZWQgYnk6IGh0dHA6Ly9ibGFja3Bhd24uY29tL3RleHRzL2xpZ2h0bWFwcy9kZWZhdWx0Lmh0bWxcbmZ1bmN0aW9uIGZpbmROb2RlKHRleHR1cmVBdGxhcywgbm9kZSwgaW1hZ2UpIHtcbiAgaWYgKCFkZWZpbmVkKG5vZGUpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIElmIGEgbGVhZiBub2RlXG4gIGlmICghZGVmaW5lZChub2RlLmNoaWxkTm9kZTEpICYmICFkZWZpbmVkKG5vZGUuY2hpbGROb2RlMikpIHtcbiAgICAvLyBOb2RlIGFscmVhZHkgY29udGFpbnMgYW4gaW1hZ2UsIGRvbid0IGFkZCB0byBpdC5cbiAgICBpZiAoZGVmaW5lZChub2RlLmltYWdlSW5kZXgpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciBub2RlV2lkdGggPSBub2RlLnRvcFJpZ2h0LnggLSBub2RlLmJvdHRvbUxlZnQueDtcbiAgICB2YXIgbm9kZUhlaWdodCA9IG5vZGUudG9wUmlnaHQueSAtIG5vZGUuYm90dG9tTGVmdC55O1xuICAgIHZhciB3aWR0aERpZmZlcmVuY2UgPSBub2RlV2lkdGggLSBpbWFnZS53aWR0aDtcbiAgICB2YXIgaGVpZ2h0RGlmZmVyZW5jZSA9IG5vZGVIZWlnaHQgLSBpbWFnZS5oZWlnaHQ7XG5cbiAgICAvLyBOb2RlIGlzIHNtYWxsZXIgdGhhbiB0aGUgaW1hZ2UuXG4gICAgaWYgKHdpZHRoRGlmZmVyZW5jZSA8IDAgfHwgaGVpZ2h0RGlmZmVyZW5jZSA8IDApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIG5vZGUgaXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgaW1hZ2UsIHJldHVybiB0aGUgbm9kZVxuICAgIGlmICh3aWR0aERpZmZlcmVuY2UgPT09IDAgJiYgaGVpZ2h0RGlmZmVyZW5jZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgLy8gVmVydGljYWwgc3BsaXQgKGNoaWxkTm9kZTEgPSBsZWZ0IGhhbGYsIGNoaWxkTm9kZTIgPSByaWdodCBoYWxmKS5cbiAgICBpZiAod2lkdGhEaWZmZXJlbmNlID4gaGVpZ2h0RGlmZmVyZW5jZSkge1xuICAgICAgbm9kZS5jaGlsZE5vZGUxID0gbmV3IFRleHR1cmVBdGxhc05vZGUoXG4gICAgICAgIG5ldyBDYXJ0ZXNpYW4yKG5vZGUuYm90dG9tTGVmdC54LCBub2RlLmJvdHRvbUxlZnQueSksXG4gICAgICAgIG5ldyBDYXJ0ZXNpYW4yKG5vZGUuYm90dG9tTGVmdC54ICsgaW1hZ2Uud2lkdGgsIG5vZGUudG9wUmlnaHQueSlcbiAgICAgICk7XG4gICAgICAvLyBPbmx5IG1ha2UgYSBzZWNvbmQgY2hpbGQgaWYgdGhlIGJvcmRlciBnaXZlcyBlbm91Z2ggc3BhY2UuXG4gICAgICB2YXIgY2hpbGROb2RlMkJvdHRvbUxlZnRYID1cbiAgICAgICAgbm9kZS5ib3R0b21MZWZ0LnggKyBpbWFnZS53aWR0aCArIHRleHR1cmVBdGxhcy5fYm9yZGVyV2lkdGhJblBpeGVscztcbiAgICAgIGlmIChjaGlsZE5vZGUyQm90dG9tTGVmdFggPCBub2RlLnRvcFJpZ2h0LngpIHtcbiAgICAgICAgbm9kZS5jaGlsZE5vZGUyID0gbmV3IFRleHR1cmVBdGxhc05vZGUoXG4gICAgICAgICAgbmV3IENhcnRlc2lhbjIoY2hpbGROb2RlMkJvdHRvbUxlZnRYLCBub2RlLmJvdHRvbUxlZnQueSksXG4gICAgICAgICAgbmV3IENhcnRlc2lhbjIobm9kZS50b3BSaWdodC54LCBub2RlLnRvcFJpZ2h0LnkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEhvcml6b250YWwgc3BsaXQgKGNoaWxkTm9kZTEgPSBib3R0b20gaGFsZiwgY2hpbGROb2RlMiA9IHRvcCBoYWxmKS5cbiAgICBlbHNlIHtcbiAgICAgIG5vZGUuY2hpbGROb2RlMSA9IG5ldyBUZXh0dXJlQXRsYXNOb2RlKFxuICAgICAgICBuZXcgQ2FydGVzaWFuMihub2RlLmJvdHRvbUxlZnQueCwgbm9kZS5ib3R0b21MZWZ0LnkpLFxuICAgICAgICBuZXcgQ2FydGVzaWFuMihub2RlLnRvcFJpZ2h0LngsIG5vZGUuYm90dG9tTGVmdC55ICsgaW1hZ2UuaGVpZ2h0KVxuICAgICAgKTtcbiAgICAgIC8vIE9ubHkgbWFrZSBhIHNlY29uZCBjaGlsZCBpZiB0aGUgYm9yZGVyIGdpdmVzIGVub3VnaCBzcGFjZS5cbiAgICAgIHZhciBjaGlsZE5vZGUyQm90dG9tTGVmdFkgPVxuICAgICAgICBub2RlLmJvdHRvbUxlZnQueSArIGltYWdlLmhlaWdodCArIHRleHR1cmVBdGxhcy5fYm9yZGVyV2lkdGhJblBpeGVscztcbiAgICAgIGlmIChjaGlsZE5vZGUyQm90dG9tTGVmdFkgPCBub2RlLnRvcFJpZ2h0LnkpIHtcbiAgICAgICAgbm9kZS5jaGlsZE5vZGUyID0gbmV3IFRleHR1cmVBdGxhc05vZGUoXG4gICAgICAgICAgbmV3IENhcnRlc2lhbjIobm9kZS5ib3R0b21MZWZ0LngsIGNoaWxkTm9kZTJCb3R0b21MZWZ0WSksXG4gICAgICAgICAgbmV3IENhcnRlc2lhbjIobm9kZS50b3BSaWdodC54LCBub2RlLnRvcFJpZ2h0LnkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaW5kTm9kZSh0ZXh0dXJlQXRsYXMsIG5vZGUuY2hpbGROb2RlMSwgaW1hZ2UpO1xuICB9XG5cbiAgLy8gSWYgbm90IGEgbGVhZiBub2RlXG4gIHJldHVybiAoXG4gICAgZmluZE5vZGUodGV4dHVyZUF0bGFzLCBub2RlLmNoaWxkTm9kZTEsIGltYWdlKSB8fFxuICAgIGZpbmROb2RlKHRleHR1cmVBdGxhcywgbm9kZS5jaGlsZE5vZGUyLCBpbWFnZSlcbiAgKTtcbn1cblxuLy8gQWRkcyBpbWFnZSBvZiBnaXZlbiBpbmRleCB0byB0aGUgdGV4dHVyZSBhdGxhcy4gQ2FsbGVkIGZyb20gYWRkSW1hZ2UgYW5kIGFkZEltYWdlcy5cbmZ1bmN0aW9uIGFkZEltYWdlKHRleHR1cmVBdGxhcywgaW1hZ2UsIGluZGV4KSB7XG4gIHZhciBub2RlID0gZmluZE5vZGUodGV4dHVyZUF0bGFzLCB0ZXh0dXJlQXRsYXMuX3Jvb3QsIGltYWdlKTtcbiAgaWYgKGRlZmluZWQobm9kZSkpIHtcbiAgICAvLyBGb3VuZCBhIG5vZGUgdGhhdCBjYW4gaG9sZCB0aGUgaW1hZ2UuXG4gICAgbm9kZS5pbWFnZUluZGV4ID0gaW5kZXg7XG5cbiAgICAvLyBBZGQgdGV4dHVyZSBjb29yZGluYXRlIGFuZCB3cml0ZSB0byB0ZXh0dXJlXG4gICAgdmFyIGF0bGFzV2lkdGggPSB0ZXh0dXJlQXRsYXMuX3RleHR1cmUud2lkdGg7XG4gICAgdmFyIGF0bGFzSGVpZ2h0ID0gdGV4dHVyZUF0bGFzLl90ZXh0dXJlLmhlaWdodDtcbiAgICB2YXIgbm9kZVdpZHRoID0gbm9kZS50b3BSaWdodC54IC0gbm9kZS5ib3R0b21MZWZ0Lng7XG4gICAgdmFyIG5vZGVIZWlnaHQgPSBub2RlLnRvcFJpZ2h0LnkgLSBub2RlLmJvdHRvbUxlZnQueTtcbiAgICB2YXIgeCA9IG5vZGUuYm90dG9tTGVmdC54IC8gYXRsYXNXaWR0aDtcbiAgICB2YXIgeSA9IG5vZGUuYm90dG9tTGVmdC55IC8gYXRsYXNIZWlnaHQ7XG4gICAgdmFyIHcgPSBub2RlV2lkdGggLyBhdGxhc1dpZHRoO1xuICAgIHZhciBoID0gbm9kZUhlaWdodCAvIGF0bGFzSGVpZ2h0O1xuICAgIHRleHR1cmVBdGxhcy5fdGV4dHVyZUNvb3JkaW5hdGVzW2luZGV4XSA9IG5ldyBCb3VuZGluZ1JlY3RhbmdsZSh4LCB5LCB3LCBoKTtcbiAgICB0ZXh0dXJlQXRsYXMuX3RleHR1cmUuY29weUZyb20oe1xuICAgICAgc291cmNlOiBpbWFnZSxcbiAgICAgIHhPZmZzZXQ6IG5vZGUuYm90dG9tTGVmdC54LFxuICAgICAgeU9mZnNldDogbm9kZS5ib3R0b21MZWZ0LnksXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTm8gbm9kZSBmb3VuZCwgbXVzdCByZXNpemUgdGhlIHRleHR1cmUgYXRsYXMuXG4gICAgcmVzaXplQXRsYXModGV4dHVyZUF0bGFzLCBpbWFnZSk7XG4gICAgYWRkSW1hZ2UodGV4dHVyZUF0bGFzLCBpbWFnZSwgaW5kZXgpO1xuICB9XG5cbiAgdGV4dHVyZUF0bGFzLl9ndWlkID0gY3JlYXRlR3VpZCgpO1xufVxuXG4vKipcbiAqIEFkZHMgYW4gaW1hZ2UgdG8gdGhlIGF0bGFzLiAgSWYgdGhlIGltYWdlIGlzIGFscmVhZHkgaW4gdGhlIGF0bGFzLCB0aGUgYXRsYXMgaXMgdW5jaGFuZ2VkIGFuZFxuICogdGhlIGV4aXN0aW5nIGluZGV4IGlzIHVzZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkIEFuIGlkZW50aWZpZXIgdG8gZGV0ZWN0IHdoZXRoZXIgdGhlIGltYWdlIGFscmVhZHkgZXhpc3RzIGluIHRoZSBhdGxhcy5cbiAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudHxTdHJpbmd8UmVzb3VyY2V8UHJvbWlzZXxUZXh0dXJlQXRsYXMuQ3JlYXRlSW1hZ2VDYWxsYmFja30gaW1hZ2UgQW4gaW1hZ2Ugb3IgY2FudmFzIHRvIGFkZCB0byB0aGUgdGV4dHVyZSBhdGxhcyxcbiAqICAgICAgICBvciBhIFVSTCB0byBhbiBJbWFnZSwgb3IgYSBQcm9taXNlIGZvciBhbiBpbWFnZSwgb3IgYSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYW4gaW1hZ2UuXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TnVtYmVyPn0gQSBQcm9taXNlIGZvciB0aGUgaW1hZ2UgaW5kZXguXG4gKi9cblRleHR1cmVBdGxhcy5wcm90b3R5cGUuYWRkSW1hZ2UgPSBmdW5jdGlvbiAoaWQsIGltYWdlKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChpZCkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJpZCBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKGltYWdlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImltYWdlIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgaW5kZXhQcm9taXNlID0gdGhpcy5faWRIYXNoW2lkXTtcbiAgaWYgKGRlZmluZWQoaW5kZXhQcm9taXNlKSkge1xuICAgIC8vIHdlJ3JlIGFscmVhZHkgYXdhcmUgb2YgdGhpcyBzb3VyY2VcbiAgICByZXR1cm4gaW5kZXhQcm9taXNlO1xuICB9XG5cbiAgLy8gbm90IGluIGF0bGFzLCBjcmVhdGUgdGhlIHByb21pc2UgZm9yIHRoZSBpbmRleFxuXG4gIGlmICh0eXBlb2YgaW1hZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIC8vIGlmIGltYWdlIGlzIGEgZnVuY3Rpb24sIGNhbGwgaXRcbiAgICBpbWFnZSA9IGltYWdlKGlkKTtcbiAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgIGlmICghZGVmaW5lZChpbWFnZSkpIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImltYWdlIGlzIHJlcXVpcmVkLlwiKTtcbiAgICB9XG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGltYWdlID09PSBcInN0cmluZ1wiIHx8IGltYWdlIGluc3RhbmNlb2YgUmVzb3VyY2UpIHtcbiAgICAvLyBHZXQgYSByZXNvdXJjZVxuICAgIHZhciByZXNvdXJjZSA9IFJlc291cmNlLmNyZWF0ZUlmTmVlZGVkKGltYWdlKTtcbiAgICBpbWFnZSA9IHJlc291cmNlLmZldGNoSW1hZ2UoKTtcbiAgfVxuXG4gIHZhciB0aGF0ID0gdGhpcztcblxuICBpbmRleFByb21pc2UgPSB3aGVuKGltYWdlLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICBpZiAodGhhdC5pc0Rlc3Ryb3llZCgpKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0gdGhhdC5udW1iZXJPZkltYWdlcztcblxuICAgIGFkZEltYWdlKHRoYXQsIGltYWdlLCBpbmRleCk7XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH0pO1xuXG4gIC8vIHN0b3JlIHRoZSBwcm9taXNlXG4gIHRoaXMuX2lkSGFzaFtpZF0gPSBpbmRleFByb21pc2U7XG5cbiAgcmV0dXJuIGluZGV4UHJvbWlzZTtcbn07XG5cbi8qKlxuICogQWRkIGEgc3ViLXJlZ2lvbiBvZiBhbiBleGlzdGluZyBhdGxhcyBpbWFnZSBhcyBhZGRpdGlvbmFsIGltYWdlIGluZGljZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBleGlzdGluZyBpbWFnZS5cbiAqIEBwYXJhbSB7Qm91bmRpbmdSZWN0YW5nbGV9IHN1YlJlZ2lvbiBBbiB7QGxpbmsgQm91bmRpbmdSZWN0YW5nbGV9IHN1Yi1yZWdpb24gbWVhc3VyZWQgaW4gcGl4ZWxzIGZyb20gdGhlIGJvdHRvbS1sZWZ0LlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlLjxOdW1iZXI+fSBBIFByb21pc2UgZm9yIHRoZSBpbWFnZSBpbmRleC5cbiAqL1xuVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5hZGRTdWJSZWdpb24gPSBmdW5jdGlvbiAoaWQsIHN1YlJlZ2lvbikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoaWQpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiaWQgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChzdWJSZWdpb24pKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwic3ViUmVnaW9uIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgaW5kZXhQcm9taXNlID0gdGhpcy5faWRIYXNoW2lkXTtcbiAgaWYgKCFkZWZpbmVkKGluZGV4UHJvbWlzZSkpIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFxuICAgICAgJ2ltYWdlIHdpdGggaWQgXCInICsgaWQgKyAnXCIgbm90IGZvdW5kIGluIHRoZSBhdGxhcy4nXG4gICAgKTtcbiAgfVxuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgcmV0dXJuIHdoZW4oaW5kZXhQcm9taXNlLCBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAvLyB0aGUgYXRsYXMgaXMgZGVzdHJveWVkXG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHZhciBhdGxhc1dpZHRoID0gdGhhdC5fdGV4dHVyZS53aWR0aDtcbiAgICB2YXIgYXRsYXNIZWlnaHQgPSB0aGF0Ll90ZXh0dXJlLmhlaWdodDtcbiAgICB2YXIgbnVtSW1hZ2VzID0gdGhhdC5udW1iZXJPZkltYWdlcztcblxuICAgIHZhciBiYXNlUmVnaW9uID0gdGhhdC5fdGV4dHVyZUNvb3JkaW5hdGVzW2luZGV4XTtcbiAgICB2YXIgeCA9IGJhc2VSZWdpb24ueCArIHN1YlJlZ2lvbi54IC8gYXRsYXNXaWR0aDtcbiAgICB2YXIgeSA9IGJhc2VSZWdpb24ueSArIHN1YlJlZ2lvbi55IC8gYXRsYXNIZWlnaHQ7XG4gICAgdmFyIHcgPSBzdWJSZWdpb24ud2lkdGggLyBhdGxhc1dpZHRoO1xuICAgIHZhciBoID0gc3ViUmVnaW9uLmhlaWdodCAvIGF0bGFzSGVpZ2h0O1xuICAgIHRoYXQuX3RleHR1cmVDb29yZGluYXRlcy5wdXNoKG5ldyBCb3VuZGluZ1JlY3RhbmdsZSh4LCB5LCB3LCBoKSk7XG4gICAgdGhhdC5fZ3VpZCA9IGNyZWF0ZUd1aWQoKTtcblxuICAgIHJldHVybiBudW1JbWFnZXM7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICpcbiAqIEBzZWUgVGV4dHVyZUF0bGFzI2Rlc3Ryb3lcbiAqL1xuVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgV2ViR0wgcmVzb3VyY2VzIGhlbGQgYnkgdGhpcyBvYmplY3QuICBEZXN0cm95aW5nIGFuIG9iamVjdCBhbGxvd3MgZm9yIGRldGVybWluaXN0aWNcbiAqIHJlbGVhc2Ugb2YgV2ViR0wgcmVzb3VyY2VzLCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvIGRlc3Ryb3kgdGhpcyBvYmplY3QuXG4gKiA8YnIgLz48YnIgLz5cbiAqIE9uY2UgYW4gb2JqZWN0IGlzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi4gIFRoZXJlZm9yZSxcbiAqIGFzc2lnbiB0aGUgcmV0dXJuIHZhbHVlICg8Y29kZT51bmRlZmluZWQ8L2NvZGU+KSB0byB0aGUgb2JqZWN0IGFzIGRvbmUgaW4gdGhlIGV4YW1wbGUuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogYXRsYXMgPSBhdGxhcyAmJiBhdGxhcy5kZXN0cm95KCk7XG4gKlxuICogQHNlZSBUZXh0dXJlQXRsYXMjaXNEZXN0cm95ZWRcbiAqL1xuVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl90ZXh0dXJlID0gdGhpcy5fdGV4dHVyZSAmJiB0aGlzLl90ZXh0dXJlLmRlc3Ryb3koKTtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGFuIGltYWdlLlxuICogQGNhbGxiYWNrIFRleHR1cmVBdGxhcy5DcmVhdGVJbWFnZUNhbGxiYWNrXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIGltYWdlIHRvIGxvYWQuXG4gKiBAcmV0dXJucyB7SFRNTEltYWdlRWxlbWVudHxQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+fSBUaGUgaW1hZ2UsIG9yIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB0byBhbiBpbWFnZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgVGV4dHVyZUF0bGFzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///54230\n')}}]);