"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[227],{21572:function(e,t,i){var r=i(52200),n={UNSIGNED_BYTE:r.Z.UNSIGNED_BYTE,UNSIGNED_SHORT:r.Z.UNSIGNED_SHORT,UNSIGNED_INT:r.Z.UNSIGNED_INT,FLOAT:r.Z.FLOAT,HALF_FLOAT:r.Z.HALF_FLOAT_OES,UNSIGNED_INT_24_8:r.Z.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:r.Z.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:r.Z.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:r.Z.UNSIGNED_SHORT_5_6_5,toWebGLConstant:function(e,t){switch(e){case n.UNSIGNED_BYTE:return r.Z.UNSIGNED_BYTE;case n.UNSIGNED_SHORT:return r.Z.UNSIGNED_SHORT;case n.UNSIGNED_INT:return r.Z.UNSIGNED_INT;case n.FLOAT:return r.Z.FLOAT;case n.HALF_FLOAT:return t.webgl2?r.Z.HALF_FLOAT:r.Z.HALF_FLOAT_OES;case n.UNSIGNED_INT_24_8:return r.Z.UNSIGNED_INT_24_8;case n.UNSIGNED_SHORT_4_4_4_4:return r.Z.UNSIGNED_SHORT_4_4_4_4;case n.UNSIGNED_SHORT_5_5_5_1:return r.Z.UNSIGNED_SHORT_5_5_5_1;case n.UNSIGNED_SHORT_5_6_5:return n.UNSIGNED_SHORT_5_6_5}},isPacked:function(e){return e===n.UNSIGNED_INT_24_8||e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5},sizeInBytes:function(e){switch(e){case n.UNSIGNED_BYTE:return 1;case n.UNSIGNED_SHORT:case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:case n.HALF_FLOAT:return 2;case n.UNSIGNED_INT:case n.FLOAT:case n.UNSIGNED_INT_24_8:return 4}},validate:function(e){return e===n.UNSIGNED_BYTE||e===n.UNSIGNED_SHORT||e===n.UNSIGNED_INT||e===n.FLOAT||e===n.HALF_FLOAT||e===n.UNSIGNED_INT_24_8||e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5}};t["Z"]=Object.freeze(n)},10667:function(e,t,i){var r=i(88108),n=i(59947),o=i(62200),a=i(82982),s=i(12572),u=i(52200),h=i(32441),l=i(20521),c=i(513);function f(e){return e===u.Z.FUNC_ADD||e===u.Z.FUNC_SUBTRACT||e===u.Z.FUNC_REVERSE_SUBTRACT||e===u.Z.MIN||e===u.Z.MAX}function d(e){return e===u.Z.ZERO||e===u.Z.ONE||e===u.Z.SRC_COLOR||e===u.Z.ONE_MINUS_SRC_COLOR||e===u.Z.DST_COLOR||e===u.Z.ONE_MINUS_DST_COLOR||e===u.Z.SRC_ALPHA||e===u.Z.ONE_MINUS_SRC_ALPHA||e===u.Z.DST_ALPHA||e===u.Z.ONE_MINUS_DST_ALPHA||e===u.Z.CONSTANT_COLOR||e===u.Z.ONE_MINUS_CONSTANT_COLOR||e===u.Z.CONSTANT_ALPHA||e===u.Z.ONE_MINUS_CONSTANT_ALPHA||e===u.Z.SRC_ALPHA_SATURATE}function _(e){return e===u.Z.FRONT||e===u.Z.BACK||e===u.Z.FRONT_AND_BACK}function p(e){return e===u.Z.NEVER||e===u.Z.LESS||e===u.Z.EQUAL||e===u.Z.LEQUAL||e===u.Z.GREATER||e===u.Z.NOTEQUAL||e===u.Z.GEQUAL||e===u.Z.ALWAYS}function m(e){return e===u.Z.NEVER||e===u.Z.LESS||e===u.Z.EQUAL||e===u.Z.LEQUAL||e===u.Z.GREATER||e===u.Z.NOTEQUAL||e===u.Z.GEQUAL||e===u.Z.ALWAYS}function v(e){return e===u.Z.ZERO||e===u.Z.KEEP||e===u.Z.REPLACE||e===u.Z.INCR||e===u.Z.DECR||e===u.Z.INVERT||e===u.Z.INCR_WRAP||e===u.Z.DECR_WRAP}function Z(e){var t=(0,o.Z)(e,o.Z.EMPTY_OBJECT),i=(0,o.Z)(t.cull,o.Z.EMPTY_OBJECT),c=(0,o.Z)(t.polygonOffset,o.Z.EMPTY_OBJECT),Z=(0,o.Z)(t.scissorTest,o.Z.EMPTY_OBJECT),g=(0,o.Z)(Z.rectangle,o.Z.EMPTY_OBJECT),w=(0,o.Z)(t.depthRange,o.Z.EMPTY_OBJECT),y=(0,o.Z)(t.depthTest,o.Z.EMPTY_OBJECT),T=(0,o.Z)(t.colorMask,o.Z.EMPTY_OBJECT),x=(0,o.Z)(t.blending,o.Z.EMPTY_OBJECT),E=(0,o.Z)(x.color,o.Z.EMPTY_OBJECT),b=(0,o.Z)(t.stencilTest,o.Z.EMPTY_OBJECT),D=(0,o.Z)(b.frontOperation,o.Z.EMPTY_OBJECT),S=(0,o.Z)(b.backOperation,o.Z.EMPTY_OBJECT),P=(0,o.Z)(t.sampleCoverage,o.Z.EMPTY_OBJECT),A=t.viewport;if(this.frontFace=(0,o.Z)(t.frontFace,h.Z.COUNTER_CLOCKWISE),this.cull={enabled:(0,o.Z)(i.enabled,!1),face:(0,o.Z)(i.face,u.Z.BACK)},this.lineWidth=(0,o.Z)(t.lineWidth,1),this.polygonOffset={enabled:(0,o.Z)(c.enabled,!1),factor:(0,o.Z)(c.factor,0),units:(0,o.Z)(c.units,0)},this.scissorTest={enabled:(0,o.Z)(Z.enabled,!1),rectangle:r.Z.clone(g)},this.depthRange={near:(0,o.Z)(w.near,0),far:(0,o.Z)(w.far,1)},this.depthTest={enabled:(0,o.Z)(y.enabled,!1),func:(0,o.Z)(y.func,u.Z.LESS)},this.colorMask={red:(0,o.Z)(T.red,!0),green:(0,o.Z)(T.green,!0),blue:(0,o.Z)(T.blue,!0),alpha:(0,o.Z)(T.alpha,!0)},this.depthMask=(0,o.Z)(t.depthMask,!0),this.stencilMask=(0,o.Z)(t.stencilMask,-1),this.blending={enabled:(0,o.Z)(x.enabled,!1),color:new n.Z((0,o.Z)(E.red,0),(0,o.Z)(E.green,0),(0,o.Z)(E.blue,0),(0,o.Z)(E.alpha,0)),equationRgb:(0,o.Z)(x.equationRgb,u.Z.FUNC_ADD),equationAlpha:(0,o.Z)(x.equationAlpha,u.Z.FUNC_ADD),functionSourceRgb:(0,o.Z)(x.functionSourceRgb,u.Z.ONE),functionSourceAlpha:(0,o.Z)(x.functionSourceAlpha,u.Z.ONE),functionDestinationRgb:(0,o.Z)(x.functionDestinationRgb,u.Z.ZERO),functionDestinationAlpha:(0,o.Z)(x.functionDestinationAlpha,u.Z.ZERO)},this.stencilTest={enabled:(0,o.Z)(b.enabled,!1),frontFunction:(0,o.Z)(b.frontFunction,u.Z.ALWAYS),backFunction:(0,o.Z)(b.backFunction,u.Z.ALWAYS),reference:(0,o.Z)(b.reference,0),mask:(0,o.Z)(b.mask,-1),frontOperation:{fail:(0,o.Z)(D.fail,u.Z.KEEP),zFail:(0,o.Z)(D.zFail,u.Z.KEEP),zPass:(0,o.Z)(D.zPass,u.Z.KEEP)},backOperation:{fail:(0,o.Z)(S.fail,u.Z.KEEP),zFail:(0,o.Z)(S.zFail,u.Z.KEEP),zPass:(0,o.Z)(S.zPass,u.Z.KEEP)}},this.sampleCoverage={enabled:(0,o.Z)(P.enabled,!1),value:(0,o.Z)(P.value,1),invert:(0,o.Z)(P.invert,!1)},this.viewport=(0,a.Z)(A)?new r.Z(A.x,A.y,A.width,A.height):void 0,this.lineWidth<l.Z.minimumAliasedLineWidth||this.lineWidth>l.Z.maximumAliasedLineWidth)throw new s.Z("renderState.lineWidth is out of range.  Check minimumAliasedLineWidth and maximumAliasedLineWidth.");if(!h.Z.validate(this.frontFace))throw new s.Z("Invalid renderState.frontFace.");if(!_(this.cull.face))throw new s.Z("Invalid renderState.cull.face.");if(this.scissorTest.rectangle.width<0||this.scissorTest.rectangle.height<0)throw new s.Z("renderState.scissorTest.rectangle.width and renderState.scissorTest.rectangle.height must be greater than or equal to zero.");if(this.depthRange.near>this.depthRange.far)throw new s.Z("renderState.depthRange.near can not be greater than renderState.depthRange.far.");if(this.depthRange.near<0)throw new s.Z("renderState.depthRange.near must be greater than or equal to zero.");if(this.depthRange.far>1)throw new s.Z("renderState.depthRange.far must be less than or equal to one.");if(!p(this.depthTest.func))throw new s.Z("Invalid renderState.depthTest.func.");if(this.blending.color.red<0||this.blending.color.red>1||this.blending.color.green<0||this.blending.color.green>1||this.blending.color.blue<0||this.blending.color.blue>1||this.blending.color.alpha<0||this.blending.color.alpha>1)throw new s.Z("renderState.blending.color components must be greater than or equal to zero and less than or equal to one.");if(!f(this.blending.equationRgb))throw new s.Z("Invalid renderState.blending.equationRgb.");if(!f(this.blending.equationAlpha))throw new s.Z("Invalid renderState.blending.equationAlpha.");if(!d(this.blending.functionSourceRgb))throw new s.Z("Invalid renderState.blending.functionSourceRgb.");if(!d(this.blending.functionSourceAlpha))throw new s.Z("Invalid renderState.blending.functionSourceAlpha.");if(!d(this.blending.functionDestinationRgb))throw new s.Z("Invalid renderState.blending.functionDestinationRgb.");if(!d(this.blending.functionDestinationAlpha))throw new s.Z("Invalid renderState.blending.functionDestinationAlpha.");if(!m(this.stencilTest.frontFunction))throw new s.Z("Invalid renderState.stencilTest.frontFunction.");if(!m(this.stencilTest.backFunction))throw new s.Z("Invalid renderState.stencilTest.backFunction.");if(!v(this.stencilTest.frontOperation.fail))throw new s.Z("Invalid renderState.stencilTest.frontOperation.fail.");if(!v(this.stencilTest.frontOperation.zFail))throw new s.Z("Invalid renderState.stencilTest.frontOperation.zFail.");if(!v(this.stencilTest.frontOperation.zPass))throw new s.Z("Invalid renderState.stencilTest.frontOperation.zPass.");if(!v(this.stencilTest.backOperation.fail))throw new s.Z("Invalid renderState.stencilTest.backOperation.fail.");if(!v(this.stencilTest.backOperation.zFail))throw new s.Z("Invalid renderState.stencilTest.backOperation.zFail.");if(!v(this.stencilTest.backOperation.zPass))throw new s.Z("Invalid renderState.stencilTest.backOperation.zPass.");if((0,a.Z)(this.viewport)){if(this.viewport.width<0)throw new s.Z("renderState.viewport.width must be greater than or equal to zero.");if(this.viewport.height<0)throw new s.Z("renderState.viewport.height must be greater than or equal to zero.");if(this.viewport.width>l.Z.maximumViewportWidth)throw new s.Z("renderState.viewport.width must be less than or equal to the maximum viewport width ("+l.Z.maximumViewportWidth.toString()+").  Check maximumViewportWidth.");if(this.viewport.height>l.Z.maximumViewportHeight)throw new s.Z("renderState.viewport.height must be less than or equal to the maximum viewport height ("+l.Z.maximumViewportHeight.toString()+").  Check maximumViewportHeight.")}this.id=0,this._applyFunctions=[]}var g=0,w={};function y(e,t,i){i?e.enable(t):e.disable(t)}function T(e,t){e.frontFace(t.frontFace)}function x(e,t){var i=t.cull,r=i.enabled;y(e,e.CULL_FACE,r),r&&e.cullFace(i.face)}function E(e,t){e.lineWidth(t.lineWidth)}function b(e,t){var i=t.polygonOffset,r=i.enabled;y(e,e.POLYGON_OFFSET_FILL,r),r&&e.polygonOffset(i.factor,i.units)}function D(e,t,i){var r=t.scissorTest,n=(0,a.Z)(i.scissorTest)?i.scissorTest.enabled:r.enabled;if(y(e,e.SCISSOR_TEST,n),n){var o=(0,a.Z)(i.scissorTest)?i.scissorTest.rectangle:r.rectangle;e.scissor(o.x,o.y,o.width,o.height)}}function S(e,t){var i=t.depthRange;e.depthRange(i.near,i.far)}function P(e,t){var i=t.depthTest,r=i.enabled;y(e,e.DEPTH_TEST,r),r&&e.depthFunc(i.func)}function A(e,t){var i=t.colorMask;e.colorMask(i.red,i.green,i.blue,i.alpha)}function O(e,t){e.depthMask(t.depthMask)}function N(e,t){e.stencilMask(t.stencilMask)}function C(e,t){e.blendColor(t.red,t.green,t.blue,t.alpha)}function I(e,t,i){var r=t.blending,n=(0,a.Z)(i.blendingEnabled)?i.blendingEnabled:r.enabled;y(e,e.BLEND,n),n&&(C(e,r.color),e.blendEquationSeparate(r.equationRgb,r.equationAlpha),e.blendFuncSeparate(r.functionSourceRgb,r.functionDestinationRgb,r.functionSourceAlpha,r.functionDestinationAlpha))}function R(e,t){var i=t.stencilTest,r=i.enabled;if(y(e,e.STENCIL_TEST,r),r){var n=i.frontFunction,o=i.backFunction,a=i.reference,s=i.mask;e.stencilFunc(n,a,s),e.stencilFuncSeparate(e.BACK,o,a,s),e.stencilFuncSeparate(e.FRONT,n,a,s);var u=i.frontOperation,h=u.fail,l=u.zFail,c=u.zPass;e.stencilOpSeparate(e.FRONT,h,l,c);var f=i.backOperation,d=f.fail,_=f.zFail,p=f.zPass;e.stencilOpSeparate(e.BACK,d,_,p)}}function L(e,t){var i=t.sampleCoverage,r=i.enabled;y(e,e.SAMPLE_COVERAGE,r),r&&e.sampleCoverage(i.value,i.invert)}Z.fromCache=function(e){var t=JSON.stringify(e),i=w[t];if((0,a.Z)(i))return++i.referenceCount,i.state;var r=new Z(e),n=JSON.stringify(r);return i=w[n],(0,a.Z)(i)||(r.id=g++,r=(0,c.Z)(r),i={referenceCount:0,state:r},w[n]=i),++i.referenceCount,w[t]={referenceCount:1,state:i.state},i.state},Z.removeFromCache=function(e){var t=new Z(e),i=JSON.stringify(t),r=w[i],n=JSON.stringify(e),o=w[n];(0,a.Z)(o)&&(--o.referenceCount,0===o.referenceCount&&(delete w[n],(0,a.Z)(r)&&--r.referenceCount)),(0,a.Z)(r)&&0===r.referenceCount&&delete w[i]},Z.getCache=function(){return w},Z.clearCache=function(){w={}};var F=new r.Z;function M(e,t,i){var r=(0,o.Z)(t.viewport,i.viewport);(0,a.Z)(r)||(r=F,r.width=i.context.drawingBufferWidth,r.height=i.context.drawingBufferHeight),i.context.uniformState.viewport=r,e.viewport(r.x,r.y,r.width,r.height)}function B(e,t){var i=[];return e.frontFace!==t.frontFace&&i.push(T),e.cull.enabled===t.cull.enabled&&e.cull.face===t.cull.face||i.push(x),e.lineWidth!==t.lineWidth&&i.push(E),e.polygonOffset.enabled===t.polygonOffset.enabled&&e.polygonOffset.factor===t.polygonOffset.factor&&e.polygonOffset.units===t.polygonOffset.units||i.push(b),e.depthRange.near===t.depthRange.near&&e.depthRange.far===t.depthRange.far||i.push(S),e.depthTest.enabled===t.depthTest.enabled&&e.depthTest.func===t.depthTest.func||i.push(P),e.colorMask.red===t.colorMask.red&&e.colorMask.green===t.colorMask.green&&e.colorMask.blue===t.colorMask.blue&&e.colorMask.alpha===t.colorMask.alpha||i.push(A),e.depthMask!==t.depthMask&&i.push(O),e.stencilMask!==t.stencilMask&&i.push(N),e.stencilTest.enabled===t.stencilTest.enabled&&e.stencilTest.frontFunction===t.stencilTest.frontFunction&&e.stencilTest.backFunction===t.stencilTest.backFunction&&e.stencilTest.reference===t.stencilTest.reference&&e.stencilTest.mask===t.stencilTest.mask&&e.stencilTest.frontOperation.fail===t.stencilTest.frontOperation.fail&&e.stencilTest.frontOperation.zFail===t.stencilTest.frontOperation.zFail&&e.stencilTest.backOperation.fail===t.stencilTest.backOperation.fail&&e.stencilTest.backOperation.zFail===t.stencilTest.backOperation.zFail&&e.stencilTest.backOperation.zPass===t.stencilTest.backOperation.zPass||i.push(R),e.sampleCoverage.enabled===t.sampleCoverage.enabled&&e.sampleCoverage.value===t.sampleCoverage.value&&e.sampleCoverage.invert===t.sampleCoverage.invert||i.push(L),i}Z.apply=function(e,t,i){T(e,t),x(e,t),E(e,t),b(e,t),S(e,t),P(e,t),A(e,t),O(e,t),N(e,t),R(e,t),L(e,t),D(e,t,i),I(e,t,i),M(e,t,i)},Z.partialApply=function(e,t,i,r,n,o){if(t!==i){var s=i._applyFunctions[t.id];(0,a.Z)(s)||(s=B(t,i),i._applyFunctions[t.id]=s);for(var u=s.length,h=0;h<u;++h)s[h](e,i)}var l=(0,a.Z)(r.scissorTest)?r.scissorTest:t.scissorTest,c=(0,a.Z)(n.scissorTest)?n.scissorTest:i.scissorTest;(l!==c||o)&&D(e,i,n);var f=(0,a.Z)(r.blendingEnabled)?r.blendingEnabled:t.blending.enabled,d=(0,a.Z)(n.blendingEnabled)?n.blendingEnabled:i.blending.enabled;(f!==d||d&&t.blending!==i.blending)&&I(e,i,n),t===i&&r===n&&r.context===n.context||M(e,i,n)},Z.getState=function(e){if(!(0,a.Z)(e))throw new s.Z("renderState is required.");return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:r.Z.clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:n.Z.clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:(0,a.Z)(e.viewport)?r.Z.clone(e.viewport):void 0}},t["Z"]=Z},17941:function(e,t,i){var r=i(66553),n=i(62200),o=i(82982),a=i(86511),s=i(12572),u=i(20521),h=i(89032);function l(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),r.Z.defined("options.context",e.context);var t=e.context,i=t._gl,a=u.Z.maximumRenderbufferSize,l=(0,n.Z)(e.format,h.Z.RGBA4),c=(0,o.Z)(e.width)?e.width:i.drawingBufferWidth,f=(0,o.Z)(e.height)?e.height:i.drawingBufferHeight;if(!h.Z.validate(l))throw new s.Z("Invalid format.");if(r.Z.typeOf.number.greaterThan("width",c,0),c>a)throw new s.Z("Width must be less than or equal to the maximum renderbuffer size ("+a+").  Check maximumRenderbufferSize.");if(r.Z.typeOf.number.greaterThan("height",f,0),f>a)throw new s.Z("Height must be less than or equal to the maximum renderbuffer size ("+a+").  Check maximumRenderbufferSize.");this._gl=i,this._format=l,this._width=c,this._height=f,this._renderbuffer=this._gl.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this._renderbuffer),i.renderbufferStorage(i.RENDERBUFFER,l,c,f),i.bindRenderbuffer(i.RENDERBUFFER,null)}Object.defineProperties(l.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),l.prototype._getRenderbuffer=function(){return this._renderbuffer},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),(0,a.Z)(this)},t["Z"]=l},89032:function(e,t,i){var r=i(52200),n={RGBA4:r.Z.RGBA4,RGB5_A1:r.Z.RGB5_A1,RGB565:r.Z.RGB565,DEPTH_COMPONENT16:r.Z.DEPTH_COMPONENT16,STENCIL_INDEX8:r.Z.STENCIL_INDEX8,DEPTH_STENCIL:r.Z.DEPTH_STENCIL,validate:function(e){return e===n.RGBA4||e===n.RGB5_A1||e===n.RGB565||e===n.DEPTH_COMPONENT16||e===n.STENCIL_INDEX8||e===n.DEPTH_STENCIL}};t["Z"]=Object.freeze(n)},87721:function(e,t,i){var r=i(66553),n=i(62200),o=i(82982),a=i(12572),s=i(42246),u=i(80188),h=i(88453);function l(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT);var t=(0,n.Z)(e.wrapS,h.Z.CLAMP_TO_EDGE),i=(0,n.Z)(e.wrapT,h.Z.CLAMP_TO_EDGE),l=(0,n.Z)(e.minificationFilter,u.Z.LINEAR),c=(0,n.Z)(e.magnificationFilter,s.Z.LINEAR),f=(0,o.Z)(e.maximumAnisotropy)?e.maximumAnisotropy:1;if(!h.Z.validate(t))throw new a.Z("Invalid sampler.wrapS.");if(!h.Z.validate(i))throw new a.Z("Invalid sampler.wrapT.");if(!u.Z.validate(l))throw new a.Z("Invalid sampler.minificationFilter.");if(!s.Z.validate(c))throw new a.Z("Invalid sampler.magnificationFilter.");r.Z.typeOf.number.greaterThanOrEquals("maximumAnisotropy",f,1),this._wrapS=t,this._wrapT=i,this._minificationFilter=l,this._magnificationFilter=c,this._maximumAnisotropy=f}Object.defineProperties(l.prototype,{wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}}),l.equals=function(e,t){return e===t||(0,o.Z)(e)&&(0,o.Z)(t)&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy},l.NEAREST=Object.freeze(new l({wrapS:h.Z.CLAMP_TO_EDGE,wrapT:h.Z.CLAMP_TO_EDGE,minificationFilter:u.Z.NEAREST,magnificationFilter:s.Z.NEAREST})),t["Z"]=l},62099:function(e,t,i){i.d(t,{Z:function(){return c}});var r=i(66553),n=i(83856),o=i(82982),a=i(62200),s=i(12572),u=i(87826),h=i(46588),l=i(53642);function c(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[]}}Object.defineProperties(c.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}}),c.prototype.addDefine=function(e,t,i){r.Z.typeOf.string("identifier",e),i=(0,a.Z)(i,u.Z.BOTH);var n=e;(0,o.Z)(t)&&(n+=" "+t.toString()),u.Z.includesVertexShader(i)&&this._vertexShaderParts.defineLines.push(n),u.Z.includesFragmentShader(i)&&this._fragmentShaderParts.defineLines.push(n)},c.prototype.addUniform=function(e,t,i){r.Z.typeOf.string("type",e),r.Z.typeOf.string("identifier",t),i=(0,a.Z)(i,u.Z.BOTH);var n="uniform "+e+" "+t+";";u.Z.includesVertexShader(i)&&this._vertexShaderParts.uniformLines.push(n),u.Z.includesFragmentShader(i)&&this._fragmentShaderParts.uniformLines.push(n)},c.prototype.setPositionAttribute=function(e,t){if(r.Z.typeOf.string("type",e),r.Z.typeOf.string("identifier",t),(0,o.Z)(this._positionAttributeLine))throw new s.Z("setPositionAttribute() must be called exactly once for the attribute used for gl_Position. For other attributes, use addAttribute()");return this._positionAttributeLine="attribute "+e+" "+t+";",this._attributeLocations[t]=0,0},c.prototype.addAttribute=function(e,t){r.Z.typeOf.string("type",e),r.Z.typeOf.string("identifier",t);var i="attribute "+e+" "+t+";";this._attributeLines.push(i);var n=this._nextAttributeLocation;return this._attributeLocations[t]=n,this._nextAttributeLocation++,n},c.prototype.addVarying=function(e,t){r.Z.typeOf.string("type",e),r.Z.typeOf.string("identifier",t);var i="varying "+e+" "+t+";";this._vertexShaderParts.varyingLines.push(i),this._fragmentShaderParts.varyingLines.push(i)},c.prototype.addVertexLines=function(e){r.Z.typeOf.object("lines",e),Array.prototype.push.apply(this._vertexShaderParts.shaderLines,e)},c.prototype.addFragmentLines=function(e){r.Z.typeOf.object("lines",e),Array.prototype.push.apply(this._fragmentShaderParts.shaderLines,e)},c.prototype.buildShaderProgram=function(e){r.Z.typeOf.object("context",e);var t=(0,o.Z)(this._positionAttributeLine)?[this._positionAttributeLine]:[],i=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,this._vertexShaderParts.shaderLines).join("\n"),n=new l.Z({defines:this._vertexShaderParts.defineLines,sources:[i]}),a=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,this._fragmentShaderParts.shaderLines).join("\n"),s=new l.Z({defines:this._fragmentShaderParts.defineLines,sources:[a]});return h.Z.fromCache({context:e,vertexShaderSource:n,fragmentShaderSource:s,attributeLocations:this._attributeLocations})},c.prototype.clone=function(){return(0,n.Z)(this,!0)}},5631:function(e,t,i){var r=i(82982),n=i(86511),o=i(46588),a=i(53642);function s(e){this._context=e,this._shaders={},this._numberOfShaders=0,this._shadersToRelease={}}function u(e,t){for(var i=t.derivedKeywords,r=i.length,n=0;n<r;++n){var o=i[n]+t.keyword,a=e._shaders[o];u(e,a)}delete e._shaders[t.keyword],t.shaderProgram.finalDestroy()}Object.defineProperties(s.prototype,{numberOfShaders:{get:function(){return this._numberOfShaders}}}),s.prototype.replaceShaderProgram=function(e){return(0,r.Z)(e.shaderProgram)&&e.shaderProgram.destroy(),this.getShaderProgram(e)},s.prototype.getShaderProgram=function(e){var t=e.vertexShaderSource,i=e.fragmentShaderSource,n=e.attributeLocations;"string"===typeof t&&(t=new a.Z({sources:[t]})),"string"===typeof i&&(i=new a.Z({sources:[i]}));var s,u=t.createCombinedVertexShader(this._context),h=i.createCombinedFragmentShader(this._context),l=u+h+JSON.stringify(n);if((0,r.Z)(this._shaders[l]))s=this._shaders[l],delete this._shadersToRelease[l];else{var c=this._context,f=new o.Z({gl:c._gl,logShaderCompilation:c.logShaderCompilation,debugShaders:c.debugShaders,vertexShaderSource:t,vertexShaderText:u,fragmentShaderSource:i,fragmentShaderText:h,attributeLocations:n});s={cache:this,shaderProgram:f,keyword:l,derivedKeywords:[],count:0},f._cachedShader=s,this._shaders[l]=s,++this._numberOfShaders}return++s.count,s.shaderProgram},s.prototype.replaceDerivedShaderProgram=function(e,t,i){var n=e._cachedShader,o=t+n.keyword,a=this._shaders[o];if((0,r.Z)(a)){u(this,a);var s=n.derivedKeywords.indexOf(t);s>-1&&n.derivedKeywords.splice(s,1)}return this.createDerivedShaderProgram(e,t,i)},s.prototype.getDerivedShaderProgram=function(e,t){var i=e._cachedShader,n=t+i.keyword,o=this._shaders[n];if((0,r.Z)(o))return o.shaderProgram},s.prototype.createDerivedShaderProgram=function(e,t,i){var r=e._cachedShader,n=t+r.keyword,s=i.vertexShaderSource,u=i.fragmentShaderSource,h=i.attributeLocations;"string"===typeof s&&(s=new a.Z({sources:[s]})),"string"===typeof u&&(u=new a.Z({sources:[u]}));var l=this._context,c=s.createCombinedVertexShader(l),f=u.createCombinedFragmentShader(l),d=new o.Z({gl:l._gl,logShaderCompilation:l.logShaderCompilation,debugShaders:l.debugShaders,vertexShaderSource:s,vertexShaderText:c,fragmentShaderSource:u,fragmentShaderText:f,attributeLocations:h}),_={cache:this,shaderProgram:d,keyword:n,derivedKeywords:[],count:0};return r.derivedKeywords.push(t),d._cachedShader=_,this._shaders[n]=_,d},s.prototype.destroyReleasedShaderPrograms=function(){var e=this._shadersToRelease;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];u(this,i),--this._numberOfShaders}this._shadersToRelease={}},s.prototype.releaseShaderProgram=function(e){if((0,r.Z)(e)){var t=e._cachedShader;t&&0===--t.count&&(this._shadersToRelease[t.keyword]=t)}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){var e=this._shaders;for(var t in e)e.hasOwnProperty(t)&&e[t].shaderProgram.finalDestroy();return(0,n.Z)(this)},t["Z"]=s},87826:function(e,t,i){var r=i(66553),n={VERTEX:0,FRAGMENT:1,BOTH:2,includesVertexShader:function(e){return r.Z.typeOf.number("destination",e),e===n.VERTEX||e===n.BOTH},includesFragmentShader:function(e){return r.Z.typeOf.number("destination",e),e===n.FRAGMENT||e===n.BOTH}};t["Z"]=Object.freeze(n)},46588:function(e,t,i){var r=i(66553),n=i(62200),o=i(82982),a=i(86511),s=i(12572),u=i(9407),h=i(92244),l=i(20521),c=i(33676),f=i(15990),d=0;function _(e){var t=e.vertexShaderText,i=e.fragmentShaderText;"undefined"!==typeof spector&&(t=t.replace(/^#line/gm,"//#line"),i=i.replace(/^#line/gm,"//#line"));var r=m(t,i);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=r.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=r.fragmentShaderText,this.id=d++}function p(e){var t=[],i=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if((0,o.Z)(i))for(var r=i.length,n=0;n<r;n++){var a=i[n].trim(),s=a.slice(a.lastIndexOf(" ")+1);t.push(s)}return t}function m(e,t){var i={};if(!l.Z.highpFloatSupported||!l.Z.highpIntSupported){var r,n,o,a,s=p(e),u=p(t),h=s.length,c=u.length;for(r=0;r<h;r++)for(n=0;n<c;n++)if(s[r]===u[n]){o=s[r],a="czm_mediump_"+o;var f=new RegExp(o+"\\b","g");t=t.replace(f,a),i[a]=o}}return{fragmentShaderText:t,duplicateUniformNames:i}}_.fromCache=function(e){return e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),r.Z.defined("options.context",e.context),e.context.shaderCache.getShaderProgram(e)},_.replaceCache=function(e){return e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),r.Z.defined("options.context",e.context),e.context.shaderCache.replaceShaderProgram(e)},Object.defineProperties(_.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return x(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return x(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return x(this),this._uniformsByName}}});var v="[Cesium WebGL] ";function Z(e,t){var i=t._vertexShaderText,r=t._fragmentShaderText,n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,i),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,r),e.compileShader(a);var s=e.createProgram();e.attachShader(s,n),e.attachShader(s,a),e.deleteShader(n),e.deleteShader(a);var h,l=t._attributeLocations;if((0,o.Z)(l))for(var c in l)l.hasOwnProperty(c)&&e.bindAttribLocation(s,l[c],c);if(e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS)){var f=t._debugShaders;if(!e.getShaderParameter(a,e.COMPILE_STATUS)){if(h=e.getShaderInfoLog(a),console.error(v+"Fragment shader compile log: "+h),(0,o.Z)(f)){var d=f.getTranslatedShaderSource(a);""!==d?console.error(v+"Translated fragment shader source:\n"+d):console.error(v+"Fragment shader translation failed.")}throw e.deleteProgram(s),new u.Z("Fragment shader failed to compile.  Compile log: "+h)}if(!e.getShaderParameter(n,e.COMPILE_STATUS)){if(h=e.getShaderInfoLog(n),console.error(v+"Vertex shader compile log: "+h),(0,o.Z)(f)){var _=f.getTranslatedShaderSource(n);""!==_?console.error(v+"Translated vertex shader source:\n"+_):console.error(v+"Vertex shader translation failed.")}throw e.deleteProgram(s),new u.Z("Vertex shader failed to compile.  Compile log: "+h)}throw h=e.getProgramInfoLog(s),console.error(v+"Shader program link log: "+h),(0,o.Z)(f)&&(console.error(v+"Translated vertex shader source:\n"+f.getTranslatedShaderSource(n)),console.error(v+"Translated fragment shader source:\n"+f.getTranslatedShaderSource(a))),e.deleteProgram(s),new u.Z("Program failed to link.  Link log: "+h)}var p=t._logShaderCompilation;return p&&(h=e.getShaderInfoLog(n),(0,o.Z)(h)&&h.length>0&&console.log(v+"Vertex shader compile log: "+h)),p&&(h=e.getShaderInfoLog(a),(0,o.Z)(h)&&h.length>0&&console.log(v+"Fragment shader compile log: "+h)),p&&(h=e.getProgramInfoLog(s),(0,o.Z)(h)&&h.length>0&&console.log(v+"Shader program link log: "+h)),s}function g(e,t,i){for(var r={},n=0;n<i;++n){var o=e.getActiveAttrib(t,n),a=e.getAttribLocation(t,o.name);r[o.name]={name:o.name,type:o.type,index:a}}return r}function w(e,t){for(var i={},r=[],n=[],a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<a;++s){var u=e.getActiveUniform(t,s),h="[0]",l=-1!==u.name.indexOf(h,u.name.length-h.length)?u.name.slice(0,u.name.length-3):u.name;if(0!==l.indexOf("gl_"))if(u.name.indexOf("[")<0){var d=e.getUniformLocation(t,l);if(null!==d){var _=(0,c.Z)(e,u,l,d);i[l]=_,r.push(_),_._setSampler&&n.push(_)}}else{var p,m,v,Z,g=l.indexOf("[");if(g>=0){if(p=i[l.slice(0,g)],!(0,o.Z)(p))continue;m=p._locations,m.length<=1&&(v=p.value,Z=e.getUniformLocation(t,l),null!==Z&&(m.push(Z),v.push(e.getUniform(t,Z))))}else{m=[];for(var w=0;w<u.size;++w)Z=e.getUniformLocation(t,l+"["+w+"]"),null!==Z&&m.push(Z);p=(0,f.Z)(e,u,l,m),i[l]=p,r.push(p),p._setSampler&&n.push(p)}}}return{uniformsByName:i,uniforms:r,samplerUniforms:n}}function y(e,t){var i=[],r=[];for(var n in t)if(t.hasOwnProperty(n)){var a=t[n],s=n,u=e._duplicateUniformNames[s];(0,o.Z)(u)&&(a.name=u,s=u);var l=h.Z[s];(0,o.Z)(l)?i.push({uniform:a,automaticUniform:l}):r.push(a)}return{automaticUniforms:i,manualUniforms:r}}function T(e,t,i){e.useProgram(t);for(var r=0,n=i.length,o=0;o<n;++o)r=i[o]._setSampler(r);return e.useProgram(null),r}function x(e){(0,o.Z)(e._program)||E(e)}function E(e){var t=e._program,i=e._gl,r=Z(i,e,e._debugShaders),n=i.getProgramParameter(r,i.ACTIVE_ATTRIBUTES),o=w(i,r),a=y(e,o.uniformsByName);e._program=r,e._numberOfVertexAttributes=n,e._vertexAttributes=g(i,r,n),e._uniformsByName=o.uniformsByName,e._uniforms=o.uniforms,e._automaticUniforms=a.automaticUniforms,e._manualUniforms=a.manualUniforms,e.maximumTextureUnitIndex=T(i,r,o.samplerUniforms),t&&e._gl.deleteProgram(t),"undefined"!==typeof spector&&(e._program.__SPECTOR_rebuildProgram=function(t,i,r,n){var o=e._vertexShaderText,a=e._fragmentShaderText,s=/ ! = /g;e._vertexShaderText=t.replace(s," != "),e._fragmentShaderText=i.replace(s," != ");try{E(e),r(e._program)}catch(l){e._vertexShaderText=o,e._fragmentShaderText=a;var u=/(?:Compile|Link) error: ([^]*)/,h=u.exec(l.message);n(h?h[1]:l.message)}})}_.prototype._bind=function(){x(this),this._gl.useProgram(this._program)},_.prototype._setUniforms=function(e,t,i){var r,n;if((0,o.Z)(e)){var a=this._manualUniforms;for(r=a.length,n=0;n<r;++n){var u=a[n];u.value=e[u.name]()}}var h=this._automaticUniforms;for(r=h.length,n=0;n<r;++n){var l=h[n];l.uniform.value=l.automaticUniform.getValue(t)}var c=this._uniforms;for(r=c.length,n=0;n<r;++n)c[n].set();if(i){var f=this._gl,d=this._program;if(f.validateProgram(d),!f.getProgramParameter(d,f.VALIDATE_STATUS))throw new s.Z("Program validation failed.  Program info log: "+f.getProgramInfoLog(d))}},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)},_.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),(0,a.Z)(this)},t["Z"]=_},53642:function(e,t,i){var r=i(62200),n=i(82982),o=i(12572),a=i(33445),s=i(2303),u=i(92244);function h(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,(function(e){for(var t=e.match(/\n/gm).length,i="",r=0;r<t;++r)i+="\n";return i}))}function l(e,t,i){for(var r,o=0;o<i.length;++o)i[o].name===e&&(r=i[o]);return(0,n.Z)(r)||(t=h(t),r={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},i.push(r)),r}function c(e,t){if(!e.evaluated){e.evaluated=!0;var i=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);(0,n.Z)(i)&&null!==i&&(i=i.filter((function(e,t){return i.indexOf(e)===t})),i.forEach((function(i){if(i!==e.name&&p._czmBuiltinsAndUniforms.hasOwnProperty(i)){var r=l(i,p._czmBuiltinsAndUniforms[i],t);e.dependsOn.push(r),r.requiredBy.push(e),c(r,t)}})))}}function f(e){var t=[],i=[];while(e.length>0){var r=e.pop();i.push(r),0===r.requiredBy.length&&t.push(r)}while(t.length>0){var n=t.shift();e.push(n);for(var a=0;a<n.dependsOn.length;++a){var s=n.dependsOn[a],u=s.requiredBy.indexOf(n);s.requiredBy.splice(u,1),0===s.requiredBy.length&&t.push(s)}}for(var h=[],l=0;l<i.length;++l)0!==i[l].requiredBy.length&&h.push(i[l]);if(0!==h.length){for(var c="A circular dependency was found in the following built-in functions/structs/constants: \n",f=0;f<h.length;++f)c=c+h[f].name+"\n";throw new o.Z(c)}}function d(e){var t=[],i=l("main",e,t);c(i,t),f(t);for(var r="",n=t.length-1;n>=0;--n)r=r+t[n].glslSource+"\n";return r.replace(i.glslSource,"")}function _(e,t,i){var r,s,u,l="",c=e.sources;if((0,n.Z)(c))for(r=0,s=c.length;r<s;++r)l+="\n#line 0\n"+c[r];l=h(l),l=l.replace(/#version\s+(.*?)\n/gm,(function(e,t){if((0,n.Z)(u)&&u!==t)throw new o.Z("inconsistent versions found: "+u+" and "+t);return u=t,"\n"}));var f=[];l=l.replace(/#extension.*\n/gm,(function(e){return f.push(e),"\n"})),l=l.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");var _=e.pickColorQualifier;(0,n.Z)(_)&&(l=p.createPickFragmentShaderSource(l,_));var m="";(0,n.Z)(u)&&(m="#version "+u+"\n");var v=f.length;for(r=0;r<v;r++)m+=f[r];t&&(m+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n#else\n    precision mediump float;\n    #define highp mediump\n#endif\n\n");var Z=e.defines;if((0,n.Z)(Z))for(r=0,s=Z.length;r<s;++r){var g=Z[r];0!==g.length&&(m+="#define "+g+"\n")}return i.webgl2&&(m+="#define OUTPUT_DECLARATION\n\n"),i.textureFloatLinear&&(m+="#define OES_texture_float_linear\n\n"),i.floatingPointTexture&&(m+="#define OES_texture_float\n\n"),e.includeBuiltIns&&(m+=d(l)),m+="\n#line 0\n",m+=l,i.webgl2&&(m=(0,a.Z)(m,t,!0)),m}function p(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT);var t=e.pickColorQualifier;if((0,n.Z)(t)&&"uniform"!==t&&"varying"!==t)throw new o.Z("options.pickColorQualifier must be 'uniform' or 'varying'.");this.defines=(0,n.Z)(e.defines)?e.defines.slice(0):[],this.sources=(0,n.Z)(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=(0,r.Z)(e.includeBuiltIns,!0)}for(var m in p.prototype.clone=function(){return new p({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})},p.replaceMain=function(e,t){return t="void "+t+"()",e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)},p.prototype.createCombinedVertexShader=function(e){return _(this,!1,e)},p.prototype.createCombinedFragmentShader=function(e){return _(this,!0,e)},p._czmBuiltinsAndUniforms={},s.Z)s.Z.hasOwnProperty(m)&&(p._czmBuiltinsAndUniforms[m]=s.Z[m]);for(var v in u.Z)if(u.Z.hasOwnProperty(v)){var Z=u.Z[v];"function"===typeof Z.getDeclaration&&(p._czmBuiltinsAndUniforms[v]=Z.getDeclaration(v))}p.createPickVertexShaderSource=function(e){var t=p.replaceMain(e,"czm_old_main"),i="attribute vec4 pickColor; \nvarying vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    czm_pickColor = pickColor; \n}";return t+"\n"+i},p.createPickFragmentShaderSource=function(e,t){var i=p.replaceMain(e,"czm_old_main"),r=t+" vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    if (gl_FragColor.a == 0.0) { \n       discard; \n    } \n    gl_FragColor = czm_pickColor; \n}";return i+"\n"+r},p.findVarying=function(e,t){for(var i=e.sources,r=t.length,n=0;n<r;++n)for(var o=t[n],a=i.length,s=0;s<a;++s)if(-1!==i[s].indexOf(o))return o};var g=["v_normalEC","v_normal"];p.findNormalVarying=function(e){return p.findVarying(e,g)};var w=["v_positionEC"];p.findPositionVarying=function(e){return p.findVarying(e,w)},t["Z"]=p},8743:function(e,t,i){var r=i(60838),n=i(66553),o=i(39960),a=i(62200),s=i(82982),u=i(86511),h=i(12572),l=i(99417),c=i(38443),f=i(20521),d=i(45368),_=i(21572),p=i(87721),m=i(42246),v=i(80188);function Z(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),n.Z.defined("options.context",e.context);var t=e.context,i=e.width,u=e.height,l=e.source;(0,s.Z)(l)&&((0,s.Z)(i)||(i=(0,a.Z)(l.videoWidth,l.width)),(0,s.Z)(u)||(u=(0,a.Z)(l.videoHeight,l.height)));var d=(0,a.Z)(e.pixelFormat,c.Z.RGBA),m=(0,a.Z)(e.pixelDatatype,_.Z.UNSIGNED_BYTE),v=c.Z.toInternalFormat(d,m,t),Z=c.Z.isCompressedFormat(v);if(!(0,s.Z)(i)||!(0,s.Z)(u))throw new h.Z("options requires a source field to create an initialized texture or width and height fields to create a blank texture.");if(n.Z.typeOf.number.greaterThan("width",i,0),i>f.Z.maximumTextureSize)throw new h.Z("Width must be less than or equal to the maximum texture size ("+f.Z.maximumTextureSize+").  Check maximumTextureSize.");if(n.Z.typeOf.number.greaterThan("height",u,0),u>f.Z.maximumTextureSize)throw new h.Z("Height must be less than or equal to the maximum texture size ("+f.Z.maximumTextureSize+").  Check maximumTextureSize.");if(!c.Z.validate(d))throw new h.Z("Invalid options.pixelFormat.");if(!Z&&!_.Z.validate(m))throw new h.Z("Invalid options.pixelDatatype.");if(d===c.Z.DEPTH_COMPONENT&&m!==_.Z.UNSIGNED_SHORT&&m!==_.Z.UNSIGNED_INT)throw new h.Z("When options.pixelFormat is DEPTH_COMPONENT, options.pixelDatatype must be UNSIGNED_SHORT or UNSIGNED_INT.");if(d===c.Z.DEPTH_STENCIL&&m!==_.Z.UNSIGNED_INT_24_8)throw new h.Z("When options.pixelFormat is DEPTH_STENCIL, options.pixelDatatype must be UNSIGNED_INT_24_8.");if(m===_.Z.FLOAT&&!t.floatingPointTexture)throw new h.Z("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.  Check context.floatingPointTexture.");if(m===_.Z.HALF_FLOAT&&!t.halfFloatingPointTexture)throw new h.Z("When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension. Check context.halfFloatingPointTexture.");if(c.Z.isDepthFormat(d)){if((0,s.Z)(l))throw new h.Z("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, source cannot be provided.");if(!t.depthTexture)throw new h.Z("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, this WebGL implementation must support WEBGL_depth_texture.  Check context.depthTexture.")}if(Z){if(!(0,s.Z)(l)||!(0,s.Z)(l.arrayBufferView))throw new h.Z("When options.pixelFormat is compressed, options.source.arrayBufferView must be defined.");if(c.Z.isDXTFormat(v)&&!t.s3tc)throw new h.Z("When options.pixelFormat is S3TC compressed, this WebGL implementation must support the WEBGL_compressed_texture_s3tc extension. Check context.s3tc.");if(c.Z.isPVRTCFormat(v)&&!t.pvrtc)throw new h.Z("When options.pixelFormat is PVRTC compressed, this WebGL implementation must support the WEBGL_compressed_texture_pvrtc extension. Check context.pvrtc.");if(c.Z.isASTCFormat(v)&&!t.astc)throw new h.Z("When options.pixelFormat is ASTC compressed, this WebGL implementation must support the WEBGL_compressed_texture_astc extension. Check context.astc.");if(c.Z.isETC2Format(v)&&!t.etc)throw new h.Z("When options.pixelFormat is ETC2 compressed, this WebGL implementation must support the WEBGL_compressed_texture_etc extension. Check context.etc.");if(c.Z.isETC1Format(v)&&!t.etc1)throw new h.Z("When options.pixelFormat is ETC1 compressed, this WebGL implementation must support the WEBGL_compressed_texture_etc1 extension. Check context.etc1.");if(c.Z.isBC7Format(v)&&!t.bc7)throw new h.Z("When options.pixelFormat is BC7 compressed, this WebGL implementation must support the EXT_texture_compression_bptc extension. Check context.bc7.");if(c.Z.compressedTextureSizeInBytes(v,i,u)!==l.arrayBufferView.byteLength)throw new h.Z("The byte length of the array buffer is invalid for the compressed texture with the given width and height.")}var g=e.preMultiplyAlpha||d===c.Z.RGB||d===c.Z.LUMINANCE,w=(0,a.Z)(e.flipY,!0),y=(0,a.Z)(e.skipColorSpaceConversion,!1),T=!0,x=t._gl,E=x.TEXTURE_2D,b=x.createTexture();x.activeTexture(x.TEXTURE0),x.bindTexture(E,b);var D,S=4;if((0,s.Z)(l)&&(0,s.Z)(l.arrayBufferView)&&!Z&&(S=c.Z.alignmentInBytes(d,m,i)),x.pixelStorei(x.UNPACK_ALIGNMENT,S),y?x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,x.NONE):x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,x.BROWSER_DEFAULT_WEBGL),(0,s.Z)(l))if((0,s.Z)(l.arrayBufferView)){x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1);var P,A,O,N=l.arrayBufferView;if(Z){if(x.compressedTexImage2D(E,0,v,i,u,0,N),(0,s.Z)(l.mipLevels))for(A=i,O=u,P=0;P<l.mipLevels.length;++P)A=0|Math.floor(A/2),A<1&&(A=1),O=0|Math.floor(O/2),O<1&&(O=1),x.compressedTexImage2D(E,P+1,v,A,O,0,l.mipLevels[P])}else if(w&&(N=c.Z.flipY(N,d,m,i,u)),x.texImage2D(E,0,v,i,u,0,d,_.Z.toWebGLConstant(m,t),N),(0,s.Z)(l.mipLevels))for(A=i,O=u,P=0;P<l.mipLevels.length;++P)A=0|Math.floor(A/2),A<1&&(A=1),O=0|Math.floor(O/2),O<1&&(O=1),x.texImage2D(E,P+1,v,A,O,0,d,_.Z.toWebGLConstant(m,t),l.mipLevels[P])}else(0,s.Z)(l.framebuffer)?(x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,!1),l.framebuffer!==t.defaultFramebuffer&&l.framebuffer._bind(),x.copyTexImage2D(E,0,v,l.xOffset,l.yOffset,i,u,0),l.framebuffer!==t.defaultFramebuffer&&l.framebuffer._unBind()):(x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,w),x.texImage2D(E,0,v,d,_.Z.toWebGLConstant(m,t),l));else x.texImage2D(E,0,v,i,u,0,d,_.Z.toWebGLConstant(m,t),null),T=!1;x.bindTexture(E,null),D=Z?c.Z.compressedTextureSizeInBytes(d,i,u):c.Z.textureSizeInBytes(d,m,i,u),this._id=(0,o.Z)(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=E,this._texture=b,this._internalFormat=v,this._pixelFormat=d,this._pixelDatatype=m,this._width=i,this._height=u,this._dimensions=new r.Z(i,u),this._hasMipmap=!1,this._sizeInBytes=D,this._preMultiplyAlpha=g,this._flipY=w,this._initialized=T,this._sampler=void 0,this.sampler=(0,s.Z)(e.sampler)?e.sampler:new p.Z}Z.create=function(e){return new Z(e)},Z.fromFramebuffer=function(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),n.Z.defined("options.context",e.context);var t=e.context,i=t._gl,r=(0,a.Z)(e.pixelFormat,c.Z.RGB),o=(0,a.Z)(e.framebufferXOffset,0),u=(0,a.Z)(e.framebufferYOffset,0),l=(0,a.Z)(e.width,i.drawingBufferWidth),f=(0,a.Z)(e.height,i.drawingBufferHeight),d=e.framebuffer;if(!c.Z.validate(r))throw new h.Z("Invalid pixelFormat.");if(c.Z.isDepthFormat(r)||c.Z.isCompressedFormat(r))throw new h.Z("pixelFormat cannot be DEPTH_COMPONENT, DEPTH_STENCIL or a compressed format.");if(n.Z.defined("options.context",e.context),n.Z.typeOf.number.greaterThanOrEquals("framebufferXOffset",o,0),n.Z.typeOf.number.greaterThanOrEquals("framebufferYOffset",u,0),o+l>i.drawingBufferWidth)throw new h.Z("framebufferXOffset + width must be less than or equal to drawingBufferWidth");if(u+f>i.drawingBufferHeight)throw new h.Z("framebufferYOffset + height must be less than or equal to drawingBufferHeight.");var _=new Z({context:t,width:l,height:f,pixelFormat:r,source:{framebuffer:(0,s.Z)(d)?d:t.defaultFramebuffer,xOffset:o,yOffset:u,width:l,height:f}});return _},Object.defineProperties(Z.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){var t=e.minificationFilter,i=e.magnificationFilter,r=this._context,n=this._pixelFormat,o=this._pixelDatatype,a=t===v.Z.NEAREST_MIPMAP_NEAREST||t===v.Z.NEAREST_MIPMAP_LINEAR||t===v.Z.LINEAR_MIPMAP_NEAREST||t===v.Z.LINEAR_MIPMAP_LINEAR;(o===_.Z.FLOAT&&!r.textureFloatLinear||o===_.Z.HALF_FLOAT&&!r.textureHalfFloatLinear)&&(t=a?v.Z.NEAREST_MIPMAP_NEAREST:v.Z.NEAREST,i=m.Z.NEAREST),r.webgl2&&c.Z.isDepthFormat(n)&&(t=v.Z.NEAREST,i=m.Z.NEAREST);var u=r._gl,h=this._textureTarget;u.activeTexture(u.TEXTURE0),u.bindTexture(h,this._texture),u.texParameteri(h,u.TEXTURE_MIN_FILTER,t),u.texParameteri(h,u.TEXTURE_MAG_FILTER,i),u.texParameteri(h,u.TEXTURE_WRAP_S,e.wrapS),u.texParameteri(h,u.TEXTURE_WRAP_T,e.wrapT),(0,s.Z)(this._textureFilterAnisotropic)&&u.texParameteri(h,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),u.bindTexture(h,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}}),Z.prototype.copyFrom=function(e){n.Z.defined("options",e);var t=(0,a.Z)(e.xOffset,0),i=(0,a.Z)(e.yOffset,0);if(n.Z.defined("options.source",e.source),c.Z.isDepthFormat(this._pixelFormat))throw new h.Z("Cannot call copyFrom when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(c.Z.isCompressedFormat(this._pixelFormat))throw new h.Z("Cannot call copyFrom with a compressed texture pixel format.");n.Z.typeOf.number.greaterThanOrEquals("xOffset",t,0),n.Z.typeOf.number.greaterThanOrEquals("yOffset",i,0),n.Z.typeOf.number.lessThanOrEquals("xOffset + options.source.width",t+e.source.width,this._width),n.Z.typeOf.number.lessThanOrEquals("yOffset + options.source.height",i+e.source.height,this._height);var r=e.source,o=this._context,u=o._gl,l=this._textureTarget;u.activeTexture(u.TEXTURE0),u.bindTexture(l,this._texture);var f=r.width,d=r.height,p=r.arrayBufferView,m=this._width,v=this._height,Z=this._internalFormat,g=this._pixelFormat,w=this._pixelDatatype,y=this._preMultiplyAlpha,T=this._flipY,x=(0,a.Z)(e.skipColorSpaceConversion,!1),E=4;(0,s.Z)(p)&&(E=c.Z.alignmentInBytes(g,w,f)),u.pixelStorei(u.UNPACK_ALIGNMENT,E),x?u.pixelStorei(u.UNPACK_COLORSPACE_CONVERSION_WEBGL,u.NONE):u.pixelStorei(u.UNPACK_COLORSPACE_CONVERSION_WEBGL,u.BROWSER_DEFAULT_WEBGL);var b=!1;if(!this._initialized){if(0===t&&0===i&&f===m&&d===v)(0,s.Z)(p)?(u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,!1),T&&(p=c.Z.flipY(p,g,w,m,v)),u.texImage2D(l,0,Z,m,v,0,g,_.Z.toWebGLConstant(w,o),p)):(u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,T),u.texImage2D(l,0,Z,g,_.Z.toWebGLConstant(w,o),r)),b=!0;else{u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,!1);var D=c.Z.createTypedArray(g,w,m,v);u.texImage2D(l,0,Z,m,v,0,g,_.Z.toWebGLConstant(w,o),D)}this._initialized=!0}b||((0,s.Z)(p)?(u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,!1),T&&(p=c.Z.flipY(p,g,w,f,d)),u.texSubImage2D(l,0,t,i,f,d,g,_.Z.toWebGLConstant(w,o),p)):(u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,T),u.texSubImage2D(l,0,t,i,g,_.Z.toWebGLConstant(w,o),r))),u.bindTexture(l,null)},Z.prototype.copyFromFramebuffer=function(e,t,i,r,o,s){if(e=(0,a.Z)(e,0),t=(0,a.Z)(t,0),i=(0,a.Z)(i,0),r=(0,a.Z)(r,0),o=(0,a.Z)(o,this._width),s=(0,a.Z)(s,this._height),c.Z.isDepthFormat(this._pixelFormat))throw new h.Z("Cannot call copyFromFramebuffer when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(this._pixelDatatype===_.Z.FLOAT)throw new h.Z("Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.");if(this._pixelDatatype===_.Z.HALF_FLOAT)throw new h.Z("Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.");if(c.Z.isCompressedFormat(this._pixelFormat))throw new h.Z("Cannot call copyFrom with a compressed texture pixel format.");n.Z.typeOf.number.greaterThanOrEquals("xOffset",e,0),n.Z.typeOf.number.greaterThanOrEquals("yOffset",t,0),n.Z.typeOf.number.greaterThanOrEquals("framebufferXOffset",i,0),n.Z.typeOf.number.greaterThanOrEquals("framebufferYOffset",r,0),n.Z.typeOf.number.lessThanOrEquals("xOffset + width",e+o,this._width),n.Z.typeOf.number.lessThanOrEquals("yOffset + height",t+s,this._height);var u=this._context._gl,l=this._textureTarget;u.activeTexture(u.TEXTURE0),u.bindTexture(l,this._texture),u.copyTexSubImage2D(l,0,e,t,i,r,o,s),u.bindTexture(l,null),this._initialized=!0},Z.prototype.generateMipmap=function(e){if(e=(0,a.Z)(e,d.Z.DONT_CARE),c.Z.isDepthFormat(this._pixelFormat))throw new h.Z("Cannot call generateMipmap when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(c.Z.isCompressedFormat(this._pixelFormat))throw new h.Z("Cannot call generateMipmap with a compressed pixel format.");if(this._width>1&&!l.Z.isPowerOfTwo(this._width))throw new h.Z("width must be a power of two to call generateMipmap().");if(this._height>1&&!l.Z.isPowerOfTwo(this._height))throw new h.Z("height must be a power of two to call generateMipmap().");if(!d.Z.validate(e))throw new h.Z("hint is invalid.");this._hasMipmap=!0;var t=this._context._gl,i=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(i,this._texture),t.generateMipmap(i),t.bindTexture(i,null)},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),(0,u.Z)(this)},t["Z"]=Z},32158:function(e,t,i){var r=i(82982),n=i(86511);function o(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object.defineProperties(o.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),o.prototype.getTexture=function(e){var t=this._textures[e];if((0,r.Z)(t))return delete this._texturesToRelease[e],++t.count,t.texture},o.prototype.addTexture=function(e,t){var i={texture:t,count:1};t.finalDestroy=t.destroy;var r=this;t.destroy=function(){0===--i.count&&(r._texturesToRelease[e]=i)},this._textures[e]=i,++this._numberOfTextures},o.prototype.destroyReleasedTextures=function(){var e=this._texturesToRelease;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];delete this._textures[t],i.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){var e=this._textures;for(var t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return(0,n.Z)(this)},t["Z"]=o},42246:function(e,t,i){var r=i(52200),n={NEAREST:r.Z.NEAREST,LINEAR:r.Z.LINEAR,validate:function(e){return e===n.NEAREST||e===n.LINEAR}};t["Z"]=Object.freeze(n)},80188:function(e,t,i){var r=i(52200),n={NEAREST:r.Z.NEAREST,LINEAR:r.Z.LINEAR,NEAREST_MIPMAP_NEAREST:r.Z.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:r.Z.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:r.Z.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:r.Z.LINEAR_MIPMAP_LINEAR,validate:function(e){return e===n.NEAREST||e===n.LINEAR||e===n.NEAREST_MIPMAP_NEAREST||e===n.LINEAR_MIPMAP_NEAREST||e===n.NEAREST_MIPMAP_LINEAR||e===n.LINEAR_MIPMAP_LINEAR}};t["Z"]=Object.freeze(n)},88453:function(e,t,i){var r=i(52200),n={CLAMP_TO_EDGE:r.Z.CLAMP_TO_EDGE,REPEAT:r.Z.REPEAT,MIRRORED_REPEAT:r.Z.MIRRORED_REPEAT,validate:function(e){return e===n.CLAMP_TO_EDGE||e===n.REPEAT||e===n.MIRRORED_REPEAT}};t["Z"]=Object.freeze(n)},79140:function(e,t,i){var r=i(88108),n=i(60838),o=i(60216),a=i(63367),s=i(51688),u=i(59947),h=i(62200),l=i(82982),c=i(50491),f=i(74938),d=i(99417),_=i(68201),p=i(72248),m=i(91473),v=i(83156),Z=i(95555),g=i(89917),w=i(44747);function y(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new r.Z,this._viewportCartesian4=new a.Z,this._viewportDirty=!1,this._viewportOrthographicMatrix=p.Z.clone(p.Z.IDENTITY),this._viewportTransformation=p.Z.clone(p.Z.IDENTITY),this._model=p.Z.clone(p.Z.IDENTITY),this._view=p.Z.clone(p.Z.IDENTITY),this._inverseView=p.Z.clone(p.Z.IDENTITY),this._projection=p.Z.clone(p.Z.IDENTITY),this._infiniteProjection=p.Z.clone(p.Z.IDENTITY),this._entireFrustum=new n.Z,this._currentFrustum=new n.Z,this._frustumPlanes=new a.Z,this._farDepthFromNearPlusOne=void 0,this._log2FarDepthFromNearPlusOne=void 0,this._oneOverLog2FarDepthFromNearPlusOne=void 0,this._frameState=void 0,this._temeToPseudoFixed=_.Z.clone(p.Z.IDENTITY),this._view3DDirty=!0,this._view3D=new p.Z,this._inverseView3DDirty=!0,this._inverseView3D=new p.Z,this._inverseModelDirty=!0,this._inverseModel=new p.Z,this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new _.Z,this._viewRotation=new _.Z,this._inverseViewRotation=new _.Z,this._viewRotation3D=new _.Z,this._inverseViewRotation3D=new _.Z,this._inverseProjectionDirty=!0,this._inverseProjection=new p.Z,this._modelViewDirty=!0,this._modelView=new p.Z,this._modelView3DDirty=!0,this._modelView3D=new p.Z,this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new p.Z,this._inverseModelViewDirty=!0,this._inverseModelView=new p.Z,this._inverseModelView3DDirty=!0,this._inverseModelView3D=new p.Z,this._viewProjectionDirty=!0,this._viewProjection=new p.Z,this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new p.Z,this._modelViewProjectionDirty=!0,this._modelViewProjection=new p.Z,this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new p.Z,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new p.Z,this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new p.Z,this._normalDirty=!0,this._normal=new _.Z,this._normal3DDirty=!0,this._normal3D=new _.Z,this._inverseNormalDirty=!0,this._inverseNormal=new _.Z,this._inverseNormal3DDirty=!0,this._inverseNormal3D=new _.Z,this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new f.Z,this._cameraPosition=new o.Z,this._sunPositionWC=new o.Z,this._sunPositionColumbusView=new o.Z,this._sunDirectionWC=new o.Z,this._sunDirectionEC=new o.Z,this._moonDirectionEC=new o.Z,this._lightDirectionWC=new o.Z,this._lightDirectionEC=new o.Z,this._lightColor=new o.Z,this._lightColorHdr=new o.Z,this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._ellipsoid=void 0,this._cameraDirection=new o.Z,this._cameraRight=new o.Z,this._cameraUp=new o.Z,this._frustum2DWidth=0,this._eyeHeight=0,this._eyeHeight2D=new n.Z,this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new u.Z,this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsDimensions=new n.Z,this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._invertClassificationColor=void 0,this._imagerySplitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}function T(e,t){p.Z.clone(t,e._view),p.Z.getMatrix3(t,e._viewRotation),e._view3DDirty=!0,e._inverseView3DDirty=!0,e._modelViewDirty=!0,e._modelView3DDirty=!0,e._modelViewRelativeToEyeDirty=!0,e._inverseModelViewDirty=!0,e._inverseModelView3DDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0,e._modelViewInfiniteProjectionDirty=!0,e._normalDirty=!0,e._inverseNormalDirty=!0,e._normal3DDirty=!0,e._inverseNormal3DDirty=!0}function x(e,t){p.Z.clone(t,e._inverseView),p.Z.getMatrix3(t,e._inverseViewRotation)}function E(e,t){p.Z.clone(t,e._projection),e._inverseProjectionDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0}function b(e,t){p.Z.clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}function D(e,t){o.Z.clone(t.positionWC,e._cameraPosition),o.Z.clone(t.directionWC,e._cameraDirection),o.Z.clone(t.rightWC,e._cameraRight),o.Z.clone(t.upWC,e._cameraUp);var i=t.positionCartographic;(0,l.Z)(i)?e._eyeHeight=i.height:e._eyeHeight=-e._ellipsoid.maximumRadius,e._encodedCameraPositionMCDirty=!0}Object.defineProperties(y.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!r.Z.equals(e,this._viewport)){r.Z.clone(e,this._viewport);var t=this._viewport,i=this._viewportCartesian4;i.x=t.x,i.y=t.y,i.z=t.width,i.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return C(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return C(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){p.Z.clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,p.Z.inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){var e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,p.Z.getMatrix3(this.inverseModel,e),_.Z.transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return oe(this),this._view3D}},viewRotation:{get:function(){return oe(this),this._viewRotation}},viewRotation3D:{get:function(){return oe(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return ae(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return ae(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){return I(this),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){return R(this),this._modelView}},modelView3D:{get:function(){return L(this),this._modelView3D}},modelViewRelativeToEye:{get:function(){return z(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){return F(this),this._inverseModelView}},inverseModelView3D:{get:function(){return M(this),this._inverseModelView3D}},viewProjection:{get:function(){return B(this),this._viewProjection}},inverseViewProjection:{get:function(){return V(this),this._inverseViewProjection}},modelViewProjection:{get:function(){return U(this),this._modelViewProjection}},inverseModelViewProjection:{get:function(){return G(this),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){return k(this),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){return W(this),this._modelViewInfiniteProjection}},normal:{get:function(){return H(this),this._normal}},normal3D:{get:function(){return j(this),this._normal3D}},inverseNormal:{get:function(){return Y(this),this._inverseNormal}},inverseNormal3D:{get:function(){return q(this),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},farDepthFromNearPlusOne:{get:function(){return this._farDepthFromNearPlusOne}},log2FarDepthFromNearPlusOne:{get:function(){return this._log2FarDepthFromNearPlusOne}},oneOverLog2FarDepthFromNearPlusOne:{get:function(){return this._oneOverLog2FarDepthFromNearPlusOne}},eyeHeight:{get:function(){return this._eyeHeight}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},lightDirectionWC:{get:function(){return this._lightDirectionWC}},lightDirectionEC:{get:function(){return this._lightDirectionEC}},lightColor:{get:function(){return this._lightColor}},lightColorHdr:{get:function(){return this._lightColorHdr}},encodedCameraPositionMCHigh:{get:function(){return J(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return J(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsDimensions:{get:function(){return this._specularEnvironmentMapsDimensions}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},imagerySplitPosition:{get:function(){return this._imagerySplitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}},ellipsoid:{get:function(){return(0,h.Z)(this._ellipsoid,c.Z.WGS84)}}});var S=new _.Z,P=new s.Z;function A(e,t){(0,l.Z)(Z.Z.computeIcrfToFixedMatrix(t.time,S))||(S=Z.Z.computeTemeToPseudoFixedMatrix(t.time,S));var i=v.Z.computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);_.Z.multiplyByVector(S,i,i),o.Z.normalize(i,e._sunDirectionWC),i=_.Z.multiplyByVector(e.viewRotation3D,i,e._sunDirectionEC),o.Z.normalize(i,i),i=v.Z.computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),_.Z.multiplyByVector(S,i,i),_.Z.multiplyByVector(e.viewRotation3D,i,i),o.Z.normalize(i,i);var r=t.mapProjection,n=r.ellipsoid,a=n.cartesianToCartographic(e._sunPositionWC,P);r.project(a,e._sunPositionColumbusView)}y.prototype.updateCamera=function(e){T(this,e.viewMatrix),x(this,e.inverseViewMatrix),D(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==g.Z.SCENE2D&&e.frustum instanceof m.Z},y.prototype.updateFrustum=function(e){E(this,e.projectionMatrix),(0,l.Z)(e.infiniteProjectionMatrix)&&b(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._farDepthFromNearPlusOne=e.far-e.near+1,this._log2FarDepthFromNearPlusOne=d.Z.log2(this._farDepthFromNearPlusOne),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne,(0,l.Z)(e._offCenterFrustum)&&(e=e._offCenterFrustum),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},y.prototype.updatePass=function(e){this._pass=e};var O=[],N=new w.Z;function C(e){if(e._viewportDirty){var t=e._viewport;p.Z.computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),p.Z.computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}function I(e){e._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===g.Z.SCENE2D||e._mode===g.Z.MORPHING||e._orthographicIn3D?p.Z.clone(p.Z.ZERO,e._inverseProjection):p.Z.inverse(e._projection,e._inverseProjection))}function R(e){e._modelViewDirty&&(e._modelViewDirty=!1,p.Z.multiplyTransformation(e._view,e._model,e._modelView))}function L(e){e._modelView3DDirty&&(e._modelView3DDirty=!1,p.Z.multiplyTransformation(e.view3D,e._model,e._modelView3D))}function F(e){e._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,p.Z.inverse(e.modelView,e._inverseModelView))}function M(e){e._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,p.Z.inverse(e.modelView3D,e._inverseModelView3D))}function B(e){e._viewProjectionDirty&&(e._viewProjectionDirty=!1,p.Z.multiply(e._projection,e._view,e._viewProjection))}function V(e){e._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,p.Z.inverse(e.viewProjection,e._inverseViewProjection))}function U(e){e._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,p.Z.multiply(e._projection,e.modelView,e._modelViewProjection))}function z(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;var t=e.modelView,i=e._modelViewRelativeToEye;i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=0,i[13]=0,i[14]=0,i[15]=t[15]}}function G(e){e._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,p.Z.inverse(e.modelViewProjection,e._inverseModelViewProjection))}function k(e){e._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,p.Z.multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye))}function W(e){e._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,p.Z.multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection))}function H(e){if(e._normalDirty){e._normalDirty=!1;var t=e._normal;p.Z.getMatrix3(e.inverseModelView,t),_.Z.getRotation(t,t),_.Z.transpose(t,t)}}function j(e){if(e._normal3DDirty){e._normal3DDirty=!1;var t=e._normal3D;p.Z.getMatrix3(e.inverseModelView3D,t),_.Z.getRotation(t,t),_.Z.transpose(t,t)}}function Y(e){e._inverseNormalDirty&&(e._inverseNormalDirty=!1,p.Z.getMatrix3(e.inverseModelView,e._inverseNormal),_.Z.getRotation(e._inverseNormal,e._inverseNormal))}function q(e){e._inverseNormal3DDirty&&(e._inverseNormal3DDirty=!1,p.Z.getMatrix3(e.inverseModelView3D,e._inverseNormal3D),_.Z.getRotation(e._inverseNormal3D,e._inverseNormal3D))}y.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._ellipsoid=e.mapProjection.ellipsoid,this._pixelRatio=e.pixelRatio;var t=e.camera;this.updateCamera(t),e.mode===g.Z.SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),A(this,e);var i=(0,h.Z)(e.light,N);i instanceof w.Z?(this._lightDirectionWC=o.Z.clone(this._sunDirectionWC,this._lightDirectionWC),this._lightDirectionEC=o.Z.clone(this._sunDirectionEC,this._lightDirectionEC)):(this._lightDirectionWC=o.Z.normalize(o.Z.negate(i.direction,this._lightDirectionWC),this._lightDirectionWC),this._lightDirectionEC=_.Z.multiplyByVector(this.viewRotation3D,this._lightDirectionWC,this._lightDirectionEC));var r=i.color,a=o.Z.fromElements(r.red,r.green,r.blue,this._lightColorHdr);a=o.Z.multiplyByScalar(a,i.intensity,a);var s=o.Z.maximumComponent(a);s>1?o.Z.divideByScalar(a,s,this._lightColor):o.Z.clone(a,this._lightColor);var c=e.brdfLutGenerator,f=(0,l.Z)(c)?c.colorTexture:void 0;this._brdfLut=f,this._environmentMap=(0,h.Z)(e.environmentMap,e.context.defaultCubeMap),this._sphericalHarmonicCoefficients=(0,h.Z)(e.sphericalHarmonicCoefficients,O),this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,(0,l.Z)(this._specularEnvironmentMaps)&&n.Z.clone(this._specularEnvironmentMaps.dimensions,this._specularEnvironmentMapsDimensions),this._fogDensity=e.fog.density,this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=Z.Z.computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._imagerySplitPosition=e.imagerySplitPosition*e.context.drawingBufferWidth;var d,p=t.frustum.fov,m=this._viewport;d=(0,l.Z)(p)?m.height>m.width?2*Math.tan(.5*p)/m.height:2*Math.tan(.5*p)/m.width:1/Math.max(m.width,m.height),this._geometricToleranceOverMeter=d*e.maximumScreenSpaceError,u.Z.clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};var K=new o.Z;function J(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,p.Z.multiplyByPoint(e.inverseModel,e._cameraPosition,K),f.Z.fromCartesian(K,e._encodedCameraPositionMC))}var X=new o.Z,Q=new o.Z,$=new o.Z,ee=new o.Z,te=new s.Z,ie=new o.Z,re=new p.Z;function ne(e,t,i,r,n,a,s,u){var h=X;h.x=e.y,h.y=e.z,h.z=e.x;var c=Q;c.x=i.y,c.y=i.z,c.z=i.x;var f=$;f.x=r.y,f.y=r.z,f.z=r.x;var _=ee;_.x=t.y,_.y=t.z,_.z=t.x,a===g.Z.SCENE2D&&(h.z=.5*n);var m=s.unproject(h,te);m.longitude=d.Z.clamp(m.longitude,-Math.PI,Math.PI),m.latitude=d.Z.clamp(m.latitude,-d.Z.PI_OVER_TWO,d.Z.PI_OVER_TWO);var v=s.ellipsoid,w=v.cartographicToCartesian(m,ie),y=Z.Z.eastNorthUpToFixedFrame(w,v,re);return p.Z.multiplyByPointAsVector(y,c,c),p.Z.multiplyByPointAsVector(y,f,f),p.Z.multiplyByPointAsVector(y,_,_),(0,l.Z)(u)||(u=new p.Z),u[0]=c.x,u[1]=f.x,u[2]=-_.x,u[3]=0,u[4]=c.y,u[5]=f.y,u[6]=-_.y,u[7]=0,u[8]=c.z,u[9]=f.z,u[10]=-_.z,u[11]=0,u[12]=-o.Z.dot(c,w),u[13]=-o.Z.dot(f,w),u[14]=o.Z.dot(_,w),u[15]=1,u}function oe(e){e._view3DDirty&&(e._mode===g.Z.SCENE3D?p.Z.clone(e._view,e._view3D):ne(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),p.Z.getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function ae(e){e._inverseView3DDirty&&(p.Z.inverseTransformation(e.view3D,e._inverseView3D),p.Z.getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}t["Z"]=y},18192:function(e,t,i){var r=i(66553),n=i(84828),o=i(62200),a=i(82982),s=i(86511),u=i(12572),h=i(82408),l=i(22832),c=i(99417),f=i(9407),d=i(99095),_=i(58597),p=i(20521);function m(e,t,i,r){var s=(0,a.Z)(t.vertexBuffer),h=(0,a.Z)(t.value),l=t.value?t.value.length:t.componentsPerAttribute;if(!s&&!h)throw new u.Z("attribute must have a vertexBuffer or a value.");if(s&&h)throw new u.Z("attribute cannot have both a vertexBuffer and a value.  It must have either a vertexBuffer property defining per-vertex data or a value property defining data for all vertices.");if(1!==l&&2!==l&&3!==l&&4!==l){if(h)throw new u.Z("attribute.value.length must be in the range [1, 4].");throw new u.Z("attribute.componentsPerAttribute must be in the range [1, 4].")}if((0,a.Z)(t.componentDatatype)&&!n.Z.validate(t.componentDatatype))throw new u.Z("attribute must have a valid componentDatatype or not specify it.");if((0,a.Z)(t.strideInBytes)&&t.strideInBytes>255)throw new u.Z("attribute must have a strideInBytes less than or equal to 255 or not specify it.");if((0,a.Z)(t.instanceDivisor)&&t.instanceDivisor>0&&!r.instancedArrays)throw new u.Z("instanced arrays is not supported");if((0,a.Z)(t.instanceDivisor)&&t.instanceDivisor<0)throw new u.Z("attribute must have an instanceDivisor greater than or equal to zero");if((0,a.Z)(t.instanceDivisor)&&h)throw new u.Z("attribute cannot have have an instanceDivisor if it is not backed by a buffer");if((0,a.Z)(t.instanceDivisor)&&t.instanceDivisor>0&&0===t.index)throw new u.Z("attribute zero cannot have an instanceDivisor greater than 0");var c={index:(0,o.Z)(t.index,i),enabled:(0,o.Z)(t.enabled,!0),vertexBuffer:t.vertexBuffer,value:h?t.value.slice(0):void 0,componentsPerAttribute:l,componentDatatype:(0,o.Z)(t.componentDatatype,n.Z.FLOAT),normalize:(0,o.Z)(t.normalize,!1),offsetInBytes:(0,o.Z)(t.offsetInBytes,0),strideInBytes:(0,o.Z)(t.strideInBytes,0),instanceDivisor:(0,o.Z)(t.instanceDivisor,0)};if(s)c.vertexAttrib=function(e){var t=this.index;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),e.vertexAttribPointer(t,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),e.enableVertexAttribArray(t),this.instanceDivisor>0&&(r.glVertexAttribDivisor(t,this.instanceDivisor),r._vertexAttribDivisors[t]=this.instanceDivisor,r._previousDrawInstanced=!0)},c.disableVertexAttribArray=function(e){e.disableVertexAttribArray(this.index),this.instanceDivisor>0&&r.glVertexAttribDivisor(i,0)};else{switch(c.componentsPerAttribute){case 1:c.vertexAttrib=function(e){e.vertexAttrib1fv(this.index,this.value)};break;case 2:c.vertexAttrib=function(e){e.vertexAttrib2fv(this.index,this.value)};break;case 3:c.vertexAttrib=function(e){e.vertexAttrib3fv(this.index,this.value)};break;case 4:c.vertexAttrib=function(e){e.vertexAttrib4fv(this.index,this.value)};break}c.disableVertexAttribArray=function(e){}}e.push(c)}function v(e,t,i){for(var r=0;r<t.length;++r){var n=t[r];n.enabled&&n.vertexAttrib(e)}(0,a.Z)(i)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i._getBuffer())}function Z(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),r.Z.defined("options.context",e.context),r.Z.defined("options.attributes",e.attributes);var t,i=e.context,s=i._gl,h=e.attributes,l=e.indexBuffer,c=[],f=1,d=!1,_=!1,p=h.length;for(t=0;t<p;++t)m(c,h[t],t,i);for(p=c.length,t=0;t<p;++t){var Z=c[t];if((0,a.Z)(Z.vertexBuffer)&&0===Z.instanceDivisor){var g=Z.strideInBytes||Z.componentsPerAttribute*n.Z.getSizeInBytes(Z.componentDatatype);f=Z.vertexBuffer.sizeInBytes/g;break}}for(t=0;t<p;++t)c[t].instanceDivisor>0&&(d=!0),(0,a.Z)(c[t].value)&&(_=!0);var w,y={};for(t=0;t<p;++t){var T=c[t].index;if(y[T])throw new u.Z("Index "+T+" is used by more than one attribute.");y[T]=!0}i.vertexArrayObject&&(w=i.glCreateVertexArray(),i.glBindVertexArray(w),v(s,c,l),i.glBindVertexArray(null)),this._numberOfVertices=f,this._hasInstancedAttributes=d,this._hasConstantAttributes=_,this._context=i,this._gl=s,this._vao=w,this._attributes=c,this._indexBuffer=l}function g(e){return e.values.length/e.componentsPerAttribute}function w(e){return n.Z.getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function y(e){var t,i,r,o,s=[];for(i in e)e.hasOwnProperty(i)&&(0,a.Z)(e[i])&&(0,a.Z)(e[i].values)&&(s.push(i),e[i].componentDatatype===n.Z.DOUBLE&&(e[i].componentDatatype=n.Z.FLOAT,e[i].values=n.Z.createTypedArray(n.Z.FLOAT,e[i].values)));var u=s.length;if(u>0)for(o=g(e[s[0]]),t=1;t<u;++t){var h=g(e[s[t]]);if(h!==o)throw new f.Z("Each attribute list must have the same number of vertices.  Attribute "+s[t]+" has a different number of vertices ("+h.toString()+") than attribute "+s[0]+" ("+o.toString()+").")}s.sort((function(t,i){return n.Z.getSizeInBytes(e[i].componentDatatype)-n.Z.getSizeInBytes(e[t].componentDatatype)}));var l=0,c={};for(t=0;t<u;++t)i=s[t],r=e[i],c[i]=l,l+=w(r);if(l>0){var d=n.Z.getSizeInBytes(e[s[0]].componentDatatype),_=l%d;0!==_&&(l+=d-_);var p=o*l,m=new ArrayBuffer(p),v={};for(t=0;t<u;++t){i=s[t];var Z=n.Z.getSizeInBytes(e[i].componentDatatype);v[i]={pointer:n.Z.createTypedArray(e[i].componentDatatype,m),index:c[i]/Z,strideInComponentType:l/Z}}for(t=0;t<o;++t)for(var y=0;y<u;++y){i=s[y],r=e[i];for(var T=r.values,x=v[i],E=x.pointer,b=r.componentsPerAttribute,D=0;D<b;++D)E[x.index+D]=T[t*b+D];x.index+=x.strideInComponentType}return{buffer:m,offsetsInBytes:c,vertexSizeInBytes:l}}}function T(e){var t=e._context,i=e._hasInstancedAttributes;if(i||t._previousDrawInstanced){t._previousDrawInstanced=i;var r,n=t._vertexAttribDivisors,o=e._attributes,a=p.Z.maximumVertexAttributes;if(i){var s=o.length;for(r=0;r<s;++r){var u=o[r];if(u.enabled){var h=u.instanceDivisor,l=u.index;h!==n[l]&&(t.glVertexAttribDivisor(l,h),n[l]=h)}}}else for(r=0;r<a;++r)n[r]>0&&(t.glVertexAttribDivisor(r,0),n[r]=0)}}function x(e,t){for(var i=e._attributes,r=i.length,n=0;n<r;++n){var o=i[n];o.enabled&&(0,a.Z)(o.value)&&o.vertexAttrib(t)}}Z.fromGeometry=function(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),r.Z.defined("options.context",e.context);var t,i,s,u,f=e.context,p=(0,o.Z)(e.geometry,o.Z.EMPTY_OBJECT),m=(0,o.Z)(e.bufferUsage,_.Z.DYNAMIC_DRAW),v=(0,o.Z)(e.attributeLocations,o.Z.EMPTY_OBJECT),g=(0,o.Z)(e.interleave,!1),w=e.vertexArrayAttributes,T=(0,a.Z)(w)?w:[],x=p.attributes;if(g){var E=y(x);if((0,a.Z)(E)){s=d.Z.createVertexBuffer({context:f,typedArray:E.buffer,usage:m});var b=E.offsetsInBytes,D=E.vertexSizeInBytes;for(t in x)x.hasOwnProperty(t)&&(0,a.Z)(x[t])&&(i=x[t],(0,a.Z)(i.values)?T.push({index:v[t],vertexBuffer:s,componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,offsetInBytes:b[t],strideInBytes:D}):T.push({index:v[t],value:i.value,componentDatatype:i.componentDatatype,normalize:i.normalize}))}}else for(t in x)if(x.hasOwnProperty(t)&&(0,a.Z)(x[t])){i=x[t];var S=i.componentDatatype;S===n.Z.DOUBLE&&(S=n.Z.FLOAT),s=void 0,(0,a.Z)(i.values)&&(s=d.Z.createVertexBuffer({context:f,typedArray:n.Z.createTypedArray(S,i.values),usage:m})),T.push({index:v[t],vertexBuffer:s,value:i.value,componentDatatype:S,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize})}var P=p.indices;return(0,a.Z)(P)&&(u=h.Z.computeNumberOfVertices(p)>=c.Z.SIXTY_FOUR_KILOBYTES&&f.elementIndexUint?d.Z.createIndexBuffer({context:f,typedArray:new Uint32Array(P),usage:m,indexDatatype:l.Z.UNSIGNED_INT}):d.Z.createIndexBuffer({context:f,typedArray:new Uint16Array(P),usage:m,indexDatatype:l.Z.UNSIGNED_SHORT})),new Z({context:f,attributes:T,indexBuffer:u})},Object.defineProperties(Z.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}}),Z.prototype.getAttribute=function(e){return r.Z.defined("index",e),this._attributes[e]},Z.prototype._bind=function(){(0,a.Z)(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&T(this),this._hasConstantAttributes&&x(this,this._gl)):v(this._gl,this._attributes,this._indexBuffer)},Z.prototype._unBind=function(){if((0,a.Z)(this._vao))this._context.glBindVertexArray(null);else{for(var e=this._attributes,t=this._gl,i=0;i<e.length;++i){var r=e[i];r.enabled&&r.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){for(var e=this._attributes,t=0;t<e.length;++t){var i=e[t].vertexBuffer;(0,a.Z)(i)&&!i.isDestroyed()&&i.vertexArrayDestroyable&&i.destroy()}var r=this._indexBuffer;return(0,a.Z)(r)&&!r.isDestroyed()&&r.vertexArrayDestroyable&&r.destroy(),(0,a.Z)(this._vao)&&this._context.glDeleteVertexArray(this._vao),(0,s.Z)(this)},t["Z"]=Z},52851:function(e,t,i){var r=i(66553),n=i(84828),o=i(62200),a=i(82982),s=i(86511),u=i(12572),h=i(99417),l=i(99095),c=i(58597),f=i(18192);function d(e,t,i,s){if(r.Z.defined("context",e),!t||0===t.length)throw new u.Z("At least one attribute is required.");var h=d._verifyAttributes(t);i=(0,o.Z)(i,0);for(var l,c,f=[],_={},p=h.length,m=0;m<p;++m){var v=h[m];v.vertexBuffer?f.push(v):(c=v.usage,l=_[c],(0,a.Z)(l)||(l=_[c]=[]),l.push(v))}function Z(e,t){return n.Z.getSizeInBytes(t.componentDatatype)-n.Z.getSizeInBytes(e.componentDatatype)}for(c in this._allBuffers=[],_)if(_.hasOwnProperty(c)){l=_[c],l.sort(Z);var g=d._vertexSizeInBytes(l),w=l[0].usage,y={vertexSizeInBytes:g,vertexBuffer:void 0,usage:w,needsCommit:!1,arrayBuffer:void 0,arrayViews:d._createArrayViews(l,g)};this._allBuffers.push(y)}this._size=0,this._instanced=(0,o.Z)(s,!1),this._precreated=f,this._context=e,this.writers=void 0,this.va=void 0,this.resize(i)}d._verifyAttributes=function(e){for(var t=[],i=0;i<e.length;++i){var r=e[i],a={index:(0,o.Z)(r.index,i),enabled:(0,o.Z)(r.enabled,!0),componentsPerAttribute:r.componentsPerAttribute,componentDatatype:(0,o.Z)(r.componentDatatype,n.Z.FLOAT),normalize:(0,o.Z)(r.normalize,!1),vertexBuffer:r.vertexBuffer,usage:(0,o.Z)(r.usage,c.Z.STATIC_DRAW)};if(t.push(a),1!==a.componentsPerAttribute&&2!==a.componentsPerAttribute&&3!==a.componentsPerAttribute&&4!==a.componentsPerAttribute)throw new u.Z("attribute.componentsPerAttribute must be in the range [1, 4].");var s=a.componentDatatype;if(!n.Z.validate(s))throw new u.Z("Attribute must have a valid componentDatatype or not specify it.");if(!c.Z.validate(a.usage))throw new u.Z("Attribute must have a valid usage or not specify it.")}for(var h=new Array(t.length),l=0;l<t.length;++l){var f=t[l],d=f.index;if(h[d])throw new u.Z("Index "+d+" is used by more than one attribute.");h[d]=!0}return t},d._vertexSizeInBytes=function(e){for(var t=0,i=e.length,r=0;r<i;++r){var o=e[r];t+=o.componentsPerAttribute*n.Z.getSizeInBytes(o.componentDatatype)}var a=i>0?n.Z.getSizeInBytes(e[0].componentDatatype):0,s=a>0?t%a:0,u=0===s?0:a-s;return t+=u,t},d._createArrayViews=function(e,t){for(var i=[],r=0,o=e.length,a=0;a<o;++a){var s=e[a],u=s.componentDatatype;i.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:u,normalize:s.normalize,offsetInBytes:r,vertexSizeInComponentType:t/n.Z.getSizeInBytes(u),view:void 0}),r+=s.componentsPerAttribute*n.Z.getSizeInBytes(u)}return i},d.prototype.resize=function(e){this._size=e;var t=this._allBuffers;this.writers=[];for(var i=0,r=t.length;i<r;++i){var n=t[i];d._resize(n,this._size),d._appendWriters(this.writers,n)}v(this)},d._resize=function(e,t){if(e.vertexSizeInBytes>0){var i=new ArrayBuffer(t*e.vertexSizeInBytes);if((0,a.Z)(e.arrayBuffer))for(var r=new Uint8Array(i),o=new Uint8Array(e.arrayBuffer),s=o.length,u=0;u<s;++u)r[u]=o[u];for(var h=e.arrayViews,l=h.length,c=0;c<l;++c){var f=h[c];f.view=n.Z.createArrayBufferView(f.componentDatatype,i,f.offsetInBytes)}e.arrayBuffer=i}};var _=[function(e,t,i){return function(r,n){t[r*i]=n,e.needsCommit=!0}},function(e,t,i){return function(r,n,o){var a=r*i;t[a]=n,t[a+1]=o,e.needsCommit=!0}},function(e,t,i){return function(r,n,o,a){var s=r*i;t[s]=n,t[s+1]=o,t[s+2]=a,e.needsCommit=!0}},function(e,t,i){return function(r,n,o,a,s){var u=r*i;t[u]=n,t[u+1]=o,t[u+2]=a,t[u+3]=s,e.needsCommit=!0}}];function p(e,t){if(t.needsCommit&&t.vertexSizeInBytes>0){t.needsCommit=!1;var i=t.vertexBuffer,r=e._size*t.vertexSizeInBytes,n=(0,a.Z)(i);if(!n||i.sizeInBytes<r)return n&&i.destroy(),t.vertexBuffer=l.Z.createVertexBuffer({context:e._context,typedArray:t.arrayBuffer,usage:t.usage}),t.vertexBuffer.vertexArrayDestroyable=!1,!0;t.vertexBuffer.copyFromArrayView(t.arrayBuffer)}return!1}function m(e,t,i){if(e.needsCommit&&e.vertexSizeInBytes>0){var r=e.vertexSizeInBytes*t,n=e.vertexSizeInBytes*i;e.vertexBuffer.copyFromArrayView(new Uint8Array(e.arrayBuffer,r,n),r)}}function v(e){var t=e.va;if((0,a.Z)(t)){for(var i=t.length,r=0;r<i;++r)t[r].va.destroy();e.va=void 0}}d._appendWriters=function(e,t){for(var i=t.arrayViews,r=i.length,n=0;n<r;++n){var o=i[n];e[o.index]=_[o.componentsPerAttribute-1](t,o.view,o.vertexSizeInComponentType)}},d.prototype.commit=function(e){var t,i,r,n=!1,o=this._allBuffers;for(i=0,r=o.length;i<r;++i)t=o[i],n=p(this,t)||n;if(n||!(0,a.Z)(this.va)){v(this);for(var s=this.va=[],u=h.Z.SIXTY_FOUR_KILOBYTES-4,l=(0,a.Z)(e)&&!this._instanced?Math.ceil(this._size/u):1,c=0;c<l;++c){var _=[];for(i=0,r=o.length;i<r;++i){t=o[i];var m=c*(t.vertexSizeInBytes*u);d._appendAttributes(_,t,m,this._instanced)}_=_.concat(this._precreated),s.push({va:new f.Z({context:this._context,attributes:_,indexBuffer:e}),indicesCount:1.5*(c!==l-1?u:this._size%u)})}}},d._appendAttributes=function(e,t,i,r){for(var n=t.arrayViews,o=n.length,a=0;a<o;++a){var s=n[a];e.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:s.componentDatatype,normalize:s.normalize,vertexBuffer:t.vertexBuffer,offsetInBytes:i+s.offsetInBytes,strideInBytes:t.vertexSizeInBytes,instanceDivisor:r?1:0})}},d.prototype.subCommit=function(e,t){if(e<0||e>=this._size)throw new u.Z("offsetInVertices must be greater than or equal to zero and less than the vertex array size.");if(e+t>this._size)throw new u.Z("offsetInVertices + lengthInVertices cannot exceed the vertex array size.");for(var i=this._allBuffers,r=0,n=i.length;r<n;++r)m(i[r],e,t)},d.prototype.endSubCommits=function(){for(var e=this._allBuffers,t=0,i=e.length;t<i;++t)e[t].needsCommit=!1},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){for(var e=this._allBuffers,t=0,i=e.length;t<i;++t){var r=e[t];r.vertexBuffer=r.vertexBuffer&&r.vertexBuffer.destroy()}return v(this),(0,s.Z)(this)},t["Z"]=d}}]);
//# sourceMappingURL=chunk-vendors-e2e1f249-legacy.bd1ca66a.js.map