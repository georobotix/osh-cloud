"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[6568],{4157:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_ArcType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11491);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59947);\n/* harmony import */ var _Core_createGuid_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(39960);\n/* harmony import */ var _Core_Credit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52975);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(14459);\n/* harmony import */ var _Core_getFilenameFromUri_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8962);\n/* harmony import */ var _Core_PinBuilder_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(78318);\n/* harmony import */ var _Core_PolygonHierarchy_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(78757);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(68985);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(9407);\n/* harmony import */ var _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(4260);\n/* harmony import */ var _Scene_VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(60473);\n/* harmony import */ var _ThirdParty_topojson_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92564);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(13222);\n/* harmony import */ var _BillboardGraphics_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(44011);\n/* harmony import */ var _CallbackProperty_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(11249);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(20174);\n/* harmony import */ var _ConstantPositionProperty_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(19069);\n/* harmony import */ var _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(612);\n/* harmony import */ var _DataSource_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(70265);\n/* harmony import */ var _EntityCluster_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(47890);\n/* harmony import */ var _EntityCollection_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(69516);\n/* harmony import */ var _PolygonGraphics_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(3081);\n/* harmony import */ var _PolylineGraphics_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(42956);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction defaultCrsFunction(coordinates) {\n  return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromDegrees */ .Z.fromDegrees(coordinates[0], coordinates[1], coordinates[2]);\n}\n\nvar crsNames = {\n  "urn:ogc:def:crs:OGC:1.3:CRS84": defaultCrsFunction,\n  "EPSG:4326": defaultCrsFunction,\n  "urn:ogc:def:crs:EPSG::4326": defaultCrsFunction,\n};\n\nvar crsLinkHrefs = {};\nvar crsLinkTypes = {};\nvar defaultMarkerSize = 48;\nvar defaultMarkerSymbol;\nvar defaultMarkerColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ROYALBLUE */ .Z.ROYALBLUE;\nvar defaultStroke = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].YELLOW */ .Z.YELLOW;\nvar defaultStrokeWidth = 2;\nvar defaultFill = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromBytes */ .Z.fromBytes(255, 255, 0, 100);\nvar defaultClampToGround = false;\n\nvar sizes = {\n  small: 24,\n  medium: 48,\n  large: 64,\n};\n\nvar simpleStyleIdentifiers = [\n  "title",\n  "description", //\n  "marker-size",\n  "marker-symbol",\n  "marker-color",\n  "stroke", //\n  "stroke-opacity",\n  "stroke-width",\n  "fill",\n  "fill-opacity",\n];\n\nfunction defaultDescribe(properties, nameProperty) {\n  var html = "";\n  for (var key in properties) {\n    if (properties.hasOwnProperty(key)) {\n      if (key === nameProperty || simpleStyleIdentifiers.indexOf(key) !== -1) {\n        continue;\n      }\n      var value = properties[key];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(value)) {\n        if (typeof value === "object") {\n          html +=\n            "<tr><th>" +\n            key +\n            "</th><td>" +\n            defaultDescribe(value) +\n            "</td></tr>";\n        } else {\n          html += "<tr><th>" + key + "</th><td>" + value + "</td></tr>";\n        }\n      }\n    }\n  }\n\n  if (html.length > 0) {\n    html =\n      \'<table class="cesium-infoBox-defaultTable"><tbody>\' +\n      html +\n      "</tbody></table>";\n  }\n\n  return html;\n}\n\nfunction createDescriptionCallback(describe, properties, nameProperty) {\n  var description;\n  return function (time, result) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(description)) {\n      description = describe(properties, nameProperty);\n    }\n    return description;\n  };\n}\n\nfunction defaultDescribeProperty(properties, nameProperty) {\n  return new _CallbackProperty_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z(\n    createDescriptionCallback(defaultDescribe, properties, nameProperty),\n    true\n  );\n}\n\n//GeoJSON specifies only the Feature object has a usable id property\n//But since "multi" geometries create multiple entity,\n//we can\'t use it for them either.\nfunction createObject(geoJson, entityCollection, describe) {\n  var id = geoJson.id;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(id) || geoJson.type !== "Feature") {\n    id = (0,_Core_createGuid_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z)();\n  } else {\n    var i = 2;\n    var finalId = id;\n    while ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(entityCollection.getById(finalId))) {\n      finalId = id + "_" + i;\n      i++;\n    }\n    id = finalId;\n  }\n\n  var entity = entityCollection.getOrCreateEntity(id);\n  var properties = geoJson.properties;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(properties)) {\n    entity.properties = properties;\n\n    var nameProperty;\n\n    //Check for the simplestyle specified name first.\n    var name = properties.title;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(name)) {\n      entity.name = name;\n      nameProperty = "title";\n    } else {\n      //Else, find the name by selecting an appropriate property.\n      //The name will be obtained based on this order:\n      //1) The first case-insensitive property with the name \'title\',\n      //2) The first case-insensitive property with the name \'name\',\n      //3) The first property containing the word \'title\'.\n      //4) The first property containing the word \'name\',\n      var namePropertyPrecedence = Number.MAX_VALUE;\n      for (var key in properties) {\n        if (properties.hasOwnProperty(key) && properties[key]) {\n          var lowerKey = key.toLowerCase();\n\n          if (namePropertyPrecedence > 1 && lowerKey === "title") {\n            namePropertyPrecedence = 1;\n            nameProperty = key;\n            break;\n          } else if (namePropertyPrecedence > 2 && lowerKey === "name") {\n            namePropertyPrecedence = 2;\n            nameProperty = key;\n          } else if (namePropertyPrecedence > 3 && /title/i.test(key)) {\n            namePropertyPrecedence = 3;\n            nameProperty = key;\n          } else if (namePropertyPrecedence > 4 && /name/i.test(key)) {\n            namePropertyPrecedence = 4;\n            nameProperty = key;\n          }\n        }\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(nameProperty)) {\n        entity.name = properties[nameProperty];\n      }\n    }\n\n    var description = properties.description;\n    if (description !== null) {\n      entity.description = !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(description)\n        ? describe(properties, nameProperty)\n        : new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(description);\n    }\n  }\n  return entity;\n}\n\nfunction coordinatesArrayToCartesianArray(coordinates, crsFunction) {\n  var positions = new Array(coordinates.length);\n  for (var i = 0; i < coordinates.length; i++) {\n    positions[i] = crsFunction(coordinates[i]);\n  }\n  return positions;\n}\n\nvar geoJsonObjectTypes = {\n  Feature: processFeature,\n  FeatureCollection: processFeatureCollection,\n  GeometryCollection: processGeometryCollection,\n  LineString: processLineString,\n  MultiLineString: processMultiLineString,\n  MultiPoint: processMultiPoint,\n  MultiPolygon: processMultiPolygon,\n  Point: processPoint,\n  Polygon: processPolygon,\n  Topology: processTopology,\n};\n\nvar geometryTypes = {\n  GeometryCollection: processGeometryCollection,\n  LineString: processLineString,\n  MultiLineString: processMultiLineString,\n  MultiPoint: processMultiPoint,\n  MultiPolygon: processMultiPolygon,\n  Point: processPoint,\n  Polygon: processPolygon,\n  Topology: processTopology,\n};\n\n// GeoJSON processing functions\nfunction processFeature(dataSource, feature, notUsed, crsFunction, options) {\n  if (feature.geometry === null) {\n    //Null geometry is allowed, so just create an empty entity instance for it.\n    createObject(feature, dataSource._entityCollection, options.describe);\n    return;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(feature.geometry)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("feature.geometry is required.");\n  }\n\n  var geometryType = feature.geometry.type;\n  var geometryHandler = geometryTypes[geometryType];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(geometryHandler)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("Unknown geometry type: " + geometryType);\n  }\n  geometryHandler(dataSource, feature, feature.geometry, crsFunction, options);\n}\n\nfunction processFeatureCollection(\n  dataSource,\n  featureCollection,\n  notUsed,\n  crsFunction,\n  options\n) {\n  var features = featureCollection.features;\n  for (var i = 0, len = features.length; i < len; i++) {\n    processFeature(dataSource, features[i], undefined, crsFunction, options);\n  }\n}\n\nfunction processGeometryCollection(\n  dataSource,\n  geoJson,\n  geometryCollection,\n  crsFunction,\n  options\n) {\n  var geometries = geometryCollection.geometries;\n  for (var i = 0, len = geometries.length; i < len; i++) {\n    var geometry = geometries[i];\n    var geometryType = geometry.type;\n    var geometryHandler = geometryTypes[geometryType];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(geometryHandler)) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("Unknown geometry type: " + geometryType);\n    }\n    geometryHandler(dataSource, geoJson, geometry, crsFunction, options);\n  }\n}\n\nfunction createPoint(dataSource, geoJson, crsFunction, coordinates, options) {\n  var symbol = options.markerSymbol;\n  var color = options.markerColor;\n  var size = options.markerSize;\n\n  var properties = geoJson.properties;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(properties)) {\n    var cssColor = properties["marker-color"];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(cssColor)) {\n      color = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCssColorString */ .Z.fromCssColorString(cssColor);\n    }\n\n    size = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(sizes[properties["marker-size"]], size);\n    var markerSymbol = properties["marker-symbol"];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(markerSymbol)) {\n      symbol = markerSymbol;\n    }\n  }\n\n  var canvasOrPromise;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(symbol)) {\n    if (symbol.length === 1) {\n      canvasOrPromise = dataSource._pinBuilder.fromText(\n        symbol.toUpperCase(),\n        color,\n        size\n      );\n    } else {\n      canvasOrPromise = dataSource._pinBuilder.fromMakiIconId(\n        symbol,\n        color,\n        size\n      );\n    }\n  } else {\n    canvasOrPromise = dataSource._pinBuilder.fromColor(color, size);\n  }\n\n  var billboard = new _BillboardGraphics_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z();\n  billboard.verticalOrigin = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(_Scene_VerticalOrigin_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].BOTTOM */ .Z.BOTTOM);\n\n  // Clamp to ground if there isn\'t a height specified\n  if (coordinates.length === 2 && options.clampToGround) {\n    billboard.heightReference = _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].CLAMP_TO_GROUND */ .Z.CLAMP_TO_GROUND;\n  }\n\n  var entity = createObject(\n    geoJson,\n    dataSource._entityCollection,\n    options.describe\n  );\n  entity.billboard = billboard;\n  entity.position = new _ConstantPositionProperty_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z(crsFunction(coordinates));\n\n  var promise = (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(canvasOrPromise)\n    .then(function (image) {\n      billboard.image = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(image);\n    })\n    .otherwise(function () {\n      billboard.image = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(\n        dataSource._pinBuilder.fromColor(color, size)\n      );\n    });\n\n  dataSource._promises.push(promise);\n}\n\nfunction processPoint(dataSource, geoJson, geometry, crsFunction, options) {\n  createPoint(dataSource, geoJson, crsFunction, geometry.coordinates, options);\n}\n\nfunction processMultiPoint(\n  dataSource,\n  geoJson,\n  geometry,\n  crsFunction,\n  options\n) {\n  var coordinates = geometry.coordinates;\n  for (var i = 0; i < coordinates.length; i++) {\n    createPoint(dataSource, geoJson, crsFunction, coordinates[i], options);\n  }\n}\n\nfunction createLineString(\n  dataSource,\n  geoJson,\n  crsFunction,\n  coordinates,\n  options\n) {\n  var material = options.strokeMaterialProperty;\n  var widthProperty = options.strokeWidthProperty;\n\n  var properties = geoJson.properties;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(properties)) {\n    var width = properties["stroke-width"];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(width)) {\n      widthProperty = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(width);\n    }\n\n    var color;\n    var stroke = properties.stroke;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(stroke)) {\n      color = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCssColorString */ .Z.fromCssColorString(stroke);\n    }\n    var opacity = properties["stroke-opacity"];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(opacity) && opacity !== 1.0) {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(color)) {\n        color = material.color.clone();\n      }\n      color.alpha = opacity;\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(color)) {\n      material = new _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(color);\n    }\n  }\n\n  var entity = createObject(\n    geoJson,\n    dataSource._entityCollection,\n    options.describe\n  );\n  var polylineGraphics = new _PolylineGraphics_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z();\n  entity.polyline = polylineGraphics;\n\n  polylineGraphics.clampToGround = options.clampToGround;\n  polylineGraphics.material = material;\n  polylineGraphics.width = widthProperty;\n  polylineGraphics.positions = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(\n    coordinatesArrayToCartesianArray(coordinates, crsFunction)\n  );\n  polylineGraphics.arcType = _Core_ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB;\n}\n\nfunction processLineString(\n  dataSource,\n  geoJson,\n  geometry,\n  crsFunction,\n  options\n) {\n  createLineString(\n    dataSource,\n    geoJson,\n    crsFunction,\n    geometry.coordinates,\n    options\n  );\n}\n\nfunction processMultiLineString(\n  dataSource,\n  geoJson,\n  geometry,\n  crsFunction,\n  options\n) {\n  var lineStrings = geometry.coordinates;\n  for (var i = 0; i < lineStrings.length; i++) {\n    createLineString(dataSource, geoJson, crsFunction, lineStrings[i], options);\n  }\n}\n\nfunction createPolygon(dataSource, geoJson, crsFunction, coordinates, options) {\n  if (coordinates.length === 0 || coordinates[0].length === 0) {\n    return;\n  }\n\n  var outlineColorProperty = options.strokeMaterialProperty.color;\n  var material = options.fillMaterialProperty;\n  var widthProperty = options.strokeWidthProperty;\n\n  var properties = geoJson.properties;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(properties)) {\n    var width = properties["stroke-width"];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(width)) {\n      widthProperty = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(width);\n    }\n\n    var color;\n    var stroke = properties.stroke;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(stroke)) {\n      color = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCssColorString */ .Z.fromCssColorString(stroke);\n    }\n    var opacity = properties["stroke-opacity"];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(opacity) && opacity !== 1.0) {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(color)) {\n        color = options.strokeMaterialProperty.color.clone();\n      }\n      color.alpha = opacity;\n    }\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(color)) {\n      outlineColorProperty = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(color);\n    }\n\n    var fillColor;\n    var fill = properties.fill;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(fill)) {\n      fillColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCssColorString */ .Z.fromCssColorString(fill);\n      fillColor.alpha = material.color.alpha;\n    }\n    opacity = properties["fill-opacity"];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(opacity) && opacity !== material.color.alpha) {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(fillColor)) {\n        fillColor = material.color.clone();\n      }\n      fillColor.alpha = opacity;\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(fillColor)) {\n      material = new _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(fillColor);\n    }\n  }\n\n  var polygon = new _PolygonGraphics_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z();\n  polygon.outline = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(true);\n  polygon.outlineColor = outlineColorProperty;\n  polygon.outlineWidth = widthProperty;\n  polygon.material = material;\n  polygon.arcType = _Core_ArcType_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].RHUMB */ .Z.RHUMB;\n\n  var holes = [];\n  for (var i = 1, len = coordinates.length; i < len; i++) {\n    holes.push(\n      new _Core_PolygonHierarchy_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z(\n        coordinatesArrayToCartesianArray(coordinates[i], crsFunction)\n      )\n    );\n  }\n\n  var positions = coordinates[0];\n  polygon.hierarchy = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(\n    new _Core_PolygonHierarchy_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z(\n      coordinatesArrayToCartesianArray(positions, crsFunction),\n      holes\n    )\n  );\n  if (positions[0].length > 2) {\n    polygon.perPositionHeight = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(true);\n  } else if (!options.clampToGround) {\n    polygon.height = 0;\n  }\n\n  var entity = createObject(\n    geoJson,\n    dataSource._entityCollection,\n    options.describe\n  );\n  entity.polygon = polygon;\n}\n\nfunction processPolygon(dataSource, geoJson, geometry, crsFunction, options) {\n  createPolygon(\n    dataSource,\n    geoJson,\n    crsFunction,\n    geometry.coordinates,\n    options\n  );\n}\n\nfunction processMultiPolygon(\n  dataSource,\n  geoJson,\n  geometry,\n  crsFunction,\n  options\n) {\n  var polygons = geometry.coordinates;\n  for (var i = 0; i < polygons.length; i++) {\n    createPolygon(dataSource, geoJson, crsFunction, polygons[i], options);\n  }\n}\n\nfunction processTopology(dataSource, geoJson, geometry, crsFunction, options) {\n  for (var property in geometry.objects) {\n    if (geometry.objects.hasOwnProperty(property)) {\n      var feature = _ThirdParty_topojson_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].feature */ .Z.feature(geometry, geometry.objects[property]);\n      var typeHandler = geoJsonObjectTypes[feature.type];\n      typeHandler(dataSource, feature, feature, crsFunction, options);\n    }\n  }\n}\n\n/**\n * @typedef {Object} GeoJsonDataSource.LoadOptions\n *\n * Initialization options for the `load` method.\n *\n * @property {String} [sourceUri] Overrides the url to use for resolving relative links.\n * @property {Number} [markerSize=GeoJsonDataSource.markerSize] The default size of the map pin created for each point, in pixels.\n * @property {String} [markerSymbol=GeoJsonDataSource.markerSymbol] The default symbol of the map pin created for each point.\n * @property {Color} [markerColor=GeoJsonDataSource.markerColor] The default color of the map pin created for each point.\n * @property {Color} [stroke=GeoJsonDataSource.stroke] The default color of polylines and polygon outlines.\n * @property {Number} [strokeWidth=GeoJsonDataSource.strokeWidth] The default width of polylines and polygon outlines.\n * @property {Color} [fill=GeoJsonDataSource.fill] The default color for polygon interiors.\n * @property {Boolean} [clampToGround=GeoJsonDataSource.clampToGround] true if we want the geometry features (polygons or linestrings) clamped to the ground.\n * @property {Credit|String} [credit] A credit for the data source, which is displayed on the canvas.\n */\n\n/**\n * A {@link DataSource} which processes both\n * {@link http://www.geojson.org/|GeoJSON} and {@link https://github.com/mbostock/topojson|TopoJSON} data.\n * {@link https://github.com/mapbox/simplestyle-spec|simplestyle-spec} properties will also be used if they\n * are present.\n *\n * @alias GeoJsonDataSource\n * @constructor\n *\n * @param {String} [name] The name of this data source.  If undefined, a name will be taken from\n *                        the name of the GeoJSON file.\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=GeoJSON%20and%20TopoJSON.html|Cesium Sandcastle GeoJSON and TopoJSON Demo}\n * @demo {@link https://sandcastle.cesium.com/index.html?src=GeoJSON%20simplestyle.html|Cesium Sandcastle GeoJSON simplestyle Demo}\n *\n * @example\n * var viewer = new Cesium.Viewer(\'cesiumContainer\');\n * viewer.dataSources.add(Cesium.GeoJsonDataSource.load(\'../../SampleData/ne_10m_us_states.topojson\', {\n *   stroke: Cesium.Color.HOTPINK,\n *   fill: Cesium.Color.PINK,\n *   strokeWidth: 3,\n *   markerSymbol: \'?\'\n * }));\n */\nfunction GeoJsonDataSource(name) {\n  this._name = name;\n  this._changed = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n  this._error = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n  this._isLoading = false;\n  this._loading = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n  this._entityCollection = new _EntityCollection_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z(this);\n  this._promises = [];\n  this._pinBuilder = new _Core_PinBuilder_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z();\n  this._entityCluster = new _EntityCluster_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z();\n  this._credit = undefined;\n  this._resourceCredits = [];\n}\n\n/**\n * Creates a Promise to a new instance loaded with the provided GeoJSON or TopoJSON data.\n *\n * @param {Resource|String|Object} data A url, GeoJSON object, or TopoJSON object to be loaded.\n * @param {GeoJsonDataSource.LoadOptions} [options] An object specifying configuration options\n *\n * @returns {Promise.<GeoJsonDataSource>} A promise that will resolve when the data is loaded.\n */\nGeoJsonDataSource.load = function (data, options) {\n  return new GeoJsonDataSource().load(data, options);\n};\n\nObject.defineProperties(GeoJsonDataSource, {\n  /**\n   * Gets or sets the default size of the map pin created for each point, in pixels.\n   * @memberof GeoJsonDataSource\n   * @type {Number}\n   * @default 48\n   */\n  markerSize: {\n    get: function () {\n      return defaultMarkerSize;\n    },\n    set: function (value) {\n      defaultMarkerSize = value;\n    },\n  },\n  /**\n   * Gets or sets the default symbol of the map pin created for each point.\n   * This can be any valid {@link http://mapbox.com/maki/|Maki} identifier, any single character,\n   * or blank if no symbol is to be used.\n   * @memberof GeoJsonDataSource\n   * @type {String}\n   */\n  markerSymbol: {\n    get: function () {\n      return defaultMarkerSymbol;\n    },\n    set: function (value) {\n      defaultMarkerSymbol = value;\n    },\n  },\n  /**\n   * Gets or sets the default color of the map pin created for each point.\n   * @memberof GeoJsonDataSource\n   * @type {Color}\n   * @default Color.ROYALBLUE\n   */\n  markerColor: {\n    get: function () {\n      return defaultMarkerColor;\n    },\n    set: function (value) {\n      defaultMarkerColor = value;\n    },\n  },\n  /**\n   * Gets or sets the default color of polylines and polygon outlines.\n   * @memberof GeoJsonDataSource\n   * @type {Color}\n   * @default Color.BLACK\n   */\n  stroke: {\n    get: function () {\n      return defaultStroke;\n    },\n    set: function (value) {\n      defaultStroke = value;\n    },\n  },\n  /**\n   * Gets or sets the default width of polylines and polygon outlines.\n   * @memberof GeoJsonDataSource\n   * @type {Number}\n   * @default 2.0\n   */\n  strokeWidth: {\n    get: function () {\n      return defaultStrokeWidth;\n    },\n    set: function (value) {\n      defaultStrokeWidth = value;\n    },\n  },\n  /**\n   * Gets or sets default color for polygon interiors.\n   * @memberof GeoJsonDataSource\n   * @type {Color}\n   * @default Color.YELLOW\n   */\n  fill: {\n    get: function () {\n      return defaultFill;\n    },\n    set: function (value) {\n      defaultFill = value;\n    },\n  },\n  /**\n   * Gets or sets default of whether to clamp to the ground.\n   * @memberof GeoJsonDataSource\n   * @type {Boolean}\n   * @default false\n   */\n  clampToGround: {\n    get: function () {\n      return defaultClampToGround;\n    },\n    set: function (value) {\n      defaultClampToGround = value;\n    },\n  },\n\n  /**\n   * Gets an object that maps the name of a crs to a callback function which takes a GeoJSON coordinate\n   * and transforms it into a WGS84 Earth-fixed Cartesian.  Older versions of GeoJSON which\n   * supported the EPSG type can be added to this list as well, by specifying the complete EPSG name,\n   * for example \'EPSG:4326\'.\n   * @memberof GeoJsonDataSource\n   * @type {Object}\n   */\n  crsNames: {\n    get: function () {\n      return crsNames;\n    },\n  },\n\n  /**\n   * Gets an object that maps the href property of a crs link to a callback function\n   * which takes the crs properties object and returns a Promise that resolves\n   * to a function that takes a GeoJSON coordinate and transforms it into a WGS84 Earth-fixed Cartesian.\n   * Items in this object take precedence over those defined in <code>crsLinkHrefs</code>, assuming\n   * the link has a type specified.\n   * @memberof GeoJsonDataSource\n   * @type {Object}\n   */\n  crsLinkHrefs: {\n    get: function () {\n      return crsLinkHrefs;\n    },\n  },\n\n  /**\n   * Gets an object that maps the type property of a crs link to a callback function\n   * which takes the crs properties object and returns a Promise that resolves\n   * to a function that takes a GeoJSON coordinate and transforms it into a WGS84 Earth-fixed Cartesian.\n   * Items in <code>crsLinkHrefs</code> take precedence over this object.\n   * @memberof GeoJsonDataSource\n   * @type {Object}\n   */\n  crsLinkTypes: {\n    get: function () {\n      return crsLinkTypes;\n    },\n  },\n});\n\nObject.defineProperties(GeoJsonDataSource.prototype, {\n  /**\n   * Gets or sets a human-readable name for this instance.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {String}\n   */\n  name: {\n    get: function () {\n      return this._name;\n    },\n    set: function (value) {\n      if (this._name !== value) {\n        this._name = value;\n        this._changed.raiseEvent(this);\n      }\n    },\n  },\n  /**\n   * This DataSource only defines static data, therefore this property is always undefined.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {DataSourceClock}\n   */\n  clock: {\n    value: undefined,\n    writable: false,\n  },\n  /**\n   * Gets the collection of {@link Entity} instances.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {EntityCollection}\n   */\n  entities: {\n    get: function () {\n      return this._entityCollection;\n    },\n  },\n  /**\n   * Gets a value indicating if the data source is currently loading data.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {Boolean}\n   */\n  isLoading: {\n    get: function () {\n      return this._isLoading;\n    },\n  },\n  /**\n   * Gets an event that will be raised when the underlying data changes.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {Event}\n   */\n  changedEvent: {\n    get: function () {\n      return this._changed;\n    },\n  },\n  /**\n   * Gets an event that will be raised if an error is encountered during processing.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {Event}\n   */\n  errorEvent: {\n    get: function () {\n      return this._error;\n    },\n  },\n  /**\n   * Gets an event that will be raised when the data source either starts or stops loading.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {Event}\n   */\n  loadingEvent: {\n    get: function () {\n      return this._loading;\n    },\n  },\n  /**\n   * Gets whether or not this data source should be displayed.\n   * @memberof GeoJsonDataSource.prototype\n   * @type {Boolean}\n   */\n  show: {\n    get: function () {\n      return this._entityCollection.show;\n    },\n    set: function (value) {\n      this._entityCollection.show = value;\n    },\n  },\n\n  /**\n   * Gets or sets the clustering options for this data source. This object can be shared between multiple data sources.\n   *\n   * @memberof GeoJsonDataSource.prototype\n   * @type {EntityCluster}\n   */\n  clustering: {\n    get: function () {\n      return this._entityCluster;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(value)) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("value must be defined.");\n      }\n      //>>includeEnd(\'debug\');\n      this._entityCluster = value;\n    },\n  },\n  /**\n   * Gets the credit that will be displayed for the data source\n   * @memberof GeoJsonDataSource.prototype\n   * @type {Credit}\n   */\n  credit: {\n    get: function () {\n      return this._credit;\n    },\n  },\n});\n\n/**\n * Asynchronously loads the provided GeoJSON or TopoJSON data, replacing any existing data.\n *\n * @param {Resource|String|Object} data A url, GeoJSON object, or TopoJSON object to be loaded.\n * @param {Object} [options] An object with the following properties:\n * @param {String} [options.sourceUri] Overrides the url to use for resolving relative links.\n * @param {GeoJsonDataSource.describe} [options.describe=GeoJsonDataSource.defaultDescribeProperty] A function which returns a Property object (or just a string),\n *                                                                                which converts the properties into an html description.\n * @param {Number} [options.markerSize=GeoJsonDataSource.markerSize] The default size of the map pin created for each point, in pixels.\n * @param {String} [options.markerSymbol=GeoJsonDataSource.markerSymbol] The default symbol of the map pin created for each point.\n * @param {Color} [options.markerColor=GeoJsonDataSource.markerColor] The default color of the map pin created for each point.\n * @param {Color} [options.stroke=GeoJsonDataSource.stroke] The default color of polylines and polygon outlines.\n * @param {Number} [options.strokeWidth=GeoJsonDataSource.strokeWidth] The default width of polylines and polygon outlines.\n * @param {Color} [options.fill=GeoJsonDataSource.fill] The default color for polygon interiors.\n * @param {Boolean} [options.clampToGround=GeoJsonDataSource.clampToGround] true if we want the features clamped to the ground.\n * @param {Credit|String} [options.credit] A credit for the data source, which is displayed on the canvas.\n *\n * @returns {Promise.<GeoJsonDataSource>} a promise that will resolve when the GeoJSON is loaded.\n */\nGeoJsonDataSource.prototype.load = function (data, options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(data)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z("data is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  _DataSource_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].setLoading */ .Z.setLoading(this, true);\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  // User specified credit\n  var credit = options.credit;\n  if (typeof credit === "string") {\n    credit = new _Core_Credit_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(credit);\n  }\n  this._credit = credit;\n\n  var promise = data;\n  var sourceUri = options.sourceUri;\n  if (typeof data === "string" || data instanceof _Core_Resource_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z) {\n    data = _Core_Resource_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].createIfNeeded */ .Z.createIfNeeded(data);\n    promise = data.fetchJson();\n    sourceUri = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(sourceUri, data.getUrlComponent());\n\n    // Add resource credits to our list of credits to display\n    var resourceCredits = this._resourceCredits;\n    var credits = data.credits;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(credits)) {\n      var length = credits.length;\n      for (var i = 0; i < length; i++) {\n        resourceCredits.push(credits[i]);\n      }\n    }\n  }\n\n  options = {\n    describe: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.describe, defaultDescribeProperty),\n    markerSize: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.markerSize, defaultMarkerSize),\n    markerSymbol: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.markerSymbol, defaultMarkerSymbol),\n    markerColor: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.markerColor, defaultMarkerColor),\n    strokeWidthProperty: new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(\n      (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.strokeWidth, defaultStrokeWidth)\n    ),\n    strokeMaterialProperty: new _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.stroke, defaultStroke)\n    ),\n    fillMaterialProperty: new _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z(\n      (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.fill, defaultFill)\n    ),\n    clampToGround: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(options.clampToGround, defaultClampToGround),\n  };\n\n  var that = this;\n  return (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(promise, function (geoJson) {\n    return load(that, geoJson, options, sourceUri);\n  }).otherwise(function (error) {\n    _DataSource_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].setLoading */ .Z.setLoading(that, false);\n    that._error.raiseEvent(that, error);\n    console.log(error);\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].reject */ .Z.reject(error);\n  });\n};\n\n/**\n * Updates the data source to the provided time.  This function is optional and\n * is not required to be implemented.  It is provided for data sources which\n * retrieve data based on the current animation time or scene state.\n * If implemented, update will be called by {@link DataSourceDisplay} once a frame.\n *\n * @param {JulianDate} time The simulation time.\n * @returns {Boolean} True if this data source is ready to be displayed at the provided time, false otherwise.\n */\nGeoJsonDataSource.prototype.update = function (time) {\n  return true;\n};\n\nfunction load(that, geoJson, options, sourceUri) {\n  var name;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(sourceUri)) {\n    name = (0,_Core_getFilenameFromUri_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(sourceUri);\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(name) && that._name !== name) {\n    that._name = name;\n    that._changed.raiseEvent(that);\n  }\n\n  var typeHandler = geoJsonObjectTypes[geoJson.type];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(typeHandler)) {\n    throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("Unsupported GeoJSON object type: " + geoJson.type);\n  }\n\n  //Check for a Coordinate Reference System.\n  var crs = geoJson.crs;\n  var crsFunction = crs !== null ? defaultCrsFunction : null;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(crs)) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(crs.properties)) {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("crs.properties is undefined.");\n    }\n\n    var properties = crs.properties;\n    if (crs.type === "name") {\n      crsFunction = crsNames[properties.name];\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(crsFunction)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("Unknown crs name: " + properties.name);\n      }\n    } else if (crs.type === "link") {\n      var handler = crsLinkHrefs[properties.href];\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(handler)) {\n        handler = crsLinkTypes[properties.type];\n      }\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(handler)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(\n          "Unable to resolve crs link: " + JSON.stringify(properties)\n        );\n      }\n\n      crsFunction = handler(properties);\n    } else if (crs.type === "EPSG") {\n      crsFunction = crsNames["EPSG:" + properties.code];\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z)(crsFunction)) {\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("Unknown crs EPSG code: " + properties.code);\n      }\n    } else {\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z("Unknown crs type: " + crs.type);\n    }\n  }\n\n  return (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(crsFunction, function (crsFunction) {\n    that._entityCollection.removeAll();\n\n    // null is a valid value for the crs, but means the entire load process becomes a no-op\n    // because we can\'t assume anything about the coordinates.\n    if (crsFunction !== null) {\n      typeHandler(that, geoJson, geoJson, crsFunction, options);\n    }\n\n    return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].all */ .Z.all(that._promises, function () {\n      that._promises.length = 0;\n      _DataSource_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].setLoading */ .Z.setLoading(that, false);\n      return that;\n    });\n  });\n}\n\n/**\n * This callback is displayed as part of the GeoJsonDataSource class.\n * @callback GeoJsonDataSource.describe\n * @param {Object} properties The properties of the feature.\n * @param {String} nameProperty The property key that Cesium estimates to have the name of the feature.\n */\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (GeoJsonDataSource)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdB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QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzRUFBTztBQUNsQixrQkFBa0IsdUVBQVk7QUFDOUI7QUFDQSxNQUFNO0FBQ047QUFDQSxXQUFXLHNFQUFPO0FBQ2xCO0FBQ0E7O0FBRUEsV0FBVyxzRUFBTztBQUNsQixrQkFBa0IsdUVBQVk7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsV0FBVyxzRUFBTztBQUNsQixrQkFBa0IsdUVBQVk7QUFDOUI7QUFDQSxNQUFNO0FBQ04sZ0JBQWdCLHVFQUFZO0FBQzVCO0FBQ0E7O0FBRUEsU0FBUyx5RUFBSTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsV0FBVyw2RUFBUTtBQUNuQjtBQUNBLE1BQU0sc0ZBQXFCO0FBQzNCO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0Esc0VBQWUsaUVBQWlCLElBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvR2VvSnNvbkRhdGFTb3VyY2UuanM/MzY5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXJjVHlwZSBmcm9tIFwiLi4vQ29yZS9BcmNUeXBlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL0NvcmUvQ29sb3IuanNcIjtcbmltcG9ydCBjcmVhdGVHdWlkIGZyb20gXCIuLi9Db3JlL2NyZWF0ZUd1aWQuanNcIjtcbmltcG9ydCBDcmVkaXQgZnJvbSBcIi4uL0NvcmUvQ3JlZGl0LmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBnZXRGaWxlbmFtZUZyb21VcmkgZnJvbSBcIi4uL0NvcmUvZ2V0RmlsZW5hbWVGcm9tVXJpLmpzXCI7XG5pbXBvcnQgUGluQnVpbGRlciBmcm9tIFwiLi4vQ29yZS9QaW5CdWlsZGVyLmpzXCI7XG5pbXBvcnQgUG9seWdvbkhpZXJhcmNoeSBmcm9tIFwiLi4vQ29yZS9Qb2x5Z29uSGllcmFyY2h5LmpzXCI7XG5pbXBvcnQgUmVzb3VyY2UgZnJvbSBcIi4uL0NvcmUvUmVzb3VyY2UuanNcIjtcbmltcG9ydCBSdW50aW1lRXJyb3IgZnJvbSBcIi4uL0NvcmUvUnVudGltZUVycm9yLmpzXCI7XG5pbXBvcnQgSGVpZ2h0UmVmZXJlbmNlIGZyb20gXCIuLi9TY2VuZS9IZWlnaHRSZWZlcmVuY2UuanNcIjtcbmltcG9ydCBWZXJ0aWNhbE9yaWdpbiBmcm9tIFwiLi4vU2NlbmUvVmVydGljYWxPcmlnaW4uanNcIjtcbmltcG9ydCB0b3BvanNvbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS90b3BvanNvbi5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuaW1wb3J0IEJpbGxib2FyZEdyYXBoaWNzIGZyb20gXCIuL0JpbGxib2FyZEdyYXBoaWNzLmpzXCI7XG5pbXBvcnQgQ2FsbGJhY2tQcm9wZXJ0eSBmcm9tIFwiLi9DYWxsYmFja1Byb3BlcnR5LmpzXCI7XG5pbXBvcnQgQ29sb3JNYXRlcmlhbFByb3BlcnR5IGZyb20gXCIuL0NvbG9yTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IENvbnN0YW50UG9zaXRpb25Qcm9wZXJ0eSBmcm9tIFwiLi9Db25zdGFudFBvc2l0aW9uUHJvcGVydHkuanNcIjtcbmltcG9ydCBDb25zdGFudFByb3BlcnR5IGZyb20gXCIuL0NvbnN0YW50UHJvcGVydHkuanNcIjtcbmltcG9ydCBEYXRhU291cmNlIGZyb20gXCIuL0RhdGFTb3VyY2UuanNcIjtcbmltcG9ydCBFbnRpdHlDbHVzdGVyIGZyb20gXCIuL0VudGl0eUNsdXN0ZXIuanNcIjtcbmltcG9ydCBFbnRpdHlDb2xsZWN0aW9uIGZyb20gXCIuL0VudGl0eUNvbGxlY3Rpb24uanNcIjtcbmltcG9ydCBQb2x5Z29uR3JhcGhpY3MgZnJvbSBcIi4vUG9seWdvbkdyYXBoaWNzLmpzXCI7XG5pbXBvcnQgUG9seWxpbmVHcmFwaGljcyBmcm9tIFwiLi9Qb2x5bGluZUdyYXBoaWNzLmpzXCI7XG5cbmZ1bmN0aW9uIGRlZmF1bHRDcnNGdW5jdGlvbihjb29yZGluYXRlcykge1xuICByZXR1cm4gQ2FydGVzaWFuMy5mcm9tRGVncmVlcyhjb29yZGluYXRlc1swXSwgY29vcmRpbmF0ZXNbMV0sIGNvb3JkaW5hdGVzWzJdKTtcbn1cblxudmFyIGNyc05hbWVzID0ge1xuICBcInVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0XCI6IGRlZmF1bHRDcnNGdW5jdGlvbixcbiAgXCJFUFNHOjQzMjZcIjogZGVmYXVsdENyc0Z1bmN0aW9uLFxuICBcInVybjpvZ2M6ZGVmOmNyczpFUFNHOjo0MzI2XCI6IGRlZmF1bHRDcnNGdW5jdGlvbixcbn07XG5cbnZhciBjcnNMaW5rSHJlZnMgPSB7fTtcbnZhciBjcnNMaW5rVHlwZXMgPSB7fTtcbnZhciBkZWZhdWx0TWFya2VyU2l6ZSA9IDQ4O1xudmFyIGRlZmF1bHRNYXJrZXJTeW1ib2w7XG52YXIgZGVmYXVsdE1hcmtlckNvbG9yID0gQ29sb3IuUk9ZQUxCTFVFO1xudmFyIGRlZmF1bHRTdHJva2UgPSBDb2xvci5ZRUxMT1c7XG52YXIgZGVmYXVsdFN0cm9rZVdpZHRoID0gMjtcbnZhciBkZWZhdWx0RmlsbCA9IENvbG9yLmZyb21CeXRlcygyNTUsIDI1NSwgMCwgMTAwKTtcbnZhciBkZWZhdWx0Q2xhbXBUb0dyb3VuZCA9IGZhbHNlO1xuXG52YXIgc2l6ZXMgPSB7XG4gIHNtYWxsOiAyNCxcbiAgbWVkaXVtOiA0OCxcbiAgbGFyZ2U6IDY0LFxufTtcblxudmFyIHNpbXBsZVN0eWxlSWRlbnRpZmllcnMgPSBbXG4gIFwidGl0bGVcIixcbiAgXCJkZXNjcmlwdGlvblwiLCAvL1xuICBcIm1hcmtlci1zaXplXCIsXG4gIFwibWFya2VyLXN5bWJvbFwiLFxuICBcIm1hcmtlci1jb2xvclwiLFxuICBcInN0cm9rZVwiLCAvL1xuICBcInN0cm9rZS1vcGFjaXR5XCIsXG4gIFwic3Ryb2tlLXdpZHRoXCIsXG4gIFwiZmlsbFwiLFxuICBcImZpbGwtb3BhY2l0eVwiLFxuXTtcblxuZnVuY3Rpb24gZGVmYXVsdERlc2NyaWJlKHByb3BlcnRpZXMsIG5hbWVQcm9wZXJ0eSkge1xuICB2YXIgaHRtbCA9IFwiXCI7XG4gIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgaWYgKGtleSA9PT0gbmFtZVByb3BlcnR5IHx8IHNpbXBsZVN0eWxlSWRlbnRpZmllcnMuaW5kZXhPZihrZXkpICE9PSAtMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWx1ZSA9IHByb3BlcnRpZXNba2V5XTtcbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgaHRtbCArPVxuICAgICAgICAgICAgXCI8dHI+PHRoPlwiICtcbiAgICAgICAgICAgIGtleSArXG4gICAgICAgICAgICBcIjwvdGg+PHRkPlwiICtcbiAgICAgICAgICAgIGRlZmF1bHREZXNjcmliZSh2YWx1ZSkgK1xuICAgICAgICAgICAgXCI8L3RkPjwvdHI+XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaHRtbCArPSBcIjx0cj48dGg+XCIgKyBrZXkgKyBcIjwvdGg+PHRkPlwiICsgdmFsdWUgKyBcIjwvdGQ+PC90cj5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChodG1sLmxlbmd0aCA+IDApIHtcbiAgICBodG1sID1cbiAgICAgICc8dGFibGUgY2xhc3M9XCJjZXNpdW0taW5mb0JveC1kZWZhdWx0VGFibGVcIj48dGJvZHk+JyArXG4gICAgICBodG1sICtcbiAgICAgIFwiPC90Ym9keT48L3RhYmxlPlwiO1xuICB9XG5cbiAgcmV0dXJuIGh0bWw7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlc2NyaXB0aW9uQ2FsbGJhY2soZGVzY3JpYmUsIHByb3BlcnRpZXMsIG5hbWVQcm9wZXJ0eSkge1xuICB2YXIgZGVzY3JpcHRpb247XG4gIHJldHVybiBmdW5jdGlvbiAodGltZSwgcmVzdWx0KSB7XG4gICAgaWYgKCFkZWZpbmVkKGRlc2NyaXB0aW9uKSkge1xuICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmliZShwcm9wZXJ0aWVzLCBuYW1lUHJvcGVydHkpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHREZXNjcmliZVByb3BlcnR5KHByb3BlcnRpZXMsIG5hbWVQcm9wZXJ0eSkge1xuICByZXR1cm4gbmV3IENhbGxiYWNrUHJvcGVydHkoXG4gICAgY3JlYXRlRGVzY3JpcHRpb25DYWxsYmFjayhkZWZhdWx0RGVzY3JpYmUsIHByb3BlcnRpZXMsIG5hbWVQcm9wZXJ0eSksXG4gICAgdHJ1ZVxuICApO1xufVxuXG4vL0dlb0pTT04gc3BlY2lmaWVzIG9ubHkgdGhlIEZlYXR1cmUgb2JqZWN0IGhhcyBhIHVzYWJsZSBpZCBwcm9wZXJ0eVxuLy9CdXQgc2luY2UgXCJtdWx0aVwiIGdlb21ldHJpZXMgY3JlYXRlIG11bHRpcGxlIGVudGl0eSxcbi8vd2UgY2FuJ3QgdXNlIGl0IGZvciB0aGVtIGVpdGhlci5cbmZ1bmN0aW9uIGNyZWF0ZU9iamVjdChnZW9Kc29uLCBlbnRpdHlDb2xsZWN0aW9uLCBkZXNjcmliZSkge1xuICB2YXIgaWQgPSBnZW9Kc29uLmlkO1xuICBpZiAoIWRlZmluZWQoaWQpIHx8IGdlb0pzb24udHlwZSAhPT0gXCJGZWF0dXJlXCIpIHtcbiAgICBpZCA9IGNyZWF0ZUd1aWQoKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaSA9IDI7XG4gICAgdmFyIGZpbmFsSWQgPSBpZDtcbiAgICB3aGlsZSAoZGVmaW5lZChlbnRpdHlDb2xsZWN0aW9uLmdldEJ5SWQoZmluYWxJZCkpKSB7XG4gICAgICBmaW5hbElkID0gaWQgKyBcIl9cIiArIGk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGlkID0gZmluYWxJZDtcbiAgfVxuXG4gIHZhciBlbnRpdHkgPSBlbnRpdHlDb2xsZWN0aW9uLmdldE9yQ3JlYXRlRW50aXR5KGlkKTtcbiAgdmFyIHByb3BlcnRpZXMgPSBnZW9Kc29uLnByb3BlcnRpZXM7XG4gIGlmIChkZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgZW50aXR5LnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuXG4gICAgdmFyIG5hbWVQcm9wZXJ0eTtcblxuICAgIC8vQ2hlY2sgZm9yIHRoZSBzaW1wbGVzdHlsZSBzcGVjaWZpZWQgbmFtZSBmaXJzdC5cbiAgICB2YXIgbmFtZSA9IHByb3BlcnRpZXMudGl0bGU7XG4gICAgaWYgKGRlZmluZWQobmFtZSkpIHtcbiAgICAgIGVudGl0eS5uYW1lID0gbmFtZTtcbiAgICAgIG5hbWVQcm9wZXJ0eSA9IFwidGl0bGVcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9FbHNlLCBmaW5kIHRoZSBuYW1lIGJ5IHNlbGVjdGluZyBhbiBhcHByb3ByaWF0ZSBwcm9wZXJ0eS5cbiAgICAgIC8vVGhlIG5hbWUgd2lsbCBiZSBvYnRhaW5lZCBiYXNlZCBvbiB0aGlzIG9yZGVyOlxuICAgICAgLy8xKSBUaGUgZmlyc3QgY2FzZS1pbnNlbnNpdGl2ZSBwcm9wZXJ0eSB3aXRoIHRoZSBuYW1lICd0aXRsZScsXG4gICAgICAvLzIpIFRoZSBmaXJzdCBjYXNlLWluc2Vuc2l0aXZlIHByb3BlcnR5IHdpdGggdGhlIG5hbWUgJ25hbWUnLFxuICAgICAgLy8zKSBUaGUgZmlyc3QgcHJvcGVydHkgY29udGFpbmluZyB0aGUgd29yZCAndGl0bGUnLlxuICAgICAgLy80KSBUaGUgZmlyc3QgcHJvcGVydHkgY29udGFpbmluZyB0aGUgd29yZCAnbmFtZScsXG4gICAgICB2YXIgbmFtZVByb3BlcnR5UHJlY2VkZW5jZSA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHByb3BlcnRpZXNba2V5XSkge1xuICAgICAgICAgIHZhciBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgaWYgKG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPiAxICYmIGxvd2VyS2V5ID09PSBcInRpdGxlXCIpIHtcbiAgICAgICAgICAgIG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPSAxO1xuICAgICAgICAgICAgbmFtZVByb3BlcnR5ID0ga2V5O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBlbHNlIGlmIChuYW1lUHJvcGVydHlQcmVjZWRlbmNlID4gMiAmJiBsb3dlcktleSA9PT0gXCJuYW1lXCIpIHtcbiAgICAgICAgICAgIG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPSAyO1xuICAgICAgICAgICAgbmFtZVByb3BlcnR5ID0ga2V5O1xuICAgICAgICAgIH0gZWxzZSBpZiAobmFtZVByb3BlcnR5UHJlY2VkZW5jZSA+IDMgJiYgL3RpdGxlL2kudGVzdChrZXkpKSB7XG4gICAgICAgICAgICBuYW1lUHJvcGVydHlQcmVjZWRlbmNlID0gMztcbiAgICAgICAgICAgIG5hbWVQcm9wZXJ0eSA9IGtleTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hbWVQcm9wZXJ0eVByZWNlZGVuY2UgPiA0ICYmIC9uYW1lL2kudGVzdChrZXkpKSB7XG4gICAgICAgICAgICBuYW1lUHJvcGVydHlQcmVjZWRlbmNlID0gNDtcbiAgICAgICAgICAgIG5hbWVQcm9wZXJ0eSA9IGtleTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKG5hbWVQcm9wZXJ0eSkpIHtcbiAgICAgICAgZW50aXR5Lm5hbWUgPSBwcm9wZXJ0aWVzW25hbWVQcm9wZXJ0eV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGRlc2NyaXB0aW9uID0gcHJvcGVydGllcy5kZXNjcmlwdGlvbjtcbiAgICBpZiAoZGVzY3JpcHRpb24gIT09IG51bGwpIHtcbiAgICAgIGVudGl0eS5kZXNjcmlwdGlvbiA9ICFkZWZpbmVkKGRlc2NyaXB0aW9uKVxuICAgICAgICA/IGRlc2NyaWJlKHByb3BlcnRpZXMsIG5hbWVQcm9wZXJ0eSlcbiAgICAgICAgOiBuZXcgQ29uc3RhbnRQcm9wZXJ0eShkZXNjcmlwdGlvbik7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbnRpdHk7XG59XG5cbmZ1bmN0aW9uIGNvb3JkaW5hdGVzQXJyYXlUb0NhcnRlc2lhbkFycmF5KGNvb3JkaW5hdGVzLCBjcnNGdW5jdGlvbikge1xuICB2YXIgcG9zaXRpb25zID0gbmV3IEFycmF5KGNvb3JkaW5hdGVzLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBwb3NpdGlvbnNbaV0gPSBjcnNGdW5jdGlvbihjb29yZGluYXRlc1tpXSk7XG4gIH1cbiAgcmV0dXJuIHBvc2l0aW9ucztcbn1cblxudmFyIGdlb0pzb25PYmplY3RUeXBlcyA9IHtcbiAgRmVhdHVyZTogcHJvY2Vzc0ZlYXR1cmUsXG4gIEZlYXR1cmVDb2xsZWN0aW9uOiBwcm9jZXNzRmVhdHVyZUNvbGxlY3Rpb24sXG4gIEdlb21ldHJ5Q29sbGVjdGlvbjogcHJvY2Vzc0dlb21ldHJ5Q29sbGVjdGlvbixcbiAgTGluZVN0cmluZzogcHJvY2Vzc0xpbmVTdHJpbmcsXG4gIE11bHRpTGluZVN0cmluZzogcHJvY2Vzc011bHRpTGluZVN0cmluZyxcbiAgTXVsdGlQb2ludDogcHJvY2Vzc011bHRpUG9pbnQsXG4gIE11bHRpUG9seWdvbjogcHJvY2Vzc011bHRpUG9seWdvbixcbiAgUG9pbnQ6IHByb2Nlc3NQb2ludCxcbiAgUG9seWdvbjogcHJvY2Vzc1BvbHlnb24sXG4gIFRvcG9sb2d5OiBwcm9jZXNzVG9wb2xvZ3ksXG59O1xuXG52YXIgZ2VvbWV0cnlUeXBlcyA9IHtcbiAgR2VvbWV0cnlDb2xsZWN0aW9uOiBwcm9jZXNzR2VvbWV0cnlDb2xsZWN0aW9uLFxuICBMaW5lU3RyaW5nOiBwcm9jZXNzTGluZVN0cmluZyxcbiAgTXVsdGlMaW5lU3RyaW5nOiBwcm9jZXNzTXVsdGlMaW5lU3RyaW5nLFxuICBNdWx0aVBvaW50OiBwcm9jZXNzTXVsdGlQb2ludCxcbiAgTXVsdGlQb2x5Z29uOiBwcm9jZXNzTXVsdGlQb2x5Z29uLFxuICBQb2ludDogcHJvY2Vzc1BvaW50LFxuICBQb2x5Z29uOiBwcm9jZXNzUG9seWdvbixcbiAgVG9wb2xvZ3k6IHByb2Nlc3NUb3BvbG9neSxcbn07XG5cbi8vIEdlb0pTT04gcHJvY2Vzc2luZyBmdW5jdGlvbnNcbmZ1bmN0aW9uIHByb2Nlc3NGZWF0dXJlKGRhdGFTb3VyY2UsIGZlYXR1cmUsIG5vdFVzZWQsIGNyc0Z1bmN0aW9uLCBvcHRpb25zKSB7XG4gIGlmIChmZWF0dXJlLmdlb21ldHJ5ID09PSBudWxsKSB7XG4gICAgLy9OdWxsIGdlb21ldHJ5IGlzIGFsbG93ZWQsIHNvIGp1c3QgY3JlYXRlIGFuIGVtcHR5IGVudGl0eSBpbnN0YW5jZSBmb3IgaXQuXG4gICAgY3JlYXRlT2JqZWN0KGZlYXR1cmUsIGRhdGFTb3VyY2UuX2VudGl0eUNvbGxlY3Rpb24sIG9wdGlvbnMuZGVzY3JpYmUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghZGVmaW5lZChmZWF0dXJlLmdlb21ldHJ5KSkge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJmZWF0dXJlLmdlb21ldHJ5IGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuXG4gIHZhciBnZW9tZXRyeVR5cGUgPSBmZWF0dXJlLmdlb21ldHJ5LnR5cGU7XG4gIHZhciBnZW9tZXRyeUhhbmRsZXIgPSBnZW9tZXRyeVR5cGVzW2dlb21ldHJ5VHlwZV07XG4gIGlmICghZGVmaW5lZChnZW9tZXRyeUhhbmRsZXIpKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcIlVua25vd24gZ2VvbWV0cnkgdHlwZTogXCIgKyBnZW9tZXRyeVR5cGUpO1xuICB9XG4gIGdlb21ldHJ5SGFuZGxlcihkYXRhU291cmNlLCBmZWF0dXJlLCBmZWF0dXJlLmdlb21ldHJ5LCBjcnNGdW5jdGlvbiwgb3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NGZWF0dXJlQ29sbGVjdGlvbihcbiAgZGF0YVNvdXJjZSxcbiAgZmVhdHVyZUNvbGxlY3Rpb24sXG4gIG5vdFVzZWQsXG4gIGNyc0Z1bmN0aW9uLFxuICBvcHRpb25zXG4pIHtcbiAgdmFyIGZlYXR1cmVzID0gZmVhdHVyZUNvbGxlY3Rpb24uZmVhdHVyZXM7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBmZWF0dXJlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHByb2Nlc3NGZWF0dXJlKGRhdGFTb3VyY2UsIGZlYXR1cmVzW2ldLCB1bmRlZmluZWQsIGNyc0Z1bmN0aW9uLCBvcHRpb25zKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzR2VvbWV0cnlDb2xsZWN0aW9uKFxuICBkYXRhU291cmNlLFxuICBnZW9Kc29uLFxuICBnZW9tZXRyeUNvbGxlY3Rpb24sXG4gIGNyc0Z1bmN0aW9uLFxuICBvcHRpb25zXG4pIHtcbiAgdmFyIGdlb21ldHJpZXMgPSBnZW9tZXRyeUNvbGxlY3Rpb24uZ2VvbWV0cmllcztcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICB2YXIgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzW2ldO1xuICAgIHZhciBnZW9tZXRyeVR5cGUgPSBnZW9tZXRyeS50eXBlO1xuICAgIHZhciBnZW9tZXRyeUhhbmRsZXIgPSBnZW9tZXRyeVR5cGVzW2dlb21ldHJ5VHlwZV07XG4gICAgaWYgKCFkZWZpbmVkKGdlb21ldHJ5SGFuZGxlcikpIHtcbiAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJVbmtub3duIGdlb21ldHJ5IHR5cGU6IFwiICsgZ2VvbWV0cnlUeXBlKTtcbiAgICB9XG4gICAgZ2VvbWV0cnlIYW5kbGVyKGRhdGFTb3VyY2UsIGdlb0pzb24sIGdlb21ldHJ5LCBjcnNGdW5jdGlvbiwgb3B0aW9ucyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUG9pbnQoZGF0YVNvdXJjZSwgZ2VvSnNvbiwgY3JzRnVuY3Rpb24sIGNvb3JkaW5hdGVzLCBvcHRpb25zKSB7XG4gIHZhciBzeW1ib2wgPSBvcHRpb25zLm1hcmtlclN5bWJvbDtcbiAgdmFyIGNvbG9yID0gb3B0aW9ucy5tYXJrZXJDb2xvcjtcbiAgdmFyIHNpemUgPSBvcHRpb25zLm1hcmtlclNpemU7XG5cbiAgdmFyIHByb3BlcnRpZXMgPSBnZW9Kc29uLnByb3BlcnRpZXM7XG4gIGlmIChkZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgdmFyIGNzc0NvbG9yID0gcHJvcGVydGllc1tcIm1hcmtlci1jb2xvclwiXTtcbiAgICBpZiAoZGVmaW5lZChjc3NDb2xvcikpIHtcbiAgICAgIGNvbG9yID0gQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKGNzc0NvbG9yKTtcbiAgICB9XG5cbiAgICBzaXplID0gZGVmYXVsdFZhbHVlKHNpemVzW3Byb3BlcnRpZXNbXCJtYXJrZXItc2l6ZVwiXV0sIHNpemUpO1xuICAgIHZhciBtYXJrZXJTeW1ib2wgPSBwcm9wZXJ0aWVzW1wibWFya2VyLXN5bWJvbFwiXTtcbiAgICBpZiAoZGVmaW5lZChtYXJrZXJTeW1ib2wpKSB7XG4gICAgICBzeW1ib2wgPSBtYXJrZXJTeW1ib2w7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNhbnZhc09yUHJvbWlzZTtcbiAgaWYgKGRlZmluZWQoc3ltYm9sKSkge1xuICAgIGlmIChzeW1ib2wubGVuZ3RoID09PSAxKSB7XG4gICAgICBjYW52YXNPclByb21pc2UgPSBkYXRhU291cmNlLl9waW5CdWlsZGVyLmZyb21UZXh0KFxuICAgICAgICBzeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIHNpemVcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbnZhc09yUHJvbWlzZSA9IGRhdGFTb3VyY2UuX3BpbkJ1aWxkZXIuZnJvbU1ha2lJY29uSWQoXG4gICAgICAgIHN5bWJvbCxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIHNpemVcbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNhbnZhc09yUHJvbWlzZSA9IGRhdGFTb3VyY2UuX3BpbkJ1aWxkZXIuZnJvbUNvbG9yKGNvbG9yLCBzaXplKTtcbiAgfVxuXG4gIHZhciBiaWxsYm9hcmQgPSBuZXcgQmlsbGJvYXJkR3JhcGhpY3MoKTtcbiAgYmlsbGJvYXJkLnZlcnRpY2FsT3JpZ2luID0gbmV3IENvbnN0YW50UHJvcGVydHkoVmVydGljYWxPcmlnaW4uQk9UVE9NKTtcblxuICAvLyBDbGFtcCB0byBncm91bmQgaWYgdGhlcmUgaXNuJ3QgYSBoZWlnaHQgc3BlY2lmaWVkXG4gIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDIgJiYgb3B0aW9ucy5jbGFtcFRvR3JvdW5kKSB7XG4gICAgYmlsbGJvYXJkLmhlaWdodFJlZmVyZW5jZSA9IEhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQ7XG4gIH1cblxuICB2YXIgZW50aXR5ID0gY3JlYXRlT2JqZWN0KFxuICAgIGdlb0pzb24sXG4gICAgZGF0YVNvdXJjZS5fZW50aXR5Q29sbGVjdGlvbixcbiAgICBvcHRpb25zLmRlc2NyaWJlXG4gICk7XG4gIGVudGl0eS5iaWxsYm9hcmQgPSBiaWxsYm9hcmQ7XG4gIGVudGl0eS5wb3NpdGlvbiA9IG5ldyBDb25zdGFudFBvc2l0aW9uUHJvcGVydHkoY3JzRnVuY3Rpb24oY29vcmRpbmF0ZXMpKTtcblxuICB2YXIgcHJvbWlzZSA9IHdoZW4oY2FudmFzT3JQcm9taXNlKVxuICAgIC50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgYmlsbGJvYXJkLmltYWdlID0gbmV3IENvbnN0YW50UHJvcGVydHkoaW1hZ2UpO1xuICAgIH0pXG4gICAgLm90aGVyd2lzZShmdW5jdGlvbiAoKSB7XG4gICAgICBiaWxsYm9hcmQuaW1hZ2UgPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eShcbiAgICAgICAgZGF0YVNvdXJjZS5fcGluQnVpbGRlci5mcm9tQ29sb3IoY29sb3IsIHNpemUpXG4gICAgICApO1xuICAgIH0pO1xuXG4gIGRhdGFTb3VyY2UuX3Byb21pc2VzLnB1c2gocHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NQb2ludChkYXRhU291cmNlLCBnZW9Kc29uLCBnZW9tZXRyeSwgY3JzRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgY3JlYXRlUG9pbnQoZGF0YVNvdXJjZSwgZ2VvSnNvbiwgY3JzRnVuY3Rpb24sIGdlb21ldHJ5LmNvb3JkaW5hdGVzLCBvcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc011bHRpUG9pbnQoXG4gIGRhdGFTb3VyY2UsXG4gIGdlb0pzb24sXG4gIGdlb21ldHJ5LFxuICBjcnNGdW5jdGlvbixcbiAgb3B0aW9uc1xuKSB7XG4gIHZhciBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY3JlYXRlUG9pbnQoZGF0YVNvdXJjZSwgZ2VvSnNvbiwgY3JzRnVuY3Rpb24sIGNvb3JkaW5hdGVzW2ldLCBvcHRpb25zKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5lU3RyaW5nKFxuICBkYXRhU291cmNlLFxuICBnZW9Kc29uLFxuICBjcnNGdW5jdGlvbixcbiAgY29vcmRpbmF0ZXMsXG4gIG9wdGlvbnNcbikge1xuICB2YXIgbWF0ZXJpYWwgPSBvcHRpb25zLnN0cm9rZU1hdGVyaWFsUHJvcGVydHk7XG4gIHZhciB3aWR0aFByb3BlcnR5ID0gb3B0aW9ucy5zdHJva2VXaWR0aFByb3BlcnR5O1xuXG4gIHZhciBwcm9wZXJ0aWVzID0gZ2VvSnNvbi5wcm9wZXJ0aWVzO1xuICBpZiAoZGVmaW5lZChwcm9wZXJ0aWVzKSkge1xuICAgIHZhciB3aWR0aCA9IHByb3BlcnRpZXNbXCJzdHJva2Utd2lkdGhcIl07XG4gICAgaWYgKGRlZmluZWQod2lkdGgpKSB7XG4gICAgICB3aWR0aFByb3BlcnR5ID0gbmV3IENvbnN0YW50UHJvcGVydHkod2lkdGgpO1xuICAgIH1cblxuICAgIHZhciBjb2xvcjtcbiAgICB2YXIgc3Ryb2tlID0gcHJvcGVydGllcy5zdHJva2U7XG4gICAgaWYgKGRlZmluZWQoc3Ryb2tlKSkge1xuICAgICAgY29sb3IgPSBDb2xvci5mcm9tQ3NzQ29sb3JTdHJpbmcoc3Ryb2tlKTtcbiAgICB9XG4gICAgdmFyIG9wYWNpdHkgPSBwcm9wZXJ0aWVzW1wic3Ryb2tlLW9wYWNpdHlcIl07XG4gICAgaWYgKGRlZmluZWQob3BhY2l0eSkgJiYgb3BhY2l0eSAhPT0gMS4wKSB7XG4gICAgICBpZiAoIWRlZmluZWQoY29sb3IpKSB7XG4gICAgICAgIGNvbG9yID0gbWF0ZXJpYWwuY29sb3IuY2xvbmUoKTtcbiAgICAgIH1cbiAgICAgIGNvbG9yLmFscGhhID0gb3BhY2l0eTtcbiAgICB9XG4gICAgaWYgKGRlZmluZWQoY29sb3IpKSB7XG4gICAgICBtYXRlcmlhbCA9IG5ldyBDb2xvck1hdGVyaWFsUHJvcGVydHkoY29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBlbnRpdHkgPSBjcmVhdGVPYmplY3QoXG4gICAgZ2VvSnNvbixcbiAgICBkYXRhU291cmNlLl9lbnRpdHlDb2xsZWN0aW9uLFxuICAgIG9wdGlvbnMuZGVzY3JpYmVcbiAgKTtcbiAgdmFyIHBvbHlsaW5lR3JhcGhpY3MgPSBuZXcgUG9seWxpbmVHcmFwaGljcygpO1xuICBlbnRpdHkucG9seWxpbmUgPSBwb2x5bGluZUdyYXBoaWNzO1xuXG4gIHBvbHlsaW5lR3JhcGhpY3MuY2xhbXBUb0dyb3VuZCA9IG9wdGlvbnMuY2xhbXBUb0dyb3VuZDtcbiAgcG9seWxpbmVHcmFwaGljcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuICBwb2x5bGluZUdyYXBoaWNzLndpZHRoID0gd2lkdGhQcm9wZXJ0eTtcbiAgcG9seWxpbmVHcmFwaGljcy5wb3NpdGlvbnMgPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eShcbiAgICBjb29yZGluYXRlc0FycmF5VG9DYXJ0ZXNpYW5BcnJheShjb29yZGluYXRlcywgY3JzRnVuY3Rpb24pXG4gICk7XG4gIHBvbHlsaW5lR3JhcGhpY3MuYXJjVHlwZSA9IEFyY1R5cGUuUkhVTUI7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NMaW5lU3RyaW5nKFxuICBkYXRhU291cmNlLFxuICBnZW9Kc29uLFxuICBnZW9tZXRyeSxcbiAgY3JzRnVuY3Rpb24sXG4gIG9wdGlvbnNcbikge1xuICBjcmVhdGVMaW5lU3RyaW5nKFxuICAgIGRhdGFTb3VyY2UsXG4gICAgZ2VvSnNvbixcbiAgICBjcnNGdW5jdGlvbixcbiAgICBnZW9tZXRyeS5jb29yZGluYXRlcyxcbiAgICBvcHRpb25zXG4gICk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NNdWx0aUxpbmVTdHJpbmcoXG4gIGRhdGFTb3VyY2UsXG4gIGdlb0pzb24sXG4gIGdlb21ldHJ5LFxuICBjcnNGdW5jdGlvbixcbiAgb3B0aW9uc1xuKSB7XG4gIHZhciBsaW5lU3RyaW5ncyA9IGdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVTdHJpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgY3JlYXRlTGluZVN0cmluZyhkYXRhU291cmNlLCBnZW9Kc29uLCBjcnNGdW5jdGlvbiwgbGluZVN0cmluZ3NbaV0sIG9wdGlvbnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBvbHlnb24oZGF0YVNvdXJjZSwgZ2VvSnNvbiwgY3JzRnVuY3Rpb24sIGNvb3JkaW5hdGVzLCBvcHRpb25zKSB7XG4gIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDAgfHwgY29vcmRpbmF0ZXNbMF0ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG91dGxpbmVDb2xvclByb3BlcnR5ID0gb3B0aW9ucy5zdHJva2VNYXRlcmlhbFByb3BlcnR5LmNvbG9yO1xuICB2YXIgbWF0ZXJpYWwgPSBvcHRpb25zLmZpbGxNYXRlcmlhbFByb3BlcnR5O1xuICB2YXIgd2lkdGhQcm9wZXJ0eSA9IG9wdGlvbnMuc3Ryb2tlV2lkdGhQcm9wZXJ0eTtcblxuICB2YXIgcHJvcGVydGllcyA9IGdlb0pzb24ucHJvcGVydGllcztcbiAgaWYgKGRlZmluZWQocHJvcGVydGllcykpIHtcbiAgICB2YXIgd2lkdGggPSBwcm9wZXJ0aWVzW1wic3Ryb2tlLXdpZHRoXCJdO1xuICAgIGlmIChkZWZpbmVkKHdpZHRoKSkge1xuICAgICAgd2lkdGhQcm9wZXJ0eSA9IG5ldyBDb25zdGFudFByb3BlcnR5KHdpZHRoKTtcbiAgICB9XG5cbiAgICB2YXIgY29sb3I7XG4gICAgdmFyIHN0cm9rZSA9IHByb3BlcnRpZXMuc3Ryb2tlO1xuICAgIGlmIChkZWZpbmVkKHN0cm9rZSkpIHtcbiAgICAgIGNvbG9yID0gQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKHN0cm9rZSk7XG4gICAgfVxuICAgIHZhciBvcGFjaXR5ID0gcHJvcGVydGllc1tcInN0cm9rZS1vcGFjaXR5XCJdO1xuICAgIGlmIChkZWZpbmVkKG9wYWNpdHkpICYmIG9wYWNpdHkgIT09IDEuMCkge1xuICAgICAgaWYgKCFkZWZpbmVkKGNvbG9yKSkge1xuICAgICAgICBjb2xvciA9IG9wdGlvbnMuc3Ryb2tlTWF0ZXJpYWxQcm9wZXJ0eS5jb2xvci5jbG9uZSgpO1xuICAgICAgfVxuICAgICAgY29sb3IuYWxwaGEgPSBvcGFjaXR5O1xuICAgIH1cblxuICAgIGlmIChkZWZpbmVkKGNvbG9yKSkge1xuICAgICAgb3V0bGluZUNvbG9yUHJvcGVydHkgPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eShjb2xvcik7XG4gICAgfVxuXG4gICAgdmFyIGZpbGxDb2xvcjtcbiAgICB2YXIgZmlsbCA9IHByb3BlcnRpZXMuZmlsbDtcbiAgICBpZiAoZGVmaW5lZChmaWxsKSkge1xuICAgICAgZmlsbENvbG9yID0gQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKGZpbGwpO1xuICAgICAgZmlsbENvbG9yLmFscGhhID0gbWF0ZXJpYWwuY29sb3IuYWxwaGE7XG4gICAgfVxuICAgIG9wYWNpdHkgPSBwcm9wZXJ0aWVzW1wiZmlsbC1vcGFjaXR5XCJdO1xuICAgIGlmIChkZWZpbmVkKG9wYWNpdHkpICYmIG9wYWNpdHkgIT09IG1hdGVyaWFsLmNvbG9yLmFscGhhKSB7XG4gICAgICBpZiAoIWRlZmluZWQoZmlsbENvbG9yKSkge1xuICAgICAgICBmaWxsQ29sb3IgPSBtYXRlcmlhbC5jb2xvci5jbG9uZSgpO1xuICAgICAgfVxuICAgICAgZmlsbENvbG9yLmFscGhhID0gb3BhY2l0eTtcbiAgICB9XG4gICAgaWYgKGRlZmluZWQoZmlsbENvbG9yKSkge1xuICAgICAgbWF0ZXJpYWwgPSBuZXcgQ29sb3JNYXRlcmlhbFByb3BlcnR5KGZpbGxDb2xvcik7XG4gICAgfVxuICB9XG5cbiAgdmFyIHBvbHlnb24gPSBuZXcgUG9seWdvbkdyYXBoaWNzKCk7XG4gIHBvbHlnb24ub3V0bGluZSA9IG5ldyBDb25zdGFudFByb3BlcnR5KHRydWUpO1xuICBwb2x5Z29uLm91dGxpbmVDb2xvciA9IG91dGxpbmVDb2xvclByb3BlcnR5O1xuICBwb2x5Z29uLm91dGxpbmVXaWR0aCA9IHdpZHRoUHJvcGVydHk7XG4gIHBvbHlnb24ubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgcG9seWdvbi5hcmNUeXBlID0gQXJjVHlwZS5SSFVNQjtcblxuICB2YXIgaG9sZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaG9sZXMucHVzaChcbiAgICAgIG5ldyBQb2x5Z29uSGllcmFyY2h5KFxuICAgICAgICBjb29yZGluYXRlc0FycmF5VG9DYXJ0ZXNpYW5BcnJheShjb29yZGluYXRlc1tpXSwgY3JzRnVuY3Rpb24pXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbnMgPSBjb29yZGluYXRlc1swXTtcbiAgcG9seWdvbi5oaWVyYXJjaHkgPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eShcbiAgICBuZXcgUG9seWdvbkhpZXJhcmNoeShcbiAgICAgIGNvb3JkaW5hdGVzQXJyYXlUb0NhcnRlc2lhbkFycmF5KHBvc2l0aW9ucywgY3JzRnVuY3Rpb24pLFxuICAgICAgaG9sZXNcbiAgICApXG4gICk7XG4gIGlmIChwb3NpdGlvbnNbMF0ubGVuZ3RoID4gMikge1xuICAgIHBvbHlnb24ucGVyUG9zaXRpb25IZWlnaHQgPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eSh0cnVlKTtcbiAgfSBlbHNlIGlmICghb3B0aW9ucy5jbGFtcFRvR3JvdW5kKSB7XG4gICAgcG9seWdvbi5oZWlnaHQgPSAwO1xuICB9XG5cbiAgdmFyIGVudGl0eSA9IGNyZWF0ZU9iamVjdChcbiAgICBnZW9Kc29uLFxuICAgIGRhdGFTb3VyY2UuX2VudGl0eUNvbGxlY3Rpb24sXG4gICAgb3B0aW9ucy5kZXNjcmliZVxuICApO1xuICBlbnRpdHkucG9seWdvbiA9IHBvbHlnb247XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NQb2x5Z29uKGRhdGFTb3VyY2UsIGdlb0pzb24sIGdlb21ldHJ5LCBjcnNGdW5jdGlvbiwgb3B0aW9ucykge1xuICBjcmVhdGVQb2x5Z29uKFxuICAgIGRhdGFTb3VyY2UsXG4gICAgZ2VvSnNvbixcbiAgICBjcnNGdW5jdGlvbixcbiAgICBnZW9tZXRyeS5jb29yZGluYXRlcyxcbiAgICBvcHRpb25zXG4gICk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NNdWx0aVBvbHlnb24oXG4gIGRhdGFTb3VyY2UsXG4gIGdlb0pzb24sXG4gIGdlb21ldHJ5LFxuICBjcnNGdW5jdGlvbixcbiAgb3B0aW9uc1xuKSB7XG4gIHZhciBwb2x5Z29ucyA9IGdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgY3JlYXRlUG9seWdvbihkYXRhU291cmNlLCBnZW9Kc29uLCBjcnNGdW5jdGlvbiwgcG9seWdvbnNbaV0sIG9wdGlvbnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NUb3BvbG9neShkYXRhU291cmNlLCBnZW9Kc29uLCBnZW9tZXRyeSwgY3JzRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gZ2VvbWV0cnkub2JqZWN0cykge1xuICAgIGlmIChnZW9tZXRyeS5vYmplY3RzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xuICAgICAgdmFyIGZlYXR1cmUgPSB0b3BvanNvbi5mZWF0dXJlKGdlb21ldHJ5LCBnZW9tZXRyeS5vYmplY3RzW3Byb3BlcnR5XSk7XG4gICAgICB2YXIgdHlwZUhhbmRsZXIgPSBnZW9Kc29uT2JqZWN0VHlwZXNbZmVhdHVyZS50eXBlXTtcbiAgICAgIHR5cGVIYW5kbGVyKGRhdGFTb3VyY2UsIGZlYXR1cmUsIGZlYXR1cmUsIGNyc0Z1bmN0aW9uLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHZW9Kc29uRGF0YVNvdXJjZS5Mb2FkT3B0aW9uc1xuICpcbiAqIEluaXRpYWxpemF0aW9uIG9wdGlvbnMgZm9yIHRoZSBgbG9hZGAgbWV0aG9kLlxuICpcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbc291cmNlVXJpXSBPdmVycmlkZXMgdGhlIHVybCB0byB1c2UgZm9yIHJlc29sdmluZyByZWxhdGl2ZSBsaW5rcy5cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbbWFya2VyU2l6ZT1HZW9Kc29uRGF0YVNvdXJjZS5tYXJrZXJTaXplXSBUaGUgZGVmYXVsdCBzaXplIG9mIHRoZSBtYXAgcGluIGNyZWF0ZWQgZm9yIGVhY2ggcG9pbnQsIGluIHBpeGVscy5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbbWFya2VyU3ltYm9sPUdlb0pzb25EYXRhU291cmNlLm1hcmtlclN5bWJvbF0gVGhlIGRlZmF1bHQgc3ltYm9sIG9mIHRoZSBtYXAgcGluIGNyZWF0ZWQgZm9yIGVhY2ggcG9pbnQuXG4gKiBAcHJvcGVydHkge0NvbG9yfSBbbWFya2VyQ29sb3I9R2VvSnNvbkRhdGFTb3VyY2UubWFya2VyQ29sb3JdIFRoZSBkZWZhdWx0IGNvbG9yIG9mIHRoZSBtYXAgcGluIGNyZWF0ZWQgZm9yIGVhY2ggcG9pbnQuXG4gKiBAcHJvcGVydHkge0NvbG9yfSBbc3Ryb2tlPUdlb0pzb25EYXRhU291cmNlLnN0cm9rZV0gVGhlIGRlZmF1bHQgY29sb3Igb2YgcG9seWxpbmVzIGFuZCBwb2x5Z29uIG91dGxpbmVzLlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtzdHJva2VXaWR0aD1HZW9Kc29uRGF0YVNvdXJjZS5zdHJva2VXaWR0aF0gVGhlIGRlZmF1bHQgd2lkdGggb2YgcG9seWxpbmVzIGFuZCBwb2x5Z29uIG91dGxpbmVzLlxuICogQHByb3BlcnR5IHtDb2xvcn0gW2ZpbGw9R2VvSnNvbkRhdGFTb3VyY2UuZmlsbF0gVGhlIGRlZmF1bHQgY29sb3IgZm9yIHBvbHlnb24gaW50ZXJpb3JzLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbY2xhbXBUb0dyb3VuZD1HZW9Kc29uRGF0YVNvdXJjZS5jbGFtcFRvR3JvdW5kXSB0cnVlIGlmIHdlIHdhbnQgdGhlIGdlb21ldHJ5IGZlYXR1cmVzIChwb2x5Z29ucyBvciBsaW5lc3RyaW5ncykgY2xhbXBlZCB0byB0aGUgZ3JvdW5kLlxuICogQHByb3BlcnR5IHtDcmVkaXR8U3RyaW5nfSBbY3JlZGl0XSBBIGNyZWRpdCBmb3IgdGhlIGRhdGEgc291cmNlLCB3aGljaCBpcyBkaXNwbGF5ZWQgb24gdGhlIGNhbnZhcy5cbiAqL1xuXG4vKipcbiAqIEEge0BsaW5rIERhdGFTb3VyY2V9IHdoaWNoIHByb2Nlc3NlcyBib3RoXG4gKiB7QGxpbmsgaHR0cDovL3d3dy5nZW9qc29uLm9yZy98R2VvSlNPTn0gYW5kIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbWJvc3RvY2svdG9wb2pzb258VG9wb0pTT059IGRhdGEuXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9zaW1wbGVzdHlsZS1zcGVjfHNpbXBsZXN0eWxlLXNwZWN9IHByb3BlcnRpZXMgd2lsbCBhbHNvIGJlIHVzZWQgaWYgdGhleVxuICogYXJlIHByZXNlbnQuXG4gKlxuICogQGFsaWFzIEdlb0pzb25EYXRhU291cmNlXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gW25hbWVdIFRoZSBuYW1lIG9mIHRoaXMgZGF0YSBzb3VyY2UuICBJZiB1bmRlZmluZWQsIGEgbmFtZSB3aWxsIGJlIHRha2VuIGZyb21cbiAqICAgICAgICAgICAgICAgICAgICAgICAgdGhlIG5hbWUgb2YgdGhlIEdlb0pTT04gZmlsZS5cbiAqXG4gKiBAZGVtbyB7QGxpbmsgaHR0cHM6Ly9zYW5kY2FzdGxlLmNlc2l1bS5jb20vaW5kZXguaHRtbD9zcmM9R2VvSlNPTiUyMGFuZCUyMFRvcG9KU09OLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgR2VvSlNPTiBhbmQgVG9wb0pTT04gRGVtb31cbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1HZW9KU09OJTIwc2ltcGxlc3R5bGUuaHRtbHxDZXNpdW0gU2FuZGNhc3RsZSBHZW9KU09OIHNpbXBsZXN0eWxlIERlbW99XG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciB2aWV3ZXIgPSBuZXcgQ2VzaXVtLlZpZXdlcignY2VzaXVtQ29udGFpbmVyJyk7XG4gKiB2aWV3ZXIuZGF0YVNvdXJjZXMuYWRkKENlc2l1bS5HZW9Kc29uRGF0YVNvdXJjZS5sb2FkKCcuLi8uLi9TYW1wbGVEYXRhL25lXzEwbV91c19zdGF0ZXMudG9wb2pzb24nLCB7XG4gKiAgIHN0cm9rZTogQ2VzaXVtLkNvbG9yLkhPVFBJTkssXG4gKiAgIGZpbGw6IENlc2l1bS5Db2xvci5QSU5LLFxuICogICBzdHJva2VXaWR0aDogMyxcbiAqICAgbWFya2VyU3ltYm9sOiAnPydcbiAqIH0pKTtcbiAqL1xuZnVuY3Rpb24gR2VvSnNvbkRhdGFTb3VyY2UobmFtZSkge1xuICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgdGhpcy5fY2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9lcnJvciA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9pc0xvYWRpbmcgPSBmYWxzZTtcbiAgdGhpcy5fbG9hZGluZyA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9lbnRpdHlDb2xsZWN0aW9uID0gbmV3IEVudGl0eUNvbGxlY3Rpb24odGhpcyk7XG4gIHRoaXMuX3Byb21pc2VzID0gW107XG4gIHRoaXMuX3BpbkJ1aWxkZXIgPSBuZXcgUGluQnVpbGRlcigpO1xuICB0aGlzLl9lbnRpdHlDbHVzdGVyID0gbmV3IEVudGl0eUNsdXN0ZXIoKTtcbiAgdGhpcy5fY3JlZGl0ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9yZXNvdXJjZUNyZWRpdHMgPSBbXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJvbWlzZSB0byBhIG5ldyBpbnN0YW5jZSBsb2FkZWQgd2l0aCB0aGUgcHJvdmlkZWQgR2VvSlNPTiBvciBUb3BvSlNPTiBkYXRhLlxuICpcbiAqIEBwYXJhbSB7UmVzb3VyY2V8U3RyaW5nfE9iamVjdH0gZGF0YSBBIHVybCwgR2VvSlNPTiBvYmplY3QsIG9yIFRvcG9KU09OIG9iamVjdCB0byBiZSBsb2FkZWQuXG4gKiBAcGFyYW0ge0dlb0pzb25EYXRhU291cmNlLkxvYWRPcHRpb25zfSBbb3B0aW9uc10gQW4gb2JqZWN0IHNwZWNpZnlpbmcgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gKlxuICogQHJldHVybnMge1Byb21pc2UuPEdlb0pzb25EYXRhU291cmNlPn0gQSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHdoZW4gdGhlIGRhdGEgaXMgbG9hZGVkLlxuICovXG5HZW9Kc29uRGF0YVNvdXJjZS5sb2FkID0gZnVuY3Rpb24gKGRhdGEsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG5ldyBHZW9Kc29uRGF0YVNvdXJjZSgpLmxvYWQoZGF0YSwgb3B0aW9ucyk7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhHZW9Kc29uRGF0YVNvdXJjZSwge1xuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBkZWZhdWx0IHNpemUgb2YgdGhlIG1hcCBwaW4gY3JlYXRlZCBmb3IgZWFjaCBwb2ludCwgaW4gcGl4ZWxzLlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2VcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgNDhcbiAgICovXG4gIG1hcmtlclNpemU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0TWFya2VyU2l6ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBkZWZhdWx0TWFya2VyU2l6ZSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGRlZmF1bHQgc3ltYm9sIG9mIHRoZSBtYXAgcGluIGNyZWF0ZWQgZm9yIGVhY2ggcG9pbnQuXG4gICAqIFRoaXMgY2FuIGJlIGFueSB2YWxpZCB7QGxpbmsgaHR0cDovL21hcGJveC5jb20vbWFraS98TWFraX0gaWRlbnRpZmllciwgYW55IHNpbmdsZSBjaGFyYWN0ZXIsXG4gICAqIG9yIGJsYW5rIGlmIG5vIHN5bWJvbCBpcyB0byBiZSB1c2VkLlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2VcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIG1hcmtlclN5bWJvbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRNYXJrZXJTeW1ib2w7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgZGVmYXVsdE1hcmtlclN5bWJvbCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGRlZmF1bHQgY29sb3Igb2YgdGhlIG1hcCBwaW4gY3JlYXRlZCBmb3IgZWFjaCBwb2ludC5cbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlXG4gICAqIEB0eXBlIHtDb2xvcn1cbiAgICogQGRlZmF1bHQgQ29sb3IuUk9ZQUxCTFVFXG4gICAqL1xuICBtYXJrZXJDb2xvcjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRNYXJrZXJDb2xvcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBkZWZhdWx0TWFya2VyQ29sb3IgPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBkZWZhdWx0IGNvbG9yIG9mIHBvbHlsaW5lcyBhbmQgcG9seWdvbiBvdXRsaW5lcy5cbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlXG4gICAqIEB0eXBlIHtDb2xvcn1cbiAgICogQGRlZmF1bHQgQ29sb3IuQkxBQ0tcbiAgICovXG4gIHN0cm9rZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRTdHJva2U7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgZGVmYXVsdFN0cm9rZSA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGRlZmF1bHQgd2lkdGggb2YgcG9seWxpbmVzIGFuZCBwb2x5Z29uIG91dGxpbmVzLlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2VcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMi4wXG4gICAqL1xuICBzdHJva2VXaWR0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRTdHJva2VXaWR0aDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBkZWZhdWx0U3Ryb2tlV2lkdGggPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIGRlZmF1bHQgY29sb3IgZm9yIHBvbHlnb24gaW50ZXJpb3JzLlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2VcbiAgICogQHR5cGUge0NvbG9yfVxuICAgKiBAZGVmYXVsdCBDb2xvci5ZRUxMT1dcbiAgICovXG4gIGZpbGw6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0RmlsbDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBkZWZhdWx0RmlsbCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgZGVmYXVsdCBvZiB3aGV0aGVyIHRvIGNsYW1wIHRvIHRoZSBncm91bmQuXG4gICAqIEBtZW1iZXJvZiBHZW9Kc29uRGF0YVNvdXJjZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGNsYW1wVG9Hcm91bmQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0Q2xhbXBUb0dyb3VuZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBkZWZhdWx0Q2xhbXBUb0dyb3VuZCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW4gb2JqZWN0IHRoYXQgbWFwcyB0aGUgbmFtZSBvZiBhIGNycyB0byBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGEgR2VvSlNPTiBjb29yZGluYXRlXG4gICAqIGFuZCB0cmFuc2Zvcm1zIGl0IGludG8gYSBXR1M4NCBFYXJ0aC1maXhlZCBDYXJ0ZXNpYW4uICBPbGRlciB2ZXJzaW9ucyBvZiBHZW9KU09OIHdoaWNoXG4gICAqIHN1cHBvcnRlZCB0aGUgRVBTRyB0eXBlIGNhbiBiZSBhZGRlZCB0byB0aGlzIGxpc3QgYXMgd2VsbCwgYnkgc3BlY2lmeWluZyB0aGUgY29tcGxldGUgRVBTRyBuYW1lLFxuICAgKiBmb3IgZXhhbXBsZSAnRVBTRzo0MzI2Jy5cbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBjcnNOYW1lczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNyc05hbWVzO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW4gb2JqZWN0IHRoYXQgbWFwcyB0aGUgaHJlZiBwcm9wZXJ0eSBvZiBhIGNycyBsaW5rIHRvIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICogd2hpY2ggdGFrZXMgdGhlIGNycyBwcm9wZXJ0aWVzIG9iamVjdCBhbmQgcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlc1xuICAgKiB0byBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBHZW9KU09OIGNvb3JkaW5hdGUgYW5kIHRyYW5zZm9ybXMgaXQgaW50byBhIFdHUzg0IEVhcnRoLWZpeGVkIENhcnRlc2lhbi5cbiAgICogSXRlbXMgaW4gdGhpcyBvYmplY3QgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhvc2UgZGVmaW5lZCBpbiA8Y29kZT5jcnNMaW5rSHJlZnM8L2NvZGU+LCBhc3N1bWluZ1xuICAgKiB0aGUgbGluayBoYXMgYSB0eXBlIHNwZWNpZmllZC5cbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBjcnNMaW5rSHJlZnM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjcnNMaW5rSHJlZnM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhbiBvYmplY3QgdGhhdCBtYXBzIHRoZSB0eXBlIHByb3BlcnR5IG9mIGEgY3JzIGxpbmsgdG8gYSBjYWxsYmFjayBmdW5jdGlvblxuICAgKiB3aGljaCB0YWtlcyB0aGUgY3JzIHByb3BlcnRpZXMgb2JqZWN0IGFuZCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzXG4gICAqIHRvIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIEdlb0pTT04gY29vcmRpbmF0ZSBhbmQgdHJhbnNmb3JtcyBpdCBpbnRvIGEgV0dTODQgRWFydGgtZml4ZWQgQ2FydGVzaWFuLlxuICAgKiBJdGVtcyBpbiA8Y29kZT5jcnNMaW5rSHJlZnM8L2NvZGU+IHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoaXMgb2JqZWN0LlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2VcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIGNyc0xpbmtUeXBlczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNyc0xpbmtUeXBlcztcbiAgICB9LFxuICB9LFxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdlb0pzb25EYXRhU291cmNlLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyBvciBzZXRzIGEgaHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhpcyBpbnN0YW5jZS5cbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgbmFtZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuX25hbWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fY2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBUaGlzIERhdGFTb3VyY2Ugb25seSBkZWZpbmVzIHN0YXRpYyBkYXRhLCB0aGVyZWZvcmUgdGhpcyBwcm9wZXJ0eSBpcyBhbHdheXMgdW5kZWZpbmVkLlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2UucHJvdG90eXBlXG4gICAqIEB0eXBlIHtEYXRhU291cmNlQ2xvY2t9XG4gICAqL1xuICBjbG9jazoge1xuICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgd3JpdGFibGU6IGZhbHNlLFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgY29sbGVjdGlvbiBvZiB7QGxpbmsgRW50aXR5fSBpbnN0YW5jZXMuXG4gICAqIEBtZW1iZXJvZiBHZW9Kc29uRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0VudGl0eUNvbGxlY3Rpb259XG4gICAqL1xuICBlbnRpdGllczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2VudGl0eUNvbGxlY3Rpb247XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoZSBkYXRhIHNvdXJjZSBpcyBjdXJyZW50bHkgbG9hZGluZyBkYXRhLlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2UucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgaXNMb2FkaW5nOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faXNMb2FkaW5nO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIGFuIGV2ZW50IHRoYXQgd2lsbCBiZSByYWlzZWQgd2hlbiB0aGUgdW5kZXJseWluZyBkYXRhIGNoYW5nZXMuXG4gICAqIEBtZW1iZXJvZiBHZW9Kc29uRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKi9cbiAgY2hhbmdlZEV2ZW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hhbmdlZDtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhbiBldmVudCB0aGF0IHdpbGwgYmUgcmFpc2VkIGlmIGFuIGVycm9yIGlzIGVuY291bnRlcmVkIGR1cmluZyBwcm9jZXNzaW5nLlxuICAgKiBAbWVtYmVyb2YgR2VvSnNvbkRhdGFTb3VyY2UucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICovXG4gIGVycm9yRXZlbnQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhbiBldmVudCB0aGF0IHdpbGwgYmUgcmFpc2VkIHdoZW4gdGhlIGRhdGEgc291cmNlIGVpdGhlciBzdGFydHMgb3Igc3RvcHMgbG9hZGluZy5cbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqL1xuICBsb2FkaW5nRXZlbnQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9sb2FkaW5nO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHdoZXRoZXIgb3Igbm90IHRoaXMgZGF0YSBzb3VyY2Ugc2hvdWxkIGJlIGRpc3BsYXllZC5cbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIHNob3c6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbnRpdHlDb2xsZWN0aW9uLnNob3c7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fZW50aXR5Q29sbGVjdGlvbi5zaG93ID0gdmFsdWU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBjbHVzdGVyaW5nIG9wdGlvbnMgZm9yIHRoaXMgZGF0YSBzb3VyY2UuIFRoaXMgb2JqZWN0IGNhbiBiZSBzaGFyZWQgYmV0d2VlbiBtdWx0aXBsZSBkYXRhIHNvdXJjZXMuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHZW9Kc29uRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0VudGl0eUNsdXN0ZXJ9XG4gICAqL1xuICBjbHVzdGVyaW5nOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZW50aXR5Q2x1c3RlcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ2YWx1ZSBtdXN0IGJlIGRlZmluZWQuXCIpO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICB0aGlzLl9lbnRpdHlDbHVzdGVyID0gdmFsdWU7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGNyZWRpdCB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIGZvciB0aGUgZGF0YSBzb3VyY2VcbiAgICogQG1lbWJlcm9mIEdlb0pzb25EYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q3JlZGl0fVxuICAgKi9cbiAgY3JlZGl0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY3JlZGl0O1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBsb2FkcyB0aGUgcHJvdmlkZWQgR2VvSlNPTiBvciBUb3BvSlNPTiBkYXRhLCByZXBsYWNpbmcgYW55IGV4aXN0aW5nIGRhdGEuXG4gKlxuICogQHBhcmFtIHtSZXNvdXJjZXxTdHJpbmd8T2JqZWN0fSBkYXRhIEEgdXJsLCBHZW9KU09OIG9iamVjdCwgb3IgVG9wb0pTT04gb2JqZWN0IHRvIGJlIGxvYWRlZC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnNvdXJjZVVyaV0gT3ZlcnJpZGVzIHRoZSB1cmwgdG8gdXNlIGZvciByZXNvbHZpbmcgcmVsYXRpdmUgbGlua3MuXG4gKiBAcGFyYW0ge0dlb0pzb25EYXRhU291cmNlLmRlc2NyaWJlfSBbb3B0aW9ucy5kZXNjcmliZT1HZW9Kc29uRGF0YVNvdXJjZS5kZWZhdWx0RGVzY3JpYmVQcm9wZXJ0eV0gQSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvcGVydHkgb2JqZWN0IChvciBqdXN0IGEgc3RyaW5nKSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGljaCBjb252ZXJ0cyB0aGUgcHJvcGVydGllcyBpbnRvIGFuIGh0bWwgZGVzY3JpcHRpb24uXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWFya2VyU2l6ZT1HZW9Kc29uRGF0YVNvdXJjZS5tYXJrZXJTaXplXSBUaGUgZGVmYXVsdCBzaXplIG9mIHRoZSBtYXAgcGluIGNyZWF0ZWQgZm9yIGVhY2ggcG9pbnQsIGluIHBpeGVscy5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5tYXJrZXJTeW1ib2w9R2VvSnNvbkRhdGFTb3VyY2UubWFya2VyU3ltYm9sXSBUaGUgZGVmYXVsdCBzeW1ib2wgb2YgdGhlIG1hcCBwaW4gY3JlYXRlZCBmb3IgZWFjaCBwb2ludC5cbiAqIEBwYXJhbSB7Q29sb3J9IFtvcHRpb25zLm1hcmtlckNvbG9yPUdlb0pzb25EYXRhU291cmNlLm1hcmtlckNvbG9yXSBUaGUgZGVmYXVsdCBjb2xvciBvZiB0aGUgbWFwIHBpbiBjcmVhdGVkIGZvciBlYWNoIHBvaW50LlxuICogQHBhcmFtIHtDb2xvcn0gW29wdGlvbnMuc3Ryb2tlPUdlb0pzb25EYXRhU291cmNlLnN0cm9rZV0gVGhlIGRlZmF1bHQgY29sb3Igb2YgcG9seWxpbmVzIGFuZCBwb2x5Z29uIG91dGxpbmVzLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLnN0cm9rZVdpZHRoPUdlb0pzb25EYXRhU291cmNlLnN0cm9rZVdpZHRoXSBUaGUgZGVmYXVsdCB3aWR0aCBvZiBwb2x5bGluZXMgYW5kIHBvbHlnb24gb3V0bGluZXMuXG4gKiBAcGFyYW0ge0NvbG9yfSBbb3B0aW9ucy5maWxsPUdlb0pzb25EYXRhU291cmNlLmZpbGxdIFRoZSBkZWZhdWx0IGNvbG9yIGZvciBwb2x5Z29uIGludGVyaW9ycy5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY2xhbXBUb0dyb3VuZD1HZW9Kc29uRGF0YVNvdXJjZS5jbGFtcFRvR3JvdW5kXSB0cnVlIGlmIHdlIHdhbnQgdGhlIGZlYXR1cmVzIGNsYW1wZWQgdG8gdGhlIGdyb3VuZC5cbiAqIEBwYXJhbSB7Q3JlZGl0fFN0cmluZ30gW29wdGlvbnMuY3JlZGl0XSBBIGNyZWRpdCBmb3IgdGhlIGRhdGEgc291cmNlLCB3aGljaCBpcyBkaXNwbGF5ZWQgb24gdGhlIGNhbnZhcy5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48R2VvSnNvbkRhdGFTb3VyY2U+fSBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgR2VvSlNPTiBpcyBsb2FkZWQuXG4gKi9cbkdlb0pzb25EYXRhU291cmNlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGRhdGEsIG9wdGlvbnMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGRhdGEpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiZGF0YSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgRGF0YVNvdXJjZS5zZXRMb2FkaW5nKHRoaXMsIHRydWUpO1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vIFVzZXIgc3BlY2lmaWVkIGNyZWRpdFxuICB2YXIgY3JlZGl0ID0gb3B0aW9ucy5jcmVkaXQ7XG4gIGlmICh0eXBlb2YgY3JlZGl0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY3JlZGl0ID0gbmV3IENyZWRpdChjcmVkaXQpO1xuICB9XG4gIHRoaXMuX2NyZWRpdCA9IGNyZWRpdDtcblxuICB2YXIgcHJvbWlzZSA9IGRhdGE7XG4gIHZhciBzb3VyY2VVcmkgPSBvcHRpb25zLnNvdXJjZVVyaTtcbiAgaWYgKHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiIHx8IGRhdGEgaW5zdGFuY2VvZiBSZXNvdXJjZSkge1xuICAgIGRhdGEgPSBSZXNvdXJjZS5jcmVhdGVJZk5lZWRlZChkYXRhKTtcbiAgICBwcm9taXNlID0gZGF0YS5mZXRjaEpzb24oKTtcbiAgICBzb3VyY2VVcmkgPSBkZWZhdWx0VmFsdWUoc291cmNlVXJpLCBkYXRhLmdldFVybENvbXBvbmVudCgpKTtcblxuICAgIC8vIEFkZCByZXNvdXJjZSBjcmVkaXRzIHRvIG91ciBsaXN0IG9mIGNyZWRpdHMgdG8gZGlzcGxheVxuICAgIHZhciByZXNvdXJjZUNyZWRpdHMgPSB0aGlzLl9yZXNvdXJjZUNyZWRpdHM7XG4gICAgdmFyIGNyZWRpdHMgPSBkYXRhLmNyZWRpdHM7XG4gICAgaWYgKGRlZmluZWQoY3JlZGl0cykpIHtcbiAgICAgIHZhciBsZW5ndGggPSBjcmVkaXRzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzb3VyY2VDcmVkaXRzLnB1c2goY3JlZGl0c1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb3B0aW9ucyA9IHtcbiAgICBkZXNjcmliZTogZGVmYXVsdFZhbHVlKG9wdGlvbnMuZGVzY3JpYmUsIGRlZmF1bHREZXNjcmliZVByb3BlcnR5KSxcbiAgICBtYXJrZXJTaXplOiBkZWZhdWx0VmFsdWUob3B0aW9ucy5tYXJrZXJTaXplLCBkZWZhdWx0TWFya2VyU2l6ZSksXG4gICAgbWFya2VyU3ltYm9sOiBkZWZhdWx0VmFsdWUob3B0aW9ucy5tYXJrZXJTeW1ib2wsIGRlZmF1bHRNYXJrZXJTeW1ib2wpLFxuICAgIG1hcmtlckNvbG9yOiBkZWZhdWx0VmFsdWUob3B0aW9ucy5tYXJrZXJDb2xvciwgZGVmYXVsdE1hcmtlckNvbG9yKSxcbiAgICBzdHJva2VXaWR0aFByb3BlcnR5OiBuZXcgQ29uc3RhbnRQcm9wZXJ0eShcbiAgICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLnN0cm9rZVdpZHRoLCBkZWZhdWx0U3Ryb2tlV2lkdGgpXG4gICAgKSxcbiAgICBzdHJva2VNYXRlcmlhbFByb3BlcnR5OiBuZXcgQ29sb3JNYXRlcmlhbFByb3BlcnR5KFxuICAgICAgZGVmYXVsdFZhbHVlKG9wdGlvbnMuc3Ryb2tlLCBkZWZhdWx0U3Ryb2tlKVxuICAgICksXG4gICAgZmlsbE1hdGVyaWFsUHJvcGVydHk6IG5ldyBDb2xvck1hdGVyaWFsUHJvcGVydHkoXG4gICAgICBkZWZhdWx0VmFsdWUob3B0aW9ucy5maWxsLCBkZWZhdWx0RmlsbClcbiAgICApLFxuICAgIGNsYW1wVG9Hcm91bmQ6IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNsYW1wVG9Hcm91bmQsIGRlZmF1bHRDbGFtcFRvR3JvdW5kKSxcbiAgfTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHJldHVybiB3aGVuKHByb21pc2UsIGZ1bmN0aW9uIChnZW9Kc29uKSB7XG4gICAgcmV0dXJuIGxvYWQodGhhdCwgZ2VvSnNvbiwgb3B0aW9ucywgc291cmNlVXJpKTtcbiAgfSkub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgIERhdGFTb3VyY2Uuc2V0TG9hZGluZyh0aGF0LCBmYWxzZSk7XG4gICAgdGhhdC5fZXJyb3IucmFpc2VFdmVudCh0aGF0LCBlcnJvcik7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIHJldHVybiB3aGVuLnJlamVjdChlcnJvcik7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBkYXRhIHNvdXJjZSB0byB0aGUgcHJvdmlkZWQgdGltZS4gIFRoaXMgZnVuY3Rpb24gaXMgb3B0aW9uYWwgYW5kXG4gKiBpcyBub3QgcmVxdWlyZWQgdG8gYmUgaW1wbGVtZW50ZWQuICBJdCBpcyBwcm92aWRlZCBmb3IgZGF0YSBzb3VyY2VzIHdoaWNoXG4gKiByZXRyaWV2ZSBkYXRhIGJhc2VkIG9uIHRoZSBjdXJyZW50IGFuaW1hdGlvbiB0aW1lIG9yIHNjZW5lIHN0YXRlLlxuICogSWYgaW1wbGVtZW50ZWQsIHVwZGF0ZSB3aWxsIGJlIGNhbGxlZCBieSB7QGxpbmsgRGF0YVNvdXJjZURpc3BsYXl9IG9uY2UgYSBmcmFtZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHNpbXVsYXRpb24gdGltZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoaXMgZGF0YSBzb3VyY2UgaXMgcmVhZHkgdG8gYmUgZGlzcGxheWVkIGF0IHRoZSBwcm92aWRlZCB0aW1lLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbkdlb0pzb25EYXRhU291cmNlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodGltZSkge1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmZ1bmN0aW9uIGxvYWQodGhhdCwgZ2VvSnNvbiwgb3B0aW9ucywgc291cmNlVXJpKSB7XG4gIHZhciBuYW1lO1xuICBpZiAoZGVmaW5lZChzb3VyY2VVcmkpKSB7XG4gICAgbmFtZSA9IGdldEZpbGVuYW1lRnJvbVVyaShzb3VyY2VVcmkpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQobmFtZSkgJiYgdGhhdC5fbmFtZSAhPT0gbmFtZSkge1xuICAgIHRoYXQuX25hbWUgPSBuYW1lO1xuICAgIHRoYXQuX2NoYW5nZWQucmFpc2VFdmVudCh0aGF0KTtcbiAgfVxuXG4gIHZhciB0eXBlSGFuZGxlciA9IGdlb0pzb25PYmplY3RUeXBlc1tnZW9Kc29uLnR5cGVdO1xuICBpZiAoIWRlZmluZWQodHlwZUhhbmRsZXIpKSB7XG4gICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcIlVuc3VwcG9ydGVkIEdlb0pTT04gb2JqZWN0IHR5cGU6IFwiICsgZ2VvSnNvbi50eXBlKTtcbiAgfVxuXG4gIC8vQ2hlY2sgZm9yIGEgQ29vcmRpbmF0ZSBSZWZlcmVuY2UgU3lzdGVtLlxuICB2YXIgY3JzID0gZ2VvSnNvbi5jcnM7XG4gIHZhciBjcnNGdW5jdGlvbiA9IGNycyAhPT0gbnVsbCA/IGRlZmF1bHRDcnNGdW5jdGlvbiA6IG51bGw7XG5cbiAgaWYgKGRlZmluZWQoY3JzKSkge1xuICAgIGlmICghZGVmaW5lZChjcnMucHJvcGVydGllcykpIHtcbiAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJjcnMucHJvcGVydGllcyBpcyB1bmRlZmluZWQuXCIpO1xuICAgIH1cblxuICAgIHZhciBwcm9wZXJ0aWVzID0gY3JzLnByb3BlcnRpZXM7XG4gICAgaWYgKGNycy50eXBlID09PSBcIm5hbWVcIikge1xuICAgICAgY3JzRnVuY3Rpb24gPSBjcnNOYW1lc1twcm9wZXJ0aWVzLm5hbWVdO1xuICAgICAgaWYgKCFkZWZpbmVkKGNyc0Z1bmN0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFwiVW5rbm93biBjcnMgbmFtZTogXCIgKyBwcm9wZXJ0aWVzLm5hbWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY3JzLnR5cGUgPT09IFwibGlua1wiKSB7XG4gICAgICB2YXIgaGFuZGxlciA9IGNyc0xpbmtIcmVmc1twcm9wZXJ0aWVzLmhyZWZdO1xuICAgICAgaWYgKCFkZWZpbmVkKGhhbmRsZXIpKSB7XG4gICAgICAgIGhhbmRsZXIgPSBjcnNMaW5rVHlwZXNbcHJvcGVydGllcy50eXBlXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkZWZpbmVkKGhhbmRsZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgXCJVbmFibGUgdG8gcmVzb2x2ZSBjcnMgbGluazogXCIgKyBKU09OLnN0cmluZ2lmeShwcm9wZXJ0aWVzKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjcnNGdW5jdGlvbiA9IGhhbmRsZXIocHJvcGVydGllcyk7XG4gICAgfSBlbHNlIGlmIChjcnMudHlwZSA9PT0gXCJFUFNHXCIpIHtcbiAgICAgIGNyc0Z1bmN0aW9uID0gY3JzTmFtZXNbXCJFUFNHOlwiICsgcHJvcGVydGllcy5jb2RlXTtcbiAgICAgIGlmICghZGVmaW5lZChjcnNGdW5jdGlvbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcIlVua25vd24gY3JzIEVQU0cgY29kZTogXCIgKyBwcm9wZXJ0aWVzLmNvZGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFwiVW5rbm93biBjcnMgdHlwZTogXCIgKyBjcnMudHlwZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdoZW4oY3JzRnVuY3Rpb24sIGZ1bmN0aW9uIChjcnNGdW5jdGlvbikge1xuICAgIHRoYXQuX2VudGl0eUNvbGxlY3Rpb24ucmVtb3ZlQWxsKCk7XG5cbiAgICAvLyBudWxsIGlzIGEgdmFsaWQgdmFsdWUgZm9yIHRoZSBjcnMsIGJ1dCBtZWFucyB0aGUgZW50aXJlIGxvYWQgcHJvY2VzcyBiZWNvbWVzIGEgbm8tb3BcbiAgICAvLyBiZWNhdXNlIHdlIGNhbid0IGFzc3VtZSBhbnl0aGluZyBhYm91dCB0aGUgY29vcmRpbmF0ZXMuXG4gICAgaWYgKGNyc0Z1bmN0aW9uICE9PSBudWxsKSB7XG4gICAgICB0eXBlSGFuZGxlcih0aGF0LCBnZW9Kc29uLCBnZW9Kc29uLCBjcnNGdW5jdGlvbiwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdoZW4uYWxsKHRoYXQuX3Byb21pc2VzLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGF0Ll9wcm9taXNlcy5sZW5ndGggPSAwO1xuICAgICAgRGF0YVNvdXJjZS5zZXRMb2FkaW5nKHRoYXQsIGZhbHNlKTtcbiAgICAgIHJldHVybiB0aGF0O1xuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaGlzIGNhbGxiYWNrIGlzIGRpc3BsYXllZCBhcyBwYXJ0IG9mIHRoZSBHZW9Kc29uRGF0YVNvdXJjZSBjbGFzcy5cbiAqIEBjYWxsYmFjayBHZW9Kc29uRGF0YVNvdXJjZS5kZXNjcmliZVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgVGhlIHByb3BlcnRpZXMgb2YgdGhlIGZlYXR1cmUuXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVByb3BlcnR5IFRoZSBwcm9wZXJ0eSBrZXkgdGhhdCBDZXNpdW0gZXN0aW1hdGVzIHRvIGhhdmUgdGhlIG5hbWUgb2YgdGhlIGZlYXR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IEdlb0pzb25EYXRhU291cmNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4157\n')},17045:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(47861);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(14459);\n/* harmony import */ var _Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22841);\n/* harmony import */ var _Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(27671);\n/* harmony import */ var _Scene_ClassificationType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(73001);\n/* harmony import */ var _Scene_ShadowMode_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(34125);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(20174);\n/* harmony import */ var _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(612);\n/* harmony import */ var _Entity_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(11895);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar defaultMaterial = new _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z(_Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].WHITE */ .Z.WHITE);\nvar defaultShow = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(true);\nvar defaultFill = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(true);\nvar defaultOutline = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(false);\nvar defaultOutlineColor = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(_Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].BLACK */ .Z.BLACK);\nvar defaultShadows = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(_Scene_ShadowMode_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].DISABLED */ .Z.DISABLED);\nvar defaultDistanceDisplayCondition = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(\n  new _Core_DistanceDisplayCondition_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z()\n);\nvar defaultClassificationType = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(_Scene_ClassificationType_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].BOTH */ .Z.BOTH);\n\n/**\n * An abstract class for updating geometry entities.\n * @alias GeometryUpdater\n * @constructor\n *\n * @param {Object} options An object with the following properties:\n * @param {Entity} options.entity The entity containing the geometry to be visualized.\n * @param {Scene} options.scene The scene where visualization is taking place.\n * @param {Object} options.geometryOptions Options for the geometry\n * @param {String} options.geometryPropertyName The geometry property name\n * @param {String[]} options.observedPropertyNames The entity properties this geometry cares about\n */\nfunction GeometryUpdater(options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("options.entity", options.entity);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("options.scene", options.scene);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("options.geometryOptions", options.geometryOptions);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("options.geometryPropertyName", options.geometryPropertyName);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("options.observedPropertyNames", options.observedPropertyNames);\n  //>>includeEnd(\'debug\');\n\n  var entity = options.entity;\n  var geometryPropertyName = options.geometryPropertyName;\n\n  this._entity = entity;\n  this._scene = options.scene;\n  this._fillEnabled = false;\n  this._isClosed = false;\n  this._onTerrain = false;\n  this._dynamic = false;\n  this._outlineEnabled = false;\n  this._geometryChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n  this._showProperty = undefined;\n  this._materialProperty = undefined;\n  this._showOutlineProperty = undefined;\n  this._outlineColorProperty = undefined;\n  this._outlineWidth = 1.0;\n  this._shadowsProperty = undefined;\n  this._distanceDisplayConditionProperty = undefined;\n  this._classificationTypeProperty = undefined;\n  this._options = options.geometryOptions;\n  this._geometryPropertyName = geometryPropertyName;\n  this._id = geometryPropertyName + "-" + entity.id;\n  this._observedPropertyNames = options.observedPropertyNames;\n  this._supportsMaterialsforEntitiesOnTerrain = _Entity_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].supportsMaterialsforEntitiesOnTerrain */ .Z.supportsMaterialsforEntitiesOnTerrain(\n    options.scene\n  );\n}\n\nObject.defineProperties(GeometryUpdater.prototype, {\n  /**\n   * Gets the unique ID associated with this updater\n   * @memberof GeometryUpdater.prototype\n   * @type {String}\n   * @readonly\n   */\n  id: {\n    get: function () {\n      return this._id;\n    },\n  },\n  /**\n   * Gets the entity associated with this geometry.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Entity}\n   * @readonly\n   */\n  entity: {\n    get: function () {\n      return this._entity;\n    },\n  },\n  /**\n   * Gets a value indicating if the geometry has a fill component.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  fillEnabled: {\n    get: function () {\n      return this._fillEnabled;\n    },\n  },\n  /**\n   * Gets a value indicating if fill visibility varies with simulation time.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  hasConstantFill: {\n    get: function () {\n      return (\n        !this._fillEnabled ||\n        (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(this._entity.availability) &&\n          _Property_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].isConstant */ .Z.isConstant(this._showProperty) &&\n          _Property_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].isConstant */ .Z.isConstant(this._fillProperty))\n      );\n    },\n  },\n  /**\n   * Gets the material property used to fill the geometry.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {MaterialProperty}\n   * @readonly\n   */\n  fillMaterialProperty: {\n    get: function () {\n      return this._materialProperty;\n    },\n  },\n  /**\n   * Gets a value indicating if the geometry has an outline component.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  outlineEnabled: {\n    get: function () {\n      return this._outlineEnabled;\n    },\n  },\n  /**\n   * Gets a value indicating if the geometry has an outline component.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  hasConstantOutline: {\n    get: function () {\n      return (\n        !this._outlineEnabled ||\n        (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(this._entity.availability) &&\n          _Property_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].isConstant */ .Z.isConstant(this._showProperty) &&\n          _Property_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].isConstant */ .Z.isConstant(this._showOutlineProperty))\n      );\n    },\n  },\n  /**\n   * Gets the {@link Color} property for the geometry outline.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Property}\n   * @readonly\n   */\n  outlineColorProperty: {\n    get: function () {\n      return this._outlineColorProperty;\n    },\n  },\n  /**\n   * Gets the constant with of the geometry outline, in pixels.\n   * This value is only valid if isDynamic is false.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Number}\n   * @readonly\n   */\n  outlineWidth: {\n    get: function () {\n      return this._outlineWidth;\n    },\n  },\n  /**\n   * Gets the property specifying whether the geometry\n   * casts or receives shadows from light sources.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Property}\n   * @readonly\n   */\n  shadowsProperty: {\n    get: function () {\n      return this._shadowsProperty;\n    },\n  },\n  /**\n   * Gets or sets the {@link DistanceDisplayCondition} Property specifying at what distance from the camera that this geometry will be displayed.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Property}\n   * @readonly\n   */\n  distanceDisplayConditionProperty: {\n    get: function () {\n      return this._distanceDisplayConditionProperty;\n    },\n  },\n  /**\n   * Gets or sets the {@link ClassificationType} Property specifying if this geometry will classify terrain, 3D Tiles, or both when on the ground.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Property}\n   * @readonly\n   */\n  classificationTypeProperty: {\n    get: function () {\n      return this._classificationTypeProperty;\n    },\n  },\n  /**\n   * Gets a value indicating if the geometry is time-varying.\n   * If true, all visualization is delegated to a DynamicGeometryUpdater\n   * returned by GeometryUpdater#createDynamicUpdater.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isDynamic: {\n    get: function () {\n      return this._dynamic;\n    },\n  },\n  /**\n   * Gets a value indicating if the geometry is closed.\n   * This property is only valid for static geometry.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isClosed: {\n    get: function () {\n      return this._isClosed;\n    },\n  },\n  /**\n   * Gets a value indicating if the geometry should be drawn on terrain.\n   * @memberof EllipseGeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  onTerrain: {\n    get: function () {\n      return this._onTerrain;\n    },\n  },\n  /**\n   * Gets an event that is raised whenever the public properties\n   * of this updater change.\n   * @memberof GeometryUpdater.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  geometryChanged: {\n    get: function () {\n      return this._geometryChanged;\n    },\n  },\n});\n\n/**\n * Checks if the geometry is outlined at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve visibility.\n * @returns {Boolean} true if geometry is outlined at the provided time, false otherwise.\n */\nGeometryUpdater.prototype.isOutlineVisible = function (time) {\n  var entity = this._entity;\n  var visible =\n    this._outlineEnabled &&\n    entity.isAvailable(time) &&\n    this._showProperty.getValue(time) &&\n    this._showOutlineProperty.getValue(time);\n  return (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(visible, false);\n};\n\n/**\n * Checks if the geometry is filled at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve visibility.\n * @returns {Boolean} true if geometry is filled at the provided time, false otherwise.\n */\nGeometryUpdater.prototype.isFilled = function (time) {\n  var entity = this._entity;\n  var visible =\n    this._fillEnabled &&\n    entity.isAvailable(time) &&\n    this._showProperty.getValue(time) &&\n    this._fillProperty.getValue(time);\n  return (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(visible, false);\n};\n\n/**\n * Creates the geometry instance which represents the fill of the geometry.\n *\n * @function\n * @param {JulianDate} time The time to use when retrieving initial attribute values.\n * @returns {GeometryInstance} The geometry instance representing the filled portion of the geometry.\n *\n * @exception {DeveloperError} This instance does not represent a filled geometry.\n */\nGeometryUpdater.prototype.createFillGeometryInstance =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Creates the geometry instance which represents the outline of the geometry.\n *\n * @function\n * @param {JulianDate} time The time to use when retrieving initial attribute values.\n * @returns {GeometryInstance} The geometry instance representing the outline portion of the geometry.\n *\n * @exception {DeveloperError} This instance does not represent an outlined geometry.\n */\nGeometryUpdater.prototype.createOutlineGeometryInstance =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n */\nGeometryUpdater.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys and resources used by the object.  Once an object is destroyed, it should not be used.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nGeometryUpdater.prototype.destroy = function () {\n  (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n/**\n * @param {Entity} entity\n * @param {Object} geometry\n * @private\n */\nGeometryUpdater.prototype._isHidden = function (entity, geometry) {\n  var show = geometry.show;\n  return (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(show) && show.isConstant && !show.getValue(_Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE)\n  );\n};\n\n/**\n * @param {Entity} entity\n * @param {Object} geometry\n * @private\n */\nGeometryUpdater.prototype._isOnTerrain = function (entity, geometry) {\n  return false;\n};\n\n/**\n * @param {GeometryOptions} options\n * @private\n */\nGeometryUpdater.prototype._getIsClosed = function (options) {\n  return true;\n};\n\n/**\n * @param {Entity} entity\n * @param {Object} geometry\n * @private\n */\nGeometryUpdater.prototype._isDynamic = _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * @param {Entity} entity\n * @param {Object} geometry\n * @private\n */\nGeometryUpdater.prototype._setStaticOptions =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\n/**\n * @param {Entity} entity\n * @param {String} propertyName\n * @param {*} newValue\n * @param {*} oldValue\n * @private\n */\nGeometryUpdater.prototype._onEntityPropertyChanged = function (\n  entity,\n  propertyName,\n  newValue,\n  oldValue\n) {\n  if (this._observedPropertyNames.indexOf(propertyName) === -1) {\n    return;\n  }\n\n  var geometry = this._entity[this._geometryPropertyName];\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(geometry)) {\n    if (this._fillEnabled || this._outlineEnabled) {\n      this._fillEnabled = false;\n      this._outlineEnabled = false;\n      this._geometryChanged.raiseEvent(this);\n    }\n    return;\n  }\n\n  var fillProperty = geometry.fill;\n  var fillEnabled =\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(fillProperty) && fillProperty.isConstant\n      ? fillProperty.getValue(_Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE)\n      : true;\n\n  var outlineProperty = geometry.outline;\n  var outlineEnabled = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(outlineProperty);\n  if (outlineEnabled && outlineProperty.isConstant) {\n    outlineEnabled = outlineProperty.getValue(_Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE);\n  }\n\n  if (!fillEnabled && !outlineEnabled) {\n    if (this._fillEnabled || this._outlineEnabled) {\n      this._fillEnabled = false;\n      this._outlineEnabled = false;\n      this._geometryChanged.raiseEvent(this);\n    }\n    return;\n  }\n\n  var show = geometry.show;\n  if (this._isHidden(entity, geometry)) {\n    if (this._fillEnabled || this._outlineEnabled) {\n      this._fillEnabled = false;\n      this._outlineEnabled = false;\n      this._geometryChanged.raiseEvent(this);\n    }\n    return;\n  }\n\n  this._materialProperty = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(geometry.material, defaultMaterial);\n  this._fillProperty = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(fillProperty, defaultFill);\n  this._showProperty = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(show, defaultShow);\n  this._showOutlineProperty = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(geometry.outline, defaultOutline);\n  this._outlineColorProperty = outlineEnabled\n    ? (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(geometry.outlineColor, defaultOutlineColor)\n    : undefined;\n  this._shadowsProperty = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(geometry.shadows, defaultShadows);\n  this._distanceDisplayConditionProperty = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    geometry.distanceDisplayCondition,\n    defaultDistanceDisplayCondition\n  );\n  this._classificationTypeProperty = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    geometry.classificationType,\n    defaultClassificationType\n  );\n\n  this._fillEnabled = fillEnabled;\n\n  var onTerrain =\n    this._isOnTerrain(entity, geometry) &&\n    (this._supportsMaterialsforEntitiesOnTerrain ||\n      this._materialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z);\n\n  if (outlineEnabled && onTerrain) {\n    (0,_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].geometryOutlines */ .Z.geometryOutlines);\n    outlineEnabled = false;\n  }\n\n  this._onTerrain = onTerrain;\n  this._outlineEnabled = outlineEnabled;\n\n  if (this._isDynamic(entity, geometry)) {\n    if (!this._dynamic) {\n      this._dynamic = true;\n      this._geometryChanged.raiseEvent(this);\n    }\n  } else {\n    this._setStaticOptions(entity, geometry);\n    this._isClosed = this._getIsClosed(this._options);\n    var outlineWidth = geometry.outlineWidth;\n    this._outlineWidth = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z)(outlineWidth)\n      ? outlineWidth.getValue(_Core_Iso8601_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MINIMUM_VALUE */ .Z.MINIMUM_VALUE)\n      : 1.0;\n    this._dynamic = false;\n    this._geometryChanged.raiseEvent(this);\n  }\n};\n\n/**\n * Creates the dynamic updater to be used when GeometryUpdater#isDynamic is true.\n *\n * @param {PrimitiveCollection} primitives The primitive collection to use.\n * @param {PrimitiveCollection} [groundPrimitives] The primitive collection to use for ground primitives.\n *\n * @returns {DynamicGeometryUpdater} The dynamic updater used to update the geometry each frame.\n *\n * @exception {DeveloperError} This instance does not represent dynamic geometry.\n * @private\n */\nGeometryUpdater.prototype.createDynamicUpdater = function (\n  primitives,\n  groundPrimitives\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("primitives", primitives);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("groundPrimitives", groundPrimitives);\n\n  if (!this._dynamic) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "This instance does not represent dynamic geometry."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  return new this.constructor.DynamicGeometryUpdater(\n    this,\n    primitives,\n    groundPrimitives\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (GeometryUpdater);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDdkQ7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDBFQUFZO0FBQ2pEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMkVBQXFCOztBQUU3RDtBQUNBLElBQUksNEVBQWMsQ0FBQywwR0FBK0I7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNFQUFPO0FBQ2hDLDhCQUE4Qiw2RkFBcUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQztBQUNBLGFBQWEsd0JBQXdCO0FBQ3JDO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLCtFQUFhO0FBQ2YsRUFBRSwrRUFBYTs7QUFFZjtBQUNBLGNBQWMsd0VBQWM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsZUFBZSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL0dlb21ldHJ5VXBkYXRlci5qcz9kNzBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uIGZyb20gXCIuLi9Db3JlL0Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvbi5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgSXNvODYwMSBmcm9tIFwiLi4vQ29yZS9Jc284NjAxLmpzXCI7XG5pbXBvcnQgb25lVGltZVdhcm5pbmcgZnJvbSBcIi4uL0NvcmUvb25lVGltZVdhcm5pbmcuanNcIjtcbmltcG9ydCBDbGFzc2lmaWNhdGlvblR5cGUgZnJvbSBcIi4uL1NjZW5lL0NsYXNzaWZpY2F0aW9uVHlwZS5qc1wiO1xuaW1wb3J0IFNoYWRvd01vZGUgZnJvbSBcIi4uL1NjZW5lL1NoYWRvd01vZGUuanNcIjtcbmltcG9ydCBDb2xvck1hdGVyaWFsUHJvcGVydHkgZnJvbSBcIi4vQ29sb3JNYXRlcmlhbFByb3BlcnR5LmpzXCI7XG5pbXBvcnQgQ29uc3RhbnRQcm9wZXJ0eSBmcm9tIFwiLi9Db25zdGFudFByb3BlcnR5LmpzXCI7XG5pbXBvcnQgRW50aXR5IGZyb20gXCIuL0VudGl0eS5qc1wiO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gXCIuL1Byb3BlcnR5LmpzXCI7XG5cbnZhciBkZWZhdWx0TWF0ZXJpYWwgPSBuZXcgQ29sb3JNYXRlcmlhbFByb3BlcnR5KENvbG9yLldISVRFKTtcbnZhciBkZWZhdWx0U2hvdyA9IG5ldyBDb25zdGFudFByb3BlcnR5KHRydWUpO1xudmFyIGRlZmF1bHRGaWxsID0gbmV3IENvbnN0YW50UHJvcGVydHkodHJ1ZSk7XG52YXIgZGVmYXVsdE91dGxpbmUgPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eShmYWxzZSk7XG52YXIgZGVmYXVsdE91dGxpbmVDb2xvciA9IG5ldyBDb25zdGFudFByb3BlcnR5KENvbG9yLkJMQUNLKTtcbnZhciBkZWZhdWx0U2hhZG93cyA9IG5ldyBDb25zdGFudFByb3BlcnR5KFNoYWRvd01vZGUuRElTQUJMRUQpO1xudmFyIGRlZmF1bHREaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eShcbiAgbmV3IERpc3RhbmNlRGlzcGxheUNvbmRpdGlvbigpXG4pO1xudmFyIGRlZmF1bHRDbGFzc2lmaWNhdGlvblR5cGUgPSBuZXcgQ29uc3RhbnRQcm9wZXJ0eShDbGFzc2lmaWNhdGlvblR5cGUuQk9USCk7XG5cbi8qKlxuICogQW4gYWJzdHJhY3QgY2xhc3MgZm9yIHVwZGF0aW5nIGdlb21ldHJ5IGVudGl0aWVzLlxuICogQGFsaWFzIEdlb21ldHJ5VXBkYXRlclxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtFbnRpdHl9IG9wdGlvbnMuZW50aXR5IFRoZSBlbnRpdHkgY29udGFpbmluZyB0aGUgZ2VvbWV0cnkgdG8gYmUgdmlzdWFsaXplZC5cbiAqIEBwYXJhbSB7U2NlbmV9IG9wdGlvbnMuc2NlbmUgVGhlIHNjZW5lIHdoZXJlIHZpc3VhbGl6YXRpb24gaXMgdGFraW5nIHBsYWNlLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZ2VvbWV0cnlPcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBnZW9tZXRyeVxuICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuZ2VvbWV0cnlQcm9wZXJ0eU5hbWUgVGhlIGdlb21ldHJ5IHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nW119IG9wdGlvbnMub2JzZXJ2ZWRQcm9wZXJ0eU5hbWVzIFRoZSBlbnRpdHkgcHJvcGVydGllcyB0aGlzIGdlb21ldHJ5IGNhcmVzIGFib3V0XG4gKi9cbmZ1bmN0aW9uIEdlb21ldHJ5VXBkYXRlcihvcHRpb25zKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLmRlZmluZWQoXCJvcHRpb25zLmVudGl0eVwiLCBvcHRpb25zLmVudGl0eSk7XG4gIENoZWNrLmRlZmluZWQoXCJvcHRpb25zLnNjZW5lXCIsIG9wdGlvbnMuc2NlbmUpO1xuICBDaGVjay5kZWZpbmVkKFwib3B0aW9ucy5nZW9tZXRyeU9wdGlvbnNcIiwgb3B0aW9ucy5nZW9tZXRyeU9wdGlvbnMpO1xuICBDaGVjay5kZWZpbmVkKFwib3B0aW9ucy5nZW9tZXRyeVByb3BlcnR5TmFtZVwiLCBvcHRpb25zLmdlb21ldHJ5UHJvcGVydHlOYW1lKTtcbiAgQ2hlY2suZGVmaW5lZChcIm9wdGlvbnMub2JzZXJ2ZWRQcm9wZXJ0eU5hbWVzXCIsIG9wdGlvbnMub2JzZXJ2ZWRQcm9wZXJ0eU5hbWVzKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGVudGl0eSA9IG9wdGlvbnMuZW50aXR5O1xuICB2YXIgZ2VvbWV0cnlQcm9wZXJ0eU5hbWUgPSBvcHRpb25zLmdlb21ldHJ5UHJvcGVydHlOYW1lO1xuXG4gIHRoaXMuX2VudGl0eSA9IGVudGl0eTtcbiAgdGhpcy5fc2NlbmUgPSBvcHRpb25zLnNjZW5lO1xuICB0aGlzLl9maWxsRW5hYmxlZCA9IGZhbHNlO1xuICB0aGlzLl9pc0Nsb3NlZCA9IGZhbHNlO1xuICB0aGlzLl9vblRlcnJhaW4gPSBmYWxzZTtcbiAgdGhpcy5fZHluYW1pYyA9IGZhbHNlO1xuICB0aGlzLl9vdXRsaW5lRW5hYmxlZCA9IGZhbHNlO1xuICB0aGlzLl9nZW9tZXRyeUNoYW5nZWQgPSBuZXcgRXZlbnQoKTtcbiAgdGhpcy5fc2hvd1Byb3BlcnR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9tYXRlcmlhbFByb3BlcnR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zaG93T3V0bGluZVByb3BlcnR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9vdXRsaW5lQ29sb3JQcm9wZXJ0eSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fb3V0bGluZVdpZHRoID0gMS4wO1xuICB0aGlzLl9zaGFkb3dzUHJvcGVydHkgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2Rpc3RhbmNlRGlzcGxheUNvbmRpdGlvblByb3BlcnR5ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9jbGFzc2lmaWNhdGlvblR5cGVQcm9wZXJ0eSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnMuZ2VvbWV0cnlPcHRpb25zO1xuICB0aGlzLl9nZW9tZXRyeVByb3BlcnR5TmFtZSA9IGdlb21ldHJ5UHJvcGVydHlOYW1lO1xuICB0aGlzLl9pZCA9IGdlb21ldHJ5UHJvcGVydHlOYW1lICsgXCItXCIgKyBlbnRpdHkuaWQ7XG4gIHRoaXMuX29ic2VydmVkUHJvcGVydHlOYW1lcyA9IG9wdGlvbnMub2JzZXJ2ZWRQcm9wZXJ0eU5hbWVzO1xuICB0aGlzLl9zdXBwb3J0c01hdGVyaWFsc2ZvckVudGl0aWVzT25UZXJyYWluID0gRW50aXR5LnN1cHBvcnRzTWF0ZXJpYWxzZm9yRW50aXRpZXNPblRlcnJhaW4oXG4gICAgb3B0aW9ucy5zY2VuZVxuICApO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1bmlxdWUgSUQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdXBkYXRlclxuICAgKiBAbWVtYmVyb2YgR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGlkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGVudGl0eSBhc3NvY2lhdGVkIHdpdGggdGhpcyBnZW9tZXRyeS5cbiAgICogQG1lbWJlcm9mIEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0VudGl0eX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBlbnRpdHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbnRpdHk7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoZSBnZW9tZXRyeSBoYXMgYSBmaWxsIGNvbXBvbmVudC5cbiAgICogQG1lbWJlcm9mIEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZmlsbEVuYWJsZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9maWxsRW5hYmxlZDtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgaWYgZmlsbCB2aXNpYmlsaXR5IHZhcmllcyB3aXRoIHNpbXVsYXRpb24gdGltZS5cbiAgICogQG1lbWJlcm9mIEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaGFzQ29uc3RhbnRGaWxsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAhdGhpcy5fZmlsbEVuYWJsZWQgfHxcbiAgICAgICAgKCFkZWZpbmVkKHRoaXMuX2VudGl0eS5hdmFpbGFiaWxpdHkpICYmXG4gICAgICAgICAgUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl9zaG93UHJvcGVydHkpICYmXG4gICAgICAgICAgUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl9maWxsUHJvcGVydHkpKVxuICAgICAgKTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgbWF0ZXJpYWwgcHJvcGVydHkgdXNlZCB0byBmaWxsIHRoZSBnZW9tZXRyeS5cbiAgICogQG1lbWJlcm9mIEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge01hdGVyaWFsUHJvcGVydHl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZmlsbE1hdGVyaWFsUHJvcGVydHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbFByb3BlcnR5O1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyBpZiB0aGUgZ2VvbWV0cnkgaGFzIGFuIG91dGxpbmUgY29tcG9uZW50LlxuICAgKiBAbWVtYmVyb2YgR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBvdXRsaW5lRW5hYmxlZDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX291dGxpbmVFbmFibGVkO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyBpZiB0aGUgZ2VvbWV0cnkgaGFzIGFuIG91dGxpbmUgY29tcG9uZW50LlxuICAgKiBAbWVtYmVyb2YgR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBoYXNDb25zdGFudE91dGxpbmU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICF0aGlzLl9vdXRsaW5lRW5hYmxlZCB8fFxuICAgICAgICAoIWRlZmluZWQodGhpcy5fZW50aXR5LmF2YWlsYWJpbGl0eSkgJiZcbiAgICAgICAgICBQcm9wZXJ0eS5pc0NvbnN0YW50KHRoaXMuX3Nob3dQcm9wZXJ0eSkgJiZcbiAgICAgICAgICBQcm9wZXJ0eS5pc0NvbnN0YW50KHRoaXMuX3Nob3dPdXRsaW5lUHJvcGVydHkpKVxuICAgICAgKTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUge0BsaW5rIENvbG9yfSBwcm9wZXJ0eSBmb3IgdGhlIGdlb21ldHJ5IG91dGxpbmUuXG4gICAqIEBtZW1iZXJvZiBHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtQcm9wZXJ0eX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBvdXRsaW5lQ29sb3JQcm9wZXJ0eToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX291dGxpbmVDb2xvclByb3BlcnR5O1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb25zdGFudCB3aXRoIG9mIHRoZSBnZW9tZXRyeSBvdXRsaW5lLCBpbiBwaXhlbHMuXG4gICAqIFRoaXMgdmFsdWUgaXMgb25seSB2YWxpZCBpZiBpc0R5bmFtaWMgaXMgZmFsc2UuXG4gICAqIEBtZW1iZXJvZiBHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgb3V0bGluZVdpZHRoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb3V0bGluZVdpZHRoO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm9wZXJ0eSBzcGVjaWZ5aW5nIHdoZXRoZXIgdGhlIGdlb21ldHJ5XG4gICAqIGNhc3RzIG9yIHJlY2VpdmVzIHNoYWRvd3MgZnJvbSBsaWdodCBzb3VyY2VzLlxuICAgKiBAbWVtYmVyb2YgR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7UHJvcGVydHl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgc2hhZG93c1Byb3BlcnR5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hhZG93c1Byb3BlcnR5O1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHtAbGluayBEaXN0YW5jZURpc3BsYXlDb25kaXRpb259IFByb3BlcnR5IHNwZWNpZnlpbmcgYXQgd2hhdCBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgdGhhdCB0aGlzIGdlb21ldHJ5IHdpbGwgYmUgZGlzcGxheWVkLlxuICAgKiBAbWVtYmVyb2YgR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7UHJvcGVydHl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb25Qcm9wZXJ0eTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSB7QGxpbmsgQ2xhc3NpZmljYXRpb25UeXBlfSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIGlmIHRoaXMgZ2VvbWV0cnkgd2lsbCBjbGFzc2lmeSB0ZXJyYWluLCAzRCBUaWxlcywgb3IgYm90aCB3aGVuIG9uIHRoZSBncm91bmQuXG4gICAqIEBtZW1iZXJvZiBHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtQcm9wZXJ0eX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjbGFzc2lmaWNhdGlvblR5cGVQcm9wZXJ0eToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NsYXNzaWZpY2F0aW9uVHlwZVByb3BlcnR5O1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyBpZiB0aGUgZ2VvbWV0cnkgaXMgdGltZS12YXJ5aW5nLlxuICAgKiBJZiB0cnVlLCBhbGwgdmlzdWFsaXphdGlvbiBpcyBkZWxlZ2F0ZWQgdG8gYSBEeW5hbWljR2VvbWV0cnlVcGRhdGVyXG4gICAqIHJldHVybmVkIGJ5IEdlb21ldHJ5VXBkYXRlciNjcmVhdGVEeW5hbWljVXBkYXRlci5cbiAgICogQG1lbWJlcm9mIEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaXNEeW5hbWljOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZHluYW1pYztcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgaWYgdGhlIGdlb21ldHJ5IGlzIGNsb3NlZC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBvbmx5IHZhbGlkIGZvciBzdGF0aWMgZ2VvbWV0cnkuXG4gICAqIEBtZW1iZXJvZiBHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGlzQ2xvc2VkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faXNDbG9zZWQ7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoZSBnZW9tZXRyeSBzaG91bGQgYmUgZHJhd24gb24gdGVycmFpbi5cbiAgICogQG1lbWJlcm9mIEVsbGlwc2VHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG9uVGVycmFpbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX29uVGVycmFpbjtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhbiBldmVudCB0aGF0IGlzIHJhaXNlZCB3aGVuZXZlciB0aGUgcHVibGljIHByb3BlcnRpZXNcbiAgICogb2YgdGhpcyB1cGRhdGVyIGNoYW5nZS5cbiAgICogQG1lbWJlcm9mIEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZ2VvbWV0cnlDaGFuZ2VkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2VvbWV0cnlDaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdlb21ldHJ5IGlzIG91dGxpbmVkIGF0IHRoZSBwcm92aWRlZCB0aW1lLlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdmlzaWJpbGl0eS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGdlb21ldHJ5IGlzIG91dGxpbmVkIGF0IHRoZSBwcm92aWRlZCB0aW1lLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbkdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuaXNPdXRsaW5lVmlzaWJsZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBlbnRpdHkgPSB0aGlzLl9lbnRpdHk7XG4gIHZhciB2aXNpYmxlID1cbiAgICB0aGlzLl9vdXRsaW5lRW5hYmxlZCAmJlxuICAgIGVudGl0eS5pc0F2YWlsYWJsZSh0aW1lKSAmJlxuICAgIHRoaXMuX3Nob3dQcm9wZXJ0eS5nZXRWYWx1ZSh0aW1lKSAmJlxuICAgIHRoaXMuX3Nob3dPdXRsaW5lUHJvcGVydHkuZ2V0VmFsdWUodGltZSk7XG4gIHJldHVybiBkZWZhdWx0VmFsdWUodmlzaWJsZSwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdlb21ldHJ5IGlzIGZpbGxlZCBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHRpbWUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHZpc2liaWxpdHkuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBnZW9tZXRyeSBpcyBmaWxsZWQgYXQgdGhlIHByb3ZpZGVkIHRpbWUsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5pc0ZpbGxlZCA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBlbnRpdHkgPSB0aGlzLl9lbnRpdHk7XG4gIHZhciB2aXNpYmxlID1cbiAgICB0aGlzLl9maWxsRW5hYmxlZCAmJlxuICAgIGVudGl0eS5pc0F2YWlsYWJsZSh0aW1lKSAmJlxuICAgIHRoaXMuX3Nob3dQcm9wZXJ0eS5nZXRWYWx1ZSh0aW1lKSAmJlxuICAgIHRoaXMuX2ZpbGxQcm9wZXJ0eS5nZXRWYWx1ZSh0aW1lKTtcbiAgcmV0dXJuIGRlZmF1bHRWYWx1ZSh2aXNpYmxlLCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGdlb21ldHJ5IGluc3RhbmNlIHdoaWNoIHJlcHJlc2VudHMgdGhlIGZpbGwgb2YgdGhlIGdlb21ldHJ5LlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSB0aW1lIHRvIHVzZSB3aGVuIHJldHJpZXZpbmcgaW5pdGlhbCBhdHRyaWJ1dGUgdmFsdWVzLlxuICogQHJldHVybnMge0dlb21ldHJ5SW5zdGFuY2V9IFRoZSBnZW9tZXRyeSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpbGxlZCBwb3J0aW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBpbnN0YW5jZSBkb2VzIG5vdCByZXByZXNlbnQgYSBmaWxsZWQgZ2VvbWV0cnkuXG4gKi9cbkdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuY3JlYXRlRmlsbEdlb21ldHJ5SW5zdGFuY2UgPVxuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcjtcblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBnZW9tZXRyeSBpbnN0YW5jZSB3aGljaCByZXByZXNlbnRzIHRoZSBvdXRsaW5lIG9mIHRoZSBnZW9tZXRyeS5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSB0byB1c2Ugd2hlbiByZXRyaWV2aW5nIGluaXRpYWwgYXR0cmlidXRlIHZhbHVlcy5cbiAqIEByZXR1cm5zIHtHZW9tZXRyeUluc3RhbmNlfSBUaGUgZ2VvbWV0cnkgaW5zdGFuY2UgcmVwcmVzZW50aW5nIHRoZSBvdXRsaW5lIHBvcnRpb24gb2YgdGhlIGdlb21ldHJ5LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIGluc3RhbmNlIGRvZXMgbm90IHJlcHJlc2VudCBhbiBvdXRsaW5lZCBnZW9tZXRyeS5cbiAqL1xuR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5jcmVhdGVPdXRsaW5lR2VvbWV0cnlJbnN0YW5jZSA9XG4gIERldmVsb3BlckVycm9yLnRocm93SW5zdGFudGlhdGlvbkVycm9yO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgZmFsc2UuXG4gKi9cbkdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgYW5kIHJlc291cmNlcyB1c2VkIGJ5IHRoZSBvYmplY3QuICBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXG4gKi9cbkdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG4vKipcbiAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBnZW9tZXRyeVxuICogQHByaXZhdGVcbiAqL1xuR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5faXNIaWRkZW4gPSBmdW5jdGlvbiAoZW50aXR5LCBnZW9tZXRyeSkge1xuICB2YXIgc2hvdyA9IGdlb21ldHJ5LnNob3c7XG4gIHJldHVybiAoXG4gICAgZGVmaW5lZChzaG93KSAmJiBzaG93LmlzQ29uc3RhbnQgJiYgIXNob3cuZ2V0VmFsdWUoSXNvODYwMS5NSU5JTVVNX1ZBTFVFKVxuICApO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gKiBAcGFyYW0ge09iamVjdH0gZ2VvbWV0cnlcbiAqIEBwcml2YXRlXG4gKi9cbkdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuX2lzT25UZXJyYWluID0gZnVuY3Rpb24gKGVudGl0eSwgZ2VvbWV0cnkpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0dlb21ldHJ5T3B0aW9uc30gb3B0aW9uc1xuICogQHByaXZhdGVcbiAqL1xuR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5fZ2V0SXNDbG9zZWQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICogQHBhcmFtIHtPYmplY3R9IGdlb21ldHJ5XG4gKiBAcHJpdmF0ZVxuICovXG5HZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9pc0R5bmFtaWMgPSBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcjtcblxuLyoqXG4gKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gKiBAcGFyYW0ge09iamVjdH0gZ2VvbWV0cnlcbiAqIEBwcml2YXRlXG4gKi9cbkdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuX3NldFN0YXRpY09wdGlvbnMgPVxuICBEZXZlbG9wZXJFcnJvci50aHJvd0luc3RhbnRpYXRpb25FcnJvcjtcblxuLyoqXG4gKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlOYW1lXG4gKiBAcGFyYW0geyp9IG5ld1ZhbHVlXG4gKiBAcGFyYW0geyp9IG9sZFZhbHVlXG4gKiBAcHJpdmF0ZVxuICovXG5HZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9vbkVudGl0eVByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChcbiAgZW50aXR5LFxuICBwcm9wZXJ0eU5hbWUsXG4gIG5ld1ZhbHVlLFxuICBvbGRWYWx1ZVxuKSB7XG4gIGlmICh0aGlzLl9vYnNlcnZlZFByb3BlcnR5TmFtZXMuaW5kZXhPZihwcm9wZXJ0eU5hbWUpID09PSAtMSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBnZW9tZXRyeSA9IHRoaXMuX2VudGl0eVt0aGlzLl9nZW9tZXRyeVByb3BlcnR5TmFtZV07XG5cbiAgaWYgKCFkZWZpbmVkKGdlb21ldHJ5KSkge1xuICAgIGlmICh0aGlzLl9maWxsRW5hYmxlZCB8fCB0aGlzLl9vdXRsaW5lRW5hYmxlZCkge1xuICAgICAgdGhpcy5fZmlsbEVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX291dGxpbmVFbmFibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9nZW9tZXRyeUNoYW5nZWQucmFpc2VFdmVudCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGZpbGxQcm9wZXJ0eSA9IGdlb21ldHJ5LmZpbGw7XG4gIHZhciBmaWxsRW5hYmxlZCA9XG4gICAgZGVmaW5lZChmaWxsUHJvcGVydHkpICYmIGZpbGxQcm9wZXJ0eS5pc0NvbnN0YW50XG4gICAgICA/IGZpbGxQcm9wZXJ0eS5nZXRWYWx1ZShJc284NjAxLk1JTklNVU1fVkFMVUUpXG4gICAgICA6IHRydWU7XG5cbiAgdmFyIG91dGxpbmVQcm9wZXJ0eSA9IGdlb21ldHJ5Lm91dGxpbmU7XG4gIHZhciBvdXRsaW5lRW5hYmxlZCA9IGRlZmluZWQob3V0bGluZVByb3BlcnR5KTtcbiAgaWYgKG91dGxpbmVFbmFibGVkICYmIG91dGxpbmVQcm9wZXJ0eS5pc0NvbnN0YW50KSB7XG4gICAgb3V0bGluZUVuYWJsZWQgPSBvdXRsaW5lUHJvcGVydHkuZ2V0VmFsdWUoSXNvODYwMS5NSU5JTVVNX1ZBTFVFKTtcbiAgfVxuXG4gIGlmICghZmlsbEVuYWJsZWQgJiYgIW91dGxpbmVFbmFibGVkKSB7XG4gICAgaWYgKHRoaXMuX2ZpbGxFbmFibGVkIHx8IHRoaXMuX291dGxpbmVFbmFibGVkKSB7XG4gICAgICB0aGlzLl9maWxsRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fb3V0bGluZUVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2dlb21ldHJ5Q2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc2hvdyA9IGdlb21ldHJ5LnNob3c7XG4gIGlmICh0aGlzLl9pc0hpZGRlbihlbnRpdHksIGdlb21ldHJ5KSkge1xuICAgIGlmICh0aGlzLl9maWxsRW5hYmxlZCB8fCB0aGlzLl9vdXRsaW5lRW5hYmxlZCkge1xuICAgICAgdGhpcy5fZmlsbEVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX291dGxpbmVFbmFibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9nZW9tZXRyeUNoYW5nZWQucmFpc2VFdmVudCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5fbWF0ZXJpYWxQcm9wZXJ0eSA9IGRlZmF1bHRWYWx1ZShnZW9tZXRyeS5tYXRlcmlhbCwgZGVmYXVsdE1hdGVyaWFsKTtcbiAgdGhpcy5fZmlsbFByb3BlcnR5ID0gZGVmYXVsdFZhbHVlKGZpbGxQcm9wZXJ0eSwgZGVmYXVsdEZpbGwpO1xuICB0aGlzLl9zaG93UHJvcGVydHkgPSBkZWZhdWx0VmFsdWUoc2hvdywgZGVmYXVsdFNob3cpO1xuICB0aGlzLl9zaG93T3V0bGluZVByb3BlcnR5ID0gZGVmYXVsdFZhbHVlKGdlb21ldHJ5Lm91dGxpbmUsIGRlZmF1bHRPdXRsaW5lKTtcbiAgdGhpcy5fb3V0bGluZUNvbG9yUHJvcGVydHkgPSBvdXRsaW5lRW5hYmxlZFxuICAgID8gZGVmYXVsdFZhbHVlKGdlb21ldHJ5Lm91dGxpbmVDb2xvciwgZGVmYXVsdE91dGxpbmVDb2xvcilcbiAgICA6IHVuZGVmaW5lZDtcbiAgdGhpcy5fc2hhZG93c1Byb3BlcnR5ID0gZGVmYXVsdFZhbHVlKGdlb21ldHJ5LnNoYWRvd3MsIGRlZmF1bHRTaGFkb3dzKTtcbiAgdGhpcy5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uUHJvcGVydHkgPSBkZWZhdWx0VmFsdWUoXG4gICAgZ2VvbWV0cnkuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uLFxuICAgIGRlZmF1bHREaXN0YW5jZURpc3BsYXlDb25kaXRpb25cbiAgKTtcbiAgdGhpcy5fY2xhc3NpZmljYXRpb25UeXBlUHJvcGVydHkgPSBkZWZhdWx0VmFsdWUoXG4gICAgZ2VvbWV0cnkuY2xhc3NpZmljYXRpb25UeXBlLFxuICAgIGRlZmF1bHRDbGFzc2lmaWNhdGlvblR5cGVcbiAgKTtcblxuICB0aGlzLl9maWxsRW5hYmxlZCA9IGZpbGxFbmFibGVkO1xuXG4gIHZhciBvblRlcnJhaW4gPVxuICAgIHRoaXMuX2lzT25UZXJyYWluKGVudGl0eSwgZ2VvbWV0cnkpICYmXG4gICAgKHRoaXMuX3N1cHBvcnRzTWF0ZXJpYWxzZm9yRW50aXRpZXNPblRlcnJhaW4gfHxcbiAgICAgIHRoaXMuX21hdGVyaWFsUHJvcGVydHkgaW5zdGFuY2VvZiBDb2xvck1hdGVyaWFsUHJvcGVydHkpO1xuXG4gIGlmIChvdXRsaW5lRW5hYmxlZCAmJiBvblRlcnJhaW4pIHtcbiAgICBvbmVUaW1lV2FybmluZyhvbmVUaW1lV2FybmluZy5nZW9tZXRyeU91dGxpbmVzKTtcbiAgICBvdXRsaW5lRW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgdGhpcy5fb25UZXJyYWluID0gb25UZXJyYWluO1xuICB0aGlzLl9vdXRsaW5lRW5hYmxlZCA9IG91dGxpbmVFbmFibGVkO1xuXG4gIGlmICh0aGlzLl9pc0R5bmFtaWMoZW50aXR5LCBnZW9tZXRyeSkpIHtcbiAgICBpZiAoIXRoaXMuX2R5bmFtaWMpIHtcbiAgICAgIHRoaXMuX2R5bmFtaWMgPSB0cnVlO1xuICAgICAgdGhpcy5fZ2VvbWV0cnlDaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX3NldFN0YXRpY09wdGlvbnMoZW50aXR5LCBnZW9tZXRyeSk7XG4gICAgdGhpcy5faXNDbG9zZWQgPSB0aGlzLl9nZXRJc0Nsb3NlZCh0aGlzLl9vcHRpb25zKTtcbiAgICB2YXIgb3V0bGluZVdpZHRoID0gZ2VvbWV0cnkub3V0bGluZVdpZHRoO1xuICAgIHRoaXMuX291dGxpbmVXaWR0aCA9IGRlZmluZWQob3V0bGluZVdpZHRoKVxuICAgICAgPyBvdXRsaW5lV2lkdGguZ2V0VmFsdWUoSXNvODYwMS5NSU5JTVVNX1ZBTFVFKVxuICAgICAgOiAxLjA7XG4gICAgdGhpcy5fZHluYW1pYyA9IGZhbHNlO1xuICAgIHRoaXMuX2dlb21ldHJ5Q2hhbmdlZC5yYWlzZUV2ZW50KHRoaXMpO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGR5bmFtaWMgdXBkYXRlciB0byBiZSB1c2VkIHdoZW4gR2VvbWV0cnlVcGRhdGVyI2lzRHluYW1pYyBpcyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7UHJpbWl0aXZlQ29sbGVjdGlvbn0gcHJpbWl0aXZlcyBUaGUgcHJpbWl0aXZlIGNvbGxlY3Rpb24gdG8gdXNlLlxuICogQHBhcmFtIHtQcmltaXRpdmVDb2xsZWN0aW9ufSBbZ3JvdW5kUHJpbWl0aXZlc10gVGhlIHByaW1pdGl2ZSBjb2xsZWN0aW9uIHRvIHVzZSBmb3IgZ3JvdW5kIHByaW1pdGl2ZXMuXG4gKlxuICogQHJldHVybnMge0R5bmFtaWNHZW9tZXRyeVVwZGF0ZXJ9IFRoZSBkeW5hbWljIHVwZGF0ZXIgdXNlZCB0byB1cGRhdGUgdGhlIGdlb21ldHJ5IGVhY2ggZnJhbWUuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgaW5zdGFuY2UgZG9lcyBub3QgcmVwcmVzZW50IGR5bmFtaWMgZ2VvbWV0cnkuXG4gKiBAcHJpdmF0ZVxuICovXG5HZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLmNyZWF0ZUR5bmFtaWNVcGRhdGVyID0gZnVuY3Rpb24gKFxuICBwcmltaXRpdmVzLFxuICBncm91bmRQcmltaXRpdmVzXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInByaW1pdGl2ZXNcIiwgcHJpbWl0aXZlcyk7XG4gIENoZWNrLmRlZmluZWQoXCJncm91bmRQcmltaXRpdmVzXCIsIGdyb3VuZFByaW1pdGl2ZXMpO1xuXG4gIGlmICghdGhpcy5fZHluYW1pYykge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiVGhpcyBpbnN0YW5jZSBkb2VzIG5vdCByZXByZXNlbnQgZHluYW1pYyBnZW9tZXRyeS5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yLkR5bmFtaWNHZW9tZXRyeVVwZGF0ZXIoXG4gICAgdGhpcyxcbiAgICBwcmltaXRpdmVzLFxuICAgIGdyb3VuZFByaW1pdGl2ZXNcbiAgKTtcbn07XG5leHBvcnQgZGVmYXVsdCBHZW9tZXRyeVVwZGF0ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///17045\n')},60500:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8629);\n/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86511);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(14459);\n/* harmony import */ var _Core_EventHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(79539);\n/* harmony import */ var _Scene_ClassificationType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73001);\n/* harmony import */ var _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(79158);\n/* harmony import */ var _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(64060);\n/* harmony import */ var _Scene_ShadowMode_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(34125);\n/* harmony import */ var _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(69895);\n/* harmony import */ var _BoxGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(52777);\n/* harmony import */ var _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(20174);\n/* harmony import */ var _CorridorGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(91166);\n/* harmony import */ var _CylinderGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(43894);\n/* harmony import */ var _DynamicGeometryBatch_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(22425);\n/* harmony import */ var _EllipseGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(28698);\n/* harmony import */ var _EllipsoidGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(16884);\n/* harmony import */ var _Entity_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(11895);\n/* harmony import */ var _PlaneGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(397);\n/* harmony import */ var _PolygonGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(62373);\n/* harmony import */ var _PolylineVolumeGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(24818);\n/* harmony import */ var _RectangleGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(54749);\n/* harmony import */ var _StaticGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(81189);\n/* harmony import */ var _StaticGeometryPerMaterialBatch_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(30487);\n/* harmony import */ var _StaticGroundGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(4371);\n/* harmony import */ var _StaticGroundGeometryPerMaterialBatch_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(65249);\n/* harmony import */ var _StaticOutlineGeometryBatch_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(29596);\n/* harmony import */ var _WallGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(97167);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar emptyArray = [];\n\nvar geometryUpdaters = [\n  _BoxGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z,\n  _CylinderGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z,\n  _CorridorGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z,\n  _EllipseGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z,\n  _EllipsoidGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z,\n  _PlaneGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z,\n  _PolygonGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z,\n  _PolylineVolumeGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z,\n  _RectangleGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z,\n  _WallGeometryUpdater_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z,\n];\n\nfunction GeometryUpdaterSet(entity, scene) {\n  this.entity = entity;\n  this.scene = scene;\n  var updaters = new Array(geometryUpdaters.length);\n  var geometryChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n  function raiseEvent(geometry) {\n    geometryChanged.raiseEvent(geometry);\n  }\n  var eventHelper = new _Core_EventHelper_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z();\n  for (var i = 0; i < updaters.length; i++) {\n    var updater = new geometryUpdaters[i](entity, scene);\n    eventHelper.add(updater.geometryChanged, raiseEvent);\n    updaters[i] = updater;\n  }\n  this.updaters = updaters;\n  this.geometryChanged = geometryChanged;\n  this.eventHelper = eventHelper;\n\n  this._removeEntitySubscription = entity.definitionChanged.addEventListener(\n    GeometryUpdaterSet.prototype._onEntityPropertyChanged,\n    this\n  );\n}\n\nGeometryUpdaterSet.prototype._onEntityPropertyChanged = function (\n  entity,\n  propertyName,\n  newValue,\n  oldValue\n) {\n  var updaters = this.updaters;\n  for (var i = 0; i < updaters.length; i++) {\n    updaters[i]._onEntityPropertyChanged(\n      entity,\n      propertyName,\n      newValue,\n      oldValue\n    );\n  }\n};\n\nGeometryUpdaterSet.prototype.forEach = function (callback) {\n  var updaters = this.updaters;\n  for (var i = 0; i < updaters.length; i++) {\n    callback(updaters[i]);\n  }\n};\n\nGeometryUpdaterSet.prototype.destroy = function () {\n  this.eventHelper.removeAll();\n  var updaters = this.updaters;\n  for (var i = 0; i < updaters.length; i++) {\n    updaters[i].destroy();\n  }\n  this._removeEntitySubscription();\n  (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this);\n};\n\n/**\n * A general purpose visualizer for geometry represented by {@link Primitive} instances.\n * @alias GeometryVisualizer\n * @constructor\n *\n * @param {Scene} scene The scene the primitives will be rendered in.\n * @param {EntityCollection} entityCollection The entityCollection to visualize.\n * @param {PrimitiveCollection} [primitives=scene.primitives] A collection to add primitives related to the entities\n * @param {PrimitiveCollection} [groundPrimitives=scene.groundPrimitives] A collection to add ground primitives related to the entities\n */\nfunction GeometryVisualizer(\n  scene,\n  entityCollection,\n  primitives,\n  groundPrimitives\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defined */ .Z.defined("scene", scene);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defined */ .Z.defined("entityCollection", entityCollection);\n  //>>includeEnd(\'debug\');\n\n  primitives = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitives, scene.primitives);\n  groundPrimitives = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(groundPrimitives, scene.groundPrimitives);\n\n  this._scene = scene;\n  this._primitives = primitives;\n  this._groundPrimitives = groundPrimitives;\n  this._entityCollection = undefined;\n  this._addedObjects = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._removedObjects = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._changedObjects = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  var numberOfShadowModes = _Scene_ShadowMode_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].NUMBER_OF_SHADOW_MODES */ .Z.NUMBER_OF_SHADOW_MODES;\n  this._outlineBatches = new Array(numberOfShadowModes * 2);\n  this._closedColorBatches = new Array(numberOfShadowModes * 2);\n  this._closedMaterialBatches = new Array(numberOfShadowModes * 2);\n  this._openColorBatches = new Array(numberOfShadowModes * 2);\n  this._openMaterialBatches = new Array(numberOfShadowModes * 2);\n\n  var supportsMaterialsforEntitiesOnTerrain = _Entity_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"].supportsMaterialsforEntitiesOnTerrain */ .Z.supportsMaterialsforEntitiesOnTerrain(\n    scene\n  );\n  this._supportsMaterialsforEntitiesOnTerrain = supportsMaterialsforEntitiesOnTerrain;\n\n  var i;\n  for (i = 0; i < numberOfShadowModes; ++i) {\n    this._outlineBatches[i] = new _StaticOutlineGeometryBatch_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z(\n      primitives,\n      scene,\n      i,\n      false\n    );\n    this._outlineBatches[\n      numberOfShadowModes + i\n    ] = new _StaticOutlineGeometryBatch_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z(primitives, scene, i, true);\n\n    this._closedColorBatches[i] = new _StaticGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z(\n      primitives,\n      _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,\n      undefined,\n      true,\n      i,\n      true\n    );\n    this._closedColorBatches[\n      numberOfShadowModes + i\n    ] = new _StaticGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z(\n      primitives,\n      _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,\n      undefined,\n      true,\n      i,\n      false\n    );\n\n    this._closedMaterialBatches[i] = new _StaticGeometryPerMaterialBatch_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z(\n      primitives,\n      _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z,\n      undefined,\n      true,\n      i,\n      true\n    );\n    this._closedMaterialBatches[\n      numberOfShadowModes + i\n    ] = new _StaticGeometryPerMaterialBatch_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z(\n      primitives,\n      _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z,\n      undefined,\n      true,\n      i,\n      false\n    );\n\n    this._openColorBatches[i] = new _StaticGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z(\n      primitives,\n      _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,\n      undefined,\n      false,\n      i,\n      true\n    );\n    this._openColorBatches[\n      numberOfShadowModes + i\n    ] = new _StaticGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z(\n      primitives,\n      _Scene_PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,\n      undefined,\n      false,\n      i,\n      false\n    );\n\n    this._openMaterialBatches[i] = new _StaticGeometryPerMaterialBatch_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z(\n      primitives,\n      _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z,\n      undefined,\n      false,\n      i,\n      true\n    );\n    this._openMaterialBatches[\n      numberOfShadowModes + i\n    ] = new _StaticGeometryPerMaterialBatch_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z(\n      primitives,\n      _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z,\n      undefined,\n      false,\n      i,\n      false\n    );\n  }\n\n  var numberOfClassificationTypes =\n    _Scene_ClassificationType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].NUMBER_OF_CLASSIFICATION_TYPES */ .Z.NUMBER_OF_CLASSIFICATION_TYPES;\n  var groundColorBatches = new Array(numberOfClassificationTypes);\n  var groundMaterialBatches = [];\n  if (supportsMaterialsforEntitiesOnTerrain) {\n    for (i = 0; i < numberOfClassificationTypes; ++i) {\n      groundMaterialBatches.push(\n        new _StaticGroundGeometryPerMaterialBatch_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z(\n          groundPrimitives,\n          i,\n          _Scene_MaterialAppearance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z\n        )\n      );\n      groundColorBatches[i] = new _StaticGroundGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z(\n        groundPrimitives,\n        i\n      );\n    }\n  } else {\n    for (i = 0; i < numberOfClassificationTypes; ++i) {\n      groundColorBatches[i] = new _StaticGroundGeometryColorBatch_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z(\n        groundPrimitives,\n        i\n      );\n    }\n  }\n\n  this._groundColorBatches = groundColorBatches;\n  this._groundMaterialBatches = groundMaterialBatches;\n\n  this._dynamicBatch = new _DynamicGeometryBatch_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z(primitives, groundPrimitives);\n\n  this._batches = this._outlineBatches.concat(\n    this._closedColorBatches,\n    this._closedMaterialBatches,\n    this._openColorBatches,\n    this._openMaterialBatches,\n    this._groundColorBatches,\n    this._groundMaterialBatches,\n    this._dynamicBatch\n  );\n\n  this._subscriptions = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  this._updaterSets = new _Core_AssociativeArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  this._entityCollection = entityCollection;\n  entityCollection.collectionChanged.addEventListener(\n    GeometryVisualizer.prototype._onCollectionChanged,\n    this\n  );\n  this._onCollectionChanged(\n    entityCollection,\n    entityCollection.values,\n    emptyArray\n  );\n}\n\n/**\n * Updates all of the primitives created by this visualizer to match their\n * Entity counterpart at the given time.\n *\n * @param {JulianDate} time The time to update to.\n * @returns {Boolean} True if the visualizer successfully updated to the provided time,\n * false if the visualizer is waiting for asynchronous primitives to be created.\n */\nGeometryVisualizer.prototype.update = function (time) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defined */ .Z.defined("time", time);\n  //>>includeEnd(\'debug\');\n\n  var addedObjects = this._addedObjects;\n  var added = addedObjects.values;\n  var removedObjects = this._removedObjects;\n  var removed = removedObjects.values;\n  var changedObjects = this._changedObjects;\n  var changed = changedObjects.values;\n\n  var i;\n  var entity;\n  var id;\n  var updaterSet;\n  var that = this;\n\n  for (i = changed.length - 1; i > -1; i--) {\n    entity = changed[i];\n    id = entity.id;\n    updaterSet = this._updaterSets.get(id);\n\n    //If in a single update, an entity gets removed and a new instance\n    //re-added with the same id, the updater no longer tracks the\n    //correct entity, we need to both remove the old one and\n    //add the new one, which is done by pushing the entity\n    //onto the removed/added lists.\n    if (updaterSet.entity === entity) {\n      updaterSet.forEach(function (updater) {\n        that._removeUpdater(updater);\n        that._insertUpdaterIntoBatch(time, updater);\n      });\n    } else {\n      removed.push(entity);\n      added.push(entity);\n    }\n  }\n\n  for (i = removed.length - 1; i > -1; i--) {\n    entity = removed[i];\n    id = entity.id;\n    updaterSet = this._updaterSets.get(id);\n    updaterSet.forEach(this._removeUpdater.bind(this));\n    updaterSet.destroy();\n    this._updaterSets.remove(id);\n    this._subscriptions.get(id)();\n    this._subscriptions.remove(id);\n  }\n\n  for (i = added.length - 1; i > -1; i--) {\n    entity = added[i];\n    id = entity.id;\n    updaterSet = new GeometryUpdaterSet(entity, this._scene);\n    this._updaterSets.set(id, updaterSet);\n    updaterSet.forEach(function (updater) {\n      that._insertUpdaterIntoBatch(time, updater);\n    });\n    this._subscriptions.set(\n      id,\n      updaterSet.geometryChanged.addEventListener(\n        GeometryVisualizer._onGeometryChanged,\n        this\n      )\n    );\n  }\n\n  addedObjects.removeAll();\n  removedObjects.removeAll();\n  changedObjects.removeAll();\n\n  var isUpdated = true;\n  var batches = this._batches;\n  var length = batches.length;\n  for (i = 0; i < length; i++) {\n    isUpdated = batches[i].update(time) && isUpdated;\n  }\n\n  return isUpdated;\n};\n\nvar getBoundingSphereArrayScratch = [];\nvar getBoundingSphereBoundingSphereScratch = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * Computes a bounding sphere which encloses the visualization produced for the specified entity.\n * The bounding sphere is in the fixed frame of the scene\'s globe.\n *\n * @param {Entity} entity The entity whose bounding sphere to compute.\n * @param {BoundingSphere} result The bounding sphere onto which to store the result.\n * @returns {BoundingSphereState} BoundingSphereState.DONE if the result contains the bounding sphere,\n *                       BoundingSphereState.PENDING if the result is still being computed, or\n *                       BoundingSphereState.FAILED if the entity has no visualization in the current scene.\n * @private\n */\nGeometryVisualizer.prototype.getBoundingSphere = function (entity, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defined */ .Z.defined("entity", entity);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defined */ .Z.defined("result", result);\n  //>>includeEnd(\'debug\');\n\n  var boundingSpheres = getBoundingSphereArrayScratch;\n  var tmp = getBoundingSphereBoundingSphereScratch;\n\n  var count = 0;\n  var state = _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].DONE */ .Z.DONE;\n  var batches = this._batches;\n  var batchesLength = batches.length;\n\n  var id = entity.id;\n  var updaters = this._updaterSets.get(id).updaters;\n\n  for (var j = 0; j < updaters.length; j++) {\n    var updater = updaters[j];\n    for (var i = 0; i < batchesLength; i++) {\n      state = batches[i].getBoundingSphere(updater, tmp);\n      if (state === _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].PENDING */ .Z.PENDING) {\n        return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].PENDING */ .Z.PENDING;\n      } else if (state === _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].DONE */ .Z.DONE) {\n        boundingSpheres[count] = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(\n          tmp,\n          boundingSpheres[count]\n        );\n        count++;\n      }\n    }\n  }\n\n  if (count === 0) {\n    return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].FAILED */ .Z.FAILED;\n  }\n\n  boundingSpheres.length = count;\n  _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromBoundingSpheres */ .Z.fromBoundingSpheres(boundingSpheres, result);\n  return _BoundingSphereState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].DONE */ .Z.DONE;\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n */\nGeometryVisualizer.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Removes and destroys all primitives created by this instance.\n */\nGeometryVisualizer.prototype.destroy = function () {\n  this._entityCollection.collectionChanged.removeEventListener(\n    GeometryVisualizer.prototype._onCollectionChanged,\n    this\n  );\n  this._addedObjects.removeAll();\n  this._removedObjects.removeAll();\n\n  var i;\n  var batches = this._batches;\n  var length = batches.length;\n  for (i = 0; i < length; i++) {\n    batches[i].removeAllPrimitives();\n  }\n\n  var subscriptions = this._subscriptions.values;\n  length = subscriptions.length;\n  for (i = 0; i < length; i++) {\n    subscriptions[i]();\n  }\n  this._subscriptions.removeAll();\n\n  var updaterSets = this._updaterSets.values;\n  length = updaterSets.length;\n  for (i = 0; i < length; i++) {\n    updaterSets[i].destroy();\n  }\n  this._updaterSets.removeAll();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(this);\n};\n\n/**\n * @private\n */\nGeometryVisualizer.prototype._removeUpdater = function (updater) {\n  //We don\'t keep track of which batch an updater is in, so just remove it from all of them.\n  var batches = this._batches;\n  var length = batches.length;\n  for (var i = 0; i < length; i++) {\n    batches[i].remove(updater);\n  }\n};\n\n/**\n * @private\n */\nGeometryVisualizer.prototype._insertUpdaterIntoBatch = function (\n  time,\n  updater\n) {\n  if (updater.isDynamic) {\n    this._dynamicBatch.add(time, updater);\n    return;\n  }\n\n  var shadows;\n  if (updater.outlineEnabled || updater.fillEnabled) {\n    shadows = updater.shadowsProperty.getValue(time);\n  }\n\n  var numberOfShadowModes = _Scene_ShadowMode_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].NUMBER_OF_SHADOW_MODES */ .Z.NUMBER_OF_SHADOW_MODES;\n  if (updater.outlineEnabled) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(updater.terrainOffsetProperty)) {\n      this._outlineBatches[numberOfShadowModes + shadows].add(time, updater);\n    } else {\n      this._outlineBatches[shadows].add(time, updater);\n    }\n  }\n\n  if (updater.fillEnabled) {\n    if (updater.onTerrain) {\n      var classificationType = updater.classificationTypeProperty.getValue(\n        time\n      );\n      if (updater.fillMaterialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z) {\n        this._groundColorBatches[classificationType].add(time, updater);\n      } else {\n        // If unsupported, updater will not be on terrain.\n        this._groundMaterialBatches[classificationType].add(time, updater);\n      }\n    } else if (updater.isClosed) {\n      if (updater.fillMaterialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z) {\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(updater.terrainOffsetProperty)) {\n          this._closedColorBatches[numberOfShadowModes + shadows].add(\n            time,\n            updater\n          );\n        } else {\n          this._closedColorBatches[shadows].add(time, updater);\n        }\n      } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(updater.terrainOffsetProperty)) {\n        this._closedMaterialBatches[numberOfShadowModes + shadows].add(\n          time,\n          updater\n        );\n      } else {\n        this._closedMaterialBatches[shadows].add(time, updater);\n      }\n    } else if (updater.fillMaterialProperty instanceof _ColorMaterialProperty_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(updater.terrainOffsetProperty)) {\n        this._openColorBatches[numberOfShadowModes + shadows].add(\n          time,\n          updater\n        );\n      } else {\n        this._openColorBatches[shadows].add(time, updater);\n      }\n    } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(updater.terrainOffsetProperty)) {\n      this._openMaterialBatches[numberOfShadowModes + shadows].add(\n        time,\n        updater\n      );\n    } else {\n      this._openMaterialBatches[shadows].add(time, updater);\n    }\n  }\n};\n\n/**\n * @private\n */\nGeometryVisualizer._onGeometryChanged = function (updater) {\n  var removedObjects = this._removedObjects;\n  var changedObjects = this._changedObjects;\n\n  var entity = updater.entity;\n  var id = entity.id;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(removedObjects.get(id)) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_30__/* ["default"] */ .Z)(changedObjects.get(id))) {\n    changedObjects.set(id, entity);\n  }\n};\n\n/**\n * @private\n */\nGeometryVisualizer.prototype._onCollectionChanged = function (\n  entityCollection,\n  added,\n  removed\n) {\n  var addedObjects = this._addedObjects;\n  var removedObjects = this._removedObjects;\n  var changedObjects = this._changedObjects;\n\n  var i;\n  var id;\n  var entity;\n  for (i = removed.length - 1; i > -1; i--) {\n    entity = removed[i];\n    id = entity.id;\n    if (!addedObjects.remove(id)) {\n      removedObjects.set(id, entity);\n      changedObjects.remove(id);\n    }\n  }\n\n  for (i = added.length - 1; i > -1; i--) {\n    entity = added[i];\n    id = entity.id;\n    if (removedObjects.remove(id)) {\n      changedObjects.set(id, entity);\n    } else {\n      addedObjects.set(id, entity);\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__["Z"] = (GeometryVisualizer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0QkFBNEIsb0hBQWlDO0FBQzdEO0FBQ0EsUUFBUSxzRUFBTztBQUNmO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDJFQUFxQjtBQUN2RTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sa0RBQWtELDJFQUFxQjtBQUN2RSxZQUFZLHNFQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRLFNBQVMsc0VBQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU0saURBQWlELDJFQUFxQjtBQUM1RSxVQUFVLHNFQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNLFNBQVMsc0VBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsT0FBTyxzRUFBTyw2QkFBNkIsc0VBQU87QUFDbEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxrQkFBa0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9HZW9tZXRyeVZpc3VhbGl6ZXIuanM/MzI0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXNzb2NpYXRpdmVBcnJheSBmcm9tIFwiLi4vQ29yZS9Bc3NvY2lhdGl2ZUFycmF5LmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmUgZnJvbSBcIi4uL0NvcmUvQm91bmRpbmdTcGhlcmUuanNcIjtcbmltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBkZXN0cm95T2JqZWN0IGZyb20gXCIuLi9Db3JlL2Rlc3Ryb3lPYmplY3QuanNcIjtcbmltcG9ydCBFdmVudCBmcm9tIFwiLi4vQ29yZS9FdmVudC5qc1wiO1xuaW1wb3J0IEV2ZW50SGVscGVyIGZyb20gXCIuLi9Db3JlL0V2ZW50SGVscGVyLmpzXCI7XG5pbXBvcnQgQ2xhc3NpZmljYXRpb25UeXBlIGZyb20gXCIuLi9TY2VuZS9DbGFzc2lmaWNhdGlvblR5cGUuanNcIjtcbmltcG9ydCBNYXRlcmlhbEFwcGVhcmFuY2UgZnJvbSBcIi4uL1NjZW5lL01hdGVyaWFsQXBwZWFyYW5jZS5qc1wiO1xuaW1wb3J0IFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlIGZyb20gXCIuLi9TY2VuZS9QZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZS5qc1wiO1xuaW1wb3J0IFNoYWRvd01vZGUgZnJvbSBcIi4uL1NjZW5lL1NoYWRvd01vZGUuanNcIjtcbmltcG9ydCBCb3VuZGluZ1NwaGVyZVN0YXRlIGZyb20gXCIuL0JvdW5kaW5nU3BoZXJlU3RhdGUuanNcIjtcbmltcG9ydCBCb3hHZW9tZXRyeVVwZGF0ZXIgZnJvbSBcIi4vQm94R2VvbWV0cnlVcGRhdGVyLmpzXCI7XG5pbXBvcnQgQ29sb3JNYXRlcmlhbFByb3BlcnR5IGZyb20gXCIuL0NvbG9yTWF0ZXJpYWxQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IENvcnJpZG9yR2VvbWV0cnlVcGRhdGVyIGZyb20gXCIuL0NvcnJpZG9yR2VvbWV0cnlVcGRhdGVyLmpzXCI7XG5pbXBvcnQgQ3lsaW5kZXJHZW9tZXRyeVVwZGF0ZXIgZnJvbSBcIi4vQ3lsaW5kZXJHZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBEeW5hbWljR2VvbWV0cnlCYXRjaCBmcm9tIFwiLi9EeW5hbWljR2VvbWV0cnlCYXRjaC5qc1wiO1xuaW1wb3J0IEVsbGlwc2VHZW9tZXRyeVVwZGF0ZXIgZnJvbSBcIi4vRWxsaXBzZUdlb21ldHJ5VXBkYXRlci5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZEdlb21ldHJ5VXBkYXRlciBmcm9tIFwiLi9FbGxpcHNvaWRHZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBFbnRpdHkgZnJvbSBcIi4vRW50aXR5LmpzXCI7XG5pbXBvcnQgUGxhbmVHZW9tZXRyeVVwZGF0ZXIgZnJvbSBcIi4vUGxhbmVHZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBQb2x5Z29uR2VvbWV0cnlVcGRhdGVyIGZyb20gXCIuL1BvbHlnb25HZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBQb2x5bGluZVZvbHVtZUdlb21ldHJ5VXBkYXRlciBmcm9tIFwiLi9Qb2x5bGluZVZvbHVtZUdlb21ldHJ5VXBkYXRlci5qc1wiO1xuaW1wb3J0IFJlY3RhbmdsZUdlb21ldHJ5VXBkYXRlciBmcm9tIFwiLi9SZWN0YW5nbGVHZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBTdGF0aWNHZW9tZXRyeUNvbG9yQmF0Y2ggZnJvbSBcIi4vU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoLmpzXCI7XG5pbXBvcnQgU3RhdGljR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoIGZyb20gXCIuL1N0YXRpY0dlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaC5qc1wiO1xuaW1wb3J0IFN0YXRpY0dyb3VuZEdlb21ldHJ5Q29sb3JCYXRjaCBmcm9tIFwiLi9TdGF0aWNHcm91bmRHZW9tZXRyeUNvbG9yQmF0Y2guanNcIjtcbmltcG9ydCBTdGF0aWNHcm91bmRHZW9tZXRyeVBlck1hdGVyaWFsQmF0Y2ggZnJvbSBcIi4vU3RhdGljR3JvdW5kR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoLmpzXCI7XG5pbXBvcnQgU3RhdGljT3V0bGluZUdlb21ldHJ5QmF0Y2ggZnJvbSBcIi4vU3RhdGljT3V0bGluZUdlb21ldHJ5QmF0Y2guanNcIjtcbmltcG9ydCBXYWxsR2VvbWV0cnlVcGRhdGVyIGZyb20gXCIuL1dhbGxHZW9tZXRyeVVwZGF0ZXIuanNcIjtcblxudmFyIGVtcHR5QXJyYXkgPSBbXTtcblxudmFyIGdlb21ldHJ5VXBkYXRlcnMgPSBbXG4gIEJveEdlb21ldHJ5VXBkYXRlcixcbiAgQ3lsaW5kZXJHZW9tZXRyeVVwZGF0ZXIsXG4gIENvcnJpZG9yR2VvbWV0cnlVcGRhdGVyLFxuICBFbGxpcHNlR2VvbWV0cnlVcGRhdGVyLFxuICBFbGxpcHNvaWRHZW9tZXRyeVVwZGF0ZXIsXG4gIFBsYW5lR2VvbWV0cnlVcGRhdGVyLFxuICBQb2x5Z29uR2VvbWV0cnlVcGRhdGVyLFxuICBQb2x5bGluZVZvbHVtZUdlb21ldHJ5VXBkYXRlcixcbiAgUmVjdGFuZ2xlR2VvbWV0cnlVcGRhdGVyLFxuICBXYWxsR2VvbWV0cnlVcGRhdGVyLFxuXTtcblxuZnVuY3Rpb24gR2VvbWV0cnlVcGRhdGVyU2V0KGVudGl0eSwgc2NlbmUpIHtcbiAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7XG4gIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgdmFyIHVwZGF0ZXJzID0gbmV3IEFycmF5KGdlb21ldHJ5VXBkYXRlcnMubGVuZ3RoKTtcbiAgdmFyIGdlb21ldHJ5Q2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICBmdW5jdGlvbiByYWlzZUV2ZW50KGdlb21ldHJ5KSB7XG4gICAgZ2VvbWV0cnlDaGFuZ2VkLnJhaXNlRXZlbnQoZ2VvbWV0cnkpO1xuICB9XG4gIHZhciBldmVudEhlbHBlciA9IG5ldyBFdmVudEhlbHBlcigpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHVwZGF0ZXIgPSBuZXcgZ2VvbWV0cnlVcGRhdGVyc1tpXShlbnRpdHksIHNjZW5lKTtcbiAgICBldmVudEhlbHBlci5hZGQodXBkYXRlci5nZW9tZXRyeUNoYW5nZWQsIHJhaXNlRXZlbnQpO1xuICAgIHVwZGF0ZXJzW2ldID0gdXBkYXRlcjtcbiAgfVxuICB0aGlzLnVwZGF0ZXJzID0gdXBkYXRlcnM7XG4gIHRoaXMuZ2VvbWV0cnlDaGFuZ2VkID0gZ2VvbWV0cnlDaGFuZ2VkO1xuICB0aGlzLmV2ZW50SGVscGVyID0gZXZlbnRIZWxwZXI7XG5cbiAgdGhpcy5fcmVtb3ZlRW50aXR5U3Vic2NyaXB0aW9uID0gZW50aXR5LmRlZmluaXRpb25DaGFuZ2VkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgR2VvbWV0cnlVcGRhdGVyU2V0LnByb3RvdHlwZS5fb25FbnRpdHlQcm9wZXJ0eUNoYW5nZWQsXG4gICAgdGhpc1xuICApO1xufVxuXG5HZW9tZXRyeVVwZGF0ZXJTZXQucHJvdG90eXBlLl9vbkVudGl0eVByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChcbiAgZW50aXR5LFxuICBwcm9wZXJ0eU5hbWUsXG4gIG5ld1ZhbHVlLFxuICBvbGRWYWx1ZVxuKSB7XG4gIHZhciB1cGRhdGVycyA9IHRoaXMudXBkYXRlcnM7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdXBkYXRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICB1cGRhdGVyc1tpXS5fb25FbnRpdHlQcm9wZXJ0eUNoYW5nZWQoXG4gICAgICBlbnRpdHksXG4gICAgICBwcm9wZXJ0eU5hbWUsXG4gICAgICBuZXdWYWx1ZSxcbiAgICAgIG9sZFZhbHVlXG4gICAgKTtcbiAgfVxufTtcblxuR2VvbWV0cnlVcGRhdGVyU2V0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIHZhciB1cGRhdGVycyA9IHRoaXMudXBkYXRlcnM7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdXBkYXRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICBjYWxsYmFjayh1cGRhdGVyc1tpXSk7XG4gIH1cbn07XG5cbkdlb21ldHJ5VXBkYXRlclNldC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5ldmVudEhlbHBlci5yZW1vdmVBbGwoKTtcbiAgdmFyIHVwZGF0ZXJzID0gdGhpcy51cGRhdGVycztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1cGRhdGVycy5sZW5ndGg7IGkrKykge1xuICAgIHVwZGF0ZXJzW2ldLmRlc3Ryb3koKTtcbiAgfVxuICB0aGlzLl9yZW1vdmVFbnRpdHlTdWJzY3JpcHRpb24oKTtcbiAgZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG5cbi8qKlxuICogQSBnZW5lcmFsIHB1cnBvc2UgdmlzdWFsaXplciBmb3IgZ2VvbWV0cnkgcmVwcmVzZW50ZWQgYnkge0BsaW5rIFByaW1pdGl2ZX0gaW5zdGFuY2VzLlxuICogQGFsaWFzIEdlb21ldHJ5VmlzdWFsaXplclxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtTY2VuZX0gc2NlbmUgVGhlIHNjZW5lIHRoZSBwcmltaXRpdmVzIHdpbGwgYmUgcmVuZGVyZWQgaW4uXG4gKiBAcGFyYW0ge0VudGl0eUNvbGxlY3Rpb259IGVudGl0eUNvbGxlY3Rpb24gVGhlIGVudGl0eUNvbGxlY3Rpb24gdG8gdmlzdWFsaXplLlxuICogQHBhcmFtIHtQcmltaXRpdmVDb2xsZWN0aW9ufSBbcHJpbWl0aXZlcz1zY2VuZS5wcmltaXRpdmVzXSBBIGNvbGxlY3Rpb24gdG8gYWRkIHByaW1pdGl2ZXMgcmVsYXRlZCB0byB0aGUgZW50aXRpZXNcbiAqIEBwYXJhbSB7UHJpbWl0aXZlQ29sbGVjdGlvbn0gW2dyb3VuZFByaW1pdGl2ZXM9c2NlbmUuZ3JvdW5kUHJpbWl0aXZlc10gQSBjb2xsZWN0aW9uIHRvIGFkZCBncm91bmQgcHJpbWl0aXZlcyByZWxhdGVkIHRvIHRoZSBlbnRpdGllc1xuICovXG5mdW5jdGlvbiBHZW9tZXRyeVZpc3VhbGl6ZXIoXG4gIHNjZW5lLFxuICBlbnRpdHlDb2xsZWN0aW9uLFxuICBwcmltaXRpdmVzLFxuICBncm91bmRQcmltaXRpdmVzXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInNjZW5lXCIsIHNjZW5lKTtcbiAgQ2hlY2suZGVmaW5lZChcImVudGl0eUNvbGxlY3Rpb25cIiwgZW50aXR5Q29sbGVjdGlvbik7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHByaW1pdGl2ZXMgPSBkZWZhdWx0VmFsdWUocHJpbWl0aXZlcywgc2NlbmUucHJpbWl0aXZlcyk7XG4gIGdyb3VuZFByaW1pdGl2ZXMgPSBkZWZhdWx0VmFsdWUoZ3JvdW5kUHJpbWl0aXZlcywgc2NlbmUuZ3JvdW5kUHJpbWl0aXZlcyk7XG5cbiAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgdGhpcy5fcHJpbWl0aXZlcyA9IHByaW1pdGl2ZXM7XG4gIHRoaXMuX2dyb3VuZFByaW1pdGl2ZXMgPSBncm91bmRQcmltaXRpdmVzO1xuICB0aGlzLl9lbnRpdHlDb2xsZWN0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9hZGRlZE9iamVjdHMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLl9yZW1vdmVkT2JqZWN0cyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHRoaXMuX2NoYW5nZWRPYmplY3RzID0gbmV3IEFzc29jaWF0aXZlQXJyYXkoKTtcblxuICB2YXIgbnVtYmVyT2ZTaGFkb3dNb2RlcyA9IFNoYWRvd01vZGUuTlVNQkVSX09GX1NIQURPV19NT0RFUztcbiAgdGhpcy5fb3V0bGluZUJhdGNoZXMgPSBuZXcgQXJyYXkobnVtYmVyT2ZTaGFkb3dNb2RlcyAqIDIpO1xuICB0aGlzLl9jbG9zZWRDb2xvckJhdGNoZXMgPSBuZXcgQXJyYXkobnVtYmVyT2ZTaGFkb3dNb2RlcyAqIDIpO1xuICB0aGlzLl9jbG9zZWRNYXRlcmlhbEJhdGNoZXMgPSBuZXcgQXJyYXkobnVtYmVyT2ZTaGFkb3dNb2RlcyAqIDIpO1xuICB0aGlzLl9vcGVuQ29sb3JCYXRjaGVzID0gbmV3IEFycmF5KG51bWJlck9mU2hhZG93TW9kZXMgKiAyKTtcbiAgdGhpcy5fb3Blbk1hdGVyaWFsQmF0Y2hlcyA9IG5ldyBBcnJheShudW1iZXJPZlNoYWRvd01vZGVzICogMik7XG5cbiAgdmFyIHN1cHBvcnRzTWF0ZXJpYWxzZm9yRW50aXRpZXNPblRlcnJhaW4gPSBFbnRpdHkuc3VwcG9ydHNNYXRlcmlhbHNmb3JFbnRpdGllc09uVGVycmFpbihcbiAgICBzY2VuZVxuICApO1xuICB0aGlzLl9zdXBwb3J0c01hdGVyaWFsc2ZvckVudGl0aWVzT25UZXJyYWluID0gc3VwcG9ydHNNYXRlcmlhbHNmb3JFbnRpdGllc09uVGVycmFpbjtcblxuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IG51bWJlck9mU2hhZG93TW9kZXM7ICsraSkge1xuICAgIHRoaXMuX291dGxpbmVCYXRjaGVzW2ldID0gbmV3IFN0YXRpY091dGxpbmVHZW9tZXRyeUJhdGNoKFxuICAgICAgcHJpbWl0aXZlcyxcbiAgICAgIHNjZW5lLFxuICAgICAgaSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICB0aGlzLl9vdXRsaW5lQmF0Y2hlc1tcbiAgICAgIG51bWJlck9mU2hhZG93TW9kZXMgKyBpXG4gICAgXSA9IG5ldyBTdGF0aWNPdXRsaW5lR2VvbWV0cnlCYXRjaChwcmltaXRpdmVzLCBzY2VuZSwgaSwgdHJ1ZSk7XG5cbiAgICB0aGlzLl9jbG9zZWRDb2xvckJhdGNoZXNbaV0gPSBuZXcgU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoKFxuICAgICAgcHJpbWl0aXZlcyxcbiAgICAgIFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdHJ1ZSxcbiAgICAgIGksXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICB0aGlzLl9jbG9zZWRDb2xvckJhdGNoZXNbXG4gICAgICBudW1iZXJPZlNoYWRvd01vZGVzICsgaVxuICAgIF0gPSBuZXcgU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoKFxuICAgICAgcHJpbWl0aXZlcyxcbiAgICAgIFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdHJ1ZSxcbiAgICAgIGksXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICB0aGlzLl9jbG9zZWRNYXRlcmlhbEJhdGNoZXNbaV0gPSBuZXcgU3RhdGljR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoKFxuICAgICAgcHJpbWl0aXZlcyxcbiAgICAgIE1hdGVyaWFsQXBwZWFyYW5jZSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHRydWUsXG4gICAgICBpLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5fY2xvc2VkTWF0ZXJpYWxCYXRjaGVzW1xuICAgICAgbnVtYmVyT2ZTaGFkb3dNb2RlcyArIGlcbiAgICBdID0gbmV3IFN0YXRpY0dlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaChcbiAgICAgIHByaW1pdGl2ZXMsXG4gICAgICBNYXRlcmlhbEFwcGVhcmFuY2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0cnVlLFxuICAgICAgaSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIHRoaXMuX29wZW5Db2xvckJhdGNoZXNbaV0gPSBuZXcgU3RhdGljR2VvbWV0cnlDb2xvckJhdGNoKFxuICAgICAgcHJpbWl0aXZlcyxcbiAgICAgIFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgZmFsc2UsXG4gICAgICBpLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgdGhpcy5fb3BlbkNvbG9yQmF0Y2hlc1tcbiAgICAgIG51bWJlck9mU2hhZG93TW9kZXMgKyBpXG4gICAgXSA9IG5ldyBTdGF0aWNHZW9tZXRyeUNvbG9yQmF0Y2goXG4gICAgICBwcmltaXRpdmVzLFxuICAgICAgUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBmYWxzZSxcbiAgICAgIGksXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICB0aGlzLl9vcGVuTWF0ZXJpYWxCYXRjaGVzW2ldID0gbmV3IFN0YXRpY0dlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaChcbiAgICAgIHByaW1pdGl2ZXMsXG4gICAgICBNYXRlcmlhbEFwcGVhcmFuY2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBmYWxzZSxcbiAgICAgIGksXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICB0aGlzLl9vcGVuTWF0ZXJpYWxCYXRjaGVzW1xuICAgICAgbnVtYmVyT2ZTaGFkb3dNb2RlcyArIGlcbiAgICBdID0gbmV3IFN0YXRpY0dlb21ldHJ5UGVyTWF0ZXJpYWxCYXRjaChcbiAgICAgIHByaW1pdGl2ZXMsXG4gICAgICBNYXRlcmlhbEFwcGVhcmFuY2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBmYWxzZSxcbiAgICAgIGksXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICB2YXIgbnVtYmVyT2ZDbGFzc2lmaWNhdGlvblR5cGVzID1cbiAgICBDbGFzc2lmaWNhdGlvblR5cGUuTlVNQkVSX09GX0NMQVNTSUZJQ0FUSU9OX1RZUEVTO1xuICB2YXIgZ3JvdW5kQ29sb3JCYXRjaGVzID0gbmV3IEFycmF5KG51bWJlck9mQ2xhc3NpZmljYXRpb25UeXBlcyk7XG4gIHZhciBncm91bmRNYXRlcmlhbEJhdGNoZXMgPSBbXTtcbiAgaWYgKHN1cHBvcnRzTWF0ZXJpYWxzZm9yRW50aXRpZXNPblRlcnJhaW4pIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtYmVyT2ZDbGFzc2lmaWNhdGlvblR5cGVzOyArK2kpIHtcbiAgICAgIGdyb3VuZE1hdGVyaWFsQmF0Y2hlcy5wdXNoKFxuICAgICAgICBuZXcgU3RhdGljR3JvdW5kR2VvbWV0cnlQZXJNYXRlcmlhbEJhdGNoKFxuICAgICAgICAgIGdyb3VuZFByaW1pdGl2ZXMsXG4gICAgICAgICAgaSxcbiAgICAgICAgICBNYXRlcmlhbEFwcGVhcmFuY2VcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGdyb3VuZENvbG9yQmF0Y2hlc1tpXSA9IG5ldyBTdGF0aWNHcm91bmRHZW9tZXRyeUNvbG9yQmF0Y2goXG4gICAgICAgIGdyb3VuZFByaW1pdGl2ZXMsXG4gICAgICAgIGlcbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAoaSA9IDA7IGkgPCBudW1iZXJPZkNsYXNzaWZpY2F0aW9uVHlwZXM7ICsraSkge1xuICAgICAgZ3JvdW5kQ29sb3JCYXRjaGVzW2ldID0gbmV3IFN0YXRpY0dyb3VuZEdlb21ldHJ5Q29sb3JCYXRjaChcbiAgICAgICAgZ3JvdW5kUHJpbWl0aXZlcyxcbiAgICAgICAgaVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLl9ncm91bmRDb2xvckJhdGNoZXMgPSBncm91bmRDb2xvckJhdGNoZXM7XG4gIHRoaXMuX2dyb3VuZE1hdGVyaWFsQmF0Y2hlcyA9IGdyb3VuZE1hdGVyaWFsQmF0Y2hlcztcblxuICB0aGlzLl9keW5hbWljQmF0Y2ggPSBuZXcgRHluYW1pY0dlb21ldHJ5QmF0Y2gocHJpbWl0aXZlcywgZ3JvdW5kUHJpbWl0aXZlcyk7XG5cbiAgdGhpcy5fYmF0Y2hlcyA9IHRoaXMuX291dGxpbmVCYXRjaGVzLmNvbmNhdChcbiAgICB0aGlzLl9jbG9zZWRDb2xvckJhdGNoZXMsXG4gICAgdGhpcy5fY2xvc2VkTWF0ZXJpYWxCYXRjaGVzLFxuICAgIHRoaXMuX29wZW5Db2xvckJhdGNoZXMsXG4gICAgdGhpcy5fb3Blbk1hdGVyaWFsQmF0Y2hlcyxcbiAgICB0aGlzLl9ncm91bmRDb2xvckJhdGNoZXMsXG4gICAgdGhpcy5fZ3JvdW5kTWF0ZXJpYWxCYXRjaGVzLFxuICAgIHRoaXMuX2R5bmFtaWNCYXRjaFxuICApO1xuXG4gIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLl91cGRhdGVyU2V0cyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG5cbiAgdGhpcy5fZW50aXR5Q29sbGVjdGlvbiA9IGVudGl0eUNvbGxlY3Rpb247XG4gIGVudGl0eUNvbGxlY3Rpb24uY29sbGVjdGlvbkNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBHZW9tZXRyeVZpc3VhbGl6ZXIucHJvdG90eXBlLl9vbkNvbGxlY3Rpb25DaGFuZ2VkLFxuICAgIHRoaXNcbiAgKTtcbiAgdGhpcy5fb25Db2xsZWN0aW9uQ2hhbmdlZChcbiAgICBlbnRpdHlDb2xsZWN0aW9uLFxuICAgIGVudGl0eUNvbGxlY3Rpb24udmFsdWVzLFxuICAgIGVtcHR5QXJyYXlcbiAgKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGFsbCBvZiB0aGUgcHJpbWl0aXZlcyBjcmVhdGVkIGJ5IHRoaXMgdmlzdWFsaXplciB0byBtYXRjaCB0aGVpclxuICogRW50aXR5IGNvdW50ZXJwYXJ0IGF0IHRoZSBnaXZlbiB0aW1lLlxuICpcbiAqIEBwYXJhbSB7SnVsaWFuRGF0ZX0gdGltZSBUaGUgdGltZSB0byB1cGRhdGUgdG8uXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmlzdWFsaXplciBzdWNjZXNzZnVsbHkgdXBkYXRlZCB0byB0aGUgcHJvdmlkZWQgdGltZSxcbiAqIGZhbHNlIGlmIHRoZSB2aXN1YWxpemVyIGlzIHdhaXRpbmcgZm9yIGFzeW5jaHJvbm91cyBwcmltaXRpdmVzIHRvIGJlIGNyZWF0ZWQuXG4gKi9cbkdlb21ldHJ5VmlzdWFsaXplci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcInRpbWVcIiwgdGltZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBhZGRlZE9iamVjdHMgPSB0aGlzLl9hZGRlZE9iamVjdHM7XG4gIHZhciBhZGRlZCA9IGFkZGVkT2JqZWN0cy52YWx1ZXM7XG4gIHZhciByZW1vdmVkT2JqZWN0cyA9IHRoaXMuX3JlbW92ZWRPYmplY3RzO1xuICB2YXIgcmVtb3ZlZCA9IHJlbW92ZWRPYmplY3RzLnZhbHVlcztcbiAgdmFyIGNoYW5nZWRPYmplY3RzID0gdGhpcy5fY2hhbmdlZE9iamVjdHM7XG4gIHZhciBjaGFuZ2VkID0gY2hhbmdlZE9iamVjdHMudmFsdWVzO1xuXG4gIHZhciBpO1xuICB2YXIgZW50aXR5O1xuICB2YXIgaWQ7XG4gIHZhciB1cGRhdGVyU2V0O1xuICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgZm9yIChpID0gY2hhbmdlZC5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xuICAgIGVudGl0eSA9IGNoYW5nZWRbaV07XG4gICAgaWQgPSBlbnRpdHkuaWQ7XG4gICAgdXBkYXRlclNldCA9IHRoaXMuX3VwZGF0ZXJTZXRzLmdldChpZCk7XG5cbiAgICAvL0lmIGluIGEgc2luZ2xlIHVwZGF0ZSwgYW4gZW50aXR5IGdldHMgcmVtb3ZlZCBhbmQgYSBuZXcgaW5zdGFuY2VcbiAgICAvL3JlLWFkZGVkIHdpdGggdGhlIHNhbWUgaWQsIHRoZSB1cGRhdGVyIG5vIGxvbmdlciB0cmFja3MgdGhlXG4gICAgLy9jb3JyZWN0IGVudGl0eSwgd2UgbmVlZCB0byBib3RoIHJlbW92ZSB0aGUgb2xkIG9uZSBhbmRcbiAgICAvL2FkZCB0aGUgbmV3IG9uZSwgd2hpY2ggaXMgZG9uZSBieSBwdXNoaW5nIHRoZSBlbnRpdHlcbiAgICAvL29udG8gdGhlIHJlbW92ZWQvYWRkZWQgbGlzdHMuXG4gICAgaWYgKHVwZGF0ZXJTZXQuZW50aXR5ID09PSBlbnRpdHkpIHtcbiAgICAgIHVwZGF0ZXJTZXQuZm9yRWFjaChmdW5jdGlvbiAodXBkYXRlcikge1xuICAgICAgICB0aGF0Ll9yZW1vdmVVcGRhdGVyKHVwZGF0ZXIpO1xuICAgICAgICB0aGF0Ll9pbnNlcnRVcGRhdGVySW50b0JhdGNoKHRpbWUsIHVwZGF0ZXIpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZWQucHVzaChlbnRpdHkpO1xuICAgICAgYWRkZWQucHVzaChlbnRpdHkpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAoaSA9IHJlbW92ZWQubGVuZ3RoIC0gMTsgaSA+IC0xOyBpLS0pIHtcbiAgICBlbnRpdHkgPSByZW1vdmVkW2ldO1xuICAgIGlkID0gZW50aXR5LmlkO1xuICAgIHVwZGF0ZXJTZXQgPSB0aGlzLl91cGRhdGVyU2V0cy5nZXQoaWQpO1xuICAgIHVwZGF0ZXJTZXQuZm9yRWFjaCh0aGlzLl9yZW1vdmVVcGRhdGVyLmJpbmQodGhpcykpO1xuICAgIHVwZGF0ZXJTZXQuZGVzdHJveSgpO1xuICAgIHRoaXMuX3VwZGF0ZXJTZXRzLnJlbW92ZShpZCk7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5nZXQoaWQpKCk7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5yZW1vdmUoaWQpO1xuICB9XG5cbiAgZm9yIChpID0gYWRkZWQubGVuZ3RoIC0gMTsgaSA+IC0xOyBpLS0pIHtcbiAgICBlbnRpdHkgPSBhZGRlZFtpXTtcbiAgICBpZCA9IGVudGl0eS5pZDtcbiAgICB1cGRhdGVyU2V0ID0gbmV3IEdlb21ldHJ5VXBkYXRlclNldChlbnRpdHksIHRoaXMuX3NjZW5lKTtcbiAgICB0aGlzLl91cGRhdGVyU2V0cy5zZXQoaWQsIHVwZGF0ZXJTZXQpO1xuICAgIHVwZGF0ZXJTZXQuZm9yRWFjaChmdW5jdGlvbiAodXBkYXRlcikge1xuICAgICAgdGhhdC5faW5zZXJ0VXBkYXRlckludG9CYXRjaCh0aW1lLCB1cGRhdGVyKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnNldChcbiAgICAgIGlkLFxuICAgICAgdXBkYXRlclNldC5nZW9tZXRyeUNoYW5nZWQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgR2VvbWV0cnlWaXN1YWxpemVyLl9vbkdlb21ldHJ5Q2hhbmdlZCxcbiAgICAgICAgdGhpc1xuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBhZGRlZE9iamVjdHMucmVtb3ZlQWxsKCk7XG4gIHJlbW92ZWRPYmplY3RzLnJlbW92ZUFsbCgpO1xuICBjaGFuZ2VkT2JqZWN0cy5yZW1vdmVBbGwoKTtcblxuICB2YXIgaXNVcGRhdGVkID0gdHJ1ZTtcbiAgdmFyIGJhdGNoZXMgPSB0aGlzLl9iYXRjaGVzO1xuICB2YXIgbGVuZ3RoID0gYmF0Y2hlcy5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlzVXBkYXRlZCA9IGJhdGNoZXNbaV0udXBkYXRlKHRpbWUpICYmIGlzVXBkYXRlZDtcbiAgfVxuXG4gIHJldHVybiBpc1VwZGF0ZWQ7XG59O1xuXG52YXIgZ2V0Qm91bmRpbmdTcGhlcmVBcnJheVNjcmF0Y2ggPSBbXTtcbnZhciBnZXRCb3VuZGluZ1NwaGVyZUJvdW5kaW5nU3BoZXJlU2NyYXRjaCA9IG5ldyBCb3VuZGluZ1NwaGVyZSgpO1xuXG4vKipcbiAqIENvbXB1dGVzIGEgYm91bmRpbmcgc3BoZXJlIHdoaWNoIGVuY2xvc2VzIHRoZSB2aXN1YWxpemF0aW9uIHByb2R1Y2VkIGZvciB0aGUgc3BlY2lmaWVkIGVudGl0eS5cbiAqIFRoZSBib3VuZGluZyBzcGhlcmUgaXMgaW4gdGhlIGZpeGVkIGZyYW1lIG9mIHRoZSBzY2VuZSdzIGdsb2JlLlxuICpcbiAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgVGhlIGVudGl0eSB3aG9zZSBib3VuZGluZyBzcGhlcmUgdG8gY29tcHV0ZS5cbiAqIEBwYXJhbSB7Qm91bmRpbmdTcGhlcmV9IHJlc3VsdCBUaGUgYm91bmRpbmcgc3BoZXJlIG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtCb3VuZGluZ1NwaGVyZVN0YXRlfSBCb3VuZGluZ1NwaGVyZVN0YXRlLkRPTkUgaWYgdGhlIHJlc3VsdCBjb250YWlucyB0aGUgYm91bmRpbmcgc3BoZXJlLFxuICogICAgICAgICAgICAgICAgICAgICAgIEJvdW5kaW5nU3BoZXJlU3RhdGUuUEVORElORyBpZiB0aGUgcmVzdWx0IGlzIHN0aWxsIGJlaW5nIGNvbXB1dGVkLCBvclxuICogICAgICAgICAgICAgICAgICAgICAgIEJvdW5kaW5nU3BoZXJlU3RhdGUuRkFJTEVEIGlmIHRoZSBlbnRpdHkgaGFzIG5vIHZpc3VhbGl6YXRpb24gaW4gdGhlIGN1cnJlbnQgc2NlbmUuXG4gKiBAcHJpdmF0ZVxuICovXG5HZW9tZXRyeVZpc3VhbGl6ZXIucHJvdG90eXBlLmdldEJvdW5kaW5nU3BoZXJlID0gZnVuY3Rpb24gKGVudGl0eSwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLmRlZmluZWQoXCJlbnRpdHlcIiwgZW50aXR5KTtcbiAgQ2hlY2suZGVmaW5lZChcInJlc3VsdFwiLCByZXN1bHQpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgYm91bmRpbmdTcGhlcmVzID0gZ2V0Qm91bmRpbmdTcGhlcmVBcnJheVNjcmF0Y2g7XG4gIHZhciB0bXAgPSBnZXRCb3VuZGluZ1NwaGVyZUJvdW5kaW5nU3BoZXJlU2NyYXRjaDtcblxuICB2YXIgY291bnQgPSAwO1xuICB2YXIgc3RhdGUgPSBCb3VuZGluZ1NwaGVyZVN0YXRlLkRPTkU7XG4gIHZhciBiYXRjaGVzID0gdGhpcy5fYmF0Y2hlcztcbiAgdmFyIGJhdGNoZXNMZW5ndGggPSBiYXRjaGVzLmxlbmd0aDtcblxuICB2YXIgaWQgPSBlbnRpdHkuaWQ7XG4gIHZhciB1cGRhdGVycyA9IHRoaXMuX3VwZGF0ZXJTZXRzLmdldChpZCkudXBkYXRlcnM7XG5cbiAgZm9yICh2YXIgaiA9IDA7IGogPCB1cGRhdGVycy5sZW5ndGg7IGorKykge1xuICAgIHZhciB1cGRhdGVyID0gdXBkYXRlcnNbal07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYXRjaGVzTGVuZ3RoOyBpKyspIHtcbiAgICAgIHN0YXRlID0gYmF0Y2hlc1tpXS5nZXRCb3VuZGluZ1NwaGVyZSh1cGRhdGVyLCB0bXApO1xuICAgICAgaWYgKHN0YXRlID09PSBCb3VuZGluZ1NwaGVyZVN0YXRlLlBFTkRJTkcpIHtcbiAgICAgICAgcmV0dXJuIEJvdW5kaW5nU3BoZXJlU3RhdGUuUEVORElORztcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09IEJvdW5kaW5nU3BoZXJlU3RhdGUuRE9ORSkge1xuICAgICAgICBib3VuZGluZ1NwaGVyZXNbY291bnRdID0gQm91bmRpbmdTcGhlcmUuY2xvbmUoXG4gICAgICAgICAgdG1wLFxuICAgICAgICAgIGJvdW5kaW5nU3BoZXJlc1tjb3VudF1cbiAgICAgICAgKTtcbiAgICAgICAgY291bnQrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoY291bnQgPT09IDApIHtcbiAgICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQ7XG4gIH1cblxuICBib3VuZGluZ1NwaGVyZXMubGVuZ3RoID0gY291bnQ7XG4gIEJvdW5kaW5nU3BoZXJlLmZyb21Cb3VuZGluZ1NwaGVyZXMoYm91bmRpbmdTcGhlcmVzLCByZXN1bHQpO1xuICByZXR1cm4gQm91bmRpbmdTcGhlcmVTdGF0ZS5ET05FO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICovXG5HZW9tZXRyeVZpc3VhbGl6ZXIucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYW5kIGRlc3Ryb3lzIGFsbCBwcmltaXRpdmVzIGNyZWF0ZWQgYnkgdGhpcyBpbnN0YW5jZS5cbiAqL1xuR2VvbWV0cnlWaXN1YWxpemVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9lbnRpdHlDb2xsZWN0aW9uLmNvbGxlY3Rpb25DaGFuZ2VkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgR2VvbWV0cnlWaXN1YWxpemVyLnByb3RvdHlwZS5fb25Db2xsZWN0aW9uQ2hhbmdlZCxcbiAgICB0aGlzXG4gICk7XG4gIHRoaXMuX2FkZGVkT2JqZWN0cy5yZW1vdmVBbGwoKTtcbiAgdGhpcy5fcmVtb3ZlZE9iamVjdHMucmVtb3ZlQWxsKCk7XG5cbiAgdmFyIGk7XG4gIHZhciBiYXRjaGVzID0gdGhpcy5fYmF0Y2hlcztcbiAgdmFyIGxlbmd0aCA9IGJhdGNoZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBiYXRjaGVzW2ldLnJlbW92ZUFsbFByaW1pdGl2ZXMoKTtcbiAgfVxuXG4gIHZhciBzdWJzY3JpcHRpb25zID0gdGhpcy5fc3Vic2NyaXB0aW9ucy52YWx1ZXM7XG4gIGxlbmd0aCA9IHN1YnNjcmlwdGlvbnMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBzdWJzY3JpcHRpb25zW2ldKCk7XG4gIH1cbiAgdGhpcy5fc3Vic2NyaXB0aW9ucy5yZW1vdmVBbGwoKTtcblxuICB2YXIgdXBkYXRlclNldHMgPSB0aGlzLl91cGRhdGVyU2V0cy52YWx1ZXM7XG4gIGxlbmd0aCA9IHVwZGF0ZXJTZXRzLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdXBkYXRlclNldHNbaV0uZGVzdHJveSgpO1xuICB9XG4gIHRoaXMuX3VwZGF0ZXJTZXRzLnJlbW92ZUFsbCgpO1xuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuR2VvbWV0cnlWaXN1YWxpemVyLnByb3RvdHlwZS5fcmVtb3ZlVXBkYXRlciA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIC8vV2UgZG9uJ3Qga2VlcCB0cmFjayBvZiB3aGljaCBiYXRjaCBhbiB1cGRhdGVyIGlzIGluLCBzbyBqdXN0IHJlbW92ZSBpdCBmcm9tIGFsbCBvZiB0aGVtLlxuICB2YXIgYmF0Y2hlcyA9IHRoaXMuX2JhdGNoZXM7XG4gIHZhciBsZW5ndGggPSBiYXRjaGVzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGJhdGNoZXNbaV0ucmVtb3ZlKHVwZGF0ZXIpO1xuICB9XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkdlb21ldHJ5VmlzdWFsaXplci5wcm90b3R5cGUuX2luc2VydFVwZGF0ZXJJbnRvQmF0Y2ggPSBmdW5jdGlvbiAoXG4gIHRpbWUsXG4gIHVwZGF0ZXJcbikge1xuICBpZiAodXBkYXRlci5pc0R5bmFtaWMpIHtcbiAgICB0aGlzLl9keW5hbWljQmF0Y2guYWRkKHRpbWUsIHVwZGF0ZXIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBzaGFkb3dzO1xuICBpZiAodXBkYXRlci5vdXRsaW5lRW5hYmxlZCB8fCB1cGRhdGVyLmZpbGxFbmFibGVkKSB7XG4gICAgc2hhZG93cyA9IHVwZGF0ZXIuc2hhZG93c1Byb3BlcnR5LmdldFZhbHVlKHRpbWUpO1xuICB9XG5cbiAgdmFyIG51bWJlck9mU2hhZG93TW9kZXMgPSBTaGFkb3dNb2RlLk5VTUJFUl9PRl9TSEFET1dfTU9ERVM7XG4gIGlmICh1cGRhdGVyLm91dGxpbmVFbmFibGVkKSB7XG4gICAgaWYgKGRlZmluZWQodXBkYXRlci50ZXJyYWluT2Zmc2V0UHJvcGVydHkpKSB7XG4gICAgICB0aGlzLl9vdXRsaW5lQmF0Y2hlc1tudW1iZXJPZlNoYWRvd01vZGVzICsgc2hhZG93c10uYWRkKHRpbWUsIHVwZGF0ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vdXRsaW5lQmF0Y2hlc1tzaGFkb3dzXS5hZGQodGltZSwgdXBkYXRlcik7XG4gICAgfVxuICB9XG5cbiAgaWYgKHVwZGF0ZXIuZmlsbEVuYWJsZWQpIHtcbiAgICBpZiAodXBkYXRlci5vblRlcnJhaW4pIHtcbiAgICAgIHZhciBjbGFzc2lmaWNhdGlvblR5cGUgPSB1cGRhdGVyLmNsYXNzaWZpY2F0aW9uVHlwZVByb3BlcnR5LmdldFZhbHVlKFxuICAgICAgICB0aW1lXG4gICAgICApO1xuICAgICAgaWYgKHVwZGF0ZXIuZmlsbE1hdGVyaWFsUHJvcGVydHkgaW5zdGFuY2VvZiBDb2xvck1hdGVyaWFsUHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy5fZ3JvdW5kQ29sb3JCYXRjaGVzW2NsYXNzaWZpY2F0aW9uVHlwZV0uYWRkKHRpbWUsIHVwZGF0ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdW5zdXBwb3J0ZWQsIHVwZGF0ZXIgd2lsbCBub3QgYmUgb24gdGVycmFpbi5cbiAgICAgICAgdGhpcy5fZ3JvdW5kTWF0ZXJpYWxCYXRjaGVzW2NsYXNzaWZpY2F0aW9uVHlwZV0uYWRkKHRpbWUsIHVwZGF0ZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodXBkYXRlci5pc0Nsb3NlZCkge1xuICAgICAgaWYgKHVwZGF0ZXIuZmlsbE1hdGVyaWFsUHJvcGVydHkgaW5zdGFuY2VvZiBDb2xvck1hdGVyaWFsUHJvcGVydHkpIHtcbiAgICAgICAgaWYgKGRlZmluZWQodXBkYXRlci50ZXJyYWluT2Zmc2V0UHJvcGVydHkpKSB7XG4gICAgICAgICAgdGhpcy5fY2xvc2VkQ29sb3JCYXRjaGVzW251bWJlck9mU2hhZG93TW9kZXMgKyBzaGFkb3dzXS5hZGQoXG4gICAgICAgICAgICB0aW1lLFxuICAgICAgICAgICAgdXBkYXRlclxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fY2xvc2VkQ29sb3JCYXRjaGVzW3NoYWRvd3NdLmFkZCh0aW1lLCB1cGRhdGVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChkZWZpbmVkKHVwZGF0ZXIudGVycmFpbk9mZnNldFByb3BlcnR5KSkge1xuICAgICAgICB0aGlzLl9jbG9zZWRNYXRlcmlhbEJhdGNoZXNbbnVtYmVyT2ZTaGFkb3dNb2RlcyArIHNoYWRvd3NdLmFkZChcbiAgICAgICAgICB0aW1lLFxuICAgICAgICAgIHVwZGF0ZXJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Nsb3NlZE1hdGVyaWFsQmF0Y2hlc1tzaGFkb3dzXS5hZGQodGltZSwgdXBkYXRlcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh1cGRhdGVyLmZpbGxNYXRlcmlhbFByb3BlcnR5IGluc3RhbmNlb2YgQ29sb3JNYXRlcmlhbFByb3BlcnR5KSB7XG4gICAgICBpZiAoZGVmaW5lZCh1cGRhdGVyLnRlcnJhaW5PZmZzZXRQcm9wZXJ0eSkpIHtcbiAgICAgICAgdGhpcy5fb3BlbkNvbG9yQmF0Y2hlc1tudW1iZXJPZlNoYWRvd01vZGVzICsgc2hhZG93c10uYWRkKFxuICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgdXBkYXRlclxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fb3BlbkNvbG9yQmF0Y2hlc1tzaGFkb3dzXS5hZGQodGltZSwgdXBkYXRlcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKHVwZGF0ZXIudGVycmFpbk9mZnNldFByb3BlcnR5KSkge1xuICAgICAgdGhpcy5fb3Blbk1hdGVyaWFsQmF0Y2hlc1tudW1iZXJPZlNoYWRvd01vZGVzICsgc2hhZG93c10uYWRkKFxuICAgICAgICB0aW1lLFxuICAgICAgICB1cGRhdGVyXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vcGVuTWF0ZXJpYWxCYXRjaGVzW3NoYWRvd3NdLmFkZCh0aW1lLCB1cGRhdGVyKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuR2VvbWV0cnlWaXN1YWxpemVyLl9vbkdlb21ldHJ5Q2hhbmdlZCA9IGZ1bmN0aW9uICh1cGRhdGVyKSB7XG4gIHZhciByZW1vdmVkT2JqZWN0cyA9IHRoaXMuX3JlbW92ZWRPYmplY3RzO1xuICB2YXIgY2hhbmdlZE9iamVjdHMgPSB0aGlzLl9jaGFuZ2VkT2JqZWN0cztcblxuICB2YXIgZW50aXR5ID0gdXBkYXRlci5lbnRpdHk7XG4gIHZhciBpZCA9IGVudGl0eS5pZDtcblxuICBpZiAoIWRlZmluZWQocmVtb3ZlZE9iamVjdHMuZ2V0KGlkKSkgJiYgIWRlZmluZWQoY2hhbmdlZE9iamVjdHMuZ2V0KGlkKSkpIHtcbiAgICBjaGFuZ2VkT2JqZWN0cy5zZXQoaWQsIGVudGl0eSk7XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuR2VvbWV0cnlWaXN1YWxpemVyLnByb3RvdHlwZS5fb25Db2xsZWN0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uIChcbiAgZW50aXR5Q29sbGVjdGlvbixcbiAgYWRkZWQsXG4gIHJlbW92ZWRcbikge1xuICB2YXIgYWRkZWRPYmplY3RzID0gdGhpcy5fYWRkZWRPYmplY3RzO1xuICB2YXIgcmVtb3ZlZE9iamVjdHMgPSB0aGlzLl9yZW1vdmVkT2JqZWN0cztcbiAgdmFyIGNoYW5nZWRPYmplY3RzID0gdGhpcy5fY2hhbmdlZE9iamVjdHM7XG5cbiAgdmFyIGk7XG4gIHZhciBpZDtcbiAgdmFyIGVudGl0eTtcbiAgZm9yIChpID0gcmVtb3ZlZC5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xuICAgIGVudGl0eSA9IHJlbW92ZWRbaV07XG4gICAgaWQgPSBlbnRpdHkuaWQ7XG4gICAgaWYgKCFhZGRlZE9iamVjdHMucmVtb3ZlKGlkKSkge1xuICAgICAgcmVtb3ZlZE9iamVjdHMuc2V0KGlkLCBlbnRpdHkpO1xuICAgICAgY2hhbmdlZE9iamVjdHMucmVtb3ZlKGlkKTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGkgPSBhZGRlZC5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xuICAgIGVudGl0eSA9IGFkZGVkW2ldO1xuICAgIGlkID0gZW50aXR5LmlkO1xuICAgIGlmIChyZW1vdmVkT2JqZWN0cy5yZW1vdmUoaWQpKSB7XG4gICAgICBjaGFuZ2VkT2JqZWN0cy5zZXQoaWQsIGVudGl0eSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZGVkT2JqZWN0cy5zZXQoaWQsIGVudGl0eSk7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgR2VvbWV0cnlWaXN1YWxpemVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///60500\n')},84903:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14459);\n/* harmony import */ var _createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90203);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\nvar defaultColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].WHITE */ .Z.WHITE;\nvar defaultCellAlpha = 0.1;\nvar defaultLineCount = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(8, 8);\nvar defaultLineOffset = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(0, 0);\nvar defaultLineThickness = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(1, 1);\n\n/**\n * A {@link MaterialProperty} that maps to grid {@link Material} uniforms.\n * @alias GridMaterialProperty\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Property|Color} [options.color=Color.WHITE] A Property specifying the grid {@link Color}.\n * @param {Property|Number} [options.cellAlpha=0.1] A numeric Property specifying cell alpha values.\n * @param {Property|Cartesian2} [options.lineCount=new Cartesian2(8, 8)] A {@link Cartesian2} Property specifying the number of grid lines along each axis.\n * @param {Property|Cartesian2} [options.lineThickness=new Cartesian2(1.0, 1.0)] A {@link Cartesian2} Property specifying the thickness of grid lines along each axis.\n * @param {Property|Cartesian2} [options.lineOffset=new Cartesian2(0.0, 0.0)] A {@link Cartesian2} Property specifying starting offset of grid lines along each axis.\n *\n * @constructor\n */\nfunction GridMaterialProperty(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n  this._color = undefined;\n  this._colorSubscription = undefined;\n  this._cellAlpha = undefined;\n  this._cellAlphaSubscription = undefined;\n  this._lineCount = undefined;\n  this._lineCountSubscription = undefined;\n  this._lineThickness = undefined;\n  this._lineThicknessSubscription = undefined;\n  this._lineOffset = undefined;\n  this._lineOffsetSubscription = undefined;\n\n  this.color = options.color;\n  this.cellAlpha = options.cellAlpha;\n  this.lineCount = options.lineCount;\n  this.lineThickness = options.lineThickness;\n  this.lineOffset = options.lineOffset;\n}\n\nObject.defineProperties(GridMaterialProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.  A property is considered\n   * constant if getValue always returns the same result for the current definition.\n   * @memberof GridMaterialProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return (\n        _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._color) &&\n        _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._cellAlpha) &&\n        _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._lineCount) &&\n        _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._lineThickness) &&\n        _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._lineOffset)\n      );\n    },\n  },\n\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * The definition is considered to have changed if a call to getValue would return\n   * a different result for the same time.\n   * @memberof GridMaterialProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n\n  /**\n   * Gets or sets the Property specifying the grid {@link Color}.\n   * @memberof GridMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default Color.WHITE\n   */\n  color: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("color"),\n\n  /**\n   * Gets or sets the numeric Property specifying cell alpha values.\n   * @memberof GridMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default 0.1\n   */\n  cellAlpha: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("cellAlpha"),\n\n  /**\n   * Gets or sets the {@link Cartesian2} Property specifying the number of grid lines along each axis.\n   * @memberof GridMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default new Cartesian2(8.0, 8.0)\n   */\n  lineCount: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("lineCount"),\n\n  /**\n   * Gets or sets the {@link Cartesian2} Property specifying the thickness of grid lines along each axis.\n   * @memberof GridMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default new Cartesian2(1.0, 1.0)\n   */\n  lineThickness: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("lineThickness"),\n\n  /**\n   * Gets or sets the {@link Cartesian2} Property specifying the starting offset of grid lines along each axis.\n   * @memberof GridMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default new Cartesian2(0.0, 0.0)\n   */\n  lineOffset: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("lineOffset"),\n});\n\n/**\n * Gets the {@link Material} type at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the type.\n * @returns {String} The type of material.\n */\nGridMaterialProperty.prototype.getType = function (time) {\n  return "Grid";\n};\n\n/**\n * Gets the value of the property at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {Object} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Object} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nGridMaterialProperty.prototype.getValue = function (time, result) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(result)) {\n    result = {};\n  }\n  result.color = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._color,\n    time,\n    defaultColor,\n    result.color\n  );\n  result.cellAlpha = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(\n    this._cellAlpha,\n    time,\n    defaultCellAlpha\n  );\n  result.lineCount = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._lineCount,\n    time,\n    defaultLineCount,\n    result.lineCount\n  );\n  result.lineThickness = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._lineThickness,\n    time,\n    defaultLineThickness,\n    result.lineThickness\n  );\n  result.lineOffset = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._lineOffset,\n    time,\n    defaultLineOffset,\n    result.lineOffset\n  );\n  return result;\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nGridMaterialProperty.prototype.equals = function (other) {\n  return (\n    this === other || //\n    (other instanceof GridMaterialProperty && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._color, other._color) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._cellAlpha, other._cellAlpha) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._lineCount, other._lineCount) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._lineThickness, other._lineThickness) && //\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._lineOffset, other._lineOffset))\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (GridMaterialProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bS9Tb3VyY2UvRGF0YVNvdXJjZXMvR3JpZE1hdGVyaWFsUHJvcGVydHkuanM/ZmE5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL0NvcmUvQ29sb3IuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgZnJvbSBcIi4vY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yLmpzXCI7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSBcIi4vUHJvcGVydHkuanNcIjtcblxudmFyIGRlZmF1bHRDb2xvciA9IENvbG9yLldISVRFO1xudmFyIGRlZmF1bHRDZWxsQWxwaGEgPSAwLjE7XG52YXIgZGVmYXVsdExpbmVDb3VudCA9IG5ldyBDYXJ0ZXNpYW4yKDgsIDgpO1xudmFyIGRlZmF1bHRMaW5lT2Zmc2V0ID0gbmV3IENhcnRlc2lhbjIoMCwgMCk7XG52YXIgZGVmYXVsdExpbmVUaGlja25lc3MgPSBuZXcgQ2FydGVzaWFuMigxLCAxKTtcblxuLyoqXG4gKiBBIHtAbGluayBNYXRlcmlhbFByb3BlcnR5fSB0aGF0IG1hcHMgdG8gZ3JpZCB7QGxpbmsgTWF0ZXJpYWx9IHVuaWZvcm1zLlxuICogQGFsaWFzIEdyaWRNYXRlcmlhbFByb3BlcnR5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge1Byb3BlcnR5fENvbG9yfSBbb3B0aW9ucy5jb2xvcj1Db2xvci5XSElURV0gQSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSBncmlkIHtAbGluayBDb2xvcn0uXG4gKiBAcGFyYW0ge1Byb3BlcnR5fE51bWJlcn0gW29wdGlvbnMuY2VsbEFscGhhPTAuMV0gQSBudW1lcmljIFByb3BlcnR5IHNwZWNpZnlpbmcgY2VsbCBhbHBoYSB2YWx1ZXMuXG4gKiBAcGFyYW0ge1Byb3BlcnR5fENhcnRlc2lhbjJ9IFtvcHRpb25zLmxpbmVDb3VudD1uZXcgQ2FydGVzaWFuMig4LCA4KV0gQSB7QGxpbmsgQ2FydGVzaWFuMn0gUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGdyaWQgbGluZXMgYWxvbmcgZWFjaCBheGlzLlxuICogQHBhcmFtIHtQcm9wZXJ0eXxDYXJ0ZXNpYW4yfSBbb3B0aW9ucy5saW5lVGhpY2tuZXNzPW5ldyBDYXJ0ZXNpYW4yKDEuMCwgMS4wKV0gQSB7QGxpbmsgQ2FydGVzaWFuMn0gUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgdGhpY2tuZXNzIG9mIGdyaWQgbGluZXMgYWxvbmcgZWFjaCBheGlzLlxuICogQHBhcmFtIHtQcm9wZXJ0eXxDYXJ0ZXNpYW4yfSBbb3B0aW9ucy5saW5lT2Zmc2V0PW5ldyBDYXJ0ZXNpYW4yKDAuMCwgMC4wKV0gQSB7QGxpbmsgQ2FydGVzaWFuMn0gUHJvcGVydHkgc3BlY2lmeWluZyBzdGFydGluZyBvZmZzZXQgb2YgZ3JpZCBsaW5lcyBhbG9uZyBlYWNoIGF4aXMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEdyaWRNYXRlcmlhbFByb3BlcnR5KG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcblxuICB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9jb2xvciA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fY29sb3JTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2NlbGxBbHBoYSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fY2VsbEFscGhhU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICB0aGlzLl9saW5lQ291bnQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2xpbmVDb3VudFN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbGluZVRoaWNrbmVzcyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbGluZVRoaWNrbmVzc1N1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbGluZU9mZnNldCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbGluZU9mZnNldFN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcblxuICB0aGlzLmNvbG9yID0gb3B0aW9ucy5jb2xvcjtcbiAgdGhpcy5jZWxsQWxwaGEgPSBvcHRpb25zLmNlbGxBbHBoYTtcbiAgdGhpcy5saW5lQ291bnQgPSBvcHRpb25zLmxpbmVDb3VudDtcbiAgdGhpcy5saW5lVGhpY2tuZXNzID0gb3B0aW9ucy5saW5lVGhpY2tuZXNzO1xuICB0aGlzLmxpbmVPZmZzZXQgPSBvcHRpb25zLmxpbmVPZmZzZXQ7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdyaWRNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgaWYgdGhpcyBwcm9wZXJ0eSBpcyBjb25zdGFudC4gIEEgcHJvcGVydHkgaXMgY29uc2lkZXJlZFxuICAgKiBjb25zdGFudCBpZiBnZXRWYWx1ZSBhbHdheXMgcmV0dXJucyB0aGUgc2FtZSByZXN1bHQgZm9yIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBtZW1iZXJvZiBHcmlkTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaXNDb25zdGFudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl9jb2xvcikgJiZcbiAgICAgICAgUHJvcGVydHkuaXNDb25zdGFudCh0aGlzLl9jZWxsQWxwaGEpICYmXG4gICAgICAgIFByb3BlcnR5LmlzQ29uc3RhbnQodGhpcy5fbGluZUNvdW50KSAmJlxuICAgICAgICBQcm9wZXJ0eS5pc0NvbnN0YW50KHRoaXMuX2xpbmVUaGlja25lc3MpICYmXG4gICAgICAgIFByb3BlcnR5LmlzQ29uc3RhbnQodGhpcy5fbGluZU9mZnNldClcbiAgICAgICk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbmV2ZXIgdGhlIGRlZmluaXRpb24gb2YgdGhpcyBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKiBUaGUgZGVmaW5pdGlvbiBpcyBjb25zaWRlcmVkIHRvIGhhdmUgY2hhbmdlZCBpZiBhIGNhbGwgdG8gZ2V0VmFsdWUgd291bGQgcmV0dXJuXG4gICAqIGEgZGlmZmVyZW50IHJlc3VsdCBmb3IgdGhlIHNhbWUgdGltZS5cbiAgICogQG1lbWJlcm9mIEdyaWRNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZGVmaW5pdGlvbkNoYW5nZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uQ2hhbmdlZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIFByb3BlcnR5IHNwZWNpZnlpbmcgdGhlIGdyaWQge0BsaW5rIENvbG9yfS5cbiAgICogQG1lbWJlcm9mIEdyaWRNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCBDb2xvci5XSElURVxuICAgKi9cbiAgY29sb3I6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcImNvbG9yXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIG51bWVyaWMgUHJvcGVydHkgc3BlY2lmeWluZyBjZWxsIGFscGhhIHZhbHVlcy5cbiAgICogQG1lbWJlcm9mIEdyaWRNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCAwLjFcbiAgICovXG4gIGNlbGxBbHBoYTogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwiY2VsbEFscGhhXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHtAbGluayBDYXJ0ZXNpYW4yfSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgZ3JpZCBsaW5lcyBhbG9uZyBlYWNoIGF4aXMuXG4gICAqIEBtZW1iZXJvZiBHcmlkTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb3BlcnR5fHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgbmV3IENhcnRlc2lhbjIoOC4wLCA4LjApXG4gICAqL1xuICBsaW5lQ291bnQ6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcImxpbmVDb3VudFwiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSB7QGxpbmsgQ2FydGVzaWFuMn0gUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgdGhpY2tuZXNzIG9mIGdyaWQgbGluZXMgYWxvbmcgZWFjaCBheGlzLlxuICAgKiBAbWVtYmVyb2YgR3JpZE1hdGVyaWFsUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IG5ldyBDYXJ0ZXNpYW4yKDEuMCwgMS4wKVxuICAgKi9cbiAgbGluZVRoaWNrbmVzczogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwibGluZVRoaWNrbmVzc1wiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSB7QGxpbmsgQ2FydGVzaWFuMn0gUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgc3RhcnRpbmcgb2Zmc2V0IG9mIGdyaWQgbGluZXMgYWxvbmcgZWFjaCBheGlzLlxuICAgKiBAbWVtYmVyb2YgR3JpZE1hdGVyaWFsUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IG5ldyBDYXJ0ZXNpYW4yKDAuMCwgMC4wKVxuICAgKi9cbiAgbGluZU9mZnNldDogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKFwibGluZU9mZnNldFwiKSxcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIHtAbGluayBNYXRlcmlhbH0gdHlwZSBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHRpbWUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSB0eXBlLlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIHR5cGUgb2YgbWF0ZXJpYWwuXG4gKi9cbkdyaWRNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgcmV0dXJuIFwiR3JpZFwiO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgYXQgdGhlIHByb3ZpZGVkIHRpbWUuXG4gKlxuICogQHBhcmFtIHtKdWxpYW5EYXRlfSB0aW1lIFRoZSB0aW1lIGZvciB3aGljaCB0byByZXRyaWV2ZSB0aGUgdmFsdWUuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3VsdF0gVGhlIG9iamVjdCB0byBzdG9yZSB0aGUgdmFsdWUgaW50bywgaWYgb21pdHRlZCwgYSBuZXcgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbW9kaWZpZWQgcmVzdWx0IHBhcmFtZXRlciBvciBhIG5ldyBpbnN0YW5jZSBpZiB0aGUgcmVzdWx0IHBhcmFtZXRlciB3YXMgbm90IHN1cHBsaWVkLlxuICovXG5HcmlkTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAodGltZSwgcmVzdWx0KSB7XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0ge307XG4gIH1cbiAgcmVzdWx0LmNvbG9yID0gUHJvcGVydHkuZ2V0VmFsdWVPckNsb25lZERlZmF1bHQoXG4gICAgdGhpcy5fY29sb3IsXG4gICAgdGltZSxcbiAgICBkZWZhdWx0Q29sb3IsXG4gICAgcmVzdWx0LmNvbG9yXG4gICk7XG4gIHJlc3VsdC5jZWxsQWxwaGEgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yRGVmYXVsdChcbiAgICB0aGlzLl9jZWxsQWxwaGEsXG4gICAgdGltZSxcbiAgICBkZWZhdWx0Q2VsbEFscGhhXG4gICk7XG4gIHJlc3VsdC5saW5lQ291bnQgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yQ2xvbmVkRGVmYXVsdChcbiAgICB0aGlzLl9saW5lQ291bnQsXG4gICAgdGltZSxcbiAgICBkZWZhdWx0TGluZUNvdW50LFxuICAgIHJlc3VsdC5saW5lQ291bnRcbiAgKTtcbiAgcmVzdWx0LmxpbmVUaGlja25lc3MgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yQ2xvbmVkRGVmYXVsdChcbiAgICB0aGlzLl9saW5lVGhpY2tuZXNzLFxuICAgIHRpbWUsXG4gICAgZGVmYXVsdExpbmVUaGlja25lc3MsXG4gICAgcmVzdWx0LmxpbmVUaGlja25lc3NcbiAgKTtcbiAgcmVzdWx0LmxpbmVPZmZzZXQgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yQ2xvbmVkRGVmYXVsdChcbiAgICB0aGlzLl9saW5lT2Zmc2V0LFxuICAgIHRpbWUsXG4gICAgZGVmYXVsdExpbmVPZmZzZXQsXG4gICAgcmVzdWx0LmxpbmVPZmZzZXRcbiAgKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogQ29tcGFyZXMgdGhpcyBwcm9wZXJ0eSB0byB0aGUgcHJvdmlkZWQgcHJvcGVydHkgYW5kIHJldHVybnNcbiAqIDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZXkgYXJlIGVxdWFsLCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7UHJvcGVydHl9IFtvdGhlcl0gVGhlIG90aGVyIHByb3BlcnR5LlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIGxlZnQgYW5kIHJpZ2h0IGFyZSBlcXVhbCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqL1xuR3JpZE1hdGVyaWFsUHJvcGVydHkucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICByZXR1cm4gKFxuICAgIHRoaXMgPT09IG90aGVyIHx8IC8vXG4gICAgKG90aGVyIGluc3RhbmNlb2YgR3JpZE1hdGVyaWFsUHJvcGVydHkgJiYgLy9cbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9jb2xvciwgb3RoZXIuX2NvbG9yKSAmJiAvL1xuICAgICAgUHJvcGVydHkuZXF1YWxzKHRoaXMuX2NlbGxBbHBoYSwgb3RoZXIuX2NlbGxBbHBoYSkgJiYgLy9cbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9saW5lQ291bnQsIG90aGVyLl9saW5lQ291bnQpICYmIC8vXG4gICAgICBQcm9wZXJ0eS5lcXVhbHModGhpcy5fbGluZVRoaWNrbmVzcywgb3RoZXIuX2xpbmVUaGlja25lc3MpICYmIC8vXG4gICAgICBQcm9wZXJ0eS5lcXVhbHModGhpcy5fbGluZU9mZnNldCwgb3RoZXIuX2xpbmVPZmZzZXQpKVxuICApO1xufTtcbmV4cG9ydCBkZWZhdWx0IEdyaWRNYXRlcmlhbFByb3BlcnR5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///84903\n')},8254:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87379);\n/* harmony import */ var _Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(27671);\n/* harmony import */ var _Scene_GroundPrimitive_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(47780);\n/* harmony import */ var _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(4260);\n/* harmony import */ var _CallbackProperty_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11249);\n/* harmony import */ var _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(612);\n/* harmony import */ var _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(17045);\n/* harmony import */ var _TerrainOffsetProperty_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(18743);\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar defaultZIndex = new _ConstantProperty_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z(0);\n\n/**\n * An abstract class for updating ground geometry entities.\n * @constructor\n * @alias GroundGeometryUpdater\n * @param {Object} options An object with the following properties:\n * @param {Entity} options.entity The entity containing the geometry to be visualized.\n * @param {Scene} options.scene The scene where visualization is taking place.\n * @param {Object} options.geometryOptions Options for the geometry\n * @param {String} options.geometryPropertyName The geometry property name\n * @param {String[]} options.observedPropertyNames The entity properties this geometry cares about\n */\nfunction GroundGeometryUpdater(options) {\n  _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].call */ .Z.call(this, options);\n\n  this._zIndex = 0;\n  this._terrainOffsetProperty = undefined;\n}\n\nif ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(Object.create)) {\n  GroundGeometryUpdater.prototype = Object.create(_GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].prototype */ .Z.prototype);\n  GroundGeometryUpdater.prototype.constructor = GroundGeometryUpdater;\n}\n\nObject.defineProperties(GroundGeometryUpdater.prototype, {\n  /**\n   * Gets the zindex\n   * @type {Number}\n   * @memberof GroundGeometryUpdater.prototype\n   * @readonly\n   */\n  zIndex: {\n    get: function () {\n      return this._zIndex;\n    },\n  },\n\n  /**\n   * Gets the terrain offset property\n   * @type {TerrainOffsetProperty}\n   * @memberof GroundGeometryUpdater.prototype\n   * @readonly\n   * @private\n   */\n  terrainOffsetProperty: {\n    get: function () {\n      return this._terrainOffsetProperty;\n    },\n  },\n});\n\nGroundGeometryUpdater.prototype._isOnTerrain = function (entity, geometry) {\n  return (\n    this._fillEnabled &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(geometry.height) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(geometry.extrudedHeight) &&\n    _Scene_GroundPrimitive_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isSupported */ .Z.isSupported(this._scene)\n  );\n};\n\nGroundGeometryUpdater.prototype._getIsClosed = function (options) {\n  var height = options.height;\n  var extrudedHeight = options.extrudedHeight;\n  return height === 0 || ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(extrudedHeight) && extrudedHeight !== height);\n};\n\nGroundGeometryUpdater.prototype._computeCenter =\n  _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].throwInstantiationError */ .Z.throwInstantiationError;\n\nGroundGeometryUpdater.prototype._onEntityPropertyChanged = function (\n  entity,\n  propertyName,\n  newValue,\n  oldValue\n) {\n  _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].prototype._onEntityPropertyChanged.call */ .Z.prototype._onEntityPropertyChanged.call(\n    this,\n    entity,\n    propertyName,\n    newValue,\n    oldValue\n  );\n  if (this._observedPropertyNames.indexOf(propertyName) === -1) {\n    return;\n  }\n\n  var geometry = this._entity[this._geometryPropertyName];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(geometry)) {\n    return;\n  }\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(geometry.zIndex) &&\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(geometry.height) || (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(geometry.extrudedHeight))\n  ) {\n    (0,_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].geometryZIndex */ .Z.geometryZIndex);\n  }\n\n  this._zIndex = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(geometry.zIndex, defaultZIndex);\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(this._terrainOffsetProperty)) {\n    this._terrainOffsetProperty.destroy();\n    this._terrainOffsetProperty = undefined;\n  }\n\n  var heightReferenceProperty = geometry.heightReference;\n  var extrudedHeightReferenceProperty = geometry.extrudedHeightReference;\n\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(heightReferenceProperty) ||\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(extrudedHeightReferenceProperty)\n  ) {\n    var centerPosition = new _CallbackProperty_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n      this._computeCenter.bind(this),\n      !this._dynamic\n    );\n    this._terrainOffsetProperty = new _TerrainOffsetProperty_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(\n      this._scene,\n      centerPosition,\n      heightReferenceProperty,\n      extrudedHeightReferenceProperty\n    );\n  }\n};\n\n/**\n * Destroys and resources used by the object.  Once an object is destroyed, it should not be used.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nGroundGeometryUpdater.prototype.destroy = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(this._terrainOffsetProperty)) {\n    this._terrainOffsetProperty.destroy();\n    this._terrainOffsetProperty = undefined;\n  }\n\n  _GeometryUpdater_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].prototype.destroy.call */ .Z.prototype.destroy.call(this);\n};\n\n/**\n * @private\n */\nGroundGeometryUpdater.getGeometryHeight = function (height, heightReference) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("heightReference", heightReference);\n  //>>includeEnd(\'debug\');\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(height)) {\n    if (heightReference !== _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].NONE */ .Z.NONE) {\n      (0,_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].geometryHeightReference */ .Z.geometryHeightReference);\n    }\n    return;\n  }\n\n  if (heightReference !== _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].CLAMP_TO_GROUND */ .Z.CLAMP_TO_GROUND) {\n    return height;\n  }\n  return 0.0;\n};\n\n/**\n * @private\n */\nGroundGeometryUpdater.getGeometryExtrudedHeight = function (\n  extrudedHeight,\n  extrudedHeightReference\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].defined */ .Z.defined("extrudedHeightReference", extrudedHeightReference);\n  //>>includeEnd(\'debug\');\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(extrudedHeight)) {\n    if (extrudedHeightReference !== _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].NONE */ .Z.NONE) {\n      (0,_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(_Core_oneTimeWarning_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].geometryExtrudedHeightReference */ .Z.geometryExtrudedHeightReference);\n    }\n    return;\n  }\n  if (extrudedHeightReference !== _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].CLAMP_TO_GROUND */ .Z.CLAMP_TO_GROUND) {\n    return extrudedHeight;\n  }\n\n  return GroundGeometryUpdater.CLAMP_TO_GROUND;\n};\n\n/**\n * @private\n */\nGroundGeometryUpdater.CLAMP_TO_GROUND = "clamp";\n\n/**\n * @private\n */\nGroundGeometryUpdater.computeGeometryOffsetAttribute = function (\n  height,\n  heightReference,\n  extrudedHeight,\n  extrudedHeightReference\n) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(height) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(heightReference)) {\n    heightReference = _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].NONE */ .Z.NONE;\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(extrudedHeight) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(extrudedHeightReference)) {\n    extrudedHeightReference = _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].NONE */ .Z.NONE;\n  }\n  var n = 0;\n  if (heightReference !== _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].NONE */ .Z.NONE) {\n    n++;\n  }\n  if (extrudedHeightReference === _Scene_HeightReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].RELATIVE_TO_GROUND */ .Z.RELATIVE_TO_GROUND) {\n    n++;\n  }\n  if (n === 2) {\n    return _Core_GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ALL */ .Z.ALL;\n  }\n  if (n === 1) {\n    return _Core_GeometryOffsetAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].TOP */ .Z.TOP;\n  }\n\n  return undefined;\n};\n/* harmony default export */ __webpack_exports__["Z"] = (GroundGeometryUpdater);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ3RDOztBQUVBO0FBQ0E7QUFDQSx5REFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9Hcm91bmRHZW9tZXRyeVVwZGF0ZXIuanM/NzU0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBHZW9tZXRyeU9mZnNldEF0dHJpYnV0ZSBmcm9tIFwiLi4vQ29yZS9HZW9tZXRyeU9mZnNldEF0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IG9uZVRpbWVXYXJuaW5nIGZyb20gXCIuLi9Db3JlL29uZVRpbWVXYXJuaW5nLmpzXCI7XG5pbXBvcnQgR3JvdW5kUHJpbWl0aXZlIGZyb20gXCIuLi9TY2VuZS9Hcm91bmRQcmltaXRpdmUuanNcIjtcbmltcG9ydCBIZWlnaHRSZWZlcmVuY2UgZnJvbSBcIi4uL1NjZW5lL0hlaWdodFJlZmVyZW5jZS5qc1wiO1xuaW1wb3J0IENhbGxiYWNrUHJvcGVydHkgZnJvbSBcIi4vQ2FsbGJhY2tQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IENvbnN0YW50UHJvcGVydHkgZnJvbSBcIi4vQ29uc3RhbnRQcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IEdlb21ldHJ5VXBkYXRlciBmcm9tIFwiLi9HZW9tZXRyeVVwZGF0ZXIuanNcIjtcbmltcG9ydCBUZXJyYWluT2Zmc2V0UHJvcGVydHkgZnJvbSBcIi4vVGVycmFpbk9mZnNldFByb3BlcnR5LmpzXCI7XG5cbnZhciBkZWZhdWx0WkluZGV4ID0gbmV3IENvbnN0YW50UHJvcGVydHkoMCk7XG5cbi8qKlxuICogQW4gYWJzdHJhY3QgY2xhc3MgZm9yIHVwZGF0aW5nIGdyb3VuZCBnZW9tZXRyeSBlbnRpdGllcy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIEdyb3VuZEdlb21ldHJ5VXBkYXRlclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtFbnRpdHl9IG9wdGlvbnMuZW50aXR5IFRoZSBlbnRpdHkgY29udGFpbmluZyB0aGUgZ2VvbWV0cnkgdG8gYmUgdmlzdWFsaXplZC5cbiAqIEBwYXJhbSB7U2NlbmV9IG9wdGlvbnMuc2NlbmUgVGhlIHNjZW5lIHdoZXJlIHZpc3VhbGl6YXRpb24gaXMgdGFraW5nIHBsYWNlLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZ2VvbWV0cnlPcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBnZW9tZXRyeVxuICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuZ2VvbWV0cnlQcm9wZXJ0eU5hbWUgVGhlIGdlb21ldHJ5IHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nW119IG9wdGlvbnMub2JzZXJ2ZWRQcm9wZXJ0eU5hbWVzIFRoZSBlbnRpdHkgcHJvcGVydGllcyB0aGlzIGdlb21ldHJ5IGNhcmVzIGFib3V0XG4gKi9cbmZ1bmN0aW9uIEdyb3VuZEdlb21ldHJ5VXBkYXRlcihvcHRpb25zKSB7XG4gIEdlb21ldHJ5VXBkYXRlci5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gIHRoaXMuX3pJbmRleCA9IDA7XG4gIHRoaXMuX3RlcnJhaW5PZmZzZXRQcm9wZXJ0eSA9IHVuZGVmaW5lZDtcbn1cblxuaWYgKGRlZmluZWQoT2JqZWN0LmNyZWF0ZSkpIHtcbiAgR3JvdW5kR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZSk7XG4gIEdyb3VuZEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHcm91bmRHZW9tZXRyeVVwZGF0ZXI7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdyb3VuZEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgdGhlIHppbmRleFxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgR3JvdW5kR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHpJbmRleDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3pJbmRleDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0ZXJyYWluIG9mZnNldCBwcm9wZXJ0eVxuICAgKiBAdHlwZSB7VGVycmFpbk9mZnNldFByb3BlcnR5fVxuICAgKiBAbWVtYmVyb2YgR3JvdW5kR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRlcnJhaW5PZmZzZXRQcm9wZXJ0eToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RlcnJhaW5PZmZzZXRQcm9wZXJ0eTtcbiAgICB9LFxuICB9LFxufSk7XG5cbkdyb3VuZEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuX2lzT25UZXJyYWluID0gZnVuY3Rpb24gKGVudGl0eSwgZ2VvbWV0cnkpIHtcbiAgcmV0dXJuIChcbiAgICB0aGlzLl9maWxsRW5hYmxlZCAmJlxuICAgICFkZWZpbmVkKGdlb21ldHJ5LmhlaWdodCkgJiZcbiAgICAhZGVmaW5lZChnZW9tZXRyeS5leHRydWRlZEhlaWdodCkgJiZcbiAgICBHcm91bmRQcmltaXRpdmUuaXNTdXBwb3J0ZWQodGhpcy5fc2NlbmUpXG4gICk7XG59O1xuXG5Hcm91bmRHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9nZXRJc0Nsb3NlZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHZhciBoZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcbiAgdmFyIGV4dHJ1ZGVkSGVpZ2h0ID0gb3B0aW9ucy5leHRydWRlZEhlaWdodDtcbiAgcmV0dXJuIGhlaWdodCA9PT0gMCB8fCAoZGVmaW5lZChleHRydWRlZEhlaWdodCkgJiYgZXh0cnVkZWRIZWlnaHQgIT09IGhlaWdodCk7XG59O1xuXG5Hcm91bmRHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLl9jb21wdXRlQ2VudGVyID1cbiAgRGV2ZWxvcGVyRXJyb3IudGhyb3dJbnN0YW50aWF0aW9uRXJyb3I7XG5cbkdyb3VuZEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuX29uRW50aXR5UHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKFxuICBlbnRpdHksXG4gIHByb3BlcnR5TmFtZSxcbiAgbmV3VmFsdWUsXG4gIG9sZFZhbHVlXG4pIHtcbiAgR2VvbWV0cnlVcGRhdGVyLnByb3RvdHlwZS5fb25FbnRpdHlQcm9wZXJ0eUNoYW5nZWQuY2FsbChcbiAgICB0aGlzLFxuICAgIGVudGl0eSxcbiAgICBwcm9wZXJ0eU5hbWUsXG4gICAgbmV3VmFsdWUsXG4gICAgb2xkVmFsdWVcbiAgKTtcbiAgaWYgKHRoaXMuX29ic2VydmVkUHJvcGVydHlOYW1lcy5pbmRleE9mKHByb3BlcnR5TmFtZSkgPT09IC0xKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGdlb21ldHJ5ID0gdGhpcy5fZW50aXR5W3RoaXMuX2dlb21ldHJ5UHJvcGVydHlOYW1lXTtcbiAgaWYgKCFkZWZpbmVkKGdlb21ldHJ5KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoXG4gICAgZGVmaW5lZChnZW9tZXRyeS56SW5kZXgpICYmXG4gICAgKGRlZmluZWQoZ2VvbWV0cnkuaGVpZ2h0KSB8fCBkZWZpbmVkKGdlb21ldHJ5LmV4dHJ1ZGVkSGVpZ2h0KSlcbiAgKSB7XG4gICAgb25lVGltZVdhcm5pbmcob25lVGltZVdhcm5pbmcuZ2VvbWV0cnlaSW5kZXgpO1xuICB9XG5cbiAgdGhpcy5fekluZGV4ID0gZGVmYXVsdFZhbHVlKGdlb21ldHJ5LnpJbmRleCwgZGVmYXVsdFpJbmRleCk7XG5cbiAgaWYgKGRlZmluZWQodGhpcy5fdGVycmFpbk9mZnNldFByb3BlcnR5KSkge1xuICAgIHRoaXMuX3RlcnJhaW5PZmZzZXRQcm9wZXJ0eS5kZXN0cm95KCk7XG4gICAgdGhpcy5fdGVycmFpbk9mZnNldFByb3BlcnR5ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIGhlaWdodFJlZmVyZW5jZVByb3BlcnR5ID0gZ2VvbWV0cnkuaGVpZ2h0UmVmZXJlbmNlO1xuICB2YXIgZXh0cnVkZWRIZWlnaHRSZWZlcmVuY2VQcm9wZXJ0eSA9IGdlb21ldHJ5LmV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlO1xuXG4gIGlmIChcbiAgICBkZWZpbmVkKGhlaWdodFJlZmVyZW5jZVByb3BlcnR5KSB8fFxuICAgIGRlZmluZWQoZXh0cnVkZWRIZWlnaHRSZWZlcmVuY2VQcm9wZXJ0eSlcbiAgKSB7XG4gICAgdmFyIGNlbnRlclBvc2l0aW9uID0gbmV3IENhbGxiYWNrUHJvcGVydHkoXG4gICAgICB0aGlzLl9jb21wdXRlQ2VudGVyLmJpbmQodGhpcyksXG4gICAgICAhdGhpcy5fZHluYW1pY1xuICAgICk7XG4gICAgdGhpcy5fdGVycmFpbk9mZnNldFByb3BlcnR5ID0gbmV3IFRlcnJhaW5PZmZzZXRQcm9wZXJ0eShcbiAgICAgIHRoaXMuX3NjZW5lLFxuICAgICAgY2VudGVyUG9zaXRpb24sXG4gICAgICBoZWlnaHRSZWZlcmVuY2VQcm9wZXJ0eSxcbiAgICAgIGV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlUHJvcGVydHlcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIERlc3Ryb3lzIGFuZCByZXNvdXJjZXMgdXNlZCBieSB0aGUgb2JqZWN0LiAgT25jZSBhbiBvYmplY3QgaXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICovXG5Hcm91bmRHZW9tZXRyeVVwZGF0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChkZWZpbmVkKHRoaXMuX3RlcnJhaW5PZmZzZXRQcm9wZXJ0eSkpIHtcbiAgICB0aGlzLl90ZXJyYWluT2Zmc2V0UHJvcGVydHkuZGVzdHJveSgpO1xuICAgIHRoaXMuX3RlcnJhaW5PZmZzZXRQcm9wZXJ0eSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIEdlb21ldHJ5VXBkYXRlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91bmRHZW9tZXRyeVVwZGF0ZXIuZ2V0R2VvbWV0cnlIZWlnaHQgPSBmdW5jdGlvbiAoaGVpZ2h0LCBoZWlnaHRSZWZlcmVuY2UpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcImhlaWdodFJlZmVyZW5jZVwiLCBoZWlnaHRSZWZlcmVuY2UpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgaWYgKCFkZWZpbmVkKGhlaWdodCkpIHtcbiAgICBpZiAoaGVpZ2h0UmVmZXJlbmNlICE9PSBIZWlnaHRSZWZlcmVuY2UuTk9ORSkge1xuICAgICAgb25lVGltZVdhcm5pbmcob25lVGltZVdhcm5pbmcuZ2VvbWV0cnlIZWlnaHRSZWZlcmVuY2UpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaGVpZ2h0UmVmZXJlbmNlICE9PSBIZWlnaHRSZWZlcmVuY2UuQ0xBTVBfVE9fR1JPVU5EKSB7XG4gICAgcmV0dXJuIGhlaWdodDtcbiAgfVxuICByZXR1cm4gMC4wO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91bmRHZW9tZXRyeVVwZGF0ZXIuZ2V0R2VvbWV0cnlFeHRydWRlZEhlaWdodCA9IGZ1bmN0aW9uIChcbiAgZXh0cnVkZWRIZWlnaHQsXG4gIGV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcImV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlXCIsIGV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlKTtcbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gIGlmICghZGVmaW5lZChleHRydWRlZEhlaWdodCkpIHtcbiAgICBpZiAoZXh0cnVkZWRIZWlnaHRSZWZlcmVuY2UgIT09IEhlaWdodFJlZmVyZW5jZS5OT05FKSB7XG4gICAgICBvbmVUaW1lV2FybmluZyhvbmVUaW1lV2FybmluZy5nZW9tZXRyeUV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChleHRydWRlZEhlaWdodFJlZmVyZW5jZSAhPT0gSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORCkge1xuICAgIHJldHVybiBleHRydWRlZEhlaWdodDtcbiAgfVxuXG4gIHJldHVybiBHcm91bmRHZW9tZXRyeVVwZGF0ZXIuQ0xBTVBfVE9fR1JPVU5EO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91bmRHZW9tZXRyeVVwZGF0ZXIuQ0xBTVBfVE9fR1JPVU5EID0gXCJjbGFtcFwiO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkdyb3VuZEdlb21ldHJ5VXBkYXRlci5jb21wdXRlR2VvbWV0cnlPZmZzZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoXG4gIGhlaWdodCxcbiAgaGVpZ2h0UmVmZXJlbmNlLFxuICBleHRydWRlZEhlaWdodCxcbiAgZXh0cnVkZWRIZWlnaHRSZWZlcmVuY2Vcbikge1xuICBpZiAoIWRlZmluZWQoaGVpZ2h0KSB8fCAhZGVmaW5lZChoZWlnaHRSZWZlcmVuY2UpKSB7XG4gICAgaGVpZ2h0UmVmZXJlbmNlID0gSGVpZ2h0UmVmZXJlbmNlLk5PTkU7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKGV4dHJ1ZGVkSGVpZ2h0KSB8fCAhZGVmaW5lZChleHRydWRlZEhlaWdodFJlZmVyZW5jZSkpIHtcbiAgICBleHRydWRlZEhlaWdodFJlZmVyZW5jZSA9IEhlaWdodFJlZmVyZW5jZS5OT05FO1xuICB9XG4gIHZhciBuID0gMDtcbiAgaWYgKGhlaWdodFJlZmVyZW5jZSAhPT0gSGVpZ2h0UmVmZXJlbmNlLk5PTkUpIHtcbiAgICBuKys7XG4gIH1cbiAgaWYgKGV4dHJ1ZGVkSGVpZ2h0UmVmZXJlbmNlID09PSBIZWlnaHRSZWZlcmVuY2UuUkVMQVRJVkVfVE9fR1JPVU5EKSB7XG4gICAgbisrO1xuICB9XG4gIGlmIChuID09PSAyKSB7XG4gICAgcmV0dXJuIEdlb21ldHJ5T2Zmc2V0QXR0cmlidXRlLkFMTDtcbiAgfVxuICBpZiAobiA9PT0gMSkge1xuICAgIHJldHVybiBHZW9tZXRyeU9mZnNldEF0dHJpYnV0ZS5UT1A7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbmV4cG9ydCBkZWZhdWx0IEdyb3VuZEdlb21ldHJ5VXBkYXRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8254\n')},33796:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14459);\n/* harmony import */ var _createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90203);\n/* harmony import */ var _Property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40112);\n\n\n\n\n\n\n\n\nvar defaultRepeat = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(1, 1);\nvar defaultTransparent = false;\nvar defaultColor = _Core_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].WHITE */ .Z.WHITE;\n\n/**\n * A {@link MaterialProperty} that maps to image {@link Material} uniforms.\n * @alias ImageMaterialProperty\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Property|String|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} [options.image] A Property specifying the Image, URL, Canvas, or Video.\n * @param {Property|Cartesian2} [options.repeat=new Cartesian2(1.0, 1.0)] A {@link Cartesian2} Property specifying the number of times the image repeats in each direction.\n * @param {Property|Color} [options.color=Color.WHITE] The color applied to the image\n * @param {Property|Boolean} [options.transparent=false] Set to true when the image has transparency (for example, when a png has transparent sections)\n */\nfunction ImageMaterialProperty(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  this._definitionChanged = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n  this._image = undefined;\n  this._imageSubscription = undefined;\n  this._repeat = undefined;\n  this._repeatSubscription = undefined;\n  this._color = undefined;\n  this._colorSubscription = undefined;\n  this._transparent = undefined;\n  this._transparentSubscription = undefined;\n\n  this.image = options.image;\n  this.repeat = options.repeat;\n  this.color = options.color;\n  this.transparent = options.transparent;\n}\n\nObject.defineProperties(ImageMaterialProperty.prototype, {\n  /**\n   * Gets a value indicating if this property is constant.  A property is considered\n   * constant if getValue always returns the same result for the current definition.\n   * @memberof ImageMaterialProperty.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  isConstant: {\n    get: function () {\n      return (\n        _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._image) && _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isConstant */ .Z.isConstant(this._repeat)\n      );\n    },\n  },\n\n  /**\n   * Gets the event that is raised whenever the definition of this property changes.\n   * The definition is considered to have changed if a call to getValue would return\n   * a different result for the same time.\n   * @memberof ImageMaterialProperty.prototype\n   *\n   * @type {Event}\n   * @readonly\n   */\n  definitionChanged: {\n    get: function () {\n      return this._definitionChanged;\n    },\n  },\n\n  /**\n   * Gets or sets the Property specifying Image, URL, Canvas, or Video to use.\n   * @memberof ImageMaterialProperty.prototype\n   * @type {Property|undefined}\n   */\n  image: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("image"),\n\n  /**\n   * Gets or sets the {@link Cartesian2} Property specifying the number of times the image repeats in each direction.\n   * @memberof ImageMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default new Cartesian2(1, 1)\n   */\n  repeat: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("repeat"),\n\n  /**\n   * Gets or sets the Color Property specifying the desired color applied to the image.\n   * @memberof ImageMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default 1.0\n   */\n  color: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("color"),\n\n  /**\n   * Gets or sets the Boolean Property specifying whether the image has transparency\n   * @memberof ImageMaterialProperty.prototype\n   * @type {Property|undefined}\n   * @default 1.0\n   */\n  transparent: (0,_createPropertyDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)("transparent"),\n});\n\n/**\n * Gets the {@link Material} type at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the type.\n * @returns {String} The type of material.\n */\nImageMaterialProperty.prototype.getType = function (time) {\n  return "Image";\n};\n\n/**\n * Gets the value of the property at the provided time.\n *\n * @param {JulianDate} time The time for which to retrieve the value.\n * @param {Object} [result] The object to store the value into, if omitted, a new instance is created and returned.\n * @returns {Object} The modified result parameter or a new instance if the result parameter was not supplied.\n */\nImageMaterialProperty.prototype.getValue = function (time, result) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(result)) {\n    result = {};\n  }\n\n  result.image = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrUndefined */ .Z.getValueOrUndefined(this._image, time);\n  result.repeat = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._repeat,\n    time,\n    defaultRepeat,\n    result.repeat\n  );\n  result.color = _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrClonedDefault */ .Z.getValueOrClonedDefault(\n    this._color,\n    time,\n    defaultColor,\n    result.color\n  );\n  if (_Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getValueOrDefault */ .Z.getValueOrDefault(this._transparent, time, defaultTransparent)) {\n    result.color.alpha = Math.min(0.99, result.color.alpha);\n  }\n\n  return result;\n};\n\n/**\n * Compares this property to the provided property and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Property} [other] The other property.\n * @returns {Boolean} <code>true</code> if left and right are equal, <code>false</code> otherwise.\n */\nImageMaterialProperty.prototype.equals = function (other) {\n  return (\n    this === other ||\n    (other instanceof ImageMaterialProperty &&\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._image, other._image) &&\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._repeat, other._repeat) &&\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._color, other._color) &&\n      _Property_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].equals */ .Z.equals(this._transparent, other._transparent))\n  );\n};\n/* harmony default export */ __webpack_exports__["Z"] = (ImageMaterialProperty);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM3OTYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNWO0FBQ2M7QUFDVjtBQUNKO0FBQ2dDO0FBQ2hDOztBQUVyQyx3QkFBd0Isb0VBQVU7QUFDbEM7QUFDQSxtQkFBbUIsMkVBQVc7O0FBRTlCO0FBQ0EsTUFBTSx3QkFBd0Isb0JBQW9CLGdCQUFnQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxxRUFBcUU7QUFDaEYsV0FBVyxxQkFBcUIsNkNBQTZDLGtCQUFrQjtBQUMvRixXQUFXLGdCQUFnQjtBQUMzQixXQUFXLGtCQUFrQjtBQUM3QjtBQUNBO0FBQ0EsWUFBWSwwRUFBWSxVQUFVLGdHQUF5Qjs7QUFFM0QsZ0NBQWdDLCtEQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUZBQW1CLGlCQUFpQixtRkFBbUI7QUFDL0Q7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFNBQVMsaUZBQXdCOztBQUVqQztBQUNBLHVCQUF1QixrQkFBa0I7QUFDekM7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFVBQVUsaUZBQXdCOztBQUVsQztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVMsaUZBQXdCOztBQUVqQztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGVBQWUsaUZBQXdCO0FBQ3ZDLENBQUM7O0FBRUQ7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBLFdBQVcsWUFBWTtBQUN2QixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLE9BQU8scUVBQU87QUFDZDtBQUNBOztBQUVBLGlCQUFpQixxR0FBNEI7QUFDN0Msa0JBQWtCLDZHQUFnQztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZHQUFnQztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxpR0FBMEI7QUFDaEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyRUFBZTtBQUNyQixNQUFNLDJFQUFlO0FBQ3JCLE1BQU0sMkVBQWU7QUFDckIsTUFBTSwyRUFBZTtBQUNyQjtBQUNBO0FBQ0EseURBQWUscUJBQXFCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvSW1hZ2VNYXRlcmlhbFByb3BlcnR5LmpzPzZlZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENhcnRlc2lhbjIgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMi5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCIuLi9Db3JlL0V2ZW50LmpzXCI7XG5pbXBvcnQgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yIGZyb20gXCIuL2NyZWF0ZVByb3BlcnR5RGVzY3JpcHRvci5qc1wiO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gXCIuL1Byb3BlcnR5LmpzXCI7XG5cbnZhciBkZWZhdWx0UmVwZWF0ID0gbmV3IENhcnRlc2lhbjIoMSwgMSk7XG52YXIgZGVmYXVsdFRyYW5zcGFyZW50ID0gZmFsc2U7XG52YXIgZGVmYXVsdENvbG9yID0gQ29sb3IuV0hJVEU7XG5cbi8qKlxuICogQSB7QGxpbmsgTWF0ZXJpYWxQcm9wZXJ0eX0gdGhhdCBtYXBzIHRvIGltYWdlIHtAbGluayBNYXRlcmlhbH0gdW5pZm9ybXMuXG4gKiBAYWxpYXMgSW1hZ2VNYXRlcmlhbFByb3BlcnR5XG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7UHJvcGVydHl8U3RyaW5nfEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gW29wdGlvbnMuaW1hZ2VdIEEgUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgSW1hZ2UsIFVSTCwgQ2FudmFzLCBvciBWaWRlby5cbiAqIEBwYXJhbSB7UHJvcGVydHl8Q2FydGVzaWFuMn0gW29wdGlvbnMucmVwZWF0PW5ldyBDYXJ0ZXNpYW4yKDEuMCwgMS4wKV0gQSB7QGxpbmsgQ2FydGVzaWFuMn0gUHJvcGVydHkgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBpbWFnZSByZXBlYXRzIGluIGVhY2ggZGlyZWN0aW9uLlxuICogQHBhcmFtIHtQcm9wZXJ0eXxDb2xvcn0gW29wdGlvbnMuY29sb3I9Q29sb3IuV0hJVEVdIFRoZSBjb2xvciBhcHBsaWVkIHRvIHRoZSBpbWFnZVxuICogQHBhcmFtIHtQcm9wZXJ0eXxCb29sZWFufSBbb3B0aW9ucy50cmFuc3BhcmVudD1mYWxzZV0gU2V0IHRvIHRydWUgd2hlbiB0aGUgaW1hZ2UgaGFzIHRyYW5zcGFyZW5jeSAoZm9yIGV4YW1wbGUsIHdoZW4gYSBwbmcgaGFzIHRyYW5zcGFyZW50IHNlY3Rpb25zKVxuICovXG5mdW5jdGlvbiBJbWFnZU1hdGVyaWFsUHJvcGVydHkob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHRoaXMuX2RlZmluaXRpb25DaGFuZ2VkID0gbmV3IEV2ZW50KCk7XG4gIHRoaXMuX2ltYWdlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9pbWFnZVN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fcmVwZWF0ID0gdW5kZWZpbmVkO1xuICB0aGlzLl9yZXBlYXRTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2NvbG9yID0gdW5kZWZpbmVkO1xuICB0aGlzLl9jb2xvclN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdHJhbnNwYXJlbnQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3RyYW5zcGFyZW50U3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuaW1hZ2UgPSBvcHRpb25zLmltYWdlO1xuICB0aGlzLnJlcGVhdCA9IG9wdGlvbnMucmVwZWF0O1xuICB0aGlzLmNvbG9yID0gb3B0aW9ucy5jb2xvcjtcbiAgdGhpcy50cmFuc3BhcmVudCA9IG9wdGlvbnMudHJhbnNwYXJlbnQ7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEltYWdlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIGlmIHRoaXMgcHJvcGVydHkgaXMgY29uc3RhbnQuICBBIHByb3BlcnR5IGlzIGNvbnNpZGVyZWRcbiAgICogY29uc3RhbnQgaWYgZ2V0VmFsdWUgYWx3YXlzIHJldHVybnMgdGhlIHNhbWUgcmVzdWx0IGZvciB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBpc0NvbnN0YW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBQcm9wZXJ0eS5pc0NvbnN0YW50KHRoaXMuX2ltYWdlKSAmJiBQcm9wZXJ0eS5pc0NvbnN0YW50KHRoaXMuX3JlcGVhdClcbiAgICAgICk7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbmV2ZXIgdGhlIGRlZmluaXRpb24gb2YgdGhpcyBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKiBUaGUgZGVmaW5pdGlvbiBpcyBjb25zaWRlcmVkIHRvIGhhdmUgY2hhbmdlZCBpZiBhIGNhbGwgdG8gZ2V0VmFsdWUgd291bGQgcmV0dXJuXG4gICAqIGEgZGlmZmVyZW50IHJlc3VsdCBmb3IgdGhlIHNhbWUgdGltZS5cbiAgICogQG1lbWJlcm9mIEltYWdlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGRlZmluaXRpb25DaGFuZ2VkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbkNoYW5nZWQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIEltYWdlLCBVUkwsIENhbnZhcywgb3IgVmlkZW8gdG8gdXNlLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKi9cbiAgaW1hZ2U6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcImltYWdlXCIpLFxuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHtAbGluayBDYXJ0ZXNpYW4yfSBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIGltYWdlIHJlcGVhdHMgaW4gZWFjaCBkaXJlY3Rpb24uXG4gICAqIEBtZW1iZXJvZiBJbWFnZU1hdGVyaWFsUHJvcGVydHkucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9wZXJ0eXx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IG5ldyBDYXJ0ZXNpYW4yKDEsIDEpXG4gICAqL1xuICByZXBlYXQ6IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcihcInJlcGVhdFwiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBDb2xvciBQcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSBkZXNpcmVkIGNvbG9yIGFwcGxpZWQgdG8gdGhlIGltYWdlLlxuICAgKiBAbWVtYmVyb2YgSW1hZ2VNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCAxLjBcbiAgICovXG4gIGNvbG9yOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJjb2xvclwiKSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBCb29sZWFuIFByb3BlcnR5IHNwZWNpZnlpbmcgd2hldGhlciB0aGUgaW1hZ2UgaGFzIHRyYW5zcGFyZW5jeVxuICAgKiBAbWVtYmVyb2YgSW1hZ2VNYXRlcmlhbFByb3BlcnR5LnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvcGVydHl8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCAxLjBcbiAgICovXG4gIHRyYW5zcGFyZW50OiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoXCJ0cmFuc3BhcmVudFwiKSxcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIHtAbGluayBNYXRlcmlhbH0gdHlwZSBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHRpbWUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSB0eXBlLlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIHR5cGUgb2YgbWF0ZXJpYWwuXG4gKi9cbkltYWdlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHJldHVybiBcIkltYWdlXCI7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHRpbWUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzdWx0XSBUaGUgb2JqZWN0IHRvIHN0b3JlIHRoZSB2YWx1ZSBpbnRvLCBpZiBvbWl0dGVkLCBhIG5ldyBpbnN0YW5jZSBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBtb2RpZmllZCByZXN1bHQgcGFyYW1ldGVyIG9yIGEgbmV3IGluc3RhbmNlIGlmIHRoZSByZXN1bHQgcGFyYW1ldGVyIHdhcyBub3Qgc3VwcGxpZWQuXG4gKi9cbkltYWdlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAodGltZSwgcmVzdWx0KSB7XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0ge307XG4gIH1cblxuICByZXN1bHQuaW1hZ2UgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yVW5kZWZpbmVkKHRoaXMuX2ltYWdlLCB0aW1lKTtcbiAgcmVzdWx0LnJlcGVhdCA9IFByb3BlcnR5LmdldFZhbHVlT3JDbG9uZWREZWZhdWx0KFxuICAgIHRoaXMuX3JlcGVhdCxcbiAgICB0aW1lLFxuICAgIGRlZmF1bHRSZXBlYXQsXG4gICAgcmVzdWx0LnJlcGVhdFxuICApO1xuICByZXN1bHQuY29sb3IgPSBQcm9wZXJ0eS5nZXRWYWx1ZU9yQ2xvbmVkRGVmYXVsdChcbiAgICB0aGlzLl9jb2xvcixcbiAgICB0aW1lLFxuICAgIGRlZmF1bHRDb2xvcixcbiAgICByZXN1bHQuY29sb3JcbiAgKTtcbiAgaWYgKFByb3BlcnR5LmdldFZhbHVlT3JEZWZhdWx0KHRoaXMuX3RyYW5zcGFyZW50LCB0aW1lLCBkZWZhdWx0VHJhbnNwYXJlbnQpKSB7XG4gICAgcmVzdWx0LmNvbG9yLmFscGhhID0gTWF0aC5taW4oMC45OSwgcmVzdWx0LmNvbG9yLmFscGhhKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIENvbXBhcmVzIHRoaXMgcHJvcGVydHkgdG8gdGhlIHByb3ZpZGVkIHByb3BlcnR5IGFuZCByZXR1cm5zXG4gKiA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGV5IGFyZSBlcXVhbCwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1Byb3BlcnR5fSBbb3RoZXJdIFRoZSBvdGhlciBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiBsZWZ0IGFuZCByaWdodCBhcmUgZXF1YWwsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKi9cbkltYWdlTWF0ZXJpYWxQcm9wZXJ0eS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIHJldHVybiAoXG4gICAgdGhpcyA9PT0gb3RoZXIgfHxcbiAgICAob3RoZXIgaW5zdGFuY2VvZiBJbWFnZU1hdGVyaWFsUHJvcGVydHkgJiZcbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9pbWFnZSwgb3RoZXIuX2ltYWdlKSAmJlxuICAgICAgUHJvcGVydHkuZXF1YWxzKHRoaXMuX3JlcGVhdCwgb3RoZXIuX3JlcGVhdCkgJiZcbiAgICAgIFByb3BlcnR5LmVxdWFscyh0aGlzLl9jb2xvciwgb3RoZXIuX2NvbG9yKSAmJlxuICAgICAgUHJvcGVydHkuZXF1YWxzKHRoaXMuX3RyYW5zcGFyZW50LCBvdGhlci5fdHJhbnNwYXJlbnQpKVxuICApO1xufTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlTWF0ZXJpYWxQcm9wZXJ0eTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///33796\n')},25320:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('\n// UNUSED EXPORTS: default\n\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/ArcType.js\nvar ArcType = __webpack_require__(11491);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/AssociativeArray.js\nvar AssociativeArray = __webpack_require__(8629);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/BoundingRectangle.js\nvar BoundingRectangle = __webpack_require__(88108);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Cartesian2.js\nvar Cartesian2 = __webpack_require__(60838);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Cartesian3.js\nvar Cartesian3 = __webpack_require__(60216);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Cartographic.js\nvar Cartographic = __webpack_require__(51688);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/ClockRange.js\nvar ClockRange = __webpack_require__(44159);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/ClockStep.js\nvar ClockStep = __webpack_require__(96627);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/clone.js\nvar clone = __webpack_require__(83856);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Color.js\nvar Color = __webpack_require__(59947);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/createGuid.js\nvar createGuid = __webpack_require__(39960);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Credit.js\nvar Credit = __webpack_require__(52975);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/defaultValue.js\nvar defaultValue = __webpack_require__(62200);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/defined.js\nvar defined = __webpack_require__(82982);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/DeveloperError.js\nvar DeveloperError = __webpack_require__(12572);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Ellipsoid.js\nvar Ellipsoid = __webpack_require__(50491);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Event.js\nvar Event = __webpack_require__(14459);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/getExtensionFromUri.js\nvar getExtensionFromUri = __webpack_require__(83931);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/getFilenameFromUri.js\nvar getFilenameFromUri = __webpack_require__(8962);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/getTimestamp.js\nvar getTimestamp = __webpack_require__(59081);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/HeadingPitchRange.js\nvar HeadingPitchRange = __webpack_require__(99819);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/HeadingPitchRoll.js\nvar HeadingPitchRoll = __webpack_require__(57674);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Iso8601.js\nvar Iso8601 = __webpack_require__(22841);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/JulianDate.js\nvar JulianDate = __webpack_require__(55293);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Math.js\nvar Core_Math = __webpack_require__(99417);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/NearFarScalar.js\nvar NearFarScalar = __webpack_require__(15720);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/objectToQuery.js\nvar objectToQuery = __webpack_require__(72804);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/oneTimeWarning.js\nvar oneTimeWarning = __webpack_require__(27671);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/PinBuilder.js\nvar PinBuilder = __webpack_require__(78318);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/PolygonHierarchy.js\nvar PolygonHierarchy = __webpack_require__(78757);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/queryToObject.js\nvar queryToObject = __webpack_require__(95037);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Rectangle.js\nvar Rectangle = __webpack_require__(96190);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/Resource.js\nvar Resource = __webpack_require__(68985);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/RuntimeError.js\nvar RuntimeError = __webpack_require__(9407);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/TimeInterval.js\nvar TimeInterval = __webpack_require__(77808);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/TimeIntervalCollection.js\nvar TimeIntervalCollection = __webpack_require__(46026);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Scene/HeightReference.js\nvar HeightReference = __webpack_require__(4260);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Scene/HorizontalOrigin.js\nvar HorizontalOrigin = __webpack_require__(62919);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Scene/LabelStyle.js\nvar LabelStyle = __webpack_require__(81208);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Scene/SceneMode.js\nvar SceneMode = __webpack_require__(89917);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/ThirdParty/Autolinker.js\nvar Autolinker = __webpack_require__(99574);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/ThirdParty/Uri.js\nvar Uri = __webpack_require__(93922);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/ThirdParty/when.js\nvar when = __webpack_require__(13222);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/ThirdParty/zip.js\nvar zip = __webpack_require__(92678);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/BillboardGraphics.js\nvar BillboardGraphics = __webpack_require__(44011);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/CompositePositionProperty.js\nvar CompositePositionProperty = __webpack_require__(74254);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/DataSource.js\nvar DataSource = __webpack_require__(70265);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/DataSourceClock.js\nvar DataSourceClock = __webpack_require__(91419);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/Entity.js\nvar Entity = __webpack_require__(11895);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/EntityCluster.js\nvar EntityCluster = __webpack_require__(47890);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/EntityCollection.js\nvar EntityCollection = __webpack_require__(69516);\n;// CONCATENATED MODULE: ./node_modules/cesium/Source/DataSources/KmlCamera.js\n/**\n * Representation of <Camera> from KML\n * @alias KmlCamera\n * @constructor\n *\n * @param {Cartesian3} position camera position\n * @param {HeadingPitchRoll} headingPitchRoll camera orientation\n */\nfunction KmlCamera(position, headingPitchRoll) {\n  this.position = position;\n  this.headingPitchRoll = headingPitchRoll;\n}\n/* harmony default export */ var DataSources_KmlCamera = (KmlCamera);\n\n;// CONCATENATED MODULE: ./node_modules/cesium/Source/DataSources/KmlLookAt.js\n/**\n * @alias KmlLookAt\n * @constructor\n *\n * @param {Cartesian3} position camera position\n * @param {HeadingPitchRange} headingPitchRange camera orientation\n */\nfunction KmlLookAt(position, headingPitchRange) {\n  this.position = position;\n  this.headingPitchRange = headingPitchRange;\n}\n/* harmony default export */ var DataSources_KmlLookAt = (KmlLookAt);\n\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/KmlTour.js\nvar KmlTour = __webpack_require__(20217);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/KmlTourFlyTo.js\nvar KmlTourFlyTo = __webpack_require__(98826);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/KmlTourWait.js\nvar KmlTourWait = __webpack_require__(86729);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/LabelGraphics.js\nvar LabelGraphics = __webpack_require__(71550);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/PathGraphics.js\nvar PathGraphics = __webpack_require__(51426);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/PolygonGraphics.js\nvar PolygonGraphics = __webpack_require__(3081);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/PolylineGraphics.js\nvar PolylineGraphics = __webpack_require__(42956);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/PositionPropertyArray.js\nvar PositionPropertyArray = __webpack_require__(92961);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/RectangleGraphics.js\nvar RectangleGraphics = __webpack_require__(85441);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/ReferenceProperty.js\nvar ReferenceProperty = __webpack_require__(57547);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/SampledPositionProperty.js\nvar SampledPositionProperty = __webpack_require__(87207);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/ScaledPositionProperty.js\nvar ScaledPositionProperty = __webpack_require__(42098);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/TimeIntervalCollectionProperty.js\nvar TimeIntervalCollectionProperty = __webpack_require__(36811);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/DataSources/WallGraphics.js\nvar WallGraphics = __webpack_require__(65269);\n;// CONCATENATED MODULE: ./node_modules/cesium/Source/DataSources/KmlDataSource.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//This is by no means an exhaustive list of MIME types.\n//The purpose of this list is to be able to accurately identify content embedded\n//in KMZ files. Eventually, we can make this configurable by the end user so they can add\n//there own content types if they have KMZ files that require it.\nvar MimeTypes = {\n  avi: "video/x-msvideo",\n  bmp: "image/bmp",\n  bz2: "application/x-bzip2",\n  chm: "application/vnd.ms-htmlhelp",\n  css: "text/css",\n  csv: "text/csv",\n  doc: "application/msword",\n  dvi: "application/x-dvi",\n  eps: "application/postscript",\n  flv: "video/x-flv",\n  gif: "image/gif",\n  gz: "application/x-gzip",\n  htm: "text/html",\n  html: "text/html",\n  ico: "image/vnd.microsoft.icon",\n  jnlp: "application/x-java-jnlp-file",\n  jpeg: "image/jpeg",\n  jpg: "image/jpeg",\n  m3u: "audio/x-mpegurl",\n  m4v: "video/mp4",\n  mathml: "application/mathml+xml",\n  mid: "audio/midi",\n  midi: "audio/midi",\n  mov: "video/quicktime",\n  mp3: "audio/mpeg",\n  mp4: "video/mp4",\n  mp4v: "video/mp4",\n  mpeg: "video/mpeg",\n  mpg: "video/mpeg",\n  odp: "application/vnd.oasis.opendocument.presentation",\n  ods: "application/vnd.oasis.opendocument.spreadsheet",\n  odt: "application/vnd.oasis.opendocument.text",\n  ogg: "application/ogg",\n  pdf: "application/pdf",\n  png: "image/png",\n  pps: "application/vnd.ms-powerpoint",\n  ppt: "application/vnd.ms-powerpoint",\n  ps: "application/postscript",\n  qt: "video/quicktime",\n  rdf: "application/rdf+xml",\n  rss: "application/rss+xml",\n  rtf: "application/rtf",\n  svg: "image/svg+xml",\n  swf: "application/x-shockwave-flash",\n  text: "text/plain",\n  tif: "image/tiff",\n  tiff: "image/tiff",\n  txt: "text/plain",\n  wav: "audio/x-wav",\n  wma: "audio/x-ms-wma",\n  wmv: "video/x-ms-wmv",\n  xml: "application/xml",\n  zip: "application/zip",\n\n  detectFromFilename: function (filename) {\n    var ext = filename.toLowerCase();\n    ext = (0,getExtensionFromUri/* default */.Z)(ext);\n    return MimeTypes[ext];\n  },\n};\n\nvar parser;\nif (typeof DOMParser !== "undefined") {\n  parser = new DOMParser();\n}\n\nvar autolinker = new Autolinker/* default */.Z({\n  stripPrefix: false,\n  email: false,\n  replaceFn: function (match) {\n    if (!match.protocolUrlMatch) {\n      //Prevent matching of non-explicit urls.\n      //i.e. foo.id won\'t match but http://foo.id will\n      return false;\n    }\n  },\n});\n\nvar BILLBOARD_SIZE = 32;\n\nvar BILLBOARD_NEAR_DISTANCE = 2414016;\nvar BILLBOARD_NEAR_RATIO = 1.0;\nvar BILLBOARD_FAR_DISTANCE = 1.6093e7;\nvar BILLBOARD_FAR_RATIO = 0.1;\n\nvar kmlNamespaces = [\n  null,\n  undefined,\n  "http://www.opengis.net/kml/2.2",\n  "http://earth.google.com/kml/2.2",\n  "http://earth.google.com/kml/2.1",\n  "http://earth.google.com/kml/2.0",\n];\nvar gxNamespaces = ["http://www.google.com/kml/ext/2.2"];\nvar atomNamespaces = ["http://www.w3.org/2005/Atom"];\nvar namespaces = {\n  kml: kmlNamespaces,\n  gx: gxNamespaces,\n  atom: atomNamespaces,\n  kmlgx: kmlNamespaces.concat(gxNamespaces),\n};\n\n// Ensure Specs/Data/KML/unsupported.kml is kept up to date with these supported types\nvar featureTypes = {\n  Document: processDocument,\n  Folder: processFolder,\n  Placemark: processPlacemark,\n  NetworkLink: processNetworkLink,\n  GroundOverlay: processGroundOverlay,\n  PhotoOverlay: processUnsupportedFeature,\n  ScreenOverlay: processUnsupportedFeature,\n  Tour: processTour,\n};\n\nfunction DeferredLoading(dataSource) {\n  this._dataSource = dataSource;\n  this._deferred = when/* default.defer */.Z.defer();\n  this._stack = [];\n  this._promises = [];\n  this._timeoutSet = false;\n  this._used = false;\n\n  this._started = 0;\n  this._timeThreshold = 1000; // Initial load is 1 second\n}\n\nObject.defineProperties(DeferredLoading.prototype, {\n  dataSource: {\n    get: function () {\n      return this._dataSource;\n    },\n  },\n});\n\nDeferredLoading.prototype.addNodes = function (nodes, processingData) {\n  this._stack.push({\n    nodes: nodes,\n    index: 0,\n    processingData: processingData,\n  });\n  this._used = true;\n};\n\nDeferredLoading.prototype.addPromise = function (promise) {\n  this._promises.push(promise);\n};\n\nDeferredLoading.prototype.wait = function () {\n  // Case where we had a non-document/folder as the root\n  var deferred = this._deferred;\n  if (!this._used) {\n    deferred.resolve();\n  }\n\n  return when/* default.join */.Z.join(deferred.promise, when/* default.all */.Z.all(this._promises));\n};\n\nDeferredLoading.prototype.process = function () {\n  var isFirstCall = this._stack.length === 1;\n  if (isFirstCall) {\n    this._started = KmlDataSource._getTimestamp();\n  }\n\n  return this._process(isFirstCall);\n};\n\nDeferredLoading.prototype._giveUpTime = function () {\n  if (this._timeoutSet) {\n    // Timeout was already set so just return\n    return;\n  }\n\n  this._timeoutSet = true;\n  this._timeThreshold = 50; // After the first load lower threshold to 0.5 seconds\n  var that = this;\n  setTimeout(function () {\n    that._timeoutSet = false;\n    that._started = KmlDataSource._getTimestamp();\n    that._process(true);\n  }, 0);\n};\n\nDeferredLoading.prototype._nextNode = function () {\n  var stack = this._stack;\n  var top = stack[stack.length - 1];\n  var index = top.index;\n  var nodes = top.nodes;\n  if (index === nodes.length) {\n    return;\n  }\n  ++top.index;\n\n  return nodes[index];\n};\n\nDeferredLoading.prototype._pop = function () {\n  var stack = this._stack;\n  stack.pop();\n\n  // Return false if we are done\n  if (stack.length === 0) {\n    this._deferred.resolve();\n    return false;\n  }\n\n  return true;\n};\n\nDeferredLoading.prototype._process = function (isFirstCall) {\n  var dataSource = this.dataSource;\n  var processingData = this._stack[this._stack.length - 1].processingData;\n\n  var child = this._nextNode();\n  while ((0,defined/* default */.Z)(child)) {\n    var featureProcessor = featureTypes[child.localName];\n    if (\n      (0,defined/* default */.Z)(featureProcessor) &&\n      (namespaces.kml.indexOf(child.namespaceURI) !== -1 ||\n        namespaces.gx.indexOf(child.namespaceURI) !== -1)\n    ) {\n      featureProcessor(dataSource, child, processingData, this);\n\n      // Give up time and continue loading later\n      if (\n        this._timeoutSet ||\n        KmlDataSource._getTimestamp() > this._started + this._timeThreshold\n      ) {\n        this._giveUpTime();\n        return;\n      }\n    }\n\n    child = this._nextNode();\n  }\n\n  // If we are a recursive call from a subfolder, just return so the parent folder can continue processing\n  // If we aren\'t then make another call to processNodes because there is stuff still left in the queue\n  if (this._pop() && isFirstCall) {\n    this._process(true);\n  }\n};\n\nfunction isZipFile(blob) {\n  var magicBlob = blob.slice(0, Math.min(4, blob.size));\n  var deferred = when/* default.defer */.Z.defer();\n  var reader = new FileReader();\n  reader.addEventListener("load", function () {\n    deferred.resolve(\n      new DataView(reader.result).getUint32(0, false) === 0x504b0304\n    );\n  });\n  reader.addEventListener("error", function () {\n    deferred.reject(reader.error);\n  });\n  reader.readAsArrayBuffer(magicBlob);\n  return deferred.promise;\n}\n\nfunction readBlobAsText(blob) {\n  var deferred = when/* default.defer */.Z.defer();\n  var reader = new FileReader();\n  reader.addEventListener("load", function () {\n    deferred.resolve(reader.result);\n  });\n  reader.addEventListener("error", function () {\n    deferred.reject(reader.error);\n  });\n  reader.readAsText(blob);\n  return deferred.promise;\n}\n\nfunction insertNamespaces(text) {\n  var namespaceMap = {\n    xsi: "http://www.w3.org/2001/XMLSchema-instance",\n  };\n  var firstPart, lastPart, reg, declaration;\n\n  for (var key in namespaceMap) {\n    if (namespaceMap.hasOwnProperty(key)) {\n      reg = RegExp("[< ]" + key + ":");\n      declaration = "xmlns:" + key + "=";\n      if (reg.test(text) && text.indexOf(declaration) === -1) {\n        if (!(0,defined/* default */.Z)(firstPart)) {\n          firstPart = text.substr(0, text.indexOf("<kml") + 4);\n          lastPart = text.substr(firstPart.length);\n        }\n        firstPart += " " + declaration + \'"\' + namespaceMap[key] + \'"\';\n      }\n    }\n  }\n\n  if ((0,defined/* default */.Z)(firstPart)) {\n    text = firstPart + lastPart;\n  }\n\n  return text;\n}\n\nfunction removeDuplicateNamespaces(text) {\n  var index = text.indexOf("xmlns:");\n  var endDeclaration = text.indexOf(">", index);\n  var namespace, startIndex, endIndex;\n\n  while (index !== -1 && index < endDeclaration) {\n    namespace = text.slice(index, text.indexOf(\'"\', index));\n    startIndex = index;\n    index = text.indexOf(namespace, index + 1);\n    if (index !== -1) {\n      endIndex = text.indexOf(\'"\', text.indexOf(\'"\', index) + 1);\n      text = text.slice(0, index - 1) + text.slice(endIndex + 1, text.length);\n      index = text.indexOf("xmlns:", startIndex - 1);\n    } else {\n      index = text.indexOf("xmlns:", startIndex + 1);\n    }\n  }\n\n  return text;\n}\n\nfunction loadXmlFromZip(entry, uriResolver) {\n  return (0,when/* default */.Z)(entry.getData(new zip/* default.TextWriter */.Z.TextWriter())).then(function (text) {\n    text = insertNamespaces(text);\n    text = removeDuplicateNamespaces(text);\n    uriResolver.kml = parser.parseFromString(text, "application/xml");\n  });\n}\n\nfunction loadDataUriFromZip(entry, uriResolver) {\n  var mimeType = (0,defaultValue/* default */.Z)(\n    MimeTypes.detectFromFilename(entry.filename),\n    "application/octet-stream"\n  );\n  return (0,when/* default */.Z)(entry.getData(new zip/* default.Data64URIWriter */.Z.Data64URIWriter(mimeType))).then(function (\n    dataUri\n  ) {\n    uriResolver[entry.filename] = dataUri;\n  });\n}\n\nfunction embedDataUris(div, elementType, attributeName, uriResolver) {\n  var keys = uriResolver.keys;\n  var baseUri = new Uri/* default */.Z(".");\n  var elements = div.querySelectorAll(elementType);\n  for (var i = 0; i < elements.length; i++) {\n    var element = elements[i];\n    var value = element.getAttribute(attributeName);\n    var relativeUri = new Uri/* default */.Z(value);\n    var uri = relativeUri.absoluteTo(baseUri).toString();\n    var index = keys.indexOf(uri);\n    if (index !== -1) {\n      var key = keys[index];\n      element.setAttribute(attributeName, uriResolver[key]);\n      if (elementType === "a" && element.getAttribute("download") === null) {\n        element.setAttribute("download", key);\n      }\n    }\n  }\n}\n\nfunction applyBasePath(div, elementType, attributeName, sourceResource) {\n  var elements = div.querySelectorAll(elementType);\n  for (var i = 0; i < elements.length; i++) {\n    var element = elements[i];\n    var value = element.getAttribute(attributeName);\n    var resource = resolveHref(value, sourceResource);\n    element.setAttribute(attributeName, resource.url);\n  }\n}\n\n// an optional context is passed to allow for some malformed kmls (those with multiple geometries with same ids) to still parse\n// correctly, as they do in Google Earth.\nfunction createEntity(node, entityCollection, context) {\n  var id = queryStringAttribute(node, "id");\n  id = (0,defined/* default */.Z)(id) && id.length !== 0 ? id : (0,createGuid/* default */.Z)();\n  if ((0,defined/* default */.Z)(context)) {\n    id = context + id;\n  }\n\n  // If we have a duplicate ID just generate one.\n  // This isn\'t valid KML but Google Earth handles this case.\n  var entity = entityCollection.getById(id);\n  if ((0,defined/* default */.Z)(entity)) {\n    id = (0,createGuid/* default */.Z)();\n    if ((0,defined/* default */.Z)(context)) {\n      id = context + id;\n    }\n  }\n\n  entity = entityCollection.add(new Entity/* default */.Z({ id: id }));\n  if (!(0,defined/* default */.Z)(entity.kml)) {\n    entity.addProperty("kml");\n    entity.kml = new KmlFeatureData();\n  }\n  return entity;\n}\n\nfunction isExtrudable(altitudeMode, gxAltitudeMode) {\n  return (\n    altitudeMode === "absolute" ||\n    altitudeMode === "relativeToGround" ||\n    gxAltitudeMode === "relativeToSeaFloor"\n  );\n}\n\nfunction readCoordinate(value, ellipsoid) {\n  //Google Earth treats empty or missing coordinates as 0.\n  if (!(0,defined/* default */.Z)(value)) {\n    return Cartesian3/* default.fromDegrees */.Z.fromDegrees(0, 0, 0, ellipsoid);\n  }\n\n  var digits = value.match(/[^\\s,\\n]+/g);\n  if (!(0,defined/* default */.Z)(digits)) {\n    return Cartesian3/* default.fromDegrees */.Z.fromDegrees(0, 0, 0, ellipsoid);\n  }\n\n  var longitude = parseFloat(digits[0]);\n  var latitude = parseFloat(digits[1]);\n  var height = parseFloat(digits[2]);\n\n  longitude = isNaN(longitude) ? 0.0 : longitude;\n  latitude = isNaN(latitude) ? 0.0 : latitude;\n  height = isNaN(height) ? 0.0 : height;\n\n  return Cartesian3/* default.fromDegrees */.Z.fromDegrees(longitude, latitude, height, ellipsoid);\n}\n\nfunction readCoordinates(element, ellipsoid) {\n  if (!(0,defined/* default */.Z)(element)) {\n    return undefined;\n  }\n\n  var tuples = element.textContent.match(/[^\\s\\n]+/g);\n  if (!(0,defined/* default */.Z)(tuples)) {\n    return undefined;\n  }\n\n  var length = tuples.length;\n  var result = new Array(length);\n  var resultIndex = 0;\n  for (var i = 0; i < length; i++) {\n    result[resultIndex++] = readCoordinate(tuples[i], ellipsoid);\n  }\n  return result;\n}\n\nfunction queryNumericAttribute(node, attributeName) {\n  if (!(0,defined/* default */.Z)(node)) {\n    return undefined;\n  }\n\n  var value = node.getAttribute(attributeName);\n  if (value !== null) {\n    var result = parseFloat(value);\n    return !isNaN(result) ? result : undefined;\n  }\n  return undefined;\n}\n\nfunction queryStringAttribute(node, attributeName) {\n  if (!(0,defined/* default */.Z)(node)) {\n    return undefined;\n  }\n  var value = node.getAttribute(attributeName);\n  return value !== null ? value : undefined;\n}\n\nfunction queryFirstNode(node, tagName, namespace) {\n  if (!(0,defined/* default */.Z)(node)) {\n    return undefined;\n  }\n  var childNodes = node.childNodes;\n  var length = childNodes.length;\n  for (var q = 0; q < length; q++) {\n    var child = childNodes[q];\n    if (\n      child.localName === tagName &&\n      namespace.indexOf(child.namespaceURI) !== -1\n    ) {\n      return child;\n    }\n  }\n  return undefined;\n}\n\nfunction queryNodes(node, tagName, namespace) {\n  if (!(0,defined/* default */.Z)(node)) {\n    return undefined;\n  }\n  var result = [];\n  var childNodes = node.getElementsByTagNameNS("*", tagName);\n  var length = childNodes.length;\n  for (var q = 0; q < length; q++) {\n    var child = childNodes[q];\n    if (\n      child.localName === tagName &&\n      namespace.indexOf(child.namespaceURI) !== -1\n    ) {\n      result.push(child);\n    }\n  }\n  return result;\n}\n\nfunction queryChildNodes(node, tagName, namespace) {\n  if (!(0,defined/* default */.Z)(node)) {\n    return [];\n  }\n  var result = [];\n  var childNodes = node.childNodes;\n  var length = childNodes.length;\n  for (var q = 0; q < length; q++) {\n    var child = childNodes[q];\n    if (\n      child.localName === tagName &&\n      namespace.indexOf(child.namespaceURI) !== -1\n    ) {\n      result.push(child);\n    }\n  }\n  return result;\n}\n\nfunction queryNumericValue(node, tagName, namespace) {\n  var resultNode = queryFirstNode(node, tagName, namespace);\n  if ((0,defined/* default */.Z)(resultNode)) {\n    var result = parseFloat(resultNode.textContent);\n    return !isNaN(result) ? result : undefined;\n  }\n  return undefined;\n}\n\nfunction queryStringValue(node, tagName, namespace) {\n  var result = queryFirstNode(node, tagName, namespace);\n  if ((0,defined/* default */.Z)(result)) {\n    return result.textContent.trim();\n  }\n  return undefined;\n}\n\nfunction queryBooleanValue(node, tagName, namespace) {\n  var result = queryFirstNode(node, tagName, namespace);\n  if ((0,defined/* default */.Z)(result)) {\n    var value = result.textContent.trim();\n    return value === "1" || /^true$/i.test(value);\n  }\n  return undefined;\n}\n\nfunction resolveHref(href, sourceResource, uriResolver) {\n  if (!(0,defined/* default */.Z)(href)) {\n    return undefined;\n  }\n\n  var resource;\n  if ((0,defined/* default */.Z)(uriResolver)) {\n    // To resolve issues with KML sources defined in Windows style paths.\n    href = href.replace(/\\\\/g, "/");\n    var blob = uriResolver[href];\n    if ((0,defined/* default */.Z)(blob)) {\n      resource = new Resource/* default */.Z({\n        url: blob,\n      });\n    } else {\n      // Needed for multiple levels of KML files in a KMZ\n      var baseUri = new Uri/* default */.Z(sourceResource.getUrlComponent());\n      var uri = new Uri/* default */.Z(href);\n      blob = uriResolver[uri.absoluteTo(baseUri)];\n      if ((0,defined/* default */.Z)(blob)) {\n        resource = new Resource/* default */.Z({\n          url: blob,\n        });\n      }\n    }\n  }\n\n  if (!(0,defined/* default */.Z)(resource)) {\n    resource = sourceResource.getDerivedResource({\n      url: href,\n    });\n  }\n\n  return resource;\n}\n\nvar colorOptions = {\n  maximumRed: undefined,\n  red: undefined,\n  maximumGreen: undefined,\n  green: undefined,\n  maximumBlue: undefined,\n  blue: undefined,\n};\n\nfunction parseColorString(value, isRandom) {\n  if (!(0,defined/* default */.Z)(value) || /^\\s*$/gm.test(value)) {\n    return undefined;\n  }\n\n  if (value[0] === "#") {\n    value = value.substring(1);\n  }\n\n  var alpha = parseInt(value.substring(0, 2), 16) / 255.0;\n  var blue = parseInt(value.substring(2, 4), 16) / 255.0;\n  var green = parseInt(value.substring(4, 6), 16) / 255.0;\n  var red = parseInt(value.substring(6, 8), 16) / 255.0;\n\n  if (!isRandom) {\n    return new Color/* default */.Z(red, green, blue, alpha);\n  }\n\n  if (red > 0) {\n    colorOptions.maximumRed = red;\n    colorOptions.red = undefined;\n  } else {\n    colorOptions.maximumRed = undefined;\n    colorOptions.red = 0;\n  }\n  if (green > 0) {\n    colorOptions.maximumGreen = green;\n    colorOptions.green = undefined;\n  } else {\n    colorOptions.maximumGreen = undefined;\n    colorOptions.green = 0;\n  }\n  if (blue > 0) {\n    colorOptions.maximumBlue = blue;\n    colorOptions.blue = undefined;\n  } else {\n    colorOptions.maximumBlue = undefined;\n    colorOptions.blue = 0;\n  }\n  colorOptions.alpha = alpha;\n  return Color/* default.fromRandom */.Z.fromRandom(colorOptions);\n}\n\nfunction queryColorValue(node, tagName, namespace) {\n  var value = queryStringValue(node, tagName, namespace);\n  if (!(0,defined/* default */.Z)(value)) {\n    return undefined;\n  }\n  return parseColorString(\n    value,\n    queryStringValue(node, "colorMode", namespace) === "random"\n  );\n}\n\nfunction processTimeStamp(featureNode) {\n  var node = queryFirstNode(featureNode, "TimeStamp", namespaces.kmlgx);\n  var whenString = queryStringValue(node, "when", namespaces.kmlgx);\n\n  if (!(0,defined/* default */.Z)(node) || !(0,defined/* default */.Z)(whenString) || whenString.length === 0) {\n    return undefined;\n  }\n\n  //According to the KML spec, a TimeStamp represents a "single moment in time"\n  //However, since Cesium animates much differently than Google Earth, that doesn\'t\n  //Make much sense here.  Instead, we use the TimeStamp as the moment the feature\n  //comes into existence.  This works much better and gives a similar feel to\n  //GE\'s experience.\n  var when = JulianDate/* default.fromIso8601 */.Z.fromIso8601(whenString);\n  var result = new TimeIntervalCollection/* default */.Z();\n  result.addInterval(\n    new TimeInterval/* default */.Z({\n      start: when,\n      stop: Iso8601/* default.MAXIMUM_VALUE */.Z.MAXIMUM_VALUE,\n    })\n  );\n  return result;\n}\n\nfunction processTimeSpan(featureNode) {\n  var node = queryFirstNode(featureNode, "TimeSpan", namespaces.kmlgx);\n  if (!(0,defined/* default */.Z)(node)) {\n    return undefined;\n  }\n  var result;\n\n  var beginNode = queryFirstNode(node, "begin", namespaces.kmlgx);\n  var beginDate = (0,defined/* default */.Z)(beginNode)\n    ? JulianDate/* default.fromIso8601 */.Z.fromIso8601(beginNode.textContent)\n    : undefined;\n\n  var endNode = queryFirstNode(node, "end", namespaces.kmlgx);\n  var endDate = (0,defined/* default */.Z)(endNode)\n    ? JulianDate/* default.fromIso8601 */.Z.fromIso8601(endNode.textContent)\n    : undefined;\n\n  if ((0,defined/* default */.Z)(beginDate) && (0,defined/* default */.Z)(endDate)) {\n    if (JulianDate/* default.lessThan */.Z.lessThan(endDate, beginDate)) {\n      var tmp = beginDate;\n      beginDate = endDate;\n      endDate = tmp;\n    }\n    result = new TimeIntervalCollection/* default */.Z();\n    result.addInterval(\n      new TimeInterval/* default */.Z({\n        start: beginDate,\n        stop: endDate,\n      })\n    );\n  } else if ((0,defined/* default */.Z)(beginDate)) {\n    result = new TimeIntervalCollection/* default */.Z();\n    result.addInterval(\n      new TimeInterval/* default */.Z({\n        start: beginDate,\n        stop: Iso8601/* default.MAXIMUM_VALUE */.Z.MAXIMUM_VALUE,\n      })\n    );\n  } else if ((0,defined/* default */.Z)(endDate)) {\n    result = new TimeIntervalCollection/* default */.Z();\n    result.addInterval(\n      new TimeInterval/* default */.Z({\n        start: Iso8601/* default.MINIMUM_VALUE */.Z.MINIMUM_VALUE,\n        stop: endDate,\n      })\n    );\n  }\n\n  return result;\n}\n\nfunction createDefaultBillboard() {\n  var billboard = new BillboardGraphics/* default */.Z();\n  billboard.width = BILLBOARD_SIZE;\n  billboard.height = BILLBOARD_SIZE;\n  billboard.scaleByDistance = new NearFarScalar/* default */.Z(\n    BILLBOARD_NEAR_DISTANCE,\n    BILLBOARD_NEAR_RATIO,\n    BILLBOARD_FAR_DISTANCE,\n    BILLBOARD_FAR_RATIO\n  );\n  billboard.pixelOffsetScaleByDistance = new NearFarScalar/* default */.Z(\n    BILLBOARD_NEAR_DISTANCE,\n    BILLBOARD_NEAR_RATIO,\n    BILLBOARD_FAR_DISTANCE,\n    BILLBOARD_FAR_RATIO\n  );\n  return billboard;\n}\n\nfunction createDefaultPolygon() {\n  var polygon = new PolygonGraphics/* default */.Z();\n  polygon.outline = true;\n  polygon.outlineColor = Color/* default.WHITE */.Z.WHITE;\n  return polygon;\n}\n\nfunction createDefaultLabel() {\n  var label = new LabelGraphics/* default */.Z();\n  label.translucencyByDistance = new NearFarScalar/* default */.Z(3000000, 1.0, 5000000, 0.0);\n  label.pixelOffset = new Cartesian2/* default */.Z(17, 0);\n  label.horizontalOrigin = HorizontalOrigin/* default.LEFT */.Z.LEFT;\n  label.font = "16px sans-serif";\n  label.style = LabelStyle/* default.FILL_AND_OUTLINE */.Z.FILL_AND_OUTLINE;\n  return label;\n}\n\nfunction getIconHref(\n  iconNode,\n  dataSource,\n  sourceResource,\n  uriResolver,\n  canRefresh\n) {\n  var href = queryStringValue(iconNode, "href", namespaces.kml);\n  if (!(0,defined/* default */.Z)(href) || href.length === 0) {\n    return undefined;\n  }\n\n  if (href.indexOf("root://icons/palette-") === 0) {\n    var palette = href.charAt(21);\n\n    // Get the icon number\n    var x = (0,defaultValue/* default */.Z)(queryNumericValue(iconNode, "x", namespaces.gx), 0);\n    var y = (0,defaultValue/* default */.Z)(queryNumericValue(iconNode, "y", namespaces.gx), 0);\n    x = Math.min(x / 32, 7);\n    y = 7 - Math.min(y / 32, 7);\n    var iconNum = 8 * y + x;\n\n    href =\n      "https://maps.google.com/mapfiles/kml/pal" +\n      palette +\n      "/icon" +\n      iconNum +\n      ".png";\n  }\n\n  var hrefResource = resolveHref(href, sourceResource, uriResolver);\n\n  if (canRefresh) {\n    var refreshMode = queryStringValue(iconNode, "refreshMode", namespaces.kml);\n    var viewRefreshMode = queryStringValue(\n      iconNode,\n      "viewRefreshMode",\n      namespaces.kml\n    );\n    if (refreshMode === "onInterval" || refreshMode === "onExpire") {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-refreshMode-" + refreshMode,\n        "KML - Unsupported Icon refreshMode: " + refreshMode\n      );\n    } else if (viewRefreshMode === "onStop" || viewRefreshMode === "onRegion") {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-refreshMode-" + viewRefreshMode,\n        "KML - Unsupported Icon viewRefreshMode: " + viewRefreshMode\n      );\n    }\n\n    var viewBoundScale = (0,defaultValue/* default */.Z)(\n      queryStringValue(iconNode, "viewBoundScale", namespaces.kml),\n      1.0\n    );\n    var defaultViewFormat =\n      viewRefreshMode === "onStop"\n        ? "BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]"\n        : "";\n    var viewFormat = (0,defaultValue/* default */.Z)(\n      queryStringValue(iconNode, "viewFormat", namespaces.kml),\n      defaultViewFormat\n    );\n    var httpQuery = queryStringValue(iconNode, "httpQuery", namespaces.kml);\n    if ((0,defined/* default */.Z)(viewFormat)) {\n      hrefResource.setQueryParameters((0,queryToObject/* default */.Z)(cleanupString(viewFormat)));\n    }\n    if ((0,defined/* default */.Z)(httpQuery)) {\n      hrefResource.setQueryParameters((0,queryToObject/* default */.Z)(cleanupString(httpQuery)));\n    }\n\n    var ellipsoid = dataSource._ellipsoid;\n    processNetworkLinkQueryString(\n      hrefResource,\n      dataSource._camera,\n      dataSource._canvas,\n      viewBoundScale,\n      dataSource._lastCameraView.bbox,\n      ellipsoid\n    );\n\n    return hrefResource;\n  }\n\n  return hrefResource;\n}\n\nfunction processBillboardIcon(\n  dataSource,\n  node,\n  targetEntity,\n  sourceResource,\n  uriResolver\n) {\n  var scale = queryNumericValue(node, "scale", namespaces.kml);\n  var heading = queryNumericValue(node, "heading", namespaces.kml);\n  var color = queryColorValue(node, "color", namespaces.kml);\n\n  var iconNode = queryFirstNode(node, "Icon", namespaces.kml);\n  var icon = getIconHref(\n    iconNode,\n    dataSource,\n    sourceResource,\n    uriResolver,\n    false\n  );\n\n  // If icon tags are present but blank, we do not want to show an icon\n  if ((0,defined/* default */.Z)(iconNode) && !(0,defined/* default */.Z)(icon)) {\n    icon = false;\n  }\n\n  var x = queryNumericValue(iconNode, "x", namespaces.gx);\n  var y = queryNumericValue(iconNode, "y", namespaces.gx);\n  var w = queryNumericValue(iconNode, "w", namespaces.gx);\n  var h = queryNumericValue(iconNode, "h", namespaces.gx);\n\n  var hotSpotNode = queryFirstNode(node, "hotSpot", namespaces.kml);\n  var hotSpotX = queryNumericAttribute(hotSpotNode, "x");\n  var hotSpotY = queryNumericAttribute(hotSpotNode, "y");\n  var hotSpotXUnit = queryStringAttribute(hotSpotNode, "xunits");\n  var hotSpotYUnit = queryStringAttribute(hotSpotNode, "yunits");\n\n  var billboard = targetEntity.billboard;\n  if (!(0,defined/* default */.Z)(billboard)) {\n    billboard = createDefaultBillboard();\n    targetEntity.billboard = billboard;\n  }\n\n  billboard.image = icon;\n  billboard.scale = scale;\n  billboard.color = color;\n\n  if ((0,defined/* default */.Z)(x) || (0,defined/* default */.Z)(y) || (0,defined/* default */.Z)(w) || (0,defined/* default */.Z)(h)) {\n    billboard.imageSubRegion = new BoundingRectangle/* default */.Z(x, y, w, h);\n  }\n\n  //GE treats a heading of zero as no heading\n  //You can still point north using a 360 degree angle (or any multiple of 360)\n  if ((0,defined/* default */.Z)(heading) && heading !== 0) {\n    billboard.rotation = Core_Math/* default.toRadians */.Z.toRadians(-heading);\n    billboard.alignedAxis = Cartesian3/* default.UNIT_Z */.Z.UNIT_Z;\n  }\n\n  //Hotpot is the KML equivalent of pixel offset\n  //The hotspot origin is the lower left, but we leave\n  //our billboard origin at the center and simply\n  //modify the pixel offset to take this into account\n  scale = (0,defaultValue/* default */.Z)(scale, 1.0);\n\n  var xOffset;\n  var yOffset;\n  if ((0,defined/* default */.Z)(hotSpotX)) {\n    if (hotSpotXUnit === "pixels") {\n      xOffset = -hotSpotX * scale;\n    } else if (hotSpotXUnit === "insetPixels") {\n      xOffset = (hotSpotX - BILLBOARD_SIZE) * scale;\n    } else if (hotSpotXUnit === "fraction") {\n      xOffset = -hotSpotX * BILLBOARD_SIZE * scale;\n    }\n    xOffset += BILLBOARD_SIZE * 0.5 * scale;\n  }\n\n  if ((0,defined/* default */.Z)(hotSpotY)) {\n    if (hotSpotYUnit === "pixels") {\n      yOffset = hotSpotY * scale;\n    } else if (hotSpotYUnit === "insetPixels") {\n      yOffset = (-hotSpotY + BILLBOARD_SIZE) * scale;\n    } else if (hotSpotYUnit === "fraction") {\n      yOffset = hotSpotY * BILLBOARD_SIZE * scale;\n    }\n\n    yOffset -= BILLBOARD_SIZE * 0.5 * scale;\n  }\n\n  if ((0,defined/* default */.Z)(xOffset) || (0,defined/* default */.Z)(yOffset)) {\n    billboard.pixelOffset = new Cartesian2/* default */.Z(xOffset, yOffset);\n  }\n}\n\nfunction applyStyle(\n  dataSource,\n  styleNode,\n  targetEntity,\n  sourceResource,\n  uriResolver\n) {\n  for (var i = 0, len = styleNode.childNodes.length; i < len; i++) {\n    var node = styleNode.childNodes.item(i);\n    if (node.localName === "IconStyle") {\n      processBillboardIcon(\n        dataSource,\n        node,\n        targetEntity,\n        sourceResource,\n        uriResolver\n      );\n    } else if (node.localName === "LabelStyle") {\n      var label = targetEntity.label;\n      if (!(0,defined/* default */.Z)(label)) {\n        label = createDefaultLabel();\n        targetEntity.label = label;\n      }\n      label.scale = (0,defaultValue/* default */.Z)(\n        queryNumericValue(node, "scale", namespaces.kml),\n        label.scale\n      );\n      label.fillColor = (0,defaultValue/* default */.Z)(\n        queryColorValue(node, "color", namespaces.kml),\n        label.fillColor\n      );\n      label.text = targetEntity.name;\n    } else if (node.localName === "LineStyle") {\n      var polyline = targetEntity.polyline;\n      if (!(0,defined/* default */.Z)(polyline)) {\n        polyline = new PolylineGraphics/* default */.Z();\n        targetEntity.polyline = polyline;\n      }\n      polyline.width = queryNumericValue(node, "width", namespaces.kml);\n      polyline.material = queryColorValue(node, "color", namespaces.kml);\n      if ((0,defined/* default */.Z)(queryColorValue(node, "outerColor", namespaces.gx))) {\n        (0,oneTimeWarning/* default */.Z)(\n          "kml-gx:outerColor",\n          "KML - gx:outerColor is not supported in a LineStyle"\n        );\n      }\n      if ((0,defined/* default */.Z)(queryNumericValue(node, "outerWidth", namespaces.gx))) {\n        (0,oneTimeWarning/* default */.Z)(\n          "kml-gx:outerWidth",\n          "KML - gx:outerWidth is not supported in a LineStyle"\n        );\n      }\n      if ((0,defined/* default */.Z)(queryNumericValue(node, "physicalWidth", namespaces.gx))) {\n        (0,oneTimeWarning/* default */.Z)(\n          "kml-gx:physicalWidth",\n          "KML - gx:physicalWidth is not supported in a LineStyle"\n        );\n      }\n      if ((0,defined/* default */.Z)(queryBooleanValue(node, "labelVisibility", namespaces.gx))) {\n        (0,oneTimeWarning/* default */.Z)(\n          "kml-gx:labelVisibility",\n          "KML - gx:labelVisibility is not supported in a LineStyle"\n        );\n      }\n    } else if (node.localName === "PolyStyle") {\n      var polygon = targetEntity.polygon;\n      if (!(0,defined/* default */.Z)(polygon)) {\n        polygon = createDefaultPolygon();\n        targetEntity.polygon = polygon;\n      }\n      polygon.material = (0,defaultValue/* default */.Z)(\n        queryColorValue(node, "color", namespaces.kml),\n        polygon.material\n      );\n      polygon.fill = (0,defaultValue/* default */.Z)(\n        queryBooleanValue(node, "fill", namespaces.kml),\n        polygon.fill\n      );\n      polygon.outline = (0,defaultValue/* default */.Z)(\n        queryBooleanValue(node, "outline", namespaces.kml),\n        polygon.outline\n      );\n    } else if (node.localName === "BalloonStyle") {\n      var bgColor = (0,defaultValue/* default */.Z)(\n        parseColorString(queryStringValue(node, "bgColor", namespaces.kml)),\n        Color/* default.WHITE */.Z.WHITE\n      );\n      var textColor = (0,defaultValue/* default */.Z)(\n        parseColorString(queryStringValue(node, "textColor", namespaces.kml)),\n        Color/* default.BLACK */.Z.BLACK\n      );\n      var text = queryStringValue(node, "text", namespaces.kml);\n\n      //This is purely an internal property used in style processing,\n      //it never ends up on the final entity.\n      targetEntity.addProperty("balloonStyle");\n      targetEntity.balloonStyle = {\n        bgColor: bgColor,\n        textColor: textColor,\n        text: text,\n      };\n    } else if (node.localName === "ListStyle") {\n      var listItemType = queryStringValue(node, "listItemType", namespaces.kml);\n      if (listItemType === "radioFolder" || listItemType === "checkOffOnly") {\n        (0,oneTimeWarning/* default */.Z)(\n          "kml-listStyle-" + listItemType,\n          "KML - Unsupported ListStyle with listItemType: " + listItemType\n        );\n      }\n    }\n  }\n}\n\n//Processes and merges any inline styles for the provided node into the provided entity.\nfunction computeFinalStyle(\n  dataSource,\n  placeMark,\n  styleCollection,\n  sourceResource,\n  uriResolver\n) {\n  var result = new Entity/* default */.Z();\n  var styleEntity;\n\n  //Google earth seems to always use the last inline Style/StyleMap only\n  var styleIndex = -1;\n  var childNodes = placeMark.childNodes;\n  var length = childNodes.length;\n  for (var q = 0; q < length; q++) {\n    var child = childNodes[q];\n    if (child.localName === "Style" || child.localName === "StyleMap") {\n      styleIndex = q;\n    }\n  }\n\n  if (styleIndex !== -1) {\n    var inlineStyleNode = childNodes[styleIndex];\n    if (inlineStyleNode.localName === "Style") {\n      applyStyle(\n        dataSource,\n        inlineStyleNode,\n        result,\n        sourceResource,\n        uriResolver\n      );\n    } else {\n      // StyleMap\n      var pairs = queryChildNodes(inlineStyleNode, "Pair", namespaces.kml);\n      for (var p = 0; p < pairs.length; p++) {\n        var pair = pairs[p];\n        var key = queryStringValue(pair, "key", namespaces.kml);\n        if (key === "normal") {\n          var styleUrl = queryStringValue(pair, "styleUrl", namespaces.kml);\n          if ((0,defined/* default */.Z)(styleUrl)) {\n            styleEntity = styleCollection.getById(styleUrl);\n            if (!(0,defined/* default */.Z)(styleEntity)) {\n              styleEntity = styleCollection.getById("#" + styleUrl);\n            }\n            if ((0,defined/* default */.Z)(styleEntity)) {\n              result.merge(styleEntity);\n            }\n          } else {\n            var node = queryFirstNode(pair, "Style", namespaces.kml);\n            applyStyle(dataSource, node, result, sourceResource, uriResolver);\n          }\n        } else {\n          (0,oneTimeWarning/* default */.Z)(\n            "kml-styleMap-" + key,\n            "KML - Unsupported StyleMap key: " + key\n          );\n        }\n      }\n    }\n  }\n\n  //Google earth seems to always use the first external style only.\n  var externalStyle = queryStringValue(placeMark, "styleUrl", namespaces.kml);\n  if ((0,defined/* default */.Z)(externalStyle)) {\n    var id = externalStyle;\n    if (externalStyle[0] !== "#" && externalStyle.indexOf("#") !== -1) {\n      var tokens = externalStyle.split("#");\n      var uri = tokens[0];\n      var resource = sourceResource.getDerivedResource({\n        url: uri,\n      });\n\n      id = resource.getUrlComponent() + "#" + tokens[1];\n    }\n\n    styleEntity = styleCollection.getById(id);\n    if (!(0,defined/* default */.Z)(styleEntity)) {\n      styleEntity = styleCollection.getById("#" + id);\n    }\n    if ((0,defined/* default */.Z)(styleEntity)) {\n      result.merge(styleEntity);\n    }\n  }\n\n  return result;\n}\n\n//Asynchronously processes an external style file.\nfunction processExternalStyles(dataSource, resource, styleCollection) {\n  return resource.fetchXML().then(function (styleKml) {\n    return processStyles(dataSource, styleKml, styleCollection, resource, true);\n  });\n}\n\n//Processes all shared and external styles and stores\n//their id into the provided styleCollection.\n//Returns an array of promises that will resolve when\n//each style is loaded.\nfunction processStyles(\n  dataSource,\n  kml,\n  styleCollection,\n  sourceResource,\n  isExternal,\n  uriResolver\n) {\n  var i;\n  var id;\n  var styleEntity;\n\n  var node;\n  var styleNodes = queryNodes(kml, "Style", namespaces.kml);\n  if ((0,defined/* default */.Z)(styleNodes)) {\n    var styleNodesLength = styleNodes.length;\n    for (i = 0; i < styleNodesLength; i++) {\n      node = styleNodes[i];\n      id = queryStringAttribute(node, "id");\n      if ((0,defined/* default */.Z)(id)) {\n        id = "#" + id;\n        if (isExternal && (0,defined/* default */.Z)(sourceResource)) {\n          id = sourceResource.getUrlComponent() + id;\n        }\n        if (!(0,defined/* default */.Z)(styleCollection.getById(id))) {\n          styleEntity = new Entity/* default */.Z({\n            id: id,\n          });\n          styleCollection.add(styleEntity);\n          applyStyle(\n            dataSource,\n            node,\n            styleEntity,\n            sourceResource,\n            uriResolver\n          );\n        }\n      }\n    }\n  }\n\n  var styleMaps = queryNodes(kml, "StyleMap", namespaces.kml);\n  if ((0,defined/* default */.Z)(styleMaps)) {\n    var styleMapsLength = styleMaps.length;\n    for (i = 0; i < styleMapsLength; i++) {\n      var styleMap = styleMaps[i];\n      id = queryStringAttribute(styleMap, "id");\n      if ((0,defined/* default */.Z)(id)) {\n        var pairs = queryChildNodes(styleMap, "Pair", namespaces.kml);\n        for (var p = 0; p < pairs.length; p++) {\n          var pair = pairs[p];\n          var key = queryStringValue(pair, "key", namespaces.kml);\n          if (key === "normal") {\n            id = "#" + id;\n            if (isExternal && (0,defined/* default */.Z)(sourceResource)) {\n              id = sourceResource.getUrlComponent() + id;\n            }\n            if (!(0,defined/* default */.Z)(styleCollection.getById(id))) {\n              styleEntity = styleCollection.getOrCreateEntity(id);\n\n              var styleUrl = queryStringValue(pair, "styleUrl", namespaces.kml);\n              if ((0,defined/* default */.Z)(styleUrl)) {\n                if (styleUrl[0] !== "#") {\n                  styleUrl = "#" + styleUrl;\n                }\n\n                if (isExternal && (0,defined/* default */.Z)(sourceResource)) {\n                  styleUrl = sourceResource.getUrlComponent() + styleUrl;\n                }\n                var base = styleCollection.getById(styleUrl);\n\n                if ((0,defined/* default */.Z)(base)) {\n                  styleEntity.merge(base);\n                }\n              } else {\n                node = queryFirstNode(pair, "Style", namespaces.kml);\n                applyStyle(\n                  dataSource,\n                  node,\n                  styleEntity,\n                  sourceResource,\n                  uriResolver\n                );\n              }\n            }\n          } else {\n            (0,oneTimeWarning/* default */.Z)(\n              "kml-styleMap-" + key,\n              "KML - Unsupported StyleMap key: " + key\n            );\n          }\n        }\n      }\n    }\n  }\n\n  var promises = [];\n  var styleUrlNodes = kml.getElementsByTagName("styleUrl");\n  var styleUrlNodesLength = styleUrlNodes.length;\n  for (i = 0; i < styleUrlNodesLength; i++) {\n    var styleReference = styleUrlNodes[i].textContent;\n    if (styleReference[0] !== "#") {\n      //According to the spec, all local styles should start with a #\n      //and everything else is an external style that has a # seperating\n      //the URL of the document and the style.  However, Google Earth\n      //also accepts styleUrls without a # as meaning a local style.\n      var tokens = styleReference.split("#");\n      if (tokens.length === 2) {\n        var uri = tokens[0];\n        var resource = sourceResource.getDerivedResource({\n          url: uri,\n        });\n\n        promises.push(\n          processExternalStyles(dataSource, resource, styleCollection)\n        );\n      }\n    }\n  }\n\n  return promises;\n}\n\nfunction createDropLine(entityCollection, entity, styleEntity) {\n  var entityPosition = new ReferenceProperty/* default */.Z(entityCollection, entity.id, [\n    "position",\n  ]);\n  var surfacePosition = new ScaledPositionProperty/* default */.Z(entity.position);\n  entity.polyline = (0,defined/* default */.Z)(styleEntity.polyline)\n    ? styleEntity.polyline.clone()\n    : new PolylineGraphics/* default */.Z();\n  entity.polyline.positions = new PositionPropertyArray/* default */.Z([\n    entityPosition,\n    surfacePosition,\n  ]);\n}\n\nfunction heightReferenceFromAltitudeMode(altitudeMode, gxAltitudeMode) {\n  if (\n    (!(0,defined/* default */.Z)(altitudeMode) && !(0,defined/* default */.Z)(gxAltitudeMode)) ||\n    altitudeMode === "clampToGround"\n  ) {\n    return HeightReference/* default.CLAMP_TO_GROUND */.Z.CLAMP_TO_GROUND;\n  }\n\n  if (altitudeMode === "relativeToGround") {\n    return HeightReference/* default.RELATIVE_TO_GROUND */.Z.RELATIVE_TO_GROUND;\n  }\n\n  if (altitudeMode === "absolute") {\n    return HeightReference/* default.NONE */.Z.NONE;\n  }\n\n  if (gxAltitudeMode === "clampToSeaFloor") {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-gx:altitudeMode-clampToSeaFloor",\n      "KML - <gx:altitudeMode>:clampToSeaFloor is currently not supported, using <kml:altitudeMode>:clampToGround."\n    );\n    return HeightReference/* default.CLAMP_TO_GROUND */.Z.CLAMP_TO_GROUND;\n  }\n\n  if (gxAltitudeMode === "relativeToSeaFloor") {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-gx:altitudeMode-relativeToSeaFloor",\n      "KML - <gx:altitudeMode>:relativeToSeaFloor is currently not supported, using <kml:altitudeMode>:relativeToGround."\n    );\n    return HeightReference/* default.RELATIVE_TO_GROUND */.Z.RELATIVE_TO_GROUND;\n  }\n\n  if ((0,defined/* default */.Z)(altitudeMode)) {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-altitudeMode-unknown",\n      "KML - Unknown <kml:altitudeMode>:" +\n        altitudeMode +\n        ", using <kml:altitudeMode>:CLAMP_TO_GROUND."\n    );\n  } else {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-gx:altitudeMode-unknown",\n      "KML - Unknown <gx:altitudeMode>:" +\n        gxAltitudeMode +\n        ", using <kml:altitudeMode>:CLAMP_TO_GROUND."\n    );\n  }\n\n  // Clamp to ground is the default\n  return HeightReference/* default.CLAMP_TO_GROUND */.Z.CLAMP_TO_GROUND;\n}\n\nfunction createPositionPropertyFromAltitudeMode(\n  property,\n  altitudeMode,\n  gxAltitudeMode\n) {\n  if (\n    gxAltitudeMode === "relativeToSeaFloor" ||\n    altitudeMode === "absolute" ||\n    altitudeMode === "relativeToGround"\n  ) {\n    //Just return the ellipsoid referenced property until we support MSL\n    return property;\n  }\n\n  if (\n    ((0,defined/* default */.Z)(altitudeMode) && altitudeMode !== "clampToGround") || //\n    ((0,defined/* default */.Z)(gxAltitudeMode) && gxAltitudeMode !== "clampToSeaFloor")\n  ) {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-altitudeMode-unknown",\n      "KML - Unknown altitudeMode: " +\n        (0,defaultValue/* default */.Z)(altitudeMode, gxAltitudeMode)\n    );\n  }\n\n  // Clamp to ground is the default\n  return new ScaledPositionProperty/* default */.Z(property);\n}\n\nfunction createPositionPropertyArrayFromAltitudeMode(\n  properties,\n  altitudeMode,\n  gxAltitudeMode,\n  ellipsoid\n) {\n  if (!(0,defined/* default */.Z)(properties)) {\n    return undefined;\n  }\n\n  if (\n    gxAltitudeMode === "relativeToSeaFloor" ||\n    altitudeMode === "absolute" ||\n    altitudeMode === "relativeToGround"\n  ) {\n    //Just return the ellipsoid referenced property until we support MSL\n    return properties;\n  }\n\n  if (\n    ((0,defined/* default */.Z)(altitudeMode) && altitudeMode !== "clampToGround") || //\n    ((0,defined/* default */.Z)(gxAltitudeMode) && gxAltitudeMode !== "clampToSeaFloor")\n  ) {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-altitudeMode-unknown",\n      "KML - Unknown altitudeMode: " +\n        (0,defaultValue/* default */.Z)(altitudeMode, gxAltitudeMode)\n    );\n  }\n\n  // Clamp to ground is the default\n  var propertiesLength = properties.length;\n  for (var i = 0; i < propertiesLength; i++) {\n    var property = properties[i];\n    ellipsoid.scaleToGeodeticSurface(property, property);\n  }\n  return properties;\n}\n\nfunction processPositionGraphics(\n  dataSource,\n  entity,\n  styleEntity,\n  heightReference\n) {\n  var label = entity.label;\n  if (!(0,defined/* default */.Z)(label)) {\n    label = (0,defined/* default */.Z)(styleEntity.label)\n      ? styleEntity.label.clone()\n      : createDefaultLabel();\n    entity.label = label;\n  }\n  label.text = entity.name;\n\n  var billboard = entity.billboard;\n  if (!(0,defined/* default */.Z)(billboard)) {\n    billboard = (0,defined/* default */.Z)(styleEntity.billboard)\n      ? styleEntity.billboard.clone()\n      : createDefaultBillboard();\n    entity.billboard = billboard;\n  }\n\n  if (!(0,defined/* default */.Z)(billboard.image)) {\n    billboard.image = dataSource._pinBuilder.fromColor(Color/* default.YELLOW */.Z.YELLOW, 64);\n\n    // If there were empty <Icon> tags in the KML, then billboard.image was set to false above\n    // However, in this case, the false value would have been converted to a property afterwards\n    // Thus, we check if billboard.image is defined with value of false\n  } else if (!billboard.image.getValue()) {\n    billboard.image = undefined;\n  }\n\n  var scale = 1.0;\n  if ((0,defined/* default */.Z)(billboard.scale)) {\n    scale = billboard.scale.getValue();\n    if (scale !== 0) {\n      label.pixelOffset = new Cartesian2/* default */.Z(scale * 16 + 1, 0);\n    } else {\n      //Minor tweaks to better match Google Earth.\n      label.pixelOffset = undefined;\n      label.horizontalOrigin = undefined;\n    }\n  }\n\n  if ((0,defined/* default */.Z)(heightReference) && dataSource._clampToGround) {\n    billboard.heightReference = heightReference;\n    label.heightReference = heightReference;\n  }\n}\n\nfunction processPathGraphics(entity, styleEntity) {\n  var path = entity.path;\n  if (!(0,defined/* default */.Z)(path)) {\n    path = new PathGraphics/* default */.Z();\n    path.leadTime = 0;\n    entity.path = path;\n  }\n\n  var polyline = styleEntity.polyline;\n  if ((0,defined/* default */.Z)(polyline)) {\n    path.material = polyline.material;\n    path.width = polyline.width;\n  }\n}\n\nfunction processPoint(\n  dataSource,\n  entityCollection,\n  geometryNode,\n  entity,\n  styleEntity\n) {\n  var coordinatesString = queryStringValue(\n    geometryNode,\n    "coordinates",\n    namespaces.kml\n  );\n  var altitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.kml\n  );\n  var gxAltitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.gx\n  );\n  var extrude = queryBooleanValue(geometryNode, "extrude", namespaces.kml);\n  var ellipsoid = dataSource._ellipsoid;\n  var position = readCoordinate(coordinatesString, ellipsoid);\n\n  entity.position = position;\n  processPositionGraphics(\n    dataSource,\n    entity,\n    styleEntity,\n    heightReferenceFromAltitudeMode(altitudeMode, gxAltitudeMode)\n  );\n\n  if (extrude && isExtrudable(altitudeMode, gxAltitudeMode)) {\n    createDropLine(entityCollection, entity, styleEntity);\n  }\n\n  return true;\n}\n\nfunction processLineStringOrLinearRing(\n  dataSource,\n  entityCollection,\n  geometryNode,\n  entity,\n  styleEntity\n) {\n  var coordinatesNode = queryFirstNode(\n    geometryNode,\n    "coordinates",\n    namespaces.kml\n  );\n  var altitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.kml\n  );\n  var gxAltitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.gx\n  );\n  var extrude = queryBooleanValue(geometryNode, "extrude", namespaces.kml);\n  var tessellate = queryBooleanValue(\n    geometryNode,\n    "tessellate",\n    namespaces.kml\n  );\n  var canExtrude = isExtrudable(altitudeMode, gxAltitudeMode);\n  var zIndex = queryNumericValue(geometryNode, "drawOrder", namespaces.gx);\n\n  var ellipsoid = dataSource._ellipsoid;\n  var coordinates = readCoordinates(coordinatesNode, ellipsoid);\n  var polyline = styleEntity.polyline;\n  if (canExtrude && extrude) {\n    var wall = new WallGraphics/* default */.Z();\n    entity.wall = wall;\n    wall.positions = coordinates;\n    var polygon = styleEntity.polygon;\n\n    if ((0,defined/* default */.Z)(polygon)) {\n      wall.fill = polygon.fill;\n      wall.material = polygon.material;\n    }\n\n    //Always outline walls so they show up in 2D.\n    wall.outline = true;\n    if ((0,defined/* default */.Z)(polyline)) {\n      wall.outlineColor = (0,defined/* default */.Z)(polyline.material)\n        ? polyline.material.color\n        : Color/* default.WHITE */.Z.WHITE;\n      wall.outlineWidth = polyline.width;\n    } else if ((0,defined/* default */.Z)(polygon)) {\n      wall.outlineColor = (0,defined/* default */.Z)(polygon.material)\n        ? polygon.material.color\n        : Color/* default.WHITE */.Z.WHITE;\n    }\n  } else if (dataSource._clampToGround && !canExtrude && tessellate) {\n    var polylineGraphics = new PolylineGraphics/* default */.Z();\n    polylineGraphics.clampToGround = true;\n    entity.polyline = polylineGraphics;\n    polylineGraphics.positions = coordinates;\n    if ((0,defined/* default */.Z)(polyline)) {\n      polylineGraphics.material = (0,defined/* default */.Z)(polyline.material)\n        ? polyline.material.color.getValue(Iso8601/* default.MINIMUM_VALUE */.Z.MINIMUM_VALUE)\n        : Color/* default.WHITE */.Z.WHITE;\n      polylineGraphics.width = (0,defaultValue/* default */.Z)(polyline.width, 1.0);\n    } else {\n      polylineGraphics.material = Color/* default.WHITE */.Z.WHITE;\n      polylineGraphics.width = 1.0;\n    }\n    polylineGraphics.zIndex = zIndex;\n  } else {\n    if ((0,defined/* default */.Z)(zIndex)) {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-gx:drawOrder",\n        "KML - gx:drawOrder is not supported in LineStrings when clampToGround is false"\n      );\n    }\n    if (dataSource._clampToGround && !tessellate) {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-line-tesselate",\n        "Ignoring clampToGround for KML lines without the tessellate flag."\n      );\n    }\n\n    polyline = (0,defined/* default */.Z)(polyline) ? polyline.clone() : new PolylineGraphics/* default */.Z();\n    entity.polyline = polyline;\n    polyline.positions = createPositionPropertyArrayFromAltitudeMode(\n      coordinates,\n      altitudeMode,\n      gxAltitudeMode,\n      ellipsoid\n    );\n    if (!tessellate || canExtrude) {\n      polyline.arcType = ArcType/* default.NONE */.Z.NONE;\n    }\n  }\n\n  return true;\n}\n\nfunction processPolygon(\n  dataSource,\n  entityCollection,\n  geometryNode,\n  entity,\n  styleEntity\n) {\n  var outerBoundaryIsNode = queryFirstNode(\n    geometryNode,\n    "outerBoundaryIs",\n    namespaces.kml\n  );\n  var linearRingNode = queryFirstNode(\n    outerBoundaryIsNode,\n    "LinearRing",\n    namespaces.kml\n  );\n  var coordinatesNode = queryFirstNode(\n    linearRingNode,\n    "coordinates",\n    namespaces.kml\n  );\n  var ellipsoid = dataSource._ellipsoid;\n  var coordinates = readCoordinates(coordinatesNode, ellipsoid);\n  var extrude = queryBooleanValue(geometryNode, "extrude", namespaces.kml);\n  var altitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.kml\n  );\n  var gxAltitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.gx\n  );\n  var canExtrude = isExtrudable(altitudeMode, gxAltitudeMode);\n\n  var polygon = (0,defined/* default */.Z)(styleEntity.polygon)\n    ? styleEntity.polygon.clone()\n    : createDefaultPolygon();\n\n  var polyline = styleEntity.polyline;\n  if ((0,defined/* default */.Z)(polyline)) {\n    polygon.outlineColor = (0,defined/* default */.Z)(polyline.material)\n      ? polyline.material.color\n      : Color/* default.WHITE */.Z.WHITE;\n    polygon.outlineWidth = polyline.width;\n  }\n  entity.polygon = polygon;\n\n  if (canExtrude) {\n    polygon.perPositionHeight = true;\n    polygon.extrudedHeight = extrude ? 0 : undefined;\n  } else if (!dataSource._clampToGround) {\n    polygon.height = 0;\n  }\n\n  if ((0,defined/* default */.Z)(coordinates)) {\n    var hierarchy = new PolygonHierarchy/* default */.Z(coordinates);\n    var innerBoundaryIsNodes = queryChildNodes(\n      geometryNode,\n      "innerBoundaryIs",\n      namespaces.kml\n    );\n    for (var j = 0; j < innerBoundaryIsNodes.length; j++) {\n      linearRingNode = queryChildNodes(\n        innerBoundaryIsNodes[j],\n        "LinearRing",\n        namespaces.kml\n      );\n      for (var k = 0; k < linearRingNode.length; k++) {\n        coordinatesNode = queryFirstNode(\n          linearRingNode[k],\n          "coordinates",\n          namespaces.kml\n        );\n        coordinates = readCoordinates(coordinatesNode, ellipsoid);\n        if ((0,defined/* default */.Z)(coordinates)) {\n          hierarchy.holes.push(new PolygonHierarchy/* default */.Z(coordinates));\n        }\n      }\n    }\n    polygon.hierarchy = hierarchy;\n  }\n\n  return true;\n}\n\nfunction processTrack(\n  dataSource,\n  entityCollection,\n  geometryNode,\n  entity,\n  styleEntity\n) {\n  var altitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.kml\n  );\n  var gxAltitudeMode = queryStringValue(\n    geometryNode,\n    "altitudeMode",\n    namespaces.gx\n  );\n  var coordNodes = queryChildNodes(geometryNode, "coord", namespaces.gx);\n  var angleNodes = queryChildNodes(geometryNode, "angles", namespaces.gx);\n  var timeNodes = queryChildNodes(geometryNode, "when", namespaces.kml);\n  var extrude = queryBooleanValue(geometryNode, "extrude", namespaces.kml);\n  var canExtrude = isExtrudable(altitudeMode, gxAltitudeMode);\n  var ellipsoid = dataSource._ellipsoid;\n\n  if (angleNodes.length > 0) {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-gx:angles",\n      "KML - gx:angles are not supported in gx:Tracks"\n    );\n  }\n\n  var length = Math.min(coordNodes.length, timeNodes.length);\n  var coordinates = [];\n  var times = [];\n  for (var i = 0; i < length; i++) {\n    var position = readCoordinate(coordNodes[i].textContent, ellipsoid);\n    coordinates.push(position);\n    times.push(JulianDate/* default.fromIso8601 */.Z.fromIso8601(timeNodes[i].textContent));\n  }\n  var property = new SampledPositionProperty/* default */.Z();\n  property.addSamples(times, coordinates);\n  entity.position = property;\n  processPositionGraphics(\n    dataSource,\n    entity,\n    styleEntity,\n    heightReferenceFromAltitudeMode(altitudeMode, gxAltitudeMode)\n  );\n  processPathGraphics(entity, styleEntity);\n\n  entity.availability = new TimeIntervalCollection/* default */.Z();\n\n  if (timeNodes.length > 0) {\n    entity.availability.addInterval(\n      new TimeInterval/* default */.Z({\n        start: times[0],\n        stop: times[times.length - 1],\n      })\n    );\n  }\n\n  if (canExtrude && extrude) {\n    createDropLine(entityCollection, entity, styleEntity);\n  }\n\n  return true;\n}\n\nfunction addToMultiTrack(\n  times,\n  positions,\n  composite,\n  availability,\n  dropShowProperty,\n  extrude,\n  altitudeMode,\n  gxAltitudeMode,\n  includeEndPoints\n) {\n  var start = times[0];\n  var stop = times[times.length - 1];\n\n  var data = new SampledPositionProperty/* default */.Z();\n  data.addSamples(times, positions);\n\n  composite.intervals.addInterval(\n    new TimeInterval/* default */.Z({\n      start: start,\n      stop: stop,\n      isStartIncluded: includeEndPoints,\n      isStopIncluded: includeEndPoints,\n      data: createPositionPropertyFromAltitudeMode(\n        data,\n        altitudeMode,\n        gxAltitudeMode\n      ),\n    })\n  );\n  availability.addInterval(\n    new TimeInterval/* default */.Z({\n      start: start,\n      stop: stop,\n      isStartIncluded: includeEndPoints,\n      isStopIncluded: includeEndPoints,\n    })\n  );\n  dropShowProperty.intervals.addInterval(\n    new TimeInterval/* default */.Z({\n      start: start,\n      stop: stop,\n      isStartIncluded: includeEndPoints,\n      isStopIncluded: includeEndPoints,\n      data: extrude,\n    })\n  );\n}\n\nfunction processMultiTrack(\n  dataSource,\n  entityCollection,\n  geometryNode,\n  entity,\n  styleEntity\n) {\n  // Multitrack options do not work in GE as detailed in the spec,\n  // rather than altitudeMode being at the MultiTrack level,\n  // GE just defers all settings to the underlying track.\n\n  var interpolate = queryBooleanValue(\n    geometryNode,\n    "interpolate",\n    namespaces.gx\n  );\n  var trackNodes = queryChildNodes(geometryNode, "Track", namespaces.gx);\n\n  var times;\n  var lastStop;\n  var lastStopPosition;\n  var needDropLine = false;\n  var dropShowProperty = new TimeIntervalCollectionProperty/* default */.Z();\n  var availability = new TimeIntervalCollection/* default */.Z();\n  var composite = new CompositePositionProperty/* default */.Z();\n  var ellipsoid = dataSource._ellipsoid;\n  for (var i = 0, len = trackNodes.length; i < len; i++) {\n    var trackNode = trackNodes[i];\n    var timeNodes = queryChildNodes(trackNode, "when", namespaces.kml);\n    var coordNodes = queryChildNodes(trackNode, "coord", namespaces.gx);\n    var altitudeMode = queryStringValue(\n      trackNode,\n      "altitudeMode",\n      namespaces.kml\n    );\n    var gxAltitudeMode = queryStringValue(\n      trackNode,\n      "altitudeMode",\n      namespaces.gx\n    );\n    var canExtrude = isExtrudable(altitudeMode, gxAltitudeMode);\n    var extrude = queryBooleanValue(trackNode, "extrude", namespaces.kml);\n\n    var length = Math.min(coordNodes.length, timeNodes.length);\n\n    var positions = [];\n    times = [];\n    for (var x = 0; x < length; x++) {\n      var position = readCoordinate(coordNodes[x].textContent, ellipsoid);\n      positions.push(position);\n      times.push(JulianDate/* default.fromIso8601 */.Z.fromIso8601(timeNodes[x].textContent));\n    }\n\n    if (interpolate) {\n      //If we are interpolating, then we need to fill in the end of\n      //the last track and the beginning of this one with a sampled\n      //property.  From testing in Google Earth, this property\n      //is never extruded and always absolute.\n      if ((0,defined/* default */.Z)(lastStop)) {\n        addToMultiTrack(\n          [lastStop, times[0]],\n          [lastStopPosition, positions[0]],\n          composite,\n          availability,\n          dropShowProperty,\n          false,\n          "absolute",\n          undefined,\n          false\n        );\n      }\n      lastStop = times[length - 1];\n      lastStopPosition = positions[positions.length - 1];\n    }\n\n    addToMultiTrack(\n      times,\n      positions,\n      composite,\n      availability,\n      dropShowProperty,\n      canExtrude && extrude,\n      altitudeMode,\n      gxAltitudeMode,\n      true\n    );\n    needDropLine = needDropLine || (canExtrude && extrude);\n  }\n\n  entity.availability = availability;\n  entity.position = composite;\n  processPositionGraphics(dataSource, entity, styleEntity);\n  processPathGraphics(entity, styleEntity);\n  if (needDropLine) {\n    createDropLine(entityCollection, entity, styleEntity);\n    entity.polyline.show = dropShowProperty;\n  }\n\n  return true;\n}\n\nvar geometryTypes = {\n  Point: processPoint,\n  LineString: processLineStringOrLinearRing,\n  LinearRing: processLineStringOrLinearRing,\n  Polygon: processPolygon,\n  Track: processTrack,\n  MultiTrack: processMultiTrack,\n  MultiGeometry: processMultiGeometry,\n  Model: processUnsupportedGeometry,\n};\n\nfunction processMultiGeometry(\n  dataSource,\n  entityCollection,\n  geometryNode,\n  entity,\n  styleEntity,\n  context\n) {\n  var childNodes = geometryNode.childNodes;\n  var hasGeometry = false;\n  for (var i = 0, len = childNodes.length; i < len; i++) {\n    var childNode = childNodes.item(i);\n    var geometryProcessor = geometryTypes[childNode.localName];\n    if ((0,defined/* default */.Z)(geometryProcessor)) {\n      var childEntity = createEntity(childNode, entityCollection, context);\n      childEntity.parent = entity;\n      childEntity.name = entity.name;\n      childEntity.availability = entity.availability;\n      childEntity.description = entity.description;\n      childEntity.kml = entity.kml;\n      if (\n        geometryProcessor(\n          dataSource,\n          entityCollection,\n          childNode,\n          childEntity,\n          styleEntity\n        )\n      ) {\n        hasGeometry = true;\n      }\n    }\n  }\n\n  return hasGeometry;\n}\n\nfunction processUnsupportedGeometry(\n  dataSource,\n  entityCollection,\n  geometryNode,\n  entity,\n  styleEntity\n) {\n  (0,oneTimeWarning/* default */.Z)(\n    "kml-unsupportedGeometry",\n    "KML - Unsupported geometry: " + geometryNode.localName\n  );\n  return false;\n}\n\nfunction processExtendedData(node, entity) {\n  var extendedDataNode = queryFirstNode(node, "ExtendedData", namespaces.kml);\n\n  if (!(0,defined/* default */.Z)(extendedDataNode)) {\n    return undefined;\n  }\n\n  if ((0,defined/* default */.Z)(queryFirstNode(extendedDataNode, "SchemaData", namespaces.kml))) {\n    (0,oneTimeWarning/* default */.Z)("kml-schemaData", "KML - SchemaData is unsupported");\n  }\n  if ((0,defined/* default */.Z)(queryStringAttribute(extendedDataNode, "xmlns:prefix"))) {\n    (0,oneTimeWarning/* default */.Z)(\n      "kml-extendedData",\n      "KML - ExtendedData with xmlns:prefix is unsupported"\n    );\n  }\n\n  var result = {};\n  var dataNodes = queryChildNodes(extendedDataNode, "Data", namespaces.kml);\n  if ((0,defined/* default */.Z)(dataNodes)) {\n    var length = dataNodes.length;\n    for (var i = 0; i < length; i++) {\n      var dataNode = dataNodes[i];\n      var name = queryStringAttribute(dataNode, "name");\n      if ((0,defined/* default */.Z)(name)) {\n        result[name] = {\n          displayName: queryStringValue(\n            dataNode,\n            "displayName",\n            namespaces.kml\n          ),\n          value: queryStringValue(dataNode, "value", namespaces.kml),\n        };\n      }\n    }\n  }\n  entity.kml.extendedData = result;\n}\n\nvar scratchDiv;\nif (typeof document !== "undefined") {\n  scratchDiv = document.createElement("div");\n}\n\nfunction processDescription(\n  node,\n  entity,\n  styleEntity,\n  uriResolver,\n  sourceResource\n) {\n  var i;\n  var key;\n  var keys;\n\n  var kmlData = entity.kml;\n  var extendedData = kmlData.extendedData;\n  var description = queryStringValue(node, "description", namespaces.kml);\n\n  var balloonStyle = (0,defaultValue/* default */.Z)(\n    entity.balloonStyle,\n    styleEntity.balloonStyle\n  );\n\n  var background = Color/* default.WHITE */.Z.WHITE;\n  var foreground = Color/* default.BLACK */.Z.BLACK;\n  var text = description;\n\n  if ((0,defined/* default */.Z)(balloonStyle)) {\n    background = (0,defaultValue/* default */.Z)(balloonStyle.bgColor, Color/* default.WHITE */.Z.WHITE);\n    foreground = (0,defaultValue/* default */.Z)(balloonStyle.textColor, Color/* default.BLACK */.Z.BLACK);\n    text = (0,defaultValue/* default */.Z)(balloonStyle.text, description);\n  }\n\n  var value;\n  if ((0,defined/* default */.Z)(text)) {\n    text = text.replace("$[name]", (0,defaultValue/* default */.Z)(entity.name, ""));\n    text = text.replace("$[description]", (0,defaultValue/* default */.Z)(description, ""));\n    text = text.replace("$[address]", (0,defaultValue/* default */.Z)(kmlData.address, ""));\n    text = text.replace("$[Snippet]", (0,defaultValue/* default */.Z)(kmlData.snippet, ""));\n    text = text.replace("$[id]", entity.id);\n\n    //While not explicitly defined by the OGC spec, in Google Earth\n    //The appearance of geDirections adds the directions to/from links\n    //We simply replace this string with nothing.\n    text = text.replace("$[geDirections]", "");\n\n    if ((0,defined/* default */.Z)(extendedData)) {\n      var matches = text.match(/\\$\\[.+?\\]/g);\n      if (matches !== null) {\n        for (i = 0; i < matches.length; i++) {\n          var token = matches[i];\n          var propertyName = token.substr(2, token.length - 3);\n          var isDisplayName = /\\/displayName$/.test(propertyName);\n          propertyName = propertyName.replace(/\\/displayName$/, "");\n\n          value = extendedData[propertyName];\n          if ((0,defined/* default */.Z)(value)) {\n            value = isDisplayName ? value.displayName : value.value;\n          }\n          if ((0,defined/* default */.Z)(value)) {\n            text = text.replace(token, (0,defaultValue/* default */.Z)(value, ""));\n          }\n        }\n      }\n    }\n  } else if ((0,defined/* default */.Z)(extendedData)) {\n    //If no description exists, build a table out of the extended data\n    keys = Object.keys(extendedData);\n    if (keys.length > 0) {\n      text =\n        \'<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>\';\n      for (i = 0; i < keys.length; i++) {\n        key = keys[i];\n        value = extendedData[key];\n        text +=\n          "<tr><th>" +\n          (0,defaultValue/* default */.Z)(value.displayName, key) +\n          "</th><td>" +\n          (0,defaultValue/* default */.Z)(value.value, "") +\n          "</td></tr>";\n      }\n      text += "</tbody></table>";\n    }\n  }\n\n  if (!(0,defined/* default */.Z)(text)) {\n    //No description\n    return;\n  }\n\n  //Turns non-explicit links into clickable links.\n  text = autolinker.link(text);\n\n  //Use a temporary div to manipulate the links\n  //so that they open in a new window.\n  scratchDiv.innerHTML = text;\n  var links = scratchDiv.querySelectorAll("a");\n  for (i = 0; i < links.length; i++) {\n    links[i].setAttribute("target", "_blank");\n  }\n\n  //Rewrite any KMZ embedded urls\n  if ((0,defined/* default */.Z)(uriResolver) && uriResolver.keys.length > 1) {\n    embedDataUris(scratchDiv, "a", "href", uriResolver);\n    embedDataUris(scratchDiv, "img", "src", uriResolver);\n  }\n\n  //Make relative urls absolute using the sourceResource\n  applyBasePath(scratchDiv, "a", "href", sourceResource);\n  applyBasePath(scratchDiv, "img", "src", sourceResource);\n\n  var tmp = \'<div class="cesium-infoBox-description-lighter" style="\';\n  tmp += "overflow:auto;";\n  tmp += "word-wrap:break-word;";\n  tmp += "background-color:" + background.toCssColorString() + ";";\n  tmp += "color:" + foreground.toCssColorString() + ";";\n  tmp += \'">\';\n  tmp += scratchDiv.innerHTML + "</div>";\n  scratchDiv.innerHTML = "";\n\n  //Set the final HTML as the description.\n  entity.description = tmp;\n}\n\nfunction processFeature(dataSource, featureNode, processingData) {\n  var entityCollection = processingData.entityCollection;\n  var parent = processingData.parentEntity;\n  var sourceResource = processingData.sourceResource;\n  var uriResolver = processingData.uriResolver;\n\n  var entity = createEntity(\n    featureNode,\n    entityCollection,\n    processingData.context\n  );\n  var kmlData = entity.kml;\n  var styleEntity = computeFinalStyle(\n    dataSource,\n    featureNode,\n    processingData.styleCollection,\n    sourceResource,\n    uriResolver\n  );\n\n  var name = queryStringValue(featureNode, "name", namespaces.kml);\n  entity.name = name;\n  entity.parent = parent;\n\n  var availability = processTimeSpan(featureNode);\n  if (!(0,defined/* default */.Z)(availability)) {\n    availability = processTimeStamp(featureNode);\n  }\n  entity.availability = availability;\n\n  mergeAvailabilityWithParent(entity);\n\n  // Per KML spec "A Feature is visible only if it and all its ancestors are visible."\n  function ancestryIsVisible(parentEntity) {\n    if (!parentEntity) {\n      return true;\n    }\n    return parentEntity.show && ancestryIsVisible(parentEntity.parent);\n  }\n\n  var visibility = queryBooleanValue(featureNode, "visibility", namespaces.kml);\n  entity.show = ancestryIsVisible(parent) && (0,defaultValue/* default */.Z)(visibility, true);\n  //var open = queryBooleanValue(featureNode, \'open\', namespaces.kml);\n\n  var authorNode = queryFirstNode(featureNode, "author", namespaces.atom);\n  var author = kmlData.author;\n  author.name = queryStringValue(authorNode, "name", namespaces.atom);\n  author.uri = queryStringValue(authorNode, "uri", namespaces.atom);\n  author.email = queryStringValue(authorNode, "email", namespaces.atom);\n\n  var linkNode = queryFirstNode(featureNode, "link", namespaces.atom);\n  var link = kmlData.link;\n  link.href = queryStringAttribute(linkNode, "href");\n  link.hreflang = queryStringAttribute(linkNode, "hreflang");\n  link.rel = queryStringAttribute(linkNode, "rel");\n  link.type = queryStringAttribute(linkNode, "type");\n  link.title = queryStringAttribute(linkNode, "title");\n  link.length = queryStringAttribute(linkNode, "length");\n\n  kmlData.address = queryStringValue(featureNode, "address", namespaces.kml);\n  kmlData.phoneNumber = queryStringValue(\n    featureNode,\n    "phoneNumber",\n    namespaces.kml\n  );\n  kmlData.snippet = queryStringValue(featureNode, "Snippet", namespaces.kml);\n\n  processExtendedData(featureNode, entity);\n  processDescription(\n    featureNode,\n    entity,\n    styleEntity,\n    uriResolver,\n    sourceResource\n  );\n\n  var ellipsoid = dataSource._ellipsoid;\n  processLookAt(featureNode, entity, ellipsoid);\n  processCamera(featureNode, entity, ellipsoid);\n\n  if ((0,defined/* default */.Z)(queryFirstNode(featureNode, "Region", namespaces.kml))) {\n    (0,oneTimeWarning/* default */.Z)("kml-region", "KML - Placemark Regions are unsupported");\n  }\n\n  return {\n    entity: entity,\n    styleEntity: styleEntity,\n  };\n}\n\nfunction processDocument(dataSource, node, processingData, deferredLoading) {\n  deferredLoading.addNodes(node.childNodes, processingData);\n  deferredLoading.process();\n}\n\nfunction processFolder(dataSource, node, processingData, deferredLoading) {\n  var r = processFeature(dataSource, node, processingData);\n  var newProcessingData = (0,clone/* default */.Z)(processingData);\n  newProcessingData.parentEntity = r.entity;\n  processDocument(dataSource, node, newProcessingData, deferredLoading);\n}\n\nfunction processPlacemark(\n  dataSource,\n  placemark,\n  processingData,\n  deferredLoading\n) {\n  var r = processFeature(dataSource, placemark, processingData);\n  var entity = r.entity;\n  var styleEntity = r.styleEntity;\n\n  var hasGeometry = false;\n  var childNodes = placemark.childNodes;\n  for (var i = 0, len = childNodes.length; i < len && !hasGeometry; i++) {\n    var childNode = childNodes.item(i);\n    var geometryProcessor = geometryTypes[childNode.localName];\n    if ((0,defined/* default */.Z)(geometryProcessor)) {\n      // pass the placemark entity id as a context for case of defining multiple child entities together to handle case\n      // where some malformed kmls reuse the same id across placemarks, which works in GE, but is not technically to spec.\n      geometryProcessor(\n        dataSource,\n        processingData.entityCollection,\n        childNode,\n        entity,\n        styleEntity,\n        entity.id\n      );\n      hasGeometry = true;\n    }\n  }\n\n  if (!hasGeometry) {\n    entity.merge(styleEntity);\n    processPositionGraphics(dataSource, entity, styleEntity);\n  }\n}\n\nvar playlistNodeProcessors = {\n  FlyTo: processTourFlyTo,\n  Wait: processTourWait,\n  SoundCue: processTourUnsupportedNode,\n  AnimatedUpdate: processTourUnsupportedNode,\n  TourControl: processTourUnsupportedNode,\n};\n\nfunction processTour(dataSource, node, processingData, deferredLoading) {\n  var name = queryStringValue(node, "name", namespaces.kml);\n  var id = queryStringAttribute(node, "id");\n  var tour = new KmlTour/* default */.Z(name, id);\n\n  var playlistNode = queryFirstNode(node, "Playlist", namespaces.gx);\n  if (playlistNode) {\n    var ellipsoid = dataSource._ellipsoid;\n    var childNodes = playlistNode.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n      var entryNode = childNodes[i];\n      if (entryNode.localName) {\n        var playlistNodeProcessor = playlistNodeProcessors[entryNode.localName];\n        if (playlistNodeProcessor) {\n          playlistNodeProcessor(tour, entryNode, ellipsoid);\n        } else {\n          console.log(\n            "Unknown KML Tour playlist entry type " + entryNode.localName\n          );\n        }\n      }\n    }\n  }\n\n  dataSource._kmlTours.push(tour);\n}\n\nfunction processTourUnsupportedNode(tour, entryNode) {\n  (0,oneTimeWarning/* default */.Z)("KML Tour unsupported node " + entryNode.localName);\n}\n\nfunction processTourWait(tour, entryNode) {\n  var duration = queryNumericValue(entryNode, "duration", namespaces.gx);\n  tour.addPlaylistEntry(new KmlTourWait/* default */.Z(duration));\n}\n\nfunction processTourFlyTo(tour, entryNode, ellipsoid) {\n  var duration = queryNumericValue(entryNode, "duration", namespaces.gx);\n  var flyToMode = queryStringValue(entryNode, "flyToMode", namespaces.gx);\n\n  var t = { kml: {} };\n\n  processLookAt(entryNode, t, ellipsoid);\n  processCamera(entryNode, t, ellipsoid);\n\n  var view = t.kml.lookAt || t.kml.camera;\n\n  var flyto = new KmlTourFlyTo/* default */.Z(duration, flyToMode, view);\n  tour.addPlaylistEntry(flyto);\n}\n\nfunction processCamera(featureNode, entity, ellipsoid) {\n  var camera = queryFirstNode(featureNode, "Camera", namespaces.kml);\n  if ((0,defined/* default */.Z)(camera)) {\n    var lon = (0,defaultValue/* default */.Z)(\n      queryNumericValue(camera, "longitude", namespaces.kml),\n      0.0\n    );\n    var lat = (0,defaultValue/* default */.Z)(\n      queryNumericValue(camera, "latitude", namespaces.kml),\n      0.0\n    );\n    var altitude = (0,defaultValue/* default */.Z)(\n      queryNumericValue(camera, "altitude", namespaces.kml),\n      0.0\n    );\n\n    var heading = (0,defaultValue/* default */.Z)(\n      queryNumericValue(camera, "heading", namespaces.kml),\n      0.0\n    );\n    var tilt = (0,defaultValue/* default */.Z)(\n      queryNumericValue(camera, "tilt", namespaces.kml),\n      0.0\n    );\n    var roll = (0,defaultValue/* default */.Z)(\n      queryNumericValue(camera, "roll", namespaces.kml),\n      0.0\n    );\n\n    var position = Cartesian3/* default.fromDegrees */.Z.fromDegrees(lon, lat, altitude, ellipsoid);\n    var hpr = HeadingPitchRoll/* default.fromDegrees */.Z.fromDegrees(heading, tilt - 90.0, roll);\n\n    entity.kml.camera = new DataSources_KmlCamera(position, hpr);\n  }\n}\n\nfunction processLookAt(featureNode, entity, ellipsoid) {\n  var lookAt = queryFirstNode(featureNode, "LookAt", namespaces.kml);\n  if ((0,defined/* default */.Z)(lookAt)) {\n    var lon = (0,defaultValue/* default */.Z)(\n      queryNumericValue(lookAt, "longitude", namespaces.kml),\n      0.0\n    );\n    var lat = (0,defaultValue/* default */.Z)(\n      queryNumericValue(lookAt, "latitude", namespaces.kml),\n      0.0\n    );\n    var altitude = (0,defaultValue/* default */.Z)(\n      queryNumericValue(lookAt, "altitude", namespaces.kml),\n      0.0\n    );\n    var heading = queryNumericValue(lookAt, "heading", namespaces.kml);\n    var tilt = queryNumericValue(lookAt, "tilt", namespaces.kml);\n    var range = (0,defaultValue/* default */.Z)(\n      queryNumericValue(lookAt, "range", namespaces.kml),\n      0.0\n    );\n\n    tilt = Core_Math/* default.toRadians */.Z.toRadians((0,defaultValue/* default */.Z)(tilt, 0.0));\n    heading = Core_Math/* default.toRadians */.Z.toRadians((0,defaultValue/* default */.Z)(heading, 0.0));\n\n    var hpr = new HeadingPitchRange/* default */.Z(\n      heading,\n      tilt - Core_Math/* default.PI_OVER_TWO */.Z.PI_OVER_TWO,\n      range\n    );\n    var viewPoint = Cartesian3/* default.fromDegrees */.Z.fromDegrees(lon, lat, altitude, ellipsoid);\n\n    entity.kml.lookAt = new DataSources_KmlLookAt(viewPoint, hpr);\n  }\n}\n\nfunction processGroundOverlay(\n  dataSource,\n  groundOverlay,\n  processingData,\n  deferredLoading\n) {\n  var r = processFeature(dataSource, groundOverlay, processingData);\n  var entity = r.entity;\n\n  var geometry;\n  var isLatLonQuad = false;\n\n  var ellipsoid = dataSource._ellipsoid;\n  var positions = readCoordinates(\n    queryFirstNode(groundOverlay, "LatLonQuad", namespaces.gx),\n    ellipsoid\n  );\n  var zIndex = queryNumericValue(groundOverlay, "drawOrder", namespaces.kml);\n  if ((0,defined/* default */.Z)(positions)) {\n    geometry = createDefaultPolygon();\n    geometry.hierarchy = new PolygonHierarchy/* default */.Z(positions);\n    geometry.zIndex = zIndex;\n    entity.polygon = geometry;\n    isLatLonQuad = true;\n  } else {\n    geometry = new RectangleGraphics/* default */.Z();\n    geometry.zIndex = zIndex;\n    entity.rectangle = geometry;\n\n    var latLonBox = queryFirstNode(groundOverlay, "LatLonBox", namespaces.kml);\n    if ((0,defined/* default */.Z)(latLonBox)) {\n      var west = queryNumericValue(latLonBox, "west", namespaces.kml);\n      var south = queryNumericValue(latLonBox, "south", namespaces.kml);\n      var east = queryNumericValue(latLonBox, "east", namespaces.kml);\n      var north = queryNumericValue(latLonBox, "north", namespaces.kml);\n\n      if ((0,defined/* default */.Z)(west)) {\n        west = Core_Math/* default.negativePiToPi */.Z.negativePiToPi(Core_Math/* default.toRadians */.Z.toRadians(west));\n      }\n      if ((0,defined/* default */.Z)(south)) {\n        south = Core_Math/* default.clampToLatitudeRange */.Z.clampToLatitudeRange(Core_Math/* default.toRadians */.Z.toRadians(south));\n      }\n      if ((0,defined/* default */.Z)(east)) {\n        east = Core_Math/* default.negativePiToPi */.Z.negativePiToPi(Core_Math/* default.toRadians */.Z.toRadians(east));\n      }\n      if ((0,defined/* default */.Z)(north)) {\n        north = Core_Math/* default.clampToLatitudeRange */.Z.clampToLatitudeRange(Core_Math/* default.toRadians */.Z.toRadians(north));\n      }\n      geometry.coordinates = new Rectangle/* default */.Z(west, south, east, north);\n\n      var rotation = queryNumericValue(latLonBox, "rotation", namespaces.kml);\n      if ((0,defined/* default */.Z)(rotation)) {\n        var rotationRadians = Core_Math/* default.toRadians */.Z.toRadians(rotation);\n        geometry.rotation = rotationRadians;\n        geometry.stRotation = rotationRadians;\n      }\n    }\n  }\n\n  var iconNode = queryFirstNode(groundOverlay, "Icon", namespaces.kml);\n  var href = getIconHref(\n    iconNode,\n    dataSource,\n    processingData.sourceResource,\n    processingData.uriResolver,\n    true\n  );\n  if ((0,defined/* default */.Z)(href)) {\n    if (isLatLonQuad) {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-gx:LatLonQuad",\n        "KML - gx:LatLonQuad Icon does not support texture projection."\n      );\n    }\n    var x = queryNumericValue(iconNode, "x", namespaces.gx);\n    var y = queryNumericValue(iconNode, "y", namespaces.gx);\n    var w = queryNumericValue(iconNode, "w", namespaces.gx);\n    var h = queryNumericValue(iconNode, "h", namespaces.gx);\n\n    if ((0,defined/* default */.Z)(x) || (0,defined/* default */.Z)(y) || (0,defined/* default */.Z)(w) || (0,defined/* default */.Z)(h)) {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-groundOverlay-xywh",\n        "KML - gx:x, gx:y, gx:w, gx:h aren\'t supported for GroundOverlays"\n      );\n    }\n\n    geometry.material = href;\n    geometry.material.color = queryColorValue(\n      groundOverlay,\n      "color",\n      namespaces.kml\n    );\n    geometry.material.transparent = true;\n  } else {\n    geometry.material = queryColorValue(groundOverlay, "color", namespaces.kml);\n  }\n\n  var altitudeMode = queryStringValue(\n    groundOverlay,\n    "altitudeMode",\n    namespaces.kml\n  );\n\n  if ((0,defined/* default */.Z)(altitudeMode)) {\n    if (altitudeMode === "absolute") {\n      //Use height above ellipsoid until we support MSL.\n      geometry.height = queryNumericValue(\n        groundOverlay,\n        "altitude",\n        namespaces.kml\n      );\n      geometry.zIndex = undefined;\n    } else if (altitudeMode !== "clampToGround") {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-altitudeMode-unknown",\n        "KML - Unknown altitudeMode: " + altitudeMode\n      );\n    }\n    // else just use the default of 0 until we support \'clampToGround\'\n  } else {\n    altitudeMode = queryStringValue(\n      groundOverlay,\n      "altitudeMode",\n      namespaces.gx\n    );\n    if (altitudeMode === "relativeToSeaFloor") {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-altitudeMode-relativeToSeaFloor",\n        "KML - altitudeMode relativeToSeaFloor is currently not supported, treating as absolute."\n      );\n      geometry.height = queryNumericValue(\n        groundOverlay,\n        "altitude",\n        namespaces.kml\n      );\n      geometry.zIndex = undefined;\n    } else if (altitudeMode === "clampToSeaFloor") {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-altitudeMode-clampToSeaFloor",\n        "KML - altitudeMode clampToSeaFloor is currently not supported, treating as clampToGround."\n      );\n    } else if ((0,defined/* default */.Z)(altitudeMode)) {\n      (0,oneTimeWarning/* default */.Z)(\n        "kml-altitudeMode-unknown",\n        "KML - Unknown altitudeMode: " + altitudeMode\n      );\n    }\n  }\n}\n\nfunction processUnsupportedFeature(\n  dataSource,\n  node,\n  processingData,\n  deferredLoading\n) {\n  dataSource._unsupportedNode.raiseEvent(\n    dataSource,\n    processingData.parentEntity,\n    node,\n    processingData.entityCollection,\n    processingData.styleCollection,\n    processingData.sourceResource,\n    processingData.uriResolver\n  );\n  (0,oneTimeWarning/* default */.Z)(\n    "kml-unsupportedFeature-" + node.nodeName,\n    "KML - Unsupported feature: " + node.nodeName\n  );\n}\n\nvar RefreshMode = {\n  INTERVAL: 0,\n  EXPIRE: 1,\n  STOP: 2,\n};\n\nfunction cleanupString(s) {\n  if (!(0,defined/* default */.Z)(s) || s.length === 0) {\n    return "";\n  }\n\n  var sFirst = s[0];\n  if (sFirst === "&" || sFirst === "?") {\n    s = s.substring(1);\n  }\n\n  return s;\n}\n\nvar zeroRectangle = new Rectangle/* default */.Z();\nvar scratchCartographic = new Cartographic/* default */.Z();\nvar scratchCartesian2 = new Cartesian2/* default */.Z();\nvar scratchCartesian3 = new Cartesian3/* default */.Z();\n\nfunction processNetworkLinkQueryString(\n  resource,\n  camera,\n  canvas,\n  viewBoundScale,\n  bbox,\n  ellipsoid\n) {\n  function fixLatitude(value) {\n    if (value < -Core_Math/* default.PI_OVER_TWO */.Z.PI_OVER_TWO) {\n      return -Core_Math/* default.PI_OVER_TWO */.Z.PI_OVER_TWO;\n    } else if (value > Core_Math/* default.PI_OVER_TWO */.Z.PI_OVER_TWO) {\n      return Core_Math/* default.PI_OVER_TWO */.Z.PI_OVER_TWO;\n    }\n    return value;\n  }\n\n  function fixLongitude(value) {\n    if (value > Core_Math/* default.PI */.Z.PI) {\n      return value - Core_Math/* default.TWO_PI */.Z.TWO_PI;\n    } else if (value < -Core_Math/* default.PI */.Z.PI) {\n      return value + Core_Math/* default.TWO_PI */.Z.TWO_PI;\n    }\n\n    return value;\n  }\n\n  var queryString = (0,objectToQuery/* default */.Z)(resource.queryParameters);\n\n  // objectToQuery escapes [ and ], so fix that\n  queryString = queryString.replace(/%5B/g, "[").replace(/%5D/g, "]");\n\n  if ((0,defined/* default */.Z)(camera) && camera._mode !== SceneMode/* default.MORPHING */.Z.MORPHING) {\n    var centerCartesian;\n    var centerCartographic;\n\n    bbox = (0,defaultValue/* default */.Z)(bbox, zeroRectangle);\n    if ((0,defined/* default */.Z)(canvas)) {\n      scratchCartesian2.x = canvas.clientWidth * 0.5;\n      scratchCartesian2.y = canvas.clientHeight * 0.5;\n      centerCartesian = camera.pickEllipsoid(\n        scratchCartesian2,\n        ellipsoid,\n        scratchCartesian3\n      );\n    }\n\n    if ((0,defined/* default */.Z)(centerCartesian)) {\n      centerCartographic = ellipsoid.cartesianToCartographic(\n        centerCartesian,\n        scratchCartographic\n      );\n    } else {\n      centerCartographic = Rectangle/* default.center */.Z.center(bbox, scratchCartographic);\n      centerCartesian = ellipsoid.cartographicToCartesian(centerCartographic);\n    }\n\n    if (\n      (0,defined/* default */.Z)(viewBoundScale) &&\n      !Core_Math/* default.equalsEpsilon */.Z.equalsEpsilon(viewBoundScale, 1.0, Core_Math/* default.EPSILON9 */.Z.EPSILON9)\n    ) {\n      var newHalfWidth = bbox.width * viewBoundScale * 0.5;\n      var newHalfHeight = bbox.height * viewBoundScale * 0.5;\n      bbox = new Rectangle/* default */.Z(\n        fixLongitude(centerCartographic.longitude - newHalfWidth),\n        fixLatitude(centerCartographic.latitude - newHalfHeight),\n        fixLongitude(centerCartographic.longitude + newHalfWidth),\n        fixLatitude(centerCartographic.latitude + newHalfHeight)\n      );\n    }\n\n    queryString = queryString.replace(\n      "[bboxWest]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(bbox.west).toString()\n    );\n    queryString = queryString.replace(\n      "[bboxSouth]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(bbox.south).toString()\n    );\n    queryString = queryString.replace(\n      "[bboxEast]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(bbox.east).toString()\n    );\n    queryString = queryString.replace(\n      "[bboxNorth]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(bbox.north).toString()\n    );\n\n    var lon = Core_Math/* default.toDegrees */.Z.toDegrees(centerCartographic.longitude).toString();\n    var lat = Core_Math/* default.toDegrees */.Z.toDegrees(centerCartographic.latitude).toString();\n    queryString = queryString.replace("[lookatLon]", lon);\n    queryString = queryString.replace("[lookatLat]", lat);\n    queryString = queryString.replace(\n      "[lookatTilt]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(camera.pitch).toString()\n    );\n    queryString = queryString.replace(\n      "[lookatHeading]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(camera.heading).toString()\n    );\n    queryString = queryString.replace(\n      "[lookatRange]",\n      Cartesian3/* default.distance */.Z.distance(camera.positionWC, centerCartesian)\n    );\n    queryString = queryString.replace("[lookatTerrainLon]", lon);\n    queryString = queryString.replace("[lookatTerrainLat]", lat);\n    queryString = queryString.replace(\n      "[lookatTerrainAlt]",\n      centerCartographic.height.toString()\n    );\n\n    ellipsoid.cartesianToCartographic(camera.positionWC, scratchCartographic);\n    queryString = queryString.replace(\n      "[cameraLon]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(scratchCartographic.longitude).toString()\n    );\n    queryString = queryString.replace(\n      "[cameraLat]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(scratchCartographic.latitude).toString()\n    );\n    queryString = queryString.replace(\n      "[cameraAlt]",\n      Core_Math/* default.toDegrees */.Z.toDegrees(scratchCartographic.height).toString()\n    );\n\n    var frustum = camera.frustum;\n    var aspectRatio = frustum.aspectRatio;\n    var horizFov = "";\n    var vertFov = "";\n    if ((0,defined/* default */.Z)(aspectRatio)) {\n      var fov = Core_Math/* default.toDegrees */.Z.toDegrees(frustum.fov);\n      if (aspectRatio > 1.0) {\n        horizFov = fov;\n        vertFov = fov / aspectRatio;\n      } else {\n        vertFov = fov;\n        horizFov = fov * aspectRatio;\n      }\n    }\n    queryString = queryString.replace("[horizFov]", horizFov.toString());\n    queryString = queryString.replace("[vertFov]", vertFov.toString());\n  } else {\n    queryString = queryString.replace("[bboxWest]", "-180");\n    queryString = queryString.replace("[bboxSouth]", "-90");\n    queryString = queryString.replace("[bboxEast]", "180");\n    queryString = queryString.replace("[bboxNorth]", "90");\n\n    queryString = queryString.replace("[lookatLon]", "");\n    queryString = queryString.replace("[lookatLat]", "");\n    queryString = queryString.replace("[lookatRange]", "");\n    queryString = queryString.replace("[lookatTilt]", "");\n    queryString = queryString.replace("[lookatHeading]", "");\n    queryString = queryString.replace("[lookatTerrainLon]", "");\n    queryString = queryString.replace("[lookatTerrainLat]", "");\n    queryString = queryString.replace("[lookatTerrainAlt]", "");\n\n    queryString = queryString.replace("[cameraLon]", "");\n    queryString = queryString.replace("[cameraLat]", "");\n    queryString = queryString.replace("[cameraAlt]", "");\n    queryString = queryString.replace("[horizFov]", "");\n    queryString = queryString.replace("[vertFov]", "");\n  }\n\n  if ((0,defined/* default */.Z)(canvas)) {\n    queryString = queryString.replace("[horizPixels]", canvas.clientWidth);\n    queryString = queryString.replace("[vertPixels]", canvas.clientHeight);\n  } else {\n    queryString = queryString.replace("[horizPixels]", "");\n    queryString = queryString.replace("[vertPixels]", "");\n  }\n\n  queryString = queryString.replace("[terrainEnabled]", "1");\n  queryString = queryString.replace("[clientVersion]", "1");\n  queryString = queryString.replace("[kmlVersion]", "2.2");\n  queryString = queryString.replace("[clientName]", "Cesium");\n  queryString = queryString.replace("[language]", "English");\n\n  resource.setQueryParameters((0,queryToObject/* default */.Z)(queryString));\n}\n\nfunction processNetworkLink(dataSource, node, processingData, deferredLoading) {\n  var r = processFeature(dataSource, node, processingData);\n  var networkEntity = r.entity;\n\n  var sourceResource = processingData.sourceResource;\n  var uriResolver = processingData.uriResolver;\n\n  var link = queryFirstNode(node, "Link", namespaces.kml);\n\n  if (!(0,defined/* default */.Z)(link)) {\n    link = queryFirstNode(node, "Url", namespaces.kml);\n  }\n  if ((0,defined/* default */.Z)(link)) {\n    var href = queryStringValue(link, "href", namespaces.kml);\n    var viewRefreshMode;\n    var viewBoundScale;\n    if ((0,defined/* default */.Z)(href)) {\n      var newSourceUri = href;\n      href = resolveHref(href, sourceResource, processingData.uriResolver);\n\n      // We need to pass in the original path if resolveHref returns a data uri because the network link\n      //  references a document in a KMZ archive\n      if (/^data:/.test(href.getUrlComponent())) {\n        // So if sourceUri isn\'t the kmz file, then its another kml in the archive, so resolve it\n        if (!/\\.kmz/i.test(sourceResource.getUrlComponent())) {\n          newSourceUri = sourceResource.getDerivedResource({\n            url: newSourceUri,\n          });\n        }\n      } else {\n        newSourceUri = href.clone(); // Not a data uri so use the fully qualified uri\n        viewRefreshMode = queryStringValue(\n          link,\n          "viewRefreshMode",\n          namespaces.kml\n        );\n        viewBoundScale = (0,defaultValue/* default */.Z)(\n          queryStringValue(link, "viewBoundScale", namespaces.kml),\n          1.0\n        );\n        var defaultViewFormat =\n          viewRefreshMode === "onStop"\n            ? "BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]"\n            : "";\n        var viewFormat = (0,defaultValue/* default */.Z)(\n          queryStringValue(link, "viewFormat", namespaces.kml),\n          defaultViewFormat\n        );\n        var httpQuery = queryStringValue(link, "httpQuery", namespaces.kml);\n        if ((0,defined/* default */.Z)(viewFormat)) {\n          href.setQueryParameters((0,queryToObject/* default */.Z)(cleanupString(viewFormat)));\n        }\n        if ((0,defined/* default */.Z)(httpQuery)) {\n          href.setQueryParameters((0,queryToObject/* default */.Z)(cleanupString(httpQuery)));\n        }\n\n        var ellipsoid = dataSource._ellipsoid;\n        processNetworkLinkQueryString(\n          href,\n          dataSource._camera,\n          dataSource._canvas,\n          viewBoundScale,\n          dataSource._lastCameraView.bbox,\n          ellipsoid\n        );\n      }\n\n      var options = {\n        sourceUri: newSourceUri,\n        uriResolver: uriResolver,\n        context: networkEntity.id,\n      };\n      var networkLinkCollection = new EntityCollection/* default */.Z();\n      var promise = load(dataSource, networkLinkCollection, href, options)\n        .then(function (rootElement) {\n          var entities = dataSource._entityCollection;\n          var newEntities = networkLinkCollection.values;\n          entities.suspendEvents();\n          for (var i = 0; i < newEntities.length; i++) {\n            var newEntity = newEntities[i];\n            if (!(0,defined/* default */.Z)(newEntity.parent)) {\n              newEntity.parent = networkEntity;\n              mergeAvailabilityWithParent(newEntity);\n            }\n\n            entities.add(newEntity);\n          }\n          entities.resumeEvents();\n\n          // Add network links to a list if we need they will need to be updated\n          var refreshMode = queryStringValue(\n            link,\n            "refreshMode",\n            namespaces.kml\n          );\n          var refreshInterval = (0,defaultValue/* default */.Z)(\n            queryNumericValue(link, "refreshInterval", namespaces.kml),\n            0\n          );\n          if (\n            (refreshMode === "onInterval" && refreshInterval > 0) ||\n            refreshMode === "onExpire" ||\n            viewRefreshMode === "onStop"\n          ) {\n            var networkLinkControl = queryFirstNode(\n              rootElement,\n              "NetworkLinkControl",\n              namespaces.kml\n            );\n            var hasNetworkLinkControl = (0,defined/* default */.Z)(networkLinkControl);\n\n            var now = JulianDate/* default.now */.Z.now();\n            var networkLinkInfo = {\n              id: (0,createGuid/* default */.Z)(),\n              href: href,\n              cookie: {},\n              lastUpdated: now,\n              updating: false,\n              entity: networkEntity,\n              viewBoundScale: viewBoundScale,\n              needsUpdate: false,\n              cameraUpdateTime: now,\n            };\n\n            var minRefreshPeriod = 0;\n            if (hasNetworkLinkControl) {\n              networkLinkInfo.cookie = (0,queryToObject/* default */.Z)(\n                (0,defaultValue/* default */.Z)(\n                  queryStringValue(\n                    networkLinkControl,\n                    "cookie",\n                    namespaces.kml\n                  ),\n                  ""\n                )\n              );\n              minRefreshPeriod = (0,defaultValue/* default */.Z)(\n                queryNumericValue(\n                  networkLinkControl,\n                  "minRefreshPeriod",\n                  namespaces.kml\n                ),\n                0\n              );\n            }\n\n            if (refreshMode === "onInterval") {\n              if (hasNetworkLinkControl) {\n                refreshInterval = Math.max(minRefreshPeriod, refreshInterval);\n              }\n              networkLinkInfo.refreshMode = RefreshMode.INTERVAL;\n              networkLinkInfo.time = refreshInterval;\n            } else if (refreshMode === "onExpire") {\n              var expires;\n              if (hasNetworkLinkControl) {\n                expires = queryStringValue(\n                  networkLinkControl,\n                  "expires",\n                  namespaces.kml\n                );\n              }\n              if ((0,defined/* default */.Z)(expires)) {\n                try {\n                  var date = JulianDate/* default.fromIso8601 */.Z.fromIso8601(expires);\n                  var diff = JulianDate/* default.secondsDifference */.Z.secondsDifference(date, now);\n                  if (diff > 0 && diff < minRefreshPeriod) {\n                    JulianDate/* default.addSeconds */.Z.addSeconds(now, minRefreshPeriod, date);\n                  }\n                  networkLinkInfo.refreshMode = RefreshMode.EXPIRE;\n                  networkLinkInfo.time = date;\n                } catch (e) {\n                  (0,oneTimeWarning/* default */.Z)(\n                    "kml-refreshMode-onInterval-onExpire",\n                    "KML - NetworkLinkControl expires is not a valid date"\n                  );\n                }\n              } else {\n                (0,oneTimeWarning/* default */.Z)(\n                  "kml-refreshMode-onExpire",\n                  "KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element"\n                );\n              }\n            } else if (dataSource._camera) {\n              // Only allow onStop refreshes if we have a camera\n              networkLinkInfo.refreshMode = RefreshMode.STOP;\n              networkLinkInfo.time = (0,defaultValue/* default */.Z)(\n                queryNumericValue(link, "viewRefreshTime", namespaces.kml),\n                0\n              );\n            } else {\n              (0,oneTimeWarning/* default */.Z)(\n                "kml-refrehMode-onStop-noCamera",\n                "A NetworkLink with viewRefreshMode=onStop requires a camera be passed in when creating the KmlDataSource"\n              );\n            }\n\n            if ((0,defined/* default */.Z)(networkLinkInfo.refreshMode)) {\n              dataSource._networkLinks.set(networkLinkInfo.id, networkLinkInfo);\n            }\n          } else if (viewRefreshMode === "onRegion") {\n            (0,oneTimeWarning/* default */.Z)(\n              "kml-refrehMode-onRegion",\n              "KML - Unsupported viewRefreshMode: onRegion"\n            );\n          }\n        })\n        .otherwise(function (error) {\n          (0,oneTimeWarning/* default */.Z)("An error occured during loading " + href.url);\n          dataSource._error.raiseEvent(dataSource, error);\n        });\n\n      deferredLoading.addPromise(promise);\n    }\n  }\n}\n\nfunction processFeatureNode(dataSource, node, processingData, deferredLoading) {\n  var featureProcessor = featureTypes[node.localName];\n  if ((0,defined/* default */.Z)(featureProcessor)) {\n    return featureProcessor(dataSource, node, processingData, deferredLoading);\n  }\n\n  return processUnsupportedFeature(\n    dataSource,\n    node,\n    processingData,\n    deferredLoading\n  );\n}\n\nfunction loadKml(\n  dataSource,\n  entityCollection,\n  kml,\n  sourceResource,\n  uriResolver,\n  context\n) {\n  entityCollection.removeAll();\n\n  var documentElement = kml.documentElement;\n  var document =\n    documentElement.localName === "Document"\n      ? documentElement\n      : queryFirstNode(documentElement, "Document", namespaces.kml);\n  var name = queryStringValue(document, "name", namespaces.kml);\n  if (!(0,defined/* default */.Z)(name)) {\n    name = (0,getFilenameFromUri/* default */.Z)(sourceResource.getUrlComponent());\n  }\n\n  // Only set the name from the root document\n  if (!(0,defined/* default */.Z)(dataSource._name)) {\n    dataSource._name = name;\n  }\n\n  var deferredLoading = new KmlDataSource._DeferredLoading(dataSource);\n  var styleCollection = new EntityCollection/* default */.Z(dataSource);\n  return when/* default.all */.Z.all(\n      processStyles(\n        dataSource,\n        kml,\n        styleCollection,\n        sourceResource,\n        false,\n        uriResolver\n      )\n    )\n    .then(function () {\n      var element = kml.documentElement;\n      if (element.localName === "kml") {\n        var childNodes = element.childNodes;\n        for (var i = 0; i < childNodes.length; i++) {\n          var tmp = childNodes[i];\n          if ((0,defined/* default */.Z)(featureTypes[tmp.localName])) {\n            element = tmp;\n            break;\n          }\n        }\n      }\n\n      var processingData = {\n        parentEntity: undefined,\n        entityCollection: entityCollection,\n        styleCollection: styleCollection,\n        sourceResource: sourceResource,\n        uriResolver: uriResolver,\n        context: context,\n      };\n\n      entityCollection.suspendEvents();\n      processFeatureNode(dataSource, element, processingData, deferredLoading);\n      entityCollection.resumeEvents();\n\n      return deferredLoading.wait().then(function () {\n        return kml.documentElement;\n      });\n    });\n}\n\nfunction loadKmz(dataSource, entityCollection, blob, sourceResource) {\n  var reader = new zip/* default.ZipReader */.Z.ZipReader(new zip/* default.BlobReader */.Z.BlobReader(blob));\n  return (0,when/* default */.Z)(reader.getEntries()).then(function (entries) {\n    var promises = [];\n    var uriResolver = {};\n    var docEntry;\n    for (var i = 0; i < entries.length; i++) {\n      var entry = entries[i];\n      if (!entry.directory) {\n        if (/\\.kml$/i.test(entry.filename)) {\n          // We use the first KML document we come across\n          //  https://developers.google.com/kml/documentation/kmzarchives\n          // Unless we come across a .kml file at the root of the archive because GE does this\n          if (!(0,defined/* default */.Z)(docEntry) || !/\\//i.test(entry.filename)) {\n            if ((0,defined/* default */.Z)(docEntry)) {\n              // We found one at the root so load the initial kml as a data uri\n              promises.push(loadDataUriFromZip(docEntry, uriResolver));\n            }\n            docEntry = entry;\n          } else {\n            // Wasn\'t the first kml and wasn\'t at the root\n            promises.push(loadDataUriFromZip(entry, uriResolver));\n          }\n        } else {\n          promises.push(loadDataUriFromZip(entry, uriResolver));\n        }\n      }\n    }\n\n    // Now load the root KML document\n    if ((0,defined/* default */.Z)(docEntry)) {\n      promises.push(loadXmlFromZip(docEntry, uriResolver));\n    }\n    return when/* default.all */.Z.all(promises).then(function () {\n      reader.close();\n      if (!(0,defined/* default */.Z)(uriResolver.kml)) {\n        throw new RuntimeError/* default */.Z("KMZ file does not contain a KML document.");\n      }\n      uriResolver.keys = Object.keys(uriResolver);\n      return loadKml(\n        dataSource,\n        entityCollection,\n        uriResolver.kml,\n        sourceResource,\n        uriResolver\n      );\n    });\n  });\n}\n\nfunction load(dataSource, entityCollection, data, options) {\n  options = (0,defaultValue/* default */.Z)(options, defaultValue/* default.EMPTY_OBJECT */.Z.EMPTY_OBJECT);\n  var sourceUri = options.sourceUri;\n  var uriResolver = options.uriResolver;\n  var context = options.context;\n\n  var promise = data;\n  if (typeof data === "string" || data instanceof Resource/* default */.Z) {\n    data = Resource/* default.createIfNeeded */.Z.createIfNeeded(data);\n    promise = data.fetchBlob();\n    sourceUri = (0,defaultValue/* default */.Z)(sourceUri, data.clone());\n\n    // Add resource credits to our list of credits to display\n    var resourceCredits = dataSource._resourceCredits;\n    var credits = data.credits;\n    if ((0,defined/* default */.Z)(credits)) {\n      var length = credits.length;\n      for (var i = 0; i < length; i++) {\n        resourceCredits.push(credits[i]);\n      }\n    }\n  } else {\n    sourceUri = (0,defaultValue/* default */.Z)(sourceUri, Resource/* default.DEFAULT.clone */.Z.DEFAULT.clone());\n  }\n\n  sourceUri = Resource/* default.createIfNeeded */.Z.createIfNeeded(sourceUri);\n\n  return (0,when/* default */.Z)(promise)\n    .then(function (dataToLoad) {\n      if (dataToLoad instanceof Blob) {\n        return isZipFile(dataToLoad).then(function (isZip) {\n          if (isZip) {\n            return loadKmz(dataSource, entityCollection, dataToLoad, sourceUri);\n          }\n          return readBlobAsText(dataToLoad).then(function (text) {\n            //There\'s no official way to validate if a parse was successful.\n            //The following check detects the error on various browsers.\n\n            //Insert missing namespaces\n            text = insertNamespaces(text);\n\n            //Remove Duplicate Namespaces\n            text = removeDuplicateNamespaces(text);\n\n            //IE raises an exception\n            var kml;\n            var error;\n            try {\n              kml = parser.parseFromString(text, "application/xml");\n            } catch (e) {\n              error = e.toString();\n            }\n\n            //The parse succeeds on Chrome and Firefox, but the error\n            //handling is different in each.\n            if (\n              (0,defined/* default */.Z)(error) ||\n              kml.body ||\n              kml.documentElement.tagName === "parsererror"\n            ) {\n              //Firefox has error information as the firstChild nodeValue.\n              var msg = (0,defined/* default */.Z)(error)\n                ? error\n                : kml.documentElement.firstChild.nodeValue;\n\n              //Chrome has it in the body text.\n              if (!msg) {\n                msg = kml.body.innerText;\n              }\n\n              //Return the error\n              throw new RuntimeError/* default */.Z(msg);\n            }\n            return loadKml(\n              dataSource,\n              entityCollection,\n              kml,\n              sourceUri,\n              uriResolver,\n              context\n            );\n          });\n        });\n      }\n      return loadKml(\n        dataSource,\n        entityCollection,\n        dataToLoad,\n        sourceUri,\n        uriResolver,\n        context\n      );\n    })\n    .otherwise(function (error) {\n      dataSource._error.raiseEvent(dataSource, error);\n      console.log(error);\n      return when/* default.reject */.Z.reject(error);\n    });\n}\n\n/**\n * @typedef {Object} KmlDataSource.LoadOptions\n *\n * Initialization options for the `load` method.\n *\n * @property {Camera} camera The camera that is used for viewRefreshModes and sending camera properties to network links.\n * @property {HTMLCanvasElement} canvas The canvas that is used for sending viewer properties to network links.\n * @property {String} [sourceUri] Overrides the url to use for resolving relative links and other KML network features.\n * @property {Boolean} [clampToGround=false] true if we want the geometry features (Polygons, LineStrings and LinearRings) clamped to the ground.\n * @property {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The global ellipsoid used for geographical calculations.\n * @property {Credit|String} [credit] A credit for the data source, which is displayed on the canvas.\n */\n\n/**\n * A {@link DataSource} which processes Keyhole Markup Language 2.2 (KML).\n * <p>\n * KML support in Cesium is incomplete, but a large amount of the standard,\n * as well as Google\'s <code>gx</code> extension namespace, is supported. See Github issue\n * {@link https://github.com/CesiumGS/cesium/issues/873|#873} for a\n * detailed list of what is and isn\'t support. Cesium will also write information to the\n * console when it encounters most unsupported features.\n * </p>\n * <p>\n * Non visual feature data, such as <code>atom:author</code> and <code>ExtendedData</code>\n * is exposed via an instance of {@link KmlFeatureData}, which is added to each {@link Entity}\n * under the <code>kml</code> property.\n * </p>\n *\n * @alias KmlDataSource\n * @constructor\n *\n * @param {Object} options An object with the following properties:\n * @param {Camera} options.camera The camera that is used for viewRefreshModes and sending camera properties to network links.\n * @param {HTMLCanvasElement} options.canvas The canvas that is used for sending viewer properties to network links.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The global ellipsoid used for geographical calculations.\n * @param {Credit|String} [options.credit] A credit for the data source, which is displayed on the canvas.\n *\n * @see {@link http://www.opengeospatial.org/standards/kml/|Open Geospatial Consortium KML Standard}\n * @see {@link https://developers.google.com/kml/|Google KML Documentation}\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=KML.html|Cesium Sandcastle KML Demo}\n *\n * @example\n * var viewer = new Cesium.Viewer(\'cesiumContainer\');\n * viewer.dataSources.add(Cesium.KmlDataSource.load(\'../../SampleData/facilities.kmz\',\n *      {\n *           camera: viewer.scene.camera,\n *           canvas: viewer.scene.canvas\n *      })\n * );\n */\nfunction KmlDataSource(options) {\n  options = (0,defaultValue/* default */.Z)(options, defaultValue/* default.EMPTY_OBJECT */.Z.EMPTY_OBJECT);\n  var camera = options.camera;\n  var canvas = options.canvas;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,defined/* default */.Z)(camera)) {\n    throw new DeveloperError/* default */.Z("options.camera is required.");\n  }\n  if (!(0,defined/* default */.Z)(canvas)) {\n    throw new DeveloperError/* default */.Z("options.canvas is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this._changed = new Event/* default */.Z();\n  this._error = new Event/* default */.Z();\n  this._loading = new Event/* default */.Z();\n  this._refresh = new Event/* default */.Z();\n  this._unsupportedNode = new Event/* default */.Z();\n\n  this._clock = undefined;\n  this._entityCollection = new EntityCollection/* default */.Z(this);\n  this._name = undefined;\n  this._isLoading = false;\n  this._pinBuilder = new PinBuilder/* default */.Z();\n  this._networkLinks = new AssociativeArray/* default */.Z();\n  this._entityCluster = new EntityCluster/* default */.Z();\n\n  this._canvas = canvas;\n  this._camera = camera;\n  this._lastCameraView = {\n    position: (0,defined/* default */.Z)(camera) ? Cartesian3/* default.clone */.Z.clone(camera.positionWC) : undefined,\n    direction: (0,defined/* default */.Z)(camera)\n      ? Cartesian3/* default.clone */.Z.clone(camera.directionWC)\n      : undefined,\n    up: (0,defined/* default */.Z)(camera) ? Cartesian3/* default.clone */.Z.clone(camera.upWC) : undefined,\n    bbox: (0,defined/* default */.Z)(camera)\n      ? camera.computeViewRectangle()\n      : Rectangle/* default.clone */.Z.clone(Rectangle/* default.MAX_VALUE */.Z.MAX_VALUE),\n  };\n\n  this._ellipsoid = (0,defaultValue/* default */.Z)(options.ellipsoid, Ellipsoid/* default.WGS84 */.Z.WGS84);\n\n  // User specified credit\n  var credit = options.credit;\n  if (typeof credit === "string") {\n    credit = new Credit/* default */.Z(credit);\n  }\n  this._credit = credit;\n\n  // Create a list of Credit\'s from the resource that the user can\'t remove\n  this._resourceCredits = [];\n\n  this._kmlTours = [];\n}\n\n/**\n * Creates a Promise to a new instance loaded with the provided KML data.\n *\n * @param {Resource|String|Document|Blob} data A url, parsed KML document, or Blob containing binary KMZ data or a parsed KML document.\n * @param {KmlDataSource.LoadOptions} [options] An object specifying configuration options\n *\n * @returns {Promise.<KmlDataSource>} A promise that will resolve to a new KmlDataSource instance once the KML is loaded.\n */\nKmlDataSource.load = function (data, options) {\n  options = (0,defaultValue/* default */.Z)(options, defaultValue/* default.EMPTY_OBJECT */.Z.EMPTY_OBJECT);\n  var dataSource = new KmlDataSource(options);\n  return dataSource.load(data, options);\n};\n\nObject.defineProperties(KmlDataSource.prototype, {\n  /**\n   * Gets or sets a human-readable name for this instance.\n   * This will be automatically be set to the KML document name on load.\n   * @memberof KmlDataSource.prototype\n   * @type {String}\n   */\n  name: {\n    get: function () {\n      return this._name;\n    },\n    set: function (value) {\n      if (this._name !== value) {\n        this._name = value;\n        this._changed.raiseEvent(this);\n      }\n    },\n  },\n  /**\n   * Gets the clock settings defined by the loaded KML. This represents the total\n   * availability interval for all time-dynamic data. If the KML does not contain\n   * time-dynamic data, this value is undefined.\n   * @memberof KmlDataSource.prototype\n   * @type {DataSourceClock}\n   */\n  clock: {\n    get: function () {\n      return this._clock;\n    },\n  },\n  /**\n   * Gets the collection of {@link Entity} instances.\n   * @memberof KmlDataSource.prototype\n   * @type {EntityCollection}\n   */\n  entities: {\n    get: function () {\n      return this._entityCollection;\n    },\n  },\n  /**\n   * Gets a value indicating if the data source is currently loading data.\n   * @memberof KmlDataSource.prototype\n   * @type {Boolean}\n   */\n  isLoading: {\n    get: function () {\n      return this._isLoading;\n    },\n  },\n  /**\n   * Gets an event that will be raised when the underlying data changes.\n   * @memberof KmlDataSource.prototype\n   * @type {Event}\n   */\n  changedEvent: {\n    get: function () {\n      return this._changed;\n    },\n  },\n  /**\n   * Gets an event that will be raised if an error is encountered during processing.\n   * @memberof KmlDataSource.prototype\n   * @type {Event}\n   */\n  errorEvent: {\n    get: function () {\n      return this._error;\n    },\n  },\n  /**\n   * Gets an event that will be raised when the data source either starts or stops loading.\n   * @memberof KmlDataSource.prototype\n   * @type {Event}\n   */\n  loadingEvent: {\n    get: function () {\n      return this._loading;\n    },\n  },\n  /**\n   * Gets an event that will be raised when the data source refreshes a network link.\n   * @memberof KmlDataSource.prototype\n   * @type {Event}\n   */\n  refreshEvent: {\n    get: function () {\n      return this._refresh;\n    },\n  },\n  /**\n   * Gets an event that will be raised when the data source finds an unsupported node type.\n   * @memberof KmlDataSource.prototype\n   * @type {Event}\n   */\n  unsupportedNodeEvent: {\n    get: function () {\n      return this._unsupportedNode;\n    },\n  },\n  /**\n   * Gets whether or not this data source should be displayed.\n   * @memberof KmlDataSource.prototype\n   * @type {Boolean}\n   */\n  show: {\n    get: function () {\n      return this._entityCollection.show;\n    },\n    set: function (value) {\n      this._entityCollection.show = value;\n    },\n  },\n\n  /**\n   * Gets or sets the clustering options for this data source. This object can be shared between multiple data sources.\n   *\n   * @memberof KmlDataSource.prototype\n   * @type {EntityCluster}\n   */\n  clustering: {\n    get: function () {\n      return this._entityCluster;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!(0,defined/* default */.Z)(value)) {\n        throw new DeveloperError/* default */.Z("value must be defined.");\n      }\n      //>>includeEnd(\'debug\');\n      this._entityCluster = value;\n    },\n  },\n  /**\n   * Gets the credit that will be displayed for the data source\n   * @memberof KmlDataSource.prototype\n   * @type {Credit}\n   */\n  credit: {\n    get: function () {\n      return this._credit;\n    },\n  },\n  /**\n   * Gets the KML Tours that are used to guide the camera to specified destinations on given time intervals.\n   * @memberof KmlDataSource.prototype\n   * @type {KmlTour[]}\n   */\n  kmlTours: {\n    get: function () {\n      return this._kmlTours;\n    },\n  },\n});\n\n/**\n * Asynchronously loads the provided KML data, replacing any existing data.\n *\n * @param {Resource|String|Document|Blob} data A url, parsed KML document, or Blob containing binary KMZ data or a parsed KML document.\n * @param {Object} [options] An object with the following properties:\n * @param {Resource|String} [options.sourceUri] Overrides the url to use for resolving relative links and other KML network features.\n * @param {Boolean} [options.clampToGround=false] true if we want the geometry features (Polygons, LineStrings and LinearRings) clamped to the ground. If true, lines will use corridors so use Entity.corridor instead of Entity.polyline.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The global ellipsoid used for geographical calculations.\n *\n * @returns {Promise.<KmlDataSource>} A promise that will resolve to this instances once the KML is loaded.\n */\nKmlDataSource.prototype.load = function (data, options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,defined/* default */.Z)(data)) {\n    throw new DeveloperError/* default */.Z("data is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  options = (0,defaultValue/* default */.Z)(options, defaultValue/* default.EMPTY_OBJECT */.Z.EMPTY_OBJECT);\n  DataSource/* default.setLoading */.Z.setLoading(this, true);\n\n  var oldName = this._name;\n  this._name = undefined;\n  this._clampToGround = (0,defaultValue/* default */.Z)(options.clampToGround, false);\n\n  var that = this;\n  return load(this, this._entityCollection, data, options)\n    .then(function () {\n      var clock;\n\n      var availability = that._entityCollection.computeAvailability();\n\n      var start = availability.start;\n      var stop = availability.stop;\n      var isMinStart = JulianDate/* default.equals */.Z.equals(start, Iso8601/* default.MINIMUM_VALUE */.Z.MINIMUM_VALUE);\n      var isMaxStop = JulianDate/* default.equals */.Z.equals(stop, Iso8601/* default.MAXIMUM_VALUE */.Z.MAXIMUM_VALUE);\n      if (!isMinStart || !isMaxStop) {\n        var date;\n\n        //If start is min time just start at midnight this morning, local time\n        if (isMinStart) {\n          date = new Date();\n          date.setHours(0, 0, 0, 0);\n          start = JulianDate/* default.fromDate */.Z.fromDate(date);\n        }\n\n        //If stop is max value just stop at midnight tonight, local time\n        if (isMaxStop) {\n          date = new Date();\n          date.setHours(24, 0, 0, 0);\n          stop = JulianDate/* default.fromDate */.Z.fromDate(date);\n        }\n\n        clock = new DataSourceClock/* default */.Z();\n        clock.startTime = start;\n        clock.stopTime = stop;\n        clock.currentTime = JulianDate/* default.clone */.Z.clone(start);\n        clock.clockRange = ClockRange/* default.LOOP_STOP */.Z.LOOP_STOP;\n        clock.clockStep = ClockStep/* default.SYSTEM_CLOCK_MULTIPLIER */.Z.SYSTEM_CLOCK_MULTIPLIER;\n        clock.multiplier = Math.round(\n          Math.min(\n            Math.max(JulianDate/* default.secondsDifference */.Z.secondsDifference(stop, start) / 60, 1),\n            3.15569e7\n          )\n        );\n      }\n\n      var changed = false;\n      if (clock !== that._clock) {\n        that._clock = clock;\n        changed = true;\n      }\n\n      if (oldName !== that._name) {\n        changed = true;\n      }\n\n      if (changed) {\n        that._changed.raiseEvent(that);\n      }\n\n      DataSource/* default.setLoading */.Z.setLoading(that, false);\n\n      return that;\n    })\n    .otherwise(function (error) {\n      DataSource/* default.setLoading */.Z.setLoading(that, false);\n      that._error.raiseEvent(that, error);\n      console.log(error);\n      return when/* default.reject */.Z.reject(error);\n    });\n};\n\nfunction mergeAvailabilityWithParent(child) {\n  var parent = child.parent;\n  if ((0,defined/* default */.Z)(parent)) {\n    var parentAvailability = parent.availability;\n    if ((0,defined/* default */.Z)(parentAvailability)) {\n      var childAvailability = child.availability;\n      if ((0,defined/* default */.Z)(childAvailability)) {\n        childAvailability.intersect(parentAvailability);\n      } else {\n        child.availability = parentAvailability;\n      }\n    }\n  }\n}\n\nfunction getNetworkLinkUpdateCallback(\n  dataSource,\n  networkLink,\n  newEntityCollection,\n  networkLinks,\n  processedHref\n) {\n  return function (rootElement) {\n    if (!networkLinks.contains(networkLink.id)) {\n      // Got into the odd case where a parent network link was updated while a child\n      //  network link update was in flight, so just throw it away.\n      return;\n    }\n    var remove = false;\n    var networkLinkControl = queryFirstNode(\n      rootElement,\n      "NetworkLinkControl",\n      namespaces.kml\n    );\n    var hasNetworkLinkControl = (0,defined/* default */.Z)(networkLinkControl);\n\n    var minRefreshPeriod = 0;\n    if (hasNetworkLinkControl) {\n      if (\n        (0,defined/* default */.Z)(queryFirstNode(networkLinkControl, "Update", namespaces.kml))\n      ) {\n        (0,oneTimeWarning/* default */.Z)(\n          "kml-networkLinkControl-update",\n          "KML - NetworkLinkControl updates aren\'t supported."\n        );\n        networkLink.updating = false;\n        networkLinks.remove(networkLink.id);\n        return;\n      }\n      networkLink.cookie = (0,queryToObject/* default */.Z)(\n        (0,defaultValue/* default */.Z)(\n          queryStringValue(networkLinkControl, "cookie", namespaces.kml),\n          ""\n        )\n      );\n      minRefreshPeriod = (0,defaultValue/* default */.Z)(\n        queryNumericValue(\n          networkLinkControl,\n          "minRefreshPeriod",\n          namespaces.kml\n        ),\n        0\n      );\n    }\n\n    var now = JulianDate/* default.now */.Z.now();\n    var refreshMode = networkLink.refreshMode;\n    if (refreshMode === RefreshMode.INTERVAL) {\n      if ((0,defined/* default */.Z)(networkLinkControl)) {\n        networkLink.time = Math.max(minRefreshPeriod, networkLink.time);\n      }\n    } else if (refreshMode === RefreshMode.EXPIRE) {\n      var expires;\n      if ((0,defined/* default */.Z)(networkLinkControl)) {\n        expires = queryStringValue(\n          networkLinkControl,\n          "expires",\n          namespaces.kml\n        );\n      }\n      if ((0,defined/* default */.Z)(expires)) {\n        try {\n          var date = JulianDate/* default.fromIso8601 */.Z.fromIso8601(expires);\n          var diff = JulianDate/* default.secondsDifference */.Z.secondsDifference(date, now);\n          if (diff > 0 && diff < minRefreshPeriod) {\n            JulianDate/* default.addSeconds */.Z.addSeconds(now, minRefreshPeriod, date);\n          }\n          networkLink.time = date;\n        } catch (e) {\n          (0,oneTimeWarning/* default */.Z)(\n            "kml-networkLinkControl-expires",\n            "KML - NetworkLinkControl expires is not a valid date"\n          );\n          remove = true;\n        }\n      } else {\n        (0,oneTimeWarning/* default */.Z)(\n          "kml-refreshMode-onExpire",\n          "KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element"\n        );\n        remove = true;\n      }\n    }\n\n    var networkLinkEntity = networkLink.entity;\n    var entityCollection = dataSource._entityCollection;\n    var newEntities = newEntityCollection.values;\n\n    function removeChildren(entity) {\n      entityCollection.remove(entity);\n      var children = entity._children;\n      var count = children.length;\n      for (var i = 0; i < count; ++i) {\n        removeChildren(children[i]);\n      }\n    }\n\n    // Remove old entities\n    entityCollection.suspendEvents();\n    var entitiesCopy = entityCollection.values.slice();\n    var i;\n    for (i = 0; i < entitiesCopy.length; ++i) {\n      var entityToRemove = entitiesCopy[i];\n      if (entityToRemove.parent === networkLinkEntity) {\n        entityToRemove.parent = undefined;\n        removeChildren(entityToRemove);\n      }\n    }\n    entityCollection.resumeEvents();\n\n    // Add new entities\n    entityCollection.suspendEvents();\n    for (i = 0; i < newEntities.length; i++) {\n      var newEntity = newEntities[i];\n      if (!(0,defined/* default */.Z)(newEntity.parent)) {\n        newEntity.parent = networkLinkEntity;\n        mergeAvailabilityWithParent(newEntity);\n      }\n      entityCollection.add(newEntity);\n    }\n    entityCollection.resumeEvents();\n\n    // No refresh information remove it, otherwise update lastUpdate time\n    if (remove) {\n      networkLinks.remove(networkLink.id);\n    } else {\n      networkLink.lastUpdated = now;\n    }\n\n    var availability = entityCollection.computeAvailability();\n\n    var start = availability.start;\n    var stop = availability.stop;\n    var isMinStart = JulianDate/* default.equals */.Z.equals(start, Iso8601/* default.MINIMUM_VALUE */.Z.MINIMUM_VALUE);\n    var isMaxStop = JulianDate/* default.equals */.Z.equals(stop, Iso8601/* default.MAXIMUM_VALUE */.Z.MAXIMUM_VALUE);\n    if (!isMinStart || !isMaxStop) {\n      var clock = dataSource._clock;\n\n      if (clock.startTime !== start || clock.stopTime !== stop) {\n        clock.startTime = start;\n        clock.stopTime = stop;\n        dataSource._changed.raiseEvent(dataSource);\n      }\n    }\n\n    networkLink.updating = false;\n    networkLink.needsUpdate = false;\n    dataSource._refresh.raiseEvent(\n      dataSource,\n      processedHref.getUrlComponent(true)\n    );\n  };\n}\n\nvar entitiesToIgnore = new AssociativeArray/* default */.Z();\n\n/**\n * Updates any NetworkLink that require updating.\n *\n * @param {JulianDate} time The simulation time.\n * @returns {Boolean} True if this data source is ready to be displayed at the provided time, false otherwise.\n */\nKmlDataSource.prototype.update = function (time) {\n  var networkLinks = this._networkLinks;\n  if (networkLinks.length === 0) {\n    return true;\n  }\n\n  var now = JulianDate/* default.now */.Z.now();\n  var that = this;\n\n  entitiesToIgnore.removeAll();\n\n  function recurseIgnoreEntities(entity) {\n    var children = entity._children;\n    var count = children.length;\n    for (var i = 0; i < count; ++i) {\n      var child = children[i];\n      entitiesToIgnore.set(child.id, child);\n      recurseIgnoreEntities(child);\n    }\n  }\n\n  var cameraViewUpdate = false;\n  var lastCameraView = this._lastCameraView;\n  var camera = this._camera;\n  if (\n    (0,defined/* default */.Z)(camera) &&\n    !(\n      camera.positionWC.equalsEpsilon(\n        lastCameraView.position,\n        Core_Math/* default.EPSILON7 */.Z.EPSILON7\n      ) &&\n      camera.directionWC.equalsEpsilon(\n        lastCameraView.direction,\n        Core_Math/* default.EPSILON7 */.Z.EPSILON7\n      ) &&\n      camera.upWC.equalsEpsilon(lastCameraView.up, Core_Math/* default.EPSILON7 */.Z.EPSILON7)\n    )\n  ) {\n    // Camera has changed so update the last view\n    lastCameraView.position = Cartesian3/* default.clone */.Z.clone(camera.positionWC);\n    lastCameraView.direction = Cartesian3/* default.clone */.Z.clone(camera.directionWC);\n    lastCameraView.up = Cartesian3/* default.clone */.Z.clone(camera.upWC);\n    lastCameraView.bbox = camera.computeViewRectangle();\n    cameraViewUpdate = true;\n  }\n\n  var newNetworkLinks = new AssociativeArray/* default */.Z();\n  var changed = false;\n  networkLinks.values.forEach(function (networkLink) {\n    var entity = networkLink.entity;\n    if (entitiesToIgnore.contains(entity.id)) {\n      return;\n    }\n\n    if (!networkLink.updating) {\n      var doUpdate = false;\n      if (networkLink.refreshMode === RefreshMode.INTERVAL) {\n        if (\n          JulianDate/* default.secondsDifference */.Z.secondsDifference(now, networkLink.lastUpdated) >\n          networkLink.time\n        ) {\n          doUpdate = true;\n        }\n      } else if (networkLink.refreshMode === RefreshMode.EXPIRE) {\n        if (JulianDate/* default.greaterThan */.Z.greaterThan(now, networkLink.time)) {\n          doUpdate = true;\n        }\n      } else if (networkLink.refreshMode === RefreshMode.STOP) {\n        if (cameraViewUpdate) {\n          networkLink.needsUpdate = true;\n          networkLink.cameraUpdateTime = now;\n        }\n\n        if (\n          networkLink.needsUpdate &&\n          JulianDate/* default.secondsDifference */.Z.secondsDifference(now, networkLink.cameraUpdateTime) >=\n            networkLink.time\n        ) {\n          doUpdate = true;\n        }\n      }\n\n      if (doUpdate) {\n        recurseIgnoreEntities(entity);\n        networkLink.updating = true;\n        var newEntityCollection = new EntityCollection/* default */.Z();\n        var href = networkLink.href.clone();\n\n        href.setQueryParameters(networkLink.cookie);\n        var ellipsoid = (0,defaultValue/* default */.Z)(that._ellipsoid, Ellipsoid/* default.WGS84 */.Z.WGS84);\n        processNetworkLinkQueryString(\n          href,\n          that._camera,\n          that._canvas,\n          networkLink.viewBoundScale,\n          lastCameraView.bbox,\n          ellipsoid\n        );\n\n        load(that, newEntityCollection, href, { context: entity.id })\n          .then(\n            getNetworkLinkUpdateCallback(\n              that,\n              networkLink,\n              newEntityCollection,\n              newNetworkLinks,\n              href\n            )\n          )\n          .otherwise(function (error) {\n            var msg =\n              "NetworkLink " + networkLink.href + " refresh failed: " + error;\n            console.log(msg);\n            that._error.raiseEvent(that, msg);\n          });\n        changed = true;\n      }\n    }\n    newNetworkLinks.set(networkLink.id, networkLink);\n  });\n\n  if (changed) {\n    this._networkLinks = newNetworkLinks;\n    this._changed.raiseEvent(this);\n  }\n\n  return true;\n};\n\n/**\n * Contains KML Feature data loaded into the <code>Entity.kml</code> property by {@link KmlDataSource}.\n * @alias KmlFeatureData\n * @constructor\n */\nfunction KmlFeatureData() {\n  /**\n   * @typedef KmlFeatureData.Author\n   * @type {Object}\n   * @property {String} name Gets the name.\n   * @property {String} uri Gets the URI.\n   * @property {Number} age Gets the email.\n   */\n\n  /**\n   * Gets the atom syndication format author field.\n   * @type {KmlFeatureData.Author}\n   */\n  this.author = {\n    name: undefined,\n    uri: undefined,\n    email: undefined,\n  };\n\n  /**\n   * @typedef KmlFeatureData.Link\n   * @type {Object}\n   * @property {String} href Gets the href.\n   * @property {String} hreflang Gets the language of the linked resource.\n   * @property {String} rel Gets the link relation.\n   * @property {String} type Gets the link type.\n   * @property {String} title Gets the link title.\n   * @property {String} length Gets the link length.\n   */\n\n  /**\n   * Gets the link.\n   * @type {KmlFeatureData.Link}\n   */\n  this.link = {\n    href: undefined,\n    hreflang: undefined,\n    rel: undefined,\n    type: undefined,\n    title: undefined,\n    length: undefined,\n  };\n\n  /**\n   * Gets the unstructured address field.\n   * @type {String}\n   */\n  this.address = undefined;\n  /**\n   * Gets the phone number.\n   * @type {String}\n   */\n  this.phoneNumber = undefined;\n  /**\n   * Gets the snippet.\n   * @type {String}\n   */\n  this.snippet = undefined;\n  /**\n   * Gets the extended data, parsed into a JSON object.\n   * Currently only the <code>Data</code> property is supported.\n   * <code>SchemaData</code> and custom data are ignored.\n   * @type {String}\n   */\n  this.extendedData = undefined;\n}\n\n// For testing\nKmlDataSource._DeferredLoading = DeferredLoading;\nKmlDataSource._getTimestamp = getTimestamp/* default */.Z;\n\n/* harmony default export */ var DataSources_KmlDataSource = ((/* unused pure expression or super */ null && (KmlDataSource)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzMjAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUFlLFNBQVMsRUFBQzs7O0FDWnpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsbUJBQW1CO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBZSxTQUFTLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYZ0I7QUFDa0I7QUFDRTtBQUNkO0FBQ0E7QUFDSTtBQUNKO0FBQ0Y7QUFDUjtBQUNBO0FBQ1U7QUFDUjtBQUNZO0FBQ1Y7QUFDYztBQUNWO0FBQ1I7QUFDNEI7QUFDRjtBQUNaO0FBQ1U7QUFDRjtBQUNsQjtBQUNNO0FBQ047QUFDWTtBQUNBO0FBQ0U7QUFDUjtBQUNZO0FBQ047QUFDUjtBQUNGO0FBQ1E7QUFDQTtBQUNvQjtBQUNiO0FBQ0U7QUFDWjtBQUNGO0FBQ087QUFDZDtBQUNFO0FBQ0Y7QUFDZ0I7QUFDZ0I7QUFDOUI7QUFDVTtBQUNsQjtBQUNjO0FBQ007QUFDZDtBQUNBO0FBQ0o7QUFDVTtBQUNGO0FBQ0k7QUFDRjtBQUNNO0FBQ0U7QUFDVTtBQUNSO0FBQ0E7QUFDWTtBQUNGO0FBQ2dCO0FBQ3BDOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxzQ0FBbUI7QUFDN0I7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHlCQUFVO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsK0JBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyw2QkFBUyxtQkFBbUIsMkJBQVE7QUFDN0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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LXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvS21sQ2FtZXJhLmpzPzE0YTAiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL0ttbExvb2tBdC5qcz9lNjkxIiwid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9LbWxEYXRhU291cmNlLmpzPzFjMDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiA8Q2FtZXJhPiBmcm9tIEtNTFxuICogQGFsaWFzIEttbENhbWVyYVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBwb3NpdGlvbiBjYW1lcmEgcG9zaXRpb25cbiAqIEBwYXJhbSB7SGVhZGluZ1BpdGNoUm9sbH0gaGVhZGluZ1BpdGNoUm9sbCBjYW1lcmEgb3JpZW50YXRpb25cbiAqL1xuZnVuY3Rpb24gS21sQ2FtZXJhKHBvc2l0aW9uLCBoZWFkaW5nUGl0Y2hSb2xsKSB7XG4gIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgdGhpcy5oZWFkaW5nUGl0Y2hSb2xsID0gaGVhZGluZ1BpdGNoUm9sbDtcbn1cbmV4cG9ydCBkZWZhdWx0IEttbENhbWVyYTtcbiIsIi8qKlxuICogQGFsaWFzIEttbExvb2tBdFxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBwb3NpdGlvbiBjYW1lcmEgcG9zaXRpb25cbiAqIEBwYXJhbSB7SGVhZGluZ1BpdGNoUmFuZ2V9IGhlYWRpbmdQaXRjaFJhbmdlIGNhbWVyYSBvcmllbnRhdGlvblxuICovXG5mdW5jdGlvbiBLbWxMb29rQXQocG9zaXRpb24sIGhlYWRpbmdQaXRjaFJhbmdlKSB7XG4gIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgdGhpcy5oZWFkaW5nUGl0Y2hSYW5nZSA9IGhlYWRpbmdQaXRjaFJhbmdlO1xufVxuZXhwb3J0IGRlZmF1bHQgS21sTG9va0F0O1xuIiwiaW1wb3J0IEFyY1R5cGUgZnJvbSBcIi4uL0NvcmUvQXJjVHlwZS5qc1wiO1xuaW1wb3J0IEFzc29jaWF0aXZlQXJyYXkgZnJvbSBcIi4uL0NvcmUvQXNzb2NpYXRpdmVBcnJheS5qc1wiO1xuaW1wb3J0IEJvdW5kaW5nUmVjdGFuZ2xlIGZyb20gXCIuLi9Db3JlL0JvdW5kaW5nUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCIuLi9Db3JlL0NhcnRvZ3JhcGhpYy5qc1wiO1xuaW1wb3J0IENsb2NrUmFuZ2UgZnJvbSBcIi4uL0NvcmUvQ2xvY2tSYW5nZS5qc1wiO1xuaW1wb3J0IENsb2NrU3RlcCBmcm9tIFwiLi4vQ29yZS9DbG9ja1N0ZXAuanNcIjtcbmltcG9ydCBjbG9uZSBmcm9tIFwiLi4vQ29yZS9jbG9uZS5qc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9Db3JlL0NvbG9yLmpzXCI7XG5pbXBvcnQgY3JlYXRlR3VpZCBmcm9tIFwiLi4vQ29yZS9jcmVhdGVHdWlkLmpzXCI7XG5pbXBvcnQgQ3JlZGl0IGZyb20gXCIuLi9Db3JlL0NyZWRpdC5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZCBmcm9tIFwiLi4vQ29yZS9FbGxpcHNvaWQuanNcIjtcbmltcG9ydCBFdmVudCBmcm9tIFwiLi4vQ29yZS9FdmVudC5qc1wiO1xuaW1wb3J0IGdldEV4dGVuc2lvbkZyb21VcmkgZnJvbSBcIi4uL0NvcmUvZ2V0RXh0ZW5zaW9uRnJvbVVyaS5qc1wiO1xuaW1wb3J0IGdldEZpbGVuYW1lRnJvbVVyaSBmcm9tIFwiLi4vQ29yZS9nZXRGaWxlbmFtZUZyb21VcmkuanNcIjtcbmltcG9ydCBnZXRUaW1lc3RhbXAgZnJvbSBcIi4uL0NvcmUvZ2V0VGltZXN0YW1wLmpzXCI7XG5pbXBvcnQgSGVhZGluZ1BpdGNoUmFuZ2UgZnJvbSBcIi4uL0NvcmUvSGVhZGluZ1BpdGNoUmFuZ2UuanNcIjtcbmltcG9ydCBIZWFkaW5nUGl0Y2hSb2xsIGZyb20gXCIuLi9Db3JlL0hlYWRpbmdQaXRjaFJvbGwuanNcIjtcbmltcG9ydCBJc284NjAxIGZyb20gXCIuLi9Db3JlL0lzbzg2MDEuanNcIjtcbmltcG9ydCBKdWxpYW5EYXRlIGZyb20gXCIuLi9Db3JlL0p1bGlhbkRhdGUuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBOZWFyRmFyU2NhbGFyIGZyb20gXCIuLi9Db3JlL05lYXJGYXJTY2FsYXIuanNcIjtcbmltcG9ydCBvYmplY3RUb1F1ZXJ5IGZyb20gXCIuLi9Db3JlL29iamVjdFRvUXVlcnkuanNcIjtcbmltcG9ydCBvbmVUaW1lV2FybmluZyBmcm9tIFwiLi4vQ29yZS9vbmVUaW1lV2FybmluZy5qc1wiO1xuaW1wb3J0IFBpbkJ1aWxkZXIgZnJvbSBcIi4uL0NvcmUvUGluQnVpbGRlci5qc1wiO1xuaW1wb3J0IFBvbHlnb25IaWVyYXJjaHkgZnJvbSBcIi4uL0NvcmUvUG9seWdvbkhpZXJhcmNoeS5qc1wiO1xuaW1wb3J0IHF1ZXJ5VG9PYmplY3QgZnJvbSBcIi4uL0NvcmUvcXVlcnlUb09iamVjdC5qc1wiO1xuaW1wb3J0IFJlY3RhbmdsZSBmcm9tIFwiLi4vQ29yZS9SZWN0YW5nbGUuanNcIjtcbmltcG9ydCBSZXNvdXJjZSBmcm9tIFwiLi4vQ29yZS9SZXNvdXJjZS5qc1wiO1xuaW1wb3J0IFJ1bnRpbWVFcnJvciBmcm9tIFwiLi4vQ29yZS9SdW50aW1lRXJyb3IuanNcIjtcbmltcG9ydCBUaW1lSW50ZXJ2YWwgZnJvbSBcIi4uL0NvcmUvVGltZUludGVydmFsLmpzXCI7XG5pbXBvcnQgVGltZUludGVydmFsQ29sbGVjdGlvbiBmcm9tIFwiLi4vQ29yZS9UaW1lSW50ZXJ2YWxDb2xsZWN0aW9uLmpzXCI7XG5pbXBvcnQgSGVpZ2h0UmVmZXJlbmNlIGZyb20gXCIuLi9TY2VuZS9IZWlnaHRSZWZlcmVuY2UuanNcIjtcbmltcG9ydCBIb3Jpem9udGFsT3JpZ2luIGZyb20gXCIuLi9TY2VuZS9Ib3Jpem9udGFsT3JpZ2luLmpzXCI7XG5pbXBvcnQgTGFiZWxTdHlsZSBmcm9tIFwiLi4vU2NlbmUvTGFiZWxTdHlsZS5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi4vU2NlbmUvU2NlbmVNb2RlLmpzXCI7XG5pbXBvcnQgQXV0b2xpbmtlciBmcm9tIFwiLi4vVGhpcmRQYXJ0eS9BdXRvbGlua2VyLmpzXCI7XG5pbXBvcnQgVXJpIGZyb20gXCIuLi9UaGlyZFBhcnR5L1VyaS5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuaW1wb3J0IHppcCBmcm9tIFwiLi4vVGhpcmRQYXJ0eS96aXAuanNcIjtcbmltcG9ydCBCaWxsYm9hcmRHcmFwaGljcyBmcm9tIFwiLi9CaWxsYm9hcmRHcmFwaGljcy5qc1wiO1xuaW1wb3J0IENvbXBvc2l0ZVBvc2l0aW9uUHJvcGVydHkgZnJvbSBcIi4vQ29tcG9zaXRlUG9zaXRpb25Qcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IERhdGFTb3VyY2UgZnJvbSBcIi4vRGF0YVNvdXJjZS5qc1wiO1xuaW1wb3J0IERhdGFTb3VyY2VDbG9jayBmcm9tIFwiLi9EYXRhU291cmNlQ2xvY2suanNcIjtcbmltcG9ydCBFbnRpdHkgZnJvbSBcIi4vRW50aXR5LmpzXCI7XG5pbXBvcnQgRW50aXR5Q2x1c3RlciBmcm9tIFwiLi9FbnRpdHlDbHVzdGVyLmpzXCI7XG5pbXBvcnQgRW50aXR5Q29sbGVjdGlvbiBmcm9tIFwiLi9FbnRpdHlDb2xsZWN0aW9uLmpzXCI7XG5pbXBvcnQgS21sQ2FtZXJhIGZyb20gXCIuL0ttbENhbWVyYS5qc1wiO1xuaW1wb3J0IEttbExvb2tBdCBmcm9tIFwiLi9LbWxMb29rQXQuanNcIjtcbmltcG9ydCBLbWxUb3VyIGZyb20gXCIuL0ttbFRvdXIuanNcIjtcbmltcG9ydCBLbWxUb3VyRmx5VG8gZnJvbSBcIi4vS21sVG91ckZseVRvLmpzXCI7XG5pbXBvcnQgS21sVG91cldhaXQgZnJvbSBcIi4vS21sVG91cldhaXQuanNcIjtcbmltcG9ydCBMYWJlbEdyYXBoaWNzIGZyb20gXCIuL0xhYmVsR3JhcGhpY3MuanNcIjtcbmltcG9ydCBQYXRoR3JhcGhpY3MgZnJvbSBcIi4vUGF0aEdyYXBoaWNzLmpzXCI7XG5pbXBvcnQgUG9seWdvbkdyYXBoaWNzIGZyb20gXCIuL1BvbHlnb25HcmFwaGljcy5qc1wiO1xuaW1wb3J0IFBvbHlsaW5lR3JhcGhpY3MgZnJvbSBcIi4vUG9seWxpbmVHcmFwaGljcy5qc1wiO1xuaW1wb3J0IFBvc2l0aW9uUHJvcGVydHlBcnJheSBmcm9tIFwiLi9Qb3NpdGlvblByb3BlcnR5QXJyYXkuanNcIjtcbmltcG9ydCBSZWN0YW5nbGVHcmFwaGljcyBmcm9tIFwiLi9SZWN0YW5nbGVHcmFwaGljcy5qc1wiO1xuaW1wb3J0IFJlZmVyZW5jZVByb3BlcnR5IGZyb20gXCIuL1JlZmVyZW5jZVByb3BlcnR5LmpzXCI7XG5pbXBvcnQgU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkgZnJvbSBcIi4vU2FtcGxlZFBvc2l0aW9uUHJvcGVydHkuanNcIjtcbmltcG9ydCBTY2FsZWRQb3NpdGlvblByb3BlcnR5IGZyb20gXCIuL1NjYWxlZFBvc2l0aW9uUHJvcGVydHkuanNcIjtcbmltcG9ydCBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUHJvcGVydHkgZnJvbSBcIi4vVGltZUludGVydmFsQ29sbGVjdGlvblByb3BlcnR5LmpzXCI7XG5pbXBvcnQgV2FsbEdyYXBoaWNzIGZyb20gXCIuL1dhbGxHcmFwaGljcy5qc1wiO1xuXG4vL1RoaXMgaXMgYnkgbm8gbWVhbnMgYW4gZXhoYXVzdGl2ZSBsaXN0IG9mIE1JTUUgdHlwZXMuXG4vL1RoZSBwdXJwb3NlIG9mIHRoaXMgbGlzdCBpcyB0byBiZSBhYmxlIHRvIGFjY3VyYXRlbHkgaWRlbnRpZnkgY29udGVudCBlbWJlZGRlZFxuLy9pbiBLTVogZmlsZXMuIEV2ZW50dWFsbHksIHdlIGNhbiBtYWtlIHRoaXMgY29uZmlndXJhYmxlIGJ5IHRoZSBlbmQgdXNlciBzbyB0aGV5IGNhbiBhZGRcbi8vdGhlcmUgb3duIGNvbnRlbnQgdHlwZXMgaWYgdGhleSBoYXZlIEtNWiBmaWxlcyB0aGF0IHJlcXVpcmUgaXQuXG52YXIgTWltZVR5cGVzID0ge1xuICBhdmk6IFwidmlkZW8veC1tc3ZpZGVvXCIsXG4gIGJtcDogXCJpbWFnZS9ibXBcIixcbiAgYnoyOiBcImFwcGxpY2F0aW9uL3gtYnppcDJcIixcbiAgY2htOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1odG1saGVscFwiLFxuICBjc3M6IFwidGV4dC9jc3NcIixcbiAgY3N2OiBcInRleHQvY3N2XCIsXG4gIGRvYzogXCJhcHBsaWNhdGlvbi9tc3dvcmRcIixcbiAgZHZpOiBcImFwcGxpY2F0aW9uL3gtZHZpXCIsXG4gIGVwczogXCJhcHBsaWNhdGlvbi9wb3N0c2NyaXB0XCIsXG4gIGZsdjogXCJ2aWRlby94LWZsdlwiLFxuICBnaWY6IFwiaW1hZ2UvZ2lmXCIsXG4gIGd6OiBcImFwcGxpY2F0aW9uL3gtZ3ppcFwiLFxuICBodG06IFwidGV4dC9odG1sXCIsXG4gIGh0bWw6IFwidGV4dC9odG1sXCIsXG4gIGljbzogXCJpbWFnZS92bmQubWljcm9zb2Z0Lmljb25cIixcbiAgam5scDogXCJhcHBsaWNhdGlvbi94LWphdmEtam5scC1maWxlXCIsXG4gIGpwZWc6IFwiaW1hZ2UvanBlZ1wiLFxuICBqcGc6IFwiaW1hZ2UvanBlZ1wiLFxuICBtM3U6IFwiYXVkaW8veC1tcGVndXJsXCIsXG4gIG00djogXCJ2aWRlby9tcDRcIixcbiAgbWF0aG1sOiBcImFwcGxpY2F0aW9uL21hdGhtbCt4bWxcIixcbiAgbWlkOiBcImF1ZGlvL21pZGlcIixcbiAgbWlkaTogXCJhdWRpby9taWRpXCIsXG4gIG1vdjogXCJ2aWRlby9xdWlja3RpbWVcIixcbiAgbXAzOiBcImF1ZGlvL21wZWdcIixcbiAgbXA0OiBcInZpZGVvL21wNFwiLFxuICBtcDR2OiBcInZpZGVvL21wNFwiLFxuICBtcGVnOiBcInZpZGVvL21wZWdcIixcbiAgbXBnOiBcInZpZGVvL21wZWdcIixcbiAgb2RwOiBcImFwcGxpY2F0aW9uL3ZuZC5vYXNpcy5vcGVuZG9jdW1lbnQucHJlc2VudGF0aW9uXCIsXG4gIG9kczogXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnNwcmVhZHNoZWV0XCIsXG4gIG9kdDogXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnRleHRcIixcbiAgb2dnOiBcImFwcGxpY2F0aW9uL29nZ1wiLFxuICBwZGY6IFwiYXBwbGljYXRpb24vcGRmXCIsXG4gIHBuZzogXCJpbWFnZS9wbmdcIixcbiAgcHBzOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50XCIsXG4gIHBwdDogXCJhcHBsaWNhdGlvbi92bmQubXMtcG93ZXJwb2ludFwiLFxuICBwczogXCJhcHBsaWNhdGlvbi9wb3N0c2NyaXB0XCIsXG4gIHF0OiBcInZpZGVvL3F1aWNrdGltZVwiLFxuICByZGY6IFwiYXBwbGljYXRpb24vcmRmK3htbFwiLFxuICByc3M6IFwiYXBwbGljYXRpb24vcnNzK3htbFwiLFxuICBydGY6IFwiYXBwbGljYXRpb24vcnRmXCIsXG4gIHN2ZzogXCJpbWFnZS9zdmcreG1sXCIsXG4gIHN3ZjogXCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiLFxuICB0ZXh0OiBcInRleHQvcGxhaW5cIixcbiAgdGlmOiBcImltYWdlL3RpZmZcIixcbiAgdGlmZjogXCJpbWFnZS90aWZmXCIsXG4gIHR4dDogXCJ0ZXh0L3BsYWluXCIsXG4gIHdhdjogXCJhdWRpby94LXdhdlwiLFxuICB3bWE6IFwiYXVkaW8veC1tcy13bWFcIixcbiAgd212OiBcInZpZGVvL3gtbXMtd212XCIsXG4gIHhtbDogXCJhcHBsaWNhdGlvbi94bWxcIixcbiAgemlwOiBcImFwcGxpY2F0aW9uL3ppcFwiLFxuXG4gIGRldGVjdEZyb21GaWxlbmFtZTogZnVuY3Rpb24gKGZpbGVuYW1lKSB7XG4gICAgdmFyIGV4dCA9IGZpbGVuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgZXh0ID0gZ2V0RXh0ZW5zaW9uRnJvbVVyaShleHQpO1xuICAgIHJldHVybiBNaW1lVHlwZXNbZXh0XTtcbiAgfSxcbn07XG5cbnZhciBwYXJzZXI7XG5pZiAodHlwZW9mIERPTVBhcnNlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG59XG5cbnZhciBhdXRvbGlua2VyID0gbmV3IEF1dG9saW5rZXIoe1xuICBzdHJpcFByZWZpeDogZmFsc2UsXG4gIGVtYWlsOiBmYWxzZSxcbiAgcmVwbGFjZUZuOiBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICBpZiAoIW1hdGNoLnByb3RvY29sVXJsTWF0Y2gpIHtcbiAgICAgIC8vUHJldmVudCBtYXRjaGluZyBvZiBub24tZXhwbGljaXQgdXJscy5cbiAgICAgIC8vaS5lLiBmb28uaWQgd29uJ3QgbWF0Y2ggYnV0IGh0dHA6Ly9mb28uaWQgd2lsbFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcbn0pO1xuXG52YXIgQklMTEJPQVJEX1NJWkUgPSAzMjtcblxudmFyIEJJTExCT0FSRF9ORUFSX0RJU1RBTkNFID0gMjQxNDAxNjtcbnZhciBCSUxMQk9BUkRfTkVBUl9SQVRJTyA9IDEuMDtcbnZhciBCSUxMQk9BUkRfRkFSX0RJU1RBTkNFID0gMS42MDkzZTc7XG52YXIgQklMTEJPQVJEX0ZBUl9SQVRJTyA9IDAuMTtcblxudmFyIGttbE5hbWVzcGFjZXMgPSBbXG4gIG51bGwsXG4gIHVuZGVmaW5lZCxcbiAgXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2ttbC8yLjJcIixcbiAgXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4yXCIsXG4gIFwiaHR0cDovL2VhcnRoLmdvb2dsZS5jb20va21sLzIuMVwiLFxuICBcImh0dHA6Ly9lYXJ0aC5nb29nbGUuY29tL2ttbC8yLjBcIixcbl07XG52YXIgZ3hOYW1lc3BhY2VzID0gW1wiaHR0cDovL3d3dy5nb29nbGUuY29tL2ttbC9leHQvMi4yXCJdO1xudmFyIGF0b21OYW1lc3BhY2VzID0gW1wiaHR0cDovL3d3dy53My5vcmcvMjAwNS9BdG9tXCJdO1xudmFyIG5hbWVzcGFjZXMgPSB7XG4gIGttbDoga21sTmFtZXNwYWNlcyxcbiAgZ3g6IGd4TmFtZXNwYWNlcyxcbiAgYXRvbTogYXRvbU5hbWVzcGFjZXMsXG4gIGttbGd4OiBrbWxOYW1lc3BhY2VzLmNvbmNhdChneE5hbWVzcGFjZXMpLFxufTtcblxuLy8gRW5zdXJlIFNwZWNzL0RhdGEvS01ML3Vuc3VwcG9ydGVkLmttbCBpcyBrZXB0IHVwIHRvIGRhdGUgd2l0aCB0aGVzZSBzdXBwb3J0ZWQgdHlwZXNcbnZhciBmZWF0dXJlVHlwZXMgPSB7XG4gIERvY3VtZW50OiBwcm9jZXNzRG9jdW1lbnQsXG4gIEZvbGRlcjogcHJvY2Vzc0ZvbGRlcixcbiAgUGxhY2VtYXJrOiBwcm9jZXNzUGxhY2VtYXJrLFxuICBOZXR3b3JrTGluazogcHJvY2Vzc05ldHdvcmtMaW5rLFxuICBHcm91bmRPdmVybGF5OiBwcm9jZXNzR3JvdW5kT3ZlcmxheSxcbiAgUGhvdG9PdmVybGF5OiBwcm9jZXNzVW5zdXBwb3J0ZWRGZWF0dXJlLFxuICBTY3JlZW5PdmVybGF5OiBwcm9jZXNzVW5zdXBwb3J0ZWRGZWF0dXJlLFxuICBUb3VyOiBwcm9jZXNzVG91cixcbn07XG5cbmZ1bmN0aW9uIERlZmVycmVkTG9hZGluZyhkYXRhU291cmNlKSB7XG4gIHRoaXMuX2RhdGFTb3VyY2UgPSBkYXRhU291cmNlO1xuICB0aGlzLl9kZWZlcnJlZCA9IHdoZW4uZGVmZXIoKTtcbiAgdGhpcy5fc3RhY2sgPSBbXTtcbiAgdGhpcy5fcHJvbWlzZXMgPSBbXTtcbiAgdGhpcy5fdGltZW91dFNldCA9IGZhbHNlO1xuICB0aGlzLl91c2VkID0gZmFsc2U7XG5cbiAgdGhpcy5fc3RhcnRlZCA9IDA7XG4gIHRoaXMuX3RpbWVUaHJlc2hvbGQgPSAxMDAwOyAvLyBJbml0aWFsIGxvYWQgaXMgMSBzZWNvbmRcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRGVmZXJyZWRMb2FkaW5nLnByb3RvdHlwZSwge1xuICBkYXRhU291cmNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGF0YVNvdXJjZTtcbiAgICB9LFxuICB9LFxufSk7XG5cbkRlZmVycmVkTG9hZGluZy5wcm90b3R5cGUuYWRkTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIHByb2Nlc3NpbmdEYXRhKSB7XG4gIHRoaXMuX3N0YWNrLnB1c2goe1xuICAgIG5vZGVzOiBub2RlcyxcbiAgICBpbmRleDogMCxcbiAgICBwcm9jZXNzaW5nRGF0YTogcHJvY2Vzc2luZ0RhdGEsXG4gIH0pO1xuICB0aGlzLl91c2VkID0gdHJ1ZTtcbn07XG5cbkRlZmVycmVkTG9hZGluZy5wcm90b3R5cGUuYWRkUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gIHRoaXMuX3Byb21pc2VzLnB1c2gocHJvbWlzZSk7XG59O1xuXG5EZWZlcnJlZExvYWRpbmcucHJvdG90eXBlLndhaXQgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIENhc2Ugd2hlcmUgd2UgaGFkIGEgbm9uLWRvY3VtZW50L2ZvbGRlciBhcyB0aGUgcm9vdFxuICB2YXIgZGVmZXJyZWQgPSB0aGlzLl9kZWZlcnJlZDtcbiAgaWYgKCF0aGlzLl91c2VkKSB7XG4gICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICB9XG5cbiAgcmV0dXJuIHdoZW4uam9pbihkZWZlcnJlZC5wcm9taXNlLCB3aGVuLmFsbCh0aGlzLl9wcm9taXNlcykpO1xufTtcblxuRGVmZXJyZWRMb2FkaW5nLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaXNGaXJzdENhbGwgPSB0aGlzLl9zdGFjay5sZW5ndGggPT09IDE7XG4gIGlmIChpc0ZpcnN0Q2FsbCkge1xuICAgIHRoaXMuX3N0YXJ0ZWQgPSBLbWxEYXRhU291cmNlLl9nZXRUaW1lc3RhbXAoKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9wcm9jZXNzKGlzRmlyc3RDYWxsKTtcbn07XG5cbkRlZmVycmVkTG9hZGluZy5wcm90b3R5cGUuX2dpdmVVcFRpbWUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl90aW1lb3V0U2V0KSB7XG4gICAgLy8gVGltZW91dCB3YXMgYWxyZWFkeSBzZXQgc28ganVzdCByZXR1cm5cbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLl90aW1lb3V0U2V0ID0gdHJ1ZTtcbiAgdGhpcy5fdGltZVRocmVzaG9sZCA9IDUwOyAvLyBBZnRlciB0aGUgZmlyc3QgbG9hZCBsb3dlciB0aHJlc2hvbGQgdG8gMC41IHNlY29uZHNcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB0aGF0Ll90aW1lb3V0U2V0ID0gZmFsc2U7XG4gICAgdGhhdC5fc3RhcnRlZCA9IEttbERhdGFTb3VyY2UuX2dldFRpbWVzdGFtcCgpO1xuICAgIHRoYXQuX3Byb2Nlc3ModHJ1ZSk7XG4gIH0sIDApO1xufTtcblxuRGVmZXJyZWRMb2FkaW5nLnByb3RvdHlwZS5fbmV4dE5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGFjayA9IHRoaXMuX3N0YWNrO1xuICB2YXIgdG9wID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gIHZhciBpbmRleCA9IHRvcC5pbmRleDtcbiAgdmFyIG5vZGVzID0gdG9wLm5vZGVzO1xuICBpZiAoaW5kZXggPT09IG5vZGVzLmxlbmd0aCkge1xuICAgIHJldHVybjtcbiAgfVxuICArK3RvcC5pbmRleDtcblxuICByZXR1cm4gbm9kZXNbaW5kZXhdO1xufTtcblxuRGVmZXJyZWRMb2FkaW5nLnByb3RvdHlwZS5fcG9wID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhY2sgPSB0aGlzLl9zdGFjaztcbiAgc3RhY2sucG9wKCk7XG5cbiAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlIGFyZSBkb25lXG4gIGlmIChzdGFjay5sZW5ndGggPT09IDApIHtcbiAgICB0aGlzLl9kZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5EZWZlcnJlZExvYWRpbmcucHJvdG90eXBlLl9wcm9jZXNzID0gZnVuY3Rpb24gKGlzRmlyc3RDYWxsKSB7XG4gIHZhciBkYXRhU291cmNlID0gdGhpcy5kYXRhU291cmNlO1xuICB2YXIgcHJvY2Vzc2luZ0RhdGEgPSB0aGlzLl9zdGFja1t0aGlzLl9zdGFjay5sZW5ndGggLSAxXS5wcm9jZXNzaW5nRGF0YTtcblxuICB2YXIgY2hpbGQgPSB0aGlzLl9uZXh0Tm9kZSgpO1xuICB3aGlsZSAoZGVmaW5lZChjaGlsZCkpIHtcbiAgICB2YXIgZmVhdHVyZVByb2Nlc3NvciA9IGZlYXR1cmVUeXBlc1tjaGlsZC5sb2NhbE5hbWVdO1xuICAgIGlmIChcbiAgICAgIGRlZmluZWQoZmVhdHVyZVByb2Nlc3NvcikgJiZcbiAgICAgIChuYW1lc3BhY2VzLmttbC5pbmRleE9mKGNoaWxkLm5hbWVzcGFjZVVSSSkgIT09IC0xIHx8XG4gICAgICAgIG5hbWVzcGFjZXMuZ3guaW5kZXhPZihjaGlsZC5uYW1lc3BhY2VVUkkpICE9PSAtMSlcbiAgICApIHtcbiAgICAgIGZlYXR1cmVQcm9jZXNzb3IoZGF0YVNvdXJjZSwgY2hpbGQsIHByb2Nlc3NpbmdEYXRhLCB0aGlzKTtcblxuICAgICAgLy8gR2l2ZSB1cCB0aW1lIGFuZCBjb250aW51ZSBsb2FkaW5nIGxhdGVyXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX3RpbWVvdXRTZXQgfHxcbiAgICAgICAgS21sRGF0YVNvdXJjZS5fZ2V0VGltZXN0YW1wKCkgPiB0aGlzLl9zdGFydGVkICsgdGhpcy5fdGltZVRocmVzaG9sZFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2dpdmVVcFRpbWUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNoaWxkID0gdGhpcy5fbmV4dE5vZGUoKTtcbiAgfVxuXG4gIC8vIElmIHdlIGFyZSBhIHJlY3Vyc2l2ZSBjYWxsIGZyb20gYSBzdWJmb2xkZXIsIGp1c3QgcmV0dXJuIHNvIHRoZSBwYXJlbnQgZm9sZGVyIGNhbiBjb250aW51ZSBwcm9jZXNzaW5nXG4gIC8vIElmIHdlIGFyZW4ndCB0aGVuIG1ha2UgYW5vdGhlciBjYWxsIHRvIHByb2Nlc3NOb2RlcyBiZWNhdXNlIHRoZXJlIGlzIHN0dWZmIHN0aWxsIGxlZnQgaW4gdGhlIHF1ZXVlXG4gIGlmICh0aGlzLl9wb3AoKSAmJiBpc0ZpcnN0Q2FsbCkge1xuICAgIHRoaXMuX3Byb2Nlc3ModHJ1ZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGlzWmlwRmlsZShibG9iKSB7XG4gIHZhciBtYWdpY0Jsb2IgPSBibG9iLnNsaWNlKDAsIE1hdGgubWluKDQsIGJsb2Iuc2l6ZSkpO1xuICB2YXIgZGVmZXJyZWQgPSB3aGVuLmRlZmVyKCk7XG4gIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGRlZmVycmVkLnJlc29sdmUoXG4gICAgICBuZXcgRGF0YVZpZXcocmVhZGVyLnJlc3VsdCkuZ2V0VWludDMyKDAsIGZhbHNlKSA9PT0gMHg1MDRiMDMwNFxuICAgICk7XG4gIH0pO1xuICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBkZWZlcnJlZC5yZWplY3QocmVhZGVyLmVycm9yKTtcbiAgfSk7XG4gIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihtYWdpY0Jsb2IpO1xuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICB2YXIgZGVmZXJyZWQgPSB3aGVuLmRlZmVyKCk7XG4gIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGRlZmVycmVkLnJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gIH0pO1xuICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBkZWZlcnJlZC5yZWplY3QocmVhZGVyLmVycm9yKTtcbiAgfSk7XG4gIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpO1xuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gaW5zZXJ0TmFtZXNwYWNlcyh0ZXh0KSB7XG4gIHZhciBuYW1lc3BhY2VNYXAgPSB7XG4gICAgeHNpOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCIsXG4gIH07XG4gIHZhciBmaXJzdFBhcnQsIGxhc3RQYXJ0LCByZWcsIGRlY2xhcmF0aW9uO1xuXG4gIGZvciAodmFyIGtleSBpbiBuYW1lc3BhY2VNYXApIHtcbiAgICBpZiAobmFtZXNwYWNlTWFwLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJlZyA9IFJlZ0V4cChcIls8IF1cIiArIGtleSArIFwiOlwiKTtcbiAgICAgIGRlY2xhcmF0aW9uID0gXCJ4bWxuczpcIiArIGtleSArIFwiPVwiO1xuICAgICAgaWYgKHJlZy50ZXN0KHRleHQpICYmIHRleHQuaW5kZXhPZihkZWNsYXJhdGlvbikgPT09IC0xKSB7XG4gICAgICAgIGlmICghZGVmaW5lZChmaXJzdFBhcnQpKSB7XG4gICAgICAgICAgZmlyc3RQYXJ0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKFwiPGttbFwiKSArIDQpO1xuICAgICAgICAgIGxhc3RQYXJ0ID0gdGV4dC5zdWJzdHIoZmlyc3RQYXJ0Lmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZmlyc3RQYXJ0ICs9IFwiIFwiICsgZGVjbGFyYXRpb24gKyAnXCInICsgbmFtZXNwYWNlTWFwW2tleV0gKyAnXCInO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkZWZpbmVkKGZpcnN0UGFydCkpIHtcbiAgICB0ZXh0ID0gZmlyc3RQYXJ0ICsgbGFzdFBhcnQ7XG4gIH1cblxuICByZXR1cm4gdGV4dDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlTmFtZXNwYWNlcyh0ZXh0KSB7XG4gIHZhciBpbmRleCA9IHRleHQuaW5kZXhPZihcInhtbG5zOlwiKTtcbiAgdmFyIGVuZERlY2xhcmF0aW9uID0gdGV4dC5pbmRleE9mKFwiPlwiLCBpbmRleCk7XG4gIHZhciBuYW1lc3BhY2UsIHN0YXJ0SW5kZXgsIGVuZEluZGV4O1xuXG4gIHdoaWxlIChpbmRleCAhPT0gLTEgJiYgaW5kZXggPCBlbmREZWNsYXJhdGlvbikge1xuICAgIG5hbWVzcGFjZSA9IHRleHQuc2xpY2UoaW5kZXgsIHRleHQuaW5kZXhPZignXCInLCBpbmRleCkpO1xuICAgIHN0YXJ0SW5kZXggPSBpbmRleDtcbiAgICBpbmRleCA9IHRleHQuaW5kZXhPZihuYW1lc3BhY2UsIGluZGV4ICsgMSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgZW5kSW5kZXggPSB0ZXh0LmluZGV4T2YoJ1wiJywgdGV4dC5pbmRleE9mKCdcIicsIGluZGV4KSArIDEpO1xuICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgaW5kZXggLSAxKSArIHRleHQuc2xpY2UoZW5kSW5kZXggKyAxLCB0ZXh0Lmxlbmd0aCk7XG4gICAgICBpbmRleCA9IHRleHQuaW5kZXhPZihcInhtbG5zOlwiLCBzdGFydEluZGV4IC0gMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluZGV4ID0gdGV4dC5pbmRleE9mKFwieG1sbnM6XCIsIHN0YXJ0SW5kZXggKyAxKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGV4dDtcbn1cblxuZnVuY3Rpb24gbG9hZFhtbEZyb21aaXAoZW50cnksIHVyaVJlc29sdmVyKSB7XG4gIHJldHVybiB3aGVuKGVudHJ5LmdldERhdGEobmV3IHppcC5UZXh0V3JpdGVyKCkpKS50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgdGV4dCA9IGluc2VydE5hbWVzcGFjZXModGV4dCk7XG4gICAgdGV4dCA9IHJlbW92ZUR1cGxpY2F0ZU5hbWVzcGFjZXModGV4dCk7XG4gICAgdXJpUmVzb2x2ZXIua21sID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0ZXh0LCBcImFwcGxpY2F0aW9uL3htbFwiKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWREYXRhVXJpRnJvbVppcChlbnRyeSwgdXJpUmVzb2x2ZXIpIHtcbiAgdmFyIG1pbWVUeXBlID0gZGVmYXVsdFZhbHVlKFxuICAgIE1pbWVUeXBlcy5kZXRlY3RGcm9tRmlsZW5hbWUoZW50cnkuZmlsZW5hbWUpLFxuICAgIFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJcbiAgKTtcbiAgcmV0dXJuIHdoZW4oZW50cnkuZ2V0RGF0YShuZXcgemlwLkRhdGE2NFVSSVdyaXRlcihtaW1lVHlwZSkpKS50aGVuKGZ1bmN0aW9uIChcbiAgICBkYXRhVXJpXG4gICkge1xuICAgIHVyaVJlc29sdmVyW2VudHJ5LmZpbGVuYW1lXSA9IGRhdGFVcmk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbWJlZERhdGFVcmlzKGRpdiwgZWxlbWVudFR5cGUsIGF0dHJpYnV0ZU5hbWUsIHVyaVJlc29sdmVyKSB7XG4gIHZhciBrZXlzID0gdXJpUmVzb2x2ZXIua2V5cztcbiAgdmFyIGJhc2VVcmkgPSBuZXcgVXJpKFwiLlwiKTtcbiAgdmFyIGVsZW1lbnRzID0gZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudFR5cGUpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICB2YXIgdmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICB2YXIgcmVsYXRpdmVVcmkgPSBuZXcgVXJpKHZhbHVlKTtcbiAgICB2YXIgdXJpID0gcmVsYXRpdmVVcmkuYWJzb2x1dGVUbyhiYXNlVXJpKS50b1N0cmluZygpO1xuICAgIHZhciBpbmRleCA9IGtleXMuaW5kZXhPZih1cmkpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIHVyaVJlc29sdmVyW2tleV0pO1xuICAgICAgaWYgKGVsZW1lbnRUeXBlID09PSBcImFcIiAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRvd25sb2FkXCIpID09PSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwga2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlCYXNlUGF0aChkaXYsIGVsZW1lbnRUeXBlLCBhdHRyaWJ1dGVOYW1lLCBzb3VyY2VSZXNvdXJjZSkge1xuICB2YXIgZWxlbWVudHMgPSBkaXYucXVlcnlTZWxlY3RvckFsbChlbGVtZW50VHlwZSk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgIHZhciByZXNvdXJjZSA9IHJlc29sdmVIcmVmKHZhbHVlLCBzb3VyY2VSZXNvdXJjZSk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgcmVzb3VyY2UudXJsKTtcbiAgfVxufVxuXG4vLyBhbiBvcHRpb25hbCBjb250ZXh0IGlzIHBhc3NlZCB0byBhbGxvdyBmb3Igc29tZSBtYWxmb3JtZWQga21scyAodGhvc2Ugd2l0aCBtdWx0aXBsZSBnZW9tZXRyaWVzIHdpdGggc2FtZSBpZHMpIHRvIHN0aWxsIHBhcnNlXG4vLyBjb3JyZWN0bHksIGFzIHRoZXkgZG8gaW4gR29vZ2xlIEVhcnRoLlxuZnVuY3Rpb24gY3JlYXRlRW50aXR5KG5vZGUsIGVudGl0eUNvbGxlY3Rpb24sIGNvbnRleHQpIHtcbiAgdmFyIGlkID0gcXVlcnlTdHJpbmdBdHRyaWJ1dGUobm9kZSwgXCJpZFwiKTtcbiAgaWQgPSBkZWZpbmVkKGlkKSAmJiBpZC5sZW5ndGggIT09IDAgPyBpZCA6IGNyZWF0ZUd1aWQoKTtcbiAgaWYgKGRlZmluZWQoY29udGV4dCkpIHtcbiAgICBpZCA9IGNvbnRleHQgKyBpZDtcbiAgfVxuXG4gIC8vIElmIHdlIGhhdmUgYSBkdXBsaWNhdGUgSUQganVzdCBnZW5lcmF0ZSBvbmUuXG4gIC8vIFRoaXMgaXNuJ3QgdmFsaWQgS01MIGJ1dCBHb29nbGUgRWFydGggaGFuZGxlcyB0aGlzIGNhc2UuXG4gIHZhciBlbnRpdHkgPSBlbnRpdHlDb2xsZWN0aW9uLmdldEJ5SWQoaWQpO1xuICBpZiAoZGVmaW5lZChlbnRpdHkpKSB7XG4gICAgaWQgPSBjcmVhdGVHdWlkKCk7XG4gICAgaWYgKGRlZmluZWQoY29udGV4dCkpIHtcbiAgICAgIGlkID0gY29udGV4dCArIGlkO1xuICAgIH1cbiAgfVxuXG4gIGVudGl0eSA9IGVudGl0eUNvbGxlY3Rpb24uYWRkKG5ldyBFbnRpdHkoeyBpZDogaWQgfSkpO1xuICBpZiAoIWRlZmluZWQoZW50aXR5LmttbCkpIHtcbiAgICBlbnRpdHkuYWRkUHJvcGVydHkoXCJrbWxcIik7XG4gICAgZW50aXR5LmttbCA9IG5ldyBLbWxGZWF0dXJlRGF0YSgpO1xuICB9XG4gIHJldHVybiBlbnRpdHk7XG59XG5cbmZ1bmN0aW9uIGlzRXh0cnVkYWJsZShhbHRpdHVkZU1vZGUsIGd4QWx0aXR1ZGVNb2RlKSB7XG4gIHJldHVybiAoXG4gICAgYWx0aXR1ZGVNb2RlID09PSBcImFic29sdXRlXCIgfHxcbiAgICBhbHRpdHVkZU1vZGUgPT09IFwicmVsYXRpdmVUb0dyb3VuZFwiIHx8XG4gICAgZ3hBbHRpdHVkZU1vZGUgPT09IFwicmVsYXRpdmVUb1NlYUZsb29yXCJcbiAgKTtcbn1cblxuZnVuY3Rpb24gcmVhZENvb3JkaW5hdGUodmFsdWUsIGVsbGlwc29pZCkge1xuICAvL0dvb2dsZSBFYXJ0aCB0cmVhdHMgZW1wdHkgb3IgbWlzc2luZyBjb29yZGluYXRlcyBhcyAwLlxuICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIENhcnRlc2lhbjMuZnJvbURlZ3JlZXMoMCwgMCwgMCwgZWxsaXBzb2lkKTtcbiAgfVxuXG4gIHZhciBkaWdpdHMgPSB2YWx1ZS5tYXRjaCgvW15cXHMsXFxuXSsvZyk7XG4gIGlmICghZGVmaW5lZChkaWdpdHMpKSB7XG4gICAgcmV0dXJuIENhcnRlc2lhbjMuZnJvbURlZ3JlZXMoMCwgMCwgMCwgZWxsaXBzb2lkKTtcbiAgfVxuXG4gIHZhciBsb25naXR1ZGUgPSBwYXJzZUZsb2F0KGRpZ2l0c1swXSk7XG4gIHZhciBsYXRpdHVkZSA9IHBhcnNlRmxvYXQoZGlnaXRzWzFdKTtcbiAgdmFyIGhlaWdodCA9IHBhcnNlRmxvYXQoZGlnaXRzWzJdKTtcblxuICBsb25naXR1ZGUgPSBpc05hTihsb25naXR1ZGUpID8gMC4wIDogbG9uZ2l0dWRlO1xuICBsYXRpdHVkZSA9IGlzTmFOKGxhdGl0dWRlKSA/IDAuMCA6IGxhdGl0dWRlO1xuICBoZWlnaHQgPSBpc05hTihoZWlnaHQpID8gMC4wIDogaGVpZ2h0O1xuXG4gIHJldHVybiBDYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKGxvbmdpdHVkZSwgbGF0aXR1ZGUsIGhlaWdodCwgZWxsaXBzb2lkKTtcbn1cblxuZnVuY3Rpb24gcmVhZENvb3JkaW5hdGVzKGVsZW1lbnQsIGVsbGlwc29pZCkge1xuICBpZiAoIWRlZmluZWQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIHR1cGxlcyA9IGVsZW1lbnQudGV4dENvbnRlbnQubWF0Y2goL1teXFxzXFxuXSsvZyk7XG4gIGlmICghZGVmaW5lZCh0dXBsZXMpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBsZW5ndGggPSB0dXBsZXMubGVuZ3RoO1xuICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gIHZhciByZXN1bHRJbmRleCA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICByZXN1bHRbcmVzdWx0SW5kZXgrK10gPSByZWFkQ29vcmRpbmF0ZSh0dXBsZXNbaV0sIGVsbGlwc29pZCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcXVlcnlOdW1lcmljQXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgaWYgKCFkZWZpbmVkKG5vZGUpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciB2YWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICB2YXIgcmVzdWx0ID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgcmV0dXJuICFpc05hTihyZXN1bHQpID8gcmVzdWx0IDogdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5U3RyaW5nQXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZU5hbWUpIHtcbiAgaWYgKCFkZWZpbmVkKG5vZGUpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgdmFsdWUgPSBub2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5Rmlyc3ROb2RlKG5vZGUsIHRhZ05hbWUsIG5hbWVzcGFjZSkge1xuICBpZiAoIWRlZmluZWQobm9kZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHZhciBjaGlsZE5vZGVzID0gbm9kZS5jaGlsZE5vZGVzO1xuICB2YXIgbGVuZ3RoID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gIGZvciAodmFyIHEgPSAwOyBxIDwgbGVuZ3RoOyBxKyspIHtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZE5vZGVzW3FdO1xuICAgIGlmIChcbiAgICAgIGNoaWxkLmxvY2FsTmFtZSA9PT0gdGFnTmFtZSAmJlxuICAgICAgbmFtZXNwYWNlLmluZGV4T2YoY2hpbGQubmFtZXNwYWNlVVJJKSAhPT0gLTFcbiAgICApIHtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gcXVlcnlOb2Rlcyhub2RlLCB0YWdOYW1lLCBuYW1lc3BhY2UpIHtcbiAgaWYgKCFkZWZpbmVkKG5vZGUpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBjaGlsZE5vZGVzID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKFwiKlwiLCB0YWdOYW1lKTtcbiAgdmFyIGxlbmd0aCA9IGNoaWxkTm9kZXMubGVuZ3RoO1xuICBmb3IgKHZhciBxID0gMDsgcSA8IGxlbmd0aDsgcSsrKSB7XG4gICAgdmFyIGNoaWxkID0gY2hpbGROb2Rlc1txXTtcbiAgICBpZiAoXG4gICAgICBjaGlsZC5sb2NhbE5hbWUgPT09IHRhZ05hbWUgJiZcbiAgICAgIG5hbWVzcGFjZS5pbmRleE9mKGNoaWxkLm5hbWVzcGFjZVVSSSkgIT09IC0xXG4gICAgKSB7XG4gICAgICByZXN1bHQucHVzaChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5Q2hpbGROb2Rlcyhub2RlLCB0YWdOYW1lLCBuYW1lc3BhY2UpIHtcbiAgaWYgKCFkZWZpbmVkKG5vZGUpKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdmFyIGNoaWxkTm9kZXMgPSBub2RlLmNoaWxkTm9kZXM7XG4gIHZhciBsZW5ndGggPSBjaGlsZE5vZGVzLmxlbmd0aDtcbiAgZm9yICh2YXIgcSA9IDA7IHEgPCBsZW5ndGg7IHErKykge1xuICAgIHZhciBjaGlsZCA9IGNoaWxkTm9kZXNbcV07XG4gICAgaWYgKFxuICAgICAgY2hpbGQubG9jYWxOYW1lID09PSB0YWdOYW1lICYmXG4gICAgICBuYW1lc3BhY2UuaW5kZXhPZihjaGlsZC5uYW1lc3BhY2VVUkkpICE9PSAtMVxuICAgICkge1xuICAgICAgcmVzdWx0LnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBxdWVyeU51bWVyaWNWYWx1ZShub2RlLCB0YWdOYW1lLCBuYW1lc3BhY2UpIHtcbiAgdmFyIHJlc3VsdE5vZGUgPSBxdWVyeUZpcnN0Tm9kZShub2RlLCB0YWdOYW1lLCBuYW1lc3BhY2UpO1xuICBpZiAoZGVmaW5lZChyZXN1bHROb2RlKSkge1xuICAgIHZhciByZXN1bHQgPSBwYXJzZUZsb2F0KHJlc3VsdE5vZGUudGV4dENvbnRlbnQpO1xuICAgIHJldHVybiAhaXNOYU4ocmVzdWx0KSA/IHJlc3VsdCA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBxdWVyeVN0cmluZ1ZhbHVlKG5vZGUsIHRhZ05hbWUsIG5hbWVzcGFjZSkge1xuICB2YXIgcmVzdWx0ID0gcXVlcnlGaXJzdE5vZGUobm9kZSwgdGFnTmFtZSwgbmFtZXNwYWNlKTtcbiAgaWYgKGRlZmluZWQocmVzdWx0KSkge1xuICAgIHJldHVybiByZXN1bHQudGV4dENvbnRlbnQudHJpbSgpO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5Qm9vbGVhblZhbHVlKG5vZGUsIHRhZ05hbWUsIG5hbWVzcGFjZSkge1xuICB2YXIgcmVzdWx0ID0gcXVlcnlGaXJzdE5vZGUobm9kZSwgdGFnTmFtZSwgbmFtZXNwYWNlKTtcbiAgaWYgKGRlZmluZWQocmVzdWx0KSkge1xuICAgIHZhciB2YWx1ZSA9IHJlc3VsdC50ZXh0Q29udGVudC50cmltKCk7XG4gICAgcmV0dXJuIHZhbHVlID09PSBcIjFcIiB8fCAvXnRydWUkL2kudGVzdCh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUhyZWYoaHJlZiwgc291cmNlUmVzb3VyY2UsIHVyaVJlc29sdmVyKSB7XG4gIGlmICghZGVmaW5lZChocmVmKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgcmVzb3VyY2U7XG4gIGlmIChkZWZpbmVkKHVyaVJlc29sdmVyKSkge1xuICAgIC8vIFRvIHJlc29sdmUgaXNzdWVzIHdpdGggS01MIHNvdXJjZXMgZGVmaW5lZCBpbiBXaW5kb3dzIHN0eWxlIHBhdGhzLlxuICAgIGhyZWYgPSBocmVmLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpO1xuICAgIHZhciBibG9iID0gdXJpUmVzb2x2ZXJbaHJlZl07XG4gICAgaWYgKGRlZmluZWQoYmxvYikpIHtcbiAgICAgIHJlc291cmNlID0gbmV3IFJlc291cmNlKHtcbiAgICAgICAgdXJsOiBibG9iLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5lZWRlZCBmb3IgbXVsdGlwbGUgbGV2ZWxzIG9mIEtNTCBmaWxlcyBpbiBhIEtNWlxuICAgICAgdmFyIGJhc2VVcmkgPSBuZXcgVXJpKHNvdXJjZVJlc291cmNlLmdldFVybENvbXBvbmVudCgpKTtcbiAgICAgIHZhciB1cmkgPSBuZXcgVXJpKGhyZWYpO1xuICAgICAgYmxvYiA9IHVyaVJlc29sdmVyW3VyaS5hYnNvbHV0ZVRvKGJhc2VVcmkpXTtcbiAgICAgIGlmIChkZWZpbmVkKGJsb2IpKSB7XG4gICAgICAgIHJlc291cmNlID0gbmV3IFJlc291cmNlKHtcbiAgICAgICAgICB1cmw6IGJsb2IsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICghZGVmaW5lZChyZXNvdXJjZSkpIHtcbiAgICByZXNvdXJjZSA9IHNvdXJjZVJlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgICB1cmw6IGhyZWYsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzb3VyY2U7XG59XG5cbnZhciBjb2xvck9wdGlvbnMgPSB7XG4gIG1heGltdW1SZWQ6IHVuZGVmaW5lZCxcbiAgcmVkOiB1bmRlZmluZWQsXG4gIG1heGltdW1HcmVlbjogdW5kZWZpbmVkLFxuICBncmVlbjogdW5kZWZpbmVkLFxuICBtYXhpbXVtQmx1ZTogdW5kZWZpbmVkLFxuICBibHVlOiB1bmRlZmluZWQsXG59O1xuXG5mdW5jdGlvbiBwYXJzZUNvbG9yU3RyaW5nKHZhbHVlLCBpc1JhbmRvbSkge1xuICBpZiAoIWRlZmluZWQodmFsdWUpIHx8IC9eXFxzKiQvZ20udGVzdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHZhbHVlWzBdID09PSBcIiNcIikge1xuICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICB9XG5cbiAgdmFyIGFscGhhID0gcGFyc2VJbnQodmFsdWUuc3Vic3RyaW5nKDAsIDIpLCAxNikgLyAyNTUuMDtcbiAgdmFyIGJsdWUgPSBwYXJzZUludCh2YWx1ZS5zdWJzdHJpbmcoMiwgNCksIDE2KSAvIDI1NS4wO1xuICB2YXIgZ3JlZW4gPSBwYXJzZUludCh2YWx1ZS5zdWJzdHJpbmcoNCwgNiksIDE2KSAvIDI1NS4wO1xuICB2YXIgcmVkID0gcGFyc2VJbnQodmFsdWUuc3Vic3RyaW5nKDYsIDgpLCAxNikgLyAyNTUuMDtcblxuICBpZiAoIWlzUmFuZG9tKSB7XG4gICAgcmV0dXJuIG5ldyBDb2xvcihyZWQsIGdyZWVuLCBibHVlLCBhbHBoYSk7XG4gIH1cblxuICBpZiAocmVkID4gMCkge1xuICAgIGNvbG9yT3B0aW9ucy5tYXhpbXVtUmVkID0gcmVkO1xuICAgIGNvbG9yT3B0aW9ucy5yZWQgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgY29sb3JPcHRpb25zLm1heGltdW1SZWQgPSB1bmRlZmluZWQ7XG4gICAgY29sb3JPcHRpb25zLnJlZCA9IDA7XG4gIH1cbiAgaWYgKGdyZWVuID4gMCkge1xuICAgIGNvbG9yT3B0aW9ucy5tYXhpbXVtR3JlZW4gPSBncmVlbjtcbiAgICBjb2xvck9wdGlvbnMuZ3JlZW4gPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgY29sb3JPcHRpb25zLm1heGltdW1HcmVlbiA9IHVuZGVmaW5lZDtcbiAgICBjb2xvck9wdGlvbnMuZ3JlZW4gPSAwO1xuICB9XG4gIGlmIChibHVlID4gMCkge1xuICAgIGNvbG9yT3B0aW9ucy5tYXhpbXVtQmx1ZSA9IGJsdWU7XG4gICAgY29sb3JPcHRpb25zLmJsdWUgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgY29sb3JPcHRpb25zLm1heGltdW1CbHVlID0gdW5kZWZpbmVkO1xuICAgIGNvbG9yT3B0aW9ucy5ibHVlID0gMDtcbiAgfVxuICBjb2xvck9wdGlvbnMuYWxwaGEgPSBhbHBoYTtcbiAgcmV0dXJuIENvbG9yLmZyb21SYW5kb20oY29sb3JPcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gcXVlcnlDb2xvclZhbHVlKG5vZGUsIHRhZ05hbWUsIG5hbWVzcGFjZSkge1xuICB2YXIgdmFsdWUgPSBxdWVyeVN0cmluZ1ZhbHVlKG5vZGUsIHRhZ05hbWUsIG5hbWVzcGFjZSk7XG4gIGlmICghZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBwYXJzZUNvbG9yU3RyaW5nKFxuICAgIHZhbHVlLFxuICAgIHF1ZXJ5U3RyaW5nVmFsdWUobm9kZSwgXCJjb2xvck1vZGVcIiwgbmFtZXNwYWNlKSA9PT0gXCJyYW5kb21cIlxuICApO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzVGltZVN0YW1wKGZlYXR1cmVOb2RlKSB7XG4gIHZhciBub2RlID0gcXVlcnlGaXJzdE5vZGUoZmVhdHVyZU5vZGUsIFwiVGltZVN0YW1wXCIsIG5hbWVzcGFjZXMua21sZ3gpO1xuICB2YXIgd2hlblN0cmluZyA9IHF1ZXJ5U3RyaW5nVmFsdWUobm9kZSwgXCJ3aGVuXCIsIG5hbWVzcGFjZXMua21sZ3gpO1xuXG4gIGlmICghZGVmaW5lZChub2RlKSB8fCAhZGVmaW5lZCh3aGVuU3RyaW5nKSB8fCB3aGVuU3RyaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvL0FjY29yZGluZyB0byB0aGUgS01MIHNwZWMsIGEgVGltZVN0YW1wIHJlcHJlc2VudHMgYSBcInNpbmdsZSBtb21lbnQgaW4gdGltZVwiXG4gIC8vSG93ZXZlciwgc2luY2UgQ2VzaXVtIGFuaW1hdGVzIG11Y2ggZGlmZmVyZW50bHkgdGhhbiBHb29nbGUgRWFydGgsIHRoYXQgZG9lc24ndFxuICAvL01ha2UgbXVjaCBzZW5zZSBoZXJlLiAgSW5zdGVhZCwgd2UgdXNlIHRoZSBUaW1lU3RhbXAgYXMgdGhlIG1vbWVudCB0aGUgZmVhdHVyZVxuICAvL2NvbWVzIGludG8gZXhpc3RlbmNlLiAgVGhpcyB3b3JrcyBtdWNoIGJldHRlciBhbmQgZ2l2ZXMgYSBzaW1pbGFyIGZlZWwgdG9cbiAgLy9HRSdzIGV4cGVyaWVuY2UuXG4gIHZhciB3aGVuID0gSnVsaWFuRGF0ZS5mcm9tSXNvODYwMSh3aGVuU3RyaW5nKTtcbiAgdmFyIHJlc3VsdCA9IG5ldyBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uKCk7XG4gIHJlc3VsdC5hZGRJbnRlcnZhbChcbiAgICBuZXcgVGltZUludGVydmFsKHtcbiAgICAgIHN0YXJ0OiB3aGVuLFxuICAgICAgc3RvcDogSXNvODYwMS5NQVhJTVVNX1ZBTFVFLFxuICAgIH0pXG4gICk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NUaW1lU3BhbihmZWF0dXJlTm9kZSkge1xuICB2YXIgbm9kZSA9IHF1ZXJ5Rmlyc3ROb2RlKGZlYXR1cmVOb2RlLCBcIlRpbWVTcGFuXCIsIG5hbWVzcGFjZXMua21sZ3gpO1xuICBpZiAoIWRlZmluZWQobm9kZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHZhciByZXN1bHQ7XG5cbiAgdmFyIGJlZ2luTm9kZSA9IHF1ZXJ5Rmlyc3ROb2RlKG5vZGUsIFwiYmVnaW5cIiwgbmFtZXNwYWNlcy5rbWxneCk7XG4gIHZhciBiZWdpbkRhdGUgPSBkZWZpbmVkKGJlZ2luTm9kZSlcbiAgICA/IEp1bGlhbkRhdGUuZnJvbUlzbzg2MDEoYmVnaW5Ob2RlLnRleHRDb250ZW50KVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIHZhciBlbmROb2RlID0gcXVlcnlGaXJzdE5vZGUobm9kZSwgXCJlbmRcIiwgbmFtZXNwYWNlcy5rbWxneCk7XG4gIHZhciBlbmREYXRlID0gZGVmaW5lZChlbmROb2RlKVxuICAgID8gSnVsaWFuRGF0ZS5mcm9tSXNvODYwMShlbmROb2RlLnRleHRDb250ZW50KVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIGlmIChkZWZpbmVkKGJlZ2luRGF0ZSkgJiYgZGVmaW5lZChlbmREYXRlKSkge1xuICAgIGlmIChKdWxpYW5EYXRlLmxlc3NUaGFuKGVuZERhdGUsIGJlZ2luRGF0ZSkpIHtcbiAgICAgIHZhciB0bXAgPSBiZWdpbkRhdGU7XG4gICAgICBiZWdpbkRhdGUgPSBlbmREYXRlO1xuICAgICAgZW5kRGF0ZSA9IHRtcDtcbiAgICB9XG4gICAgcmVzdWx0ID0gbmV3IFRpbWVJbnRlcnZhbENvbGxlY3Rpb24oKTtcbiAgICByZXN1bHQuYWRkSW50ZXJ2YWwoXG4gICAgICBuZXcgVGltZUludGVydmFsKHtcbiAgICAgICAgc3RhcnQ6IGJlZ2luRGF0ZSxcbiAgICAgICAgc3RvcDogZW5kRGF0ZSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSBlbHNlIGlmIChkZWZpbmVkKGJlZ2luRGF0ZSkpIHtcbiAgICByZXN1bHQgPSBuZXcgVGltZUludGVydmFsQ29sbGVjdGlvbigpO1xuICAgIHJlc3VsdC5hZGRJbnRlcnZhbChcbiAgICAgIG5ldyBUaW1lSW50ZXJ2YWwoe1xuICAgICAgICBzdGFydDogYmVnaW5EYXRlLFxuICAgICAgICBzdG9wOiBJc284NjAxLk1BWElNVU1fVkFMVUUsXG4gICAgICB9KVxuICAgICk7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChlbmREYXRlKSkge1xuICAgIHJlc3VsdCA9IG5ldyBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uKCk7XG4gICAgcmVzdWx0LmFkZEludGVydmFsKFxuICAgICAgbmV3IFRpbWVJbnRlcnZhbCh7XG4gICAgICAgIHN0YXJ0OiBJc284NjAxLk1JTklNVU1fVkFMVUUsXG4gICAgICAgIHN0b3A6IGVuZERhdGUsXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0QmlsbGJvYXJkKCkge1xuICB2YXIgYmlsbGJvYXJkID0gbmV3IEJpbGxib2FyZEdyYXBoaWNzKCk7XG4gIGJpbGxib2FyZC53aWR0aCA9IEJJTExCT0FSRF9TSVpFO1xuICBiaWxsYm9hcmQuaGVpZ2h0ID0gQklMTEJPQVJEX1NJWkU7XG4gIGJpbGxib2FyZC5zY2FsZUJ5RGlzdGFuY2UgPSBuZXcgTmVhckZhclNjYWxhcihcbiAgICBCSUxMQk9BUkRfTkVBUl9ESVNUQU5DRSxcbiAgICBCSUxMQk9BUkRfTkVBUl9SQVRJTyxcbiAgICBCSUxMQk9BUkRfRkFSX0RJU1RBTkNFLFxuICAgIEJJTExCT0FSRF9GQVJfUkFUSU9cbiAgKTtcbiAgYmlsbGJvYXJkLnBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID0gbmV3IE5lYXJGYXJTY2FsYXIoXG4gICAgQklMTEJPQVJEX05FQVJfRElTVEFOQ0UsXG4gICAgQklMTEJPQVJEX05FQVJfUkFUSU8sXG4gICAgQklMTEJPQVJEX0ZBUl9ESVNUQU5DRSxcbiAgICBCSUxMQk9BUkRfRkFSX1JBVElPXG4gICk7XG4gIHJldHVybiBiaWxsYm9hcmQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRQb2x5Z29uKCkge1xuICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uR3JhcGhpY3MoKTtcbiAgcG9seWdvbi5vdXRsaW5lID0gdHJ1ZTtcbiAgcG9seWdvbi5vdXRsaW5lQ29sb3IgPSBDb2xvci5XSElURTtcbiAgcmV0dXJuIHBvbHlnb247XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRMYWJlbCgpIHtcbiAgdmFyIGxhYmVsID0gbmV3IExhYmVsR3JhcGhpY3MoKTtcbiAgbGFiZWwudHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IG5ldyBOZWFyRmFyU2NhbGFyKDMwMDAwMDAsIDEuMCwgNTAwMDAwMCwgMC4wKTtcbiAgbGFiZWwucGl4ZWxPZmZzZXQgPSBuZXcgQ2FydGVzaWFuMigxNywgMCk7XG4gIGxhYmVsLmhvcml6b250YWxPcmlnaW4gPSBIb3Jpem9udGFsT3JpZ2luLkxFRlQ7XG4gIGxhYmVsLmZvbnQgPSBcIjE2cHggc2Fucy1zZXJpZlwiO1xuICBsYWJlbC5zdHlsZSA9IExhYmVsU3R5bGUuRklMTF9BTkRfT1VUTElORTtcbiAgcmV0dXJuIGxhYmVsO1xufVxuXG5mdW5jdGlvbiBnZXRJY29uSHJlZihcbiAgaWNvbk5vZGUsXG4gIGRhdGFTb3VyY2UsXG4gIHNvdXJjZVJlc291cmNlLFxuICB1cmlSZXNvbHZlcixcbiAgY2FuUmVmcmVzaFxuKSB7XG4gIHZhciBocmVmID0gcXVlcnlTdHJpbmdWYWx1ZShpY29uTm9kZSwgXCJocmVmXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgaWYgKCFkZWZpbmVkKGhyZWYpIHx8IGhyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChocmVmLmluZGV4T2YoXCJyb290Oi8vaWNvbnMvcGFsZXR0ZS1cIikgPT09IDApIHtcbiAgICB2YXIgcGFsZXR0ZSA9IGhyZWYuY2hhckF0KDIxKTtcblxuICAgIC8vIEdldCB0aGUgaWNvbiBudW1iZXJcbiAgICB2YXIgeCA9IGRlZmF1bHRWYWx1ZShxdWVyeU51bWVyaWNWYWx1ZShpY29uTm9kZSwgXCJ4XCIsIG5hbWVzcGFjZXMuZ3gpLCAwKTtcbiAgICB2YXIgeSA9IGRlZmF1bHRWYWx1ZShxdWVyeU51bWVyaWNWYWx1ZShpY29uTm9kZSwgXCJ5XCIsIG5hbWVzcGFjZXMuZ3gpLCAwKTtcbiAgICB4ID0gTWF0aC5taW4oeCAvIDMyLCA3KTtcbiAgICB5ID0gNyAtIE1hdGgubWluKHkgLyAzMiwgNyk7XG4gICAgdmFyIGljb25OdW0gPSA4ICogeSArIHg7XG5cbiAgICBocmVmID1cbiAgICAgIFwiaHR0cHM6Ly9tYXBzLmdvb2dsZS5jb20vbWFwZmlsZXMva21sL3BhbFwiICtcbiAgICAgIHBhbGV0dGUgK1xuICAgICAgXCIvaWNvblwiICtcbiAgICAgIGljb25OdW0gK1xuICAgICAgXCIucG5nXCI7XG4gIH1cblxuICB2YXIgaHJlZlJlc291cmNlID0gcmVzb2x2ZUhyZWYoaHJlZiwgc291cmNlUmVzb3VyY2UsIHVyaVJlc29sdmVyKTtcblxuICBpZiAoY2FuUmVmcmVzaCkge1xuICAgIHZhciByZWZyZXNoTW9kZSA9IHF1ZXJ5U3RyaW5nVmFsdWUoaWNvbk5vZGUsIFwicmVmcmVzaE1vZGVcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgIHZhciB2aWV3UmVmcmVzaE1vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgICAgaWNvbk5vZGUsXG4gICAgICBcInZpZXdSZWZyZXNoTW9kZVwiLFxuICAgICAgbmFtZXNwYWNlcy5rbWxcbiAgICApO1xuICAgIGlmIChyZWZyZXNoTW9kZSA9PT0gXCJvbkludGVydmFsXCIgfHwgcmVmcmVzaE1vZGUgPT09IFwib25FeHBpcmVcIikge1xuICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgIFwia21sLXJlZnJlc2hNb2RlLVwiICsgcmVmcmVzaE1vZGUsXG4gICAgICAgIFwiS01MIC0gVW5zdXBwb3J0ZWQgSWNvbiByZWZyZXNoTW9kZTogXCIgKyByZWZyZXNoTW9kZVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHZpZXdSZWZyZXNoTW9kZSA9PT0gXCJvblN0b3BcIiB8fCB2aWV3UmVmcmVzaE1vZGUgPT09IFwib25SZWdpb25cIikge1xuICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgIFwia21sLXJlZnJlc2hNb2RlLVwiICsgdmlld1JlZnJlc2hNb2RlLFxuICAgICAgICBcIktNTCAtIFVuc3VwcG9ydGVkIEljb24gdmlld1JlZnJlc2hNb2RlOiBcIiArIHZpZXdSZWZyZXNoTW9kZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgdmlld0JvdW5kU2NhbGUgPSBkZWZhdWx0VmFsdWUoXG4gICAgICBxdWVyeVN0cmluZ1ZhbHVlKGljb25Ob2RlLCBcInZpZXdCb3VuZFNjYWxlXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgIDEuMFxuICAgICk7XG4gICAgdmFyIGRlZmF1bHRWaWV3Rm9ybWF0ID1cbiAgICAgIHZpZXdSZWZyZXNoTW9kZSA9PT0gXCJvblN0b3BcIlxuICAgICAgICA/IFwiQkJPWD1bYmJveFdlc3RdLFtiYm94U291dGhdLFtiYm94RWFzdF0sW2Jib3hOb3J0aF1cIlxuICAgICAgICA6IFwiXCI7XG4gICAgdmFyIHZpZXdGb3JtYXQgPSBkZWZhdWx0VmFsdWUoXG4gICAgICBxdWVyeVN0cmluZ1ZhbHVlKGljb25Ob2RlLCBcInZpZXdGb3JtYXRcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgZGVmYXVsdFZpZXdGb3JtYXRcbiAgICApO1xuICAgIHZhciBodHRwUXVlcnkgPSBxdWVyeVN0cmluZ1ZhbHVlKGljb25Ob2RlLCBcImh0dHBRdWVyeVwiLCBuYW1lc3BhY2VzLmttbCk7XG4gICAgaWYgKGRlZmluZWQodmlld0Zvcm1hdCkpIHtcbiAgICAgIGhyZWZSZXNvdXJjZS5zZXRRdWVyeVBhcmFtZXRlcnMocXVlcnlUb09iamVjdChjbGVhbnVwU3RyaW5nKHZpZXdGb3JtYXQpKSk7XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKGh0dHBRdWVyeSkpIHtcbiAgICAgIGhyZWZSZXNvdXJjZS5zZXRRdWVyeVBhcmFtZXRlcnMocXVlcnlUb09iamVjdChjbGVhbnVwU3RyaW5nKGh0dHBRdWVyeSkpKTtcbiAgICB9XG5cbiAgICB2YXIgZWxsaXBzb2lkID0gZGF0YVNvdXJjZS5fZWxsaXBzb2lkO1xuICAgIHByb2Nlc3NOZXR3b3JrTGlua1F1ZXJ5U3RyaW5nKFxuICAgICAgaHJlZlJlc291cmNlLFxuICAgICAgZGF0YVNvdXJjZS5fY2FtZXJhLFxuICAgICAgZGF0YVNvdXJjZS5fY2FudmFzLFxuICAgICAgdmlld0JvdW5kU2NhbGUsXG4gICAgICBkYXRhU291cmNlLl9sYXN0Q2FtZXJhVmlldy5iYm94LFxuICAgICAgZWxsaXBzb2lkXG4gICAgKTtcblxuICAgIHJldHVybiBocmVmUmVzb3VyY2U7XG4gIH1cblxuICByZXR1cm4gaHJlZlJlc291cmNlO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzQmlsbGJvYXJkSWNvbihcbiAgZGF0YVNvdXJjZSxcbiAgbm9kZSxcbiAgdGFyZ2V0RW50aXR5LFxuICBzb3VyY2VSZXNvdXJjZSxcbiAgdXJpUmVzb2x2ZXJcbikge1xuICB2YXIgc2NhbGUgPSBxdWVyeU51bWVyaWNWYWx1ZShub2RlLCBcInNjYWxlXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgdmFyIGhlYWRpbmcgPSBxdWVyeU51bWVyaWNWYWx1ZShub2RlLCBcImhlYWRpbmdcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICB2YXIgY29sb3IgPSBxdWVyeUNvbG9yVmFsdWUobm9kZSwgXCJjb2xvclwiLCBuYW1lc3BhY2VzLmttbCk7XG5cbiAgdmFyIGljb25Ob2RlID0gcXVlcnlGaXJzdE5vZGUobm9kZSwgXCJJY29uXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgdmFyIGljb24gPSBnZXRJY29uSHJlZihcbiAgICBpY29uTm9kZSxcbiAgICBkYXRhU291cmNlLFxuICAgIHNvdXJjZVJlc291cmNlLFxuICAgIHVyaVJlc29sdmVyLFxuICAgIGZhbHNlXG4gICk7XG5cbiAgLy8gSWYgaWNvbiB0YWdzIGFyZSBwcmVzZW50IGJ1dCBibGFuaywgd2UgZG8gbm90IHdhbnQgdG8gc2hvdyBhbiBpY29uXG4gIGlmIChkZWZpbmVkKGljb25Ob2RlKSAmJiAhZGVmaW5lZChpY29uKSkge1xuICAgIGljb24gPSBmYWxzZTtcbiAgfVxuXG4gIHZhciB4ID0gcXVlcnlOdW1lcmljVmFsdWUoaWNvbk5vZGUsIFwieFwiLCBuYW1lc3BhY2VzLmd4KTtcbiAgdmFyIHkgPSBxdWVyeU51bWVyaWNWYWx1ZShpY29uTm9kZSwgXCJ5XCIsIG5hbWVzcGFjZXMuZ3gpO1xuICB2YXIgdyA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKGljb25Ob2RlLCBcIndcIiwgbmFtZXNwYWNlcy5neCk7XG4gIHZhciBoID0gcXVlcnlOdW1lcmljVmFsdWUoaWNvbk5vZGUsIFwiaFwiLCBuYW1lc3BhY2VzLmd4KTtcblxuICB2YXIgaG90U3BvdE5vZGUgPSBxdWVyeUZpcnN0Tm9kZShub2RlLCBcImhvdFNwb3RcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICB2YXIgaG90U3BvdFggPSBxdWVyeU51bWVyaWNBdHRyaWJ1dGUoaG90U3BvdE5vZGUsIFwieFwiKTtcbiAgdmFyIGhvdFNwb3RZID0gcXVlcnlOdW1lcmljQXR0cmlidXRlKGhvdFNwb3ROb2RlLCBcInlcIik7XG4gIHZhciBob3RTcG90WFVuaXQgPSBxdWVyeVN0cmluZ0F0dHJpYnV0ZShob3RTcG90Tm9kZSwgXCJ4dW5pdHNcIik7XG4gIHZhciBob3RTcG90WVVuaXQgPSBxdWVyeVN0cmluZ0F0dHJpYnV0ZShob3RTcG90Tm9kZSwgXCJ5dW5pdHNcIik7XG5cbiAgdmFyIGJpbGxib2FyZCA9IHRhcmdldEVudGl0eS5iaWxsYm9hcmQ7XG4gIGlmICghZGVmaW5lZChiaWxsYm9hcmQpKSB7XG4gICAgYmlsbGJvYXJkID0gY3JlYXRlRGVmYXVsdEJpbGxib2FyZCgpO1xuICAgIHRhcmdldEVudGl0eS5iaWxsYm9hcmQgPSBiaWxsYm9hcmQ7XG4gIH1cblxuICBiaWxsYm9hcmQuaW1hZ2UgPSBpY29uO1xuICBiaWxsYm9hcmQuc2NhbGUgPSBzY2FsZTtcbiAgYmlsbGJvYXJkLmNvbG9yID0gY29sb3I7XG5cbiAgaWYgKGRlZmluZWQoeCkgfHwgZGVmaW5lZCh5KSB8fCBkZWZpbmVkKHcpIHx8IGRlZmluZWQoaCkpIHtcbiAgICBiaWxsYm9hcmQuaW1hZ2VTdWJSZWdpb24gPSBuZXcgQm91bmRpbmdSZWN0YW5nbGUoeCwgeSwgdywgaCk7XG4gIH1cblxuICAvL0dFIHRyZWF0cyBhIGhlYWRpbmcgb2YgemVybyBhcyBubyBoZWFkaW5nXG4gIC8vWW91IGNhbiBzdGlsbCBwb2ludCBub3J0aCB1c2luZyBhIDM2MCBkZWdyZWUgYW5nbGUgKG9yIGFueSBtdWx0aXBsZSBvZiAzNjApXG4gIGlmIChkZWZpbmVkKGhlYWRpbmcpICYmIGhlYWRpbmcgIT09IDApIHtcbiAgICBiaWxsYm9hcmQucm90YXRpb24gPSBDZXNpdW1NYXRoLnRvUmFkaWFucygtaGVhZGluZyk7XG4gICAgYmlsbGJvYXJkLmFsaWduZWRBeGlzID0gQ2FydGVzaWFuMy5VTklUX1o7XG4gIH1cblxuICAvL0hvdHBvdCBpcyB0aGUgS01MIGVxdWl2YWxlbnQgb2YgcGl4ZWwgb2Zmc2V0XG4gIC8vVGhlIGhvdHNwb3Qgb3JpZ2luIGlzIHRoZSBsb3dlciBsZWZ0LCBidXQgd2UgbGVhdmVcbiAgLy9vdXIgYmlsbGJvYXJkIG9yaWdpbiBhdCB0aGUgY2VudGVyIGFuZCBzaW1wbHlcbiAgLy9tb2RpZnkgdGhlIHBpeGVsIG9mZnNldCB0byB0YWtlIHRoaXMgaW50byBhY2NvdW50XG4gIHNjYWxlID0gZGVmYXVsdFZhbHVlKHNjYWxlLCAxLjApO1xuXG4gIHZhciB4T2Zmc2V0O1xuICB2YXIgeU9mZnNldDtcbiAgaWYgKGRlZmluZWQoaG90U3BvdFgpKSB7XG4gICAgaWYgKGhvdFNwb3RYVW5pdCA9PT0gXCJwaXhlbHNcIikge1xuICAgICAgeE9mZnNldCA9IC1ob3RTcG90WCAqIHNjYWxlO1xuICAgIH0gZWxzZSBpZiAoaG90U3BvdFhVbml0ID09PSBcImluc2V0UGl4ZWxzXCIpIHtcbiAgICAgIHhPZmZzZXQgPSAoaG90U3BvdFggLSBCSUxMQk9BUkRfU0laRSkgKiBzY2FsZTtcbiAgICB9IGVsc2UgaWYgKGhvdFNwb3RYVW5pdCA9PT0gXCJmcmFjdGlvblwiKSB7XG4gICAgICB4T2Zmc2V0ID0gLWhvdFNwb3RYICogQklMTEJPQVJEX1NJWkUgKiBzY2FsZTtcbiAgICB9XG4gICAgeE9mZnNldCArPSBCSUxMQk9BUkRfU0laRSAqIDAuNSAqIHNjYWxlO1xuICB9XG5cbiAgaWYgKGRlZmluZWQoaG90U3BvdFkpKSB7XG4gICAgaWYgKGhvdFNwb3RZVW5pdCA9PT0gXCJwaXhlbHNcIikge1xuICAgICAgeU9mZnNldCA9IGhvdFNwb3RZICogc2NhbGU7XG4gICAgfSBlbHNlIGlmIChob3RTcG90WVVuaXQgPT09IFwiaW5zZXRQaXhlbHNcIikge1xuICAgICAgeU9mZnNldCA9ICgtaG90U3BvdFkgKyBCSUxMQk9BUkRfU0laRSkgKiBzY2FsZTtcbiAgICB9IGVsc2UgaWYgKGhvdFNwb3RZVW5pdCA9PT0gXCJmcmFjdGlvblwiKSB7XG4gICAgICB5T2Zmc2V0ID0gaG90U3BvdFkgKiBCSUxMQk9BUkRfU0laRSAqIHNjYWxlO1xuICAgIH1cblxuICAgIHlPZmZzZXQgLT0gQklMTEJPQVJEX1NJWkUgKiAwLjUgKiBzY2FsZTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHhPZmZzZXQpIHx8IGRlZmluZWQoeU9mZnNldCkpIHtcbiAgICBiaWxsYm9hcmQucGl4ZWxPZmZzZXQgPSBuZXcgQ2FydGVzaWFuMih4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVN0eWxlKFxuICBkYXRhU291cmNlLFxuICBzdHlsZU5vZGUsXG4gIHRhcmdldEVudGl0eSxcbiAgc291cmNlUmVzb3VyY2UsXG4gIHVyaVJlc29sdmVyXG4pIHtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHN0eWxlTm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIG5vZGUgPSBzdHlsZU5vZGUuY2hpbGROb2Rlcy5pdGVtKGkpO1xuICAgIGlmIChub2RlLmxvY2FsTmFtZSA9PT0gXCJJY29uU3R5bGVcIikge1xuICAgICAgcHJvY2Vzc0JpbGxib2FyZEljb24oXG4gICAgICAgIGRhdGFTb3VyY2UsXG4gICAgICAgIG5vZGUsXG4gICAgICAgIHRhcmdldEVudGl0eSxcbiAgICAgICAgc291cmNlUmVzb3VyY2UsXG4gICAgICAgIHVyaVJlc29sdmVyXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAobm9kZS5sb2NhbE5hbWUgPT09IFwiTGFiZWxTdHlsZVwiKSB7XG4gICAgICB2YXIgbGFiZWwgPSB0YXJnZXRFbnRpdHkubGFiZWw7XG4gICAgICBpZiAoIWRlZmluZWQobGFiZWwpKSB7XG4gICAgICAgIGxhYmVsID0gY3JlYXRlRGVmYXVsdExhYmVsKCk7XG4gICAgICAgIHRhcmdldEVudGl0eS5sYWJlbCA9IGxhYmVsO1xuICAgICAgfVxuICAgICAgbGFiZWwuc2NhbGUgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKG5vZGUsIFwic2NhbGVcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgICBsYWJlbC5zY2FsZVxuICAgICAgKTtcbiAgICAgIGxhYmVsLmZpbGxDb2xvciA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgcXVlcnlDb2xvclZhbHVlKG5vZGUsIFwiY29sb3JcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgICBsYWJlbC5maWxsQ29sb3JcbiAgICAgICk7XG4gICAgICBsYWJlbC50ZXh0ID0gdGFyZ2V0RW50aXR5Lm5hbWU7XG4gICAgfSBlbHNlIGlmIChub2RlLmxvY2FsTmFtZSA9PT0gXCJMaW5lU3R5bGVcIikge1xuICAgICAgdmFyIHBvbHlsaW5lID0gdGFyZ2V0RW50aXR5LnBvbHlsaW5lO1xuICAgICAgaWYgKCFkZWZpbmVkKHBvbHlsaW5lKSkge1xuICAgICAgICBwb2x5bGluZSA9IG5ldyBQb2x5bGluZUdyYXBoaWNzKCk7XG4gICAgICAgIHRhcmdldEVudGl0eS5wb2x5bGluZSA9IHBvbHlsaW5lO1xuICAgICAgfVxuICAgICAgcG9seWxpbmUud2lkdGggPSBxdWVyeU51bWVyaWNWYWx1ZShub2RlLCBcIndpZHRoXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgICAgIHBvbHlsaW5lLm1hdGVyaWFsID0gcXVlcnlDb2xvclZhbHVlKG5vZGUsIFwiY29sb3JcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgICAgaWYgKGRlZmluZWQocXVlcnlDb2xvclZhbHVlKG5vZGUsIFwib3V0ZXJDb2xvclwiLCBuYW1lc3BhY2VzLmd4KSkpIHtcbiAgICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgICAgXCJrbWwtZ3g6b3V0ZXJDb2xvclwiLFxuICAgICAgICAgIFwiS01MIC0gZ3g6b3V0ZXJDb2xvciBpcyBub3Qgc3VwcG9ydGVkIGluIGEgTGluZVN0eWxlXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKHF1ZXJ5TnVtZXJpY1ZhbHVlKG5vZGUsIFwib3V0ZXJXaWR0aFwiLCBuYW1lc3BhY2VzLmd4KSkpIHtcbiAgICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgICAgXCJrbWwtZ3g6b3V0ZXJXaWR0aFwiLFxuICAgICAgICAgIFwiS01MIC0gZ3g6b3V0ZXJXaWR0aCBpcyBub3Qgc3VwcG9ydGVkIGluIGEgTGluZVN0eWxlXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKHF1ZXJ5TnVtZXJpY1ZhbHVlKG5vZGUsIFwicGh5c2ljYWxXaWR0aFwiLCBuYW1lc3BhY2VzLmd4KSkpIHtcbiAgICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgICAgXCJrbWwtZ3g6cGh5c2ljYWxXaWR0aFwiLFxuICAgICAgICAgIFwiS01MIC0gZ3g6cGh5c2ljYWxXaWR0aCBpcyBub3Qgc3VwcG9ydGVkIGluIGEgTGluZVN0eWxlXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKHF1ZXJ5Qm9vbGVhblZhbHVlKG5vZGUsIFwibGFiZWxWaXNpYmlsaXR5XCIsIG5hbWVzcGFjZXMuZ3gpKSkge1xuICAgICAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgICAgICBcImttbC1neDpsYWJlbFZpc2liaWxpdHlcIixcbiAgICAgICAgICBcIktNTCAtIGd4OmxhYmVsVmlzaWJpbGl0eSBpcyBub3Qgc3VwcG9ydGVkIGluIGEgTGluZVN0eWxlXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5vZGUubG9jYWxOYW1lID09PSBcIlBvbHlTdHlsZVwiKSB7XG4gICAgICB2YXIgcG9seWdvbiA9IHRhcmdldEVudGl0eS5wb2x5Z29uO1xuICAgICAgaWYgKCFkZWZpbmVkKHBvbHlnb24pKSB7XG4gICAgICAgIHBvbHlnb24gPSBjcmVhdGVEZWZhdWx0UG9seWdvbigpO1xuICAgICAgICB0YXJnZXRFbnRpdHkucG9seWdvbiA9IHBvbHlnb247XG4gICAgICB9XG4gICAgICBwb2x5Z29uLm1hdGVyaWFsID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBxdWVyeUNvbG9yVmFsdWUobm9kZSwgXCJjb2xvclwiLCBuYW1lc3BhY2VzLmttbCksXG4gICAgICAgIHBvbHlnb24ubWF0ZXJpYWxcbiAgICAgICk7XG4gICAgICBwb2x5Z29uLmZpbGwgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHF1ZXJ5Qm9vbGVhblZhbHVlKG5vZGUsIFwiZmlsbFwiLCBuYW1lc3BhY2VzLmttbCksXG4gICAgICAgIHBvbHlnb24uZmlsbFxuICAgICAgKTtcbiAgICAgIHBvbHlnb24ub3V0bGluZSA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgcXVlcnlCb29sZWFuVmFsdWUobm9kZSwgXCJvdXRsaW5lXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgICAgcG9seWdvbi5vdXRsaW5lXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAobm9kZS5sb2NhbE5hbWUgPT09IFwiQmFsbG9vblN0eWxlXCIpIHtcbiAgICAgIHZhciBiZ0NvbG9yID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBwYXJzZUNvbG9yU3RyaW5nKHF1ZXJ5U3RyaW5nVmFsdWUobm9kZSwgXCJiZ0NvbG9yXCIsIG5hbWVzcGFjZXMua21sKSksXG4gICAgICAgIENvbG9yLldISVRFXG4gICAgICApO1xuICAgICAgdmFyIHRleHRDb2xvciA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgcGFyc2VDb2xvclN0cmluZyhxdWVyeVN0cmluZ1ZhbHVlKG5vZGUsIFwidGV4dENvbG9yXCIsIG5hbWVzcGFjZXMua21sKSksXG4gICAgICAgIENvbG9yLkJMQUNLXG4gICAgICApO1xuICAgICAgdmFyIHRleHQgPSBxdWVyeVN0cmluZ1ZhbHVlKG5vZGUsIFwidGV4dFwiLCBuYW1lc3BhY2VzLmttbCk7XG5cbiAgICAgIC8vVGhpcyBpcyBwdXJlbHkgYW4gaW50ZXJuYWwgcHJvcGVydHkgdXNlZCBpbiBzdHlsZSBwcm9jZXNzaW5nLFxuICAgICAgLy9pdCBuZXZlciBlbmRzIHVwIG9uIHRoZSBmaW5hbCBlbnRpdHkuXG4gICAgICB0YXJnZXRFbnRpdHkuYWRkUHJvcGVydHkoXCJiYWxsb29uU3R5bGVcIik7XG4gICAgICB0YXJnZXRFbnRpdHkuYmFsbG9vblN0eWxlID0ge1xuICAgICAgICBiZ0NvbG9yOiBiZ0NvbG9yLFxuICAgICAgICB0ZXh0Q29sb3I6IHRleHRDb2xvcixcbiAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChub2RlLmxvY2FsTmFtZSA9PT0gXCJMaXN0U3R5bGVcIikge1xuICAgICAgdmFyIGxpc3RJdGVtVHlwZSA9IHF1ZXJ5U3RyaW5nVmFsdWUobm9kZSwgXCJsaXN0SXRlbVR5cGVcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgICAgaWYgKGxpc3RJdGVtVHlwZSA9PT0gXCJyYWRpb0ZvbGRlclwiIHx8IGxpc3RJdGVtVHlwZSA9PT0gXCJjaGVja09mZk9ubHlcIikge1xuICAgICAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgICAgICBcImttbC1saXN0U3R5bGUtXCIgKyBsaXN0SXRlbVR5cGUsXG4gICAgICAgICAgXCJLTUwgLSBVbnN1cHBvcnRlZCBMaXN0U3R5bGUgd2l0aCBsaXN0SXRlbVR5cGU6IFwiICsgbGlzdEl0ZW1UeXBlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vUHJvY2Vzc2VzIGFuZCBtZXJnZXMgYW55IGlubGluZSBzdHlsZXMgZm9yIHRoZSBwcm92aWRlZCBub2RlIGludG8gdGhlIHByb3ZpZGVkIGVudGl0eS5cbmZ1bmN0aW9uIGNvbXB1dGVGaW5hbFN0eWxlKFxuICBkYXRhU291cmNlLFxuICBwbGFjZU1hcmssXG4gIHN0eWxlQ29sbGVjdGlvbixcbiAgc291cmNlUmVzb3VyY2UsXG4gIHVyaVJlc29sdmVyXG4pIHtcbiAgdmFyIHJlc3VsdCA9IG5ldyBFbnRpdHkoKTtcbiAgdmFyIHN0eWxlRW50aXR5O1xuXG4gIC8vR29vZ2xlIGVhcnRoIHNlZW1zIHRvIGFsd2F5cyB1c2UgdGhlIGxhc3QgaW5saW5lIFN0eWxlL1N0eWxlTWFwIG9ubHlcbiAgdmFyIHN0eWxlSW5kZXggPSAtMTtcbiAgdmFyIGNoaWxkTm9kZXMgPSBwbGFjZU1hcmsuY2hpbGROb2RlcztcbiAgdmFyIGxlbmd0aCA9IGNoaWxkTm9kZXMubGVuZ3RoO1xuICBmb3IgKHZhciBxID0gMDsgcSA8IGxlbmd0aDsgcSsrKSB7XG4gICAgdmFyIGNoaWxkID0gY2hpbGROb2Rlc1txXTtcbiAgICBpZiAoY2hpbGQubG9jYWxOYW1lID09PSBcIlN0eWxlXCIgfHwgY2hpbGQubG9jYWxOYW1lID09PSBcIlN0eWxlTWFwXCIpIHtcbiAgICAgIHN0eWxlSW5kZXggPSBxO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdHlsZUluZGV4ICE9PSAtMSkge1xuICAgIHZhciBpbmxpbmVTdHlsZU5vZGUgPSBjaGlsZE5vZGVzW3N0eWxlSW5kZXhdO1xuICAgIGlmIChpbmxpbmVTdHlsZU5vZGUubG9jYWxOYW1lID09PSBcIlN0eWxlXCIpIHtcbiAgICAgIGFwcGx5U3R5bGUoXG4gICAgICAgIGRhdGFTb3VyY2UsXG4gICAgICAgIGlubGluZVN0eWxlTm9kZSxcbiAgICAgICAgcmVzdWx0LFxuICAgICAgICBzb3VyY2VSZXNvdXJjZSxcbiAgICAgICAgdXJpUmVzb2x2ZXJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN0eWxlTWFwXG4gICAgICB2YXIgcGFpcnMgPSBxdWVyeUNoaWxkTm9kZXMoaW5saW5lU3R5bGVOb2RlLCBcIlBhaXJcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBwYWlycy5sZW5ndGg7IHArKykge1xuICAgICAgICB2YXIgcGFpciA9IHBhaXJzW3BdO1xuICAgICAgICB2YXIga2V5ID0gcXVlcnlTdHJpbmdWYWx1ZShwYWlyLCBcImtleVwiLCBuYW1lc3BhY2VzLmttbCk7XG4gICAgICAgIGlmIChrZXkgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICB2YXIgc3R5bGVVcmwgPSBxdWVyeVN0cmluZ1ZhbHVlKHBhaXIsIFwic3R5bGVVcmxcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgICAgICAgIGlmIChkZWZpbmVkKHN0eWxlVXJsKSkge1xuICAgICAgICAgICAgc3R5bGVFbnRpdHkgPSBzdHlsZUNvbGxlY3Rpb24uZ2V0QnlJZChzdHlsZVVybCk7XG4gICAgICAgICAgICBpZiAoIWRlZmluZWQoc3R5bGVFbnRpdHkpKSB7XG4gICAgICAgICAgICAgIHN0eWxlRW50aXR5ID0gc3R5bGVDb2xsZWN0aW9uLmdldEJ5SWQoXCIjXCIgKyBzdHlsZVVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVmaW5lZChzdHlsZUVudGl0eSkpIHtcbiAgICAgICAgICAgICAgcmVzdWx0Lm1lcmdlKHN0eWxlRW50aXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBxdWVyeUZpcnN0Tm9kZShwYWlyLCBcIlN0eWxlXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgICAgICAgICAgIGFwcGx5U3R5bGUoZGF0YVNvdXJjZSwgbm9kZSwgcmVzdWx0LCBzb3VyY2VSZXNvdXJjZSwgdXJpUmVzb2x2ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgICAgICAgIFwia21sLXN0eWxlTWFwLVwiICsga2V5LFxuICAgICAgICAgICAgXCJLTUwgLSBVbnN1cHBvcnRlZCBTdHlsZU1hcCBrZXk6IFwiICsga2V5XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vR29vZ2xlIGVhcnRoIHNlZW1zIHRvIGFsd2F5cyB1c2UgdGhlIGZpcnN0IGV4dGVybmFsIHN0eWxlIG9ubHkuXG4gIHZhciBleHRlcm5hbFN0eWxlID0gcXVlcnlTdHJpbmdWYWx1ZShwbGFjZU1hcmssIFwic3R5bGVVcmxcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICBpZiAoZGVmaW5lZChleHRlcm5hbFN0eWxlKSkge1xuICAgIHZhciBpZCA9IGV4dGVybmFsU3R5bGU7XG4gICAgaWYgKGV4dGVybmFsU3R5bGVbMF0gIT09IFwiI1wiICYmIGV4dGVybmFsU3R5bGUuaW5kZXhPZihcIiNcIikgIT09IC0xKSB7XG4gICAgICB2YXIgdG9rZW5zID0gZXh0ZXJuYWxTdHlsZS5zcGxpdChcIiNcIik7XG4gICAgICB2YXIgdXJpID0gdG9rZW5zWzBdO1xuICAgICAgdmFyIHJlc291cmNlID0gc291cmNlUmVzb3VyY2UuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICAgICAgdXJsOiB1cmksXG4gICAgICB9KTtcblxuICAgICAgaWQgPSByZXNvdXJjZS5nZXRVcmxDb21wb25lbnQoKSArIFwiI1wiICsgdG9rZW5zWzFdO1xuICAgIH1cblxuICAgIHN0eWxlRW50aXR5ID0gc3R5bGVDb2xsZWN0aW9uLmdldEJ5SWQoaWQpO1xuICAgIGlmICghZGVmaW5lZChzdHlsZUVudGl0eSkpIHtcbiAgICAgIHN0eWxlRW50aXR5ID0gc3R5bGVDb2xsZWN0aW9uLmdldEJ5SWQoXCIjXCIgKyBpZCk7XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKHN0eWxlRW50aXR5KSkge1xuICAgICAgcmVzdWx0Lm1lcmdlKHN0eWxlRW50aXR5KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vL0FzeW5jaHJvbm91c2x5IHByb2Nlc3NlcyBhbiBleHRlcm5hbCBzdHlsZSBmaWxlLlxuZnVuY3Rpb24gcHJvY2Vzc0V4dGVybmFsU3R5bGVzKGRhdGFTb3VyY2UsIHJlc291cmNlLCBzdHlsZUNvbGxlY3Rpb24pIHtcbiAgcmV0dXJuIHJlc291cmNlLmZldGNoWE1MKCkudGhlbihmdW5jdGlvbiAoc3R5bGVLbWwpIHtcbiAgICByZXR1cm4gcHJvY2Vzc1N0eWxlcyhkYXRhU291cmNlLCBzdHlsZUttbCwgc3R5bGVDb2xsZWN0aW9uLCByZXNvdXJjZSwgdHJ1ZSk7XG4gIH0pO1xufVxuXG4vL1Byb2Nlc3NlcyBhbGwgc2hhcmVkIGFuZCBleHRlcm5hbCBzdHlsZXMgYW5kIHN0b3Jlc1xuLy90aGVpciBpZCBpbnRvIHRoZSBwcm92aWRlZCBzdHlsZUNvbGxlY3Rpb24uXG4vL1JldHVybnMgYW4gYXJyYXkgb2YgcHJvbWlzZXMgdGhhdCB3aWxsIHJlc29sdmUgd2hlblxuLy9lYWNoIHN0eWxlIGlzIGxvYWRlZC5cbmZ1bmN0aW9uIHByb2Nlc3NTdHlsZXMoXG4gIGRhdGFTb3VyY2UsXG4gIGttbCxcbiAgc3R5bGVDb2xsZWN0aW9uLFxuICBzb3VyY2VSZXNvdXJjZSxcbiAgaXNFeHRlcm5hbCxcbiAgdXJpUmVzb2x2ZXJcbikge1xuICB2YXIgaTtcbiAgdmFyIGlkO1xuICB2YXIgc3R5bGVFbnRpdHk7XG5cbiAgdmFyIG5vZGU7XG4gIHZhciBzdHlsZU5vZGVzID0gcXVlcnlOb2RlcyhrbWwsIFwiU3R5bGVcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICBpZiAoZGVmaW5lZChzdHlsZU5vZGVzKSkge1xuICAgIHZhciBzdHlsZU5vZGVzTGVuZ3RoID0gc3R5bGVOb2Rlcy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IHN0eWxlTm9kZXNMZW5ndGg7IGkrKykge1xuICAgICAgbm9kZSA9IHN0eWxlTm9kZXNbaV07XG4gICAgICBpZCA9IHF1ZXJ5U3RyaW5nQXR0cmlidXRlKG5vZGUsIFwiaWRcIik7XG4gICAgICBpZiAoZGVmaW5lZChpZCkpIHtcbiAgICAgICAgaWQgPSBcIiNcIiArIGlkO1xuICAgICAgICBpZiAoaXNFeHRlcm5hbCAmJiBkZWZpbmVkKHNvdXJjZVJlc291cmNlKSkge1xuICAgICAgICAgIGlkID0gc291cmNlUmVzb3VyY2UuZ2V0VXJsQ29tcG9uZW50KCkgKyBpZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlZmluZWQoc3R5bGVDb2xsZWN0aW9uLmdldEJ5SWQoaWQpKSkge1xuICAgICAgICAgIHN0eWxlRW50aXR5ID0gbmV3IEVudGl0eSh7XG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3R5bGVDb2xsZWN0aW9uLmFkZChzdHlsZUVudGl0eSk7XG4gICAgICAgICAgYXBwbHlTdHlsZShcbiAgICAgICAgICAgIGRhdGFTb3VyY2UsXG4gICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgc3R5bGVFbnRpdHksXG4gICAgICAgICAgICBzb3VyY2VSZXNvdXJjZSxcbiAgICAgICAgICAgIHVyaVJlc29sdmVyXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBzdHlsZU1hcHMgPSBxdWVyeU5vZGVzKGttbCwgXCJTdHlsZU1hcFwiLCBuYW1lc3BhY2VzLmttbCk7XG4gIGlmIChkZWZpbmVkKHN0eWxlTWFwcykpIHtcbiAgICB2YXIgc3R5bGVNYXBzTGVuZ3RoID0gc3R5bGVNYXBzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgc3R5bGVNYXBzTGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzdHlsZU1hcCA9IHN0eWxlTWFwc1tpXTtcbiAgICAgIGlkID0gcXVlcnlTdHJpbmdBdHRyaWJ1dGUoc3R5bGVNYXAsIFwiaWRcIik7XG4gICAgICBpZiAoZGVmaW5lZChpZCkpIHtcbiAgICAgICAgdmFyIHBhaXJzID0gcXVlcnlDaGlsZE5vZGVzKHN0eWxlTWFwLCBcIlBhaXJcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgICAgICBmb3IgKHZhciBwID0gMDsgcCA8IHBhaXJzLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1twXTtcbiAgICAgICAgICB2YXIga2V5ID0gcXVlcnlTdHJpbmdWYWx1ZShwYWlyLCBcImtleVwiLCBuYW1lc3BhY2VzLmttbCk7XG4gICAgICAgICAgaWYgKGtleSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgICAgaWQgPSBcIiNcIiArIGlkO1xuICAgICAgICAgICAgaWYgKGlzRXh0ZXJuYWwgJiYgZGVmaW5lZChzb3VyY2VSZXNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgaWQgPSBzb3VyY2VSZXNvdXJjZS5nZXRVcmxDb21wb25lbnQoKSArIGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkZWZpbmVkKHN0eWxlQ29sbGVjdGlvbi5nZXRCeUlkKGlkKSkpIHtcbiAgICAgICAgICAgICAgc3R5bGVFbnRpdHkgPSBzdHlsZUNvbGxlY3Rpb24uZ2V0T3JDcmVhdGVFbnRpdHkoaWQpO1xuXG4gICAgICAgICAgICAgIHZhciBzdHlsZVVybCA9IHF1ZXJ5U3RyaW5nVmFsdWUocGFpciwgXCJzdHlsZVVybFwiLCBuYW1lc3BhY2VzLmttbCk7XG4gICAgICAgICAgICAgIGlmIChkZWZpbmVkKHN0eWxlVXJsKSkge1xuICAgICAgICAgICAgICAgIGlmIChzdHlsZVVybFswXSAhPT0gXCIjXCIpIHtcbiAgICAgICAgICAgICAgICAgIHN0eWxlVXJsID0gXCIjXCIgKyBzdHlsZVVybDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNFeHRlcm5hbCAmJiBkZWZpbmVkKHNvdXJjZVJlc291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgc3R5bGVVcmwgPSBzb3VyY2VSZXNvdXJjZS5nZXRVcmxDb21wb25lbnQoKSArIHN0eWxlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IHN0eWxlQ29sbGVjdGlvbi5nZXRCeUlkKHN0eWxlVXJsKTtcblxuICAgICAgICAgICAgICAgIGlmIChkZWZpbmVkKGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgICBzdHlsZUVudGl0eS5tZXJnZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHF1ZXJ5Rmlyc3ROb2RlKHBhaXIsIFwiU3R5bGVcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgICAgICAgICAgICAgIGFwcGx5U3R5bGUoXG4gICAgICAgICAgICAgICAgICBkYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgIHN0eWxlRW50aXR5LFxuICAgICAgICAgICAgICAgICAgc291cmNlUmVzb3VyY2UsXG4gICAgICAgICAgICAgICAgICB1cmlSZXNvbHZlclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgICAgICAgIFwia21sLXN0eWxlTWFwLVwiICsga2V5LFxuICAgICAgICAgICAgICBcIktNTCAtIFVuc3VwcG9ydGVkIFN0eWxlTWFwIGtleTogXCIgKyBrZXlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIHByb21pc2VzID0gW107XG4gIHZhciBzdHlsZVVybE5vZGVzID0ga21sLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3R5bGVVcmxcIik7XG4gIHZhciBzdHlsZVVybE5vZGVzTGVuZ3RoID0gc3R5bGVVcmxOb2Rlcy5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBzdHlsZVVybE5vZGVzTGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc3R5bGVSZWZlcmVuY2UgPSBzdHlsZVVybE5vZGVzW2ldLnRleHRDb250ZW50O1xuICAgIGlmIChzdHlsZVJlZmVyZW5jZVswXSAhPT0gXCIjXCIpIHtcbiAgICAgIC8vQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBhbGwgbG9jYWwgc3R5bGVzIHNob3VsZCBzdGFydCB3aXRoIGEgI1xuICAgICAgLy9hbmQgZXZlcnl0aGluZyBlbHNlIGlzIGFuIGV4dGVybmFsIHN0eWxlIHRoYXQgaGFzIGEgIyBzZXBlcmF0aW5nXG4gICAgICAvL3RoZSBVUkwgb2YgdGhlIGRvY3VtZW50IGFuZCB0aGUgc3R5bGUuICBIb3dldmVyLCBHb29nbGUgRWFydGhcbiAgICAgIC8vYWxzbyBhY2NlcHRzIHN0eWxlVXJscyB3aXRob3V0IGEgIyBhcyBtZWFuaW5nIGEgbG9jYWwgc3R5bGUuXG4gICAgICB2YXIgdG9rZW5zID0gc3R5bGVSZWZlcmVuY2Uuc3BsaXQoXCIjXCIpO1xuICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdmFyIHVyaSA9IHRva2Vuc1swXTtcbiAgICAgICAgdmFyIHJlc291cmNlID0gc291cmNlUmVzb3VyY2UuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICAgICAgICB1cmw6IHVyaSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcHJvbWlzZXMucHVzaChcbiAgICAgICAgICBwcm9jZXNzRXh0ZXJuYWxTdHlsZXMoZGF0YVNvdXJjZSwgcmVzb3VyY2UsIHN0eWxlQ29sbGVjdGlvbilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJvbWlzZXM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURyb3BMaW5lKGVudGl0eUNvbGxlY3Rpb24sIGVudGl0eSwgc3R5bGVFbnRpdHkpIHtcbiAgdmFyIGVudGl0eVBvc2l0aW9uID0gbmV3IFJlZmVyZW5jZVByb3BlcnR5KGVudGl0eUNvbGxlY3Rpb24sIGVudGl0eS5pZCwgW1xuICAgIFwicG9zaXRpb25cIixcbiAgXSk7XG4gIHZhciBzdXJmYWNlUG9zaXRpb24gPSBuZXcgU2NhbGVkUG9zaXRpb25Qcm9wZXJ0eShlbnRpdHkucG9zaXRpb24pO1xuICBlbnRpdHkucG9seWxpbmUgPSBkZWZpbmVkKHN0eWxlRW50aXR5LnBvbHlsaW5lKVxuICAgID8gc3R5bGVFbnRpdHkucG9seWxpbmUuY2xvbmUoKVxuICAgIDogbmV3IFBvbHlsaW5lR3JhcGhpY3MoKTtcbiAgZW50aXR5LnBvbHlsaW5lLnBvc2l0aW9ucyA9IG5ldyBQb3NpdGlvblByb3BlcnR5QXJyYXkoW1xuICAgIGVudGl0eVBvc2l0aW9uLFxuICAgIHN1cmZhY2VQb3NpdGlvbixcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIGhlaWdodFJlZmVyZW5jZUZyb21BbHRpdHVkZU1vZGUoYWx0aXR1ZGVNb2RlLCBneEFsdGl0dWRlTW9kZSkge1xuICBpZiAoXG4gICAgKCFkZWZpbmVkKGFsdGl0dWRlTW9kZSkgJiYgIWRlZmluZWQoZ3hBbHRpdHVkZU1vZGUpKSB8fFxuICAgIGFsdGl0dWRlTW9kZSA9PT0gXCJjbGFtcFRvR3JvdW5kXCJcbiAgKSB7XG4gICAgcmV0dXJuIEhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQ7XG4gIH1cblxuICBpZiAoYWx0aXR1ZGVNb2RlID09PSBcInJlbGF0aXZlVG9Hcm91bmRcIikge1xuICAgIHJldHVybiBIZWlnaHRSZWZlcmVuY2UuUkVMQVRJVkVfVE9fR1JPVU5EO1xuICB9XG5cbiAgaWYgKGFsdGl0dWRlTW9kZSA9PT0gXCJhYnNvbHV0ZVwiKSB7XG4gICAgcmV0dXJuIEhlaWdodFJlZmVyZW5jZS5OT05FO1xuICB9XG5cbiAgaWYgKGd4QWx0aXR1ZGVNb2RlID09PSBcImNsYW1wVG9TZWFGbG9vclwiKSB7XG4gICAgb25lVGltZVdhcm5pbmcoXG4gICAgICBcImttbC1neDphbHRpdHVkZU1vZGUtY2xhbXBUb1NlYUZsb29yXCIsXG4gICAgICBcIktNTCAtIDxneDphbHRpdHVkZU1vZGU+OmNsYW1wVG9TZWFGbG9vciBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCwgdXNpbmcgPGttbDphbHRpdHVkZU1vZGU+OmNsYW1wVG9Hcm91bmQuXCJcbiAgICApO1xuICAgIHJldHVybiBIZWlnaHRSZWZlcmVuY2UuQ0xBTVBfVE9fR1JPVU5EO1xuICB9XG5cbiAgaWYgKGd4QWx0aXR1ZGVNb2RlID09PSBcInJlbGF0aXZlVG9TZWFGbG9vclwiKSB7XG4gICAgb25lVGltZVdhcm5pbmcoXG4gICAgICBcImttbC1neDphbHRpdHVkZU1vZGUtcmVsYXRpdmVUb1NlYUZsb29yXCIsXG4gICAgICBcIktNTCAtIDxneDphbHRpdHVkZU1vZGU+OnJlbGF0aXZlVG9TZWFGbG9vciBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCwgdXNpbmcgPGttbDphbHRpdHVkZU1vZGU+OnJlbGF0aXZlVG9Hcm91bmQuXCJcbiAgICApO1xuICAgIHJldHVybiBIZWlnaHRSZWZlcmVuY2UuUkVMQVRJVkVfVE9fR1JPVU5EO1xuICB9XG5cbiAgaWYgKGRlZmluZWQoYWx0aXR1ZGVNb2RlKSkge1xuICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgXCJrbWwtYWx0aXR1ZGVNb2RlLXVua25vd25cIixcbiAgICAgIFwiS01MIC0gVW5rbm93biA8a21sOmFsdGl0dWRlTW9kZT46XCIgK1xuICAgICAgICBhbHRpdHVkZU1vZGUgK1xuICAgICAgICBcIiwgdXNpbmcgPGttbDphbHRpdHVkZU1vZGU+OkNMQU1QX1RPX0dST1VORC5cIlxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgb25lVGltZVdhcm5pbmcoXG4gICAgICBcImttbC1neDphbHRpdHVkZU1vZGUtdW5rbm93blwiLFxuICAgICAgXCJLTUwgLSBVbmtub3duIDxneDphbHRpdHVkZU1vZGU+OlwiICtcbiAgICAgICAgZ3hBbHRpdHVkZU1vZGUgK1xuICAgICAgICBcIiwgdXNpbmcgPGttbDphbHRpdHVkZU1vZGU+OkNMQU1QX1RPX0dST1VORC5cIlxuICAgICk7XG4gIH1cblxuICAvLyBDbGFtcCB0byBncm91bmQgaXMgdGhlIGRlZmF1bHRcbiAgcmV0dXJuIEhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uUHJvcGVydHlGcm9tQWx0aXR1ZGVNb2RlKFxuICBwcm9wZXJ0eSxcbiAgYWx0aXR1ZGVNb2RlLFxuICBneEFsdGl0dWRlTW9kZVxuKSB7XG4gIGlmIChcbiAgICBneEFsdGl0dWRlTW9kZSA9PT0gXCJyZWxhdGl2ZVRvU2VhRmxvb3JcIiB8fFxuICAgIGFsdGl0dWRlTW9kZSA9PT0gXCJhYnNvbHV0ZVwiIHx8XG4gICAgYWx0aXR1ZGVNb2RlID09PSBcInJlbGF0aXZlVG9Hcm91bmRcIlxuICApIHtcbiAgICAvL0p1c3QgcmV0dXJuIHRoZSBlbGxpcHNvaWQgcmVmZXJlbmNlZCBwcm9wZXJ0eSB1bnRpbCB3ZSBzdXBwb3J0IE1TTFxuICAgIHJldHVybiBwcm9wZXJ0eTtcbiAgfVxuXG4gIGlmIChcbiAgICAoZGVmaW5lZChhbHRpdHVkZU1vZGUpICYmIGFsdGl0dWRlTW9kZSAhPT0gXCJjbGFtcFRvR3JvdW5kXCIpIHx8IC8vXG4gICAgKGRlZmluZWQoZ3hBbHRpdHVkZU1vZGUpICYmIGd4QWx0aXR1ZGVNb2RlICE9PSBcImNsYW1wVG9TZWFGbG9vclwiKVxuICApIHtcbiAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgIFwia21sLWFsdGl0dWRlTW9kZS11bmtub3duXCIsXG4gICAgICBcIktNTCAtIFVua25vd24gYWx0aXR1ZGVNb2RlOiBcIiArXG4gICAgICAgIGRlZmF1bHRWYWx1ZShhbHRpdHVkZU1vZGUsIGd4QWx0aXR1ZGVNb2RlKVxuICAgICk7XG4gIH1cblxuICAvLyBDbGFtcCB0byBncm91bmQgaXMgdGhlIGRlZmF1bHRcbiAgcmV0dXJuIG5ldyBTY2FsZWRQb3NpdGlvblByb3BlcnR5KHByb3BlcnR5KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25Qcm9wZXJ0eUFycmF5RnJvbUFsdGl0dWRlTW9kZShcbiAgcHJvcGVydGllcyxcbiAgYWx0aXR1ZGVNb2RlLFxuICBneEFsdGl0dWRlTW9kZSxcbiAgZWxsaXBzb2lkXG4pIHtcbiAgaWYgKCFkZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChcbiAgICBneEFsdGl0dWRlTW9kZSA9PT0gXCJyZWxhdGl2ZVRvU2VhRmxvb3JcIiB8fFxuICAgIGFsdGl0dWRlTW9kZSA9PT0gXCJhYnNvbHV0ZVwiIHx8XG4gICAgYWx0aXR1ZGVNb2RlID09PSBcInJlbGF0aXZlVG9Hcm91bmRcIlxuICApIHtcbiAgICAvL0p1c3QgcmV0dXJuIHRoZSBlbGxpcHNvaWQgcmVmZXJlbmNlZCBwcm9wZXJ0eSB1bnRpbCB3ZSBzdXBwb3J0IE1TTFxuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICB9XG5cbiAgaWYgKFxuICAgIChkZWZpbmVkKGFsdGl0dWRlTW9kZSkgJiYgYWx0aXR1ZGVNb2RlICE9PSBcImNsYW1wVG9Hcm91bmRcIikgfHwgLy9cbiAgICAoZGVmaW5lZChneEFsdGl0dWRlTW9kZSkgJiYgZ3hBbHRpdHVkZU1vZGUgIT09IFwiY2xhbXBUb1NlYUZsb29yXCIpXG4gICkge1xuICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgXCJrbWwtYWx0aXR1ZGVNb2RlLXVua25vd25cIixcbiAgICAgIFwiS01MIC0gVW5rbm93biBhbHRpdHVkZU1vZGU6IFwiICtcbiAgICAgICAgZGVmYXVsdFZhbHVlKGFsdGl0dWRlTW9kZSwgZ3hBbHRpdHVkZU1vZGUpXG4gICAgKTtcbiAgfVxuXG4gIC8vIENsYW1wIHRvIGdyb3VuZCBpcyB0aGUgZGVmYXVsdFxuICB2YXIgcHJvcGVydGllc0xlbmd0aCA9IHByb3BlcnRpZXMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXNMZW5ndGg7IGkrKykge1xuICAgIHZhciBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbaV07XG4gICAgZWxsaXBzb2lkLnNjYWxlVG9HZW9kZXRpY1N1cmZhY2UocHJvcGVydHksIHByb3BlcnR5KTtcbiAgfVxuICByZXR1cm4gcHJvcGVydGllcztcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1Bvc2l0aW9uR3JhcGhpY3MoXG4gIGRhdGFTb3VyY2UsXG4gIGVudGl0eSxcbiAgc3R5bGVFbnRpdHksXG4gIGhlaWdodFJlZmVyZW5jZVxuKSB7XG4gIHZhciBsYWJlbCA9IGVudGl0eS5sYWJlbDtcbiAgaWYgKCFkZWZpbmVkKGxhYmVsKSkge1xuICAgIGxhYmVsID0gZGVmaW5lZChzdHlsZUVudGl0eS5sYWJlbClcbiAgICAgID8gc3R5bGVFbnRpdHkubGFiZWwuY2xvbmUoKVxuICAgICAgOiBjcmVhdGVEZWZhdWx0TGFiZWwoKTtcbiAgICBlbnRpdHkubGFiZWwgPSBsYWJlbDtcbiAgfVxuICBsYWJlbC50ZXh0ID0gZW50aXR5Lm5hbWU7XG5cbiAgdmFyIGJpbGxib2FyZCA9IGVudGl0eS5iaWxsYm9hcmQ7XG4gIGlmICghZGVmaW5lZChiaWxsYm9hcmQpKSB7XG4gICAgYmlsbGJvYXJkID0gZGVmaW5lZChzdHlsZUVudGl0eS5iaWxsYm9hcmQpXG4gICAgICA/IHN0eWxlRW50aXR5LmJpbGxib2FyZC5jbG9uZSgpXG4gICAgICA6IGNyZWF0ZURlZmF1bHRCaWxsYm9hcmQoKTtcbiAgICBlbnRpdHkuYmlsbGJvYXJkID0gYmlsbGJvYXJkO1xuICB9XG5cbiAgaWYgKCFkZWZpbmVkKGJpbGxib2FyZC5pbWFnZSkpIHtcbiAgICBiaWxsYm9hcmQuaW1hZ2UgPSBkYXRhU291cmNlLl9waW5CdWlsZGVyLmZyb21Db2xvcihDb2xvci5ZRUxMT1csIDY0KTtcblxuICAgIC8vIElmIHRoZXJlIHdlcmUgZW1wdHkgPEljb24+IHRhZ3MgaW4gdGhlIEtNTCwgdGhlbiBiaWxsYm9hcmQuaW1hZ2Ugd2FzIHNldCB0byBmYWxzZSBhYm92ZVxuICAgIC8vIEhvd2V2ZXIsIGluIHRoaXMgY2FzZSwgdGhlIGZhbHNlIHZhbHVlIHdvdWxkIGhhdmUgYmVlbiBjb252ZXJ0ZWQgdG8gYSBwcm9wZXJ0eSBhZnRlcndhcmRzXG4gICAgLy8gVGh1cywgd2UgY2hlY2sgaWYgYmlsbGJvYXJkLmltYWdlIGlzIGRlZmluZWQgd2l0aCB2YWx1ZSBvZiBmYWxzZVxuICB9IGVsc2UgaWYgKCFiaWxsYm9hcmQuaW1hZ2UuZ2V0VmFsdWUoKSkge1xuICAgIGJpbGxib2FyZC5pbWFnZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBzY2FsZSA9IDEuMDtcbiAgaWYgKGRlZmluZWQoYmlsbGJvYXJkLnNjYWxlKSkge1xuICAgIHNjYWxlID0gYmlsbGJvYXJkLnNjYWxlLmdldFZhbHVlKCk7XG4gICAgaWYgKHNjYWxlICE9PSAwKSB7XG4gICAgICBsYWJlbC5waXhlbE9mZnNldCA9IG5ldyBDYXJ0ZXNpYW4yKHNjYWxlICogMTYgKyAxLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9NaW5vciB0d2Vha3MgdG8gYmV0dGVyIG1hdGNoIEdvb2dsZSBFYXJ0aC5cbiAgICAgIGxhYmVsLnBpeGVsT2Zmc2V0ID0gdW5kZWZpbmVkO1xuICAgICAgbGFiZWwuaG9yaXpvbnRhbE9yaWdpbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBpZiAoZGVmaW5lZChoZWlnaHRSZWZlcmVuY2UpICYmIGRhdGFTb3VyY2UuX2NsYW1wVG9Hcm91bmQpIHtcbiAgICBiaWxsYm9hcmQuaGVpZ2h0UmVmZXJlbmNlID0gaGVpZ2h0UmVmZXJlbmNlO1xuICAgIGxhYmVsLmhlaWdodFJlZmVyZW5jZSA9IGhlaWdodFJlZmVyZW5jZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzUGF0aEdyYXBoaWNzKGVudGl0eSwgc3R5bGVFbnRpdHkpIHtcbiAgdmFyIHBhdGggPSBlbnRpdHkucGF0aDtcbiAgaWYgKCFkZWZpbmVkKHBhdGgpKSB7XG4gICAgcGF0aCA9IG5ldyBQYXRoR3JhcGhpY3MoKTtcbiAgICBwYXRoLmxlYWRUaW1lID0gMDtcbiAgICBlbnRpdHkucGF0aCA9IHBhdGg7XG4gIH1cblxuICB2YXIgcG9seWxpbmUgPSBzdHlsZUVudGl0eS5wb2x5bGluZTtcbiAgaWYgKGRlZmluZWQocG9seWxpbmUpKSB7XG4gICAgcGF0aC5tYXRlcmlhbCA9IHBvbHlsaW5lLm1hdGVyaWFsO1xuICAgIHBhdGgud2lkdGggPSBwb2x5bGluZS53aWR0aDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzUG9pbnQoXG4gIGRhdGFTb3VyY2UsXG4gIGVudGl0eUNvbGxlY3Rpb24sXG4gIGdlb21ldHJ5Tm9kZSxcbiAgZW50aXR5LFxuICBzdHlsZUVudGl0eVxuKSB7XG4gIHZhciBjb29yZGluYXRlc1N0cmluZyA9IHF1ZXJ5U3RyaW5nVmFsdWUoXG4gICAgZ2VvbWV0cnlOb2RlLFxuICAgIFwiY29vcmRpbmF0ZXNcIixcbiAgICBuYW1lc3BhY2VzLmttbFxuICApO1xuICB2YXIgYWx0aXR1ZGVNb2RlID0gcXVlcnlTdHJpbmdWYWx1ZShcbiAgICBnZW9tZXRyeU5vZGUsXG4gICAgXCJhbHRpdHVkZU1vZGVcIixcbiAgICBuYW1lc3BhY2VzLmttbFxuICApO1xuICB2YXIgZ3hBbHRpdHVkZU1vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgIGdlb21ldHJ5Tm9kZSxcbiAgICBcImFsdGl0dWRlTW9kZVwiLFxuICAgIG5hbWVzcGFjZXMuZ3hcbiAgKTtcbiAgdmFyIGV4dHJ1ZGUgPSBxdWVyeUJvb2xlYW5WYWx1ZShnZW9tZXRyeU5vZGUsIFwiZXh0cnVkZVwiLCBuYW1lc3BhY2VzLmttbCk7XG4gIHZhciBlbGxpcHNvaWQgPSBkYXRhU291cmNlLl9lbGxpcHNvaWQ7XG4gIHZhciBwb3NpdGlvbiA9IHJlYWRDb29yZGluYXRlKGNvb3JkaW5hdGVzU3RyaW5nLCBlbGxpcHNvaWQpO1xuXG4gIGVudGl0eS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICBwcm9jZXNzUG9zaXRpb25HcmFwaGljcyhcbiAgICBkYXRhU291cmNlLFxuICAgIGVudGl0eSxcbiAgICBzdHlsZUVudGl0eSxcbiAgICBoZWlnaHRSZWZlcmVuY2VGcm9tQWx0aXR1ZGVNb2RlKGFsdGl0dWRlTW9kZSwgZ3hBbHRpdHVkZU1vZGUpXG4gICk7XG5cbiAgaWYgKGV4dHJ1ZGUgJiYgaXNFeHRydWRhYmxlKGFsdGl0dWRlTW9kZSwgZ3hBbHRpdHVkZU1vZGUpKSB7XG4gICAgY3JlYXRlRHJvcExpbmUoZW50aXR5Q29sbGVjdGlvbiwgZW50aXR5LCBzdHlsZUVudGl0eSk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0xpbmVTdHJpbmdPckxpbmVhclJpbmcoXG4gIGRhdGFTb3VyY2UsXG4gIGVudGl0eUNvbGxlY3Rpb24sXG4gIGdlb21ldHJ5Tm9kZSxcbiAgZW50aXR5LFxuICBzdHlsZUVudGl0eVxuKSB7XG4gIHZhciBjb29yZGluYXRlc05vZGUgPSBxdWVyeUZpcnN0Tm9kZShcbiAgICBnZW9tZXRyeU5vZGUsXG4gICAgXCJjb29yZGluYXRlc1wiLFxuICAgIG5hbWVzcGFjZXMua21sXG4gICk7XG4gIHZhciBhbHRpdHVkZU1vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgIGdlb21ldHJ5Tm9kZSxcbiAgICBcImFsdGl0dWRlTW9kZVwiLFxuICAgIG5hbWVzcGFjZXMua21sXG4gICk7XG4gIHZhciBneEFsdGl0dWRlTW9kZSA9IHF1ZXJ5U3RyaW5nVmFsdWUoXG4gICAgZ2VvbWV0cnlOb2RlLFxuICAgIFwiYWx0aXR1ZGVNb2RlXCIsXG4gICAgbmFtZXNwYWNlcy5neFxuICApO1xuICB2YXIgZXh0cnVkZSA9IHF1ZXJ5Qm9vbGVhblZhbHVlKGdlb21ldHJ5Tm9kZSwgXCJleHRydWRlXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgdmFyIHRlc3NlbGxhdGUgPSBxdWVyeUJvb2xlYW5WYWx1ZShcbiAgICBnZW9tZXRyeU5vZGUsXG4gICAgXCJ0ZXNzZWxsYXRlXCIsXG4gICAgbmFtZXNwYWNlcy5rbWxcbiAgKTtcbiAgdmFyIGNhbkV4dHJ1ZGUgPSBpc0V4dHJ1ZGFibGUoYWx0aXR1ZGVNb2RlLCBneEFsdGl0dWRlTW9kZSk7XG4gIHZhciB6SW5kZXggPSBxdWVyeU51bWVyaWNWYWx1ZShnZW9tZXRyeU5vZGUsIFwiZHJhd09yZGVyXCIsIG5hbWVzcGFjZXMuZ3gpO1xuXG4gIHZhciBlbGxpcHNvaWQgPSBkYXRhU291cmNlLl9lbGxpcHNvaWQ7XG4gIHZhciBjb29yZGluYXRlcyA9IHJlYWRDb29yZGluYXRlcyhjb29yZGluYXRlc05vZGUsIGVsbGlwc29pZCk7XG4gIHZhciBwb2x5bGluZSA9IHN0eWxlRW50aXR5LnBvbHlsaW5lO1xuICBpZiAoY2FuRXh0cnVkZSAmJiBleHRydWRlKSB7XG4gICAgdmFyIHdhbGwgPSBuZXcgV2FsbEdyYXBoaWNzKCk7XG4gICAgZW50aXR5LndhbGwgPSB3YWxsO1xuICAgIHdhbGwucG9zaXRpb25zID0gY29vcmRpbmF0ZXM7XG4gICAgdmFyIHBvbHlnb24gPSBzdHlsZUVudGl0eS5wb2x5Z29uO1xuXG4gICAgaWYgKGRlZmluZWQocG9seWdvbikpIHtcbiAgICAgIHdhbGwuZmlsbCA9IHBvbHlnb24uZmlsbDtcbiAgICAgIHdhbGwubWF0ZXJpYWwgPSBwb2x5Z29uLm1hdGVyaWFsO1xuICAgIH1cblxuICAgIC8vQWx3YXlzIG91dGxpbmUgd2FsbHMgc28gdGhleSBzaG93IHVwIGluIDJELlxuICAgIHdhbGwub3V0bGluZSA9IHRydWU7XG4gICAgaWYgKGRlZmluZWQocG9seWxpbmUpKSB7XG4gICAgICB3YWxsLm91dGxpbmVDb2xvciA9IGRlZmluZWQocG9seWxpbmUubWF0ZXJpYWwpXG4gICAgICAgID8gcG9seWxpbmUubWF0ZXJpYWwuY29sb3JcbiAgICAgICAgOiBDb2xvci5XSElURTtcbiAgICAgIHdhbGwub3V0bGluZVdpZHRoID0gcG9seWxpbmUud2lkdGg7XG4gICAgfSBlbHNlIGlmIChkZWZpbmVkKHBvbHlnb24pKSB7XG4gICAgICB3YWxsLm91dGxpbmVDb2xvciA9IGRlZmluZWQocG9seWdvbi5tYXRlcmlhbClcbiAgICAgICAgPyBwb2x5Z29uLm1hdGVyaWFsLmNvbG9yXG4gICAgICAgIDogQ29sb3IuV0hJVEU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRhdGFTb3VyY2UuX2NsYW1wVG9Hcm91bmQgJiYgIWNhbkV4dHJ1ZGUgJiYgdGVzc2VsbGF0ZSkge1xuICAgIHZhciBwb2x5bGluZUdyYXBoaWNzID0gbmV3IFBvbHlsaW5lR3JhcGhpY3MoKTtcbiAgICBwb2x5bGluZUdyYXBoaWNzLmNsYW1wVG9Hcm91bmQgPSB0cnVlO1xuICAgIGVudGl0eS5wb2x5bGluZSA9IHBvbHlsaW5lR3JhcGhpY3M7XG4gICAgcG9seWxpbmVHcmFwaGljcy5wb3NpdGlvbnMgPSBjb29yZGluYXRlcztcbiAgICBpZiAoZGVmaW5lZChwb2x5bGluZSkpIHtcbiAgICAgIHBvbHlsaW5lR3JhcGhpY3MubWF0ZXJpYWwgPSBkZWZpbmVkKHBvbHlsaW5lLm1hdGVyaWFsKVxuICAgICAgICA/IHBvbHlsaW5lLm1hdGVyaWFsLmNvbG9yLmdldFZhbHVlKElzbzg2MDEuTUlOSU1VTV9WQUxVRSlcbiAgICAgICAgOiBDb2xvci5XSElURTtcbiAgICAgIHBvbHlsaW5lR3JhcGhpY3Mud2lkdGggPSBkZWZhdWx0VmFsdWUocG9seWxpbmUud2lkdGgsIDEuMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvbHlsaW5lR3JhcGhpY3MubWF0ZXJpYWwgPSBDb2xvci5XSElURTtcbiAgICAgIHBvbHlsaW5lR3JhcGhpY3Mud2lkdGggPSAxLjA7XG4gICAgfVxuICAgIHBvbHlsaW5lR3JhcGhpY3MuekluZGV4ID0gekluZGV4O1xuICB9IGVsc2Uge1xuICAgIGlmIChkZWZpbmVkKHpJbmRleCkpIHtcbiAgICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgICBcImttbC1neDpkcmF3T3JkZXJcIixcbiAgICAgICAgXCJLTUwgLSBneDpkcmF3T3JkZXIgaXMgbm90IHN1cHBvcnRlZCBpbiBMaW5lU3RyaW5ncyB3aGVuIGNsYW1wVG9Hcm91bmQgaXMgZmFsc2VcIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGRhdGFTb3VyY2UuX2NsYW1wVG9Hcm91bmQgJiYgIXRlc3NlbGxhdGUpIHtcbiAgICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgICBcImttbC1saW5lLXRlc3NlbGF0ZVwiLFxuICAgICAgICBcIklnbm9yaW5nIGNsYW1wVG9Hcm91bmQgZm9yIEtNTCBsaW5lcyB3aXRob3V0IHRoZSB0ZXNzZWxsYXRlIGZsYWcuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcG9seWxpbmUgPSBkZWZpbmVkKHBvbHlsaW5lKSA/IHBvbHlsaW5lLmNsb25lKCkgOiBuZXcgUG9seWxpbmVHcmFwaGljcygpO1xuICAgIGVudGl0eS5wb2x5bGluZSA9IHBvbHlsaW5lO1xuICAgIHBvbHlsaW5lLnBvc2l0aW9ucyA9IGNyZWF0ZVBvc2l0aW9uUHJvcGVydHlBcnJheUZyb21BbHRpdHVkZU1vZGUoXG4gICAgICBjb29yZGluYXRlcyxcbiAgICAgIGFsdGl0dWRlTW9kZSxcbiAgICAgIGd4QWx0aXR1ZGVNb2RlLFxuICAgICAgZWxsaXBzb2lkXG4gICAgKTtcbiAgICBpZiAoIXRlc3NlbGxhdGUgfHwgY2FuRXh0cnVkZSkge1xuICAgICAgcG9seWxpbmUuYXJjVHlwZSA9IEFyY1R5cGUuTk9ORTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1BvbHlnb24oXG4gIGRhdGFTb3VyY2UsXG4gIGVudGl0eUNvbGxlY3Rpb24sXG4gIGdlb21ldHJ5Tm9kZSxcbiAgZW50aXR5LFxuICBzdHlsZUVudGl0eVxuKSB7XG4gIHZhciBvdXRlckJvdW5kYXJ5SXNOb2RlID0gcXVlcnlGaXJzdE5vZGUoXG4gICAgZ2VvbWV0cnlOb2RlLFxuICAgIFwib3V0ZXJCb3VuZGFyeUlzXCIsXG4gICAgbmFtZXNwYWNlcy5rbWxcbiAgKTtcbiAgdmFyIGxpbmVhclJpbmdOb2RlID0gcXVlcnlGaXJzdE5vZGUoXG4gICAgb3V0ZXJCb3VuZGFyeUlzTm9kZSxcbiAgICBcIkxpbmVhclJpbmdcIixcbiAgICBuYW1lc3BhY2VzLmttbFxuICApO1xuICB2YXIgY29vcmRpbmF0ZXNOb2RlID0gcXVlcnlGaXJzdE5vZGUoXG4gICAgbGluZWFyUmluZ05vZGUsXG4gICAgXCJjb29yZGluYXRlc1wiLFxuICAgIG5hbWVzcGFjZXMua21sXG4gICk7XG4gIHZhciBlbGxpcHNvaWQgPSBkYXRhU291cmNlLl9lbGxpcHNvaWQ7XG4gIHZhciBjb29yZGluYXRlcyA9IHJlYWRDb29yZGluYXRlcyhjb29yZGluYXRlc05vZGUsIGVsbGlwc29pZCk7XG4gIHZhciBleHRydWRlID0gcXVlcnlCb29sZWFuVmFsdWUoZ2VvbWV0cnlOb2RlLCBcImV4dHJ1ZGVcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICB2YXIgYWx0aXR1ZGVNb2RlID0gcXVlcnlTdHJpbmdWYWx1ZShcbiAgICBnZW9tZXRyeU5vZGUsXG4gICAgXCJhbHRpdHVkZU1vZGVcIixcbiAgICBuYW1lc3BhY2VzLmttbFxuICApO1xuICB2YXIgZ3hBbHRpdHVkZU1vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgIGdlb21ldHJ5Tm9kZSxcbiAgICBcImFsdGl0dWRlTW9kZVwiLFxuICAgIG5hbWVzcGFjZXMuZ3hcbiAgKTtcbiAgdmFyIGNhbkV4dHJ1ZGUgPSBpc0V4dHJ1ZGFibGUoYWx0aXR1ZGVNb2RlLCBneEFsdGl0dWRlTW9kZSk7XG5cbiAgdmFyIHBvbHlnb24gPSBkZWZpbmVkKHN0eWxlRW50aXR5LnBvbHlnb24pXG4gICAgPyBzdHlsZUVudGl0eS5wb2x5Z29uLmNsb25lKClcbiAgICA6IGNyZWF0ZURlZmF1bHRQb2x5Z29uKCk7XG5cbiAgdmFyIHBvbHlsaW5lID0gc3R5bGVFbnRpdHkucG9seWxpbmU7XG4gIGlmIChkZWZpbmVkKHBvbHlsaW5lKSkge1xuICAgIHBvbHlnb24ub3V0bGluZUNvbG9yID0gZGVmaW5lZChwb2x5bGluZS5tYXRlcmlhbClcbiAgICAgID8gcG9seWxpbmUubWF0ZXJpYWwuY29sb3JcbiAgICAgIDogQ29sb3IuV0hJVEU7XG4gICAgcG9seWdvbi5vdXRsaW5lV2lkdGggPSBwb2x5bGluZS53aWR0aDtcbiAgfVxuICBlbnRpdHkucG9seWdvbiA9IHBvbHlnb247XG5cbiAgaWYgKGNhbkV4dHJ1ZGUpIHtcbiAgICBwb2x5Z29uLnBlclBvc2l0aW9uSGVpZ2h0ID0gdHJ1ZTtcbiAgICBwb2x5Z29uLmV4dHJ1ZGVkSGVpZ2h0ID0gZXh0cnVkZSA/IDAgOiB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAoIWRhdGFTb3VyY2UuX2NsYW1wVG9Hcm91bmQpIHtcbiAgICBwb2x5Z29uLmhlaWdodCA9IDA7XG4gIH1cblxuICBpZiAoZGVmaW5lZChjb29yZGluYXRlcykpIHtcbiAgICB2YXIgaGllcmFyY2h5ID0gbmV3IFBvbHlnb25IaWVyYXJjaHkoY29vcmRpbmF0ZXMpO1xuICAgIHZhciBpbm5lckJvdW5kYXJ5SXNOb2RlcyA9IHF1ZXJ5Q2hpbGROb2RlcyhcbiAgICAgIGdlb21ldHJ5Tm9kZSxcbiAgICAgIFwiaW5uZXJCb3VuZGFyeUlzXCIsXG4gICAgICBuYW1lc3BhY2VzLmttbFxuICAgICk7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbm5lckJvdW5kYXJ5SXNOb2Rlcy5sZW5ndGg7IGorKykge1xuICAgICAgbGluZWFyUmluZ05vZGUgPSBxdWVyeUNoaWxkTm9kZXMoXG4gICAgICAgIGlubmVyQm91bmRhcnlJc05vZGVzW2pdLFxuICAgICAgICBcIkxpbmVhclJpbmdcIixcbiAgICAgICAgbmFtZXNwYWNlcy5rbWxcbiAgICAgICk7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxpbmVhclJpbmdOb2RlLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzTm9kZSA9IHF1ZXJ5Rmlyc3ROb2RlKFxuICAgICAgICAgIGxpbmVhclJpbmdOb2RlW2tdLFxuICAgICAgICAgIFwiY29vcmRpbmF0ZXNcIixcbiAgICAgICAgICBuYW1lc3BhY2VzLmttbFxuICAgICAgICApO1xuICAgICAgICBjb29yZGluYXRlcyA9IHJlYWRDb29yZGluYXRlcyhjb29yZGluYXRlc05vZGUsIGVsbGlwc29pZCk7XG4gICAgICAgIGlmIChkZWZpbmVkKGNvb3JkaW5hdGVzKSkge1xuICAgICAgICAgIGhpZXJhcmNoeS5ob2xlcy5wdXNoKG5ldyBQb2x5Z29uSGllcmFyY2h5KGNvb3JkaW5hdGVzKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcG9seWdvbi5oaWVyYXJjaHkgPSBoaWVyYXJjaHk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1RyYWNrKFxuICBkYXRhU291cmNlLFxuICBlbnRpdHlDb2xsZWN0aW9uLFxuICBnZW9tZXRyeU5vZGUsXG4gIGVudGl0eSxcbiAgc3R5bGVFbnRpdHlcbikge1xuICB2YXIgYWx0aXR1ZGVNb2RlID0gcXVlcnlTdHJpbmdWYWx1ZShcbiAgICBnZW9tZXRyeU5vZGUsXG4gICAgXCJhbHRpdHVkZU1vZGVcIixcbiAgICBuYW1lc3BhY2VzLmttbFxuICApO1xuICB2YXIgZ3hBbHRpdHVkZU1vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgIGdlb21ldHJ5Tm9kZSxcbiAgICBcImFsdGl0dWRlTW9kZVwiLFxuICAgIG5hbWVzcGFjZXMuZ3hcbiAgKTtcbiAgdmFyIGNvb3JkTm9kZXMgPSBxdWVyeUNoaWxkTm9kZXMoZ2VvbWV0cnlOb2RlLCBcImNvb3JkXCIsIG5hbWVzcGFjZXMuZ3gpO1xuICB2YXIgYW5nbGVOb2RlcyA9IHF1ZXJ5Q2hpbGROb2RlcyhnZW9tZXRyeU5vZGUsIFwiYW5nbGVzXCIsIG5hbWVzcGFjZXMuZ3gpO1xuICB2YXIgdGltZU5vZGVzID0gcXVlcnlDaGlsZE5vZGVzKGdlb21ldHJ5Tm9kZSwgXCJ3aGVuXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgdmFyIGV4dHJ1ZGUgPSBxdWVyeUJvb2xlYW5WYWx1ZShnZW9tZXRyeU5vZGUsIFwiZXh0cnVkZVwiLCBuYW1lc3BhY2VzLmttbCk7XG4gIHZhciBjYW5FeHRydWRlID0gaXNFeHRydWRhYmxlKGFsdGl0dWRlTW9kZSwgZ3hBbHRpdHVkZU1vZGUpO1xuICB2YXIgZWxsaXBzb2lkID0gZGF0YVNvdXJjZS5fZWxsaXBzb2lkO1xuXG4gIGlmIChhbmdsZU5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgIFwia21sLWd4OmFuZ2xlc1wiLFxuICAgICAgXCJLTUwgLSBneDphbmdsZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gZ3g6VHJhY2tzXCJcbiAgICApO1xuICB9XG5cbiAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGNvb3JkTm9kZXMubGVuZ3RoLCB0aW1lTm9kZXMubGVuZ3RoKTtcbiAgdmFyIGNvb3JkaW5hdGVzID0gW107XG4gIHZhciB0aW1lcyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBvc2l0aW9uID0gcmVhZENvb3JkaW5hdGUoY29vcmROb2Rlc1tpXS50ZXh0Q29udGVudCwgZWxsaXBzb2lkKTtcbiAgICBjb29yZGluYXRlcy5wdXNoKHBvc2l0aW9uKTtcbiAgICB0aW1lcy5wdXNoKEp1bGlhbkRhdGUuZnJvbUlzbzg2MDEodGltZU5vZGVzW2ldLnRleHRDb250ZW50KSk7XG4gIH1cbiAgdmFyIHByb3BlcnR5ID0gbmV3IFNhbXBsZWRQb3NpdGlvblByb3BlcnR5KCk7XG4gIHByb3BlcnR5LmFkZFNhbXBsZXModGltZXMsIGNvb3JkaW5hdGVzKTtcbiAgZW50aXR5LnBvc2l0aW9uID0gcHJvcGVydHk7XG4gIHByb2Nlc3NQb3NpdGlvbkdyYXBoaWNzKFxuICAgIGRhdGFTb3VyY2UsXG4gICAgZW50aXR5LFxuICAgIHN0eWxlRW50aXR5LFxuICAgIGhlaWdodFJlZmVyZW5jZUZyb21BbHRpdHVkZU1vZGUoYWx0aXR1ZGVNb2RlLCBneEFsdGl0dWRlTW9kZSlcbiAgKTtcbiAgcHJvY2Vzc1BhdGhHcmFwaGljcyhlbnRpdHksIHN0eWxlRW50aXR5KTtcblxuICBlbnRpdHkuYXZhaWxhYmlsaXR5ID0gbmV3IFRpbWVJbnRlcnZhbENvbGxlY3Rpb24oKTtcblxuICBpZiAodGltZU5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICBlbnRpdHkuYXZhaWxhYmlsaXR5LmFkZEludGVydmFsKFxuICAgICAgbmV3IFRpbWVJbnRlcnZhbCh7XG4gICAgICAgIHN0YXJ0OiB0aW1lc1swXSxcbiAgICAgICAgc3RvcDogdGltZXNbdGltZXMubGVuZ3RoIC0gMV0sXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBpZiAoY2FuRXh0cnVkZSAmJiBleHRydWRlKSB7XG4gICAgY3JlYXRlRHJvcExpbmUoZW50aXR5Q29sbGVjdGlvbiwgZW50aXR5LCBzdHlsZUVudGl0eSk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gYWRkVG9NdWx0aVRyYWNrKFxuICB0aW1lcyxcbiAgcG9zaXRpb25zLFxuICBjb21wb3NpdGUsXG4gIGF2YWlsYWJpbGl0eSxcbiAgZHJvcFNob3dQcm9wZXJ0eSxcbiAgZXh0cnVkZSxcbiAgYWx0aXR1ZGVNb2RlLFxuICBneEFsdGl0dWRlTW9kZSxcbiAgaW5jbHVkZUVuZFBvaW50c1xuKSB7XG4gIHZhciBzdGFydCA9IHRpbWVzWzBdO1xuICB2YXIgc3RvcCA9IHRpbWVzW3RpbWVzLmxlbmd0aCAtIDFdO1xuXG4gIHZhciBkYXRhID0gbmV3IFNhbXBsZWRQb3NpdGlvblByb3BlcnR5KCk7XG4gIGRhdGEuYWRkU2FtcGxlcyh0aW1lcywgcG9zaXRpb25zKTtcblxuICBjb21wb3NpdGUuaW50ZXJ2YWxzLmFkZEludGVydmFsKFxuICAgIG5ldyBUaW1lSW50ZXJ2YWwoe1xuICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgc3RvcDogc3RvcCxcbiAgICAgIGlzU3RhcnRJbmNsdWRlZDogaW5jbHVkZUVuZFBvaW50cyxcbiAgICAgIGlzU3RvcEluY2x1ZGVkOiBpbmNsdWRlRW5kUG9pbnRzLFxuICAgICAgZGF0YTogY3JlYXRlUG9zaXRpb25Qcm9wZXJ0eUZyb21BbHRpdHVkZU1vZGUoXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGFsdGl0dWRlTW9kZSxcbiAgICAgICAgZ3hBbHRpdHVkZU1vZGVcbiAgICAgICksXG4gICAgfSlcbiAgKTtcbiAgYXZhaWxhYmlsaXR5LmFkZEludGVydmFsKFxuICAgIG5ldyBUaW1lSW50ZXJ2YWwoe1xuICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgc3RvcDogc3RvcCxcbiAgICAgIGlzU3RhcnRJbmNsdWRlZDogaW5jbHVkZUVuZFBvaW50cyxcbiAgICAgIGlzU3RvcEluY2x1ZGVkOiBpbmNsdWRlRW5kUG9pbnRzLFxuICAgIH0pXG4gICk7XG4gIGRyb3BTaG93UHJvcGVydHkuaW50ZXJ2YWxzLmFkZEludGVydmFsKFxuICAgIG5ldyBUaW1lSW50ZXJ2YWwoe1xuICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgc3RvcDogc3RvcCxcbiAgICAgIGlzU3RhcnRJbmNsdWRlZDogaW5jbHVkZUVuZFBvaW50cyxcbiAgICAgIGlzU3RvcEluY2x1ZGVkOiBpbmNsdWRlRW5kUG9pbnRzLFxuICAgICAgZGF0YTogZXh0cnVkZSxcbiAgICB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzTXVsdGlUcmFjayhcbiAgZGF0YVNvdXJjZSxcbiAgZW50aXR5Q29sbGVjdGlvbixcbiAgZ2VvbWV0cnlOb2RlLFxuICBlbnRpdHksXG4gIHN0eWxlRW50aXR5XG4pIHtcbiAgLy8gTXVsdGl0cmFjayBvcHRpb25zIGRvIG5vdCB3b3JrIGluIEdFIGFzIGRldGFpbGVkIGluIHRoZSBzcGVjLFxuICAvLyByYXRoZXIgdGhhbiBhbHRpdHVkZU1vZGUgYmVpbmcgYXQgdGhlIE11bHRpVHJhY2sgbGV2ZWwsXG4gIC8vIEdFIGp1c3QgZGVmZXJzIGFsbCBzZXR0aW5ncyB0byB0aGUgdW5kZXJseWluZyB0cmFjay5cblxuICB2YXIgaW50ZXJwb2xhdGUgPSBxdWVyeUJvb2xlYW5WYWx1ZShcbiAgICBnZW9tZXRyeU5vZGUsXG4gICAgXCJpbnRlcnBvbGF0ZVwiLFxuICAgIG5hbWVzcGFjZXMuZ3hcbiAgKTtcbiAgdmFyIHRyYWNrTm9kZXMgPSBxdWVyeUNoaWxkTm9kZXMoZ2VvbWV0cnlOb2RlLCBcIlRyYWNrXCIsIG5hbWVzcGFjZXMuZ3gpO1xuXG4gIHZhciB0aW1lcztcbiAgdmFyIGxhc3RTdG9wO1xuICB2YXIgbGFzdFN0b3BQb3NpdGlvbjtcbiAgdmFyIG5lZWREcm9wTGluZSA9IGZhbHNlO1xuICB2YXIgZHJvcFNob3dQcm9wZXJ0eSA9IG5ldyBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uUHJvcGVydHkoKTtcbiAgdmFyIGF2YWlsYWJpbGl0eSA9IG5ldyBUaW1lSW50ZXJ2YWxDb2xsZWN0aW9uKCk7XG4gIHZhciBjb21wb3NpdGUgPSBuZXcgQ29tcG9zaXRlUG9zaXRpb25Qcm9wZXJ0eSgpO1xuICB2YXIgZWxsaXBzb2lkID0gZGF0YVNvdXJjZS5fZWxsaXBzb2lkO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gdHJhY2tOb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciB0cmFja05vZGUgPSB0cmFja05vZGVzW2ldO1xuICAgIHZhciB0aW1lTm9kZXMgPSBxdWVyeUNoaWxkTm9kZXModHJhY2tOb2RlLCBcIndoZW5cIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgIHZhciBjb29yZE5vZGVzID0gcXVlcnlDaGlsZE5vZGVzKHRyYWNrTm9kZSwgXCJjb29yZFwiLCBuYW1lc3BhY2VzLmd4KTtcbiAgICB2YXIgYWx0aXR1ZGVNb2RlID0gcXVlcnlTdHJpbmdWYWx1ZShcbiAgICAgIHRyYWNrTm9kZSxcbiAgICAgIFwiYWx0aXR1ZGVNb2RlXCIsXG4gICAgICBuYW1lc3BhY2VzLmttbFxuICAgICk7XG4gICAgdmFyIGd4QWx0aXR1ZGVNb2RlID0gcXVlcnlTdHJpbmdWYWx1ZShcbiAgICAgIHRyYWNrTm9kZSxcbiAgICAgIFwiYWx0aXR1ZGVNb2RlXCIsXG4gICAgICBuYW1lc3BhY2VzLmd4XG4gICAgKTtcbiAgICB2YXIgY2FuRXh0cnVkZSA9IGlzRXh0cnVkYWJsZShhbHRpdHVkZU1vZGUsIGd4QWx0aXR1ZGVNb2RlKTtcbiAgICB2YXIgZXh0cnVkZSA9IHF1ZXJ5Qm9vbGVhblZhbHVlKHRyYWNrTm9kZSwgXCJleHRydWRlXCIsIG5hbWVzcGFjZXMua21sKTtcblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1pbihjb29yZE5vZGVzLmxlbmd0aCwgdGltZU5vZGVzLmxlbmd0aCk7XG5cbiAgICB2YXIgcG9zaXRpb25zID0gW107XG4gICAgdGltZXMgPSBbXTtcbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGxlbmd0aDsgeCsrKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSByZWFkQ29vcmRpbmF0ZShjb29yZE5vZGVzW3hdLnRleHRDb250ZW50LCBlbGxpcHNvaWQpO1xuICAgICAgcG9zaXRpb25zLnB1c2gocG9zaXRpb24pO1xuICAgICAgdGltZXMucHVzaChKdWxpYW5EYXRlLmZyb21Jc284NjAxKHRpbWVOb2Rlc1t4XS50ZXh0Q29udGVudCkpO1xuICAgIH1cblxuICAgIGlmIChpbnRlcnBvbGF0ZSkge1xuICAgICAgLy9JZiB3ZSBhcmUgaW50ZXJwb2xhdGluZywgdGhlbiB3ZSBuZWVkIHRvIGZpbGwgaW4gdGhlIGVuZCBvZlxuICAgICAgLy90aGUgbGFzdCB0cmFjayBhbmQgdGhlIGJlZ2lubmluZyBvZiB0aGlzIG9uZSB3aXRoIGEgc2FtcGxlZFxuICAgICAgLy9wcm9wZXJ0eS4gIEZyb20gdGVzdGluZyBpbiBHb29nbGUgRWFydGgsIHRoaXMgcHJvcGVydHlcbiAgICAgIC8vaXMgbmV2ZXIgZXh0cnVkZWQgYW5kIGFsd2F5cyBhYnNvbHV0ZS5cbiAgICAgIGlmIChkZWZpbmVkKGxhc3RTdG9wKSkge1xuICAgICAgICBhZGRUb011bHRpVHJhY2soXG4gICAgICAgICAgW2xhc3RTdG9wLCB0aW1lc1swXV0sXG4gICAgICAgICAgW2xhc3RTdG9wUG9zaXRpb24sIHBvc2l0aW9uc1swXV0sXG4gICAgICAgICAgY29tcG9zaXRlLFxuICAgICAgICAgIGF2YWlsYWJpbGl0eSxcbiAgICAgICAgICBkcm9wU2hvd1Byb3BlcnR5LFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIFwiYWJzb2x1dGVcIixcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGxhc3RTdG9wID0gdGltZXNbbGVuZ3RoIC0gMV07XG4gICAgICBsYXN0U3RvcFBvc2l0aW9uID0gcG9zaXRpb25zW3Bvc2l0aW9ucy5sZW5ndGggLSAxXTtcbiAgICB9XG5cbiAgICBhZGRUb011bHRpVHJhY2soXG4gICAgICB0aW1lcyxcbiAgICAgIHBvc2l0aW9ucyxcbiAgICAgIGNvbXBvc2l0ZSxcbiAgICAgIGF2YWlsYWJpbGl0eSxcbiAgICAgIGRyb3BTaG93UHJvcGVydHksXG4gICAgICBjYW5FeHRydWRlICYmIGV4dHJ1ZGUsXG4gICAgICBhbHRpdHVkZU1vZGUsXG4gICAgICBneEFsdGl0dWRlTW9kZSxcbiAgICAgIHRydWVcbiAgICApO1xuICAgIG5lZWREcm9wTGluZSA9IG5lZWREcm9wTGluZSB8fCAoY2FuRXh0cnVkZSAmJiBleHRydWRlKTtcbiAgfVxuXG4gIGVudGl0eS5hdmFpbGFiaWxpdHkgPSBhdmFpbGFiaWxpdHk7XG4gIGVudGl0eS5wb3NpdGlvbiA9IGNvbXBvc2l0ZTtcbiAgcHJvY2Vzc1Bvc2l0aW9uR3JhcGhpY3MoZGF0YVNvdXJjZSwgZW50aXR5LCBzdHlsZUVudGl0eSk7XG4gIHByb2Nlc3NQYXRoR3JhcGhpY3MoZW50aXR5LCBzdHlsZUVudGl0eSk7XG4gIGlmIChuZWVkRHJvcExpbmUpIHtcbiAgICBjcmVhdGVEcm9wTGluZShlbnRpdHlDb2xsZWN0aW9uLCBlbnRpdHksIHN0eWxlRW50aXR5KTtcbiAgICBlbnRpdHkucG9seWxpbmUuc2hvdyA9IGRyb3BTaG93UHJvcGVydHk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIGdlb21ldHJ5VHlwZXMgPSB7XG4gIFBvaW50OiBwcm9jZXNzUG9pbnQsXG4gIExpbmVTdHJpbmc6IHByb2Nlc3NMaW5lU3RyaW5nT3JMaW5lYXJSaW5nLFxuICBMaW5lYXJSaW5nOiBwcm9jZXNzTGluZVN0cmluZ09yTGluZWFyUmluZyxcbiAgUG9seWdvbjogcHJvY2Vzc1BvbHlnb24sXG4gIFRyYWNrOiBwcm9jZXNzVHJhY2ssXG4gIE11bHRpVHJhY2s6IHByb2Nlc3NNdWx0aVRyYWNrLFxuICBNdWx0aUdlb21ldHJ5OiBwcm9jZXNzTXVsdGlHZW9tZXRyeSxcbiAgTW9kZWw6IHByb2Nlc3NVbnN1cHBvcnRlZEdlb21ldHJ5LFxufTtcblxuZnVuY3Rpb24gcHJvY2Vzc011bHRpR2VvbWV0cnkoXG4gIGRhdGFTb3VyY2UsXG4gIGVudGl0eUNvbGxlY3Rpb24sXG4gIGdlb21ldHJ5Tm9kZSxcbiAgZW50aXR5LFxuICBzdHlsZUVudGl0eSxcbiAgY29udGV4dFxuKSB7XG4gIHZhciBjaGlsZE5vZGVzID0gZ2VvbWV0cnlOb2RlLmNoaWxkTm9kZXM7XG4gIHZhciBoYXNHZW9tZXRyeSA9IGZhbHNlO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBjaGlsZE5vZGUgPSBjaGlsZE5vZGVzLml0ZW0oaSk7XG4gICAgdmFyIGdlb21ldHJ5UHJvY2Vzc29yID0gZ2VvbWV0cnlUeXBlc1tjaGlsZE5vZGUubG9jYWxOYW1lXTtcbiAgICBpZiAoZGVmaW5lZChnZW9tZXRyeVByb2Nlc3NvcikpIHtcbiAgICAgIHZhciBjaGlsZEVudGl0eSA9IGNyZWF0ZUVudGl0eShjaGlsZE5vZGUsIGVudGl0eUNvbGxlY3Rpb24sIGNvbnRleHQpO1xuICAgICAgY2hpbGRFbnRpdHkucGFyZW50ID0gZW50aXR5O1xuICAgICAgY2hpbGRFbnRpdHkubmFtZSA9IGVudGl0eS5uYW1lO1xuICAgICAgY2hpbGRFbnRpdHkuYXZhaWxhYmlsaXR5ID0gZW50aXR5LmF2YWlsYWJpbGl0eTtcbiAgICAgIGNoaWxkRW50aXR5LmRlc2NyaXB0aW9uID0gZW50aXR5LmRlc2NyaXB0aW9uO1xuICAgICAgY2hpbGRFbnRpdHkua21sID0gZW50aXR5LmttbDtcbiAgICAgIGlmIChcbiAgICAgICAgZ2VvbWV0cnlQcm9jZXNzb3IoXG4gICAgICAgICAgZGF0YVNvdXJjZSxcbiAgICAgICAgICBlbnRpdHlDb2xsZWN0aW9uLFxuICAgICAgICAgIGNoaWxkTm9kZSxcbiAgICAgICAgICBjaGlsZEVudGl0eSxcbiAgICAgICAgICBzdHlsZUVudGl0eVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgaGFzR2VvbWV0cnkgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBoYXNHZW9tZXRyeTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1Vuc3VwcG9ydGVkR2VvbWV0cnkoXG4gIGRhdGFTb3VyY2UsXG4gIGVudGl0eUNvbGxlY3Rpb24sXG4gIGdlb21ldHJ5Tm9kZSxcbiAgZW50aXR5LFxuICBzdHlsZUVudGl0eVxuKSB7XG4gIG9uZVRpbWVXYXJuaW5nKFxuICAgIFwia21sLXVuc3VwcG9ydGVkR2VvbWV0cnlcIixcbiAgICBcIktNTCAtIFVuc3VwcG9ydGVkIGdlb21ldHJ5OiBcIiArIGdlb21ldHJ5Tm9kZS5sb2NhbE5hbWVcbiAgKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzRXh0ZW5kZWREYXRhKG5vZGUsIGVudGl0eSkge1xuICB2YXIgZXh0ZW5kZWREYXRhTm9kZSA9IHF1ZXJ5Rmlyc3ROb2RlKG5vZGUsIFwiRXh0ZW5kZWREYXRhXCIsIG5hbWVzcGFjZXMua21sKTtcblxuICBpZiAoIWRlZmluZWQoZXh0ZW5kZWREYXRhTm9kZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKGRlZmluZWQocXVlcnlGaXJzdE5vZGUoZXh0ZW5kZWREYXRhTm9kZSwgXCJTY2hlbWFEYXRhXCIsIG5hbWVzcGFjZXMua21sKSkpIHtcbiAgICBvbmVUaW1lV2FybmluZyhcImttbC1zY2hlbWFEYXRhXCIsIFwiS01MIC0gU2NoZW1hRGF0YSBpcyB1bnN1cHBvcnRlZFwiKTtcbiAgfVxuICBpZiAoZGVmaW5lZChxdWVyeVN0cmluZ0F0dHJpYnV0ZShleHRlbmRlZERhdGFOb2RlLCBcInhtbG5zOnByZWZpeFwiKSkpIHtcbiAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgIFwia21sLWV4dGVuZGVkRGF0YVwiLFxuICAgICAgXCJLTUwgLSBFeHRlbmRlZERhdGEgd2l0aCB4bWxuczpwcmVmaXggaXMgdW5zdXBwb3J0ZWRcIlxuICAgICk7XG4gIH1cblxuICB2YXIgcmVzdWx0ID0ge307XG4gIHZhciBkYXRhTm9kZXMgPSBxdWVyeUNoaWxkTm9kZXMoZXh0ZW5kZWREYXRhTm9kZSwgXCJEYXRhXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgaWYgKGRlZmluZWQoZGF0YU5vZGVzKSkge1xuICAgIHZhciBsZW5ndGggPSBkYXRhTm9kZXMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkYXRhTm9kZSA9IGRhdGFOb2Rlc1tpXTtcbiAgICAgIHZhciBuYW1lID0gcXVlcnlTdHJpbmdBdHRyaWJ1dGUoZGF0YU5vZGUsIFwibmFtZVwiKTtcbiAgICAgIGlmIChkZWZpbmVkKG5hbWUpKSB7XG4gICAgICAgIHJlc3VsdFtuYW1lXSA9IHtcbiAgICAgICAgICBkaXNwbGF5TmFtZTogcXVlcnlTdHJpbmdWYWx1ZShcbiAgICAgICAgICAgIGRhdGFOb2RlLFxuICAgICAgICAgICAgXCJkaXNwbGF5TmFtZVwiLFxuICAgICAgICAgICAgbmFtZXNwYWNlcy5rbWxcbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlOiBxdWVyeVN0cmluZ1ZhbHVlKGRhdGFOb2RlLCBcInZhbHVlXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZW50aXR5LmttbC5leHRlbmRlZERhdGEgPSByZXN1bHQ7XG59XG5cbnZhciBzY3JhdGNoRGl2O1xuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBzY3JhdGNoRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0Rlc2NyaXB0aW9uKFxuICBub2RlLFxuICBlbnRpdHksXG4gIHN0eWxlRW50aXR5LFxuICB1cmlSZXNvbHZlcixcbiAgc291cmNlUmVzb3VyY2Vcbikge1xuICB2YXIgaTtcbiAgdmFyIGtleTtcbiAgdmFyIGtleXM7XG5cbiAgdmFyIGttbERhdGEgPSBlbnRpdHkua21sO1xuICB2YXIgZXh0ZW5kZWREYXRhID0ga21sRGF0YS5leHRlbmRlZERhdGE7XG4gIHZhciBkZXNjcmlwdGlvbiA9IHF1ZXJ5U3RyaW5nVmFsdWUobm9kZSwgXCJkZXNjcmlwdGlvblwiLCBuYW1lc3BhY2VzLmttbCk7XG5cbiAgdmFyIGJhbGxvb25TdHlsZSA9IGRlZmF1bHRWYWx1ZShcbiAgICBlbnRpdHkuYmFsbG9vblN0eWxlLFxuICAgIHN0eWxlRW50aXR5LmJhbGxvb25TdHlsZVxuICApO1xuXG4gIHZhciBiYWNrZ3JvdW5kID0gQ29sb3IuV0hJVEU7XG4gIHZhciBmb3JlZ3JvdW5kID0gQ29sb3IuQkxBQ0s7XG4gIHZhciB0ZXh0ID0gZGVzY3JpcHRpb247XG5cbiAgaWYgKGRlZmluZWQoYmFsbG9vblN0eWxlKSkge1xuICAgIGJhY2tncm91bmQgPSBkZWZhdWx0VmFsdWUoYmFsbG9vblN0eWxlLmJnQ29sb3IsIENvbG9yLldISVRFKTtcbiAgICBmb3JlZ3JvdW5kID0gZGVmYXVsdFZhbHVlKGJhbGxvb25TdHlsZS50ZXh0Q29sb3IsIENvbG9yLkJMQUNLKTtcbiAgICB0ZXh0ID0gZGVmYXVsdFZhbHVlKGJhbGxvb25TdHlsZS50ZXh0LCBkZXNjcmlwdGlvbik7XG4gIH1cblxuICB2YXIgdmFsdWU7XG4gIGlmIChkZWZpbmVkKHRleHQpKSB7XG4gICAgdGV4dCA9IHRleHQucmVwbGFjZShcIiRbbmFtZV1cIiwgZGVmYXVsdFZhbHVlKGVudGl0eS5uYW1lLCBcIlwiKSk7XG4gICAgdGV4dCA9IHRleHQucmVwbGFjZShcIiRbZGVzY3JpcHRpb25dXCIsIGRlZmF1bHRWYWx1ZShkZXNjcmlwdGlvbiwgXCJcIikpO1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoXCIkW2FkZHJlc3NdXCIsIGRlZmF1bHRWYWx1ZShrbWxEYXRhLmFkZHJlc3MsIFwiXCIpKTtcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKFwiJFtTbmlwcGV0XVwiLCBkZWZhdWx0VmFsdWUoa21sRGF0YS5zbmlwcGV0LCBcIlwiKSk7XG4gICAgdGV4dCA9IHRleHQucmVwbGFjZShcIiRbaWRdXCIsIGVudGl0eS5pZCk7XG5cbiAgICAvL1doaWxlIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgYnkgdGhlIE9HQyBzcGVjLCBpbiBHb29nbGUgRWFydGhcbiAgICAvL1RoZSBhcHBlYXJhbmNlIG9mIGdlRGlyZWN0aW9ucyBhZGRzIHRoZSBkaXJlY3Rpb25zIHRvL2Zyb20gbGlua3NcbiAgICAvL1dlIHNpbXBseSByZXBsYWNlIHRoaXMgc3RyaW5nIHdpdGggbm90aGluZy5cbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKFwiJFtnZURpcmVjdGlvbnNdXCIsIFwiXCIpO1xuXG4gICAgaWYgKGRlZmluZWQoZXh0ZW5kZWREYXRhKSkge1xuICAgICAgdmFyIG1hdGNoZXMgPSB0ZXh0Lm1hdGNoKC9cXCRcXFsuKz9cXF0vZyk7XG4gICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB0b2tlbiA9IG1hdGNoZXNbaV07XG4gICAgICAgICAgdmFyIHByb3BlcnR5TmFtZSA9IHRva2VuLnN1YnN0cigyLCB0b2tlbi5sZW5ndGggLSAzKTtcbiAgICAgICAgICB2YXIgaXNEaXNwbGF5TmFtZSA9IC9cXC9kaXNwbGF5TmFtZSQvLnRlc3QocHJvcGVydHlOYW1lKTtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWUucmVwbGFjZSgvXFwvZGlzcGxheU5hbWUkLywgXCJcIik7XG5cbiAgICAgICAgICB2YWx1ZSA9IGV4dGVuZGVkRGF0YVtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBpc0Rpc3BsYXlOYW1lID8gdmFsdWUuZGlzcGxheU5hbWUgOiB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHRva2VuLCBkZWZhdWx0VmFsdWUodmFsdWUsIFwiXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChleHRlbmRlZERhdGEpKSB7XG4gICAgLy9JZiBubyBkZXNjcmlwdGlvbiBleGlzdHMsIGJ1aWxkIGEgdGFibGUgb3V0IG9mIHRoZSBleHRlbmRlZCBkYXRhXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGV4dGVuZGVkRGF0YSk7XG4gICAgaWYgKGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgdGV4dCA9XG4gICAgICAgICc8dGFibGUgY2xhc3M9XCJjZXNpdW0taW5mb0JveC1kZWZhdWx0VGFibGUgY2VzaXVtLWluZm9Cb3gtZGVmYXVsdFRhYmxlLWxpZ2h0ZXJcIj48dGJvZHk+JztcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhbHVlID0gZXh0ZW5kZWREYXRhW2tleV07XG4gICAgICAgIHRleHQgKz1cbiAgICAgICAgICBcIjx0cj48dGg+XCIgK1xuICAgICAgICAgIGRlZmF1bHRWYWx1ZSh2YWx1ZS5kaXNwbGF5TmFtZSwga2V5KSArXG4gICAgICAgICAgXCI8L3RoPjx0ZD5cIiArXG4gICAgICAgICAgZGVmYXVsdFZhbHVlKHZhbHVlLnZhbHVlLCBcIlwiKSArXG4gICAgICAgICAgXCI8L3RkPjwvdHI+XCI7XG4gICAgICB9XG4gICAgICB0ZXh0ICs9IFwiPC90Ym9keT48L3RhYmxlPlwiO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZGVmaW5lZCh0ZXh0KSkge1xuICAgIC8vTm8gZGVzY3JpcHRpb25cbiAgICByZXR1cm47XG4gIH1cblxuICAvL1R1cm5zIG5vbi1leHBsaWNpdCBsaW5rcyBpbnRvIGNsaWNrYWJsZSBsaW5rcy5cbiAgdGV4dCA9IGF1dG9saW5rZXIubGluayh0ZXh0KTtcblxuICAvL1VzZSBhIHRlbXBvcmFyeSBkaXYgdG8gbWFuaXB1bGF0ZSB0aGUgbGlua3NcbiAgLy9zbyB0aGF0IHRoZXkgb3BlbiBpbiBhIG5ldyB3aW5kb3cuXG4gIHNjcmF0Y2hEaXYuaW5uZXJIVE1MID0gdGV4dDtcbiAgdmFyIGxpbmtzID0gc2NyYXRjaERpdi5xdWVyeVNlbGVjdG9yQWxsKFwiYVwiKTtcbiAgZm9yIChpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGlua3NbaV0uc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuICB9XG5cbiAgLy9SZXdyaXRlIGFueSBLTVogZW1iZWRkZWQgdXJsc1xuICBpZiAoZGVmaW5lZCh1cmlSZXNvbHZlcikgJiYgdXJpUmVzb2x2ZXIua2V5cy5sZW5ndGggPiAxKSB7XG4gICAgZW1iZWREYXRhVXJpcyhzY3JhdGNoRGl2LCBcImFcIiwgXCJocmVmXCIsIHVyaVJlc29sdmVyKTtcbiAgICBlbWJlZERhdGFVcmlzKHNjcmF0Y2hEaXYsIFwiaW1nXCIsIFwic3JjXCIsIHVyaVJlc29sdmVyKTtcbiAgfVxuXG4gIC8vTWFrZSByZWxhdGl2ZSB1cmxzIGFic29sdXRlIHVzaW5nIHRoZSBzb3VyY2VSZXNvdXJjZVxuICBhcHBseUJhc2VQYXRoKHNjcmF0Y2hEaXYsIFwiYVwiLCBcImhyZWZcIiwgc291cmNlUmVzb3VyY2UpO1xuICBhcHBseUJhc2VQYXRoKHNjcmF0Y2hEaXYsIFwiaW1nXCIsIFwic3JjXCIsIHNvdXJjZVJlc291cmNlKTtcblxuICB2YXIgdG1wID0gJzxkaXYgY2xhc3M9XCJjZXNpdW0taW5mb0JveC1kZXNjcmlwdGlvbi1saWdodGVyXCIgc3R5bGU9XCInO1xuICB0bXAgKz0gXCJvdmVyZmxvdzphdXRvO1wiO1xuICB0bXAgKz0gXCJ3b3JkLXdyYXA6YnJlYWstd29yZDtcIjtcbiAgdG1wICs9IFwiYmFja2dyb3VuZC1jb2xvcjpcIiArIGJhY2tncm91bmQudG9Dc3NDb2xvclN0cmluZygpICsgXCI7XCI7XG4gIHRtcCArPSBcImNvbG9yOlwiICsgZm9yZWdyb3VuZC50b0Nzc0NvbG9yU3RyaW5nKCkgKyBcIjtcIjtcbiAgdG1wICs9ICdcIj4nO1xuICB0bXAgKz0gc2NyYXRjaERpdi5pbm5lckhUTUwgKyBcIjwvZGl2PlwiO1xuICBzY3JhdGNoRGl2LmlubmVySFRNTCA9IFwiXCI7XG5cbiAgLy9TZXQgdGhlIGZpbmFsIEhUTUwgYXMgdGhlIGRlc2NyaXB0aW9uLlxuICBlbnRpdHkuZGVzY3JpcHRpb24gPSB0bXA7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NGZWF0dXJlKGRhdGFTb3VyY2UsIGZlYXR1cmVOb2RlLCBwcm9jZXNzaW5nRGF0YSkge1xuICB2YXIgZW50aXR5Q29sbGVjdGlvbiA9IHByb2Nlc3NpbmdEYXRhLmVudGl0eUNvbGxlY3Rpb247XG4gIHZhciBwYXJlbnQgPSBwcm9jZXNzaW5nRGF0YS5wYXJlbnRFbnRpdHk7XG4gIHZhciBzb3VyY2VSZXNvdXJjZSA9IHByb2Nlc3NpbmdEYXRhLnNvdXJjZVJlc291cmNlO1xuICB2YXIgdXJpUmVzb2x2ZXIgPSBwcm9jZXNzaW5nRGF0YS51cmlSZXNvbHZlcjtcblxuICB2YXIgZW50aXR5ID0gY3JlYXRlRW50aXR5KFxuICAgIGZlYXR1cmVOb2RlLFxuICAgIGVudGl0eUNvbGxlY3Rpb24sXG4gICAgcHJvY2Vzc2luZ0RhdGEuY29udGV4dFxuICApO1xuICB2YXIga21sRGF0YSA9IGVudGl0eS5rbWw7XG4gIHZhciBzdHlsZUVudGl0eSA9IGNvbXB1dGVGaW5hbFN0eWxlKFxuICAgIGRhdGFTb3VyY2UsXG4gICAgZmVhdHVyZU5vZGUsXG4gICAgcHJvY2Vzc2luZ0RhdGEuc3R5bGVDb2xsZWN0aW9uLFxuICAgIHNvdXJjZVJlc291cmNlLFxuICAgIHVyaVJlc29sdmVyXG4gICk7XG5cbiAgdmFyIG5hbWUgPSBxdWVyeVN0cmluZ1ZhbHVlKGZlYXR1cmVOb2RlLCBcIm5hbWVcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICBlbnRpdHkubmFtZSA9IG5hbWU7XG4gIGVudGl0eS5wYXJlbnQgPSBwYXJlbnQ7XG5cbiAgdmFyIGF2YWlsYWJpbGl0eSA9IHByb2Nlc3NUaW1lU3BhbihmZWF0dXJlTm9kZSk7XG4gIGlmICghZGVmaW5lZChhdmFpbGFiaWxpdHkpKSB7XG4gICAgYXZhaWxhYmlsaXR5ID0gcHJvY2Vzc1RpbWVTdGFtcChmZWF0dXJlTm9kZSk7XG4gIH1cbiAgZW50aXR5LmF2YWlsYWJpbGl0eSA9IGF2YWlsYWJpbGl0eTtcblxuICBtZXJnZUF2YWlsYWJpbGl0eVdpdGhQYXJlbnQoZW50aXR5KTtcblxuICAvLyBQZXIgS01MIHNwZWMgXCJBIEZlYXR1cmUgaXMgdmlzaWJsZSBvbmx5IGlmIGl0IGFuZCBhbGwgaXRzIGFuY2VzdG9ycyBhcmUgdmlzaWJsZS5cIlxuICBmdW5jdGlvbiBhbmNlc3RyeUlzVmlzaWJsZShwYXJlbnRFbnRpdHkpIHtcbiAgICBpZiAoIXBhcmVudEVudGl0eSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRFbnRpdHkuc2hvdyAmJiBhbmNlc3RyeUlzVmlzaWJsZShwYXJlbnRFbnRpdHkucGFyZW50KTtcbiAgfVxuXG4gIHZhciB2aXNpYmlsaXR5ID0gcXVlcnlCb29sZWFuVmFsdWUoZmVhdHVyZU5vZGUsIFwidmlzaWJpbGl0eVwiLCBuYW1lc3BhY2VzLmttbCk7XG4gIGVudGl0eS5zaG93ID0gYW5jZXN0cnlJc1Zpc2libGUocGFyZW50KSAmJiBkZWZhdWx0VmFsdWUodmlzaWJpbGl0eSwgdHJ1ZSk7XG4gIC8vdmFyIG9wZW4gPSBxdWVyeUJvb2xlYW5WYWx1ZShmZWF0dXJlTm9kZSwgJ29wZW4nLCBuYW1lc3BhY2VzLmttbCk7XG5cbiAgdmFyIGF1dGhvck5vZGUgPSBxdWVyeUZpcnN0Tm9kZShmZWF0dXJlTm9kZSwgXCJhdXRob3JcIiwgbmFtZXNwYWNlcy5hdG9tKTtcbiAgdmFyIGF1dGhvciA9IGttbERhdGEuYXV0aG9yO1xuICBhdXRob3IubmFtZSA9IHF1ZXJ5U3RyaW5nVmFsdWUoYXV0aG9yTm9kZSwgXCJuYW1lXCIsIG5hbWVzcGFjZXMuYXRvbSk7XG4gIGF1dGhvci51cmkgPSBxdWVyeVN0cmluZ1ZhbHVlKGF1dGhvck5vZGUsIFwidXJpXCIsIG5hbWVzcGFjZXMuYXRvbSk7XG4gIGF1dGhvci5lbWFpbCA9IHF1ZXJ5U3RyaW5nVmFsdWUoYXV0aG9yTm9kZSwgXCJlbWFpbFwiLCBuYW1lc3BhY2VzLmF0b20pO1xuXG4gIHZhciBsaW5rTm9kZSA9IHF1ZXJ5Rmlyc3ROb2RlKGZlYXR1cmVOb2RlLCBcImxpbmtcIiwgbmFtZXNwYWNlcy5hdG9tKTtcbiAgdmFyIGxpbmsgPSBrbWxEYXRhLmxpbms7XG4gIGxpbmsuaHJlZiA9IHF1ZXJ5U3RyaW5nQXR0cmlidXRlKGxpbmtOb2RlLCBcImhyZWZcIik7XG4gIGxpbmsuaHJlZmxhbmcgPSBxdWVyeVN0cmluZ0F0dHJpYnV0ZShsaW5rTm9kZSwgXCJocmVmbGFuZ1wiKTtcbiAgbGluay5yZWwgPSBxdWVyeVN0cmluZ0F0dHJpYnV0ZShsaW5rTm9kZSwgXCJyZWxcIik7XG4gIGxpbmsudHlwZSA9IHF1ZXJ5U3RyaW5nQXR0cmlidXRlKGxpbmtOb2RlLCBcInR5cGVcIik7XG4gIGxpbmsudGl0bGUgPSBxdWVyeVN0cmluZ0F0dHJpYnV0ZShsaW5rTm9kZSwgXCJ0aXRsZVwiKTtcbiAgbGluay5sZW5ndGggPSBxdWVyeVN0cmluZ0F0dHJpYnV0ZShsaW5rTm9kZSwgXCJsZW5ndGhcIik7XG5cbiAga21sRGF0YS5hZGRyZXNzID0gcXVlcnlTdHJpbmdWYWx1ZShmZWF0dXJlTm9kZSwgXCJhZGRyZXNzXCIsIG5hbWVzcGFjZXMua21sKTtcbiAga21sRGF0YS5waG9uZU51bWJlciA9IHF1ZXJ5U3RyaW5nVmFsdWUoXG4gICAgZmVhdHVyZU5vZGUsXG4gICAgXCJwaG9uZU51bWJlclwiLFxuICAgIG5hbWVzcGFjZXMua21sXG4gICk7XG4gIGttbERhdGEuc25pcHBldCA9IHF1ZXJ5U3RyaW5nVmFsdWUoZmVhdHVyZU5vZGUsIFwiU25pcHBldFwiLCBuYW1lc3BhY2VzLmttbCk7XG5cbiAgcHJvY2Vzc0V4dGVuZGVkRGF0YShmZWF0dXJlTm9kZSwgZW50aXR5KTtcbiAgcHJvY2Vzc0Rlc2NyaXB0aW9uKFxuICAgIGZlYXR1cmVOb2RlLFxuICAgIGVudGl0eSxcbiAgICBzdHlsZUVudGl0eSxcbiAgICB1cmlSZXNvbHZlcixcbiAgICBzb3VyY2VSZXNvdXJjZVxuICApO1xuXG4gIHZhciBlbGxpcHNvaWQgPSBkYXRhU291cmNlLl9lbGxpcHNvaWQ7XG4gIHByb2Nlc3NMb29rQXQoZmVhdHVyZU5vZGUsIGVudGl0eSwgZWxsaXBzb2lkKTtcbiAgcHJvY2Vzc0NhbWVyYShmZWF0dXJlTm9kZSwgZW50aXR5LCBlbGxpcHNvaWQpO1xuXG4gIGlmIChkZWZpbmVkKHF1ZXJ5Rmlyc3ROb2RlKGZlYXR1cmVOb2RlLCBcIlJlZ2lvblwiLCBuYW1lc3BhY2VzLmttbCkpKSB7XG4gICAgb25lVGltZVdhcm5pbmcoXCJrbWwtcmVnaW9uXCIsIFwiS01MIC0gUGxhY2VtYXJrIFJlZ2lvbnMgYXJlIHVuc3VwcG9ydGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBlbnRpdHk6IGVudGl0eSxcbiAgICBzdHlsZUVudGl0eTogc3R5bGVFbnRpdHksXG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NEb2N1bWVudChkYXRhU291cmNlLCBub2RlLCBwcm9jZXNzaW5nRGF0YSwgZGVmZXJyZWRMb2FkaW5nKSB7XG4gIGRlZmVycmVkTG9hZGluZy5hZGROb2Rlcyhub2RlLmNoaWxkTm9kZXMsIHByb2Nlc3NpbmdEYXRhKTtcbiAgZGVmZXJyZWRMb2FkaW5nLnByb2Nlc3MoKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0ZvbGRlcihkYXRhU291cmNlLCBub2RlLCBwcm9jZXNzaW5nRGF0YSwgZGVmZXJyZWRMb2FkaW5nKSB7XG4gIHZhciByID0gcHJvY2Vzc0ZlYXR1cmUoZGF0YVNvdXJjZSwgbm9kZSwgcHJvY2Vzc2luZ0RhdGEpO1xuICB2YXIgbmV3UHJvY2Vzc2luZ0RhdGEgPSBjbG9uZShwcm9jZXNzaW5nRGF0YSk7XG4gIG5ld1Byb2Nlc3NpbmdEYXRhLnBhcmVudEVudGl0eSA9IHIuZW50aXR5O1xuICBwcm9jZXNzRG9jdW1lbnQoZGF0YVNvdXJjZSwgbm9kZSwgbmV3UHJvY2Vzc2luZ0RhdGEsIGRlZmVycmVkTG9hZGluZyk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NQbGFjZW1hcmsoXG4gIGRhdGFTb3VyY2UsXG4gIHBsYWNlbWFyayxcbiAgcHJvY2Vzc2luZ0RhdGEsXG4gIGRlZmVycmVkTG9hZGluZ1xuKSB7XG4gIHZhciByID0gcHJvY2Vzc0ZlYXR1cmUoZGF0YVNvdXJjZSwgcGxhY2VtYXJrLCBwcm9jZXNzaW5nRGF0YSk7XG4gIHZhciBlbnRpdHkgPSByLmVudGl0eTtcbiAgdmFyIHN0eWxlRW50aXR5ID0gci5zdHlsZUVudGl0eTtcblxuICB2YXIgaGFzR2VvbWV0cnkgPSBmYWxzZTtcbiAgdmFyIGNoaWxkTm9kZXMgPSBwbGFjZW1hcmsuY2hpbGROb2RlcztcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbGVuICYmICFoYXNHZW9tZXRyeTsgaSsrKSB7XG4gICAgdmFyIGNoaWxkTm9kZSA9IGNoaWxkTm9kZXMuaXRlbShpKTtcbiAgICB2YXIgZ2VvbWV0cnlQcm9jZXNzb3IgPSBnZW9tZXRyeVR5cGVzW2NoaWxkTm9kZS5sb2NhbE5hbWVdO1xuICAgIGlmIChkZWZpbmVkKGdlb21ldHJ5UHJvY2Vzc29yKSkge1xuICAgICAgLy8gcGFzcyB0aGUgcGxhY2VtYXJrIGVudGl0eSBpZCBhcyBhIGNvbnRleHQgZm9yIGNhc2Ugb2YgZGVmaW5pbmcgbXVsdGlwbGUgY2hpbGQgZW50aXRpZXMgdG9nZXRoZXIgdG8gaGFuZGxlIGNhc2VcbiAgICAgIC8vIHdoZXJlIHNvbWUgbWFsZm9ybWVkIGttbHMgcmV1c2UgdGhlIHNhbWUgaWQgYWNyb3NzIHBsYWNlbWFya3MsIHdoaWNoIHdvcmtzIGluIEdFLCBidXQgaXMgbm90IHRlY2huaWNhbGx5IHRvIHNwZWMuXG4gICAgICBnZW9tZXRyeVByb2Nlc3NvcihcbiAgICAgICAgZGF0YVNvdXJjZSxcbiAgICAgICAgcHJvY2Vzc2luZ0RhdGEuZW50aXR5Q29sbGVjdGlvbixcbiAgICAgICAgY2hpbGROb2RlLFxuICAgICAgICBlbnRpdHksXG4gICAgICAgIHN0eWxlRW50aXR5LFxuICAgICAgICBlbnRpdHkuaWRcbiAgICAgICk7XG4gICAgICBoYXNHZW9tZXRyeSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFoYXNHZW9tZXRyeSkge1xuICAgIGVudGl0eS5tZXJnZShzdHlsZUVudGl0eSk7XG4gICAgcHJvY2Vzc1Bvc2l0aW9uR3JhcGhpY3MoZGF0YVNvdXJjZSwgZW50aXR5LCBzdHlsZUVudGl0eSk7XG4gIH1cbn1cblxudmFyIHBsYXlsaXN0Tm9kZVByb2Nlc3NvcnMgPSB7XG4gIEZseVRvOiBwcm9jZXNzVG91ckZseVRvLFxuICBXYWl0OiBwcm9jZXNzVG91cldhaXQsXG4gIFNvdW5kQ3VlOiBwcm9jZXNzVG91clVuc3VwcG9ydGVkTm9kZSxcbiAgQW5pbWF0ZWRVcGRhdGU6IHByb2Nlc3NUb3VyVW5zdXBwb3J0ZWROb2RlLFxuICBUb3VyQ29udHJvbDogcHJvY2Vzc1RvdXJVbnN1cHBvcnRlZE5vZGUsXG59O1xuXG5mdW5jdGlvbiBwcm9jZXNzVG91cihkYXRhU291cmNlLCBub2RlLCBwcm9jZXNzaW5nRGF0YSwgZGVmZXJyZWRMb2FkaW5nKSB7XG4gIHZhciBuYW1lID0gcXVlcnlTdHJpbmdWYWx1ZShub2RlLCBcIm5hbWVcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICB2YXIgaWQgPSBxdWVyeVN0cmluZ0F0dHJpYnV0ZShub2RlLCBcImlkXCIpO1xuICB2YXIgdG91ciA9IG5ldyBLbWxUb3VyKG5hbWUsIGlkKTtcblxuICB2YXIgcGxheWxpc3ROb2RlID0gcXVlcnlGaXJzdE5vZGUobm9kZSwgXCJQbGF5bGlzdFwiLCBuYW1lc3BhY2VzLmd4KTtcbiAgaWYgKHBsYXlsaXN0Tm9kZSkge1xuICAgIHZhciBlbGxpcHNvaWQgPSBkYXRhU291cmNlLl9lbGxpcHNvaWQ7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBwbGF5bGlzdE5vZGUuY2hpbGROb2RlcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlbnRyeU5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgaWYgKGVudHJ5Tm9kZS5sb2NhbE5hbWUpIHtcbiAgICAgICAgdmFyIHBsYXlsaXN0Tm9kZVByb2Nlc3NvciA9IHBsYXlsaXN0Tm9kZVByb2Nlc3NvcnNbZW50cnlOb2RlLmxvY2FsTmFtZV07XG4gICAgICAgIGlmIChwbGF5bGlzdE5vZGVQcm9jZXNzb3IpIHtcbiAgICAgICAgICBwbGF5bGlzdE5vZGVQcm9jZXNzb3IodG91ciwgZW50cnlOb2RlLCBlbGxpcHNvaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgXCJVbmtub3duIEtNTCBUb3VyIHBsYXlsaXN0IGVudHJ5IHR5cGUgXCIgKyBlbnRyeU5vZGUubG9jYWxOYW1lXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRhdGFTb3VyY2UuX2ttbFRvdXJzLnB1c2godG91cik7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NUb3VyVW5zdXBwb3J0ZWROb2RlKHRvdXIsIGVudHJ5Tm9kZSkge1xuICBvbmVUaW1lV2FybmluZyhcIktNTCBUb3VyIHVuc3VwcG9ydGVkIG5vZGUgXCIgKyBlbnRyeU5vZGUubG9jYWxOYW1lKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1RvdXJXYWl0KHRvdXIsIGVudHJ5Tm9kZSkge1xuICB2YXIgZHVyYXRpb24gPSBxdWVyeU51bWVyaWNWYWx1ZShlbnRyeU5vZGUsIFwiZHVyYXRpb25cIiwgbmFtZXNwYWNlcy5neCk7XG4gIHRvdXIuYWRkUGxheWxpc3RFbnRyeShuZXcgS21sVG91cldhaXQoZHVyYXRpb24pKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1RvdXJGbHlUbyh0b3VyLCBlbnRyeU5vZGUsIGVsbGlwc29pZCkge1xuICB2YXIgZHVyYXRpb24gPSBxdWVyeU51bWVyaWNWYWx1ZShlbnRyeU5vZGUsIFwiZHVyYXRpb25cIiwgbmFtZXNwYWNlcy5neCk7XG4gIHZhciBmbHlUb01vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKGVudHJ5Tm9kZSwgXCJmbHlUb01vZGVcIiwgbmFtZXNwYWNlcy5neCk7XG5cbiAgdmFyIHQgPSB7IGttbDoge30gfTtcblxuICBwcm9jZXNzTG9va0F0KGVudHJ5Tm9kZSwgdCwgZWxsaXBzb2lkKTtcbiAgcHJvY2Vzc0NhbWVyYShlbnRyeU5vZGUsIHQsIGVsbGlwc29pZCk7XG5cbiAgdmFyIHZpZXcgPSB0LmttbC5sb29rQXQgfHwgdC5rbWwuY2FtZXJhO1xuXG4gIHZhciBmbHl0byA9IG5ldyBLbWxUb3VyRmx5VG8oZHVyYXRpb24sIGZseVRvTW9kZSwgdmlldyk7XG4gIHRvdXIuYWRkUGxheWxpc3RFbnRyeShmbHl0byk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NDYW1lcmEoZmVhdHVyZU5vZGUsIGVudGl0eSwgZWxsaXBzb2lkKSB7XG4gIHZhciBjYW1lcmEgPSBxdWVyeUZpcnN0Tm9kZShmZWF0dXJlTm9kZSwgXCJDYW1lcmFcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICBpZiAoZGVmaW5lZChjYW1lcmEpKSB7XG4gICAgdmFyIGxvbiA9IGRlZmF1bHRWYWx1ZShcbiAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKGNhbWVyYSwgXCJsb25naXR1ZGVcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgMC4wXG4gICAgKTtcbiAgICB2YXIgbGF0ID0gZGVmYXVsdFZhbHVlKFxuICAgICAgcXVlcnlOdW1lcmljVmFsdWUoY2FtZXJhLCBcImxhdGl0dWRlXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgIDAuMFxuICAgICk7XG4gICAgdmFyIGFsdGl0dWRlID0gZGVmYXVsdFZhbHVlKFxuICAgICAgcXVlcnlOdW1lcmljVmFsdWUoY2FtZXJhLCBcImFsdGl0dWRlXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgIDAuMFxuICAgICk7XG5cbiAgICB2YXIgaGVhZGluZyA9IGRlZmF1bHRWYWx1ZShcbiAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKGNhbWVyYSwgXCJoZWFkaW5nXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgIDAuMFxuICAgICk7XG4gICAgdmFyIHRpbHQgPSBkZWZhdWx0VmFsdWUoXG4gICAgICBxdWVyeU51bWVyaWNWYWx1ZShjYW1lcmEsIFwidGlsdFwiLCBuYW1lc3BhY2VzLmttbCksXG4gICAgICAwLjBcbiAgICApO1xuICAgIHZhciByb2xsID0gZGVmYXVsdFZhbHVlKFxuICAgICAgcXVlcnlOdW1lcmljVmFsdWUoY2FtZXJhLCBcInJvbGxcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgMC4wXG4gICAgKTtcblxuICAgIHZhciBwb3NpdGlvbiA9IENhcnRlc2lhbjMuZnJvbURlZ3JlZXMobG9uLCBsYXQsIGFsdGl0dWRlLCBlbGxpcHNvaWQpO1xuICAgIHZhciBocHIgPSBIZWFkaW5nUGl0Y2hSb2xsLmZyb21EZWdyZWVzKGhlYWRpbmcsIHRpbHQgLSA5MC4wLCByb2xsKTtcblxuICAgIGVudGl0eS5rbWwuY2FtZXJhID0gbmV3IEttbENhbWVyYShwb3NpdGlvbiwgaHByKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzTG9va0F0KGZlYXR1cmVOb2RlLCBlbnRpdHksIGVsbGlwc29pZCkge1xuICB2YXIgbG9va0F0ID0gcXVlcnlGaXJzdE5vZGUoZmVhdHVyZU5vZGUsIFwiTG9va0F0XCIsIG5hbWVzcGFjZXMua21sKTtcbiAgaWYgKGRlZmluZWQobG9va0F0KSkge1xuICAgIHZhciBsb24gPSBkZWZhdWx0VmFsdWUoXG4gICAgICBxdWVyeU51bWVyaWNWYWx1ZShsb29rQXQsIFwibG9uZ2l0dWRlXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgIDAuMFxuICAgICk7XG4gICAgdmFyIGxhdCA9IGRlZmF1bHRWYWx1ZShcbiAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKGxvb2tBdCwgXCJsYXRpdHVkZVwiLCBuYW1lc3BhY2VzLmttbCksXG4gICAgICAwLjBcbiAgICApO1xuICAgIHZhciBhbHRpdHVkZSA9IGRlZmF1bHRWYWx1ZShcbiAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKGxvb2tBdCwgXCJhbHRpdHVkZVwiLCBuYW1lc3BhY2VzLmttbCksXG4gICAgICAwLjBcbiAgICApO1xuICAgIHZhciBoZWFkaW5nID0gcXVlcnlOdW1lcmljVmFsdWUobG9va0F0LCBcImhlYWRpbmdcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgIHZhciB0aWx0ID0gcXVlcnlOdW1lcmljVmFsdWUobG9va0F0LCBcInRpbHRcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgIHZhciByYW5nZSA9IGRlZmF1bHRWYWx1ZShcbiAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKGxvb2tBdCwgXCJyYW5nZVwiLCBuYW1lc3BhY2VzLmttbCksXG4gICAgICAwLjBcbiAgICApO1xuXG4gICAgdGlsdCA9IENlc2l1bU1hdGgudG9SYWRpYW5zKGRlZmF1bHRWYWx1ZSh0aWx0LCAwLjApKTtcbiAgICBoZWFkaW5nID0gQ2VzaXVtTWF0aC50b1JhZGlhbnMoZGVmYXVsdFZhbHVlKGhlYWRpbmcsIDAuMCkpO1xuXG4gICAgdmFyIGhwciA9IG5ldyBIZWFkaW5nUGl0Y2hSYW5nZShcbiAgICAgIGhlYWRpbmcsXG4gICAgICB0aWx0IC0gQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTyxcbiAgICAgIHJhbmdlXG4gICAgKTtcbiAgICB2YXIgdmlld1BvaW50ID0gQ2FydGVzaWFuMy5mcm9tRGVncmVlcyhsb24sIGxhdCwgYWx0aXR1ZGUsIGVsbGlwc29pZCk7XG5cbiAgICBlbnRpdHkua21sLmxvb2tBdCA9IG5ldyBLbWxMb29rQXQodmlld1BvaW50LCBocHIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NHcm91bmRPdmVybGF5KFxuICBkYXRhU291cmNlLFxuICBncm91bmRPdmVybGF5LFxuICBwcm9jZXNzaW5nRGF0YSxcbiAgZGVmZXJyZWRMb2FkaW5nXG4pIHtcbiAgdmFyIHIgPSBwcm9jZXNzRmVhdHVyZShkYXRhU291cmNlLCBncm91bmRPdmVybGF5LCBwcm9jZXNzaW5nRGF0YSk7XG4gIHZhciBlbnRpdHkgPSByLmVudGl0eTtcblxuICB2YXIgZ2VvbWV0cnk7XG4gIHZhciBpc0xhdExvblF1YWQgPSBmYWxzZTtcblxuICB2YXIgZWxsaXBzb2lkID0gZGF0YVNvdXJjZS5fZWxsaXBzb2lkO1xuICB2YXIgcG9zaXRpb25zID0gcmVhZENvb3JkaW5hdGVzKFxuICAgIHF1ZXJ5Rmlyc3ROb2RlKGdyb3VuZE92ZXJsYXksIFwiTGF0TG9uUXVhZFwiLCBuYW1lc3BhY2VzLmd4KSxcbiAgICBlbGxpcHNvaWRcbiAgKTtcbiAgdmFyIHpJbmRleCA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKGdyb3VuZE92ZXJsYXksIFwiZHJhd09yZGVyXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgaWYgKGRlZmluZWQocG9zaXRpb25zKSkge1xuICAgIGdlb21ldHJ5ID0gY3JlYXRlRGVmYXVsdFBvbHlnb24oKTtcbiAgICBnZW9tZXRyeS5oaWVyYXJjaHkgPSBuZXcgUG9seWdvbkhpZXJhcmNoeShwb3NpdGlvbnMpO1xuICAgIGdlb21ldHJ5LnpJbmRleCA9IHpJbmRleDtcbiAgICBlbnRpdHkucG9seWdvbiA9IGdlb21ldHJ5O1xuICAgIGlzTGF0TG9uUXVhZCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgZ2VvbWV0cnkgPSBuZXcgUmVjdGFuZ2xlR3JhcGhpY3MoKTtcbiAgICBnZW9tZXRyeS56SW5kZXggPSB6SW5kZXg7XG4gICAgZW50aXR5LnJlY3RhbmdsZSA9IGdlb21ldHJ5O1xuXG4gICAgdmFyIGxhdExvbkJveCA9IHF1ZXJ5Rmlyc3ROb2RlKGdyb3VuZE92ZXJsYXksIFwiTGF0TG9uQm94XCIsIG5hbWVzcGFjZXMua21sKTtcbiAgICBpZiAoZGVmaW5lZChsYXRMb25Cb3gpKSB7XG4gICAgICB2YXIgd2VzdCA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKGxhdExvbkJveCwgXCJ3ZXN0XCIsIG5hbWVzcGFjZXMua21sKTtcbiAgICAgIHZhciBzb3V0aCA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKGxhdExvbkJveCwgXCJzb3V0aFwiLCBuYW1lc3BhY2VzLmttbCk7XG4gICAgICB2YXIgZWFzdCA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKGxhdExvbkJveCwgXCJlYXN0XCIsIG5hbWVzcGFjZXMua21sKTtcbiAgICAgIHZhciBub3J0aCA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKGxhdExvbkJveCwgXCJub3J0aFwiLCBuYW1lc3BhY2VzLmttbCk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHdlc3QpKSB7XG4gICAgICAgIHdlc3QgPSBDZXNpdW1NYXRoLm5lZ2F0aXZlUGlUb1BpKENlc2l1bU1hdGgudG9SYWRpYW5zKHdlc3QpKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKHNvdXRoKSkge1xuICAgICAgICBzb3V0aCA9IENlc2l1bU1hdGguY2xhbXBUb0xhdGl0dWRlUmFuZ2UoQ2VzaXVtTWF0aC50b1JhZGlhbnMoc291dGgpKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKGVhc3QpKSB7XG4gICAgICAgIGVhc3QgPSBDZXNpdW1NYXRoLm5lZ2F0aXZlUGlUb1BpKENlc2l1bU1hdGgudG9SYWRpYW5zKGVhc3QpKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKG5vcnRoKSkge1xuICAgICAgICBub3J0aCA9IENlc2l1bU1hdGguY2xhbXBUb0xhdGl0dWRlUmFuZ2UoQ2VzaXVtTWF0aC50b1JhZGlhbnMobm9ydGgpKTtcbiAgICAgIH1cbiAgICAgIGdlb21ldHJ5LmNvb3JkaW5hdGVzID0gbmV3IFJlY3RhbmdsZSh3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGgpO1xuXG4gICAgICB2YXIgcm90YXRpb24gPSBxdWVyeU51bWVyaWNWYWx1ZShsYXRMb25Cb3gsIFwicm90YXRpb25cIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgICAgaWYgKGRlZmluZWQocm90YXRpb24pKSB7XG4gICAgICAgIHZhciByb3RhdGlvblJhZGlhbnMgPSBDZXNpdW1NYXRoLnRvUmFkaWFucyhyb3RhdGlvbik7XG4gICAgICAgIGdlb21ldHJ5LnJvdGF0aW9uID0gcm90YXRpb25SYWRpYW5zO1xuICAgICAgICBnZW9tZXRyeS5zdFJvdGF0aW9uID0gcm90YXRpb25SYWRpYW5zO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBpY29uTm9kZSA9IHF1ZXJ5Rmlyc3ROb2RlKGdyb3VuZE92ZXJsYXksIFwiSWNvblwiLCBuYW1lc3BhY2VzLmttbCk7XG4gIHZhciBocmVmID0gZ2V0SWNvbkhyZWYoXG4gICAgaWNvbk5vZGUsXG4gICAgZGF0YVNvdXJjZSxcbiAgICBwcm9jZXNzaW5nRGF0YS5zb3VyY2VSZXNvdXJjZSxcbiAgICBwcm9jZXNzaW5nRGF0YS51cmlSZXNvbHZlcixcbiAgICB0cnVlXG4gICk7XG4gIGlmIChkZWZpbmVkKGhyZWYpKSB7XG4gICAgaWYgKGlzTGF0TG9uUXVhZCkge1xuICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgIFwia21sLWd4OkxhdExvblF1YWRcIixcbiAgICAgICAgXCJLTUwgLSBneDpMYXRMb25RdWFkIEljb24gZG9lcyBub3Qgc3VwcG9ydCB0ZXh0dXJlIHByb2plY3Rpb24uXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHZhciB4ID0gcXVlcnlOdW1lcmljVmFsdWUoaWNvbk5vZGUsIFwieFwiLCBuYW1lc3BhY2VzLmd4KTtcbiAgICB2YXIgeSA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKGljb25Ob2RlLCBcInlcIiwgbmFtZXNwYWNlcy5neCk7XG4gICAgdmFyIHcgPSBxdWVyeU51bWVyaWNWYWx1ZShpY29uTm9kZSwgXCJ3XCIsIG5hbWVzcGFjZXMuZ3gpO1xuICAgIHZhciBoID0gcXVlcnlOdW1lcmljVmFsdWUoaWNvbk5vZGUsIFwiaFwiLCBuYW1lc3BhY2VzLmd4KTtcblxuICAgIGlmIChkZWZpbmVkKHgpIHx8IGRlZmluZWQoeSkgfHwgZGVmaW5lZCh3KSB8fCBkZWZpbmVkKGgpKSB7XG4gICAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgICAgXCJrbWwtZ3JvdW5kT3ZlcmxheS14eXdoXCIsXG4gICAgICAgIFwiS01MIC0gZ3g6eCwgZ3g6eSwgZ3g6dywgZ3g6aCBhcmVuJ3Qgc3VwcG9ydGVkIGZvciBHcm91bmRPdmVybGF5c1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIGdlb21ldHJ5Lm1hdGVyaWFsID0gaHJlZjtcbiAgICBnZW9tZXRyeS5tYXRlcmlhbC5jb2xvciA9IHF1ZXJ5Q29sb3JWYWx1ZShcbiAgICAgIGdyb3VuZE92ZXJsYXksXG4gICAgICBcImNvbG9yXCIsXG4gICAgICBuYW1lc3BhY2VzLmttbFxuICAgICk7XG4gICAgZ2VvbWV0cnkubWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGdlb21ldHJ5Lm1hdGVyaWFsID0gcXVlcnlDb2xvclZhbHVlKGdyb3VuZE92ZXJsYXksIFwiY29sb3JcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICB9XG5cbiAgdmFyIGFsdGl0dWRlTW9kZSA9IHF1ZXJ5U3RyaW5nVmFsdWUoXG4gICAgZ3JvdW5kT3ZlcmxheSxcbiAgICBcImFsdGl0dWRlTW9kZVwiLFxuICAgIG5hbWVzcGFjZXMua21sXG4gICk7XG5cbiAgaWYgKGRlZmluZWQoYWx0aXR1ZGVNb2RlKSkge1xuICAgIGlmIChhbHRpdHVkZU1vZGUgPT09IFwiYWJzb2x1dGVcIikge1xuICAgICAgLy9Vc2UgaGVpZ2h0IGFib3ZlIGVsbGlwc29pZCB1bnRpbCB3ZSBzdXBwb3J0IE1TTC5cbiAgICAgIGdlb21ldHJ5LmhlaWdodCA9IHF1ZXJ5TnVtZXJpY1ZhbHVlKFxuICAgICAgICBncm91bmRPdmVybGF5LFxuICAgICAgICBcImFsdGl0dWRlXCIsXG4gICAgICAgIG5hbWVzcGFjZXMua21sXG4gICAgICApO1xuICAgICAgZ2VvbWV0cnkuekluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAoYWx0aXR1ZGVNb2RlICE9PSBcImNsYW1wVG9Hcm91bmRcIikge1xuICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgIFwia21sLWFsdGl0dWRlTW9kZS11bmtub3duXCIsXG4gICAgICAgIFwiS01MIC0gVW5rbm93biBhbHRpdHVkZU1vZGU6IFwiICsgYWx0aXR1ZGVNb2RlXG4gICAgICApO1xuICAgIH1cbiAgICAvLyBlbHNlIGp1c3QgdXNlIHRoZSBkZWZhdWx0IG9mIDAgdW50aWwgd2Ugc3VwcG9ydCAnY2xhbXBUb0dyb3VuZCdcbiAgfSBlbHNlIHtcbiAgICBhbHRpdHVkZU1vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgICAgZ3JvdW5kT3ZlcmxheSxcbiAgICAgIFwiYWx0aXR1ZGVNb2RlXCIsXG4gICAgICBuYW1lc3BhY2VzLmd4XG4gICAgKTtcbiAgICBpZiAoYWx0aXR1ZGVNb2RlID09PSBcInJlbGF0aXZlVG9TZWFGbG9vclwiKSB7XG4gICAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgICAgXCJrbWwtYWx0aXR1ZGVNb2RlLXJlbGF0aXZlVG9TZWFGbG9vclwiLFxuICAgICAgICBcIktNTCAtIGFsdGl0dWRlTW9kZSByZWxhdGl2ZVRvU2VhRmxvb3IgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQsIHRyZWF0aW5nIGFzIGFic29sdXRlLlwiXG4gICAgICApO1xuICAgICAgZ2VvbWV0cnkuaGVpZ2h0ID0gcXVlcnlOdW1lcmljVmFsdWUoXG4gICAgICAgIGdyb3VuZE92ZXJsYXksXG4gICAgICAgIFwiYWx0aXR1ZGVcIixcbiAgICAgICAgbmFtZXNwYWNlcy5rbWxcbiAgICAgICk7XG4gICAgICBnZW9tZXRyeS56SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChhbHRpdHVkZU1vZGUgPT09IFwiY2xhbXBUb1NlYUZsb29yXCIpIHtcbiAgICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgICBcImttbC1hbHRpdHVkZU1vZGUtY2xhbXBUb1NlYUZsb29yXCIsXG4gICAgICAgIFwiS01MIC0gYWx0aXR1ZGVNb2RlIGNsYW1wVG9TZWFGbG9vciBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCwgdHJlYXRpbmcgYXMgY2xhbXBUb0dyb3VuZC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGRlZmluZWQoYWx0aXR1ZGVNb2RlKSkge1xuICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgIFwia21sLWFsdGl0dWRlTW9kZS11bmtub3duXCIsXG4gICAgICAgIFwiS01MIC0gVW5rbm93biBhbHRpdHVkZU1vZGU6IFwiICsgYWx0aXR1ZGVNb2RlXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzVW5zdXBwb3J0ZWRGZWF0dXJlKFxuICBkYXRhU291cmNlLFxuICBub2RlLFxuICBwcm9jZXNzaW5nRGF0YSxcbiAgZGVmZXJyZWRMb2FkaW5nXG4pIHtcbiAgZGF0YVNvdXJjZS5fdW5zdXBwb3J0ZWROb2RlLnJhaXNlRXZlbnQoXG4gICAgZGF0YVNvdXJjZSxcbiAgICBwcm9jZXNzaW5nRGF0YS5wYXJlbnRFbnRpdHksXG4gICAgbm9kZSxcbiAgICBwcm9jZXNzaW5nRGF0YS5lbnRpdHlDb2xsZWN0aW9uLFxuICAgIHByb2Nlc3NpbmdEYXRhLnN0eWxlQ29sbGVjdGlvbixcbiAgICBwcm9jZXNzaW5nRGF0YS5zb3VyY2VSZXNvdXJjZSxcbiAgICBwcm9jZXNzaW5nRGF0YS51cmlSZXNvbHZlclxuICApO1xuICBvbmVUaW1lV2FybmluZyhcbiAgICBcImttbC11bnN1cHBvcnRlZEZlYXR1cmUtXCIgKyBub2RlLm5vZGVOYW1lLFxuICAgIFwiS01MIC0gVW5zdXBwb3J0ZWQgZmVhdHVyZTogXCIgKyBub2RlLm5vZGVOYW1lXG4gICk7XG59XG5cbnZhciBSZWZyZXNoTW9kZSA9IHtcbiAgSU5URVJWQUw6IDAsXG4gIEVYUElSRTogMSxcbiAgU1RPUDogMixcbn07XG5cbmZ1bmN0aW9uIGNsZWFudXBTdHJpbmcocykge1xuICBpZiAoIWRlZmluZWQocykgfHwgcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIHZhciBzRmlyc3QgPSBzWzBdO1xuICBpZiAoc0ZpcnN0ID09PSBcIiZcIiB8fCBzRmlyc3QgPT09IFwiP1wiKSB7XG4gICAgcyA9IHMuc3Vic3RyaW5nKDEpO1xuICB9XG5cbiAgcmV0dXJuIHM7XG59XG5cbnZhciB6ZXJvUmVjdGFuZ2xlID0gbmV3IFJlY3RhbmdsZSgpO1xudmFyIHNjcmF0Y2hDYXJ0b2dyYXBoaWMgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgc2NyYXRjaENhcnRlc2lhbjIgPSBuZXcgQ2FydGVzaWFuMigpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4zID0gbmV3IENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gcHJvY2Vzc05ldHdvcmtMaW5rUXVlcnlTdHJpbmcoXG4gIHJlc291cmNlLFxuICBjYW1lcmEsXG4gIGNhbnZhcyxcbiAgdmlld0JvdW5kU2NhbGUsXG4gIGJib3gsXG4gIGVsbGlwc29pZFxuKSB7XG4gIGZ1bmN0aW9uIGZpeExhdGl0dWRlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgLUNlc2l1bU1hdGguUElfT1ZFUl9UV08pIHtcbiAgICAgIHJldHVybiAtQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTztcbiAgICB9IGVsc2UgaWYgKHZhbHVlID4gQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTykge1xuICAgICAgcmV0dXJuIENlc2l1bU1hdGguUElfT1ZFUl9UV087XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpeExvbmdpdHVkZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA+IENlc2l1bU1hdGguUEkpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAtIENlc2l1bU1hdGguVFdPX1BJO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPCAtQ2VzaXVtTWF0aC5QSSkge1xuICAgICAgcmV0dXJuIHZhbHVlICsgQ2VzaXVtTWF0aC5UV09fUEk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgdmFyIHF1ZXJ5U3RyaW5nID0gb2JqZWN0VG9RdWVyeShyZXNvdXJjZS5xdWVyeVBhcmFtZXRlcnMpO1xuXG4gIC8vIG9iamVjdFRvUXVlcnkgZXNjYXBlcyBbIGFuZCBdLCBzbyBmaXggdGhhdFxuICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoLyU1Qi9nLCBcIltcIikucmVwbGFjZSgvJTVEL2csIFwiXVwiKTtcblxuICBpZiAoZGVmaW5lZChjYW1lcmEpICYmIGNhbWVyYS5fbW9kZSAhPT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgdmFyIGNlbnRlckNhcnRlc2lhbjtcbiAgICB2YXIgY2VudGVyQ2FydG9ncmFwaGljO1xuXG4gICAgYmJveCA9IGRlZmF1bHRWYWx1ZShiYm94LCB6ZXJvUmVjdGFuZ2xlKTtcbiAgICBpZiAoZGVmaW5lZChjYW52YXMpKSB7XG4gICAgICBzY3JhdGNoQ2FydGVzaWFuMi54ID0gY2FudmFzLmNsaWVudFdpZHRoICogMC41O1xuICAgICAgc2NyYXRjaENhcnRlc2lhbjIueSA9IGNhbnZhcy5jbGllbnRIZWlnaHQgKiAwLjU7XG4gICAgICBjZW50ZXJDYXJ0ZXNpYW4gPSBjYW1lcmEucGlja0VsbGlwc29pZChcbiAgICAgICAgc2NyYXRjaENhcnRlc2lhbjIsXG4gICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgc2NyYXRjaENhcnRlc2lhbjNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGRlZmluZWQoY2VudGVyQ2FydGVzaWFuKSkge1xuICAgICAgY2VudGVyQ2FydG9ncmFwaGljID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgICAgICBjZW50ZXJDYXJ0ZXNpYW4sXG4gICAgICAgIHNjcmF0Y2hDYXJ0b2dyYXBoaWNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNlbnRlckNhcnRvZ3JhcGhpYyA9IFJlY3RhbmdsZS5jZW50ZXIoYmJveCwgc2NyYXRjaENhcnRvZ3JhcGhpYyk7XG4gICAgICBjZW50ZXJDYXJ0ZXNpYW4gPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oY2VudGVyQ2FydG9ncmFwaGljKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkZWZpbmVkKHZpZXdCb3VuZFNjYWxlKSAmJlxuICAgICAgIUNlc2l1bU1hdGguZXF1YWxzRXBzaWxvbih2aWV3Qm91bmRTY2FsZSwgMS4wLCBDZXNpdW1NYXRoLkVQU0lMT045KVxuICAgICkge1xuICAgICAgdmFyIG5ld0hhbGZXaWR0aCA9IGJib3gud2lkdGggKiB2aWV3Qm91bmRTY2FsZSAqIDAuNTtcbiAgICAgIHZhciBuZXdIYWxmSGVpZ2h0ID0gYmJveC5oZWlnaHQgKiB2aWV3Qm91bmRTY2FsZSAqIDAuNTtcbiAgICAgIGJib3ggPSBuZXcgUmVjdGFuZ2xlKFxuICAgICAgICBmaXhMb25naXR1ZGUoY2VudGVyQ2FydG9ncmFwaGljLmxvbmdpdHVkZSAtIG5ld0hhbGZXaWR0aCksXG4gICAgICAgIGZpeExhdGl0dWRlKGNlbnRlckNhcnRvZ3JhcGhpYy5sYXRpdHVkZSAtIG5ld0hhbGZIZWlnaHQpLFxuICAgICAgICBmaXhMb25naXR1ZGUoY2VudGVyQ2FydG9ncmFwaGljLmxvbmdpdHVkZSArIG5ld0hhbGZXaWR0aCksXG4gICAgICAgIGZpeExhdGl0dWRlKGNlbnRlckNhcnRvZ3JhcGhpYy5sYXRpdHVkZSArIG5ld0hhbGZIZWlnaHQpXG4gICAgICApO1xuICAgIH1cblxuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcbiAgICAgIFwiW2Jib3hXZXN0XVwiLFxuICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMoYmJveC53ZXN0KS50b1N0cmluZygpXG4gICAgKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXG4gICAgICBcIltiYm94U291dGhdXCIsXG4gICAgICBDZXNpdW1NYXRoLnRvRGVncmVlcyhiYm94LnNvdXRoKS50b1N0cmluZygpXG4gICAgKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXG4gICAgICBcIltiYm94RWFzdF1cIixcbiAgICAgIENlc2l1bU1hdGgudG9EZWdyZWVzKGJib3guZWFzdCkudG9TdHJpbmcoKVxuICAgICk7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFxuICAgICAgXCJbYmJveE5vcnRoXVwiLFxuICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMoYmJveC5ub3J0aCkudG9TdHJpbmcoKVxuICAgICk7XG5cbiAgICB2YXIgbG9uID0gQ2VzaXVtTWF0aC50b0RlZ3JlZXMoY2VudGVyQ2FydG9ncmFwaGljLmxvbmdpdHVkZSkudG9TdHJpbmcoKTtcbiAgICB2YXIgbGF0ID0gQ2VzaXVtTWF0aC50b0RlZ3JlZXMoY2VudGVyQ2FydG9ncmFwaGljLmxhdGl0dWRlKS50b1N0cmluZygpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltsb29rYXRMb25dXCIsIGxvbik7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2xvb2thdExhdF1cIiwgbGF0KTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXG4gICAgICBcIltsb29rYXRUaWx0XVwiLFxuICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMoY2FtZXJhLnBpdGNoKS50b1N0cmluZygpXG4gICAgKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXG4gICAgICBcIltsb29rYXRIZWFkaW5nXVwiLFxuICAgICAgQ2VzaXVtTWF0aC50b0RlZ3JlZXMoY2FtZXJhLmhlYWRpbmcpLnRvU3RyaW5nKClcbiAgICApO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcbiAgICAgIFwiW2xvb2thdFJhbmdlXVwiLFxuICAgICAgQ2FydGVzaWFuMy5kaXN0YW5jZShjYW1lcmEucG9zaXRpb25XQywgY2VudGVyQ2FydGVzaWFuKVxuICAgICk7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2xvb2thdFRlcnJhaW5Mb25dXCIsIGxvbik7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2xvb2thdFRlcnJhaW5MYXRdXCIsIGxhdCk7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFxuICAgICAgXCJbbG9va2F0VGVycmFpbkFsdF1cIixcbiAgICAgIGNlbnRlckNhcnRvZ3JhcGhpYy5oZWlnaHQudG9TdHJpbmcoKVxuICAgICk7XG5cbiAgICBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoY2FtZXJhLnBvc2l0aW9uV0MsIHNjcmF0Y2hDYXJ0b2dyYXBoaWMpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcbiAgICAgIFwiW2NhbWVyYUxvbl1cIixcbiAgICAgIENlc2l1bU1hdGgudG9EZWdyZWVzKHNjcmF0Y2hDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlKS50b1N0cmluZygpXG4gICAgKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXG4gICAgICBcIltjYW1lcmFMYXRdXCIsXG4gICAgICBDZXNpdW1NYXRoLnRvRGVncmVlcyhzY3JhdGNoQ2FydG9ncmFwaGljLmxhdGl0dWRlKS50b1N0cmluZygpXG4gICAgKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXG4gICAgICBcIltjYW1lcmFBbHRdXCIsXG4gICAgICBDZXNpdW1NYXRoLnRvRGVncmVlcyhzY3JhdGNoQ2FydG9ncmFwaGljLmhlaWdodCkudG9TdHJpbmcoKVxuICAgICk7XG5cbiAgICB2YXIgZnJ1c3R1bSA9IGNhbWVyYS5mcnVzdHVtO1xuICAgIHZhciBhc3BlY3RSYXRpbyA9IGZydXN0dW0uYXNwZWN0UmF0aW87XG4gICAgdmFyIGhvcml6Rm92ID0gXCJcIjtcbiAgICB2YXIgdmVydEZvdiA9IFwiXCI7XG4gICAgaWYgKGRlZmluZWQoYXNwZWN0UmF0aW8pKSB7XG4gICAgICB2YXIgZm92ID0gQ2VzaXVtTWF0aC50b0RlZ3JlZXMoZnJ1c3R1bS5mb3YpO1xuICAgICAgaWYgKGFzcGVjdFJhdGlvID4gMS4wKSB7XG4gICAgICAgIGhvcml6Rm92ID0gZm92O1xuICAgICAgICB2ZXJ0Rm92ID0gZm92IC8gYXNwZWN0UmF0aW87XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ZXJ0Rm92ID0gZm92O1xuICAgICAgICBob3JpekZvdiA9IGZvdiAqIGFzcGVjdFJhdGlvO1xuICAgICAgfVxuICAgIH1cbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXCJbaG9yaXpGb3ZdXCIsIGhvcml6Rm92LnRvU3RyaW5nKCkpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIlt2ZXJ0Rm92XVwiLCB2ZXJ0Rm92LnRvU3RyaW5nKCkpO1xuICB9IGVsc2Uge1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltiYm94V2VzdF1cIiwgXCItMTgwXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltiYm94U291dGhdXCIsIFwiLTkwXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltiYm94RWFzdF1cIiwgXCIxODBcIik7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2Jib3hOb3J0aF1cIiwgXCI5MFwiKTtcblxuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltsb29rYXRMb25dXCIsIFwiXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltsb29rYXRMYXRdXCIsIFwiXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltsb29rYXRSYW5nZV1cIiwgXCJcIik7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2xvb2thdFRpbHRdXCIsIFwiXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltsb29rYXRIZWFkaW5nXVwiLCBcIlwiKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXCJbbG9va2F0VGVycmFpbkxvbl1cIiwgXCJcIik7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2xvb2thdFRlcnJhaW5MYXRdXCIsIFwiXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltsb29rYXRUZXJyYWluQWx0XVwiLCBcIlwiKTtcblxuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltjYW1lcmFMb25dXCIsIFwiXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltjYW1lcmFMYXRdXCIsIFwiXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltjYW1lcmFBbHRdXCIsIFwiXCIpO1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltob3JpekZvdl1cIiwgXCJcIik7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW3ZlcnRGb3ZdXCIsIFwiXCIpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQoY2FudmFzKSkge1xuICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltob3JpelBpeGVsc11cIiwgY2FudmFzLmNsaWVudFdpZHRoKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXCJbdmVydFBpeGVsc11cIiwgY2FudmFzLmNsaWVudEhlaWdodCk7XG4gIH0gZWxzZSB7XG4gICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2hvcml6UGl4ZWxzXVwiLCBcIlwiKTtcbiAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXCJbdmVydFBpeGVsc11cIiwgXCJcIik7XG4gIH1cblxuICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXCJbdGVycmFpbkVuYWJsZWRdXCIsIFwiMVwiKTtcbiAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2NsaWVudFZlcnNpb25dXCIsIFwiMVwiKTtcbiAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5yZXBsYWNlKFwiW2ttbFZlcnNpb25dXCIsIFwiMi4yXCIpO1xuICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnJlcGxhY2UoXCJbY2xpZW50TmFtZV1cIiwgXCJDZXNpdW1cIik7XG4gIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcucmVwbGFjZShcIltsYW5ndWFnZV1cIiwgXCJFbmdsaXNoXCIpO1xuXG4gIHJlc291cmNlLnNldFF1ZXJ5UGFyYW1ldGVycyhxdWVyeVRvT2JqZWN0KHF1ZXJ5U3RyaW5nKSk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NOZXR3b3JrTGluayhkYXRhU291cmNlLCBub2RlLCBwcm9jZXNzaW5nRGF0YSwgZGVmZXJyZWRMb2FkaW5nKSB7XG4gIHZhciByID0gcHJvY2Vzc0ZlYXR1cmUoZGF0YVNvdXJjZSwgbm9kZSwgcHJvY2Vzc2luZ0RhdGEpO1xuICB2YXIgbmV0d29ya0VudGl0eSA9IHIuZW50aXR5O1xuXG4gIHZhciBzb3VyY2VSZXNvdXJjZSA9IHByb2Nlc3NpbmdEYXRhLnNvdXJjZVJlc291cmNlO1xuICB2YXIgdXJpUmVzb2x2ZXIgPSBwcm9jZXNzaW5nRGF0YS51cmlSZXNvbHZlcjtcblxuICB2YXIgbGluayA9IHF1ZXJ5Rmlyc3ROb2RlKG5vZGUsIFwiTGlua1wiLCBuYW1lc3BhY2VzLmttbCk7XG5cbiAgaWYgKCFkZWZpbmVkKGxpbmspKSB7XG4gICAgbGluayA9IHF1ZXJ5Rmlyc3ROb2RlKG5vZGUsIFwiVXJsXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgfVxuICBpZiAoZGVmaW5lZChsaW5rKSkge1xuICAgIHZhciBocmVmID0gcXVlcnlTdHJpbmdWYWx1ZShsaW5rLCBcImhyZWZcIiwgbmFtZXNwYWNlcy5rbWwpO1xuICAgIHZhciB2aWV3UmVmcmVzaE1vZGU7XG4gICAgdmFyIHZpZXdCb3VuZFNjYWxlO1xuICAgIGlmIChkZWZpbmVkKGhyZWYpKSB7XG4gICAgICB2YXIgbmV3U291cmNlVXJpID0gaHJlZjtcbiAgICAgIGhyZWYgPSByZXNvbHZlSHJlZihocmVmLCBzb3VyY2VSZXNvdXJjZSwgcHJvY2Vzc2luZ0RhdGEudXJpUmVzb2x2ZXIpO1xuXG4gICAgICAvLyBXZSBuZWVkIHRvIHBhc3MgaW4gdGhlIG9yaWdpbmFsIHBhdGggaWYgcmVzb2x2ZUhyZWYgcmV0dXJucyBhIGRhdGEgdXJpIGJlY2F1c2UgdGhlIG5ldHdvcmsgbGlua1xuICAgICAgLy8gIHJlZmVyZW5jZXMgYSBkb2N1bWVudCBpbiBhIEtNWiBhcmNoaXZlXG4gICAgICBpZiAoL15kYXRhOi8udGVzdChocmVmLmdldFVybENvbXBvbmVudCgpKSkge1xuICAgICAgICAvLyBTbyBpZiBzb3VyY2VVcmkgaXNuJ3QgdGhlIGtteiBmaWxlLCB0aGVuIGl0cyBhbm90aGVyIGttbCBpbiB0aGUgYXJjaGl2ZSwgc28gcmVzb2x2ZSBpdFxuICAgICAgICBpZiAoIS9cXC5rbXovaS50ZXN0KHNvdXJjZVJlc291cmNlLmdldFVybENvbXBvbmVudCgpKSkge1xuICAgICAgICAgIG5ld1NvdXJjZVVyaSA9IHNvdXJjZVJlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgICAgICAgICB1cmw6IG5ld1NvdXJjZVVyaSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3U291cmNlVXJpID0gaHJlZi5jbG9uZSgpOyAvLyBOb3QgYSBkYXRhIHVyaSBzbyB1c2UgdGhlIGZ1bGx5IHF1YWxpZmllZCB1cmlcbiAgICAgICAgdmlld1JlZnJlc2hNb2RlID0gcXVlcnlTdHJpbmdWYWx1ZShcbiAgICAgICAgICBsaW5rLFxuICAgICAgICAgIFwidmlld1JlZnJlc2hNb2RlXCIsXG4gICAgICAgICAgbmFtZXNwYWNlcy5rbWxcbiAgICAgICAgKTtcbiAgICAgICAgdmlld0JvdW5kU2NhbGUgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgICAgcXVlcnlTdHJpbmdWYWx1ZShsaW5rLCBcInZpZXdCb3VuZFNjYWxlXCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgICAgICAxLjBcbiAgICAgICAgKTtcbiAgICAgICAgdmFyIGRlZmF1bHRWaWV3Rm9ybWF0ID1cbiAgICAgICAgICB2aWV3UmVmcmVzaE1vZGUgPT09IFwib25TdG9wXCJcbiAgICAgICAgICAgID8gXCJCQk9YPVtiYm94V2VzdF0sW2Jib3hTb3V0aF0sW2Jib3hFYXN0XSxbYmJveE5vcnRoXVwiXG4gICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIHZhciB2aWV3Rm9ybWF0ID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgIHF1ZXJ5U3RyaW5nVmFsdWUobGluaywgXCJ2aWV3Rm9ybWF0XCIsIG5hbWVzcGFjZXMua21sKSxcbiAgICAgICAgICBkZWZhdWx0Vmlld0Zvcm1hdFxuICAgICAgICApO1xuICAgICAgICB2YXIgaHR0cFF1ZXJ5ID0gcXVlcnlTdHJpbmdWYWx1ZShsaW5rLCBcImh0dHBRdWVyeVwiLCBuYW1lc3BhY2VzLmttbCk7XG4gICAgICAgIGlmIChkZWZpbmVkKHZpZXdGb3JtYXQpKSB7XG4gICAgICAgICAgaHJlZi5zZXRRdWVyeVBhcmFtZXRlcnMocXVlcnlUb09iamVjdChjbGVhbnVwU3RyaW5nKHZpZXdGb3JtYXQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluZWQoaHR0cFF1ZXJ5KSkge1xuICAgICAgICAgIGhyZWYuc2V0UXVlcnlQYXJhbWV0ZXJzKHF1ZXJ5VG9PYmplY3QoY2xlYW51cFN0cmluZyhodHRwUXVlcnkpKSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWxsaXBzb2lkID0gZGF0YVNvdXJjZS5fZWxsaXBzb2lkO1xuICAgICAgICBwcm9jZXNzTmV0d29ya0xpbmtRdWVyeVN0cmluZyhcbiAgICAgICAgICBocmVmLFxuICAgICAgICAgIGRhdGFTb3VyY2UuX2NhbWVyYSxcbiAgICAgICAgICBkYXRhU291cmNlLl9jYW52YXMsXG4gICAgICAgICAgdmlld0JvdW5kU2NhbGUsXG4gICAgICAgICAgZGF0YVNvdXJjZS5fbGFzdENhbWVyYVZpZXcuYmJveCxcbiAgICAgICAgICBlbGxpcHNvaWRcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIHNvdXJjZVVyaTogbmV3U291cmNlVXJpLFxuICAgICAgICB1cmlSZXNvbHZlcjogdXJpUmVzb2x2ZXIsXG4gICAgICAgIGNvbnRleHQ6IG5ldHdvcmtFbnRpdHkuaWQsXG4gICAgICB9O1xuICAgICAgdmFyIG5ldHdvcmtMaW5rQ29sbGVjdGlvbiA9IG5ldyBFbnRpdHlDb2xsZWN0aW9uKCk7XG4gICAgICB2YXIgcHJvbWlzZSA9IGxvYWQoZGF0YVNvdXJjZSwgbmV0d29ya0xpbmtDb2xsZWN0aW9uLCBocmVmLCBvcHRpb25zKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgZW50aXRpZXMgPSBkYXRhU291cmNlLl9lbnRpdHlDb2xsZWN0aW9uO1xuICAgICAgICAgIHZhciBuZXdFbnRpdGllcyA9IG5ldHdvcmtMaW5rQ29sbGVjdGlvbi52YWx1ZXM7XG4gICAgICAgICAgZW50aXRpZXMuc3VzcGVuZEV2ZW50cygpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3RW50aXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuZXdFbnRpdHkgPSBuZXdFbnRpdGllc1tpXTtcbiAgICAgICAgICAgIGlmICghZGVmaW5lZChuZXdFbnRpdHkucGFyZW50KSkge1xuICAgICAgICAgICAgICBuZXdFbnRpdHkucGFyZW50ID0gbmV0d29ya0VudGl0eTtcbiAgICAgICAgICAgICAgbWVyZ2VBdmFpbGFiaWxpdHlXaXRoUGFyZW50KG5ld0VudGl0eSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVudGl0aWVzLmFkZChuZXdFbnRpdHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbnRpdGllcy5yZXN1bWVFdmVudHMoKTtcblxuICAgICAgICAgIC8vIEFkZCBuZXR3b3JrIGxpbmtzIHRvIGEgbGlzdCBpZiB3ZSBuZWVkIHRoZXkgd2lsbCBuZWVkIHRvIGJlIHVwZGF0ZWRcbiAgICAgICAgICB2YXIgcmVmcmVzaE1vZGUgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgICAgICAgICAgbGluayxcbiAgICAgICAgICAgIFwicmVmcmVzaE1vZGVcIixcbiAgICAgICAgICAgIG5hbWVzcGFjZXMua21sXG4gICAgICAgICAgKTtcbiAgICAgICAgICB2YXIgcmVmcmVzaEludGVydmFsID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgICAgcXVlcnlOdW1lcmljVmFsdWUobGluaywgXCJyZWZyZXNoSW50ZXJ2YWxcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgICAgICAgMFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHJlZnJlc2hNb2RlID09PSBcIm9uSW50ZXJ2YWxcIiAmJiByZWZyZXNoSW50ZXJ2YWwgPiAwKSB8fFxuICAgICAgICAgICAgcmVmcmVzaE1vZGUgPT09IFwib25FeHBpcmVcIiB8fFxuICAgICAgICAgICAgdmlld1JlZnJlc2hNb2RlID09PSBcIm9uU3RvcFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB2YXIgbmV0d29ya0xpbmtDb250cm9sID0gcXVlcnlGaXJzdE5vZGUoXG4gICAgICAgICAgICAgIHJvb3RFbGVtZW50LFxuICAgICAgICAgICAgICBcIk5ldHdvcmtMaW5rQ29udHJvbFwiLFxuICAgICAgICAgICAgICBuYW1lc3BhY2VzLmttbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHZhciBoYXNOZXR3b3JrTGlua0NvbnRyb2wgPSBkZWZpbmVkKG5ldHdvcmtMaW5rQ29udHJvbCk7XG5cbiAgICAgICAgICAgIHZhciBub3cgPSBKdWxpYW5EYXRlLm5vdygpO1xuICAgICAgICAgICAgdmFyIG5ldHdvcmtMaW5rSW5mbyA9IHtcbiAgICAgICAgICAgICAgaWQ6IGNyZWF0ZUd1aWQoKSxcbiAgICAgICAgICAgICAgaHJlZjogaHJlZixcbiAgICAgICAgICAgICAgY29va2llOiB7fSxcbiAgICAgICAgICAgICAgbGFzdFVwZGF0ZWQ6IG5vdyxcbiAgICAgICAgICAgICAgdXBkYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBlbnRpdHk6IG5ldHdvcmtFbnRpdHksXG4gICAgICAgICAgICAgIHZpZXdCb3VuZFNjYWxlOiB2aWV3Qm91bmRTY2FsZSxcbiAgICAgICAgICAgICAgbmVlZHNVcGRhdGU6IGZhbHNlLFxuICAgICAgICAgICAgICBjYW1lcmFVcGRhdGVUaW1lOiBub3csXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWluUmVmcmVzaFBlcmlvZCA9IDA7XG4gICAgICAgICAgICBpZiAoaGFzTmV0d29ya0xpbmtDb250cm9sKSB7XG4gICAgICAgICAgICAgIG5ldHdvcmtMaW5rSW5mby5jb29raWUgPSBxdWVyeVRvT2JqZWN0KFxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZShcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nVmFsdWUoXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtMaW5rQ29udHJvbCxcbiAgICAgICAgICAgICAgICAgICAgXCJjb29raWVcIixcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlcy5rbWxcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBtaW5SZWZyZXNoUGVyaW9kID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgICAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKFxuICAgICAgICAgICAgICAgICAgbmV0d29ya0xpbmtDb250cm9sLFxuICAgICAgICAgICAgICAgICAgXCJtaW5SZWZyZXNoUGVyaW9kXCIsXG4gICAgICAgICAgICAgICAgICBuYW1lc3BhY2VzLmttbFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVmcmVzaE1vZGUgPT09IFwib25JbnRlcnZhbFwiKSB7XG4gICAgICAgICAgICAgIGlmIChoYXNOZXR3b3JrTGlua0NvbnRyb2wpIHtcbiAgICAgICAgICAgICAgICByZWZyZXNoSW50ZXJ2YWwgPSBNYXRoLm1heChtaW5SZWZyZXNoUGVyaW9kLCByZWZyZXNoSW50ZXJ2YWwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5ldHdvcmtMaW5rSW5mby5yZWZyZXNoTW9kZSA9IFJlZnJlc2hNb2RlLklOVEVSVkFMO1xuICAgICAgICAgICAgICBuZXR3b3JrTGlua0luZm8udGltZSA9IHJlZnJlc2hJbnRlcnZhbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVmcmVzaE1vZGUgPT09IFwib25FeHBpcmVcIikge1xuICAgICAgICAgICAgICB2YXIgZXhwaXJlcztcbiAgICAgICAgICAgICAgaWYgKGhhc05ldHdvcmtMaW5rQ29udHJvbCkge1xuICAgICAgICAgICAgICAgIGV4cGlyZXMgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgICAgICAgICAgICAgICAgbmV0d29ya0xpbmtDb250cm9sLFxuICAgICAgICAgICAgICAgICAgXCJleHBpcmVzXCIsXG4gICAgICAgICAgICAgICAgICBuYW1lc3BhY2VzLmttbFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRlZmluZWQoZXhwaXJlcykpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBKdWxpYW5EYXRlLmZyb21Jc284NjAxKGV4cGlyZXMpO1xuICAgICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBKdWxpYW5EYXRlLnNlY29uZHNEaWZmZXJlbmNlKGRhdGUsIG5vdyk7XG4gICAgICAgICAgICAgICAgICBpZiAoZGlmZiA+IDAgJiYgZGlmZiA8IG1pblJlZnJlc2hQZXJpb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgSnVsaWFuRGF0ZS5hZGRTZWNvbmRzKG5vdywgbWluUmVmcmVzaFBlcmlvZCwgZGF0ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBuZXR3b3JrTGlua0luZm8ucmVmcmVzaE1vZGUgPSBSZWZyZXNoTW9kZS5FWFBJUkU7XG4gICAgICAgICAgICAgICAgICBuZXR3b3JrTGlua0luZm8udGltZSA9IGRhdGU7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgICAgICAgICAgICAgIFwia21sLXJlZnJlc2hNb2RlLW9uSW50ZXJ2YWwtb25FeHBpcmVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJLTUwgLSBOZXR3b3JrTGlua0NvbnRyb2wgZXhwaXJlcyBpcyBub3QgYSB2YWxpZCBkYXRlXCJcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgICAgICAgICAgICAgXCJrbWwtcmVmcmVzaE1vZGUtb25FeHBpcmVcIixcbiAgICAgICAgICAgICAgICAgIFwiS01MIC0gcmVmcmVzaE1vZGUgb2Ygb25FeHBpcmUgcmVxdWlyZXMgdGhlIE5ldHdvcmtMaW5rQ29udHJvbCB0byBoYXZlIGFuIGV4cGlyZXMgZWxlbWVudFwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhU291cmNlLl9jYW1lcmEpIHtcbiAgICAgICAgICAgICAgLy8gT25seSBhbGxvdyBvblN0b3AgcmVmcmVzaGVzIGlmIHdlIGhhdmUgYSBjYW1lcmFcbiAgICAgICAgICAgICAgbmV0d29ya0xpbmtJbmZvLnJlZnJlc2hNb2RlID0gUmVmcmVzaE1vZGUuU1RPUDtcbiAgICAgICAgICAgICAgbmV0d29ya0xpbmtJbmZvLnRpbWUgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgICAgICAgICAgcXVlcnlOdW1lcmljVmFsdWUobGluaywgXCJ2aWV3UmVmcmVzaFRpbWVcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgICAgICAgICAgIFwia21sLXJlZnJlaE1vZGUtb25TdG9wLW5vQ2FtZXJhXCIsXG4gICAgICAgICAgICAgICAgXCJBIE5ldHdvcmtMaW5rIHdpdGggdmlld1JlZnJlc2hNb2RlPW9uU3RvcCByZXF1aXJlcyBhIGNhbWVyYSBiZSBwYXNzZWQgaW4gd2hlbiBjcmVhdGluZyB0aGUgS21sRGF0YVNvdXJjZVwiXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkZWZpbmVkKG5ldHdvcmtMaW5rSW5mby5yZWZyZXNoTW9kZSkpIHtcbiAgICAgICAgICAgICAgZGF0YVNvdXJjZS5fbmV0d29ya0xpbmtzLnNldChuZXR3b3JrTGlua0luZm8uaWQsIG5ldHdvcmtMaW5rSW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh2aWV3UmVmcmVzaE1vZGUgPT09IFwib25SZWdpb25cIikge1xuICAgICAgICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgICAgICAgIFwia21sLXJlZnJlaE1vZGUtb25SZWdpb25cIixcbiAgICAgICAgICAgICAgXCJLTUwgLSBVbnN1cHBvcnRlZCB2aWV3UmVmcmVzaE1vZGU6IG9uUmVnaW9uXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIG9uZVRpbWVXYXJuaW5nKFwiQW4gZXJyb3Igb2NjdXJlZCBkdXJpbmcgbG9hZGluZyBcIiArIGhyZWYudXJsKTtcbiAgICAgICAgICBkYXRhU291cmNlLl9lcnJvci5yYWlzZUV2ZW50KGRhdGFTb3VyY2UsIGVycm9yKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGRlZmVycmVkTG9hZGluZy5hZGRQcm9taXNlKHByb21pc2UpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzRmVhdHVyZU5vZGUoZGF0YVNvdXJjZSwgbm9kZSwgcHJvY2Vzc2luZ0RhdGEsIGRlZmVycmVkTG9hZGluZykge1xuICB2YXIgZmVhdHVyZVByb2Nlc3NvciA9IGZlYXR1cmVUeXBlc1tub2RlLmxvY2FsTmFtZV07XG4gIGlmIChkZWZpbmVkKGZlYXR1cmVQcm9jZXNzb3IpKSB7XG4gICAgcmV0dXJuIGZlYXR1cmVQcm9jZXNzb3IoZGF0YVNvdXJjZSwgbm9kZSwgcHJvY2Vzc2luZ0RhdGEsIGRlZmVycmVkTG9hZGluZyk7XG4gIH1cblxuICByZXR1cm4gcHJvY2Vzc1Vuc3VwcG9ydGVkRmVhdHVyZShcbiAgICBkYXRhU291cmNlLFxuICAgIG5vZGUsXG4gICAgcHJvY2Vzc2luZ0RhdGEsXG4gICAgZGVmZXJyZWRMb2FkaW5nXG4gICk7XG59XG5cbmZ1bmN0aW9uIGxvYWRLbWwoXG4gIGRhdGFTb3VyY2UsXG4gIGVudGl0eUNvbGxlY3Rpb24sXG4gIGttbCxcbiAgc291cmNlUmVzb3VyY2UsXG4gIHVyaVJlc29sdmVyLFxuICBjb250ZXh0XG4pIHtcbiAgZW50aXR5Q29sbGVjdGlvbi5yZW1vdmVBbGwoKTtcblxuICB2YXIgZG9jdW1lbnRFbGVtZW50ID0ga21sLmRvY3VtZW50RWxlbWVudDtcbiAgdmFyIGRvY3VtZW50ID1cbiAgICBkb2N1bWVudEVsZW1lbnQubG9jYWxOYW1lID09PSBcIkRvY3VtZW50XCJcbiAgICAgID8gZG9jdW1lbnRFbGVtZW50XG4gICAgICA6IHF1ZXJ5Rmlyc3ROb2RlKGRvY3VtZW50RWxlbWVudCwgXCJEb2N1bWVudFwiLCBuYW1lc3BhY2VzLmttbCk7XG4gIHZhciBuYW1lID0gcXVlcnlTdHJpbmdWYWx1ZShkb2N1bWVudCwgXCJuYW1lXCIsIG5hbWVzcGFjZXMua21sKTtcbiAgaWYgKCFkZWZpbmVkKG5hbWUpKSB7XG4gICAgbmFtZSA9IGdldEZpbGVuYW1lRnJvbVVyaShzb3VyY2VSZXNvdXJjZS5nZXRVcmxDb21wb25lbnQoKSk7XG4gIH1cblxuICAvLyBPbmx5IHNldCB0aGUgbmFtZSBmcm9tIHRoZSByb290IGRvY3VtZW50XG4gIGlmICghZGVmaW5lZChkYXRhU291cmNlLl9uYW1lKSkge1xuICAgIGRhdGFTb3VyY2UuX25hbWUgPSBuYW1lO1xuICB9XG5cbiAgdmFyIGRlZmVycmVkTG9hZGluZyA9IG5ldyBLbWxEYXRhU291cmNlLl9EZWZlcnJlZExvYWRpbmcoZGF0YVNvdXJjZSk7XG4gIHZhciBzdHlsZUNvbGxlY3Rpb24gPSBuZXcgRW50aXR5Q29sbGVjdGlvbihkYXRhU291cmNlKTtcbiAgcmV0dXJuIHdoZW5cbiAgICAuYWxsKFxuICAgICAgcHJvY2Vzc1N0eWxlcyhcbiAgICAgICAgZGF0YVNvdXJjZSxcbiAgICAgICAga21sLFxuICAgICAgICBzdHlsZUNvbGxlY3Rpb24sXG4gICAgICAgIHNvdXJjZVJlc291cmNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgdXJpUmVzb2x2ZXJcbiAgICAgIClcbiAgICApXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBrbWwuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgaWYgKGVsZW1lbnQubG9jYWxOYW1lID09PSBcImttbFwiKSB7XG4gICAgICAgIHZhciBjaGlsZE5vZGVzID0gZWxlbWVudC5jaGlsZE5vZGVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgdG1wID0gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICBpZiAoZGVmaW5lZChmZWF0dXJlVHlwZXNbdG1wLmxvY2FsTmFtZV0pKSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gdG1wO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9jZXNzaW5nRGF0YSA9IHtcbiAgICAgICAgcGFyZW50RW50aXR5OiB1bmRlZmluZWQsXG4gICAgICAgIGVudGl0eUNvbGxlY3Rpb246IGVudGl0eUNvbGxlY3Rpb24sXG4gICAgICAgIHN0eWxlQ29sbGVjdGlvbjogc3R5bGVDb2xsZWN0aW9uLFxuICAgICAgICBzb3VyY2VSZXNvdXJjZTogc291cmNlUmVzb3VyY2UsXG4gICAgICAgIHVyaVJlc29sdmVyOiB1cmlSZXNvbHZlcixcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgIH07XG5cbiAgICAgIGVudGl0eUNvbGxlY3Rpb24uc3VzcGVuZEV2ZW50cygpO1xuICAgICAgcHJvY2Vzc0ZlYXR1cmVOb2RlKGRhdGFTb3VyY2UsIGVsZW1lbnQsIHByb2Nlc3NpbmdEYXRhLCBkZWZlcnJlZExvYWRpbmcpO1xuICAgICAgZW50aXR5Q29sbGVjdGlvbi5yZXN1bWVFdmVudHMoKTtcblxuICAgICAgcmV0dXJuIGRlZmVycmVkTG9hZGluZy53YWl0KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBrbWwuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRLbXooZGF0YVNvdXJjZSwgZW50aXR5Q29sbGVjdGlvbiwgYmxvYiwgc291cmNlUmVzb3VyY2UpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyB6aXAuWmlwUmVhZGVyKG5ldyB6aXAuQmxvYlJlYWRlcihibG9iKSk7XG4gIHJldHVybiB3aGVuKHJlYWRlci5nZXRFbnRyaWVzKCkpLnRoZW4oZnVuY3Rpb24gKGVudHJpZXMpIHtcbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICB2YXIgdXJpUmVzb2x2ZXIgPSB7fTtcbiAgICB2YXIgZG9jRW50cnk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2ldO1xuICAgICAgaWYgKCFlbnRyeS5kaXJlY3RvcnkpIHtcbiAgICAgICAgaWYgKC9cXC5rbWwkL2kudGVzdChlbnRyeS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAvLyBXZSB1c2UgdGhlIGZpcnN0IEtNTCBkb2N1bWVudCB3ZSBjb21lIGFjcm9zc1xuICAgICAgICAgIC8vICBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9rbWwvZG9jdW1lbnRhdGlvbi9rbXphcmNoaXZlc1xuICAgICAgICAgIC8vIFVubGVzcyB3ZSBjb21lIGFjcm9zcyBhIC5rbWwgZmlsZSBhdCB0aGUgcm9vdCBvZiB0aGUgYXJjaGl2ZSBiZWNhdXNlIEdFIGRvZXMgdGhpc1xuICAgICAgICAgIGlmICghZGVmaW5lZChkb2NFbnRyeSkgfHwgIS9cXC8vaS50ZXN0KGVudHJ5LmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgaWYgKGRlZmluZWQoZG9jRW50cnkpKSB7XG4gICAgICAgICAgICAgIC8vIFdlIGZvdW5kIG9uZSBhdCB0aGUgcm9vdCBzbyBsb2FkIHRoZSBpbml0aWFsIGttbCBhcyBhIGRhdGEgdXJpXG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2gobG9hZERhdGFVcmlGcm9tWmlwKGRvY0VudHJ5LCB1cmlSZXNvbHZlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jRW50cnkgPSBlbnRyeTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gV2Fzbid0IHRoZSBmaXJzdCBrbWwgYW5kIHdhc24ndCBhdCB0aGUgcm9vdFxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChsb2FkRGF0YVVyaUZyb21aaXAoZW50cnksIHVyaVJlc29sdmVyKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb21pc2VzLnB1c2gobG9hZERhdGFVcmlGcm9tWmlwKGVudHJ5LCB1cmlSZXNvbHZlcikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm93IGxvYWQgdGhlIHJvb3QgS01MIGRvY3VtZW50XG4gICAgaWYgKGRlZmluZWQoZG9jRW50cnkpKSB7XG4gICAgICBwcm9taXNlcy5wdXNoKGxvYWRYbWxGcm9tWmlwKGRvY0VudHJ5LCB1cmlSZXNvbHZlcikpO1xuICAgIH1cbiAgICByZXR1cm4gd2hlbi5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmVhZGVyLmNsb3NlKCk7XG4gICAgICBpZiAoIWRlZmluZWQodXJpUmVzb2x2ZXIua21sKSkge1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFwiS01aIGZpbGUgZG9lcyBub3QgY29udGFpbiBhIEtNTCBkb2N1bWVudC5cIik7XG4gICAgICB9XG4gICAgICB1cmlSZXNvbHZlci5rZXlzID0gT2JqZWN0LmtleXModXJpUmVzb2x2ZXIpO1xuICAgICAgcmV0dXJuIGxvYWRLbWwoXG4gICAgICAgIGRhdGFTb3VyY2UsXG4gICAgICAgIGVudGl0eUNvbGxlY3Rpb24sXG4gICAgICAgIHVyaVJlc29sdmVyLmttbCxcbiAgICAgICAgc291cmNlUmVzb3VyY2UsXG4gICAgICAgIHVyaVJlc29sdmVyXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZChkYXRhU291cmNlLCBlbnRpdHlDb2xsZWN0aW9uLCBkYXRhLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBzb3VyY2VVcmkgPSBvcHRpb25zLnNvdXJjZVVyaTtcbiAgdmFyIHVyaVJlc29sdmVyID0gb3B0aW9ucy51cmlSZXNvbHZlcjtcbiAgdmFyIGNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQ7XG5cbiAgdmFyIHByb21pc2UgPSBkYXRhO1xuICBpZiAodHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgfHwgZGF0YSBpbnN0YW5jZW9mIFJlc291cmNlKSB7XG4gICAgZGF0YSA9IFJlc291cmNlLmNyZWF0ZUlmTmVlZGVkKGRhdGEpO1xuICAgIHByb21pc2UgPSBkYXRhLmZldGNoQmxvYigpO1xuICAgIHNvdXJjZVVyaSA9IGRlZmF1bHRWYWx1ZShzb3VyY2VVcmksIGRhdGEuY2xvbmUoKSk7XG5cbiAgICAvLyBBZGQgcmVzb3VyY2UgY3JlZGl0cyB0byBvdXIgbGlzdCBvZiBjcmVkaXRzIHRvIGRpc3BsYXlcbiAgICB2YXIgcmVzb3VyY2VDcmVkaXRzID0gZGF0YVNvdXJjZS5fcmVzb3VyY2VDcmVkaXRzO1xuICAgIHZhciBjcmVkaXRzID0gZGF0YS5jcmVkaXRzO1xuICAgIGlmIChkZWZpbmVkKGNyZWRpdHMpKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gY3JlZGl0cy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc291cmNlQ3JlZGl0cy5wdXNoKGNyZWRpdHNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzb3VyY2VVcmkgPSBkZWZhdWx0VmFsdWUoc291cmNlVXJpLCBSZXNvdXJjZS5ERUZBVUxULmNsb25lKCkpO1xuICB9XG5cbiAgc291cmNlVXJpID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQoc291cmNlVXJpKTtcblxuICByZXR1cm4gd2hlbihwcm9taXNlKVxuICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhVG9Mb2FkKSB7XG4gICAgICBpZiAoZGF0YVRvTG9hZCBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgcmV0dXJuIGlzWmlwRmlsZShkYXRhVG9Mb2FkKS50aGVuKGZ1bmN0aW9uIChpc1ppcCkge1xuICAgICAgICAgIGlmIChpc1ppcCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRLbXooZGF0YVNvdXJjZSwgZW50aXR5Q29sbGVjdGlvbiwgZGF0YVRvTG9hZCwgc291cmNlVXJpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KGRhdGFUb0xvYWQpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICAgIC8vVGhlcmUncyBubyBvZmZpY2lhbCB3YXkgdG8gdmFsaWRhdGUgaWYgYSBwYXJzZSB3YXMgc3VjY2Vzc2Z1bC5cbiAgICAgICAgICAgIC8vVGhlIGZvbGxvd2luZyBjaGVjayBkZXRlY3RzIHRoZSBlcnJvciBvbiB2YXJpb3VzIGJyb3dzZXJzLlxuXG4gICAgICAgICAgICAvL0luc2VydCBtaXNzaW5nIG5hbWVzcGFjZXNcbiAgICAgICAgICAgIHRleHQgPSBpbnNlcnROYW1lc3BhY2VzKHRleHQpO1xuXG4gICAgICAgICAgICAvL1JlbW92ZSBEdXBsaWNhdGUgTmFtZXNwYWNlc1xuICAgICAgICAgICAgdGV4dCA9IHJlbW92ZUR1cGxpY2F0ZU5hbWVzcGFjZXModGV4dCk7XG5cbiAgICAgICAgICAgIC8vSUUgcmFpc2VzIGFuIGV4Y2VwdGlvblxuICAgICAgICAgICAgdmFyIGttbDtcbiAgICAgICAgICAgIHZhciBlcnJvcjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGttbCA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcodGV4dCwgXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGVycm9yID0gZS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1RoZSBwYXJzZSBzdWNjZWVkcyBvbiBDaHJvbWUgYW5kIEZpcmVmb3gsIGJ1dCB0aGUgZXJyb3JcbiAgICAgICAgICAgIC8vaGFuZGxpbmcgaXMgZGlmZmVyZW50IGluIGVhY2guXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGRlZmluZWQoZXJyb3IpIHx8XG4gICAgICAgICAgICAgIGttbC5ib2R5IHx8XG4gICAgICAgICAgICAgIGttbC5kb2N1bWVudEVsZW1lbnQudGFnTmFtZSA9PT0gXCJwYXJzZXJlcnJvclwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgLy9GaXJlZm94IGhhcyBlcnJvciBpbmZvcm1hdGlvbiBhcyB0aGUgZmlyc3RDaGlsZCBub2RlVmFsdWUuXG4gICAgICAgICAgICAgIHZhciBtc2cgPSBkZWZpbmVkKGVycm9yKVxuICAgICAgICAgICAgICAgID8gZXJyb3JcbiAgICAgICAgICAgICAgICA6IGttbC5kb2N1bWVudEVsZW1lbnQuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG5cbiAgICAgICAgICAgICAgLy9DaHJvbWUgaGFzIGl0IGluIHRoZSBib2R5IHRleHQuXG4gICAgICAgICAgICAgIGlmICghbXNnKSB7XG4gICAgICAgICAgICAgICAgbXNnID0ga21sLmJvZHkuaW5uZXJUZXh0O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy9SZXR1cm4gdGhlIGVycm9yXG4gICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IobXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2FkS21sKFxuICAgICAgICAgICAgICBkYXRhU291cmNlLFxuICAgICAgICAgICAgICBlbnRpdHlDb2xsZWN0aW9uLFxuICAgICAgICAgICAgICBrbWwsXG4gICAgICAgICAgICAgIHNvdXJjZVVyaSxcbiAgICAgICAgICAgICAgdXJpUmVzb2x2ZXIsXG4gICAgICAgICAgICAgIGNvbnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxvYWRLbWwoXG4gICAgICAgIGRhdGFTb3VyY2UsXG4gICAgICAgIGVudGl0eUNvbGxlY3Rpb24sXG4gICAgICAgIGRhdGFUb0xvYWQsXG4gICAgICAgIHNvdXJjZVVyaSxcbiAgICAgICAgdXJpUmVzb2x2ZXIsXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgZGF0YVNvdXJjZS5fZXJyb3IucmFpc2VFdmVudChkYXRhU291cmNlLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICByZXR1cm4gd2hlbi5yZWplY3QoZXJyb3IpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEttbERhdGFTb3VyY2UuTG9hZE9wdGlvbnNcbiAqXG4gKiBJbml0aWFsaXphdGlvbiBvcHRpb25zIGZvciB0aGUgYGxvYWRgIG1ldGhvZC5cbiAqXG4gKiBAcHJvcGVydHkge0NhbWVyYX0gY2FtZXJhIFRoZSBjYW1lcmEgdGhhdCBpcyB1c2VkIGZvciB2aWV3UmVmcmVzaE1vZGVzIGFuZCBzZW5kaW5nIGNhbWVyYSBwcm9wZXJ0aWVzIHRvIG5ldHdvcmsgbGlua3MuXG4gKiBAcHJvcGVydHkge0hUTUxDYW52YXNFbGVtZW50fSBjYW52YXMgVGhlIGNhbnZhcyB0aGF0IGlzIHVzZWQgZm9yIHNlbmRpbmcgdmlld2VyIHByb3BlcnRpZXMgdG8gbmV0d29yayBsaW5rcy5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbc291cmNlVXJpXSBPdmVycmlkZXMgdGhlIHVybCB0byB1c2UgZm9yIHJlc29sdmluZyByZWxhdGl2ZSBsaW5rcyBhbmQgb3RoZXIgS01MIG5ldHdvcmsgZmVhdHVyZXMuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtjbGFtcFRvR3JvdW5kPWZhbHNlXSB0cnVlIGlmIHdlIHdhbnQgdGhlIGdlb21ldHJ5IGZlYXR1cmVzIChQb2x5Z29ucywgTGluZVN0cmluZ3MgYW5kIExpbmVhclJpbmdzKSBjbGFtcGVkIHRvIHRoZSBncm91bmQuXG4gKiBAcHJvcGVydHkge0VsbGlwc29pZH0gW2VsbGlwc29pZD1FbGxpcHNvaWQuV0dTODRdIFRoZSBnbG9iYWwgZWxsaXBzb2lkIHVzZWQgZm9yIGdlb2dyYXBoaWNhbCBjYWxjdWxhdGlvbnMuXG4gKiBAcHJvcGVydHkge0NyZWRpdHxTdHJpbmd9IFtjcmVkaXRdIEEgY3JlZGl0IGZvciB0aGUgZGF0YSBzb3VyY2UsIHdoaWNoIGlzIGRpc3BsYXllZCBvbiB0aGUgY2FudmFzLlxuICovXG5cbi8qKlxuICogQSB7QGxpbmsgRGF0YVNvdXJjZX0gd2hpY2ggcHJvY2Vzc2VzIEtleWhvbGUgTWFya3VwIExhbmd1YWdlIDIuMiAoS01MKS5cbiAqIDxwPlxuICogS01MIHN1cHBvcnQgaW4gQ2VzaXVtIGlzIGluY29tcGxldGUsIGJ1dCBhIGxhcmdlIGFtb3VudCBvZiB0aGUgc3RhbmRhcmQsXG4gKiBhcyB3ZWxsIGFzIEdvb2dsZSdzIDxjb2RlPmd4PC9jb2RlPiBleHRlbnNpb24gbmFtZXNwYWNlLCBpcyBzdXBwb3J0ZWQuIFNlZSBHaXRodWIgaXNzdWVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvY2VzaXVtL2lzc3Vlcy84NzN8Izg3M30gZm9yIGFcbiAqIGRldGFpbGVkIGxpc3Qgb2Ygd2hhdCBpcyBhbmQgaXNuJ3Qgc3VwcG9ydC4gQ2VzaXVtIHdpbGwgYWxzbyB3cml0ZSBpbmZvcm1hdGlvbiB0byB0aGVcbiAqIGNvbnNvbGUgd2hlbiBpdCBlbmNvdW50ZXJzIG1vc3QgdW5zdXBwb3J0ZWQgZmVhdHVyZXMuXG4gKiA8L3A+XG4gKiA8cD5cbiAqIE5vbiB2aXN1YWwgZmVhdHVyZSBkYXRhLCBzdWNoIGFzIDxjb2RlPmF0b206YXV0aG9yPC9jb2RlPiBhbmQgPGNvZGU+RXh0ZW5kZWREYXRhPC9jb2RlPlxuICogaXMgZXhwb3NlZCB2aWEgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIEttbEZlYXR1cmVEYXRhfSwgd2hpY2ggaXMgYWRkZWQgdG8gZWFjaCB7QGxpbmsgRW50aXR5fVxuICogdW5kZXIgdGhlIDxjb2RlPmttbDwvY29kZT4gcHJvcGVydHkuXG4gKiA8L3A+XG4gKlxuICogQGFsaWFzIEttbERhdGFTb3VyY2VcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7Q2FtZXJhfSBvcHRpb25zLmNhbWVyYSBUaGUgY2FtZXJhIHRoYXQgaXMgdXNlZCBmb3Igdmlld1JlZnJlc2hNb2RlcyBhbmQgc2VuZGluZyBjYW1lcmEgcHJvcGVydGllcyB0byBuZXR3b3JrIGxpbmtzLlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gb3B0aW9ucy5jYW52YXMgVGhlIGNhbnZhcyB0aGF0IGlzIHVzZWQgZm9yIHNlbmRpbmcgdmlld2VyIHByb3BlcnRpZXMgdG8gbmV0d29yayBsaW5rcy5cbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbb3B0aW9ucy5lbGxpcHNvaWQ9RWxsaXBzb2lkLldHUzg0XSBUaGUgZ2xvYmFsIGVsbGlwc29pZCB1c2VkIGZvciBnZW9ncmFwaGljYWwgY2FsY3VsYXRpb25zLlxuICogQHBhcmFtIHtDcmVkaXR8U3RyaW5nfSBbb3B0aW9ucy5jcmVkaXRdIEEgY3JlZGl0IGZvciB0aGUgZGF0YSBzb3VyY2UsIHdoaWNoIGlzIGRpc3BsYXllZCBvbiB0aGUgY2FudmFzLlxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cub3Blbmdlb3NwYXRpYWwub3JnL3N0YW5kYXJkcy9rbWwvfE9wZW4gR2Vvc3BhdGlhbCBDb25zb3J0aXVtIEtNTCBTdGFuZGFyZH1cbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2ttbC98R29vZ2xlIEtNTCBEb2N1bWVudGF0aW9ufVxuICpcbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1LTUwuaHRtbHxDZXNpdW0gU2FuZGNhc3RsZSBLTUwgRGVtb31cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHZpZXdlciA9IG5ldyBDZXNpdW0uVmlld2VyKCdjZXNpdW1Db250YWluZXInKTtcbiAqIHZpZXdlci5kYXRhU291cmNlcy5hZGQoQ2VzaXVtLkttbERhdGFTb3VyY2UubG9hZCgnLi4vLi4vU2FtcGxlRGF0YS9mYWNpbGl0aWVzLmtteicsXG4gKiAgICAgIHtcbiAqICAgICAgICAgICBjYW1lcmE6IHZpZXdlci5zY2VuZS5jYW1lcmEsXG4gKiAgICAgICAgICAgY2FudmFzOiB2aWV3ZXIuc2NlbmUuY2FudmFzXG4gKiAgICAgIH0pXG4gKiApO1xuICovXG5mdW5jdGlvbiBLbWxEYXRhU291cmNlKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIGNhbWVyYSA9IG9wdGlvbnMuY2FtZXJhO1xuICB2YXIgY2FudmFzID0gb3B0aW9ucy5jYW52YXM7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGNhbWVyYSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJvcHRpb25zLmNhbWVyYSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKGNhbnZhcykpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJvcHRpb25zLmNhbnZhcyBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdGhpcy5fY2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9lcnJvciA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9sb2FkaW5nID0gbmV3IEV2ZW50KCk7XG4gIHRoaXMuX3JlZnJlc2ggPSBuZXcgRXZlbnQoKTtcbiAgdGhpcy5fdW5zdXBwb3J0ZWROb2RlID0gbmV3IEV2ZW50KCk7XG5cbiAgdGhpcy5fY2xvY2sgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2VudGl0eUNvbGxlY3Rpb24gPSBuZXcgRW50aXR5Q29sbGVjdGlvbih0aGlzKTtcbiAgdGhpcy5fbmFtZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5faXNMb2FkaW5nID0gZmFsc2U7XG4gIHRoaXMuX3BpbkJ1aWxkZXIgPSBuZXcgUGluQnVpbGRlcigpO1xuICB0aGlzLl9uZXR3b3JrTGlua3MgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuICB0aGlzLl9lbnRpdHlDbHVzdGVyID0gbmV3IEVudGl0eUNsdXN0ZXIoKTtcblxuICB0aGlzLl9jYW52YXMgPSBjYW52YXM7XG4gIHRoaXMuX2NhbWVyYSA9IGNhbWVyYTtcbiAgdGhpcy5fbGFzdENhbWVyYVZpZXcgPSB7XG4gICAgcG9zaXRpb246IGRlZmluZWQoY2FtZXJhKSA/IENhcnRlc2lhbjMuY2xvbmUoY2FtZXJhLnBvc2l0aW9uV0MpIDogdW5kZWZpbmVkLFxuICAgIGRpcmVjdGlvbjogZGVmaW5lZChjYW1lcmEpXG4gICAgICA/IENhcnRlc2lhbjMuY2xvbmUoY2FtZXJhLmRpcmVjdGlvbldDKVxuICAgICAgOiB1bmRlZmluZWQsXG4gICAgdXA6IGRlZmluZWQoY2FtZXJhKSA/IENhcnRlc2lhbjMuY2xvbmUoY2FtZXJhLnVwV0MpIDogdW5kZWZpbmVkLFxuICAgIGJib3g6IGRlZmluZWQoY2FtZXJhKVxuICAgICAgPyBjYW1lcmEuY29tcHV0ZVZpZXdSZWN0YW5nbGUoKVxuICAgICAgOiBSZWN0YW5nbGUuY2xvbmUoUmVjdGFuZ2xlLk1BWF9WQUxVRSksXG4gIH07XG5cbiAgdGhpcy5fZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZWxsaXBzb2lkLCBFbGxpcHNvaWQuV0dTODQpO1xuXG4gIC8vIFVzZXIgc3BlY2lmaWVkIGNyZWRpdFxuICB2YXIgY3JlZGl0ID0gb3B0aW9ucy5jcmVkaXQ7XG4gIGlmICh0eXBlb2YgY3JlZGl0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY3JlZGl0ID0gbmV3IENyZWRpdChjcmVkaXQpO1xuICB9XG4gIHRoaXMuX2NyZWRpdCA9IGNyZWRpdDtcblxuICAvLyBDcmVhdGUgYSBsaXN0IG9mIENyZWRpdCdzIGZyb20gdGhlIHJlc291cmNlIHRoYXQgdGhlIHVzZXIgY2FuJ3QgcmVtb3ZlXG4gIHRoaXMuX3Jlc291cmNlQ3JlZGl0cyA9IFtdO1xuXG4gIHRoaXMuX2ttbFRvdXJzID0gW107XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb21pc2UgdG8gYSBuZXcgaW5zdGFuY2UgbG9hZGVkIHdpdGggdGhlIHByb3ZpZGVkIEtNTCBkYXRhLlxuICpcbiAqIEBwYXJhbSB7UmVzb3VyY2V8U3RyaW5nfERvY3VtZW50fEJsb2J9IGRhdGEgQSB1cmwsIHBhcnNlZCBLTUwgZG9jdW1lbnQsIG9yIEJsb2IgY29udGFpbmluZyBiaW5hcnkgS01aIGRhdGEgb3IgYSBwYXJzZWQgS01MIGRvY3VtZW50LlxuICogQHBhcmFtIHtLbWxEYXRhU291cmNlLkxvYWRPcHRpb25zfSBbb3B0aW9uc10gQW4gb2JqZWN0IHNwZWNpZnlpbmcgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gKlxuICogQHJldHVybnMge1Byb21pc2UuPEttbERhdGFTb3VyY2U+fSBBIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgdG8gYSBuZXcgS21sRGF0YVNvdXJjZSBpbnN0YW5jZSBvbmNlIHRoZSBLTUwgaXMgbG9hZGVkLlxuICovXG5LbWxEYXRhU291cmNlLmxvYWQgPSBmdW5jdGlvbiAoZGF0YSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZGF0YVNvdXJjZSA9IG5ldyBLbWxEYXRhU291cmNlKG9wdGlvbnMpO1xuICByZXR1cm4gZGF0YVNvdXJjZS5sb2FkKGRhdGEsIG9wdGlvbnMpO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoS21sRGF0YVNvdXJjZS5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyBhIGh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoaXMgaW5zdGFuY2UuXG4gICAqIFRoaXMgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGJlIHNldCB0byB0aGUgS01MIGRvY3VtZW50IG5hbWUgb24gbG9hZC5cbiAgICogQG1lbWJlcm9mIEttbERhdGFTb3VyY2UucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBuYW1lOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5fbmFtZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9jaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIGNsb2NrIHNldHRpbmdzIGRlZmluZWQgYnkgdGhlIGxvYWRlZCBLTUwuIFRoaXMgcmVwcmVzZW50cyB0aGUgdG90YWxcbiAgICogYXZhaWxhYmlsaXR5IGludGVydmFsIGZvciBhbGwgdGltZS1keW5hbWljIGRhdGEuIElmIHRoZSBLTUwgZG9lcyBub3QgY29udGFpblxuICAgKiB0aW1lLWR5bmFtaWMgZGF0YSwgdGhpcyB2YWx1ZSBpcyB1bmRlZmluZWQuXG4gICAqIEBtZW1iZXJvZiBLbWxEYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RGF0YVNvdXJjZUNsb2NrfVxuICAgKi9cbiAgY2xvY2s6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jbG9jaztcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgY29sbGVjdGlvbiBvZiB7QGxpbmsgRW50aXR5fSBpbnN0YW5jZXMuXG4gICAqIEBtZW1iZXJvZiBLbWxEYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RW50aXR5Q29sbGVjdGlvbn1cbiAgICovXG4gIGVudGl0aWVzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZW50aXR5Q29sbGVjdGlvbjtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgaWYgdGhlIGRhdGEgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuXG4gICAqIEBtZW1iZXJvZiBLbWxEYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIGlzTG9hZGluZzoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2lzTG9hZGluZztcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhbiBldmVudCB0aGF0IHdpbGwgYmUgcmFpc2VkIHdoZW4gdGhlIHVuZGVybHlpbmcgZGF0YSBjaGFuZ2VzLlxuICAgKiBAbWVtYmVyb2YgS21sRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKi9cbiAgY2hhbmdlZEV2ZW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hhbmdlZDtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhbiBldmVudCB0aGF0IHdpbGwgYmUgcmFpc2VkIGlmIGFuIGVycm9yIGlzIGVuY291bnRlcmVkIGR1cmluZyBwcm9jZXNzaW5nLlxuICAgKiBAbWVtYmVyb2YgS21sRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKi9cbiAgZXJyb3JFdmVudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBHZXRzIGFuIGV2ZW50IHRoYXQgd2lsbCBiZSByYWlzZWQgd2hlbiB0aGUgZGF0YSBzb3VyY2UgZWl0aGVyIHN0YXJ0cyBvciBzdG9wcyBsb2FkaW5nLlxuICAgKiBAbWVtYmVyb2YgS21sRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKi9cbiAgbG9hZGluZ0V2ZW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbG9hZGluZztcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyBhbiBldmVudCB0aGF0IHdpbGwgYmUgcmFpc2VkIHdoZW4gdGhlIGRhdGEgc291cmNlIHJlZnJlc2hlcyBhIG5ldHdvcmsgbGluay5cbiAgICogQG1lbWJlcm9mIEttbERhdGFTb3VyY2UucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICovXG4gIHJlZnJlc2hFdmVudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlZnJlc2g7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgYW4gZXZlbnQgdGhhdCB3aWxsIGJlIHJhaXNlZCB3aGVuIHRoZSBkYXRhIHNvdXJjZSBmaW5kcyBhbiB1bnN1cHBvcnRlZCBub2RlIHR5cGUuXG4gICAqIEBtZW1iZXJvZiBLbWxEYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqL1xuICB1bnN1cHBvcnRlZE5vZGVFdmVudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Vuc3VwcG9ydGVkTm9kZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIG9yIG5vdCB0aGlzIGRhdGEgc291cmNlIHNob3VsZCBiZSBkaXNwbGF5ZWQuXG4gICAqIEBtZW1iZXJvZiBLbWxEYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIHNob3c6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbnRpdHlDb2xsZWN0aW9uLnNob3c7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fZW50aXR5Q29sbGVjdGlvbi5zaG93ID0gdmFsdWU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBjbHVzdGVyaW5nIG9wdGlvbnMgZm9yIHRoaXMgZGF0YSBzb3VyY2UuIFRoaXMgb2JqZWN0IGNhbiBiZSBzaGFyZWQgYmV0d2VlbiBtdWx0aXBsZSBkYXRhIHNvdXJjZXMuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBLbWxEYXRhU291cmNlLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RW50aXR5Q2x1c3Rlcn1cbiAgICovXG4gIGNsdXN0ZXJpbmc6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbnRpdHlDbHVzdGVyO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIWRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInZhbHVlIG11c3QgYmUgZGVmaW5lZC5cIik7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIHRoaXMuX2VudGl0eUNsdXN0ZXIgPSB2YWx1ZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgY3JlZGl0IHRoYXQgd2lsbCBiZSBkaXNwbGF5ZWQgZm9yIHRoZSBkYXRhIHNvdXJjZVxuICAgKiBAbWVtYmVyb2YgS21sRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0NyZWRpdH1cbiAgICovXG4gIGNyZWRpdDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NyZWRpdDtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogR2V0cyB0aGUgS01MIFRvdXJzIHRoYXQgYXJlIHVzZWQgdG8gZ3VpZGUgdGhlIGNhbWVyYSB0byBzcGVjaWZpZWQgZGVzdGluYXRpb25zIG9uIGdpdmVuIHRpbWUgaW50ZXJ2YWxzLlxuICAgKiBAbWVtYmVyb2YgS21sRGF0YVNvdXJjZS5wcm90b3R5cGVcbiAgICogQHR5cGUge0ttbFRvdXJbXX1cbiAgICovXG4gIGttbFRvdXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fa21sVG91cnM7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IGxvYWRzIHRoZSBwcm92aWRlZCBLTUwgZGF0YSwgcmVwbGFjaW5nIGFueSBleGlzdGluZyBkYXRhLlxuICpcbiAqIEBwYXJhbSB7UmVzb3VyY2V8U3RyaW5nfERvY3VtZW50fEJsb2J9IGRhdGEgQSB1cmwsIHBhcnNlZCBLTUwgZG9jdW1lbnQsIG9yIEJsb2IgY29udGFpbmluZyBiaW5hcnkgS01aIGRhdGEgb3IgYSBwYXJzZWQgS01MIGRvY3VtZW50LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge1Jlc291cmNlfFN0cmluZ30gW29wdGlvbnMuc291cmNlVXJpXSBPdmVycmlkZXMgdGhlIHVybCB0byB1c2UgZm9yIHJlc29sdmluZyByZWxhdGl2ZSBsaW5rcyBhbmQgb3RoZXIgS01MIG5ldHdvcmsgZmVhdHVyZXMuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsYW1wVG9Hcm91bmQ9ZmFsc2VdIHRydWUgaWYgd2Ugd2FudCB0aGUgZ2VvbWV0cnkgZmVhdHVyZXMgKFBvbHlnb25zLCBMaW5lU3RyaW5ncyBhbmQgTGluZWFyUmluZ3MpIGNsYW1wZWQgdG8gdGhlIGdyb3VuZC4gSWYgdHJ1ZSwgbGluZXMgd2lsbCB1c2UgY29ycmlkb3JzIHNvIHVzZSBFbnRpdHkuY29ycmlkb3IgaW5zdGVhZCBvZiBFbnRpdHkucG9seWxpbmUuXG4gKiBAcGFyYW0ge0VsbGlwc29pZH0gW29wdGlvbnMuZWxsaXBzb2lkPUVsbGlwc29pZC5XR1M4NF0gVGhlIGdsb2JhbCBlbGxpcHNvaWQgdXNlZCBmb3IgZ2VvZ3JhcGhpY2FsIGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48S21sRGF0YVNvdXJjZT59IEEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB0byB0aGlzIGluc3RhbmNlcyBvbmNlIHRoZSBLTUwgaXMgbG9hZGVkLlxuICovXG5LbWxEYXRhU291cmNlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGRhdGEsIG9wdGlvbnMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGRhdGEpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiZGF0YSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgRGF0YVNvdXJjZS5zZXRMb2FkaW5nKHRoaXMsIHRydWUpO1xuXG4gIHZhciBvbGROYW1lID0gdGhpcy5fbmFtZTtcbiAgdGhpcy5fbmFtZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fY2xhbXBUb0dyb3VuZCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNsYW1wVG9Hcm91bmQsIGZhbHNlKTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHJldHVybiBsb2FkKHRoaXMsIHRoaXMuX2VudGl0eUNvbGxlY3Rpb24sIGRhdGEsIG9wdGlvbnMpXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNsb2NrO1xuXG4gICAgICB2YXIgYXZhaWxhYmlsaXR5ID0gdGhhdC5fZW50aXR5Q29sbGVjdGlvbi5jb21wdXRlQXZhaWxhYmlsaXR5KCk7XG5cbiAgICAgIHZhciBzdGFydCA9IGF2YWlsYWJpbGl0eS5zdGFydDtcbiAgICAgIHZhciBzdG9wID0gYXZhaWxhYmlsaXR5LnN0b3A7XG4gICAgICB2YXIgaXNNaW5TdGFydCA9IEp1bGlhbkRhdGUuZXF1YWxzKHN0YXJ0LCBJc284NjAxLk1JTklNVU1fVkFMVUUpO1xuICAgICAgdmFyIGlzTWF4U3RvcCA9IEp1bGlhbkRhdGUuZXF1YWxzKHN0b3AsIElzbzg2MDEuTUFYSU1VTV9WQUxVRSk7XG4gICAgICBpZiAoIWlzTWluU3RhcnQgfHwgIWlzTWF4U3RvcCkge1xuICAgICAgICB2YXIgZGF0ZTtcblxuICAgICAgICAvL0lmIHN0YXJ0IGlzIG1pbiB0aW1lIGp1c3Qgc3RhcnQgYXQgbWlkbmlnaHQgdGhpcyBtb3JuaW5nLCBsb2NhbCB0aW1lXG4gICAgICAgIGlmIChpc01pblN0YXJ0KSB7XG4gICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICBzdGFydCA9IEp1bGlhbkRhdGUuZnJvbURhdGUoZGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL0lmIHN0b3AgaXMgbWF4IHZhbHVlIGp1c3Qgc3RvcCBhdCBtaWRuaWdodCB0b25pZ2h0LCBsb2NhbCB0aW1lXG4gICAgICAgIGlmIChpc01heFN0b3ApIHtcbiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICBkYXRlLnNldEhvdXJzKDI0LCAwLCAwLCAwKTtcbiAgICAgICAgICBzdG9wID0gSnVsaWFuRGF0ZS5mcm9tRGF0ZShkYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb2NrID0gbmV3IERhdGFTb3VyY2VDbG9jaygpO1xuICAgICAgICBjbG9jay5zdGFydFRpbWUgPSBzdGFydDtcbiAgICAgICAgY2xvY2suc3RvcFRpbWUgPSBzdG9wO1xuICAgICAgICBjbG9jay5jdXJyZW50VGltZSA9IEp1bGlhbkRhdGUuY2xvbmUoc3RhcnQpO1xuICAgICAgICBjbG9jay5jbG9ja1JhbmdlID0gQ2xvY2tSYW5nZS5MT09QX1NUT1A7XG4gICAgICAgIGNsb2NrLmNsb2NrU3RlcCA9IENsb2NrU3RlcC5TWVNURU1fQ0xPQ0tfTVVMVElQTElFUjtcbiAgICAgICAgY2xvY2subXVsdGlwbGllciA9IE1hdGgucm91bmQoXG4gICAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgICBNYXRoLm1heChKdWxpYW5EYXRlLnNlY29uZHNEaWZmZXJlbmNlKHN0b3AsIHN0YXJ0KSAvIDYwLCAxKSxcbiAgICAgICAgICAgIDMuMTU1NjllN1xuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIGlmIChjbG9jayAhPT0gdGhhdC5fY2xvY2spIHtcbiAgICAgICAgdGhhdC5fY2xvY2sgPSBjbG9jaztcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChvbGROYW1lICE9PSB0aGF0Ll9uYW1lKSB7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB0aGF0Ll9jaGFuZ2VkLnJhaXNlRXZlbnQodGhhdCk7XG4gICAgICB9XG5cbiAgICAgIERhdGFTb3VyY2Uuc2V0TG9hZGluZyh0aGF0LCBmYWxzZSk7XG5cbiAgICAgIHJldHVybiB0aGF0O1xuICAgIH0pXG4gICAgLm90aGVyd2lzZShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIERhdGFTb3VyY2Uuc2V0TG9hZGluZyh0aGF0LCBmYWxzZSk7XG4gICAgICB0aGF0Ll9lcnJvci5yYWlzZUV2ZW50KHRoYXQsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIHJldHVybiB3aGVuLnJlamVjdChlcnJvcik7XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiBtZXJnZUF2YWlsYWJpbGl0eVdpdGhQYXJlbnQoY2hpbGQpIHtcbiAgdmFyIHBhcmVudCA9IGNoaWxkLnBhcmVudDtcbiAgaWYgKGRlZmluZWQocGFyZW50KSkge1xuICAgIHZhciBwYXJlbnRBdmFpbGFiaWxpdHkgPSBwYXJlbnQuYXZhaWxhYmlsaXR5O1xuICAgIGlmIChkZWZpbmVkKHBhcmVudEF2YWlsYWJpbGl0eSkpIHtcbiAgICAgIHZhciBjaGlsZEF2YWlsYWJpbGl0eSA9IGNoaWxkLmF2YWlsYWJpbGl0eTtcbiAgICAgIGlmIChkZWZpbmVkKGNoaWxkQXZhaWxhYmlsaXR5KSkge1xuICAgICAgICBjaGlsZEF2YWlsYWJpbGl0eS5pbnRlcnNlY3QocGFyZW50QXZhaWxhYmlsaXR5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkLmF2YWlsYWJpbGl0eSA9IHBhcmVudEF2YWlsYWJpbGl0eTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TmV0d29ya0xpbmtVcGRhdGVDYWxsYmFjayhcbiAgZGF0YVNvdXJjZSxcbiAgbmV0d29ya0xpbmssXG4gIG5ld0VudGl0eUNvbGxlY3Rpb24sXG4gIG5ldHdvcmtMaW5rcyxcbiAgcHJvY2Vzc2VkSHJlZlxuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcbiAgICBpZiAoIW5ldHdvcmtMaW5rcy5jb250YWlucyhuZXR3b3JrTGluay5pZCkpIHtcbiAgICAgIC8vIEdvdCBpbnRvIHRoZSBvZGQgY2FzZSB3aGVyZSBhIHBhcmVudCBuZXR3b3JrIGxpbmsgd2FzIHVwZGF0ZWQgd2hpbGUgYSBjaGlsZFxuICAgICAgLy8gIG5ldHdvcmsgbGluayB1cGRhdGUgd2FzIGluIGZsaWdodCwgc28ganVzdCB0aHJvdyBpdCBhd2F5LlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVtb3ZlID0gZmFsc2U7XG4gICAgdmFyIG5ldHdvcmtMaW5rQ29udHJvbCA9IHF1ZXJ5Rmlyc3ROb2RlKFxuICAgICAgcm9vdEVsZW1lbnQsXG4gICAgICBcIk5ldHdvcmtMaW5rQ29udHJvbFwiLFxuICAgICAgbmFtZXNwYWNlcy5rbWxcbiAgICApO1xuICAgIHZhciBoYXNOZXR3b3JrTGlua0NvbnRyb2wgPSBkZWZpbmVkKG5ldHdvcmtMaW5rQ29udHJvbCk7XG5cbiAgICB2YXIgbWluUmVmcmVzaFBlcmlvZCA9IDA7XG4gICAgaWYgKGhhc05ldHdvcmtMaW5rQ29udHJvbCkge1xuICAgICAgaWYgKFxuICAgICAgICBkZWZpbmVkKHF1ZXJ5Rmlyc3ROb2RlKG5ldHdvcmtMaW5rQ29udHJvbCwgXCJVcGRhdGVcIiwgbmFtZXNwYWNlcy5rbWwpKVxuICAgICAgKSB7XG4gICAgICAgIG9uZVRpbWVXYXJuaW5nKFxuICAgICAgICAgIFwia21sLW5ldHdvcmtMaW5rQ29udHJvbC11cGRhdGVcIixcbiAgICAgICAgICBcIktNTCAtIE5ldHdvcmtMaW5rQ29udHJvbCB1cGRhdGVzIGFyZW4ndCBzdXBwb3J0ZWQuXCJcbiAgICAgICAgKTtcbiAgICAgICAgbmV0d29ya0xpbmsudXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgbmV0d29ya0xpbmtzLnJlbW92ZShuZXR3b3JrTGluay5pZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG5ldHdvcmtMaW5rLmNvb2tpZSA9IHF1ZXJ5VG9PYmplY3QoXG4gICAgICAgIGRlZmF1bHRWYWx1ZShcbiAgICAgICAgICBxdWVyeVN0cmluZ1ZhbHVlKG5ldHdvcmtMaW5rQ29udHJvbCwgXCJjb29raWVcIiwgbmFtZXNwYWNlcy5rbWwpLFxuICAgICAgICAgIFwiXCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIG1pblJlZnJlc2hQZXJpb2QgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHF1ZXJ5TnVtZXJpY1ZhbHVlKFxuICAgICAgICAgIG5ldHdvcmtMaW5rQ29udHJvbCxcbiAgICAgICAgICBcIm1pblJlZnJlc2hQZXJpb2RcIixcbiAgICAgICAgICBuYW1lc3BhY2VzLmttbFxuICAgICAgICApLFxuICAgICAgICAwXG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciBub3cgPSBKdWxpYW5EYXRlLm5vdygpO1xuICAgIHZhciByZWZyZXNoTW9kZSA9IG5ldHdvcmtMaW5rLnJlZnJlc2hNb2RlO1xuICAgIGlmIChyZWZyZXNoTW9kZSA9PT0gUmVmcmVzaE1vZGUuSU5URVJWQUwpIHtcbiAgICAgIGlmIChkZWZpbmVkKG5ldHdvcmtMaW5rQ29udHJvbCkpIHtcbiAgICAgICAgbmV0d29ya0xpbmsudGltZSA9IE1hdGgubWF4KG1pblJlZnJlc2hQZXJpb2QsIG5ldHdvcmtMaW5rLnRpbWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVmcmVzaE1vZGUgPT09IFJlZnJlc2hNb2RlLkVYUElSRSkge1xuICAgICAgdmFyIGV4cGlyZXM7XG4gICAgICBpZiAoZGVmaW5lZChuZXR3b3JrTGlua0NvbnRyb2wpKSB7XG4gICAgICAgIGV4cGlyZXMgPSBxdWVyeVN0cmluZ1ZhbHVlKFxuICAgICAgICAgIG5ldHdvcmtMaW5rQ29udHJvbCxcbiAgICAgICAgICBcImV4cGlyZXNcIixcbiAgICAgICAgICBuYW1lc3BhY2VzLmttbFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGRlZmluZWQoZXhwaXJlcykpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgZGF0ZSA9IEp1bGlhbkRhdGUuZnJvbUlzbzg2MDEoZXhwaXJlcyk7XG4gICAgICAgICAgdmFyIGRpZmYgPSBKdWxpYW5EYXRlLnNlY29uZHNEaWZmZXJlbmNlKGRhdGUsIG5vdyk7XG4gICAgICAgICAgaWYgKGRpZmYgPiAwICYmIGRpZmYgPCBtaW5SZWZyZXNoUGVyaW9kKSB7XG4gICAgICAgICAgICBKdWxpYW5EYXRlLmFkZFNlY29uZHMobm93LCBtaW5SZWZyZXNoUGVyaW9kLCBkYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV0d29ya0xpbmsudGltZSA9IGRhdGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBvbmVUaW1lV2FybmluZyhcbiAgICAgICAgICAgIFwia21sLW5ldHdvcmtMaW5rQ29udHJvbC1leHBpcmVzXCIsXG4gICAgICAgICAgICBcIktNTCAtIE5ldHdvcmtMaW5rQ29udHJvbCBleHBpcmVzIGlzIG5vdCBhIHZhbGlkIGRhdGVcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgcmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb25lVGltZVdhcm5pbmcoXG4gICAgICAgICAgXCJrbWwtcmVmcmVzaE1vZGUtb25FeHBpcmVcIixcbiAgICAgICAgICBcIktNTCAtIHJlZnJlc2hNb2RlIG9mIG9uRXhwaXJlIHJlcXVpcmVzIHRoZSBOZXR3b3JrTGlua0NvbnRyb2wgdG8gaGF2ZSBhbiBleHBpcmVzIGVsZW1lbnRcIlxuICAgICAgICApO1xuICAgICAgICByZW1vdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBuZXR3b3JrTGlua0VudGl0eSA9IG5ldHdvcmtMaW5rLmVudGl0eTtcbiAgICB2YXIgZW50aXR5Q29sbGVjdGlvbiA9IGRhdGFTb3VyY2UuX2VudGl0eUNvbGxlY3Rpb247XG4gICAgdmFyIG5ld0VudGl0aWVzID0gbmV3RW50aXR5Q29sbGVjdGlvbi52YWx1ZXM7XG5cbiAgICBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihlbnRpdHkpIHtcbiAgICAgIGVudGl0eUNvbGxlY3Rpb24ucmVtb3ZlKGVudGl0eSk7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBlbnRpdHkuX2NoaWxkcmVuO1xuICAgICAgdmFyIGNvdW50ID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKGNoaWxkcmVuW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgb2xkIGVudGl0aWVzXG4gICAgZW50aXR5Q29sbGVjdGlvbi5zdXNwZW5kRXZlbnRzKCk7XG4gICAgdmFyIGVudGl0aWVzQ29weSA9IGVudGl0eUNvbGxlY3Rpb24udmFsdWVzLnNsaWNlKCk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGVudGl0aWVzQ29weS5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGVudGl0eVRvUmVtb3ZlID0gZW50aXRpZXNDb3B5W2ldO1xuICAgICAgaWYgKGVudGl0eVRvUmVtb3ZlLnBhcmVudCA9PT0gbmV0d29ya0xpbmtFbnRpdHkpIHtcbiAgICAgICAgZW50aXR5VG9SZW1vdmUucGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICByZW1vdmVDaGlsZHJlbihlbnRpdHlUb1JlbW92ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGVudGl0eUNvbGxlY3Rpb24ucmVzdW1lRXZlbnRzKCk7XG5cbiAgICAvLyBBZGQgbmV3IGVudGl0aWVzXG4gICAgZW50aXR5Q29sbGVjdGlvbi5zdXNwZW5kRXZlbnRzKCk7XG4gICAgZm9yIChpID0gMDsgaSA8IG5ld0VudGl0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbmV3RW50aXR5ID0gbmV3RW50aXRpZXNbaV07XG4gICAgICBpZiAoIWRlZmluZWQobmV3RW50aXR5LnBhcmVudCkpIHtcbiAgICAgICAgbmV3RW50aXR5LnBhcmVudCA9IG5ldHdvcmtMaW5rRW50aXR5O1xuICAgICAgICBtZXJnZUF2YWlsYWJpbGl0eVdpdGhQYXJlbnQobmV3RW50aXR5KTtcbiAgICAgIH1cbiAgICAgIGVudGl0eUNvbGxlY3Rpb24uYWRkKG5ld0VudGl0eSk7XG4gICAgfVxuICAgIGVudGl0eUNvbGxlY3Rpb24ucmVzdW1lRXZlbnRzKCk7XG5cbiAgICAvLyBObyByZWZyZXNoIGluZm9ybWF0aW9uIHJlbW92ZSBpdCwgb3RoZXJ3aXNlIHVwZGF0ZSBsYXN0VXBkYXRlIHRpbWVcbiAgICBpZiAocmVtb3ZlKSB7XG4gICAgICBuZXR3b3JrTGlua3MucmVtb3ZlKG5ldHdvcmtMaW5rLmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV0d29ya0xpbmsubGFzdFVwZGF0ZWQgPSBub3c7XG4gICAgfVxuXG4gICAgdmFyIGF2YWlsYWJpbGl0eSA9IGVudGl0eUNvbGxlY3Rpb24uY29tcHV0ZUF2YWlsYWJpbGl0eSgpO1xuXG4gICAgdmFyIHN0YXJ0ID0gYXZhaWxhYmlsaXR5LnN0YXJ0O1xuICAgIHZhciBzdG9wID0gYXZhaWxhYmlsaXR5LnN0b3A7XG4gICAgdmFyIGlzTWluU3RhcnQgPSBKdWxpYW5EYXRlLmVxdWFscyhzdGFydCwgSXNvODYwMS5NSU5JTVVNX1ZBTFVFKTtcbiAgICB2YXIgaXNNYXhTdG9wID0gSnVsaWFuRGF0ZS5lcXVhbHMoc3RvcCwgSXNvODYwMS5NQVhJTVVNX1ZBTFVFKTtcbiAgICBpZiAoIWlzTWluU3RhcnQgfHwgIWlzTWF4U3RvcCkge1xuICAgICAgdmFyIGNsb2NrID0gZGF0YVNvdXJjZS5fY2xvY2s7XG5cbiAgICAgIGlmIChjbG9jay5zdGFydFRpbWUgIT09IHN0YXJ0IHx8IGNsb2NrLnN0b3BUaW1lICE9PSBzdG9wKSB7XG4gICAgICAgIGNsb2NrLnN0YXJ0VGltZSA9IHN0YXJ0O1xuICAgICAgICBjbG9jay5zdG9wVGltZSA9IHN0b3A7XG4gICAgICAgIGRhdGFTb3VyY2UuX2NoYW5nZWQucmFpc2VFdmVudChkYXRhU291cmNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBuZXR3b3JrTGluay51cGRhdGluZyA9IGZhbHNlO1xuICAgIG5ldHdvcmtMaW5rLm5lZWRzVXBkYXRlID0gZmFsc2U7XG4gICAgZGF0YVNvdXJjZS5fcmVmcmVzaC5yYWlzZUV2ZW50KFxuICAgICAgZGF0YVNvdXJjZSxcbiAgICAgIHByb2Nlc3NlZEhyZWYuZ2V0VXJsQ29tcG9uZW50KHRydWUpXG4gICAgKTtcbiAgfTtcbn1cblxudmFyIGVudGl0aWVzVG9JZ25vcmUgPSBuZXcgQXNzb2NpYXRpdmVBcnJheSgpO1xuXG4vKipcbiAqIFVwZGF0ZXMgYW55IE5ldHdvcmtMaW5rIHRoYXQgcmVxdWlyZSB1cGRhdGluZy5cbiAqXG4gKiBAcGFyYW0ge0p1bGlhbkRhdGV9IHRpbWUgVGhlIHNpbXVsYXRpb24gdGltZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoaXMgZGF0YSBzb3VyY2UgaXMgcmVhZHkgdG8gYmUgZGlzcGxheWVkIGF0IHRoZSBwcm92aWRlZCB0aW1lLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbkttbERhdGFTb3VyY2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gIHZhciBuZXR3b3JrTGlua3MgPSB0aGlzLl9uZXR3b3JrTGlua3M7XG4gIGlmIChuZXR3b3JrTGlua3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICB2YXIgbm93ID0gSnVsaWFuRGF0ZS5ub3coKTtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gIGVudGl0aWVzVG9JZ25vcmUucmVtb3ZlQWxsKCk7XG5cbiAgZnVuY3Rpb24gcmVjdXJzZUlnbm9yZUVudGl0aWVzKGVudGl0eSkge1xuICAgIHZhciBjaGlsZHJlbiA9IGVudGl0eS5fY2hpbGRyZW47XG4gICAgdmFyIGNvdW50ID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICBlbnRpdGllc1RvSWdub3JlLnNldChjaGlsZC5pZCwgY2hpbGQpO1xuICAgICAgcmVjdXJzZUlnbm9yZUVudGl0aWVzKGNoaWxkKTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2FtZXJhVmlld1VwZGF0ZSA9IGZhbHNlO1xuICB2YXIgbGFzdENhbWVyYVZpZXcgPSB0aGlzLl9sYXN0Q2FtZXJhVmlldztcbiAgdmFyIGNhbWVyYSA9IHRoaXMuX2NhbWVyYTtcbiAgaWYgKFxuICAgIGRlZmluZWQoY2FtZXJhKSAmJlxuICAgICEoXG4gICAgICBjYW1lcmEucG9zaXRpb25XQy5lcXVhbHNFcHNpbG9uKFxuICAgICAgICBsYXN0Q2FtZXJhVmlldy5wb3NpdGlvbixcbiAgICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ON1xuICAgICAgKSAmJlxuICAgICAgY2FtZXJhLmRpcmVjdGlvbldDLmVxdWFsc0Vwc2lsb24oXG4gICAgICAgIGxhc3RDYW1lcmFWaWV3LmRpcmVjdGlvbixcbiAgICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ON1xuICAgICAgKSAmJlxuICAgICAgY2FtZXJhLnVwV0MuZXF1YWxzRXBzaWxvbihsYXN0Q2FtZXJhVmlldy51cCwgQ2VzaXVtTWF0aC5FUFNJTE9ONylcbiAgICApXG4gICkge1xuICAgIC8vIENhbWVyYSBoYXMgY2hhbmdlZCBzbyB1cGRhdGUgdGhlIGxhc3Qgdmlld1xuICAgIGxhc3RDYW1lcmFWaWV3LnBvc2l0aW9uID0gQ2FydGVzaWFuMy5jbG9uZShjYW1lcmEucG9zaXRpb25XQyk7XG4gICAgbGFzdENhbWVyYVZpZXcuZGlyZWN0aW9uID0gQ2FydGVzaWFuMy5jbG9uZShjYW1lcmEuZGlyZWN0aW9uV0MpO1xuICAgIGxhc3RDYW1lcmFWaWV3LnVwID0gQ2FydGVzaWFuMy5jbG9uZShjYW1lcmEudXBXQyk7XG4gICAgbGFzdENhbWVyYVZpZXcuYmJveCA9IGNhbWVyYS5jb21wdXRlVmlld1JlY3RhbmdsZSgpO1xuICAgIGNhbWVyYVZpZXdVcGRhdGUgPSB0cnVlO1xuICB9XG5cbiAgdmFyIG5ld05ldHdvcmtMaW5rcyA9IG5ldyBBc3NvY2lhdGl2ZUFycmF5KCk7XG4gIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gIG5ldHdvcmtMaW5rcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAobmV0d29ya0xpbmspIHtcbiAgICB2YXIgZW50aXR5ID0gbmV0d29ya0xpbmsuZW50aXR5O1xuICAgIGlmIChlbnRpdGllc1RvSWdub3JlLmNvbnRhaW5zKGVudGl0eS5pZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIW5ldHdvcmtMaW5rLnVwZGF0aW5nKSB7XG4gICAgICB2YXIgZG9VcGRhdGUgPSBmYWxzZTtcbiAgICAgIGlmIChuZXR3b3JrTGluay5yZWZyZXNoTW9kZSA9PT0gUmVmcmVzaE1vZGUuSU5URVJWQUwpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIEp1bGlhbkRhdGUuc2Vjb25kc0RpZmZlcmVuY2Uobm93LCBuZXR3b3JrTGluay5sYXN0VXBkYXRlZCkgPlxuICAgICAgICAgIG5ldHdvcmtMaW5rLnRpbWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgZG9VcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5ldHdvcmtMaW5rLnJlZnJlc2hNb2RlID09PSBSZWZyZXNoTW9kZS5FWFBJUkUpIHtcbiAgICAgICAgaWYgKEp1bGlhbkRhdGUuZ3JlYXRlclRoYW4obm93LCBuZXR3b3JrTGluay50aW1lKSkge1xuICAgICAgICAgIGRvVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChuZXR3b3JrTGluay5yZWZyZXNoTW9kZSA9PT0gUmVmcmVzaE1vZGUuU1RPUCkge1xuICAgICAgICBpZiAoY2FtZXJhVmlld1VwZGF0ZSkge1xuICAgICAgICAgIG5ldHdvcmtMaW5rLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICBuZXR3b3JrTGluay5jYW1lcmFVcGRhdGVUaW1lID0gbm93O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5ldHdvcmtMaW5rLm5lZWRzVXBkYXRlICYmXG4gICAgICAgICAgSnVsaWFuRGF0ZS5zZWNvbmRzRGlmZmVyZW5jZShub3csIG5ldHdvcmtMaW5rLmNhbWVyYVVwZGF0ZVRpbWUpID49XG4gICAgICAgICAgICBuZXR3b3JrTGluay50aW1lXG4gICAgICAgICkge1xuICAgICAgICAgIGRvVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZG9VcGRhdGUpIHtcbiAgICAgICAgcmVjdXJzZUlnbm9yZUVudGl0aWVzKGVudGl0eSk7XG4gICAgICAgIG5ldHdvcmtMaW5rLnVwZGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdmFyIG5ld0VudGl0eUNvbGxlY3Rpb24gPSBuZXcgRW50aXR5Q29sbGVjdGlvbigpO1xuICAgICAgICB2YXIgaHJlZiA9IG5ldHdvcmtMaW5rLmhyZWYuY2xvbmUoKTtcblxuICAgICAgICBocmVmLnNldFF1ZXJ5UGFyYW1ldGVycyhuZXR3b3JrTGluay5jb29raWUpO1xuICAgICAgICB2YXIgZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKHRoYXQuX2VsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KTtcbiAgICAgICAgcHJvY2Vzc05ldHdvcmtMaW5rUXVlcnlTdHJpbmcoXG4gICAgICAgICAgaHJlZixcbiAgICAgICAgICB0aGF0Ll9jYW1lcmEsXG4gICAgICAgICAgdGhhdC5fY2FudmFzLFxuICAgICAgICAgIG5ldHdvcmtMaW5rLnZpZXdCb3VuZFNjYWxlLFxuICAgICAgICAgIGxhc3RDYW1lcmFWaWV3LmJib3gsXG4gICAgICAgICAgZWxsaXBzb2lkXG4gICAgICAgICk7XG5cbiAgICAgICAgbG9hZCh0aGF0LCBuZXdFbnRpdHlDb2xsZWN0aW9uLCBocmVmLCB7IGNvbnRleHQ6IGVudGl0eS5pZCB9KVxuICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgZ2V0TmV0d29ya0xpbmtVcGRhdGVDYWxsYmFjayhcbiAgICAgICAgICAgICAgdGhhdCxcbiAgICAgICAgICAgICAgbmV0d29ya0xpbmssXG4gICAgICAgICAgICAgIG5ld0VudGl0eUNvbGxlY3Rpb24sXG4gICAgICAgICAgICAgIG5ld05ldHdvcmtMaW5rcyxcbiAgICAgICAgICAgICAgaHJlZlxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdmFyIG1zZyA9XG4gICAgICAgICAgICAgIFwiTmV0d29ya0xpbmsgXCIgKyBuZXR3b3JrTGluay5ocmVmICsgXCIgcmVmcmVzaCBmYWlsZWQ6IFwiICsgZXJyb3I7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xuICAgICAgICAgICAgdGhhdC5fZXJyb3IucmFpc2VFdmVudCh0aGF0LCBtc2cpO1xuICAgICAgICAgIH0pO1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgbmV3TmV0d29ya0xpbmtzLnNldChuZXR3b3JrTGluay5pZCwgbmV0d29ya0xpbmspO1xuICB9KTtcblxuICBpZiAoY2hhbmdlZCkge1xuICAgIHRoaXMuX25ldHdvcmtMaW5rcyA9IG5ld05ldHdvcmtMaW5rcztcbiAgICB0aGlzLl9jaGFuZ2VkLnJhaXNlRXZlbnQodGhpcyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQ29udGFpbnMgS01MIEZlYXR1cmUgZGF0YSBsb2FkZWQgaW50byB0aGUgPGNvZGU+RW50aXR5LmttbDwvY29kZT4gcHJvcGVydHkgYnkge0BsaW5rIEttbERhdGFTb3VyY2V9LlxuICogQGFsaWFzIEttbEZlYXR1cmVEYXRhXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gS21sRmVhdHVyZURhdGEoKSB7XG4gIC8qKlxuICAgKiBAdHlwZWRlZiBLbWxGZWF0dXJlRGF0YS5BdXRob3JcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWUgR2V0cyB0aGUgbmFtZS5cbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHVyaSBHZXRzIHRoZSBVUkkuXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBhZ2UgR2V0cyB0aGUgZW1haWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhdG9tIHN5bmRpY2F0aW9uIGZvcm1hdCBhdXRob3IgZmllbGQuXG4gICAqIEB0eXBlIHtLbWxGZWF0dXJlRGF0YS5BdXRob3J9XG4gICAqL1xuICB0aGlzLmF1dGhvciA9IHtcbiAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgdXJpOiB1bmRlZmluZWQsXG4gICAgZW1haWw6IHVuZGVmaW5lZCxcbiAgfTtcblxuICAvKipcbiAgICogQHR5cGVkZWYgS21sRmVhdHVyZURhdGEuTGlua1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gaHJlZiBHZXRzIHRoZSBocmVmLlxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gaHJlZmxhbmcgR2V0cyB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIGxpbmtlZCByZXNvdXJjZS5cbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHJlbCBHZXRzIHRoZSBsaW5rIHJlbGF0aW9uLlxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gdHlwZSBHZXRzIHRoZSBsaW5rIHR5cGUuXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSB0aXRsZSBHZXRzIHRoZSBsaW5rIHRpdGxlLlxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gbGVuZ3RoIEdldHMgdGhlIGxpbmsgbGVuZ3RoLlxuICAgKi9cblxuICAvKipcbiAgICogR2V0cyB0aGUgbGluay5cbiAgICogQHR5cGUge0ttbEZlYXR1cmVEYXRhLkxpbmt9XG4gICAqL1xuICB0aGlzLmxpbmsgPSB7XG4gICAgaHJlZjogdW5kZWZpbmVkLFxuICAgIGhyZWZsYW5nOiB1bmRlZmluZWQsXG4gICAgcmVsOiB1bmRlZmluZWQsXG4gICAgdHlwZTogdW5kZWZpbmVkLFxuICAgIHRpdGxlOiB1bmRlZmluZWQsXG4gICAgbGVuZ3RoOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHVuc3RydWN0dXJlZCBhZGRyZXNzIGZpZWxkLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgdGhpcy5hZGRyZXNzID0gdW5kZWZpbmVkO1xuICAvKipcbiAgICogR2V0cyB0aGUgcGhvbmUgbnVtYmVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgdGhpcy5waG9uZU51bWJlciA9IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIEdldHMgdGhlIHNuaXBwZXQuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICB0aGlzLnNuaXBwZXQgPSB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBleHRlbmRlZCBkYXRhLCBwYXJzZWQgaW50byBhIEpTT04gb2JqZWN0LlxuICAgKiBDdXJyZW50bHkgb25seSB0aGUgPGNvZGU+RGF0YTwvY29kZT4gcHJvcGVydHkgaXMgc3VwcG9ydGVkLlxuICAgKiA8Y29kZT5TY2hlbWFEYXRhPC9jb2RlPiBhbmQgY3VzdG9tIGRhdGEgYXJlIGlnbm9yZWQuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICB0aGlzLmV4dGVuZGVkRGF0YSA9IHVuZGVmaW5lZDtcbn1cblxuLy8gRm9yIHRlc3RpbmdcbkttbERhdGFTb3VyY2UuX0RlZmVycmVkTG9hZGluZyA9IERlZmVycmVkTG9hZGluZztcbkttbERhdGFTb3VyY2UuX2dldFRpbWVzdGFtcCA9IGdldFRpbWVzdGFtcDtcblxuZXhwb3J0IGRlZmF1bHQgS21sRGF0YVNvdXJjZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///25320\n')},20217:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14459);\n\n\n/**\n * Describes a KmlTour, which uses KmlTourFlyTo, and KmlTourWait to\n * guide the camera to a specified destinations on given time intervals.\n *\n * @alias KmlTour\n * @constructor\n *\n * @param {String} name name parsed from KML\n * @param {String} id id parsed from KML\n * @param {Array} playlist array with KmlTourFlyTos and KmlTourWaits\n *\n * @see KmlTourFlyTo\n * @see KmlTourWait\n *\n * @demo {@link https://sandcastle.cesium.com/?src=KML%20Tours.html|KML Tours}\n */\nfunction KmlTour(name, id) {\n  /**\n   * Id of kml gx:Tour entry\n   * @type String\n   */\n  this.id = id;\n  /**\n   * Tour name\n   * @type String\n   */\n  this.name = name;\n  /**\n   * Index of current entry from playlist\n   * @type Number\n   */\n  this.playlistIndex = 0;\n  /**\n   * Array of playlist entries\n   * @type Array\n   */\n  this.playlist = [];\n  /**\n   * Event will be called when tour starts to play,\n   * before any playlist entry starts to play.\n   * @type Event\n   */\n  this.tourStart = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  /**\n   * Event will be called when all playlist entries are\n   * played, or tour playback being canceled.\n   *\n   * If tour playback was terminated, event callback will\n   * be called with terminated=true parameter.\n   * @type Event\n   */\n  this.tourEnd = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  /**\n   * Event will be called when entry from playlist starts to play.\n   *\n   * Event callback will be called with curent entry as first parameter.\n   * @type Event\n   */\n  this.entryStart = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  /**\n   * Event will be called when entry from playlist ends to play.\n   *\n   * Event callback will be called with following parameters:\n   * 1. entry - entry\n   * 2. terminated - true if playback was terminated by calling {@link KmlTour#stop}\n   * @type Event\n   */\n  this.entryEnd = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  this._activeEntries = [];\n}\n\n/**\n * Add entry to this tour playlist.\n *\n * @param {KmlTourFlyTo|KmlTourWait} entry an entry to add to the playlist.\n */\nKmlTour.prototype.addPlaylistEntry = function (entry) {\n  this.playlist.push(entry);\n};\n\n/**\n * Play this tour.\n *\n * @param {Viewer} viewer viewer widget.\n * @param {Object} [cameraOptions] these options will be merged with {@link Camera#flyTo}\n * options for FlyTo playlist entries.\n */\nKmlTour.prototype.play = function (viewer, cameraOptions) {\n  this.tourStart.raiseEvent();\n\n  var tour = this;\n  playEntry.call(this, viewer, cameraOptions, function (terminated) {\n    tour.playlistIndex = 0;\n    // Stop nonblocking entries\n    if (!terminated) {\n      cancelAllEntries(tour._activeEntries);\n    }\n    tour.tourEnd.raiseEvent(terminated);\n  });\n};\n\n/**\n * Stop curently playing tour.\n */\nKmlTour.prototype.stop = function () {\n  cancelAllEntries(this._activeEntries);\n};\n\n// Stop all activeEntries.\nfunction cancelAllEntries(activeEntries) {\n  for (\n    var entry = activeEntries.pop();\n    entry !== undefined;\n    entry = activeEntries.pop()\n  ) {\n    entry.stop();\n  }\n}\n\n// Play playlist entry.\n// This function is called recursevly with playNext and iterates over all entries from playlist.\nfunction playEntry(viewer, cameraOptions, allDone) {\n  var entry = this.playlist[this.playlistIndex];\n  if (entry) {\n    var _playNext = playNext.bind(this, viewer, cameraOptions, allDone);\n    this._activeEntries.push(entry);\n    this.entryStart.raiseEvent(entry);\n    if (entry.blocking) {\n      entry.play(_playNext, viewer.scene.camera, cameraOptions);\n    } else {\n      var tour = this;\n      entry.play(function () {\n        tour.entryEnd.raiseEvent(entry);\n        var indx = tour._activeEntries.indexOf(entry);\n        if (indx >= 0) {\n          tour._activeEntries.splice(indx, 1);\n        }\n      });\n      _playNext(viewer, cameraOptions, allDone);\n    }\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(allDone)) {\n    allDone(false);\n  }\n}\n\n// Increment playlistIndex and call playEntry if terminated isn\'t true.\nfunction playNext(viewer, cameraOptions, allDone, terminated) {\n  var entry = this.playlist[this.playlistIndex];\n  this.entryEnd.raiseEvent(entry, terminated);\n\n  if (terminated) {\n    allDone(terminated);\n  } else {\n    var indx = this._activeEntries.indexOf(entry);\n    if (indx >= 0) {\n      this._activeEntries.splice(indx, 1);\n    }\n    this.playlistIndex++;\n    playEntry.call(this, viewer, cameraOptions, allDone);\n  }\n}\n/* harmony default export */ __webpack_exports__["Z"] = (KmlTour);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAyMTcuanMiLCJtYXBwaW5ncyI6Ijs7QUFBeUM7QUFDSjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrREFBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtEQUFLO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrREFBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQUs7O0FBRTNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVywwQkFBMEI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUSxtREFBbUQ7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLElBQUksU0FBUyxxRUFBTztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL0RhdGFTb3VyY2VzL0ttbFRvdXIuanM/NDhhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbi8qKlxuICogRGVzY3JpYmVzIGEgS21sVG91ciwgd2hpY2ggdXNlcyBLbWxUb3VyRmx5VG8sIGFuZCBLbWxUb3VyV2FpdCB0b1xuICogZ3VpZGUgdGhlIGNhbWVyYSB0byBhIHNwZWNpZmllZCBkZXN0aW5hdGlvbnMgb24gZ2l2ZW4gdGltZSBpbnRlcnZhbHMuXG4gKlxuICogQGFsaWFzIEttbFRvdXJcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5hbWUgcGFyc2VkIGZyb20gS01MXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgaWQgcGFyc2VkIGZyb20gS01MXG4gKiBAcGFyYW0ge0FycmF5fSBwbGF5bGlzdCBhcnJheSB3aXRoIEttbFRvdXJGbHlUb3MgYW5kIEttbFRvdXJXYWl0c1xuICpcbiAqIEBzZWUgS21sVG91ckZseVRvXG4gKiBAc2VlIEttbFRvdXJXYWl0XG4gKlxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tLz9zcmM9S01MJTIwVG91cnMuaHRtbHxLTUwgVG91cnN9XG4gKi9cbmZ1bmN0aW9uIEttbFRvdXIobmFtZSwgaWQpIHtcbiAgLyoqXG4gICAqIElkIG9mIGttbCBneDpUb3VyIGVudHJ5XG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKi9cbiAgdGhpcy5pZCA9IGlkO1xuICAvKipcbiAgICogVG91ciBuYW1lXG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKi9cbiAgdGhpcy5uYW1lID0gbmFtZTtcbiAgLyoqXG4gICAqIEluZGV4IG9mIGN1cnJlbnQgZW50cnkgZnJvbSBwbGF5bGlzdFxuICAgKiBAdHlwZSBOdW1iZXJcbiAgICovXG4gIHRoaXMucGxheWxpc3RJbmRleCA9IDA7XG4gIC8qKlxuICAgKiBBcnJheSBvZiBwbGF5bGlzdCBlbnRyaWVzXG4gICAqIEB0eXBlIEFycmF5XG4gICAqL1xuICB0aGlzLnBsYXlsaXN0ID0gW107XG4gIC8qKlxuICAgKiBFdmVudCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRvdXIgc3RhcnRzIHRvIHBsYXksXG4gICAqIGJlZm9yZSBhbnkgcGxheWxpc3QgZW50cnkgc3RhcnRzIHRvIHBsYXkuXG4gICAqIEB0eXBlIEV2ZW50XG4gICAqL1xuICB0aGlzLnRvdXJTdGFydCA9IG5ldyBFdmVudCgpO1xuICAvKipcbiAgICogRXZlbnQgd2lsbCBiZSBjYWxsZWQgd2hlbiBhbGwgcGxheWxpc3QgZW50cmllcyBhcmVcbiAgICogcGxheWVkLCBvciB0b3VyIHBsYXliYWNrIGJlaW5nIGNhbmNlbGVkLlxuICAgKlxuICAgKiBJZiB0b3VyIHBsYXliYWNrIHdhcyB0ZXJtaW5hdGVkLCBldmVudCBjYWxsYmFjayB3aWxsXG4gICAqIGJlIGNhbGxlZCB3aXRoIHRlcm1pbmF0ZWQ9dHJ1ZSBwYXJhbWV0ZXIuXG4gICAqIEB0eXBlIEV2ZW50XG4gICAqL1xuICB0aGlzLnRvdXJFbmQgPSBuZXcgRXZlbnQoKTtcbiAgLyoqXG4gICAqIEV2ZW50IHdpbGwgYmUgY2FsbGVkIHdoZW4gZW50cnkgZnJvbSBwbGF5bGlzdCBzdGFydHMgdG8gcGxheS5cbiAgICpcbiAgICogRXZlbnQgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBjdXJlbnQgZW50cnkgYXMgZmlyc3QgcGFyYW1ldGVyLlxuICAgKiBAdHlwZSBFdmVudFxuICAgKi9cbiAgdGhpcy5lbnRyeVN0YXJ0ID0gbmV3IEV2ZW50KCk7XG4gIC8qKlxuICAgKiBFdmVudCB3aWxsIGJlIGNhbGxlZCB3aGVuIGVudHJ5IGZyb20gcGxheWxpc3QgZW5kcyB0byBwbGF5LlxuICAgKlxuICAgKiBFdmVudCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICAgKiAxLiBlbnRyeSAtIGVudHJ5XG4gICAqIDIuIHRlcm1pbmF0ZWQgLSB0cnVlIGlmIHBsYXliYWNrIHdhcyB0ZXJtaW5hdGVkIGJ5IGNhbGxpbmcge0BsaW5rIEttbFRvdXIjc3RvcH1cbiAgICogQHR5cGUgRXZlbnRcbiAgICovXG4gIHRoaXMuZW50cnlFbmQgPSBuZXcgRXZlbnQoKTtcblxuICB0aGlzLl9hY3RpdmVFbnRyaWVzID0gW107XG59XG5cbi8qKlxuICogQWRkIGVudHJ5IHRvIHRoaXMgdG91ciBwbGF5bGlzdC5cbiAqXG4gKiBAcGFyYW0ge0ttbFRvdXJGbHlUb3xLbWxUb3VyV2FpdH0gZW50cnkgYW4gZW50cnkgdG8gYWRkIHRvIHRoZSBwbGF5bGlzdC5cbiAqL1xuS21sVG91ci5wcm90b3R5cGUuYWRkUGxheWxpc3RFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSkge1xuICB0aGlzLnBsYXlsaXN0LnB1c2goZW50cnkpO1xufTtcblxuLyoqXG4gKiBQbGF5IHRoaXMgdG91ci5cbiAqXG4gKiBAcGFyYW0ge1ZpZXdlcn0gdmlld2VyIHZpZXdlciB3aWRnZXQuXG4gKiBAcGFyYW0ge09iamVjdH0gW2NhbWVyYU9wdGlvbnNdIHRoZXNlIG9wdGlvbnMgd2lsbCBiZSBtZXJnZWQgd2l0aCB7QGxpbmsgQ2FtZXJhI2ZseVRvfVxuICogb3B0aW9ucyBmb3IgRmx5VG8gcGxheWxpc3QgZW50cmllcy5cbiAqL1xuS21sVG91ci5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uICh2aWV3ZXIsIGNhbWVyYU9wdGlvbnMpIHtcbiAgdGhpcy50b3VyU3RhcnQucmFpc2VFdmVudCgpO1xuXG4gIHZhciB0b3VyID0gdGhpcztcbiAgcGxheUVudHJ5LmNhbGwodGhpcywgdmlld2VyLCBjYW1lcmFPcHRpb25zLCBmdW5jdGlvbiAodGVybWluYXRlZCkge1xuICAgIHRvdXIucGxheWxpc3RJbmRleCA9IDA7XG4gICAgLy8gU3RvcCBub25ibG9ja2luZyBlbnRyaWVzXG4gICAgaWYgKCF0ZXJtaW5hdGVkKSB7XG4gICAgICBjYW5jZWxBbGxFbnRyaWVzKHRvdXIuX2FjdGl2ZUVudHJpZXMpO1xuICAgIH1cbiAgICB0b3VyLnRvdXJFbmQucmFpc2VFdmVudCh0ZXJtaW5hdGVkKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFN0b3AgY3VyZW50bHkgcGxheWluZyB0b3VyLlxuICovXG5LbWxUb3VyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICBjYW5jZWxBbGxFbnRyaWVzKHRoaXMuX2FjdGl2ZUVudHJpZXMpO1xufTtcblxuLy8gU3RvcCBhbGwgYWN0aXZlRW50cmllcy5cbmZ1bmN0aW9uIGNhbmNlbEFsbEVudHJpZXMoYWN0aXZlRW50cmllcykge1xuICBmb3IgKFxuICAgIHZhciBlbnRyeSA9IGFjdGl2ZUVudHJpZXMucG9wKCk7XG4gICAgZW50cnkgIT09IHVuZGVmaW5lZDtcbiAgICBlbnRyeSA9IGFjdGl2ZUVudHJpZXMucG9wKClcbiAgKSB7XG4gICAgZW50cnkuc3RvcCgpO1xuICB9XG59XG5cbi8vIFBsYXkgcGxheWxpc3QgZW50cnkuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCByZWN1cnNldmx5IHdpdGggcGxheU5leHQgYW5kIGl0ZXJhdGVzIG92ZXIgYWxsIGVudHJpZXMgZnJvbSBwbGF5bGlzdC5cbmZ1bmN0aW9uIHBsYXlFbnRyeSh2aWV3ZXIsIGNhbWVyYU9wdGlvbnMsIGFsbERvbmUpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5wbGF5bGlzdFt0aGlzLnBsYXlsaXN0SW5kZXhdO1xuICBpZiAoZW50cnkpIHtcbiAgICB2YXIgX3BsYXlOZXh0ID0gcGxheU5leHQuYmluZCh0aGlzLCB2aWV3ZXIsIGNhbWVyYU9wdGlvbnMsIGFsbERvbmUpO1xuICAgIHRoaXMuX2FjdGl2ZUVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgdGhpcy5lbnRyeVN0YXJ0LnJhaXNlRXZlbnQoZW50cnkpO1xuICAgIGlmIChlbnRyeS5ibG9ja2luZykge1xuICAgICAgZW50cnkucGxheShfcGxheU5leHQsIHZpZXdlci5zY2VuZS5jYW1lcmEsIGNhbWVyYU9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdG91ciA9IHRoaXM7XG4gICAgICBlbnRyeS5wbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdG91ci5lbnRyeUVuZC5yYWlzZUV2ZW50KGVudHJ5KTtcbiAgICAgICAgdmFyIGluZHggPSB0b3VyLl9hY3RpdmVFbnRyaWVzLmluZGV4T2YoZW50cnkpO1xuICAgICAgICBpZiAoaW5keCA+PSAwKSB7XG4gICAgICAgICAgdG91ci5fYWN0aXZlRW50cmllcy5zcGxpY2UoaW5keCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgX3BsYXlOZXh0KHZpZXdlciwgY2FtZXJhT3B0aW9ucywgYWxsRG9uZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRlZmluZWQoYWxsRG9uZSkpIHtcbiAgICBhbGxEb25lKGZhbHNlKTtcbiAgfVxufVxuXG4vLyBJbmNyZW1lbnQgcGxheWxpc3RJbmRleCBhbmQgY2FsbCBwbGF5RW50cnkgaWYgdGVybWluYXRlZCBpc24ndCB0cnVlLlxuZnVuY3Rpb24gcGxheU5leHQodmlld2VyLCBjYW1lcmFPcHRpb25zLCBhbGxEb25lLCB0ZXJtaW5hdGVkKSB7XG4gIHZhciBlbnRyeSA9IHRoaXMucGxheWxpc3RbdGhpcy5wbGF5bGlzdEluZGV4XTtcbiAgdGhpcy5lbnRyeUVuZC5yYWlzZUV2ZW50KGVudHJ5LCB0ZXJtaW5hdGVkKTtcblxuICBpZiAodGVybWluYXRlZCkge1xuICAgIGFsbERvbmUodGVybWluYXRlZCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGluZHggPSB0aGlzLl9hY3RpdmVFbnRyaWVzLmluZGV4T2YoZW50cnkpO1xuICAgIGlmIChpbmR4ID49IDApIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUVudHJpZXMuc3BsaWNlKGluZHgsIDEpO1xuICAgIH1cbiAgICB0aGlzLnBsYXlsaXN0SW5kZXgrKztcbiAgICBwbGF5RW50cnkuY2FsbCh0aGlzLCB2aWV3ZXIsIGNhbWVyYU9wdGlvbnMsIGFsbERvbmUpO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBLbWxUb3VyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20217\n')},98826:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48243);\n/* harmony import */ var _Core_combine_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8182);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82982);\n/* harmony import */ var _Core_EasingFunction_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50732);\n\n\n\n\n/**\n * Transitions the KmlTour to the next destination. This transition is facilitated\n * using a specified flyToMode over a given number of seconds.\n *\n * @alias KmlTourFlyTo\n * @constructor\n *\n * @param {Number} duration entry duration\n * @param {String} flyToMode KML fly to mode: bounce, smooth, etc\n * @param {KmlCamera|KmlLookAt} view KmlCamera or KmlLookAt\n *\n * @see KmlTour\n * @see KmlTourWait\n */\nfunction KmlTourFlyTo(duration, flyToMode, view) {\n  this.type = "KmlTourFlyTo";\n  this.blocking = true;\n  this.activeCamera = null;\n  this.activeCallback = null;\n\n  this.duration = duration;\n  this.view = view;\n  this.flyToMode = flyToMode;\n}\n\n/**\n * Play this playlist entry\n *\n * @param {KmlTourFlyTo.DoneCallback} done function which will be called when playback ends\n * @param {Camera} camera Cesium camera\n * @param {Object} [cameraOptions] which will be merged with camera flyTo options. See {@link Camera#flyTo}\n */\nKmlTourFlyTo.prototype.play = function (done, camera, cameraOptions) {\n  this.activeCamera = camera;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(done) && done !== null) {\n    var self = this;\n    this.activeCallback = function (terminated) {\n      delete self.activeCallback;\n      delete self.activeCamera;\n      done((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(terminated) ? false : terminated);\n    };\n  }\n\n  var options = this.getCameraOptions(cameraOptions);\n  if (this.view.headingPitchRoll) {\n    camera.flyTo(options);\n  } else if (this.view.headingPitchRange) {\n    var target = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(this.view.position);\n    camera.flyToBoundingSphere(target, options);\n  }\n};\n\n/**\n * Stop execution of curent entry. Cancel camera flyTo\n */\nKmlTourFlyTo.prototype.stop = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this.activeCamera)) {\n    this.activeCamera.cancelFlight();\n  }\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this.activeCallback)) {\n    this.activeCallback(true);\n  }\n};\n\n/**\n * Returns options for {@link Camera#flyTo} or {@link Camera#flyToBoundingSphere}\n * depends on this.view type.\n *\n * @param {Object} cameraOptions options to merge with generated. See {@link Camera#flyTo}\n * @returns {Object} {@link Camera#flyTo} or {@link Camera#flyToBoundingSphere} options\n */\nKmlTourFlyTo.prototype.getCameraOptions = function (cameraOptions) {\n  var options = {\n    duration: this.duration,\n  };\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this.activeCallback)) {\n    options.complete = this.activeCallback;\n  }\n\n  if (this.flyToMode === "smooth") {\n    options.easingFunction = _Core_EasingFunction_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].LINEAR_NONE */ .Z.LINEAR_NONE;\n  }\n\n  if (this.view.headingPitchRoll) {\n    options.destination = this.view.position;\n    options.orientation = this.view.headingPitchRoll;\n  } else if (this.view.headingPitchRange) {\n    options.offset = this.view.headingPitchRange;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(cameraOptions)) {\n    options = (0,_Core_combine_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, cameraOptions);\n  }\n  return options;\n};\n\n/**\n * A function that will be executed when the flight completes.\n * @callback KmlTourFlyTo.DoneCallback\n *\n * @param {Boolean} terminated true if {@link KmlTourFlyTo#stop} was\n * called before entry done playback.\n */\n/* harmony default export */ __webpack_exports__["Z"] = (KmlTourFlyTo);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTg4MjYuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF1RDtBQUNkO0FBQ0E7QUFDYztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxxQkFBcUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkJBQTJCO0FBQ3RDLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVEscUVBQXFFO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUVBQU87QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUJBQXFCLHdFQUFjO0FBQ25DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0EsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixvQkFBb0IsSUFBSTtBQUNoRDtBQUNBO0FBQ0EsV0FBVyxRQUFRLG9EQUFvRDtBQUN2RSxhQUFhLFNBQVMsb0JBQW9CLElBQUksa0NBQWtDO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxxRUFBTztBQUNiO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkIsZ0dBQTBCO0FBQ3ZEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBLE1BQU0scUVBQU87QUFDYixjQUFjLHFFQUFPO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUyxvQkFBb0IseUJBQXlCO0FBQ2pFO0FBQ0E7QUFDQSx5REFBZSxZQUFZLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvRGF0YVNvdXJjZXMvS21sVG91ckZseVRvLmpzP2E1OWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJvdW5kaW5nU3BoZXJlIGZyb20gXCIuLi9Db3JlL0JvdW5kaW5nU3BoZXJlLmpzXCI7XG5pbXBvcnQgY29tYmluZSBmcm9tIFwiLi4vQ29yZS9jb21iaW5lLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRWFzaW5nRnVuY3Rpb24gZnJvbSBcIi4uL0NvcmUvRWFzaW5nRnVuY3Rpb24uanNcIjtcbi8qKlxuICogVHJhbnNpdGlvbnMgdGhlIEttbFRvdXIgdG8gdGhlIG5leHQgZGVzdGluYXRpb24uIFRoaXMgdHJhbnNpdGlvbiBpcyBmYWNpbGl0YXRlZFxuICogdXNpbmcgYSBzcGVjaWZpZWQgZmx5VG9Nb2RlIG92ZXIgYSBnaXZlbiBudW1iZXIgb2Ygc2Vjb25kcy5cbiAqXG4gKiBAYWxpYXMgS21sVG91ckZseVRvXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gZW50cnkgZHVyYXRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBmbHlUb01vZGUgS01MIGZseSB0byBtb2RlOiBib3VuY2UsIHNtb290aCwgZXRjXG4gKiBAcGFyYW0ge0ttbENhbWVyYXxLbWxMb29rQXR9IHZpZXcgS21sQ2FtZXJhIG9yIEttbExvb2tBdFxuICpcbiAqIEBzZWUgS21sVG91clxuICogQHNlZSBLbWxUb3VyV2FpdFxuICovXG5mdW5jdGlvbiBLbWxUb3VyRmx5VG8oZHVyYXRpb24sIGZseVRvTW9kZSwgdmlldykge1xuICB0aGlzLnR5cGUgPSBcIkttbFRvdXJGbHlUb1wiO1xuICB0aGlzLmJsb2NraW5nID0gdHJ1ZTtcbiAgdGhpcy5hY3RpdmVDYW1lcmEgPSBudWxsO1xuICB0aGlzLmFjdGl2ZUNhbGxiYWNrID0gbnVsbDtcblxuICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gIHRoaXMudmlldyA9IHZpZXc7XG4gIHRoaXMuZmx5VG9Nb2RlID0gZmx5VG9Nb2RlO1xufVxuXG4vKipcbiAqIFBsYXkgdGhpcyBwbGF5bGlzdCBlbnRyeVxuICpcbiAqIEBwYXJhbSB7S21sVG91ckZseVRvLkRvbmVDYWxsYmFja30gZG9uZSBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aGVuIHBsYXliYWNrIGVuZHNcbiAqIEBwYXJhbSB7Q2FtZXJhfSBjYW1lcmEgQ2VzaXVtIGNhbWVyYVxuICogQHBhcmFtIHtPYmplY3R9IFtjYW1lcmFPcHRpb25zXSB3aGljaCB3aWxsIGJlIG1lcmdlZCB3aXRoIGNhbWVyYSBmbHlUbyBvcHRpb25zLiBTZWUge0BsaW5rIENhbWVyYSNmbHlUb31cbiAqL1xuS21sVG91ckZseVRvLnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24gKGRvbmUsIGNhbWVyYSwgY2FtZXJhT3B0aW9ucykge1xuICB0aGlzLmFjdGl2ZUNhbWVyYSA9IGNhbWVyYTtcbiAgaWYgKGRlZmluZWQoZG9uZSkgJiYgZG9uZSAhPT0gbnVsbCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmFjdGl2ZUNhbGxiYWNrID0gZnVuY3Rpb24gKHRlcm1pbmF0ZWQpIHtcbiAgICAgIGRlbGV0ZSBzZWxmLmFjdGl2ZUNhbGxiYWNrO1xuICAgICAgZGVsZXRlIHNlbGYuYWN0aXZlQ2FtZXJhO1xuICAgICAgZG9uZShkZWZpbmVkKHRlcm1pbmF0ZWQpID8gZmFsc2UgOiB0ZXJtaW5hdGVkKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIG9wdGlvbnMgPSB0aGlzLmdldENhbWVyYU9wdGlvbnMoY2FtZXJhT3B0aW9ucyk7XG4gIGlmICh0aGlzLnZpZXcuaGVhZGluZ1BpdGNoUm9sbCkge1xuICAgIGNhbWVyYS5mbHlUbyhvcHRpb25zKTtcbiAgfSBlbHNlIGlmICh0aGlzLnZpZXcuaGVhZGluZ1BpdGNoUmFuZ2UpIHtcbiAgICB2YXIgdGFyZ2V0ID0gbmV3IEJvdW5kaW5nU3BoZXJlKHRoaXMudmlldy5wb3NpdGlvbik7XG4gICAgY2FtZXJhLmZseVRvQm91bmRpbmdTcGhlcmUodGFyZ2V0LCBvcHRpb25zKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTdG9wIGV4ZWN1dGlvbiBvZiBjdXJlbnQgZW50cnkuIENhbmNlbCBjYW1lcmEgZmx5VG9cbiAqL1xuS21sVG91ckZseVRvLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICBpZiAoZGVmaW5lZCh0aGlzLmFjdGl2ZUNhbWVyYSkpIHtcbiAgICB0aGlzLmFjdGl2ZUNhbWVyYS5jYW5jZWxGbGlnaHQoKTtcbiAgfVxuICBpZiAoZGVmaW5lZCh0aGlzLmFjdGl2ZUNhbGxiYWNrKSkge1xuICAgIHRoaXMuYWN0aXZlQ2FsbGJhY2sodHJ1ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBvcHRpb25zIGZvciB7QGxpbmsgQ2FtZXJhI2ZseVRvfSBvciB7QGxpbmsgQ2FtZXJhI2ZseVRvQm91bmRpbmdTcGhlcmV9XG4gKiBkZXBlbmRzIG9uIHRoaXMudmlldyB0eXBlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjYW1lcmFPcHRpb25zIG9wdGlvbnMgdG8gbWVyZ2Ugd2l0aCBnZW5lcmF0ZWQuIFNlZSB7QGxpbmsgQ2FtZXJhI2ZseVRvfVxuICogQHJldHVybnMge09iamVjdH0ge0BsaW5rIENhbWVyYSNmbHlUb30gb3Ige0BsaW5rIENhbWVyYSNmbHlUb0JvdW5kaW5nU3BoZXJlfSBvcHRpb25zXG4gKi9cbkttbFRvdXJGbHlUby5wcm90b3R5cGUuZ2V0Q2FtZXJhT3B0aW9ucyA9IGZ1bmN0aW9uIChjYW1lcmFPcHRpb25zKSB7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uLFxuICB9O1xuXG4gIGlmIChkZWZpbmVkKHRoaXMuYWN0aXZlQ2FsbGJhY2spKSB7XG4gICAgb3B0aW9ucy5jb21wbGV0ZSA9IHRoaXMuYWN0aXZlQ2FsbGJhY2s7XG4gIH1cblxuICBpZiAodGhpcy5mbHlUb01vZGUgPT09IFwic21vb3RoXCIpIHtcbiAgICBvcHRpb25zLmVhc2luZ0Z1bmN0aW9uID0gRWFzaW5nRnVuY3Rpb24uTElORUFSX05PTkU7XG4gIH1cblxuICBpZiAodGhpcy52aWV3LmhlYWRpbmdQaXRjaFJvbGwpIHtcbiAgICBvcHRpb25zLmRlc3RpbmF0aW9uID0gdGhpcy52aWV3LnBvc2l0aW9uO1xuICAgIG9wdGlvbnMub3JpZW50YXRpb24gPSB0aGlzLnZpZXcuaGVhZGluZ1BpdGNoUm9sbDtcbiAgfSBlbHNlIGlmICh0aGlzLnZpZXcuaGVhZGluZ1BpdGNoUmFuZ2UpIHtcbiAgICBvcHRpb25zLm9mZnNldCA9IHRoaXMudmlldy5oZWFkaW5nUGl0Y2hSYW5nZTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKGNhbWVyYU9wdGlvbnMpKSB7XG4gICAgb3B0aW9ucyA9IGNvbWJpbmUob3B0aW9ucywgY2FtZXJhT3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59O1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGZsaWdodCBjb21wbGV0ZXMuXG4gKiBAY2FsbGJhY2sgS21sVG91ckZseVRvLkRvbmVDYWxsYmFja1xuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gdGVybWluYXRlZCB0cnVlIGlmIHtAbGluayBLbWxUb3VyRmx5VG8jc3RvcH0gd2FzXG4gKiBjYWxsZWQgYmVmb3JlIGVudHJ5IGRvbmUgcGxheWJhY2suXG4gKi9cbmV4cG9ydCBkZWZhdWx0IEttbFRvdXJGbHlUbztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///98826\n')},86729:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82982);\n\n/**\n * Pauses the KmlTour for a given number of seconds.\n *\n * @alias KmlTourWait\n * @constructor\n *\n * @param {Number} duration entry duration\n *\n * @see KmlTour\n * @see KmlTourFlyTo\n */\nfunction KmlTourWait(duration) {\n  this.type = "KmlTourWait";\n  this.blocking = true;\n  this.duration = duration;\n\n  this.timeout = null;\n}\n\n/**\n * Play this playlist entry\n *\n * @param {KmlTourWait.DoneCallback} done function which will be called when playback ends\n */\nKmlTourWait.prototype.play = function (done) {\n  var self = this;\n  this.activeCallback = done;\n  this.timeout = setTimeout(function () {\n    delete self.activeCallback;\n    done(false);\n  }, this.duration * 1000);\n};\n\n/**\n * Stop execution of curent entry, cancel curent timeout\n */\nKmlTourWait.prototype.stop = function () {\n  clearTimeout(this.timeout);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(this.activeCallback)) {\n    this.activeCallback(true);\n  }\n};\n\n/**\n * A function which will be called when playback ends.\n *\n * @callback KmlTourWait.DoneCallback\n * @param {Boolean} terminated true if {@link KmlTourWait#stop} was\n * called before entry done playback.\n */\n/* harmony default export */ __webpack_exports__["Z"] = (KmlTourWait);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODY3MjkuanMiLCJtYXBwaW5ncyI6IjtBQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMEJBQTBCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTLG9CQUFvQix3QkFBd0I7QUFDaEU7QUFDQTtBQUNBLHlEQUFlLFdBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9EYXRhU291cmNlcy9LbWxUb3VyV2FpdC5qcz9jYzU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbi8qKlxuICogUGF1c2VzIHRoZSBLbWxUb3VyIGZvciBhIGdpdmVuIG51bWJlciBvZiBzZWNvbmRzLlxuICpcbiAqIEBhbGlhcyBLbWxUb3VyV2FpdFxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIGVudHJ5IGR1cmF0aW9uXG4gKlxuICogQHNlZSBLbWxUb3VyXG4gKiBAc2VlIEttbFRvdXJGbHlUb1xuICovXG5mdW5jdGlvbiBLbWxUb3VyV2FpdChkdXJhdGlvbikge1xuICB0aGlzLnR5cGUgPSBcIkttbFRvdXJXYWl0XCI7XG4gIHRoaXMuYmxvY2tpbmcgPSB0cnVlO1xuICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG5cbiAgdGhpcy50aW1lb3V0ID0gbnVsbDtcbn1cblxuLyoqXG4gKiBQbGF5IHRoaXMgcGxheWxpc3QgZW50cnlcbiAqXG4gKiBAcGFyYW0ge0ttbFRvdXJXYWl0LkRvbmVDYWxsYmFja30gZG9uZSBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aGVuIHBsYXliYWNrIGVuZHNcbiAqL1xuS21sVG91cldhaXQucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbiAoZG9uZSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuYWN0aXZlQ2FsbGJhY2sgPSBkb25lO1xuICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBkZWxldGUgc2VsZi5hY3RpdmVDYWxsYmFjaztcbiAgICBkb25lKGZhbHNlKTtcbiAgfSwgdGhpcy5kdXJhdGlvbiAqIDEwMDApO1xufTtcblxuLyoqXG4gKiBTdG9wIGV4ZWN1dGlvbiBvZiBjdXJlbnQgZW50cnksIGNhbmNlbCBjdXJlbnQgdGltZW91dFxuICovXG5LbWxUb3VyV2FpdC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gIGlmIChkZWZpbmVkKHRoaXMuYWN0aXZlQ2FsbGJhY2spKSB7XG4gICAgdGhpcy5hY3RpdmVDYWxsYmFjayh0cnVlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHdoZW4gcGxheWJhY2sgZW5kcy5cbiAqXG4gKiBAY2FsbGJhY2sgS21sVG91cldhaXQuRG9uZUNhbGxiYWNrXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHRlcm1pbmF0ZWQgdHJ1ZSBpZiB7QGxpbmsgS21sVG91cldhaXQjc3RvcH0gd2FzXG4gKiBjYWxsZWQgYmVmb3JlIGVudHJ5IGRvbmUgcGxheWJhY2suXG4gKi9cbmV4cG9ydCBkZWZhdWx0IEttbFRvdXJXYWl0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///86729\n')}}]);