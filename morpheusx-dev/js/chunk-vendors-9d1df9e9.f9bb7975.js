"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[2215],{59692:function(t,e,i){var o=i(72e3),n=i(66553),r=i(52975),a=i(62200),s=i(82982),u=i(12572),h=i(14459),Z=i(99417),c=i(96190),l=i(68985),d=i(9407),m=i(9121),p=i(42423),f=i(13222),_=i(53377),g=i(46707),v=i(95451);function w(t){t=(0,a.Z)(t,a.Z.EMPTY_OBJECT);var e=t.key;if(!(0,s.Z)(t.url))throw new u.Z("options.url is required.");if(!(0,s.Z)(e))throw new u.Z("options.key is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=1,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._key=e,this._resource=l.Z.createIfNeeded(t.url),this._resource.appendForwardSlash(),this._tileProtocol=t.tileProtocol,this._mapStyle=(0,a.Z)(t.mapStyle,_.Z.AERIAL),this._culture=(0,a.Z)(t.culture,""),this._tileDiscardPolicy=t.tileDiscardPolicy,(0,s.Z)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new g.Z),this._proxy=t.proxy,this._credit=new r.Z('<a href="http://www.bing.com"><img src="'+w.logoUrl+'" title="Bing Imagery"/></a>'),this._tilingScheme=new p.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:t.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._errorEvent=new h.Z,this._ready=!1,this._readyPromise=f.Z.defer();var i=this._tileProtocol;if((0,s.Z)(i))i.length>0&&":"===i[i.length-1]&&(i=i.substr(0,i.length-1));else{var o=document.location.protocol;i="http:"===o?"http":"https"}var n,v=this._resource.getDerivedResource({url:"REST/v1/Imagery/Metadata/"+this._mapStyle,queryParameters:{incl:"ImageryProviders",key:this._key,uriScheme:i}}),y=this;function T(t){if(1===t.resourceSets.length){var e=t.resourceSets[0].resources[0];y._tileWidth=e.imageWidth,y._tileHeight=e.imageHeight,y._maximumLevel=e.zoomMax-1,y._imageUrlSubdomains=e.imageUrlSubdomains,y._imageUrlTemplate=e.imageUrl;var i=y._attributionList=e.imageryProviders;i||(i=y._attributionList=[]);for(var o=0,a=i.length;o<a;++o){var s=i[o];if(s.credit instanceof r.Z)break;s.credit=new r.Z(s.attribution);for(var u=s.coverageAreas,h=0,l=s.coverageAreas.length;h<l;++h){var d=u[h],p=d.bbox;d.bbox=new c.Z(Z.Z.toRadians(p[1]),Z.Z.toRadians(p[0]),Z.Z.toRadians(p[3]),Z.Z.toRadians(p[2]))}}y._ready=!0,y._readyPromise.resolve(!0),m.Z.handleSuccess(n)}else E()}function E(t){var e="An error occurred while accessing "+v.url+".";n=m.Z.handleError(n,y,y._errorEvent,e,void 0,void 0,void 0,P),y._readyPromise.reject(new d.Z(e))}var C=v.url;function P(){var t=v.fetchJsonp("jsonp");w._metadataCache[C]=t,t.then(T).otherwise(E)}var O=w._metadataCache[C];(0,s.Z)(O)?O.then(T).otherwise(E):P()}Object.defineProperties(w.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){if(!this._ready)throw new u.Z("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new u.Z("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new u.Z("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new u.Z("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new u.Z("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new u.Z("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new u.Z("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}});var y=new c.Z;function T(t,e,i,o,n){var r=t._imageUrlTemplate,a=t._imageUrlSubdomains,s=(e+i+o)%a.length;return t._resource.getDerivedResource({url:r,request:n,templateValues:{quadkey:w.tileXYToQuadKey(e,i,o),subdomain:a[s],culture:t._culture},queryParameters:{n:"z"}})}w.prototype.getTileCredits=function(t,e,i){if(!this._ready)throw new u.Z("getTileCredits must not be called before the imagery provider is ready.");var o=this._tilingScheme.tileXYToRectangle(t,e,i,y),n=C(this._attributionList,i,o);return n},w.prototype.requestImage=function(t,e,i,o){if(!this._ready)throw new u.Z("requestImage must not be called before the imagery provider is ready.");var n=v.Z.loadImage(this,T(this,t,e,i,o));if((0,s.Z)(n))return n.otherwise((function(t){return(0,s.Z)(t.blob)&&0===t.blob.size?g.Z.EMPTY_IMAGE:f.Z.reject(t)}))},w.prototype.pickFeatures=function(t,e,i,o,n){},w.tileXYToQuadKey=function(t,e,i){for(var o="",n=i;n>=0;--n){var r=1<<n,a=0;0!==(t&r)&&(a|=1),0!==(e&r)&&(a|=2),o+=a}return o},w.quadKeyToTileXY=function(t){for(var e=0,i=0,o=t.length-1,n=o;n>=0;--n){var r=1<<n,a=+t[o-n];0!==(1&a)&&(e|=r),0!==(2&a)&&(i|=r)}return{x:e,y:i,level:o}},w._logoUrl=void 0,Object.defineProperties(w,{logoUrl:{get:function(){return(0,s.Z)(w._logoUrl)||(w._logoUrl=(0,o.Z)("Assets/Images/bing_maps_credit.png")),w._logoUrl},set:function(t){n.Z.defined("value",t),w._logoUrl=t}}});var E=new c.Z;function C(t,e,i){++e;for(var o=[],n=0,r=t.length;n<r;++n){for(var a=t[n],u=a.coverageAreas,h=!1,Z=0,l=a.coverageAreas.length;!h&&Z<l;++Z){var d=u[Z];if(e>=d.zoomMin&&e<=d.zoomMax){var m=c.Z.intersection(i,d.bbox,E);(0,s.Z)(m)&&(h=!0)}}h&&o.push(a.credit)}return o}w._metadataCache={},e["Z"]=w},53377:function(t,e){var i={AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"};e["Z"]=Object.freeze(i)},33306:function(t,e,i){var o=i(52200),n={ADD:o.Z.FUNC_ADD,SUBTRACT:o.Z.FUNC_SUBTRACT,REVERSE_SUBTRACT:o.Z.FUNC_REVERSE_SUBTRACT,MIN:o.Z.MIN,MAX:o.Z.MAX};e["Z"]=Object.freeze(n)},18796:function(t,e,i){var o=i(52200),n={ZERO:o.Z.ZERO,ONE:o.Z.ONE,SOURCE_COLOR:o.Z.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:o.Z.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:o.Z.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:o.Z.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:o.Z.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:o.Z.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:o.Z.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:o.Z.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:o.Z.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:o.Z.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:o.Z.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:o.Z.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:o.Z.SRC_ALPHA_SATURATE};e["Z"]=Object.freeze(n)},27384:function(t,e){var i={OPAQUE:0,TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};e["Z"]=Object.freeze(i)},13633:function(t,e,i){var o=i(33306),n=i(18796),r={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:o.Z.ADD,equationAlpha:o.Z.ADD,functionSourceRgb:n.Z.SOURCE_ALPHA,functionSourceAlpha:n.Z.ONE,functionDestinationRgb:n.Z.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:n.Z.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:o.Z.ADD,equationAlpha:o.Z.ADD,functionSourceRgb:n.Z.ONE,functionSourceAlpha:n.Z.ONE,functionDestinationRgb:n.Z.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:n.Z.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:o.Z.ADD,equationAlpha:o.Z.ADD,functionSourceRgb:n.Z.SOURCE_ALPHA,functionSourceAlpha:n.Z.ONE,functionDestinationRgb:n.Z.ONE,functionDestinationAlpha:n.Z.ONE})};e["Z"]=Object.freeze(r)},620:function(t,e,i){var o=i(60216),n=i(66553),r=i(62200),a=i(99417),s=new o.Z(1,1,1);function u(t){t=(0,r.Z)(t,s),n.Z.defined("dimensions",t),n.Z.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),n.Z.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),n.Z.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0),this._dimensions=o.Z.clone(t)}Object.defineProperties(u.prototype,{dimensions:{get:function(){return this._dimensions},set:function(t){n.Z.defined("value",t),n.Z.typeOf.number.greaterThanOrEquals("value.x",t.x,0),n.Z.typeOf.number.greaterThanOrEquals("value.y",t.y,0),n.Z.typeOf.number.greaterThanOrEquals("value.z",t.z,0),o.Z.clone(t,this._dimensions)}}});var h=new o.Z;u.prototype.emit=function(t){var e=this._dimensions,i=o.Z.multiplyByScalar(e,.5,h),n=a.Z.randomBetween(-i.x,i.x),r=a.Z.randomBetween(-i.y,i.y),s=a.Z.randomBetween(-i.z,i.z);t.position=o.Z.fromElements(n,r,s,t.position),t.velocity=o.Z.normalize(t.position,t.velocity)}},24725:function(t,e,i){var o=i(88108),n=i(82982),r=i(86511),a=i(38443),s=i(2932),u=i(21572),h=i(10667),Z=i(87721),c=i(8743),l=i(90398);function d(){this._framebuffer=void 0,this._colorTexture=void 0,this._drawCommand=void 0}function m(t,e){var i=t._framebuffer,n=e.createViewportQuadCommand(l.Z,{framebuffer:i,renderState:h.Z.fromCache({viewport:new o.Z(0,0,256,256)})});t._drawCommand=n}function p(t,e){var i=new c.Z({context:e,width:256,height:256,pixelFormat:a.Z.RGBA,pixelDatatype:u.Z.UNSIGNED_BYTE,sampler:Z.Z.NEAREST});t._colorTexture=i;var o=new s.Z({context:e,colorTextures:[i],destroyAttachments:!1});t._framebuffer=o}Object.defineProperties(d.prototype,{colorTexture:{get:function(){return this._colorTexture}}}),d.prototype.update=function(t){if(!(0,n.Z)(this._colorTexture)){var e=t.context;p(this,e),m(this,e),this._drawCommand.execute(e),this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._drawCommand.shaderProgram=this._drawCommand.shaderProgram&&this._drawCommand.shaderProgram.destroy()}},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this._colorTexture=this._colorTexture&&this._colorTexture.destroy(),(0,r.Z)(this)},e["Z"]=d},61446:function(t,e,i){i.d(e,{Z:function(){return h}});var o=i(62200),n=i(82982),r=i(12572),a=i(13222),s=i(29789),u=i(89356);function h(t){t=(0,o.Z)(t,o.Z.EMPTY_OBJECT);var e=t.typedArray,i=t.resource,s=t.cacheKey;if((0,n.Z)(e)===(0,n.Z)(i))throw new r.Z("One of options.typedArray and options.resource must be defined.");this._typedArray=e,this._resource=i,this._cacheKey=s,this._state=u.Z.UNLOADED,this._promise=a.Z.defer()}function Z(t){var e=t._resource;t._state=u.Z.LOADING,h._fetchArrayBuffer(e).then((function(e){t.isDestroyed()||(t._typedArray=new Uint8Array(e),t._state=u.Z.READY,t._promise.resolve(t))})).otherwise((function(i){if(!t.isDestroyed()){t._state=u.Z.FAILED;var o="Failed to load external buffer: "+e.url;t._promise.reject(t.getError(o,i))}}))}(0,n.Z)(Object.create)&&(h.prototype=Object.create(s.Z.prototype),h.prototype.constructor=h),Object.defineProperties(h.prototype,{promise:{get:function(){return this._promise.promise}},cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),h.prototype.load=function(){(0,n.Z)(this._typedArray)?this._promise.resolve(this):Z(this)},h._fetchArrayBuffer=function(t){return t.fetchArrayBuffer()},h.prototype.unload=function(){this._typedArray=void 0}},70561:function(t,e,i){var o=i(48243),n=i(60838),r=i(60216),a=i(63367),s=i(51688),u=i(62200),h=i(82982),Z=i(12572),c=i(50732),l=i(50491),d=i(39043),m=i(14459),p=i(59081),f=i(99819),_=i(57674),g=i(84935),v=i(67627),w=i(99417),y=i(68201),T=i(72248),E=i(91473),C=i(35131),P=i(66854),O=i(87811),A=i(68457),I=i(96190),S=i(95555),N=i(15092),D=i(95757),R=i(89917);function M(t){if(!(0,h.Z)(t))throw new Z.Z("scene is required.");this._scene=t,this._transform=T.Z.clone(T.Z.IDENTITY),this._invTransform=T.Z.clone(T.Z.IDENTITY),this._actualTransform=T.Z.clone(T.Z.IDENTITY),this._actualInvTransform=T.Z.clone(T.Z.IDENTITY),this._transformChanged=!1,this.position=new r.Z,this._position=new r.Z,this._positionWC=new r.Z,this._positionCartographic=new s.Z,this._oldPositionWC=void 0,this.positionWCDeltaMagnitude=0,this.positionWCDeltaMagnitudeLastFrame=0,this.timeSinceMoved=0,this._lastMovedTimestamp=0,this.direction=new r.Z,this._direction=new r.Z,this._directionWC=new r.Z,this.up=new r.Z,this._up=new r.Z,this._upWC=new r.Z,this.right=new r.Z,this._right=new r.Z,this._rightWC=new r.Z,this.frustum=new P.Z,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.fov=w.Z.toRadians(60),this.defaultMoveAmount=1e5,this.defaultLookAmount=Math.PI/60,this.defaultRotateAmount=Math.PI/3600,this.defaultZoomAmount=1e5,this.constrainedAxis=void 0,this.maximumZoomFactor=1.5,this._moveStart=new m.Z,this._moveEnd=new m.Z,this._changed=new m.Z,this._changedPosition=void 0,this._changedDirection=void 0,this._changedFrustum=void 0,this.percentageChanged=.5,this._viewMatrix=new T.Z,this._invViewMatrix=new T.Z,W(this),this._mode=R.Z.SCENE3D,this._modeChanged=!0;var e=t.mapProjection;this._projection=e,this._maxCoord=e.project(new s.Z(Math.PI,w.Z.PI_OVER_TWO)),this._max2Dfrustum=void 0,ie(this,M.DEFAULT_VIEW_RECTANGLE,this.position,!0);var i=r.Z.magnitude(this.position);i+=i*M.DEFAULT_VIEW_FACTOR,r.Z.normalize(this.position,this.position),r.Z.multiplyByScalar(this.position,i,this.position)}function W(t){T.Z.computeView(t._position,t._direction,t._up,t._right,t._viewMatrix),T.Z.multiply(t._viewMatrix,t._actualInvTransform,t._viewMatrix),T.Z.inverseTransformation(t._viewMatrix,t._invViewMatrix)}function x(t){if((0,h.Z)(t._oldPositionWC)){t.positionWCDeltaMagnitudeLastFrame=t.positionWCDeltaMagnitude;var e=r.Z.subtract(t.positionWC,t._oldPositionWC,t._oldPositionWC);t.positionWCDeltaMagnitude=r.Z.magnitude(e),t._oldPositionWC=r.Z.clone(t.positionWC,t._oldPositionWC),t.positionWCDeltaMagnitude>0?(t.timeSinceMoved=0,t._lastMovedTimestamp=(0,p.Z)()):t.timeSinceMoved=Math.max((0,p.Z)()-t._lastMovedTimestamp,0)/1e3}else t._oldPositionWC=r.Z.clone(t.positionWC,t._oldPositionWC)}function b(t){S.Z.basisTo2D(t._projection,t._transform,t._actualTransform)}M.TRANSFORM_2D=new T.Z(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),M.TRANSFORM_2D_INVERSE=T.Z.inverseTransformation(M.TRANSFORM_2D,new T.Z),M.DEFAULT_VIEW_RECTANGLE=I.Z.fromDegrees(-95,-20,-70,90),M.DEFAULT_VIEW_FACTOR=.5,M.DEFAULT_OFFSET=new f.Z(0,-w.Z.PI_OVER_FOUR,0),M.prototype.canPreloadFlight=function(){return(0,h.Z)(this._currentFlight)&&this._mode!==R.Z.SCENE2D},M.prototype._updateCameraChanged=function(){var t=this;if(x(t),0!==t._changed.numberOfListeners){var e=t.percentageChanged;if(t._mode!==R.Z.SCENE2D){if(!(0,h.Z)(t._changedDirection))return t._changedPosition=r.Z.clone(t.positionWC,t._changedPosition),void(t._changedDirection=r.Z.clone(t.directionWC,t._changedDirection));var i,o=w.Z.acosClamped(r.Z.dot(t.directionWC,t._changedDirection));i=(0,h.Z)(t.frustum.fovy)?o/(.5*t.frustum.fovy):o;var n=r.Z.distance(t.positionWC,t._changedPosition),a=n/t.positionCartographic.height;(i>e||a>e)&&(t._changed.raiseEvent(Math.max(i,a)),t._changedPosition=r.Z.clone(t.positionWC,t._changedPosition),t._changedDirection=r.Z.clone(t.directionWC,t._changedDirection))}else{if(!(0,h.Z)(t._changedFrustum))return t._changedPosition=r.Z.clone(t.position,t._changedPosition),void(t._changedFrustum=t.frustum.clone());var s,u=t.position,Z=t._changedPosition,c=t.frustum,l=t._changedFrustum,d=u.x+c.left,m=u.x+c.right,p=Z.x+l.left,f=Z.x+l.right,_=u.y+c.bottom,g=u.y+c.top,v=Z.y+l.bottom,y=Z.y+l.top,T=Math.max(d,p),E=Math.min(m,f),C=Math.max(_,v),P=Math.min(g,y);if(T>=E||C>=g)s=1;else{var O=l;d<p&&m>f&&_<v&&g>y&&(O=c),s=1-(E-T)*(P-C)/((O.right-O.left)*(O.top-O.bottom))}s>e&&(t._changed.raiseEvent(s),t._changedPosition=r.Z.clone(t.position,t._changedPosition),t._changedFrustum=t.frustum.clone(t._changedFrustum))}}};var L=new s.Z,U=new r.Z,B=new r.Z,F=new a.Z,H=new a.Z,V=new a.Z,z=new a.Z,q=new a.Z;function j(t){var e=t._projection,i=e.ellipsoid,o=T.Z.getColumn(t._transform,3,F),n=i.cartesianToCartographic(o,L),s=e.project(n,U),u=H;u.x=s.z,u.y=s.x,u.z=s.y,u.w=1;var h=a.Z.clone(a.Z.UNIT_X,q),Z=a.Z.add(T.Z.getColumn(t._transform,0,B),o,B);i.cartesianToCartographic(Z,n),e.project(n,s);var c=V;c.x=s.z,c.y=s.x,c.z=s.y,c.w=0,r.Z.subtract(c,u,c),c.x=0;var l=z;if(r.Z.magnitudeSquared(c)>w.Z.EPSILON10)r.Z.cross(h,c,l);else{var d=a.Z.add(T.Z.getColumn(t._transform,1,B),o,B);i.cartesianToCartographic(d,n),e.project(n,s),l.x=s.z,l.y=s.x,l.z=s.y,l.w=0,r.Z.subtract(l,u,l),l.x=0,r.Z.magnitudeSquared(l)<w.Z.EPSILON10&&(a.Z.clone(a.Z.UNIT_Y,c),a.Z.clone(a.Z.UNIT_Z,l))}r.Z.cross(l,h,c),r.Z.normalize(c,c),r.Z.cross(h,c,l),r.Z.normalize(l,l),T.Z.setColumn(t._actualTransform,0,c,t._actualTransform),T.Z.setColumn(t._actualTransform,1,l,t._actualTransform),T.Z.setColumn(t._actualTransform,2,h,t._actualTransform),T.Z.setColumn(t._actualTransform,3,u,t._actualTransform)}var k=new r.Z;function G(t){var e=t._mode,i=!1,o=0;e===R.Z.SCENE2D&&(o=t.frustum.right-t.frustum.left,i=o!==t._positionCartographic.height);var n=t._position,a=!r.Z.equals(n,t.position)||i;a&&(n=r.Z.clone(t.position,t._position));var s=t._direction,u=!r.Z.equals(s,t.direction);u&&(r.Z.normalize(t.direction,t.direction),s=r.Z.clone(t.direction,t._direction));var h=t._up,Z=!r.Z.equals(h,t.up);Z&&(r.Z.normalize(t.up,t.up),h=r.Z.clone(t.up,t._up));var c=t._right,l=!r.Z.equals(c,t.right);l&&(r.Z.normalize(t.right,t.right),c=r.Z.clone(t.right,t._right));var d=t._transformChanged||t._modeChanged;t._transformChanged=!1,d&&(T.Z.inverseTransformation(t._transform,t._invTransform),t._mode===R.Z.COLUMBUS_VIEW||t._mode===R.Z.SCENE2D?T.Z.equals(T.Z.IDENTITY,t._transform)?T.Z.clone(M.TRANSFORM_2D,t._actualTransform):t._mode===R.Z.COLUMBUS_VIEW?b(t):j(t):T.Z.clone(t._transform,t._actualTransform),T.Z.inverseTransformation(t._actualTransform,t._actualInvTransform),t._modeChanged=!1);var m=t._actualTransform;if(a||d)if(t._positionWC=T.Z.multiplyByPoint(m,n,t._positionWC),e===R.Z.SCENE3D||e===R.Z.MORPHING)t._positionCartographic=t._projection.ellipsoid.cartesianToCartographic(t._positionWC,t._positionCartographic);else{var p=k;p.x=t._positionWC.y,p.y=t._positionWC.z,p.z=t._positionWC.x,e===R.Z.SCENE2D&&(p.z=o),t._projection.unproject(p,t._positionCartographic)}if(u||Z||l){var f=r.Z.dot(s,r.Z.cross(h,c,k));if(Math.abs(1-f)>w.Z.EPSILON2){var _=1/r.Z.magnitudeSquared(h),g=r.Z.dot(h,s)*_,v=r.Z.multiplyByScalar(s,g,k);h=r.Z.normalize(r.Z.subtract(h,v,t._up),t._up),r.Z.clone(h,t.up),c=r.Z.cross(s,h,t._right),r.Z.clone(c,t.right)}}(u||d)&&(t._directionWC=T.Z.multiplyByPointAsVector(m,s,t._directionWC),r.Z.normalize(t._directionWC,t._directionWC)),(Z||d)&&(t._upWC=T.Z.multiplyByPointAsVector(m,h,t._upWC),r.Z.normalize(t._upWC,t._upWC)),(l||d)&&(t._rightWC=T.Z.multiplyByPointAsVector(m,c,t._rightWC),r.Z.normalize(t._rightWC,t._rightWC)),(a||u||Z||l||d)&&W(t)}function Y(t,e){var i;return i=w.Z.equalsEpsilon(Math.abs(t.z),1,w.Z.EPSILON3)?Math.atan2(e.y,e.x)-w.Z.PI_OVER_TWO:Math.atan2(t.y,t.x)-w.Z.PI_OVER_TWO,w.Z.TWO_PI-w.Z.zeroToTwoPi(i)}function X(t){return w.Z.PI_OVER_TWO-w.Z.acosClamped(t.z)}function Q(t,e,i){var o=0;return w.Z.equalsEpsilon(Math.abs(t.z),1,w.Z.EPSILON3)||(o=Math.atan2(-i.z,e.z),o=w.Z.zeroToTwoPi(o+w.Z.TWO_PI)),o}var J=new T.Z,K=new T.Z;Object.defineProperties(M.prototype,{transform:{get:function(){return this._transform}},inverseTransform:{get:function(){return G(this),this._invTransform}},viewMatrix:{get:function(){return G(this),this._viewMatrix}},inverseViewMatrix:{get:function(){return G(this),this._invViewMatrix}},positionCartographic:{get:function(){return G(this),this._positionCartographic}},positionWC:{get:function(){return G(this),this._positionWC}},directionWC:{get:function(){return G(this),this._directionWC}},upWC:{get:function(){return G(this),this._upWC}},rightWC:{get:function(){return G(this),this._rightWC}},heading:{get:function(){if(this._mode!==R.Z.MORPHING){var t=this._projection.ellipsoid,e=T.Z.clone(this._transform,J),i=S.Z.eastNorthUpToFixedFrame(this.positionWC,t,K);this._setTransform(i);var o=Y(this.direction,this.up);return this._setTransform(e),o}}},pitch:{get:function(){if(this._mode!==R.Z.MORPHING){var t=this._projection.ellipsoid,e=T.Z.clone(this._transform,J),i=S.Z.eastNorthUpToFixedFrame(this.positionWC,t,K);this._setTransform(i);var o=X(this.direction);return this._setTransform(e),o}}},roll:{get:function(){if(this._mode!==R.Z.MORPHING){var t=this._projection.ellipsoid,e=T.Z.clone(this._transform,J),i=S.Z.eastNorthUpToFixedFrame(this.positionWC,t,K);this._setTransform(i);var o=Q(this.direction,this.up,this.right);return this._setTransform(e),o}}},moveStart:{get:function(){return this._moveStart}},moveEnd:{get:function(){return this._moveEnd}},changed:{get:function(){return this._changed}}}),M.prototype.update=function(t){if(!(0,h.Z)(t))throw new Z.Z("mode is required.");if(t===R.Z.SCENE2D&&!(this.frustum instanceof C.Z))throw new Z.Z("An OrthographicOffCenterFrustum is required in 2D.");if((t===R.Z.SCENE3D||t===R.Z.COLUMBUS_VIEW)&&!(this.frustum instanceof P.Z)&&!(this.frustum instanceof E.Z))throw new Z.Z("A PerspectiveFrustum or OrthographicFrustum is required in 3D and Columbus view");var e=!1;if(t!==this._mode&&(this._mode=t,this._modeChanged=t!==R.Z.MORPHING,e=this._mode===R.Z.SCENE2D),e){var i=this._max2Dfrustum=this.frustum.clone();if(!(i instanceof C.Z))throw new Z.Z("The camera frustum is expected to be orthographic for 2D camera control.");var o=2,n=i.top/i.right;i.right=this._maxCoord.x*o,i.left=-i.right,i.top=n*i.right,i.bottom=-i.top}this._mode===R.Z.SCENE2D&&Et(this,this.position)};var $=new r.Z,tt=new r.Z,et=new r.Z;M.prototype._setTransform=function(t){var e=r.Z.clone(this.positionWC,$),i=r.Z.clone(this.upWC,tt),o=r.Z.clone(this.directionWC,et);T.Z.clone(t,this._transform),this._transformChanged=!0,G(this);var n=this._actualInvTransform;T.Z.multiplyByPoint(n,e,this.position),T.Z.multiplyByPointAsVector(n,o,this.direction),T.Z.multiplyByPointAsVector(n,i,this.up),r.Z.cross(this.direction,this.up,this.right),G(this)};var it=new n.Z,ot=new A.Z,nt=new r.Z,rt=new r.Z;function at(t){if(!T.Z.equals(T.Z.IDENTITY,t.transform))return r.Z.magnitude(t.position);var e,i,o,n=t._scene,a=n.globe,s=it;if(s.x=n.drawingBufferWidth/2,s.y=n.drawingBufferHeight/2,(0,h.Z)(a)){var u=t.getPickRay(s,ot);e=a.pickWorldCoordinates(u,n,!0,nt)}if(n.pickPositionSupported&&(i=n.pickPositionWorldCoordinates(s,rt)),(0,h.Z)(e)||(0,h.Z)(i)){var Z=(0,h.Z)(i)?r.Z.distance(i,t.positionWC):Number.POSITIVE_INFINITY,c=(0,h.Z)(e)?r.Z.distance(e,t.positionWC):Number.POSITIVE_INFINITY;o=Math.min(Z,c)}else o=Math.max(t.positionCartographic.height,0);return o}M.prototype._adjustOrthographicFrustum=function(t){this.frustum instanceof E.Z&&(!t&&this._positionCartographic.height<15e4||(this.frustum.width=at(this)))};var st=new r.Z,ut=new T.Z,ht=new T.Z,Zt=new O.Z,ct=new y.Z,lt=new s.Z;function dt(t,e,i){var o=T.Z.clone(t.transform,ut),n=S.Z.eastNorthUpToFixedFrame(e,t._projection.ellipsoid,ht);t._setTransform(n),r.Z.clone(r.Z.ZERO,t.position),i.heading=i.heading-w.Z.PI_OVER_TWO;var a=O.Z.fromHeadingPitchRoll(i,Zt),s=y.Z.fromQuaternion(a,ct);y.Z.getColumn(s,0,t.direction),y.Z.getColumn(s,2,t.up),r.Z.cross(t.direction,t.up,t.right),t._setTransform(o),t._adjustOrthographicFrustum(!0)}function mt(t,e,i,o){var n=T.Z.clone(t.transform,ut);if(t._setTransform(T.Z.IDENTITY),!r.Z.equals(e,t.positionWC)){if(o){var a=t._projection,s=a.ellipsoid.cartesianToCartographic(e,lt);e=a.project(s,st)}r.Z.clone(e,t.position)}i.heading=i.heading-w.Z.PI_OVER_TWO;var u=O.Z.fromHeadingPitchRoll(i,Zt),h=y.Z.fromQuaternion(u,ct);y.Z.getColumn(h,0,t.direction),y.Z.getColumn(h,2,t.up),r.Z.cross(t.direction,t.up,t.right),t._setTransform(n),t._adjustOrthographicFrustum(!0)}function pt(t,e,i,o){var a=T.Z.clone(t.transform,ut);if(t._setTransform(T.Z.IDENTITY),!r.Z.equals(e,t.positionWC)){if(o){var s=t._projection,u=s.ellipsoid.cartesianToCartographic(e,lt);e=s.project(u,st)}n.Z.clone(e,t.position);var h=.5*-e.z,Z=-h,c=t.frustum;if(Z>h){var l=c.top/c.right;c.right=Z,c.left=h,c.top=c.right*l,c.bottom=-c.top}}if(t._scene.mapMode2D===D.Z.ROTATE){i.heading=i.heading-w.Z.PI_OVER_TWO,i.pitch=-w.Z.PI_OVER_TWO,i.roll=0;var d=O.Z.fromHeadingPitchRoll(i,Zt),m=y.Z.fromQuaternion(d,ct);y.Z.getColumn(m,2,t.up),r.Z.cross(t.direction,t.up,t.right)}t._setTransform(a)}var ft=new r.Z,_t=new r.Z,gt=new r.Z;function vt(t,e,i,o){var n=r.Z.clone(i.direction,ft),a=r.Z.clone(i.up,_t);if(t._scene.mode===R.Z.SCENE3D){var s=t._projection.ellipsoid,u=S.Z.eastNorthUpToFixedFrame(e,s,J),h=T.Z.inverseTransformation(u,K);T.Z.multiplyByPointAsVector(h,n,n),T.Z.multiplyByPointAsVector(h,a,a)}var Z=r.Z.cross(n,a,gt);return o.heading=Y(n,a),o.pitch=X(n),o.roll=Q(n,a,Z),o}var wt={destination:void 0,orientation:{direction:void 0,up:void 0,heading:void 0,pitch:void 0,roll:void 0},convert:void 0,endTransform:void 0},yt=new _.Z;M.prototype.setView=function(t){t=(0,u.Z)(t,u.Z.EMPTY_OBJECT);var e=(0,u.Z)(t.orientation,u.Z.EMPTY_OBJECT),i=this._mode;if(i!==R.Z.MORPHING){(0,h.Z)(t.endTransform)&&this._setTransform(t.endTransform);var o=(0,u.Z)(t.convert,!0),n=(0,u.Z)(t.destination,r.Z.clone(this.positionWC,st));(0,h.Z)(n)&&(0,h.Z)(n.west)&&(n=this.getRectangleCameraCoordinates(n,st),o=!1),(0,h.Z)(e.direction)&&(e=vt(this,n,e,wt.orientation)),yt.heading=(0,u.Z)(e.heading,0),yt.pitch=(0,u.Z)(e.pitch,-w.Z.PI_OVER_TWO),yt.roll=(0,u.Z)(e.roll,0),i===R.Z.SCENE3D?dt(this,n,yt):i===R.Z.SCENE2D?pt(this,n,yt,o):mt(this,n,yt,o)}};var Tt=new r.Z;function Et(t,e){var i,o,n=t._scene.mapMode2D===D.Z.ROTATE,r=t._maxCoord.x,a=t._maxCoord.y;n?(o=r,i=-o):(o=e.x-2*r,i=e.x+2*r),e.x>r&&(e.x=o),e.x<-r&&(e.x=i),e.y>a&&(e.y=a),e.y<-a&&(e.y=-a)}M.prototype.flyHome=function(t){var e=this._mode;if(e===R.Z.MORPHING&&this._scene.completeMorph(),e===R.Z.SCENE2D)this.flyTo({destination:M.DEFAULT_VIEW_RECTANGLE,duration:t,endTransform:T.Z.IDENTITY});else if(e===R.Z.SCENE3D){var i=this.getRectangleCameraCoordinates(M.DEFAULT_VIEW_RECTANGLE),o=r.Z.magnitude(i);o+=o*M.DEFAULT_VIEW_FACTOR,r.Z.normalize(i,i),r.Z.multiplyByScalar(i,o,i),this.flyTo({destination:i,duration:t,endTransform:T.Z.IDENTITY})}else if(e===R.Z.COLUMBUS_VIEW){var n=this._projection.ellipsoid.maximumRadius,a=new r.Z(0,-1,1);a=r.Z.multiplyByScalar(r.Z.normalize(a,a),5*n,a),this.flyTo({destination:a,duration:t,orientation:{heading:0,pitch:-Math.acos(r.Z.normalize(a,Tt).z),roll:0},endTransform:T.Z.IDENTITY,convert:!1})}},M.prototype.worldToCameraCoordinates=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("cartesian is required.");return(0,h.Z)(e)||(e=new a.Z),G(this),T.Z.multiplyByVector(this._actualInvTransform,t,e)},M.prototype.worldToCameraCoordinatesPoint=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("cartesian is required.");return(0,h.Z)(e)||(e=new r.Z),G(this),T.Z.multiplyByPoint(this._actualInvTransform,t,e)},M.prototype.worldToCameraCoordinatesVector=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("cartesian is required.");return(0,h.Z)(e)||(e=new r.Z),G(this),T.Z.multiplyByPointAsVector(this._actualInvTransform,t,e)},M.prototype.cameraToWorldCoordinates=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("cartesian is required.");return(0,h.Z)(e)||(e=new a.Z),G(this),T.Z.multiplyByVector(this._actualTransform,t,e)},M.prototype.cameraToWorldCoordinatesPoint=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("cartesian is required.");return(0,h.Z)(e)||(e=new r.Z),G(this),T.Z.multiplyByPoint(this._actualTransform,t,e)},M.prototype.cameraToWorldCoordinatesVector=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("cartesian is required.");return(0,h.Z)(e)||(e=new r.Z),G(this),T.Z.multiplyByPointAsVector(this._actualTransform,t,e)};var Ct=new r.Z;M.prototype.move=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("direction is required.");var i=this.position;r.Z.multiplyByScalar(t,e,Ct),r.Z.add(i,Ct,i),this._mode===R.Z.SCENE2D&&Et(this,i),this._adjustOrthographicFrustum(!0)},M.prototype.moveForward=function(t){t=(0,u.Z)(t,this.defaultMoveAmount),this._mode===R.Z.SCENE2D?xt(this,t):this.move(this.direction,t)},M.prototype.moveBackward=function(t){t=(0,u.Z)(t,this.defaultMoveAmount),this._mode===R.Z.SCENE2D?xt(this,-t):this.move(this.direction,-t)},M.prototype.moveUp=function(t){t=(0,u.Z)(t,this.defaultMoveAmount),this.move(this.up,t)},M.prototype.moveDown=function(t){t=(0,u.Z)(t,this.defaultMoveAmount),this.move(this.up,-t)},M.prototype.moveRight=function(t){t=(0,u.Z)(t,this.defaultMoveAmount),this.move(this.right,t)},M.prototype.moveLeft=function(t){t=(0,u.Z)(t,this.defaultMoveAmount),this.move(this.right,-t)},M.prototype.lookLeft=function(t){t=(0,u.Z)(t,this.defaultLookAmount),this._mode!==R.Z.SCENE2D&&this.look(this.up,-t)},M.prototype.lookRight=function(t){t=(0,u.Z)(t,this.defaultLookAmount),this._mode!==R.Z.SCENE2D&&this.look(this.up,t)},M.prototype.lookUp=function(t){t=(0,u.Z)(t,this.defaultLookAmount),this._mode!==R.Z.SCENE2D&&this.look(this.right,-t)},M.prototype.lookDown=function(t){t=(0,u.Z)(t,this.defaultLookAmount),this._mode!==R.Z.SCENE2D&&this.look(this.right,t)};var Pt=new O.Z,Ot=new y.Z;M.prototype.look=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("axis is required.");var i=(0,u.Z)(e,this.defaultLookAmount),o=O.Z.fromAxisAngle(t,-i,Pt),n=y.Z.fromQuaternion(o,Ot),r=this.direction,a=this.up,s=this.right;y.Z.multiplyByVector(n,r,r),y.Z.multiplyByVector(n,a,a),y.Z.multiplyByVector(n,s,s)},M.prototype.twistLeft=function(t){t=(0,u.Z)(t,this.defaultLookAmount),this.look(this.direction,t)},M.prototype.twistRight=function(t){t=(0,u.Z)(t,this.defaultLookAmount),this.look(this.direction,-t)};var At=new O.Z,It=new y.Z;M.prototype.rotate=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("axis is required.");var i=(0,u.Z)(e,this.defaultRotateAmount),o=O.Z.fromAxisAngle(t,-i,At),n=y.Z.fromQuaternion(o,It);y.Z.multiplyByVector(n,this.position,this.position),y.Z.multiplyByVector(n,this.direction,this.direction),y.Z.multiplyByVector(n,this.up,this.up),r.Z.cross(this.direction,this.up,this.right),r.Z.cross(this.right,this.direction,this.up),this._adjustOrthographicFrustum(!1)},M.prototype.rotateDown=function(t){t=(0,u.Z)(t,this.defaultRotateAmount),Mt(this,t)},M.prototype.rotateUp=function(t){t=(0,u.Z)(t,this.defaultRotateAmount),Mt(this,-t)};var St=new r.Z,Nt=new r.Z,Dt=new r.Z,Rt=new r.Z;function Mt(t,e){var i=t.position;if((0,h.Z)(t.constrainedAxis)&&!r.Z.equalsEpsilon(t.position,r.Z.ZERO,w.Z.EPSILON2)){var o=r.Z.normalize(i,St),n=r.Z.equalsEpsilon(o,t.constrainedAxis,w.Z.EPSILON2),a=r.Z.equalsEpsilon(o,r.Z.negate(t.constrainedAxis,Rt),w.Z.EPSILON2);if(n||a)(n&&e<0||a&&e>0)&&t.rotate(t.right,e);else{var s=r.Z.normalize(t.constrainedAxis,Nt),u=r.Z.dot(o,s),Z=w.Z.acosClamped(u);e>0&&e>Z&&(e=Z-w.Z.EPSILON4),u=r.Z.dot(o,r.Z.negate(s,Rt)),Z=w.Z.acosClamped(u),e<0&&-e>Z&&(e=-Z+w.Z.EPSILON4);var c=r.Z.cross(s,o,Dt);t.rotate(c,e)}}else t.rotate(t.right,e)}function Wt(t,e){(0,h.Z)(t.constrainedAxis)?t.rotate(t.constrainedAxis,e):t.rotate(t.up,e)}function xt(t,e){var i,o=t.frustum;if(!(o instanceof C.Z)||!(0,h.Z)(o.left)||!(0,h.Z)(o.right)||!(0,h.Z)(o.bottom)||!(0,h.Z)(o.top))throw new Z.Z("The camera frustum is expected to be orthographic for 2D camera control.");if(e*=.5,Math.abs(o.top)+Math.abs(o.bottom)>Math.abs(o.left)+Math.abs(o.right)){var n=o.top-e,r=o.bottom+e,a=t._maxCoord.y;t._scene.mapMode2D===D.Z.ROTATE&&(a*=t.maximumZoomFactor),r>a&&(r=a,n=-a),n<=r&&(n=1,r=-1),i=o.right/o.top,o.top=n,o.bottom=r,o.right=o.top*i,o.left=-o.right}else{var s=o.right-e,u=o.left+e,c=t._maxCoord.x;t._scene.mapMode2D===D.Z.ROTATE&&(c*=t.maximumZoomFactor),s>c&&(s=c,u=-c),s<=u&&(s=1,u=-1),i=o.top/o.right,o.right=s,o.left=u,o.top=o.right*i,o.bottom=-o.top}}function bt(t,e){t.move(t.direction,e)}M.prototype.rotateRight=function(t){t=(0,u.Z)(t,this.defaultRotateAmount),Wt(this,-t)},M.prototype.rotateLeft=function(t){t=(0,u.Z)(t,this.defaultRotateAmount),Wt(this,t)},M.prototype.zoomIn=function(t){t=(0,u.Z)(t,this.defaultZoomAmount),this._mode===R.Z.SCENE2D?xt(this,t):bt(this,t)},M.prototype.zoomOut=function(t){t=(0,u.Z)(t,this.defaultZoomAmount),this._mode===R.Z.SCENE2D?xt(this,-t):bt(this,-t)},M.prototype.getMagnitude=function(){return this._mode===R.Z.SCENE3D?r.Z.magnitude(this.position):this._mode===R.Z.COLUMBUS_VIEW?Math.abs(this.position.z):this._mode===R.Z.SCENE2D?Math.max(this.frustum.right-this.frustum.left,this.frustum.top-this.frustum.bottom):void 0};var Lt=new T.Z;M.prototype.lookAt=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("target is required");if(!(0,h.Z)(e))throw new Z.Z("offset is required");if(this._mode===R.Z.MORPHING)throw new Z.Z("lookAt is not supported while morphing.");var i=S.Z.eastNorthUpToFixedFrame(t,l.Z.WGS84,Lt);this.lookAtTransform(i,e)};var Ut=new r.Z,Bt=new O.Z,Ft=new O.Z,Ht=new y.Z;function Vt(t,e,i){e=w.Z.clamp(e,-w.Z.PI_OVER_TWO,w.Z.PI_OVER_TWO),t=w.Z.zeroToTwoPi(t)-w.Z.PI_OVER_TWO;var o=O.Z.fromAxisAngle(r.Z.UNIT_Y,-e,Bt),n=O.Z.fromAxisAngle(r.Z.UNIT_Z,-t,Ft),a=O.Z.multiply(n,o,n),s=y.Z.fromQuaternion(a,Ht),u=r.Z.clone(r.Z.UNIT_X,Ut);return y.Z.multiplyByVector(s,u,u),r.Z.negate(u,u),r.Z.multiplyByScalar(u,i,u),u}M.prototype.lookAtTransform=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("transform is required");if(this._mode===R.Z.MORPHING)throw new Z.Z("lookAtTransform is not supported while morphing.");if(this._setTransform(t),(0,h.Z)(e)){var i;if(i=(0,h.Z)(e.heading)?Vt(e.heading,e.pitch,e.range):e,this._mode===R.Z.SCENE2D){n.Z.clone(n.Z.ZERO,this.position),r.Z.negate(i,this.up),this.up.z=0,r.Z.magnitudeSquared(this.up)<w.Z.EPSILON10&&r.Z.clone(r.Z.UNIT_Y,this.up),r.Z.normalize(this.up,this.up),this._setTransform(T.Z.IDENTITY),r.Z.negate(r.Z.UNIT_Z,this.direction),r.Z.cross(this.direction,this.up,this.right),r.Z.normalize(this.right,this.right);var o=this.frustum,a=o.top/o.right;return o.right=.5*r.Z.magnitude(i),o.left=-o.right,o.top=a*o.right,o.bottom=-o.top,void this._setTransform(t)}r.Z.clone(i,this.position),r.Z.negate(this.position,this.direction),r.Z.normalize(this.direction,this.direction),r.Z.cross(this.direction,r.Z.UNIT_Z,this.right),r.Z.magnitudeSquared(this.right)<w.Z.EPSILON10&&r.Z.clone(r.Z.UNIT_X,this.right),r.Z.normalize(this.right,this.right),r.Z.cross(this.right,this.direction,this.up),r.Z.normalize(this.up,this.up),this._adjustOrthographicFrustum(!0)}};var zt,qt=new s.Z,jt=new s.Z,kt=new r.Z,Gt=new r.Z,Yt=new r.Z,Xt=new r.Z,Qt=new r.Z,Jt=new r.Z,Kt=new r.Z,$t=new r.Z,te={direction:new r.Z,right:new r.Z,up:new r.Z};function ee(t,e,i,o){var n=Math.abs(r.Z.dot(e,i));return n/o-r.Z.dot(t,i)}function ie(t,e,i,o){var n=t._projection.ellipsoid,a=o?t:te,s=e.north,u=e.south,Z=e.east,c=e.west;c>Z&&(Z+=w.Z.TWO_PI);var l,m=.5*(c+Z);if(u<-w.Z.PI_OVER_TWO+w.Z.RADIANS_PER_DEGREE&&s>w.Z.PI_OVER_TWO-w.Z.RADIANS_PER_DEGREE)l=0;else{var p=qt;p.longitude=m,p.latitude=s,p.height=0;var f=jt;f.longitude=m,f.latitude=u,f.height=0;var _=zt;(0,h.Z)(_)&&_.ellipsoid===n||(zt=_=new d.Z(void 0,void 0,n)),_.setEndPoints(p,f),l=_.interpolateUsingFraction(.5,qt).latitude}var g=qt;g.longitude=m,g.latitude=l,g.height=0;var v=n.cartographicToCartesian(g,Kt),y=qt;y.longitude=Z,y.latitude=s;var T=n.cartographicToCartesian(y,kt);y.longitude=c;var C=n.cartographicToCartesian(y,Yt);y.longitude=m;var P=n.cartographicToCartesian(y,Qt);y.latitude=u;var O=n.cartographicToCartesian(y,Jt);y.longitude=Z;var A=n.cartographicToCartesian(y,Xt);y.longitude=c;var I=n.cartographicToCartesian(y,Gt);r.Z.subtract(C,v,C),r.Z.subtract(A,v,A),r.Z.subtract(T,v,T),r.Z.subtract(I,v,I),r.Z.subtract(P,v,P),r.Z.subtract(O,v,O);var S=n.geodeticSurfaceNormal(v,a.direction);r.Z.negate(S,S);var N=r.Z.cross(S,r.Z.UNIT_Z,a.right);r.Z.normalize(N,N);var D,R=r.Z.cross(N,S,a.up);if(t.frustum instanceof E.Z){var M,W,x=Math.max(r.Z.distance(T,C),r.Z.distance(A,I)),b=Math.max(r.Z.distance(T,A),r.Z.distance(C,I)),L=t.frustum._offCenterFrustum.right/t.frustum._offCenterFrustum.top,U=b*L;x>U?(M=x,W=M/L):(W=b,M=U),D=Math.max(M,W)}else{var B=Math.tan(.5*t.frustum.fovy),F=t.frustum.aspectRatio*B;if(D=Math.max(ee(S,R,C,B),ee(S,R,A,B),ee(S,R,T,B),ee(S,R,I,B),ee(S,R,P,B),ee(S,R,O,B),ee(S,N,C,F),ee(S,N,A,F),ee(S,N,T,F),ee(S,N,I,F),ee(S,N,P,F),ee(S,N,O,F)),u<0&&s>0){var H=qt;H.longitude=c,H.latitude=0,H.height=0;var V=n.cartographicToCartesian(H,$t);r.Z.subtract(V,v,V),D=Math.max(D,ee(S,R,V,B),ee(S,N,V,F)),H.longitude=Z,V=n.cartographicToCartesian(H,$t),r.Z.subtract(V,v,V),D=Math.max(D,ee(S,R,V,B),ee(S,N,V,F))}}return r.Z.add(v,r.Z.multiplyByScalar(S,-D,$t),i)}var oe=new s.Z,ne=new r.Z,re=new r.Z;function ae(t,e,i){var o=t._projection;e.west>e.east&&(e=I.Z.MAX_VALUE);var n=t._actualTransform,r=t._actualInvTransform,a=oe;a.longitude=e.east,a.latitude=e.north;var s=o.project(a,ne);T.Z.multiplyByPoint(n,s,s),T.Z.multiplyByPoint(r,s,s),a.longitude=e.west,a.latitude=e.south;var u=o.project(a,re);if(T.Z.multiplyByPoint(n,u,u),T.Z.multiplyByPoint(r,u,u),i.x=.5*(s.x-u.x)+u.x,i.y=.5*(s.y-u.y)+u.y,(0,h.Z)(t.frustum.fovy)){var Z=Math.tan(.5*t.frustum.fovy),c=t.frustum.aspectRatio*Z;i.z=.5*Math.max((s.x-u.x)/c,(s.y-u.y)/Z)}else{var l=s.x-u.x,d=s.y-u.y;i.z=Math.max(l,d)}return i}var se=new s.Z,ue=new r.Z,he=new r.Z;function Ze(t,e,i){var o=t._projection,n=e.east;e.west>e.east&&(t._scene.mapMode2D===D.Z.INFINITE_SCROLL?n+=w.Z.TWO_PI:(e=I.Z.MAX_VALUE,n=e.east));var r=se;r.longitude=n,r.latitude=e.north;var a=o.project(r,ue);r.longitude=e.west,r.latitude=e.south;var s,u,h=o.project(r,he),Z=.5*Math.abs(a.x-h.x),c=.5*Math.abs(a.y-h.y),l=t.frustum.right/t.frustum.top,d=c*l;return Z>d?(s=Z,u=s/l):(u=c,s=d),c=Math.max(2*s,2*u),i.x=.5*(a.x-h.x)+h.x,i.y=.5*(a.y-h.y)+h.y,r=o.unproject(i,r),r.height=c,i=o.project(r,i),i}M.prototype.getRectangleCameraCoordinates=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("rectangle is required");var i=this._mode;return(0,h.Z)(e)||(e=new r.Z),i===R.Z.SCENE3D?ie(this,t,e):i===R.Z.COLUMBUS_VIEW?ae(this,t,e):i===R.Z.SCENE2D?Ze(this,t,e):void 0};var ce=new A.Z;function le(t,e,i,o){i=(0,u.Z)(i,l.Z.WGS84);var n=t.getPickRay(e,ce),r=v.Z.rayEllipsoid(n,i);if(r){var a=r.start>0?r.start:r.stop;return A.Z.getPoint(n,a,o)}}var de=new A.Z;function me(t,e,i,o){var n=t.getPickRay(e,de),a=n.origin;a=r.Z.fromElements(a.y,a.z,0,a);var s=i.unproject(a);if(!(s.latitude<-w.Z.PI_OVER_TWO||s.latitude>w.Z.PI_OVER_TWO))return i.ellipsoid.cartographicToCartesian(s,o)}var pe=new A.Z;function fe(t,e,i,o){var n=t.getPickRay(e,pe),a=-n.origin.x/n.direction.x;A.Z.getPoint(n,a,o);var s=i.unproject(new r.Z(o.y,o.z,0));if(!(s.latitude<-w.Z.PI_OVER_TWO||s.latitude>w.Z.PI_OVER_TWO||s.longitude<-Math.PI||s.longitude>Math.PI))return i.ellipsoid.cartographicToCartesian(s,o)}M.prototype.pickEllipsoid=function(t,e,i){if(!(0,h.Z)(t))throw new Z.Z("windowPosition is required.");var o=this._scene.canvas;if(0!==o.clientWidth&&0!==o.clientHeight){if((0,h.Z)(i)||(i=new r.Z),e=(0,u.Z)(e,l.Z.WGS84),this._mode===R.Z.SCENE3D)i=le(this,t,e,i);else if(this._mode===R.Z.SCENE2D)i=me(this,t,this._projection,i);else{if(this._mode!==R.Z.COLUMBUS_VIEW)return;i=fe(this,t,this._projection,i)}return i}};var _e=new r.Z,ge=new r.Z,ve=new r.Z;function we(t,e,i){var o=t._scene.canvas,n=o.clientWidth,a=o.clientHeight,s=Math.tan(.5*t.frustum.fovy),u=t.frustum.aspectRatio*s,h=t.frustum.near,Z=2/n*e.x-1,c=2/a*(a-e.y)-1,l=t.positionWC;r.Z.clone(l,i.origin);var d=r.Z.multiplyByScalar(t.directionWC,h,_e);r.Z.add(l,d,d);var m=r.Z.multiplyByScalar(t.rightWC,Z*h*u,ge),p=r.Z.multiplyByScalar(t.upWC,c*h*s,ve),f=r.Z.add(d,m,i.direction);return r.Z.add(f,p,f),r.Z.subtract(f,l,f),r.Z.normalize(f,f),i}var ye=new r.Z;function Te(t,e,i){var o=t._scene.canvas,n=o.clientWidth,a=o.clientHeight,s=t.frustum;(0,h.Z)(s._offCenterFrustum)&&(s=s._offCenterFrustum);var u=2/n*e.x-1;u*=.5*(s.right-s.left);var Z=2/a*(a-e.y)-1;Z*=.5*(s.top-s.bottom);var c=i.origin;return r.Z.clone(t.position,c),r.Z.multiplyByScalar(t.right,u,ye),r.Z.add(ye,c,c),r.Z.multiplyByScalar(t.up,Z,ye),r.Z.add(ye,c,c),r.Z.clone(t.directionWC,i.direction),t._mode!==R.Z.COLUMBUS_VIEW&&t._mode!==R.Z.SCENE2D||r.Z.fromElements(i.origin.z,i.origin.x,i.origin.y,i.origin),i}M.prototype.getPickRay=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("windowPosition is required.");(0,h.Z)(e)||(e=new A.Z);var i=this.frustum;return(0,h.Z)(i.aspectRatio)&&(0,h.Z)(i.fov)&&(0,h.Z)(i.near)?we(this,t,e):Te(this,t,e)};var Ee=new r.Z,Ce=new r.Z;M.prototype.distanceToBoundingSphere=function(t){if(!(0,h.Z)(t))throw new Z.Z("boundingSphere is required.");var e=r.Z.subtract(this.positionWC,t.center,Ee),i=r.Z.multiplyByScalar(this.directionWC,r.Z.dot(e,this.directionWC),Ce);return Math.max(0,r.Z.magnitude(i)-t.radius)};var Pe=new n.Z;function Oe(t,e,i,o,n,a){var s=r.Z.clone(e);function u(i){var o=r.Z.lerp(e,s,i.time,new r.Z);t.worldToCameraCoordinatesPoint(o,t.position)}return i.y>o?s.y-=i.y-o:i.y<-o&&(s.y+=-o-i.y),i.z>n?s.z-=i.z-n:i.z<-n&&(s.z+=-n-i.z),{easingFunction:c.Z.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:a,update:u}}M.prototype.getPixelSize=function(t,e,i){if(!(0,h.Z)(t))throw new Z.Z("boundingSphere is required.");if(!(0,h.Z)(e))throw new Z.Z("drawingBufferWidth is required.");if(!(0,h.Z)(i))throw new Z.Z("drawingBufferHeight is required.");var o=this.distanceToBoundingSphere(t),n=this.frustum.getPixelDimensions(e,i,o,this._scene.pixelRatio,Pe);return Math.max(n.x,n.y)};var Ae=new r.Z,Ie=new r.Z,Se=new r.Z,Ne=new r.Z;function De(t,e){var i=t.position,o=t.direction,n=t.worldToCameraCoordinatesVector(r.Z.UNIT_X,Ae),a=-r.Z.dot(n,i)/r.Z.dot(n,o),s=r.Z.add(i,r.Z.multiplyByScalar(o,a,Ie),Ie);t.cameraToWorldCoordinatesPoint(s,s),i=t.cameraToWorldCoordinatesPoint(t.position,Se);var u=Math.tan(.5*t.frustum.fovy),h=t.frustum.aspectRatio*u,Z=r.Z.magnitude(r.Z.subtract(i,s,Ne)),c=h*Z,l=u*Z,d=t._maxCoord.x,m=t._maxCoord.y,p=Math.max(c-d,d),f=Math.max(l-m,m);if(i.z<-p||i.z>p||i.y<-f||i.y>f){var _=s.y<-p||s.y>p,g=s.z<-f||s.z>f;if(_||g)return Oe(t,i,s,p,f,e)}}M.prototype.createCorrectPositionTween=function(t){if(!(0,h.Z)(t))throw new Z.Z("duration is required.");if(this._mode===R.Z.COLUMBUS_VIEW)return De(this,t)};var Re=new r.Z,Me={destination:void 0,heading:void 0,pitch:void 0,roll:void 0,duration:void 0,complete:void 0,cancel:void 0,endTransform:void 0,maximumHeight:void 0,easingFunction:void 0};function We(t,e){var i=t.frustum,o=Math.tan(.5*i.fovy),n=i.aspectRatio*o;return Math.max(e/n,e/o)}function xe(t,e){var i,o,n=t.frustum;(0,h.Z)(n._offCenterFrustum)&&(n=n._offCenterFrustum);var r=n.right/n.top,a=e*r;return e>a?(i=e,o=i/r):(o=e,i=a),1.5*Math.max(i,o)}M.prototype.cancelFlight=function(){(0,h.Z)(this._currentFlight)&&(this._currentFlight.cancelTween(),this._currentFlight=void 0)},M.prototype.completeFlight=function(){if((0,h.Z)(this._currentFlight)){this._currentFlight.cancelTween();var t={destination:void 0,orientation:{heading:void 0,pitch:void 0,roll:void 0}};t.destination=Me.destination,t.orientation.heading=Me.heading,t.orientation.pitch=Me.pitch,t.orientation.roll=Me.roll,this.setView(t),(0,h.Z)(this._currentFlight.complete)&&this._currentFlight.complete(),this._currentFlight=void 0}},M.prototype.flyTo=function(t){t=(0,u.Z)(t,u.Z.EMPTY_OBJECT);var e=t.destination;if(!(0,h.Z)(e))throw new Z.Z("destination is required.");var i=this._mode;if(i!==R.Z.MORPHING){this.cancelFlight();var o=(0,u.Z)(t.orientation,u.Z.EMPTY_OBJECT);if((0,h.Z)(o.direction)&&(o=vt(this,e,o,wt.orientation)),(0,h.Z)(t.duration)&&t.duration<=0){var n=wt;return n.destination=t.destination,n.orientation.heading=o.heading,n.orientation.pitch=o.pitch,n.orientation.roll=o.roll,n.convert=t.convert,n.endTransform=t.endTransform,this.setView(n),void("function"===typeof t.complete&&t.complete())}var r=(0,h.Z)(e.west);r&&(e=this.getRectangleCameraCoordinates(e,Re));var a,s=this;Me.destination=e,Me.heading=o.heading,Me.pitch=o.pitch,Me.roll=o.roll,Me.duration=t.duration,Me.complete=function(){a===s._currentFlight&&(s._currentFlight=void 0),(0,h.Z)(t.complete)&&t.complete()},Me.cancel=t.cancel,Me.endTransform=t.endTransform,Me.convert=!r&&t.convert,Me.maximumHeight=t.maximumHeight,Me.pitchAdjustHeight=t.pitchAdjustHeight,Me.flyOverLongitude=t.flyOverLongitude,Me.flyOverLongitudeWeight=t.flyOverLongitudeWeight,Me.easingFunction=t.easingFunction;var c=this._scene,l=N.Z.createTween(c,Me);if(0!==l.duration){a=c.tweens.add(l),this._currentFlight=a;var d=this._scene.preloadFlightCamera;this._mode!==R.Z.SCENE2D&&((0,h.Z)(d)||(d=M.clone(this)),d.setView({destination:e,orientation:o}),this._scene.preloadFlightCullingVolume=d.frustum.computeCullingVolume(d.positionWC,d.directionWC,d.upWC))}else"function"===typeof l.complete&&l.complete()}};var be=100;function Le(t,e,i){i=f.Z.clone((0,h.Z)(i)?i:M.DEFAULT_OFFSET);var o=t._scene.screenSpaceCameraController.minimumZoomDistance,n=t._scene.screenSpaceCameraController.maximumZoomDistance,r=i.range;if(!(0,h.Z)(r)||0===r){var a=e.radius;0===a?i.range=be:t.frustum instanceof E.Z||t._mode===R.Z.SCENE2D?i.range=xe(t,a):i.range=We(t,a),i.range=w.Z.clamp(i.range,o,n)}return i}M.prototype.viewBoundingSphere=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("boundingSphere is required.");if(this._mode===R.Z.MORPHING)throw new Z.Z("viewBoundingSphere is not supported while morphing.");e=Le(this,t,e),this.lookAt(t.center,e)};var Ue=new T.Z,Be=new r.Z,Fe=new r.Z,He=new r.Z,Ve=new r.Z,ze=new a.Z,qe=new O.Z,je=new y.Z;M.prototype.flyToBoundingSphere=function(t,e){if(!(0,h.Z)(t))throw new Z.Z("boundingSphere is required.");e=(0,u.Z)(e,u.Z.EMPTY_OBJECT);var i=this._mode===R.Z.SCENE2D||this._mode===R.Z.COLUMBUS_VIEW;this._setTransform(T.Z.IDENTITY);var o,n=Le(this,t,e.offset);o=i?r.Z.multiplyByScalar(r.Z.UNIT_Z,n.range,Be):Vt(n.heading,n.pitch,n.range);var a,s,c=S.Z.eastNorthUpToFixedFrame(t.center,l.Z.WGS84,Ue);if(T.Z.multiplyByPoint(c,o,o),!i){if(a=r.Z.subtract(t.center,o,Fe),r.Z.normalize(a,a),s=T.Z.multiplyByPointAsVector(c,r.Z.UNIT_Z,He),1-Math.abs(r.Z.dot(a,s))<w.Z.EPSILON6){var d=O.Z.fromAxisAngle(a,n.heading,qe),m=y.Z.fromQuaternion(d,je);r.Z.fromCartesian4(T.Z.getColumn(c,1,ze),s),y.Z.multiplyByVector(m,s,s)}var p=r.Z.cross(a,s,Ve);r.Z.cross(p,a,s),r.Z.normalize(s,s)}this.flyTo({destination:o,orientation:{direction:a,up:s},duration:e.duration,complete:e.complete,cancel:e.cancel,endTransform:e.endTransform,maximumHeight:e.maximumHeight,easingFunction:e.easingFunction,flyOverLongitude:e.flyOverLongitude,flyOverLongitudeWeight:e.flyOverLongitudeWeight,pitchAdjustHeight:e.pitchAdjustHeight})};var ke=new r.Z,Ge=new r.Z,Ye=new r.Z,Xe=new r.Z,Qe=[new r.Z,new r.Z,new r.Z,new r.Z];function Je(t,e){var i,o,n=e.radii,a=t.positionWC,s=r.Z.multiplyComponents(e.oneOverRadii,a,ke),u=r.Z.magnitude(s),h=r.Z.normalize(s,Ge);r.Z.equalsEpsilon(h,r.Z.UNIT_Z,w.Z.EPSILON10)?(i=new r.Z(0,1,0),o=new r.Z(0,0,1)):(i=r.Z.normalize(r.Z.cross(r.Z.UNIT_Z,h,Ye),Ye),o=r.Z.normalize(r.Z.cross(h,i,Xe),Xe));var Z=Math.sqrt(r.Z.magnitudeSquared(s)-1),c=r.Z.multiplyByScalar(h,1/u,ke),l=Z/u,d=r.Z.multiplyByScalar(i,l,Ge),m=r.Z.multiplyByScalar(o,l,Ye),p=r.Z.add(c,m,Qe[0]);r.Z.subtract(p,d,p),r.Z.multiplyComponents(n,p,p);var f=r.Z.subtract(c,m,Qe[1]);r.Z.subtract(f,d,f),r.Z.multiplyComponents(n,f,f);var _=r.Z.subtract(c,m,Qe[2]);r.Z.add(_,d,_),r.Z.multiplyComponents(n,_,_);var g=r.Z.add(c,m,Qe[3]);return r.Z.add(g,d,g),r.Z.multiplyComponents(n,g,g),Qe}var Ke=new n.Z,$e=new r.Z,ti=[new s.Z,new s.Z,new s.Z,new s.Z];function ei(t,e,i,o,n,r){Ke.x=t,Ke.y=e;var a=o.pickEllipsoid(Ke,n,$e);return(0,h.Z)(a)?(ti[i]=n.cartesianToCartographic(a,ti[i]),1):(ti[i]=n.cartesianToCartographic(r[i],ti[i]),0)}M.prototype.computeViewRectangle=function(t,e){t=(0,u.Z)(t,l.Z.WGS84);var i=this.frustum.computeCullingVolume(this.positionWC,this.directionWC,this.upWC),n=new o.Z(r.Z.ZERO,t.maximumRadius),a=i.computeVisibility(n);if(a!==g.Z.OUTSIDE){var s=this._scene.canvas,h=s.clientWidth,Z=s.clientHeight,c=0,d=Je(this,t);if(c+=ei(0,0,0,this,t,d),c+=ei(0,Z,1,this,t,d),c+=ei(h,Z,2,this,t,d),c+=ei(h,0,3,this,t,d),c<2)return I.Z.MAX_VALUE;e=I.Z.fromCartographicArray(ti,e);for(var m=0,p=ti[3].longitude,f=0;f<4;++f){var _=ti[f].longitude,v=Math.abs(_-p);v>w.Z.PI?m+=w.Z.TWO_PI-v:m+=v,p=_}return w.Z.equalsEpsilon(Math.abs(m),w.Z.TWO_PI,w.Z.EPSILON9)&&(e.west=-w.Z.PI,e.east=w.Z.PI,ti[0].latitude>=0?e.north=w.Z.PI_OVER_TWO:e.south=-w.Z.PI_OVER_TWO),e}},M.prototype.switchToPerspectiveFrustum=function(){if(!(this._mode===R.Z.SCENE2D||this.frustum instanceof P.Z)){var t=this._scene;this.frustum=new P.Z,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.fov=w.Z.toRadians(60)}},M.prototype.switchToOrthographicFrustum=function(){if(!(this._mode===R.Z.SCENE2D||this.frustum instanceof E.Z)){var t=at(this),e=this._scene;this.frustum=new E.Z,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.width=t}},M.clone=function(t,e){return(0,h.Z)(e)||(e=new M(t._scene)),r.Z.clone(t.position,e.position),r.Z.clone(t.direction,e.direction),r.Z.clone(t.up,e.up),r.Z.clone(t.right,e.right),T.Z.clone(t._transform,e.transform),e._transformChanged=!0,e.frustum=t.frustum.clone(),e},e["Z"]=M},90070:function(t,e,i){var o=i(60838),n=i(82982),r=i(86511),a=i(12572),s=i(89232),u=i(99417),h=i(20406),Z=i(35452),c=i(84321);function l(t,e){var i=t;return(0,n.Z)(e)&&(i+="+"+e),i}function d(t,e){o.Z.clone(t.distance.startPosition,e.distance.startPosition),o.Z.clone(t.distance.endPosition,e.distance.endPosition),o.Z.clone(t.angleAndHeight.startPosition,e.angleAndHeight.startPosition),o.Z.clone(t.angleAndHeight.endPosition,e.angleAndHeight.endPosition)}function m(t,e,i){var r=l(c.Z.PINCH,e),a=t._update,s=t._isDown,u=t._eventStartPosition,h=t._pressTime,m=t._releaseTime;a[r]=!0,s[r]=!1,u[r]=new o.Z;var p=t._movement[r];(0,n.Z)(p)||(p=t._movement[r]={}),p.distance={startPosition:new o.Z,endPosition:new o.Z},p.angleAndHeight={startPosition:new o.Z,endPosition:new o.Z},p.prevAngle=0,t._eventHandler.setInputAction((function(e){t._buttonsDown++,s[r]=!0,h[r]=new Date,o.Z.lerp(e.position1,e.position2,.5,u[r])}),Z.Z.PINCH_START,e),t._eventHandler.setInputAction((function(){t._buttonsDown=Math.max(t._buttonsDown-1,0),s[r]=!1,m[r]=new Date}),Z.Z.PINCH_END,e),t._eventHandler.setInputAction((function(t){if(s[r]){a[r]?(d(t,p),a[r]=!1,p.prevAngle=p.angleAndHeight.startPosition.x):(o.Z.clone(t.distance.endPosition,p.distance.endPosition),o.Z.clone(t.angleAndHeight.endPosition,p.angleAndHeight.endPosition));var e=p.angleAndHeight.endPosition.x,n=p.prevAngle,u=2*Math.PI;while(e>=n+Math.PI)e-=u;while(e<n-Math.PI)e+=u;p.angleAndHeight.endPosition.x=-e*i.clientWidth/12,p.angleAndHeight.startPosition.x=-n*i.clientWidth/12}}),Z.Z.PINCH_MOVE,e)}function p(t,e){var i=l(c.Z.WHEEL,e),r=t._update;r[i]=!0;var a=t._movement[i];(0,n.Z)(a)||(a=t._movement[i]={}),a.startPosition=new o.Z,a.endPosition=new o.Z,t._eventHandler.setInputAction((function(t){var e=15*u.Z.toRadians(t);r[i]?(o.Z.clone(o.Z.ZERO,a.startPosition),a.endPosition.x=0,a.endPosition.y=e,r[i]=!1):a.endPosition.y=a.endPosition.y+e}),Z.Z.WHEEL,e)}function f(t,e,i){var r=l(i,e),a=t._isDown,s=t._eventStartPosition,u=t._pressTime,h=t._releaseTime;a[r]=!1,s[r]=new o.Z;var d,m,p=t._lastMovement[r];(0,n.Z)(p)||(p=t._lastMovement[r]={startPosition:new o.Z,endPosition:new o.Z,valid:!1}),i===c.Z.LEFT_DRAG?(d=Z.Z.LEFT_DOWN,m=Z.Z.LEFT_UP):i===c.Z.RIGHT_DRAG?(d=Z.Z.RIGHT_DOWN,m=Z.Z.RIGHT_UP):i===c.Z.MIDDLE_DRAG&&(d=Z.Z.MIDDLE_DOWN,m=Z.Z.MIDDLE_UP),t._eventHandler.setInputAction((function(e){t._buttonsDown++,p.valid=!1,a[r]=!0,u[r]=new Date,o.Z.clone(e.position,s[r])}),d,e),t._eventHandler.setInputAction((function(){t._buttonsDown=Math.max(t._buttonsDown-1,0),a[r]=!1,h[r]=new Date}),m,e)}function _(t,e){o.Z.clone(t.startPosition,e.startPosition),o.Z.clone(t.endPosition,e.endPosition)}function g(t,e){var i=t._update,r=t._movement,a=t._lastMovement,s=t._isDown;for(var u in c.Z)if(c.Z.hasOwnProperty(u)){var h=c.Z[u];if((0,n.Z)(h)){var d=l(h,e);i[d]=!0,(0,n.Z)(t._lastMovement[d])||(t._lastMovement[d]={startPosition:new o.Z,endPosition:new o.Z,valid:!1}),(0,n.Z)(t._movement[d])||(t._movement[d]={startPosition:new o.Z,endPosition:new o.Z})}}t._eventHandler.setInputAction((function(u){for(var h in c.Z)if(c.Z.hasOwnProperty(h)){var Z=c.Z[h];if((0,n.Z)(Z)){var d=l(Z,e);s[d]&&(i[d]?(_(r[d],a[d]),a[d].valid=!0,_(u,r[d]),i[d]=!1):o.Z.clone(u.endPosition,r[d].endPosition))}}o.Z.clone(u.endPosition,t._currentMousePosition)}),Z.Z.MOUSE_MOVE,e)}function v(t){if(!(0,n.Z)(t))throw new a.Z("canvas is required.");for(var e in this._eventHandler=new h.Z(t),this._update={},this._movement={},this._lastMovement={},this._isDown={},this._eventStartPosition={},this._pressTime={},this._releaseTime={},this._buttonsDown=0,this._currentMousePosition=new o.Z,p(this,void 0),m(this,void 0,t),f(this,void 0,c.Z.LEFT_DRAG),f(this,void 0,c.Z.RIGHT_DRAG),f(this,void 0,c.Z.MIDDLE_DRAG),g(this,void 0),s.Z)if(s.Z.hasOwnProperty(e)){var i=s.Z[e];(0,n.Z)(i)&&(p(this,i),m(this,i,t),f(this,i,c.Z.LEFT_DRAG),f(this,i,c.Z.RIGHT_DRAG),f(this,i,c.Z.MIDDLE_DRAG),g(this,i))}}Object.defineProperties(v.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){var t=!this._update[l(c.Z.WHEEL)]||!this._update[l(c.Z.WHEEL,s.Z.SHIFT)]||!this._update[l(c.Z.WHEEL,s.Z.CTRL)]||!this._update[l(c.Z.WHEEL,s.Z.ALT)];return this._buttonsDown>0||t}}}),v.prototype.isMoving=function(t,e){if(!(0,n.Z)(t))throw new a.Z("type is required.");var i=l(t,e);return!this._update[i]},v.prototype.getMovement=function(t,e){if(!(0,n.Z)(t))throw new a.Z("type is required.");var i=l(t,e),o=this._movement[i];return o},v.prototype.getLastMovement=function(t,e){if(!(0,n.Z)(t))throw new a.Z("type is required.");var i=l(t,e),o=this._lastMovement[i];if(o.valid)return o},v.prototype.isButtonDown=function(t,e){if(!(0,n.Z)(t))throw new a.Z("type is required.");var i=l(t,e);return this._isDown[i]},v.prototype.getStartMousePosition=function(t,e){if(!(0,n.Z)(t))throw new a.Z("type is required.");if(t===c.Z.WHEEL)return this._currentMousePosition;var i=l(t,e);return this._eventStartPosition[i]},v.prototype.getButtonPressTime=function(t,e){if(!(0,n.Z)(t))throw new a.Z("type is required.");var i=l(t,e);return this._pressTime[i]},v.prototype.getButtonReleaseTime=function(t,e){if(!(0,n.Z)(t))throw new a.Z("type is required.");var i=l(t,e);return this._releaseTime[i]},v.prototype.reset=function(){for(var t in this._update)this._update.hasOwnProperty(t)&&(this._update[t]=!0)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._eventHandler=this._eventHandler&&this._eventHandler.destroy(),(0,r.Z)(this)},e["Z"]=v},84321:function(t,e){var i={LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4};e["Z"]=Object.freeze(i)},15092:function(t,e,i){var o=i(60838),n=i(60216),r=i(51688),a=i(62200),s=i(82982),u=i(12572),h=i(50732),Z=i(99417),c=i(66854),l=i(36135),d=i(89917),m={};function p(t,e,i){var o,n,r;if(t instanceof c.Z){var a=Math.tan(.5*t.fovy);return o=t.near,n=t.near*a,r=t.aspectRatio*n,Math.max(e*o/r,i*o/n)}return t instanceof l.Z?(o=t.near,n=t.top,r=t.right,Math.max(e*o/r,i*o/n)):Math.max(e,i)}var f=new n.Z,_=new n.Z;function g(t,e,i,o){if((0,s.Z)(o)&&i(.5)>o){var n=i(0),r=i(1),a=i(.5),u=a-n,h=a-r;return function(o){var a=i(o);if(o<=.5){var s=(a-n)/u;return Z.Z.lerp(t,-Z.Z.PI_OVER_TWO,s)}var c=(a-r)/h;return Z.Z.lerp(-Z.Z.PI_OVER_TWO,e,1-c)}}return function(i){return Z.Z.lerp(t,e,i)}}function v(t,e,i,o,r){var a=r,u=Math.max(i,o);if(!(0,s.Z)(a)){var h=t.position,c=e,l=t.up,d=t.right,m=t.frustum,g=n.Z.subtract(h,c,f),v=n.Z.magnitude(n.Z.multiplyByScalar(l,n.Z.dot(g,l),_)),w=n.Z.magnitude(n.Z.multiplyByScalar(d,n.Z.dot(g,d),_));a=Math.min(.2*p(m,v,w),1e9)}if(u<a){var y=8,T=1e6,E=-Math.pow((a-i)*T,1/y),C=Math.pow((a-o)*T,1/y);return function(t){var e=t*(C-E)+E;return-Math.pow(e,y)/T+a}}return function(t){return Z.Z.lerp(i,o,t)}}function w(t,e){return Z.Z.equalsEpsilon(t,Z.Z.TWO_PI,Z.Z.EPSILON11)&&(t=0),e>t+Math.PI?t+=Z.Z.TWO_PI:e<t-Math.PI&&(t-=Z.Z.TWO_PI),t}var y=new n.Z;function T(t,e,i,r,a,s,u){var h=t.camera,c=n.Z.clone(h.position,y),l=h.pitch,d=w(h.heading,r),m=w(h.roll,s),p=v(h,i,c.z,i.z,u);function f(t){var n=t.time/e;h.setView({orientation:{heading:Z.Z.lerp(d,r,n),pitch:Z.Z.lerp(l,a,n),roll:Z.Z.lerp(m,s,n)}}),o.Z.lerp(c,i,n,h.position),h.position.z=p(n)}return f}function E(t,e){t.longitude<e.longitude?t.longitude+=Z.Z.TWO_PI:e.longitude+=Z.Z.TWO_PI}function C(t,e){var i=t.longitude-e.longitude;i<-Z.Z.PI?t.longitude+=Z.Z.TWO_PI:i>Z.Z.PI&&(e.longitude+=Z.Z.TWO_PI)}var P=new r.Z,O=new r.Z;function A(t,e,i,o,a,u,h,c,l,d){var m=t.camera,p=t.mapProjection,f=p.ellipsoid,_=r.Z.clone(m.positionCartographic,P),y=m.pitch,T=w(m.heading,o),A=w(m.roll,u),I=f.cartesianToCartographic(i,O);_.longitude=Z.Z.zeroToTwoPi(_.longitude),I.longitude=Z.Z.zeroToTwoPi(I.longitude);var S=!1;if((0,s.Z)(c)){var N=Z.Z.zeroToTwoPi(c),D=Math.min(_.longitude,I.longitude),R=Math.max(_.longitude,I.longitude),M=N>=D&&N<=R;if((0,s.Z)(l)){var W=Math.abs(_.longitude-I.longitude),x=Z.Z.TWO_PI-W,b=M?W:x,L=M?x:W;b<L*l&&!M&&(S=!0)}else M||(S=!0)}S?E(_,I):C(_,I);var U=v(m,i,_.height,I.height,h),B=g(y,a,U,d);function F(){var t=_.longitude,i=I.longitude,r=_.latitude,a=I.latitude;return function(s){var h=s.time/e,c=n.Z.fromRadians(Z.Z.lerp(t,i,h),Z.Z.lerp(r,a,h),U(h),f);m.setView({destination:c,orientation:{heading:Z.Z.lerp(T,o,h),pitch:B(h),roll:Z.Z.lerp(A,u,h)}})}}return F()}function I(t,e,i,r,a,s,u){var h=t.camera,c=n.Z.clone(h.position,y),l=w(h.heading,r),d=h.frustum.right-h.frustum.left,m=v(h,i,d,i.z,u);function p(t){var n=t.time/e;h.setView({orientation:{heading:Z.Z.lerp(l,r,n)}}),o.Z.lerp(c,i,n,h.position);var a=m(n),s=h.frustum,u=s.top/s.right,d=.5*(a-(s.right-s.left));s.right+=d,s.left-=d,s.top=u*s.right,s.bottom=-s.top}return p}var S=new r.Z,N=new n.Z;function D(t,e){return{startObject:{},stopObject:{},duration:0,complete:t,cancel:e}}function R(t,e){function i(){"function"===typeof e&&e(),t.enableInputs=!0}return i}m.createTween=function(t,e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT);var i=e.destination;if(!(0,s.Z)(t))throw new u.Z("scene is required.");if(!(0,s.Z)(i))throw new u.Z("destination is required.");var r=t.mode;if(r===d.Z.MORPHING)return D();var c=(0,a.Z)(e.convert,!0),l=t.mapProjection,m=l.ellipsoid,p=e.maximumHeight,f=e.flyOverLongitude,_=e.flyOverLongitudeWeight,g=e.pitchAdjustHeight,v=e.easingFunction;c&&r!==d.Z.SCENE3D&&(m.cartesianToCartographic(i,S),i=l.project(S,N));var w=t.camera,y=e.endTransform;(0,s.Z)(y)&&w._setTransform(y);var E=e.duration;(0,s.Z)(E)||(E=Math.ceil(n.Z.distance(w.position,i)/1e6)+2,E=Math.min(E,3));var C=(0,a.Z)(e.heading,0),P=(0,a.Z)(e.pitch,-Z.Z.PI_OVER_TWO),O=(0,a.Z)(e.roll,0),M=t.screenSpaceCameraController;M.enableInputs=!1;var W=R(M,e.complete),x=R(M,e.cancel),b=w.frustum,L=t.mode===d.Z.SCENE2D;if(L=L&&o.Z.equalsEpsilon(w.position,i,Z.Z.EPSILON6),L=L&&Z.Z.equalsEpsilon(Math.max(b.right-b.left,b.top-b.bottom),i.z,Z.Z.EPSILON6),L=L||t.mode!==d.Z.SCENE2D&&n.Z.equalsEpsilon(i,w.position,Z.Z.EPSILON10),L=L&&Z.Z.equalsEpsilon(Z.Z.negativePiToPi(C),Z.Z.negativePiToPi(w.heading),Z.Z.EPSILON10)&&Z.Z.equalsEpsilon(Z.Z.negativePiToPi(P),Z.Z.negativePiToPi(w.pitch),Z.Z.EPSILON10)&&Z.Z.equalsEpsilon(Z.Z.negativePiToPi(O),Z.Z.negativePiToPi(w.roll),Z.Z.EPSILON10),L)return D(W,x);var U=new Array(4);if(U[d.Z.SCENE2D]=I,U[d.Z.SCENE3D]=A,U[d.Z.COLUMBUS_VIEW]=T,E<=0){var B=function(){var e=U[r](t,1,i,C,P,O,p,f,_,g);e({time:1}),"function"===typeof W&&W()};return D(B,x)}var F=U[r](t,E,i,C,P,O,p,f,_,g);if(!(0,s.Z)(v)){var H=w.positionCartographic.height,V=r===d.Z.SCENE3D?m.cartesianToCartographic(i).height:i.z;v=H>V&&H>11500?h.Z.CUBIC_OUT:h.Z.QUINTIC_IN_OUT}return{duration:E,easingFunction:v,startObject:{time:0},stopObject:{time:E},update:F,complete:W,cancel:x}},e["Z"]=m}}]);
//# sourceMappingURL=chunk-vendors-9d1df9e9.f9bb7975.js.map