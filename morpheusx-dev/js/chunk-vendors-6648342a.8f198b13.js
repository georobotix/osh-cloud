"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[5200],{11042:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59947);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(14459);\n/* harmony import */ var _Core_GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71351);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13222);\n\n\n\n\n\n\n\nvar defaultColor = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(1.0, 1.0, 1.0, 0.4);\nvar defaultGlowColor = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(0.0, 1.0, 0.0, 0.05);\nvar defaultBackgroundColor = new _Core_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(0.0, 0.5, 0.0, 0.2);\n\n/**\n * @typedef {Object} GridImageryProvider.ConstructorOptions\n *\n * Initialization options for the GridImageryProvider constructor\n *\n * @property {TilingScheme} [tilingScheme=new GeographicTilingScheme()] The tiling scheme for which to draw tiles.\n * @property {Ellipsoid} [ellipsoid] The ellipsoid.  If the tilingScheme is specified,\n *                    this parameter is ignored and the tiling scheme\'s ellipsoid is used instead. If neither\n *                    parameter is specified, the WGS84 ellipsoid is used.\n * @property {Number} [cells=8] The number of grids cells.\n * @property {Color} [color=Color(1.0, 1.0, 1.0, 0.4)] The color to draw grid lines.\n * @property {Color} [glowColor=Color(0.0, 1.0, 0.0, 0.05)] The color to draw glow for grid lines.\n * @property {Number} [glowWidth=6] The width of lines used for rendering the line glow effect.\n * @property {Color} [backgroundColor=Color(0.0, 0.5, 0.0, 0.2)] Background fill color.\n * @property {Number} [tileWidth=256] The width of the tile for level-of-detail selection purposes.\n * @property {Number} [tileHeight=256] The height of the tile for level-of-detail selection purposes.\n * @property {Number} [canvasSize=256] The size of the canvas used for rendering.\n */\n\n/**\n * An {@link ImageryProvider} that draws a wireframe grid on every tile with controllable background and glow.\n * May be useful for custom rendering effects or debugging terrain.\n *\n * @alias GridImageryProvider\n * @constructor\n * @param {GridImageryProvider.ConstructorOptions} options Object describing initialization options\n *\n */\nfunction GridImageryProvider(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  /**\n   * The default alpha blending value of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the night side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultNightAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the day side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultDayAlpha = undefined;\n\n  /**\n   * The default brightness of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0\n   * makes the imagery darker while greater than 1.0 makes it brighter.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultBrightness = undefined;\n\n  /**\n   * The default contrast of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces\n   * the contrast while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultContrast = undefined;\n\n  /**\n   * The default hue of this provider in radians. 0.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultHue = undefined;\n\n  /**\n   * The default saturation of this provider. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the\n   * saturation while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultSaturation = undefined;\n\n  /**\n   * The default gamma correction to apply to this provider.  1.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultGamma = undefined;\n\n  /**\n   * The default texture minification filter to apply to this provider.\n   *\n   * @type {TextureMinificationFilter}\n   * @default undefined\n   */\n  this.defaultMinificationFilter = undefined;\n\n  /**\n   * The default texture magnification filter to apply to this provider.\n   *\n   * @type {TextureMagnificationFilter}\n   * @default undefined\n   */\n  this.defaultMagnificationFilter = undefined;\n\n  this._tilingScheme = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.tilingScheme)\n    ? options.tilingScheme\n    : new _Core_GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({ ellipsoid: options.ellipsoid });\n  this._cells = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.cells, 8);\n  this._color = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.color, defaultColor);\n  this._glowColor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.glowColor, defaultGlowColor);\n  this._glowWidth = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.glowWidth, 6);\n  this._backgroundColor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(\n    options.backgroundColor,\n    defaultBackgroundColor\n  );\n  this._errorEvent = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n  this._tileWidth = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.tileWidth, 256);\n  this._tileHeight = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.tileHeight, 256);\n\n  // A little larger than tile size so lines are sharper\n  // Note: can\'t be too much difference otherwise texture blowout\n  this._canvasSize = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options.canvasSize, 256);\n\n  // We only need a single canvas since all tiles will be the same\n  this._canvas = this._createGridCanvas();\n\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].resolve */ .Z.resolve(true);\n}\n\nObject.defineProperties(GridImageryProvider.prototype, {\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof GridImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets the width of each tile, in pixels. This function should\n   * not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: function () {\n      return this._tileWidth;\n    },\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: function () {\n      return this._tileHeight;\n    },\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {Number|undefined}\n   * @readonly\n   */\n  maximumLevel: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by this instance.  This function should\n   * not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      return this._tilingScheme.rectangle;\n    },\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out "missing" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof GridImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof GridImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return true;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof GridImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery.  This function should not be called before {@link GridImageryProvider#ready} returns true.\n   * @memberof GridImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.\n   * @memberof GridImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: function () {\n      return true;\n    },\n  },\n});\n\n/**\n * Draws a grid of lines into a canvas.\n */\nGridImageryProvider.prototype._drawGrid = function (context) {\n  var minPixel = 0;\n  var maxPixel = this._canvasSize;\n  for (var x = 0; x <= this._cells; ++x) {\n    var nx = x / this._cells;\n    var val = 1 + nx * (maxPixel - 1);\n\n    context.moveTo(val, minPixel);\n    context.lineTo(val, maxPixel);\n    context.moveTo(minPixel, val);\n    context.lineTo(maxPixel, val);\n  }\n  context.stroke();\n};\n\n/**\n * Render a grid into a canvas with background and glow\n */\nGridImageryProvider.prototype._createGridCanvas = function () {\n  var canvas = document.createElement("canvas");\n  canvas.width = this._canvasSize;\n  canvas.height = this._canvasSize;\n  var minPixel = 0;\n  var maxPixel = this._canvasSize;\n\n  var context = canvas.getContext("2d");\n\n  // Fill the background\n  var cssBackgroundColor = this._backgroundColor.toCssColorString();\n  context.fillStyle = cssBackgroundColor;\n  context.fillRect(minPixel, minPixel, maxPixel, maxPixel);\n\n  // Glow for grid lines\n  var cssGlowColor = this._glowColor.toCssColorString();\n  context.strokeStyle = cssGlowColor;\n  // Wide\n  context.lineWidth = this._glowWidth;\n  context.strokeRect(minPixel, minPixel, maxPixel, maxPixel);\n  this._drawGrid(context);\n  // Narrow\n  context.lineWidth = this._glowWidth * 0.5;\n  context.strokeRect(minPixel, minPixel, maxPixel, maxPixel);\n  this._drawGrid(context);\n\n  // Grid lines\n  var cssColor = this._color.toCssColorString();\n  // Border\n  context.strokeStyle = cssColor;\n  context.lineWidth = 2;\n  context.strokeRect(minPixel, minPixel, maxPixel, maxPixel);\n  // Inner\n  context.lineWidth = 1;\n  this._drawGrid(context);\n\n  return canvas;\n};\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nGridImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  return undefined;\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link GridImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n */\nGridImageryProvider.prototype.requestImage = function (x, y, level, request) {\n  return this._canvas;\n};\n\n/**\n * Picking features is not currently supported by this imagery provider, so this function simply returns\n * undefined.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n */\nGridImageryProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  return undefined;\n};\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (GridImageryProvider)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVU7QUFDdkI7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCLGlDQUFpQztBQUMxRDtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixhQUFhLHdEQUF3RDtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsWUFBWSwrQ0FBK0M7QUFDM0QsNEVBQTRFO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFlLG1FQUFtQixJQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dyaWRJbWFnZXJ5UHJvdmlkZXIuanM/NmJmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29sb3IgZnJvbSBcIi4uL0NvcmUvQ29sb3IuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBHZW9ncmFwaGljVGlsaW5nU2NoZW1lIGZyb20gXCIuLi9Db3JlL0dlb2dyYXBoaWNUaWxpbmdTY2hlbWUuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcblxudmFyIGRlZmF1bHRDb2xvciA9IG5ldyBDb2xvcigxLjAsIDEuMCwgMS4wLCAwLjQpO1xudmFyIGRlZmF1bHRHbG93Q29sb3IgPSBuZXcgQ29sb3IoMC4wLCAxLjAsIDAuMCwgMC4wNSk7XG52YXIgZGVmYXVsdEJhY2tncm91bmRDb2xvciA9IG5ldyBDb2xvcigwLjAsIDAuNSwgMC4wLCAwLjIpO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEdyaWRJbWFnZXJ5UHJvdmlkZXIuQ29uc3RydWN0b3JPcHRpb25zXG4gKlxuICogSW5pdGlhbGl6YXRpb24gb3B0aW9ucyBmb3IgdGhlIEdyaWRJbWFnZXJ5UHJvdmlkZXIgY29uc3RydWN0b3JcbiAqXG4gKiBAcHJvcGVydHkge1RpbGluZ1NjaGVtZX0gW3RpbGluZ1NjaGVtZT1uZXcgR2VvZ3JhcGhpY1RpbGluZ1NjaGVtZSgpXSBUaGUgdGlsaW5nIHNjaGVtZSBmb3Igd2hpY2ggdG8gZHJhdyB0aWxlcy5cbiAqIEBwcm9wZXJ0eSB7RWxsaXBzb2lkfSBbZWxsaXBzb2lkXSBUaGUgZWxsaXBzb2lkLiAgSWYgdGhlIHRpbGluZ1NjaGVtZSBpcyBzcGVjaWZpZWQsXG4gKiAgICAgICAgICAgICAgICAgICAgdGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBhbmQgdGhlIHRpbGluZyBzY2hlbWUncyBlbGxpcHNvaWQgaXMgdXNlZCBpbnN0ZWFkLiBJZiBuZWl0aGVyXG4gKiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyIGlzIHNwZWNpZmllZCwgdGhlIFdHUzg0IGVsbGlwc29pZCBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtjZWxscz04XSBUaGUgbnVtYmVyIG9mIGdyaWRzIGNlbGxzLlxuICogQHByb3BlcnR5IHtDb2xvcn0gW2NvbG9yPUNvbG9yKDEuMCwgMS4wLCAxLjAsIDAuNCldIFRoZSBjb2xvciB0byBkcmF3IGdyaWQgbGluZXMuXG4gKiBAcHJvcGVydHkge0NvbG9yfSBbZ2xvd0NvbG9yPUNvbG9yKDAuMCwgMS4wLCAwLjAsIDAuMDUpXSBUaGUgY29sb3IgdG8gZHJhdyBnbG93IGZvciBncmlkIGxpbmVzLlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtnbG93V2lkdGg9Nl0gVGhlIHdpZHRoIG9mIGxpbmVzIHVzZWQgZm9yIHJlbmRlcmluZyB0aGUgbGluZSBnbG93IGVmZmVjdC5cbiAqIEBwcm9wZXJ0eSB7Q29sb3J9IFtiYWNrZ3JvdW5kQ29sb3I9Q29sb3IoMC4wLCAwLjUsIDAuMCwgMC4yKV0gQmFja2dyb3VuZCBmaWxsIGNvbG9yLlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFt0aWxlV2lkdGg9MjU2XSBUaGUgd2lkdGggb2YgdGhlIHRpbGUgZm9yIGxldmVsLW9mLWRldGFpbCBzZWxlY3Rpb24gcHVycG9zZXMuXG4gKiBAcHJvcGVydHkge051bWJlcn0gW3RpbGVIZWlnaHQ9MjU2XSBUaGUgaGVpZ2h0IG9mIHRoZSB0aWxlIGZvciBsZXZlbC1vZi1kZXRhaWwgc2VsZWN0aW9uIHB1cnBvc2VzLlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtjYW52YXNTaXplPTI1Nl0gVGhlIHNpemUgb2YgdGhlIGNhbnZhcyB1c2VkIGZvciByZW5kZXJpbmcuXG4gKi9cblxuLyoqXG4gKiBBbiB7QGxpbmsgSW1hZ2VyeVByb3ZpZGVyfSB0aGF0IGRyYXdzIGEgd2lyZWZyYW1lIGdyaWQgb24gZXZlcnkgdGlsZSB3aXRoIGNvbnRyb2xsYWJsZSBiYWNrZ3JvdW5kIGFuZCBnbG93LlxuICogTWF5IGJlIHVzZWZ1bCBmb3IgY3VzdG9tIHJlbmRlcmluZyBlZmZlY3RzIG9yIGRlYnVnZ2luZyB0ZXJyYWluLlxuICpcbiAqIEBhbGlhcyBHcmlkSW1hZ2VyeVByb3ZpZGVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7R3JpZEltYWdlcnlQcm92aWRlci5Db25zdHJ1Y3Rvck9wdGlvbnN9IG9wdGlvbnMgT2JqZWN0IGRlc2NyaWJpbmcgaW5pdGlhbGl6YXRpb24gb3B0aW9uc1xuICpcbiAqL1xuZnVuY3Rpb24gR3JpZEltYWdlcnlQcm92aWRlcihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFscGhhIGJsZW5kaW5nIHZhbHVlIG9mIHRoaXMgcHJvdmlkZXIsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEFscGhhID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbHBoYSBibGVuZGluZyB2YWx1ZSBvbiB0aGUgbmlnaHQgc2lkZSBvZiB0aGUgZ2xvYmUgb2YgdGhpcyBwcm92aWRlciwgd2l0aCAwLjAgcmVwcmVzZW50aW5nIGZ1bGx5IHRyYW5zcGFyZW50IGFuZFxuICAgKiAxLjAgcmVwcmVzZW50aW5nIGZ1bGx5IG9wYXF1ZS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0TmlnaHRBbHBoYSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb24gdGhlIGRheSBzaWRlIG9mIHRoZSBnbG9iZSBvZiB0aGlzIHByb3ZpZGVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHREYXlBbHBoYSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYnJpZ2h0bmVzcyBvZiB0aGlzIHByb3ZpZGVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gIExlc3MgdGhhbiAxLjBcbiAgICogbWFrZXMgdGhlIGltYWdlcnkgZGFya2VyIHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgbWFrZXMgaXQgYnJpZ2h0ZXIuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEJyaWdodG5lc3MgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGNvbnRyYXN0IG9mIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiAgTGVzcyB0aGFuIDEuMCByZWR1Y2VzXG4gICAqIHRoZSBjb250cmFzdCB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIGluY3JlYXNlcyBpdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0Q29udHJhc3QgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGh1ZSBvZiB0aGlzIHByb3ZpZGVyIGluIHJhZGlhbnMuIDAuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEh1ZSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgc2F0dXJhdGlvbiBvZiB0aGlzIHByb3ZpZGVyLiAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiBMZXNzIHRoYW4gMS4wIHJlZHVjZXMgdGhlXG4gICAqIHNhdHVyYXRpb24gd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBpbmNyZWFzZXMgaXQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdFNhdHVyYXRpb24gPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGdhbW1hIGNvcnJlY3Rpb24gdG8gYXBwbHkgdG8gdGhpcyBwcm92aWRlci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEdhbW1hID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0ZXh0dXJlIG1pbmlmaWNhdGlvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhpcyBwcm92aWRlci5cbiAgICpcbiAgICogQHR5cGUge1RleHR1cmVNaW5pZmljYXRpb25GaWx0ZXJ9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0TWluaWZpY2F0aW9uRmlsdGVyID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0ZXh0dXJlIG1hZ25pZmljYXRpb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuXG4gICAqXG4gICAqIEB0eXBlIHtUZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlcn1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRNYWduaWZpY2F0aW9uRmlsdGVyID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX3RpbGluZ1NjaGVtZSA9IGRlZmluZWQob3B0aW9ucy50aWxpbmdTY2hlbWUpXG4gICAgPyBvcHRpb25zLnRpbGluZ1NjaGVtZVxuICAgIDogbmV3IEdlb2dyYXBoaWNUaWxpbmdTY2hlbWUoeyBlbGxpcHNvaWQ6IG9wdGlvbnMuZWxsaXBzb2lkIH0pO1xuICB0aGlzLl9jZWxscyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNlbGxzLCA4KTtcbiAgdGhpcy5fY29sb3IgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5jb2xvciwgZGVmYXVsdENvbG9yKTtcbiAgdGhpcy5fZ2xvd0NvbG9yID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZ2xvd0NvbG9yLCBkZWZhdWx0R2xvd0NvbG9yKTtcbiAgdGhpcy5fZ2xvd1dpZHRoID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZ2xvd1dpZHRoLCA2KTtcbiAgdGhpcy5fYmFja2dyb3VuZENvbG9yID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuYmFja2dyb3VuZENvbG9yLFxuICAgIGRlZmF1bHRCYWNrZ3JvdW5kQ29sb3JcbiAgKTtcbiAgdGhpcy5fZXJyb3JFdmVudCA9IG5ldyBFdmVudCgpO1xuXG4gIHRoaXMuX3RpbGVXaWR0aCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRpbGVXaWR0aCwgMjU2KTtcbiAgdGhpcy5fdGlsZUhlaWdodCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRpbGVIZWlnaHQsIDI1Nik7XG5cbiAgLy8gQSBsaXR0bGUgbGFyZ2VyIHRoYW4gdGlsZSBzaXplIHNvIGxpbmVzIGFyZSBzaGFycGVyXG4gIC8vIE5vdGU6IGNhbid0IGJlIHRvbyBtdWNoIGRpZmZlcmVuY2Ugb3RoZXJ3aXNlIHRleHR1cmUgYmxvd291dFxuICB0aGlzLl9jYW52YXNTaXplID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuY2FudmFzU2l6ZSwgMjU2KTtcblxuICAvLyBXZSBvbmx5IG5lZWQgYSBzaW5nbGUgY2FudmFzIHNpbmNlIGFsbCB0aWxlcyB3aWxsIGJlIHRoZSBzYW1lXG4gIHRoaXMuX2NhbnZhcyA9IHRoaXMuX2NyZWF0ZUdyaWRDYW52YXMoKTtcblxuICB0aGlzLl9yZWFkeVByb21pc2UgPSB3aGVuLnJlc29sdmUodHJ1ZSk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdyaWRJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm94eSB1c2VkIGJ5IHRoaXMgcHJvdmlkZXIuXG4gICAqIEBtZW1iZXJvZiBHcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJveHl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcHJveHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgd2lkdGggb2YgZWFjaCB0aWxlLCBpbiBwaXhlbHMuIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHcmlkSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVXaWR0aDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbGVXaWR0aDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgZWFjaCB0aWxlLCBpbiBwaXhlbHMuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR3JpZEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR3JpZEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxlSGVpZ2h0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdGlsZUhlaWdodDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtYXhpbXVtIGxldmVsLW9mLWRldGFpbCB0aGF0IGNhbiBiZSByZXF1ZXN0ZWQuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR3JpZEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR3JpZEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgbWF4aW11bUxldmVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1pbmltdW0gbGV2ZWwtb2YtZGV0YWlsIHRoYXQgY2FuIGJlIHJlcXVlc3RlZC4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHcmlkSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG1pbmltdW1MZXZlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxpbmcgc2NoZW1lIHVzZWQgYnkgdGhpcyBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHcmlkSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7VGlsaW5nU2NoZW1lfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGluZ1NjaGVtZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWN0YW5nbGUsIGluIHJhZGlhbnMsIG9mIHRoZSBpbWFnZXJ5IHByb3ZpZGVkIGJ5IHRoaXMgaW5zdGFuY2UuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR3JpZEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR3JpZEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1JlY3RhbmdsZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICByZWN0YW5nbGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90aWxpbmdTY2hlbWUucmVjdGFuZ2xlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRpbGUgZGlzY2FyZCBwb2xpY3kuICBJZiBub3QgdW5kZWZpbmVkLCB0aGUgZGlzY2FyZCBwb2xpY3kgaXMgcmVzcG9uc2libGVcbiAgICogZm9yIGZpbHRlcmluZyBvdXQgXCJtaXNzaW5nXCIgdGlsZXMgdmlhIGl0cyBzaG91bGREaXNjYXJkSW1hZ2UgZnVuY3Rpb24uICBJZiB0aGlzIGZ1bmN0aW9uXG4gICAqIHJldHVybnMgdW5kZWZpbmVkLCBubyB0aWxlcyBhcmUgZmlsdGVyZWQuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR3JpZEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR3JpZEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGVEaXNjYXJkUG9saWN5fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVEaXNjYXJkUG9saWN5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiB0aGUgaW1hZ2VyeSBwcm92aWRlciBlbmNvdW50ZXJzIGFuIGFzeW5jaHJvbm91cyBlcnJvci4gIEJ5IHN1YnNjcmliaW5nXG4gICAqIHRvIHRoZSBldmVudCwgeW91IHdpbGwgYmUgbm90aWZpZWQgb2YgdGhlIGVycm9yIGFuZCBjYW4gcG90ZW50aWFsbHkgcmVjb3ZlciBmcm9tIGl0LiAgRXZlbnQgbGlzdGVuZXJzXG4gICAqIGFyZSBwYXNzZWQgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFRpbGVQcm92aWRlckVycm9yfS5cbiAgICogQG1lbWJlcm9mIEdyaWRJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBlcnJvckV2ZW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXJyb3JFdmVudDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEdyaWRJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRydWUgd2hlbiB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEdyaWRJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9taXNlLjxCb29sZWFuPn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICByZWFkeVByb21pc2U6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeVByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY3JlZGl0IHRvIGRpc3BsYXkgd2hlbiB0aGlzIGltYWdlcnkgcHJvdmlkZXIgaXMgYWN0aXZlLiAgVHlwaWNhbGx5IHRoaXMgaXMgdXNlZCB0byBjcmVkaXRcbiAgICogdGhlIHNvdXJjZSBvZiB0aGUgaW1hZ2VyeS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHcmlkSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q3JlZGl0fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGNyZWRpdDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgaW1hZ2VzIHByb3ZpZGVkIGJ5IHRoaXMgaW1hZ2VyeSBwcm92aWRlclxuICAgKiBpbmNsdWRlIGFuIGFscGhhIGNoYW5uZWwuICBJZiB0aGlzIHByb3BlcnR5IGlzIGZhbHNlLCBhbiBhbHBoYSBjaGFubmVsLCBpZiBwcmVzZW50LCB3aWxsXG4gICAqIGJlIGlnbm9yZWQuICBJZiB0aGlzIHByb3BlcnR5IGlzIHRydWUsIGFueSBpbWFnZXMgd2l0aG91dCBhbiBhbHBoYSBjaGFubmVsIHdpbGwgYmUgdHJlYXRlZFxuICAgKiBhcyBpZiB0aGVpciBhbHBoYSBpcyAxLjAgZXZlcnl3aGVyZS4gIFdoZW4gdGhpcyBwcm9wZXJ0eSBpcyBmYWxzZSwgbWVtb3J5IHVzYWdlXG4gICAqIGFuZCB0ZXh0dXJlIHVwbG9hZCB0aW1lIGFyZSByZWR1Y2VkLlxuICAgKiBAbWVtYmVyb2YgR3JpZEltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaGFzQWxwaGFDaGFubmVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogRHJhd3MgYSBncmlkIG9mIGxpbmVzIGludG8gYSBjYW52YXMuXG4gKi9cbkdyaWRJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLl9kcmF3R3JpZCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gIHZhciBtaW5QaXhlbCA9IDA7XG4gIHZhciBtYXhQaXhlbCA9IHRoaXMuX2NhbnZhc1NpemU7XG4gIGZvciAodmFyIHggPSAwOyB4IDw9IHRoaXMuX2NlbGxzOyArK3gpIHtcbiAgICB2YXIgbnggPSB4IC8gdGhpcy5fY2VsbHM7XG4gICAgdmFyIHZhbCA9IDEgKyBueCAqIChtYXhQaXhlbCAtIDEpO1xuXG4gICAgY29udGV4dC5tb3ZlVG8odmFsLCBtaW5QaXhlbCk7XG4gICAgY29udGV4dC5saW5lVG8odmFsLCBtYXhQaXhlbCk7XG4gICAgY29udGV4dC5tb3ZlVG8obWluUGl4ZWwsIHZhbCk7XG4gICAgY29udGV4dC5saW5lVG8obWF4UGl4ZWwsIHZhbCk7XG4gIH1cbiAgY29udGV4dC5zdHJva2UoKTtcbn07XG5cbi8qKlxuICogUmVuZGVyIGEgZ3JpZCBpbnRvIGEgY2FudmFzIHdpdGggYmFja2dyb3VuZCBhbmQgZ2xvd1xuICovXG5HcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZS5fY3JlYXRlR3JpZENhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gIGNhbnZhcy53aWR0aCA9IHRoaXMuX2NhbnZhc1NpemU7XG4gIGNhbnZhcy5oZWlnaHQgPSB0aGlzLl9jYW52YXNTaXplO1xuICB2YXIgbWluUGl4ZWwgPSAwO1xuICB2YXIgbWF4UGl4ZWwgPSB0aGlzLl9jYW52YXNTaXplO1xuXG4gIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAvLyBGaWxsIHRoZSBiYWNrZ3JvdW5kXG4gIHZhciBjc3NCYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9iYWNrZ3JvdW5kQ29sb3IudG9Dc3NDb2xvclN0cmluZygpO1xuICBjb250ZXh0LmZpbGxTdHlsZSA9IGNzc0JhY2tncm91bmRDb2xvcjtcbiAgY29udGV4dC5maWxsUmVjdChtaW5QaXhlbCwgbWluUGl4ZWwsIG1heFBpeGVsLCBtYXhQaXhlbCk7XG5cbiAgLy8gR2xvdyBmb3IgZ3JpZCBsaW5lc1xuICB2YXIgY3NzR2xvd0NvbG9yID0gdGhpcy5fZ2xvd0NvbG9yLnRvQ3NzQ29sb3JTdHJpbmcoKTtcbiAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNzc0dsb3dDb2xvcjtcbiAgLy8gV2lkZVxuICBjb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMuX2dsb3dXaWR0aDtcbiAgY29udGV4dC5zdHJva2VSZWN0KG1pblBpeGVsLCBtaW5QaXhlbCwgbWF4UGl4ZWwsIG1heFBpeGVsKTtcbiAgdGhpcy5fZHJhd0dyaWQoY29udGV4dCk7XG4gIC8vIE5hcnJvd1xuICBjb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMuX2dsb3dXaWR0aCAqIDAuNTtcbiAgY29udGV4dC5zdHJva2VSZWN0KG1pblBpeGVsLCBtaW5QaXhlbCwgbWF4UGl4ZWwsIG1heFBpeGVsKTtcbiAgdGhpcy5fZHJhd0dyaWQoY29udGV4dCk7XG5cbiAgLy8gR3JpZCBsaW5lc1xuICB2YXIgY3NzQ29sb3IgPSB0aGlzLl9jb2xvci50b0Nzc0NvbG9yU3RyaW5nKCk7XG4gIC8vIEJvcmRlclxuICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY3NzQ29sb3I7XG4gIGNvbnRleHQubGluZVdpZHRoID0gMjtcbiAgY29udGV4dC5zdHJva2VSZWN0KG1pblBpeGVsLCBtaW5QaXhlbCwgbWF4UGl4ZWwsIG1heFBpeGVsKTtcbiAgLy8gSW5uZXJcbiAgY29udGV4dC5saW5lV2lkdGggPSAxO1xuICB0aGlzLl9kcmF3R3JpZChjb250ZXh0KTtcblxuICByZXR1cm4gY2FudmFzO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjcmVkaXRzIHRvIGJlIGRpc3BsYXllZCB3aGVuIGEgZ2l2ZW4gdGlsZSBpcyBkaXNwbGF5ZWQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHRpbGUgWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHRpbGUgWSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsO1xuICogQHJldHVybnMge0NyZWRpdFtdfSBUaGUgY3JlZGl0cyB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgdGlsZSBpcyBkaXNwbGF5ZWQuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IDxjb2RlPmdldFRpbGVDcmVkaXRzPC9jb2RlPiBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlxuICovXG5HcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZS5nZXRUaWxlQ3JlZGl0cyA9IGZ1bmN0aW9uICh4LCB5LCBsZXZlbCkge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBSZXF1ZXN0cyB0aGUgaW1hZ2UgZm9yIGEgZ2l2ZW4gdGlsZS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR3JpZEltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB0aWxlIFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgdGlsZSBsZXZlbC5cbiAqIEBwYXJhbSB7UmVxdWVzdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0IG9iamVjdC4gSW50ZW5kZWQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICogQHJldHVybnMge1Byb21pc2UuPEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnQ+fHVuZGVmaW5lZH0gQSBwcm9taXNlIGZvciB0aGUgaW1hZ2UgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgaW1hZ2UgaXMgYXZhaWxhYmxlLCBvclxuICogICAgICAgICAgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSB0b28gbWFueSBhY3RpdmUgcmVxdWVzdHMgdG8gdGhlIHNlcnZlciwgYW5kIHRoZSByZXF1ZXN0XG4gKiAgICAgICAgICBzaG91bGQgYmUgcmV0cmllZCBsYXRlci4gIFRoZSByZXNvbHZlZCBpbWFnZSBtYXkgYmUgZWl0aGVyIGFuXG4gKiAgICAgICAgICBJbWFnZSBvciBhIENhbnZhcyBET00gb2JqZWN0LlxuICovXG5HcmlkSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZS5yZXF1ZXN0SW1hZ2UgPSBmdW5jdGlvbiAoeCwgeSwgbGV2ZWwsIHJlcXVlc3QpIHtcbiAgcmV0dXJuIHRoaXMuX2NhbnZhcztcbn07XG5cbi8qKlxuICogUGlja2luZyBmZWF0dXJlcyBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSB0aGlzIGltYWdlcnkgcHJvdmlkZXIsIHNvIHRoaXMgZnVuY3Rpb24gc2ltcGx5IHJldHVybnNcbiAqIHVuZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWwuXG4gKiBAcGFyYW0ge051bWJlcn0gbG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgYXQgd2hpY2ggdG8gcGljayBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsYXRpdHVkZSAgVGhlIGxhdGl0dWRlIGF0IHdoaWNoIHRvIHBpY2sgZmVhdHVyZXMuXG4gKiBAcmV0dXJuIHtQcm9taXNlLjxJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mb1tdPnx1bmRlZmluZWR9IEEgcHJvbWlzZSBmb3IgdGhlIHBpY2tlZCBmZWF0dXJlcyB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBhc3luY2hyb25vdXNcbiAqICAgICAgICAgICAgICAgICAgIHBpY2tpbmcgY29tcGxldGVzLiAgVGhlIHJlc29sdmVkIHZhbHVlIGlzIGFuIGFycmF5IG9mIHtAbGluayBJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mb31cbiAqICAgICAgICAgICAgICAgICAgIGluc3RhbmNlcy4gIFRoZSBhcnJheSBtYXkgYmUgZW1wdHkgaWYgbm8gZmVhdHVyZXMgYXJlIGZvdW5kIGF0IHRoZSBnaXZlbiBsb2NhdGlvbi5cbiAqICAgICAgICAgICAgICAgICAgIEl0IG1heSBhbHNvIGJlIHVuZGVmaW5lZCBpZiBwaWNraW5nIGlzIG5vdCBzdXBwb3J0ZWQuXG4gKi9cbkdyaWRJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLnBpY2tGZWF0dXJlcyA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWwsXG4gIGxvbmdpdHVkZSxcbiAgbGF0aXR1ZGVcbikge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbmV4cG9ydCBkZWZhdWx0IEdyaWRJbWFnZXJ5UHJvdmlkZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11042\n')},14978:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(53773);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(26865);\n/* harmony import */ var _Core_GeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(15361);\n/* harmony import */ var _Core_GroundPolylineGeometry_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(46031);\n/* harmony import */ var _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(60072);\n/* harmony import */ var _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(8379);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(46588);\n/* harmony import */ var _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(53642);\n/* harmony import */ var _Shaders_PolylineShadowVolumeFS_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(145);\n/* harmony import */ var _Shaders_PolylineShadowVolumeMorphFS_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(27610);\n/* harmony import */ var _Shaders_PolylineShadowVolumeMorphVS_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(38632);\n/* harmony import */ var _Shaders_PolylineShadowVolumeVS_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(73248);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(13222);\n/* harmony import */ var _BlendingState_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(13633);\n/* harmony import */ var _ClassificationType_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(73001);\n/* harmony import */ var _CullFace_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(71593);\n/* harmony import */ var _PolylineColorAppearance_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(54052);\n/* harmony import */ var _PolylineMaterialAppearance_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(13597);\n/* harmony import */ var _Primitive_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(34380);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(89917);\n/* harmony import */ var _StencilConstants_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(87233);\n/* harmony import */ var _StencilFunction_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(77053);\n/* harmony import */ var _StencilOperation_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(81255);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A GroundPolylinePrimitive represents a polyline draped over the terrain or 3D Tiles in the {@link Scene}.\n * <p>\n * Only to be used with GeometryInstances containing {@link GroundPolylineGeometry}.\n * </p>\n *\n * @alias GroundPolylinePrimitive\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Array|GeometryInstance} [options.geometryInstances] GeometryInstances containing GroundPolylineGeometry\n * @param {Appearance} [options.appearance] The Appearance used to render the polyline. Defaults to a white color {@link Material} on a {@link PolylineMaterialAppearance}.\n * @param {Boolean} [options.show=true] Determines if this primitive will be shown.\n * @param {Boolean} [options.interleave=false] When <code>true</code>, geometry vertex attributes are interleaved, which can slightly improve rendering performance but increases load time.\n * @param {Boolean} [options.releaseGeometryInstances=true] When <code>true</code>, the primitive does not keep a reference to the input <code>geometryInstances</code> to save memory.\n * @param {Boolean} [options.allowPicking=true] When <code>true</code>, each geometry instance will only be pickable with {@link Scene#pick}.  When <code>false</code>, GPU memory is saved.\n * @param {Boolean} [options.asynchronous=true] Determines if the primitive will be created asynchronously or block until ready. If false initializeTerrainHeights() must be called first.\n * @param {ClassificationType} [options.classificationType=ClassificationType.BOTH] Determines whether terrain, 3D Tiles or both will be classified.\n * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Determines if this primitive\'s commands\' bounding spheres are shown.\n * @param {Boolean} [options.debugShowShadowVolume=false] For debugging only. Determines if the shadow volume for each geometry in the primitive is drawn. Must be <code>true</code> on creation to have effect.\n *\n * @example\n * // 1. Draw a polyline on terrain with a basic color material\n *\n * var instance = new Cesium.GeometryInstance({\n *   geometry : new Cesium.GroundPolylineGeometry({\n *      positions : Cesium.Cartesian3.fromDegreesArray([\n *          -112.1340164450331, 36.05494287836128,\n *          -112.08821010582645, 36.097804071380715\n *      ]),\n *      width : 4.0\n *   }),\n *   id : \'object returned when this instance is picked and to get/set per-instance attributes\'\n * });\n *\n * scene.groundPrimitives.add(new Cesium.GroundPolylinePrimitive({\n *   geometryInstances : instance,\n *   appearance : new Cesium.PolylineMaterialAppearance()\n * }));\n *\n * // 2. Draw a looped polyline on terrain with per-instance color and a distance display condition.\n * // Distance display conditions for polylines on terrain are based on an approximate terrain height\n * // instead of true terrain height.\n *\n * var instance = new Cesium.GeometryInstance({\n *   geometry : new Cesium.GroundPolylineGeometry({\n *      positions : Cesium.Cartesian3.fromDegreesArray([\n *          -112.1340164450331, 36.05494287836128,\n *          -112.08821010582645, 36.097804071380715,\n *          -112.13296079730024, 36.168769146801104\n *      ]),\n *      loop : true,\n *      width : 4.0\n *   }),\n *   attributes : {\n *      color : Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.fromCssColorString(\'green\').withAlpha(0.7)),\n *      distanceDisplayCondition : new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(1000, 30000)\n *   },\n *   id : \'object returned when this instance is picked and to get/set per-instance attributes\'\n * });\n *\n * scene.groundPrimitives.add(new Cesium.GroundPolylinePrimitive({\n *   geometryInstances : instance,\n *   appearance : new Cesium.PolylineColorAppearance()\n * }));\n */\nfunction GroundPolylinePrimitive(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  /**\n   * The geometry instances rendered with this primitive. This may\n   * be <code>undefined</code> if <code>options.releaseGeometryInstances</code>\n   * is <code>true</code> when the primitive is constructed.\n   * <p>\n   * Changing this property after the primitive is rendered has no effect.\n   * </p>\n   *\n   * @readonly\n   * @type {Array|GeometryInstance}\n   *\n   * @default undefined\n   */\n  this.geometryInstances = options.geometryInstances;\n  this._hasPerInstanceColors = true;\n\n  var appearance = options.appearance;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(appearance)) {\n    appearance = new _PolylineMaterialAppearance_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\n  }\n  /**\n   * The {@link Appearance} used to shade this primitive. Each geometry\n   * instance is shaded with the same appearance.  Some appearances, like\n   * {@link PolylineColorAppearance} allow giving each instance unique\n   * properties.\n   *\n   * @type Appearance\n   *\n   * @default undefined\n   */\n  this.appearance = appearance;\n\n  /**\n   * Determines if the primitive will be shown.  This affects all geometry\n   * instances in the primitive.\n   *\n   * @type {Boolean}\n   *\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.show, true);\n\n  /**\n   * Determines whether terrain, 3D Tiles or both will be classified.\n   *\n   * @type {ClassificationType}\n   *\n   * @default ClassificationType.BOTH\n   */\n  this.classificationType = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.classificationType,\n    _ClassificationType_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].BOTH */ .Z.BOTH\n  );\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the bounding sphere for each draw command in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowBoundingVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.debugShowBoundingVolume,\n    false\n  );\n\n  // Shadow volume is shown by removing a discard in the shader, so this isn\'t toggleable.\n  this._debugShowShadowVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    options.debugShowShadowVolume,\n    false\n  );\n\n  this._primitiveOptions = {\n    geometryInstances: undefined,\n    appearance: undefined,\n    vertexCacheOptimize: false,\n    interleave: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.interleave, false),\n    releaseGeometryInstances: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n      options.releaseGeometryInstances,\n      true\n    ),\n    allowPicking: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.allowPicking, true),\n    asynchronous: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.asynchronous, true),\n    compressVertices: false,\n    _createShaderProgramFunction: undefined,\n    _createCommandsFunction: undefined,\n    _updateAndQueueCommandsFunction: undefined,\n  };\n\n  // Used when inserting in an OrderedPrimitiveCollection\n  this._zIndex = undefined;\n\n  this._ready = false;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].defer */ .Z.defer();\n\n  this._primitive = undefined;\n\n  this._sp = undefined;\n  this._sp2D = undefined;\n  this._spMorph = undefined;\n\n  this._renderState = getRenderState(false);\n  this._renderState3DTiles = getRenderState(true);\n\n  this._renderStateMorph = _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromCache */ .Z.fromCache({\n    cull: {\n      enabled: true,\n      face: _CullFace_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].FRONT */ .Z.FRONT, // Geometry is "inverted," so cull front when materials on volume instead of on terrain (morph)\n    },\n    depthTest: {\n      enabled: true,\n    },\n    blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].PRE_MULTIPLIED_ALPHA_BLEND */ .Z.PRE_MULTIPLIED_ALPHA_BLEND,\n    depthMask: false,\n  });\n}\n\nObject.defineProperties(GroundPolylinePrimitive.prototype, {\n  /**\n   * Determines if geometry vertex attributes are interleaved, which can slightly improve rendering performance.\n   *\n   * @memberof GroundPolylinePrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  interleave: {\n    get: function () {\n      return this._primitiveOptions.interleave;\n    },\n  },\n\n  /**\n   * When <code>true</code>, the primitive does not keep a reference to the input <code>geometryInstances</code> to save memory.\n   *\n   * @memberof GroundPolylinePrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  releaseGeometryInstances: {\n    get: function () {\n      return this._primitiveOptions.releaseGeometryInstances;\n    },\n  },\n\n  /**\n   * When <code>true</code>, each geometry instance will only be pickable with {@link Scene#pick}.  When <code>false</code>, GPU memory is saved.\n   *\n   * @memberof GroundPolylinePrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  allowPicking: {\n    get: function () {\n      return this._primitiveOptions.allowPicking;\n    },\n  },\n\n  /**\n   * Determines if the geometry instances will be created and batched on a web worker.\n   *\n   * @memberof GroundPolylinePrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  asynchronous: {\n    get: function () {\n      return this._primitiveOptions.asynchronous;\n    },\n  },\n\n  /**\n   * Determines if the primitive is complete and ready to render.  If this property is\n   * true, the primitive will be rendered the next time that {@link GroundPolylinePrimitive#update}\n   * is called.\n   *\n   * @memberof GroundPolylinePrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves when the primitive is ready to render.\n   * @memberof GroundPolylinePrimitive.prototype\n   * @type {Promise.<GroundPolylinePrimitive>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * If true, draws the shadow volume for each geometry in the primitive.\n   * </p>\n   *\n   * @memberof GroundPolylinePrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  debugShowShadowVolume: {\n    get: function () {\n      return this._debugShowShadowVolume;\n    },\n  },\n});\n\n/**\n * Initializes the minimum and maximum terrain heights. This only needs to be called if you are creating the\n * GroundPolylinePrimitive synchronously.\n *\n * @returns {Promise<void>} A promise that will resolve once the terrain heights have been loaded.\n */\nGroundPolylinePrimitive.initializeTerrainHeights = function () {\n  return _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].initialize */ .Z.initialize();\n};\n\nfunction createShaderProgram(groundPolylinePrimitive, frameState, appearance) {\n  var context = frameState.context;\n  var primitive = groundPolylinePrimitive._primitive;\n  var attributeLocations = primitive._attributeLocations;\n\n  var vs = primitive._batchTable.getVertexShaderCallback()(\n    _Shaders_PolylineShadowVolumeVS_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"] */ .Z\n  );\n  vs = _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"]._appendShowToShader */ .Z._appendShowToShader(primitive, vs);\n  vs = _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"]._appendDistanceDisplayConditionToShader */ .Z._appendDistanceDisplayConditionToShader(primitive, vs);\n  vs = _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"]._modifyShaderPosition */ .Z._modifyShaderPosition(\n    groundPolylinePrimitive,\n    vs,\n    frameState.scene3DOnly\n  );\n\n  var vsMorph = primitive._batchTable.getVertexShaderCallback()(\n    _Shaders_PolylineShadowVolumeMorphVS_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"] */ .Z\n  );\n  vsMorph = _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"]._appendShowToShader */ .Z._appendShowToShader(primitive, vsMorph);\n  vsMorph = _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"]._appendDistanceDisplayConditionToShader */ .Z._appendDistanceDisplayConditionToShader(\n    primitive,\n    vsMorph\n  );\n  vsMorph = _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"]._modifyShaderPosition */ .Z._modifyShaderPosition(\n    groundPolylinePrimitive,\n    vsMorph,\n    frameState.scene3DOnly\n  );\n\n  // Access pick color from fragment shader.\n  // Helps with varying budget.\n  var fs = primitive._batchTable.getVertexShaderCallback()(\n    _Shaders_PolylineShadowVolumeFS_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"] */ .Z\n  );\n\n  var vsDefines = [\n    "GLOBE_MINIMUM_ALTITUDE " +\n      frameState.mapProjection.ellipsoid.minimumRadius.toFixed(1),\n  ];\n  var colorDefine = "";\n  var materialShaderSource = "";\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(appearance.material)) {\n    materialShaderSource = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(appearance.material)\n      ? appearance.material.shaderSource\n      : "";\n\n    // Check for use of v_width and v_polylineAngle in material shader\n    // to determine whether these varyings should be active in the vertex shader.\n    if (\n      materialShaderSource.search(/varying\\s+float\\s+v_polylineAngle;/g) !== -1\n    ) {\n      vsDefines.push("ANGLE_VARYING");\n    }\n    if (materialShaderSource.search(/varying\\s+float\\s+v_width;/g) !== -1) {\n      vsDefines.push("WIDTH_VARYING");\n    }\n  } else {\n    colorDefine = "PER_INSTANCE_COLOR";\n  }\n\n  vsDefines.push(colorDefine);\n  var fsDefines = groundPolylinePrimitive.debugShowShadowVolume\n    ? ["DEBUG_SHOW_VOLUME", colorDefine]\n    : [colorDefine];\n\n  var vsColor3D = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n    defines: vsDefines,\n    sources: [vs],\n  });\n  var fsColor3D = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n    defines: fsDefines,\n    sources: [materialShaderSource, fs],\n  });\n  groundPolylinePrimitive._sp = _Renderer_ShaderProgram_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].replaceCache */ .Z.replaceCache({\n    context: context,\n    shaderProgram: primitive._sp,\n    vertexShaderSource: vsColor3D,\n    fragmentShaderSource: fsColor3D,\n    attributeLocations: attributeLocations,\n  });\n\n  // Derive 2D/CV\n  var colorProgram2D = context.shaderCache.getDerivedShaderProgram(\n    groundPolylinePrimitive._sp,\n    "2dColor"\n  );\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(colorProgram2D)) {\n    var vsColor2D = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n      defines: vsDefines.concat(["COLUMBUS_VIEW_2D"]),\n      sources: [vs],\n    });\n    colorProgram2D = context.shaderCache.createDerivedShaderProgram(\n      groundPolylinePrimitive._sp,\n      "2dColor",\n      {\n        context: context,\n        shaderProgram: groundPolylinePrimitive._sp2D,\n        vertexShaderSource: vsColor2D,\n        fragmentShaderSource: fsColor3D,\n        attributeLocations: attributeLocations,\n      }\n    );\n  }\n  groundPolylinePrimitive._sp2D = colorProgram2D;\n\n  // Derive Morph\n  var colorProgramMorph = context.shaderCache.getDerivedShaderProgram(\n    groundPolylinePrimitive._sp,\n    "MorphColor"\n  );\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(colorProgramMorph)) {\n    var vsColorMorph = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n      defines: vsDefines.concat([\n        "MAX_TERRAIN_HEIGHT " +\n          _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"]._defaultMaxTerrainHeight.toFixed */ .Z._defaultMaxTerrainHeight.toFixed(1),\n      ]),\n      sources: [vsMorph],\n    });\n\n    fs = primitive._batchTable.getVertexShaderCallback()(\n      _Shaders_PolylineShadowVolumeMorphFS_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"] */ .Z\n    );\n    var fsColorMorph = new _Renderer_ShaderSource_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z({\n      defines: fsDefines,\n      sources: [materialShaderSource, fs],\n    });\n    colorProgramMorph = context.shaderCache.createDerivedShaderProgram(\n      groundPolylinePrimitive._sp,\n      "MorphColor",\n      {\n        context: context,\n        shaderProgram: groundPolylinePrimitive._spMorph,\n        vertexShaderSource: vsColorMorph,\n        fragmentShaderSource: fsColorMorph,\n        attributeLocations: attributeLocations,\n      }\n    );\n  }\n  groundPolylinePrimitive._spMorph = colorProgramMorph;\n}\n\nfunction getRenderState(mask3DTiles) {\n  return _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromCache */ .Z.fromCache({\n    cull: {\n      enabled: true, // prevent double-draw. Geometry is "inverted" (reversed winding order) so we\'re drawing backfaces.\n    },\n    blending: _BlendingState_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].PRE_MULTIPLIED_ALPHA_BLEND */ .Z.PRE_MULTIPLIED_ALPHA_BLEND,\n    depthMask: false,\n    stencilTest: {\n      enabled: mask3DTiles,\n      frontFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].EQUAL */ .Z.EQUAL,\n      frontOperation: {\n        fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].KEEP */ .Z.KEEP,\n        zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].KEEP */ .Z.KEEP,\n        zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].KEEP */ .Z.KEEP,\n      },\n      backFunction: _StencilFunction_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].EQUAL */ .Z.EQUAL,\n      backOperation: {\n        fail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].KEEP */ .Z.KEEP,\n        zFail: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].KEEP */ .Z.KEEP,\n        zPass: _StencilOperation_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].KEEP */ .Z.KEEP,\n      },\n      reference: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK,\n      mask: _StencilConstants_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"].CESIUM_3D_TILE_MASK */ .Z.CESIUM_3D_TILE_MASK,\n    },\n  });\n}\n\nfunction createCommands(\n  groundPolylinePrimitive,\n  appearance,\n  material,\n  translucent,\n  colorCommands,\n  pickCommands\n) {\n  var primitive = groundPolylinePrimitive._primitive;\n  var length = primitive._va.length;\n  colorCommands.length = length;\n  pickCommands.length = length;\n\n  var isPolylineColorAppearance = appearance instanceof _PolylineColorAppearance_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z;\n\n  var materialUniforms = isPolylineColorAppearance ? {} : material._uniforms;\n  var uniformMap = primitive._batchTable.getUniformMapCallback()(\n    materialUniforms\n  );\n\n  for (var i = 0; i < length; i++) {\n    var vertexArray = primitive._va[i];\n\n    var command = colorCommands[i];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(command)) {\n      command = colorCommands[i] = new _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n        owner: groundPolylinePrimitive,\n        primitiveType: primitive._primitiveType,\n      });\n    }\n\n    command.vertexArray = vertexArray;\n    command.renderState = groundPolylinePrimitive._renderState;\n    command.shaderProgram = groundPolylinePrimitive._sp;\n    command.uniformMap = uniformMap;\n    command.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TERRAIN_CLASSIFICATION */ .Z.TERRAIN_CLASSIFICATION;\n    command.pickId = "czm_batchTable_pickColor(v_endPlaneNormalEcAndBatchId.w)";\n\n    var derivedTilesetCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].shallowClone */ .Z.shallowClone(\n      command,\n      command.derivedCommands.tileset\n    );\n    derivedTilesetCommand.renderState =\n      groundPolylinePrimitive._renderState3DTiles;\n    derivedTilesetCommand.pass = _Renderer_Pass_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].CESIUM_3D_TILE_CLASSIFICATION */ .Z.CESIUM_3D_TILE_CLASSIFICATION;\n    command.derivedCommands.tileset = derivedTilesetCommand;\n\n    // derive for 2D\n    var derived2DCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].shallowClone */ .Z.shallowClone(\n      command,\n      command.derivedCommands.color2D\n    );\n    derived2DCommand.shaderProgram = groundPolylinePrimitive._sp2D;\n    command.derivedCommands.color2D = derived2DCommand;\n\n    var derived2DTilesetCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].shallowClone */ .Z.shallowClone(\n      derivedTilesetCommand,\n      derivedTilesetCommand.derivedCommands.color2D\n    );\n    derived2DTilesetCommand.shaderProgram = groundPolylinePrimitive._sp2D;\n    derivedTilesetCommand.derivedCommands.color2D = derived2DTilesetCommand;\n\n    // derive for Morph\n    var derivedMorphCommand = _Renderer_DrawCommand_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].shallowClone */ .Z.shallowClone(\n      command,\n      command.derivedCommands.colorMorph\n    );\n    derivedMorphCommand.renderState = groundPolylinePrimitive._renderStateMorph;\n    derivedMorphCommand.shaderProgram = groundPolylinePrimitive._spMorph;\n    derivedMorphCommand.pickId = "czm_batchTable_pickColor(v_batchId)";\n    command.derivedCommands.colorMorph = derivedMorphCommand;\n  }\n}\n\nfunction updateAndQueueCommand(\n  groundPolylinePrimitive,\n  command,\n  frameState,\n  modelMatrix,\n  cull,\n  boundingVolume,\n  debugShowBoundingVolume\n) {\n  // Use derived appearance command for morph and 2D\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].MORPHING */ .Z.MORPHING) {\n    command = command.derivedCommands.colorMorph;\n  } else if (frameState.mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    command = command.derivedCommands.color2D;\n  }\n  command.modelMatrix = modelMatrix;\n  command.boundingVolume = boundingVolume;\n  command.cull = cull;\n  command.debugShowBoundingVolume = debugShowBoundingVolume;\n\n  frameState.commandList.push(command);\n}\n\nfunction updateAndQueueCommands(\n  groundPolylinePrimitive,\n  frameState,\n  colorCommands,\n  pickCommands,\n  modelMatrix,\n  cull,\n  debugShowBoundingVolume\n) {\n  var primitive = groundPolylinePrimitive._primitive;\n\n  _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"]._updateBoundingVolumes */ .Z._updateBoundingVolumes(primitive, frameState, modelMatrix); // Expected to be identity - GroundPrimitives don\'t support other model matrices\n\n  var boundingSpheres;\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    boundingSpheres = primitive._boundingSphereWC;\n  } else if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    boundingSpheres = primitive._boundingSphereCV;\n  } else if (\n    frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].SCENE2D */ .Z.SCENE2D &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(primitive._boundingSphere2D)\n  ) {\n    boundingSpheres = primitive._boundingSphere2D;\n  } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(primitive._boundingSphereMorph)) {\n    boundingSpheres = primitive._boundingSphereMorph;\n  }\n\n  var morphing = frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"].MORPHING */ .Z.MORPHING;\n  var classificationType = groundPolylinePrimitive.classificationType;\n  var queueTerrainCommands =\n    classificationType !== _ClassificationType_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE;\n  var queue3DTilesCommands =\n    classificationType !== _ClassificationType_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].TERRAIN */ .Z.TERRAIN && !morphing;\n\n  var command;\n  var passes = frameState.passes;\n  if (passes.render || (passes.pick && primitive.allowPicking)) {\n    var colorLength = colorCommands.length;\n    for (var j = 0; j < colorLength; ++j) {\n      var boundingVolume = boundingSpheres[j];\n      if (queueTerrainCommands) {\n        command = colorCommands[j];\n        updateAndQueueCommand(\n          groundPolylinePrimitive,\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n      if (queue3DTilesCommands) {\n        command = colorCommands[j].derivedCommands.tileset;\n        updateAndQueueCommand(\n          groundPolylinePrimitive,\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n    }\n  }\n}\n\n/**\n * Called when {@link Viewer} or {@link CesiumWidget} render the scene to\n * get the draw commands needed to render this primitive.\n * <p>\n * Do not call this function directly.  This is documented just to\n * list the exceptions that may be propagated when the scene is rendered:\n * </p>\n *\n * @exception {DeveloperError} For synchronous GroundPolylinePrimitives, you must call GroundPolylinePrimitives.initializeTerrainHeights() and wait for the returned promise to resolve.\n * @exception {DeveloperError} All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive.\n */\nGroundPolylinePrimitive.prototype.update = function (frameState) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(this._primitive) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(this.geometryInstances)) {\n    return;\n  }\n\n  if (!_Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].initialized */ .Z.initialized) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (!this.asynchronous) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n        "For synchronous GroundPolylinePrimitives, you must call GroundPolylinePrimitives.initializeTerrainHeights() and wait for the returned promise to resolve."\n      );\n    }\n    //>>includeEnd(\'debug\');\n\n    GroundPolylinePrimitive.initializeTerrainHeights();\n    return;\n  }\n\n  var i;\n\n  var that = this;\n  var primitiveOptions = this._primitiveOptions;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(this._primitive)) {\n    var geometryInstances = Array.isArray(this.geometryInstances)\n      ? this.geometryInstances\n      : [this.geometryInstances];\n    var geometryInstancesLength = geometryInstances.length;\n    var groundInstances = new Array(geometryInstancesLength);\n\n    var attributes;\n\n    // Check if each instance has a color attribute.\n    for (i = 0; i < geometryInstancesLength; ++i) {\n      attributes = geometryInstances[i].attributes;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(attributes) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(attributes.color)) {\n        this._hasPerInstanceColors = false;\n        break;\n      }\n    }\n\n    for (i = 0; i < geometryInstancesLength; ++i) {\n      var geometryInstance = geometryInstances[i];\n      attributes = {};\n      var instanceAttributes = geometryInstance.attributes;\n      for (var attributeKey in instanceAttributes) {\n        if (instanceAttributes.hasOwnProperty(attributeKey)) {\n          attributes[attributeKey] = instanceAttributes[attributeKey];\n        }\n      }\n\n      // Automatically create line width attribute if not already given\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(attributes.width)) {\n        attributes.width = new _Core_GeometryInstanceAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n          componentDatatype: _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n          componentsPerAttribute: 1.0,\n          value: [geometryInstance.geometry.width],\n        });\n      }\n\n      // Update each geometry for framestate.scene3DOnly = true and projection\n      geometryInstance.geometry._scene3DOnly = frameState.scene3DOnly;\n      _Core_GroundPolylineGeometry_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].setProjectionAndEllipsoid */ .Z.setProjectionAndEllipsoid(\n        geometryInstance.geometry,\n        frameState.mapProjection\n      );\n\n      groundInstances[i] = new _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n        geometry: geometryInstance.geometry,\n        attributes: attributes,\n        id: geometryInstance.id,\n        pickPrimitive: that,\n      });\n    }\n\n    primitiveOptions.geometryInstances = groundInstances;\n    primitiveOptions.appearance = this.appearance;\n\n    primitiveOptions._createShaderProgramFunction = function (\n      primitive,\n      frameState,\n      appearance\n    ) {\n      createShaderProgram(that, frameState, appearance);\n    };\n    primitiveOptions._createCommandsFunction = function (\n      primitive,\n      appearance,\n      material,\n      translucent,\n      twoPasses,\n      colorCommands,\n      pickCommands\n    ) {\n      createCommands(\n        that,\n        appearance,\n        material,\n        translucent,\n        colorCommands,\n        pickCommands\n      );\n    };\n    primitiveOptions._updateAndQueueCommandsFunction = function (\n      primitive,\n      frameState,\n      colorCommands,\n      pickCommands,\n      modelMatrix,\n      cull,\n      debugShowBoundingVolume,\n      twoPasses\n    ) {\n      updateAndQueueCommands(\n        that,\n        frameState,\n        colorCommands,\n        pickCommands,\n        modelMatrix,\n        cull,\n        debugShowBoundingVolume\n      );\n    };\n\n    this._primitive = new _Primitive_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z(primitiveOptions);\n    this._primitive.readyPromise.then(function (primitive) {\n      that._ready = true;\n\n      if (that.releaseGeometryInstances) {\n        that.geometryInstances = undefined;\n      }\n\n      var error = primitive._error;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(error)) {\n        that._readyPromise.resolve(that);\n      } else {\n        that._readyPromise.reject(error);\n      }\n    });\n  }\n\n  if (\n    this.appearance instanceof _PolylineColorAppearance_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z &&\n    !this._hasPerInstanceColors\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive."\n    );\n  }\n\n  this._primitive.appearance = this.appearance;\n  this._primitive.show = this.show;\n  this._primitive.debugShowBoundingVolume = this.debugShowBoundingVolume;\n  this._primitive.update(frameState);\n};\n\n/**\n * Returns the modifiable per-instance attributes for a {@link GeometryInstance}.\n *\n * @param {*} id The id of the {@link GeometryInstance}.\n * @returns {Object} The typed array in the attribute\'s format or undefined if the is no instance with id.\n *\n * @exception {DeveloperError} must call update before calling getGeometryInstanceAttributes.\n *\n * @example\n * var attributes = primitive.getGeometryInstanceAttributes(\'an id\');\n * attributes.color = Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.AQUA);\n * attributes.show = Cesium.ShowGeometryInstanceAttribute.toValue(true);\n */\nGroundPolylinePrimitive.prototype.getGeometryInstanceAttributes = function (\n  id\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"] */ .Z)(this._primitive)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "must call update before calling getGeometryInstanceAttributes"\n    );\n  }\n  //>>includeEnd(\'debug\');\n  return this._primitive.getGeometryInstanceAttributes(id);\n};\n\n/**\n * Checks if the given Scene supports GroundPolylinePrimitives.\n * GroundPolylinePrimitives require support for the WEBGL_depth_texture extension.\n *\n * @param {Scene} scene The current scene.\n * @returns {Boolean} Whether or not the current scene supports GroundPolylinePrimitives.\n */\nGroundPolylinePrimitive.isSupported = function (scene) {\n  return scene.frameState.context.depthTexture;\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <p>\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n * </p>\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see GroundPolylinePrimitive#destroy\n */\nGroundPolylinePrimitive.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <p>\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n * </p>\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * e = e && e.destroy();\n *\n * @see GroundPolylinePrimitive#isDestroyed\n */\nGroundPolylinePrimitive.prototype.destroy = function () {\n  this._primitive = this._primitive && this._primitive.destroy();\n  this._sp = this._sp && this._sp.destroy();\n\n  // Derived programs, destroyed above if they existed.\n  this._sp2D = undefined;\n  this._spMorph = undefined;\n\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (GroundPolylinePrimitive);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLDJFQUFhO0FBQ3RCO0FBQ0EseURBQWUsdUJBQXVCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR3JvdW5kUG9seWxpbmVQcmltaXRpdmUuanM/NWY3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXBwcm94aW1hdGVUZXJyYWluSGVpZ2h0cyBmcm9tIFwiLi4vQ29yZS9BcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBHZW9tZXRyeUluc3RhbmNlIGZyb20gXCIuLi9Db3JlL0dlb21ldHJ5SW5zdGFuY2UuanNcIjtcbmltcG9ydCBHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIGZyb20gXCIuLi9Db3JlL0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuanNcIjtcbmltcG9ydCBHcm91bmRQb2x5bGluZUdlb21ldHJ5IGZyb20gXCIuLi9Db3JlL0dyb3VuZFBvbHlsaW5lR2VvbWV0cnkuanNcIjtcbmltcG9ydCBEcmF3Q29tbWFuZCBmcm9tIFwiLi4vUmVuZGVyZXIvRHJhd0NvbW1hbmQuanNcIjtcbmltcG9ydCBQYXNzIGZyb20gXCIuLi9SZW5kZXJlci9QYXNzLmpzXCI7XG5pbXBvcnQgUmVuZGVyU3RhdGUgZnJvbSBcIi4uL1JlbmRlcmVyL1JlbmRlclN0YXRlLmpzXCI7XG5pbXBvcnQgU2hhZGVyUHJvZ3JhbSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyUHJvZ3JhbS5qc1wiO1xuaW1wb3J0IFNoYWRlclNvdXJjZSBmcm9tIFwiLi4vUmVuZGVyZXIvU2hhZGVyU291cmNlLmpzXCI7XG5pbXBvcnQgUG9seWxpbmVTaGFkb3dWb2x1bWVGUyBmcm9tIFwiLi4vU2hhZGVycy9Qb2x5bGluZVNoYWRvd1ZvbHVtZUZTLmpzXCI7XG5pbXBvcnQgUG9seWxpbmVTaGFkb3dWb2x1bWVNb3JwaEZTIGZyb20gXCIuLi9TaGFkZXJzL1BvbHlsaW5lU2hhZG93Vm9sdW1lTW9ycGhGUy5qc1wiO1xuaW1wb3J0IFBvbHlsaW5lU2hhZG93Vm9sdW1lTW9ycGhWUyBmcm9tIFwiLi4vU2hhZGVycy9Qb2x5bGluZVNoYWRvd1ZvbHVtZU1vcnBoVlMuanNcIjtcbmltcG9ydCBQb2x5bGluZVNoYWRvd1ZvbHVtZVZTIGZyb20gXCIuLi9TaGFkZXJzL1BvbHlsaW5lU2hhZG93Vm9sdW1lVlMuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcbmltcG9ydCBCbGVuZGluZ1N0YXRlIGZyb20gXCIuL0JsZW5kaW5nU3RhdGUuanNcIjtcbmltcG9ydCBDbGFzc2lmaWNhdGlvblR5cGUgZnJvbSBcIi4vQ2xhc3NpZmljYXRpb25UeXBlLmpzXCI7XG5pbXBvcnQgQ3VsbEZhY2UgZnJvbSBcIi4vQ3VsbEZhY2UuanNcIjtcbmltcG9ydCBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZSBmcm9tIFwiLi9Qb2x5bGluZUNvbG9yQXBwZWFyYW5jZS5qc1wiO1xuaW1wb3J0IFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlIGZyb20gXCIuL1BvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlLmpzXCI7XG5pbXBvcnQgUHJpbWl0aXZlIGZyb20gXCIuL1ByaW1pdGl2ZS5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi9TY2VuZU1vZGUuanNcIjtcbmltcG9ydCBTdGVuY2lsQ29uc3RhbnRzIGZyb20gXCIuL1N0ZW5jaWxDb25zdGFudHMuanNcIjtcbmltcG9ydCBTdGVuY2lsRnVuY3Rpb24gZnJvbSBcIi4vU3RlbmNpbEZ1bmN0aW9uLmpzXCI7XG5pbXBvcnQgU3RlbmNpbE9wZXJhdGlvbiBmcm9tIFwiLi9TdGVuY2lsT3BlcmF0aW9uLmpzXCI7XG5cbi8qKlxuICogQSBHcm91bmRQb2x5bGluZVByaW1pdGl2ZSByZXByZXNlbnRzIGEgcG9seWxpbmUgZHJhcGVkIG92ZXIgdGhlIHRlcnJhaW4gb3IgM0QgVGlsZXMgaW4gdGhlIHtAbGluayBTY2VuZX0uXG4gKiA8cD5cbiAqIE9ubHkgdG8gYmUgdXNlZCB3aXRoIEdlb21ldHJ5SW5zdGFuY2VzIGNvbnRhaW5pbmcge0BsaW5rIEdyb3VuZFBvbHlsaW5lR2VvbWV0cnl9LlxuICogPC9wPlxuICpcbiAqIEBhbGlhcyBHcm91bmRQb2x5bGluZVByaW1pdGl2ZVxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0FycmF5fEdlb21ldHJ5SW5zdGFuY2V9IFtvcHRpb25zLmdlb21ldHJ5SW5zdGFuY2VzXSBHZW9tZXRyeUluc3RhbmNlcyBjb250YWluaW5nIEdyb3VuZFBvbHlsaW5lR2VvbWV0cnlcbiAqIEBwYXJhbSB7QXBwZWFyYW5jZX0gW29wdGlvbnMuYXBwZWFyYW5jZV0gVGhlIEFwcGVhcmFuY2UgdXNlZCB0byByZW5kZXIgdGhlIHBvbHlsaW5lLiBEZWZhdWx0cyB0byBhIHdoaXRlIGNvbG9yIHtAbGluayBNYXRlcmlhbH0gb24gYSB7QGxpbmsgUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2V9LlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zaG93PXRydWVdIERldGVybWluZXMgaWYgdGhpcyBwcmltaXRpdmUgd2lsbCBiZSBzaG93bi5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaW50ZXJsZWF2ZT1mYWxzZV0gV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgZ2VvbWV0cnkgdmVydGV4IGF0dHJpYnV0ZXMgYXJlIGludGVybGVhdmVkLCB3aGljaCBjYW4gc2xpZ2h0bHkgaW1wcm92ZSByZW5kZXJpbmcgcGVyZm9ybWFuY2UgYnV0IGluY3JlYXNlcyBsb2FkIHRpbWUuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlcz10cnVlXSBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCB0aGUgcHJpbWl0aXZlIGRvZXMgbm90IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGlucHV0IDxjb2RlPmdlb21ldHJ5SW5zdGFuY2VzPC9jb2RlPiB0byBzYXZlIG1lbW9yeS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYWxsb3dQaWNraW5nPXRydWVdIFdoZW4gPGNvZGU+dHJ1ZTwvY29kZT4sIGVhY2ggZ2VvbWV0cnkgaW5zdGFuY2Ugd2lsbCBvbmx5IGJlIHBpY2thYmxlIHdpdGgge0BsaW5rIFNjZW5lI3BpY2t9LiAgV2hlbiA8Y29kZT5mYWxzZTwvY29kZT4sIEdQVSBtZW1vcnkgaXMgc2F2ZWQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFzeW5jaHJvbm91cz10cnVlXSBEZXRlcm1pbmVzIGlmIHRoZSBwcmltaXRpdmUgd2lsbCBiZSBjcmVhdGVkIGFzeW5jaHJvbm91c2x5IG9yIGJsb2NrIHVudGlsIHJlYWR5LiBJZiBmYWxzZSBpbml0aWFsaXplVGVycmFpbkhlaWdodHMoKSBtdXN0IGJlIGNhbGxlZCBmaXJzdC5cbiAqIEBwYXJhbSB7Q2xhc3NpZmljYXRpb25UeXBlfSBbb3B0aW9ucy5jbGFzc2lmaWNhdGlvblR5cGU9Q2xhc3NpZmljYXRpb25UeXBlLkJPVEhdIERldGVybWluZXMgd2hldGhlciB0ZXJyYWluLCAzRCBUaWxlcyBvciBib3RoIHdpbGwgYmUgY2xhc3NpZmllZC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU9ZmFsc2VdIEZvciBkZWJ1Z2dpbmcgb25seS4gRGV0ZXJtaW5lcyBpZiB0aGlzIHByaW1pdGl2ZSdzIGNvbW1hbmRzJyBib3VuZGluZyBzcGhlcmVzIGFyZSBzaG93bi5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZGVidWdTaG93U2hhZG93Vm9sdW1lPWZhbHNlXSBGb3IgZGVidWdnaW5nIG9ubHkuIERldGVybWluZXMgaWYgdGhlIHNoYWRvdyB2b2x1bWUgZm9yIGVhY2ggZ2VvbWV0cnkgaW4gdGhlIHByaW1pdGl2ZSBpcyBkcmF3bi4gTXVzdCBiZSA8Y29kZT50cnVlPC9jb2RlPiBvbiBjcmVhdGlvbiB0byBoYXZlIGVmZmVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gMS4gRHJhdyBhIHBvbHlsaW5lIG9uIHRlcnJhaW4gd2l0aCBhIGJhc2ljIGNvbG9yIG1hdGVyaWFsXG4gKlxuICogdmFyIGluc3RhbmNlID0gbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAqICAgZ2VvbWV0cnkgOiBuZXcgQ2VzaXVtLkdyb3VuZFBvbHlsaW5lR2VvbWV0cnkoe1xuICogICAgICBwb3NpdGlvbnMgOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlc0FycmF5KFtcbiAqICAgICAgICAgIC0xMTIuMTM0MDE2NDQ1MDMzMSwgMzYuMDU0OTQyODc4MzYxMjgsXG4gKiAgICAgICAgICAtMTEyLjA4ODIxMDEwNTgyNjQ1LCAzNi4wOTc4MDQwNzEzODA3MTVcbiAqICAgICAgXSksXG4gKiAgICAgIHdpZHRoIDogNC4wXG4gKiAgIH0pLFxuICogICBpZCA6ICdvYmplY3QgcmV0dXJuZWQgd2hlbiB0aGlzIGluc3RhbmNlIGlzIHBpY2tlZCBhbmQgdG8gZ2V0L3NldCBwZXItaW5zdGFuY2UgYXR0cmlidXRlcydcbiAqIH0pO1xuICpcbiAqIHNjZW5lLmdyb3VuZFByaW1pdGl2ZXMuYWRkKG5ldyBDZXNpdW0uR3JvdW5kUG9seWxpbmVQcmltaXRpdmUoe1xuICogICBnZW9tZXRyeUluc3RhbmNlcyA6IGluc3RhbmNlLFxuICogICBhcHBlYXJhbmNlIDogbmV3IENlc2l1bS5Qb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZSgpXG4gKiB9KSk7XG4gKlxuICogLy8gMi4gRHJhdyBhIGxvb3BlZCBwb2x5bGluZSBvbiB0ZXJyYWluIHdpdGggcGVyLWluc3RhbmNlIGNvbG9yIGFuZCBhIGRpc3RhbmNlIGRpc3BsYXkgY29uZGl0aW9uLlxuICogLy8gRGlzdGFuY2UgZGlzcGxheSBjb25kaXRpb25zIGZvciBwb2x5bGluZXMgb24gdGVycmFpbiBhcmUgYmFzZWQgb24gYW4gYXBwcm94aW1hdGUgdGVycmFpbiBoZWlnaHRcbiAqIC8vIGluc3RlYWQgb2YgdHJ1ZSB0ZXJyYWluIGhlaWdodC5cbiAqXG4gKiB2YXIgaW5zdGFuY2UgPSBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xuICogICBnZW9tZXRyeSA6IG5ldyBDZXNpdW0uR3JvdW5kUG9seWxpbmVHZW9tZXRyeSh7XG4gKiAgICAgIHBvc2l0aW9ucyA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzQXJyYXkoW1xuICogICAgICAgICAgLTExMi4xMzQwMTY0NDUwMzMxLCAzNi4wNTQ5NDI4NzgzNjEyOCxcbiAqICAgICAgICAgIC0xMTIuMDg4MjEwMTA1ODI2NDUsIDM2LjA5NzgwNDA3MTM4MDcxNSxcbiAqICAgICAgICAgIC0xMTIuMTMyOTYwNzk3MzAwMjQsIDM2LjE2ODc2OTE0NjgwMTEwNFxuICogICAgICBdKSxcbiAqICAgICAgbG9vcCA6IHRydWUsXG4gKiAgICAgIHdpZHRoIDogNC4wXG4gKiAgIH0pLFxuICogICBhdHRyaWJ1dGVzIDoge1xuICogICAgICBjb2xvciA6IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuZnJvbUNvbG9yKENlc2l1bS5Db2xvci5mcm9tQ3NzQ29sb3JTdHJpbmcoJ2dyZWVuJykud2l0aEFscGhhKDAuNykpLFxuICogICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24gOiBuZXcgQ2VzaXVtLkRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbkdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUoMTAwMCwgMzAwMDApXG4gKiAgIH0sXG4gKiAgIGlkIDogJ29iamVjdCByZXR1cm5lZCB3aGVuIHRoaXMgaW5zdGFuY2UgaXMgcGlja2VkIGFuZCB0byBnZXQvc2V0IHBlci1pbnN0YW5jZSBhdHRyaWJ1dGVzJ1xuICogfSk7XG4gKlxuICogc2NlbmUuZ3JvdW5kUHJpbWl0aXZlcy5hZGQobmV3IENlc2l1bS5Hcm91bmRQb2x5bGluZVByaW1pdGl2ZSh7XG4gKiAgIGdlb21ldHJ5SW5zdGFuY2VzIDogaW5zdGFuY2UsXG4gKiAgIGFwcGVhcmFuY2UgOiBuZXcgQ2VzaXVtLlBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlKClcbiAqIH0pKTtcbiAqL1xuZnVuY3Rpb24gR3JvdW5kUG9seWxpbmVQcmltaXRpdmUob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8qKlxuICAgKiBUaGUgZ2VvbWV0cnkgaW5zdGFuY2VzIHJlbmRlcmVkIHdpdGggdGhpcyBwcmltaXRpdmUuIFRoaXMgbWF5XG4gICAqIGJlIDxjb2RlPnVuZGVmaW5lZDwvY29kZT4gaWYgPGNvZGU+b3B0aW9ucy5yZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXM8L2NvZGU+XG4gICAqIGlzIDxjb2RlPnRydWU8L2NvZGU+IHdoZW4gdGhlIHByaW1pdGl2ZSBpcyBjb25zdHJ1Y3RlZC5cbiAgICogPHA+XG4gICAqIENoYW5naW5nIHRoaXMgcHJvcGVydHkgYWZ0ZXIgdGhlIHByaW1pdGl2ZSBpcyByZW5kZXJlZCBoYXMgbm8gZWZmZWN0LlxuICAgKiA8L3A+XG4gICAqXG4gICAqIEByZWFkb25seVxuICAgKiBAdHlwZSB7QXJyYXl8R2VvbWV0cnlJbnN0YW5jZX1cbiAgICpcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmdlb21ldHJ5SW5zdGFuY2VzID0gb3B0aW9ucy5nZW9tZXRyeUluc3RhbmNlcztcbiAgdGhpcy5faGFzUGVySW5zdGFuY2VDb2xvcnMgPSB0cnVlO1xuXG4gIHZhciBhcHBlYXJhbmNlID0gb3B0aW9ucy5hcHBlYXJhbmNlO1xuICBpZiAoIWRlZmluZWQoYXBwZWFyYW5jZSkpIHtcbiAgICBhcHBlYXJhbmNlID0gbmV3IFBvbHlsaW5lTWF0ZXJpYWxBcHBlYXJhbmNlKCk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSB7QGxpbmsgQXBwZWFyYW5jZX0gdXNlZCB0byBzaGFkZSB0aGlzIHByaW1pdGl2ZS4gRWFjaCBnZW9tZXRyeVxuICAgKiBpbnN0YW5jZSBpcyBzaGFkZWQgd2l0aCB0aGUgc2FtZSBhcHBlYXJhbmNlLiAgU29tZSBhcHBlYXJhbmNlcywgbGlrZVxuICAgKiB7QGxpbmsgUG9seWxpbmVDb2xvckFwcGVhcmFuY2V9IGFsbG93IGdpdmluZyBlYWNoIGluc3RhbmNlIHVuaXF1ZVxuICAgKiBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBAdHlwZSBBcHBlYXJhbmNlXG4gICAqXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5hcHBlYXJhbmNlID0gYXBwZWFyYW5jZTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgcHJpbWl0aXZlIHdpbGwgYmUgc2hvd24uICBUaGlzIGFmZmVjdHMgYWxsIGdlb21ldHJ5XG4gICAqIGluc3RhbmNlcyBpbiB0aGUgcHJpbWl0aXZlLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGhpcy5zaG93ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuc2hvdywgdHJ1ZSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciB0ZXJyYWluLCAzRCBUaWxlcyBvciBib3RoIHdpbGwgYmUgY2xhc3NpZmllZC5cbiAgICpcbiAgICogQHR5cGUge0NsYXNzaWZpY2F0aW9uVHlwZX1cbiAgICpcbiAgICogQGRlZmF1bHQgQ2xhc3NpZmljYXRpb25UeXBlLkJPVEhcbiAgICovXG4gIHRoaXMuY2xhc3NpZmljYXRpb25UeXBlID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMuY2xhc3NpZmljYXRpb25UeXBlLFxuICAgIENsYXNzaWZpY2F0aW9uVHlwZS5CT1RIXG4gICk7XG5cbiAgLyoqXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgZm9yIGRlYnVnZ2luZyBvbmx5OyBpdCBpcyBub3QgZm9yIHByb2R1Y3Rpb24gdXNlIG5vciBpcyBpdCBvcHRpbWl6ZWQuXG4gICAqIDxwPlxuICAgKiBEcmF3cyB0aGUgYm91bmRpbmcgc3BoZXJlIGZvciBlYWNoIGRyYXcgY29tbWFuZCBpbiB0aGUgcHJpbWl0aXZlLlxuICAgKiA8L3A+XG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgdGhpcy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lLFxuICAgIGZhbHNlXG4gICk7XG5cbiAgLy8gU2hhZG93IHZvbHVtZSBpcyBzaG93biBieSByZW1vdmluZyBhIGRpc2NhcmQgaW4gdGhlIHNoYWRlciwgc28gdGhpcyBpc24ndCB0b2dnbGVhYmxlLlxuICB0aGlzLl9kZWJ1Z1Nob3dTaGFkb3dWb2x1bWUgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5kZWJ1Z1Nob3dTaGFkb3dWb2x1bWUsXG4gICAgZmFsc2VcbiAgKTtcblxuICB0aGlzLl9wcmltaXRpdmVPcHRpb25zID0ge1xuICAgIGdlb21ldHJ5SW5zdGFuY2VzOiB1bmRlZmluZWQsXG4gICAgYXBwZWFyYW5jZTogdW5kZWZpbmVkLFxuICAgIHZlcnRleENhY2hlT3B0aW1pemU6IGZhbHNlLFxuICAgIGludGVybGVhdmU6IGRlZmF1bHRWYWx1ZShvcHRpb25zLmludGVybGVhdmUsIGZhbHNlKSxcbiAgICByZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXM6IGRlZmF1bHRWYWx1ZShcbiAgICAgIG9wdGlvbnMucmVsZWFzZUdlb21ldHJ5SW5zdGFuY2VzLFxuICAgICAgdHJ1ZVxuICAgICksXG4gICAgYWxsb3dQaWNraW5nOiBkZWZhdWx0VmFsdWUob3B0aW9ucy5hbGxvd1BpY2tpbmcsIHRydWUpLFxuICAgIGFzeW5jaHJvbm91czogZGVmYXVsdFZhbHVlKG9wdGlvbnMuYXN5bmNocm9ub3VzLCB0cnVlKSxcbiAgICBjb21wcmVzc1ZlcnRpY2VzOiBmYWxzZSxcbiAgICBfY3JlYXRlU2hhZGVyUHJvZ3JhbUZ1bmN0aW9uOiB1bmRlZmluZWQsXG4gICAgX2NyZWF0ZUNvbW1hbmRzRnVuY3Rpb246IHVuZGVmaW5lZCxcbiAgICBfdXBkYXRlQW5kUXVldWVDb21tYW5kc0Z1bmN0aW9uOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgLy8gVXNlZCB3aGVuIGluc2VydGluZyBpbiBhbiBPcmRlcmVkUHJpbWl0aXZlQ29sbGVjdGlvblxuICB0aGlzLl96SW5kZXggPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgdGhpcy5fcmVhZHlQcm9taXNlID0gd2hlbi5kZWZlcigpO1xuXG4gIHRoaXMuX3ByaW1pdGl2ZSA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9zcCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3AyRCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3BNb3JwaCA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9yZW5kZXJTdGF0ZSA9IGdldFJlbmRlclN0YXRlKGZhbHNlKTtcbiAgdGhpcy5fcmVuZGVyU3RhdGUzRFRpbGVzID0gZ2V0UmVuZGVyU3RhdGUodHJ1ZSk7XG5cbiAgdGhpcy5fcmVuZGVyU3RhdGVNb3JwaCA9IFJlbmRlclN0YXRlLmZyb21DYWNoZSh7XG4gICAgY3VsbDoge1xuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGZhY2U6IEN1bGxGYWNlLkZST05ULCAvLyBHZW9tZXRyeSBpcyBcImludmVydGVkLFwiIHNvIGN1bGwgZnJvbnQgd2hlbiBtYXRlcmlhbHMgb24gdm9sdW1lIGluc3RlYWQgb2Ygb24gdGVycmFpbiAobW9ycGgpXG4gICAgfSxcbiAgICBkZXB0aFRlc3Q6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgfSxcbiAgICBibGVuZGluZzogQmxlbmRpbmdTdGF0ZS5QUkVfTVVMVElQTElFRF9BTFBIQV9CTEVORCxcbiAgICBkZXB0aE1hc2s6IGZhbHNlLFxuICB9KTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR3JvdW5kUG9seWxpbmVQcmltaXRpdmUucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIGdlb21ldHJ5IHZlcnRleCBhdHRyaWJ1dGVzIGFyZSBpbnRlcmxlYXZlZCwgd2hpY2ggY2FuIHNsaWdodGx5IGltcHJvdmUgcmVuZGVyaW5nIHBlcmZvcm1hbmNlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR3JvdW5kUG9seWxpbmVQcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGludGVybGVhdmU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVPcHRpb25zLmludGVybGVhdmU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIHByaW1pdGl2ZSBkb2VzIG5vdCBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnB1dCA8Y29kZT5nZW9tZXRyeUluc3RhbmNlczwvY29kZT4gdG8gc2F2ZSBtZW1vcnkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQb2x5bGluZVByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICByZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVPcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlcztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBlYWNoIGdlb21ldHJ5IGluc3RhbmNlIHdpbGwgb25seSBiZSBwaWNrYWJsZSB3aXRoIHtAbGluayBTY2VuZSNwaWNrfS4gIFdoZW4gPGNvZGU+ZmFsc2U8L2NvZGU+LCBHUFUgbWVtb3J5IGlzIHNhdmVkLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR3JvdW5kUG9seWxpbmVQcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgYWxsb3dQaWNraW5nOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJpbWl0aXZlT3B0aW9ucy5hbGxvd1BpY2tpbmc7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2VvbWV0cnkgaW5zdGFuY2VzIHdpbGwgYmUgY3JlYXRlZCBhbmQgYmF0Y2hlZCBvbiBhIHdlYiB3b3JrZXIuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQb2x5bGluZVByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBhc3luY2hyb25vdXM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVPcHRpb25zLmFzeW5jaHJvbm91cztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBwcmltaXRpdmUgaXMgY29tcGxldGUgYW5kIHJlYWR5IHRvIHJlbmRlci4gIElmIHRoaXMgcHJvcGVydHkgaXNcbiAgICogdHJ1ZSwgdGhlIHByaW1pdGl2ZSB3aWxsIGJlIHJlbmRlcmVkIHRoZSBuZXh0IHRpbWUgdGhhdCB7QGxpbmsgR3JvdW5kUG9seWxpbmVQcmltaXRpdmUjdXBkYXRlfVxuICAgKiBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQb2x5bGluZVByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHByaW1pdGl2ZSBpcyByZWFkeSB0byByZW5kZXIuXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQb2x5bGluZVByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb21pc2UuPEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlPn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICByZWFkeVByb21pc2U6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeVByb21pc2UucHJvbWlzZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGZvciBkZWJ1Z2dpbmcgb25seTsgaXQgaXMgbm90IGZvciBwcm9kdWN0aW9uIHVzZSBub3IgaXMgaXQgb3B0aW1pemVkLlxuICAgKiA8cD5cbiAgICogSWYgdHJ1ZSwgZHJhd3MgdGhlIHNoYWRvdyB2b2x1bWUgZm9yIGVhY2ggZ2VvbWV0cnkgaW4gdGhlIHByaW1pdGl2ZS5cbiAgICogPC9wPlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR3JvdW5kUG9seWxpbmVQcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGRlYnVnU2hvd1NoYWRvd1ZvbHVtZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RlYnVnU2hvd1NoYWRvd1ZvbHVtZTtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gdGVycmFpbiBoZWlnaHRzLiBUaGlzIG9ubHkgbmVlZHMgdG8gYmUgY2FsbGVkIGlmIHlvdSBhcmUgY3JlYXRpbmcgdGhlXG4gKiBHcm91bmRQb2x5bGluZVByaW1pdGl2ZSBzeW5jaHJvbm91c2x5LlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb25jZSB0aGUgdGVycmFpbiBoZWlnaHRzIGhhdmUgYmVlbiBsb2FkZWQuXG4gKi9cbkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLmluaXRpYWxpemVUZXJyYWluSGVpZ2h0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIEFwcHJveGltYXRlVGVycmFpbkhlaWdodHMuaW5pdGlhbGl6ZSgpO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlU2hhZGVyUHJvZ3JhbShncm91bmRQb2x5bGluZVByaW1pdGl2ZSwgZnJhbWVTdGF0ZSwgYXBwZWFyYW5jZSkge1xuICB2YXIgY29udGV4dCA9IGZyYW1lU3RhdGUuY29udGV4dDtcbiAgdmFyIHByaW1pdGl2ZSA9IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9wcmltaXRpdmU7XG4gIHZhciBhdHRyaWJ1dGVMb2NhdGlvbnMgPSBwcmltaXRpdmUuX2F0dHJpYnV0ZUxvY2F0aW9ucztcblxuICB2YXIgdnMgPSBwcmltaXRpdmUuX2JhdGNoVGFibGUuZ2V0VmVydGV4U2hhZGVyQ2FsbGJhY2soKShcbiAgICBQb2x5bGluZVNoYWRvd1ZvbHVtZVZTXG4gICk7XG4gIHZzID0gUHJpbWl0aXZlLl9hcHBlbmRTaG93VG9TaGFkZXIocHJpbWl0aXZlLCB2cyk7XG4gIHZzID0gUHJpbWl0aXZlLl9hcHBlbmREaXN0YW5jZURpc3BsYXlDb25kaXRpb25Ub1NoYWRlcihwcmltaXRpdmUsIHZzKTtcbiAgdnMgPSBQcmltaXRpdmUuX21vZGlmeVNoYWRlclBvc2l0aW9uKFxuICAgIGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLFxuICAgIHZzLFxuICAgIGZyYW1lU3RhdGUuc2NlbmUzRE9ubHlcbiAgKTtcblxuICB2YXIgdnNNb3JwaCA9IHByaW1pdGl2ZS5fYmF0Y2hUYWJsZS5nZXRWZXJ0ZXhTaGFkZXJDYWxsYmFjaygpKFxuICAgIFBvbHlsaW5lU2hhZG93Vm9sdW1lTW9ycGhWU1xuICApO1xuICB2c01vcnBoID0gUHJpbWl0aXZlLl9hcHBlbmRTaG93VG9TaGFkZXIocHJpbWl0aXZlLCB2c01vcnBoKTtcbiAgdnNNb3JwaCA9IFByaW1pdGl2ZS5fYXBwZW5kRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uVG9TaGFkZXIoXG4gICAgcHJpbWl0aXZlLFxuICAgIHZzTW9ycGhcbiAgKTtcbiAgdnNNb3JwaCA9IFByaW1pdGl2ZS5fbW9kaWZ5U2hhZGVyUG9zaXRpb24oXG4gICAgZ3JvdW5kUG9seWxpbmVQcmltaXRpdmUsXG4gICAgdnNNb3JwaCxcbiAgICBmcmFtZVN0YXRlLnNjZW5lM0RPbmx5XG4gICk7XG5cbiAgLy8gQWNjZXNzIHBpY2sgY29sb3IgZnJvbSBmcmFnbWVudCBzaGFkZXIuXG4gIC8vIEhlbHBzIHdpdGggdmFyeWluZyBidWRnZXQuXG4gIHZhciBmcyA9IHByaW1pdGl2ZS5fYmF0Y2hUYWJsZS5nZXRWZXJ0ZXhTaGFkZXJDYWxsYmFjaygpKFxuICAgIFBvbHlsaW5lU2hhZG93Vm9sdW1lRlNcbiAgKTtcblxuICB2YXIgdnNEZWZpbmVzID0gW1xuICAgIFwiR0xPQkVfTUlOSU1VTV9BTFRJVFVERSBcIiArXG4gICAgICBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb24uZWxsaXBzb2lkLm1pbmltdW1SYWRpdXMudG9GaXhlZCgxKSxcbiAgXTtcbiAgdmFyIGNvbG9yRGVmaW5lID0gXCJcIjtcbiAgdmFyIG1hdGVyaWFsU2hhZGVyU291cmNlID0gXCJcIjtcbiAgaWYgKGRlZmluZWQoYXBwZWFyYW5jZS5tYXRlcmlhbCkpIHtcbiAgICBtYXRlcmlhbFNoYWRlclNvdXJjZSA9IGRlZmluZWQoYXBwZWFyYW5jZS5tYXRlcmlhbClcbiAgICAgID8gYXBwZWFyYW5jZS5tYXRlcmlhbC5zaGFkZXJTb3VyY2VcbiAgICAgIDogXCJcIjtcblxuICAgIC8vIENoZWNrIGZvciB1c2Ugb2Ygdl93aWR0aCBhbmQgdl9wb2x5bGluZUFuZ2xlIGluIG1hdGVyaWFsIHNoYWRlclxuICAgIC8vIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZXNlIHZhcnlpbmdzIHNob3VsZCBiZSBhY3RpdmUgaW4gdGhlIHZlcnRleCBzaGFkZXIuXG4gICAgaWYgKFxuICAgICAgbWF0ZXJpYWxTaGFkZXJTb3VyY2Uuc2VhcmNoKC92YXJ5aW5nXFxzK2Zsb2F0XFxzK3ZfcG9seWxpbmVBbmdsZTsvZykgIT09IC0xXG4gICAgKSB7XG4gICAgICB2c0RlZmluZXMucHVzaChcIkFOR0xFX1ZBUllJTkdcIik7XG4gICAgfVxuICAgIGlmIChtYXRlcmlhbFNoYWRlclNvdXJjZS5zZWFyY2goL3ZhcnlpbmdcXHMrZmxvYXRcXHMrdl93aWR0aDsvZykgIT09IC0xKSB7XG4gICAgICB2c0RlZmluZXMucHVzaChcIldJRFRIX1ZBUllJTkdcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbG9yRGVmaW5lID0gXCJQRVJfSU5TVEFOQ0VfQ09MT1JcIjtcbiAgfVxuXG4gIHZzRGVmaW5lcy5wdXNoKGNvbG9yRGVmaW5lKTtcbiAgdmFyIGZzRGVmaW5lcyA9IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLmRlYnVnU2hvd1NoYWRvd1ZvbHVtZVxuICAgID8gW1wiREVCVUdfU0hPV19WT0xVTUVcIiwgY29sb3JEZWZpbmVdXG4gICAgOiBbY29sb3JEZWZpbmVdO1xuXG4gIHZhciB2c0NvbG9yM0QgPSBuZXcgU2hhZGVyU291cmNlKHtcbiAgICBkZWZpbmVzOiB2c0RlZmluZXMsXG4gICAgc291cmNlczogW3ZzXSxcbiAgfSk7XG4gIHZhciBmc0NvbG9yM0QgPSBuZXcgU2hhZGVyU291cmNlKHtcbiAgICBkZWZpbmVzOiBmc0RlZmluZXMsXG4gICAgc291cmNlczogW21hdGVyaWFsU2hhZGVyU291cmNlLCBmc10sXG4gIH0pO1xuICBncm91bmRQb2x5bGluZVByaW1pdGl2ZS5fc3AgPSBTaGFkZXJQcm9ncmFtLnJlcGxhY2VDYWNoZSh7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICBzaGFkZXJQcm9ncmFtOiBwcmltaXRpdmUuX3NwLFxuICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnNDb2xvcjNELFxuICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBmc0NvbG9yM0QsXG4gICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gIH0pO1xuXG4gIC8vIERlcml2ZSAyRC9DVlxuICB2YXIgY29sb3JQcm9ncmFtMkQgPSBjb250ZXh0LnNoYWRlckNhY2hlLmdldERlcml2ZWRTaGFkZXJQcm9ncmFtKFxuICAgIGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9zcCxcbiAgICBcIjJkQ29sb3JcIlxuICApO1xuICBpZiAoIWRlZmluZWQoY29sb3JQcm9ncmFtMkQpKSB7XG4gICAgdmFyIHZzQ29sb3IyRCA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgZGVmaW5lczogdnNEZWZpbmVzLmNvbmNhdChbXCJDT0xVTUJVU19WSUVXXzJEXCJdKSxcbiAgICAgIHNvdXJjZXM6IFt2c10sXG4gICAgfSk7XG4gICAgY29sb3JQcm9ncmFtMkQgPSBjb250ZXh0LnNoYWRlckNhY2hlLmNyZWF0ZURlcml2ZWRTaGFkZXJQcm9ncmFtKFxuICAgICAgZ3JvdW5kUG9seWxpbmVQcmltaXRpdmUuX3NwLFxuICAgICAgXCIyZENvbG9yXCIsXG4gICAgICB7XG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIHNoYWRlclByb2dyYW06IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9zcDJELFxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2U6IHZzQ29sb3IyRCxcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IGZzQ29sb3IzRCxcbiAgICAgICAgYXR0cmlidXRlTG9jYXRpb25zOiBhdHRyaWJ1dGVMb2NhdGlvbnMsXG4gICAgICB9XG4gICAgKTtcbiAgfVxuICBncm91bmRQb2x5bGluZVByaW1pdGl2ZS5fc3AyRCA9IGNvbG9yUHJvZ3JhbTJEO1xuXG4gIC8vIERlcml2ZSBNb3JwaFxuICB2YXIgY29sb3JQcm9ncmFtTW9ycGggPSBjb250ZXh0LnNoYWRlckNhY2hlLmdldERlcml2ZWRTaGFkZXJQcm9ncmFtKFxuICAgIGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9zcCxcbiAgICBcIk1vcnBoQ29sb3JcIlxuICApO1xuICBpZiAoIWRlZmluZWQoY29sb3JQcm9ncmFtTW9ycGgpKSB7XG4gICAgdmFyIHZzQ29sb3JNb3JwaCA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xuICAgICAgZGVmaW5lczogdnNEZWZpbmVzLmNvbmNhdChbXG4gICAgICAgIFwiTUFYX1RFUlJBSU5fSEVJR0hUIFwiICtcbiAgICAgICAgICBBcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLl9kZWZhdWx0TWF4VGVycmFpbkhlaWdodC50b0ZpeGVkKDEpLFxuICAgICAgXSksXG4gICAgICBzb3VyY2VzOiBbdnNNb3JwaF0sXG4gICAgfSk7XG5cbiAgICBmcyA9IHByaW1pdGl2ZS5fYmF0Y2hUYWJsZS5nZXRWZXJ0ZXhTaGFkZXJDYWxsYmFjaygpKFxuICAgICAgUG9seWxpbmVTaGFkb3dWb2x1bWVNb3JwaEZTXG4gICAgKTtcbiAgICB2YXIgZnNDb2xvck1vcnBoID0gbmV3IFNoYWRlclNvdXJjZSh7XG4gICAgICBkZWZpbmVzOiBmc0RlZmluZXMsXG4gICAgICBzb3VyY2VzOiBbbWF0ZXJpYWxTaGFkZXJTb3VyY2UsIGZzXSxcbiAgICB9KTtcbiAgICBjb2xvclByb2dyYW1Nb3JwaCA9IGNvbnRleHQuc2hhZGVyQ2FjaGUuY3JlYXRlRGVyaXZlZFNoYWRlclByb2dyYW0oXG4gICAgICBncm91bmRQb2x5bGluZVByaW1pdGl2ZS5fc3AsXG4gICAgICBcIk1vcnBoQ29sb3JcIixcbiAgICAgIHtcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgc2hhZGVyUHJvZ3JhbTogZ3JvdW5kUG9seWxpbmVQcmltaXRpdmUuX3NwTW9ycGgsXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnNDb2xvck1vcnBoLFxuICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnNDb2xvck1vcnBoLFxuICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9zcE1vcnBoID0gY29sb3JQcm9ncmFtTW9ycGg7XG59XG5cbmZ1bmN0aW9uIGdldFJlbmRlclN0YXRlKG1hc2szRFRpbGVzKSB7XG4gIHJldHVybiBSZW5kZXJTdGF0ZS5mcm9tQ2FjaGUoe1xuICAgIGN1bGw6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsIC8vIHByZXZlbnQgZG91YmxlLWRyYXcuIEdlb21ldHJ5IGlzIFwiaW52ZXJ0ZWRcIiAocmV2ZXJzZWQgd2luZGluZyBvcmRlcikgc28gd2UncmUgZHJhd2luZyBiYWNrZmFjZXMuXG4gICAgfSxcbiAgICBibGVuZGluZzogQmxlbmRpbmdTdGF0ZS5QUkVfTVVMVElQTElFRF9BTFBIQV9CTEVORCxcbiAgICBkZXB0aE1hc2s6IGZhbHNlLFxuICAgIHN0ZW5jaWxUZXN0OiB7XG4gICAgICBlbmFibGVkOiBtYXNrM0RUaWxlcyxcbiAgICAgIGZyb250RnVuY3Rpb246IFN0ZW5jaWxGdW5jdGlvbi5FUVVBTCxcbiAgICAgIGZyb250T3BlcmF0aW9uOiB7XG4gICAgICAgIGZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uS0VFUCxcbiAgICAgICAgekZhaWw6IFN0ZW5jaWxPcGVyYXRpb24uS0VFUCxcbiAgICAgICAgelBhc3M6IFN0ZW5jaWxPcGVyYXRpb24uS0VFUCxcbiAgICAgIH0sXG4gICAgICBiYWNrRnVuY3Rpb246IFN0ZW5jaWxGdW5jdGlvbi5FUVVBTCxcbiAgICAgIGJhY2tPcGVyYXRpb246IHtcbiAgICAgICAgZmFpbDogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgICB6RmFpbDogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgICB6UGFzczogU3RlbmNpbE9wZXJhdGlvbi5LRUVQLFxuICAgICAgfSxcbiAgICAgIHJlZmVyZW5jZTogU3RlbmNpbENvbnN0YW50cy5DRVNJVU1fM0RfVElMRV9NQVNLLFxuICAgICAgbWFzazogU3RlbmNpbENvbnN0YW50cy5DRVNJVU1fM0RfVElMRV9NQVNLLFxuICAgIH0sXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21tYW5kcyhcbiAgZ3JvdW5kUG9seWxpbmVQcmltaXRpdmUsXG4gIGFwcGVhcmFuY2UsXG4gIG1hdGVyaWFsLFxuICB0cmFuc2x1Y2VudCxcbiAgY29sb3JDb21tYW5kcyxcbiAgcGlja0NvbW1hbmRzXG4pIHtcbiAgdmFyIHByaW1pdGl2ZSA9IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9wcmltaXRpdmU7XG4gIHZhciBsZW5ndGggPSBwcmltaXRpdmUuX3ZhLmxlbmd0aDtcbiAgY29sb3JDb21tYW5kcy5sZW5ndGggPSBsZW5ndGg7XG4gIHBpY2tDb21tYW5kcy5sZW5ndGggPSBsZW5ndGg7XG5cbiAgdmFyIGlzUG9seWxpbmVDb2xvckFwcGVhcmFuY2UgPSBhcHBlYXJhbmNlIGluc3RhbmNlb2YgUG9seWxpbmVDb2xvckFwcGVhcmFuY2U7XG5cbiAgdmFyIG1hdGVyaWFsVW5pZm9ybXMgPSBpc1BvbHlsaW5lQ29sb3JBcHBlYXJhbmNlID8ge30gOiBtYXRlcmlhbC5fdW5pZm9ybXM7XG4gIHZhciB1bmlmb3JtTWFwID0gcHJpbWl0aXZlLl9iYXRjaFRhYmxlLmdldFVuaWZvcm1NYXBDYWxsYmFjaygpKFxuICAgIG1hdGVyaWFsVW5pZm9ybXNcbiAgKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHZlcnRleEFycmF5ID0gcHJpbWl0aXZlLl92YVtpXTtcblxuICAgIHZhciBjb21tYW5kID0gY29sb3JDb21tYW5kc1tpXTtcbiAgICBpZiAoIWRlZmluZWQoY29tbWFuZCkpIHtcbiAgICAgIGNvbW1hbmQgPSBjb2xvckNvbW1hbmRzW2ldID0gbmV3IERyYXdDb21tYW5kKHtcbiAgICAgICAgb3duZXI6IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLFxuICAgICAgICBwcmltaXRpdmVUeXBlOiBwcmltaXRpdmUuX3ByaW1pdGl2ZVR5cGUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21tYW5kLnZlcnRleEFycmF5ID0gdmVydGV4QXJyYXk7XG4gICAgY29tbWFuZC5yZW5kZXJTdGF0ZSA9IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9yZW5kZXJTdGF0ZTtcbiAgICBjb21tYW5kLnNoYWRlclByb2dyYW0gPSBncm91bmRQb2x5bGluZVByaW1pdGl2ZS5fc3A7XG4gICAgY29tbWFuZC51bmlmb3JtTWFwID0gdW5pZm9ybU1hcDtcbiAgICBjb21tYW5kLnBhc3MgPSBQYXNzLlRFUlJBSU5fQ0xBU1NJRklDQVRJT047XG4gICAgY29tbWFuZC5waWNrSWQgPSBcImN6bV9iYXRjaFRhYmxlX3BpY2tDb2xvcih2X2VuZFBsYW5lTm9ybWFsRWNBbmRCYXRjaElkLncpXCI7XG5cbiAgICB2YXIgZGVyaXZlZFRpbGVzZXRDb21tYW5kID0gRHJhd0NvbW1hbmQuc2hhbGxvd0Nsb25lKFxuICAgICAgY29tbWFuZCxcbiAgICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLnRpbGVzZXRcbiAgICApO1xuICAgIGRlcml2ZWRUaWxlc2V0Q29tbWFuZC5yZW5kZXJTdGF0ZSA9XG4gICAgICBncm91bmRQb2x5bGluZVByaW1pdGl2ZS5fcmVuZGVyU3RhdGUzRFRpbGVzO1xuICAgIGRlcml2ZWRUaWxlc2V0Q29tbWFuZC5wYXNzID0gUGFzcy5DRVNJVU1fM0RfVElMRV9DTEFTU0lGSUNBVElPTjtcbiAgICBjb21tYW5kLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0ID0gZGVyaXZlZFRpbGVzZXRDb21tYW5kO1xuXG4gICAgLy8gZGVyaXZlIGZvciAyRFxuICAgIHZhciBkZXJpdmVkMkRDb21tYW5kID0gRHJhd0NvbW1hbmQuc2hhbGxvd0Nsb25lKFxuICAgICAgY29tbWFuZCxcbiAgICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLmNvbG9yMkRcbiAgICApO1xuICAgIGRlcml2ZWQyRENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9zcDJEO1xuICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLmNvbG9yMkQgPSBkZXJpdmVkMkRDb21tYW5kO1xuXG4gICAgdmFyIGRlcml2ZWQyRFRpbGVzZXRDb21tYW5kID0gRHJhd0NvbW1hbmQuc2hhbGxvd0Nsb25lKFxuICAgICAgZGVyaXZlZFRpbGVzZXRDb21tYW5kLFxuICAgICAgZGVyaXZlZFRpbGVzZXRDb21tYW5kLmRlcml2ZWRDb21tYW5kcy5jb2xvcjJEXG4gICAgKTtcbiAgICBkZXJpdmVkMkRUaWxlc2V0Q29tbWFuZC5zaGFkZXJQcm9ncmFtID0gZ3JvdW5kUG9seWxpbmVQcmltaXRpdmUuX3NwMkQ7XG4gICAgZGVyaXZlZFRpbGVzZXRDb21tYW5kLmRlcml2ZWRDb21tYW5kcy5jb2xvcjJEID0gZGVyaXZlZDJEVGlsZXNldENvbW1hbmQ7XG5cbiAgICAvLyBkZXJpdmUgZm9yIE1vcnBoXG4gICAgdmFyIGRlcml2ZWRNb3JwaENvbW1hbmQgPSBEcmF3Q29tbWFuZC5zaGFsbG93Q2xvbmUoXG4gICAgICBjb21tYW5kLFxuICAgICAgY29tbWFuZC5kZXJpdmVkQ29tbWFuZHMuY29sb3JNb3JwaFxuICAgICk7XG4gICAgZGVyaXZlZE1vcnBoQ29tbWFuZC5yZW5kZXJTdGF0ZSA9IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9yZW5kZXJTdGF0ZU1vcnBoO1xuICAgIGRlcml2ZWRNb3JwaENvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9IGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLl9zcE1vcnBoO1xuICAgIGRlcml2ZWRNb3JwaENvbW1hbmQucGlja0lkID0gXCJjem1fYmF0Y2hUYWJsZV9waWNrQ29sb3Iodl9iYXRjaElkKVwiO1xuICAgIGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLmNvbG9yTW9ycGggPSBkZXJpdmVkTW9ycGhDb21tYW5kO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUFuZFF1ZXVlQ29tbWFuZChcbiAgZ3JvdW5kUG9seWxpbmVQcmltaXRpdmUsXG4gIGNvbW1hbmQsXG4gIGZyYW1lU3RhdGUsXG4gIG1vZGVsTWF0cml4LFxuICBjdWxsLFxuICBib3VuZGluZ1ZvbHVtZSxcbiAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWVcbikge1xuICAvLyBVc2UgZGVyaXZlZCBhcHBlYXJhbmNlIGNvbW1hbmQgZm9yIG1vcnBoIGFuZCAyRFxuICBpZiAoZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuTU9SUEhJTkcpIHtcbiAgICBjb21tYW5kID0gY29tbWFuZC5kZXJpdmVkQ29tbWFuZHMuY29sb3JNb3JwaDtcbiAgfSBlbHNlIGlmIChmcmFtZVN0YXRlLm1vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgY29tbWFuZCA9IGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLmNvbG9yMkQ7XG4gIH1cbiAgY29tbWFuZC5tb2RlbE1hdHJpeCA9IG1vZGVsTWF0cml4O1xuICBjb21tYW5kLmJvdW5kaW5nVm9sdW1lID0gYm91bmRpbmdWb2x1bWU7XG4gIGNvbW1hbmQuY3VsbCA9IGN1bGw7XG4gIGNvbW1hbmQuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZTtcblxuICBmcmFtZVN0YXRlLmNvbW1hbmRMaXN0LnB1c2goY29tbWFuZCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUFuZFF1ZXVlQ29tbWFuZHMoXG4gIGdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLFxuICBmcmFtZVN0YXRlLFxuICBjb2xvckNvbW1hbmRzLFxuICBwaWNrQ29tbWFuZHMsXG4gIG1vZGVsTWF0cml4LFxuICBjdWxsLFxuICBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZVxuKSB7XG4gIHZhciBwcmltaXRpdmUgPSBncm91bmRQb2x5bGluZVByaW1pdGl2ZS5fcHJpbWl0aXZlO1xuXG4gIFByaW1pdGl2ZS5fdXBkYXRlQm91bmRpbmdWb2x1bWVzKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSwgbW9kZWxNYXRyaXgpOyAvLyBFeHBlY3RlZCB0byBiZSBpZGVudGl0eSAtIEdyb3VuZFByaW1pdGl2ZXMgZG9uJ3Qgc3VwcG9ydCBvdGhlciBtb2RlbCBtYXRyaWNlc1xuXG4gIHZhciBib3VuZGluZ1NwaGVyZXM7XG4gIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgYm91bmRpbmdTcGhlcmVzID0gcHJpbWl0aXZlLl9ib3VuZGluZ1NwaGVyZVdDO1xuICB9IGVsc2UgaWYgKGZyYW1lU3RhdGUubW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcpIHtcbiAgICBib3VuZGluZ1NwaGVyZXMgPSBwcmltaXRpdmUuX2JvdW5kaW5nU3BoZXJlQ1Y7XG4gIH0gZWxzZSBpZiAoXG4gICAgZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCAmJlxuICAgIGRlZmluZWQocHJpbWl0aXZlLl9ib3VuZGluZ1NwaGVyZTJEKVxuICApIHtcbiAgICBib3VuZGluZ1NwaGVyZXMgPSBwcmltaXRpdmUuX2JvdW5kaW5nU3BoZXJlMkQ7XG4gIH0gZWxzZSBpZiAoZGVmaW5lZChwcmltaXRpdmUuX2JvdW5kaW5nU3BoZXJlTW9ycGgpKSB7XG4gICAgYm91bmRpbmdTcGhlcmVzID0gcHJpbWl0aXZlLl9ib3VuZGluZ1NwaGVyZU1vcnBoO1xuICB9XG5cbiAgdmFyIG1vcnBoaW5nID0gZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuTU9SUEhJTkc7XG4gIHZhciBjbGFzc2lmaWNhdGlvblR5cGUgPSBncm91bmRQb2x5bGluZVByaW1pdGl2ZS5jbGFzc2lmaWNhdGlvblR5cGU7XG4gIHZhciBxdWV1ZVRlcnJhaW5Db21tYW5kcyA9XG4gICAgY2xhc3NpZmljYXRpb25UeXBlICE9PSBDbGFzc2lmaWNhdGlvblR5cGUuQ0VTSVVNXzNEX1RJTEU7XG4gIHZhciBxdWV1ZTNEVGlsZXNDb21tYW5kcyA9XG4gICAgY2xhc3NpZmljYXRpb25UeXBlICE9PSBDbGFzc2lmaWNhdGlvblR5cGUuVEVSUkFJTiAmJiAhbW9ycGhpbmc7XG5cbiAgdmFyIGNvbW1hbmQ7XG4gIHZhciBwYXNzZXMgPSBmcmFtZVN0YXRlLnBhc3NlcztcbiAgaWYgKHBhc3Nlcy5yZW5kZXIgfHwgKHBhc3Nlcy5waWNrICYmIHByaW1pdGl2ZS5hbGxvd1BpY2tpbmcpKSB7XG4gICAgdmFyIGNvbG9yTGVuZ3RoID0gY29sb3JDb21tYW5kcy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb2xvckxlbmd0aDsgKytqKSB7XG4gICAgICB2YXIgYm91bmRpbmdWb2x1bWUgPSBib3VuZGluZ1NwaGVyZXNbal07XG4gICAgICBpZiAocXVldWVUZXJyYWluQ29tbWFuZHMpIHtcbiAgICAgICAgY29tbWFuZCA9IGNvbG9yQ29tbWFuZHNbal07XG4gICAgICAgIHVwZGF0ZUFuZFF1ZXVlQ29tbWFuZChcbiAgICAgICAgICBncm91bmRQb2x5bGluZVByaW1pdGl2ZSxcbiAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgICAgY3VsbCxcbiAgICAgICAgICBib3VuZGluZ1ZvbHVtZSxcbiAgICAgICAgICBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXVlM0RUaWxlc0NvbW1hbmRzKSB7XG4gICAgICAgIGNvbW1hbmQgPSBjb2xvckNvbW1hbmRzW2pdLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0O1xuICAgICAgICB1cGRhdGVBbmRRdWV1ZUNvbW1hbmQoXG4gICAgICAgICAgZ3JvdW5kUG9seWxpbmVQcmltaXRpdmUsXG4gICAgICAgICAgY29tbWFuZCxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICAgIGN1bGwsXG4gICAgICAgICAgYm91bmRpbmdWb2x1bWUsXG4gICAgICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsZWQgd2hlbiB7QGxpbmsgVmlld2VyfSBvciB7QGxpbmsgQ2VzaXVtV2lkZ2V0fSByZW5kZXIgdGhlIHNjZW5lIHRvXG4gKiBnZXQgdGhlIGRyYXcgY29tbWFuZHMgbmVlZGVkIHRvIHJlbmRlciB0aGlzIHByaW1pdGl2ZS5cbiAqIDxwPlxuICogRG8gbm90IGNhbGwgdGhpcyBmdW5jdGlvbiBkaXJlY3RseS4gIFRoaXMgaXMgZG9jdW1lbnRlZCBqdXN0IHRvXG4gKiBsaXN0IHRoZSBleGNlcHRpb25zIHRoYXQgbWF5IGJlIHByb3BhZ2F0ZWQgd2hlbiB0aGUgc2NlbmUgaXMgcmVuZGVyZWQ6XG4gKiA8L3A+XG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEZvciBzeW5jaHJvbm91cyBHcm91bmRQb2x5bGluZVByaW1pdGl2ZXMsIHlvdSBtdXN0IGNhbGwgR3JvdW5kUG9seWxpbmVQcmltaXRpdmVzLmluaXRpYWxpemVUZXJyYWluSGVpZ2h0cygpIGFuZCB3YWl0IGZvciB0aGUgcmV0dXJuZWQgcHJvbWlzZSB0byByZXNvbHZlLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IEFsbCBHZW9tZXRyeUluc3RhbmNlcyBtdXN0IGhhdmUgY29sb3IgYXR0cmlidXRlcyB0byB1c2UgUG9seWxpbmVDb2xvckFwcGVhcmFuY2Ugd2l0aCBHcm91bmRQb2x5bGluZVByaW1pdGl2ZS5cbiAqL1xuR3JvdW5kUG9seWxpbmVQcmltaXRpdmUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gIGlmICghZGVmaW5lZCh0aGlzLl9wcmltaXRpdmUpICYmICFkZWZpbmVkKHRoaXMuZ2VvbWV0cnlJbnN0YW5jZXMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFBcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLmluaXRpYWxpemVkKSB7XG4gICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICBpZiAoIXRoaXMuYXN5bmNocm9ub3VzKSB7XG4gICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgIFwiRm9yIHN5bmNocm9ub3VzIEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlcywgeW91IG11c3QgY2FsbCBHcm91bmRQb2x5bGluZVByaW1pdGl2ZXMuaW5pdGlhbGl6ZVRlcnJhaW5IZWlnaHRzKCkgYW5kIHdhaXQgZm9yIHRoZSByZXR1cm5lZCBwcm9taXNlIHRvIHJlc29sdmUuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgR3JvdW5kUG9seWxpbmVQcmltaXRpdmUuaW5pdGlhbGl6ZVRlcnJhaW5IZWlnaHRzKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGk7XG5cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB2YXIgcHJpbWl0aXZlT3B0aW9ucyA9IHRoaXMuX3ByaW1pdGl2ZU9wdGlvbnM7XG4gIGlmICghZGVmaW5lZCh0aGlzLl9wcmltaXRpdmUpKSB7XG4gICAgdmFyIGdlb21ldHJ5SW5zdGFuY2VzID0gQXJyYXkuaXNBcnJheSh0aGlzLmdlb21ldHJ5SW5zdGFuY2VzKVxuICAgICAgPyB0aGlzLmdlb21ldHJ5SW5zdGFuY2VzXG4gICAgICA6IFt0aGlzLmdlb21ldHJ5SW5zdGFuY2VzXTtcbiAgICB2YXIgZ2VvbWV0cnlJbnN0YW5jZXNMZW5ndGggPSBnZW9tZXRyeUluc3RhbmNlcy5sZW5ndGg7XG4gICAgdmFyIGdyb3VuZEluc3RhbmNlcyA9IG5ldyBBcnJheShnZW9tZXRyeUluc3RhbmNlc0xlbmd0aCk7XG5cbiAgICB2YXIgYXR0cmlidXRlcztcblxuICAgIC8vIENoZWNrIGlmIGVhY2ggaW5zdGFuY2UgaGFzIGEgY29sb3IgYXR0cmlidXRlLlxuICAgIGZvciAoaSA9IDA7IGkgPCBnZW9tZXRyeUluc3RhbmNlc0xlbmd0aDsgKytpKSB7XG4gICAgICBhdHRyaWJ1dGVzID0gZ2VvbWV0cnlJbnN0YW5jZXNbaV0uYXR0cmlidXRlcztcbiAgICAgIGlmICghZGVmaW5lZChhdHRyaWJ1dGVzKSB8fCAhZGVmaW5lZChhdHRyaWJ1dGVzLmNvbG9yKSkge1xuICAgICAgICB0aGlzLl9oYXNQZXJJbnN0YW5jZUNvbG9ycyA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZ2VvbWV0cnlJbnN0YW5jZXNMZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGdlb21ldHJ5SW5zdGFuY2UgPSBnZW9tZXRyeUluc3RhbmNlc1tpXTtcbiAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIHZhciBpbnN0YW5jZUF0dHJpYnV0ZXMgPSBnZW9tZXRyeUluc3RhbmNlLmF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKHZhciBhdHRyaWJ1dGVLZXkgaW4gaW5zdGFuY2VBdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZUF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlS2V5KSkge1xuICAgICAgICAgIGF0dHJpYnV0ZXNbYXR0cmlidXRlS2V5XSA9IGluc3RhbmNlQXR0cmlidXRlc1thdHRyaWJ1dGVLZXldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY3JlYXRlIGxpbmUgd2lkdGggYXR0cmlidXRlIGlmIG5vdCBhbHJlYWR5IGdpdmVuXG4gICAgICBpZiAoIWRlZmluZWQoYXR0cmlidXRlcy53aWR0aCkpIHtcbiAgICAgICAgYXR0cmlidXRlcy53aWR0aCA9IG5ldyBHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlKHtcbiAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfQllURSxcbiAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAxLjAsXG4gICAgICAgICAgdmFsdWU6IFtnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5LndpZHRoXSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBlYWNoIGdlb21ldHJ5IGZvciBmcmFtZXN0YXRlLnNjZW5lM0RPbmx5ID0gdHJ1ZSBhbmQgcHJvamVjdGlvblxuICAgICAgZ2VvbWV0cnlJbnN0YW5jZS5nZW9tZXRyeS5fc2NlbmUzRE9ubHkgPSBmcmFtZVN0YXRlLnNjZW5lM0RPbmx5O1xuICAgICAgR3JvdW5kUG9seWxpbmVHZW9tZXRyeS5zZXRQcm9qZWN0aW9uQW5kRWxsaXBzb2lkKFxuICAgICAgICBnZW9tZXRyeUluc3RhbmNlLmdlb21ldHJ5LFxuICAgICAgICBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb25cbiAgICAgICk7XG5cbiAgICAgIGdyb3VuZEluc3RhbmNlc1tpXSA9IG5ldyBHZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5SW5zdGFuY2UuZ2VvbWV0cnksXG4gICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgIGlkOiBnZW9tZXRyeUluc3RhbmNlLmlkLFxuICAgICAgICBwaWNrUHJpbWl0aXZlOiB0aGF0LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpbWl0aXZlT3B0aW9ucy5nZW9tZXRyeUluc3RhbmNlcyA9IGdyb3VuZEluc3RhbmNlcztcbiAgICBwcmltaXRpdmVPcHRpb25zLmFwcGVhcmFuY2UgPSB0aGlzLmFwcGVhcmFuY2U7XG5cbiAgICBwcmltaXRpdmVPcHRpb25zLl9jcmVhdGVTaGFkZXJQcm9ncmFtRnVuY3Rpb24gPSBmdW5jdGlvbiAoXG4gICAgICBwcmltaXRpdmUsXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgYXBwZWFyYW5jZVxuICAgICkge1xuICAgICAgY3JlYXRlU2hhZGVyUHJvZ3JhbSh0aGF0LCBmcmFtZVN0YXRlLCBhcHBlYXJhbmNlKTtcbiAgICB9O1xuICAgIHByaW1pdGl2ZU9wdGlvbnMuX2NyZWF0ZUNvbW1hbmRzRnVuY3Rpb24gPSBmdW5jdGlvbiAoXG4gICAgICBwcmltaXRpdmUsXG4gICAgICBhcHBlYXJhbmNlLFxuICAgICAgbWF0ZXJpYWwsXG4gICAgICB0cmFuc2x1Y2VudCxcbiAgICAgIHR3b1Bhc3NlcyxcbiAgICAgIGNvbG9yQ29tbWFuZHMsXG4gICAgICBwaWNrQ29tbWFuZHNcbiAgICApIHtcbiAgICAgIGNyZWF0ZUNvbW1hbmRzKFxuICAgICAgICB0aGF0LFxuICAgICAgICBhcHBlYXJhbmNlLFxuICAgICAgICBtYXRlcmlhbCxcbiAgICAgICAgdHJhbnNsdWNlbnQsXG4gICAgICAgIGNvbG9yQ29tbWFuZHMsXG4gICAgICAgIHBpY2tDb21tYW5kc1xuICAgICAgKTtcbiAgICB9O1xuICAgIHByaW1pdGl2ZU9wdGlvbnMuX3VwZGF0ZUFuZFF1ZXVlQ29tbWFuZHNGdW5jdGlvbiA9IGZ1bmN0aW9uIChcbiAgICAgIHByaW1pdGl2ZSxcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICBjb2xvckNvbW1hbmRzLFxuICAgICAgcGlja0NvbW1hbmRzLFxuICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICBjdWxsLFxuICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gICAgICB0d29QYXNzZXNcbiAgICApIHtcbiAgICAgIHVwZGF0ZUFuZFF1ZXVlQ29tbWFuZHMoXG4gICAgICAgIHRoYXQsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIGNvbG9yQ29tbWFuZHMsXG4gICAgICAgIHBpY2tDb21tYW5kcyxcbiAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgIGN1bGwsXG4gICAgICAgIGRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lXG4gICAgICApO1xuICAgIH07XG5cbiAgICB0aGlzLl9wcmltaXRpdmUgPSBuZXcgUHJpbWl0aXZlKHByaW1pdGl2ZU9wdGlvbnMpO1xuICAgIHRoaXMuX3ByaW1pdGl2ZS5yZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAocHJpbWl0aXZlKSB7XG4gICAgICB0aGF0Ll9yZWFkeSA9IHRydWU7XG5cbiAgICAgIGlmICh0aGF0LnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlcykge1xuICAgICAgICB0aGF0Lmdlb21ldHJ5SW5zdGFuY2VzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXJyb3IgPSBwcmltaXRpdmUuX2Vycm9yO1xuICAgICAgaWYgKCFkZWZpbmVkKGVycm9yKSkge1xuICAgICAgICB0aGF0Ll9yZWFkeVByb21pc2UucmVzb2x2ZSh0aGF0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoYXQuX3JlYWR5UHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKFxuICAgIHRoaXMuYXBwZWFyYW5jZSBpbnN0YW5jZW9mIFBvbHlsaW5lQ29sb3JBcHBlYXJhbmNlICYmXG4gICAgIXRoaXMuX2hhc1Blckluc3RhbmNlQ29sb3JzXG4gICkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiQWxsIEdlb21ldHJ5SW5zdGFuY2VzIG11c3QgaGF2ZSBjb2xvciBhdHRyaWJ1dGVzIHRvIHVzZSBQb2x5bGluZUNvbG9yQXBwZWFyYW5jZSB3aXRoIEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLlwiXG4gICAgKTtcbiAgfVxuXG4gIHRoaXMuX3ByaW1pdGl2ZS5hcHBlYXJhbmNlID0gdGhpcy5hcHBlYXJhbmNlO1xuICB0aGlzLl9wcmltaXRpdmUuc2hvdyA9IHRoaXMuc2hvdztcbiAgdGhpcy5fcHJpbWl0aXZlLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gdGhpcy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZTtcbiAgdGhpcy5fcHJpbWl0aXZlLnVwZGF0ZShmcmFtZVN0YXRlKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbW9kaWZpYWJsZSBwZXItaW5zdGFuY2UgYXR0cmlidXRlcyBmb3IgYSB7QGxpbmsgR2VvbWV0cnlJbnN0YW5jZX0uXG4gKlxuICogQHBhcmFtIHsqfSBpZCBUaGUgaWQgb2YgdGhlIHtAbGluayBHZW9tZXRyeUluc3RhbmNlfS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSB0eXBlZCBhcnJheSBpbiB0aGUgYXR0cmlidXRlJ3MgZm9ybWF0IG9yIHVuZGVmaW5lZCBpZiB0aGUgaXMgbm8gaW5zdGFuY2Ugd2l0aCBpZC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gbXVzdCBjYWxsIHVwZGF0ZSBiZWZvcmUgY2FsbGluZyBnZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMoJ2FuIGlkJyk7XG4gKiBhdHRyaWJ1dGVzLmNvbG9yID0gQ2VzaXVtLkNvbG9yR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKENlc2l1bS5Db2xvci5BUVVBKTtcbiAqIGF0dHJpYnV0ZXMuc2hvdyA9IENlc2l1bS5TaG93R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZS50b1ZhbHVlKHRydWUpO1xuICovXG5Hcm91bmRQb2x5bGluZVByaW1pdGl2ZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoXG4gIGlkXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3ByaW1pdGl2ZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIm11c3QgY2FsbCB1cGRhdGUgYmVmb3JlIGNhbGxpbmcgZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXNcIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gIHJldHVybiB0aGlzLl9wcmltaXRpdmUuZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMoaWQpO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIFNjZW5lIHN1cHBvcnRzIEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlcy5cbiAqIEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlcyByZXF1aXJlIHN1cHBvcnQgZm9yIHRoZSBXRUJHTF9kZXB0aF90ZXh0dXJlIGV4dGVuc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSBUaGUgY3VycmVudCBzY2VuZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgY3VycmVudCBzY2VuZSBzdXBwb3J0cyBHcm91bmRQb2x5bGluZVByaW1pdGl2ZXMuXG4gKi9cbkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24gKHNjZW5lKSB7XG4gIHJldHVybiBzY2VuZS5mcmFtZVN0YXRlLmNvbnRleHQuZGVwdGhUZXh0dXJlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxwPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqIDwvcD5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKlxuICogQHNlZSBHcm91bmRQb2x5bGluZVByaW1pdGl2ZSNkZXN0cm95XG4gKi9cbkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLnByb3RvdHlwZS5pc0Rlc3Ryb3llZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgV2ViR0wgcmVzb3VyY2VzIGhlbGQgYnkgdGhpcyBvYmplY3QuICBEZXN0cm95aW5nIGFuIG9iamVjdCBhbGxvd3MgZm9yIGRldGVybWluaXN0aWNcbiAqIHJlbGVhc2Ugb2YgV2ViR0wgcmVzb3VyY2VzLCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvIGRlc3Ryb3kgdGhpcyBvYmplY3QuXG4gKiA8cD5cbiAqIE9uY2UgYW4gb2JqZWN0IGlzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi4gIFRoZXJlZm9yZSxcbiAqIGFzc2lnbiB0aGUgcmV0dXJuIHZhbHVlICg8Y29kZT51bmRlZmluZWQ8L2NvZGU+KSB0byB0aGUgb2JqZWN0IGFzIGRvbmUgaW4gdGhlIGV4YW1wbGUuXG4gKiA8L3A+XG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBlID0gZSAmJiBlLmRlc3Ryb3koKTtcbiAqXG4gKiBAc2VlIEdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlI2lzRGVzdHJveWVkXG4gKi9cbkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9wcmltaXRpdmUgPSB0aGlzLl9wcmltaXRpdmUgJiYgdGhpcy5fcHJpbWl0aXZlLmRlc3Ryb3koKTtcbiAgdGhpcy5fc3AgPSB0aGlzLl9zcCAmJiB0aGlzLl9zcC5kZXN0cm95KCk7XG5cbiAgLy8gRGVyaXZlZCBwcm9ncmFtcywgZGVzdHJveWVkIGFib3ZlIGlmIHRoZXkgZXhpc3RlZC5cbiAgdGhpcy5fc3AyRCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3BNb3JwaCA9IHVuZGVmaW5lZDtcblxuICByZXR1cm4gZGVzdHJveU9iamVjdCh0aGlzKTtcbn07XG5leHBvcnQgZGVmYXVsdCBHcm91bmRQb2x5bGluZVByaW1pdGl2ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14978\n')},47780:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(53773);\n/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(51688);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12572);\n/* harmony import */ var _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(26865);\n/* harmony import */ var _Core_OrientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(25405);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(96190);\n/* harmony import */ var _Core_TerrainExaggeration_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(78257);\n/* harmony import */ var _ClassificationPrimitive_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(14662);\n/* harmony import */ var _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(73001);\n/* harmony import */ var _PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(64060);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(89917);\n/* harmony import */ var _ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(88472);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(13222);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar GroundPrimitiveUniformMap = {\n  u_globeMinimumAltitude: function () {\n    return 55000.0;\n  },\n};\n\n/**\n * A ground primitive represents geometry draped over terrain or 3D Tiles in the {@link Scene}.\n * <p>\n * A primitive combines geometry instances with an {@link Appearance} that describes the full shading, including\n * {@link Material} and {@link RenderState}.  Roughly, the geometry instance defines the structure and placement,\n * and the appearance defines the visual characteristics.  Decoupling geometry and appearance allows us to mix\n * and match most of them and add a new geometry or appearance independently of each other.\n * </p>\n * <p>\n * Support for the WEBGL_depth_texture extension is required to use GeometryInstances with different PerInstanceColors\n * or materials besides PerInstanceColorAppearance.\n * </p>\n * <p>\n * Textured GroundPrimitives were designed for notional patterns and are not meant for precisely mapping\n * textures to terrain - for that use case, use {@link SingleTileImageryProvider}.\n * </p>\n * <p>\n * For correct rendering, this feature requires the EXT_frag_depth WebGL extension. For hardware that do not support this extension, there\n * will be rendering artifacts for some viewing angles.\n * </p>\n * <p>\n * Valid geometries are {@link CircleGeometry}, {@link CorridorGeometry}, {@link EllipseGeometry}, {@link PolygonGeometry}, and {@link RectangleGeometry}.\n * </p>\n *\n * @alias GroundPrimitive\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Array|GeometryInstance} [options.geometryInstances] The geometry instances to render.\n * @param {Appearance} [options.appearance] The appearance used to render the primitive. Defaults to a flat PerInstanceColorAppearance when GeometryInstances have a color attribute.\n * @param {Boolean} [options.show=true] Determines if this primitive will be shown.\n * @param {Boolean} [options.vertexCacheOptimize=false] When <code>true</code>, geometry vertices are optimized for the pre and post-vertex-shader caches.\n * @param {Boolean} [options.interleave=false] When <code>true</code>, geometry vertex attributes are interleaved, which can slightly improve rendering performance but increases load time.\n * @param {Boolean} [options.compressVertices=true] When <code>true</code>, the geometry vertices are compressed, which will save memory.\n * @param {Boolean} [options.releaseGeometryInstances=true] When <code>true</code>, the primitive does not keep a reference to the input <code>geometryInstances</code> to save memory.\n * @param {Boolean} [options.allowPicking=true] When <code>true</code>, each geometry instance will only be pickable with {@link Scene#pick}.  When <code>false</code>, GPU memory is saved.\n * @param {Boolean} [options.asynchronous=true] Determines if the primitive will be created asynchronously or block until ready. If false initializeTerrainHeights() must be called first.\n * @param {ClassificationType} [options.classificationType=ClassificationType.BOTH] Determines whether terrain, 3D Tiles or both will be classified.\n * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Determines if this primitive\'s commands\' bounding spheres are shown.\n * @param {Boolean} [options.debugShowShadowVolume=false] For debugging only. Determines if the shadow volume for each geometry in the primitive is drawn. Must be <code>true</code> on\n *                  creation for the volumes to be created before the geometry is released or options.releaseGeometryInstance must be <code>false</code>.\n *\n * @example\n * // Example 1: Create primitive with a single instance\n * var rectangleInstance = new Cesium.GeometryInstance({\n *   geometry : new Cesium.RectangleGeometry({\n *     rectangle : Cesium.Rectangle.fromDegrees(-140.0, 30.0, -100.0, 40.0)\n *   }),\n *   id : \'rectangle\',\n *   attributes : {\n *     color : new Cesium.ColorGeometryInstanceAttribute(0.0, 1.0, 1.0, 0.5)\n *   }\n * });\n * scene.primitives.add(new Cesium.GroundPrimitive({\n *   geometryInstances : rectangleInstance\n * }));\n *\n * // Example 2: Batch instances\n * var color = new Cesium.ColorGeometryInstanceAttribute(0.0, 1.0, 1.0, 0.5); // Both instances must have the same color.\n * var rectangleInstance = new Cesium.GeometryInstance({\n *   geometry : new Cesium.RectangleGeometry({\n *     rectangle : Cesium.Rectangle.fromDegrees(-140.0, 30.0, -100.0, 40.0)\n *   }),\n *   id : \'rectangle\',\n *   attributes : {\n *     color : color\n *   }\n * });\n * var ellipseInstance = new Cesium.GeometryInstance({\n *     geometry : new Cesium.EllipseGeometry({\n *         center : Cesium.Cartesian3.fromDegrees(-105.0, 40.0),\n *         semiMinorAxis : 300000.0,\n *         semiMajorAxis : 400000.0\n *     }),\n *     id : \'ellipse\',\n *     attributes : {\n *         color : color\n *     }\n * });\n * scene.primitives.add(new Cesium.GroundPrimitive({\n *   geometryInstances : [rectangleInstance, ellipseInstance]\n * }));\n *\n * @see Primitive\n * @see ClassificationPrimitive\n * @see GeometryInstance\n * @see Appearance\n */\nfunction GroundPrimitive(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  var appearance = options.appearance;\n  var geometryInstances = options.geometryInstances;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(appearance) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(geometryInstances)) {\n    var geometryInstancesArray = Array.isArray(geometryInstances)\n      ? geometryInstances\n      : [geometryInstances];\n    var geometryInstanceCount = geometryInstancesArray.length;\n    for (var i = 0; i < geometryInstanceCount; i++) {\n      var attributes = geometryInstancesArray[i].attributes;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(attributes) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(attributes.color)) {\n        appearance = new _PerInstanceColorAppearance_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z({\n          flat: true,\n        });\n        break;\n      }\n    }\n  }\n  /**\n   * The {@link Appearance} used to shade this primitive. Each geometry\n   * instance is shaded with the same appearance.  Some appearances, like\n   * {@link PerInstanceColorAppearance} allow giving each instance unique\n   * properties.\n   *\n   * @type Appearance\n   *\n   * @default undefined\n   */\n  this.appearance = appearance;\n\n  /**\n   * The geometry instances rendered with this primitive.  This may\n   * be <code>undefined</code> if <code>options.releaseGeometryInstances</code>\n   * is <code>true</code> when the primitive is constructed.\n   * <p>\n   * Changing this property after the primitive is rendered has no effect.\n   * </p>\n   *\n   * @readonly\n   * @type {Array|GeometryInstance}\n   *\n   * @default undefined\n   */\n  this.geometryInstances = options.geometryInstances;\n  /**\n   * Determines if the primitive will be shown.  This affects all geometry\n   * instances in the primitive.\n   *\n   * @type {Boolean}\n   *\n   * @default true\n   */\n  this.show = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.show, true);\n  /**\n   * Determines whether terrain, 3D Tiles or both will be classified.\n   *\n   * @type {ClassificationType}\n   *\n   * @default ClassificationType.BOTH\n   */\n  this.classificationType = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.classificationType,\n    _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].BOTH */ .Z.BOTH\n  );\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the bounding sphere for each draw command in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowBoundingVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.debugShowBoundingVolume,\n    false\n  );\n\n  /**\n   * This property is for debugging only; it is not for production use nor is it optimized.\n   * <p>\n   * Draws the shadow volume for each geometry in the primitive.\n   * </p>\n   *\n   * @type {Boolean}\n   *\n   * @default false\n   */\n  this.debugShowShadowVolume = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.debugShowShadowVolume,\n    false\n  );\n\n  this._boundingVolumes = [];\n  this._boundingVolumes2D = [];\n\n  this._ready = false;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].defer */ .Z.defer();\n\n  this._primitive = undefined;\n\n  this._maxHeight = undefined;\n  this._minHeight = undefined;\n\n  this._maxTerrainHeight = _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"]._defaultMaxTerrainHeight */ .Z._defaultMaxTerrainHeight;\n  this._minTerrainHeight = _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"]._defaultMinTerrainHeight */ .Z._defaultMinTerrainHeight;\n\n  this._boundingSpheresKeys = [];\n  this._boundingSpheres = [];\n\n  this._useFragmentCulling = false;\n  // Used when inserting in an OrderedPrimitiveCollection\n  this._zIndex = undefined;\n\n  var that = this;\n  this._classificationPrimitiveOptions = {\n    geometryInstances: undefined,\n    appearance: undefined,\n    vertexCacheOptimize: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.vertexCacheOptimize, false),\n    interleave: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.interleave, false),\n    releaseGeometryInstances: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n      options.releaseGeometryInstances,\n      true\n    ),\n    allowPicking: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.allowPicking, true),\n    asynchronous: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.asynchronous, true),\n    compressVertices: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.compressVertices, true),\n    _createBoundingVolumeFunction: undefined,\n    _updateAndQueueCommandsFunction: undefined,\n    _pickPrimitive: that,\n    _extruded: true,\n    _uniformMap: GroundPrimitiveUniformMap,\n  };\n}\n\nObject.defineProperties(GroundPrimitive.prototype, {\n  /**\n   * When <code>true</code>, geometry vertices are optimized for the pre and post-vertex-shader caches.\n   *\n   * @memberof GroundPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  vertexCacheOptimize: {\n    get: function () {\n      return this._classificationPrimitiveOptions.vertexCacheOptimize;\n    },\n  },\n\n  /**\n   * Determines if geometry vertex attributes are interleaved, which can slightly improve rendering performance.\n   *\n   * @memberof GroundPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  interleave: {\n    get: function () {\n      return this._classificationPrimitiveOptions.interleave;\n    },\n  },\n\n  /**\n   * When <code>true</code>, the primitive does not keep a reference to the input <code>geometryInstances</code> to save memory.\n   *\n   * @memberof GroundPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  releaseGeometryInstances: {\n    get: function () {\n      return this._classificationPrimitiveOptions.releaseGeometryInstances;\n    },\n  },\n\n  /**\n   * When <code>true</code>, each geometry instance will only be pickable with {@link Scene#pick}.  When <code>false</code>, GPU memory is saved.\n   *\n   * @memberof GroundPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  allowPicking: {\n    get: function () {\n      return this._classificationPrimitiveOptions.allowPicking;\n    },\n  },\n\n  /**\n   * Determines if the geometry instances will be created and batched on a web worker.\n   *\n   * @memberof GroundPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  asynchronous: {\n    get: function () {\n      return this._classificationPrimitiveOptions.asynchronous;\n    },\n  },\n\n  /**\n   * When <code>true</code>, geometry vertices are compressed, which will save memory.\n   *\n   * @memberof GroundPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  compressVertices: {\n    get: function () {\n      return this._classificationPrimitiveOptions.compressVertices;\n    },\n  },\n\n  /**\n   * Determines if the primitive is complete and ready to render.  If this property is\n   * true, the primitive will be rendered the next time that {@link GroundPrimitive#update}\n   * is called.\n   *\n   * @memberof GroundPrimitive.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves when the primitive is ready to render.\n   * @memberof GroundPrimitive.prototype\n   * @type {Promise.<GroundPrimitive>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n});\n\n/**\n * Determines if GroundPrimitive rendering is supported.\n *\n * @function\n * @param {Scene} scene The scene.\n * @returns {Boolean} <code>true</code> if GroundPrimitives are supported; otherwise, returns <code>false</code>\n */\nGroundPrimitive.isSupported = _ClassificationPrimitive_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].isSupported */ .Z.isSupported;\n\nfunction getComputeMaximumHeightFunction(primitive) {\n  return function (granularity, ellipsoid) {\n    var r = ellipsoid.maximumRadius;\n    var delta = r / Math.cos(granularity * 0.5) - r;\n    return primitive._maxHeight + delta;\n  };\n}\n\nfunction getComputeMinimumHeightFunction(primitive) {\n  return function (granularity, ellipsoid) {\n    return primitive._minHeight;\n  };\n}\n\nvar scratchBVCartesianHigh = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchBVCartesianLow = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchBVCartesian = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchBVCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchBVRectangle = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\n\nfunction getRectangle(frameState, geometry) {\n  var ellipsoid = frameState.mapProjection.ellipsoid;\n\n  if (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(geometry.attributes) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(geometry.attributes.position3DHigh)\n  ) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(geometry.rectangle)) {\n      return geometry.rectangle;\n    }\n\n    return undefined;\n  }\n\n  var highPositions = geometry.attributes.position3DHigh.values;\n  var lowPositions = geometry.attributes.position3DLow.values;\n  var length = highPositions.length;\n\n  var minLat = Number.POSITIVE_INFINITY;\n  var minLon = Number.POSITIVE_INFINITY;\n  var maxLat = Number.NEGATIVE_INFINITY;\n  var maxLon = Number.NEGATIVE_INFINITY;\n\n  for (var i = 0; i < length; i += 3) {\n    var highPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].unpack */ .Z.unpack(\n      highPositions,\n      i,\n      scratchBVCartesianHigh\n    );\n    var lowPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].unpack */ .Z.unpack(lowPositions, i, scratchBVCartesianLow);\n\n    var position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(\n      highPosition,\n      lowPosition,\n      scratchBVCartesian\n    );\n    var cartographic = ellipsoid.cartesianToCartographic(\n      position,\n      scratchBVCartographic\n    );\n\n    var latitude = cartographic.latitude;\n    var longitude = cartographic.longitude;\n\n    minLat = Math.min(minLat, latitude);\n    minLon = Math.min(minLon, longitude);\n    maxLat = Math.max(maxLat, latitude);\n    maxLon = Math.max(maxLon, longitude);\n  }\n\n  var rectangle = scratchBVRectangle;\n  rectangle.north = maxLat;\n  rectangle.south = minLat;\n  rectangle.east = maxLon;\n  rectangle.west = minLon;\n\n  return rectangle;\n}\n\nfunction setMinMaxTerrainHeights(primitive, rectangle, ellipsoid) {\n  var result = _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getMinimumMaximumHeights */ .Z.getMinimumMaximumHeights(\n    rectangle,\n    ellipsoid\n  );\n\n  primitive._minTerrainHeight = result.minimumTerrainHeight;\n  primitive._maxTerrainHeight = result.maximumTerrainHeight;\n}\n\nfunction createBoundingVolume(groundPrimitive, frameState, geometry) {\n  var ellipsoid = frameState.mapProjection.ellipsoid;\n  var rectangle = getRectangle(frameState, geometry);\n\n  var obb = _Core_OrientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].fromRectangle */ .Z.fromRectangle(\n    rectangle,\n    groundPrimitive._minHeight,\n    groundPrimitive._maxHeight,\n    ellipsoid\n  );\n  groundPrimitive._boundingVolumes.push(obb);\n\n  if (!frameState.scene3DOnly) {\n    var projection = frameState.mapProjection;\n    var boundingVolume = _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromRectangleWithHeights2D */ .Z.fromRectangleWithHeights2D(\n      rectangle,\n      projection,\n      groundPrimitive._maxHeight,\n      groundPrimitive._minHeight\n    );\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromElements */ .Z.fromElements(\n      boundingVolume.center.z,\n      boundingVolume.center.x,\n      boundingVolume.center.y,\n      boundingVolume.center\n    );\n\n    groundPrimitive._boundingVolumes2D.push(boundingVolume);\n  }\n}\n\nfunction boundingVolumeIndex(commandIndex, length) {\n  return Math.floor((commandIndex % length) / 2);\n}\n\nfunction updateAndQueueRenderCommand(\n  groundPrimitive,\n  command,\n  frameState,\n  modelMatrix,\n  cull,\n  boundingVolume,\n  debugShowBoundingVolume\n) {\n  // Use derived appearance command for 2D if needed\n  var classificationPrimitive = groundPrimitive._primitive;\n  if (\n    frameState.mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SCENE3D */ .Z.SCENE3D &&\n    command.shaderProgram === classificationPrimitive._spColor &&\n    classificationPrimitive._needs2DShader\n  ) {\n    command = command.derivedCommands.appearance2D;\n  }\n\n  command.owner = groundPrimitive;\n  command.modelMatrix = modelMatrix;\n  command.boundingVolume = boundingVolume;\n  command.cull = cull;\n  command.debugShowBoundingVolume = debugShowBoundingVolume;\n\n  frameState.commandList.push(command);\n}\n\nfunction updateAndQueuePickCommand(\n  groundPrimitive,\n  command,\n  frameState,\n  modelMatrix,\n  cull,\n  boundingVolume\n) {\n  // Use derived pick command for 2D if needed\n  var classificationPrimitive = groundPrimitive._primitive;\n  if (\n    frameState.mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SCENE3D */ .Z.SCENE3D &&\n    command.shaderProgram === classificationPrimitive._spPick &&\n    classificationPrimitive._needs2DShader\n  ) {\n    command = command.derivedCommands.pick2D;\n  }\n\n  command.owner = groundPrimitive;\n  command.modelMatrix = modelMatrix;\n  command.boundingVolume = boundingVolume;\n  command.cull = cull;\n\n  frameState.commandList.push(command);\n}\n\nfunction updateAndQueueCommands(\n  groundPrimitive,\n  frameState,\n  colorCommands,\n  pickCommands,\n  modelMatrix,\n  cull,\n  debugShowBoundingVolume,\n  twoPasses\n) {\n  var boundingVolumes;\n  if (frameState.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    boundingVolumes = groundPrimitive._boundingVolumes;\n  } else {\n    boundingVolumes = groundPrimitive._boundingVolumes2D;\n  }\n\n  var classificationType = groundPrimitive.classificationType;\n  var queueTerrainCommands =\n    classificationType !== _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].CESIUM_3D_TILE */ .Z.CESIUM_3D_TILE;\n  var queue3DTilesCommands = classificationType !== _ClassificationType_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].TERRAIN */ .Z.TERRAIN;\n\n  var passes = frameState.passes;\n  var classificationPrimitive = groundPrimitive._primitive;\n\n  var i;\n  var boundingVolume;\n  var command;\n\n  if (passes.render) {\n    var colorLength = colorCommands.length;\n\n    for (i = 0; i < colorLength; ++i) {\n      boundingVolume = boundingVolumes[boundingVolumeIndex(i, colorLength)];\n      if (queueTerrainCommands) {\n        command = colorCommands[i];\n        updateAndQueueRenderCommand(\n          groundPrimitive,\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n      if (queue3DTilesCommands) {\n        command = colorCommands[i].derivedCommands.tileset;\n        updateAndQueueRenderCommand(\n          groundPrimitive,\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n    }\n\n    if (frameState.invertClassification) {\n      var ignoreShowCommands = classificationPrimitive._commandsIgnoreShow;\n      var ignoreShowCommandsLength = ignoreShowCommands.length;\n      for (i = 0; i < ignoreShowCommandsLength; ++i) {\n        boundingVolume = boundingVolumes[i];\n        command = ignoreShowCommands[i];\n        updateAndQueueRenderCommand(\n          groundPrimitive,\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume,\n          debugShowBoundingVolume\n        );\n      }\n    }\n  }\n\n  if (passes.pick) {\n    var pickLength = pickCommands.length;\n\n    var pickOffsets;\n    if (!groundPrimitive._useFragmentCulling) {\n      // Must be using pick offsets\n      pickOffsets = classificationPrimitive._primitive._pickOffsets;\n    }\n    for (i = 0; i < pickLength; ++i) {\n      boundingVolume = boundingVolumes[boundingVolumeIndex(i, pickLength)];\n      if (!groundPrimitive._useFragmentCulling) {\n        var pickOffset = pickOffsets[boundingVolumeIndex(i, pickLength)];\n        boundingVolume = boundingVolumes[pickOffset.index];\n      }\n      if (queueTerrainCommands) {\n        command = pickCommands[i];\n        updateAndQueuePickCommand(\n          groundPrimitive,\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume\n        );\n      }\n      if (queue3DTilesCommands) {\n        command = pickCommands[i].derivedCommands.tileset;\n        updateAndQueuePickCommand(\n          groundPrimitive,\n          command,\n          frameState,\n          modelMatrix,\n          cull,\n          boundingVolume\n        );\n      }\n    }\n  }\n}\n\n/**\n * Initializes the minimum and maximum terrain heights. This only needs to be called if you are creating the\n * GroundPrimitive synchronously.\n *\n * @returns {Promise<void>} A promise that will resolve once the terrain heights have been loaded.\n *\n */\nGroundPrimitive.initializeTerrainHeights = function () {\n  return _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].initialize */ .Z.initialize();\n};\n\n/**\n * Called when {@link Viewer} or {@link CesiumWidget} render the scene to\n * get the draw commands needed to render this primitive.\n * <p>\n * Do not call this function directly.  This is documented just to\n * list the exceptions that may be propagated when the scene is rendered:\n * </p>\n *\n * @exception {DeveloperError} For synchronous GroundPrimitive, you must call GroundPrimitive.initializeTerrainHeights() and wait for the returned promise to resolve.\n * @exception {DeveloperError} All instance geometries must have the same primitiveType.\n * @exception {DeveloperError} Appearance and material have a uniform with the same name.\n */\nGroundPrimitive.prototype.update = function (frameState) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(this._primitive) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(this.geometryInstances)) {\n    return;\n  }\n\n  if (!_Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].initialized */ .Z.initialized) {\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (!this.asynchronous) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n        "For synchronous GroundPrimitives, you must call GroundPrimitive.initializeTerrainHeights() and wait for the returned promise to resolve."\n      );\n    }\n    //>>includeEnd(\'debug\');\n\n    GroundPrimitive.initializeTerrainHeights();\n    return;\n  }\n\n  var that = this;\n  var primitiveOptions = this._classificationPrimitiveOptions;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(this._primitive)) {\n    var ellipsoid = frameState.mapProjection.ellipsoid;\n\n    var instance;\n    var geometry;\n    var instanceType;\n\n    var instances = Array.isArray(this.geometryInstances)\n      ? this.geometryInstances\n      : [this.geometryInstances];\n    var length = instances.length;\n    var groundInstances = new Array(length);\n\n    var i;\n    var rectangle;\n    for (i = 0; i < length; ++i) {\n      instance = instances[i];\n      geometry = instance.geometry;\n      var instanceRectangle = getRectangle(frameState, geometry);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(rectangle)) {\n        rectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].clone */ .Z.clone(instanceRectangle);\n      } else if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(instanceRectangle)) {\n        _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].union */ .Z.union(rectangle, instanceRectangle, rectangle);\n      }\n\n      var id = instance.id;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(id) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(instanceRectangle)) {\n        var boundingSphere = _Core_ApproximateTerrainHeights_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getBoundingSphere */ .Z.getBoundingSphere(\n          instanceRectangle,\n          ellipsoid\n        );\n        this._boundingSpheresKeys.push(id);\n        this._boundingSpheres.push(boundingSphere);\n      }\n\n      instanceType = geometry.constructor;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(instanceType) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(instanceType.createShadowVolume)) {\n        //>>includeStart(\'debug\', pragmas.debug);\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n          "Not all of the geometry instances have GroundPrimitive support."\n        );\n        //>>includeEnd(\'debug\');\n      }\n    }\n\n    // Now compute the min/max heights for the primitive\n    setMinMaxTerrainHeights(this, rectangle, ellipsoid);\n    var exaggeration = frameState.terrainExaggeration;\n    var exaggerationRelativeHeight =\n      frameState.terrainExaggerationRelativeHeight;\n    this._minHeight = _Core_TerrainExaggeration_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getHeight */ .Z.getHeight(\n      this._minTerrainHeight,\n      exaggeration,\n      exaggerationRelativeHeight\n    );\n    this._maxHeight = _Core_TerrainExaggeration_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].getHeight */ .Z.getHeight(\n      this._maxTerrainHeight,\n      exaggeration,\n      exaggerationRelativeHeight\n    );\n\n    var useFragmentCulling = GroundPrimitive._supportsMaterials(\n      frameState.context\n    );\n    this._useFragmentCulling = useFragmentCulling;\n\n    if (useFragmentCulling) {\n      // Determine whether to add spherical or planar extent attributes for computing texture coordinates.\n      // This depends on the size of the GeometryInstances.\n      var attributes;\n      var usePlanarExtents = true;\n      for (i = 0; i < length; ++i) {\n        instance = instances[i];\n        geometry = instance.geometry;\n        rectangle = getRectangle(frameState, geometry);\n        if (_ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].shouldUseSphericalCoordinates */ .Z.shouldUseSphericalCoordinates(rectangle)) {\n          usePlanarExtents = false;\n          break;\n        }\n      }\n\n      for (i = 0; i < length; ++i) {\n        instance = instances[i];\n        geometry = instance.geometry;\n        instanceType = geometry.constructor;\n\n        var boundingRectangle = getRectangle(frameState, geometry);\n        var textureCoordinateRotationPoints =\n          geometry.textureCoordinateRotationPoints;\n\n        if (usePlanarExtents) {\n          attributes = _ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].getPlanarTextureCoordinateAttributes */ .Z.getPlanarTextureCoordinateAttributes(\n            boundingRectangle,\n            textureCoordinateRotationPoints,\n            ellipsoid,\n            frameState.mapProjection,\n            this._maxHeight\n          );\n        } else {\n          attributes = _ShadowVolumeAppearance_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].getSphericalExtentGeometryInstanceAttributes */ .Z.getSphericalExtentGeometryInstanceAttributes(\n            boundingRectangle,\n            textureCoordinateRotationPoints,\n            ellipsoid,\n            frameState.mapProjection\n          );\n        }\n\n        var instanceAttributes = instance.attributes;\n        for (var attributeKey in instanceAttributes) {\n          if (instanceAttributes.hasOwnProperty(attributeKey)) {\n            attributes[attributeKey] = instanceAttributes[attributeKey];\n          }\n        }\n\n        groundInstances[i] = new _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n          geometry: instanceType.createShadowVolume(\n            geometry,\n            getComputeMinimumHeightFunction(this),\n            getComputeMaximumHeightFunction(this)\n          ),\n          attributes: attributes,\n          id: instance.id,\n        });\n      }\n    } else {\n      // ClassificationPrimitive will check if the colors are all the same if it detects lack of fragment culling attributes\n      for (i = 0; i < length; ++i) {\n        instance = instances[i];\n        geometry = instance.geometry;\n        instanceType = geometry.constructor;\n        groundInstances[i] = new _Core_GeometryInstance_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z({\n          geometry: instanceType.createShadowVolume(\n            geometry,\n            getComputeMinimumHeightFunction(this),\n            getComputeMaximumHeightFunction(this)\n          ),\n          attributes: instance.attributes,\n          id: instance.id,\n        });\n      }\n    }\n\n    primitiveOptions.geometryInstances = groundInstances;\n    primitiveOptions.appearance = this.appearance;\n\n    primitiveOptions._createBoundingVolumeFunction = function (\n      frameState,\n      geometry\n    ) {\n      createBoundingVolume(that, frameState, geometry);\n    };\n    primitiveOptions._updateAndQueueCommandsFunction = function (\n      primitive,\n      frameState,\n      colorCommands,\n      pickCommands,\n      modelMatrix,\n      cull,\n      debugShowBoundingVolume,\n      twoPasses\n    ) {\n      updateAndQueueCommands(\n        that,\n        frameState,\n        colorCommands,\n        pickCommands,\n        modelMatrix,\n        cull,\n        debugShowBoundingVolume,\n        twoPasses\n      );\n    };\n\n    this._primitive = new _ClassificationPrimitive_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(primitiveOptions);\n    this._primitive.readyPromise.then(function (primitive) {\n      that._ready = true;\n\n      if (that.releaseGeometryInstances) {\n        that.geometryInstances = undefined;\n      }\n\n      var error = primitive._error;\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(error)) {\n        that._readyPromise.resolve(that);\n      } else {\n        that._readyPromise.reject(error);\n      }\n    });\n  }\n\n  this._primitive.appearance = this.appearance;\n  this._primitive.show = this.show;\n  this._primitive.debugShowShadowVolume = this.debugShowShadowVolume;\n  this._primitive.debugShowBoundingVolume = this.debugShowBoundingVolume;\n  this._primitive.update(frameState);\n};\n\n/**\n * @private\n */\nGroundPrimitive.prototype.getBoundingSphere = function (id) {\n  var index = this._boundingSpheresKeys.indexOf(id);\n  if (index !== -1) {\n    return this._boundingSpheres[index];\n  }\n\n  return undefined;\n};\n\n/**\n * Returns the modifiable per-instance attributes for a {@link GeometryInstance}.\n *\n * @param {*} id The id of the {@link GeometryInstance}.\n * @returns {Object} The typed array in the attribute\'s format or undefined if the is no instance with id.\n *\n * @exception {DeveloperError} must call update before calling getGeometryInstanceAttributes.\n *\n * @example\n * var attributes = primitive.getGeometryInstanceAttributes(\'an id\');\n * attributes.color = Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.AQUA);\n * attributes.show = Cesium.ShowGeometryInstanceAttribute.toValue(true);\n */\nGroundPrimitive.prototype.getGeometryInstanceAttributes = function (id) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(this._primitive)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n      "must call update before calling getGeometryInstanceAttributes"\n    );\n  }\n  //>>includeEnd(\'debug\');\n  return this._primitive.getGeometryInstanceAttributes(id);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <p>\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n * </p>\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see GroundPrimitive#destroy\n */\nGroundPrimitive.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic\n * release of WebGL resources, instead of relying on the garbage collector to destroy this object.\n * <p>\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n * </p>\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n * @example\n * e = e && e.destroy();\n *\n * @see GroundPrimitive#isDestroyed\n */\nGroundPrimitive.prototype.destroy = function () {\n  this._primitive = this._primitive && this._primitive.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(this);\n};\n\n/**\n * Exposed for testing.\n *\n * @param {Context} context Rendering context\n * @returns {Boolean} Whether or not the current context supports materials on GroundPrimitives.\n * @private\n */\nGroundPrimitive._supportsMaterials = function (context) {\n  return context.depthTexture;\n};\n\n/**\n * Checks if the given Scene supports materials on GroundPrimitives.\n * Materials on GroundPrimitives require support for the WEBGL_depth_texture extension.\n *\n * @param {Scene} scene The current scene.\n * @returns {Boolean} Whether or not the current scene supports materials on GroundPrimitives.\n */\nGroundPrimitive.supportsMaterials = function (scene) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].typeOf.object */ .Z.typeOf.object("scene", scene);\n  //>>includeEnd(\'debug\');\n\n  return GroundPrimitive._supportsMaterials(scene.frameState.context);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (GroundPrimitive);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sc0VBQU87QUFDZCxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBLHdEQUF3RDtBQUN4RCw4Q0FBOEMsc0JBQXNCO0FBQ3BFO0FBQ0E7QUFDQSxhQUFhLFNBQVMsZ0RBQWdEO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RCw4Q0FBOEMsc0JBQXNCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDJFQUFhO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckI7O0FBRUE7QUFDQTtBQUNBLHlEQUFlLGVBQWUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Hcm91bmRQcmltaXRpdmUuanM/Y2MxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXBwcm94aW1hdGVUZXJyYWluSGVpZ2h0cyBmcm9tIFwiLi4vQ29yZS9BcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLmpzXCI7XG5pbXBvcnQgQm91bmRpbmdTcGhlcmUgZnJvbSBcIi4uL0NvcmUvQm91bmRpbmdTcGhlcmUuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDYXJ0b2dyYXBoaWMgZnJvbSBcIi4uL0NvcmUvQ2FydG9ncmFwaGljLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBHZW9tZXRyeUluc3RhbmNlIGZyb20gXCIuLi9Db3JlL0dlb21ldHJ5SW5zdGFuY2UuanNcIjtcbmltcG9ydCBPcmllbnRlZEJvdW5kaW5nQm94IGZyb20gXCIuLi9Db3JlL09yaWVudGVkQm91bmRpbmdCb3guanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgVGVycmFpbkV4YWdnZXJhdGlvbiBmcm9tIFwiLi4vQ29yZS9UZXJyYWluRXhhZ2dlcmF0aW9uLmpzXCI7XG5pbXBvcnQgQ2xhc3NpZmljYXRpb25QcmltaXRpdmUgZnJvbSBcIi4vQ2xhc3NpZmljYXRpb25QcmltaXRpdmUuanNcIjtcbmltcG9ydCBDbGFzc2lmaWNhdGlvblR5cGUgZnJvbSBcIi4vQ2xhc3NpZmljYXRpb25UeXBlLmpzXCI7XG5pbXBvcnQgUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2UgZnJvbSBcIi4vUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2UuanNcIjtcbmltcG9ydCBTY2VuZU1vZGUgZnJvbSBcIi4vU2NlbmVNb2RlLmpzXCI7XG5pbXBvcnQgU2hhZG93Vm9sdW1lQXBwZWFyYW5jZSBmcm9tIFwiLi9TaGFkb3dWb2x1bWVBcHBlYXJhbmNlLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5cbnZhciBHcm91bmRQcmltaXRpdmVVbmlmb3JtTWFwID0ge1xuICB1X2dsb2JlTWluaW11bUFsdGl0dWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIDU1MDAwLjA7XG4gIH0sXG59O1xuXG4vKipcbiAqIEEgZ3JvdW5kIHByaW1pdGl2ZSByZXByZXNlbnRzIGdlb21ldHJ5IGRyYXBlZCBvdmVyIHRlcnJhaW4gb3IgM0QgVGlsZXMgaW4gdGhlIHtAbGluayBTY2VuZX0uXG4gKiA8cD5cbiAqIEEgcHJpbWl0aXZlIGNvbWJpbmVzIGdlb21ldHJ5IGluc3RhbmNlcyB3aXRoIGFuIHtAbGluayBBcHBlYXJhbmNlfSB0aGF0IGRlc2NyaWJlcyB0aGUgZnVsbCBzaGFkaW5nLCBpbmNsdWRpbmdcbiAqIHtAbGluayBNYXRlcmlhbH0gYW5kIHtAbGluayBSZW5kZXJTdGF0ZX0uICBSb3VnaGx5LCB0aGUgZ2VvbWV0cnkgaW5zdGFuY2UgZGVmaW5lcyB0aGUgc3RydWN0dXJlIGFuZCBwbGFjZW1lbnQsXG4gKiBhbmQgdGhlIGFwcGVhcmFuY2UgZGVmaW5lcyB0aGUgdmlzdWFsIGNoYXJhY3RlcmlzdGljcy4gIERlY291cGxpbmcgZ2VvbWV0cnkgYW5kIGFwcGVhcmFuY2UgYWxsb3dzIHVzIHRvIG1peFxuICogYW5kIG1hdGNoIG1vc3Qgb2YgdGhlbSBhbmQgYWRkIGEgbmV3IGdlb21ldHJ5IG9yIGFwcGVhcmFuY2UgaW5kZXBlbmRlbnRseSBvZiBlYWNoIG90aGVyLlxuICogPC9wPlxuICogPHA+XG4gKiBTdXBwb3J0IGZvciB0aGUgV0VCR0xfZGVwdGhfdGV4dHVyZSBleHRlbnNpb24gaXMgcmVxdWlyZWQgdG8gdXNlIEdlb21ldHJ5SW5zdGFuY2VzIHdpdGggZGlmZmVyZW50IFBlckluc3RhbmNlQ29sb3JzXG4gKiBvciBtYXRlcmlhbHMgYmVzaWRlcyBQZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZS5cbiAqIDwvcD5cbiAqIDxwPlxuICogVGV4dHVyZWQgR3JvdW5kUHJpbWl0aXZlcyB3ZXJlIGRlc2lnbmVkIGZvciBub3Rpb25hbCBwYXR0ZXJucyBhbmQgYXJlIG5vdCBtZWFudCBmb3IgcHJlY2lzZWx5IG1hcHBpbmdcbiAqIHRleHR1cmVzIHRvIHRlcnJhaW4gLSBmb3IgdGhhdCB1c2UgY2FzZSwgdXNlIHtAbGluayBTaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyfS5cbiAqIDwvcD5cbiAqIDxwPlxuICogRm9yIGNvcnJlY3QgcmVuZGVyaW5nLCB0aGlzIGZlYXR1cmUgcmVxdWlyZXMgdGhlIEVYVF9mcmFnX2RlcHRoIFdlYkdMIGV4dGVuc2lvbi4gRm9yIGhhcmR3YXJlIHRoYXQgZG8gbm90IHN1cHBvcnQgdGhpcyBleHRlbnNpb24sIHRoZXJlXG4gKiB3aWxsIGJlIHJlbmRlcmluZyBhcnRpZmFjdHMgZm9yIHNvbWUgdmlld2luZyBhbmdsZXMuXG4gKiA8L3A+XG4gKiA8cD5cbiAqIFZhbGlkIGdlb21ldHJpZXMgYXJlIHtAbGluayBDaXJjbGVHZW9tZXRyeX0sIHtAbGluayBDb3JyaWRvckdlb21ldHJ5fSwge0BsaW5rIEVsbGlwc2VHZW9tZXRyeX0sIHtAbGluayBQb2x5Z29uR2VvbWV0cnl9LCBhbmQge0BsaW5rIFJlY3RhbmdsZUdlb21ldHJ5fS5cbiAqIDwvcD5cbiAqXG4gKiBAYWxpYXMgR3JvdW5kUHJpbWl0aXZlXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIEBwYXJhbSB7QXJyYXl8R2VvbWV0cnlJbnN0YW5jZX0gW29wdGlvbnMuZ2VvbWV0cnlJbnN0YW5jZXNdIFRoZSBnZW9tZXRyeSBpbnN0YW5jZXMgdG8gcmVuZGVyLlxuICogQHBhcmFtIHtBcHBlYXJhbmNlfSBbb3B0aW9ucy5hcHBlYXJhbmNlXSBUaGUgYXBwZWFyYW5jZSB1c2VkIHRvIHJlbmRlciB0aGUgcHJpbWl0aXZlLiBEZWZhdWx0cyB0byBhIGZsYXQgUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2Ugd2hlbiBHZW9tZXRyeUluc3RhbmNlcyBoYXZlIGEgY29sb3IgYXR0cmlidXRlLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zaG93PXRydWVdIERldGVybWluZXMgaWYgdGhpcyBwcmltaXRpdmUgd2lsbCBiZSBzaG93bi5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMudmVydGV4Q2FjaGVPcHRpbWl6ZT1mYWxzZV0gV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgZ2VvbWV0cnkgdmVydGljZXMgYXJlIG9wdGltaXplZCBmb3IgdGhlIHByZSBhbmQgcG9zdC12ZXJ0ZXgtc2hhZGVyIGNhY2hlcy5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaW50ZXJsZWF2ZT1mYWxzZV0gV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgZ2VvbWV0cnkgdmVydGV4IGF0dHJpYnV0ZXMgYXJlIGludGVybGVhdmVkLCB3aGljaCBjYW4gc2xpZ2h0bHkgaW1wcm92ZSByZW5kZXJpbmcgcGVyZm9ybWFuY2UgYnV0IGluY3JlYXNlcyBsb2FkIHRpbWUuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNvbXByZXNzVmVydGljZXM9dHJ1ZV0gV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIGdlb21ldHJ5IHZlcnRpY2VzIGFyZSBjb21wcmVzc2VkLCB3aGljaCB3aWxsIHNhdmUgbWVtb3J5LlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5yZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXM9dHJ1ZV0gV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIHByaW1pdGl2ZSBkb2VzIG5vdCBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnB1dCA8Y29kZT5nZW9tZXRyeUluc3RhbmNlczwvY29kZT4gdG8gc2F2ZSBtZW1vcnkuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbG93UGlja2luZz10cnVlXSBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBlYWNoIGdlb21ldHJ5IGluc3RhbmNlIHdpbGwgb25seSBiZSBwaWNrYWJsZSB3aXRoIHtAbGluayBTY2VuZSNwaWNrfS4gIFdoZW4gPGNvZGU+ZmFsc2U8L2NvZGU+LCBHUFUgbWVtb3J5IGlzIHNhdmVkLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hc3luY2hyb25vdXM9dHJ1ZV0gRGV0ZXJtaW5lcyBpZiB0aGUgcHJpbWl0aXZlIHdpbGwgYmUgY3JlYXRlZCBhc3luY2hyb25vdXNseSBvciBibG9jayB1bnRpbCByZWFkeS4gSWYgZmFsc2UgaW5pdGlhbGl6ZVRlcnJhaW5IZWlnaHRzKCkgbXVzdCBiZSBjYWxsZWQgZmlyc3QuXG4gKiBAcGFyYW0ge0NsYXNzaWZpY2F0aW9uVHlwZX0gW29wdGlvbnMuY2xhc3NpZmljYXRpb25UeXBlPUNsYXNzaWZpY2F0aW9uVHlwZS5CT1RIXSBEZXRlcm1pbmVzIHdoZXRoZXIgdGVycmFpbiwgM0QgVGlsZXMgb3IgYm90aCB3aWxsIGJlIGNsYXNzaWZpZWQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lPWZhbHNlXSBGb3IgZGVidWdnaW5nIG9ubHkuIERldGVybWluZXMgaWYgdGhpcyBwcmltaXRpdmUncyBjb21tYW5kcycgYm91bmRpbmcgc3BoZXJlcyBhcmUgc2hvd24uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmRlYnVnU2hvd1NoYWRvd1ZvbHVtZT1mYWxzZV0gRm9yIGRlYnVnZ2luZyBvbmx5LiBEZXRlcm1pbmVzIGlmIHRoZSBzaGFkb3cgdm9sdW1lIGZvciBlYWNoIGdlb21ldHJ5IGluIHRoZSBwcmltaXRpdmUgaXMgZHJhd24uIE11c3QgYmUgPGNvZGU+dHJ1ZTwvY29kZT4gb25cbiAqICAgICAgICAgICAgICAgICAgY3JlYXRpb24gZm9yIHRoZSB2b2x1bWVzIHRvIGJlIGNyZWF0ZWQgYmVmb3JlIHRoZSBnZW9tZXRyeSBpcyByZWxlYXNlZCBvciBvcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlIG11c3QgYmUgPGNvZGU+ZmFsc2U8L2NvZGU+LlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBFeGFtcGxlIDE6IENyZWF0ZSBwcmltaXRpdmUgd2l0aCBhIHNpbmdsZSBpbnN0YW5jZVxuICogdmFyIHJlY3RhbmdsZUluc3RhbmNlID0gbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAqICAgZ2VvbWV0cnkgOiBuZXcgQ2VzaXVtLlJlY3RhbmdsZUdlb21ldHJ5KHtcbiAqICAgICByZWN0YW5nbGUgOiBDZXNpdW0uUmVjdGFuZ2xlLmZyb21EZWdyZWVzKC0xNDAuMCwgMzAuMCwgLTEwMC4wLCA0MC4wKVxuICogICB9KSxcbiAqICAgaWQgOiAncmVjdGFuZ2xlJyxcbiAqICAgYXR0cmlidXRlcyA6IHtcbiAqICAgICBjb2xvciA6IG5ldyBDZXNpdW0uQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlKDAuMCwgMS4wLCAxLjAsIDAuNSlcbiAqICAgfVxuICogfSk7XG4gKiBzY2VuZS5wcmltaXRpdmVzLmFkZChuZXcgQ2VzaXVtLkdyb3VuZFByaW1pdGl2ZSh7XG4gKiAgIGdlb21ldHJ5SW5zdGFuY2VzIDogcmVjdGFuZ2xlSW5zdGFuY2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFeGFtcGxlIDI6IEJhdGNoIGluc3RhbmNlc1xuICogdmFyIGNvbG9yID0gbmV3IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUoMC4wLCAxLjAsIDEuMCwgMC41KTsgLy8gQm90aCBpbnN0YW5jZXMgbXVzdCBoYXZlIHRoZSBzYW1lIGNvbG9yLlxuICogdmFyIHJlY3RhbmdsZUluc3RhbmNlID0gbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAqICAgZ2VvbWV0cnkgOiBuZXcgQ2VzaXVtLlJlY3RhbmdsZUdlb21ldHJ5KHtcbiAqICAgICByZWN0YW5nbGUgOiBDZXNpdW0uUmVjdGFuZ2xlLmZyb21EZWdyZWVzKC0xNDAuMCwgMzAuMCwgLTEwMC4wLCA0MC4wKVxuICogICB9KSxcbiAqICAgaWQgOiAncmVjdGFuZ2xlJyxcbiAqICAgYXR0cmlidXRlcyA6IHtcbiAqICAgICBjb2xvciA6IGNvbG9yXG4gKiAgIH1cbiAqIH0pO1xuICogdmFyIGVsbGlwc2VJbnN0YW5jZSA9IG5ldyBDZXNpdW0uR2VvbWV0cnlJbnN0YW5jZSh7XG4gKiAgICAgZ2VvbWV0cnkgOiBuZXcgQ2VzaXVtLkVsbGlwc2VHZW9tZXRyeSh7XG4gKiAgICAgICAgIGNlbnRlciA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKC0xMDUuMCwgNDAuMCksXG4gKiAgICAgICAgIHNlbWlNaW5vckF4aXMgOiAzMDAwMDAuMCxcbiAqICAgICAgICAgc2VtaU1ham9yQXhpcyA6IDQwMDAwMC4wXG4gKiAgICAgfSksXG4gKiAgICAgaWQgOiAnZWxsaXBzZScsXG4gKiAgICAgYXR0cmlidXRlcyA6IHtcbiAqICAgICAgICAgY29sb3IgOiBjb2xvclxuICogICAgIH1cbiAqIH0pO1xuICogc2NlbmUucHJpbWl0aXZlcy5hZGQobmV3IENlc2l1bS5Hcm91bmRQcmltaXRpdmUoe1xuICogICBnZW9tZXRyeUluc3RhbmNlcyA6IFtyZWN0YW5nbGVJbnN0YW5jZSwgZWxsaXBzZUluc3RhbmNlXVxuICogfSkpO1xuICpcbiAqIEBzZWUgUHJpbWl0aXZlXG4gKiBAc2VlIENsYXNzaWZpY2F0aW9uUHJpbWl0aXZlXG4gKiBAc2VlIEdlb21ldHJ5SW5zdGFuY2VcbiAqIEBzZWUgQXBwZWFyYW5jZVxuICovXG5mdW5jdGlvbiBHcm91bmRQcmltaXRpdmUob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIHZhciBhcHBlYXJhbmNlID0gb3B0aW9ucy5hcHBlYXJhbmNlO1xuICB2YXIgZ2VvbWV0cnlJbnN0YW5jZXMgPSBvcHRpb25zLmdlb21ldHJ5SW5zdGFuY2VzO1xuICBpZiAoIWRlZmluZWQoYXBwZWFyYW5jZSkgJiYgZGVmaW5lZChnZW9tZXRyeUluc3RhbmNlcykpIHtcbiAgICB2YXIgZ2VvbWV0cnlJbnN0YW5jZXNBcnJheSA9IEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlJbnN0YW5jZXMpXG4gICAgICA/IGdlb21ldHJ5SW5zdGFuY2VzXG4gICAgICA6IFtnZW9tZXRyeUluc3RhbmNlc107XG4gICAgdmFyIGdlb21ldHJ5SW5zdGFuY2VDb3VudCA9IGdlb21ldHJ5SW5zdGFuY2VzQXJyYXkubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VvbWV0cnlJbnN0YW5jZUNvdW50OyBpKyspIHtcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gZ2VvbWV0cnlJbnN0YW5jZXNBcnJheVtpXS5hdHRyaWJ1dGVzO1xuICAgICAgaWYgKGRlZmluZWQoYXR0cmlidXRlcykgJiYgZGVmaW5lZChhdHRyaWJ1dGVzLmNvbG9yKSkge1xuICAgICAgICBhcHBlYXJhbmNlID0gbmV3IFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlKHtcbiAgICAgICAgICBmbGF0OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGUge0BsaW5rIEFwcGVhcmFuY2V9IHVzZWQgdG8gc2hhZGUgdGhpcyBwcmltaXRpdmUuIEVhY2ggZ2VvbWV0cnlcbiAgICogaW5zdGFuY2UgaXMgc2hhZGVkIHdpdGggdGhlIHNhbWUgYXBwZWFyYW5jZS4gIFNvbWUgYXBwZWFyYW5jZXMsIGxpa2VcbiAgICoge0BsaW5rIFBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlfSBhbGxvdyBnaXZpbmcgZWFjaCBpbnN0YW5jZSB1bmlxdWVcbiAgICogcHJvcGVydGllcy5cbiAgICpcbiAgICogQHR5cGUgQXBwZWFyYW5jZVxuICAgKlxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuYXBwZWFyYW5jZSA9IGFwcGVhcmFuY2U7XG5cbiAgLyoqXG4gICAqIFRoZSBnZW9tZXRyeSBpbnN0YW5jZXMgcmVuZGVyZWQgd2l0aCB0aGlzIHByaW1pdGl2ZS4gIFRoaXMgbWF5XG4gICAqIGJlIDxjb2RlPnVuZGVmaW5lZDwvY29kZT4gaWYgPGNvZGU+b3B0aW9ucy5yZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXM8L2NvZGU+XG4gICAqIGlzIDxjb2RlPnRydWU8L2NvZGU+IHdoZW4gdGhlIHByaW1pdGl2ZSBpcyBjb25zdHJ1Y3RlZC5cbiAgICogPHA+XG4gICAqIENoYW5naW5nIHRoaXMgcHJvcGVydHkgYWZ0ZXIgdGhlIHByaW1pdGl2ZSBpcyByZW5kZXJlZCBoYXMgbm8gZWZmZWN0LlxuICAgKiA8L3A+XG4gICAqXG4gICAqIEByZWFkb25seVxuICAgKiBAdHlwZSB7QXJyYXl8R2VvbWV0cnlJbnN0YW5jZX1cbiAgICpcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmdlb21ldHJ5SW5zdGFuY2VzID0gb3B0aW9ucy5nZW9tZXRyeUluc3RhbmNlcztcbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIHByaW1pdGl2ZSB3aWxsIGJlIHNob3duLiAgVGhpcyBhZmZlY3RzIGFsbCBnZW9tZXRyeVxuICAgKiBpbnN0YW5jZXMgaW4gdGhlIHByaW1pdGl2ZS5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHRoaXMuc2hvdyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnNob3csIHRydWUpO1xuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRlcnJhaW4sIDNEIFRpbGVzIG9yIGJvdGggd2lsbCBiZSBjbGFzc2lmaWVkLlxuICAgKlxuICAgKiBAdHlwZSB7Q2xhc3NpZmljYXRpb25UeXBlfVxuICAgKlxuICAgKiBAZGVmYXVsdCBDbGFzc2lmaWNhdGlvblR5cGUuQk9USFxuICAgKi9cbiAgdGhpcy5jbGFzc2lmaWNhdGlvblR5cGUgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5jbGFzc2lmaWNhdGlvblR5cGUsXG4gICAgQ2xhc3NpZmljYXRpb25UeXBlLkJPVEhcbiAgKTtcbiAgLyoqXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgZm9yIGRlYnVnZ2luZyBvbmx5OyBpdCBpcyBub3QgZm9yIHByb2R1Y3Rpb24gdXNlIG5vciBpcyBpdCBvcHRpbWl6ZWQuXG4gICAqIDxwPlxuICAgKiBEcmF3cyB0aGUgYm91bmRpbmcgc3BoZXJlIGZvciBlYWNoIGRyYXcgY29tbWFuZCBpbiB0aGUgcHJpbWl0aXZlLlxuICAgKiA8L3A+XG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgdGhpcy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IGRlZmF1bHRWYWx1ZShcbiAgICBvcHRpb25zLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lLFxuICAgIGZhbHNlXG4gICk7XG5cbiAgLyoqXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgZm9yIGRlYnVnZ2luZyBvbmx5OyBpdCBpcyBub3QgZm9yIHByb2R1Y3Rpb24gdXNlIG5vciBpcyBpdCBvcHRpbWl6ZWQuXG4gICAqIDxwPlxuICAgKiBEcmF3cyB0aGUgc2hhZG93IHZvbHVtZSBmb3IgZWFjaCBnZW9tZXRyeSBpbiB0aGUgcHJpbWl0aXZlLlxuICAgKiA8L3A+XG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgdGhpcy5kZWJ1Z1Nob3dTaGFkb3dWb2x1bWUgPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5kZWJ1Z1Nob3dTaGFkb3dWb2x1bWUsXG4gICAgZmFsc2VcbiAgKTtcblxuICB0aGlzLl9ib3VuZGluZ1ZvbHVtZXMgPSBbXTtcbiAgdGhpcy5fYm91bmRpbmdWb2x1bWVzMkQgPSBbXTtcblxuICB0aGlzLl9yZWFkeSA9IGZhbHNlO1xuICB0aGlzLl9yZWFkeVByb21pc2UgPSB3aGVuLmRlZmVyKCk7XG5cbiAgdGhpcy5fcHJpbWl0aXZlID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX21heEhlaWdodCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbWluSGVpZ2h0ID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX21heFRlcnJhaW5IZWlnaHQgPSBBcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLl9kZWZhdWx0TWF4VGVycmFpbkhlaWdodDtcbiAgdGhpcy5fbWluVGVycmFpbkhlaWdodCA9IEFwcHJveGltYXRlVGVycmFpbkhlaWdodHMuX2RlZmF1bHRNaW5UZXJyYWluSGVpZ2h0O1xuXG4gIHRoaXMuX2JvdW5kaW5nU3BoZXJlc0tleXMgPSBbXTtcbiAgdGhpcy5fYm91bmRpbmdTcGhlcmVzID0gW107XG5cbiAgdGhpcy5fdXNlRnJhZ21lbnRDdWxsaW5nID0gZmFsc2U7XG4gIC8vIFVzZWQgd2hlbiBpbnNlcnRpbmcgaW4gYW4gT3JkZXJlZFByaW1pdGl2ZUNvbGxlY3Rpb25cbiAgdGhpcy5fekluZGV4ID0gdW5kZWZpbmVkO1xuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdGhpcy5fY2xhc3NpZmljYXRpb25QcmltaXRpdmVPcHRpb25zID0ge1xuICAgIGdlb21ldHJ5SW5zdGFuY2VzOiB1bmRlZmluZWQsXG4gICAgYXBwZWFyYW5jZTogdW5kZWZpbmVkLFxuICAgIHZlcnRleENhY2hlT3B0aW1pemU6IGRlZmF1bHRWYWx1ZShvcHRpb25zLnZlcnRleENhY2hlT3B0aW1pemUsIGZhbHNlKSxcbiAgICBpbnRlcmxlYXZlOiBkZWZhdWx0VmFsdWUob3B0aW9ucy5pbnRlcmxlYXZlLCBmYWxzZSksXG4gICAgcmVsZWFzZUdlb21ldHJ5SW5zdGFuY2VzOiBkZWZhdWx0VmFsdWUoXG4gICAgICBvcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlcyxcbiAgICAgIHRydWVcbiAgICApLFxuICAgIGFsbG93UGlja2luZzogZGVmYXVsdFZhbHVlKG9wdGlvbnMuYWxsb3dQaWNraW5nLCB0cnVlKSxcbiAgICBhc3luY2hyb25vdXM6IGRlZmF1bHRWYWx1ZShvcHRpb25zLmFzeW5jaHJvbm91cywgdHJ1ZSksXG4gICAgY29tcHJlc3NWZXJ0aWNlczogZGVmYXVsdFZhbHVlKG9wdGlvbnMuY29tcHJlc3NWZXJ0aWNlcywgdHJ1ZSksXG4gICAgX2NyZWF0ZUJvdW5kaW5nVm9sdW1lRnVuY3Rpb246IHVuZGVmaW5lZCxcbiAgICBfdXBkYXRlQW5kUXVldWVDb21tYW5kc0Z1bmN0aW9uOiB1bmRlZmluZWQsXG4gICAgX3BpY2tQcmltaXRpdmU6IHRoYXQsXG4gICAgX2V4dHJ1ZGVkOiB0cnVlLFxuICAgIF91bmlmb3JtTWFwOiBHcm91bmRQcmltaXRpdmVVbmlmb3JtTWFwLFxuICB9O1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhHcm91bmRQcmltaXRpdmUucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBnZW9tZXRyeSB2ZXJ0aWNlcyBhcmUgb3B0aW1pemVkIGZvciB0aGUgcHJlIGFuZCBwb3N0LXZlcnRleC1zaGFkZXIgY2FjaGVzLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR3JvdW5kUHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHZlcnRleENhY2hlT3B0aW1pemU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jbGFzc2lmaWNhdGlvblByaW1pdGl2ZU9wdGlvbnMudmVydGV4Q2FjaGVPcHRpbWl6ZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIGdlb21ldHJ5IHZlcnRleCBhdHRyaWJ1dGVzIGFyZSBpbnRlcmxlYXZlZCwgd2hpY2ggY2FuIHNsaWdodGx5IGltcHJvdmUgcmVuZGVyaW5nIHBlcmZvcm1hbmNlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR3JvdW5kUHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBpbnRlcmxlYXZlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3NpZmljYXRpb25QcmltaXRpdmVPcHRpb25zLmludGVybGVhdmU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgdGhlIHByaW1pdGl2ZSBkb2VzIG5vdCBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnB1dCA8Y29kZT5nZW9tZXRyeUluc3RhbmNlczwvY29kZT4gdG8gc2F2ZSBtZW1vcnkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgcmVsZWFzZUdlb21ldHJ5SW5zdGFuY2VzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3NpZmljYXRpb25QcmltaXRpdmVPcHRpb25zLnJlbGVhc2VHZW9tZXRyeUluc3RhbmNlcztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBlYWNoIGdlb21ldHJ5IGluc3RhbmNlIHdpbGwgb25seSBiZSBwaWNrYWJsZSB3aXRoIHtAbGluayBTY2VuZSNwaWNrfS4gIFdoZW4gPGNvZGU+ZmFsc2U8L2NvZGU+LCBHUFUgbWVtb3J5IGlzIHNhdmVkLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR3JvdW5kUHJpbWl0aXZlLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIGFsbG93UGlja2luZzoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NsYXNzaWZpY2F0aW9uUHJpbWl0aXZlT3B0aW9ucy5hbGxvd1BpY2tpbmc7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2VvbWV0cnkgaW5zdGFuY2VzIHdpbGwgYmUgY3JlYXRlZCBhbmQgYmF0Y2hlZCBvbiBhIHdlYiB3b3JrZXIuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgYXN5bmNocm9ub3VzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3NpZmljYXRpb25QcmltaXRpdmVPcHRpb25zLmFzeW5jaHJvbm91cztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIDxjb2RlPnRydWU8L2NvZGU+LCBnZW9tZXRyeSB2ZXJ0aWNlcyBhcmUgY29tcHJlc3NlZCwgd2hpY2ggd2lsbCBzYXZlIG1lbW9yeS5cbiAgICpcbiAgICogQG1lbWJlcm9mIEdyb3VuZFByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBjb21wcmVzc1ZlcnRpY2VzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3NpZmljYXRpb25QcmltaXRpdmVPcHRpb25zLmNvbXByZXNzVmVydGljZXM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgcHJpbWl0aXZlIGlzIGNvbXBsZXRlIGFuZCByZWFkeSB0byByZW5kZXIuICBJZiB0aGlzIHByb3BlcnR5IGlzXG4gICAqIHRydWUsIHRoZSBwcmltaXRpdmUgd2lsbCBiZSByZW5kZXJlZCB0aGUgbmV4dCB0aW1lIHRoYXQge0BsaW5rIEdyb3VuZFByaW1pdGl2ZSN1cGRhdGV9XG4gICAqIGlzIGNhbGxlZC5cbiAgICpcbiAgICogQG1lbWJlcm9mIEdyb3VuZFByaW1pdGl2ZS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHByaW1pdGl2ZSBpcyByZWFkeSB0byByZW5kZXIuXG4gICAqIEBtZW1iZXJvZiBHcm91bmRQcmltaXRpdmUucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm9taXNlLjxHcm91bmRQcmltaXRpdmU+fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5UHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5UHJvbWlzZS5wcm9taXNlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIEdyb3VuZFByaW1pdGl2ZSByZW5kZXJpbmcgaXMgc3VwcG9ydGVkLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtTY2VuZX0gc2NlbmUgVGhlIHNjZW5lLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIEdyb3VuZFByaW1pdGl2ZXMgYXJlIHN1cHBvcnRlZDsgb3RoZXJ3aXNlLCByZXR1cm5zIDxjb2RlPmZhbHNlPC9jb2RlPlxuICovXG5Hcm91bmRQcmltaXRpdmUuaXNTdXBwb3J0ZWQgPSBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZS5pc1N1cHBvcnRlZDtcblxuZnVuY3Rpb24gZ2V0Q29tcHV0ZU1heGltdW1IZWlnaHRGdW5jdGlvbihwcmltaXRpdmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChncmFudWxhcml0eSwgZWxsaXBzb2lkKSB7XG4gICAgdmFyIHIgPSBlbGxpcHNvaWQubWF4aW11bVJhZGl1cztcbiAgICB2YXIgZGVsdGEgPSByIC8gTWF0aC5jb3MoZ3JhbnVsYXJpdHkgKiAwLjUpIC0gcjtcbiAgICByZXR1cm4gcHJpbWl0aXZlLl9tYXhIZWlnaHQgKyBkZWx0YTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29tcHV0ZU1pbmltdW1IZWlnaHRGdW5jdGlvbihwcmltaXRpdmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChncmFudWxhcml0eSwgZWxsaXBzb2lkKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZS5fbWluSGVpZ2h0O1xuICB9O1xufVxuXG52YXIgc2NyYXRjaEJWQ2FydGVzaWFuSGlnaCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaEJWQ2FydGVzaWFuTG93ID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQlZDYXJ0ZXNpYW4gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hCVkNhcnRvZ3JhcGhpYyA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciBzY3JhdGNoQlZSZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbmZ1bmN0aW9uIGdldFJlY3RhbmdsZShmcmFtZVN0YXRlLCBnZW9tZXRyeSkge1xuICB2YXIgZWxsaXBzb2lkID0gZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uLmVsbGlwc29pZDtcblxuICBpZiAoXG4gICAgIWRlZmluZWQoZ2VvbWV0cnkuYXR0cmlidXRlcykgfHxcbiAgICAhZGVmaW5lZChnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uM0RIaWdoKVxuICApIHtcbiAgICBpZiAoZGVmaW5lZChnZW9tZXRyeS5yZWN0YW5nbGUpKSB7XG4gICAgICByZXR1cm4gZ2VvbWV0cnkucmVjdGFuZ2xlO1xuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgaGlnaFBvc2l0aW9ucyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24zREhpZ2gudmFsdWVzO1xuICB2YXIgbG93UG9zaXRpb25zID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjNETG93LnZhbHVlcztcbiAgdmFyIGxlbmd0aCA9IGhpZ2hQb3NpdGlvbnMubGVuZ3RoO1xuXG4gIHZhciBtaW5MYXQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gIHZhciBtaW5Mb24gPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gIHZhciBtYXhMYXQgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gIHZhciBtYXhMb24gPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuICAgIHZhciBoaWdoUG9zaXRpb24gPSBDYXJ0ZXNpYW4zLnVucGFjayhcbiAgICAgIGhpZ2hQb3NpdGlvbnMsXG4gICAgICBpLFxuICAgICAgc2NyYXRjaEJWQ2FydGVzaWFuSGlnaFxuICAgICk7XG4gICAgdmFyIGxvd1Bvc2l0aW9uID0gQ2FydGVzaWFuMy51bnBhY2sobG93UG9zaXRpb25zLCBpLCBzY3JhdGNoQlZDYXJ0ZXNpYW5Mb3cpO1xuXG4gICAgdmFyIHBvc2l0aW9uID0gQ2FydGVzaWFuMy5hZGQoXG4gICAgICBoaWdoUG9zaXRpb24sXG4gICAgICBsb3dQb3NpdGlvbixcbiAgICAgIHNjcmF0Y2hCVkNhcnRlc2lhblxuICAgICk7XG4gICAgdmFyIGNhcnRvZ3JhcGhpYyA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgc2NyYXRjaEJWQ2FydG9ncmFwaGljXG4gICAgKTtcblxuICAgIHZhciBsYXRpdHVkZSA9IGNhcnRvZ3JhcGhpYy5sYXRpdHVkZTtcbiAgICB2YXIgbG9uZ2l0dWRlID0gY2FydG9ncmFwaGljLmxvbmdpdHVkZTtcblxuICAgIG1pbkxhdCA9IE1hdGgubWluKG1pbkxhdCwgbGF0aXR1ZGUpO1xuICAgIG1pbkxvbiA9IE1hdGgubWluKG1pbkxvbiwgbG9uZ2l0dWRlKTtcbiAgICBtYXhMYXQgPSBNYXRoLm1heChtYXhMYXQsIGxhdGl0dWRlKTtcbiAgICBtYXhMb24gPSBNYXRoLm1heChtYXhMb24sIGxvbmdpdHVkZSk7XG4gIH1cblxuICB2YXIgcmVjdGFuZ2xlID0gc2NyYXRjaEJWUmVjdGFuZ2xlO1xuICByZWN0YW5nbGUubm9ydGggPSBtYXhMYXQ7XG4gIHJlY3RhbmdsZS5zb3V0aCA9IG1pbkxhdDtcbiAgcmVjdGFuZ2xlLmVhc3QgPSBtYXhMb247XG4gIHJlY3RhbmdsZS53ZXN0ID0gbWluTG9uO1xuXG4gIHJldHVybiByZWN0YW5nbGU7XG59XG5cbmZ1bmN0aW9uIHNldE1pbk1heFRlcnJhaW5IZWlnaHRzKHByaW1pdGl2ZSwgcmVjdGFuZ2xlLCBlbGxpcHNvaWQpIHtcbiAgdmFyIHJlc3VsdCA9IEFwcHJveGltYXRlVGVycmFpbkhlaWdodHMuZ2V0TWluaW11bU1heGltdW1IZWlnaHRzKFxuICAgIHJlY3RhbmdsZSxcbiAgICBlbGxpcHNvaWRcbiAgKTtcblxuICBwcmltaXRpdmUuX21pblRlcnJhaW5IZWlnaHQgPSByZXN1bHQubWluaW11bVRlcnJhaW5IZWlnaHQ7XG4gIHByaW1pdGl2ZS5fbWF4VGVycmFpbkhlaWdodCA9IHJlc3VsdC5tYXhpbXVtVGVycmFpbkhlaWdodDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQm91bmRpbmdWb2x1bWUoZ3JvdW5kUHJpbWl0aXZlLCBmcmFtZVN0YXRlLCBnZW9tZXRyeSkge1xuICB2YXIgZWxsaXBzb2lkID0gZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uLmVsbGlwc29pZDtcbiAgdmFyIHJlY3RhbmdsZSA9IGdldFJlY3RhbmdsZShmcmFtZVN0YXRlLCBnZW9tZXRyeSk7XG5cbiAgdmFyIG9iYiA9IE9yaWVudGVkQm91bmRpbmdCb3guZnJvbVJlY3RhbmdsZShcbiAgICByZWN0YW5nbGUsXG4gICAgZ3JvdW5kUHJpbWl0aXZlLl9taW5IZWlnaHQsXG4gICAgZ3JvdW5kUHJpbWl0aXZlLl9tYXhIZWlnaHQsXG4gICAgZWxsaXBzb2lkXG4gICk7XG4gIGdyb3VuZFByaW1pdGl2ZS5fYm91bmRpbmdWb2x1bWVzLnB1c2gob2JiKTtcblxuICBpZiAoIWZyYW1lU3RhdGUuc2NlbmUzRE9ubHkpIHtcbiAgICB2YXIgcHJvamVjdGlvbiA9IGZyYW1lU3RhdGUubWFwUHJvamVjdGlvbjtcbiAgICB2YXIgYm91bmRpbmdWb2x1bWUgPSBCb3VuZGluZ1NwaGVyZS5mcm9tUmVjdGFuZ2xlV2l0aEhlaWdodHMyRChcbiAgICAgIHJlY3RhbmdsZSxcbiAgICAgIHByb2plY3Rpb24sXG4gICAgICBncm91bmRQcmltaXRpdmUuX21heEhlaWdodCxcbiAgICAgIGdyb3VuZFByaW1pdGl2ZS5fbWluSGVpZ2h0XG4gICAgKTtcbiAgICBDYXJ0ZXNpYW4zLmZyb21FbGVtZW50cyhcbiAgICAgIGJvdW5kaW5nVm9sdW1lLmNlbnRlci56LFxuICAgICAgYm91bmRpbmdWb2x1bWUuY2VudGVyLngsXG4gICAgICBib3VuZGluZ1ZvbHVtZS5jZW50ZXIueSxcbiAgICAgIGJvdW5kaW5nVm9sdW1lLmNlbnRlclxuICAgICk7XG5cbiAgICBncm91bmRQcmltaXRpdmUuX2JvdW5kaW5nVm9sdW1lczJELnB1c2goYm91bmRpbmdWb2x1bWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJvdW5kaW5nVm9sdW1lSW5kZXgoY29tbWFuZEluZGV4LCBsZW5ndGgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoKGNvbW1hbmRJbmRleCAlIGxlbmd0aCkgLyAyKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQW5kUXVldWVSZW5kZXJDb21tYW5kKFxuICBncm91bmRQcmltaXRpdmUsXG4gIGNvbW1hbmQsXG4gIGZyYW1lU3RhdGUsXG4gIG1vZGVsTWF0cml4LFxuICBjdWxsLFxuICBib3VuZGluZ1ZvbHVtZSxcbiAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWVcbikge1xuICAvLyBVc2UgZGVyaXZlZCBhcHBlYXJhbmNlIGNvbW1hbmQgZm9yIDJEIGlmIG5lZWRlZFxuICB2YXIgY2xhc3NpZmljYXRpb25QcmltaXRpdmUgPSBncm91bmRQcmltaXRpdmUuX3ByaW1pdGl2ZTtcbiAgaWYgKFxuICAgIGZyYW1lU3RhdGUubW9kZSAhPT0gU2NlbmVNb2RlLlNDRU5FM0QgJiZcbiAgICBjb21tYW5kLnNoYWRlclByb2dyYW0gPT09IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9zcENvbG9yICYmXG4gICAgY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX25lZWRzMkRTaGFkZXJcbiAgKSB7XG4gICAgY29tbWFuZCA9IGNvbW1hbmQuZGVyaXZlZENvbW1hbmRzLmFwcGVhcmFuY2UyRDtcbiAgfVxuXG4gIGNvbW1hbmQub3duZXIgPSBncm91bmRQcmltaXRpdmU7XG4gIGNvbW1hbmQubW9kZWxNYXRyaXggPSBtb2RlbE1hdHJpeDtcbiAgY29tbWFuZC5ib3VuZGluZ1ZvbHVtZSA9IGJvdW5kaW5nVm9sdW1lO1xuICBjb21tYW5kLmN1bGwgPSBjdWxsO1xuICBjb21tYW5kLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XG5cbiAgZnJhbWVTdGF0ZS5jb21tYW5kTGlzdC5wdXNoKGNvbW1hbmQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBbmRRdWV1ZVBpY2tDb21tYW5kKFxuICBncm91bmRQcmltaXRpdmUsXG4gIGNvbW1hbmQsXG4gIGZyYW1lU3RhdGUsXG4gIG1vZGVsTWF0cml4LFxuICBjdWxsLFxuICBib3VuZGluZ1ZvbHVtZVxuKSB7XG4gIC8vIFVzZSBkZXJpdmVkIHBpY2sgY29tbWFuZCBmb3IgMkQgaWYgbmVlZGVkXG4gIHZhciBjbGFzc2lmaWNhdGlvblByaW1pdGl2ZSA9IGdyb3VuZFByaW1pdGl2ZS5fcHJpbWl0aXZlO1xuICBpZiAoXG4gICAgZnJhbWVTdGF0ZS5tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUzRCAmJlxuICAgIGNvbW1hbmQuc2hhZGVyUHJvZ3JhbSA9PT0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX3NwUGljayAmJlxuICAgIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9uZWVkczJEU2hhZGVyXG4gICkge1xuICAgIGNvbW1hbmQgPSBjb21tYW5kLmRlcml2ZWRDb21tYW5kcy5waWNrMkQ7XG4gIH1cblxuICBjb21tYW5kLm93bmVyID0gZ3JvdW5kUHJpbWl0aXZlO1xuICBjb21tYW5kLm1vZGVsTWF0cml4ID0gbW9kZWxNYXRyaXg7XG4gIGNvbW1hbmQuYm91bmRpbmdWb2x1bWUgPSBib3VuZGluZ1ZvbHVtZTtcbiAgY29tbWFuZC5jdWxsID0gY3VsbDtcblxuICBmcmFtZVN0YXRlLmNvbW1hbmRMaXN0LnB1c2goY29tbWFuZCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUFuZFF1ZXVlQ29tbWFuZHMoXG4gIGdyb3VuZFByaW1pdGl2ZSxcbiAgZnJhbWVTdGF0ZSxcbiAgY29sb3JDb21tYW5kcyxcbiAgcGlja0NvbW1hbmRzLFxuICBtb2RlbE1hdHJpeCxcbiAgY3VsbCxcbiAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gIHR3b1Bhc3Nlc1xuKSB7XG4gIHZhciBib3VuZGluZ1ZvbHVtZXM7XG4gIGlmIChmcmFtZVN0YXRlLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgYm91bmRpbmdWb2x1bWVzID0gZ3JvdW5kUHJpbWl0aXZlLl9ib3VuZGluZ1ZvbHVtZXM7XG4gIH0gZWxzZSB7XG4gICAgYm91bmRpbmdWb2x1bWVzID0gZ3JvdW5kUHJpbWl0aXZlLl9ib3VuZGluZ1ZvbHVtZXMyRDtcbiAgfVxuXG4gIHZhciBjbGFzc2lmaWNhdGlvblR5cGUgPSBncm91bmRQcmltaXRpdmUuY2xhc3NpZmljYXRpb25UeXBlO1xuICB2YXIgcXVldWVUZXJyYWluQ29tbWFuZHMgPVxuICAgIGNsYXNzaWZpY2F0aW9uVHlwZSAhPT0gQ2xhc3NpZmljYXRpb25UeXBlLkNFU0lVTV8zRF9USUxFO1xuICB2YXIgcXVldWUzRFRpbGVzQ29tbWFuZHMgPSBjbGFzc2lmaWNhdGlvblR5cGUgIT09IENsYXNzaWZpY2F0aW9uVHlwZS5URVJSQUlOO1xuXG4gIHZhciBwYXNzZXMgPSBmcmFtZVN0YXRlLnBhc3NlcztcbiAgdmFyIGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlID0gZ3JvdW5kUHJpbWl0aXZlLl9wcmltaXRpdmU7XG5cbiAgdmFyIGk7XG4gIHZhciBib3VuZGluZ1ZvbHVtZTtcbiAgdmFyIGNvbW1hbmQ7XG5cbiAgaWYgKHBhc3Nlcy5yZW5kZXIpIHtcbiAgICB2YXIgY29sb3JMZW5ndGggPSBjb2xvckNvbW1hbmRzLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBjb2xvckxlbmd0aDsgKytpKSB7XG4gICAgICBib3VuZGluZ1ZvbHVtZSA9IGJvdW5kaW5nVm9sdW1lc1tib3VuZGluZ1ZvbHVtZUluZGV4KGksIGNvbG9yTGVuZ3RoKV07XG4gICAgICBpZiAocXVldWVUZXJyYWluQ29tbWFuZHMpIHtcbiAgICAgICAgY29tbWFuZCA9IGNvbG9yQ29tbWFuZHNbaV07XG4gICAgICAgIHVwZGF0ZUFuZFF1ZXVlUmVuZGVyQ29tbWFuZChcbiAgICAgICAgICBncm91bmRQcmltaXRpdmUsXG4gICAgICAgICAgY29tbWFuZCxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICAgIGN1bGwsXG4gICAgICAgICAgYm91bmRpbmdWb2x1bWUsXG4gICAgICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChxdWV1ZTNEVGlsZXNDb21tYW5kcykge1xuICAgICAgICBjb21tYW5kID0gY29sb3JDb21tYW5kc1tpXS5kZXJpdmVkQ29tbWFuZHMudGlsZXNldDtcbiAgICAgICAgdXBkYXRlQW5kUXVldWVSZW5kZXJDb21tYW5kKFxuICAgICAgICAgIGdyb3VuZFByaW1pdGl2ZSxcbiAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgICAgY3VsbCxcbiAgICAgICAgICBib3VuZGluZ1ZvbHVtZSxcbiAgICAgICAgICBkZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmcmFtZVN0YXRlLmludmVydENsYXNzaWZpY2F0aW9uKSB7XG4gICAgICB2YXIgaWdub3JlU2hvd0NvbW1hbmRzID0gY2xhc3NpZmljYXRpb25QcmltaXRpdmUuX2NvbW1hbmRzSWdub3JlU2hvdztcbiAgICAgIHZhciBpZ25vcmVTaG93Q29tbWFuZHNMZW5ndGggPSBpZ25vcmVTaG93Q29tbWFuZHMubGVuZ3RoO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGlnbm9yZVNob3dDb21tYW5kc0xlbmd0aDsgKytpKSB7XG4gICAgICAgIGJvdW5kaW5nVm9sdW1lID0gYm91bmRpbmdWb2x1bWVzW2ldO1xuICAgICAgICBjb21tYW5kID0gaWdub3JlU2hvd0NvbW1hbmRzW2ldO1xuICAgICAgICB1cGRhdGVBbmRRdWV1ZVJlbmRlckNvbW1hbmQoXG4gICAgICAgICAgZ3JvdW5kUHJpbWl0aXZlLFxuICAgICAgICAgIGNvbW1hbmQsXG4gICAgICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgICAgICBtb2RlbE1hdHJpeCxcbiAgICAgICAgICBjdWxsLFxuICAgICAgICAgIGJvdW5kaW5nVm9sdW1lLFxuICAgICAgICAgIGRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHBhc3Nlcy5waWNrKSB7XG4gICAgdmFyIHBpY2tMZW5ndGggPSBwaWNrQ29tbWFuZHMubGVuZ3RoO1xuXG4gICAgdmFyIHBpY2tPZmZzZXRzO1xuICAgIGlmICghZ3JvdW5kUHJpbWl0aXZlLl91c2VGcmFnbWVudEN1bGxpbmcpIHtcbiAgICAgIC8vIE11c3QgYmUgdXNpbmcgcGljayBvZmZzZXRzXG4gICAgICBwaWNrT2Zmc2V0cyA9IGNsYXNzaWZpY2F0aW9uUHJpbWl0aXZlLl9wcmltaXRpdmUuX3BpY2tPZmZzZXRzO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgcGlja0xlbmd0aDsgKytpKSB7XG4gICAgICBib3VuZGluZ1ZvbHVtZSA9IGJvdW5kaW5nVm9sdW1lc1tib3VuZGluZ1ZvbHVtZUluZGV4KGksIHBpY2tMZW5ndGgpXTtcbiAgICAgIGlmICghZ3JvdW5kUHJpbWl0aXZlLl91c2VGcmFnbWVudEN1bGxpbmcpIHtcbiAgICAgICAgdmFyIHBpY2tPZmZzZXQgPSBwaWNrT2Zmc2V0c1tib3VuZGluZ1ZvbHVtZUluZGV4KGksIHBpY2tMZW5ndGgpXTtcbiAgICAgICAgYm91bmRpbmdWb2x1bWUgPSBib3VuZGluZ1ZvbHVtZXNbcGlja09mZnNldC5pbmRleF07XG4gICAgICB9XG4gICAgICBpZiAocXVldWVUZXJyYWluQ29tbWFuZHMpIHtcbiAgICAgICAgY29tbWFuZCA9IHBpY2tDb21tYW5kc1tpXTtcbiAgICAgICAgdXBkYXRlQW5kUXVldWVQaWNrQ29tbWFuZChcbiAgICAgICAgICBncm91bmRQcmltaXRpdmUsXG4gICAgICAgICAgY29tbWFuZCxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIG1vZGVsTWF0cml4LFxuICAgICAgICAgIGN1bGwsXG4gICAgICAgICAgYm91bmRpbmdWb2x1bWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChxdWV1ZTNEVGlsZXNDb21tYW5kcykge1xuICAgICAgICBjb21tYW5kID0gcGlja0NvbW1hbmRzW2ldLmRlcml2ZWRDb21tYW5kcy50aWxlc2V0O1xuICAgICAgICB1cGRhdGVBbmRRdWV1ZVBpY2tDb21tYW5kKFxuICAgICAgICAgIGdyb3VuZFByaW1pdGl2ZSxcbiAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgICAgY3VsbCxcbiAgICAgICAgICBib3VuZGluZ1ZvbHVtZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIHRlcnJhaW4gaGVpZ2h0cy4gVGhpcyBvbmx5IG5lZWRzIHRvIGJlIGNhbGxlZCBpZiB5b3UgYXJlIGNyZWF0aW5nIHRoZVxuICogR3JvdW5kUHJpbWl0aXZlIHN5bmNocm9ub3VzbHkuXG4gKlxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IEEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvbmNlIHRoZSB0ZXJyYWluIGhlaWdodHMgaGF2ZSBiZWVuIGxvYWRlZC5cbiAqXG4gKi9cbkdyb3VuZFByaW1pdGl2ZS5pbml0aWFsaXplVGVycmFpbkhlaWdodHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBBcHByb3hpbWF0ZVRlcnJhaW5IZWlnaHRzLmluaXRpYWxpemUoKTtcbn07XG5cbi8qKlxuICogQ2FsbGVkIHdoZW4ge0BsaW5rIFZpZXdlcn0gb3Ige0BsaW5rIENlc2l1bVdpZGdldH0gcmVuZGVyIHRoZSBzY2VuZSB0b1xuICogZ2V0IHRoZSBkcmF3IGNvbW1hbmRzIG5lZWRlZCB0byByZW5kZXIgdGhpcyBwcmltaXRpdmUuXG4gKiA8cD5cbiAqIERvIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24gZGlyZWN0bHkuICBUaGlzIGlzIGRvY3VtZW50ZWQganVzdCB0b1xuICogbGlzdCB0aGUgZXhjZXB0aW9ucyB0aGF0IG1heSBiZSBwcm9wYWdhdGVkIHdoZW4gdGhlIHNjZW5lIGlzIHJlbmRlcmVkOlxuICogPC9wPlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBGb3Igc3luY2hyb25vdXMgR3JvdW5kUHJpbWl0aXZlLCB5b3UgbXVzdCBjYWxsIEdyb3VuZFByaW1pdGl2ZS5pbml0aWFsaXplVGVycmFpbkhlaWdodHMoKSBhbmQgd2FpdCBmb3IgdGhlIHJldHVybmVkIHByb21pc2UgdG8gcmVzb2x2ZS5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBBbGwgaW5zdGFuY2UgZ2VvbWV0cmllcyBtdXN0IGhhdmUgdGhlIHNhbWUgcHJpbWl0aXZlVHlwZS5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBBcHBlYXJhbmNlIGFuZCBtYXRlcmlhbCBoYXZlIGEgdW5pZm9ybSB3aXRoIHRoZSBzYW1lIG5hbWUuXG4gKi9cbkdyb3VuZFByaW1pdGl2ZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3ByaW1pdGl2ZSkgJiYgIWRlZmluZWQodGhpcy5nZW9tZXRyeUluc3RhbmNlcykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIUFwcHJveGltYXRlVGVycmFpbkhlaWdodHMuaW5pdGlhbGl6ZWQpIHtcbiAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgIGlmICghdGhpcy5hc3luY2hyb25vdXMpIHtcbiAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgXCJGb3Igc3luY2hyb25vdXMgR3JvdW5kUHJpbWl0aXZlcywgeW91IG11c3QgY2FsbCBHcm91bmRQcmltaXRpdmUuaW5pdGlhbGl6ZVRlcnJhaW5IZWlnaHRzKCkgYW5kIHdhaXQgZm9yIHRoZSByZXR1cm5lZCBwcm9taXNlIHRvIHJlc29sdmUuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgR3JvdW5kUHJpbWl0aXZlLmluaXRpYWxpemVUZXJyYWluSGVpZ2h0cygpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIHByaW1pdGl2ZU9wdGlvbnMgPSB0aGlzLl9jbGFzc2lmaWNhdGlvblByaW1pdGl2ZU9wdGlvbnM7XG5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3ByaW1pdGl2ZSkpIHtcbiAgICB2YXIgZWxsaXBzb2lkID0gZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uLmVsbGlwc29pZDtcblxuICAgIHZhciBpbnN0YW5jZTtcbiAgICB2YXIgZ2VvbWV0cnk7XG4gICAgdmFyIGluc3RhbmNlVHlwZTtcblxuICAgIHZhciBpbnN0YW5jZXMgPSBBcnJheS5pc0FycmF5KHRoaXMuZ2VvbWV0cnlJbnN0YW5jZXMpXG4gICAgICA/IHRoaXMuZ2VvbWV0cnlJbnN0YW5jZXNcbiAgICAgIDogW3RoaXMuZ2VvbWV0cnlJbnN0YW5jZXNdO1xuICAgIHZhciBsZW5ndGggPSBpbnN0YW5jZXMubGVuZ3RoO1xuICAgIHZhciBncm91bmRJbnN0YW5jZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcblxuICAgIHZhciBpO1xuICAgIHZhciByZWN0YW5nbGU7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBpbnN0YW5jZSA9IGluc3RhbmNlc1tpXTtcbiAgICAgIGdlb21ldHJ5ID0gaW5zdGFuY2UuZ2VvbWV0cnk7XG4gICAgICB2YXIgaW5zdGFuY2VSZWN0YW5nbGUgPSBnZXRSZWN0YW5nbGUoZnJhbWVTdGF0ZSwgZ2VvbWV0cnkpO1xuICAgICAgaWYgKCFkZWZpbmVkKHJlY3RhbmdsZSkpIHtcbiAgICAgICAgcmVjdGFuZ2xlID0gUmVjdGFuZ2xlLmNsb25lKGluc3RhbmNlUmVjdGFuZ2xlKTtcbiAgICAgIH0gZWxzZSBpZiAoZGVmaW5lZChpbnN0YW5jZVJlY3RhbmdsZSkpIHtcbiAgICAgICAgUmVjdGFuZ2xlLnVuaW9uKHJlY3RhbmdsZSwgaW5zdGFuY2VSZWN0YW5nbGUsIHJlY3RhbmdsZSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBpZCA9IGluc3RhbmNlLmlkO1xuICAgICAgaWYgKGRlZmluZWQoaWQpICYmIGRlZmluZWQoaW5zdGFuY2VSZWN0YW5nbGUpKSB7XG4gICAgICAgIHZhciBib3VuZGluZ1NwaGVyZSA9IEFwcHJveGltYXRlVGVycmFpbkhlaWdodHMuZ2V0Qm91bmRpbmdTcGhlcmUoXG4gICAgICAgICAgaW5zdGFuY2VSZWN0YW5nbGUsXG4gICAgICAgICAgZWxsaXBzb2lkXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX2JvdW5kaW5nU3BoZXJlc0tleXMucHVzaChpZCk7XG4gICAgICAgIHRoaXMuX2JvdW5kaW5nU3BoZXJlcy5wdXNoKGJvdW5kaW5nU3BoZXJlKTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2VUeXBlID0gZ2VvbWV0cnkuY29uc3RydWN0b3I7XG4gICAgICBpZiAoIWRlZmluZWQoaW5zdGFuY2VUeXBlKSB8fCAhZGVmaW5lZChpbnN0YW5jZVR5cGUuY3JlYXRlU2hhZG93Vm9sdW1lKSkge1xuICAgICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJOb3QgYWxsIG9mIHRoZSBnZW9tZXRyeSBpbnN0YW5jZXMgaGF2ZSBHcm91bmRQcmltaXRpdmUgc3VwcG9ydC5cIlxuICAgICAgICApO1xuICAgICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3cgY29tcHV0ZSB0aGUgbWluL21heCBoZWlnaHRzIGZvciB0aGUgcHJpbWl0aXZlXG4gICAgc2V0TWluTWF4VGVycmFpbkhlaWdodHModGhpcywgcmVjdGFuZ2xlLCBlbGxpcHNvaWQpO1xuICAgIHZhciBleGFnZ2VyYXRpb24gPSBmcmFtZVN0YXRlLnRlcnJhaW5FeGFnZ2VyYXRpb247XG4gICAgdmFyIGV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0ID1cbiAgICAgIGZyYW1lU3RhdGUudGVycmFpbkV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0O1xuICAgIHRoaXMuX21pbkhlaWdodCA9IFRlcnJhaW5FeGFnZ2VyYXRpb24uZ2V0SGVpZ2h0KFxuICAgICAgdGhpcy5fbWluVGVycmFpbkhlaWdodCxcbiAgICAgIGV4YWdnZXJhdGlvbixcbiAgICAgIGV4YWdnZXJhdGlvblJlbGF0aXZlSGVpZ2h0XG4gICAgKTtcbiAgICB0aGlzLl9tYXhIZWlnaHQgPSBUZXJyYWluRXhhZ2dlcmF0aW9uLmdldEhlaWdodChcbiAgICAgIHRoaXMuX21heFRlcnJhaW5IZWlnaHQsXG4gICAgICBleGFnZ2VyYXRpb24sXG4gICAgICBleGFnZ2VyYXRpb25SZWxhdGl2ZUhlaWdodFxuICAgICk7XG5cbiAgICB2YXIgdXNlRnJhZ21lbnRDdWxsaW5nID0gR3JvdW5kUHJpbWl0aXZlLl9zdXBwb3J0c01hdGVyaWFscyhcbiAgICAgIGZyYW1lU3RhdGUuY29udGV4dFxuICAgICk7XG4gICAgdGhpcy5fdXNlRnJhZ21lbnRDdWxsaW5nID0gdXNlRnJhZ21lbnRDdWxsaW5nO1xuXG4gICAgaWYgKHVzZUZyYWdtZW50Q3VsbGluZykge1xuICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gYWRkIHNwaGVyaWNhbCBvciBwbGFuYXIgZXh0ZW50IGF0dHJpYnV0ZXMgZm9yIGNvbXB1dGluZyB0ZXh0dXJlIGNvb3JkaW5hdGVzLlxuICAgICAgLy8gVGhpcyBkZXBlbmRzIG9uIHRoZSBzaXplIG9mIHRoZSBHZW9tZXRyeUluc3RhbmNlcy5cbiAgICAgIHZhciBhdHRyaWJ1dGVzO1xuICAgICAgdmFyIHVzZVBsYW5hckV4dGVudHMgPSB0cnVlO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIGluc3RhbmNlID0gaW5zdGFuY2VzW2ldO1xuICAgICAgICBnZW9tZXRyeSA9IGluc3RhbmNlLmdlb21ldHJ5O1xuICAgICAgICByZWN0YW5nbGUgPSBnZXRSZWN0YW5nbGUoZnJhbWVTdGF0ZSwgZ2VvbWV0cnkpO1xuICAgICAgICBpZiAoU2hhZG93Vm9sdW1lQXBwZWFyYW5jZS5zaG91bGRVc2VTcGhlcmljYWxDb29yZGluYXRlcyhyZWN0YW5nbGUpKSB7XG4gICAgICAgICAgdXNlUGxhbmFyRXh0ZW50cyA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlc1tpXTtcbiAgICAgICAgZ2VvbWV0cnkgPSBpbnN0YW5jZS5nZW9tZXRyeTtcbiAgICAgICAgaW5zdGFuY2VUeXBlID0gZ2VvbWV0cnkuY29uc3RydWN0b3I7XG5cbiAgICAgICAgdmFyIGJvdW5kaW5nUmVjdGFuZ2xlID0gZ2V0UmVjdGFuZ2xlKGZyYW1lU3RhdGUsIGdlb21ldHJ5KTtcbiAgICAgICAgdmFyIHRleHR1cmVDb29yZGluYXRlUm90YXRpb25Qb2ludHMgPVxuICAgICAgICAgIGdlb21ldHJ5LnRleHR1cmVDb29yZGluYXRlUm90YXRpb25Qb2ludHM7XG5cbiAgICAgICAgaWYgKHVzZVBsYW5hckV4dGVudHMpIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzID0gU2hhZG93Vm9sdW1lQXBwZWFyYW5jZS5nZXRQbGFuYXJUZXh0dXJlQ29vcmRpbmF0ZUF0dHJpYnV0ZXMoXG4gICAgICAgICAgICBib3VuZGluZ1JlY3RhbmdsZSxcbiAgICAgICAgICAgIHRleHR1cmVDb29yZGluYXRlUm90YXRpb25Qb2ludHMsXG4gICAgICAgICAgICBlbGxpcHNvaWQsXG4gICAgICAgICAgICBmcmFtZVN0YXRlLm1hcFByb2plY3Rpb24sXG4gICAgICAgICAgICB0aGlzLl9tYXhIZWlnaHRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF0dHJpYnV0ZXMgPSBTaGFkb3dWb2x1bWVBcHBlYXJhbmNlLmdldFNwaGVyaWNhbEV4dGVudEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKFxuICAgICAgICAgICAgYm91bmRpbmdSZWN0YW5nbGUsXG4gICAgICAgICAgICB0ZXh0dXJlQ29vcmRpbmF0ZVJvdGF0aW9uUG9pbnRzLFxuICAgICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgICAgZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbnN0YW5jZUF0dHJpYnV0ZXMgPSBpbnN0YW5jZS5hdHRyaWJ1dGVzO1xuICAgICAgICBmb3IgKHZhciBhdHRyaWJ1dGVLZXkgaW4gaW5zdGFuY2VBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgaWYgKGluc3RhbmNlQXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVLZXkpKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzW2F0dHJpYnV0ZUtleV0gPSBpbnN0YW5jZUF0dHJpYnV0ZXNbYXR0cmlidXRlS2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBncm91bmRJbnN0YW5jZXNbaV0gPSBuZXcgR2VvbWV0cnlJbnN0YW5jZSh7XG4gICAgICAgICAgZ2VvbWV0cnk6IGluc3RhbmNlVHlwZS5jcmVhdGVTaGFkb3dWb2x1bWUoXG4gICAgICAgICAgICBnZW9tZXRyeSxcbiAgICAgICAgICAgIGdldENvbXB1dGVNaW5pbXVtSGVpZ2h0RnVuY3Rpb24odGhpcyksXG4gICAgICAgICAgICBnZXRDb21wdXRlTWF4aW11bUhlaWdodEZ1bmN0aW9uKHRoaXMpXG4gICAgICAgICAgKSxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgICAgICAgIGlkOiBpbnN0YW5jZS5pZCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENsYXNzaWZpY2F0aW9uUHJpbWl0aXZlIHdpbGwgY2hlY2sgaWYgdGhlIGNvbG9ycyBhcmUgYWxsIHRoZSBzYW1lIGlmIGl0IGRldGVjdHMgbGFjayBvZiBmcmFnbWVudCBjdWxsaW5nIGF0dHJpYnV0ZXNcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlc1tpXTtcbiAgICAgICAgZ2VvbWV0cnkgPSBpbnN0YW5jZS5nZW9tZXRyeTtcbiAgICAgICAgaW5zdGFuY2VUeXBlID0gZ2VvbWV0cnkuY29uc3RydWN0b3I7XG4gICAgICAgIGdyb3VuZEluc3RhbmNlc1tpXSA9IG5ldyBHZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgICBnZW9tZXRyeTogaW5zdGFuY2VUeXBlLmNyZWF0ZVNoYWRvd1ZvbHVtZShcbiAgICAgICAgICAgIGdlb21ldHJ5LFxuICAgICAgICAgICAgZ2V0Q29tcHV0ZU1pbmltdW1IZWlnaHRGdW5jdGlvbih0aGlzKSxcbiAgICAgICAgICAgIGdldENvbXB1dGVNYXhpbXVtSGVpZ2h0RnVuY3Rpb24odGhpcylcbiAgICAgICAgICApLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IGluc3RhbmNlLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgaWQ6IGluc3RhbmNlLmlkLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcmltaXRpdmVPcHRpb25zLmdlb21ldHJ5SW5zdGFuY2VzID0gZ3JvdW5kSW5zdGFuY2VzO1xuICAgIHByaW1pdGl2ZU9wdGlvbnMuYXBwZWFyYW5jZSA9IHRoaXMuYXBwZWFyYW5jZTtcblxuICAgIHByaW1pdGl2ZU9wdGlvbnMuX2NyZWF0ZUJvdW5kaW5nVm9sdW1lRnVuY3Rpb24gPSBmdW5jdGlvbiAoXG4gICAgICBmcmFtZVN0YXRlLFxuICAgICAgZ2VvbWV0cnlcbiAgICApIHtcbiAgICAgIGNyZWF0ZUJvdW5kaW5nVm9sdW1lKHRoYXQsIGZyYW1lU3RhdGUsIGdlb21ldHJ5KTtcbiAgICB9O1xuICAgIHByaW1pdGl2ZU9wdGlvbnMuX3VwZGF0ZUFuZFF1ZXVlQ29tbWFuZHNGdW5jdGlvbiA9IGZ1bmN0aW9uIChcbiAgICAgIHByaW1pdGl2ZSxcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICBjb2xvckNvbW1hbmRzLFxuICAgICAgcGlja0NvbW1hbmRzLFxuICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICBjdWxsLFxuICAgICAgZGVidWdTaG93Qm91bmRpbmdWb2x1bWUsXG4gICAgICB0d29QYXNzZXNcbiAgICApIHtcbiAgICAgIHVwZGF0ZUFuZFF1ZXVlQ29tbWFuZHMoXG4gICAgICAgIHRoYXQsXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIGNvbG9yQ29tbWFuZHMsXG4gICAgICAgIHBpY2tDb21tYW5kcyxcbiAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgIGN1bGwsXG4gICAgICAgIGRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lLFxuICAgICAgICB0d29QYXNzZXNcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHRoaXMuX3ByaW1pdGl2ZSA9IG5ldyBDbGFzc2lmaWNhdGlvblByaW1pdGl2ZShwcmltaXRpdmVPcHRpb25zKTtcbiAgICB0aGlzLl9wcmltaXRpdmUucmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgdGhhdC5fcmVhZHkgPSB0cnVlO1xuXG4gICAgICBpZiAodGhhdC5yZWxlYXNlR2VvbWV0cnlJbnN0YW5jZXMpIHtcbiAgICAgICAgdGhhdC5nZW9tZXRyeUluc3RhbmNlcyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgdmFyIGVycm9yID0gcHJpbWl0aXZlLl9lcnJvcjtcbiAgICAgIGlmICghZGVmaW5lZChlcnJvcikpIHtcbiAgICAgICAgdGhhdC5fcmVhZHlQcm9taXNlLnJlc29sdmUodGhhdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGF0Ll9yZWFkeVByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuX3ByaW1pdGl2ZS5hcHBlYXJhbmNlID0gdGhpcy5hcHBlYXJhbmNlO1xuICB0aGlzLl9wcmltaXRpdmUuc2hvdyA9IHRoaXMuc2hvdztcbiAgdGhpcy5fcHJpbWl0aXZlLmRlYnVnU2hvd1NoYWRvd1ZvbHVtZSA9IHRoaXMuZGVidWdTaG93U2hhZG93Vm9sdW1lO1xuICB0aGlzLl9wcmltaXRpdmUuZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSB0aGlzLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lO1xuICB0aGlzLl9wcmltaXRpdmUudXBkYXRlKGZyYW1lU3RhdGUpO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91bmRQcmltaXRpdmUucHJvdG90eXBlLmdldEJvdW5kaW5nU3BoZXJlID0gZnVuY3Rpb24gKGlkKSB7XG4gIHZhciBpbmRleCA9IHRoaXMuX2JvdW5kaW5nU3BoZXJlc0tleXMuaW5kZXhPZihpZCk7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICByZXR1cm4gdGhpcy5fYm91bmRpbmdTcGhlcmVzW2luZGV4XTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1vZGlmaWFibGUgcGVyLWluc3RhbmNlIGF0dHJpYnV0ZXMgZm9yIGEge0BsaW5rIEdlb21ldHJ5SW5zdGFuY2V9LlxuICpcbiAqIEBwYXJhbSB7Kn0gaWQgVGhlIGlkIG9mIHRoZSB7QGxpbmsgR2VvbWV0cnlJbnN0YW5jZX0uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgdHlwZWQgYXJyYXkgaW4gdGhlIGF0dHJpYnV0ZSdzIGZvcm1hdCBvciB1bmRlZmluZWQgaWYgdGhlIGlzIG5vIGluc3RhbmNlIHdpdGggaWQuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IG11c3QgY2FsbCB1cGRhdGUgYmVmb3JlIGNhbGxpbmcgZ2V0R2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmdldEdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGVzKCdhbiBpZCcpO1xuICogYXR0cmlidXRlcy5jb2xvciA9IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZShDZXNpdW0uQ29sb3IuQVFVQSk7XG4gKiBhdHRyaWJ1dGVzLnNob3cgPSBDZXNpdW0uU2hvd0dlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUudG9WYWx1ZSh0cnVlKTtcbiAqL1xuR3JvdW5kUHJpbWl0aXZlLnByb3RvdHlwZS5nZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyA9IGZ1bmN0aW9uIChpZCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQodGhpcy5fcHJpbWl0aXZlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwibXVzdCBjYWxsIHVwZGF0ZSBiZWZvcmUgY2FsbGluZyBnZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlc1wiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZS5nZXRHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlcyhpZCk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICogPHA+XG4gKiBJZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpdCBzaG91bGQgbm90IGJlIHVzZWQ7IGNhbGxpbmcgYW55IGZ1bmN0aW9uIG90aGVyIHRoYW5cbiAqIDxjb2RlPmlzRGVzdHJveWVkPC9jb2RlPiB3aWxsIHJlc3VsdCBpbiBhIHtAbGluayBEZXZlbG9wZXJFcnJvcn0gZXhjZXB0aW9uLlxuICogPC9wPlxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGlzIG9iamVjdCB3YXMgZGVzdHJveWVkOyBvdGhlcndpc2UsIDxjb2RlPmZhbHNlPC9jb2RlPi5cbiAqXG4gKiBAc2VlIEdyb3VuZFByaW1pdGl2ZSNkZXN0cm95XG4gKi9cbkdyb3VuZFByaW1pdGl2ZS5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIFdlYkdMIHJlc291cmNlcyBoZWxkIGJ5IHRoaXMgb2JqZWN0LiAgRGVzdHJveWluZyBhbiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljXG4gKiByZWxlYXNlIG9mIFdlYkdMIHJlc291cmNlcywgaW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0byBkZXN0cm95IHRoaXMgb2JqZWN0LlxuICogPHA+XG4gKiBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxuICogPGNvZGU+aXNEZXN0cm95ZWQ8L2NvZGU+IHdpbGwgcmVzdWx0IGluIGEge0BsaW5rIERldmVsb3BlckVycm9yfSBleGNlcHRpb24uICBUaGVyZWZvcmUsXG4gKiBhc3NpZ24gdGhlIHJldHVybiB2YWx1ZSAoPGNvZGU+dW5kZWZpbmVkPC9jb2RlPikgdG8gdGhlIG9iamVjdCBhcyBkb25lIGluIHRoZSBleGFtcGxlLlxuICogPC9wPlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogZSA9IGUgJiYgZS5kZXN0cm95KCk7XG4gKlxuICogQHNlZSBHcm91bmRQcmltaXRpdmUjaXNEZXN0cm95ZWRcbiAqL1xuR3JvdW5kUHJpbWl0aXZlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9wcmltaXRpdmUgPSB0aGlzLl9wcmltaXRpdmUgJiYgdGhpcy5fcHJpbWl0aXZlLmRlc3Ryb3koKTtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuXG4vKipcbiAqIEV4cG9zZWQgZm9yIHRlc3RpbmcuXG4gKlxuICogQHBhcmFtIHtDb250ZXh0fSBjb250ZXh0IFJlbmRlcmluZyBjb250ZXh0XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIGN1cnJlbnQgY29udGV4dCBzdXBwb3J0cyBtYXRlcmlhbHMgb24gR3JvdW5kUHJpbWl0aXZlcy5cbiAqIEBwcml2YXRlXG4gKi9cbkdyb3VuZFByaW1pdGl2ZS5fc3VwcG9ydHNNYXRlcmlhbHMgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICByZXR1cm4gY29udGV4dC5kZXB0aFRleHR1cmU7XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gU2NlbmUgc3VwcG9ydHMgbWF0ZXJpYWxzIG9uIEdyb3VuZFByaW1pdGl2ZXMuXG4gKiBNYXRlcmlhbHMgb24gR3JvdW5kUHJpbWl0aXZlcyByZXF1aXJlIHN1cHBvcnQgZm9yIHRoZSBXRUJHTF9kZXB0aF90ZXh0dXJlIGV4dGVuc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSBUaGUgY3VycmVudCBzY2VuZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgY3VycmVudCBzY2VuZSBzdXBwb3J0cyBtYXRlcmlhbHMgb24gR3JvdW5kUHJpbWl0aXZlcy5cbiAqL1xuR3JvdW5kUHJpbWl0aXZlLnN1cHBvcnRzTWF0ZXJpYWxzID0gZnVuY3Rpb24gKHNjZW5lKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJzY2VuZVwiLCBzY2VuZSk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHJldHVybiBHcm91bmRQcmltaXRpdmUuX3N1cHBvcnRzTWF0ZXJpYWxzKHNjZW5lLmZyYW1lU3RhdGUuY29udGV4dCk7XG59O1xuZXhwb3J0IGRlZmF1bHQgR3JvdW5kUHJpbWl0aXZlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///47780\n')},11654:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82982);\n/* harmony import */ var _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(18349);\n\n\n\n\n\n/**\n * Metadata about a group of {@link Cesium3DTileContent}\n * <p>\n * See the {@link https://github.com/CesiumGS/3d-tiles/tree/3d-tiles-next/extensions/3DTILES_metadata|3DTILES_metadata Extension} for 3D Tiles\n * </p>\n *\n * @param {Object} options Object with the following properties:\n * @param {String} options.id The ID of the group.\n * @param {Object} options.group The group JSON object.\n * @param {MetadataClass} [options.class] The class that group metadata conforms to.\n *\n * @alias GroupMetadata\n * @constructor\n * @private\n * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium\'s standard deprecation policy.\n */\nfunction GroupMetadata(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var id = options.id;\n  var group = options.group;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.string */ .Z.typeOf.string("options.id", id);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.group", group);\n  //>>includeEnd(\'debug\');\n\n  var properties = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(group.properties) ? group.properties : {};\n\n  this._class = options.class;\n  this._properties = properties;\n  this._id = id;\n  this._name = group.name;\n  this._description = group.description;\n  this._extras = group.extras;\n  this._extensions = group.extensions;\n}\n\nObject.defineProperties(GroupMetadata.prototype, {\n  /**\n   * The class that properties conform to.\n   *\n   * @memberof GroupMetadata.prototype\n   * @type {MetadataClass}\n   * @readonly\n   * @private\n   */\n  class: {\n    get: function () {\n      return this._class;\n    },\n  },\n\n  /**\n   * The ID of the group.\n   *\n   * @memberof GroupMetadata.prototype\n   * @type {String}\n   * @readonly\n   * @private\n   */\n  id: {\n    get: function () {\n      return this._id;\n    },\n  },\n\n  /**\n   * The name of the group.\n   *\n   * @memberof GroupMetadata.prototype\n   * @type {String}\n   * @readonly\n   * @private\n   */\n  name: {\n    get: function () {\n      return this._name;\n    },\n  },\n\n  /**\n   * The description of the group.\n   *\n   * @memberof GroupMetadata.prototype\n   * @type {String}\n   * @readonly\n   * @private\n   */\n  description: {\n    get: function () {\n      return this._description;\n    },\n  },\n\n  /**\n   * Extras in the JSON object.\n   *\n   * @memberof GroupMetadata.prototype\n   * @type {*}\n   * @readonly\n   * @private\n   */\n  extras: {\n    get: function () {\n      return this._extras;\n    },\n  },\n\n  /**\n   * Extensions in the JSON object.\n   *\n   * @memberof GroupMetadata.prototype\n   * @type {Object}\n   * @readonly\n   * @private\n   */\n  extensions: {\n    get: function () {\n      return this._extensions;\n    },\n  },\n});\n\n/**\n * Returns whether the group has this property.\n *\n * @param {String} propertyId The case-sensitive ID of the property.\n * @returns {Boolean} Whether the group has this property.\n * @private\n */\nGroupMetadata.prototype.hasProperty = function (propertyId) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].hasProperty */ .Z.hasProperty(propertyId, this._properties, this._class);\n};\n\n/**\n * Returns whether the group has a property with the given semantic.\n *\n * @param {String} semantic The case-sensitive semantic of the property.\n * @returns {Boolean} Whether the group has a property with the given semantic.\n * @private\n */\nGroupMetadata.prototype.hasPropertyBySemantic = function (semantic) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].hasPropertyBySemantic */ .Z.hasPropertyBySemantic(\n    semantic,\n    this._properties,\n    this._class\n  );\n};\n\n/**\n * Returns an array of property IDs.\n *\n * @param {String[]} [results] An array into which to store the results.\n * @returns {String[]} The property IDs.\n * @private\n */\nGroupMetadata.prototype.getPropertyIds = function (results) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getPropertyIds */ .Z.getPropertyIds(this._properties, this._class, results);\n};\n\n/**\n * Returns a copy of the value of the property with the given ID.\n * <p>\n * If the property is normalized the normalized value is returned.\n * </p>\n *\n * @param {String} propertyId The case-sensitive ID of the property.\n * @returns {*} The value of the property or <code>undefined</code> if the group does not have this property.\n * @private\n */\nGroupMetadata.prototype.getProperty = function (propertyId) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getProperty */ .Z.getProperty(propertyId, this._properties, this._class);\n};\n\n/**\n * Sets the value of the property with the given ID.\n * <p>\n * If the property is normalized a normalized value must be provided to this function.\n * </p>\n *\n * @param {String} propertyId The case-sensitive ID of the property.\n * @param {*} value The value of the property that will be copied.\n * @returns {Boolean} <code>true</code> if the property was set, <code>false</code> otherwise.\n * @private\n */\nGroupMetadata.prototype.setProperty = function (propertyId, value) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].setProperty */ .Z.setProperty(\n    propertyId,\n    value,\n    this._properties,\n    this._class\n  );\n};\n\n/**\n * Returns a copy of the value of the property with the given semantic.\n *\n * @param {String} semantic The case-sensitive semantic of the property.\n * @returns {*} The value of the property or <code>undefined</code> if the group does not have this semantic.\n * @private\n */\nGroupMetadata.prototype.getPropertyBySemantic = function (semantic) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getPropertyBySemantic */ .Z.getPropertyBySemantic(\n    semantic,\n    this._properties,\n    this._class\n  );\n};\n\n/**\n * Sets the value of the property with the given semantic.\n *\n * @param {String} semantic The case-sensitive semantic of the property.\n * @param {*} value The value of the property that will be copied.\n * @returns {Boolean} <code>true</code> if the property was set, <code>false</code> otherwise.\n * @private\n */\nGroupMetadata.prototype.setPropertyBySemantic = function (semantic, value) {\n  return _MetadataEntity_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].setPropertyBySemantic */ .Z.setPropertyBySemantic(\n    semantic,\n    value,\n    this._properties,\n    this._class\n  );\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (GroupMetadata);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE2NTQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFxQztBQUNjO0FBQ1Y7QUFDUTs7QUFFakQ7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSxZQUFZLHNIQUFzSDtBQUNsSTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxlQUFlO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwRUFBWSxVQUFVLGdHQUF5QjtBQUMzRDtBQUNBOztBQUVBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwyRkFBbUI7QUFDckI7O0FBRUEsbUJBQW1CLHFFQUFPOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsU0FBUywyRkFBMEI7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtHQUFvQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxpR0FBNkI7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsR0FBRztBQUNoQjtBQUNBO0FBQ0E7QUFDQSxTQUFTLDJGQUEwQjtBQUNuQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxHQUFHO0FBQ2QsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkZBQTBCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxHQUFHO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0dBQW9DO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsR0FBRztBQUNkLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtHQUFvQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseURBQWUsYUFBYSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dyb3VwTWV0YWRhdGEuanM/MzViNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgTWV0YWRhdGFFbnRpdHkgZnJvbSBcIi4vTWV0YWRhdGFFbnRpdHkuanNcIjtcblxuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIGdyb3VwIG9mIHtAbGluayBDZXNpdW0zRFRpbGVDb250ZW50fVxuICogPHA+XG4gKiBTZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vQ2VzaXVtR1MvM2QtdGlsZXMvdHJlZS8zZC10aWxlcy1uZXh0L2V4dGVuc2lvbnMvM0RUSUxFU19tZXRhZGF0YXwzRFRJTEVTX21ldGFkYXRhIEV4dGVuc2lvbn0gZm9yIDNEIFRpbGVzXG4gKiA8L3A+XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuaWQgVGhlIElEIG9mIHRoZSBncm91cC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmdyb3VwIFRoZSBncm91cCBKU09OIG9iamVjdC5cbiAqIEBwYXJhbSB7TWV0YWRhdGFDbGFzc30gW29wdGlvbnMuY2xhc3NdIFRoZSBjbGFzcyB0aGF0IGdyb3VwIG1ldGFkYXRhIGNvbmZvcm1zIHRvLlxuICpcbiAqIEBhbGlhcyBHcm91cE1ldGFkYXRhXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKiBAZXhwZXJpbWVudGFsIFRoaXMgZmVhdHVyZSBpcyB1c2luZyBwYXJ0IG9mIHRoZSAzRCBUaWxlcyBzcGVjIHRoYXQgaXMgbm90IGZpbmFsIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IENlc2l1bSdzIHN0YW5kYXJkIGRlcHJlY2F0aW9uIHBvbGljeS5cbiAqL1xuZnVuY3Rpb24gR3JvdXBNZXRhZGF0YShvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBpZCA9IG9wdGlvbnMuaWQ7XG4gIHZhciBncm91cCA9IG9wdGlvbnMuZ3JvdXA7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2sudHlwZU9mLnN0cmluZyhcIm9wdGlvbnMuaWRcIiwgaWQpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5ncm91cFwiLCBncm91cCk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBwcm9wZXJ0aWVzID0gZGVmaW5lZChncm91cC5wcm9wZXJ0aWVzKSA/IGdyb3VwLnByb3BlcnRpZXMgOiB7fTtcblxuICB0aGlzLl9jbGFzcyA9IG9wdGlvbnMuY2xhc3M7XG4gIHRoaXMuX3Byb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9uYW1lID0gZ3JvdXAubmFtZTtcbiAgdGhpcy5fZGVzY3JpcHRpb24gPSBncm91cC5kZXNjcmlwdGlvbjtcbiAgdGhpcy5fZXh0cmFzID0gZ3JvdXAuZXh0cmFzO1xuICB0aGlzLl9leHRlbnNpb25zID0gZ3JvdXAuZXh0ZW5zaW9ucztcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR3JvdXBNZXRhZGF0YS5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIFRoZSBjbGFzcyB0aGF0IHByb3BlcnRpZXMgY29uZm9ybSB0by5cbiAgICpcbiAgICogQG1lbWJlcm9mIEdyb3VwTWV0YWRhdGEucHJvdG90eXBlXG4gICAqIEB0eXBlIHtNZXRhZGF0YUNsYXNzfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNsYXNzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3M7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSBncm91cC5cbiAgICpcbiAgICogQG1lbWJlcm9mIEdyb3VwTWV0YWRhdGEucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgZ3JvdXAuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHcm91cE1ldGFkYXRhLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG5hbWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgZ3JvdXAuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHcm91cE1ldGFkYXRhLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlc2NyaXB0aW9uOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogRXh0cmFzIGluIHRoZSBKU09OIG9iamVjdC5cbiAgICpcbiAgICogQG1lbWJlcm9mIEdyb3VwTWV0YWRhdGEucHJvdG90eXBlXG4gICAqIEB0eXBlIHsqfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGV4dHJhczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2V4dHJhcztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBFeHRlbnNpb25zIGluIHRoZSBKU09OIG9iamVjdC5cbiAgICpcbiAgICogQG1lbWJlcm9mIEdyb3VwTWV0YWRhdGEucHJvdG90eXBlXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXh0ZW5zaW9uczoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2V4dGVuc2lvbnM7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgZ3JvdXAgaGFzIHRoaXMgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgVGhlIGNhc2Utc2Vuc2l0aXZlIElEIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIHRoZSBncm91cCBoYXMgdGhpcyBwcm9wZXJ0eS5cbiAqIEBwcml2YXRlXG4gKi9cbkdyb3VwTWV0YWRhdGEucHJvdG90eXBlLmhhc1Byb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5SWQpIHtcbiAgcmV0dXJuIE1ldGFkYXRhRW50aXR5Lmhhc1Byb3BlcnR5KHByb3BlcnR5SWQsIHRoaXMuX3Byb3BlcnRpZXMsIHRoaXMuX2NsYXNzKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBncm91cCBoYXMgYSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBzZW1hbnRpYy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VtYW50aWMgVGhlIGNhc2Utc2Vuc2l0aXZlIHNlbWFudGljIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIHRoZSBncm91cCBoYXMgYSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBzZW1hbnRpYy5cbiAqIEBwcml2YXRlXG4gKi9cbkdyb3VwTWV0YWRhdGEucHJvdG90eXBlLmhhc1Byb3BlcnR5QnlTZW1hbnRpYyA9IGZ1bmN0aW9uIChzZW1hbnRpYykge1xuICByZXR1cm4gTWV0YWRhdGFFbnRpdHkuaGFzUHJvcGVydHlCeVNlbWFudGljKFxuICAgIHNlbWFudGljLFxuICAgIHRoaXMuX3Byb3BlcnRpZXMsXG4gICAgdGhpcy5fY2xhc3NcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBJRHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmdbXX0gW3Jlc3VsdHNdIEFuIGFycmF5IGludG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdHMuXG4gKiBAcmV0dXJucyB7U3RyaW5nW119IFRoZSBwcm9wZXJ0eSBJRHMuXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91cE1ldGFkYXRhLnByb3RvdHlwZS5nZXRQcm9wZXJ0eUlkcyA9IGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gIHJldHVybiBNZXRhZGF0YUVudGl0eS5nZXRQcm9wZXJ0eUlkcyh0aGlzLl9wcm9wZXJ0aWVzLCB0aGlzLl9jbGFzcywgcmVzdWx0cyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gSUQuXG4gKiA8cD5cbiAqIElmIHRoZSBwcm9wZXJ0eSBpcyBub3JtYWxpemVkIHRoZSBub3JtYWxpemVkIHZhbHVlIGlzIHJldHVybmVkLlxuICogPC9wPlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUlkIFRoZSBjYXNlLXNlbnNpdGl2ZSBJRCBvZiB0aGUgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIHRoZSBncm91cCBkb2VzIG5vdCBoYXZlIHRoaXMgcHJvcGVydHkuXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91cE1ldGFkYXRhLnByb3RvdHlwZS5nZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0eUlkKSB7XG4gIHJldHVybiBNZXRhZGF0YUVudGl0eS5nZXRQcm9wZXJ0eShwcm9wZXJ0eUlkLCB0aGlzLl9wcm9wZXJ0aWVzLCB0aGlzLl9jbGFzcyk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBJRC5cbiAqIDxwPlxuICogSWYgdGhlIHByb3BlcnR5IGlzIG5vcm1hbGl6ZWQgYSBub3JtYWxpemVkIHZhbHVlIG11c3QgYmUgcHJvdmlkZWQgdG8gdGhpcyBmdW5jdGlvbi5cbiAqIDwvcD5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlJZCBUaGUgY2FzZS1zZW5zaXRpdmUgSUQgb2YgdGhlIHByb3BlcnR5LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IHRoYXQgd2lsbCBiZSBjb3BpZWQuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhlIHByb3BlcnR5IHdhcyBzZXQsIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91cE1ldGFkYXRhLnByb3RvdHlwZS5zZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0eUlkLCB2YWx1ZSkge1xuICByZXR1cm4gTWV0YWRhdGFFbnRpdHkuc2V0UHJvcGVydHkoXG4gICAgcHJvcGVydHlJZCxcbiAgICB2YWx1ZSxcbiAgICB0aGlzLl9wcm9wZXJ0aWVzLFxuICAgIHRoaXMuX2NsYXNzXG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gc2VtYW50aWMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlbWFudGljIFRoZSBjYXNlLXNlbnNpdGl2ZSBzZW1hbnRpYyBvZiB0aGUgcHJvcGVydHkuXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIHRoZSBncm91cCBkb2VzIG5vdCBoYXZlIHRoaXMgc2VtYW50aWMuXG4gKiBAcHJpdmF0ZVxuICovXG5Hcm91cE1ldGFkYXRhLnByb3RvdHlwZS5nZXRQcm9wZXJ0eUJ5U2VtYW50aWMgPSBmdW5jdGlvbiAoc2VtYW50aWMpIHtcbiAgcmV0dXJuIE1ldGFkYXRhRW50aXR5LmdldFByb3BlcnR5QnlTZW1hbnRpYyhcbiAgICBzZW1hbnRpYyxcbiAgICB0aGlzLl9wcm9wZXJ0aWVzLFxuICAgIHRoaXMuX2NsYXNzXG4gICk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBzZW1hbnRpYy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VtYW50aWMgVGhlIGNhc2Utc2Vuc2l0aXZlIHNlbWFudGljIG9mIHRoZSBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB0aGF0IHdpbGwgYmUgY29waWVkLlxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoZSBwcm9wZXJ0eSB3YXMgc2V0LCA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlLlxuICogQHByaXZhdGVcbiAqL1xuR3JvdXBNZXRhZGF0YS5wcm90b3R5cGUuc2V0UHJvcGVydHlCeVNlbWFudGljID0gZnVuY3Rpb24gKHNlbWFudGljLCB2YWx1ZSkge1xuICByZXR1cm4gTWV0YWRhdGFFbnRpdHkuc2V0UHJvcGVydHlCeVNlbWFudGljKFxuICAgIHNlbWFudGljLFxuICAgIHZhbHVlLFxuICAgIHRoaXMuX3Byb3BlcnRpZXMsXG4gICAgdGhpcy5fY2xhc3NcbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdyb3VwTWV0YWRhdGE7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11654\n')}}]);