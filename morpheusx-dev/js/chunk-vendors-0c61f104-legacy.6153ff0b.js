"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[9194],{11184:function(e,t,n){var r=n(88108),i=n(66553),a=n(59947),o=n(8182),s=n(39960),u=n(62200),c=n(82982),d=n(86511),h=n(12572),f=n(38443),l=n(68985),_=n(65121),m=n(21572),p=n(10667),g=n(87721),v=n(53642),S=n(8743),Z=n(42246),x=n(80188),b=n(88453),T=n(13222),y=n(26615);function w(e){e=(0,u.Z)(e,u.Z.EMPTY_OBJECT);var t=e.fragmentShader,n=(0,u.Z)(e.textureScale,1),o=(0,u.Z)(e.pixelFormat,f.Z.RGBA);if(i.Z.typeOf.string("options.fragmentShader",t),i.Z.typeOf.number.greaterThan("options.textureScale",n,0),i.Z.typeOf.number.lessThanOrEquals("options.textureScale",n,1),!f.Z.isColorFormat(o))throw new h.Z("options.pixelFormat must be a color format.");this._fragmentShader=t,this._uniforms=e.uniforms,this._textureScale=n,this._forcePowerOfTwo=(0,u.Z)(e.forcePowerOfTwo,!1),this._sampleMode=(0,u.Z)(e.sampleMode,y.Z.NEAREST),this._pixelFormat=o,this._pixelDatatype=(0,u.Z)(e.pixelDatatype,m.Z.UNSIGNED_BYTE),this._clearColor=(0,u.Z)(e.clearColor,a.Z.BLACK),this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._idTexture=void 0,this._actualUniforms={},this._dirtyUniforms=[],this._texturesToRelease=[],this._texturesToCreate=[],this._texturePromise=void 0;var d=new _.Z;d.scissorTest={enabled:!0,rectangle:(0,c.Z)(e.scissorRectangle)?r.Z.clone(e.scissorRectangle):new r.Z},this._passState=d,this._ready=!1;var l=e.name;(0,c.Z)(l)||(l=(0,s.Z)()),this._name=l,this._logDepthChanged=void 0,this._useLogDepth=void 0,this._selectedIdTexture=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0,this._textureCache=void 0,this._index=void 0,this.enabled=!0,this._enabled=!0}Object.defineProperties(w.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},fragmentShader:{get:function(){return this._fragmentShader}},uniforms:{get:function(){return this._uniforms}},textureScale:{get:function(){return this._textureScale}},forcePowerOfTwo:{get:function(){return this._forcePowerOfTwo}},sampleMode:{get:function(){return this._sampleMode}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},clearColor:{get:function(){return this._clearColor}},scissorRectangle:{get:function(){return this._passState.scissorTest.rectangle}},outputTexture:{get:function(){if((0,c.Z)(this._textureCache)){var e=this._textureCache.getFramebuffer(this._name);if((0,c.Z)(e))return e.getColorTexture(0)}}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}});var E=/uniform\s+sampler2D\s+depthTexture/g;function C(e,t,n){var r=t[n];return("string"===typeof r||r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof HTMLVideoElement||r instanceof ImageData)&&e._dirtyUniforms.push(n),{get:function(){return t[n]},set:function(r){var i=t[n];t[n]=r;var a=e._actualUniforms,o=a[n];(0,c.Z)(o)&&o!==i&&o instanceof S.Z&&!(0,c.Z)(e._textureCache.getStageByName(n))&&(e._texturesToRelease.push(o),delete a[n],delete a[n+"Dimensions"]),i instanceof S.Z&&e._texturesToRelease.push(i),"string"===typeof r||r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof HTMLVideoElement||r instanceof ImageData?e._dirtyUniforms.push(n):a[n]=r}}}function O(e,t){return function(){var n=e._actualUniforms[t];return"function"===typeof n?n():n}}function D(e,t){return function(){var n=e[t]();if((0,c.Z)(n))return n.dimensions}}function z(e){if(!(0,c.Z)(e._uniformMap)){var t={},n={},r=e._uniforms,i=e._actualUniforms;for(var a in r)if(r.hasOwnProperty(a)){"function"!==typeof r[a]?(t[a]=O(e,a),n[a]=C(e,r,a)):(t[a]=r[a],n[a]=r[a]),i[a]=r[a];var s=t[a]();("string"===typeof s||s instanceof S.Z||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement)&&(t[a+"Dimensions"]=D(t,a))}e._uniforms={},Object.defineProperties(e._uniforms,n),e._uniformMap=(0,o.Z)(t,{colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions},depthTexture:function(){return e._depthTexture},depthTextureDimensions:function(){return e._depthTexture.dimensions},czm_idTexture:function(){return e._idTexture},czm_selectedIdTexture:function(){return e._selectedIdTexture},czm_selectedIdTextureStep:function(){return 1/e._selectedIdTexture.width}})}}function A(e,t){if(!(0,c.Z)(e._command)||e._logDepthChanged||e._selectedDirty){var n=e._fragmentShader;if((0,c.Z)(e._selectedIdTexture)){var r=e._selectedIdTexture.width;n=n.replace(/varying\s+vec2\s+v_textureCoordinates;/g,""),n="#define CZM_SELECTED_FEATURE \nuniform sampler2D czm_idTexture; \nuniform sampler2D czm_selectedIdTexture; \nuniform float czm_selectedIdTextureStep; \nvarying vec2 v_textureCoordinates; \nbool czm_selected(vec2 offset) \n{ \n    bool selected = false;\n    vec4 id = texture2D(czm_idTexture, v_textureCoordinates + offset); \n    for (int i = 0; i < "+r+"; ++i) \n    { \n        vec4 selectedId = texture2D(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5)); \n        if (all(equal(id, selectedId))) \n        { \n            return true; \n        } \n    } \n    return false; \n} \n\nbool czm_selected() \n{ \n    return czm_selected(vec2(0.0)); \n} \n\n"+n}var i=new v.Z({defines:[e._useLogDepth?"LOG_DEPTH":""],sources:[n]});e._command=t.createViewportQuadCommand(i,{uniformMap:e._uniformMap,owner:e})}}function I(e){var t,n,r=e._sampleMode;r===y.Z.LINEAR?(t=x.Z.LINEAR,n=Z.Z.LINEAR):(t=x.Z.NEAREST,n=Z.Z.NEAREST);var i=e._sampler;(0,c.Z)(i)&&i.minificationFilter===t&&i.magnificationFilter===n||(e._sampler=new g.Z({wrapS:b.Z.CLAMP_TO_EDGE,wrapT:b.Z.CLAMP_TO_EDGE,minificationFilter:t,magnificationFilter:n}))}function P(e,t){return function(n){e._texturesToCreate.push({name:t,source:n})}}function R(e,t){return function(){return e._textureCache.getOutputTexture(t)}}function N(e,t){var n,r,i,a=e._texturesToRelease,o=a.length;for(n=0;n<o;++n)r=a[n],r=r&&r.destroy();a.length=0;var s=e._texturesToCreate;for(o=s.length,n=0;n<o;++n){var u=s[n];i=u.name;var d=u.source;e._actualUniforms[i]=new S.Z({context:t,source:d})}s.length=0;var h=e._dirtyUniforms;if(0!==h.length||(0,c.Z)(e._texturePromise)){if(0!==h.length&&!(0,c.Z)(e._texturePromise)){o=h.length;var f=e._uniforms,_=[];for(n=0;n<o;++n){i=h[n];var m=f[i],p=e._textureCache.getStageByName(m);if((0,c.Z)(p))e._actualUniforms[i]=R(e,m);else if("string"===typeof m){var g=new l.Z({url:m});_.push(g.fetchImage().then(P(e,i)))}else e._texturesToCreate.push({name:i,source:m})}h.length=0,_.length>0?(e._ready=!1,e._texturePromise=T.Z.all(_).then((function(){e._ready=!0,e._texturePromise=void 0}))):e._ready=!0}}else e._ready=!0}function L(e){(0,c.Z)(e._command)&&(e._command.shaderProgram=e._command.shaderProgram&&e._command.shaderProgram.destroy(),e._command=void 0),e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy();var t=e._textureCache;if((0,c.Z)(t)){var n=e._uniforms,r=e._actualUniforms;for(var i in r)r.hasOwnProperty(i)&&r[i]instanceof S.Z&&((0,c.Z)(t.getStageByName(n[i]))||r[i].destroy(),e._dirtyUniforms.push(i))}}function B(e){var t=(0,c.Z)(e._selected)?e._selected.length:0,n=(0,c.Z)(e._parentSelected)?e._parentSelected:0,r=e._selected!==e._selectedShadow||t!==e._selectedLength;if(r=r||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,(0,c.Z)(e._selected)&&(0,c.Z)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,c.Z)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!r&&(0,c.Z)(e._combinedSelected)){if(!(0,c.Z)(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(var i=0;i<t;++i)if(e._combinedSelected[i]!==e._combinedSelectedShadow[i])return!0}return r}function F(e,t){if(e._selectedDirty){e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy(),e._selectedIdTexture=void 0;var n=e._combinedSelected;if((0,c.Z)(n)){var r,i,o,s=0,u=n.length;for(r=0;r<u;++r)i=n[r],(0,c.Z)(i.pickIds)?s+=i.pickIds.length:(0,c.Z)(i.pickId)&&++s;if(0===u||0===s){var d=new Uint8Array(4);return d[0]=255,d[1]=255,d[2]=255,d[3]=255,void(e._selectedIdTexture=new S.Z({context:t,pixelFormat:f.Z.RGBA,pixelDatatype:m.Z.UNSIGNED_BYTE,source:{arrayBufferView:d,width:1,height:1},sampler:g.Z.NEAREST}))}var h=0,l=new Uint8Array(4*s);for(r=0;r<u;++r)if(i=n[r],(0,c.Z)(i.pickIds))for(var _=i.pickIds,p=_.length,v=0;v<p;++v)o=_[v].color,l[h]=a.Z.floatToByte(o.red),l[h+1]=a.Z.floatToByte(o.green),l[h+2]=a.Z.floatToByte(o.blue),l[h+3]=a.Z.floatToByte(o.alpha),h+=4;else(0,c.Z)(i.pickId)&&(o=i.pickId.color,l[h]=a.Z.floatToByte(o.red),l[h+1]=a.Z.floatToByte(o.green),l[h+2]=a.Z.floatToByte(o.blue),l[h+3]=a.Z.floatToByte(o.alpha),h+=4);e._selectedIdTexture=new S.Z({context:t,pixelFormat:f.Z.RGBA,pixelDatatype:m.Z.UNSIGNED_BYTE,source:{arrayBufferView:l,width:s,height:1},sampler:g.Z.NEAREST})}}}w.prototype._isSupported=function(e){return!E.test(this._fragmentShader)||e.depthTexture},w.prototype.update=function(e,t){if(this.enabled===this._enabled||this.enabled||L(this),this._enabled=this.enabled,this._enabled&&(this._logDepthChanged=t!==this._useLogDepth,this._useLogDepth=t,this._selectedDirty=B(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,c.Z)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,c.Z)(this._parentSelected)?this._parentSelected.length:0,F(this,e),z(this),N(this,e),A(this,e),I(this),this._selectedDirty=!1,this._ready)){var n=this._textureCache.getFramebuffer(this._name);if(this._command.framebuffer=n,(0,c.Z)(n)){var i,a=n.getColorTexture(0);a.width===e.drawingBufferWidth&&a.height===e.drawingBufferHeight||(i=this._renderState,(0,c.Z)(i)&&a.width===i.viewport.width&&a.height===i.viewport.height||(this._renderState=p.Z.fromCache({viewport:new r.Z(0,0,a.width,a.height)}))),this._command.renderState=i}}},w.prototype.execute=function(e,t,n,r){if((0,c.Z)(this._command)&&(0,c.Z)(this._command.framebuffer)&&this._ready&&this._enabled){this._colorTexture=t,this._depthTexture=n,this._idTexture=r,g.Z.equals(this._colorTexture.sampler,this._sampler)||(this._colorTexture.sampler=this._sampler);var i=this.scissorRectangle.width>0&&this.scissorRectangle.height>0?this._passState:void 0;(0,c.Z)(i)&&(i.context=e),this._command.execute(e,i)}},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return L(this),(0,d.Z)(this)},t["Z"]=w},13638:function(e,t,n){var r=n(68591),i=n(66553),a=n(82982),o=n(86511),s=n(12572),u=n(38443),c=n(21572),d=n(87721),h=n(8743),f=n(42246),l=n(80188),_=n(88453),m=n(7571),p=n(80875),g=n(87878),v=n(1057),S=[];function Z(){var e=p.Z.createFXAAStage(),t=p.Z.createAmbientOcclusionStage(),n=p.Z.createBloomStage();this._autoExposureEnabled=!1,this._autoExposure=p.Z.createAutoExposureStage(),this._tonemapping=void 0,this._tonemapper=void 0,this.tonemapper=v.Z.ACES;var r=this._tonemapping;e.enabled=!1,t.enabled=!1,n.enabled=!1,r.enabled=!1;var i=new g.Z(this),o={},s=S;s.push(e,t,n,r);while(s.length>0){var u=s.pop();o[u.name]=u,u._textureCache=i;var c=u.length;if((0,a.Z)(c))for(var d=0;d<c;++d)s.push(u.get(d))}this._stages=[],this._activeStages=[],this._previousActiveStages=[],this._randomTexture=void 0;var h=this;t.uniforms.randomTexture=function(){return h._randomTexture},this._ao=t,this._bloom=n,this._fxaa=e,this._aoEnabled=void 0,this._bloomEnabled=void 0,this._tonemappingEnabled=void 0,this._fxaaEnabled=void 0,this._activeStagesChanged=!1,this._stagesRemoved=!1,this._textureCacheDirty=!1,this._stageNames=o,this._textureCache=i}function x(e){if(e._stagesRemoved){e._stagesRemoved=!1;for(var t=[],n=e._stages,r=n.length,i=0,a=0;i<r;++i){var o=n[i];o&&(o._index=a++,t.push(o))}e._stages=t}}function b(e){while((0,a.Z)(e.length))e=e.get(e.length-1);return e.outputTexture}function T(e,t,n,r,i){if((0,a.Z)(e.execute))e.execute(t,n,r,i);else{var o,s=e.length;if(e.inputPreviousStageTexture)for(T(e.get(0),t,n,r,i),o=1;o<s;++o)T(e.get(o),t,b(e.get(o-1)),r,i);else for(o=0;o<s;++o)T(e.get(o),t,n,r,i)}}Object.defineProperties(Z.prototype,{ready:{get:function(){for(var e=!1,t=this._stages,n=t.length,r=n-1;r>=0;--r){var i=t[r];e=e||i.ready&&i.enabled}var a=this._fxaa,o=this._ao,s=this._bloom,u=this._tonemapping;return e=e||a.ready&&a.enabled,e=e||o.ready&&o.enabled,e=e||s.ready&&s.enabled,e=e||u.ready&&u.enabled,e}},fxaa:{get:function(){return this._fxaa}},ambientOcclusion:{get:function(){return this._ao}},bloom:{get:function(){return this._bloom}},length:{get:function(){return x(this),this._stages.length}},outputTexture:{get:function(){var e=this._fxaa;if(e.enabled&&e.ready)return this.getOutputTexture(e.name);for(var t=this._stages,n=t.length,r=n-1;r>=0;--r){var i=t[r];if((0,a.Z)(i)&&i.ready&&i.enabled)return this.getOutputTexture(i.name)}var o=this._tonemapping;if(o.enabled&&o.ready)return this.getOutputTexture(o.name);var s=this._bloom;if(s.enabled&&s.ready)return this.getOutputTexture(s.name);var u=this._ao;return u.enabled&&u.ready?this.getOutputTexture(u.name):void 0}},hasSelected:{get:function(){var e=(0,r.Z)(this._stages);while(e.length>0){var t=e.pop();if((0,a.Z)(t)){if((0,a.Z)(t.selected))return!0;var n=t.length;if((0,a.Z)(n))for(var i=0;i<n;++i)e.push(t.get(i))}}return!1}},tonemapper:{get:function(){return this._tonemapper},set:function(e){if(this._tonemapper!==e){if(!v.Z.validate(e))throw new s.Z("tonemapper was set to an invalid value.");(0,a.Z)(this._tonemapping)&&(delete this._stageNames[this._tonemapping.name],this._tonemapping.destroy());var t,n=this._autoExposureEnabled;switch(e){case v.Z.REINHARD:t=p.Z.createReinhardTonemappingStage(n);break;case v.Z.MODIFIED_REINHARD:t=p.Z.createModifiedReinhardTonemappingStage(n);break;case v.Z.FILMIC:t=p.Z.createFilmicTonemappingStage(n);break;default:t=p.Z.createAcesTonemappingStage(n);break}if(n){var r=this._autoExposure;t.uniforms.autoExposure=function(){return r.outputTexture}}this._tonemapper=e,this._tonemapping=t,(0,a.Z)(this._stageNames)&&(this._stageNames[t.name]=t,t._textureCache=this._textureCache),this._textureCacheDirty=!0}}}}),Z.prototype.add=function(e){i.Z.typeOf.object("stage",e);var t=this._stageNames,n=S;n.push(e);while(n.length>0){var r=n.pop();if((0,a.Z)(t[r.name]))throw new s.Z(r.name+" has already been added to the collection or does not have a unique name.");t[r.name]=r,r._textureCache=this._textureCache;var o=r.length;if((0,a.Z)(o))for(var u=0;u<o;++u)n.push(r.get(u))}var c=this._stages;return e._index=c.length,c.push(e),this._textureCacheDirty=!0,e},Z.prototype.remove=function(e){if(!this.contains(e))return!1;var t=this._stageNames,n=S;n.push(e);while(n.length>0){var r=n.pop();delete t[r.name];var i=r.length;if((0,a.Z)(i))for(var o=0;o<i;++o)n.push(r.get(o))}return this._stages[e._index]=void 0,this._stagesRemoved=!0,this._textureCacheDirty=!0,e._index=void 0,e._textureCache=void 0,e.destroy(),!0},Z.prototype.contains=function(e){return(0,a.Z)(e)&&(0,a.Z)(e._index)&&e._textureCache===this._textureCache},Z.prototype.get=function(e){x(this);var t=this._stages,n=t.length;return i.Z.typeOf.number.greaterThanOrEquals("stages length",n,0),i.Z.typeOf.number.greaterThanOrEquals("index",e,0),i.Z.typeOf.number.lessThan("index",e,n),t[e]},Z.prototype.removeAll=function(){for(var e=this._stages,t=e.length,n=0;n<t;++n)this.remove(e[n]);e.length=0},Z.prototype.getStageByName=function(e){return this._stageNames[e]},Z.prototype.update=function(e,t,n){x(this);var r=this._activeStages,i=this._activeStages=this._previousActiveStages;this._previousActiveStages=r;var o,s,m=this._stages,p=i.length=m.length,g=0;for(o=0;o<p;++o)s=m[o],s.ready&&s.enabled&&s._isSupported(e)&&(i[g++]=s);i.length=g;var v=g!==r.length;if(!v)for(o=0;o<g;++o)if(i[o]!==r[o]){v=!0;break}var S=this._ao,Z=this._bloom,b=this._autoExposure,T=this._tonemapping,y=this._fxaa;T.enabled=n;var w=S.enabled&&S._isSupported(e),E=Z.enabled&&Z._isSupported(e),C=T.enabled&&T._isSupported(e),O=y.enabled&&y._isSupported(e);if((v||this._textureCacheDirty||w!==this._aoEnabled||E!==this._bloomEnabled||C!==this._tonemappingEnabled||O!==this._fxaaEnabled)&&(this._textureCache.updateDependencies(),this._aoEnabled=w,this._bloomEnabled=E,this._tonemappingEnabled=C,this._fxaaEnabled=O,this._textureCacheDirty=!1),(0,a.Z)(this._randomTexture)&&!w&&(this._randomTexture.destroy(),this._randomTexture=void 0),!(0,a.Z)(this._randomTexture)&&w){p=196608;var D=new Uint8Array(p);for(o=0;o<p;o+=3)D[o]=Math.floor(255*Math.random());this._randomTexture=new h.Z({context:e,pixelFormat:u.Z.RGB,pixelDatatype:c.Z.UNSIGNED_BYTE,source:{arrayBufferView:D,width:256,height:256},sampler:new d.Z({wrapS:_.Z.REPEAT,wrapT:_.Z.REPEAT,minificationFilter:l.Z.NEAREST,magnificationFilter:f.Z.NEAREST})})}for(this._textureCache.update(e),y.update(e,t),S.update(e,t),Z.update(e,t),T.update(e,t),this._autoExposureEnabled&&b.update(e,t),p=m.length,o=0;o<p;++o)m[o].update(e,t);for(g=0,o=0;o<p;++o)s=m[o],s.ready&&s.enabled&&s._isSupported(e)&&g++;v=g!==i.length,v&&this.update(e,t,n)},Z.prototype.clear=function(e){this._textureCache.clear(e),this._autoExposureEnabled&&this._autoExposure.clear(e)},Z.prototype.getOutputTexture=function(e){var t=this.getStageByName(e);if((0,a.Z)(t))return b(t)},Z.prototype.execute=function(e,t,n,r){var i=this._activeStages,a=i.length,o=this._fxaa,s=this._ao,u=this._bloom,c=this._autoExposure,d=this._tonemapping,h=s.enabled&&s._isSupported(e),f=u.enabled&&u._isSupported(e),l=this._autoExposureEnabled,_=d.enabled&&d._isSupported(e),m=o.enabled&&o._isSupported(e);if(m||h||f||_||0!==a){var p=t;h&&s.ready&&(T(s,e,p,n,r),p=b(s)),f&&u.ready&&(T(u,e,p,n,r),p=b(u)),l&&c.ready&&T(c,e,p,n,r),_&&d.ready&&(T(d,e,p,n,r),p=b(d));var g=p;if(a>0){T(i[0],e,p,n,r);for(var v=1;v<a;++v)T(i[v],e,b(i[v-1]),n,r);g=b(i[a-1])}m&&o.ready&&T(o,e,g,n,r)}},Z.prototype.copy=function(e,t){if(!(0,a.Z)(this._copyColorCommand)){var n=this;this._copyColorCommand=e.createViewportQuadCommand(m.Z,{uniformMap:{colorTexture:function(){return n.outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){return this._fxaa.destroy(),this._ao.destroy(),this._bloom.destroy(),this._autoExposure.destroy(),this._tonemapping.destroy(),this.removeAll(),this._textureCache=this._textureCache&&this._textureCache.destroy(),(0,o.Z)(this)},t["Z"]=Z},53798:function(e,t,n){var r=n(66553),i=n(39960),a=n(62200),o=n(82982),s=n(86511);function u(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),r.Z.defined("options.stages",e.stages),r.Z.typeOf.number.greaterThan("options.stages.length",e.stages.length,0),this._stages=e.stages,this._inputPreviousStageTexture=(0,a.Z)(e.inputPreviousStageTexture,!0);var t=e.name;(0,o.Z)(t)||(t=(0,i.Z)()),this._name=t,this._uniforms=e.uniforms,this._textureCache=void 0,this._index=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0}function c(e){var t=(0,o.Z)(e._selected)?e._selected.length:0,n=(0,o.Z)(e._parentSelected)?e._parentSelected:0,r=e._selected!==e._selectedShadow||t!==e._selectedLength;if(r=r||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,(0,o.Z)(e._selected)&&(0,o.Z)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,o.Z)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!r&&(0,o.Z)(e._combinedSelected)){if(!(0,o.Z)(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(var i=0;i<t;++i)if(e._combinedSelected[i]!==e._combinedSelectedShadow[i])return!0}return r}Object.defineProperties(u.prototype,{ready:{get:function(){for(var e=this._stages,t=e.length,n=0;n<t;++n)if(!e[n].ready)return!1;return!0}},name:{get:function(){return this._name}},enabled:{get:function(){return this._stages[0].enabled},set:function(e){for(var t=this._stages,n=t.length,r=0;r<n;++r)t[r].enabled=e}},uniforms:{get:function(){return this._uniforms}},inputPreviousStageTexture:{get:function(){return this._inputPreviousStageTexture}},length:{get:function(){return this._stages.length}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}}),u.prototype._isSupported=function(e){for(var t=this._stages,n=t.length,r=0;r<n;++r)if(!t[r]._isSupported(e))return!1;return!0},u.prototype.get=function(e){return r.Z.typeOf.number.greaterThanOrEquals("index",e,0),r.Z.typeOf.number.lessThan("index",e,this.length),this._stages[e]},u.prototype.update=function(e,t){this._selectedDirty=c(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,o.Z)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,o.Z)(this._parentSelected)?this._parentSelected.length:0;for(var n=this._stages,r=n.length,i=0;i<r;++i){var a=n[i];this._selectedDirty&&(a.parentSelected=this._combinedSelected),a.update(e,t)}},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){for(var e=this._stages,t=e.length,n=0;n<t;++n)e[n].destroy();return(0,s.Z)(this)},t["Z"]=u},80875:function(e,t,n){var r=n(72e3),i=n(59947),a=n(39960),o=n(82982),s=n(50491),u=n(31659),c=n(11968),d=n(36756),h=n(92812),f=n(37386),l=n(60593),_=n(82445),m=n(83890),p=n(39592),g=n(10011),v=n(95848),S=n(96273),Z=n(23077),x=n(99182),b=n(47784),T=n(50920),y=n(51552),w=n(3026),E=n(61333),C=n(66270),O=n(11184),D=n(53798),z=n(26615),A={};function I(e){var t=1,n=2,r=1,i="#define USE_STEP_SIZE\n"+Z.Z,a=new O.Z({name:e+"_x_direction",fragmentShader:i,uniforms:{delta:t,sigma:n,stepSize:r,direction:0},sampleMode:z.Z.LINEAR}),o=new O.Z({name:e+"_y_direction",fragmentShader:i,uniforms:{delta:t,sigma:n,stepSize:r,direction:1},sampleMode:z.Z.LINEAR}),s={};return Object.defineProperties(s,{delta:{get:function(){return a.uniforms.delta},set:function(e){var t=a.uniforms,n=o.uniforms;t.delta=n.delta=e}},sigma:{get:function(){return a.uniforms.sigma},set:function(e){var t=a.uniforms,n=o.uniforms;t.sigma=n.sigma=e}},stepSize:{get:function(){return a.uniforms.stepSize},set:function(e){var t=a.uniforms,n=o.uniforms;t.stepSize=n.stepSize=e}}}),new D.Z({name:e,stages:[a,o],uniforms:s})}function P(e){if(!(0,o.Z)(e))return A.createEdgeDetectionStage();for(var t=new D.Z({name:"czm_edge_detection_multiple",stages:e,inputPreviousStageTexture:!1}),n={},r="",i="",a=0;a<e.length;++a)r+="uniform sampler2D edgeTexture"+a+"; \n",i+="        vec4 edge"+a+" = texture2D(edgeTexture"+a+", v_textureCoordinates); \n        if (edge"+a+".a > 0.0) \n        { \n            color = edge"+a+"; \n            break; \n        } \n",n["edgeTexture"+a]=e[a].name;var s=r+"varying vec2 v_textureCoordinates; \nvoid main() { \n    vec4 color = vec4(0.0); \n    for (int i = 0; i < "+e.length+"; i++) \n    { \n"+i+"    } \n    gl_FragColor = color; \n} \n",u=new O.Z({name:"czm_edge_detection_combine",fragmentShader:s,uniforms:n});return new D.Z({name:"czm_edge_detection_composite",stages:[t,u]})}A.createBlurStage=function(){return I("czm_blur")},A.createDepthOfFieldStage=function(){var e=I("czm_depth_of_field_blur"),t=new O.Z({name:"czm_depth_of_field_composite",fragmentShader:m.Z,uniforms:{focalDistance:5,blurTexture:e.name}}),n={};return Object.defineProperties(n,{focalDistance:{get:function(){return t.uniforms.focalDistance},set:function(e){t.uniforms.focalDistance=e}},delta:{get:function(){return e.uniforms.delta},set:function(t){e.uniforms.delta=t}},sigma:{get:function(){return e.uniforms.sigma},set:function(t){e.uniforms.sigma=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}}}),new D.Z({name:"czm_depth_of_field",stages:[e,t],inputPreviousStageTexture:!1,uniforms:n})},A.isDepthOfFieldSupported=function(e){return e.context.depthTexture},A.createEdgeDetectionStage=function(){var e=(0,a.Z)();return new O.Z({name:"czm_edge_detection_"+e,fragmentShader:g.Z,uniforms:{length:.25,color:i.Z.clone(i.Z.BLACK)}})},A.isEdgeDetectionSupported=function(e){return e.context.depthTexture},A.createSilhouetteStage=function(e){var t=P(e),n=new O.Z({name:"czm_silhouette_color_edges",fragmentShader:w.Z,uniforms:{silhouetteTexture:t.name}});return new D.Z({name:"czm_silhouette",stages:[t,n],inputPreviousStageTexture:!1,uniforms:t.uniforms})},A.isSilhouetteSupported=function(e){return e.context.depthTexture},A.createBloomStage=function(){var e=new O.Z({name:"czm_bloom_contrast_bias",fragmentShader:_.Z,uniforms:{contrast:128,brightness:-.3}}),t=I("czm_bloom_blur"),n=new D.Z({name:"czm_bloom_contrast_bias_blur",stages:[e,t]}),r=new O.Z({name:"czm_bloom_generate_composite",fragmentShader:f.Z,uniforms:{glowOnly:!1,bloomTexture:n.name}}),i={};return Object.defineProperties(i,{glowOnly:{get:function(){return r.uniforms.glowOnly},set:function(e){r.uniforms.glowOnly=e}},contrast:{get:function(){return e.uniforms.contrast},set:function(t){e.uniforms.contrast=t}},brightness:{get:function(){return e.uniforms.brightness},set:function(t){e.uniforms.brightness=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},stepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}}}),new D.Z({name:"czm_bloom",stages:[n,r],inputPreviousStageTexture:!1,uniforms:i})},A.createAmbientOcclusionStage=function(){var e=new O.Z({name:"czm_ambient_occlusion_generate",fragmentShader:c.Z,uniforms:{intensity:3,bias:.1,lengthCap:.26,stepSize:1.95,frustumLength:1e3,randomTexture:void 0}}),t=I("czm_ambient_occlusion_blur");t.uniforms.stepSize=.86;var n=new D.Z({name:"czm_ambient_occlusion_generate_blur",stages:[e,t]}),r=new O.Z({name:"czm_ambient_occlusion_composite",fragmentShader:d.Z,uniforms:{ambientOcclusionOnly:!1,ambientOcclusionTexture:n.name}}),i={};return Object.defineProperties(i,{intensity:{get:function(){return e.uniforms.intensity},set:function(t){e.uniforms.intensity=t}},bias:{get:function(){return e.uniforms.bias},set:function(t){e.uniforms.bias=t}},lengthCap:{get:function(){return e.uniforms.lengthCap},set:function(t){e.uniforms.lengthCap=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}},frustumLength:{get:function(){return e.uniforms.frustumLength},set:function(t){e.uniforms.frustumLength=t}},randomTexture:{get:function(){return e.uniforms.randomTexture},set:function(t){e.uniforms.randomTexture=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},blurStepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}},ambientOcclusionOnly:{get:function(){return r.uniforms.ambientOcclusionOnly},set:function(e){r.uniforms.ambientOcclusionOnly=e}}}),new D.Z({name:"czm_ambient_occlusion",stages:[n,r],inputPreviousStageTexture:!1,uniforms:i})},A.isAmbientOcclusionSupported=function(e){return e.context.depthTexture};var R="#define FXAA_QUALITY_PRESET 39 \n"+E.Z+"\n"+S.Z;A.createFXAAStage=function(){return new O.Z({name:"czm_FXAA",fragmentShader:R,sampleMode:z.Z.LINEAR})},A.createAcesTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=u.Z,new O.Z({name:"czm_aces",fragmentShader:t,uniforms:{autoExposure:void 0}})},A.createFilmicTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=v.Z,new O.Z({name:"czm_filmic",fragmentShader:t,uniforms:{autoExposure:void 0}})},A.createReinhardTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=y.Z,new O.Z({name:"czm_reinhard",fragmentShader:t,uniforms:{autoExposure:void 0}})},A.createModifiedReinhardTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=b.Z,new O.Z({name:"czm_modified_reinhard",fragmentShader:t,uniforms:{white:i.Z.WHITE,autoExposure:void 0}})},A.createAutoExposureStage=function(){return new C.Z},A.createBlackAndWhiteStage=function(){return new O.Z({name:"czm_black_and_white",fragmentShader:h.Z,uniforms:{gradations:5}})},A.createBrightnessStage=function(){return new O.Z({name:"czm_brightness",fragmentShader:l.Z,uniforms:{brightness:.5}})},A.createNightVisionStage=function(){return new O.Z({name:"czm_night_vision",fragmentShader:T.Z})},A.createDepthViewStage=function(){return new O.Z({name:"czm_depth_view",fragmentShader:p.Z})},A.createLensFlareStage=function(){return new O.Z({name:"czm_lens_flare",fragmentShader:x.Z,uniforms:{dirtTexture:(0,r.Z)("Assets/Textures/LensFlare/DirtMask.jpg"),starTexture:(0,r.Z)("Assets/Textures/LensFlare/StarBurst.jpg"),intensity:2,distortion:10,ghostDispersal:.4,haloWidth:.4,dirtAmount:.4,earthRadius:s.Z.WGS84.maximumRadius}})},t["Z"]=A},26615:function(e,t){var n={NEAREST:0,LINEAR:1};t["Z"]=n},87878:function(e,t,n){var r=n(59947),i=n(82982),a=n(86511),o=n(99417),s=n(39899),u=n(2932),c=n(8743);function d(e){this._collection=e,this._framebuffers=[],this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0,this._updateDependencies=!1}function h(e){while((0,i.Z)(e.length))e=e.get(e.length-1);return e.name}function f(e,t,n,r,a){if(!r.enabled||!r._isSupported(t))return a;var o=n[r.name]={};if((0,i.Z)(a)){var s=e.getStageByName(a);o[h(s)]=!0}var u=r.uniforms;if((0,i.Z)(u))for(var c=Object.getOwnPropertyNames(u),d=c.length,f=0;f<d;++f){var l=u[c[f]];if("string"===typeof l){var _=e.getStageByName(l);(0,i.Z)(_)&&(o[h(_)]=!0)}}return r.name}function l(e,t,n,r,a){if((0,i.Z)(r.enabled)&&!r.enabled||(0,i.Z)(r._isSupported)&&!r._isSupported(t))return a;for(var o,s,u=a,c=!(0,i.Z)(r.inputPreviousStageTexture)||r.inputPreviousStageTexture,d=a,_=r.length,m=0;m<_;++m){var p=r.get(m);d=(0,i.Z)(p.length)?l(e,t,n,p,a):f(e,t,n,p,a),c&&(a=d)}if(c)for(o=1;o<_;++o)s=h(r.get(o)),(0,i.Z)(n[s])||(n[s]={}),n[s][u]=!0;else for(o=1;o<_;++o){s=h(r.get(o));for(var g=n[s],v=0;v<o;++v)g[h(r.get(v))]=!0}return d}function _(e,t){var n={};if((0,i.Z)(e.ambientOcclusion)){var r=e.ambientOcclusion,a=e.bloom,o=e._tonemapping,s=e.fxaa,u=l(e,t,n,r,void 0);u=l(e,t,n,a,u),u=f(e,t,n,o,u),u=l(e,t,n,e,u),f(e,t,n,s,u)}else l(e,t,n,e,void 0);return n}function m(e,t,n){var a,o,s=e._collection,u=s.getStageByName(t),c=u._textureScale,d=u._forcePowerOfTwo,h=u._pixelFormat,f=u._pixelDatatype,l=u._clearColor,_=e._framebuffers,m=_.length;for(a=0;a<m;++a)if(o=_[a],c===o.textureScale&&d===o.forcePowerOfTwo&&h===o.pixelFormat&&f===o.pixelDatatype&&r.Z.equals(l,o.clearColor)){for(var p=o.stages,g=p.length,v=!1,S=0;S<g;++S)if(n[p[S]]){v=!0;break}if(!v)break}return(0,i.Z)(o)&&a<m?(o.stages.push(t),o):(o={textureScale:c,forcePowerOfTwo:d,pixelFormat:h,pixelDatatype:f,clearColor:l,stages:[t],buffer:void 0,clear:void 0},_.push(o),o)}function p(e,t){var n=_(e._collection,t);for(var r in n)n.hasOwnProperty(r)&&(e._stageNameToFramebuffer[r]=m(e,r,n[r]))}function g(e){for(var t=e._framebuffers,n=t.length,r=0;r<n;++r){var i=t[r];i.buffer=i.buffer&&i.buffer.destroy(),i.buffer=void 0}}function v(e,t){for(var n=e._width,r=e._height,i=e._framebuffers,a=i.length,d=0;d<a;++d){var h=i[d],f=h.textureScale,l=Math.ceil(n*f),_=Math.ceil(r*f),m=Math.min(l,_);h.forcePowerOfTwo&&(o.Z.isPowerOfTwo(m)||(m=o.Z.nextPowerOfTwo(m)),l=m,_=m),h.buffer=new u.Z({context:t,colorTextures:[new c.Z({context:t,width:l,height:_,pixelFormat:h.pixelFormat,pixelDatatype:h.pixelDatatype})]}),h.clear=new s.Z({color:h.clearColor,framebuffer:h.buffer})}}d.prototype.updateDependencies=function(){this._updateDependencies=!0},d.prototype.update=function(e){var t=this._collection,n=this._updateDependencies,r=(0,i.Z)(t.ambientOcclusion)&&t.ambientOcclusion.enabled&&t.ambientOcclusion._isSupported(e),a=(0,i.Z)(t.bloom)&&t.bloom.enabled&&t.bloom._isSupported(e),o=(0,i.Z)(t._tonemapping)&&t._tonemapping.enabled&&t._tonemapping._isSupported(e),s=(0,i.Z)(t.fxaa)&&t.fxaa.enabled&&t.fxaa._isSupported(e),u=!(0,i.Z)(t._activeStages)||t._activeStages.length>0||r||a||o||s;if((n||!u&&this._framebuffers.length>0)&&(g(this),this._framebuffers.length=0,this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0),n||u){0===this._framebuffers.length&&p(this,e);var c=e.drawingBufferWidth,d=e.drawingBufferHeight,h=this._width!==c||this._height!==d;(n||h)&&(this._width=c,this._height=d,this._updateDependencies=!1,g(this),v(this,e))}},d.prototype.clear=function(e){for(var t=this._framebuffers,n=0;n<t.length;++n)t[n].clear.execute(e)},d.prototype.getStageByName=function(e){return this._collection.getStageByName(e)},d.prototype.getOutputTexture=function(e){return this._collection.getOutputTexture(e)},d.prototype.getFramebuffer=function(e){var t=this._stageNameToFramebuffer[e];if((0,i.Z)(t))return t.buffer},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return g(this),(0,a.Z)(this)},t["Z"]=d}}]);
//# sourceMappingURL=chunk-vendors-0c61f104-legacy.6153ff0b.js.map