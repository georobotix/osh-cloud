"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[5979],{87207:function(t,e,i){var r=i(60216),n=i(66553),o=i(62200),s=i(82982),a=i(12572),h=i(14459),l=i(17964),p=i(69188),d=i(40112),u=i(23470);function c(t,e){var i;if(e=(0,o.Z)(e,0),e>0){i=new Array(e);for(var n=0;n<e;n++)i[n]=r.Z}this._numberOfDerivatives=e,this._property=new u.Z(r.Z,i),this._definitionChanged=new h.Z,this._referenceFrame=(0,o.Z)(t,l.Z.FIXED),this._property._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)}Object.defineProperties(c.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(t){this._property.forwardExtrapolationType=t}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(t){this._property.forwardExtrapolationDuration=t}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(t){this._property.backwardExtrapolationType=t}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(t){this._property.backwardExtrapolationDuration=t}}}),c.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,l.Z.FIXED,e)},c.prototype.getValueInReferenceFrame=function(t,e,i){if(n.Z.defined("time",t),n.Z.defined("referenceFrame",e),i=this._property.getValue(t,i),(0,s.Z)(i))return p.Z.convertToReferenceFrame(t,i,this._referenceFrame,e,i)},c.prototype.setInterpolationOptions=function(t){this._property.setInterpolationOptions(t)},c.prototype.addSample=function(t,e,i){var r=this._numberOfDerivatives;if(r>0&&(!(0,s.Z)(i)||i.length!==r))throw new a.Z("derivatives length must be equal to the number of derivatives.");this._property.addSample(t,e,i)},c.prototype.addSamples=function(t,e,i){this._property.addSamples(t,e,i)},c.prototype.addSamplesPackedArray=function(t,e){this._property.addSamplesPackedArray(t,e)},c.prototype.removeSample=function(t){return this._property.removeSample(t)},c.prototype.removeSamples=function(t){this._property.removeSamples(t)},c.prototype.equals=function(t){return this===t||t instanceof c&&d.Z.equals(this._property,t._property)&&this._referenceFrame===t._referenceFrame},e["Z"]=c},23470:function(t,e,i){var r=i(377),n=i(66553),o=i(62200),s=i(82982),a=i(12572),h=i(14459),l=i(11074),p=i(55293),d=i(54935),u={packedLength:1,pack:function(t,e,i){i=(0,o.Z)(i,0),e[i]=t},unpack:function(t,e,i){return e=(0,o.Z)(e,0),t[e]}};function c(t,e,i){var r,n=t.length,o=i.length,s=n+o;if(t.length=s,n!==e){var a=n-1;for(r=s-1;r>=e;r--)t[r]=t[a--]}for(r=0;r<o;r++)t[e++]=i[r]}function v(t,e){return t instanceof p.Z?t:"string"===typeof t?p.Z.fromIso8601(t):p.Z.addSeconds(e,t,new p.Z)}var f=[],m=[];function Z(t,e,i,n,o){var a,h,l,d,u,Z,g=0;while(g<n.length){u=v(n[g],t),l=(0,r.Z)(e,u,p.Z.compare);var y=0,_=0;if(l<0){l=~l,d=l*o,h=void 0,Z=e[l];while(g<n.length){if(u=v(n[g],t),(0,s.Z)(h)&&p.Z.compare(h,u)>=0||(0,s.Z)(Z)&&p.Z.compare(u,Z)>=0)break;for(f[y++]=u,g+=1,a=0;a<o;a++)m[_++]=n[g],g+=1;h=u}y>0&&(m.length=_,c(i,d,m),f.length=y,c(e,l,f))}else{for(a=0;a<o;a++)g++,i[l*o+a]=n[g];g++}}}function g(t,e){n.Z.defined("type",t);var i=t;i===Number&&(i=u);var r,a=i.packedLength,p=(0,o.Z)(i.packedInterpolationLength,a),c=0;if((0,s.Z)(e)){var v=e.length;r=new Array(v);for(var f=0;f<v;f++){var m=e[f];m===Number&&(m=u);var Z=m.packedLength;a+=Z,p+=(0,o.Z)(m.packedInterpolationLength,Z),r[f]=m}c=v}this._type=t,this._innerType=i,this._interpolationDegree=1,this._interpolationAlgorithm=d.Z,this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=a,this._packedInterpolationLength=p,this._updateTableLength=!0,this._interpolationResult=new Array(p),this._definitionChanged=new h.Z,this._derivativeTypes=e,this._innerDerivativeTypes=r,this._inputOrder=c,this._forwardExtrapolationType=l.Z.NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=l.Z.NONE,this._backwardExtrapolationDuration=0}function y(t,e,i){var r=t._packedLength;t._times.splice(e,i),t._values.splice(e*r,i*r),t._updateTableLength=!0,t._definitionChanged.raiseEvent(t)}Object.defineProperties(g.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(t){this._forwardExtrapolationType!==t&&(this._forwardExtrapolationType=t,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(t){this._forwardExtrapolationDuration!==t&&(this._forwardExtrapolationDuration=t,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(t){this._backwardExtrapolationType!==t&&(this._backwardExtrapolationType=t,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(t){this._backwardExtrapolationDuration!==t&&(this._backwardExtrapolationDuration=t,this._definitionChanged.raiseEvent(this))}}}),g.prototype.getValue=function(t,e){n.Z.defined("time",t);var i=this._times,o=i.length;if(0!==o){var a,h=this._innerType,d=this._values,u=(0,r.Z)(i,t,p.Z.compare);if(u<0){if(u=~u,0===u){var c=i[u];if(a=this._backwardExtrapolationDuration,this._backwardExtrapolationType===l.Z.NONE||0!==a&&p.Z.secondsDifference(c,t)>a)return;if(this._backwardExtrapolationType===l.Z.HOLD)return h.unpack(d,0,e)}if(u>=o){u=o-1;var v=i[u];if(a=this._forwardExtrapolationDuration,this._forwardExtrapolationType===l.Z.NONE||0!==a&&p.Z.secondsDifference(t,v)>a)return;if(this._forwardExtrapolationType===l.Z.HOLD)return u=o-1,h.unpack(d,u*h.packedLength,e)}var f=this._xTable,m=this._yTable,Z=this._interpolationAlgorithm,g=this._packedInterpolationLength,y=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;var _=Math.min(Z.getRequiredDataPoints(this._interpolationDegree,y),o);_!==this._numberOfPoints&&(this._numberOfPoints=_,f.length=_,m.length=_*g)}var C=this._numberOfPoints-1;if(C<1)return;var w=0,b=o-1,P=b-w+1;if(P>=C+1){var D=u-(C/2|0)-1;D<w&&(D=w);var E=D+C;E>b&&(E=b,D=E-C,D<w&&(D=w)),w=D,b=E}for(var T=b-w+1,I=0;I<T;++I)f[I]=p.Z.secondsDifference(i[w+I],i[b]);if((0,s.Z)(h.convertPackedArrayForInterpolation))h.convertPackedArrayForInterpolation(d,w,b,m);else{var S=0,A=this._packedLength,O=w*A,F=(b+1)*A;while(O<F)m[S]=d[O],O++,S++}var M,V=p.Z.secondsDifference(t,i[b]);if(0!==y&&(0,s.Z)(Z.interpolate)){var x=Math.floor(g/(y+1));M=Z.interpolate(V,f,m,x,y,y,this._interpolationResult)}else M=Z.interpolateOrderZero(V,f,m,g,this._interpolationResult);return(0,s.Z)(h.unpackInterpolationResult)?h.unpackInterpolationResult(M,d,w,b,e):h.unpack(M,0,e)}return h.unpack(d,u*this._packedLength,e)}},g.prototype.setInterpolationOptions=function(t){if((0,s.Z)(t)){var e=!1,i=t.interpolationAlgorithm,r=t.interpolationDegree;(0,s.Z)(i)&&this._interpolationAlgorithm!==i&&(this._interpolationAlgorithm=i,e=!0),(0,s.Z)(r)&&this._interpolationDegree!==r&&(this._interpolationDegree=r,e=!0),e&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))}},g.prototype.addSample=function(t,e,i){var r=this._innerDerivativeTypes,o=(0,s.Z)(r);n.Z.defined("time",t),n.Z.defined("value",e),o&&n.Z.defined("derivatives",i);var a=this._innerType,h=[];if(h.push(t),a.pack(e,h,h.length),o)for(var l=r.length,p=0;p<l;p++)r[p].pack(i[p],h,h.length);Z(void 0,this._times,this._values,h,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},g.prototype.addSamples=function(t,e,i){var r=this._innerDerivativeTypes,o=(0,s.Z)(r);if(n.Z.defined("times",t),n.Z.defined("values",e),t.length!==e.length)throw new a.Z("times and values must be the same length.");if(o&&(!(0,s.Z)(i)||i.length!==t.length))throw new a.Z("times and derivativeValues must be the same length.");for(var h=this._innerType,l=t.length,p=[],d=0;d<l;d++)if(p.push(t[d]),h.pack(e[d],p,p.length),o)for(var u=i[d],c=r.length,v=0;v<c;v++)r[v].pack(u[v],p,p.length);Z(void 0,this._times,this._values,p,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},g.prototype.addSamplesPackedArray=function(t,e){n.Z.defined("packedSamples",t),Z(e,this._times,this._values,t,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},g.prototype.removeSample=function(t){n.Z.defined("time",t);var e=(0,r.Z)(this._times,t,p.Z.compare);return!(e<0)&&(y(this,e,1),!0)},g.prototype.removeSamples=function(t){n.Z.defined("timeInterval",t);var e=this._times,i=(0,r.Z)(e,t.start,p.Z.compare);i<0?i=~i:t.isStartIncluded||++i;var o=(0,r.Z)(e,t.stop,p.Z.compare);o<0?o=~o:t.isStopIncluded&&++o,y(this,i,o-i)},g.prototype.equals=function(t){if(this===t)return!0;if(!(0,s.Z)(t))return!1;if(this._type!==t._type||this._interpolationDegree!==t._interpolationDegree||this._interpolationAlgorithm!==t._interpolationAlgorithm)return!1;var e,i,r=this._derivativeTypes,n=(0,s.Z)(r),o=t._derivativeTypes,a=(0,s.Z)(o);if(n!==a)return!1;if(n){if(i=r.length,i!==o.length)return!1;for(e=0;e<i;e++)if(r[e]!==o[e])return!1}var h=this._times,l=t._times;if(i=h.length,i!==l.length)return!1;for(e=0;e<i;e++)if(!p.Z.equals(h[e],l[e]))return!1;var d=this._values,u=t._values;for(i=d.length,e=0;e<i;e++)if(d[e]!==u[e])return!1;return!0},g._mergeNewSamples=Z,e["Z"]=g},42098:function(t,e,i){var r=i(82982),n=i(12572),o=i(50491),s=i(14459),a=i(17964),h=i(40112);function l(t){this._definitionChanged=new s.Z,this._value=void 0,this._removeSubscription=void 0,this.setValue(t)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return h.Z.isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return(0,r.Z)(this._value)?this._value.referenceFrame:a.Z.FIXED}}}),l.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,a.Z.FIXED,e)},l.prototype.setValue=function(t){this._value!==t&&(this._value=t,(0,r.Z)(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),(0,r.Z)(t)&&(this._removeSubscription=t.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},l.prototype.getValueInReferenceFrame=function(t,e,i){if(!(0,r.Z)(t))throw new n.Z("time is required.");if(!(0,r.Z)(e))throw new n.Z("referenceFrame is required.");if((0,r.Z)(this._value))return i=this._value.getValueInReferenceFrame(t,e,i),(0,r.Z)(i)?o.Z.WGS84.scaleToGeodeticSurface(i,i):void 0},l.prototype.equals=function(t){return this===t||t instanceof l&&this._value===t._value},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},e["Z"]=l},81189:function(t,e,i){var r=i(8629),n=i(60216),o=i(59947),s=i(92062),a=i(82982),h=i(47861),l=i(24689),p=i(82223),d=i(37939),u=i(34380),c=i(69895),v=i(20174),f=i(46317),m=i(40112),Z=new o.Z,g=new h.Z,y=new h.Z,_=n.Z.ZERO,C=new n.Z;function w(t,e,i,n,o,s,h){var l;this.translucent=e,this.appearanceType=i,this.depthFailAppearanceType=n,this.depthFailMaterialProperty=o,this.depthFailMaterial=void 0,this.closed=s,this.shadows=h,this.primitives=t,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new r.Z,this.updaters=new r.Z,this.updatersWithAttributes=new r.Z,this.attributes=new r.Z,this.subscriptions=new r.Z,this.showsUpdated=new r.Z,this.itemsToRemove=[],this.invalidated=!1,(0,a.Z)(o)&&(l=o.definitionChanged.addEventListener(w.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=l}function b(t,e,i,r,n){this._solidItems=[],this._translucentItems=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=r,this._shadows=n}function P(t,e){for(var i=t.length,r=i-1;r>=0;r--){var n=t[r];if(n.remove(e))return 0===n.updaters.length&&(t.splice(r,1),n.destroy()),!0}return!1}function D(t,e,i){for(var r=!1,n=e.length,o=0;o<n;++o){var s=e[o],a=s.itemsToRemove,h=a.length;if(h>0)for(o=0;o<h;o++){var l=a[o];s.remove(l),t.add(i,l),r=!0}}return r}function E(t,e,i,r){var n,o=e.length;for(n=o-1;n>=0;n--){var s=e[n];if(s.invalidated){e.splice(n,1);for(var a=s.updaters.values,h=a.length,l=0;l<h;l++)t.add(i,a[l]);s.destroy()}}for(o=e.length,n=0;n<o;++n)r=e[n].update(i)&&r;return r}function T(t,e,i){for(var r=t.length,n=0;n<r;n++){var o=t[n];if(o.contains(e))return o.getBoundingSphere(e,i)}return c.Z.FAILED}function I(t){for(var e=t.length,i=0;i<e;i++)t[i].destroy();t.length=0}w.prototype.onMaterialChanged=function(){this.invalidated=!0},w.prototype.isMaterial=function(t){var e=this.depthFailMaterialProperty,i=t.depthFailMaterialProperty;return i===e||!!(0,a.Z)(e)&&e.equals(i)},w.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&m.Z.isConstant(t.distanceDisplayConditionProperty)&&m.Z.isConstant(t.terrainOffsetProperty)){var r=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(e,i,n,o){"isShowing"===i&&r.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},w.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return(0,a.Z)(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},w.prototype.update=function(t){var e,i=!0,r=0,c=this.primitive,w=this.primitives;if(this.createPrimitive){var b=this.geometry.values,P=b.length;if(P>0){var D;(0,a.Z)(c)&&((0,a.Z)(this.oldPrimitive)?w.remove(c):this.oldPrimitive=c),(0,a.Z)(this.depthFailAppearanceType)&&((0,a.Z)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=f.Z.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial)),D=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),c=new u.Z({show:!1,asynchronous:!0,geometryInstances:b.slice(),appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:D,shadows:this.shadows}),w.add(c),i=!1}else{(0,a.Z)(c)&&(w.remove(c),c=void 0);var E=this.oldPrimitive;(0,a.Z)(E)&&(w.remove(E),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=c,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,a.Z)(c)&&c.ready){c.show=!0,(0,a.Z)(this.oldPrimitive)&&(w.remove(this.oldPrimitive),this.oldPrimitive=void 0),!(0,a.Z)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof v.Z||(this.depthFailMaterial=f.Z.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);var T=this.updatersWithAttributes.values,I=T.length,S=this.waitingOnCreate;for(e=0;e<I;e++){var A=T[e],O=this.geometry.get(A.id),F=this.attributes.get(O.id.id);if((0,a.Z)(F)||(F=c.getGeometryInstanceAttributes(O.id),this.attributes.set(O.id.id,F)),!A.fillMaterialProperty.isConstant||S){var M=A.fillMaterialProperty.color,V=m.Z.getValueOrDefault(M,t,o.Z.WHITE,Z);o.Z.equals(F._lastColor,V)||(F._lastColor=o.Z.clone(V,F._lastColor),F.color=s.Z.toValue(V,F.color),(this.translucent&&255===F.color[3]||!this.translucent&&255!==F.color[3])&&(this.itemsToRemove[r++]=A))}if((0,a.Z)(this.depthFailAppearanceType)&&A.depthFailMaterialProperty instanceof v.Z&&(!A.depthFailMaterialProperty.isConstant||S)){var x=A.depthFailMaterialProperty.color,k=m.Z.getValueOrDefault(x,t,o.Z.WHITE,Z);o.Z.equals(F._lastDepthFailColor,k)||(F._lastDepthFailColor=o.Z.clone(k,F._lastDepthFailColor),F.depthFailColor=s.Z.toValue(k,F.depthFailColor))}var L=A.entity.isShowing&&(A.hasConstantFill||A.isFilled(t)),N=1===F.show[0];L!==N&&(F.show=d.Z.toValue(L,F.show));var H=A.distanceDisplayConditionProperty;if(!m.Z.isConstant(H)){var R=m.Z.getValueOrDefault(H,t,y,g);h.Z.equals(R,F._lastDistanceDisplayCondition)||(F._lastDistanceDisplayCondition=h.Z.clone(R,F._lastDistanceDisplayCondition),F.distanceDisplayCondition=l.Z.toValue(R,F.distanceDisplayCondition))}var G=A.terrainOffsetProperty;if(!m.Z.isConstant(G)){var U=m.Z.getValueOrDefault(G,t,_,C);n.Z.equals(U,F._lastOffset)||(F._lastOffset=n.Z.clone(U,F._lastOffset),F.offset=p.Z.toValue(U,F.offset))}}this.updateShows(c),this.waitingOnCreate=!1}else(0,a.Z)(c)&&!c.ready&&(i=!1);return this.itemsToRemove.length=r,i},w.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var n=e[r],o=this.geometry.get(n.id),s=this.attributes.get(o.id.id);(0,a.Z)(s)||(s=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,s));var h=n.entity.isShowing,l=1===s.show[0];h!==l&&(s.show=d.Z.toValue(h,s.show),o.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},w.prototype.contains=function(t){return this.updaters.contains(t.id)},w.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return c.Z.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!(0,a.Z)(r)||!(0,a.Z)(r.boundingSphere)||(0,a.Z)(r.show)&&0===r.show[0]?c.Z.FAILED:(r.boundingSphere.clone(e),c.Z.DONE)},w.prototype.destroy=function(){var t=this.primitive,e=this.primitives;(0,a.Z)(t)&&e.remove(t);var i=this.oldPrimitive;(0,a.Z)(i)&&e.remove(i),(0,a.Z)(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},b.prototype.add=function(t,e){var i,r,n=e.createFillGeometryInstance(t);255===n.attributes.color.value[3]?(i=this._solidItems,r=!1):(i=this._translucentItems,r=!0);for(var o=i.length,s=0;s<o;s++){var a=i[s];if(a.isMaterial(e))return void a.add(e,n)}var h=new w(this._primitives,r,this._appearanceType,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);h.add(e,n),i.push(h)},b.prototype.remove=function(t){P(this._solidItems,t)||P(this._translucentItems,t)},b.prototype.update=function(t){var e=E(this,this._solidItems,t,!0);e=E(this,this._translucentItems,t,e)&&e;var i=D(this,this._solidItems,t),r=D(this,this._translucentItems,t);return(i||r)&&(e=E(this,this._solidItems,t,e)&&e,e=E(this,this._translucentItems,t,e)&&e),e},b.prototype.getBoundingSphere=function(t,e){var i=T(this._solidItems,t,e);return i===c.Z.FAILED?T(this._translucentItems,t,e):i},b.prototype.removeAllPrimitives=function(){I(this._solidItems),I(this._translucentItems)},e["Z"]=b},30487:function(t,e,i){var r=i(8629),n=i(60216),o=i(59947),s=i(92062),a=i(82982),h=i(47861),l=i(24689),p=i(82223),d=i(37939),u=i(34380),c=i(69895),v=i(20174),f=i(46317),m=i(40112),Z=new h.Z,g=new h.Z,y=n.Z.ZERO,_=new n.Z;function C(t,e,i,n,o,s,a){this.primitives=t,this.appearanceType=e,this.materialProperty=i,this.depthFailAppearanceType=n,this.depthFailMaterialProperty=o,this.closed=s,this.shadows=a,this.updaters=new r.Z,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new r.Z,this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new r.Z,this.attributes=new r.Z,this.invalidated=!1,this.removeMaterialSubscription=i.definitionChanged.addEventListener(C.prototype.onMaterialChanged,this),this.subscriptions=new r.Z,this.showsUpdated=new r.Z}C.prototype.onMaterialChanged=function(){this.invalidated=!0},C.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty,r=this.depthFailMaterialProperty,n=t.depthFailMaterialProperty;if(i===e&&n===r)return!0;var o=(0,a.Z)(e)&&e.equals(i);return o=(!(0,a.Z)(r)&&!(0,a.Z)(n)||(0,a.Z)(r)&&r.equals(n))&&o,o},C.prototype.add=function(t,e){var i=e.id;if(this.updaters.set(i,e),this.geometry.set(i,e.createFillGeometryInstance(t)),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&m.Z.isConstant(e.distanceDisplayConditionProperty)&&m.Z.isConstant(e.terrainOffsetProperty)){var r=this;this.subscriptions.set(i,e.entity.definitionChanged.addEventListener((function(t,i,n,o){"isShowing"===i&&r.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(i,e);this.createPrimitive=!0},C.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return(0,a.Z)(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1};var w=new o.Z;function b(t,e,i,r,n){this._items=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=r,this._shadows=n}C.prototype.update=function(t){var e,i=!0,r=this.primitive,c=this.primitives,C=this.geometry.values;if(this.createPrimitive){var b=C.length;if(b>0){var P;(0,a.Z)(r)&&((0,a.Z)(this.oldPrimitive)?c.remove(r):this.oldPrimitive=r),this.material=f.Z.getValue(t,this.materialProperty,this.material),(0,a.Z)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=f.Z.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),P=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),r=new u.Z({show:!1,asynchronous:!0,geometryInstances:C.slice(),appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:P,shadows:this.shadows}),c.add(r),i=!1}else{(0,a.Z)(r)&&(c.remove(r),r=void 0);var D=this.oldPrimitive;(0,a.Z)(D)&&(c.remove(D),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=r,this.createPrimitive=!1}else if((0,a.Z)(r)&&r.ready){r.show=!0,(0,a.Z)(this.oldPrimitive)&&(c.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=f.Z.getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!(0,a.Z)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof v.Z||(this.depthFailMaterial=f.Z.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);var E=this.updatersWithAttributes.values,T=E.length;for(e=0;e<T;e++){var I=E[e],S=I.entity,A=this.geometry.get(I.id),O=this.attributes.get(A.id.id);if((0,a.Z)(O)||(O=r.getGeometryInstanceAttributes(A.id),this.attributes.set(A.id.id,O)),(0,a.Z)(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof v.Z&&!I.depthFailMaterialProperty.isConstant){var F=I.depthFailMaterialProperty.color,M=m.Z.getValueOrDefault(F,t,o.Z.WHITE,w);o.Z.equals(O._lastDepthFailColor,M)||(O._lastDepthFailColor=o.Z.clone(M,O._lastDepthFailColor),O.depthFailColor=s.Z.toValue(M,O.depthFailColor))}var V=S.isShowing&&(I.hasConstantFill||I.isFilled(t)),x=1===O.show[0];V!==x&&(O.show=d.Z.toValue(V,O.show));var k=I.distanceDisplayConditionProperty;if(!m.Z.isConstant(k)){var L=m.Z.getValueOrDefault(k,t,g,Z);h.Z.equals(L,O._lastDistanceDisplayCondition)||(O._lastDistanceDisplayCondition=h.Z.clone(L,O._lastDistanceDisplayCondition),O.distanceDisplayCondition=l.Z.toValue(L,O.distanceDisplayCondition))}var N=I.terrainOffsetProperty;if(!m.Z.isConstant(N)){var H=m.Z.getValueOrDefault(N,t,y,_);n.Z.equals(H,O._lastOffset)||(O._lastOffset=n.Z.clone(H,O._lastOffset),O.offset=p.Z.toValue(H,O.offset))}}this.updateShows(r)}else(0,a.Z)(r)&&!r.ready&&(i=!1);return i},C.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var n=e[r],o=n.entity,s=this.geometry.get(n.id),h=this.attributes.get(s.id.id);(0,a.Z)(h)||(h=t.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,h));var l=o.isShowing,p=1===h.show[0];l!==p&&(h.show=d.Z.toValue(l,h.show),s.attributes.show.value[0]=h.show[0])}this.showsUpdated.removeAll()},C.prototype.contains=function(t){return this.updaters.contains(t.id)},C.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return c.Z.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!(0,a.Z)(r)||!(0,a.Z)(r.boundingSphere)||(0,a.Z)(r.show)&&0===r.show[0]?c.Z.FAILED:(r.boundingSphere.clone(e),c.Z.DONE)},C.prototype.destroy=function(){var t=this.primitive,e=this.primitives;(0,a.Z)(t)&&e.remove(t);var i=this.oldPrimitive;(0,a.Z)(i)&&e.remove(i),this.removeMaterialSubscription()},b.prototype.add=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.isMaterial(e))return void o.add(t,e)}var s=new C(this._primitives,this._appearanceType,e.fillMaterialProperty,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);s.add(t,e),i.push(s)},b.prototype.remove=function(t){for(var e=this._items,i=e.length,r=i-1;r>=0;r--){var n=e[r];if(n.remove(t)){0===n.updaters.length&&(e.splice(r,1),n.destroy());break}}},b.prototype.update=function(t){var e,i=this._items,r=i.length;for(e=r-1;e>=0;e--){var n=i[e];if(n.invalidated){i.splice(e,1);for(var o=n.updaters.values,s=o.length,a=0;a<s;a++)this.add(t,o[a]);n.destroy()}}var h=!0;for(e=0;e<i.length;e++)h=i[e].update(t)&&h;return h},b.prototype.getBoundingSphere=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return c.Z.FAILED},b.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},e["Z"]=b},4371:function(t,e,i){var r=i(8629),n=i(59947),o=i(92062),s=i(82982),a=i(47861),h=i(24689),l=i(37939),p=i(47780),d=i(69895),u=i(40112),c=i(8185),v=new n.Z,f=new a.Z,m=new a.Z;function Z(t,e,i,n){this.primitives=t,this.zIndex=n,this.classificationType=e,this.color=i,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new r.Z,this.updaters=new r.Z,this.updatersWithAttributes=new r.Z,this.attributes=new r.Z,this.subscriptions=new r.Z,this.showsUpdated=new r.Z,this.itemsToRemove=[],this.isDirty=!1,this.rectangleCollisionCheck=new c.Z}function g(t,e){this._batches=[],this._primitives=t,this._classificationType=e}Z.prototype.overlapping=function(t){return this.rectangleCollisionCheck.collides(t)},Z.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),this.rectangleCollisionCheck.insert(i,e.geometry.rectangle),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&u.Z.isConstant(t.distanceDisplayConditionProperty)){var r=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(e,i,n,o){"isShowing"===i&&r.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},Z.prototype.remove=function(t){var e=t.id,i=this.geometry.get(e);if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.rectangleCollisionCheck.remove(e,i.geometry.rectangle),this.updatersWithAttributes.remove(e);var r=this.subscriptions.get(e);return(0,s.Z)(r)&&(r(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},Z.prototype.update=function(t){var e,i=!0,r=0,d=this.primitive,c=this.primitives;if(this.createPrimitive){var Z=this.geometry.values,g=Z.length;if(g>0)(0,s.Z)(d)&&((0,s.Z)(this.oldPrimitive)?c.remove(d):this.oldPrimitive=d),d=new p.Z({show:!1,asynchronous:!0,geometryInstances:Z.slice(),classificationType:this.classificationType}),c.add(d,this.zIndex),i=!1;else{(0,s.Z)(d)&&(c.remove(d),d=void 0);var y=this.oldPrimitive;(0,s.Z)(y)&&(c.remove(y),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=d,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,s.Z)(d)&&d.ready){d.show=!0,(0,s.Z)(this.oldPrimitive)&&(c.remove(this.oldPrimitive),this.oldPrimitive=void 0);var _=this.updatersWithAttributes.values,C=_.length,w=this.waitingOnCreate;for(e=0;e<C;e++){var b=_[e],P=this.geometry.get(b.id),D=this.attributes.get(P.id.id);if((0,s.Z)(D)||(D=d.getGeometryInstanceAttributes(P.id),this.attributes.set(P.id.id,D)),!b.fillMaterialProperty.isConstant||w){var E=b.fillMaterialProperty.color,T=u.Z.getValueOrDefault(E,t,n.Z.WHITE,v);n.Z.equals(D._lastColor,T)||(D._lastColor=n.Z.clone(T,D._lastColor),D.color=o.Z.toValue(T,D.color))}var I=b.entity.isShowing&&(b.hasConstantFill||b.isFilled(t)),S=1===D.show[0];I!==S&&(D.show=l.Z.toValue(I,D.show));var A=b.distanceDisplayConditionProperty;if(!u.Z.isConstant(A)){var O=u.Z.getValueOrDefault(A,t,m,f);a.Z.equals(O,D._lastDistanceDisplayCondition)||(D._lastDistanceDisplayCondition=a.Z.clone(O,D._lastDistanceDisplayCondition),D.distanceDisplayCondition=h.Z.toValue(O,D.distanceDisplayCondition))}}this.updateShows(d),this.waitingOnCreate=!1}else(0,s.Z)(d)&&!d.ready&&(i=!1);return this.itemsToRemove.length=r,i},Z.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var n=e[r],o=this.geometry.get(n.id),a=this.attributes.get(o.id.id);(0,s.Z)(a)||(a=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,a));var h=n.entity.isShowing,p=1===a.show[0];h!==p&&(a.show=l.Z.toValue(h,a.show),o.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},Z.prototype.contains=function(t){return this.updaters.contains(t.id)},Z.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return d.Z.PENDING;var r=i.getBoundingSphere(t.entity);return(0,s.Z)(r)?(r.clone(e),d.Z.DONE):d.Z.FAILED},Z.prototype.removeAllPrimitives=function(){var t=this.primitives,e=this.primitive;(0,s.Z)(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());var i=this.oldPrimitive;(0,s.Z)(i)&&(t.remove(i),this.oldPrimitive=void 0)},g.prototype.add=function(t,e){for(var i,r=e.createFillGeometryInstance(t),n=this._batches,o=u.Z.getValueOrDefault(e.zIndex,0),a=n.length,h=0;h<a;++h){var l=n[h];if(l.zIndex===o&&!l.overlapping(r.geometry.rectangle)){i=l;break}}return(0,s.Z)(i)||(i=new Z(this._primitives,this._classificationType,r.attributes.color.value,o),n.push(i)),i.add(e,r),i},g.prototype.remove=function(t){for(var e=this._batches,i=e.length,r=0;r<i;++r)if(e[r].remove(t))return},g.prototype.update=function(t){var e,i,r=!0,n=this._batches,o=n.length;for(e=0;e<o;++e)r=n[e].update(t)&&r;for(e=0;e<o;++e)for(var s=n[e],a=s.itemsToRemove,h=a.length,l=0;l<h;l++){i=a[l],s.remove(i);var p=this.add(t,i);s.isDirty=!0,p.isDirty=!0}for(e=o-1;e>=0;--e){var d=n[e];d.isDirty&&(r=n[e].update(t)&&r,d.isDirty=!1),0===d.geometry.length&&n.splice(e,1)}return r},g.prototype.getBoundingSphere=function(t,e){for(var i=this._batches,r=i.length,n=0;n<r;++n){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return d.Z.FAILED},g.prototype.removeAllPrimitives=function(){for(var t=this._batches,e=t.length,i=0;i<e;++i)t[i].removeAllPrimitives()},e["Z"]=g},65249:function(t,e,i){var r=i(8629),n=i(82982),o=i(47861),s=i(24689),a=i(8185),h=i(37939),l=i(47780),p=i(88472),d=i(69895),u=i(20174),c=i(46317),v=i(40112),f=new o.Z,m=new o.Z;function Z(t,e,i,n,o,s){this.primitives=t,this.classificationType=e,this.appearanceType=i,this.materialProperty=n,this.updaters=new r.Z,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new r.Z,this.material=void 0,this.updatersWithAttributes=new r.Z,this.attributes=new r.Z,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(Z.prototype.onMaterialChanged,this),this.subscriptions=new r.Z,this.showsUpdated=new r.Z,this.usingSphericalTextureCoordinates=o,this.zIndex=s,this.rectangleCollisionCheck=new a.Z}function g(t,e,i){this._items=[],this._primitives=t,this._classificationType=e,this._appearanceType=i}Z.prototype.onMaterialChanged=function(){this.invalidated=!0},Z.prototype.overlapping=function(t){return this.rectangleCollisionCheck.collides(t)},Z.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty;return i===e||i instanceof u.Z&&e instanceof u.Z||(0,n.Z)(e)&&e.equals(i)},Z.prototype.add=function(t,e,i){var r=e.id;if(this.updaters.set(r,e),this.geometry.set(r,i),this.rectangleCollisionCheck.insert(r,i.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&v.Z.isConstant(e.distanceDisplayConditionProperty)){var n=this;this.subscriptions.set(r,e.entity.definitionChanged.addEventListener((function(t,i,r,o){"isShowing"===i&&n.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(r,e);this.createPrimitive=!0},Z.prototype.remove=function(t){var e=t.id,i=this.geometry.get(e);if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.rectangleCollisionCheck.remove(e,i.geometry.rectangle),this.updatersWithAttributes.remove(e);var r=this.subscriptions.get(e);return(0,n.Z)(r)&&(r(),this.subscriptions.remove(e)),!0}return!1},Z.prototype.update=function(t){var e,i=!0,r=this.primitive,a=this.primitives,p=this.geometry.values;if(this.createPrimitive){var d=p.length;if(d>0)(0,n.Z)(r)&&((0,n.Z)(this.oldPrimitive)?a.remove(r):this.oldPrimitive=r),this.material=c.Z.getValue(t,this.materialProperty,this.material),r=new l.Z({show:!1,asynchronous:!0,geometryInstances:p.slice(),appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),a.add(r,this.zIndex),i=!1;else{(0,n.Z)(r)&&(a.remove(r),r=void 0);var u=this.oldPrimitive;(0,n.Z)(u)&&(a.remove(u),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=r,this.createPrimitive=!1}else if((0,n.Z)(r)&&r.ready){r.show=!0,(0,n.Z)(this.oldPrimitive)&&(a.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=c.Z.getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material;var Z=this.updatersWithAttributes.values,g=Z.length;for(e=0;e<g;e++){var y=Z[e],_=y.entity,C=this.geometry.get(y.id),w=this.attributes.get(C.id.id);(0,n.Z)(w)||(w=r.getGeometryInstanceAttributes(C.id),this.attributes.set(C.id.id,w));var b=_.isShowing&&(y.hasConstantFill||y.isFilled(t)),P=1===w.show[0];b!==P&&(w.show=h.Z.toValue(b,w.show));var D=y.distanceDisplayConditionProperty;if(!v.Z.isConstant(D)){var E=v.Z.getValueOrDefault(D,t,m,f);o.Z.equals(E,w._lastDistanceDisplayCondition)||(w._lastDistanceDisplayCondition=o.Z.clone(E,w._lastDistanceDisplayCondition),w.distanceDisplayCondition=s.Z.toValue(E,w.distanceDisplayCondition))}}this.updateShows(r)}else(0,n.Z)(r)&&!r.ready&&(i=!1);return i},Z.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var o=e[r],s=o.entity,a=this.geometry.get(o.id),l=this.attributes.get(a.id.id);(0,n.Z)(l)||(l=t.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,l));var p=s.isShowing,d=1===l.show[0];p!==d&&(l.show=h.Z.toValue(p,l.show),a.attributes.show.value[0]=l.show[0])}this.showsUpdated.removeAll()},Z.prototype.contains=function(t){return this.updaters.contains(t.id)},Z.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return d.Z.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!(0,n.Z)(r)||!(0,n.Z)(r.boundingSphere)||(0,n.Z)(r.show)&&0===r.show[0]?d.Z.FAILED:(r.boundingSphere.clone(e),d.Z.DONE)},Z.prototype.destroy=function(){var t=this.primitive,e=this.primitives;(0,n.Z)(t)&&e.remove(t);var i=this.oldPrimitive;(0,n.Z)(i)&&e.remove(i),this.removeMaterialSubscription()},g.prototype.add=function(t,e){for(var i=this._items,r=i.length,n=e.createFillGeometryInstance(t),o=p.Z.shouldUseSphericalCoordinates(n.geometry.rectangle),s=v.Z.getValueOrDefault(e.zIndex,0),a=0;a<r;++a){var h=i[a];if(h.isMaterial(e)&&h.usingSphericalTextureCoordinates===o&&h.zIndex===s&&!h.overlapping(n.geometry.rectangle))return void h.add(t,e,n)}var l=new Z(this._primitives,this._classificationType,this._appearanceType,e.fillMaterialProperty,o,s);l.add(t,e,n),i.push(l)},g.prototype.remove=function(t){for(var e=this._items,i=e.length,r=i-1;r>=0;r--){var n=e[r];if(n.remove(t)){0===n.updaters.length&&(e.splice(r,1),n.destroy());break}}},g.prototype.update=function(t){var e,i=this._items,r=i.length;for(e=r-1;e>=0;e--){var n=i[e];if(n.invalidated){i.splice(e,1);for(var o=n.updaters.values,s=o.length,a=0;a<s;a++)this.add(t,o[a]);n.destroy()}}var h=!0;for(e=0;e<i.length;e++)h=i[e].update(t)&&h;return h},g.prototype.getBoundingSphere=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return d.Z.FAILED},g.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},e["Z"]=g},44172:function(t,e,i){var r=i(8629),n=i(59947),o=i(92062),s=i(62200),a=i(82982),h=i(47861),l=i(24689),p=i(37939),d=i(14978),u=i(54052),c=i(13597),v=i(69895),f=i(20174),m=i(46317),Z=i(40112),g=new n.Z,y=new h.Z,_=new h.Z;function C(t,e,i,n,o){var s;s=i instanceof f.Z?u.Z:c.Z,this.orderedGroundPrimitives=t,this.classificationType=e,this.appearanceType=s,this.materialProperty=i,this.updaters=new r.Z,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new r.Z,this.material=void 0,this.updatersWithAttributes=new r.Z,this.attributes=new r.Z,this.invalidated=!1,this.removeMaterialSubscription=i.definitionChanged.addEventListener(C.prototype.onMaterialChanged,this),this.subscriptions=new r.Z,this.showsUpdated=new r.Z,this.zIndex=n,this._asynchronous=o}function w(t,e,i){this._items=[],this._orderedGroundPrimitives=t,this._classificationType=e,this._asynchronous=(0,s.Z)(i,!0)}C.prototype.onMaterialChanged=function(){this.invalidated=!0},C.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty;return i===e||i instanceof f.Z&&e instanceof f.Z||(0,a.Z)(e)&&e.equals(i)},C.prototype.add=function(t,e,i){var r=e.id;if(this.updaters.set(r,e),this.geometry.set(r,i),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&Z.Z.isConstant(e.distanceDisplayConditionProperty)){var n=this;this.subscriptions.set(r,e.entity.definitionChanged.addEventListener((function(t,i,r,o){"isShowing"===i&&n.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(r,e);this.createPrimitive=!0},C.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return(0,a.Z)(i)&&(i(),this.subscriptions.remove(e)),!0}return!1},C.prototype.update=function(t){var e,i=!0,r=this.primitive,s=this.orderedGroundPrimitives,u=this.geometry.values;if(this.createPrimitive){var v=u.length;if(v>0)(0,a.Z)(r)&&((0,a.Z)(this.oldPrimitive)?s.remove(r):this.oldPrimitive=r),r=new d.Z({show:!1,asynchronous:this._asynchronous,geometryInstances:u.slice(),appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===c.Z&&(this.material=m.Z.getValue(t,this.materialProperty,this.material),r.appearance.material=this.material),s.add(r,this.zIndex),i=!1;else{(0,a.Z)(r)&&(s.remove(r),r=void 0);var f=this.oldPrimitive;(0,a.Z)(f)&&(s.remove(f),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=r,this.createPrimitive=!1}else if((0,a.Z)(r)&&r.ready){r.show=!0,(0,a.Z)(this.oldPrimitive)&&(s.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===c.Z&&(this.material=m.Z.getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material);var C=this.updatersWithAttributes.values,w=C.length;for(e=0;e<w;e++){var b=C[e],P=b.entity,D=this.geometry.get(b.id),E=this.attributes.get(D.id.id);if((0,a.Z)(E)||(E=r.getGeometryInstanceAttributes(D.id),this.attributes.set(D.id.id,E)),!b.fillMaterialProperty.isConstant){var T=b.fillMaterialProperty.color,I=Z.Z.getValueOrDefault(T,t,n.Z.WHITE,g);n.Z.equals(E._lastColor,I)||(E._lastColor=n.Z.clone(I,E._lastColor),E.color=o.Z.toValue(I,E.color))}var S=P.isShowing&&(b.hasConstantFill||b.isFilled(t)),A=1===E.show[0];S!==A&&(E.show=p.Z.toValue(S,E.show));var O=b.distanceDisplayConditionProperty;if(!Z.Z.isConstant(O)){var F=Z.Z.getValueOrDefault(O,t,_,y);h.Z.equals(F,E._lastDistanceDisplayCondition)||(E._lastDistanceDisplayCondition=h.Z.clone(F,E._lastDistanceDisplayCondition),E.distanceDisplayCondition=l.Z.toValue(F,E.distanceDisplayCondition))}}this.updateShows(r)}else(0,a.Z)(r)&&!r.ready&&(i=!1);return i},C.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var n=e[r],o=n.entity,s=this.geometry.get(n.id),h=this.attributes.get(s.id.id);(0,a.Z)(h)||(h=t.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,h));var l=o.isShowing,d=1===h.show[0];l!==d&&(h.show=p.Z.toValue(l,h.show),s.attributes.show.value[0]=h.show[0])}this.showsUpdated.removeAll()},C.prototype.contains=function(t){return this.updaters.contains(t.id)},C.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return v.Z.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!(0,a.Z)(r)||!(0,a.Z)(r.boundingSphere)||(0,a.Z)(r.show)&&0===r.show[0]?v.Z.FAILED:(r.boundingSphere.clone(e),v.Z.DONE)},C.prototype.destroy=function(){var t=this.primitive,e=this.orderedGroundPrimitives;(0,a.Z)(t)&&e.remove(t);var i=this.oldPrimitive;(0,a.Z)(i)&&e.remove(i),this.removeMaterialSubscription()},w.prototype.add=function(t,e){for(var i=this._items,r=i.length,n=e.createFillGeometryInstance(t),o=Z.Z.getValueOrDefault(e.zIndex,0),s=0;s<r;++s){var a=i[s];if(a.isMaterial(e)&&a.zIndex===o)return void a.add(t,e,n)}var h=new C(this._orderedGroundPrimitives,this._classificationType,e.fillMaterialProperty,o,this._asynchronous);h.add(t,e,n),i.push(h)},w.prototype.remove=function(t){for(var e=this._items,i=e.length,r=i-1;r>=0;r--){var n=e[r];if(n.remove(t)){0===n.updaters.length&&(e.splice(r,1),n.destroy());break}}},w.prototype.update=function(t){var e,i=this._items,r=i.length;for(e=r-1;e>=0;e--){var n=i[e];if(n.invalidated){i.splice(e,1);for(var o=n.updaters.values,s=o.length,a=0;a<s;a++)this.add(t,o[a]);n.destroy()}}var h=!0;for(e=0;e<i.length;e++)h=i[e].update(t)&&h;return h},w.prototype.getBoundingSphere=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return v.Z.FAILED},w.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},e["Z"]=w},29596:function(t,e,i){var r=i(8629),n=i(60216),o=i(59947),s=i(92062),a=i(82982),h=i(47861),l=i(24689),p=i(82223),d=i(37939),u=i(64060),c=i(34380),v=i(69895),f=i(40112),m=new o.Z,Z=new h.Z,g=new h.Z,y=n.Z.ZERO,_=new n.Z;function C(t,e,i,n){this.translucent=e,this.width=i,this.shadows=n,this.primitives=t,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new r.Z,this.updaters=new r.Z,this.updatersWithAttributes=new r.Z,this.attributes=new r.Z,this.itemsToRemove=[],this.subscriptions=new r.Z,this.showsUpdated=new r.Z}function w(t,e,i){this._primitives=t,this._scene=e,this._shadows=i,this._solidBatches=new r.Z,this._translucentBatches=new r.Z}C.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantOutline&&t.outlineColorProperty.isConstant&&f.Z.isConstant(t.distanceDisplayConditionProperty)&&f.Z.isConstant(t.terrainOffsetProperty)){var r=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(e,i,n,o){"isShowing"===i&&r.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},C.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return(0,a.Z)(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},C.prototype.update=function(t){var e,i=!0,r=0,v=this.primitive,C=this.primitives;if(this.createPrimitive){var w=this.geometry.values,b=w.length;if(b>0)(0,a.Z)(v)&&((0,a.Z)(this.oldPrimitive)?C.remove(v):this.oldPrimitive=v),v=new c.Z({show:!1,asynchronous:!0,geometryInstances:w.slice(),appearance:new u.Z({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),C.add(v),i=!1;else{(0,a.Z)(v)&&(C.remove(v),v=void 0);var P=this.oldPrimitive;(0,a.Z)(P)&&(C.remove(P),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=v,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,a.Z)(v)&&v.ready){v.show=!0,(0,a.Z)(this.oldPrimitive)&&(C.remove(this.oldPrimitive),this.oldPrimitive=void 0);var D=this.updatersWithAttributes.values,E=D.length,T=this.waitingOnCreate;for(e=0;e<E;e++){var I=D[e],S=this.geometry.get(I.id),A=this.attributes.get(S.id.id);if((0,a.Z)(A)||(A=v.getGeometryInstanceAttributes(S.id),this.attributes.set(S.id.id,A)),!I.outlineColorProperty.isConstant||T){var O=I.outlineColorProperty,F=f.Z.getValueOrDefault(O,t,o.Z.WHITE,m);o.Z.equals(A._lastColor,F)||(A._lastColor=o.Z.clone(F,A._lastColor),A.color=s.Z.toValue(F,A.color),(this.translucent&&255===A.color[3]||!this.translucent&&255!==A.color[3])&&(this.itemsToRemove[r++]=I))}var M=I.entity.isShowing&&(I.hasConstantOutline||I.isOutlineVisible(t)),V=1===A.show[0];M!==V&&(A.show=d.Z.toValue(M,A.show));var x=I.distanceDisplayConditionProperty;if(!f.Z.isConstant(x)){var k=f.Z.getValueOrDefault(x,t,g,Z);h.Z.equals(k,A._lastDistanceDisplayCondition)||(A._lastDistanceDisplayCondition=h.Z.clone(k,A._lastDistanceDisplayCondition),A.distanceDisplayCondition=l.Z.toValue(k,A.distanceDisplayCondition))}var L=I.terrainOffsetProperty;if(!f.Z.isConstant(L)){var N=f.Z.getValueOrDefault(L,t,y,_);n.Z.equals(N,A._lastOffset)||(A._lastOffset=n.Z.clone(N,A._lastOffset),A.offset=p.Z.toValue(N,A.offset))}}this.updateShows(v),this.waitingOnCreate=!1}else(0,a.Z)(v)&&!v.ready&&(i=!1);return this.itemsToRemove.length=r,i},C.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var n=e[r],o=this.geometry.get(n.id),s=this.attributes.get(o.id.id);(0,a.Z)(s)||(s=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,s));var h=n.entity.isShowing,l=1===s.show[0];h!==l&&(s.show=d.Z.toValue(h,s.show),o.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},C.prototype.contains=function(t){return this.updaters.contains(t.id)},C.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return v.Z.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!(0,a.Z)(r)||!(0,a.Z)(r.boundingSphere)||(0,a.Z)(r.show)&&0===r.show[0]?v.Z.FAILED:(r.boundingSphere.clone(e),v.Z.DONE)},C.prototype.removeAllPrimitives=function(){var t=this.primitives,e=this.primitive;(0,a.Z)(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());var i=this.oldPrimitive;(0,a.Z)(i)&&(t.remove(i),this.oldPrimitive=void 0)},w.prototype.add=function(t,e){var i,r,n=e.createOutlineGeometryInstance(t),o=this._scene.clampLineWidth(e.outlineWidth);255===n.attributes.color.value[3]?(i=this._solidBatches,r=i.get(o),(0,a.Z)(r)||(r=new C(this._primitives,!1,o,this._shadows),i.set(o,r)),r.add(e,n)):(i=this._translucentBatches,r=i.get(o),(0,a.Z)(r)||(r=new C(this._primitives,!0,o,this._shadows),i.set(o,r)),r.add(e,n))},w.prototype.remove=function(t){var e,i=this._solidBatches.values,r=i.length;for(e=0;e<r;e++)if(i[e].remove(t))return;var n=this._translucentBatches.values,o=n.length;for(e=0;e<o;e++)if(n[e].remove(t))return},w.prototype.update=function(t){var e,i,r,n,o,s=this._solidBatches.values,a=s.length,h=this._translucentBatches.values,l=h.length,p=!0,d=!1;do{for(d=!1,i=0;i<a;i++){n=s[i],p=n.update(t),o=n.itemsToRemove;var u=o.length;if(u>0)for(d=!0,e=0;e<u;e++)r=o[e],n.remove(r),this.add(t,r)}for(i=0;i<l;i++){n=h[i],p=n.update(t),o=n.itemsToRemove;var c=o.length;if(c>0)for(d=!0,e=0;e<c;e++)r=o[e],n.remove(r),this.add(t,r)}}while(d);return p},w.prototype.getBoundingSphere=function(t,e){var i,r=this._solidBatches.values,n=r.length;for(i=0;i<n;i++){var o=r[i];if(o.contains(t))return o.getBoundingSphere(t,e)}var s=this._translucentBatches.values,a=s.length;for(i=0;i<a;i++){var h=s[i];if(h.contains(t))return h.getBoundingSphere(t,e)}return v.Z.FAILED},w.prototype.removeAllPrimitives=function(){var t,e=this._solidBatches.values,i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();var r=this._translucentBatches.values,n=r.length;for(t=0;t<n;t++)r[t].removeAllPrimitives()},e["Z"]=w},79818:function(t,e,i){var r=i(59947),n=i(62200),o=i(82982),s=i(14459),a=i(90203),h=i(40112),l=i(28742),p=l.Z.HORIZONTAL,d=r.Z.WHITE,u=r.Z.BLACK,c=0,v=1;function f(t){t=(0,n.Z)(t,n.Z.EMPTY_OBJECT),this._definitionChanged=new s.Z,this._orientation=void 0,this._orientationSubscription=void 0,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._offset=void 0,this._offsetSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.orientation=t.orientation,this.evenColor=t.evenColor,this.oddColor=t.oddColor,this.offset=t.offset,this.repeat=t.repeat}Object.defineProperties(f.prototype,{isConstant:{get:function(){return h.Z.isConstant(this._orientation)&&h.Z.isConstant(this._evenColor)&&h.Z.isConstant(this._oddColor)&&h.Z.isConstant(this._offset)&&h.Z.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},orientation:(0,a.Z)("orientation"),evenColor:(0,a.Z)("evenColor"),oddColor:(0,a.Z)("oddColor"),offset:(0,a.Z)("offset"),repeat:(0,a.Z)("repeat")}),f.prototype.getType=function(t){return"Stripe"},f.prototype.getValue=function(t,e){return(0,o.Z)(e)||(e={}),e.horizontal=h.Z.getValueOrDefault(this._orientation,t,p)===l.Z.HORIZONTAL,e.evenColor=h.Z.getValueOrClonedDefault(this._evenColor,t,d,e.evenColor),e.oddColor=h.Z.getValueOrClonedDefault(this._oddColor,t,u,e.oddColor),e.offset=h.Z.getValueOrDefault(this._offset,t,c),e.repeat=h.Z.getValueOrDefault(this._repeat,t,v),e},f.prototype.equals=function(t){return this===t||t instanceof f&&h.Z.equals(this._orientation,t._orientation)&&h.Z.equals(this._evenColor,t._evenColor)&&h.Z.equals(this._oddColor,t._oddColor)&&h.Z.equals(this._offset,t._offset)&&h.Z.equals(this._repeat,t._repeat)},e["Z"]=f},28742:function(t,e){var i={HORIZONTAL:0,VERTICAL:1};e["Z"]=Object.freeze(i)},18743:function(t,e,i){var r=i(60216),n=i(51688),o=i(66553),s=i(82982),a=i(86511),h=i(14459),l=i(22841),p=i(99417),d=i(4260),u=i(89917),c=i(40112),v=new r.Z,f=new n.Z;function m(t,e,i,a){o.Z.defined("scene",t),o.Z.defined("positionProperty",e),this._scene=t,this._heightReference=i,this._extrudedHeightReference=a,this._positionProperty=e,this._position=new r.Z,this._cartographicPosition=new n.Z,this._normal=new r.Z,this._definitionChanged=new h.Z,this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;var p=this;if((0,s.Z)(t.globe)&&(this._removeEventListener=t.terrainProviderChanged.addEventListener((function(){p._updateClamping()})),this._removeModeListener=t.morphComplete.addEventListener((function(){p._updateClamping()}))),e.isConstant){var d=e.getValue(l.Z.MINIMUM_VALUE,v);if(!(0,s.Z)(d)||r.Z.equals(d,r.Z.ZERO)||!(0,s.Z)(t.globe))return;this._position=r.Z.clone(d,this._position),this._updateClamping(),this._normal=t.globe.ellipsoid.geodeticSurfaceNormal(d,this._normal)}}Object.defineProperties(m.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),m.prototype._updateClamping=function(){(0,s.Z)(this._removeCallbackFunc)&&this._removeCallbackFunc();var t=this._scene,e=t.globe,i=this._position;if((0,s.Z)(e)&&!r.Z.equals(i,r.Z.ZERO)){var n=e.ellipsoid,o=e._surface,a=this,h=n.cartesianToCartographic(i,this._cartographicPosition),l=e.getHeight(h);(0,s.Z)(l)?this._terrainHeight=l:this._terrainHeight=0,this._removeCallbackFunc=o.updateHeight(h,p)}else this._terrainHeight=0;function p(e){if(t.mode===u.Z.SCENE3D){var i=n.cartesianToCartographic(e,f);a._terrainHeight=i.height}else a._terrainHeight=e.x;a.definitionChanged.raiseEvent()}},m.prototype.getValue=function(t,e){var i=c.Z.getValueOrDefault(this._heightReference,t,d.Z.NONE),n=c.Z.getValueOrDefault(this._extrudedHeightReference,t,d.Z.NONE);if(i===d.Z.NONE&&n!==d.Z.RELATIVE_TO_GROUND)return this._position=r.Z.clone(r.Z.ZERO,this._position),r.Z.clone(r.Z.ZERO,e);if(this._positionProperty.isConstant)return r.Z.multiplyByScalar(this._normal,this._terrainHeight,e);var o=this._scene,a=this._positionProperty.getValue(t,v);if(!(0,s.Z)(a)||r.Z.equals(a,r.Z.ZERO)||!(0,s.Z)(o.globe))return r.Z.clone(r.Z.ZERO,e);if(r.Z.equalsEpsilon(this._position,a,p.Z.EPSILON10))return r.Z.multiplyByScalar(this._normal,this._terrainHeight,e);this._position=r.Z.clone(a,this._position),this._updateClamping();var h=o.globe.ellipsoid.geodeticSurfaceNormal(a,this._normal);return r.Z.multiplyByScalar(h,this._terrainHeight,e)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return(0,s.Z)(this._removeEventListener)&&this._removeEventListener(),(0,s.Z)(this._removeModeListener)&&this._removeModeListener(),(0,s.Z)(this._removeCallbackFunc)&&this._removeCallbackFunc(),(0,a.Z)(this)},e["Z"]=m},4129:function(t,e,i){var r=i(62200),n=i(82982),o=i(12572),s=i(14459),a=i(17964),h=i(46026),l=i(69188),p=i(40112);function d(t){this._definitionChanged=new s.Z,this._intervals=new h.Z,this._intervals.changedEvent.addEventListener(d.prototype._intervalsChanged,this),this._referenceFrame=(0,r.Z)(t,a.Z.FIXED)}Object.defineProperties(d.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}}),d.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,a.Z.FIXED,e)},d.prototype.getValueInReferenceFrame=function(t,e,i){if(!(0,n.Z)(t))throw new o.Z("time is required.");if(!(0,n.Z)(e))throw new o.Z("referenceFrame is required.");var r=this._intervals.findDataForIntervalContainingDate(t);if((0,n.Z)(r))return l.Z.convertToReferenceFrame(t,r,this._referenceFrame,e,i)},d.prototype.equals=function(t){return this===t||t instanceof d&&this._intervals.equals(t._intervals,p.Z.equals)&&this._referenceFrame===t._referenceFrame},d.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)},e["Z"]=d},36811:function(t,e,i){var r=i(82982),n=i(12572),o=i(14459),s=i(46026),a=i(40112);function h(){this._definitionChanged=new o.Z,this._intervals=new s.Z,this._intervals.changedEvent.addEventListener(h.prototype._intervalsChanged,this)}Object.defineProperties(h.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),h.prototype.getValue=function(t,e){if(!(0,r.Z)(t))throw new n.Z("time is required");var i=this._intervals.findDataForIntervalContainingDate(t);return(0,r.Z)(i)&&"function"===typeof i.clone?i.clone(e):i},h.prototype.equals=function(t){return this===t||t instanceof h&&this._intervals.equals(t._intervals,a.Z.equals)},h.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)},e["Z"]=h},1435:function(t,e,i){var r=i(60216),n=i(62200),o=i(82982),s=i(50491),a=i(14459),h=i(68201),l=i(87811),p=i(95555),d=i(40112),u=i(39671);function c(t,e){this._velocityVectorProperty=new u.Z(t,!0),this._subscription=void 0,this._ellipsoid=void 0,this._definitionChanged=new a.Z,this.ellipsoid=(0,n.Z)(e,s.Z.WGS84);var i=this;this._velocityVectorProperty.definitionChanged.addEventListener((function(){i._definitionChanged.raiseEvent(i)}))}Object.defineProperties(c.prototype,{isConstant:{get:function(){return d.Z.isConstant(this._velocityVectorProperty)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._velocityVectorProperty.position},set:function(t){this._velocityVectorProperty.position=t}},ellipsoid:{get:function(){return this._ellipsoid},set:function(t){var e=this._ellipsoid;e!==t&&(this._ellipsoid=t,this._definitionChanged.raiseEvent(this))}}});var v=new r.Z,f=new r.Z,m=new h.Z;c.prototype.getValue=function(t,e){var i=this._velocityVectorProperty._getValue(t,f,v);if((0,o.Z)(i))return p.Z.rotationMatrixFromPositionVelocity(v,i,this._ellipsoid,m),l.Z.fromRotationMatrix(m,e)},c.prototype.equals=function(t){return this===t||t instanceof c&&d.Z.equals(this._velocityVectorProperty,t._velocityVectorProperty)&&(this._ellipsoid===t._ellipsoid||this._ellipsoid.equals(t._ellipsoid))},e["Z"]=c},39671:function(t,e,i){var r=i(60216),n=i(62200),o=i(82982),s=i(12572),a=i(14459),h=i(55293),l=i(40112);function p(t,e){this._position=void 0,this._subscription=void 0,this._definitionChanged=new a.Z,this._normalize=(0,n.Z)(e,!0),this.position=t}Object.defineProperties(p.prototype,{isConstant:{get:function(){return l.Z.isConstant(this._position)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._position},set:function(t){var e=this._position;e!==t&&((0,o.Z)(e)&&this._subscription(),this._position=t,(0,o.Z)(t)&&(this._subscription=t._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)),this._definitionChanged.raiseEvent(this))}},normalize:{get:function(){return this._normalize},set:function(t){this._normalize!==t&&(this._normalize=t,this._definitionChanged.raiseEvent(this))}}});var d=new r.Z,u=new r.Z,c=new h.Z,v=1/60;p.prototype.getValue=function(t,e){return this._getValue(t,e)},p.prototype._getValue=function(t,e,i){if(!(0,o.Z)(t))throw new s.Z("time is required");(0,o.Z)(e)||(e=new r.Z);var n=this._position;if(l.Z.isConstant(n))return this._normalize?void 0:r.Z.clone(r.Z.ZERO,e);var a=n.getValue(t,d),p=n.getValue(h.Z.addSeconds(t,v,c),u);if((0,o.Z)(a)&&((0,o.Z)(p)||(p=a,a=n.getValue(h.Z.addSeconds(t,-v,c),u),(0,o.Z)(a)))){if(r.Z.equals(a,p))return this._normalize?void 0:r.Z.clone(r.Z.ZERO,e);(0,o.Z)(i)&&a.clone(i);var f=r.Z.subtract(p,a,e);return this._normalize?r.Z.normalize(f,e):r.Z.divideByScalar(f,v,e)}},p.prototype.equals=function(t){return this===t||t instanceof p&&l.Z.equals(this._position,t._position)},e["Z"]=p},95741:function(t,e,i){var r=i(12572);function n(){r.Z.throwInstantiationError()}n.prototype.update=r.Z.throwInstantiationError,n.prototype.getBoundingSphere=r.Z.throwInstantiationError,n.prototype.isDestroyed=r.Z.throwInstantiationError,n.prototype.destroy=r.Z.throwInstantiationError},97167:function(t,e,i){var r=i(66553),n=i(59947),o=i(92062),s=i(82982),a=i(12572),h=i(24689),l=i(26865),p=i(22841),d=i(37939),u=i(82444),c=i(81810),v=i(79158),f=i(64060),m=i(20174),Z=i(84225),g=i(17045),y=i(40112),_=new n.Z;function C(t){this.id=t,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function w(t,e){g.Z.call(this,{entity:t,scene:e,geometryOptions:new C(t),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(t,"wall",t.wall,void 0)}function b(t,e,i){Z.Z.call(this,t,e,i)}(0,s.Z)(Object.create)&&(w.prototype=Object.create(g.Z.prototype),w.prototype.constructor=w),w.prototype.createFillGeometryInstance=function(t){if(r.Z.defined("time",t),!this._fillEnabled)throw new a.Z("This instance does not represent a filled geometry.");var e,i,p,c=this._entity,v=c.isAvailable(t),f=new d.Z(v&&c.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),Z=this._distanceDisplayConditionProperty.getValue(t),g=h.Z.fromDistanceDisplayCondition(Z);this._materialProperty instanceof m.Z?((0,s.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||v)&&(p=this._materialProperty.color.getValue(t,_)),(0,s.Z)(p)||(p=n.Z.WHITE),i=o.Z.fromColor(p),e={show:f,distanceDisplayCondition:g,color:i}):e={show:f,distanceDisplayCondition:g};return new l.Z({id:c,geometry:new u.Z(this._options),attributes:e})},w.prototype.createOutlineGeometryInstance=function(t){if(r.Z.defined("time",t),!this._outlineEnabled)throw new a.Z("This instance does not represent an outlined geometry.");var e=this._entity,i=e.isAvailable(t),s=y.Z.getValueOrDefault(this._outlineColorProperty,t,n.Z.BLACK,_),p=this._distanceDisplayConditionProperty.getValue(t);return new l.Z({id:e,geometry:new c.Z(this._options),attributes:{show:new d.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:o.Z.fromColor(s),distanceDisplayCondition:h.Z.fromDistanceDisplayCondition(p)}})},w.prototype._isHidden=function(t,e){return!(0,s.Z)(e.positions)||g.Z.prototype._isHidden.call(this,t,e)},w.prototype._getIsClosed=function(t){return!1},w.prototype._isDynamic=function(t,e){return!e.positions.isConstant||!y.Z.isConstant(e.minimumHeights)||!y.Z.isConstant(e.maximumHeights)||!y.Z.isConstant(e.outlineWidth)||!y.Z.isConstant(e.granularity)},w.prototype._setStaticOptions=function(t,e){var i=e.minimumHeights,r=e.maximumHeights,n=e.granularity,o=this._materialProperty instanceof m.Z,a=this._options;a.vertexFormat=o?f.Z.VERTEX_FORMAT:v.Z.MaterialSupport.TEXTURED.vertexFormat,a.positions=e.positions.getValue(p.Z.MINIMUM_VALUE,a.positions),a.minimumHeights=(0,s.Z)(i)?i.getValue(p.Z.MINIMUM_VALUE,a.minimumHeights):void 0,a.maximumHeights=(0,s.Z)(r)?r.getValue(p.Z.MINIMUM_VALUE,a.maximumHeights):void 0,a.granularity=(0,s.Z)(n)?n.getValue(p.Z.MINIMUM_VALUE):void 0},w.DynamicGeometryUpdater=b,(0,s.Z)(Object.create)&&(b.prototype=Object.create(Z.Z.prototype),b.prototype.constructor=b),b.prototype._isHidden=function(t,e,i){return!(0,s.Z)(this._options.positions)||Z.Z.prototype._isHidden.call(this,t,e,i)},b.prototype._setOptions=function(t,e,i){var r=this._options;r.positions=y.Z.getValueOrUndefined(e.positions,i,r.positions),r.minimumHeights=y.Z.getValueOrUndefined(e.minimumHeights,i,r.minimumHeights),r.maximumHeights=y.Z.getValueOrUndefined(e.maximumHeights,i,r.maximumHeights),r.granularity=y.Z.getValueOrUndefined(e.granularity,i)},e["Z"]=w},65269:function(t,e,i){var r=i(62200),n=i(82982),o=i(12572),s=i(14459),a=i(1370),h=i(90203);function l(t){this._definitionChanged=new s.Z,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge((0,r.Z)(t,r.Z.EMPTY_OBJECT))}Object.defineProperties(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,h.Z)("show"),positions:(0,h.Z)("positions"),minimumHeights:(0,h.Z)("minimumHeights"),maximumHeights:(0,h.Z)("maximumHeights"),granularity:(0,h.Z)("granularity"),fill:(0,h.Z)("fill"),material:(0,a.Z)("material"),outline:(0,h.Z)("outline"),outlineColor:(0,h.Z)("outlineColor"),outlineWidth:(0,h.Z)("outlineWidth"),shadows:(0,h.Z)("shadows"),distanceDisplayCondition:(0,h.Z)("distanceDisplayCondition")}),l.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.positions=this.positions,t.minimumHeights=this.minimumHeights,t.maximumHeights=this.maximumHeights,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new l(this)},l.prototype.merge=function(t){if(!(0,n.Z)(t))throw new o.Z("source is required.");this.show=(0,r.Z)(this.show,t.show),this.positions=(0,r.Z)(this.positions,t.positions),this.minimumHeights=(0,r.Z)(this.minimumHeights,t.minimumHeights),this.maximumHeights=(0,r.Z)(this.maximumHeights,t.maximumHeights),this.granularity=(0,r.Z)(this.granularity,t.granularity),this.fill=(0,r.Z)(this.fill,t.fill),this.material=(0,r.Z)(this.material,t.material),this.outline=(0,r.Z)(this.outline,t.outline),this.outlineColor=(0,r.Z)(this.outlineColor,t.outlineColor),this.outlineWidth=(0,r.Z)(this.outlineWidth,t.outlineWidth),this.shadows=(0,r.Z)(this.shadows,t.shadows),this.distanceDisplayCondition=(0,r.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition)},e["Z"]=l},1370:function(t,e,i){var r=i(59947),n=i(12572),o=i(68985),s=i(20174),a=i(90203),h=i(33796);function l(t){if(t instanceof r.Z)return new s.Z(t);if("string"===typeof t||t instanceof o.Z||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){var e=new h.Z;return e.image=t,e}throw new n.Z("Unable to infer material type: "+t)}function p(t,e){return(0,a.Z)(t,e,l)}e["Z"]=p},90203:function(t,e,i){var r=i(62200),n=i(82982),o=i(612);function s(t,e,i,r,o){return{configurable:r,get:function(){return this[e]},set:function(r){var s=this[e],a=this[i];(0,n.Z)(a)&&(a(),this[i]=void 0);var h=void 0!==r;!h||(0,n.Z)(r)&&(0,n.Z)(r.getValue)||!(0,n.Z)(o)||(r=o(r)),s!==r&&(this[e]=r,this._definitionChanged.raiseEvent(this,t,r,s)),(0,n.Z)(r)&&(0,n.Z)(r.definitionChanged)&&(this[i]=r.definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this,t,r,r)}),this))}}}function a(t){return new o.Z(t)}function h(t,e,i){return s(t,"_"+t.toString(),"_"+t.toString()+"Subscription",(0,r.Z)(e,!1),(0,r.Z)(i,a))}e["Z"]=h},33054:function(t,e,i){var r=i(90203);function n(t){return t}function o(t,e){return(0,r.Z)(t,e,n)}e["Z"]=o},53279:function(t,e,i){var r=i(60838),n=i(60216),o=i(51688),s=i(59947),a=i(39960),h=i(62200),l=i(82982),p=i(12572),d=i(50491),u=i(22841),c=i(55293),v=i(99417),f=i(96190),m=i(17964),Z=i(68985),g=i(9407),y=i(77808),_=i(46026),C=i(4260),w=i(62919),b=i(60473),P=i(13222),D=i(92678),E=i(44011),T=i(74254),I=i(4949),S=i(85441),A=i(87207),O=i(23470),F=i(42098),M=32,V="http://www.opengis.net/kml/2.2",x="http://www.google.com/kml/ext/2.2",k="http://www.w3.org/2000/xmlns/";function L(t){this._files={},this._promises=[],this._count=0,this._modelCallback=t}var N=/^data:image\/([^,;]+)/;function H(t,e){return function(i){t._files[e]=i}}function R(t){this._time=t}function G(){this._ids={},this._styles={},this._count=0}function U(){this._ids={}}function q(t){t=(0,h.Z)(t,h.Z.EMPTY_OBJECT);var e=t.entities,i=(0,h.Z)(t.kmz,!1);if(!(0,l.Z)(e))throw new p.Z("entities is required.");var r=q._createState(t),n=e.values.filter((function(t){return!(0,l.Z)(t.parent)})),o=r.kmlDoc,s=o.documentElement;s.setAttributeNS(k,"xmlns:gx",x);var a=o.createElement("Document");s.appendChild(a),z(r,a,n),r.styleCache.save(a);var d=r.externalFileHandler;return d.promise.then((function(){var t=new XMLSerializer,e=t.serializeToString(r.kmlDoc);return i?B(e,d.files):{kml:e,externalFiles:d.files}}))}function B(t,e){var i=new D.Z.BlobWriter,r=new D.Z.ZipWriter(i);return(0,P.Z)(r.add("doc.kml",new D.Z.TextReader(t))).then((function(){var t=Object.keys(e);return W(r,t,e,0)})).then((function(){return(0,P.Z)(r.close()).then((function(t){return{kmz:t}}))}))}function W(t,e,i,r){if(e.length!==r){var n=e[r];return(0,P.Z)(t.add(n,new D.Z.BlobReader(i[n]))).then((function(){return W(t,e,i,r+1)}))}}function z(t,e,i){for(var r,n,o,s=t.kmlDoc,a=t.styleCache,h=t.valueGetter,p=t.idManager,d=i.length,v=0;v<d;++v){var f,m=i[v];r=[],n=[],o=[],J(t,m,n,o),tt(t,m.polyline,n,o),nt(t,m.rectangle,n,o,r),nt(t,m.polygon,n,o,r),at(t,m,m.model,n,o);var Z=m.availability;(0,l.Z)(Z)&&(f=s.createElement("TimeSpan"),c.Z.equals(Z.start,u.Z.MINIMUM_VALUE)||f.appendChild(dt(s,"begin",c.Z.toIso8601(Z.start))),c.Z.equals(Z.stop,u.Z.MAXIMUM_VALUE)||f.appendChild(dt(s,"end",c.Z.toIso8601(Z.stop))));for(var g=0;g<r.length;++g){var y=r[g];y.setAttribute("id",p.get(m.id)),y.appendChild(dt(s,"name",m.name)),y.appendChild(dt(s,"visibility",m.show)),y.appendChild(dt(s,"description",m.description)),(0,l.Z)(f)&&y.appendChild(f),e.appendChild(y)}var _=n.length;if(_>0){var C=s.createElement("Placemark");C.setAttribute("id",p.get(m.id));var w=m.name,b=m.label;if((0,l.Z)(b)){var P=s.createElement("LabelStyle"),D=h.get(b.text);w=(0,l.Z)(D)&&D.length>0?D:w;var E=h.getColor(b.fillColor);(0,l.Z)(E)&&(P.appendChild(dt(s,"color",E)),P.appendChild(dt(s,"colorMode","normal")));var T=h.get(b.scale);(0,l.Z)(T)&&P.appendChild(dt(s,"scale",T)),o.push(P)}C.appendChild(dt(s,"name",w)),C.appendChild(dt(s,"visibility",m.show)),C.appendChild(dt(s,"description",m.description)),(0,l.Z)(f)&&C.appendChild(f),e.appendChild(C);var I=o.length;if(I>0){for(var S=s.createElement("Style"),A=0;A<I;++A)S.appendChild(o[A]);C.appendChild(dt(s,"styleUrl",a.get(S)))}if(1===n.length)C.appendChild(n[0]);else if(n.length>1){for(var O=s.createElement("MultiGeometry"),F=0;F<_;++F)O.appendChild(n[F]);C.appendChild(O)}}var M=m._children;if(M.length>0){var V=s.createElement("Folder");V.setAttribute("id",p.get(m.id)),V.appendChild(dt(s,"name",m.name)),V.appendChild(dt(s,"visibility",m.show)),V.appendChild(dt(s,"description",m.description)),e.appendChild(V),z(t,V,M)}}}L.prototype.texture=function(t){var e,i=this;if("string"===typeof t||t instanceof Z.Z){if(t=Z.Z.createIfNeeded(t),!t.isDataUri)return t.url;var r=t.url.match(N);e="texture_"+ ++this._count,(0,l.Z)(r)&&(e+="."+r[1]);var n=t.fetchBlob().then((function(t){i._files[e]=t}));return this._promises.push(n),e}if(t instanceof HTMLCanvasElement){var o=P.Z.defer();return this._promises.push(o.promise),e="texture_"+ ++this._count+".png",t.toBlob((function(t){i._files[e]=t,o.resolve()})),e}return""},L.prototype.model=function(t,e){var i=this._modelCallback;if(!(0,l.Z)(i))throw new g.Z("Encountered a model entity while exporting to KML, but no model callback was supplied.");var r={},n=i(t,e,r);for(var o in r)if(r.hasOwnProperty(o)){var s=(0,P.Z)(r[o]);this._promises.push(s),s.then(H(this,o))}return n},Object.defineProperties(L.prototype,{promise:{get:function(){return P.Z.all(this._promises)}},files:{get:function(){return this._files}}}),R.prototype.get=function(t,e,i){var r;return(0,l.Z)(t)&&(r=(0,l.Z)(t.getValue)?t.getValue(this._time,i):t),(0,h.Z)(r,e)},R.prototype.getColor=function(t,e){var i=this.get(t,e);if((0,l.Z)(i))return ut(i)},R.prototype.getMaterialType=function(t){if((0,l.Z)(t))return t.getType(this._time)},G.prototype.get=function(t){var e=this._ids,i=t.innerHTML;if((0,l.Z)(e[i]))return e[i];var r="style-"+ ++this._count;return t.setAttribute("id",r),r="#"+r,e[i]=r,this._styles[i]=t,r},G.prototype.save=function(t){var e=this._styles,i=t.childNodes[0];for(var r in e)e.hasOwnProperty(r)&&t.insertBefore(e[r],i)},U.prototype.get=function(t){if(!(0,l.Z)(t))return this.get((0,a.Z)());var e=this._ids;return(0,l.Z)(e[t])?t.toString()+"-"+ ++e[t]:(e[t]=0,t)},q._createState=function(t){var e=t.entities,i=new G,r=e.computeAvailability(),n=(0,l.Z)(t.time)?t.time:r.start,o=(0,h.Z)(t.defaultAvailability,r),s=(0,h.Z)(t.sampleDuration,60);o.start===u.Z.MINIMUM_VALUE?o.stop===u.Z.MAXIMUM_VALUE?o=new y.Z:c.Z.addSeconds(o.stop,-10*s,o.start):o.stop===u.Z.MAXIMUM_VALUE&&c.Z.addSeconds(o.start,10*s,o.stop);var a=new L(t.modelCallback),p=document.implementation.createDocument(V,"kml");return{kmlDoc:p,ellipsoid:(0,h.Z)(t.ellipsoid,d.Z.WGS84),idManager:new U,styleCache:i,externalFileHandler:a,time:n,valueGetter:new R(n),sampleDuration:s,defaultAvailability:new _.Z([o])}};var j=new n.Z,X=new o.Z,K=new c.Z;function J(t,e,i,r){var n=t.kmlDoc,o=t.ellipsoid,s=t.valueGetter,a=(0,h.Z)(e.billboard,e.point);if((0,l.Z)(a)||(0,l.Z)(e.path)){var p=e.position;if(p.isConstant){s.get(p,void 0,j);var d=dt(n,"coordinates",pt(j,o)),u=n.createElement("Point"),c=n.createElement("altitudeMode");c.appendChild(lt(t,a.heightReference)),u.appendChild(c),u.appendChild(d),i.push(u);var v=a instanceof E.Z?$(t,a):Q(t,a);r.push(v)}else Y(t,e,a,i,r)}}function Y(t,e,i,r,o){var s,a=t.kmlDoc,p=t.ellipsoid,d=t.valueGetter,u=e.position,v=!0;u instanceof T.Z?(s=u.intervals,v=!1):s=(0,h.Z)(e.availability,t.defaultAvailability);var f,Z,g,y=i instanceof I.Z,_=[];for(f=0;f<s.length;++f){var w=s.get(f),b=v?u:w.data,P=a.createElement("altitudeMode");b instanceof F.Z?(b=b._value,P.appendChild(lt(t,C.Z.CLAMP_TO_GROUND))):(0,l.Z)(i)?P.appendChild(lt(t,i.heightReference)):P.appendChild(lt(t,C.Z.NONE));var D=[],S=[];if(b.isConstant){d.get(b,void 0,j);var M=dt(a,"coordinates",pt(j,p));D.push(c.Z.toIso8601(w.start)),S.push(M),D.push(c.Z.toIso8601(w.stop)),S.push(M)}else if(b instanceof A.Z)for(g=b._property._times,Z=0;Z<g.length;++Z)D.push(c.Z.toIso8601(g[Z])),b.getValueInReferenceFrame(g[Z],m.Z.FIXED,j),S.push(pt(j,p));else if(b instanceof O.Z){g=b._times;var V=b._values;for(Z=0;Z<g.length;++Z)D.push(c.Z.toIso8601(g[Z])),n.Z.fromArray(V,3*Z,j),S.push(pt(j,p))}else{var k=t.sampleDuration;w.start.clone(K),w.isStartIncluded||c.Z.addSeconds(K,k,K);var L=w.stop;while(c.Z.lessThan(K,L))b.getValue(K,j),D.push(c.Z.toIso8601(K)),S.push(pt(j,p)),c.Z.addSeconds(K,k,K);w.isStopIncluded&&c.Z.equals(K,L)&&(b.getValue(K,j),D.push(c.Z.toIso8601(K)),S.push(pt(j,p)))}var N=a.createElementNS(x,"Track");N.appendChild(P);for(var H=0;H<D.length;++H){var R=dt(a,"when",D[H]),G=dt(a,"coord",S[H],x);N.appendChild(R),N.appendChild(G)}y&&N.appendChild(st(t,i)),_.push(N)}if(1===_.length)r.push(_[0]);else if(_.length>1){var U=a.createElementNS(x,"MultiTrack");for(f=0;f<_.length;++f)U.appendChild(_[f]);r.push(U)}if((0,l.Z)(i)&&!y){var q=i instanceof E.Z?$(t,i):Q(t,i);o.push(q)}var B=e.path;if((0,l.Z)(B)){var W=d.get(B.width),z=B.material;if((0,l.Z)(z)||(0,l.Z)(W)){var X=a.createElement("LineStyle");(0,l.Z)(W)&&X.appendChild(dt(a,"width",W)),ht(t,z,X),o.push(X)}}}function Q(t,e){var i=t.kmlDoc,r=t.valueGetter,n=i.createElement("IconStyle"),o=r.getColor(e.color);(0,l.Z)(o)&&(n.appendChild(dt(i,"color",o)),n.appendChild(dt(i,"colorMode","normal")));var s=r.get(e.pixelSize);return(0,l.Z)(s)&&n.appendChild(dt(i,"scale",s/M)),n}function $(t,e){var i=t.kmlDoc,o=t.valueGetter,s=t.externalFileHandler,a=i.createElement("IconStyle"),p=o.get(e.image);if((0,l.Z)(p)){p=s.texture(p);var d=i.createElement("Icon");d.appendChild(dt(i,"href",p));var u=o.get(e.imageSubRegion);(0,l.Z)(u)&&(d.appendChild(dt(i,"x",u.x,x)),d.appendChild(dt(i,"y",u.y,x)),d.appendChild(dt(i,"w",u.width,x)),d.appendChild(dt(i,"h",u.height,x))),a.appendChild(d)}var c=o.getColor(e.color);(0,l.Z)(c)&&(a.appendChild(dt(i,"color",c)),a.appendChild(dt(i,"colorMode","normal")));var f=o.get(e.scale);(0,l.Z)(f)&&a.appendChild(dt(i,"scale",f));var m=o.get(e.pixelOffset);if((0,l.Z)(m)){f=(0,h.Z)(f,1),r.Z.divideByScalar(m,f,m);var Z=o.get(e.width,M),g=o.get(e.height,M),y=o.get(e.horizontalOrigin,w.Z.CENTER);y===w.Z.CENTER?m.x-=.5*Z:y===w.Z.RIGHT&&(m.x-=Z);var _=o.get(e.verticalOrigin,b.Z.CENTER);_===b.Z.TOP?m.y+=g:_===b.Z.CENTER&&(m.y+=.5*g);var C=i.createElement("hotSpot");C.setAttribute("x",-m.x),C.setAttribute("y",m.y),C.setAttribute("xunits","pixels"),C.setAttribute("yunits","pixels"),a.appendChild(C)}var P=o.get(e.rotation),D=o.get(e.alignedAxis);return(0,l.Z)(P)&&n.Z.equals(n.Z.UNIT_Z,D)&&(P=v.Z.toDegrees(-P),0===P&&(P=360),a.appendChild(dt(i,"heading",P))),a}function tt(t,e,i,r){var n=t.kmlDoc,o=t.ellipsoid,s=t.valueGetter;if((0,l.Z)(e)){var a,h=n.createElement("LineString"),p=n.createElement("altitudeMode"),d=s.get(e.clampToGround,!1);d?(h.appendChild(dt(n,"tessellate",!0)),a=n.createTextNode("clampToGround")):a=n.createTextNode("absolute"),p.appendChild(a),h.appendChild(p);var u=e.positions,c=s.get(u),v=dt(n,"coordinates",pt(c,o));h.appendChild(v);var f=s.get(e.zIndex);d&&(0,l.Z)(f)&&h.appendChild(dt(n,"drawOrder",f,x)),i.push(h);var m=n.createElement("LineStyle"),Z=s.get(e.width);(0,l.Z)(Z)&&m.appendChild(dt(n,"width",Z)),ht(t,e.material,m),r.push(m)}}function et(t,e,i){var r,n=t.kmlDoc,o=t.valueGetter,s=o.get(e.height,0);i>0&&(s=i);for(var a=e.coordinates,h=o.get(a),l=[],p=[f.Z.northeast,f.Z.southeast,f.Z.southwest,f.Z.northwest],d=0;d<4;++d)p[d](h,X),l.push(v.Z.toDegrees(X.longitude)+","+v.Z.toDegrees(X.latitude)+","+s);r=dt(n,"coordinates",l.join(" "));var u=n.createElement("outerBoundaryIs"),c=n.createElement("LinearRing");return c.appendChild(r),u.appendChild(c),[u]}function it(t,e,i,r){for(var n=t.kmlDoc,s=t.ellipsoid,a=[],h=e.length,l=0;l<h;++l)o.Z.fromCartesian(e[l],s,X),a.push(v.Z.toDegrees(X.longitude)+","+v.Z.toDegrees(X.latitude)+","+(r?X.height:i));var p=dt(n,"coordinates",a.join(" ")),d=n.createElement("LinearRing");return d.appendChild(p),d}function rt(t,e,i){var r=t.kmlDoc,n=t.valueGetter,o=n.get(e.height,0),s=n.get(e.perPositionHeight,!1);!s&&i>0&&(o=i);var a=[],h=e.hierarchy,p=n.get(h),d=Array.isArray(p)?p:p.positions,u=r.createElement("outerBoundaryIs");u.appendChild(it(t,d,o,s)),a.push(u);var c=p.holes;if((0,l.Z)(c))for(var v=c.length,f=0;f<v;++f){var m=r.createElement("innerBoundaryIs");m.appendChild(it(t,c[f].positions,o,s)),a.push(m)}return a}function nt(t,e,i,r,n){var o=t.kmlDoc,a=t.valueGetter;if((0,l.Z)(e)){var h=e instanceof S.Z;if(h&&"Image"===a.getMaterialType(e.material))ot(t,e,n);else{var p=o.createElement("Polygon"),d=a.get(e.extrudedHeight,0);d>0&&p.appendChild(dt(o,"extrude",!0));for(var u=h?et(t,e,d):rt(t,e,d),c=u.length,v=0;v<c;++v)p.appendChild(u[v]);var f=o.createElement("altitudeMode");f.appendChild(lt(t,e.heightReference)),p.appendChild(f),i.push(p);var m=o.createElement("PolyStyle"),Z=a.get(e.fill,!1);Z&&m.appendChild(dt(o,"fill",Z)),ht(t,e.material,m);var g=a.get(e.outline,!1);if(g){m.appendChild(dt(o,"outline",g));var y=o.createElement("LineStyle"),_=a.get(e.outlineWidth,1);y.appendChild(dt(o,"width",_));var C=a.getColor(e.outlineColor,s.Z.BLACK);y.appendChild(dt(o,"color",C)),y.appendChild(dt(o,"colorMode","normal")),r.push(y)}r.push(m)}}}function ot(t,e,i){var r=t.kmlDoc,n=t.valueGetter,o=t.externalFileHandler,s=r.createElement("GroundOverlay"),a=r.createElement("altitudeMode");a.appendChild(lt(t,e.heightReference)),s.appendChild(a);var h=n.get(e.height);(0,l.Z)(h)&&s.appendChild(dt(r,"altitude",h));var p=n.get(e.coordinates),d=r.createElement("LatLonBox");d.appendChild(dt(r,"north",v.Z.toDegrees(p.north))),d.appendChild(dt(r,"south",v.Z.toDegrees(p.south))),d.appendChild(dt(r,"east",v.Z.toDegrees(p.east))),d.appendChild(dt(r,"west",v.Z.toDegrees(p.west))),s.appendChild(d);var u=n.get(e.material),c=o.texture(u.image),f=r.createElement("Icon");f.appendChild(dt(r,"href",c)),s.appendChild(f);var m=u.color;(0,l.Z)(m)&&s.appendChild(dt(r,"color",ut(u.color))),i.push(s)}function st(t,e){var i=t.kmlDoc,r=t.valueGetter,n=t.externalFileHandler,o=i.createElement("Model"),s=r.get(e.scale);if((0,l.Z)(s)){var a=i.createElement("scale");a.appendChild(dt(i,"x",s)),a.appendChild(dt(i,"y",s)),a.appendChild(dt(i,"z",s)),o.appendChild(a)}var h=i.createElement("Link"),p=n.model(e,t.time);return h.appendChild(dt(i,"href",p)),o.appendChild(h),o}function at(t,e,i,r,n){var s=t.kmlDoc,a=t.ellipsoid,h=t.valueGetter;if((0,l.Z)(i)){var p=e.position;if(p.isConstant){var d=st(t,i),u=s.createElement("altitudeMode");u.appendChild(lt(t,i.heightReference)),d.appendChild(u),h.get(p,void 0,j),o.Z.fromCartesian(j,a,X);var c=s.createElement("Location");c.appendChild(dt(s,"longitude",v.Z.toDegrees(X.longitude))),c.appendChild(dt(s,"latitude",v.Z.toDegrees(X.latitude))),c.appendChild(dt(s,"altitude",X.height)),d.appendChild(c),r.push(d)}else Y(t,e,i,r,n)}}function ht(t,e,i){var r=t.kmlDoc,n=t.valueGetter;if((0,l.Z)(e)){var o=n.get(e);if((0,l.Z)(o)){var a,h=n.getMaterialType(e);switch(h){case"Image":a=ut(s.Z.WHITE);break;case"Color":case"Grid":case"PolylineGlow":case"PolylineArrow":case"PolylineDash":a=ut(o.color);break;case"PolylineOutline":a=ut(o.color);var p=ut(o.outlineColor),d=o.outlineWidth;i.appendChild(dt(r,"outerColor",p,x)),i.appendChild(dt(r,"outerWidth",d,x));break;case"Stripe":a=ut(o.oddColor);break}(0,l.Z)(a)&&(i.appendChild(dt(r,"color",a)),i.appendChild(dt(r,"colorMode","normal")))}}}function lt(t,e){var i,r=t.kmlDoc,n=t.valueGetter,o=n.get(e,C.Z.NONE);switch(o){case C.Z.NONE:i=r.createTextNode("absolute");break;case C.Z.CLAMP_TO_GROUND:i=r.createTextNode("clampToGround");break;case C.Z.RELATIVE_TO_GROUND:i=r.createTextNode("relativeToGround");break}return i}function pt(t,e){Array.isArray(t)||(t=[t]);for(var i=t.length,r=[],n=0;n<i;++n)o.Z.fromCartesian(t[n],e,X),r.push(v.Z.toDegrees(X.longitude)+","+v.Z.toDegrees(X.latitude)+","+X.height);return r.join(" ")}function dt(t,e,i,r){i=(0,h.Z)(i,""),"boolean"===typeof i&&(i=i?"1":"0");var n=(0,l.Z)(r)?t.createElementNS(r,e):t.createElement(e),o="string"===i&&-1!==i.indexOf("<")?t.createCDATASection(i):t.createTextNode(i);return n.appendChild(o),n}function ut(t){for(var e="",i=t.toBytes(),r=3;r>=0;--r)e+=i[r]<16?"0"+i[r].toString(16):i[r].toString(16);return e}},23502:function(t,e,i){var r=i(82982),n=i(11249),o=i(17045),s=i(18743);function a(t,e,i,a){if(o.Z.prototype._onEntityPropertyChanged.call(this,t,e,i,a),-1!==this._observedPropertyNames.indexOf(e)){var h=this._entity[this._geometryPropertyName];if((0,r.Z)(h)){(0,r.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);var l=h.heightReference;if((0,r.Z)(l)){var p=new n.Z(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new s.Z(this._scene,p,l)}}}}e["Z"]=a}}]);
//# sourceMappingURL=chunk-vendors-375811cb-legacy.fdb2c430.js.map