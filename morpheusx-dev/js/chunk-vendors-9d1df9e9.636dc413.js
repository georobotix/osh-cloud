"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[2215],{59692:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_buildModuleUrl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72000);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_Credit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52975);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(14459);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(96190);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(68985);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(9407);\n/* harmony import */ var _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(9121);\n/* harmony import */ var _Core_WebMercatorTilingScheme_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(42423);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(13222);\n/* harmony import */ var _BingMapsStyle_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(53377);\n/* harmony import */ var _DiscardEmptyTileImagePolicy_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(46707);\n/* harmony import */ var _ImageryProvider_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(95451);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @typedef {Object} BingMapsImageryProvider.ConstructorOptions\n *\n * Initialization options for the BingMapsImageryProvider constructor\n *\n * @property {Resource|String} url The url of the Bing Maps server hosting the imagery.\n * @property {String} key The Bing Maps key for your application, which can be\n *        created at {@link https://www.bingmapsportal.com/}.\n * @property {String} [tileProtocol] The protocol to use when loading tiles, e.g. \'http\' or \'https\'.\n *        By default, tiles are loaded using the same protocol as the page.\n * @property {BingMapsStyle} [mapStyle=BingMapsStyle.AERIAL] The type of Bing Maps imagery to load.\n * @property {String} [culture=\'\'] The culture to use when requesting Bing Maps imagery. Not\n *        all cultures are supported. See {@link http://msdn.microsoft.com/en-us/library/hh441729.aspx}\n *        for information on the supported cultures.\n * @property {Ellipsoid} [ellipsoid] The ellipsoid.  If not specified, the WGS84 ellipsoid is used.\n * @property {TileDiscardPolicy} [tileDiscardPolicy] The policy that determines if a tile\n *        is invalid and should be discarded.  By default, a {@link DiscardEmptyTileImagePolicy}\n *        will be used, with the expectation that the Bing Maps server will send a zero-length response for missing tiles.\n *        To ensure that no tiles are discarded, construct and pass a {@link NeverTileDiscardPolicy} for this parameter.\n */\n\n/**\n * Provides tiled imagery using the Bing Maps Imagery REST API.\n *\n * @alias BingMapsImageryProvider\n * @constructor\n *\n * @param {BingMapsImageryProvider.ConstructorOptions} options Object describing initialization options\n *\n * @see ArcGisMapServerImageryProvider\n * @see GoogleEarthEnterpriseMapsProvider\n * @see OpenStreetMapImageryProvider\n * @see SingleTileImageryProvider\n * @see TileMapServiceImageryProvider\n * @see WebMapServiceImageryProvider\n * @see WebMapTileServiceImageryProvider\n * @see UrlTemplateImageryProvider\n *\n *\n * @example\n * var bing = new Cesium.BingMapsImageryProvider({\n *     url : \'https://dev.virtualearth.net\',\n *     key : \'get-yours-at-https://www.bingmapsportal.com/\',\n *     mapStyle : Cesium.BingMapsStyle.AERIAL\n * });\n *\n * @see {@link http://msdn.microsoft.com/en-us/library/ff701713.aspx|Bing Maps REST Services}\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n */\nfunction BingMapsImageryProvider(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var accessKey = options.key;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(options.url)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("options.url is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(accessKey)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("options.key is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  /**\n   * The default alpha blending value of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the night side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultNightAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the day side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultDayAlpha = undefined;\n\n  /**\n   * The default brightness of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0\n   * makes the imagery darker while greater than 1.0 makes it brighter.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultBrightness = undefined;\n\n  /**\n   * The default contrast of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces\n   * the contrast while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultContrast = undefined;\n\n  /**\n   * The default hue of this provider in radians. 0.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultHue = undefined;\n\n  /**\n   * The default saturation of this provider. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the\n   * saturation while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultSaturation = undefined;\n\n  /**\n   * The default gamma correction to apply to this provider.  1.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default 1.0\n   */\n  this.defaultGamma = 1.0;\n\n  /**\n   * The default texture minification filter to apply to this provider.\n   *\n   * @type {TextureMinificationFilter}\n   * @default undefined\n   */\n  this.defaultMinificationFilter = undefined;\n\n  /**\n   * The default texture magnification filter to apply to this provider.\n   *\n   * @type {TextureMagnificationFilter}\n   * @default undefined\n   */\n  this.defaultMagnificationFilter = undefined;\n\n  this._key = accessKey;\n  this._resource = _Core_Resource_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].createIfNeeded */ .Z.createIfNeeded(options.url);\n  this._resource.appendForwardSlash();\n  this._tileProtocol = options.tileProtocol;\n  this._mapStyle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.mapStyle, _BingMapsStyle_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].AERIAL */ .Z.AERIAL);\n  this._culture = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.culture, "");\n\n  this._tileDiscardPolicy = options.tileDiscardPolicy;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(this._tileDiscardPolicy)) {\n    this._tileDiscardPolicy = new _DiscardEmptyTileImagePolicy_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z();\n  }\n\n  this._proxy = options.proxy;\n  this._credit = new _Core_Credit_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n    \'<a href="http://www.bing.com"><img src="\' +\n      BingMapsImageryProvider.logoUrl +\n      \'" title="Bing Imagery"/></a>\'\n  );\n\n  this._tilingScheme = new _Core_WebMercatorTilingScheme_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n    numberOfLevelZeroTilesX: 2,\n    numberOfLevelZeroTilesY: 2,\n    ellipsoid: options.ellipsoid,\n  });\n\n  this._tileWidth = undefined;\n  this._tileHeight = undefined;\n  this._maximumLevel = undefined;\n  this._imageUrlTemplate = undefined;\n  this._imageUrlSubdomains = undefined;\n\n  this._errorEvent = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n\n  this._ready = false;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].defer */ .Z.defer();\n\n  var tileProtocol = this._tileProtocol;\n\n  // For backward compatibility reasons, the tileProtocol may end with\n  // a `:`. Remove it.\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(tileProtocol)) {\n    if (\n      tileProtocol.length > 0 &&\n      tileProtocol[tileProtocol.length - 1] === ":"\n    ) {\n      tileProtocol = tileProtocol.substr(0, tileProtocol.length - 1);\n    }\n  } else {\n    // use http if the document\'s protocol is http, otherwise use https\n    var documentProtocol = document.location.protocol;\n    tileProtocol = documentProtocol === "http:" ? "http" : "https";\n  }\n\n  var metadataResource = this._resource.getDerivedResource({\n    url: "REST/v1/Imagery/Metadata/" + this._mapStyle,\n    queryParameters: {\n      incl: "ImageryProviders",\n      key: this._key,\n      uriScheme: tileProtocol,\n    },\n  });\n  var that = this;\n  var metadataError;\n\n  function metadataSuccess(data) {\n    if (data.resourceSets.length !== 1) {\n      metadataFailure();\n      return;\n    }\n    var resource = data.resourceSets[0].resources[0];\n\n    that._tileWidth = resource.imageWidth;\n    that._tileHeight = resource.imageHeight;\n    that._maximumLevel = resource.zoomMax - 1;\n    that._imageUrlSubdomains = resource.imageUrlSubdomains;\n    that._imageUrlTemplate = resource.imageUrl;\n\n    var attributionList = (that._attributionList = resource.imageryProviders);\n    if (!attributionList) {\n      attributionList = that._attributionList = [];\n    }\n\n    for (\n      var attributionIndex = 0, attributionLength = attributionList.length;\n      attributionIndex < attributionLength;\n      ++attributionIndex\n    ) {\n      var attribution = attributionList[attributionIndex];\n\n      if (attribution.credit instanceof _Core_Credit_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z) {\n        // If attribution.credit has already been created\n        // then we are using a cached value, which means\n        // none of the remaining processing needs to be done.\n        break;\n      }\n\n      attribution.credit = new _Core_Credit_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(attribution.attribution);\n      var coverageAreas = attribution.coverageAreas;\n\n      for (\n        var areaIndex = 0, areaLength = attribution.coverageAreas.length;\n        areaIndex < areaLength;\n        ++areaIndex\n      ) {\n        var area = coverageAreas[areaIndex];\n        var bbox = area.bbox;\n        area.bbox = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toRadians */ .Z.toRadians(bbox[1]),\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toRadians */ .Z.toRadians(bbox[0]),\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toRadians */ .Z.toRadians(bbox[3]),\n          _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].toRadians */ .Z.toRadians(bbox[2])\n        );\n      }\n    }\n\n    that._ready = true;\n    that._readyPromise.resolve(true);\n    _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].handleSuccess */ .Z.handleSuccess(metadataError);\n  }\n\n  function metadataFailure(e) {\n    var message =\n      "An error occurred while accessing " + metadataResource.url + ".";\n    metadataError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].handleError */ .Z.handleError(\n      metadataError,\n      that,\n      that._errorEvent,\n      message,\n      undefined,\n      undefined,\n      undefined,\n      requestMetadata\n    );\n    that._readyPromise.reject(new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(message));\n  }\n\n  var cacheKey = metadataResource.url;\n  function requestMetadata() {\n    var promise = metadataResource.fetchJsonp("jsonp");\n    BingMapsImageryProvider._metadataCache[cacheKey] = promise;\n    promise.then(metadataSuccess).otherwise(metadataFailure);\n  }\n\n  var promise = BingMapsImageryProvider._metadataCache[cacheKey];\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(promise)) {\n    promise.then(metadataSuccess).otherwise(metadataFailure);\n  } else {\n    requestMetadata();\n  }\n}\n\nObject.defineProperties(BingMapsImageryProvider.prototype, {\n  /**\n   * Gets the name of the BingMaps server url hosting the imagery.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._resource.url;\n    },\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return this._resource.proxy;\n    },\n  },\n\n  /**\n   * Gets the Bing Maps key.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  key: {\n    get: function () {\n      return this._key;\n    },\n  },\n\n  /**\n   * Gets the type of Bing Maps imagery to load.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {BingMapsStyle}\n   * @readonly\n   */\n  mapStyle: {\n    get: function () {\n      return this._mapStyle;\n    },\n  },\n\n  /**\n   * The culture to use when requesting Bing Maps imagery. Not\n   * all cultures are supported. See {@link http://msdn.microsoft.com/en-us/library/hh441729.aspx}\n   * for information on the supported cultures.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  culture: {\n    get: function () {\n      return this._culture;\n    },\n  },\n\n  /**\n   * Gets the width of each tile, in pixels. This function should\n   * not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tileWidth must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileWidth;\n    },\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tileHeight must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileHeight;\n    },\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Number|undefined}\n   * @readonly\n   */\n  maximumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "maximumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._maximumLevel;\n    },\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "minimumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return 0;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tilingScheme must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by this instance.  This function should\n   * not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "rectangle must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tilingScheme.rectangle;\n    },\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out "missing" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tileDiscardPolicy must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileDiscardPolicy;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery.  This function should not be called before {@link BingMapsImageryProvider#ready} returns true.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return this._credit;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  Setting this property to false reduces memory usage\n   * and texture upload time.\n   * @memberof BingMapsImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: function () {\n      return false;\n    },\n  },\n});\n\nvar rectangleScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nBingMapsImageryProvider.prototype.getTileCredits = function (x, y, level) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "getTileCredits must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var rectangle = this._tilingScheme.tileXYToRectangle(\n    x,\n    y,\n    level,\n    rectangleScratch\n  );\n  var result = getRectangleAttribution(this._attributionList, level, rectangle);\n\n  return result;\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link BingMapsImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n *\n * @exception {DeveloperError} <code>requestImage</code> must not be called before the imagery provider is ready.\n */\nBingMapsImageryProvider.prototype.requestImage = function (\n  x,\n  y,\n  level,\n  request\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "requestImage must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var promise = _ImageryProvider_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].loadImage */ .Z.loadImage(\n    this,\n    buildImageResource(this, x, y, level, request)\n  );\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(promise)) {\n    return promise.otherwise(function (error) {\n      // One cause of an error here is that the image we tried to load was zero-length.\n      // This isn\'t actually a problem, since it indicates that there is no tile.\n      // So, in that case we return the EMPTY_IMAGE sentinel value for later discarding.\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(error.blob) && error.blob.size === 0) {\n        return _DiscardEmptyTileImagePolicy_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].EMPTY_IMAGE */ .Z.EMPTY_IMAGE;\n      }\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].reject */ .Z.reject(error);\n    });\n  }\n\n  return undefined;\n};\n\n/**\n * Picking features is not currently supported by this imagery provider, so this function simply returns\n * undefined.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n */\nBingMapsImageryProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  return undefined;\n};\n\n/**\n * Converts a tiles (x, y, level) position into a quadkey used to request an image\n * from a Bing Maps server.\n *\n * @param {Number} x The tile\'s x coordinate.\n * @param {Number} y The tile\'s y coordinate.\n * @param {Number} level The tile\'s zoom level.\n *\n * @see {@link http://msdn.microsoft.com/en-us/library/bb259689.aspx|Bing Maps Tile System}\n * @see BingMapsImageryProvider#quadKeyToTileXY\n */\nBingMapsImageryProvider.tileXYToQuadKey = function (x, y, level) {\n  var quadkey = "";\n  for (var i = level; i >= 0; --i) {\n    var bitmask = 1 << i;\n    var digit = 0;\n\n    if ((x & bitmask) !== 0) {\n      digit |= 1;\n    }\n\n    if ((y & bitmask) !== 0) {\n      digit |= 2;\n    }\n\n    quadkey += digit;\n  }\n  return quadkey;\n};\n\n/**\n * Converts a tile\'s quadkey used to request an image from a Bing Maps server into the\n * (x, y, level) position.\n *\n * @param {String} quadkey The tile\'s quad key\n *\n * @see {@link http://msdn.microsoft.com/en-us/library/bb259689.aspx|Bing Maps Tile System}\n * @see BingMapsImageryProvider#tileXYToQuadKey\n */\nBingMapsImageryProvider.quadKeyToTileXY = function (quadkey) {\n  var x = 0;\n  var y = 0;\n  var level = quadkey.length - 1;\n  for (var i = level; i >= 0; --i) {\n    var bitmask = 1 << i;\n    var digit = +quadkey[level - i];\n\n    if ((digit & 1) !== 0) {\n      x |= bitmask;\n    }\n\n    if ((digit & 2) !== 0) {\n      y |= bitmask;\n    }\n  }\n  return {\n    x: x,\n    y: y,\n    level: level,\n  };\n};\n\nBingMapsImageryProvider._logoUrl = undefined;\n\nObject.defineProperties(BingMapsImageryProvider, {\n  /**\n   * Gets or sets the URL to the Bing logo for display in the credit.\n   * @memberof BingMapsImageryProvider\n   * @type {String}\n   */\n  logoUrl: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(BingMapsImageryProvider._logoUrl)) {\n        BingMapsImageryProvider._logoUrl = (0,_Core_buildModuleUrl_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n          "Assets/Images/bing_maps_credit.png"\n        );\n      }\n      return BingMapsImageryProvider._logoUrl;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("value", value);\n      //>>includeEnd(\'debug\');\n\n      BingMapsImageryProvider._logoUrl = value;\n    },\n  },\n});\n\nfunction buildImageResource(imageryProvider, x, y, level, request) {\n  var imageUrl = imageryProvider._imageUrlTemplate;\n\n  var subdomains = imageryProvider._imageUrlSubdomains;\n  var subdomainIndex = (x + y + level) % subdomains.length;\n\n  return imageryProvider._resource.getDerivedResource({\n    url: imageUrl,\n    request: request,\n    templateValues: {\n      quadkey: BingMapsImageryProvider.tileXYToQuadKey(x, y, level),\n      subdomain: subdomains[subdomainIndex],\n      culture: imageryProvider._culture,\n    },\n    queryParameters: {\n      // this parameter tells the Bing servers to send a zero-length response\n      // instead of a placeholder image for missing tiles.\n      n: "z",\n    },\n  });\n}\n\nvar intersectionScratch = new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z();\n\nfunction getRectangleAttribution(attributionList, level, rectangle) {\n  // Bing levels start at 1, while ours start at 0.\n  ++level;\n\n  var result = [];\n\n  for (\n    var attributionIndex = 0, attributionLength = attributionList.length;\n    attributionIndex < attributionLength;\n    ++attributionIndex\n  ) {\n    var attribution = attributionList[attributionIndex];\n    var coverageAreas = attribution.coverageAreas;\n\n    var included = false;\n\n    for (\n      var areaIndex = 0, areaLength = attribution.coverageAreas.length;\n      !included && areaIndex < areaLength;\n      ++areaIndex\n    ) {\n      var area = coverageAreas[areaIndex];\n      if (level >= area.zoomMin && level <= area.zoomMax) {\n        var intersection = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].intersection */ .Z.intersection(\n          rectangle,\n          area.bbox,\n          intersectionScratch\n        );\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(intersection)) {\n          included = true;\n        }\n      }\n    }\n\n    if (included) {\n      result.push(attribution.credit);\n    }\n  }\n\n  return result;\n}\n\n// Exposed for testing\nBingMapsImageryProvider._metadataCache = {};\n/* harmony default export */ __webpack_exports__["Z"] = (BingMapsImageryProvider);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFQSw4QkFBOEIsbUVBQVM7O0FBRXZDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2RkFBc0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNFQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlEQUFlLHVCQUF1QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0JpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLmpzPzFjMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJ1aWxkTW9kdWxlVXJsIGZyb20gXCIuLi9Db3JlL2J1aWxkTW9kdWxlVXJsLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBDcmVkaXQgZnJvbSBcIi4uL0NvcmUvQ3JlZGl0LmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2UgZnJvbSBcIi4uL0NvcmUvUmVzb3VyY2UuanNcIjtcbmltcG9ydCBSdW50aW1lRXJyb3IgZnJvbSBcIi4uL0NvcmUvUnVudGltZUVycm9yLmpzXCI7XG5pbXBvcnQgVGlsZVByb3ZpZGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvVGlsZVByb3ZpZGVyRXJyb3IuanNcIjtcbmltcG9ydCBXZWJNZXJjYXRvclRpbGluZ1NjaGVtZSBmcm9tIFwiLi4vQ29yZS9XZWJNZXJjYXRvclRpbGluZ1NjaGVtZS5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuaW1wb3J0IEJpbmdNYXBzU3R5bGUgZnJvbSBcIi4vQmluZ01hcHNTdHlsZS5qc1wiO1xuaW1wb3J0IERpc2NhcmRFbXB0eVRpbGVQb2xpY3kgZnJvbSBcIi4vRGlzY2FyZEVtcHR5VGlsZUltYWdlUG9saWN5LmpzXCI7XG5pbXBvcnQgSW1hZ2VyeVByb3ZpZGVyIGZyb20gXCIuL0ltYWdlcnlQcm92aWRlci5qc1wiO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLkNvbnN0cnVjdG9yT3B0aW9uc1xuICpcbiAqIEluaXRpYWxpemF0aW9uIG9wdGlvbnMgZm9yIHRoZSBCaW5nTWFwc0ltYWdlcnlQcm92aWRlciBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcm9wZXJ0eSB7UmVzb3VyY2V8U3RyaW5nfSB1cmwgVGhlIHVybCBvZiB0aGUgQmluZyBNYXBzIHNlcnZlciBob3N0aW5nIHRoZSBpbWFnZXJ5LlxuICogQHByb3BlcnR5IHtTdHJpbmd9IGtleSBUaGUgQmluZyBNYXBzIGtleSBmb3IgeW91ciBhcHBsaWNhdGlvbiwgd2hpY2ggY2FuIGJlXG4gKiAgICAgICAgY3JlYXRlZCBhdCB7QGxpbmsgaHR0cHM6Ly93d3cuYmluZ21hcHNwb3J0YWwuY29tL30uXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW3RpbGVQcm90b2NvbF0gVGhlIHByb3RvY29sIHRvIHVzZSB3aGVuIGxvYWRpbmcgdGlsZXMsIGUuZy4gJ2h0dHAnIG9yICdodHRwcycuXG4gKiAgICAgICAgQnkgZGVmYXVsdCwgdGlsZXMgYXJlIGxvYWRlZCB1c2luZyB0aGUgc2FtZSBwcm90b2NvbCBhcyB0aGUgcGFnZS5cbiAqIEBwcm9wZXJ0eSB7QmluZ01hcHNTdHlsZX0gW21hcFN0eWxlPUJpbmdNYXBzU3R5bGUuQUVSSUFMXSBUaGUgdHlwZSBvZiBCaW5nIE1hcHMgaW1hZ2VyeSB0byBsb2FkLlxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtjdWx0dXJlPScnXSBUaGUgY3VsdHVyZSB0byB1c2Ugd2hlbiByZXF1ZXN0aW5nIEJpbmcgTWFwcyBpbWFnZXJ5LiBOb3RcbiAqICAgICAgICBhbGwgY3VsdHVyZXMgYXJlIHN1cHBvcnRlZC4gU2VlIHtAbGluayBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaGg0NDE3MjkuYXNweH1cbiAqICAgICAgICBmb3IgaW5mb3JtYXRpb24gb24gdGhlIHN1cHBvcnRlZCBjdWx0dXJlcy5cbiAqIEBwcm9wZXJ0eSB7RWxsaXBzb2lkfSBbZWxsaXBzb2lkXSBUaGUgZWxsaXBzb2lkLiAgSWYgbm90IHNwZWNpZmllZCwgdGhlIFdHUzg0IGVsbGlwc29pZCBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtUaWxlRGlzY2FyZFBvbGljeX0gW3RpbGVEaXNjYXJkUG9saWN5XSBUaGUgcG9saWN5IHRoYXQgZGV0ZXJtaW5lcyBpZiBhIHRpbGVcbiAqICAgICAgICBpcyBpbnZhbGlkIGFuZCBzaG91bGQgYmUgZGlzY2FyZGVkLiAgQnkgZGVmYXVsdCwgYSB7QGxpbmsgRGlzY2FyZEVtcHR5VGlsZUltYWdlUG9saWN5fVxuICogICAgICAgIHdpbGwgYmUgdXNlZCwgd2l0aCB0aGUgZXhwZWN0YXRpb24gdGhhdCB0aGUgQmluZyBNYXBzIHNlcnZlciB3aWxsIHNlbmQgYSB6ZXJvLWxlbmd0aCByZXNwb25zZSBmb3IgbWlzc2luZyB0aWxlcy5cbiAqICAgICAgICBUbyBlbnN1cmUgdGhhdCBubyB0aWxlcyBhcmUgZGlzY2FyZGVkLCBjb25zdHJ1Y3QgYW5kIHBhc3MgYSB7QGxpbmsgTmV2ZXJUaWxlRGlzY2FyZFBvbGljeX0gZm9yIHRoaXMgcGFyYW1ldGVyLlxuICovXG5cbi8qKlxuICogUHJvdmlkZXMgdGlsZWQgaW1hZ2VyeSB1c2luZyB0aGUgQmluZyBNYXBzIEltYWdlcnkgUkVTVCBBUEkuXG4gKlxuICogQGFsaWFzIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge0JpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLkNvbnN0cnVjdG9yT3B0aW9uc30gb3B0aW9ucyBPYmplY3QgZGVzY3JpYmluZyBpbml0aWFsaXphdGlvbiBvcHRpb25zXG4gKlxuICogQHNlZSBBcmNHaXNNYXBTZXJ2ZXJJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyXG4gKiBAc2VlIE9wZW5TdHJlZXRNYXBJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgU2luZ2xlVGlsZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBUaWxlTWFwU2VydmljZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBXZWJNYXBTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFdlYk1hcFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFVybFRlbXBsYXRlSW1hZ2VyeVByb3ZpZGVyXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgYmluZyA9IG5ldyBDZXNpdW0uQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIoe1xuICogICAgIHVybCA6ICdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0JyxcbiAqICAgICBrZXkgOiAnZ2V0LXlvdXJzLWF0LWh0dHBzOi8vd3d3LmJpbmdtYXBzcG9ydGFsLmNvbS8nLFxuICogICAgIG1hcFN0eWxlIDogQ2VzaXVtLkJpbmdNYXBzU3R5bGUuQUVSSUFMXG4gKiB9KTtcbiAqXG4gKiBAc2VlIHtAbGluayBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvZmY3MDE3MTMuYXNweHxCaW5nIE1hcHMgUkVTVCBTZXJ2aWNlc31cbiAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvfENyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nfVxuICovXG5mdW5jdGlvbiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlcihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciBhY2Nlc3NLZXkgPSBvcHRpb25zLmtleTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQob3B0aW9ucy51cmwpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy51cmwgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChhY2Nlc3NLZXkpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy5rZXkgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbHBoYSBibGVuZGluZyB2YWx1ZSBvZiB0aGlzIHByb3ZpZGVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRBbHBoYSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb24gdGhlIG5pZ2h0IHNpZGUgb2YgdGhlIGdsb2JlIG9mIHRoaXMgcHJvdmlkZXIsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdE5pZ2h0QWxwaGEgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFscGhhIGJsZW5kaW5nIHZhbHVlIG9uIHRoZSBkYXkgc2lkZSBvZiB0aGUgZ2xvYmUgb2YgdGhpcyBwcm92aWRlciwgd2l0aCAwLjAgcmVwcmVzZW50aW5nIGZ1bGx5IHRyYW5zcGFyZW50IGFuZFxuICAgKiAxLjAgcmVwcmVzZW50aW5nIGZ1bGx5IG9wYXF1ZS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0RGF5QWxwaGEgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGJyaWdodG5lc3Mgb2YgdGhpcyBwcm92aWRlci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuICBMZXNzIHRoYW4gMS4wXG4gICAqIG1ha2VzIHRoZSBpbWFnZXJ5IGRhcmtlciB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIG1ha2VzIGl0IGJyaWdodGVyLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRCcmlnaHRuZXNzID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBjb250cmFzdCBvZiB0aGlzIHByb3ZpZGVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gIExlc3MgdGhhbiAxLjAgcmVkdWNlc1xuICAgKiB0aGUgY29udHJhc3Qgd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBpbmNyZWFzZXMgaXQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdENvbnRyYXN0ID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBodWUgb2YgdGhpcyBwcm92aWRlciBpbiByYWRpYW5zLiAwLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRIdWUgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHNhdHVyYXRpb24gb2YgdGhpcyBwcm92aWRlci4gMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gTGVzcyB0aGFuIDEuMCByZWR1Y2VzIHRoZVxuICAgKiBzYXR1cmF0aW9uIHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgaW5jcmVhc2VzIGl0LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRTYXR1cmF0aW9uID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBnYW1tYSBjb3JyZWN0aW9uIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqL1xuICB0aGlzLmRlZmF1bHRHYW1tYSA9IDEuMDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgdGV4dHVyZSBtaW5pZmljYXRpb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuXG4gICAqXG4gICAqIEB0eXBlIHtUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdE1pbmlmaWNhdGlvbkZpbHRlciA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgdGV4dHVyZSBtYWduaWZpY2F0aW9uIGZpbHRlciB0byBhcHBseSB0byB0aGlzIHByb3ZpZGVyLlxuICAgKlxuICAgKiBAdHlwZSB7VGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXJ9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0TWFnbmlmaWNhdGlvbkZpbHRlciA9IHVuZGVmaW5lZDtcblxuICB0aGlzLl9rZXkgPSBhY2Nlc3NLZXk7XG4gIHRoaXMuX3Jlc291cmNlID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQob3B0aW9ucy51cmwpO1xuICB0aGlzLl9yZXNvdXJjZS5hcHBlbmRGb3J3YXJkU2xhc2goKTtcbiAgdGhpcy5fdGlsZVByb3RvY29sID0gb3B0aW9ucy50aWxlUHJvdG9jb2w7XG4gIHRoaXMuX21hcFN0eWxlID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMubWFwU3R5bGUsIEJpbmdNYXBzU3R5bGUuQUVSSUFMKTtcbiAgdGhpcy5fY3VsdHVyZSA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmN1bHR1cmUsIFwiXCIpO1xuXG4gIHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5ID0gb3B0aW9ucy50aWxlRGlzY2FyZFBvbGljeTtcbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5KSkge1xuICAgIHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5ID0gbmV3IERpc2NhcmRFbXB0eVRpbGVQb2xpY3koKTtcbiAgfVxuXG4gIHRoaXMuX3Byb3h5ID0gb3B0aW9ucy5wcm94eTtcbiAgdGhpcy5fY3JlZGl0ID0gbmV3IENyZWRpdChcbiAgICAnPGEgaHJlZj1cImh0dHA6Ly93d3cuYmluZy5jb21cIj48aW1nIHNyYz1cIicgK1xuICAgICAgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIubG9nb1VybCArXG4gICAgICAnXCIgdGl0bGU9XCJCaW5nIEltYWdlcnlcIi8+PC9hPidcbiAgKTtcblxuICB0aGlzLl90aWxpbmdTY2hlbWUgPSBuZXcgV2ViTWVyY2F0b3JUaWxpbmdTY2hlbWUoe1xuICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNYOiAyLFxuICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNZOiAyLFxuICAgIGVsbGlwc29pZDogb3B0aW9ucy5lbGxpcHNvaWQsXG4gIH0pO1xuXG4gIHRoaXMuX3RpbGVXaWR0aCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdGlsZUhlaWdodCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbWF4aW11bUxldmVsID0gdW5kZWZpbmVkO1xuICB0aGlzLl9pbWFnZVVybFRlbXBsYXRlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9pbWFnZVVybFN1YmRvbWFpbnMgPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fZXJyb3JFdmVudCA9IG5ldyBFdmVudCgpO1xuXG4gIHRoaXMuX3JlYWR5ID0gZmFsc2U7XG4gIHRoaXMuX3JlYWR5UHJvbWlzZSA9IHdoZW4uZGVmZXIoKTtcblxuICB2YXIgdGlsZVByb3RvY29sID0gdGhpcy5fdGlsZVByb3RvY29sO1xuXG4gIC8vIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHJlYXNvbnMsIHRoZSB0aWxlUHJvdG9jb2wgbWF5IGVuZCB3aXRoXG4gIC8vIGEgYDpgLiBSZW1vdmUgaXQuXG4gIGlmIChkZWZpbmVkKHRpbGVQcm90b2NvbCkpIHtcbiAgICBpZiAoXG4gICAgICB0aWxlUHJvdG9jb2wubGVuZ3RoID4gMCAmJlxuICAgICAgdGlsZVByb3RvY29sW3RpbGVQcm90b2NvbC5sZW5ndGggLSAxXSA9PT0gXCI6XCJcbiAgICApIHtcbiAgICAgIHRpbGVQcm90b2NvbCA9IHRpbGVQcm90b2NvbC5zdWJzdHIoMCwgdGlsZVByb3RvY29sLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyB1c2UgaHR0cCBpZiB0aGUgZG9jdW1lbnQncyBwcm90b2NvbCBpcyBodHRwLCBvdGhlcndpc2UgdXNlIGh0dHBzXG4gICAgdmFyIGRvY3VtZW50UHJvdG9jb2wgPSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICB0aWxlUHJvdG9jb2wgPSBkb2N1bWVudFByb3RvY29sID09PSBcImh0dHA6XCIgPyBcImh0dHBcIiA6IFwiaHR0cHNcIjtcbiAgfVxuXG4gIHZhciBtZXRhZGF0YVJlc291cmNlID0gdGhpcy5fcmVzb3VyY2UuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICB1cmw6IFwiUkVTVC92MS9JbWFnZXJ5L01ldGFkYXRhL1wiICsgdGhpcy5fbWFwU3R5bGUsXG4gICAgcXVlcnlQYXJhbWV0ZXJzOiB7XG4gICAgICBpbmNsOiBcIkltYWdlcnlQcm92aWRlcnNcIixcbiAgICAgIGtleTogdGhpcy5fa2V5LFxuICAgICAgdXJpU2NoZW1lOiB0aWxlUHJvdG9jb2wsXG4gICAgfSxcbiAgfSk7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIG1ldGFkYXRhRXJyb3I7XG5cbiAgZnVuY3Rpb24gbWV0YWRhdGFTdWNjZXNzKGRhdGEpIHtcbiAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoICE9PSAxKSB7XG4gICAgICBtZXRhZGF0YUZhaWx1cmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJlc291cmNlID0gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzWzBdO1xuXG4gICAgdGhhdC5fdGlsZVdpZHRoID0gcmVzb3VyY2UuaW1hZ2VXaWR0aDtcbiAgICB0aGF0Ll90aWxlSGVpZ2h0ID0gcmVzb3VyY2UuaW1hZ2VIZWlnaHQ7XG4gICAgdGhhdC5fbWF4aW11bUxldmVsID0gcmVzb3VyY2Uuem9vbU1heCAtIDE7XG4gICAgdGhhdC5faW1hZ2VVcmxTdWJkb21haW5zID0gcmVzb3VyY2UuaW1hZ2VVcmxTdWJkb21haW5zO1xuICAgIHRoYXQuX2ltYWdlVXJsVGVtcGxhdGUgPSByZXNvdXJjZS5pbWFnZVVybDtcblxuICAgIHZhciBhdHRyaWJ1dGlvbkxpc3QgPSAodGhhdC5fYXR0cmlidXRpb25MaXN0ID0gcmVzb3VyY2UuaW1hZ2VyeVByb3ZpZGVycyk7XG4gICAgaWYgKCFhdHRyaWJ1dGlvbkxpc3QpIHtcbiAgICAgIGF0dHJpYnV0aW9uTGlzdCA9IHRoYXQuX2F0dHJpYnV0aW9uTGlzdCA9IFtdO1xuICAgIH1cblxuICAgIGZvciAoXG4gICAgICB2YXIgYXR0cmlidXRpb25JbmRleCA9IDAsIGF0dHJpYnV0aW9uTGVuZ3RoID0gYXR0cmlidXRpb25MaXN0Lmxlbmd0aDtcbiAgICAgIGF0dHJpYnV0aW9uSW5kZXggPCBhdHRyaWJ1dGlvbkxlbmd0aDtcbiAgICAgICsrYXR0cmlidXRpb25JbmRleFxuICAgICkge1xuICAgICAgdmFyIGF0dHJpYnV0aW9uID0gYXR0cmlidXRpb25MaXN0W2F0dHJpYnV0aW9uSW5kZXhdO1xuXG4gICAgICBpZiAoYXR0cmlidXRpb24uY3JlZGl0IGluc3RhbmNlb2YgQ3JlZGl0KSB7XG4gICAgICAgIC8vIElmIGF0dHJpYnV0aW9uLmNyZWRpdCBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWRcbiAgICAgICAgLy8gdGhlbiB3ZSBhcmUgdXNpbmcgYSBjYWNoZWQgdmFsdWUsIHdoaWNoIG1lYW5zXG4gICAgICAgIC8vIG5vbmUgb2YgdGhlIHJlbWFpbmluZyBwcm9jZXNzaW5nIG5lZWRzIHRvIGJlIGRvbmUuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBhdHRyaWJ1dGlvbi5jcmVkaXQgPSBuZXcgQ3JlZGl0KGF0dHJpYnV0aW9uLmF0dHJpYnV0aW9uKTtcbiAgICAgIHZhciBjb3ZlcmFnZUFyZWFzID0gYXR0cmlidXRpb24uY292ZXJhZ2VBcmVhcztcblxuICAgICAgZm9yIChcbiAgICAgICAgdmFyIGFyZWFJbmRleCA9IDAsIGFyZWFMZW5ndGggPSBhdHRyaWJ1dGlvbi5jb3ZlcmFnZUFyZWFzLmxlbmd0aDtcbiAgICAgICAgYXJlYUluZGV4IDwgYXJlYUxlbmd0aDtcbiAgICAgICAgKythcmVhSW5kZXhcbiAgICAgICkge1xuICAgICAgICB2YXIgYXJlYSA9IGNvdmVyYWdlQXJlYXNbYXJlYUluZGV4XTtcbiAgICAgICAgdmFyIGJib3ggPSBhcmVhLmJib3g7XG4gICAgICAgIGFyZWEuYmJveCA9IG5ldyBSZWN0YW5nbGUoXG4gICAgICAgICAgQ2VzaXVtTWF0aC50b1JhZGlhbnMoYmJveFsxXSksXG4gICAgICAgICAgQ2VzaXVtTWF0aC50b1JhZGlhbnMoYmJveFswXSksXG4gICAgICAgICAgQ2VzaXVtTWF0aC50b1JhZGlhbnMoYmJveFszXSksXG4gICAgICAgICAgQ2VzaXVtTWF0aC50b1JhZGlhbnMoYmJveFsyXSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGF0Ll9yZWFkeSA9IHRydWU7XG4gICAgdGhhdC5fcmVhZHlQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgVGlsZVByb3ZpZGVyRXJyb3IuaGFuZGxlU3VjY2VzcyhtZXRhZGF0YUVycm9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ldGFkYXRhRmFpbHVyZShlKSB7XG4gICAgdmFyIG1lc3NhZ2UgPVxuICAgICAgXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhY2Nlc3NpbmcgXCIgKyBtZXRhZGF0YVJlc291cmNlLnVybCArIFwiLlwiO1xuICAgIG1ldGFkYXRhRXJyb3IgPSBUaWxlUHJvdmlkZXJFcnJvci5oYW5kbGVFcnJvcihcbiAgICAgIG1ldGFkYXRhRXJyb3IsXG4gICAgICB0aGF0LFxuICAgICAgdGhhdC5fZXJyb3JFdmVudCxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICByZXF1ZXN0TWV0YWRhdGFcbiAgICApO1xuICAgIHRoYXQuX3JlYWR5UHJvbWlzZS5yZWplY3QobmV3IFJ1bnRpbWVFcnJvcihtZXNzYWdlKSk7XG4gIH1cblxuICB2YXIgY2FjaGVLZXkgPSBtZXRhZGF0YVJlc291cmNlLnVybDtcbiAgZnVuY3Rpb24gcmVxdWVzdE1ldGFkYXRhKCkge1xuICAgIHZhciBwcm9taXNlID0gbWV0YWRhdGFSZXNvdXJjZS5mZXRjaEpzb25wKFwianNvbnBcIik7XG4gICAgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIuX21ldGFkYXRhQ2FjaGVbY2FjaGVLZXldID0gcHJvbWlzZTtcbiAgICBwcm9taXNlLnRoZW4obWV0YWRhdGFTdWNjZXNzKS5vdGhlcndpc2UobWV0YWRhdGFGYWlsdXJlKTtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIuX21ldGFkYXRhQ2FjaGVbY2FjaGVLZXldO1xuICBpZiAoZGVmaW5lZChwcm9taXNlKSkge1xuICAgIHByb21pc2UudGhlbihtZXRhZGF0YVN1Y2Nlc3MpLm90aGVyd2lzZShtZXRhZGF0YUZhaWx1cmUpO1xuICB9IGVsc2Uge1xuICAgIHJlcXVlc3RNZXRhZGF0YSgpO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyB0aGUgbmFtZSBvZiB0aGUgQmluZ01hcHMgc2VydmVyIHVybCBob3N0aW5nIHRoZSBpbWFnZXJ5LlxuICAgKiBAbWVtYmVyb2YgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdXJsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVzb3VyY2UudXJsO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHByb3h5IHVzZWQgYnkgdGhpcyBwcm92aWRlci5cbiAgICogQG1lbWJlcm9mIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJveHl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcHJveHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZXNvdXJjZS5wcm94eTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBCaW5nIE1hcHMga2V5LlxuICAgKiBAbWVtYmVyb2YgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAga2V5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fa2V5O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHR5cGUgb2YgQmluZyBNYXBzIGltYWdlcnkgdG8gbG9hZC5cbiAgICogQG1lbWJlcm9mIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7QmluZ01hcHNTdHlsZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBtYXBTdHlsZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX21hcFN0eWxlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBjdWx0dXJlIHRvIHVzZSB3aGVuIHJlcXVlc3RpbmcgQmluZyBNYXBzIGltYWdlcnkuIE5vdFxuICAgKiBhbGwgY3VsdHVyZXMgYXJlIHN1cHBvcnRlZC4gU2VlIHtAbGluayBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaGg0NDE3MjkuYXNweH1cbiAgICogZm9yIGluZm9ybWF0aW9uIG9uIHRoZSBzdXBwb3J0ZWQgY3VsdHVyZXMuXG4gICAqIEBtZW1iZXJvZiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjdWx0dXJlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY3VsdHVyZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB3aWR0aCBvZiBlYWNoIHRpbGUsIGluIHBpeGVscy4gVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxlV2lkdGg6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGVXaWR0aCBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGVXaWR0aDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgZWFjaCB0aWxlLCBpbiBwaXhlbHMuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVIZWlnaHQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGVIZWlnaHQgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl90aWxlSGVpZ2h0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1heGltdW0gbGV2ZWwtb2YtZGV0YWlsIHRoYXQgY2FuIGJlIHJlcXVlc3RlZC4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBCaW5nTWFwc0ltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG1heGltdW1MZXZlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwibWF4aW11bUxldmVsIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICByZXR1cm4gdGhpcy5fbWF4aW11bUxldmVsO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1pbmltdW0gbGV2ZWwtb2YtZGV0YWlsIHRoYXQgY2FuIGJlIHJlcXVlc3RlZC4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBCaW5nTWFwc0ltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgbWluaW11bUxldmVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJtaW5pbXVtTGV2ZWwgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiAwO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRpbGluZyBzY2hlbWUgdXNlZCBieSB0aGlzIHByb3ZpZGVyLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxpbmdTY2hlbWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGluZ1NjaGVtZSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWN0YW5nbGUsIGluIHJhZGlhbnMsIG9mIHRoZSBpbWFnZXJ5IHByb3ZpZGVkIGJ5IHRoaXMgaW5zdGFuY2UuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UmVjdGFuZ2xlfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlY3RhbmdsZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwicmVjdGFuZ2xlIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICByZXR1cm4gdGhpcy5fdGlsaW5nU2NoZW1lLnJlY3RhbmdsZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxlIGRpc2NhcmQgcG9saWN5LiAgSWYgbm90IHVuZGVmaW5lZCwgdGhlIGRpc2NhcmQgcG9saWN5IGlzIHJlc3BvbnNpYmxlXG4gICAqIGZvciBmaWx0ZXJpbmcgb3V0IFwibWlzc2luZ1wiIHRpbGVzIHZpYSBpdHMgc2hvdWxkRGlzY2FyZEltYWdlIGZ1bmN0aW9uLiAgSWYgdGhpcyBmdW5jdGlvblxuICAgKiByZXR1cm5zIHVuZGVmaW5lZCwgbm8gdGlsZXMgYXJlIGZpbHRlcmVkLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGVEaXNjYXJkUG9saWN5fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVEaXNjYXJkUG9saWN5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJ0aWxlRGlzY2FyZFBvbGljeSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiB0aGUgaW1hZ2VyeSBwcm92aWRlciBlbmNvdW50ZXJzIGFuIGFzeW5jaHJvbm91cyBlcnJvci4gIEJ5IHN1YnNjcmliaW5nXG4gICAqIHRvIHRoZSBldmVudCwgeW91IHdpbGwgYmUgbm90aWZpZWQgb2YgdGhlIGVycm9yIGFuZCBjYW4gcG90ZW50aWFsbHkgcmVjb3ZlciBmcm9tIGl0LiAgRXZlbnQgbGlzdGVuZXJzXG4gICAqIGFyZSBwYXNzZWQgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFRpbGVQcm92aWRlckVycm9yfS5cbiAgICogQG1lbWJlcm9mIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZXJyb3JFdmVudDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yRXZlbnQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVyIGlzIHJlYWR5IGZvciB1c2UuXG4gICAqIEBtZW1iZXJvZiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRydWUgd2hlbiB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvbWlzZS48Qm9vbGVhbj59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlLnByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY3JlZGl0IHRvIGRpc3BsYXkgd2hlbiB0aGlzIGltYWdlcnkgcHJvdmlkZXIgaXMgYWN0aXZlLiAgVHlwaWNhbGx5IHRoaXMgaXMgdXNlZCB0byBjcmVkaXRcbiAgICogdGhlIHNvdXJjZSBvZiB0aGUgaW1hZ2VyeS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBCaW5nTWFwc0ltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtDcmVkaXR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgY3JlZGl0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY3JlZGl0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZXMgcHJvdmlkZWQgYnkgdGhpcyBpbWFnZXJ5IHByb3ZpZGVyXG4gICAqIGluY2x1ZGUgYW4gYWxwaGEgY2hhbm5lbC4gIElmIHRoaXMgcHJvcGVydHkgaXMgZmFsc2UsIGFuIGFscGhhIGNoYW5uZWwsIGlmIHByZXNlbnQsIHdpbGxcbiAgICogYmUgaWdub3JlZC4gIElmIHRoaXMgcHJvcGVydHkgaXMgdHJ1ZSwgYW55IGltYWdlcyB3aXRob3V0IGFuIGFscGhhIGNoYW5uZWwgd2lsbCBiZSB0cmVhdGVkXG4gICAqIGFzIGlmIHRoZWlyIGFscGhhIGlzIDEuMCBldmVyeXdoZXJlLiAgU2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIGZhbHNlIHJlZHVjZXMgbWVtb3J5IHVzYWdlXG4gICAqIGFuZCB0ZXh0dXJlIHVwbG9hZCB0aW1lLlxuICAgKiBAbWVtYmVyb2YgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhhc0FscGhhQ2hhbm5lbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gIH0sXG59KTtcblxudmFyIHJlY3RhbmdsZVNjcmF0Y2ggPSBuZXcgUmVjdGFuZ2xlKCk7XG5cbi8qKlxuICogR2V0cyB0aGUgY3JlZGl0cyB0byBiZSBkaXNwbGF5ZWQgd2hlbiBhIGdpdmVuIHRpbGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB0aWxlIFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgdGlsZSBsZXZlbDtcbiAqIEByZXR1cm5zIHtDcmVkaXRbXX0gVGhlIGNyZWRpdHMgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlIHRpbGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSA8Y29kZT5nZXRUaWxlQ3JlZGl0czwvY29kZT4gbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cbiAqL1xuQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLmdldFRpbGVDcmVkaXRzID0gZnVuY3Rpb24gKHgsIHksIGxldmVsKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcImdldFRpbGVDcmVkaXRzIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciByZWN0YW5nbGUgPSB0aGlzLl90aWxpbmdTY2hlbWUudGlsZVhZVG9SZWN0YW5nbGUoXG4gICAgeCxcbiAgICB5LFxuICAgIGxldmVsLFxuICAgIHJlY3RhbmdsZVNjcmF0Y2hcbiAgKTtcbiAgdmFyIHJlc3VsdCA9IGdldFJlY3RhbmdsZUF0dHJpYnV0aW9uKHRoaXMuX2F0dHJpYnV0aW9uTGlzdCwgbGV2ZWwsIHJlY3RhbmdsZSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogUmVxdWVzdHMgdGhlIGltYWdlIGZvciBhIGdpdmVuIHRpbGUuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHRpbGUgWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHRpbGUgWSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsLlxuICogQHBhcmFtIHtSZXF1ZXN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3Qgb2JqZWN0LiBJbnRlbmRlZCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudD58dW5kZWZpbmVkfSBBIHByb21pc2UgZm9yIHRoZSBpbWFnZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBpbWFnZSBpcyBhdmFpbGFibGUsIG9yXG4gKiAgICAgICAgICB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIHRvbyBtYW55IGFjdGl2ZSByZXF1ZXN0cyB0byB0aGUgc2VydmVyLCBhbmQgdGhlIHJlcXVlc3RcbiAqICAgICAgICAgIHNob3VsZCBiZSByZXRyaWVkIGxhdGVyLiAgVGhlIHJlc29sdmVkIGltYWdlIG1heSBiZSBlaXRoZXIgYW5cbiAqICAgICAgICAgIEltYWdlIG9yIGEgQ2FudmFzIERPTSBvYmplY3QuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IDxjb2RlPnJlcXVlc3RJbWFnZTwvY29kZT4gbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cbiAqL1xuQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLnJlcXVlc3RJbWFnZSA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWwsXG4gIHJlcXVlc3Rcbikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJyZXF1ZXN0SW1hZ2UgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIHByb21pc2UgPSBJbWFnZXJ5UHJvdmlkZXIubG9hZEltYWdlKFxuICAgIHRoaXMsXG4gICAgYnVpbGRJbWFnZVJlc291cmNlKHRoaXMsIHgsIHksIGxldmVsLCByZXF1ZXN0KVxuICApO1xuXG4gIGlmIChkZWZpbmVkKHByb21pc2UpKSB7XG4gICAgcmV0dXJuIHByb21pc2Uub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgLy8gT25lIGNhdXNlIG9mIGFuIGVycm9yIGhlcmUgaXMgdGhhdCB0aGUgaW1hZ2Ugd2UgdHJpZWQgdG8gbG9hZCB3YXMgemVyby1sZW5ndGguXG4gICAgICAvLyBUaGlzIGlzbid0IGFjdHVhbGx5IGEgcHJvYmxlbSwgc2luY2UgaXQgaW5kaWNhdGVzIHRoYXQgdGhlcmUgaXMgbm8gdGlsZS5cbiAgICAgIC8vIFNvLCBpbiB0aGF0IGNhc2Ugd2UgcmV0dXJuIHRoZSBFTVBUWV9JTUFHRSBzZW50aW5lbCB2YWx1ZSBmb3IgbGF0ZXIgZGlzY2FyZGluZy5cbiAgICAgIGlmIChkZWZpbmVkKGVycm9yLmJsb2IpICYmIGVycm9yLmJsb2Iuc2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gRGlzY2FyZEVtcHR5VGlsZVBvbGljeS5FTVBUWV9JTUFHRTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aGVuLnJlamVjdChlcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBQaWNraW5nIGZlYXR1cmVzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHRoaXMgaW1hZ2VyeSBwcm92aWRlciwgc28gdGhpcyBmdW5jdGlvbiBzaW1wbHkgcmV0dXJuc1xuICogdW5kZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB0aWxlIFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgdGlsZSBsZXZlbC5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsb25naXR1ZGUgVGhlIGxvbmdpdHVkZSBhdCB3aGljaCB0byBwaWNrIGZlYXR1cmVzLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxhdGl0dWRlICBUaGUgbGF0aXR1ZGUgYXQgd2hpY2ggdG8gcGljayBmZWF0dXJlcy5cbiAqIEByZXR1cm4ge1Byb21pc2UuPEltYWdlcnlMYXllckZlYXR1cmVJbmZvW10+fHVuZGVmaW5lZH0gQSBwcm9taXNlIGZvciB0aGUgcGlja2VkIGZlYXR1cmVzIHRoYXQgd2lsbCByZXNvbHZlIHdoZW4gdGhlIGFzeW5jaHJvbm91c1xuICogICAgICAgICAgICAgICAgICAgcGlja2luZyBjb21wbGV0ZXMuICBUaGUgcmVzb2x2ZWQgdmFsdWUgaXMgYW4gYXJyYXkgb2Yge0BsaW5rIEltYWdlcnlMYXllckZlYXR1cmVJbmZvfVxuICogICAgICAgICAgICAgICAgICAgaW5zdGFuY2VzLiAgVGhlIGFycmF5IG1heSBiZSBlbXB0eSBpZiBubyBmZWF0dXJlcyBhcmUgZm91bmQgYXQgdGhlIGdpdmVuIGxvY2F0aW9uLlxuICogICAgICAgICAgICAgICAgICAgSXQgbWF5IGFsc28gYmUgdW5kZWZpbmVkIGlmIHBpY2tpbmcgaXMgbm90IHN1cHBvcnRlZC5cbiAqL1xuQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLnBpY2tGZWF0dXJlcyA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWwsXG4gIGxvbmdpdHVkZSxcbiAgbGF0aXR1ZGVcbikge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIHRpbGVzICh4LCB5LCBsZXZlbCkgcG9zaXRpb24gaW50byBhIHF1YWRrZXkgdXNlZCB0byByZXF1ZXN0IGFuIGltYWdlXG4gKiBmcm9tIGEgQmluZyBNYXBzIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSdzIHggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlJ3MgeSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlJ3Mgem9vbSBsZXZlbC5cbiAqXG4gKiBAc2VlIHtAbGluayBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvYmIyNTk2ODkuYXNweHxCaW5nIE1hcHMgVGlsZSBTeXN0ZW19XG4gKiBAc2VlIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyI3F1YWRLZXlUb1RpbGVYWVxuICovXG5CaW5nTWFwc0ltYWdlcnlQcm92aWRlci50aWxlWFlUb1F1YWRLZXkgPSBmdW5jdGlvbiAoeCwgeSwgbGV2ZWwpIHtcbiAgdmFyIHF1YWRrZXkgPSBcIlwiO1xuICBmb3IgKHZhciBpID0gbGV2ZWw7IGkgPj0gMDsgLS1pKSB7XG4gICAgdmFyIGJpdG1hc2sgPSAxIDw8IGk7XG4gICAgdmFyIGRpZ2l0ID0gMDtcblxuICAgIGlmICgoeCAmIGJpdG1hc2spICE9PSAwKSB7XG4gICAgICBkaWdpdCB8PSAxO1xuICAgIH1cblxuICAgIGlmICgoeSAmIGJpdG1hc2spICE9PSAwKSB7XG4gICAgICBkaWdpdCB8PSAyO1xuICAgIH1cblxuICAgIHF1YWRrZXkgKz0gZGlnaXQ7XG4gIH1cbiAgcmV0dXJuIHF1YWRrZXk7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIGEgdGlsZSdzIHF1YWRrZXkgdXNlZCB0byByZXF1ZXN0IGFuIGltYWdlIGZyb20gYSBCaW5nIE1hcHMgc2VydmVyIGludG8gdGhlXG4gKiAoeCwgeSwgbGV2ZWwpIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBxdWFka2V5IFRoZSB0aWxlJ3MgcXVhZCBrZXlcbiAqXG4gKiBAc2VlIHtAbGluayBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvYmIyNTk2ODkuYXNweHxCaW5nIE1hcHMgVGlsZSBTeXN0ZW19XG4gKiBAc2VlIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyI3RpbGVYWVRvUXVhZEtleVxuICovXG5CaW5nTWFwc0ltYWdlcnlQcm92aWRlci5xdWFkS2V5VG9UaWxlWFkgPSBmdW5jdGlvbiAocXVhZGtleSkge1xuICB2YXIgeCA9IDA7XG4gIHZhciB5ID0gMDtcbiAgdmFyIGxldmVsID0gcXVhZGtleS5sZW5ndGggLSAxO1xuICBmb3IgKHZhciBpID0gbGV2ZWw7IGkgPj0gMDsgLS1pKSB7XG4gICAgdmFyIGJpdG1hc2sgPSAxIDw8IGk7XG4gICAgdmFyIGRpZ2l0ID0gK3F1YWRrZXlbbGV2ZWwgLSBpXTtcblxuICAgIGlmICgoZGlnaXQgJiAxKSAhPT0gMCkge1xuICAgICAgeCB8PSBiaXRtYXNrO1xuICAgIH1cblxuICAgIGlmICgoZGlnaXQgJiAyKSAhPT0gMCkge1xuICAgICAgeSB8PSBiaXRtYXNrO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIHg6IHgsXG4gICAgeTogeSxcbiAgICBsZXZlbDogbGV2ZWwsXG4gIH07XG59O1xuXG5CaW5nTWFwc0ltYWdlcnlQcm92aWRlci5fbG9nb1VybCA9IHVuZGVmaW5lZDtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIsIHtcbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgVVJMIHRvIHRoZSBCaW5nIGxvZ28gZm9yIGRpc3BsYXkgaW4gdGhlIGNyZWRpdC5cbiAgICogQG1lbWJlcm9mIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBsb2dvVXJsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWRlZmluZWQoQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXIuX2xvZ29VcmwpKSB7XG4gICAgICAgIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyLl9sb2dvVXJsID0gYnVpbGRNb2R1bGVVcmwoXG4gICAgICAgICAgXCJBc3NldHMvSW1hZ2VzL2JpbmdfbWFwc19jcmVkaXQucG5nXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci5fbG9nb1VybDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgQ2hlY2suZGVmaW5lZChcInZhbHVlXCIsIHZhbHVlKTtcbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci5fbG9nb1VybCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuZnVuY3Rpb24gYnVpbGRJbWFnZVJlc291cmNlKGltYWdlcnlQcm92aWRlciwgeCwgeSwgbGV2ZWwsIHJlcXVlc3QpIHtcbiAgdmFyIGltYWdlVXJsID0gaW1hZ2VyeVByb3ZpZGVyLl9pbWFnZVVybFRlbXBsYXRlO1xuXG4gIHZhciBzdWJkb21haW5zID0gaW1hZ2VyeVByb3ZpZGVyLl9pbWFnZVVybFN1YmRvbWFpbnM7XG4gIHZhciBzdWJkb21haW5JbmRleCA9ICh4ICsgeSArIGxldmVsKSAlIHN1YmRvbWFpbnMubGVuZ3RoO1xuXG4gIHJldHVybiBpbWFnZXJ5UHJvdmlkZXIuX3Jlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgdXJsOiBpbWFnZVVybCxcbiAgICByZXF1ZXN0OiByZXF1ZXN0LFxuICAgIHRlbXBsYXRlVmFsdWVzOiB7XG4gICAgICBxdWFka2V5OiBCaW5nTWFwc0ltYWdlcnlQcm92aWRlci50aWxlWFlUb1F1YWRLZXkoeCwgeSwgbGV2ZWwpLFxuICAgICAgc3ViZG9tYWluOiBzdWJkb21haW5zW3N1YmRvbWFpbkluZGV4XSxcbiAgICAgIGN1bHR1cmU6IGltYWdlcnlQcm92aWRlci5fY3VsdHVyZSxcbiAgICB9LFxuICAgIHF1ZXJ5UGFyYW1ldGVyczoge1xuICAgICAgLy8gdGhpcyBwYXJhbWV0ZXIgdGVsbHMgdGhlIEJpbmcgc2VydmVycyB0byBzZW5kIGEgemVyby1sZW5ndGggcmVzcG9uc2VcbiAgICAgIC8vIGluc3RlYWQgb2YgYSBwbGFjZWhvbGRlciBpbWFnZSBmb3IgbWlzc2luZyB0aWxlcy5cbiAgICAgIG46IFwielwiLFxuICAgIH0sXG4gIH0pO1xufVxuXG52YXIgaW50ZXJzZWN0aW9uU2NyYXRjaCA9IG5ldyBSZWN0YW5nbGUoKTtcblxuZnVuY3Rpb24gZ2V0UmVjdGFuZ2xlQXR0cmlidXRpb24oYXR0cmlidXRpb25MaXN0LCBsZXZlbCwgcmVjdGFuZ2xlKSB7XG4gIC8vIEJpbmcgbGV2ZWxzIHN0YXJ0IGF0IDEsIHdoaWxlIG91cnMgc3RhcnQgYXQgMC5cbiAgKytsZXZlbDtcblxuICB2YXIgcmVzdWx0ID0gW107XG5cbiAgZm9yIChcbiAgICB2YXIgYXR0cmlidXRpb25JbmRleCA9IDAsIGF0dHJpYnV0aW9uTGVuZ3RoID0gYXR0cmlidXRpb25MaXN0Lmxlbmd0aDtcbiAgICBhdHRyaWJ1dGlvbkluZGV4IDwgYXR0cmlidXRpb25MZW5ndGg7XG4gICAgKythdHRyaWJ1dGlvbkluZGV4XG4gICkge1xuICAgIHZhciBhdHRyaWJ1dGlvbiA9IGF0dHJpYnV0aW9uTGlzdFthdHRyaWJ1dGlvbkluZGV4XTtcbiAgICB2YXIgY292ZXJhZ2VBcmVhcyA9IGF0dHJpYnV0aW9uLmNvdmVyYWdlQXJlYXM7XG5cbiAgICB2YXIgaW5jbHVkZWQgPSBmYWxzZTtcblxuICAgIGZvciAoXG4gICAgICB2YXIgYXJlYUluZGV4ID0gMCwgYXJlYUxlbmd0aCA9IGF0dHJpYnV0aW9uLmNvdmVyYWdlQXJlYXMubGVuZ3RoO1xuICAgICAgIWluY2x1ZGVkICYmIGFyZWFJbmRleCA8IGFyZWFMZW5ndGg7XG4gICAgICArK2FyZWFJbmRleFxuICAgICkge1xuICAgICAgdmFyIGFyZWEgPSBjb3ZlcmFnZUFyZWFzW2FyZWFJbmRleF07XG4gICAgICBpZiAobGV2ZWwgPj0gYXJlYS56b29tTWluICYmIGxldmVsIDw9IGFyZWEuem9vbU1heCkge1xuICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gUmVjdGFuZ2xlLmludGVyc2VjdGlvbihcbiAgICAgICAgICByZWN0YW5nbGUsXG4gICAgICAgICAgYXJlYS5iYm94LFxuICAgICAgICAgIGludGVyc2VjdGlvblNjcmF0Y2hcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGRlZmluZWQoaW50ZXJzZWN0aW9uKSkge1xuICAgICAgICAgIGluY2x1ZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbmNsdWRlZCkge1xuICAgICAgcmVzdWx0LnB1c2goYXR0cmlidXRpb24uY3JlZGl0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBFeHBvc2VkIGZvciB0ZXN0aW5nXG5CaW5nTWFwc0ltYWdlcnlQcm92aWRlci5fbWV0YWRhdGFDYWNoZSA9IHt9O1xuZXhwb3J0IGRlZmF1bHQgQmluZ01hcHNJbWFnZXJ5UHJvdmlkZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///59692\n')},53377:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * The types of imagery provided by Bing Maps.\n *\n * @enum {Number}\n *\n * @see BingMapsImageryProvider\n */\nvar BingMapsStyle = {\n  /**\n   * Aerial imagery.\n   *\n   * @type {String}\n   * @constant\n   */\n  AERIAL: "Aerial",\n\n  /**\n   * Aerial imagery with a road overlay.\n   *\n   * @type {String}\n   * @constant\n   * @deprecated See https://github.com/CesiumGS/cesium/issues/7128.\n   * Use `BingMapsStyle.AERIAL_WITH_LABELS_ON_DEMAND` instead\n   */\n  AERIAL_WITH_LABELS: "AerialWithLabels",\n\n  /**\n   * Aerial imagery with a road overlay.\n   *\n   * @type {String}\n   * @constant\n   */\n  AERIAL_WITH_LABELS_ON_DEMAND: "AerialWithLabelsOnDemand",\n\n  /**\n   * Roads without additional imagery.\n   *\n   * @type {String}\n   * @constant\n   * @deprecated See https://github.com/CesiumGS/cesium/issues/7128.\n   * Use `BingMapsStyle.ROAD_ON_DEMAND` instead\n   */\n  ROAD: "Road",\n\n  /**\n   * Roads without additional imagery.\n   *\n   * @type {String}\n   * @constant\n   */\n  ROAD_ON_DEMAND: "RoadOnDemand",\n\n  /**\n   * A dark version of the road maps.\n   *\n   * @type {String}\n   * @constant\n   */\n  CANVAS_DARK: "CanvasDark",\n\n  /**\n   * A lighter version of the road maps.\n   *\n   * @type {String}\n   * @constant\n   */\n  CANVAS_LIGHT: "CanvasLight",\n\n  /**\n   * A grayscale version of the road maps.\n   *\n   * @type {String}\n   * @constant\n   */\n  CANVAS_GRAY: "CanvasGray",\n\n  /**\n   * Ordnance Survey imagery. This imagery is visible only for the London, UK area.\n   *\n   * @type {String}\n   * @constant\n   */\n  ORDNANCE_SURVEY: "OrdnanceSurvey",\n\n  /**\n   * Collins Bart imagery.\n   *\n   * @type {String}\n   * @constant\n   */\n  COLLINS_BART: "CollinsBart",\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(BingMapsStyle));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMzNzcuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSw0QkFBNEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9CaW5nTWFwc1N0eWxlLmpzPzljOTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgdHlwZXMgb2YgaW1hZ2VyeSBwcm92aWRlZCBieSBCaW5nIE1hcHMuXG4gKlxuICogQGVudW0ge051bWJlcn1cbiAqXG4gKiBAc2VlIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyXG4gKi9cbnZhciBCaW5nTWFwc1N0eWxlID0ge1xuICAvKipcbiAgICogQWVyaWFsIGltYWdlcnkuXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgQUVSSUFMOiBcIkFlcmlhbFwiLFxuXG4gIC8qKlxuICAgKiBBZXJpYWwgaW1hZ2VyeSB3aXRoIGEgcm9hZCBvdmVybGF5LlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlcHJlY2F0ZWQgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy9jZXNpdW0vaXNzdWVzLzcxMjguXG4gICAqIFVzZSBgQmluZ01hcHNTdHlsZS5BRVJJQUxfV0lUSF9MQUJFTFNfT05fREVNQU5EYCBpbnN0ZWFkXG4gICAqL1xuICBBRVJJQUxfV0lUSF9MQUJFTFM6IFwiQWVyaWFsV2l0aExhYmVsc1wiLFxuXG4gIC8qKlxuICAgKiBBZXJpYWwgaW1hZ2VyeSB3aXRoIGEgcm9hZCBvdmVybGF5LlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIEFFUklBTF9XSVRIX0xBQkVMU19PTl9ERU1BTkQ6IFwiQWVyaWFsV2l0aExhYmVsc09uRGVtYW5kXCIsXG5cbiAgLyoqXG4gICAqIFJvYWRzIHdpdGhvdXQgYWRkaXRpb25hbCBpbWFnZXJ5LlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlcHJlY2F0ZWQgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9DZXNpdW1HUy9jZXNpdW0vaXNzdWVzLzcxMjguXG4gICAqIFVzZSBgQmluZ01hcHNTdHlsZS5ST0FEX09OX0RFTUFORGAgaW5zdGVhZFxuICAgKi9cbiAgUk9BRDogXCJSb2FkXCIsXG5cbiAgLyoqXG4gICAqIFJvYWRzIHdpdGhvdXQgYWRkaXRpb25hbCBpbWFnZXJ5LlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFJPQURfT05fREVNQU5EOiBcIlJvYWRPbkRlbWFuZFwiLFxuXG4gIC8qKlxuICAgKiBBIGRhcmsgdmVyc2lvbiBvZiB0aGUgcm9hZCBtYXBzLlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIENBTlZBU19EQVJLOiBcIkNhbnZhc0RhcmtcIixcblxuICAvKipcbiAgICogQSBsaWdodGVyIHZlcnNpb24gb2YgdGhlIHJvYWQgbWFwcy5cbiAgICpcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBDQU5WQVNfTElHSFQ6IFwiQ2FudmFzTGlnaHRcIixcblxuICAvKipcbiAgICogQSBncmF5c2NhbGUgdmVyc2lvbiBvZiB0aGUgcm9hZCBtYXBzLlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIENBTlZBU19HUkFZOiBcIkNhbnZhc0dyYXlcIixcblxuICAvKipcbiAgICogT3JkbmFuY2UgU3VydmV5IGltYWdlcnkuIFRoaXMgaW1hZ2VyeSBpcyB2aXNpYmxlIG9ubHkgZm9yIHRoZSBMb25kb24sIFVLIGFyZWEuXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgT1JETkFOQ0VfU1VSVkVZOiBcIk9yZG5hbmNlU3VydmV5XCIsXG5cbiAgLyoqXG4gICAqIENvbGxpbnMgQmFydCBpbWFnZXJ5LlxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIENPTExJTlNfQkFSVDogXCJDb2xsaW5zQmFydFwiLFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoQmluZ01hcHNTdHlsZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///53377\n')},33306:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52200);\n\n\n/**\n * Determines how two pixels\' values are combined.\n *\n * @enum {Number}\n */\nvar BlendEquation = {\n  /**\n   * Pixel values are added componentwise.  This is used in additive blending for translucency.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ADD: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].FUNC_ADD */ .Z.FUNC_ADD,\n\n  /**\n   * Pixel values are subtracted componentwise (source - destination).  This is used in alpha blending for translucency.\n   *\n   * @type {Number}\n   * @constant\n   */\n  SUBTRACT: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].FUNC_SUBTRACT */ .Z.FUNC_SUBTRACT,\n\n  /**\n   * Pixel values are subtracted componentwise (destination - source).\n   *\n   * @type {Number}\n   * @constant\n   */\n  REVERSE_SUBTRACT: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].FUNC_REVERSE_SUBTRACT */ .Z.FUNC_REVERSE_SUBTRACT,\n\n  /**\n   * Pixel values are given to the minimum function (min(source, destination)).\n   *\n   * This equation operates on each pixel color component.\n   *\n   * @type {Number}\n   * @constant\n   */\n  MIN: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].MIN */ .Z.MIN,\n\n  /**\n   * Pixel values are given to the maximum function (max(source, destination)).\n   *\n   * This equation operates on each pixel color component.\n   *\n   * @type {Number}\n   * @constant\n   */\n  MAX: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].MAX */ .Z.MAX,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(BlendEquation));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMzMDYuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLE9BQU8sMEZBQXVCOztBQUU5QjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFlBQVksb0dBQTRCOztBQUV4QztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLG9CQUFvQixvSEFBb0M7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLE9BQU8sZ0ZBQWtCOztBQUV6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxPQUFPLGdGQUFrQjtBQUN6QjtBQUNBLHlEQUFlLDRCQUE0QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0JsZW5kRXF1YXRpb24uanM/MDcyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2ViR0xDb25zdGFudHMgZnJvbSBcIi4uL0NvcmUvV2ViR0xDb25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGhvdyB0d28gcGl4ZWxzJyB2YWx1ZXMgYXJlIGNvbWJpbmVkLlxuICpcbiAqIEBlbnVtIHtOdW1iZXJ9XG4gKi9cbnZhciBCbGVuZEVxdWF0aW9uID0ge1xuICAvKipcbiAgICogUGl4ZWwgdmFsdWVzIGFyZSBhZGRlZCBjb21wb25lbnR3aXNlLiAgVGhpcyBpcyB1c2VkIGluIGFkZGl0aXZlIGJsZW5kaW5nIGZvciB0cmFuc2x1Y2VuY3kuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgQUREOiBXZWJHTENvbnN0YW50cy5GVU5DX0FERCxcblxuICAvKipcbiAgICogUGl4ZWwgdmFsdWVzIGFyZSBzdWJ0cmFjdGVkIGNvbXBvbmVudHdpc2UgKHNvdXJjZSAtIGRlc3RpbmF0aW9uKS4gIFRoaXMgaXMgdXNlZCBpbiBhbHBoYSBibGVuZGluZyBmb3IgdHJhbnNsdWNlbmN5LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFNVQlRSQUNUOiBXZWJHTENvbnN0YW50cy5GVU5DX1NVQlRSQUNULFxuXG4gIC8qKlxuICAgKiBQaXhlbCB2YWx1ZXMgYXJlIHN1YnRyYWN0ZWQgY29tcG9uZW50d2lzZSAoZGVzdGluYXRpb24gLSBzb3VyY2UpLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFJFVkVSU0VfU1VCVFJBQ1Q6IFdlYkdMQ29uc3RhbnRzLkZVTkNfUkVWRVJTRV9TVUJUUkFDVCxcblxuICAvKipcbiAgICogUGl4ZWwgdmFsdWVzIGFyZSBnaXZlbiB0byB0aGUgbWluaW11bSBmdW5jdGlvbiAobWluKHNvdXJjZSwgZGVzdGluYXRpb24pKS5cbiAgICpcbiAgICogVGhpcyBlcXVhdGlvbiBvcGVyYXRlcyBvbiBlYWNoIHBpeGVsIGNvbG9yIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBNSU46IFdlYkdMQ29uc3RhbnRzLk1JTixcblxuICAvKipcbiAgICogUGl4ZWwgdmFsdWVzIGFyZSBnaXZlbiB0byB0aGUgbWF4aW11bSBmdW5jdGlvbiAobWF4KHNvdXJjZSwgZGVzdGluYXRpb24pKS5cbiAgICpcbiAgICogVGhpcyBlcXVhdGlvbiBvcGVyYXRlcyBvbiBlYWNoIHBpeGVsIGNvbG9yIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBNQVg6IFdlYkdMQ29uc3RhbnRzLk1BWCxcbn07XG5leHBvcnQgZGVmYXVsdCBPYmplY3QuZnJlZXplKEJsZW5kRXF1YXRpb24pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///33306\n')},18796:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52200);\n\n\n/**\n * Determines how blending factors are computed.\n *\n * @enum {Number}\n */\nvar BlendFunction = {\n  /**\n   * The blend factor is zero.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ZERO: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO,\n\n  /**\n   * The blend factor is one.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ONE: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ONE */ .Z.ONE,\n\n  /**\n   * The blend factor is the source color.\n   *\n   * @type {Number}\n   * @constant\n   */\n  SOURCE_COLOR: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].SRC_COLOR */ .Z.SRC_COLOR,\n\n  /**\n   * The blend factor is one minus the source color.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ONE_MINUS_SOURCE_COLOR: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ONE_MINUS_SRC_COLOR */ .Z.ONE_MINUS_SRC_COLOR,\n\n  /**\n   * The blend factor is the destination color.\n   *\n   * @type {Number}\n   * @constant\n   */\n  DESTINATION_COLOR: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].DST_COLOR */ .Z.DST_COLOR,\n\n  /**\n   * The blend factor is one minus the destination color.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ONE_MINUS_DESTINATION_COLOR: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ONE_MINUS_DST_COLOR */ .Z.ONE_MINUS_DST_COLOR,\n\n  /**\n   * The blend factor is the source alpha.\n   *\n   * @type {Number}\n   * @constant\n   */\n  SOURCE_ALPHA: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].SRC_ALPHA */ .Z.SRC_ALPHA,\n\n  /**\n   * The blend factor is one minus the source alpha.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ONE_MINUS_SOURCE_ALPHA: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ONE_MINUS_SRC_ALPHA */ .Z.ONE_MINUS_SRC_ALPHA,\n\n  /**\n   * The blend factor is the destination alpha.\n   *\n   * @type {Number}\n   * @constant\n   */\n  DESTINATION_ALPHA: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].DST_ALPHA */ .Z.DST_ALPHA,\n\n  /**\n   * The blend factor is one minus the destination alpha.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ONE_MINUS_DESTINATION_ALPHA: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ONE_MINUS_DST_ALPHA */ .Z.ONE_MINUS_DST_ALPHA,\n\n  /**\n   * The blend factor is the constant color.\n   *\n   * @type {Number}\n   * @constant\n   */\n  CONSTANT_COLOR: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].CONSTANT_COLOR */ .Z.CONSTANT_COLOR,\n\n  /**\n   * The blend factor is one minus the constant color.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ONE_MINUS_CONSTANT_COLOR: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ONE_MINUS_CONSTANT_COLOR */ .Z.ONE_MINUS_CONSTANT_COLOR,\n\n  /**\n   * The blend factor is the constant alpha.\n   *\n   * @type {Number}\n   * @constant\n   */\n  CONSTANT_ALPHA: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].CONSTANT_ALPHA */ .Z.CONSTANT_ALPHA,\n\n  /**\n   * The blend factor is one minus the constant alpha.\n   *\n   * @type {Number}\n   * @constant\n   */\n  ONE_MINUS_CONSTANT_ALPHA: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ONE_MINUS_CONSTANT_ALPHA */ .Z.ONE_MINUS_CONSTANT_ALPHA,\n\n  /**\n   * The blend factor is the saturated source alpha.\n   *\n   * @type {Number}\n   * @constant\n   */\n  SOURCE_ALPHA_SATURATE: _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].SRC_ALPHA_SATURATE */ .Z.SRC_ALPHA_SATURATE,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(BlendFunction));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg3OTYuanMiLCJtYXBwaW5ncyI6IjtBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFFBQVEsa0ZBQW1COztBQUUzQjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLE9BQU8sZ0ZBQWtCOztBQUV6QjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGdCQUFnQiw0RkFBd0I7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsMEJBQTBCLGdIQUFrQzs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxxQkFBcUIsNEZBQXdCOztBQUU3QztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLCtCQUErQixnSEFBa0M7O0FBRWpFO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsZ0JBQWdCLDRGQUF3Qjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSwwQkFBMEIsZ0hBQWtDOztBQUU1RDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLHFCQUFxQiw0RkFBd0I7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsK0JBQStCLGdIQUFrQzs7QUFFakU7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxrQkFBa0Isc0dBQTZCOztBQUUvQztBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLDRCQUE0QiwwSEFBdUM7O0FBRW5FO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0Esa0JBQWtCLHNHQUE2Qjs7QUFFL0M7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSw0QkFBNEIsMEhBQXVDOztBQUVuRTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLHlCQUF5Qiw4R0FBaUM7QUFDMUQ7QUFDQSx5REFBZSw0QkFBNEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9CbGVuZEZ1bmN0aW9uLmpzP2VmZTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdlYkdMQ29uc3RhbnRzIGZyb20gXCIuLi9Db3JlL1dlYkdMQ29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBob3cgYmxlbmRpbmcgZmFjdG9ycyBhcmUgY29tcHV0ZWQuXG4gKlxuICogQGVudW0ge051bWJlcn1cbiAqL1xudmFyIEJsZW5kRnVuY3Rpb24gPSB7XG4gIC8qKlxuICAgKiBUaGUgYmxlbmQgZmFjdG9yIGlzIHplcm8uXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgWkVSTzogV2ViR0xDb25zdGFudHMuWkVSTyxcblxuICAvKipcbiAgICogVGhlIGJsZW5kIGZhY3RvciBpcyBvbmUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgT05FOiBXZWJHTENvbnN0YW50cy5PTkUsXG5cbiAgLyoqXG4gICAqIFRoZSBibGVuZCBmYWN0b3IgaXMgdGhlIHNvdXJjZSBjb2xvci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBTT1VSQ0VfQ09MT1I6IFdlYkdMQ29uc3RhbnRzLlNSQ19DT0xPUixcblxuICAvKipcbiAgICogVGhlIGJsZW5kIGZhY3RvciBpcyBvbmUgbWludXMgdGhlIHNvdXJjZSBjb2xvci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBPTkVfTUlOVVNfU09VUkNFX0NPTE9SOiBXZWJHTENvbnN0YW50cy5PTkVfTUlOVVNfU1JDX0NPTE9SLFxuXG4gIC8qKlxuICAgKiBUaGUgYmxlbmQgZmFjdG9yIGlzIHRoZSBkZXN0aW5hdGlvbiBjb2xvci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBERVNUSU5BVElPTl9DT0xPUjogV2ViR0xDb25zdGFudHMuRFNUX0NPTE9SLFxuXG4gIC8qKlxuICAgKiBUaGUgYmxlbmQgZmFjdG9yIGlzIG9uZSBtaW51cyB0aGUgZGVzdGluYXRpb24gY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgT05FX01JTlVTX0RFU1RJTkFUSU9OX0NPTE9SOiBXZWJHTENvbnN0YW50cy5PTkVfTUlOVVNfRFNUX0NPTE9SLFxuXG4gIC8qKlxuICAgKiBUaGUgYmxlbmQgZmFjdG9yIGlzIHRoZSBzb3VyY2UgYWxwaGEuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgU09VUkNFX0FMUEhBOiBXZWJHTENvbnN0YW50cy5TUkNfQUxQSEEsXG5cbiAgLyoqXG4gICAqIFRoZSBibGVuZCBmYWN0b3IgaXMgb25lIG1pbnVzIHRoZSBzb3VyY2UgYWxwaGEuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgT05FX01JTlVTX1NPVVJDRV9BTFBIQTogV2ViR0xDb25zdGFudHMuT05FX01JTlVTX1NSQ19BTFBIQSxcblxuICAvKipcbiAgICogVGhlIGJsZW5kIGZhY3RvciBpcyB0aGUgZGVzdGluYXRpb24gYWxwaGEuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgREVTVElOQVRJT05fQUxQSEE6IFdlYkdMQ29uc3RhbnRzLkRTVF9BTFBIQSxcblxuICAvKipcbiAgICogVGhlIGJsZW5kIGZhY3RvciBpcyBvbmUgbWludXMgdGhlIGRlc3RpbmF0aW9uIGFscGhhLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIE9ORV9NSU5VU19ERVNUSU5BVElPTl9BTFBIQTogV2ViR0xDb25zdGFudHMuT05FX01JTlVTX0RTVF9BTFBIQSxcblxuICAvKipcbiAgICogVGhlIGJsZW5kIGZhY3RvciBpcyB0aGUgY29uc3RhbnQgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgQ09OU1RBTlRfQ09MT1I6IFdlYkdMQ29uc3RhbnRzLkNPTlNUQU5UX0NPTE9SLFxuXG4gIC8qKlxuICAgKiBUaGUgYmxlbmQgZmFjdG9yIGlzIG9uZSBtaW51cyB0aGUgY29uc3RhbnQgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgT05FX01JTlVTX0NPTlNUQU5UX0NPTE9SOiBXZWJHTENvbnN0YW50cy5PTkVfTUlOVVNfQ09OU1RBTlRfQ09MT1IsXG5cbiAgLyoqXG4gICAqIFRoZSBibGVuZCBmYWN0b3IgaXMgdGhlIGNvbnN0YW50IGFscGhhLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIENPTlNUQU5UX0FMUEhBOiBXZWJHTENvbnN0YW50cy5DT05TVEFOVF9BTFBIQSxcblxuICAvKipcbiAgICogVGhlIGJsZW5kIGZhY3RvciBpcyBvbmUgbWludXMgdGhlIGNvbnN0YW50IGFscGhhLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIE9ORV9NSU5VU19DT05TVEFOVF9BTFBIQTogV2ViR0xDb25zdGFudHMuT05FX01JTlVTX0NPTlNUQU5UX0FMUEhBLFxuXG4gIC8qKlxuICAgKiBUaGUgYmxlbmQgZmFjdG9yIGlzIHRoZSBzYXR1cmF0ZWQgc291cmNlIGFscGhhLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFNPVVJDRV9BTFBIQV9TQVRVUkFURTogV2ViR0xDb25zdGFudHMuU1JDX0FMUEhBX1NBVFVSQVRFLFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoQmxlbmRGdW5jdGlvbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18796\n')},27384:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * Determines how opaque and translucent parts of billboards, points, and labels are blended with the scene.\n *\n * @enum {Number}\n */\nvar BlendOption = {\n  /**\n   * The billboards, points, or labels in the collection are completely opaque.\n   * @type {Number}\n   * @constant\n   */\n  OPAQUE: 0,\n\n  /**\n   * The billboards, points, or labels in the collection are completely translucent.\n   * @type {Number}\n   * @constant\n   */\n  TRANSLUCENT: 1,\n\n  /**\n   * The billboards, points, or labels in the collection are both opaque and translucent.\n   * @type {Number}\n   * @constant\n   */\n  OPAQUE_AND_TRANSLUCENT: 2,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(BlendOption));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjczODQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsMEJBQTBCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvQmxlbmRPcHRpb24uanM/ZDk2MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERldGVybWluZXMgaG93IG9wYXF1ZSBhbmQgdHJhbnNsdWNlbnQgcGFydHMgb2YgYmlsbGJvYXJkcywgcG9pbnRzLCBhbmQgbGFiZWxzIGFyZSBibGVuZGVkIHdpdGggdGhlIHNjZW5lLlxuICpcbiAqIEBlbnVtIHtOdW1iZXJ9XG4gKi9cbnZhciBCbGVuZE9wdGlvbiA9IHtcbiAgLyoqXG4gICAqIFRoZSBiaWxsYm9hcmRzLCBwb2ludHMsIG9yIGxhYmVscyBpbiB0aGUgY29sbGVjdGlvbiBhcmUgY29tcGxldGVseSBvcGFxdWUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgT1BBUVVFOiAwLFxuXG4gIC8qKlxuICAgKiBUaGUgYmlsbGJvYXJkcywgcG9pbnRzLCBvciBsYWJlbHMgaW4gdGhlIGNvbGxlY3Rpb24gYXJlIGNvbXBsZXRlbHkgdHJhbnNsdWNlbnQuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgVFJBTlNMVUNFTlQ6IDEsXG5cbiAgLyoqXG4gICAqIFRoZSBiaWxsYm9hcmRzLCBwb2ludHMsIG9yIGxhYmVscyBpbiB0aGUgY29sbGVjdGlvbiBhcmUgYm90aCBvcGFxdWUgYW5kIHRyYW5zbHVjZW50LlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIE9QQVFVRV9BTkRfVFJBTlNMVUNFTlQ6IDIsXG59O1xuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZShCbGVuZE9wdGlvbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///27384\n')},13633:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _BlendEquation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33306);\n/* harmony import */ var _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18796);\n\n\n\n/**\n * The blending state combines {@link BlendEquation} and {@link BlendFunction} and the\n * <code>enabled</code> flag to define the full blending state for combining source and\n * destination fragments when rendering.\n * <p>\n * This is a helper when using custom render states with {@link Appearance#renderState}.\n * </p>\n *\n * @namespace\n */\nvar BlendingState = {\n  /**\n   * Blending is disabled.\n   *\n   * @type {Object}\n   * @constant\n   */\n  DISABLED: Object.freeze({\n    enabled: false,\n  }),\n\n  /**\n   * Blending is enabled using alpha blending, <code>source(source.alpha) + destination(1 - source.alpha)</code>.\n   *\n   * @type {Object}\n   * @constant\n   */\n  ALPHA_BLEND: Object.freeze({\n    enabled: true,\n    equationRgb: _BlendEquation_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ADD */ .Z.ADD,\n    equationAlpha: _BlendEquation_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ADD */ .Z.ADD,\n    functionSourceRgb: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SOURCE_ALPHA */ .Z.SOURCE_ALPHA,\n    functionSourceAlpha: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE */ .Z.ONE,\n    functionDestinationRgb: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE_MINUS_SOURCE_ALPHA */ .Z.ONE_MINUS_SOURCE_ALPHA,\n    functionDestinationAlpha: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE_MINUS_SOURCE_ALPHA */ .Z.ONE_MINUS_SOURCE_ALPHA,\n  }),\n\n  /**\n   * Blending is enabled using alpha blending with premultiplied alpha, <code>source + destination(1 - source.alpha)</code>.\n   *\n   * @type {Object}\n   * @constant\n   */\n  PRE_MULTIPLIED_ALPHA_BLEND: Object.freeze({\n    enabled: true,\n    equationRgb: _BlendEquation_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ADD */ .Z.ADD,\n    equationAlpha: _BlendEquation_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ADD */ .Z.ADD,\n    functionSourceRgb: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE */ .Z.ONE,\n    functionSourceAlpha: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE */ .Z.ONE,\n    functionDestinationRgb: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE_MINUS_SOURCE_ALPHA */ .Z.ONE_MINUS_SOURCE_ALPHA,\n    functionDestinationAlpha: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE_MINUS_SOURCE_ALPHA */ .Z.ONE_MINUS_SOURCE_ALPHA,\n  }),\n\n  /**\n   * Blending is enabled using additive blending, <code>source(source.alpha) + destination</code>.\n   *\n   * @type {Object}\n   * @constant\n   */\n  ADDITIVE_BLEND: Object.freeze({\n    enabled: true,\n    equationRgb: _BlendEquation_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ADD */ .Z.ADD,\n    equationAlpha: _BlendEquation_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ADD */ .Z.ADD,\n    functionSourceRgb: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].SOURCE_ALPHA */ .Z.SOURCE_ALPHA,\n    functionSourceAlpha: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE */ .Z.ONE,\n    functionDestinationRgb: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE */ .Z.ONE,\n    functionDestinationAlpha: _BlendFunction_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ONE */ .Z.ONE,\n  }),\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(BlendingState));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM2MzMuanMiLCJtYXBwaW5ncyI6Ijs7QUFBK0M7QUFDQTs7QUFFL0M7QUFDQSxnQ0FBZ0MscUJBQXFCLEtBQUsscUJBQXFCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCw2QkFBNkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBFQUFpQjtBQUNsQyxtQkFBbUIsMEVBQWlCO0FBQ3BDLHVCQUF1Qiw0RkFBMEI7QUFDakQseUJBQXlCLDBFQUFpQjtBQUMxQyw0QkFBNEIsZ0hBQW9DO0FBQ2hFLDhCQUE4QixnSEFBb0M7QUFDbEUsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMEVBQWlCO0FBQ2xDLG1CQUFtQiwwRUFBaUI7QUFDcEMsdUJBQXVCLDBFQUFpQjtBQUN4Qyx5QkFBeUIsMEVBQWlCO0FBQzFDLDRCQUE0QixnSEFBb0M7QUFDaEUsOEJBQThCLGdIQUFvQztBQUNsRSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwRUFBaUI7QUFDbEMsbUJBQW1CLDBFQUFpQjtBQUNwQyx1QkFBdUIsNEZBQTBCO0FBQ2pELHlCQUF5QiwwRUFBaUI7QUFDMUMsNEJBQTRCLDBFQUFpQjtBQUM3Qyw4QkFBOEIsMEVBQWlCO0FBQy9DLEdBQUc7QUFDSDtBQUNBLHlEQUFlLDRCQUE0QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0JsZW5kaW5nU3RhdGUuanM/NTg5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmxlbmRFcXVhdGlvbiBmcm9tIFwiLi9CbGVuZEVxdWF0aW9uLmpzXCI7XG5pbXBvcnQgQmxlbmRGdW5jdGlvbiBmcm9tIFwiLi9CbGVuZEZ1bmN0aW9uLmpzXCI7XG5cbi8qKlxuICogVGhlIGJsZW5kaW5nIHN0YXRlIGNvbWJpbmVzIHtAbGluayBCbGVuZEVxdWF0aW9ufSBhbmQge0BsaW5rIEJsZW5kRnVuY3Rpb259IGFuZCB0aGVcbiAqIDxjb2RlPmVuYWJsZWQ8L2NvZGU+IGZsYWcgdG8gZGVmaW5lIHRoZSBmdWxsIGJsZW5kaW5nIHN0YXRlIGZvciBjb21iaW5pbmcgc291cmNlIGFuZFxuICogZGVzdGluYXRpb24gZnJhZ21lbnRzIHdoZW4gcmVuZGVyaW5nLlxuICogPHA+XG4gKiBUaGlzIGlzIGEgaGVscGVyIHdoZW4gdXNpbmcgY3VzdG9tIHJlbmRlciBzdGF0ZXMgd2l0aCB7QGxpbmsgQXBwZWFyYW5jZSNyZW5kZXJTdGF0ZX0uXG4gKiA8L3A+XG4gKlxuICogQG5hbWVzcGFjZVxuICovXG52YXIgQmxlbmRpbmdTdGF0ZSA9IHtcbiAgLyoqXG4gICAqIEJsZW5kaW5nIGlzIGRpc2FibGVkLlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIERJU0FCTEVEOiBPYmplY3QuZnJlZXplKHtcbiAgICBlbmFibGVkOiBmYWxzZSxcbiAgfSksXG5cbiAgLyoqXG4gICAqIEJsZW5kaW5nIGlzIGVuYWJsZWQgdXNpbmcgYWxwaGEgYmxlbmRpbmcsIDxjb2RlPnNvdXJjZShzb3VyY2UuYWxwaGEpICsgZGVzdGluYXRpb24oMSAtIHNvdXJjZS5hbHBoYSk8L2NvZGU+LlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIEFMUEhBX0JMRU5EOiBPYmplY3QuZnJlZXplKHtcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGVxdWF0aW9uUmdiOiBCbGVuZEVxdWF0aW9uLkFERCxcbiAgICBlcXVhdGlvbkFscGhhOiBCbGVuZEVxdWF0aW9uLkFERCxcbiAgICBmdW5jdGlvblNvdXJjZVJnYjogQmxlbmRGdW5jdGlvbi5TT1VSQ0VfQUxQSEEsXG4gICAgZnVuY3Rpb25Tb3VyY2VBbHBoYTogQmxlbmRGdW5jdGlvbi5PTkUsXG4gICAgZnVuY3Rpb25EZXN0aW5hdGlvblJnYjogQmxlbmRGdW5jdGlvbi5PTkVfTUlOVVNfU09VUkNFX0FMUEhBLFxuICAgIGZ1bmN0aW9uRGVzdGluYXRpb25BbHBoYTogQmxlbmRGdW5jdGlvbi5PTkVfTUlOVVNfU09VUkNFX0FMUEhBLFxuICB9KSxcblxuICAvKipcbiAgICogQmxlbmRpbmcgaXMgZW5hYmxlZCB1c2luZyBhbHBoYSBibGVuZGluZyB3aXRoIHByZW11bHRpcGxpZWQgYWxwaGEsIDxjb2RlPnNvdXJjZSArIGRlc3RpbmF0aW9uKDEgLSBzb3VyY2UuYWxwaGEpPC9jb2RlPi5cbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBQUkVfTVVMVElQTElFRF9BTFBIQV9CTEVORDogT2JqZWN0LmZyZWV6ZSh7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBlcXVhdGlvblJnYjogQmxlbmRFcXVhdGlvbi5BREQsXG4gICAgZXF1YXRpb25BbHBoYTogQmxlbmRFcXVhdGlvbi5BREQsXG4gICAgZnVuY3Rpb25Tb3VyY2VSZ2I6IEJsZW5kRnVuY3Rpb24uT05FLFxuICAgIGZ1bmN0aW9uU291cmNlQWxwaGE6IEJsZW5kRnVuY3Rpb24uT05FLFxuICAgIGZ1bmN0aW9uRGVzdGluYXRpb25SZ2I6IEJsZW5kRnVuY3Rpb24uT05FX01JTlVTX1NPVVJDRV9BTFBIQSxcbiAgICBmdW5jdGlvbkRlc3RpbmF0aW9uQWxwaGE6IEJsZW5kRnVuY3Rpb24uT05FX01JTlVTX1NPVVJDRV9BTFBIQSxcbiAgfSksXG5cbiAgLyoqXG4gICAqIEJsZW5kaW5nIGlzIGVuYWJsZWQgdXNpbmcgYWRkaXRpdmUgYmxlbmRpbmcsIDxjb2RlPnNvdXJjZShzb3VyY2UuYWxwaGEpICsgZGVzdGluYXRpb248L2NvZGU+LlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIEFERElUSVZFX0JMRU5EOiBPYmplY3QuZnJlZXplKHtcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGVxdWF0aW9uUmdiOiBCbGVuZEVxdWF0aW9uLkFERCxcbiAgICBlcXVhdGlvbkFscGhhOiBCbGVuZEVxdWF0aW9uLkFERCxcbiAgICBmdW5jdGlvblNvdXJjZVJnYjogQmxlbmRGdW5jdGlvbi5TT1VSQ0VfQUxQSEEsXG4gICAgZnVuY3Rpb25Tb3VyY2VBbHBoYTogQmxlbmRGdW5jdGlvbi5PTkUsXG4gICAgZnVuY3Rpb25EZXN0aW5hdGlvblJnYjogQmxlbmRGdW5jdGlvbi5PTkUsXG4gICAgZnVuY3Rpb25EZXN0aW5hdGlvbkFscGhhOiBCbGVuZEZ1bmN0aW9uLk9ORSxcbiAgfSksXG59O1xuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZShCbGVuZGluZ1N0YXRlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13633\n')},620:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99417);\n\n\n\n\n\nvar defaultDimensions = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(1.0, 1.0, 1.0);\n\n/**\n * A ParticleEmitter that emits particles within a box.\n * Particles will be positioned randomly within the box and have initial velocities emanating from the center of the box.\n *\n * @alias BoxEmitter\n * @constructor\n *\n * @param {Cartesian3} dimensions The width, height and depth dimensions of the box.\n */\nfunction BoxEmitter(dimensions) {\n  dimensions = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(dimensions, defaultDimensions);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("dimensions", dimensions);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("dimensions.x", dimensions.x, 0.0);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("dimensions.y", dimensions.y, 0.0);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("dimensions.z", dimensions.z, 0.0);\n  //>>includeEnd(\'debug\');\n\n  this._dimensions = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(dimensions);\n}\n\nObject.defineProperties(BoxEmitter.prototype, {\n  /**\n   * The width, height and depth dimensions of the box in meters.\n   * @memberof BoxEmitter.prototype\n   * @type {Cartesian3}\n   * @default new Cartesian3(1.0, 1.0, 1.0)\n   */\n  dimensions: {\n    get: function () {\n      return this._dimensions;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("value", value);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("value.x", value.x, 0.0);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("value.y", value.y, 0.0);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number.greaterThanOrEquals */ .Z.typeOf.number.greaterThanOrEquals("value.z", value.z, 0.0);\n      //>>includeEnd(\'debug\');\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(value, this._dimensions);\n    },\n  },\n});\n\nvar scratchHalfDim = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n/**\n * Initializes the given {Particle} by setting it\'s position and velocity.\n *\n * @private\n * @param {Particle} particle The particle to initialize.\n */\nBoxEmitter.prototype.emit = function (particle) {\n  var dim = this._dimensions;\n  var halfDim = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(dim, 0.5, scratchHalfDim);\n\n  var x = _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].randomBetween */ .Z.randomBetween(-halfDim.x, halfDim.x);\n  var y = _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].randomBetween */ .Z.randomBetween(-halfDim.y, halfDim.y);\n  var z = _Core_Math_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].randomBetween */ .Z.randomBetween(-halfDim.z, halfDim.z);\n\n  particle.position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].fromElements */ .Z.fromElements(x, y, z, particle.position);\n  particle.velocity = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].normalize */ .Z.normalize(\n    particle.position,\n    particle.velocity\n  );\n};\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (BoxEmitter)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjIwLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBK0M7QUFDVjtBQUNjO0FBQ1Y7O0FBRXpDLDRCQUE0QixvRUFBVTs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkI7QUFDQTtBQUNBLGVBQWUsMEVBQVk7O0FBRTNCO0FBQ0EsRUFBRSwrRUFBYTtBQUNmLEVBQUUsbUlBQXVDO0FBQ3pDLEVBQUUsbUlBQXVDO0FBQ3pDLEVBQUUsbUlBQXVDO0FBQ3pDOztBQUVBLHFCQUFxQixnRkFBZ0I7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTSwrRUFBYTtBQUNuQixNQUFNLG1JQUF1QztBQUM3QyxNQUFNLG1JQUF1QztBQUM3QyxNQUFNLG1JQUF1QztBQUM3QztBQUNBLE1BQU0sZ0ZBQWdCO0FBQ3RCLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRCx5QkFBeUIsb0VBQVU7O0FBRW5DO0FBQ0EsMEJBQTBCLFVBQVU7QUFDcEM7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0dBQTJCOztBQUUzQyxVQUFVLDBGQUF3QjtBQUNsQyxVQUFVLDBGQUF3QjtBQUNsQyxVQUFVLDBGQUF3Qjs7QUFFbEMsc0JBQXNCLDhGQUF1QjtBQUM3QyxzQkFBc0Isd0ZBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQWUsMERBQVUsSUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9Cb3hFbWl0dGVyLmpzPzA0ODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcIi4uL0NvcmUvTWF0aC5qc1wiO1xuXG52YXIgZGVmYXVsdERpbWVuc2lvbnMgPSBuZXcgQ2FydGVzaWFuMygxLjAsIDEuMCwgMS4wKTtcblxuLyoqXG4gKiBBIFBhcnRpY2xlRW1pdHRlciB0aGF0IGVtaXRzIHBhcnRpY2xlcyB3aXRoaW4gYSBib3guXG4gKiBQYXJ0aWNsZXMgd2lsbCBiZSBwb3NpdGlvbmVkIHJhbmRvbWx5IHdpdGhpbiB0aGUgYm94IGFuZCBoYXZlIGluaXRpYWwgdmVsb2NpdGllcyBlbWFuYXRpbmcgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBib3guXG4gKlxuICogQGFsaWFzIEJveEVtaXR0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gZGltZW5zaW9ucyBUaGUgd2lkdGgsIGhlaWdodCBhbmQgZGVwdGggZGltZW5zaW9ucyBvZiB0aGUgYm94LlxuICovXG5mdW5jdGlvbiBCb3hFbWl0dGVyKGRpbWVuc2lvbnMpIHtcbiAgZGltZW5zaW9ucyA9IGRlZmF1bHRWYWx1ZShkaW1lbnNpb25zLCBkZWZhdWx0RGltZW5zaW9ucyk7XG5cbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgQ2hlY2suZGVmaW5lZChcImRpbWVuc2lvbnNcIiwgZGltZW5zaW9ucyk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIuZ3JlYXRlclRoYW5PckVxdWFscyhcImRpbWVuc2lvbnMueFwiLCBkaW1lbnNpb25zLngsIDAuMCk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIuZ3JlYXRlclRoYW5PckVxdWFscyhcImRpbWVuc2lvbnMueVwiLCBkaW1lbnNpb25zLnksIDAuMCk7XG4gIENoZWNrLnR5cGVPZi5udW1iZXIuZ3JlYXRlclRoYW5PckVxdWFscyhcImRpbWVuc2lvbnMuelwiLCBkaW1lbnNpb25zLnosIDAuMCk7XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX2RpbWVuc2lvbnMgPSBDYXJ0ZXNpYW4zLmNsb25lKGRpbWVuc2lvbnMpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhCb3hFbWl0dGVyLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogVGhlIHdpZHRoLCBoZWlnaHQgYW5kIGRlcHRoIGRpbWVuc2lvbnMgb2YgdGhlIGJveCBpbiBtZXRlcnMuXG4gICAqIEBtZW1iZXJvZiBCb3hFbWl0dGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q2FydGVzaWFuM31cbiAgICogQGRlZmF1bHQgbmV3IENhcnRlc2lhbjMoMS4wLCAxLjAsIDEuMClcbiAgICovXG4gIGRpbWVuc2lvbnM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kaW1lbnNpb25zO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBDaGVjay5kZWZpbmVkKFwidmFsdWVcIiwgdmFsdWUpO1xuICAgICAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbk9yRXF1YWxzKFwidmFsdWUueFwiLCB2YWx1ZS54LCAwLjApO1xuICAgICAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbk9yRXF1YWxzKFwidmFsdWUueVwiLCB2YWx1ZS55LCAwLjApO1xuICAgICAgQ2hlY2sudHlwZU9mLm51bWJlci5ncmVhdGVyVGhhbk9yRXF1YWxzKFwidmFsdWUuelwiLCB2YWx1ZS56LCAwLjApO1xuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gICAgICBDYXJ0ZXNpYW4zLmNsb25lKHZhbHVlLCB0aGlzLl9kaW1lbnNpb25zKTtcbiAgICB9LFxuICB9LFxufSk7XG5cbnZhciBzY3JhdGNoSGFsZkRpbSA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIGdpdmVuIHtQYXJ0aWNsZX0gYnkgc2V0dGluZyBpdCdzIHBvc2l0aW9uIGFuZCB2ZWxvY2l0eS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtQYXJ0aWNsZX0gcGFydGljbGUgVGhlIHBhcnRpY2xlIHRvIGluaXRpYWxpemUuXG4gKi9cbkJveEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgdmFyIGRpbSA9IHRoaXMuX2RpbWVuc2lvbnM7XG4gIHZhciBoYWxmRGltID0gQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKGRpbSwgMC41LCBzY3JhdGNoSGFsZkRpbSk7XG5cbiAgdmFyIHggPSBDZXNpdW1NYXRoLnJhbmRvbUJldHdlZW4oLWhhbGZEaW0ueCwgaGFsZkRpbS54KTtcbiAgdmFyIHkgPSBDZXNpdW1NYXRoLnJhbmRvbUJldHdlZW4oLWhhbGZEaW0ueSwgaGFsZkRpbS55KTtcbiAgdmFyIHogPSBDZXNpdW1NYXRoLnJhbmRvbUJldHdlZW4oLWhhbGZEaW0ueiwgaGFsZkRpbS56KTtcblxuICBwYXJ0aWNsZS5wb3NpdGlvbiA9IENhcnRlc2lhbjMuZnJvbUVsZW1lbnRzKHgsIHksIHosIHBhcnRpY2xlLnBvc2l0aW9uKTtcbiAgcGFydGljbGUudmVsb2NpdHkgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShcbiAgICBwYXJ0aWNsZS5wb3NpdGlvbixcbiAgICBwYXJ0aWNsZS52ZWxvY2l0eVxuICApO1xufTtcbmV4cG9ydCBkZWZhdWx0IEJveEVtaXR0ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///620\n')},24725:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88108);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86511);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(38443);\n/* harmony import */ var _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2932);\n/* harmony import */ var _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21572);\n/* harmony import */ var _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(10667);\n/* harmony import */ var _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87721);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8743);\n/* harmony import */ var _Shaders_BrdfLutGeneratorFS_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(90398);\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @private\n */\nfunction BrdfLutGenerator() {\n  this._framebuffer = undefined;\n  this._colorTexture = undefined;\n  this._drawCommand = undefined;\n}\n\nObject.defineProperties(BrdfLutGenerator.prototype, {\n  colorTexture: {\n    get: function () {\n      return this._colorTexture;\n    },\n  },\n});\n\nfunction createCommand(generator, context) {\n  var framebuffer = generator._framebuffer;\n\n  var drawCommand = context.createViewportQuadCommand(_Shaders_BrdfLutGeneratorFS_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {\n    framebuffer: framebuffer,\n    renderState: _Renderer_RenderState_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].fromCache */ .Z.fromCache({\n      viewport: new _Core_BoundingRectangle_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(0.0, 0.0, 256.0, 256.0),\n    }),\n  });\n\n  generator._drawCommand = drawCommand;\n}\n\nfunction createFramebuffer(generator, context) {\n  var colorTexture = new _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z({\n    context: context,\n    width: 256,\n    height: 256,\n    pixelFormat: _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].RGBA */ .Z.RGBA,\n    pixelDatatype: _Renderer_PixelDatatype_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE,\n    sampler: _Renderer_Sampler_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].NEAREST */ .Z.NEAREST,\n  });\n\n  generator._colorTexture = colorTexture;\n\n  var framebuffer = new _Renderer_Framebuffer_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z({\n    context: context,\n    colorTextures: [colorTexture],\n    destroyAttachments: false,\n  });\n\n  generator._framebuffer = framebuffer;\n}\n\nBrdfLutGenerator.prototype.update = function (frameState) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z)(this._colorTexture)) {\n    var context = frameState.context;\n\n    createFramebuffer(this, context);\n    createCommand(this, context);\n    this._drawCommand.execute(context);\n    this._framebuffer = this._framebuffer && this._framebuffer.destroy();\n    this._drawCommand.shaderProgram =\n      this._drawCommand.shaderProgram &&\n      this._drawCommand.shaderProgram.destroy();\n  }\n};\n\nBrdfLutGenerator.prototype.isDestroyed = function () {\n  return false;\n};\n\nBrdfLutGenerator.prototype.destroy = function () {\n  this._colorTexture = this._colorTexture && this._colorTexture.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (BrdfLutGenerator);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3MjUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE2RDtBQUNwQjtBQUNZO0FBQ0o7QUFDSTtBQUNJO0FBQ0o7QUFDUjtBQUNBO0FBQ3FCOztBQUVsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7O0FBRUEsc0RBQXNELCtFQUFrQjtBQUN4RTtBQUNBLGlCQUFpQiw2RkFBcUI7QUFDdEMsb0JBQW9CLDJFQUFpQjtBQUNyQyxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0EseUJBQXlCLHFFQUFPO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwrRUFBZ0I7QUFDakMsbUJBQW1CLHVHQUEyQjtBQUM5QyxhQUFhLHFGQUFlO0FBQzVCLEdBQUc7O0FBRUg7O0FBRUEsd0JBQXdCLHlFQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBLE9BQU8scUVBQU87QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLDJFQUFhO0FBQ3RCO0FBQ0EseURBQWUsZ0JBQWdCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvQnJkZkx1dEdlbmVyYXRvci5qcz83OThlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb3VuZGluZ1JlY3RhbmdsZSBmcm9tIFwiLi4vQ29yZS9Cb3VuZGluZ1JlY3RhbmdsZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IGRlc3Ryb3lPYmplY3QgZnJvbSBcIi4uL0NvcmUvZGVzdHJveU9iamVjdC5qc1wiO1xuaW1wb3J0IFBpeGVsRm9ybWF0IGZyb20gXCIuLi9Db3JlL1BpeGVsRm9ybWF0LmpzXCI7XG5pbXBvcnQgRnJhbWVidWZmZXIgZnJvbSBcIi4uL1JlbmRlcmVyL0ZyYW1lYnVmZmVyLmpzXCI7XG5pbXBvcnQgUGl4ZWxEYXRhdHlwZSBmcm9tIFwiLi4vUmVuZGVyZXIvUGl4ZWxEYXRhdHlwZS5qc1wiO1xuaW1wb3J0IFJlbmRlclN0YXRlIGZyb20gXCIuLi9SZW5kZXJlci9SZW5kZXJTdGF0ZS5qc1wiO1xuaW1wb3J0IFNhbXBsZXIgZnJvbSBcIi4uL1JlbmRlcmVyL1NhbXBsZXIuanNcIjtcbmltcG9ydCBUZXh0dXJlIGZyb20gXCIuLi9SZW5kZXJlci9UZXh0dXJlLmpzXCI7XG5pbXBvcnQgQnJkZkx1dEdlbmVyYXRvckZTIGZyb20gXCIuLi9TaGFkZXJzL0JyZGZMdXRHZW5lcmF0b3JGUy5qc1wiO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEJyZGZMdXRHZW5lcmF0b3IoKSB7XG4gIHRoaXMuX2ZyYW1lYnVmZmVyID0gdW5kZWZpbmVkO1xuICB0aGlzLl9jb2xvclRleHR1cmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2RyYXdDb21tYW5kID0gdW5kZWZpbmVkO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhCcmRmTHV0R2VuZXJhdG9yLnByb3RvdHlwZSwge1xuICBjb2xvclRleHR1cmU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb2xvclRleHR1cmU7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVDb21tYW5kKGdlbmVyYXRvciwgY29udGV4dCkge1xuICB2YXIgZnJhbWVidWZmZXIgPSBnZW5lcmF0b3IuX2ZyYW1lYnVmZmVyO1xuXG4gIHZhciBkcmF3Q29tbWFuZCA9IGNvbnRleHQuY3JlYXRlVmlld3BvcnRRdWFkQ29tbWFuZChCcmRmTHV0R2VuZXJhdG9yRlMsIHtcbiAgICBmcmFtZWJ1ZmZlcjogZnJhbWVidWZmZXIsXG4gICAgcmVuZGVyU3RhdGU6IFJlbmRlclN0YXRlLmZyb21DYWNoZSh7XG4gICAgICB2aWV3cG9ydDogbmV3IEJvdW5kaW5nUmVjdGFuZ2xlKDAuMCwgMC4wLCAyNTYuMCwgMjU2LjApLFxuICAgIH0pLFxuICB9KTtcblxuICBnZW5lcmF0b3IuX2RyYXdDb21tYW5kID0gZHJhd0NvbW1hbmQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYW1lYnVmZmVyKGdlbmVyYXRvciwgY29udGV4dCkge1xuICB2YXIgY29sb3JUZXh0dXJlID0gbmV3IFRleHR1cmUoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgd2lkdGg6IDI1NixcbiAgICBoZWlnaHQ6IDI1NixcbiAgICBwaXhlbEZvcm1hdDogUGl4ZWxGb3JtYXQuUkdCQSxcbiAgICBwaXhlbERhdGF0eXBlOiBQaXhlbERhdGF0eXBlLlVOU0lHTkVEX0JZVEUsXG4gICAgc2FtcGxlcjogU2FtcGxlci5ORUFSRVNULFxuICB9KTtcblxuICBnZW5lcmF0b3IuX2NvbG9yVGV4dHVyZSA9IGNvbG9yVGV4dHVyZTtcblxuICB2YXIgZnJhbWVidWZmZXIgPSBuZXcgRnJhbWVidWZmZXIoe1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgY29sb3JUZXh0dXJlczogW2NvbG9yVGV4dHVyZV0sXG4gICAgZGVzdHJveUF0dGFjaG1lbnRzOiBmYWxzZSxcbiAgfSk7XG5cbiAgZ2VuZXJhdG9yLl9mcmFtZWJ1ZmZlciA9IGZyYW1lYnVmZmVyO1xufVxuXG5CcmRmTHV0R2VuZXJhdG9yLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICBpZiAoIWRlZmluZWQodGhpcy5fY29sb3JUZXh0dXJlKSkge1xuICAgIHZhciBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xuXG4gICAgY3JlYXRlRnJhbWVidWZmZXIodGhpcywgY29udGV4dCk7XG4gICAgY3JlYXRlQ29tbWFuZCh0aGlzLCBjb250ZXh0KTtcbiAgICB0aGlzLl9kcmF3Q29tbWFuZC5leGVjdXRlKGNvbnRleHQpO1xuICAgIHRoaXMuX2ZyYW1lYnVmZmVyID0gdGhpcy5fZnJhbWVidWZmZXIgJiYgdGhpcy5fZnJhbWVidWZmZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuX2RyYXdDb21tYW5kLnNoYWRlclByb2dyYW0gPVxuICAgICAgdGhpcy5fZHJhd0NvbW1hbmQuc2hhZGVyUHJvZ3JhbSAmJlxuICAgICAgdGhpcy5fZHJhd0NvbW1hbmQuc2hhZGVyUHJvZ3JhbS5kZXN0cm95KCk7XG4gIH1cbn07XG5cbkJyZGZMdXRHZW5lcmF0b3IucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG5CcmRmTHV0R2VuZXJhdG9yLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9jb2xvclRleHR1cmUgPSB0aGlzLl9jb2xvclRleHR1cmUgJiYgdGhpcy5fY29sb3JUZXh0dXJlLmRlc3Ryb3koKTtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgQnJkZkx1dEdlbmVyYXRvcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///24725\n')},61446:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ BufferLoader; }\n/* harmony export */ });\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12572);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13222);\n/* harmony import */ var _ResourceLoader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29789);\n/* harmony import */ var _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(89356);\n\n\n\n\n\n\n\n/**\n * Loads an embedded or external buffer.\n * <p>\n * Implements the {@link ResourceLoader} interface.\n * </p>\n *\n * @alias BufferLoader\n * @constructor\n * @augments ResourceLoader\n *\n * @param {Object} options Object with the following properties:\n * @param {Uint8Array} [options.typedArray] The typed array containing the embedded buffer contents. Mutually exclusive with options.resource.\n * @param {Resource} [options.resource] The {@link Resource} pointing to the external buffer. Mutually exclusive with options.typedArray.\n * @param {String} [options.cacheKey] The cache key of the resource.\n *\n * @exception {DeveloperError} One of options.typedArray and options.resource must be defined.\n *\n * @private\n */\nfunction BufferLoader(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var typedArray = options.typedArray;\n  var resource = options.resource;\n  var cacheKey = options.cacheKey;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(typedArray) === (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(resource)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(\n      "One of options.typedArray and options.resource must be defined."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  this._typedArray = typedArray;\n  this._resource = resource;\n  this._cacheKey = cacheKey;\n  this._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNLOADED */ .Z.UNLOADED;\n  this._promise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].defer */ .Z.defer();\n}\n\nif ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(Object.create)) {\n  BufferLoader.prototype = Object.create(_ResourceLoader_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].prototype */ .Z.prototype);\n  BufferLoader.prototype.constructor = BufferLoader;\n}\n\nObject.defineProperties(BufferLoader.prototype, {\n  /**\n   * A promise that resolves to the resource when the resource is ready.\n   *\n   * @memberof BufferLoader.prototype\n   *\n   * @type {Promise.<BufferLoader>}\n   * @readonly\n   */\n  promise: {\n    get: function () {\n      return this._promise.promise;\n    },\n  },\n  /**\n   * The cache key of the resource.\n   *\n   * @memberof BufferLoader.prototype\n   *\n   * @type {String}\n   * @readonly\n   */\n  cacheKey: {\n    get: function () {\n      return this._cacheKey;\n    },\n  },\n  /**\n   * The typed array containing the embedded buffer contents.\n   *\n   * @memberof BufferLoader.prototype\n   *\n   * @type {Uint8Array}\n   * @readonly\n   */\n  typedArray: {\n    get: function () {\n      return this._typedArray;\n    },\n  },\n});\n\n/**\n * Loads the resource.\n * @private\n */\nBufferLoader.prototype.load = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(this._typedArray)) {\n    this._promise.resolve(this);\n    return;\n  }\n\n  loadExternalBuffer(this);\n};\n\nfunction loadExternalBuffer(bufferLoader) {\n  var resource = bufferLoader._resource;\n  bufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].LOADING */ .Z.LOADING;\n  BufferLoader._fetchArrayBuffer(resource)\n    .then(function (arrayBuffer) {\n      if (bufferLoader.isDestroyed()) {\n        return;\n      }\n      bufferLoader._typedArray = new Uint8Array(arrayBuffer);\n      bufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].READY */ .Z.READY;\n      bufferLoader._promise.resolve(bufferLoader);\n    })\n    .otherwise(function (error) {\n      if (bufferLoader.isDestroyed()) {\n        return;\n      }\n      bufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].FAILED */ .Z.FAILED;\n      var errorMessage = "Failed to load external buffer: " + resource.url;\n      bufferLoader._promise.reject(bufferLoader.getError(errorMessage, error));\n    });\n}\n\n/**\n * Exposed for testing\n * @private\n */\nBufferLoader._fetchArrayBuffer = function (resource) {\n  return resource.fetchArrayBuffer();\n};\n\n/**\n * Unloads the resource.\n * @private\n */\nBufferLoader.prototype.unload = function () {\n  this._typedArray = undefined;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjE0NDYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW1EO0FBQ1Y7QUFDYztBQUNkO0FBQ1E7QUFDVTs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsVUFBVSx3QkFBd0IsZ0JBQWdCO0FBQzdELFdBQVcsUUFBUTtBQUNuQjtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNlO0FBQ2YsWUFBWSwwRUFBWSxVQUFVLGdHQUF5QjtBQUMzRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLHFFQUFPLGlCQUFpQixxRUFBTztBQUNyQyxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwRkFBNEI7QUFDNUMsa0JBQWtCLGdGQUFVO0FBQzVCOztBQUVBLElBQUkscUVBQU87QUFDWCx5Q0FBeUMsdUZBQXdCO0FBQ2pFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3Qix3RkFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9GQUF5QjtBQUNyRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzRkFBMEI7QUFDdEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9CdWZmZXJMb2FkZXIuanM/NGQxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2VMb2FkZXIgZnJvbSBcIi4vUmVzb3VyY2VMb2FkZXIuanNcIjtcbmltcG9ydCBSZXNvdXJjZUxvYWRlclN0YXRlIGZyb20gXCIuL1Jlc291cmNlTG9hZGVyU3RhdGUuanNcIjtcblxuLyoqXG4gKiBMb2FkcyBhbiBlbWJlZGRlZCBvciBleHRlcm5hbCBidWZmZXIuXG4gKiA8cD5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBSZXNvdXJjZUxvYWRlcn0gaW50ZXJmYWNlLlxuICogPC9wPlxuICpcbiAqIEBhbGlhcyBCdWZmZXJMb2FkZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQGF1Z21lbnRzIFJlc291cmNlTG9hZGVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtVaW50OEFycmF5fSBbb3B0aW9ucy50eXBlZEFycmF5XSBUaGUgdHlwZWQgYXJyYXkgY29udGFpbmluZyB0aGUgZW1iZWRkZWQgYnVmZmVyIGNvbnRlbnRzLiBNdXR1YWxseSBleGNsdXNpdmUgd2l0aCBvcHRpb25zLnJlc291cmNlLlxuICogQHBhcmFtIHtSZXNvdXJjZX0gW29wdGlvbnMucmVzb3VyY2VdIFRoZSB7QGxpbmsgUmVzb3VyY2V9IHBvaW50aW5nIHRvIHRoZSBleHRlcm5hbCBidWZmZXIuIE11dHVhbGx5IGV4Y2x1c2l2ZSB3aXRoIG9wdGlvbnMudHlwZWRBcnJheS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5jYWNoZUtleV0gVGhlIGNhY2hlIGtleSBvZiB0aGUgcmVzb3VyY2UuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IE9uZSBvZiBvcHRpb25zLnR5cGVkQXJyYXkgYW5kIG9wdGlvbnMucmVzb3VyY2UgbXVzdCBiZSBkZWZpbmVkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEJ1ZmZlckxvYWRlcihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XG4gIHZhciB0eXBlZEFycmF5ID0gb3B0aW9ucy50eXBlZEFycmF5O1xuICB2YXIgcmVzb3VyY2UgPSBvcHRpb25zLnJlc291cmNlO1xuICB2YXIgY2FjaGVLZXkgPSBvcHRpb25zLmNhY2hlS2V5O1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChkZWZpbmVkKHR5cGVkQXJyYXkpID09PSBkZWZpbmVkKHJlc291cmNlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiT25lIG9mIG9wdGlvbnMudHlwZWRBcnJheSBhbmQgb3B0aW9ucy5yZXNvdXJjZSBtdXN0IGJlIGRlZmluZWQuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHRoaXMuX3R5cGVkQXJyYXkgPSB0eXBlZEFycmF5O1xuICB0aGlzLl9yZXNvdXJjZSA9IHJlc291cmNlO1xuICB0aGlzLl9jYWNoZUtleSA9IGNhY2hlS2V5O1xuICB0aGlzLl9zdGF0ZSA9IFJlc291cmNlTG9hZGVyU3RhdGUuVU5MT0FERUQ7XG4gIHRoaXMuX3Byb21pc2UgPSB3aGVuLmRlZmVyKCk7XG59XG5cbmlmIChkZWZpbmVkKE9iamVjdC5jcmVhdGUpKSB7XG4gIEJ1ZmZlckxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlc291cmNlTG9hZGVyLnByb3RvdHlwZSk7XG4gIEJ1ZmZlckxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCdWZmZXJMb2FkZXI7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEJ1ZmZlckxvYWRlci5wcm90b3R5cGUsIHtcbiAgLyoqXG4gICAqIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSByZXNvdXJjZSB3aGVuIHRoZSByZXNvdXJjZSBpcyByZWFkeS5cbiAgICpcbiAgICogQG1lbWJlcm9mIEJ1ZmZlckxvYWRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1Byb21pc2UuPEJ1ZmZlckxvYWRlcj59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2UucHJvbWlzZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogVGhlIGNhY2hlIGtleSBvZiB0aGUgcmVzb3VyY2UuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBCdWZmZXJMb2FkZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgY2FjaGVLZXk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jYWNoZUtleTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogVGhlIHR5cGVkIGFycmF5IGNvbnRhaW5pbmcgdGhlIGVtYmVkZGVkIGJ1ZmZlciBjb250ZW50cy5cbiAgICpcbiAgICogQG1lbWJlcm9mIEJ1ZmZlckxvYWRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1VpbnQ4QXJyYXl9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdHlwZWRBcnJheToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3R5cGVkQXJyYXk7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIExvYWRzIHRoZSByZXNvdXJjZS5cbiAqIEBwcml2YXRlXG4gKi9cbkJ1ZmZlckxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRlZmluZWQodGhpcy5fdHlwZWRBcnJheSkpIHtcbiAgICB0aGlzLl9wcm9taXNlLnJlc29sdmUodGhpcyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbG9hZEV4dGVybmFsQnVmZmVyKHRoaXMpO1xufTtcblxuZnVuY3Rpb24gbG9hZEV4dGVybmFsQnVmZmVyKGJ1ZmZlckxvYWRlcikge1xuICB2YXIgcmVzb3VyY2UgPSBidWZmZXJMb2FkZXIuX3Jlc291cmNlO1xuICBidWZmZXJMb2FkZXIuX3N0YXRlID0gUmVzb3VyY2VMb2FkZXJTdGF0ZS5MT0FESU5HO1xuICBCdWZmZXJMb2FkZXIuX2ZldGNoQXJyYXlCdWZmZXIocmVzb3VyY2UpXG4gICAgLnRoZW4oZnVuY3Rpb24gKGFycmF5QnVmZmVyKSB7XG4gICAgICBpZiAoYnVmZmVyTG9hZGVyLmlzRGVzdHJveWVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYnVmZmVyTG9hZGVyLl90eXBlZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuICAgICAgYnVmZmVyTG9hZGVyLl9zdGF0ZSA9IFJlc291cmNlTG9hZGVyU3RhdGUuUkVBRFk7XG4gICAgICBidWZmZXJMb2FkZXIuX3Byb21pc2UucmVzb2x2ZShidWZmZXJMb2FkZXIpO1xuICAgIH0pXG4gICAgLm90aGVyd2lzZShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmIChidWZmZXJMb2FkZXIuaXNEZXN0cm95ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBidWZmZXJMb2FkZXIuX3N0YXRlID0gUmVzb3VyY2VMb2FkZXJTdGF0ZS5GQUlMRUQ7XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJGYWlsZWQgdG8gbG9hZCBleHRlcm5hbCBidWZmZXI6IFwiICsgcmVzb3VyY2UudXJsO1xuICAgICAgYnVmZmVyTG9hZGVyLl9wcm9taXNlLnJlamVjdChidWZmZXJMb2FkZXIuZ2V0RXJyb3IoZXJyb3JNZXNzYWdlLCBlcnJvcikpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEV4cG9zZWQgZm9yIHRlc3RpbmdcbiAqIEBwcml2YXRlXG4gKi9cbkJ1ZmZlckxvYWRlci5fZmV0Y2hBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIChyZXNvdXJjZSkge1xuICByZXR1cm4gcmVzb3VyY2UuZmV0Y2hBcnJheUJ1ZmZlcigpO1xufTtcblxuLyoqXG4gKiBVbmxvYWRzIHRoZSByZXNvdXJjZS5cbiAqIEBwcml2YXRlXG4gKi9cbkJ1ZmZlckxvYWRlci5wcm90b3R5cGUudW5sb2FkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl90eXBlZEFycmF5ID0gdW5kZWZpbmVkO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///61446\n')},70561:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48243);\n/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63367);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(51688);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12572);\n/* harmony import */ var _Core_EasingFunction_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50732);\n/* harmony import */ var _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(50491);\n/* harmony import */ var _Core_EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(39043);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(14459);\n/* harmony import */ var _Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(59081);\n/* harmony import */ var _Core_HeadingPitchRange_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(99819);\n/* harmony import */ var _Core_HeadingPitchRoll_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(57674);\n/* harmony import */ var _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(84935);\n/* harmony import */ var _Core_IntersectionTests_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(67627);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(68201);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(72248);\n/* harmony import */ var _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(91473);\n/* harmony import */ var _Core_OrthographicOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(35131);\n/* harmony import */ var _Core_PerspectiveFrustum_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(66854);\n/* harmony import */ var _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(87811);\n/* harmony import */ var _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(68457);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(96190);\n/* harmony import */ var _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(95555);\n/* harmony import */ var _CameraFlightPath_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(15092);\n/* harmony import */ var _MapMode2D_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(95757);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(89917);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The camera is defined by a position, orientation, and view frustum.\n * <br /><br />\n * The orientation forms an orthonormal basis with a view, up and right = view x up unit vectors.\n * <br /><br />\n * The viewing frustum is defined by 6 planes.\n * Each plane is represented by a {@link Cartesian4} object, where the x, y, and z components\n * define the unit vector normal to the plane, and the w component is the distance of the\n * plane from the origin/camera position.\n *\n * @alias Camera\n *\n * @constructor\n *\n * @param {Scene} scene The scene.\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Camera.html|Cesium Sandcastle Camera Demo}\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Camera%20Tutorial.html|Cesium Sandcastle Camera Tutorial Example}\n * @demo {@link https://cesium.com/learn/cesiumjs-learn/cesiumjs-camera|Camera Tutorial}\n *\n * @example\n * // Create a camera looking down the negative z-axis, positioned at the origin,\n * // with a field of view of 60 degrees, and 1:1 aspect ratio.\n * var camera = new Cesium.Camera(scene);\n * camera.position = new Cesium.Cartesian3();\n * camera.direction = Cesium.Cartesian3.negate(Cesium.Cartesian3.UNIT_Z, new Cesium.Cartesian3());\n * camera.up = Cesium.Cartesian3.clone(Cesium.Cartesian3.UNIT_Y);\n * camera.frustum.fov = Cesium.Math.PI_OVER_THREE;\n * camera.frustum.near = 1.0;\n * camera.frustum.far = 2.0;\n */\nfunction Camera(scene) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(scene)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("scene is required.");\n  }\n  //>>includeEnd(\'debug\');\n  this._scene = scene;\n\n  this._transform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n  this._invTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n  this._actualTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n  this._actualInvTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n  this._transformChanged = false;\n\n  /**\n   * The position of the camera.\n   *\n   * @type {Cartesian3}\n   */\n  this.position = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._position = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._positionWC = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._positionCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n  this._oldPositionWC = undefined;\n\n  /**\n   * The position delta magnitude.\n   *\n   * @private\n   */\n  this.positionWCDeltaMagnitude = 0.0;\n\n  /**\n   * The position delta magnitude last frame.\n   *\n   * @private\n   */\n  this.positionWCDeltaMagnitudeLastFrame = 0.0;\n\n  /**\n   * How long in seconds since the camera has stopped moving\n   *\n   * @private\n   */\n  this.timeSinceMoved = 0.0;\n  this._lastMovedTimestamp = 0.0;\n\n  /**\n   * The view direction of the camera.\n   *\n   * @type {Cartesian3}\n   */\n  this.direction = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._direction = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._directionWC = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n  /**\n   * The up direction of the camera.\n   *\n   * @type {Cartesian3}\n   */\n  this.up = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._up = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._upWC = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n  /**\n   * The right direction of the camera.\n   *\n   * @type {Cartesian3}\n   */\n  this.right = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._right = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  this._rightWC = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n  /**\n   * The region of space in view.\n   *\n   * @type {PerspectiveFrustum|PerspectiveOffCenterFrustum|OrthographicFrustum}\n   * @default PerspectiveFrustum()\n   *\n   * @see PerspectiveFrustum\n   * @see PerspectiveOffCenterFrustum\n   * @see OrthographicFrustum\n   */\n  this.frustum = new _Core_PerspectiveFrustum_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z();\n  this.frustum.aspectRatio =\n    scene.drawingBufferWidth / scene.drawingBufferHeight;\n  this.frustum.fov = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].toRadians */ .Z.toRadians(60.0);\n\n  /**\n   * The default amount to move the camera when an argument is not\n   * provided to the move methods.\n   * @type {Number}\n   * @default 100000.0;\n   */\n  this.defaultMoveAmount = 100000.0;\n  /**\n   * The default amount to rotate the camera when an argument is not\n   * provided to the look methods.\n   * @type {Number}\n   * @default Math.PI / 60.0\n   */\n  this.defaultLookAmount = Math.PI / 60.0;\n  /**\n   * The default amount to rotate the camera when an argument is not\n   * provided to the rotate methods.\n   * @type {Number}\n   * @default Math.PI / 3600.0\n   */\n  this.defaultRotateAmount = Math.PI / 3600.0;\n  /**\n   * The default amount to move the camera when an argument is not\n   * provided to the zoom methods.\n   * @type {Number}\n   * @default 100000.0;\n   */\n  this.defaultZoomAmount = 100000.0;\n  /**\n   * If set, the camera will not be able to rotate past this axis in either direction.\n   * @type {Cartesian3}\n   * @default undefined\n   */\n  this.constrainedAxis = undefined;\n  /**\n   * The factor multiplied by the the map size used to determine where to clamp the camera position\n   * when zooming out from the surface. The default is 1.5. Only valid for 2D and the map is rotatable.\n   * @type {Number}\n   * @default 1.5\n   */\n  this.maximumZoomFactor = 1.5;\n\n  this._moveStart = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\n  this._moveEnd = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\n\n  this._changed = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z();\n  this._changedPosition = undefined;\n  this._changedDirection = undefined;\n  this._changedFrustum = undefined;\n\n  /**\n   * The amount the camera has to change before the <code>changed</code> event is raised. The value is a percentage in the [0, 1] range.\n   * @type {number}\n   * @default 0.5\n   */\n  this.percentageChanged = 0.5;\n\n  this._viewMatrix = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\n  this._invViewMatrix = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\n  updateViewMatrix(this);\n\n  this._mode = _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D;\n  this._modeChanged = true;\n  var projection = scene.mapProjection;\n  this._projection = projection;\n  this._maxCoord = projection.project(\n    new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(Math.PI, _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO)\n  );\n  this._max2Dfrustum = undefined;\n\n  // set default view\n  rectangleCameraPosition3D(\n    this,\n    Camera.DEFAULT_VIEW_RECTANGLE,\n    this.position,\n    true\n  );\n\n  var mag = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(this.position);\n  mag += mag * Camera.DEFAULT_VIEW_FACTOR;\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(this.position, this.position);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(this.position, mag, this.position);\n}\n\n/**\n * @private\n */\nCamera.TRANSFORM_2D = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z(\n  0.0,\n  0.0,\n  1.0,\n  0.0,\n  1.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  1.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  1.0\n);\n\n/**\n * @private\n */\nCamera.TRANSFORM_2D_INVERSE = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].inverseTransformation */ .Z.inverseTransformation(\n  Camera.TRANSFORM_2D,\n  new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z()\n);\n\n/**\n * The default rectangle the camera will view on creation.\n * @type Rectangle\n */\nCamera.DEFAULT_VIEW_RECTANGLE = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].fromDegrees */ .Z.fromDegrees(\n  -95.0,\n  -20.0,\n  -70.0,\n  90.0\n);\n\n/**\n * A scalar to multiply to the camera position and add it back after setting the camera to view the rectangle.\n * A value of zero means the camera will view the entire {@link Camera#DEFAULT_VIEW_RECTANGLE}, a value greater than zero\n * will move it further away from the extent, and a value less than zero will move it close to the extent.\n * @type Number\n */\nCamera.DEFAULT_VIEW_FACTOR = 0.5;\n\n/**\n * The default heading/pitch/range that is used when the camera flies to a location that contains a bounding sphere.\n * @type HeadingPitchRange\n */\nCamera.DEFAULT_OFFSET = new _Core_HeadingPitchRange_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(\n  0.0,\n  -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_FOUR */ .Z.PI_OVER_FOUR,\n  0.0\n);\n\nfunction updateViewMatrix(camera) {\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].computeView */ .Z.computeView(\n    camera._position,\n    camera._direction,\n    camera._up,\n    camera._right,\n    camera._viewMatrix\n  );\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiply */ .Z.multiply(\n    camera._viewMatrix,\n    camera._actualInvTransform,\n    camera._viewMatrix\n  );\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].inverseTransformation */ .Z.inverseTransformation(camera._viewMatrix, camera._invViewMatrix);\n}\n\nfunction updateCameraDeltas(camera) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(camera._oldPositionWC)) {\n    camera._oldPositionWC = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n      camera.positionWC,\n      camera._oldPositionWC\n    );\n  } else {\n    camera.positionWCDeltaMagnitudeLastFrame = camera.positionWCDeltaMagnitude;\n    var delta = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(\n      camera.positionWC,\n      camera._oldPositionWC,\n      camera._oldPositionWC\n    );\n    camera.positionWCDeltaMagnitude = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(delta);\n    camera._oldPositionWC = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n      camera.positionWC,\n      camera._oldPositionWC\n    );\n\n    // Update move timers\n    if (camera.positionWCDeltaMagnitude > 0.0) {\n      camera.timeSinceMoved = 0.0;\n      camera._lastMovedTimestamp = (0,_Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)();\n    } else {\n      camera.timeSinceMoved =\n        Math.max((0,_Core_getTimestamp_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)() - camera._lastMovedTimestamp, 0.0) / 1000.0;\n    }\n  }\n}\n\n/**\n * Checks if there\'s a camera flight with preload for this camera.\n *\n * @returns {Boolean} Whether or not this camera has a current flight with a valid preloadFlightCamera in scene.\n *\n * @private\n *\n */\nCamera.prototype.canPreloadFlight = function () {\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(this._currentFlight) && this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D;\n};\n\nCamera.prototype._updateCameraChanged = function () {\n  var camera = this;\n\n  updateCameraDeltas(camera);\n\n  if (camera._changed.numberOfListeners === 0) {\n    return;\n  }\n\n  var percentageChanged = camera.percentageChanged;\n\n  if (camera._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(camera._changedFrustum)) {\n      camera._changedPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n        camera.position,\n        camera._changedPosition\n      );\n      camera._changedFrustum = camera.frustum.clone();\n      return;\n    }\n\n    var position = camera.position;\n    var lastPosition = camera._changedPosition;\n\n    var frustum = camera.frustum;\n    var lastFrustum = camera._changedFrustum;\n\n    var x0 = position.x + frustum.left;\n    var x1 = position.x + frustum.right;\n    var x2 = lastPosition.x + lastFrustum.left;\n    var x3 = lastPosition.x + lastFrustum.right;\n\n    var y0 = position.y + frustum.bottom;\n    var y1 = position.y + frustum.top;\n    var y2 = lastPosition.y + lastFrustum.bottom;\n    var y3 = lastPosition.y + lastFrustum.top;\n\n    var leftX = Math.max(x0, x2);\n    var rightX = Math.min(x1, x3);\n    var bottomY = Math.max(y0, y2);\n    var topY = Math.min(y1, y3);\n\n    var areaPercentage;\n    if (leftX >= rightX || bottomY >= y1) {\n      areaPercentage = 1.0;\n    } else {\n      var areaRef = lastFrustum;\n      if (x0 < x2 && x1 > x3 && y0 < y2 && y1 > y3) {\n        areaRef = frustum;\n      }\n      areaPercentage =\n        1.0 -\n        ((rightX - leftX) * (topY - bottomY)) /\n          ((areaRef.right - areaRef.left) * (areaRef.top - areaRef.bottom));\n    }\n\n    if (areaPercentage > percentageChanged) {\n      camera._changed.raiseEvent(areaPercentage);\n      camera._changedPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n        camera.position,\n        camera._changedPosition\n      );\n      camera._changedFrustum = camera.frustum.clone(camera._changedFrustum);\n    }\n    return;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(camera._changedDirection)) {\n    camera._changedPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n      camera.positionWC,\n      camera._changedPosition\n    );\n    camera._changedDirection = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n      camera.directionWC,\n      camera._changedDirection\n    );\n    return;\n  }\n\n  var dirAngle = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].acosClamped */ .Z.acosClamped(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(camera.directionWC, camera._changedDirection)\n  );\n\n  var dirPercentage;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(camera.frustum.fovy)) {\n    dirPercentage = dirAngle / (camera.frustum.fovy * 0.5);\n  } else {\n    dirPercentage = dirAngle;\n  }\n\n  var distance = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].distance */ .Z.distance(\n    camera.positionWC,\n    camera._changedPosition\n  );\n  var heightPercentage = distance / camera.positionCartographic.height;\n\n  if (\n    dirPercentage > percentageChanged ||\n    heightPercentage > percentageChanged\n  ) {\n    camera._changed.raiseEvent(Math.max(dirPercentage, heightPercentage));\n    camera._changedPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n      camera.positionWC,\n      camera._changedPosition\n    );\n    camera._changedDirection = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n      camera.directionWC,\n      camera._changedDirection\n    );\n  }\n};\n\nfunction convertTransformForColumbusView(camera) {\n  _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].basisTo2D */ .Z.basisTo2D(\n    camera._projection,\n    camera._transform,\n    camera._actualTransform\n  );\n}\n\nvar scratchCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar scratchCartesian3Projection = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchCartesian3 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchCartesian4Origin = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchCartesian4NewOrigin = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchCartesian4NewXAxis = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchCartesian4NewYAxis = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchCartesian4NewZAxis = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n\nfunction convertTransformFor2D(camera) {\n  var projection = camera._projection;\n  var ellipsoid = projection.ellipsoid;\n\n  var origin = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].getColumn */ .Z.getColumn(camera._transform, 3, scratchCartesian4Origin);\n  var cartographic = ellipsoid.cartesianToCartographic(\n    origin,\n    scratchCartographic\n  );\n\n  var projectedPosition = projection.project(\n    cartographic,\n    scratchCartesian3Projection\n  );\n  var newOrigin = scratchCartesian4NewOrigin;\n  newOrigin.x = projectedPosition.z;\n  newOrigin.y = projectedPosition.x;\n  newOrigin.z = projectedPosition.y;\n  newOrigin.w = 1.0;\n\n  var newZAxis = _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(_Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNIT_X */ .Z.UNIT_X, scratchCartesian4NewZAxis);\n\n  var xAxis = _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].add */ .Z.add(\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].getColumn */ .Z.getColumn(camera._transform, 0, scratchCartesian3),\n    origin,\n    scratchCartesian3\n  );\n  ellipsoid.cartesianToCartographic(xAxis, cartographic);\n\n  projection.project(cartographic, projectedPosition);\n  var newXAxis = scratchCartesian4NewXAxis;\n  newXAxis.x = projectedPosition.z;\n  newXAxis.y = projectedPosition.x;\n  newXAxis.z = projectedPosition.y;\n  newXAxis.w = 0.0;\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(newXAxis, newOrigin, newXAxis);\n  newXAxis.x = 0.0;\n\n  var newYAxis = scratchCartesian4NewYAxis;\n  if (_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(newXAxis) > _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON10 */ .Z.EPSILON10) {\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(newZAxis, newXAxis, newYAxis);\n  } else {\n    var yAxis = _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].add */ .Z.add(\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].getColumn */ .Z.getColumn(camera._transform, 1, scratchCartesian3),\n      origin,\n      scratchCartesian3\n    );\n    ellipsoid.cartesianToCartographic(yAxis, cartographic);\n\n    projection.project(cartographic, projectedPosition);\n    newYAxis.x = projectedPosition.z;\n    newYAxis.y = projectedPosition.x;\n    newYAxis.z = projectedPosition.y;\n    newYAxis.w = 0.0;\n\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(newYAxis, newOrigin, newYAxis);\n    newYAxis.x = 0.0;\n\n    if (_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(newYAxis) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON10 */ .Z.EPSILON10) {\n      _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(_Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNIT_Y */ .Z.UNIT_Y, newXAxis);\n      _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].clone */ .Z.clone(_Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNIT_Z */ .Z.UNIT_Z, newYAxis);\n    }\n  }\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(newYAxis, newZAxis, newXAxis);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(newXAxis, newXAxis);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(newZAxis, newXAxis, newYAxis);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(newYAxis, newYAxis);\n\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].setColumn */ .Z.setColumn(\n    camera._actualTransform,\n    0,\n    newXAxis,\n    camera._actualTransform\n  );\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].setColumn */ .Z.setColumn(\n    camera._actualTransform,\n    1,\n    newYAxis,\n    camera._actualTransform\n  );\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].setColumn */ .Z.setColumn(\n    camera._actualTransform,\n    2,\n    newZAxis,\n    camera._actualTransform\n  );\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].setColumn */ .Z.setColumn(\n    camera._actualTransform,\n    3,\n    newOrigin,\n    camera._actualTransform\n  );\n}\n\nvar scratchCartesian = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nfunction updateMembers(camera) {\n  var mode = camera._mode;\n\n  var heightChanged = false;\n  var height = 0.0;\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    height = camera.frustum.right - camera.frustum.left;\n    heightChanged = height !== camera._positionCartographic.height;\n  }\n\n  var position = camera._position;\n  var positionChanged =\n    !_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(position, camera.position) || heightChanged;\n  if (positionChanged) {\n    position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.position, camera._position);\n  }\n\n  var direction = camera._direction;\n  var directionChanged = !_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(direction, camera.direction);\n  if (directionChanged) {\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(camera.direction, camera.direction);\n    direction = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.direction, camera._direction);\n  }\n\n  var up = camera._up;\n  var upChanged = !_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(up, camera.up);\n  if (upChanged) {\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(camera.up, camera.up);\n    up = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.up, camera._up);\n  }\n\n  var right = camera._right;\n  var rightChanged = !_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(right, camera.right);\n  if (rightChanged) {\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(camera.right, camera.right);\n    right = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.right, camera._right);\n  }\n\n  var transformChanged = camera._transformChanged || camera._modeChanged;\n  camera._transformChanged = false;\n\n  if (transformChanged) {\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].inverseTransformation */ .Z.inverseTransformation(camera._transform, camera._invTransform);\n\n    if (\n      camera._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW ||\n      camera._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D\n    ) {\n      if (_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].equals */ .Z.equals(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY, camera._transform)) {\n        _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(Camera.TRANSFORM_2D, camera._actualTransform);\n      } else if (camera._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n        convertTransformForColumbusView(camera);\n      } else {\n        convertTransformFor2D(camera);\n      }\n    } else {\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(camera._transform, camera._actualTransform);\n    }\n\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].inverseTransformation */ .Z.inverseTransformation(\n      camera._actualTransform,\n      camera._actualInvTransform\n    );\n\n    camera._modeChanged = false;\n  }\n\n  var transform = camera._actualTransform;\n\n  if (positionChanged || transformChanged) {\n    camera._positionWC = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(\n      transform,\n      position,\n      camera._positionWC\n    );\n\n    // Compute the Cartographic position of the camera.\n    if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D || mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n      camera._positionCartographic = camera._projection.ellipsoid.cartesianToCartographic(\n        camera._positionWC,\n        camera._positionCartographic\n      );\n    } else {\n      // The camera position is expressed in the 2D coordinate system where the Y axis is to the East,\n      // the Z axis is to the North, and the X axis is out of the map.  Express them instead in the ENU axes where\n      // X is to the East, Y is to the North, and Z is out of the local horizontal plane.\n      var positionENU = scratchCartesian;\n      positionENU.x = camera._positionWC.y;\n      positionENU.y = camera._positionWC.z;\n      positionENU.z = camera._positionWC.x;\n\n      // In 2D, the camera height is always 12.7 million meters.\n      // The apparent height is equal to half the frustum width.\n      if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n        positionENU.z = height;\n      }\n\n      camera._projection.unproject(positionENU, camera._positionCartographic);\n    }\n  }\n\n  if (directionChanged || upChanged || rightChanged) {\n    var det = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(\n      direction,\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(up, right, scratchCartesian)\n    );\n    if (Math.abs(1.0 - det) > _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON2 */ .Z.EPSILON2) {\n      //orthonormalize axes\n      var invUpMag = 1.0 / _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(up);\n      var scalar = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(up, direction) * invUpMag;\n      var w0 = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(direction, scalar, scratchCartesian);\n      up = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(up, w0, camera._up),\n        camera._up\n      );\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(up, camera.up);\n\n      right = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(direction, up, camera._right);\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(right, camera.right);\n    }\n  }\n\n  if (directionChanged || transformChanged) {\n    camera._directionWC = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(\n      transform,\n      direction,\n      camera._directionWC\n    );\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(camera._directionWC, camera._directionWC);\n  }\n\n  if (upChanged || transformChanged) {\n    camera._upWC = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(transform, up, camera._upWC);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(camera._upWC, camera._upWC);\n  }\n\n  if (rightChanged || transformChanged) {\n    camera._rightWC = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(\n      transform,\n      right,\n      camera._rightWC\n    );\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(camera._rightWC, camera._rightWC);\n  }\n\n  if (\n    positionChanged ||\n    directionChanged ||\n    upChanged ||\n    rightChanged ||\n    transformChanged\n  ) {\n    updateViewMatrix(camera);\n  }\n}\n\nfunction getHeading(direction, up) {\n  var heading;\n  if (\n    !_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(Math.abs(direction.z), 1.0, _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON3 */ .Z.EPSILON3)\n  ) {\n    heading = Math.atan2(direction.y, direction.x) - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n  } else {\n    heading = Math.atan2(up.y, up.x) - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n  }\n\n  return _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TWO_PI */ .Z.TWO_PI - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].zeroToTwoPi */ .Z.zeroToTwoPi(heading);\n}\n\nfunction getPitch(direction) {\n  return _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].acosClamped */ .Z.acosClamped(direction.z);\n}\n\nfunction getRoll(direction, up, right) {\n  var roll = 0.0;\n  if (\n    !_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(Math.abs(direction.z), 1.0, _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON3 */ .Z.EPSILON3)\n  ) {\n    roll = Math.atan2(-right.z, up.z);\n    roll = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].zeroToTwoPi */ .Z.zeroToTwoPi(roll + _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TWO_PI */ .Z.TWO_PI);\n  }\n\n  return roll;\n}\n\nvar scratchHPRMatrix1 = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\nvar scratchHPRMatrix2 = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\n\nObject.defineProperties(Camera.prototype, {\n  /**\n   * Gets the camera\'s reference frame. The inverse of this transformation is appended to the view matrix.\n   * @memberof Camera.prototype\n   *\n   * @type {Matrix4}\n   * @readonly\n   *\n   * @default {@link Matrix4.IDENTITY}\n   */\n  transform: {\n    get: function () {\n      return this._transform;\n    },\n  },\n\n  /**\n   * Gets the inverse camera transform.\n   * @memberof Camera.prototype\n   *\n   * @type {Matrix4}\n   * @readonly\n   *\n   * @default {@link Matrix4.IDENTITY}\n   */\n  inverseTransform: {\n    get: function () {\n      updateMembers(this);\n      return this._invTransform;\n    },\n  },\n\n  /**\n   * Gets the view matrix.\n   * @memberof Camera.prototype\n   *\n   * @type {Matrix4}\n   * @readonly\n   *\n   * @see Camera#inverseViewMatrix\n   */\n  viewMatrix: {\n    get: function () {\n      updateMembers(this);\n      return this._viewMatrix;\n    },\n  },\n\n  /**\n   * Gets the inverse view matrix.\n   * @memberof Camera.prototype\n   *\n   * @type {Matrix4}\n   * @readonly\n   *\n   * @see Camera#viewMatrix\n   */\n  inverseViewMatrix: {\n    get: function () {\n      updateMembers(this);\n      return this._invViewMatrix;\n    },\n  },\n\n  /**\n   * Gets the {@link Cartographic} position of the camera, with longitude and latitude\n   * expressed in radians and height in meters.  In 2D and Columbus View, it is possible\n   * for the returned longitude and latitude to be outside the range of valid longitudes\n   * and latitudes when the camera is outside the map.\n   * @memberof Camera.prototype\n   *\n   * @type {Cartographic}\n   * @readonly\n   */\n  positionCartographic: {\n    get: function () {\n      updateMembers(this);\n      return this._positionCartographic;\n    },\n  },\n\n  /**\n   * Gets the position of the camera in world coordinates.\n   * @memberof Camera.prototype\n   *\n   * @type {Cartesian3}\n   * @readonly\n   */\n  positionWC: {\n    get: function () {\n      updateMembers(this);\n      return this._positionWC;\n    },\n  },\n\n  /**\n   * Gets the view direction of the camera in world coordinates.\n   * @memberof Camera.prototype\n   *\n   * @type {Cartesian3}\n   * @readonly\n   */\n  directionWC: {\n    get: function () {\n      updateMembers(this);\n      return this._directionWC;\n    },\n  },\n\n  /**\n   * Gets the up direction of the camera in world coordinates.\n   * @memberof Camera.prototype\n   *\n   * @type {Cartesian3}\n   * @readonly\n   */\n  upWC: {\n    get: function () {\n      updateMembers(this);\n      return this._upWC;\n    },\n  },\n\n  /**\n   * Gets the right direction of the camera in world coordinates.\n   * @memberof Camera.prototype\n   *\n   * @type {Cartesian3}\n   * @readonly\n   */\n  rightWC: {\n    get: function () {\n      updateMembers(this);\n      return this._rightWC;\n    },\n  },\n\n  /**\n   * Gets the camera heading in radians.\n   * @memberof Camera.prototype\n   *\n   * @type {Number}\n   * @readonly\n   */\n  heading: {\n    get: function () {\n      if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n        var ellipsoid = this._projection.ellipsoid;\n\n        var oldTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(this._transform, scratchHPRMatrix1);\n        var transform = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n          this.positionWC,\n          ellipsoid,\n          scratchHPRMatrix2\n        );\n        this._setTransform(transform);\n\n        var heading = getHeading(this.direction, this.up);\n\n        this._setTransform(oldTransform);\n\n        return heading;\n      }\n\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets the camera pitch in radians.\n   * @memberof Camera.prototype\n   *\n   * @type {Number}\n   * @readonly\n   */\n  pitch: {\n    get: function () {\n      if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n        var ellipsoid = this._projection.ellipsoid;\n\n        var oldTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(this._transform, scratchHPRMatrix1);\n        var transform = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n          this.positionWC,\n          ellipsoid,\n          scratchHPRMatrix2\n        );\n        this._setTransform(transform);\n\n        var pitch = getPitch(this.direction);\n\n        this._setTransform(oldTransform);\n\n        return pitch;\n      }\n\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets the camera roll in radians.\n   * @memberof Camera.prototype\n   *\n   * @type {Number}\n   * @readonly\n   */\n  roll: {\n    get: function () {\n      if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n        var ellipsoid = this._projection.ellipsoid;\n\n        var oldTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(this._transform, scratchHPRMatrix1);\n        var transform = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n          this.positionWC,\n          ellipsoid,\n          scratchHPRMatrix2\n        );\n        this._setTransform(transform);\n\n        var roll = getRoll(this.direction, this.up, this.right);\n\n        this._setTransform(oldTransform);\n\n        return roll;\n      }\n\n      return undefined;\n    },\n  },\n\n  /**\n   * Gets the event that will be raised at when the camera starts to move.\n   * @memberof Camera.prototype\n   * @type {Event}\n   * @readonly\n   */\n  moveStart: {\n    get: function () {\n      return this._moveStart;\n    },\n  },\n\n  /**\n   * Gets the event that will be raised when the camera has stopped moving.\n   * @memberof Camera.prototype\n   * @type {Event}\n   * @readonly\n   */\n  moveEnd: {\n    get: function () {\n      return this._moveEnd;\n    },\n  },\n\n  /**\n   * Gets the event that will be raised when the camera has changed by <code>percentageChanged</code>.\n   * @memberof Camera.prototype\n   * @type {Event}\n   * @readonly\n   */\n  changed: {\n    get: function () {\n      return this._changed;\n    },\n  },\n});\n\n/**\n * @private\n */\nCamera.prototype.update = function (mode) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(mode)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("mode is required.");\n  }\n  if (\n    mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D &&\n    !(this.frustum instanceof _Core_OrthographicOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "An OrthographicOffCenterFrustum is required in 2D."\n    );\n  }\n  if (\n    (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D || mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) &&\n    !(this.frustum instanceof _Core_PerspectiveFrustum_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z) &&\n    !(this.frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "A PerspectiveFrustum or OrthographicFrustum is required in 3D and Columbus view"\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var updateFrustum = false;\n  if (mode !== this._mode) {\n    this._mode = mode;\n    this._modeChanged = mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING;\n    updateFrustum = this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D;\n  }\n\n  if (updateFrustum) {\n    var frustum = (this._max2Dfrustum = this.frustum.clone());\n\n    //>>includeStart(\'debug\', pragmas.debug);\n    if (!(frustum instanceof _Core_OrthographicOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z)) {\n      throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n        "The camera frustum is expected to be orthographic for 2D camera control."\n      );\n    }\n    //>>includeEnd(\'debug\');\n\n    var maxZoomOut = 2.0;\n    var ratio = frustum.top / frustum.right;\n    frustum.right = this._maxCoord.x * maxZoomOut;\n    frustum.left = -frustum.right;\n    frustum.top = ratio * frustum.right;\n    frustum.bottom = -frustum.top;\n  }\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    clampMove2D(this, this.position);\n  }\n};\n\nvar setTransformPosition = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar setTransformUp = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar setTransformDirection = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nCamera.prototype._setTransform = function (transform) {\n  var position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(this.positionWC, setTransformPosition);\n  var up = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(this.upWC, setTransformUp);\n  var direction = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(this.directionWC, setTransformDirection);\n\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(transform, this._transform);\n  this._transformChanged = true;\n  updateMembers(this);\n  var inverse = this._actualInvTransform;\n\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(inverse, position, this.position);\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(inverse, direction, this.direction);\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(inverse, up, this.up);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(this.direction, this.up, this.right);\n\n  updateMembers(this);\n};\n\nvar scratchAdjustOrthographicFrustumMousePosition = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchPickRay = new _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z();\nvar scratchRayIntersection = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchDepthIntersection = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nfunction calculateOrthographicFrustumWidth(camera) {\n  // Camera is fixed to an object, so keep frustum width constant.\n  if (!_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].equals */ .Z.equals(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY, camera.transform)) {\n    return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(camera.position);\n  }\n\n  var scene = camera._scene;\n  var globe = scene.globe;\n\n  var mousePosition = scratchAdjustOrthographicFrustumMousePosition;\n  mousePosition.x = scene.drawingBufferWidth / 2.0;\n  mousePosition.y = scene.drawingBufferHeight / 2.0;\n\n  var rayIntersection;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(globe)) {\n    var ray = camera.getPickRay(mousePosition, scratchPickRay);\n    rayIntersection = globe.pickWorldCoordinates(\n      ray,\n      scene,\n      true,\n      scratchRayIntersection\n    );\n  }\n\n  var depthIntersection;\n  if (scene.pickPositionSupported) {\n    depthIntersection = scene.pickPositionWorldCoordinates(\n      mousePosition,\n      scratchDepthIntersection\n    );\n  }\n\n  var distance;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(rayIntersection) || (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(depthIntersection)) {\n    var depthDistance = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(depthIntersection)\n      ? _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].distance */ .Z.distance(depthIntersection, camera.positionWC)\n      : Number.POSITIVE_INFINITY;\n    var rayDistance = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(rayIntersection)\n      ? _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].distance */ .Z.distance(rayIntersection, camera.positionWC)\n      : Number.POSITIVE_INFINITY;\n    distance = Math.min(depthDistance, rayDistance);\n  } else {\n    distance = Math.max(camera.positionCartographic.height, 0.0);\n  }\n  return distance;\n}\n\nCamera.prototype._adjustOrthographicFrustum = function (zooming) {\n  if (!(this.frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z)) {\n    return;\n  }\n\n  if (!zooming && this._positionCartographic.height < 150000.0) {\n    return;\n  }\n\n  this.frustum.width = calculateOrthographicFrustumWidth(this);\n};\n\nvar scratchSetViewCartesian = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchSetViewTransform1 = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\nvar scratchSetViewTransform2 = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\nvar scratchSetViewQuaternion = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z();\nvar scratchSetViewMatrix3 = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\nvar scratchSetViewCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\nfunction setView3D(camera, position, hpr) {\n  var currentTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(\n    camera.transform,\n    scratchSetViewTransform1\n  );\n  var localTransform = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n    position,\n    camera._projection.ellipsoid,\n    scratchSetViewTransform2\n  );\n  camera._setTransform(localTransform);\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO, camera.position);\n  hpr.heading = hpr.heading - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n\n  var rotQuat = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromHeadingPitchRoll */ .Z.fromHeadingPitchRoll(hpr, scratchSetViewQuaternion);\n  var rotMat = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromQuaternion */ .Z.fromQuaternion(rotQuat, scratchSetViewMatrix3);\n\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].getColumn */ .Z.getColumn(rotMat, 0, camera.direction);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].getColumn */ .Z.getColumn(rotMat, 2, camera.up);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(camera.direction, camera.up, camera.right);\n\n  camera._setTransform(currentTransform);\n\n  camera._adjustOrthographicFrustum(true);\n}\n\nfunction setViewCV(camera, position, hpr, convert) {\n  var currentTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(\n    camera.transform,\n    scratchSetViewTransform1\n  );\n  camera._setTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n  if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(position, camera.positionWC)) {\n    if (convert) {\n      var projection = camera._projection;\n      var cartographic = projection.ellipsoid.cartesianToCartographic(\n        position,\n        scratchSetViewCartographic\n      );\n      position = projection.project(cartographic, scratchSetViewCartesian);\n    }\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(position, camera.position);\n  }\n  hpr.heading = hpr.heading - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n\n  var rotQuat = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromHeadingPitchRoll */ .Z.fromHeadingPitchRoll(hpr, scratchSetViewQuaternion);\n  var rotMat = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromQuaternion */ .Z.fromQuaternion(rotQuat, scratchSetViewMatrix3);\n\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].getColumn */ .Z.getColumn(rotMat, 0, camera.direction);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].getColumn */ .Z.getColumn(rotMat, 2, camera.up);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(camera.direction, camera.up, camera.right);\n\n  camera._setTransform(currentTransform);\n\n  camera._adjustOrthographicFrustum(true);\n}\n\nfunction setView2D(camera, position, hpr, convert) {\n  var currentTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(\n    camera.transform,\n    scratchSetViewTransform1\n  );\n  camera._setTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n  if (!_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equals */ .Z.equals(position, camera.positionWC)) {\n    if (convert) {\n      var projection = camera._projection;\n      var cartographic = projection.ellipsoid.cartesianToCartographic(\n        position,\n        scratchSetViewCartographic\n      );\n      position = projection.project(cartographic, scratchSetViewCartesian);\n    }\n\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(position, camera.position);\n\n    var newLeft = -position.z * 0.5;\n    var newRight = -newLeft;\n\n    var frustum = camera.frustum;\n    if (newRight > newLeft) {\n      var ratio = frustum.top / frustum.right;\n      frustum.right = newRight;\n      frustum.left = newLeft;\n      frustum.top = frustum.right * ratio;\n      frustum.bottom = -frustum.top;\n    }\n  }\n\n  if (camera._scene.mapMode2D === _MapMode2D_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].ROTATE */ .Z.ROTATE) {\n    hpr.heading = hpr.heading - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n    hpr.pitch = -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n    hpr.roll = 0.0;\n    var rotQuat = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromHeadingPitchRoll */ .Z.fromHeadingPitchRoll(\n      hpr,\n      scratchSetViewQuaternion\n    );\n    var rotMat = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromQuaternion */ .Z.fromQuaternion(rotQuat, scratchSetViewMatrix3);\n\n    _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].getColumn */ .Z.getColumn(rotMat, 2, camera.up);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(camera.direction, camera.up, camera.right);\n  }\n\n  camera._setTransform(currentTransform);\n}\n\nvar scratchToHPRDirection = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchToHPRUp = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchToHPRRight = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nfunction directionUpToHeadingPitchRoll(camera, position, orientation, result) {\n  var direction = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n    orientation.direction,\n    scratchToHPRDirection\n  );\n  var up = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(orientation.up, scratchToHPRUp);\n\n  if (camera._scene.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    var ellipsoid = camera._projection.ellipsoid;\n    var transform = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n      position,\n      ellipsoid,\n      scratchHPRMatrix1\n    );\n    var invTransform = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].inverseTransformation */ .Z.inverseTransformation(\n      transform,\n      scratchHPRMatrix2\n    );\n\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(invTransform, direction, direction);\n    _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(invTransform, up, up);\n  }\n\n  var right = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(direction, up, scratchToHPRRight);\n\n  result.heading = getHeading(direction, up);\n  result.pitch = getPitch(direction);\n  result.roll = getRoll(direction, up, right);\n\n  return result;\n}\n\nvar scratchSetViewOptions = {\n  destination: undefined,\n  orientation: {\n    direction: undefined,\n    up: undefined,\n    heading: undefined,\n    pitch: undefined,\n    roll: undefined,\n  },\n  convert: undefined,\n  endTransform: undefined,\n};\n\nvar scratchHpr = new _Core_HeadingPitchRoll_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z();\n/**\n * Sets the camera position, orientation and transform.\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3|Rectangle} [options.destination] The final position of the camera in WGS84 (world) coordinates or a rectangle that would be visible from a top-down view.\n * @param {Object} [options.orientation] An object that contains either direction and up properties or heading, pitch and roll properties. By default, the direction will point\n * towards the center of the frame in 3D and in the negative z direction in Columbus view. The up direction will point towards local north in 3D and in the positive\n * y direction in Columbus view. Orientation is not used in 2D when in infinite scrolling mode.\n * @param {Matrix4} [options.endTransform] Transform matrix representing the reference frame of the camera.\n * @param {Boolean} [options.convert] Whether to convert the destination from world coordinates to scene coordinates (only relevant when not using 3D). Defaults to <code>true</code>.\n *\n * @example\n * // 1. Set position with a top-down view\n * viewer.camera.setView({\n *     destination : Cesium.Cartesian3.fromDegrees(-117.16, 32.71, 15000.0)\n * });\n *\n * // 2 Set view with heading, pitch and roll\n * viewer.camera.setView({\n *     destination : cartesianPosition,\n *     orientation: {\n *         heading : Cesium.Math.toRadians(90.0), // east, default value is 0.0 (north)\n *         pitch : Cesium.Math.toRadians(-90),    // default value (looking down)\n *         roll : 0.0                             // default value\n *     }\n * });\n *\n * // 3. Change heading, pitch and roll with the camera position remaining the same.\n * viewer.camera.setView({\n *     orientation: {\n *         heading : Cesium.Math.toRadians(90.0), // east, default value is 0.0 (north)\n *         pitch : Cesium.Math.toRadians(-90),    // default value (looking down)\n *         roll : 0.0                             // default value\n *     }\n * });\n *\n *\n * // 4. View rectangle with a top-down view\n * viewer.camera.setView({\n *     destination : Cesium.Rectangle.fromDegrees(west, south, east, north)\n * });\n *\n * // 5. Set position with an orientation using unit vectors.\n * viewer.camera.setView({\n *     destination : Cesium.Cartesian3.fromDegrees(-122.19, 46.25, 5000.0),\n *     orientation : {\n *         direction : new Cesium.Cartesian3(-0.04231243104240401, -0.20123236049443421, -0.97862924300734),\n *         up : new Cesium.Cartesian3(-0.47934589305293746, -0.8553216253114552, 0.1966022179118339)\n *     }\n * });\n */\nCamera.prototype.setView = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var orientation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.orientation,\n    _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT\n  );\n\n  var mode = this._mode;\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n    return;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(options.endTransform)) {\n    this._setTransform(options.endTransform);\n  }\n\n  var convert = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options.convert, true);\n  var destination = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.destination,\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(this.positionWC, scratchSetViewCartesian)\n  );\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(destination) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(destination.west)) {\n    destination = this.getRectangleCameraCoordinates(\n      destination,\n      scratchSetViewCartesian\n    );\n    convert = false;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(orientation.direction)) {\n    orientation = directionUpToHeadingPitchRoll(\n      this,\n      destination,\n      orientation,\n      scratchSetViewOptions.orientation\n    );\n  }\n\n  scratchHpr.heading = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(orientation.heading, 0.0);\n  scratchHpr.pitch = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(orientation.pitch, -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO);\n  scratchHpr.roll = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(orientation.roll, 0.0);\n\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    setView3D(this, destination, scratchHpr);\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    setView2D(this, destination, scratchHpr, convert);\n  } else {\n    setViewCV(this, destination, scratchHpr, convert);\n  }\n};\n\nvar pitchScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n/**\n * Fly the camera to the home view.  Use {@link Camera#.DEFAULT_VIEW_RECTANGLE} to set\n * the default view for the 3D scene.  The home view for 2D and columbus view shows the\n * entire map.\n *\n * @param {Number} [duration] The duration of the flight in seconds. If omitted, Cesium attempts to calculate an ideal duration based on the distance to be traveled by the flight. See {@link Camera#flyTo}\n */\nCamera.prototype.flyHome = function (duration) {\n  var mode = this._mode;\n\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n    this._scene.completeMorph();\n  }\n\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    this.flyTo({\n      destination: Camera.DEFAULT_VIEW_RECTANGLE,\n      duration: duration,\n      endTransform: _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY,\n    });\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    var destination = this.getRectangleCameraCoordinates(\n      Camera.DEFAULT_VIEW_RECTANGLE\n    );\n\n    var mag = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(destination);\n    mag += mag * Camera.DEFAULT_VIEW_FACTOR;\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(destination, destination);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(destination, mag, destination);\n\n    this.flyTo({\n      destination: destination,\n      duration: duration,\n      endTransform: _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY,\n    });\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    var maxRadii = this._projection.ellipsoid.maximumRadius;\n    var position = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(0.0, -1.0, 1.0);\n    position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(position, position),\n      5.0 * maxRadii,\n      position\n    );\n    this.flyTo({\n      destination: position,\n      duration: duration,\n      orientation: {\n        heading: 0.0,\n        pitch: -Math.acos(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(position, pitchScratch).z),\n        roll: 0.0,\n      },\n      endTransform: _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY,\n      convert: false,\n    });\n  }\n};\n\n/**\n * Transform a vector or point from world coordinates to the camera\'s reference frame.\n *\n * @param {Cartesian4} cartesian The vector or point to transform.\n * @param {Cartesian4} [result] The object onto which to store the result.\n * @returns {Cartesian4} The transformed vector or point.\n */\nCamera.prototype.worldToCameraCoordinates = function (cartesian, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cartesian)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("cartesian is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n  }\n  updateMembers(this);\n  return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByVector */ .Z.multiplyByVector(this._actualInvTransform, cartesian, result);\n};\n\n/**\n * Transform a point from world coordinates to the camera\'s reference frame.\n *\n * @param {Cartesian3} cartesian The point to transform.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3} The transformed point.\n */\nCamera.prototype.worldToCameraCoordinatesPoint = function (cartesian, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cartesian)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("cartesian is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  }\n  updateMembers(this);\n  return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(this._actualInvTransform, cartesian, result);\n};\n\n/**\n * Transform a vector from world coordinates to the camera\'s reference frame.\n *\n * @param {Cartesian3} cartesian The vector to transform.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3} The transformed vector.\n */\nCamera.prototype.worldToCameraCoordinatesVector = function (cartesian, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cartesian)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("cartesian is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  }\n  updateMembers(this);\n  return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(\n    this._actualInvTransform,\n    cartesian,\n    result\n  );\n};\n\n/**\n * Transform a vector or point from the camera\'s reference frame to world coordinates.\n *\n * @param {Cartesian4} cartesian The vector or point to transform.\n * @param {Cartesian4} [result] The object onto which to store the result.\n * @returns {Cartesian4} The transformed vector or point.\n */\nCamera.prototype.cameraToWorldCoordinates = function (cartesian, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cartesian)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("cartesian is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\n  }\n  updateMembers(this);\n  return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByVector */ .Z.multiplyByVector(this._actualTransform, cartesian, result);\n};\n\n/**\n * Transform a point from the camera\'s reference frame to world coordinates.\n *\n * @param {Cartesian3} cartesian The point to transform.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3} The transformed point.\n */\nCamera.prototype.cameraToWorldCoordinatesPoint = function (cartesian, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cartesian)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("cartesian is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  }\n  updateMembers(this);\n  return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(this._actualTransform, cartesian, result);\n};\n\n/**\n * Transform a vector from the camera\'s reference frame to world coordinates.\n *\n * @param {Cartesian3} cartesian The vector to transform.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3} The transformed vector.\n */\nCamera.prototype.cameraToWorldCoordinatesVector = function (cartesian, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(cartesian)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("cartesian is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  }\n  updateMembers(this);\n  return _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(\n    this._actualTransform,\n    cartesian,\n    result\n  );\n};\n\nfunction clampMove2D(camera, position) {\n  var rotatable2D = camera._scene.mapMode2D === _MapMode2D_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].ROTATE */ .Z.ROTATE;\n  var maxProjectedX = camera._maxCoord.x;\n  var maxProjectedY = camera._maxCoord.y;\n\n  var minX;\n  var maxX;\n  if (rotatable2D) {\n    maxX = maxProjectedX;\n    minX = -maxX;\n  } else {\n    maxX = position.x - maxProjectedX * 2.0;\n    minX = position.x + maxProjectedX * 2.0;\n  }\n\n  if (position.x > maxProjectedX) {\n    position.x = maxX;\n  }\n  if (position.x < -maxProjectedX) {\n    position.x = minX;\n  }\n\n  if (position.y > maxProjectedY) {\n    position.y = maxProjectedY;\n  }\n  if (position.y < -maxProjectedY) {\n    position.y = -maxProjectedY;\n  }\n}\n\nvar moveScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n/**\n * Translates the camera\'s position by <code>amount</code> along <code>direction</code>.\n *\n * @param {Cartesian3} direction The direction to move.\n * @param {Number} [amount] The amount, in meters, to move. Defaults to <code>defaultMoveAmount</code>.\n *\n * @see Camera#moveBackward\n * @see Camera#moveForward\n * @see Camera#moveLeft\n * @see Camera#moveRight\n * @see Camera#moveUp\n * @see Camera#moveDown\n */\nCamera.prototype.move = function (direction, amount) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(direction)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("direction is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var cameraPosition = this.position;\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(direction, amount, moveScratch);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(cameraPosition, moveScratch, cameraPosition);\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    clampMove2D(this, cameraPosition);\n  }\n  this._adjustOrthographicFrustum(true);\n};\n\n/**\n * Translates the camera\'s position by <code>amount</code> along the camera\'s view vector.\n * When in 2D mode, this will zoom in the camera instead of translating the camera\'s position.\n *\n * @param {Number} [amount] The amount, in meters, to move. Defaults to <code>defaultMoveAmount</code>.\n *\n * @see Camera#moveBackward\n */\nCamera.prototype.moveForward = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultMoveAmount);\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    // 2D mode\n    zoom2D(this, amount);\n  } else {\n    // 3D or Columbus view mode\n    this.move(this.direction, amount);\n  }\n};\n\n/**\n * Translates the camera\'s position by <code>amount</code> along the opposite direction\n * of the camera\'s view vector.\n * When in 2D mode, this will zoom out the camera instead of translating the camera\'s position.\n *\n * @param {Number} [amount] The amount, in meters, to move. Defaults to <code>defaultMoveAmount</code>.\n *\n * @see Camera#moveForward\n */\nCamera.prototype.moveBackward = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultMoveAmount);\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    // 2D mode\n    zoom2D(this, -amount);\n  } else {\n    // 3D or Columbus view mode\n    this.move(this.direction, -amount);\n  }\n};\n\n/**\n * Translates the camera\'s position by <code>amount</code> along the camera\'s up vector.\n *\n * @param {Number} [amount] The amount, in meters, to move. Defaults to <code>defaultMoveAmount</code>.\n *\n * @see Camera#moveDown\n */\nCamera.prototype.moveUp = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultMoveAmount);\n  this.move(this.up, amount);\n};\n\n/**\n * Translates the camera\'s position by <code>amount</code> along the opposite direction\n * of the camera\'s up vector.\n *\n * @param {Number} [amount] The amount, in meters, to move. Defaults to <code>defaultMoveAmount</code>.\n *\n * @see Camera#moveUp\n */\nCamera.prototype.moveDown = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultMoveAmount);\n  this.move(this.up, -amount);\n};\n\n/**\n * Translates the camera\'s position by <code>amount</code> along the camera\'s right vector.\n *\n * @param {Number} [amount] The amount, in meters, to move. Defaults to <code>defaultMoveAmount</code>.\n *\n * @see Camera#moveLeft\n */\nCamera.prototype.moveRight = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultMoveAmount);\n  this.move(this.right, amount);\n};\n\n/**\n * Translates the camera\'s position by <code>amount</code> along the opposite direction\n * of the camera\'s right vector.\n *\n * @param {Number} [amount] The amount, in meters, to move. Defaults to <code>defaultMoveAmount</code>.\n *\n * @see Camera#moveRight\n */\nCamera.prototype.moveLeft = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultMoveAmount);\n  this.move(this.right, -amount);\n};\n\n/**\n * Rotates the camera around its up vector by amount, in radians, in the opposite direction\n * of its right vector if not in 2D mode.\n *\n * @param {Number} [amount] The amount, in radians, to rotate by. Defaults to <code>defaultLookAmount</code>.\n *\n * @see Camera#lookRight\n */\nCamera.prototype.lookLeft = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultLookAmount);\n\n  // only want view of map to change in 3D mode, 2D visual is incorrect when look changes\n  if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    this.look(this.up, -amount);\n  }\n};\n\n/**\n * Rotates the camera around its up vector by amount, in radians, in the direction\n * of its right vector if not in 2D mode.\n *\n * @param {Number} [amount] The amount, in radians, to rotate by. Defaults to <code>defaultLookAmount</code>.\n *\n * @see Camera#lookLeft\n */\nCamera.prototype.lookRight = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultLookAmount);\n\n  // only want view of map to change in 3D mode, 2D visual is incorrect when look changes\n  if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    this.look(this.up, amount);\n  }\n};\n\n/**\n * Rotates the camera around its right vector by amount, in radians, in the direction\n * of its up vector if not in 2D mode.\n *\n * @param {Number} [amount] The amount, in radians, to rotate by. Defaults to <code>defaultLookAmount</code>.\n *\n * @see Camera#lookDown\n */\nCamera.prototype.lookUp = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultLookAmount);\n\n  // only want view of map to change in 3D mode, 2D visual is incorrect when look changes\n  if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    this.look(this.right, -amount);\n  }\n};\n\n/**\n * Rotates the camera around its right vector by amount, in radians, in the opposite direction\n * of its up vector if not in 2D mode.\n *\n * @param {Number} [amount] The amount, in radians, to rotate by. Defaults to <code>defaultLookAmount</code>.\n *\n * @see Camera#lookUp\n */\nCamera.prototype.lookDown = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultLookAmount);\n\n  // only want view of map to change in 3D mode, 2D visual is incorrect when look changes\n  if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    this.look(this.right, amount);\n  }\n};\n\nvar lookScratchQuaternion = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z();\nvar lookScratchMatrix = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\n/**\n * Rotate each of the camera\'s orientation vectors around <code>axis</code> by <code>angle</code>\n *\n * @param {Cartesian3} axis The axis to rotate around.\n * @param {Number} [angle] The angle, in radians, to rotate by. Defaults to <code>defaultLookAmount</code>.\n *\n * @see Camera#lookUp\n * @see Camera#lookDown\n * @see Camera#lookLeft\n * @see Camera#lookRight\n */\nCamera.prototype.look = function (axis, angle) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(axis)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("axis is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var turnAngle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(angle, this.defaultLookAmount);\n  var quaternion = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n    axis,\n    -turnAngle,\n    lookScratchQuaternion\n  );\n  var rotation = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromQuaternion */ .Z.fromQuaternion(quaternion, lookScratchMatrix);\n\n  var direction = this.direction;\n  var up = this.up;\n  var right = this.right;\n\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotation, direction, direction);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotation, up, up);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotation, right, right);\n};\n\n/**\n * Rotate the camera counter-clockwise around its direction vector by amount, in radians.\n *\n * @param {Number} [amount] The amount, in radians, to rotate by. Defaults to <code>defaultLookAmount</code>.\n *\n * @see Camera#twistRight\n */\nCamera.prototype.twistLeft = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultLookAmount);\n  this.look(this.direction, amount);\n};\n\n/**\n * Rotate the camera clockwise around its direction vector by amount, in radians.\n *\n * @param {Number} [amount] The amount, in radians, to rotate by. Defaults to <code>defaultLookAmount</code>.\n *\n * @see Camera#twistLeft\n */\nCamera.prototype.twistRight = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultLookAmount);\n  this.look(this.direction, -amount);\n};\n\nvar rotateScratchQuaternion = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z();\nvar rotateScratchMatrix = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\n/**\n * Rotates the camera around <code>axis</code> by <code>angle</code>. The distance\n * of the camera\'s position to the center of the camera\'s reference frame remains the same.\n *\n * @param {Cartesian3} axis The axis to rotate around given in world coordinates.\n * @param {Number} [angle] The angle, in radians, to rotate by. Defaults to <code>defaultRotateAmount</code>.\n *\n * @see Camera#rotateUp\n * @see Camera#rotateDown\n * @see Camera#rotateLeft\n * @see Camera#rotateRight\n */\nCamera.prototype.rotate = function (axis, angle) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(axis)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("axis is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var turnAngle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(angle, this.defaultRotateAmount);\n  var quaternion = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n    axis,\n    -turnAngle,\n    rotateScratchQuaternion\n  );\n  var rotation = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromQuaternion */ .Z.fromQuaternion(quaternion, rotateScratchMatrix);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotation, this.position, this.position);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotation, this.direction, this.direction);\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotation, this.up, this.up);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(this.direction, this.up, this.right);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(this.right, this.direction, this.up);\n\n  this._adjustOrthographicFrustum(false);\n};\n\n/**\n * Rotates the camera around the center of the camera\'s reference frame by angle downwards.\n *\n * @param {Number} [angle] The angle, in radians, to rotate by. Defaults to <code>defaultRotateAmount</code>.\n *\n * @see Camera#rotateUp\n * @see Camera#rotate\n */\nCamera.prototype.rotateDown = function (angle) {\n  angle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(angle, this.defaultRotateAmount);\n  rotateVertical(this, angle);\n};\n\n/**\n * Rotates the camera around the center of the camera\'s reference frame by angle upwards.\n *\n * @param {Number} [angle] The angle, in radians, to rotate by. Defaults to <code>defaultRotateAmount</code>.\n *\n * @see Camera#rotateDown\n * @see Camera#rotate\n */\nCamera.prototype.rotateUp = function (angle) {\n  angle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(angle, this.defaultRotateAmount);\n  rotateVertical(this, -angle);\n};\n\nvar rotateVertScratchP = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar rotateVertScratchA = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar rotateVertScratchTan = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar rotateVertScratchNegate = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nfunction rotateVertical(camera, angle) {\n  var position = camera.position;\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(camera.constrainedAxis) &&\n    !_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      camera.position,\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON2 */ .Z.EPSILON2\n    )\n  ) {\n    var p = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(position, rotateVertScratchP);\n    var northParallel = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      p,\n      camera.constrainedAxis,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON2 */ .Z.EPSILON2\n    );\n    var southParallel = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      p,\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].negate */ .Z.negate(camera.constrainedAxis, rotateVertScratchNegate),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON2 */ .Z.EPSILON2\n    );\n    if (!northParallel && !southParallel) {\n      var constrainedAxis = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(\n        camera.constrainedAxis,\n        rotateVertScratchA\n      );\n\n      var dot = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(p, constrainedAxis);\n      var angleToAxis = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].acosClamped */ .Z.acosClamped(dot);\n      if (angle > 0 && angle > angleToAxis) {\n        angle = angleToAxis - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON4 */ .Z.EPSILON4;\n      }\n\n      dot = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(\n        p,\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].negate */ .Z.negate(constrainedAxis, rotateVertScratchNegate)\n      );\n      angleToAxis = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].acosClamped */ .Z.acosClamped(dot);\n      if (angle < 0 && -angle > angleToAxis) {\n        angle = -angleToAxis + _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON4 */ .Z.EPSILON4;\n      }\n\n      var tangent = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(constrainedAxis, p, rotateVertScratchTan);\n      camera.rotate(tangent, angle);\n    } else if ((northParallel && angle < 0) || (southParallel && angle > 0)) {\n      camera.rotate(camera.right, angle);\n    }\n  } else {\n    camera.rotate(camera.right, angle);\n  }\n}\n\n/**\n * Rotates the camera around the center of the camera\'s reference frame by angle to the right.\n *\n * @param {Number} [angle] The angle, in radians, to rotate by. Defaults to <code>defaultRotateAmount</code>.\n *\n * @see Camera#rotateLeft\n * @see Camera#rotate\n */\nCamera.prototype.rotateRight = function (angle) {\n  angle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(angle, this.defaultRotateAmount);\n  rotateHorizontal(this, -angle);\n};\n\n/**\n * Rotates the camera around the center of the camera\'s reference frame by angle to the left.\n *\n * @param {Number} [angle] The angle, in radians, to rotate by. Defaults to <code>defaultRotateAmount</code>.\n *\n * @see Camera#rotateRight\n * @see Camera#rotate\n */\nCamera.prototype.rotateLeft = function (angle) {\n  angle = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(angle, this.defaultRotateAmount);\n  rotateHorizontal(this, angle);\n};\n\nfunction rotateHorizontal(camera, angle) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(camera.constrainedAxis)) {\n    camera.rotate(camera.constrainedAxis, angle);\n  } else {\n    camera.rotate(camera.up, angle);\n  }\n}\n\nfunction zoom2D(camera, amount) {\n  var frustum = camera.frustum;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (\n    !(frustum instanceof _Core_OrthographicOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Z) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum.left) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum.right) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum.bottom) ||\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum.top)\n  ) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "The camera frustum is expected to be orthographic for 2D camera control."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var ratio;\n  amount = amount * 0.5;\n\n  if (\n    Math.abs(frustum.top) + Math.abs(frustum.bottom) >\n    Math.abs(frustum.left) + Math.abs(frustum.right)\n  ) {\n    var newTop = frustum.top - amount;\n    var newBottom = frustum.bottom + amount;\n\n    var maxBottom = camera._maxCoord.y;\n    if (camera._scene.mapMode2D === _MapMode2D_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].ROTATE */ .Z.ROTATE) {\n      maxBottom *= camera.maximumZoomFactor;\n    }\n\n    if (newBottom > maxBottom) {\n      newBottom = maxBottom;\n      newTop = -maxBottom;\n    }\n\n    if (newTop <= newBottom) {\n      newTop = 1.0;\n      newBottom = -1.0;\n    }\n\n    ratio = frustum.right / frustum.top;\n    frustum.top = newTop;\n    frustum.bottom = newBottom;\n    frustum.right = frustum.top * ratio;\n    frustum.left = -frustum.right;\n  } else {\n    var newRight = frustum.right - amount;\n    var newLeft = frustum.left + amount;\n\n    var maxRight = camera._maxCoord.x;\n    if (camera._scene.mapMode2D === _MapMode2D_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].ROTATE */ .Z.ROTATE) {\n      maxRight *= camera.maximumZoomFactor;\n    }\n\n    if (newRight > maxRight) {\n      newRight = maxRight;\n      newLeft = -maxRight;\n    }\n\n    if (newRight <= newLeft) {\n      newRight = 1.0;\n      newLeft = -1.0;\n    }\n    ratio = frustum.top / frustum.right;\n    frustum.right = newRight;\n    frustum.left = newLeft;\n    frustum.top = frustum.right * ratio;\n    frustum.bottom = -frustum.top;\n  }\n}\n\nfunction zoom3D(camera, amount) {\n  camera.move(camera.direction, amount);\n}\n\n/**\n * Zooms <code>amount</code> along the camera\'s view vector.\n *\n * @param {Number} [amount] The amount to move. Defaults to <code>defaultZoomAmount</code>.\n *\n * @see Camera#zoomOut\n */\nCamera.prototype.zoomIn = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultZoomAmount);\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    zoom2D(this, amount);\n  } else {\n    zoom3D(this, amount);\n  }\n};\n\n/**\n * Zooms <code>amount</code> along the opposite direction of\n * the camera\'s view vector.\n *\n * @param {Number} [amount] The amount to move. Defaults to <code>defaultZoomAmount</code>.\n *\n * @see Camera#zoomIn\n */\nCamera.prototype.zoomOut = function (amount) {\n  amount = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(amount, this.defaultZoomAmount);\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    zoom2D(this, -amount);\n  } else {\n    zoom3D(this, -amount);\n  }\n};\n\n/**\n * Gets the magnitude of the camera position. In 3D, this is the vector magnitude. In 2D and\n * Columbus view, this is the distance to the map.\n *\n * @returns {Number} The magnitude of the position.\n */\nCamera.prototype.getMagnitude = function () {\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(this.position);\n  } else if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    return Math.abs(this.position.z);\n  } else if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    return Math.max(\n      this.frustum.right - this.frustum.left,\n      this.frustum.top - this.frustum.bottom\n    );\n  }\n};\n\nvar scratchLookAtMatrix4 = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\n\n/**\n * Sets the camera position and orientation using a target and offset. The target must be given in\n * world coordinates. The offset can be either a cartesian or heading/pitch/range in the local east-north-up reference frame centered at the target.\n * If the offset is a cartesian, then it is an offset from the center of the reference frame defined by the transformation matrix. If the offset\n * is heading/pitch/range, then the heading and the pitch angles are defined in the reference frame defined by the transformation matrix.\n * The heading is the angle from y axis and increasing towards the x axis. Pitch is the rotation from the xy-plane. Positive pitch\n * angles are below the plane. Negative pitch angles are above the plane. The range is the distance from the center.\n *\n * In 2D, there must be a top down view. The camera will be placed above the target looking down. The height above the\n * target will be the magnitude of the offset. The heading will be determined from the offset. If the heading cannot be\n * determined from the offset, the heading will be north.\n *\n * @param {Cartesian3} target The target position in world coordinates.\n * @param {Cartesian3|HeadingPitchRange} offset The offset from the target in the local east-north-up reference frame centered at the target.\n *\n * @exception {DeveloperError} lookAt is not supported while morphing.\n *\n * @example\n * // 1. Using a cartesian offset\n * var center = Cesium.Cartesian3.fromDegrees(-98.0, 40.0);\n * viewer.camera.lookAt(center, new Cesium.Cartesian3(0.0, -4790000.0, 3930000.0));\n *\n * // 2. Using a HeadingPitchRange offset\n * var center = Cesium.Cartesian3.fromDegrees(-72.0, 40.0);\n * var heading = Cesium.Math.toRadians(50.0);\n * var pitch = Cesium.Math.toRadians(-20.0);\n * var range = 5000.0;\n * viewer.camera.lookAt(center, new Cesium.HeadingPitchRange(heading, pitch, range));\n */\nCamera.prototype.lookAt = function (target, offset) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(target)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("target is required");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(offset)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("offset is required");\n  }\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("lookAt is not supported while morphing.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var transform = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n    target,\n    _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].WGS84 */ .Z.WGS84,\n    scratchLookAtMatrix4\n  );\n  this.lookAtTransform(transform, offset);\n};\n\nvar scratchLookAtHeadingPitchRangeOffset = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchLookAtHeadingPitchRangeQuaternion1 = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z();\nvar scratchLookAtHeadingPitchRangeQuaternion2 = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z();\nvar scratchHeadingPitchRangeMatrix3 = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\n\nfunction offsetFromHeadingPitchRange(heading, pitch, range) {\n  pitch = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].clamp */ .Z.clamp(\n    pitch,\n    -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO,\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO\n  );\n  heading = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].zeroToTwoPi */ .Z.zeroToTwoPi(heading) - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n\n  var pitchQuat = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Y */ .Z.UNIT_Y,\n    -pitch,\n    scratchLookAtHeadingPitchRangeQuaternion1\n  );\n  var headingQuat = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z,\n    -heading,\n    scratchLookAtHeadingPitchRangeQuaternion2\n  );\n  var rotQuat = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].multiply */ .Z.multiply(headingQuat, pitchQuat, headingQuat);\n  var rotMatrix = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromQuaternion */ .Z.fromQuaternion(\n    rotQuat,\n    scratchHeadingPitchRangeMatrix3\n  );\n\n  var offset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_X */ .Z.UNIT_X,\n    scratchLookAtHeadingPitchRangeOffset\n  );\n  _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotMatrix, offset, offset);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].negate */ .Z.negate(offset, offset);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(offset, range, offset);\n  return offset;\n}\n\n/**\n * Sets the camera position and orientation using a target and transformation matrix. The offset can be either a cartesian or heading/pitch/range.\n * If the offset is a cartesian, then it is an offset from the center of the reference frame defined by the transformation matrix. If the offset\n * is heading/pitch/range, then the heading and the pitch angles are defined in the reference frame defined by the transformation matrix.\n * The heading is the angle from y axis and increasing towards the x axis. Pitch is the rotation from the xy-plane. Positive pitch\n * angles are below the plane. Negative pitch angles are above the plane. The range is the distance from the center.\n *\n * In 2D, there must be a top down view. The camera will be placed above the center of the reference frame. The height above the\n * target will be the magnitude of the offset. The heading will be determined from the offset. If the heading cannot be\n * determined from the offset, the heading will be north.\n *\n * @param {Matrix4} transform The transformation matrix defining the reference frame.\n * @param {Cartesian3|HeadingPitchRange} [offset] The offset from the target in a reference frame centered at the target.\n *\n * @exception {DeveloperError} lookAtTransform is not supported while morphing.\n *\n * @example\n * // 1. Using a cartesian offset\n * var transform = Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(-98.0, 40.0));\n * viewer.camera.lookAtTransform(transform, new Cesium.Cartesian3(0.0, -4790000.0, 3930000.0));\n *\n * // 2. Using a HeadingPitchRange offset\n * var transform = Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(-72.0, 40.0));\n * var heading = Cesium.Math.toRadians(50.0);\n * var pitch = Cesium.Math.toRadians(-20.0);\n * var range = 5000.0;\n * viewer.camera.lookAtTransform(transform, new Cesium.HeadingPitchRange(heading, pitch, range));\n */\nCamera.prototype.lookAtTransform = function (transform, offset) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(transform)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("transform is required");\n  }\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "lookAtTransform is not supported while morphing."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  this._setTransform(transform);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(offset)) {\n    return;\n  }\n\n  var cartesianOffset;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(offset.heading)) {\n    cartesianOffset = offsetFromHeadingPitchRange(\n      offset.heading,\n      offset.pitch,\n      offset.range\n    );\n  } else {\n    cartesianOffset = offset;\n  }\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(_Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].ZERO */ .Z.ZERO, this.position);\n\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].negate */ .Z.negate(cartesianOffset, this.up);\n    this.up.z = 0.0;\n\n    if (_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(this.up) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON10 */ .Z.EPSILON10) {\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Y */ .Z.UNIT_Y, this.up);\n    }\n\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(this.up, this.up);\n\n    this._setTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].negate */ .Z.negate(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z, this.direction);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(this.direction, this.up, this.right);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(this.right, this.right);\n\n    var frustum = this.frustum;\n    var ratio = frustum.top / frustum.right;\n    frustum.right = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(cartesianOffset) * 0.5;\n    frustum.left = -frustum.right;\n    frustum.top = ratio * frustum.right;\n    frustum.bottom = -frustum.top;\n\n    this._setTransform(transform);\n\n    return;\n  }\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(cartesianOffset, this.position);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].negate */ .Z.negate(this.position, this.direction);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(this.direction, this.direction);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(this.direction, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z, this.right);\n\n  if (_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(this.right) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON10 */ .Z.EPSILON10) {\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_X */ .Z.UNIT_X, this.right);\n  }\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(this.right, this.right);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(this.right, this.direction, this.up);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(this.up, this.up);\n\n  this._adjustOrthographicFrustum(true);\n};\n\nvar viewRectangle3DCartographic1 = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar viewRectangle3DCartographic2 = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar viewRectangle3DNorthEast = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle3DSouthWest = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle3DNorthWest = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle3DSouthEast = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle3DNorthCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle3DSouthCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle3DCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle3DEquator = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar defaultRF = {\n  direction: new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(),\n  right: new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(),\n  up: new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(),\n};\nvar viewRectangle3DEllipsoidGeodesic;\n\nfunction computeD(direction, upOrRight, corner, tanThetaOrPhi) {\n  var opposite = Math.abs(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(upOrRight, corner));\n  return opposite / tanThetaOrPhi - _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(direction, corner);\n}\n\nfunction rectangleCameraPosition3D(camera, rectangle, result, updateCamera) {\n  var ellipsoid = camera._projection.ellipsoid;\n  var cameraRF = updateCamera ? camera : defaultRF;\n\n  var north = rectangle.north;\n  var south = rectangle.south;\n  var east = rectangle.east;\n  var west = rectangle.west;\n\n  // If we go across the International Date Line\n  if (west > east) {\n    east += _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  }\n\n  // Find the midpoint latitude.\n  //\n  // EllipsoidGeodesic will fail if the north and south edges are very close to being on opposite sides of the ellipsoid.\n  // Ideally we\'d just call EllipsoidGeodesic.setEndPoints and let it throw when it detects this case, but sadly it doesn\'t\n  // even look for this case in optimized builds, so we have to test for it here instead.\n  //\n  // Fortunately, this case can only happen (here) when north is very close to the north pole and south is very close to the south pole,\n  // so handle it just by using 0 latitude as the center.  It\'s certainliy possible to use a smaller tolerance\n  // than one degree here, but one degree is safe and putting the center at 0 latitude should be good enough for any\n  // rectangle that spans 178+ of the 180 degrees of latitude.\n  var longitude = (west + east) * 0.5;\n  var latitude;\n  if (\n    south < -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO + _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE &&\n    north > _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO - _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].RADIANS_PER_DEGREE */ .Z.RADIANS_PER_DEGREE\n  ) {\n    latitude = 0.0;\n  } else {\n    var northCartographic = viewRectangle3DCartographic1;\n    northCartographic.longitude = longitude;\n    northCartographic.latitude = north;\n    northCartographic.height = 0.0;\n\n    var southCartographic = viewRectangle3DCartographic2;\n    southCartographic.longitude = longitude;\n    southCartographic.latitude = south;\n    southCartographic.height = 0.0;\n\n    var ellipsoidGeodesic = viewRectangle3DEllipsoidGeodesic;\n    if (\n      !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(ellipsoidGeodesic) ||\n      ellipsoidGeodesic.ellipsoid !== ellipsoid\n    ) {\n      viewRectangle3DEllipsoidGeodesic = ellipsoidGeodesic = new _Core_EllipsoidGeodesic_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(\n        undefined,\n        undefined,\n        ellipsoid\n      );\n    }\n\n    ellipsoidGeodesic.setEndPoints(northCartographic, southCartographic);\n    latitude = ellipsoidGeodesic.interpolateUsingFraction(\n      0.5,\n      viewRectangle3DCartographic1\n    ).latitude;\n  }\n\n  var centerCartographic = viewRectangle3DCartographic1;\n  centerCartographic.longitude = longitude;\n  centerCartographic.latitude = latitude;\n  centerCartographic.height = 0.0;\n\n  var center = ellipsoid.cartographicToCartesian(\n    centerCartographic,\n    viewRectangle3DCenter\n  );\n\n  var cart = viewRectangle3DCartographic1;\n  cart.longitude = east;\n  cart.latitude = north;\n  var northEast = ellipsoid.cartographicToCartesian(\n    cart,\n    viewRectangle3DNorthEast\n  );\n  cart.longitude = west;\n  var northWest = ellipsoid.cartographicToCartesian(\n    cart,\n    viewRectangle3DNorthWest\n  );\n  cart.longitude = longitude;\n  var northCenter = ellipsoid.cartographicToCartesian(\n    cart,\n    viewRectangle3DNorthCenter\n  );\n  cart.latitude = south;\n  var southCenter = ellipsoid.cartographicToCartesian(\n    cart,\n    viewRectangle3DSouthCenter\n  );\n  cart.longitude = east;\n  var southEast = ellipsoid.cartographicToCartesian(\n    cart,\n    viewRectangle3DSouthEast\n  );\n  cart.longitude = west;\n  var southWest = ellipsoid.cartographicToCartesian(\n    cart,\n    viewRectangle3DSouthWest\n  );\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(northWest, center, northWest);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(southEast, center, southEast);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(northEast, center, northEast);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(southWest, center, southWest);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(northCenter, center, northCenter);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(southCenter, center, southCenter);\n\n  var direction = ellipsoid.geodeticSurfaceNormal(center, cameraRF.direction);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].negate */ .Z.negate(direction, direction);\n  var right = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(direction, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z, cameraRF.right);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(right, right);\n  var up = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(right, direction, cameraRF.up);\n\n  var d;\n  if (camera.frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z) {\n    var width = Math.max(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].distance */ .Z.distance(northEast, northWest),\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].distance */ .Z.distance(southEast, southWest)\n    );\n    var height = Math.max(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].distance */ .Z.distance(northEast, southEast),\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].distance */ .Z.distance(northWest, southWest)\n    );\n\n    var rightScalar;\n    var topScalar;\n    var ratio =\n      camera.frustum._offCenterFrustum.right /\n      camera.frustum._offCenterFrustum.top;\n    var heightRatio = height * ratio;\n    if (width > heightRatio) {\n      rightScalar = width;\n      topScalar = rightScalar / ratio;\n    } else {\n      topScalar = height;\n      rightScalar = heightRatio;\n    }\n\n    d = Math.max(rightScalar, topScalar);\n  } else {\n    var tanPhi = Math.tan(camera.frustum.fovy * 0.5);\n    var tanTheta = camera.frustum.aspectRatio * tanPhi;\n\n    d = Math.max(\n      computeD(direction, up, northWest, tanPhi),\n      computeD(direction, up, southEast, tanPhi),\n      computeD(direction, up, northEast, tanPhi),\n      computeD(direction, up, southWest, tanPhi),\n      computeD(direction, up, northCenter, tanPhi),\n      computeD(direction, up, southCenter, tanPhi),\n      computeD(direction, right, northWest, tanTheta),\n      computeD(direction, right, southEast, tanTheta),\n      computeD(direction, right, northEast, tanTheta),\n      computeD(direction, right, southWest, tanTheta),\n      computeD(direction, right, northCenter, tanTheta),\n      computeD(direction, right, southCenter, tanTheta)\n    );\n\n    // If the rectangle crosses the equator, compute D at the equator, too, because that\'s the\n    // widest part of the rectangle when projected onto the globe.\n    if (south < 0 && north > 0) {\n      var equatorCartographic = viewRectangle3DCartographic1;\n      equatorCartographic.longitude = west;\n      equatorCartographic.latitude = 0.0;\n      equatorCartographic.height = 0.0;\n      var equatorPosition = ellipsoid.cartographicToCartesian(\n        equatorCartographic,\n        viewRectangle3DEquator\n      );\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(equatorPosition, center, equatorPosition);\n      d = Math.max(\n        d,\n        computeD(direction, up, equatorPosition, tanPhi),\n        computeD(direction, right, equatorPosition, tanTheta)\n      );\n\n      equatorCartographic.longitude = east;\n      equatorPosition = ellipsoid.cartographicToCartesian(\n        equatorCartographic,\n        viewRectangle3DEquator\n      );\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(equatorPosition, center, equatorPosition);\n      d = Math.max(\n        d,\n        computeD(direction, up, equatorPosition, tanPhi),\n        computeD(direction, right, equatorPosition, tanTheta)\n      );\n    }\n  }\n\n  return _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(\n    center,\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(direction, -d, viewRectangle3DEquator),\n    result\n  );\n}\n\nvar viewRectangleCVCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar viewRectangleCVNorthEast = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangleCVSouthWest = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nfunction rectangleCameraPositionColumbusView(camera, rectangle, result) {\n  var projection = camera._projection;\n  if (rectangle.west > rectangle.east) {\n    rectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].MAX_VALUE */ .Z.MAX_VALUE;\n  }\n  var transform = camera._actualTransform;\n  var invTransform = camera._actualInvTransform;\n\n  var cart = viewRectangleCVCartographic;\n  cart.longitude = rectangle.east;\n  cart.latitude = rectangle.north;\n  var northEast = projection.project(cart, viewRectangleCVNorthEast);\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(transform, northEast, northEast);\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(invTransform, northEast, northEast);\n\n  cart.longitude = rectangle.west;\n  cart.latitude = rectangle.south;\n  var southWest = projection.project(cart, viewRectangleCVSouthWest);\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(transform, southWest, southWest);\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(invTransform, southWest, southWest);\n\n  result.x = (northEast.x - southWest.x) * 0.5 + southWest.x;\n  result.y = (northEast.y - southWest.y) * 0.5 + southWest.y;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(camera.frustum.fovy)) {\n    var tanPhi = Math.tan(camera.frustum.fovy * 0.5);\n    var tanTheta = camera.frustum.aspectRatio * tanPhi;\n    result.z =\n      Math.max(\n        (northEast.x - southWest.x) / tanTheta,\n        (northEast.y - southWest.y) / tanPhi\n      ) * 0.5;\n  } else {\n    var width = northEast.x - southWest.x;\n    var height = northEast.y - southWest.y;\n    result.z = Math.max(width, height);\n  }\n\n  return result;\n}\n\nvar viewRectangle2DCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\nvar viewRectangle2DNorthEast = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar viewRectangle2DSouthWest = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nfunction rectangleCameraPosition2D(camera, rectangle, result) {\n  var projection = camera._projection;\n\n  // Account for the rectangle crossing the International Date Line in 2D mode\n  var east = rectangle.east;\n  if (rectangle.west > rectangle.east) {\n    if (camera._scene.mapMode2D === _MapMode2D_js__WEBPACK_IMPORTED_MODULE_27__/* ["default"].INFINITE_SCROLL */ .Z.INFINITE_SCROLL) {\n      east += _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TWO_PI */ .Z.TWO_PI;\n    } else {\n      rectangle = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].MAX_VALUE */ .Z.MAX_VALUE;\n      east = rectangle.east;\n    }\n  }\n\n  var cart = viewRectangle2DCartographic;\n  cart.longitude = east;\n  cart.latitude = rectangle.north;\n  var northEast = projection.project(cart, viewRectangle2DNorthEast);\n  cart.longitude = rectangle.west;\n  cart.latitude = rectangle.south;\n  var southWest = projection.project(cart, viewRectangle2DSouthWest);\n\n  var width = Math.abs(northEast.x - southWest.x) * 0.5;\n  var height = Math.abs(northEast.y - southWest.y) * 0.5;\n\n  var right, top;\n  var ratio = camera.frustum.right / camera.frustum.top;\n  var heightRatio = height * ratio;\n  if (width > heightRatio) {\n    right = width;\n    top = right / ratio;\n  } else {\n    top = height;\n    right = heightRatio;\n  }\n\n  height = Math.max(2.0 * right, 2.0 * top);\n\n  result.x = (northEast.x - southWest.x) * 0.5 + southWest.x;\n  result.y = (northEast.y - southWest.y) * 0.5 + southWest.y;\n\n  cart = projection.unproject(result, cart);\n  cart.height = height;\n  result = projection.project(cart, result);\n\n  return result;\n}\n\n/**\n * Get the camera position needed to view a rectangle on an ellipsoid or map\n *\n * @param {Rectangle} rectangle The rectangle to view.\n * @param {Cartesian3} [result] The camera position needed to view the rectangle\n * @returns {Cartesian3} The camera position needed to view the rectangle\n */\nCamera.prototype.getRectangleCameraCoordinates = function (rectangle, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(rectangle)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("rectangle is required");\n  }\n  //>>includeEnd(\'debug\');\n  var mode = this._mode;\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  }\n\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    return rectangleCameraPosition3D(this, rectangle, result);\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    return rectangleCameraPositionColumbusView(this, rectangle, result);\n  } else if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    return rectangleCameraPosition2D(this, rectangle, result);\n  }\n\n  return undefined;\n};\n\nvar pickEllipsoid3DRay = new _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z();\nfunction pickEllipsoid3D(camera, windowPosition, ellipsoid, result) {\n  ellipsoid = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(ellipsoid, _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].WGS84 */ .Z.WGS84);\n  var ray = camera.getPickRay(windowPosition, pickEllipsoid3DRay);\n  var intersection = _Core_IntersectionTests_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].rayEllipsoid */ .Z.rayEllipsoid(ray, ellipsoid);\n  if (!intersection) {\n    return undefined;\n  }\n\n  var t = intersection.start > 0.0 ? intersection.start : intersection.stop;\n  return _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].getPoint */ .Z.getPoint(ray, t, result);\n}\n\nvar pickEllipsoid2DRay = new _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z();\nfunction pickMap2D(camera, windowPosition, projection, result) {\n  var ray = camera.getPickRay(windowPosition, pickEllipsoid2DRay);\n  var position = ray.origin;\n  position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromElements */ .Z.fromElements(position.y, position.z, 0.0, position);\n  var cart = projection.unproject(position);\n\n  if (\n    cart.latitude < -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO ||\n    cart.latitude > _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO\n  ) {\n    return undefined;\n  }\n\n  return projection.ellipsoid.cartographicToCartesian(cart, result);\n}\n\nvar pickEllipsoidCVRay = new _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z();\nfunction pickMapColumbusView(camera, windowPosition, projection, result) {\n  var ray = camera.getPickRay(windowPosition, pickEllipsoidCVRay);\n  var scalar = -ray.origin.x / ray.direction.x;\n  _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"].getPoint */ .Z.getPoint(ray, scalar, result);\n\n  var cart = projection.unproject(new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(result.y, result.z, 0.0));\n\n  if (\n    cart.latitude < -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO ||\n    cart.latitude > _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO ||\n    cart.longitude < -Math.PI ||\n    cart.longitude > Math.PI\n  ) {\n    return undefined;\n  }\n\n  return projection.ellipsoid.cartographicToCartesian(cart, result);\n}\n\n/**\n * Pick an ellipsoid or map.\n *\n * @param {Cartesian2} windowPosition The x and y coordinates of a pixel.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid to pick.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3 | undefined} If the ellipsoid or map was picked,\n * returns the point on the surface of the ellipsoid or map in world\n * coordinates. If the ellipsoid or map was not picked, returns undefined.\n *\n * @example\n * var canvas = viewer.scene.canvas;\n * var center = new Cesium.Cartesian2(canvas.clientWidth / 2.0, canvas.clientHeight / 2.0);\n * var ellipsoid = viewer.scene.globe.ellipsoid;\n * var result = viewer.camera.pickEllipsoid(center, ellipsoid);\n */\nCamera.prototype.pickEllipsoid = function (windowPosition, ellipsoid, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(windowPosition)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("windowPosition is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var canvas = this._scene.canvas;\n  if (canvas.clientWidth === 0 || canvas.clientHeight === 0) {\n    return undefined;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n  }\n\n  ellipsoid = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(ellipsoid, _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].WGS84 */ .Z.WGS84);\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    result = pickEllipsoid3D(this, windowPosition, ellipsoid, result);\n  } else if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    result = pickMap2D(this, windowPosition, this._projection, result);\n  } else if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    result = pickMapColumbusView(\n      this,\n      windowPosition,\n      this._projection,\n      result\n    );\n  } else {\n    return undefined;\n  }\n\n  return result;\n};\n\nvar pickPerspCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar pickPerspXDir = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar pickPerspYDir = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nfunction getPickRayPerspective(camera, windowPosition, result) {\n  var canvas = camera._scene.canvas;\n  var width = canvas.clientWidth;\n  var height = canvas.clientHeight;\n\n  var tanPhi = Math.tan(camera.frustum.fovy * 0.5);\n  var tanTheta = camera.frustum.aspectRatio * tanPhi;\n  var near = camera.frustum.near;\n\n  var x = (2.0 / width) * windowPosition.x - 1.0;\n  var y = (2.0 / height) * (height - windowPosition.y) - 1.0;\n\n  var position = camera.positionWC;\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(position, result.origin);\n\n  var nearCenter = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    camera.directionWC,\n    near,\n    pickPerspCenter\n  );\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(position, nearCenter, nearCenter);\n  var xDir = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    camera.rightWC,\n    x * near * tanTheta,\n    pickPerspXDir\n  );\n  var yDir = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    camera.upWC,\n    y * near * tanPhi,\n    pickPerspYDir\n  );\n  var direction = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(nearCenter, xDir, result.direction);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(direction, yDir, direction);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(direction, position, direction);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(direction, direction);\n\n  return result;\n}\n\nvar scratchDirection = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nfunction getPickRayOrthographic(camera, windowPosition, result) {\n  var canvas = camera._scene.canvas;\n  var width = canvas.clientWidth;\n  var height = canvas.clientHeight;\n\n  var frustum = camera.frustum;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum._offCenterFrustum)) {\n    frustum = frustum._offCenterFrustum;\n  }\n  var x = (2.0 / width) * windowPosition.x - 1.0;\n  x *= (frustum.right - frustum.left) * 0.5;\n  var y = (2.0 / height) * (height - windowPosition.y) - 1.0;\n  y *= (frustum.top - frustum.bottom) * 0.5;\n\n  var origin = result.origin;\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.position, origin);\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(camera.right, x, scratchDirection);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(scratchDirection, origin, origin);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(camera.up, y, scratchDirection);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(scratchDirection, origin, origin);\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.directionWC, result.direction);\n\n  if (\n    camera._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW ||\n    camera._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D\n  ) {\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromElements */ .Z.fromElements(\n      result.origin.z,\n      result.origin.x,\n      result.origin.y,\n      result.origin\n    );\n  }\n\n  return result;\n}\n\n/**\n * Create a ray from the camera position through the pixel at <code>windowPosition</code>\n * in world coordinates.\n *\n * @param {Cartesian2} windowPosition The x and y coordinates of a pixel.\n * @param {Ray} [result] The object onto which to store the result.\n * @returns {Ray} Returns the {@link Cartesian3} position and direction of the ray.\n */\nCamera.prototype.getPickRay = function (windowPosition, result) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(windowPosition)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("windowPosition is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new _Core_Ray_js__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .Z();\n  }\n\n  var frustum = this.frustum;\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum.aspectRatio) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum.fov) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum.near)\n  ) {\n    return getPickRayPerspective(this, windowPosition, result);\n  }\n\n  return getPickRayOrthographic(this, windowPosition, result);\n};\n\nvar scratchToCenter = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchProj = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\n/**\n * Return the distance from the camera to the front of the bounding sphere.\n *\n * @param {BoundingSphere} boundingSphere The bounding sphere in world coordinates.\n * @returns {Number} The distance to the bounding sphere.\n */\nCamera.prototype.distanceToBoundingSphere = function (boundingSphere) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(boundingSphere)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("boundingSphere is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var toCenter = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(\n    this.positionWC,\n    boundingSphere.center,\n    scratchToCenter\n  );\n  var proj = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    this.directionWC,\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(toCenter, this.directionWC),\n    scratchProj\n  );\n  return Math.max(0.0, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(proj) - boundingSphere.radius);\n};\n\nvar scratchPixelSize = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\n/**\n * Return the pixel size in meters.\n *\n * @param {BoundingSphere} boundingSphere The bounding sphere in world coordinates.\n * @param {Number} drawingBufferWidth The drawing buffer width.\n * @param {Number} drawingBufferHeight The drawing buffer height.\n * @returns {Number} The pixel size in meters.\n */\nCamera.prototype.getPixelSize = function (\n  boundingSphere,\n  drawingBufferWidth,\n  drawingBufferHeight\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(boundingSphere)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("boundingSphere is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(drawingBufferWidth)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("drawingBufferWidth is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(drawingBufferHeight)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("drawingBufferHeight is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var distance = this.distanceToBoundingSphere(boundingSphere);\n  var pixelSize = this.frustum.getPixelDimensions(\n    drawingBufferWidth,\n    drawingBufferHeight,\n    distance,\n    this._scene.pixelRatio,\n    scratchPixelSize\n  );\n  return Math.max(pixelSize.x, pixelSize.y);\n};\n\nfunction createAnimationTemplateCV(\n  camera,\n  position,\n  center,\n  maxX,\n  maxY,\n  duration\n) {\n  var newPosition = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(position);\n\n  if (center.y > maxX) {\n    newPosition.y -= center.y - maxX;\n  } else if (center.y < -maxX) {\n    newPosition.y += -maxX - center.y;\n  }\n\n  if (center.z > maxY) {\n    newPosition.z -= center.z - maxY;\n  } else if (center.z < -maxY) {\n    newPosition.z += -maxY - center.z;\n  }\n\n  function updateCV(value) {\n    var interp = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].lerp */ .Z.lerp(\n      position,\n      newPosition,\n      value.time,\n      new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z()\n    );\n    camera.worldToCameraCoordinatesPoint(interp, camera.position);\n  }\n  return {\n    easingFunction: _Core_EasingFunction_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].EXPONENTIAL_OUT */ .Z.EXPONENTIAL_OUT,\n    startObject: {\n      time: 0.0,\n    },\n    stopObject: {\n      time: 1.0,\n    },\n    duration: duration,\n    update: updateCV,\n  };\n}\n\nvar normalScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar centerScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar posScratch = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchCartesian3Subtract = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nfunction createAnimationCV(camera, duration) {\n  var position = camera.position;\n  var direction = camera.direction;\n\n  var normal = camera.worldToCameraCoordinatesVector(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_X */ .Z.UNIT_X,\n    normalScratch\n  );\n  var scalar =\n    -_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(normal, position) / _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(normal, direction);\n  var center = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(\n    position,\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(direction, scalar, centerScratch),\n    centerScratch\n  );\n  camera.cameraToWorldCoordinatesPoint(center, center);\n\n  position = camera.cameraToWorldCoordinatesPoint(camera.position, posScratch);\n\n  var tanPhi = Math.tan(camera.frustum.fovy * 0.5);\n  var tanTheta = camera.frustum.aspectRatio * tanPhi;\n  var distToC = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(position, center, scratchCartesian3Subtract)\n  );\n  var dWidth = tanTheta * distToC;\n  var dHeight = tanPhi * distToC;\n\n  var mapWidth = camera._maxCoord.x;\n  var mapHeight = camera._maxCoord.y;\n\n  var maxX = Math.max(dWidth - mapWidth, mapWidth);\n  var maxY = Math.max(dHeight - mapHeight, mapHeight);\n\n  if (\n    position.z < -maxX ||\n    position.z > maxX ||\n    position.y < -maxY ||\n    position.y > maxY\n  ) {\n    var translateX = center.y < -maxX || center.y > maxX;\n    var translateY = center.z < -maxY || center.z > maxY;\n    if (translateX || translateY) {\n      return createAnimationTemplateCV(\n        camera,\n        position,\n        center,\n        maxX,\n        maxY,\n        duration\n      );\n    }\n  }\n\n  return undefined;\n}\n\n/**\n * Create an animation to move the map into view. This method is only valid for 2D and Columbus modes.\n *\n * @param {Number} duration The duration, in seconds, of the animation.\n * @returns {Object} The animation or undefined if the scene mode is 3D or the map is already ion view.\n *\n * @private\n */\nCamera.prototype.createCorrectPositionTween = function (duration) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(duration)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("duration is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW) {\n    return createAnimationCV(this, duration);\n  }\n\n  return undefined;\n};\n\nvar scratchFlyToDestination = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar newOptions = {\n  destination: undefined,\n  heading: undefined,\n  pitch: undefined,\n  roll: undefined,\n  duration: undefined,\n  complete: undefined,\n  cancel: undefined,\n  endTransform: undefined,\n  maximumHeight: undefined,\n  easingFunction: undefined,\n};\n\n/**\n * Cancels the current camera flight and leaves the camera at its current location.\n * If no flight is in progress, this this function does nothing.\n */\nCamera.prototype.cancelFlight = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(this._currentFlight)) {\n    this._currentFlight.cancelTween();\n    this._currentFlight = undefined;\n  }\n};\n\n/**\n * Completes the current camera flight and moves the camera immediately to its final destination.\n * If no flight is in progress, this this function does nothing.\n */\nCamera.prototype.completeFlight = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(this._currentFlight)) {\n    this._currentFlight.cancelTween();\n\n    var options = {\n      destination: undefined,\n      orientation: {\n        heading: undefined,\n        pitch: undefined,\n        roll: undefined,\n      },\n    };\n\n    options.destination = newOptions.destination;\n    options.orientation.heading = newOptions.heading;\n    options.orientation.pitch = newOptions.pitch;\n    options.orientation.roll = newOptions.roll;\n\n    this.setView(options);\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(this._currentFlight.complete)) {\n      this._currentFlight.complete();\n    }\n\n    this._currentFlight = undefined;\n  }\n};\n\n/**\n * Flies the camera from its current position to a new position.\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3|Rectangle} options.destination The final position of the camera in WGS84 (world) coordinates or a rectangle that would be visible from a top-down view.\n * @param {Object} [options.orientation] An object that contains either direction and up properties or heading, pitch and roll properties. By default, the direction will point\n * towards the center of the frame in 3D and in the negative z direction in Columbus view. The up direction will point towards local north in 3D and in the positive\n * y direction in Columbus view.  Orientation is not used in 2D when in infinite scrolling mode.\n * @param {Number} [options.duration] The duration of the flight in seconds. If omitted, Cesium attempts to calculate an ideal duration based on the distance to be traveled by the flight.\n * @param {Camera.FlightCompleteCallback} [options.complete] The function to execute when the flight is complete.\n * @param {Camera.FlightCancelledCallback} [options.cancel] The function to execute if the flight is cancelled.\n * @param {Matrix4} [options.endTransform] Transform matrix representing the reference frame the camera will be in when the flight is completed.\n * @param {Number} [options.maximumHeight] The maximum height at the peak of the flight.\n * @param {Number} [options.pitchAdjustHeight] If camera flyes higher than that value, adjust pitch duiring the flight to look down, and keep Earth in viewport.\n * @param {Number} [options.flyOverLongitude] There are always two ways between 2 points on globe. This option force camera to choose fight direction to fly over that longitude.\n * @param {Number} [options.flyOverLongitudeWeight] Fly over the lon specifyed via flyOverLongitude only if that way is not longer than short way times flyOverLongitudeWeight.\n * @param {Boolean} [options.convert] Whether to convert the destination from world coordinates to scene coordinates (only relevant when not using 3D). Defaults to <code>true</code>.\n * @param {EasingFunction.Callback} [options.easingFunction] Controls how the time is interpolated over the duration of the flight.\n *\n * @exception {DeveloperError} If either direction or up is given, then both are required.\n *\n * @example\n * // 1. Fly to a position with a top-down view\n * viewer.camera.flyTo({\n *     destination : Cesium.Cartesian3.fromDegrees(-117.16, 32.71, 15000.0)\n * });\n *\n * // 2. Fly to a Rectangle with a top-down view\n * viewer.camera.flyTo({\n *     destination : Cesium.Rectangle.fromDegrees(west, south, east, north)\n * });\n *\n * // 3. Fly to a position with an orientation using unit vectors.\n * viewer.camera.flyTo({\n *     destination : Cesium.Cartesian3.fromDegrees(-122.19, 46.25, 5000.0),\n *     orientation : {\n *         direction : new Cesium.Cartesian3(-0.04231243104240401, -0.20123236049443421, -0.97862924300734),\n *         up : new Cesium.Cartesian3(-0.47934589305293746, -0.8553216253114552, 0.1966022179118339)\n *     }\n * });\n *\n * // 4. Fly to a position with an orientation using heading, pitch and roll.\n * viewer.camera.flyTo({\n *     destination : Cesium.Cartesian3.fromDegrees(-122.19, 46.25, 5000.0),\n *     orientation : {\n *         heading : Cesium.Math.toRadians(175.0),\n *         pitch : Cesium.Math.toRadians(-35.0),\n *         roll : 0.0\n *     }\n * });\n */\nCamera.prototype.flyTo = function (options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var destination = options.destination;\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(destination)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("destination is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var mode = this._mode;\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n    return;\n  }\n\n  this.cancelFlight();\n\n  var orientation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(\n    options.orientation,\n    _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT\n  );\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(orientation.direction)) {\n    orientation = directionUpToHeadingPitchRoll(\n      this,\n      destination,\n      orientation,\n      scratchSetViewOptions.orientation\n    );\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(options.duration) && options.duration <= 0.0) {\n    var setViewOptions = scratchSetViewOptions;\n    setViewOptions.destination = options.destination;\n    setViewOptions.orientation.heading = orientation.heading;\n    setViewOptions.orientation.pitch = orientation.pitch;\n    setViewOptions.orientation.roll = orientation.roll;\n    setViewOptions.convert = options.convert;\n    setViewOptions.endTransform = options.endTransform;\n    this.setView(setViewOptions);\n    if (typeof options.complete === "function") {\n      options.complete();\n    }\n    return;\n  }\n\n  var isRectangle = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(destination.west);\n  if (isRectangle) {\n    destination = this.getRectangleCameraCoordinates(\n      destination,\n      scratchFlyToDestination\n    );\n  }\n\n  var that = this;\n  var flightTween;\n\n  newOptions.destination = destination;\n  newOptions.heading = orientation.heading;\n  newOptions.pitch = orientation.pitch;\n  newOptions.roll = orientation.roll;\n  newOptions.duration = options.duration;\n  newOptions.complete = function () {\n    if (flightTween === that._currentFlight) {\n      that._currentFlight = undefined;\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(options.complete)) {\n      options.complete();\n    }\n  };\n  newOptions.cancel = options.cancel;\n  newOptions.endTransform = options.endTransform;\n  newOptions.convert = isRectangle ? false : options.convert;\n  newOptions.maximumHeight = options.maximumHeight;\n  newOptions.pitchAdjustHeight = options.pitchAdjustHeight;\n  newOptions.flyOverLongitude = options.flyOverLongitude;\n  newOptions.flyOverLongitudeWeight = options.flyOverLongitudeWeight;\n  newOptions.easingFunction = options.easingFunction;\n\n  var scene = this._scene;\n  var tweenOptions = _CameraFlightPath_js__WEBPACK_IMPORTED_MODULE_26__/* ["default"].createTween */ .Z.createTween(scene, newOptions);\n  // If the camera doesn\'t actually need to go anywhere, duration\n  // will be 0 and we can just complete the current flight.\n  if (tweenOptions.duration === 0) {\n    if (typeof tweenOptions.complete === "function") {\n      tweenOptions.complete();\n    }\n    return;\n  }\n  flightTween = scene.tweens.add(tweenOptions);\n  this._currentFlight = flightTween;\n\n  // Save the final destination view information for the PRELOAD_FLIGHT pass.\n  var preloadFlightCamera = this._scene.preloadFlightCamera;\n  if (this._mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(preloadFlightCamera)) {\n      preloadFlightCamera = Camera.clone(this);\n    }\n    preloadFlightCamera.setView({\n      destination: destination,\n      orientation: orientation,\n    });\n\n    this._scene.preloadFlightCullingVolume = preloadFlightCamera.frustum.computeCullingVolume(\n      preloadFlightCamera.positionWC,\n      preloadFlightCamera.directionWC,\n      preloadFlightCamera.upWC\n    );\n  }\n};\n\nfunction distanceToBoundingSphere3D(camera, radius) {\n  var frustum = camera.frustum;\n  var tanPhi = Math.tan(frustum.fovy * 0.5);\n  var tanTheta = frustum.aspectRatio * tanPhi;\n  return Math.max(radius / tanTheta, radius / tanPhi);\n}\n\nfunction distanceToBoundingSphere2D(camera, radius) {\n  var frustum = camera.frustum;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(frustum._offCenterFrustum)) {\n    frustum = frustum._offCenterFrustum;\n  }\n\n  var right, top;\n  var ratio = frustum.right / frustum.top;\n  var heightRatio = radius * ratio;\n  if (radius > heightRatio) {\n    right = radius;\n    top = right / ratio;\n  } else {\n    top = radius;\n    right = heightRatio;\n  }\n\n  return Math.max(right, top) * 1.5;\n}\n\nvar MINIMUM_ZOOM = 100.0;\n\nfunction adjustBoundingSphereOffset(camera, boundingSphere, offset) {\n  offset = _Core_HeadingPitchRange_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].clone */ .Z.clone(\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(offset) ? offset : Camera.DEFAULT_OFFSET\n  );\n\n  var minimumZoom =\n    camera._scene.screenSpaceCameraController.minimumZoomDistance;\n  var maximumZoom =\n    camera._scene.screenSpaceCameraController.maximumZoomDistance;\n  var range = offset.range;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(range) || range === 0.0) {\n    var radius = boundingSphere.radius;\n    if (radius === 0.0) {\n      offset.range = MINIMUM_ZOOM;\n    } else if (\n      camera.frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z ||\n      camera._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D\n    ) {\n      offset.range = distanceToBoundingSphere2D(camera, radius);\n    } else {\n      offset.range = distanceToBoundingSphere3D(camera, radius);\n    }\n    offset.range = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].clamp */ .Z.clamp(offset.range, minimumZoom, maximumZoom);\n  }\n\n  return offset;\n}\n\n/**\n * Sets the camera so that the current view contains the provided bounding sphere.\n *\n * <p>The offset is heading/pitch/range in the local east-north-up reference frame centered at the center of the bounding sphere.\n * The heading and the pitch angles are defined in the local east-north-up reference frame.\n * The heading is the angle from y axis and increasing towards the x axis. Pitch is the rotation from the xy-plane. Positive pitch\n * angles are below the plane. Negative pitch angles are above the plane. The range is the distance from the center. If the range is\n * zero, a range will be computed such that the whole bounding sphere is visible.</p>\n *\n * <p>In 2D, there must be a top down view. The camera will be placed above the target looking down. The height above the\n * target will be the range. The heading will be determined from the offset. If the heading cannot be\n * determined from the offset, the heading will be north.</p>\n *\n * @param {BoundingSphere} boundingSphere The bounding sphere to view, in world coordinates.\n * @param {HeadingPitchRange} [offset] The offset from the target in the local east-north-up reference frame centered at the target.\n *\n * @exception {DeveloperError} viewBoundingSphere is not supported while morphing.\n */\nCamera.prototype.viewBoundingSphere = function (boundingSphere, offset) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(boundingSphere)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("boundingSphere is required.");\n  }\n\n  if (this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].MORPHING */ .Z.MORPHING) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(\n      "viewBoundingSphere is not supported while morphing."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  offset = adjustBoundingSphereOffset(this, boundingSphere, offset);\n  this.lookAt(boundingSphere.center, offset);\n};\n\nvar scratchflyToBoundingSphereTransform = new _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z();\nvar scratchflyToBoundingSphereDestination = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchflyToBoundingSphereDirection = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchflyToBoundingSphereUp = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchflyToBoundingSphereRight = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchFlyToBoundingSphereCart4 = new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z();\nvar scratchFlyToBoundingSphereQuaternion = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .Z();\nvar scratchFlyToBoundingSphereMatrix3 = new _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z();\n\n/**\n * Flies the camera to a location where the current view contains the provided bounding sphere.\n *\n * <p> The offset is heading/pitch/range in the local east-north-up reference frame centered at the center of the bounding sphere.\n * The heading and the pitch angles are defined in the local east-north-up reference frame.\n * The heading is the angle from y axis and increasing towards the x axis. Pitch is the rotation from the xy-plane. Positive pitch\n * angles are below the plane. Negative pitch angles are above the plane. The range is the distance from the center. If the range is\n * zero, a range will be computed such that the whole bounding sphere is visible.</p>\n *\n * <p>In 2D and Columbus View, there must be a top down view. The camera will be placed above the target looking down. The height above the\n * target will be the range. The heading will be aligned to local north.</p>\n *\n * @param {BoundingSphere} boundingSphere The bounding sphere to view, in world coordinates.\n * @param {Object} [options] Object with the following properties:\n * @param {Number} [options.duration] The duration of the flight in seconds. If omitted, Cesium attempts to calculate an ideal duration based on the distance to be traveled by the flight.\n * @param {HeadingPitchRange} [options.offset] The offset from the target in the local east-north-up reference frame centered at the target.\n * @param {Camera.FlightCompleteCallback} [options.complete] The function to execute when the flight is complete.\n * @param {Camera.FlightCancelledCallback} [options.cancel] The function to execute if the flight is cancelled.\n * @param {Matrix4} [options.endTransform] Transform matrix representing the reference frame the camera will be in when the flight is completed.\n * @param {Number} [options.maximumHeight] The maximum height at the peak of the flight.\n * @param {Number} [options.pitchAdjustHeight] If camera flyes higher than that value, adjust pitch duiring the flight to look down, and keep Earth in viewport.\n * @param {Number} [options.flyOverLongitude] There are always two ways between 2 points on globe. This option force camera to choose fight direction to fly over that longitude.\n * @param {Number} [options.flyOverLongitudeWeight] Fly over the lon specifyed via flyOverLongitude only if that way is not longer than short way times flyOverLongitudeWeight.\n * @param {EasingFunction.Callback} [options.easingFunction] Controls how the time is interpolated over the duration of the flight.\n */\nCamera.prototype.flyToBoundingSphere = function (boundingSphere, options) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(boundingSphere)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z("boundingSphere is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var scene2D =\n    this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D || this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW;\n  this._setTransform(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].IDENTITY */ .Z.IDENTITY);\n  var offset = adjustBoundingSphereOffset(this, boundingSphere, options.offset);\n\n  var position;\n  if (scene2D) {\n    position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z,\n      offset.range,\n      scratchflyToBoundingSphereDestination\n    );\n  } else {\n    position = offsetFromHeadingPitchRange(\n      offset.heading,\n      offset.pitch,\n      offset.range\n    );\n  }\n\n  var transform = _Core_Transforms_js__WEBPACK_IMPORTED_MODULE_25__/* ["default"].eastNorthUpToFixedFrame */ .Z.eastNorthUpToFixedFrame(\n    boundingSphere.center,\n    _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].WGS84 */ .Z.WGS84,\n    scratchflyToBoundingSphereTransform\n  );\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPoint */ .Z.multiplyByPoint(transform, position, position);\n\n  var direction;\n  var up;\n\n  if (!scene2D) {\n    direction = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(\n      boundingSphere.center,\n      position,\n      scratchflyToBoundingSphereDirection\n    );\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(direction, direction);\n\n    up = _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].multiplyByPointAsVector */ .Z.multiplyByPointAsVector(\n      transform,\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z,\n      scratchflyToBoundingSphereUp\n    );\n    if (1.0 - Math.abs(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].dot */ .Z.dot(direction, up)) < _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON6 */ .Z.EPSILON6) {\n      var rotateQuat = _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_22__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(\n        direction,\n        offset.heading,\n        scratchFlyToBoundingSphereQuaternion\n      );\n      var rotation = _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].fromQuaternion */ .Z.fromQuaternion(\n        rotateQuat,\n        scratchFlyToBoundingSphereMatrix3\n      );\n\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].fromCartesian4 */ .Z.fromCartesian4(\n        _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].getColumn */ .Z.getColumn(transform, 1, scratchFlyToBoundingSphereCart4),\n        up\n      );\n      _Core_Matrix3_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"].multiplyByVector */ .Z.multiplyByVector(rotation, up, up);\n    }\n\n    var right = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(\n      direction,\n      up,\n      scratchflyToBoundingSphereRight\n    );\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(right, direction, up);\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(up, up);\n  }\n\n  this.flyTo({\n    destination: position,\n    orientation: {\n      direction: direction,\n      up: up,\n    },\n    duration: options.duration,\n    complete: options.complete,\n    cancel: options.cancel,\n    endTransform: options.endTransform,\n    maximumHeight: options.maximumHeight,\n    easingFunction: options.easingFunction,\n    flyOverLongitude: options.flyOverLongitude,\n    flyOverLongitudeWeight: options.flyOverLongitudeWeight,\n    pitchAdjustHeight: options.pitchAdjustHeight,\n  });\n};\n\nvar scratchCartesian3_1 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchCartesian3_2 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchCartesian3_3 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchCartesian3_4 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar horizonPoints = [\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(),\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(),\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(),\n  new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(),\n];\n\nfunction computeHorizonQuad(camera, ellipsoid) {\n  var radii = ellipsoid.radii;\n  var p = camera.positionWC;\n\n  // Find the corresponding position in the scaled space of the ellipsoid.\n  var q = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyComponents */ .Z.multiplyComponents(\n    ellipsoid.oneOverRadii,\n    p,\n    scratchCartesian3_1\n  );\n\n  var qMagnitude = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitude */ .Z.magnitude(q);\n  var qUnit = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(q, scratchCartesian3_2);\n\n  // Determine the east and north directions at q.\n  var eUnit;\n  var nUnit;\n  if (\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(qUnit, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z, _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON10 */ .Z.EPSILON10)\n  ) {\n    eUnit = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(0, 1, 0);\n    nUnit = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(0, 0, 1);\n  } else {\n    eUnit = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].UNIT_Z */ .Z.UNIT_Z, qUnit, scratchCartesian3_3),\n      scratchCartesian3_3\n    );\n    nUnit = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].normalize */ .Z.normalize(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].cross */ .Z.cross(qUnit, eUnit, scratchCartesian3_4),\n      scratchCartesian3_4\n    );\n  }\n\n  // Determine the radius of the \'limb\' of the ellipsoid.\n  var wMagnitude = Math.sqrt(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].magnitudeSquared */ .Z.magnitudeSquared(q) - 1.0);\n\n  // Compute the center and offsets.\n  var center = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    qUnit,\n    1.0 / qMagnitude,\n    scratchCartesian3_1\n  );\n  var scalar = wMagnitude / qMagnitude;\n  var eastOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    eUnit,\n    scalar,\n    scratchCartesian3_2\n  );\n  var northOffset = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n    nUnit,\n    scalar,\n    scratchCartesian3_3\n  );\n\n  // A conservative measure for the longitudes would be to use the min/max longitudes of the bounding frustum.\n  var upperLeft = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(center, northOffset, horizonPoints[0]);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(upperLeft, eastOffset, upperLeft);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyComponents */ .Z.multiplyComponents(radii, upperLeft, upperLeft);\n\n  var lowerLeft = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(center, northOffset, horizonPoints[1]);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(lowerLeft, eastOffset, lowerLeft);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyComponents */ .Z.multiplyComponents(radii, lowerLeft, lowerLeft);\n\n  var lowerRight = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].subtract */ .Z.subtract(center, northOffset, horizonPoints[2]);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(lowerRight, eastOffset, lowerRight);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyComponents */ .Z.multiplyComponents(radii, lowerRight, lowerRight);\n\n  var upperRight = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(center, northOffset, horizonPoints[3]);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].add */ .Z.add(upperRight, eastOffset, upperRight);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].multiplyComponents */ .Z.multiplyComponents(radii, upperRight, upperRight);\n\n  return horizonPoints;\n}\n\nvar scratchPickCartesian2 = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchRectCartesian = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar cartoArray = [\n  new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n  new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n  new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n  new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(),\n];\nfunction addToResult(x, y, index, camera, ellipsoid, computedHorizonQuad) {\n  scratchPickCartesian2.x = x;\n  scratchPickCartesian2.y = y;\n  var r = camera.pickEllipsoid(\n    scratchPickCartesian2,\n    ellipsoid,\n    scratchRectCartesian\n  );\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(r)) {\n    cartoArray[index] = ellipsoid.cartesianToCartographic(r, cartoArray[index]);\n    return 1;\n  }\n  cartoArray[index] = ellipsoid.cartesianToCartographic(\n    computedHorizonQuad[index],\n    cartoArray[index]\n  );\n  return 0;\n}\n/**\n * Computes the approximate visible rectangle on the ellipsoid.\n *\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid that you want to know the visible region.\n * @param {Rectangle} [result] The rectangle in which to store the result\n *\n * @returns {Rectangle|undefined} The visible rectangle or undefined if the ellipsoid isn\'t visible at all.\n */\nCamera.prototype.computeViewRectangle = function (ellipsoid, result) {\n  ellipsoid = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(ellipsoid, _Core_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].WGS84 */ .Z.WGS84);\n  var cullingVolume = this.frustum.computeCullingVolume(\n    this.positionWC,\n    this.directionWC,\n    this.upWC\n  );\n  var boundingSphere = new _Core_BoundingSphere_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(\n    _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].ZERO */ .Z.ZERO,\n    ellipsoid.maximumRadius\n  );\n  var visibility = cullingVolume.computeVisibility(boundingSphere);\n  if (visibility === _Core_Intersect_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].OUTSIDE */ .Z.OUTSIDE) {\n    return undefined;\n  }\n\n  var canvas = this._scene.canvas;\n  var width = canvas.clientWidth;\n  var height = canvas.clientHeight;\n\n  var successfulPickCount = 0;\n\n  var computedHorizonQuad = computeHorizonQuad(this, ellipsoid);\n\n  successfulPickCount += addToResult(\n    0,\n    0,\n    0,\n    this,\n    ellipsoid,\n    computedHorizonQuad\n  );\n  successfulPickCount += addToResult(\n    0,\n    height,\n    1,\n    this,\n    ellipsoid,\n    computedHorizonQuad\n  );\n  successfulPickCount += addToResult(\n    width,\n    height,\n    2,\n    this,\n    ellipsoid,\n    computedHorizonQuad\n  );\n  successfulPickCount += addToResult(\n    width,\n    0,\n    3,\n    this,\n    ellipsoid,\n    computedHorizonQuad\n  );\n\n  if (successfulPickCount < 2) {\n    // If we have space non-globe in 3 or 4 corners then return the whole globe\n    return _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].MAX_VALUE */ .Z.MAX_VALUE;\n  }\n\n  result = _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_24__/* ["default"].fromCartographicArray */ .Z.fromCartographicArray(cartoArray, result);\n\n  // Detect if we go over the poles\n  var distance = 0;\n  var lastLon = cartoArray[3].longitude;\n  for (var i = 0; i < 4; ++i) {\n    var lon = cartoArray[i].longitude;\n    var diff = Math.abs(lon - lastLon);\n    if (diff > _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI */ .Z.PI) {\n      // Crossed the dateline\n      distance += _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TWO_PI */ .Z.TWO_PI - diff;\n    } else {\n      distance += diff;\n    }\n\n    lastLon = lon;\n  }\n\n  // We are over one of the poles so adjust the rectangle accordingly\n  if (\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      Math.abs(distance),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TWO_PI */ .Z.TWO_PI,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].EPSILON9 */ .Z.EPSILON9\n    )\n  ) {\n    result.west = -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI */ .Z.PI;\n    result.east = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI */ .Z.PI;\n    if (cartoArray[0].latitude >= 0.0) {\n      result.north = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n    } else {\n      result.south = -_Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO;\n    }\n  }\n\n  return result;\n};\n\n/**\n * Switches the frustum/projection to perspective.\n *\n * This function is a no-op in 2D which must always be orthographic.\n */\nCamera.prototype.switchToPerspectiveFrustum = function () {\n  if (\n    this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D ||\n    this.frustum instanceof _Core_PerspectiveFrustum_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z\n  ) {\n    return;\n  }\n\n  var scene = this._scene;\n  this.frustum = new _Core_PerspectiveFrustum_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .Z();\n  this.frustum.aspectRatio =\n    scene.drawingBufferWidth / scene.drawingBufferHeight;\n  this.frustum.fov = _Core_Math_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].toRadians */ .Z.toRadians(60.0);\n};\n\n/**\n * Switches the frustum/projection to orthographic.\n *\n * This function is a no-op in 2D which will always be orthographic.\n */\nCamera.prototype.switchToOrthographicFrustum = function () {\n  if (\n    this._mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_28__/* ["default"].SCENE2D */ .Z.SCENE2D ||\n    this.frustum instanceof _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z\n  ) {\n    return;\n  }\n\n  // This must be called before changing the frustum because it uses the previous\n  // frustum to reconstruct the world space position from the depth buffer.\n  var frustumWidth = calculateOrthographicFrustumWidth(this);\n\n  var scene = this._scene;\n  this.frustum = new _Core_OrthographicFrustum_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .Z();\n  this.frustum.aspectRatio =\n    scene.drawingBufferWidth / scene.drawingBufferHeight;\n  this.frustum.width = frustumWidth;\n};\n\n/**\n * @private\n */\nCamera.clone = function (camera, result) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_29__/* ["default"] */ .Z)(result)) {\n    result = new Camera(camera._scene);\n  }\n\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.position, result.position);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.direction, result.direction);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.up, result.up);\n  _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(camera.right, result.right);\n  _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"].clone */ .Z.clone(camera._transform, result.transform);\n  result._transformChanged = true;\n  result.frustum = camera.frustum.clone();\n\n  return result;\n};\n\n/**\n * A function that will execute when a flight completes.\n * @callback Camera.FlightCompleteCallback\n */\n\n/**\n * A function that will execute when a flight is cancelled.\n * @callback Camera.FlightCancelledCallback\n */\n/* harmony default export */ __webpack_exports__["Z"] = (Camera);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUUsZ0ZBQWdCO0FBQ2xCLEVBQUUsOEVBQWE7QUFDZjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSxNQUFNLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvQ2FtZXJhLmpzP2E3M2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJvdW5kaW5nU3BoZXJlIGZyb20gXCIuLi9Db3JlL0JvdW5kaW5nU3BoZXJlLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4zLmpzXCI7XG5pbXBvcnQgQ2FydGVzaWFuNCBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW40LmpzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCIuLi9Db3JlL0NhcnRvZ3JhcGhpYy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEVhc2luZ0Z1bmN0aW9uIGZyb20gXCIuLi9Db3JlL0Vhc2luZ0Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQgRWxsaXBzb2lkIGZyb20gXCIuLi9Db3JlL0VsbGlwc29pZC5qc1wiO1xuaW1wb3J0IEVsbGlwc29pZEdlb2Rlc2ljIGZyb20gXCIuLi9Db3JlL0VsbGlwc29pZEdlb2Rlc2ljLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBnZXRUaW1lc3RhbXAgZnJvbSBcIi4uL0NvcmUvZ2V0VGltZXN0YW1wLmpzXCI7XG5pbXBvcnQgSGVhZGluZ1BpdGNoUmFuZ2UgZnJvbSBcIi4uL0NvcmUvSGVhZGluZ1BpdGNoUmFuZ2UuanNcIjtcbmltcG9ydCBIZWFkaW5nUGl0Y2hSb2xsIGZyb20gXCIuLi9Db3JlL0hlYWRpbmdQaXRjaFJvbGwuanNcIjtcbmltcG9ydCBJbnRlcnNlY3QgZnJvbSBcIi4uL0NvcmUvSW50ZXJzZWN0LmpzXCI7XG5pbXBvcnQgSW50ZXJzZWN0aW9uVGVzdHMgZnJvbSBcIi4uL0NvcmUvSW50ZXJzZWN0aW9uVGVzdHMuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBNYXRyaXgzIGZyb20gXCIuLi9Db3JlL01hdHJpeDMuanNcIjtcbmltcG9ydCBNYXRyaXg0IGZyb20gXCIuLi9Db3JlL01hdHJpeDQuanNcIjtcbmltcG9ydCBPcnRob2dyYXBoaWNGcnVzdHVtIGZyb20gXCIuLi9Db3JlL09ydGhvZ3JhcGhpY0ZydXN0dW0uanNcIjtcbmltcG9ydCBPcnRob2dyYXBoaWNPZmZDZW50ZXJGcnVzdHVtIGZyb20gXCIuLi9Db3JlL09ydGhvZ3JhcGhpY09mZkNlbnRlckZydXN0dW0uanNcIjtcbmltcG9ydCBQZXJzcGVjdGl2ZUZydXN0dW0gZnJvbSBcIi4uL0NvcmUvUGVyc3BlY3RpdmVGcnVzdHVtLmpzXCI7XG5pbXBvcnQgUXVhdGVybmlvbiBmcm9tIFwiLi4vQ29yZS9RdWF0ZXJuaW9uLmpzXCI7XG5pbXBvcnQgUmF5IGZyb20gXCIuLi9Db3JlL1JheS5qc1wiO1xuaW1wb3J0IFJlY3RhbmdsZSBmcm9tIFwiLi4vQ29yZS9SZWN0YW5nbGUuanNcIjtcbmltcG9ydCBUcmFuc2Zvcm1zIGZyb20gXCIuLi9Db3JlL1RyYW5zZm9ybXMuanNcIjtcbmltcG9ydCBDYW1lcmFGbGlnaHRQYXRoIGZyb20gXCIuL0NhbWVyYUZsaWdodFBhdGguanNcIjtcbmltcG9ydCBNYXBNb2RlMkQgZnJvbSBcIi4vTWFwTW9kZTJELmpzXCI7XG5pbXBvcnQgU2NlbmVNb2RlIGZyb20gXCIuL1NjZW5lTW9kZS5qc1wiO1xuXG4vKipcbiAqIFRoZSBjYW1lcmEgaXMgZGVmaW5lZCBieSBhIHBvc2l0aW9uLCBvcmllbnRhdGlvbiwgYW5kIHZpZXcgZnJ1c3R1bS5cbiAqIDxiciAvPjxiciAvPlxuICogVGhlIG9yaWVudGF0aW9uIGZvcm1zIGFuIG9ydGhvbm9ybWFsIGJhc2lzIHdpdGggYSB2aWV3LCB1cCBhbmQgcmlnaHQgPSB2aWV3IHggdXAgdW5pdCB2ZWN0b3JzLlxuICogPGJyIC8+PGJyIC8+XG4gKiBUaGUgdmlld2luZyBmcnVzdHVtIGlzIGRlZmluZWQgYnkgNiBwbGFuZXMuXG4gKiBFYWNoIHBsYW5lIGlzIHJlcHJlc2VudGVkIGJ5IGEge0BsaW5rIENhcnRlc2lhbjR9IG9iamVjdCwgd2hlcmUgdGhlIHgsIHksIGFuZCB6IGNvbXBvbmVudHNcbiAqIGRlZmluZSB0aGUgdW5pdCB2ZWN0b3Igbm9ybWFsIHRvIHRoZSBwbGFuZSwgYW5kIHRoZSB3IGNvbXBvbmVudCBpcyB0aGUgZGlzdGFuY2Ugb2YgdGhlXG4gKiBwbGFuZSBmcm9tIHRoZSBvcmlnaW4vY2FtZXJhIHBvc2l0aW9uLlxuICpcbiAqIEBhbGlhcyBDYW1lcmFcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge1NjZW5lfSBzY2VuZSBUaGUgc2NlbmUuXG4gKlxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUNhbWVyYS5odG1sfENlc2l1bSBTYW5kY2FzdGxlIENhbWVyYSBEZW1vfVxuICogQGRlbW8ge0BsaW5rIGh0dHBzOi8vc2FuZGNhc3RsZS5jZXNpdW0uY29tL2luZGV4Lmh0bWw/c3JjPUNhbWVyYSUyMFR1dG9yaWFsLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgQ2FtZXJhIFR1dG9yaWFsIEV4YW1wbGV9XG4gKiBAZGVtbyB7QGxpbmsgaHR0cHM6Ly9jZXNpdW0uY29tL2xlYXJuL2Nlc2l1bWpzLWxlYXJuL2Nlc2l1bWpzLWNhbWVyYXxDYW1lcmEgVHV0b3JpYWx9XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENyZWF0ZSBhIGNhbWVyYSBsb29raW5nIGRvd24gdGhlIG5lZ2F0aXZlIHotYXhpcywgcG9zaXRpb25lZCBhdCB0aGUgb3JpZ2luLFxuICogLy8gd2l0aCBhIGZpZWxkIG9mIHZpZXcgb2YgNjAgZGVncmVlcywgYW5kIDE6MSBhc3BlY3QgcmF0aW8uXG4gKiB2YXIgY2FtZXJhID0gbmV3IENlc2l1bS5DYW1lcmEoc2NlbmUpO1xuICogY2FtZXJhLnBvc2l0aW9uID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCk7XG4gKiBjYW1lcmEuZGlyZWN0aW9uID0gQ2VzaXVtLkNhcnRlc2lhbjMubmVnYXRlKENlc2l1bS5DYXJ0ZXNpYW4zLlVOSVRfWiwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCkpO1xuICogY2FtZXJhLnVwID0gQ2VzaXVtLkNhcnRlc2lhbjMuY2xvbmUoQ2VzaXVtLkNhcnRlc2lhbjMuVU5JVF9ZKTtcbiAqIGNhbWVyYS5mcnVzdHVtLmZvdiA9IENlc2l1bS5NYXRoLlBJX09WRVJfVEhSRUU7XG4gKiBjYW1lcmEuZnJ1c3R1bS5uZWFyID0gMS4wO1xuICogY2FtZXJhLmZydXN0dW0uZmFyID0gMi4wO1xuICovXG5mdW5jdGlvbiBDYW1lcmEoc2NlbmUpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHNjZW5lKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInNjZW5lIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcblxuICB0aGlzLl90cmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKE1hdHJpeDQuSURFTlRJVFkpO1xuICB0aGlzLl9pbnZUcmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKE1hdHJpeDQuSURFTlRJVFkpO1xuICB0aGlzLl9hY3R1YWxUcmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKE1hdHJpeDQuSURFTlRJVFkpO1xuICB0aGlzLl9hY3R1YWxJbnZUcmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKE1hdHJpeDQuSURFTlRJVFkpO1xuICB0aGlzLl90cmFuc2Zvcm1DaGFuZ2VkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgY2FtZXJhLlxuICAgKlxuICAgKiBAdHlwZSB7Q2FydGVzaWFuM31cbiAgICovXG4gIHRoaXMucG9zaXRpb24gPSBuZXcgQ2FydGVzaWFuMygpO1xuICB0aGlzLl9wb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIHRoaXMuX3Bvc2l0aW9uV0MgPSBuZXcgQ2FydGVzaWFuMygpO1xuICB0aGlzLl9wb3NpdGlvbkNhcnRvZ3JhcGhpYyA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbiAgdGhpcy5fb2xkUG9zaXRpb25XQyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIHBvc2l0aW9uIGRlbHRhIG1hZ25pdHVkZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMucG9zaXRpb25XQ0RlbHRhTWFnbml0dWRlID0gMC4wO1xuXG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpb24gZGVsdGEgbWFnbml0dWRlIGxhc3QgZnJhbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnBvc2l0aW9uV0NEZWx0YU1hZ25pdHVkZUxhc3RGcmFtZSA9IDAuMDtcblxuICAvKipcbiAgICogSG93IGxvbmcgaW4gc2Vjb25kcyBzaW5jZSB0aGUgY2FtZXJhIGhhcyBzdG9wcGVkIG1vdmluZ1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy50aW1lU2luY2VNb3ZlZCA9IDAuMDtcbiAgdGhpcy5fbGFzdE1vdmVkVGltZXN0YW1wID0gMC4wO1xuXG4gIC8qKlxuICAgKiBUaGUgdmlldyBkaXJlY3Rpb24gb2YgdGhlIGNhbWVyYS5cbiAgICpcbiAgICogQHR5cGUge0NhcnRlc2lhbjN9XG4gICAqL1xuICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIHRoaXMuX2RpcmVjdGlvbldDID0gbmV3IENhcnRlc2lhbjMoKTtcblxuICAvKipcbiAgICogVGhlIHVwIGRpcmVjdGlvbiBvZiB0aGUgY2FtZXJhLlxuICAgKlxuICAgKiBAdHlwZSB7Q2FydGVzaWFuM31cbiAgICovXG4gIHRoaXMudXAgPSBuZXcgQ2FydGVzaWFuMygpO1xuICB0aGlzLl91cCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIHRoaXMuX3VwV0MgPSBuZXcgQ2FydGVzaWFuMygpO1xuXG4gIC8qKlxuICAgKiBUaGUgcmlnaHQgZGlyZWN0aW9uIG9mIHRoZSBjYW1lcmEuXG4gICAqXG4gICAqIEB0eXBlIHtDYXJ0ZXNpYW4zfVxuICAgKi9cbiAgdGhpcy5yaWdodCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIHRoaXMuX3JpZ2h0ID0gbmV3IENhcnRlc2lhbjMoKTtcbiAgdGhpcy5fcmlnaHRXQyA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbiAgLyoqXG4gICAqIFRoZSByZWdpb24gb2Ygc3BhY2UgaW4gdmlldy5cbiAgICpcbiAgICogQHR5cGUge1BlcnNwZWN0aXZlRnJ1c3R1bXxQZXJzcGVjdGl2ZU9mZkNlbnRlckZydXN0dW18T3J0aG9ncmFwaGljRnJ1c3R1bX1cbiAgICogQGRlZmF1bHQgUGVyc3BlY3RpdmVGcnVzdHVtKClcbiAgICpcbiAgICogQHNlZSBQZXJzcGVjdGl2ZUZydXN0dW1cbiAgICogQHNlZSBQZXJzcGVjdGl2ZU9mZkNlbnRlckZydXN0dW1cbiAgICogQHNlZSBPcnRob2dyYXBoaWNGcnVzdHVtXG4gICAqL1xuICB0aGlzLmZydXN0dW0gPSBuZXcgUGVyc3BlY3RpdmVGcnVzdHVtKCk7XG4gIHRoaXMuZnJ1c3R1bS5hc3BlY3RSYXRpbyA9XG4gICAgc2NlbmUuZHJhd2luZ0J1ZmZlcldpZHRoIC8gc2NlbmUuZHJhd2luZ0J1ZmZlckhlaWdodDtcbiAgdGhpcy5mcnVzdHVtLmZvdiA9IENlc2l1bU1hdGgudG9SYWRpYW5zKDYwLjApO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbW91bnQgdG8gbW92ZSB0aGUgY2FtZXJhIHdoZW4gYW4gYXJndW1lbnQgaXMgbm90XG4gICAqIHByb3ZpZGVkIHRvIHRoZSBtb3ZlIG1ldGhvZHMuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDEwMDAwMC4wO1xuICAgKi9cbiAgdGhpcy5kZWZhdWx0TW92ZUFtb3VudCA9IDEwMDAwMC4wO1xuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYW1vdW50IHRvIHJvdGF0ZSB0aGUgY2FtZXJhIHdoZW4gYW4gYXJndW1lbnQgaXMgbm90XG4gICAqIHByb3ZpZGVkIHRvIHRoZSBsb29rIG1ldGhvZHMuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IE1hdGguUEkgLyA2MC4wXG4gICAqL1xuICB0aGlzLmRlZmF1bHRMb29rQW1vdW50ID0gTWF0aC5QSSAvIDYwLjA7XG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbW91bnQgdG8gcm90YXRlIHRoZSBjYW1lcmEgd2hlbiBhbiBhcmd1bWVudCBpcyBub3RcbiAgICogcHJvdmlkZWQgdG8gdGhlIHJvdGF0ZSBtZXRob2RzLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCBNYXRoLlBJIC8gMzYwMC4wXG4gICAqL1xuICB0aGlzLmRlZmF1bHRSb3RhdGVBbW91bnQgPSBNYXRoLlBJIC8gMzYwMC4wO1xuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYW1vdW50IHRvIG1vdmUgdGhlIGNhbWVyYSB3aGVuIGFuIGFyZ3VtZW50IGlzIG5vdFxuICAgKiBwcm92aWRlZCB0byB0aGUgem9vbSBtZXRob2RzLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAxMDAwMDAuMDtcbiAgICovXG4gIHRoaXMuZGVmYXVsdFpvb21BbW91bnQgPSAxMDAwMDAuMDtcbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGNhbWVyYSB3aWxsIG5vdCBiZSBhYmxlIHRvIHJvdGF0ZSBwYXN0IHRoaXMgYXhpcyBpbiBlaXRoZXIgZGlyZWN0aW9uLlxuICAgKiBAdHlwZSB7Q2FydGVzaWFuM31cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmNvbnN0cmFpbmVkQXhpcyA9IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIFRoZSBmYWN0b3IgbXVsdGlwbGllZCBieSB0aGUgdGhlIG1hcCBzaXplIHVzZWQgdG8gZGV0ZXJtaW5lIHdoZXJlIHRvIGNsYW1wIHRoZSBjYW1lcmEgcG9zaXRpb25cbiAgICogd2hlbiB6b29taW5nIG91dCBmcm9tIHRoZSBzdXJmYWNlLiBUaGUgZGVmYXVsdCBpcyAxLjUuIE9ubHkgdmFsaWQgZm9yIDJEIGFuZCB0aGUgbWFwIGlzIHJvdGF0YWJsZS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMS41XG4gICAqL1xuICB0aGlzLm1heGltdW1ab29tRmFjdG9yID0gMS41O1xuXG4gIHRoaXMuX21vdmVTdGFydCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9tb3ZlRW5kID0gbmV3IEV2ZW50KCk7XG5cbiAgdGhpcy5fY2hhbmdlZCA9IG5ldyBFdmVudCgpO1xuICB0aGlzLl9jaGFuZ2VkUG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2NoYW5nZWREaXJlY3Rpb24gPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2NoYW5nZWRGcnVzdHVtID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgYW1vdW50IHRoZSBjYW1lcmEgaGFzIHRvIGNoYW5nZSBiZWZvcmUgdGhlIDxjb2RlPmNoYW5nZWQ8L2NvZGU+IGV2ZW50IGlzIHJhaXNlZC4gVGhlIHZhbHVlIGlzIGEgcGVyY2VudGFnZSBpbiB0aGUgWzAsIDFdIHJhbmdlLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwLjVcbiAgICovXG4gIHRoaXMucGVyY2VudGFnZUNoYW5nZWQgPSAwLjU7XG5cbiAgdGhpcy5fdmlld01hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gIHRoaXMuX2ludlZpZXdNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICB1cGRhdGVWaWV3TWF0cml4KHRoaXMpO1xuXG4gIHRoaXMuX21vZGUgPSBTY2VuZU1vZGUuU0NFTkUzRDtcbiAgdGhpcy5fbW9kZUNoYW5nZWQgPSB0cnVlO1xuICB2YXIgcHJvamVjdGlvbiA9IHNjZW5lLm1hcFByb2plY3Rpb247XG4gIHRoaXMuX3Byb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICB0aGlzLl9tYXhDb29yZCA9IHByb2plY3Rpb24ucHJvamVjdChcbiAgICBuZXcgQ2FydG9ncmFwaGljKE1hdGguUEksIENlc2l1bU1hdGguUElfT1ZFUl9UV08pXG4gICk7XG4gIHRoaXMuX21heDJEZnJ1c3R1bSA9IHVuZGVmaW5lZDtcblxuICAvLyBzZXQgZGVmYXVsdCB2aWV3XG4gIHJlY3RhbmdsZUNhbWVyYVBvc2l0aW9uM0QoXG4gICAgdGhpcyxcbiAgICBDYW1lcmEuREVGQVVMVF9WSUVXX1JFQ1RBTkdMRSxcbiAgICB0aGlzLnBvc2l0aW9uLFxuICAgIHRydWVcbiAgKTtcblxuICB2YXIgbWFnID0gQ2FydGVzaWFuMy5tYWduaXR1ZGUodGhpcy5wb3NpdGlvbik7XG4gIG1hZyArPSBtYWcgKiBDYW1lcmEuREVGQVVMVF9WSUVXX0ZBQ1RPUjtcbiAgQ2FydGVzaWFuMy5ub3JtYWxpemUodGhpcy5wb3NpdGlvbiwgdGhpcy5wb3NpdGlvbik7XG4gIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcih0aGlzLnBvc2l0aW9uLCBtYWcsIHRoaXMucG9zaXRpb24pO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkNhbWVyYS5UUkFOU0ZPUk1fMkQgPSBuZXcgTWF0cml4NChcbiAgMC4wLFxuICAwLjAsXG4gIDEuMCxcbiAgMC4wLFxuICAxLjAsXG4gIDAuMCxcbiAgMC4wLFxuICAwLjAsXG4gIDAuMCxcbiAgMS4wLFxuICAwLjAsXG4gIDAuMCxcbiAgMC4wLFxuICAwLjAsXG4gIDAuMCxcbiAgMS4wXG4pO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkNhbWVyYS5UUkFOU0ZPUk1fMkRfSU5WRVJTRSA9IE1hdHJpeDQuaW52ZXJzZVRyYW5zZm9ybWF0aW9uKFxuICBDYW1lcmEuVFJBTlNGT1JNXzJELFxuICBuZXcgTWF0cml4NCgpXG4pO1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IHJlY3RhbmdsZSB0aGUgY2FtZXJhIHdpbGwgdmlldyBvbiBjcmVhdGlvbi5cbiAqIEB0eXBlIFJlY3RhbmdsZVxuICovXG5DYW1lcmEuREVGQVVMVF9WSUVXX1JFQ1RBTkdMRSA9IFJlY3RhbmdsZS5mcm9tRGVncmVlcyhcbiAgLTk1LjAsXG4gIC0yMC4wLFxuICAtNzAuMCxcbiAgOTAuMFxuKTtcblxuLyoqXG4gKiBBIHNjYWxhciB0byBtdWx0aXBseSB0byB0aGUgY2FtZXJhIHBvc2l0aW9uIGFuZCBhZGQgaXQgYmFjayBhZnRlciBzZXR0aW5nIHRoZSBjYW1lcmEgdG8gdmlldyB0aGUgcmVjdGFuZ2xlLlxuICogQSB2YWx1ZSBvZiB6ZXJvIG1lYW5zIHRoZSBjYW1lcmEgd2lsbCB2aWV3IHRoZSBlbnRpcmUge0BsaW5rIENhbWVyYSNERUZBVUxUX1ZJRVdfUkVDVEFOR0xFfSwgYSB2YWx1ZSBncmVhdGVyIHRoYW4gemVyb1xuICogd2lsbCBtb3ZlIGl0IGZ1cnRoZXIgYXdheSBmcm9tIHRoZSBleHRlbnQsIGFuZCBhIHZhbHVlIGxlc3MgdGhhbiB6ZXJvIHdpbGwgbW92ZSBpdCBjbG9zZSB0byB0aGUgZXh0ZW50LlxuICogQHR5cGUgTnVtYmVyXG4gKi9cbkNhbWVyYS5ERUZBVUxUX1ZJRVdfRkFDVE9SID0gMC41O1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGhlYWRpbmcvcGl0Y2gvcmFuZ2UgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIGNhbWVyYSBmbGllcyB0byBhIGxvY2F0aW9uIHRoYXQgY29udGFpbnMgYSBib3VuZGluZyBzcGhlcmUuXG4gKiBAdHlwZSBIZWFkaW5nUGl0Y2hSYW5nZVxuICovXG5DYW1lcmEuREVGQVVMVF9PRkZTRVQgPSBuZXcgSGVhZGluZ1BpdGNoUmFuZ2UoXG4gIDAuMCxcbiAgLUNlc2l1bU1hdGguUElfT1ZFUl9GT1VSLFxuICAwLjBcbik7XG5cbmZ1bmN0aW9uIHVwZGF0ZVZpZXdNYXRyaXgoY2FtZXJhKSB7XG4gIE1hdHJpeDQuY29tcHV0ZVZpZXcoXG4gICAgY2FtZXJhLl9wb3NpdGlvbixcbiAgICBjYW1lcmEuX2RpcmVjdGlvbixcbiAgICBjYW1lcmEuX3VwLFxuICAgIGNhbWVyYS5fcmlnaHQsXG4gICAgY2FtZXJhLl92aWV3TWF0cml4XG4gICk7XG4gIE1hdHJpeDQubXVsdGlwbHkoXG4gICAgY2FtZXJhLl92aWV3TWF0cml4LFxuICAgIGNhbWVyYS5fYWN0dWFsSW52VHJhbnNmb3JtLFxuICAgIGNhbWVyYS5fdmlld01hdHJpeFxuICApO1xuICBNYXRyaXg0LmludmVyc2VUcmFuc2Zvcm1hdGlvbihjYW1lcmEuX3ZpZXdNYXRyaXgsIGNhbWVyYS5faW52Vmlld01hdHJpeCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhbWVyYURlbHRhcyhjYW1lcmEpIHtcbiAgaWYgKCFkZWZpbmVkKGNhbWVyYS5fb2xkUG9zaXRpb25XQykpIHtcbiAgICBjYW1lcmEuX29sZFBvc2l0aW9uV0MgPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgY2FtZXJhLnBvc2l0aW9uV0MsXG4gICAgICBjYW1lcmEuX29sZFBvc2l0aW9uV0NcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNhbWVyYS5wb3NpdGlvbldDRGVsdGFNYWduaXR1ZGVMYXN0RnJhbWUgPSBjYW1lcmEucG9zaXRpb25XQ0RlbHRhTWFnbml0dWRlO1xuICAgIHZhciBkZWx0YSA9IENhcnRlc2lhbjMuc3VidHJhY3QoXG4gICAgICBjYW1lcmEucG9zaXRpb25XQyxcbiAgICAgIGNhbWVyYS5fb2xkUG9zaXRpb25XQyxcbiAgICAgIGNhbWVyYS5fb2xkUG9zaXRpb25XQ1xuICAgICk7XG4gICAgY2FtZXJhLnBvc2l0aW9uV0NEZWx0YU1hZ25pdHVkZSA9IENhcnRlc2lhbjMubWFnbml0dWRlKGRlbHRhKTtcbiAgICBjYW1lcmEuX29sZFBvc2l0aW9uV0MgPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgY2FtZXJhLnBvc2l0aW9uV0MsXG4gICAgICBjYW1lcmEuX29sZFBvc2l0aW9uV0NcbiAgICApO1xuXG4gICAgLy8gVXBkYXRlIG1vdmUgdGltZXJzXG4gICAgaWYgKGNhbWVyYS5wb3NpdGlvbldDRGVsdGFNYWduaXR1ZGUgPiAwLjApIHtcbiAgICAgIGNhbWVyYS50aW1lU2luY2VNb3ZlZCA9IDAuMDtcbiAgICAgIGNhbWVyYS5fbGFzdE1vdmVkVGltZXN0YW1wID0gZ2V0VGltZXN0YW1wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbWVyYS50aW1lU2luY2VNb3ZlZCA9XG4gICAgICAgIE1hdGgubWF4KGdldFRpbWVzdGFtcCgpIC0gY2FtZXJhLl9sYXN0TW92ZWRUaW1lc3RhbXAsIDAuMCkgLyAxMDAwLjA7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZXJlJ3MgYSBjYW1lcmEgZmxpZ2h0IHdpdGggcHJlbG9hZCBmb3IgdGhpcyBjYW1lcmEuXG4gKlxuICogQHJldHVybnMge0Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoaXMgY2FtZXJhIGhhcyBhIGN1cnJlbnQgZmxpZ2h0IHdpdGggYSB2YWxpZCBwcmVsb2FkRmxpZ2h0Q2FtZXJhIGluIHNjZW5lLlxuICpcbiAqIEBwcml2YXRlXG4gKlxuICovXG5DYW1lcmEucHJvdG90eXBlLmNhblByZWxvYWRGbGlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBkZWZpbmVkKHRoaXMuX2N1cnJlbnRGbGlnaHQpICYmIHRoaXMuX21vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTJEO1xufTtcblxuQ2FtZXJhLnByb3RvdHlwZS5fdXBkYXRlQ2FtZXJhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhbWVyYSA9IHRoaXM7XG5cbiAgdXBkYXRlQ2FtZXJhRGVsdGFzKGNhbWVyYSk7XG5cbiAgaWYgKGNhbWVyYS5fY2hhbmdlZC5udW1iZXJPZkxpc3RlbmVycyA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBwZXJjZW50YWdlQ2hhbmdlZCA9IGNhbWVyYS5wZXJjZW50YWdlQ2hhbmdlZDtcblxuICBpZiAoY2FtZXJhLl9tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIGlmICghZGVmaW5lZChjYW1lcmEuX2NoYW5nZWRGcnVzdHVtKSkge1xuICAgICAgY2FtZXJhLl9jaGFuZ2VkUG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgICBjYW1lcmEucG9zaXRpb24sXG4gICAgICAgIGNhbWVyYS5fY2hhbmdlZFBvc2l0aW9uXG4gICAgICApO1xuICAgICAgY2FtZXJhLl9jaGFuZ2VkRnJ1c3R1bSA9IGNhbWVyYS5mcnVzdHVtLmNsb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBvc2l0aW9uID0gY2FtZXJhLnBvc2l0aW9uO1xuICAgIHZhciBsYXN0UG9zaXRpb24gPSBjYW1lcmEuX2NoYW5nZWRQb3NpdGlvbjtcblxuICAgIHZhciBmcnVzdHVtID0gY2FtZXJhLmZydXN0dW07XG4gICAgdmFyIGxhc3RGcnVzdHVtID0gY2FtZXJhLl9jaGFuZ2VkRnJ1c3R1bTtcblxuICAgIHZhciB4MCA9IHBvc2l0aW9uLnggKyBmcnVzdHVtLmxlZnQ7XG4gICAgdmFyIHgxID0gcG9zaXRpb24ueCArIGZydXN0dW0ucmlnaHQ7XG4gICAgdmFyIHgyID0gbGFzdFBvc2l0aW9uLnggKyBsYXN0RnJ1c3R1bS5sZWZ0O1xuICAgIHZhciB4MyA9IGxhc3RQb3NpdGlvbi54ICsgbGFzdEZydXN0dW0ucmlnaHQ7XG5cbiAgICB2YXIgeTAgPSBwb3NpdGlvbi55ICsgZnJ1c3R1bS5ib3R0b207XG4gICAgdmFyIHkxID0gcG9zaXRpb24ueSArIGZydXN0dW0udG9wO1xuICAgIHZhciB5MiA9IGxhc3RQb3NpdGlvbi55ICsgbGFzdEZydXN0dW0uYm90dG9tO1xuICAgIHZhciB5MyA9IGxhc3RQb3NpdGlvbi55ICsgbGFzdEZydXN0dW0udG9wO1xuXG4gICAgdmFyIGxlZnRYID0gTWF0aC5tYXgoeDAsIHgyKTtcbiAgICB2YXIgcmlnaHRYID0gTWF0aC5taW4oeDEsIHgzKTtcbiAgICB2YXIgYm90dG9tWSA9IE1hdGgubWF4KHkwLCB5Mik7XG4gICAgdmFyIHRvcFkgPSBNYXRoLm1pbih5MSwgeTMpO1xuXG4gICAgdmFyIGFyZWFQZXJjZW50YWdlO1xuICAgIGlmIChsZWZ0WCA+PSByaWdodFggfHwgYm90dG9tWSA+PSB5MSkge1xuICAgICAgYXJlYVBlcmNlbnRhZ2UgPSAxLjA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmVhUmVmID0gbGFzdEZydXN0dW07XG4gICAgICBpZiAoeDAgPCB4MiAmJiB4MSA+IHgzICYmIHkwIDwgeTIgJiYgeTEgPiB5Mykge1xuICAgICAgICBhcmVhUmVmID0gZnJ1c3R1bTtcbiAgICAgIH1cbiAgICAgIGFyZWFQZXJjZW50YWdlID1cbiAgICAgICAgMS4wIC1cbiAgICAgICAgKChyaWdodFggLSBsZWZ0WCkgKiAodG9wWSAtIGJvdHRvbVkpKSAvXG4gICAgICAgICAgKChhcmVhUmVmLnJpZ2h0IC0gYXJlYVJlZi5sZWZ0KSAqIChhcmVhUmVmLnRvcCAtIGFyZWFSZWYuYm90dG9tKSk7XG4gICAgfVxuXG4gICAgaWYgKGFyZWFQZXJjZW50YWdlID4gcGVyY2VudGFnZUNoYW5nZWQpIHtcbiAgICAgIGNhbWVyYS5fY2hhbmdlZC5yYWlzZUV2ZW50KGFyZWFQZXJjZW50YWdlKTtcbiAgICAgIGNhbWVyYS5fY2hhbmdlZFBvc2l0aW9uID0gQ2FydGVzaWFuMy5jbG9uZShcbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLFxuICAgICAgICBjYW1lcmEuX2NoYW5nZWRQb3NpdGlvblxuICAgICAgKTtcbiAgICAgIGNhbWVyYS5fY2hhbmdlZEZydXN0dW0gPSBjYW1lcmEuZnJ1c3R1bS5jbG9uZShjYW1lcmEuX2NoYW5nZWRGcnVzdHVtKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFkZWZpbmVkKGNhbWVyYS5fY2hhbmdlZERpcmVjdGlvbikpIHtcbiAgICBjYW1lcmEuX2NoYW5nZWRQb3NpdGlvbiA9IENhcnRlc2lhbjMuY2xvbmUoXG4gICAgICBjYW1lcmEucG9zaXRpb25XQyxcbiAgICAgIGNhbWVyYS5fY2hhbmdlZFBvc2l0aW9uXG4gICAgKTtcbiAgICBjYW1lcmEuX2NoYW5nZWREaXJlY3Rpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgICAgY2FtZXJhLmRpcmVjdGlvbldDLFxuICAgICAgY2FtZXJhLl9jaGFuZ2VkRGlyZWN0aW9uXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZGlyQW5nbGUgPSBDZXNpdW1NYXRoLmFjb3NDbGFtcGVkKFxuICAgIENhcnRlc2lhbjMuZG90KGNhbWVyYS5kaXJlY3Rpb25XQywgY2FtZXJhLl9jaGFuZ2VkRGlyZWN0aW9uKVxuICApO1xuXG4gIHZhciBkaXJQZXJjZW50YWdlO1xuICBpZiAoZGVmaW5lZChjYW1lcmEuZnJ1c3R1bS5mb3Z5KSkge1xuICAgIGRpclBlcmNlbnRhZ2UgPSBkaXJBbmdsZSAvIChjYW1lcmEuZnJ1c3R1bS5mb3Z5ICogMC41KTtcbiAgfSBlbHNlIHtcbiAgICBkaXJQZXJjZW50YWdlID0gZGlyQW5nbGU7XG4gIH1cblxuICB2YXIgZGlzdGFuY2UgPSBDYXJ0ZXNpYW4zLmRpc3RhbmNlKFxuICAgIGNhbWVyYS5wb3NpdGlvbldDLFxuICAgIGNhbWVyYS5fY2hhbmdlZFBvc2l0aW9uXG4gICk7XG4gIHZhciBoZWlnaHRQZXJjZW50YWdlID0gZGlzdGFuY2UgLyBjYW1lcmEucG9zaXRpb25DYXJ0b2dyYXBoaWMuaGVpZ2h0O1xuXG4gIGlmIChcbiAgICBkaXJQZXJjZW50YWdlID4gcGVyY2VudGFnZUNoYW5nZWQgfHxcbiAgICBoZWlnaHRQZXJjZW50YWdlID4gcGVyY2VudGFnZUNoYW5nZWRcbiAgKSB7XG4gICAgY2FtZXJhLl9jaGFuZ2VkLnJhaXNlRXZlbnQoTWF0aC5tYXgoZGlyUGVyY2VudGFnZSwgaGVpZ2h0UGVyY2VudGFnZSkpO1xuICAgIGNhbWVyYS5fY2hhbmdlZFBvc2l0aW9uID0gQ2FydGVzaWFuMy5jbG9uZShcbiAgICAgIGNhbWVyYS5wb3NpdGlvbldDLFxuICAgICAgY2FtZXJhLl9jaGFuZ2VkUG9zaXRpb25cbiAgICApO1xuICAgIGNhbWVyYS5fY2hhbmdlZERpcmVjdGlvbiA9IENhcnRlc2lhbjMuY2xvbmUoXG4gICAgICBjYW1lcmEuZGlyZWN0aW9uV0MsXG4gICAgICBjYW1lcmEuX2NoYW5nZWREaXJlY3Rpb25cbiAgICApO1xuICB9XG59O1xuXG5mdW5jdGlvbiBjb252ZXJ0VHJhbnNmb3JtRm9yQ29sdW1idXNWaWV3KGNhbWVyYSkge1xuICBUcmFuc2Zvcm1zLmJhc2lzVG8yRChcbiAgICBjYW1lcmEuX3Byb2plY3Rpb24sXG4gICAgY2FtZXJhLl90cmFuc2Zvcm0sXG4gICAgY2FtZXJhLl9hY3R1YWxUcmFuc2Zvcm1cbiAgKTtcbn1cblxudmFyIHNjcmF0Y2hDYXJ0b2dyYXBoaWMgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgc2NyYXRjaENhcnRlc2lhbjNQcm9qZWN0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuMyA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaENhcnRlc2lhbjRPcmlnaW4gPSBuZXcgQ2FydGVzaWFuNCgpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW40TmV3T3JpZ2luID0gbmV3IENhcnRlc2lhbjQoKTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuNE5ld1hBeGlzID0gbmV3IENhcnRlc2lhbjQoKTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuNE5ld1lBeGlzID0gbmV3IENhcnRlc2lhbjQoKTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuNE5ld1pBeGlzID0gbmV3IENhcnRlc2lhbjQoKTtcblxuZnVuY3Rpb24gY29udmVydFRyYW5zZm9ybUZvcjJEKGNhbWVyYSkge1xuICB2YXIgcHJvamVjdGlvbiA9IGNhbWVyYS5fcHJvamVjdGlvbjtcbiAgdmFyIGVsbGlwc29pZCA9IHByb2plY3Rpb24uZWxsaXBzb2lkO1xuXG4gIHZhciBvcmlnaW4gPSBNYXRyaXg0LmdldENvbHVtbihjYW1lcmEuX3RyYW5zZm9ybSwgMywgc2NyYXRjaENhcnRlc2lhbjRPcmlnaW4pO1xuICB2YXIgY2FydG9ncmFwaGljID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKFxuICAgIG9yaWdpbixcbiAgICBzY3JhdGNoQ2FydG9ncmFwaGljXG4gICk7XG5cbiAgdmFyIHByb2plY3RlZFBvc2l0aW9uID0gcHJvamVjdGlvbi5wcm9qZWN0KFxuICAgIGNhcnRvZ3JhcGhpYyxcbiAgICBzY3JhdGNoQ2FydGVzaWFuM1Byb2plY3Rpb25cbiAgKTtcbiAgdmFyIG5ld09yaWdpbiA9IHNjcmF0Y2hDYXJ0ZXNpYW40TmV3T3JpZ2luO1xuICBuZXdPcmlnaW4ueCA9IHByb2plY3RlZFBvc2l0aW9uLno7XG4gIG5ld09yaWdpbi55ID0gcHJvamVjdGVkUG9zaXRpb24ueDtcbiAgbmV3T3JpZ2luLnogPSBwcm9qZWN0ZWRQb3NpdGlvbi55O1xuICBuZXdPcmlnaW4udyA9IDEuMDtcblxuICB2YXIgbmV3WkF4aXMgPSBDYXJ0ZXNpYW40LmNsb25lKENhcnRlc2lhbjQuVU5JVF9YLCBzY3JhdGNoQ2FydGVzaWFuNE5ld1pBeGlzKTtcblxuICB2YXIgeEF4aXMgPSBDYXJ0ZXNpYW40LmFkZChcbiAgICBNYXRyaXg0LmdldENvbHVtbihjYW1lcmEuX3RyYW5zZm9ybSwgMCwgc2NyYXRjaENhcnRlc2lhbjMpLFxuICAgIG9yaWdpbixcbiAgICBzY3JhdGNoQ2FydGVzaWFuM1xuICApO1xuICBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoeEF4aXMsIGNhcnRvZ3JhcGhpYyk7XG5cbiAgcHJvamVjdGlvbi5wcm9qZWN0KGNhcnRvZ3JhcGhpYywgcHJvamVjdGVkUG9zaXRpb24pO1xuICB2YXIgbmV3WEF4aXMgPSBzY3JhdGNoQ2FydGVzaWFuNE5ld1hBeGlzO1xuICBuZXdYQXhpcy54ID0gcHJvamVjdGVkUG9zaXRpb24uejtcbiAgbmV3WEF4aXMueSA9IHByb2plY3RlZFBvc2l0aW9uLng7XG4gIG5ld1hBeGlzLnogPSBwcm9qZWN0ZWRQb3NpdGlvbi55O1xuICBuZXdYQXhpcy53ID0gMC4wO1xuXG4gIENhcnRlc2lhbjMuc3VidHJhY3QobmV3WEF4aXMsIG5ld09yaWdpbiwgbmV3WEF4aXMpO1xuICBuZXdYQXhpcy54ID0gMC4wO1xuXG4gIHZhciBuZXdZQXhpcyA9IHNjcmF0Y2hDYXJ0ZXNpYW40TmV3WUF4aXM7XG4gIGlmIChDYXJ0ZXNpYW4zLm1hZ25pdHVkZVNxdWFyZWQobmV3WEF4aXMpID4gQ2VzaXVtTWF0aC5FUFNJTE9OMTApIHtcbiAgICBDYXJ0ZXNpYW4zLmNyb3NzKG5ld1pBeGlzLCBuZXdYQXhpcywgbmV3WUF4aXMpO1xuICB9IGVsc2Uge1xuICAgIHZhciB5QXhpcyA9IENhcnRlc2lhbjQuYWRkKFxuICAgICAgTWF0cml4NC5nZXRDb2x1bW4oY2FtZXJhLl90cmFuc2Zvcm0sIDEsIHNjcmF0Y2hDYXJ0ZXNpYW4zKSxcbiAgICAgIG9yaWdpbixcbiAgICAgIHNjcmF0Y2hDYXJ0ZXNpYW4zXG4gICAgKTtcbiAgICBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoeUF4aXMsIGNhcnRvZ3JhcGhpYyk7XG5cbiAgICBwcm9qZWN0aW9uLnByb2plY3QoY2FydG9ncmFwaGljLCBwcm9qZWN0ZWRQb3NpdGlvbik7XG4gICAgbmV3WUF4aXMueCA9IHByb2plY3RlZFBvc2l0aW9uLno7XG4gICAgbmV3WUF4aXMueSA9IHByb2plY3RlZFBvc2l0aW9uLng7XG4gICAgbmV3WUF4aXMueiA9IHByb2plY3RlZFBvc2l0aW9uLnk7XG4gICAgbmV3WUF4aXMudyA9IDAuMDtcblxuICAgIENhcnRlc2lhbjMuc3VidHJhY3QobmV3WUF4aXMsIG5ld09yaWdpbiwgbmV3WUF4aXMpO1xuICAgIG5ld1lBeGlzLnggPSAwLjA7XG5cbiAgICBpZiAoQ2FydGVzaWFuMy5tYWduaXR1ZGVTcXVhcmVkKG5ld1lBeGlzKSA8IENlc2l1bU1hdGguRVBTSUxPTjEwKSB7XG4gICAgICBDYXJ0ZXNpYW40LmNsb25lKENhcnRlc2lhbjQuVU5JVF9ZLCBuZXdYQXhpcyk7XG4gICAgICBDYXJ0ZXNpYW40LmNsb25lKENhcnRlc2lhbjQuVU5JVF9aLCBuZXdZQXhpcyk7XG4gICAgfVxuICB9XG5cbiAgQ2FydGVzaWFuMy5jcm9zcyhuZXdZQXhpcywgbmV3WkF4aXMsIG5ld1hBeGlzKTtcbiAgQ2FydGVzaWFuMy5ub3JtYWxpemUobmV3WEF4aXMsIG5ld1hBeGlzKTtcbiAgQ2FydGVzaWFuMy5jcm9zcyhuZXdaQXhpcywgbmV3WEF4aXMsIG5ld1lBeGlzKTtcbiAgQ2FydGVzaWFuMy5ub3JtYWxpemUobmV3WUF4aXMsIG5ld1lBeGlzKTtcblxuICBNYXRyaXg0LnNldENvbHVtbihcbiAgICBjYW1lcmEuX2FjdHVhbFRyYW5zZm9ybSxcbiAgICAwLFxuICAgIG5ld1hBeGlzLFxuICAgIGNhbWVyYS5fYWN0dWFsVHJhbnNmb3JtXG4gICk7XG4gIE1hdHJpeDQuc2V0Q29sdW1uKFxuICAgIGNhbWVyYS5fYWN0dWFsVHJhbnNmb3JtLFxuICAgIDEsXG4gICAgbmV3WUF4aXMsXG4gICAgY2FtZXJhLl9hY3R1YWxUcmFuc2Zvcm1cbiAgKTtcbiAgTWF0cml4NC5zZXRDb2x1bW4oXG4gICAgY2FtZXJhLl9hY3R1YWxUcmFuc2Zvcm0sXG4gICAgMixcbiAgICBuZXdaQXhpcyxcbiAgICBjYW1lcmEuX2FjdHVhbFRyYW5zZm9ybVxuICApO1xuICBNYXRyaXg0LnNldENvbHVtbihcbiAgICBjYW1lcmEuX2FjdHVhbFRyYW5zZm9ybSxcbiAgICAzLFxuICAgIG5ld09yaWdpbixcbiAgICBjYW1lcmEuX2FjdHVhbFRyYW5zZm9ybVxuICApO1xufVxuXG52YXIgc2NyYXRjaENhcnRlc2lhbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbmZ1bmN0aW9uIHVwZGF0ZU1lbWJlcnMoY2FtZXJhKSB7XG4gIHZhciBtb2RlID0gY2FtZXJhLl9tb2RlO1xuXG4gIHZhciBoZWlnaHRDaGFuZ2VkID0gZmFsc2U7XG4gIHZhciBoZWlnaHQgPSAwLjA7XG4gIGlmIChtb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIGhlaWdodCA9IGNhbWVyYS5mcnVzdHVtLnJpZ2h0IC0gY2FtZXJhLmZydXN0dW0ubGVmdDtcbiAgICBoZWlnaHRDaGFuZ2VkID0gaGVpZ2h0ICE9PSBjYW1lcmEuX3Bvc2l0aW9uQ2FydG9ncmFwaGljLmhlaWdodDtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbiA9IGNhbWVyYS5fcG9zaXRpb247XG4gIHZhciBwb3NpdGlvbkNoYW5nZWQgPVxuICAgICFDYXJ0ZXNpYW4zLmVxdWFscyhwb3NpdGlvbiwgY2FtZXJhLnBvc2l0aW9uKSB8fCBoZWlnaHRDaGFuZ2VkO1xuICBpZiAocG9zaXRpb25DaGFuZ2VkKSB7XG4gICAgcG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKGNhbWVyYS5wb3NpdGlvbiwgY2FtZXJhLl9wb3NpdGlvbik7XG4gIH1cblxuICB2YXIgZGlyZWN0aW9uID0gY2FtZXJhLl9kaXJlY3Rpb247XG4gIHZhciBkaXJlY3Rpb25DaGFuZ2VkID0gIUNhcnRlc2lhbjMuZXF1YWxzKGRpcmVjdGlvbiwgY2FtZXJhLmRpcmVjdGlvbik7XG4gIGlmIChkaXJlY3Rpb25DaGFuZ2VkKSB7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUoY2FtZXJhLmRpcmVjdGlvbiwgY2FtZXJhLmRpcmVjdGlvbik7XG4gICAgZGlyZWN0aW9uID0gQ2FydGVzaWFuMy5jbG9uZShjYW1lcmEuZGlyZWN0aW9uLCBjYW1lcmEuX2RpcmVjdGlvbik7XG4gIH1cblxuICB2YXIgdXAgPSBjYW1lcmEuX3VwO1xuICB2YXIgdXBDaGFuZ2VkID0gIUNhcnRlc2lhbjMuZXF1YWxzKHVwLCBjYW1lcmEudXApO1xuICBpZiAodXBDaGFuZ2VkKSB7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUoY2FtZXJhLnVwLCBjYW1lcmEudXApO1xuICAgIHVwID0gQ2FydGVzaWFuMy5jbG9uZShjYW1lcmEudXAsIGNhbWVyYS5fdXApO1xuICB9XG5cbiAgdmFyIHJpZ2h0ID0gY2FtZXJhLl9yaWdodDtcbiAgdmFyIHJpZ2h0Q2hhbmdlZCA9ICFDYXJ0ZXNpYW4zLmVxdWFscyhyaWdodCwgY2FtZXJhLnJpZ2h0KTtcbiAgaWYgKHJpZ2h0Q2hhbmdlZCkge1xuICAgIENhcnRlc2lhbjMubm9ybWFsaXplKGNhbWVyYS5yaWdodCwgY2FtZXJhLnJpZ2h0KTtcbiAgICByaWdodCA9IENhcnRlc2lhbjMuY2xvbmUoY2FtZXJhLnJpZ2h0LCBjYW1lcmEuX3JpZ2h0KTtcbiAgfVxuXG4gIHZhciB0cmFuc2Zvcm1DaGFuZ2VkID0gY2FtZXJhLl90cmFuc2Zvcm1DaGFuZ2VkIHx8IGNhbWVyYS5fbW9kZUNoYW5nZWQ7XG4gIGNhbWVyYS5fdHJhbnNmb3JtQ2hhbmdlZCA9IGZhbHNlO1xuXG4gIGlmICh0cmFuc2Zvcm1DaGFuZ2VkKSB7XG4gICAgTWF0cml4NC5pbnZlcnNlVHJhbnNmb3JtYXRpb24oY2FtZXJhLl90cmFuc2Zvcm0sIGNhbWVyYS5faW52VHJhbnNmb3JtKTtcblxuICAgIGlmIChcbiAgICAgIGNhbWVyYS5fbW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcgfHxcbiAgICAgIGNhbWVyYS5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkRcbiAgICApIHtcbiAgICAgIGlmIChNYXRyaXg0LmVxdWFscyhNYXRyaXg0LklERU5USVRZLCBjYW1lcmEuX3RyYW5zZm9ybSkpIHtcbiAgICAgICAgTWF0cml4NC5jbG9uZShDYW1lcmEuVFJBTlNGT1JNXzJELCBjYW1lcmEuX2FjdHVhbFRyYW5zZm9ybSk7XG4gICAgICB9IGVsc2UgaWYgKGNhbWVyYS5fbW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcpIHtcbiAgICAgICAgY29udmVydFRyYW5zZm9ybUZvckNvbHVtYnVzVmlldyhjYW1lcmEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udmVydFRyYW5zZm9ybUZvcjJEKGNhbWVyYSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIE1hdHJpeDQuY2xvbmUoY2FtZXJhLl90cmFuc2Zvcm0sIGNhbWVyYS5fYWN0dWFsVHJhbnNmb3JtKTtcbiAgICB9XG5cbiAgICBNYXRyaXg0LmludmVyc2VUcmFuc2Zvcm1hdGlvbihcbiAgICAgIGNhbWVyYS5fYWN0dWFsVHJhbnNmb3JtLFxuICAgICAgY2FtZXJhLl9hY3R1YWxJbnZUcmFuc2Zvcm1cbiAgICApO1xuXG4gICAgY2FtZXJhLl9tb2RlQ2hhbmdlZCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIHRyYW5zZm9ybSA9IGNhbWVyYS5fYWN0dWFsVHJhbnNmb3JtO1xuXG4gIGlmIChwb3NpdGlvbkNoYW5nZWQgfHwgdHJhbnNmb3JtQ2hhbmdlZCkge1xuICAgIGNhbWVyYS5fcG9zaXRpb25XQyA9IE1hdHJpeDQubXVsdGlwbHlCeVBvaW50KFxuICAgICAgdHJhbnNmb3JtLFxuICAgICAgcG9zaXRpb24sXG4gICAgICBjYW1lcmEuX3Bvc2l0aW9uV0NcbiAgICApO1xuXG4gICAgLy8gQ29tcHV0ZSB0aGUgQ2FydG9ncmFwaGljIHBvc2l0aW9uIG9mIHRoZSBjYW1lcmEuXG4gICAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEIHx8IG1vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xuICAgICAgY2FtZXJhLl9wb3NpdGlvbkNhcnRvZ3JhcGhpYyA9IGNhbWVyYS5fcHJvamVjdGlvbi5lbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgICAgIGNhbWVyYS5fcG9zaXRpb25XQyxcbiAgICAgICAgY2FtZXJhLl9wb3NpdGlvbkNhcnRvZ3JhcGhpY1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlIGNhbWVyYSBwb3NpdGlvbiBpcyBleHByZXNzZWQgaW4gdGhlIDJEIGNvb3JkaW5hdGUgc3lzdGVtIHdoZXJlIHRoZSBZIGF4aXMgaXMgdG8gdGhlIEVhc3QsXG4gICAgICAvLyB0aGUgWiBheGlzIGlzIHRvIHRoZSBOb3J0aCwgYW5kIHRoZSBYIGF4aXMgaXMgb3V0IG9mIHRoZSBtYXAuICBFeHByZXNzIHRoZW0gaW5zdGVhZCBpbiB0aGUgRU5VIGF4ZXMgd2hlcmVcbiAgICAgIC8vIFggaXMgdG8gdGhlIEVhc3QsIFkgaXMgdG8gdGhlIE5vcnRoLCBhbmQgWiBpcyBvdXQgb2YgdGhlIGxvY2FsIGhvcml6b250YWwgcGxhbmUuXG4gICAgICB2YXIgcG9zaXRpb25FTlUgPSBzY3JhdGNoQ2FydGVzaWFuO1xuICAgICAgcG9zaXRpb25FTlUueCA9IGNhbWVyYS5fcG9zaXRpb25XQy55O1xuICAgICAgcG9zaXRpb25FTlUueSA9IGNhbWVyYS5fcG9zaXRpb25XQy56O1xuICAgICAgcG9zaXRpb25FTlUueiA9IGNhbWVyYS5fcG9zaXRpb25XQy54O1xuXG4gICAgICAvLyBJbiAyRCwgdGhlIGNhbWVyYSBoZWlnaHQgaXMgYWx3YXlzIDEyLjcgbWlsbGlvbiBtZXRlcnMuXG4gICAgICAvLyBUaGUgYXBwYXJlbnQgaGVpZ2h0IGlzIGVxdWFsIHRvIGhhbGYgdGhlIGZydXN0dW0gd2lkdGguXG4gICAgICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQpIHtcbiAgICAgICAgcG9zaXRpb25FTlUueiA9IGhlaWdodDtcbiAgICAgIH1cblxuICAgICAgY2FtZXJhLl9wcm9qZWN0aW9uLnVucHJvamVjdChwb3NpdGlvbkVOVSwgY2FtZXJhLl9wb3NpdGlvbkNhcnRvZ3JhcGhpYyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRpcmVjdGlvbkNoYW5nZWQgfHwgdXBDaGFuZ2VkIHx8IHJpZ2h0Q2hhbmdlZCkge1xuICAgIHZhciBkZXQgPSBDYXJ0ZXNpYW4zLmRvdChcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIENhcnRlc2lhbjMuY3Jvc3ModXAsIHJpZ2h0LCBzY3JhdGNoQ2FydGVzaWFuKVxuICAgICk7XG4gICAgaWYgKE1hdGguYWJzKDEuMCAtIGRldCkgPiBDZXNpdW1NYXRoLkVQU0lMT04yKSB7XG4gICAgICAvL29ydGhvbm9ybWFsaXplIGF4ZXNcbiAgICAgIHZhciBpbnZVcE1hZyA9IDEuMCAvIENhcnRlc2lhbjMubWFnbml0dWRlU3F1YXJlZCh1cCk7XG4gICAgICB2YXIgc2NhbGFyID0gQ2FydGVzaWFuMy5kb3QodXAsIGRpcmVjdGlvbikgKiBpbnZVcE1hZztcbiAgICAgIHZhciB3MCA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihkaXJlY3Rpb24sIHNjYWxhciwgc2NyYXRjaENhcnRlc2lhbik7XG4gICAgICB1cCA9IENhcnRlc2lhbjMubm9ybWFsaXplKFxuICAgICAgICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHVwLCB3MCwgY2FtZXJhLl91cCksXG4gICAgICAgIGNhbWVyYS5fdXBcbiAgICAgICk7XG4gICAgICBDYXJ0ZXNpYW4zLmNsb25lKHVwLCBjYW1lcmEudXApO1xuXG4gICAgICByaWdodCA9IENhcnRlc2lhbjMuY3Jvc3MoZGlyZWN0aW9uLCB1cCwgY2FtZXJhLl9yaWdodCk7XG4gICAgICBDYXJ0ZXNpYW4zLmNsb25lKHJpZ2h0LCBjYW1lcmEucmlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkaXJlY3Rpb25DaGFuZ2VkIHx8IHRyYW5zZm9ybUNoYW5nZWQpIHtcbiAgICBjYW1lcmEuX2RpcmVjdGlvbldDID0gTWF0cml4NC5tdWx0aXBseUJ5UG9pbnRBc1ZlY3RvcihcbiAgICAgIHRyYW5zZm9ybSxcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGNhbWVyYS5fZGlyZWN0aW9uV0NcbiAgICApO1xuICAgIENhcnRlc2lhbjMubm9ybWFsaXplKGNhbWVyYS5fZGlyZWN0aW9uV0MsIGNhbWVyYS5fZGlyZWN0aW9uV0MpO1xuICB9XG5cbiAgaWYgKHVwQ2hhbmdlZCB8fCB0cmFuc2Zvcm1DaGFuZ2VkKSB7XG4gICAgY2FtZXJhLl91cFdDID0gTWF0cml4NC5tdWx0aXBseUJ5UG9pbnRBc1ZlY3Rvcih0cmFuc2Zvcm0sIHVwLCBjYW1lcmEuX3VwV0MpO1xuICAgIENhcnRlc2lhbjMubm9ybWFsaXplKGNhbWVyYS5fdXBXQywgY2FtZXJhLl91cFdDKTtcbiAgfVxuXG4gIGlmIChyaWdodENoYW5nZWQgfHwgdHJhbnNmb3JtQ2hhbmdlZCkge1xuICAgIGNhbWVyYS5fcmlnaHRXQyA9IE1hdHJpeDQubXVsdGlwbHlCeVBvaW50QXNWZWN0b3IoXG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICByaWdodCxcbiAgICAgIGNhbWVyYS5fcmlnaHRXQ1xuICAgICk7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUoY2FtZXJhLl9yaWdodFdDLCBjYW1lcmEuX3JpZ2h0V0MpO1xuICB9XG5cbiAgaWYgKFxuICAgIHBvc2l0aW9uQ2hhbmdlZCB8fFxuICAgIGRpcmVjdGlvbkNoYW5nZWQgfHxcbiAgICB1cENoYW5nZWQgfHxcbiAgICByaWdodENoYW5nZWQgfHxcbiAgICB0cmFuc2Zvcm1DaGFuZ2VkXG4gICkge1xuICAgIHVwZGF0ZVZpZXdNYXRyaXgoY2FtZXJhKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRIZWFkaW5nKGRpcmVjdGlvbiwgdXApIHtcbiAgdmFyIGhlYWRpbmc7XG4gIGlmIChcbiAgICAhQ2VzaXVtTWF0aC5lcXVhbHNFcHNpbG9uKE1hdGguYWJzKGRpcmVjdGlvbi56KSwgMS4wLCBDZXNpdW1NYXRoLkVQU0lMT04zKVxuICApIHtcbiAgICBoZWFkaW5nID0gTWF0aC5hdGFuMihkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngpIC0gQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTztcbiAgfSBlbHNlIHtcbiAgICBoZWFkaW5nID0gTWF0aC5hdGFuMih1cC55LCB1cC54KSAtIENlc2l1bU1hdGguUElfT1ZFUl9UV087XG4gIH1cblxuICByZXR1cm4gQ2VzaXVtTWF0aC5UV09fUEkgLSBDZXNpdW1NYXRoLnplcm9Ub1R3b1BpKGhlYWRpbmcpO1xufVxuXG5mdW5jdGlvbiBnZXRQaXRjaChkaXJlY3Rpb24pIHtcbiAgcmV0dXJuIENlc2l1bU1hdGguUElfT1ZFUl9UV08gLSBDZXNpdW1NYXRoLmFjb3NDbGFtcGVkKGRpcmVjdGlvbi56KTtcbn1cblxuZnVuY3Rpb24gZ2V0Um9sbChkaXJlY3Rpb24sIHVwLCByaWdodCkge1xuICB2YXIgcm9sbCA9IDAuMDtcbiAgaWYgKFxuICAgICFDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oTWF0aC5hYnMoZGlyZWN0aW9uLnopLCAxLjAsIENlc2l1bU1hdGguRVBTSUxPTjMpXG4gICkge1xuICAgIHJvbGwgPSBNYXRoLmF0YW4yKC1yaWdodC56LCB1cC56KTtcbiAgICByb2xsID0gQ2VzaXVtTWF0aC56ZXJvVG9Ud29QaShyb2xsICsgQ2VzaXVtTWF0aC5UV09fUEkpO1xuICB9XG5cbiAgcmV0dXJuIHJvbGw7XG59XG5cbnZhciBzY3JhdGNoSFBSTWF0cml4MSA9IG5ldyBNYXRyaXg0KCk7XG52YXIgc2NyYXRjaEhQUk1hdHJpeDIgPSBuZXcgTWF0cml4NCgpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhDYW1lcmEucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjYW1lcmEncyByZWZlcmVuY2UgZnJhbWUuIFRoZSBpbnZlcnNlIG9mIHRoaXMgdHJhbnNmb3JtYXRpb24gaXMgYXBwZW5kZWQgdG8gdGhlIHZpZXcgbWF0cml4LlxuICAgKiBAbWVtYmVyb2YgQ2FtZXJhLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TWF0cml4NH1cbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBkZWZhdWx0IHtAbGluayBNYXRyaXg0LklERU5USVRZfVxuICAgKi9cbiAgdHJhbnNmb3JtOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGludmVyc2UgY2FtZXJhIHRyYW5zZm9ybS5cbiAgICogQG1lbWJlcm9mIENhbWVyYS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge01hdHJpeDR9XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAZGVmYXVsdCB7QGxpbmsgTWF0cml4NC5JREVOVElUWX1cbiAgICovXG4gIGludmVyc2VUcmFuc2Zvcm06IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHVwZGF0ZU1lbWJlcnModGhpcyk7XG4gICAgICByZXR1cm4gdGhpcy5faW52VHJhbnNmb3JtO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZpZXcgbWF0cml4LlxuICAgKiBAbWVtYmVyb2YgQ2FtZXJhLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TWF0cml4NH1cbiAgICogQHJlYWRvbmx5XG4gICAqXG4gICAqIEBzZWUgQ2FtZXJhI2ludmVyc2VWaWV3TWF0cml4XG4gICAqL1xuICB2aWV3TWF0cml4OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB1cGRhdGVNZW1iZXJzKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXMuX3ZpZXdNYXRyaXg7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgaW52ZXJzZSB2aWV3IG1hdHJpeC5cbiAgICogQG1lbWJlcm9mIENhbWVyYS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge01hdHJpeDR9XG4gICAqIEByZWFkb25seVxuICAgKlxuICAgKiBAc2VlIENhbWVyYSN2aWV3TWF0cml4XG4gICAqL1xuICBpbnZlcnNlVmlld01hdHJpeDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgdXBkYXRlTWVtYmVycyh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLl9pbnZWaWV3TWF0cml4O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHtAbGluayBDYXJ0b2dyYXBoaWN9IHBvc2l0aW9uIG9mIHRoZSBjYW1lcmEsIHdpdGggbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZVxuICAgKiBleHByZXNzZWQgaW4gcmFkaWFucyBhbmQgaGVpZ2h0IGluIG1ldGVycy4gIEluIDJEIGFuZCBDb2x1bWJ1cyBWaWV3LCBpdCBpcyBwb3NzaWJsZVxuICAgKiBmb3IgdGhlIHJldHVybmVkIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUgdG8gYmUgb3V0c2lkZSB0aGUgcmFuZ2Ugb2YgdmFsaWQgbG9uZ2l0dWRlc1xuICAgKiBhbmQgbGF0aXR1ZGVzIHdoZW4gdGhlIGNhbWVyYSBpcyBvdXRzaWRlIHRoZSBtYXAuXG4gICAqIEBtZW1iZXJvZiBDYW1lcmEucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtDYXJ0b2dyYXBoaWN9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcG9zaXRpb25DYXJ0b2dyYXBoaWM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHVwZGF0ZU1lbWJlcnModGhpcyk7XG4gICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25DYXJ0b2dyYXBoaWM7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIGNhbWVyYSBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICogQG1lbWJlcm9mIENhbWVyYS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0NhcnRlc2lhbjN9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcG9zaXRpb25XQzoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgdXBkYXRlTWVtYmVycyh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbldDO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZpZXcgZGlyZWN0aW9uIG9mIHRoZSBjYW1lcmEgaW4gd29ybGQgY29vcmRpbmF0ZXMuXG4gICAqIEBtZW1iZXJvZiBDYW1lcmEucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtDYXJ0ZXNpYW4zfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGRpcmVjdGlvbldDOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB1cGRhdGVNZW1iZXJzKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbldDO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHVwIGRpcmVjdGlvbiBvZiB0aGUgY2FtZXJhIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKiBAbWVtYmVyb2YgQ2FtZXJhLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7Q2FydGVzaWFuM31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB1cFdDOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB1cGRhdGVNZW1iZXJzKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXMuX3VwV0M7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgcmlnaHQgZGlyZWN0aW9uIG9mIHRoZSBjYW1lcmEgaW4gd29ybGQgY29vcmRpbmF0ZXMuXG4gICAqIEBtZW1iZXJvZiBDYW1lcmEucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtDYXJ0ZXNpYW4zfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJpZ2h0V0M6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHVwZGF0ZU1lbWJlcnModGhpcyk7XG4gICAgICByZXR1cm4gdGhpcy5fcmlnaHRXQztcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjYW1lcmEgaGVhZGluZyBpbiByYWRpYW5zLlxuICAgKiBAbWVtYmVyb2YgQ2FtZXJhLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhlYWRpbmc6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9tb2RlICE9PSBTY2VuZU1vZGUuTU9SUEhJTkcpIHtcbiAgICAgICAgdmFyIGVsbGlwc29pZCA9IHRoaXMuX3Byb2plY3Rpb24uZWxsaXBzb2lkO1xuXG4gICAgICAgIHZhciBvbGRUcmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKHRoaXMuX3RyYW5zZm9ybSwgc2NyYXRjaEhQUk1hdHJpeDEpO1xuICAgICAgICB2YXIgdHJhbnNmb3JtID0gVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShcbiAgICAgICAgICB0aGlzLnBvc2l0aW9uV0MsXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHNjcmF0Y2hIUFJNYXRyaXgyXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3NldFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuXG4gICAgICAgIHZhciBoZWFkaW5nID0gZ2V0SGVhZGluZyh0aGlzLmRpcmVjdGlvbiwgdGhpcy51cCk7XG5cbiAgICAgICAgdGhpcy5fc2V0VHJhbnNmb3JtKG9sZFRyYW5zZm9ybSk7XG5cbiAgICAgICAgcmV0dXJuIGhlYWRpbmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY2FtZXJhIHBpdGNoIGluIHJhZGlhbnMuXG4gICAqIEBtZW1iZXJvZiBDYW1lcmEucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcGl0Y2g6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9tb2RlICE9PSBTY2VuZU1vZGUuTU9SUEhJTkcpIHtcbiAgICAgICAgdmFyIGVsbGlwc29pZCA9IHRoaXMuX3Byb2plY3Rpb24uZWxsaXBzb2lkO1xuXG4gICAgICAgIHZhciBvbGRUcmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKHRoaXMuX3RyYW5zZm9ybSwgc2NyYXRjaEhQUk1hdHJpeDEpO1xuICAgICAgICB2YXIgdHJhbnNmb3JtID0gVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShcbiAgICAgICAgICB0aGlzLnBvc2l0aW9uV0MsXG4gICAgICAgICAgZWxsaXBzb2lkLFxuICAgICAgICAgIHNjcmF0Y2hIUFJNYXRyaXgyXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3NldFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuXG4gICAgICAgIHZhciBwaXRjaCA9IGdldFBpdGNoKHRoaXMuZGlyZWN0aW9uKTtcblxuICAgICAgICB0aGlzLl9zZXRUcmFuc2Zvcm0ob2xkVHJhbnNmb3JtKTtcblxuICAgICAgICByZXR1cm4gcGl0Y2g7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY2FtZXJhIHJvbGwgaW4gcmFkaWFucy5cbiAgICogQG1lbWJlcm9mIENhbWVyYS5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICByb2xsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fbW9kZSAhPT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgICAgIHZhciBlbGxpcHNvaWQgPSB0aGlzLl9wcm9qZWN0aW9uLmVsbGlwc29pZDtcblxuICAgICAgICB2YXIgb2xkVHJhbnNmb3JtID0gTWF0cml4NC5jbG9uZSh0aGlzLl90cmFuc2Zvcm0sIHNjcmF0Y2hIUFJNYXRyaXgxKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IFRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWUoXG4gICAgICAgICAgdGhpcy5wb3NpdGlvbldDLFxuICAgICAgICAgIGVsbGlwc29pZCxcbiAgICAgICAgICBzY3JhdGNoSFBSTWF0cml4MlxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcblxuICAgICAgICB2YXIgcm9sbCA9IGdldFJvbGwodGhpcy5kaXJlY3Rpb24sIHRoaXMudXAsIHRoaXMucmlnaHQpO1xuXG4gICAgICAgIHRoaXMuX3NldFRyYW5zZm9ybShvbGRUcmFuc2Zvcm0pO1xuXG4gICAgICAgIHJldHVybiByb2xsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgd2lsbCBiZSByYWlzZWQgYXQgd2hlbiB0aGUgY2FtZXJhIHN0YXJ0cyB0byBtb3ZlLlxuICAgKiBAbWVtYmVyb2YgQ2FtZXJhLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7RXZlbnR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgbW92ZVN0YXJ0OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbW92ZVN0YXJ0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgd2lsbCBiZSByYWlzZWQgd2hlbiB0aGUgY2FtZXJhIGhhcyBzdG9wcGVkIG1vdmluZy5cbiAgICogQG1lbWJlcm9mIENhbWVyYS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG1vdmVFbmQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tb3ZlRW5kO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgd2lsbCBiZSByYWlzZWQgd2hlbiB0aGUgY2FtZXJhIGhhcyBjaGFuZ2VkIGJ5IDxjb2RlPnBlcmNlbnRhZ2VDaGFuZ2VkPC9jb2RlPi5cbiAgICogQG1lbWJlcm9mIENhbWVyYS5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGNoYW5nZWQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGFuZ2VkO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5DYW1lcmEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChtb2RlKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChtb2RlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcIm1vZGUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmIChcbiAgICBtb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCAmJlxuICAgICEodGhpcy5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljT2ZmQ2VudGVyRnJ1c3R1bSlcbiAgKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJBbiBPcnRob2dyYXBoaWNPZmZDZW50ZXJGcnVzdHVtIGlzIHJlcXVpcmVkIGluIDJELlwiXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEIHx8IG1vZGUgPT09IFNjZW5lTW9kZS5DT0xVTUJVU19WSUVXKSAmJlxuICAgICEodGhpcy5mcnVzdHVtIGluc3RhbmNlb2YgUGVyc3BlY3RpdmVGcnVzdHVtKSAmJlxuICAgICEodGhpcy5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljRnJ1c3R1bSlcbiAgKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJBIFBlcnNwZWN0aXZlRnJ1c3R1bSBvciBPcnRob2dyYXBoaWNGcnVzdHVtIGlzIHJlcXVpcmVkIGluIDNEIGFuZCBDb2x1bWJ1cyB2aWV3XCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciB1cGRhdGVGcnVzdHVtID0gZmFsc2U7XG4gIGlmIChtb2RlICE9PSB0aGlzLl9tb2RlKSB7XG4gICAgdGhpcy5fbW9kZSA9IG1vZGU7XG4gICAgdGhpcy5fbW9kZUNoYW5nZWQgPSBtb2RlICE9PSBTY2VuZU1vZGUuTU9SUEhJTkc7XG4gICAgdXBkYXRlRnJ1c3R1bSA9IHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEO1xuICB9XG5cbiAgaWYgKHVwZGF0ZUZydXN0dW0pIHtcbiAgICB2YXIgZnJ1c3R1bSA9ICh0aGlzLl9tYXgyRGZydXN0dW0gPSB0aGlzLmZydXN0dW0uY2xvbmUoKSk7XG5cbiAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgIGlmICghKGZydXN0dW0gaW5zdGFuY2VvZiBPcnRob2dyYXBoaWNPZmZDZW50ZXJGcnVzdHVtKSkge1xuICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICBcIlRoZSBjYW1lcmEgZnJ1c3R1bSBpcyBleHBlY3RlZCB0byBiZSBvcnRob2dyYXBoaWMgZm9yIDJEIGNhbWVyYSBjb250cm9sLlwiXG4gICAgICApO1xuICAgIH1cbiAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgIHZhciBtYXhab29tT3V0ID0gMi4wO1xuICAgIHZhciByYXRpbyA9IGZydXN0dW0udG9wIC8gZnJ1c3R1bS5yaWdodDtcbiAgICBmcnVzdHVtLnJpZ2h0ID0gdGhpcy5fbWF4Q29vcmQueCAqIG1heFpvb21PdXQ7XG4gICAgZnJ1c3R1bS5sZWZ0ID0gLWZydXN0dW0ucmlnaHQ7XG4gICAgZnJ1c3R1bS50b3AgPSByYXRpbyAqIGZydXN0dW0ucmlnaHQ7XG4gICAgZnJ1c3R1bS5ib3R0b20gPSAtZnJ1c3R1bS50b3A7XG4gIH1cblxuICBpZiAodGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQpIHtcbiAgICBjbGFtcE1vdmUyRCh0aGlzLCB0aGlzLnBvc2l0aW9uKTtcbiAgfVxufTtcblxudmFyIHNldFRyYW5zZm9ybVBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzZXRUcmFuc2Zvcm1VcCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2V0VHJhbnNmb3JtRGlyZWN0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcblxuQ2FtZXJhLnByb3RvdHlwZS5fc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybSkge1xuICB2YXIgcG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKHRoaXMucG9zaXRpb25XQywgc2V0VHJhbnNmb3JtUG9zaXRpb24pO1xuICB2YXIgdXAgPSBDYXJ0ZXNpYW4zLmNsb25lKHRoaXMudXBXQywgc2V0VHJhbnNmb3JtVXApO1xuICB2YXIgZGlyZWN0aW9uID0gQ2FydGVzaWFuMy5jbG9uZSh0aGlzLmRpcmVjdGlvbldDLCBzZXRUcmFuc2Zvcm1EaXJlY3Rpb24pO1xuXG4gIE1hdHJpeDQuY2xvbmUodHJhbnNmb3JtLCB0aGlzLl90cmFuc2Zvcm0pO1xuICB0aGlzLl90cmFuc2Zvcm1DaGFuZ2VkID0gdHJ1ZTtcbiAgdXBkYXRlTWVtYmVycyh0aGlzKTtcbiAgdmFyIGludmVyc2UgPSB0aGlzLl9hY3R1YWxJbnZUcmFuc2Zvcm07XG5cbiAgTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQoaW52ZXJzZSwgcG9zaXRpb24sIHRoaXMucG9zaXRpb24pO1xuICBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludEFzVmVjdG9yKGludmVyc2UsIGRpcmVjdGlvbiwgdGhpcy5kaXJlY3Rpb24pO1xuICBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludEFzVmVjdG9yKGludmVyc2UsIHVwLCB0aGlzLnVwKTtcbiAgQ2FydGVzaWFuMy5jcm9zcyh0aGlzLmRpcmVjdGlvbiwgdGhpcy51cCwgdGhpcy5yaWdodCk7XG5cbiAgdXBkYXRlTWVtYmVycyh0aGlzKTtcbn07XG5cbnZhciBzY3JhdGNoQWRqdXN0T3J0aG9ncmFwaGljRnJ1c3R1bU1vdXNlUG9zaXRpb24gPSBuZXcgQ2FydGVzaWFuMigpO1xudmFyIHNjcmF0Y2hQaWNrUmF5ID0gbmV3IFJheSgpO1xudmFyIHNjcmF0Y2hSYXlJbnRlcnNlY3Rpb24gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hEZXB0aEludGVyc2VjdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZU9ydGhvZ3JhcGhpY0ZydXN0dW1XaWR0aChjYW1lcmEpIHtcbiAgLy8gQ2FtZXJhIGlzIGZpeGVkIHRvIGFuIG9iamVjdCwgc28ga2VlcCBmcnVzdHVtIHdpZHRoIGNvbnN0YW50LlxuICBpZiAoIU1hdHJpeDQuZXF1YWxzKE1hdHJpeDQuSURFTlRJVFksIGNhbWVyYS50cmFuc2Zvcm0pKSB7XG4gICAgcmV0dXJuIENhcnRlc2lhbjMubWFnbml0dWRlKGNhbWVyYS5wb3NpdGlvbik7XG4gIH1cblxuICB2YXIgc2NlbmUgPSBjYW1lcmEuX3NjZW5lO1xuICB2YXIgZ2xvYmUgPSBzY2VuZS5nbG9iZTtcblxuICB2YXIgbW91c2VQb3NpdGlvbiA9IHNjcmF0Y2hBZGp1c3RPcnRob2dyYXBoaWNGcnVzdHVtTW91c2VQb3NpdGlvbjtcbiAgbW91c2VQb3NpdGlvbi54ID0gc2NlbmUuZHJhd2luZ0J1ZmZlcldpZHRoIC8gMi4wO1xuICBtb3VzZVBvc2l0aW9uLnkgPSBzY2VuZS5kcmF3aW5nQnVmZmVySGVpZ2h0IC8gMi4wO1xuXG4gIHZhciByYXlJbnRlcnNlY3Rpb247XG4gIGlmIChkZWZpbmVkKGdsb2JlKSkge1xuICAgIHZhciByYXkgPSBjYW1lcmEuZ2V0UGlja1JheShtb3VzZVBvc2l0aW9uLCBzY3JhdGNoUGlja1JheSk7XG4gICAgcmF5SW50ZXJzZWN0aW9uID0gZ2xvYmUucGlja1dvcmxkQ29vcmRpbmF0ZXMoXG4gICAgICByYXksXG4gICAgICBzY2VuZSxcbiAgICAgIHRydWUsXG4gICAgICBzY3JhdGNoUmF5SW50ZXJzZWN0aW9uXG4gICAgKTtcbiAgfVxuXG4gIHZhciBkZXB0aEludGVyc2VjdGlvbjtcbiAgaWYgKHNjZW5lLnBpY2tQb3NpdGlvblN1cHBvcnRlZCkge1xuICAgIGRlcHRoSW50ZXJzZWN0aW9uID0gc2NlbmUucGlja1Bvc2l0aW9uV29ybGRDb29yZGluYXRlcyhcbiAgICAgIG1vdXNlUG9zaXRpb24sXG4gICAgICBzY3JhdGNoRGVwdGhJbnRlcnNlY3Rpb25cbiAgICApO1xuICB9XG5cbiAgdmFyIGRpc3RhbmNlO1xuICBpZiAoZGVmaW5lZChyYXlJbnRlcnNlY3Rpb24pIHx8IGRlZmluZWQoZGVwdGhJbnRlcnNlY3Rpb24pKSB7XG4gICAgdmFyIGRlcHRoRGlzdGFuY2UgPSBkZWZpbmVkKGRlcHRoSW50ZXJzZWN0aW9uKVxuICAgICAgPyBDYXJ0ZXNpYW4zLmRpc3RhbmNlKGRlcHRoSW50ZXJzZWN0aW9uLCBjYW1lcmEucG9zaXRpb25XQylcbiAgICAgIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgIHZhciByYXlEaXN0YW5jZSA9IGRlZmluZWQocmF5SW50ZXJzZWN0aW9uKVxuICAgICAgPyBDYXJ0ZXNpYW4zLmRpc3RhbmNlKHJheUludGVyc2VjdGlvbiwgY2FtZXJhLnBvc2l0aW9uV0MpXG4gICAgICA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBkaXN0YW5jZSA9IE1hdGgubWluKGRlcHRoRGlzdGFuY2UsIHJheURpc3RhbmNlKTtcbiAgfSBlbHNlIHtcbiAgICBkaXN0YW5jZSA9IE1hdGgubWF4KGNhbWVyYS5wb3NpdGlvbkNhcnRvZ3JhcGhpYy5oZWlnaHQsIDAuMCk7XG4gIH1cbiAgcmV0dXJuIGRpc3RhbmNlO1xufVxuXG5DYW1lcmEucHJvdG90eXBlLl9hZGp1c3RPcnRob2dyYXBoaWNGcnVzdHVtID0gZnVuY3Rpb24gKHpvb21pbmcpIHtcbiAgaWYgKCEodGhpcy5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljRnJ1c3R1bSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIXpvb21pbmcgJiYgdGhpcy5fcG9zaXRpb25DYXJ0b2dyYXBoaWMuaGVpZ2h0IDwgMTUwMDAwLjApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLmZydXN0dW0ud2lkdGggPSBjYWxjdWxhdGVPcnRob2dyYXBoaWNGcnVzdHVtV2lkdGgodGhpcyk7XG59O1xuXG52YXIgc2NyYXRjaFNldFZpZXdDYXJ0ZXNpYW4gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hTZXRWaWV3VHJhbnNmb3JtMSA9IG5ldyBNYXRyaXg0KCk7XG52YXIgc2NyYXRjaFNldFZpZXdUcmFuc2Zvcm0yID0gbmV3IE1hdHJpeDQoKTtcbnZhciBzY3JhdGNoU2V0Vmlld1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xudmFyIHNjcmF0Y2hTZXRWaWV3TWF0cml4MyA9IG5ldyBNYXRyaXgzKCk7XG52YXIgc2NyYXRjaFNldFZpZXdDYXJ0b2dyYXBoaWMgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5cbmZ1bmN0aW9uIHNldFZpZXczRChjYW1lcmEsIHBvc2l0aW9uLCBocHIpIHtcbiAgdmFyIGN1cnJlbnRUcmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKFxuICAgIGNhbWVyYS50cmFuc2Zvcm0sXG4gICAgc2NyYXRjaFNldFZpZXdUcmFuc2Zvcm0xXG4gICk7XG4gIHZhciBsb2NhbFRyYW5zZm9ybSA9IFRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWUoXG4gICAgcG9zaXRpb24sXG4gICAgY2FtZXJhLl9wcm9qZWN0aW9uLmVsbGlwc29pZCxcbiAgICBzY3JhdGNoU2V0Vmlld1RyYW5zZm9ybTJcbiAgKTtcbiAgY2FtZXJhLl9zZXRUcmFuc2Zvcm0obG9jYWxUcmFuc2Zvcm0pO1xuXG4gIENhcnRlc2lhbjMuY2xvbmUoQ2FydGVzaWFuMy5aRVJPLCBjYW1lcmEucG9zaXRpb24pO1xuICBocHIuaGVhZGluZyA9IGhwci5oZWFkaW5nIC0gQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTztcblxuICB2YXIgcm90UXVhdCA9IFF1YXRlcm5pb24uZnJvbUhlYWRpbmdQaXRjaFJvbGwoaHByLCBzY3JhdGNoU2V0Vmlld1F1YXRlcm5pb24pO1xuICB2YXIgcm90TWF0ID0gTWF0cml4My5mcm9tUXVhdGVybmlvbihyb3RRdWF0LCBzY3JhdGNoU2V0Vmlld01hdHJpeDMpO1xuXG4gIE1hdHJpeDMuZ2V0Q29sdW1uKHJvdE1hdCwgMCwgY2FtZXJhLmRpcmVjdGlvbik7XG4gIE1hdHJpeDMuZ2V0Q29sdW1uKHJvdE1hdCwgMiwgY2FtZXJhLnVwKTtcbiAgQ2FydGVzaWFuMy5jcm9zcyhjYW1lcmEuZGlyZWN0aW9uLCBjYW1lcmEudXAsIGNhbWVyYS5yaWdodCk7XG5cbiAgY2FtZXJhLl9zZXRUcmFuc2Zvcm0oY3VycmVudFRyYW5zZm9ybSk7XG5cbiAgY2FtZXJhLl9hZGp1c3RPcnRob2dyYXBoaWNGcnVzdHVtKHRydWUpO1xufVxuXG5mdW5jdGlvbiBzZXRWaWV3Q1YoY2FtZXJhLCBwb3NpdGlvbiwgaHByLCBjb252ZXJ0KSB7XG4gIHZhciBjdXJyZW50VHJhbnNmb3JtID0gTWF0cml4NC5jbG9uZShcbiAgICBjYW1lcmEudHJhbnNmb3JtLFxuICAgIHNjcmF0Y2hTZXRWaWV3VHJhbnNmb3JtMVxuICApO1xuICBjYW1lcmEuX3NldFRyYW5zZm9ybShNYXRyaXg0LklERU5USVRZKTtcblxuICBpZiAoIUNhcnRlc2lhbjMuZXF1YWxzKHBvc2l0aW9uLCBjYW1lcmEucG9zaXRpb25XQykpIHtcbiAgICBpZiAoY29udmVydCkge1xuICAgICAgdmFyIHByb2plY3Rpb24gPSBjYW1lcmEuX3Byb2plY3Rpb247XG4gICAgICB2YXIgY2FydG9ncmFwaGljID0gcHJvamVjdGlvbi5lbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBzY3JhdGNoU2V0Vmlld0NhcnRvZ3JhcGhpY1xuICAgICAgKTtcbiAgICAgIHBvc2l0aW9uID0gcHJvamVjdGlvbi5wcm9qZWN0KGNhcnRvZ3JhcGhpYywgc2NyYXRjaFNldFZpZXdDYXJ0ZXNpYW4pO1xuICAgIH1cbiAgICBDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uLCBjYW1lcmEucG9zaXRpb24pO1xuICB9XG4gIGhwci5oZWFkaW5nID0gaHByLmhlYWRpbmcgLSBDZXNpdW1NYXRoLlBJX09WRVJfVFdPO1xuXG4gIHZhciByb3RRdWF0ID0gUXVhdGVybmlvbi5mcm9tSGVhZGluZ1BpdGNoUm9sbChocHIsIHNjcmF0Y2hTZXRWaWV3UXVhdGVybmlvbik7XG4gIHZhciByb3RNYXQgPSBNYXRyaXgzLmZyb21RdWF0ZXJuaW9uKHJvdFF1YXQsIHNjcmF0Y2hTZXRWaWV3TWF0cml4Myk7XG5cbiAgTWF0cml4My5nZXRDb2x1bW4ocm90TWF0LCAwLCBjYW1lcmEuZGlyZWN0aW9uKTtcbiAgTWF0cml4My5nZXRDb2x1bW4ocm90TWF0LCAyLCBjYW1lcmEudXApO1xuICBDYXJ0ZXNpYW4zLmNyb3NzKGNhbWVyYS5kaXJlY3Rpb24sIGNhbWVyYS51cCwgY2FtZXJhLnJpZ2h0KTtcblxuICBjYW1lcmEuX3NldFRyYW5zZm9ybShjdXJyZW50VHJhbnNmb3JtKTtcblxuICBjYW1lcmEuX2FkanVzdE9ydGhvZ3JhcGhpY0ZydXN0dW0odHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHNldFZpZXcyRChjYW1lcmEsIHBvc2l0aW9uLCBocHIsIGNvbnZlcnQpIHtcbiAgdmFyIGN1cnJlbnRUcmFuc2Zvcm0gPSBNYXRyaXg0LmNsb25lKFxuICAgIGNhbWVyYS50cmFuc2Zvcm0sXG4gICAgc2NyYXRjaFNldFZpZXdUcmFuc2Zvcm0xXG4gICk7XG4gIGNhbWVyYS5fc2V0VHJhbnNmb3JtKE1hdHJpeDQuSURFTlRJVFkpO1xuXG4gIGlmICghQ2FydGVzaWFuMy5lcXVhbHMocG9zaXRpb24sIGNhbWVyYS5wb3NpdGlvbldDKSkge1xuICAgIGlmIChjb252ZXJ0KSB7XG4gICAgICB2YXIgcHJvamVjdGlvbiA9IGNhbWVyYS5fcHJvamVjdGlvbjtcbiAgICAgIHZhciBjYXJ0b2dyYXBoaWMgPSBwcm9qZWN0aW9uLmVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIHNjcmF0Y2hTZXRWaWV3Q2FydG9ncmFwaGljXG4gICAgICApO1xuICAgICAgcG9zaXRpb24gPSBwcm9qZWN0aW9uLnByb2plY3QoY2FydG9ncmFwaGljLCBzY3JhdGNoU2V0Vmlld0NhcnRlc2lhbik7XG4gICAgfVxuXG4gICAgQ2FydGVzaWFuMi5jbG9uZShwb3NpdGlvbiwgY2FtZXJhLnBvc2l0aW9uKTtcblxuICAgIHZhciBuZXdMZWZ0ID0gLXBvc2l0aW9uLnogKiAwLjU7XG4gICAgdmFyIG5ld1JpZ2h0ID0gLW5ld0xlZnQ7XG5cbiAgICB2YXIgZnJ1c3R1bSA9IGNhbWVyYS5mcnVzdHVtO1xuICAgIGlmIChuZXdSaWdodCA+IG5ld0xlZnQpIHtcbiAgICAgIHZhciByYXRpbyA9IGZydXN0dW0udG9wIC8gZnJ1c3R1bS5yaWdodDtcbiAgICAgIGZydXN0dW0ucmlnaHQgPSBuZXdSaWdodDtcbiAgICAgIGZydXN0dW0ubGVmdCA9IG5ld0xlZnQ7XG4gICAgICBmcnVzdHVtLnRvcCA9IGZydXN0dW0ucmlnaHQgKiByYXRpbztcbiAgICAgIGZydXN0dW0uYm90dG9tID0gLWZydXN0dW0udG9wO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjYW1lcmEuX3NjZW5lLm1hcE1vZGUyRCA9PT0gTWFwTW9kZTJELlJPVEFURSkge1xuICAgIGhwci5oZWFkaW5nID0gaHByLmhlYWRpbmcgLSBDZXNpdW1NYXRoLlBJX09WRVJfVFdPO1xuICAgIGhwci5waXRjaCA9IC1DZXNpdW1NYXRoLlBJX09WRVJfVFdPO1xuICAgIGhwci5yb2xsID0gMC4wO1xuICAgIHZhciByb3RRdWF0ID0gUXVhdGVybmlvbi5mcm9tSGVhZGluZ1BpdGNoUm9sbChcbiAgICAgIGhwcixcbiAgICAgIHNjcmF0Y2hTZXRWaWV3UXVhdGVybmlvblxuICAgICk7XG4gICAgdmFyIHJvdE1hdCA9IE1hdHJpeDMuZnJvbVF1YXRlcm5pb24ocm90UXVhdCwgc2NyYXRjaFNldFZpZXdNYXRyaXgzKTtcblxuICAgIE1hdHJpeDMuZ2V0Q29sdW1uKHJvdE1hdCwgMiwgY2FtZXJhLnVwKTtcbiAgICBDYXJ0ZXNpYW4zLmNyb3NzKGNhbWVyYS5kaXJlY3Rpb24sIGNhbWVyYS51cCwgY2FtZXJhLnJpZ2h0KTtcbiAgfVxuXG4gIGNhbWVyYS5fc2V0VHJhbnNmb3JtKGN1cnJlbnRUcmFuc2Zvcm0pO1xufVxuXG52YXIgc2NyYXRjaFRvSFBSRGlyZWN0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoVG9IUFJVcCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgc2NyYXRjaFRvSFBSUmlnaHQgPSBuZXcgQ2FydGVzaWFuMygpO1xuXG5mdW5jdGlvbiBkaXJlY3Rpb25VcFRvSGVhZGluZ1BpdGNoUm9sbChjYW1lcmEsIHBvc2l0aW9uLCBvcmllbnRhdGlvbiwgcmVzdWx0KSB7XG4gIHZhciBkaXJlY3Rpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKFxuICAgIG9yaWVudGF0aW9uLmRpcmVjdGlvbixcbiAgICBzY3JhdGNoVG9IUFJEaXJlY3Rpb25cbiAgKTtcbiAgdmFyIHVwID0gQ2FydGVzaWFuMy5jbG9uZShvcmllbnRhdGlvbi51cCwgc2NyYXRjaFRvSFBSVXApO1xuXG4gIGlmIChjYW1lcmEuX3NjZW5lLm1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgdmFyIGVsbGlwc29pZCA9IGNhbWVyYS5fcHJvamVjdGlvbi5lbGxpcHNvaWQ7XG4gICAgdmFyIHRyYW5zZm9ybSA9IFRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWUoXG4gICAgICBwb3NpdGlvbixcbiAgICAgIGVsbGlwc29pZCxcbiAgICAgIHNjcmF0Y2hIUFJNYXRyaXgxXG4gICAgKTtcbiAgICB2YXIgaW52VHJhbnNmb3JtID0gTWF0cml4NC5pbnZlcnNlVHJhbnNmb3JtYXRpb24oXG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICBzY3JhdGNoSFBSTWF0cml4MlxuICAgICk7XG5cbiAgICBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludEFzVmVjdG9yKGludlRyYW5zZm9ybSwgZGlyZWN0aW9uLCBkaXJlY3Rpb24pO1xuICAgIE1hdHJpeDQubXVsdGlwbHlCeVBvaW50QXNWZWN0b3IoaW52VHJhbnNmb3JtLCB1cCwgdXApO1xuICB9XG5cbiAgdmFyIHJpZ2h0ID0gQ2FydGVzaWFuMy5jcm9zcyhkaXJlY3Rpb24sIHVwLCBzY3JhdGNoVG9IUFJSaWdodCk7XG5cbiAgcmVzdWx0LmhlYWRpbmcgPSBnZXRIZWFkaW5nKGRpcmVjdGlvbiwgdXApO1xuICByZXN1bHQucGl0Y2ggPSBnZXRQaXRjaChkaXJlY3Rpb24pO1xuICByZXN1bHQucm9sbCA9IGdldFJvbGwoZGlyZWN0aW9uLCB1cCwgcmlnaHQpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbnZhciBzY3JhdGNoU2V0Vmlld09wdGlvbnMgPSB7XG4gIGRlc3RpbmF0aW9uOiB1bmRlZmluZWQsXG4gIG9yaWVudGF0aW9uOiB7XG4gICAgZGlyZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgdXA6IHVuZGVmaW5lZCxcbiAgICBoZWFkaW5nOiB1bmRlZmluZWQsXG4gICAgcGl0Y2g6IHVuZGVmaW5lZCxcbiAgICByb2xsOiB1bmRlZmluZWQsXG4gIH0sXG4gIGNvbnZlcnQ6IHVuZGVmaW5lZCxcbiAgZW5kVHJhbnNmb3JtOiB1bmRlZmluZWQsXG59O1xuXG52YXIgc2NyYXRjaEhwciA9IG5ldyBIZWFkaW5nUGl0Y2hSb2xsKCk7XG4vKipcbiAqIFNldHMgdGhlIGNhbWVyYSBwb3NpdGlvbiwgb3JpZW50YXRpb24gYW5kIHRyYW5zZm9ybS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0NhcnRlc2lhbjN8UmVjdGFuZ2xlfSBbb3B0aW9ucy5kZXN0aW5hdGlvbl0gVGhlIGZpbmFsIHBvc2l0aW9uIG9mIHRoZSBjYW1lcmEgaW4gV0dTODQgKHdvcmxkKSBjb29yZGluYXRlcyBvciBhIHJlY3RhbmdsZSB0aGF0IHdvdWxkIGJlIHZpc2libGUgZnJvbSBhIHRvcC1kb3duIHZpZXcuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMub3JpZW50YXRpb25dIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGVpdGhlciBkaXJlY3Rpb24gYW5kIHVwIHByb3BlcnRpZXMgb3IgaGVhZGluZywgcGl0Y2ggYW5kIHJvbGwgcHJvcGVydGllcy4gQnkgZGVmYXVsdCwgdGhlIGRpcmVjdGlvbiB3aWxsIHBvaW50XG4gKiB0b3dhcmRzIHRoZSBjZW50ZXIgb2YgdGhlIGZyYW1lIGluIDNEIGFuZCBpbiB0aGUgbmVnYXRpdmUgeiBkaXJlY3Rpb24gaW4gQ29sdW1idXMgdmlldy4gVGhlIHVwIGRpcmVjdGlvbiB3aWxsIHBvaW50IHRvd2FyZHMgbG9jYWwgbm9ydGggaW4gM0QgYW5kIGluIHRoZSBwb3NpdGl2ZVxuICogeSBkaXJlY3Rpb24gaW4gQ29sdW1idXMgdmlldy4gT3JpZW50YXRpb24gaXMgbm90IHVzZWQgaW4gMkQgd2hlbiBpbiBpbmZpbml0ZSBzY3JvbGxpbmcgbW9kZS5cbiAqIEBwYXJhbSB7TWF0cml4NH0gW29wdGlvbnMuZW5kVHJhbnNmb3JtXSBUcmFuc2Zvcm0gbWF0cml4IHJlcHJlc2VudGluZyB0aGUgcmVmZXJlbmNlIGZyYW1lIG9mIHRoZSBjYW1lcmEuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNvbnZlcnRdIFdoZXRoZXIgdG8gY29udmVydCB0aGUgZGVzdGluYXRpb24gZnJvbSB3b3JsZCBjb29yZGluYXRlcyB0byBzY2VuZSBjb29yZGluYXRlcyAob25seSByZWxldmFudCB3aGVuIG5vdCB1c2luZyAzRCkuIERlZmF1bHRzIHRvIDxjb2RlPnRydWU8L2NvZGU+LlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyAxLiBTZXQgcG9zaXRpb24gd2l0aCBhIHRvcC1kb3duIHZpZXdcbiAqIHZpZXdlci5jYW1lcmEuc2V0Vmlldyh7XG4gKiAgICAgZGVzdGluYXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcygtMTE3LjE2LCAzMi43MSwgMTUwMDAuMClcbiAqIH0pO1xuICpcbiAqIC8vIDIgU2V0IHZpZXcgd2l0aCBoZWFkaW5nLCBwaXRjaCBhbmQgcm9sbFxuICogdmlld2VyLmNhbWVyYS5zZXRWaWV3KHtcbiAqICAgICBkZXN0aW5hdGlvbiA6IGNhcnRlc2lhblBvc2l0aW9uLFxuICogICAgIG9yaWVudGF0aW9uOiB7XG4gKiAgICAgICAgIGhlYWRpbmcgOiBDZXNpdW0uTWF0aC50b1JhZGlhbnMoOTAuMCksIC8vIGVhc3QsIGRlZmF1bHQgdmFsdWUgaXMgMC4wIChub3J0aClcbiAqICAgICAgICAgcGl0Y2ggOiBDZXNpdW0uTWF0aC50b1JhZGlhbnMoLTkwKSwgICAgLy8gZGVmYXVsdCB2YWx1ZSAobG9va2luZyBkb3duKVxuICogICAgICAgICByb2xsIDogMC4wICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHZhbHVlXG4gKiAgICAgfVxuICogfSk7XG4gKlxuICogLy8gMy4gQ2hhbmdlIGhlYWRpbmcsIHBpdGNoIGFuZCByb2xsIHdpdGggdGhlIGNhbWVyYSBwb3NpdGlvbiByZW1haW5pbmcgdGhlIHNhbWUuXG4gKiB2aWV3ZXIuY2FtZXJhLnNldFZpZXcoe1xuICogICAgIG9yaWVudGF0aW9uOiB7XG4gKiAgICAgICAgIGhlYWRpbmcgOiBDZXNpdW0uTWF0aC50b1JhZGlhbnMoOTAuMCksIC8vIGVhc3QsIGRlZmF1bHQgdmFsdWUgaXMgMC4wIChub3J0aClcbiAqICAgICAgICAgcGl0Y2ggOiBDZXNpdW0uTWF0aC50b1JhZGlhbnMoLTkwKSwgICAgLy8gZGVmYXVsdCB2YWx1ZSAobG9va2luZyBkb3duKVxuICogICAgICAgICByb2xsIDogMC4wICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHZhbHVlXG4gKiAgICAgfVxuICogfSk7XG4gKlxuICpcbiAqIC8vIDQuIFZpZXcgcmVjdGFuZ2xlIHdpdGggYSB0b3AtZG93biB2aWV3XG4gKiB2aWV3ZXIuY2FtZXJhLnNldFZpZXcoe1xuICogICAgIGRlc3RpbmF0aW9uIDogQ2VzaXVtLlJlY3RhbmdsZS5mcm9tRGVncmVlcyh3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGgpXG4gKiB9KTtcbiAqXG4gKiAvLyA1LiBTZXQgcG9zaXRpb24gd2l0aCBhbiBvcmllbnRhdGlvbiB1c2luZyB1bml0IHZlY3RvcnMuXG4gKiB2aWV3ZXIuY2FtZXJhLnNldFZpZXcoe1xuICogICAgIGRlc3RpbmF0aW9uIDogQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMoLTEyMi4xOSwgNDYuMjUsIDUwMDAuMCksXG4gKiAgICAgb3JpZW50YXRpb24gOiB7XG4gKiAgICAgICAgIGRpcmVjdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygtMC4wNDIzMTI0MzEwNDI0MDQwMSwgLTAuMjAxMjMyMzYwNDk0NDM0MjEsIC0wLjk3ODYyOTI0MzAwNzM0KSxcbiAqICAgICAgICAgdXAgOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoLTAuNDc5MzQ1ODkzMDUyOTM3NDYsIC0wLjg1NTMyMTYyNTMxMTQ1NTIsIDAuMTk2NjAyMjE3OTExODMzOSlcbiAqICAgICB9XG4gKiB9KTtcbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5zZXRWaWV3ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIG9yaWVudGF0aW9uID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMub3JpZW50YXRpb24sXG4gICAgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVFxuICApO1xuXG4gIHZhciBtb2RlID0gdGhpcy5fbW9kZTtcbiAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKG9wdGlvbnMuZW5kVHJhbnNmb3JtKSkge1xuICAgIHRoaXMuX3NldFRyYW5zZm9ybShvcHRpb25zLmVuZFRyYW5zZm9ybSk7XG4gIH1cblxuICB2YXIgY29udmVydCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmNvbnZlcnQsIHRydWUpO1xuICB2YXIgZGVzdGluYXRpb24gPSBkZWZhdWx0VmFsdWUoXG4gICAgb3B0aW9ucy5kZXN0aW5hdGlvbixcbiAgICBDYXJ0ZXNpYW4zLmNsb25lKHRoaXMucG9zaXRpb25XQywgc2NyYXRjaFNldFZpZXdDYXJ0ZXNpYW4pXG4gICk7XG4gIGlmIChkZWZpbmVkKGRlc3RpbmF0aW9uKSAmJiBkZWZpbmVkKGRlc3RpbmF0aW9uLndlc3QpKSB7XG4gICAgZGVzdGluYXRpb24gPSB0aGlzLmdldFJlY3RhbmdsZUNhbWVyYUNvb3JkaW5hdGVzKFxuICAgICAgZGVzdGluYXRpb24sXG4gICAgICBzY3JhdGNoU2V0Vmlld0NhcnRlc2lhblxuICAgICk7XG4gICAgY29udmVydCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGRlZmluZWQob3JpZW50YXRpb24uZGlyZWN0aW9uKSkge1xuICAgIG9yaWVudGF0aW9uID0gZGlyZWN0aW9uVXBUb0hlYWRpbmdQaXRjaFJvbGwoXG4gICAgICB0aGlzLFxuICAgICAgZGVzdGluYXRpb24sXG4gICAgICBvcmllbnRhdGlvbixcbiAgICAgIHNjcmF0Y2hTZXRWaWV3T3B0aW9ucy5vcmllbnRhdGlvblxuICAgICk7XG4gIH1cblxuICBzY3JhdGNoSHByLmhlYWRpbmcgPSBkZWZhdWx0VmFsdWUob3JpZW50YXRpb24uaGVhZGluZywgMC4wKTtcbiAgc2NyYXRjaEhwci5waXRjaCA9IGRlZmF1bHRWYWx1ZShvcmllbnRhdGlvbi5waXRjaCwgLUNlc2l1bU1hdGguUElfT1ZFUl9UV08pO1xuICBzY3JhdGNoSHByLnJvbGwgPSBkZWZhdWx0VmFsdWUob3JpZW50YXRpb24ucm9sbCwgMC4wKTtcblxuICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0QpIHtcbiAgICBzZXRWaWV3M0QodGhpcywgZGVzdGluYXRpb24sIHNjcmF0Y2hIcHIpO1xuICB9IGVsc2UgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgc2V0VmlldzJEKHRoaXMsIGRlc3RpbmF0aW9uLCBzY3JhdGNoSHByLCBjb252ZXJ0KTtcbiAgfSBlbHNlIHtcbiAgICBzZXRWaWV3Q1YodGhpcywgZGVzdGluYXRpb24sIHNjcmF0Y2hIcHIsIGNvbnZlcnQpO1xuICB9XG59O1xuXG52YXIgcGl0Y2hTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbi8qKlxuICogRmx5IHRoZSBjYW1lcmEgdG8gdGhlIGhvbWUgdmlldy4gIFVzZSB7QGxpbmsgQ2FtZXJhIy5ERUZBVUxUX1ZJRVdfUkVDVEFOR0xFfSB0byBzZXRcbiAqIHRoZSBkZWZhdWx0IHZpZXcgZm9yIHRoZSAzRCBzY2VuZS4gIFRoZSBob21lIHZpZXcgZm9yIDJEIGFuZCBjb2x1bWJ1cyB2aWV3IHNob3dzIHRoZVxuICogZW50aXJlIG1hcC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW2R1cmF0aW9uXSBUaGUgZHVyYXRpb24gb2YgdGhlIGZsaWdodCBpbiBzZWNvbmRzLiBJZiBvbWl0dGVkLCBDZXNpdW0gYXR0ZW1wdHMgdG8gY2FsY3VsYXRlIGFuIGlkZWFsIGR1cmF0aW9uIGJhc2VkIG9uIHRoZSBkaXN0YW5jZSB0byBiZSB0cmF2ZWxlZCBieSB0aGUgZmxpZ2h0LiBTZWUge0BsaW5rIENhbWVyYSNmbHlUb31cbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5mbHlIb21lID0gZnVuY3Rpb24gKGR1cmF0aW9uKSB7XG4gIHZhciBtb2RlID0gdGhpcy5fbW9kZTtcblxuICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgdGhpcy5fc2NlbmUuY29tcGxldGVNb3JwaCgpO1xuICB9XG5cbiAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgdGhpcy5mbHlUbyh7XG4gICAgICBkZXN0aW5hdGlvbjogQ2FtZXJhLkRFRkFVTFRfVklFV19SRUNUQU5HTEUsXG4gICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICBlbmRUcmFuc2Zvcm06IE1hdHJpeDQuSURFTlRJVFksXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0QpIHtcbiAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmdldFJlY3RhbmdsZUNhbWVyYUNvb3JkaW5hdGVzKFxuICAgICAgQ2FtZXJhLkRFRkFVTFRfVklFV19SRUNUQU5HTEVcbiAgICApO1xuXG4gICAgdmFyIG1hZyA9IENhcnRlc2lhbjMubWFnbml0dWRlKGRlc3RpbmF0aW9uKTtcbiAgICBtYWcgKz0gbWFnICogQ2FtZXJhLkRFRkFVTFRfVklFV19GQUNUT1I7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUoZGVzdGluYXRpb24sIGRlc3RpbmF0aW9uKTtcbiAgICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoZGVzdGluYXRpb24sIG1hZywgZGVzdGluYXRpb24pO1xuXG4gICAgdGhpcy5mbHlUbyh7XG4gICAgICBkZXN0aW5hdGlvbjogZGVzdGluYXRpb24sXG4gICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICBlbmRUcmFuc2Zvcm06IE1hdHJpeDQuSURFTlRJVFksXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcpIHtcbiAgICB2YXIgbWF4UmFkaWkgPSB0aGlzLl9wcm9qZWN0aW9uLmVsbGlwc29pZC5tYXhpbXVtUmFkaXVzO1xuICAgIHZhciBwb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKDAuMCwgLTEuMCwgMS4wKTtcbiAgICBwb3NpdGlvbiA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICAgIENhcnRlc2lhbjMubm9ybWFsaXplKHBvc2l0aW9uLCBwb3NpdGlvbiksXG4gICAgICA1LjAgKiBtYXhSYWRpaSxcbiAgICAgIHBvc2l0aW9uXG4gICAgKTtcbiAgICB0aGlzLmZseVRvKHtcbiAgICAgIGRlc3RpbmF0aW9uOiBwb3NpdGlvbixcbiAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgIG9yaWVudGF0aW9uOiB7XG4gICAgICAgIGhlYWRpbmc6IDAuMCxcbiAgICAgICAgcGl0Y2g6IC1NYXRoLmFjb3MoQ2FydGVzaWFuMy5ub3JtYWxpemUocG9zaXRpb24sIHBpdGNoU2NyYXRjaCkueiksXG4gICAgICAgIHJvbGw6IDAuMCxcbiAgICAgIH0sXG4gICAgICBlbmRUcmFuc2Zvcm06IE1hdHJpeDQuSURFTlRJVFksXG4gICAgICBjb252ZXJ0OiBmYWxzZSxcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSB2ZWN0b3Igb3IgcG9pbnQgZnJvbSB3b3JsZCBjb29yZGluYXRlcyB0byB0aGUgY2FtZXJhJ3MgcmVmZXJlbmNlIGZyYW1lLlxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuNH0gY2FydGVzaWFuIFRoZSB2ZWN0b3Igb3IgcG9pbnQgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW40fSBbcmVzdWx0XSBUaGUgb2JqZWN0IG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtDYXJ0ZXNpYW40fSBUaGUgdHJhbnNmb3JtZWQgdmVjdG9yIG9yIHBvaW50LlxuICovXG5DYW1lcmEucHJvdG90eXBlLndvcmxkVG9DYW1lcmFDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjYXJ0ZXNpYW4sIHJlc3VsdCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoY2FydGVzaWFuKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImNhcnRlc2lhbiBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgQ2FydGVzaWFuNCgpO1xuICB9XG4gIHVwZGF0ZU1lbWJlcnModGhpcyk7XG4gIHJldHVybiBNYXRyaXg0Lm11bHRpcGx5QnlWZWN0b3IodGhpcy5fYWN0dWFsSW52VHJhbnNmb3JtLCBjYXJ0ZXNpYW4sIHJlc3VsdCk7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybSBhIHBvaW50IGZyb20gd29ybGQgY29vcmRpbmF0ZXMgdG8gdGhlIGNhbWVyYSdzIHJlZmVyZW5jZSBmcmFtZS5cbiAqXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjN9IGNhcnRlc2lhbiBUaGUgcG9pbnQgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBbcmVzdWx0XSBUaGUgb2JqZWN0IG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtDYXJ0ZXNpYW4zfSBUaGUgdHJhbnNmb3JtZWQgcG9pbnQuXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUud29ybGRUb0NhbWVyYUNvb3JkaW5hdGVzUG9pbnQgPSBmdW5jdGlvbiAoY2FydGVzaWFuLCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGNhcnRlc2lhbikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJjYXJ0ZXNpYW4gaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IENhcnRlc2lhbjMoKTtcbiAgfVxuICB1cGRhdGVNZW1iZXJzKHRoaXMpO1xuICByZXR1cm4gTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQodGhpcy5fYWN0dWFsSW52VHJhbnNmb3JtLCBjYXJ0ZXNpYW4sIHJlc3VsdCk7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybSBhIHZlY3RvciBmcm9tIHdvcmxkIGNvb3JkaW5hdGVzIHRvIHRoZSBjYW1lcmEncyByZWZlcmVuY2UgZnJhbWUuXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBjYXJ0ZXNpYW4gVGhlIHZlY3RvciB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjN9IFtyZXN1bHRdIFRoZSBvYmplY3Qgb250byB3aGljaCB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICogQHJldHVybnMge0NhcnRlc2lhbjN9IFRoZSB0cmFuc2Zvcm1lZCB2ZWN0b3IuXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUud29ybGRUb0NhbWVyYUNvb3JkaW5hdGVzVmVjdG9yID0gZnVuY3Rpb24gKGNhcnRlc2lhbiwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChjYXJ0ZXNpYW4pKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiY2FydGVzaWFuIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBpZiAoIWRlZmluZWQocmVzdWx0KSkge1xuICAgIHJlc3VsdCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIH1cbiAgdXBkYXRlTWVtYmVycyh0aGlzKTtcbiAgcmV0dXJuIE1hdHJpeDQubXVsdGlwbHlCeVBvaW50QXNWZWN0b3IoXG4gICAgdGhpcy5fYWN0dWFsSW52VHJhbnNmb3JtLFxuICAgIGNhcnRlc2lhbixcbiAgICByZXN1bHRcbiAgKTtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtIGEgdmVjdG9yIG9yIHBvaW50IGZyb20gdGhlIGNhbWVyYSdzIHJlZmVyZW5jZSBmcmFtZSB0byB3b3JsZCBjb29yZGluYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0NhcnRlc2lhbjR9IGNhcnRlc2lhbiBUaGUgdmVjdG9yIG9yIHBvaW50IHRvIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuNH0gW3Jlc3VsdF0gVGhlIG9iamVjdCBvbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuNH0gVGhlIHRyYW5zZm9ybWVkIHZlY3RvciBvciBwb2ludC5cbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5jYW1lcmFUb1dvcmxkQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY2FydGVzaWFuLCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGNhcnRlc2lhbikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJjYXJ0ZXNpYW4gaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IENhcnRlc2lhbjQoKTtcbiAgfVxuICB1cGRhdGVNZW1iZXJzKHRoaXMpO1xuICByZXR1cm4gTWF0cml4NC5tdWx0aXBseUJ5VmVjdG9yKHRoaXMuX2FjdHVhbFRyYW5zZm9ybSwgY2FydGVzaWFuLCByZXN1bHQpO1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSBwb2ludCBmcm9tIHRoZSBjYW1lcmEncyByZWZlcmVuY2UgZnJhbWUgdG8gd29ybGQgY29vcmRpbmF0ZXMuXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBjYXJ0ZXNpYW4gVGhlIHBvaW50IHRvIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gW3Jlc3VsdF0gVGhlIG9iamVjdCBvbnRvIHdoaWNoIHRvIHN0b3JlIHRoZSByZXN1bHQuXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuM30gVGhlIHRyYW5zZm9ybWVkIHBvaW50LlxuICovXG5DYW1lcmEucHJvdG90eXBlLmNhbWVyYVRvV29ybGRDb29yZGluYXRlc1BvaW50ID0gZnVuY3Rpb24gKGNhcnRlc2lhbiwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChjYXJ0ZXNpYW4pKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiY2FydGVzaWFuIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBpZiAoIWRlZmluZWQocmVzdWx0KSkge1xuICAgIHJlc3VsdCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIH1cbiAgdXBkYXRlTWVtYmVycyh0aGlzKTtcbiAgcmV0dXJuIE1hdHJpeDQubXVsdGlwbHlCeVBvaW50KHRoaXMuX2FjdHVhbFRyYW5zZm9ybSwgY2FydGVzaWFuLCByZXN1bHQpO1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgZnJvbSB0aGUgY2FtZXJhJ3MgcmVmZXJlbmNlIGZyYW1lIHRvIHdvcmxkIGNvb3JkaW5hdGVzLlxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gY2FydGVzaWFuIFRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBbcmVzdWx0XSBUaGUgb2JqZWN0IG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtDYXJ0ZXNpYW4zfSBUaGUgdHJhbnNmb3JtZWQgdmVjdG9yLlxuICovXG5DYW1lcmEucHJvdG90eXBlLmNhbWVyYVRvV29ybGRDb29yZGluYXRlc1ZlY3RvciA9IGZ1bmN0aW9uIChjYXJ0ZXNpYW4sIHJlc3VsdCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoY2FydGVzaWFuKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImNhcnRlc2lhbiBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgQ2FydGVzaWFuMygpO1xuICB9XG4gIHVwZGF0ZU1lbWJlcnModGhpcyk7XG4gIHJldHVybiBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludEFzVmVjdG9yKFxuICAgIHRoaXMuX2FjdHVhbFRyYW5zZm9ybSxcbiAgICBjYXJ0ZXNpYW4sXG4gICAgcmVzdWx0XG4gICk7XG59O1xuXG5mdW5jdGlvbiBjbGFtcE1vdmUyRChjYW1lcmEsIHBvc2l0aW9uKSB7XG4gIHZhciByb3RhdGFibGUyRCA9IGNhbWVyYS5fc2NlbmUubWFwTW9kZTJEID09PSBNYXBNb2RlMkQuUk9UQVRFO1xuICB2YXIgbWF4UHJvamVjdGVkWCA9IGNhbWVyYS5fbWF4Q29vcmQueDtcbiAgdmFyIG1heFByb2plY3RlZFkgPSBjYW1lcmEuX21heENvb3JkLnk7XG5cbiAgdmFyIG1pblg7XG4gIHZhciBtYXhYO1xuICBpZiAocm90YXRhYmxlMkQpIHtcbiAgICBtYXhYID0gbWF4UHJvamVjdGVkWDtcbiAgICBtaW5YID0gLW1heFg7XG4gIH0gZWxzZSB7XG4gICAgbWF4WCA9IHBvc2l0aW9uLnggLSBtYXhQcm9qZWN0ZWRYICogMi4wO1xuICAgIG1pblggPSBwb3NpdGlvbi54ICsgbWF4UHJvamVjdGVkWCAqIDIuMDtcbiAgfVxuXG4gIGlmIChwb3NpdGlvbi54ID4gbWF4UHJvamVjdGVkWCkge1xuICAgIHBvc2l0aW9uLnggPSBtYXhYO1xuICB9XG4gIGlmIChwb3NpdGlvbi54IDwgLW1heFByb2plY3RlZFgpIHtcbiAgICBwb3NpdGlvbi54ID0gbWluWDtcbiAgfVxuXG4gIGlmIChwb3NpdGlvbi55ID4gbWF4UHJvamVjdGVkWSkge1xuICAgIHBvc2l0aW9uLnkgPSBtYXhQcm9qZWN0ZWRZO1xuICB9XG4gIGlmIChwb3NpdGlvbi55IDwgLW1heFByb2plY3RlZFkpIHtcbiAgICBwb3NpdGlvbi55ID0gLW1heFByb2plY3RlZFk7XG4gIH1cbn1cblxudmFyIG1vdmVTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgY2FtZXJhJ3MgcG9zaXRpb24gYnkgPGNvZGU+YW1vdW50PC9jb2RlPiBhbG9uZyA8Y29kZT5kaXJlY3Rpb248L2NvZGU+LlxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gdG8gbW92ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50LCBpbiBtZXRlcnMsIHRvIG1vdmUuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRNb3ZlQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNtb3ZlQmFja3dhcmRcbiAqIEBzZWUgQ2FtZXJhI21vdmVGb3J3YXJkXG4gKiBAc2VlIENhbWVyYSNtb3ZlTGVmdFxuICogQHNlZSBDYW1lcmEjbW92ZVJpZ2h0XG4gKiBAc2VlIENhbWVyYSNtb3ZlVXBcbiAqIEBzZWUgQ2FtZXJhI21vdmVEb3duXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGFtb3VudCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoZGlyZWN0aW9uKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImRpcmVjdGlvbiBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGNhbWVyYVBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcbiAgQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKGRpcmVjdGlvbiwgYW1vdW50LCBtb3ZlU2NyYXRjaCk7XG4gIENhcnRlc2lhbjMuYWRkKGNhbWVyYVBvc2l0aW9uLCBtb3ZlU2NyYXRjaCwgY2FtZXJhUG9zaXRpb24pO1xuXG4gIGlmICh0aGlzLl9tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIGNsYW1wTW92ZTJEKHRoaXMsIGNhbWVyYVBvc2l0aW9uKTtcbiAgfVxuICB0aGlzLl9hZGp1c3RPcnRob2dyYXBoaWNGcnVzdHVtKHRydWUpO1xufTtcblxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBjYW1lcmEncyBwb3NpdGlvbiBieSA8Y29kZT5hbW91bnQ8L2NvZGU+IGFsb25nIHRoZSBjYW1lcmEncyB2aWV3IHZlY3Rvci5cbiAqIFdoZW4gaW4gMkQgbW9kZSwgdGhpcyB3aWxsIHpvb20gaW4gdGhlIGNhbWVyYSBpbnN0ZWFkIG9mIHRyYW5zbGF0aW5nIHRoZSBjYW1lcmEncyBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW2Ftb3VudF0gVGhlIGFtb3VudCwgaW4gbWV0ZXJzLCB0byBtb3ZlLiBEZWZhdWx0cyB0byA8Y29kZT5kZWZhdWx0TW92ZUFtb3VudDwvY29kZT4uXG4gKlxuICogQHNlZSBDYW1lcmEjbW92ZUJhY2t3YXJkXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUubW92ZUZvcndhcmQgPSBmdW5jdGlvbiAoYW1vdW50KSB7XG4gIGFtb3VudCA9IGRlZmF1bHRWYWx1ZShhbW91bnQsIHRoaXMuZGVmYXVsdE1vdmVBbW91bnQpO1xuXG4gIGlmICh0aGlzLl9tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIC8vIDJEIG1vZGVcbiAgICB6b29tMkQodGhpcywgYW1vdW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyAzRCBvciBDb2x1bWJ1cyB2aWV3IG1vZGVcbiAgICB0aGlzLm1vdmUodGhpcy5kaXJlY3Rpb24sIGFtb3VudCk7XG4gIH1cbn07XG5cbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgY2FtZXJhJ3MgcG9zaXRpb24gYnkgPGNvZGU+YW1vdW50PC9jb2RlPiBhbG9uZyB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uXG4gKiBvZiB0aGUgY2FtZXJhJ3MgdmlldyB2ZWN0b3IuXG4gKiBXaGVuIGluIDJEIG1vZGUsIHRoaXMgd2lsbCB6b29tIG91dCB0aGUgY2FtZXJhIGluc3RlYWQgb2YgdHJhbnNsYXRpbmcgdGhlIGNhbWVyYSdzIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50LCBpbiBtZXRlcnMsIHRvIG1vdmUuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRNb3ZlQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNtb3ZlRm9yd2FyZFxuICovXG5DYW1lcmEucHJvdG90eXBlLm1vdmVCYWNrd2FyZCA9IGZ1bmN0aW9uIChhbW91bnQpIHtcbiAgYW1vdW50ID0gZGVmYXVsdFZhbHVlKGFtb3VudCwgdGhpcy5kZWZhdWx0TW92ZUFtb3VudCk7XG5cbiAgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgLy8gMkQgbW9kZVxuICAgIHpvb20yRCh0aGlzLCAtYW1vdW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyAzRCBvciBDb2x1bWJ1cyB2aWV3IG1vZGVcbiAgICB0aGlzLm1vdmUodGhpcy5kaXJlY3Rpb24sIC1hbW91bnQpO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYW5zbGF0ZXMgdGhlIGNhbWVyYSdzIHBvc2l0aW9uIGJ5IDxjb2RlPmFtb3VudDwvY29kZT4gYWxvbmcgdGhlIGNhbWVyYSdzIHVwIHZlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW2Ftb3VudF0gVGhlIGFtb3VudCwgaW4gbWV0ZXJzLCB0byBtb3ZlLiBEZWZhdWx0cyB0byA8Y29kZT5kZWZhdWx0TW92ZUFtb3VudDwvY29kZT4uXG4gKlxuICogQHNlZSBDYW1lcmEjbW92ZURvd25cbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5tb3ZlVXAgPSBmdW5jdGlvbiAoYW1vdW50KSB7XG4gIGFtb3VudCA9IGRlZmF1bHRWYWx1ZShhbW91bnQsIHRoaXMuZGVmYXVsdE1vdmVBbW91bnQpO1xuICB0aGlzLm1vdmUodGhpcy51cCwgYW1vdW50KTtcbn07XG5cbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgY2FtZXJhJ3MgcG9zaXRpb24gYnkgPGNvZGU+YW1vdW50PC9jb2RlPiBhbG9uZyB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uXG4gKiBvZiB0aGUgY2FtZXJhJ3MgdXAgdmVjdG9yLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50LCBpbiBtZXRlcnMsIHRvIG1vdmUuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRNb3ZlQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNtb3ZlVXBcbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5tb3ZlRG93biA9IGZ1bmN0aW9uIChhbW91bnQpIHtcbiAgYW1vdW50ID0gZGVmYXVsdFZhbHVlKGFtb3VudCwgdGhpcy5kZWZhdWx0TW92ZUFtb3VudCk7XG4gIHRoaXMubW92ZSh0aGlzLnVwLCAtYW1vdW50KTtcbn07XG5cbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgY2FtZXJhJ3MgcG9zaXRpb24gYnkgPGNvZGU+YW1vdW50PC9jb2RlPiBhbG9uZyB0aGUgY2FtZXJhJ3MgcmlnaHQgdmVjdG9yLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50LCBpbiBtZXRlcnMsIHRvIG1vdmUuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRNb3ZlQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNtb3ZlTGVmdFxuICovXG5DYW1lcmEucHJvdG90eXBlLm1vdmVSaWdodCA9IGZ1bmN0aW9uIChhbW91bnQpIHtcbiAgYW1vdW50ID0gZGVmYXVsdFZhbHVlKGFtb3VudCwgdGhpcy5kZWZhdWx0TW92ZUFtb3VudCk7XG4gIHRoaXMubW92ZSh0aGlzLnJpZ2h0LCBhbW91bnQpO1xufTtcblxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBjYW1lcmEncyBwb3NpdGlvbiBieSA8Y29kZT5hbW91bnQ8L2NvZGU+IGFsb25nIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAqIG9mIHRoZSBjYW1lcmEncyByaWdodCB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFthbW91bnRdIFRoZSBhbW91bnQsIGluIG1ldGVycywgdG8gbW92ZS4gRGVmYXVsdHMgdG8gPGNvZGU+ZGVmYXVsdE1vdmVBbW91bnQ8L2NvZGU+LlxuICpcbiAqIEBzZWUgQ2FtZXJhI21vdmVSaWdodFxuICovXG5DYW1lcmEucHJvdG90eXBlLm1vdmVMZWZ0ID0gZnVuY3Rpb24gKGFtb3VudCkge1xuICBhbW91bnQgPSBkZWZhdWx0VmFsdWUoYW1vdW50LCB0aGlzLmRlZmF1bHRNb3ZlQW1vdW50KTtcbiAgdGhpcy5tb3ZlKHRoaXMucmlnaHQsIC1hbW91bnQpO1xufTtcblxuLyoqXG4gKiBSb3RhdGVzIHRoZSBjYW1lcmEgYXJvdW5kIGl0cyB1cCB2ZWN0b3IgYnkgYW1vdW50LCBpbiByYWRpYW5zLCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uXG4gKiBvZiBpdHMgcmlnaHQgdmVjdG9yIGlmIG5vdCBpbiAyRCBtb2RlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50LCBpbiByYWRpYW5zLCB0byByb3RhdGUgYnkuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRMb29rQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNsb29rUmlnaHRcbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5sb29rTGVmdCA9IGZ1bmN0aW9uIChhbW91bnQpIHtcbiAgYW1vdW50ID0gZGVmYXVsdFZhbHVlKGFtb3VudCwgdGhpcy5kZWZhdWx0TG9va0Ftb3VudCk7XG5cbiAgLy8gb25seSB3YW50IHZpZXcgb2YgbWFwIHRvIGNoYW5nZSBpbiAzRCBtb2RlLCAyRCB2aXN1YWwgaXMgaW5jb3JyZWN0IHdoZW4gbG9vayBjaGFuZ2VzXG4gIGlmICh0aGlzLl9tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIHRoaXMubG9vayh0aGlzLnVwLCAtYW1vdW50KTtcbiAgfVxufTtcblxuLyoqXG4gKiBSb3RhdGVzIHRoZSBjYW1lcmEgYXJvdW5kIGl0cyB1cCB2ZWN0b3IgYnkgYW1vdW50LCBpbiByYWRpYW5zLCBpbiB0aGUgZGlyZWN0aW9uXG4gKiBvZiBpdHMgcmlnaHQgdmVjdG9yIGlmIG5vdCBpbiAyRCBtb2RlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50LCBpbiByYWRpYW5zLCB0byByb3RhdGUgYnkuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRMb29rQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNsb29rTGVmdFxuICovXG5DYW1lcmEucHJvdG90eXBlLmxvb2tSaWdodCA9IGZ1bmN0aW9uIChhbW91bnQpIHtcbiAgYW1vdW50ID0gZGVmYXVsdFZhbHVlKGFtb3VudCwgdGhpcy5kZWZhdWx0TG9va0Ftb3VudCk7XG5cbiAgLy8gb25seSB3YW50IHZpZXcgb2YgbWFwIHRvIGNoYW5nZSBpbiAzRCBtb2RlLCAyRCB2aXN1YWwgaXMgaW5jb3JyZWN0IHdoZW4gbG9vayBjaGFuZ2VzXG4gIGlmICh0aGlzLl9tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIHRoaXMubG9vayh0aGlzLnVwLCBhbW91bnQpO1xuICB9XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgdGhlIGNhbWVyYSBhcm91bmQgaXRzIHJpZ2h0IHZlY3RvciBieSBhbW91bnQsIGluIHJhZGlhbnMsIGluIHRoZSBkaXJlY3Rpb25cbiAqIG9mIGl0cyB1cCB2ZWN0b3IgaWYgbm90IGluIDJEIG1vZGUuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFthbW91bnRdIFRoZSBhbW91bnQsIGluIHJhZGlhbnMsIHRvIHJvdGF0ZSBieS4gRGVmYXVsdHMgdG8gPGNvZGU+ZGVmYXVsdExvb2tBbW91bnQ8L2NvZGU+LlxuICpcbiAqIEBzZWUgQ2FtZXJhI2xvb2tEb3duXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUubG9va1VwID0gZnVuY3Rpb24gKGFtb3VudCkge1xuICBhbW91bnQgPSBkZWZhdWx0VmFsdWUoYW1vdW50LCB0aGlzLmRlZmF1bHRMb29rQW1vdW50KTtcblxuICAvLyBvbmx5IHdhbnQgdmlldyBvZiBtYXAgdG8gY2hhbmdlIGluIDNEIG1vZGUsIDJEIHZpc3VhbCBpcyBpbmNvcnJlY3Qgd2hlbiBsb29rIGNoYW5nZXNcbiAgaWYgKHRoaXMuX21vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgdGhpcy5sb29rKHRoaXMucmlnaHQsIC1hbW91bnQpO1xuICB9XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgdGhlIGNhbWVyYSBhcm91bmQgaXRzIHJpZ2h0IHZlY3RvciBieSBhbW91bnQsIGluIHJhZGlhbnMsIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAqIG9mIGl0cyB1cCB2ZWN0b3IgaWYgbm90IGluIDJEIG1vZGUuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFthbW91bnRdIFRoZSBhbW91bnQsIGluIHJhZGlhbnMsIHRvIHJvdGF0ZSBieS4gRGVmYXVsdHMgdG8gPGNvZGU+ZGVmYXVsdExvb2tBbW91bnQ8L2NvZGU+LlxuICpcbiAqIEBzZWUgQ2FtZXJhI2xvb2tVcFxuICovXG5DYW1lcmEucHJvdG90eXBlLmxvb2tEb3duID0gZnVuY3Rpb24gKGFtb3VudCkge1xuICBhbW91bnQgPSBkZWZhdWx0VmFsdWUoYW1vdW50LCB0aGlzLmRlZmF1bHRMb29rQW1vdW50KTtcblxuICAvLyBvbmx5IHdhbnQgdmlldyBvZiBtYXAgdG8gY2hhbmdlIGluIDNEIG1vZGUsIDJEIHZpc3VhbCBpcyBpbmNvcnJlY3Qgd2hlbiBsb29rIGNoYW5nZXNcbiAgaWYgKHRoaXMuX21vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgdGhpcy5sb29rKHRoaXMucmlnaHQsIGFtb3VudCk7XG4gIH1cbn07XG5cbnZhciBsb29rU2NyYXRjaFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xudmFyIGxvb2tTY3JhdGNoTWF0cml4ID0gbmV3IE1hdHJpeDMoKTtcbi8qKlxuICogUm90YXRlIGVhY2ggb2YgdGhlIGNhbWVyYSdzIG9yaWVudGF0aW9uIHZlY3RvcnMgYXJvdW5kIDxjb2RlPmF4aXM8L2NvZGU+IGJ5IDxjb2RlPmFuZ2xlPC9jb2RlPlxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gYXhpcyBUaGUgYXhpcyB0byByb3RhdGUgYXJvdW5kLlxuICogQHBhcmFtIHtOdW1iZXJ9IFthbmdsZV0gVGhlIGFuZ2xlLCBpbiByYWRpYW5zLCB0byByb3RhdGUgYnkuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRMb29rQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNsb29rVXBcbiAqIEBzZWUgQ2FtZXJhI2xvb2tEb3duXG4gKiBAc2VlIENhbWVyYSNsb29rTGVmdFxuICogQHNlZSBDYW1lcmEjbG9va1JpZ2h0XG4gKi9cbkNhbWVyYS5wcm90b3R5cGUubG9vayA9IGZ1bmN0aW9uIChheGlzLCBhbmdsZSkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoYXhpcykpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJheGlzIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgdHVybkFuZ2xlID0gZGVmYXVsdFZhbHVlKGFuZ2xlLCB0aGlzLmRlZmF1bHRMb29rQW1vdW50KTtcbiAgdmFyIHF1YXRlcm5pb24gPSBRdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUoXG4gICAgYXhpcyxcbiAgICAtdHVybkFuZ2xlLFxuICAgIGxvb2tTY3JhdGNoUXVhdGVybmlvblxuICApO1xuICB2YXIgcm90YXRpb24gPSBNYXRyaXgzLmZyb21RdWF0ZXJuaW9uKHF1YXRlcm5pb24sIGxvb2tTY3JhdGNoTWF0cml4KTtcblxuICB2YXIgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247XG4gIHZhciB1cCA9IHRoaXMudXA7XG4gIHZhciByaWdodCA9IHRoaXMucmlnaHQ7XG5cbiAgTWF0cml4My5tdWx0aXBseUJ5VmVjdG9yKHJvdGF0aW9uLCBkaXJlY3Rpb24sIGRpcmVjdGlvbik7XG4gIE1hdHJpeDMubXVsdGlwbHlCeVZlY3Rvcihyb3RhdGlvbiwgdXAsIHVwKTtcbiAgTWF0cml4My5tdWx0aXBseUJ5VmVjdG9yKHJvdGF0aW9uLCByaWdodCwgcmlnaHQpO1xufTtcblxuLyoqXG4gKiBSb3RhdGUgdGhlIGNhbWVyYSBjb3VudGVyLWNsb2Nrd2lzZSBhcm91bmQgaXRzIGRpcmVjdGlvbiB2ZWN0b3IgYnkgYW1vdW50LCBpbiByYWRpYW5zLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50LCBpbiByYWRpYW5zLCB0byByb3RhdGUgYnkuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRMb29rQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSN0d2lzdFJpZ2h0XG4gKi9cbkNhbWVyYS5wcm90b3R5cGUudHdpc3RMZWZ0ID0gZnVuY3Rpb24gKGFtb3VudCkge1xuICBhbW91bnQgPSBkZWZhdWx0VmFsdWUoYW1vdW50LCB0aGlzLmRlZmF1bHRMb29rQW1vdW50KTtcbiAgdGhpcy5sb29rKHRoaXMuZGlyZWN0aW9uLCBhbW91bnQpO1xufTtcblxuLyoqXG4gKiBSb3RhdGUgdGhlIGNhbWVyYSBjbG9ja3dpc2UgYXJvdW5kIGl0cyBkaXJlY3Rpb24gdmVjdG9yIGJ5IGFtb3VudCwgaW4gcmFkaWFucy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW2Ftb3VudF0gVGhlIGFtb3VudCwgaW4gcmFkaWFucywgdG8gcm90YXRlIGJ5LiBEZWZhdWx0cyB0byA8Y29kZT5kZWZhdWx0TG9va0Ftb3VudDwvY29kZT4uXG4gKlxuICogQHNlZSBDYW1lcmEjdHdpc3RMZWZ0XG4gKi9cbkNhbWVyYS5wcm90b3R5cGUudHdpc3RSaWdodCA9IGZ1bmN0aW9uIChhbW91bnQpIHtcbiAgYW1vdW50ID0gZGVmYXVsdFZhbHVlKGFtb3VudCwgdGhpcy5kZWZhdWx0TG9va0Ftb3VudCk7XG4gIHRoaXMubG9vayh0aGlzLmRpcmVjdGlvbiwgLWFtb3VudCk7XG59O1xuXG52YXIgcm90YXRlU2NyYXRjaFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xudmFyIHJvdGF0ZVNjcmF0Y2hNYXRyaXggPSBuZXcgTWF0cml4MygpO1xuLyoqXG4gKiBSb3RhdGVzIHRoZSBjYW1lcmEgYXJvdW5kIDxjb2RlPmF4aXM8L2NvZGU+IGJ5IDxjb2RlPmFuZ2xlPC9jb2RlPi4gVGhlIGRpc3RhbmNlXG4gKiBvZiB0aGUgY2FtZXJhJ3MgcG9zaXRpb24gdG8gdGhlIGNlbnRlciBvZiB0aGUgY2FtZXJhJ3MgcmVmZXJlbmNlIGZyYW1lIHJlbWFpbnMgdGhlIHNhbWUuXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBheGlzIFRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmQgZ2l2ZW4gaW4gd29ybGQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gW2FuZ2xlXSBUaGUgYW5nbGUsIGluIHJhZGlhbnMsIHRvIHJvdGF0ZSBieS4gRGVmYXVsdHMgdG8gPGNvZGU+ZGVmYXVsdFJvdGF0ZUFtb3VudDwvY29kZT4uXG4gKlxuICogQHNlZSBDYW1lcmEjcm90YXRlVXBcbiAqIEBzZWUgQ2FtZXJhI3JvdGF0ZURvd25cbiAqIEBzZWUgQ2FtZXJhI3JvdGF0ZUxlZnRcbiAqIEBzZWUgQ2FtZXJhI3JvdGF0ZVJpZ2h0XG4gKi9cbkNhbWVyYS5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKGF4aXMsIGFuZ2xlKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChheGlzKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImF4aXMgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciB0dXJuQW5nbGUgPSBkZWZhdWx0VmFsdWUoYW5nbGUsIHRoaXMuZGVmYXVsdFJvdGF0ZUFtb3VudCk7XG4gIHZhciBxdWF0ZXJuaW9uID0gUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKFxuICAgIGF4aXMsXG4gICAgLXR1cm5BbmdsZSxcbiAgICByb3RhdGVTY3JhdGNoUXVhdGVybmlvblxuICApO1xuICB2YXIgcm90YXRpb24gPSBNYXRyaXgzLmZyb21RdWF0ZXJuaW9uKHF1YXRlcm5pb24sIHJvdGF0ZVNjcmF0Y2hNYXRyaXgpO1xuICBNYXRyaXgzLm11bHRpcGx5QnlWZWN0b3Iocm90YXRpb24sIHRoaXMucG9zaXRpb24sIHRoaXMucG9zaXRpb24pO1xuICBNYXRyaXgzLm11bHRpcGx5QnlWZWN0b3Iocm90YXRpb24sIHRoaXMuZGlyZWN0aW9uLCB0aGlzLmRpcmVjdGlvbik7XG4gIE1hdHJpeDMubXVsdGlwbHlCeVZlY3Rvcihyb3RhdGlvbiwgdGhpcy51cCwgdGhpcy51cCk7XG4gIENhcnRlc2lhbjMuY3Jvc3ModGhpcy5kaXJlY3Rpb24sIHRoaXMudXAsIHRoaXMucmlnaHQpO1xuICBDYXJ0ZXNpYW4zLmNyb3NzKHRoaXMucmlnaHQsIHRoaXMuZGlyZWN0aW9uLCB0aGlzLnVwKTtcblxuICB0aGlzLl9hZGp1c3RPcnRob2dyYXBoaWNGcnVzdHVtKGZhbHNlKTtcbn07XG5cbi8qKlxuICogUm90YXRlcyB0aGUgY2FtZXJhIGFyb3VuZCB0aGUgY2VudGVyIG9mIHRoZSBjYW1lcmEncyByZWZlcmVuY2UgZnJhbWUgYnkgYW5nbGUgZG93bndhcmRzLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW5nbGVdIFRoZSBhbmdsZSwgaW4gcmFkaWFucywgdG8gcm90YXRlIGJ5LiBEZWZhdWx0cyB0byA8Y29kZT5kZWZhdWx0Um90YXRlQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNyb3RhdGVVcFxuICogQHNlZSBDYW1lcmEjcm90YXRlXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUucm90YXRlRG93biA9IGZ1bmN0aW9uIChhbmdsZSkge1xuICBhbmdsZSA9IGRlZmF1bHRWYWx1ZShhbmdsZSwgdGhpcy5kZWZhdWx0Um90YXRlQW1vdW50KTtcbiAgcm90YXRlVmVydGljYWwodGhpcywgYW5nbGUpO1xufTtcblxuLyoqXG4gKiBSb3RhdGVzIHRoZSBjYW1lcmEgYXJvdW5kIHRoZSBjZW50ZXIgb2YgdGhlIGNhbWVyYSdzIHJlZmVyZW5jZSBmcmFtZSBieSBhbmdsZSB1cHdhcmRzLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW5nbGVdIFRoZSBhbmdsZSwgaW4gcmFkaWFucywgdG8gcm90YXRlIGJ5LiBEZWZhdWx0cyB0byA8Y29kZT5kZWZhdWx0Um90YXRlQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNyb3RhdGVEb3duXG4gKiBAc2VlIENhbWVyYSNyb3RhdGVcbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5yb3RhdGVVcCA9IGZ1bmN0aW9uIChhbmdsZSkge1xuICBhbmdsZSA9IGRlZmF1bHRWYWx1ZShhbmdsZSwgdGhpcy5kZWZhdWx0Um90YXRlQW1vdW50KTtcbiAgcm90YXRlVmVydGljYWwodGhpcywgLWFuZ2xlKTtcbn07XG5cbnZhciByb3RhdGVWZXJ0U2NyYXRjaFAgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHJvdGF0ZVZlcnRTY3JhdGNoQSA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcm90YXRlVmVydFNjcmF0Y2hUYW4gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHJvdGF0ZVZlcnRTY3JhdGNoTmVnYXRlID0gbmV3IENhcnRlc2lhbjMoKTtcbmZ1bmN0aW9uIHJvdGF0ZVZlcnRpY2FsKGNhbWVyYSwgYW5nbGUpIHtcbiAgdmFyIHBvc2l0aW9uID0gY2FtZXJhLnBvc2l0aW9uO1xuICBpZiAoXG4gICAgZGVmaW5lZChjYW1lcmEuY29uc3RyYWluZWRBeGlzKSAmJlxuICAgICFDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb24oXG4gICAgICBjYW1lcmEucG9zaXRpb24sXG4gICAgICBDYXJ0ZXNpYW4zLlpFUk8sXG4gICAgICBDZXNpdW1NYXRoLkVQU0lMT04yXG4gICAgKVxuICApIHtcbiAgICB2YXIgcCA9IENhcnRlc2lhbjMubm9ybWFsaXplKHBvc2l0aW9uLCByb3RhdGVWZXJ0U2NyYXRjaFApO1xuICAgIHZhciBub3J0aFBhcmFsbGVsID0gQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uKFxuICAgICAgcCxcbiAgICAgIGNhbWVyYS5jb25zdHJhaW5lZEF4aXMsXG4gICAgICBDZXNpdW1NYXRoLkVQU0lMT04yXG4gICAgKTtcbiAgICB2YXIgc291dGhQYXJhbGxlbCA9IENhcnRlc2lhbjMuZXF1YWxzRXBzaWxvbihcbiAgICAgIHAsXG4gICAgICBDYXJ0ZXNpYW4zLm5lZ2F0ZShjYW1lcmEuY29uc3RyYWluZWRBeGlzLCByb3RhdGVWZXJ0U2NyYXRjaE5lZ2F0ZSksXG4gICAgICBDZXNpdW1NYXRoLkVQU0lMT04yXG4gICAgKTtcbiAgICBpZiAoIW5vcnRoUGFyYWxsZWwgJiYgIXNvdXRoUGFyYWxsZWwpIHtcbiAgICAgIHZhciBjb25zdHJhaW5lZEF4aXMgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShcbiAgICAgICAgY2FtZXJhLmNvbnN0cmFpbmVkQXhpcyxcbiAgICAgICAgcm90YXRlVmVydFNjcmF0Y2hBXG4gICAgICApO1xuXG4gICAgICB2YXIgZG90ID0gQ2FydGVzaWFuMy5kb3QocCwgY29uc3RyYWluZWRBeGlzKTtcbiAgICAgIHZhciBhbmdsZVRvQXhpcyA9IENlc2l1bU1hdGguYWNvc0NsYW1wZWQoZG90KTtcbiAgICAgIGlmIChhbmdsZSA+IDAgJiYgYW5nbGUgPiBhbmdsZVRvQXhpcykge1xuICAgICAgICBhbmdsZSA9IGFuZ2xlVG9BeGlzIC0gQ2VzaXVtTWF0aC5FUFNJTE9ONDtcbiAgICAgIH1cblxuICAgICAgZG90ID0gQ2FydGVzaWFuMy5kb3QoXG4gICAgICAgIHAsXG4gICAgICAgIENhcnRlc2lhbjMubmVnYXRlKGNvbnN0cmFpbmVkQXhpcywgcm90YXRlVmVydFNjcmF0Y2hOZWdhdGUpXG4gICAgICApO1xuICAgICAgYW5nbGVUb0F4aXMgPSBDZXNpdW1NYXRoLmFjb3NDbGFtcGVkKGRvdCk7XG4gICAgICBpZiAoYW5nbGUgPCAwICYmIC1hbmdsZSA+IGFuZ2xlVG9BeGlzKSB7XG4gICAgICAgIGFuZ2xlID0gLWFuZ2xlVG9BeGlzICsgQ2VzaXVtTWF0aC5FUFNJTE9ONDtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhbmdlbnQgPSBDYXJ0ZXNpYW4zLmNyb3NzKGNvbnN0cmFpbmVkQXhpcywgcCwgcm90YXRlVmVydFNjcmF0Y2hUYW4pO1xuICAgICAgY2FtZXJhLnJvdGF0ZSh0YW5nZW50LCBhbmdsZSk7XG4gICAgfSBlbHNlIGlmICgobm9ydGhQYXJhbGxlbCAmJiBhbmdsZSA8IDApIHx8IChzb3V0aFBhcmFsbGVsICYmIGFuZ2xlID4gMCkpIHtcbiAgICAgIGNhbWVyYS5yb3RhdGUoY2FtZXJhLnJpZ2h0LCBhbmdsZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNhbWVyYS5yb3RhdGUoY2FtZXJhLnJpZ2h0LCBhbmdsZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSb3RhdGVzIHRoZSBjYW1lcmEgYXJvdW5kIHRoZSBjZW50ZXIgb2YgdGhlIGNhbWVyYSdzIHJlZmVyZW5jZSBmcmFtZSBieSBhbmdsZSB0byB0aGUgcmlnaHQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFthbmdsZV0gVGhlIGFuZ2xlLCBpbiByYWRpYW5zLCB0byByb3RhdGUgYnkuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRSb3RhdGVBbW91bnQ8L2NvZGU+LlxuICpcbiAqIEBzZWUgQ2FtZXJhI3JvdGF0ZUxlZnRcbiAqIEBzZWUgQ2FtZXJhI3JvdGF0ZVxuICovXG5DYW1lcmEucHJvdG90eXBlLnJvdGF0ZVJpZ2h0ID0gZnVuY3Rpb24gKGFuZ2xlKSB7XG4gIGFuZ2xlID0gZGVmYXVsdFZhbHVlKGFuZ2xlLCB0aGlzLmRlZmF1bHRSb3RhdGVBbW91bnQpO1xuICByb3RhdGVIb3Jpem9udGFsKHRoaXMsIC1hbmdsZSk7XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgdGhlIGNhbWVyYSBhcm91bmQgdGhlIGNlbnRlciBvZiB0aGUgY2FtZXJhJ3MgcmVmZXJlbmNlIGZyYW1lIGJ5IGFuZ2xlIHRvIHRoZSBsZWZ0LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW5nbGVdIFRoZSBhbmdsZSwgaW4gcmFkaWFucywgdG8gcm90YXRlIGJ5LiBEZWZhdWx0cyB0byA8Y29kZT5kZWZhdWx0Um90YXRlQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSNyb3RhdGVSaWdodFxuICogQHNlZSBDYW1lcmEjcm90YXRlXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUucm90YXRlTGVmdCA9IGZ1bmN0aW9uIChhbmdsZSkge1xuICBhbmdsZSA9IGRlZmF1bHRWYWx1ZShhbmdsZSwgdGhpcy5kZWZhdWx0Um90YXRlQW1vdW50KTtcbiAgcm90YXRlSG9yaXpvbnRhbCh0aGlzLCBhbmdsZSk7XG59O1xuXG5mdW5jdGlvbiByb3RhdGVIb3Jpem9udGFsKGNhbWVyYSwgYW5nbGUpIHtcbiAgaWYgKGRlZmluZWQoY2FtZXJhLmNvbnN0cmFpbmVkQXhpcykpIHtcbiAgICBjYW1lcmEucm90YXRlKGNhbWVyYS5jb25zdHJhaW5lZEF4aXMsIGFuZ2xlKTtcbiAgfSBlbHNlIHtcbiAgICBjYW1lcmEucm90YXRlKGNhbWVyYS51cCwgYW5nbGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHpvb20yRChjYW1lcmEsIGFtb3VudCkge1xuICB2YXIgZnJ1c3R1bSA9IGNhbWVyYS5mcnVzdHVtO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmIChcbiAgICAhKGZydXN0dW0gaW5zdGFuY2VvZiBPcnRob2dyYXBoaWNPZmZDZW50ZXJGcnVzdHVtKSB8fFxuICAgICFkZWZpbmVkKGZydXN0dW0ubGVmdCkgfHxcbiAgICAhZGVmaW5lZChmcnVzdHVtLnJpZ2h0KSB8fFxuICAgICFkZWZpbmVkKGZydXN0dW0uYm90dG9tKSB8fFxuICAgICFkZWZpbmVkKGZydXN0dW0udG9wKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIlRoZSBjYW1lcmEgZnJ1c3R1bSBpcyBleHBlY3RlZCB0byBiZSBvcnRob2dyYXBoaWMgZm9yIDJEIGNhbWVyYSBjb250cm9sLlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgcmF0aW87XG4gIGFtb3VudCA9IGFtb3VudCAqIDAuNTtcblxuICBpZiAoXG4gICAgTWF0aC5hYnMoZnJ1c3R1bS50b3ApICsgTWF0aC5hYnMoZnJ1c3R1bS5ib3R0b20pID5cbiAgICBNYXRoLmFicyhmcnVzdHVtLmxlZnQpICsgTWF0aC5hYnMoZnJ1c3R1bS5yaWdodClcbiAgKSB7XG4gICAgdmFyIG5ld1RvcCA9IGZydXN0dW0udG9wIC0gYW1vdW50O1xuICAgIHZhciBuZXdCb3R0b20gPSBmcnVzdHVtLmJvdHRvbSArIGFtb3VudDtcblxuICAgIHZhciBtYXhCb3R0b20gPSBjYW1lcmEuX21heENvb3JkLnk7XG4gICAgaWYgKGNhbWVyYS5fc2NlbmUubWFwTW9kZTJEID09PSBNYXBNb2RlMkQuUk9UQVRFKSB7XG4gICAgICBtYXhCb3R0b20gKj0gY2FtZXJhLm1heGltdW1ab29tRmFjdG9yO1xuICAgIH1cblxuICAgIGlmIChuZXdCb3R0b20gPiBtYXhCb3R0b20pIHtcbiAgICAgIG5ld0JvdHRvbSA9IG1heEJvdHRvbTtcbiAgICAgIG5ld1RvcCA9IC1tYXhCb3R0b207XG4gICAgfVxuXG4gICAgaWYgKG5ld1RvcCA8PSBuZXdCb3R0b20pIHtcbiAgICAgIG5ld1RvcCA9IDEuMDtcbiAgICAgIG5ld0JvdHRvbSA9IC0xLjA7XG4gICAgfVxuXG4gICAgcmF0aW8gPSBmcnVzdHVtLnJpZ2h0IC8gZnJ1c3R1bS50b3A7XG4gICAgZnJ1c3R1bS50b3AgPSBuZXdUb3A7XG4gICAgZnJ1c3R1bS5ib3R0b20gPSBuZXdCb3R0b207XG4gICAgZnJ1c3R1bS5yaWdodCA9IGZydXN0dW0udG9wICogcmF0aW87XG4gICAgZnJ1c3R1bS5sZWZ0ID0gLWZydXN0dW0ucmlnaHQ7XG4gIH0gZWxzZSB7XG4gICAgdmFyIG5ld1JpZ2h0ID0gZnJ1c3R1bS5yaWdodCAtIGFtb3VudDtcbiAgICB2YXIgbmV3TGVmdCA9IGZydXN0dW0ubGVmdCArIGFtb3VudDtcblxuICAgIHZhciBtYXhSaWdodCA9IGNhbWVyYS5fbWF4Q29vcmQueDtcbiAgICBpZiAoY2FtZXJhLl9zY2VuZS5tYXBNb2RlMkQgPT09IE1hcE1vZGUyRC5ST1RBVEUpIHtcbiAgICAgIG1heFJpZ2h0ICo9IGNhbWVyYS5tYXhpbXVtWm9vbUZhY3RvcjtcbiAgICB9XG5cbiAgICBpZiAobmV3UmlnaHQgPiBtYXhSaWdodCkge1xuICAgICAgbmV3UmlnaHQgPSBtYXhSaWdodDtcbiAgICAgIG5ld0xlZnQgPSAtbWF4UmlnaHQ7XG4gICAgfVxuXG4gICAgaWYgKG5ld1JpZ2h0IDw9IG5ld0xlZnQpIHtcbiAgICAgIG5ld1JpZ2h0ID0gMS4wO1xuICAgICAgbmV3TGVmdCA9IC0xLjA7XG4gICAgfVxuICAgIHJhdGlvID0gZnJ1c3R1bS50b3AgLyBmcnVzdHVtLnJpZ2h0O1xuICAgIGZydXN0dW0ucmlnaHQgPSBuZXdSaWdodDtcbiAgICBmcnVzdHVtLmxlZnQgPSBuZXdMZWZ0O1xuICAgIGZydXN0dW0udG9wID0gZnJ1c3R1bS5yaWdodCAqIHJhdGlvO1xuICAgIGZydXN0dW0uYm90dG9tID0gLWZydXN0dW0udG9wO1xuICB9XG59XG5cbmZ1bmN0aW9uIHpvb20zRChjYW1lcmEsIGFtb3VudCkge1xuICBjYW1lcmEubW92ZShjYW1lcmEuZGlyZWN0aW9uLCBhbW91bnQpO1xufVxuXG4vKipcbiAqIFpvb21zIDxjb2RlPmFtb3VudDwvY29kZT4gYWxvbmcgdGhlIGNhbWVyYSdzIHZpZXcgdmVjdG9yLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBbYW1vdW50XSBUaGUgYW1vdW50IHRvIG1vdmUuIERlZmF1bHRzIHRvIDxjb2RlPmRlZmF1bHRab29tQW1vdW50PC9jb2RlPi5cbiAqXG4gKiBAc2VlIENhbWVyYSN6b29tT3V0XG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuem9vbUluID0gZnVuY3Rpb24gKGFtb3VudCkge1xuICBhbW91bnQgPSBkZWZhdWx0VmFsdWUoYW1vdW50LCB0aGlzLmRlZmF1bHRab29tQW1vdW50KTtcbiAgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgem9vbTJEKHRoaXMsIGFtb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgem9vbTNEKHRoaXMsIGFtb3VudCk7XG4gIH1cbn07XG5cbi8qKlxuICogWm9vbXMgPGNvZGU+YW1vdW50PC9jb2RlPiBhbG9uZyB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uIG9mXG4gKiB0aGUgY2FtZXJhJ3MgdmlldyB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IFthbW91bnRdIFRoZSBhbW91bnQgdG8gbW92ZS4gRGVmYXVsdHMgdG8gPGNvZGU+ZGVmYXVsdFpvb21BbW91bnQ8L2NvZGU+LlxuICpcbiAqIEBzZWUgQ2FtZXJhI3pvb21JblxuICovXG5DYW1lcmEucHJvdG90eXBlLnpvb21PdXQgPSBmdW5jdGlvbiAoYW1vdW50KSB7XG4gIGFtb3VudCA9IGRlZmF1bHRWYWx1ZShhbW91bnQsIHRoaXMuZGVmYXVsdFpvb21BbW91bnQpO1xuICBpZiAodGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQpIHtcbiAgICB6b29tMkQodGhpcywgLWFtb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgem9vbTNEKHRoaXMsIC1hbW91bnQpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIG1hZ25pdHVkZSBvZiB0aGUgY2FtZXJhIHBvc2l0aW9uLiBJbiAzRCwgdGhpcyBpcyB0aGUgdmVjdG9yIG1hZ25pdHVkZS4gSW4gMkQgYW5kXG4gKiBDb2x1bWJ1cyB2aWV3LCB0aGlzIGlzIHRoZSBkaXN0YW5jZSB0byB0aGUgbWFwLlxuICpcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBtYWduaXR1ZGUgb2YgdGhlIHBvc2l0aW9uLlxuICovXG5DYW1lcmEucHJvdG90eXBlLmdldE1hZ25pdHVkZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgcmV0dXJuIENhcnRlc2lhbjMubWFnbml0dWRlKHRoaXMucG9zaXRpb24pO1xuICB9IGVsc2UgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5DT0xVTUJVU19WSUVXKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKHRoaXMucG9zaXRpb24ueik7XG4gIH0gZWxzZSBpZiAodGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoXG4gICAgICB0aGlzLmZydXN0dW0ucmlnaHQgLSB0aGlzLmZydXN0dW0ubGVmdCxcbiAgICAgIHRoaXMuZnJ1c3R1bS50b3AgLSB0aGlzLmZydXN0dW0uYm90dG9tXG4gICAgKTtcbiAgfVxufTtcblxudmFyIHNjcmF0Y2hMb29rQXRNYXRyaXg0ID0gbmV3IE1hdHJpeDQoKTtcblxuLyoqXG4gKiBTZXRzIHRoZSBjYW1lcmEgcG9zaXRpb24gYW5kIG9yaWVudGF0aW9uIHVzaW5nIGEgdGFyZ2V0IGFuZCBvZmZzZXQuIFRoZSB0YXJnZXQgbXVzdCBiZSBnaXZlbiBpblxuICogd29ybGQgY29vcmRpbmF0ZXMuIFRoZSBvZmZzZXQgY2FuIGJlIGVpdGhlciBhIGNhcnRlc2lhbiBvciBoZWFkaW5nL3BpdGNoL3JhbmdlIGluIHRoZSBsb2NhbCBlYXN0LW5vcnRoLXVwIHJlZmVyZW5jZSBmcmFtZSBjZW50ZXJlZCBhdCB0aGUgdGFyZ2V0LlxuICogSWYgdGhlIG9mZnNldCBpcyBhIGNhcnRlc2lhbiwgdGhlbiBpdCBpcyBhbiBvZmZzZXQgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSByZWZlcmVuY2UgZnJhbWUgZGVmaW5lZCBieSB0aGUgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJZiB0aGUgb2Zmc2V0XG4gKiBpcyBoZWFkaW5nL3BpdGNoL3JhbmdlLCB0aGVuIHRoZSBoZWFkaW5nIGFuZCB0aGUgcGl0Y2ggYW5nbGVzIGFyZSBkZWZpbmVkIGluIHRoZSByZWZlcmVuY2UgZnJhbWUgZGVmaW5lZCBieSB0aGUgdHJhbnNmb3JtYXRpb24gbWF0cml4LlxuICogVGhlIGhlYWRpbmcgaXMgdGhlIGFuZ2xlIGZyb20geSBheGlzIGFuZCBpbmNyZWFzaW5nIHRvd2FyZHMgdGhlIHggYXhpcy4gUGl0Y2ggaXMgdGhlIHJvdGF0aW9uIGZyb20gdGhlIHh5LXBsYW5lLiBQb3NpdGl2ZSBwaXRjaFxuICogYW5nbGVzIGFyZSBiZWxvdyB0aGUgcGxhbmUuIE5lZ2F0aXZlIHBpdGNoIGFuZ2xlcyBhcmUgYWJvdmUgdGhlIHBsYW5lLiBUaGUgcmFuZ2UgaXMgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlci5cbiAqXG4gKiBJbiAyRCwgdGhlcmUgbXVzdCBiZSBhIHRvcCBkb3duIHZpZXcuIFRoZSBjYW1lcmEgd2lsbCBiZSBwbGFjZWQgYWJvdmUgdGhlIHRhcmdldCBsb29raW5nIGRvd24uIFRoZSBoZWlnaHQgYWJvdmUgdGhlXG4gKiB0YXJnZXQgd2lsbCBiZSB0aGUgbWFnbml0dWRlIG9mIHRoZSBvZmZzZXQuIFRoZSBoZWFkaW5nIHdpbGwgYmUgZGV0ZXJtaW5lZCBmcm9tIHRoZSBvZmZzZXQuIElmIHRoZSBoZWFkaW5nIGNhbm5vdCBiZVxuICogZGV0ZXJtaW5lZCBmcm9tIHRoZSBvZmZzZXQsIHRoZSBoZWFkaW5nIHdpbGwgYmUgbm9ydGguXG4gKlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSB0YXJnZXQgVGhlIHRhcmdldCBwb3NpdGlvbiBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM3xIZWFkaW5nUGl0Y2hSYW5nZX0gb2Zmc2V0IFRoZSBvZmZzZXQgZnJvbSB0aGUgdGFyZ2V0IGluIHRoZSBsb2NhbCBlYXN0LW5vcnRoLXVwIHJlZmVyZW5jZSBmcmFtZSBjZW50ZXJlZCBhdCB0aGUgdGFyZ2V0LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBsb29rQXQgaXMgbm90IHN1cHBvcnRlZCB3aGlsZSBtb3JwaGluZy5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gMS4gVXNpbmcgYSBjYXJ0ZXNpYW4gb2Zmc2V0XG4gKiB2YXIgY2VudGVyID0gQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMoLTk4LjAsIDQwLjApO1xuICogdmlld2VyLmNhbWVyYS5sb29rQXQoY2VudGVyLCBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoMC4wLCAtNDc5MDAwMC4wLCAzOTMwMDAwLjApKTtcbiAqXG4gKiAvLyAyLiBVc2luZyBhIEhlYWRpbmdQaXRjaFJhbmdlIG9mZnNldFxuICogdmFyIGNlbnRlciA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKC03Mi4wLCA0MC4wKTtcbiAqIHZhciBoZWFkaW5nID0gQ2VzaXVtLk1hdGgudG9SYWRpYW5zKDUwLjApO1xuICogdmFyIHBpdGNoID0gQ2VzaXVtLk1hdGgudG9SYWRpYW5zKC0yMC4wKTtcbiAqIHZhciByYW5nZSA9IDUwMDAuMDtcbiAqIHZpZXdlci5jYW1lcmEubG9va0F0KGNlbnRlciwgbmV3IENlc2l1bS5IZWFkaW5nUGl0Y2hSYW5nZShoZWFkaW5nLCBwaXRjaCwgcmFuZ2UpKTtcbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5sb29rQXQgPSBmdW5jdGlvbiAodGFyZ2V0LCBvZmZzZXQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ0YXJnZXQgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKG9mZnNldCkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJvZmZzZXQgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImxvb2tBdCBpcyBub3Qgc3VwcG9ydGVkIHdoaWxlIG1vcnBoaW5nLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgdHJhbnNmb3JtID0gVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShcbiAgICB0YXJnZXQsXG4gICAgRWxsaXBzb2lkLldHUzg0LFxuICAgIHNjcmF0Y2hMb29rQXRNYXRyaXg0XG4gICk7XG4gIHRoaXMubG9va0F0VHJhbnNmb3JtKHRyYW5zZm9ybSwgb2Zmc2V0KTtcbn07XG5cbnZhciBzY3JhdGNoTG9va0F0SGVhZGluZ1BpdGNoUmFuZ2VPZmZzZXQgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hMb29rQXRIZWFkaW5nUGl0Y2hSYW5nZVF1YXRlcm5pb24xID0gbmV3IFF1YXRlcm5pb24oKTtcbnZhciBzY3JhdGNoTG9va0F0SGVhZGluZ1BpdGNoUmFuZ2VRdWF0ZXJuaW9uMiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG52YXIgc2NyYXRjaEhlYWRpbmdQaXRjaFJhbmdlTWF0cml4MyA9IG5ldyBNYXRyaXgzKCk7XG5cbmZ1bmN0aW9uIG9mZnNldEZyb21IZWFkaW5nUGl0Y2hSYW5nZShoZWFkaW5nLCBwaXRjaCwgcmFuZ2UpIHtcbiAgcGl0Y2ggPSBDZXNpdW1NYXRoLmNsYW1wKFxuICAgIHBpdGNoLFxuICAgIC1DZXNpdW1NYXRoLlBJX09WRVJfVFdPLFxuICAgIENlc2l1bU1hdGguUElfT1ZFUl9UV09cbiAgKTtcbiAgaGVhZGluZyA9IENlc2l1bU1hdGguemVyb1RvVHdvUGkoaGVhZGluZykgLSBDZXNpdW1NYXRoLlBJX09WRVJfVFdPO1xuXG4gIHZhciBwaXRjaFF1YXQgPSBRdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUoXG4gICAgQ2FydGVzaWFuMy5VTklUX1ksXG4gICAgLXBpdGNoLFxuICAgIHNjcmF0Y2hMb29rQXRIZWFkaW5nUGl0Y2hSYW5nZVF1YXRlcm5pb24xXG4gICk7XG4gIHZhciBoZWFkaW5nUXVhdCA9IFF1YXRlcm5pb24uZnJvbUF4aXNBbmdsZShcbiAgICBDYXJ0ZXNpYW4zLlVOSVRfWixcbiAgICAtaGVhZGluZyxcbiAgICBzY3JhdGNoTG9va0F0SGVhZGluZ1BpdGNoUmFuZ2VRdWF0ZXJuaW9uMlxuICApO1xuICB2YXIgcm90UXVhdCA9IFF1YXRlcm5pb24ubXVsdGlwbHkoaGVhZGluZ1F1YXQsIHBpdGNoUXVhdCwgaGVhZGluZ1F1YXQpO1xuICB2YXIgcm90TWF0cml4ID0gTWF0cml4My5mcm9tUXVhdGVybmlvbihcbiAgICByb3RRdWF0LFxuICAgIHNjcmF0Y2hIZWFkaW5nUGl0Y2hSYW5nZU1hdHJpeDNcbiAgKTtcblxuICB2YXIgb2Zmc2V0ID0gQ2FydGVzaWFuMy5jbG9uZShcbiAgICBDYXJ0ZXNpYW4zLlVOSVRfWCxcbiAgICBzY3JhdGNoTG9va0F0SGVhZGluZ1BpdGNoUmFuZ2VPZmZzZXRcbiAgKTtcbiAgTWF0cml4My5tdWx0aXBseUJ5VmVjdG9yKHJvdE1hdHJpeCwgb2Zmc2V0LCBvZmZzZXQpO1xuICBDYXJ0ZXNpYW4zLm5lZ2F0ZShvZmZzZXQsIG9mZnNldCk7XG4gIENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihvZmZzZXQsIHJhbmdlLCBvZmZzZXQpO1xuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGNhbWVyYSBwb3NpdGlvbiBhbmQgb3JpZW50YXRpb24gdXNpbmcgYSB0YXJnZXQgYW5kIHRyYW5zZm9ybWF0aW9uIG1hdHJpeC4gVGhlIG9mZnNldCBjYW4gYmUgZWl0aGVyIGEgY2FydGVzaWFuIG9yIGhlYWRpbmcvcGl0Y2gvcmFuZ2UuXG4gKiBJZiB0aGUgb2Zmc2V0IGlzIGEgY2FydGVzaWFuLCB0aGVuIGl0IGlzIGFuIG9mZnNldCBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIHJlZmVyZW5jZSBmcmFtZSBkZWZpbmVkIGJ5IHRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguIElmIHRoZSBvZmZzZXRcbiAqIGlzIGhlYWRpbmcvcGl0Y2gvcmFuZ2UsIHRoZW4gdGhlIGhlYWRpbmcgYW5kIHRoZSBwaXRjaCBhbmdsZXMgYXJlIGRlZmluZWQgaW4gdGhlIHJlZmVyZW5jZSBmcmFtZSBkZWZpbmVkIGJ5IHRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguXG4gKiBUaGUgaGVhZGluZyBpcyB0aGUgYW5nbGUgZnJvbSB5IGF4aXMgYW5kIGluY3JlYXNpbmcgdG93YXJkcyB0aGUgeCBheGlzLiBQaXRjaCBpcyB0aGUgcm90YXRpb24gZnJvbSB0aGUgeHktcGxhbmUuIFBvc2l0aXZlIHBpdGNoXG4gKiBhbmdsZXMgYXJlIGJlbG93IHRoZSBwbGFuZS4gTmVnYXRpdmUgcGl0Y2ggYW5nbGVzIGFyZSBhYm92ZSB0aGUgcGxhbmUuIFRoZSByYW5nZSBpcyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyLlxuICpcbiAqIEluIDJELCB0aGVyZSBtdXN0IGJlIGEgdG9wIGRvd24gdmlldy4gVGhlIGNhbWVyYSB3aWxsIGJlIHBsYWNlZCBhYm92ZSB0aGUgY2VudGVyIG9mIHRoZSByZWZlcmVuY2UgZnJhbWUuIFRoZSBoZWlnaHQgYWJvdmUgdGhlXG4gKiB0YXJnZXQgd2lsbCBiZSB0aGUgbWFnbml0dWRlIG9mIHRoZSBvZmZzZXQuIFRoZSBoZWFkaW5nIHdpbGwgYmUgZGV0ZXJtaW5lZCBmcm9tIHRoZSBvZmZzZXQuIElmIHRoZSBoZWFkaW5nIGNhbm5vdCBiZVxuICogZGV0ZXJtaW5lZCBmcm9tIHRoZSBvZmZzZXQsIHRoZSBoZWFkaW5nIHdpbGwgYmUgbm9ydGguXG4gKlxuICogQHBhcmFtIHtNYXRyaXg0fSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBkZWZpbmluZyB0aGUgcmVmZXJlbmNlIGZyYW1lLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfEhlYWRpbmdQaXRjaFJhbmdlfSBbb2Zmc2V0XSBUaGUgb2Zmc2V0IGZyb20gdGhlIHRhcmdldCBpbiBhIHJlZmVyZW5jZSBmcmFtZSBjZW50ZXJlZCBhdCB0aGUgdGFyZ2V0LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBsb29rQXRUcmFuc2Zvcm0gaXMgbm90IHN1cHBvcnRlZCB3aGlsZSBtb3JwaGluZy5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gMS4gVXNpbmcgYSBjYXJ0ZXNpYW4gb2Zmc2V0XG4gKiB2YXIgdHJhbnNmb3JtID0gQ2VzaXVtLlRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWUoQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMoLTk4LjAsIDQwLjApKTtcbiAqIHZpZXdlci5jYW1lcmEubG9va0F0VHJhbnNmb3JtKHRyYW5zZm9ybSwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDAuMCwgLTQ3OTAwMDAuMCwgMzkzMDAwMC4wKSk7XG4gKlxuICogLy8gMi4gVXNpbmcgYSBIZWFkaW5nUGl0Y2hSYW5nZSBvZmZzZXRcbiAqIHZhciB0cmFuc2Zvcm0gPSBDZXNpdW0uVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcygtNzIuMCwgNDAuMCkpO1xuICogdmFyIGhlYWRpbmcgPSBDZXNpdW0uTWF0aC50b1JhZGlhbnMoNTAuMCk7XG4gKiB2YXIgcGl0Y2ggPSBDZXNpdW0uTWF0aC50b1JhZGlhbnMoLTIwLjApO1xuICogdmFyIHJhbmdlID0gNTAwMC4wO1xuICogdmlld2VyLmNhbWVyYS5sb29rQXRUcmFuc2Zvcm0odHJhbnNmb3JtLCBuZXcgQ2VzaXVtLkhlYWRpbmdQaXRjaFJhbmdlKGhlYWRpbmcsIHBpdGNoLCByYW5nZSkpO1xuICovXG5DYW1lcmEucHJvdG90eXBlLmxvb2tBdFRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm0sIG9mZnNldCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQodHJhbnNmb3JtKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInRyYW5zZm9ybSBpcyByZXF1aXJlZFwiKTtcbiAgfVxuICBpZiAodGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLk1PUlBISU5HKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgXCJsb29rQXRUcmFuc2Zvcm0gaXMgbm90IHN1cHBvcnRlZCB3aGlsZSBtb3JwaGluZy5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdGhpcy5fc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG4gIGlmICghZGVmaW5lZChvZmZzZXQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNhcnRlc2lhbk9mZnNldDtcbiAgaWYgKGRlZmluZWQob2Zmc2V0LmhlYWRpbmcpKSB7XG4gICAgY2FydGVzaWFuT2Zmc2V0ID0gb2Zmc2V0RnJvbUhlYWRpbmdQaXRjaFJhbmdlKFxuICAgICAgb2Zmc2V0LmhlYWRpbmcsXG4gICAgICBvZmZzZXQucGl0Y2gsXG4gICAgICBvZmZzZXQucmFuZ2VcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNhcnRlc2lhbk9mZnNldCA9IG9mZnNldDtcbiAgfVxuXG4gIGlmICh0aGlzLl9tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIENhcnRlc2lhbjIuY2xvbmUoQ2FydGVzaWFuMi5aRVJPLCB0aGlzLnBvc2l0aW9uKTtcblxuICAgIENhcnRlc2lhbjMubmVnYXRlKGNhcnRlc2lhbk9mZnNldCwgdGhpcy51cCk7XG4gICAgdGhpcy51cC56ID0gMC4wO1xuXG4gICAgaWYgKENhcnRlc2lhbjMubWFnbml0dWRlU3F1YXJlZCh0aGlzLnVwKSA8IENlc2l1bU1hdGguRVBTSUxPTjEwKSB7XG4gICAgICBDYXJ0ZXNpYW4zLmNsb25lKENhcnRlc2lhbjMuVU5JVF9ZLCB0aGlzLnVwKTtcbiAgICB9XG5cbiAgICBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZSh0aGlzLnVwLCB0aGlzLnVwKTtcblxuICAgIHRoaXMuX3NldFRyYW5zZm9ybShNYXRyaXg0LklERU5USVRZKTtcblxuICAgIENhcnRlc2lhbjMubmVnYXRlKENhcnRlc2lhbjMuVU5JVF9aLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgQ2FydGVzaWFuMy5jcm9zcyh0aGlzLmRpcmVjdGlvbiwgdGhpcy51cCwgdGhpcy5yaWdodCk7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUodGhpcy5yaWdodCwgdGhpcy5yaWdodCk7XG5cbiAgICB2YXIgZnJ1c3R1bSA9IHRoaXMuZnJ1c3R1bTtcbiAgICB2YXIgcmF0aW8gPSBmcnVzdHVtLnRvcCAvIGZydXN0dW0ucmlnaHQ7XG4gICAgZnJ1c3R1bS5yaWdodCA9IENhcnRlc2lhbjMubWFnbml0dWRlKGNhcnRlc2lhbk9mZnNldCkgKiAwLjU7XG4gICAgZnJ1c3R1bS5sZWZ0ID0gLWZydXN0dW0ucmlnaHQ7XG4gICAgZnJ1c3R1bS50b3AgPSByYXRpbyAqIGZydXN0dW0ucmlnaHQ7XG4gICAgZnJ1c3R1bS5ib3R0b20gPSAtZnJ1c3R1bS50b3A7XG5cbiAgICB0aGlzLl9zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIENhcnRlc2lhbjMuY2xvbmUoY2FydGVzaWFuT2Zmc2V0LCB0aGlzLnBvc2l0aW9uKTtcbiAgQ2FydGVzaWFuMy5uZWdhdGUodGhpcy5wb3NpdGlvbiwgdGhpcy5kaXJlY3Rpb24pO1xuICBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZSh0aGlzLmRpcmVjdGlvbiwgdGhpcy5kaXJlY3Rpb24pO1xuICBDYXJ0ZXNpYW4zLmNyb3NzKHRoaXMuZGlyZWN0aW9uLCBDYXJ0ZXNpYW4zLlVOSVRfWiwgdGhpcy5yaWdodCk7XG5cbiAgaWYgKENhcnRlc2lhbjMubWFnbml0dWRlU3F1YXJlZCh0aGlzLnJpZ2h0KSA8IENlc2l1bU1hdGguRVBTSUxPTjEwKSB7XG4gICAgQ2FydGVzaWFuMy5jbG9uZShDYXJ0ZXNpYW4zLlVOSVRfWCwgdGhpcy5yaWdodCk7XG4gIH1cblxuICBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZSh0aGlzLnJpZ2h0LCB0aGlzLnJpZ2h0KTtcbiAgQ2FydGVzaWFuMy5jcm9zcyh0aGlzLnJpZ2h0LCB0aGlzLmRpcmVjdGlvbiwgdGhpcy51cCk7XG4gIENhcnRlc2lhbjMubm9ybWFsaXplKHRoaXMudXAsIHRoaXMudXApO1xuXG4gIHRoaXMuX2FkanVzdE9ydGhvZ3JhcGhpY0ZydXN0dW0odHJ1ZSk7XG59O1xuXG52YXIgdmlld1JlY3RhbmdsZTNEQ2FydG9ncmFwaGljMSA9IG5ldyBDYXJ0b2dyYXBoaWMoKTtcbnZhciB2aWV3UmVjdGFuZ2xlM0RDYXJ0b2dyYXBoaWMyID0gbmV3IENhcnRvZ3JhcGhpYygpO1xudmFyIHZpZXdSZWN0YW5nbGUzRE5vcnRoRWFzdCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgdmlld1JlY3RhbmdsZTNEU291dGhXZXN0ID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciB2aWV3UmVjdGFuZ2xlM0ROb3J0aFdlc3QgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHZpZXdSZWN0YW5nbGUzRFNvdXRoRWFzdCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgdmlld1JlY3RhbmdsZTNETm9ydGhDZW50ZXIgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHZpZXdSZWN0YW5nbGUzRFNvdXRoQ2VudGVyID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciB2aWV3UmVjdGFuZ2xlM0RDZW50ZXIgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHZpZXdSZWN0YW5nbGUzREVxdWF0b3IgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGRlZmF1bHRSRiA9IHtcbiAgZGlyZWN0aW9uOiBuZXcgQ2FydGVzaWFuMygpLFxuICByaWdodDogbmV3IENhcnRlc2lhbjMoKSxcbiAgdXA6IG5ldyBDYXJ0ZXNpYW4zKCksXG59O1xudmFyIHZpZXdSZWN0YW5nbGUzREVsbGlwc29pZEdlb2Rlc2ljO1xuXG5mdW5jdGlvbiBjb21wdXRlRChkaXJlY3Rpb24sIHVwT3JSaWdodCwgY29ybmVyLCB0YW5UaGV0YU9yUGhpKSB7XG4gIHZhciBvcHBvc2l0ZSA9IE1hdGguYWJzKENhcnRlc2lhbjMuZG90KHVwT3JSaWdodCwgY29ybmVyKSk7XG4gIHJldHVybiBvcHBvc2l0ZSAvIHRhblRoZXRhT3JQaGkgLSBDYXJ0ZXNpYW4zLmRvdChkaXJlY3Rpb24sIGNvcm5lcik7XG59XG5cbmZ1bmN0aW9uIHJlY3RhbmdsZUNhbWVyYVBvc2l0aW9uM0QoY2FtZXJhLCByZWN0YW5nbGUsIHJlc3VsdCwgdXBkYXRlQ2FtZXJhKSB7XG4gIHZhciBlbGxpcHNvaWQgPSBjYW1lcmEuX3Byb2plY3Rpb24uZWxsaXBzb2lkO1xuICB2YXIgY2FtZXJhUkYgPSB1cGRhdGVDYW1lcmEgPyBjYW1lcmEgOiBkZWZhdWx0UkY7XG5cbiAgdmFyIG5vcnRoID0gcmVjdGFuZ2xlLm5vcnRoO1xuICB2YXIgc291dGggPSByZWN0YW5nbGUuc291dGg7XG4gIHZhciBlYXN0ID0gcmVjdGFuZ2xlLmVhc3Q7XG4gIHZhciB3ZXN0ID0gcmVjdGFuZ2xlLndlc3Q7XG5cbiAgLy8gSWYgd2UgZ28gYWNyb3NzIHRoZSBJbnRlcm5hdGlvbmFsIERhdGUgTGluZVxuICBpZiAod2VzdCA+IGVhc3QpIHtcbiAgICBlYXN0ICs9IENlc2l1bU1hdGguVFdPX1BJO1xuICB9XG5cbiAgLy8gRmluZCB0aGUgbWlkcG9pbnQgbGF0aXR1ZGUuXG4gIC8vXG4gIC8vIEVsbGlwc29pZEdlb2Rlc2ljIHdpbGwgZmFpbCBpZiB0aGUgbm9ydGggYW5kIHNvdXRoIGVkZ2VzIGFyZSB2ZXJ5IGNsb3NlIHRvIGJlaW5nIG9uIG9wcG9zaXRlIHNpZGVzIG9mIHRoZSBlbGxpcHNvaWQuXG4gIC8vIElkZWFsbHkgd2UnZCBqdXN0IGNhbGwgRWxsaXBzb2lkR2VvZGVzaWMuc2V0RW5kUG9pbnRzIGFuZCBsZXQgaXQgdGhyb3cgd2hlbiBpdCBkZXRlY3RzIHRoaXMgY2FzZSwgYnV0IHNhZGx5IGl0IGRvZXNuJ3RcbiAgLy8gZXZlbiBsb29rIGZvciB0aGlzIGNhc2UgaW4gb3B0aW1pemVkIGJ1aWxkcywgc28gd2UgaGF2ZSB0byB0ZXN0IGZvciBpdCBoZXJlIGluc3RlYWQuXG4gIC8vXG4gIC8vIEZvcnR1bmF0ZWx5LCB0aGlzIGNhc2UgY2FuIG9ubHkgaGFwcGVuIChoZXJlKSB3aGVuIG5vcnRoIGlzIHZlcnkgY2xvc2UgdG8gdGhlIG5vcnRoIHBvbGUgYW5kIHNvdXRoIGlzIHZlcnkgY2xvc2UgdG8gdGhlIHNvdXRoIHBvbGUsXG4gIC8vIHNvIGhhbmRsZSBpdCBqdXN0IGJ5IHVzaW5nIDAgbGF0aXR1ZGUgYXMgdGhlIGNlbnRlci4gIEl0J3MgY2VydGFpbmxpeSBwb3NzaWJsZSB0byB1c2UgYSBzbWFsbGVyIHRvbGVyYW5jZVxuICAvLyB0aGFuIG9uZSBkZWdyZWUgaGVyZSwgYnV0IG9uZSBkZWdyZWUgaXMgc2FmZSBhbmQgcHV0dGluZyB0aGUgY2VudGVyIGF0IDAgbGF0aXR1ZGUgc2hvdWxkIGJlIGdvb2QgZW5vdWdoIGZvciBhbnlcbiAgLy8gcmVjdGFuZ2xlIHRoYXQgc3BhbnMgMTc4KyBvZiB0aGUgMTgwIGRlZ3JlZXMgb2YgbGF0aXR1ZGUuXG4gIHZhciBsb25naXR1ZGUgPSAod2VzdCArIGVhc3QpICogMC41O1xuICB2YXIgbGF0aXR1ZGU7XG4gIGlmIChcbiAgICBzb3V0aCA8IC1DZXNpdW1NYXRoLlBJX09WRVJfVFdPICsgQ2VzaXVtTWF0aC5SQURJQU5TX1BFUl9ERUdSRUUgJiZcbiAgICBub3J0aCA+IENlc2l1bU1hdGguUElfT1ZFUl9UV08gLSBDZXNpdW1NYXRoLlJBRElBTlNfUEVSX0RFR1JFRVxuICApIHtcbiAgICBsYXRpdHVkZSA9IDAuMDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbm9ydGhDYXJ0b2dyYXBoaWMgPSB2aWV3UmVjdGFuZ2xlM0RDYXJ0b2dyYXBoaWMxO1xuICAgIG5vcnRoQ2FydG9ncmFwaGljLmxvbmdpdHVkZSA9IGxvbmdpdHVkZTtcbiAgICBub3J0aENhcnRvZ3JhcGhpYy5sYXRpdHVkZSA9IG5vcnRoO1xuICAgIG5vcnRoQ2FydG9ncmFwaGljLmhlaWdodCA9IDAuMDtcblxuICAgIHZhciBzb3V0aENhcnRvZ3JhcGhpYyA9IHZpZXdSZWN0YW5nbGUzRENhcnRvZ3JhcGhpYzI7XG4gICAgc291dGhDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICAgIHNvdXRoQ2FydG9ncmFwaGljLmxhdGl0dWRlID0gc291dGg7XG4gICAgc291dGhDYXJ0b2dyYXBoaWMuaGVpZ2h0ID0gMC4wO1xuXG4gICAgdmFyIGVsbGlwc29pZEdlb2Rlc2ljID0gdmlld1JlY3RhbmdsZTNERWxsaXBzb2lkR2VvZGVzaWM7XG4gICAgaWYgKFxuICAgICAgIWRlZmluZWQoZWxsaXBzb2lkR2VvZGVzaWMpIHx8XG4gICAgICBlbGxpcHNvaWRHZW9kZXNpYy5lbGxpcHNvaWQgIT09IGVsbGlwc29pZFxuICAgICkge1xuICAgICAgdmlld1JlY3RhbmdsZTNERWxsaXBzb2lkR2VvZGVzaWMgPSBlbGxpcHNvaWRHZW9kZXNpYyA9IG5ldyBFbGxpcHNvaWRHZW9kZXNpYyhcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGVsbGlwc29pZFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBlbGxpcHNvaWRHZW9kZXNpYy5zZXRFbmRQb2ludHMobm9ydGhDYXJ0b2dyYXBoaWMsIHNvdXRoQ2FydG9ncmFwaGljKTtcbiAgICBsYXRpdHVkZSA9IGVsbGlwc29pZEdlb2Rlc2ljLmludGVycG9sYXRlVXNpbmdGcmFjdGlvbihcbiAgICAgIDAuNSxcbiAgICAgIHZpZXdSZWN0YW5nbGUzRENhcnRvZ3JhcGhpYzFcbiAgICApLmxhdGl0dWRlO1xuICB9XG5cbiAgdmFyIGNlbnRlckNhcnRvZ3JhcGhpYyA9IHZpZXdSZWN0YW5nbGUzRENhcnRvZ3JhcGhpYzE7XG4gIGNlbnRlckNhcnRvZ3JhcGhpYy5sb25naXR1ZGUgPSBsb25naXR1ZGU7XG4gIGNlbnRlckNhcnRvZ3JhcGhpYy5sYXRpdHVkZSA9IGxhdGl0dWRlO1xuICBjZW50ZXJDYXJ0b2dyYXBoaWMuaGVpZ2h0ID0gMC4wO1xuXG4gIHZhciBjZW50ZXIgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgY2VudGVyQ2FydG9ncmFwaGljLFxuICAgIHZpZXdSZWN0YW5nbGUzRENlbnRlclxuICApO1xuXG4gIHZhciBjYXJ0ID0gdmlld1JlY3RhbmdsZTNEQ2FydG9ncmFwaGljMTtcbiAgY2FydC5sb25naXR1ZGUgPSBlYXN0O1xuICBjYXJ0LmxhdGl0dWRlID0gbm9ydGg7XG4gIHZhciBub3J0aEVhc3QgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgY2FydCxcbiAgICB2aWV3UmVjdGFuZ2xlM0ROb3J0aEVhc3RcbiAgKTtcbiAgY2FydC5sb25naXR1ZGUgPSB3ZXN0O1xuICB2YXIgbm9ydGhXZXN0ID0gZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKFxuICAgIGNhcnQsXG4gICAgdmlld1JlY3RhbmdsZTNETm9ydGhXZXN0XG4gICk7XG4gIGNhcnQubG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICB2YXIgbm9ydGhDZW50ZXIgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgY2FydCxcbiAgICB2aWV3UmVjdGFuZ2xlM0ROb3J0aENlbnRlclxuICApO1xuICBjYXJ0LmxhdGl0dWRlID0gc291dGg7XG4gIHZhciBzb3V0aENlbnRlciA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihcbiAgICBjYXJ0LFxuICAgIHZpZXdSZWN0YW5nbGUzRFNvdXRoQ2VudGVyXG4gICk7XG4gIGNhcnQubG9uZ2l0dWRlID0gZWFzdDtcbiAgdmFyIHNvdXRoRWFzdCA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihcbiAgICBjYXJ0LFxuICAgIHZpZXdSZWN0YW5nbGUzRFNvdXRoRWFzdFxuICApO1xuICBjYXJ0LmxvbmdpdHVkZSA9IHdlc3Q7XG4gIHZhciBzb3V0aFdlc3QgPSBlbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oXG4gICAgY2FydCxcbiAgICB2aWV3UmVjdGFuZ2xlM0RTb3V0aFdlc3RcbiAgKTtcblxuICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KG5vcnRoV2VzdCwgY2VudGVyLCBub3J0aFdlc3QpO1xuICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHNvdXRoRWFzdCwgY2VudGVyLCBzb3V0aEVhc3QpO1xuICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KG5vcnRoRWFzdCwgY2VudGVyLCBub3J0aEVhc3QpO1xuICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHNvdXRoV2VzdCwgY2VudGVyLCBzb3V0aFdlc3QpO1xuICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KG5vcnRoQ2VudGVyLCBjZW50ZXIsIG5vcnRoQ2VudGVyKTtcbiAgQ2FydGVzaWFuMy5zdWJ0cmFjdChzb3V0aENlbnRlciwgY2VudGVyLCBzb3V0aENlbnRlcik7XG5cbiAgdmFyIGRpcmVjdGlvbiA9IGVsbGlwc29pZC5nZW9kZXRpY1N1cmZhY2VOb3JtYWwoY2VudGVyLCBjYW1lcmFSRi5kaXJlY3Rpb24pO1xuICBDYXJ0ZXNpYW4zLm5lZ2F0ZShkaXJlY3Rpb24sIGRpcmVjdGlvbik7XG4gIHZhciByaWdodCA9IENhcnRlc2lhbjMuY3Jvc3MoZGlyZWN0aW9uLCBDYXJ0ZXNpYW4zLlVOSVRfWiwgY2FtZXJhUkYucmlnaHQpO1xuICBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShyaWdodCwgcmlnaHQpO1xuICB2YXIgdXAgPSBDYXJ0ZXNpYW4zLmNyb3NzKHJpZ2h0LCBkaXJlY3Rpb24sIGNhbWVyYVJGLnVwKTtcblxuICB2YXIgZDtcbiAgaWYgKGNhbWVyYS5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljRnJ1c3R1bSkge1xuICAgIHZhciB3aWR0aCA9IE1hdGgubWF4KFxuICAgICAgQ2FydGVzaWFuMy5kaXN0YW5jZShub3J0aEVhc3QsIG5vcnRoV2VzdCksXG4gICAgICBDYXJ0ZXNpYW4zLmRpc3RhbmNlKHNvdXRoRWFzdCwgc291dGhXZXN0KVxuICAgICk7XG4gICAgdmFyIGhlaWdodCA9IE1hdGgubWF4KFxuICAgICAgQ2FydGVzaWFuMy5kaXN0YW5jZShub3J0aEVhc3QsIHNvdXRoRWFzdCksXG4gICAgICBDYXJ0ZXNpYW4zLmRpc3RhbmNlKG5vcnRoV2VzdCwgc291dGhXZXN0KVxuICAgICk7XG5cbiAgICB2YXIgcmlnaHRTY2FsYXI7XG4gICAgdmFyIHRvcFNjYWxhcjtcbiAgICB2YXIgcmF0aW8gPVxuICAgICAgY2FtZXJhLmZydXN0dW0uX29mZkNlbnRlckZydXN0dW0ucmlnaHQgL1xuICAgICAgY2FtZXJhLmZydXN0dW0uX29mZkNlbnRlckZydXN0dW0udG9wO1xuICAgIHZhciBoZWlnaHRSYXRpbyA9IGhlaWdodCAqIHJhdGlvO1xuICAgIGlmICh3aWR0aCA+IGhlaWdodFJhdGlvKSB7XG4gICAgICByaWdodFNjYWxhciA9IHdpZHRoO1xuICAgICAgdG9wU2NhbGFyID0gcmlnaHRTY2FsYXIgLyByYXRpbztcbiAgICB9IGVsc2Uge1xuICAgICAgdG9wU2NhbGFyID0gaGVpZ2h0O1xuICAgICAgcmlnaHRTY2FsYXIgPSBoZWlnaHRSYXRpbztcbiAgICB9XG5cbiAgICBkID0gTWF0aC5tYXgocmlnaHRTY2FsYXIsIHRvcFNjYWxhcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhblBoaSA9IE1hdGgudGFuKGNhbWVyYS5mcnVzdHVtLmZvdnkgKiAwLjUpO1xuICAgIHZhciB0YW5UaGV0YSA9IGNhbWVyYS5mcnVzdHVtLmFzcGVjdFJhdGlvICogdGFuUGhpO1xuXG4gICAgZCA9IE1hdGgubWF4KFxuICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCB1cCwgbm9ydGhXZXN0LCB0YW5QaGkpLFxuICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCB1cCwgc291dGhFYXN0LCB0YW5QaGkpLFxuICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCB1cCwgbm9ydGhFYXN0LCB0YW5QaGkpLFxuICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCB1cCwgc291dGhXZXN0LCB0YW5QaGkpLFxuICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCB1cCwgbm9ydGhDZW50ZXIsIHRhblBoaSksXG4gICAgICBjb21wdXRlRChkaXJlY3Rpb24sIHVwLCBzb3V0aENlbnRlciwgdGFuUGhpKSxcbiAgICAgIGNvbXB1dGVEKGRpcmVjdGlvbiwgcmlnaHQsIG5vcnRoV2VzdCwgdGFuVGhldGEpLFxuICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCByaWdodCwgc291dGhFYXN0LCB0YW5UaGV0YSksXG4gICAgICBjb21wdXRlRChkaXJlY3Rpb24sIHJpZ2h0LCBub3J0aEVhc3QsIHRhblRoZXRhKSxcbiAgICAgIGNvbXB1dGVEKGRpcmVjdGlvbiwgcmlnaHQsIHNvdXRoV2VzdCwgdGFuVGhldGEpLFxuICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCByaWdodCwgbm9ydGhDZW50ZXIsIHRhblRoZXRhKSxcbiAgICAgIGNvbXB1dGVEKGRpcmVjdGlvbiwgcmlnaHQsIHNvdXRoQ2VudGVyLCB0YW5UaGV0YSlcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlIHJlY3RhbmdsZSBjcm9zc2VzIHRoZSBlcXVhdG9yLCBjb21wdXRlIEQgYXQgdGhlIGVxdWF0b3IsIHRvbywgYmVjYXVzZSB0aGF0J3MgdGhlXG4gICAgLy8gd2lkZXN0IHBhcnQgb2YgdGhlIHJlY3RhbmdsZSB3aGVuIHByb2plY3RlZCBvbnRvIHRoZSBnbG9iZS5cbiAgICBpZiAoc291dGggPCAwICYmIG5vcnRoID4gMCkge1xuICAgICAgdmFyIGVxdWF0b3JDYXJ0b2dyYXBoaWMgPSB2aWV3UmVjdGFuZ2xlM0RDYXJ0b2dyYXBoaWMxO1xuICAgICAgZXF1YXRvckNhcnRvZ3JhcGhpYy5sb25naXR1ZGUgPSB3ZXN0O1xuICAgICAgZXF1YXRvckNhcnRvZ3JhcGhpYy5sYXRpdHVkZSA9IDAuMDtcbiAgICAgIGVxdWF0b3JDYXJ0b2dyYXBoaWMuaGVpZ2h0ID0gMC4wO1xuICAgICAgdmFyIGVxdWF0b3JQb3NpdGlvbiA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihcbiAgICAgICAgZXF1YXRvckNhcnRvZ3JhcGhpYyxcbiAgICAgICAgdmlld1JlY3RhbmdsZTNERXF1YXRvclxuICAgICAgKTtcbiAgICAgIENhcnRlc2lhbjMuc3VidHJhY3QoZXF1YXRvclBvc2l0aW9uLCBjZW50ZXIsIGVxdWF0b3JQb3NpdGlvbik7XG4gICAgICBkID0gTWF0aC5tYXgoXG4gICAgICAgIGQsXG4gICAgICAgIGNvbXB1dGVEKGRpcmVjdGlvbiwgdXAsIGVxdWF0b3JQb3NpdGlvbiwgdGFuUGhpKSxcbiAgICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCByaWdodCwgZXF1YXRvclBvc2l0aW9uLCB0YW5UaGV0YSlcbiAgICAgICk7XG5cbiAgICAgIGVxdWF0b3JDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlID0gZWFzdDtcbiAgICAgIGVxdWF0b3JQb3NpdGlvbiA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihcbiAgICAgICAgZXF1YXRvckNhcnRvZ3JhcGhpYyxcbiAgICAgICAgdmlld1JlY3RhbmdsZTNERXF1YXRvclxuICAgICAgKTtcbiAgICAgIENhcnRlc2lhbjMuc3VidHJhY3QoZXF1YXRvclBvc2l0aW9uLCBjZW50ZXIsIGVxdWF0b3JQb3NpdGlvbik7XG4gICAgICBkID0gTWF0aC5tYXgoXG4gICAgICAgIGQsXG4gICAgICAgIGNvbXB1dGVEKGRpcmVjdGlvbiwgdXAsIGVxdWF0b3JQb3NpdGlvbiwgdGFuUGhpKSxcbiAgICAgICAgY29tcHV0ZUQoZGlyZWN0aW9uLCByaWdodCwgZXF1YXRvclBvc2l0aW9uLCB0YW5UaGV0YSlcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIENhcnRlc2lhbjMuYWRkKFxuICAgIGNlbnRlcixcbiAgICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoZGlyZWN0aW9uLCAtZCwgdmlld1JlY3RhbmdsZTNERXF1YXRvciksXG4gICAgcmVzdWx0XG4gICk7XG59XG5cbnZhciB2aWV3UmVjdGFuZ2xlQ1ZDYXJ0b2dyYXBoaWMgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgdmlld1JlY3RhbmdsZUNWTm9ydGhFYXN0ID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciB2aWV3UmVjdGFuZ2xlQ1ZTb3V0aFdlc3QgPSBuZXcgQ2FydGVzaWFuMygpO1xuZnVuY3Rpb24gcmVjdGFuZ2xlQ2FtZXJhUG9zaXRpb25Db2x1bWJ1c1ZpZXcoY2FtZXJhLCByZWN0YW5nbGUsIHJlc3VsdCkge1xuICB2YXIgcHJvamVjdGlvbiA9IGNhbWVyYS5fcHJvamVjdGlvbjtcbiAgaWYgKHJlY3RhbmdsZS53ZXN0ID4gcmVjdGFuZ2xlLmVhc3QpIHtcbiAgICByZWN0YW5nbGUgPSBSZWN0YW5nbGUuTUFYX1ZBTFVFO1xuICB9XG4gIHZhciB0cmFuc2Zvcm0gPSBjYW1lcmEuX2FjdHVhbFRyYW5zZm9ybTtcbiAgdmFyIGludlRyYW5zZm9ybSA9IGNhbWVyYS5fYWN0dWFsSW52VHJhbnNmb3JtO1xuXG4gIHZhciBjYXJ0ID0gdmlld1JlY3RhbmdsZUNWQ2FydG9ncmFwaGljO1xuICBjYXJ0LmxvbmdpdHVkZSA9IHJlY3RhbmdsZS5lYXN0O1xuICBjYXJ0LmxhdGl0dWRlID0gcmVjdGFuZ2xlLm5vcnRoO1xuICB2YXIgbm9ydGhFYXN0ID0gcHJvamVjdGlvbi5wcm9qZWN0KGNhcnQsIHZpZXdSZWN0YW5nbGVDVk5vcnRoRWFzdCk7XG4gIE1hdHJpeDQubXVsdGlwbHlCeVBvaW50KHRyYW5zZm9ybSwgbm9ydGhFYXN0LCBub3J0aEVhc3QpO1xuICBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludChpbnZUcmFuc2Zvcm0sIG5vcnRoRWFzdCwgbm9ydGhFYXN0KTtcblxuICBjYXJ0LmxvbmdpdHVkZSA9IHJlY3RhbmdsZS53ZXN0O1xuICBjYXJ0LmxhdGl0dWRlID0gcmVjdGFuZ2xlLnNvdXRoO1xuICB2YXIgc291dGhXZXN0ID0gcHJvamVjdGlvbi5wcm9qZWN0KGNhcnQsIHZpZXdSZWN0YW5nbGVDVlNvdXRoV2VzdCk7XG4gIE1hdHJpeDQubXVsdGlwbHlCeVBvaW50KHRyYW5zZm9ybSwgc291dGhXZXN0LCBzb3V0aFdlc3QpO1xuICBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludChpbnZUcmFuc2Zvcm0sIHNvdXRoV2VzdCwgc291dGhXZXN0KTtcblxuICByZXN1bHQueCA9IChub3J0aEVhc3QueCAtIHNvdXRoV2VzdC54KSAqIDAuNSArIHNvdXRoV2VzdC54O1xuICByZXN1bHQueSA9IChub3J0aEVhc3QueSAtIHNvdXRoV2VzdC55KSAqIDAuNSArIHNvdXRoV2VzdC55O1xuXG4gIGlmIChkZWZpbmVkKGNhbWVyYS5mcnVzdHVtLmZvdnkpKSB7XG4gICAgdmFyIHRhblBoaSA9IE1hdGgudGFuKGNhbWVyYS5mcnVzdHVtLmZvdnkgKiAwLjUpO1xuICAgIHZhciB0YW5UaGV0YSA9IGNhbWVyYS5mcnVzdHVtLmFzcGVjdFJhdGlvICogdGFuUGhpO1xuICAgIHJlc3VsdC56ID1cbiAgICAgIE1hdGgubWF4KFxuICAgICAgICAobm9ydGhFYXN0LnggLSBzb3V0aFdlc3QueCkgLyB0YW5UaGV0YSxcbiAgICAgICAgKG5vcnRoRWFzdC55IC0gc291dGhXZXN0LnkpIC8gdGFuUGhpXG4gICAgICApICogMC41O1xuICB9IGVsc2Uge1xuICAgIHZhciB3aWR0aCA9IG5vcnRoRWFzdC54IC0gc291dGhXZXN0Lng7XG4gICAgdmFyIGhlaWdodCA9IG5vcnRoRWFzdC55IC0gc291dGhXZXN0Lnk7XG4gICAgcmVzdWx0LnogPSBNYXRoLm1heCh3aWR0aCwgaGVpZ2h0KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbnZhciB2aWV3UmVjdGFuZ2xlMkRDYXJ0b2dyYXBoaWMgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgdmlld1JlY3RhbmdsZTJETm9ydGhFYXN0ID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciB2aWV3UmVjdGFuZ2xlMkRTb3V0aFdlc3QgPSBuZXcgQ2FydGVzaWFuMygpO1xuZnVuY3Rpb24gcmVjdGFuZ2xlQ2FtZXJhUG9zaXRpb24yRChjYW1lcmEsIHJlY3RhbmdsZSwgcmVzdWx0KSB7XG4gIHZhciBwcm9qZWN0aW9uID0gY2FtZXJhLl9wcm9qZWN0aW9uO1xuXG4gIC8vIEFjY291bnQgZm9yIHRoZSByZWN0YW5nbGUgY3Jvc3NpbmcgdGhlIEludGVybmF0aW9uYWwgRGF0ZSBMaW5lIGluIDJEIG1vZGVcbiAgdmFyIGVhc3QgPSByZWN0YW5nbGUuZWFzdDtcbiAgaWYgKHJlY3RhbmdsZS53ZXN0ID4gcmVjdGFuZ2xlLmVhc3QpIHtcbiAgICBpZiAoY2FtZXJhLl9zY2VuZS5tYXBNb2RlMkQgPT09IE1hcE1vZGUyRC5JTkZJTklURV9TQ1JPTEwpIHtcbiAgICAgIGVhc3QgKz0gQ2VzaXVtTWF0aC5UV09fUEk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlY3RhbmdsZSA9IFJlY3RhbmdsZS5NQVhfVkFMVUU7XG4gICAgICBlYXN0ID0gcmVjdGFuZ2xlLmVhc3Q7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNhcnQgPSB2aWV3UmVjdGFuZ2xlMkRDYXJ0b2dyYXBoaWM7XG4gIGNhcnQubG9uZ2l0dWRlID0gZWFzdDtcbiAgY2FydC5sYXRpdHVkZSA9IHJlY3RhbmdsZS5ub3J0aDtcbiAgdmFyIG5vcnRoRWFzdCA9IHByb2plY3Rpb24ucHJvamVjdChjYXJ0LCB2aWV3UmVjdGFuZ2xlMkROb3J0aEVhc3QpO1xuICBjYXJ0LmxvbmdpdHVkZSA9IHJlY3RhbmdsZS53ZXN0O1xuICBjYXJ0LmxhdGl0dWRlID0gcmVjdGFuZ2xlLnNvdXRoO1xuICB2YXIgc291dGhXZXN0ID0gcHJvamVjdGlvbi5wcm9qZWN0KGNhcnQsIHZpZXdSZWN0YW5nbGUyRFNvdXRoV2VzdCk7XG5cbiAgdmFyIHdpZHRoID0gTWF0aC5hYnMobm9ydGhFYXN0LnggLSBzb3V0aFdlc3QueCkgKiAwLjU7XG4gIHZhciBoZWlnaHQgPSBNYXRoLmFicyhub3J0aEVhc3QueSAtIHNvdXRoV2VzdC55KSAqIDAuNTtcblxuICB2YXIgcmlnaHQsIHRvcDtcbiAgdmFyIHJhdGlvID0gY2FtZXJhLmZydXN0dW0ucmlnaHQgLyBjYW1lcmEuZnJ1c3R1bS50b3A7XG4gIHZhciBoZWlnaHRSYXRpbyA9IGhlaWdodCAqIHJhdGlvO1xuICBpZiAod2lkdGggPiBoZWlnaHRSYXRpbykge1xuICAgIHJpZ2h0ID0gd2lkdGg7XG4gICAgdG9wID0gcmlnaHQgLyByYXRpbztcbiAgfSBlbHNlIHtcbiAgICB0b3AgPSBoZWlnaHQ7XG4gICAgcmlnaHQgPSBoZWlnaHRSYXRpbztcbiAgfVxuXG4gIGhlaWdodCA9IE1hdGgubWF4KDIuMCAqIHJpZ2h0LCAyLjAgKiB0b3ApO1xuXG4gIHJlc3VsdC54ID0gKG5vcnRoRWFzdC54IC0gc291dGhXZXN0LngpICogMC41ICsgc291dGhXZXN0Lng7XG4gIHJlc3VsdC55ID0gKG5vcnRoRWFzdC55IC0gc291dGhXZXN0LnkpICogMC41ICsgc291dGhXZXN0Lnk7XG5cbiAgY2FydCA9IHByb2plY3Rpb24udW5wcm9qZWN0KHJlc3VsdCwgY2FydCk7XG4gIGNhcnQuaGVpZ2h0ID0gaGVpZ2h0O1xuICByZXN1bHQgPSBwcm9qZWN0aW9uLnByb2plY3QoY2FydCwgcmVzdWx0KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgY2FtZXJhIHBvc2l0aW9uIG5lZWRlZCB0byB2aWV3IGEgcmVjdGFuZ2xlIG9uIGFuIGVsbGlwc29pZCBvciBtYXBcbiAqXG4gKiBAcGFyYW0ge1JlY3RhbmdsZX0gcmVjdGFuZ2xlIFRoZSByZWN0YW5nbGUgdG8gdmlldy5cbiAqIEBwYXJhbSB7Q2FydGVzaWFuM30gW3Jlc3VsdF0gVGhlIGNhbWVyYSBwb3NpdGlvbiBuZWVkZWQgdG8gdmlldyB0aGUgcmVjdGFuZ2xlXG4gKiBAcmV0dXJucyB7Q2FydGVzaWFuM30gVGhlIGNhbWVyYSBwb3NpdGlvbiBuZWVkZWQgdG8gdmlldyB0aGUgcmVjdGFuZ2xlXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuZ2V0UmVjdGFuZ2xlQ2FtZXJhQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAocmVjdGFuZ2xlLCByZXN1bHQpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHJlY3RhbmdsZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJyZWN0YW5nbGUgaXMgcmVxdWlyZWRcIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG4gIHZhciBtb2RlID0gdGhpcy5fbW9kZTtcblxuICBpZiAoIWRlZmluZWQocmVzdWx0KSkge1xuICAgIHJlc3VsdCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIH1cblxuICBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0QpIHtcbiAgICByZXR1cm4gcmVjdGFuZ2xlQ2FtZXJhUG9zaXRpb24zRCh0aGlzLCByZWN0YW5nbGUsIHJlc3VsdCk7XG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcpIHtcbiAgICByZXR1cm4gcmVjdGFuZ2xlQ2FtZXJhUG9zaXRpb25Db2x1bWJ1c1ZpZXcodGhpcywgcmVjdGFuZ2xlLCByZXN1bHQpO1xuICB9IGVsc2UgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgcmV0dXJuIHJlY3RhbmdsZUNhbWVyYVBvc2l0aW9uMkQodGhpcywgcmVjdGFuZ2xlLCByZXN1bHQpO1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbnZhciBwaWNrRWxsaXBzb2lkM0RSYXkgPSBuZXcgUmF5KCk7XG5mdW5jdGlvbiBwaWNrRWxsaXBzb2lkM0QoY2FtZXJhLCB3aW5kb3dQb3NpdGlvbiwgZWxsaXBzb2lkLCByZXN1bHQpIHtcbiAgZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKGVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KTtcbiAgdmFyIHJheSA9IGNhbWVyYS5nZXRQaWNrUmF5KHdpbmRvd1Bvc2l0aW9uLCBwaWNrRWxsaXBzb2lkM0RSYXkpO1xuICB2YXIgaW50ZXJzZWN0aW9uID0gSW50ZXJzZWN0aW9uVGVzdHMucmF5RWxsaXBzb2lkKHJheSwgZWxsaXBzb2lkKTtcbiAgaWYgKCFpbnRlcnNlY3Rpb24pIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIHQgPSBpbnRlcnNlY3Rpb24uc3RhcnQgPiAwLjAgPyBpbnRlcnNlY3Rpb24uc3RhcnQgOiBpbnRlcnNlY3Rpb24uc3RvcDtcbiAgcmV0dXJuIFJheS5nZXRQb2ludChyYXksIHQsIHJlc3VsdCk7XG59XG5cbnZhciBwaWNrRWxsaXBzb2lkMkRSYXkgPSBuZXcgUmF5KCk7XG5mdW5jdGlvbiBwaWNrTWFwMkQoY2FtZXJhLCB3aW5kb3dQb3NpdGlvbiwgcHJvamVjdGlvbiwgcmVzdWx0KSB7XG4gIHZhciByYXkgPSBjYW1lcmEuZ2V0UGlja1JheSh3aW5kb3dQb3NpdGlvbiwgcGlja0VsbGlwc29pZDJEUmF5KTtcbiAgdmFyIHBvc2l0aW9uID0gcmF5Lm9yaWdpbjtcbiAgcG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmZyb21FbGVtZW50cyhwb3NpdGlvbi55LCBwb3NpdGlvbi56LCAwLjAsIHBvc2l0aW9uKTtcbiAgdmFyIGNhcnQgPSBwcm9qZWN0aW9uLnVucHJvamVjdChwb3NpdGlvbik7XG5cbiAgaWYgKFxuICAgIGNhcnQubGF0aXR1ZGUgPCAtQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTyB8fFxuICAgIGNhcnQubGF0aXR1ZGUgPiBDZXNpdW1NYXRoLlBJX09WRVJfVFdPXG4gICkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gcHJvamVjdGlvbi5lbGxpcHNvaWQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oY2FydCwgcmVzdWx0KTtcbn1cblxudmFyIHBpY2tFbGxpcHNvaWRDVlJheSA9IG5ldyBSYXkoKTtcbmZ1bmN0aW9uIHBpY2tNYXBDb2x1bWJ1c1ZpZXcoY2FtZXJhLCB3aW5kb3dQb3NpdGlvbiwgcHJvamVjdGlvbiwgcmVzdWx0KSB7XG4gIHZhciByYXkgPSBjYW1lcmEuZ2V0UGlja1JheSh3aW5kb3dQb3NpdGlvbiwgcGlja0VsbGlwc29pZENWUmF5KTtcbiAgdmFyIHNjYWxhciA9IC1yYXkub3JpZ2luLnggLyByYXkuZGlyZWN0aW9uLng7XG4gIFJheS5nZXRQb2ludChyYXksIHNjYWxhciwgcmVzdWx0KTtcblxuICB2YXIgY2FydCA9IHByb2plY3Rpb24udW5wcm9qZWN0KG5ldyBDYXJ0ZXNpYW4zKHJlc3VsdC55LCByZXN1bHQueiwgMC4wKSk7XG5cbiAgaWYgKFxuICAgIGNhcnQubGF0aXR1ZGUgPCAtQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTyB8fFxuICAgIGNhcnQubGF0aXR1ZGUgPiBDZXNpdW1NYXRoLlBJX09WRVJfVFdPIHx8XG4gICAgY2FydC5sb25naXR1ZGUgPCAtTWF0aC5QSSB8fFxuICAgIGNhcnQubG9uZ2l0dWRlID4gTWF0aC5QSVxuICApIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIHByb2plY3Rpb24uZWxsaXBzb2lkLmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKGNhcnQsIHJlc3VsdCk7XG59XG5cbi8qKlxuICogUGljayBhbiBlbGxpcHNvaWQgb3IgbWFwLlxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuMn0gd2luZG93UG9zaXRpb24gVGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgb2YgYSBwaXhlbC5cbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbZWxsaXBzb2lkPUVsbGlwc29pZC5XR1M4NF0gVGhlIGVsbGlwc29pZCB0byBwaWNrLlxuICogQHBhcmFtIHtDYXJ0ZXNpYW4zfSBbcmVzdWx0XSBUaGUgb2JqZWN0IG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtDYXJ0ZXNpYW4zIHwgdW5kZWZpbmVkfSBJZiB0aGUgZWxsaXBzb2lkIG9yIG1hcCB3YXMgcGlja2VkLFxuICogcmV0dXJucyB0aGUgcG9pbnQgb24gdGhlIHN1cmZhY2Ugb2YgdGhlIGVsbGlwc29pZCBvciBtYXAgaW4gd29ybGRcbiAqIGNvb3JkaW5hdGVzLiBJZiB0aGUgZWxsaXBzb2lkIG9yIG1hcCB3YXMgbm90IHBpY2tlZCwgcmV0dXJucyB1bmRlZmluZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBjYW52YXMgPSB2aWV3ZXIuc2NlbmUuY2FudmFzO1xuICogdmFyIGNlbnRlciA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihjYW52YXMuY2xpZW50V2lkdGggLyAyLjAsIGNhbnZhcy5jbGllbnRIZWlnaHQgLyAyLjApO1xuICogdmFyIGVsbGlwc29pZCA9IHZpZXdlci5zY2VuZS5nbG9iZS5lbGxpcHNvaWQ7XG4gKiB2YXIgcmVzdWx0ID0gdmlld2VyLmNhbWVyYS5waWNrRWxsaXBzb2lkKGNlbnRlciwgZWxsaXBzb2lkKTtcbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5waWNrRWxsaXBzb2lkID0gZnVuY3Rpb24gKHdpbmRvd1Bvc2l0aW9uLCBlbGxpcHNvaWQsIHJlc3VsdCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQod2luZG93UG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwid2luZG93UG9zaXRpb24gaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBjYW52YXMgPSB0aGlzLl9zY2VuZS5jYW52YXM7XG4gIGlmIChjYW52YXMuY2xpZW50V2lkdGggPT09IDAgfHwgY2FudmFzLmNsaWVudEhlaWdodCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoIWRlZmluZWQocmVzdWx0KSkge1xuICAgIHJlc3VsdCA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG4gIH1cblxuICBlbGxpcHNvaWQgPSBkZWZhdWx0VmFsdWUoZWxsaXBzb2lkLCBFbGxpcHNvaWQuV0dTODQpO1xuXG4gIGlmICh0aGlzLl9tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUzRCkge1xuICAgIHJlc3VsdCA9IHBpY2tFbGxpcHNvaWQzRCh0aGlzLCB3aW5kb3dQb3NpdGlvbiwgZWxsaXBzb2lkLCByZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEKSB7XG4gICAgcmVzdWx0ID0gcGlja01hcDJEKHRoaXMsIHdpbmRvd1Bvc2l0aW9uLCB0aGlzLl9wcm9qZWN0aW9uLCByZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5DT0xVTUJVU19WSUVXKSB7XG4gICAgcmVzdWx0ID0gcGlja01hcENvbHVtYnVzVmlldyhcbiAgICAgIHRoaXMsXG4gICAgICB3aW5kb3dQb3NpdGlvbixcbiAgICAgIHRoaXMuX3Byb2plY3Rpb24sXG4gICAgICByZXN1bHRcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIHBpY2tQZXJzcENlbnRlciA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcGlja1BlcnNwWERpciA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgcGlja1BlcnNwWURpciA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5mdW5jdGlvbiBnZXRQaWNrUmF5UGVyc3BlY3RpdmUoY2FtZXJhLCB3aW5kb3dQb3NpdGlvbiwgcmVzdWx0KSB7XG4gIHZhciBjYW52YXMgPSBjYW1lcmEuX3NjZW5lLmNhbnZhcztcbiAgdmFyIHdpZHRoID0gY2FudmFzLmNsaWVudFdpZHRoO1xuICB2YXIgaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcblxuICB2YXIgdGFuUGhpID0gTWF0aC50YW4oY2FtZXJhLmZydXN0dW0uZm92eSAqIDAuNSk7XG4gIHZhciB0YW5UaGV0YSA9IGNhbWVyYS5mcnVzdHVtLmFzcGVjdFJhdGlvICogdGFuUGhpO1xuICB2YXIgbmVhciA9IGNhbWVyYS5mcnVzdHVtLm5lYXI7XG5cbiAgdmFyIHggPSAoMi4wIC8gd2lkdGgpICogd2luZG93UG9zaXRpb24ueCAtIDEuMDtcbiAgdmFyIHkgPSAoMi4wIC8gaGVpZ2h0KSAqIChoZWlnaHQgLSB3aW5kb3dQb3NpdGlvbi55KSAtIDEuMDtcblxuICB2YXIgcG9zaXRpb24gPSBjYW1lcmEucG9zaXRpb25XQztcbiAgQ2FydGVzaWFuMy5jbG9uZShwb3NpdGlvbiwgcmVzdWx0Lm9yaWdpbik7XG5cbiAgdmFyIG5lYXJDZW50ZXIgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgY2FtZXJhLmRpcmVjdGlvbldDLFxuICAgIG5lYXIsXG4gICAgcGlja1BlcnNwQ2VudGVyXG4gICk7XG4gIENhcnRlc2lhbjMuYWRkKHBvc2l0aW9uLCBuZWFyQ2VudGVyLCBuZWFyQ2VudGVyKTtcbiAgdmFyIHhEaXIgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgY2FtZXJhLnJpZ2h0V0MsXG4gICAgeCAqIG5lYXIgKiB0YW5UaGV0YSxcbiAgICBwaWNrUGVyc3BYRGlyXG4gICk7XG4gIHZhciB5RGlyID0gQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKFxuICAgIGNhbWVyYS51cFdDLFxuICAgIHkgKiBuZWFyICogdGFuUGhpLFxuICAgIHBpY2tQZXJzcFlEaXJcbiAgKTtcbiAgdmFyIGRpcmVjdGlvbiA9IENhcnRlc2lhbjMuYWRkKG5lYXJDZW50ZXIsIHhEaXIsIHJlc3VsdC5kaXJlY3Rpb24pO1xuICBDYXJ0ZXNpYW4zLmFkZChkaXJlY3Rpb24sIHlEaXIsIGRpcmVjdGlvbik7XG4gIENhcnRlc2lhbjMuc3VidHJhY3QoZGlyZWN0aW9uLCBwb3NpdGlvbiwgZGlyZWN0aW9uKTtcbiAgQ2FydGVzaWFuMy5ub3JtYWxpemUoZGlyZWN0aW9uLCBkaXJlY3Rpb24pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbnZhciBzY3JhdGNoRGlyZWN0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gZ2V0UGlja1JheU9ydGhvZ3JhcGhpYyhjYW1lcmEsIHdpbmRvd1Bvc2l0aW9uLCByZXN1bHQpIHtcbiAgdmFyIGNhbnZhcyA9IGNhbWVyYS5fc2NlbmUuY2FudmFzO1xuICB2YXIgd2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGg7XG4gIHZhciBoZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xuXG4gIHZhciBmcnVzdHVtID0gY2FtZXJhLmZydXN0dW07XG4gIGlmIChkZWZpbmVkKGZydXN0dW0uX29mZkNlbnRlckZydXN0dW0pKSB7XG4gICAgZnJ1c3R1bSA9IGZydXN0dW0uX29mZkNlbnRlckZydXN0dW07XG4gIH1cbiAgdmFyIHggPSAoMi4wIC8gd2lkdGgpICogd2luZG93UG9zaXRpb24ueCAtIDEuMDtcbiAgeCAqPSAoZnJ1c3R1bS5yaWdodCAtIGZydXN0dW0ubGVmdCkgKiAwLjU7XG4gIHZhciB5ID0gKDIuMCAvIGhlaWdodCkgKiAoaGVpZ2h0IC0gd2luZG93UG9zaXRpb24ueSkgLSAxLjA7XG4gIHkgKj0gKGZydXN0dW0udG9wIC0gZnJ1c3R1bS5ib3R0b20pICogMC41O1xuXG4gIHZhciBvcmlnaW4gPSByZXN1bHQub3JpZ2luO1xuICBDYXJ0ZXNpYW4zLmNsb25lKGNhbWVyYS5wb3NpdGlvbiwgb3JpZ2luKTtcblxuICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoY2FtZXJhLnJpZ2h0LCB4LCBzY3JhdGNoRGlyZWN0aW9uKTtcbiAgQ2FydGVzaWFuMy5hZGQoc2NyYXRjaERpcmVjdGlvbiwgb3JpZ2luLCBvcmlnaW4pO1xuICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoY2FtZXJhLnVwLCB5LCBzY3JhdGNoRGlyZWN0aW9uKTtcbiAgQ2FydGVzaWFuMy5hZGQoc2NyYXRjaERpcmVjdGlvbiwgb3JpZ2luLCBvcmlnaW4pO1xuXG4gIENhcnRlc2lhbjMuY2xvbmUoY2FtZXJhLmRpcmVjdGlvbldDLCByZXN1bHQuZGlyZWN0aW9uKTtcblxuICBpZiAoXG4gICAgY2FtZXJhLl9tb2RlID09PSBTY2VuZU1vZGUuQ09MVU1CVVNfVklFVyB8fFxuICAgIGNhbWVyYS5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkRcbiAgKSB7XG4gICAgQ2FydGVzaWFuMy5mcm9tRWxlbWVudHMoXG4gICAgICByZXN1bHQub3JpZ2luLnosXG4gICAgICByZXN1bHQub3JpZ2luLngsXG4gICAgICByZXN1bHQub3JpZ2luLnksXG4gICAgICByZXN1bHQub3JpZ2luXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmF5IGZyb20gdGhlIGNhbWVyYSBwb3NpdGlvbiB0aHJvdWdoIHRoZSBwaXhlbCBhdCA8Y29kZT53aW5kb3dQb3NpdGlvbjwvY29kZT5cbiAqIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICpcbiAqIEBwYXJhbSB7Q2FydGVzaWFuMn0gd2luZG93UG9zaXRpb24gVGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgb2YgYSBwaXhlbC5cbiAqIEBwYXJhbSB7UmF5fSBbcmVzdWx0XSBUaGUgb2JqZWN0IG9udG8gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtSYXl9IFJldHVybnMgdGhlIHtAbGluayBDYXJ0ZXNpYW4zfSBwb3NpdGlvbiBhbmQgZGlyZWN0aW9uIG9mIHRoZSByYXkuXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuZ2V0UGlja1JheSA9IGZ1bmN0aW9uICh3aW5kb3dQb3NpdGlvbiwgcmVzdWx0KSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh3aW5kb3dQb3NpdGlvbikpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ3aW5kb3dQb3NpdGlvbiBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKCFkZWZpbmVkKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSBuZXcgUmF5KCk7XG4gIH1cblxuICB2YXIgZnJ1c3R1bSA9IHRoaXMuZnJ1c3R1bTtcbiAgaWYgKFxuICAgIGRlZmluZWQoZnJ1c3R1bS5hc3BlY3RSYXRpbykgJiZcbiAgICBkZWZpbmVkKGZydXN0dW0uZm92KSAmJlxuICAgIGRlZmluZWQoZnJ1c3R1bS5uZWFyKVxuICApIHtcbiAgICByZXR1cm4gZ2V0UGlja1JheVBlcnNwZWN0aXZlKHRoaXMsIHdpbmRvd1Bvc2l0aW9uLCByZXN1bHQpO1xuICB9XG5cbiAgcmV0dXJuIGdldFBpY2tSYXlPcnRob2dyYXBoaWModGhpcywgd2luZG93UG9zaXRpb24sIHJlc3VsdCk7XG59O1xuXG52YXIgc2NyYXRjaFRvQ2VudGVyID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoUHJvaiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbi8qKlxuICogUmV0dXJuIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjYW1lcmEgdG8gdGhlIGZyb250IG9mIHRoZSBib3VuZGluZyBzcGhlcmUuXG4gKlxuICogQHBhcmFtIHtCb3VuZGluZ1NwaGVyZX0gYm91bmRpbmdTcGhlcmUgVGhlIGJvdW5kaW5nIHNwaGVyZSBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBkaXN0YW5jZSB0byB0aGUgYm91bmRpbmcgc3BoZXJlLlxuICovXG5DYW1lcmEucHJvdG90eXBlLmRpc3RhbmNlVG9Cb3VuZGluZ1NwaGVyZSA9IGZ1bmN0aW9uIChib3VuZGluZ1NwaGVyZSkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoYm91bmRpbmdTcGhlcmUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiYm91bmRpbmdTcGhlcmUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciB0b0NlbnRlciA9IENhcnRlc2lhbjMuc3VidHJhY3QoXG4gICAgdGhpcy5wb3NpdGlvbldDLFxuICAgIGJvdW5kaW5nU3BoZXJlLmNlbnRlcixcbiAgICBzY3JhdGNoVG9DZW50ZXJcbiAgKTtcbiAgdmFyIHByb2ogPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgdGhpcy5kaXJlY3Rpb25XQyxcbiAgICBDYXJ0ZXNpYW4zLmRvdCh0b0NlbnRlciwgdGhpcy5kaXJlY3Rpb25XQyksXG4gICAgc2NyYXRjaFByb2pcbiAgKTtcbiAgcmV0dXJuIE1hdGgubWF4KDAuMCwgQ2FydGVzaWFuMy5tYWduaXR1ZGUocHJvaikgLSBib3VuZGluZ1NwaGVyZS5yYWRpdXMpO1xufTtcblxudmFyIHNjcmF0Y2hQaXhlbFNpemUgPSBuZXcgQ2FydGVzaWFuMigpO1xuXG4vKipcbiAqIFJldHVybiB0aGUgcGl4ZWwgc2l6ZSBpbiBtZXRlcnMuXG4gKlxuICogQHBhcmFtIHtCb3VuZGluZ1NwaGVyZX0gYm91bmRpbmdTcGhlcmUgVGhlIGJvdW5kaW5nIHNwaGVyZSBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBkcmF3aW5nQnVmZmVyV2lkdGggVGhlIGRyYXdpbmcgYnVmZmVyIHdpZHRoLlxuICogQHBhcmFtIHtOdW1iZXJ9IGRyYXdpbmdCdWZmZXJIZWlnaHQgVGhlIGRyYXdpbmcgYnVmZmVyIGhlaWdodC5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBwaXhlbCBzaXplIGluIG1ldGVycy5cbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS5nZXRQaXhlbFNpemUgPSBmdW5jdGlvbiAoXG4gIGJvdW5kaW5nU3BoZXJlLFxuICBkcmF3aW5nQnVmZmVyV2lkdGgsXG4gIGRyYXdpbmdCdWZmZXJIZWlnaHRcbikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoYm91bmRpbmdTcGhlcmUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiYm91bmRpbmdTcGhlcmUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChkcmF3aW5nQnVmZmVyV2lkdGgpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiZHJhd2luZ0J1ZmZlcldpZHRoIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICBpZiAoIWRlZmluZWQoZHJhd2luZ0J1ZmZlckhlaWdodCkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJkcmF3aW5nQnVmZmVySGVpZ2h0IGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgZGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlVG9Cb3VuZGluZ1NwaGVyZShib3VuZGluZ1NwaGVyZSk7XG4gIHZhciBwaXhlbFNpemUgPSB0aGlzLmZydXN0dW0uZ2V0UGl4ZWxEaW1lbnNpb25zKFxuICAgIGRyYXdpbmdCdWZmZXJXaWR0aCxcbiAgICBkcmF3aW5nQnVmZmVySGVpZ2h0LFxuICAgIGRpc3RhbmNlLFxuICAgIHRoaXMuX3NjZW5lLnBpeGVsUmF0aW8sXG4gICAgc2NyYXRjaFBpeGVsU2l6ZVxuICApO1xuICByZXR1cm4gTWF0aC5tYXgocGl4ZWxTaXplLngsIHBpeGVsU2l6ZS55KTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUFuaW1hdGlvblRlbXBsYXRlQ1YoXG4gIGNhbWVyYSxcbiAgcG9zaXRpb24sXG4gIGNlbnRlcixcbiAgbWF4WCxcbiAgbWF4WSxcbiAgZHVyYXRpb25cbikge1xuICB2YXIgbmV3UG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmNsb25lKHBvc2l0aW9uKTtcblxuICBpZiAoY2VudGVyLnkgPiBtYXhYKSB7XG4gICAgbmV3UG9zaXRpb24ueSAtPSBjZW50ZXIueSAtIG1heFg7XG4gIH0gZWxzZSBpZiAoY2VudGVyLnkgPCAtbWF4WCkge1xuICAgIG5ld1Bvc2l0aW9uLnkgKz0gLW1heFggLSBjZW50ZXIueTtcbiAgfVxuXG4gIGlmIChjZW50ZXIueiA+IG1heFkpIHtcbiAgICBuZXdQb3NpdGlvbi56IC09IGNlbnRlci56IC0gbWF4WTtcbiAgfSBlbHNlIGlmIChjZW50ZXIueiA8IC1tYXhZKSB7XG4gICAgbmV3UG9zaXRpb24ueiArPSAtbWF4WSAtIGNlbnRlci56O1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQ1YodmFsdWUpIHtcbiAgICB2YXIgaW50ZXJwID0gQ2FydGVzaWFuMy5sZXJwKFxuICAgICAgcG9zaXRpb24sXG4gICAgICBuZXdQb3NpdGlvbixcbiAgICAgIHZhbHVlLnRpbWUsXG4gICAgICBuZXcgQ2FydGVzaWFuMygpXG4gICAgKTtcbiAgICBjYW1lcmEud29ybGRUb0NhbWVyYUNvb3JkaW5hdGVzUG9pbnQoaW50ZXJwLCBjYW1lcmEucG9zaXRpb24pO1xuICB9XG4gIHJldHVybiB7XG4gICAgZWFzaW5nRnVuY3Rpb246IEVhc2luZ0Z1bmN0aW9uLkVYUE9ORU5USUFMX09VVCxcbiAgICBzdGFydE9iamVjdDoge1xuICAgICAgdGltZTogMC4wLFxuICAgIH0sXG4gICAgc3RvcE9iamVjdDoge1xuICAgICAgdGltZTogMS4wLFxuICAgIH0sXG4gICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgIHVwZGF0ZTogdXBkYXRlQ1YsXG4gIH07XG59XG5cbnZhciBub3JtYWxTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBjZW50ZXJTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBwb3NTY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoQ2FydGVzaWFuM1N1YnRyYWN0ID0gbmV3IENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gY3JlYXRlQW5pbWF0aW9uQ1YoY2FtZXJhLCBkdXJhdGlvbikge1xuICB2YXIgcG9zaXRpb24gPSBjYW1lcmEucG9zaXRpb247XG4gIHZhciBkaXJlY3Rpb24gPSBjYW1lcmEuZGlyZWN0aW9uO1xuXG4gIHZhciBub3JtYWwgPSBjYW1lcmEud29ybGRUb0NhbWVyYUNvb3JkaW5hdGVzVmVjdG9yKFxuICAgIENhcnRlc2lhbjMuVU5JVF9YLFxuICAgIG5vcm1hbFNjcmF0Y2hcbiAgKTtcbiAgdmFyIHNjYWxhciA9XG4gICAgLUNhcnRlc2lhbjMuZG90KG5vcm1hbCwgcG9zaXRpb24pIC8gQ2FydGVzaWFuMy5kb3Qobm9ybWFsLCBkaXJlY3Rpb24pO1xuICB2YXIgY2VudGVyID0gQ2FydGVzaWFuMy5hZGQoXG4gICAgcG9zaXRpb24sXG4gICAgQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKGRpcmVjdGlvbiwgc2NhbGFyLCBjZW50ZXJTY3JhdGNoKSxcbiAgICBjZW50ZXJTY3JhdGNoXG4gICk7XG4gIGNhbWVyYS5jYW1lcmFUb1dvcmxkQ29vcmRpbmF0ZXNQb2ludChjZW50ZXIsIGNlbnRlcik7XG5cbiAgcG9zaXRpb24gPSBjYW1lcmEuY2FtZXJhVG9Xb3JsZENvb3JkaW5hdGVzUG9pbnQoY2FtZXJhLnBvc2l0aW9uLCBwb3NTY3JhdGNoKTtcblxuICB2YXIgdGFuUGhpID0gTWF0aC50YW4oY2FtZXJhLmZydXN0dW0uZm92eSAqIDAuNSk7XG4gIHZhciB0YW5UaGV0YSA9IGNhbWVyYS5mcnVzdHVtLmFzcGVjdFJhdGlvICogdGFuUGhpO1xuICB2YXIgZGlzdFRvQyA9IENhcnRlc2lhbjMubWFnbml0dWRlKFxuICAgIENhcnRlc2lhbjMuc3VidHJhY3QocG9zaXRpb24sIGNlbnRlciwgc2NyYXRjaENhcnRlc2lhbjNTdWJ0cmFjdClcbiAgKTtcbiAgdmFyIGRXaWR0aCA9IHRhblRoZXRhICogZGlzdFRvQztcbiAgdmFyIGRIZWlnaHQgPSB0YW5QaGkgKiBkaXN0VG9DO1xuXG4gIHZhciBtYXBXaWR0aCA9IGNhbWVyYS5fbWF4Q29vcmQueDtcbiAgdmFyIG1hcEhlaWdodCA9IGNhbWVyYS5fbWF4Q29vcmQueTtcblxuICB2YXIgbWF4WCA9IE1hdGgubWF4KGRXaWR0aCAtIG1hcFdpZHRoLCBtYXBXaWR0aCk7XG4gIHZhciBtYXhZID0gTWF0aC5tYXgoZEhlaWdodCAtIG1hcEhlaWdodCwgbWFwSGVpZ2h0KTtcblxuICBpZiAoXG4gICAgcG9zaXRpb24ueiA8IC1tYXhYIHx8XG4gICAgcG9zaXRpb24ueiA+IG1heFggfHxcbiAgICBwb3NpdGlvbi55IDwgLW1heFkgfHxcbiAgICBwb3NpdGlvbi55ID4gbWF4WVxuICApIHtcbiAgICB2YXIgdHJhbnNsYXRlWCA9IGNlbnRlci55IDwgLW1heFggfHwgY2VudGVyLnkgPiBtYXhYO1xuICAgIHZhciB0cmFuc2xhdGVZID0gY2VudGVyLnogPCAtbWF4WSB8fCBjZW50ZXIueiA+IG1heFk7XG4gICAgaWYgKHRyYW5zbGF0ZVggfHwgdHJhbnNsYXRlWSkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUFuaW1hdGlvblRlbXBsYXRlQ1YoXG4gICAgICAgIGNhbWVyYSxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIGNlbnRlcixcbiAgICAgICAgbWF4WCxcbiAgICAgICAgbWF4WSxcbiAgICAgICAgZHVyYXRpb25cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYW5pbWF0aW9uIHRvIG1vdmUgdGhlIG1hcCBpbnRvIHZpZXcuIFRoaXMgbWV0aG9kIGlzIG9ubHkgdmFsaWQgZm9yIDJEIGFuZCBDb2x1bWJ1cyBtb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gVGhlIGR1cmF0aW9uLCBpbiBzZWNvbmRzLCBvZiB0aGUgYW5pbWF0aW9uLlxuICogQHJldHVybnMge09iamVjdH0gVGhlIGFuaW1hdGlvbiBvciB1bmRlZmluZWQgaWYgdGhlIHNjZW5lIG1vZGUgaXMgM0Qgb3IgdGhlIG1hcCBpcyBhbHJlYWR5IGlvbiB2aWV3LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuY3JlYXRlQ29ycmVjdFBvc2l0aW9uVHdlZW4gPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGR1cmF0aW9uKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImR1cmF0aW9uIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBpZiAodGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcpIHtcbiAgICByZXR1cm4gY3JlYXRlQW5pbWF0aW9uQ1YodGhpcywgZHVyYXRpb24pO1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbnZhciBzY3JhdGNoRmx5VG9EZXN0aW5hdGlvbiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG52YXIgbmV3T3B0aW9ucyA9IHtcbiAgZGVzdGluYXRpb246IHVuZGVmaW5lZCxcbiAgaGVhZGluZzogdW5kZWZpbmVkLFxuICBwaXRjaDogdW5kZWZpbmVkLFxuICByb2xsOiB1bmRlZmluZWQsXG4gIGR1cmF0aW9uOiB1bmRlZmluZWQsXG4gIGNvbXBsZXRlOiB1bmRlZmluZWQsXG4gIGNhbmNlbDogdW5kZWZpbmVkLFxuICBlbmRUcmFuc2Zvcm06IHVuZGVmaW5lZCxcbiAgbWF4aW11bUhlaWdodDogdW5kZWZpbmVkLFxuICBlYXNpbmdGdW5jdGlvbjogdW5kZWZpbmVkLFxufTtcblxuLyoqXG4gKiBDYW5jZWxzIHRoZSBjdXJyZW50IGNhbWVyYSBmbGlnaHQgYW5kIGxlYXZlcyB0aGUgY2FtZXJhIGF0IGl0cyBjdXJyZW50IGxvY2F0aW9uLlxuICogSWYgbm8gZmxpZ2h0IGlzIGluIHByb2dyZXNzLCB0aGlzIHRoaXMgZnVuY3Rpb24gZG9lcyBub3RoaW5nLlxuICovXG5DYW1lcmEucHJvdG90eXBlLmNhbmNlbEZsaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRlZmluZWQodGhpcy5fY3VycmVudEZsaWdodCkpIHtcbiAgICB0aGlzLl9jdXJyZW50RmxpZ2h0LmNhbmNlbFR3ZWVuKCk7XG4gICAgdGhpcy5fY3VycmVudEZsaWdodCA9IHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLyoqXG4gKiBDb21wbGV0ZXMgdGhlIGN1cnJlbnQgY2FtZXJhIGZsaWdodCBhbmQgbW92ZXMgdGhlIGNhbWVyYSBpbW1lZGlhdGVseSB0byBpdHMgZmluYWwgZGVzdGluYXRpb24uXG4gKiBJZiBubyBmbGlnaHQgaXMgaW4gcHJvZ3Jlc3MsIHRoaXMgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdGhpbmcuXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuY29tcGxldGVGbGlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChkZWZpbmVkKHRoaXMuX2N1cnJlbnRGbGlnaHQpKSB7XG4gICAgdGhpcy5fY3VycmVudEZsaWdodC5jYW5jZWxUd2VlbigpO1xuXG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBkZXN0aW5hdGlvbjogdW5kZWZpbmVkLFxuICAgICAgb3JpZW50YXRpb246IHtcbiAgICAgICAgaGVhZGluZzogdW5kZWZpbmVkLFxuICAgICAgICBwaXRjaDogdW5kZWZpbmVkLFxuICAgICAgICByb2xsOiB1bmRlZmluZWQsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBvcHRpb25zLmRlc3RpbmF0aW9uID0gbmV3T3B0aW9ucy5kZXN0aW5hdGlvbjtcbiAgICBvcHRpb25zLm9yaWVudGF0aW9uLmhlYWRpbmcgPSBuZXdPcHRpb25zLmhlYWRpbmc7XG4gICAgb3B0aW9ucy5vcmllbnRhdGlvbi5waXRjaCA9IG5ld09wdGlvbnMucGl0Y2g7XG4gICAgb3B0aW9ucy5vcmllbnRhdGlvbi5yb2xsID0gbmV3T3B0aW9ucy5yb2xsO1xuXG4gICAgdGhpcy5zZXRWaWV3KG9wdGlvbnMpO1xuXG4gICAgaWYgKGRlZmluZWQodGhpcy5fY3VycmVudEZsaWdodC5jb21wbGV0ZSkpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRGbGlnaHQuY29tcGxldGUoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50RmxpZ2h0ID0gdW5kZWZpbmVkO1xuICB9XG59O1xuXG4vKipcbiAqIEZsaWVzIHRoZSBjYW1lcmEgZnJvbSBpdHMgY3VycmVudCBwb3NpdGlvbiB0byBhIG5ldyBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge0NhcnRlc2lhbjN8UmVjdGFuZ2xlfSBvcHRpb25zLmRlc3RpbmF0aW9uIFRoZSBmaW5hbCBwb3NpdGlvbiBvZiB0aGUgY2FtZXJhIGluIFdHUzg0ICh3b3JsZCkgY29vcmRpbmF0ZXMgb3IgYSByZWN0YW5nbGUgdGhhdCB3b3VsZCBiZSB2aXNpYmxlIGZyb20gYSB0b3AtZG93biB2aWV3LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLm9yaWVudGF0aW9uXSBBbiBvYmplY3QgdGhhdCBjb250YWlucyBlaXRoZXIgZGlyZWN0aW9uIGFuZCB1cCBwcm9wZXJ0aWVzIG9yIGhlYWRpbmcsIHBpdGNoIGFuZCByb2xsIHByb3BlcnRpZXMuIEJ5IGRlZmF1bHQsIHRoZSBkaXJlY3Rpb24gd2lsbCBwb2ludFxuICogdG93YXJkcyB0aGUgY2VudGVyIG9mIHRoZSBmcmFtZSBpbiAzRCBhbmQgaW4gdGhlIG5lZ2F0aXZlIHogZGlyZWN0aW9uIGluIENvbHVtYnVzIHZpZXcuIFRoZSB1cCBkaXJlY3Rpb24gd2lsbCBwb2ludCB0b3dhcmRzIGxvY2FsIG5vcnRoIGluIDNEIGFuZCBpbiB0aGUgcG9zaXRpdmVcbiAqIHkgZGlyZWN0aW9uIGluIENvbHVtYnVzIHZpZXcuICBPcmllbnRhdGlvbiBpcyBub3QgdXNlZCBpbiAyRCB3aGVuIGluIGluZmluaXRlIHNjcm9sbGluZyBtb2RlLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmR1cmF0aW9uXSBUaGUgZHVyYXRpb24gb2YgdGhlIGZsaWdodCBpbiBzZWNvbmRzLiBJZiBvbWl0dGVkLCBDZXNpdW0gYXR0ZW1wdHMgdG8gY2FsY3VsYXRlIGFuIGlkZWFsIGR1cmF0aW9uIGJhc2VkIG9uIHRoZSBkaXN0YW5jZSB0byBiZSB0cmF2ZWxlZCBieSB0aGUgZmxpZ2h0LlxuICogQHBhcmFtIHtDYW1lcmEuRmxpZ2h0Q29tcGxldGVDYWxsYmFja30gW29wdGlvbnMuY29tcGxldGVdIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIGZsaWdodCBpcyBjb21wbGV0ZS5cbiAqIEBwYXJhbSB7Q2FtZXJhLkZsaWdodENhbmNlbGxlZENhbGxiYWNrfSBbb3B0aW9ucy5jYW5jZWxdIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIGlmIHRoZSBmbGlnaHQgaXMgY2FuY2VsbGVkLlxuICogQHBhcmFtIHtNYXRyaXg0fSBbb3B0aW9ucy5lbmRUcmFuc2Zvcm1dIFRyYW5zZm9ybSBtYXRyaXggcmVwcmVzZW50aW5nIHRoZSByZWZlcmVuY2UgZnJhbWUgdGhlIGNhbWVyYSB3aWxsIGJlIGluIHdoZW4gdGhlIGZsaWdodCBpcyBjb21wbGV0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4aW11bUhlaWdodF0gVGhlIG1heGltdW0gaGVpZ2h0IGF0IHRoZSBwZWFrIG9mIHRoZSBmbGlnaHQuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMucGl0Y2hBZGp1c3RIZWlnaHRdIElmIGNhbWVyYSBmbHllcyBoaWdoZXIgdGhhbiB0aGF0IHZhbHVlLCBhZGp1c3QgcGl0Y2ggZHVpcmluZyB0aGUgZmxpZ2h0IHRvIGxvb2sgZG93biwgYW5kIGtlZXAgRWFydGggaW4gdmlld3BvcnQuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZmx5T3ZlckxvbmdpdHVkZV0gVGhlcmUgYXJlIGFsd2F5cyB0d28gd2F5cyBiZXR3ZWVuIDIgcG9pbnRzIG9uIGdsb2JlLiBUaGlzIG9wdGlvbiBmb3JjZSBjYW1lcmEgdG8gY2hvb3NlIGZpZ2h0IGRpcmVjdGlvbiB0byBmbHkgb3ZlciB0aGF0IGxvbmdpdHVkZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5mbHlPdmVyTG9uZ2l0dWRlV2VpZ2h0XSBGbHkgb3ZlciB0aGUgbG9uIHNwZWNpZnllZCB2aWEgZmx5T3ZlckxvbmdpdHVkZSBvbmx5IGlmIHRoYXQgd2F5IGlzIG5vdCBsb25nZXIgdGhhbiBzaG9ydCB3YXkgdGltZXMgZmx5T3ZlckxvbmdpdHVkZVdlaWdodC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY29udmVydF0gV2hldGhlciB0byBjb252ZXJ0IHRoZSBkZXN0aW5hdGlvbiBmcm9tIHdvcmxkIGNvb3JkaW5hdGVzIHRvIHNjZW5lIGNvb3JkaW5hdGVzIChvbmx5IHJlbGV2YW50IHdoZW4gbm90IHVzaW5nIDNEKS4gRGVmYXVsdHMgdG8gPGNvZGU+dHJ1ZTwvY29kZT4uXG4gKiBAcGFyYW0ge0Vhc2luZ0Z1bmN0aW9uLkNhbGxiYWNrfSBbb3B0aW9ucy5lYXNpbmdGdW5jdGlvbl0gQ29udHJvbHMgaG93IHRoZSB0aW1lIGlzIGludGVycG9sYXRlZCBvdmVyIHRoZSBkdXJhdGlvbiBvZiB0aGUgZmxpZ2h0LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBJZiBlaXRoZXIgZGlyZWN0aW9uIG9yIHVwIGlzIGdpdmVuLCB0aGVuIGJvdGggYXJlIHJlcXVpcmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyAxLiBGbHkgdG8gYSBwb3NpdGlvbiB3aXRoIGEgdG9wLWRvd24gdmlld1xuICogdmlld2VyLmNhbWVyYS5mbHlUbyh7XG4gKiAgICAgZGVzdGluYXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcygtMTE3LjE2LCAzMi43MSwgMTUwMDAuMClcbiAqIH0pO1xuICpcbiAqIC8vIDIuIEZseSB0byBhIFJlY3RhbmdsZSB3aXRoIGEgdG9wLWRvd24gdmlld1xuICogdmlld2VyLmNhbWVyYS5mbHlUbyh7XG4gKiAgICAgZGVzdGluYXRpb24gOiBDZXNpdW0uUmVjdGFuZ2xlLmZyb21EZWdyZWVzKHdlc3QsIHNvdXRoLCBlYXN0LCBub3J0aClcbiAqIH0pO1xuICpcbiAqIC8vIDMuIEZseSB0byBhIHBvc2l0aW9uIHdpdGggYW4gb3JpZW50YXRpb24gdXNpbmcgdW5pdCB2ZWN0b3JzLlxuICogdmlld2VyLmNhbWVyYS5mbHlUbyh7XG4gKiAgICAgZGVzdGluYXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcygtMTIyLjE5LCA0Ni4yNSwgNTAwMC4wKSxcbiAqICAgICBvcmllbnRhdGlvbiA6IHtcbiAqICAgICAgICAgZGlyZWN0aW9uIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKC0wLjA0MjMxMjQzMTA0MjQwNDAxLCAtMC4yMDEyMzIzNjA0OTQ0MzQyMSwgLTAuOTc4NjI5MjQzMDA3MzQpLFxuICogICAgICAgICB1cCA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygtMC40NzkzNDU4OTMwNTI5Mzc0NiwgLTAuODU1MzIxNjI1MzExNDU1MiwgMC4xOTY2MDIyMTc5MTE4MzM5KVxuICogICAgIH1cbiAqIH0pO1xuICpcbiAqIC8vIDQuIEZseSB0byBhIHBvc2l0aW9uIHdpdGggYW4gb3JpZW50YXRpb24gdXNpbmcgaGVhZGluZywgcGl0Y2ggYW5kIHJvbGwuXG4gKiB2aWV3ZXIuY2FtZXJhLmZseVRvKHtcbiAqICAgICBkZXN0aW5hdGlvbiA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKC0xMjIuMTksIDQ2LjI1LCA1MDAwLjApLFxuICogICAgIG9yaWVudGF0aW9uIDoge1xuICogICAgICAgICBoZWFkaW5nIDogQ2VzaXVtLk1hdGgudG9SYWRpYW5zKDE3NS4wKSxcbiAqICAgICAgICAgcGl0Y2ggOiBDZXNpdW0uTWF0aC50b1JhZGlhbnMoLTM1LjApLFxuICogICAgICAgICByb2xsIDogMC4wXG4gKiAgICAgfVxuICogfSk7XG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuZmx5VG8gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZGVzdGluYXRpb24gPSBvcHRpb25zLmRlc3RpbmF0aW9uO1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoZGVzdGluYXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiZGVzdGluYXRpb24gaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBtb2RlID0gdGhpcy5fbW9kZTtcbiAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuY2FuY2VsRmxpZ2h0KCk7XG5cbiAgdmFyIG9yaWVudGF0aW9uID0gZGVmYXVsdFZhbHVlKFxuICAgIG9wdGlvbnMub3JpZW50YXRpb24sXG4gICAgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVFxuICApO1xuICBpZiAoZGVmaW5lZChvcmllbnRhdGlvbi5kaXJlY3Rpb24pKSB7XG4gICAgb3JpZW50YXRpb24gPSBkaXJlY3Rpb25VcFRvSGVhZGluZ1BpdGNoUm9sbChcbiAgICAgIHRoaXMsXG4gICAgICBkZXN0aW5hdGlvbixcbiAgICAgIG9yaWVudGF0aW9uLFxuICAgICAgc2NyYXRjaFNldFZpZXdPcHRpb25zLm9yaWVudGF0aW9uXG4gICAgKTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKG9wdGlvbnMuZHVyYXRpb24pICYmIG9wdGlvbnMuZHVyYXRpb24gPD0gMC4wKSB7XG4gICAgdmFyIHNldFZpZXdPcHRpb25zID0gc2NyYXRjaFNldFZpZXdPcHRpb25zO1xuICAgIHNldFZpZXdPcHRpb25zLmRlc3RpbmF0aW9uID0gb3B0aW9ucy5kZXN0aW5hdGlvbjtcbiAgICBzZXRWaWV3T3B0aW9ucy5vcmllbnRhdGlvbi5oZWFkaW5nID0gb3JpZW50YXRpb24uaGVhZGluZztcbiAgICBzZXRWaWV3T3B0aW9ucy5vcmllbnRhdGlvbi5waXRjaCA9IG9yaWVudGF0aW9uLnBpdGNoO1xuICAgIHNldFZpZXdPcHRpb25zLm9yaWVudGF0aW9uLnJvbGwgPSBvcmllbnRhdGlvbi5yb2xsO1xuICAgIHNldFZpZXdPcHRpb25zLmNvbnZlcnQgPSBvcHRpb25zLmNvbnZlcnQ7XG4gICAgc2V0Vmlld09wdGlvbnMuZW5kVHJhbnNmb3JtID0gb3B0aW9ucy5lbmRUcmFuc2Zvcm07XG4gICAgdGhpcy5zZXRWaWV3KHNldFZpZXdPcHRpb25zKTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29tcGxldGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgb3B0aW9ucy5jb21wbGV0ZSgpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgaXNSZWN0YW5nbGUgPSBkZWZpbmVkKGRlc3RpbmF0aW9uLndlc3QpO1xuICBpZiAoaXNSZWN0YW5nbGUpIHtcbiAgICBkZXN0aW5hdGlvbiA9IHRoaXMuZ2V0UmVjdGFuZ2xlQ2FtZXJhQ29vcmRpbmF0ZXMoXG4gICAgICBkZXN0aW5hdGlvbixcbiAgICAgIHNjcmF0Y2hGbHlUb0Rlc3RpbmF0aW9uXG4gICAgKTtcbiAgfVxuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIGZsaWdodFR3ZWVuO1xuXG4gIG5ld09wdGlvbnMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgbmV3T3B0aW9ucy5oZWFkaW5nID0gb3JpZW50YXRpb24uaGVhZGluZztcbiAgbmV3T3B0aW9ucy5waXRjaCA9IG9yaWVudGF0aW9uLnBpdGNoO1xuICBuZXdPcHRpb25zLnJvbGwgPSBvcmllbnRhdGlvbi5yb2xsO1xuICBuZXdPcHRpb25zLmR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbjtcbiAgbmV3T3B0aW9ucy5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZmxpZ2h0VHdlZW4gPT09IHRoYXQuX2N1cnJlbnRGbGlnaHQpIHtcbiAgICAgIHRoYXQuX2N1cnJlbnRGbGlnaHQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKG9wdGlvbnMuY29tcGxldGUpKSB7XG4gICAgICBvcHRpb25zLmNvbXBsZXRlKCk7XG4gICAgfVxuICB9O1xuICBuZXdPcHRpb25zLmNhbmNlbCA9IG9wdGlvbnMuY2FuY2VsO1xuICBuZXdPcHRpb25zLmVuZFRyYW5zZm9ybSA9IG9wdGlvbnMuZW5kVHJhbnNmb3JtO1xuICBuZXdPcHRpb25zLmNvbnZlcnQgPSBpc1JlY3RhbmdsZSA/IGZhbHNlIDogb3B0aW9ucy5jb252ZXJ0O1xuICBuZXdPcHRpb25zLm1heGltdW1IZWlnaHQgPSBvcHRpb25zLm1heGltdW1IZWlnaHQ7XG4gIG5ld09wdGlvbnMucGl0Y2hBZGp1c3RIZWlnaHQgPSBvcHRpb25zLnBpdGNoQWRqdXN0SGVpZ2h0O1xuICBuZXdPcHRpb25zLmZseU92ZXJMb25naXR1ZGUgPSBvcHRpb25zLmZseU92ZXJMb25naXR1ZGU7XG4gIG5ld09wdGlvbnMuZmx5T3ZlckxvbmdpdHVkZVdlaWdodCA9IG9wdGlvbnMuZmx5T3ZlckxvbmdpdHVkZVdlaWdodDtcbiAgbmV3T3B0aW9ucy5lYXNpbmdGdW5jdGlvbiA9IG9wdGlvbnMuZWFzaW5nRnVuY3Rpb247XG5cbiAgdmFyIHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gIHZhciB0d2Vlbk9wdGlvbnMgPSBDYW1lcmFGbGlnaHRQYXRoLmNyZWF0ZVR3ZWVuKHNjZW5lLCBuZXdPcHRpb25zKTtcbiAgLy8gSWYgdGhlIGNhbWVyYSBkb2Vzbid0IGFjdHVhbGx5IG5lZWQgdG8gZ28gYW55d2hlcmUsIGR1cmF0aW9uXG4gIC8vIHdpbGwgYmUgMCBhbmQgd2UgY2FuIGp1c3QgY29tcGxldGUgdGhlIGN1cnJlbnQgZmxpZ2h0LlxuICBpZiAodHdlZW5PcHRpb25zLmR1cmF0aW9uID09PSAwKSB7XG4gICAgaWYgKHR5cGVvZiB0d2Vlbk9wdGlvbnMuY29tcGxldGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdHdlZW5PcHRpb25zLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBmbGlnaHRUd2VlbiA9IHNjZW5lLnR3ZWVucy5hZGQodHdlZW5PcHRpb25zKTtcbiAgdGhpcy5fY3VycmVudEZsaWdodCA9IGZsaWdodFR3ZWVuO1xuXG4gIC8vIFNhdmUgdGhlIGZpbmFsIGRlc3RpbmF0aW9uIHZpZXcgaW5mb3JtYXRpb24gZm9yIHRoZSBQUkVMT0FEX0ZMSUdIVCBwYXNzLlxuICB2YXIgcHJlbG9hZEZsaWdodENhbWVyYSA9IHRoaXMuX3NjZW5lLnByZWxvYWRGbGlnaHRDYW1lcmE7XG4gIGlmICh0aGlzLl9tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xuICAgIGlmICghZGVmaW5lZChwcmVsb2FkRmxpZ2h0Q2FtZXJhKSkge1xuICAgICAgcHJlbG9hZEZsaWdodENhbWVyYSA9IENhbWVyYS5jbG9uZSh0aGlzKTtcbiAgICB9XG4gICAgcHJlbG9hZEZsaWdodENhbWVyYS5zZXRWaWV3KHtcbiAgICAgIGRlc3RpbmF0aW9uOiBkZXN0aW5hdGlvbixcbiAgICAgIG9yaWVudGF0aW9uOiBvcmllbnRhdGlvbixcbiAgICB9KTtcblxuICAgIHRoaXMuX3NjZW5lLnByZWxvYWRGbGlnaHRDdWxsaW5nVm9sdW1lID0gcHJlbG9hZEZsaWdodENhbWVyYS5mcnVzdHVtLmNvbXB1dGVDdWxsaW5nVm9sdW1lKFxuICAgICAgcHJlbG9hZEZsaWdodENhbWVyYS5wb3NpdGlvbldDLFxuICAgICAgcHJlbG9hZEZsaWdodENhbWVyYS5kaXJlY3Rpb25XQyxcbiAgICAgIHByZWxvYWRGbGlnaHRDYW1lcmEudXBXQ1xuICAgICk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGRpc3RhbmNlVG9Cb3VuZGluZ1NwaGVyZTNEKGNhbWVyYSwgcmFkaXVzKSB7XG4gIHZhciBmcnVzdHVtID0gY2FtZXJhLmZydXN0dW07XG4gIHZhciB0YW5QaGkgPSBNYXRoLnRhbihmcnVzdHVtLmZvdnkgKiAwLjUpO1xuICB2YXIgdGFuVGhldGEgPSBmcnVzdHVtLmFzcGVjdFJhdGlvICogdGFuUGhpO1xuICByZXR1cm4gTWF0aC5tYXgocmFkaXVzIC8gdGFuVGhldGEsIHJhZGl1cyAvIHRhblBoaSk7XG59XG5cbmZ1bmN0aW9uIGRpc3RhbmNlVG9Cb3VuZGluZ1NwaGVyZTJEKGNhbWVyYSwgcmFkaXVzKSB7XG4gIHZhciBmcnVzdHVtID0gY2FtZXJhLmZydXN0dW07XG4gIGlmIChkZWZpbmVkKGZydXN0dW0uX29mZkNlbnRlckZydXN0dW0pKSB7XG4gICAgZnJ1c3R1bSA9IGZydXN0dW0uX29mZkNlbnRlckZydXN0dW07XG4gIH1cblxuICB2YXIgcmlnaHQsIHRvcDtcbiAgdmFyIHJhdGlvID0gZnJ1c3R1bS5yaWdodCAvIGZydXN0dW0udG9wO1xuICB2YXIgaGVpZ2h0UmF0aW8gPSByYWRpdXMgKiByYXRpbztcbiAgaWYgKHJhZGl1cyA+IGhlaWdodFJhdGlvKSB7XG4gICAgcmlnaHQgPSByYWRpdXM7XG4gICAgdG9wID0gcmlnaHQgLyByYXRpbztcbiAgfSBlbHNlIHtcbiAgICB0b3AgPSByYWRpdXM7XG4gICAgcmlnaHQgPSBoZWlnaHRSYXRpbztcbiAgfVxuXG4gIHJldHVybiBNYXRoLm1heChyaWdodCwgdG9wKSAqIDEuNTtcbn1cblxudmFyIE1JTklNVU1fWk9PTSA9IDEwMC4wO1xuXG5mdW5jdGlvbiBhZGp1c3RCb3VuZGluZ1NwaGVyZU9mZnNldChjYW1lcmEsIGJvdW5kaW5nU3BoZXJlLCBvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gSGVhZGluZ1BpdGNoUmFuZ2UuY2xvbmUoXG4gICAgZGVmaW5lZChvZmZzZXQpID8gb2Zmc2V0IDogQ2FtZXJhLkRFRkFVTFRfT0ZGU0VUXG4gICk7XG5cbiAgdmFyIG1pbmltdW1ab29tID1cbiAgICBjYW1lcmEuX3NjZW5lLnNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlci5taW5pbXVtWm9vbURpc3RhbmNlO1xuICB2YXIgbWF4aW11bVpvb20gPVxuICAgIGNhbWVyYS5fc2NlbmUuc2NyZWVuU3BhY2VDYW1lcmFDb250cm9sbGVyLm1heGltdW1ab29tRGlzdGFuY2U7XG4gIHZhciByYW5nZSA9IG9mZnNldC5yYW5nZTtcbiAgaWYgKCFkZWZpbmVkKHJhbmdlKSB8fCByYW5nZSA9PT0gMC4wKSB7XG4gICAgdmFyIHJhZGl1cyA9IGJvdW5kaW5nU3BoZXJlLnJhZGl1cztcbiAgICBpZiAocmFkaXVzID09PSAwLjApIHtcbiAgICAgIG9mZnNldC5yYW5nZSA9IE1JTklNVU1fWk9PTTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgY2FtZXJhLmZydXN0dW0gaW5zdGFuY2VvZiBPcnRob2dyYXBoaWNGcnVzdHVtIHx8XG4gICAgICBjYW1lcmEuX21vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTJEXG4gICAgKSB7XG4gICAgICBvZmZzZXQucmFuZ2UgPSBkaXN0YW5jZVRvQm91bmRpbmdTcGhlcmUyRChjYW1lcmEsIHJhZGl1cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldC5yYW5nZSA9IGRpc3RhbmNlVG9Cb3VuZGluZ1NwaGVyZTNEKGNhbWVyYSwgcmFkaXVzKTtcbiAgICB9XG4gICAgb2Zmc2V0LnJhbmdlID0gQ2VzaXVtTWF0aC5jbGFtcChvZmZzZXQucmFuZ2UsIG1pbmltdW1ab29tLCBtYXhpbXVtWm9vbSk7XG4gIH1cblxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGNhbWVyYSBzbyB0aGF0IHRoZSBjdXJyZW50IHZpZXcgY29udGFpbnMgdGhlIHByb3ZpZGVkIGJvdW5kaW5nIHNwaGVyZS5cbiAqXG4gKiA8cD5UaGUgb2Zmc2V0IGlzIGhlYWRpbmcvcGl0Y2gvcmFuZ2UgaW4gdGhlIGxvY2FsIGVhc3Qtbm9ydGgtdXAgcmVmZXJlbmNlIGZyYW1lIGNlbnRlcmVkIGF0IHRoZSBjZW50ZXIgb2YgdGhlIGJvdW5kaW5nIHNwaGVyZS5cbiAqIFRoZSBoZWFkaW5nIGFuZCB0aGUgcGl0Y2ggYW5nbGVzIGFyZSBkZWZpbmVkIGluIHRoZSBsb2NhbCBlYXN0LW5vcnRoLXVwIHJlZmVyZW5jZSBmcmFtZS5cbiAqIFRoZSBoZWFkaW5nIGlzIHRoZSBhbmdsZSBmcm9tIHkgYXhpcyBhbmQgaW5jcmVhc2luZyB0b3dhcmRzIHRoZSB4IGF4aXMuIFBpdGNoIGlzIHRoZSByb3RhdGlvbiBmcm9tIHRoZSB4eS1wbGFuZS4gUG9zaXRpdmUgcGl0Y2hcbiAqIGFuZ2xlcyBhcmUgYmVsb3cgdGhlIHBsYW5lLiBOZWdhdGl2ZSBwaXRjaCBhbmdsZXMgYXJlIGFib3ZlIHRoZSBwbGFuZS4gVGhlIHJhbmdlIGlzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIuIElmIHRoZSByYW5nZSBpc1xuICogemVybywgYSByYW5nZSB3aWxsIGJlIGNvbXB1dGVkIHN1Y2ggdGhhdCB0aGUgd2hvbGUgYm91bmRpbmcgc3BoZXJlIGlzIHZpc2libGUuPC9wPlxuICpcbiAqIDxwPkluIDJELCB0aGVyZSBtdXN0IGJlIGEgdG9wIGRvd24gdmlldy4gVGhlIGNhbWVyYSB3aWxsIGJlIHBsYWNlZCBhYm92ZSB0aGUgdGFyZ2V0IGxvb2tpbmcgZG93bi4gVGhlIGhlaWdodCBhYm92ZSB0aGVcbiAqIHRhcmdldCB3aWxsIGJlIHRoZSByYW5nZS4gVGhlIGhlYWRpbmcgd2lsbCBiZSBkZXRlcm1pbmVkIGZyb20gdGhlIG9mZnNldC4gSWYgdGhlIGhlYWRpbmcgY2Fubm90IGJlXG4gKiBkZXRlcm1pbmVkIGZyb20gdGhlIG9mZnNldCwgdGhlIGhlYWRpbmcgd2lsbCBiZSBub3J0aC48L3A+XG4gKlxuICogQHBhcmFtIHtCb3VuZGluZ1NwaGVyZX0gYm91bmRpbmdTcGhlcmUgVGhlIGJvdW5kaW5nIHNwaGVyZSB0byB2aWV3LCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7SGVhZGluZ1BpdGNoUmFuZ2V9IFtvZmZzZXRdIFRoZSBvZmZzZXQgZnJvbSB0aGUgdGFyZ2V0IGluIHRoZSBsb2NhbCBlYXN0LW5vcnRoLXVwIHJlZmVyZW5jZSBmcmFtZSBjZW50ZXJlZCBhdCB0aGUgdGFyZ2V0LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSB2aWV3Qm91bmRpbmdTcGhlcmUgaXMgbm90IHN1cHBvcnRlZCB3aGlsZSBtb3JwaGluZy5cbiAqL1xuQ2FtZXJhLnByb3RvdHlwZS52aWV3Qm91bmRpbmdTcGhlcmUgPSBmdW5jdGlvbiAoYm91bmRpbmdTcGhlcmUsIG9mZnNldCkge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQoYm91bmRpbmdTcGhlcmUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiYm91bmRpbmdTcGhlcmUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG5cbiAgaWYgKHRoaXMuX21vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwidmlld0JvdW5kaW5nU3BoZXJlIGlzIG5vdCBzdXBwb3J0ZWQgd2hpbGUgbW9ycGhpbmcuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIG9mZnNldCA9IGFkanVzdEJvdW5kaW5nU3BoZXJlT2Zmc2V0KHRoaXMsIGJvdW5kaW5nU3BoZXJlLCBvZmZzZXQpO1xuICB0aGlzLmxvb2tBdChib3VuZGluZ1NwaGVyZS5jZW50ZXIsIG9mZnNldCk7XG59O1xuXG52YXIgc2NyYXRjaGZseVRvQm91bmRpbmdTcGhlcmVUcmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpO1xudmFyIHNjcmF0Y2hmbHlUb0JvdW5kaW5nU3BoZXJlRGVzdGluYXRpb24gPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hmbHlUb0JvdW5kaW5nU3BoZXJlRGlyZWN0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoZmx5VG9Cb3VuZGluZ1NwaGVyZVVwID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoZmx5VG9Cb3VuZGluZ1NwaGVyZVJpZ2h0ID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBzY3JhdGNoRmx5VG9Cb3VuZGluZ1NwaGVyZUNhcnQ0ID0gbmV3IENhcnRlc2lhbjQoKTtcbnZhciBzY3JhdGNoRmx5VG9Cb3VuZGluZ1NwaGVyZVF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xudmFyIHNjcmF0Y2hGbHlUb0JvdW5kaW5nU3BoZXJlTWF0cml4MyA9IG5ldyBNYXRyaXgzKCk7XG5cbi8qKlxuICogRmxpZXMgdGhlIGNhbWVyYSB0byBhIGxvY2F0aW9uIHdoZXJlIHRoZSBjdXJyZW50IHZpZXcgY29udGFpbnMgdGhlIHByb3ZpZGVkIGJvdW5kaW5nIHNwaGVyZS5cbiAqXG4gKiA8cD4gVGhlIG9mZnNldCBpcyBoZWFkaW5nL3BpdGNoL3JhbmdlIGluIHRoZSBsb2NhbCBlYXN0LW5vcnRoLXVwIHJlZmVyZW5jZSBmcmFtZSBjZW50ZXJlZCBhdCB0aGUgY2VudGVyIG9mIHRoZSBib3VuZGluZyBzcGhlcmUuXG4gKiBUaGUgaGVhZGluZyBhbmQgdGhlIHBpdGNoIGFuZ2xlcyBhcmUgZGVmaW5lZCBpbiB0aGUgbG9jYWwgZWFzdC1ub3J0aC11cCByZWZlcmVuY2UgZnJhbWUuXG4gKiBUaGUgaGVhZGluZyBpcyB0aGUgYW5nbGUgZnJvbSB5IGF4aXMgYW5kIGluY3JlYXNpbmcgdG93YXJkcyB0aGUgeCBheGlzLiBQaXRjaCBpcyB0aGUgcm90YXRpb24gZnJvbSB0aGUgeHktcGxhbmUuIFBvc2l0aXZlIHBpdGNoXG4gKiBhbmdsZXMgYXJlIGJlbG93IHRoZSBwbGFuZS4gTmVnYXRpdmUgcGl0Y2ggYW5nbGVzIGFyZSBhYm92ZSB0aGUgcGxhbmUuIFRoZSByYW5nZSBpcyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyLiBJZiB0aGUgcmFuZ2UgaXNcbiAqIHplcm8sIGEgcmFuZ2Ugd2lsbCBiZSBjb21wdXRlZCBzdWNoIHRoYXQgdGhlIHdob2xlIGJvdW5kaW5nIHNwaGVyZSBpcyB2aXNpYmxlLjwvcD5cbiAqXG4gKiA8cD5JbiAyRCBhbmQgQ29sdW1idXMgVmlldywgdGhlcmUgbXVzdCBiZSBhIHRvcCBkb3duIHZpZXcuIFRoZSBjYW1lcmEgd2lsbCBiZSBwbGFjZWQgYWJvdmUgdGhlIHRhcmdldCBsb29raW5nIGRvd24uIFRoZSBoZWlnaHQgYWJvdmUgdGhlXG4gKiB0YXJnZXQgd2lsbCBiZSB0aGUgcmFuZ2UuIFRoZSBoZWFkaW5nIHdpbGwgYmUgYWxpZ25lZCB0byBsb2NhbCBub3J0aC48L3A+XG4gKlxuICogQHBhcmFtIHtCb3VuZGluZ1NwaGVyZX0gYm91bmRpbmdTcGhlcmUgVGhlIGJvdW5kaW5nIHNwaGVyZSB0byB2aWV3LCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmR1cmF0aW9uXSBUaGUgZHVyYXRpb24gb2YgdGhlIGZsaWdodCBpbiBzZWNvbmRzLiBJZiBvbWl0dGVkLCBDZXNpdW0gYXR0ZW1wdHMgdG8gY2FsY3VsYXRlIGFuIGlkZWFsIGR1cmF0aW9uIGJhc2VkIG9uIHRoZSBkaXN0YW5jZSB0byBiZSB0cmF2ZWxlZCBieSB0aGUgZmxpZ2h0LlxuICogQHBhcmFtIHtIZWFkaW5nUGl0Y2hSYW5nZX0gW29wdGlvbnMub2Zmc2V0XSBUaGUgb2Zmc2V0IGZyb20gdGhlIHRhcmdldCBpbiB0aGUgbG9jYWwgZWFzdC1ub3J0aC11cCByZWZlcmVuY2UgZnJhbWUgY2VudGVyZWQgYXQgdGhlIHRhcmdldC5cbiAqIEBwYXJhbSB7Q2FtZXJhLkZsaWdodENvbXBsZXRlQ2FsbGJhY2t9IFtvcHRpb25zLmNvbXBsZXRlXSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aGVuIHRoZSBmbGlnaHQgaXMgY29tcGxldGUuXG4gKiBAcGFyYW0ge0NhbWVyYS5GbGlnaHRDYW5jZWxsZWRDYWxsYmFja30gW29wdGlvbnMuY2FuY2VsXSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSBpZiB0aGUgZmxpZ2h0IGlzIGNhbmNlbGxlZC5cbiAqIEBwYXJhbSB7TWF0cml4NH0gW29wdGlvbnMuZW5kVHJhbnNmb3JtXSBUcmFuc2Zvcm0gbWF0cml4IHJlcHJlc2VudGluZyB0aGUgcmVmZXJlbmNlIGZyYW1lIHRoZSBjYW1lcmEgd2lsbCBiZSBpbiB3aGVuIHRoZSBmbGlnaHQgaXMgY29tcGxldGVkLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heGltdW1IZWlnaHRdIFRoZSBtYXhpbXVtIGhlaWdodCBhdCB0aGUgcGVhayBvZiB0aGUgZmxpZ2h0LlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLnBpdGNoQWRqdXN0SGVpZ2h0XSBJZiBjYW1lcmEgZmx5ZXMgaGlnaGVyIHRoYW4gdGhhdCB2YWx1ZSwgYWRqdXN0IHBpdGNoIGR1aXJpbmcgdGhlIGZsaWdodCB0byBsb29rIGRvd24sIGFuZCBrZWVwIEVhcnRoIGluIHZpZXdwb3J0LlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmZseU92ZXJMb25naXR1ZGVdIFRoZXJlIGFyZSBhbHdheXMgdHdvIHdheXMgYmV0d2VlbiAyIHBvaW50cyBvbiBnbG9iZS4gVGhpcyBvcHRpb24gZm9yY2UgY2FtZXJhIHRvIGNob29zZSBmaWdodCBkaXJlY3Rpb24gdG8gZmx5IG92ZXIgdGhhdCBsb25naXR1ZGUuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZmx5T3ZlckxvbmdpdHVkZVdlaWdodF0gRmx5IG92ZXIgdGhlIGxvbiBzcGVjaWZ5ZWQgdmlhIGZseU92ZXJMb25naXR1ZGUgb25seSBpZiB0aGF0IHdheSBpcyBub3QgbG9uZ2VyIHRoYW4gc2hvcnQgd2F5IHRpbWVzIGZseU92ZXJMb25naXR1ZGVXZWlnaHQuXG4gKiBAcGFyYW0ge0Vhc2luZ0Z1bmN0aW9uLkNhbGxiYWNrfSBbb3B0aW9ucy5lYXNpbmdGdW5jdGlvbl0gQ29udHJvbHMgaG93IHRoZSB0aW1lIGlzIGludGVycG9sYXRlZCBvdmVyIHRoZSBkdXJhdGlvbiBvZiB0aGUgZmxpZ2h0LlxuICovXG5DYW1lcmEucHJvdG90eXBlLmZseVRvQm91bmRpbmdTcGhlcmUgPSBmdW5jdGlvbiAoYm91bmRpbmdTcGhlcmUsIG9wdGlvbnMpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKGJvdW5kaW5nU3BoZXJlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImJvdW5kaW5nU3BoZXJlIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgc2NlbmUyRCA9XG4gICAgdGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHwgdGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVc7XG4gIHRoaXMuX3NldFRyYW5zZm9ybShNYXRyaXg0LklERU5USVRZKTtcbiAgdmFyIG9mZnNldCA9IGFkanVzdEJvdW5kaW5nU3BoZXJlT2Zmc2V0KHRoaXMsIGJvdW5kaW5nU3BoZXJlLCBvcHRpb25zLm9mZnNldCk7XG5cbiAgdmFyIHBvc2l0aW9uO1xuICBpZiAoc2NlbmUyRCkge1xuICAgIHBvc2l0aW9uID0gQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKFxuICAgICAgQ2FydGVzaWFuMy5VTklUX1osXG4gICAgICBvZmZzZXQucmFuZ2UsXG4gICAgICBzY3JhdGNoZmx5VG9Cb3VuZGluZ1NwaGVyZURlc3RpbmF0aW9uXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBwb3NpdGlvbiA9IG9mZnNldEZyb21IZWFkaW5nUGl0Y2hSYW5nZShcbiAgICAgIG9mZnNldC5oZWFkaW5nLFxuICAgICAgb2Zmc2V0LnBpdGNoLFxuICAgICAgb2Zmc2V0LnJhbmdlXG4gICAgKTtcbiAgfVxuXG4gIHZhciB0cmFuc2Zvcm0gPSBUcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lKFxuICAgIGJvdW5kaW5nU3BoZXJlLmNlbnRlcixcbiAgICBFbGxpcHNvaWQuV0dTODQsXG4gICAgc2NyYXRjaGZseVRvQm91bmRpbmdTcGhlcmVUcmFuc2Zvcm1cbiAgKTtcbiAgTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQodHJhbnNmb3JtLCBwb3NpdGlvbiwgcG9zaXRpb24pO1xuXG4gIHZhciBkaXJlY3Rpb247XG4gIHZhciB1cDtcblxuICBpZiAoIXNjZW5lMkQpIHtcbiAgICBkaXJlY3Rpb24gPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgICAgYm91bmRpbmdTcGhlcmUuY2VudGVyLFxuICAgICAgcG9zaXRpb24sXG4gICAgICBzY3JhdGNoZmx5VG9Cb3VuZGluZ1NwaGVyZURpcmVjdGlvblxuICAgICk7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUoZGlyZWN0aW9uLCBkaXJlY3Rpb24pO1xuXG4gICAgdXAgPSBNYXRyaXg0Lm11bHRpcGx5QnlQb2ludEFzVmVjdG9yKFxuICAgICAgdHJhbnNmb3JtLFxuICAgICAgQ2FydGVzaWFuMy5VTklUX1osXG4gICAgICBzY3JhdGNoZmx5VG9Cb3VuZGluZ1NwaGVyZVVwXG4gICAgKTtcbiAgICBpZiAoMS4wIC0gTWF0aC5hYnMoQ2FydGVzaWFuMy5kb3QoZGlyZWN0aW9uLCB1cCkpIDwgQ2VzaXVtTWF0aC5FUFNJTE9ONikge1xuICAgICAgdmFyIHJvdGF0ZVF1YXQgPSBRdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUoXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgb2Zmc2V0LmhlYWRpbmcsXG4gICAgICAgIHNjcmF0Y2hGbHlUb0JvdW5kaW5nU3BoZXJlUXVhdGVybmlvblxuICAgICAgKTtcbiAgICAgIHZhciByb3RhdGlvbiA9IE1hdHJpeDMuZnJvbVF1YXRlcm5pb24oXG4gICAgICAgIHJvdGF0ZVF1YXQsXG4gICAgICAgIHNjcmF0Y2hGbHlUb0JvdW5kaW5nU3BoZXJlTWF0cml4M1xuICAgICAgKTtcblxuICAgICAgQ2FydGVzaWFuMy5mcm9tQ2FydGVzaWFuNChcbiAgICAgICAgTWF0cml4NC5nZXRDb2x1bW4odHJhbnNmb3JtLCAxLCBzY3JhdGNoRmx5VG9Cb3VuZGluZ1NwaGVyZUNhcnQ0KSxcbiAgICAgICAgdXBcbiAgICAgICk7XG4gICAgICBNYXRyaXgzLm11bHRpcGx5QnlWZWN0b3Iocm90YXRpb24sIHVwLCB1cCk7XG4gICAgfVxuXG4gICAgdmFyIHJpZ2h0ID0gQ2FydGVzaWFuMy5jcm9zcyhcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIHVwLFxuICAgICAgc2NyYXRjaGZseVRvQm91bmRpbmdTcGhlcmVSaWdodFxuICAgICk7XG4gICAgQ2FydGVzaWFuMy5jcm9zcyhyaWdodCwgZGlyZWN0aW9uLCB1cCk7XG4gICAgQ2FydGVzaWFuMy5ub3JtYWxpemUodXAsIHVwKTtcbiAgfVxuXG4gIHRoaXMuZmx5VG8oe1xuICAgIGRlc3RpbmF0aW9uOiBwb3NpdGlvbixcbiAgICBvcmllbnRhdGlvbjoge1xuICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24sXG4gICAgICB1cDogdXAsXG4gICAgfSxcbiAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcbiAgICBjb21wbGV0ZTogb3B0aW9ucy5jb21wbGV0ZSxcbiAgICBjYW5jZWw6IG9wdGlvbnMuY2FuY2VsLFxuICAgIGVuZFRyYW5zZm9ybTogb3B0aW9ucy5lbmRUcmFuc2Zvcm0sXG4gICAgbWF4aW11bUhlaWdodDogb3B0aW9ucy5tYXhpbXVtSGVpZ2h0LFxuICAgIGVhc2luZ0Z1bmN0aW9uOiBvcHRpb25zLmVhc2luZ0Z1bmN0aW9uLFxuICAgIGZseU92ZXJMb25naXR1ZGU6IG9wdGlvbnMuZmx5T3ZlckxvbmdpdHVkZSxcbiAgICBmbHlPdmVyTG9uZ2l0dWRlV2VpZ2h0OiBvcHRpb25zLmZseU92ZXJMb25naXR1ZGVXZWlnaHQsXG4gICAgcGl0Y2hBZGp1c3RIZWlnaHQ6IG9wdGlvbnMucGl0Y2hBZGp1c3RIZWlnaHQsXG4gIH0pO1xufTtcblxudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4zXzEgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4zXzIgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4zXzMgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hDYXJ0ZXNpYW4zXzQgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIGhvcml6b25Qb2ludHMgPSBbXG4gIG5ldyBDYXJ0ZXNpYW4zKCksXG4gIG5ldyBDYXJ0ZXNpYW4zKCksXG4gIG5ldyBDYXJ0ZXNpYW4zKCksXG4gIG5ldyBDYXJ0ZXNpYW4zKCksXG5dO1xuXG5mdW5jdGlvbiBjb21wdXRlSG9yaXpvblF1YWQoY2FtZXJhLCBlbGxpcHNvaWQpIHtcbiAgdmFyIHJhZGlpID0gZWxsaXBzb2lkLnJhZGlpO1xuICB2YXIgcCA9IGNhbWVyYS5wb3NpdGlvbldDO1xuXG4gIC8vIEZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgcG9zaXRpb24gaW4gdGhlIHNjYWxlZCBzcGFjZSBvZiB0aGUgZWxsaXBzb2lkLlxuICB2YXIgcSA9IENhcnRlc2lhbjMubXVsdGlwbHlDb21wb25lbnRzKFxuICAgIGVsbGlwc29pZC5vbmVPdmVyUmFkaWksXG4gICAgcCxcbiAgICBzY3JhdGNoQ2FydGVzaWFuM18xXG4gICk7XG5cbiAgdmFyIHFNYWduaXR1ZGUgPSBDYXJ0ZXNpYW4zLm1hZ25pdHVkZShxKTtcbiAgdmFyIHFVbml0ID0gQ2FydGVzaWFuMy5ub3JtYWxpemUocSwgc2NyYXRjaENhcnRlc2lhbjNfMik7XG5cbiAgLy8gRGV0ZXJtaW5lIHRoZSBlYXN0IGFuZCBub3J0aCBkaXJlY3Rpb25zIGF0IHEuXG4gIHZhciBlVW5pdDtcbiAgdmFyIG5Vbml0O1xuICBpZiAoXG4gICAgQ2FydGVzaWFuMy5lcXVhbHNFcHNpbG9uKHFVbml0LCBDYXJ0ZXNpYW4zLlVOSVRfWiwgQ2VzaXVtTWF0aC5FUFNJTE9OMTApXG4gICkge1xuICAgIGVVbml0ID0gbmV3IENhcnRlc2lhbjMoMCwgMSwgMCk7XG4gICAgblVuaXQgPSBuZXcgQ2FydGVzaWFuMygwLCAwLCAxKTtcbiAgfSBlbHNlIHtcbiAgICBlVW5pdCA9IENhcnRlc2lhbjMubm9ybWFsaXplKFxuICAgICAgQ2FydGVzaWFuMy5jcm9zcyhDYXJ0ZXNpYW4zLlVOSVRfWiwgcVVuaXQsIHNjcmF0Y2hDYXJ0ZXNpYW4zXzMpLFxuICAgICAgc2NyYXRjaENhcnRlc2lhbjNfM1xuICAgICk7XG4gICAgblVuaXQgPSBDYXJ0ZXNpYW4zLm5vcm1hbGl6ZShcbiAgICAgIENhcnRlc2lhbjMuY3Jvc3MocVVuaXQsIGVVbml0LCBzY3JhdGNoQ2FydGVzaWFuM180KSxcbiAgICAgIHNjcmF0Y2hDYXJ0ZXNpYW4zXzRcbiAgICApO1xuICB9XG5cbiAgLy8gRGV0ZXJtaW5lIHRoZSByYWRpdXMgb2YgdGhlICdsaW1iJyBvZiB0aGUgZWxsaXBzb2lkLlxuICB2YXIgd01hZ25pdHVkZSA9IE1hdGguc3FydChDYXJ0ZXNpYW4zLm1hZ25pdHVkZVNxdWFyZWQocSkgLSAxLjApO1xuXG4gIC8vIENvbXB1dGUgdGhlIGNlbnRlciBhbmQgb2Zmc2V0cy5cbiAgdmFyIGNlbnRlciA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICBxVW5pdCxcbiAgICAxLjAgLyBxTWFnbml0dWRlLFxuICAgIHNjcmF0Y2hDYXJ0ZXNpYW4zXzFcbiAgKTtcbiAgdmFyIHNjYWxhciA9IHdNYWduaXR1ZGUgLyBxTWFnbml0dWRlO1xuICB2YXIgZWFzdE9mZnNldCA9IENhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihcbiAgICBlVW5pdCxcbiAgICBzY2FsYXIsXG4gICAgc2NyYXRjaENhcnRlc2lhbjNfMlxuICApO1xuICB2YXIgbm9ydGhPZmZzZXQgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoXG4gICAgblVuaXQsXG4gICAgc2NhbGFyLFxuICAgIHNjcmF0Y2hDYXJ0ZXNpYW4zXzNcbiAgKTtcblxuICAvLyBBIGNvbnNlcnZhdGl2ZSBtZWFzdXJlIGZvciB0aGUgbG9uZ2l0dWRlcyB3b3VsZCBiZSB0byB1c2UgdGhlIG1pbi9tYXggbG9uZ2l0dWRlcyBvZiB0aGUgYm91bmRpbmcgZnJ1c3R1bS5cbiAgdmFyIHVwcGVyTGVmdCA9IENhcnRlc2lhbjMuYWRkKGNlbnRlciwgbm9ydGhPZmZzZXQsIGhvcml6b25Qb2ludHNbMF0pO1xuICBDYXJ0ZXNpYW4zLnN1YnRyYWN0KHVwcGVyTGVmdCwgZWFzdE9mZnNldCwgdXBwZXJMZWZ0KTtcbiAgQ2FydGVzaWFuMy5tdWx0aXBseUNvbXBvbmVudHMocmFkaWksIHVwcGVyTGVmdCwgdXBwZXJMZWZ0KTtcblxuICB2YXIgbG93ZXJMZWZ0ID0gQ2FydGVzaWFuMy5zdWJ0cmFjdChjZW50ZXIsIG5vcnRoT2Zmc2V0LCBob3Jpem9uUG9pbnRzWzFdKTtcbiAgQ2FydGVzaWFuMy5zdWJ0cmFjdChsb3dlckxlZnQsIGVhc3RPZmZzZXQsIGxvd2VyTGVmdCk7XG4gIENhcnRlc2lhbjMubXVsdGlwbHlDb21wb25lbnRzKHJhZGlpLCBsb3dlckxlZnQsIGxvd2VyTGVmdCk7XG5cbiAgdmFyIGxvd2VyUmlnaHQgPSBDYXJ0ZXNpYW4zLnN1YnRyYWN0KGNlbnRlciwgbm9ydGhPZmZzZXQsIGhvcml6b25Qb2ludHNbMl0pO1xuICBDYXJ0ZXNpYW4zLmFkZChsb3dlclJpZ2h0LCBlYXN0T2Zmc2V0LCBsb3dlclJpZ2h0KTtcbiAgQ2FydGVzaWFuMy5tdWx0aXBseUNvbXBvbmVudHMocmFkaWksIGxvd2VyUmlnaHQsIGxvd2VyUmlnaHQpO1xuXG4gIHZhciB1cHBlclJpZ2h0ID0gQ2FydGVzaWFuMy5hZGQoY2VudGVyLCBub3J0aE9mZnNldCwgaG9yaXpvblBvaW50c1szXSk7XG4gIENhcnRlc2lhbjMuYWRkKHVwcGVyUmlnaHQsIGVhc3RPZmZzZXQsIHVwcGVyUmlnaHQpO1xuICBDYXJ0ZXNpYW4zLm11bHRpcGx5Q29tcG9uZW50cyhyYWRpaSwgdXBwZXJSaWdodCwgdXBwZXJSaWdodCk7XG5cbiAgcmV0dXJuIGhvcml6b25Qb2ludHM7XG59XG5cbnZhciBzY3JhdGNoUGlja0NhcnRlc2lhbjIgPSBuZXcgQ2FydGVzaWFuMigpO1xudmFyIHNjcmF0Y2hSZWN0Q2FydGVzaWFuID0gbmV3IENhcnRlc2lhbjMoKTtcbnZhciBjYXJ0b0FycmF5ID0gW1xuICBuZXcgQ2FydG9ncmFwaGljKCksXG4gIG5ldyBDYXJ0b2dyYXBoaWMoKSxcbiAgbmV3IENhcnRvZ3JhcGhpYygpLFxuICBuZXcgQ2FydG9ncmFwaGljKCksXG5dO1xuZnVuY3Rpb24gYWRkVG9SZXN1bHQoeCwgeSwgaW5kZXgsIGNhbWVyYSwgZWxsaXBzb2lkLCBjb21wdXRlZEhvcml6b25RdWFkKSB7XG4gIHNjcmF0Y2hQaWNrQ2FydGVzaWFuMi54ID0geDtcbiAgc2NyYXRjaFBpY2tDYXJ0ZXNpYW4yLnkgPSB5O1xuICB2YXIgciA9IGNhbWVyYS5waWNrRWxsaXBzb2lkKFxuICAgIHNjcmF0Y2hQaWNrQ2FydGVzaWFuMixcbiAgICBlbGxpcHNvaWQsXG4gICAgc2NyYXRjaFJlY3RDYXJ0ZXNpYW5cbiAgKTtcbiAgaWYgKGRlZmluZWQocikpIHtcbiAgICBjYXJ0b0FycmF5W2luZGV4XSA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhyLCBjYXJ0b0FycmF5W2luZGV4XSk7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgY2FydG9BcnJheVtpbmRleF0gPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgY29tcHV0ZWRIb3Jpem9uUXVhZFtpbmRleF0sXG4gICAgY2FydG9BcnJheVtpbmRleF1cbiAgKTtcbiAgcmV0dXJuIDA7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBhcHByb3hpbWF0ZSB2aXNpYmxlIHJlY3RhbmdsZSBvbiB0aGUgZWxsaXBzb2lkLlxuICpcbiAqIEBwYXJhbSB7RWxsaXBzb2lkfSBbZWxsaXBzb2lkPUVsbGlwc29pZC5XR1M4NF0gVGhlIGVsbGlwc29pZCB0aGF0IHlvdSB3YW50IHRvIGtub3cgdGhlIHZpc2libGUgcmVnaW9uLlxuICogQHBhcmFtIHtSZWN0YW5nbGV9IFtyZXN1bHRdIFRoZSByZWN0YW5nbGUgaW4gd2hpY2ggdG8gc3RvcmUgdGhlIHJlc3VsdFxuICpcbiAqIEByZXR1cm5zIHtSZWN0YW5nbGV8dW5kZWZpbmVkfSBUaGUgdmlzaWJsZSByZWN0YW5nbGUgb3IgdW5kZWZpbmVkIGlmIHRoZSBlbGxpcHNvaWQgaXNuJ3QgdmlzaWJsZSBhdCBhbGwuXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuY29tcHV0ZVZpZXdSZWN0YW5nbGUgPSBmdW5jdGlvbiAoZWxsaXBzb2lkLCByZXN1bHQpIHtcbiAgZWxsaXBzb2lkID0gZGVmYXVsdFZhbHVlKGVsbGlwc29pZCwgRWxsaXBzb2lkLldHUzg0KTtcbiAgdmFyIGN1bGxpbmdWb2x1bWUgPSB0aGlzLmZydXN0dW0uY29tcHV0ZUN1bGxpbmdWb2x1bWUoXG4gICAgdGhpcy5wb3NpdGlvbldDLFxuICAgIHRoaXMuZGlyZWN0aW9uV0MsXG4gICAgdGhpcy51cFdDXG4gICk7XG4gIHZhciBib3VuZGluZ1NwaGVyZSA9IG5ldyBCb3VuZGluZ1NwaGVyZShcbiAgICBDYXJ0ZXNpYW4zLlpFUk8sXG4gICAgZWxsaXBzb2lkLm1heGltdW1SYWRpdXNcbiAgKTtcbiAgdmFyIHZpc2liaWxpdHkgPSBjdWxsaW5nVm9sdW1lLmNvbXB1dGVWaXNpYmlsaXR5KGJvdW5kaW5nU3BoZXJlKTtcbiAgaWYgKHZpc2liaWxpdHkgPT09IEludGVyc2VjdC5PVVRTSURFKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBjYW52YXMgPSB0aGlzLl9zY2VuZS5jYW52YXM7XG4gIHZhciB3aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XG5cbiAgdmFyIHN1Y2Nlc3NmdWxQaWNrQ291bnQgPSAwO1xuXG4gIHZhciBjb21wdXRlZEhvcml6b25RdWFkID0gY29tcHV0ZUhvcml6b25RdWFkKHRoaXMsIGVsbGlwc29pZCk7XG5cbiAgc3VjY2Vzc2Z1bFBpY2tDb3VudCArPSBhZGRUb1Jlc3VsdChcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICB0aGlzLFxuICAgIGVsbGlwc29pZCxcbiAgICBjb21wdXRlZEhvcml6b25RdWFkXG4gICk7XG4gIHN1Y2Nlc3NmdWxQaWNrQ291bnQgKz0gYWRkVG9SZXN1bHQoXG4gICAgMCxcbiAgICBoZWlnaHQsXG4gICAgMSxcbiAgICB0aGlzLFxuICAgIGVsbGlwc29pZCxcbiAgICBjb21wdXRlZEhvcml6b25RdWFkXG4gICk7XG4gIHN1Y2Nlc3NmdWxQaWNrQ291bnQgKz0gYWRkVG9SZXN1bHQoXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIDIsXG4gICAgdGhpcyxcbiAgICBlbGxpcHNvaWQsXG4gICAgY29tcHV0ZWRIb3Jpem9uUXVhZFxuICApO1xuICBzdWNjZXNzZnVsUGlja0NvdW50ICs9IGFkZFRvUmVzdWx0KFxuICAgIHdpZHRoLFxuICAgIDAsXG4gICAgMyxcbiAgICB0aGlzLFxuICAgIGVsbGlwc29pZCxcbiAgICBjb21wdXRlZEhvcml6b25RdWFkXG4gICk7XG5cbiAgaWYgKHN1Y2Nlc3NmdWxQaWNrQ291bnQgPCAyKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBzcGFjZSBub24tZ2xvYmUgaW4gMyBvciA0IGNvcm5lcnMgdGhlbiByZXR1cm4gdGhlIHdob2xlIGdsb2JlXG4gICAgcmV0dXJuIFJlY3RhbmdsZS5NQVhfVkFMVUU7XG4gIH1cblxuICByZXN1bHQgPSBSZWN0YW5nbGUuZnJvbUNhcnRvZ3JhcGhpY0FycmF5KGNhcnRvQXJyYXksIHJlc3VsdCk7XG5cbiAgLy8gRGV0ZWN0IGlmIHdlIGdvIG92ZXIgdGhlIHBvbGVzXG4gIHZhciBkaXN0YW5jZSA9IDA7XG4gIHZhciBsYXN0TG9uID0gY2FydG9BcnJheVszXS5sb25naXR1ZGU7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgKytpKSB7XG4gICAgdmFyIGxvbiA9IGNhcnRvQXJyYXlbaV0ubG9uZ2l0dWRlO1xuICAgIHZhciBkaWZmID0gTWF0aC5hYnMobG9uIC0gbGFzdExvbik7XG4gICAgaWYgKGRpZmYgPiBDZXNpdW1NYXRoLlBJKSB7XG4gICAgICAvLyBDcm9zc2VkIHRoZSBkYXRlbGluZVxuICAgICAgZGlzdGFuY2UgKz0gQ2VzaXVtTWF0aC5UV09fUEkgLSBkaWZmO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXN0YW5jZSArPSBkaWZmO1xuICAgIH1cblxuICAgIGxhc3RMb24gPSBsb247XG4gIH1cblxuICAvLyBXZSBhcmUgb3ZlciBvbmUgb2YgdGhlIHBvbGVzIHNvIGFkanVzdCB0aGUgcmVjdGFuZ2xlIGFjY29yZGluZ2x5XG4gIGlmIChcbiAgICBDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oXG4gICAgICBNYXRoLmFicyhkaXN0YW5jZSksXG4gICAgICBDZXNpdW1NYXRoLlRXT19QSSxcbiAgICAgIENlc2l1bU1hdGguRVBTSUxPTjlcbiAgICApXG4gICkge1xuICAgIHJlc3VsdC53ZXN0ID0gLUNlc2l1bU1hdGguUEk7XG4gICAgcmVzdWx0LmVhc3QgPSBDZXNpdW1NYXRoLlBJO1xuICAgIGlmIChjYXJ0b0FycmF5WzBdLmxhdGl0dWRlID49IDAuMCkge1xuICAgICAgcmVzdWx0Lm5vcnRoID0gQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTztcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnNvdXRoID0gLUNlc2l1bU1hdGguUElfT1ZFUl9UV087XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogU3dpdGNoZXMgdGhlIGZydXN0dW0vcHJvamVjdGlvbiB0byBwZXJzcGVjdGl2ZS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGEgbm8tb3AgaW4gMkQgd2hpY2ggbXVzdCBhbHdheXMgYmUgb3J0aG9ncmFwaGljLlxuICovXG5DYW1lcmEucHJvdG90eXBlLnN3aXRjaFRvUGVyc3BlY3RpdmVGcnVzdHVtID0gZnVuY3Rpb24gKCkge1xuICBpZiAoXG4gICAgdGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHxcbiAgICB0aGlzLmZydXN0dW0gaW5zdGFuY2VvZiBQZXJzcGVjdGl2ZUZydXN0dW1cbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gIHRoaXMuZnJ1c3R1bSA9IG5ldyBQZXJzcGVjdGl2ZUZydXN0dW0oKTtcbiAgdGhpcy5mcnVzdHVtLmFzcGVjdFJhdGlvID1cbiAgICBzY2VuZS5kcmF3aW5nQnVmZmVyV2lkdGggLyBzY2VuZS5kcmF3aW5nQnVmZmVySGVpZ2h0O1xuICB0aGlzLmZydXN0dW0uZm92ID0gQ2VzaXVtTWF0aC50b1JhZGlhbnMoNjAuMCk7XG59O1xuXG4vKipcbiAqIFN3aXRjaGVzIHRoZSBmcnVzdHVtL3Byb2plY3Rpb24gdG8gb3J0aG9ncmFwaGljLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYSBuby1vcCBpbiAyRCB3aGljaCB3aWxsIGFsd2F5cyBiZSBvcnRob2dyYXBoaWMuXG4gKi9cbkNhbWVyYS5wcm90b3R5cGUuc3dpdGNoVG9PcnRob2dyYXBoaWNGcnVzdHVtID0gZnVuY3Rpb24gKCkge1xuICBpZiAoXG4gICAgdGhpcy5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHxcbiAgICB0aGlzLmZydXN0dW0gaW5zdGFuY2VvZiBPcnRob2dyYXBoaWNGcnVzdHVtXG4gICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGNoYW5naW5nIHRoZSBmcnVzdHVtIGJlY2F1c2UgaXQgdXNlcyB0aGUgcHJldmlvdXNcbiAgLy8gZnJ1c3R1bSB0byByZWNvbnN0cnVjdCB0aGUgd29ybGQgc3BhY2UgcG9zaXRpb24gZnJvbSB0aGUgZGVwdGggYnVmZmVyLlxuICB2YXIgZnJ1c3R1bVdpZHRoID0gY2FsY3VsYXRlT3J0aG9ncmFwaGljRnJ1c3R1bVdpZHRoKHRoaXMpO1xuXG4gIHZhciBzY2VuZSA9IHRoaXMuX3NjZW5lO1xuICB0aGlzLmZydXN0dW0gPSBuZXcgT3J0aG9ncmFwaGljRnJ1c3R1bSgpO1xuICB0aGlzLmZydXN0dW0uYXNwZWN0UmF0aW8gPVxuICAgIHNjZW5lLmRyYXdpbmdCdWZmZXJXaWR0aCAvIHNjZW5lLmRyYXdpbmdCdWZmZXJIZWlnaHQ7XG4gIHRoaXMuZnJ1c3R1bS53aWR0aCA9IGZydXN0dW1XaWR0aDtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuQ2FtZXJhLmNsb25lID0gZnVuY3Rpb24gKGNhbWVyYSwgcmVzdWx0KSB7XG4gIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgcmVzdWx0ID0gbmV3IENhbWVyYShjYW1lcmEuX3NjZW5lKTtcbiAgfVxuXG4gIENhcnRlc2lhbjMuY2xvbmUoY2FtZXJhLnBvc2l0aW9uLCByZXN1bHQucG9zaXRpb24pO1xuICBDYXJ0ZXNpYW4zLmNsb25lKGNhbWVyYS5kaXJlY3Rpb24sIHJlc3VsdC5kaXJlY3Rpb24pO1xuICBDYXJ0ZXNpYW4zLmNsb25lKGNhbWVyYS51cCwgcmVzdWx0LnVwKTtcbiAgQ2FydGVzaWFuMy5jbG9uZShjYW1lcmEucmlnaHQsIHJlc3VsdC5yaWdodCk7XG4gIE1hdHJpeDQuY2xvbmUoY2FtZXJhLl90cmFuc2Zvcm0sIHJlc3VsdC50cmFuc2Zvcm0pO1xuICByZXN1bHQuX3RyYW5zZm9ybUNoYW5nZWQgPSB0cnVlO1xuICByZXN1bHQuZnJ1c3R1bSA9IGNhbWVyYS5mcnVzdHVtLmNsb25lKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHdpbGwgZXhlY3V0ZSB3aGVuIGEgZmxpZ2h0IGNvbXBsZXRlcy5cbiAqIEBjYWxsYmFjayBDYW1lcmEuRmxpZ2h0Q29tcGxldGVDYWxsYmFja1xuICovXG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHdpbGwgZXhlY3V0ZSB3aGVuIGEgZmxpZ2h0IGlzIGNhbmNlbGxlZC5cbiAqIEBjYWxsYmFjayBDYW1lcmEuRmxpZ2h0Q2FuY2VsbGVkQ2FsbGJhY2tcbiAqL1xuZXhwb3J0IGRlZmF1bHQgQ2FtZXJhO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///70561\n')},90070:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(82982);\n/* harmony import */ var _Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86511);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12572);\n/* harmony import */ var _Core_KeyboardEventModifier_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89232);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99417);\n/* harmony import */ var _Core_ScreenSpaceEventHandler_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(20406);\n/* harmony import */ var _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(35452);\n/* harmony import */ var _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(84321);\n\n\n\n\n\n\n\n\n\n\nfunction getKey(type, modifier) {\n  var key = type;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(modifier)) {\n    key += "+" + modifier;\n  }\n  return key;\n}\n\nfunction clonePinchMovement(pinchMovement, result) {\n  _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n    pinchMovement.distance.startPosition,\n    result.distance.startPosition\n  );\n  _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n    pinchMovement.distance.endPosition,\n    result.distance.endPosition\n  );\n\n  _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n    pinchMovement.angleAndHeight.startPosition,\n    result.angleAndHeight.startPosition\n  );\n  _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n    pinchMovement.angleAndHeight.endPosition,\n    result.angleAndHeight.endPosition\n  );\n}\n\nfunction listenToPinch(aggregator, modifier, canvas) {\n  var key = getKey(_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].PINCH */ .Z.PINCH, modifier);\n\n  var update = aggregator._update;\n  var isDown = aggregator._isDown;\n  var eventStartPosition = aggregator._eventStartPosition;\n  var pressTime = aggregator._pressTime;\n  var releaseTime = aggregator._releaseTime;\n\n  update[key] = true;\n  isDown[key] = false;\n  eventStartPosition[key] = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  var movement = aggregator._movement[key];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(movement)) {\n    movement = aggregator._movement[key] = {};\n  }\n\n  movement.distance = {\n    startPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n    endPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n  };\n  movement.angleAndHeight = {\n    startPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n    endPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n  };\n  movement.prevAngle = 0.0;\n\n  aggregator._eventHandler.setInputAction(\n    function (event) {\n      aggregator._buttonsDown++;\n      isDown[key] = true;\n      pressTime[key] = new Date();\n      // Compute center position and store as start point.\n      _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].lerp */ .Z.lerp(\n        event.position1,\n        event.position2,\n        0.5,\n        eventStartPosition[key]\n      );\n    },\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PINCH_START */ .Z.PINCH_START,\n    modifier\n  );\n\n  aggregator._eventHandler.setInputAction(\n    function () {\n      aggregator._buttonsDown = Math.max(aggregator._buttonsDown - 1, 0);\n      isDown[key] = false;\n      releaseTime[key] = new Date();\n    },\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PINCH_END */ .Z.PINCH_END,\n    modifier\n  );\n\n  aggregator._eventHandler.setInputAction(\n    function (mouseMovement) {\n      if (isDown[key]) {\n        // Aggregate several input events into a single animation frame.\n        if (!update[key]) {\n          _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n            mouseMovement.distance.endPosition,\n            movement.distance.endPosition\n          );\n          _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n            mouseMovement.angleAndHeight.endPosition,\n            movement.angleAndHeight.endPosition\n          );\n        } else {\n          clonePinchMovement(mouseMovement, movement);\n          update[key] = false;\n          movement.prevAngle = movement.angleAndHeight.startPosition.x;\n        }\n        // Make sure our aggregation of angles does not "flip" over 360 degrees.\n        var angle = movement.angleAndHeight.endPosition.x;\n        var prevAngle = movement.prevAngle;\n        var TwoPI = Math.PI * 2;\n        while (angle >= prevAngle + Math.PI) {\n          angle -= TwoPI;\n        }\n        while (angle < prevAngle - Math.PI) {\n          angle += TwoPI;\n        }\n        movement.angleAndHeight.endPosition.x =\n          (-angle * canvas.clientWidth) / 12;\n        movement.angleAndHeight.startPosition.x =\n          (-prevAngle * canvas.clientWidth) / 12;\n      }\n    },\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PINCH_MOVE */ .Z.PINCH_MOVE,\n    modifier\n  );\n}\n\nfunction listenToWheel(aggregator, modifier) {\n  var key = getKey(_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WHEEL */ .Z.WHEEL, modifier);\n\n  var update = aggregator._update;\n  update[key] = true;\n\n  var movement = aggregator._movement[key];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(movement)) {\n    movement = aggregator._movement[key] = {};\n  }\n\n  movement.startPosition = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n  movement.endPosition = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  aggregator._eventHandler.setInputAction(\n    function (delta) {\n      // TODO: magic numbers\n      var arcLength = 15.0 * _Core_Math_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].toRadians */ .Z.toRadians(delta);\n      if (!update[key]) {\n        movement.endPosition.y = movement.endPosition.y + arcLength;\n      } else {\n        _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(_Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].ZERO */ .Z.ZERO, movement.startPosition);\n        movement.endPosition.x = 0.0;\n        movement.endPosition.y = arcLength;\n        update[key] = false;\n      }\n    },\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].WHEEL */ .Z.WHEEL,\n    modifier\n  );\n}\n\nfunction listenMouseButtonDownUp(aggregator, modifier, type) {\n  var key = getKey(type, modifier);\n\n  var isDown = aggregator._isDown;\n  var eventStartPosition = aggregator._eventStartPosition;\n  var pressTime = aggregator._pressTime;\n  var releaseTime = aggregator._releaseTime;\n\n  isDown[key] = false;\n  eventStartPosition[key] = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  var lastMovement = aggregator._lastMovement[key];\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(lastMovement)) {\n    lastMovement = aggregator._lastMovement[key] = {\n      startPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n      endPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n      valid: false,\n    };\n  }\n\n  var down;\n  var up;\n  if (type === _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].LEFT_DRAG */ .Z.LEFT_DRAG) {\n    down = _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].LEFT_DOWN */ .Z.LEFT_DOWN;\n    up = _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].LEFT_UP */ .Z.LEFT_UP;\n  } else if (type === _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].RIGHT_DRAG */ .Z.RIGHT_DRAG) {\n    down = _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].RIGHT_DOWN */ .Z.RIGHT_DOWN;\n    up = _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].RIGHT_UP */ .Z.RIGHT_UP;\n  } else if (type === _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MIDDLE_DRAG */ .Z.MIDDLE_DRAG) {\n    down = _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MIDDLE_DOWN */ .Z.MIDDLE_DOWN;\n    up = _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MIDDLE_UP */ .Z.MIDDLE_UP;\n  }\n\n  aggregator._eventHandler.setInputAction(\n    function (event) {\n      aggregator._buttonsDown++;\n      lastMovement.valid = false;\n      isDown[key] = true;\n      pressTime[key] = new Date();\n      _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(event.position, eventStartPosition[key]);\n    },\n    down,\n    modifier\n  );\n\n  aggregator._eventHandler.setInputAction(\n    function () {\n      aggregator._buttonsDown = Math.max(aggregator._buttonsDown - 1, 0);\n      isDown[key] = false;\n      releaseTime[key] = new Date();\n    },\n    up,\n    modifier\n  );\n}\n\nfunction cloneMouseMovement(mouseMovement, result) {\n  _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(mouseMovement.startPosition, result.startPosition);\n  _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(mouseMovement.endPosition, result.endPosition);\n}\n\nfunction listenMouseMove(aggregator, modifier) {\n  var update = aggregator._update;\n  var movement = aggregator._movement;\n  var lastMovement = aggregator._lastMovement;\n  var isDown = aggregator._isDown;\n\n  for (var typeName in _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z) {\n    if (_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].hasOwnProperty */ .Z.hasOwnProperty(typeName)) {\n      var type = _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z[typeName];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n        var key = getKey(type, modifier);\n        update[key] = true;\n\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(aggregator._lastMovement[key])) {\n          aggregator._lastMovement[key] = {\n            startPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n            endPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n            valid: false,\n          };\n        }\n\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(aggregator._movement[key])) {\n          aggregator._movement[key] = {\n            startPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n            endPosition: new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(),\n          };\n        }\n      }\n    }\n  }\n\n  aggregator._eventHandler.setInputAction(\n    function (mouseMovement) {\n      for (var typeName in _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z) {\n        if (_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].hasOwnProperty */ .Z.hasOwnProperty(typeName)) {\n          var type = _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z[typeName];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n            var key = getKey(type, modifier);\n            if (isDown[key]) {\n              if (!update[key]) {\n                _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n                  mouseMovement.endPosition,\n                  movement[key].endPosition\n                );\n              } else {\n                cloneMouseMovement(movement[key], lastMovement[key]);\n                lastMovement[key].valid = true;\n                cloneMouseMovement(mouseMovement, movement[key]);\n                update[key] = false;\n              }\n            }\n          }\n        }\n      }\n\n      _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].clone */ .Z.clone(\n        mouseMovement.endPosition,\n        aggregator._currentMousePosition\n      );\n    },\n    _Core_ScreenSpaceEventType_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MOUSE_MOVE */ .Z.MOUSE_MOVE,\n    modifier\n  );\n}\n\n/**\n * Aggregates input events. For example, suppose the following inputs are received between frames:\n * left mouse button down, mouse move, mouse move, left mouse button up. These events will be aggregated into\n * one event with a start and end position of the mouse.\n *\n * @alias CameraEventAggregator\n * @constructor\n *\n * @param {HTMLCanvasElement} [canvas=document] The element to handle events for.\n *\n * @see ScreenSpaceEventHandler\n */\nfunction CameraEventAggregator(canvas) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(canvas)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("canvas is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  this._eventHandler = new _Core_ScreenSpaceEventHandler_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z(canvas);\n\n  this._update = {};\n  this._movement = {};\n  this._lastMovement = {};\n  this._isDown = {};\n  this._eventStartPosition = {};\n  this._pressTime = {};\n  this._releaseTime = {};\n\n  this._buttonsDown = 0;\n\n  this._currentMousePosition = new _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z();\n\n  listenToWheel(this, undefined);\n  listenToPinch(this, undefined, canvas);\n  listenMouseButtonDownUp(this, undefined, _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].LEFT_DRAG */ .Z.LEFT_DRAG);\n  listenMouseButtonDownUp(this, undefined, _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].RIGHT_DRAG */ .Z.RIGHT_DRAG);\n  listenMouseButtonDownUp(this, undefined, _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MIDDLE_DRAG */ .Z.MIDDLE_DRAG);\n  listenMouseMove(this, undefined);\n\n  for (var modifierName in _Core_KeyboardEventModifier_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z) {\n    if (_Core_KeyboardEventModifier_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].hasOwnProperty */ .Z.hasOwnProperty(modifierName)) {\n      var modifier = _Core_KeyboardEventModifier_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z[modifierName];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(modifier)) {\n        listenToWheel(this, modifier);\n        listenToPinch(this, modifier, canvas);\n        listenMouseButtonDownUp(this, modifier, _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].LEFT_DRAG */ .Z.LEFT_DRAG);\n        listenMouseButtonDownUp(this, modifier, _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].RIGHT_DRAG */ .Z.RIGHT_DRAG);\n        listenMouseButtonDownUp(this, modifier, _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].MIDDLE_DRAG */ .Z.MIDDLE_DRAG);\n        listenMouseMove(this, modifier);\n      }\n    }\n  }\n}\n\nObject.defineProperties(CameraEventAggregator.prototype, {\n  /**\n   * Gets the current mouse position.\n   * @memberof CameraEventAggregator.prototype\n   * @type {Cartesian2}\n   */\n  currentMousePosition: {\n    get: function () {\n      return this._currentMousePosition;\n    },\n  },\n\n  /**\n   * Gets whether any mouse button is down, a touch has started, or the wheel has been moved.\n   * @memberof CameraEventAggregator.prototype\n   * @type {Boolean}\n   */\n  anyButtonDown: {\n    get: function () {\n      var wheelMoved =\n        !this._update[getKey(_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WHEEL */ .Z.WHEEL)] ||\n        !this._update[\n          getKey(_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WHEEL */ .Z.WHEEL, _Core_KeyboardEventModifier_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].SHIFT */ .Z.SHIFT)\n        ] ||\n        !this._update[\n          getKey(_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WHEEL */ .Z.WHEEL, _Core_KeyboardEventModifier_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].CTRL */ .Z.CTRL)\n        ] ||\n        !this._update[getKey(_CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WHEEL */ .Z.WHEEL, _Core_KeyboardEventModifier_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ALT */ .Z.ALT)];\n      return this._buttonsDown > 0 || wheelMoved;\n    },\n  },\n});\n\n/**\n * Gets if a mouse button down or touch has started and has been moved.\n *\n * @param {CameraEventType} type The camera event type.\n * @param {KeyboardEventModifier} [modifier] The keyboard modifier.\n * @returns {Boolean} Returns <code>true</code> if a mouse button down or touch has started and has been moved; otherwise, <code>false</code>\n */\nCameraEventAggregator.prototype.isMoving = function (type, modifier) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("type is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var key = getKey(type, modifier);\n  return !this._update[key];\n};\n\n/**\n * Gets the aggregated start and end position of the current event.\n *\n * @param {CameraEventType} type The camera event type.\n * @param {KeyboardEventModifier} [modifier] The keyboard modifier.\n * @returns {Object} An object with two {@link Cartesian2} properties: <code>startPosition</code> and <code>endPosition</code>.\n */\nCameraEventAggregator.prototype.getMovement = function (type, modifier) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("type is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var key = getKey(type, modifier);\n  var movement = this._movement[key];\n  return movement;\n};\n\n/**\n * Gets the start and end position of the last move event (not the aggregated event).\n *\n * @param {CameraEventType} type The camera event type.\n * @param {KeyboardEventModifier} [modifier] The keyboard modifier.\n * @returns {Object|undefined} An object with two {@link Cartesian2} properties: <code>startPosition</code> and <code>endPosition</code> or <code>undefined</code>.\n */\nCameraEventAggregator.prototype.getLastMovement = function (type, modifier) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("type is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var key = getKey(type, modifier);\n  var lastMovement = this._lastMovement[key];\n  if (lastMovement.valid) {\n    return lastMovement;\n  }\n\n  return undefined;\n};\n\n/**\n * Gets whether the mouse button is down or a touch has started.\n *\n * @param {CameraEventType} type The camera event type.\n * @param {KeyboardEventModifier} [modifier] The keyboard modifier.\n * @returns {Boolean} Whether the mouse button is down or a touch has started.\n */\nCameraEventAggregator.prototype.isButtonDown = function (type, modifier) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("type is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var key = getKey(type, modifier);\n  return this._isDown[key];\n};\n\n/**\n * Gets the mouse position that started the aggregation.\n *\n * @param {CameraEventType} type The camera event type.\n * @param {KeyboardEventModifier} [modifier] The keyboard modifier.\n * @returns {Cartesian2} The mouse position.\n */\nCameraEventAggregator.prototype.getStartMousePosition = function (\n  type,\n  modifier\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("type is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  if (type === _CameraEventType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].WHEEL */ .Z.WHEEL) {\n    return this._currentMousePosition;\n  }\n\n  var key = getKey(type, modifier);\n  return this._eventStartPosition[key];\n};\n\n/**\n * Gets the time the button was pressed or the touch was started.\n *\n * @param {CameraEventType} type The camera event type.\n * @param {KeyboardEventModifier} [modifier] The keyboard modifier.\n * @returns {Date} The time the button was pressed or the touch was started.\n */\nCameraEventAggregator.prototype.getButtonPressTime = function (type, modifier) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("type is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var key = getKey(type, modifier);\n  return this._pressTime[key];\n};\n\n/**\n * Gets the time the button was released or the touch was ended.\n *\n * @param {CameraEventType} type The camera event type.\n * @param {KeyboardEventModifier} [modifier] The keyboard modifier.\n * @returns {Date} The time the button was released or the touch was ended.\n */\nCameraEventAggregator.prototype.getButtonReleaseTime = function (\n  type,\n  modifier\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(type)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z("type is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  var key = getKey(type, modifier);\n  return this._releaseTime[key];\n};\n\n/**\n * Signals that all of the events have been handled and the aggregator should be reset to handle new events.\n */\nCameraEventAggregator.prototype.reset = function () {\n  for (var name in this._update) {\n    if (this._update.hasOwnProperty(name)) {\n      this._update[name] = true;\n    }\n  }\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see CameraEventAggregator#destroy\n */\nCameraEventAggregator.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Removes mouse listeners held by this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * handler = handler && handler.destroy();\n *\n * @see CameraEventAggregator#isDestroyed\n */\nCameraEventAggregator.prototype.destroy = function () {\n  this._eventHandler = this._eventHandler && this._eventHandler.destroy();\n  return (0,_Core_destroyObject_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(this);\n};\n/* harmony default export */ __webpack_exports__["Z"] = (CameraEventAggregator);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsV0FBVyx1QkFBdUI7QUFDbEMsYUFBYSxZQUFZO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8scUVBQU87QUFDZCxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7O0FBRUEsZUFBZSxnRkFBcUI7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsV0FBVyx1QkFBdUI7QUFDbEMsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLE9BQU8scUVBQU87QUFDZCxjQUFjLHdFQUFjO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUJBQWlCO0FBQzVCLFdBQVcsdUJBQXVCO0FBQ2xDLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHFFQUFPO0FBQ2QsY0FBYyx3RUFBYztBQUM1QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBLHdEQUF3RDtBQUN4RCw4Q0FBOEMsc0JBQXNCO0FBQ3BFO0FBQ0EsYUFBYSxTQUFTLGdEQUFnRDtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkVBQWE7QUFDdEI7QUFDQSx5REFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9DYW1lcmFFdmVudEFnZ3JlZ2F0b3IuanM/MjlmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FydGVzaWFuMiBmcm9tIFwiLi4vQ29yZS9DYXJ0ZXNpYW4yLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZGVzdHJveU9iamVjdCBmcm9tIFwiLi4vQ29yZS9kZXN0cm95T2JqZWN0LmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBLZXlib2FyZEV2ZW50TW9kaWZpZXIgZnJvbSBcIi4uL0NvcmUvS2V5Ym9hcmRFdmVudE1vZGlmaWVyLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi4vQ29yZS9NYXRoLmpzXCI7XG5pbXBvcnQgU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIgZnJvbSBcIi4uL0NvcmUvU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIuanNcIjtcbmltcG9ydCBTY3JlZW5TcGFjZUV2ZW50VHlwZSBmcm9tIFwiLi4vQ29yZS9TY3JlZW5TcGFjZUV2ZW50VHlwZS5qc1wiO1xuaW1wb3J0IENhbWVyYUV2ZW50VHlwZSBmcm9tIFwiLi9DYW1lcmFFdmVudFR5cGUuanNcIjtcblxuZnVuY3Rpb24gZ2V0S2V5KHR5cGUsIG1vZGlmaWVyKSB7XG4gIHZhciBrZXkgPSB0eXBlO1xuICBpZiAoZGVmaW5lZChtb2RpZmllcikpIHtcbiAgICBrZXkgKz0gXCIrXCIgKyBtb2RpZmllcjtcbiAgfVxuICByZXR1cm4ga2V5O1xufVxuXG5mdW5jdGlvbiBjbG9uZVBpbmNoTW92ZW1lbnQocGluY2hNb3ZlbWVudCwgcmVzdWx0KSB7XG4gIENhcnRlc2lhbjIuY2xvbmUoXG4gICAgcGluY2hNb3ZlbWVudC5kaXN0YW5jZS5zdGFydFBvc2l0aW9uLFxuICAgIHJlc3VsdC5kaXN0YW5jZS5zdGFydFBvc2l0aW9uXG4gICk7XG4gIENhcnRlc2lhbjIuY2xvbmUoXG4gICAgcGluY2hNb3ZlbWVudC5kaXN0YW5jZS5lbmRQb3NpdGlvbixcbiAgICByZXN1bHQuZGlzdGFuY2UuZW5kUG9zaXRpb25cbiAgKTtcblxuICBDYXJ0ZXNpYW4yLmNsb25lKFxuICAgIHBpbmNoTW92ZW1lbnQuYW5nbGVBbmRIZWlnaHQuc3RhcnRQb3NpdGlvbixcbiAgICByZXN1bHQuYW5nbGVBbmRIZWlnaHQuc3RhcnRQb3NpdGlvblxuICApO1xuICBDYXJ0ZXNpYW4yLmNsb25lKFxuICAgIHBpbmNoTW92ZW1lbnQuYW5nbGVBbmRIZWlnaHQuZW5kUG9zaXRpb24sXG4gICAgcmVzdWx0LmFuZ2xlQW5kSGVpZ2h0LmVuZFBvc2l0aW9uXG4gICk7XG59XG5cbmZ1bmN0aW9uIGxpc3RlblRvUGluY2goYWdncmVnYXRvciwgbW9kaWZpZXIsIGNhbnZhcykge1xuICB2YXIga2V5ID0gZ2V0S2V5KENhbWVyYUV2ZW50VHlwZS5QSU5DSCwgbW9kaWZpZXIpO1xuXG4gIHZhciB1cGRhdGUgPSBhZ2dyZWdhdG9yLl91cGRhdGU7XG4gIHZhciBpc0Rvd24gPSBhZ2dyZWdhdG9yLl9pc0Rvd247XG4gIHZhciBldmVudFN0YXJ0UG9zaXRpb24gPSBhZ2dyZWdhdG9yLl9ldmVudFN0YXJ0UG9zaXRpb247XG4gIHZhciBwcmVzc1RpbWUgPSBhZ2dyZWdhdG9yLl9wcmVzc1RpbWU7XG4gIHZhciByZWxlYXNlVGltZSA9IGFnZ3JlZ2F0b3IuX3JlbGVhc2VUaW1lO1xuXG4gIHVwZGF0ZVtrZXldID0gdHJ1ZTtcbiAgaXNEb3duW2tleV0gPSBmYWxzZTtcbiAgZXZlbnRTdGFydFBvc2l0aW9uW2tleV0gPSBuZXcgQ2FydGVzaWFuMigpO1xuXG4gIHZhciBtb3ZlbWVudCA9IGFnZ3JlZ2F0b3IuX21vdmVtZW50W2tleV07XG4gIGlmICghZGVmaW5lZChtb3ZlbWVudCkpIHtcbiAgICBtb3ZlbWVudCA9IGFnZ3JlZ2F0b3IuX21vdmVtZW50W2tleV0gPSB7fTtcbiAgfVxuXG4gIG1vdmVtZW50LmRpc3RhbmNlID0ge1xuICAgIHN0YXJ0UG9zaXRpb246IG5ldyBDYXJ0ZXNpYW4yKCksXG4gICAgZW5kUG9zaXRpb246IG5ldyBDYXJ0ZXNpYW4yKCksXG4gIH07XG4gIG1vdmVtZW50LmFuZ2xlQW5kSGVpZ2h0ID0ge1xuICAgIHN0YXJ0UG9zaXRpb246IG5ldyBDYXJ0ZXNpYW4yKCksXG4gICAgZW5kUG9zaXRpb246IG5ldyBDYXJ0ZXNpYW4yKCksXG4gIH07XG4gIG1vdmVtZW50LnByZXZBbmdsZSA9IDAuMDtcblxuICBhZ2dyZWdhdG9yLl9ldmVudEhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oXG4gICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBhZ2dyZWdhdG9yLl9idXR0b25zRG93bisrO1xuICAgICAgaXNEb3duW2tleV0gPSB0cnVlO1xuICAgICAgcHJlc3NUaW1lW2tleV0gPSBuZXcgRGF0ZSgpO1xuICAgICAgLy8gQ29tcHV0ZSBjZW50ZXIgcG9zaXRpb24gYW5kIHN0b3JlIGFzIHN0YXJ0IHBvaW50LlxuICAgICAgQ2FydGVzaWFuMi5sZXJwKFxuICAgICAgICBldmVudC5wb3NpdGlvbjEsXG4gICAgICAgIGV2ZW50LnBvc2l0aW9uMixcbiAgICAgICAgMC41LFxuICAgICAgICBldmVudFN0YXJ0UG9zaXRpb25ba2V5XVxuICAgICAgKTtcbiAgICB9LFxuICAgIFNjcmVlblNwYWNlRXZlbnRUeXBlLlBJTkNIX1NUQVJULFxuICAgIG1vZGlmaWVyXG4gICk7XG5cbiAgYWdncmVnYXRvci5fZXZlbnRIYW5kbGVyLnNldElucHV0QWN0aW9uKFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFnZ3JlZ2F0b3IuX2J1dHRvbnNEb3duID0gTWF0aC5tYXgoYWdncmVnYXRvci5fYnV0dG9uc0Rvd24gLSAxLCAwKTtcbiAgICAgIGlzRG93bltrZXldID0gZmFsc2U7XG4gICAgICByZWxlYXNlVGltZVtrZXldID0gbmV3IERhdGUoKTtcbiAgICB9LFxuICAgIFNjcmVlblNwYWNlRXZlbnRUeXBlLlBJTkNIX0VORCxcbiAgICBtb2RpZmllclxuICApO1xuXG4gIGFnZ3JlZ2F0b3IuX2V2ZW50SGFuZGxlci5zZXRJbnB1dEFjdGlvbihcbiAgICBmdW5jdGlvbiAobW91c2VNb3ZlbWVudCkge1xuICAgICAgaWYgKGlzRG93bltrZXldKSB7XG4gICAgICAgIC8vIEFnZ3JlZ2F0ZSBzZXZlcmFsIGlucHV0IGV2ZW50cyBpbnRvIGEgc2luZ2xlIGFuaW1hdGlvbiBmcmFtZS5cbiAgICAgICAgaWYgKCF1cGRhdGVba2V5XSkge1xuICAgICAgICAgIENhcnRlc2lhbjIuY2xvbmUoXG4gICAgICAgICAgICBtb3VzZU1vdmVtZW50LmRpc3RhbmNlLmVuZFBvc2l0aW9uLFxuICAgICAgICAgICAgbW92ZW1lbnQuZGlzdGFuY2UuZW5kUG9zaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIENhcnRlc2lhbjIuY2xvbmUoXG4gICAgICAgICAgICBtb3VzZU1vdmVtZW50LmFuZ2xlQW5kSGVpZ2h0LmVuZFBvc2l0aW9uLFxuICAgICAgICAgICAgbW92ZW1lbnQuYW5nbGVBbmRIZWlnaHQuZW5kUG9zaXRpb25cbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsb25lUGluY2hNb3ZlbWVudChtb3VzZU1vdmVtZW50LCBtb3ZlbWVudCk7XG4gICAgICAgICAgdXBkYXRlW2tleV0gPSBmYWxzZTtcbiAgICAgICAgICBtb3ZlbWVudC5wcmV2QW5nbGUgPSBtb3ZlbWVudC5hbmdsZUFuZEhlaWdodC5zdGFydFBvc2l0aW9uLng7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIG91ciBhZ2dyZWdhdGlvbiBvZiBhbmdsZXMgZG9lcyBub3QgXCJmbGlwXCIgb3ZlciAzNjAgZGVncmVlcy5cbiAgICAgICAgdmFyIGFuZ2xlID0gbW92ZW1lbnQuYW5nbGVBbmRIZWlnaHQuZW5kUG9zaXRpb24ueDtcbiAgICAgICAgdmFyIHByZXZBbmdsZSA9IG1vdmVtZW50LnByZXZBbmdsZTtcbiAgICAgICAgdmFyIFR3b1BJID0gTWF0aC5QSSAqIDI7XG4gICAgICAgIHdoaWxlIChhbmdsZSA+PSBwcmV2QW5nbGUgKyBNYXRoLlBJKSB7XG4gICAgICAgICAgYW5nbGUgLT0gVHdvUEk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGFuZ2xlIDwgcHJldkFuZ2xlIC0gTWF0aC5QSSkge1xuICAgICAgICAgIGFuZ2xlICs9IFR3b1BJO1xuICAgICAgICB9XG4gICAgICAgIG1vdmVtZW50LmFuZ2xlQW5kSGVpZ2h0LmVuZFBvc2l0aW9uLnggPVxuICAgICAgICAgICgtYW5nbGUgKiBjYW52YXMuY2xpZW50V2lkdGgpIC8gMTI7XG4gICAgICAgIG1vdmVtZW50LmFuZ2xlQW5kSGVpZ2h0LnN0YXJ0UG9zaXRpb24ueCA9XG4gICAgICAgICAgKC1wcmV2QW5nbGUgKiBjYW52YXMuY2xpZW50V2lkdGgpIC8gMTI7XG4gICAgICB9XG4gICAgfSxcbiAgICBTY3JlZW5TcGFjZUV2ZW50VHlwZS5QSU5DSF9NT1ZFLFxuICAgIG1vZGlmaWVyXG4gICk7XG59XG5cbmZ1bmN0aW9uIGxpc3RlblRvV2hlZWwoYWdncmVnYXRvciwgbW9kaWZpZXIpIHtcbiAgdmFyIGtleSA9IGdldEtleShDYW1lcmFFdmVudFR5cGUuV0hFRUwsIG1vZGlmaWVyKTtcblxuICB2YXIgdXBkYXRlID0gYWdncmVnYXRvci5fdXBkYXRlO1xuICB1cGRhdGVba2V5XSA9IHRydWU7XG5cbiAgdmFyIG1vdmVtZW50ID0gYWdncmVnYXRvci5fbW92ZW1lbnRba2V5XTtcbiAgaWYgKCFkZWZpbmVkKG1vdmVtZW50KSkge1xuICAgIG1vdmVtZW50ID0gYWdncmVnYXRvci5fbW92ZW1lbnRba2V5XSA9IHt9O1xuICB9XG5cbiAgbW92ZW1lbnQuc3RhcnRQb3NpdGlvbiA9IG5ldyBDYXJ0ZXNpYW4yKCk7XG4gIG1vdmVtZW50LmVuZFBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjIoKTtcblxuICBhZ2dyZWdhdG9yLl9ldmVudEhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oXG4gICAgZnVuY3Rpb24gKGRlbHRhKSB7XG4gICAgICAvLyBUT0RPOiBtYWdpYyBudW1iZXJzXG4gICAgICB2YXIgYXJjTGVuZ3RoID0gMTUuMCAqIENlc2l1bU1hdGgudG9SYWRpYW5zKGRlbHRhKTtcbiAgICAgIGlmICghdXBkYXRlW2tleV0pIHtcbiAgICAgICAgbW92ZW1lbnQuZW5kUG9zaXRpb24ueSA9IG1vdmVtZW50LmVuZFBvc2l0aW9uLnkgKyBhcmNMZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBDYXJ0ZXNpYW4yLmNsb25lKENhcnRlc2lhbjIuWkVSTywgbW92ZW1lbnQuc3RhcnRQb3NpdGlvbik7XG4gICAgICAgIG1vdmVtZW50LmVuZFBvc2l0aW9uLnggPSAwLjA7XG4gICAgICAgIG1vdmVtZW50LmVuZFBvc2l0aW9uLnkgPSBhcmNMZW5ndGg7XG4gICAgICAgIHVwZGF0ZVtrZXldID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBTY3JlZW5TcGFjZUV2ZW50VHlwZS5XSEVFTCxcbiAgICBtb2RpZmllclxuICApO1xufVxuXG5mdW5jdGlvbiBsaXN0ZW5Nb3VzZUJ1dHRvbkRvd25VcChhZ2dyZWdhdG9yLCBtb2RpZmllciwgdHlwZSkge1xuICB2YXIga2V5ID0gZ2V0S2V5KHR5cGUsIG1vZGlmaWVyKTtcblxuICB2YXIgaXNEb3duID0gYWdncmVnYXRvci5faXNEb3duO1xuICB2YXIgZXZlbnRTdGFydFBvc2l0aW9uID0gYWdncmVnYXRvci5fZXZlbnRTdGFydFBvc2l0aW9uO1xuICB2YXIgcHJlc3NUaW1lID0gYWdncmVnYXRvci5fcHJlc3NUaW1lO1xuICB2YXIgcmVsZWFzZVRpbWUgPSBhZ2dyZWdhdG9yLl9yZWxlYXNlVGltZTtcblxuICBpc0Rvd25ba2V5XSA9IGZhbHNlO1xuICBldmVudFN0YXJ0UG9zaXRpb25ba2V5XSA9IG5ldyBDYXJ0ZXNpYW4yKCk7XG5cbiAgdmFyIGxhc3RNb3ZlbWVudCA9IGFnZ3JlZ2F0b3IuX2xhc3RNb3ZlbWVudFtrZXldO1xuICBpZiAoIWRlZmluZWQobGFzdE1vdmVtZW50KSkge1xuICAgIGxhc3RNb3ZlbWVudCA9IGFnZ3JlZ2F0b3IuX2xhc3RNb3ZlbWVudFtrZXldID0ge1xuICAgICAgc3RhcnRQb3NpdGlvbjogbmV3IENhcnRlc2lhbjIoKSxcbiAgICAgIGVuZFBvc2l0aW9uOiBuZXcgQ2FydGVzaWFuMigpLFxuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICB2YXIgZG93bjtcbiAgdmFyIHVwO1xuICBpZiAodHlwZSA9PT0gQ2FtZXJhRXZlbnRUeXBlLkxFRlRfRFJBRykge1xuICAgIGRvd24gPSBTY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX0RPV047XG4gICAgdXAgPSBTY3JlZW5TcGFjZUV2ZW50VHlwZS5MRUZUX1VQO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IENhbWVyYUV2ZW50VHlwZS5SSUdIVF9EUkFHKSB7XG4gICAgZG93biA9IFNjcmVlblNwYWNlRXZlbnRUeXBlLlJJR0hUX0RPV047XG4gICAgdXAgPSBTY3JlZW5TcGFjZUV2ZW50VHlwZS5SSUdIVF9VUDtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBDYW1lcmFFdmVudFR5cGUuTUlERExFX0RSQUcpIHtcbiAgICBkb3duID0gU2NyZWVuU3BhY2VFdmVudFR5cGUuTUlERExFX0RPV047XG4gICAgdXAgPSBTY3JlZW5TcGFjZUV2ZW50VHlwZS5NSURETEVfVVA7XG4gIH1cblxuICBhZ2dyZWdhdG9yLl9ldmVudEhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oXG4gICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBhZ2dyZWdhdG9yLl9idXR0b25zRG93bisrO1xuICAgICAgbGFzdE1vdmVtZW50LnZhbGlkID0gZmFsc2U7XG4gICAgICBpc0Rvd25ba2V5XSA9IHRydWU7XG4gICAgICBwcmVzc1RpbWVba2V5XSA9IG5ldyBEYXRlKCk7XG4gICAgICBDYXJ0ZXNpYW4yLmNsb25lKGV2ZW50LnBvc2l0aW9uLCBldmVudFN0YXJ0UG9zaXRpb25ba2V5XSk7XG4gICAgfSxcbiAgICBkb3duLFxuICAgIG1vZGlmaWVyXG4gICk7XG5cbiAgYWdncmVnYXRvci5fZXZlbnRIYW5kbGVyLnNldElucHV0QWN0aW9uKFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFnZ3JlZ2F0b3IuX2J1dHRvbnNEb3duID0gTWF0aC5tYXgoYWdncmVnYXRvci5fYnV0dG9uc0Rvd24gLSAxLCAwKTtcbiAgICAgIGlzRG93bltrZXldID0gZmFsc2U7XG4gICAgICByZWxlYXNlVGltZVtrZXldID0gbmV3IERhdGUoKTtcbiAgICB9LFxuICAgIHVwLFxuICAgIG1vZGlmaWVyXG4gICk7XG59XG5cbmZ1bmN0aW9uIGNsb25lTW91c2VNb3ZlbWVudChtb3VzZU1vdmVtZW50LCByZXN1bHQpIHtcbiAgQ2FydGVzaWFuMi5jbG9uZShtb3VzZU1vdmVtZW50LnN0YXJ0UG9zaXRpb24sIHJlc3VsdC5zdGFydFBvc2l0aW9uKTtcbiAgQ2FydGVzaWFuMi5jbG9uZShtb3VzZU1vdmVtZW50LmVuZFBvc2l0aW9uLCByZXN1bHQuZW5kUG9zaXRpb24pO1xufVxuXG5mdW5jdGlvbiBsaXN0ZW5Nb3VzZU1vdmUoYWdncmVnYXRvciwgbW9kaWZpZXIpIHtcbiAgdmFyIHVwZGF0ZSA9IGFnZ3JlZ2F0b3IuX3VwZGF0ZTtcbiAgdmFyIG1vdmVtZW50ID0gYWdncmVnYXRvci5fbW92ZW1lbnQ7XG4gIHZhciBsYXN0TW92ZW1lbnQgPSBhZ2dyZWdhdG9yLl9sYXN0TW92ZW1lbnQ7XG4gIHZhciBpc0Rvd24gPSBhZ2dyZWdhdG9yLl9pc0Rvd247XG5cbiAgZm9yICh2YXIgdHlwZU5hbWUgaW4gQ2FtZXJhRXZlbnRUeXBlKSB7XG4gICAgaWYgKENhbWVyYUV2ZW50VHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlTmFtZSkpIHtcbiAgICAgIHZhciB0eXBlID0gQ2FtZXJhRXZlbnRUeXBlW3R5cGVOYW1lXTtcbiAgICAgIGlmIChkZWZpbmVkKHR5cGUpKSB7XG4gICAgICAgIHZhciBrZXkgPSBnZXRLZXkodHlwZSwgbW9kaWZpZXIpO1xuICAgICAgICB1cGRhdGVba2V5XSA9IHRydWU7XG5cbiAgICAgICAgaWYgKCFkZWZpbmVkKGFnZ3JlZ2F0b3IuX2xhc3RNb3ZlbWVudFtrZXldKSkge1xuICAgICAgICAgIGFnZ3JlZ2F0b3IuX2xhc3RNb3ZlbWVudFtrZXldID0ge1xuICAgICAgICAgICAgc3RhcnRQb3NpdGlvbjogbmV3IENhcnRlc2lhbjIoKSxcbiAgICAgICAgICAgIGVuZFBvc2l0aW9uOiBuZXcgQ2FydGVzaWFuMigpLFxuICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRlZmluZWQoYWdncmVnYXRvci5fbW92ZW1lbnRba2V5XSkpIHtcbiAgICAgICAgICBhZ2dyZWdhdG9yLl9tb3ZlbWVudFtrZXldID0ge1xuICAgICAgICAgICAgc3RhcnRQb3NpdGlvbjogbmV3IENhcnRlc2lhbjIoKSxcbiAgICAgICAgICAgIGVuZFBvc2l0aW9uOiBuZXcgQ2FydGVzaWFuMigpLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhZ2dyZWdhdG9yLl9ldmVudEhhbmRsZXIuc2V0SW5wdXRBY3Rpb24oXG4gICAgZnVuY3Rpb24gKG1vdXNlTW92ZW1lbnQpIHtcbiAgICAgIGZvciAodmFyIHR5cGVOYW1lIGluIENhbWVyYUV2ZW50VHlwZSkge1xuICAgICAgICBpZiAoQ2FtZXJhRXZlbnRUeXBlLmhhc093blByb3BlcnR5KHR5cGVOYW1lKSkge1xuICAgICAgICAgIHZhciB0eXBlID0gQ2FtZXJhRXZlbnRUeXBlW3R5cGVOYW1lXTtcbiAgICAgICAgICBpZiAoZGVmaW5lZCh0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGdldEtleSh0eXBlLCBtb2RpZmllcik7XG4gICAgICAgICAgICBpZiAoaXNEb3duW2tleV0pIHtcbiAgICAgICAgICAgICAgaWYgKCF1cGRhdGVba2V5XSkge1xuICAgICAgICAgICAgICAgIENhcnRlc2lhbjIuY2xvbmUoXG4gICAgICAgICAgICAgICAgICBtb3VzZU1vdmVtZW50LmVuZFBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgbW92ZW1lbnRba2V5XS5lbmRQb3NpdGlvblxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xvbmVNb3VzZU1vdmVtZW50KG1vdmVtZW50W2tleV0sIGxhc3RNb3ZlbWVudFtrZXldKTtcbiAgICAgICAgICAgICAgICBsYXN0TW92ZW1lbnRba2V5XS52YWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2xvbmVNb3VzZU1vdmVtZW50KG1vdXNlTW92ZW1lbnQsIG1vdmVtZW50W2tleV0pO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgQ2FydGVzaWFuMi5jbG9uZShcbiAgICAgICAgbW91c2VNb3ZlbWVudC5lbmRQb3NpdGlvbixcbiAgICAgICAgYWdncmVnYXRvci5fY3VycmVudE1vdXNlUG9zaXRpb25cbiAgICAgICk7XG4gICAgfSxcbiAgICBTY3JlZW5TcGFjZUV2ZW50VHlwZS5NT1VTRV9NT1ZFLFxuICAgIG1vZGlmaWVyXG4gICk7XG59XG5cbi8qKlxuICogQWdncmVnYXRlcyBpbnB1dCBldmVudHMuIEZvciBleGFtcGxlLCBzdXBwb3NlIHRoZSBmb2xsb3dpbmcgaW5wdXRzIGFyZSByZWNlaXZlZCBiZXR3ZWVuIGZyYW1lczpcbiAqIGxlZnQgbW91c2UgYnV0dG9uIGRvd24sIG1vdXNlIG1vdmUsIG1vdXNlIG1vdmUsIGxlZnQgbW91c2UgYnV0dG9uIHVwLiBUaGVzZSBldmVudHMgd2lsbCBiZSBhZ2dyZWdhdGVkIGludG9cbiAqIG9uZSBldmVudCB3aXRoIGEgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbiBvZiB0aGUgbW91c2UuXG4gKlxuICogQGFsaWFzIENhbWVyYUV2ZW50QWdncmVnYXRvclxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gW2NhbnZhcz1kb2N1bWVudF0gVGhlIGVsZW1lbnQgdG8gaGFuZGxlIGV2ZW50cyBmb3IuXG4gKlxuICogQHNlZSBTY3JlZW5TcGFjZUV2ZW50SGFuZGxlclxuICovXG5mdW5jdGlvbiBDYW1lcmFFdmVudEFnZ3JlZ2F0b3IoY2FudmFzKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChjYW52YXMpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwiY2FudmFzIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB0aGlzLl9ldmVudEhhbmRsZXIgPSBuZXcgU2NyZWVuU3BhY2VFdmVudEhhbmRsZXIoY2FudmFzKTtcblxuICB0aGlzLl91cGRhdGUgPSB7fTtcbiAgdGhpcy5fbW92ZW1lbnQgPSB7fTtcbiAgdGhpcy5fbGFzdE1vdmVtZW50ID0ge307XG4gIHRoaXMuX2lzRG93biA9IHt9O1xuICB0aGlzLl9ldmVudFN0YXJ0UG9zaXRpb24gPSB7fTtcbiAgdGhpcy5fcHJlc3NUaW1lID0ge307XG4gIHRoaXMuX3JlbGVhc2VUaW1lID0ge307XG5cbiAgdGhpcy5fYnV0dG9uc0Rvd24gPSAwO1xuXG4gIHRoaXMuX2N1cnJlbnRNb3VzZVBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjIoKTtcblxuICBsaXN0ZW5Ub1doZWVsKHRoaXMsIHVuZGVmaW5lZCk7XG4gIGxpc3RlblRvUGluY2godGhpcywgdW5kZWZpbmVkLCBjYW52YXMpO1xuICBsaXN0ZW5Nb3VzZUJ1dHRvbkRvd25VcCh0aGlzLCB1bmRlZmluZWQsIENhbWVyYUV2ZW50VHlwZS5MRUZUX0RSQUcpO1xuICBsaXN0ZW5Nb3VzZUJ1dHRvbkRvd25VcCh0aGlzLCB1bmRlZmluZWQsIENhbWVyYUV2ZW50VHlwZS5SSUdIVF9EUkFHKTtcbiAgbGlzdGVuTW91c2VCdXR0b25Eb3duVXAodGhpcywgdW5kZWZpbmVkLCBDYW1lcmFFdmVudFR5cGUuTUlERExFX0RSQUcpO1xuICBsaXN0ZW5Nb3VzZU1vdmUodGhpcywgdW5kZWZpbmVkKTtcblxuICBmb3IgKHZhciBtb2RpZmllck5hbWUgaW4gS2V5Ym9hcmRFdmVudE1vZGlmaWVyKSB7XG4gICAgaWYgKEtleWJvYXJkRXZlbnRNb2RpZmllci5oYXNPd25Qcm9wZXJ0eShtb2RpZmllck5hbWUpKSB7XG4gICAgICB2YXIgbW9kaWZpZXIgPSBLZXlib2FyZEV2ZW50TW9kaWZpZXJbbW9kaWZpZXJOYW1lXTtcbiAgICAgIGlmIChkZWZpbmVkKG1vZGlmaWVyKSkge1xuICAgICAgICBsaXN0ZW5Ub1doZWVsKHRoaXMsIG1vZGlmaWVyKTtcbiAgICAgICAgbGlzdGVuVG9QaW5jaCh0aGlzLCBtb2RpZmllciwgY2FudmFzKTtcbiAgICAgICAgbGlzdGVuTW91c2VCdXR0b25Eb3duVXAodGhpcywgbW9kaWZpZXIsIENhbWVyYUV2ZW50VHlwZS5MRUZUX0RSQUcpO1xuICAgICAgICBsaXN0ZW5Nb3VzZUJ1dHRvbkRvd25VcCh0aGlzLCBtb2RpZmllciwgQ2FtZXJhRXZlbnRUeXBlLlJJR0hUX0RSQUcpO1xuICAgICAgICBsaXN0ZW5Nb3VzZUJ1dHRvbkRvd25VcCh0aGlzLCBtb2RpZmllciwgQ2FtZXJhRXZlbnRUeXBlLk1JRERMRV9EUkFHKTtcbiAgICAgICAgbGlzdGVuTW91c2VNb3ZlKHRoaXMsIG1vZGlmaWVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQ2FtZXJhRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBtb3VzZSBwb3NpdGlvbi5cbiAgICogQG1lbWJlcm9mIENhbWVyYUV2ZW50QWdncmVnYXRvci5wcm90b3R5cGVcbiAgICogQHR5cGUge0NhcnRlc2lhbjJ9XG4gICAqL1xuICBjdXJyZW50TW91c2VQb3NpdGlvbjoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRNb3VzZVBvc2l0aW9uO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgd2hldGhlciBhbnkgbW91c2UgYnV0dG9uIGlzIGRvd24sIGEgdG91Y2ggaGFzIHN0YXJ0ZWQsIG9yIHRoZSB3aGVlbCBoYXMgYmVlbiBtb3ZlZC5cbiAgICogQG1lbWJlcm9mIENhbWVyYUV2ZW50QWdncmVnYXRvci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBhbnlCdXR0b25Eb3duOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgd2hlZWxNb3ZlZCA9XG4gICAgICAgICF0aGlzLl91cGRhdGVbZ2V0S2V5KENhbWVyYUV2ZW50VHlwZS5XSEVFTCldIHx8XG4gICAgICAgICF0aGlzLl91cGRhdGVbXG4gICAgICAgICAgZ2V0S2V5KENhbWVyYUV2ZW50VHlwZS5XSEVFTCwgS2V5Ym9hcmRFdmVudE1vZGlmaWVyLlNISUZUKVxuICAgICAgICBdIHx8XG4gICAgICAgICF0aGlzLl91cGRhdGVbXG4gICAgICAgICAgZ2V0S2V5KENhbWVyYUV2ZW50VHlwZS5XSEVFTCwgS2V5Ym9hcmRFdmVudE1vZGlmaWVyLkNUUkwpXG4gICAgICAgIF0gfHxcbiAgICAgICAgIXRoaXMuX3VwZGF0ZVtnZXRLZXkoQ2FtZXJhRXZlbnRUeXBlLldIRUVMLCBLZXlib2FyZEV2ZW50TW9kaWZpZXIuQUxUKV07XG4gICAgICByZXR1cm4gdGhpcy5fYnV0dG9uc0Rvd24gPiAwIHx8IHdoZWVsTW92ZWQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEdldHMgaWYgYSBtb3VzZSBidXR0b24gZG93biBvciB0b3VjaCBoYXMgc3RhcnRlZCBhbmQgaGFzIGJlZW4gbW92ZWQuXG4gKlxuICogQHBhcmFtIHtDYW1lcmFFdmVudFR5cGV9IHR5cGUgVGhlIGNhbWVyYSBldmVudCB0eXBlLlxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50TW9kaWZpZXJ9IFttb2RpZmllcl0gVGhlIGtleWJvYXJkIG1vZGlmaWVyLlxuICogQHJldHVybnMge0Jvb2xlYW59IFJldHVybnMgPGNvZGU+dHJ1ZTwvY29kZT4gaWYgYSBtb3VzZSBidXR0b24gZG93biBvciB0b3VjaCBoYXMgc3RhcnRlZCBhbmQgaGFzIGJlZW4gbW92ZWQ7IG90aGVyd2lzZSwgPGNvZGU+ZmFsc2U8L2NvZGU+XG4gKi9cbkNhbWVyYUV2ZW50QWdncmVnYXRvci5wcm90b3R5cGUuaXNNb3ZpbmcgPSBmdW5jdGlvbiAodHlwZSwgbW9kaWZpZXIpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidHlwZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGtleSA9IGdldEtleSh0eXBlLCBtb2RpZmllcik7XG4gIHJldHVybiAhdGhpcy5fdXBkYXRlW2tleV07XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGFnZ3JlZ2F0ZWQgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0NhbWVyYUV2ZW50VHlwZX0gdHlwZSBUaGUgY2FtZXJhIGV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0tleWJvYXJkRXZlbnRNb2RpZmllcn0gW21vZGlmaWVyXSBUaGUga2V5Ym9hcmQgbW9kaWZpZXIuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3Qgd2l0aCB0d28ge0BsaW5rIENhcnRlc2lhbjJ9IHByb3BlcnRpZXM6IDxjb2RlPnN0YXJ0UG9zaXRpb248L2NvZGU+IGFuZCA8Y29kZT5lbmRQb3NpdGlvbjwvY29kZT4uXG4gKi9cbkNhbWVyYUV2ZW50QWdncmVnYXRvci5wcm90b3R5cGUuZ2V0TW92ZW1lbnQgPSBmdW5jdGlvbiAodHlwZSwgbW9kaWZpZXIpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidHlwZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGtleSA9IGdldEtleSh0eXBlLCBtb2RpZmllcik7XG4gIHZhciBtb3ZlbWVudCA9IHRoaXMuX21vdmVtZW50W2tleV07XG4gIHJldHVybiBtb3ZlbWVudDtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbiBvZiB0aGUgbGFzdCBtb3ZlIGV2ZW50IChub3QgdGhlIGFnZ3JlZ2F0ZWQgZXZlbnQpLlxuICpcbiAqIEBwYXJhbSB7Q2FtZXJhRXZlbnRUeXBlfSB0eXBlIFRoZSBjYW1lcmEgZXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudE1vZGlmaWVyfSBbbW9kaWZpZXJdIFRoZSBrZXlib2FyZCBtb2RpZmllci5cbiAqIEByZXR1cm5zIHtPYmplY3R8dW5kZWZpbmVkfSBBbiBvYmplY3Qgd2l0aCB0d28ge0BsaW5rIENhcnRlc2lhbjJ9IHByb3BlcnRpZXM6IDxjb2RlPnN0YXJ0UG9zaXRpb248L2NvZGU+IGFuZCA8Y29kZT5lbmRQb3NpdGlvbjwvY29kZT4gb3IgPGNvZGU+dW5kZWZpbmVkPC9jb2RlPi5cbiAqL1xuQ2FtZXJhRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5nZXRMYXN0TW92ZW1lbnQgPSBmdW5jdGlvbiAodHlwZSwgbW9kaWZpZXIpIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidHlwZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGtleSA9IGdldEtleSh0eXBlLCBtb2RpZmllcik7XG4gIHZhciBsYXN0TW92ZW1lbnQgPSB0aGlzLl9sYXN0TW92ZW1lbnRba2V5XTtcbiAgaWYgKGxhc3RNb3ZlbWVudC52YWxpZCkge1xuICAgIHJldHVybiBsYXN0TW92ZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBHZXRzIHdoZXRoZXIgdGhlIG1vdXNlIGJ1dHRvbiBpcyBkb3duIG9yIGEgdG91Y2ggaGFzIHN0YXJ0ZWQuXG4gKlxuICogQHBhcmFtIHtDYW1lcmFFdmVudFR5cGV9IHR5cGUgVGhlIGNhbWVyYSBldmVudCB0eXBlLlxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50TW9kaWZpZXJ9IFttb2RpZmllcl0gVGhlIGtleWJvYXJkIG1vZGlmaWVyLlxuICogQHJldHVybnMge0Jvb2xlYW59IFdoZXRoZXIgdGhlIG1vdXNlIGJ1dHRvbiBpcyBkb3duIG9yIGEgdG91Y2ggaGFzIHN0YXJ0ZWQuXG4gKi9cbkNhbWVyYUV2ZW50QWdncmVnYXRvci5wcm90b3R5cGUuaXNCdXR0b25Eb3duID0gZnVuY3Rpb24gKHR5cGUsIG1vZGlmaWVyKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZCh0eXBlKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcInR5cGUgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciBrZXkgPSBnZXRLZXkodHlwZSwgbW9kaWZpZXIpO1xuICByZXR1cm4gdGhpcy5faXNEb3duW2tleV07XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIG1vdXNlIHBvc2l0aW9uIHRoYXQgc3RhcnRlZCB0aGUgYWdncmVnYXRpb24uXG4gKlxuICogQHBhcmFtIHtDYW1lcmFFdmVudFR5cGV9IHR5cGUgVGhlIGNhbWVyYSBldmVudCB0eXBlLlxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50TW9kaWZpZXJ9IFttb2RpZmllcl0gVGhlIGtleWJvYXJkIG1vZGlmaWVyLlxuICogQHJldHVybnMge0NhcnRlc2lhbjJ9IFRoZSBtb3VzZSBwb3NpdGlvbi5cbiAqL1xuQ2FtZXJhRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5nZXRTdGFydE1vdXNlUG9zaXRpb24gPSBmdW5jdGlvbiAoXG4gIHR5cGUsXG4gIG1vZGlmaWVyXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidHlwZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgaWYgKHR5cGUgPT09IENhbWVyYUV2ZW50VHlwZS5XSEVFTCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50TW91c2VQb3NpdGlvbjtcbiAgfVxuXG4gIHZhciBrZXkgPSBnZXRLZXkodHlwZSwgbW9kaWZpZXIpO1xuICByZXR1cm4gdGhpcy5fZXZlbnRTdGFydFBvc2l0aW9uW2tleV07XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWUgdGhlIGJ1dHRvbiB3YXMgcHJlc3NlZCBvciB0aGUgdG91Y2ggd2FzIHN0YXJ0ZWQuXG4gKlxuICogQHBhcmFtIHtDYW1lcmFFdmVudFR5cGV9IHR5cGUgVGhlIGNhbWVyYSBldmVudCB0eXBlLlxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50TW9kaWZpZXJ9IFttb2RpZmllcl0gVGhlIGtleWJvYXJkIG1vZGlmaWVyLlxuICogQHJldHVybnMge0RhdGV9IFRoZSB0aW1lIHRoZSBidXR0b24gd2FzIHByZXNzZWQgb3IgdGhlIHRvdWNoIHdhcyBzdGFydGVkLlxuICovXG5DYW1lcmFFdmVudEFnZ3JlZ2F0b3IucHJvdG90eXBlLmdldEJ1dHRvblByZXNzVGltZSA9IGZ1bmN0aW9uICh0eXBlLCBtb2RpZmllcikge1xuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQodHlwZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJ0eXBlIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIga2V5ID0gZ2V0S2V5KHR5cGUsIG1vZGlmaWVyKTtcbiAgcmV0dXJuIHRoaXMuX3ByZXNzVGltZVtrZXldO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lIHRoZSBidXR0b24gd2FzIHJlbGVhc2VkIG9yIHRoZSB0b3VjaCB3YXMgZW5kZWQuXG4gKlxuICogQHBhcmFtIHtDYW1lcmFFdmVudFR5cGV9IHR5cGUgVGhlIGNhbWVyYSBldmVudCB0eXBlLlxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50TW9kaWZpZXJ9IFttb2RpZmllcl0gVGhlIGtleWJvYXJkIG1vZGlmaWVyLlxuICogQHJldHVybnMge0RhdGV9IFRoZSB0aW1lIHRoZSBidXR0b24gd2FzIHJlbGVhc2VkIG9yIHRoZSB0b3VjaCB3YXMgZW5kZWQuXG4gKi9cbkNhbWVyYUV2ZW50QWdncmVnYXRvci5wcm90b3R5cGUuZ2V0QnV0dG9uUmVsZWFzZVRpbWUgPSBmdW5jdGlvbiAoXG4gIHR5cGUsXG4gIG1vZGlmaWVyXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCFkZWZpbmVkKHR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwidHlwZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIGtleSA9IGdldEtleSh0eXBlLCBtb2RpZmllcik7XG4gIHJldHVybiB0aGlzLl9yZWxlYXNlVGltZVtrZXldO1xufTtcblxuLyoqXG4gKiBTaWduYWxzIHRoYXQgYWxsIG9mIHRoZSBldmVudHMgaGF2ZSBiZWVuIGhhbmRsZWQgYW5kIHRoZSBhZ2dyZWdhdG9yIHNob3VsZCBiZSByZXNldCB0byBoYW5kbGUgbmV3IGV2ZW50cy5cbiAqL1xuQ2FtZXJhRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl91cGRhdGUpIHtcbiAgICBpZiAodGhpcy5fdXBkYXRlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICB0aGlzLl91cGRhdGVbbmFtZV0gPSB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqIDxiciAvPjxiciAvPlxuICogSWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCA8Y29kZT5mYWxzZTwvY29kZT4uXG4gKlxuICogQHNlZSBDYW1lcmFFdmVudEFnZ3JlZ2F0b3IjZGVzdHJveVxuICovXG5DYW1lcmFFdmVudEFnZ3JlZ2F0b3IucHJvdG90eXBlLmlzRGVzdHJveWVkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgbW91c2UgbGlzdGVuZXJzIGhlbGQgYnkgdGhpcyBvYmplY3QuXG4gKiA8YnIgLz48YnIgLz5cbiAqIE9uY2UgYW4gb2JqZWN0IGlzIGRlc3Ryb3llZCwgaXQgc2hvdWxkIG5vdCBiZSB1c2VkOyBjYWxsaW5nIGFueSBmdW5jdGlvbiBvdGhlciB0aGFuXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi4gIFRoZXJlZm9yZSxcbiAqIGFzc2lnbiB0aGUgcmV0dXJuIHZhbHVlICg8Y29kZT51bmRlZmluZWQ8L2NvZGU+KSB0byB0aGUgb2JqZWN0IGFzIGRvbmUgaW4gdGhlIGV4YW1wbGUuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogaGFuZGxlciA9IGhhbmRsZXIgJiYgaGFuZGxlci5kZXN0cm95KCk7XG4gKlxuICogQHNlZSBDYW1lcmFFdmVudEFnZ3JlZ2F0b3IjaXNEZXN0cm95ZWRcbiAqL1xuQ2FtZXJhRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9ldmVudEhhbmRsZXIgPSB0aGlzLl9ldmVudEhhbmRsZXIgJiYgdGhpcy5fZXZlbnRIYW5kbGVyLmRlc3Ryb3koKTtcbiAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgQ2FtZXJhRXZlbnRBZ2dyZWdhdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///90070\n')},84321:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('/**\n * Enumerates the available input for interacting with the camera.\n *\n * @enum {Number}\n */\nvar CameraEventType = {\n  /**\n   * A left mouse button press followed by moving the mouse and releasing the button.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LEFT_DRAG: 0,\n\n  /**\n   *  A right mouse button press followed by moving the mouse and releasing the button.\n   *\n   * @type {Number}\n   * @constant\n   */\n  RIGHT_DRAG: 1,\n\n  /**\n   *  A middle mouse button press followed by moving the mouse and releasing the button.\n   *\n   * @type {Number}\n   * @constant\n   */\n  MIDDLE_DRAG: 2,\n\n  /**\n   * Scrolling the middle mouse button.\n   *\n   * @type {Number}\n   * @constant\n   */\n  WHEEL: 3,\n\n  /**\n   * A two-finger touch on a touch surface.\n   *\n   * @type {Number}\n   * @constant\n   */\n  PINCH: 4,\n};\n/* harmony default export */ __webpack_exports__["Z"] = (Object.freeze(CameraEventType));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODQzMjEuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFlLDhCQUE4QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0NhbWVyYUV2ZW50VHlwZS5qcz8wZTk0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW51bWVyYXRlcyB0aGUgYXZhaWxhYmxlIGlucHV0IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBjYW1lcmEuXG4gKlxuICogQGVudW0ge051bWJlcn1cbiAqL1xudmFyIENhbWVyYUV2ZW50VHlwZSA9IHtcbiAgLyoqXG4gICAqIEEgbGVmdCBtb3VzZSBidXR0b24gcHJlc3MgZm9sbG93ZWQgYnkgbW92aW5nIHRoZSBtb3VzZSBhbmQgcmVsZWFzaW5nIHRoZSBidXR0b24uXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgTEVGVF9EUkFHOiAwLFxuXG4gIC8qKlxuICAgKiAgQSByaWdodCBtb3VzZSBidXR0b24gcHJlc3MgZm9sbG93ZWQgYnkgbW92aW5nIHRoZSBtb3VzZSBhbmQgcmVsZWFzaW5nIHRoZSBidXR0b24uXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgUklHSFRfRFJBRzogMSxcblxuICAvKipcbiAgICogIEEgbWlkZGxlIG1vdXNlIGJ1dHRvbiBwcmVzcyBmb2xsb3dlZCBieSBtb3ZpbmcgdGhlIG1vdXNlIGFuZCByZWxlYXNpbmcgdGhlIGJ1dHRvbi5cbiAgICpcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBNSURETEVfRFJBRzogMixcblxuICAvKipcbiAgICogU2Nyb2xsaW5nIHRoZSBtaWRkbGUgbW91c2UgYnV0dG9uLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFdIRUVMOiAzLFxuXG4gIC8qKlxuICAgKiBBIHR3by1maW5nZXIgdG91Y2ggb24gYSB0b3VjaCBzdXJmYWNlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIFBJTkNIOiA0LFxufTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoQ2FtZXJhRXZlbnRUeXBlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///84321\n')},15092:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60838);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51688);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_EasingFunction_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50732);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99417);\n/* harmony import */ var _Core_PerspectiveFrustum_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(66854);\n/* harmony import */ var _Core_PerspectiveOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(36135);\n/* harmony import */ var _SceneMode_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(89917);\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates tweens for camera flights.\n * <br /><br />\n * Mouse interaction is disabled during flights.\n *\n * @private\n */\nvar CameraFlightPath = {};\n\nfunction getAltitude(frustum, dx, dy) {\n  var near;\n  var top;\n  var right;\n  if (frustum instanceof _Core_PerspectiveFrustum_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z) {\n    var tanTheta = Math.tan(0.5 * frustum.fovy);\n    near = frustum.near;\n    top = frustum.near * tanTheta;\n    right = frustum.aspectRatio * top;\n    return Math.max((dx * near) / right, (dy * near) / top);\n  } else if (frustum instanceof _Core_PerspectiveOffCenterFrustum_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z) {\n    near = frustum.near;\n    top = frustum.top;\n    right = frustum.right;\n    return Math.max((dx * near) / right, (dy * near) / top);\n  }\n\n  return Math.max(dx, dy);\n}\n\nvar scratchCart = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\nvar scratchCart2 = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction createPitchFunction(\n  startPitch,\n  endPitch,\n  heightFunction,\n  pitchAdjustHeight\n) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(pitchAdjustHeight) && heightFunction(0.5) > pitchAdjustHeight) {\n    var startHeight = heightFunction(0.0);\n    var endHeight = heightFunction(1.0);\n    var middleHeight = heightFunction(0.5);\n\n    var d1 = middleHeight - startHeight;\n    var d2 = middleHeight - endHeight;\n\n    return function (time) {\n      var altitude = heightFunction(time);\n      if (time <= 0.5) {\n        var t1 = (altitude - startHeight) / d1;\n        return _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startPitch, -_Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO, t1);\n      }\n\n      var t2 = (altitude - endHeight) / d2;\n      return _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(-_Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO, endPitch, 1 - t2);\n    };\n  }\n  return function (time) {\n    return _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startPitch, endPitch, time);\n  };\n}\n\nfunction createHeightFunction(\n  camera,\n  destination,\n  startHeight,\n  endHeight,\n  optionAltitude\n) {\n  var altitude = optionAltitude;\n  var maxHeight = Math.max(startHeight, endHeight);\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(altitude)) {\n    var start = camera.position;\n    var end = destination;\n    var up = camera.up;\n    var right = camera.right;\n    var frustum = camera.frustum;\n\n    var diff = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].subtract */ .Z.subtract(start, end, scratchCart);\n    var verticalDistance = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].magnitude */ .Z.magnitude(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(up, _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].dot */ .Z.dot(diff, up), scratchCart2)\n    );\n    var horizontalDistance = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].magnitude */ .Z.magnitude(\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].multiplyByScalar */ .Z.multiplyByScalar(\n        right,\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].dot */ .Z.dot(diff, right),\n        scratchCart2\n      )\n    );\n\n    altitude = Math.min(\n      getAltitude(frustum, verticalDistance, horizontalDistance) * 0.2,\n      1000000000.0\n    );\n  }\n\n  if (maxHeight < altitude) {\n    var power = 8.0;\n    var factor = 1000000.0;\n\n    var s = -Math.pow((altitude - startHeight) * factor, 1.0 / power);\n    var e = Math.pow((altitude - endHeight) * factor, 1.0 / power);\n\n    return function (t) {\n      var x = t * (e - s) + s;\n      return -Math.pow(x, power) / factor + altitude;\n    };\n  }\n\n  return function (t) {\n    return _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startHeight, endHeight, t);\n  };\n}\n\nfunction adjustAngleForLERP(startAngle, endAngle) {\n  if (\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      startAngle,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON11 */ .Z.EPSILON11\n    )\n  ) {\n    startAngle = 0.0;\n  }\n\n  if (endAngle > startAngle + Math.PI) {\n    startAngle += _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  } else if (endAngle < startAngle - Math.PI) {\n    startAngle -= _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  }\n\n  return startAngle;\n}\n\nvar scratchStart = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction createUpdateCV(\n  scene,\n  duration,\n  destination,\n  heading,\n  pitch,\n  roll,\n  optionAltitude\n) {\n  var camera = scene.camera;\n\n  var start = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(camera.position, scratchStart);\n  var startPitch = camera.pitch;\n  var startHeading = adjustAngleForLERP(camera.heading, heading);\n  var startRoll = adjustAngleForLERP(camera.roll, roll);\n\n  var heightFunction = createHeightFunction(\n    camera,\n    destination,\n    start.z,\n    destination.z,\n    optionAltitude\n  );\n\n  function update(value) {\n    var time = value.time / duration;\n\n    camera.setView({\n      orientation: {\n        heading: _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startHeading, heading, time),\n        pitch: _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startPitch, pitch, time),\n        roll: _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startRoll, roll, time),\n      },\n    });\n\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].lerp */ .Z.lerp(start, destination, time, camera.position);\n    camera.position.z = heightFunction(time);\n  }\n  return update;\n}\n\nfunction useLongestFlight(startCart, destCart) {\n  if (startCart.longitude < destCart.longitude) {\n    startCart.longitude += _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  } else {\n    destCart.longitude += _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  }\n}\n\nfunction useShortestFlight(startCart, destCart) {\n  var diff = startCart.longitude - destCart.longitude;\n  if (diff < -_Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PI */ .Z.PI) {\n    startCart.longitude += _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  } else if (diff > _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PI */ .Z.PI) {\n    destCart.longitude += _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI;\n  }\n}\n\nvar scratchStartCart = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchEndCart = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\n\nfunction createUpdate3D(\n  scene,\n  duration,\n  destination,\n  heading,\n  pitch,\n  roll,\n  optionAltitude,\n  optionFlyOverLongitude,\n  optionFlyOverLongitudeWeight,\n  optionPitchAdjustHeight\n) {\n  var camera = scene.camera;\n  var projection = scene.mapProjection;\n  var ellipsoid = projection.ellipsoid;\n\n  var startCart = _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].clone */ .Z.clone(\n    camera.positionCartographic,\n    scratchStartCart\n  );\n  var startPitch = camera.pitch;\n  var startHeading = adjustAngleForLERP(camera.heading, heading);\n  var startRoll = adjustAngleForLERP(camera.roll, roll);\n\n  var destCart = ellipsoid.cartesianToCartographic(destination, scratchEndCart);\n  startCart.longitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].zeroToTwoPi */ .Z.zeroToTwoPi(startCart.longitude);\n  destCart.longitude = _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].zeroToTwoPi */ .Z.zeroToTwoPi(destCart.longitude);\n\n  var useLongFlight = false;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(optionFlyOverLongitude)) {\n    var hitLon = _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].zeroToTwoPi */ .Z.zeroToTwoPi(optionFlyOverLongitude);\n\n    var lonMin = Math.min(startCart.longitude, destCart.longitude);\n    var lonMax = Math.max(startCart.longitude, destCart.longitude);\n\n    var hitInside = hitLon >= lonMin && hitLon <= lonMax;\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(optionFlyOverLongitudeWeight)) {\n      // Distance inside  (0...2Pi)\n      var din = Math.abs(startCart.longitude - destCart.longitude);\n      // Distance outside (0...2Pi)\n      var dot = _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].TWO_PI */ .Z.TWO_PI - din;\n\n      var hitDistance = hitInside ? din : dot;\n      var offDistance = hitInside ? dot : din;\n\n      if (\n        hitDistance < offDistance * optionFlyOverLongitudeWeight &&\n        !hitInside\n      ) {\n        useLongFlight = true;\n      }\n    } else if (!hitInside) {\n      useLongFlight = true;\n    }\n  }\n\n  if (useLongFlight) {\n    useLongestFlight(startCart, destCart);\n  } else {\n    useShortestFlight(startCart, destCart);\n  }\n\n  var heightFunction = createHeightFunction(\n    camera,\n    destination,\n    startCart.height,\n    destCart.height,\n    optionAltitude\n  );\n  var pitchFunction = createPitchFunction(\n    startPitch,\n    pitch,\n    heightFunction,\n    optionPitchAdjustHeight\n  );\n\n  // Isolate scope for update function.\n  // to have local copies of vars used in lerp\n  // Othervise, if you call nex\n  // createUpdate3D (createAnimationTween)\n  // before you played animation, variables will be overwriten.\n  function isolateUpdateFunction() {\n    var startLongitude = startCart.longitude;\n    var destLongitude = destCart.longitude;\n    var startLatitude = startCart.latitude;\n    var destLatitude = destCart.latitude;\n\n    return function update(value) {\n      var time = value.time / duration;\n\n      var position = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].fromRadians */ .Z.fromRadians(\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startLongitude, destLongitude, time),\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startLatitude, destLatitude, time),\n        heightFunction(time),\n        ellipsoid\n      );\n\n      camera.setView({\n        destination: position,\n        orientation: {\n          heading: _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startHeading, heading, time),\n          pitch: pitchFunction(time),\n          roll: _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startRoll, roll, time),\n        },\n      });\n    };\n  }\n  return isolateUpdateFunction();\n}\n\nfunction createUpdate2D(\n  scene,\n  duration,\n  destination,\n  heading,\n  pitch,\n  roll,\n  optionAltitude\n) {\n  var camera = scene.camera;\n\n  var start = _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].clone */ .Z.clone(camera.position, scratchStart);\n  var startHeading = adjustAngleForLERP(camera.heading, heading);\n\n  var startHeight = camera.frustum.right - camera.frustum.left;\n  var heightFunction = createHeightFunction(\n    camera,\n    destination,\n    startHeight,\n    destination.z,\n    optionAltitude\n  );\n\n  function update(value) {\n    var time = value.time / duration;\n\n    camera.setView({\n      orientation: {\n        heading: _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].lerp */ .Z.lerp(startHeading, heading, time),\n      },\n    });\n\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].lerp */ .Z.lerp(start, destination, time, camera.position);\n\n    var zoom = heightFunction(time);\n\n    var frustum = camera.frustum;\n    var ratio = frustum.top / frustum.right;\n\n    var incrementAmount = (zoom - (frustum.right - frustum.left)) * 0.5;\n    frustum.right += incrementAmount;\n    frustum.left -= incrementAmount;\n    frustum.top = ratio * frustum.right;\n    frustum.bottom = -frustum.top;\n  }\n  return update;\n}\n\nvar scratchCartographic = new _Core_Cartographic_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z();\nvar scratchDestination = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();\n\nfunction emptyFlight(complete, cancel) {\n  return {\n    startObject: {},\n    stopObject: {},\n    duration: 0.0,\n    complete: complete,\n    cancel: cancel,\n  };\n}\n\nfunction wrapCallback(controller, cb) {\n  function wrapped() {\n    if (typeof cb === "function") {\n      cb();\n    }\n\n    controller.enableInputs = true;\n  }\n  return wrapped;\n}\n\nCameraFlightPath.createTween = function (scene, options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var destination = options.destination;\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(scene)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("scene is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(destination)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("destination is required.");\n  }\n  //>>includeEnd(\'debug\');\n  var mode = scene.mode;\n\n  if (mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].MORPHING */ .Z.MORPHING) {\n    return emptyFlight();\n  }\n\n  var convert = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.convert, true);\n  var projection = scene.mapProjection;\n  var ellipsoid = projection.ellipsoid;\n  var maximumHeight = options.maximumHeight;\n  var flyOverLongitude = options.flyOverLongitude;\n  var flyOverLongitudeWeight = options.flyOverLongitudeWeight;\n  var pitchAdjustHeight = options.pitchAdjustHeight;\n  var easingFunction = options.easingFunction;\n\n  if (convert && mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].SCENE3D */ .Z.SCENE3D) {\n    ellipsoid.cartesianToCartographic(destination, scratchCartographic);\n    destination = projection.project(scratchCartographic, scratchDestination);\n  }\n\n  var camera = scene.camera;\n  var transform = options.endTransform;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(transform)) {\n    camera._setTransform(transform);\n  }\n\n  var duration = options.duration;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(duration)) {\n    duration =\n      Math.ceil(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].distance */ .Z.distance(camera.position, destination) / 1000000.0) +\n      2.0;\n    duration = Math.min(duration, 3.0);\n  }\n\n  var heading = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.heading, 0.0);\n  var pitch = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.pitch, -_Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].PI_OVER_TWO */ .Z.PI_OVER_TWO);\n  var roll = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.roll, 0.0);\n\n  var controller = scene.screenSpaceCameraController;\n  controller.enableInputs = false;\n\n  var complete = wrapCallback(controller, options.complete);\n  var cancel = wrapCallback(controller, options.cancel);\n\n  var frustum = camera.frustum;\n\n  var empty = scene.mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].SCENE2D */ .Z.SCENE2D;\n  empty =\n    empty &&\n    _Core_Cartesian2_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(camera.position, destination, _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON6 */ .Z.EPSILON6);\n  empty =\n    empty &&\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      Math.max(frustum.right - frustum.left, frustum.top - frustum.bottom),\n      destination.z,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON6 */ .Z.EPSILON6\n    );\n\n  empty =\n    empty ||\n    (scene.mode !== _SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].SCENE2D */ .Z.SCENE2D &&\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n        destination,\n        camera.position,\n        _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON10 */ .Z.EPSILON10\n      ));\n\n  empty =\n    empty &&\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].negativePiToPi */ .Z.negativePiToPi(heading),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].negativePiToPi */ .Z.negativePiToPi(camera.heading),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON10 */ .Z.EPSILON10\n    ) &&\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].negativePiToPi */ .Z.negativePiToPi(pitch),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].negativePiToPi */ .Z.negativePiToPi(camera.pitch),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON10 */ .Z.EPSILON10\n    ) &&\n    _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].equalsEpsilon */ .Z.equalsEpsilon(\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].negativePiToPi */ .Z.negativePiToPi(roll),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].negativePiToPi */ .Z.negativePiToPi(camera.roll),\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].EPSILON10 */ .Z.EPSILON10\n    );\n\n  if (empty) {\n    return emptyFlight(complete, cancel);\n  }\n\n  var updateFunctions = new Array(4);\n  updateFunctions[_SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].SCENE2D */ .Z.SCENE2D] = createUpdate2D;\n  updateFunctions[_SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].SCENE3D */ .Z.SCENE3D] = createUpdate3D;\n  updateFunctions[_SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].COLUMBUS_VIEW */ .Z.COLUMBUS_VIEW] = createUpdateCV;\n\n  if (duration <= 0.0) {\n    var newOnComplete = function () {\n      var update = updateFunctions[mode](\n        scene,\n        1.0,\n        destination,\n        heading,\n        pitch,\n        roll,\n        maximumHeight,\n        flyOverLongitude,\n        flyOverLongitudeWeight,\n        pitchAdjustHeight\n      );\n      update({ time: 1.0 });\n\n      if (typeof complete === "function") {\n        complete();\n      }\n    };\n    return emptyFlight(newOnComplete, cancel);\n  }\n\n  var update = updateFunctions[mode](\n    scene,\n    duration,\n    destination,\n    heading,\n    pitch,\n    roll,\n    maximumHeight,\n    flyOverLongitude,\n    flyOverLongitudeWeight,\n    pitchAdjustHeight\n  );\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(easingFunction)) {\n    var startHeight = camera.positionCartographic.height;\n    var endHeight =\n      mode === _SceneMode_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].SCENE3D */ .Z.SCENE3D\n        ? ellipsoid.cartesianToCartographic(destination).height\n        : destination.z;\n\n    if (startHeight > endHeight && startHeight > 11500.0) {\n      easingFunction = _Core_EasingFunction_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].CUBIC_OUT */ .Z.CUBIC_OUT;\n    } else {\n      easingFunction = _Core_EasingFunction_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].QUINTIC_IN_OUT */ .Z.QUINTIC_IN_OUT;\n    }\n  }\n\n  return {\n    duration: duration,\n    easingFunction: easingFunction,\n    startObject: {\n      time: 0.0,\n    },\n    stopObject: {\n      time: duration,\n    },\n    update: update,\n    complete: complete,\n    cancel: cancel,\n  };\n};\n/* harmony default export */ __webpack_exports__["Z"] = (CameraFlightPath);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTyxzRUFBTztBQUNkO0FBQ0E7QUFDQSxlQUFlLDhFQUFpQjtBQUNoQztBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLDRGQUF3QjtBQUMvQyxNQUFNO0FBQ04sdUJBQXVCLHNHQUE2QjtBQUNwRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWUsZ0JBQWdCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvQ2FtZXJhRmxpZ2h0UGF0aC5qcz9jYzFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXJ0ZXNpYW4yIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjIuanNcIjtcbmltcG9ydCBDYXJ0ZXNpYW4zIGZyb20gXCIuLi9Db3JlL0NhcnRlc2lhbjMuanNcIjtcbmltcG9ydCBDYXJ0b2dyYXBoaWMgZnJvbSBcIi4uL0NvcmUvQ2FydG9ncmFwaGljLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRWFzaW5nRnVuY3Rpb24gZnJvbSBcIi4uL0NvcmUvRWFzaW5nRnVuY3Rpb24uanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBQZXJzcGVjdGl2ZUZydXN0dW0gZnJvbSBcIi4uL0NvcmUvUGVyc3BlY3RpdmVGcnVzdHVtLmpzXCI7XG5pbXBvcnQgUGVyc3BlY3RpdmVPZmZDZW50ZXJGcnVzdHVtIGZyb20gXCIuLi9Db3JlL1BlcnNwZWN0aXZlT2ZmQ2VudGVyRnJ1c3R1bS5qc1wiO1xuaW1wb3J0IFNjZW5lTW9kZSBmcm9tIFwiLi9TY2VuZU1vZGUuanNcIjtcblxuLyoqXG4gKiBDcmVhdGVzIHR3ZWVucyBmb3IgY2FtZXJhIGZsaWdodHMuXG4gKiA8YnIgLz48YnIgLz5cbiAqIE1vdXNlIGludGVyYWN0aW9uIGlzIGRpc2FibGVkIGR1cmluZyBmbGlnaHRzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBDYW1lcmFGbGlnaHRQYXRoID0ge307XG5cbmZ1bmN0aW9uIGdldEFsdGl0dWRlKGZydXN0dW0sIGR4LCBkeSkge1xuICB2YXIgbmVhcjtcbiAgdmFyIHRvcDtcbiAgdmFyIHJpZ2h0O1xuICBpZiAoZnJ1c3R1bSBpbnN0YW5jZW9mIFBlcnNwZWN0aXZlRnJ1c3R1bSkge1xuICAgIHZhciB0YW5UaGV0YSA9IE1hdGgudGFuKDAuNSAqIGZydXN0dW0uZm92eSk7XG4gICAgbmVhciA9IGZydXN0dW0ubmVhcjtcbiAgICB0b3AgPSBmcnVzdHVtLm5lYXIgKiB0YW5UaGV0YTtcbiAgICByaWdodCA9IGZydXN0dW0uYXNwZWN0UmF0aW8gKiB0b3A7XG4gICAgcmV0dXJuIE1hdGgubWF4KChkeCAqIG5lYXIpIC8gcmlnaHQsIChkeSAqIG5lYXIpIC8gdG9wKTtcbiAgfSBlbHNlIGlmIChmcnVzdHVtIGluc3RhbmNlb2YgUGVyc3BlY3RpdmVPZmZDZW50ZXJGcnVzdHVtKSB7XG4gICAgbmVhciA9IGZydXN0dW0ubmVhcjtcbiAgICB0b3AgPSBmcnVzdHVtLnRvcDtcbiAgICByaWdodCA9IGZydXN0dW0ucmlnaHQ7XG4gICAgcmV0dXJuIE1hdGgubWF4KChkeCAqIG5lYXIpIC8gcmlnaHQsIChkeSAqIG5lYXIpIC8gdG9wKTtcbiAgfVxuXG4gIHJldHVybiBNYXRoLm1heChkeCwgZHkpO1xufVxuXG52YXIgc2NyYXRjaENhcnQgPSBuZXcgQ2FydGVzaWFuMygpO1xudmFyIHNjcmF0Y2hDYXJ0MiA9IG5ldyBDYXJ0ZXNpYW4zKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVBpdGNoRnVuY3Rpb24oXG4gIHN0YXJ0UGl0Y2gsXG4gIGVuZFBpdGNoLFxuICBoZWlnaHRGdW5jdGlvbixcbiAgcGl0Y2hBZGp1c3RIZWlnaHRcbikge1xuICBpZiAoZGVmaW5lZChwaXRjaEFkanVzdEhlaWdodCkgJiYgaGVpZ2h0RnVuY3Rpb24oMC41KSA+IHBpdGNoQWRqdXN0SGVpZ2h0KSB7XG4gICAgdmFyIHN0YXJ0SGVpZ2h0ID0gaGVpZ2h0RnVuY3Rpb24oMC4wKTtcbiAgICB2YXIgZW5kSGVpZ2h0ID0gaGVpZ2h0RnVuY3Rpb24oMS4wKTtcbiAgICB2YXIgbWlkZGxlSGVpZ2h0ID0gaGVpZ2h0RnVuY3Rpb24oMC41KTtcblxuICAgIHZhciBkMSA9IG1pZGRsZUhlaWdodCAtIHN0YXJ0SGVpZ2h0O1xuICAgIHZhciBkMiA9IG1pZGRsZUhlaWdodCAtIGVuZEhlaWdodDtcblxuICAgIHJldHVybiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgdmFyIGFsdGl0dWRlID0gaGVpZ2h0RnVuY3Rpb24odGltZSk7XG4gICAgICBpZiAodGltZSA8PSAwLjUpIHtcbiAgICAgICAgdmFyIHQxID0gKGFsdGl0dWRlIC0gc3RhcnRIZWlnaHQpIC8gZDE7XG4gICAgICAgIHJldHVybiBDZXNpdW1NYXRoLmxlcnAoc3RhcnRQaXRjaCwgLUNlc2l1bU1hdGguUElfT1ZFUl9UV08sIHQxKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHQyID0gKGFsdGl0dWRlIC0gZW5kSGVpZ2h0KSAvIGQyO1xuICAgICAgcmV0dXJuIENlc2l1bU1hdGgubGVycCgtQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTywgZW5kUGl0Y2gsIDEgLSB0Mik7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICByZXR1cm4gQ2VzaXVtTWF0aC5sZXJwKHN0YXJ0UGl0Y2gsIGVuZFBpdGNoLCB0aW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSGVpZ2h0RnVuY3Rpb24oXG4gIGNhbWVyYSxcbiAgZGVzdGluYXRpb24sXG4gIHN0YXJ0SGVpZ2h0LFxuICBlbmRIZWlnaHQsXG4gIG9wdGlvbkFsdGl0dWRlXG4pIHtcbiAgdmFyIGFsdGl0dWRlID0gb3B0aW9uQWx0aXR1ZGU7XG4gIHZhciBtYXhIZWlnaHQgPSBNYXRoLm1heChzdGFydEhlaWdodCwgZW5kSGVpZ2h0KTtcblxuICBpZiAoIWRlZmluZWQoYWx0aXR1ZGUpKSB7XG4gICAgdmFyIHN0YXJ0ID0gY2FtZXJhLnBvc2l0aW9uO1xuICAgIHZhciBlbmQgPSBkZXN0aW5hdGlvbjtcbiAgICB2YXIgdXAgPSBjYW1lcmEudXA7XG4gICAgdmFyIHJpZ2h0ID0gY2FtZXJhLnJpZ2h0O1xuICAgIHZhciBmcnVzdHVtID0gY2FtZXJhLmZydXN0dW07XG5cbiAgICB2YXIgZGlmZiA9IENhcnRlc2lhbjMuc3VidHJhY3Qoc3RhcnQsIGVuZCwgc2NyYXRjaENhcnQpO1xuICAgIHZhciB2ZXJ0aWNhbERpc3RhbmNlID0gQ2FydGVzaWFuMy5tYWduaXR1ZGUoXG4gICAgICBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIodXAsIENhcnRlc2lhbjMuZG90KGRpZmYsIHVwKSwgc2NyYXRjaENhcnQyKVxuICAgICk7XG4gICAgdmFyIGhvcml6b250YWxEaXN0YW5jZSA9IENhcnRlc2lhbjMubWFnbml0dWRlKFxuICAgICAgQ2FydGVzaWFuMy5tdWx0aXBseUJ5U2NhbGFyKFxuICAgICAgICByaWdodCxcbiAgICAgICAgQ2FydGVzaWFuMy5kb3QoZGlmZiwgcmlnaHQpLFxuICAgICAgICBzY3JhdGNoQ2FydDJcbiAgICAgIClcbiAgICApO1xuXG4gICAgYWx0aXR1ZGUgPSBNYXRoLm1pbihcbiAgICAgIGdldEFsdGl0dWRlKGZydXN0dW0sIHZlcnRpY2FsRGlzdGFuY2UsIGhvcml6b250YWxEaXN0YW5jZSkgKiAwLjIsXG4gICAgICAxMDAwMDAwMDAwLjBcbiAgICApO1xuICB9XG5cbiAgaWYgKG1heEhlaWdodCA8IGFsdGl0dWRlKSB7XG4gICAgdmFyIHBvd2VyID0gOC4wO1xuICAgIHZhciBmYWN0b3IgPSAxMDAwMDAwLjA7XG5cbiAgICB2YXIgcyA9IC1NYXRoLnBvdygoYWx0aXR1ZGUgLSBzdGFydEhlaWdodCkgKiBmYWN0b3IsIDEuMCAvIHBvd2VyKTtcbiAgICB2YXIgZSA9IE1hdGgucG93KChhbHRpdHVkZSAtIGVuZEhlaWdodCkgKiBmYWN0b3IsIDEuMCAvIHBvd2VyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgdmFyIHggPSB0ICogKGUgLSBzKSArIHM7XG4gICAgICByZXR1cm4gLU1hdGgucG93KHgsIHBvd2VyKSAvIGZhY3RvciArIGFsdGl0dWRlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gQ2VzaXVtTWF0aC5sZXJwKHN0YXJ0SGVpZ2h0LCBlbmRIZWlnaHQsIHQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhZGp1c3RBbmdsZUZvckxFUlAoc3RhcnRBbmdsZSwgZW5kQW5nbGUpIHtcbiAgaWYgKFxuICAgIENlc2l1bU1hdGguZXF1YWxzRXBzaWxvbihcbiAgICAgIHN0YXJ0QW5nbGUsXG4gICAgICBDZXNpdW1NYXRoLlRXT19QSSxcbiAgICAgIENlc2l1bU1hdGguRVBTSUxPTjExXG4gICAgKVxuICApIHtcbiAgICBzdGFydEFuZ2xlID0gMC4wO1xuICB9XG5cbiAgaWYgKGVuZEFuZ2xlID4gc3RhcnRBbmdsZSArIE1hdGguUEkpIHtcbiAgICBzdGFydEFuZ2xlICs9IENlc2l1bU1hdGguVFdPX1BJO1xuICB9IGVsc2UgaWYgKGVuZEFuZ2xlIDwgc3RhcnRBbmdsZSAtIE1hdGguUEkpIHtcbiAgICBzdGFydEFuZ2xlIC09IENlc2l1bU1hdGguVFdPX1BJO1xuICB9XG5cbiAgcmV0dXJuIHN0YXJ0QW5nbGU7XG59XG5cbnZhciBzY3JhdGNoU3RhcnQgPSBuZXcgQ2FydGVzaWFuMygpO1xuXG5mdW5jdGlvbiBjcmVhdGVVcGRhdGVDVihcbiAgc2NlbmUsXG4gIGR1cmF0aW9uLFxuICBkZXN0aW5hdGlvbixcbiAgaGVhZGluZyxcbiAgcGl0Y2gsXG4gIHJvbGwsXG4gIG9wdGlvbkFsdGl0dWRlXG4pIHtcbiAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcblxuICB2YXIgc3RhcnQgPSBDYXJ0ZXNpYW4zLmNsb25lKGNhbWVyYS5wb3NpdGlvbiwgc2NyYXRjaFN0YXJ0KTtcbiAgdmFyIHN0YXJ0UGl0Y2ggPSBjYW1lcmEucGl0Y2g7XG4gIHZhciBzdGFydEhlYWRpbmcgPSBhZGp1c3RBbmdsZUZvckxFUlAoY2FtZXJhLmhlYWRpbmcsIGhlYWRpbmcpO1xuICB2YXIgc3RhcnRSb2xsID0gYWRqdXN0QW5nbGVGb3JMRVJQKGNhbWVyYS5yb2xsLCByb2xsKTtcblxuICB2YXIgaGVpZ2h0RnVuY3Rpb24gPSBjcmVhdGVIZWlnaHRGdW5jdGlvbihcbiAgICBjYW1lcmEsXG4gICAgZGVzdGluYXRpb24sXG4gICAgc3RhcnQueixcbiAgICBkZXN0aW5hdGlvbi56LFxuICAgIG9wdGlvbkFsdGl0dWRlXG4gICk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIHRpbWUgPSB2YWx1ZS50aW1lIC8gZHVyYXRpb247XG5cbiAgICBjYW1lcmEuc2V0Vmlldyh7XG4gICAgICBvcmllbnRhdGlvbjoge1xuICAgICAgICBoZWFkaW5nOiBDZXNpdW1NYXRoLmxlcnAoc3RhcnRIZWFkaW5nLCBoZWFkaW5nLCB0aW1lKSxcbiAgICAgICAgcGl0Y2g6IENlc2l1bU1hdGgubGVycChzdGFydFBpdGNoLCBwaXRjaCwgdGltZSksXG4gICAgICAgIHJvbGw6IENlc2l1bU1hdGgubGVycChzdGFydFJvbGwsIHJvbGwsIHRpbWUpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIENhcnRlc2lhbjIubGVycChzdGFydCwgZGVzdGluYXRpb24sIHRpbWUsIGNhbWVyYS5wb3NpdGlvbik7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnogPSBoZWlnaHRGdW5jdGlvbih0aW1lKTtcbiAgfVxuICByZXR1cm4gdXBkYXRlO1xufVxuXG5mdW5jdGlvbiB1c2VMb25nZXN0RmxpZ2h0KHN0YXJ0Q2FydCwgZGVzdENhcnQpIHtcbiAgaWYgKHN0YXJ0Q2FydC5sb25naXR1ZGUgPCBkZXN0Q2FydC5sb25naXR1ZGUpIHtcbiAgICBzdGFydENhcnQubG9uZ2l0dWRlICs9IENlc2l1bU1hdGguVFdPX1BJO1xuICB9IGVsc2Uge1xuICAgIGRlc3RDYXJ0LmxvbmdpdHVkZSArPSBDZXNpdW1NYXRoLlRXT19QSTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1c2VTaG9ydGVzdEZsaWdodChzdGFydENhcnQsIGRlc3RDYXJ0KSB7XG4gIHZhciBkaWZmID0gc3RhcnRDYXJ0LmxvbmdpdHVkZSAtIGRlc3RDYXJ0LmxvbmdpdHVkZTtcbiAgaWYgKGRpZmYgPCAtQ2VzaXVtTWF0aC5QSSkge1xuICAgIHN0YXJ0Q2FydC5sb25naXR1ZGUgKz0gQ2VzaXVtTWF0aC5UV09fUEk7XG4gIH0gZWxzZSBpZiAoZGlmZiA+IENlc2l1bU1hdGguUEkpIHtcbiAgICBkZXN0Q2FydC5sb25naXR1ZGUgKz0gQ2VzaXVtTWF0aC5UV09fUEk7XG4gIH1cbn1cblxudmFyIHNjcmF0Y2hTdGFydENhcnQgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgc2NyYXRjaEVuZENhcnQgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZTNEKFxuICBzY2VuZSxcbiAgZHVyYXRpb24sXG4gIGRlc3RpbmF0aW9uLFxuICBoZWFkaW5nLFxuICBwaXRjaCxcbiAgcm9sbCxcbiAgb3B0aW9uQWx0aXR1ZGUsXG4gIG9wdGlvbkZseU92ZXJMb25naXR1ZGUsXG4gIG9wdGlvbkZseU92ZXJMb25naXR1ZGVXZWlnaHQsXG4gIG9wdGlvblBpdGNoQWRqdXN0SGVpZ2h0XG4pIHtcbiAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgdmFyIHByb2plY3Rpb24gPSBzY2VuZS5tYXBQcm9qZWN0aW9uO1xuICB2YXIgZWxsaXBzb2lkID0gcHJvamVjdGlvbi5lbGxpcHNvaWQ7XG5cbiAgdmFyIHN0YXJ0Q2FydCA9IENhcnRvZ3JhcGhpYy5jbG9uZShcbiAgICBjYW1lcmEucG9zaXRpb25DYXJ0b2dyYXBoaWMsXG4gICAgc2NyYXRjaFN0YXJ0Q2FydFxuICApO1xuICB2YXIgc3RhcnRQaXRjaCA9IGNhbWVyYS5waXRjaDtcbiAgdmFyIHN0YXJ0SGVhZGluZyA9IGFkanVzdEFuZ2xlRm9yTEVSUChjYW1lcmEuaGVhZGluZywgaGVhZGluZyk7XG4gIHZhciBzdGFydFJvbGwgPSBhZGp1c3RBbmdsZUZvckxFUlAoY2FtZXJhLnJvbGwsIHJvbGwpO1xuXG4gIHZhciBkZXN0Q2FydCA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhkZXN0aW5hdGlvbiwgc2NyYXRjaEVuZENhcnQpO1xuICBzdGFydENhcnQubG9uZ2l0dWRlID0gQ2VzaXVtTWF0aC56ZXJvVG9Ud29QaShzdGFydENhcnQubG9uZ2l0dWRlKTtcbiAgZGVzdENhcnQubG9uZ2l0dWRlID0gQ2VzaXVtTWF0aC56ZXJvVG9Ud29QaShkZXN0Q2FydC5sb25naXR1ZGUpO1xuXG4gIHZhciB1c2VMb25nRmxpZ2h0ID0gZmFsc2U7XG5cbiAgaWYgKGRlZmluZWQob3B0aW9uRmx5T3ZlckxvbmdpdHVkZSkpIHtcbiAgICB2YXIgaGl0TG9uID0gQ2VzaXVtTWF0aC56ZXJvVG9Ud29QaShvcHRpb25GbHlPdmVyTG9uZ2l0dWRlKTtcblxuICAgIHZhciBsb25NaW4gPSBNYXRoLm1pbihzdGFydENhcnQubG9uZ2l0dWRlLCBkZXN0Q2FydC5sb25naXR1ZGUpO1xuICAgIHZhciBsb25NYXggPSBNYXRoLm1heChzdGFydENhcnQubG9uZ2l0dWRlLCBkZXN0Q2FydC5sb25naXR1ZGUpO1xuXG4gICAgdmFyIGhpdEluc2lkZSA9IGhpdExvbiA+PSBsb25NaW4gJiYgaGl0TG9uIDw9IGxvbk1heDtcblxuICAgIGlmIChkZWZpbmVkKG9wdGlvbkZseU92ZXJMb25naXR1ZGVXZWlnaHQpKSB7XG4gICAgICAvLyBEaXN0YW5jZSBpbnNpZGUgICgwLi4uMlBpKVxuICAgICAgdmFyIGRpbiA9IE1hdGguYWJzKHN0YXJ0Q2FydC5sb25naXR1ZGUgLSBkZXN0Q2FydC5sb25naXR1ZGUpO1xuICAgICAgLy8gRGlzdGFuY2Ugb3V0c2lkZSAoMC4uLjJQaSlcbiAgICAgIHZhciBkb3QgPSBDZXNpdW1NYXRoLlRXT19QSSAtIGRpbjtcblxuICAgICAgdmFyIGhpdERpc3RhbmNlID0gaGl0SW5zaWRlID8gZGluIDogZG90O1xuICAgICAgdmFyIG9mZkRpc3RhbmNlID0gaGl0SW5zaWRlID8gZG90IDogZGluO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGhpdERpc3RhbmNlIDwgb2ZmRGlzdGFuY2UgKiBvcHRpb25GbHlPdmVyTG9uZ2l0dWRlV2VpZ2h0ICYmXG4gICAgICAgICFoaXRJbnNpZGVcbiAgICAgICkge1xuICAgICAgICB1c2VMb25nRmxpZ2h0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFoaXRJbnNpZGUpIHtcbiAgICAgIHVzZUxvbmdGbGlnaHQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh1c2VMb25nRmxpZ2h0KSB7XG4gICAgdXNlTG9uZ2VzdEZsaWdodChzdGFydENhcnQsIGRlc3RDYXJ0KTtcbiAgfSBlbHNlIHtcbiAgICB1c2VTaG9ydGVzdEZsaWdodChzdGFydENhcnQsIGRlc3RDYXJ0KTtcbiAgfVxuXG4gIHZhciBoZWlnaHRGdW5jdGlvbiA9IGNyZWF0ZUhlaWdodEZ1bmN0aW9uKFxuICAgIGNhbWVyYSxcbiAgICBkZXN0aW5hdGlvbixcbiAgICBzdGFydENhcnQuaGVpZ2h0LFxuICAgIGRlc3RDYXJ0LmhlaWdodCxcbiAgICBvcHRpb25BbHRpdHVkZVxuICApO1xuICB2YXIgcGl0Y2hGdW5jdGlvbiA9IGNyZWF0ZVBpdGNoRnVuY3Rpb24oXG4gICAgc3RhcnRQaXRjaCxcbiAgICBwaXRjaCxcbiAgICBoZWlnaHRGdW5jdGlvbixcbiAgICBvcHRpb25QaXRjaEFkanVzdEhlaWdodFxuICApO1xuXG4gIC8vIElzb2xhdGUgc2NvcGUgZm9yIHVwZGF0ZSBmdW5jdGlvbi5cbiAgLy8gdG8gaGF2ZSBsb2NhbCBjb3BpZXMgb2YgdmFycyB1c2VkIGluIGxlcnBcbiAgLy8gT3RoZXJ2aXNlLCBpZiB5b3UgY2FsbCBuZXhcbiAgLy8gY3JlYXRlVXBkYXRlM0QgKGNyZWF0ZUFuaW1hdGlvblR3ZWVuKVxuICAvLyBiZWZvcmUgeW91IHBsYXllZCBhbmltYXRpb24sIHZhcmlhYmxlcyB3aWxsIGJlIG92ZXJ3cml0ZW4uXG4gIGZ1bmN0aW9uIGlzb2xhdGVVcGRhdGVGdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhcnRMb25naXR1ZGUgPSBzdGFydENhcnQubG9uZ2l0dWRlO1xuICAgIHZhciBkZXN0TG9uZ2l0dWRlID0gZGVzdENhcnQubG9uZ2l0dWRlO1xuICAgIHZhciBzdGFydExhdGl0dWRlID0gc3RhcnRDYXJ0LmxhdGl0dWRlO1xuICAgIHZhciBkZXN0TGF0aXR1ZGUgPSBkZXN0Q2FydC5sYXRpdHVkZTtcblxuICAgIHJldHVybiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAgIHZhciB0aW1lID0gdmFsdWUudGltZSAvIGR1cmF0aW9uO1xuXG4gICAgICB2YXIgcG9zaXRpb24gPSBDYXJ0ZXNpYW4zLmZyb21SYWRpYW5zKFxuICAgICAgICBDZXNpdW1NYXRoLmxlcnAoc3RhcnRMb25naXR1ZGUsIGRlc3RMb25naXR1ZGUsIHRpbWUpLFxuICAgICAgICBDZXNpdW1NYXRoLmxlcnAoc3RhcnRMYXRpdHVkZSwgZGVzdExhdGl0dWRlLCB0aW1lKSxcbiAgICAgICAgaGVpZ2h0RnVuY3Rpb24odGltZSksXG4gICAgICAgIGVsbGlwc29pZFxuICAgICAgKTtcblxuICAgICAgY2FtZXJhLnNldFZpZXcoe1xuICAgICAgICBkZXN0aW5hdGlvbjogcG9zaXRpb24sXG4gICAgICAgIG9yaWVudGF0aW9uOiB7XG4gICAgICAgICAgaGVhZGluZzogQ2VzaXVtTWF0aC5sZXJwKHN0YXJ0SGVhZGluZywgaGVhZGluZywgdGltZSksXG4gICAgICAgICAgcGl0Y2g6IHBpdGNoRnVuY3Rpb24odGltZSksXG4gICAgICAgICAgcm9sbDogQ2VzaXVtTWF0aC5sZXJwKHN0YXJ0Um9sbCwgcm9sbCwgdGltZSksXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBpc29sYXRlVXBkYXRlRnVuY3Rpb24oKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVXBkYXRlMkQoXG4gIHNjZW5lLFxuICBkdXJhdGlvbixcbiAgZGVzdGluYXRpb24sXG4gIGhlYWRpbmcsXG4gIHBpdGNoLFxuICByb2xsLFxuICBvcHRpb25BbHRpdHVkZVxuKSB7XG4gIHZhciBjYW1lcmEgPSBzY2VuZS5jYW1lcmE7XG5cbiAgdmFyIHN0YXJ0ID0gQ2FydGVzaWFuMy5jbG9uZShjYW1lcmEucG9zaXRpb24sIHNjcmF0Y2hTdGFydCk7XG4gIHZhciBzdGFydEhlYWRpbmcgPSBhZGp1c3RBbmdsZUZvckxFUlAoY2FtZXJhLmhlYWRpbmcsIGhlYWRpbmcpO1xuXG4gIHZhciBzdGFydEhlaWdodCA9IGNhbWVyYS5mcnVzdHVtLnJpZ2h0IC0gY2FtZXJhLmZydXN0dW0ubGVmdDtcbiAgdmFyIGhlaWdodEZ1bmN0aW9uID0gY3JlYXRlSGVpZ2h0RnVuY3Rpb24oXG4gICAgY2FtZXJhLFxuICAgIGRlc3RpbmF0aW9uLFxuICAgIHN0YXJ0SGVpZ2h0LFxuICAgIGRlc3RpbmF0aW9uLnosXG4gICAgb3B0aW9uQWx0aXR1ZGVcbiAgKTtcblxuICBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YXIgdGltZSA9IHZhbHVlLnRpbWUgLyBkdXJhdGlvbjtcblxuICAgIGNhbWVyYS5zZXRWaWV3KHtcbiAgICAgIG9yaWVudGF0aW9uOiB7XG4gICAgICAgIGhlYWRpbmc6IENlc2l1bU1hdGgubGVycChzdGFydEhlYWRpbmcsIGhlYWRpbmcsIHRpbWUpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIENhcnRlc2lhbjIubGVycChzdGFydCwgZGVzdGluYXRpb24sIHRpbWUsIGNhbWVyYS5wb3NpdGlvbik7XG5cbiAgICB2YXIgem9vbSA9IGhlaWdodEZ1bmN0aW9uKHRpbWUpO1xuXG4gICAgdmFyIGZydXN0dW0gPSBjYW1lcmEuZnJ1c3R1bTtcbiAgICB2YXIgcmF0aW8gPSBmcnVzdHVtLnRvcCAvIGZydXN0dW0ucmlnaHQ7XG5cbiAgICB2YXIgaW5jcmVtZW50QW1vdW50ID0gKHpvb20gLSAoZnJ1c3R1bS5yaWdodCAtIGZydXN0dW0ubGVmdCkpICogMC41O1xuICAgIGZydXN0dW0ucmlnaHQgKz0gaW5jcmVtZW50QW1vdW50O1xuICAgIGZydXN0dW0ubGVmdCAtPSBpbmNyZW1lbnRBbW91bnQ7XG4gICAgZnJ1c3R1bS50b3AgPSByYXRpbyAqIGZydXN0dW0ucmlnaHQ7XG4gICAgZnJ1c3R1bS5ib3R0b20gPSAtZnJ1c3R1bS50b3A7XG4gIH1cbiAgcmV0dXJuIHVwZGF0ZTtcbn1cblxudmFyIHNjcmF0Y2hDYXJ0b2dyYXBoaWMgPSBuZXcgQ2FydG9ncmFwaGljKCk7XG52YXIgc2NyYXRjaERlc3RpbmF0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcblxuZnVuY3Rpb24gZW1wdHlGbGlnaHQoY29tcGxldGUsIGNhbmNlbCkge1xuICByZXR1cm4ge1xuICAgIHN0YXJ0T2JqZWN0OiB7fSxcbiAgICBzdG9wT2JqZWN0OiB7fSxcbiAgICBkdXJhdGlvbjogMC4wLFxuICAgIGNvbXBsZXRlOiBjb21wbGV0ZSxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcENhbGxiYWNrKGNvbnRyb2xsZXIsIGNiKSB7XG4gIGZ1bmN0aW9uIHdyYXBwZWQoKSB7XG4gICAgaWYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYigpO1xuICAgIH1cblxuICAgIGNvbnRyb2xsZXIuZW5hYmxlSW5wdXRzID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuQ2FtZXJhRmxpZ2h0UGF0aC5jcmVhdGVUd2VlbiA9IGZ1bmN0aW9uIChzY2VuZSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICB2YXIgZGVzdGluYXRpb24gPSBvcHRpb25zLmRlc3RpbmF0aW9uO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghZGVmaW5lZChzY2VuZSkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXCJzY2VuZSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgaWYgKCFkZWZpbmVkKGRlc3RpbmF0aW9uKSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcImRlc3RpbmF0aW9uIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcbiAgdmFyIG1vZGUgPSBzY2VuZS5tb2RlO1xuXG4gIGlmIChtb2RlID09PSBTY2VuZU1vZGUuTU9SUEhJTkcpIHtcbiAgICByZXR1cm4gZW1wdHlGbGlnaHQoKTtcbiAgfVxuXG4gIHZhciBjb252ZXJ0ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuY29udmVydCwgdHJ1ZSk7XG4gIHZhciBwcm9qZWN0aW9uID0gc2NlbmUubWFwUHJvamVjdGlvbjtcbiAgdmFyIGVsbGlwc29pZCA9IHByb2plY3Rpb24uZWxsaXBzb2lkO1xuICB2YXIgbWF4aW11bUhlaWdodCA9IG9wdGlvbnMubWF4aW11bUhlaWdodDtcbiAgdmFyIGZseU92ZXJMb25naXR1ZGUgPSBvcHRpb25zLmZseU92ZXJMb25naXR1ZGU7XG4gIHZhciBmbHlPdmVyTG9uZ2l0dWRlV2VpZ2h0ID0gb3B0aW9ucy5mbHlPdmVyTG9uZ2l0dWRlV2VpZ2h0O1xuICB2YXIgcGl0Y2hBZGp1c3RIZWlnaHQgPSBvcHRpb25zLnBpdGNoQWRqdXN0SGVpZ2h0O1xuICB2YXIgZWFzaW5nRnVuY3Rpb24gPSBvcHRpb25zLmVhc2luZ0Z1bmN0aW9uO1xuXG4gIGlmIChjb252ZXJ0ICYmIG1vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XG4gICAgZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGRlc3RpbmF0aW9uLCBzY3JhdGNoQ2FydG9ncmFwaGljKTtcbiAgICBkZXN0aW5hdGlvbiA9IHByb2plY3Rpb24ucHJvamVjdChzY3JhdGNoQ2FydG9ncmFwaGljLCBzY3JhdGNoRGVzdGluYXRpb24pO1xuICB9XG5cbiAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgdmFyIHRyYW5zZm9ybSA9IG9wdGlvbnMuZW5kVHJhbnNmb3JtO1xuICBpZiAoZGVmaW5lZCh0cmFuc2Zvcm0pKSB7XG4gICAgY2FtZXJhLl9zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcbiAgfVxuXG4gIHZhciBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb247XG4gIGlmICghZGVmaW5lZChkdXJhdGlvbikpIHtcbiAgICBkdXJhdGlvbiA9XG4gICAgICBNYXRoLmNlaWwoQ2FydGVzaWFuMy5kaXN0YW5jZShjYW1lcmEucG9zaXRpb24sIGRlc3RpbmF0aW9uKSAvIDEwMDAwMDAuMCkgK1xuICAgICAgMi4wO1xuICAgIGR1cmF0aW9uID0gTWF0aC5taW4oZHVyYXRpb24sIDMuMCk7XG4gIH1cblxuICB2YXIgaGVhZGluZyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmhlYWRpbmcsIDAuMCk7XG4gIHZhciBwaXRjaCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnBpdGNoLCAtQ2VzaXVtTWF0aC5QSV9PVkVSX1RXTyk7XG4gIHZhciByb2xsID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMucm9sbCwgMC4wKTtcblxuICB2YXIgY29udHJvbGxlciA9IHNjZW5lLnNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlcjtcbiAgY29udHJvbGxlci5lbmFibGVJbnB1dHMgPSBmYWxzZTtcblxuICB2YXIgY29tcGxldGUgPSB3cmFwQ2FsbGJhY2soY29udHJvbGxlciwgb3B0aW9ucy5jb21wbGV0ZSk7XG4gIHZhciBjYW5jZWwgPSB3cmFwQ2FsbGJhY2soY29udHJvbGxlciwgb3B0aW9ucy5jYW5jZWwpO1xuXG4gIHZhciBmcnVzdHVtID0gY2FtZXJhLmZydXN0dW07XG5cbiAgdmFyIGVtcHR5ID0gc2NlbmUubW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQ7XG4gIGVtcHR5ID1cbiAgICBlbXB0eSAmJlxuICAgIENhcnRlc2lhbjIuZXF1YWxzRXBzaWxvbihjYW1lcmEucG9zaXRpb24sIGRlc3RpbmF0aW9uLCBDZXNpdW1NYXRoLkVQU0lMT042KTtcbiAgZW1wdHkgPVxuICAgIGVtcHR5ICYmXG4gICAgQ2VzaXVtTWF0aC5lcXVhbHNFcHNpbG9uKFxuICAgICAgTWF0aC5tYXgoZnJ1c3R1bS5yaWdodCAtIGZydXN0dW0ubGVmdCwgZnJ1c3R1bS50b3AgLSBmcnVzdHVtLmJvdHRvbSksXG4gICAgICBkZXN0aW5hdGlvbi56LFxuICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ONlxuICAgICk7XG5cbiAgZW1wdHkgPVxuICAgIGVtcHR5IHx8XG4gICAgKHNjZW5lLm1vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTJEICYmXG4gICAgICBDYXJ0ZXNpYW4zLmVxdWFsc0Vwc2lsb24oXG4gICAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgICBjYW1lcmEucG9zaXRpb24sXG4gICAgICAgIENlc2l1bU1hdGguRVBTSUxPTjEwXG4gICAgICApKTtcblxuICBlbXB0eSA9XG4gICAgZW1wdHkgJiZcbiAgICBDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oXG4gICAgICBDZXNpdW1NYXRoLm5lZ2F0aXZlUGlUb1BpKGhlYWRpbmcpLFxuICAgICAgQ2VzaXVtTWF0aC5uZWdhdGl2ZVBpVG9QaShjYW1lcmEuaGVhZGluZyksXG4gICAgICBDZXNpdW1NYXRoLkVQU0lMT04xMFxuICAgICkgJiZcbiAgICBDZXNpdW1NYXRoLmVxdWFsc0Vwc2lsb24oXG4gICAgICBDZXNpdW1NYXRoLm5lZ2F0aXZlUGlUb1BpKHBpdGNoKSxcbiAgICAgIENlc2l1bU1hdGgubmVnYXRpdmVQaVRvUGkoY2FtZXJhLnBpdGNoKSxcbiAgICAgIENlc2l1bU1hdGguRVBTSUxPTjEwXG4gICAgKSAmJlxuICAgIENlc2l1bU1hdGguZXF1YWxzRXBzaWxvbihcbiAgICAgIENlc2l1bU1hdGgubmVnYXRpdmVQaVRvUGkocm9sbCksXG4gICAgICBDZXNpdW1NYXRoLm5lZ2F0aXZlUGlUb1BpKGNhbWVyYS5yb2xsKSxcbiAgICAgIENlc2l1bU1hdGguRVBTSUxPTjEwXG4gICAgKTtcblxuICBpZiAoZW1wdHkpIHtcbiAgICByZXR1cm4gZW1wdHlGbGlnaHQoY29tcGxldGUsIGNhbmNlbCk7XG4gIH1cblxuICB2YXIgdXBkYXRlRnVuY3Rpb25zID0gbmV3IEFycmF5KDQpO1xuICB1cGRhdGVGdW5jdGlvbnNbU2NlbmVNb2RlLlNDRU5FMkRdID0gY3JlYXRlVXBkYXRlMkQ7XG4gIHVwZGF0ZUZ1bmN0aW9uc1tTY2VuZU1vZGUuU0NFTkUzRF0gPSBjcmVhdGVVcGRhdGUzRDtcbiAgdXBkYXRlRnVuY3Rpb25zW1NjZW5lTW9kZS5DT0xVTUJVU19WSUVXXSA9IGNyZWF0ZVVwZGF0ZUNWO1xuXG4gIGlmIChkdXJhdGlvbiA8PSAwLjApIHtcbiAgICB2YXIgbmV3T25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB1cGRhdGUgPSB1cGRhdGVGdW5jdGlvbnNbbW9kZV0oXG4gICAgICAgIHNjZW5lLFxuICAgICAgICAxLjAsXG4gICAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgICBoZWFkaW5nLFxuICAgICAgICBwaXRjaCxcbiAgICAgICAgcm9sbCxcbiAgICAgICAgbWF4aW11bUhlaWdodCxcbiAgICAgICAgZmx5T3ZlckxvbmdpdHVkZSxcbiAgICAgICAgZmx5T3ZlckxvbmdpdHVkZVdlaWdodCxcbiAgICAgICAgcGl0Y2hBZGp1c3RIZWlnaHRcbiAgICAgICk7XG4gICAgICB1cGRhdGUoeyB0aW1lOiAxLjAgfSk7XG5cbiAgICAgIGlmICh0eXBlb2YgY29tcGxldGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGVtcHR5RmxpZ2h0KG5ld09uQ29tcGxldGUsIGNhbmNlbCk7XG4gIH1cblxuICB2YXIgdXBkYXRlID0gdXBkYXRlRnVuY3Rpb25zW21vZGVdKFxuICAgIHNjZW5lLFxuICAgIGR1cmF0aW9uLFxuICAgIGRlc3RpbmF0aW9uLFxuICAgIGhlYWRpbmcsXG4gICAgcGl0Y2gsXG4gICAgcm9sbCxcbiAgICBtYXhpbXVtSGVpZ2h0LFxuICAgIGZseU92ZXJMb25naXR1ZGUsXG4gICAgZmx5T3ZlckxvbmdpdHVkZVdlaWdodCxcbiAgICBwaXRjaEFkanVzdEhlaWdodFxuICApO1xuXG4gIGlmICghZGVmaW5lZChlYXNpbmdGdW5jdGlvbikpIHtcbiAgICB2YXIgc3RhcnRIZWlnaHQgPSBjYW1lcmEucG9zaXRpb25DYXJ0b2dyYXBoaWMuaGVpZ2h0O1xuICAgIHZhciBlbmRIZWlnaHQgPVxuICAgICAgbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0RcbiAgICAgICAgPyBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoZGVzdGluYXRpb24pLmhlaWdodFxuICAgICAgICA6IGRlc3RpbmF0aW9uLno7XG5cbiAgICBpZiAoc3RhcnRIZWlnaHQgPiBlbmRIZWlnaHQgJiYgc3RhcnRIZWlnaHQgPiAxMTUwMC4wKSB7XG4gICAgICBlYXNpbmdGdW5jdGlvbiA9IEVhc2luZ0Z1bmN0aW9uLkNVQklDX09VVDtcbiAgICB9IGVsc2Uge1xuICAgICAgZWFzaW5nRnVuY3Rpb24gPSBFYXNpbmdGdW5jdGlvbi5RVUlOVElDX0lOX09VVDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICBlYXNpbmdGdW5jdGlvbjogZWFzaW5nRnVuY3Rpb24sXG4gICAgc3RhcnRPYmplY3Q6IHtcbiAgICAgIHRpbWU6IDAuMCxcbiAgICB9LFxuICAgIHN0b3BPYmplY3Q6IHtcbiAgICAgIHRpbWU6IGR1cmF0aW9uLFxuICAgIH0sXG4gICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgY29tcGxldGU6IGNvbXBsZXRlLFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IENhbWVyYUZsaWdodFBhdGg7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15092\n')}}]);