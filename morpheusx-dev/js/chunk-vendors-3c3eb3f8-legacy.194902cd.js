"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[5079],{56629:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _usesExtension_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29745);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82982);\n\n\n\n/**\n * Contains traversal functions for processing elements of the glTF hierarchy.\n * @constructor\n *\n * @private\n */\nfunction ForEach() {}\n\n/**\n * Fallback for glTF 1.0\n * @private\n */\nForEach.objectLegacy = function (objects, handler) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(objects)) {\n    for (const objectId in objects) {\n      if (Object.prototype.hasOwnProperty.call(objects, objectId)) {\n        const object = objects[objectId];\n        const value = handler(object, objectId);\n\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n    }\n  }\n};\n\n/**\n * @private\n */\nForEach.object = function (arrayOfObjects, handler) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(arrayOfObjects)) {\n    const length = arrayOfObjects.length;\n    for (let i = 0; i < length; i++) {\n      const object = arrayOfObjects[i];\n      const value = handler(object, i);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\n/**\n * Supports glTF 1.0 and 2.0\n * @private\n */\nForEach.topLevel = function (gltf, name, handler) {\n  const gltfProperty = gltf[name];\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltfProperty) && !Array.isArray(gltfProperty)) {\n    return ForEach.objectLegacy(gltfProperty, handler);\n  }\n\n  return ForEach.object(gltfProperty, handler);\n};\n\nForEach.accessor = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "accessors", handler);\n};\n\nForEach.accessorWithSemantic = function (gltf, semantic, handler) {\n  const visited = {};\n  return ForEach.mesh(gltf, function (mesh) {\n    return ForEach.meshPrimitive(mesh, function (primitive) {\n      const valueForEach = ForEach.meshPrimitiveAttribute(\n        primitive,\n        function (accessorId, attributeSemantic) {\n          if (\n            attributeSemantic.indexOf(semantic) === 0 &&\n            !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(visited[accessorId])\n          ) {\n            visited[accessorId] = true;\n            const value = handler(accessorId);\n\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n              return value;\n            }\n          }\n        }\n      );\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(valueForEach)) {\n        return valueForEach;\n      }\n\n      return ForEach.meshPrimitiveTarget(primitive, function (target) {\n        return ForEach.meshPrimitiveTargetAttribute(\n          target,\n          function (accessorId, attributeSemantic) {\n            if (\n              attributeSemantic.indexOf(semantic) === 0 &&\n              !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(visited[accessorId])\n            ) {\n              visited[accessorId] = true;\n              const value = handler(accessorId);\n\n              if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n                return value;\n              }\n            }\n          }\n        );\n      });\n    });\n  });\n};\n\nForEach.accessorContainingVertexAttributeData = function (gltf, handler) {\n  const visited = {};\n  return ForEach.mesh(gltf, function (mesh) {\n    return ForEach.meshPrimitive(mesh, function (primitive) {\n      const valueForEach = ForEach.meshPrimitiveAttribute(\n        primitive,\n        function (accessorId) {\n          if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(visited[accessorId])) {\n            visited[accessorId] = true;\n            const value = handler(accessorId);\n\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n              return value;\n            }\n          }\n        }\n      );\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(valueForEach)) {\n        return valueForEach;\n      }\n\n      return ForEach.meshPrimitiveTarget(primitive, function (target) {\n        return ForEach.meshPrimitiveTargetAttribute(\n          target,\n          function (accessorId) {\n            if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(visited[accessorId])) {\n              visited[accessorId] = true;\n              const value = handler(accessorId);\n\n              if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n                return value;\n              }\n            }\n          }\n        );\n      });\n    });\n  });\n};\n\nForEach.accessorContainingIndexData = function (gltf, handler) {\n  const visited = {};\n  return ForEach.mesh(gltf, function (mesh) {\n    return ForEach.meshPrimitive(mesh, function (primitive) {\n      const indices = primitive.indices;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(indices) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(visited[indices])) {\n        visited[indices] = true;\n        const value = handler(indices);\n\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n    });\n  });\n};\n\nForEach.animation = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "animations", handler);\n};\n\nForEach.animationChannel = function (animation, handler) {\n  const channels = animation.channels;\n  return ForEach.object(channels, handler);\n};\n\nForEach.animationSampler = function (animation, handler) {\n  const samplers = animation.samplers;\n  return ForEach.object(samplers, handler);\n};\n\nForEach.buffer = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "buffers", handler);\n};\n\nForEach.bufferView = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "bufferViews", handler);\n};\n\nForEach.camera = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "cameras", handler);\n};\n\nForEach.image = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "images", handler);\n};\n\nForEach.material = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "materials", handler);\n};\n\nForEach.materialValue = function (material, handler) {\n  let values = material.values;\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(material.extensions) &&\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(material.extensions.KHR_techniques_webgl)\n  ) {\n    values = material.extensions.KHR_techniques_webgl.values;\n  }\n\n  for (const name in values) {\n    if (Object.prototype.hasOwnProperty.call(values, name)) {\n      const value = handler(values[name], name);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.mesh = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "meshes", handler);\n};\n\nForEach.meshPrimitive = function (mesh, handler) {\n  const primitives = mesh.primitives;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(primitives)) {\n    const primitivesLength = primitives.length;\n    for (let i = 0; i < primitivesLength; i++) {\n      const primitive = primitives[i];\n      const value = handler(primitive, i);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.meshPrimitiveAttribute = function (primitive, handler) {\n  const attributes = primitive.attributes;\n  for (const semantic in attributes) {\n    if (Object.prototype.hasOwnProperty.call(attributes, semantic)) {\n      const value = handler(attributes[semantic], semantic);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.meshPrimitiveTarget = function (primitive, handler) {\n  const targets = primitive.targets;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(targets)) {\n    const length = targets.length;\n    for (let i = 0; i < length; ++i) {\n      const value = handler(targets[i], i);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.meshPrimitiveTargetAttribute = function (target, handler) {\n  for (const semantic in target) {\n    if (Object.prototype.hasOwnProperty.call(target, semantic)) {\n      const accessorId = target[semantic];\n      const value = handler(accessorId, semantic);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.node = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "nodes", handler);\n};\n\nForEach.nodeInTree = function (gltf, nodeIds, handler) {\n  const nodes = gltf.nodes;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(nodes)) {\n    const length = nodeIds.length;\n    for (let i = 0; i < length; i++) {\n      const nodeId = nodeIds[i];\n      const node = nodes[nodeId];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(node)) {\n        let value = handler(node, nodeId);\n\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n\n        const children = node.children;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(children)) {\n          value = ForEach.nodeInTree(gltf, children, handler);\n\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n            return value;\n          }\n        }\n      }\n    }\n  }\n};\n\nForEach.nodeInScene = function (gltf, scene, handler) {\n  const sceneNodeIds = scene.nodes;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(sceneNodeIds)) {\n    return ForEach.nodeInTree(gltf, sceneNodeIds, handler);\n  }\n};\n\nForEach.program = function (gltf, handler) {\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(gltf, "KHR_techniques_webgl")) {\n    return ForEach.object(\n      gltf.extensions.KHR_techniques_webgl.programs,\n      handler\n    );\n  }\n\n  return ForEach.topLevel(gltf, "programs", handler);\n};\n\nForEach.sampler = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "samplers", handler);\n};\n\nForEach.scene = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "scenes", handler);\n};\n\nForEach.shader = function (gltf, handler) {\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(gltf, "KHR_techniques_webgl")) {\n    return ForEach.object(\n      gltf.extensions.KHR_techniques_webgl.shaders,\n      handler\n    );\n  }\n\n  return ForEach.topLevel(gltf, "shaders", handler);\n};\n\nForEach.skin = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "skins", handler);\n};\n\nForEach.skinJoint = function (skin, handler) {\n  const joints = skin.joints;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(joints)) {\n    const jointsLength = joints.length;\n    for (let i = 0; i < jointsLength; i++) {\n      const joint = joints[i];\n      const value = handler(joint);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.techniqueAttribute = function (technique, handler) {\n  const attributes = technique.attributes;\n  for (const attributeName in attributes) {\n    if (Object.prototype.hasOwnProperty.call(attributes, attributeName)) {\n      const value = handler(attributes[attributeName], attributeName);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.techniqueUniform = function (technique, handler) {\n  const uniforms = technique.uniforms;\n  for (const uniformName in uniforms) {\n    if (Object.prototype.hasOwnProperty.call(uniforms, uniformName)) {\n      const value = handler(uniforms[uniformName], uniformName);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.techniqueParameter = function (technique, handler) {\n  const parameters = technique.parameters;\n  for (const parameterName in parameters) {\n    if (Object.prototype.hasOwnProperty.call(parameters, parameterName)) {\n      const value = handler(parameters[parameterName], parameterName);\n\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n};\n\nForEach.technique = function (gltf, handler) {\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(gltf, "KHR_techniques_webgl")) {\n    return ForEach.object(\n      gltf.extensions.KHR_techniques_webgl.techniques,\n      handler\n    );\n  }\n\n  return ForEach.topLevel(gltf, "techniques", handler);\n};\n\nForEach.texture = function (gltf, handler) {\n  return ForEach.topLevel(gltf, "textures", handler);\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (ForEach);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUEsWUFBWSxxRUFBTztBQUNuQjtBQUNBOztBQUVBO0FBQ0EsWUFBWSxxRUFBTztBQUNuQjs7QUFFQSxjQUFjLHFFQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSxzRUFBYTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU0sc0VBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTSxxRUFBTztBQUNiO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBOztBQUVBLFVBQVUscUVBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVUscUVBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVUscUVBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVUscUVBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU0sc0VBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx5REFBZSxPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR2x0ZlBpcGVsaW5lL0ZvckVhY2guanM/N2U5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdXNlc0V4dGVuc2lvbiBmcm9tIFwiLi91c2VzRXh0ZW5zaW9uLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5cbi8qKlxuICogQ29udGFpbnMgdHJhdmVyc2FsIGZ1bmN0aW9ucyBmb3IgcHJvY2Vzc2luZyBlbGVtZW50cyBvZiB0aGUgZ2xURiBoaWVyYXJjaHkuXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBGb3JFYWNoKCkge31cblxuLyoqXG4gKiBGYWxsYmFjayBmb3IgZ2xURiAxLjBcbiAqIEBwcml2YXRlXG4gKi9cbkZvckVhY2gub2JqZWN0TGVnYWN5ID0gZnVuY3Rpb24gKG9iamVjdHMsIGhhbmRsZXIpIHtcbiAgaWYgKGRlZmluZWQob2JqZWN0cykpIHtcbiAgICBmb3IgKGNvbnN0IG9iamVjdElkIGluIG9iamVjdHMpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0cywgb2JqZWN0SWQpKSB7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IG9iamVjdHNbb2JqZWN0SWRdO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIob2JqZWN0LCBvYmplY3RJZCk7XG5cbiAgICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkZvckVhY2gub2JqZWN0ID0gZnVuY3Rpb24gKGFycmF5T2ZPYmplY3RzLCBoYW5kbGVyKSB7XG4gIGlmIChkZWZpbmVkKGFycmF5T2ZPYmplY3RzKSkge1xuICAgIGNvbnN0IGxlbmd0aCA9IGFycmF5T2ZPYmplY3RzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBvYmplY3QgPSBhcnJheU9mT2JqZWN0c1tpXTtcbiAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihvYmplY3QsIGkpO1xuXG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTdXBwb3J0cyBnbFRGIDEuMCBhbmQgMi4wXG4gKiBAcHJpdmF0ZVxuICovXG5Gb3JFYWNoLnRvcExldmVsID0gZnVuY3Rpb24gKGdsdGYsIG5hbWUsIGhhbmRsZXIpIHtcbiAgY29uc3QgZ2x0ZlByb3BlcnR5ID0gZ2x0ZltuYW1lXTtcbiAgaWYgKGRlZmluZWQoZ2x0ZlByb3BlcnR5KSAmJiAhQXJyYXkuaXNBcnJheShnbHRmUHJvcGVydHkpKSB7XG4gICAgcmV0dXJuIEZvckVhY2gub2JqZWN0TGVnYWN5KGdsdGZQcm9wZXJ0eSwgaGFuZGxlcik7XG4gIH1cblxuICByZXR1cm4gRm9yRWFjaC5vYmplY3QoZ2x0ZlByb3BlcnR5LCBoYW5kbGVyKTtcbn07XG5cbkZvckVhY2guYWNjZXNzb3IgPSBmdW5jdGlvbiAoZ2x0ZiwgaGFuZGxlcikge1xuICByZXR1cm4gRm9yRWFjaC50b3BMZXZlbChnbHRmLCBcImFjY2Vzc29yc1wiLCBoYW5kbGVyKTtcbn07XG5cbkZvckVhY2guYWNjZXNzb3JXaXRoU2VtYW50aWMgPSBmdW5jdGlvbiAoZ2x0Ziwgc2VtYW50aWMsIGhhbmRsZXIpIHtcbiAgY29uc3QgdmlzaXRlZCA9IHt9O1xuICByZXR1cm4gRm9yRWFjaC5tZXNoKGdsdGYsIGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgcmV0dXJuIEZvckVhY2gubWVzaFByaW1pdGl2ZShtZXNoLCBmdW5jdGlvbiAocHJpbWl0aXZlKSB7XG4gICAgICBjb25zdCB2YWx1ZUZvckVhY2ggPSBGb3JFYWNoLm1lc2hQcmltaXRpdmVBdHRyaWJ1dGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgZnVuY3Rpb24gKGFjY2Vzc29ySWQsIGF0dHJpYnV0ZVNlbWFudGljKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXR0cmlidXRlU2VtYW50aWMuaW5kZXhPZihzZW1hbnRpYykgPT09IDAgJiZcbiAgICAgICAgICAgICFkZWZpbmVkKHZpc2l0ZWRbYWNjZXNzb3JJZF0pXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB2aXNpdGVkW2FjY2Vzc29ySWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihhY2Nlc3NvcklkKTtcblxuICAgICAgICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlRm9yRWFjaCkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlRm9yRWFjaDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEZvckVhY2gubWVzaFByaW1pdGl2ZVRhcmdldChwcmltaXRpdmUsIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIEZvckVhY2gubWVzaFByaW1pdGl2ZVRhcmdldEF0dHJpYnV0ZShcbiAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgZnVuY3Rpb24gKGFjY2Vzc29ySWQsIGF0dHJpYnV0ZVNlbWFudGljKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGF0dHJpYnV0ZVNlbWFudGljLmluZGV4T2Yoc2VtYW50aWMpID09PSAwICYmXG4gICAgICAgICAgICAgICFkZWZpbmVkKHZpc2l0ZWRbYWNjZXNzb3JJZF0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdmlzaXRlZFthY2Nlc3NvcklkXSA9IHRydWU7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihhY2Nlc3NvcklkKTtcblxuICAgICAgICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5Gb3JFYWNoLmFjY2Vzc29yQ29udGFpbmluZ1ZlcnRleEF0dHJpYnV0ZURhdGEgPSBmdW5jdGlvbiAoZ2x0ZiwgaGFuZGxlcikge1xuICBjb25zdCB2aXNpdGVkID0ge307XG4gIHJldHVybiBGb3JFYWNoLm1lc2goZ2x0ZiwgZnVuY3Rpb24gKG1lc2gpIHtcbiAgICByZXR1cm4gRm9yRWFjaC5tZXNoUHJpbWl0aXZlKG1lc2gsIGZ1bmN0aW9uIChwcmltaXRpdmUpIHtcbiAgICAgIGNvbnN0IHZhbHVlRm9yRWFjaCA9IEZvckVhY2gubWVzaFByaW1pdGl2ZUF0dHJpYnV0ZShcbiAgICAgICAgcHJpbWl0aXZlLFxuICAgICAgICBmdW5jdGlvbiAoYWNjZXNzb3JJZCkge1xuICAgICAgICAgIGlmICghZGVmaW5lZCh2aXNpdGVkW2FjY2Vzc29ySWRdKSkge1xuICAgICAgICAgICAgdmlzaXRlZFthY2Nlc3NvcklkXSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIoYWNjZXNzb3JJZCk7XG5cbiAgICAgICAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZUZvckVhY2gpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUZvckVhY2g7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBGb3JFYWNoLm1lc2hQcmltaXRpdmVUYXJnZXQocHJpbWl0aXZlLCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBGb3JFYWNoLm1lc2hQcmltaXRpdmVUYXJnZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgIGZ1bmN0aW9uIChhY2Nlc3NvcklkKSB7XG4gICAgICAgICAgICBpZiAoIWRlZmluZWQodmlzaXRlZFthY2Nlc3NvcklkXSkpIHtcbiAgICAgICAgICAgICAgdmlzaXRlZFthY2Nlc3NvcklkXSA9IHRydWU7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihhY2Nlc3NvcklkKTtcblxuICAgICAgICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5Gb3JFYWNoLmFjY2Vzc29yQ29udGFpbmluZ0luZGV4RGF0YSA9IGZ1bmN0aW9uIChnbHRmLCBoYW5kbGVyKSB7XG4gIGNvbnN0IHZpc2l0ZWQgPSB7fTtcbiAgcmV0dXJuIEZvckVhY2gubWVzaChnbHRmLCBmdW5jdGlvbiAobWVzaCkge1xuICAgIHJldHVybiBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgY29uc3QgaW5kaWNlcyA9IHByaW1pdGl2ZS5pbmRpY2VzO1xuICAgICAgaWYgKGRlZmluZWQoaW5kaWNlcykgJiYgIWRlZmluZWQodmlzaXRlZFtpbmRpY2VzXSkpIHtcbiAgICAgICAgdmlzaXRlZFtpbmRpY2VzXSA9IHRydWU7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihpbmRpY2VzKTtcblxuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5Gb3JFYWNoLmFuaW1hdGlvbiA9IGZ1bmN0aW9uIChnbHRmLCBoYW5kbGVyKSB7XG4gIHJldHVybiBGb3JFYWNoLnRvcExldmVsKGdsdGYsIFwiYW5pbWF0aW9uc1wiLCBoYW5kbGVyKTtcbn07XG5cbkZvckVhY2guYW5pbWF0aW9uQ2hhbm5lbCA9IGZ1bmN0aW9uIChhbmltYXRpb24sIGhhbmRsZXIpIHtcbiAgY29uc3QgY2hhbm5lbHMgPSBhbmltYXRpb24uY2hhbm5lbHM7XG4gIHJldHVybiBGb3JFYWNoLm9iamVjdChjaGFubmVscywgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLmFuaW1hdGlvblNhbXBsZXIgPSBmdW5jdGlvbiAoYW5pbWF0aW9uLCBoYW5kbGVyKSB7XG4gIGNvbnN0IHNhbXBsZXJzID0gYW5pbWF0aW9uLnNhbXBsZXJzO1xuICByZXR1cm4gRm9yRWFjaC5vYmplY3Qoc2FtcGxlcnMsIGhhbmRsZXIpO1xufTtcblxuRm9yRWFjaC5idWZmZXIgPSBmdW5jdGlvbiAoZ2x0ZiwgaGFuZGxlcikge1xuICByZXR1cm4gRm9yRWFjaC50b3BMZXZlbChnbHRmLCBcImJ1ZmZlcnNcIiwgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLmJ1ZmZlclZpZXcgPSBmdW5jdGlvbiAoZ2x0ZiwgaGFuZGxlcikge1xuICByZXR1cm4gRm9yRWFjaC50b3BMZXZlbChnbHRmLCBcImJ1ZmZlclZpZXdzXCIsIGhhbmRsZXIpO1xufTtcblxuRm9yRWFjaC5jYW1lcmEgPSBmdW5jdGlvbiAoZ2x0ZiwgaGFuZGxlcikge1xuICByZXR1cm4gRm9yRWFjaC50b3BMZXZlbChnbHRmLCBcImNhbWVyYXNcIiwgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLmltYWdlID0gZnVuY3Rpb24gKGdsdGYsIGhhbmRsZXIpIHtcbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJpbWFnZXNcIiwgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLm1hdGVyaWFsID0gZnVuY3Rpb24gKGdsdGYsIGhhbmRsZXIpIHtcbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJtYXRlcmlhbHNcIiwgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLm1hdGVyaWFsVmFsdWUgPSBmdW5jdGlvbiAobWF0ZXJpYWwsIGhhbmRsZXIpIHtcbiAgbGV0IHZhbHVlcyA9IG1hdGVyaWFsLnZhbHVlcztcbiAgaWYgKFxuICAgIGRlZmluZWQobWF0ZXJpYWwuZXh0ZW5zaW9ucykgJiZcbiAgICBkZWZpbmVkKG1hdGVyaWFsLmV4dGVuc2lvbnMuS0hSX3RlY2huaXF1ZXNfd2ViZ2wpXG4gICkge1xuICAgIHZhbHVlcyA9IG1hdGVyaWFsLmV4dGVuc2lvbnMuS0hSX3RlY2huaXF1ZXNfd2ViZ2wudmFsdWVzO1xuICB9XG5cbiAgZm9yIChjb25zdCBuYW1lIGluIHZhbHVlcykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsdWVzLCBuYW1lKSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKHZhbHVlc1tuYW1lXSwgbmFtZSk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5Gb3JFYWNoLm1lc2ggPSBmdW5jdGlvbiAoZ2x0ZiwgaGFuZGxlcikge1xuICByZXR1cm4gRm9yRWFjaC50b3BMZXZlbChnbHRmLCBcIm1lc2hlc1wiLCBoYW5kbGVyKTtcbn07XG5cbkZvckVhY2gubWVzaFByaW1pdGl2ZSA9IGZ1bmN0aW9uIChtZXNoLCBoYW5kbGVyKSB7XG4gIGNvbnN0IHByaW1pdGl2ZXMgPSBtZXNoLnByaW1pdGl2ZXM7XG4gIGlmIChkZWZpbmVkKHByaW1pdGl2ZXMpKSB7XG4gICAgY29uc3QgcHJpbWl0aXZlc0xlbmd0aCA9IHByaW1pdGl2ZXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJpbWl0aXZlc0xlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwcmltaXRpdmUgPSBwcmltaXRpdmVzW2ldO1xuICAgICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKHByaW1pdGl2ZSwgaSk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5Gb3JFYWNoLm1lc2hQcmltaXRpdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAocHJpbWl0aXZlLCBoYW5kbGVyKSB7XG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSBwcmltaXRpdmUuYXR0cmlidXRlcztcbiAgZm9yIChjb25zdCBzZW1hbnRpYyBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdHRyaWJ1dGVzLCBzZW1hbnRpYykpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihhdHRyaWJ1dGVzW3NlbWFudGljXSwgc2VtYW50aWMpO1xuXG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuRm9yRWFjaC5tZXNoUHJpbWl0aXZlVGFyZ2V0ID0gZnVuY3Rpb24gKHByaW1pdGl2ZSwgaGFuZGxlcikge1xuICBjb25zdCB0YXJnZXRzID0gcHJpbWl0aXZlLnRhcmdldHM7XG4gIGlmIChkZWZpbmVkKHRhcmdldHMpKSB7XG4gICAgY29uc3QgbGVuZ3RoID0gdGFyZ2V0cy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKHRhcmdldHNbaV0sIGkpO1xuXG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuRm9yRWFjaC5tZXNoUHJpbWl0aXZlVGFyZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKHRhcmdldCwgaGFuZGxlcikge1xuICBmb3IgKGNvbnN0IHNlbWFudGljIGluIHRhcmdldCkge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBzZW1hbnRpYykpIHtcbiAgICAgIGNvbnN0IGFjY2Vzc29ySWQgPSB0YXJnZXRbc2VtYW50aWNdO1xuICAgICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKGFjY2Vzc29ySWQsIHNlbWFudGljKTtcblxuICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbkZvckVhY2gubm9kZSA9IGZ1bmN0aW9uIChnbHRmLCBoYW5kbGVyKSB7XG4gIHJldHVybiBGb3JFYWNoLnRvcExldmVsKGdsdGYsIFwibm9kZXNcIiwgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLm5vZGVJblRyZWUgPSBmdW5jdGlvbiAoZ2x0Ziwgbm9kZUlkcywgaGFuZGxlcikge1xuICBjb25zdCBub2RlcyA9IGdsdGYubm9kZXM7XG4gIGlmIChkZWZpbmVkKG5vZGVzKSkge1xuICAgIGNvbnN0IGxlbmd0aCA9IG5vZGVJZHMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vZGVJZCA9IG5vZGVJZHNbaV07XG4gICAgICBjb25zdCBub2RlID0gbm9kZXNbbm9kZUlkXTtcbiAgICAgIGlmIChkZWZpbmVkKG5vZGUpKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGhhbmRsZXIobm9kZSwgbm9kZUlkKTtcblxuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgIGlmIChkZWZpbmVkKGNoaWxkcmVuKSkge1xuICAgICAgICAgIHZhbHVlID0gRm9yRWFjaC5ub2RlSW5UcmVlKGdsdGYsIGNoaWxkcmVuLCBoYW5kbGVyKTtcblxuICAgICAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuRm9yRWFjaC5ub2RlSW5TY2VuZSA9IGZ1bmN0aW9uIChnbHRmLCBzY2VuZSwgaGFuZGxlcikge1xuICBjb25zdCBzY2VuZU5vZGVJZHMgPSBzY2VuZS5ub2RlcztcbiAgaWYgKGRlZmluZWQoc2NlbmVOb2RlSWRzKSkge1xuICAgIHJldHVybiBGb3JFYWNoLm5vZGVJblRyZWUoZ2x0Ziwgc2NlbmVOb2RlSWRzLCBoYW5kbGVyKTtcbiAgfVxufTtcblxuRm9yRWFjaC5wcm9ncmFtID0gZnVuY3Rpb24gKGdsdGYsIGhhbmRsZXIpIHtcbiAgaWYgKHVzZXNFeHRlbnNpb24oZ2x0ZiwgXCJLSFJfdGVjaG5pcXVlc193ZWJnbFwiKSkge1xuICAgIHJldHVybiBGb3JFYWNoLm9iamVjdChcbiAgICAgIGdsdGYuZXh0ZW5zaW9ucy5LSFJfdGVjaG5pcXVlc193ZWJnbC5wcm9ncmFtcyxcbiAgICAgIGhhbmRsZXJcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJwcm9ncmFtc1wiLCBoYW5kbGVyKTtcbn07XG5cbkZvckVhY2guc2FtcGxlciA9IGZ1bmN0aW9uIChnbHRmLCBoYW5kbGVyKSB7XG4gIHJldHVybiBGb3JFYWNoLnRvcExldmVsKGdsdGYsIFwic2FtcGxlcnNcIiwgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLnNjZW5lID0gZnVuY3Rpb24gKGdsdGYsIGhhbmRsZXIpIHtcbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJzY2VuZXNcIiwgaGFuZGxlcik7XG59O1xuXG5Gb3JFYWNoLnNoYWRlciA9IGZ1bmN0aW9uIChnbHRmLCBoYW5kbGVyKSB7XG4gIGlmICh1c2VzRXh0ZW5zaW9uKGdsdGYsIFwiS0hSX3RlY2huaXF1ZXNfd2ViZ2xcIikpIHtcbiAgICByZXR1cm4gRm9yRWFjaC5vYmplY3QoXG4gICAgICBnbHRmLmV4dGVuc2lvbnMuS0hSX3RlY2huaXF1ZXNfd2ViZ2wuc2hhZGVycyxcbiAgICAgIGhhbmRsZXJcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJzaGFkZXJzXCIsIGhhbmRsZXIpO1xufTtcblxuRm9yRWFjaC5za2luID0gZnVuY3Rpb24gKGdsdGYsIGhhbmRsZXIpIHtcbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJza2luc1wiLCBoYW5kbGVyKTtcbn07XG5cbkZvckVhY2guc2tpbkpvaW50ID0gZnVuY3Rpb24gKHNraW4sIGhhbmRsZXIpIHtcbiAgY29uc3Qgam9pbnRzID0gc2tpbi5qb2ludHM7XG4gIGlmIChkZWZpbmVkKGpvaW50cykpIHtcbiAgICBjb25zdCBqb2ludHNMZW5ndGggPSBqb2ludHMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgam9pbnRzTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGpvaW50ID0gam9pbnRzW2ldO1xuICAgICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKGpvaW50KTtcblxuICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbkZvckVhY2gudGVjaG5pcXVlQXR0cmlidXRlID0gZnVuY3Rpb24gKHRlY2huaXF1ZSwgaGFuZGxlcikge1xuICBjb25zdCBhdHRyaWJ1dGVzID0gdGVjaG5pcXVlLmF0dHJpYnV0ZXM7XG4gIGZvciAoY29uc3QgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdHRyaWJ1dGVzLCBhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0sIGF0dHJpYnV0ZU5hbWUpO1xuXG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuRm9yRWFjaC50ZWNobmlxdWVVbmlmb3JtID0gZnVuY3Rpb24gKHRlY2huaXF1ZSwgaGFuZGxlcikge1xuICBjb25zdCB1bmlmb3JtcyA9IHRlY2huaXF1ZS51bmlmb3JtcztcbiAgZm9yIChjb25zdCB1bmlmb3JtTmFtZSBpbiB1bmlmb3Jtcykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodW5pZm9ybXMsIHVuaWZvcm1OYW1lKSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKHVuaWZvcm1zW3VuaWZvcm1OYW1lXSwgdW5pZm9ybU5hbWUpO1xuXG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuRm9yRWFjaC50ZWNobmlxdWVQYXJhbWV0ZXIgPSBmdW5jdGlvbiAodGVjaG5pcXVlLCBoYW5kbGVyKSB7XG4gIGNvbnN0IHBhcmFtZXRlcnMgPSB0ZWNobmlxdWUucGFyYW1ldGVycztcbiAgZm9yIChjb25zdCBwYXJhbWV0ZXJOYW1lIGluIHBhcmFtZXRlcnMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcmFtZXRlcnMsIHBhcmFtZXRlck5hbWUpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIocGFyYW1ldGVyc1twYXJhbWV0ZXJOYW1lXSwgcGFyYW1ldGVyTmFtZSk7XG5cbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5Gb3JFYWNoLnRlY2huaXF1ZSA9IGZ1bmN0aW9uIChnbHRmLCBoYW5kbGVyKSB7XG4gIGlmICh1c2VzRXh0ZW5zaW9uKGdsdGYsIFwiS0hSX3RlY2huaXF1ZXNfd2ViZ2xcIikpIHtcbiAgICByZXR1cm4gRm9yRWFjaC5vYmplY3QoXG4gICAgICBnbHRmLmV4dGVuc2lvbnMuS0hSX3RlY2huaXF1ZXNfd2ViZ2wudGVjaG5pcXVlcyxcbiAgICAgIGhhbmRsZXJcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJ0ZWNobmlxdWVzXCIsIGhhbmRsZXIpO1xufTtcblxuRm9yRWFjaC50ZXh0dXJlID0gZnVuY3Rpb24gKGdsdGYsIGhhbmRsZXIpIHtcbiAgcmV0dXJuIEZvckVhY2gudG9wTGV2ZWwoZ2x0ZiwgXCJ0ZXh0dXJlc1wiLCBoYW5kbGVyKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvckVhY2g7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///56629\n')},99461:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9919);\n\n\n/**\n * Adds buffer to gltf.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {Buffer} buffer A Buffer object which will be added to gltf.buffers.\n * @returns {Number} The bufferView id of the newly added bufferView.\n *\n * @private\n */\nfunction addBuffer(gltf, buffer) {\n  const newBuffer = {\n    byteLength: buffer.length,\n    extras: {\n      _pipeline: {\n        source: buffer,\n      },\n    },\n  };\n  const bufferId = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf.buffers, newBuffer);\n  const bufferView = {\n    buffer: bufferId,\n    byteOffset: 0,\n    byteLength: buffer.length,\n  };\n  return (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf.bufferViews, bufferView);\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (addBuffer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTk0NjEuanMiLCJtYXBwaW5ncyI6IjtBQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLG1CQUFtQixtRUFBVTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtRUFBVTtBQUNuQjs7QUFFQSx5REFBZSxTQUFTLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR2x0ZlBpcGVsaW5lL2FkZEJ1ZmZlci5qcz9iMTI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhZGRUb0FycmF5IGZyb20gXCIuL2FkZFRvQXJyYXkuanNcIjtcblxuLyoqXG4gKiBBZGRzIGJ1ZmZlciB0byBnbHRmLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmZmVyIEEgQnVmZmVyIG9iamVjdCB3aGljaCB3aWxsIGJlIGFkZGVkIHRvIGdsdGYuYnVmZmVycy5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBidWZmZXJWaWV3IGlkIG9mIHRoZSBuZXdseSBhZGRlZCBidWZmZXJWaWV3LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZEJ1ZmZlcihnbHRmLCBidWZmZXIpIHtcbiAgY29uc3QgbmV3QnVmZmVyID0ge1xuICAgIGJ5dGVMZW5ndGg6IGJ1ZmZlci5sZW5ndGgsXG4gICAgZXh0cmFzOiB7XG4gICAgICBfcGlwZWxpbmU6IHtcbiAgICAgICAgc291cmNlOiBidWZmZXIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG4gIGNvbnN0IGJ1ZmZlcklkID0gYWRkVG9BcnJheShnbHRmLmJ1ZmZlcnMsIG5ld0J1ZmZlcik7XG4gIGNvbnN0IGJ1ZmZlclZpZXcgPSB7XG4gICAgYnVmZmVyOiBidWZmZXJJZCxcbiAgICBieXRlT2Zmc2V0OiAwLFxuICAgIGJ5dGVMZW5ndGg6IGJ1ZmZlci5sZW5ndGgsXG4gIH07XG4gIHJldHVybiBhZGRUb0FycmF5KGdsdGYuYnVmZmVyVmlld3MsIGJ1ZmZlclZpZXcpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhZGRCdWZmZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///99461\n')},32550:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9919);\n/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56629);\n/* harmony import */ var _getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(93224);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52200);\n\n\n\n\n\n\n\n/**\n * Adds default glTF values if they don\'t exist.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @returns {Object} The modified glTF.\n *\n * @private\n */\nfunction addDefaults(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].accessor */ .Z.accessor(gltf, function (accessor) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(accessor.bufferView)) {\n      accessor.byteOffset = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(accessor.byteOffset, 0);\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].bufferView */ .Z.bufferView(gltf, function (bufferView) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(bufferView.buffer)) {\n      bufferView.byteOffset = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(bufferView.byteOffset, 0);\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      primitive.mode = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitive.mode, _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].TRIANGLES */ .Z.TRIANGLES);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(primitive.material)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(gltf.materials)) {\n          gltf.materials = [];\n        }\n        const defaultMaterial = {\n          name: "default",\n        };\n        primitive.material = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf.materials, defaultMaterial);\n      }\n    });\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].accessorContainingVertexAttributeData */ .Z.accessorContainingVertexAttributeData(gltf, function (accessorId) {\n    const accessor = gltf.accessors[accessorId];\n    const bufferViewId = accessor.bufferView;\n    accessor.normalized = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(accessor.normalized, false);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(bufferViewId)) {\n      const bufferView = gltf.bufferViews[bufferViewId];\n      bufferView.byteStride = (0,_getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(gltf, accessor);\n      bufferView.target = _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ARRAY_BUFFER */ .Z.ARRAY_BUFFER;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].accessorContainingIndexData */ .Z.accessorContainingIndexData(gltf, function (accessorId) {\n    const accessor = gltf.accessors[accessorId];\n    const bufferViewId = accessor.bufferView;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(bufferViewId)) {\n      const bufferView = gltf.bufferViews[bufferViewId];\n      bufferView.target = _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].ELEMENT_ARRAY_BUFFER */ .Z.ELEMENT_ARRAY_BUFFER;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].material */ .Z.material(gltf, function (material) {\n    const extensions = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n      material.extensions,\n      _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT\n    );\n    const materialsCommon = extensions.KHR_materials_common;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(materialsCommon)) {\n      const technique = materialsCommon.technique;\n      const values = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(materialsCommon.values)\n        ? materialsCommon.values\n        : {};\n      materialsCommon.values = values;\n\n      values.ambient = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(values.ambient)\n        ? values.ambient\n        : [0.0, 0.0, 0.0, 1.0];\n      values.emission = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(values.emission)\n        ? values.emission\n        : [0.0, 0.0, 0.0, 1.0];\n\n      values.transparency = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(values.transparency, 1.0);\n      values.transparent = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(values.transparent, false);\n      values.doubleSided = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(values.doubleSided, false);\n\n      if (technique !== "CONSTANT") {\n        values.diffuse = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(values.diffuse)\n          ? values.diffuse\n          : [0.0, 0.0, 0.0, 1.0];\n        if (technique !== "LAMBERT") {\n          values.specular = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(values.specular)\n            ? values.specular\n            : [0.0, 0.0, 0.0, 1.0];\n          values.shininess = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(values.shininess, 0.0);\n        }\n      }\n      return;\n    }\n\n    material.emissiveFactor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n      material.emissiveFactor,\n      [0.0, 0.0, 0.0]\n    );\n    material.alphaMode = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(material.alphaMode, "OPAQUE");\n    material.doubleSided = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(material.doubleSided, false);\n\n    if (material.alphaMode === "MASK") {\n      material.alphaCutoff = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(material.alphaCutoff, 0.5);\n    }\n\n    const techniquesExtension = extensions.KHR_techniques_webgl;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(techniquesExtension)) {\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].materialValue */ .Z.materialValue(material, function (materialValue) {\n        // Check if material value is a TextureInfo object\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(materialValue.index)) {\n          addTextureDefaults(materialValue);\n        }\n      });\n    }\n\n    addTextureDefaults(material.emissiveTexture);\n    addTextureDefaults(material.normalTexture);\n    addTextureDefaults(material.occlusionTexture);\n\n    const pbrMetallicRoughness = material.pbrMetallicRoughness;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(pbrMetallicRoughness)) {\n      pbrMetallicRoughness.baseColorFactor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n        pbrMetallicRoughness.baseColorFactor,\n        [1.0, 1.0, 1.0, 1.0]\n      );\n      pbrMetallicRoughness.metallicFactor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n        pbrMetallicRoughness.metallicFactor,\n        1.0\n      );\n      pbrMetallicRoughness.roughnessFactor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n        pbrMetallicRoughness.roughnessFactor,\n        1.0\n      );\n      addTextureDefaults(pbrMetallicRoughness.baseColorTexture);\n      addTextureDefaults(pbrMetallicRoughness.metallicRoughnessTexture);\n    }\n\n    const pbrSpecularGlossiness =\n      extensions.KHR_materials_pbrSpecularGlossiness;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(pbrSpecularGlossiness)) {\n      pbrSpecularGlossiness.diffuseFactor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n        pbrSpecularGlossiness.diffuseFactor,\n        [1.0, 1.0, 1.0, 1.0]\n      );\n      pbrSpecularGlossiness.specularFactor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n        pbrSpecularGlossiness.specularFactor,\n        [1.0, 1.0, 1.0]\n      );\n      pbrSpecularGlossiness.glossinessFactor = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n        pbrSpecularGlossiness.glossinessFactor,\n        1.0\n      );\n      addTextureDefaults(pbrSpecularGlossiness.specularGlossinessTexture);\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].animationSampler */ .Z.animationSampler(animation, function (sampler) {\n      sampler.interpolation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(sampler.interpolation, "LINEAR");\n    });\n  });\n\n  const animatedNodes = getAnimatedNodes(gltf);\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].node */ .Z.node(gltf, function (node, id) {\n    const animated = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(animatedNodes[id]);\n    if (\n      animated ||\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(node.translation) ||\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(node.rotation) ||\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(node.scale)\n    ) {\n      node.translation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.translation, [0.0, 0.0, 0.0]);\n      node.rotation = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.rotation, [0.0, 0.0, 0.0, 1.0]);\n      node.scale = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.scale, [1.0, 1.0, 1.0]);\n    } else {\n      node.matrix = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(\n        node.matrix,\n        [\n          1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0,\n          0.0, 1.0,\n        ]\n      );\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].sampler */ .Z.sampler(gltf, function (sampler) {\n    sampler.wrapS = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(sampler.wrapS, _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].REPEAT */ .Z.REPEAT);\n    sampler.wrapT = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(sampler.wrapT, _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].REPEAT */ .Z.REPEAT);\n  });\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(gltf.scenes) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(gltf.scene)) {\n    gltf.scene = 0;\n  }\n\n  return gltf;\n}\n\nfunction getAnimatedNodes(gltf) {\n  const nodes = {};\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].animationChannel */ .Z.animationChannel(animation, function (channel) {\n      const target = channel.target;\n      const nodeId = target.node;\n      const path = target.path;\n      // Ignore animations that target \'weights\'\n      if (path === "translation" || path === "rotation" || path === "scale") {\n        nodes[nodeId] = true;\n      }\n    });\n  });\n  return nodes;\n}\n\nfunction addTextureDefaults(texture) {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(texture)) {\n    texture.texCoord = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.texCoord, 0);\n  }\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (addDefaults);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFLDRFQUFlO0FBQ2pCLG9CQUFvQiwwRUFBWSxnQkFBZ0Isc0ZBQXFCO0FBQ3JFLG9CQUFvQiwwRUFBWSxnQkFBZ0Isc0ZBQXFCO0FBQ3JFLEdBQUc7O0FBRUgsTUFBTSxxRUFBTyxrQkFBa0IscUVBQU87QUFDdEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFLGdGQUFpQjtBQUNuQixJQUFJLDhGQUF3QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLE1BQU0scUVBQU87QUFDYix1QkFBdUIsMEVBQVk7QUFDbkM7QUFDQTs7QUFFQSx5REFBZSxXQUFXLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR2x0ZlBpcGVsaW5lL2FkZERlZmF1bHRzLmpzP2I0NzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkZFRvQXJyYXkgZnJvbSBcIi4vYWRkVG9BcnJheS5qc1wiO1xuaW1wb3J0IEZvckVhY2ggZnJvbSBcIi4vRm9yRWFjaC5qc1wiO1xuaW1wb3J0IGdldEFjY2Vzc29yQnl0ZVN0cmlkZSBmcm9tIFwiLi9nZXRBY2Nlc3NvckJ5dGVTdHJpZGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uLy4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgV2ViR0xDb25zdGFudHMgZnJvbSBcIi4uLy4uL0NvcmUvV2ViR0xDb25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBBZGRzIGRlZmF1bHQgZ2xURiB2YWx1ZXMgaWYgdGhleSBkb24ndCBleGlzdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2x0ZiBBIGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgYSBnbFRGIGFzc2V0LlxuICogQHJldHVybnMge09iamVjdH0gVGhlIG1vZGlmaWVkIGdsVEYuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkRGVmYXVsdHMoZ2x0Zikge1xuICBGb3JFYWNoLmFjY2Vzc29yKGdsdGYsIGZ1bmN0aW9uIChhY2Nlc3Nvcikge1xuICAgIGlmIChkZWZpbmVkKGFjY2Vzc29yLmJ1ZmZlclZpZXcpKSB7XG4gICAgICBhY2Nlc3Nvci5ieXRlT2Zmc2V0ID0gZGVmYXVsdFZhbHVlKGFjY2Vzc29yLmJ5dGVPZmZzZXQsIDApO1xuICAgIH1cbiAgfSk7XG5cbiAgRm9yRWFjaC5idWZmZXJWaWV3KGdsdGYsIGZ1bmN0aW9uIChidWZmZXJWaWV3KSB7XG4gICAgaWYgKGRlZmluZWQoYnVmZmVyVmlldy5idWZmZXIpKSB7XG4gICAgICBidWZmZXJWaWV3LmJ5dGVPZmZzZXQgPSBkZWZhdWx0VmFsdWUoYnVmZmVyVmlldy5ieXRlT2Zmc2V0LCAwKTtcbiAgICB9XG4gIH0pO1xuXG4gIEZvckVhY2gubWVzaChnbHRmLCBmdW5jdGlvbiAobWVzaCkge1xuICAgIEZvckVhY2gubWVzaFByaW1pdGl2ZShtZXNoLCBmdW5jdGlvbiAocHJpbWl0aXZlKSB7XG4gICAgICBwcmltaXRpdmUubW9kZSA9IGRlZmF1bHRWYWx1ZShwcmltaXRpdmUubW9kZSwgV2ViR0xDb25zdGFudHMuVFJJQU5HTEVTKTtcbiAgICAgIGlmICghZGVmaW5lZChwcmltaXRpdmUubWF0ZXJpYWwpKSB7XG4gICAgICAgIGlmICghZGVmaW5lZChnbHRmLm1hdGVyaWFscykpIHtcbiAgICAgICAgICBnbHRmLm1hdGVyaWFscyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmF1bHRNYXRlcmlhbCA9IHtcbiAgICAgICAgICBuYW1lOiBcImRlZmF1bHRcIixcbiAgICAgICAgfTtcbiAgICAgICAgcHJpbWl0aXZlLm1hdGVyaWFsID0gYWRkVG9BcnJheShnbHRmLm1hdGVyaWFscywgZGVmYXVsdE1hdGVyaWFsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgRm9yRWFjaC5hY2Nlc3NvckNvbnRhaW5pbmdWZXJ0ZXhBdHRyaWJ1dGVEYXRhKGdsdGYsIGZ1bmN0aW9uIChhY2Nlc3NvcklkKSB7XG4gICAgY29uc3QgYWNjZXNzb3IgPSBnbHRmLmFjY2Vzc29yc1thY2Nlc3NvcklkXTtcbiAgICBjb25zdCBidWZmZXJWaWV3SWQgPSBhY2Nlc3Nvci5idWZmZXJWaWV3O1xuICAgIGFjY2Vzc29yLm5vcm1hbGl6ZWQgPSBkZWZhdWx0VmFsdWUoYWNjZXNzb3Iubm9ybWFsaXplZCwgZmFsc2UpO1xuICAgIGlmIChkZWZpbmVkKGJ1ZmZlclZpZXdJZCkpIHtcbiAgICAgIGNvbnN0IGJ1ZmZlclZpZXcgPSBnbHRmLmJ1ZmZlclZpZXdzW2J1ZmZlclZpZXdJZF07XG4gICAgICBidWZmZXJWaWV3LmJ5dGVTdHJpZGUgPSBnZXRBY2Nlc3NvckJ5dGVTdHJpZGUoZ2x0ZiwgYWNjZXNzb3IpO1xuICAgICAgYnVmZmVyVmlldy50YXJnZXQgPSBXZWJHTENvbnN0YW50cy5BUlJBWV9CVUZGRVI7XG4gICAgfVxuICB9KTtcblxuICBGb3JFYWNoLmFjY2Vzc29yQ29udGFpbmluZ0luZGV4RGF0YShnbHRmLCBmdW5jdGlvbiAoYWNjZXNzb3JJZCkge1xuICAgIGNvbnN0IGFjY2Vzc29yID0gZ2x0Zi5hY2Nlc3NvcnNbYWNjZXNzb3JJZF07XG4gICAgY29uc3QgYnVmZmVyVmlld0lkID0gYWNjZXNzb3IuYnVmZmVyVmlldztcbiAgICBpZiAoZGVmaW5lZChidWZmZXJWaWV3SWQpKSB7XG4gICAgICBjb25zdCBidWZmZXJWaWV3ID0gZ2x0Zi5idWZmZXJWaWV3c1tidWZmZXJWaWV3SWRdO1xuICAgICAgYnVmZmVyVmlldy50YXJnZXQgPSBXZWJHTENvbnN0YW50cy5FTEVNRU5UX0FSUkFZX0JVRkZFUjtcbiAgICB9XG4gIH0pO1xuXG4gIEZvckVhY2gubWF0ZXJpYWwoZ2x0ZiwgZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IGRlZmF1bHRWYWx1ZShcbiAgICAgIG1hdGVyaWFsLmV4dGVuc2lvbnMsXG4gICAgICBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUXG4gICAgKTtcbiAgICBjb25zdCBtYXRlcmlhbHNDb21tb24gPSBleHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY29tbW9uO1xuICAgIGlmIChkZWZpbmVkKG1hdGVyaWFsc0NvbW1vbikpIHtcbiAgICAgIGNvbnN0IHRlY2huaXF1ZSA9IG1hdGVyaWFsc0NvbW1vbi50ZWNobmlxdWU7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBkZWZpbmVkKG1hdGVyaWFsc0NvbW1vbi52YWx1ZXMpXG4gICAgICAgID8gbWF0ZXJpYWxzQ29tbW9uLnZhbHVlc1xuICAgICAgICA6IHt9O1xuICAgICAgbWF0ZXJpYWxzQ29tbW9uLnZhbHVlcyA9IHZhbHVlcztcblxuICAgICAgdmFsdWVzLmFtYmllbnQgPSBkZWZpbmVkKHZhbHVlcy5hbWJpZW50KVxuICAgICAgICA/IHZhbHVlcy5hbWJpZW50XG4gICAgICAgIDogWzAuMCwgMC4wLCAwLjAsIDEuMF07XG4gICAgICB2YWx1ZXMuZW1pc3Npb24gPSBkZWZpbmVkKHZhbHVlcy5lbWlzc2lvbilcbiAgICAgICAgPyB2YWx1ZXMuZW1pc3Npb25cbiAgICAgICAgOiBbMC4wLCAwLjAsIDAuMCwgMS4wXTtcblxuICAgICAgdmFsdWVzLnRyYW5zcGFyZW5jeSA9IGRlZmF1bHRWYWx1ZSh2YWx1ZXMudHJhbnNwYXJlbmN5LCAxLjApO1xuICAgICAgdmFsdWVzLnRyYW5zcGFyZW50ID0gZGVmYXVsdFZhbHVlKHZhbHVlcy50cmFuc3BhcmVudCwgZmFsc2UpO1xuICAgICAgdmFsdWVzLmRvdWJsZVNpZGVkID0gZGVmYXVsdFZhbHVlKHZhbHVlcy5kb3VibGVTaWRlZCwgZmFsc2UpO1xuXG4gICAgICBpZiAodGVjaG5pcXVlICE9PSBcIkNPTlNUQU5UXCIpIHtcbiAgICAgICAgdmFsdWVzLmRpZmZ1c2UgPSBkZWZpbmVkKHZhbHVlcy5kaWZmdXNlKVxuICAgICAgICAgID8gdmFsdWVzLmRpZmZ1c2VcbiAgICAgICAgICA6IFswLjAsIDAuMCwgMC4wLCAxLjBdO1xuICAgICAgICBpZiAodGVjaG5pcXVlICE9PSBcIkxBTUJFUlRcIikge1xuICAgICAgICAgIHZhbHVlcy5zcGVjdWxhciA9IGRlZmluZWQodmFsdWVzLnNwZWN1bGFyKVxuICAgICAgICAgICAgPyB2YWx1ZXMuc3BlY3VsYXJcbiAgICAgICAgICAgIDogWzAuMCwgMC4wLCAwLjAsIDEuMF07XG4gICAgICAgICAgdmFsdWVzLnNoaW5pbmVzcyA9IGRlZmF1bHRWYWx1ZSh2YWx1ZXMuc2hpbmluZXNzLCAwLjApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWF0ZXJpYWwuZW1pc3NpdmVGYWN0b3IgPSBkZWZhdWx0VmFsdWUoXG4gICAgICBtYXRlcmlhbC5lbWlzc2l2ZUZhY3RvcixcbiAgICAgIFswLjAsIDAuMCwgMC4wXVxuICAgICk7XG4gICAgbWF0ZXJpYWwuYWxwaGFNb2RlID0gZGVmYXVsdFZhbHVlKG1hdGVyaWFsLmFscGhhTW9kZSwgXCJPUEFRVUVcIik7XG4gICAgbWF0ZXJpYWwuZG91YmxlU2lkZWQgPSBkZWZhdWx0VmFsdWUobWF0ZXJpYWwuZG91YmxlU2lkZWQsIGZhbHNlKTtcblxuICAgIGlmIChtYXRlcmlhbC5hbHBoYU1vZGUgPT09IFwiTUFTS1wiKSB7XG4gICAgICBtYXRlcmlhbC5hbHBoYUN1dG9mZiA9IGRlZmF1bHRWYWx1ZShtYXRlcmlhbC5hbHBoYUN1dG9mZiwgMC41KTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZWNobmlxdWVzRXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5LSFJfdGVjaG5pcXVlc193ZWJnbDtcbiAgICBpZiAoZGVmaW5lZCh0ZWNobmlxdWVzRXh0ZW5zaW9uKSkge1xuICAgICAgRm9yRWFjaC5tYXRlcmlhbFZhbHVlKG1hdGVyaWFsLCBmdW5jdGlvbiAobWF0ZXJpYWxWYWx1ZSkge1xuICAgICAgICAvLyBDaGVjayBpZiBtYXRlcmlhbCB2YWx1ZSBpcyBhIFRleHR1cmVJbmZvIG9iamVjdFxuICAgICAgICBpZiAoZGVmaW5lZChtYXRlcmlhbFZhbHVlLmluZGV4KSkge1xuICAgICAgICAgIGFkZFRleHR1cmVEZWZhdWx0cyhtYXRlcmlhbFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkVGV4dHVyZURlZmF1bHRzKG1hdGVyaWFsLmVtaXNzaXZlVGV4dHVyZSk7XG4gICAgYWRkVGV4dHVyZURlZmF1bHRzKG1hdGVyaWFsLm5vcm1hbFRleHR1cmUpO1xuICAgIGFkZFRleHR1cmVEZWZhdWx0cyhtYXRlcmlhbC5vY2NsdXNpb25UZXh0dXJlKTtcblxuICAgIGNvbnN0IHBick1ldGFsbGljUm91Z2huZXNzID0gbWF0ZXJpYWwucGJyTWV0YWxsaWNSb3VnaG5lc3M7XG4gICAgaWYgKGRlZmluZWQocGJyTWV0YWxsaWNSb3VnaG5lc3MpKSB7XG4gICAgICBwYnJNZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3IgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgIHBick1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvcixcbiAgICAgICAgWzEuMCwgMS4wLCAxLjAsIDEuMF1cbiAgICAgICk7XG4gICAgICBwYnJNZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY0ZhY3RvciA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgcGJyTWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3IsXG4gICAgICAgIDEuMFxuICAgICAgKTtcbiAgICAgIHBick1ldGFsbGljUm91Z2huZXNzLnJvdWdobmVzc0ZhY3RvciA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgcGJyTWV0YWxsaWNSb3VnaG5lc3Mucm91Z2huZXNzRmFjdG9yLFxuICAgICAgICAxLjBcbiAgICAgICk7XG4gICAgICBhZGRUZXh0dXJlRGVmYXVsdHMocGJyTWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZSk7XG4gICAgICBhZGRUZXh0dXJlRGVmYXVsdHMocGJyTWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYnJTcGVjdWxhckdsb3NzaW5lc3MgPVxuICAgICAgZXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcztcbiAgICBpZiAoZGVmaW5lZChwYnJTcGVjdWxhckdsb3NzaW5lc3MpKSB7XG4gICAgICBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZUZhY3RvciA9IGRlZmF1bHRWYWx1ZShcbiAgICAgICAgcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VGYWN0b3IsXG4gICAgICAgIFsxLjAsIDEuMCwgMS4wLCAxLjBdXG4gICAgICApO1xuICAgICAgcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyRmFjdG9yID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBwYnJTcGVjdWxhckdsb3NzaW5lc3Muc3BlY3VsYXJGYWN0b3IsXG4gICAgICAgIFsxLjAsIDEuMCwgMS4wXVxuICAgICAgKTtcbiAgICAgIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5nbG9zc2luZXNzRmFjdG9yID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZ2xvc3NpbmVzc0ZhY3RvcixcbiAgICAgICAgMS4wXG4gICAgICApO1xuICAgICAgYWRkVGV4dHVyZURlZmF1bHRzKHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlKTtcbiAgICB9XG4gIH0pO1xuXG4gIEZvckVhY2guYW5pbWF0aW9uKGdsdGYsIGZ1bmN0aW9uIChhbmltYXRpb24pIHtcbiAgICBGb3JFYWNoLmFuaW1hdGlvblNhbXBsZXIoYW5pbWF0aW9uLCBmdW5jdGlvbiAoc2FtcGxlcikge1xuICAgICAgc2FtcGxlci5pbnRlcnBvbGF0aW9uID0gZGVmYXVsdFZhbHVlKHNhbXBsZXIuaW50ZXJwb2xhdGlvbiwgXCJMSU5FQVJcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IGFuaW1hdGVkTm9kZXMgPSBnZXRBbmltYXRlZE5vZGVzKGdsdGYpO1xuICBGb3JFYWNoLm5vZGUoZ2x0ZiwgZnVuY3Rpb24gKG5vZGUsIGlkKSB7XG4gICAgY29uc3QgYW5pbWF0ZWQgPSBkZWZpbmVkKGFuaW1hdGVkTm9kZXNbaWRdKTtcbiAgICBpZiAoXG4gICAgICBhbmltYXRlZCB8fFxuICAgICAgZGVmaW5lZChub2RlLnRyYW5zbGF0aW9uKSB8fFxuICAgICAgZGVmaW5lZChub2RlLnJvdGF0aW9uKSB8fFxuICAgICAgZGVmaW5lZChub2RlLnNjYWxlKVxuICAgICkge1xuICAgICAgbm9kZS50cmFuc2xhdGlvbiA9IGRlZmF1bHRWYWx1ZShub2RlLnRyYW5zbGF0aW9uLCBbMC4wLCAwLjAsIDAuMF0pO1xuICAgICAgbm9kZS5yb3RhdGlvbiA9IGRlZmF1bHRWYWx1ZShub2RlLnJvdGF0aW9uLCBbMC4wLCAwLjAsIDAuMCwgMS4wXSk7XG4gICAgICBub2RlLnNjYWxlID0gZGVmYXVsdFZhbHVlKG5vZGUuc2NhbGUsIFsxLjAsIDEuMCwgMS4wXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUubWF0cml4ID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBub2RlLm1hdHJpeCxcbiAgICAgICAgW1xuICAgICAgICAgIDEuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAxLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMS4wLCAwLjAsIDAuMCwgMC4wLFxuICAgICAgICAgIDAuMCwgMS4wLFxuICAgICAgICBdXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgRm9yRWFjaC5zYW1wbGVyKGdsdGYsIGZ1bmN0aW9uIChzYW1wbGVyKSB7XG4gICAgc2FtcGxlci53cmFwUyA9IGRlZmF1bHRWYWx1ZShzYW1wbGVyLndyYXBTLCBXZWJHTENvbnN0YW50cy5SRVBFQVQpO1xuICAgIHNhbXBsZXIud3JhcFQgPSBkZWZhdWx0VmFsdWUoc2FtcGxlci53cmFwVCwgV2ViR0xDb25zdGFudHMuUkVQRUFUKTtcbiAgfSk7XG5cbiAgaWYgKGRlZmluZWQoZ2x0Zi5zY2VuZXMpICYmICFkZWZpbmVkKGdsdGYuc2NlbmUpKSB7XG4gICAgZ2x0Zi5zY2VuZSA9IDA7XG4gIH1cblxuICByZXR1cm4gZ2x0Zjtcbn1cblxuZnVuY3Rpb24gZ2V0QW5pbWF0ZWROb2RlcyhnbHRmKSB7XG4gIGNvbnN0IG5vZGVzID0ge307XG4gIEZvckVhY2guYW5pbWF0aW9uKGdsdGYsIGZ1bmN0aW9uIChhbmltYXRpb24pIHtcbiAgICBGb3JFYWNoLmFuaW1hdGlvbkNoYW5uZWwoYW5pbWF0aW9uLCBmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gY2hhbm5lbC50YXJnZXQ7XG4gICAgICBjb25zdCBub2RlSWQgPSB0YXJnZXQubm9kZTtcbiAgICAgIGNvbnN0IHBhdGggPSB0YXJnZXQucGF0aDtcbiAgICAgIC8vIElnbm9yZSBhbmltYXRpb25zIHRoYXQgdGFyZ2V0ICd3ZWlnaHRzJ1xuICAgICAgaWYgKHBhdGggPT09IFwidHJhbnNsYXRpb25cIiB8fCBwYXRoID09PSBcInJvdGF0aW9uXCIgfHwgcGF0aCA9PT0gXCJzY2FsZVwiKSB7XG4gICAgICAgIG5vZGVzW25vZGVJZF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5mdW5jdGlvbiBhZGRUZXh0dXJlRGVmYXVsdHModGV4dHVyZSkge1xuICBpZiAoZGVmaW5lZCh0ZXh0dXJlKSkge1xuICAgIHRleHR1cmUudGV4Q29vcmQgPSBkZWZhdWx0VmFsdWUodGV4dHVyZS50ZXhDb29yZCwgMCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYWRkRGVmYXVsdHM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///32550\n')},35094:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75954);\n/* harmony import */ var _addToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9919);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82982);\n\n\n\n\n/**\n * Adds an extension to gltf.extensionsRequired if it does not already exist.\n * Initializes extensionsRequired if it is not defined.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {String} extension The extension to add.\n *\n * @private\n */\nfunction addExtensionsRequired(gltf, extension) {\n  let extensionsRequired = gltf.extensionsRequired;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(extensionsRequired)) {\n    extensionsRequired = [];\n    gltf.extensionsRequired = extensionsRequired;\n  }\n  (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(extensionsRequired, extension, true);\n  (0,_addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf, extension);\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (addExtensionsRequired);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUwOTQuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQXVEO0FBQ2Q7QUFDRzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHFFQUFPO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsRUFBRSxtRUFBVTtBQUNaLEVBQUUsMEVBQWlCO0FBQ25COztBQUVBLHlEQUFlLHFCQUFxQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS9hZGRFeHRlbnNpb25zUmVxdWlyZWQuanM/MDc4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYWRkRXh0ZW5zaW9uc1VzZWQgZnJvbSBcIi4vYWRkRXh0ZW5zaW9uc1VzZWQuanNcIjtcbmltcG9ydCBhZGRUb0FycmF5IGZyb20gXCIuL2FkZFRvQXJyYXkuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBBZGRzIGFuIGV4dGVuc2lvbiB0byBnbHRmLmV4dGVuc2lvbnNSZXF1aXJlZCBpZiBpdCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0LlxuICogSW5pdGlhbGl6ZXMgZXh0ZW5zaW9uc1JlcXVpcmVkIGlmIGl0IGlzIG5vdCBkZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcGFyYW0ge1N0cmluZ30gZXh0ZW5zaW9uIFRoZSBleHRlbnNpb24gdG8gYWRkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZEV4dGVuc2lvbnNSZXF1aXJlZChnbHRmLCBleHRlbnNpb24pIHtcbiAgbGV0IGV4dGVuc2lvbnNSZXF1aXJlZCA9IGdsdGYuZXh0ZW5zaW9uc1JlcXVpcmVkO1xuICBpZiAoIWRlZmluZWQoZXh0ZW5zaW9uc1JlcXVpcmVkKSkge1xuICAgIGV4dGVuc2lvbnNSZXF1aXJlZCA9IFtdO1xuICAgIGdsdGYuZXh0ZW5zaW9uc1JlcXVpcmVkID0gZXh0ZW5zaW9uc1JlcXVpcmVkO1xuICB9XG4gIGFkZFRvQXJyYXkoZXh0ZW5zaW9uc1JlcXVpcmVkLCBleHRlbnNpb24sIHRydWUpO1xuICBhZGRFeHRlbnNpb25zVXNlZChnbHRmLCBleHRlbnNpb24pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhZGRFeHRlbnNpb25zUmVxdWlyZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///35094\n')},75954:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9919);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82982);\n\n\n\n/**\n * Adds an extension to gltf.extensionsUsed if it does not already exist.\n * Initializes extensionsUsed if it is not defined.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {String} extension The extension to add.\n *\n * @private\n */\nfunction addExtensionsUsed(gltf, extension) {\n  let extensionsUsed = gltf.extensionsUsed;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(extensionsUsed)) {\n    extensionsUsed = [];\n    gltf.extensionsUsed = extensionsUsed;\n  }\n  (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(extensionsUsed, extension, true);\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (addExtensionsUsed);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzU5NTQuanMiLCJtYXBwaW5ncyI6Ijs7QUFBeUM7QUFDRzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHFFQUFPO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsRUFBRSxtRUFBVTtBQUNaOztBQUVBLHlEQUFlLGlCQUFpQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS9hZGRFeHRlbnNpb25zVXNlZC5qcz84MDIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhZGRUb0FycmF5IGZyb20gXCIuL2FkZFRvQXJyYXkuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBBZGRzIGFuIGV4dGVuc2lvbiB0byBnbHRmLmV4dGVuc2lvbnNVc2VkIGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3QuXG4gKiBJbml0aWFsaXplcyBleHRlbnNpb25zVXNlZCBpZiBpdCBpcyBub3QgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2x0ZiBBIGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgYSBnbFRGIGFzc2V0LlxuICogQHBhcmFtIHtTdHJpbmd9IGV4dGVuc2lvbiBUaGUgZXh0ZW5zaW9uIHRvIGFkZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRFeHRlbnNpb25zVXNlZChnbHRmLCBleHRlbnNpb24pIHtcbiAgbGV0IGV4dGVuc2lvbnNVc2VkID0gZ2x0Zi5leHRlbnNpb25zVXNlZDtcbiAgaWYgKCFkZWZpbmVkKGV4dGVuc2lvbnNVc2VkKSkge1xuICAgIGV4dGVuc2lvbnNVc2VkID0gW107XG4gICAgZ2x0Zi5leHRlbnNpb25zVXNlZCA9IGV4dGVuc2lvbnNVc2VkO1xuICB9XG4gIGFkZFRvQXJyYXkoZXh0ZW5zaW9uc1VzZWQsIGV4dGVuc2lvbiwgdHJ1ZSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFkZEV4dGVuc2lvbnNVc2VkO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///75954\n')},93410:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56629);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82982);\n\n\n\n/**\n * Adds extras._pipeline to each object that can have extras in the glTF asset.\n * This stage runs before updateVersion and handles both glTF 1.0 and glTF 2.0 assets.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @returns {Object} The glTF asset with the added pipeline extras.\n *\n * @private\n */\nfunction addPipelineExtras(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].shader */ .Z.shader(gltf, function (shader) {\n    addExtras(shader);\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].buffer */ .Z.buffer(gltf, function (buffer) {\n    addExtras(buffer);\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].image */ .Z.image(gltf, function (image) {\n    addExtras(image);\n  });\n\n  addExtras(gltf);\n\n  return gltf;\n}\n\nfunction addExtras(object) {\n  object.extras = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(object.extras) ? object.extras : {};\n  object.extras._pipeline = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(object.extras._pipeline)\n    ? object.extras._pipeline\n    : {};\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (addPipelineExtras);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTM0MTAuanMiLCJtYXBwaW5ncyI6Ijs7QUFBbUM7QUFDUzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwwRUFBYztBQUNoQjtBQUNBLEdBQUc7QUFDSCxFQUFFLDBFQUFjO0FBQ2hCO0FBQ0EsR0FBRztBQUNILEVBQUUsd0VBQWE7QUFDZjtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixxRUFBTztBQUN6Qiw0QkFBNEIscUVBQU87QUFDbkM7QUFDQTtBQUNBOztBQUVBLHlEQUFlLGlCQUFpQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS9hZGRQaXBlbGluZUV4dHJhcy5qcz81YjdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGb3JFYWNoIGZyb20gXCIuL0ZvckVhY2guanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBBZGRzIGV4dHJhcy5fcGlwZWxpbmUgdG8gZWFjaCBvYmplY3QgdGhhdCBjYW4gaGF2ZSBleHRyYXMgaW4gdGhlIGdsVEYgYXNzZXQuXG4gKiBUaGlzIHN0YWdlIHJ1bnMgYmVmb3JlIHVwZGF0ZVZlcnNpb24gYW5kIGhhbmRsZXMgYm90aCBnbFRGIDEuMCBhbmQgZ2xURiAyLjAgYXNzZXRzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgZ2xURiBhc3NldCB3aXRoIHRoZSBhZGRlZCBwaXBlbGluZSBleHRyYXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkUGlwZWxpbmVFeHRyYXMoZ2x0Zikge1xuICBGb3JFYWNoLnNoYWRlcihnbHRmLCBmdW5jdGlvbiAoc2hhZGVyKSB7XG4gICAgYWRkRXh0cmFzKHNoYWRlcik7XG4gIH0pO1xuICBGb3JFYWNoLmJ1ZmZlcihnbHRmLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgYWRkRXh0cmFzKGJ1ZmZlcik7XG4gIH0pO1xuICBGb3JFYWNoLmltYWdlKGdsdGYsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgIGFkZEV4dHJhcyhpbWFnZSk7XG4gIH0pO1xuXG4gIGFkZEV4dHJhcyhnbHRmKTtcblxuICByZXR1cm4gZ2x0Zjtcbn1cblxuZnVuY3Rpb24gYWRkRXh0cmFzKG9iamVjdCkge1xuICBvYmplY3QuZXh0cmFzID0gZGVmaW5lZChvYmplY3QuZXh0cmFzKSA/IG9iamVjdC5leHRyYXMgOiB7fTtcbiAgb2JqZWN0LmV4dHJhcy5fcGlwZWxpbmUgPSBkZWZpbmVkKG9iamVjdC5leHRyYXMuX3BpcGVsaW5lKVxuICAgID8gb2JqZWN0LmV4dHJhcy5fcGlwZWxpbmVcbiAgICA6IHt9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBhZGRQaXBlbGluZUV4dHJhcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///93410\n')},9919:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62200);\n\n\n/**\n * Adds an element to an array and returns the element\'s index.\n *\n * @param {Array} array The array to add to.\n * @param {Object} element The element to add.\n * @param {Boolean} [checkDuplicates=false] When <code>true</code>, if a duplicate element is found its index is returned and <code>element</code> is not added to the array.\n *\n * @private\n */\nfunction addToArray(array, element, checkDuplicates) {\n  checkDuplicates = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(checkDuplicates, false);\n  if (checkDuplicates) {\n    const index = array.indexOf(element);\n    if (index > -1) {\n      return index;\n    }\n  }\n\n  array.push(element);\n  return array.length - 1;\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (addToArray);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTkxOS5qcyIsIm1hcHBpbmdzIjoiO0FBQXNEOztBQUV0RDtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwRUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHlEQUFlLFVBQVUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvYWRkVG9BcnJheS5qcz82ZWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uLy4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5cbi8qKlxuICogQWRkcyBhbiBlbGVtZW50IHRvIGFuIGFycmF5IGFuZCByZXR1cm5zIHRoZSBlbGVtZW50J3MgaW5kZXguXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGFkZCB0by5cbiAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGFkZC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2NoZWNrRHVwbGljYXRlcz1mYWxzZV0gV2hlbiA8Y29kZT50cnVlPC9jb2RlPiwgaWYgYSBkdXBsaWNhdGUgZWxlbWVudCBpcyBmb3VuZCBpdHMgaW5kZXggaXMgcmV0dXJuZWQgYW5kIDxjb2RlPmVsZW1lbnQ8L2NvZGU+IGlzIG5vdCBhZGRlZCB0byB0aGUgYXJyYXkuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkVG9BcnJheShhcnJheSwgZWxlbWVudCwgY2hlY2tEdXBsaWNhdGVzKSB7XG4gIGNoZWNrRHVwbGljYXRlcyA9IGRlZmF1bHRWYWx1ZShjaGVja0R1cGxpY2F0ZXMsIGZhbHNlKTtcbiAgaWYgKGNoZWNrRHVwbGljYXRlcykge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyYXkuaW5kZXhPZihlbGVtZW50KTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgfVxuXG4gIGFycmF5LnB1c2goZWxlbWVudCk7XG4gIHJldHVybiBhcnJheS5sZW5ndGggLSAxO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhZGRUb0FycmF5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9919\n')},77324:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(93224);\n/* harmony import */ var _getComponentReader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2378);\n/* harmony import */ var _numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(26806);\n/* harmony import */ var _Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(23401);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n\n\n\n\n\n\n\n/**\n * Finds the min and max values of the accessor.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {Object} accessor The accessor object from the glTF asset to read.\n * @returns {{min: Array, max: Array}} min holding the array of minimum values and max holding the array of maximum values.\n *\n * @private\n */\nfunction findAccessorMinMax(gltf, accessor) {\n  const bufferViews = gltf.bufferViews;\n  const buffers = gltf.buffers;\n  const bufferViewId = accessor.bufferView;\n  const numberOfComponents = (0,_numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(accessor.type);\n\n  // According to the spec, when bufferView is not defined, accessor must be initialized with zeros\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(accessor.bufferView)) {\n    return {\n      min: (0,_Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(new Array(numberOfComponents), 0.0),\n      max: (0,_Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(new Array(numberOfComponents), 0.0),\n    };\n  }\n\n  const min = (0,_Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    new Array(numberOfComponents),\n    Number.POSITIVE_INFINITY\n  );\n  const max = (0,_Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n    new Array(numberOfComponents),\n    Number.NEGATIVE_INFINITY\n  );\n\n  const bufferView = bufferViews[bufferViewId];\n  const bufferId = bufferView.buffer;\n  const buffer = buffers[bufferId];\n  const source = buffer.extras._pipeline.source;\n\n  const count = accessor.count;\n  const byteStride = (0,_getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf, accessor);\n  let byteOffset =\n    accessor.byteOffset + bufferView.byteOffset + source.byteOffset;\n  const componentType = accessor.componentType;\n  const componentTypeByteLength =\n    _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getSizeInBytes */ .Z.getSizeInBytes(componentType);\n  const dataView = new DataView(source.buffer);\n  const components = new Array(numberOfComponents);\n  const componentReader = (0,_getComponentReader_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(componentType);\n\n  for (let i = 0; i < count; i++) {\n    componentReader(\n      dataView,\n      byteOffset,\n      numberOfComponents,\n      componentTypeByteLength,\n      components\n    );\n    for (let j = 0; j < numberOfComponents; j++) {\n      const value = components[j];\n      min[j] = Math.min(min[j], value);\n      max[j] = Math.max(max[j], value);\n    }\n    byteOffset += byteStride;\n  }\n\n  return {\n    min: min,\n    max: max,\n  };\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (findAccessorMinMax);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzczMjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStEO0FBQ047QUFDYztBQUN2QjtBQUNnQjtBQUNwQjs7QUFFNUM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixjQUFjLHlCQUF5QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrRkFBeUI7O0FBRXREO0FBQ0EsT0FBTyxxRUFBTztBQUNkO0FBQ0EsV0FBVyx1RUFBUztBQUNwQixXQUFXLHVFQUFTO0FBQ3BCO0FBQ0E7O0FBRUEsY0FBYyx1RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQiw4RUFBcUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHlHQUFnQztBQUNwQztBQUNBO0FBQ0EsMEJBQTBCLDJFQUFrQjs7QUFFNUMsa0JBQWtCLFdBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlEQUFlLGtCQUFrQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS9maW5kQWNjZXNzb3JNaW5NYXguanM/ZjVhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2V0QWNjZXNzb3JCeXRlU3RyaWRlIGZyb20gXCIuL2dldEFjY2Vzc29yQnl0ZVN0cmlkZS5qc1wiO1xuaW1wb3J0IGdldENvbXBvbmVudFJlYWRlciBmcm9tIFwiLi9nZXRDb21wb25lbnRSZWFkZXIuanNcIjtcbmltcG9ydCBudW1iZXJPZkNvbXBvbmVudHNGb3JUeXBlIGZyb20gXCIuL251bWJlck9mQ29tcG9uZW50c0ZvclR5cGUuanNcIjtcbmltcG9ydCBhcnJheUZpbGwgZnJvbSBcIi4uLy4uL0NvcmUvYXJyYXlGaWxsLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uLy4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBGaW5kcyB0aGUgbWluIGFuZCBtYXggdmFsdWVzIG9mIHRoZSBhY2Nlc3Nvci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2x0ZiBBIGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgYSBnbFRGIGFzc2V0LlxuICogQHBhcmFtIHtPYmplY3R9IGFjY2Vzc29yIFRoZSBhY2Nlc3NvciBvYmplY3QgZnJvbSB0aGUgZ2xURiBhc3NldCB0byByZWFkLlxuICogQHJldHVybnMge3ttaW46IEFycmF5LCBtYXg6IEFycmF5fX0gbWluIGhvbGRpbmcgdGhlIGFycmF5IG9mIG1pbmltdW0gdmFsdWVzIGFuZCBtYXggaG9sZGluZyB0aGUgYXJyYXkgb2YgbWF4aW11bSB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZmluZEFjY2Vzc29yTWluTWF4KGdsdGYsIGFjY2Vzc29yKSB7XG4gIGNvbnN0IGJ1ZmZlclZpZXdzID0gZ2x0Zi5idWZmZXJWaWV3cztcbiAgY29uc3QgYnVmZmVycyA9IGdsdGYuYnVmZmVycztcbiAgY29uc3QgYnVmZmVyVmlld0lkID0gYWNjZXNzb3IuYnVmZmVyVmlldztcbiAgY29uc3QgbnVtYmVyT2ZDb21wb25lbnRzID0gbnVtYmVyT2ZDb21wb25lbnRzRm9yVHlwZShhY2Nlc3Nvci50eXBlKTtcblxuICAvLyBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHdoZW4gYnVmZmVyVmlldyBpcyBub3QgZGVmaW5lZCwgYWNjZXNzb3IgbXVzdCBiZSBpbml0aWFsaXplZCB3aXRoIHplcm9zXG4gIGlmICghZGVmaW5lZChhY2Nlc3Nvci5idWZmZXJWaWV3KSkge1xuICAgIHJldHVybiB7XG4gICAgICBtaW46IGFycmF5RmlsbChuZXcgQXJyYXkobnVtYmVyT2ZDb21wb25lbnRzKSwgMC4wKSxcbiAgICAgIG1heDogYXJyYXlGaWxsKG5ldyBBcnJheShudW1iZXJPZkNvbXBvbmVudHMpLCAwLjApLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBtaW4gPSBhcnJheUZpbGwoXG4gICAgbmV3IEFycmF5KG51bWJlck9mQ29tcG9uZW50cyksXG4gICAgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXG4gICk7XG4gIGNvbnN0IG1heCA9IGFycmF5RmlsbChcbiAgICBuZXcgQXJyYXkobnVtYmVyT2ZDb21wb25lbnRzKSxcbiAgICBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFlcbiAgKTtcblxuICBjb25zdCBidWZmZXJWaWV3ID0gYnVmZmVyVmlld3NbYnVmZmVyVmlld0lkXTtcbiAgY29uc3QgYnVmZmVySWQgPSBidWZmZXJWaWV3LmJ1ZmZlcjtcbiAgY29uc3QgYnVmZmVyID0gYnVmZmVyc1tidWZmZXJJZF07XG4gIGNvbnN0IHNvdXJjZSA9IGJ1ZmZlci5leHRyYXMuX3BpcGVsaW5lLnNvdXJjZTtcblxuICBjb25zdCBjb3VudCA9IGFjY2Vzc29yLmNvdW50O1xuICBjb25zdCBieXRlU3RyaWRlID0gZ2V0QWNjZXNzb3JCeXRlU3RyaWRlKGdsdGYsIGFjY2Vzc29yKTtcbiAgbGV0IGJ5dGVPZmZzZXQgPVxuICAgIGFjY2Vzc29yLmJ5dGVPZmZzZXQgKyBidWZmZXJWaWV3LmJ5dGVPZmZzZXQgKyBzb3VyY2UuYnl0ZU9mZnNldDtcbiAgY29uc3QgY29tcG9uZW50VHlwZSA9IGFjY2Vzc29yLmNvbXBvbmVudFR5cGU7XG4gIGNvbnN0IGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoID1cbiAgICBDb21wb25lbnREYXRhdHlwZS5nZXRTaXplSW5CeXRlcyhjb21wb25lbnRUeXBlKTtcbiAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoc291cmNlLmJ1ZmZlcik7XG4gIGNvbnN0IGNvbXBvbmVudHMgPSBuZXcgQXJyYXkobnVtYmVyT2ZDb21wb25lbnRzKTtcbiAgY29uc3QgY29tcG9uZW50UmVhZGVyID0gZ2V0Q29tcG9uZW50UmVhZGVyKGNvbXBvbmVudFR5cGUpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgIGNvbXBvbmVudFJlYWRlcihcbiAgICAgIGRhdGFWaWV3LFxuICAgICAgYnl0ZU9mZnNldCxcbiAgICAgIG51bWJlck9mQ29tcG9uZW50cyxcbiAgICAgIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoLFxuICAgICAgY29tcG9uZW50c1xuICAgICk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1iZXJPZkNvbXBvbmVudHM7IGorKykge1xuICAgICAgY29uc3QgdmFsdWUgPSBjb21wb25lbnRzW2pdO1xuICAgICAgbWluW2pdID0gTWF0aC5taW4obWluW2pdLCB2YWx1ZSk7XG4gICAgICBtYXhbal0gPSBNYXRoLm1heChtYXhbal0sIHZhbHVlKTtcbiAgICB9XG4gICAgYnl0ZU9mZnNldCArPSBieXRlU3RyaWRlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtaW46IG1pbixcbiAgICBtYXg6IG1heCxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZmluZEFjY2Vzc29yTWluTWF4O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///77324\n')},11072:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56629);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82982);\n\n\n\n\n/**\n * Calls the provider handler function on each texture used by the material.\n * Mimics the behavior of functions in gltf-pipeline ForEach.\n * @param {Object} material The glTF material.\n * @param {forEachTextureInMaterial~handler} handler Function that is called for each texture in the material.\n *\n * @private\n */\nfunction forEachTextureInMaterial(material, handler) {\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("material", material);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("handler", handler);\n\n  // Metallic roughness\n  const pbrMetallicRoughness = material.pbrMetallicRoughness;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(pbrMetallicRoughness)) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(pbrMetallicRoughness.baseColorTexture)) {\n      const textureInfo = pbrMetallicRoughness.baseColorTexture;\n      const value = handler(textureInfo.index, textureInfo);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(pbrMetallicRoughness.metallicRoughnessTexture)) {\n      const textureInfo = pbrMetallicRoughness.metallicRoughnessTexture;\n      const value = handler(textureInfo.index, textureInfo);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(material.extensions)) {\n    // Spec gloss extension\n    const pbrSpecularGlossiness =\n      material.extensions.KHR_materials_pbrSpecularGlossiness;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(pbrSpecularGlossiness)) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(pbrSpecularGlossiness.diffuseTexture)) {\n        const textureInfo = pbrSpecularGlossiness.diffuseTexture;\n        const value = handler(textureInfo.index, textureInfo);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(pbrSpecularGlossiness.specularGlossinessTexture)) {\n        const textureInfo = pbrSpecularGlossiness.specularGlossinessTexture;\n        const value = handler(textureInfo.index, textureInfo);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n    }\n\n    // Materials common extension (may be present in models converted from glTF 1.0)\n    const materialsCommon = material.extensions.KHR_materials_common;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(materialsCommon)) {\n      const diffuse = materialsCommon.values.diffuse;\n      const ambient = materialsCommon.values.ambient;\n      const emission = materialsCommon.values.emission;\n      const specular = materialsCommon.values.specular;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(diffuse) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(diffuse.index)) {\n        const value = handler(diffuse.index, diffuse);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(ambient) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(ambient.index)) {\n        const value = handler(ambient.index, ambient);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(emission) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(emission.index)) {\n        const value = handler(emission.index, emission);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(specular) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(specular.index)) {\n        const value = handler(specular.index, specular);\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n          return value;\n        }\n      }\n    }\n  }\n\n  // KHR_techniques_webgl extension\n  const value = _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].materialValue */ .Z.materialValue(material, function (materialValue) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(materialValue.index)) {\n      const value = handler(materialValue.index, materialValue);\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n        return value;\n      }\n    }\n  });\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n    return value;\n  }\n\n  // Top level textures\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(material.emissiveTexture)) {\n    const textureInfo = material.emissiveTexture;\n    const value = handler(textureInfo.index, textureInfo);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n      return value;\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(material.normalTexture)) {\n    const textureInfo = material.normalTexture;\n    const value = handler(textureInfo.index, textureInfo);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n      return value;\n    }\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(material.occlusionTexture)) {\n    const textureInfo = material.occlusionTexture;\n    const value = handler(textureInfo.index, textureInfo);\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(value)) {\n      return value;\n    }\n  }\n}\n\n/**\n * Function that is called for each texture in the material. If this function returns a value the for each stops and returns that value.\n * @callback forEachTextureInMaterial~handler\n * @param {Number} The texture index.\n * @param {Object} The texture info object.\n *\n * @private\n */\n\n/* harmony default export */ __webpack_exports__["Z"] = (forEachTextureInMaterial);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEwNzIuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQW1DO0FBQ0s7QUFDSTs7QUFFNUM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsa0NBQWtDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckIsRUFBRSwrRUFBYTs7QUFFZjtBQUNBO0FBQ0EsTUFBTSxxRUFBTztBQUNiLFFBQVEscUVBQU87QUFDZjtBQUNBO0FBQ0EsVUFBVSxxRUFBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFPO0FBQ2Y7QUFDQTtBQUNBLFVBQVUscUVBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQU87QUFDZixVQUFVLHFFQUFPO0FBQ2pCO0FBQ0E7QUFDQSxZQUFZLHFFQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQU87QUFDakI7QUFDQTtBQUNBLFlBQVkscUVBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEscUVBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQU8sYUFBYSxxRUFBTztBQUNyQztBQUNBLFlBQVkscUVBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxRUFBTyxhQUFhLHFFQUFPO0FBQ3JDO0FBQ0EsWUFBWSxxRUFBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFFQUFPLGNBQWMscUVBQU87QUFDdEM7QUFDQSxZQUFZLHFFQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQU8sY0FBYyxxRUFBTztBQUN0QztBQUNBLFlBQVkscUVBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQix3RkFBcUI7QUFDckMsUUFBUSxxRUFBTztBQUNmO0FBQ0EsVUFBVSxxRUFBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsTUFBTSxxRUFBTztBQUNiO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTtBQUNBLFFBQVEscUVBQU87QUFDZjtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxxRUFBTztBQUNiO0FBQ0E7QUFDQSxRQUFRLHFFQUFPO0FBQ2Y7QUFDQTtBQUNBOztBQUVBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0EsUUFBUSxxRUFBTztBQUNmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBOztBQUVBLHlEQUFlLHdCQUF3QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS9mb3JFYWNoVGV4dHVyZUluTWF0ZXJpYWwuanM/Yzk3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRm9yRWFjaCBmcm9tIFwiLi9Gb3JFYWNoLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uLy4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBDYWxscyB0aGUgcHJvdmlkZXIgaGFuZGxlciBmdW5jdGlvbiBvbiBlYWNoIHRleHR1cmUgdXNlZCBieSB0aGUgbWF0ZXJpYWwuXG4gKiBNaW1pY3MgdGhlIGJlaGF2aW9yIG9mIGZ1bmN0aW9ucyBpbiBnbHRmLXBpcGVsaW5lIEZvckVhY2guXG4gKiBAcGFyYW0ge09iamVjdH0gbWF0ZXJpYWwgVGhlIGdsVEYgbWF0ZXJpYWwuXG4gKiBAcGFyYW0ge2ZvckVhY2hUZXh0dXJlSW5NYXRlcmlhbH5oYW5kbGVyfSBoYW5kbGVyIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGZvciBlYWNoIHRleHR1cmUgaW4gdGhlIG1hdGVyaWFsLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2hUZXh0dXJlSW5NYXRlcmlhbChtYXRlcmlhbCwgaGFuZGxlcikge1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwibWF0ZXJpYWxcIiwgbWF0ZXJpYWwpO1xuICBDaGVjay5kZWZpbmVkKFwiaGFuZGxlclwiLCBoYW5kbGVyKTtcblxuICAvLyBNZXRhbGxpYyByb3VnaG5lc3NcbiAgY29uc3QgcGJyTWV0YWxsaWNSb3VnaG5lc3MgPSBtYXRlcmlhbC5wYnJNZXRhbGxpY1JvdWdobmVzcztcbiAgaWYgKGRlZmluZWQocGJyTWV0YWxsaWNSb3VnaG5lc3MpKSB7XG4gICAgaWYgKGRlZmluZWQocGJyTWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZSkpIHtcbiAgICAgIGNvbnN0IHRleHR1cmVJbmZvID0gcGJyTWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZTtcbiAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcih0ZXh0dXJlSW5mby5pbmRleCwgdGV4dHVyZUluZm8pO1xuICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRlZmluZWQocGJyTWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlKSkge1xuICAgICAgY29uc3QgdGV4dHVyZUluZm8gPSBwYnJNZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmU7XG4gICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIodGV4dHVyZUluZm8uaW5kZXgsIHRleHR1cmVJbmZvKTtcbiAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGRlZmluZWQobWF0ZXJpYWwuZXh0ZW5zaW9ucykpIHtcbiAgICAvLyBTcGVjIGdsb3NzIGV4dGVuc2lvblxuICAgIGNvbnN0IHBiclNwZWN1bGFyR2xvc3NpbmVzcyA9XG4gICAgICBtYXRlcmlhbC5leHRlbnNpb25zLktIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzO1xuICAgIGlmIChkZWZpbmVkKHBiclNwZWN1bGFyR2xvc3NpbmVzcykpIHtcbiAgICAgIGlmIChkZWZpbmVkKHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlVGV4dHVyZSkpIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZUluZm8gPSBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZVRleHR1cmU7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcih0ZXh0dXJlSW5mby5pbmRleCwgdGV4dHVyZUluZm8pO1xuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlKSkge1xuICAgICAgICBjb25zdCB0ZXh0dXJlSW5mbyA9IHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIodGV4dHVyZUluZm8uaW5kZXgsIHRleHR1cmVJbmZvKTtcbiAgICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWF0ZXJpYWxzIGNvbW1vbiBleHRlbnNpb24gKG1heSBiZSBwcmVzZW50IGluIG1vZGVscyBjb252ZXJ0ZWQgZnJvbSBnbFRGIDEuMClcbiAgICBjb25zdCBtYXRlcmlhbHNDb21tb24gPSBtYXRlcmlhbC5leHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY29tbW9uO1xuICAgIGlmIChkZWZpbmVkKG1hdGVyaWFsc0NvbW1vbikpIHtcbiAgICAgIGNvbnN0IGRpZmZ1c2UgPSBtYXRlcmlhbHNDb21tb24udmFsdWVzLmRpZmZ1c2U7XG4gICAgICBjb25zdCBhbWJpZW50ID0gbWF0ZXJpYWxzQ29tbW9uLnZhbHVlcy5hbWJpZW50O1xuICAgICAgY29uc3QgZW1pc3Npb24gPSBtYXRlcmlhbHNDb21tb24udmFsdWVzLmVtaXNzaW9uO1xuICAgICAgY29uc3Qgc3BlY3VsYXIgPSBtYXRlcmlhbHNDb21tb24udmFsdWVzLnNwZWN1bGFyO1xuICAgICAgaWYgKGRlZmluZWQoZGlmZnVzZSkgJiYgZGVmaW5lZChkaWZmdXNlLmluZGV4KSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIoZGlmZnVzZS5pbmRleCwgZGlmZnVzZSk7XG4gICAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRlZmluZWQoYW1iaWVudCkgJiYgZGVmaW5lZChhbWJpZW50LmluZGV4KSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIoYW1iaWVudC5pbmRleCwgYW1iaWVudCk7XG4gICAgICAgIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRlZmluZWQoZW1pc3Npb24pICYmIGRlZmluZWQoZW1pc3Npb24uaW5kZXgpKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaGFuZGxlcihlbWlzc2lvbi5pbmRleCwgZW1pc3Npb24pO1xuICAgICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKHNwZWN1bGFyKSAmJiBkZWZpbmVkKHNwZWN1bGFyLmluZGV4KSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIoc3BlY3VsYXIuaW5kZXgsIHNwZWN1bGFyKTtcbiAgICAgICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gS0hSX3RlY2huaXF1ZXNfd2ViZ2wgZXh0ZW5zaW9uXG4gIGNvbnN0IHZhbHVlID0gRm9yRWFjaC5tYXRlcmlhbFZhbHVlKG1hdGVyaWFsLCBmdW5jdGlvbiAobWF0ZXJpYWxWYWx1ZSkge1xuICAgIGlmIChkZWZpbmVkKG1hdGVyaWFsVmFsdWUuaW5kZXgpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGhhbmRsZXIobWF0ZXJpYWxWYWx1ZS5pbmRleCwgbWF0ZXJpYWxWYWx1ZSk7XG4gICAgICBpZiAoZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGlmIChkZWZpbmVkKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8vIFRvcCBsZXZlbCB0ZXh0dXJlc1xuICBpZiAoZGVmaW5lZChtYXRlcmlhbC5lbWlzc2l2ZVRleHR1cmUpKSB7XG4gICAgY29uc3QgdGV4dHVyZUluZm8gPSBtYXRlcmlhbC5lbWlzc2l2ZVRleHR1cmU7XG4gICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKHRleHR1cmVJbmZvLmluZGV4LCB0ZXh0dXJlSW5mbyk7XG4gICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRlZmluZWQobWF0ZXJpYWwubm9ybWFsVGV4dHVyZSkpIHtcbiAgICBjb25zdCB0ZXh0dXJlSW5mbyA9IG1hdGVyaWFsLm5vcm1hbFRleHR1cmU7XG4gICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKHRleHR1cmVJbmZvLmluZGV4LCB0ZXh0dXJlSW5mbyk7XG4gICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRlZmluZWQobWF0ZXJpYWwub2NjbHVzaW9uVGV4dHVyZSkpIHtcbiAgICBjb25zdCB0ZXh0dXJlSW5mbyA9IG1hdGVyaWFsLm9jY2x1c2lvblRleHR1cmU7XG4gICAgY29uc3QgdmFsdWUgPSBoYW5kbGVyKHRleHR1cmVJbmZvLmluZGV4LCB0ZXh0dXJlSW5mbyk7XG4gICAgaWYgKGRlZmluZWQodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgZm9yIGVhY2ggdGV4dHVyZSBpbiB0aGUgbWF0ZXJpYWwuIElmIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHZhbHVlIHRoZSBmb3IgZWFjaCBzdG9wcyBhbmQgcmV0dXJucyB0aGF0IHZhbHVlLlxuICogQGNhbGxiYWNrIGZvckVhY2hUZXh0dXJlSW5NYXRlcmlhbH5oYW5kbGVyXG4gKiBAcGFyYW0ge051bWJlcn0gVGhlIHRleHR1cmUgaW5kZXguXG4gKiBAcGFyYW0ge09iamVjdH0gVGhlIHRleHR1cmUgaW5mbyBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmb3JFYWNoVGV4dHVyZUluTWF0ZXJpYWw7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11072\n')},93224:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(26806);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82982);\n\n\n\n\n/**\n * Returns the byte stride of the provided accessor.\n * If the byteStride is 0, it is calculated based on type and componentType\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {Object} accessor The accessor.\n * @returns {Number} The byte stride of the accessor.\n *\n * @private\n */\nfunction getAccessorByteStride(gltf, accessor) {\n  const bufferViewId = accessor.bufferView;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(bufferViewId)) {\n    const bufferView = gltf.bufferViews[bufferViewId];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(bufferView.byteStride) && bufferView.byteStride > 0) {\n      return bufferView.byteStride;\n    }\n  }\n  return (\n    _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getSizeInBytes */ .Z.getSizeInBytes(accessor.componentType) *\n    (0,_numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(accessor.type)\n  );\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (getAccessorByteStride);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTMyMjQuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQXVFO0FBQ1A7QUFDcEI7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scUVBQU87QUFDYjtBQUNBLFFBQVEscUVBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseUdBQWdDO0FBQ3BDLElBQUksa0ZBQXlCO0FBQzdCO0FBQ0E7O0FBRUEseURBQWUscUJBQXFCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR2x0ZlBpcGVsaW5lL2dldEFjY2Vzc29yQnl0ZVN0cmlkZS5qcz8zOWEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBudW1iZXJPZkNvbXBvbmVudHNGb3JUeXBlIGZyb20gXCIuL251bWJlck9mQ29tcG9uZW50c0ZvclR5cGUuanNcIjtcbmltcG9ydCBDb21wb25lbnREYXRhdHlwZSBmcm9tIFwiLi4vLi4vQ29yZS9Db21wb25lbnREYXRhdHlwZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uLy4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGJ5dGUgc3RyaWRlIG9mIHRoZSBwcm92aWRlZCBhY2Nlc3Nvci5cbiAqIElmIHRoZSBieXRlU3RyaWRlIGlzIDAsIGl0IGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gdHlwZSBhbmQgY29tcG9uZW50VHlwZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcGFyYW0ge09iamVjdH0gYWNjZXNzb3IgVGhlIGFjY2Vzc29yLlxuICogQHJldHVybnMge051bWJlcn0gVGhlIGJ5dGUgc3RyaWRlIG9mIHRoZSBhY2Nlc3Nvci5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRBY2Nlc3NvckJ5dGVTdHJpZGUoZ2x0ZiwgYWNjZXNzb3IpIHtcbiAgY29uc3QgYnVmZmVyVmlld0lkID0gYWNjZXNzb3IuYnVmZmVyVmlldztcbiAgaWYgKGRlZmluZWQoYnVmZmVyVmlld0lkKSkge1xuICAgIGNvbnN0IGJ1ZmZlclZpZXcgPSBnbHRmLmJ1ZmZlclZpZXdzW2J1ZmZlclZpZXdJZF07XG4gICAgaWYgKGRlZmluZWQoYnVmZmVyVmlldy5ieXRlU3RyaWRlKSAmJiBidWZmZXJWaWV3LmJ5dGVTdHJpZGUgPiAwKSB7XG4gICAgICByZXR1cm4gYnVmZmVyVmlldy5ieXRlU3RyaWRlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gKFxuICAgIENvbXBvbmVudERhdGF0eXBlLmdldFNpemVJbkJ5dGVzKGFjY2Vzc29yLmNvbXBvbmVudFR5cGUpICpcbiAgICBudW1iZXJPZkNvbXBvbmVudHNGb3JUeXBlKGFjY2Vzc29yLnR5cGUpXG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldEFjY2Vzc29yQnl0ZVN0cmlkZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///93224\n')},2378:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84828);\n\n\n/**\n * Returns a function to read and convert data from a DataView into an array.\n *\n * @param {Number} componentType Type to convert the data to.\n * @returns {ComponentReader} Function that reads and converts data.\n *\n * @private\n */\nfunction getComponentReader(componentType) {\n  switch (componentType) {\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].BYTE */ .Z.BYTE:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getInt8(\n            byteOffset + i * componentTypeByteLength\n          );\n        }\n      };\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getUint8(\n            byteOffset + i * componentTypeByteLength\n          );\n        }\n      };\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].SHORT */ .Z.SHORT:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getInt16(\n            byteOffset + i * componentTypeByteLength,\n            true\n          );\n        }\n      };\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getUint16(\n            byteOffset + i * componentTypeByteLength,\n            true\n          );\n        }\n      };\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].INT */ .Z.INT:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getInt32(\n            byteOffset + i * componentTypeByteLength,\n            true\n          );\n        }\n      };\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].UNSIGNED_INT */ .Z.UNSIGNED_INT:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getUint32(\n            byteOffset + i * componentTypeByteLength,\n            true\n          );\n        }\n      };\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].FLOAT */ .Z.FLOAT:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getFloat32(\n            byteOffset + i * componentTypeByteLength,\n            true\n          );\n        }\n      };\n    case _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].DOUBLE */ .Z.DOUBLE:\n      return function (\n        dataView,\n        byteOffset,\n        numberOfComponents,\n        componentTypeByteLength,\n        result\n      ) {\n        for (let i = 0; i < numberOfComponents; ++i) {\n          result[i] = dataView.getFloat64(\n            byteOffset + i * componentTypeByteLength,\n            true\n          );\n        }\n      };\n  }\n}\n\n/**\n * A callback function that logs messages.\n * @callback ComponentReader\n *\n * @param {DataView} dataView The data view to read from.\n * @param {Number} byteOffset The byte offset applied when reading from the data view.\n * @param {Number} numberOfComponents The number of components to read.\n * @param {Number} componentTypeByteLength The byte length of each component.\n * @param {Number} result An array storing the components that are read.\n *\n * @private\n */\n\n/* harmony default export */ __webpack_exports__["Z"] = (getComponentReader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM3OC5qcyIsIm1hcHBpbmdzIjoiO0FBQWdFOztBQUVoRTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMscUZBQXNCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1R0FBK0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVGQUF1QjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx5R0FBZ0M7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUZBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHFHQUE4QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1RkFBdUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMseUZBQXdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7O0FBRUEseURBQWUsa0JBQWtCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR2x0ZlBpcGVsaW5lL2dldENvbXBvbmVudFJlYWRlci5qcz80ZmVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21wb25lbnREYXRhdHlwZSBmcm9tIFwiLi4vLi4vQ29yZS9Db21wb25lbnREYXRhdHlwZS5qc1wiO1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byByZWFkIGFuZCBjb252ZXJ0IGRhdGEgZnJvbSBhIERhdGFWaWV3IGludG8gYW4gYXJyYXkuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGNvbXBvbmVudFR5cGUgVHlwZSB0byBjb252ZXJ0IHRoZSBkYXRhIHRvLlxuICogQHJldHVybnMge0NvbXBvbmVudFJlYWRlcn0gRnVuY3Rpb24gdGhhdCByZWFkcyBhbmQgY29udmVydHMgZGF0YS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRDb21wb25lbnRSZWFkZXIoY29tcG9uZW50VHlwZSkge1xuICBzd2l0Y2ggKGNvbXBvbmVudFR5cGUpIHtcbiAgICBjYXNlIENvbXBvbmVudERhdGF0eXBlLkJZVEU6XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKFxuICAgICAgICBkYXRhVmlldyxcbiAgICAgICAgYnl0ZU9mZnNldCxcbiAgICAgICAgbnVtYmVyT2ZDb21wb25lbnRzLFxuICAgICAgICBjb21wb25lbnRUeXBlQnl0ZUxlbmd0aCxcbiAgICAgICAgcmVzdWx0XG4gICAgICApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkNvbXBvbmVudHM7ICsraSkge1xuICAgICAgICAgIHJlc3VsdFtpXSA9IGRhdGFWaWV3LmdldEludDgoXG4gICAgICAgICAgICBieXRlT2Zmc2V0ICsgaSAqIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBjYXNlIENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX0JZVEU6XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKFxuICAgICAgICBkYXRhVmlldyxcbiAgICAgICAgYnl0ZU9mZnNldCxcbiAgICAgICAgbnVtYmVyT2ZDb21wb25lbnRzLFxuICAgICAgICBjb21wb25lbnRUeXBlQnl0ZUxlbmd0aCxcbiAgICAgICAgcmVzdWx0XG4gICAgICApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkNvbXBvbmVudHM7ICsraSkge1xuICAgICAgICAgIHJlc3VsdFtpXSA9IGRhdGFWaWV3LmdldFVpbnQ4KFxuICAgICAgICAgICAgYnl0ZU9mZnNldCArIGkgKiBjb21wb25lbnRUeXBlQnl0ZUxlbmd0aFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgY2FzZSBDb21wb25lbnREYXRhdHlwZS5TSE9SVDpcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoXG4gICAgICAgIGRhdGFWaWV3LFxuICAgICAgICBieXRlT2Zmc2V0LFxuICAgICAgICBudW1iZXJPZkNvbXBvbmVudHMsXG4gICAgICAgIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoLFxuICAgICAgICByZXN1bHRcbiAgICAgICkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQ29tcG9uZW50czsgKytpKSB7XG4gICAgICAgICAgcmVzdWx0W2ldID0gZGF0YVZpZXcuZ2V0SW50MTYoXG4gICAgICAgICAgICBieXRlT2Zmc2V0ICsgaSAqIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgY2FzZSBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9TSE9SVDpcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoXG4gICAgICAgIGRhdGFWaWV3LFxuICAgICAgICBieXRlT2Zmc2V0LFxuICAgICAgICBudW1iZXJPZkNvbXBvbmVudHMsXG4gICAgICAgIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoLFxuICAgICAgICByZXN1bHRcbiAgICAgICkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQ29tcG9uZW50czsgKytpKSB7XG4gICAgICAgICAgcmVzdWx0W2ldID0gZGF0YVZpZXcuZ2V0VWludDE2KFxuICAgICAgICAgICAgYnl0ZU9mZnNldCArIGkgKiBjb21wb25lbnRUeXBlQnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIGNhc2UgQ29tcG9uZW50RGF0YXR5cGUuSU5UOlxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChcbiAgICAgICAgZGF0YVZpZXcsXG4gICAgICAgIGJ5dGVPZmZzZXQsXG4gICAgICAgIG51bWJlck9mQ29tcG9uZW50cyxcbiAgICAgICAgY29tcG9uZW50VHlwZUJ5dGVMZW5ndGgsXG4gICAgICAgIHJlc3VsdFxuICAgICAgKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZDb21wb25lbnRzOyArK2kpIHtcbiAgICAgICAgICByZXN1bHRbaV0gPSBkYXRhVmlldy5nZXRJbnQzMihcbiAgICAgICAgICAgIGJ5dGVPZmZzZXQgKyBpICogY29tcG9uZW50VHlwZUJ5dGVMZW5ndGgsXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBjYXNlIENvbXBvbmVudERhdGF0eXBlLlVOU0lHTkVEX0lOVDpcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoXG4gICAgICAgIGRhdGFWaWV3LFxuICAgICAgICBieXRlT2Zmc2V0LFxuICAgICAgICBudW1iZXJPZkNvbXBvbmVudHMsXG4gICAgICAgIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoLFxuICAgICAgICByZXN1bHRcbiAgICAgICkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQ29tcG9uZW50czsgKytpKSB7XG4gICAgICAgICAgcmVzdWx0W2ldID0gZGF0YVZpZXcuZ2V0VWludDMyKFxuICAgICAgICAgICAgYnl0ZU9mZnNldCArIGkgKiBjb21wb25lbnRUeXBlQnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIGNhc2UgQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQ6XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKFxuICAgICAgICBkYXRhVmlldyxcbiAgICAgICAgYnl0ZU9mZnNldCxcbiAgICAgICAgbnVtYmVyT2ZDb21wb25lbnRzLFxuICAgICAgICBjb21wb25lbnRUeXBlQnl0ZUxlbmd0aCxcbiAgICAgICAgcmVzdWx0XG4gICAgICApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkNvbXBvbmVudHM7ICsraSkge1xuICAgICAgICAgIHJlc3VsdFtpXSA9IGRhdGFWaWV3LmdldEZsb2F0MzIoXG4gICAgICAgICAgICBieXRlT2Zmc2V0ICsgaSAqIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgY2FzZSBDb21wb25lbnREYXRhdHlwZS5ET1VCTEU6XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKFxuICAgICAgICBkYXRhVmlldyxcbiAgICAgICAgYnl0ZU9mZnNldCxcbiAgICAgICAgbnVtYmVyT2ZDb21wb25lbnRzLFxuICAgICAgICBjb21wb25lbnRUeXBlQnl0ZUxlbmd0aCxcbiAgICAgICAgcmVzdWx0XG4gICAgICApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkNvbXBvbmVudHM7ICsraSkge1xuICAgICAgICAgIHJlc3VsdFtpXSA9IGRhdGFWaWV3LmdldEZsb2F0NjQoXG4gICAgICAgICAgICBieXRlT2Zmc2V0ICsgaSAqIGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgbG9ncyBtZXNzYWdlcy5cbiAqIEBjYWxsYmFjayBDb21wb25lbnRSZWFkZXJcbiAqXG4gKiBAcGFyYW0ge0RhdGFWaWV3fSBkYXRhVmlldyBUaGUgZGF0YSB2aWV3IHRvIHJlYWQgZnJvbS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBieXRlT2Zmc2V0IFRoZSBieXRlIG9mZnNldCBhcHBsaWVkIHdoZW4gcmVhZGluZyBmcm9tIHRoZSBkYXRhIHZpZXcuXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtYmVyT2ZDb21wb25lbnRzIFRoZSBudW1iZXIgb2YgY29tcG9uZW50cyB0byByZWFkLlxuICogQHBhcmFtIHtOdW1iZXJ9IGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoIFRoZSBieXRlIGxlbmd0aCBvZiBlYWNoIGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7TnVtYmVyfSByZXN1bHQgQW4gYXJyYXkgc3RvcmluZyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSByZWFkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZ2V0Q29tcG9uZW50UmVhZGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2378\n')},72337:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75954);\n/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56629);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52200);\n\n\n\n\n\n\nconst defaultBlendEquation = [_Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FUNC_ADD */ .Z.FUNC_ADD, _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].FUNC_ADD */ .Z.FUNC_ADD];\n\nconst defaultBlendFactors = [\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ONE */ .Z.ONE,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ZERO */ .Z.ZERO,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ONE */ .Z.ONE,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ZERO */ .Z.ZERO,\n];\n\nfunction isStateEnabled(renderStates, state) {\n  const enabled = renderStates.enable;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(enabled)) {\n    return false;\n  }\n\n  return enabled.indexOf(state) > -1;\n}\n\nconst supportedBlendFactors = [\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ZERO */ .Z.ZERO,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ONE */ .Z.ONE,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].SRC_COLOR */ .Z.SRC_COLOR,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ONE_MINUS_SRC_COLOR */ .Z.ONE_MINUS_SRC_COLOR,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].SRC_ALPHA */ .Z.SRC_ALPHA,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ONE_MINUS_SRC_ALPHA */ .Z.ONE_MINUS_SRC_ALPHA,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].DST_ALPHA */ .Z.DST_ALPHA,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ONE_MINUS_DST_ALPHA */ .Z.ONE_MINUS_DST_ALPHA,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].DST_COLOR */ .Z.DST_COLOR,\n  _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].ONE_MINUS_DST_COLOR */ .Z.ONE_MINUS_DST_COLOR,\n];\n\n// If any of the blend factors are not supported, return the default\nfunction getSupportedBlendFactors(value, defaultValue) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(value)) {\n    return defaultValue;\n  }\n\n  for (let i = 0; i < 4; i++) {\n    if (supportedBlendFactors.indexOf(value[i]) === -1) {\n      return defaultValue;\n    }\n  }\n\n  return value;\n}\n\n/**\n * Move glTF 1.0 technique render states to glTF 2.0 materials properties and KHR_blend extension.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @returns {Object} The updated glTF asset.\n *\n * @private\n */\nfunction moveTechniqueRenderStates(gltf) {\n  const blendingForTechnique = {};\n  const materialPropertiesForTechnique = {};\n  const techniquesLegacy = gltf.techniques;\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(techniquesLegacy)) {\n    return gltf;\n  }\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].technique */ .Z.technique(gltf, function (techniqueLegacy, techniqueIndex) {\n    const renderStates = techniqueLegacy.states;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(renderStates)) {\n      const materialProperties = (materialPropertiesForTechnique[\n        techniqueIndex\n      ] = {});\n\n      // If BLEND is enabled, the material should have alpha mode BLEND\n      if (isStateEnabled(renderStates, _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].BLEND */ .Z.BLEND)) {\n        materialProperties.alphaMode = "BLEND";\n\n        const blendFunctions = renderStates.functions;\n        if (\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(blendFunctions) &&\n          ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(blendFunctions.blendEquationSeparate) ||\n            (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(blendFunctions.blendFuncSeparate))\n        ) {\n          blendingForTechnique[techniqueIndex] = {\n            blendEquation: (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n              blendFunctions.blendEquationSeparate,\n              defaultBlendEquation\n            ),\n            blendFactors: getSupportedBlendFactors(\n              blendFunctions.blendFuncSeparate,\n              defaultBlendFactors\n            ),\n          };\n        }\n      }\n\n      // If CULL_FACE is not enabled, the material should be doubleSided\n      if (!isStateEnabled(renderStates, _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].CULL_FACE */ .Z.CULL_FACE)) {\n        materialProperties.doubleSided = true;\n      }\n\n      delete techniqueLegacy.states;\n    }\n  });\n\n  if (Object.keys(blendingForTechnique).length > 0) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf.extensions)) {\n      gltf.extensions = {};\n    }\n\n    (0,_addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf, "KHR_blend");\n  }\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].material */ .Z.material(gltf, function (material) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(material.technique)) {\n      const materialProperties =\n        materialPropertiesForTechnique[material.technique];\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].objectLegacy */ .Z.objectLegacy(materialProperties, function (value, property) {\n        material[property] = value;\n      });\n\n      const blending = blendingForTechnique[material.technique];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(blending)) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(material.extensions)) {\n          material.extensions = {};\n        }\n\n        material.extensions.KHR_blend = blending;\n      }\n    }\n  });\n\n  return gltf;\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (moveTechniqueRenderStates);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzIzMzcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUQ7QUFDcEI7QUFDbUI7QUFDVjtBQUNjOztBQUUxRCw4QkFBOEIsMEZBQXVCLEVBQUUsMEZBQXVCOztBQUU5RTtBQUNBLEVBQUUsZ0ZBQWtCO0FBQ3BCLEVBQUUsa0ZBQW1CO0FBQ3JCLEVBQUUsZ0ZBQWtCO0FBQ3BCLEVBQUUsa0ZBQW1CO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQSxPQUFPLHFFQUFPO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsRUFBRSxrRkFBbUI7QUFDckIsRUFBRSxnRkFBa0I7QUFDcEIsRUFBRSw0RkFBd0I7QUFDMUIsRUFBRSxnSEFBa0M7QUFDcEMsRUFBRSw0RkFBd0I7QUFDMUIsRUFBRSxnSEFBa0M7QUFDcEMsRUFBRSw0RkFBd0I7QUFDMUIsRUFBRSxnSEFBa0M7QUFDcEMsRUFBRSw0RkFBd0I7QUFDMUIsRUFBRSxnSEFBa0M7QUFDcEM7O0FBRUE7QUFDQTtBQUNBLE9BQU8scUVBQU87QUFDZDtBQUNBOztBQUVBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8scUVBQU87QUFDZDtBQUNBOztBQUVBLEVBQUUsZ0ZBQWlCO0FBQ25CO0FBQ0EsUUFBUSxxRUFBTztBQUNmO0FBQ0E7QUFDQSxZQUFZOztBQUVaO0FBQ0EsdUNBQXVDLG9GQUFvQjtBQUMzRDs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxxRUFBTztBQUNqQixXQUFXLHFFQUFPO0FBQ2xCLFlBQVkscUVBQU87QUFDbkI7QUFDQTtBQUNBLDJCQUEyQiwwRUFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdDQUF3Qyw0RkFBd0I7QUFDaEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLFNBQVMscUVBQU87QUFDaEI7QUFDQTs7QUFFQSxJQUFJLDBFQUFpQjtBQUNyQjs7QUFFQSxFQUFFLDhFQUFnQjtBQUNsQixRQUFRLHFFQUFPO0FBQ2Y7QUFDQTtBQUNBLE1BQU0sc0ZBQW9CO0FBQzFCO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLFVBQVUscUVBQU87QUFDakIsYUFBYSxxRUFBTztBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQSx5REFBZSx5QkFBeUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvbW92ZVRlY2huaXF1ZVJlbmRlclN0YXRlcy5qcz8zMzU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhZGRFeHRlbnNpb25zVXNlZCBmcm9tIFwiLi9hZGRFeHRlbnNpb25zVXNlZC5qc1wiO1xuaW1wb3J0IEZvckVhY2ggZnJvbSBcIi4vRm9yRWFjaC5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBXZWJHTENvbnN0YW50cyBmcm9tIFwiLi4vLi4vQ29yZS9XZWJHTENvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBkZWZhdWx0QmxlbmRFcXVhdGlvbiA9IFtXZWJHTENvbnN0YW50cy5GVU5DX0FERCwgV2ViR0xDb25zdGFudHMuRlVOQ19BRERdO1xuXG5jb25zdCBkZWZhdWx0QmxlbmRGYWN0b3JzID0gW1xuICBXZWJHTENvbnN0YW50cy5PTkUsXG4gIFdlYkdMQ29uc3RhbnRzLlpFUk8sXG4gIFdlYkdMQ29uc3RhbnRzLk9ORSxcbiAgV2ViR0xDb25zdGFudHMuWkVSTyxcbl07XG5cbmZ1bmN0aW9uIGlzU3RhdGVFbmFibGVkKHJlbmRlclN0YXRlcywgc3RhdGUpIHtcbiAgY29uc3QgZW5hYmxlZCA9IHJlbmRlclN0YXRlcy5lbmFibGU7XG4gIGlmICghZGVmaW5lZChlbmFibGVkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBlbmFibGVkLmluZGV4T2Yoc3RhdGUpID4gLTE7XG59XG5cbmNvbnN0IHN1cHBvcnRlZEJsZW5kRmFjdG9ycyA9IFtcbiAgV2ViR0xDb25zdGFudHMuWkVSTyxcbiAgV2ViR0xDb25zdGFudHMuT05FLFxuICBXZWJHTENvbnN0YW50cy5TUkNfQ09MT1IsXG4gIFdlYkdMQ29uc3RhbnRzLk9ORV9NSU5VU19TUkNfQ09MT1IsXG4gIFdlYkdMQ29uc3RhbnRzLlNSQ19BTFBIQSxcbiAgV2ViR0xDb25zdGFudHMuT05FX01JTlVTX1NSQ19BTFBIQSxcbiAgV2ViR0xDb25zdGFudHMuRFNUX0FMUEhBLFxuICBXZWJHTENvbnN0YW50cy5PTkVfTUlOVVNfRFNUX0FMUEhBLFxuICBXZWJHTENvbnN0YW50cy5EU1RfQ09MT1IsXG4gIFdlYkdMQ29uc3RhbnRzLk9ORV9NSU5VU19EU1RfQ09MT1IsXG5dO1xuXG4vLyBJZiBhbnkgb2YgdGhlIGJsZW5kIGZhY3RvcnMgYXJlIG5vdCBzdXBwb3J0ZWQsIHJldHVybiB0aGUgZGVmYXVsdFxuZnVuY3Rpb24gZ2V0U3VwcG9ydGVkQmxlbmRGYWN0b3JzKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKCFkZWZpbmVkKHZhbHVlKSkge1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgIGlmIChzdXBwb3J0ZWRCbGVuZEZhY3RvcnMuaW5kZXhPZih2YWx1ZVtpXSkgPT09IC0xKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBNb3ZlIGdsVEYgMS4wIHRlY2huaXF1ZSByZW5kZXIgc3RhdGVzIHRvIGdsVEYgMi4wIG1hdGVyaWFscyBwcm9wZXJ0aWVzIGFuZCBLSFJfYmxlbmQgZXh0ZW5zaW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgdXBkYXRlZCBnbFRGIGFzc2V0LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG1vdmVUZWNobmlxdWVSZW5kZXJTdGF0ZXMoZ2x0Zikge1xuICBjb25zdCBibGVuZGluZ0ZvclRlY2huaXF1ZSA9IHt9O1xuICBjb25zdCBtYXRlcmlhbFByb3BlcnRpZXNGb3JUZWNobmlxdWUgPSB7fTtcbiAgY29uc3QgdGVjaG5pcXVlc0xlZ2FjeSA9IGdsdGYudGVjaG5pcXVlcztcbiAgaWYgKCFkZWZpbmVkKHRlY2huaXF1ZXNMZWdhY3kpKSB7XG4gICAgcmV0dXJuIGdsdGY7XG4gIH1cblxuICBGb3JFYWNoLnRlY2huaXF1ZShnbHRmLCBmdW5jdGlvbiAodGVjaG5pcXVlTGVnYWN5LCB0ZWNobmlxdWVJbmRleCkge1xuICAgIGNvbnN0IHJlbmRlclN0YXRlcyA9IHRlY2huaXF1ZUxlZ2FjeS5zdGF0ZXM7XG4gICAgaWYgKGRlZmluZWQocmVuZGVyU3RhdGVzKSkge1xuICAgICAgY29uc3QgbWF0ZXJpYWxQcm9wZXJ0aWVzID0gKG1hdGVyaWFsUHJvcGVydGllc0ZvclRlY2huaXF1ZVtcbiAgICAgICAgdGVjaG5pcXVlSW5kZXhcbiAgICAgIF0gPSB7fSk7XG5cbiAgICAgIC8vIElmIEJMRU5EIGlzIGVuYWJsZWQsIHRoZSBtYXRlcmlhbCBzaG91bGQgaGF2ZSBhbHBoYSBtb2RlIEJMRU5EXG4gICAgICBpZiAoaXNTdGF0ZUVuYWJsZWQocmVuZGVyU3RhdGVzLCBXZWJHTENvbnN0YW50cy5CTEVORCkpIHtcbiAgICAgICAgbWF0ZXJpYWxQcm9wZXJ0aWVzLmFscGhhTW9kZSA9IFwiQkxFTkRcIjtcblxuICAgICAgICBjb25zdCBibGVuZEZ1bmN0aW9ucyA9IHJlbmRlclN0YXRlcy5mdW5jdGlvbnM7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBkZWZpbmVkKGJsZW5kRnVuY3Rpb25zKSAmJlxuICAgICAgICAgIChkZWZpbmVkKGJsZW5kRnVuY3Rpb25zLmJsZW5kRXF1YXRpb25TZXBhcmF0ZSkgfHxcbiAgICAgICAgICAgIGRlZmluZWQoYmxlbmRGdW5jdGlvbnMuYmxlbmRGdW5jU2VwYXJhdGUpKVxuICAgICAgICApIHtcbiAgICAgICAgICBibGVuZGluZ0ZvclRlY2huaXF1ZVt0ZWNobmlxdWVJbmRleF0gPSB7XG4gICAgICAgICAgICBibGVuZEVxdWF0aW9uOiBkZWZhdWx0VmFsdWUoXG4gICAgICAgICAgICAgIGJsZW5kRnVuY3Rpb25zLmJsZW5kRXF1YXRpb25TZXBhcmF0ZSxcbiAgICAgICAgICAgICAgZGVmYXVsdEJsZW5kRXF1YXRpb25cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBibGVuZEZhY3RvcnM6IGdldFN1cHBvcnRlZEJsZW5kRmFjdG9ycyhcbiAgICAgICAgICAgICAgYmxlbmRGdW5jdGlvbnMuYmxlbmRGdW5jU2VwYXJhdGUsXG4gICAgICAgICAgICAgIGRlZmF1bHRCbGVuZEZhY3RvcnNcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBDVUxMX0ZBQ0UgaXMgbm90IGVuYWJsZWQsIHRoZSBtYXRlcmlhbCBzaG91bGQgYmUgZG91YmxlU2lkZWRcbiAgICAgIGlmICghaXNTdGF0ZUVuYWJsZWQocmVuZGVyU3RhdGVzLCBXZWJHTENvbnN0YW50cy5DVUxMX0ZBQ0UpKSB7XG4gICAgICAgIG1hdGVyaWFsUHJvcGVydGllcy5kb3VibGVTaWRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSB0ZWNobmlxdWVMZWdhY3kuc3RhdGVzO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKE9iamVjdC5rZXlzKGJsZW5kaW5nRm9yVGVjaG5pcXVlKS5sZW5ndGggPiAwKSB7XG4gICAgaWYgKCFkZWZpbmVkKGdsdGYuZXh0ZW5zaW9ucykpIHtcbiAgICAgIGdsdGYuZXh0ZW5zaW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGFkZEV4dGVuc2lvbnNVc2VkKGdsdGYsIFwiS0hSX2JsZW5kXCIpO1xuICB9XG5cbiAgRm9yRWFjaC5tYXRlcmlhbChnbHRmLCBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICBpZiAoZGVmaW5lZChtYXRlcmlhbC50ZWNobmlxdWUpKSB7XG4gICAgICBjb25zdCBtYXRlcmlhbFByb3BlcnRpZXMgPVxuICAgICAgICBtYXRlcmlhbFByb3BlcnRpZXNGb3JUZWNobmlxdWVbbWF0ZXJpYWwudGVjaG5pcXVlXTtcbiAgICAgIEZvckVhY2gub2JqZWN0TGVnYWN5KG1hdGVyaWFsUHJvcGVydGllcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wZXJ0eSkge1xuICAgICAgICBtYXRlcmlhbFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBibGVuZGluZyA9IGJsZW5kaW5nRm9yVGVjaG5pcXVlW21hdGVyaWFsLnRlY2huaXF1ZV07XG4gICAgICBpZiAoZGVmaW5lZChibGVuZGluZykpIHtcbiAgICAgICAgaWYgKCFkZWZpbmVkKG1hdGVyaWFsLmV4dGVuc2lvbnMpKSB7XG4gICAgICAgICAgbWF0ZXJpYWwuZXh0ZW5zaW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgbWF0ZXJpYWwuZXh0ZW5zaW9ucy5LSFJfYmxlbmQgPSBibGVuZGluZztcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBnbHRmO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb3ZlVGVjaG5pcXVlUmVuZGVyU3RhdGVzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///72337\n')},56942:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75954);\n/* harmony import */ var _addExtensionsRequired_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(35094);\n/* harmony import */ var _addToArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9919);\n/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(56629);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(82982);\n\n\n\n\n\n\n/**\n * Move glTF 1.0 material techniques to glTF 2.0 KHR_techniques_webgl extension.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @returns {Object} The updated glTF asset.\n *\n * @private\n */\nfunction moveTechniquesToExtension(gltf) {\n  const techniquesLegacy = gltf.techniques;\n  const mappedUniforms = {};\n  const updatedTechniqueIndices = {};\n  const seenPrograms = {};\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(techniquesLegacy)) {\n    const extension = {\n      programs: [],\n      shaders: [],\n      techniques: [],\n    };\n\n    // Some 1.1 models have a glExtensionsUsed property that can be transferred to program.glExtensions\n    const glExtensions = gltf.glExtensionsUsed;\n    delete gltf.glExtensionsUsed;\n\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].technique */ .Z.technique(gltf, function (techniqueLegacy, techniqueId) {\n      const technique = {\n        name: techniqueLegacy.name,\n        program: undefined,\n        attributes: {},\n        uniforms: {},\n      };\n\n      let parameterLegacy;\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].techniqueAttribute */ .Z.techniqueAttribute(\n        techniqueLegacy,\n        function (parameterName, attributeName) {\n          parameterLegacy = techniqueLegacy.parameters[parameterName];\n          technique.attributes[attributeName] = {\n            semantic: parameterLegacy.semantic,\n          };\n        }\n      );\n\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].techniqueUniform */ .Z.techniqueUniform(\n        techniqueLegacy,\n        function (parameterName, uniformName) {\n          parameterLegacy = techniqueLegacy.parameters[parameterName];\n          technique.uniforms[uniformName] = {\n            count: parameterLegacy.count,\n            node: parameterLegacy.node,\n            type: parameterLegacy.type,\n            semantic: parameterLegacy.semantic,\n            value: parameterLegacy.value,\n          };\n\n          // Store the name of the uniform to update material values.\n          if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(mappedUniforms[techniqueId])) {\n            mappedUniforms[techniqueId] = {};\n          }\n          mappedUniforms[techniqueId][parameterName] = uniformName;\n        }\n      );\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(seenPrograms[techniqueLegacy.program])) {\n        const programLegacy = gltf.programs[techniqueLegacy.program];\n\n        const program = {\n          name: programLegacy.name,\n          fragmentShader: undefined,\n          vertexShader: undefined,\n          glExtensions: glExtensions,\n        };\n\n        const fs = gltf.shaders[programLegacy.fragmentShader];\n        program.fragmentShader = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(extension.shaders, fs, true);\n\n        const vs = gltf.shaders[programLegacy.vertexShader];\n        program.vertexShader = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(extension.shaders, vs, true);\n\n        technique.program = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(extension.programs, program);\n        seenPrograms[techniqueLegacy.program] = technique.program;\n      } else {\n        technique.program = seenPrograms[techniqueLegacy.program];\n      }\n\n      // Store the index of the new technique to reference instead.\n      updatedTechniqueIndices[techniqueId] = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(\n        extension.techniques,\n        technique\n      );\n    });\n\n    if (extension.techniques.length > 0) {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf.extensions)) {\n        gltf.extensions = {};\n      }\n\n      gltf.extensions.KHR_techniques_webgl = extension;\n      (0,_addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf, "KHR_techniques_webgl");\n      (0,_addExtensionsRequired_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(gltf, "KHR_techniques_webgl");\n    }\n  }\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].material */ .Z.material(gltf, function (material) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(material.technique)) {\n      const materialExtension = {\n        technique: updatedTechniqueIndices[material.technique],\n      };\n\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].objectLegacy */ .Z.objectLegacy(material.values, function (value, parameterName) {\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(materialExtension.values)) {\n          materialExtension.values = {};\n        }\n\n        const uniformName = mappedUniforms[material.technique][parameterName];\n        materialExtension.values[uniformName] = value;\n      });\n\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(material.extensions)) {\n        material.extensions = {};\n      }\n\n      material.extensions.KHR_techniques_webgl = materialExtension;\n    }\n\n    delete material.technique;\n    delete material.values;\n  });\n\n  delete gltf.techniques;\n  delete gltf.programs;\n  delete gltf.shaders;\n\n  return gltf;\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (moveTechniquesToExtension);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTY5NDIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUQ7QUFDUTtBQUN0QjtBQUNOO0FBQ1M7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scUVBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLGdGQUFpQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIsb0JBQW9CO0FBQ3BCOztBQUVBO0FBQ0EsTUFBTSxrR0FBMEI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNLDhGQUF3QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUscUVBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLHFFQUFPO0FBQ2xCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQyxtRUFBVTs7QUFFM0M7QUFDQSwrQkFBK0IsbUVBQVU7O0FBRXpDLDRCQUE0QixtRUFBVTtBQUN0QztBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0EsNkNBQTZDLG1FQUFVO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxXQUFXLHFFQUFPO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLDBFQUFpQjtBQUN2QixNQUFNLDhFQUFxQjtBQUMzQjtBQUNBOztBQUVBLEVBQUUsOEVBQWdCO0FBQ2xCLFFBQVEscUVBQU87QUFDZjtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxzRkFBb0I7QUFDMUIsYUFBYSxxRUFBTztBQUNwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQLFdBQVcscUVBQU87QUFDbEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHlEQUFlLHlCQUF5QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS9tb3ZlVGVjaG5pcXVlc1RvRXh0ZW5zaW9uLmpzP2RkNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkZEV4dGVuc2lvbnNVc2VkIGZyb20gXCIuL2FkZEV4dGVuc2lvbnNVc2VkLmpzXCI7XG5pbXBvcnQgYWRkRXh0ZW5zaW9uc1JlcXVpcmVkIGZyb20gXCIuL2FkZEV4dGVuc2lvbnNSZXF1aXJlZC5qc1wiO1xuaW1wb3J0IGFkZFRvQXJyYXkgZnJvbSBcIi4vYWRkVG9BcnJheS5qc1wiO1xuaW1wb3J0IEZvckVhY2ggZnJvbSBcIi4vRm9yRWFjaC5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uLy4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuXG4vKipcbiAqIE1vdmUgZ2xURiAxLjAgbWF0ZXJpYWwgdGVjaG5pcXVlcyB0byBnbFRGIDIuMCBLSFJfdGVjaG5pcXVlc193ZWJnbCBleHRlbnNpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGdsdGYgQSBqYXZhc2NyaXB0IG9iamVjdCBjb250YWluaW5nIGEgZ2xURiBhc3NldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSB1cGRhdGVkIGdsVEYgYXNzZXQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbW92ZVRlY2huaXF1ZXNUb0V4dGVuc2lvbihnbHRmKSB7XG4gIGNvbnN0IHRlY2huaXF1ZXNMZWdhY3kgPSBnbHRmLnRlY2huaXF1ZXM7XG4gIGNvbnN0IG1hcHBlZFVuaWZvcm1zID0ge307XG4gIGNvbnN0IHVwZGF0ZWRUZWNobmlxdWVJbmRpY2VzID0ge307XG4gIGNvbnN0IHNlZW5Qcm9ncmFtcyA9IHt9O1xuICBpZiAoZGVmaW5lZCh0ZWNobmlxdWVzTGVnYWN5KSkge1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHtcbiAgICAgIHByb2dyYW1zOiBbXSxcbiAgICAgIHNoYWRlcnM6IFtdLFxuICAgICAgdGVjaG5pcXVlczogW10sXG4gICAgfTtcblxuICAgIC8vIFNvbWUgMS4xIG1vZGVscyBoYXZlIGEgZ2xFeHRlbnNpb25zVXNlZCBwcm9wZXJ0eSB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCB0byBwcm9ncmFtLmdsRXh0ZW5zaW9uc1xuICAgIGNvbnN0IGdsRXh0ZW5zaW9ucyA9IGdsdGYuZ2xFeHRlbnNpb25zVXNlZDtcbiAgICBkZWxldGUgZ2x0Zi5nbEV4dGVuc2lvbnNVc2VkO1xuXG4gICAgRm9yRWFjaC50ZWNobmlxdWUoZ2x0ZiwgZnVuY3Rpb24gKHRlY2huaXF1ZUxlZ2FjeSwgdGVjaG5pcXVlSWQpIHtcbiAgICAgIGNvbnN0IHRlY2huaXF1ZSA9IHtcbiAgICAgICAgbmFtZTogdGVjaG5pcXVlTGVnYWN5Lm5hbWUsXG4gICAgICAgIHByb2dyYW06IHVuZGVmaW5lZCxcbiAgICAgICAgYXR0cmlidXRlczoge30sXG4gICAgICAgIHVuaWZvcm1zOiB7fSxcbiAgICAgIH07XG5cbiAgICAgIGxldCBwYXJhbWV0ZXJMZWdhY3k7XG4gICAgICBGb3JFYWNoLnRlY2huaXF1ZUF0dHJpYnV0ZShcbiAgICAgICAgdGVjaG5pcXVlTGVnYWN5LFxuICAgICAgICBmdW5jdGlvbiAocGFyYW1ldGVyTmFtZSwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICAgIHBhcmFtZXRlckxlZ2FjeSA9IHRlY2huaXF1ZUxlZ2FjeS5wYXJhbWV0ZXJzW3BhcmFtZXRlck5hbWVdO1xuICAgICAgICAgIHRlY2huaXF1ZS5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdID0ge1xuICAgICAgICAgICAgc2VtYW50aWM6IHBhcmFtZXRlckxlZ2FjeS5zZW1hbnRpYyxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBGb3JFYWNoLnRlY2huaXF1ZVVuaWZvcm0oXG4gICAgICAgIHRlY2huaXF1ZUxlZ2FjeSxcbiAgICAgICAgZnVuY3Rpb24gKHBhcmFtZXRlck5hbWUsIHVuaWZvcm1OYW1lKSB7XG4gICAgICAgICAgcGFyYW1ldGVyTGVnYWN5ID0gdGVjaG5pcXVlTGVnYWN5LnBhcmFtZXRlcnNbcGFyYW1ldGVyTmFtZV07XG4gICAgICAgICAgdGVjaG5pcXVlLnVuaWZvcm1zW3VuaWZvcm1OYW1lXSA9IHtcbiAgICAgICAgICAgIGNvdW50OiBwYXJhbWV0ZXJMZWdhY3kuY291bnQsXG4gICAgICAgICAgICBub2RlOiBwYXJhbWV0ZXJMZWdhY3kubm9kZSxcbiAgICAgICAgICAgIHR5cGU6IHBhcmFtZXRlckxlZ2FjeS50eXBlLFxuICAgICAgICAgICAgc2VtYW50aWM6IHBhcmFtZXRlckxlZ2FjeS5zZW1hbnRpYyxcbiAgICAgICAgICAgIHZhbHVlOiBwYXJhbWV0ZXJMZWdhY3kudmFsdWUsXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFN0b3JlIHRoZSBuYW1lIG9mIHRoZSB1bmlmb3JtIHRvIHVwZGF0ZSBtYXRlcmlhbCB2YWx1ZXMuXG4gICAgICAgICAgaWYgKCFkZWZpbmVkKG1hcHBlZFVuaWZvcm1zW3RlY2huaXF1ZUlkXSkpIHtcbiAgICAgICAgICAgIG1hcHBlZFVuaWZvcm1zW3RlY2huaXF1ZUlkXSA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBtYXBwZWRVbmlmb3Jtc1t0ZWNobmlxdWVJZF1bcGFyYW1ldGVyTmFtZV0gPSB1bmlmb3JtTmFtZTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKCFkZWZpbmVkKHNlZW5Qcm9ncmFtc1t0ZWNobmlxdWVMZWdhY3kucHJvZ3JhbV0pKSB7XG4gICAgICAgIGNvbnN0IHByb2dyYW1MZWdhY3kgPSBnbHRmLnByb2dyYW1zW3RlY2huaXF1ZUxlZ2FjeS5wcm9ncmFtXTtcblxuICAgICAgICBjb25zdCBwcm9ncmFtID0ge1xuICAgICAgICAgIG5hbWU6IHByb2dyYW1MZWdhY3kubmFtZSxcbiAgICAgICAgICBmcmFnbWVudFNoYWRlcjogdW5kZWZpbmVkLFxuICAgICAgICAgIHZlcnRleFNoYWRlcjogdW5kZWZpbmVkLFxuICAgICAgICAgIGdsRXh0ZW5zaW9uczogZ2xFeHRlbnNpb25zLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZzID0gZ2x0Zi5zaGFkZXJzW3Byb2dyYW1MZWdhY3kuZnJhZ21lbnRTaGFkZXJdO1xuICAgICAgICBwcm9ncmFtLmZyYWdtZW50U2hhZGVyID0gYWRkVG9BcnJheShleHRlbnNpb24uc2hhZGVycywgZnMsIHRydWUpO1xuXG4gICAgICAgIGNvbnN0IHZzID0gZ2x0Zi5zaGFkZXJzW3Byb2dyYW1MZWdhY3kudmVydGV4U2hhZGVyXTtcbiAgICAgICAgcHJvZ3JhbS52ZXJ0ZXhTaGFkZXIgPSBhZGRUb0FycmF5KGV4dGVuc2lvbi5zaGFkZXJzLCB2cywgdHJ1ZSk7XG5cbiAgICAgICAgdGVjaG5pcXVlLnByb2dyYW0gPSBhZGRUb0FycmF5KGV4dGVuc2lvbi5wcm9ncmFtcywgcHJvZ3JhbSk7XG4gICAgICAgIHNlZW5Qcm9ncmFtc1t0ZWNobmlxdWVMZWdhY3kucHJvZ3JhbV0gPSB0ZWNobmlxdWUucHJvZ3JhbTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRlY2huaXF1ZS5wcm9ncmFtID0gc2VlblByb2dyYW1zW3RlY2huaXF1ZUxlZ2FjeS5wcm9ncmFtXTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RvcmUgdGhlIGluZGV4IG9mIHRoZSBuZXcgdGVjaG5pcXVlIHRvIHJlZmVyZW5jZSBpbnN0ZWFkLlxuICAgICAgdXBkYXRlZFRlY2huaXF1ZUluZGljZXNbdGVjaG5pcXVlSWRdID0gYWRkVG9BcnJheShcbiAgICAgICAgZXh0ZW5zaW9uLnRlY2huaXF1ZXMsXG4gICAgICAgIHRlY2huaXF1ZVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGlmIChleHRlbnNpb24udGVjaG5pcXVlcy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoIWRlZmluZWQoZ2x0Zi5leHRlbnNpb25zKSkge1xuICAgICAgICBnbHRmLmV4dGVuc2lvbnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgZ2x0Zi5leHRlbnNpb25zLktIUl90ZWNobmlxdWVzX3dlYmdsID0gZXh0ZW5zaW9uO1xuICAgICAgYWRkRXh0ZW5zaW9uc1VzZWQoZ2x0ZiwgXCJLSFJfdGVjaG5pcXVlc193ZWJnbFwiKTtcbiAgICAgIGFkZEV4dGVuc2lvbnNSZXF1aXJlZChnbHRmLCBcIktIUl90ZWNobmlxdWVzX3dlYmdsXCIpO1xuICAgIH1cbiAgfVxuXG4gIEZvckVhY2gubWF0ZXJpYWwoZ2x0ZiwgZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgaWYgKGRlZmluZWQobWF0ZXJpYWwudGVjaG5pcXVlKSkge1xuICAgICAgY29uc3QgbWF0ZXJpYWxFeHRlbnNpb24gPSB7XG4gICAgICAgIHRlY2huaXF1ZTogdXBkYXRlZFRlY2huaXF1ZUluZGljZXNbbWF0ZXJpYWwudGVjaG5pcXVlXSxcbiAgICAgIH07XG5cbiAgICAgIEZvckVhY2gub2JqZWN0TGVnYWN5KG1hdGVyaWFsLnZhbHVlcywgZnVuY3Rpb24gKHZhbHVlLCBwYXJhbWV0ZXJOYW1lKSB7XG4gICAgICAgIGlmICghZGVmaW5lZChtYXRlcmlhbEV4dGVuc2lvbi52YWx1ZXMpKSB7XG4gICAgICAgICAgbWF0ZXJpYWxFeHRlbnNpb24udmFsdWVzID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1bmlmb3JtTmFtZSA9IG1hcHBlZFVuaWZvcm1zW21hdGVyaWFsLnRlY2huaXF1ZV1bcGFyYW1ldGVyTmFtZV07XG4gICAgICAgIG1hdGVyaWFsRXh0ZW5zaW9uLnZhbHVlc1t1bmlmb3JtTmFtZV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWRlZmluZWQobWF0ZXJpYWwuZXh0ZW5zaW9ucykpIHtcbiAgICAgICAgbWF0ZXJpYWwuZXh0ZW5zaW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBtYXRlcmlhbC5leHRlbnNpb25zLktIUl90ZWNobmlxdWVzX3dlYmdsID0gbWF0ZXJpYWxFeHRlbnNpb247XG4gICAgfVxuXG4gICAgZGVsZXRlIG1hdGVyaWFsLnRlY2huaXF1ZTtcbiAgICBkZWxldGUgbWF0ZXJpYWwudmFsdWVzO1xuICB9KTtcblxuICBkZWxldGUgZ2x0Zi50ZWNobmlxdWVzO1xuICBkZWxldGUgZ2x0Zi5wcm9ncmFtcztcbiAgZGVsZXRlIGdsdGYuc2hhZGVycztcblxuICByZXR1cm4gZ2x0Zjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW92ZVRlY2huaXF1ZXNUb0V4dGVuc2lvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///56942\n')},26806:function(__unused_webpack___webpack_module__,__webpack_exports__){eval('\n\n/**\n * Utility function for retrieving the number of components in a given type.\n *\n * @param {String} type glTF type\n * @returns {Number} The number of components in that type.\n *\n * @private\n */\nfunction numberOfComponentsForType(type) {\n  switch (type) {\n    case "SCALAR":\n      return 1;\n    case "VEC2":\n      return 2;\n    case "VEC3":\n      return 3;\n    case "VEC4":\n    case "MAT2":\n      return 4;\n    case "MAT3":\n      return 9;\n    case "MAT4":\n      return 16;\n  }\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (numberOfComponentsForType);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY4MDYuanMiLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseURBQWUseUJBQXlCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR2x0ZlBpcGVsaW5lL251bWJlck9mQ29tcG9uZW50c0ZvclR5cGUuanM/NTU5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSBudW1iZXIgb2YgY29tcG9uZW50cyBpbiBhIGdpdmVuIHR5cGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgZ2xURiB0eXBlXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgaW4gdGhhdCB0eXBlLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG51bWJlck9mQ29tcG9uZW50c0ZvclR5cGUodHlwZSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiU0NBTEFSXCI6XG4gICAgICByZXR1cm4gMTtcbiAgICBjYXNlIFwiVkVDMlwiOlxuICAgICAgcmV0dXJuIDI7XG4gICAgY2FzZSBcIlZFQzNcIjpcbiAgICAgIHJldHVybiAzO1xuICAgIGNhc2UgXCJWRUM0XCI6XG4gICAgY2FzZSBcIk1BVDJcIjpcbiAgICAgIHJldHVybiA0O1xuICAgIGNhc2UgXCJNQVQzXCI6XG4gICAgICByZXR1cm4gOTtcbiAgICBjYXNlIFwiTUFUNFwiOlxuICAgICAgcmV0dXJuIDE2O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG51bWJlck9mQ29tcG9uZW50c0ZvclR5cGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///26806\n')},52655:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "Z": function() { return /* binding */ GltfPipeline_parseGlb; }\n});\n\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Scene/GltfPipeline/addPipelineExtras.js\nvar addPipelineExtras = __webpack_require__(93410);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/defined.js\nvar defined = __webpack_require__(82982);\n;// CONCATENATED MODULE: ./node_modules/cesium/Source/Scene/GltfPipeline/removeExtensionsRequired.js\n\n\n/**\n * Removes an extension from gltf.extensionsRequired if it is present.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {String} extension The extension to remove.\n *\n * @private\n */\nfunction removeExtensionsRequired(gltf, extension) {\n  const extensionsRequired = gltf.extensionsRequired;\n  if ((0,defined/* default */.Z)(extensionsRequired)) {\n    const index = extensionsRequired.indexOf(extension);\n    if (index >= 0) {\n      extensionsRequired.splice(index, 1);\n    }\n    if (extensionsRequired.length === 0) {\n      delete gltf.extensionsRequired;\n    }\n  }\n}\n\n/* harmony default export */ var GltfPipeline_removeExtensionsRequired = (removeExtensionsRequired);\n\n;// CONCATENATED MODULE: ./node_modules/cesium/Source/Scene/GltfPipeline/removeExtensionsUsed.js\n\n\n\n/**\n * Removes an extension from gltf.extensionsUsed and gltf.extensionsRequired if it is present.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {String} extension The extension to remove.\n *\n * @private\n */\nfunction removeExtensionsUsed(gltf, extension) {\n  const extensionsUsed = gltf.extensionsUsed;\n  if ((0,defined/* default */.Z)(extensionsUsed)) {\n    const index = extensionsUsed.indexOf(extension);\n    if (index >= 0) {\n      extensionsUsed.splice(index, 1);\n    }\n    GltfPipeline_removeExtensionsRequired(gltf, extension);\n    if (extensionsUsed.length === 0) {\n      delete gltf.extensionsUsed;\n    }\n  }\n}\n\n/* harmony default export */ var GltfPipeline_removeExtensionsUsed = (removeExtensionsUsed);\n\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/defaultValue.js\nvar defaultValue = __webpack_require__(62200);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/getMagic.js\nvar getMagic = __webpack_require__(3020);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/getStringFromTypedArray.js\nvar getStringFromTypedArray = __webpack_require__(66659);\n// EXTERNAL MODULE: ./node_modules/cesium/Source/Core/RuntimeError.js\nvar RuntimeError = __webpack_require__(9407);\n;// CONCATENATED MODULE: ./node_modules/cesium/Source/Scene/GltfPipeline/parseGlb.js\n\n\n\n\n\n\n\n\nconst sizeOfUint32 = 4;\n\n/**\n * Convert a binary glTF to glTF.\n *\n * The returned glTF has pipeline extras included. The embedded binary data is stored in gltf.buffers[0].extras._pipeline.source.\n *\n * @param {Buffer} glb The glb data to parse.\n * @returns {Object} A javascript object containing a glTF asset with pipeline extras included.\n *\n * @private\n */\nfunction parseGlb(glb) {\n  // Check that the magic string is present\n  const magic = (0,getMagic/* default */.Z)(glb);\n  if (magic !== "glTF") {\n    throw new RuntimeError/* default */.Z("File is not valid binary glTF");\n  }\n\n  const header = readHeader(glb, 0, 5);\n  const version = header[1];\n  if (version !== 1 && version !== 2) {\n    throw new RuntimeError/* default */.Z("Binary glTF version is not 1 or 2");\n  }\n\n  if (version === 1) {\n    return parseGlbVersion1(glb, header);\n  }\n\n  return parseGlbVersion2(glb, header);\n}\n\nfunction readHeader(glb, byteOffset, count) {\n  const dataView = new DataView(glb.buffer);\n  const header = new Array(count);\n  for (let i = 0; i < count; ++i) {\n    header[i] = dataView.getUint32(\n      glb.byteOffset + byteOffset + i * sizeOfUint32,\n      true\n    );\n  }\n  return header;\n}\n\nfunction parseGlbVersion1(glb, header) {\n  const length = header[2];\n  const contentLength = header[3];\n  const contentFormat = header[4];\n\n  // Check that the content format is 0, indicating that it is JSON\n  if (contentFormat !== 0) {\n    throw new RuntimeError/* default */.Z("Binary glTF scene format is not JSON");\n  }\n\n  const jsonStart = 20;\n  const binaryStart = jsonStart + contentLength;\n\n  const contentString = (0,getStringFromTypedArray/* default */.Z)(glb, jsonStart, contentLength);\n  const gltf = JSON.parse(contentString);\n  (0,addPipelineExtras/* default */.Z)(gltf);\n\n  const binaryBuffer = glb.subarray(binaryStart, length);\n\n  const buffers = gltf.buffers;\n  if ((0,defined/* default */.Z)(buffers) && Object.keys(buffers).length > 0) {\n    // In some older models, the binary glTF buffer is named KHR_binary_glTF\n    const binaryGltfBuffer = (0,defaultValue/* default */.Z)(\n      buffers.binary_glTF,\n      buffers.KHR_binary_glTF\n    );\n    if ((0,defined/* default */.Z)(binaryGltfBuffer)) {\n      binaryGltfBuffer.extras._pipeline.source = binaryBuffer;\n      delete binaryGltfBuffer.uri;\n    }\n  }\n  // Remove the KHR_binary_glTF extension\n  GltfPipeline_removeExtensionsUsed(gltf, "KHR_binary_glTF");\n  return gltf;\n}\n\nfunction parseGlbVersion2(glb, header) {\n  const length = header[2];\n  let byteOffset = 12;\n  let gltf;\n  let binaryBuffer;\n  while (byteOffset < length) {\n    const chunkHeader = readHeader(glb, byteOffset, 2);\n    const chunkLength = chunkHeader[0];\n    const chunkType = chunkHeader[1];\n    byteOffset += 8;\n    const chunkBuffer = glb.subarray(byteOffset, byteOffset + chunkLength);\n    byteOffset += chunkLength;\n    // Load JSON chunk\n    if (chunkType === 0x4e4f534a) {\n      const jsonString = (0,getStringFromTypedArray/* default */.Z)(chunkBuffer);\n      gltf = JSON.parse(jsonString);\n      (0,addPipelineExtras/* default */.Z)(gltf);\n    }\n    // Load Binary chunk\n    else if (chunkType === 0x004e4942) {\n      binaryBuffer = chunkBuffer;\n    }\n  }\n  if ((0,defined/* default */.Z)(gltf) && (0,defined/* default */.Z)(binaryBuffer)) {\n    const buffers = gltf.buffers;\n    if ((0,defined/* default */.Z)(buffers) && buffers.length > 0) {\n      const buffer = buffers[0];\n      buffer.extras._pipeline.source = binaryBuffer;\n    }\n  }\n  return gltf;\n}\n\n/* harmony default export */ var GltfPipeline_parseGlb = (parseGlb);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTI2NTUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNEM7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sMEJBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMEVBQWUsd0JBQXdCLEVBQUM7OztBQ3ZCNkI7QUFDekI7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sMEJBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscUNBQXdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0VBQWUsb0JBQW9CLEVBQUM7Ozs7Ozs7Ozs7O0FDekJtQjtBQUNNO0FBQ1A7QUFDVjtBQUNFO0FBQzhCO0FBQ3RCOztBQUV0RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDJCQUFRO0FBQ3hCO0FBQ0EsY0FBYywyQkFBWTtBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDJCQUFZO0FBQzFCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLDJCQUFZO0FBQzFCOztBQUVBO0FBQ0E7O0FBRUEsd0JBQXdCLDBDQUF1QjtBQUMvQztBQUNBLEVBQUUsb0NBQWlCOztBQUVuQjs7QUFFQTtBQUNBLE1BQU0sMEJBQU87QUFDYjtBQUNBLDZCQUE2QiwrQkFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQSxRQUFRLDBCQUFPO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsaUNBQW9CO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwQ0FBdUI7QUFDaEQ7QUFDQSxNQUFNLG9DQUFpQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDBCQUFPLFVBQVUsMEJBQU87QUFDOUI7QUFDQSxRQUFRLDBCQUFPO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBEQUFlLFFBQVEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvcmVtb3ZlRXh0ZW5zaW9uc1JlcXVpcmVkLmpzP2I5NGMiLCJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS9yZW1vdmVFeHRlbnNpb25zVXNlZC5qcz9mYTE4Iiwid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvcGFyc2VHbGIuanM/ZjhlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5cbi8qKlxuICogUmVtb3ZlcyBhbiBleHRlbnNpb24gZnJvbSBnbHRmLmV4dGVuc2lvbnNSZXF1aXJlZCBpZiBpdCBpcyBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcGFyYW0ge1N0cmluZ30gZXh0ZW5zaW9uIFRoZSBleHRlbnNpb24gdG8gcmVtb3ZlLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUV4dGVuc2lvbnNSZXF1aXJlZChnbHRmLCBleHRlbnNpb24pIHtcbiAgY29uc3QgZXh0ZW5zaW9uc1JlcXVpcmVkID0gZ2x0Zi5leHRlbnNpb25zUmVxdWlyZWQ7XG4gIGlmIChkZWZpbmVkKGV4dGVuc2lvbnNSZXF1aXJlZCkpIHtcbiAgICBjb25zdCBpbmRleCA9IGV4dGVuc2lvbnNSZXF1aXJlZC5pbmRleE9mKGV4dGVuc2lvbik7XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgIGV4dGVuc2lvbnNSZXF1aXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBpZiAoZXh0ZW5zaW9uc1JlcXVpcmVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVsZXRlIGdsdGYuZXh0ZW5zaW9uc1JlcXVpcmVkO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCByZW1vdmVFeHRlbnNpb25zUmVxdWlyZWQ7XG4iLCJpbXBvcnQgcmVtb3ZlRXh0ZW5zaW9uc1JlcXVpcmVkIGZyb20gXCIuL3JlbW92ZUV4dGVuc2lvbnNSZXF1aXJlZC5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uLy4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuXG4vKipcbiAqIFJlbW92ZXMgYW4gZXh0ZW5zaW9uIGZyb20gZ2x0Zi5leHRlbnNpb25zVXNlZCBhbmQgZ2x0Zi5leHRlbnNpb25zUmVxdWlyZWQgaWYgaXQgaXMgcHJlc2VudC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2x0ZiBBIGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgYSBnbFRGIGFzc2V0LlxuICogQHBhcmFtIHtTdHJpbmd9IGV4dGVuc2lvbiBUaGUgZXh0ZW5zaW9uIHRvIHJlbW92ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZW1vdmVFeHRlbnNpb25zVXNlZChnbHRmLCBleHRlbnNpb24pIHtcbiAgY29uc3QgZXh0ZW5zaW9uc1VzZWQgPSBnbHRmLmV4dGVuc2lvbnNVc2VkO1xuICBpZiAoZGVmaW5lZChleHRlbnNpb25zVXNlZCkpIHtcbiAgICBjb25zdCBpbmRleCA9IGV4dGVuc2lvbnNVc2VkLmluZGV4T2YoZXh0ZW5zaW9uKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgZXh0ZW5zaW9uc1VzZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgcmVtb3ZlRXh0ZW5zaW9uc1JlcXVpcmVkKGdsdGYsIGV4dGVuc2lvbik7XG4gICAgaWYgKGV4dGVuc2lvbnNVc2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVsZXRlIGdsdGYuZXh0ZW5zaW9uc1VzZWQ7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlbW92ZUV4dGVuc2lvbnNVc2VkO1xuIiwiaW1wb3J0IGFkZFBpcGVsaW5lRXh0cmFzIGZyb20gXCIuL2FkZFBpcGVsaW5lRXh0cmFzLmpzXCI7XG5pbXBvcnQgcmVtb3ZlRXh0ZW5zaW9uc1VzZWQgZnJvbSBcIi4vcmVtb3ZlRXh0ZW5zaW9uc1VzZWQuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uLy4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgZ2V0TWFnaWMgZnJvbSBcIi4uLy4uL0NvcmUvZ2V0TWFnaWMuanNcIjtcbmltcG9ydCBnZXRTdHJpbmdGcm9tVHlwZWRBcnJheSBmcm9tIFwiLi4vLi4vQ29yZS9nZXRTdHJpbmdGcm9tVHlwZWRBcnJheS5qc1wiO1xuaW1wb3J0IFJ1bnRpbWVFcnJvciBmcm9tIFwiLi4vLi4vQ29yZS9SdW50aW1lRXJyb3IuanNcIjtcblxuY29uc3Qgc2l6ZU9mVWludDMyID0gNDtcblxuLyoqXG4gKiBDb252ZXJ0IGEgYmluYXJ5IGdsVEYgdG8gZ2xURi5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgZ2xURiBoYXMgcGlwZWxpbmUgZXh0cmFzIGluY2x1ZGVkLiBUaGUgZW1iZWRkZWQgYmluYXJ5IGRhdGEgaXMgc3RvcmVkIGluIGdsdGYuYnVmZmVyc1swXS5leHRyYXMuX3BpcGVsaW5lLnNvdXJjZS5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gZ2xiIFRoZSBnbGIgZGF0YSB0byBwYXJzZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQgd2l0aCBwaXBlbGluZSBleHRyYXMgaW5jbHVkZWQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VHbGIoZ2xiKSB7XG4gIC8vIENoZWNrIHRoYXQgdGhlIG1hZ2ljIHN0cmluZyBpcyBwcmVzZW50XG4gIGNvbnN0IG1hZ2ljID0gZ2V0TWFnaWMoZ2xiKTtcbiAgaWYgKG1hZ2ljICE9PSBcImdsVEZcIikge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJGaWxlIGlzIG5vdCB2YWxpZCBiaW5hcnkgZ2xURlwiKTtcbiAgfVxuXG4gIGNvbnN0IGhlYWRlciA9IHJlYWRIZWFkZXIoZ2xiLCAwLCA1KTtcbiAgY29uc3QgdmVyc2lvbiA9IGhlYWRlclsxXTtcbiAgaWYgKHZlcnNpb24gIT09IDEgJiYgdmVyc2lvbiAhPT0gMikge1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXCJCaW5hcnkgZ2xURiB2ZXJzaW9uIGlzIG5vdCAxIG9yIDJcIik7XG4gIH1cblxuICBpZiAodmVyc2lvbiA9PT0gMSkge1xuICAgIHJldHVybiBwYXJzZUdsYlZlcnNpb24xKGdsYiwgaGVhZGVyKTtcbiAgfVxuXG4gIHJldHVybiBwYXJzZUdsYlZlcnNpb24yKGdsYiwgaGVhZGVyKTtcbn1cblxuZnVuY3Rpb24gcmVhZEhlYWRlcihnbGIsIGJ5dGVPZmZzZXQsIGNvdW50KSB7XG4gIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGdsYi5idWZmZXIpO1xuICBjb25zdCBoZWFkZXIgPSBuZXcgQXJyYXkoY291bnQpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICBoZWFkZXJbaV0gPSBkYXRhVmlldy5nZXRVaW50MzIoXG4gICAgICBnbGIuYnl0ZU9mZnNldCArIGJ5dGVPZmZzZXQgKyBpICogc2l6ZU9mVWludDMyLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGhlYWRlcjtcbn1cblxuZnVuY3Rpb24gcGFyc2VHbGJWZXJzaW9uMShnbGIsIGhlYWRlcikge1xuICBjb25zdCBsZW5ndGggPSBoZWFkZXJbMl07XG4gIGNvbnN0IGNvbnRlbnRMZW5ndGggPSBoZWFkZXJbM107XG4gIGNvbnN0IGNvbnRlbnRGb3JtYXQgPSBoZWFkZXJbNF07XG5cbiAgLy8gQ2hlY2sgdGhhdCB0aGUgY29udGVudCBmb3JtYXQgaXMgMCwgaW5kaWNhdGluZyB0aGF0IGl0IGlzIEpTT05cbiAgaWYgKGNvbnRlbnRGb3JtYXQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFwiQmluYXJ5IGdsVEYgc2NlbmUgZm9ybWF0IGlzIG5vdCBKU09OXCIpO1xuICB9XG5cbiAgY29uc3QganNvblN0YXJ0ID0gMjA7XG4gIGNvbnN0IGJpbmFyeVN0YXJ0ID0ganNvblN0YXJ0ICsgY29udGVudExlbmd0aDtcblxuICBjb25zdCBjb250ZW50U3RyaW5nID0gZ2V0U3RyaW5nRnJvbVR5cGVkQXJyYXkoZ2xiLCBqc29uU3RhcnQsIGNvbnRlbnRMZW5ndGgpO1xuICBjb25zdCBnbHRmID0gSlNPTi5wYXJzZShjb250ZW50U3RyaW5nKTtcbiAgYWRkUGlwZWxpbmVFeHRyYXMoZ2x0Zik7XG5cbiAgY29uc3QgYmluYXJ5QnVmZmVyID0gZ2xiLnN1YmFycmF5KGJpbmFyeVN0YXJ0LCBsZW5ndGgpO1xuXG4gIGNvbnN0IGJ1ZmZlcnMgPSBnbHRmLmJ1ZmZlcnM7XG4gIGlmIChkZWZpbmVkKGJ1ZmZlcnMpICYmIE9iamVjdC5rZXlzKGJ1ZmZlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAvLyBJbiBzb21lIG9sZGVyIG1vZGVscywgdGhlIGJpbmFyeSBnbFRGIGJ1ZmZlciBpcyBuYW1lZCBLSFJfYmluYXJ5X2dsVEZcbiAgICBjb25zdCBiaW5hcnlHbHRmQnVmZmVyID0gZGVmYXVsdFZhbHVlKFxuICAgICAgYnVmZmVycy5iaW5hcnlfZ2xURixcbiAgICAgIGJ1ZmZlcnMuS0hSX2JpbmFyeV9nbFRGXG4gICAgKTtcbiAgICBpZiAoZGVmaW5lZChiaW5hcnlHbHRmQnVmZmVyKSkge1xuICAgICAgYmluYXJ5R2x0ZkJ1ZmZlci5leHRyYXMuX3BpcGVsaW5lLnNvdXJjZSA9IGJpbmFyeUJ1ZmZlcjtcbiAgICAgIGRlbGV0ZSBiaW5hcnlHbHRmQnVmZmVyLnVyaTtcbiAgICB9XG4gIH1cbiAgLy8gUmVtb3ZlIHRoZSBLSFJfYmluYXJ5X2dsVEYgZXh0ZW5zaW9uXG4gIHJlbW92ZUV4dGVuc2lvbnNVc2VkKGdsdGYsIFwiS0hSX2JpbmFyeV9nbFRGXCIpO1xuICByZXR1cm4gZ2x0Zjtcbn1cblxuZnVuY3Rpb24gcGFyc2VHbGJWZXJzaW9uMihnbGIsIGhlYWRlcikge1xuICBjb25zdCBsZW5ndGggPSBoZWFkZXJbMl07XG4gIGxldCBieXRlT2Zmc2V0ID0gMTI7XG4gIGxldCBnbHRmO1xuICBsZXQgYmluYXJ5QnVmZmVyO1xuICB3aGlsZSAoYnl0ZU9mZnNldCA8IGxlbmd0aCkge1xuICAgIGNvbnN0IGNodW5rSGVhZGVyID0gcmVhZEhlYWRlcihnbGIsIGJ5dGVPZmZzZXQsIDIpO1xuICAgIGNvbnN0IGNodW5rTGVuZ3RoID0gY2h1bmtIZWFkZXJbMF07XG4gICAgY29uc3QgY2h1bmtUeXBlID0gY2h1bmtIZWFkZXJbMV07XG4gICAgYnl0ZU9mZnNldCArPSA4O1xuICAgIGNvbnN0IGNodW5rQnVmZmVyID0gZ2xiLnN1YmFycmF5KGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBjaHVua0xlbmd0aCk7XG4gICAgYnl0ZU9mZnNldCArPSBjaHVua0xlbmd0aDtcbiAgICAvLyBMb2FkIEpTT04gY2h1bmtcbiAgICBpZiAoY2h1bmtUeXBlID09PSAweDRlNGY1MzRhKSB7XG4gICAgICBjb25zdCBqc29uU3RyaW5nID0gZ2V0U3RyaW5nRnJvbVR5cGVkQXJyYXkoY2h1bmtCdWZmZXIpO1xuICAgICAgZ2x0ZiA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG4gICAgICBhZGRQaXBlbGluZUV4dHJhcyhnbHRmKTtcbiAgICB9XG4gICAgLy8gTG9hZCBCaW5hcnkgY2h1bmtcbiAgICBlbHNlIGlmIChjaHVua1R5cGUgPT09IDB4MDA0ZTQ5NDIpIHtcbiAgICAgIGJpbmFyeUJ1ZmZlciA9IGNodW5rQnVmZmVyO1xuICAgIH1cbiAgfVxuICBpZiAoZGVmaW5lZChnbHRmKSAmJiBkZWZpbmVkKGJpbmFyeUJ1ZmZlcikpIHtcbiAgICBjb25zdCBidWZmZXJzID0gZ2x0Zi5idWZmZXJzO1xuICAgIGlmIChkZWZpbmVkKGJ1ZmZlcnMpICYmIGJ1ZmZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYnVmZmVyID0gYnVmZmVyc1swXTtcbiAgICAgIGJ1ZmZlci5leHRyYXMuX3BpcGVsaW5lLnNvdXJjZSA9IGJpbmFyeUJ1ZmZlcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdsdGY7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBhcnNlR2xiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///52655\n')},35933:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(93224);\n/* harmony import */ var _getComponentReader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2378);\n/* harmony import */ var _numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(26806);\n/* harmony import */ var _Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(23401);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(82982);\n\n\n\n\n\n\n\n/**\n * Returns the accessor data in a contiguous array.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {Object} accessor The accessor.\n * @returns {Array} The accessor values in a contiguous array.\n *\n * @private\n */\nfunction readAccessorPacked(gltf, accessor) {\n  const byteStride = (0,_getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf, accessor);\n  const componentTypeByteLength = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getSizeInBytes */ .Z.getSizeInBytes(\n    accessor.componentType\n  );\n  const numberOfComponents = (0,_numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(accessor.type);\n  const count = accessor.count;\n  const values = new Array(numberOfComponents * count);\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(accessor.bufferView)) {\n    (0,_Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(values, 0);\n    return values;\n  }\n\n  const bufferView = gltf.bufferViews[accessor.bufferView];\n  const source = gltf.buffers[bufferView.buffer].extras._pipeline.source;\n  let byteOffset =\n    accessor.byteOffset + bufferView.byteOffset + source.byteOffset;\n\n  const dataView = new DataView(source.buffer);\n  const components = new Array(numberOfComponents);\n  const componentReader = (0,_getComponentReader_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(accessor.componentType);\n\n  for (let i = 0; i < count; ++i) {\n    componentReader(\n      dataView,\n      byteOffset,\n      numberOfComponents,\n      componentTypeByteLength,\n      components\n    );\n    for (let j = 0; j < numberOfComponents; ++j) {\n      values[i * numberOfComponents + j] = components[j];\n    }\n    byteOffset += byteStride;\n  }\n  return values;\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (readAccessorPacked);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU5MzMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStEO0FBQ047QUFDYztBQUN2QjtBQUNnQjtBQUNwQjs7QUFFNUM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOEVBQXFCO0FBQzFDLGtDQUFrQyx5R0FBZ0M7QUFDbEU7QUFDQTtBQUNBLDZCQUE2QixrRkFBeUI7QUFDdEQ7QUFDQTs7QUFFQSxPQUFPLHFFQUFPO0FBQ2QsSUFBSSx1RUFBUztBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQiwyRUFBa0I7O0FBRTVDLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseURBQWUsa0JBQWtCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR2x0ZlBpcGVsaW5lL3JlYWRBY2Nlc3NvclBhY2tlZC5qcz9lMGJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBnZXRBY2Nlc3NvckJ5dGVTdHJpZGUgZnJvbSBcIi4vZ2V0QWNjZXNzb3JCeXRlU3RyaWRlLmpzXCI7XG5pbXBvcnQgZ2V0Q29tcG9uZW50UmVhZGVyIGZyb20gXCIuL2dldENvbXBvbmVudFJlYWRlci5qc1wiO1xuaW1wb3J0IG51bWJlck9mQ29tcG9uZW50c0ZvclR5cGUgZnJvbSBcIi4vbnVtYmVyT2ZDb21wb25lbnRzRm9yVHlwZS5qc1wiO1xuaW1wb3J0IGFycmF5RmlsbCBmcm9tIFwiLi4vLi4vQ29yZS9hcnJheUZpbGwuanNcIjtcbmltcG9ydCBDb21wb25lbnREYXRhdHlwZSBmcm9tIFwiLi4vLi4vQ29yZS9Db21wb25lbnREYXRhdHlwZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uLy4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGFjY2Vzc29yIGRhdGEgaW4gYSBjb250aWd1b3VzIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcGFyYW0ge09iamVjdH0gYWNjZXNzb3IgVGhlIGFjY2Vzc29yLlxuICogQHJldHVybnMge0FycmF5fSBUaGUgYWNjZXNzb3IgdmFsdWVzIGluIGEgY29udGlndW91cyBhcnJheS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWFkQWNjZXNzb3JQYWNrZWQoZ2x0ZiwgYWNjZXNzb3IpIHtcbiAgY29uc3QgYnl0ZVN0cmlkZSA9IGdldEFjY2Vzc29yQnl0ZVN0cmlkZShnbHRmLCBhY2Nlc3Nvcik7XG4gIGNvbnN0IGNvbXBvbmVudFR5cGVCeXRlTGVuZ3RoID0gQ29tcG9uZW50RGF0YXR5cGUuZ2V0U2l6ZUluQnl0ZXMoXG4gICAgYWNjZXNzb3IuY29tcG9uZW50VHlwZVxuICApO1xuICBjb25zdCBudW1iZXJPZkNvbXBvbmVudHMgPSBudW1iZXJPZkNvbXBvbmVudHNGb3JUeXBlKGFjY2Vzc29yLnR5cGUpO1xuICBjb25zdCBjb3VudCA9IGFjY2Vzc29yLmNvdW50O1xuICBjb25zdCB2YWx1ZXMgPSBuZXcgQXJyYXkobnVtYmVyT2ZDb21wb25lbnRzICogY291bnQpO1xuXG4gIGlmICghZGVmaW5lZChhY2Nlc3Nvci5idWZmZXJWaWV3KSkge1xuICAgIGFycmF5RmlsbCh2YWx1ZXMsIDApO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBjb25zdCBidWZmZXJWaWV3ID0gZ2x0Zi5idWZmZXJWaWV3c1thY2Nlc3Nvci5idWZmZXJWaWV3XTtcbiAgY29uc3Qgc291cmNlID0gZ2x0Zi5idWZmZXJzW2J1ZmZlclZpZXcuYnVmZmVyXS5leHRyYXMuX3BpcGVsaW5lLnNvdXJjZTtcbiAgbGV0IGJ5dGVPZmZzZXQgPVxuICAgIGFjY2Vzc29yLmJ5dGVPZmZzZXQgKyBidWZmZXJWaWV3LmJ5dGVPZmZzZXQgKyBzb3VyY2UuYnl0ZU9mZnNldDtcblxuICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhzb3VyY2UuYnVmZmVyKTtcbiAgY29uc3QgY29tcG9uZW50cyA9IG5ldyBBcnJheShudW1iZXJPZkNvbXBvbmVudHMpO1xuICBjb25zdCBjb21wb25lbnRSZWFkZXIgPSBnZXRDb21wb25lbnRSZWFkZXIoYWNjZXNzb3IuY29tcG9uZW50VHlwZSk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgY29tcG9uZW50UmVhZGVyKFxuICAgICAgZGF0YVZpZXcsXG4gICAgICBieXRlT2Zmc2V0LFxuICAgICAgbnVtYmVyT2ZDb21wb25lbnRzLFxuICAgICAgY29tcG9uZW50VHlwZUJ5dGVMZW5ndGgsXG4gICAgICBjb21wb25lbnRzXG4gICAgKTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bWJlck9mQ29tcG9uZW50czsgKytqKSB7XG4gICAgICB2YWx1ZXNbaSAqIG51bWJlck9mQ29tcG9uZW50cyArIGpdID0gY29tcG9uZW50c1tqXTtcbiAgICB9XG4gICAgYnl0ZU9mZnNldCArPSBieXRlU3RyaWRlO1xuICB9XG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlYWRBY2Nlc3NvclBhY2tlZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///35933\n')},23537:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56629);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82982);\n\n\n\n/**\n * Iterate through the objects within the glTF and delete their pipeline extras object.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @returns {Object} glTF with no pipeline extras.\n *\n * @private\n */\nfunction removePipelineExtras(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].shader */ .Z.shader(gltf, function (shader) {\n    removeExtras(shader);\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].buffer */ .Z.buffer(gltf, function (buffer) {\n    removeExtras(buffer);\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].image */ .Z.image(gltf, function (image) {\n    removeExtras(image);\n  });\n\n  removeExtras(gltf);\n\n  return gltf;\n}\n\nfunction removeExtras(object) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(object.extras)) {\n    return;\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(object.extras._pipeline)) {\n    delete object.extras._pipeline;\n  }\n\n  if (Object.keys(object.extras).length === 0) {\n    delete object.extras;\n  }\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (removePipelineExtras);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM1MzcuanMiLCJtYXBwaW5ncyI6Ijs7QUFBbUM7QUFDUzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMEVBQWM7QUFDaEI7QUFDQSxHQUFHO0FBQ0gsRUFBRSwwRUFBYztBQUNoQjtBQUNBLEdBQUc7QUFDSCxFQUFFLHdFQUFhO0FBQ2Y7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPLHFFQUFPO0FBQ2Q7QUFDQTs7QUFFQSxNQUFNLHFFQUFPO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5REFBZSxvQkFBb0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvcmVtb3ZlUGlwZWxpbmVFeHRyYXMuanM/MGUyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRm9yRWFjaCBmcm9tIFwiLi9Gb3JFYWNoLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5cbi8qKlxuICogSXRlcmF0ZSB0aHJvdWdoIHRoZSBvYmplY3RzIHdpdGhpbiB0aGUgZ2xURiBhbmQgZGVsZXRlIHRoZWlyIHBpcGVsaW5lIGV4dHJhcyBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGdsdGYgQSBqYXZhc2NyaXB0IG9iamVjdCBjb250YWluaW5nIGEgZ2xURiBhc3NldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IGdsVEYgd2l0aCBubyBwaXBlbGluZSBleHRyYXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlUGlwZWxpbmVFeHRyYXMoZ2x0Zikge1xuICBGb3JFYWNoLnNoYWRlcihnbHRmLCBmdW5jdGlvbiAoc2hhZGVyKSB7XG4gICAgcmVtb3ZlRXh0cmFzKHNoYWRlcik7XG4gIH0pO1xuICBGb3JFYWNoLmJ1ZmZlcihnbHRmLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgcmVtb3ZlRXh0cmFzKGJ1ZmZlcik7XG4gIH0pO1xuICBGb3JFYWNoLmltYWdlKGdsdGYsIGZ1bmN0aW9uIChpbWFnZSkge1xuICAgIHJlbW92ZUV4dHJhcyhpbWFnZSk7XG4gIH0pO1xuXG4gIHJlbW92ZUV4dHJhcyhnbHRmKTtcblxuICByZXR1cm4gZ2x0Zjtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXh0cmFzKG9iamVjdCkge1xuICBpZiAoIWRlZmluZWQob2JqZWN0LmV4dHJhcykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZGVmaW5lZChvYmplY3QuZXh0cmFzLl9waXBlbGluZSkpIHtcbiAgICBkZWxldGUgb2JqZWN0LmV4dHJhcy5fcGlwZWxpbmU7XG4gIH1cblxuICBpZiAoT2JqZWN0LmtleXMob2JqZWN0LmV4dHJhcykubGVuZ3RoID09PSAwKSB7XG4gICAgZGVsZXRlIG9iamVjdC5leHRyYXM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVtb3ZlUGlwZWxpbmVFeHRyYXM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///23537\n')},37657:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56629);\n/* harmony import */ var _forEachTextureInMaterial_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11072);\n/* harmony import */ var _usesExtension_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(29745);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(82982);\n\n\n\n\n\n\nconst allElementTypes = [\n  "mesh",\n  "node",\n  "material",\n  "accessor",\n  "bufferView",\n  "buffer",\n  "texture",\n  "sampler",\n  "image",\n];\n\n/**\n * Removes unused elements from gltf.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {String[]} [elementTypes=[\'mesh\', \'node\', \'material\', \'accessor\', \'bufferView\', \'buffer\']] Element types to be removed. Needs to be a subset of [\'mesh\', \'node\', \'material\', \'accessor\', \'bufferView\', \'buffer\'], other items will be ignored.\n *\n * @private\n */\nfunction removeUnusedElements(gltf, elementTypes) {\n  elementTypes = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(elementTypes, allElementTypes);\n  allElementTypes.forEach(function (type) {\n    if (elementTypes.indexOf(type) > -1) {\n      removeUnusedElementsByType(gltf, type);\n    }\n  });\n  return gltf;\n}\n\nconst TypeToGltfElementName = {\n  accessor: "accessors",\n  buffer: "buffers",\n  bufferView: "bufferViews",\n  image: "images",\n  node: "nodes",\n  material: "materials",\n  mesh: "meshes",\n  sampler: "samplers",\n  texture: "textures",\n};\n\nfunction removeUnusedElementsByType(gltf, type) {\n  const name = TypeToGltfElementName[type];\n  const arrayOfObjects = gltf[name];\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(arrayOfObjects)) {\n    let removed = 0;\n    const usedIds = getListOfElementsIdsInUse[type](gltf);\n    const length = arrayOfObjects.length;\n\n    for (let i = 0; i < length; ++i) {\n      if (!usedIds[i]) {\n        Remove[type](gltf, i - removed);\n        removed++;\n      }\n    }\n  }\n}\n\n/**\n * Contains functions for removing elements from a glTF hierarchy.\n * Since top-level glTF elements are arrays, when something is removed, referring\n * indices need to be updated.\n * @constructor\n *\n * @private\n */\nfunction Remove() {}\n\nRemove.accessor = function (gltf, accessorId) {\n  const accessors = gltf.accessors;\n\n  accessors.splice(accessorId, 1);\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      // Update accessor ids for the primitives.\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitiveAttribute */ .Z.meshPrimitiveAttribute(\n        primitive,\n        function (attributeAccessorId, semantic) {\n          if (attributeAccessorId > accessorId) {\n            primitive.attributes[semantic]--;\n          }\n        }\n      );\n\n      // Update accessor ids for the targets.\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitiveTarget */ .Z.meshPrimitiveTarget(primitive, function (target) {\n        _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitiveTargetAttribute */ .Z.meshPrimitiveTargetAttribute(\n          target,\n          function (attributeAccessorId, semantic) {\n            if (attributeAccessorId > accessorId) {\n              target[semantic]--;\n            }\n          }\n        );\n      });\n      const indices = primitive.indices;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(indices) && indices > accessorId) {\n        primitive.indices--;\n      }\n    });\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].skin */ .Z.skin(gltf, function (skin) {\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(skin.inverseBindMatrices) &&\n      skin.inverseBindMatrices > accessorId\n    ) {\n      skin.inverseBindMatrices--;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animationSampler */ .Z.animationSampler(animation, function (sampler) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(sampler.input) && sampler.input > accessorId) {\n        sampler.input--;\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(sampler.output) && sampler.output > accessorId) {\n        sampler.output--;\n      }\n    });\n  });\n};\n\nRemove.buffer = function (gltf, bufferId) {\n  const buffers = gltf.buffers;\n\n  buffers.splice(bufferId, 1);\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].bufferView */ .Z.bufferView(gltf, function (bufferView) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(bufferView.buffer) && bufferView.buffer > bufferId) {\n      bufferView.buffer--;\n    }\n\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(bufferView.extensions) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(bufferView.extensions.EXT_meshopt_compression)\n    ) {\n      bufferView.extensions.EXT_meshopt_compression.buffer--;\n    }\n  });\n};\n\nRemove.bufferView = function (gltf, bufferViewId) {\n  const bufferViews = gltf.bufferViews;\n\n  bufferViews.splice(bufferViewId, 1);\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].accessor */ .Z.accessor(gltf, function (accessor) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(accessor.bufferView) && accessor.bufferView > bufferViewId) {\n      accessor.bufferView--;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].shader */ .Z.shader(gltf, function (shader) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(shader.bufferView) && shader.bufferView > bufferViewId) {\n      shader.bufferView--;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].image */ .Z.image(gltf, function (image) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(image.bufferView) && image.bufferView > bufferViewId) {\n      image.bufferView--;\n    }\n  });\n\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, "KHR_draco_mesh_compression")) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n        if (\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitive.extensions) &&\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitive.extensions.KHR_draco_mesh_compression)\n        ) {\n          if (\n            primitive.extensions.KHR_draco_mesh_compression.bufferView >\n            bufferViewId\n          ) {\n            primitive.extensions.KHR_draco_mesh_compression.bufferView--;\n          }\n        }\n      });\n    });\n  }\n\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, "EXT_feature_metadata")) {\n    const extension = gltf.extensions.EXT_feature_metadata;\n    const featureTables = extension.featureTables;\n    for (const featureTableId in featureTables) {\n      if (featureTables.hasOwnProperty(featureTableId)) {\n        const featureTable = featureTables[featureTableId];\n        const properties = featureTable.properties;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(properties)) {\n          for (const propertyId in properties) {\n            if (properties.hasOwnProperty(propertyId)) {\n              const property = properties[propertyId];\n              if (\n                (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(property.bufferView) &&\n                property.bufferView > bufferViewId\n              ) {\n                property.bufferView--;\n              }\n              if (\n                (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(property.arrayOffsetBufferView) &&\n                property.arrayOffsetBufferView > bufferViewId\n              ) {\n                property.arrayOffsetBufferView--;\n              }\n              if (\n                (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(property.stringOffsetBufferView) &&\n                property.stringOffsetBufferView > bufferViewId\n              ) {\n                property.stringOffsetBufferView--;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n};\n\nRemove.image = function (gltf, imageId) {\n  const images = gltf.images;\n  images.splice(imageId, 1);\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].texture */ .Z.texture(gltf, function (texture) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.source)) {\n      if (texture.source > imageId) {\n        --texture.source;\n      }\n    }\n    const ext = texture.extensions;\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(ext) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(ext.EXT_texture_webp) &&\n      ext.EXT_texture_webp.source > imageId\n    ) {\n      --texture.extensions.EXT_texture_webp.source;\n    } else if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(ext) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(ext.KHR_texture_basisu) &&\n      ext.KHR_texture_basisu.source > imageId\n    ) {\n      --texture.extensions.KHR_texture_basisu.source;\n    }\n  });\n};\n\nRemove.mesh = function (gltf, meshId) {\n  const meshes = gltf.meshes;\n  meshes.splice(meshId, 1);\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].node */ .Z.node(gltf, function (node) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.mesh)) {\n      if (node.mesh > meshId) {\n        node.mesh--;\n      } else if (node.mesh === meshId) {\n        // Remove reference to deleted mesh\n        delete node.mesh;\n      }\n    }\n  });\n};\n\nRemove.node = function (gltf, nodeId) {\n  const nodes = gltf.nodes;\n  nodes.splice(nodeId, 1);\n\n  // Shift all node references\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].skin */ .Z.skin(gltf, function (skin) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(skin.skeleton) && skin.skeleton > nodeId) {\n      skin.skeleton--;\n    }\n\n    skin.joints = skin.joints.map(function (x) {\n      return x > nodeId ? x - 1 : x;\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animationChannel */ .Z.animationChannel(animation, function (channel) {\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(channel.target) &&\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(channel.target.node) &&\n        channel.target.node > nodeId\n      ) {\n        channel.target.node--;\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].technique */ .Z.technique(gltf, function (technique) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].techniqueUniform */ .Z.techniqueUniform(technique, function (uniform) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(uniform.node) && uniform.node > nodeId) {\n        uniform.node--;\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].node */ .Z.node(gltf, function (node) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.children)) {\n      return;\n    }\n\n    node.children = node.children\n      .filter(function (x) {\n        return x !== nodeId; // Remove\n      })\n      .map(function (x) {\n        return x > nodeId ? x - 1 : x; // Shift indices\n      });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].scene */ .Z.scene(gltf, function (scene) {\n    scene.nodes = scene.nodes\n      .filter(function (x) {\n        return x !== nodeId; // Remove\n      })\n      .map(function (x) {\n        return x > nodeId ? x - 1 : x; // Shift indices\n      });\n  });\n};\n\nRemove.material = function (gltf, materialId) {\n  const materials = gltf.materials;\n  materials.splice(materialId, 1);\n\n  // Shift other material ids\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitive.material) && primitive.material > materialId) {\n        primitive.material--;\n      }\n    });\n  });\n};\n\nRemove.sampler = function (gltf, samplerId) {\n  const samplers = gltf.samplers;\n  samplers.splice(samplerId, 1);\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].texture */ .Z.texture(gltf, function (texture) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.sampler)) {\n      if (texture.sampler > samplerId) {\n        --texture.sampler;\n      }\n    }\n  });\n};\n\nRemove.texture = function (gltf, textureId) {\n  const textures = gltf.textures;\n  textures.splice(textureId, 1);\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].material */ .Z.material(gltf, function (material) {\n    (0,_forEachTextureInMaterial_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(material, function (textureIndex, textureInfo) {\n      if (textureInfo.index > textureId) {\n        --textureInfo.index;\n      }\n    });\n  });\n\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, "EXT_feature_metadata")) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n        const extensions = primitive.extensions;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(extensions) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(extensions.EXT_feature_metadata)) {\n          const extension = extensions.EXT_feature_metadata;\n          const featureIdTextures = extension.featureIdTextures;\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(featureIdTextures)) {\n            const featureIdTexturesLength = featureIdTextures.length;\n            for (let i = 0; i < featureIdTexturesLength; ++i) {\n              const featureIdTexture = featureIdTextures[i];\n              const textureInfo = featureIdTexture.featureIds.texture;\n              if (textureInfo.index > textureId) {\n                --textureInfo.index;\n              }\n            }\n          }\n        }\n      });\n    });\n\n    const extension = gltf.extensions.EXT_feature_metadata;\n    const featureTextures = extension.featureTextures;\n    for (const featureTextureId in featureTextures) {\n      if (featureTextures.hasOwnProperty(featureTextureId)) {\n        const featureTexture = featureTextures[featureTextureId];\n        const properties = featureTexture.properties;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(properties)) {\n          for (const propertyId in properties) {\n            if (properties.hasOwnProperty(propertyId)) {\n              const property = properties[propertyId];\n              const textureInfo = property.texture;\n              if (textureInfo.index > textureId) {\n                --textureInfo.index;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n};\n\n/**\n * Contains functions for getting a list of element ids in use by the glTF asset.\n * @constructor\n *\n * @private\n */\nfunction getListOfElementsIdsInUse() {}\n\ngetListOfElementsIdsInUse.accessor = function (gltf) {\n  // Calculate accessor\'s that are currently in use.\n  const usedAccessorIds = {};\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitiveAttribute */ .Z.meshPrimitiveAttribute(primitive, function (accessorId) {\n        usedAccessorIds[accessorId] = true;\n      });\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitiveTarget */ .Z.meshPrimitiveTarget(primitive, function (target) {\n        _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitiveTargetAttribute */ .Z.meshPrimitiveTargetAttribute(target, function (accessorId) {\n          usedAccessorIds[accessorId] = true;\n        });\n      });\n      const indices = primitive.indices;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(indices)) {\n        usedAccessorIds[indices] = true;\n      }\n    });\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].skin */ .Z.skin(gltf, function (skin) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(skin.inverseBindMatrices)) {\n      usedAccessorIds[skin.inverseBindMatrices] = true;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animationSampler */ .Z.animationSampler(animation, function (sampler) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(sampler.input)) {\n        usedAccessorIds[sampler.input] = true;\n      }\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(sampler.output)) {\n        usedAccessorIds[sampler.output] = true;\n      }\n    });\n  });\n\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, "EXT_mesh_gpu_instancing")) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].node */ .Z.node(gltf, function (node) {\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.extensions) &&\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.extensions.EXT_mesh_gpu_instancing)\n      ) {\n        Object.keys(node.extensions.EXT_mesh_gpu_instancing.attributes).forEach(\n          function (key) {\n            const attributeAccessorId =\n              node.extensions.EXT_mesh_gpu_instancing.attributes[key];\n            usedAccessorIds[attributeAccessorId] = true;\n          }\n        );\n      }\n    });\n  }\n\n  return usedAccessorIds;\n};\n\ngetListOfElementsIdsInUse.buffer = function (gltf) {\n  // Calculate buffer\'s that are currently in use.\n  const usedBufferIds = {};\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].bufferView */ .Z.bufferView(gltf, function (bufferView) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(bufferView.buffer)) {\n      usedBufferIds[bufferView.buffer] = true;\n    }\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(bufferView.extensions) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(bufferView.extensions.EXT_meshopt_compression)\n    ) {\n      usedBufferIds[\n        bufferView.extensions.EXT_meshopt_compression.buffer\n      ] = true;\n    }\n  });\n\n  return usedBufferIds;\n};\n\ngetListOfElementsIdsInUse.bufferView = function (gltf) {\n  // Calculate bufferView\'s that are currently in use.\n  const usedBufferViewIds = {};\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].accessor */ .Z.accessor(gltf, function (accessor) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(accessor.bufferView)) {\n      usedBufferViewIds[accessor.bufferView] = true;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].shader */ .Z.shader(gltf, function (shader) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(shader.bufferView)) {\n      usedBufferViewIds[shader.bufferView] = true;\n    }\n  });\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].image */ .Z.image(gltf, function (image) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(image.bufferView)) {\n      usedBufferViewIds[image.bufferView] = true;\n    }\n  });\n\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, "KHR_draco_mesh_compression")) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n        if (\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitive.extensions) &&\n          (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitive.extensions.KHR_draco_mesh_compression)\n        ) {\n          usedBufferViewIds[\n            primitive.extensions.KHR_draco_mesh_compression.bufferView\n          ] = true;\n        }\n      });\n    });\n  }\n\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, "EXT_feature_metadata")) {\n    const extension = gltf.extensions.EXT_feature_metadata;\n    const featureTables = extension.featureTables;\n    for (const featureTableId in featureTables) {\n      if (featureTables.hasOwnProperty(featureTableId)) {\n        const featureTable = featureTables[featureTableId];\n        const properties = featureTable.properties;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(properties)) {\n          for (const propertyId in properties) {\n            if (properties.hasOwnProperty(propertyId)) {\n              const property = properties[propertyId];\n              if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(property.bufferView)) {\n                usedBufferViewIds[property.bufferView] = true;\n              }\n              if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(property.arrayOffsetBufferView)) {\n                usedBufferViewIds[property.arrayOffsetBufferView] = true;\n              }\n              if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(property.stringOffsetBufferView)) {\n                usedBufferViewIds[property.stringOffsetBufferView] = true;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return usedBufferViewIds;\n};\n\ngetListOfElementsIdsInUse.image = function (gltf) {\n  const usedImageIds = {};\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].texture */ .Z.texture(gltf, function (texture) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.source)) {\n      usedImageIds[texture.source] = true;\n    }\n\n    if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.extensions) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.extensions.EXT_texture_webp)\n    ) {\n      usedImageIds[texture.extensions.EXT_texture_webp.source] = true;\n    } else if (\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.extensions) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.extensions.KHR_texture_basisu)\n    ) {\n      usedImageIds[texture.extensions.KHR_texture_basisu.source] = true;\n    }\n  });\n  return usedImageIds;\n};\n\ngetListOfElementsIdsInUse.mesh = function (gltf) {\n  const usedMeshIds = {};\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].node */ .Z.node(gltf, function (node) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.mesh && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(gltf.meshes))) {\n      const mesh = gltf.meshes[node.mesh];\n      if (\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(mesh) &&\n        (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(mesh.primitives) &&\n        mesh.primitives.length > 0\n      ) {\n        usedMeshIds[node.mesh] = true;\n      }\n    }\n  });\n\n  return usedMeshIds;\n};\n\n// Check if node is empty. It is considered empty if neither referencing\n// mesh, camera, extensions and has no children\nfunction nodeIsEmpty(gltf, nodeId, usedNodeIds) {\n  const node = gltf.nodes[nodeId];\n  if (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.mesh) ||\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.camera) ||\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.skin) ||\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.weights) ||\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.extras) ||\n    ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.extensions) && Object.keys(node.extensions).length !== 0) ||\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(usedNodeIds[nodeId])\n  ) {\n    return false;\n  }\n\n  // Empty if no children or children are all empty nodes\n  return (\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(node.children) ||\n    node.children.filter(function (n) {\n      return !nodeIsEmpty(gltf, n, usedNodeIds);\n    }).length === 0\n  );\n}\n\ngetListOfElementsIdsInUse.node = function (gltf) {\n  const usedNodeIds = {};\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].skin */ .Z.skin(gltf, function (skin) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(skin.skeleton)) {\n      usedNodeIds[skin.skeleton] = true;\n    }\n\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].skinJoint */ .Z.skinJoint(skin, function (joint) {\n      usedNodeIds[joint] = true;\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].animationChannel */ .Z.animationChannel(animation, function (channel) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(channel.target) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(channel.target.node)) {\n        usedNodeIds[channel.target.node] = true;\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].technique */ .Z.technique(gltf, function (technique) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].techniqueUniform */ .Z.techniqueUniform(technique, function (uniform) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(uniform.node)) {\n        usedNodeIds[uniform.node] = true;\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].node */ .Z.node(gltf, function (node, nodeId) {\n    if (!nodeIsEmpty(gltf, nodeId, usedNodeIds)) {\n      usedNodeIds[nodeId] = true;\n    }\n  });\n\n  return usedNodeIds;\n};\n\ngetListOfElementsIdsInUse.material = function (gltf) {\n  const usedMaterialIds = {};\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(primitive.material)) {\n        usedMaterialIds[primitive.material] = true;\n      }\n    });\n  });\n\n  return usedMaterialIds;\n};\n\ngetListOfElementsIdsInUse.texture = function (gltf) {\n  const usedTextureIds = {};\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].material */ .Z.material(gltf, function (material) {\n    (0,_forEachTextureInMaterial_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(material, function (textureId) {\n      usedTextureIds[textureId] = true;\n    });\n  });\n\n  if ((0,_usesExtension_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, "EXT_feature_metadata")) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n        const extensions = primitive.extensions;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(extensions) && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(extensions.EXT_feature_metadata)) {\n          const extension = extensions.EXT_feature_metadata;\n          const featureIdTextures = extension.featureIdTextures;\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(featureIdTextures)) {\n            const featureIdTexturesLength = featureIdTextures.length;\n            for (let i = 0; i < featureIdTexturesLength; ++i) {\n              const featureIdTexture = featureIdTextures[i];\n              const textureInfo = featureIdTexture.featureIds.texture;\n              usedTextureIds[textureInfo.index] = true;\n            }\n          }\n        }\n      });\n    });\n\n    const extension = gltf.extensions.EXT_feature_metadata;\n    const featureTextures = extension.featureTextures;\n    for (const featureTextureId in featureTextures) {\n      if (featureTextures.hasOwnProperty(featureTextureId)) {\n        const featureTexture = featureTextures[featureTextureId];\n        const properties = featureTexture.properties;\n        if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(properties)) {\n          for (const propertyId in properties) {\n            if (properties.hasOwnProperty(propertyId)) {\n              const property = properties[propertyId];\n              const textureInfo = property.texture;\n              usedTextureIds[textureInfo.index] = true;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return usedTextureIds;\n};\n\ngetListOfElementsIdsInUse.sampler = function (gltf) {\n  const usedSamplerIds = {};\n\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].texture */ .Z.texture(gltf, function (texture) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(texture.sampler)) {\n      usedSamplerIds[texture.sampler] = true;\n    }\n  });\n\n  return usedSamplerIds;\n};\n\n/* harmony default export */ __webpack_exports__["Z"] = (removeUnusedElements);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTZCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUVBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsRUFBRSw0RUFBZTtBQUNqQixRQUFRLHFFQUFPO0FBQ2Y7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQSx5REFBZSxvQkFBb0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvcmVtb3ZlVW51c2VkRWxlbWVudHMuanM/MzdlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRm9yRWFjaCBmcm9tIFwiLi9Gb3JFYWNoLmpzXCI7XG5pbXBvcnQgZm9yRWFjaFRleHR1cmVJbk1hdGVyaWFsIGZyb20gXCIuL2ZvckVhY2hUZXh0dXJlSW5NYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHVzZXNFeHRlbnNpb24gZnJvbSBcIi4vdXNlc0V4dGVuc2lvbi5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcblxuY29uc3QgYWxsRWxlbWVudFR5cGVzID0gW1xuICBcIm1lc2hcIixcbiAgXCJub2RlXCIsXG4gIFwibWF0ZXJpYWxcIixcbiAgXCJhY2Nlc3NvclwiLFxuICBcImJ1ZmZlclZpZXdcIixcbiAgXCJidWZmZXJcIixcbiAgXCJ0ZXh0dXJlXCIsXG4gIFwic2FtcGxlclwiLFxuICBcImltYWdlXCIsXG5dO1xuXG4vKipcbiAqIFJlbW92ZXMgdW51c2VkIGVsZW1lbnRzIGZyb20gZ2x0Zi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2x0ZiBBIGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgYSBnbFRGIGFzc2V0LlxuICogQHBhcmFtIHtTdHJpbmdbXX0gW2VsZW1lbnRUeXBlcz1bJ21lc2gnLCAnbm9kZScsICdtYXRlcmlhbCcsICdhY2Nlc3NvcicsICdidWZmZXJWaWV3JywgJ2J1ZmZlciddXSBFbGVtZW50IHR5cGVzIHRvIGJlIHJlbW92ZWQuIE5lZWRzIHRvIGJlIGEgc3Vic2V0IG9mIFsnbWVzaCcsICdub2RlJywgJ21hdGVyaWFsJywgJ2FjY2Vzc29yJywgJ2J1ZmZlclZpZXcnLCAnYnVmZmVyJ10sIG90aGVyIGl0ZW1zIHdpbGwgYmUgaWdub3JlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZW1vdmVVbnVzZWRFbGVtZW50cyhnbHRmLCBlbGVtZW50VHlwZXMpIHtcbiAgZWxlbWVudFR5cGVzID0gZGVmYXVsdFZhbHVlKGVsZW1lbnRUeXBlcywgYWxsRWxlbWVudFR5cGVzKTtcbiAgYWxsRWxlbWVudFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBpZiAoZWxlbWVudFR5cGVzLmluZGV4T2YodHlwZSkgPiAtMSkge1xuICAgICAgcmVtb3ZlVW51c2VkRWxlbWVudHNCeVR5cGUoZ2x0ZiwgdHlwZSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGdsdGY7XG59XG5cbmNvbnN0IFR5cGVUb0dsdGZFbGVtZW50TmFtZSA9IHtcbiAgYWNjZXNzb3I6IFwiYWNjZXNzb3JzXCIsXG4gIGJ1ZmZlcjogXCJidWZmZXJzXCIsXG4gIGJ1ZmZlclZpZXc6IFwiYnVmZmVyVmlld3NcIixcbiAgaW1hZ2U6IFwiaW1hZ2VzXCIsXG4gIG5vZGU6IFwibm9kZXNcIixcbiAgbWF0ZXJpYWw6IFwibWF0ZXJpYWxzXCIsXG4gIG1lc2g6IFwibWVzaGVzXCIsXG4gIHNhbXBsZXI6IFwic2FtcGxlcnNcIixcbiAgdGV4dHVyZTogXCJ0ZXh0dXJlc1wiLFxufTtcblxuZnVuY3Rpb24gcmVtb3ZlVW51c2VkRWxlbWVudHNCeVR5cGUoZ2x0ZiwgdHlwZSkge1xuICBjb25zdCBuYW1lID0gVHlwZVRvR2x0ZkVsZW1lbnROYW1lW3R5cGVdO1xuICBjb25zdCBhcnJheU9mT2JqZWN0cyA9IGdsdGZbbmFtZV07XG5cbiAgaWYgKGRlZmluZWQoYXJyYXlPZk9iamVjdHMpKSB7XG4gICAgbGV0IHJlbW92ZWQgPSAwO1xuICAgIGNvbnN0IHVzZWRJZHMgPSBnZXRMaXN0T2ZFbGVtZW50c0lkc0luVXNlW3R5cGVdKGdsdGYpO1xuICAgIGNvbnN0IGxlbmd0aCA9IGFycmF5T2ZPYmplY3RzLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmICghdXNlZElkc1tpXSkge1xuICAgICAgICBSZW1vdmVbdHlwZV0oZ2x0ZiwgaSAtIHJlbW92ZWQpO1xuICAgICAgICByZW1vdmVkKys7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29udGFpbnMgZnVuY3Rpb25zIGZvciByZW1vdmluZyBlbGVtZW50cyBmcm9tIGEgZ2xURiBoaWVyYXJjaHkuXG4gKiBTaW5jZSB0b3AtbGV2ZWwgZ2xURiBlbGVtZW50cyBhcmUgYXJyYXlzLCB3aGVuIHNvbWV0aGluZyBpcyByZW1vdmVkLCByZWZlcnJpbmdcbiAqIGluZGljZXMgbmVlZCB0byBiZSB1cGRhdGVkLlxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gUmVtb3ZlKCkge31cblxuUmVtb3ZlLmFjY2Vzc29yID0gZnVuY3Rpb24gKGdsdGYsIGFjY2Vzc29ySWQpIHtcbiAgY29uc3QgYWNjZXNzb3JzID0gZ2x0Zi5hY2Nlc3NvcnM7XG5cbiAgYWNjZXNzb3JzLnNwbGljZShhY2Nlc3NvcklkLCAxKTtcblxuICBGb3JFYWNoLm1lc2goZ2x0ZiwgZnVuY3Rpb24gKG1lc2gpIHtcbiAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgLy8gVXBkYXRlIGFjY2Vzc29yIGlkcyBmb3IgdGhlIHByaW1pdGl2ZXMuXG4gICAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmVBdHRyaWJ1dGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgZnVuY3Rpb24gKGF0dHJpYnV0ZUFjY2Vzc29ySWQsIHNlbWFudGljKSB7XG4gICAgICAgICAgaWYgKGF0dHJpYnV0ZUFjY2Vzc29ySWQgPiBhY2Nlc3NvcklkKSB7XG4gICAgICAgICAgICBwcmltaXRpdmUuYXR0cmlidXRlc1tzZW1hbnRpY10tLTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIFVwZGF0ZSBhY2Nlc3NvciBpZHMgZm9yIHRoZSB0YXJnZXRzLlxuICAgICAgRm9yRWFjaC5tZXNoUHJpbWl0aXZlVGFyZ2V0KHByaW1pdGl2ZSwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmVUYXJnZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgIGZ1bmN0aW9uIChhdHRyaWJ1dGVBY2Nlc3NvcklkLCBzZW1hbnRpYykge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZUFjY2Vzc29ySWQgPiBhY2Nlc3NvcklkKSB7XG4gICAgICAgICAgICAgIHRhcmdldFtzZW1hbnRpY10tLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGluZGljZXMgPSBwcmltaXRpdmUuaW5kaWNlcztcbiAgICAgIGlmIChkZWZpbmVkKGluZGljZXMpICYmIGluZGljZXMgPiBhY2Nlc3NvcklkKSB7XG4gICAgICAgIHByaW1pdGl2ZS5pbmRpY2VzLS07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIEZvckVhY2guc2tpbihnbHRmLCBmdW5jdGlvbiAoc2tpbikge1xuICAgIGlmIChcbiAgICAgIGRlZmluZWQoc2tpbi5pbnZlcnNlQmluZE1hdHJpY2VzKSAmJlxuICAgICAgc2tpbi5pbnZlcnNlQmluZE1hdHJpY2VzID4gYWNjZXNzb3JJZFxuICAgICkge1xuICAgICAgc2tpbi5pbnZlcnNlQmluZE1hdHJpY2VzLS07XG4gICAgfVxuICB9KTtcblxuICBGb3JFYWNoLmFuaW1hdGlvbihnbHRmLCBmdW5jdGlvbiAoYW5pbWF0aW9uKSB7XG4gICAgRm9yRWFjaC5hbmltYXRpb25TYW1wbGVyKGFuaW1hdGlvbiwgZnVuY3Rpb24gKHNhbXBsZXIpIHtcbiAgICAgIGlmIChkZWZpbmVkKHNhbXBsZXIuaW5wdXQpICYmIHNhbXBsZXIuaW5wdXQgPiBhY2Nlc3NvcklkKSB7XG4gICAgICAgIHNhbXBsZXIuaW5wdXQtLTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbmVkKHNhbXBsZXIub3V0cHV0KSAmJiBzYW1wbGVyLm91dHB1dCA+IGFjY2Vzc29ySWQpIHtcbiAgICAgICAgc2FtcGxlci5vdXRwdXQtLTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5SZW1vdmUuYnVmZmVyID0gZnVuY3Rpb24gKGdsdGYsIGJ1ZmZlcklkKSB7XG4gIGNvbnN0IGJ1ZmZlcnMgPSBnbHRmLmJ1ZmZlcnM7XG5cbiAgYnVmZmVycy5zcGxpY2UoYnVmZmVySWQsIDEpO1xuXG4gIEZvckVhY2guYnVmZmVyVmlldyhnbHRmLCBmdW5jdGlvbiAoYnVmZmVyVmlldykge1xuICAgIGlmIChkZWZpbmVkKGJ1ZmZlclZpZXcuYnVmZmVyKSAmJiBidWZmZXJWaWV3LmJ1ZmZlciA+IGJ1ZmZlcklkKSB7XG4gICAgICBidWZmZXJWaWV3LmJ1ZmZlci0tO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRlZmluZWQoYnVmZmVyVmlldy5leHRlbnNpb25zKSAmJlxuICAgICAgZGVmaW5lZChidWZmZXJWaWV3LmV4dGVuc2lvbnMuRVhUX21lc2hvcHRfY29tcHJlc3Npb24pXG4gICAgKSB7XG4gICAgICBidWZmZXJWaWV3LmV4dGVuc2lvbnMuRVhUX21lc2hvcHRfY29tcHJlc3Npb24uYnVmZmVyLS07XG4gICAgfVxuICB9KTtcbn07XG5cblJlbW92ZS5idWZmZXJWaWV3ID0gZnVuY3Rpb24gKGdsdGYsIGJ1ZmZlclZpZXdJZCkge1xuICBjb25zdCBidWZmZXJWaWV3cyA9IGdsdGYuYnVmZmVyVmlld3M7XG5cbiAgYnVmZmVyVmlld3Muc3BsaWNlKGJ1ZmZlclZpZXdJZCwgMSk7XG5cbiAgRm9yRWFjaC5hY2Nlc3NvcihnbHRmLCBmdW5jdGlvbiAoYWNjZXNzb3IpIHtcbiAgICBpZiAoZGVmaW5lZChhY2Nlc3Nvci5idWZmZXJWaWV3KSAmJiBhY2Nlc3Nvci5idWZmZXJWaWV3ID4gYnVmZmVyVmlld0lkKSB7XG4gICAgICBhY2Nlc3Nvci5idWZmZXJWaWV3LS07XG4gICAgfVxuICB9KTtcblxuICBGb3JFYWNoLnNoYWRlcihnbHRmLCBmdW5jdGlvbiAoc2hhZGVyKSB7XG4gICAgaWYgKGRlZmluZWQoc2hhZGVyLmJ1ZmZlclZpZXcpICYmIHNoYWRlci5idWZmZXJWaWV3ID4gYnVmZmVyVmlld0lkKSB7XG4gICAgICBzaGFkZXIuYnVmZmVyVmlldy0tO1xuICAgIH1cbiAgfSk7XG5cbiAgRm9yRWFjaC5pbWFnZShnbHRmLCBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICBpZiAoZGVmaW5lZChpbWFnZS5idWZmZXJWaWV3KSAmJiBpbWFnZS5idWZmZXJWaWV3ID4gYnVmZmVyVmlld0lkKSB7XG4gICAgICBpbWFnZS5idWZmZXJWaWV3LS07XG4gICAgfVxuICB9KTtcblxuICBpZiAodXNlc0V4dGVuc2lvbihnbHRmLCBcIktIUl9kcmFjb19tZXNoX2NvbXByZXNzaW9uXCIpKSB7XG4gICAgRm9yRWFjaC5tZXNoKGdsdGYsIGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZGVmaW5lZChwcmltaXRpdmUuZXh0ZW5zaW9ucykgJiZcbiAgICAgICAgICBkZWZpbmVkKHByaW1pdGl2ZS5leHRlbnNpb25zLktIUl9kcmFjb19tZXNoX2NvbXByZXNzaW9uKVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwcmltaXRpdmUuZXh0ZW5zaW9ucy5LSFJfZHJhY29fbWVzaF9jb21wcmVzc2lvbi5idWZmZXJWaWV3ID5cbiAgICAgICAgICAgIGJ1ZmZlclZpZXdJZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcHJpbWl0aXZlLmV4dGVuc2lvbnMuS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24uYnVmZmVyVmlldy0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAodXNlc0V4dGVuc2lvbihnbHRmLCBcIkVYVF9mZWF0dXJlX21ldGFkYXRhXCIpKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9uID0gZ2x0Zi5leHRlbnNpb25zLkVYVF9mZWF0dXJlX21ldGFkYXRhO1xuICAgIGNvbnN0IGZlYXR1cmVUYWJsZXMgPSBleHRlbnNpb24uZmVhdHVyZVRhYmxlcztcbiAgICBmb3IgKGNvbnN0IGZlYXR1cmVUYWJsZUlkIGluIGZlYXR1cmVUYWJsZXMpIHtcbiAgICAgIGlmIChmZWF0dXJlVGFibGVzLmhhc093blByb3BlcnR5KGZlYXR1cmVUYWJsZUlkKSkge1xuICAgICAgICBjb25zdCBmZWF0dXJlVGFibGUgPSBmZWF0dXJlVGFibGVzW2ZlYXR1cmVUYWJsZUlkXTtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGZlYXR1cmVUYWJsZS5wcm9wZXJ0aWVzO1xuICAgICAgICBpZiAoZGVmaW5lZChwcm9wZXJ0aWVzKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHlJZCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eUlkKSkge1xuICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbcHJvcGVydHlJZF07XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkZWZpbmVkKHByb3BlcnR5LmJ1ZmZlclZpZXcpICYmXG4gICAgICAgICAgICAgICAgcHJvcGVydHkuYnVmZmVyVmlldyA+IGJ1ZmZlclZpZXdJZFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eS5idWZmZXJWaWV3LS07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRlZmluZWQocHJvcGVydHkuYXJyYXlPZmZzZXRCdWZmZXJWaWV3KSAmJlxuICAgICAgICAgICAgICAgIHByb3BlcnR5LmFycmF5T2Zmc2V0QnVmZmVyVmlldyA+IGJ1ZmZlclZpZXdJZFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eS5hcnJheU9mZnNldEJ1ZmZlclZpZXctLTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZGVmaW5lZChwcm9wZXJ0eS5zdHJpbmdPZmZzZXRCdWZmZXJWaWV3KSAmJlxuICAgICAgICAgICAgICAgIHByb3BlcnR5LnN0cmluZ09mZnNldEJ1ZmZlclZpZXcgPiBidWZmZXJWaWV3SWRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydHkuc3RyaW5nT2Zmc2V0QnVmZmVyVmlldy0tO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5SZW1vdmUuaW1hZ2UgPSBmdW5jdGlvbiAoZ2x0ZiwgaW1hZ2VJZCkge1xuICBjb25zdCBpbWFnZXMgPSBnbHRmLmltYWdlcztcbiAgaW1hZ2VzLnNwbGljZShpbWFnZUlkLCAxKTtcblxuICBGb3JFYWNoLnRleHR1cmUoZ2x0ZiwgZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICBpZiAoZGVmaW5lZCh0ZXh0dXJlLnNvdXJjZSkpIHtcbiAgICAgIGlmICh0ZXh0dXJlLnNvdXJjZSA+IGltYWdlSWQpIHtcbiAgICAgICAgLS10ZXh0dXJlLnNvdXJjZTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZXh0ID0gdGV4dHVyZS5leHRlbnNpb25zO1xuICAgIGlmIChcbiAgICAgIGRlZmluZWQoZXh0KSAmJlxuICAgICAgZGVmaW5lZChleHQuRVhUX3RleHR1cmVfd2VicCkgJiZcbiAgICAgIGV4dC5FWFRfdGV4dHVyZV93ZWJwLnNvdXJjZSA+IGltYWdlSWRcbiAgICApIHtcbiAgICAgIC0tdGV4dHVyZS5leHRlbnNpb25zLkVYVF90ZXh0dXJlX3dlYnAuc291cmNlO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBkZWZpbmVkKGV4dCkgJiZcbiAgICAgIGRlZmluZWQoZXh0LktIUl90ZXh0dXJlX2Jhc2lzdSkgJiZcbiAgICAgIGV4dC5LSFJfdGV4dHVyZV9iYXNpc3Uuc291cmNlID4gaW1hZ2VJZFxuICAgICkge1xuICAgICAgLS10ZXh0dXJlLmV4dGVuc2lvbnMuS0hSX3RleHR1cmVfYmFzaXN1LnNvdXJjZTtcbiAgICB9XG4gIH0pO1xufTtcblxuUmVtb3ZlLm1lc2ggPSBmdW5jdGlvbiAoZ2x0ZiwgbWVzaElkKSB7XG4gIGNvbnN0IG1lc2hlcyA9IGdsdGYubWVzaGVzO1xuICBtZXNoZXMuc3BsaWNlKG1lc2hJZCwgMSk7XG5cbiAgRm9yRWFjaC5ub2RlKGdsdGYsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKGRlZmluZWQobm9kZS5tZXNoKSkge1xuICAgICAgaWYgKG5vZGUubWVzaCA+IG1lc2hJZCkge1xuICAgICAgICBub2RlLm1lc2gtLTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5tZXNoID09PSBtZXNoSWQpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZSB0byBkZWxldGVkIG1lc2hcbiAgICAgICAgZGVsZXRlIG5vZGUubWVzaDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuUmVtb3ZlLm5vZGUgPSBmdW5jdGlvbiAoZ2x0Ziwgbm9kZUlkKSB7XG4gIGNvbnN0IG5vZGVzID0gZ2x0Zi5ub2RlcztcbiAgbm9kZXMuc3BsaWNlKG5vZGVJZCwgMSk7XG5cbiAgLy8gU2hpZnQgYWxsIG5vZGUgcmVmZXJlbmNlc1xuICBGb3JFYWNoLnNraW4oZ2x0ZiwgZnVuY3Rpb24gKHNraW4pIHtcbiAgICBpZiAoZGVmaW5lZChza2luLnNrZWxldG9uKSAmJiBza2luLnNrZWxldG9uID4gbm9kZUlkKSB7XG4gICAgICBza2luLnNrZWxldG9uLS07XG4gICAgfVxuXG4gICAgc2tpbi5qb2ludHMgPSBza2luLmpvaW50cy5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiB4ID4gbm9kZUlkID8geCAtIDEgOiB4O1xuICAgIH0pO1xuICB9KTtcbiAgRm9yRWFjaC5hbmltYXRpb24oZ2x0ZiwgZnVuY3Rpb24gKGFuaW1hdGlvbikge1xuICAgIEZvckVhY2guYW5pbWF0aW9uQ2hhbm5lbChhbmltYXRpb24sIGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGRlZmluZWQoY2hhbm5lbC50YXJnZXQpICYmXG4gICAgICAgIGRlZmluZWQoY2hhbm5lbC50YXJnZXQubm9kZSkgJiZcbiAgICAgICAgY2hhbm5lbC50YXJnZXQubm9kZSA+IG5vZGVJZFxuICAgICAgKSB7XG4gICAgICAgIGNoYW5uZWwudGFyZ2V0Lm5vZGUtLTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIEZvckVhY2gudGVjaG5pcXVlKGdsdGYsIGZ1bmN0aW9uICh0ZWNobmlxdWUpIHtcbiAgICBGb3JFYWNoLnRlY2huaXF1ZVVuaWZvcm0odGVjaG5pcXVlLCBmdW5jdGlvbiAodW5pZm9ybSkge1xuICAgICAgaWYgKGRlZmluZWQodW5pZm9ybS5ub2RlKSAmJiB1bmlmb3JtLm5vZGUgPiBub2RlSWQpIHtcbiAgICAgICAgdW5pZm9ybS5ub2RlLS07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBGb3JFYWNoLm5vZGUoZ2x0ZiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAoIWRlZmluZWQobm9kZS5jaGlsZHJlbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBub2RlLmNoaWxkcmVuID0gbm9kZS5jaGlsZHJlblxuICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geCAhPT0gbm9kZUlkOyAvLyBSZW1vdmVcbiAgICAgIH0pXG4gICAgICAubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiB4ID4gbm9kZUlkID8geCAtIDEgOiB4OyAvLyBTaGlmdCBpbmRpY2VzXG4gICAgICB9KTtcbiAgfSk7XG4gIEZvckVhY2guc2NlbmUoZ2x0ZiwgZnVuY3Rpb24gKHNjZW5lKSB7XG4gICAgc2NlbmUubm9kZXMgPSBzY2VuZS5ub2Rlc1xuICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geCAhPT0gbm9kZUlkOyAvLyBSZW1vdmVcbiAgICAgIH0pXG4gICAgICAubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiB4ID4gbm9kZUlkID8geCAtIDEgOiB4OyAvLyBTaGlmdCBpbmRpY2VzXG4gICAgICB9KTtcbiAgfSk7XG59O1xuXG5SZW1vdmUubWF0ZXJpYWwgPSBmdW5jdGlvbiAoZ2x0ZiwgbWF0ZXJpYWxJZCkge1xuICBjb25zdCBtYXRlcmlhbHMgPSBnbHRmLm1hdGVyaWFscztcbiAgbWF0ZXJpYWxzLnNwbGljZShtYXRlcmlhbElkLCAxKTtcblxuICAvLyBTaGlmdCBvdGhlciBtYXRlcmlhbCBpZHNcbiAgRm9yRWFjaC5tZXNoKGdsdGYsIGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgRm9yRWFjaC5tZXNoUHJpbWl0aXZlKG1lc2gsIGZ1bmN0aW9uIChwcmltaXRpdmUpIHtcbiAgICAgIGlmIChkZWZpbmVkKHByaW1pdGl2ZS5tYXRlcmlhbCkgJiYgcHJpbWl0aXZlLm1hdGVyaWFsID4gbWF0ZXJpYWxJZCkge1xuICAgICAgICBwcmltaXRpdmUubWF0ZXJpYWwtLTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5SZW1vdmUuc2FtcGxlciA9IGZ1bmN0aW9uIChnbHRmLCBzYW1wbGVySWQpIHtcbiAgY29uc3Qgc2FtcGxlcnMgPSBnbHRmLnNhbXBsZXJzO1xuICBzYW1wbGVycy5zcGxpY2Uoc2FtcGxlcklkLCAxKTtcblxuICBGb3JFYWNoLnRleHR1cmUoZ2x0ZiwgZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICBpZiAoZGVmaW5lZCh0ZXh0dXJlLnNhbXBsZXIpKSB7XG4gICAgICBpZiAodGV4dHVyZS5zYW1wbGVyID4gc2FtcGxlcklkKSB7XG4gICAgICAgIC0tdGV4dHVyZS5zYW1wbGVyO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5SZW1vdmUudGV4dHVyZSA9IGZ1bmN0aW9uIChnbHRmLCB0ZXh0dXJlSWQpIHtcbiAgY29uc3QgdGV4dHVyZXMgPSBnbHRmLnRleHR1cmVzO1xuICB0ZXh0dXJlcy5zcGxpY2UodGV4dHVyZUlkLCAxKTtcblxuICBGb3JFYWNoLm1hdGVyaWFsKGdsdGYsIGZ1bmN0aW9uIChtYXRlcmlhbCkge1xuICAgIGZvckVhY2hUZXh0dXJlSW5NYXRlcmlhbChtYXRlcmlhbCwgZnVuY3Rpb24gKHRleHR1cmVJbmRleCwgdGV4dHVyZUluZm8pIHtcbiAgICAgIGlmICh0ZXh0dXJlSW5mby5pbmRleCA+IHRleHR1cmVJZCkge1xuICAgICAgICAtLXRleHR1cmVJbmZvLmluZGV4O1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBpZiAodXNlc0V4dGVuc2lvbihnbHRmLCBcIkVYVF9mZWF0dXJlX21ldGFkYXRhXCIpKSB7XG4gICAgRm9yRWFjaC5tZXNoKGdsdGYsIGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgICBjb25zdCBleHRlbnNpb25zID0gcHJpbWl0aXZlLmV4dGVuc2lvbnM7XG4gICAgICAgIGlmIChkZWZpbmVkKGV4dGVuc2lvbnMpICYmIGRlZmluZWQoZXh0ZW5zaW9ucy5FWFRfZmVhdHVyZV9tZXRhZGF0YSkpIHtcbiAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBleHRlbnNpb25zLkVYVF9mZWF0dXJlX21ldGFkYXRhO1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVJZFRleHR1cmVzID0gZXh0ZW5zaW9uLmZlYXR1cmVJZFRleHR1cmVzO1xuICAgICAgICAgIGlmIChkZWZpbmVkKGZlYXR1cmVJZFRleHR1cmVzKSkge1xuICAgICAgICAgICAgY29uc3QgZmVhdHVyZUlkVGV4dHVyZXNMZW5ndGggPSBmZWF0dXJlSWRUZXh0dXJlcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZlYXR1cmVJZFRleHR1cmVzTGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgY29uc3QgZmVhdHVyZUlkVGV4dHVyZSA9IGZlYXR1cmVJZFRleHR1cmVzW2ldO1xuICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlSW5mbyA9IGZlYXR1cmVJZFRleHR1cmUuZmVhdHVyZUlkcy50ZXh0dXJlO1xuICAgICAgICAgICAgICBpZiAodGV4dHVyZUluZm8uaW5kZXggPiB0ZXh0dXJlSWQpIHtcbiAgICAgICAgICAgICAgICAtLXRleHR1cmVJbmZvLmluZGV4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IGdsdGYuZXh0ZW5zaW9ucy5FWFRfZmVhdHVyZV9tZXRhZGF0YTtcbiAgICBjb25zdCBmZWF0dXJlVGV4dHVyZXMgPSBleHRlbnNpb24uZmVhdHVyZVRleHR1cmVzO1xuICAgIGZvciAoY29uc3QgZmVhdHVyZVRleHR1cmVJZCBpbiBmZWF0dXJlVGV4dHVyZXMpIHtcbiAgICAgIGlmIChmZWF0dXJlVGV4dHVyZXMuaGFzT3duUHJvcGVydHkoZmVhdHVyZVRleHR1cmVJZCkpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZVRleHR1cmUgPSBmZWF0dXJlVGV4dHVyZXNbZmVhdHVyZVRleHR1cmVJZF07XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBmZWF0dXJlVGV4dHVyZS5wcm9wZXJ0aWVzO1xuICAgICAgICBpZiAoZGVmaW5lZChwcm9wZXJ0aWVzKSkge1xuICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHlJZCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eUlkKSkge1xuICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbcHJvcGVydHlJZF07XG4gICAgICAgICAgICAgIGNvbnN0IHRleHR1cmVJbmZvID0gcHJvcGVydHkudGV4dHVyZTtcbiAgICAgICAgICAgICAgaWYgKHRleHR1cmVJbmZvLmluZGV4ID4gdGV4dHVyZUlkKSB7XG4gICAgICAgICAgICAgICAgLS10ZXh0dXJlSW5mby5pbmRleDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDb250YWlucyBmdW5jdGlvbnMgZm9yIGdldHRpbmcgYSBsaXN0IG9mIGVsZW1lbnQgaWRzIGluIHVzZSBieSB0aGUgZ2xURiBhc3NldC5cbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldExpc3RPZkVsZW1lbnRzSWRzSW5Vc2UoKSB7fVxuXG5nZXRMaXN0T2ZFbGVtZW50c0lkc0luVXNlLmFjY2Vzc29yID0gZnVuY3Rpb24gKGdsdGYpIHtcbiAgLy8gQ2FsY3VsYXRlIGFjY2Vzc29yJ3MgdGhhdCBhcmUgY3VycmVudGx5IGluIHVzZS5cbiAgY29uc3QgdXNlZEFjY2Vzc29ySWRzID0ge307XG5cbiAgRm9yRWFjaC5tZXNoKGdsdGYsIGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgRm9yRWFjaC5tZXNoUHJpbWl0aXZlKG1lc2gsIGZ1bmN0aW9uIChwcmltaXRpdmUpIHtcbiAgICAgIEZvckVhY2gubWVzaFByaW1pdGl2ZUF0dHJpYnV0ZShwcmltaXRpdmUsIGZ1bmN0aW9uIChhY2Nlc3NvcklkKSB7XG4gICAgICAgIHVzZWRBY2Nlc3Nvcklkc1thY2Nlc3NvcklkXSA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIEZvckVhY2gubWVzaFByaW1pdGl2ZVRhcmdldChwcmltaXRpdmUsIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgRm9yRWFjaC5tZXNoUHJpbWl0aXZlVGFyZ2V0QXR0cmlidXRlKHRhcmdldCwgZnVuY3Rpb24gKGFjY2Vzc29ySWQpIHtcbiAgICAgICAgICB1c2VkQWNjZXNzb3JJZHNbYWNjZXNzb3JJZF0gPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgaW5kaWNlcyA9IHByaW1pdGl2ZS5pbmRpY2VzO1xuICAgICAgaWYgKGRlZmluZWQoaW5kaWNlcykpIHtcbiAgICAgICAgdXNlZEFjY2Vzc29ySWRzW2luZGljZXNdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgRm9yRWFjaC5za2luKGdsdGYsIGZ1bmN0aW9uIChza2luKSB7XG4gICAgaWYgKGRlZmluZWQoc2tpbi5pbnZlcnNlQmluZE1hdHJpY2VzKSkge1xuICAgICAgdXNlZEFjY2Vzc29ySWRzW3NraW4uaW52ZXJzZUJpbmRNYXRyaWNlc10gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgRm9yRWFjaC5hbmltYXRpb24oZ2x0ZiwgZnVuY3Rpb24gKGFuaW1hdGlvbikge1xuICAgIEZvckVhY2guYW5pbWF0aW9uU2FtcGxlcihhbmltYXRpb24sIGZ1bmN0aW9uIChzYW1wbGVyKSB7XG4gICAgICBpZiAoZGVmaW5lZChzYW1wbGVyLmlucHV0KSkge1xuICAgICAgICB1c2VkQWNjZXNzb3JJZHNbc2FtcGxlci5pbnB1dF0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGRlZmluZWQoc2FtcGxlci5vdXRwdXQpKSB7XG4gICAgICAgIHVzZWRBY2Nlc3Nvcklkc1tzYW1wbGVyLm91dHB1dF0gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBpZiAodXNlc0V4dGVuc2lvbihnbHRmLCBcIkVYVF9tZXNoX2dwdV9pbnN0YW5jaW5nXCIpKSB7XG4gICAgRm9yRWFjaC5ub2RlKGdsdGYsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGRlZmluZWQobm9kZS5leHRlbnNpb25zKSAmJlxuICAgICAgICBkZWZpbmVkKG5vZGUuZXh0ZW5zaW9ucy5FWFRfbWVzaF9ncHVfaW5zdGFuY2luZylcbiAgICAgICkge1xuICAgICAgICBPYmplY3Qua2V5cyhub2RlLmV4dGVuc2lvbnMuRVhUX21lc2hfZ3B1X2luc3RhbmNpbmcuYXR0cmlidXRlcykuZm9yRWFjaChcbiAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVBY2Nlc3NvcklkID1cbiAgICAgICAgICAgICAgbm9kZS5leHRlbnNpb25zLkVYVF9tZXNoX2dwdV9pbnN0YW5jaW5nLmF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgICAgIHVzZWRBY2Nlc3Nvcklkc1thdHRyaWJ1dGVBY2Nlc3NvcklkXSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHVzZWRBY2Nlc3Nvcklkcztcbn07XG5cbmdldExpc3RPZkVsZW1lbnRzSWRzSW5Vc2UuYnVmZmVyID0gZnVuY3Rpb24gKGdsdGYpIHtcbiAgLy8gQ2FsY3VsYXRlIGJ1ZmZlcidzIHRoYXQgYXJlIGN1cnJlbnRseSBpbiB1c2UuXG4gIGNvbnN0IHVzZWRCdWZmZXJJZHMgPSB7fTtcblxuICBGb3JFYWNoLmJ1ZmZlclZpZXcoZ2x0ZiwgZnVuY3Rpb24gKGJ1ZmZlclZpZXcpIHtcbiAgICBpZiAoZGVmaW5lZChidWZmZXJWaWV3LmJ1ZmZlcikpIHtcbiAgICAgIHVzZWRCdWZmZXJJZHNbYnVmZmVyVmlldy5idWZmZXJdID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZGVmaW5lZChidWZmZXJWaWV3LmV4dGVuc2lvbnMpICYmXG4gICAgICBkZWZpbmVkKGJ1ZmZlclZpZXcuZXh0ZW5zaW9ucy5FWFRfbWVzaG9wdF9jb21wcmVzc2lvbilcbiAgICApIHtcbiAgICAgIHVzZWRCdWZmZXJJZHNbXG4gICAgICAgIGJ1ZmZlclZpZXcuZXh0ZW5zaW9ucy5FWFRfbWVzaG9wdF9jb21wcmVzc2lvbi5idWZmZXJcbiAgICAgIF0gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHVzZWRCdWZmZXJJZHM7XG59O1xuXG5nZXRMaXN0T2ZFbGVtZW50c0lkc0luVXNlLmJ1ZmZlclZpZXcgPSBmdW5jdGlvbiAoZ2x0Zikge1xuICAvLyBDYWxjdWxhdGUgYnVmZmVyVmlldydzIHRoYXQgYXJlIGN1cnJlbnRseSBpbiB1c2UuXG4gIGNvbnN0IHVzZWRCdWZmZXJWaWV3SWRzID0ge307XG5cbiAgRm9yRWFjaC5hY2Nlc3NvcihnbHRmLCBmdW5jdGlvbiAoYWNjZXNzb3IpIHtcbiAgICBpZiAoZGVmaW5lZChhY2Nlc3Nvci5idWZmZXJWaWV3KSkge1xuICAgICAgdXNlZEJ1ZmZlclZpZXdJZHNbYWNjZXNzb3IuYnVmZmVyVmlld10gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgRm9yRWFjaC5zaGFkZXIoZ2x0ZiwgZnVuY3Rpb24gKHNoYWRlcikge1xuICAgIGlmIChkZWZpbmVkKHNoYWRlci5idWZmZXJWaWV3KSkge1xuICAgICAgdXNlZEJ1ZmZlclZpZXdJZHNbc2hhZGVyLmJ1ZmZlclZpZXddID0gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIEZvckVhY2guaW1hZ2UoZ2x0ZiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgaWYgKGRlZmluZWQoaW1hZ2UuYnVmZmVyVmlldykpIHtcbiAgICAgIHVzZWRCdWZmZXJWaWV3SWRzW2ltYWdlLmJ1ZmZlclZpZXddID0gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICh1c2VzRXh0ZW5zaW9uKGdsdGYsIFwiS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb25cIikpIHtcbiAgICBGb3JFYWNoLm1lc2goZ2x0ZiwgZnVuY3Rpb24gKG1lc2gpIHtcbiAgICAgIEZvckVhY2gubWVzaFByaW1pdGl2ZShtZXNoLCBmdW5jdGlvbiAocHJpbWl0aXZlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBkZWZpbmVkKHByaW1pdGl2ZS5leHRlbnNpb25zKSAmJlxuICAgICAgICAgIGRlZmluZWQocHJpbWl0aXZlLmV4dGVuc2lvbnMuS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24pXG4gICAgICAgICkge1xuICAgICAgICAgIHVzZWRCdWZmZXJWaWV3SWRzW1xuICAgICAgICAgICAgcHJpbWl0aXZlLmV4dGVuc2lvbnMuS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24uYnVmZmVyVmlld1xuICAgICAgICAgIF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICh1c2VzRXh0ZW5zaW9uKGdsdGYsIFwiRVhUX2ZlYXR1cmVfbWV0YWRhdGFcIikpIHtcbiAgICBjb25zdCBleHRlbnNpb24gPSBnbHRmLmV4dGVuc2lvbnMuRVhUX2ZlYXR1cmVfbWV0YWRhdGE7XG4gICAgY29uc3QgZmVhdHVyZVRhYmxlcyA9IGV4dGVuc2lvbi5mZWF0dXJlVGFibGVzO1xuICAgIGZvciAoY29uc3QgZmVhdHVyZVRhYmxlSWQgaW4gZmVhdHVyZVRhYmxlcykge1xuICAgICAgaWYgKGZlYXR1cmVUYWJsZXMuaGFzT3duUHJvcGVydHkoZmVhdHVyZVRhYmxlSWQpKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVUYWJsZSA9IGZlYXR1cmVUYWJsZXNbZmVhdHVyZVRhYmxlSWRdO1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gZmVhdHVyZVRhYmxlLnByb3BlcnRpZXM7XG4gICAgICAgIGlmIChkZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eUlkIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5SWQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcGVydGllc1twcm9wZXJ0eUlkXTtcbiAgICAgICAgICAgICAgaWYgKGRlZmluZWQocHJvcGVydHkuYnVmZmVyVmlldykpIHtcbiAgICAgICAgICAgICAgICB1c2VkQnVmZmVyVmlld0lkc1twcm9wZXJ0eS5idWZmZXJWaWV3XSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRlZmluZWQocHJvcGVydHkuYXJyYXlPZmZzZXRCdWZmZXJWaWV3KSkge1xuICAgICAgICAgICAgICAgIHVzZWRCdWZmZXJWaWV3SWRzW3Byb3BlcnR5LmFycmF5T2Zmc2V0QnVmZmVyVmlld10gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkZWZpbmVkKHByb3BlcnR5LnN0cmluZ09mZnNldEJ1ZmZlclZpZXcpKSB7XG4gICAgICAgICAgICAgICAgdXNlZEJ1ZmZlclZpZXdJZHNbcHJvcGVydHkuc3RyaW5nT2Zmc2V0QnVmZmVyVmlld10gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVzZWRCdWZmZXJWaWV3SWRzO1xufTtcblxuZ2V0TGlzdE9mRWxlbWVudHNJZHNJblVzZS5pbWFnZSA9IGZ1bmN0aW9uIChnbHRmKSB7XG4gIGNvbnN0IHVzZWRJbWFnZUlkcyA9IHt9O1xuXG4gIEZvckVhY2gudGV4dHVyZShnbHRmLCBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgIGlmIChkZWZpbmVkKHRleHR1cmUuc291cmNlKSkge1xuICAgICAgdXNlZEltYWdlSWRzW3RleHR1cmUuc291cmNlXSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZGVmaW5lZCh0ZXh0dXJlLmV4dGVuc2lvbnMpICYmXG4gICAgICBkZWZpbmVkKHRleHR1cmUuZXh0ZW5zaW9ucy5FWFRfdGV4dHVyZV93ZWJwKVxuICAgICkge1xuICAgICAgdXNlZEltYWdlSWRzW3RleHR1cmUuZXh0ZW5zaW9ucy5FWFRfdGV4dHVyZV93ZWJwLnNvdXJjZV0gPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBkZWZpbmVkKHRleHR1cmUuZXh0ZW5zaW9ucykgJiZcbiAgICAgIGRlZmluZWQodGV4dHVyZS5leHRlbnNpb25zLktIUl90ZXh0dXJlX2Jhc2lzdSlcbiAgICApIHtcbiAgICAgIHVzZWRJbWFnZUlkc1t0ZXh0dXJlLmV4dGVuc2lvbnMuS0hSX3RleHR1cmVfYmFzaXN1LnNvdXJjZV0gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB1c2VkSW1hZ2VJZHM7XG59O1xuXG5nZXRMaXN0T2ZFbGVtZW50c0lkc0luVXNlLm1lc2ggPSBmdW5jdGlvbiAoZ2x0Zikge1xuICBjb25zdCB1c2VkTWVzaElkcyA9IHt9O1xuICBGb3JFYWNoLm5vZGUoZ2x0ZiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAoZGVmaW5lZChub2RlLm1lc2ggJiYgZGVmaW5lZChnbHRmLm1lc2hlcykpKSB7XG4gICAgICBjb25zdCBtZXNoID0gZ2x0Zi5tZXNoZXNbbm9kZS5tZXNoXTtcbiAgICAgIGlmIChcbiAgICAgICAgZGVmaW5lZChtZXNoKSAmJlxuICAgICAgICBkZWZpbmVkKG1lc2gucHJpbWl0aXZlcykgJiZcbiAgICAgICAgbWVzaC5wcmltaXRpdmVzLmxlbmd0aCA+IDBcbiAgICAgICkge1xuICAgICAgICB1c2VkTWVzaElkc1tub2RlLm1lc2hdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB1c2VkTWVzaElkcztcbn07XG5cbi8vIENoZWNrIGlmIG5vZGUgaXMgZW1wdHkuIEl0IGlzIGNvbnNpZGVyZWQgZW1wdHkgaWYgbmVpdGhlciByZWZlcmVuY2luZ1xuLy8gbWVzaCwgY2FtZXJhLCBleHRlbnNpb25zIGFuZCBoYXMgbm8gY2hpbGRyZW5cbmZ1bmN0aW9uIG5vZGVJc0VtcHR5KGdsdGYsIG5vZGVJZCwgdXNlZE5vZGVJZHMpIHtcbiAgY29uc3Qgbm9kZSA9IGdsdGYubm9kZXNbbm9kZUlkXTtcbiAgaWYgKFxuICAgIGRlZmluZWQobm9kZS5tZXNoKSB8fFxuICAgIGRlZmluZWQobm9kZS5jYW1lcmEpIHx8XG4gICAgZGVmaW5lZChub2RlLnNraW4pIHx8XG4gICAgZGVmaW5lZChub2RlLndlaWdodHMpIHx8XG4gICAgZGVmaW5lZChub2RlLmV4dHJhcykgfHxcbiAgICAoZGVmaW5lZChub2RlLmV4dGVuc2lvbnMpICYmIE9iamVjdC5rZXlzKG5vZGUuZXh0ZW5zaW9ucykubGVuZ3RoICE9PSAwKSB8fFxuICAgIGRlZmluZWQodXNlZE5vZGVJZHNbbm9kZUlkXSlcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gRW1wdHkgaWYgbm8gY2hpbGRyZW4gb3IgY2hpbGRyZW4gYXJlIGFsbCBlbXB0eSBub2Rlc1xuICByZXR1cm4gKFxuICAgICFkZWZpbmVkKG5vZGUuY2hpbGRyZW4pIHx8XG4gICAgbm9kZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKG4pIHtcbiAgICAgIHJldHVybiAhbm9kZUlzRW1wdHkoZ2x0ZiwgbiwgdXNlZE5vZGVJZHMpO1xuICAgIH0pLmxlbmd0aCA9PT0gMFxuICApO1xufVxuXG5nZXRMaXN0T2ZFbGVtZW50c0lkc0luVXNlLm5vZGUgPSBmdW5jdGlvbiAoZ2x0Zikge1xuICBjb25zdCB1c2VkTm9kZUlkcyA9IHt9O1xuICBGb3JFYWNoLnNraW4oZ2x0ZiwgZnVuY3Rpb24gKHNraW4pIHtcbiAgICBpZiAoZGVmaW5lZChza2luLnNrZWxldG9uKSkge1xuICAgICAgdXNlZE5vZGVJZHNbc2tpbi5za2VsZXRvbl0gPSB0cnVlO1xuICAgIH1cblxuICAgIEZvckVhY2guc2tpbkpvaW50KHNraW4sIGZ1bmN0aW9uIChqb2ludCkge1xuICAgICAgdXNlZE5vZGVJZHNbam9pbnRdID0gdHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIEZvckVhY2guYW5pbWF0aW9uKGdsdGYsIGZ1bmN0aW9uIChhbmltYXRpb24pIHtcbiAgICBGb3JFYWNoLmFuaW1hdGlvbkNoYW5uZWwoYW5pbWF0aW9uLCBmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgaWYgKGRlZmluZWQoY2hhbm5lbC50YXJnZXQpICYmIGRlZmluZWQoY2hhbm5lbC50YXJnZXQubm9kZSkpIHtcbiAgICAgICAgdXNlZE5vZGVJZHNbY2hhbm5lbC50YXJnZXQubm9kZV0gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgRm9yRWFjaC50ZWNobmlxdWUoZ2x0ZiwgZnVuY3Rpb24gKHRlY2huaXF1ZSkge1xuICAgIEZvckVhY2gudGVjaG5pcXVlVW5pZm9ybSh0ZWNobmlxdWUsIGZ1bmN0aW9uICh1bmlmb3JtKSB7XG4gICAgICBpZiAoZGVmaW5lZCh1bmlmb3JtLm5vZGUpKSB7XG4gICAgICAgIHVzZWROb2RlSWRzW3VuaWZvcm0ubm9kZV0gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgRm9yRWFjaC5ub2RlKGdsdGYsIGZ1bmN0aW9uIChub2RlLCBub2RlSWQpIHtcbiAgICBpZiAoIW5vZGVJc0VtcHR5KGdsdGYsIG5vZGVJZCwgdXNlZE5vZGVJZHMpKSB7XG4gICAgICB1c2VkTm9kZUlkc1tub2RlSWRdID0gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB1c2VkTm9kZUlkcztcbn07XG5cbmdldExpc3RPZkVsZW1lbnRzSWRzSW5Vc2UubWF0ZXJpYWwgPSBmdW5jdGlvbiAoZ2x0Zikge1xuICBjb25zdCB1c2VkTWF0ZXJpYWxJZHMgPSB7fTtcblxuICBGb3JFYWNoLm1lc2goZ2x0ZiwgZnVuY3Rpb24gKG1lc2gpIHtcbiAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlLm1hdGVyaWFsKSkge1xuICAgICAgICB1c2VkTWF0ZXJpYWxJZHNbcHJpbWl0aXZlLm1hdGVyaWFsXSA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiB1c2VkTWF0ZXJpYWxJZHM7XG59O1xuXG5nZXRMaXN0T2ZFbGVtZW50c0lkc0luVXNlLnRleHR1cmUgPSBmdW5jdGlvbiAoZ2x0Zikge1xuICBjb25zdCB1c2VkVGV4dHVyZUlkcyA9IHt9O1xuXG4gIEZvckVhY2gubWF0ZXJpYWwoZ2x0ZiwgZnVuY3Rpb24gKG1hdGVyaWFsKSB7XG4gICAgZm9yRWFjaFRleHR1cmVJbk1hdGVyaWFsKG1hdGVyaWFsLCBmdW5jdGlvbiAodGV4dHVyZUlkKSB7XG4gICAgICB1c2VkVGV4dHVyZUlkc1t0ZXh0dXJlSWRdID0gdHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaWYgKHVzZXNFeHRlbnNpb24oZ2x0ZiwgXCJFWFRfZmVhdHVyZV9tZXRhZGF0YVwiKSkge1xuICAgIEZvckVhY2gubWVzaChnbHRmLCBmdW5jdGlvbiAobWVzaCkge1xuICAgICAgRm9yRWFjaC5tZXNoUHJpbWl0aXZlKG1lc2gsIGZ1bmN0aW9uIChwcmltaXRpdmUpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IHByaW1pdGl2ZS5leHRlbnNpb25zO1xuICAgICAgICBpZiAoZGVmaW5lZChleHRlbnNpb25zKSAmJiBkZWZpbmVkKGV4dGVuc2lvbnMuRVhUX2ZlYXR1cmVfbWV0YWRhdGEpKSB7XG4gICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5FWFRfZmVhdHVyZV9tZXRhZGF0YTtcbiAgICAgICAgICBjb25zdCBmZWF0dXJlSWRUZXh0dXJlcyA9IGV4dGVuc2lvbi5mZWF0dXJlSWRUZXh0dXJlcztcbiAgICAgICAgICBpZiAoZGVmaW5lZChmZWF0dXJlSWRUZXh0dXJlcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVJZFRleHR1cmVzTGVuZ3RoID0gZmVhdHVyZUlkVGV4dHVyZXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmZWF0dXJlSWRUZXh0dXJlc0xlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVJZFRleHR1cmUgPSBmZWF0dXJlSWRUZXh0dXJlc1tpXTtcbiAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZUluZm8gPSBmZWF0dXJlSWRUZXh0dXJlLmZlYXR1cmVJZHMudGV4dHVyZTtcbiAgICAgICAgICAgICAgdXNlZFRleHR1cmVJZHNbdGV4dHVyZUluZm8uaW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZXh0ZW5zaW9uID0gZ2x0Zi5leHRlbnNpb25zLkVYVF9mZWF0dXJlX21ldGFkYXRhO1xuICAgIGNvbnN0IGZlYXR1cmVUZXh0dXJlcyA9IGV4dGVuc2lvbi5mZWF0dXJlVGV4dHVyZXM7XG4gICAgZm9yIChjb25zdCBmZWF0dXJlVGV4dHVyZUlkIGluIGZlYXR1cmVUZXh0dXJlcykge1xuICAgICAgaWYgKGZlYXR1cmVUZXh0dXJlcy5oYXNPd25Qcm9wZXJ0eShmZWF0dXJlVGV4dHVyZUlkKSkge1xuICAgICAgICBjb25zdCBmZWF0dXJlVGV4dHVyZSA9IGZlYXR1cmVUZXh0dXJlc1tmZWF0dXJlVGV4dHVyZUlkXTtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGZlYXR1cmVUZXh0dXJlLnByb3BlcnRpZXM7XG4gICAgICAgIGlmIChkZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eUlkIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5SWQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcGVydGllc1twcm9wZXJ0eUlkXTtcbiAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZUluZm8gPSBwcm9wZXJ0eS50ZXh0dXJlO1xuICAgICAgICAgICAgICB1c2VkVGV4dHVyZUlkc1t0ZXh0dXJlSW5mby5pbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1c2VkVGV4dHVyZUlkcztcbn07XG5cbmdldExpc3RPZkVsZW1lbnRzSWRzSW5Vc2Uuc2FtcGxlciA9IGZ1bmN0aW9uIChnbHRmKSB7XG4gIGNvbnN0IHVzZWRTYW1wbGVySWRzID0ge307XG5cbiAgRm9yRWFjaC50ZXh0dXJlKGdsdGYsIGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgaWYgKGRlZmluZWQodGV4dHVyZS5zYW1wbGVyKSkge1xuICAgICAgdXNlZFNhbXBsZXJJZHNbdGV4dHVyZS5zYW1wbGVyXSA9IHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdXNlZFNhbXBsZXJJZHM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZW1vdmVVbnVzZWRFbGVtZW50cztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///37657\n')},32776:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addBuffer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99461);\n/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56629);\n/* harmony import */ var _readAccessorPacked_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35933);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84828);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52200);\n\n\n\n\n\n\n/**\n * Update accessors referenced by JOINTS_0 and WEIGHTS_0 attributes to use correct component types.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @returns {Object} The glTF asset with compressed meshes.\n *\n * @private\n */\nfunction updateAccessorComponentTypes(gltf) {\n  let componentType;\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].accessorWithSemantic */ .Z.accessorWithSemantic(gltf, "JOINTS_0", function (accessorId) {\n    const accessor = gltf.accessors[accessorId];\n    componentType = accessor.componentType;\n    if (componentType === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].BYTE */ .Z.BYTE) {\n      convertType(gltf, accessor, _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE);\n    } else if (\n      componentType !== _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE &&\n      componentType !== _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT\n    ) {\n      convertType(gltf, accessor, _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT);\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].accessorWithSemantic */ .Z.accessorWithSemantic(gltf, "WEIGHTS_0", function (accessorId) {\n    const accessor = gltf.accessors[accessorId];\n    componentType = accessor.componentType;\n    if (componentType === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].BYTE */ .Z.BYTE) {\n      convertType(gltf, accessor, _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_BYTE */ .Z.UNSIGNED_BYTE);\n    } else if (componentType === _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].SHORT */ .Z.SHORT) {\n      convertType(gltf, accessor, _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].UNSIGNED_SHORT */ .Z.UNSIGNED_SHORT);\n    }\n  });\n\n  return gltf;\n}\n\nfunction convertType(gltf, accessor, updatedComponentType) {\n  const typedArray = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].createTypedArray */ .Z.createTypedArray(\n    updatedComponentType,\n    (0,_readAccessorPacked_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(gltf, accessor)\n  );\n  const newBuffer = new Uint8Array(typedArray.buffer);\n  accessor.bufferView = (0,_addBuffer_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf, newBuffer);\n  accessor.componentType = updatedComponentType;\n  accessor.byteOffset = 0;\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (updateAccessorComponentTypes);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzI3NzYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUM7QUFDSjtBQUNzQjtBQUNPO0FBQ047O0FBRTFEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsc0dBQTRCO0FBQzlCO0FBQ0E7QUFDQSwwQkFBMEIsa0ZBQW1CO0FBQzdDLGtDQUFrQyx1R0FBK0I7QUFDakUsTUFBTTtBQUNOLHdCQUF3QixvR0FBNEI7QUFDcEQsd0JBQXdCLHNHQUE2QjtBQUNyRDtBQUNBLGtDQUFrQyx5R0FBZ0M7QUFDbEU7QUFDQSxHQUFHO0FBQ0gsRUFBRSxzR0FBNEI7QUFDOUI7QUFDQTtBQUNBLDBCQUEwQixrRkFBbUI7QUFDN0Msa0NBQWtDLHVHQUErQjtBQUNqRSxNQUFNLDJCQUEyQixvRkFBb0I7QUFDckQsa0NBQWtDLHlHQUFnQztBQUNsRTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQiw2R0FBa0M7QUFDdkQ7QUFDQSxJQUFJLDJFQUFrQjtBQUN0QjtBQUNBO0FBQ0Esd0JBQXdCLGtFQUFTO0FBQ2pDO0FBQ0E7QUFDQTs7QUFFQSx5REFBZSw0QkFBNEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvdXBkYXRlQWNjZXNzb3JDb21wb25lbnRUeXBlcy5qcz82NTRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhZGRCdWZmZXIgZnJvbSBcIi4vYWRkQnVmZmVyLmpzXCI7XG5pbXBvcnQgRm9yRWFjaCBmcm9tIFwiLi9Gb3JFYWNoLmpzXCI7XG5pbXBvcnQgcmVhZEFjY2Vzc29yUGFja2VkIGZyb20gXCIuL3JlYWRBY2Nlc3NvclBhY2tlZC5qc1wiO1xuaW1wb3J0IENvbXBvbmVudERhdGF0eXBlIGZyb20gXCIuLi8uLi9Db3JlL0NvbXBvbmVudERhdGF0eXBlLmpzXCI7XG5pbXBvcnQgV2ViR0xDb25zdGFudHMgZnJvbSBcIi4uLy4uL0NvcmUvV2ViR0xDb25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBVcGRhdGUgYWNjZXNzb3JzIHJlZmVyZW5jZWQgYnkgSk9JTlRTXzAgYW5kIFdFSUdIVFNfMCBhdHRyaWJ1dGVzIHRvIHVzZSBjb3JyZWN0IGNvbXBvbmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2x0ZiBBIGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgYSBnbFRGIGFzc2V0LlxuICogQHJldHVybnMge09iamVjdH0gVGhlIGdsVEYgYXNzZXQgd2l0aCBjb21wcmVzc2VkIG1lc2hlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1cGRhdGVBY2Nlc3NvckNvbXBvbmVudFR5cGVzKGdsdGYpIHtcbiAgbGV0IGNvbXBvbmVudFR5cGU7XG4gIEZvckVhY2guYWNjZXNzb3JXaXRoU2VtYW50aWMoZ2x0ZiwgXCJKT0lOVFNfMFwiLCBmdW5jdGlvbiAoYWNjZXNzb3JJZCkge1xuICAgIGNvbnN0IGFjY2Vzc29yID0gZ2x0Zi5hY2Nlc3NvcnNbYWNjZXNzb3JJZF07XG4gICAgY29tcG9uZW50VHlwZSA9IGFjY2Vzc29yLmNvbXBvbmVudFR5cGU7XG4gICAgaWYgKGNvbXBvbmVudFR5cGUgPT09IFdlYkdMQ29uc3RhbnRzLkJZVEUpIHtcbiAgICAgIGNvbnZlcnRUeXBlKGdsdGYsIGFjY2Vzc29yLCBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgY29tcG9uZW50VHlwZSAhPT0gV2ViR0xDb25zdGFudHMuVU5TSUdORURfQllURSAmJlxuICAgICAgY29tcG9uZW50VHlwZSAhPT0gV2ViR0xDb25zdGFudHMuVU5TSUdORURfU0hPUlRcbiAgICApIHtcbiAgICAgIGNvbnZlcnRUeXBlKGdsdGYsIGFjY2Vzc29yLCBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9TSE9SVCk7XG4gICAgfVxuICB9KTtcbiAgRm9yRWFjaC5hY2Nlc3NvcldpdGhTZW1hbnRpYyhnbHRmLCBcIldFSUdIVFNfMFwiLCBmdW5jdGlvbiAoYWNjZXNzb3JJZCkge1xuICAgIGNvbnN0IGFjY2Vzc29yID0gZ2x0Zi5hY2Nlc3NvcnNbYWNjZXNzb3JJZF07XG4gICAgY29tcG9uZW50VHlwZSA9IGFjY2Vzc29yLmNvbXBvbmVudFR5cGU7XG4gICAgaWYgKGNvbXBvbmVudFR5cGUgPT09IFdlYkdMQ29uc3RhbnRzLkJZVEUpIHtcbiAgICAgIGNvbnZlcnRUeXBlKGdsdGYsIGFjY2Vzc29yLCBDb21wb25lbnREYXRhdHlwZS5VTlNJR05FRF9CWVRFKTtcbiAgICB9IGVsc2UgaWYgKGNvbXBvbmVudFR5cGUgPT09IFdlYkdMQ29uc3RhbnRzLlNIT1JUKSB7XG4gICAgICBjb252ZXJ0VHlwZShnbHRmLCBhY2Nlc3NvciwgQ29tcG9uZW50RGF0YXR5cGUuVU5TSUdORURfU0hPUlQpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGdsdGY7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUeXBlKGdsdGYsIGFjY2Vzc29yLCB1cGRhdGVkQ29tcG9uZW50VHlwZSkge1xuICBjb25zdCB0eXBlZEFycmF5ID0gQ29tcG9uZW50RGF0YXR5cGUuY3JlYXRlVHlwZWRBcnJheShcbiAgICB1cGRhdGVkQ29tcG9uZW50VHlwZSxcbiAgICByZWFkQWNjZXNzb3JQYWNrZWQoZ2x0ZiwgYWNjZXNzb3IpXG4gICk7XG4gIGNvbnN0IG5ld0J1ZmZlciA9IG5ldyBVaW50OEFycmF5KHR5cGVkQXJyYXkuYnVmZmVyKTtcbiAgYWNjZXNzb3IuYnVmZmVyVmlldyA9IGFkZEJ1ZmZlcihnbHRmLCBuZXdCdWZmZXIpO1xuICBhY2Nlc3Nvci5jb21wb25lbnRUeXBlID0gdXBkYXRlZENvbXBvbmVudFR5cGU7XG4gIGFjY2Vzc29yLmJ5dGVPZmZzZXQgPSAwO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1cGRhdGVBY2Nlc3NvckNvbXBvbmVudFR5cGVzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///32776\n')},6186:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75954);\n/* harmony import */ var _addToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9919);\n/* harmony import */ var _findAccessorMinMax_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(77324);\n/* harmony import */ var _ForEach_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(56629);\n/* harmony import */ var _getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(93224);\n/* harmony import */ var _numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(26806);\n/* harmony import */ var _moveTechniqueRenderStates_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(72337);\n/* harmony import */ var _moveTechniquesToExtension_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(56942);\n/* harmony import */ var _removeUnusedElements_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37657);\n/* harmony import */ var _updateAccessorComponentTypes_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(32776);\n/* harmony import */ var _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(60216);\n/* harmony import */ var _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63367);\n/* harmony import */ var _Core_clone_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(83856);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(84828);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(82982);\n/* harmony import */ var _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(72248);\n/* harmony import */ var _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(87811);\n/* harmony import */ var _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(52200);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst updateFunctions = {\n  0.8: glTF08to10,\n  "1.0": glTF10to20,\n  "2.0": undefined,\n};\n\n/**\n * Update the glTF version to the latest version (2.0), or targetVersion if specified.\n * Applies changes made to the glTF spec between revisions so that the core library\n * only has to handle the latest version.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {Object} [options] Options for updating the glTF.\n * @param {String} [options.targetVersion] The glTF will be upgraded until it hits the specified version.\n * @returns {Object} The updated glTF asset.\n *\n * @private\n */\nfunction updateVersion(gltf, options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  const targetVersion = options.targetVersion;\n  let version = gltf.version;\n\n  gltf.asset = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(gltf.asset, {\n    version: "1.0",\n  });\n\n  gltf.asset.version = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(gltf.asset.version, "1.0");\n  version = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(version, gltf.asset.version).toString();\n\n  // Invalid version\n  if (!Object.prototype.hasOwnProperty.call(updateFunctions, version)) {\n    // Try truncating trailing version numbers, could be a number as well if it is 0.8\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(version)) {\n      version = version.substring(0, 3);\n    }\n    // Default to 1.0 if it cannot be determined\n    if (!Object.prototype.hasOwnProperty.call(updateFunctions, version)) {\n      version = "1.0";\n    }\n  }\n\n  let updateFunction = updateFunctions[version];\n\n  while ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(updateFunction)) {\n    if (version === targetVersion) {\n      break;\n    }\n    updateFunction(gltf, options);\n    version = gltf.asset.version;\n    updateFunction = updateFunctions[version];\n  }\n  return gltf;\n}\n\nfunction updateInstanceTechniques(gltf) {\n  const materials = gltf.materials;\n  for (const materialId in materials) {\n    if (Object.prototype.hasOwnProperty.call(materials, materialId)) {\n      const material = materials[materialId];\n      const instanceTechnique = material.instanceTechnique;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(instanceTechnique)) {\n        material.technique = instanceTechnique.technique;\n        material.values = instanceTechnique.values;\n        delete material.instanceTechnique;\n      }\n    }\n  }\n}\n\nfunction setPrimitiveModes(gltf) {\n  const meshes = gltf.meshes;\n  for (const meshId in meshes) {\n    if (Object.prototype.hasOwnProperty.call(meshes, meshId)) {\n      const mesh = meshes[meshId];\n      const primitives = mesh.primitives;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(primitives)) {\n        const primitivesLength = primitives.length;\n        for (let i = 0; i < primitivesLength; ++i) {\n          const primitive = primitives[i];\n          const defaultMode = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(\n            primitive.primitive,\n            _Core_WebGLConstants_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"].TRIANGLES */ .Z.TRIANGLES\n          );\n          primitive.mode = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(primitive.mode, defaultMode);\n          delete primitive.primitive;\n        }\n      }\n    }\n  }\n}\n\nfunction updateNodes(gltf) {\n  const nodes = gltf.nodes;\n  const axis = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z();\n  const quat = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z();\n  for (const nodeId in nodes) {\n    if (Object.prototype.hasOwnProperty.call(nodes, nodeId)) {\n      const node = nodes[nodeId];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.rotation)) {\n        const rotation = node.rotation;\n        _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].fromArray */ .Z.fromArray(rotation, 0, axis);\n        _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(axis, rotation[3], quat);\n        node.rotation = [quat.x, quat.y, quat.z, quat.w];\n      }\n      const instanceSkin = node.instanceSkin;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(instanceSkin)) {\n        node.skeletons = instanceSkin.skeletons;\n        node.skin = instanceSkin.skin;\n        node.meshes = instanceSkin.meshes;\n        delete node.instanceSkin;\n      }\n    }\n  }\n}\n\nfunction updateAnimations(gltf) {\n  const animations = gltf.animations;\n  const accessors = gltf.accessors;\n  const bufferViews = gltf.bufferViews;\n  const buffers = gltf.buffers;\n  const updatedAccessors = {};\n  const axis = new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z();\n  const quat = new _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z();\n  for (const animationId in animations) {\n    if (Object.prototype.hasOwnProperty.call(animations, animationId)) {\n      const animation = animations[animationId];\n      const channels = animation.channels;\n      const parameters = animation.parameters;\n      const samplers = animation.samplers;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(channels)) {\n        const channelsLength = channels.length;\n        for (let i = 0; i < channelsLength; ++i) {\n          const channel = channels[i];\n          if (channel.target.path === "rotation") {\n            const accessorId = parameters[samplers[channel.sampler].output];\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(updatedAccessors[accessorId])) {\n              continue;\n            }\n            updatedAccessors[accessorId] = true;\n            const accessor = accessors[accessorId];\n            const bufferView = bufferViews[accessor.bufferView];\n            const buffer = buffers[bufferView.buffer];\n            const source = buffer.extras._pipeline.source;\n            const byteOffset =\n              source.byteOffset + bufferView.byteOffset + accessor.byteOffset;\n            const componentType = accessor.componentType;\n            const count = accessor.count;\n            const componentsLength = (0,_numberOfComponentsForType_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .Z)(accessor.type);\n            const length = accessor.count * componentsLength;\n            const typedArray = _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].createArrayBufferView */ .Z.createArrayBufferView(\n              componentType,\n              source.buffer,\n              byteOffset,\n              length\n            );\n\n            for (let j = 0; j < count; j++) {\n              const offset = j * componentsLength;\n              _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].unpack */ .Z.unpack(typedArray, offset, axis);\n              const angle = typedArray[offset + 3];\n              _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].fromAxisAngle */ .Z.fromAxisAngle(axis, angle, quat);\n              _Core_Quaternion_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].pack */ .Z.pack(quat, typedArray, offset);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction removeTechniquePasses(gltf) {\n  const techniques = gltf.techniques;\n  for (const techniqueId in techniques) {\n    if (Object.prototype.hasOwnProperty.call(techniques, techniqueId)) {\n      const technique = techniques[techniqueId];\n      const passes = technique.passes;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(passes)) {\n        const passName = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(technique.pass, "defaultPass");\n        if (Object.prototype.hasOwnProperty.call(passes, passName)) {\n          const pass = passes[passName];\n          const instanceProgram = pass.instanceProgram;\n          technique.attributes = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(\n            technique.attributes,\n            instanceProgram.attributes\n          );\n          technique.program = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(\n            technique.program,\n            instanceProgram.program\n          );\n          technique.uniforms = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(\n            technique.uniforms,\n            instanceProgram.uniforms\n          );\n          technique.states = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(technique.states, pass.states);\n        }\n        delete technique.passes;\n        delete technique.pass;\n      }\n    }\n  }\n}\n\nfunction glTF08to10(gltf) {\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(gltf.asset)) {\n    gltf.asset = {};\n  }\n  const asset = gltf.asset;\n  asset.version = "1.0";\n  // Profile should be an object, not a string\n  if (typeof asset.profile === "string") {\n    const split = asset.profile.split(" ");\n    asset.profile = {\n      api: split[0],\n      version: split[1],\n    };\n  } else {\n    asset.profile = {};\n  }\n\n  // Version property should be in asset, not on the root element\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(gltf.version)) {\n    delete gltf.version;\n  }\n  // material.instanceTechnique properties should be directly on the material\n  updateInstanceTechniques(gltf);\n  // primitive.primitive should be primitive.mode\n  setPrimitiveModes(gltf);\n  // Node rotation should be quaternion, not axis-angle\n  // node.instanceSkin is deprecated\n  updateNodes(gltf);\n  // Animations that target rotations should be quaternion, not axis-angle\n  updateAnimations(gltf);\n  // technique.pass and techniques.passes are deprecated\n  removeTechniquePasses(gltf);\n  // gltf.allExtensions -> extensionsUsed\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(gltf.allExtensions)) {\n    gltf.extensionsUsed = gltf.allExtensions;\n    delete gltf.allExtensions;\n  }\n  // gltf.lights -> khrMaterialsCommon.lights\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(gltf.lights)) {\n    const extensions = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(gltf.extensions, {});\n    gltf.extensions = extensions;\n    const materialsCommon = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(extensions.KHR_materials_common, {});\n    extensions.KHR_materials_common = materialsCommon;\n    materialsCommon.lights = gltf.lights;\n    delete gltf.lights;\n    (0,_addExtensionsUsed_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf, "KHR_materials_common");\n  }\n}\n\nfunction removeAnimationSamplersIndirection(gltf) {\n  const animations = gltf.animations;\n  for (const animationId in animations) {\n    if (Object.prototype.hasOwnProperty.call(animations, animationId)) {\n      const animation = animations[animationId];\n      const parameters = animation.parameters;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(parameters)) {\n        const samplers = animation.samplers;\n        for (const samplerId in samplers) {\n          if (Object.prototype.hasOwnProperty.call(samplers, samplerId)) {\n            const sampler = samplers[samplerId];\n            sampler.input = parameters[sampler.input];\n            sampler.output = parameters[sampler.output];\n          }\n        }\n        delete animation.parameters;\n      }\n    }\n  }\n}\n\nfunction objectToArray(object, mapping) {\n  const array = [];\n  for (const id in object) {\n    if (Object.prototype.hasOwnProperty.call(object, id)) {\n      const value = object[id];\n      mapping[id] = array.length;\n      array.push(value);\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(value.name)) {\n        value.name = id;\n      }\n    }\n  }\n  return array;\n}\n\nfunction objectsToArrays(gltf) {\n  let i;\n  const globalMapping = {\n    accessors: {},\n    animations: {},\n    buffers: {},\n    bufferViews: {},\n    cameras: {},\n    images: {},\n    materials: {},\n    meshes: {},\n    nodes: {},\n    programs: {},\n    samplers: {},\n    scenes: {},\n    shaders: {},\n    skins: {},\n    textures: {},\n    techniques: {},\n  };\n\n  // Map joint names to id names\n  let jointName;\n  const jointNameToId = {};\n  const nodes = gltf.nodes;\n  for (const id in nodes) {\n    if (Object.prototype.hasOwnProperty.call(nodes, id)) {\n      jointName = nodes[id].jointName;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(jointName)) {\n        jointNameToId[jointName] = id;\n      }\n    }\n  }\n\n  // Convert top level objects to arrays\n  for (const topLevelId in gltf) {\n    if (\n      Object.prototype.hasOwnProperty.call(gltf, topLevelId) &&\n      (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(globalMapping[topLevelId])\n    ) {\n      const objectMapping = {};\n      const object = gltf[topLevelId];\n      gltf[topLevelId] = objectToArray(object, objectMapping);\n      globalMapping[topLevelId] = objectMapping;\n    }\n  }\n\n  // Remap joint names to array indexes\n  for (jointName in jointNameToId) {\n    if (Object.prototype.hasOwnProperty.call(jointNameToId, jointName)) {\n      jointNameToId[jointName] = globalMapping.nodes[jointNameToId[jointName]];\n    }\n  }\n\n  // Fix references\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(gltf.scene)) {\n    gltf.scene = globalMapping.scenes[gltf.scene];\n  }\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].bufferView */ .Z.bufferView(gltf, function (bufferView) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(bufferView.buffer)) {\n      bufferView.buffer = globalMapping.buffers[bufferView.buffer];\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].accessor */ .Z.accessor(gltf, function (accessor) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.bufferView)) {\n      accessor.bufferView = globalMapping.bufferViews[accessor.bufferView];\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].shader */ .Z.shader(gltf, function (shader) {\n    const extensions = shader.extensions;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(extensions)) {\n      const binaryGltf = extensions.KHR_binary_glTF;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(binaryGltf)) {\n        shader.bufferView = globalMapping.bufferViews[binaryGltf.bufferView];\n        delete extensions.KHR_binary_glTF;\n      }\n      if (Object.keys(extensions).length === 0) {\n        delete shader.extensions;\n      }\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].program */ .Z.program(gltf, function (program) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(program.vertexShader)) {\n      program.vertexShader = globalMapping.shaders[program.vertexShader];\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(program.fragmentShader)) {\n      program.fragmentShader = globalMapping.shaders[program.fragmentShader];\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].technique */ .Z.technique(gltf, function (technique) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(technique.program)) {\n      technique.program = globalMapping.programs[technique.program];\n    }\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].techniqueParameter */ .Z.techniqueParameter(technique, function (parameter) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(parameter.node)) {\n        parameter.node = globalMapping.nodes[parameter.node];\n      }\n      const value = parameter.value;\n      if (typeof value === "string") {\n        parameter.value = {\n          index: globalMapping.textures[value],\n        };\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(primitive.indices)) {\n        primitive.indices = globalMapping.accessors[primitive.indices];\n      }\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].meshPrimitiveAttribute */ .Z.meshPrimitiveAttribute(\n        primitive,\n        function (accessorId, semantic) {\n          primitive.attributes[semantic] = globalMapping.accessors[accessorId];\n        }\n      );\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(primitive.material)) {\n        primitive.material = globalMapping.materials[primitive.material];\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].node */ .Z.node(gltf, function (node) {\n    let children = node.children;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(children)) {\n      const childrenLength = children.length;\n      for (i = 0; i < childrenLength; ++i) {\n        children[i] = globalMapping.nodes[children[i]];\n      }\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.meshes)) {\n      // Split out meshes on nodes\n      const meshes = node.meshes;\n      const meshesLength = meshes.length;\n      if (meshesLength > 0) {\n        node.mesh = globalMapping.meshes[meshes[0]];\n        for (i = 1; i < meshesLength; ++i) {\n          const meshNode = {\n            mesh: globalMapping.meshes[meshes[i]],\n          };\n          const meshNodeId = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(gltf.nodes, meshNode);\n          if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(children)) {\n            children = [];\n            node.children = children;\n          }\n          children.push(meshNodeId);\n        }\n      }\n      delete node.meshes;\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.camera)) {\n      node.camera = globalMapping.cameras[node.camera];\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.skin)) {\n      node.skin = globalMapping.skins[node.skin];\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.skeletons)) {\n      // Assign skeletons to skins\n      const skeletons = node.skeletons;\n      const skeletonsLength = skeletons.length;\n      if (skeletonsLength > 0 && (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.skin)) {\n        const skin = gltf.skins[node.skin];\n        skin.skeleton = globalMapping.nodes[skeletons[0]];\n      }\n      delete node.skeletons;\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.jointName)) {\n      delete node.jointName;\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].skin */ .Z.skin(gltf, function (skin) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(skin.inverseBindMatrices)) {\n      skin.inverseBindMatrices =\n        globalMapping.accessors[skin.inverseBindMatrices];\n    }\n    const jointNames = skin.jointNames;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(jointNames)) {\n      const joints = [];\n      const jointNamesLength = jointNames.length;\n      for (i = 0; i < jointNamesLength; ++i) {\n        joints[i] = jointNameToId[jointNames[i]];\n      }\n      skin.joints = joints;\n      delete skin.jointNames;\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].scene */ .Z.scene(gltf, function (scene) {\n    const sceneNodes = scene.nodes;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(sceneNodes)) {\n      const sceneNodesLength = sceneNodes.length;\n      for (i = 0; i < sceneNodesLength; ++i) {\n        sceneNodes[i] = globalMapping.nodes[sceneNodes[i]];\n      }\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    const samplerMapping = {};\n    animation.samplers = objectToArray(animation.samplers, samplerMapping);\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].animationSampler */ .Z.animationSampler(animation, function (sampler) {\n      sampler.input = globalMapping.accessors[sampler.input];\n      sampler.output = globalMapping.accessors[sampler.output];\n    });\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].animationChannel */ .Z.animationChannel(animation, function (channel) {\n      channel.sampler = samplerMapping[channel.sampler];\n      const target = channel.target;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(target)) {\n        target.node = globalMapping.nodes[target.id];\n        delete target.id;\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].material */ .Z.material(gltf, function (material) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(material.technique)) {\n      material.technique = globalMapping.techniques[material.technique];\n    }\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].materialValue */ .Z.materialValue(material, function (value, name) {\n      if (typeof value === "string") {\n        material.values[name] = {\n          index: globalMapping.textures[value],\n        };\n      }\n    });\n    const extensions = material.extensions;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(extensions)) {\n      const materialsCommon = extensions.KHR_materials_common;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(materialsCommon)) {\n        _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].materialValue */ .Z.materialValue(materialsCommon, function (value, name) {\n          if (typeof value === "string") {\n            materialsCommon.values[name] = {\n              index: globalMapping.textures[value],\n            };\n          }\n        });\n      }\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].image */ .Z.image(gltf, function (image) {\n    const extensions = image.extensions;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(extensions)) {\n      const binaryGltf = extensions.KHR_binary_glTF;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(binaryGltf)) {\n        image.bufferView = globalMapping.bufferViews[binaryGltf.bufferView];\n        image.mimeType = binaryGltf.mimeType;\n        delete extensions.KHR_binary_glTF;\n      }\n      if (Object.keys(extensions).length === 0) {\n        delete image.extensions;\n      }\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].texture */ .Z.texture(gltf, function (texture) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(texture.sampler)) {\n      texture.sampler = globalMapping.samplers[texture.sampler];\n    }\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(texture.source)) {\n      texture.source = globalMapping.images[texture.source];\n    }\n  });\n}\n\nfunction removeAnimationSamplerNames(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].animationSampler */ .Z.animationSampler(animation, function (sampler) {\n      delete sampler.name;\n    });\n  });\n}\n\nfunction removeEmptyArrays(gltf) {\n  for (const topLevelId in gltf) {\n    if (Object.prototype.hasOwnProperty.call(gltf, topLevelId)) {\n      const array = gltf[topLevelId];\n      if (Array.isArray(array) && array.length === 0) {\n        delete gltf[topLevelId];\n      }\n    }\n  }\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].node */ .Z.node(gltf, function (node) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.children) && node.children.length === 0) {\n      delete node.children;\n    }\n  });\n}\n\nfunction stripAsset(gltf) {\n  const asset = gltf.asset;\n  delete asset.profile;\n  delete asset.premultipliedAlpha;\n}\n\nconst knownExtensions = {\n  CESIUM_RTC: true,\n  KHR_materials_common: true,\n  WEB3D_quantized_attributes: true,\n};\nfunction requireKnownExtensions(gltf) {\n  const extensionsUsed = gltf.extensionsUsed;\n  gltf.extensionsRequired = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(gltf.extensionsRequired, []);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(extensionsUsed)) {\n    const extensionsUsedLength = extensionsUsed.length;\n    for (let i = 0; i < extensionsUsedLength; ++i) {\n      const extension = extensionsUsed[i];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(knownExtensions[extension])) {\n        gltf.extensionsRequired.push(extension);\n      }\n    }\n  }\n}\n\nfunction removeBufferType(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].buffer */ .Z.buffer(gltf, function (buffer) {\n    delete buffer.type;\n  });\n}\n\nfunction removeTextureProperties(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].texture */ .Z.texture(gltf, function (texture) {\n    delete texture.format;\n    delete texture.internalFormat;\n    delete texture.target;\n    delete texture.type;\n  });\n}\n\nfunction requireAttributeSetIndex(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].meshPrimitiveAttribute */ .Z.meshPrimitiveAttribute(\n        primitive,\n        function (accessorId, semantic) {\n          if (semantic === "TEXCOORD") {\n            primitive.attributes.TEXCOORD_0 = accessorId;\n          } else if (semantic === "COLOR") {\n            primitive.attributes.COLOR_0 = accessorId;\n          }\n        }\n      );\n      delete primitive.attributes.TEXCOORD;\n      delete primitive.attributes.COLOR;\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].technique */ .Z.technique(gltf, function (technique) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].techniqueParameter */ .Z.techniqueParameter(technique, function (parameter) {\n      const semantic = parameter.semantic;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(semantic)) {\n        if (semantic === "TEXCOORD") {\n          parameter.semantic = "TEXCOORD_0";\n        } else if (semantic === "COLOR") {\n          parameter.semantic = "COLOR_0";\n        }\n      }\n    });\n  });\n}\n\nconst knownSemantics = {\n  POSITION: true,\n  NORMAL: true,\n  TANGENT: true,\n};\nconst indexedSemantics = {\n  COLOR: "COLOR",\n  JOINT: "JOINTS",\n  JOINTS: "JOINTS",\n  TEXCOORD: "TEXCOORD",\n  WEIGHT: "WEIGHTS",\n  WEIGHTS: "WEIGHTS",\n};\nfunction underscoreApplicationSpecificSemantics(gltf) {\n  const mappedSemantics = {};\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].mesh */ .Z.mesh(gltf, function (mesh) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].meshPrimitive */ .Z.meshPrimitive(mesh, function (primitive) {\n      /*eslint-disable no-unused-vars*/\n      _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].meshPrimitiveAttribute */ .Z.meshPrimitiveAttribute(\n        primitive,\n        function (accessorId, semantic) {\n          if (semantic.charAt(0) !== "_") {\n            const setIndex = semantic.search(/_[0-9]+/g);\n            let strippedSemantic = semantic;\n            let suffix = "_0";\n            if (setIndex >= 0) {\n              strippedSemantic = semantic.substring(0, setIndex);\n              suffix = semantic.substring(setIndex);\n            }\n            let newSemantic;\n            const indexedSemantic = indexedSemantics[strippedSemantic];\n            if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(indexedSemantic)) {\n              newSemantic = indexedSemantic + suffix;\n              mappedSemantics[semantic] = newSemantic;\n            } else if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(knownSemantics[strippedSemantic])) {\n              newSemantic = "_" + semantic;\n              mappedSemantics[semantic] = newSemantic;\n            }\n          }\n        }\n      );\n      for (const semantic in mappedSemantics) {\n        if (Object.prototype.hasOwnProperty.call(mappedSemantics, semantic)) {\n          const mappedSemantic = mappedSemantics[semantic];\n          const accessorId = primitive.attributes[semantic];\n          if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessorId)) {\n            delete primitive.attributes[semantic];\n            primitive.attributes[mappedSemantic] = accessorId;\n          }\n        }\n      }\n    });\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].technique */ .Z.technique(gltf, function (technique) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].techniqueParameter */ .Z.techniqueParameter(technique, function (parameter) {\n      const mappedSemantic = mappedSemantics[parameter.semantic];\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(mappedSemantic)) {\n        parameter.semantic = mappedSemantic;\n      }\n    });\n  });\n}\n\nfunction clampCameraParameters(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].camera */ .Z.camera(gltf, function (camera) {\n    const perspective = camera.perspective;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(perspective)) {\n      const aspectRatio = perspective.aspectRatio;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(aspectRatio) && aspectRatio === 0.0) {\n        delete perspective.aspectRatio;\n      }\n      const yfov = perspective.yfov;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(yfov) && yfov === 0.0) {\n        perspective.yfov = 1.0;\n      }\n    }\n  });\n}\n\nfunction computeAccessorByteStride(gltf, accessor) {\n  return (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.byteStride) && accessor.byteStride !== 0\n    ? accessor.byteStride\n    : (0,_getAccessorByteStride_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(gltf, accessor);\n}\n\nfunction requireByteLength(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].buffer */ .Z.buffer(gltf, function (buffer) {\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(buffer.byteLength)) {\n      buffer.byteLength = buffer.extras._pipeline.source.length;\n    }\n  });\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].accessor */ .Z.accessor(gltf, function (accessor) {\n    const bufferViewId = accessor.bufferView;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(bufferViewId)) {\n      const bufferView = gltf.bufferViews[bufferViewId];\n      const accessorByteStride = computeAccessorByteStride(gltf, accessor);\n      const accessorByteEnd =\n        accessor.byteOffset + accessor.count * accessorByteStride;\n      bufferView.byteLength = Math.max(\n        (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(bufferView.byteLength, 0),\n        accessorByteEnd\n      );\n    }\n  });\n}\n\nfunction moveByteStrideToBufferView(gltf) {\n  let i;\n  let j;\n  let bufferView;\n  const bufferViews = gltf.bufferViews;\n\n  const bufferViewHasVertexAttributes = {};\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].accessorContainingVertexAttributeData */ .Z.accessorContainingVertexAttributeData(gltf, function (accessorId) {\n    const accessor = gltf.accessors[accessorId];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.bufferView)) {\n      bufferViewHasVertexAttributes[accessor.bufferView] = true;\n    }\n  });\n\n  // Map buffer views to a list of accessors\n  const bufferViewMap = {};\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].accessor */ .Z.accessor(gltf, function (accessor) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.bufferView)) {\n      bufferViewMap[accessor.bufferView] = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(\n        bufferViewMap[accessor.bufferView],\n        []\n      );\n      bufferViewMap[accessor.bufferView].push(accessor);\n    }\n  });\n\n  // Split accessors with different byte strides\n  for (const bufferViewId in bufferViewMap) {\n    if (Object.prototype.hasOwnProperty.call(bufferViewMap, bufferViewId)) {\n      bufferView = bufferViews[bufferViewId];\n      const accessors = bufferViewMap[bufferViewId];\n      accessors.sort(function (a, b) {\n        return a.byteOffset - b.byteOffset;\n      });\n      let currentByteOffset = 0;\n      let currentIndex = 0;\n      const accessorsLength = accessors.length;\n      for (i = 0; i < accessorsLength; ++i) {\n        let accessor = accessors[i];\n        const accessorByteStride = computeAccessorByteStride(gltf, accessor);\n        const accessorByteOffset = accessor.byteOffset;\n        const accessorByteLength = accessor.count * accessorByteStride;\n        delete accessor.byteStride;\n\n        const hasNextAccessor = i < accessorsLength - 1;\n        const nextAccessorByteStride = hasNextAccessor\n          ? computeAccessorByteStride(gltf, accessors[i + 1])\n          : undefined;\n        if (accessorByteStride !== nextAccessorByteStride) {\n          const newBufferView = (0,_Core_clone_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(bufferView, true);\n          if (bufferViewHasVertexAttributes[bufferViewId]) {\n            newBufferView.byteStride = accessorByteStride;\n          }\n          newBufferView.byteOffset += currentByteOffset;\n          newBufferView.byteLength =\n            accessorByteOffset + accessorByteLength - currentByteOffset;\n          const newBufferViewId = (0,_addToArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(bufferViews, newBufferView);\n          for (j = currentIndex; j <= i; ++j) {\n            accessor = accessors[j];\n            accessor.bufferView = newBufferViewId;\n            accessor.byteOffset = accessor.byteOffset - currentByteOffset;\n          }\n          // Set current byte offset to next accessor\'s byte offset\n          currentByteOffset = hasNextAccessor\n            ? accessors[i + 1].byteOffset\n            : undefined;\n          currentIndex = i + 1;\n        }\n      }\n    }\n  }\n\n  // Remove unused buffer views\n  (0,_removeUnusedElements_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)(gltf, ["accessor", "bufferView", "buffer"]);\n}\n\nfunction requirePositionAccessorMinMax(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].accessorWithSemantic */ .Z.accessorWithSemantic(gltf, "POSITION", function (accessorId) {\n    const accessor = gltf.accessors[accessorId];\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.min) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.max)) {\n      const minMax = (0,_findAccessorMinMax_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(gltf, accessor);\n      accessor.min = minMax.min;\n      accessor.max = minMax.max;\n    }\n  });\n}\n\nfunction isNodeEmpty(node) {\n  return (\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.children) || node.children.length === 0) &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.meshes) || node.meshes.length === 0) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.camera) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.skin) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.skeletons) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.jointName) &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.translation) ||\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].fromArray */ .Z.fromArray(node.translation).equals(_Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].ZERO */ .Z.ZERO)) &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.scale) ||\n      _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].fromArray */ .Z.fromArray(node.scale).equals(new _Core_Cartesian3_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(1.0, 1.0, 1.0))) &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.rotation) ||\n      _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].fromArray */ .Z.fromArray(node.rotation).equals(\n        new _Core_Cartesian4_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z(0.0, 0.0, 0.0, 1.0)\n      )) &&\n    (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.matrix) ||\n      _Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].fromColumnMajorArray */ .Z.fromColumnMajorArray(node.matrix).equals(_Core_Matrix4_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].IDENTITY */ .Z.IDENTITY)) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.extensions) &&\n    !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(node.extras)\n  );\n}\n\nfunction deleteNode(gltf, nodeId) {\n  // Remove from list of nodes in scene\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].scene */ .Z.scene(gltf, function (scene) {\n    const sceneNodes = scene.nodes;\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(sceneNodes)) {\n      const sceneNodesLength = sceneNodes.length;\n      for (let i = sceneNodesLength; i >= 0; --i) {\n        if (sceneNodes[i] === nodeId) {\n          sceneNodes.splice(i, 1);\n          return;\n        }\n      }\n    }\n  });\n\n  // Remove parent node\'s reference to this node, and delete the parent if also empty\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].node */ .Z.node(gltf, function (parentNode, parentNodeId) {\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(parentNode.children)) {\n      const index = parentNode.children.indexOf(nodeId);\n      if (index > -1) {\n        parentNode.children.splice(index, 1);\n\n        if (isNodeEmpty(parentNode)) {\n          deleteNode(gltf, parentNodeId);\n        }\n      }\n    }\n  });\n\n  delete gltf.nodes[nodeId];\n}\n\nfunction removeEmptyNodes(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].node */ .Z.node(gltf, function (node, nodeId) {\n    if (isNodeEmpty(node)) {\n      deleteNode(gltf, nodeId);\n    }\n  });\n\n  return gltf;\n}\n\nfunction requireAnimationAccessorMinMax(gltf) {\n  _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].animation */ .Z.animation(gltf, function (animation) {\n    _ForEach_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].animationSampler */ .Z.animationSampler(animation, function (sampler) {\n      const accessor = gltf.accessors[sampler.input];\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.min) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Z)(accessor.max)) {\n        const minMax = (0,_findAccessorMinMax_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(gltf, accessor);\n        accessor.min = minMax.min;\n        accessor.max = minMax.max;\n      }\n    });\n  });\n}\n\nfunction glTF10to20(gltf) {\n  gltf.asset = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z)(gltf.asset, {});\n  gltf.asset.version = "2.0";\n  // material.instanceTechnique properties should be directly on the material. instanceTechnique is a gltf 0.8 property but is seen in some 1.0 models.\n  updateInstanceTechniques(gltf);\n  // animation.samplers now refers directly to accessors and animation.parameters should be removed\n  removeAnimationSamplersIndirection(gltf);\n  // Remove empty nodes and re-assign referencing indices\n  removeEmptyNodes(gltf);\n  // Top-level objects are now arrays referenced by index instead of id\n  objectsToArrays(gltf);\n  // Animation.sampler objects cannot have names\n  removeAnimationSamplerNames(gltf);\n  // asset.profile no longer exists\n  stripAsset(gltf);\n  // Move known extensions from extensionsUsed to extensionsRequired\n  requireKnownExtensions(gltf);\n  // bufferView.byteLength and buffer.byteLength are required\n  requireByteLength(gltf);\n  // byteStride moved from accessor to bufferView\n  moveByteStrideToBufferView(gltf);\n  // accessor.min and accessor.max must be defined for accessors containing POSITION attributes\n  requirePositionAccessorMinMax(gltf);\n  // An animation sampler\'s input accessor must have min and max properties defined\n  requireAnimationAccessorMinMax(gltf);\n  // buffer.type is unnecessary and should be removed\n  removeBufferType(gltf);\n  // Remove format, internalFormat, target, and type\n  removeTextureProperties(gltf);\n  // TEXCOORD and COLOR attributes must be written with a set index (TEXCOORD_#)\n  requireAttributeSetIndex(gltf);\n  // Add underscores to application-specific parameters\n  underscoreApplicationSpecificSemantics(gltf);\n  // Accessors referenced by JOINTS_0 and WEIGHTS_0 attributes must have correct component types\n  (0,_updateAccessorComponentTypes_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z)(gltf);\n  // Clamp camera parameters\n  clampCameraParameters(gltf);\n  // Move legacy technique render states to material properties and add KHR_blend extension blending functions\n  (0,_moveTechniqueRenderStates_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z)(gltf);\n  // Add material techniques to KHR_techniques_webgl extension, removing shaders, programs, and techniques\n  (0,_moveTechniquesToExtension_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)(gltf);\n  // Remove empty arrays\n  removeEmptyArrays(gltf);\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (updateVersion);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUc7QUFDSDs7QUFFQTtBQUNBLGVBQWUsMkVBQVksZUFBZTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxxRkFBNEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsRUFBRSxrRkFBeUI7QUFDM0I7QUFDQSxFQUFFLGtGQUF5QjtBQUMzQjtBQUNBO0FBQ0E7O0FBRUEseURBQWUsYUFBYSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZQaXBlbGluZS91cGRhdGVWZXJzaW9uLmpzPzU1ZDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkZEV4dGVuc2lvbnNVc2VkIGZyb20gXCIuL2FkZEV4dGVuc2lvbnNVc2VkLmpzXCI7XG5pbXBvcnQgYWRkVG9BcnJheSBmcm9tIFwiLi9hZGRUb0FycmF5LmpzXCI7XG5pbXBvcnQgZmluZEFjY2Vzc29yTWluTWF4IGZyb20gXCIuL2ZpbmRBY2Nlc3Nvck1pbk1heC5qc1wiO1xuaW1wb3J0IEZvckVhY2ggZnJvbSBcIi4vRm9yRWFjaC5qc1wiO1xuaW1wb3J0IGdldEFjY2Vzc29yQnl0ZVN0cmlkZSBmcm9tIFwiLi9nZXRBY2Nlc3NvckJ5dGVTdHJpZGUuanNcIjtcbmltcG9ydCBudW1iZXJPZkNvbXBvbmVudHNGb3JUeXBlIGZyb20gXCIuL251bWJlck9mQ29tcG9uZW50c0ZvclR5cGUuanNcIjtcbmltcG9ydCBtb3ZlVGVjaG5pcXVlUmVuZGVyU3RhdGVzIGZyb20gXCIuL21vdmVUZWNobmlxdWVSZW5kZXJTdGF0ZXMuanNcIjtcbmltcG9ydCBtb3ZlVGVjaG5pcXVlc1RvRXh0ZW5zaW9uIGZyb20gXCIuL21vdmVUZWNobmlxdWVzVG9FeHRlbnNpb24uanNcIjtcbmltcG9ydCByZW1vdmVVbnVzZWRFbGVtZW50cyBmcm9tIFwiLi9yZW1vdmVVbnVzZWRFbGVtZW50cy5qc1wiO1xuaW1wb3J0IHVwZGF0ZUFjY2Vzc29yQ29tcG9uZW50VHlwZXMgZnJvbSBcIi4vdXBkYXRlQWNjZXNzb3JDb21wb25lbnRUeXBlcy5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcIi4uLy4uL0NvcmUvQ2FydGVzaWFuMy5qc1wiO1xuaW1wb3J0IENhcnRlc2lhbjQgZnJvbSBcIi4uLy4uL0NvcmUvQ2FydGVzaWFuNC5qc1wiO1xuaW1wb3J0IGNsb25lIGZyb20gXCIuLi8uLi9Db3JlL2Nsb25lLmpzXCI7XG5pbXBvcnQgQ29tcG9uZW50RGF0YXR5cGUgZnJvbSBcIi4uLy4uL0NvcmUvQ29tcG9uZW50RGF0YXR5cGUuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uLy4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgTWF0cml4NCBmcm9tIFwiLi4vLi4vQ29yZS9NYXRyaXg0LmpzXCI7XG5pbXBvcnQgUXVhdGVybmlvbiBmcm9tIFwiLi4vLi4vQ29yZS9RdWF0ZXJuaW9uLmpzXCI7XG5pbXBvcnQgV2ViR0xDb25zdGFudHMgZnJvbSBcIi4uLy4uL0NvcmUvV2ViR0xDb25zdGFudHMuanNcIjtcblxuY29uc3QgdXBkYXRlRnVuY3Rpb25zID0ge1xuICAwLjg6IGdsVEYwOHRvMTAsXG4gIFwiMS4wXCI6IGdsVEYxMHRvMjAsXG4gIFwiMi4wXCI6IHVuZGVmaW5lZCxcbn07XG5cbi8qKlxuICogVXBkYXRlIHRoZSBnbFRGIHZlcnNpb24gdG8gdGhlIGxhdGVzdCB2ZXJzaW9uICgyLjApLCBvciB0YXJnZXRWZXJzaW9uIGlmIHNwZWNpZmllZC5cbiAqIEFwcGxpZXMgY2hhbmdlcyBtYWRlIHRvIHRoZSBnbFRGIHNwZWMgYmV0d2VlbiByZXZpc2lvbnMgc28gdGhhdCB0aGUgY29yZSBsaWJyYXJ5XG4gKiBvbmx5IGhhcyB0byBoYW5kbGUgdGhlIGxhdGVzdCB2ZXJzaW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbHRmIEEgamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBhIGdsVEYgYXNzZXQuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMgZm9yIHVwZGF0aW5nIHRoZSBnbFRGLlxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnRhcmdldFZlcnNpb25dIFRoZSBnbFRGIHdpbGwgYmUgdXBncmFkZWQgdW50aWwgaXQgaGl0cyB0aGUgc3BlY2lmaWVkIHZlcnNpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgdXBkYXRlZCBnbFRGIGFzc2V0LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVZlcnNpb24oZ2x0Ziwgb3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuICBjb25zdCB0YXJnZXRWZXJzaW9uID0gb3B0aW9ucy50YXJnZXRWZXJzaW9uO1xuICBsZXQgdmVyc2lvbiA9IGdsdGYudmVyc2lvbjtcblxuICBnbHRmLmFzc2V0ID0gZGVmYXVsdFZhbHVlKGdsdGYuYXNzZXQsIHtcbiAgICB2ZXJzaW9uOiBcIjEuMFwiLFxuICB9KTtcblxuICBnbHRmLmFzc2V0LnZlcnNpb24gPSBkZWZhdWx0VmFsdWUoZ2x0Zi5hc3NldC52ZXJzaW9uLCBcIjEuMFwiKTtcbiAgdmVyc2lvbiA9IGRlZmF1bHRWYWx1ZSh2ZXJzaW9uLCBnbHRmLmFzc2V0LnZlcnNpb24pLnRvU3RyaW5nKCk7XG5cbiAgLy8gSW52YWxpZCB2ZXJzaW9uXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHVwZGF0ZUZ1bmN0aW9ucywgdmVyc2lvbikpIHtcbiAgICAvLyBUcnkgdHJ1bmNhdGluZyB0cmFpbGluZyB2ZXJzaW9uIG51bWJlcnMsIGNvdWxkIGJlIGEgbnVtYmVyIGFzIHdlbGwgaWYgaXQgaXMgMC44XG4gICAgaWYgKGRlZmluZWQodmVyc2lvbikpIHtcbiAgICAgIHZlcnNpb24gPSB2ZXJzaW9uLnN1YnN0cmluZygwLCAzKTtcbiAgICB9XG4gICAgLy8gRGVmYXVsdCB0byAxLjAgaWYgaXQgY2Fubm90IGJlIGRldGVybWluZWRcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1cGRhdGVGdW5jdGlvbnMsIHZlcnNpb24pKSB7XG4gICAgICB2ZXJzaW9uID0gXCIxLjBcIjtcbiAgICB9XG4gIH1cblxuICBsZXQgdXBkYXRlRnVuY3Rpb24gPSB1cGRhdGVGdW5jdGlvbnNbdmVyc2lvbl07XG5cbiAgd2hpbGUgKGRlZmluZWQodXBkYXRlRnVuY3Rpb24pKSB7XG4gICAgaWYgKHZlcnNpb24gPT09IHRhcmdldFZlcnNpb24pIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB1cGRhdGVGdW5jdGlvbihnbHRmLCBvcHRpb25zKTtcbiAgICB2ZXJzaW9uID0gZ2x0Zi5hc3NldC52ZXJzaW9uO1xuICAgIHVwZGF0ZUZ1bmN0aW9uID0gdXBkYXRlRnVuY3Rpb25zW3ZlcnNpb25dO1xuICB9XG4gIHJldHVybiBnbHRmO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVJbnN0YW5jZVRlY2huaXF1ZXMoZ2x0Zikge1xuICBjb25zdCBtYXRlcmlhbHMgPSBnbHRmLm1hdGVyaWFscztcbiAgZm9yIChjb25zdCBtYXRlcmlhbElkIGluIG1hdGVyaWFscykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobWF0ZXJpYWxzLCBtYXRlcmlhbElkKSkge1xuICAgICAgY29uc3QgbWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWF0ZXJpYWxJZF07XG4gICAgICBjb25zdCBpbnN0YW5jZVRlY2huaXF1ZSA9IG1hdGVyaWFsLmluc3RhbmNlVGVjaG5pcXVlO1xuICAgICAgaWYgKGRlZmluZWQoaW5zdGFuY2VUZWNobmlxdWUpKSB7XG4gICAgICAgIG1hdGVyaWFsLnRlY2huaXF1ZSA9IGluc3RhbmNlVGVjaG5pcXVlLnRlY2huaXF1ZTtcbiAgICAgICAgbWF0ZXJpYWwudmFsdWVzID0gaW5zdGFuY2VUZWNobmlxdWUudmFsdWVzO1xuICAgICAgICBkZWxldGUgbWF0ZXJpYWwuaW5zdGFuY2VUZWNobmlxdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldFByaW1pdGl2ZU1vZGVzKGdsdGYpIHtcbiAgY29uc3QgbWVzaGVzID0gZ2x0Zi5tZXNoZXM7XG4gIGZvciAoY29uc3QgbWVzaElkIGluIG1lc2hlcykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobWVzaGVzLCBtZXNoSWQpKSB7XG4gICAgICBjb25zdCBtZXNoID0gbWVzaGVzW21lc2hJZF07XG4gICAgICBjb25zdCBwcmltaXRpdmVzID0gbWVzaC5wcmltaXRpdmVzO1xuICAgICAgaWYgKGRlZmluZWQocHJpbWl0aXZlcykpIHtcbiAgICAgICAgY29uc3QgcHJpbWl0aXZlc0xlbmd0aCA9IHByaW1pdGl2ZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByaW1pdGl2ZXNMZW5ndGg7ICsraSkge1xuICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IHByaW1pdGl2ZXNbaV07XG4gICAgICAgICAgY29uc3QgZGVmYXVsdE1vZGUgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgICAgICBwcmltaXRpdmUucHJpbWl0aXZlLFxuICAgICAgICAgICAgV2ViR0xDb25zdGFudHMuVFJJQU5HTEVTXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwcmltaXRpdmUubW9kZSA9IGRlZmF1bHRWYWx1ZShwcmltaXRpdmUubW9kZSwgZGVmYXVsdE1vZGUpO1xuICAgICAgICAgIGRlbGV0ZSBwcmltaXRpdmUucHJpbWl0aXZlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU5vZGVzKGdsdGYpIHtcbiAgY29uc3Qgbm9kZXMgPSBnbHRmLm5vZGVzO1xuICBjb25zdCBheGlzID0gbmV3IENhcnRlc2lhbjMoKTtcbiAgY29uc3QgcXVhdCA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gIGZvciAoY29uc3Qgbm9kZUlkIGluIG5vZGVzKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChub2Rlcywgbm9kZUlkKSkge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW25vZGVJZF07XG4gICAgICBpZiAoZGVmaW5lZChub2RlLnJvdGF0aW9uKSkge1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5vZGUucm90YXRpb247XG4gICAgICAgIENhcnRlc2lhbjMuZnJvbUFycmF5KHJvdGF0aW9uLCAwLCBheGlzKTtcbiAgICAgICAgUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKGF4aXMsIHJvdGF0aW9uWzNdLCBxdWF0KTtcbiAgICAgICAgbm9kZS5yb3RhdGlvbiA9IFtxdWF0LngsIHF1YXQueSwgcXVhdC56LCBxdWF0LnddO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5zdGFuY2VTa2luID0gbm9kZS5pbnN0YW5jZVNraW47XG4gICAgICBpZiAoZGVmaW5lZChpbnN0YW5jZVNraW4pKSB7XG4gICAgICAgIG5vZGUuc2tlbGV0b25zID0gaW5zdGFuY2VTa2luLnNrZWxldG9ucztcbiAgICAgICAgbm9kZS5za2luID0gaW5zdGFuY2VTa2luLnNraW47XG4gICAgICAgIG5vZGUubWVzaGVzID0gaW5zdGFuY2VTa2luLm1lc2hlcztcbiAgICAgICAgZGVsZXRlIG5vZGUuaW5zdGFuY2VTa2luO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVBbmltYXRpb25zKGdsdGYpIHtcbiAgY29uc3QgYW5pbWF0aW9ucyA9IGdsdGYuYW5pbWF0aW9ucztcbiAgY29uc3QgYWNjZXNzb3JzID0gZ2x0Zi5hY2Nlc3NvcnM7XG4gIGNvbnN0IGJ1ZmZlclZpZXdzID0gZ2x0Zi5idWZmZXJWaWV3cztcbiAgY29uc3QgYnVmZmVycyA9IGdsdGYuYnVmZmVycztcbiAgY29uc3QgdXBkYXRlZEFjY2Vzc29ycyA9IHt9O1xuICBjb25zdCBheGlzID0gbmV3IENhcnRlc2lhbjMoKTtcbiAgY29uc3QgcXVhdCA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gIGZvciAoY29uc3QgYW5pbWF0aW9uSWQgaW4gYW5pbWF0aW9ucykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYW5pbWF0aW9ucywgYW5pbWF0aW9uSWQpKSB7XG4gICAgICBjb25zdCBhbmltYXRpb24gPSBhbmltYXRpb25zW2FuaW1hdGlvbklkXTtcbiAgICAgIGNvbnN0IGNoYW5uZWxzID0gYW5pbWF0aW9uLmNoYW5uZWxzO1xuICAgICAgY29uc3QgcGFyYW1ldGVycyA9IGFuaW1hdGlvbi5wYXJhbWV0ZXJzO1xuICAgICAgY29uc3Qgc2FtcGxlcnMgPSBhbmltYXRpb24uc2FtcGxlcnM7XG4gICAgICBpZiAoZGVmaW5lZChjaGFubmVscykpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbHNMZW5ndGggPSBjaGFubmVscy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhbm5lbHNMZW5ndGg7ICsraSkge1xuICAgICAgICAgIGNvbnN0IGNoYW5uZWwgPSBjaGFubmVsc1tpXTtcbiAgICAgICAgICBpZiAoY2hhbm5lbC50YXJnZXQucGF0aCA9PT0gXCJyb3RhdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NvcklkID0gcGFyYW1ldGVyc1tzYW1wbGVyc1tjaGFubmVsLnNhbXBsZXJdLm91dHB1dF07XG4gICAgICAgICAgICBpZiAoZGVmaW5lZCh1cGRhdGVkQWNjZXNzb3JzW2FjY2Vzc29ySWRdKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZWRBY2Nlc3NvcnNbYWNjZXNzb3JJZF0gPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgYWNjZXNzb3IgPSBhY2Nlc3NvcnNbYWNjZXNzb3JJZF07XG4gICAgICAgICAgICBjb25zdCBidWZmZXJWaWV3ID0gYnVmZmVyVmlld3NbYWNjZXNzb3IuYnVmZmVyVmlld107XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBidWZmZXJzW2J1ZmZlclZpZXcuYnVmZmVyXTtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IGJ1ZmZlci5leHRyYXMuX3BpcGVsaW5lLnNvdXJjZTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVPZmZzZXQgPVxuICAgICAgICAgICAgICBzb3VyY2UuYnl0ZU9mZnNldCArIGJ1ZmZlclZpZXcuYnl0ZU9mZnNldCArIGFjY2Vzc29yLmJ5dGVPZmZzZXQ7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRUeXBlID0gYWNjZXNzb3IuY29tcG9uZW50VHlwZTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gYWNjZXNzb3IuY291bnQ7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRzTGVuZ3RoID0gbnVtYmVyT2ZDb21wb25lbnRzRm9yVHlwZShhY2Nlc3Nvci50eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IGFjY2Vzc29yLmNvdW50ICogY29tcG9uZW50c0xlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVkQXJyYXkgPSBDb21wb25lbnREYXRhdHlwZS5jcmVhdGVBcnJheUJ1ZmZlclZpZXcoXG4gICAgICAgICAgICAgIGNvbXBvbmVudFR5cGUsXG4gICAgICAgICAgICAgIHNvdXJjZS5idWZmZXIsXG4gICAgICAgICAgICAgIGJ5dGVPZmZzZXQsXG4gICAgICAgICAgICAgIGxlbmd0aFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb3VudDsgaisrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGogKiBjb21wb25lbnRzTGVuZ3RoO1xuICAgICAgICAgICAgICBDYXJ0ZXNpYW4zLnVucGFjayh0eXBlZEFycmF5LCBvZmZzZXQsIGF4aXMpO1xuICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IHR5cGVkQXJyYXlbb2Zmc2V0ICsgM107XG4gICAgICAgICAgICAgIFF1YXRlcm5pb24uZnJvbUF4aXNBbmdsZShheGlzLCBhbmdsZSwgcXVhdCk7XG4gICAgICAgICAgICAgIFF1YXRlcm5pb24ucGFjayhxdWF0LCB0eXBlZEFycmF5LCBvZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVUZWNobmlxdWVQYXNzZXMoZ2x0Zikge1xuICBjb25zdCB0ZWNobmlxdWVzID0gZ2x0Zi50ZWNobmlxdWVzO1xuICBmb3IgKGNvbnN0IHRlY2huaXF1ZUlkIGluIHRlY2huaXF1ZXMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRlY2huaXF1ZXMsIHRlY2huaXF1ZUlkKSkge1xuICAgICAgY29uc3QgdGVjaG5pcXVlID0gdGVjaG5pcXVlc1t0ZWNobmlxdWVJZF07XG4gICAgICBjb25zdCBwYXNzZXMgPSB0ZWNobmlxdWUucGFzc2VzO1xuICAgICAgaWYgKGRlZmluZWQocGFzc2VzKSkge1xuICAgICAgICBjb25zdCBwYXNzTmFtZSA9IGRlZmF1bHRWYWx1ZSh0ZWNobmlxdWUucGFzcywgXCJkZWZhdWx0UGFzc1wiKTtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwYXNzZXMsIHBhc3NOYW1lKSkge1xuICAgICAgICAgIGNvbnN0IHBhc3MgPSBwYXNzZXNbcGFzc05hbWVdO1xuICAgICAgICAgIGNvbnN0IGluc3RhbmNlUHJvZ3JhbSA9IHBhc3MuaW5zdGFuY2VQcm9ncmFtO1xuICAgICAgICAgIHRlY2huaXF1ZS5hdHRyaWJ1dGVzID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICAgICAgdGVjaG5pcXVlLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBpbnN0YW5jZVByb2dyYW0uYXR0cmlidXRlc1xuICAgICAgICAgICk7XG4gICAgICAgICAgdGVjaG5pcXVlLnByb2dyYW0gPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgICAgICB0ZWNobmlxdWUucHJvZ3JhbSxcbiAgICAgICAgICAgIGluc3RhbmNlUHJvZ3JhbS5wcm9ncmFtXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0ZWNobmlxdWUudW5pZm9ybXMgPSBkZWZhdWx0VmFsdWUoXG4gICAgICAgICAgICB0ZWNobmlxdWUudW5pZm9ybXMsXG4gICAgICAgICAgICBpbnN0YW5jZVByb2dyYW0udW5pZm9ybXNcbiAgICAgICAgICApO1xuICAgICAgICAgIHRlY2huaXF1ZS5zdGF0ZXMgPSBkZWZhdWx0VmFsdWUodGVjaG5pcXVlLnN0YXRlcywgcGFzcy5zdGF0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0ZWNobmlxdWUucGFzc2VzO1xuICAgICAgICBkZWxldGUgdGVjaG5pcXVlLnBhc3M7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdsVEYwOHRvMTAoZ2x0Zikge1xuICBpZiAoIWRlZmluZWQoZ2x0Zi5hc3NldCkpIHtcbiAgICBnbHRmLmFzc2V0ID0ge307XG4gIH1cbiAgY29uc3QgYXNzZXQgPSBnbHRmLmFzc2V0O1xuICBhc3NldC52ZXJzaW9uID0gXCIxLjBcIjtcbiAgLy8gUHJvZmlsZSBzaG91bGQgYmUgYW4gb2JqZWN0LCBub3QgYSBzdHJpbmdcbiAgaWYgKHR5cGVvZiBhc3NldC5wcm9maWxlID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3Qgc3BsaXQgPSBhc3NldC5wcm9maWxlLnNwbGl0KFwiIFwiKTtcbiAgICBhc3NldC5wcm9maWxlID0ge1xuICAgICAgYXBpOiBzcGxpdFswXSxcbiAgICAgIHZlcnNpb246IHNwbGl0WzFdLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgYXNzZXQucHJvZmlsZSA9IHt9O1xuICB9XG5cbiAgLy8gVmVyc2lvbiBwcm9wZXJ0eSBzaG91bGQgYmUgaW4gYXNzZXQsIG5vdCBvbiB0aGUgcm9vdCBlbGVtZW50XG4gIGlmIChkZWZpbmVkKGdsdGYudmVyc2lvbikpIHtcbiAgICBkZWxldGUgZ2x0Zi52ZXJzaW9uO1xuICB9XG4gIC8vIG1hdGVyaWFsLmluc3RhbmNlVGVjaG5pcXVlIHByb3BlcnRpZXMgc2hvdWxkIGJlIGRpcmVjdGx5IG9uIHRoZSBtYXRlcmlhbFxuICB1cGRhdGVJbnN0YW5jZVRlY2huaXF1ZXMoZ2x0Zik7XG4gIC8vIHByaW1pdGl2ZS5wcmltaXRpdmUgc2hvdWxkIGJlIHByaW1pdGl2ZS5tb2RlXG4gIHNldFByaW1pdGl2ZU1vZGVzKGdsdGYpO1xuICAvLyBOb2RlIHJvdGF0aW9uIHNob3VsZCBiZSBxdWF0ZXJuaW9uLCBub3QgYXhpcy1hbmdsZVxuICAvLyBub2RlLmluc3RhbmNlU2tpbiBpcyBkZXByZWNhdGVkXG4gIHVwZGF0ZU5vZGVzKGdsdGYpO1xuICAvLyBBbmltYXRpb25zIHRoYXQgdGFyZ2V0IHJvdGF0aW9ucyBzaG91bGQgYmUgcXVhdGVybmlvbiwgbm90IGF4aXMtYW5nbGVcbiAgdXBkYXRlQW5pbWF0aW9ucyhnbHRmKTtcbiAgLy8gdGVjaG5pcXVlLnBhc3MgYW5kIHRlY2huaXF1ZXMucGFzc2VzIGFyZSBkZXByZWNhdGVkXG4gIHJlbW92ZVRlY2huaXF1ZVBhc3NlcyhnbHRmKTtcbiAgLy8gZ2x0Zi5hbGxFeHRlbnNpb25zIC0+IGV4dGVuc2lvbnNVc2VkXG4gIGlmIChkZWZpbmVkKGdsdGYuYWxsRXh0ZW5zaW9ucykpIHtcbiAgICBnbHRmLmV4dGVuc2lvbnNVc2VkID0gZ2x0Zi5hbGxFeHRlbnNpb25zO1xuICAgIGRlbGV0ZSBnbHRmLmFsbEV4dGVuc2lvbnM7XG4gIH1cbiAgLy8gZ2x0Zi5saWdodHMgLT4ga2hyTWF0ZXJpYWxzQ29tbW9uLmxpZ2h0c1xuICBpZiAoZGVmaW5lZChnbHRmLmxpZ2h0cykpIHtcbiAgICBjb25zdCBleHRlbnNpb25zID0gZGVmYXVsdFZhbHVlKGdsdGYuZXh0ZW5zaW9ucywge30pO1xuICAgIGdsdGYuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7XG4gICAgY29uc3QgbWF0ZXJpYWxzQ29tbW9uID0gZGVmYXVsdFZhbHVlKGV4dGVuc2lvbnMuS0hSX21hdGVyaWFsc19jb21tb24sIHt9KTtcbiAgICBleHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY29tbW9uID0gbWF0ZXJpYWxzQ29tbW9uO1xuICAgIG1hdGVyaWFsc0NvbW1vbi5saWdodHMgPSBnbHRmLmxpZ2h0cztcbiAgICBkZWxldGUgZ2x0Zi5saWdodHM7XG4gICAgYWRkRXh0ZW5zaW9uc1VzZWQoZ2x0ZiwgXCJLSFJfbWF0ZXJpYWxzX2NvbW1vblwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVBbmltYXRpb25TYW1wbGVyc0luZGlyZWN0aW9uKGdsdGYpIHtcbiAgY29uc3QgYW5pbWF0aW9ucyA9IGdsdGYuYW5pbWF0aW9ucztcbiAgZm9yIChjb25zdCBhbmltYXRpb25JZCBpbiBhbmltYXRpb25zKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhbmltYXRpb25zLCBhbmltYXRpb25JZCkpIHtcbiAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IGFuaW1hdGlvbnNbYW5pbWF0aW9uSWRdO1xuICAgICAgY29uc3QgcGFyYW1ldGVycyA9IGFuaW1hdGlvbi5wYXJhbWV0ZXJzO1xuICAgICAgaWYgKGRlZmluZWQocGFyYW1ldGVycykpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlcnMgPSBhbmltYXRpb24uc2FtcGxlcnM7XG4gICAgICAgIGZvciAoY29uc3Qgc2FtcGxlcklkIGluIHNhbXBsZXJzKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzYW1wbGVycywgc2FtcGxlcklkKSkge1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlciA9IHNhbXBsZXJzW3NhbXBsZXJJZF07XG4gICAgICAgICAgICBzYW1wbGVyLmlucHV0ID0gcGFyYW1ldGVyc1tzYW1wbGVyLmlucHV0XTtcbiAgICAgICAgICAgIHNhbXBsZXIub3V0cHV0ID0gcGFyYW1ldGVyc1tzYW1wbGVyLm91dHB1dF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBhbmltYXRpb24ucGFyYW1ldGVycztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gb2JqZWN0VG9BcnJheShvYmplY3QsIG1hcHBpbmcpIHtcbiAgY29uc3QgYXJyYXkgPSBbXTtcbiAgZm9yIChjb25zdCBpZCBpbiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgaWQpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9iamVjdFtpZF07XG4gICAgICBtYXBwaW5nW2lkXSA9IGFycmF5Lmxlbmd0aDtcbiAgICAgIGFycmF5LnB1c2godmFsdWUpO1xuICAgICAgaWYgKCFkZWZpbmVkKHZhbHVlLm5hbWUpKSB7XG4gICAgICAgIHZhbHVlLm5hbWUgPSBpZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiBvYmplY3RzVG9BcnJheXMoZ2x0Zikge1xuICBsZXQgaTtcbiAgY29uc3QgZ2xvYmFsTWFwcGluZyA9IHtcbiAgICBhY2Nlc3NvcnM6IHt9LFxuICAgIGFuaW1hdGlvbnM6IHt9LFxuICAgIGJ1ZmZlcnM6IHt9LFxuICAgIGJ1ZmZlclZpZXdzOiB7fSxcbiAgICBjYW1lcmFzOiB7fSxcbiAgICBpbWFnZXM6IHt9LFxuICAgIG1hdGVyaWFsczoge30sXG4gICAgbWVzaGVzOiB7fSxcbiAgICBub2Rlczoge30sXG4gICAgcHJvZ3JhbXM6IHt9LFxuICAgIHNhbXBsZXJzOiB7fSxcbiAgICBzY2VuZXM6IHt9LFxuICAgIHNoYWRlcnM6IHt9LFxuICAgIHNraW5zOiB7fSxcbiAgICB0ZXh0dXJlczoge30sXG4gICAgdGVjaG5pcXVlczoge30sXG4gIH07XG5cbiAgLy8gTWFwIGpvaW50IG5hbWVzIHRvIGlkIG5hbWVzXG4gIGxldCBqb2ludE5hbWU7XG4gIGNvbnN0IGpvaW50TmFtZVRvSWQgPSB7fTtcbiAgY29uc3Qgbm9kZXMgPSBnbHRmLm5vZGVzO1xuICBmb3IgKGNvbnN0IGlkIGluIG5vZGVzKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChub2RlcywgaWQpKSB7XG4gICAgICBqb2ludE5hbWUgPSBub2Rlc1tpZF0uam9pbnROYW1lO1xuICAgICAgaWYgKGRlZmluZWQoam9pbnROYW1lKSkge1xuICAgICAgICBqb2ludE5hbWVUb0lkW2pvaW50TmFtZV0gPSBpZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDb252ZXJ0IHRvcCBsZXZlbCBvYmplY3RzIHRvIGFycmF5c1xuICBmb3IgKGNvbnN0IHRvcExldmVsSWQgaW4gZ2x0Zikge1xuICAgIGlmIChcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChnbHRmLCB0b3BMZXZlbElkKSAmJlxuICAgICAgZGVmaW5lZChnbG9iYWxNYXBwaW5nW3RvcExldmVsSWRdKVxuICAgICkge1xuICAgICAgY29uc3Qgb2JqZWN0TWFwcGluZyA9IHt9O1xuICAgICAgY29uc3Qgb2JqZWN0ID0gZ2x0Zlt0b3BMZXZlbElkXTtcbiAgICAgIGdsdGZbdG9wTGV2ZWxJZF0gPSBvYmplY3RUb0FycmF5KG9iamVjdCwgb2JqZWN0TWFwcGluZyk7XG4gICAgICBnbG9iYWxNYXBwaW5nW3RvcExldmVsSWRdID0gb2JqZWN0TWFwcGluZztcbiAgICB9XG4gIH1cblxuICAvLyBSZW1hcCBqb2ludCBuYW1lcyB0byBhcnJheSBpbmRleGVzXG4gIGZvciAoam9pbnROYW1lIGluIGpvaW50TmFtZVRvSWQpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGpvaW50TmFtZVRvSWQsIGpvaW50TmFtZSkpIHtcbiAgICAgIGpvaW50TmFtZVRvSWRbam9pbnROYW1lXSA9IGdsb2JhbE1hcHBpbmcubm9kZXNbam9pbnROYW1lVG9JZFtqb2ludE5hbWVdXTtcbiAgICB9XG4gIH1cblxuICAvLyBGaXggcmVmZXJlbmNlc1xuICBpZiAoZGVmaW5lZChnbHRmLnNjZW5lKSkge1xuICAgIGdsdGYuc2NlbmUgPSBnbG9iYWxNYXBwaW5nLnNjZW5lc1tnbHRmLnNjZW5lXTtcbiAgfVxuICBGb3JFYWNoLmJ1ZmZlclZpZXcoZ2x0ZiwgZnVuY3Rpb24gKGJ1ZmZlclZpZXcpIHtcbiAgICBpZiAoZGVmaW5lZChidWZmZXJWaWV3LmJ1ZmZlcikpIHtcbiAgICAgIGJ1ZmZlclZpZXcuYnVmZmVyID0gZ2xvYmFsTWFwcGluZy5idWZmZXJzW2J1ZmZlclZpZXcuYnVmZmVyXTtcbiAgICB9XG4gIH0pO1xuICBGb3JFYWNoLmFjY2Vzc29yKGdsdGYsIGZ1bmN0aW9uIChhY2Nlc3Nvcikge1xuICAgIGlmIChkZWZpbmVkKGFjY2Vzc29yLmJ1ZmZlclZpZXcpKSB7XG4gICAgICBhY2Nlc3Nvci5idWZmZXJWaWV3ID0gZ2xvYmFsTWFwcGluZy5idWZmZXJWaWV3c1thY2Nlc3Nvci5idWZmZXJWaWV3XTtcbiAgICB9XG4gIH0pO1xuICBGb3JFYWNoLnNoYWRlcihnbHRmLCBmdW5jdGlvbiAoc2hhZGVyKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IHNoYWRlci5leHRlbnNpb25zO1xuICAgIGlmIChkZWZpbmVkKGV4dGVuc2lvbnMpKSB7XG4gICAgICBjb25zdCBiaW5hcnlHbHRmID0gZXh0ZW5zaW9ucy5LSFJfYmluYXJ5X2dsVEY7XG4gICAgICBpZiAoZGVmaW5lZChiaW5hcnlHbHRmKSkge1xuICAgICAgICBzaGFkZXIuYnVmZmVyVmlldyA9IGdsb2JhbE1hcHBpbmcuYnVmZmVyVmlld3NbYmluYXJ5R2x0Zi5idWZmZXJWaWV3XTtcbiAgICAgICAgZGVsZXRlIGV4dGVuc2lvbnMuS0hSX2JpbmFyeV9nbFRGO1xuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgc2hhZGVyLmV4dGVuc2lvbnM7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgRm9yRWFjaC5wcm9ncmFtKGdsdGYsIGZ1bmN0aW9uIChwcm9ncmFtKSB7XG4gICAgaWYgKGRlZmluZWQocHJvZ3JhbS52ZXJ0ZXhTaGFkZXIpKSB7XG4gICAgICBwcm9ncmFtLnZlcnRleFNoYWRlciA9IGdsb2JhbE1hcHBpbmcuc2hhZGVyc1twcm9ncmFtLnZlcnRleFNoYWRlcl07XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKHByb2dyYW0uZnJhZ21lbnRTaGFkZXIpKSB7XG4gICAgICBwcm9ncmFtLmZyYWdtZW50U2hhZGVyID0gZ2xvYmFsTWFwcGluZy5zaGFkZXJzW3Byb2dyYW0uZnJhZ21lbnRTaGFkZXJdO1xuICAgIH1cbiAgfSk7XG4gIEZvckVhY2gudGVjaG5pcXVlKGdsdGYsIGZ1bmN0aW9uICh0ZWNobmlxdWUpIHtcbiAgICBpZiAoZGVmaW5lZCh0ZWNobmlxdWUucHJvZ3JhbSkpIHtcbiAgICAgIHRlY2huaXF1ZS5wcm9ncmFtID0gZ2xvYmFsTWFwcGluZy5wcm9ncmFtc1t0ZWNobmlxdWUucHJvZ3JhbV07XG4gICAgfVxuICAgIEZvckVhY2gudGVjaG5pcXVlUGFyYW1ldGVyKHRlY2huaXF1ZSwgZnVuY3Rpb24gKHBhcmFtZXRlcikge1xuICAgICAgaWYgKGRlZmluZWQocGFyYW1ldGVyLm5vZGUpKSB7XG4gICAgICAgIHBhcmFtZXRlci5ub2RlID0gZ2xvYmFsTWFwcGluZy5ub2Rlc1twYXJhbWV0ZXIubm9kZV07XG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtZXRlci52YWx1ZTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcGFyYW1ldGVyLnZhbHVlID0ge1xuICAgICAgICAgIGluZGV4OiBnbG9iYWxNYXBwaW5nLnRleHR1cmVzW3ZhbHVlXSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIEZvckVhY2gubWVzaChnbHRmLCBmdW5jdGlvbiAobWVzaCkge1xuICAgIEZvckVhY2gubWVzaFByaW1pdGl2ZShtZXNoLCBmdW5jdGlvbiAocHJpbWl0aXZlKSB7XG4gICAgICBpZiAoZGVmaW5lZChwcmltaXRpdmUuaW5kaWNlcykpIHtcbiAgICAgICAgcHJpbWl0aXZlLmluZGljZXMgPSBnbG9iYWxNYXBwaW5nLmFjY2Vzc29yc1twcmltaXRpdmUuaW5kaWNlc107XG4gICAgICB9XG4gICAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmVBdHRyaWJ1dGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgZnVuY3Rpb24gKGFjY2Vzc29ySWQsIHNlbWFudGljKSB7XG4gICAgICAgICAgcHJpbWl0aXZlLmF0dHJpYnV0ZXNbc2VtYW50aWNdID0gZ2xvYmFsTWFwcGluZy5hY2Nlc3NvcnNbYWNjZXNzb3JJZF07XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZGVmaW5lZChwcmltaXRpdmUubWF0ZXJpYWwpKSB7XG4gICAgICAgIHByaW1pdGl2ZS5tYXRlcmlhbCA9IGdsb2JhbE1hcHBpbmcubWF0ZXJpYWxzW3ByaW1pdGl2ZS5tYXRlcmlhbF07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBGb3JFYWNoLm5vZGUoZ2x0ZiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBsZXQgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xuICAgIGlmIChkZWZpbmVkKGNoaWxkcmVuKSkge1xuICAgICAgY29uc3QgY2hpbGRyZW5MZW5ndGggPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW5MZW5ndGg7ICsraSkge1xuICAgICAgICBjaGlsZHJlbltpXSA9IGdsb2JhbE1hcHBpbmcubm9kZXNbY2hpbGRyZW5baV1dO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZGVmaW5lZChub2RlLm1lc2hlcykpIHtcbiAgICAgIC8vIFNwbGl0IG91dCBtZXNoZXMgb24gbm9kZXNcbiAgICAgIGNvbnN0IG1lc2hlcyA9IG5vZGUubWVzaGVzO1xuICAgICAgY29uc3QgbWVzaGVzTGVuZ3RoID0gbWVzaGVzLmxlbmd0aDtcbiAgICAgIGlmIChtZXNoZXNMZW5ndGggPiAwKSB7XG4gICAgICAgIG5vZGUubWVzaCA9IGdsb2JhbE1hcHBpbmcubWVzaGVzW21lc2hlc1swXV07XG4gICAgICAgIGZvciAoaSA9IDE7IGkgPCBtZXNoZXNMZW5ndGg7ICsraSkge1xuICAgICAgICAgIGNvbnN0IG1lc2hOb2RlID0ge1xuICAgICAgICAgICAgbWVzaDogZ2xvYmFsTWFwcGluZy5tZXNoZXNbbWVzaGVzW2ldXSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IG1lc2hOb2RlSWQgPSBhZGRUb0FycmF5KGdsdGYubm9kZXMsIG1lc2hOb2RlKTtcbiAgICAgICAgICBpZiAoIWRlZmluZWQoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtdO1xuICAgICAgICAgICAgbm9kZS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGlsZHJlbi5wdXNoKG1lc2hOb2RlSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkZWxldGUgbm9kZS5tZXNoZXM7XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKG5vZGUuY2FtZXJhKSkge1xuICAgICAgbm9kZS5jYW1lcmEgPSBnbG9iYWxNYXBwaW5nLmNhbWVyYXNbbm9kZS5jYW1lcmFdO1xuICAgIH1cbiAgICBpZiAoZGVmaW5lZChub2RlLnNraW4pKSB7XG4gICAgICBub2RlLnNraW4gPSBnbG9iYWxNYXBwaW5nLnNraW5zW25vZGUuc2tpbl07XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKG5vZGUuc2tlbGV0b25zKSkge1xuICAgICAgLy8gQXNzaWduIHNrZWxldG9ucyB0byBza2luc1xuICAgICAgY29uc3Qgc2tlbGV0b25zID0gbm9kZS5za2VsZXRvbnM7XG4gICAgICBjb25zdCBza2VsZXRvbnNMZW5ndGggPSBza2VsZXRvbnMubGVuZ3RoO1xuICAgICAgaWYgKHNrZWxldG9uc0xlbmd0aCA+IDAgJiYgZGVmaW5lZChub2RlLnNraW4pKSB7XG4gICAgICAgIGNvbnN0IHNraW4gPSBnbHRmLnNraW5zW25vZGUuc2tpbl07XG4gICAgICAgIHNraW4uc2tlbGV0b24gPSBnbG9iYWxNYXBwaW5nLm5vZGVzW3NrZWxldG9uc1swXV07XG4gICAgICB9XG4gICAgICBkZWxldGUgbm9kZS5za2VsZXRvbnM7XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKG5vZGUuam9pbnROYW1lKSkge1xuICAgICAgZGVsZXRlIG5vZGUuam9pbnROYW1lO1xuICAgIH1cbiAgfSk7XG4gIEZvckVhY2guc2tpbihnbHRmLCBmdW5jdGlvbiAoc2tpbikge1xuICAgIGlmIChkZWZpbmVkKHNraW4uaW52ZXJzZUJpbmRNYXRyaWNlcykpIHtcbiAgICAgIHNraW4uaW52ZXJzZUJpbmRNYXRyaWNlcyA9XG4gICAgICAgIGdsb2JhbE1hcHBpbmcuYWNjZXNzb3JzW3NraW4uaW52ZXJzZUJpbmRNYXRyaWNlc107XG4gICAgfVxuICAgIGNvbnN0IGpvaW50TmFtZXMgPSBza2luLmpvaW50TmFtZXM7XG4gICAgaWYgKGRlZmluZWQoam9pbnROYW1lcykpIHtcbiAgICAgIGNvbnN0IGpvaW50cyA9IFtdO1xuICAgICAgY29uc3Qgam9pbnROYW1lc0xlbmd0aCA9IGpvaW50TmFtZXMubGVuZ3RoO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGpvaW50TmFtZXNMZW5ndGg7ICsraSkge1xuICAgICAgICBqb2ludHNbaV0gPSBqb2ludE5hbWVUb0lkW2pvaW50TmFtZXNbaV1dO1xuICAgICAgfVxuICAgICAgc2tpbi5qb2ludHMgPSBqb2ludHM7XG4gICAgICBkZWxldGUgc2tpbi5qb2ludE5hbWVzO1xuICAgIH1cbiAgfSk7XG4gIEZvckVhY2guc2NlbmUoZ2x0ZiwgZnVuY3Rpb24gKHNjZW5lKSB7XG4gICAgY29uc3Qgc2NlbmVOb2RlcyA9IHNjZW5lLm5vZGVzO1xuICAgIGlmIChkZWZpbmVkKHNjZW5lTm9kZXMpKSB7XG4gICAgICBjb25zdCBzY2VuZU5vZGVzTGVuZ3RoID0gc2NlbmVOb2Rlcy5sZW5ndGg7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc2NlbmVOb2Rlc0xlbmd0aDsgKytpKSB7XG4gICAgICAgIHNjZW5lTm9kZXNbaV0gPSBnbG9iYWxNYXBwaW5nLm5vZGVzW3NjZW5lTm9kZXNbaV1dO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIEZvckVhY2guYW5pbWF0aW9uKGdsdGYsIGZ1bmN0aW9uIChhbmltYXRpb24pIHtcbiAgICBjb25zdCBzYW1wbGVyTWFwcGluZyA9IHt9O1xuICAgIGFuaW1hdGlvbi5zYW1wbGVycyA9IG9iamVjdFRvQXJyYXkoYW5pbWF0aW9uLnNhbXBsZXJzLCBzYW1wbGVyTWFwcGluZyk7XG4gICAgRm9yRWFjaC5hbmltYXRpb25TYW1wbGVyKGFuaW1hdGlvbiwgZnVuY3Rpb24gKHNhbXBsZXIpIHtcbiAgICAgIHNhbXBsZXIuaW5wdXQgPSBnbG9iYWxNYXBwaW5nLmFjY2Vzc29yc1tzYW1wbGVyLmlucHV0XTtcbiAgICAgIHNhbXBsZXIub3V0cHV0ID0gZ2xvYmFsTWFwcGluZy5hY2Nlc3NvcnNbc2FtcGxlci5vdXRwdXRdO1xuICAgIH0pO1xuICAgIEZvckVhY2guYW5pbWF0aW9uQ2hhbm5lbChhbmltYXRpb24sIGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICBjaGFubmVsLnNhbXBsZXIgPSBzYW1wbGVyTWFwcGluZ1tjaGFubmVsLnNhbXBsZXJdO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gY2hhbm5lbC50YXJnZXQ7XG4gICAgICBpZiAoZGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgIHRhcmdldC5ub2RlID0gZ2xvYmFsTWFwcGluZy5ub2Rlc1t0YXJnZXQuaWRdO1xuICAgICAgICBkZWxldGUgdGFyZ2V0LmlkO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgRm9yRWFjaC5tYXRlcmlhbChnbHRmLCBmdW5jdGlvbiAobWF0ZXJpYWwpIHtcbiAgICBpZiAoZGVmaW5lZChtYXRlcmlhbC50ZWNobmlxdWUpKSB7XG4gICAgICBtYXRlcmlhbC50ZWNobmlxdWUgPSBnbG9iYWxNYXBwaW5nLnRlY2huaXF1ZXNbbWF0ZXJpYWwudGVjaG5pcXVlXTtcbiAgICB9XG4gICAgRm9yRWFjaC5tYXRlcmlhbFZhbHVlKG1hdGVyaWFsLCBmdW5jdGlvbiAodmFsdWUsIG5hbWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbWF0ZXJpYWwudmFsdWVzW25hbWVdID0ge1xuICAgICAgICAgIGluZGV4OiBnbG9iYWxNYXBwaW5nLnRleHR1cmVzW3ZhbHVlXSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBleHRlbnNpb25zID0gbWF0ZXJpYWwuZXh0ZW5zaW9ucztcbiAgICBpZiAoZGVmaW5lZChleHRlbnNpb25zKSkge1xuICAgICAgY29uc3QgbWF0ZXJpYWxzQ29tbW9uID0gZXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX2NvbW1vbjtcbiAgICAgIGlmIChkZWZpbmVkKG1hdGVyaWFsc0NvbW1vbikpIHtcbiAgICAgICAgRm9yRWFjaC5tYXRlcmlhbFZhbHVlKG1hdGVyaWFsc0NvbW1vbiwgZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgbWF0ZXJpYWxzQ29tbW9uLnZhbHVlc1tuYW1lXSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGdsb2JhbE1hcHBpbmcudGV4dHVyZXNbdmFsdWVdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIEZvckVhY2guaW1hZ2UoZ2x0ZiwgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IGltYWdlLmV4dGVuc2lvbnM7XG4gICAgaWYgKGRlZmluZWQoZXh0ZW5zaW9ucykpIHtcbiAgICAgIGNvbnN0IGJpbmFyeUdsdGYgPSBleHRlbnNpb25zLktIUl9iaW5hcnlfZ2xURjtcbiAgICAgIGlmIChkZWZpbmVkKGJpbmFyeUdsdGYpKSB7XG4gICAgICAgIGltYWdlLmJ1ZmZlclZpZXcgPSBnbG9iYWxNYXBwaW5nLmJ1ZmZlclZpZXdzW2JpbmFyeUdsdGYuYnVmZmVyVmlld107XG4gICAgICAgIGltYWdlLm1pbWVUeXBlID0gYmluYXJ5R2x0Zi5taW1lVHlwZTtcbiAgICAgICAgZGVsZXRlIGV4dGVuc2lvbnMuS0hSX2JpbmFyeV9nbFRGO1xuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgaW1hZ2UuZXh0ZW5zaW9ucztcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBGb3JFYWNoLnRleHR1cmUoZ2x0ZiwgZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICBpZiAoZGVmaW5lZCh0ZXh0dXJlLnNhbXBsZXIpKSB7XG4gICAgICB0ZXh0dXJlLnNhbXBsZXIgPSBnbG9iYWxNYXBwaW5nLnNhbXBsZXJzW3RleHR1cmUuc2FtcGxlcl07XG4gICAgfVxuICAgIGlmIChkZWZpbmVkKHRleHR1cmUuc291cmNlKSkge1xuICAgICAgdGV4dHVyZS5zb3VyY2UgPSBnbG9iYWxNYXBwaW5nLmltYWdlc1t0ZXh0dXJlLnNvdXJjZV07XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQW5pbWF0aW9uU2FtcGxlck5hbWVzKGdsdGYpIHtcbiAgRm9yRWFjaC5hbmltYXRpb24oZ2x0ZiwgZnVuY3Rpb24gKGFuaW1hdGlvbikge1xuICAgIEZvckVhY2guYW5pbWF0aW9uU2FtcGxlcihhbmltYXRpb24sIGZ1bmN0aW9uIChzYW1wbGVyKSB7XG4gICAgICBkZWxldGUgc2FtcGxlci5uYW1lO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRW1wdHlBcnJheXMoZ2x0Zikge1xuICBmb3IgKGNvbnN0IHRvcExldmVsSWQgaW4gZ2x0Zikge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZ2x0ZiwgdG9wTGV2ZWxJZCkpIHtcbiAgICAgIGNvbnN0IGFycmF5ID0gZ2x0Zlt0b3BMZXZlbElkXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmF5KSAmJiBhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVsZXRlIGdsdGZbdG9wTGV2ZWxJZF07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIEZvckVhY2gubm9kZShnbHRmLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChkZWZpbmVkKG5vZGUuY2hpbGRyZW4pICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbjtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzdHJpcEFzc2V0KGdsdGYpIHtcbiAgY29uc3QgYXNzZXQgPSBnbHRmLmFzc2V0O1xuICBkZWxldGUgYXNzZXQucHJvZmlsZTtcbiAgZGVsZXRlIGFzc2V0LnByZW11bHRpcGxpZWRBbHBoYTtcbn1cblxuY29uc3Qga25vd25FeHRlbnNpb25zID0ge1xuICBDRVNJVU1fUlRDOiB0cnVlLFxuICBLSFJfbWF0ZXJpYWxzX2NvbW1vbjogdHJ1ZSxcbiAgV0VCM0RfcXVhbnRpemVkX2F0dHJpYnV0ZXM6IHRydWUsXG59O1xuZnVuY3Rpb24gcmVxdWlyZUtub3duRXh0ZW5zaW9ucyhnbHRmKSB7XG4gIGNvbnN0IGV4dGVuc2lvbnNVc2VkID0gZ2x0Zi5leHRlbnNpb25zVXNlZDtcbiAgZ2x0Zi5leHRlbnNpb25zUmVxdWlyZWQgPSBkZWZhdWx0VmFsdWUoZ2x0Zi5leHRlbnNpb25zUmVxdWlyZWQsIFtdKTtcbiAgaWYgKGRlZmluZWQoZXh0ZW5zaW9uc1VzZWQpKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9uc1VzZWRMZW5ndGggPSBleHRlbnNpb25zVXNlZC5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHRlbnNpb25zVXNlZExlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBleHRlbnNpb24gPSBleHRlbnNpb25zVXNlZFtpXTtcbiAgICAgIGlmIChkZWZpbmVkKGtub3duRXh0ZW5zaW9uc1tleHRlbnNpb25dKSkge1xuICAgICAgICBnbHRmLmV4dGVuc2lvbnNSZXF1aXJlZC5wdXNoKGV4dGVuc2lvbik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUJ1ZmZlclR5cGUoZ2x0Zikge1xuICBGb3JFYWNoLmJ1ZmZlcihnbHRmLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgZGVsZXRlIGJ1ZmZlci50eXBlO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVGV4dHVyZVByb3BlcnRpZXMoZ2x0Zikge1xuICBGb3JFYWNoLnRleHR1cmUoZ2x0ZiwgZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICBkZWxldGUgdGV4dHVyZS5mb3JtYXQ7XG4gICAgZGVsZXRlIHRleHR1cmUuaW50ZXJuYWxGb3JtYXQ7XG4gICAgZGVsZXRlIHRleHR1cmUudGFyZ2V0O1xuICAgIGRlbGV0ZSB0ZXh0dXJlLnR5cGU7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZXF1aXJlQXR0cmlidXRlU2V0SW5kZXgoZ2x0Zikge1xuICBGb3JFYWNoLm1lc2goZ2x0ZiwgZnVuY3Rpb24gKG1lc2gpIHtcbiAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgRm9yRWFjaC5tZXNoUHJpbWl0aXZlQXR0cmlidXRlKFxuICAgICAgICBwcmltaXRpdmUsXG4gICAgICAgIGZ1bmN0aW9uIChhY2Nlc3NvcklkLCBzZW1hbnRpYykge1xuICAgICAgICAgIGlmIChzZW1hbnRpYyA9PT0gXCJURVhDT09SRFwiKSB7XG4gICAgICAgICAgICBwcmltaXRpdmUuYXR0cmlidXRlcy5URVhDT09SRF8wID0gYWNjZXNzb3JJZDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNlbWFudGljID09PSBcIkNPTE9SXCIpIHtcbiAgICAgICAgICAgIHByaW1pdGl2ZS5hdHRyaWJ1dGVzLkNPTE9SXzAgPSBhY2Nlc3NvcklkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGRlbGV0ZSBwcmltaXRpdmUuYXR0cmlidXRlcy5URVhDT09SRDtcbiAgICAgIGRlbGV0ZSBwcmltaXRpdmUuYXR0cmlidXRlcy5DT0xPUjtcbiAgICB9KTtcbiAgfSk7XG4gIEZvckVhY2gudGVjaG5pcXVlKGdsdGYsIGZ1bmN0aW9uICh0ZWNobmlxdWUpIHtcbiAgICBGb3JFYWNoLnRlY2huaXF1ZVBhcmFtZXRlcih0ZWNobmlxdWUsIGZ1bmN0aW9uIChwYXJhbWV0ZXIpIHtcbiAgICAgIGNvbnN0IHNlbWFudGljID0gcGFyYW1ldGVyLnNlbWFudGljO1xuICAgICAgaWYgKGRlZmluZWQoc2VtYW50aWMpKSB7XG4gICAgICAgIGlmIChzZW1hbnRpYyA9PT0gXCJURVhDT09SRFwiKSB7XG4gICAgICAgICAgcGFyYW1ldGVyLnNlbWFudGljID0gXCJURVhDT09SRF8wXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VtYW50aWMgPT09IFwiQ09MT1JcIikge1xuICAgICAgICAgIHBhcmFtZXRlci5zZW1hbnRpYyA9IFwiQ09MT1JfMFwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCBrbm93blNlbWFudGljcyA9IHtcbiAgUE9TSVRJT046IHRydWUsXG4gIE5PUk1BTDogdHJ1ZSxcbiAgVEFOR0VOVDogdHJ1ZSxcbn07XG5jb25zdCBpbmRleGVkU2VtYW50aWNzID0ge1xuICBDT0xPUjogXCJDT0xPUlwiLFxuICBKT0lOVDogXCJKT0lOVFNcIixcbiAgSk9JTlRTOiBcIkpPSU5UU1wiLFxuICBURVhDT09SRDogXCJURVhDT09SRFwiLFxuICBXRUlHSFQ6IFwiV0VJR0hUU1wiLFxuICBXRUlHSFRTOiBcIldFSUdIVFNcIixcbn07XG5mdW5jdGlvbiB1bmRlcnNjb3JlQXBwbGljYXRpb25TcGVjaWZpY1NlbWFudGljcyhnbHRmKSB7XG4gIGNvbnN0IG1hcHBlZFNlbWFudGljcyA9IHt9O1xuICBGb3JFYWNoLm1lc2goZ2x0ZiwgZnVuY3Rpb24gKG1lc2gpIHtcbiAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmUobWVzaCwgZnVuY3Rpb24gKHByaW1pdGl2ZSkge1xuICAgICAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gICAgICBGb3JFYWNoLm1lc2hQcmltaXRpdmVBdHRyaWJ1dGUoXG4gICAgICAgIHByaW1pdGl2ZSxcbiAgICAgICAgZnVuY3Rpb24gKGFjY2Vzc29ySWQsIHNlbWFudGljKSB7XG4gICAgICAgICAgaWYgKHNlbWFudGljLmNoYXJBdCgwKSAhPT0gXCJfXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNldEluZGV4ID0gc2VtYW50aWMuc2VhcmNoKC9fWzAtOV0rL2cpO1xuICAgICAgICAgICAgbGV0IHN0cmlwcGVkU2VtYW50aWMgPSBzZW1hbnRpYztcbiAgICAgICAgICAgIGxldCBzdWZmaXggPSBcIl8wXCI7XG4gICAgICAgICAgICBpZiAoc2V0SW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICBzdHJpcHBlZFNlbWFudGljID0gc2VtYW50aWMuc3Vic3RyaW5nKDAsIHNldEluZGV4KTtcbiAgICAgICAgICAgICAgc3VmZml4ID0gc2VtYW50aWMuc3Vic3RyaW5nKHNldEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXdTZW1hbnRpYztcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ZWRTZW1hbnRpYyA9IGluZGV4ZWRTZW1hbnRpY3Nbc3RyaXBwZWRTZW1hbnRpY107XG4gICAgICAgICAgICBpZiAoZGVmaW5lZChpbmRleGVkU2VtYW50aWMpKSB7XG4gICAgICAgICAgICAgIG5ld1NlbWFudGljID0gaW5kZXhlZFNlbWFudGljICsgc3VmZml4O1xuICAgICAgICAgICAgICBtYXBwZWRTZW1hbnRpY3Nbc2VtYW50aWNdID0gbmV3U2VtYW50aWM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFkZWZpbmVkKGtub3duU2VtYW50aWNzW3N0cmlwcGVkU2VtYW50aWNdKSkge1xuICAgICAgICAgICAgICBuZXdTZW1hbnRpYyA9IFwiX1wiICsgc2VtYW50aWM7XG4gICAgICAgICAgICAgIG1hcHBlZFNlbWFudGljc1tzZW1hbnRpY10gPSBuZXdTZW1hbnRpYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IHNlbWFudGljIGluIG1hcHBlZFNlbWFudGljcykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1hcHBlZFNlbWFudGljcywgc2VtYW50aWMpKSB7XG4gICAgICAgICAgY29uc3QgbWFwcGVkU2VtYW50aWMgPSBtYXBwZWRTZW1hbnRpY3Nbc2VtYW50aWNdO1xuICAgICAgICAgIGNvbnN0IGFjY2Vzc29ySWQgPSBwcmltaXRpdmUuYXR0cmlidXRlc1tzZW1hbnRpY107XG4gICAgICAgICAgaWYgKGRlZmluZWQoYWNjZXNzb3JJZCkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcmltaXRpdmUuYXR0cmlidXRlc1tzZW1hbnRpY107XG4gICAgICAgICAgICBwcmltaXRpdmUuYXR0cmlidXRlc1ttYXBwZWRTZW1hbnRpY10gPSBhY2Nlc3NvcklkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgRm9yRWFjaC50ZWNobmlxdWUoZ2x0ZiwgZnVuY3Rpb24gKHRlY2huaXF1ZSkge1xuICAgIEZvckVhY2gudGVjaG5pcXVlUGFyYW1ldGVyKHRlY2huaXF1ZSwgZnVuY3Rpb24gKHBhcmFtZXRlcikge1xuICAgICAgY29uc3QgbWFwcGVkU2VtYW50aWMgPSBtYXBwZWRTZW1hbnRpY3NbcGFyYW1ldGVyLnNlbWFudGljXTtcbiAgICAgIGlmIChkZWZpbmVkKG1hcHBlZFNlbWFudGljKSkge1xuICAgICAgICBwYXJhbWV0ZXIuc2VtYW50aWMgPSBtYXBwZWRTZW1hbnRpYztcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wQ2FtZXJhUGFyYW1ldGVycyhnbHRmKSB7XG4gIEZvckVhY2guY2FtZXJhKGdsdGYsIGZ1bmN0aW9uIChjYW1lcmEpIHtcbiAgICBjb25zdCBwZXJzcGVjdGl2ZSA9IGNhbWVyYS5wZXJzcGVjdGl2ZTtcbiAgICBpZiAoZGVmaW5lZChwZXJzcGVjdGl2ZSkpIHtcbiAgICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gcGVyc3BlY3RpdmUuYXNwZWN0UmF0aW87XG4gICAgICBpZiAoZGVmaW5lZChhc3BlY3RSYXRpbykgJiYgYXNwZWN0UmF0aW8gPT09IDAuMCkge1xuICAgICAgICBkZWxldGUgcGVyc3BlY3RpdmUuYXNwZWN0UmF0aW87XG4gICAgICB9XG4gICAgICBjb25zdCB5Zm92ID0gcGVyc3BlY3RpdmUueWZvdjtcbiAgICAgIGlmIChkZWZpbmVkKHlmb3YpICYmIHlmb3YgPT09IDAuMCkge1xuICAgICAgICBwZXJzcGVjdGl2ZS55Zm92ID0gMS4wO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVBY2Nlc3NvckJ5dGVTdHJpZGUoZ2x0ZiwgYWNjZXNzb3IpIHtcbiAgcmV0dXJuIGRlZmluZWQoYWNjZXNzb3IuYnl0ZVN0cmlkZSkgJiYgYWNjZXNzb3IuYnl0ZVN0cmlkZSAhPT0gMFxuICAgID8gYWNjZXNzb3IuYnl0ZVN0cmlkZVxuICAgIDogZ2V0QWNjZXNzb3JCeXRlU3RyaWRlKGdsdGYsIGFjY2Vzc29yKTtcbn1cblxuZnVuY3Rpb24gcmVxdWlyZUJ5dGVMZW5ndGgoZ2x0Zikge1xuICBGb3JFYWNoLmJ1ZmZlcihnbHRmLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgaWYgKCFkZWZpbmVkKGJ1ZmZlci5ieXRlTGVuZ3RoKSkge1xuICAgICAgYnVmZmVyLmJ5dGVMZW5ndGggPSBidWZmZXIuZXh0cmFzLl9waXBlbGluZS5zb3VyY2UubGVuZ3RoO1xuICAgIH1cbiAgfSk7XG4gIEZvckVhY2guYWNjZXNzb3IoZ2x0ZiwgZnVuY3Rpb24gKGFjY2Vzc29yKSB7XG4gICAgY29uc3QgYnVmZmVyVmlld0lkID0gYWNjZXNzb3IuYnVmZmVyVmlldztcbiAgICBpZiAoZGVmaW5lZChidWZmZXJWaWV3SWQpKSB7XG4gICAgICBjb25zdCBidWZmZXJWaWV3ID0gZ2x0Zi5idWZmZXJWaWV3c1tidWZmZXJWaWV3SWRdO1xuICAgICAgY29uc3QgYWNjZXNzb3JCeXRlU3RyaWRlID0gY29tcHV0ZUFjY2Vzc29yQnl0ZVN0cmlkZShnbHRmLCBhY2Nlc3Nvcik7XG4gICAgICBjb25zdCBhY2Nlc3NvckJ5dGVFbmQgPVxuICAgICAgICBhY2Nlc3Nvci5ieXRlT2Zmc2V0ICsgYWNjZXNzb3IuY291bnQgKiBhY2Nlc3NvckJ5dGVTdHJpZGU7XG4gICAgICBidWZmZXJWaWV3LmJ5dGVMZW5ndGggPSBNYXRoLm1heChcbiAgICAgICAgZGVmYXVsdFZhbHVlKGJ1ZmZlclZpZXcuYnl0ZUxlbmd0aCwgMCksXG4gICAgICAgIGFjY2Vzc29yQnl0ZUVuZFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtb3ZlQnl0ZVN0cmlkZVRvQnVmZmVyVmlldyhnbHRmKSB7XG4gIGxldCBpO1xuICBsZXQgajtcbiAgbGV0IGJ1ZmZlclZpZXc7XG4gIGNvbnN0IGJ1ZmZlclZpZXdzID0gZ2x0Zi5idWZmZXJWaWV3cztcblxuICBjb25zdCBidWZmZXJWaWV3SGFzVmVydGV4QXR0cmlidXRlcyA9IHt9O1xuICBGb3JFYWNoLmFjY2Vzc29yQ29udGFpbmluZ1ZlcnRleEF0dHJpYnV0ZURhdGEoZ2x0ZiwgZnVuY3Rpb24gKGFjY2Vzc29ySWQpIHtcbiAgICBjb25zdCBhY2Nlc3NvciA9IGdsdGYuYWNjZXNzb3JzW2FjY2Vzc29ySWRdO1xuICAgIGlmIChkZWZpbmVkKGFjY2Vzc29yLmJ1ZmZlclZpZXcpKSB7XG4gICAgICBidWZmZXJWaWV3SGFzVmVydGV4QXR0cmlidXRlc1thY2Nlc3Nvci5idWZmZXJWaWV3XSA9IHRydWU7XG4gICAgfVxuICB9KTtcblxuICAvLyBNYXAgYnVmZmVyIHZpZXdzIHRvIGEgbGlzdCBvZiBhY2Nlc3NvcnNcbiAgY29uc3QgYnVmZmVyVmlld01hcCA9IHt9O1xuICBGb3JFYWNoLmFjY2Vzc29yKGdsdGYsIGZ1bmN0aW9uIChhY2Nlc3Nvcikge1xuICAgIGlmIChkZWZpbmVkKGFjY2Vzc29yLmJ1ZmZlclZpZXcpKSB7XG4gICAgICBidWZmZXJWaWV3TWFwW2FjY2Vzc29yLmJ1ZmZlclZpZXddID0gZGVmYXVsdFZhbHVlKFxuICAgICAgICBidWZmZXJWaWV3TWFwW2FjY2Vzc29yLmJ1ZmZlclZpZXddLFxuICAgICAgICBbXVxuICAgICAgKTtcbiAgICAgIGJ1ZmZlclZpZXdNYXBbYWNjZXNzb3IuYnVmZmVyVmlld10ucHVzaChhY2Nlc3Nvcik7XG4gICAgfVxuICB9KTtcblxuICAvLyBTcGxpdCBhY2Nlc3NvcnMgd2l0aCBkaWZmZXJlbnQgYnl0ZSBzdHJpZGVzXG4gIGZvciAoY29uc3QgYnVmZmVyVmlld0lkIGluIGJ1ZmZlclZpZXdNYXApIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGJ1ZmZlclZpZXdNYXAsIGJ1ZmZlclZpZXdJZCkpIHtcbiAgICAgIGJ1ZmZlclZpZXcgPSBidWZmZXJWaWV3c1tidWZmZXJWaWV3SWRdO1xuICAgICAgY29uc3QgYWNjZXNzb3JzID0gYnVmZmVyVmlld01hcFtidWZmZXJWaWV3SWRdO1xuICAgICAgYWNjZXNzb3JzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEuYnl0ZU9mZnNldCAtIGIuYnl0ZU9mZnNldDtcbiAgICAgIH0pO1xuICAgICAgbGV0IGN1cnJlbnRCeXRlT2Zmc2V0ID0gMDtcbiAgICAgIGxldCBjdXJyZW50SW5kZXggPSAwO1xuICAgICAgY29uc3QgYWNjZXNzb3JzTGVuZ3RoID0gYWNjZXNzb3JzLmxlbmd0aDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBhY2Nlc3NvcnNMZW5ndGg7ICsraSkge1xuICAgICAgICBsZXQgYWNjZXNzb3IgPSBhY2Nlc3NvcnNbaV07XG4gICAgICAgIGNvbnN0IGFjY2Vzc29yQnl0ZVN0cmlkZSA9IGNvbXB1dGVBY2Nlc3NvckJ5dGVTdHJpZGUoZ2x0ZiwgYWNjZXNzb3IpO1xuICAgICAgICBjb25zdCBhY2Nlc3NvckJ5dGVPZmZzZXQgPSBhY2Nlc3Nvci5ieXRlT2Zmc2V0O1xuICAgICAgICBjb25zdCBhY2Nlc3NvckJ5dGVMZW5ndGggPSBhY2Nlc3Nvci5jb3VudCAqIGFjY2Vzc29yQnl0ZVN0cmlkZTtcbiAgICAgICAgZGVsZXRlIGFjY2Vzc29yLmJ5dGVTdHJpZGU7XG5cbiAgICAgICAgY29uc3QgaGFzTmV4dEFjY2Vzc29yID0gaSA8IGFjY2Vzc29yc0xlbmd0aCAtIDE7XG4gICAgICAgIGNvbnN0IG5leHRBY2Nlc3NvckJ5dGVTdHJpZGUgPSBoYXNOZXh0QWNjZXNzb3JcbiAgICAgICAgICA/IGNvbXB1dGVBY2Nlc3NvckJ5dGVTdHJpZGUoZ2x0ZiwgYWNjZXNzb3JzW2kgKyAxXSlcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGFjY2Vzc29yQnl0ZVN0cmlkZSAhPT0gbmV4dEFjY2Vzc29yQnl0ZVN0cmlkZSkge1xuICAgICAgICAgIGNvbnN0IG5ld0J1ZmZlclZpZXcgPSBjbG9uZShidWZmZXJWaWV3LCB0cnVlKTtcbiAgICAgICAgICBpZiAoYnVmZmVyVmlld0hhc1ZlcnRleEF0dHJpYnV0ZXNbYnVmZmVyVmlld0lkXSkge1xuICAgICAgICAgICAgbmV3QnVmZmVyVmlldy5ieXRlU3RyaWRlID0gYWNjZXNzb3JCeXRlU3RyaWRlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdCdWZmZXJWaWV3LmJ5dGVPZmZzZXQgKz0gY3VycmVudEJ5dGVPZmZzZXQ7XG4gICAgICAgICAgbmV3QnVmZmVyVmlldy5ieXRlTGVuZ3RoID1cbiAgICAgICAgICAgIGFjY2Vzc29yQnl0ZU9mZnNldCArIGFjY2Vzc29yQnl0ZUxlbmd0aCAtIGN1cnJlbnRCeXRlT2Zmc2V0O1xuICAgICAgICAgIGNvbnN0IG5ld0J1ZmZlclZpZXdJZCA9IGFkZFRvQXJyYXkoYnVmZmVyVmlld3MsIG5ld0J1ZmZlclZpZXcpO1xuICAgICAgICAgIGZvciAoaiA9IGN1cnJlbnRJbmRleDsgaiA8PSBpOyArK2opIHtcbiAgICAgICAgICAgIGFjY2Vzc29yID0gYWNjZXNzb3JzW2pdO1xuICAgICAgICAgICAgYWNjZXNzb3IuYnVmZmVyVmlldyA9IG5ld0J1ZmZlclZpZXdJZDtcbiAgICAgICAgICAgIGFjY2Vzc29yLmJ5dGVPZmZzZXQgPSBhY2Nlc3Nvci5ieXRlT2Zmc2V0IC0gY3VycmVudEJ5dGVPZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFNldCBjdXJyZW50IGJ5dGUgb2Zmc2V0IHRvIG5leHQgYWNjZXNzb3IncyBieXRlIG9mZnNldFxuICAgICAgICAgIGN1cnJlbnRCeXRlT2Zmc2V0ID0gaGFzTmV4dEFjY2Vzc29yXG4gICAgICAgICAgICA/IGFjY2Vzc29yc1tpICsgMV0uYnl0ZU9mZnNldFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgY3VycmVudEluZGV4ID0gaSArIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZW1vdmUgdW51c2VkIGJ1ZmZlciB2aWV3c1xuICByZW1vdmVVbnVzZWRFbGVtZW50cyhnbHRmLCBbXCJhY2Nlc3NvclwiLCBcImJ1ZmZlclZpZXdcIiwgXCJidWZmZXJcIl0pO1xufVxuXG5mdW5jdGlvbiByZXF1aXJlUG9zaXRpb25BY2Nlc3Nvck1pbk1heChnbHRmKSB7XG4gIEZvckVhY2guYWNjZXNzb3JXaXRoU2VtYW50aWMoZ2x0ZiwgXCJQT1NJVElPTlwiLCBmdW5jdGlvbiAoYWNjZXNzb3JJZCkge1xuICAgIGNvbnN0IGFjY2Vzc29yID0gZ2x0Zi5hY2Nlc3NvcnNbYWNjZXNzb3JJZF07XG4gICAgaWYgKCFkZWZpbmVkKGFjY2Vzc29yLm1pbikgfHwgIWRlZmluZWQoYWNjZXNzb3IubWF4KSkge1xuICAgICAgY29uc3QgbWluTWF4ID0gZmluZEFjY2Vzc29yTWluTWF4KGdsdGYsIGFjY2Vzc29yKTtcbiAgICAgIGFjY2Vzc29yLm1pbiA9IG1pbk1heC5taW47XG4gICAgICBhY2Nlc3Nvci5tYXggPSBtaW5NYXgubWF4O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZUVtcHR5KG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICAoIWRlZmluZWQobm9kZS5jaGlsZHJlbikgfHwgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApICYmXG4gICAgKCFkZWZpbmVkKG5vZGUubWVzaGVzKSB8fCBub2RlLm1lc2hlcy5sZW5ndGggPT09IDApICYmXG4gICAgIWRlZmluZWQobm9kZS5jYW1lcmEpICYmXG4gICAgIWRlZmluZWQobm9kZS5za2luKSAmJlxuICAgICFkZWZpbmVkKG5vZGUuc2tlbGV0b25zKSAmJlxuICAgICFkZWZpbmVkKG5vZGUuam9pbnROYW1lKSAmJlxuICAgICghZGVmaW5lZChub2RlLnRyYW5zbGF0aW9uKSB8fFxuICAgICAgQ2FydGVzaWFuMy5mcm9tQXJyYXkobm9kZS50cmFuc2xhdGlvbikuZXF1YWxzKENhcnRlc2lhbjMuWkVSTykpICYmXG4gICAgKCFkZWZpbmVkKG5vZGUuc2NhbGUpIHx8XG4gICAgICBDYXJ0ZXNpYW4zLmZyb21BcnJheShub2RlLnNjYWxlKS5lcXVhbHMobmV3IENhcnRlc2lhbjMoMS4wLCAxLjAsIDEuMCkpKSAmJlxuICAgICghZGVmaW5lZChub2RlLnJvdGF0aW9uKSB8fFxuICAgICAgQ2FydGVzaWFuNC5mcm9tQXJyYXkobm9kZS5yb3RhdGlvbikuZXF1YWxzKFxuICAgICAgICBuZXcgQ2FydGVzaWFuNCgwLjAsIDAuMCwgMC4wLCAxLjApXG4gICAgICApKSAmJlxuICAgICghZGVmaW5lZChub2RlLm1hdHJpeCkgfHxcbiAgICAgIE1hdHJpeDQuZnJvbUNvbHVtbk1ham9yQXJyYXkobm9kZS5tYXRyaXgpLmVxdWFscyhNYXRyaXg0LklERU5USVRZKSkgJiZcbiAgICAhZGVmaW5lZChub2RlLmV4dGVuc2lvbnMpICYmXG4gICAgIWRlZmluZWQobm9kZS5leHRyYXMpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZU5vZGUoZ2x0Ziwgbm9kZUlkKSB7XG4gIC8vIFJlbW92ZSBmcm9tIGxpc3Qgb2Ygbm9kZXMgaW4gc2NlbmVcbiAgRm9yRWFjaC5zY2VuZShnbHRmLCBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgICBjb25zdCBzY2VuZU5vZGVzID0gc2NlbmUubm9kZXM7XG4gICAgaWYgKGRlZmluZWQoc2NlbmVOb2RlcykpIHtcbiAgICAgIGNvbnN0IHNjZW5lTm9kZXNMZW5ndGggPSBzY2VuZU5vZGVzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSBzY2VuZU5vZGVzTGVuZ3RoOyBpID49IDA7IC0taSkge1xuICAgICAgICBpZiAoc2NlbmVOb2Rlc1tpXSA9PT0gbm9kZUlkKSB7XG4gICAgICAgICAgc2NlbmVOb2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBSZW1vdmUgcGFyZW50IG5vZGUncyByZWZlcmVuY2UgdG8gdGhpcyBub2RlLCBhbmQgZGVsZXRlIHRoZSBwYXJlbnQgaWYgYWxzbyBlbXB0eVxuICBGb3JFYWNoLm5vZGUoZ2x0ZiwgZnVuY3Rpb24gKHBhcmVudE5vZGUsIHBhcmVudE5vZGVJZCkge1xuICAgIGlmIChkZWZpbmVkKHBhcmVudE5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcmVudE5vZGUuY2hpbGRyZW4uaW5kZXhPZihub2RlSWQpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICAgIGlmIChpc05vZGVFbXB0eShwYXJlbnROb2RlKSkge1xuICAgICAgICAgIGRlbGV0ZU5vZGUoZ2x0ZiwgcGFyZW50Tm9kZUlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgZGVsZXRlIGdsdGYubm9kZXNbbm9kZUlkXTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRW1wdHlOb2RlcyhnbHRmKSB7XG4gIEZvckVhY2gubm9kZShnbHRmLCBmdW5jdGlvbiAobm9kZSwgbm9kZUlkKSB7XG4gICAgaWYgKGlzTm9kZUVtcHR5KG5vZGUpKSB7XG4gICAgICBkZWxldGVOb2RlKGdsdGYsIG5vZGVJZCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZ2x0Zjtcbn1cblxuZnVuY3Rpb24gcmVxdWlyZUFuaW1hdGlvbkFjY2Vzc29yTWluTWF4KGdsdGYpIHtcbiAgRm9yRWFjaC5hbmltYXRpb24oZ2x0ZiwgZnVuY3Rpb24gKGFuaW1hdGlvbikge1xuICAgIEZvckVhY2guYW5pbWF0aW9uU2FtcGxlcihhbmltYXRpb24sIGZ1bmN0aW9uIChzYW1wbGVyKSB7XG4gICAgICBjb25zdCBhY2Nlc3NvciA9IGdsdGYuYWNjZXNzb3JzW3NhbXBsZXIuaW5wdXRdO1xuICAgICAgaWYgKCFkZWZpbmVkKGFjY2Vzc29yLm1pbikgfHwgIWRlZmluZWQoYWNjZXNzb3IubWF4KSkge1xuICAgICAgICBjb25zdCBtaW5NYXggPSBmaW5kQWNjZXNzb3JNaW5NYXgoZ2x0ZiwgYWNjZXNzb3IpO1xuICAgICAgICBhY2Nlc3Nvci5taW4gPSBtaW5NYXgubWluO1xuICAgICAgICBhY2Nlc3Nvci5tYXggPSBtaW5NYXgubWF4O1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2xURjEwdG8yMChnbHRmKSB7XG4gIGdsdGYuYXNzZXQgPSBkZWZhdWx0VmFsdWUoZ2x0Zi5hc3NldCwge30pO1xuICBnbHRmLmFzc2V0LnZlcnNpb24gPSBcIjIuMFwiO1xuICAvLyBtYXRlcmlhbC5pbnN0YW5jZVRlY2huaXF1ZSBwcm9wZXJ0aWVzIHNob3VsZCBiZSBkaXJlY3RseSBvbiB0aGUgbWF0ZXJpYWwuIGluc3RhbmNlVGVjaG5pcXVlIGlzIGEgZ2x0ZiAwLjggcHJvcGVydHkgYnV0IGlzIHNlZW4gaW4gc29tZSAxLjAgbW9kZWxzLlxuICB1cGRhdGVJbnN0YW5jZVRlY2huaXF1ZXMoZ2x0Zik7XG4gIC8vIGFuaW1hdGlvbi5zYW1wbGVycyBub3cgcmVmZXJzIGRpcmVjdGx5IHRvIGFjY2Vzc29ycyBhbmQgYW5pbWF0aW9uLnBhcmFtZXRlcnMgc2hvdWxkIGJlIHJlbW92ZWRcbiAgcmVtb3ZlQW5pbWF0aW9uU2FtcGxlcnNJbmRpcmVjdGlvbihnbHRmKTtcbiAgLy8gUmVtb3ZlIGVtcHR5IG5vZGVzIGFuZCByZS1hc3NpZ24gcmVmZXJlbmNpbmcgaW5kaWNlc1xuICByZW1vdmVFbXB0eU5vZGVzKGdsdGYpO1xuICAvLyBUb3AtbGV2ZWwgb2JqZWN0cyBhcmUgbm93IGFycmF5cyByZWZlcmVuY2VkIGJ5IGluZGV4IGluc3RlYWQgb2YgaWRcbiAgb2JqZWN0c1RvQXJyYXlzKGdsdGYpO1xuICAvLyBBbmltYXRpb24uc2FtcGxlciBvYmplY3RzIGNhbm5vdCBoYXZlIG5hbWVzXG4gIHJlbW92ZUFuaW1hdGlvblNhbXBsZXJOYW1lcyhnbHRmKTtcbiAgLy8gYXNzZXQucHJvZmlsZSBubyBsb25nZXIgZXhpc3RzXG4gIHN0cmlwQXNzZXQoZ2x0Zik7XG4gIC8vIE1vdmUga25vd24gZXh0ZW5zaW9ucyBmcm9tIGV4dGVuc2lvbnNVc2VkIHRvIGV4dGVuc2lvbnNSZXF1aXJlZFxuICByZXF1aXJlS25vd25FeHRlbnNpb25zKGdsdGYpO1xuICAvLyBidWZmZXJWaWV3LmJ5dGVMZW5ndGggYW5kIGJ1ZmZlci5ieXRlTGVuZ3RoIGFyZSByZXF1aXJlZFxuICByZXF1aXJlQnl0ZUxlbmd0aChnbHRmKTtcbiAgLy8gYnl0ZVN0cmlkZSBtb3ZlZCBmcm9tIGFjY2Vzc29yIHRvIGJ1ZmZlclZpZXdcbiAgbW92ZUJ5dGVTdHJpZGVUb0J1ZmZlclZpZXcoZ2x0Zik7XG4gIC8vIGFjY2Vzc29yLm1pbiBhbmQgYWNjZXNzb3IubWF4IG11c3QgYmUgZGVmaW5lZCBmb3IgYWNjZXNzb3JzIGNvbnRhaW5pbmcgUE9TSVRJT04gYXR0cmlidXRlc1xuICByZXF1aXJlUG9zaXRpb25BY2Nlc3Nvck1pbk1heChnbHRmKTtcbiAgLy8gQW4gYW5pbWF0aW9uIHNhbXBsZXIncyBpbnB1dCBhY2Nlc3NvciBtdXN0IGhhdmUgbWluIGFuZCBtYXggcHJvcGVydGllcyBkZWZpbmVkXG4gIHJlcXVpcmVBbmltYXRpb25BY2Nlc3Nvck1pbk1heChnbHRmKTtcbiAgLy8gYnVmZmVyLnR5cGUgaXMgdW5uZWNlc3NhcnkgYW5kIHNob3VsZCBiZSByZW1vdmVkXG4gIHJlbW92ZUJ1ZmZlclR5cGUoZ2x0Zik7XG4gIC8vIFJlbW92ZSBmb3JtYXQsIGludGVybmFsRm9ybWF0LCB0YXJnZXQsIGFuZCB0eXBlXG4gIHJlbW92ZVRleHR1cmVQcm9wZXJ0aWVzKGdsdGYpO1xuICAvLyBURVhDT09SRCBhbmQgQ09MT1IgYXR0cmlidXRlcyBtdXN0IGJlIHdyaXR0ZW4gd2l0aCBhIHNldCBpbmRleCAoVEVYQ09PUkRfIylcbiAgcmVxdWlyZUF0dHJpYnV0ZVNldEluZGV4KGdsdGYpO1xuICAvLyBBZGQgdW5kZXJzY29yZXMgdG8gYXBwbGljYXRpb24tc3BlY2lmaWMgcGFyYW1ldGVyc1xuICB1bmRlcnNjb3JlQXBwbGljYXRpb25TcGVjaWZpY1NlbWFudGljcyhnbHRmKTtcbiAgLy8gQWNjZXNzb3JzIHJlZmVyZW5jZWQgYnkgSk9JTlRTXzAgYW5kIFdFSUdIVFNfMCBhdHRyaWJ1dGVzIG11c3QgaGF2ZSBjb3JyZWN0IGNvbXBvbmVudCB0eXBlc1xuICB1cGRhdGVBY2Nlc3NvckNvbXBvbmVudFR5cGVzKGdsdGYpO1xuICAvLyBDbGFtcCBjYW1lcmEgcGFyYW1ldGVyc1xuICBjbGFtcENhbWVyYVBhcmFtZXRlcnMoZ2x0Zik7XG4gIC8vIE1vdmUgbGVnYWN5IHRlY2huaXF1ZSByZW5kZXIgc3RhdGVzIHRvIG1hdGVyaWFsIHByb3BlcnRpZXMgYW5kIGFkZCBLSFJfYmxlbmQgZXh0ZW5zaW9uIGJsZW5kaW5nIGZ1bmN0aW9uc1xuICBtb3ZlVGVjaG5pcXVlUmVuZGVyU3RhdGVzKGdsdGYpO1xuICAvLyBBZGQgbWF0ZXJpYWwgdGVjaG5pcXVlcyB0byBLSFJfdGVjaG5pcXVlc193ZWJnbCBleHRlbnNpb24sIHJlbW92aW5nIHNoYWRlcnMsIHByb2dyYW1zLCBhbmQgdGVjaG5pcXVlc1xuICBtb3ZlVGVjaG5pcXVlc1RvRXh0ZW5zaW9uKGdsdGYpO1xuICAvLyBSZW1vdmUgZW1wdHkgYXJyYXlzXG4gIHJlbW92ZUVtcHR5QXJyYXlzKGdsdGYpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1cGRhdGVWZXJzaW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6186\n')},29745:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82982);\n\n\n/**\n * Checks whether the glTF uses the given extension.\n *\n * @param {Object} gltf A javascript object containing a glTF asset.\n * @param {String} extension The name of the extension.\n * @returns {Boolean} Whether the glTF uses the given extension.\n *\n * @private\n */\nfunction usesExtension(gltf, extension) {\n  return (\n    (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(gltf.extensionsUsed) && gltf.extensionsUsed.indexOf(extension) >= 0\n  );\n}\n\n/* harmony default export */ __webpack_exports__["Z"] = (usesExtension);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjk3NDUuanMiLCJtYXBwaW5ncyI6IjtBQUE0Qzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscUVBQU87QUFDWDtBQUNBOztBQUVBLHlEQUFlLGFBQWEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmUGlwZWxpbmUvdXNlc0V4dGVuc2lvbi5qcz9iZTU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi8uLi9Db3JlL2RlZmluZWQuanNcIjtcblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgZ2xURiB1c2VzIHRoZSBnaXZlbiBleHRlbnNpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGdsdGYgQSBqYXZhc2NyaXB0IG9iamVjdCBjb250YWluaW5nIGEgZ2xURiBhc3NldC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBleHRlbnNpb24gVGhlIG5hbWUgb2YgdGhlIGV4dGVuc2lvbi5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIHRoZSBnbFRGIHVzZXMgdGhlIGdpdmVuIGV4dGVuc2lvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1c2VzRXh0ZW5zaW9uKGdsdGYsIGV4dGVuc2lvbikge1xuICByZXR1cm4gKFxuICAgIGRlZmluZWQoZ2x0Zi5leHRlbnNpb25zVXNlZCkgJiYgZ2x0Zi5leHRlbnNpb25zVXNlZC5pbmRleE9mKGV4dGVuc2lvbikgPj0gMFxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VzRXh0ZW5zaW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///29745\n')},31129:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ GltfTextureLoader; }\n/* harmony export */ });\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66553);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99417);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(82982);\n/* harmony import */ var _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(38443);\n/* harmony import */ var _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8743);\n/* harmony import */ var _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(80188);\n/* harmony import */ var _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(88453);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(13222);\n/* harmony import */ var _GltfLoaderUtil_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(61120);\n/* harmony import */ var _JobType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(92454);\n/* harmony import */ var _ResourceLoader_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29789);\n/* harmony import */ var _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(89356);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Loads a glTF texture.\n * <p>\n * Implements the {@link ResourceLoader} interface.\n * </p>\n *\n * @alias GltfTextureLoader\n * @constructor\n * @augments ResourceLoader\n *\n * @param {Object} options Object with the following properties:\n * @param {ResourceCache} options.resourceCache The {@link ResourceCache} (to avoid circular dependencies).\n * @param {Object} options.gltf The glTF JSON.\n * @param {Object} options.textureInfo The texture info object.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {SupportedImageFormats} options.supportedImageFormats The supported image formats.\n * @param {String} [options.cacheKey] The cache key of the resource.\n * @param {Boolean} [options.asynchronous=true] Determines if WebGL resource creation will be spread out over several frames or block until all WebGL resources are created.\n *\n * @private\n */\nfunction GltfTextureLoader(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var resourceCache = options.resourceCache;\n  var gltf = options.gltf;\n  var textureInfo = options.textureInfo;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var supportedImageFormats = options.supportedImageFormats;\n  var cacheKey = options.cacheKey;\n  var asynchronous = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.asynchronous, true);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.func */ .Z.typeOf.func("options.resourceCache", resourceCache);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.textureInfo", textureInfo);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("options.supportedImageFormats", supportedImageFormats);\n  //>>includeEnd(\'debug\');\n\n  var textureId = textureInfo.index;\n\n  // imageId is guaranteed to be defined otherwise the GltfTextureLoader\n  // wouldn\'t have been created\n  var imageId = _GltfLoaderUtil_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].getImageIdFromTexture */ .Z.getImageIdFromTexture({\n    gltf: gltf,\n    textureId: textureId,\n    supportedImageFormats: supportedImageFormats,\n  });\n\n  this._resourceCache = resourceCache;\n  this._gltf = gltf;\n  this._textureInfo = textureInfo;\n  this._imageId = imageId;\n  this._gltfResource = gltfResource;\n  this._baseResource = baseResource;\n  this._cacheKey = cacheKey;\n  this._asynchronous = asynchronous;\n  this._imageLoader = undefined;\n  this._image = undefined;\n  this._mipLevels = undefined;\n  this._texture = undefined;\n  this._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].UNLOADED */ .Z.UNLOADED;\n  this._promise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].defer */ .Z.defer();\n}\n\nif ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(Object.create)) {\n  GltfTextureLoader.prototype = Object.create(_ResourceLoader_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].prototype */ .Z.prototype);\n  GltfTextureLoader.prototype.constructor = GltfTextureLoader;\n}\n\nObject.defineProperties(GltfTextureLoader.prototype, {\n  /**\n   * A promise that resolves to the resource when the resource is ready.\n   *\n   * @memberof GltfTextureLoader.prototype\n   *\n   * @type {Promise.<GltfTextureLoader>}\n   * @readonly\n   * @private\n   */\n  promise: {\n    get: function () {\n      return this._promise.promise;\n    },\n  },\n  /**\n   * The cache key of the resource.\n   *\n   * @memberof GltfTextureLoader.prototype\n   *\n   * @type {String}\n   * @readonly\n   * @private\n   */\n  cacheKey: {\n    get: function () {\n      return this._cacheKey;\n    },\n  },\n  /**\n   * The texture.\n   *\n   * @memberof GltfTextureLoader.prototype\n   *\n   * @type {Texture}\n   * @readonly\n   * @private\n   */\n  texture: {\n    get: function () {\n      return this._texture;\n    },\n  },\n});\n\n/**\n * Loads the resource.\n * @private\n */\nGltfTextureLoader.prototype.load = function () {\n  var resourceCache = this._resourceCache;\n  var imageLoader = resourceCache.loadImage({\n    gltf: this._gltf,\n    imageId: this._imageId,\n    gltfResource: this._gltfResource,\n    baseResource: this._baseResource,\n  });\n\n  this._imageLoader = imageLoader;\n  this._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LOADING */ .Z.LOADING;\n\n  var that = this;\n\n  imageLoader.promise\n    .then(function () {\n      if (that.isDestroyed()) {\n        return;\n      }\n      // Now wait for process() to run to finish loading\n      that._image = imageLoader.image;\n      that._mipLevels = imageLoader.mipLevels;\n      that._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].PROCESSING */ .Z.PROCESSING;\n    })\n    .otherwise(function (error) {\n      if (that.isDestroyed()) {\n        return;\n      }\n      that.unload();\n      that._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].FAILED */ .Z.FAILED;\n      var errorMessage = "Failed to load texture";\n      that._promise.reject(that.getError(errorMessage, error));\n    });\n};\n\nfunction CreateTextureJob() {\n  this.gltf = undefined;\n  this.textureInfo = undefined;\n  this.image = undefined;\n  this.context = undefined;\n  this.texture = undefined;\n}\n\nCreateTextureJob.prototype.set = function (\n  gltf,\n  textureInfo,\n  image,\n  mipLevels,\n  context\n) {\n  this.gltf = gltf;\n  this.textureInfo = textureInfo;\n  this.image = image;\n  this.mipLevels = mipLevels;\n  this.context = context;\n};\n\nCreateTextureJob.prototype.execute = function () {\n  this.texture = createTexture(\n    this.gltf,\n    this.textureInfo,\n    this.image,\n    this.mipLevels,\n    this.context\n  );\n};\n\nfunction resizeImageToNextPowerOfTwo(image) {\n  var canvas = document.createElement("canvas");\n  canvas.width = _Core_Math_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].nextPowerOfTwo */ .Z.nextPowerOfTwo(image.width);\n  canvas.height = _Core_Math_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].nextPowerOfTwo */ .Z.nextPowerOfTwo(image.height);\n  var canvasContext = canvas.getContext("2d");\n  canvasContext.drawImage(\n    image,\n    0,\n    0,\n    image.width,\n    image.height,\n    0,\n    0,\n    canvas.width,\n    canvas.height\n  );\n  return canvas;\n}\n\nfunction createTexture(gltf, textureInfo, image, mipLevels, context) {\n  // internalFormat is only defined for CompressedTextureBuffer\n  var internalFormat = image.internalFormat;\n\n  var compressedTextureNoMipmap = false;\n  if (_Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isCompressedFormat */ .Z.isCompressedFormat(internalFormat) && !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(mipLevels)) {\n    compressedTextureNoMipmap = true;\n  }\n\n  var sampler = _GltfLoaderUtil_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].createSampler */ .Z.createSampler({\n    gltf: gltf,\n    textureInfo: textureInfo,\n    compressedTextureNoMipmap: compressedTextureNoMipmap,\n  });\n\n  var minFilter = sampler.minificationFilter;\n  var wrapS = sampler.wrapS;\n  var wrapT = sampler.wrapT;\n\n  var samplerRequiresMipmap =\n    minFilter === _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].NEAREST_MIPMAP_NEAREST */ .Z.NEAREST_MIPMAP_NEAREST ||\n    minFilter === _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].NEAREST_MIPMAP_LINEAR */ .Z.NEAREST_MIPMAP_LINEAR ||\n    minFilter === _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].LINEAR_MIPMAP_NEAREST */ .Z.LINEAR_MIPMAP_NEAREST ||\n    minFilter === _Renderer_TextureMinificationFilter_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].LINEAR_MIPMAP_LINEAR */ .Z.LINEAR_MIPMAP_LINEAR;\n\n  // generateMipmap is disallowed for compressed textures. Compressed textures\n  // can have mipmaps but they must come with the KTX2 instead of generated by\n  // WebGL. Also note from the KHR_texture_basisu spec:\n  //\n  //   When a texture refers to a sampler with mipmap minification or when the\n  //   sampler is undefined, the KTX2 image SHOULD contain a full mip pyramid.\n  //\n  var generateMipmap = !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(internalFormat) && samplerRequiresMipmap;\n\n  // WebGL 1 requires power-of-two texture dimensions for mipmapping and REPEAT/MIRRORED_REPEAT wrap modes.\n  var requiresPowerOfTwo =\n    generateMipmap ||\n    wrapS === _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].REPEAT */ .Z.REPEAT ||\n    wrapS === _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MIRRORED_REPEAT */ .Z.MIRRORED_REPEAT ||\n    wrapT === _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].REPEAT */ .Z.REPEAT ||\n    wrapT === _Renderer_TextureWrap_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].MIRRORED_REPEAT */ .Z.MIRRORED_REPEAT;\n\n  var nonPowerOfTwo =\n    !_Core_Math_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isPowerOfTwo */ .Z.isPowerOfTwo(image.width) ||\n    !_Core_Math_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isPowerOfTwo */ .Z.isPowerOfTwo(image.height);\n\n  var requiresResize = requiresPowerOfTwo && nonPowerOfTwo;\n\n  var texture;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(internalFormat)) {\n    if (\n      !context.webgl2 &&\n      _Core_PixelFormat_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isCompressedFormat */ .Z.isCompressedFormat(internalFormat) &&\n      nonPowerOfTwo &&\n      requiresPowerOfTwo\n    ) {\n      console.warn(\n        "Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly."\n      );\n    }\n\n    texture = _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].create */ .Z.create({\n      context: context,\n      source: {\n        arrayBufferView: image.bufferView, // Only defined for CompressedTextureBuffer\n        mipLevels: mipLevels,\n      },\n      width: image.width,\n      height: image.height,\n      pixelFormat: image.internalFormat, // Only defined for CompressedTextureBuffer\n      sampler: sampler,\n    });\n  } else {\n    if (requiresResize) {\n      image = resizeImageToNextPowerOfTwo(image);\n    }\n    texture = _Renderer_Texture_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].create */ .Z.create({\n      context: context,\n      source: image,\n      sampler: sampler,\n      flipY: false,\n      skipColorSpaceConversion: true,\n    });\n  }\n\n  if (generateMipmap) {\n    texture.generateMipmap();\n  }\n\n  return texture;\n}\n\nvar scratchTextureJob = new CreateTextureJob();\n\n/**\n * Processes the resource until it becomes ready.\n *\n * @param {FrameState} frameState The frame state.\n * @private\n */\nGltfTextureLoader.prototype.process = function (frameState) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"].typeOf.object */ .Z.typeOf.object("frameState", frameState);\n  //>>includeEnd(\'debug\');\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._texture)) {\n    // Already created texture\n    return;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._image)) {\n    // Not ready to create texture\n    return;\n  }\n\n  var texture;\n\n  if (this._asynchronous) {\n    var textureJob = scratchTextureJob;\n    textureJob.set(\n      this._gltf,\n      this._textureInfo,\n      this._image,\n      this._mipLevels,\n      frameState.context\n    );\n    var jobScheduler = frameState.jobScheduler;\n    if (!jobScheduler.execute(textureJob, _JobType_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].TEXTURE */ .Z.TEXTURE)) {\n      // Job scheduler is full. Try again next frame.\n      return;\n    }\n    texture = textureJob.texture;\n  } else {\n    texture = createTexture(\n      this._gltf,\n      this._textureInfo,\n      this._image,\n      this._mipLevels,\n      frameState.context\n    );\n  }\n\n  // Unload everything except the texture\n  this.unload();\n\n  this._texture = texture;\n  this._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].READY */ .Z.READY;\n  this._promise.resolve(this);\n};\n\n/**\n * Unloads the resource.\n * @private\n */\nGltfTextureLoader.prototype.unload = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._texture)) {\n    this._texture.destroy();\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(this._imageLoader)) {\n    this._resourceCache.unload(this._imageLoader);\n  }\n\n  this._imageLoader = undefined;\n  this._image = undefined;\n  this._mipLevels = undefined;\n  this._texture = undefined;\n  this._gltf = undefined;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnVlMy13ZWJwYWNrNS8uL25vZGVfbW9kdWxlcy9jZXNpdW0vU291cmNlL1NjZW5lL0dsdGZUZXh0dXJlTG9hZGVyLmpzPzI3NGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENoZWNrIGZyb20gXCIuLi9Db3JlL0NoZWNrLmpzXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwiLi4vQ29yZS9NYXRoLmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IFBpeGVsRm9ybWF0IGZyb20gXCIuLi9Db3JlL1BpeGVsRm9ybWF0LmpzXCI7XG5pbXBvcnQgVGV4dHVyZSBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZS5qc1wiO1xuaW1wb3J0IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIgZnJvbSBcIi4uL1JlbmRlcmVyL1RleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuanNcIjtcbmltcG9ydCBUZXh0dXJlV3JhcCBmcm9tIFwiLi4vUmVuZGVyZXIvVGV4dHVyZVdyYXAuanNcIjtcbmltcG9ydCB3aGVuIGZyb20gXCIuLi9UaGlyZFBhcnR5L3doZW4uanNcIjtcbmltcG9ydCBHbHRmTG9hZGVyVXRpbCBmcm9tIFwiLi9HbHRmTG9hZGVyVXRpbC5qc1wiO1xuaW1wb3J0IEpvYlR5cGUgZnJvbSBcIi4vSm9iVHlwZS5qc1wiO1xuaW1wb3J0IFJlc291cmNlTG9hZGVyIGZyb20gXCIuL1Jlc291cmNlTG9hZGVyLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2VMb2FkZXJTdGF0ZSBmcm9tIFwiLi9SZXNvdXJjZUxvYWRlclN0YXRlLmpzXCI7XG5cbi8qKlxuICogTG9hZHMgYSBnbFRGIHRleHR1cmUuXG4gKiA8cD5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBSZXNvdXJjZUxvYWRlcn0gaW50ZXJmYWNlLlxuICogPC9wPlxuICpcbiAqIEBhbGlhcyBHbHRmVGV4dHVyZUxvYWRlclxuICogQGNvbnN0cnVjdG9yXG4gKiBAYXVnbWVudHMgUmVzb3VyY2VMb2FkZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKiBAcGFyYW0ge1Jlc291cmNlQ2FjaGV9IG9wdGlvbnMucmVzb3VyY2VDYWNoZSBUaGUge0BsaW5rIFJlc291cmNlQ2FjaGV9ICh0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXMpLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZ2x0ZiBUaGUgZ2xURiBKU09OLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMudGV4dHVyZUluZm8gVGhlIHRleHR1cmUgaW5mbyBvYmplY3QuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmdsdGZSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSBjb250YWluaW5nIHRoZSBnbFRGLlxuICogQHBhcmFtIHtSZXNvdXJjZX0gb3B0aW9ucy5iYXNlUmVzb3VyY2UgVGhlIHtAbGluayBSZXNvdXJjZX0gdGhhdCBwYXRocyBpbiB0aGUgZ2xURiBKU09OIGFyZSByZWxhdGl2ZSB0by5cbiAqIEBwYXJhbSB7U3VwcG9ydGVkSW1hZ2VGb3JtYXRzfSBvcHRpb25zLnN1cHBvcnRlZEltYWdlRm9ybWF0cyBUaGUgc3VwcG9ydGVkIGltYWdlIGZvcm1hdHMuXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuY2FjaGVLZXldIFRoZSBjYWNoZSBrZXkgb2YgdGhlIHJlc291cmNlLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hc3luY2hyb25vdXM9dHJ1ZV0gRGV0ZXJtaW5lcyBpZiBXZWJHTCByZXNvdXJjZSBjcmVhdGlvbiB3aWxsIGJlIHNwcmVhZCBvdXQgb3ZlciBzZXZlcmFsIGZyYW1lcyBvciBibG9jayB1bnRpbCBhbGwgV2ViR0wgcmVzb3VyY2VzIGFyZSBjcmVhdGVkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdsdGZUZXh0dXJlTG9hZGVyKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIHJlc291cmNlQ2FjaGUgPSBvcHRpb25zLnJlc291cmNlQ2FjaGU7XG4gIHZhciBnbHRmID0gb3B0aW9ucy5nbHRmO1xuICB2YXIgdGV4dHVyZUluZm8gPSBvcHRpb25zLnRleHR1cmVJbmZvO1xuICB2YXIgZ2x0ZlJlc291cmNlID0gb3B0aW9ucy5nbHRmUmVzb3VyY2U7XG4gIHZhciBiYXNlUmVzb3VyY2UgPSBvcHRpb25zLmJhc2VSZXNvdXJjZTtcbiAgdmFyIHN1cHBvcnRlZEltYWdlRm9ybWF0cyA9IG9wdGlvbnMuc3VwcG9ydGVkSW1hZ2VGb3JtYXRzO1xuICB2YXIgY2FjaGVLZXkgPSBvcHRpb25zLmNhY2hlS2V5O1xuICB2YXIgYXN5bmNocm9ub3VzID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuYXN5bmNocm9ub3VzLCB0cnVlKTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBDaGVjay50eXBlT2YuZnVuYyhcIm9wdGlvbnMucmVzb3VyY2VDYWNoZVwiLCByZXNvdXJjZUNhY2hlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuZ2x0ZlwiLCBnbHRmKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMudGV4dHVyZUluZm9cIiwgdGV4dHVyZUluZm8pO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmUmVzb3VyY2VcIiwgZ2x0ZlJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuYmFzZVJlc291cmNlXCIsIGJhc2VSZXNvdXJjZSk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJvcHRpb25zLnN1cHBvcnRlZEltYWdlRm9ybWF0c1wiLCBzdXBwb3J0ZWRJbWFnZUZvcm1hdHMpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgdGV4dHVyZUlkID0gdGV4dHVyZUluZm8uaW5kZXg7XG5cbiAgLy8gaW1hZ2VJZCBpcyBndWFyYW50ZWVkIHRvIGJlIGRlZmluZWQgb3RoZXJ3aXNlIHRoZSBHbHRmVGV4dHVyZUxvYWRlclxuICAvLyB3b3VsZG4ndCBoYXZlIGJlZW4gY3JlYXRlZFxuICB2YXIgaW1hZ2VJZCA9IEdsdGZMb2FkZXJVdGlsLmdldEltYWdlSWRGcm9tVGV4dHVyZSh7XG4gICAgZ2x0ZjogZ2x0ZixcbiAgICB0ZXh0dXJlSWQ6IHRleHR1cmVJZCxcbiAgICBzdXBwb3J0ZWRJbWFnZUZvcm1hdHM6IHN1cHBvcnRlZEltYWdlRm9ybWF0cyxcbiAgfSk7XG5cbiAgdGhpcy5fcmVzb3VyY2VDYWNoZSA9IHJlc291cmNlQ2FjaGU7XG4gIHRoaXMuX2dsdGYgPSBnbHRmO1xuICB0aGlzLl90ZXh0dXJlSW5mbyA9IHRleHR1cmVJbmZvO1xuICB0aGlzLl9pbWFnZUlkID0gaW1hZ2VJZDtcbiAgdGhpcy5fZ2x0ZlJlc291cmNlID0gZ2x0ZlJlc291cmNlO1xuICB0aGlzLl9iYXNlUmVzb3VyY2UgPSBiYXNlUmVzb3VyY2U7XG4gIHRoaXMuX2NhY2hlS2V5ID0gY2FjaGVLZXk7XG4gIHRoaXMuX2FzeW5jaHJvbm91cyA9IGFzeW5jaHJvbm91cztcbiAgdGhpcy5faW1hZ2VMb2FkZXIgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2ltYWdlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9taXBMZXZlbHMgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3RleHR1cmUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3N0YXRlID0gUmVzb3VyY2VMb2FkZXJTdGF0ZS5VTkxPQURFRDtcbiAgdGhpcy5fcHJvbWlzZSA9IHdoZW4uZGVmZXIoKTtcbn1cblxuaWYgKGRlZmluZWQoT2JqZWN0LmNyZWF0ZSkpIHtcbiAgR2x0ZlRleHR1cmVMb2FkZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZXNvdXJjZUxvYWRlci5wcm90b3R5cGUpO1xuICBHbHRmVGV4dHVyZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHbHRmVGV4dHVyZUxvYWRlcjtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR2x0ZlRleHR1cmVMb2FkZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgcmVzb3VyY2Ugd2hlbiB0aGUgcmVzb3VyY2UgaXMgcmVhZHkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHbHRmVGV4dHVyZUxvYWRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge1Byb21pc2UuPEdsdGZUZXh0dXJlTG9hZGVyPn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZS5wcm9taXNlO1xuICAgIH0sXG4gIH0sXG4gIC8qKlxuICAgKiBUaGUgY2FjaGUga2V5IG9mIHRoZSByZXNvdXJjZS5cbiAgICpcbiAgICogQG1lbWJlcm9mIEdsdGZUZXh0dXJlTG9hZGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhY2hlS2V5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2FjaGVLZXk7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIFRoZSB0ZXh0dXJlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR2x0ZlRleHR1cmVMb2FkZXIucHJvdG90eXBlXG4gICAqXG4gICAqIEB0eXBlIHtUZXh0dXJlfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRleHR1cmU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl90ZXh0dXJlO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBMb2FkcyB0aGUgcmVzb3VyY2UuXG4gKiBAcHJpdmF0ZVxuICovXG5HbHRmVGV4dHVyZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlc291cmNlQ2FjaGUgPSB0aGlzLl9yZXNvdXJjZUNhY2hlO1xuICB2YXIgaW1hZ2VMb2FkZXIgPSByZXNvdXJjZUNhY2hlLmxvYWRJbWFnZSh7XG4gICAgZ2x0ZjogdGhpcy5fZ2x0ZixcbiAgICBpbWFnZUlkOiB0aGlzLl9pbWFnZUlkLFxuICAgIGdsdGZSZXNvdXJjZTogdGhpcy5fZ2x0ZlJlc291cmNlLFxuICAgIGJhc2VSZXNvdXJjZTogdGhpcy5fYmFzZVJlc291cmNlLFxuICB9KTtcblxuICB0aGlzLl9pbWFnZUxvYWRlciA9IGltYWdlTG9hZGVyO1xuICB0aGlzLl9zdGF0ZSA9IFJlc291cmNlTG9hZGVyU3RhdGUuTE9BRElORztcblxuICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgaW1hZ2VMb2FkZXIucHJvbWlzZVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGF0LmlzRGVzdHJveWVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gTm93IHdhaXQgZm9yIHByb2Nlc3MoKSB0byBydW4gdG8gZmluaXNoIGxvYWRpbmdcbiAgICAgIHRoYXQuX2ltYWdlID0gaW1hZ2VMb2FkZXIuaW1hZ2U7XG4gICAgICB0aGF0Ll9taXBMZXZlbHMgPSBpbWFnZUxvYWRlci5taXBMZXZlbHM7XG4gICAgICB0aGF0Ll9zdGF0ZSA9IFJlc291cmNlTG9hZGVyU3RhdGUuUFJPQ0VTU0lORztcbiAgICB9KVxuICAgIC5vdGhlcndpc2UoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAodGhhdC5pc0Rlc3Ryb3llZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoYXQudW5sb2FkKCk7XG4gICAgICB0aGF0Ll9zdGF0ZSA9IFJlc291cmNlTG9hZGVyU3RhdGUuRkFJTEVEO1xuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiRmFpbGVkIHRvIGxvYWQgdGV4dHVyZVwiO1xuICAgICAgdGhhdC5fcHJvbWlzZS5yZWplY3QodGhhdC5nZXRFcnJvcihlcnJvck1lc3NhZ2UsIGVycm9yKSk7XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiBDcmVhdGVUZXh0dXJlSm9iKCkge1xuICB0aGlzLmdsdGYgPSB1bmRlZmluZWQ7XG4gIHRoaXMudGV4dHVyZUluZm8gPSB1bmRlZmluZWQ7XG4gIHRoaXMuaW1hZ2UgPSB1bmRlZmluZWQ7XG4gIHRoaXMuY29udGV4dCA9IHVuZGVmaW5lZDtcbiAgdGhpcy50ZXh0dXJlID0gdW5kZWZpbmVkO1xufVxuXG5DcmVhdGVUZXh0dXJlSm9iLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoXG4gIGdsdGYsXG4gIHRleHR1cmVJbmZvLFxuICBpbWFnZSxcbiAgbWlwTGV2ZWxzLFxuICBjb250ZXh0XG4pIHtcbiAgdGhpcy5nbHRmID0gZ2x0ZjtcbiAgdGhpcy50ZXh0dXJlSW5mbyA9IHRleHR1cmVJbmZvO1xuICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gIHRoaXMubWlwTGV2ZWxzID0gbWlwTGV2ZWxzO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xufTtcblxuQ3JlYXRlVGV4dHVyZUpvYi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50ZXh0dXJlID0gY3JlYXRlVGV4dHVyZShcbiAgICB0aGlzLmdsdGYsXG4gICAgdGhpcy50ZXh0dXJlSW5mbyxcbiAgICB0aGlzLmltYWdlLFxuICAgIHRoaXMubWlwTGV2ZWxzLFxuICAgIHRoaXMuY29udGV4dFxuICApO1xufTtcblxuZnVuY3Rpb24gcmVzaXplSW1hZ2VUb05leHRQb3dlck9mVHdvKGltYWdlKSB7XG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICBjYW52YXMud2lkdGggPSBDZXNpdW1NYXRoLm5leHRQb3dlck9mVHdvKGltYWdlLndpZHRoKTtcbiAgY2FudmFzLmhlaWdodCA9IENlc2l1bU1hdGgubmV4dFBvd2VyT2ZUd28oaW1hZ2UuaGVpZ2h0KTtcbiAgdmFyIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICBjYW52YXNDb250ZXh0LmRyYXdJbWFnZShcbiAgICBpbWFnZSxcbiAgICAwLFxuICAgIDAsXG4gICAgaW1hZ2Uud2lkdGgsXG4gICAgaW1hZ2UuaGVpZ2h0LFxuICAgIDAsXG4gICAgMCxcbiAgICBjYW52YXMud2lkdGgsXG4gICAgY2FudmFzLmhlaWdodFxuICApO1xuICByZXR1cm4gY2FudmFzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUZXh0dXJlKGdsdGYsIHRleHR1cmVJbmZvLCBpbWFnZSwgbWlwTGV2ZWxzLCBjb250ZXh0KSB7XG4gIC8vIGludGVybmFsRm9ybWF0IGlzIG9ubHkgZGVmaW5lZCBmb3IgQ29tcHJlc3NlZFRleHR1cmVCdWZmZXJcbiAgdmFyIGludGVybmFsRm9ybWF0ID0gaW1hZ2UuaW50ZXJuYWxGb3JtYXQ7XG5cbiAgdmFyIGNvbXByZXNzZWRUZXh0dXJlTm9NaXBtYXAgPSBmYWxzZTtcbiAgaWYgKFBpeGVsRm9ybWF0LmlzQ29tcHJlc3NlZEZvcm1hdChpbnRlcm5hbEZvcm1hdCkgJiYgIWRlZmluZWQobWlwTGV2ZWxzKSkge1xuICAgIGNvbXByZXNzZWRUZXh0dXJlTm9NaXBtYXAgPSB0cnVlO1xuICB9XG5cbiAgdmFyIHNhbXBsZXIgPSBHbHRmTG9hZGVyVXRpbC5jcmVhdGVTYW1wbGVyKHtcbiAgICBnbHRmOiBnbHRmLFxuICAgIHRleHR1cmVJbmZvOiB0ZXh0dXJlSW5mbyxcbiAgICBjb21wcmVzc2VkVGV4dHVyZU5vTWlwbWFwOiBjb21wcmVzc2VkVGV4dHVyZU5vTWlwbWFwLFxuICB9KTtcblxuICB2YXIgbWluRmlsdGVyID0gc2FtcGxlci5taW5pZmljYXRpb25GaWx0ZXI7XG4gIHZhciB3cmFwUyA9IHNhbXBsZXIud3JhcFM7XG4gIHZhciB3cmFwVCA9IHNhbXBsZXIud3JhcFQ7XG5cbiAgdmFyIHNhbXBsZXJSZXF1aXJlc01pcG1hcCA9XG4gICAgbWluRmlsdGVyID09PSBUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QgfHxcbiAgICBtaW5GaWx0ZXIgPT09IFRleHR1cmVNaW5pZmljYXRpb25GaWx0ZXIuTkVBUkVTVF9NSVBNQVBfTElORUFSIHx8XG4gICAgbWluRmlsdGVyID09PSBUZXh0dXJlTWluaWZpY2F0aW9uRmlsdGVyLkxJTkVBUl9NSVBNQVBfTkVBUkVTVCB8fFxuICAgIG1pbkZpbHRlciA9PT0gVGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlci5MSU5FQVJfTUlQTUFQX0xJTkVBUjtcblxuICAvLyBnZW5lcmF0ZU1pcG1hcCBpcyBkaXNhbGxvd2VkIGZvciBjb21wcmVzc2VkIHRleHR1cmVzLiBDb21wcmVzc2VkIHRleHR1cmVzXG4gIC8vIGNhbiBoYXZlIG1pcG1hcHMgYnV0IHRoZXkgbXVzdCBjb21lIHdpdGggdGhlIEtUWDIgaW5zdGVhZCBvZiBnZW5lcmF0ZWQgYnlcbiAgLy8gV2ViR0wuIEFsc28gbm90ZSBmcm9tIHRoZSBLSFJfdGV4dHVyZV9iYXNpc3Ugc3BlYzpcbiAgLy9cbiAgLy8gICBXaGVuIGEgdGV4dHVyZSByZWZlcnMgdG8gYSBzYW1wbGVyIHdpdGggbWlwbWFwIG1pbmlmaWNhdGlvbiBvciB3aGVuIHRoZVxuICAvLyAgIHNhbXBsZXIgaXMgdW5kZWZpbmVkLCB0aGUgS1RYMiBpbWFnZSBTSE9VTEQgY29udGFpbiBhIGZ1bGwgbWlwIHB5cmFtaWQuXG4gIC8vXG4gIHZhciBnZW5lcmF0ZU1pcG1hcCA9ICFkZWZpbmVkKGludGVybmFsRm9ybWF0KSAmJiBzYW1wbGVyUmVxdWlyZXNNaXBtYXA7XG5cbiAgLy8gV2ViR0wgMSByZXF1aXJlcyBwb3dlci1vZi10d28gdGV4dHVyZSBkaW1lbnNpb25zIGZvciBtaXBtYXBwaW5nIGFuZCBSRVBFQVQvTUlSUk9SRURfUkVQRUFUIHdyYXAgbW9kZXMuXG4gIHZhciByZXF1aXJlc1Bvd2VyT2ZUd28gPVxuICAgIGdlbmVyYXRlTWlwbWFwIHx8XG4gICAgd3JhcFMgPT09IFRleHR1cmVXcmFwLlJFUEVBVCB8fFxuICAgIHdyYXBTID09PSBUZXh0dXJlV3JhcC5NSVJST1JFRF9SRVBFQVQgfHxcbiAgICB3cmFwVCA9PT0gVGV4dHVyZVdyYXAuUkVQRUFUIHx8XG4gICAgd3JhcFQgPT09IFRleHR1cmVXcmFwLk1JUlJPUkVEX1JFUEVBVDtcblxuICB2YXIgbm9uUG93ZXJPZlR3byA9XG4gICAgIUNlc2l1bU1hdGguaXNQb3dlck9mVHdvKGltYWdlLndpZHRoKSB8fFxuICAgICFDZXNpdW1NYXRoLmlzUG93ZXJPZlR3byhpbWFnZS5oZWlnaHQpO1xuXG4gIHZhciByZXF1aXJlc1Jlc2l6ZSA9IHJlcXVpcmVzUG93ZXJPZlR3byAmJiBub25Qb3dlck9mVHdvO1xuXG4gIHZhciB0ZXh0dXJlO1xuICBpZiAoZGVmaW5lZChpbnRlcm5hbEZvcm1hdCkpIHtcbiAgICBpZiAoXG4gICAgICAhY29udGV4dC53ZWJnbDIgJiZcbiAgICAgIFBpeGVsRm9ybWF0LmlzQ29tcHJlc3NlZEZvcm1hdChpbnRlcm5hbEZvcm1hdCkgJiZcbiAgICAgIG5vblBvd2VyT2ZUd28gJiZcbiAgICAgIHJlcXVpcmVzUG93ZXJPZlR3b1xuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkNvbXByZXNzZWQgdGV4dHVyZSB1c2VzIFJFUEVBVCBvciBNSVJST1JFRF9SRVBFQVQgdGV4dHVyZSB3cmFwIG1vZGUgYW5kIGRpbWVuc2lvbnMgYXJlIG5vdCBwb3dlcnMgb2YgdHdvLiBUaGUgdGV4dHVyZSBtYXkgYmUgcmVuZGVyZWQgaW5jb3JyZWN0bHkuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGV4dHVyZSA9IFRleHR1cmUuY3JlYXRlKHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgYXJyYXlCdWZmZXJWaWV3OiBpbWFnZS5idWZmZXJWaWV3LCAvLyBPbmx5IGRlZmluZWQgZm9yIENvbXByZXNzZWRUZXh0dXJlQnVmZmVyXG4gICAgICAgIG1pcExldmVsczogbWlwTGV2ZWxzLFxuICAgICAgfSxcbiAgICAgIHdpZHRoOiBpbWFnZS53aWR0aCxcbiAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgcGl4ZWxGb3JtYXQ6IGltYWdlLmludGVybmFsRm9ybWF0LCAvLyBPbmx5IGRlZmluZWQgZm9yIENvbXByZXNzZWRUZXh0dXJlQnVmZmVyXG4gICAgICBzYW1wbGVyOiBzYW1wbGVyLFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGlmIChyZXF1aXJlc1Jlc2l6ZSkge1xuICAgICAgaW1hZ2UgPSByZXNpemVJbWFnZVRvTmV4dFBvd2VyT2ZUd28oaW1hZ2UpO1xuICAgIH1cbiAgICB0ZXh0dXJlID0gVGV4dHVyZS5jcmVhdGUoe1xuICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgIHNvdXJjZTogaW1hZ2UsXG4gICAgICBzYW1wbGVyOiBzYW1wbGVyLFxuICAgICAgZmxpcFk6IGZhbHNlLFxuICAgICAgc2tpcENvbG9yU3BhY2VDb252ZXJzaW9uOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGdlbmVyYXRlTWlwbWFwKSB7XG4gICAgdGV4dHVyZS5nZW5lcmF0ZU1pcG1hcCgpO1xuICB9XG5cbiAgcmV0dXJuIHRleHR1cmU7XG59XG5cbnZhciBzY3JhdGNoVGV4dHVyZUpvYiA9IG5ldyBDcmVhdGVUZXh0dXJlSm9iKCk7XG5cbi8qKlxuICogUHJvY2Vzc2VzIHRoZSByZXNvdXJjZSB1bnRpbCBpdCBiZWNvbWVzIHJlYWR5LlxuICpcbiAqIEBwYXJhbSB7RnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBUaGUgZnJhbWUgc3RhdGUuXG4gKiBAcHJpdmF0ZVxuICovXG5HbHRmVGV4dHVyZUxvYWRlci5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJmcmFtZVN0YXRlXCIsIGZyYW1lU3RhdGUpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBpZiAoZGVmaW5lZCh0aGlzLl90ZXh0dXJlKSkge1xuICAgIC8vIEFscmVhZHkgY3JlYXRlZCB0ZXh0dXJlXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX2ltYWdlKSkge1xuICAgIC8vIE5vdCByZWFkeSB0byBjcmVhdGUgdGV4dHVyZVxuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0ZXh0dXJlO1xuXG4gIGlmICh0aGlzLl9hc3luY2hyb25vdXMpIHtcbiAgICB2YXIgdGV4dHVyZUpvYiA9IHNjcmF0Y2hUZXh0dXJlSm9iO1xuICAgIHRleHR1cmVKb2Iuc2V0KFxuICAgICAgdGhpcy5fZ2x0ZixcbiAgICAgIHRoaXMuX3RleHR1cmVJbmZvLFxuICAgICAgdGhpcy5faW1hZ2UsXG4gICAgICB0aGlzLl9taXBMZXZlbHMsXG4gICAgICBmcmFtZVN0YXRlLmNvbnRleHRcbiAgICApO1xuICAgIHZhciBqb2JTY2hlZHVsZXIgPSBmcmFtZVN0YXRlLmpvYlNjaGVkdWxlcjtcbiAgICBpZiAoIWpvYlNjaGVkdWxlci5leGVjdXRlKHRleHR1cmVKb2IsIEpvYlR5cGUuVEVYVFVSRSkpIHtcbiAgICAgIC8vIEpvYiBzY2hlZHVsZXIgaXMgZnVsbC4gVHJ5IGFnYWluIG5leHQgZnJhbWUuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRleHR1cmUgPSB0ZXh0dXJlSm9iLnRleHR1cmU7XG4gIH0gZWxzZSB7XG4gICAgdGV4dHVyZSA9IGNyZWF0ZVRleHR1cmUoXG4gICAgICB0aGlzLl9nbHRmLFxuICAgICAgdGhpcy5fdGV4dHVyZUluZm8sXG4gICAgICB0aGlzLl9pbWFnZSxcbiAgICAgIHRoaXMuX21pcExldmVscyxcbiAgICAgIGZyYW1lU3RhdGUuY29udGV4dFxuICAgICk7XG4gIH1cblxuICAvLyBVbmxvYWQgZXZlcnl0aGluZyBleGNlcHQgdGhlIHRleHR1cmVcbiAgdGhpcy51bmxvYWQoKTtcblxuICB0aGlzLl90ZXh0dXJlID0gdGV4dHVyZTtcbiAgdGhpcy5fc3RhdGUgPSBSZXNvdXJjZUxvYWRlclN0YXRlLlJFQURZO1xuICB0aGlzLl9wcm9taXNlLnJlc29sdmUodGhpcyk7XG59O1xuXG4vKipcbiAqIFVubG9hZHMgdGhlIHJlc291cmNlLlxuICogQHByaXZhdGVcbiAqL1xuR2x0ZlRleHR1cmVMb2FkZXIucHJvdG90eXBlLnVubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRlZmluZWQodGhpcy5fdGV4dHVyZSkpIHtcbiAgICB0aGlzLl90ZXh0dXJlLmRlc3Ryb3koKTtcbiAgfVxuXG4gIGlmIChkZWZpbmVkKHRoaXMuX2ltYWdlTG9hZGVyKSkge1xuICAgIHRoaXMuX3Jlc291cmNlQ2FjaGUudW5sb2FkKHRoaXMuX2ltYWdlTG9hZGVyKTtcbiAgfVxuXG4gIHRoaXMuX2ltYWdlTG9hZGVyID0gdW5kZWZpbmVkO1xuICB0aGlzLl9pbWFnZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fbWlwTGV2ZWxzID0gdW5kZWZpbmVkO1xuICB0aGlzLl90ZXh0dXJlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9nbHRmID0gdW5kZWZpbmVkO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///31129\n')},46398:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Z": function() { return /* binding */ GltfVertexBufferLoader; }\n/* harmony export */ });\n/* harmony import */ var _Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(23401);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99095);\n/* harmony import */ var _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(58597);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13222);\n/* harmony import */ var _AttributeType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(77072);\n/* harmony import */ var _JobType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(92454);\n/* harmony import */ var _ModelComponents_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(7896);\n/* harmony import */ var _ResourceLoader_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29789);\n/* harmony import */ var _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(89356);\n/* harmony import */ var _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(52323);\n/* harmony import */ var _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(84828);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Loads a vertex buffer from a glTF buffer view.\n * <p>\n * Implements the {@link ResourceLoader} interface.\n * </p>\n *\n * @alias GltfVertexBufferLoader\n * @constructor\n * @augments ResourceLoader\n *\n * @param {Object} options Object with the following properties:\n * @param {ResourceCache} options.resourceCache The {@link ResourceCache} (to avoid circular dependencies).\n * @param {Object} options.gltf The glTF JSON.\n * @param {Resource} options.gltfResource The {@link Resource} containing the glTF.\n * @param {Resource} options.baseResource The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {Number} [options.bufferViewId] The bufferView ID corresponding to the vertex buffer.\n * @param {Object} [options.draco] The Draco extension object.\n * @param {String} [options.attributeSemantic] The attribute semantic, e.g. POSITION or NORMAL.\n * @param {String} [options.accessorId] The accessor id.\n * @param {String} [options.cacheKey] The cache key of the resource.\n * @param {Boolean} [options.asynchronous=true] Determines if WebGL resource creation will be spread out over several frames or block until all WebGL resources are created.\n * @param {Boolean} [dequantize=false] Determines whether or not the vertex buffer will be dequantized on the CPU.\n *\n * @exception {DeveloperError} One of options.bufferViewId and options.draco must be defined.\n * @exception {DeveloperError} When options.draco is defined options.attributeSemantic must also be defined.\n * @exception {DeveloperError} When options.draco is defined options.accessorId must also be defined.\n *\n * @private\n */\nfunction GltfVertexBufferLoader(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n  var resourceCache = options.resourceCache;\n  var gltf = options.gltf;\n  var gltfResource = options.gltfResource;\n  var baseResource = options.baseResource;\n  var bufferViewId = options.bufferViewId;\n  var draco = options.draco;\n  var attributeSemantic = options.attributeSemantic;\n  var accessorId = options.accessorId;\n  var cacheKey = options.cacheKey;\n  var asynchronous = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.asynchronous, true);\n  var dequantize = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options.dequantize, false);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.func */ .Z.typeOf.func("options.resourceCache", resourceCache);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltf", gltf);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("options.gltfResource", gltfResource);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("options.baseResource", baseResource);\n\n  var hasBufferViewId = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(bufferViewId);\n  var hasDraco = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(draco);\n  var hasAttributeSemantic = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(attributeSemantic);\n  var hasAccessorId = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(accessorId);\n\n  if (hasBufferViewId === hasDraco) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "One of options.bufferViewId and options.draco must be defined."\n    );\n  }\n\n  if (hasDraco && !hasAttributeSemantic) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "When options.draco is defined options.attributeSemantic must also be defined."\n    );\n  }\n\n  if (hasDraco && !hasAccessorId) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "When options.draco is defined options.accessorId must also be defined."\n    );\n  }\n\n  if (hasDraco) {\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("options.draco", draco);\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.string */ .Z.typeOf.string("options.attributeSemantic", attributeSemantic);\n    _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.number */ .Z.typeOf.number("options.accessorId", accessorId);\n  }\n  //>>includeEnd(\'debug\');\n\n  this._dequantize = dequantize;\n  this._resourceCache = resourceCache;\n  this._gltfResource = gltfResource;\n  this._baseResource = baseResource;\n  this._gltf = gltf;\n  this._bufferViewId = bufferViewId;\n  this._draco = draco;\n  this._attributeSemantic = attributeSemantic;\n  this._accessorId = accessorId;\n  this._cacheKey = cacheKey;\n  this._asynchronous = asynchronous;\n  this._bufferViewLoader = undefined;\n  this._dracoLoader = undefined;\n  this._quantization = undefined;\n  this._typedArray = undefined;\n  this._vertexBuffer = undefined;\n  this._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].UNLOADED */ .Z.UNLOADED;\n  this._promise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].defer */ .Z.defer();\n}\n\nif ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(Object.create)) {\n  GltfVertexBufferLoader.prototype = Object.create(_ResourceLoader_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].prototype */ .Z.prototype);\n  GltfVertexBufferLoader.prototype.constructor = GltfVertexBufferLoader;\n}\n\nObject.defineProperties(GltfVertexBufferLoader.prototype, {\n  /**\n   * A promise that resolves to the resource when the resource is ready.\n   *\n   * @memberof GltfVertexBufferLoader.prototype\n   *\n   * @type {Promise.<GltfVertexBufferLoader>}\n   * @readonly\n   * @private\n   */\n  promise: {\n    get: function () {\n      return this._promise.promise;\n    },\n  },\n  /**\n   * The cache key of the resource.\n   *\n   * @memberof GltfVertexBufferLoader.prototype\n   *\n   * @type {String}\n   * @readonly\n   * @private\n   */\n  cacheKey: {\n    get: function () {\n      return this._cacheKey;\n    },\n  },\n  /**\n   * The vertex buffer.\n   *\n   * @memberof GltfVertexBufferLoader.prototype\n   *\n   * @type {Buffer}\n   * @readonly\n   * @private\n   */\n  vertexBuffer: {\n    get: function () {\n      return this._vertexBuffer;\n    },\n  },\n  /**\n   * Information about the quantized vertex attribute after Draco decode.\n   *\n   * @memberof GltfVertexBufferLoader.prototype\n   *\n   * @type {ModelComponents.Quantization}\n   * @readonly\n   * @private\n   */\n  quantization: {\n    get: function () {\n      return this._quantization;\n    },\n  },\n});\n\n/**\n * Loads the resource.\n * @private\n */\nGltfVertexBufferLoader.prototype.load = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._draco)) {\n    loadFromDraco(this);\n  } else {\n    loadFromBufferView(this);\n  }\n};\n\nfunction getQuantizationInformation(\n  dracoQuantization,\n  componentDatatype,\n  componentCount,\n  type\n) {\n  var quantizationBits = dracoQuantization.quantizationBits;\n  var normalizationRange = (1 << quantizationBits) - 1;\n\n  var quantization = new _ModelComponents_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"].Quantization */ .Z.Quantization();\n  quantization.componentDatatype = componentDatatype;\n  quantization.octEncoded = dracoQuantization.octEncoded;\n  quantization.octEncodedZXY = true;\n  quantization.type = type;\n\n  if (quantization.octEncoded) {\n    quantization.type = _AttributeType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].VEC2 */ .Z.VEC2;\n    quantization.normalizationRange = normalizationRange;\n  } else {\n    var MathType = _AttributeType_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"].getMathType */ .Z.getMathType(type);\n    if (MathType === Number) {\n      quantization.quantizedVolumeOffset = dracoQuantization.minValues[0];\n      quantization.quantizedVolumeDimensions = dracoQuantization.range;\n      quantization.normalizationRange = normalizationRange;\n    } else {\n      quantization.quantizedVolumeOffset = MathType.unpack(\n        dracoQuantization.minValues\n      );\n      quantization.quantizedVolumeDimensions = MathType.unpack(\n        (0,_Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(new Array(componentCount), dracoQuantization.range)\n      );\n      quantization.normalizationRange = MathType.unpack(\n        (0,_Core_arrayFill_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(new Array(componentCount), normalizationRange)\n      );\n    }\n  }\n\n  return quantization;\n}\n\nfunction loadFromDraco(vertexBufferLoader) {\n  var resourceCache = vertexBufferLoader._resourceCache;\n  var dracoLoader = resourceCache.loadDraco({\n    gltf: vertexBufferLoader._gltf,\n    draco: vertexBufferLoader._draco,\n    gltfResource: vertexBufferLoader._gltfResource,\n    baseResource: vertexBufferLoader._baseResource,\n  });\n\n  vertexBufferLoader._dracoLoader = dracoLoader;\n  vertexBufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LOADING */ .Z.LOADING;\n\n  dracoLoader.promise\n    .then(function () {\n      if (vertexBufferLoader.isDestroyed()) {\n        return;\n      }\n      // Get the typed array and quantization information\n      var decodedVertexAttributes = dracoLoader.decodedData.vertexAttributes;\n      var attributeSemantic = vertexBufferLoader._attributeSemantic;\n      var dracoAttribute = decodedVertexAttributes[attributeSemantic];\n      var accessorId = vertexBufferLoader._accessorId;\n      var accessor = vertexBufferLoader._gltf.accessors[accessorId];\n      var type = accessor.type;\n      var typedArray = dracoAttribute.array;\n      var dracoQuantization = dracoAttribute.data.quantization;\n      if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(dracoQuantization)) {\n        vertexBufferLoader._quantization = getQuantizationInformation(\n          dracoQuantization,\n          dracoAttribute.data.componentDatatype,\n          dracoAttribute.data.componentsPerAttribute,\n          type\n        );\n      }\n\n      // Now wait for process() to run to finish loading\n      vertexBufferLoader._typedArray = typedArray;\n      vertexBufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].PROCESSING */ .Z.PROCESSING;\n    })\n    .otherwise(function (error) {\n      if (vertexBufferLoader.isDestroyed()) {\n        return;\n      }\n      handleError(vertexBufferLoader, error);\n    });\n}\n\nfunction loadFromBufferView(vertexBufferLoader) {\n  var resourceCache = vertexBufferLoader._resourceCache;\n  var bufferViewLoader = resourceCache.loadBufferView({\n    gltf: vertexBufferLoader._gltf,\n    bufferViewId: vertexBufferLoader._bufferViewId,\n    gltfResource: vertexBufferLoader._gltfResource,\n    baseResource: vertexBufferLoader._baseResource,\n  });\n  vertexBufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].LOADING */ .Z.LOADING;\n  vertexBufferLoader._bufferViewLoader = bufferViewLoader;\n\n  bufferViewLoader.promise\n    .then(function () {\n      if (vertexBufferLoader.isDestroyed()) {\n        return;\n      }\n      // Now wait for process() to run to finish loading\n      vertexBufferLoader._typedArray = bufferViewLoader.typedArray;\n      vertexBufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].PROCESSING */ .Z.PROCESSING;\n    })\n    .otherwise(function (error) {\n      if (vertexBufferLoader.isDestroyed()) {\n        return;\n      }\n      handleError(vertexBufferLoader, error);\n    });\n}\n\nfunction handleError(vertexBufferLoader, error) {\n  vertexBufferLoader.unload();\n  vertexBufferLoader._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].FAILED */ .Z.FAILED;\n  var errorMessage = "Failed to load vertex buffer";\n  error = vertexBufferLoader.getError(errorMessage, error);\n  vertexBufferLoader._promise.reject(error);\n}\n\nfunction CreateVertexBufferJob() {\n  this.typedArray = undefined;\n  this.dequantize = undefined;\n  this.componentType = undefined;\n  this.type = undefined;\n  this.count = undefined;\n  this.context = undefined;\n  this.vertexBuffer = undefined;\n}\n\nCreateVertexBufferJob.prototype.set = function (\n  typedArray,\n  dequantize,\n  componentType,\n  type,\n  count,\n  context\n) {\n  this.typedArray = typedArray;\n  this.dequantize = dequantize;\n  this.componentType = componentType;\n  this.type = type;\n  this.count = count;\n  this.context = context;\n};\n\nCreateVertexBufferJob.prototype.execute = function () {\n  this.vertexBuffer = createVertexBuffer(\n    this.typedArray,\n    this.dequantize,\n    this.componentType,\n    this.type,\n    this.count,\n    this.context\n  );\n};\n\nfunction createVertexBuffer(\n  typedArray,\n  dequantize,\n  componentType,\n  type,\n  count,\n  context\n) {\n  if (dequantize && componentType !== _Core_ComponentDatatype_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].FLOAT */ .Z.FLOAT) {\n    typedArray = _Core_AttributeCompression_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].dequantize */ .Z.dequantize(\n      typedArray,\n      componentType,\n      type,\n      count\n    );\n  }\n\n  var vertexBuffer = _Renderer_Buffer_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"].createVertexBuffer */ .Z.createVertexBuffer({\n    typedArray: typedArray,\n    context: context,\n    usage: _Renderer_BufferUsage_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"].STATIC_DRAW */ .Z.STATIC_DRAW,\n  });\n  vertexBuffer.vertexArrayDestroyable = false;\n  return vertexBuffer;\n}\n\nvar scratchVertexBufferJob = new CreateVertexBufferJob();\n\n/**\n * Processes the resource until it becomes ready.\n *\n * @param {FrameState} frameState The frame state.\n * @private\n */\nGltfVertexBufferLoader.prototype.process = function (frameState) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].typeOf.object */ .Z.typeOf.object("frameState", frameState);\n  //>>includeEnd(\'debug\');\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._dracoLoader)) {\n    this._dracoLoader.process(frameState);\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._bufferViewLoader)) {\n    this._bufferViewLoader.process(frameState);\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._vertexBuffer)) {\n    // Already created vertex buffer\n    return;\n  }\n\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._typedArray)) {\n    // Not ready to create vertex buffer\n    return;\n  }\n\n  var accessor = this._gltf.accessors[this._accessorId];\n\n  var vertexBuffer;\n\n  if (this._asynchronous) {\n    var vertexBufferJob = scratchVertexBufferJob;\n    vertexBufferJob.set(\n      this._typedArray,\n      this._dequantize,\n      accessor.componentType,\n      accessor.type,\n      accessor.count,\n      frameState.context\n    );\n    var jobScheduler = frameState.jobScheduler;\n    if (!jobScheduler.execute(vertexBufferJob, _JobType_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].BUFFER */ .Z.BUFFER)) {\n      // Job scheduler is full. Try again next frame.\n      return;\n    }\n    vertexBuffer = vertexBufferJob.vertexBuffer;\n  } else {\n    vertexBuffer = createVertexBuffer(\n      this._typedArray,\n      this._dequantize,\n      accessor.componentType,\n      accessor.type,\n      accessor.count,\n      frameState.context\n    );\n  }\n\n  // Unload everything except the vertex buffer\n  this.unload();\n\n  this._vertexBuffer = vertexBuffer;\n  this._state = _ResourceLoaderState_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].READY */ .Z.READY;\n  this._promise.resolve(this);\n};\n\n/**\n * Unloads the resource.\n * @private\n */\nGltfVertexBufferLoader.prototype.unload = function () {\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._vertexBuffer)) {\n    this._vertexBuffer.destroy();\n  }\n\n  var resourceCache = this._resourceCache;\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._bufferViewLoader)) {\n    resourceCache.unload(this._bufferViewLoader);\n  }\n\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(this._dracoLoader)) {\n    resourceCache.unload(this._dracoLoader);\n  }\n\n  this._bufferViewLoader = undefined;\n  this._dracoLoader = undefined;\n  this._typedArray = undefined;\n  this._vertexBuffer = undefined;\n  this._gltf = undefined;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRkFBbUI7QUFDckI7O0FBRUEsTUFBTSxzRUFBTztBQUNiO0FBQ0E7O0FBRUEsTUFBTSxzRUFBTztBQUNiO0FBQ0E7O0FBRUEsTUFBTSxzRUFBTztBQUNiO0FBQ0E7QUFDQTs7QUFFQSxPQUFPLHNFQUFPO0FBQ2Q7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsMEVBQWM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0IscUZBQXlCO0FBQ3pDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0VBQU87QUFDYjtBQUNBOztBQUVBOztBQUVBLE1BQU0sc0VBQU87QUFDYjtBQUNBOztBQUVBLE1BQU0sc0VBQU87QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZTMtd2VicGFjazUvLi9ub2RlX21vZHVsZXMvY2VzaXVtL1NvdXJjZS9TY2VuZS9HbHRmVmVydGV4QnVmZmVyTG9hZGVyLmpzPzE1MzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFycmF5RmlsbCBmcm9tIFwiLi4vQ29yZS9hcnJheUZpbGwuanNcIjtcbmltcG9ydCBDaGVjayBmcm9tIFwiLi4vQ29yZS9DaGVjay5qc1wiO1xuaW1wb3J0IGRlZmF1bHRWYWx1ZSBmcm9tIFwiLi4vQ29yZS9kZWZhdWx0VmFsdWUuanNcIjtcbmltcG9ydCBkZWZpbmVkIGZyb20gXCIuLi9Db3JlL2RlZmluZWQuanNcIjtcbmltcG9ydCBEZXZlbG9wZXJFcnJvciBmcm9tIFwiLi4vQ29yZS9EZXZlbG9wZXJFcnJvci5qc1wiO1xuaW1wb3J0IEJ1ZmZlciBmcm9tIFwiLi4vUmVuZGVyZXIvQnVmZmVyLmpzXCI7XG5pbXBvcnQgQnVmZmVyVXNhZ2UgZnJvbSBcIi4uL1JlbmRlcmVyL0J1ZmZlclVzYWdlLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5pbXBvcnQgQXR0cmlidXRlVHlwZSBmcm9tIFwiLi9BdHRyaWJ1dGVUeXBlLmpzXCI7XG5pbXBvcnQgSm9iVHlwZSBmcm9tIFwiLi9Kb2JUeXBlLmpzXCI7XG5pbXBvcnQgTW9kZWxDb21wb25lbnRzIGZyb20gXCIuL01vZGVsQ29tcG9uZW50cy5qc1wiO1xuaW1wb3J0IFJlc291cmNlTG9hZGVyIGZyb20gXCIuL1Jlc291cmNlTG9hZGVyLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2VMb2FkZXJTdGF0ZSBmcm9tIFwiLi9SZXNvdXJjZUxvYWRlclN0YXRlLmpzXCI7XG5pbXBvcnQgQXR0cmlidXRlQ29tcHJlc3Npb24gZnJvbSBcIi4uL0NvcmUvQXR0cmlidXRlQ29tcHJlc3Npb24uanNcIjtcbmltcG9ydCBDb21wb25lbnREYXRhdHlwZSBmcm9tIFwiLi4vQ29yZS9Db21wb25lbnREYXRhdHlwZS5qc1wiO1xuXG4vKipcbiAqIExvYWRzIGEgdmVydGV4IGJ1ZmZlciBmcm9tIGEgZ2xURiBidWZmZXIgdmlldy5cbiAqIDxwPlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIFJlc291cmNlTG9hZGVyfSBpbnRlcmZhY2UuXG4gKiA8L3A+XG4gKlxuICogQGFsaWFzIEdsdGZWZXJ0ZXhCdWZmZXJMb2FkZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQGF1Z21lbnRzIFJlc291cmNlTG9hZGVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogQHBhcmFtIHtSZXNvdXJjZUNhY2hlfSBvcHRpb25zLnJlc291cmNlQ2FjaGUgVGhlIHtAbGluayBSZXNvdXJjZUNhY2hlfSAodG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLmdsdGYgVGhlIGdsVEYgSlNPTi5cbiAqIEBwYXJhbSB7UmVzb3VyY2V9IG9wdGlvbnMuZ2x0ZlJlc291cmNlIFRoZSB7QGxpbmsgUmVzb3VyY2V9IGNvbnRhaW5pbmcgdGhlIGdsVEYuXG4gKiBAcGFyYW0ge1Jlc291cmNlfSBvcHRpb25zLmJhc2VSZXNvdXJjZSBUaGUge0BsaW5rIFJlc291cmNlfSB0aGF0IHBhdGhzIGluIHRoZSBnbFRGIEpTT04gYXJlIHJlbGF0aXZlIHRvLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmJ1ZmZlclZpZXdJZF0gVGhlIGJ1ZmZlclZpZXcgSUQgY29ycmVzcG9uZGluZyB0byB0aGUgdmVydGV4IGJ1ZmZlci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5kcmFjb10gVGhlIERyYWNvIGV4dGVuc2lvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYXR0cmlidXRlU2VtYW50aWNdIFRoZSBhdHRyaWJ1dGUgc2VtYW50aWMsIGUuZy4gUE9TSVRJT04gb3IgTk9STUFMLlxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmFjY2Vzc29ySWRdIFRoZSBhY2Nlc3NvciBpZC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5jYWNoZUtleV0gVGhlIGNhY2hlIGtleSBvZiB0aGUgcmVzb3VyY2UuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFzeW5jaHJvbm91cz10cnVlXSBEZXRlcm1pbmVzIGlmIFdlYkdMIHJlc291cmNlIGNyZWF0aW9uIHdpbGwgYmUgc3ByZWFkIG91dCBvdmVyIHNldmVyYWwgZnJhbWVzIG9yIGJsb2NrIHVudGlsIGFsbCBXZWJHTCByZXNvdXJjZXMgYXJlIGNyZWF0ZWQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtkZXF1YW50aXplPWZhbHNlXSBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRoZSB2ZXJ0ZXggYnVmZmVyIHdpbGwgYmUgZGVxdWFudGl6ZWQgb24gdGhlIENQVS5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gT25lIG9mIG9wdGlvbnMuYnVmZmVyVmlld0lkIGFuZCBvcHRpb25zLmRyYWNvIG11c3QgYmUgZGVmaW5lZC5cbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBXaGVuIG9wdGlvbnMuZHJhY28gaXMgZGVmaW5lZCBvcHRpb25zLmF0dHJpYnV0ZVNlbWFudGljIG11c3QgYWxzbyBiZSBkZWZpbmVkLlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFdoZW4gb3B0aW9ucy5kcmFjbyBpcyBkZWZpbmVkIG9wdGlvbnMuYWNjZXNzb3JJZCBtdXN0IGFsc28gYmUgZGVmaW5lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHbHRmVmVydGV4QnVmZmVyTG9hZGVyKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgdmFyIHJlc291cmNlQ2FjaGUgPSBvcHRpb25zLnJlc291cmNlQ2FjaGU7XG4gIHZhciBnbHRmID0gb3B0aW9ucy5nbHRmO1xuICB2YXIgZ2x0ZlJlc291cmNlID0gb3B0aW9ucy5nbHRmUmVzb3VyY2U7XG4gIHZhciBiYXNlUmVzb3VyY2UgPSBvcHRpb25zLmJhc2VSZXNvdXJjZTtcbiAgdmFyIGJ1ZmZlclZpZXdJZCA9IG9wdGlvbnMuYnVmZmVyVmlld0lkO1xuICB2YXIgZHJhY28gPSBvcHRpb25zLmRyYWNvO1xuICB2YXIgYXR0cmlidXRlU2VtYW50aWMgPSBvcHRpb25zLmF0dHJpYnV0ZVNlbWFudGljO1xuICB2YXIgYWNjZXNzb3JJZCA9IG9wdGlvbnMuYWNjZXNzb3JJZDtcbiAgdmFyIGNhY2hlS2V5ID0gb3B0aW9ucy5jYWNoZUtleTtcbiAgdmFyIGFzeW5jaHJvbm91cyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmFzeW5jaHJvbm91cywgdHJ1ZSk7XG4gIHZhciBkZXF1YW50aXplID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZGVxdWFudGl6ZSwgZmFsc2UpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5mdW5jKFwib3B0aW9ucy5yZXNvdXJjZUNhY2hlXCIsIHJlc291cmNlQ2FjaGUpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmXCIsIGdsdGYpO1xuICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5nbHRmUmVzb3VyY2VcIiwgZ2x0ZlJlc291cmNlKTtcbiAgQ2hlY2sudHlwZU9mLm9iamVjdChcIm9wdGlvbnMuYmFzZVJlc291cmNlXCIsIGJhc2VSZXNvdXJjZSk7XG5cbiAgdmFyIGhhc0J1ZmZlclZpZXdJZCA9IGRlZmluZWQoYnVmZmVyVmlld0lkKTtcbiAgdmFyIGhhc0RyYWNvID0gZGVmaW5lZChkcmFjbyk7XG4gIHZhciBoYXNBdHRyaWJ1dGVTZW1hbnRpYyA9IGRlZmluZWQoYXR0cmlidXRlU2VtYW50aWMpO1xuICB2YXIgaGFzQWNjZXNzb3JJZCA9IGRlZmluZWQoYWNjZXNzb3JJZCk7XG5cbiAgaWYgKGhhc0J1ZmZlclZpZXdJZCA9PT0gaGFzRHJhY28pIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIk9uZSBvZiBvcHRpb25zLmJ1ZmZlclZpZXdJZCBhbmQgb3B0aW9ucy5kcmFjbyBtdXN0IGJlIGRlZmluZWQuXCJcbiAgICApO1xuICB9XG5cbiAgaWYgKGhhc0RyYWNvICYmICFoYXNBdHRyaWJ1dGVTZW1hbnRpYykge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiV2hlbiBvcHRpb25zLmRyYWNvIGlzIGRlZmluZWQgb3B0aW9ucy5hdHRyaWJ1dGVTZW1hbnRpYyBtdXN0IGFsc28gYmUgZGVmaW5lZC5cIlxuICAgICk7XG4gIH1cblxuICBpZiAoaGFzRHJhY28gJiYgIWhhc0FjY2Vzc29ySWQpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcIldoZW4gb3B0aW9ucy5kcmFjbyBpcyBkZWZpbmVkIG9wdGlvbnMuYWNjZXNzb3JJZCBtdXN0IGFsc28gYmUgZGVmaW5lZC5cIlxuICAgICk7XG4gIH1cblxuICBpZiAoaGFzRHJhY28pIHtcbiAgICBDaGVjay50eXBlT2Yub2JqZWN0KFwib3B0aW9ucy5kcmFjb1wiLCBkcmFjbyk7XG4gICAgQ2hlY2sudHlwZU9mLnN0cmluZyhcIm9wdGlvbnMuYXR0cmlidXRlU2VtYW50aWNcIiwgYXR0cmlidXRlU2VtYW50aWMpO1xuICAgIENoZWNrLnR5cGVPZi5udW1iZXIoXCJvcHRpb25zLmFjY2Vzc29ySWRcIiwgYWNjZXNzb3JJZCk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdGhpcy5fZGVxdWFudGl6ZSA9IGRlcXVhbnRpemU7XG4gIHRoaXMuX3Jlc291cmNlQ2FjaGUgPSByZXNvdXJjZUNhY2hlO1xuICB0aGlzLl9nbHRmUmVzb3VyY2UgPSBnbHRmUmVzb3VyY2U7XG4gIHRoaXMuX2Jhc2VSZXNvdXJjZSA9IGJhc2VSZXNvdXJjZTtcbiAgdGhpcy5fZ2x0ZiA9IGdsdGY7XG4gIHRoaXMuX2J1ZmZlclZpZXdJZCA9IGJ1ZmZlclZpZXdJZDtcbiAgdGhpcy5fZHJhY28gPSBkcmFjbztcbiAgdGhpcy5fYXR0cmlidXRlU2VtYW50aWMgPSBhdHRyaWJ1dGVTZW1hbnRpYztcbiAgdGhpcy5fYWNjZXNzb3JJZCA9IGFjY2Vzc29ySWQ7XG4gIHRoaXMuX2NhY2hlS2V5ID0gY2FjaGVLZXk7XG4gIHRoaXMuX2FzeW5jaHJvbm91cyA9IGFzeW5jaHJvbm91cztcbiAgdGhpcy5fYnVmZmVyVmlld0xvYWRlciA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZHJhY29Mb2FkZXIgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3F1YW50aXphdGlvbiA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdHlwZWRBcnJheSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdmVydGV4QnVmZmVyID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zdGF0ZSA9IFJlc291cmNlTG9hZGVyU3RhdGUuVU5MT0FERUQ7XG4gIHRoaXMuX3Byb21pc2UgPSB3aGVuLmRlZmVyKCk7XG59XG5cbmlmIChkZWZpbmVkKE9iamVjdC5jcmVhdGUpKSB7XG4gIEdsdGZWZXJ0ZXhCdWZmZXJMb2FkZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZXNvdXJjZUxvYWRlci5wcm90b3R5cGUpO1xuICBHbHRmVmVydGV4QnVmZmVyTG9hZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdsdGZWZXJ0ZXhCdWZmZXJMb2FkZXI7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdsdGZWZXJ0ZXhCdWZmZXJMb2FkZXIucHJvdG90eXBlLCB7XG4gIC8qKlxuICAgKiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgcmVzb3VyY2Ugd2hlbiB0aGUgcmVzb3VyY2UgaXMgcmVhZHkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHbHRmVmVydGV4QnVmZmVyTG9hZGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7UHJvbWlzZS48R2x0ZlZlcnRleEJ1ZmZlckxvYWRlcj59XG4gICAqIEByZWFkb25seVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2UucHJvbWlzZTtcbiAgICB9LFxuICB9LFxuICAvKipcbiAgICogVGhlIGNhY2hlIGtleSBvZiB0aGUgcmVzb3VyY2UuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHbHRmVmVydGV4QnVmZmVyTG9hZGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhY2hlS2V5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2FjaGVLZXk7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIFRoZSB2ZXJ0ZXggYnVmZmVyLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgR2x0ZlZlcnRleEJ1ZmZlckxvYWRlci5wcm90b3R5cGVcbiAgICpcbiAgICogQHR5cGUge0J1ZmZlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB2ZXJ0ZXhCdWZmZXI6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl92ZXJ0ZXhCdWZmZXI7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBxdWFudGl6ZWQgdmVydGV4IGF0dHJpYnV0ZSBhZnRlciBEcmFjbyBkZWNvZGUuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBHbHRmVmVydGV4QnVmZmVyTG9hZGVyLnByb3RvdHlwZVxuICAgKlxuICAgKiBAdHlwZSB7TW9kZWxDb21wb25lbnRzLlF1YW50aXphdGlvbn1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBxdWFudGl6YXRpb246IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9xdWFudGl6YXRpb247XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIExvYWRzIHRoZSByZXNvdXJjZS5cbiAqIEBwcml2YXRlXG4gKi9cbkdsdGZWZXJ0ZXhCdWZmZXJMb2FkZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChkZWZpbmVkKHRoaXMuX2RyYWNvKSkge1xuICAgIGxvYWRGcm9tRHJhY28odGhpcyk7XG4gIH0gZWxzZSB7XG4gICAgbG9hZEZyb21CdWZmZXJWaWV3KHRoaXMpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBnZXRRdWFudGl6YXRpb25JbmZvcm1hdGlvbihcbiAgZHJhY29RdWFudGl6YXRpb24sXG4gIGNvbXBvbmVudERhdGF0eXBlLFxuICBjb21wb25lbnRDb3VudCxcbiAgdHlwZVxuKSB7XG4gIHZhciBxdWFudGl6YXRpb25CaXRzID0gZHJhY29RdWFudGl6YXRpb24ucXVhbnRpemF0aW9uQml0cztcbiAgdmFyIG5vcm1hbGl6YXRpb25SYW5nZSA9ICgxIDw8IHF1YW50aXphdGlvbkJpdHMpIC0gMTtcblxuICB2YXIgcXVhbnRpemF0aW9uID0gbmV3IE1vZGVsQ29tcG9uZW50cy5RdWFudGl6YXRpb24oKTtcbiAgcXVhbnRpemF0aW9uLmNvbXBvbmVudERhdGF0eXBlID0gY29tcG9uZW50RGF0YXR5cGU7XG4gIHF1YW50aXphdGlvbi5vY3RFbmNvZGVkID0gZHJhY29RdWFudGl6YXRpb24ub2N0RW5jb2RlZDtcbiAgcXVhbnRpemF0aW9uLm9jdEVuY29kZWRaWFkgPSB0cnVlO1xuICBxdWFudGl6YXRpb24udHlwZSA9IHR5cGU7XG5cbiAgaWYgKHF1YW50aXphdGlvbi5vY3RFbmNvZGVkKSB7XG4gICAgcXVhbnRpemF0aW9uLnR5cGUgPSBBdHRyaWJ1dGVUeXBlLlZFQzI7XG4gICAgcXVhbnRpemF0aW9uLm5vcm1hbGl6YXRpb25SYW5nZSA9IG5vcm1hbGl6YXRpb25SYW5nZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgTWF0aFR5cGUgPSBBdHRyaWJ1dGVUeXBlLmdldE1hdGhUeXBlKHR5cGUpO1xuICAgIGlmIChNYXRoVHlwZSA9PT0gTnVtYmVyKSB7XG4gICAgICBxdWFudGl6YXRpb24ucXVhbnRpemVkVm9sdW1lT2Zmc2V0ID0gZHJhY29RdWFudGl6YXRpb24ubWluVmFsdWVzWzBdO1xuICAgICAgcXVhbnRpemF0aW9uLnF1YW50aXplZFZvbHVtZURpbWVuc2lvbnMgPSBkcmFjb1F1YW50aXphdGlvbi5yYW5nZTtcbiAgICAgIHF1YW50aXphdGlvbi5ub3JtYWxpemF0aW9uUmFuZ2UgPSBub3JtYWxpemF0aW9uUmFuZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1YW50aXphdGlvbi5xdWFudGl6ZWRWb2x1bWVPZmZzZXQgPSBNYXRoVHlwZS51bnBhY2soXG4gICAgICAgIGRyYWNvUXVhbnRpemF0aW9uLm1pblZhbHVlc1xuICAgICAgKTtcbiAgICAgIHF1YW50aXphdGlvbi5xdWFudGl6ZWRWb2x1bWVEaW1lbnNpb25zID0gTWF0aFR5cGUudW5wYWNrKFxuICAgICAgICBhcnJheUZpbGwobmV3IEFycmF5KGNvbXBvbmVudENvdW50KSwgZHJhY29RdWFudGl6YXRpb24ucmFuZ2UpXG4gICAgICApO1xuICAgICAgcXVhbnRpemF0aW9uLm5vcm1hbGl6YXRpb25SYW5nZSA9IE1hdGhUeXBlLnVucGFjayhcbiAgICAgICAgYXJyYXlGaWxsKG5ldyBBcnJheShjb21wb25lbnRDb3VudCksIG5vcm1hbGl6YXRpb25SYW5nZSlcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHF1YW50aXphdGlvbjtcbn1cblxuZnVuY3Rpb24gbG9hZEZyb21EcmFjbyh2ZXJ0ZXhCdWZmZXJMb2FkZXIpIHtcbiAgdmFyIHJlc291cmNlQ2FjaGUgPSB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX3Jlc291cmNlQ2FjaGU7XG4gIHZhciBkcmFjb0xvYWRlciA9IHJlc291cmNlQ2FjaGUubG9hZERyYWNvKHtcbiAgICBnbHRmOiB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX2dsdGYsXG4gICAgZHJhY286IHZlcnRleEJ1ZmZlckxvYWRlci5fZHJhY28sXG4gICAgZ2x0ZlJlc291cmNlOiB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX2dsdGZSZXNvdXJjZSxcbiAgICBiYXNlUmVzb3VyY2U6IHZlcnRleEJ1ZmZlckxvYWRlci5fYmFzZVJlc291cmNlLFxuICB9KTtcblxuICB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX2RyYWNvTG9hZGVyID0gZHJhY29Mb2FkZXI7XG4gIHZlcnRleEJ1ZmZlckxvYWRlci5fc3RhdGUgPSBSZXNvdXJjZUxvYWRlclN0YXRlLkxPQURJTkc7XG5cbiAgZHJhY29Mb2FkZXIucHJvbWlzZVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh2ZXJ0ZXhCdWZmZXJMb2FkZXIuaXNEZXN0cm95ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBHZXQgdGhlIHR5cGVkIGFycmF5IGFuZCBxdWFudGl6YXRpb24gaW5mb3JtYXRpb25cbiAgICAgIHZhciBkZWNvZGVkVmVydGV4QXR0cmlidXRlcyA9IGRyYWNvTG9hZGVyLmRlY29kZWREYXRhLnZlcnRleEF0dHJpYnV0ZXM7XG4gICAgICB2YXIgYXR0cmlidXRlU2VtYW50aWMgPSB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX2F0dHJpYnV0ZVNlbWFudGljO1xuICAgICAgdmFyIGRyYWNvQXR0cmlidXRlID0gZGVjb2RlZFZlcnRleEF0dHJpYnV0ZXNbYXR0cmlidXRlU2VtYW50aWNdO1xuICAgICAgdmFyIGFjY2Vzc29ySWQgPSB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX2FjY2Vzc29ySWQ7XG4gICAgICB2YXIgYWNjZXNzb3IgPSB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX2dsdGYuYWNjZXNzb3JzW2FjY2Vzc29ySWRdO1xuICAgICAgdmFyIHR5cGUgPSBhY2Nlc3Nvci50eXBlO1xuICAgICAgdmFyIHR5cGVkQXJyYXkgPSBkcmFjb0F0dHJpYnV0ZS5hcnJheTtcbiAgICAgIHZhciBkcmFjb1F1YW50aXphdGlvbiA9IGRyYWNvQXR0cmlidXRlLmRhdGEucXVhbnRpemF0aW9uO1xuICAgICAgaWYgKGRlZmluZWQoZHJhY29RdWFudGl6YXRpb24pKSB7XG4gICAgICAgIHZlcnRleEJ1ZmZlckxvYWRlci5fcXVhbnRpemF0aW9uID0gZ2V0UXVhbnRpemF0aW9uSW5mb3JtYXRpb24oXG4gICAgICAgICAgZHJhY29RdWFudGl6YXRpb24sXG4gICAgICAgICAgZHJhY29BdHRyaWJ1dGUuZGF0YS5jb21wb25lbnREYXRhdHlwZSxcbiAgICAgICAgICBkcmFjb0F0dHJpYnV0ZS5kYXRhLmNvbXBvbmVudHNQZXJBdHRyaWJ1dGUsXG4gICAgICAgICAgdHlwZVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBOb3cgd2FpdCBmb3IgcHJvY2VzcygpIHRvIHJ1biB0byBmaW5pc2ggbG9hZGluZ1xuICAgICAgdmVydGV4QnVmZmVyTG9hZGVyLl90eXBlZEFycmF5ID0gdHlwZWRBcnJheTtcbiAgICAgIHZlcnRleEJ1ZmZlckxvYWRlci5fc3RhdGUgPSBSZXNvdXJjZUxvYWRlclN0YXRlLlBST0NFU1NJTkc7XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKHZlcnRleEJ1ZmZlckxvYWRlci5pc0Rlc3Ryb3llZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGhhbmRsZUVycm9yKHZlcnRleEJ1ZmZlckxvYWRlciwgZXJyb3IpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkRnJvbUJ1ZmZlclZpZXcodmVydGV4QnVmZmVyTG9hZGVyKSB7XG4gIHZhciByZXNvdXJjZUNhY2hlID0gdmVydGV4QnVmZmVyTG9hZGVyLl9yZXNvdXJjZUNhY2hlO1xuICB2YXIgYnVmZmVyVmlld0xvYWRlciA9IHJlc291cmNlQ2FjaGUubG9hZEJ1ZmZlclZpZXcoe1xuICAgIGdsdGY6IHZlcnRleEJ1ZmZlckxvYWRlci5fZ2x0ZixcbiAgICBidWZmZXJWaWV3SWQ6IHZlcnRleEJ1ZmZlckxvYWRlci5fYnVmZmVyVmlld0lkLFxuICAgIGdsdGZSZXNvdXJjZTogdmVydGV4QnVmZmVyTG9hZGVyLl9nbHRmUmVzb3VyY2UsXG4gICAgYmFzZVJlc291cmNlOiB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX2Jhc2VSZXNvdXJjZSxcbiAgfSk7XG4gIHZlcnRleEJ1ZmZlckxvYWRlci5fc3RhdGUgPSBSZXNvdXJjZUxvYWRlclN0YXRlLkxPQURJTkc7XG4gIHZlcnRleEJ1ZmZlckxvYWRlci5fYnVmZmVyVmlld0xvYWRlciA9IGJ1ZmZlclZpZXdMb2FkZXI7XG5cbiAgYnVmZmVyVmlld0xvYWRlci5wcm9taXNlXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHZlcnRleEJ1ZmZlckxvYWRlci5pc0Rlc3Ryb3llZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIE5vdyB3YWl0IGZvciBwcm9jZXNzKCkgdG8gcnVuIHRvIGZpbmlzaCBsb2FkaW5nXG4gICAgICB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX3R5cGVkQXJyYXkgPSBidWZmZXJWaWV3TG9hZGVyLnR5cGVkQXJyYXk7XG4gICAgICB2ZXJ0ZXhCdWZmZXJMb2FkZXIuX3N0YXRlID0gUmVzb3VyY2VMb2FkZXJTdGF0ZS5QUk9DRVNTSU5HO1xuICAgIH0pXG4gICAgLm90aGVyd2lzZShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmICh2ZXJ0ZXhCdWZmZXJMb2FkZXIuaXNEZXN0cm95ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBoYW5kbGVFcnJvcih2ZXJ0ZXhCdWZmZXJMb2FkZXIsIGVycm9yKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXJyb3IodmVydGV4QnVmZmVyTG9hZGVyLCBlcnJvcikge1xuICB2ZXJ0ZXhCdWZmZXJMb2FkZXIudW5sb2FkKCk7XG4gIHZlcnRleEJ1ZmZlckxvYWRlci5fc3RhdGUgPSBSZXNvdXJjZUxvYWRlclN0YXRlLkZBSUxFRDtcbiAgdmFyIGVycm9yTWVzc2FnZSA9IFwiRmFpbGVkIHRvIGxvYWQgdmVydGV4IGJ1ZmZlclwiO1xuICBlcnJvciA9IHZlcnRleEJ1ZmZlckxvYWRlci5nZXRFcnJvcihlcnJvck1lc3NhZ2UsIGVycm9yKTtcbiAgdmVydGV4QnVmZmVyTG9hZGVyLl9wcm9taXNlLnJlamVjdChlcnJvcik7XG59XG5cbmZ1bmN0aW9uIENyZWF0ZVZlcnRleEJ1ZmZlckpvYigpIHtcbiAgdGhpcy50eXBlZEFycmF5ID0gdW5kZWZpbmVkO1xuICB0aGlzLmRlcXVhbnRpemUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuY29tcG9uZW50VHlwZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy50eXBlID0gdW5kZWZpbmVkO1xuICB0aGlzLmNvdW50ID0gdW5kZWZpbmVkO1xuICB0aGlzLmNvbnRleHQgPSB1bmRlZmluZWQ7XG4gIHRoaXMudmVydGV4QnVmZmVyID0gdW5kZWZpbmVkO1xufVxuXG5DcmVhdGVWZXJ0ZXhCdWZmZXJKb2IucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChcbiAgdHlwZWRBcnJheSxcbiAgZGVxdWFudGl6ZSxcbiAgY29tcG9uZW50VHlwZSxcbiAgdHlwZSxcbiAgY291bnQsXG4gIGNvbnRleHRcbikge1xuICB0aGlzLnR5cGVkQXJyYXkgPSB0eXBlZEFycmF5O1xuICB0aGlzLmRlcXVhbnRpemUgPSBkZXF1YW50aXplO1xuICB0aGlzLmNvbXBvbmVudFR5cGUgPSBjb21wb25lbnRUeXBlO1xuICB0aGlzLnR5cGUgPSB0eXBlO1xuICB0aGlzLmNvdW50ID0gY291bnQ7XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG59O1xuXG5DcmVhdGVWZXJ0ZXhCdWZmZXJKb2IucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudmVydGV4QnVmZmVyID0gY3JlYXRlVmVydGV4QnVmZmVyKFxuICAgIHRoaXMudHlwZWRBcnJheSxcbiAgICB0aGlzLmRlcXVhbnRpemUsXG4gICAgdGhpcy5jb21wb25lbnRUeXBlLFxuICAgIHRoaXMudHlwZSxcbiAgICB0aGlzLmNvdW50LFxuICAgIHRoaXMuY29udGV4dFxuICApO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlVmVydGV4QnVmZmVyKFxuICB0eXBlZEFycmF5LFxuICBkZXF1YW50aXplLFxuICBjb21wb25lbnRUeXBlLFxuICB0eXBlLFxuICBjb3VudCxcbiAgY29udGV4dFxuKSB7XG4gIGlmIChkZXF1YW50aXplICYmIGNvbXBvbmVudFR5cGUgIT09IENvbXBvbmVudERhdGF0eXBlLkZMT0FUKSB7XG4gICAgdHlwZWRBcnJheSA9IEF0dHJpYnV0ZUNvbXByZXNzaW9uLmRlcXVhbnRpemUoXG4gICAgICB0eXBlZEFycmF5LFxuICAgICAgY29tcG9uZW50VHlwZSxcbiAgICAgIHR5cGUsXG4gICAgICBjb3VudFxuICAgICk7XG4gIH1cblxuICB2YXIgdmVydGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XG4gICAgdHlwZWRBcnJheTogdHlwZWRBcnJheSxcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyxcbiAgfSk7XG4gIHZlcnRleEJ1ZmZlci52ZXJ0ZXhBcnJheURlc3Ryb3lhYmxlID0gZmFsc2U7XG4gIHJldHVybiB2ZXJ0ZXhCdWZmZXI7XG59XG5cbnZhciBzY3JhdGNoVmVydGV4QnVmZmVySm9iID0gbmV3IENyZWF0ZVZlcnRleEJ1ZmZlckpvYigpO1xuXG4vKipcbiAqIFByb2Nlc3NlcyB0aGUgcmVzb3VyY2UgdW50aWwgaXQgYmVjb21lcyByZWFkeS5cbiAqXG4gKiBAcGFyYW0ge0ZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgVGhlIGZyYW1lIHN0YXRlLlxuICogQHByaXZhdGVcbiAqL1xuR2x0ZlZlcnRleEJ1ZmZlckxvYWRlci5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIENoZWNrLnR5cGVPZi5vYmplY3QoXCJmcmFtZVN0YXRlXCIsIGZyYW1lU3RhdGUpO1xuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICBpZiAoZGVmaW5lZCh0aGlzLl9kcmFjb0xvYWRlcikpIHtcbiAgICB0aGlzLl9kcmFjb0xvYWRlci5wcm9jZXNzKGZyYW1lU3RhdGUpO1xuICB9XG5cbiAgaWYgKGRlZmluZWQodGhpcy5fYnVmZmVyVmlld0xvYWRlcikpIHtcbiAgICB0aGlzLl9idWZmZXJWaWV3TG9hZGVyLnByb2Nlc3MoZnJhbWVTdGF0ZSk7XG4gIH1cblxuICBpZiAoZGVmaW5lZCh0aGlzLl92ZXJ0ZXhCdWZmZXIpKSB7XG4gICAgLy8gQWxyZWFkeSBjcmVhdGVkIHZlcnRleCBidWZmZXJcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIWRlZmluZWQodGhpcy5fdHlwZWRBcnJheSkpIHtcbiAgICAvLyBOb3QgcmVhZHkgdG8gY3JlYXRlIHZlcnRleCBidWZmZXJcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYWNjZXNzb3IgPSB0aGlzLl9nbHRmLmFjY2Vzc29yc1t0aGlzLl9hY2Nlc3NvcklkXTtcblxuICB2YXIgdmVydGV4QnVmZmVyO1xuXG4gIGlmICh0aGlzLl9hc3luY2hyb25vdXMpIHtcbiAgICB2YXIgdmVydGV4QnVmZmVySm9iID0gc2NyYXRjaFZlcnRleEJ1ZmZlckpvYjtcbiAgICB2ZXJ0ZXhCdWZmZXJKb2Iuc2V0KFxuICAgICAgdGhpcy5fdHlwZWRBcnJheSxcbiAgICAgIHRoaXMuX2RlcXVhbnRpemUsXG4gICAgICBhY2Nlc3Nvci5jb21wb25lbnRUeXBlLFxuICAgICAgYWNjZXNzb3IudHlwZSxcbiAgICAgIGFjY2Vzc29yLmNvdW50LFxuICAgICAgZnJhbWVTdGF0ZS5jb250ZXh0XG4gICAgKTtcbiAgICB2YXIgam9iU2NoZWR1bGVyID0gZnJhbWVTdGF0ZS5qb2JTY2hlZHVsZXI7XG4gICAgaWYgKCFqb2JTY2hlZHVsZXIuZXhlY3V0ZSh2ZXJ0ZXhCdWZmZXJKb2IsIEpvYlR5cGUuQlVGRkVSKSkge1xuICAgICAgLy8gSm9iIHNjaGVkdWxlciBpcyBmdWxsLiBUcnkgYWdhaW4gbmV4dCBmcmFtZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmVydGV4QnVmZmVyID0gdmVydGV4QnVmZmVySm9iLnZlcnRleEJ1ZmZlcjtcbiAgfSBlbHNlIHtcbiAgICB2ZXJ0ZXhCdWZmZXIgPSBjcmVhdGVWZXJ0ZXhCdWZmZXIoXG4gICAgICB0aGlzLl90eXBlZEFycmF5LFxuICAgICAgdGhpcy5fZGVxdWFudGl6ZSxcbiAgICAgIGFjY2Vzc29yLmNvbXBvbmVudFR5cGUsXG4gICAgICBhY2Nlc3Nvci50eXBlLFxuICAgICAgYWNjZXNzb3IuY291bnQsXG4gICAgICBmcmFtZVN0YXRlLmNvbnRleHRcbiAgICApO1xuICB9XG5cbiAgLy8gVW5sb2FkIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSB2ZXJ0ZXggYnVmZmVyXG4gIHRoaXMudW5sb2FkKCk7XG5cbiAgdGhpcy5fdmVydGV4QnVmZmVyID0gdmVydGV4QnVmZmVyO1xuICB0aGlzLl9zdGF0ZSA9IFJlc291cmNlTG9hZGVyU3RhdGUuUkVBRFk7XG4gIHRoaXMuX3Byb21pc2UucmVzb2x2ZSh0aGlzKTtcbn07XG5cbi8qKlxuICogVW5sb2FkcyB0aGUgcmVzb3VyY2UuXG4gKiBAcHJpdmF0ZVxuICovXG5HbHRmVmVydGV4QnVmZmVyTG9hZGVyLnByb3RvdHlwZS51bmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChkZWZpbmVkKHRoaXMuX3ZlcnRleEJ1ZmZlcikpIHtcbiAgICB0aGlzLl92ZXJ0ZXhCdWZmZXIuZGVzdHJveSgpO1xuICB9XG5cbiAgdmFyIHJlc291cmNlQ2FjaGUgPSB0aGlzLl9yZXNvdXJjZUNhY2hlO1xuXG4gIGlmIChkZWZpbmVkKHRoaXMuX2J1ZmZlclZpZXdMb2FkZXIpKSB7XG4gICAgcmVzb3VyY2VDYWNoZS51bmxvYWQodGhpcy5fYnVmZmVyVmlld0xvYWRlcik7XG4gIH1cblxuICBpZiAoZGVmaW5lZCh0aGlzLl9kcmFjb0xvYWRlcikpIHtcbiAgICByZXNvdXJjZUNhY2hlLnVubG9hZCh0aGlzLl9kcmFjb0xvYWRlcik7XG4gIH1cblxuICB0aGlzLl9idWZmZXJWaWV3TG9hZGVyID0gdW5kZWZpbmVkO1xuICB0aGlzLl9kcmFjb0xvYWRlciA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdHlwZWRBcnJheSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fdmVydGV4QnVmZmVyID0gdW5kZWZpbmVkO1xuICB0aGlzLl9nbHRmID0gdW5kZWZpbmVkO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///46398\n')},85365:function(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_Credit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52975);\n/* harmony import */ var _Core_decodeGoogleEarthEnterpriseData_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13865);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14459);\n/* harmony import */ var _Core_GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71351);\n/* harmony import */ var _Core_GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19043);\n/* harmony import */ var _Core_loadImageFromTypedArray_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10945);\n/* harmony import */ var _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99417);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(96190);\n/* harmony import */ var _Core_Request_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(22426);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(68985);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(9407);\n/* harmony import */ var _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(9121);\n/* harmony import */ var _ThirdParty_protobufjs_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(65581);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(13222);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @private\n */\nfunction GoogleEarthEnterpriseDiscardPolicy() {\n  this._image = new Image();\n}\n\n/**\n * Determines if the discard policy is ready to process images.\n * @returns {Boolean} True if the discard policy is ready to process images; otherwise, false.\n */\nGoogleEarthEnterpriseDiscardPolicy.prototype.isReady = function () {\n  return true;\n};\n\n/**\n * Given a tile image, decide whether to discard that image.\n *\n * @param {HTMLImageElement} image An image to test.\n * @returns {Boolean} True if the image should be discarded; otherwise, false.\n */\nGoogleEarthEnterpriseDiscardPolicy.prototype.shouldDiscardImage = function (\n  image\n) {\n  return image === this._image;\n};\n\n/**\n * @typedef {Object} GoogleEarthEnterpriseImageryProvider.ConstructorOptions\n *\n * Initialization options for the GoogleEarthEnterpriseImageryProvider constructor\n *\n * @property {Resource|String} url The url of the Google Earth Enterprise server hosting the imagery.\n * @property {GoogleEarthEnterpriseMetadata} metadata A metadata object that can be used to share metadata requests with a GoogleEarthEnterpriseTerrainProvider.\n * @property {Ellipsoid} [ellipsoid] The ellipsoid.  If not specified, the WGS84 ellipsoid is used.\n * @property {TileDiscardPolicy} [tileDiscardPolicy] The policy that determines if a tile\n *        is invalid and should be discarded. If this value is not specified, a default\n *        is to discard tiles that fail to download.\n * @property {Credit|String} [credit] A credit for the data source, which is displayed on the canvas.\n */\n\n/**\n * Provides tiled imagery using the Google Earth Enterprise REST API.\n *\n * Notes: This provider is for use with the 3D Earth API of Google Earth Enterprise,\n *        {@link GoogleEarthEnterpriseMapsProvider} should be used with 2D Maps API.\n *\n * @alias GoogleEarthEnterpriseImageryProvider\n * @constructor\n *\n * @param {GoogleEarthEnterpriseImageryProvider.ConstructorOptions} options Object describing initialization options\n *\n * @see GoogleEarthEnterpriseTerrainProvider\n * @see ArcGisMapServerImageryProvider\n * @see GoogleEarthEnterpriseMapsProvider\n * @see OpenStreetMapImageryProvider\n * @see SingleTileImageryProvider\n * @see TileMapServiceImageryProvider\n * @see WebMapServiceImageryProvider\n * @see WebMapTileServiceImageryProvider\n * @see UrlTemplateImageryProvider\n *\n *\n * @example\n * var geeMetadata = new GoogleEarthEnterpriseMetadata(\'http://www.earthenterprise.org/3d\');\n * var gee = new Cesium.GoogleEarthEnterpriseImageryProvider({\n *     metadata : geeMetadata\n * });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n */\nfunction GoogleEarthEnterpriseImageryProvider(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(options, _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"].EMPTY_OBJECT */ .Z.EMPTY_OBJECT);\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(options.url) || (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(options.metadata))) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z("options.url or options.metadata is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  /**\n   * The default alpha blending value of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the night side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultNightAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the day side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultDayAlpha = undefined;\n\n  /**\n   * The default brightness of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0\n   * makes the imagery darker while greater than 1.0 makes it brighter.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultBrightness = undefined;\n\n  /**\n   * The default contrast of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces\n   * the contrast while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultContrast = undefined;\n\n  /**\n   * The default hue of this provider in radians. 0.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultHue = undefined;\n\n  /**\n   * The default saturation of this provider. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the\n   * saturation while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultSaturation = undefined;\n\n  /**\n   * The default gamma correction to apply to this provider.  1.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultGamma = undefined;\n\n  /**\n   * The default texture minification filter to apply to this provider.\n   *\n   * @type {TextureMinificationFilter}\n   * @default undefined\n   */\n  this.defaultMinificationFilter = undefined;\n\n  /**\n   * The default texture magnification filter to apply to this provider.\n   *\n   * @type {TextureMagnificationFilter}\n   * @default undefined\n   */\n  this.defaultMagnificationFilter = undefined;\n\n  var metadata;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(options.metadata)) {\n    metadata = options.metadata;\n  } else {\n    var resource = _Core_Resource_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"].createIfNeeded */ .Z.createIfNeeded(options.url);\n    metadata = new _Core_GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(resource);\n  }\n  this._metadata = metadata;\n  this._tileDiscardPolicy = options.tileDiscardPolicy;\n\n  this._tilingScheme = new _Core_GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z({\n    numberOfLevelZeroTilesX: 2,\n    numberOfLevelZeroTilesY: 2,\n    rectangle: new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(\n      -_Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].PI */ .Z.PI,\n      -_Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].PI */ .Z.PI,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].PI */ .Z.PI,\n      _Core_Math_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].PI */ .Z.PI\n    ),\n    ellipsoid: options.ellipsoid,\n  });\n\n  var credit = options.credit;\n  if (typeof credit === "string") {\n    credit = new _Core_Credit_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(credit);\n  }\n  this._credit = credit;\n\n  this._tileWidth = 256;\n  this._tileHeight = 256;\n  this._maximumLevel = 23;\n\n  // Install the default tile discard policy if none has been supplied.\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(this._tileDiscardPolicy)) {\n    this._tileDiscardPolicy = new GoogleEarthEnterpriseDiscardPolicy();\n  }\n\n  this._errorEvent = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z();\n\n  this._ready = false;\n  var that = this;\n  var metadataError;\n  this._readyPromise = metadata.readyPromise\n    .then(function (result) {\n      if (!metadata.imageryPresent) {\n        var e = new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(\n          "The server " + metadata.url + " doesn\'t have imagery"\n        );\n        metadataError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].handleError */ .Z.handleError(\n          metadataError,\n          that,\n          that._errorEvent,\n          e.message,\n          undefined,\n          undefined,\n          undefined,\n          e\n        );\n        return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].reject */ .Z.reject(e);\n      }\n\n      _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].handleSuccess */ .Z.handleSuccess(metadataError);\n      that._ready = result;\n      return result;\n    })\n    .otherwise(function (e) {\n      metadataError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].handleError */ .Z.handleError(\n        metadataError,\n        that,\n        that._errorEvent,\n        e.message,\n        undefined,\n        undefined,\n        undefined,\n        e\n      );\n      return _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"].reject */ .Z.reject(e);\n    });\n}\n\nObject.defineProperties(GoogleEarthEnterpriseImageryProvider.prototype, {\n  /**\n   * Gets the name of the Google Earth Enterprise server url hosting the imagery.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._metadata.url;\n    },\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return this._metadata.proxy;\n    },\n  },\n\n  /**\n   * Gets the width of each tile, in pixels. This function should\n   * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "tileWidth must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileWidth;\n    },\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "tileHeight must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileHeight;\n    },\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Number|undefined}\n   * @readonly\n   */\n  maximumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "maximumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._maximumLevel;\n    },\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "minimumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return 0;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "tilingScheme must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by this instance.  This function should\n   * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "rectangle must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tilingScheme.rectangle;\n    },\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out "missing" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n          "tileDiscardPolicy must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileDiscardPolicy;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery.  This function should not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return this._credit;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  Setting this property to false reduces memory usage\n   * and texture upload time.\n   * @memberof GoogleEarthEnterpriseImageryProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: function () {\n      return false;\n    },\n  },\n});\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nGoogleEarthEnterpriseImageryProvider.prototype.getTileCredits = function (\n  x,\n  y,\n  level\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "getTileCredits must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var metadata = this._metadata;\n  var info = metadata.getTileInformation(x, y, level);\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(info)) {\n    var credit = metadata.providers[info.imageryProvider];\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(credit)) {\n      return [credit];\n    }\n  }\n\n  return undefined;\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link GoogleEarthEnterpriseImageryProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n *\n * @exception {DeveloperError} <code>requestImage</code> must not be called before the imagery provider is ready.\n */\nGoogleEarthEnterpriseImageryProvider.prototype.requestImage = function (\n  x,\n  y,\n  level,\n  request\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z(\n      "requestImage must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var invalidImage = this._tileDiscardPolicy._image; // Empty image or undefined depending on discard policy\n  var metadata = this._metadata;\n  var quadKey = _Core_GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].tileXYToQuadKey */ .Z.tileXYToQuadKey(x, y, level);\n  var info = metadata.getTileInformation(x, y, level);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(info)) {\n    if (metadata.isValid(quadKey)) {\n      var metadataRequest = new _Core_Request_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z({\n        throttle: request.throttle,\n        throttleByServer: request.throttleByServer,\n        type: request.type,\n        priorityFunction: request.priorityFunction,\n      });\n      metadata.populateSubtree(x, y, level, metadataRequest);\n      return undefined; // No metadata so return undefined so we can be loaded later\n    }\n    return invalidImage; // Image doesn\'t exist\n  }\n\n  if (!info.hasImagery()) {\n    // Already have info and there isn\'t any imagery here\n    return invalidImage;\n  }\n  var promise = buildImageResource(\n    this,\n    info,\n    x,\n    y,\n    level,\n    request\n  ).fetchArrayBuffer();\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(promise)) {\n    return undefined; // Throttled\n  }\n\n  return promise.then(function (image) {\n    (0,_Core_decodeGoogleEarthEnterpriseData_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(metadata.key, image);\n    var a = new Uint8Array(image);\n    var type;\n\n    var protoImagery = metadata.protoImagery;\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(protoImagery) || !protoImagery) {\n      type = getImageType(a);\n    }\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(type) && (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(protoImagery) || protoImagery)) {\n      var message = decodeEarthImageryPacket(a);\n      type = message.imageType;\n      a = message.imageData;\n    }\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(type) || !(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(a)) {\n      return invalidImage;\n    }\n\n    return (0,_Core_loadImageFromTypedArray_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z)({\n      uint8Array: a,\n      format: type,\n      flipY: true,\n    });\n  });\n};\n\n/**\n * Picking features is not currently supported by this imagery provider, so this function simply returns\n * undefined.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n */\nGoogleEarthEnterpriseImageryProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  return undefined;\n};\n\n//\n// Functions to handle imagery packets\n//\nfunction buildImageResource(imageryProvider, info, x, y, level, request) {\n  var quadKey = _Core_GoogleEarthEnterpriseMetadata_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"].tileXYToQuadKey */ .Z.tileXYToQuadKey(x, y, level);\n  var version = info.imageryVersion;\n  version = (0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(version) && version > 0 ? version : 1;\n\n  return imageryProvider._metadata.resource.getDerivedResource({\n    url: "flatfile?f1-0" + quadKey + "-i." + version.toString(),\n    request: request,\n  });\n}\n\n// Detects if a Uint8Array is a JPEG or PNG\nfunction getImageType(image) {\n  var jpeg = "JFIF";\n  if (\n    image[6] === jpeg.charCodeAt(0) &&\n    image[7] === jpeg.charCodeAt(1) &&\n    image[8] === jpeg.charCodeAt(2) &&\n    image[9] === jpeg.charCodeAt(3)\n  ) {\n    return "image/jpeg";\n  }\n\n  var png = "PNG";\n  if (\n    image[1] === png.charCodeAt(0) &&\n    image[2] === png.charCodeAt(1) &&\n    image[3] === png.charCodeAt(2)\n  ) {\n    return "image/png";\n  }\n\n  return undefined;\n}\n\n// Decodes an Imagery protobuf into the message\n// Partially generated with the help of protobuf.js static generator\nfunction decodeEarthImageryPacket(data) {\n  var reader = _ThirdParty_protobufjs_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"].Reader.create */ .Z.Reader.create(data);\n  var end = reader.len;\n  var message = {};\n  while (reader.pos < end) {\n    var tag = reader.uint32();\n    switch (tag >>> 3) {\n      case 1:\n        message.imageType = reader.uint32();\n        break;\n      case 2:\n        message.imageData = reader.bytes();\n        break;\n      case 3:\n        message.alphaType = reader.uint32();\n        break;\n      case 4:\n        message.imageAlpha = reader.bytes();\n        break;\n      case 5:\n        var copyrightIds = message.copyrightIds;\n        if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(copyrightIds)) {\n          copyrightIds = message.copyrightIds = [];\n        }\n        if ((tag & 7) === 2) {\n          var end2 = reader.uint32() + reader.pos;\n          while (reader.pos < end2) {\n            copyrightIds.push(reader.uint32());\n          }\n        } else {\n          copyrightIds.push(reader.uint32());\n        }\n        break;\n      default:\n        reader.skipType(tag & 7);\n        break;\n    }\n  }\n\n  var imageType = message.imageType;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(imageType)) {\n    switch (imageType) {\n      case 0:\n        message.imageType = "image/jpeg";\n        break;\n      case 4:\n        message.imageType = "image/png";\n        break;\n      default:\n        throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z(\n          "GoogleEarthEnterpriseImageryProvider: Unsupported image type."\n        );\n    }\n  }\n\n  var alphaType = message.alphaType;\n  if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z)(alphaType) && alphaType !== 0) {\n    console.log(\n      "GoogleEarthEnterpriseImageryProvider: External alpha not supported."\n    );\n    delete message.alphaType;\n    delete message.imageAlpha;\n  }\n\n  return message;\n}\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = ((/* unused pure expression or super */ null && (GoogleEarthEnterpriseImageryProvider)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVIQUE2QztBQUM3RDtBQUNBLFlBQVksc0VBQU87O0FBRW5CO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVHQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0VBQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU0sc0VBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVFQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSxzRUFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0VBQWUsb0ZBQW9DLElBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyLmpzPzM5MWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENyZWRpdCBmcm9tIFwiLi4vQ29yZS9DcmVkaXQuanNcIjtcbmltcG9ydCBkZWNvZGVHb29nbGVFYXJ0aEVudGVycHJpc2VEYXRhIGZyb20gXCIuLi9Db3JlL2RlY29kZUdvb2dsZUVhcnRoRW50ZXJwcmlzZURhdGEuanNcIjtcbmltcG9ydCBkZWZhdWx0VmFsdWUgZnJvbSBcIi4uL0NvcmUvZGVmYXVsdFZhbHVlLmpzXCI7XG5pbXBvcnQgZGVmaW5lZCBmcm9tIFwiLi4vQ29yZS9kZWZpbmVkLmpzXCI7XG5pbXBvcnQgRGV2ZWxvcGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvRGV2ZWxvcGVyRXJyb3IuanNcIjtcbmltcG9ydCBFdmVudCBmcm9tIFwiLi4vQ29yZS9FdmVudC5qc1wiO1xuaW1wb3J0IEdlb2dyYXBoaWNUaWxpbmdTY2hlbWUgZnJvbSBcIi4uL0NvcmUvR2VvZ3JhcGhpY1RpbGluZ1NjaGVtZS5qc1wiO1xuaW1wb3J0IEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhIGZyb20gXCIuLi9Db3JlL0dvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgbG9hZEltYWdlRnJvbVR5cGVkQXJyYXkgZnJvbSBcIi4uL0NvcmUvbG9hZEltYWdlRnJvbVR5cGVkQXJyYXkuanNcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCIuLi9Db3JlL01hdGguanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgUmVxdWVzdCBmcm9tIFwiLi4vQ29yZS9SZXF1ZXN0LmpzXCI7XG5pbXBvcnQgUmVzb3VyY2UgZnJvbSBcIi4uL0NvcmUvUmVzb3VyY2UuanNcIjtcbmltcG9ydCBSdW50aW1lRXJyb3IgZnJvbSBcIi4uL0NvcmUvUnVudGltZUVycm9yLmpzXCI7XG5pbXBvcnQgVGlsZVByb3ZpZGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvVGlsZVByb3ZpZGVyRXJyb3IuanNcIjtcbmltcG9ydCBwcm90b2J1ZiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS9wcm90b2J1ZmpzLmpzXCI7XG5pbXBvcnQgd2hlbiBmcm9tIFwiLi4vVGhpcmRQYXJ0eS93aGVuLmpzXCI7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gR29vZ2xlRWFydGhFbnRlcnByaXNlRGlzY2FyZFBvbGljeSgpIHtcbiAgdGhpcy5faW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBkaXNjYXJkIHBvbGljeSBpcyByZWFkeSB0byBwcm9jZXNzIGltYWdlcy5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBkaXNjYXJkIHBvbGljeSBpcyByZWFkeSB0byBwcm9jZXNzIGltYWdlczsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlRGlzY2FyZFBvbGljeS5wcm90b3R5cGUuaXNSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIEdpdmVuIGEgdGlsZSBpbWFnZSwgZGVjaWRlIHdoZXRoZXIgdG8gZGlzY2FyZCB0aGF0IGltYWdlLlxuICpcbiAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudH0gaW1hZ2UgQW4gaW1hZ2UgdG8gdGVzdC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBpbWFnZSBzaG91bGQgYmUgZGlzY2FyZGVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VEaXNjYXJkUG9saWN5LnByb3RvdHlwZS5zaG91bGREaXNjYXJkSW1hZ2UgPSBmdW5jdGlvbiAoXG4gIGltYWdlXG4pIHtcbiAgcmV0dXJuIGltYWdlID09PSB0aGlzLl9pbWFnZTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyLkNvbnN0cnVjdG9yT3B0aW9uc1xuICpcbiAqIEluaXRpYWxpemF0aW9uIG9wdGlvbnMgZm9yIHRoZSBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIgY29uc3RydWN0b3JcbiAqXG4gKiBAcHJvcGVydHkge1Jlc291cmNlfFN0cmluZ30gdXJsIFRoZSB1cmwgb2YgdGhlIEdvb2dsZSBFYXJ0aCBFbnRlcnByaXNlIHNlcnZlciBob3N0aW5nIHRoZSBpbWFnZXJ5LlxuICogQHByb3BlcnR5IHtHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YX0gbWV0YWRhdGEgQSBtZXRhZGF0YSBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBzaGFyZSBtZXRhZGF0YSByZXF1ZXN0cyB3aXRoIGEgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyLlxuICogQHByb3BlcnR5IHtFbGxpcHNvaWR9IFtlbGxpcHNvaWRdIFRoZSBlbGxpcHNvaWQuICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgV0dTODQgZWxsaXBzb2lkIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge1RpbGVEaXNjYXJkUG9saWN5fSBbdGlsZURpc2NhcmRQb2xpY3ldIFRoZSBwb2xpY3kgdGhhdCBkZXRlcm1pbmVzIGlmIGEgdGlsZVxuICogICAgICAgIGlzIGludmFsaWQgYW5kIHNob3VsZCBiZSBkaXNjYXJkZWQuIElmIHRoaXMgdmFsdWUgaXMgbm90IHNwZWNpZmllZCwgYSBkZWZhdWx0XG4gKiAgICAgICAgaXMgdG8gZGlzY2FyZCB0aWxlcyB0aGF0IGZhaWwgdG8gZG93bmxvYWQuXG4gKiBAcHJvcGVydHkge0NyZWRpdHxTdHJpbmd9IFtjcmVkaXRdIEEgY3JlZGl0IGZvciB0aGUgZGF0YSBzb3VyY2UsIHdoaWNoIGlzIGRpc3BsYXllZCBvbiB0aGUgY2FudmFzLlxuICovXG5cbi8qKlxuICogUHJvdmlkZXMgdGlsZWQgaW1hZ2VyeSB1c2luZyB0aGUgR29vZ2xlIEVhcnRoIEVudGVycHJpc2UgUkVTVCBBUEkuXG4gKlxuICogTm90ZXM6IFRoaXMgcHJvdmlkZXIgaXMgZm9yIHVzZSB3aXRoIHRoZSAzRCBFYXJ0aCBBUEkgb2YgR29vZ2xlIEVhcnRoIEVudGVycHJpc2UsXG4gKiAgICAgICAge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlcn0gc2hvdWxkIGJlIHVzZWQgd2l0aCAyRCBNYXBzIEFQSS5cbiAqXG4gKiBAYWxpYXMgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAcGFyYW0ge0dvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5Db25zdHJ1Y3Rvck9wdGlvbnN9IG9wdGlvbnMgT2JqZWN0IGRlc2NyaWJpbmcgaW5pdGlhbGl6YXRpb24gb3B0aW9uc1xuICpcbiAqIEBzZWUgR29vZ2xlRWFydGhFbnRlcnByaXNlVGVycmFpblByb3ZpZGVyXG4gKiBAc2VlIEFyY0dpc01hcFNlcnZlckltYWdlcnlQcm92aWRlclxuICogQHNlZSBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXJcbiAqIEBzZWUgT3BlblN0cmVldE1hcEltYWdlcnlQcm92aWRlclxuICogQHNlZSBTaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFRpbGVNYXBTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFdlYk1hcFNlcnZpY2VJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgV2ViTWFwVGlsZVNlcnZpY2VJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgVXJsVGVtcGxhdGVJbWFnZXJ5UHJvdmlkZXJcbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBnZWVNZXRhZGF0YSA9IG5ldyBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YSgnaHR0cDovL3d3dy5lYXJ0aGVudGVycHJpc2Uub3JnLzNkJyk7XG4gKiB2YXIgZ2VlID0gbmV3IENlc2l1bS5Hb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIoe1xuICogICAgIG1ldGFkYXRhIDogZ2VlTWV0YWRhdGFcbiAqIH0pO1xuICpcbiAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvfENyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nfVxuICovXG5mdW5jdGlvbiBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIGRlZmF1bHRWYWx1ZS5FTVBUWV9PQkpFQ1QpO1xuXG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghKGRlZmluZWQob3B0aW9ucy51cmwpIHx8IGRlZmluZWQob3B0aW9ucy5tZXRhZGF0YSkpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy51cmwgb3Igb3B0aW9ucy5tZXRhZGF0YSBpcyByZXF1aXJlZC5cIik7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFscGhhIGJsZW5kaW5nIHZhbHVlIG9mIHRoaXMgcHJvdmlkZXIsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEFscGhhID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbHBoYSBibGVuZGluZyB2YWx1ZSBvbiB0aGUgbmlnaHQgc2lkZSBvZiB0aGUgZ2xvYmUgb2YgdGhpcyBwcm92aWRlciwgd2l0aCAwLjAgcmVwcmVzZW50aW5nIGZ1bGx5IHRyYW5zcGFyZW50IGFuZFxuICAgKiAxLjAgcmVwcmVzZW50aW5nIGZ1bGx5IG9wYXF1ZS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0TmlnaHRBbHBoYSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb24gdGhlIGRheSBzaWRlIG9mIHRoZSBnbG9iZSBvZiB0aGlzIHByb3ZpZGVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHREYXlBbHBoYSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYnJpZ2h0bmVzcyBvZiB0aGlzIHByb3ZpZGVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gIExlc3MgdGhhbiAxLjBcbiAgICogbWFrZXMgdGhlIGltYWdlcnkgZGFya2VyIHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgbWFrZXMgaXQgYnJpZ2h0ZXIuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEJyaWdodG5lc3MgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGNvbnRyYXN0IG9mIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiAgTGVzcyB0aGFuIDEuMCByZWR1Y2VzXG4gICAqIHRoZSBjb250cmFzdCB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIGluY3JlYXNlcyBpdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0Q29udHJhc3QgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGh1ZSBvZiB0aGlzIHByb3ZpZGVyIGluIHJhZGlhbnMuIDAuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEh1ZSA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgc2F0dXJhdGlvbiBvZiB0aGlzIHByb3ZpZGVyLiAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiBMZXNzIHRoYW4gMS4wIHJlZHVjZXMgdGhlXG4gICAqIHNhdHVyYXRpb24gd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBpbmNyZWFzZXMgaXQuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdFNhdHVyYXRpb24gPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGdhbW1hIGNvcnJlY3Rpb24gdG8gYXBwbHkgdG8gdGhpcyBwcm92aWRlci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdEdhbW1hID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0ZXh0dXJlIG1pbmlmaWNhdGlvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhpcyBwcm92aWRlci5cbiAgICpcbiAgICogQHR5cGUge1RleHR1cmVNaW5pZmljYXRpb25GaWx0ZXJ9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0TWluaWZpY2F0aW9uRmlsdGVyID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0ZXh0dXJlIG1hZ25pZmljYXRpb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuXG4gICAqXG4gICAqIEB0eXBlIHtUZXh0dXJlTWFnbmlmaWNhdGlvbkZpbHRlcn1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRNYWduaWZpY2F0aW9uRmlsdGVyID0gdW5kZWZpbmVkO1xuXG4gIHZhciBtZXRhZGF0YTtcbiAgaWYgKGRlZmluZWQob3B0aW9ucy5tZXRhZGF0YSkpIHtcbiAgICBtZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGE7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHJlc291cmNlID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQob3B0aW9ucy51cmwpO1xuICAgIG1ldGFkYXRhID0gbmV3IEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhKHJlc291cmNlKTtcbiAgfVxuICB0aGlzLl9tZXRhZGF0YSA9IG1ldGFkYXRhO1xuICB0aGlzLl90aWxlRGlzY2FyZFBvbGljeSA9IG9wdGlvbnMudGlsZURpc2NhcmRQb2xpY3k7XG5cbiAgdGhpcy5fdGlsaW5nU2NoZW1lID0gbmV3IEdlb2dyYXBoaWNUaWxpbmdTY2hlbWUoe1xuICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNYOiAyLFxuICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNZOiAyLFxuICAgIHJlY3RhbmdsZTogbmV3IFJlY3RhbmdsZShcbiAgICAgIC1DZXNpdW1NYXRoLlBJLFxuICAgICAgLUNlc2l1bU1hdGguUEksXG4gICAgICBDZXNpdW1NYXRoLlBJLFxuICAgICAgQ2VzaXVtTWF0aC5QSVxuICAgICksXG4gICAgZWxsaXBzb2lkOiBvcHRpb25zLmVsbGlwc29pZCxcbiAgfSk7XG5cbiAgdmFyIGNyZWRpdCA9IG9wdGlvbnMuY3JlZGl0O1xuICBpZiAodHlwZW9mIGNyZWRpdCA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNyZWRpdCA9IG5ldyBDcmVkaXQoY3JlZGl0KTtcbiAgfVxuICB0aGlzLl9jcmVkaXQgPSBjcmVkaXQ7XG5cbiAgdGhpcy5fdGlsZVdpZHRoID0gMjU2O1xuICB0aGlzLl90aWxlSGVpZ2h0ID0gMjU2O1xuICB0aGlzLl9tYXhpbXVtTGV2ZWwgPSAyMztcblxuICAvLyBJbnN0YWxsIHRoZSBkZWZhdWx0IHRpbGUgZGlzY2FyZCBwb2xpY3kgaWYgbm9uZSBoYXMgYmVlbiBzdXBwbGllZC5cbiAgaWYgKCFkZWZpbmVkKHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5KSkge1xuICAgIHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5ID0gbmV3IEdvb2dsZUVhcnRoRW50ZXJwcmlzZURpc2NhcmRQb2xpY3koKTtcbiAgfVxuXG4gIHRoaXMuX2Vycm9yRXZlbnQgPSBuZXcgRXZlbnQoKTtcblxuICB0aGlzLl9yZWFkeSA9IGZhbHNlO1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBtZXRhZGF0YUVycm9yO1xuICB0aGlzLl9yZWFkeVByb21pc2UgPSBtZXRhZGF0YS5yZWFkeVByb21pc2VcbiAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICBpZiAoIW1ldGFkYXRhLmltYWdlcnlQcmVzZW50KSB7XG4gICAgICAgIHZhciBlID0gbmV3IFJ1bnRpbWVFcnJvcihcbiAgICAgICAgICBcIlRoZSBzZXJ2ZXIgXCIgKyBtZXRhZGF0YS51cmwgKyBcIiBkb2Vzbid0IGhhdmUgaW1hZ2VyeVwiXG4gICAgICAgICk7XG4gICAgICAgIG1ldGFkYXRhRXJyb3IgPSBUaWxlUHJvdmlkZXJFcnJvci5oYW5kbGVFcnJvcihcbiAgICAgICAgICBtZXRhZGF0YUVycm9yLFxuICAgICAgICAgIHRoYXQsXG4gICAgICAgICAgdGhhdC5fZXJyb3JFdmVudCxcbiAgICAgICAgICBlLm1lc3NhZ2UsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gd2hlbi5yZWplY3QoZSk7XG4gICAgICB9XG5cbiAgICAgIFRpbGVQcm92aWRlckVycm9yLmhhbmRsZVN1Y2Nlc3MobWV0YWRhdGFFcnJvcik7XG4gICAgICB0aGF0Ll9yZWFkeSA9IHJlc3VsdDtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKGZ1bmN0aW9uIChlKSB7XG4gICAgICBtZXRhZGF0YUVycm9yID0gVGlsZVByb3ZpZGVyRXJyb3IuaGFuZGxlRXJyb3IoXG4gICAgICAgIG1ldGFkYXRhRXJyb3IsXG4gICAgICAgIHRoYXQsXG4gICAgICAgIHRoYXQuX2Vycm9yRXZlbnQsXG4gICAgICAgIGUubWVzc2FnZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgZVxuICAgICAgKTtcbiAgICAgIHJldHVybiB3aGVuLnJlamVjdChlKTtcbiAgICB9KTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyB0aGUgbmFtZSBvZiB0aGUgR29vZ2xlIEVhcnRoIEVudGVycHJpc2Ugc2VydmVyIHVybCBob3N0aW5nIHRoZSBpbWFnZXJ5LlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHVybDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX21ldGFkYXRhLnVybDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm94eSB1c2VkIGJ5IHRoaXMgcHJvdmlkZXIuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm94eX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBwcm94eToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX21ldGFkYXRhLnByb3h5O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHdpZHRoIG9mIGVhY2ggdGlsZSwgaW4gcGl4ZWxzLiBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdGlsZVdpZHRoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJ0aWxlV2lkdGggbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl90aWxlV2lkdGg7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgaGVpZ2h0IG9mIGVhY2ggdGlsZSwgaW4gcGl4ZWxzLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVIZWlnaHQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGVIZWlnaHQgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl90aWxlSGVpZ2h0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1heGltdW0gbGV2ZWwtb2YtZGV0YWlsIHRoYXQgY2FuIGJlIHJlcXVlc3RlZC4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgbWF4aW11bUxldmVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJtYXhpbXVtTGV2ZWwgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl9tYXhpbXVtTGV2ZWw7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgbWluaW11bSBsZXZlbC1vZi1kZXRhaWwgdGhhdCBjYW4gYmUgcmVxdWVzdGVkLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG1pbmltdW1MZXZlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwibWluaW11bUxldmVsIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICByZXR1cm4gMDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxpbmcgc2NoZW1lIHVzZWQgYnkgdGhpcyBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxpbmdTY2hlbWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGluZ1NjaGVtZSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWN0YW5nbGUsIGluIHJhZGlhbnMsIG9mIHRoZSBpbWFnZXJ5IHByb3ZpZGVkIGJ5IHRoaXMgaW5zdGFuY2UuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtSZWN0YW5nbGV9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVjdGFuZ2xlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJyZWN0YW5nbGUgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl90aWxpbmdTY2hlbWUucmVjdGFuZ2xlO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRpbGUgZGlzY2FyZCBwb2xpY3kuICBJZiBub3QgdW5kZWZpbmVkLCB0aGUgZGlzY2FyZCBwb2xpY3kgaXMgcmVzcG9uc2libGVcbiAgICogZm9yIGZpbHRlcmluZyBvdXQgXCJtaXNzaW5nXCIgdGlsZXMgdmlhIGl0cyBzaG91bGREaXNjYXJkSW1hZ2UgZnVuY3Rpb24uICBJZiB0aGlzIGZ1bmN0aW9uXG4gICAqIHJldHVybnMgdW5kZWZpbmVkLCBubyB0aWxlcyBhcmUgZmlsdGVyZWQuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtUaWxlRGlzY2FyZFBvbGljeX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxlRGlzY2FyZFBvbGljeToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwidGlsZURpc2NhcmRQb2xpY3kgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl90aWxlRGlzY2FyZFBvbGljeTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gdGhlIGltYWdlcnkgcHJvdmlkZXIgZW5jb3VudGVycyBhbiBhc3luY2hyb25vdXMgZXJyb3IuICBCeSBzdWJzY3JpYmluZ1xuICAgKiB0byB0aGUgZXZlbnQsIHlvdSB3aWxsIGJlIG5vdGlmaWVkIG9mIHRoZSBlcnJvciBhbmQgY2FuIHBvdGVudGlhbGx5IHJlY292ZXIgZnJvbSBpdC4gIEV2ZW50IGxpc3RlbmVyc1xuICAgKiBhcmUgcGFzc2VkIGFuIGluc3RhbmNlIG9mIHtAbGluayBUaWxlUHJvdmlkZXJFcnJvcn0uXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtFdmVudH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBlcnJvckV2ZW50OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXJyb3JFdmVudDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHk6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWFkeTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRydWUgd2hlbiB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1Byb21pc2UuPEJvb2xlYW4+fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHJlYWR5UHJvbWlzZToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5UHJvbWlzZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjcmVkaXQgdG8gZGlzcGxheSB3aGVuIHRoaXMgaW1hZ2VyeSBwcm92aWRlciBpcyBhY3RpdmUuICBUeXBpY2FsbHkgdGhpcyBpcyB1c2VkIHRvIGNyZWRpdFxuICAgKiB0aGUgc291cmNlIG9mIHRoZSBpbWFnZXJ5LiAgVGhpcyBmdW5jdGlvbiBzaG91bGQgbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Q3JlZGl0fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGNyZWRpdDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NyZWRpdDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgaW1hZ2VzIHByb3ZpZGVkIGJ5IHRoaXMgaW1hZ2VyeSBwcm92aWRlclxuICAgKiBpbmNsdWRlIGFuIGFscGhhIGNoYW5uZWwuICBJZiB0aGlzIHByb3BlcnR5IGlzIGZhbHNlLCBhbiBhbHBoYSBjaGFubmVsLCBpZiBwcmVzZW50LCB3aWxsXG4gICAqIGJlIGlnbm9yZWQuICBJZiB0aGlzIHByb3BlcnR5IGlzIHRydWUsIGFueSBpbWFnZXMgd2l0aG91dCBhbiBhbHBoYSBjaGFubmVsIHdpbGwgYmUgdHJlYXRlZFxuICAgKiBhcyBpZiB0aGVpciBhbHBoYSBpcyAxLjAgZXZlcnl3aGVyZS4gIFNldHRpbmcgdGhpcyBwcm9wZXJ0eSB0byBmYWxzZSByZWR1Y2VzIG1lbW9yeSB1c2FnZVxuICAgKiBhbmQgdGV4dHVyZSB1cGxvYWQgdGltZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaGFzQWxwaGFDaGFubmVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIGNyZWRpdHMgdG8gYmUgZGlzcGxheWVkIHdoZW4gYSBnaXZlbiB0aWxlIGlzIGRpc3BsYXllZC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWw7XG4gKiBAcmV0dXJucyB7Q3JlZGl0W119IFRoZSBjcmVkaXRzIHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSB0aWxlIGlzIGRpc3BsYXllZC5cbiAqXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gPGNvZGU+Z2V0VGlsZUNyZWRpdHM8L2NvZGU+IG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5wcm90b3R5cGUuZ2V0VGlsZUNyZWRpdHMgPSBmdW5jdGlvbiAoXG4gIHgsXG4gIHksXG4gIGxldmVsXG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwiZ2V0VGlsZUNyZWRpdHMgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICk7XG4gIH1cbiAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgdmFyIG1ldGFkYXRhID0gdGhpcy5fbWV0YWRhdGE7XG4gIHZhciBpbmZvID0gbWV0YWRhdGEuZ2V0VGlsZUluZm9ybWF0aW9uKHgsIHksIGxldmVsKTtcbiAgaWYgKGRlZmluZWQoaW5mbykpIHtcbiAgICB2YXIgY3JlZGl0ID0gbWV0YWRhdGEucHJvdmlkZXJzW2luZm8uaW1hZ2VyeVByb3ZpZGVyXTtcbiAgICBpZiAoZGVmaW5lZChjcmVkaXQpKSB7XG4gICAgICByZXR1cm4gW2NyZWRpdF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogUmVxdWVzdHMgdGhlIGltYWdlIGZvciBhIGdpdmVuIHRpbGUuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB0aWxlIFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgdGlsZSBsZXZlbC5cbiAqIEBwYXJhbSB7UmVxdWVzdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0IG9iamVjdC4gSW50ZW5kZWQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICogQHJldHVybnMge1Byb21pc2UuPEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnQ+fHVuZGVmaW5lZH0gQSBwcm9taXNlIGZvciB0aGUgaW1hZ2UgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgaW1hZ2UgaXMgYXZhaWxhYmxlLCBvclxuICogICAgICAgICAgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSB0b28gbWFueSBhY3RpdmUgcmVxdWVzdHMgdG8gdGhlIHNlcnZlciwgYW5kIHRoZSByZXF1ZXN0XG4gKiAgICAgICAgICBzaG91bGQgYmUgcmV0cmllZCBsYXRlci4gIFRoZSByZXNvbHZlZCBpbWFnZSBtYXkgYmUgZWl0aGVyIGFuXG4gKiAgICAgICAgICBJbWFnZSBvciBhIENhbnZhcyBET00gb2JqZWN0LlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSA8Y29kZT5yZXF1ZXN0SW1hZ2U8L2NvZGU+IG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlci5wcm90b3R5cGUucmVxdWVzdEltYWdlID0gZnVuY3Rpb24gKFxuICB4LFxuICB5LFxuICBsZXZlbCxcbiAgcmVxdWVzdFxuKSB7XG4gIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICBcInJlcXVlc3RJbWFnZSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICB2YXIgaW52YWxpZEltYWdlID0gdGhpcy5fdGlsZURpc2NhcmRQb2xpY3kuX2ltYWdlOyAvLyBFbXB0eSBpbWFnZSBvciB1bmRlZmluZWQgZGVwZW5kaW5nIG9uIGRpc2NhcmQgcG9saWN5XG4gIHZhciBtZXRhZGF0YSA9IHRoaXMuX21ldGFkYXRhO1xuICB2YXIgcXVhZEtleSA9IEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1ldGFkYXRhLnRpbGVYWVRvUXVhZEtleSh4LCB5LCBsZXZlbCk7XG4gIHZhciBpbmZvID0gbWV0YWRhdGEuZ2V0VGlsZUluZm9ybWF0aW9uKHgsIHksIGxldmVsKTtcbiAgaWYgKCFkZWZpbmVkKGluZm8pKSB7XG4gICAgaWYgKG1ldGFkYXRhLmlzVmFsaWQocXVhZEtleSkpIHtcbiAgICAgIHZhciBtZXRhZGF0YVJlcXVlc3QgPSBuZXcgUmVxdWVzdCh7XG4gICAgICAgIHRocm90dGxlOiByZXF1ZXN0LnRocm90dGxlLFxuICAgICAgICB0aHJvdHRsZUJ5U2VydmVyOiByZXF1ZXN0LnRocm90dGxlQnlTZXJ2ZXIsXG4gICAgICAgIHR5cGU6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgcHJpb3JpdHlGdW5jdGlvbjogcmVxdWVzdC5wcmlvcml0eUZ1bmN0aW9uLFxuICAgICAgfSk7XG4gICAgICBtZXRhZGF0YS5wb3B1bGF0ZVN1YnRyZWUoeCwgeSwgbGV2ZWwsIG1ldGFkYXRhUmVxdWVzdCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkOyAvLyBObyBtZXRhZGF0YSBzbyByZXR1cm4gdW5kZWZpbmVkIHNvIHdlIGNhbiBiZSBsb2FkZWQgbGF0ZXJcbiAgICB9XG4gICAgcmV0dXJuIGludmFsaWRJbWFnZTsgLy8gSW1hZ2UgZG9lc24ndCBleGlzdFxuICB9XG5cbiAgaWYgKCFpbmZvLmhhc0ltYWdlcnkoKSkge1xuICAgIC8vIEFscmVhZHkgaGF2ZSBpbmZvIGFuZCB0aGVyZSBpc24ndCBhbnkgaW1hZ2VyeSBoZXJlXG4gICAgcmV0dXJuIGludmFsaWRJbWFnZTtcbiAgfVxuICB2YXIgcHJvbWlzZSA9IGJ1aWxkSW1hZ2VSZXNvdXJjZShcbiAgICB0aGlzLFxuICAgIGluZm8sXG4gICAgeCxcbiAgICB5LFxuICAgIGxldmVsLFxuICAgIHJlcXVlc3RcbiAgKS5mZXRjaEFycmF5QnVmZmVyKCk7XG4gIGlmICghZGVmaW5lZChwcm9taXNlKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7IC8vIFRocm90dGxlZFxuICB9XG5cbiAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICBkZWNvZGVHb29nbGVFYXJ0aEVudGVycHJpc2VEYXRhKG1ldGFkYXRhLmtleSwgaW1hZ2UpO1xuICAgIHZhciBhID0gbmV3IFVpbnQ4QXJyYXkoaW1hZ2UpO1xuICAgIHZhciB0eXBlO1xuXG4gICAgdmFyIHByb3RvSW1hZ2VyeSA9IG1ldGFkYXRhLnByb3RvSW1hZ2VyeTtcbiAgICBpZiAoIWRlZmluZWQocHJvdG9JbWFnZXJ5KSB8fCAhcHJvdG9JbWFnZXJ5KSB7XG4gICAgICB0eXBlID0gZ2V0SW1hZ2VUeXBlKGEpO1xuICAgIH1cblxuICAgIGlmICghZGVmaW5lZCh0eXBlKSAmJiAoIWRlZmluZWQocHJvdG9JbWFnZXJ5KSB8fCBwcm90b0ltYWdlcnkpKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IGRlY29kZUVhcnRoSW1hZ2VyeVBhY2tldChhKTtcbiAgICAgIHR5cGUgPSBtZXNzYWdlLmltYWdlVHlwZTtcbiAgICAgIGEgPSBtZXNzYWdlLmltYWdlRGF0YTtcbiAgICB9XG5cbiAgICBpZiAoIWRlZmluZWQodHlwZSkgfHwgIWRlZmluZWQoYSkpIHtcbiAgICAgIHJldHVybiBpbnZhbGlkSW1hZ2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxvYWRJbWFnZUZyb21UeXBlZEFycmF5KHtcbiAgICAgIHVpbnQ4QXJyYXk6IGEsXG4gICAgICBmb3JtYXQ6IHR5cGUsXG4gICAgICBmbGlwWTogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFBpY2tpbmcgZmVhdHVyZXMgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhpcyBpbWFnZXJ5IHByb3ZpZGVyLCBzbyB0aGlzIGZ1bmN0aW9uIHNpbXBseSByZXR1cm5zXG4gKiB1bmRlZmluZWQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHRpbGUgWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHRpbGUgWSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxvbmdpdHVkZSBUaGUgbG9uZ2l0dWRlIGF0IHdoaWNoIHRvIHBpY2sgZmVhdHVyZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gbGF0aXR1ZGUgIFRoZSBsYXRpdHVkZSBhdCB3aGljaCB0byBwaWNrIGZlYXR1cmVzLlxuICogQHJldHVybiB7UHJvbWlzZS48SW1hZ2VyeUxheWVyRmVhdHVyZUluZm9bXT58dW5kZWZpbmVkfSBBIHByb21pc2UgZm9yIHRoZSBwaWNrZWQgZmVhdHVyZXMgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgYXN5bmNocm9ub3VzXG4gKiAgICAgICAgICAgICAgICAgICBwaWNraW5nIGNvbXBsZXRlcy4gIFRoZSByZXNvbHZlZCB2YWx1ZSBpcyBhbiBhcnJheSBvZiB7QGxpbmsgSW1hZ2VyeUxheWVyRmVhdHVyZUluZm99XG4gKiAgICAgICAgICAgICAgICAgICBpbnN0YW5jZXMuICBUaGUgYXJyYXkgbWF5IGJlIGVtcHR5IGlmIG5vIGZlYXR1cmVzIGFyZSBmb3VuZCBhdCB0aGUgZ2l2ZW4gbG9jYXRpb24uXG4gKiAgICAgICAgICAgICAgICAgICBJdCBtYXkgYWxzbyBiZSB1bmRlZmluZWQgaWYgcGlja2luZyBpcyBub3Qgc3VwcG9ydGVkLlxuICovXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlLnBpY2tGZWF0dXJlcyA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWwsXG4gIGxvbmdpdHVkZSxcbiAgbGF0aXR1ZGVcbikge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLy9cbi8vIEZ1bmN0aW9ucyB0byBoYW5kbGUgaW1hZ2VyeSBwYWNrZXRzXG4vL1xuZnVuY3Rpb24gYnVpbGRJbWFnZVJlc291cmNlKGltYWdlcnlQcm92aWRlciwgaW5mbywgeCwgeSwgbGV2ZWwsIHJlcXVlc3QpIHtcbiAgdmFyIHF1YWRLZXkgPSBHb29nbGVFYXJ0aEVudGVycHJpc2VNZXRhZGF0YS50aWxlWFlUb1F1YWRLZXkoeCwgeSwgbGV2ZWwpO1xuICB2YXIgdmVyc2lvbiA9IGluZm8uaW1hZ2VyeVZlcnNpb247XG4gIHZlcnNpb24gPSBkZWZpbmVkKHZlcnNpb24pICYmIHZlcnNpb24gPiAwID8gdmVyc2lvbiA6IDE7XG5cbiAgcmV0dXJuIGltYWdlcnlQcm92aWRlci5fbWV0YWRhdGEucmVzb3VyY2UuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICB1cmw6IFwiZmxhdGZpbGU/ZjEtMFwiICsgcXVhZEtleSArIFwiLWkuXCIgKyB2ZXJzaW9uLnRvU3RyaW5nKCksXG4gICAgcmVxdWVzdDogcmVxdWVzdCxcbiAgfSk7XG59XG5cbi8vIERldGVjdHMgaWYgYSBVaW50OEFycmF5IGlzIGEgSlBFRyBvciBQTkdcbmZ1bmN0aW9uIGdldEltYWdlVHlwZShpbWFnZSkge1xuICB2YXIganBlZyA9IFwiSkZJRlwiO1xuICBpZiAoXG4gICAgaW1hZ2VbNl0gPT09IGpwZWcuY2hhckNvZGVBdCgwKSAmJlxuICAgIGltYWdlWzddID09PSBqcGVnLmNoYXJDb2RlQXQoMSkgJiZcbiAgICBpbWFnZVs4XSA9PT0ganBlZy5jaGFyQ29kZUF0KDIpICYmXG4gICAgaW1hZ2VbOV0gPT09IGpwZWcuY2hhckNvZGVBdCgzKVxuICApIHtcbiAgICByZXR1cm4gXCJpbWFnZS9qcGVnXCI7XG4gIH1cblxuICB2YXIgcG5nID0gXCJQTkdcIjtcbiAgaWYgKFxuICAgIGltYWdlWzFdID09PSBwbmcuY2hhckNvZGVBdCgwKSAmJlxuICAgIGltYWdlWzJdID09PSBwbmcuY2hhckNvZGVBdCgxKSAmJlxuICAgIGltYWdlWzNdID09PSBwbmcuY2hhckNvZGVBdCgyKVxuICApIHtcbiAgICByZXR1cm4gXCJpbWFnZS9wbmdcIjtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8vIERlY29kZXMgYW4gSW1hZ2VyeSBwcm90b2J1ZiBpbnRvIHRoZSBtZXNzYWdlXG4vLyBQYXJ0aWFsbHkgZ2VuZXJhdGVkIHdpdGggdGhlIGhlbHAgb2YgcHJvdG9idWYuanMgc3RhdGljIGdlbmVyYXRvclxuZnVuY3Rpb24gZGVjb2RlRWFydGhJbWFnZXJ5UGFja2V0KGRhdGEpIHtcbiAgdmFyIHJlYWRlciA9IHByb3RvYnVmLlJlYWRlci5jcmVhdGUoZGF0YSk7XG4gIHZhciBlbmQgPSByZWFkZXIubGVuO1xuICB2YXIgbWVzc2FnZSA9IHt9O1xuICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgbWVzc2FnZS5pbWFnZVR5cGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBtZXNzYWdlLmltYWdlRGF0YSA9IHJlYWRlci5ieXRlcygpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgbWVzc2FnZS5hbHBoYVR5cGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICBtZXNzYWdlLmltYWdlQWxwaGEgPSByZWFkZXIuYnl0ZXMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDU6XG4gICAgICAgIHZhciBjb3B5cmlnaHRJZHMgPSBtZXNzYWdlLmNvcHlyaWdodElkcztcbiAgICAgICAgaWYgKCFkZWZpbmVkKGNvcHlyaWdodElkcykpIHtcbiAgICAgICAgICBjb3B5cmlnaHRJZHMgPSBtZXNzYWdlLmNvcHlyaWdodElkcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICB2YXIgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKSB7XG4gICAgICAgICAgICBjb3B5cmlnaHRJZHMucHVzaChyZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb3B5cmlnaHRJZHMucHVzaChyZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgaW1hZ2VUeXBlID0gbWVzc2FnZS5pbWFnZVR5cGU7XG4gIGlmIChkZWZpbmVkKGltYWdlVHlwZSkpIHtcbiAgICBzd2l0Y2ggKGltYWdlVHlwZSkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBtZXNzYWdlLmltYWdlVHlwZSA9IFwiaW1hZ2UvanBlZ1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgbWVzc2FnZS5pbWFnZVR5cGUgPSBcImltYWdlL3BuZ1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgXCJHb29nbGVFYXJ0aEVudGVycHJpc2VJbWFnZXJ5UHJvdmlkZXI6IFVuc3VwcG9ydGVkIGltYWdlIHR5cGUuXCJcbiAgICAgICAgKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYWxwaGFUeXBlID0gbWVzc2FnZS5hbHBoYVR5cGU7XG4gIGlmIChkZWZpbmVkKGFscGhhVHlwZSkgJiYgYWxwaGFUeXBlICE9PSAwKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIkdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlcjogRXh0ZXJuYWwgYWxwaGEgbm90IHN1cHBvcnRlZC5cIlxuICAgICk7XG4gICAgZGVsZXRlIG1lc3NhZ2UuYWxwaGFUeXBlO1xuICAgIGRlbGV0ZSBtZXNzYWdlLmltYWdlQWxwaGE7XG4gIH1cblxuICByZXR1cm4gbWVzc2FnZTtcbn1cbmV4cG9ydCBkZWZhdWx0IEdvb2dsZUVhcnRoRW50ZXJwcmlzZUltYWdlcnlQcm92aWRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///85365\n')},75611:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _Core_buildModuleUrl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72000);\n/* harmony import */ var _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66553);\n/* harmony import */ var _Core_Credit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52975);\n/* harmony import */ var _Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62200);\n/* harmony import */ var _Core_defined_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(82982);\n/* harmony import */ var _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12572);\n/* harmony import */ var _Core_Event_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(14459);\n/* harmony import */ var _Core_GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71351);\n/* harmony import */ var _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(96190);\n/* harmony import */ var _Core_Resource_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(68985);\n/* harmony import */ var _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(9407);\n/* harmony import */ var _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(9121);\n/* harmony import */ var _Core_WebMercatorTilingScheme_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(42423);\n/* harmony import */ var _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(13222);\n/* harmony import */ var _ImageryProvider_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(95451);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @typedef {Object} GoogleEarthEnterpriseMapsProvider.ConstructorOptions\n *\n * Initialization options for the GoogleEarthEnterpriseMapsProvider constructor\n *\n * @property {Resource|String} url The url of the Google Earth server hosting the imagery.\n * @property {Number} channel The channel (id) to be used when requesting data from the server.\n *        The channel number can be found by looking at the json file located at:\n *        earth.localdomain/default_map/query?request=Json&vars=geeServerDefs The /default_map path may\n *        differ depending on your Google Earth Enterprise server configuration. Look for the "id" that\n *        is associated with a "ImageryMaps" requestType. There may be more than one id available.\n *        Example:\n *        {\n *          layers: [\n *            {\n *              id: 1002,\n *              requestType: "ImageryMaps"\n *            },\n *            {\n *              id: 1007,\n *              requestType: "VectorMapsRaster"\n *            }\n *          ]\n *        }\n * @property {String} [path="/default_map"] The path of the Google Earth server hosting the imagery.\n * @property {Number} [maximumLevel] The maximum level-of-detail supported by the Google Earth\n *        Enterprise server, or undefined if there is no limit.\n * @property {TileDiscardPolicy} [tileDiscardPolicy] The policy that determines if a tile\n *        is invalid and should be discarded. To ensure that no tiles are discarded, construct and pass\n *        a {@link NeverTileDiscardPolicy} for this parameter.\n * @property {Ellipsoid} [ellipsoid] The ellipsoid.  If not specified, the WGS84 ellipsoid is used.\n */\n\n/**\n * Provides tiled imagery using the Google Earth Imagery API.\n *\n * Notes: This imagery provider does not work with the public Google Earth servers. It works with the\n *        Google Earth Enterprise Server.\n *\n *        By default the Google Earth Enterprise server does not set the\n *        {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing} headers. You can either\n *        use a proxy server which adds these headers, or in the /opt/google/gehttpd/conf/gehttpd.conf\n *        and add the \'Header set Access-Control-Allow-Origin "*"\' option to the \'&lt;Directory /&gt;\' and\n *        \'&lt;Directory "/opt/google/gehttpd/htdocs"&gt;\' directives.\n *\n *        This provider is for use with 2D Maps API as part of Google Earth Enterprise. For 3D Earth API uses, it\n *        is necessary to use {@link GoogleEarthEnterpriseImageryProvider}\n *\n * @alias GoogleEarthEnterpriseMapsProvider\n * @constructor\n *\n * @param {GoogleEarthEnterpriseMapsProvider.ConstructorOptions} options Object describing initialization options\n *\n * @exception {RuntimeError} Could not find layer with channel (id) of <code>options.channel</code>.\n * @exception {RuntimeError} Could not find a version in channel (id) <code>options.channel</code>.\n * @exception {RuntimeError} Unsupported projection <code>data.projection</code>.\n *\n * @see ArcGisMapServerImageryProvider\n * @see BingMapsImageryProvider\n * @see OpenStreetMapImageryProvider\n * @see SingleTileImageryProvider\n * @see TileMapServiceImageryProvider\n * @see WebMapServiceImageryProvider\n * @see WebMapTileServiceImageryProvider\n * @see UrlTemplateImageryProvider\n *\n *\n * @example\n * var google = new Cesium.GoogleEarthEnterpriseMapsProvider({\n *     url : \'https://earth.localdomain\',\n *     channel : 1008\n * });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n */\nfunction GoogleEarthEnterpriseMapsProvider(options) {\n  options = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options, {});\n\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(options.url)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("options.url is required.");\n  }\n  if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(options.channel)) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z("options.channel is required.");\n  }\n  //>>includeEnd(\'debug\');\n\n  /**\n   * The default alpha blending value of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the night side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultNightAlpha = undefined;\n\n  /**\n   * The default alpha blending value on the day side of the globe of this provider, with 0.0 representing fully transparent and\n   * 1.0 representing fully opaque.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultDayAlpha = undefined;\n\n  /**\n   * The default brightness of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0\n   * makes the imagery darker while greater than 1.0 makes it brighter.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultBrightness = undefined;\n\n  /**\n   * The default contrast of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces\n   * the contrast while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultContrast = undefined;\n\n  /**\n   * The default hue of this provider in radians. 0.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultHue = undefined;\n\n  /**\n   * The default saturation of this provider. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the\n   * saturation while greater than 1.0 increases it.\n   *\n   * @type {Number|undefined}\n   * @default undefined\n   */\n  this.defaultSaturation = undefined;\n\n  /**\n   * The default gamma correction to apply to this provider.  1.0 uses the unmodified imagery color.\n   *\n   * @type {Number|undefined}\n   * @default 1.9\n   */\n  this.defaultGamma = 1.9;\n\n  /**\n   * The default texture minification filter to apply to this provider.\n   *\n   * @type {TextureMinificationFilter}\n   * @default undefined\n   */\n  this.defaultMinificationFilter = undefined;\n\n  /**\n   * The default texture magnification filter to apply to this provider.\n   *\n   * @type {TextureMagnificationFilter}\n   * @default undefined\n   */\n  this.defaultMagnificationFilter = undefined;\n\n  var url = options.url;\n  var path = (0,_Core_defaultValue_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(options.path, "/default_map");\n\n  var resource = _Core_Resource_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"].createIfNeeded */ .Z.createIfNeeded(url).getDerivedResource({\n    // We used to just append path to url, so now that we do proper URI resolution, removed the /\n    url: path[0] === "/" ? path.substring(1) : path,\n  });\n\n  resource.appendForwardSlash();\n\n  this._resource = resource;\n  this._url = url;\n  this._path = path;\n  this._tileDiscardPolicy = options.tileDiscardPolicy;\n  this._channel = options.channel;\n  this._requestType = "ImageryMaps";\n  this._credit = new _Core_Credit_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(\n    \'<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="\' +\n      GoogleEarthEnterpriseMapsProvider.logoUrl +\n      \'" title="Google Imagery"/></a>\'\n  );\n\n  this._tilingScheme = undefined;\n\n  this._version = undefined;\n\n  this._tileWidth = 256;\n  this._tileHeight = 256;\n  this._maximumLevel = options.maximumLevel;\n\n  this._errorEvent = new _Core_Event_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z();\n\n  this._ready = false;\n  this._readyPromise = _ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"].defer */ .Z.defer();\n\n  var metadataResource = resource.getDerivedResource({\n    url: "query",\n    queryParameters: {\n      request: "Json",\n      vars: "geeServerDefs",\n      is2d: "t",\n    },\n  });\n  var that = this;\n  var metadataError;\n\n  function metadataSuccess(text) {\n    var data;\n\n    // The Google Earth server sends malformed JSON data currently...\n    try {\n      // First, try parsing it like normal in case a future version sends correctly formatted JSON\n      data = JSON.parse(text);\n    } catch (e) {\n      // Quote object strings manually, then try parsing again\n      data = JSON.parse(\n        text.replace(/([\\[\\{,])[\\n\\r ]*([A-Za-z0-9]+)[\\n\\r ]*:/g, \'$1"$2":\')\n      );\n    }\n\n    var layer;\n    for (var i = 0; i < data.layers.length; i++) {\n      if (data.layers[i].id === that._channel) {\n        layer = data.layers[i];\n        break;\n      }\n    }\n\n    var message;\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(layer)) {\n      message =\n        "Could not find layer with channel (id) of " + that._channel + ".";\n      metadataError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].handleError */ .Z.handleError(\n        metadataError,\n        that,\n        that._errorEvent,\n        message,\n        undefined,\n        undefined,\n        undefined,\n        requestMetadata\n      );\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(message);\n    }\n\n    if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(layer.version)) {\n      message =\n        "Could not find a version in channel (id) " + that._channel + ".";\n      metadataError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].handleError */ .Z.handleError(\n        metadataError,\n        that,\n        that._errorEvent,\n        message,\n        undefined,\n        undefined,\n        undefined,\n        requestMetadata\n      );\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(message);\n    }\n    that._version = layer.version;\n\n    if ((0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(data.projection) && data.projection === "flat") {\n      that._tilingScheme = new _Core_GeographicTilingScheme_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z({\n        numberOfLevelZeroTilesX: 2,\n        numberOfLevelZeroTilesY: 2,\n        rectangle: new _Core_Rectangle_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(-Math.PI, -Math.PI, Math.PI, Math.PI),\n        ellipsoid: options.ellipsoid,\n      });\n      // Default to mercator projection when projection is undefined\n    } else if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(data.projection) || data.projection === "mercator") {\n      that._tilingScheme = new _Core_WebMercatorTilingScheme_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z({\n        numberOfLevelZeroTilesX: 2,\n        numberOfLevelZeroTilesY: 2,\n        ellipsoid: options.ellipsoid,\n      });\n    } else {\n      message = "Unsupported projection " + data.projection + ".";\n      metadataError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].handleError */ .Z.handleError(\n        metadataError,\n        that,\n        that._errorEvent,\n        message,\n        undefined,\n        undefined,\n        undefined,\n        requestMetadata\n      );\n      throw new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(message);\n    }\n\n    that._ready = true;\n    that._readyPromise.resolve(true);\n    _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].handleSuccess */ .Z.handleSuccess(metadataError);\n  }\n\n  function metadataFailure(e) {\n    var message =\n      "An error occurred while accessing " + metadataResource.url + ".";\n    metadataError = _Core_TileProviderError_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"].handleError */ .Z.handleError(\n      metadataError,\n      that,\n      that._errorEvent,\n      message,\n      undefined,\n      undefined,\n      undefined,\n      requestMetadata\n    );\n    that._readyPromise.reject(new _Core_RuntimeError_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z(message));\n  }\n\n  function requestMetadata() {\n    var metadata = metadataResource.fetchText();\n    (0,_ThirdParty_when_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(metadata, metadataSuccess, metadataFailure);\n  }\n\n  requestMetadata();\n}\n\nObject.defineProperties(GoogleEarthEnterpriseMapsProvider.prototype, {\n  /**\n   * Gets the URL of the Google Earth MapServer.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  url: {\n    get: function () {\n      return this._url;\n    },\n  },\n\n  /**\n   * Gets the url path of the data on the Google Earth server.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  path: {\n    get: function () {\n      return this._path;\n    },\n  },\n\n  /**\n   * Gets the proxy used by this provider.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Proxy}\n   * @readonly\n   */\n  proxy: {\n    get: function () {\n      return this._resource.proxy;\n    },\n  },\n\n  /**\n   * Gets the imagery channel (id) currently being used.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  channel: {\n    get: function () {\n      return this._channel;\n    },\n  },\n\n  /**\n   * Gets the width of each tile, in pixels. This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileWidth: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tileWidth must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileWidth;\n    },\n  },\n\n  /**\n   * Gets the height of each tile, in pixels.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  tileHeight: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tileHeight must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileHeight;\n    },\n  },\n\n  /**\n   * Gets the maximum level-of-detail that can be requested.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Number|undefined}\n   * @readonly\n   */\n  maximumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "maximumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._maximumLevel;\n    },\n  },\n\n  /**\n   * Gets the minimum level-of-detail that can be requested.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  minimumLevel: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "minimumLevel must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return 0;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tilingScheme must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the version of the data used by this provider.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Number}\n   * @readonly\n   */\n  version: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "version must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._version;\n    },\n  },\n\n  /**\n   * Gets the type of data that is being requested from the provider.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {String}\n   * @readonly\n   */\n  requestType: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "requestType must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._requestType;\n    },\n  },\n  /**\n   * Gets the rectangle, in radians, of the imagery provided by this instance.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Rectangle}\n   * @readonly\n   */\n  rectangle: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "rectangle must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tilingScheme.rectangle;\n    },\n  },\n\n  /**\n   * Gets the tile discard policy.  If not undefined, the discard policy is responsible\n   * for filtering out "missing" tiles via its shouldDiscardImage function.  If this function\n   * returns undefined, no tiles are filtered.  This function should\n   * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {TileDiscardPolicy}\n   * @readonly\n   */\n  tileDiscardPolicy: {\n    get: function () {\n      //>>includeStart(\'debug\', pragmas.debug);\n      if (!this._ready) {\n        throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n          "tileDiscardPolicy must not be called before the imagery provider is ready."\n        );\n      }\n      //>>includeEnd(\'debug\');\n\n      return this._tileDiscardPolicy;\n    },\n  },\n\n  /**\n   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit\n   * the source of the imagery.  This function should not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return this._credit;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the images provided by this imagery provider\n   * include an alpha channel.  If this property is false, an alpha channel, if present, will\n   * be ignored.  If this property is true, any images without an alpha channel will be treated\n   * as if their alpha is 1.0 everywhere.  When this property is false, memory usage\n   * and texture upload time are reduced.\n   * @memberof GoogleEarthEnterpriseMapsProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasAlphaChannel: {\n    get: function () {\n      return true;\n    },\n  },\n});\n\n/**\n * Gets the credits to be displayed when a given tile is displayed.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level;\n * @returns {Credit[]} The credits to be displayed when the tile is displayed.\n *\n * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.\n */\nGoogleEarthEnterpriseMapsProvider.prototype.getTileCredits = function (\n  x,\n  y,\n  level\n) {\n  return undefined;\n};\n\n/**\n * Requests the image for a given tile.  This function should\n * not be called before {@link GoogleEarthEnterpriseMapsProvider#ready} returns true.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or\n *          undefined if there are too many active requests to the server, and the request\n *          should be retried later.  The resolved image may be either an\n *          Image or a Canvas DOM object.\n *\n * @exception {DeveloperError} <code>requestImage</code> must not be called before the imagery provider is ready.\n */\nGoogleEarthEnterpriseMapsProvider.prototype.requestImage = function (\n  x,\n  y,\n  level,\n  request\n) {\n  //>>includeStart(\'debug\', pragmas.debug);\n  if (!this._ready) {\n    throw new _Core_DeveloperError_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z(\n      "requestImage must not be called before the imagery provider is ready."\n    );\n  }\n  //>>includeEnd(\'debug\');\n\n  var resource = this._resource.getDerivedResource({\n    url: "query",\n    request: request,\n    queryParameters: {\n      request: this._requestType,\n      channel: this._channel,\n      version: this._version,\n      x: x,\n      y: y,\n      z: level + 1, // Google Earth starts with a zoom level of 1, not 0\n    },\n  });\n\n  return _ImageryProvider_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"].loadImage */ .Z.loadImage(this, resource);\n};\n\n/**\n * Picking features is not currently supported by this imagery provider, so this function simply returns\n * undefined.\n *\n * @param {Number} x The tile X coordinate.\n * @param {Number} y The tile Y coordinate.\n * @param {Number} level The tile level.\n * @param {Number} longitude The longitude at which to pick features.\n * @param {Number} latitude  The latitude at which to pick features.\n * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous\n *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}\n *                   instances.  The array may be empty if no features are found at the given location.\n *                   It may also be undefined if picking is not supported.\n */\nGoogleEarthEnterpriseMapsProvider.prototype.pickFeatures = function (\n  x,\n  y,\n  level,\n  longitude,\n  latitude\n) {\n  return undefined;\n};\n\nGoogleEarthEnterpriseMapsProvider._logoUrl = undefined;\n\nObject.defineProperties(GoogleEarthEnterpriseMapsProvider, {\n  /**\n   * Gets or sets the URL to the Google Earth logo for display in the credit.\n   * @memberof GoogleEarthEnterpriseMapsProvider\n   * @type {String}\n   */\n  logoUrl: {\n    get: function () {\n      if (!(0,_Core_defined_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z)(GoogleEarthEnterpriseMapsProvider._logoUrl)) {\n        GoogleEarthEnterpriseMapsProvider._logoUrl = (0,_Core_buildModuleUrl_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(\n          "Assets/Images/google_earth_credit.png"\n        );\n      }\n      return GoogleEarthEnterpriseMapsProvider._logoUrl;\n    },\n    set: function (value) {\n      //>>includeStart(\'debug\', pragmas.debug);\n      _Core_Check_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"].defined */ .Z.defined("value", value);\n      //>>includeEnd(\'debug\');\n\n      GoogleEarthEnterpriseMapsProvider._logoUrl = value;\n    },\n  },\n});\n/* harmony default export */ __webpack_exports__["Z"] = (GoogleEarthEnterpriseMapsProvider);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQStDO0FBQzFFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQStDO0FBQzFFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQStDO0FBQzFFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQStDO0FBQzFFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQStDO0FBQzFFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQStDO0FBQzFFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLDJCQUEyQiwrQ0FBK0M7QUFDMUU7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdFQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQStDO0FBQzFFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx3QkFBd0I7QUFDeEQ7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsNEVBQTRFLCtDQUErQztBQUMzSDtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFVBQVU7QUFDdkI7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUIsK0NBQStDO0FBQ3hFO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsd0RBQXdEO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3RUFBYztBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVILFNBQVMseUZBQXlCO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixZQUFZLCtDQUErQztBQUMzRCw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0VBQU87QUFDbEIscURBQXFELDRFQUFjO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNLCtFQUFhO0FBQ25COztBQUVBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0QseURBQWUsaUNBQWlDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUzLXdlYnBhY2s1Ly4vbm9kZV9tb2R1bGVzL2Nlc2l1bS9Tb3VyY2UvU2NlbmUvR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLmpzPzg4YjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJ1aWxkTW9kdWxlVXJsIGZyb20gXCIuLi9Db3JlL2J1aWxkTW9kdWxlVXJsLmpzXCI7XG5pbXBvcnQgQ2hlY2sgZnJvbSBcIi4uL0NvcmUvQ2hlY2suanNcIjtcbmltcG9ydCBDcmVkaXQgZnJvbSBcIi4uL0NvcmUvQ3JlZGl0LmpzXCI7XG5pbXBvcnQgZGVmYXVsdFZhbHVlIGZyb20gXCIuLi9Db3JlL2RlZmF1bHRWYWx1ZS5qc1wiO1xuaW1wb3J0IGRlZmluZWQgZnJvbSBcIi4uL0NvcmUvZGVmaW5lZC5qc1wiO1xuaW1wb3J0IERldmVsb3BlckVycm9yIGZyb20gXCIuLi9Db3JlL0RldmVsb3BlckVycm9yLmpzXCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIi4uL0NvcmUvRXZlbnQuanNcIjtcbmltcG9ydCBHZW9ncmFwaGljVGlsaW5nU2NoZW1lIGZyb20gXCIuLi9Db3JlL0dlb2dyYXBoaWNUaWxpbmdTY2hlbWUuanNcIjtcbmltcG9ydCBSZWN0YW5nbGUgZnJvbSBcIi4uL0NvcmUvUmVjdGFuZ2xlLmpzXCI7XG5pbXBvcnQgUmVzb3VyY2UgZnJvbSBcIi4uL0NvcmUvUmVzb3VyY2UuanNcIjtcbmltcG9ydCBSdW50aW1lRXJyb3IgZnJvbSBcIi4uL0NvcmUvUnVudGltZUVycm9yLmpzXCI7XG5pbXBvcnQgVGlsZVByb3ZpZGVyRXJyb3IgZnJvbSBcIi4uL0NvcmUvVGlsZVByb3ZpZGVyRXJyb3IuanNcIjtcbmltcG9ydCBXZWJNZXJjYXRvclRpbGluZ1NjaGVtZSBmcm9tIFwiLi4vQ29yZS9XZWJNZXJjYXRvclRpbGluZ1NjaGVtZS5qc1wiO1xuaW1wb3J0IHdoZW4gZnJvbSBcIi4uL1RoaXJkUGFydHkvd2hlbi5qc1wiO1xuaW1wb3J0IEltYWdlcnlQcm92aWRlciBmcm9tIFwiLi9JbWFnZXJ5UHJvdmlkZXIuanNcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIuQ29uc3RydWN0b3JPcHRpb25zXG4gKlxuICogSW5pdGlhbGl6YXRpb24gb3B0aW9ucyBmb3IgdGhlIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlciBjb25zdHJ1Y3RvclxuICpcbiAqIEBwcm9wZXJ0eSB7UmVzb3VyY2V8U3RyaW5nfSB1cmwgVGhlIHVybCBvZiB0aGUgR29vZ2xlIEVhcnRoIHNlcnZlciBob3N0aW5nIHRoZSBpbWFnZXJ5LlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IGNoYW5uZWwgVGhlIGNoYW5uZWwgKGlkKSB0byBiZSB1c2VkIHdoZW4gcmVxdWVzdGluZyBkYXRhIGZyb20gdGhlIHNlcnZlci5cbiAqICAgICAgICBUaGUgY2hhbm5lbCBudW1iZXIgY2FuIGJlIGZvdW5kIGJ5IGxvb2tpbmcgYXQgdGhlIGpzb24gZmlsZSBsb2NhdGVkIGF0OlxuICogICAgICAgIGVhcnRoLmxvY2FsZG9tYWluL2RlZmF1bHRfbWFwL3F1ZXJ5P3JlcXVlc3Q9SnNvbiZ2YXJzPWdlZVNlcnZlckRlZnMgVGhlIC9kZWZhdWx0X21hcCBwYXRoIG1heVxuICogICAgICAgIGRpZmZlciBkZXBlbmRpbmcgb24geW91ciBHb29nbGUgRWFydGggRW50ZXJwcmlzZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi4gTG9vayBmb3IgdGhlIFwiaWRcIiB0aGF0XG4gKiAgICAgICAgaXMgYXNzb2NpYXRlZCB3aXRoIGEgXCJJbWFnZXJ5TWFwc1wiIHJlcXVlc3RUeXBlLiBUaGVyZSBtYXkgYmUgbW9yZSB0aGFuIG9uZSBpZCBhdmFpbGFibGUuXG4gKiAgICAgICAgRXhhbXBsZTpcbiAqICAgICAgICB7XG4gKiAgICAgICAgICBsYXllcnM6IFtcbiAqICAgICAgICAgICAge1xuICogICAgICAgICAgICAgIGlkOiAxMDAyLFxuICogICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiBcIkltYWdlcnlNYXBzXCJcbiAqICAgICAgICAgICAgfSxcbiAqICAgICAgICAgICAge1xuICogICAgICAgICAgICAgIGlkOiAxMDA3LFxuICogICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiBcIlZlY3Rvck1hcHNSYXN0ZXJcIlxuICogICAgICAgICAgICB9XG4gKiAgICAgICAgICBdXG4gKiAgICAgICAgfVxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtwYXRoPVwiL2RlZmF1bHRfbWFwXCJdIFRoZSBwYXRoIG9mIHRoZSBHb29nbGUgRWFydGggc2VydmVyIGhvc3RpbmcgdGhlIGltYWdlcnkuXG4gKiBAcHJvcGVydHkge051bWJlcn0gW21heGltdW1MZXZlbF0gVGhlIG1heGltdW0gbGV2ZWwtb2YtZGV0YWlsIHN1cHBvcnRlZCBieSB0aGUgR29vZ2xlIEVhcnRoXG4gKiAgICAgICAgRW50ZXJwcmlzZSBzZXJ2ZXIsIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBpcyBubyBsaW1pdC5cbiAqIEBwcm9wZXJ0eSB7VGlsZURpc2NhcmRQb2xpY3l9IFt0aWxlRGlzY2FyZFBvbGljeV0gVGhlIHBvbGljeSB0aGF0IGRldGVybWluZXMgaWYgYSB0aWxlXG4gKiAgICAgICAgaXMgaW52YWxpZCBhbmQgc2hvdWxkIGJlIGRpc2NhcmRlZC4gVG8gZW5zdXJlIHRoYXQgbm8gdGlsZXMgYXJlIGRpc2NhcmRlZCwgY29uc3RydWN0IGFuZCBwYXNzXG4gKiAgICAgICAgYSB7QGxpbmsgTmV2ZXJUaWxlRGlzY2FyZFBvbGljeX0gZm9yIHRoaXMgcGFyYW1ldGVyLlxuICogQHByb3BlcnR5IHtFbGxpcHNvaWR9IFtlbGxpcHNvaWRdIFRoZSBlbGxpcHNvaWQuICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgV0dTODQgZWxsaXBzb2lkIGlzIHVzZWQuXG4gKi9cblxuLyoqXG4gKiBQcm92aWRlcyB0aWxlZCBpbWFnZXJ5IHVzaW5nIHRoZSBHb29nbGUgRWFydGggSW1hZ2VyeSBBUEkuXG4gKlxuICogTm90ZXM6IFRoaXMgaW1hZ2VyeSBwcm92aWRlciBkb2VzIG5vdCB3b3JrIHdpdGggdGhlIHB1YmxpYyBHb29nbGUgRWFydGggc2VydmVycy4gSXQgd29ya3Mgd2l0aCB0aGVcbiAqICAgICAgICBHb29nbGUgRWFydGggRW50ZXJwcmlzZSBTZXJ2ZXIuXG4gKlxuICogICAgICAgIEJ5IGRlZmF1bHQgdGhlIEdvb2dsZSBFYXJ0aCBFbnRlcnByaXNlIHNlcnZlciBkb2VzIG5vdCBzZXQgdGhlXG4gKiAgICAgICAge0BsaW5rIGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvfENyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nfSBoZWFkZXJzLiBZb3UgY2FuIGVpdGhlclxuICogICAgICAgIHVzZSBhIHByb3h5IHNlcnZlciB3aGljaCBhZGRzIHRoZXNlIGhlYWRlcnMsIG9yIGluIHRoZSAvb3B0L2dvb2dsZS9nZWh0dHBkL2NvbmYvZ2VodHRwZC5jb25mXG4gKiAgICAgICAgYW5kIGFkZCB0aGUgJ0hlYWRlciBzZXQgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luIFwiKlwiJyBvcHRpb24gdG8gdGhlICcmbHQ7RGlyZWN0b3J5IC8mZ3Q7JyBhbmRcbiAqICAgICAgICAnJmx0O0RpcmVjdG9yeSBcIi9vcHQvZ29vZ2xlL2dlaHR0cGQvaHRkb2NzXCImZ3Q7JyBkaXJlY3RpdmVzLlxuICpcbiAqICAgICAgICBUaGlzIHByb3ZpZGVyIGlzIGZvciB1c2Ugd2l0aCAyRCBNYXBzIEFQSSBhcyBwYXJ0IG9mIEdvb2dsZSBFYXJ0aCBFbnRlcnByaXNlLiBGb3IgM0QgRWFydGggQVBJIHVzZXMsIGl0XG4gKiAgICAgICAgaXMgbmVjZXNzYXJ5IHRvIHVzZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlSW1hZ2VyeVByb3ZpZGVyfVxuICpcbiAqIEBhbGlhcyBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXJcbiAqIEBjb25zdHJ1Y3RvclxuICpcbiAqIEBwYXJhbSB7R29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLkNvbnN0cnVjdG9yT3B0aW9uc30gb3B0aW9ucyBPYmplY3QgZGVzY3JpYmluZyBpbml0aWFsaXphdGlvbiBvcHRpb25zXG4gKlxuICogQGV4Y2VwdGlvbiB7UnVudGltZUVycm9yfSBDb3VsZCBub3QgZmluZCBsYXllciB3aXRoIGNoYW5uZWwgKGlkKSBvZiA8Y29kZT5vcHRpb25zLmNoYW5uZWw8L2NvZGU+LlxuICogQGV4Y2VwdGlvbiB7UnVudGltZUVycm9yfSBDb3VsZCBub3QgZmluZCBhIHZlcnNpb24gaW4gY2hhbm5lbCAoaWQpIDxjb2RlPm9wdGlvbnMuY2hhbm5lbDwvY29kZT4uXG4gKiBAZXhjZXB0aW9uIHtSdW50aW1lRXJyb3J9IFVuc3VwcG9ydGVkIHByb2plY3Rpb24gPGNvZGU+ZGF0YS5wcm9qZWN0aW9uPC9jb2RlPi5cbiAqXG4gKiBAc2VlIEFyY0dpc01hcFNlcnZlckltYWdlcnlQcm92aWRlclxuICogQHNlZSBCaW5nTWFwc0ltYWdlcnlQcm92aWRlclxuICogQHNlZSBPcGVuU3RyZWV0TWFwSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFNpbmdsZVRpbGVJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgVGlsZU1hcFNlcnZpY2VJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgV2ViTWFwU2VydmljZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBXZWJNYXBUaWxlU2VydmljZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBVcmxUZW1wbGF0ZUltYWdlcnlQcm92aWRlclxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIGdvb2dsZSA9IG5ldyBDZXNpdW0uR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyKHtcbiAqICAgICB1cmwgOiAnaHR0cHM6Ly9lYXJ0aC5sb2NhbGRvbWFpbicsXG4gKiAgICAgY2hhbm5lbCA6IDEwMDhcbiAqIH0pO1xuICpcbiAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvfENyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nfVxuICovXG5mdW5jdGlvbiBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIob3B0aW9ucykge1xuICBvcHRpb25zID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMsIHt9KTtcblxuICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICBpZiAoIWRlZmluZWQob3B0aW9ucy51cmwpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy51cmwgaXMgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghZGVmaW5lZChvcHRpb25zLmNoYW5uZWwpKSB7XG4gICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFwib3B0aW9ucy5jaGFubmVsIGlzIHJlcXVpcmVkLlwiKTtcbiAgfVxuICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb2YgdGhpcyBwcm92aWRlciwgd2l0aCAwLjAgcmVwcmVzZW50aW5nIGZ1bGx5IHRyYW5zcGFyZW50IGFuZFxuICAgKiAxLjAgcmVwcmVzZW50aW5nIGZ1bGx5IG9wYXF1ZS5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0QWxwaGEgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFscGhhIGJsZW5kaW5nIHZhbHVlIG9uIHRoZSBuaWdodCBzaWRlIG9mIHRoZSBnbG9iZSBvZiB0aGlzIHByb3ZpZGVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHROaWdodEFscGhhID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBhbHBoYSBibGVuZGluZyB2YWx1ZSBvbiB0aGUgZGF5IHNpZGUgb2YgdGhlIGdsb2JlIG9mIHRoaXMgcHJvdmlkZXIsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdERheUFscGhhID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBicmlnaHRuZXNzIG9mIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiAgTGVzcyB0aGFuIDEuMFxuICAgKiBtYWtlcyB0aGUgaW1hZ2VyeSBkYXJrZXIgd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBtYWtlcyBpdCBicmlnaHRlci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0QnJpZ2h0bmVzcyA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgY29udHJhc3Qgb2YgdGhpcyBwcm92aWRlci4gIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuICBMZXNzIHRoYW4gMS4wIHJlZHVjZXNcbiAgICogdGhlIGNvbnRyYXN0IHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgaW5jcmVhc2VzIGl0LlxuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRDb250cmFzdCA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgaHVlIG9mIHRoaXMgcHJvdmlkZXIgaW4gcmFkaWFucy4gMC4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0SHVlID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBzYXR1cmF0aW9uIG9mIHRoaXMgcHJvdmlkZXIuIDEuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuIExlc3MgdGhhbiAxLjAgcmVkdWNlcyB0aGVcbiAgICogc2F0dXJhdGlvbiB3aGlsZSBncmVhdGVyIHRoYW4gMS4wIGluY3JlYXNlcyBpdC5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgdGhpcy5kZWZhdWx0U2F0dXJhdGlvbiA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgZ2FtbWEgY29ycmVjdGlvbiB0byBhcHBseSB0byB0aGlzIHByb3ZpZGVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci5cbiAgICpcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEBkZWZhdWx0IDEuOVxuICAgKi9cbiAgdGhpcy5kZWZhdWx0R2FtbWEgPSAxLjk7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHRleHR1cmUgbWluaWZpY2F0aW9uIGZpbHRlciB0byBhcHBseSB0byB0aGlzIHByb3ZpZGVyLlxuICAgKlxuICAgKiBAdHlwZSB7VGV4dHVyZU1pbmlmaWNhdGlvbkZpbHRlcn1cbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICB0aGlzLmRlZmF1bHRNaW5pZmljYXRpb25GaWx0ZXIgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHRleHR1cmUgbWFnbmlmaWNhdGlvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhpcyBwcm92aWRlci5cbiAgICpcbiAgICogQHR5cGUge1RleHR1cmVNYWduaWZpY2F0aW9uRmlsdGVyfVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHRoaXMuZGVmYXVsdE1hZ25pZmljYXRpb25GaWx0ZXIgPSB1bmRlZmluZWQ7XG5cbiAgdmFyIHVybCA9IG9wdGlvbnMudXJsO1xuICB2YXIgcGF0aCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnBhdGgsIFwiL2RlZmF1bHRfbWFwXCIpO1xuXG4gIHZhciByZXNvdXJjZSA9IFJlc291cmNlLmNyZWF0ZUlmTmVlZGVkKHVybCkuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICAvLyBXZSB1c2VkIHRvIGp1c3QgYXBwZW5kIHBhdGggdG8gdXJsLCBzbyBub3cgdGhhdCB3ZSBkbyBwcm9wZXIgVVJJIHJlc29sdXRpb24sIHJlbW92ZWQgdGhlIC9cbiAgICB1cmw6IHBhdGhbMF0gPT09IFwiL1wiID8gcGF0aC5zdWJzdHJpbmcoMSkgOiBwYXRoLFxuICB9KTtcblxuICByZXNvdXJjZS5hcHBlbmRGb3J3YXJkU2xhc2goKTtcblxuICB0aGlzLl9yZXNvdXJjZSA9IHJlc291cmNlO1xuICB0aGlzLl91cmwgPSB1cmw7XG4gIHRoaXMuX3BhdGggPSBwYXRoO1xuICB0aGlzLl90aWxlRGlzY2FyZFBvbGljeSA9IG9wdGlvbnMudGlsZURpc2NhcmRQb2xpY3k7XG4gIHRoaXMuX2NoYW5uZWwgPSBvcHRpb25zLmNoYW5uZWw7XG4gIHRoaXMuX3JlcXVlc3RUeXBlID0gXCJJbWFnZXJ5TWFwc1wiO1xuICB0aGlzLl9jcmVkaXQgPSBuZXcgQ3JlZGl0KFxuICAgICc8YSBocmVmPVwiaHR0cDovL3d3dy5nb29nbGUuY29tL2VudGVycHJpc2UvbWFwc2VhcnRoL3Byb2R1Y3RzL2VhcnRoZW50ZXJwcmlzZS5odG1sXCI+PGltZyBzcmM9XCInICtcbiAgICAgIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5sb2dvVXJsICtcbiAgICAgICdcIiB0aXRsZT1cIkdvb2dsZSBJbWFnZXJ5XCIvPjwvYT4nXG4gICk7XG5cbiAgdGhpcy5fdGlsaW5nU2NoZW1lID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuX3ZlcnNpb24gPSB1bmRlZmluZWQ7XG5cbiAgdGhpcy5fdGlsZVdpZHRoID0gMjU2O1xuICB0aGlzLl90aWxlSGVpZ2h0ID0gMjU2O1xuICB0aGlzLl9tYXhpbXVtTGV2ZWwgPSBvcHRpb25zLm1heGltdW1MZXZlbDtcblxuICB0aGlzLl9lcnJvckV2ZW50ID0gbmV3IEV2ZW50KCk7XG5cbiAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgdGhpcy5fcmVhZHlQcm9taXNlID0gd2hlbi5kZWZlcigpO1xuXG4gIHZhciBtZXRhZGF0YVJlc291cmNlID0gcmVzb3VyY2UuZ2V0RGVyaXZlZFJlc291cmNlKHtcbiAgICB1cmw6IFwicXVlcnlcIixcbiAgICBxdWVyeVBhcmFtZXRlcnM6IHtcbiAgICAgIHJlcXVlc3Q6IFwiSnNvblwiLFxuICAgICAgdmFyczogXCJnZWVTZXJ2ZXJEZWZzXCIsXG4gICAgICBpczJkOiBcInRcIixcbiAgICB9LFxuICB9KTtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB2YXIgbWV0YWRhdGFFcnJvcjtcblxuICBmdW5jdGlvbiBtZXRhZGF0YVN1Y2Nlc3ModGV4dCkge1xuICAgIHZhciBkYXRhO1xuXG4gICAgLy8gVGhlIEdvb2dsZSBFYXJ0aCBzZXJ2ZXIgc2VuZHMgbWFsZm9ybWVkIEpTT04gZGF0YSBjdXJyZW50bHkuLi5cbiAgICB0cnkge1xuICAgICAgLy8gRmlyc3QsIHRyeSBwYXJzaW5nIGl0IGxpa2Ugbm9ybWFsIGluIGNhc2UgYSBmdXR1cmUgdmVyc2lvbiBzZW5kcyBjb3JyZWN0bHkgZm9ybWF0dGVkIEpTT05cbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHRleHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIFF1b3RlIG9iamVjdCBzdHJpbmdzIG1hbnVhbGx5LCB0aGVuIHRyeSBwYXJzaW5nIGFnYWluXG4gICAgICBkYXRhID0gSlNPTi5wYXJzZShcbiAgICAgICAgdGV4dC5yZXBsYWNlKC8oW1xcW1xceyxdKVtcXG5cXHIgXSooW0EtWmEtejAtOV0rKVtcXG5cXHIgXSo6L2csICckMVwiJDJcIjonKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgbGF5ZXI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRhdGEubGF5ZXJzW2ldLmlkID09PSB0aGF0Ll9jaGFubmVsKSB7XG4gICAgICAgIGxheWVyID0gZGF0YS5sYXllcnNbaV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBtZXNzYWdlO1xuXG4gICAgaWYgKCFkZWZpbmVkKGxheWVyKSkge1xuICAgICAgbWVzc2FnZSA9XG4gICAgICAgIFwiQ291bGQgbm90IGZpbmQgbGF5ZXIgd2l0aCBjaGFubmVsIChpZCkgb2YgXCIgKyB0aGF0Ll9jaGFubmVsICsgXCIuXCI7XG4gICAgICBtZXRhZGF0YUVycm9yID0gVGlsZVByb3ZpZGVyRXJyb3IuaGFuZGxlRXJyb3IoXG4gICAgICAgIG1ldGFkYXRhRXJyb3IsXG4gICAgICAgIHRoYXQsXG4gICAgICAgIHRoYXQuX2Vycm9yRXZlbnQsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHJlcXVlc3RNZXRhZGF0YVxuICAgICAgKTtcbiAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgaWYgKCFkZWZpbmVkKGxheWVyLnZlcnNpb24pKSB7XG4gICAgICBtZXNzYWdlID1cbiAgICAgICAgXCJDb3VsZCBub3QgZmluZCBhIHZlcnNpb24gaW4gY2hhbm5lbCAoaWQpIFwiICsgdGhhdC5fY2hhbm5lbCArIFwiLlwiO1xuICAgICAgbWV0YWRhdGFFcnJvciA9IFRpbGVQcm92aWRlckVycm9yLmhhbmRsZUVycm9yKFxuICAgICAgICBtZXRhZGF0YUVycm9yLFxuICAgICAgICB0aGF0LFxuICAgICAgICB0aGF0Ll9lcnJvckV2ZW50LFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICByZXF1ZXN0TWV0YWRhdGFcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICB0aGF0Ll92ZXJzaW9uID0gbGF5ZXIudmVyc2lvbjtcblxuICAgIGlmIChkZWZpbmVkKGRhdGEucHJvamVjdGlvbikgJiYgZGF0YS5wcm9qZWN0aW9uID09PSBcImZsYXRcIikge1xuICAgICAgdGhhdC5fdGlsaW5nU2NoZW1lID0gbmV3IEdlb2dyYXBoaWNUaWxpbmdTY2hlbWUoe1xuICAgICAgICBudW1iZXJPZkxldmVsWmVyb1RpbGVzWDogMixcbiAgICAgICAgbnVtYmVyT2ZMZXZlbFplcm9UaWxlc1k6IDIsXG4gICAgICAgIHJlY3RhbmdsZTogbmV3IFJlY3RhbmdsZSgtTWF0aC5QSSwgLU1hdGguUEksIE1hdGguUEksIE1hdGguUEkpLFxuICAgICAgICBlbGxpcHNvaWQ6IG9wdGlvbnMuZWxsaXBzb2lkLFxuICAgICAgfSk7XG4gICAgICAvLyBEZWZhdWx0IHRvIG1lcmNhdG9yIHByb2plY3Rpb24gd2hlbiBwcm9qZWN0aW9uIGlzIHVuZGVmaW5lZFxuICAgIH0gZWxzZSBpZiAoIWRlZmluZWQoZGF0YS5wcm9qZWN0aW9uKSB8fCBkYXRhLnByb2plY3Rpb24gPT09IFwibWVyY2F0b3JcIikge1xuICAgICAgdGhhdC5fdGlsaW5nU2NoZW1lID0gbmV3IFdlYk1lcmNhdG9yVGlsaW5nU2NoZW1lKHtcbiAgICAgICAgbnVtYmVyT2ZMZXZlbFplcm9UaWxlc1g6IDIsXG4gICAgICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNZOiAyLFxuICAgICAgICBlbGxpcHNvaWQ6IG9wdGlvbnMuZWxsaXBzb2lkLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgPSBcIlVuc3VwcG9ydGVkIHByb2plY3Rpb24gXCIgKyBkYXRhLnByb2plY3Rpb24gKyBcIi5cIjtcbiAgICAgIG1ldGFkYXRhRXJyb3IgPSBUaWxlUHJvdmlkZXJFcnJvci5oYW5kbGVFcnJvcihcbiAgICAgICAgbWV0YWRhdGFFcnJvcixcbiAgICAgICAgdGhhdCxcbiAgICAgICAgdGhhdC5fZXJyb3JFdmVudCxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgcmVxdWVzdE1ldGFkYXRhXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICB0aGF0Ll9yZWFkeSA9IHRydWU7XG4gICAgdGhhdC5fcmVhZHlQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgVGlsZVByb3ZpZGVyRXJyb3IuaGFuZGxlU3VjY2VzcyhtZXRhZGF0YUVycm9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ldGFkYXRhRmFpbHVyZShlKSB7XG4gICAgdmFyIG1lc3NhZ2UgPVxuICAgICAgXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhY2Nlc3NpbmcgXCIgKyBtZXRhZGF0YVJlc291cmNlLnVybCArIFwiLlwiO1xuICAgIG1ldGFkYXRhRXJyb3IgPSBUaWxlUHJvdmlkZXJFcnJvci5oYW5kbGVFcnJvcihcbiAgICAgIG1ldGFkYXRhRXJyb3IsXG4gICAgICB0aGF0LFxuICAgICAgdGhhdC5fZXJyb3JFdmVudCxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICByZXF1ZXN0TWV0YWRhdGFcbiAgICApO1xuICAgIHRoYXQuX3JlYWR5UHJvbWlzZS5yZWplY3QobmV3IFJ1bnRpbWVFcnJvcihtZXNzYWdlKSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXF1ZXN0TWV0YWRhdGEoKSB7XG4gICAgdmFyIG1ldGFkYXRhID0gbWV0YWRhdGFSZXNvdXJjZS5mZXRjaFRleHQoKTtcbiAgICB3aGVuKG1ldGFkYXRhLCBtZXRhZGF0YVN1Y2Nlc3MsIG1ldGFkYXRhRmFpbHVyZSk7XG4gIH1cblxuICByZXF1ZXN0TWV0YWRhdGEoKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZSwge1xuICAvKipcbiAgICogR2V0cyB0aGUgVVJMIG9mIHRoZSBHb29nbGUgRWFydGggTWFwU2VydmVyLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHVybDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3VybDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1cmwgcGF0aCBvZiB0aGUgZGF0YSBvbiB0aGUgR29vZ2xlIEVhcnRoIHNlcnZlci5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBwYXRoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGF0aDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm94eSB1c2VkIGJ5IHRoaXMgcHJvdmlkZXIuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtQcm94eX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBwcm94eToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jlc291cmNlLnByb3h5O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGltYWdlcnkgY2hhbm5lbCAoaWQpIGN1cnJlbnRseSBiZWluZyB1c2VkLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGNoYW5uZWw6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGFubmVsO1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHdpZHRoIG9mIGVhY2ggdGlsZSwgaW4gcGl4ZWxzLiBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgdGlsZVdpZHRoOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJ0aWxlV2lkdGggbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl90aWxlV2lkdGg7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgaGVpZ2h0IG9mIGVhY2ggdGlsZSwgaW4gcGl4ZWxzLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVIZWlnaHQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGVIZWlnaHQgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl90aWxlSGVpZ2h0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1heGltdW0gbGV2ZWwtb2YtZGV0YWlsIHRoYXQgY2FuIGJlIHJlcXVlc3RlZC4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgbWF4aW11bUxldmVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJtYXhpbXVtTGV2ZWwgbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIHJldHVybiB0aGlzLl9tYXhpbXVtTGV2ZWw7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgbWluaW11bSBsZXZlbC1vZi1kZXRhaWwgdGhhdCBjYW4gYmUgcmVxdWVzdGVkLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIG1pbmltdW1MZXZlbDoge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgICAgIGlmICghdGhpcy5fcmVhZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKFxuICAgICAgICAgIFwibWluaW11bUxldmVsIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICByZXR1cm4gMDtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aWxpbmcgc2NoZW1lIHVzZWQgYnkgdGhpcyBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB0aWxpbmdTY2hlbWU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInRpbGluZ1NjaGVtZSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB2ZXJzaW9uIG9mIHRoZSBkYXRhIHVzZWQgYnkgdGhpcyBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICB2ZXJzaW9uOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJ2ZXJzaW9uIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICByZXR1cm4gdGhpcy5fdmVyc2lvbjtcbiAgICB9LFxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0eXBlIG9mIGRhdGEgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQgZnJvbSB0aGUgcHJvdmlkZXIuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIucHJvdG90eXBlXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVxdWVzdFR5cGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInJlcXVlc3RUeXBlIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdFR5cGU7XG4gICAgfSxcbiAgfSxcbiAgLyoqXG4gICAqIEdldHMgdGhlIHJlY3RhbmdsZSwgaW4gcmFkaWFucywgb2YgdGhlIGltYWdlcnkgcHJvdmlkZWQgYnkgdGhpcyBpbnN0YW5jZS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1JlY3RhbmdsZX1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICByZWN0YW5nbGU6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBpZiAoIXRoaXMuX3JlYWR5KSB7XG4gICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgICAgICBcInJlY3RhbmdsZSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZS5yZWN0YW5nbGU7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgdGlsZSBkaXNjYXJkIHBvbGljeS4gIElmIG5vdCB1bmRlZmluZWQsIHRoZSBkaXNjYXJkIHBvbGljeSBpcyByZXNwb25zaWJsZVxuICAgKiBmb3IgZmlsdGVyaW5nIG91dCBcIm1pc3NpbmdcIiB0aWxlcyB2aWEgaXRzIHNob3VsZERpc2NhcmRJbWFnZSBmdW5jdGlvbi4gIElmIHRoaXMgZnVuY3Rpb25cbiAgICogcmV0dXJucyB1bmRlZmluZWQsIG5vIHRpbGVzIGFyZSBmaWx0ZXJlZC4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge1RpbGVEaXNjYXJkUG9saWN5fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIHRpbGVEaXNjYXJkUG9saWN5OiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoXG4gICAgICAgICAgXCJ0aWxlRGlzY2FyZFBvbGljeSBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYW4gZXZlbnQgdGhhdCBpcyByYWlzZWQgd2hlbiB0aGUgaW1hZ2VyeSBwcm92aWRlciBlbmNvdW50ZXJzIGFuIGFzeW5jaHJvbm91cyBlcnJvci4gIEJ5IHN1YnNjcmliaW5nXG4gICAqIHRvIHRoZSBldmVudCwgeW91IHdpbGwgYmUgbm90aWZpZWQgb2YgdGhlIGVycm9yIGFuZCBjYW4gcG90ZW50aWFsbHkgcmVjb3ZlciBmcm9tIGl0LiAgRXZlbnQgbGlzdGVuZXJzXG4gICAqIGFyZSBwYXNzZWQgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFRpbGVQcm92aWRlckVycm9yfS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0V2ZW50fVxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGVycm9yRXZlbnQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lcnJvckV2ZW50O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoZSBwcm92aWRlciBpcyByZWFkeSBmb3IgdXNlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICByZWFkeToge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5O1xuICAgIH0sXG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdHJ1ZSB3aGVuIHRoZSBwcm92aWRlciBpcyByZWFkeSBmb3IgdXNlLlxuICAgKiBAbWVtYmVyb2YgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZVxuICAgKiBAdHlwZSB7UHJvbWlzZS48Qm9vbGVhbj59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgcmVhZHlQcm9taXNlOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlLnByb21pc2U7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyB0aGUgY3JlZGl0IHRvIGRpc3BsYXkgd2hlbiB0aGlzIGltYWdlcnkgcHJvdmlkZXIgaXMgYWN0aXZlLiAgVHlwaWNhbGx5IHRoaXMgaXMgdXNlZCB0byBjcmVkaXRcbiAgICogdGhlIHNvdXJjZSBvZiB0aGUgaW1hZ2VyeS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0NyZWRpdH1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBjcmVkaXQ6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jcmVkaXQ7XG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhlIGltYWdlcyBwcm92aWRlZCBieSB0aGlzIGltYWdlcnkgcHJvdmlkZXJcbiAgICogaW5jbHVkZSBhbiBhbHBoYSBjaGFubmVsLiAgSWYgdGhpcyBwcm9wZXJ0eSBpcyBmYWxzZSwgYW4gYWxwaGEgY2hhbm5lbCwgaWYgcHJlc2VudCwgd2lsbFxuICAgKiBiZSBpZ25vcmVkLiAgSWYgdGhpcyBwcm9wZXJ0eSBpcyB0cnVlLCBhbnkgaW1hZ2VzIHdpdGhvdXQgYW4gYWxwaGEgY2hhbm5lbCB3aWxsIGJlIHRyZWF0ZWRcbiAgICogYXMgaWYgdGhlaXIgYWxwaGEgaXMgMS4wIGV2ZXJ5d2hlcmUuICBXaGVuIHRoaXMgcHJvcGVydHkgaXMgZmFsc2UsIG1lbW9yeSB1c2FnZVxuICAgKiBhbmQgdGV4dHVyZSB1cGxvYWQgdGltZSBhcmUgcmVkdWNlZC5cbiAgICogQG1lbWJlcm9mIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgaGFzQWxwaGFDaGFubmVsOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICB9LFxufSk7XG5cbi8qKlxuICogR2V0cyB0aGUgY3JlZGl0cyB0byBiZSBkaXNwbGF5ZWQgd2hlbiBhIGdpdmVuIHRpbGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB0aWxlIFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBUaGUgdGlsZSBsZXZlbDtcbiAqIEByZXR1cm5zIHtDcmVkaXRbXX0gVGhlIGNyZWRpdHMgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlIHRpbGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSA8Y29kZT5nZXRUaWxlQ3JlZGl0czwvY29kZT4gbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZS5nZXRUaWxlQ3JlZGl0cyA9IGZ1bmN0aW9uIChcbiAgeCxcbiAgeSxcbiAgbGV2ZWxcbikge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBSZXF1ZXN0cyB0aGUgaW1hZ2UgZm9yIGEgZ2l2ZW4gdGlsZS4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXG4gKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHRpbGUgWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHRpbGUgWSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsLlxuICogQHBhcmFtIHtSZXF1ZXN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3Qgb2JqZWN0LiBJbnRlbmRlZCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudD58dW5kZWZpbmVkfSBBIHByb21pc2UgZm9yIHRoZSBpbWFnZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBpbWFnZSBpcyBhdmFpbGFibGUsIG9yXG4gKiAgICAgICAgICB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIHRvbyBtYW55IGFjdGl2ZSByZXF1ZXN0cyB0byB0aGUgc2VydmVyLCBhbmQgdGhlIHJlcXVlc3RcbiAqICAgICAgICAgIHNob3VsZCBiZSByZXRyaWVkIGxhdGVyLiAgVGhlIHJlc29sdmVkIGltYWdlIG1heSBiZSBlaXRoZXIgYW5cbiAqICAgICAgICAgIEltYWdlIG9yIGEgQ2FudmFzIERPTSBvYmplY3QuXG4gKlxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IDxjb2RlPnJlcXVlc3RJbWFnZTwvY29kZT4gbXVzdCBub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgaW1hZ2VyeSBwcm92aWRlciBpcyByZWFkeS5cbiAqL1xuR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLnByb3RvdHlwZS5yZXF1ZXN0SW1hZ2UgPSBmdW5jdGlvbiAoXG4gIHgsXG4gIHksXG4gIGxldmVsLFxuICByZXF1ZXN0XG4pIHtcbiAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcbiAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihcbiAgICAgIFwicmVxdWVzdEltYWdlIG11c3Qgbm90IGJlIGNhbGxlZCBiZWZvcmUgdGhlIGltYWdlcnkgcHJvdmlkZXIgaXMgcmVhZHkuXCJcbiAgICApO1xuICB9XG4gIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gIHZhciByZXNvdXJjZSA9IHRoaXMuX3Jlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgdXJsOiBcInF1ZXJ5XCIsXG4gICAgcmVxdWVzdDogcmVxdWVzdCxcbiAgICBxdWVyeVBhcmFtZXRlcnM6IHtcbiAgICAgIHJlcXVlc3Q6IHRoaXMuX3JlcXVlc3RUeXBlLFxuICAgICAgY2hhbm5lbDogdGhpcy5fY2hhbm5lbCxcbiAgICAgIHZlcnNpb246IHRoaXMuX3ZlcnNpb24sXG4gICAgICB4OiB4LFxuICAgICAgeTogeSxcbiAgICAgIHo6IGxldmVsICsgMSwgLy8gR29vZ2xlIEVhcnRoIHN0YXJ0cyB3aXRoIGEgem9vbSBsZXZlbCBvZiAxLCBub3QgMFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBJbWFnZXJ5UHJvdmlkZXIubG9hZEltYWdlKHRoaXMsIHJlc291cmNlKTtcbn07XG5cbi8qKlxuICogUGlja2luZyBmZWF0dXJlcyBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSB0aGlzIGltYWdlcnkgcHJvdmlkZXIsIHNvIHRoaXMgZnVuY3Rpb24gc2ltcGx5IHJldHVybnNcbiAqIHVuZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgdGlsZSBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgVGhlIHRpbGUgbGV2ZWwuXG4gKiBAcGFyYW0ge051bWJlcn0gbG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgYXQgd2hpY2ggdG8gcGljayBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBsYXRpdHVkZSAgVGhlIGxhdGl0dWRlIGF0IHdoaWNoIHRvIHBpY2sgZmVhdHVyZXMuXG4gKiBAcmV0dXJuIHtQcm9taXNlLjxJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mb1tdPnx1bmRlZmluZWR9IEEgcHJvbWlzZSBmb3IgdGhlIHBpY2tlZCBmZWF0dXJlcyB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBhc3luY2hyb25vdXNcbiAqICAgICAgICAgICAgICAgICAgIHBpY2tpbmcgY29tcGxldGVzLiAgVGhlIHJlc29sdmVkIHZhbHVlIGlzIGFuIGFycmF5IG9mIHtAbGluayBJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mb31cbiAqICAgICAgICAgICAgICAgICAgIGluc3RhbmNlcy4gIFRoZSBhcnJheSBtYXkgYmUgZW1wdHkgaWYgbm8gZmVhdHVyZXMgYXJlIGZvdW5kIGF0IHRoZSBnaXZlbiBsb2NhdGlvbi5cbiAqICAgICAgICAgICAgICAgICAgIEl0IG1heSBhbHNvIGJlIHVuZGVmaW5lZCBpZiBwaWNraW5nIGlzIG5vdCBzdXBwb3J0ZWQuXG4gKi9cbkdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5wcm90b3R5cGUucGlja0ZlYXR1cmVzID0gZnVuY3Rpb24gKFxuICB4LFxuICB5LFxuICBsZXZlbCxcbiAgbG9uZ2l0dWRlLFxuICBsYXRpdHVkZVxuKSB7XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5Hb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIuX2xvZ29VcmwgPSB1bmRlZmluZWQ7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlciwge1xuICAvKipcbiAgICogR2V0cyBvciBzZXRzIHRoZSBVUkwgdG8gdGhlIEdvb2dsZSBFYXJ0aCBsb2dvIGZvciBkaXNwbGF5IGluIHRoZSBjcmVkaXQuXG4gICAqIEBtZW1iZXJvZiBHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXJcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGxvZ29Vcmw6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghZGVmaW5lZChHb29nbGVFYXJ0aEVudGVycHJpc2VNYXBzUHJvdmlkZXIuX2xvZ29VcmwpKSB7XG4gICAgICAgIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5fbG9nb1VybCA9IGJ1aWxkTW9kdWxlVXJsKFxuICAgICAgICAgIFwiQXNzZXRzL0ltYWdlcy9nb29nbGVfZWFydGhfY3JlZGl0LnBuZ1wiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gR29vZ2xlRWFydGhFbnRlcnByaXNlTWFwc1Byb3ZpZGVyLl9sb2dvVXJsO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XG4gICAgICBDaGVjay5kZWZpbmVkKFwidmFsdWVcIiwgdmFsdWUpO1xuICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlci5fbG9nb1VybCA9IHZhbHVlO1xuICAgIH0sXG4gIH0sXG59KTtcbmV4cG9ydCBkZWZhdWx0IEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///75611\n')}}]);