define(["exports","./Matrix2-92b7fb9d","./when-8166c7dd","./RuntimeError-4fdc4459","./Transforms-62a339c3","./ComponentDatatype-9ed50558"],(function(e,r,t,a,i,n){"use strict";var o={};function s(e,r,t){var a=e+r;return n.CesiumMath.sign(e)!==n.CesiumMath.sign(r)&&Math.abs(a/Math.max(Math.abs(e),Math.abs(r)))<t?0:a}o.computeDiscriminant=function(e,r,t){if("number"!==typeof e)throw new a.DeveloperError("a is a required number.");if("number"!==typeof r)throw new a.DeveloperError("b is a required number.");if("number"!==typeof t)throw new a.DeveloperError("c is a required number.");var i=r*r-4*e*t;return i},o.computeRealRoots=function(e,r,t){if("number"!==typeof e)throw new a.DeveloperError("a is a required number.");if("number"!==typeof r)throw new a.DeveloperError("b is a required number.");if("number"!==typeof t)throw new a.DeveloperError("c is a required number.");var i;if(0===e)return 0===r?[]:[-t/r];if(0===r){if(0===t)return[0,0];var o=Math.abs(t),u=Math.abs(e);if(o<u&&o/u<n.CesiumMath.EPSILON14)return[0,0];if(o>u&&u/o<n.CesiumMath.EPSILON14)return[];if(i=-t/e,i<0)return[];var d=Math.sqrt(i);return[-d,d]}if(0===t)return i=-r/e,i<0?[i,0]:[0,i];var f=r*r,l=4*e*t,h=s(f,-l,n.CesiumMath.EPSILON14);if(h<0)return[];var m=-.5*s(r,n.CesiumMath.sign(r)*Math.sqrt(h),n.CesiumMath.EPSILON14);return r>0?[m/e,t/m]:[t/m,m/e]};var u={};function d(e,r,t,a){var i,n,o=e,s=r/3,u=t/3,d=a,f=o*u,l=s*d,h=s*s,m=u*u,p=o*u-h,c=o*d-s*u,C=s*d-m,w=4*p*C-c*c;if(w<0){var v,M,b;h*l>=f*m?(v=o,M=p,b=-2*s*p+o*c):(v=d,M=C,b=-d*c+2*u*C);var g=b<0?-1:1,q=-g*Math.abs(v)*Math.sqrt(-w);n=-b+q;var E=n/2,y=E<0?-Math.pow(-E,1/3):Math.pow(E,1/3),D=n===q?-y:-M/y;return i=M<=0?y+D:-b/(y*y+D*D+M),h*l>=f*m?[(i-s)/o]:[-d/(i+u)]}var R=p,S=-2*s*p+o*c,O=C,x=-d*c+2*u*C,P=Math.sqrt(w),N=Math.sqrt(3)/2,L=Math.abs(Math.atan2(o*P,-S)/3);i=2*Math.sqrt(-R);var I=Math.cos(L);n=i*I;var z=i*(-I/2-N*Math.sin(L)),T=n+z>2*s?n-s:z-s,U=o,W=T/U;L=Math.abs(Math.atan2(d*P,-x)/3),i=2*Math.sqrt(-O),I=Math.cos(L),n=i*I,z=i*(-I/2-N*Math.sin(L));var B=-d,V=n+z<2*u?n+u:z+u,Z=B/V,A=U*V,k=-T*V-U*B,j=T*B,F=(u*k-s*j)/(-s*k+u*A);return W<=F?W<=Z?F<=Z?[W,F,Z]:[W,Z,F]:[Z,W,F]:W<=Z?[F,W,Z]:F<=Z?[F,Z,W]:[Z,F,W]}u.computeDiscriminant=function(e,r,t,i){if("number"!==typeof e)throw new a.DeveloperError("a is a required number.");if("number"!==typeof r)throw new a.DeveloperError("b is a required number.");if("number"!==typeof t)throw new a.DeveloperError("c is a required number.");if("number"!==typeof i)throw new a.DeveloperError("d is a required number.");var n=e*e,o=r*r,s=t*t,u=i*i,d=18*e*r*t*i+o*s-27*n*u-4*(e*s*t+o*r*i);return d},u.computeRealRoots=function(e,r,t,i){if("number"!==typeof e)throw new a.DeveloperError("a is a required number.");if("number"!==typeof r)throw new a.DeveloperError("b is a required number.");if("number"!==typeof t)throw new a.DeveloperError("c is a required number.");if("number"!==typeof i)throw new a.DeveloperError("d is a required number.");var n,s;if(0===e)return o.computeRealRoots(r,t,i);if(0===r){if(0===t){if(0===i)return[0,0,0];s=-i/e;var u=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3);return[u,u,u]}return 0===i?(n=o.computeRealRoots(e,0,t),0===n.Length?[0]:[n[0],0,n[1]]):d(e,0,t,i)}return 0===t?0===i?(s=-r/e,s<0?[s,0,0]:[0,0,s]):d(e,r,0,i):0===i?(n=o.computeRealRoots(e,r,t),0===n.length?[0]:n[1]<=0?[n[0],n[1],0]:n[0]>=0?[0,n[0],n[1]]:[n[0],0,n[1]]):d(e,r,t,i)};var f={};function l(e,r,t,a){var i=e*e,s=r-3*i/8,d=t-r*e/2+i*e/8,f=a-t*e/4+r*i/16-3*i*i/256,l=u.computeRealRoots(1,2*s,s*s-4*f,-d*d);if(l.length>0){var h=-e/4,m=l[l.length-1];if(Math.abs(m)<n.CesiumMath.EPSILON14){var p=o.computeRealRoots(1,s,f);if(2===p.length){var c,C=p[0],w=p[1];if(C>=0&&w>=0){var v=Math.sqrt(C),M=Math.sqrt(w);return[h-M,h-v,h+v,h+M]}if(C>=0&&w<0)return c=Math.sqrt(C),[h-c,h+c];if(C<0&&w>=0)return c=Math.sqrt(w),[h-c,h+c]}return[]}if(m>0){var b=Math.sqrt(m),g=(s+m-d/b)/2,q=(s+m+d/b)/2,E=o.computeRealRoots(1,b,g),y=o.computeRealRoots(1,-b,q);return 0!==E.length?(E[0]+=h,E[1]+=h,0!==y.length?(y[0]+=h,y[1]+=h,E[1]<=y[0]?[E[0],E[1],y[0],y[1]]:y[1]<=E[0]?[y[0],y[1],E[0],E[1]]:E[0]>=y[0]&&E[1]<=y[1]?[y[0],E[0],E[1],y[1]]:y[0]>=E[0]&&y[1]<=E[1]?[E[0],y[0],y[1],E[1]]:E[0]>y[0]&&E[0]<y[1]?[y[0],E[0],y[1],E[1]]:[E[0],y[0],E[1],y[1]]):E):0!==y.length?(y[0]+=h,y[1]+=h,y):[]}}return[]}function h(e,r,t,a){var i=t*t,s=r*r,d=e*e,f=-2*r,l=t*e+s-4*a,h=d*a-t*r*e+i,m=u.computeRealRoots(1,f,l,h);if(m.length>0){var p,c,C,w,v,M,b=m[0],g=r-b,q=g*g,E=e/2,y=g/2,D=q-4*a,R=q+4*Math.abs(a),S=d-4*b,O=d+4*Math.abs(b);if(b<0||D*O<S*R){var x=Math.sqrt(S);p=x/2,c=0===x?0:(e*y-t)/x}else{var P=Math.sqrt(D);p=0===P?0:(e*y-t)/P,c=P/2}0===E&&0===p?(C=0,w=0):n.CesiumMath.sign(E)===n.CesiumMath.sign(p)?(C=E+p,w=b/C):(w=E-p,C=b/w),0===y&&0===c?(v=0,M=0):n.CesiumMath.sign(y)===n.CesiumMath.sign(c)?(v=y+c,M=a/v):(M=y-c,v=a/M);var N=o.computeRealRoots(1,C,v),L=o.computeRealRoots(1,w,M);if(0!==N.length)return 0!==L.length?N[1]<=L[0]?[N[0],N[1],L[0],L[1]]:L[1]<=N[0]?[L[0],L[1],N[0],N[1]]:N[0]>=L[0]&&N[1]<=L[1]?[L[0],N[0],N[1],L[1]]:L[0]>=N[0]&&L[1]<=N[1]?[N[0],L[0],L[1],N[1]]:N[0]>L[0]&&N[0]<L[1]?[L[0],N[0],L[1],N[1]]:[N[0],L[0],N[1],L[1]]:N;if(0!==L.length)return L}return[]}function m(e,a){a=r.Cartesian3.clone(t.defaultValue(a,r.Cartesian3.ZERO)),r.Cartesian3.equals(a,r.Cartesian3.ZERO)||r.Cartesian3.normalize(a,a),this.origin=r.Cartesian3.clone(t.defaultValue(e,r.Cartesian3.ZERO)),this.direction=a}f.computeDiscriminant=function(e,r,t,i,n){if("number"!==typeof e)throw new a.DeveloperError("a is a required number.");if("number"!==typeof r)throw new a.DeveloperError("b is a required number.");if("number"!==typeof t)throw new a.DeveloperError("c is a required number.");if("number"!==typeof i)throw new a.DeveloperError("d is a required number.");if("number"!==typeof n)throw new a.DeveloperError("e is a required number.");var o=e*e,s=o*e,u=r*r,d=u*r,f=t*t,l=f*t,h=i*i,m=h*i,p=n*n,c=p*n,C=u*f*h-4*d*m-4*e*l*h+18*e*r*t*m-27*o*h*h+256*s*c+n*(18*d*t*i-4*u*l+16*e*f*f-80*e*r*f*i-6*e*u*h+144*o*t*h)+p*(144*e*u*t-27*u*u-128*o*f-192*o*r*i);return C},f.computeRealRoots=function(e,r,t,i,o){if("number"!==typeof e)throw new a.DeveloperError("a is a required number.");if("number"!==typeof r)throw new a.DeveloperError("b is a required number.");if("number"!==typeof t)throw new a.DeveloperError("c is a required number.");if("number"!==typeof i)throw new a.DeveloperError("d is a required number.");if("number"!==typeof o)throw new a.DeveloperError("e is a required number.");if(Math.abs(e)<n.CesiumMath.EPSILON15)return u.computeRealRoots(r,t,i,o);var s=r/e,d=t/e,f=i/e,m=o/e,p=s<0?1:0;switch(p+=d<0?p+1:p,p+=f<0?p+1:p,p+=m<0?p+1:p,p){case 0:return l(s,d,f,m);case 1:return h(s,d,f,m);case 2:return h(s,d,f,m);case 3:return l(s,d,f,m);case 4:return l(s,d,f,m);case 5:return h(s,d,f,m);case 6:return l(s,d,f,m);case 7:return l(s,d,f,m);case 8:return h(s,d,f,m);case 9:return l(s,d,f,m);case 10:return l(s,d,f,m);case 11:return h(s,d,f,m);case 12:return l(s,d,f,m);case 13:return l(s,d,f,m);case 14:return l(s,d,f,m);case 15:return l(s,d,f,m);default:return}},m.clone=function(e,a){if(t.defined(e))return t.defined(a)?(a.origin=r.Cartesian3.clone(e.origin),a.direction=r.Cartesian3.clone(e.direction),a):new m(e.origin,e.direction)},m.getPoint=function(e,i,n){return a.Check.typeOf.object("ray",e),a.Check.typeOf.number("t",i),t.defined(n)||(n=new r.Cartesian3),n=r.Cartesian3.multiplyByScalar(e.direction,i,n),r.Cartesian3.add(e.origin,n,n)};var p={rayPlane:function(e,i,o){if(!t.defined(e))throw new a.DeveloperError("ray is required.");if(!t.defined(i))throw new a.DeveloperError("plane is required.");t.defined(o)||(o=new r.Cartesian3);var s=e.origin,u=e.direction,d=i.normal,f=r.Cartesian3.dot(d,u);if(!(Math.abs(f)<n.CesiumMath.EPSILON15)){var l=(-i.distance-r.Cartesian3.dot(d,s))/f;if(!(l<0))return o=r.Cartesian3.multiplyByScalar(u,l,o),r.Cartesian3.add(s,o,o)}}},c=new r.Cartesian3,C=new r.Cartesian3,w=new r.Cartesian3,v=new r.Cartesian3,M=new r.Cartesian3;p.rayTriangleParametric=function(e,i,o,s,u){if(!t.defined(e))throw new a.DeveloperError("ray is required.");if(!t.defined(i))throw new a.DeveloperError("p0 is required.");if(!t.defined(o))throw new a.DeveloperError("p1 is required.");if(!t.defined(s))throw new a.DeveloperError("p2 is required.");u=t.defaultValue(u,!1);var d,f,l,h,m,p=e.origin,b=e.direction,g=r.Cartesian3.subtract(o,i,c),q=r.Cartesian3.subtract(s,i,C),E=r.Cartesian3.cross(b,q,w),y=r.Cartesian3.dot(g,E);if(u){if(y<n.CesiumMath.EPSILON6)return;if(d=r.Cartesian3.subtract(p,i,v),l=r.Cartesian3.dot(d,E),l<0||l>y)return;if(f=r.Cartesian3.cross(d,g,M),h=r.Cartesian3.dot(b,f),h<0||l+h>y)return;m=r.Cartesian3.dot(q,f)/y}else{if(Math.abs(y)<n.CesiumMath.EPSILON6)return;var D=1/y;if(d=r.Cartesian3.subtract(p,i,v),l=r.Cartesian3.dot(d,E)*D,l<0||l>1)return;if(f=r.Cartesian3.cross(d,g,M),h=r.Cartesian3.dot(b,f)*D,h<0||l+h>1)return;m=r.Cartesian3.dot(q,f)*D}return m},p.rayTriangle=function(e,a,i,n,o,s){var u=p.rayTriangleParametric(e,a,i,n,o);if(t.defined(u)&&!(u<0))return t.defined(s)||(s=new r.Cartesian3),r.Cartesian3.multiplyByScalar(e.direction,u,s),r.Cartesian3.add(e.origin,s,s)};var b=new m;function g(e,r,t,a){var i=r*r-4*e*t;if(!(i<0)){if(i>0){var n=1/(2*e),o=Math.sqrt(i),s=(-r+o)*n,u=(-r-o)*n;return s<u?(a.root0=s,a.root1=u):(a.root0=u,a.root1=s),a}var d=-r/(2*e);if(0!==d)return a.root0=a.root1=d,a}}p.lineSegmentTriangle=function(e,i,n,o,s,u,d){if(!t.defined(e))throw new a.DeveloperError("v0 is required.");if(!t.defined(i))throw new a.DeveloperError("v1 is required.");if(!t.defined(n))throw new a.DeveloperError("p0 is required.");if(!t.defined(o))throw new a.DeveloperError("p1 is required.");if(!t.defined(s))throw new a.DeveloperError("p2 is required.");var f=b;r.Cartesian3.clone(e,f.origin),r.Cartesian3.subtract(i,e,f.direction),r.Cartesian3.normalize(f.direction,f.direction);var l=p.rayTriangleParametric(f,n,o,s,u);if(!(!t.defined(l)||l<0||l>r.Cartesian3.distance(e,i)))return t.defined(d)||(d=new r.Cartesian3),r.Cartesian3.multiplyByScalar(f.direction,l,d),r.Cartesian3.add(f.origin,d,d)};var q={root0:0,root1:0};function E(e,a,n){t.defined(n)||(n=new i.Interval);var o=e.origin,s=e.direction,u=a.center,d=a.radius*a.radius,f=r.Cartesian3.subtract(o,u,w),l=r.Cartesian3.dot(s,s),h=2*r.Cartesian3.dot(s,f),m=r.Cartesian3.magnitudeSquared(f)-d,p=g(l,h,m,q);if(t.defined(p))return n.start=p.root0,n.stop=p.root1,n}p.raySphere=function(e,r,i){if(!t.defined(e))throw new a.DeveloperError("ray is required.");if(!t.defined(r))throw new a.DeveloperError("sphere is required.");if(i=E(e,r,i),t.defined(i)&&!(i.stop<0))return i.start=Math.max(i.start,0),i};var y=new m;p.lineSegmentSphere=function(e,i,n,o){if(!t.defined(e))throw new a.DeveloperError("p0 is required.");if(!t.defined(i))throw new a.DeveloperError("p1 is required.");if(!t.defined(n))throw new a.DeveloperError("sphere is required.");var s=y;r.Cartesian3.clone(e,s.origin);var u=r.Cartesian3.subtract(i,e,s.direction),d=r.Cartesian3.magnitude(u);if(r.Cartesian3.normalize(u,u),o=E(s,n,o),!(!t.defined(o)||o.stop<0||o.start>d))return o.start=Math.max(o.start,0),o.stop=Math.min(o.stop,d),o};var D=new r.Cartesian3,R=new r.Cartesian3;function S(e,r,t){var a=e+r;return n.CesiumMath.sign(e)!==n.CesiumMath.sign(r)&&Math.abs(a/Math.max(Math.abs(e),Math.abs(r)))<t?0:a}function O(e,t,a,i,s){var u,d=i*i,l=s*s,h=(e[r.Matrix3.COLUMN1ROW1]-e[r.Matrix3.COLUMN2ROW2])*l,m=s*(i*S(e[r.Matrix3.COLUMN1ROW0],e[r.Matrix3.COLUMN0ROW1],n.CesiumMath.EPSILON15)+t.y),p=e[r.Matrix3.COLUMN0ROW0]*d+e[r.Matrix3.COLUMN2ROW2]*l+i*t.x+a,c=l*S(e[r.Matrix3.COLUMN2ROW1],e[r.Matrix3.COLUMN1ROW2],n.CesiumMath.EPSILON15),C=s*(i*S(e[r.Matrix3.COLUMN2ROW0],e[r.Matrix3.COLUMN0ROW2])+t.z),w=[];if(0===C&&0===c){if(u=o.computeRealRoots(h,m,p),0===u.length)return w;var v=u[0],M=Math.sqrt(Math.max(1-v*v,0));if(w.push(new r.Cartesian3(i,s*v,s*-M)),w.push(new r.Cartesian3(i,s*v,s*M)),2===u.length){var b=u[1],g=Math.sqrt(Math.max(1-b*b,0));w.push(new r.Cartesian3(i,s*b,s*-g)),w.push(new r.Cartesian3(i,s*b,s*g))}return w}var q=C*C,E=c*c,y=h*h,D=C*c,R=y+E,O=2*(m*h+D),x=2*p*h+m*m-E+q,P=2*(p*m-D),N=p*p-q;if(0===R&&0===O&&0===x&&0===P)return w;u=f.computeRealRoots(R,O,x,P,N);var L=u.length;if(0===L)return w;for(var I=0;I<L;++I){var z,T=u[I],U=T*T,W=Math.max(1-U,0),B=Math.sqrt(W);z=n.CesiumMath.sign(h)===n.CesiumMath.sign(p)?S(h*U+p,m*T,n.CesiumMath.EPSILON12):n.CesiumMath.sign(p)===n.CesiumMath.sign(m*T)?S(h*U,m*T+p,n.CesiumMath.EPSILON12):S(h*U+m*T,p,n.CesiumMath.EPSILON12);var V=S(c*T,C,n.CesiumMath.EPSILON15),Z=z*V;Z<0?w.push(new r.Cartesian3(i,s*T,s*B)):Z>0?w.push(new r.Cartesian3(i,s*T,s*-B)):0!==B?(w.push(new r.Cartesian3(i,s*T,s*-B)),w.push(new r.Cartesian3(i,s*T,s*B)),++I):w.push(new r.Cartesian3(i,s*T,s*B))}return w}p.rayEllipsoid=function(e,n){if(!t.defined(e))throw new a.DeveloperError("ray is required.");if(!t.defined(n))throw new a.DeveloperError("ellipsoid is required.");var o,s,u,d,f,l=n.oneOverRadii,h=r.Cartesian3.multiplyComponents(l,e.origin,D),m=r.Cartesian3.multiplyComponents(l,e.direction,R),p=r.Cartesian3.magnitudeSquared(h),c=r.Cartesian3.dot(h,m);if(p>1){if(c>=0)return;var C=c*c;if(o=p-1,s=r.Cartesian3.magnitudeSquared(m),u=s*o,C<u)return;if(C>u){d=c*c-u,f=-c+Math.sqrt(d);var w=f/s,v=o/f;return w<v?new i.Interval(w,v):{start:v,stop:w}}var M=Math.sqrt(o/s);return new i.Interval(M,M)}return p<1?(o=p-1,s=r.Cartesian3.magnitudeSquared(m),u=s*o,d=c*c-u,f=-c+Math.sqrt(d),new i.Interval(0,f/s)):c<0?(s=r.Cartesian3.magnitudeSquared(m),new i.Interval(0,-c/s)):void 0};var x=new r.Cartesian3,P=new r.Cartesian3,N=new r.Cartesian3,L=new r.Cartesian3,I=new r.Cartesian3,z=new r.Matrix3,T=new r.Matrix3,U=new r.Matrix3,W=new r.Matrix3,B=new r.Matrix3,V=new r.Matrix3,Z=new r.Matrix3,A=new r.Cartesian3,k=new r.Cartesian3,j=new r.Cartographic;p.grazingAltitudeLocation=function(e,i){if(!t.defined(e))throw new a.DeveloperError("ray is required.");if(!t.defined(i))throw new a.DeveloperError("ellipsoid is required.");var o=e.origin,s=e.direction;if(!r.Cartesian3.equals(o,r.Cartesian3.ZERO)){var u=i.geodeticSurfaceNormal(o,x);if(r.Cartesian3.dot(s,u)>=0)return o}var d=t.defined(this.rayEllipsoid(e,i)),f=i.transformPositionToScaledSpace(s,x),l=r.Cartesian3.normalize(f,f),h=r.Cartesian3.mostOrthogonalAxis(f,L),m=r.Cartesian3.normalize(r.Cartesian3.cross(h,l,P),P),p=r.Cartesian3.normalize(r.Cartesian3.cross(l,m,N),N),c=z;c[0]=l.x,c[1]=l.y,c[2]=l.z,c[3]=m.x,c[4]=m.y,c[5]=m.z,c[6]=p.x,c[7]=p.y,c[8]=p.z;var C=r.Matrix3.transpose(c,T),w=r.Matrix3.fromScale(i.radii,U),v=r.Matrix3.fromScale(i.oneOverRadii,W),M=B;M[0]=0,M[1]=-s.z,M[2]=s.y,M[3]=s.z,M[4]=0,M[5]=-s.x,M[6]=-s.y,M[7]=s.x,M[8]=0;var b,g,q=r.Matrix3.multiply(r.Matrix3.multiply(C,v,V),M,V),E=r.Matrix3.multiply(r.Matrix3.multiply(q,w,Z),c,Z),y=r.Matrix3.multiplyByVector(q,o,I),D=O(E,r.Cartesian3.negate(y,x),0,0,1),R=D.length;if(R>0){for(var S=r.Cartesian3.clone(r.Cartesian3.ZERO,k),F=Number.NEGATIVE_INFINITY,G=0;G<R;++G){b=r.Matrix3.multiplyByVector(w,r.Matrix3.multiplyByVector(c,D[G],A),A);var Y=r.Cartesian3.normalize(r.Cartesian3.subtract(b,o,L),L),_=r.Cartesian3.dot(Y,s);_>F&&(F=_,S=r.Cartesian3.clone(b,S))}var H=i.cartesianToCartographic(S,j);return F=n.CesiumMath.clamp(F,0,1),g=r.Cartesian3.magnitude(r.Cartesian3.subtract(S,o,L))*Math.sqrt(1-F*F),g=d?-g:g,H.height=g,i.cartographicToCartesian(H,new r.Cartesian3)}};var F=new r.Cartesian3;p.lineSegmentPlane=function(e,i,o,s){if(!t.defined(e))throw new a.DeveloperError("endPoint0 is required.");if(!t.defined(i))throw new a.DeveloperError("endPoint1 is required.");if(!t.defined(o))throw new a.DeveloperError("plane is required.");t.defined(s)||(s=new r.Cartesian3);var u=r.Cartesian3.subtract(i,e,F),d=o.normal,f=r.Cartesian3.dot(d,u);if(!(Math.abs(f)<n.CesiumMath.EPSILON6)){var l=r.Cartesian3.dot(d,e),h=-(o.distance+l)/f;if(!(h<0||h>1))return r.Cartesian3.multiplyByScalar(u,h,s),r.Cartesian3.add(e,s,s),s}},p.trianglePlaneIntersection=function(e,i,n,o){if(!t.defined(e)||!t.defined(i)||!t.defined(n)||!t.defined(o))throw new a.DeveloperError("p0, p1, p2, and plane are required.");var s,u,d=o.normal,f=o.distance,l=r.Cartesian3.dot(d,e)+f<0,h=r.Cartesian3.dot(d,i)+f<0,m=r.Cartesian3.dot(d,n)+f<0,c=0;if(c+=l?1:0,c+=h?1:0,c+=m?1:0,1!==c&&2!==c||(s=new r.Cartesian3,u=new r.Cartesian3),1===c){if(l)return p.lineSegmentPlane(e,i,o,s),p.lineSegmentPlane(e,n,o,u),{positions:[e,i,n,s,u],indices:[0,3,4,1,2,4,1,4,3]};if(h)return p.lineSegmentPlane(i,n,o,s),p.lineSegmentPlane(i,e,o,u),{positions:[e,i,n,s,u],indices:[1,3,4,2,0,4,2,4,3]};if(m)return p.lineSegmentPlane(n,e,o,s),p.lineSegmentPlane(n,i,o,u),{positions:[e,i,n,s,u],indices:[2,3,4,0,1,4,0,4,3]}}else if(2===c){if(!l)return p.lineSegmentPlane(i,e,o,s),p.lineSegmentPlane(n,e,o,u),{positions:[e,i,n,s,u],indices:[1,2,4,1,4,3,0,3,4]};if(!h)return p.lineSegmentPlane(n,i,o,s),p.lineSegmentPlane(e,i,o,u),{positions:[e,i,n,s,u],indices:[2,0,4,2,4,3,1,3,4]};if(!m)return p.lineSegmentPlane(e,n,o,s),p.lineSegmentPlane(i,n,o,u),{positions:[e,i,n,s,u],indices:[0,1,4,0,4,3,2,3,4]}}},e.IntersectionTests=p,e.Ray=m}));