define(["exports","./Matrix2-92b7fb9d","./when-8166c7dd","./RuntimeError-4fdc4459","./Transforms-62a339c3","./ComponentDatatype-9ed50558"],(function(t,n,a,r,e,o){"use strict";var s=Math.cos,i=Math.sin,h=Math.sqrt,g={computePosition:function(t,n,r,e,o,g,u){var c=n.radiiSquared,C=t.nwCorner,l=t.boundingRectangle,d=C.latitude-t.granYCos*e+o*t.granXSin,M=s(d),S=i(d),w=c.z*S,m=C.longitude+e*t.granYSin+o*t.granXCos,p=M*s(m),R=M*i(m),X=c.x*p,Y=c.y*R,v=h(X*p+Y*R+w*S);if(g.x=X/v,g.y=Y/v,g.z=w/v,r){var O=t.stNwCorner;a.defined(O)?(d=O.latitude-t.stGranYCos*e+o*t.stGranXSin,m=O.longitude+e*t.stGranYSin+o*t.stGranXCos,u.x=(m-t.stWest)*t.lonScalar,u.y=(d-t.stSouth)*t.latScalar):(u.x=(m-l.west)*t.lonScalar,u.y=(d-l.south)*t.latScalar)}}},u=new n.Matrix2,c=new n.Cartesian3,C=new n.Cartographic,l=new n.Cartesian3,d=new e.GeographicProjection;function M(t,a,r,e,o,s,i){var h=Math.cos(a),g=e*h,C=r*h,M=Math.sin(a),S=e*M,w=r*M;c=d.project(t,c),c=n.Cartesian3.subtract(c,l,c);var m=n.Matrix2.fromRotation(a,u);c=n.Matrix2.multiplyByVector(m,c,c),c=n.Cartesian3.add(c,l,c),t=d.unproject(c,t),s-=1,i-=1;var p=t.latitude,R=p+s*w,X=p-g*i,Y=p-g*i+s*w,v=Math.max(p,R,X,Y),O=Math.min(p,R,X,Y),f=t.longitude,_=f+s*C,x=f+i*S,G=f+i*S+s*C,P=Math.max(f,_,x,G),W=Math.min(f,_,x,G);return{north:v,south:O,east:P,west:W,granYCos:g,granYSin:S,granXCos:C,granXSin:w,nwCorner:t}}g.computeOptions=function(t,a,e,s,i,h,g){var u,c,S,w,m,p=t.east,R=t.west,X=t.north,Y=t.south,v=!1,O=!1;X===o.CesiumMath.PI_OVER_TWO&&(v=!0),Y===-o.CesiumMath.PI_OVER_TWO&&(O=!0);var f=X-Y;m=R>p?o.CesiumMath.TWO_PI-R+p:p-R,u=Math.ceil(m/a)+1,c=Math.ceil(f/a)+1,S=m/(u-1),w=f/(c-1);var _=n.Rectangle.northwest(t,h),x=n.Rectangle.center(t,C);0===e&&0===s||(x.longitude<_.longitude&&(x.longitude+=o.CesiumMath.TWO_PI),l=d.project(x,l));var G=w,P=S,W=0,y=0,I=n.Rectangle.clone(t,i),T={granYCos:G,granYSin:W,granXCos:P,granXSin:y,nwCorner:_,boundingRectangle:I,width:u,height:c,northCap:v,southCap:O};if(0!==e){var E=M(_,e,S,w,x,u,c);if(X=E.north,Y=E.south,p=E.east,R=E.west,X<-o.CesiumMath.PI_OVER_TWO||X>o.CesiumMath.PI_OVER_TWO||Y<-o.CesiumMath.PI_OVER_TWO||Y>o.CesiumMath.PI_OVER_TWO)throw new r.DeveloperError("Rotated rectangle is invalid.  It crosses over either the north or south pole.");T.granYCos=E.granYCos,T.granYSin=E.granYSin,T.granXCos=E.granXCos,T.granXSin=E.granXSin,I.north=X,I.south=Y,I.east=p,I.west=R}if(0!==s){e-=s;var V=n.Rectangle.northwest(I,g),b=M(V,e,S,w,x,u,c);T.stGranYCos=b.granYCos,T.stGranXCos=b.granXCos,T.stGranYSin=b.granYSin,T.stGranXSin=b.granXSin,T.stNwCorner=V,T.stWest=b.west,T.stSouth=b.south}return T},t.RectangleGeometryLibrary=g}));