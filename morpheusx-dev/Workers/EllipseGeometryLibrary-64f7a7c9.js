define(["exports","./Matrix2-92b7fb9d","./ComponentDatatype-9ed50558","./Transforms-62a339c3"],(function(a,r,e,t){"use strict";var i={},n=new r.Cartesian3,s=new r.Cartesian3,o=new t.Quaternion,l=new r.Matrix3;function C(a,e,i,C,y,u,m,c,h,x){var M=a+e;r.Cartesian3.multiplyByScalar(C,Math.cos(M),n),r.Cartesian3.multiplyByScalar(i,Math.sin(M),s),r.Cartesian3.add(n,s,n);var f=Math.cos(a);f*=f;var z=Math.sin(a);z*=z;var d=u/Math.sqrt(m*f+y*z),_=d/c;return t.Quaternion.fromAxisAngle(n,_,o),r.Matrix3.fromQuaternion(o,l),r.Matrix3.multiplyByVector(l,h,x),r.Cartesian3.normalize(x,x),r.Cartesian3.multiplyByScalar(x,c,x),x}var y=new r.Cartesian3,u=new r.Cartesian3,m=new r.Cartesian3,c=new r.Cartesian3;i.raisePositionsToHeight=function(a,e,t){for(var i=e.ellipsoid,n=e.height,s=e.extrudedHeight,o=t?a.length/3*2:a.length/3,l=new Float64Array(3*o),C=a.length,h=t?C:0,x=0;x<C;x+=3){var M=x+1,f=x+2,z=r.Cartesian3.fromArray(a,x,y);i.scaleToGeodeticSurface(z,z);var d=r.Cartesian3.clone(z,u),_=i.geodeticSurfaceNormal(z,c),p=r.Cartesian3.multiplyByScalar(_,n,m);r.Cartesian3.add(z,p,z),t&&(r.Cartesian3.multiplyByScalar(_,s,p),r.Cartesian3.add(d,p,d),l[x+h]=d.x,l[M+h]=d.y,l[f+h]=d.z),l[x]=z.x,l[M]=z.y,l[f]=z.z}return l};var h=new r.Cartesian3,x=new r.Cartesian3,M=new r.Cartesian3;i.computeEllipsePositions=function(a,t,i){var n=a.semiMinorAxis,s=a.semiMajorAxis,o=a.rotation,l=a.center,c=8*a.granularity,f=n*n,z=s*s,d=s*n,_=r.Cartesian3.magnitude(l),p=r.Cartesian3.normalize(l,h),v=r.Cartesian3.cross(r.Cartesian3.UNIT_Z,l,x);v=r.Cartesian3.normalize(v,v);var O=r.Cartesian3.cross(p,v,M),w=1+Math.ceil(e.CesiumMath.PI_OVER_TWO/c),P=e.CesiumMath.PI_OVER_TWO/(w-1),T=e.CesiumMath.PI_OVER_TWO-w*P;T<0&&(w-=Math.ceil(Math.abs(T)/P));var I,g,E,V,A,R=w*(w+2)*2,W=t?new Array(3*R):void 0,S=0,B=y,b=u,Q=4*w*3,G=Q-1,H=0,N=i?new Array(Q):void 0;for(T=e.CesiumMath.PI_OVER_TWO,B=C(T,o,O,v,f,d,z,_,p,B),t&&(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z),i&&(N[G--]=B.z,N[G--]=B.y,N[G--]=B.x),T=e.CesiumMath.PI_OVER_TWO-P,I=1;I<w+1;++I){if(B=C(T,o,O,v,f,d,z,_,p,B),b=C(Math.PI-T,o,O,v,f,d,z,_,p,b),t){for(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z,E=2*I+2,g=1;g<E-1;++g)V=g/(E-1),A=r.Cartesian3.lerp(B,b,V,m),W[S++]=A.x,W[S++]=A.y,W[S++]=A.z;W[S++]=b.x,W[S++]=b.y,W[S++]=b.z}i&&(N[G--]=B.z,N[G--]=B.y,N[G--]=B.x,N[H++]=b.x,N[H++]=b.y,N[H++]=b.z),T=e.CesiumMath.PI_OVER_TWO-(I+1)*P}for(I=w;I>1;--I){if(T=e.CesiumMath.PI_OVER_TWO-(I-1)*P,B=C(-T,o,O,v,f,d,z,_,p,B),b=C(T+Math.PI,o,O,v,f,d,z,_,p,b),t){for(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z,E=2*(I-1)+2,g=1;g<E-1;++g)V=g/(E-1),A=r.Cartesian3.lerp(B,b,V,m),W[S++]=A.x,W[S++]=A.y,W[S++]=A.z;W[S++]=b.x,W[S++]=b.y,W[S++]=b.z}i&&(N[G--]=B.z,N[G--]=B.y,N[G--]=B.x,N[H++]=b.x,N[H++]=b.y,N[H++]=b.z)}T=e.CesiumMath.PI_OVER_TWO,B=C(-T,o,O,v,f,d,z,_,p,B);var j={};return t&&(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z,j.positions=W,j.numPts=w),i&&(N[G--]=B.z,N[G--]=B.y,N[G--]=B.x,j.outerPositions=N),j},a.EllipseGeometryLibrary=i}));