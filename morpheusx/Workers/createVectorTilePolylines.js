define(["./Matrix2-92b7fb9d","./combine-a5c4cc47","./AttributeCompression-212262a3","./ComponentDatatype-9ed50558","./IndexDatatype-797210ca","./createTaskProcessorWorker","./RuntimeError-4fdc4459","./when-8166c7dd","./WebGLConstants-0664004c"],(function(a,e,r,n,t,i,s,o,u){"use strict";var c=32767,f=new a.Cartographic,p=new a.Cartesian3;function d(e,t,i,s,o){var u=e.length/3,d=e.subarray(0,u),C=e.subarray(u,2*u),b=e.subarray(2*u,3*u);r.AttributeCompression.zigZagDeltaDecode(d,C,b);for(var l=new Float64Array(e.length),w=0;w<u;++w){var v=d[w],h=C[w],y=b[w],k=n.CesiumMath.lerp(t.west,t.east,v/c),m=n.CesiumMath.lerp(t.south,t.north,h/c),A=n.CesiumMath.lerp(i,s,y/c),g=a.Cartographic.fromRadians(k,m,A,f),x=o.cartographicToCartesian(g,p);a.Cartesian3.pack(x,l,3*w)}return l}var C=new a.Rectangle,b=new a.Ellipsoid,l=new a.Cartesian3,w={min:void 0,max:void 0};function v(e){e=new Float64Array(e);var r=0;w.min=e[r++],w.max=e[r++],a.Rectangle.unpack(e,r,C),r+=a.Rectangle.packedLength,a.Ellipsoid.unpack(e,r,b),r+=a.Ellipsoid.packedLength,a.Cartesian3.unpack(e,r,l)}function h(a){for(var e=a.length,r=new Uint32Array(e+1),n=0,t=0;t<e;++t)r[t]=n,n+=a[t];return r[e]=n,r}var y=new a.Cartesian3,k=new a.Cartesian3,m=new a.Cartesian3,A=new a.Cartesian3,g=new a.Cartesian3;function x(r,n){var i=new Uint16Array(r.positions),s=new Uint16Array(r.widths),o=new Uint32Array(r.counts),u=new Uint16Array(r.batchIds);v(r.packedBuffer);var c,f=C,p=b,x=l,D=w.min,E=w.max,I=d(i,f,D,E,p),P=I.length/3,U=4*P-4,R=new Float32Array(3*U),T=new Float32Array(3*U),F=new Float32Array(3*U),N=new Float32Array(2*U),M=new Uint16Array(U),L=0,S=0,_=0,G=0,W=o.length;for(c=0;c<W;++c){for(var B=o[c],O=s[c],z=u[c],H=0;H<B;++H){var Y;if(0===H){var Z=a.Cartesian3.unpack(I,3*G,y),j=a.Cartesian3.unpack(I,3*(G+1),k);Y=a.Cartesian3.subtract(Z,j,m),a.Cartesian3.add(Z,Y,Y)}else Y=a.Cartesian3.unpack(I,3*(G+H-1),m);var q,J=a.Cartesian3.unpack(I,3*(G+H),A);if(H===B-1){var K=a.Cartesian3.unpack(I,3*(G+B-1),y),Q=a.Cartesian3.unpack(I,3*(G+B-2),k);q=a.Cartesian3.subtract(K,Q,g),a.Cartesian3.add(K,q,q)}else q=a.Cartesian3.unpack(I,3*(G+H+1),g);a.Cartesian3.subtract(Y,x,Y),a.Cartesian3.subtract(J,x,J),a.Cartesian3.subtract(q,x,q);for(var V=0===H?2:0,X=H===B-1?2:4,$=V;$<X;++$){a.Cartesian3.pack(J,R,L),a.Cartesian3.pack(Y,T,L),a.Cartesian3.pack(q,F,L),L+=3;var aa=$-2<0?-1:1;N[S++]=$%2*2-1,N[S++]=aa*O,M[_++]=z}}G+=B}var ea=t.IndexDatatype.createTypedArray(U,6*P-6),ra=0,na=0;for(W=P-1,c=0;c<W;++c)ea[na++]=ra,ea[na++]=ra+2,ea[na++]=ra+1,ea[na++]=ra+1,ea[na++]=ra+2,ea[na++]=ra+3,ra+=4;n.push(R.buffer,T.buffer,F.buffer),n.push(N.buffer,M.buffer,ea.buffer);var ta={indexDatatype:2===ea.BYTES_PER_ELEMENT?t.IndexDatatype.UNSIGNED_SHORT:t.IndexDatatype.UNSIGNED_INT,currentPositions:R.buffer,previousPositions:T.buffer,nextPositions:F.buffer,expandAndWidth:N.buffer,batchIds:M.buffer,indices:ea.buffer};if(r.keepDecodedPositions){var ia=h(o);n.push(I.buffer,ia.buffer),ta=e.combine(ta,{decodedPositions:I.buffer,decodedPositionOffsets:ia.buffer})}return ta}var D=i(x);return D}));