define(["exports","./Matrix2-92b7fb9d","./RuntimeError-4fdc4459","./when-8166c7dd","./ComponentDatatype-9ed50558"],(function(t,a,i,e,n){"use strict";function s(t){var a=t._uSquared,i=t._ellipsoid.maximumRadius,e=t._ellipsoid.minimumRadius,n=(i-e)/i,s=Math.cos(t._startHeading),r=Math.sin(t._startHeading),h=(1-n)*Math.tan(t._start.latitude),d=1/Math.sqrt(1+h*h),o=d*h,c=Math.atan2(h,s),u=d*r,M=u*u,l=1-M,g=Math.sqrt(l),_=a/4,p=_*_,f=p*_,v=p*p,m=1+_-3*p/4+5*f/4-175*v/64,C=1-_+15*p/8-35*f/8,H=1-3*_+35*p/4,O=1-5*_,b=m*c-C*Math.sin(2*c)*_/2-H*Math.sin(4*c)*p/16-O*Math.sin(6*c)*f/48-5*Math.sin(8*c)*v/512,q=t._constants;q.a=i,q.b=e,q.f=n,q.cosineHeading=s,q.sineHeading=r,q.tanU=h,q.cosineU=d,q.sineU=o,q.sigma=c,q.sineAlpha=u,q.sineSquaredAlpha=M,q.cosineSquaredAlpha=l,q.cosineAlpha=g,q.u2Over4=_,q.u4Over16=p,q.u6Over64=f,q.u8Over256=v,q.a0=m,q.a1=C,q.a2=H,q.a3=O,q.distanceRatio=b}function r(t,a){return t*a*(4+t*(4-3*a))/16}function h(t,a,i,e,n,s,h){var d=r(t,i);return(1-d)*t*a*(e+d*n*(h+d*s*(2*h*h-1)))}function d(t,a,i,e,s,r,d){var o,c,u,M,l,g=(a-i)/a,_=r-e,p=Math.atan((1-g)*Math.tan(s)),f=Math.atan((1-g)*Math.tan(d)),v=Math.cos(p),m=Math.sin(p),C=Math.cos(f),H=Math.sin(f),O=v*C,b=v*H,q=m*H,S=m*C,w=_,U=n.CesiumMath.TWO_PI,k=Math.cos(w),A=Math.sin(w);do{k=Math.cos(w),A=Math.sin(w);var R,y=b-S*k;u=Math.sqrt(C*C*A*A+y*y),c=q+O*k,o=Math.atan2(u,c),0===u?(R=0,M=1):(R=O*A/u,M=1-R*R),U=w,l=c-2*q/M,isFinite(l)||(l=0),w=_+h(g,R,M,o,u,c,l)}while(Math.abs(w-U)>n.CesiumMath.EPSILON12);var E=M*(a*a-i*i)/(i*i),P=1+E*(4096+E*(E*(320-175*E)-768))/16384,x=E*(256+E*(E*(74-47*E)-128))/1024,D=l*l,T=x*u*(l+x*(c*(2*D-1)-x*l*(4*u*u-3)*(4*D-3)/6)/4),I=i*P*(o-T),z=Math.atan2(C*A,b-S*k),F=Math.atan2(v*A,b*k-S);t._distance=I,t._startHeading=z,t._endHeading=F,t._uSquared=E}var o=new a.Cartesian3,c=new a.Cartesian3;function u(t,e,n,r){var h=a.Cartesian3.normalize(r.cartographicToCartesian(e,c),o),u=a.Cartesian3.normalize(r.cartographicToCartesian(n,c),c);i.Check.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(a.Cartesian3.angleBetween(h,u))-Math.PI),.0125),d(t,r.maximumRadius,r.minimumRadius,e.longitude,e.latitude,n.longitude,n.latitude),t._start=a.Cartographic.clone(e,t._start),t._end=a.Cartographic.clone(n,t._end),t._start.height=0,t._end.height=0,s(t)}function M(t,i,n){var s=e.defaultValue(n,a.Ellipsoid.WGS84);this._ellipsoid=s,this._start=new a.Cartographic,this._end=new a.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,e.defined(t)&&e.defined(i)&&u(this,t,i,s)}Object.defineProperties(M.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return i.Check.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return i.Check.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return i.Check.defined("distance",this._distance),this._endHeading}}}),M.prototype.setEndPoints=function(t,a){i.Check.defined("start",t),i.Check.defined("end",a),u(this,t,a,this._ellipsoid)},M.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},M.prototype.interpolateUsingSurfaceDistance=function(t,n){i.Check.defined("distance",this._distance);var s=this._constants,r=s.distanceRatio+t/s.b,d=Math.cos(2*r),o=Math.cos(4*r),c=Math.cos(6*r),u=Math.sin(2*r),M=Math.sin(4*r),l=Math.sin(6*r),g=Math.sin(8*r),_=r*r,p=r*_,f=s.u8Over256,v=s.u2Over4,m=s.u6Over64,C=s.u4Over16,H=2*p*f*d/3+r*(1-v+7*C/4-15*m/4+579*f/64-(C-15*m/4+187*f/16)*d-(5*m/4-115*f/16)*o-29*f*c/16)+(v/2-C+71*m/32-85*f/16)*u+(5*C/16-5*m/4+383*f/96)*M-_*((m-11*f/2)*u+5*f*M/2)+(29*m/96-29*f/16)*l+539*f*g/1536,O=Math.asin(Math.sin(H)*s.cosineAlpha),b=Math.atan(s.a/s.b*Math.tan(O));H-=s.sigma;var q=Math.cos(2*s.sigma+H),S=Math.sin(H),w=Math.cos(H),U=s.cosineU*w,k=s.sineU*S,A=Math.atan2(S*s.sineHeading,U-k*s.cosineHeading),R=A-h(s.f,s.sineAlpha,s.cosineSquaredAlpha,H,S,w,q);return e.defined(n)?(n.longitude=this._start.longitude+R,n.latitude=b,n.height=0,n):new a.Cartographic(this._start.longitude+R,b,0)},t.EllipsoidGeodesic=M}));