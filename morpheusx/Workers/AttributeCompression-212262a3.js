define(["exports","./Matrix2-92b7fb9d","./ComponentDatatype-9ed50558","./RuntimeError-4fdc4459","./when-8166c7dd"],(function(e,t,n,r,a){"use strict";var o={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(e){switch(e){case o.SCALAR:return Number;case o.VEC2:return t.Cartesian2;case o.VEC3:return t.Cartesian3;case o.VEC4:return t.Cartesian4;case o.MAT2:return t.Matrix2;case o.MAT3:return t.Matrix3;case o.MAT4:return t.Matrix4;default:throw new r.DeveloperError("attributeType is not a valid value.")}},getNumberOfComponents:function(e){switch(e){case o.SCALAR:return 1;case o.VEC2:return 2;case o.VEC3:return 3;case o.VEC4:case o.MAT2:return 4;case o.MAT3:return 9;case o.MAT4:return 16;default:throw new r.DeveloperError("attributeType is not a valid value.")}},getGlslType:function(e){switch(r.Check.typeOf.string("attributeType",e),e){case o.SCALAR:return"float";case o.VEC2:return"vec2";case o.VEC3:return"vec3";case o.VEC4:return"vec4";case o.MAT2:return"mat2";case o.MAT3:return"mat3";case o.MAT4:return"mat4";default:throw new r.DeveloperError("attributeType is not a valid value.")}}},c=Object.freeze(o),u=1/256,i=256,d={octEncodeInRange:function(e,a,o){r.Check.defined("vector",e),r.Check.defined("result",o);var c=t.Cartesian3.magnitudeSquared(e);if(Math.abs(c-1)>n.CesiumMath.EPSILON6)throw new r.DeveloperError("vector must be normalized.");if(o.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),o.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){var u=o.x,i=o.y;o.x=(1-Math.abs(i))*n.CesiumMath.signNotZero(u),o.y=(1-Math.abs(u))*n.CesiumMath.signNotZero(i)}return o.x=n.CesiumMath.toSNorm(o.x,a),o.y=n.CesiumMath.toSNorm(o.y,a),o},octEncode:function(e,t){return d.octEncodeInRange(e,255,t)}},s=new t.Cartesian2,f=new Uint8Array(1);function C(e){return f[0]=e,f[0]}d.octEncodeToCartesian4=function(e,t){return d.octEncodeInRange(e,65535,s),t.x=C(s.x*u),t.y=C(s.x),t.z=C(s.y*u),t.w=C(s.y),t},d.octDecodeInRange=function(e,a,o,c){if(r.Check.defined("result",c),e<0||e>o||a<0||a>o)throw new r.DeveloperError("x and y must be unsigned normalized integers between 0 and "+o);if(c.x=n.CesiumMath.fromSNorm(e,o),c.y=n.CesiumMath.fromSNorm(a,o),c.z=1-(Math.abs(c.x)+Math.abs(c.y)),c.z<0){var u=c.x;c.x=(1-Math.abs(c.y))*n.CesiumMath.signNotZero(u),c.y=(1-Math.abs(u))*n.CesiumMath.signNotZero(c.y)}return t.Cartesian3.normalize(c,c)},d.octDecode=function(e,t,n){return d.octDecodeInRange(e,t,255,n)},d.octDecodeFromCartesian4=function(e,t){r.Check.typeOf.object("encoded",e),r.Check.typeOf.object("result",t);var n=e.x,a=e.y,o=e.z,c=e.w;if(n<0||n>255||a<0||a>255||o<0||o>255||c<0||c>255)throw new r.DeveloperError("x, y, z, and w must be unsigned normalized integers between 0 and 255");var u=n*i+a,s=o*i+c;return d.octDecodeInRange(u,s,65535,t)},d.octPackFloat=function(e){return r.Check.defined("encoded",e),256*e.x+e.y};var h=new t.Cartesian2;function l(e){return e>>1^-(1&e)}d.octEncodeFloat=function(e){return d.octEncode(e,h),d.octPackFloat(h)},d.octDecodeFloat=function(e,t){r.Check.defined("value",e);var n=e/256,a=Math.floor(n),o=256*(n-a);return d.octDecode(a,o,t)},d.octPack=function(e,t,n,a){r.Check.defined("v1",e),r.Check.defined("v2",t),r.Check.defined("v3",n),r.Check.defined("result",a);var o=d.octEncodeFloat(e),c=d.octEncodeFloat(t),u=d.octEncode(n,h);return a.x=65536*u.x+o,a.y=65536*u.y+c,a},d.octUnpack=function(e,t,n,a){r.Check.defined("packed",e),r.Check.defined("v1",t),r.Check.defined("v2",n),r.Check.defined("v3",a);var o=e.x/65536,c=Math.floor(o),u=65536*(o-c);o=e.y/65536;var i=Math.floor(o),s=65536*(o-i);d.octDecodeFloat(u,t),d.octDecodeFloat(s,n),d.octDecode(c,i,a)},d.compressTextureCoordinates=function(e){r.Check.defined("textureCoordinates",e);var t=4095*e.x|0,n=4095*e.y|0;return 4096*t+n},d.decompressTextureCoordinates=function(e,t){r.Check.defined("compressed",e),r.Check.defined("result",t);var n=e/4096,a=Math.floor(n);return t.x=a/4095,t.y=(e-4096*a)/4095,t},d.zigZagDeltaDecode=function(e,t,n){r.Check.defined("uBuffer",e),r.Check.defined("vBuffer",t),r.Check.typeOf.number.equals("uBuffer.length","vBuffer.length",e.length,t.length),a.defined(n)&&r.Check.typeOf.number.equals("uBuffer.length","heightBuffer.length",e.length,n.length);for(var o=e.length,c=0,u=0,i=0,d=0;d<o;++d)c+=l(e[d]),u+=l(t[d]),e[d]=c,t[d]=u,a.defined(n)&&(i+=l(n[d]),n[d]=i)},d.dequantize=function(e,t,a,o){r.Check.defined("typedArray",e),r.Check.defined("componentDatatype",t),r.Check.defined("type",a),r.Check.defined("count",o);var u,i=c.getNumberOfComponents(a);switch(t){case n.ComponentDatatype.BYTE:u=127;break;case n.ComponentDatatype.UNSIGNED_BYTE:u=255;break;case n.ComponentDatatype.SHORT:u=32767;break;case n.ComponentDatatype.UNSIGNED_SHORT:u=65535;break;case n.ComponentDatatype.INT:u=2147483647;break;case n.ComponentDatatype.UNSIGNED_INT:u=4294967295;break;default:throw new r.DeveloperError("Cannot dequantize component datatype: "+t)}for(var d=new Float32Array(o*i),s=0;s<o;s++)for(var f=0;f<i;f++){var C=s*i+f;d[C]=Math.max(e[C]/u,-1)}return d},e.AttributeCompression=d}));