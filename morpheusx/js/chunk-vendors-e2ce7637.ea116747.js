"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[3924],{16626:function(e,t,r){var i=r(48243),n=r(60838),a=r(60216),o=r(63367),s=r(51688),u=r(66553),c=r(83856),l=r(59947),d=r(8182),h=r(39960),m=r(52975),f=r(62200),p=r(82982),_=r(86511),g=r(12572),Z=r(47861),v=r(96037),x=r(83295),y=r(12540),S=r(3020),w=r(66659),R=r(22832),C=r(10945),M=r(54973),b=r(99417),E=r(68201),A=r(72248),T=r(38443),P=r(97264),L=r(87811),I=r(68985),B=r(95555),N=r(52200),D=r(99095),O=r(58597),F=r(60072),U=r(8379),k=r(10667),q=r(87721),V=r(46588),z=r(53642),H=r(8743),G=r(80188),W=r(88453),K=r(18192),j=r(32550),Y=r(93410),J=r(56629),X=r(93224),Q=r(29745),$=r(26806),ee=r(52655),te=r(6186),re=r(13222),ie=r(66577),ne=r(13633),ae=r(21809),oe=r(75464),se=r(7976),ue=r(8056),ce=r(11013),le=r(84167),de=r(4260),he=r(92454),me=r(81977),fe=r(73431),pe=r(28770),_e=r(74333),ge=r(55531),Ze=r(10531),ve=r(32851),xe=r(15322),ye=r(22277),Se=r(51240),we=r(14503),Re=r(89917),Ce=r(34125),Me=r(87233),be=new a.Z,Ee=xe.Z.ModelState,Ae="model/gltf-binary,model/gltf+json;q=0.8,application/json;q=0.2,*/*;q=0.01",Te=b.Z.EPSILON16;function Pe(e,t){e._cachedGltf=t}function Le(e){this._gltf=e.gltf,this.ready=e.ready,this.modelsToLoad=[],this.count=0}Object.defineProperties(Le.prototype,{gltf:{set:function(e){this._gltf=e},get:function(){return this._gltf}}}),Le.prototype.makeReady=function(e){this.gltf=e;for(var t=this.modelsToLoad,r=t.length,i=0;i<r;++i){var n=t[i];n.isDestroyed()||Pe(n,this)}this.modelsToLoad=void 0,this.ready=!0};var Ie={},Be={};function Ne(e){e=(0,f.Z)(e,f.Z.EMPTY_OBJECT);var t,r=e.cacheKey;if(this._cacheKey=r,this._cachedGltf=void 0,this._releaseGltfJson=(0,f.Z)(e.releaseGltfJson,!1),(0,p.Z)(r)&&(0,p.Z)(Ie[r])&&Ie[r].ready)t=Ie[r],++t.count;else{var o=e.gltf;if((0,p.Z)(o)){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),o instanceof Uint8Array){var s=(0,ee.Z)(o);t=new Le({gltf:s,ready:!0})}else t=new Le({gltf:e.gltf,ready:!0});t.count=1,(0,p.Z)(r)&&(Ie[r]=t)}}Pe(this,t);var u=(0,f.Z)(e.basePath,"");this._resource=I.Z.createIfNeeded(u);var c=e.credit;"string"===typeof c&&(c=new m.Z(c)),this._credit=c,this._resourceCredits=[],this.show=(0,f.Z)(e.show,!0),this.silhouetteColor=(0,f.Z)(e.silhouetteColor,l.Z.RED),this._silhouetteColor=new l.Z,this._silhouetteColorPreviousAlpha=1,this._normalAttributeName=void 0,this.silhouetteSize=(0,f.Z)(e.silhouetteSize,0),this.modelMatrix=A.Z.clone((0,f.Z)(e.modelMatrix,A.Z.IDENTITY)),this._modelMatrix=A.Z.clone(this.modelMatrix),this._clampedModelMatrix=void 0,this.scale=(0,f.Z)(e.scale,1),this._scale=this.scale,this.minimumPixelSize=(0,f.Z)(e.minimumPixelSize,0),this._minimumPixelSize=this.minimumPixelSize,this.maximumScale=e.maximumScale,this._maximumScale=this.maximumScale,this.id=e.id,this._id=e.id,this.heightReference=(0,f.Z)(e.heightReference,de.Z.NONE),this._heightReference=this.heightReference,this._heightChanged=!1,this._removeUpdateHeightCallback=void 0;var d=e.scene;this._scene=d,(0,p.Z)(d)&&(0,p.Z)(d.terrainProviderChanged)&&(this._terrainProviderChangedCallback=d.terrainProviderChanged.addEventListener((function(){this._heightChanged=!0}),this)),this._pickObject=e.pickObject,this._allowPicking=(0,f.Z)(e.allowPicking,!0),this._ready=!1,this._readyPromise=re.Z.defer(),this.activeAnimations=new fe.Z(this),this.clampAnimations=(0,f.Z)(e.clampAnimations,!0),this._defaultTexture=void 0,this._incrementallyLoadTextures=(0,f.Z)(e.incrementallyLoadTextures,!0),this._asynchronous=(0,f.Z)(e.asynchronous,!0),this.shadows=(0,f.Z)(e.shadows,Ce.Z.ENABLED),this._shadows=this.shadows,this.color=l.Z.clone((0,f.Z)(e.color,l.Z.WHITE)),this._colorPreviousAlpha=1,this.colorBlendMode=(0,f.Z)(e.colorBlendMode,oe.Z.HIGHLIGHT),this.colorBlendAmount=(0,f.Z)(e.colorBlendAmount,.5),this._colorShadingEnabled=!1,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._clippingPlanesState=0,this.referenceMatrix=void 0,this.backFaceCulling=(0,f.Z)(e.backFaceCulling,!0),this.showOutline=(0,f.Z)(e.showOutline,!0),this.debugShowBoundingVolume=(0,f.Z)(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=(0,f.Z)(e.debugWireframe,!1),this._debugWireframe=!1,this._distanceDisplayCondition=e.distanceDisplayCondition,this._addBatchIdToGeneratedShaders=e.addBatchIdToGeneratedShaders,this._precreatedAttributes=e.precreatedAttributes,this._vertexShaderLoaded=e.vertexShaderLoaded,this._fragmentShaderLoaded=e.fragmentShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._pickIdLoaded=e.pickIdLoaded,this._ignoreCommands=(0,f.Z)(e.ignoreCommands,!1),this._requestType=e.requestType,this._upAxis=(0,f.Z)(e.upAxis,ie.Z.Y),this._gltfForwardAxis=ie.Z.Z,this._forwardAxis=e.forwardAxis,this.cull=(0,f.Z)(e.cull,!0),this.opaquePass=(0,f.Z)(e.opaquePass,U.Z.OPAQUE),this._computedModelMatrix=new A.Z,this._clippingPlanesMatrix=A.Z.clone(A.Z.IDENTITY),this._iblReferenceFrameMatrix=E.Z.clone(E.Z.IDENTITY),this._initialRadius=void 0,this._boundingSphere=void 0,this._scaledBoundingSphere=new i.Z,this._state=Ee.NEEDS_LOAD,this._loadResources=void 0,this._mode=void 0,this._perNodeShowDirty=!1,this._cesiumAnimationsDirty=!1,this._dirty=!1,this._maxDirtyNumber=0,this._runtime={animations:void 0,articulationsByName:void 0,articulationsByStageKey:void 0,stagesByKey:void 0,rootNodes:void 0,nodes:void 0,nodesByName:void 0,skinnedNodes:void 0,meshesByName:void 0,materialsByName:void 0,materialsById:void 0},this._uniformMaps={},this._extensionsUsed=void 0,this._extensionsRequired=void 0,this._quantizedUniforms={},this._programPrimitives={},this._rendererResources={buffers:{},vertexArrays:{},programs:{},sourceShaders:{},silhouettePrograms:{},textures:{},samplers:{},renderStates:{}},this._cachedRendererResources=void 0,this._loadRendererResourcesFromCache=!1,this._dequantizeInShader=(0,f.Z)(e.dequantizeInShader,!0),this._decodedData={},this._cachedGeometryByteLength=0,this._cachedTexturesByteLength=0,this._geometryByteLength=0,this._texturesByteLength=0,this._trianglesLength=0,this._pointsLength=0,this._sourceTechniques={},this._sourcePrograms={},this._quantizedVertexShaders={},this._nodeCommands=[],this._pickIds=[],this._rtcCenter=void 0,this._rtcCenterEye=void 0,this._rtcCenter3D=void 0,this._rtcCenter2D=void 0,this._sourceVersion=void 0,this._sourceKHRTechniquesWebGL=void 0,this._imageBasedLightingFactor=new n.Z(1,1),n.Z.clone(e.imageBasedLightingFactor,this._imageBasedLightingFactor),this._lightColor=a.Z.clone(e.lightColor),this._luminanceAtZenith=void 0,this.luminanceAtZenith=(0,f.Z)(e.luminanceAtZenith,.2),this._sphericalHarmonicCoefficients=e.sphericalHarmonicCoefficients,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._shouldUpdateSpecularMapAtlas=!0,this._specularEnvironmentMapAtlas=void 0,this._useDefaultSphericalHarmonics=!1,this._useDefaultSpecularMaps=!1,this._shouldRegenerateShaders=!1}function De(e){return e.stencilBuffer}function Oe(e){return!l.Z.equals(e.color,l.Z.WHITE)||e.colorBlendMode!==oe.Z.HIGHLIGHT}function Fe(e){var t=e._clippingPlanes;return(0,p.Z)(t)&&t.enabled&&0!==t.length}function Ue(e){var t=(0,S.Z)(e);return"glTF"===t}function ke(e,t,r){if(e._state!==Ee.LOADED)throw new g.Z("The model is not loaded.  Use Model.readyPromise or wait for Model.ready to be true.");if(!(0,p.Z)(r))throw new g.Z("name is required.");return e._runtime[t][r]}Object.defineProperties(Ne.prototype,{gltf:{get:function(){return(0,p.Z)(this._cachedGltf)?this._cachedGltf.gltf:void 0}},releaseGltfJson:{get:function(){return this._releaseGltfJson}},cacheKey:{get:function(){return this._cacheKey}},basePath:{get:function(){return this._resource.url}},boundingSphere:{get:function(){if(this._state!==Ee.LOADED)throw new g.Z("The model is not loaded.  Use Model.readyPromise or wait for Model.ready to be true.");var e=this.modelMatrix;this.heightReference!==de.Z.NONE&&this._clampedModelMatrix&&(e=this._clampedModelMatrix);var t=A.Z.getScale(e,be),r=(0,p.Z)(this.maximumScale)?Math.min(this.maximumScale,this.scale):this.scale;a.Z.multiplyByScalar(t,r,t);var i=this._scaledBoundingSphere;return i.center=a.Z.multiplyComponents(this._boundingSphere.center,t,i.center),i.radius=a.Z.maximumComponent(t)*this._initialRadius,(0,p.Z)(this._rtcCenter)&&a.Z.add(this._rtcCenter,i.center,i.center),i}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},asynchronous:{get:function(){return this._asynchronous}},allowPicking:{get:function(){return this._allowPicking}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},pendingTextureLoads:{get:function(){return(0,p.Z)(this._loadResources)?this._loadResources.pendingTextureLoads:0}},dirty:{get:function(){return this._dirty}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,p.Z)(e)&&e.far<=e.near)throw new g.Z("far must be greater than near");this._distanceDisplayCondition=Z.Z.clone(e,this._distanceDisplayCondition)}},extensionsUsed:{get:function(){return(0,p.Z)(this._extensionsUsed)||(this._extensionsUsed=xe.Z.getUsedExtensions(this.gltf)),this._extensionsUsed}},extensionsRequired:{get:function(){return(0,p.Z)(this._extensionsRequired)||(this._extensionsRequired=xe.Z.getRequiredExtensions(this.gltf)),this._extensionsRequired}},upAxis:{get:function(){return this._upAxis}},forwardAxis:{get:function(){return(0,p.Z)(this._forwardAxis)?this._forwardAxis:this._gltfForwardAxis}},trianglesLength:{get:function(){return this._trianglesLength}},pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},texturesByteLength:{get:function(){return this._texturesByteLength}},cachedGeometryByteLength:{get:function(){return this._cachedGeometryByteLength}},cachedTexturesByteLength:{get:function(){return this._cachedTexturesByteLength}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&ae.Z.setOwner(e,this,"_clippingPlanes")}},pickIds:{get:function(){return this._pickIds}},imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){u.Z.typeOf.object("imageBasedLightingFactor",e),u.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),u.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),u.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),u.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1);var t=this._imageBasedLightingFactor;e===t||n.Z.equals(e,t)||(this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._imageBasedLightingFactor.x>0&&0===e.x||0===this._imageBasedLightingFactor.x&&e.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._imageBasedLightingFactor.y>0&&0===e.y||0===this._imageBasedLightingFactor.y&&e.y>0,n.Z.clone(e,this._imageBasedLightingFactor))}},lightColor:{get:function(){return this._lightColor},set:function(e){var t=this._lightColor;e===t||a.Z.equals(e,t)||(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,p.Z)(t)&&!(0,p.Z)(e)||(0,p.Z)(e)&&!(0,p.Z)(t),this._lightColor=a.Z.clone(e,t))}},luminanceAtZenith:{get:function(){return this._luminanceAtZenith},set:function(e){var t=this._luminanceAtZenith;e!==t&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,p.Z)(t)&&!(0,p.Z)(e)||(0,p.Z)(e)&&!(0,p.Z)(t),this._luminanceAtZenith=e)}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){if((0,p.Z)(e)&&(!Array.isArray(e)||9!==e.length))throw new g.Z("sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");e!==this._sphericalHarmonicCoefficients&&(this._sphericalHarmonicCoefficients=e,this._shouldRegenerateShaders=!0)}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){this._shouldUpdateSpecularMapAtlas=this._shouldUpdateSpecularMapAtlas||e!==this._specularEnvironmentMaps,this._specularEnvironmentMaps=e}},credit:{get:function(){return this._credit}}}),Ne.silhouetteSupported=function(e){return De(e.context)},Ne.fromGltf=function(e){if(!(0,p.Z)(e)||!(0,p.Z)(e.url))throw new g.Z("options.url is required");var t=e.url;e=(0,c.Z)(e);var r=I.Z.createIfNeeded(t),i=(0,f.Z)(e.basePath,r.clone()),n=I.Z.createIfNeeded(i),a=(0,f.Z)(e.cacheKey,Be[(0,x.Z)(r.url)]);(0,p.Z)(a)||(a=(0,h.Z)(),Be[(0,x.Z)(r.url)]=a),(0,p.Z)(e.basePath)&&!(0,p.Z)(e.cacheKey)&&(a+=n.url),e.cacheKey=a,e.basePath=n;var o=new Ne(e),s=Ie[a];return(0,p.Z)(s)?s.ready||(++s.count,s.modelsToLoad.push(o)):(s=new Le({ready:!1}),s.count=1,s.modelsToLoad.push(o),Pe(o,s),Ie[a]=s,(0,p.Z)(r.headers.Accept)||(r.headers.Accept=Ae),r.fetchArrayBuffer().then((function(e){var t=new Uint8Array(e);if(Ue(t)){var i=(0,ee.Z)(t);s.makeReady(i)}else{var n=(0,y.Z)(t);s.makeReady(n)}var a=o._resourceCredits,u=r.credits;if((0,p.Z)(u))for(var c=u.length,l=0;l<c;l++)a.push(u[l])})).otherwise(xe.Z.getFailedLoadFunction(o,"model",r.url))),o},Ne._gltfCache=Ie,Ne.prototype.getNode=function(e){var t=ke(this,"nodesByName",e);return(0,p.Z)(t)?t.publicNode:void 0},Ne.prototype.getMesh=function(e){return ke(this,"meshesByName",e)},Ne.prototype.getMaterial=function(e){return ke(this,"materialsByName",e)},Ne.prototype.setArticulationStage=function(e,t){u.Z.typeOf.number("value",t);var r=ke(this,"stagesByKey",e),i=ke(this,"articulationsByStageKey",e);(0,p.Z)(r)&&(0,p.Z)(i)&&(t=b.Z.clamp(t,r.minimumValue,r.maximumValue),b.Z.equalsEpsilon(r.currentValue,t,Te)||(r.currentValue=t,i.isDirty=!0))};var qe=new a.Z,Ve=new E.Z;function ze(e,t){u.Z.typeOf.object("stage",e),u.Z.typeOf.object("result",t);var r,i=e.currentValue,n=qe;switch(e.type){case"xRotate":r=E.Z.fromRotationX(b.Z.toRadians(i),Ve),A.Z.multiplyByMatrix3(t,r,t);break;case"yRotate":r=E.Z.fromRotationY(b.Z.toRadians(i),Ve),A.Z.multiplyByMatrix3(t,r,t);break;case"zRotate":r=E.Z.fromRotationZ(b.Z.toRadians(i),Ve),A.Z.multiplyByMatrix3(t,r,t);break;case"xTranslate":n.x=i,n.y=0,n.z=0,A.Z.multiplyByTranslation(t,n,t);break;case"yTranslate":n.x=0,n.y=i,n.z=0,A.Z.multiplyByTranslation(t,n,t);break;case"zTranslate":n.x=0,n.y=0,n.z=i,A.Z.multiplyByTranslation(t,n,t);break;case"xScale":n.x=i,n.y=1,n.z=1,A.Z.multiplyByScale(t,n,t);break;case"yScale":n.x=1,n.y=i,n.z=1,A.Z.multiplyByScale(t,n,t);break;case"zScale":n.x=1,n.y=1,n.z=i,A.Z.multiplyByScale(t,n,t);break;case"uniformScale":A.Z.multiplyByUniformScale(t,i,t);break;default:break}return t}var He=new A.Z;function Ge(e){var t=e.gltf,r=e._loadResources;J.Z.buffer(t,(function(e,t){r.buffers[t]=e.extras._pipeline.source}))}function We(e,t){return function(r){var i=e._loadResources,n=new Uint8Array(r);--i.pendingBufferLoads,e.gltf.buffers[t].extras._pipeline.source=n}}function Ke(e){var t=e.gltf.bufferViews,r=e._loadResources.vertexBuffersToCreate;J.Z.bufferView(e.gltf,(function(e,t){e.target===N.Z.ARRAY_BUFFER&&r.enqueue(t)}));var i=e._loadResources.indexBuffersToCreate,n={};J.Z.accessor(e.gltf,(function(e){var r=e.bufferView;if((0,p.Z)(r)){var a=t[r];a.target!==N.Z.ELEMENT_ARRAY_BUFFER||(0,p.Z)(n[r])||(n[r]=!0,i.enqueue({id:r,componentType:e.componentType}))}}))}function je(e){var t=e.gltf;if((0,Q.Z)(t,"KHR_techniques_webgl")){var r=e._sourcePrograms,i=e._sourceTechniques,n=t.extensions.KHR_techniques_webgl.programs;J.Z.technique(t,(function(e,t){i[t]=(0,c.Z)(e);var a=e.program;(0,p.Z)(r[a])||(r[a]=(0,c.Z)(n[a]))}))}}function Ye(e,t,r){return function(i){var n=e._loadResources;n.shaders[r]={source:i,type:t,bufferView:void 0},--n.pendingShaderLoads,e._rendererResources.sourceShaders[r]=i}}function Je(e){var t=e.gltf,r=t.buffers,i=t.bufferViews,n=e._rendererResources.sourceShaders;J.Z.shader(t,(function(t,a){if((0,p.Z)(t.bufferView)){var o=t.bufferView,s=i[o],u=s.buffer,c=r[u],l=(0,w.Z)(c.extras._pipeline.source,s.byteOffset,s.byteLength);n[a]=l}else if((0,p.Z)(t.extras._pipeline.source))n[a]=t.extras._pipeline.source;else{++e._loadResources.pendingShaderLoads;var d=e._resource.getDerivedResource({url:t.uri});d.fetchText().then(Ye(e,t.type,a)).otherwise(xe.Z.getFailedLoadFunction(e,"shader",d.url))}}))}function Xe(e){var t=e._sourceTechniques;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];e._loadResources.programsToCreate.enqueue({programId:i.program,techniqueId:r})}}function Qe(e){var t={},r={},i={};e._runtime.articulationsByName=t,e._runtime.articulationsByStageKey=r,e._runtime.stagesByKey=i;var n=e.gltf;if((0,Q.Z)(n,"AGI_articulations")&&(0,p.Z)(n.extensions)&&(0,p.Z)(n.extensions.AGI_articulations)){var a=n.extensions.AGI_articulations.articulations;if((0,p.Z)(a))for(var o=a.length,s=0;s<o;++s){var u=(0,c.Z)(a[s]);u.nodes=[],u.isDirty=!0,t[u.name]=u;for(var l=u.stages.length,d=0;d<l;++d){var h=u.stages[d];h.currentValue=h.initialValue;var m=u.name+" "+h.name;r[m]=u,i[m]=h}}}}function $e(e,t){return function(r){var i,n=e._loadResources;--n.pendingTextureLoads,Array.isArray(r)&&(i=r.slice(1,r.length).map((function(e){return e.bufferView})),r=r[0]),n.texturesToCreate.enqueue({id:t,image:r,bufferView:r.bufferView,width:r.width,height:r.height,internalFormat:r.internalFormat,mipLevels:i})}}Ne.prototype.applyArticulations=function(){var e=this._runtime.articulationsByName;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];if(r.isDirty){r.isDirty=!1;for(var i=r.nodes.length,n=0;n<i;++n){for(var a=r.nodes[n],o=A.Z.clone(a.originalMatrix,He),s=r.stages.length,u=0;u<s;++u){var c=r.stages[u];o=ze(c,o)}a.matrix=o}}}};var et=/(^data:image\/ktx2)|(\.ktx2$)/i;function tt(e,t,r){var i,n=e.gltf,a=n.images;J.Z.texture(n,(function(n,o){var s=n.source;(0,p.Z)(n.extensions)&&(0,p.Z)(n.extensions.EXT_texture_webp)&&r?s=n.extensions.EXT_texture_webp.source:(0,p.Z)(n.extensions)&&(0,p.Z)(n.extensions.KHR_texture_basisu)&&t.supportsBasis&&(s=n.extensions.KHR_texture_basisu.source);var u=a[s],c=u.bufferView,l=u.mimeType;if(i=u.uri,(0,p.Z)(c))e._loadResources.texturesToCreateFromBufferView.enqueue({id:o,image:void 0,bufferView:c,mimeType:l});else{++e._loadResources.pendingTextureLoads;var d,h=e._resource.getDerivedResource({url:i});d=et.test(i)?(0,M.Z)(h):h.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0}),d.then($e(e,o,s)).otherwise(xe.Z.getFailedLoadFunction(e,"image",h.url))}}))}var rt=new A.Z;function it(e){var t={},r={},i=[],n=e._loadResources.skinnedNodesIds,a=e._runtime.articulationsByName;J.Z.node(e.gltf,(function(o,s){var u={matrix:void 0,translation:void 0,rotation:void 0,scale:void 0,computedShow:!0,transformToRoot:new A.Z,computedMatrix:new A.Z,dirtyNumber:0,commands:[],inverseBindMatrices:void 0,bindShapeMatrix:void 0,joints:[],computedJointMatrices:[],jointName:o.jointName,weights:[],children:[],parents:[],publicNode:void 0};if(u.publicNode=new Ze.Z(e,o,u,s,xe.Z.getTransform(o)),t[s]=u,r[o.name]=u,(0,p.Z)(o.skin)&&(n.push(s),i.push(u)),(0,p.Z)(o.extensions)&&(0,p.Z)(o.extensions.AGI_articulations)){var c=o.extensions.AGI_articulations.articulationName;if((0,p.Z)(c)){var l=A.Z.clone(u.publicNode.originalMatrix,rt),d=a[c];d.nodes.push(u.publicNode);for(var h=d.stages.length,m=0;m<h;++m){var f=d.stages[m];l=ze(f,l)}u.publicNode.matrix=l}}})),e._runtime.nodes=t,e._runtime.nodesByName=r,e._runtime.skinnedNodes=i}function nt(e){var t=e.gltf,r=e._sourceTechniques,i={},n={},a=e._uniformMaps;J.Z.material(t,(function(t,o){a[o]={uniformMap:void 0,values:void 0,jointMatrixUniformName:void 0,morphWeightsUniformName:void 0};var s=new _e.Z(e,t,o);if((0,p.Z)(t.extensions)&&(0,p.Z)(t.extensions.KHR_techniques_webgl)){var u=t.extensions.KHR_techniques_webgl.technique;s._technique=u,s._program=r[u].program,J.Z.materialValue(t,(function(e,t){(0,p.Z)(s._values)||(s._values={}),s._values[t]=(0,c.Z)(e)}))}i[t.name]=s,n[o]=s})),e._runtime.materialsByName=i,e._runtime.materialsById=n}function at(e){var t={},r=e._runtime.materialsById;J.Z.mesh(e.gltf,(function(i,n){t[i.name]=new ge.Z(i,r,n),((0,p.Z)(e.extensionsUsed.WEB3D_quantized_attributes)||e._dequantizeInShader)&&J.Z.meshPrimitive(i,(function(t,r){var i=mt(e,t),a=e._programPrimitives[i];(0,p.Z)(a)||(a={},e._programPrimitives[i]=a),a[n+".primitive."+r]=t}))})),e._runtime.meshesByName=t}var ot=function(){this.id=void 0,this.model=void 0,this.context=void 0};function st(e,t,r){var i=t._loadResources,n=t.gltf.bufferViews,a=n[e];(0,p.Z)(a)||(a=i.createdBufferViews[e]);var o=D.Z.createVertexBuffer({context:r,typedArray:i.getBuffer(a),usage:O.Z.STATIC_DRAW});o.vertexArrayDestroyable=!1,t._rendererResources.buffers[e]=o,t._geometryByteLength+=o.sizeInBytes}ot.prototype.set=function(e,t,r){this.id=e,this.model=t,this.context=r},ot.prototype.execute=function(){st(this.id,this.model,this.context)};var ut=function(){this.id=void 0,this.componentType=void 0,this.model=void 0,this.context=void 0};function ct(e,t,r,i){var n=r._loadResources,a=r.gltf.bufferViews,o=a[e];(0,p.Z)(o)||(o=n.createdBufferViews[e]);var s=D.Z.createIndexBuffer({context:i,typedArray:n.getBuffer(o),usage:O.Z.STATIC_DRAW,indexDatatype:t});s.vertexArrayDestroyable=!1,r._rendererResources.buffers[e]=s,r._geometryByteLength+=s.sizeInBytes}ut.prototype.set=function(e,t,r,i){this.id=e,this.componentType=t,this.model=r,this.context=i},ut.prototype.execute=function(){ct(this.id,this.componentType,this.model,this.context)};var lt=new ot,dt=new ut;function ht(e,t){var r=e._loadResources;if(0===r.pendingBufferLoads){var i,n=t.context,a=r.vertexBuffersToCreate,o=r.indexBuffersToCreate;if(e.asynchronous){while(a.length>0){if(lt.set(a.peek(),e,n),!t.jobScheduler.execute(lt,he.Z.BUFFER))break;a.dequeue()}while(o.length>0){if(i=o.peek(),dt.set(i.id,i.componentType,e,n),!t.jobScheduler.execute(dt,he.Z.BUFFER))break;o.dequeue()}}else{while(a.length>0)st(a.dequeue(),e,n);while(o.length>0)i=o.dequeue(),ct(i.id,i.componentType,e,n)}}}function mt(e,t){var r=e._runtime.materialsById[t.material];if((0,p.Z)(r))return r._program}function ft(e,t,r){var i,n,a,o=r._programPrimitives[t];if(!(0,p.Z)(o))return e;for(n in o)if(o.hasOwnProperty(n)&&(i=o[n],mt(r,i)===t))break;if(r._programPrimitives[t]=void 0,r.extensionsUsed.WEB3D_quantized_attributes)a=xe.Z.modifyShaderForQuantizedAttributes(r.gltf,i,e),r._quantizedUniforms[t]=a.uniforms;else{var s=r._decodedData[n];if(!(0,p.Z)(s))return e;a=xe.Z.modifyShaderForDracoQuantizedAttributes(r.gltf,i,e,s.attributes)}return a.shader}function pt(e){return e=z.Z.replaceMain(e,"gltf_blend_main"),e+="uniform vec4 gltf_color; \nuniform float gltf_colorBlend; \nvoid main() \n{ \n    gltf_blend_main(); \n    gl_FragColor.rgb = mix(gl_FragColor.rgb, gltf_color.rgb, gltf_colorBlend); \n    float highlight = ceil(gltf_colorBlend); \n    gl_FragColor.rgb *= mix(gltf_color.rgb, vec3(1.0), highlight); \n    gl_FragColor.a *= gltf_color.a; \n} \n",e}function _t(e,t,r){return(0,p.Z)(r)&&(e=r(e,t)),e}var gt=function(){this.programToCreate=void 0,this.model=void 0,this.context=void 0};function Zt(e,t,r){var i=e.programId,n=e.techniqueId,a=t._sourcePrograms[i],o=t._rendererResources.sourceShaders,s=o[a.vertexShader],u=o[a.fragmentShader],c=t._quantizedVertexShaders;if(t.extensionsUsed.WEB3D_quantized_attributes||t._dequantizeInShader){var l=c[i];(0,p.Z)(l)||(l=ft(s,i,t),c[i]=l),s=l}var d=_t(s,i,t._vertexShaderLoaded),h=_t(u,i,t._fragmentShaderLoaded);(0,p.Z)(t._uniformMapLoaded)||(h="uniform vec4 czm_pickColor;\n"+h);var m=t._imageBasedLightingFactor.x>0||t._imageBasedLightingFactor.y>0;if(m&&(h="#define USE_IBL_LIGHTING \n\n"+h),(0,p.Z)(t._lightColor)&&(h="#define USE_CUSTOM_LIGHT_COLOR \n\n"+h),("2.0"!==t._sourceVersion||t._sourceKHRTechniquesWebGL)&&(h=z.Z.replaceMain(h,"non_gamma_corrected_main"),h+="\nvoid main() { \n    non_gamma_corrected_main(); \n    gl_FragColor = czm_gammaCorrect(gl_FragColor); \n} \n"),ye.Z.isSupported(r)){var f=(0,p.Z)(t._sphericalHarmonicCoefficients)||t._useDefaultSphericalHarmonics,_=(0,p.Z)(t._specularEnvironmentMapAtlas)&&t._specularEnvironmentMapAtlas.ready||t._useDefaultSpecularMaps,g=f||_||m;g&&(h="uniform mat3 gltf_iblReferenceFrameMatrix; \n"+h),(0,p.Z)(t._sphericalHarmonicCoefficients)?h="#define DIFFUSE_IBL \n#define CUSTOM_SPHERICAL_HARMONICS \nuniform vec3 gltf_sphericalHarmonicCoefficients[9]; \n"+h:t._useDefaultSphericalHarmonics&&(h="#define DIFFUSE_IBL \n"+h),(0,p.Z)(t._specularEnvironmentMapAtlas)&&t._specularEnvironmentMapAtlas.ready?h="#define SPECULAR_IBL \n#define CUSTOM_SPECULAR_IBL \nuniform sampler2D gltf_specularMap; \nuniform vec2 gltf_specularMapSize; \nuniform float gltf_maxSpecularLOD; \n"+h:t._useDefaultSpecularMaps&&(h="#define SPECULAR_IBL \n"+h)}(0,p.Z)(t._luminanceAtZenith)&&(h="#define USE_SUN_LUMINANCE \nuniform float gltf_luminanceAtZenith;\n"+h),xt(i,n,h,d,t,r)}function vt(e,t,r){var i=e.programId,n=e.techniqueId,a=t._sourcePrograms[i],o=t._rendererResources.sourceShaders,s=t._quantizedVertexShaders,u=t.clippingPlanes,c=Fe(t),l=o[a.vertexShader],d=o[a.fragmentShader];(t.extensionsUsed.WEB3D_quantized_attributes||t._dequantizeInShader)&&(l=s[i]);var h=d;Oe(t)&&(h=Ne._modifyShaderForColor(h)),c&&(h=qr(h,u,r));var m=_t(l,i,t._vertexShaderLoaded),f=_t(h,i,t._fragmentShaderLoaded);(0,p.Z)(t._uniformMapLoaded)||(f="uniform vec4 czm_pickColor;\n"+f);var _=t._imageBasedLightingFactor.x>0||t._imageBasedLightingFactor.y>0;if(_&&(f="#define USE_IBL_LIGHTING \n\n"+f),(0,p.Z)(t._lightColor)&&(f="#define USE_CUSTOM_LIGHT_COLOR \n\n"+f),("2.0"!==t._sourceVersion||t._sourceKHRTechniquesWebGL)&&(f=z.Z.replaceMain(f,"non_gamma_corrected_main"),f+="\nvoid main() { \n    non_gamma_corrected_main(); \n    gl_FragColor = czm_gammaCorrect(gl_FragColor); \n} \n"),ye.Z.isSupported(r)){var g=(0,p.Z)(t._sphericalHarmonicCoefficients)||t._useDefaultSphericalHarmonics,Z=(0,p.Z)(t._specularEnvironmentMapAtlas)&&t._specularEnvironmentMapAtlas.ready||t._useDefaultSpecularMaps,v=g||Z||_;v&&(f="uniform mat3 gltf_iblReferenceFrameMatrix; \n"+f),(0,p.Z)(t._sphericalHarmonicCoefficients)?f="#define DIFFUSE_IBL \n#define CUSTOM_SPHERICAL_HARMONICS \nuniform vec3 gltf_sphericalHarmonicCoefficients[9]; \n"+f:t._useDefaultSphericalHarmonics&&(f="#define DIFFUSE_IBL \n"+f),(0,p.Z)(t._specularEnvironmentMapAtlas)&&t._specularEnvironmentMapAtlas.ready?f="#define SPECULAR_IBL \n#define CUSTOM_SPECULAR_IBL \nuniform sampler2D gltf_specularMap; \nuniform vec2 gltf_specularMapSize; \nuniform float gltf_maxSpecularLOD; \n"+f:t._useDefaultSpecularMaps&&(f="#define SPECULAR_IBL \n"+f)}(0,p.Z)(t._luminanceAtZenith)&&(f="#define USE_SUN_LUMINANCE \nuniform float gltf_luminanceAtZenith;\n"+f),xt(i,n,f,m,t,r)}function xt(e,t,r,i,n,a){var o=n._sourceTechniques[t],s=xe.Z.createAttributeLocations(o,n._precreatedAttributes);n._rendererResources.programs[e]=V.Z.fromCache({context:a,vertexShaderSource:i,fragmentShaderSource:r,attributeLocations:s})}gt.prototype.set=function(e,t,r){this.programToCreate=e,this.model=t,this.context=r},gt.prototype.execute=function(){Zt(this.programToCreate,this.model,this.context)};var yt=new gt;function St(e,t){var r=e._loadResources,i=r.programsToCreate;if(0===r.pendingShaderLoads&&0===r.pendingBufferLoads){var n=t.context;if(e.asynchronous)while(i.length>0){if(yt.set(i.peek(),e,n),!t.jobScheduler.execute(yt,he.Z.PROGRAM))break;i.dequeue()}else while(i.length>0)Zt(i.dequeue(),e,n)}}function wt(e,t){return function(r){e.texturesToCreate.enqueue({id:t.id,image:r,bufferView:void 0}),--e.pendingBufferViewToImage}}function Rt(e){var t=e._loadResources;if(0===t.pendingBufferLoads)while(t.texturesToCreateFromBufferView.length>0){var r=t.texturesToCreateFromBufferView.dequeue(),i=e.gltf,n=i.bufferViews[r.bufferView],a=i.textures[r.id].source,o=xe.Z.getFailedLoadFunction(e,"image","id: "+r.id+", bufferView: "+r.bufferView);if("image/ktx2"===r.mimeType){var s=new Uint8Array(t.getBuffer(n));(0,M.Z)(s).then($e(e,r.id,a)).otherwise(o),++e._loadResources.pendingTextureLoads}else{var u=wt(t,r);(0,C.Z)({uint8Array:t.getBuffer(n),format:r.mimeType,flipY:!1,skipColorSpaceConversion:!0}).then(u).otherwise(o),++t.pendingBufferViewToImage}}}function Ct(e){var t=e._loadResources;if(t.createSamplers){t.createSamplers=!1;var r=e._rendererResources.samplers;J.Z.sampler(e.gltf,(function(e,t){r[t]=new q.Z({wrapS:e.wrapS,wrapT:e.wrapT,minificationFilter:e.minFilter,magnificationFilter:e.magFilter})}))}}var Mt=function(){this.gltfTexture=void 0,this.model=void 0,this.context=void 0};function bt(e,t,r){var i=t.gltf.textures,n=i[e.id],a=t._rendererResources.samplers,o=a[n.sampler];(0,p.Z)(o)||(o=new q.Z({wrapS:W.Z.REPEAT,wrapT:W.Z.REPEAT}));for(var s=!1,u=t.gltf.materials,c=u.length,l=0;l<c;++l){var d=u[l];if((0,p.Z)(d.extensions)&&(0,p.Z)(d.extensions.KHR_techniques_webgl)){var h=d.extensions.KHR_techniques_webgl.values;for(var m in h)if(h.hasOwnProperty(m)&&-1!==m.indexOf("Texture")){var f=h[m];if(f.index===e.id&&(0,p.Z)(f.extensions)&&(0,p.Z)(f.extensions.KHR_texture_transform)){s=!0;break}}}if(s)break}var _=o.wrapS,g=o.wrapT,Z=o.minificationFilter;s&&Z!==G.Z.LINEAR&&Z!==G.Z.NEAREST&&(Z=Z===G.Z.NEAREST_MIPMAP_NEAREST||Z===G.Z.NEAREST_MIPMAP_LINEAR?G.Z.NEAREST:G.Z.LINEAR,o=new q.Z({wrapS:o.wrapS,wrapT:o.wrapT,minificationFilter:Z,magnificationFilter:o.magnificationFilter}));var v,x,y,S=e.internalFormat,w=!((0,p.Z)(S)&&T.Z.isCompressedFormat(S))&&(Z===G.Z.NEAREST_MIPMAP_NEAREST||Z===G.Z.NEAREST_MIPMAP_LINEAR||Z===G.Z.LINEAR_MIPMAP_NEAREST||Z===G.Z.LINEAR_MIPMAP_LINEAR),R=w||_===W.Z.REPEAT||_===W.Z.MIRRORED_REPEAT||g===W.Z.REPEAT||g===W.Z.MIRRORED_REPEAT,C=e.image;if((0,p.Z)(S))v=!b.Z.isPowerOfTwo(e.width)||!b.Z.isPowerOfTwo(e.height),!r.webgl2&&T.Z.isCompressedFormat(S)&&v&&R&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly. See the Model.js constructor documentation for more information."),(0,p.Z)(e.mipLevels)||Z!==G.Z.NEAREST_MIPMAP_NEAREST&&Z!==G.Z.NEAREST_MIPMAP_LINEAR?(0,p.Z)(e.mipLevels)||Z!==G.Z.LINEAR_MIPMAP_NEAREST&&Z!==G.Z.LINEAR_MIPMAP_LINEAR||(y=G.Z.LINEAR):y=G.Z.NEAREST,o=new q.Z({wrapS:o.wrapS,wrapT:o.wrapT,minificationFilter:y,magnificationFilter:o.magnificationFilter}),x=new H.Z({context:r,source:{arrayBufferView:e.bufferView,mipLevels:e.mipLevels},width:e.width,height:e.height,pixelFormat:S,sampler:o});else if((0,p.Z)(C)){if(v=!b.Z.isPowerOfTwo(C.width)||!b.Z.isPowerOfTwo(C.height),R&&v){var M=document.createElement("canvas");M.width=b.Z.nextPowerOfTwo(C.width),M.height=b.Z.nextPowerOfTwo(C.height);var E=M.getContext("2d");E.drawImage(C,0,0,C.width,C.height,0,0,M.width,M.height),C=M}x=new H.Z({context:r,source:C,pixelFormat:n.internalFormat,pixelDatatype:n.type,sampler:o,flipY:!1,skipColorSpaceConversion:!0}),w&&x.generateMipmap()}(0,p.Z)(x)&&(t._rendererResources.textures[e.id]=x,t._texturesByteLength+=x.sizeInBytes)}Mt.prototype.set=function(e,t,r){this.gltfTexture=e,this.model=t,this.context=r},Mt.prototype.execute=function(){bt(this.gltfTexture,this.model,this.context)};var Et=new Mt;function At(e,t){var r=t.context,i=e._loadResources.texturesToCreate;if(e.asynchronous)while(i.length>0){if(Et.set(i.peek(),e,r),!t.jobScheduler.execute(Et,he.Z.TEXTURE))break;i.dequeue()}else while(i.length>0)bt(i.dequeue(),e,r)}function Tt(e,t){var r,i,n=e._sourceTechniques,a={},o=e._runtime.materialsById[t.material];if(!(0,p.Z)(o))return a;var s=n[o._technique];if(!(0,p.Z)(s))return a;var u=s.attributes,c=e._rendererResources.programs[s.program],l=c._attributeLocations;for(r in l)if(l.hasOwnProperty(r)){var d=u[r];(0,p.Z)(d)&&(i=l[r],a[d.semantic]=i)}var h=e._precreatedAttributes;if((0,p.Z)(h))for(r in h)h.hasOwnProperty(r)&&(i=l[r],a[r]=i);return a}function Pt(e,t){for(var r=e.gltf,i=r.skins,n=r.nodes,a=e._runtime.nodes,o=e._loadResources.skinnedNodesIds,s=o.length,u=0;u<s;++u){var c=o[u],l=a[c],d=n[c],h=t[d.skin];l.inverseBindMatrices=h.inverseBindMatrices,l.bindShapeMatrix=h.bindShapeMatrix;for(var m=i[d.skin].joints,f=m.length,p=0;p<f;++p){var _=m[p],g=a[_];l.joints.push(g)}}}function Lt(e){var t=e._loadResources;if(0===t.pendingBufferLoads&&t.createSkins){t.createSkins=!1;var r=e.gltf,i=r.accessors,n={};J.Z.skin(r,(function(t,r){var a,o=i[t.inverseBindMatrices];A.Z.equals(t.bindShapeMatrix,A.Z.IDENTITY)||(a=A.Z.clone(t.bindShapeMatrix)),n[r]={inverseBindMatrices:me.Z.getSkinInverseBindMatrices(e,o),bindShapeMatrix:a}})),Pt(e,n)}}function It(e,t,r,i){return function(n){(0,p.Z)(i)&&(n=e.clampAnimations?i.clampTime(n):i.wrapTime(n),t[r]=i.evaluate(n,t[r]),t.dirtyNumber=e._maxDirtyNumber)}}function Bt(e){var t=e._loadResources;if(t.finishedPendingBufferLoads()&&t.createRuntimeAnimations){t.createRuntimeAnimations=!1,e._runtime.animations=[];var r=e._runtime.nodes,i=e.gltf.accessors;J.Z.animation(e.gltf,(function(t,n){for(var a=t.channels,o=t.samplers,s=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=a.length,l=new Array(c),d=0;d<c;++d){var h=a[d],m=h.target,f=m.path,p=o[h.sampler],_=me.Z.getAnimationParameterValues(e,i[p.input]),g=me.Z.getAnimationParameterValues(e,i[p.output]);s=Math.min(s,_[0]),u=Math.max(u,_[_.length-1]);var Z=me.Z.getAnimationSpline(e,n,t,h.sampler,p,_,f,g);l[d]=It(e,r[m.node],m.path,Z)}e._runtime.animations[n]={name:t.name,startTime:s,stopTime:u,channelEvaluators:l}}))}}function Nt(e,t){var r=e._loadResources;if(r.finishedBuffersCreation()&&r.finishedProgramCreation()&&r.createVertexArrays){r.createVertexArrays=!1;var i=e._rendererResources.buffers,n=e._rendererResources.vertexArrays,a=e.gltf,o=a.accessors;J.Z.mesh(a,(function(r,s){J.Z.meshPrimitive(r,(function(r,u){var c,l,d,h=[],m=Tt(e,r),f=e._decodedData[s+".primitive."+u];J.Z.meshPrimitiveAttribute(r,(function(e,t){if(c=m[t],(0,p.Z)(c)){if((0,p.Z)(f)){var r=f.attributes;if(r.hasOwnProperty(t)){var n=r[t];return void h.push({index:c,vertexBuffer:i[n.bufferView],componentsPerAttribute:n.componentsPerAttribute,componentDatatype:n.componentDatatype,normalize:n.normalized,offsetInBytes:n.byteOffset,strideInBytes:n.byteStride})}}var s=o[e],u=(0,p.Z)(s.normalized)&&s.normalized;h.push({index:c,vertexBuffer:i[s.bufferView],componentsPerAttribute:(0,$.Z)(s.type),componentDatatype:s.componentType,normalize:u,offsetInBytes:s.byteOffset,strideInBytes:(0,X.Z)(a,s)})}}));var _,g=e._precreatedAttributes;if((0,p.Z)(g))for(d in g)g.hasOwnProperty(d)&&(c=m[d],(0,p.Z)(c)&&(l=g[d],l.index=c,h.push(l)));if((0,p.Z)(r.indices)){var Z=o[r.indices],v=Z.bufferView;(0,p.Z)(f)&&(v=f.bufferView),_=i[v]}n[s+".primitive."+u]=new K.Z({context:t,attributes:h,indexBuffer:_})}))}))}}function Dt(e){var t=e._loadResources;t.createRenderStates&&(t.createRenderStates=!1,J.Z.material(e.gltf,(function(t,r){Ot(e,t,r)})))}function Ot(e,t,r){var i=e._rendererResources.renderStates,n=[N.Z.FUNC_ADD,N.Z.FUNC_ADD],a=[N.Z.ONE,N.Z.ONE_MINUS_SRC_ALPHA,N.Z.ONE,N.Z.ONE_MINUS_SRC_ALPHA];(0,p.Z)(t.extensions)&&(0,p.Z)(t.extensions.KHR_blend)&&(n=t.extensions.KHR_blend.blendEquation,a=t.extensions.KHR_blend.blendFactors);var o=!t.doubleSided,s="BLEND"===t.alphaMode;i[r]=k.Z.fromCache({cull:{enabled:o},depthTest:{enabled:!0,func:se.Z.LESS_OR_EQUAL},depthMask:!s,blending:{enabled:s,equationRgb:n[0],equationAlpha:n[1],functionSourceRgb:a[0],functionDestinationRgb:a[1],functionSourceAlpha:a[2],functionDestinationAlpha:a[3]}})}var Ft={MODEL:function(e,t,r){return function(){return r.computedMatrix}},VIEW:function(e,t,r){return function(){return e.view}},PROJECTION:function(e,t,r){return function(){return e.projection}},MODELVIEW:function(e,t,r){var i=new A.Z;return function(){return A.Z.multiplyTransformation(e.view,r.computedMatrix,i)}},CESIUM_RTC_MODELVIEW:function(e,t,r){var i=new A.Z;return function(){return A.Z.multiplyTransformation(e.view,r.computedMatrix,i),A.Z.setTranslation(i,t._rtcCenterEye,i)}},MODELVIEWPROJECTION:function(e,t,r){var i=new A.Z;return function(){return A.Z.multiplyTransformation(e.view,r.computedMatrix,i),A.Z.multiply(e._projection,i,i)}},MODELINVERSE:function(e,t,r){var i=new A.Z;return function(){return A.Z.inverse(r.computedMatrix,i)}},VIEWINVERSE:function(e,t){return function(){return e.inverseView}},PROJECTIONINVERSE:function(e,t,r){return function(){return e.inverseProjection}},MODELVIEWINVERSE:function(e,t,r){var i=new A.Z,n=new A.Z;return function(){return A.Z.multiplyTransformation(e.view,r.computedMatrix,i),A.Z.inverse(i,n)}},MODELVIEWPROJECTIONINVERSE:function(e,t,r){var i=new A.Z,n=new A.Z;return function(){return A.Z.multiplyTransformation(e.view,r.computedMatrix,i),A.Z.multiply(e._projection,i,i),A.Z.inverse(i,n)}},MODELINVERSETRANSPOSE:function(e,t,r){var i=new A.Z,n=new E.Z;return function(){return A.Z.inverse(r.computedMatrix,i),A.Z.getMatrix3(i,n),E.Z.transpose(n,n)}},MODELVIEWINVERSETRANSPOSE:function(e,t,r){var i=new A.Z,n=new A.Z,a=new E.Z;return function(){return A.Z.multiplyTransformation(e.view,r.computedMatrix,i),A.Z.inverse(i,n),A.Z.getMatrix3(n,a),E.Z.transpose(a,a)}},VIEWPORT:function(e,t,r){return function(){return e.viewportCartesian4}}};function Ut(e,t,r,i){var n=t._runtime.nodes[e];return Ft[r](i,t,n)}function kt(e,t,r,i,n,a,o){var s,u,c={},l={};return J.Z.techniqueUniform(r,(function(r,d){var h;if((0,p.Z)(i)&&(0,p.Z)(i[d]))h=xe.Z.createUniformFunction(r.type,i[d],a,o),c[d]=h.func,l[d]=h;else if((0,p.Z)(r.node))c[d]=Ut(r.node,e,r.semantic,n.uniformState);else if((0,p.Z)(r.semantic))if("JOINTMATRIX"===r.semantic)s=d;else if("MORPHWEIGHTS"===r.semantic)u=d;else if("ALPHACUTOFF"===r.semantic){var m=t.alphaMode;if((0,p.Z)(m)&&"MASK"===m){var _=(0,f.Z)(t.alphaCutoff,.5);h=xe.Z.createUniformFunction(r.type,_,a,o),c[d]=h.func,l[d]=h}}else c[d]=xe.Z.getGltfSemanticUniforms()[r.semantic](n.uniformState,e);else if((0,p.Z)(r.value)){var g=xe.Z.createUniformFunction(r.type,r.value,a,o);c[d]=g.func,l[d]=g}})),{map:c,values:l,jointMatrixUniformName:s,morphWeightsUniformName:u}}function qt(e,t){var r=e._loadResources;if(r.finishedProgramCreation()&&r.createUniformMaps){r.createUniformMaps=!1;var i=e.gltf,n=e._sourceTechniques,a=e._uniformMaps,o=e._rendererResources.textures,s=e._defaultTexture;J.Z.material(i,(function(r,i){var u=e._runtime.materialsById[i],c=n[u._technique],l=u._values,d=kt(e,r,c,l,t,o,s),h=a[i];if(h.uniformMap=d.map,h.values=d.values,h.jointMatrixUniformName=d.jointMatrixUniformName,h.morphWeightsUniformName=d.morphWeightsUniformName,(0,p.Z)(c.attributes.a_outlineCoordinates)){var m=ve.Z.createTexture(e,t);h.uniformMap.u_outlineTexture=function(){return m}}}))}}function Vt(e){return xe.Z.createUniformsForDracoQuantizedAttributes(e.attributes)}function zt(e,t){var r=mt(e,t),i=e._quantizedUniforms[r];return xe.Z.createUniformsForQuantizedAttributes(e.gltf,t,i)}function Ht(e){return function(){return e}}function Gt(e){return function(){return e.computedJointMatrices}}function Wt(e){return function(){return e.weights}}function Kt(e){return function(){return e.silhouetteColor}}function jt(e){return function(){return e.silhouetteSize}}function Yt(e){return function(){return e.color}}function Jt(e){return function(){return e._clippingPlanesMatrix}}function Xt(e){return function(){return e._iblReferenceFrameMatrix}}function Qt(e){return function(){var t=e.clippingPlanes;return(0,p.Z)(t)&&t.enabled?t.texture:e._defaultTexture}}function $t(e){return function(){var t=e.clippingPlanes;if(!(0,p.Z)(t))return l.Z.WHITE.withAlpha(0);var r=l.Z.clone(t.edgeColor);return r.alpha=t.edgeWidth,r}}function er(e){return function(){return oe.Z.getColorBlend(e.colorBlendMode,e.colorBlendAmount)}}function tr(e){return function(){return e._imageBasedLightingFactor}}function rr(e){return function(){return e._lightColor}}function ir(e){return function(){return e.luminanceAtZenith}}function nr(e){return function(){return e._sphericalHarmonicCoefficients}}function ar(e){return function(){return e._specularEnvironmentMapAtlas.texture}}function or(e){return function(){return e._specularEnvironmentMapAtlas.texture.dimensions}}function sr(e){return function(){return e._specularEnvironmentMapAtlas.maximumMipmapLevel}}function ur(e,t){switch(e.mode){case P.Z.TRIANGLES:return t/3;case P.Z.TRIANGLE_STRIP:case P.Z.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function cr(e,t,r,n,o){for(var s=e._nodeCommands,u=e._pickIds,c=e.allowPicking,l=e._runtime.meshesByName,h=e._rendererResources,m=h.vertexArrays,f=h.programs,_=h.renderStates,g=e._uniformMaps,Z=e.gltf,v=Z.accessors,x=Z.meshes,y=t.mesh,S=x[y],w=S.primitives,C=w.length,M=0;M<C;++M){var b,E=w[M],T=v[E.indices],L=e._runtime.materialsById[E.material],I=L._program,B=e._decodedData[y+".primitive."+M],N=E.attributes.POSITION;if((0,p.Z)(N)){var D=xe.Z.getAccessorMinMax(Z,N);b=i.Z.fromCornerPoints(a.Z.fromArray(D.min),a.Z.fromArray(D.max))}var O,k,q=m[y+".primitive."+M];if((0,p.Z)(B))k=B.numberOfIndices,O=0;else if((0,p.Z)(T))k=T.count,O=T.byteOffset/R.Z.getSizeInBytes(T.componentType);else{var V=v[E.attributes.POSITION];k=V.count,O=0}e._trianglesLength+=ur(E,k),E.mode===P.Z.POINTS&&(e._pointsLength+=k);var z=g[E.material],H=z.uniformMap;if((0,p.Z)(z.jointMatrixUniformName)){var G={};G[z.jointMatrixUniformName]=Gt(r),H=(0,d.Z)(H,G)}if((0,p.Z)(z.morphWeightsUniformName)){var W={};W[z.morphWeightsUniformName]=Wt(r),H=(0,d.Z)(H,W)}H=(0,d.Z)(H,{gltf_color:Yt(e),gltf_colorBlend:er(e),gltf_clippingPlanes:Qt(e),gltf_clippingPlanesEdgeStyle:$t(e),gltf_clippingPlanesMatrix:Jt(e),gltf_iblReferenceFrameMatrix:Xt(e),gltf_iblFactor:tr(e),gltf_lightColor:rr(e),gltf_sphericalHarmonicCoefficients:nr(e),gltf_specularMap:ar(e),gltf_specularMapSize:or(e),gltf_maxSpecularLOD:sr(e),gltf_luminanceAtZenith:ir(e)}),(0,p.Z)(e._uniformMapLoaded)&&(H=e._uniformMapLoaded(H,I,r));var K={};e.extensionsUsed.WEB3D_quantized_attributes?K=zt(e,E):e._dequantizeInShader&&(0,p.Z)(B)&&(K=Vt(B)),H=(0,d.Z)(H,K);var j=_[E.material],Y=j.blending.enabled,J=e._pickObject;(0,p.Z)(J)||(J={primitive:e,id:e.id,node:r.publicNode,mesh:l[S.name]});var X,Q=Ce.Z.castShadows(e._shadows),$=Ce.Z.receiveShadows(e._shadows);if(c&&!(0,p.Z)(e._uniformMapLoaded)){X=n.createPickId(J),u.push(X);var ee={czm_pickColor:Ht(X.color)};H=(0,d.Z)(H,ee)}c&&(X=(0,p.Z)(e._pickIdLoaded)&&(0,p.Z)(e._uniformMapLoaded)?e._pickIdLoaded():"czm_pickColor");var te,re=new F.Z({boundingVolume:new i.Z,cull:e.cull,modelMatrix:new A.Z,primitiveType:E.mode,vertexArray:q,count:k,offset:O,shaderProgram:f[I],castShadows:Q,receiveShadows:$,uniformMap:H,renderState:j,owner:J,pass:Y?U.Z.TRANSLUCENT:e.opaquePass,pickId:X});o||(te=F.Z.shallowClone(re),te.boundingVolume=new i.Z,te.modelMatrix=new A.Z);var ie={show:!0,boundingSphere:b,command:re,command2D:te,silhouetteModelCommand:void 0,silhouetteModelCommand2D:void 0,silhouetteColorCommand:void 0,silhouetteColorCommand2D:void 0,translucentCommand:void 0,translucentCommand2D:void 0,disableCullingCommand:void 0,disableCullingCommand2D:void 0,programId:I};r.commands.push(ie),s.push(ie)}}function lr(e,t,r){var i=e._loadResources;if(i.finishedEverythingButTextureCreation()&&i.createRuntimeNodes){i.createRuntimeNodes=!1;for(var n=[],o=e._runtime.nodes,s=e.gltf,u=s.nodes,c=s.scenes[s.scene],l=c.nodes,d=l.length,h=[],m={},f=0;f<d;++f){h.push({parentRuntimeNode:void 0,gltfNode:u[l[f]],id:l[f]});while(h.length>0){var _=h.pop();m[_.id]=!0;var g=_.parentRuntimeNode,Z=_.gltfNode,v=o[_.id];if(0===v.parents.length)if((0,p.Z)(Z.matrix))v.matrix=A.Z.fromColumnMajorArray(Z.matrix);else{var x=Z.rotation;v.translation=a.Z.fromArray(Z.translation),v.rotation=L.Z.unpack(x),v.scale=a.Z.fromArray(Z.scale)}(0,p.Z)(g)?(g.children.push(v),v.parents.push(g)):n.push(v),(0,p.Z)(Z.mesh)&&cr(e,Z,v,t,r);var y=Z.children;if((0,p.Z)(y))for(var S=y.length,w=0;w<S;w++){var R=y[w];m[R]||h.push({parentRuntimeNode:v,gltfNode:u[R],id:y[w]})}}}e._runtime.rootNodes=n,e._runtime.nodes=o}}function dr(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&(t+=e[r].sizeInBytes);return t}function hr(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&(t+=e[r].sizeInBytes);return t}function mr(e,t){var r=t.context,i=t.scene3DOnly,n=e._quantizedVertexShaders,a=e._sourceTechniques,o=e._sourcePrograms,s=e._rendererResources,u=s.sourceShaders;for(var c in e._loadRendererResourcesFromCache&&(u=s.sourceShaders=e._cachedRendererResources.sourceShaders),a)if(a.hasOwnProperty(c)){var l=a[c].program,d=o[l],h=u[d.vertexShader];if(xe.Z.checkSupportedGlExtensions(d.glExtensions,r),e.extensionsUsed.WEB3D_quantized_attributes||e._dequantizeInShader){var m=n[l];(0,p.Z)(m)||(m=ft(h,l,e),n[l]=m),h=m}h=_t(h,l,e._vertexShaderLoaded)}if(e._loadRendererResourcesFromCache){var f=e._cachedRendererResources;s.buffers=f.buffers,s.vertexArrays=f.vertexArrays,s.programs=f.programs,s.silhouettePrograms=f.silhouettePrograms,s.textures=f.textures,s.samplers=f.samplers,s.renderStates=f.renderStates,(0,p.Z)(e._precreatedAttributes)&&Nt(e,r),e._cachedGeometryByteLength+=dr(f.buffers),e._cachedTexturesByteLength+=hr(f.textures)}else ht(e,t),St(e,t),Ct(e,r),Rt(e),At(e,t);Lt(e),Bt(e),e._loadRendererResourcesFromCache||(Nt(e,r),Dt(e)),qt(e,r),lr(e,r,i)}function fr(e,t){var r=e.publicNode,i=r.matrix;r.useMatrix&&(0,p.Z)(i)?A.Z.clone(i,t):(0,p.Z)(e.matrix)?A.Z.clone(e.matrix,t):(A.Z.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t),r.setMatrix(t))}var pr=[],_r=new o.Z,gr=new A.Z;function Zr(e,t,r,n){var s=e._maxDirtyNumber,u=e._runtime.rootNodes,c=u.length,l=pr,d=e._computedModelMatrix;if(e._mode!==Re.Z.SCENE3D&&!e._ignoreCommands){var h=A.Z.getColumn(d,3,_r);if(o.Z.equals(h,o.Z.UNIT_W)){var m=e.boundingSphere.center,f=B.Z.wgs84To2DModelMatrix(n,m,gr);d=A.Z.multiply(f,d,gr),(0,p.Z)(e._rtcCenter)&&(A.Z.setTranslation(d,o.Z.UNIT_W,d),e._rtcCenter=e._rtcCenter2D)}else d=B.Z.basisTo2D(n,d,gr),e._rtcCenter=e._rtcCenter3D}for(var _=0;_<c;++_){var g=u[_];fr(g,g.transformToRoot),l.push(g);while(l.length>0){g=l.pop();var Z=g.transformToRoot,v=g.commands;if(g.dirtyNumber===s||t||r){var x=A.Z.multiplyTransformation(d,Z,g.computedMatrix),y=v.length;if(y>0)for(var S=0;S<y;++S){var w=v[S],R=w.command;A.Z.clone(x,R.modelMatrix),i.Z.transform(w.boundingSphere,R.modelMatrix,R.boundingVolume),(0,p.Z)(e._rtcCenter)&&a.Z.add(e._rtcCenter,R.boundingVolume.center,R.boundingVolume.center),R=w.command2D,(0,p.Z)(R)&&e._mode===Re.Z.SCENE2D&&(A.Z.clone(x,R.modelMatrix),R.modelMatrix[13]-=2*b.Z.sign(R.modelMatrix[13])*b.Z.PI*n.ellipsoid.maximumRadius,i.Z.transform(w.boundingSphere,R.modelMatrix,R.boundingVolume))}}var C=g.children;if((0,p.Z)(C))for(var M=C.length,E=0;E<M;++E){var T=C[E];T.dirtyNumber=Math.max(T.dirtyNumber,g.dirtyNumber),(T.dirtyNumber===s||r)&&(fr(T,T.transformToRoot),A.Z.multiplyTransformation(Z,T.transformToRoot,T.transformToRoot)),l.push(T)}}}++e._maxDirtyNumber}var vr=new A.Z;function xr(e){for(var t=e._runtime.skinnedNodes,r=t.length,i=0;i<r;++i){var n=t[i];vr=A.Z.inverseTransformation(n.transformToRoot,vr);for(var a=n.computedJointMatrices,o=n.joints,s=n.bindShapeMatrix,u=n.inverseBindMatrices,c=u.length,l=0;l<c;++l)(0,p.Z)(a[l])||(a[l]=new A.Z),a[l]=A.Z.multiplyTransformation(vr,o[l].transformToRoot,a[l]),a[l]=A.Z.multiplyTransformation(a[l],u[l],a[l]),(0,p.Z)(s)&&(a[l]=A.Z.multiplyTransformation(a[l],s,a[l]))}}function yr(e){for(var t=e._runtime.rootNodes,r=t.length,i=pr,n=0;n<r;++n){var a=t[n];a.computedShow=a.publicNode.show,i.push(a);while(i.length>0){a=i.pop();for(var o=a.computedShow,s=a.commands,u=s.length,c=0;c<u;++c)s[c].show=o;var l=a.children;if((0,p.Z)(l))for(var d=l.length,h=0;h<d;++h){var m=l[h];m.computedShow=o&&m.publicNode.show,i.push(m)}}}}function Sr(e,t){var r=e.id;if(e._id!==r){e._id=r;for(var i=e._pickIds,n=i.length,a=0;a<n;++a)i[a].object.id=r}}function wr(e){if(e._debugWireframe!==e.debugWireframe){e._debugWireframe=e.debugWireframe;for(var t=e.debugWireframe?P.Z.LINES:P.Z.TRIANGLES,r=e._nodeCommands,i=r.length,n=0;n<i;++n)r[n].command.primitiveType=t}}function Rr(e){if(e.debugShowBoundingVolume!==e._debugShowBoundingVolume){e._debugShowBoundingVolume=e.debugShowBoundingVolume;for(var t=e.debugShowBoundingVolume,r=e._nodeCommands,i=r.length,n=0;n<i;++n)r[n].command.debugShowBoundingVolume=t}}function Cr(e){if(e.shadows!==e._shadows){e._shadows=e.shadows;for(var t=Ce.Z.castShadows(e.shadows),r=Ce.Z.receiveShadows(e.shadows),i=e._nodeCommands,n=i.length,a=0;a<n;a++){var o=i[a];o.command.castShadows=t,o.command.receiveShadows=r}}}function Mr(e,t){var r=(0,c.Z)(t,!0);return r.cull.enabled=!1,r.depthTest.enabled=!0,r.depthMask=!1,r.blending=ne.Z.ALPHA_BLEND,e.opaquePass===U.Z.CESIUM_3D_TILE&&(r.stencilTest=Me.Z.setCesium3DTileBit(),r.stencilMask=Me.Z.CESIUM_3D_TILE_MASK),k.Z.fromCache(r)}function br(e,t){var r=F.Z.shallowClone(t);return r.pass=U.Z.TRANSLUCENT,r.renderState=Mr(e,t.renderState),r}function Er(e,t,r){var i=t.scene3DOnly,n=e.color.alpha;if(n>0&&n<1){var a=e._nodeCommands,o=a.length;if(o>0&&(!(0,p.Z)(a[0].translucentCommand)||r))for(var s=0;s<o;++s){var u=a[s],c=u.command;if(u.translucentCommand=br(e,c),!i){var l=u.command2D;u.translucentCommand2D=br(e,l)}}}}function Ar(e){var t=(0,c.Z)(e,!0);return t.cull.enabled=!1,k.Z.fromCache(t)}function Tr(e){var t=F.Z.shallowClone(e);return t.renderState=Ar(e.renderState),t}function Pr(e,t,r){var i=t.scene3DOnly,n=e.backFaceCulling;if(!n){var a=e._nodeCommands,o=a.length;if(o>0&&(!(0,p.Z)(a[0].disableCullingCommand)||r))for(var s=0;s<o;++s){var u=a[s],c=u.command;if(u.disableCullingCommand=Tr(c),!i){var l=u.command2D;u.disableCullingCommand2D=Tr(l)}}}}function Lr(e,t){var r=e._rendererResources.programs;for(var i in r)if(r.hasOwnProperty(i)&&r[i]===t)return i}function Ir(e,t,r){var i=t.vertexShaderSource.sources[0],n=t._attributeLocations,a=e._normalAttributeName;i=z.Z.replaceMain(i,"gltf_silhouette_main"),i+="uniform float gltf_silhouetteSize; \nvoid main() \n{ \n    gltf_silhouette_main(); \n    vec3 n = normalize(czm_normal3D * "+a+"); \n    n.x *= czm_projection[0][0]; \n    n.y *= czm_projection[1][1]; \n    vec4 clip = gl_Position; \n    clip.xy += n.xy * clip.w * gltf_silhouetteSize * czm_pixelRatio / czm_viewport.z; \n    gl_Position = clip; \n}";var o="uniform vec4 gltf_silhouetteColor; \nvoid main() \n{ \n    gl_FragColor = czm_gammaCorrect(gltf_silhouetteColor); \n}";return V.Z.fromCache({context:r.context,vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:n})}function Br(e,t){return De(t.context)&&e.silhouetteSize>0&&e.silhouetteColor.alpha>0&&(0,p.Z)(e._normalAttributeName)}function Nr(e){for(var t=e._nodeCommands,r=t.length,i=0;i<r;++i){var n=t[i],a=n.command;if(a.pass===U.Z.TRANSLUCENT)return!0}return!1}function Dr(e){return e.color.alpha>0&&e.color.alpha<1}function Or(e){return 0===e.color.alpha}function Fr(e,t){return Math.floor(e)!==Math.floor(t)||Math.ceil(e)!==Math.ceil(t)}var Ur=0;function kr(e,t){for(var r=++Ur%255,i=Nr(e)||Dr(e)||e.silhouetteColor.alpha<1,n=e._rendererResources.silhouettePrograms,a=t.scene3DOnly,o=e._nodeCommands,s=o.length,u=0;u<s;++u){var l=o[u],h=l.command,m=Dr(e)?l.translucentCommand:h,f=F.Z.shallowClone(m),_=(0,c.Z)(m.renderState);_.stencilTest={enabled:!0,frontFunction:N.Z.ALWAYS,backFunction:N.Z.ALWAYS,reference:r,mask:-1,frontOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.REPLACE},backOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.REPLACE}},Or(e)&&(_.colorMask={red:!1,green:!1,blue:!1,alpha:!1},_.depthMask=!1),_=k.Z.fromCache(_),f.renderState=_,l.silhouetteModelCommand=f;var g=F.Z.shallowClone(h);_=(0,c.Z)(h.renderState,!0),_.depthTest.enabled=!0,_.cull.enabled=!1,i&&(g.pass=U.Z.TRANSLUCENT,_.depthMask=!1,_.blending=ne.Z.ALPHA_BLEND),_.stencilTest={enabled:!0,frontFunction:N.Z.NOTEQUAL,backFunction:N.Z.NOTEQUAL,reference:r,mask:-1,frontOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.KEEP},backOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.KEEP}},_=k.Z.fromCache(_);var Z=h.shaderProgram,v=Lr(e,Z),x=n[v];(0,p.Z)(x)||(x=Ir(e,Z,t),n[v]=x);var y=(0,d.Z)(h.uniformMap,{gltf_silhouetteColor:Kt(e),gltf_silhouetteSize:jt(e)});if(g.renderState=_,g.shaderProgram=x,g.uniformMap=y,g.castShadows=!1,g.receiveShadows=!1,l.silhouetteColorCommand=g,!a){var S=l.command2D,w=F.Z.shallowClone(f);w.boundingVolume=S.boundingVolume,w.modelMatrix=S.modelMatrix,l.silhouetteModelCommand2D=w;var R=F.Z.shallowClone(g);w.boundingVolume=S.boundingVolume,w.modelMatrix=S.modelMatrix,l.silhouetteColorCommand2D=R}}}function qr(e,t,r){return e=z.Z.replaceMain(e,"gltf_clip_main"),e+=Ne._getClippingFunction(t,r)+"\n",e+="uniform highp sampler2D gltf_clippingPlanes; \nuniform mat4 gltf_clippingPlanesMatrix; \nuniform vec4 gltf_clippingPlanesEdgeStyle; \nvoid main() \n{ \n    gltf_clip_main(); \n"+(0,ce.Z)("gltf_clippingPlanes","gltf_clippingPlanesMatrix","gltf_clippingPlanesEdgeStyle")+"} \n",e}function Vr(e,t,r){if(Br(e,t)){var i=e._nodeCommands,n=i.length>0&&(Fr(e.color.alpha,e._colorPreviousAlpha)||Fr(e.silhouetteColor.alpha,e._silhouetteColorPreviousAlpha)||!(0,p.Z)(i[0].silhouetteModelCommand));e._colorPreviousAlpha=e.color.alpha,e._silhouetteColorPreviousAlpha=e.silhouetteColor.alpha,(n||r)&&kr(e,t)}}function zr(e,t){var r=e._clippingPlanes;(0,p.Z)(r)&&r.owner===e&&r.enabled&&r.update(t)}var Hr=new i.Z;function Gr(e,t,r){return Hr.center=e,Hr.radius=t,r.camera.getPixelSize(Hr,r.context.drawingBufferWidth,r.context.drawingBufferHeight)}var Wr=new a.Z,Kr=new s.Z;function jr(e,t){var r=e.scale;if(0!==e.minimumPixelSize){var i=t.context,n=Math.max(i.drawingBufferWidth,i.drawingBufferHeight),o=(0,p.Z)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;if(Wr.x=o[12],Wr.y=o[13],Wr.z=o[14],(0,p.Z)(e._rtcCenter)&&a.Z.add(e._rtcCenter,Wr,Wr),e._mode!==Re.Z.SCENE3D){var s=t.mapProjection,u=s.ellipsoid.cartesianToCartographic(Wr,Kr);s.project(u,Wr),a.Z.fromElements(Wr.z,Wr.x,Wr.y,Wr)}var c=e.boundingSphere.radius,l=Gr(Wr,c,t),d=1/l,h=Math.min(d*(2*c),n);h<e.minimumPixelSize&&(r=e.minimumPixelSize*l/(2*e._initialRadius))}return(0,p.Z)(e.maximumScale)?Math.min(e.maximumScale,r):r}function Yr(e){(0,p.Z)(e._cacheKey)&&(0,p.Z)(e._cachedGltf)&&0===--e._cachedGltf.count&&delete Ie[e._cacheKey],e._cachedGltf=void 0}function Jr(e,t){this.buffers=void 0,this.vertexArrays=void 0,this.programs=void 0,this.sourceShaders=void 0,this.silhouettePrograms=void 0,this.textures=void 0,this.samplers=void 0,this.renderStates=void 0,this.ready=!1,this.context=e,this.cacheKey=t,this.count=0}function Xr(e){for(var t in e)e.hasOwnProperty(t)&&e[t].destroy()}function Qr(e){Xr(e.buffers),Xr(e.vertexArrays),Xr(e.programs),Xr(e.silhouettePrograms),Xr(e.textures)}function $r(e,t,r){return function(i){if(e.heightReference===de.Z.RELATIVE_TO_GROUND){var n=t.cartesianToCartographic(i,Kr);n.height+=r.height,t.cartographicToCartesian(n,i)}var a=e._clampedModelMatrix;A.Z.clone(e.modelMatrix,a),a[12]=i.x,a[13]=i.y,a[14]=i.z,e._heightChanged=!0}}function ei(e){(0,p.Z)(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);var t=e._scene;if((0,p.Z)(t)&&(0,p.Z)(t.globe)&&e.heightReference!==de.Z.NONE){var r=t.globe,i=r.ellipsoid,n=e.modelMatrix;Wr.x=n[12],Wr.y=n[13],Wr.z=n[14];var a=i.cartesianToCartographic(Wr);(0,p.Z)(e._clampedModelMatrix)||(e._clampedModelMatrix=A.Z.clone(n,new A.Z));var o=r._surface;e._removeUpdateHeightCallback=o.updateHeight(a,$r(e,i,a));var u=r.getHeight(a);if((0,p.Z)(u)){var c=$r(e,i,a);s.Z.clone(a,Kr),Kr.height=u,i.cartographicToCartesian(Kr,Wr),c(Wr)}}else{if(e.heightReference!==de.Z.NONE)throw new g.Z("Height reference is not supported without a scene and globe.");e._clampedModelMatrix=void 0}}Jr.prototype.release=function(){if(0===--this.count)return(0,p.Z)(this.cacheKey)&&delete this.context.cache.modelRendererResourceCache[this.cacheKey],Qr(this),(0,_.Z)(this)};var ti=new a.Z,ri=new s.Z;function ii(e,t){var r,i=e.distanceDisplayCondition,n=i.near*i.near,o=i.far*i.far;if(t.mode===Re.Z.SCENE2D){var s=t.camera.frustum.right-t.camera.frustum.left;r=.5*s,r*=r}else{var u=A.Z.getTranslation(e.modelMatrix,ti);if(t.mode===Re.Z.COLUMBUS_VIEW){var c=t.mapProjection,l=c.ellipsoid,d=l.cartesianToCartographic(u,ri);u=c.project(d,u),a.Z.fromElements(u.z,u.x,u.y,u)}r=a.Z.distanceSquared(u,t.camera.positionWC)}return r>=n&&r<=o}var ni=new A.Z,ai=new A.Z,oi=new E.Z;function si(e,t){e.programs!==t.programs&&Xr(e.programs),e.silhouettePrograms!==t.silhouettePrograms&&Xr(e.silhouettePrograms)}function ui(e,t){var r,i=e._rendererResources,n=e._cachedRendererResources;if(si(i,n),Fe(e)||Oe(e)||e._shouldRegenerateShaders){e._shouldRegenerateShaders=!1,i.programs={},i.silhouettePrograms={};var a,o={},s=e._sourceTechniques;for(var u in s)s.hasOwnProperty(u)&&(a=s[u],r=a.program,o[r]||(o[r]=!0,vt({programId:r,techniqueId:u},e,t.context)))}else i.programs=n.programs,i.silhouettePrograms=n.silhouettePrograms;for(var c=i.programs,l=e._nodeCommands,d=l.length,h=0;h<d;++h){var m=l[h];r=m.programId;var f=c[r];m.command.shaderProgram=f,(0,p.Z)(m.command2D)&&(m.command2D.shaderProgram=f)}Er(e,t,!0),Pr(e,t,!0),Vr(e,t,!0)}Ne.prototype.update=function(e){if(e.mode!==Re.Z.MORPHING)if(v.Z.supportsWebP.initialized){var t=e.context;this._defaultTexture=t.defaultTexture;var r=v.Z.supportsWebP();if(this._state===Ee.NEEDS_LOAD&&(0,p.Z)(this.gltf)){var i,n=this.cacheKey;if((0,p.Z)(n)){t.cache.modelRendererResourceCache=(0,f.Z)(t.cache.modelRendererResourceCache,{});var o=t.cache.modelRendererResourceCache;if(i=o[this.cacheKey],(0,p.Z)(i)){if(!i.ready)return;++i.count,this._loadRendererResourcesFromCache=!0}else i=new Jr(t,n),i.count=1,o[this.cacheKey]=i;this._cachedRendererResources=i}else i=new Jr(t),i.count=1,this._cachedRendererResources=i;if(this._state=Ee.LOADING,this._state!==Ee.FAILED){var s=this.gltf.extensions;if((0,p.Z)(s)&&(0,p.Z)(s.CESIUM_RTC)){var u=a.Z.fromArray(s.CESIUM_RTC.center);if(!a.Z.equals(u,a.Z.ZERO)){this._rtcCenter3D=u;var c=e.mapProjection,l=c.ellipsoid,d=l.cartesianToCartographic(this._rtcCenter3D),h=c.project(d);a.Z.fromElements(h.z,h.x,h.y,h),this._rtcCenter2D=h,this._rtcCenterEye=new a.Z,this._rtcCenter=this._rtcCenter3D}}(0,Y.Z)(this.gltf),this._loadResources=new pe.Z,this._loadRendererResourcesFromCache||xe.Z.parseBuffers(this,We)}}var m=this._loadResources,_=this._incrementallyLoadTextures,g=!1;if(this._state===Ee.LOADING){if(0===m.pendingBufferLoads){if(!m.initialized){if(e.brdfLutGenerator.update(e),xe.Z.checkSupportedExtensions(this.extensionsRequired,r),xe.Z.updateForwardAxis(this),!(0,p.Z)(this.gltf.extras.sourceVersion)){var Z=this.gltf;Z.extras.sourceVersion=xe.Z.getAssetVersion(Z),Z.extras.sourceKHRTechniquesWebGL=(0,p.Z)(xe.Z.getUsedExtensions(Z).KHR_techniques_webgl),this._sourceVersion=Z.extras.sourceVersion,this._sourceKHRTechniquesWebGL=Z.extras.sourceKHRTechniquesWebGL,(0,te.Z)(Z),(0,j.Z)(Z);var x={addBatchIdToGeneratedShaders:this._addBatchIdToGeneratedShaders};(0,Se.Z)(Z,x),(0,we.Z)(Z,x)}this._sourceVersion=this.gltf.extras.sourceVersion,this._sourceKHRTechniquesWebGL=this.gltf.extras.sourceKHRTechniquesWebGL,this._dequantizeInShader=this._dequantizeInShader&&ue.Z.hasExtension(this),Ge(this),Qe(this),je(this),this._loadRendererResourcesFromCache||(Ke(this),Je(this),Xe(this),tt(this,t,r)),nt(this),at(this),it(this),ue.Z.parse(this,t),m.initialized=!0}m.finishedDecoding()||ue.Z.decodeModel(this,t).otherwise(xe.Z.getFailedLoadFunction(this,"model",this.basePath)),m.finishedDecoding()&&!m.resourcesParsed&&(this._boundingSphere=xe.Z.computeBoundingSphere(this),this._initialRadius=this._boundingSphere.radius,ue.Z.cacheDataForModel(this),m.resourcesParsed=!0),m.resourcesParsed&&0===m.pendingShaderLoads&&(this.showOutline&&ve.Z.outlinePrimitives(this),mr(this,e))}(m.finished()||_&&m.finishedEverythingButTextureCreation())&&(this._state=Ee.LOADED,g=!0)}if((0,p.Z)(m)&&this._state===Ee.LOADED&&(_&&!g&&mr(this,e),m.finished())){this._loadResources=void 0;var y=this._rendererResources,S=this._cachedRendererResources;S.buffers=y.buffers,S.vertexArrays=y.vertexArrays,S.programs=y.programs,S.sourceShaders=y.sourceShaders,S.silhouettePrograms=y.silhouettePrograms,S.textures=y.textures,S.samplers=y.samplers,S.renderStates=y.renderStates,S.ready=!0,this._normalAttributeName=xe.Z.getAttributeOrUniformBySemantic(this.gltf,"NORMAL"),(0,p.Z)(this._precreatedAttributes)&&(S.vertexArrays={}),this.releaseGltfJson&&Yr(this)}var w=ye.Z.isSupported(t);if(this._shouldUpdateSpecularMapAtlas&&w){if(this._shouldUpdateSpecularMapAtlas=!1,this._specularEnvironmentMapAtlas=this._specularEnvironmentMapAtlas&&this._specularEnvironmentMapAtlas.destroy(),this._specularEnvironmentMapAtlas=void 0,(0,p.Z)(this._specularEnvironmentMaps)){this._specularEnvironmentMapAtlas=new ye.Z(this._specularEnvironmentMaps);var R=this;this._specularEnvironmentMapAtlas.readyPromise.then((function(){R._shouldRegenerateShaders=!0})).otherwise((function(e){console.error("Error loading specularEnvironmentMaps: "+e)}))}this._shouldRegenerateShaders=!0}(0,p.Z)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.update(e);var C=!(0,p.Z)(this._specularEnvironmentMapAtlas)&&(0,p.Z)(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,M=!(0,p.Z)(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,T=!(0,p.Z)(this._sphericalHarmonicCoefficients)&&(0,p.Z)(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,P=!(0,p.Z)(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||C||M||T||P,this._useDefaultSpecularMaps=!(0,p.Z)(this._specularEnvironmentMapAtlas)&&(0,p.Z)(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!(0,p.Z)(this._sphericalHarmonicCoefficients)&&(0,p.Z)(e.sphericalHarmonicCoefficients);var L=Br(this,e),I=Dr(this),B=Or(this),N=this.backFaceCulling,D=!(0,p.Z)(this.distanceDisplayCondition)||ii(this,e),O=this.show&&D&&0!==this.scale&&(!B||L);if(O&&this._state===Ee.LOADED||g){var F=this.activeAnimations.update(e)||this._cesiumAnimationsDirty;this._cesiumAnimationsDirty=!1,this._dirty=!1;var U=this.modelMatrix,k=e.mode!==this._mode;this._mode=e.mode;var q=!A.Z.equals(this._modelMatrix,U)||this._scale!==this.scale||this._minimumPixelSize!==this.minimumPixelSize||0!==this.minimumPixelSize||this._maximumScale!==this.maximumScale||this._heightReference!==this.heightReference||this._heightChanged||k;if(q||g){A.Z.clone(U,this._modelMatrix),ei(this),(0,p.Z)(this._clampedModelMatrix)&&(U=this._clampedModelMatrix),this._scale=this.scale,this._minimumPixelSize=this.minimumPixelSize,this._maximumScale=this.maximumScale,this._heightReference=this.heightReference,this._heightChanged=!1;var V=jr(this,e),z=this._computedModelMatrix;A.Z.multiplyByUniformScale(U,V,z),this._upAxis===ie.Z.Y?A.Z.multiplyTransformation(z,ie.Z.Y_UP_TO_Z_UP,z):this._upAxis===ie.Z.X&&A.Z.multiplyTransformation(z,ie.Z.X_UP_TO_Z_UP,z),this.forwardAxis===ie.Z.Z&&A.Z.multiplyTransformation(z,ie.Z.Z_UP_TO_X_UP,z)}(F||q||g)&&(Zr(this,q,g,e.mapProjection),this._dirty=!0,(F||g)&&xr(this)),this._perNodeShowDirty&&(this._perNodeShowDirty=!1,yr(this)),Sr(this,t),wr(this),Rr(this),Cr(this),zr(this,e);var H=this._clippingPlanes,G=0,W=(0,f.Z)(this.referenceMatrix,U);if(Fe(this)){var K=ni;K=A.Z.multiply(t.uniformState.view3D,W,K),K=A.Z.multiply(K,H.modelMatrix,K),this._clippingPlanesMatrix=A.Z.inverseTranspose(K,this._clippingPlanesMatrix),G=H.clippingPlanesState}var J=(0,p.Z)(this._sphericalHarmonicCoefficients)||this._useDefaultSphericalHarmonics,X=(0,p.Z)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready||this._useDefaultSpecularMaps;if(J||X){var Q=oi,$=ai;$=A.Z.multiply(t.uniformState.view3D,W,$),Q=A.Z.getMatrix3($,Q),Q=E.Z.getRotation(Q,Q),this._iblReferenceFrameMatrix=E.Z.transpose(Q,this._iblReferenceFrameMatrix)}var ee=this._shouldRegenerateShaders;ee=ee||this._clippingPlanesState!==G,this._clippingPlanesState=G;var re=Oe(this);re!==this._colorShadingEnabled&&(this._colorShadingEnabled=re,ee=!0),ee?ui(this,e):(Er(this,e,!1),Pr(this,e,!1),Vr(this,e,!1))}if(g){var ne=this;e.afterRender.push((function(){ne._ready=!0,ne._readyPromise.resolve(ne)}))}else{if(O&&!this._ignoreCommands){var ae,oe,se,ce=e.commandList,le=e.passes,de=this._nodeCommands,he=de.length,me=e.mapProjection.ellipsoid.maximumRadius*b.Z.PI;if(le.render||le.pick&&this.allowPicking){for(ae=0;ae<he;++ae)if(oe=de[ae],oe.show){var fe=oe.command;if(L?fe=oe.silhouetteModelCommand:I?fe=oe.translucentCommand:N||(fe=oe.disableCullingCommand),ce.push(fe),se=oe.command.boundingVolume,e.mode===Re.Z.SCENE2D&&(se.center.y+se.radius>me||se.center.y-se.radius<me)){var _e=oe.command2D;L?_e=oe.silhouetteModelCommand2D:I?_e=oe.translucentCommand2D:N||(_e=oe.disableCullingCommand2D),ce.push(_e)}}if(L&&!le.pick)for(ae=0;ae<he;++ae)oe=de[ae],oe.show&&(ce.push(oe.silhouetteColorCommand),se=oe.command.boundingVolume,e.mode===Re.Z.SCENE2D&&(se.center.y+se.radius>me||se.center.y-se.radius<me)&&ce.push(oe.silhouetteColorCommand2D))}}var ge=this._credit;(0,p.Z)(ge)&&e.creditDisplay.addCredit(ge);for(var Ze=this._resourceCredits,Ce=Ze.length,Me=0;Me<Ce;Me++)e.creditDisplay.addCredit(Ze[Me])}}else v.Z.supportsWebP.initialize()},Ne.prototype.isDestroyed=function(){return!1},Ne.prototype.destroy=function(){(0,p.Z)(this._precreatedAttributes)&&Xr(this._rendererResources.vertexArrays),(0,p.Z)(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),(0,p.Z)(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0),(0,p.Z)(this._cachedRendererResources)&&si(this._rendererResources,this._cachedRendererResources),this._rendererResources=void 0,this._cachedRendererResources=this._cachedRendererResources&&this._cachedRendererResources.release(),ue.Z.destroyCachedDataForModel(this);for(var e=this._pickIds,t=e.length,r=0;r<t;++r)e[r].destroy();Yr(this),this._quantizedVertexShaders=void 0;var i=this._clippingPlanes;return(0,p.Z)(i)&&!i.isDestroyed()&&i.owner===this&&i.destroy(),this._clippingPlanes=void 0,this._specularEnvironmentMapAtlas=this._specularEnvironmentMapAtlas&&this._specularEnvironmentMapAtlas.destroy(),(0,_.Z)(this)},Ne._getClippingFunction=le.Z,Ne._modifyShaderForColor=pt,t["Z"]=Ne},39982:function(e,t,r){var i=r(72e3),n=r(60216),a=r(62200),o=r(82982),s=r(86511),u=r(50491),c=r(23628),l=r(68201),d=r(72248),h=r(83156),m=r(95555),f=r(64336),p=r(69592);function _(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT);var t=e.textureUrl;(0,o.Z)(t)||(t=(0,i.Z)("Assets/Textures/moonSmall.jpg")),this.show=(0,a.Z)(e.show,!0),this.textureUrl=t,this._ellipsoid=(0,a.Z)(e.ellipsoid,u.Z.MOON),this.onlySunLighting=(0,a.Z)(e.onlySunLighting,!0),this._ellipsoidPrimitive=new f.Z({radii:this.ellipsoid.radii,material:p.Z.fromType(p.Z.ImageType),depthTestEnabled:!1,_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new c.Z}Object.defineProperties(_.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});var g=new l.Z,Z=new l.Z,v=new n.Z,x=[];_.prototype.update=function(e){if(this.show){var t=this._ellipsoidPrimitive;t.material.uniforms.image=this.textureUrl,t.onlySunLighting=this.onlySunLighting;var r=e.time;(0,o.Z)(m.Z.computeIcrfToFixedMatrix(r,g))||m.Z.computeTemeToPseudoFixedMatrix(r,g);var i=this._axes.evaluate(r,Z);l.Z.transpose(i,i),l.Z.multiply(g,i,i);var n=h.Z.computeMoonPositionInEarthInertialFrame(r,v);l.Z.multiplyByVector(g,n,n),d.Z.fromRotationTranslation(i,n,t.modelMatrix);var a=e.commandList;return e.commandList=x,x.length=0,t.update(e),e.commandList=a,1===x.length?x[0]:void 0}},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),(0,s.Z)(this)},t["Z"]=_}}]);
//# sourceMappingURL=chunk-vendors-e2ce7637.ea116747.js.map