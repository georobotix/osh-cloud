"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[552],{6652:function(e,t,i){i.d(t,{Z:function(){return g}});var r=i(60216),n=i(66553),o=i(8182),s=i(62200),a=i(82982),l=i(86511),u=i(99417),h=i(67662),c=i(68201),d=i(96190),f=i(90791),m=i(13222),p=i(61800),v=i(46433),b=i(81326),_=i(19661);function g(e,t,i,r,o){n.Z.defined("tile.implicitTileset",t.implicitTileset),n.Z.defined("tile.implicitCoordinates",t.implicitCoordinates);var s=t.implicitTileset,a=t.implicitCoordinates;this._implicitTileset=s,this._implicitCoordinates=a,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=i,this._readyPromise=m.Z.defer(),this.featurePropertiesDirty=!1,this._groupMetadata=void 0;var l=a.getTemplateValues(),u=s.subtreeUriTemplate.getDerivedResource({templateValues:l});this._url=u.getUrlComponent(!0),Z(this,r,o)}function Z(e,t,i){i=(0,s.Z)(i,0);var r=new Uint8Array(t,i),n=new p.Z(e._resource,r,e._implicitTileset,e._implicitCoordinates);e._implicitSubtree=n,n.readyPromise.then((function(){y(e,n),e._readyPromise.resolve()})).otherwise((function(t){e._readyPromise.reject(t)}))}function y(e,t){var i=e._tile,r=e._implicitCoordinates.childIndex,n=C(e,t,i,r);i.children.push(n.rootTile);for(var o=T(e,t,n.bottomRow),s=0;s<o.length;s++){var a=o[s],l=a.tile,u=B(e,l,a.childIndex);l.children.push(u)}}function T(e,t,i){for(var r=[],n=e._implicitTileset.branchingFactor,o=0;o<i.length;o++){var s=i[o];if((0,a.Z)(s))for(var l=0;l<n;l++){var u=o*n+l;t.childSubtreeIsAvailableAtIndex(u)&&r.push({tile:s,childIndex:l})}}return r}function C(e,t,i,r){for(var n=0,o=!0,s=E(e,t,i,r,n,o),a=[s],l=[],u=e._implicitTileset,h=1;h<u.subtreeLevels;h++){for(var c=t.getLevelOffset(h),d=u.branchingFactor*a.length,f=0;f<d;f++){var m=c+f;if(t.tileIsAvailableAtIndex(m)){var p=t.getParentMortonIndex(f),v=a[p],b=f%u.branchingFactor,_=E(e,t,v,b,m);v.children.push(_),l.push(_)}else l.push(void 0)}a=l,l=[]}return{rootTile:s,bottomRow:a}}function E(e,t,i,r,n,l){var u,h,c,d,f=e._implicitTileset;if(u=(0,s.Z)(l,!1)?i.implicitCoordinates:i.implicitCoordinates.getChildCoordinates(r),(0,a.Z)(t.metadataExtension)){var m=t.metadataTable;h=new v.Z({class:m.class,implicitCoordinates:u,implicitSubtree:t});var p=(0,_.Z)(h);c=p.tile,d=p.content}for(var g,Z=[],y=0;y<f.contentCount;y++)if(t.contentIsAvailableAtIndex(n,y)){var T=f.contentUriTemplates[y],C=T.getDerivedResource({templateValues:u.getTemplateValues()}).url,E={uri:C};(0,a.Z)(d)&&(0,a.Z)(d.boundingVolume)&&(E.boundingVolume=d.boundingVolume),Z.push((0,o.Z)(E,f.contentHeaders[y]))}(0,a.Z)(c)&&(0,a.Z)(c.boundingVolume)?g=c.boundingVolume:(g=S(f,u,r,(0,s.Z)(l,!1),i),(0,b.Z)(g,"3DTILES_bounding_volume_S2")&&(0,a.Z)(c)?x(g.extensions["3DTILES_bounding_volume_S2"],c.minimumHeight,c.maximumHeight):(0,a.Z)(g.region)&&(0,a.Z)(c)&&w(g.region,c.minimumHeight,c.maximumHeight));var A=f.geometricError/Math.pow(2,u.level),I={boundingVolume:g,geometricError:A,refine:f.refine};1===Z.length?I.content=Z[0]:Z.length>1&&(I.extensions={"3DTILES_multiple_contents":{content:Z}});var L=!0,O=M(e,f.baseResource,(0,o.Z)(I,f.tileHeader,L),i);return O.implicitCoordinates=u,O.implicitSubtree=t,O.metadata=h,O}function w(e,t,i){(0,a.Z)(t)&&(e[4]=t),(0,a.Z)(i)&&(e[5]=i)}function x(e,t,i){(0,a.Z)(t)&&(e.minimumHeight=t),(0,a.Z)(i)&&(e.maximumHeight=i)}function S(e,t,i,r,n){var o=e.boundingVolume;if((0,b.Z)(o,"3DTILES_bounding_volume_S2"))return A(r,n,i,t.level,t.x,t.y,t.z);if((0,a.Z)(o.region)){var s=D(o.region,t.level,t.x,t.y,t.z);return{region:s}}var l=F(o.box,t.level,t.x,t.y,t.z);return{box:l}}function A(e,t,i,r,o,s,l){n.Z.typeOf.bool("parentIsPlaceholderTile",e),n.Z.typeOf.object("parentTile",t),n.Z.typeOf.number("childIndex",i),n.Z.typeOf.number("level",r),n.Z.typeOf.number("x",o),n.Z.typeOf.number("y",s),(0,a.Z)(l)&&n.Z.typeOf.number("z",l);var u=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:f.Z.getTokenFromId(u.s2Cell._cellId),minimumHeight:u.minimumHeight,maximumHeight:u.maximumHeight}}};var c,d,m=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),p=m%2===0?h.Z.encode2D(r,o,s):h.Z.encode2D(r,s,o),v=f.Z.fromFacePositionLevel(m,BigInt(p),r);if((0,a.Z)(l)){var b=(u.maximumHeight+u.minimumHeight)/2;c=i<4?u.minimumHeight:b,d=i<4?b:u.maximumHeight}else c=u.minimumHeight,d=u.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:f.Z.getTokenFromId(v._cellId),minimumHeight:c,maximumHeight:d}}}}Object.defineProperties(g.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},batchTable:{get:function(){}},groupMetadata:{get:function(){return this._groupMetadata},set:function(e){this._groupMetadata=e}}});var I=new r.Z,L=new r.Z,O=new r.Z,P=new c.Z;function F(e,t,i,o,s){if(n.Z.typeOf.object("rootBox",e),n.Z.typeOf.number("level",t),n.Z.typeOf.number("x",i),n.Z.typeOf.number("y",o),(0,a.Z)(s)&&n.Z.typeOf.number("z",s),0===t)return e;var l=r.Z.unpack(e,0,L),u=c.Z.unpack(e,3,P),h=Math.pow(2,-t),d=(2*i+1)*h-1,f=(2*o+1)*h-1,m=0,p=r.Z.fromElements(h,h,1,I);(0,a.Z)(s)&&(m=(2*s+1)*h-1,p.z=h);var v=r.Z.fromElements(d,f,m,O);v=c.Z.multiplyByVector(u,v,O),v=r.Z.add(v,l,O);var b=c.Z.clone(u);b=c.Z.multiplyByScale(b,p,b);var _=new Array(12);return r.Z.pack(v,_),c.Z.pack(b,_,3),_}var R=new d.Z;function D(e,t,i,r,o){if(n.Z.typeOf.object("rootRegion",e),n.Z.typeOf.number("level",t),n.Z.typeOf.number("x",i),n.Z.typeOf.number("y",r),(0,a.Z)(o)&&n.Z.typeOf.number("z",o),0===t)return e.slice();var s=d.Z.unpack(e,0,R),l=e[4],h=e[5],c=Math.pow(2,-t),f=c*s.width,m=u.Z.negativePiToPi(s.west+i*f),p=u.Z.negativePiToPi(m+f),v=c*s.height,b=u.Z.negativePiToPi(s.south+r*v),_=u.Z.negativePiToPi(b+v),g=l,Z=h;if((0,a.Z)(o)){var y=c*(h-l);g+=o*y,Z=g+y}return[m,b,p,_,g,Z]}function B(e,t,i){var r=e._implicitTileset,n=t.implicitCoordinates.getChildCoordinates(i),o=S(r,n,i,!1,t),s=r.geometricError/Math.pow(2,n.level),a=r.subtreeUriTemplate.getDerivedResource({templateValues:n.getTemplateValues()}).url,l={boundingVolume:o,geometricError:s,refine:r.refine,content:{uri:a}},u=M(e,r.baseResource,l,t);return u.implicitTileset=r,u.implicitCoordinates=n,u}function M(e,t,i,r){var n=e._tile.constructor;return new n(e._tileset,t,i,r)}g.prototype.hasProperty=function(e,t){return!1},g.prototype.getFeature=function(e){},g.prototype.applyDebugSettings=function(e,t){},g.prototype.applyStyle=function(e){},g.prototype.update=function(e,t){},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),(0,l.Z)(this)},g._deriveBoundingBox=F,g._deriveBoundingRegion=D,g._deriveBoundingVolumeS2=A},53474:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(66553),n=i(82982),o=i(62200),s=i(12572),a=i(9407);function l(e){var t=e.lengthBits,i=e.availableCount;r.Z.typeOf.number("options.lengthBits",t);var s=e.constant,l=e.bitstream;if((0,n.Z)(s))i=t;else{var h=Math.ceil(t/8);if(l.length!==h)throw new a.Z("Availability bitstream must be exactly "+h+" bytes long to store "+t+" bits. Actual bitstream was "+l.length+" bytes long.");var c=(0,o.Z)(e.computeAvailableCountEnabled,!1);!(0,n.Z)(i)&&c&&(i=u(l,t))}this._lengthBits=t,this._availableCount=i,this._constant=s,this._bitstream=l}function u(e,t){for(var i=0,r=0;r<t;r++){var n=r>>3,o=r%8;i+=e[n]>>o&1}return i}Object.defineProperties(l.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}}),l.prototype.getBit=function(e){if(e<0||e>=this._lengthBits)throw new s.Z("Bit index out of bounds.");if((0,n.Z)(this._constant))return this._constant;var t=e>>3,i=e%8;return 1===(this._bitstream[t]>>i&1)}},10149:function(e,t,i){var r=i(12572),n={QUADTREE:"QUADTREE",OCTREE:"OCTREE",getBranchingFactor:function(e){switch(e){case n.OCTREE:return 8;case n.QUADTREE:return 4;default:throw new r.Z("subdivisionScheme is not a valid value.")}}};t["Z"]=Object.freeze(n)},61800:function(e,t,i){i.d(t,{Z:function(){return v}});var r=i(66553),n=i(62200),o=i(12572),s=i(82982),a=i(86511),l=i(12540),u=i(9407),h=i(81326),c=i(53474),d=i(10149),f=i(14358),m=i(38956),p=i(13222);function v(e,t,i,n){r.Z.typeOf.object("resource",e),r.Z.typeOf.object("subtreeView",t),r.Z.typeOf.object("implicitTileset",i),r.Z.typeOf.object("implicitCoordinates",n),this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._implicitCoordinates=n,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._subtreeLevels=i.subtreeLevels,this._subdivisionScheme=i.subdivisionScheme,this._branchingFactor=i.branchingFactor,this._readyPromise=p.Z.defer(),this._metadataTable=void 0,this._metadataExtension=void 0,this._jumpBuffer=void 0,b(this,t,i)}function b(e,t,i){var r,o=_(t),a=o.json;e._subtreeJson=a,(0,h.Z)(a,"3DTILES_metadata")&&(r=a.extensions["3DTILES_metadata"]),e._metadataExtension=r;var l={constant:0};a.contentAvailabilityHeaders=[],(0,h.Z)(a,"3DTILES_multiple_contents")?a.contentAvailabilityHeaders=a.extensions["3DTILES_multiple_contents"].contentAvailability:a.contentAvailabilityHeaders.push((0,n.Z)(a.contentAvailability,l));var u=g(a.buffers),c=Z(a.bufferViews,u);y(a,c),(0,s.Z)(r)&&T(r,c),C(e,u,o.binary).then((function(t){var n=w(c,t);x(e,a,i,n),(0,s.Z)(r)&&(A(e,i,n),I(e)),e._readyPromise.resolve(e)})).otherwise((function(t){e._readyPromise.reject(t)}))}function _(e){var t=!0,i=new DataView(e.buffer,e.byteOffset),r=8,n=i.getUint32(r,t);r+=8;var o=i.getUint32(r,t);r+=8;var s=(0,l.Z)(e,r,n);r+=n;var a=e.subarray(r,r+o);return{json:s,binary:a}}function g(e){e=(0,s.Z)(e)?e:[];for(var t=0;t<e.length;t++){var i=e[t];i.isExternal=(0,s.Z)(i.uri),i.isActive=!1}return e}function Z(e,t){e=(0,s.Z)(e)?e:[];for(var i=0;i<e.length;i++){var r=e[i],n=t[r.buffer];r.bufferHeader=n,r.isActive=!1}return e}function y(e,t){var i,r=e.tileAvailability;(0,s.Z)(r.bufferView)&&(i=t[r.bufferView],i.isActive=!0,i.bufferHeader.isActive=!0);for(var n=e.contentAvailabilityHeaders,o=0;o<n.length;o++)(0,s.Z)(n[o].bufferView)&&(i=t[n[o].bufferView],i.isActive=!0,i.bufferHeader.isActive=!0);var a=e.childSubtreeAvailability;(0,s.Z)(a.bufferView)&&(i=t[a.bufferView],i.isActive=!0,i.bufferHeader.isActive=!0)}function T(e,t){var i,r=e.properties;for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];i=t[o.bufferView],i.isActive=!0,i.bufferHeader.isActive=!0,(0,s.Z)(o.stringOffsetBufferView)&&(i=t[o.stringOffsetBufferView],i.isActive=!0,i.bufferHeader.isActive=!0),(0,s.Z)(o.arrayOffsetBufferView)&&(i=t[o.arrayOffsetBufferView],i.isActive=!0,i.bufferHeader.isActive=!0)}}function C(e,t,i){for(var r=[],n=0;n<t.length;n++){var o=t[n];if(o.isActive)if(o.isExternal){var a=E(e,o);r.push(a)}else r.push(p.Z.resolve(i));else r.push(p.Z.resolve(void 0))}return p.Z.all(r).then((function(e){for(var t={},i=0;i<e.length;i++){var r=e[i];(0,s.Z)(r)&&(t[i]=r)}return t}))}function E(e,t){var i=e._resource,r=i.getDerivedResource({url:t.uri}),n=m.Z.loadExternalBuffer({resource:r});return e._bufferLoader=n,n.promise.then((function(e){return e.typedArray}))}function w(e,t){for(var i={},r=0;r<e.length;r++){var n=e[r];if(n.isActive){var o=n.byteOffset,s=o+n.byteLength,a=t[n.buffer],l=a.subarray(o,s);i[r]=l}}return i}function x(e,t,i,r){var n=i.branchingFactor,o=i.subtreeLevels,s=(Math.pow(n,o)-1)/(n-1),a=Math.pow(n,o),l=(0,h.Z)(t,"3DTILES_metadata");e._tileAvailability=S(t.tileAvailability,r,s,l);for(var u=0;u<t.contentAvailabilityHeaders.length;u++){var c=S(t.contentAvailabilityHeaders[u],r,s);e._contentAvailabilityBitstreams.push(c)}e._childSubtreeAvailability=S(t.childSubtreeAvailability,r,a)}function S(e,t,i,r){if((0,s.Z)(e.constant))return new c.Z({constant:Boolean(e.constant),lengthBits:i,availableCount:e.availableCount});var n=t[e.bufferView];return new c.Z({bitstream:n,lengthBits:i,availableCount:e.availableCount,computeAvailableCountEnabled:r})}function A(e,t,i){var r=e._metadataExtension,n=e._tileAvailability.availableCount,o=r.class,s=t.metadataSchema,a=s.classes[o];e._metadataTable=new f.Z({class:a,count:n,properties:r.properties,bufferViews:i})}function I(e){var t,i=e._tileAvailability,r=0,n=i.lengthBits,o=i.availableCount;t=o<256?new Uint8Array(n):o<65536?new Uint16Array(n):new Uint32Array(n);for(var s=0;s<i.lengthBits;s++)i.getBit(s)&&(t[s]=r,r++);e._jumpBuffer=t}Object.defineProperties(v.prototype,{readyPromise:{get:function(){return this._readyPromise.promise}},metadataTable:{get:function(){return this._metadataTable}},metadataExtension:{get:function(){return this._metadataExtension}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}}),v.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)},v.prototype.tileIsAvailableAtCoordinates=function(e){var t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)},v.prototype.contentIsAvailableAtIndex=function(e,t){if(t=(0,n.Z)(t,0),t<0||t>=this._contentAvailabilityBitstreams.length)throw new o.Z("contentIndex out of bounds.");return this._contentAvailabilityBitstreams[t].getBit(e)},v.prototype.contentIsAvailableAtCoordinates=function(e,t){var i=this.getTileIndex(e,t);return this.contentIsAvailableAtIndex(i)},v.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)},v.prototype.childSubtreeIsAvailableAtCoordinates=function(e){var t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)},v.prototype.getLevelOffset=function(e){var t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)},v.prototype.getParentMortonIndex=function(e){var t=2;return this._subdivisionScheme===d.Z.OCTREE&&(t=3),e>>t},v.prototype.getTileIndex=function(e){var t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new u.Z("level is out of bounds for this subtree");var i=e.getSubtreeCoordinates(),r=i.getOffsetCoordinates(e),n=r.tileIndex;return n},v.prototype.getChildSubtreeIndex=function(e){var t=e.level-this._implicitCoordinates.level;if(t!==this._implicitCoordinates.subtreeLevels)throw new u.Z("level is out of bounds for this subtree");var i=e.getParentSubtreeCoordinates(),r=i.getOffsetCoordinates(e),n=r.mortonIndex;return n},v.prototype.getEntityId=function(e){if((0,s.Z)(this._metadataTable)){var t=this.getTileIndex(e);return this._tileAvailability.getBit(t)?this._jumpBuffer[t]:void 0}},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return(0,s.Z)(this._bufferLoader)&&m.Z.unload(this._bufferLoader),(0,a.Z)(this)}},75692:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(99417),n=i(66553),o=i(12572),s=i(79585),a=i(10149);function l(e){if(n.Z.typeOf.string("options.subdivisionScheme",e.subdivisionScheme),n.Z.typeOf.number("options.subtreeLevels",e.subtreeLevels),n.Z.typeOf.number("options.level",e.level),n.Z.typeOf.number("options.x",e.x),n.Z.typeOf.number("options.y",e.y),e.subdivisionScheme===a.Z.OCTREE&&n.Z.typeOf.number("options.z",e.z),e.level<0)throw new o.Z("level must be non-negative");if(e.x<0)throw new o.Z("x must be non-negative");if(e.y<0)throw new o.Z("y must be non-negative");if(e.subdivisionScheme===a.Z.OCTREE&&e.z<0)throw new o.Z("z must be non-negative");var t=1<<e.level;if(e.x>=t)throw new o.Z("x is out of range");if(e.y>=t)throw new o.Z("y is out of range");if(e.subdivisionScheme===a.Z.OCTREE&&e.z>=t)throw new o.Z("z is out of range");this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===a.Z.OCTREE&&(this.z=e.z)}function u(e,t){if(e.subdivisionScheme!==t.subdivisionScheme)throw new o.Z("coordinates must have same subdivisionScheme");if(e.subtreeLevels!==t.subtreeLevels)throw new o.Z("coordinates must have same subtreeLevels")}Object.defineProperties(l.prototype,{childIndex:{get:function(){var e=0;return e|=1&this.x,e|=(1&this.y)<<1,this.subdivisionScheme===a.Z.OCTREE&&(e|=(1&this.z)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===a.Z.OCTREE?s.Z.encode3D(this.x,this.y,this.z):s.Z.encode2D(this.x,this.y)}},tileIndex:{get:function(){var e=this.subdivisionScheme===a.Z.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3,t=this.mortonIndex;return e+t}}}),l.prototype.getDescendantCoordinates=function(e){n.Z.typeOf.object("offsetCoordinates",e),u(this,e);var t=this.level+e.level,i=(this.x<<e.level)+e.x,r=(this.y<<e.level)+e.y;if(this.subdivisionScheme===a.Z.OCTREE){var o=(this.z<<e.level)+e.z;return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:r,z:o})}return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:r})},l.prototype.getAncestorCoordinates=function(e){if(n.Z.typeOf.number("offsetLevels",e),e<0)throw new o.Z("offsetLevels must be non-negative");if(e>this.level)throw new o.Z("ancestor cannot be above the tileset root");var t=1<<e,i=this.level-e,r=Math.floor(this.x/t),s=Math.floor(this.y/t);if(this.subdivisionScheme===a.Z.OCTREE){var u=Math.floor(this.z/t);return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s,z:u})}return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s})},l.prototype.getOffsetCoordinates=function(e){if(n.Z.typeOf.object("descendantCoordinates",e),!this.isEqual(e)&&!this.isAncestor(e))throw new o.Z("this is not an ancestor of descendant");u(this,e);var t=e.level-this.level,i=1<<t,r=e.x%i,s=e.y%i;if(this.subdivisionScheme===a.Z.OCTREE){var h=e.z%i;return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:r,y:s,z:h})}return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:r,y:s})},l.prototype.getChildCoordinates=function(e){n.Z.typeOf.number("childIndex",e);var t=a.Z.getBranchingFactor(this.subdivisionScheme);if(e<0||t<=e)throw new o.Z("childIndex must be at least 0 and less than "+t);var i=this.level+1,r=2*this.x+e%2,s=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===a.Z.OCTREE){var u=2*this.z+Math.floor(e/4)%2;return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s,z:u})}return new l({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s})},l.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)},l.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)},l.prototype.isAncestor=function(e){n.Z.typeOf.object("descendantCoordinates",e),u(this,e);var t=e.level-this.level;if(t<=0)return!1;var i=e.x>>t,r=e.y>>t,o=this.x===i,s=this.y===r;if(this.subdivisionScheme===a.Z.OCTREE){var l=e.z>>t,h=this.z===l;return o&&s&&h}return o&&s},l.prototype.isEqual=function(e){return n.Z.typeOf.object("otherCoordinates",e),this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme!==a.Z.OCTREE||this.z===e.z)},l.prototype.isImplicitTilesetRoot=function(){return 0===this.level},l.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels===0},l.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels===this.subtreeLevels-1},l.prototype.getTemplateValues=function(){var e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===a.Z.OCTREE&&(e.z=this.z),e};var h=[0,0,0];l.fromMortonIndex=function(e,t,i,r){var n;return e===a.Z.OCTREE?(n=s.Z.decode3D(r,h),new l({subdivisionScheme:e,subtreeLevels:t,level:i,x:n[0],y:n[1],z:n[2]})):(n=s.Z.decode2D(r,h),new l({subdivisionScheme:e,subtreeLevels:t,level:i,x:n[0],y:n[1]}))},l.fromTileIndex=function(e,t,i){var n,o,s;return e===a.Z.OCTREE?(n=Math.floor(r.Z.log2(7*i+1)/3),o=((1<<3*n)-1)/7,s=i-o):(n=Math.floor(r.Z.log2(3*i+1)/2),o=((1<<2*n)-1)/3,s=i-o),l.fromMortonIndex(e,t,n,s)}},46433:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(66553),n=i(62200);function o(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),r.Z.typeOf.object("options.implicitSubtree",e.implicitSubtree),r.Z.typeOf.object("options.implicitCoordinates",e.implicitCoordinates),this._class=e.class;var t=e.implicitSubtree;this._metadataTable=t.metadataTable,this._entityId=t.getEntityId(e.implicitCoordinates);var i=t.metadataExtension;this._extensions=i.extensions,this._extras=i.extras}Object.defineProperties(o.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),o.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)},o.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)},o.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)},o.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)},o.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)},o.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)},o.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)}},14255:function(e,t,i){i.d(t,{Z:function(){return h}});var r=i(66553),n=i(83856),o=i(82982),s=i(68985),a=i(9407),l=i(81326),u=i(10149);function h(e,t,i){var h=t.extensions["3DTILES_implicit_tiling"];if(r.Z.typeOf.object('tileJson.extensions["3DTILES_implicit_tiling"]',h),this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=i,!(0,o.Z)(t.boundingVolume.box)&&!(0,o.Z)(t.boundingVolume.region)&&!(0,l.Z)(t.boundingVolume,"3DTILES_bounding_volume_S2"))throw new a.Z("Only box, region and 3DTILES_bounding_volume_S2 are supported for implicit tiling");this.boundingVolume=t.boundingVolume,this.refine=t.refine,this.subtreeUriTemplate=new s.Z({url:h.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];for(var f=c(t),m=0;m<f.length;m++){var p=f[m];this.contentHeaders.push((0,n.Z)(p,!0));var v=new s.Z({url:p.uri});this.contentUriTemplates.push(v)}this.contentCount=this.contentHeaders.length,this.tileHeader=d(t),this.subdivisionScheme=u.Z[h.subdivisionScheme],this.branchingFactor=u.Z.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=h.subtreeLevels,this.maximumLevel=h.maximumLevel}function c(e){return(0,l.Z)(e,"3DTILES_multiple_contents")?e.extensions["3DTILES_multiple_contents"].content:(0,o.Z)(e.content)?[e.content]:[]}function d(e){var t=(0,n.Z)(e,!0);return delete t.extensions["3DTILES_implicit_tiling"],delete t.content,delete t.extensions["3DTILES_multiple_contents"],0===Object.keys(t.extensions).length&&delete t.extensions,t}},57325:function(e,t,i){var r=i(66553),n={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"FEATURE_ID",fromGltfSemantic:function(e){r.Z.typeOf.string("gltfSemantic",e);var t=e,i=/^(\w+)_\d+$/,o=i.exec(e);switch(null!==o&&(t=o[1]),t){case"TRANSLATION":return n.TRANSLATION;case"ROTATION":return n.ROTATION;case"SCALE":return n.SCALE;case"_FEATURE_ID":return n.FEATURE_ID}}};t["Z"]=Object.freeze(n)},83472:function(e,t,i){var r=i(52323),n=i(60216),o=i(59947),s=i(84828),a=i(62200),l=i(82982),u=i(11954),h=i(86511),c=i(12572),d=i(50491),f=i(12540),m=i(66659),p=i(68201),v=i(72248),b=i(87811),_=i(82968),g=i(9407),Z=i(95555),y=i(72043),T=i(8379),C=i(66577),E=i(84020),w=i(52381),x=i(79553),S=i(41074),A=i(61841);function I(e,t,i,r,n){this._tileset=e,this._tile=t,this._resource=i,this._modelInstanceCollection=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._groupMetadata=void 0,R(this,r,n)}function L(e){return function(){return e._batchTable.getPickId()}}I._deprecationWarning=u.Z,Object.defineProperties(I.prototype,{featuresLength:{get:function(){return this._batchTable.featuresLength}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){var e=this._modelInstanceCollection._model;return(0,l.Z)(e)?e.trianglesLength:0}},geometryByteLength:{get:function(){var e=this._modelInstanceCollection._model;return(0,l.Z)(e)?e.geometryByteLength:0}},texturesByteLength:{get:function(){var e=this._modelInstanceCollection._model;return(0,l.Z)(e)?e.texturesByteLength:0}},batchTableByteLength:{get:function(){return this._batchTable.memorySizeInBytes}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._modelInstanceCollection.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){return this._batchTable}},groupMetadata:{get:function(){return this._groupMetadata},set:function(e){this._groupMetadata=e}}});var O=Uint32Array.BYTES_PER_ELEMENT,P=new Array(4),F=new Array(4);function R(e,t,i){var o=(0,a.Z)(i,0);i=o;var u=new Uint8Array(t),h=new DataView(t);i+=O;var c=h.getUint32(i,!0);if(1!==c)throw new g.Z("Only Instanced 3D Model version 1 is supported. Version "+c+" is not.");i+=O;var w=h.getUint32(i,!0);i+=O;var R=h.getUint32(i,!0);if(0===R)throw new g.Z("featureTableJsonByteLength is zero, the feature table must be defined.");i+=O;var D=h.getUint32(i,!0);i+=O;var B=h.getUint32(i,!0);i+=O;var M=h.getUint32(i,!0);i+=O;var U=h.getUint32(i,!0);if(1!==U&&0!==U)throw new g.Z("Only glTF format 0 (uri) or 1 (embedded) are supported. Format "+U+" is not.");i+=O;var N=(0,f.Z)(u,i,R);i+=R;var H=new Uint8Array(t,i,D);i+=D;var z,V,j=new x.Z(N,H),k=j.getGlobalProperty("INSTANCES_LENGTH");if(j.featuresLength=k,!(0,l.Z)(k))throw new g.Z("Feature table global property: INSTANCES_LENGTH must be defined");B>0&&(z=(0,f.Z)(u,i,B),i+=B,M>0&&(V=new Uint8Array(t,i,M),V=new Uint8Array(V),i+=M)),e._batchTable=new E.Z(e,k,z,V);var G,Q=o+w-i;if(0===Q)throw new g.Z("glTF byte length is zero, i3dm must have a glTF to instance.");i%4===0?G=new Uint8Array(t,i,Q):(I._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),G=new Uint8Array(u.subarray(i,i+Q)));var W=e._tileset,q={instances:new Array(k),batchTable:e._batchTable,cull:!1,url:void 0,requestType:_.Z.TILES3D,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,upAxis:W._gltfUpAxis,forwardAxis:C.Z.X,opaquePass:T.Z.CESIUM_3D_TILE,pickIdLoaded:L(e),imageBasedLightingFactor:W.imageBasedLightingFactor,lightColor:W.lightColor,luminanceAtZenith:W.luminanceAtZenith,sphericalHarmonicCoefficients:W.sphericalHarmonicCoefficients,specularEnvironmentMaps:W.specularEnvironmentMaps,backFaceCulling:W.backFaceCulling,showOutline:W.showOutline};if(0===U){var J=(0,m.Z)(G);J=J.replace(/[\s\0]+$/,""),q.url=e._resource.getDerivedResource({url:J})}else q.gltf=G,q.basePath=e._resource.clone();var Y,K=j.getGlobalProperty("EAST_NORTH_UP"),X=j.getGlobalProperty("RTC_CENTER",s.Z.FLOAT,3);(0,l.Z)(X)&&(Y=n.Z.unpack(X));for(var $=q.instances,ee=new n.Z,te=new Array(3),ie=new n.Z,re=new n.Z,ne=new n.Z,oe=new p.Z,se=new b.Z,ae=new n.Z,le=new y.Z,ue=new v.Z,he=0;he<k;he++){var ce=j.getProperty("POSITION",s.Z.FLOAT,3,he,P);if(!(0,l.Z)(ce)){ce=te;var de=j.getProperty("POSITION_QUANTIZED",s.Z.UNSIGNED_SHORT,3,he,P);if(!(0,l.Z)(de))throw new g.Z("Either POSITION or POSITION_QUANTIZED must be defined for each instance.");var fe=j.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",s.Z.FLOAT,3);if(!(0,l.Z)(fe))throw new g.Z("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var me=j.getGlobalProperty("QUANTIZED_VOLUME_SCALE",s.Z.FLOAT,3);if(!(0,l.Z)(me))throw new g.Z("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var pe=0;pe<3;pe++)ce[pe]=de[pe]/65535*me[pe]+fe[pe]}n.Z.unpack(ce,0,ee),(0,l.Z)(Y)&&n.Z.add(ee,Y,ee),le.translation=ee;var ve=j.getProperty("NORMAL_UP",s.Z.FLOAT,3,he,P),be=j.getProperty("NORMAL_RIGHT",s.Z.FLOAT,3,he,F),_e=!1;if((0,l.Z)(ve)){if(!(0,l.Z)(be))throw new g.Z("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");n.Z.unpack(ve,0,re),n.Z.unpack(be,0,ie),_e=!0}else{var ge=j.getProperty("NORMAL_UP_OCT32P",s.Z.UNSIGNED_SHORT,2,he,P),Ze=j.getProperty("NORMAL_RIGHT_OCT32P",s.Z.UNSIGNED_SHORT,2,he,F);if((0,l.Z)(ge)){if(!(0,l.Z)(Ze))throw new g.Z("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");r.Z.octDecodeInRange(ge[0],ge[1],65535,re),r.Z.octDecodeInRange(Ze[0],Ze[1],65535,ie),_e=!0}else K?(Z.Z.eastNorthUpToFixedFrame(ee,d.Z.WGS84,ue),v.Z.getMatrix3(ue,oe)):p.Z.clone(p.Z.IDENTITY,oe)}_e&&(n.Z.cross(ie,re,ne),n.Z.normalize(ne,ne),p.Z.setColumn(oe,0,ie,oe),p.Z.setColumn(oe,1,re,oe),p.Z.setColumn(oe,2,ne,oe)),b.Z.fromRotationMatrix(oe,se),le.rotation=se,ae=n.Z.fromElements(1,1,1,ae);var ye=j.getProperty("SCALE",s.Z.FLOAT,1,he);(0,l.Z)(ye)&&n.Z.multiplyByScalar(ae,ye,ae);var Te=j.getProperty("SCALE_NON_UNIFORM",s.Z.FLOAT,3,he,P);(0,l.Z)(Te)&&(ae.x*=Te[0],ae.y*=Te[1],ae.z*=Te[2]),le.scale=ae;var Ce=j.getProperty("BATCH_ID",s.Z.UNSIGNED_SHORT,1,he);(0,l.Z)(Ce)||(Ce=he),v.Z.fromTranslationRotationScale(le,ue);var Ee=ue.clone();$[he]={modelMatrix:Ee,batchId:Ce}}e._modelInstanceCollection=new S.Z(q),e._modelInstanceCollection.readyPromise.then((function(e){e.activeAnimations.addAll({loop:A.Z.REPEAT})}))}function D(e){var t=e.featuresLength;if(!(0,l.Z)(e._features)&&t>0){for(var i=new Array(t),r=0;r<t;++r)i[r]=new w.Z(e,r);e._features=i}}I.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},I.prototype.getFeature=function(e){var t=this.featuresLength;if(!(0,l.Z)(e)||e<0||e>=t)throw new c.Z("batchId is required and between zero and featuresLength - 1 ("+(t-1)+").");return D(this),this._features[e]},I.prototype.applyDebugSettings=function(e,t){t=e?t:o.Z.WHITE,this._batchTable.setAllColor(t)},I.prototype.applyStyle=function(e){this._batchTable.applyStyle(e)},I.prototype.update=function(e,t){var i=t.commandList.length;this._batchTable.update(e,t),this._modelInstanceCollection.modelMatrix=this._tile.computedTransform,this._modelInstanceCollection.shadows=this._tileset.shadows,this._modelInstanceCollection.lightColor=this._tileset.lightColor,this._modelInstanceCollection.luminanceAtZenith=this._tileset.luminanceAtZenith,this._modelInstanceCollection.sphericalHarmonicCoefficients=this._tileset.sphericalHarmonicCoefficients,this._modelInstanceCollection.specularEnvironmentMaps=this._tileset.specularEnvironmentMaps,this._modelInstanceCollection.backFaceCulling=this._tileset.backFaceCulling,this._modelInstanceCollection.debugWireframe=this._tileset.debugWireframe;var r=this._modelInstanceCollection._model;if((0,l.Z)(r)){var n=this._tileset.clippingPlanes;r.referenceMatrix=this._tileset.clippingPlanesOriginMatrix,(0,l.Z)(n)&&this._tile.clippingPlanesDirty&&(r._clippingPlanes=n.enabled&&this._tile._isClipped?n:void 0),(0,l.Z)(n)&&(0,l.Z)(r._clippingPlanes)&&r._clippingPlanes!==n&&(r._clippingPlanes=n)}this._modelInstanceCollection.update(t);var o=t.commandList.length;i<o&&(t.passes.render||t.passes.pick)&&this._batchTable.addDerivedCommands(t,i,!1)},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._modelInstanceCollection=this._modelInstanceCollection&&this._modelInstanceCollection.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,h.Z)(this)},t["Z"]=I},94229:function(e,t,i){var r=i(59947),n=i(82982),o=i(86511),s=i(38443),a=i(39899),l=i(2932),u=i(21572),h=i(10667),c=i(87721),d=i(53642),f=i(8743),m=i(42246),p=i(80188),v=i(88453),b=i(7571),_=i(13633),g=i(87233),Z=i(77053),y=i(81255);function T(){this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._texture=void 0,this._classifiedTexture=void 0,this._depthStencilTexture=void 0,this._fbo=void 0,this._fboClassified=void 0,this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new a.Z({color:new r.Z(0,0,0,0),owner:this}),this._clearCommand=new a.Z({color:new r.Z(0,0,0,0),depth:1,stencil:0});var e=this;this._uniformMap={colorTexture:function(){return e._texture},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._classifiedTexture}}}Object.defineProperties(T.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),T.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};var C={depthMask:!1,stencilTest:{enabled:!0,frontFunction:Z.Z.EQUAL,frontOperation:{fail:y.Z.KEEP,zFail:y.Z.KEEP,zPass:y.Z.KEEP},backFunction:Z.Z.NEVER,reference:0,mask:g.Z.CLASSIFICATION_MASK},blending:_.Z.ALPHA_BLEND},E={depthMask:!1,stencilTest:{enabled:!0,frontFunction:Z.Z.NOT_EQUAL,frontOperation:{fail:y.Z.KEEP,zFail:y.Z.KEEP,zPass:y.Z.KEEP},backFunction:Z.Z.NEVER,reference:0,mask:g.Z.CLASSIFICATION_MASK},blending:_.Z.ALPHA_BLEND},w={depthMask:!0,depthTest:{enabled:!0},stencilTest:g.Z.setCesium3DTileBit(),stencilMask:g.Z.CESIUM_3D_TILE_MASK,blending:_.Z.ALPHA_BLEND},x="#extension GL_EXT_frag_depth : enable\nuniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture2D(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    gl_FragColor = color * highlightColor;\n    gl_FragDepthEXT = texture2D(depthTexture, v_textureCoordinates).r;\n}\n",S="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    gl_FragColor = color * czm_invertClassificationColor;\n#else\n    gl_FragColor = color;\n#endif\n}\n";T.prototype.update=function(e){var t=this._texture,i=!(0,n.Z)(t)||this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;var r,o,a=e.drawingBufferWidth,_=e.drawingBufferHeight,g=!(0,n.Z)(t)||t.width!==a||t.height!==_;((g||i)&&(this._texture=this._texture&&this._texture.destroy(),this._classifiedTexture=this._classifiedTexture&&this._classifiedTexture.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._texture=new f.Z({context:e,width:a,height:_,pixelFormat:s.Z.RGBA,pixelDatatype:u.Z.UNSIGNED_BYTE,sampler:new c.Z({wrapS:v.Z.CLAMP_TO_EDGE,wrapT:v.Z.CLAMP_TO_EDGE,minificationFilter:p.Z.LINEAR,magnificationFilter:m.Z.LINEAR})}),(0,n.Z)(this._previousFramebuffer)||(this._classifiedTexture=new f.Z({context:e,width:a,height:_,pixelFormat:s.Z.RGBA,pixelDatatype:u.Z.UNSIGNED_BYTE,sampler:new c.Z({wrapS:v.Z.CLAMP_TO_EDGE,wrapT:v.Z.CLAMP_TO_EDGE,minificationFilter:p.Z.LINEAR,magnificationFilter:m.Z.LINEAR})}),this._depthStencilTexture=new f.Z({context:e,width:a,height:_,pixelFormat:s.Z.DEPTH_STENCIL,pixelDatatype:u.Z.UNSIGNED_INT_24_8}))),!(0,n.Z)(this._fbo)||g||i)&&(this._fbo=this._fbo&&this._fbo.destroy(),this._fboClassified=this._fboClassified&&this._fboClassified.destroy(),(0,n.Z)(this._previousFramebuffer)?(r=this._previousFramebuffer.depthStencilTexture,o=this._previousFramebuffer.depthStencilRenderbuffer):r=this._depthStencilTexture,this._fbo=new l.Z({context:e,colorTextures:[this._texture],depthStencilTexture:r,depthStencilRenderbuffer:o,destroyAttachments:!1}),(0,n.Z)(this._previousFramebuffer)||(this._fboClassified=new l.Z({context:e,colorTextures:[this._classifiedTexture],depthStencilTexture:r,destroyAttachments:!1})));if((0,n.Z)(this._rsUnclassified)||(this._rsUnclassified=h.Z.fromCache(C),this._rsClassified=h.Z.fromCache(E),this._rsDefault=h.Z.fromCache(w)),!(0,n.Z)(this._unclassifiedCommand)||i){(0,n.Z)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());var Z=(0,n.Z)(this._previousFramebuffer)?S:x,y=new d.Z({defines:["UNCLASSIFIED"],sources:[Z]}),T=new d.Z({sources:[Z]});this._unclassifiedCommand=e.createViewportQuadCommand(y,{renderState:(0,n.Z)(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(T,{renderState:(0,n.Z)(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),(0,n.Z)(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),(0,n.Z)(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(b.Z,{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},T.prototype.clear=function(e,t){var i=t.framebuffer;(0,n.Z)(this._previousFramebuffer)?(t.framebuffer=this._fbo,this._clearColorCommand.execute(e,t)):(t.framebuffer=this._fbo,this._clearCommand.execute(e,t),t.framebuffer=this._fboClassified,this._clearCommand.execute(e,t)),t.framebuffer=i},T.prototype.executeClassified=function(e,t){if(!(0,n.Z)(this._previousFramebuffer)){var i=t.framebuffer;t.framebuffer=this._fboClassified,this._translucentCommand.execute(e,t),t.framebuffer=i}this._classifiedCommand.execute(e,t)},T.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return this._fbo=this._fbo&&this._fbo.destroy(),this._texture=this._texture&&this._texture.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),(0,n.Z)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),(0,o.Z)(this)},t["Z"]=T},43234:function(e,t,i){var r=i(66553),n=i(62200),o=i(82982),s=i(12572),a=i(14459),l=i(48604),u=i(9407),h=i(13222),c=i(37741),d=i(59692),f=i(80360),m=i(75611),p=i(65657),v=i(57018),b=i(24855),_=i(85200),g=i(15583);function Z(e){return function(t){return new e(t)}}var y={ARCGIS_MAPSERVER:Z(c.Z),BING:Z(d.Z),GOOGLE_EARTH:Z(m.Z),MAPBOX:Z(p.Z),SINGLE_TILE:Z(v.Z),TMS:Z(f.Z),URL_TEMPLATE:Z(b.Z),WMS:Z(_.Z),WMTS:Z(g.Z)};function T(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT);var t=e.assetId;r.Z.typeOf.number("options.assetId",t),this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._ready=!1,this._tileCredits=void 0,this._errorEvent=new a.Z;var i=this,s=l.Z._createEndpointResource(t,e),c=e.assetId.toString()+e.accessToken+e.server,d=T._endpointCache[c];(0,o.Z)(d)||(d=s.fetchJson(),T._endpointCache[c]=d),this._readyPromise=d.then((function(e){if("IMAGERY"!==e.type)return h.Z.reject(new u.Z("Cesium ion asset "+t+" is not an imagery asset."));var r,n=e.externalType;if((0,o.Z)(n)){var a=y[n];if(!(0,o.Z)(a))return h.Z.reject(new u.Z("Unrecognized Cesium ion imagery type: "+n));r=a(e.options)}else r=new f.Z({url:new l.Z(e,s)});return i._tileCredits=l.Z.getCreditsFromEndpoint(e,s),r.errorEvent.addEventListener((function(e){e.provider=i,i._errorEvent.raiseEvent(e)})),i._imageryProvider=r,r.readyPromise.then((function(){return i._ready=!0,!0}))}))}Object.defineProperties(T.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){if(!this._ready)throw new s.Z("tileHeight must not be called before the imagery provider is ready.");return this._imageryProvider.rectangle}},tileWidth:{get:function(){if(!this._ready)throw new s.Z("tileWidth must not be called before the imagery provider is ready.");return this._imageryProvider.tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new s.Z("tileHeight must not be called before the imagery provider is ready.");return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new s.Z("maximumLevel must not be called before the imagery provider is ready.");return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new s.Z("minimumLevel must not be called before the imagery provider is ready.");return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){if(!this._ready)throw new s.Z("tilingScheme must not be called before the imagery provider is ready.");return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new s.Z("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){if(!this._ready)throw new s.Z("credit must not be called before the imagery provider is ready.");return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){if(!this._ready)throw new s.Z("hasAlphaChannel must not be called before the imagery provider is ready.");return this._imageryProvider.hasAlphaChannel},proxy:{get:function(){}}}}),T.prototype.getTileCredits=function(e,t,i){if(!this._ready)throw new s.Z("getTileCredits must not be called before the imagery provider is ready.");var r=this._imageryProvider.getTileCredits(e,t,i);return(0,o.Z)(r)?this._tileCredits.concat(r):this._tileCredits},T.prototype.requestImage=function(e,t,i,r){if(!this._ready)throw new s.Z("requestImage must not be called before the imagery provider is ready.");return this._imageryProvider.requestImage(e,t,i,r)},T.prototype.pickFeatures=function(e,t,i,r,n){if(!this._ready)throw new s.Z("pickFeatures must not be called before the imagery provider is ready.");return this._imageryProvider.pickFeatures(e,t,i,r,n)},T._endpointCache={},t["Z"]=T},40999:function(e,t){var i={AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4};t["Z"]=Object.freeze(i)},38347:function(e,t,i){var r=i(82982),n=i(12572),o=i(59081),s=i(92454);function a(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function l(e){if((0,r.Z)(e)&&e.length!==s.Z.NUMBER_OF_JOB_TYPES)throw new n.Z("A budget must be specified for each job type; budgets.length should equal JobType.NUMBER_OF_JOB_TYPES.");var t=new Array(s.Z.NUMBER_OF_JOB_TYPES);t[s.Z.TEXTURE]=new a((0,r.Z)(e)?e[s.Z.TEXTURE]:10),t[s.Z.PROGRAM]=new a((0,r.Z)(e)?e[s.Z.PROGRAM]:10),t[s.Z.BUFFER]=new a((0,r.Z)(e)?e[s.Z.BUFFER]:30);var i,o=t.length,l=0;for(i=0;i<o;++i)l+=t[i].total;var u=new Array(o);for(i=0;i<o;++i)u[i]=!1;this._totalBudget=l,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=u}Object.defineProperties(a.prototype,{total:{get:function(){return this._total}}}),l.getTimestamp=o.Z,Object.defineProperties(l.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),l.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},l.prototype.resetBudgets=function(){for(var e=this._budgets,t=e.length,i=0;i<t;++i){var r=e[i];r.starvedLastFrame=r.starvedThisFrame,r.starvedThisFrame=!1,r.usedThisFrame=0,r.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},l.prototype.execute=function(e,t){var i,r=this._budgets,n=r[t],o=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&o)return n.starvedThisFrame=!0,!1;if(n.usedThisFrame+n.stolenFromMeThisFrame>=n.total){var s,a=r.length;for(s=0;s<a;++s)if(i=r[s],i.usedThisFrame+i.stolenFromMeThisFrame<i.total&&!i.starvedLastFrame)break;if(s===a&&o)return!1;o&&(n.starvedThisFrame=!0)}var u=l.getTimestamp();e.execute();var h=l.getTimestamp()-u;return this._totalUsedThisFrame+=h,i?i.stolenFromMeThisFrame+=h:n.usedThisFrame+=h,this._executedThisFrame[t]=!0,!0},t["Z"]=l},92454:function(e,t){var i={TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3};t["Z"]=Object.freeze(i)},88893:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(66553),n=i(83856),o=i(82982),s=i(12572),a=i(18349);function l(e){r.Z.typeOf.number.greaterThan("options.count",e.count,0),r.Z.typeOf.object("options.properties",e.properties),this._count=e.count,this._properties=(0,n.Z)(e.properties,!0)}l.prototype.hasProperty=function(e){return a.Z.hasProperty(e,this._properties)},l.prototype.getPropertyIds=function(e){return a.Z.getPropertyIds(this._properties,void 0,e)},l.prototype.getProperty=function(e,t){if(r.Z.typeOf.number("index",e),r.Z.typeOf.string("propertyId",t),e<0||e>=this._count)throw new s.Z("index must be in the range [0, "+this._count+")");var i=this._properties[t];if((0,o.Z)(i))return(0,n.Z)(i[e],!0)},l.prototype.setProperty=function(e,t,i){if(r.Z.typeOf.number("index",e),r.Z.typeOf.string("propertyId",t),e<0||e>=this._count)throw new s.Z("index must be in the range [0, "+this._count+")");var a=this._properties[t];return!!(0,o.Z)(a)&&(a[e]=(0,n.Z)(i,!0),!0)}}}]);
//# sourceMappingURL=chunk-vendors-742b1a90-legacy.3f825ac1.js.map