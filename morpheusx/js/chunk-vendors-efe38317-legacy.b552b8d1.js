"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[8778],{36514:function(t,e,i){var n=i(88108),o=i(60838),s=i(60216),r=i(63367),a=i(59947),h=i(62200),l=i(82982),c=i(12572),u=i(47861),_=i(72248),d=i(15720),p=i(89917),f=i(48244);function Z(t,e){if(t=(0,h.Z)(t,h.Z.EMPTY_OBJECT),(0,l.Z)(t.disableDepthTestDistance)&&t.disableDepthTestDistance<0)throw new c.Z("disableDepthTestDistance must be greater than or equal to 0.0.");var i=t.translucencyByDistance,n=t.scaleByDistance,o=t.distanceDisplayCondition;if((0,l.Z)(i)){if(i.far<=i.near)throw new c.Z("translucencyByDistance.far must be greater than translucencyByDistance.near.");i=d.Z.clone(i)}if((0,l.Z)(n)){if(n.far<=n.near)throw new c.Z("scaleByDistance.far must be greater than scaleByDistance.near.");n=d.Z.clone(n)}if((0,l.Z)(o)){if(o.far<=o.near)throw new c.Z("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");o=u.Z.clone(o)}this._show=(0,h.Z)(t.show,!0),this._position=s.Z.clone((0,h.Z)(t.position,s.Z.ZERO)),this._actualPosition=s.Z.clone(this._position),this._color=a.Z.clone((0,h.Z)(t.color,a.Z.WHITE)),this._outlineColor=a.Z.clone((0,h.Z)(t.outlineColor,a.Z.TRANSPARENT)),this._outlineWidth=(0,h.Z)(t.outlineWidth,0),this._pixelSize=(0,h.Z)(t.pixelSize,10),this._scaleByDistance=n,this._translucencyByDistance=i,this._distanceDisplayCondition=o,this._disableDepthTestDistance=(0,h.Z)(t.disableDepthTestDistance,0),this._id=t.id,this._collection=(0,h.Z)(t.collection,e),this._clusterShow=!0,this._pickId=void 0,this._pointPrimitiveCollection=e,this._dirty=!1,this._index=-1}var m=Z.SHOW_INDEX=0,y=Z.POSITION_INDEX=1,g=Z.COLOR_INDEX=2,D=Z.OUTLINE_COLOR_INDEX=3,v=Z.OUTLINE_WIDTH_INDEX=4,T=Z.PIXEL_SIZE_INDEX=5,S=Z.SCALE_BY_DISTANCE_INDEX=6,b=Z.TRANSLUCENCY_BY_DISTANCE_INDEX=7,P=Z.DISTANCE_DISPLAY_CONDITION_INDEX=8,E=Z.DISABLE_DEPTH_DISTANCE_INDEX=9;function A(t,e){var i=t._pointPrimitiveCollection;(0,l.Z)(i)&&(i._updatePointPrimitive(t,e),t._dirty=!0)}Z.NUMBER_OF_PROPERTIES=10,Object.defineProperties(Z.prototype,{show:{get:function(){return this._show},set:function(t){if(!(0,l.Z)(t))throw new c.Z("value is required.");this._show!==t&&(this._show=t,A(this,m))}},position:{get:function(){return this._position},set:function(t){if(!(0,l.Z)(t))throw new c.Z("value is required.");var e=this._position;s.Z.equals(e,t)||(s.Z.clone(t,e),s.Z.clone(t,this._actualPosition),A(this,y))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){if((0,l.Z)(t)&&t.far<=t.near)throw new c.Z("far distance must be greater than near distance.");var e=this._scaleByDistance;d.Z.equals(e,t)||(this._scaleByDistance=d.Z.clone(t,e),A(this,S))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){if((0,l.Z)(t)&&t.far<=t.near)throw new c.Z("far distance must be greater than near distance.");var e=this._translucencyByDistance;d.Z.equals(e,t)||(this._translucencyByDistance=d.Z.clone(t,e),A(this,b))}},pixelSize:{get:function(){return this._pixelSize},set:function(t){if(!(0,l.Z)(t))throw new c.Z("value is required.");this._pixelSize!==t&&(this._pixelSize=t,A(this,T))}},color:{get:function(){return this._color},set:function(t){if(!(0,l.Z)(t))throw new c.Z("value is required.");var e=this._color;a.Z.equals(e,t)||(a.Z.clone(t,e),A(this,g))}},outlineColor:{get:function(){return this._outlineColor},set:function(t){if(!(0,l.Z)(t))throw new c.Z("value is required.");var e=this._outlineColor;a.Z.equals(e,t)||(a.Z.clone(t,e),A(this,D))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){if(!(0,l.Z)(t))throw new c.Z("value is required.");this._outlineWidth!==t&&(this._outlineWidth=t,A(this,v))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){if((0,l.Z)(t)&&t.far<=t.near)throw new c.Z("far must be greater than near");u.Z.equals(this._distanceDisplayCondition,t)||(this._distanceDisplayCondition=u.Z.clone(t,this._distanceDisplayCondition),A(this,P))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){if(this._disableDepthTestDistance!==t){if(!(0,l.Z)(t)||t<0)throw new c.Z("disableDepthTestDistance must be greater than or equal to 0.0.");this._disableDepthTestDistance=t,A(this,E)}}},id:{get:function(){return this._id},set:function(t){this._id=t,(0,l.Z)(this._pickId)&&(this._pickId.object.id=t)}},pickId:{get:function(){return this._pickId}},clusterShow:{get:function(){return this._clusterShow},set:function(t){this._clusterShow!==t&&(this._clusterShow=t,A(this,m))}}}),Z.prototype.getPickId=function(t){return(0,l.Z)(this._pickId)||(this._pickId=t.createPickId({primitive:this,collection:this._collection,id:this._id})),this._pickId},Z.prototype._getActualPosition=function(){return this._actualPosition},Z.prototype._setActualPosition=function(t){s.Z.clone(t,this._actualPosition),A(this,y)};var I=new r.Z;Z._computeActualPosition=function(t,e,i){return e.mode===p.Z.SCENE3D?t:(_.Z.multiplyByPoint(i,t,I),f.Z.computeActualWgs84Position(e,I))};var x=new r.Z;Z._computeScreenSpacePosition=function(t,e,i,n){var o=_.Z.multiplyByVector(t,r.Z.fromElements(e.x,e.y,e.z,1,x),x),s=f.Z.wgs84ToWindowCoordinates(i,o,n);return s},Z.prototype.computeScreenSpacePosition=function(t,e){var i=this._pointPrimitiveCollection;if((0,l.Z)(e)||(e=new o.Z),!(0,l.Z)(i))throw new c.Z("PointPrimitive must be in a collection.");if(!(0,l.Z)(t))throw new c.Z("scene is required.");var n=i.modelMatrix,s=Z._computeScreenSpacePosition(n,this._actualPosition,t,e);if((0,l.Z)(s))return s.y=t.canvas.clientHeight-s.y,s},Z.getScreenSpaceBoundingBox=function(t,e,i){var o=t.pixelSize,s=.5*o,r=e.x-s,a=e.y-s,h=o,c=o;return(0,l.Z)(i)||(i=new n.Z),i.x=r,i.y=a,i.width=h,i.height=c,i},Z.prototype.equals=function(t){return this===t||(0,l.Z)(t)&&this._id===t._id&&s.Z.equals(this._position,t._position)&&a.Z.equals(this._color,t._color)&&this._pixelSize===t._pixelSize&&this._outlineWidth===t._outlineWidth&&this._show===t._show&&a.Z.equals(this._outlineColor,t._outlineColor)&&d.Z.equals(this._scaleByDistance,t._scaleByDistance)&&d.Z.equals(this._translucencyByDistance,t._translucencyByDistance)&&u.Z.equals(this._distanceDisplayCondition,t._distanceDisplayCondition)&&this._disableDepthTestDistance===t._disableDepthTestDistance},Z.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._pointPrimitiveCollection=void 0},e["Z"]=Z},9462:function(t,e,i){var n=i(48243),o=i(59947),s=i(84828),r=i(62200),a=i(82982),h=i(86511),l=i(12572),c=i(74938),u=i(99417),_=i(72248),d=i(97264),p=i(52200),f=i(58597),Z=i(20521),m=i(60072),y=i(8379),g=i(10667),D=i(46588),v=i(53642),T=i(52851),S=i(12049),b=i(16586),P=i(13633),E=i(27384),A=i(36514),I=i(89917),x=A.Z.SHOW_INDEX,C=A.Z.POSITION_INDEX,w=A.Z.COLOR_INDEX,B=A.Z.OUTLINE_COLOR_INDEX,N=A.Z.OUTLINE_WIDTH_INDEX,O=A.Z.PIXEL_SIZE_INDEX,L=A.Z.SCALE_BY_DISTANCE_INDEX,R=A.Z.TRANSLUCENCY_BY_DISTANCE_INDEX,V=A.Z.DISTANCE_DISPLAY_CONDITION_INDEX,U=A.Z.DISABLE_DEPTH_DISTANCE_INDEX,M=A.Z.NUMBER_OF_PROPERTIES,k={positionHighAndSize:0,positionLowAndOutline:1,compressedAttribute0:2,compressedAttribute1:3,scaleByDistance:4,distanceDisplayConditionAndDisableDepth:5};function W(t){t=(0,r.Z)(t,r.Z.EMPTY_OBJECT),this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._propertiesChanged=new Uint32Array(M),this._maxPixelSize=1,this._baseVolume=new n.Z,this._baseVolumeWC=new n.Z,this._baseVolume2D=new n.Z,this._boundingVolume=new n.Z,this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=(0,r.Z)(t.show,!0),this.modelMatrix=_.Z.clone((0,r.Z)(t.modelMatrix,_.Z.IDENTITY)),this._modelMatrix=_.Z.clone(_.Z.IDENTITY),this.debugShowBoundingVolume=(0,r.Z)(t.debugShowBoundingVolume,!1),this.blendOption=(0,r.Z)(t.blendOption,E.Z.OPAQUE_AND_TRANSLUCENT),this._blendOption=void 0,this._mode=I.Z.SCENE3D,this._maxTotalPointSize=1,this._buffersUsage=[f.Z.STATIC_DRAW,f.Z.STATIC_DRAW,f.Z.STATIC_DRAW,f.Z.STATIC_DRAW,f.Z.STATIC_DRAW,f.Z.STATIC_DRAW,f.Z.STATIC_DRAW,f.Z.STATIC_DRAW,f.Z.STATIC_DRAW];var e=this;this._uniforms={u_maxTotalPointSize:function(){return e._maxTotalPointSize}}}function F(t){for(var e=t.length,i=0;i<e;++i)t[i]&&t[i]._destroy()}function q(t){if(t._pointPrimitivesRemoved){t._pointPrimitivesRemoved=!1;for(var e=[],i=t._pointPrimitives,n=i.length,o=0,s=0;o<n;++o){var r=i[o];r&&(r._index=s++,e.push(r))}t._pointPrimitives=e}}function Y(t,e,i){return new T.Z(t,[{index:k.positionHighAndSize,componentsPerAttribute:4,componentDatatype:s.Z.FLOAT,usage:i[C]},{index:k.positionLowAndShow,componentsPerAttribute:4,componentDatatype:s.Z.FLOAT,usage:i[C]},{index:k.compressedAttribute0,componentsPerAttribute:4,componentDatatype:s.Z.FLOAT,usage:i[w]},{index:k.compressedAttribute1,componentsPerAttribute:4,componentDatatype:s.Z.FLOAT,usage:i[R]},{index:k.scaleByDistance,componentsPerAttribute:4,componentDatatype:s.Z.FLOAT,usage:i[L]},{index:k.distanceDisplayConditionAndDisableDepth,componentsPerAttribute:3,componentDatatype:s.Z.FLOAT,usage:i[V]}],e)}Object.defineProperties(W.prototype,{length:{get:function(){return q(this),this._pointPrimitives.length}}}),W.prototype.add=function(t){var e=new A.Z(t,this);return e._index=this._pointPrimitives.length,this._pointPrimitives.push(e),this._createVertexArray=!0,e},W.prototype.remove=function(t){return!!this.contains(t)&&(this._pointPrimitives[t._index]=null,this._pointPrimitivesRemoved=!0,this._createVertexArray=!0,t._destroy(),!0)},W.prototype.removeAll=function(){F(this._pointPrimitives),this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!0},W.prototype._updatePointPrimitive=function(t,e){t._dirty||(this._pointPrimitivesToUpdate[this._pointPrimitivesToUpdateIndex++]=t),++this._propertiesChanged[e]},W.prototype.contains=function(t){return(0,a.Z)(t)&&t._pointPrimitiveCollection===this},W.prototype.get=function(t){if(!(0,a.Z)(t))throw new l.Z("index is required.");return q(this),this._pointPrimitives[t]},W.prototype.computeNewBuffersUsage=function(){for(var t=this._buffersUsage,e=!1,i=this._propertiesChanged,n=0;n<M;++n){var o=0===i[n]?f.Z.STATIC_DRAW:f.Z.STREAM_DRAW;e=e||t[n]!==o,t[n]=o}return e};var X=new c.Z;function H(t,e,i,o){var s=o._index,r=o._getActualPosition();t._mode===I.Z.SCENE3D&&(n.Z.expand(t._baseVolume,r,t._baseVolume),t._boundingVolumeDirty=!0),c.Z.fromCartesian(r,X);var a=o.pixelSize,h=o.outlineWidth;t._maxPixelSize=Math.max(t._maxPixelSize,a+h);var l=i[k.positionHighAndSize],u=X.high;l(s,u.x,u.y,u.z,a);var _=i[k.positionLowAndOutline],d=X.low;_(s,d.x,d.y,d.z,h)}var z=65536,Q=256;function j(t,e,i,n){var s=n._index,r=n.color,a=n.getPickId(e).color,h=n.outlineColor,l=o.Z.floatToByte(r.red),c=o.Z.floatToByte(r.green),u=o.Z.floatToByte(r.blue),_=l*z+c*Q+u;l=o.Z.floatToByte(h.red),c=o.Z.floatToByte(h.green),u=o.Z.floatToByte(h.blue);var d=l*z+c*Q+u;l=o.Z.floatToByte(a.red),c=o.Z.floatToByte(a.green),u=o.Z.floatToByte(a.blue);var p=l*z+c*Q+u,f=o.Z.floatToByte(r.alpha)*z+o.Z.floatToByte(h.alpha)*Q+o.Z.floatToByte(a.alpha),Z=i[k.compressedAttribute0];Z(s,_,d,p,f)}function G(t,e,i,n){var o=n._index,s=0,r=1,h=1,l=1,c=n.translucencyByDistance;(0,a.Z)(c)&&(s=c.near,r=c.nearValue,h=c.far,l=c.farValue,1===r&&1===l||(t._shaderTranslucencyByDistance=!0));var _=n.show&&n.clusterShow;0===n.color.alpha&&0===n.outlineColor.alpha&&(_=!1),r=u.Z.clamp(r,0,1),r=1===r?255:255*r|0;var d=(_?1:0)*Q+r;l=u.Z.clamp(l,0,1),l=1===l?255:255*l|0;var p=l,f=i[k.compressedAttribute1];f(o,d,p,s,h)}function J(t,e,i,n){var o=n._index,s=i[k.scaleByDistance],r=0,h=1,l=1,c=1,u=n.scaleByDistance;(0,a.Z)(u)&&(r=u.near,h=u.nearValue,l=u.far,c=u.farValue,1===h&&1===c||(t._shaderScaleByDistance=!0)),s(o,r,h,l,c)}function K(t,e,i,n){var o=n._index,s=i[k.distanceDisplayConditionAndDisableDepth],r=0,h=Number.MAX_VALUE,l=n.distanceDisplayCondition;(0,a.Z)(l)&&(r=l.near,h=l.far,r*=r,h*=h,t._shaderDistanceDisplayCondition=!0);var c=n.disableDepthTestDistance;c*=c,c>0&&(t._shaderDisableDepthDistance=!0,c===Number.POSITIVE_INFINITY&&(c=-1)),s(o,r,h,c)}function $(t,e,i,n){H(t,e,i,n),j(t,e,i,n),G(t,e,i,n),J(t,e,i,n),K(t,e,i,n)}function tt(t,e,i,o,s,r){var h;o.mode===I.Z.SCENE3D?(h=t._baseVolume,t._boundingVolumeDirty=!0):h=t._baseVolume2D;for(var l=[],c=0;c<i;++c){var u=e[c],_=u.position,d=A.Z._computeActualPosition(_,o,s);(0,a.Z)(d)&&(u._setActualPosition(d),r?l.push(d):n.Z.expand(h,d,h))}r&&n.Z.fromPoints(l,h)}function et(t,e){var i=e.mode,n=t._pointPrimitives,o=t._pointPrimitivesToUpdate,s=t._modelMatrix;t._createVertexArray||t._mode!==i||i!==I.Z.SCENE3D&&!_.Z.equals(s,t.modelMatrix)?(t._mode=i,_.Z.clone(t.modelMatrix,s),t._createVertexArray=!0,i!==I.Z.SCENE3D&&i!==I.Z.SCENE2D&&i!==I.Z.COLUMBUS_VIEW||tt(t,n,n.length,e,s,!0)):i===I.Z.MORPHING?tt(t,n,n.length,e,s,!0):i!==I.Z.SCENE2D&&i!==I.Z.COLUMBUS_VIEW||tt(t,o,t._pointPrimitivesToUpdateIndex,e,s,!1)}function it(t,e,i){var n=e.camera.getPixelSize(i,e.context.drawingBufferWidth,e.context.drawingBufferHeight),o=n*t._maxPixelSize;i.radius+=o}var nt=[];W.prototype.update=function(t){if(q(this),this.show){this._maxTotalPointSize=Z.Z.maximumAliasedPointSize,et(this,t);var e,i=this._pointPrimitives,o=i.length,s=this._pointPrimitivesToUpdate,r=this._pointPrimitivesToUpdateIndex,h=this._propertiesChanged,l=this._createVertexArray,c=t.context,u=t.passes,f=u.pick;if(l||!f&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(var T=0;T<M;++T)h[T]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),o>0){this._vaf=Y(c,o,this._buffersUsage),e=this._vaf.writers;for(var A=0;A<o;++A){var W=this._pointPrimitives[A];W._dirty=!1,$(this,c,e,W)}this._vaf.commit()}this._pointPrimitivesToUpdateIndex=0}else if(r>0){var F=nt;F.length=0,(h[C]||h[N]||h[O])&&F.push(H),(h[w]||h[B])&&F.push(j),(h[x]||h[R])&&F.push(G),h[L]&&F.push(J),(h[V]||h[U])&&F.push(K);var X=F.length;if(e=this._vaf.writers,r/o>.1){for(var z=0;z<r;++z){var Q=s[z];Q._dirty=!1;for(var tt=0;tt<X;++tt)F[tt](this,c,e,Q)}this._vaf.commit()}else{for(var ot=0;ot<r;++ot){var st=s[ot];st._dirty=!1;for(var rt=0;rt<X;++rt)F[rt](this,c,e,st);this._vaf.subCommit(st._index,1)}this._vaf.endSubCommits()}this._pointPrimitivesToUpdateIndex=0}if(r>1.5*o&&(s.length=o),(0,a.Z)(this._vaf)&&(0,a.Z)(this._vaf.va)){var at;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,n.Z.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));var ht=_.Z.IDENTITY;t.mode===I.Z.SCENE3D?(ht=this.modelMatrix,at=n.Z.clone(this._baseVolumeWC,this._boundingVolume)):at=n.Z.clone(this._baseVolume2D,this._boundingVolume),it(this,t,at);var lt,ct,ut,_t,dt,pt,ft=this._blendOption!==this.blendOption;this._blendOption=this.blendOption,ft&&(this._blendOption===E.Z.OPAQUE||this._blendOption===E.Z.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=g.Z.fromCache({depthTest:{enabled:!0,func:p.Z.LEQUAL},depthMask:!0}):this._rsOpaque=void 0,this._blendOption===E.Z.TRANSLUCENT||this._blendOption===E.Z.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=g.Z.fromCache({depthTest:{enabled:!0,func:p.Z.LEQUAL},depthMask:!1,blending:P.Z.ALPHA_BLEND}):this._rsTranslucent=void 0),this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==t.minimumDisableDepthTestDistance,(ft||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderDistanceDisplayCondition&&!this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance)&&(lt=new v.Z({sources:[b.Z]}),this._shaderScaleByDistance&&lt.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&lt.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderDistanceDisplayCondition&&lt.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&lt.defines.push("DISABLE_DEPTH_DISTANCE"),this._blendOption===E.Z.OPAQUE_AND_TRANSLUCENT&&(ct=new v.Z({defines:["OPAQUE"],sources:[S.Z]}),this._sp=D.Z.replaceCache({context:c,shaderProgram:this._sp,vertexShaderSource:lt,fragmentShaderSource:ct,attributeLocations:k}),ct=new v.Z({defines:["TRANSLUCENT"],sources:[S.Z]}),this._spTranslucent=D.Z.replaceCache({context:c,shaderProgram:this._spTranslucent,vertexShaderSource:lt,fragmentShaderSource:ct,attributeLocations:k})),this._blendOption===E.Z.OPAQUE&&(ct=new v.Z({sources:[S.Z]}),this._sp=D.Z.replaceCache({context:c,shaderProgram:this._sp,vertexShaderSource:lt,fragmentShaderSource:ct,attributeLocations:k})),this._blendOption===E.Z.TRANSLUCENT&&(ct=new v.Z({sources:[S.Z]}),this._spTranslucent=D.Z.replaceCache({context:c,shaderProgram:this._spTranslucent,vertexShaderSource:lt,fragmentShaderSource:ct,attributeLocations:k})),this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance);var Zt=t.commandList;if(u.render||f){var mt=this._colorCommands,yt=this._blendOption===E.Z.OPAQUE,gt=this._blendOption===E.Z.OPAQUE_AND_TRANSLUCENT;ut=this._vaf.va,_t=ut.length,mt.length=_t;var Dt=gt?2*_t:_t;for(pt=0;pt<Dt;++pt){var vt=yt||gt&&pt%2===0;dt=mt[pt],(0,a.Z)(dt)||(dt=mt[pt]=new m.Z),dt.primitiveType=d.Z.POINTS,dt.pass=vt||!gt?y.Z.OPAQUE:y.Z.TRANSLUCENT,dt.owner=this;var Tt=gt?Math.floor(pt/2):pt;dt.boundingVolume=at,dt.modelMatrix=ht,dt.shaderProgram=vt?this._sp:this._spTranslucent,dt.uniformMap=this._uniforms,dt.vertexArray=ut[Tt].va,dt.renderState=vt?this._rsOpaque:this._rsTranslucent,dt.debugShowBoundingVolume=this.debugShowBoundingVolume,dt.pickId="v_pickColor",Zt.push(dt)}}}}},W.prototype.isDestroyed=function(){return!1},W.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),F(this._pointPrimitives),(0,h.Z)(this)},e["Z"]=W},28509:function(t,e,i){var n=i(32378),o=i(48243),s=i(60216),r=i(59947),a=i(62200),h=i(82982),l=i(12572),c=i(47861),u=i(72248),_=i(61733),d=i(69592);function p(t,e){t=(0,a.Z)(t,a.Z.EMPTY_OBJECT),this._show=(0,a.Z)(t.show,!0),this._width=(0,a.Z)(t.width,1),this._loop=(0,a.Z)(t.loop,!1),this._distanceDisplayCondition=t.distanceDisplayCondition,this._material=t.material,(0,h.Z)(this._material)||(this._material=d.Z.fromType(d.Z.ColorType,{color:new r.Z(1,1,1,1)}));var i,l=t.positions;(0,h.Z)(l)||(l=[]),this._positions=l,this._actualPositions=(0,n.Z)(l,s.Z.equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=l.slice()),this._actualPositions.push(s.Z.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=t.id,(0,h.Z)(e)&&(i=u.Z.clone(e.modelMatrix)),this._modelMatrix=i,this._segments=_.Z.wrapLongitude(this._actualPositions,i),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(v),this._polylineCollection=e,this._dirty=!1,this._pickId=void 0,this._boundingVolume=o.Z.fromPoints(this._actualPositions),this._boundingVolumeWC=o.Z.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new o.Z}var f=p.POSITION_INDEX=0,Z=p.SHOW_INDEX=1,m=p.WIDTH_INDEX=2,y=p.MATERIAL_INDEX=3,g=p.POSITION_SIZE_INDEX=4,D=p.DISTANCE_DISPLAY_CONDITION=5,v=p.NUMBER_OF_PROPERTIES=6;function T(t,e){++t._propertiesChanged[e];var i=t._polylineCollection;(0,h.Z)(i)&&(i._updatePolyline(t,e),t._dirty=!0)}Object.defineProperties(p.prototype,{show:{get:function(){return this._show},set:function(t){if(!(0,h.Z)(t))throw new l.Z("value is required.");t!==this._show&&(this._show=t,T(this,Z))}},positions:{get:function(){return this._positions},set:function(t){if(!(0,h.Z)(t))throw new l.Z("value is required.");var e=(0,n.Z)(t,s.Z.equalsEpsilon);this._loop&&e.length>2&&(e===t&&(e=t.slice()),e.push(s.Z.clone(e[0]))),this._actualPositions.length===e.length&&this._actualPositions.length===this._length||T(this,g),this._positions=t,this._actualPositions=e,this._length=e.length,this._boundingVolume=o.Z.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=o.Z.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),T(this,f),this.update()}},material:{get:function(){return this._material},set:function(t){if(!(0,h.Z)(t))throw new l.Z("material is required.");this._material!==t&&(this._material=t,T(this,y))}},width:{get:function(){return this._width},set:function(t){if(!(0,h.Z)(t))throw new l.Z("value is required.");var e=this._width;t!==e&&(this._width=t,T(this,m))}},loop:{get:function(){return this._loop},set:function(t){if(!(0,h.Z)(t))throw new l.Z("value is required.");if(t!==this._loop){var e=this._actualPositions;t?e.length>2&&!s.Z.equals(e[0],e[e.length-1])&&(e.length===this._positions.length&&(this._actualPositions=e=this._positions.slice()),e.push(s.Z.clone(e[0]))):e.length>2&&s.Z.equals(e[0],e[e.length-1])&&(e.length-1===this._positions.length?this._actualPositions=this._positions:e.pop()),this._loop=t,T(this,g)}}},id:{get:function(){return this._id},set:function(t){this._id=t,(0,h.Z)(this._pickId)&&(this._pickId.object.id=t)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!(0,h.Z)(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){if((0,h.Z)(t)&&t.far<=t.near)throw new l.Z("far distance must be greater than near distance.");c.Z.equals(t,this._distanceDisplayCondition)||(this._distanceDisplayCondition=c.Z.clone(t,this._distanceDisplayCondition),T(this,D))}}}),p.prototype.update=function(){var t=u.Z.IDENTITY;(0,h.Z)(this._polylineCollection)&&(t=this._polylineCollection.modelMatrix);var e=this._segments.positions.length,i=this._segments.lengths,n=this._propertiesChanged[f]>0||this._propertiesChanged[g]>0;if(u.Z.equals(t,this._modelMatrix)&&!n||(this._segments=_.Z.wrapLongitude(this._actualPositions,t),this._boundingVolumeWC=o.Z.transform(this._boundingVolume,t,this._boundingVolumeWC)),this._modelMatrix=u.Z.clone(t,this._modelMatrix),this._segments.positions.length!==e)T(this,g);else for(var s=i.length,r=0;r<s;++r)if(i[r]!==this._segments.lengths[r]){T(this,g);break}},p.prototype.getPickId=function(t){return(0,h.Z)(this._pickId)||(this._pickId=t.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId},p.prototype._clean=function(){this._dirty=!1;for(var t=this._propertiesChanged,e=0;e<v-1;++e)t[e]=0},p.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0},e["Z"]=p},56764:function(t,e,i){var n=i(48243),o=i(60838),s=i(60216),r=i(63367),a=i(51688),h=i(59947),l=i(8182),c=i(84828),u=i(62200),_=i(82982),d=i(86511),p=i(12572),f=i(74938),Z=i(96037),m=i(22832),y=i(84935),g=i(99417),D=i(72248),v=i(7749),T=i(9407),S=i(99095),b=i(58597),P=i(20521),E=i(60072),A=i(8379),I=i(10667),x=i(46588),C=i(53642),w=i(8743),B=i(18192),N=i(94373),O=i(36449),L=i(9067),R=i(7164),V=i(13633),U=i(69592),M=i(28509),k=i(89917),W=M.Z.SHOW_INDEX,F=M.Z.WIDTH_INDEX,q=M.Z.POSITION_INDEX,Y=M.Z.MATERIAL_INDEX,X=M.Z.POSITION_SIZE_INDEX,H=M.Z.DISTANCE_DISPLAY_CONDITION,z=M.Z.NUMBER_OF_PROPERTIES,Q={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function j(t){t=(0,u.Z)(t,u.Z.EMPTY_OBJECT),this.show=(0,u.Z)(t.show,!0),this.modelMatrix=D.Z.clone((0,u.Z)(t.modelMatrix,D.Z.IDENTITY)),this._modelMatrix=D.Z.clone(D.Z.IDENTITY),this.debugShowBoundingVolume=(0,u.Z)(t.debugShowBoundingVolume,!1),this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(z),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:b.Z.STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=h.Z.clone(h.Z.WHITE);var e=this;this._uniformMap={u_highlightColor:function(){return e._highlightColor}}}function G(t,e){(0,_.Z)(t._batchTable)&&t._batchTable.destroy();var i=[{functionName:"batchTable_getWidthAndShow",componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:c.Z.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:c.Z.FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:c.Z.FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:c.Z.FLOAT,componentsPerAttribute:2}];t._batchTable=new R.Z(e,i,t._polylines.length)}Object.defineProperties(j.prototype,{length:{get:function(){return ut(this),this._polylines.length}}}),j.prototype.add=function(t){var e=new M.Z(t,this);return e._index=this._polylines.length,this._polylines.push(e),this._createVertexArray=!0,this._createBatchTable=!0,e},j.prototype.remove=function(t){if(this.contains(t)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,(0,_.Z)(t._bucket)){var e=t._bucket;e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()}return t._destroy(),!0}return!1},j.prototype.removeAll=function(){_t(this),pt(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0},j.prototype.contains=function(t){return(0,_.Z)(t)&&t._polylineCollection===this},j.prototype.get=function(t){if(!(0,_.Z)(t))throw new p.Z("index is required.");return ut(this),this._polylines[t]};var J=new f.Z,K=new r.Z,$=new o.Z;j.prototype.update=function(t){if(ut(this),0!==this._polylines.length&&this.show){ct(this,t);var e,i=t.context,n=t.mapProjection,s=this._propertiesChanged;if(this._createBatchTable){if(0===P.Z.maximumVertexTextureImageUnits)throw new T.Z("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");G(this,i),this._createBatchTable=!1}if(this._createVertexArray||nt(this))st(this,i,n);else if(this._polylinesUpdated){var a=this._polylinesToUpdate;if(this._mode!==k.Z.SCENE3D)for(var h=a.length,l=0;l<h;++l)e=a[l],e.update();if(s[X]||s[Y])st(this,i,n);else for(var c=a.length,u=this._polylineBuckets,d=0;d<c;++d){e=a[d],s=e._propertiesChanged;var p=e._bucket,Z=0;for(var m in u)if(u.hasOwnProperty(m)){if(u[m]===p){s[q]&&p.writeUpdate(Z,e,this._positionBuffer,n);break}Z+=u[m].lengthOfPositions}if((s[W]||s[F])&&this._batchTable.setBatchedAttribute(e._index,0,new o.Z(e._width,e._show)),this._batchTable.attributes.length>2){if(s[q]||s[X]){var y=t.mode===k.Z.SCENE2D?e._boundingVolume2D:e._boundingVolumeWC,g=f.Z.fromCartesian(y.center,J),v=r.Z.fromElements(g.low.x,g.low.y,g.low.z,y.radius,K);this._batchTable.setBatchedAttribute(e._index,2,g.high),this._batchTable.setBatchedAttribute(e._index,3,v)}if(s[H]){var S=$;S.x=0,S.y=Number.MAX_VALUE;var b=e.distanceDisplayCondition;(0,_.Z)(b)&&(S.x=b.near,S.y=b.far),this._batchTable.setBatchedAttribute(e._index,4,S)}}e._clean()}a.length=0,this._polylinesUpdated=!1}s=this._propertiesChanged;for(var E=0;E<z;++E)s[E]=0;var A=D.Z.IDENTITY;t.mode===k.Z.SCENE3D&&(A=this.modelMatrix);var x=t.passes,C=0!==t.morphTime;if((0,_.Z)(this._opaqueRS)&&this._opaqueRS.depthTest.enabled===C||(this._opaqueRS=I.Z.fromCache({depthMask:C,depthTest:{enabled:C}})),(0,_.Z)(this._translucentRS)&&this._translucentRS.depthTest.enabled===C||(this._translucentRS=I.Z.fromCache({blending:V.Z.ALPHA_BLEND,depthMask:!C,depthTest:{enabled:C}})),this._batchTable.update(t),x.render||x.pick){var w=this._colorCommands;it(this,t,w,A)}}};var tt=new n.Z,et=new n.Z;function it(t,e,i,o){for(var s=e.context,r=e.commandList,a=i.length,h=0,c=!0,u=t._vertexArrays,d=t.debugShowBoundingVolume,p=t._batchTable,f=p.getUniformMapCallback(),Z=u.length,m=0;m<Z;++m)for(var y=u[m],g=y.buckets,D=g.length,v=0;v<D;++v){for(var T,S,b,P,I=g[v],x=I.offset,C=I.bucket.shaderProgram,w=I.bucket.polylines,B=w.length,N=0,O=0;O<B;++O){var L=w[O],R=ht(L._material);if(R!==T){if((0,_.Z)(T)&&N>0){var V=S.isTranslucent();h>=a?(b=new E.Z({owner:t}),i.push(b)):b=i[h],++h,P=(0,l.Z)(f(S._uniforms),t._uniformMap),b.boundingVolume=n.Z.clone(tt,b.boundingVolume),b.modelMatrix=o,b.shaderProgram=C,b.vertexArray=y.va,b.renderState=V?t._translucentRS:t._opaqueRS,b.pass=V?A.Z.TRANSLUCENT:A.Z.OPAQUE,b.debugShowBoundingVolume=d,b.pickId="v_pickColor",b.uniformMap=P,b.count=N,b.offset=x,x+=N,N=0,c=!0,r.push(b)}S=L._material,S.update(s),T=R}for(var U,M=L._locatorBuckets,W=M.length,F=0;F<W;++F){var q=M[F];q.locator===I&&(N+=q.count)}e.mode===k.Z.SCENE3D?U=L._boundingVolumeWC:e.mode===k.Z.COLUMBUS_VIEW?U=L._boundingVolume2D:e.mode===k.Z.SCENE2D?(0,_.Z)(L._boundingVolume2D)&&(U=n.Z.clone(L._boundingVolume2D,et),U.center.x=0):(0,_.Z)(L._boundingVolumeWC)&&(0,_.Z)(L._boundingVolume2D)&&(U=n.Z.union(L._boundingVolumeWC,L._boundingVolume2D,et)),c?(c=!1,n.Z.clone(U,tt)):n.Z.union(U,tt,tt)}(0,_.Z)(T)&&N>0&&(h>=a?(b=new E.Z({owner:t}),i.push(b)):b=i[h],++h,P=(0,l.Z)(f(S._uniforms),t._uniformMap),b.boundingVolume=n.Z.clone(tt,b.boundingVolume),b.modelMatrix=o,b.shaderProgram=C,b.vertexArray=y.va,b.renderState=S.isTranslucent()?t._translucentRS:t._opaqueRS,b.pass=S.isTranslucent()?A.Z.TRANSLUCENT:A.Z.OPAQUE,b.debugShowBoundingVolume=d,b.pickId="v_pickColor",b.uniformMap=P,b.count=N,b.offset=x,c=!0,r.push(b)),T=void 0}i.length=h}function nt(t){var e=!1,i=t._propertiesChanged,n=t._positionBufferUsage;return i[q]?n.bufferUsage!==b.Z.STREAM_DRAW?(e=!0,n.bufferUsage=b.Z.STREAM_DRAW,n.frameCount=100):n.frameCount=100:n.bufferUsage!==b.Z.STATIC_DRAW&&(0===n.frameCount?(e=!0,n.bufferUsage=b.Z.STATIC_DRAW):n.frameCount--),e}j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return dt(this),_t(this),pt(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,d.Z)(this)};var ot=[0,0,0];function st(t,e,i){t._createVertexArray=!1,_t(t),dt(t),lt(t);var n,o,s=[[]],r=s[0],a=t._batchTable,h=t._useHighlightColor,l=[0],u=0,d=[[]],p=0,f=t._polylineBuckets;for(n in f)f.hasOwnProperty(n)&&(o=f[n],o.updateShader(e,a,h),p+=o.lengthOfPositions);if(p>0){var Z,y=t._mode,D=new Float32Array(6*p*3),v=new Float32Array(4*p),T=0,P=0,E=0;for(n in f)if(f.hasOwnProperty(n)){o=f[n],o.write(D,v,T,P,E,a,e,i),y===k.Z.MORPHING&&((0,_.Z)(Z)||(Z=new Float32Array(6*p*3)),o.writeForMorph(Z,T));var A=o.lengthOfPositions;T+=6*A*3,P+=4*A,E+=4*A,u=o.updateIndices(s,l,d,u)}var I,x=t._positionBufferUsage.bufferUsage,C=b.Z.STATIC_DRAW;t._positionBuffer=S.Z.createVertexBuffer({context:e,typedArray:D,usage:x}),(0,_.Z)(Z)&&(I=S.Z.createVertexBuffer({context:e,typedArray:Z,usage:x})),t._texCoordExpandAndBatchIndexBuffer=S.Z.createVertexBuffer({context:e,typedArray:v,usage:C});for(var w=3*Float32Array.BYTES_PER_ELEMENT,N=4*Float32Array.BYTES_PER_ELEMENT,O=0,L=s.length,R=0;R<L;++R)if(r=s[R],r.length>0){var V=new Uint16Array(r),U=S.Z.createIndexBuffer({context:e,typedArray:V,usage:b.Z.STATIC_DRAW,indexDatatype:m.Z.UNSIGNED_SHORT});O+=l[R];var M,W,F,q,Y=6*(R*(w*g.Z.SIXTY_FOUR_KILOBYTES)-O*w),X=w+Y,H=w+X,z=w+H,j=w+z,G=w+j,J=R*(N*g.Z.SIXTY_FOUR_KILOBYTES)-O*N,K=[{index:Q.position3DHigh,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:Y,strideInBytes:6*w},{index:Q.position3DLow,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:X,strideInBytes:6*w},{index:Q.position2DHigh,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:Y,strideInBytes:6*w},{index:Q.position2DLow,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:X,strideInBytes:6*w},{index:Q.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:H,strideInBytes:6*w},{index:Q.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:z,strideInBytes:6*w},{index:Q.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:H,strideInBytes:6*w},{index:Q.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:z,strideInBytes:6*w},{index:Q.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:j,strideInBytes:6*w},{index:Q.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:G,strideInBytes:6*w},{index:Q.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:j,strideInBytes:6*w},{index:Q.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:c.Z.FLOAT,offsetInBytes:G,strideInBytes:6*w},{index:Q.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:c.Z.FLOAT,vertexBuffer:t._texCoordExpandAndBatchIndexBuffer,offsetInBytes:J}];y===k.Z.SCENE3D?(M=t._positionBuffer,W="vertexBuffer",F=ot,q="value"):y===k.Z.SCENE2D||y===k.Z.COLUMBUS_VIEW?(M=ot,W="value",F=t._positionBuffer,q="vertexBuffer"):(M=I,W="vertexBuffer",F=t._positionBuffer,q="vertexBuffer"),K[0][W]=M,K[1][W]=M,K[2][q]=F,K[3][q]=F,K[4][W]=M,K[5][W]=M,K[6][q]=F,K[7][q]=F,K[8][W]=M,K[9][W]=M,K[10][q]=F,K[11][q]=F;var $=new B.Z({context:e,attributes:K,indexBuffer:U});t._vertexArrays.push({va:$,buckets:d[R]})}}}function rt(t,e){return e instanceof w.Z?e.id:e}var at=[];function ht(t){var e=U.Z._uniformList[t.type],i=e.length;at.length=2*i;for(var n=0,o=0;o<i;++o){var s=e[o];at[n]=s,at[n+1]=t._uniforms[s](),n+=2}return t.type+":"+JSON.stringify(at,rt)}function lt(t){for(var e=t._mode,i=t._modelMatrix,n=t._polylineBuckets={},o=t._polylines,s=o.length,r=0;r<s;++r){var a=o[r];if(a._actualPositions.length>1){a.update();var h=a.material,l=n[h.type];(0,_.Z)(l)||(l=n[h.type]=new Zt(h,e,i)),l.addPolyline(a)}}}function ct(t,e){var i=e.mode;t._mode===i&&D.Z.equals(t._modelMatrix,t.modelMatrix)||(t._mode=i,t._modelMatrix=D.Z.clone(t.modelMatrix),t._createVertexArray=!0)}function ut(t){if(t._polylinesRemoved){t._polylinesRemoved=!1;for(var e,i=[],n=[],o=0,s=t._polylines.length,r=0;r<s;++r)e=t._polylines[r],e.isDestroyed||(e._index=o++,n.push(e),i.push(e));t._polylines=i,t._polylinesToUpdate=n}}function _t(t){for(var e=t._polylines,i=e.length,n=0;n<i;++n)if(!e[n].isDestroyed){var o=e[n]._bucket;(0,_.Z)(o)&&(o.shaderProgram=o.shaderProgram&&o.shaderProgram.destroy())}}function dt(t){for(var e=t._vertexArrays.length,i=0;i<e;++i)t._vertexArrays[i].va.destroy();t._vertexArrays.length=0}function pt(t){for(var e=t._polylines,i=e.length,n=0;n<i;++n)e[n].isDestroyed||e[n]._destroy()}function ft(t,e,i){this.count=t,this.offset=e,this.bucket=i}function Zt(t,e,i){this.polylines=[],this.lengthOfPositions=0,this.material=t,this.shaderProgram=void 0,this.mode=e,this.modelMatrix=i}function mt(t){return s.Z.dot(s.Z.UNIT_X,t._boundingVolume.center)<0||t._boundingVolume.intersectPlane(v.Z.ORIGIN_ZX_PLANE)===y.Z.INTERSECTING}j.prototype._updatePolyline=function(t,e){this._polylinesUpdated=!0,t._dirty||this._polylinesToUpdate.push(t),++this._propertiesChanged[e]},Zt.prototype.addPolyline=function(t){var e=this.polylines;e.push(t),t._actualLength=this.getPolylinePositionsLength(t),this.lengthOfPositions+=t._actualLength,t._bucket=this},Zt.prototype.updateShader=function(t,e,i){if(!(0,_.Z)(this.shaderProgram)){var n=["DISTANCE_DISPLAY_CONDITION"];i&&n.push("VECTOR_TILE"),-1!==this.material.shaderSource.search(/varying\s+float\s+v_polylineAngle;/g)&&n.push("POLYLINE_DASH"),Z.Z.isInternetExplorer()||n.push("CLIP_POLYLINE");var o=new C.Z({defines:n,sources:["varying vec4 v_pickColor;\n",this.material.shaderSource,O.Z]}),s=e.getVertexShaderCallback()(L.Z),r=new C.Z({defines:n,sources:[N.Z,s]});this.shaderProgram=x.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:o,attributeLocations:Q})}},Zt.prototype.getPolylinePositionsLength=function(t){var e;if(this.mode===k.Z.SCENE3D||!mt(t))return e=t._actualPositions.length,4*e-4;var i=0,n=t._segments.lengths;e=n.length;for(var o=0;o<e;++o)i+=4*n[o]-4;return i};var yt=new s.Z,gt=new s.Z,Dt=new s.Z,vt=new s.Z,Tt=new r.Z,St=new o.Z;Zt.prototype.write=function(t,e,i,n,o,a,l,c){for(var u=this.mode,d=c.ellipsoid.maximumRadius*g.Z.PI,p=this.polylines,Z=p.length,m=0;m<Z;++m){for(var y,D=p[m],v=D.width,T=D.show&&v>0,S=D._index,b=this.getSegments(D,c),P=b.positions,E=b.lengths,A=P.length,I=D.getPickId(l).color,x=0,C=0,w=0;w<A;++w){0===w?D._loop?y=P[A-2]:(y=vt,s.Z.subtract(P[0],P[1],y),s.Z.add(P[0],y,y)):y=P[w-1],s.Z.clone(y,gt),s.Z.clone(P[w],yt),w===A-1?D._loop?y=P[1]:(y=vt,s.Z.subtract(P[A-1],P[A-2],y),s.Z.add(P[A-1],y,y)):y=P[w+1],s.Z.clone(y,Dt);var B=E[x];w===C+B&&(C+=B,++x);var N=w-C===0,O=w===C+E[x]-1;u===k.Z.SCENE2D&&(gt.z=0,yt.z=0,Dt.z=0),u!==k.Z.SCENE2D&&u!==k.Z.MORPHING||(N||O)&&d-Math.abs(yt.x)<1&&((yt.x<0&&gt.x>0||yt.x>0&&gt.x<0)&&s.Z.clone(yt,gt),(yt.x<0&&Dt.x>0||yt.x>0&&Dt.x<0)&&s.Z.clone(yt,Dt));for(var L=N?2:0,R=O?2:4,V=L;V<R;++V){f.Z.writeElements(yt,t,i),f.Z.writeElements(gt,t,i+6),f.Z.writeElements(Dt,t,i+12);var U=V-2<0?-1:1;e[o]=w/(A-1),e[o+1]=V%2*2-1,e[o+2]=U,e[o+3]=S,i+=18,o+=4}}var M=Tt;M.x=h.Z.floatToByte(I.red),M.y=h.Z.floatToByte(I.green),M.z=h.Z.floatToByte(I.blue),M.w=h.Z.floatToByte(I.alpha);var W=St;W.x=v,W.y=T?1:0;var F=u===k.Z.SCENE2D?D._boundingVolume2D:D._boundingVolumeWC,q=f.Z.fromCartesian(F.center,J),Y=q.high,X=r.Z.fromElements(q.low.x,q.low.y,q.low.z,F.radius,K),H=$;H.x=0,H.y=Number.MAX_VALUE;var z=D.distanceDisplayCondition;(0,_.Z)(z)&&(H.x=z.near,H.y=z.far),a.setBatchedAttribute(S,0,W),a.setBatchedAttribute(S,1,M),a.attributes.length>2&&(a.setBatchedAttribute(S,2,Y),a.setBatchedAttribute(S,3,X),a.setBatchedAttribute(S,4,H))}};var bt=new s.Z,Pt=new s.Z,Et=new s.Z,At=new s.Z;Zt.prototype.writeForMorph=function(t,e){for(var i=this.modelMatrix,n=this.polylines,o=n.length,r=0;r<o;++r)for(var a=n[r],h=a._segments.positions,l=a._segments.lengths,c=h.length,u=0,_=0,d=0;d<c;++d){var p;0===d?a._loop?p=h[c-2]:(p=At,s.Z.subtract(h[0],h[1],p),s.Z.add(h[0],p,p)):p=h[d-1],p=D.Z.multiplyByPoint(i,p,Pt);var Z,m=D.Z.multiplyByPoint(i,h[d],bt);d===c-1?a._loop?Z=h[1]:(Z=At,s.Z.subtract(h[c-1],h[c-2],Z),s.Z.add(h[c-1],Z,Z)):Z=h[d+1],Z=D.Z.multiplyByPoint(i,Z,Et);var y=l[u];d===_+y&&(_+=y,++u);for(var g=d-_===0,v=d===_+l[u]-1,T=g?2:0,S=v?2:4,b=T;b<S;++b)f.Z.writeElements(m,t,e),f.Z.writeElements(p,t,e+6),f.Z.writeElements(Z,t,e+12),e+=18}};var It=new Array(1);Zt.prototype.updateIndices=function(t,e,i,n){var o=i.length-1,s=new ft(0,n,this);i[o].push(s);var r=0,a=t[t.length-1],h=0;a.length>0&&(h=a[a.length-1]+1);for(var l=this.polylines,c=l.length,u=0;u<c;++u){var _,d=l[u];if(d._locatorBuckets=[],this.mode===k.Z.SCENE3D){_=It;var p=d._actualPositions.length;if(!(p>0))continue;_[0]=p}else _=d._segments.lengths;var f=_.length;if(f>0){for(var Z=0,m=0;m<f;++m)for(var y=_[m]-1,D=0;D<y;++D)h+4>g.Z.SIXTY_FOUR_KILOBYTES&&(d._locatorBuckets.push({locator:s,count:Z}),Z=0,e.push(4),a=[],t.push(a),h=0,s.count=r,r=0,n=0,s=new ft(0,0,this),i[++o]=[s]),a.push(h,h+2,h+1),a.push(h+1,h+2,h+3),Z+=6,r+=6,n+=6,h+=4;d._locatorBuckets.push({locator:s,count:Z}),h+4>g.Z.SIXTY_FOUR_KILOBYTES&&(e.push(0),a=[],t.push(a),h=0,s.count=r,n=0,r=0,s=new ft(0,0,this),i[++o]=[s])}d._clean()}return s.count=r,n},Zt.prototype.getPolylineStartIndex=function(t){for(var e=this.polylines,i=0,n=e.length,o=0;o<n;++o){var s=e[o];if(s===t)break;i+=s._actualLength}return i};var xt,Ct={positions:void 0,lengths:void 0},wt=new Array(1),Bt=new s.Z,Nt=new a.Z;Zt.prototype.getSegments=function(t,e){var i=t._actualPositions;if(this.mode===k.Z.SCENE3D)return wt[0]=i.length,Ct.positions=i,Ct.lengths=wt,Ct;mt(t)&&(i=t._segments.positions);for(var o,r=e.ellipsoid,a=[],h=this.modelMatrix,l=i.length,c=Bt,u=0;u<l;++u)o=i[u],c=D.Z.multiplyByPoint(h,o,c),a.push(e.project(r.cartesianToCartographic(c,Nt)));if(a.length>0){t._boundingVolume2D=n.Z.fromPoints(a,t._boundingVolume2D);var _=t._boundingVolume2D.center;t._boundingVolume2D.center=new s.Z(_.z,_.x,_.y)}return Ct.positions=a,Ct.lengths=t._segments.lengths,Ct},Zt.prototype.writeUpdate=function(t,e,i,n){var o=this.mode,r=n.ellipsoid.maximumRadius*g.Z.PI,a=e._actualLength;if(a){t+=this.getPolylineStartIndex(e);var h=xt,l=6*a*3;!(0,_.Z)(h)||h.length<l?h=xt=new Float32Array(l):h.length>l&&(h=new Float32Array(h.buffer,0,l));var c,u=this.getSegments(e,n),d=u.positions,p=u.lengths,Z=0,m=0,y=0;a=d.length;for(var D=0;D<a;++D){0===D?e._loop?c=d[a-2]:(c=vt,s.Z.subtract(d[0],d[1],c),s.Z.add(d[0],c,c)):c=d[D-1],s.Z.clone(c,gt),s.Z.clone(d[D],yt),D===a-1?e._loop?c=d[1]:(c=vt,s.Z.subtract(d[a-1],d[a-2],c),s.Z.add(d[a-1],c,c)):c=d[D+1],s.Z.clone(c,Dt);var v=p[m];D===y+v&&(y+=v,++m);var T=D-y===0,S=D===y+p[m]-1;o===k.Z.SCENE2D&&(gt.z=0,yt.z=0,Dt.z=0),o!==k.Z.SCENE2D&&o!==k.Z.MORPHING||(T||S)&&r-Math.abs(yt.x)<1&&((yt.x<0&&gt.x>0||yt.x>0&&gt.x<0)&&s.Z.clone(yt,gt),(yt.x<0&&Dt.x>0||yt.x>0&&Dt.x<0)&&s.Z.clone(yt,Dt));for(var b=T?2:0,P=S?2:4,E=b;E<P;++E)f.Z.writeElements(yt,h,Z),f.Z.writeElements(gt,h,Z+6),f.Z.writeElements(Dt,h,Z+12),Z+=18}i.copyFromArrayView(h,18*Float32Array.BYTES_PER_ELEMENT*t)}},e["Z"]=j},54052:function(t,e,i){var n=i(62200),o=i(96037),s=i(67252),r=i(76257),a=i(12120),h=i(94373),l=i(12804),c=h.Z+"\n"+a.Z,u=r.Z;function _(t){t=(0,n.Z)(t,n.Z.EMPTY_OBJECT);var e=(0,n.Z)(t.translucent,!0),i=!1,o=_.VERTEX_FORMAT;this.material=void 0,this.translucent=e,this._vertexShaderSource=(0,n.Z)(t.vertexShaderSource,c),this._fragmentShaderSource=(0,n.Z)(t.fragmentShaderSource,u),this._renderState=l.Z.getDefaultRenderState(e,i,t.renderState),this._closed=i,this._vertexFormat=o}o.Z.isInternetExplorer()||(c="#define CLIP_POLYLINE \n"+c),Object.defineProperties(_.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),_.VERTEX_FORMAT=s.Z.POSITION_ONLY,_.prototype.getFragmentShaderSource=l.Z.prototype.getFragmentShaderSource,_.prototype.isTranslucent=l.Z.prototype.isTranslucent,_.prototype.getRenderState=l.Z.prototype.getRenderState,e["Z"]=_},13597:function(t,e,i){var n=i(62200),o=i(82982),s=i(96037),r=i(67252),a=i(93981),h=i(94373),l=i(36449),c=i(12804),u=i(69592),_=h.Z+"\n"+a.Z,d=l.Z;function p(t){t=(0,n.Z)(t,n.Z.EMPTY_OBJECT);var e=(0,n.Z)(t.translucent,!0),i=!1,s=p.VERTEX_FORMAT;this.material=(0,o.Z)(t.material)?t.material:u.Z.fromType(u.Z.ColorType),this.translucent=e,this._vertexShaderSource=(0,n.Z)(t.vertexShaderSource,_),this._fragmentShaderSource=(0,n.Z)(t.fragmentShaderSource,d),this._renderState=c.Z.getDefaultRenderState(e,i,t.renderState),this._closed=i,this._vertexFormat=s}s.Z.isInternetExplorer()||(_="#define CLIP_POLYLINE \n"+_),Object.defineProperties(p.prototype,{vertexShaderSource:{get:function(){var t=this._vertexShaderSource;return-1!==this.material.shaderSource.search(/varying\s+float\s+v_polylineAngle;/g)&&(t="#define POLYLINE_DASH\n"+t),t}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),p.VERTEX_FORMAT=r.Z.POSITION_AND_ST,p.prototype.getFragmentShaderSource=c.Z.prototype.getFragmentShaderSource,p.prototype.isTranslucent=c.Z.prototype.isTranslucent,p.prototype.getRenderState=c.Z.prototype.getRenderState,e["Z"]=p}}]);
//# sourceMappingURL=chunk-vendors-efe38317-legacy.b552b8d1.js.map