"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[1282],{51867:function(e,t){function i(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}t["Z"]=i},42261:function(e,t,i){var n=i(53773),o=i(68591),r=i(60838),s=i(60216),a=i(59947),c=i(84828),d=i(62200),h=i(82982),l=i(86511),_=i(50491),u=i(96037),f=i(22832),p=i(25405),g=i(72248),m=i(96190),v=i(2819),Z=i(99095),b=i(58597),y=i(60072),I=i(8379),T=i(10667),C=i(46588),A=i(53642),O=i(18192),P=i(94373),S=i(65493),x=i(74532),L=i(13222),E=i(13633),w=i(52381),N=i(73001),B=i(71593),D=i(87233),k=i(77053),H=i(81255),R=i(6220);function M(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=(0,d.Z)(e.ellipsoid,_.Z.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new r.Z(n.Z._defaultMinTerrainHeight,n.Z._defaultMaxTerrainHeight),this._boundingVolume=p.Z.fromRectangle(e.rectangle,n.Z._defaultMinTerrainHeight,n.Z._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=a.Z.clone(a.Z.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._readyPromise=L.Z.defer(),this._verticesPromise=void 0;var t=this;n.Z.initialize().then((function(){U(t,t._rectangle,t._ellipsoid)})).otherwise((function(e){this._readyPromise.reject(e)}))}function U(e,t,i){var o=n.Z.getMinimumMaximumHeights(t,i),r=o.minimumTerrainHeight,s=o.maximumTerrainHeight,a=e._minimumMaximumVectorHeights;a.x=r,a.y=s;var c=e._boundingVolume,d=e._rectangle;p.Z.fromRectangle(d,r,s,i,c)}function F(e){var t=e._rectangle,i=e._minimumHeight,n=e._maximumHeight,o=e._ellipsoid,r=e._center,a=2+m.Z.packedLength+_.Z.packedLength+s.Z.packedLength,c=new Float64Array(a),d=0;return c[d++]=i,c[d++]=n,m.Z.pack(t,c,d),d+=m.Z.packedLength,_.Z.pack(o,c,d),d+=_.Z.packedLength,s.Z.pack(r,c,d),c}Object.defineProperties(M.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise.promise}}});var V=new v.Z("createVectorTileClampedPolylines"),W={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};function G(e,t){if(!(0,h.Z)(e._va)){if(!(0,h.Z)(e._verticesPromise)){var i=e._positions,n=e._widths,r=e._counts,s=e._transferrableBatchIds,a=e._packedBuffer;(0,h.Z)(a)||(i=e._positions=(0,o.Z)(i),n=e._widths=(0,o.Z)(n),r=e._counts=(0,o.Z)(r),s=e._transferrableBatchIds=(0,o.Z)(e._batchIds),a=e._packedBuffer=F(e));var d=[i.buffer,n.buffer,r.buffer,s.buffer,a.buffer],l={positions:i.buffer,widths:n.buffer,counts:r.buffer,batchIds:s.buffer,packedBuffer:a.buffer,keepDecodedPositions:e._keepDecodedPositions},_=e._verticesPromise=V.scheduleTask(l,d);if(!(0,h.Z)(_))return;(0,L.Z)(_,(function(t){e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(t.decodedPositions),e._decodedPositionOffsets=new Uint32Array(t.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(t.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(t.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(t.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(t.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(t.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(t.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds);var i=t.indexDatatype;e._indices=i===f.Z.UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0})).otherwise((function(t){e._readyPromise.reject(t)}))}if(e._ready&&!(0,h.Z)(e._va)){var u=e._startEllipsoidNormals,p=e._endEllipsoidNormals,g=e._startPositionAndHeights,m=e._endPositionAndHeights,v=e._startFaceNormalAndVertexCornerIds,y=e._endFaceNormalAndHalfWidths,I=e._vertexBatchIds,T=e._indices,C=u.byteLength+p.byteLength;C+=g.byteLength+m.byteLength,C+=v.byteLength+y.byteLength,C+=I.byteLength+T.byteLength,e._trianglesLength=T.length/3,e._geometryByteLength=C;var A=Z.Z.createVertexBuffer({context:t,typedArray:u,usage:b.Z.STATIC_DRAW}),P=Z.Z.createVertexBuffer({context:t,typedArray:p,usage:b.Z.STATIC_DRAW}),S=Z.Z.createVertexBuffer({context:t,typedArray:g,usage:b.Z.STATIC_DRAW}),x=Z.Z.createVertexBuffer({context:t,typedArray:m,usage:b.Z.STATIC_DRAW}),E=Z.Z.createVertexBuffer({context:t,typedArray:v,usage:b.Z.STATIC_DRAW}),w=Z.Z.createVertexBuffer({context:t,typedArray:y,usage:b.Z.STATIC_DRAW}),N=Z.Z.createVertexBuffer({context:t,typedArray:I,usage:b.Z.STATIC_DRAW}),B=Z.Z.createIndexBuffer({context:t,typedArray:T,usage:b.Z.STATIC_DRAW,indexDatatype:2===T.BYTES_PER_ELEMENT?f.Z.UNSIGNED_SHORT:f.Z.UNSIGNED_INT}),D=[{index:W.startEllipsoidNormal,vertexBuffer:A,componentDatatype:c.Z.FLOAT,componentsPerAttribute:3},{index:W.endEllipsoidNormal,vertexBuffer:P,componentDatatype:c.Z.FLOAT,componentsPerAttribute:3},{index:W.startPositionAndHeight,vertexBuffer:S,componentDatatype:c.Z.FLOAT,componentsPerAttribute:4},{index:W.endPositionAndHeight,vertexBuffer:x,componentDatatype:c.Z.FLOAT,componentsPerAttribute:4},{index:W.startFaceNormalAndVertexCorner,vertexBuffer:E,componentDatatype:c.Z.FLOAT,componentsPerAttribute:4},{index:W.endFaceNormalAndHalfWidth,vertexBuffer:w,componentDatatype:c.Z.FLOAT,componentsPerAttribute:4},{index:W.a_batchId,vertexBuffer:N,componentDatatype:c.Z.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new O.Z({context:t,attributes:D,indexBuffer:B}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0,e._readyPromise.resolve()}}}var z=new g.Z,Y=new s.Z;function K(e,t){(0,h.Z)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){var i=t.uniformState.view;return g.Z.clone(i,z),g.Z.multiplyByPoint(z,e._center,Y),g.Z.setTranslation(z,Y,z),z},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}function j(e){return T.Z.fromCache({cull:{enabled:!0,face:B.Z.FRONT},blending:E.Z.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:k.Z.EQUAL,frontOperation:{fail:H.Z.KEEP,zFail:H.Z.KEEP,zPass:H.Z.KEEP},backFunction:k.Z.EQUAL,backOperation:{fail:H.Z.KEEP,zFail:H.Z.KEEP,zPass:H.Z.KEEP},reference:D.Z.CESIUM_3D_TILE_MASK,mask:D.Z.CESIUM_3D_TILE_MASK}})}function X(e){(0,h.Z)(e._rs)||(e._rs=j(!1),e._rs3DTiles=j(!0))}function Q(e,t){if(!(0,h.Z)(e._sp)){var i=e._batchTable,n=i.getVertexShaderCallback(!1,"a_batchId",void 0)(S.Z),o=i.getFragmentShaderCallback(!1,void 0,!0)(x.Z),r=new A.Z({defines:["VECTOR_TILE",u.Z.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[P.Z,n]}),s=new A.Z({defines:["VECTOR_TILE"],sources:[o]});e._sp=C.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:W})}}function J(e,t){var i=e._command;if(!(0,h.Z)(e._command)){var n=e._batchTable.getUniformMapCallback()(e._uniformMap);i=e._command=new y.Z({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:n,boundingVolume:e._boundingVolume,pass:I.Z.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});var o=y.Z.shallowClone(i,i.derivedCommands.tileset);o.renderState=e._rs3DTiles,o.pass=I.Z.CESIUM_3D_TILE_CLASSIFICATION,i.derivedCommands.tileset=o}var r=e._classificationType;r!==N.Z.TERRAIN&&r!==N.Z.BOTH||t.commandList.push(i),r!==N.Z.CESIUM_3D_TILE&&r!==N.Z.BOTH||t.commandList.push(i.derivedCommands.tileset)}function q(e,t){for(var i=e._batchIds,n=i.length,o=0;o<n;++o){var r=i[o],s=t[r];s.show=!0,s.color=a.Z.WHITE}}M.prototype.getPositions=function(e){return R.Z.getPolylinePositions(this,e)},M.prototype.createFeatures=function(e,t){for(var i=this._batchIds,n=i.length,o=0;o<n;++o){var r=i[o];t[r]=new w.Z(e,r)}},M.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var $=new a.Z,ee=a.Z.WHITE,te=!0;M.prototype.applyStyle=function(e,t){if((0,h.Z)(e))for(var i=this._batchIds,n=i.length,o=0;o<n;++o){var r=i[o],s=t[r];s.color=(0,h.Z)(e.color)?e.color.evaluateColor(s,$):ee,s.show=(0,h.Z)(e.show)?e.show.evaluate(s):te}else q(this,t)},M.prototype.update=function(e){var t=e.context;if(G(this,t),K(this,t),Q(this,t),X(this),this._ready){var i=e.passes;(i.render||i.pick)&&J(this,e)}},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,l.Z)(this)},t["Z"]=M},41023:function(e,t,i){var n=i(60216),o=i(62200),r=i(82982),s=i(86511),a=i(12572),c=i(50491),d=i(12540),h=i(84828),l=i(99417),_=i(72248),u=i(96190),f=i(9407),p=i(13222),g=i(84020),m=i(79553),v=i(71898),Z=i(62942),b=i(6220),y=i(42261),I=i(22577);function T(e,t,i,n,o){this._tileset=e,this._tile=t,this._resource=i,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._contentReadyPromise=void 0,this._readyPromise=p.Z.defer(),this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._groupMetadata=void 0,x(this,n,o)}function C(e){return function(t,i){(0,r.Z)(e._polygons)&&e._polygons.updateCommands(t,i)}}function A(e,t){var i,n,s,a,c=(0,o.Z)(e.POLYGONS_LENGTH,0),d=(0,o.Z)(e.POLYLINES_LENGTH,0),h=(0,o.Z)(e.POINTS_LENGTH,0);if(c>0&&(0,r.Z)(e.POLYGON_BATCH_IDS)){var l=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,l,c)}if(d>0&&(0,r.Z)(e.POLYLINE_BATCH_IDS)){var _=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,_,d)}if(h>0&&(0,r.Z)(e.POINT_BATCH_IDS)){var u=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,u,h)}var p=(0,r.Z)(i)||(0,r.Z)(n)||(0,r.Z)(s),g=c>0&&!(0,r.Z)(i)||d>0&&!(0,r.Z)(n)||h>0&&!(0,r.Z)(s);if(p&&g)throw new f.Z("If one group of batch ids is defined, then all batch ids must be defined.");var m=!(0,r.Z)(i)&&!(0,r.Z)(n)&&!(0,r.Z)(s);if(m){var v=0;if(!(0,r.Z)(i)&&c>0)for(i=new Uint16Array(c),a=0;a<c;++a)i[a]=v++;if(!(0,r.Z)(n)&&d>0)for(n=new Uint16Array(d),a=0;a<d;++a)n[a]=v++;if(!(0,r.Z)(s)&&h>0)for(s=new Uint16Array(h),a=0;a<h;++a)s[a]=v++}return{polygons:i,polylines:n,points:s}}Object.defineProperties(T.prototype,{featuresLength:{get:function(){return(0,r.Z)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return(0,r.Z)(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){var e=0;return(0,r.Z)(this._polygons)&&(e+=this._polygons.trianglesLength),(0,r.Z)(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){var e=0;return(0,r.Z)(this._polygons)&&(e+=this._polygons.geometryByteLength),(0,r.Z)(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return(0,r.Z)(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return(0,r.Z)(this._batchTable)?this._batchTable.memorySizeInBytes:0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){return this._batchTable}},groupMetadata:{get:function(){return this._groupMetadata},set:function(e){this._groupMetadata=e}}});var O=Uint32Array.BYTES_PER_ELEMENT;function P(e){return new b.Z(e)}function S(e){return new y.Z(e)}function x(e,t,i){i=(0,o.Z)(i,0);var s=new Uint8Array(t),a=new DataView(t);i+=O;var p=a.getUint32(i,!0);if(1!==p)throw new f.Z("Only Vector tile version 1 is supported.  Version "+p+" is not.");i+=O;var b=a.getUint32(i,!0);if(i+=O,0!==b){var y=a.getUint32(i,!0);if(i+=O,0===y)throw new f.Z("Feature table must have a byte length greater than zero");var T=a.getUint32(i,!0);i+=O;var x=a.getUint32(i,!0);i+=O;var L=a.getUint32(i,!0);i+=O;var w=a.getUint32(i,!0);i+=O;var N=a.getUint32(i,!0);i+=O;var B=a.getUint32(i,!0);i+=O;var D=a.getUint32(i,!0);i+=O;var k=(0,d.Z)(s,i,y);i+=y;var H,R,M=new Uint8Array(t,i,T);i+=T,x>0&&(H=(0,d.Z)(s,i,x),i+=x,L>0&&(R=new Uint8Array(t,i,L),R=new Uint8Array(R),i+=L));var U=(0,o.Z)(k.POLYGONS_LENGTH,0),F=(0,o.Z)(k.POLYLINES_LENGTH,0),V=(0,o.Z)(k.POINTS_LENGTH,0),W=U+F+V,G=new g.Z(e,W,H,R,C(e));if(e._batchTable=G,0!==W){var z=new m.Z(k,M),Y=z.getGlobalProperty("REGION");if(!(0,r.Z)(Y))throw new f.Z("Feature table global property: REGION must be defined");var K=u.Z.unpack(Y),j=Y[4],X=Y[5],Q=e._tile.computedTransform,J=z.getGlobalProperty("RTC_CENTER",h.Z.FLOAT,3);(0,r.Z)(J)?(J=n.Z.unpack(J),_.Z.multiplyByPoint(Q,J,J)):(J=u.Z.center(K),J.height=l.Z.lerp(j,X,.5),J=c.Z.WGS84.cartographicToCartesian(J));var q=A(k,M);if(i+=i%4,U>0){z.featuresLength=U;var $=(0,o.Z)(z.getPropertyArray("POLYGON_COUNTS",h.Z.UNSIGNED_INT,1),z.getPropertyArray("POLYGON_COUNT",h.Z.UNSIGNED_INT,1));if(!(0,r.Z)($))throw new f.Z("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");var ee=(0,o.Z)(z.getPropertyArray("POLYGON_INDEX_COUNTS",h.Z.UNSIGNED_INT,1),z.getPropertyArray("POLYGON_INDEX_COUNT",h.Z.UNSIGNED_INT,1));if(!(0,r.Z)(ee))throw new f.Z("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");var te=$.reduce((function(e,t){return e+2*t}),0),ie=ee.reduce((function(e,t){return e+t}),0),ne=new Uint32Array(t,i,ie);i+=w;var oe,re,se=new Uint16Array(t,i,te);i+=N,(0,r.Z)(k.POLYGON_MINIMUM_HEIGHTS)&&(0,r.Z)(k.POLYGON_MAXIMUM_HEIGHTS)&&(oe=z.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",h.Z.FLOAT,1),re=z.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",h.Z.FLOAT,1)),e._polygons=new Z.Z({positions:se,counts:$,indexCounts:ee,indices:ne,minimumHeight:j,maximumHeight:X,polygonMinimumHeights:oe,polygonMaximumHeights:re,center:J,rectangle:K,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:G,batchIds:q.polygons,modelMatrix:Q})}if(F>0){z.featuresLength=F;var ae=(0,o.Z)(z.getPropertyArray("POLYLINE_COUNTS",h.Z.UNSIGNED_INT,1),z.getPropertyArray("POLYLINE_COUNT",h.Z.UNSIGNED_INT,1));if(!(0,r.Z)(ae))throw new f.Z("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");var ce=z.getPropertyArray("POLYLINE_WIDTHS",h.Z.UNSIGNED_SHORT,1);if(!(0,r.Z)(ce)){ce=new Uint16Array(F);for(var de=0;de<F;++de)ce[de]=2}var he=ae.reduce((function(e,t){return e+3*t}),0),le=new Uint16Array(t,i,he);i+=B;var _e=e._tileset,ue=_e.examineVectorLinesFunction;if((0,r.Z)(ue)){var fe=(0,I.Z)(new Uint16Array(le),K,j,X,c.Z.WGS84);E(fe,ae,q.polylines,G,e.url,ue)}var pe=P;(0,r.Z)(_e.classificationType)&&(pe=S),e._polylines=pe({positions:le,widths:ce,counts:ae,batchIds:q.polylines,minimumHeight:j,maximumHeight:X,center:J,rectangle:K,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:G,classificationType:_e.classificationType,keepDecodedPositions:_e.vectorKeepDecodedPositions})}if(V>0){var ge=new Uint16Array(t,i,3*V);i+=D,e._points=new v.Z({positions:ge,batchIds:q.points,minimumHeight:j,maximumHeight:X,rectangle:K,batchTable:G})}}}else e._readyPromise.resolve(e)}function L(e){var t=e.featuresLength;if(!(0,r.Z)(e._features)&&t>0){var i=new Array(t);(0,r.Z)(e._polygons)&&e._polygons.createFeatures(e,i),(0,r.Z)(e._polylines)&&e._polylines.createFeatures(e,i),(0,r.Z)(e._points)&&e._points.createFeatures(e,i),e._features=i}}function E(e,t,i,n,o,r){for(var s=t.length,a=0,c=0;c<s;c++){var d=3*t[c],h=e.slice(a,a+d);a+=d,r(h,i[c],o,n)}}T.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},T.prototype.getFeature=function(e){var t=this.featuresLength;if(!(0,r.Z)(e)||e<0||e>=t)throw new a.Z("batchId is required and between zero and featuresLength - 1 ("+(t-1)+").");return L(this),this._features[e]},T.prototype.applyDebugSettings=function(e,t){(0,r.Z)(this._polygons)&&this._polygons.applyDebugSettings(e,t),(0,r.Z)(this._polylines)&&this._polylines.applyDebugSettings(e,t),(0,r.Z)(this._points)&&this._points.applyDebugSettings(e,t)},T.prototype.applyStyle=function(e){L(this),(0,r.Z)(this._polygons)&&this._polygons.applyStyle(e,this._features),(0,r.Z)(this._polylines)&&this._polylines.applyStyle(e,this._features),(0,r.Z)(this._points)&&this._points.applyStyle(e,this._features)},T.prototype.update=function(e,t){var i=!0;if((0,r.Z)(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),i=i&&this._polygons._ready),(0,r.Z)(this._polylines)&&(this._polylines.update(t),i=i&&this._polylines._ready),(0,r.Z)(this._points)&&(this._points.update(t),i=i&&this._points._ready),(0,r.Z)(this._batchTable)&&i&&this._batchTable.update(e,t),!(0,r.Z)(this._contentReadyPromise)){var n=(0,r.Z)(this._points)?this._points.readyPromise:void 0,o=(0,r.Z)(this._polygons)?this._polygons.readyPromise:void 0,s=(0,r.Z)(this._polylines)?this._polylines.readyPromise:void 0,a=this;this._contentReadyPromise=p.Z.all([n,o,s]).then((function(){a._readyPromise.resolve(a)})).otherwise((function(e){a._readyPromise.reject(e)}))}},T.prototype.getPolylinePositions=function(e){var t=this._polylines;if((0,r.Z)(t))return t.getPositions(e)},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,s.Z)(this)},t["Z"]=T},7847:function(e,t,i){var n=i(68591),o=i(48243),r=i(60216),s=i(59947),a=i(62200),c=i(82982),d=i(86511),h=i(72248),l=i(2819),_=i(13222),u=i(73001),f=i(51867),p=i(90082);function g(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,(0,c.Z)(this._center)||((0,c.Z)(this._boundingVolume)?this._center=r.Z.clone(this._boundingVolume.center):this._center=r.Z.clone(r.Z.ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._readyPromise=_.Z.defer(),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=u.Z.BOTH}function m(e){var t=new Float64Array(h.Z.packedLength+r.Z.packedLength),i=0;return r.Z.pack(e._center,t,i),i+=r.Z.packedLength,h.Z.pack(e._modelMatrix,t,i),t}function v(e,t){for(var i=0,n=t[i++],r=t[i++],a=e._boundingVolumes=new Array(r),c=0;c<r;++c)a[c]=o.Z.unpack(t,i),i+=o.Z.packedLength;for(var d=t[i++],h=e._batchedIndices=new Array(d),l=0;l<d;++l){var _=s.Z.unpack(t,i);i+=s.Z.packedLength;for(var u=t[i++],p=t[i++],g=t[i++],m=new Array(g),v=0;v<g;++v)m[v]=t[i++];h[l]=new f.Z({color:_,offset:u,count:p,batchIds:m})}return n}Object.defineProperties(g.prototype,{trianglesLength:{get:function(){return(0,c.Z)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,c.Z)(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise.promise}}}),g.packedBoxLength=h.Z.packedLength+r.Z.packedLength,g.packedCylinderLength=h.Z.packedLength+2,g.packedEllipsoidLength=h.Z.packedLength+r.Z.packedLength,g.packedSphereLength=r.Z.packedLength+1;var Z=new l.Z("createVectorTileGeometries",5),b=new s.Z;function y(e){if(!(0,c.Z)(e._primitive)){if(!(0,c.Z)(e._verticesPromise)){var t=e._boxes,i=e._boxBatchIds,o=e._cylinders,r=e._cylinderBatchIds,s=e._ellipsoids,d=e._ellipsoidBatchIds,h=e._spheres,l=e._sphereBatchIds,_=e._batchTableColors,u=e._packedBuffer;if(!(0,c.Z)(_)){var f=0;(0,c.Z)(e._boxes)&&(t=e._boxes=(0,n.Z)(t),i=e._boxBatchIds=(0,n.Z)(i),f+=i.length),(0,c.Z)(e._cylinders)&&(o=e._cylinders=(0,n.Z)(o),r=e._cylinderBatchIds=(0,n.Z)(r),f+=r.length),(0,c.Z)(e._ellipsoids)&&(s=e._ellipsoids=(0,n.Z)(s),d=e._ellipsoidBatchIds=(0,n.Z)(d),f+=d.length),(0,c.Z)(e._spheres)&&(h=e._sphere=(0,n.Z)(h),l=e._sphereBatchIds=(0,n.Z)(l),f+=l.length),_=e._batchTableColors=new Uint32Array(f);for(var g=e._batchTable,y=0;y<f;++y){var I=g.getColor(y,b);_[y]=I.toRgba()}u=e._packedBuffer=m(e)}var T=[];(0,c.Z)(t)&&T.push(t.buffer,i.buffer),(0,c.Z)(o)&&T.push(o.buffer,r.buffer),(0,c.Z)(s)&&T.push(s.buffer,d.buffer),(0,c.Z)(h)&&T.push(h.buffer,l.buffer),T.push(_.buffer,u.buffer);var C={boxes:(0,c.Z)(t)?t.buffer:void 0,boxBatchIds:(0,c.Z)(t)?i.buffer:void 0,cylinders:(0,c.Z)(o)?o.buffer:void 0,cylinderBatchIds:(0,c.Z)(o)?r.buffer:void 0,ellipsoids:(0,c.Z)(s)?s.buffer:void 0,ellipsoidBatchIds:(0,c.Z)(s)?d.buffer:void 0,spheres:(0,c.Z)(h)?h.buffer:void 0,sphereBatchIds:(0,c.Z)(h)?l.buffer:void 0,batchTableColors:_.buffer,packedBuffer:u.buffer},A=e._verticesPromise=Z.scheduleTask(C,T);if(!(0,c.Z)(A))return;A.then((function(t){var i=new Float64Array(t.packedBuffer),n=v(e,i);e._indices=2===n?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),e._ready=!0}))}e._ready&&!(0,c.Z)(e._primitive)&&(e._primitive=new p.Z({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:(0,a.Z)(e._pickObject,e)}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0,e._readyPromise.resolve())}}g.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},g.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},g.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},g.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},g.prototype.update=function(e){y(this),this._ready&&(this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e))},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,d.Z)(this)},t["Z"]=g},71898:function(e,t,i){var n=i(68591),o=i(60838),r=i(60216),s=i(59947),a=i(82982),c=i(86511),d=i(47861),h=i(50491),l=i(15720),_=i(96190),u=i(2819),f=i(13222),p=i(8044),g=i(81066),m=i(62919),v=i(7017),Z=i(81208),b=i(56764),y=i(60473);function I(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._billboardCollection=void 0,this._labelCollection=void 0,this._polylineCollection=void 0,this._verticesPromise=void 0,this._packedBuffer=void 0,this._ready=!1,this._readyPromise=f.Z.defer(),this._resolvedPromise=!1}function T(e,t){var i=e._rectangle,n=e._minHeight,o=e._maxHeight,r=2+_.Z.packedLength+h.Z.packedLength,s=new Float64Array(r),a=0;return s[a++]=n,s[a++]=o,_.Z.pack(i,s,a),a+=_.Z.packedLength,h.Z.pack(t,s,a),s}Object.defineProperties(I.prototype,{pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){var e=this._billboardCollection.textureAtlas.texture.sizeInBytes,t=this._labelCollection._textureAtlas.texture.sizeInBytes;return e+t}},readyPromise:{get:function(){return this._readyPromise.promise}}});var C=new u.Z("createVectorTilePoints",5),A=new r.Z;function O(e,t){if(!(0,a.Z)(e._billboardCollection)){var i;if(!(0,a.Z)(e._verticesPromise)){i=e._positions;var o=e._packedBuffer;(0,a.Z)(o)||(i=e._positions=(0,n.Z)(i),e._batchIds=(0,n.Z)(e._batchIds),o=e._packedBuffer=T(e,t));var s=[i.buffer,o.buffer],c={positions:i.buffer,packedBuffer:o.buffer},d=e._verticesPromise=C.scheduleTask(c,s);if(!(0,a.Z)(d))return;d.then((function(t){e._positions=new Float64Array(t.positions),e._ready=!0}))}if(e._ready&&!(0,a.Z)(e._billboardCollection)){i=e._positions;var h=e._batchTable,l=e._batchIds,_=e._billboardCollection=new p.Z({batchTable:h}),u=e._labelCollection=new v.Z({batchTable:h}),f=e._polylineCollection=new b.Z;f._useHighlightColor=!0;for(var g=i.length/3,m=0;m<g;++m){var Z=l[m],y=r.Z.unpack(i,3*m,A),I=_.add();I.position=y,I._batchIndex=Z;var O=u.add();O.text=" ",O.position=y,O._batchIndex=Z;var P=f.add();P.positions=[r.Z.clone(y),r.Z.clone(y)]}e._positions=void 0,e._packedBuffer=void 0}}}function P(e,t){for(var i=e._batchIds,n=i.length,r=0;r<n;++r){var a=i[r],c=t[a];c.show=!0,c.pointSize=g.Z.defaultPointSize,c.color=g.Z.defaultColor,c.pointOutlineColor=g.Z.defaultPointOutlineColor,c.pointOutlineWidth=g.Z.defaultPointOutlineWidth,c.labelColor=s.Z.WHITE,c.labelOutlineColor=s.Z.WHITE,c.labelOutlineWidth=1,c.font="30px sans-serif",c.labelStyle=Z.Z.FILL,c.labelText=void 0,c.backgroundColor=new s.Z(.165,.165,.165,.8),c.backgroundPadding=new o.Z(7,5),c.backgroundEnabled=!1,c.scaleByDistance=void 0,c.translucencyByDistance=void 0,c.distanceDisplayCondition=void 0,c.heightOffset=0,c.anchorLineEnabled=!1,c.anchorLineColor=s.Z.WHITE,c.image=void 0,c.disableDepthTestDistance=0,c.horizontalOrigin=m.Z.CENTER,c.verticalOrigin=y.Z.CENTER,c.labelHorizontalOrigin=m.Z.RIGHT,c.labelVerticalOrigin=y.Z.BASELINE}}I.prototype.createFeatures=function(e,t){for(var i=this._billboardCollection,n=this._labelCollection,o=this._polylineCollection,r=this._batchIds,s=r.length,a=0;a<s;++a){var c=r[a],d=i.get(a),h=n.get(a),l=o.get(a);t[c]=new g.Z(e,c,d,h,l)}},I.prototype.applyDebugSettings=function(e,t){e?(s.Z.clone(t,this._billboardCollection._highlightColor),s.Z.clone(t,this._labelCollection._highlightColor),s.Z.clone(t,this._polylineCollection._highlightColor)):(s.Z.clone(s.Z.WHITE,this._billboardCollection._highlightColor),s.Z.clone(s.Z.WHITE,this._labelCollection._highlightColor),s.Z.clone(s.Z.WHITE,this._polylineCollection._highlightColor))};var S=new s.Z,x=new s.Z,L=new s.Z,E=new s.Z,w=new s.Z,N=new s.Z,B=new l.Z,D=new l.Z,k=new d.Z;I.prototype.applyStyle=function(e,t){if((0,a.Z)(e))for(var i=this._batchIds,n=i.length,o=0;o<n;++o){var r=i[o],s=t[r];if((0,a.Z)(e.show)&&(s.show=e.show.evaluate(s)),(0,a.Z)(e.pointSize)&&(s.pointSize=e.pointSize.evaluate(s)),(0,a.Z)(e.color)&&(s.color=e.color.evaluateColor(s,S)),(0,a.Z)(e.pointOutlineColor)&&(s.pointOutlineColor=e.pointOutlineColor.evaluateColor(s,x)),(0,a.Z)(e.pointOutlineWidth)&&(s.pointOutlineWidth=e.pointOutlineWidth.evaluate(s)),(0,a.Z)(e.labelColor)&&(s.labelColor=e.labelColor.evaluateColor(s,L)),(0,a.Z)(e.labelOutlineColor)&&(s.labelOutlineColor=e.labelOutlineColor.evaluateColor(s,E)),(0,a.Z)(e.labelOutlineWidth)&&(s.labelOutlineWidth=e.labelOutlineWidth.evaluate(s)),(0,a.Z)(e.font)&&(s.font=e.font.evaluate(s)),(0,a.Z)(e.labelStyle)&&(s.labelStyle=e.labelStyle.evaluate(s)),(0,a.Z)(e.labelText)?s.labelText=e.labelText.evaluate(s):s.labelText=void 0,(0,a.Z)(e.backgroundColor)&&(s.backgroundColor=e.backgroundColor.evaluateColor(s,w)),(0,a.Z)(e.backgroundPadding)&&(s.backgroundPadding=e.backgroundPadding.evaluate(s)),(0,a.Z)(e.backgroundEnabled)&&(s.backgroundEnabled=e.backgroundEnabled.evaluate(s)),(0,a.Z)(e.scaleByDistance)){var c=e.scaleByDistance.evaluate(s);B.near=c.x,B.nearValue=c.y,B.far=c.z,B.farValue=c.w,s.scaleByDistance=B}else s.scaleByDistance=void 0;if((0,a.Z)(e.translucencyByDistance)){var d=e.translucencyByDistance.evaluate(s);D.near=d.x,D.nearValue=d.y,D.far=d.z,D.farValue=d.w,s.translucencyByDistance=D}else s.translucencyByDistance=void 0;if((0,a.Z)(e.distanceDisplayCondition)){var h=e.distanceDisplayCondition.evaluate(s);k.near=h.x,k.far=h.y,s.distanceDisplayCondition=k}else s.distanceDisplayCondition=void 0;(0,a.Z)(e.heightOffset)&&(s.heightOffset=e.heightOffset.evaluate(s)),(0,a.Z)(e.anchorLineEnabled)&&(s.anchorLineEnabled=e.anchorLineEnabled.evaluate(s)),(0,a.Z)(e.anchorLineColor)&&(s.anchorLineColor=e.anchorLineColor.evaluateColor(s,N)),(0,a.Z)(e.image)?s.image=e.image.evaluate(s):s.image=void 0,(0,a.Z)(e.disableDepthTestDistance)&&(s.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(s)),(0,a.Z)(e.horizontalOrigin)&&(s.horizontalOrigin=e.horizontalOrigin.evaluate(s)),(0,a.Z)(e.verticalOrigin)&&(s.verticalOrigin=e.verticalOrigin.evaluate(s)),(0,a.Z)(e.labelHorizontalOrigin)&&(s.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(s)),(0,a.Z)(e.labelVerticalOrigin)&&(s.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(s))}else P(this,t)},I.prototype.update=function(e){O(this,e.mapProjection.ellipsoid),this._ready&&(this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e),this._resolvedPromise||(this._readyPromise.resolve(),this._resolvedPromise=!0))},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),(0,c.Z)(this)},t["Z"]=I},62942:function(e,t,i){var n=i(68591),o=i(60216),r=i(59947),s=i(62200),a=i(82982),c=i(86511),d=i(50491),h=i(22832),l=i(25405),_=i(96190),u=i(2819),f=i(13222),p=i(73001),g=i(51867),m=i(90082);function v(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=(0,s.Z)(e.ellipsoid,d.Z.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=(0,s.Z)(e.center,o.Z.ZERO),this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._readyPromise=f.Z.defer(),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=p.Z.BOTH}function Z(e){var t=new Float64Array(3+o.Z.packedLength+d.Z.packedLength+_.Z.packedLength),i=0;return t[i++]=e._indices.BYTES_PER_ELEMENT,t[i++]=e._minimumHeight,t[i++]=e._maximumHeight,o.Z.pack(e._center,t,i),i+=o.Z.packedLength,d.Z.pack(e._ellipsoid,t,i),i+=d.Z.packedLength,_.Z.pack(e._rectangle,t,i),t}function b(e,t){for(var i=1,n=t[i++],o=e._boundingVolumes=new Array(n),s=0;s<n;++s)o[s]=l.Z.unpack(t,i),i+=l.Z.packedLength;for(var a=t[i++],c=e._batchedIndices=new Array(a),d=0;d<a;++d){var h=r.Z.unpack(t,i);i+=r.Z.packedLength;for(var _=t[i++],u=t[i++],f=t[i++],p=new Array(f),m=0;m<f;++m)p[m]=t[i++];c[d]=new g.Z({color:h,offset:_,count:u,batchIds:p})}}Object.defineProperties(v.prototype,{trianglesLength:{get:function(){return(0,a.Z)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,a.Z)(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise.promise}}});var y=new u.Z("createVectorTilePolygons",5),I=new r.Z;function T(e){if(!(0,a.Z)(e._primitive)){if(!(0,a.Z)(e._verticesPromise)){var t=e._positions,i=e._counts,o=e._indexCounts,r=e._indices,s=e._transferrableBatchIds,c=e._batchTableColors,d=e._packedBuffer;if(!(0,a.Z)(c)){t=e._positions=(0,n.Z)(e._positions),i=e._counts=(0,n.Z)(e._counts),o=e._indexCounts=(0,n.Z)(e._indexCounts),r=e._indices=(0,n.Z)(e._indices),e._center=e._ellipsoid.cartographicToCartesian(_.Z.center(e._rectangle)),s=e._transferrableBatchIds=new Uint32Array(e._batchIds),c=e._batchTableColors=new Uint32Array(s.length);for(var l=e._batchTable,u=c.length,p=0;p<u;++p){var g=l.getColor(p,I);c[p]=g.toRgba()}d=e._packedBuffer=Z(e)}var v=[t.buffer,i.buffer,o.buffer,r.buffer,s.buffer,c.buffer,d.buffer],T={packedBuffer:d.buffer,positions:t.buffer,counts:i.buffer,indexCounts:o.buffer,indices:r.buffer,batchIds:s.buffer,batchTableColors:c.buffer},C=e._polygonMinimumHeights,A=e._polygonMaximumHeights;(0,a.Z)(C)&&(0,a.Z)(A)&&(C=(0,n.Z)(C),A=(0,n.Z)(A),v.push(C.buffer,A.buffer),T.minimumHeights=C,T.maximumHeights=A);var O=e._verticesPromise=y.scheduleTask(T,v);if(!(0,a.Z)(O))return;(0,f.Z)(O,(function(t){e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;var i=new Float64Array(t.packedBuffer),n=i[0];b(e,i),e._indices=2===h.Z.getSizeInBytes(n)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),e._ready=!0}))}e._ready&&!(0,a.Z)(e._primitive)&&(e._primitive=new m.Z({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._verticesPromise=void 0,e._readyPromise.resolve())}}v.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},v.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},v.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},v.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},v.prototype.update=function(e){T(this),this._ready&&(this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e))},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,c.Z)(this)},t["Z"]=v},6220:function(e,t,i){var n=i(68591),o=i(60216),r=i(59947),s=i(84828),a=i(62200),c=i(82982),d=i(86511),h=i(50491),l=i(96037),_=i(22832),u=i(72248),f=i(96190),p=i(2819),g=i(99095),m=i(58597),v=i(60072),Z=i(8379),b=i(10667),y=i(46588),I=i(53642),T=i(18192),C=i(94373),A=i(58678),O=i(13222),P=i(13633),S=i(52381);function x(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=(0,a.Z)(e.ellipsoid,h.Z.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=r.Z.clone(r.Z.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._readyPromise=O.Z.defer(),this._verticesPromise=void 0}function L(e){var t=e._rectangle,i=e._minimumHeight,n=e._maximumHeight,r=e._ellipsoid,s=e._center,a=2+f.Z.packedLength+h.Z.packedLength+o.Z.packedLength,c=new Float64Array(a),d=0;return c[d++]=i,c[d++]=n,f.Z.pack(t,c,d),d+=f.Z.packedLength,h.Z.pack(r,c,d),d+=h.Z.packedLength,o.Z.pack(s,c,d),c}Object.defineProperties(x.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise.promise}}});var E=new p.Z("createVectorTilePolylines",5),w={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};function N(e,t){if(!(0,c.Z)(e._va)){if(!(0,c.Z)(e._verticesPromise)){var i=e._positions,o=e._widths,r=e._counts,a=e._transferrableBatchIds,d=e._packedBuffer;(0,c.Z)(d)||(i=e._positions=(0,n.Z)(i),o=e._widths=(0,n.Z)(o),r=e._counts=(0,n.Z)(r),a=e._transferrableBatchIds=(0,n.Z)(e._batchIds),d=e._packedBuffer=L(e));var h=[i.buffer,o.buffer,r.buffer,a.buffer,d.buffer],l={positions:i.buffer,widths:o.buffer,counts:r.buffer,batchIds:a.buffer,packedBuffer:d.buffer,keepDecodedPositions:e._keepDecodedPositions},u=e._verticesPromise=E.scheduleTask(l,h);if(!(0,c.Z)(u))return;(0,O.Z)(u).then((function(t){e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(t.decodedPositions),e._decodedPositionOffsets=new Uint32Array(t.decodedPositionOffsets)),e._currentPositions=new Float32Array(t.currentPositions),e._previousPositions=new Float32Array(t.previousPositions),e._nextPositions=new Float32Array(t.nextPositions),e._expandAndWidth=new Float32Array(t.expandAndWidth),e._vertexBatchIds=new Uint16Array(t.batchIds);var i=t.indexDatatype;e._indices=i===_.Z.UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0})).otherwise((function(t){e._readyPromise.reject(t)}))}if(e._ready&&!(0,c.Z)(e._va)){var f=e._currentPositions,p=e._previousPositions,v=e._nextPositions,Z=e._expandAndWidth,b=e._vertexBatchIds,y=e._indices,I=p.byteLength+f.byteLength+v.byteLength;I+=Z.byteLength+b.byteLength+y.byteLength,e._trianglesLength=y.length/3,e._geometryByteLength=I;var C=g.Z.createVertexBuffer({context:t,typedArray:p,usage:m.Z.STATIC_DRAW}),A=g.Z.createVertexBuffer({context:t,typedArray:f,usage:m.Z.STATIC_DRAW}),P=g.Z.createVertexBuffer({context:t,typedArray:v,usage:m.Z.STATIC_DRAW}),S=g.Z.createVertexBuffer({context:t,typedArray:Z,usage:m.Z.STATIC_DRAW}),x=g.Z.createVertexBuffer({context:t,typedArray:b,usage:m.Z.STATIC_DRAW}),N=g.Z.createIndexBuffer({context:t,typedArray:y,usage:m.Z.STATIC_DRAW,indexDatatype:2===y.BYTES_PER_ELEMENT?_.Z.UNSIGNED_SHORT:_.Z.UNSIGNED_INT}),B=[{index:w.previousPosition,vertexBuffer:C,componentDatatype:s.Z.FLOAT,componentsPerAttribute:3},{index:w.currentPosition,vertexBuffer:A,componentDatatype:s.Z.FLOAT,componentsPerAttribute:3},{index:w.nextPosition,vertexBuffer:P,componentDatatype:s.Z.FLOAT,componentsPerAttribute:3},{index:w.expandAndWidth,vertexBuffer:S,componentDatatype:s.Z.FLOAT,componentsPerAttribute:2},{index:w.a_batchId,vertexBuffer:x,componentDatatype:s.Z.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new T.Z({context:t,attributes:B,indexBuffer:N}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0,e._readyPromise.resolve()}}}var B=new u.Z,D=new o.Z;function k(e,t){(0,c.Z)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){var i=t.uniformState.view;return u.Z.clone(i,B),u.Z.multiplyByPoint(B,e._center,D),u.Z.setTranslation(B,D,B),B},u_highlightColor:function(){return e._highlightColor}})}function H(e){if(!(0,c.Z)(e._rs)){var t={enabled:!0,factor:-5,units:-5};e._rs=b.Z.fromCache({blending:P.Z.ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:t})}}var R="uniform vec4 u_highlightColor; \nvoid main()\n{\n    gl_FragColor = u_highlightColor;\n}\n";function M(e,t){if(!(0,c.Z)(e._sp)){var i=e._batchTable,n=i.getVertexShaderCallback(!1,"a_batchId",void 0)(A.Z),o=i.getFragmentShaderCallback(!1,void 0,!1)(R),r=new I.Z({defines:["VECTOR_TILE",l.Z.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[C.Z,n]}),s=new I.Z({defines:["VECTOR_TILE"],sources:[o]});e._sp=y.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:w})}}function U(e,t){if(!(0,c.Z)(e._command)){var i=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new v.Z({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:i,boundingVolume:e._boundingVolume,pass:Z.Z.TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}function F(e,t){for(var i=e._batchIds,n=i.length,o=0;o<n;++o){var s=i[o],a=t[s];a.show=!0,a.color=r.Z.WHITE}}x.getPolylinePositions=function(e,t){var i=e._batchIds,n=e._decodedPositions,o=e._decodedPositionOffsets;if((0,c.Z)(i)&&(0,c.Z)(n)){var r,s,a=i.length,d=0,h=0;for(r=0;r<a;++r)i[r]===t&&(d+=o[r+1]-o[r]);if(0!==d){var l=new Float64Array(3*d);for(r=0;r<a;++r)if(i[r]===t){var _=o[r],u=o[r+1]-_;for(s=0;s<u;++s){var f=3*(_+s);l[h++]=n[f],l[h++]=n[f+1],l[h++]=n[f+2]}}return l}}},x.prototype.getPositions=function(e){return x.getPolylinePositions(this,e)},x.prototype.createFeatures=function(e,t){for(var i=this._batchIds,n=i.length,o=0;o<n;++o){var r=i[o];t[r]=new S.Z(e,r)}},x.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var V=new r.Z,W=r.Z.WHITE,G=!0;x.prototype.applyStyle=function(e,t){if((0,c.Z)(e))for(var i=this._batchIds,n=i.length,o=0;o<n;++o){var r=i[o],s=t[r];s.color=(0,c.Z)(e.color)?e.color.evaluateColor(s,V):W,s.show=(0,c.Z)(e.show)?e.show.evaluate(s):G}else F(this,t)},x.prototype.update=function(e){var t=e.context;if(N(this,t),k(this,t),M(this,t),H(this),this._ready){var i=e.passes;(i.render||i.pick)&&U(this,e)}},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,d.Z)(this)},t["Z"]=x},90082:function(e,t,i){var n=i(60216),o=i(59947),r=i(84828),s=i(62200),a=i(82982),c=i(86511),d=i(22832),h=i(72248),l=i(97264),_=i(99095),u=i(58597),f=i(60072),p=i(8379),g=i(10667),m=i(46588),v=i(53642),Z=i(18192),b=i(79863),y=i(54867),I=i(13633),T=i(52381),C=i(73001),A=i(7976),O=i(19427),P=i(87233),S=i(77053),x=i(81255),L=i(51867);function E(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=(0,s.Z)(e.center,n.Z.ZERO),this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=o.Z.clone(o.Z.WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=(0,s.Z)(e.classificationType,C.Z.BOTH),this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};for(var t=this._batchIds.length,i=0;i<t;++i){var r=this._batchIds[i];this._batchIdLookUp[r]=i}}Object.defineProperties(E.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});var w={position:0,a_batchId:1};function N(e,t){if(!(0,a.Z)(e._va)){var i=_.Z.createVertexBuffer({context:t,typedArray:e._positions,usage:u.Z.STATIC_DRAW}),n=_.Z.createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:u.Z.STATIC_DRAW}),o=_.Z.createIndexBuffer({context:t,typedArray:e._indices,usage:u.Z.DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?d.Z.UNSIGNED_SHORT:d.Z.UNSIGNED_INT}),s=[{index:0,vertexBuffer:i,componentDatatype:r.Z.fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:n,componentDatatype:r.Z.fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new Z.Z({context:t,attributes:s,indexBuffer:o}),t.webgl2&&(e._vaSwap=new Z.Z({context:t,attributes:s,indexBuffer:_.Z.createIndexBuffer({context:t,sizeInBytes:o.sizeInBytes,usage:u.Z.DYNAMIC_DRAW,indexDatatype:o.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._verticesPromise=void 0}}function B(e,t){if(!(0,a.Z)(e._sp)){var i=e._batchTable,n=(0,s.Z)(e._attributeLocations,w),o=e._pickId,r=e._vertexShaderSource,c=e._fragmentShaderSource;if((0,a.Z)(r))return e._sp=m.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:n}),e._spStencil=e._sp,c=v.Z.replaceMain(c,"czm_non_pick_main"),c=c+"void main() \n{ \n    czm_non_pick_main(); \n    gl_FragColor = "+o+"; \n} \n",void(e._spPick=m.Z.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:n}));var d=i.getVertexShaderCallback(!1,"a_batchId",void 0)(y.Z),h=i.getFragmentShaderCallback(!1,void 0,!0)(b.Z);o=i.getPickId();var l=new v.Z({sources:[d]}),_=new v.Z({defines:["VECTOR_TILE"],sources:[h]});e._sp=m.Z.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:_,attributeLocations:n}),l=new v.Z({sources:[y.Z]}),_=new v.Z({defines:["VECTOR_TILE"],sources:[b.Z]}),e._spStencil=m.Z.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:_,attributeLocations:n}),h=v.Z.replaceMain(h,"czm_non_pick_main"),h=h+"\nvoid main() \n{ \n    czm_non_pick_main(); \n    gl_FragColor = "+o+"; \n} \n";var u=new v.Z({sources:[d]}),f=new v.Z({defines:["VECTOR_TILE"],sources:[h]});e._spPick=m.Z.fromCache({context:t,vertexShaderSource:u,fragmentShaderSource:f,attributeLocations:n})}}function D(e){var t=e?S.Z.EQUAL:S.Z.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:x.Z.KEEP,zFail:x.Z.DECREMENT_WRAP,zPass:x.Z.KEEP},backFunction:t,backOperation:{fail:x.Z.KEEP,zFail:x.Z.INCREMENT_WRAP,zPass:x.Z.KEEP},reference:P.Z.CESIUM_3D_TILE_MASK,mask:P.Z.CESIUM_3D_TILE_MASK},stencilMask:P.Z.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:A.Z.LESS_OR_EQUAL},depthMask:!1}}var k={stencilTest:{enabled:!0,frontFunction:S.Z.NOT_EQUAL,frontOperation:{fail:x.Z.ZERO,zFail:x.Z.ZERO,zPass:x.Z.ZERO},backFunction:S.Z.NOT_EQUAL,backOperation:{fail:x.Z.ZERO,zFail:x.Z.ZERO,zPass:x.Z.ZERO},reference:0,mask:P.Z.CLASSIFICATION_MASK},stencilMask:P.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:I.Z.PRE_MULTIPLIED_ALPHA_BLEND},H={stencilTest:{enabled:!0,frontFunction:S.Z.NOT_EQUAL,frontOperation:{fail:x.Z.ZERO,zFail:x.Z.ZERO,zPass:x.Z.ZERO},backFunction:S.Z.NOT_EQUAL,backOperation:{fail:x.Z.ZERO,zFail:x.Z.ZERO,zPass:x.Z.ZERO},reference:0,mask:P.Z.CLASSIFICATION_MASK},stencilMask:P.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function R(e){(0,a.Z)(e._rsStencilDepthPass)||(e._rsStencilDepthPass=g.Z.fromCache(D(!1)),e._rsStencilDepthPass3DTiles=g.Z.fromCache(D(!0)),e._rsColorPass=g.Z.fromCache(k),e._rsPickPass=g.Z.fromCache(H))}var M=new h.Z,U=new n.Z;function F(e,t){if(!(0,a.Z)(e._uniformMap)){var i={u_modifiedModelViewProjection:function(){var i=t.uniformState.view,n=t.uniformState.projection;return h.Z.clone(i,M),h.Z.multiplyByPoint(M,e._center,U),h.Z.setTranslation(M,U,M),h.Z.multiply(n,M,M),M},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(i)}}function V(e,t,i,n,o,r,s){for(var a=e.constructor.BYTES_PER_ELEMENT,c=r.length,d=0;d<c;++d){var h=r[d],l=s[h],_=n[l],u=o[l],f=new e.constructor(e.buffer,a*_,u);t.set(f,i),n[l]=i,i+=u}return i}function W(e,t){var i=e._indices,n=e._indexOffsets,r=e._indexCounts,s=e._batchIdLookUp,a=new i.constructor(i.length),c=t.pop(),d=[c],h=V(i,a,0,n,r,c.batchIds,s);c.offset=0,c.count=h;while(t.length>0){var l=t.pop();if(o.Z.equals(l.color,c.color))h=V(i,a,h,n,r,l.batchIds,s),c.batchIds=c.batchIds.concat(l.batchIds),c.count=h-c.offset;else{var _=h;h=V(i,a,h,n,r,l.batchIds,s),l.offset=_,l.count=h-_,d.push(l),c=l}}e._va.indexBuffer.copyFromArrayView(a),e._indices=a,e._batchedIndices=d}function G(e,t,i,n,o,r,s){for(var a=e.bytesPerIndex,c=r.length,d=0;d<c;++d){var h=r[d],l=s[h],_=n[l],u=o[l];t.copyFromBuffer(e,_*a,i*a,u*a),n[l]=i,i+=u}return i}function z(e,t){var i=e._indexOffsets,n=e._indexCounts,r=e._batchIdLookUp,s=t.pop(),a=[s],c=e._va.indexBuffer,d=e._vaSwap.indexBuffer,h=G(c,d,0,i,n,s.batchIds,r);s.offset=0,s.count=h;while(t.length>0){var l=t.pop();if(o.Z.equals(l.color,s.color))h=G(c,d,h,i,n,l.batchIds,r),s.batchIds=s.batchIds.concat(l.batchIds),s.count=h-s.offset;else{var _=h;h=G(c,d,h,i,n,l.batchIds,r),l.offset=_,l.count=h-_,a.push(l),s=l}}var u=e._va;e._va=e._vaSwap,e._vaSwap=u,e._batchedIndices=a}function Y(e,t){return t.color.toRgba()-e.color.toRgba()}function K(e,t){if(!e._batchDirty)return!1;for(var i=e._batchedIndices,n=i.length,o=!1,r={},s=0;s<n;++s){var c=i[s].color,d=c.toRgba();if((0,a.Z)(r[d])){o=!0;break}r[d]=!0}return o?o&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(i.sort(Y),t.webgl2?z(e,i):W(e,i),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}function j(e,t){var i=K(e,t),n=e._commands,o=e._batchedIndices,r=o.length,c=2*r;if(!(0,a.Z)(n)||i||n.length!==c){n.length=c;for(var d=e._va,l=e._sp,_=(0,s.Z)(e._modelMatrix,h.Z.IDENTITY),u=e._uniformMap,g=e._boundingVolume,m=0;m<r;++m){var v=o[m].offset,Z=o[m].count,b=n[2*m];(0,a.Z)(b)||(b=n[2*m]=new f.Z({owner:e})),b.vertexArray=d,b.modelMatrix=_,b.offset=v,b.count=Z,b.renderState=e._rsStencilDepthPass,b.shaderProgram=l,b.uniformMap=u,b.boundingVolume=g,b.cull=!1,b.pass=p.Z.TERRAIN_CLASSIFICATION;var y=f.Z.shallowClone(b,b.derivedCommands.tileset);y.renderState=e._rsStencilDepthPass3DTiles,y.pass=p.Z.CESIUM_3D_TILE_CLASSIFICATION,b.derivedCommands.tileset=y;var I=n[2*m+1];(0,a.Z)(I)||(I=n[2*m+1]=new f.Z({owner:e})),I.vertexArray=d,I.modelMatrix=_,I.offset=v,I.count=Z,I.renderState=e._rsColorPass,I.shaderProgram=l,I.uniformMap=u,I.boundingVolume=g,I.cull=!1,I.pass=p.Z.TERRAIN_CLASSIFICATION;var T=f.Z.shallowClone(I,I.derivedCommands.tileset);T.pass=p.Z.CESIUM_3D_TILE_CLASSIFICATION,I.derivedCommands.tileset=T}e._commandsDirty=!0}}function X(e,t){if(e.classificationType!==C.Z.TERRAIN&&t.invertClassification&&(!(0,a.Z)(e._commandsIgnoreShow)||e._commandsDirty)){for(var i=e._commands,n=e._commandsIgnoreShow,o=e._spStencil,r=i.length,s=n.length=r/2,c=0,d=0;d<s;++d){var h=n[d]=f.Z.shallowClone(i[c],n[d]);h.shaderProgram=o,h.pass=p.Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,c+=2}e._commandsDirty=!1}}function Q(e){if(e._pickCommandsDirty){var t=e._indexOffsets.length,i=e._pickCommands;i.length=2*t;for(var n=e._va,o=e._spStencil,r=e._spPick,c=(0,s.Z)(e._modelMatrix,h.Z.IDENTITY),d=e._uniformMap,l=0;l<t;++l){var _=e._indexOffsets[l],u=e._indexCounts[l],g=(0,a.Z)(e._boundingVolumes)?e._boundingVolumes[l]:e.boundingVolume,m=i[2*l];(0,a.Z)(m)||(m=i[2*l]=new f.Z({owner:e,pickOnly:!0})),m.vertexArray=n,m.modelMatrix=c,m.offset=_,m.count=u,m.renderState=e._rsStencilDepthPass,m.shaderProgram=o,m.uniformMap=d,m.boundingVolume=g,m.pass=p.Z.TERRAIN_CLASSIFICATION;var v=f.Z.shallowClone(m,m.derivedCommands.tileset);v.renderState=e._rsStencilDepthPass3DTiles,v.pass=p.Z.CESIUM_3D_TILE_CLASSIFICATION,m.derivedCommands.tileset=v;var Z=i[2*l+1];(0,a.Z)(Z)||(Z=i[2*l+1]=new f.Z({owner:e,pickOnly:!0})),Z.vertexArray=n,Z.modelMatrix=c,Z.offset=_,Z.count=u,Z.renderState=e._rsPickPass,Z.shaderProgram=r,Z.uniformMap=d,Z.boundingVolume=g,Z.pass=p.Z.TERRAIN_CLASSIFICATION;var b=f.Z.shallowClone(Z,Z.derivedCommands.tileset);b.pass=p.Z.CESIUM_3D_TILE_CLASSIFICATION,Z.derivedCommands.tileset=b}e._pickCommandsDirty=!1}}function J(e,t){e._updatingAllCommands=!0;var i,n=e._batchIds,r=n.length;for(i=0;i<r;++i){var s=n[i],a=t[s];a.show=!0,a.color=o.Z.WHITE}var c=e._batchedIndices;for(r=c.length,i=0;i<r;++i)c[i].color=o.Z.clone(o.Z.WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}E.prototype.createFeatures=function(e,t){for(var i=this._batchIds,n=i.length,o=0;o<n;++o){var r=i[o];t[r]=new T.Z(e,r)}},E.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var q=new o.Z,$=o.Z.WHITE,ee=!0,te=/\$/;function ie(e,t,i,n){var o,r,s=e.classificationType,c=s!==C.Z.CESIUM_3D_TILE,d=s!==C.Z.TERRAIN,h=t.commandList,l=i.length;for(r=0;r<l;++r)c&&(o=i[r],o.pass=p.Z.TERRAIN_CLASSIFICATION,h.push(o)),d&&(o=i[r].derivedCommands.tileset,o.pass=p.Z.CESIUM_3D_TILE_CLASSIFICATION,h.push(o));if(t.invertClassification&&(0,a.Z)(n))for(l=n.length,r=0;r<l;++r)h.push(n[r])}function ne(e,t){for(var i=e.commandList,n=t.length,o=0;o<n;o+=2){var r=t[o+1];r.pass=p.Z.OPAQUE,i.push(r)}}function oe(e){var t=e.debugWireframe===e._debugWireframe;if(t=t&&!(e.debugWireframe&&e._wireframeDirty),!t){var i,n;(0,a.Z)(e._rsWireframe)||(e._rsWireframe=g.Z.fromCache({})),e.debugWireframe?(i=e._rsWireframe,n=l.Z.LINES):(i=e._rsColorPass,n=l.Z.TRIANGLES);for(var o=e._commands,r=o.length,s=0;s<r;s+=2){var c=o[s+1];c.renderState=i,c.primitiveType=n}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}}E.prototype.applyStyle=function(e,t){if((0,a.Z)(e)){var i=e.color,n=i instanceof O.Z&&!te.test(i.expression);this._updatingAllCommands=n;var r,s=this._batchIds,c=s.length;for(r=0;r<c;++r){var d=s[r],h=t[d];h.color=(0,a.Z)(e.color)?e.color.evaluateColor(h,q):$,h.show=(0,a.Z)(e.show)?e.show.evaluate(h):ee}if(n){var l=this._batchedIndices;for(c=l.length,r=0;r<c;++r)l[r].color=o.Z.clone(o.Z.WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}}else J(this,t)},E.prototype.updateCommands=function(e,t){if(!this._updatingAllCommands){var i=this._batchIdLookUp,n=i[e];if((0,a.Z)(n)){var r,s=this._indexOffsets,c=this._indexCounts,d=s[n],h=c[n],l=this._batchedIndices,_=l.length;for(r=0;r<_;++r){var u=l[r].offset,f=l[r].count;if(d>=u&&d<u+f)break}l.push(new L.Z({color:o.Z.clone(t),offset:d,count:h,batchIds:[e]}));for(var p=[],g=[],m=l[r].batchIds,v=m.length,Z=0;Z<v;++Z){var b=m[Z];if(b!==e){var y=i[b];s[y]<d?p.push(b):g.push(b)}}0!==g.length&&l.push(new L.Z({color:o.Z.clone(l[r].color),offset:d+h,count:l[r].offset+l[r].count-(d+h),batchIds:g})),0!==p.length?(l[r].count=d-l[r].offset,l[r].batchIds=p):l.splice(r,1),this._batchDirty=!0}}},E.prototype.update=function(e){var t=e.context;N(this,t),B(this,t),R(this),F(this,t);var i=e.passes;i.render&&(j(this,t),X(this,e),oe(this),this._debugWireframe?ne(e,this._commands):ie(this,e,this._commands,this._commandsIgnoreShow)),i.pick&&(Q(this),ie(this,e,this._pickCommands))},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),(0,c.Z)(this)},t["Z"]=E},26998:function(e,t,i){var n=i(66553),o=i(82982),r=i(12572),s={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"FEATURE_ID"};function a(e){switch(e){case s.POSITION:return"position";case s.NORMAL:return"normal";case s.TANGENT:return"tangent";case s.TEXCOORD:return"texCoord";case s.COLOR:return"color";case s.JOINTS:return"joints";case s.WEIGHTS:return"weights";case s.FEATURE_ID:return"featureId";default:throw new r.Z("semantic is not a valid value.")}}s.hasSetIndex=function(e){switch(n.Z.typeOf.string("semantic",e),e){case s.POSITION:case s.NORMAL:case s.TANGENT:return!1;case s.TEXCOORD:case s.COLOR:case s.JOINTS:case s.WEIGHTS:case s.FEATURE_ID:return!0;default:throw new r.Z("semantic is not a valid value.")}},s.fromGltfSemantic=function(e){n.Z.typeOf.string("gltfSemantic",e);var t=e,i=/^(\w+)_\d+$/,o=i.exec(e);switch(null!==o&&(t=o[1]),t){case"POSITION":return s.POSITION;case"NORMAL":return s.NORMAL;case"TANGENT":return s.TANGENT;case"TEXCOORD":return s.TEXCOORD;case"COLOR":return s.COLOR;case"JOINTS":return s.JOINTS;case"WEIGHTS":return s.WEIGHTS;case"_FEATURE_ID":case"_BATCHID":case"BATCHID":return s.FEATURE_ID}},s.fromPntsSemantic=function(e){switch(n.Z.typeOf.string("pntsSemantic",e),e){case"POSITION":case"POSITION_QUANTIZED":return s.POSITION;case"RGBA":case"RGB":case"RGB565":return s.COLOR;case"NORMAL":case"NORMAL_OCT16P":return s.NORMAL;case"BATCH_ID":return s.FEATURE_ID;default:throw new r.Z("pntsSemantic is not a valid value.")}},s.getGlslType=function(e){switch(n.Z.typeOf.string("semantic",e),e){case s.POSITION:case s.NORMAL:case s.TANGENT:return"vec3";case s.TEXCOORD:return"vec2";case s.COLOR:return"vec4";case s.JOINTS:return"ivec4";case s.WEIGHTS:return"vec4";case s.FEATURE_ID:return"int";default:throw new r.Z("semantic is not a valid value.")}},s.getVariableName=function(e,t){n.Z.typeOf.string("semantic",e);var i=a(e);return(0,o.Z)(t)&&(i+="_"+t),i},t["Z"]=Object.freeze(s)},60473:function(e,t){var i={CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1};t["Z"]=Object.freeze(i)}}]);
//# sourceMappingURL=chunk-vendors-e0c7e584.a7ffc9a6.js.map