"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[9180],{70265:function(i,t,e){var o=e(12572);function n(){o.Z.throwInstantiationError()}Object.defineProperties(n.prototype,{name:{get:o.Z.throwInstantiationError},clock:{get:o.Z.throwInstantiationError},entities:{get:o.Z.throwInstantiationError},isLoading:{get:o.Z.throwInstantiationError},changedEvent:{get:o.Z.throwInstantiationError},errorEvent:{get:o.Z.throwInstantiationError},loadingEvent:{get:o.Z.throwInstantiationError},show:{get:o.Z.throwInstantiationError},clustering:{get:o.Z.throwInstantiationError}}),n.prototype.update=function(i){o.Z.throwInstantiationError()},n.setLoading=function(i,t){i._isLoading!==t&&(t?i._entityCollection.suspendEvents():i._entityCollection.resumeEvents(),i._isLoading=t,i._loading.raiseEvent(i,t))},t["Z"]=n},91419:function(i,t,e){var o=e(95884),n=e(62200),s=e(82982),r=e(12572),a=e(14459),l=e(55293),d=e(33054);function h(){this._definitionChanged=new a.Z,this._startTime=void 0,this._stopTime=void 0,this._currentTime=void 0,this._clockRange=void 0,this._clockStep=void 0,this._multiplier=void 0}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},startTime:(0,d.Z)("startTime"),stopTime:(0,d.Z)("stopTime"),currentTime:(0,d.Z)("currentTime"),clockRange:(0,d.Z)("clockRange"),clockStep:(0,d.Z)("clockStep"),multiplier:(0,d.Z)("multiplier")}),h.prototype.clone=function(i){return(0,s.Z)(i)||(i=new h),i.startTime=this.startTime,i.stopTime=this.stopTime,i.currentTime=this.currentTime,i.clockRange=this.clockRange,i.clockStep=this.clockStep,i.multiplier=this.multiplier,i},h.prototype.equals=function(i){return this===i||(0,s.Z)(i)&&l.Z.equals(this.startTime,i.startTime)&&l.Z.equals(this.stopTime,i.stopTime)&&l.Z.equals(this.currentTime,i.currentTime)&&this.clockRange===i.clockRange&&this.clockStep===i.clockStep&&this.multiplier===i.multiplier},h.prototype.merge=function(i){if(!(0,s.Z)(i))throw new r.Z("source is required.");this.startTime=(0,n.Z)(this.startTime,i.startTime),this.stopTime=(0,n.Z)(this.stopTime,i.stopTime),this.currentTime=(0,n.Z)(this.currentTime,i.currentTime),this.clockRange=(0,n.Z)(this.clockRange,i.clockRange),this.clockStep=(0,n.Z)(this.clockStep,i.clockStep),this.multiplier=(0,n.Z)(this.multiplier,i.multiplier)},h.prototype.getValue=function(i){return(0,s.Z)(i)||(i=new o.Z),i.startTime=(0,n.Z)(this.startTime,i.startTime),i.stopTime=(0,n.Z)(this.stopTime,i.stopTime),i.currentTime=(0,n.Z)(this.currentTime,i.currentTime),i.clockRange=(0,n.Z)(this.clockRange,i.clockRange),i.multiplier=(0,n.Z)(this.multiplier,i.multiplier),i.clockStep=(0,n.Z)(this.clockStep,i.clockStep),i},t["Z"]=h},81992:function(i,t,e){var o=e(62200),n=e(82982),s=e(86511),r=e(12572),a=e(14459),l=e(99417),d=e(13222);function h(){this._dataSources=[],this._dataSourceAdded=new a.Z,this._dataSourceRemoved=new a.Z,this._dataSourceMoved=new a.Z}function u(i,t){if(!(0,n.Z)(t))throw new r.Z("dataSource is required.");var e=i.indexOf(t);if(-1===e)throw new r.Z("dataSource is not in this collection.");return e}function c(i,t,e){var o=i._dataSources,n=o.length-1;if(t=l.Z.clamp(t,0,n),e=l.Z.clamp(e,0,n),t!==e){var s=o[t];o[t]=o[e],o[e]=s,i.dataSourceMoved.raiseEvent(s,e,t)}}Object.defineProperties(h.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}},dataSourceMoved:{get:function(){return this._dataSourceMoved}}}),h.prototype.add=function(i){if(!(0,n.Z)(i))throw new r.Z("dataSource is required.");var t=this,e=this._dataSources;return(0,d.Z)(i,(function(i){return e===t._dataSources&&(t._dataSources.push(i),t._dataSourceAdded.raiseEvent(t,i)),i}))},h.prototype.remove=function(i,t){t=(0,o.Z)(t,!1);var e=this._dataSources.indexOf(i);return-1!==e&&(this._dataSources.splice(e,1),this._dataSourceRemoved.raiseEvent(this,i),t&&"function"===typeof i.destroy&&i.destroy(),!0)},h.prototype.removeAll=function(i){i=(0,o.Z)(i,!1);for(var t=this._dataSources,e=0,n=t.length;e<n;++e){var s=t[e];this._dataSourceRemoved.raiseEvent(this,s),i&&"function"===typeof s.destroy&&s.destroy()}this._dataSources=[]},h.prototype.contains=function(i){return-1!==this.indexOf(i)},h.prototype.indexOf=function(i){return this._dataSources.indexOf(i)},h.prototype.get=function(i){if(!(0,n.Z)(i))throw new r.Z("index is required.");return this._dataSources[i]},h.prototype.getByName=function(i){if(!(0,n.Z)(i))throw new r.Z("name is required.");return this._dataSources.filter((function(t){return t.name===i}))},h.prototype.raise=function(i){var t=u(this._dataSources,i);c(this,t,t+1)},h.prototype.lower=function(i){var t=u(this._dataSources,i);c(this,t,t-1)},h.prototype.raiseToTop=function(i){var t=u(this._dataSources,i);t!==this._dataSources.length-1&&(this._dataSources.splice(t,1),this._dataSources.push(i),this.dataSourceMoved.raiseEvent(i,this._dataSources.length-1,t))},h.prototype.lowerToBottom=function(i){var t=u(this._dataSources,i);0!==t&&(this._dataSources.splice(t,1),this._dataSources.splice(0,0,i),this.dataSourceMoved.raiseEvent(i,0,t))},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this.removeAll(!0),(0,s.Z)(this)},t["Z"]=h},41366:function(i,t,e){var o=e(53773),n=e(48243),s=e(66553),r=e(62200),a=e(82982),l=e(86511),d=e(79539),h=e(14978),u=e(47780),c=e(32073),p=e(73316),_=e(76985),Z=e(69895),m=e(18154),v=e(60500),f=e(74057),g=e(67203),y=e(75384),b=e(15131),C=e(92197),w=e(30717);function S(i){s.Z.typeOf.object("options",i),s.Z.typeOf.object("options.scene",i.scene),s.Z.typeOf.object("options.dataSourceCollection",i.dataSourceCollection),u.Z.initializeTerrainHeights(),h.Z.initializeTerrainHeights();var t=i.scene,e=i.dataSourceCollection;this._eventHelper=new d.Z,this._eventHelper.add(e.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(e.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(e.dataSourceMoved,this._onDataSourceMoved,this),this._eventHelper.add(t.postRender,this._postRender,this),this._dataSourceCollection=e,this._scene=t,this._visualizersCallback=(0,r.Z)(i.visualizersCallback,S.defaultVisualizersCallback);var o=!1,n=new p.Z,a=new p.Z;e.length>0&&(t.primitives.add(n),t.groundPrimitives.add(a),o=!0),this._primitives=n,this._groundPrimitives=a;for(var l=0,c=e.length;l<c;l++)this._onDataSourceAdded(e,e.get(l));var _,Z,v=new m.Z;if(this._onDataSourceAdded(void 0,v),this._defaultDataSource=v,!o){var f=this,g=function(){t.primitives.add(n),t.groundPrimitives.add(a),_(),Z(),f._removeDefaultDataSourceListener=void 0,f._removeDataSourceCollectionListener=void 0};_=v.entities.collectionChanged.addEventListener(g),Z=e.dataSourceAdded.addEventListener(g)}this._removeDefaultDataSourceListener=_,this._removeDataSourceCollectionListener=Z,this._ready=!1}S.defaultVisualizersCallback=function(i,t,e){var o=e.entities;return[new _.Z(t,o),new v.Z(i,o,e._primitives,e._groundPrimitives),new f.Z(t,o),new g.Z(i,o),new y.Z(i,o),new C.Z(t,o),new b.Z(i,o),new w.Z(i,o,e._primitives,e._groundPrimitives)]},Object.defineProperties(S.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),S.prototype.isDestroyed=function(){return!1},S.prototype.destroy=function(){this._eventHelper.removeAll();for(var i=this._dataSourceCollection,t=0,e=i.length;t<e;++t)this._onDataSourceRemoved(this._dataSourceCollection,i.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),(0,a.Z)(this._removeDefaultDataSourceListener)?(this._removeDefaultDataSourceListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),(0,l.Z)(this)},S.prototype.update=function(i){if(s.Z.defined("time",i),!o.Z.initialized)return this._ready=!1,!1;var t,e,n,r,l=!0,d=this._dataSourceCollection,h=d.length;for(t=0;t<h;t++){var u=d.get(t);for((0,a.Z)(u.update)&&(l=u.update(i)&&l),n=u._visualizers,r=n.length,e=0;e<r;e++)l=n[e].update(i)&&l}for(n=this._defaultDataSource._visualizers,r=n.length,e=0;e<r;e++)l=n[e].update(i)&&l;return this._ready=l,l},S.prototype._postRender=function(){for(var i=this._scene.frameState,t=this._dataSourceCollection,e=t.length,o=0;o<e;o++){var n=t.get(o),s=n.credit;(0,a.Z)(s)&&i.creditDisplay.addCredit(s);var r=n._resourceCredits;if((0,a.Z)(r))for(var l=r.length,d=0;d<l;d++)i.creditDisplay.addCredit(r[d])}};var x=[],E=new n.Z;S.prototype.getBoundingSphere=function(i,t,e){if(s.Z.defined("entity",i),s.Z.typeOf.bool("allowPartial",t),s.Z.defined("result",e),!this._ready)return Z.Z.PENDING;var o,r,l=this._defaultDataSource;if(!l.entities.contains(i)){l=void 0;var d=this._dataSourceCollection;for(r=d.length,o=0;o<r;o++){var h=d.get(o);if(h.entities.contains(i)){l=h;break}}}if(!(0,a.Z)(l))return Z.Z.FAILED;var u=x,c=E,p=0,_=Z.Z.DONE,m=l._visualizers,v=m.length;for(o=0;o<v;o++){var f=m[o];if((0,a.Z)(f.getBoundingSphere)){if(_=m[o].getBoundingSphere(i,c),!t&&_===Z.Z.PENDING)return Z.Z.PENDING;_===Z.Z.DONE&&(u[p]=n.Z.clone(c,u[p]),p++)}}return 0===p?Z.Z.FAILED:(u.length=p,n.Z.fromBoundingSpheres(u,e),Z.Z.DONE)},S.prototype._onDataSourceAdded=function(i,t){var e=this._scene,o=this._primitives,n=this._groundPrimitives,s=o.add(new p.Z),r=n.add(new c.Z);t._primitives=s,t._groundPrimitives=r;var a=t.clustering;a._initialize(e),s.add(a),t._visualizers=this._visualizersCallback(e,a,t)},S.prototype._onDataSourceRemoved=function(i,t){var e=this._primitives,o=this._groundPrimitives,n=t._primitives,s=t._groundPrimitives,r=t.clustering;n.remove(r);for(var a=t._visualizers,l=a.length,d=0;d<l;d++)a[d].destroy();e.remove(n),o.remove(s),t._visualizers=void 0},S.prototype._onDataSourceMoved=function(i,t,e){var o=this._primitives,n=this._groundPrimitives,s=i._primitives,r=i._groundPrimitives;t===e+1?(o.raise(s),n.raise(r)):t===e-1?(o.lower(s),n.lower(r)):0===t?(o.lowerToBottom(s),n.lowerToBottom(r),o.raise(s),n.raise(r)):(o.raiseToTop(s),n.raiseToTop(r))},t["Z"]=S},22425:function(i,t,e){var o=e(8629),n=e(82982),s=e(69895);function r(i,t){this._primitives=i,this._orderedGroundPrimitives=t,this._dynamicUpdaters=new o.Z}r.prototype.add=function(i,t){this._dynamicUpdaters.set(t.id,t.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))},r.prototype.remove=function(i){var t=i.id,e=this._dynamicUpdaters.get(t);(0,n.Z)(e)&&(this._dynamicUpdaters.remove(t),e.destroy())},r.prototype.update=function(i){for(var t=this._dynamicUpdaters.values,e=0,o=t.length;e<o;e++)t[e].update(i);return!0},r.prototype.removeAllPrimitives=function(){for(var i=this._dynamicUpdaters.values,t=0,e=i.length;t<e;t++)i[t].destroy();this._dynamicUpdaters.removeAll()},r.prototype.getBoundingSphere=function(i,t){return i=this._dynamicUpdaters.get(i.id),(0,n.Z)(i)&&(0,n.Z)(i.getBoundingSphere)?i.getBoundingSphere(t):s.Z.FAILED},t["Z"]=r},84225:function(i,t,e){var o=e(48243),n=e(66553),s=e(82982),r=e(86511),a=e(12572),l=e(47780),d=e(79158),h=e(64060),u=e(34380),c=e(69895),p=e(20174),_=e(46317),Z=e(40112);function m(i,t,e){n.Z.defined("geometryUpdater",i),n.Z.defined("primitives",t),n.Z.defined("orderedGroundPrimitives",e),this._primitives=t,this._orderedGroundPrimitives=e,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=i,this._options=i._options,this._entity=i._entity,this._material=void 0}m.prototype._isHidden=function(i,t,e){return!i.isShowing||!i.isAvailable(e)||!Z.Z.getValueOrDefault(t.show,e,!0)},m.prototype._setOptions=a.Z.throwInstantiationError,m.prototype.update=function(i){n.Z.defined("time",i);var t=this._geometryUpdater,e=t._onTerrain,o=this._primitives,r=this._orderedGroundPrimitives;e?r.remove(this._primitive):(o.removeAndDestroy(this._primitive),o.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;var a=this._entity,c=a[this._geometryUpdater._geometryPropertyName];if(this._setOptions(a,c,i),!this._isHidden(a,c,i)){var m=this._geometryUpdater.shadowsProperty.getValue(i),v=this._options;if(!(0,s.Z)(c.fill)||c.fill.getValue(i)){var f,g=t.fillMaterialProperty,y=g instanceof p.Z,b=t._getIsClosed(v);if(y)f=new h.Z({closed:b,flat:e&&!t._supportsMaterialsforEntitiesOnTerrain});else{var C=_.Z.getValue(i,g,this._material);this._material=C,f=new d.Z({material:C,translucent:C.isTranslucent(),closed:b})}if(e)v.vertexFormat=h.Z.VERTEX_FORMAT,this._primitive=r.add(new l.Z({geometryInstances:this._geometryUpdater.createFillGeometryInstance(i),appearance:f,asynchronous:!1,shadows:m,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(i)}),Z.Z.getValueOrUndefined(this._geometryUpdater.zIndex,i));else{v.vertexFormat=f.vertexFormat;var w=this._geometryUpdater.createFillGeometryInstance(i);y&&(f.translucent=255!==w.attributes.color.value[3]),this._primitive=o.add(new u.Z({geometryInstances:w,appearance:f,asynchronous:!1,shadows:m}))}}if(!e&&(0,s.Z)(c.outline)&&c.outline.getValue(i)){var S=this._geometryUpdater.createOutlineGeometryInstance(i),x=Z.Z.getValueOrDefault(c.outlineWidth,i,1);this._outlinePrimitive=o.add(new u.Z({geometryInstances:S,appearance:new h.Z({flat:!0,translucent:255!==S.attributes.color.value[3],renderState:{lineWidth:t._scene.clampLineWidth(x)}}),asynchronous:!1,shadows:m}))}}},m.prototype.getBoundingSphere=function(i){if(!(0,s.Z)(i))throw new a.Z("result is required.");var t,e=this._entity,n=this._primitive,r=this._outlinePrimitive;return(0,s.Z)(n)&&n.show&&n.ready&&(t=n.getGeometryInstanceAttributes(e),(0,s.Z)(t)&&(0,s.Z)(t.boundingSphere))||(0,s.Z)(r)&&r.show&&r.ready&&(t=r.getGeometryInstanceAttributes(e),(0,s.Z)(t)&&(0,s.Z)(t.boundingSphere))?(o.Z.clone(t.boundingSphere,i),c.Z.DONE):(0,s.Z)(n)&&!n.ready||(0,s.Z)(r)&&!r.ready?c.Z.PENDING:c.Z.FAILED},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){var i=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):i.removeAndDestroy(this._primitive),i.removeAndDestroy(this._outlinePrimitive),(0,r.Z)(this)},t["Z"]=m},28698:function(i,t,e){var o=e(53773),n=e(60216),s=e(66553),r=e(59947),a=e(92062),l=e(82982),d=e(12572),h=e(24689),u=e(59359),c=e(27337),p=e(26865),_=e(22841),Z=e(82223),m=e(96190),v=e(37939),f=e(4260),g=e(79158),y=e(64060),b=e(20174),C=e(84225),w=e(17045),S=e(8254),x=e(40112),E=new r.Z,O=n.Z.ZERO,P=new n.Z,M=new m.Z;function D(i){this.id=i,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function I(i,t){S.Z.call(this,{entity:i,scene:t,geometryOptions:new D(i),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(i,"ellipse",i.ellipse,void 0)}function V(i,t,e){C.Z.call(this,i,t,e)}(0,l.Z)(Object.create)&&(I.prototype=Object.create(S.Z.prototype),I.prototype.constructor=I),I.prototype.createFillGeometryInstance=function(i){if(s.Z.defined("time",i),!this._fillEnabled)throw new d.Z("This instance does not represent a filled geometry.");var t,e=this._entity,o=e.isAvailable(i),n={show:new v.Z(o&&e.isShowing&&this._showProperty.getValue(i)&&this._fillProperty.getValue(i)),distanceDisplayCondition:h.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(i)),offset:void 0,color:void 0};this._materialProperty instanceof b.Z&&((0,l.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||o)&&(t=this._materialProperty.color.getValue(i,E)),(0,l.Z)(t)||(t=r.Z.WHITE),n.color=a.Z.fromColor(t));return(0,l.Z)(this._options.offsetAttribute)&&(n.offset=Z.Z.fromCartesian3(x.Z.getValueOrDefault(this._terrainOffsetProperty,i,O,P))),new p.Z({id:e,geometry:new u.Z(this._options),attributes:n})},I.prototype.createOutlineGeometryInstance=function(i){if(s.Z.defined("time",i),!this._outlineEnabled)throw new d.Z("This instance does not represent an outlined geometry.");var t=this._entity,e=t.isAvailable(i),o=x.Z.getValueOrDefault(this._outlineColorProperty,i,r.Z.BLACK,E),n=this._distanceDisplayConditionProperty.getValue(i),u={show:new v.Z(e&&t.isShowing&&this._showProperty.getValue(i)&&this._showOutlineProperty.getValue(i)),color:a.Z.fromColor(o),distanceDisplayCondition:h.Z.fromDistanceDisplayCondition(n),offset:void 0};return(0,l.Z)(this._options.offsetAttribute)&&(u.offset=Z.Z.fromCartesian3(x.Z.getValueOrDefault(this._terrainOffsetProperty,i,O,P))),new p.Z({id:t,geometry:new c.Z(this._options),attributes:u})},I.prototype._computeCenter=function(i,t){return x.Z.getValueOrUndefined(this._entity.position,i,t)},I.prototype._isHidden=function(i,t){var e=i.position;return!(0,l.Z)(e)||!(0,l.Z)(t.semiMajorAxis)||!(0,l.Z)(t.semiMinorAxis)||w.Z.prototype._isHidden.call(this,i,t)},I.prototype._isDynamic=function(i,t){return!i.position.isConstant||!t.semiMajorAxis.isConstant||!t.semiMinorAxis.isConstant||!x.Z.isConstant(t.rotation)||!x.Z.isConstant(t.height)||!x.Z.isConstant(t.extrudedHeight)||!x.Z.isConstant(t.granularity)||!x.Z.isConstant(t.stRotation)||!x.Z.isConstant(t.outlineWidth)||!x.Z.isConstant(t.numberOfVerticalLines)||!x.Z.isConstant(t.zIndex)||this._onTerrain&&!x.Z.isConstant(this._materialProperty)&&!(this._materialProperty instanceof b.Z)},I.prototype._setStaticOptions=function(i,t){var e=x.Z.getValueOrUndefined(t.height,_.Z.MINIMUM_VALUE),n=x.Z.getValueOrDefault(t.heightReference,_.Z.MINIMUM_VALUE,f.Z.NONE),s=x.Z.getValueOrUndefined(t.extrudedHeight,_.Z.MINIMUM_VALUE),r=x.Z.getValueOrDefault(t.extrudedHeightReference,_.Z.MINIMUM_VALUE,f.Z.NONE);(0,l.Z)(s)&&!(0,l.Z)(e)&&(e=0);var a=this._options;a.vertexFormat=this._materialProperty instanceof b.Z?y.Z.VERTEX_FORMAT:g.Z.MaterialSupport.TEXTURED.vertexFormat,a.center=i.position.getValue(_.Z.MINIMUM_VALUE,a.center),a.semiMajorAxis=t.semiMajorAxis.getValue(_.Z.MINIMUM_VALUE,a.semiMajorAxis),a.semiMinorAxis=t.semiMinorAxis.getValue(_.Z.MINIMUM_VALUE,a.semiMinorAxis),a.rotation=x.Z.getValueOrUndefined(t.rotation,_.Z.MINIMUM_VALUE),a.granularity=x.Z.getValueOrUndefined(t.granularity,_.Z.MINIMUM_VALUE),a.stRotation=x.Z.getValueOrUndefined(t.stRotation,_.Z.MINIMUM_VALUE),a.numberOfVerticalLines=x.Z.getValueOrUndefined(t.numberOfVerticalLines,_.Z.MINIMUM_VALUE),a.offsetAttribute=S.Z.computeGeometryOffsetAttribute(e,n,s,r),a.height=S.Z.getGeometryHeight(e,n),s=S.Z.getGeometryExtrudedHeight(s,r),s===S.Z.CLAMP_TO_GROUND&&(s=o.Z.getMinimumMaximumHeights(u.Z.computeRectangle(a,M)).minimumTerrainHeight),a.extrudedHeight=s},I.DynamicGeometryUpdater=V,(0,l.Z)(Object.create)&&(V.prototype=Object.create(C.Z.prototype),V.prototype.constructor=V),V.prototype._isHidden=function(i,t,e){var o=this._options;return!(0,l.Z)(o.center)||!(0,l.Z)(o.semiMajorAxis)||!(0,l.Z)(o.semiMinorAxis)||C.Z.prototype._isHidden.call(this,i,t,e)},V.prototype._setOptions=function(i,t,e){var n=this._options,s=x.Z.getValueOrUndefined(t.height,e),r=x.Z.getValueOrDefault(t.heightReference,e,f.Z.NONE),a=x.Z.getValueOrUndefined(t.extrudedHeight,e),d=x.Z.getValueOrDefault(t.extrudedHeightReference,e,f.Z.NONE);(0,l.Z)(a)&&!(0,l.Z)(s)&&(s=0),n.center=x.Z.getValueOrUndefined(i.position,e,n.center),n.semiMajorAxis=x.Z.getValueOrUndefined(t.semiMajorAxis,e),n.semiMinorAxis=x.Z.getValueOrUndefined(t.semiMinorAxis,e),n.rotation=x.Z.getValueOrUndefined(t.rotation,e),n.granularity=x.Z.getValueOrUndefined(t.granularity,e),n.stRotation=x.Z.getValueOrUndefined(t.stRotation,e),n.numberOfVerticalLines=x.Z.getValueOrUndefined(t.numberOfVerticalLines,e),n.offsetAttribute=S.Z.computeGeometryOffsetAttribute(s,r,a,d),n.height=S.Z.getGeometryHeight(s,r),a=S.Z.getGeometryExtrudedHeight(a,d),a===S.Z.CLAMP_TO_GROUND&&(a=o.Z.getMinimumMaximumHeights(u.Z.computeRectangle(n,M)).minimumTerrainHeight),n.extrudedHeight=a},t["Z"]=I},12438:function(i,t,e){var o=e(62200),n=e(82982),s=e(12572),r=e(14459),a=e(1370),l=e(90203);function d(i){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._semiMajorAxis=void 0,this._semiMajorAxisSubscription=void 0,this._semiMinorAxis=void 0,this._semiMinorAxisSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge((0,o.Z)(i,o.Z.EMPTY_OBJECT))}Object.defineProperties(d.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.Z)("show"),semiMajorAxis:(0,l.Z)("semiMajorAxis"),semiMinorAxis:(0,l.Z)("semiMinorAxis"),height:(0,l.Z)("height"),heightReference:(0,l.Z)("heightReference"),extrudedHeight:(0,l.Z)("extrudedHeight"),extrudedHeightReference:(0,l.Z)("extrudedHeightReference"),rotation:(0,l.Z)("rotation"),stRotation:(0,l.Z)("stRotation"),granularity:(0,l.Z)("granularity"),fill:(0,l.Z)("fill"),material:(0,a.Z)("material"),outline:(0,l.Z)("outline"),outlineColor:(0,l.Z)("outlineColor"),outlineWidth:(0,l.Z)("outlineWidth"),numberOfVerticalLines:(0,l.Z)("numberOfVerticalLines"),shadows:(0,l.Z)("shadows"),distanceDisplayCondition:(0,l.Z)("distanceDisplayCondition"),classificationType:(0,l.Z)("classificationType"),zIndex:(0,l.Z)("zIndex")}),d.prototype.clone=function(i){return(0,n.Z)(i)?(i.show=this.show,i.semiMajorAxis=this.semiMajorAxis,i.semiMinorAxis=this.semiMinorAxis,i.height=this.height,i.heightReference=this.heightReference,i.extrudedHeight=this.extrudedHeight,i.extrudedHeightReference=this.extrudedHeightReference,i.rotation=this.rotation,i.stRotation=this.stRotation,i.granularity=this.granularity,i.fill=this.fill,i.material=this.material,i.outline=this.outline,i.outlineColor=this.outlineColor,i.outlineWidth=this.outlineWidth,i.numberOfVerticalLines=this.numberOfVerticalLines,i.shadows=this.shadows,i.distanceDisplayCondition=this.distanceDisplayCondition,i.classificationType=this.classificationType,i.zIndex=this.zIndex,i):new d(this)},d.prototype.merge=function(i){if(!(0,n.Z)(i))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,i.show),this.semiMajorAxis=(0,o.Z)(this.semiMajorAxis,i.semiMajorAxis),this.semiMinorAxis=(0,o.Z)(this.semiMinorAxis,i.semiMinorAxis),this.height=(0,o.Z)(this.height,i.height),this.heightReference=(0,o.Z)(this.heightReference,i.heightReference),this.extrudedHeight=(0,o.Z)(this.extrudedHeight,i.extrudedHeight),this.extrudedHeightReference=(0,o.Z)(this.extrudedHeightReference,i.extrudedHeightReference),this.rotation=(0,o.Z)(this.rotation,i.rotation),this.stRotation=(0,o.Z)(this.stRotation,i.stRotation),this.granularity=(0,o.Z)(this.granularity,i.granularity),this.fill=(0,o.Z)(this.fill,i.fill),this.material=(0,o.Z)(this.material,i.material),this.outline=(0,o.Z)(this.outline,i.outline),this.outlineColor=(0,o.Z)(this.outlineColor,i.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,i.outlineWidth),this.numberOfVerticalLines=(0,o.Z)(this.numberOfVerticalLines,i.numberOfVerticalLines),this.shadows=(0,o.Z)(this.shadows,i.shadows),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,i.distanceDisplayCondition),this.classificationType=(0,o.Z)(this.classificationType,i.classificationType),this.zIndex=(0,o.Z)(this.zIndex,i.zIndex)},t["Z"]=d},16884:function(i,t,e){var o=e(60216),n=e(66553),s=e(59947),r=e(92062),a=e(62200),l=e(82982),d=e(47861),h=e(24689),u=e(64727),c=e(75619),p=e(26865),_=e(87379),Z=e(22841),m=e(72248),v=e(82223),f=e(37939),g=e(4260),y=e(79158),b=e(64060),C=e(34380),w=e(89917),S=e(20174),x=e(84225),E=e(17045),O=e(23502),P=e(46317),M=e(40112),D=new S.Z(s.Z.WHITE),I=o.Z.ZERO,V=new o.Z,A=new o.Z,R=new o.Z,U=new s.Z,L=new o.Z(1,1,1);function T(i){this.id=i,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function N(i,t){E.Z.call(this,{entity:i,scene:t,geometryOptions:new T(i),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(i,"ellipsoid",i.ellipsoid,void 0)}function k(i,t,e){x.Z.call(this,i,t,e),this._scene=i._scene,this._modelMatrix=new m.Z,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new o.Z,this._material={}}(0,l.Z)(Object.create)&&(N.prototype=Object.create(E.Z.prototype),N.prototype.constructor=N),Object.defineProperties(N.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),N.prototype.createFillGeometryInstance=function(i,t,e){n.Z.defined("time",i);var o,a,d=this._entity,c=d.isAvailable(i),_=new f.Z(c&&d.isShowing&&this._showProperty.getValue(i)&&this._fillProperty.getValue(i)),Z=this._distanceDisplayConditionProperty.getValue(i),m=h.Z.fromDistanceDisplayCondition(Z),g={show:_,distanceDisplayCondition:m,color:void 0,offset:void 0};this._materialProperty instanceof S.Z&&((0,l.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||c)&&(a=this._materialProperty.color.getValue(i,U)),(0,l.Z)(a)||(a=s.Z.WHITE),o=r.Z.fromColor(a),g.color=o);return(0,l.Z)(this._options.offsetAttribute)&&(g.offset=v.Z.fromCartesian3(M.Z.getValueOrDefault(this._terrainOffsetProperty,i,I,V))),new p.Z({id:d,geometry:new u.Z(this._options),modelMatrix:t?void 0:d.computeModelMatrixForHeightReference(i,d.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,e),attributes:g})},N.prototype.createOutlineGeometryInstance=function(i,t,e){n.Z.defined("time",i);var o=this._entity,a=o.isAvailable(i),d=M.Z.getValueOrDefault(this._outlineColorProperty,i,s.Z.BLACK,U),u=this._distanceDisplayConditionProperty.getValue(i),_={show:new f.Z(a&&o.isShowing&&this._showProperty.getValue(i)&&this._showOutlineProperty.getValue(i)),color:r.Z.fromColor(d),distanceDisplayCondition:h.Z.fromDistanceDisplayCondition(u),offset:void 0};return(0,l.Z)(this._options.offsetAttribute)&&(_.offset=v.Z.fromCartesian3(M.Z.getValueOrDefault(this._terrainOffsetProperty,i,I,V))),new p.Z({id:o,geometry:new c.Z(this._options),modelMatrix:t?void 0:o.computeModelMatrixForHeightReference(i,o.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,e),attributes:_})},N.prototype._computeCenter=function(i,t){return M.Z.getValueOrUndefined(this._entity.position,i,t)},N.prototype._isHidden=function(i,t){return!(0,l.Z)(i.position)||!(0,l.Z)(t.radii)||E.Z.prototype._isHidden.call(this,i,t)},N.prototype._isDynamic=function(i,t){return!i.position.isConstant||!M.Z.isConstant(i.orientation)||!t.radii.isConstant||!M.Z.isConstant(t.innerRadii)||!M.Z.isConstant(t.stackPartitions)||!M.Z.isConstant(t.slicePartitions)||!M.Z.isConstant(t.outlineWidth)||!M.Z.isConstant(t.minimumClock)||!M.Z.isConstant(t.maximumClock)||!M.Z.isConstant(t.minimumCone)||!M.Z.isConstant(t.maximumCone)||!M.Z.isConstant(t.subdivisions)},N.prototype._setStaticOptions=function(i,t){var e=M.Z.getValueOrDefault(t.heightReference,Z.Z.MINIMUM_VALUE,g.Z.NONE),o=this._options;o.vertexFormat=this._materialProperty instanceof S.Z?b.Z.VERTEX_FORMAT:y.Z.MaterialSupport.TEXTURED.vertexFormat,o.radii=t.radii.getValue(Z.Z.MINIMUM_VALUE,o.radii),o.innerRadii=M.Z.getValueOrUndefined(t.innerRadii,o.radii),o.minimumClock=M.Z.getValueOrUndefined(t.minimumClock,Z.Z.MINIMUM_VALUE),o.maximumClock=M.Z.getValueOrUndefined(t.maximumClock,Z.Z.MINIMUM_VALUE),o.minimumCone=M.Z.getValueOrUndefined(t.minimumCone,Z.Z.MINIMUM_VALUE),o.maximumCone=M.Z.getValueOrUndefined(t.maximumCone,Z.Z.MINIMUM_VALUE),o.stackPartitions=M.Z.getValueOrUndefined(t.stackPartitions,Z.Z.MINIMUM_VALUE),o.slicePartitions=M.Z.getValueOrUndefined(t.slicePartitions,Z.Z.MINIMUM_VALUE),o.subdivisions=M.Z.getValueOrUndefined(t.subdivisions,Z.Z.MINIMUM_VALUE),o.offsetAttribute=e!==g.Z.NONE?_.Z.ALL:void 0},N.prototype._onEntityPropertyChanged=O.Z,N.DynamicGeometryUpdater=k,(0,l.Z)(Object.create)&&(k.prototype=Object.create(x.Z.prototype),k.prototype.constructor=k),k.prototype.update=function(i){n.Z.defined("time",i);var t=this._entity,e=t.ellipsoid;if(!t.isShowing||!t.isAvailable(i)||!M.Z.getValueOrDefault(e.show,i,!0))return(0,l.Z)(this._primitive)&&(this._primitive.show=!1),void((0,l.Z)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));var u=M.Z.getValueOrUndefined(e.radii,i,A),c=(0,l.Z)(u)?t.computeModelMatrixForHeightReference(i,e.heightReference,.5*u.z,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!(0,l.Z)(c)||!(0,l.Z)(u))return(0,l.Z)(this._primitive)&&(this._primitive.show=!1),void((0,l.Z)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));var p=M.Z.getValueOrDefault(e.fill,i,!0),Z=M.Z.getValueOrDefault(e.outline,i,!1),S=M.Z.getValueOrClonedDefault(e.outlineColor,i,s.Z.BLACK,U),x=P.Z.getValue(i,(0,a.Z)(e.material,D),this._material),E=M.Z.getValueOrUndefined(e.innerRadii,i,R),O=M.Z.getValueOrUndefined(e.minimumClock,i),T=M.Z.getValueOrUndefined(e.maximumClock,i),N=M.Z.getValueOrUndefined(e.minimumCone,i),k=M.Z.getValueOrUndefined(e.maximumCone,i),B=M.Z.getValueOrUndefined(e.stackPartitions,i),H=M.Z.getValueOrUndefined(e.slicePartitions,i),z=M.Z.getValueOrUndefined(e.subdivisions,i),j=M.Z.getValueOrDefault(e.outlineWidth,i,1),F=M.Z.getValueOrDefault(e.heightReference,i,g.Z.NONE),G=F!==g.Z.NONE?_.Z.ALL:void 0,W=this._scene.mode,q=W===w.Z.SCENE3D&&F===g.Z.NONE,X=this._options,Y=this._geometryUpdater.shadowsProperty.getValue(i),J=this._geometryUpdater.distanceDisplayConditionProperty,K=J.getValue(i),Q=M.Z.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,i,I,V),$=!q||this._lastSceneMode!==W||!(0,l.Z)(this._primitive)||X.stackPartitions!==B||X.slicePartitions!==H||(0,l.Z)(E)&&!o.Z.equals(X.innerRadii!==E)||X.minimumClock!==O||X.maximumClock!==T||X.minimumCone!==N||X.maximumCone!==k||X.subdivisions!==z||this._lastOutlineWidth!==j||X.offsetAttribute!==G;if($){var ii=this._primitives;if(ii.removeAndDestroy(this._primitive),ii.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=W,this._lastOutlineWidth=j,X.stackPartitions=B,X.slicePartitions=H,X.subdivisions=z,X.offsetAttribute=G,X.radii=o.Z.clone(q?L:u,X.radii),(0,l.Z)(E))if(q){var ti=o.Z.magnitude(u);X.innerRadii=o.Z.fromElements(E.x/ti,E.y/ti,E.z/ti,X.innerRadii)}else X.innerRadii=o.Z.clone(E,X.innerRadii);else X.innerRadii=void 0;X.minimumClock=O,X.maximumClock=T,X.minimumCone=N,X.maximumCone=k;var ei=new y.Z({material:x,translucent:x.isTranslucent(),closed:!0});X.vertexFormat=ei.vertexFormat;var oi=this._geometryUpdater.createFillGeometryInstance(i,q,this._modelMatrix);this._primitive=ii.add(new C.Z({geometryInstances:oi,appearance:ei,asynchronous:!1,shadows:Y}));var ni=this._geometryUpdater.createOutlineGeometryInstance(i,q,this._modelMatrix);this._outlinePrimitive=ii.add(new C.Z({geometryInstances:ni,appearance:new b.Z({flat:!0,translucent:255!==ni.attributes.color.value[3],renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(j)}}),asynchronous:!1,shadows:Y})),this._lastShow=p,this._lastOutlineShow=Z,this._lastOutlineColor=s.Z.clone(S,this._lastOutlineColor),this._lastDistanceDisplayCondition=K,this._lastOffset=o.Z.clone(Q,this._lastOffset)}else if(this._primitive.ready){var si=this._primitive,ri=this._outlinePrimitive;si.show=!0,ri.show=!0,si.appearance.material=x;var ai=this._attributes;(0,l.Z)(ai)||(ai=si.getGeometryInstanceAttributes(t),this._attributes=ai),p!==this._lastShow&&(ai.show=f.Z.toValue(p,ai.show),this._lastShow=p);var li=this._outlineAttributes;(0,l.Z)(li)||(li=ri.getGeometryInstanceAttributes(t),this._outlineAttributes=li),Z!==this._lastOutlineShow&&(li.show=f.Z.toValue(Z,li.show),this._lastOutlineShow=Z),s.Z.equals(S,this._lastOutlineColor)||(li.color=r.Z.toValue(S,li.color),s.Z.clone(S,this._lastOutlineColor)),d.Z.equals(K,this._lastDistanceDisplayCondition)||(ai.distanceDisplayCondition=h.Z.toValue(K,ai.distanceDisplayCondition),li.distanceDisplayCondition=h.Z.toValue(K,li.distanceDisplayCondition),d.Z.clone(K,this._lastDistanceDisplayCondition)),o.Z.equals(Q,this._lastOffset)||(ai.offset=v.Z.toValue(Q,ai.offset),li.offset=v.Z.toValue(Q,ai.offset),o.Z.clone(Q,this._lastOffset))}q&&(u.x=Math.max(u.x,.001),u.y=Math.max(u.y,.001),u.z=Math.max(u.z,.001),c=m.Z.multiplyByScale(c,u,c),this._primitive.modelMatrix=c,this._outlinePrimitive.modelMatrix=c)},t["Z"]=N},84088:function(i,t,e){var o=e(62200),n=e(82982),s=e(12572),r=e(14459),a=e(1370),l=e(90203);function d(i){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._radii=void 0,this._radiiSubscription=void 0,this._innerRadii=void 0,this._innerRadiiSubscription=void 0,this._minimumClock=void 0,this._minimumClockSubscription=void 0,this._maximumClock=void 0,this._maximumClockSubscription=void 0,this._minimumCone=void 0,this._minimumConeSubscription=void 0,this._maximumCone=void 0,this._maximumConeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._stackPartitions=void 0,this._stackPartitionsSubscription=void 0,this._slicePartitions=void 0,this._slicePartitionsSubscription=void 0,this._subdivisions=void 0,this._subdivisionsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge((0,o.Z)(i,o.Z.EMPTY_OBJECT))}Object.defineProperties(d.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.Z)("show"),radii:(0,l.Z)("radii"),innerRadii:(0,l.Z)("innerRadii"),minimumClock:(0,l.Z)("minimumClock"),maximumClock:(0,l.Z)("maximumClock"),minimumCone:(0,l.Z)("minimumCone"),maximumCone:(0,l.Z)("maximumCone"),heightReference:(0,l.Z)("heightReference"),fill:(0,l.Z)("fill"),material:(0,a.Z)("material"),outline:(0,l.Z)("outline"),outlineColor:(0,l.Z)("outlineColor"),outlineWidth:(0,l.Z)("outlineWidth"),stackPartitions:(0,l.Z)("stackPartitions"),slicePartitions:(0,l.Z)("slicePartitions"),subdivisions:(0,l.Z)("subdivisions"),shadows:(0,l.Z)("shadows"),distanceDisplayCondition:(0,l.Z)("distanceDisplayCondition")}),d.prototype.clone=function(i){return(0,n.Z)(i)?(i.show=this.show,i.radii=this.radii,i.innerRadii=this.innerRadii,i.minimumClock=this.minimumClock,i.maximumClock=this.maximumClock,i.minimumCone=this.minimumCone,i.maximumCone=this.maximumCone,i.heightReference=this.heightReference,i.fill=this.fill,i.material=this.material,i.outline=this.outline,i.outlineColor=this.outlineColor,i.outlineWidth=this.outlineWidth,i.stackPartitions=this.stackPartitions,i.slicePartitions=this.slicePartitions,i.subdivisions=this.subdivisions,i.shadows=this.shadows,i.distanceDisplayCondition=this.distanceDisplayCondition,i):new d(this)},d.prototype.merge=function(i){if(!(0,n.Z)(i))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,i.show),this.radii=(0,o.Z)(this.radii,i.radii),this.innerRadii=(0,o.Z)(this.innerRadii,i.innerRadii),this.minimumClock=(0,o.Z)(this.minimumClock,i.minimumClock),this.maximumClock=(0,o.Z)(this.maximumClock,i.maximumClock),this.minimumCone=(0,o.Z)(this.minimumCone,i.minimumCone),this.maximumCone=(0,o.Z)(this.maximumCone,i.maximumCone),this.heightReference=(0,o.Z)(this.heightReference,i.heightReference),this.fill=(0,o.Z)(this.fill,i.fill),this.material=(0,o.Z)(this.material,i.material),this.outline=(0,o.Z)(this.outline,i.outline),this.outlineColor=(0,o.Z)(this.outlineColor,i.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,i.outlineWidth),this.stackPartitions=(0,o.Z)(this.stackPartitions,i.stackPartitions),this.slicePartitions=(0,o.Z)(this.slicePartitions,i.slicePartitions),this.subdivisions=(0,o.Z)(this.subdivisions,i.subdivisions),this.shadows=(0,o.Z)(this.shadows,i.shadows),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,i.distanceDisplayCondition)},t["Z"]=d},11895:function(i,t,e){var o=e(60216),n=e(51688),s=e(66553),r=e(39960),a=e(62200),l=e(82982),d=e(12572),h=e(14459),u=e(99417),c=e(68201),p=e(72248),_=e(87811),Z=e(95555),m=e(14978),v=e(47780),f=e(4260),g=e(44011),y=e(65992),b=e(19069),C=e(29540),w=e(90203),S=e(33054),x=e(95212),E=e(12438),O=e(84088),P=e(71550),M=e(4949),D=e(73522),I=e(51426),V=e(23127),A=e(35461),R=e(3081),U=e(42956),L=e(96410),T=e(40112),N=e(54065),k=e(85441),B=e(65269),H=new n.Z;function z(i){return new b.Z(i)}function j(i){return(0,w.Z)(i,void 0,z)}function F(i,t){return(0,w.Z)(i,void 0,(function(i){return i instanceof t?i:new t(i)}))}function G(i){i=(0,a.Z)(i,a.Z.EMPTY_OBJECT);var t=i.id;(0,l.Z)(t)||(t=(0,r.Z)()),this._availability=void 0,this._id=t,this._definitionChanged=new h.Z,this._name=i.name,this._show=(0,a.Z)(i.show,!0),this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","tileset","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall"],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._tileset=void 0,this._tilesetSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=i.parent,this.merge(i)}function W(i,t,e){for(var o=t.length,n=0;n<o;n++){var s=t[n],r=s._show,a=!e&&r,l=e&&r;a!==l&&W(s,s._children,e)}i._definitionChanged.raiseEvent(i,"isShowing",e,!e)}Object.defineProperties(G.prototype,{availability:(0,S.Z)("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:(0,S.Z)("name"),show:{get:function(){return this._show},set:function(i){if(!(0,l.Z)(i))throw new d.Z("value is required.");if(i!==this._show){var t=this.isShowing;this._show=i;var e=this.isShowing;t!==e&&W(this,this._children,e),this._definitionChanged.raiseEvent(this,"show",i,!i)}}},isShowing:{get:function(){return this._show&&(!(0,l.Z)(this.entityCollection)||this.entityCollection.show)&&(!(0,l.Z)(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(i){var t=this._parent;if(t!==i){var e=this.isShowing;if((0,l.Z)(t)){var o=t._children.indexOf(this);t._children.splice(o,1)}this._parent=i,(0,l.Z)(i)&&i._children.push(this);var n=this.isShowing;e!==n&&W(this,this._children,n),this._definitionChanged.raiseEvent(this,"parent",i,t)}}},propertyNames:{get:function(){return this._propertyNames}},billboard:F("billboard",g.Z),box:F("box",y.Z),corridor:F("corridor",C.Z),cylinder:F("cylinder",x.Z),description:(0,w.Z)("description"),ellipse:F("ellipse",E.Z),ellipsoid:F("ellipsoid",O.Z),label:F("label",P.Z),model:F("model",M.Z),tileset:F("tileset",D.Z),orientation:(0,w.Z)("orientation"),path:F("path",I.Z),plane:F("plane",V.Z),point:F("point",A.Z),polygon:F("polygon",R.Z),polyline:F("polyline",U.Z),polylineVolume:F("polylineVolume",L.Z),properties:F("properties",N.Z),position:j("position"),rectangle:F("rectangle",k.Z),viewFrom:(0,w.Z)("viewFrom"),wall:F("wall",B.Z)}),G.prototype.isAvailable=function(i){if(!(0,l.Z)(i))throw new d.Z("time is required.");var t=this._availability;return!(0,l.Z)(t)||t.contains(i)},G.prototype.addProperty=function(i){var t=this._propertyNames;if(!(0,l.Z)(i))throw new d.Z("propertyName is required.");if(-1!==t.indexOf(i))throw new d.Z(i+" is already a registered property.");if(i in this)throw new d.Z(i+" is a reserved property name.");t.push(i),Object.defineProperty(this,i,(0,S.Z)(i,!0))},G.prototype.removeProperty=function(i){var t=this._propertyNames,e=t.indexOf(i);if(!(0,l.Z)(i))throw new d.Z("propertyName is required.");if(-1===e)throw new d.Z(i+" is not a registered property.");this._propertyNames.splice(e,1),delete this[i]},G.prototype.merge=function(i){if(!(0,l.Z)(i))throw new d.Z("source is required.");this.name=(0,a.Z)(this.name,i.name),this.availability=(0,a.Z)(this.availability,i.availability);for(var t=this._propertyNames,e=(0,l.Z)(i._propertyNames)?i._propertyNames:Object.keys(i),o=e.length,n=0;n<o;n++){var s=e[n];if("parent"!==s&&"name"!==s&&"availability"!==s){var r=this[s],h=i[s];(0,l.Z)(r)||-1!==t.indexOf(s)||this.addProperty(s),(0,l.Z)(h)&&((0,l.Z)(r)?(0,l.Z)(r.merge)&&r.merge(h):(0,l.Z)(h.merge)&&(0,l.Z)(h.clone)?this[s]=h.clone():this[s]=h)}}};var q=new c.Z,X=new o.Z,Y=new _.Z;G.prototype.computeModelMatrix=function(i,t){s.Z.typeOf.object("time",i);var e=T.Z.getValueOrUndefined(this._position,i,X);if((0,l.Z)(e)){var o=T.Z.getValueOrUndefined(this._orientation,i,Y);return t=(0,l.Z)(o)?p.Z.fromRotationTranslation(c.Z.fromQuaternion(o,q),e,t):Z.Z.eastNorthUpToFixedFrame(e,void 0,t),t}},G.prototype.computeModelMatrixForHeightReference=function(i,t,e,n,r){s.Z.typeOf.object("time",i);var a=T.Z.getValueOrDefault(t,i,f.Z.NONE),d=T.Z.getValueOrUndefined(this._position,i,X);if(a===f.Z.NONE||!(0,l.Z)(d)||o.Z.equalsEpsilon(d,o.Z.ZERO,u.Z.EPSILON8))return this.computeModelMatrix(i,r);var h=n.cartesianToCartographic(d,H);a===f.Z.CLAMP_TO_GROUND?h.height=e:h.height+=e,d=n.cartographicToCartesian(h,d);var _=T.Z.getValueOrUndefined(this._orientation,i,Y);return r=(0,l.Z)(_)?p.Z.fromRotationTranslation(c.Z.fromQuaternion(_,q),d,r):Z.Z.eastNorthUpToFixedFrame(d,void 0,r),r},G.supportsMaterialsforEntitiesOnTerrain=function(i){return v.Z.supportsMaterials(i)},G.supportsPolylinesOnTerrain=function(i){return m.Z.isSupported(i)},t["Z"]=G},47890:function(i,t,e){var o=e(88108),n=e(60838),s=e(60216),r=e(62200),a=e(82982),l=e(61252),d=e(14459),h=e(72248),u=e(80349),c=e(8044),p=e(73705),_=e(7017),Z=e(36514),m=e(9462),v=e(89917),f=e(27552);function g(i){i=(0,r.Z)(i,r.Z.EMPTY_OBJECT),this._enabled=(0,r.Z)(i.enabled,!1),this._pixelRange=(0,r.Z)(i.pixelRange,80),this._minimumClusterSize=(0,r.Z)(i.minimumClusterSize,2),this._clusterBillboards=(0,r.Z)(i.clusterBillboards,!0),this._clusterLabels=(0,r.Z)(i.clusterLabels,!0),this._clusterPoints=(0,r.Z)(i.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new d.Z,this.show=(0,r.Z)(i.show,!0)}function y(i){return i.coord.x}function b(i){return i.coord.y}function C(i,t){i.x-=t,i.y-=t,i.width+=2*t,i.height+=2*t}var w=new o.Z;function S(i,t,e,n,s){if((0,a.Z)(i._labelCollection)&&n._clusterLabels?s=p.Z.getScreenSpaceBoundingBox(i,t,s):(0,a.Z)(i._billboardCollection)&&n._clusterBillboards?s=u.Z.getScreenSpaceBoundingBox(i,t,s):(0,a.Z)(i._pointPrimitiveCollection)&&n._clusterPoints&&(s=Z.Z.getScreenSpaceBoundingBox(i,t,s)),C(s,e),n._clusterLabels&&!(0,a.Z)(i._labelCollection)&&(0,a.Z)(i.id)&&O(n,i.id.id)&&(0,a.Z)(i.id._label)){var r=n._collectionIndicesByEntity[i.id.id].labelIndex,l=n._labelCollection.get(r),d=p.Z.getScreenSpaceBoundingBox(l,t,w);C(d,e),s=o.Z.union(s,d,s)}return s}function x(i,t){if(i.clusterShow=!0,!(0,a.Z)(i._labelCollection)&&(0,a.Z)(i.id)&&O(t,i.id.id)&&(0,a.Z)(i.id._label)){var e=t._collectionIndicesByEntity[i.id.id].labelIndex,o=t._labelCollection.get(e);o.clusterShow=!0}}function E(i,t,e,o){var n={billboard:o._clusterBillboardCollection.add(),label:o._clusterLabelCollection.add(),point:o._clusterPointCollection.add()};n.billboard.show=!1,n.point.show=!1,n.label.show=!0,n.label.text=t.toLocaleString(),n.label.id=e,n.billboard.position=n.label.position=n.point.position=i,o._clusterEvent.raiseEvent(e,n)}function O(i,t){return(0,a.Z)(i)&&(0,a.Z)(i._collectionIndicesByEntity[t])&&(0,a.Z)(i._collectionIndicesByEntity[t].labelIndex)}function P(i,t,e,o,n){if((0,a.Z)(i))for(var s=i.length,r=0;r<s;++r){var l=i.get(r);if(l.clusterShow=!1,l.show&&(n._scene.mode!==v.Z.SCENE3D||o.isPointVisible(l.position))){var d=n._clusterLabels&&(0,a.Z)(l._labelCollection),h=n._clusterBillboards&&(0,a.Z)(l.id._billboard),u=n._clusterPoints&&(0,a.Z)(l.id._point);if(!d||!u&&!h){var c=l.computeScreenSpacePosition(e);(0,a.Z)(c)&&t.push({index:r,collection:i,clustered:!1,coord:c})}}}}var M=new o.Z,D=new o.Z,I=new o.Z;function V(i){return function(t){if(!((0,a.Z)(t)&&t<.05)&&i.enabled){var e=i._scene,r=i._labelCollection,d=i._billboardCollection,p=i._pointCollection;if(((0,a.Z)(r)||(0,a.Z)(d)||(0,a.Z)(p))&&(i._clusterBillboards||i._clusterLabels||i._clusterPoints)){var Z=i._clusterLabelCollection,v=i._clusterBillboardCollection,g=i._clusterPointCollection;(0,a.Z)(Z)?Z.removeAll():Z=i._clusterLabelCollection=new _.Z({scene:e}),(0,a.Z)(v)?v.removeAll():v=i._clusterBillboardCollection=new c.Z({scene:e}),(0,a.Z)(g)?g.removeAll():g=i._clusterPointCollection=new m.Z;var C,w,O,V,A,R,U,L,T,N,k,B,H=i._pixelRange,z=i._minimumClusterSize,j=i._previousClusters,F=[],G=i._previousHeight,W=e.camera.positionCartographic.height,q=e.mapProjection.ellipsoid,X=e.camera.positionWC,Y=new l.Z(q,X),J=[];i._clusterLabels&&P(r,J,e,Y,i),i._clusterBillboards&&P(d,J,e,Y,i),i._clusterPoints&&P(p,J,e,Y,i);var K=new f.Z(J,y,b,64,Int32Array);if(W<G)for(O=j.length,C=0;C<O;++C){var Q=j[C];if(Y.isPointVisible(Q.position)){var $=u.Z._computeScreenSpacePosition(h.Z.IDENTITY,Q.position,s.Z.ZERO,n.Z.ZERO,e);if((0,a.Z)($)){var ii=1-W/G,ti=Q.width=Q.width*ii,ei=Q.height=Q.height*ii;ti=Math.max(ti,Q.minimumWidth),ei=Math.max(ei,Q.minimumHeight);var oi=$.x-.5*ti,ni=$.y-.5*ei,si=$.x+ti,ri=$.y+ei;for(A=K.range(oi,ni,si,ri),R=A.length,N=0,T=[],w=0;w<R;++w)U=A[w],L=J[U],L.clustered||(++N,k=L.collection,B=L.index,T.push(k.get(B).id));if(N>=z)for(E(Q.position,N,T,i),F.push(Q),w=0;w<R;++w)J[A[w]].clustered=!0}}}for(O=J.length,C=0;C<O;++C){var ai=J[C];if(!ai.clustered){ai.clustered=!0,k=ai.collection,B=ai.index;var li=k.get(B);V=S(li,ai.coord,H,i,M);var di=o.Z.clone(V,D);A=K.range(V.x,V.y,V.x+V.width,V.y+V.height),R=A.length;var hi=s.Z.clone(li.position);for(N=1,T=[li.id],w=0;w<R;++w)if(U=A[w],L=J[U],!L.clustered){var ui=L.collection.get(L.index),ci=S(ui,L.coord,H,i,I);s.Z.add(ui.position,hi,hi),o.Z.union(di,ci,di),++N,T.push(ui.id)}if(N>=z){var pi=s.Z.multiplyByScalar(hi,1/N,hi);for(E(pi,N,T,i),F.push({position:pi,width:di.width,height:di.height,minimumWidth:V.width,minimumHeight:V.height}),w=0;w<R;++w)J[A[w]].clustered=!0}else x(li,i)}}0===Z.length&&(Z.destroy(),i._clusterLabelCollection=void 0),0===v.length&&(v.destroy(),i._clusterBillboardCollection=void 0),0===g.length&&(g.destroy(),i._clusterPointCollection=void 0),i._previousClusters=F,i._previousHeight=W}}}}function A(i,t,e,o){return function(n){var s=this[i];(0,a.Z)(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});var r,l,d=this._collectionIndicesByEntity[n.id];if((0,a.Z)(d)||(d=this._collectionIndicesByEntity[n.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),(0,a.Z)(s)&&(0,a.Z)(d[o]))return s.get(d[o]);(0,a.Z)(s)||(s=this[i]=new t({scene:this._scene}));var h=this[e];return h.length>0?(r=h.pop(),l=s.get(r)):(l=s.add(),r=s.length-1),d[o]=r,this._clusterDirty=!0,l}}function R(i,t){var e=i._collectionIndicesByEntity[t];(0,a.Z)(e.billboardIndex)||(0,a.Z)(e.labelIndex)||(0,a.Z)(e.pointIndex)||delete i._collectionIndicesByEntity[t]}function U(i){if((0,a.Z)(i))for(var t=i.length,e=0;e<t;++e)i.get(e).clusterShow=!0}function L(i){i.enabled||((0,a.Z)(i._clusterLabelCollection)&&i._clusterLabelCollection.destroy(),(0,a.Z)(i._clusterBillboardCollection)&&i._clusterBillboardCollection.destroy(),(0,a.Z)(i._clusterPointCollection)&&i._clusterPointCollection.destroy(),i._clusterLabelCollection=void 0,i._clusterBillboardCollection=void 0,i._clusterPointCollection=void 0,U(i._labelCollection),U(i._billboardCollection),U(i._pointCollection))}g.prototype._initialize=function(i){this._scene=i;var t=V(this);this._cluster=t,this._removeEventListener=i.camera.changed.addEventListener(t)},Object.defineProperties(g.prototype,{enabled:{get:function(){return this._enabled},set:function(i){this._enabledDirty=i!==this._enabled,this._enabled=i}},pixelRange:{get:function(){return this._pixelRange},set:function(i){this._clusterDirty=this._clusterDirty||i!==this._pixelRange,this._pixelRange=i}},minimumClusterSize:{get:function(){return this._minimumClusterSize},set:function(i){this._clusterDirty=this._clusterDirty||i!==this._minimumClusterSize,this._minimumClusterSize=i}},clusterEvent:{get:function(){return this._clusterEvent}},clusterBillboards:{get:function(){return this._clusterBillboards},set:function(i){this._clusterDirty=this._clusterDirty||i!==this._clusterBillboards,this._clusterBillboards=i}},clusterLabels:{get:function(){return this._clusterLabels},set:function(i){this._clusterDirty=this._clusterDirty||i!==this._clusterLabels,this._clusterLabels=i}},clusterPoints:{get:function(){return this._clusterPoints},set:function(i){this._clusterDirty=this._clusterDirty||i!==this._clusterPoints,this._clusterPoints=i}}}),g.prototype.getLabel=A("_labelCollection",_.Z,"_unusedLabelIndices","labelIndex"),g.prototype.removeLabel=function(i){var t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[i.id];if((0,a.Z)(this._labelCollection)&&(0,a.Z)(t)&&(0,a.Z)(t.labelIndex)){var e=t.labelIndex;t.labelIndex=void 0,R(this,i.id);var o=this._labelCollection.get(e);o.show=!1,o.text="",o.id=void 0,this._unusedLabelIndices.push(e),this._clusterDirty=!0}},g.prototype.getBillboard=A("_billboardCollection",c.Z,"_unusedBillboardIndices","billboardIndex"),g.prototype.removeBillboard=function(i){var t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[i.id];if((0,a.Z)(this._billboardCollection)&&(0,a.Z)(t)&&(0,a.Z)(t.billboardIndex)){var e=t.billboardIndex;t.billboardIndex=void 0,R(this,i.id);var o=this._billboardCollection.get(e);o.id=void 0,o.show=!1,o.image=void 0,this._unusedBillboardIndices.push(e),this._clusterDirty=!0}},g.prototype.getPoint=A("_pointCollection",m.Z,"_unusedPointIndices","pointIndex"),g.prototype.removePoint=function(i){var t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[i.id];if((0,a.Z)(this._pointCollection)&&(0,a.Z)(t)&&(0,a.Z)(t.pointIndex)){var e=t.pointIndex;t.pointIndex=void 0,R(this,i.id);var o=this._pointCollection.get(e);o.show=!1,o.id=void 0,this._unusedPointIndices.push(e),this._clusterDirty=!0}},g.prototype.update=function(i){var t;this.show&&((0,a.Z)(this._labelCollection)&&this._labelCollection.length>0&&0===this._labelCollection.get(0)._glyphs.length&&(t=i.commandList,i.commandList=[],this._labelCollection.update(i),i.commandList=t),(0,a.Z)(this._billboardCollection)&&this._billboardCollection.length>0&&!(0,a.Z)(this._billboardCollection.get(0).width)&&(t=i.commandList,i.commandList=[],this._billboardCollection.update(i),i.commandList=t),this._enabledDirty&&(this._enabledDirty=!1,L(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),(0,a.Z)(this._clusterLabelCollection)&&this._clusterLabelCollection.update(i),(0,a.Z)(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(i),(0,a.Z)(this._clusterPointCollection)&&this._clusterPointCollection.update(i),(0,a.Z)(this._labelCollection)&&this._labelCollection.update(i),(0,a.Z)(this._billboardCollection)&&this._billboardCollection.update(i),(0,a.Z)(this._pointCollection)&&this._pointCollection.update(i))},g.prototype.destroy=function(){this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),(0,a.Z)(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1},t["Z"]=g},69516:function(i,t,e){var o=e(8629),n=e(39960),s=e(82982),r=e(12572),a=e(14459),l=e(22841),d=e(55293),h=e(9407),u=e(77808),c=e(11895),p={id:void 0};function _(i){if(i._firing)i._refire=!0;else if(0===i._suspendCount){var t=i._addedEntities,e=i._removedEntities,o=i._changedEntities;if(0!==o.length||0!==t.length||0!==e.length){i._firing=!0;do{i._refire=!1;var n=t.values.slice(0),s=e.values.slice(0),r=o.values.slice(0);t.removeAll(),e.removeAll(),o.removeAll(),i._collectionChanged.raiseEvent(i,n,s,r)}while(i._refire);i._firing=!1}}}function Z(i){this._owner=i,this._entities=new o.Z,this._addedEntities=new o.Z,this._removedEntities=new o.Z,this._changedEntities=new o.Z,this._suspendCount=0,this._collectionChanged=new a.Z,this._id=(0,n.Z)(),this._show=!0,this._firing=!1,this._refire=!1}Z.prototype.suspendEvents=function(){this._suspendCount++},Z.prototype.resumeEvents=function(){if(0===this._suspendCount)throw new r.Z("resumeEvents can not be called before suspendEvents.");this._suspendCount--,_(this)},Z.collectionChangedEventCallback=void 0,Object.defineProperties(Z.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(i){if(!(0,s.Z)(i))throw new r.Z("value is required.");if(i!==this._show){var t;this.suspendEvents();var e=[],o=this._entities.values,n=o.length;for(t=0;t<n;t++)e.push(o[t].isShowing);for(this._show=i,t=0;t<n;t++){var a=e[t],l=o[t];a!==l.isShowing&&l.definitionChanged.raiseEvent(l,"isShowing",l.isShowing,a)}this.resumeEvents()}}},owner:{get:function(){return this._owner}}}),Z.prototype.computeAvailability=function(){for(var i=l.Z.MAXIMUM_VALUE,t=l.Z.MINIMUM_VALUE,e=this._entities.values,o=0,n=e.length;o<n;o++){var r=e[o],a=r.availability;if((0,s.Z)(a)){var h=a.start,c=a.stop;d.Z.lessThan(h,i)&&!h.equals(l.Z.MINIMUM_VALUE)&&(i=h),d.Z.greaterThan(c,t)&&!c.equals(l.Z.MAXIMUM_VALUE)&&(t=c)}}return l.Z.MAXIMUM_VALUE.equals(i)&&(i=l.Z.MINIMUM_VALUE),l.Z.MINIMUM_VALUE.equals(t)&&(t=l.Z.MAXIMUM_VALUE),new u.Z({start:i,stop:t})},Z.prototype.add=function(i){if(!(0,s.Z)(i))throw new r.Z("entity is required.");i instanceof c.Z||(i=new c.Z(i));var t=i.id,e=this._entities;if(e.contains(t))throw new h.Z("An entity with id "+t+" already exists in this collection.");return i.entityCollection=this,e.set(t,i),this._removedEntities.remove(t)||this._addedEntities.set(t,i),i.definitionChanged.addEventListener(Z.prototype._onEntityDefinitionChanged,this),_(this),i},Z.prototype.remove=function(i){return!!(0,s.Z)(i)&&this.removeById(i.id)},Z.prototype.contains=function(i){if(!(0,s.Z)(i))throw new r.Z("entity is required");return this._entities.get(i.id)===i},Z.prototype.removeById=function(i){if(!(0,s.Z)(i))return!1;var t=this._entities,e=t.get(i);return!!this._entities.remove(i)&&(this._addedEntities.remove(i)||(this._removedEntities.set(i,e),this._changedEntities.remove(i)),this._entities.remove(i),e.definitionChanged.removeEventListener(Z.prototype._onEntityDefinitionChanged,this),_(this),!0)},Z.prototype.removeAll=function(){for(var i=this._entities,t=i.length,e=i.values,o=this._addedEntities,n=this._removedEntities,r=0;r<t;r++){var a=e[r],l=a.id,d=o.get(l);(0,s.Z)(d)||(a.definitionChanged.removeEventListener(Z.prototype._onEntityDefinitionChanged,this),n.set(l,a))}i.removeAll(),o.removeAll(),this._changedEntities.removeAll(),_(this)},Z.prototype.getById=function(i){if(!(0,s.Z)(i))throw new r.Z("id is required.");return this._entities.get(i)},Z.prototype.getOrCreateEntity=function(i){if(!(0,s.Z)(i))throw new r.Z("id is required.");var t=this._entities.get(i);return(0,s.Z)(t)||(p.id=i,t=new c.Z(p),this.add(t)),t},Z.prototype._onEntityDefinitionChanged=function(i){var t=i.id;this._addedEntities.contains(t)||this._changedEntities.set(t,i),_(this)},t["Z"]=Z},68134:function(i,t,e){var o=e(60216),n=e(66553),s=e(62200),r=e(82982),a=e(50491),l=e(99819),d=e(55293),h=e(99417),u=e(68201),c=e(72248),p=e(95555),_=e(89917),Z=new u.Z,m=new u.Z,v=new u.Z,f=new c.Z,g=new o.Z,y=new o.Z,b=new o.Z,C=new o.Z,w=new o.Z,S=new o.Z,x=new d.Z,E=1.25;function O(i,t,e,n,s,a,l){var c=i.scene.mode,O=s.getValue(a,i._lastCartesian);if((0,r.Z)(O)){var P,M,D,I,V,A,R=!1,U=!1;if(c===_.Z.SCENE3D){d.Z.addSeconds(a,.001,x);var L=s.getValue(x,g);if((0,r.Z)(L)||(d.Z.addSeconds(a,-.001,x),L=s.getValue(x,g),U=!0),(0,r.Z)(L)){var T,N=p.Z.computeFixedToIcrfMatrix(a,Z),k=p.Z.computeFixedToIcrfMatrix(x,m);(0,r.Z)(N)&&(0,r.Z)(k)?T=u.Z.transpose(N,v):(T=p.Z.computeTemeToPseudoFixedMatrix(a,v),N=u.Z.transpose(T,Z),k=p.Z.computeTemeToPseudoFixedMatrix(x,m),u.Z.transpose(k,k));var B=u.Z.multiplyByVector(N,O,w),H=u.Z.multiplyByVector(k,L,S);o.Z.subtract(B,H,C);var z=1e3*o.Z.magnitude(C),j=h.Z.GRAVITATIONALPARAMETER,F=-j/(z*z-2*j/o.Z.magnitude(B));F<0||F>E*l.maximumRadius?(P=y,o.Z.normalize(O,P),o.Z.negate(P,P),D=o.Z.clone(o.Z.UNIT_Z,b),M=o.Z.cross(D,P,g),o.Z.magnitude(M)>h.Z.EPSILON7&&(o.Z.normalize(P,P),o.Z.normalize(M,M),D=o.Z.cross(P,M,b),o.Z.normalize(D,D),R=!0)):o.Z.equalsEpsilon(O,L,h.Z.EPSILON7)||(D=y,o.Z.normalize(B,D),o.Z.normalize(H,H),M=o.Z.cross(D,H,b),U&&(M=o.Z.multiplyByScalar(M,-1,M)),o.Z.equalsEpsilon(M,o.Z.ZERO,h.Z.EPSILON7)||(P=o.Z.cross(M,D,g),u.Z.multiplyByVector(T,P,P),u.Z.multiplyByVector(T,M,M),u.Z.multiplyByVector(T,D,D),o.Z.normalize(P,P),o.Z.normalize(M,M),o.Z.normalize(D,D),R=!0))}}(0,r.Z)(i.boundingSphere)&&(O=i.boundingSphere.center),n&&(I=o.Z.clone(t.position,C),V=o.Z.clone(t.direction,w),A=o.Z.clone(t.up,S));var G=f;R?(G[0]=P.x,G[1]=P.y,G[2]=P.z,G[3]=0,G[4]=M.x,G[5]=M.y,G[6]=M.z,G[7]=0,G[8]=D.x,G[9]=D.y,G[10]=D.z,G[11]=0,G[12]=O.x,G[13]=O.y,G[14]=O.z,G[15]=0):p.Z.eastNorthUpToFixedFrame(O,l,G),t._setTransform(G),n&&(o.Z.clone(I,t.position),o.Z.clone(V,t.direction),o.Z.clone(A,t.up),o.Z.cross(V,A,t.right))}if(e){var W=c===_.Z.SCENE2D||o.Z.equals(i._offset3D,o.Z.ZERO)?void 0:i._offset3D;t.lookAtTransform(t.transform,W)}}function P(i,t,e){n.Z.defined("entity",i),n.Z.defined("scene",t),this.entity=i,this.scene=t,this.ellipsoid=(0,s.Z)(e,a.Z.WGS84),this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new o.Z,this._defaultOffset3D=void 0,this._offset3D=new o.Z}Object.defineProperties(P,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(i){this._defaultOffset3D=o.Z.clone(i,new o.Z)}}}),P.defaultOffset3D=new o.Z(-14e3,3500,3500);var M=new l.Z,D=new o.Z;P.prototype.update=function(i,t){n.Z.defined("time",i);var e=this.scene,s=this.ellipsoid,a=e.mode;if(a!==_.Z.MORPHING){var l=this.entity,d=l.position;if((0,r.Z)(d)){var u=l!==this._lastEntity,c=a!==this._mode,p=e.camera,Z=u||c,m=!0;if(u){var v=l.viewFrom,f=(0,r.Z)(v);if(!f&&(0,r.Z)(t)){M.pitch=-h.Z.PI_OVER_FOUR,M.range=0;var g=d.getValue(i,D);if((0,r.Z)(g)){var y=2-1/Math.max(1,o.Z.magnitude(g)/s.maximumRadius);M.pitch*=y}p.viewBoundingSphere(t,M),this.boundingSphere=t,Z=!1,m=!1}else f&&(0,r.Z)(v.getValue(i,this._offset3D))||o.Z.clone(P._defaultOffset3D,this._offset3D)}else c||this._mode===_.Z.SCENE2D||o.Z.clone(p.position,this._offset3D);this._lastEntity=l,this._mode=a,O(this,p,Z,m,d,i,s)}}},t["Z"]=P}}]);
//# sourceMappingURL=chunk-vendors-9dfbd5c0-legacy.bf69f602.js.map