"use strict";(self["webpackChunkvue3_webpack5"]=self["webpackChunkvue3_webpack5"]||[]).push([[270],{59709:function(e,t,i){var n=i(48243),r=i(60216),o=i(59947),s=i(92062),a=i(17711),u=i(62200),l=i(82982),c=i(11954),h=i(86511),m=i(50491),d=i(84935),p=i(55293),_=i(99417),g=i(68201),f=i(72248),v=i(25405),Z=i(91473),y=i(96190),b=i(22426),S=i(63181),T=i(6224),E=i(82968),C=i(68985),P=i(9407),L=i(13222),x=i(95563),D=i(96706),M=i(41059),w=i(1157),V=i(94170),O=i(36819),R=i(67334),A=i(20107),F=i(81326),B=i(61773),I=i(16240),N=i(89917),U=i(17106),k=i(96811),q=i(60516),W=i(8796),H=i(43338),z=i(8379);function G(e,t,i,n){this._tileset=e,this._header=i;var r=i.content;this.transform=(0,l.Z)(i.transform)?f.Z.unpack(i.transform):f.Z.clone(f.Z.IDENTITY);var s,a,u,c,h=(0,l.Z)(n)?n.computedTransform:e.modelMatrix,m=f.Z.multiply(h,this.transform,new f.Z),d=(0,l.Z)(n)?n._initialTransform:f.Z.IDENTITY;this._initialTransform=f.Z.multiply(d,this.transform,new f.Z),this.computedTransform=m,this._boundingVolume=this.createBoundingVolume(i.boundingVolume,m),this._boundingVolume2D=void 0,(0,l.Z)(r)&&(0,l.Z)(r.boundingVolume)&&(s=this.createBoundingVolume(r.boundingVolume,m)),this._contentBoundingVolume=s,this._contentBoundingVolume2D=void 0,(0,l.Z)(i.viewerRequestVolume)&&(a=this.createBoundingVolume(i.viewerRequestVolume,m)),this._viewerRequestVolume=a,this.geometricError=i.geometricError,this._geometricError=i.geometricError,(0,l.Z)(this._geometricError)||(this._geometricError=(0,l.Z)(n)?n.geometricError:e._geometricError,G._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),(0,l.Z)(i.refine)?("replace"!==i.refine&&"add"!==i.refine||G._deprecationWarning("lowercase-refine",'This tile uses a lowercase refine "'+i.refine+'". Instead use "'+i.refine.toUpperCase()+'".'),u="REPLACE"===i.refine.toUpperCase()?O.Z.REPLACE:O.Z.ADD):u=(0,l.Z)(n)?n.refine:O.Z.REPLACE,this.refine=u,this.children=[],this.parent=n;var _,g,v,Z,y=!1,b=!1;if(t=C.Z.createIfNeeded(t),(0,F.Z)(i,"3DTILES_multiple_contents"))b=!0,_=D.Z.UNLOADED,g=t.clone();else if((0,l.Z)(r)){var T=r.uri;(0,l.Z)(r.url)&&(G._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),T=r.url),_=D.Z.UNLOADED,g=t.getDerivedResource({url:T}),v=S.Z.getServerKey(g.getUrlComponent())}else c=new R.Z(e,this),y=!0,_=D.Z.READY;if(this._content=c,this._contentResource=g,this._contentState=_,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this._expiredContent=void 0,this._serverKey=v,this.hasEmptyContent=y,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasMultipleContents=b,(0,F.Z)(i,"3DTILES_metadata")){var E=i.extensions["3DTILES_metadata"],P=e.metadata.schema.classes,L=P[E.class];Z=new W.Z({tile:E,class:L})}this.metadata=Z,this.cacheNode=void 0;var x,M,V=i.expire;(0,l.Z)(V)&&(x=V.duration,(0,l.Z)(V.date)&&(M=p.Z.fromIso8601(V.date))),this.expireDuration=x,this.expireDate=M,this.lastStyleTime=0,this._optimChildrenWithinParent=w.Z.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=o.Z.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new p.Z,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}G._deprecationWarning=c.Z,Object.defineProperties(G.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return(0,u.Z)(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},extras:{get:function(){return this._header.extras}},color:{get:function(){return(0,l.Z)(this._color)||(this._color=new o.Z),o.Z.clone(this._color)},set:function(e){this._color=o.Z.clone(e,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&!this.hasEmptyContent&&!this.hasTilesetContent&&!this.hasImplicitContent||(0,l.Z)(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===D.Z.READY}},contentUnloaded:{get:function(){return this._contentState===D.Z.UNLOADED}},contentExpired:{get:function(){return this._contentState===D.Z.EXPIRED}},contentFailed:{get:function(){return this._contentState===D.Z.FAILED}},contentReadyToProcessPromise:{get:function(){if((0,l.Z)(this._contentReadyToProcessPromise))return this._contentReadyToProcessPromise.promise}},contentReadyPromise:{get:function(){if((0,l.Z)(this._contentReadyPromise))return this._contentReadyPromise.promise}},commandsLength:{get:function(){return this._commandsLength}}});var X=new r.Z;function j(e,t){var i=e._tileset,n=t.camera,o=e.boundingSphere,s=o.radius,a=r.Z.multiplyByScalar(n.directionWC,e._centerZDepth,X),u=r.Z.add(n.positionWC,a,X),c=r.Z.subtract(u,o.center,X),h=r.Z.magnitude(c),m=h>s;if(m){var d=r.Z.normalize(c,X),p=r.Z.multiplyByScalar(d,s,X),g=r.Z.add(o.center,p,X),f=r.Z.subtract(g,n.positionWC,X),v=r.Z.normalize(f,X);e._foveatedFactor=1-Math.abs(r.Z.dot(n.directionWC,v))}else e._foveatedFactor=0;var Z=e.refine===O.Z.REPLACE,y=i._skipLevelOfDetail;if(Z&&!y||!i.foveatedScreenSpaceError||1===i.foveatedConeSize||e._priorityProgressiveResolution&&Z&&y||i._pass===V.Z.PRELOAD_FLIGHT||i._pass===V.Z.PRELOAD)return!1;var b=1-Math.cos(.5*n.frustum.fov),S=i.foveatedConeSize*b;if(e._foveatedFactor<=S)return!1;var T=b-S,E=_.Z.clamp((e._foveatedFactor-S)/T,0,1),C=i.foveatedInterpolationCallback(i.foveatedMinimumScreenSpaceErrorRelaxation,i.maximumScreenSpaceError,E),P=0===e._screenSpaceError&&(0,l.Z)(e.parent)?.5*e.parent._screenSpaceError:e._screenSpaceError;return i.maximumScreenSpaceError-C<=P}var Y=new p.Z;function K(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;var i=t._screenSpaceErrorProgressiveResolution>e._maximumScreenSpaceError;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;var n=t.parent,r=e._maximumScreenSpaceError,o=t._screenSpaceErrorProgressiveResolution<=r,s=(0,l.Z)(n)&&n._screenSpaceErrorProgressiveResolution>r;return o&&s&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,i=!0),i}function J(e,t){var i=t.parent,n=(0,l.Z)(i)&&(!e._skipLevelOfDetail||0===t._screenSpaceError||i.hasTilesetContent||i.hasImplicitContent),r=n?i._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-r}function Q(e){if((0,l.Z)(e.expireDuration)){var t=p.Z.now(Y);p.Z.addSeconds(t,e.expireDuration,t),(0,l.Z)(e.expireDate)?p.Z.lessThan(e.expireDate,t)&&p.Z.clone(t,e.expireDate):e.expireDate=p.Z.clone(t)}}function $(e){return function(){return e._priority}}function ee(e){var t=e._content,i=e._tileset;if(!(0,l.Z)(t)){var n=e._header.extensions["3DTILES_multiple_contents"];t=new B.Z(i,e,e._contentResource.clone(),n),e._content=t}var r=t.requestInnerContents();return r>0?r:(e._contentState=D.Z.LOADING,e._contentReadyToProcessPromise=L.Z.defer(),e._contentReadyPromise=L.Z.defer(),t.contentsFetchedPromise.then((function(){if(e._contentState===D.Z.LOADING){if(!e.isDestroyed())return e._contentState=D.Z.PROCESSING,e._contentReadyToProcessPromise.resolve(t),t.readyPromise.then((function(t){e.isDestroyed()?te(e,i,"Tile was unloaded while content was processing"):(e._selectedFrame=0,e.lastStyleTime=0,p.Z.now(e._loadTimestamp),e._contentState=D.Z.READY,e._contentReadyPromise.resolve(t))}));te(e,i,"Tile was unloaded while content was loading")}})).otherwise((function(t){te(e,i,t)})),0)}function te(e,t,i){e._contentState===D.Z.PROCESSING&&--t.statistics.numberOfTilesProcessing,e._contentState=D.Z.FAILED,e._contentReadyPromise.reject(i),e._contentReadyToProcessPromise.reject(i)}function ie(e){var t=e._contentResource.clone(),i=e.contentExpired;i&&t.setQueryParameters({expired:e.expireDate.toString()});var n=new b.Z({throttle:!0,throttleByServer:!0,type:E.Z.TILES3D,priorityFunction:$(e),serverKey:e._serverKey});e._request=n,t.request=n;var r=t.fetchArrayBuffer();if(!(0,l.Z)(r))return 1;var o=e._contentState,s=e._tileset;return e._contentState=D.Z.LOADING,e._contentReadyToProcessPromise=L.Z.defer(),e._contentReadyPromise=L.Z.defer(),++s.statistics.numberOfPendingRequests,r.then((function(t){if(!e.isDestroyed()){var n=re(e,t);return i&&(e.expireDate=void 0),e._content=n,e._contentState=D.Z.PROCESSING,e._contentReadyToProcessPromise.resolve(n),--s.statistics.numberOfPendingRequests,n.readyPromise.then((function(t){e.isDestroyed()?ne(e,s):(Q(e),e._selectedFrame=0,e.lastStyleTime=0,p.Z.now(e._loadTimestamp),e._contentState=D.Z.READY,e._contentReadyPromise.resolve(t))}))}ne(e,s)})).otherwise((function(t){if(n.state===T.Z.CANCELLED)return e._contentState=o,--s.statistics.numberOfPendingRequests,void++s.statistics.numberOfAttemptedRequests;ne(e,s,t)})),0}function ne(e,t,i){e._contentState===D.Z.PROCESSING?--t.statistics.numberOfTilesProcessing:--t.statistics.numberOfPendingRequests,e._contentState=D.Z.FAILED,e._contentReadyPromise.reject(i),e._contentReadyToProcessPromise.reject(i)}function re(e,t){var i,n=(0,I.Z)(t),r=e._tileset;r._disableSkipLevelOfDetail=r._disableSkipLevelOfDetail||n.contentType===M.Z.GEOMETRY||n.contentType===M.Z.VECTOR,n.contentType===M.Z.IMPLICIT_SUBTREE&&(e.hasImplicitContent=!0),n.contentType===M.Z.EXTERNAL_TILESET&&(e.hasTilesetContent=!0);var o=x.Z[n.contentType];i=(0,l.Z)(n.binaryPayload)?o(r,e,e._contentResource,n.binaryPayload.buffer,0):o(r,e,e._contentResource,n.jsonPayload);var s=e._header.content;return i.groupMetadata=(0,A.Z)(r,s),i}G.prototype.getScreenSpaceError=function(e,t,i){var n=this._tileset,r=(0,u.Z)(i,1),o=(0,l.Z)(this.parent)?this.parent.geometricError:n._geometricError,s=t?o:this.geometricError;if(0===s)return 0;var a,c=e.camera,h=c.frustum,m=e.context,d=m.drawingBufferWidth,p=m.drawingBufferHeight*r;if(e.mode===N.Z.SCENE2D||h instanceof Z.Z){(0,l.Z)(h._offCenterFrustum)&&(h=h._offCenterFrustum);var g=Math.max(h.top-h.bottom,h.right-h.left)/Math.max(d,p);a=s/g}else{var f=Math.max(this._distanceToCamera,_.Z.EPSILON7),v=c.frustum.sseDenominator;if(a=s*p/(f*v),n.dynamicScreenSpaceError){var y=n._dynamicScreenSpaceErrorComputedDensity,b=n.dynamicScreenSpaceErrorFactor,S=_.Z.fog(f,y)*b;a-=S}}return a/=e.pixelRatio,a},G.prototype.updateVisibility=function(e){var t=this.parent,i=this._tileset,n=(0,l.Z)(t)?t.computedTransform:i.modelMatrix,r=(0,l.Z)(t)?t._visibilityPlaneMask:a.Z.MASK_INDETERMINATE;this.updateTransform(n),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,i.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,r),this._visible=this._visibilityPlaneMask!==a.Z.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=J(i,this),this._priorityProgressiveResolution=K(i,this),this.priorityDeferred=j(this,e)},G.prototype.updateExpiration=function(){if((0,l.Z)(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){var e=p.Z.now(Y);p.Z.lessThan(this.expireDate,e)&&(this._contentState=D.Z.EXPIRED,this._expiredContent=this._content)}},G.prototype.requestContent=function(){return this.hasEmptyContent?0:this.hasMultipleContents?ee(this):ie(this)},G.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},G.prototype.unloadContent=function(){this.hasEmptyContent||this.hasTilesetContent||this.hasImplicitContent||(this._content=this._content&&this._content.destroy(),this._contentState=D.Z.UNLOADED,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};var oe=new n.Z;function se(e,t){if(t.mode!==N.Z.SCENE3D&&!(0,l.Z)(e._boundingVolume2D)){var i=e._boundingVolume.boundingSphere,r=n.Z.projectTo2D(i,t.mapProjection,oe);e._boundingVolume2D=new q.Z(r.center,r.radius)}return t.mode!==N.Z.SCENE3D?e._boundingVolume2D:e._boundingVolume}function ae(e,t){if(t.mode!==N.Z.SCENE3D&&!(0,l.Z)(e._contentBoundingVolume2D)){var i=e._contentBoundingVolume.boundingSphere,r=n.Z.projectTo2D(i,t.mapProjection,oe);e._contentBoundingVolume2D=new q.Z(r.center,r.radius)}return t.mode!==N.Z.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}G.prototype.visibility=function(e,t){var i=e.cullingVolume,n=se(this,e),r=this._tileset,o=r.clippingPlanes;if((0,l.Z)(o)&&o.enabled){var s=o.computeIntersectionWithBoundingVolume(n,r.clippingPlanesOriginMatrix);if(this._isClipped=s!==d.Z.INSIDE,s===d.Z.OUTSIDE)return a.Z.MASK_OUTSIDE}return i.computeVisibilityWithPlaneMask(n,t)},G.prototype.contentVisibility=function(e){if(!(0,l.Z)(this._contentBoundingVolume))return d.Z.INSIDE;if(this._visibilityPlaneMask===a.Z.MASK_INSIDE)return d.Z.INSIDE;var t=e.cullingVolume,i=ae(this,e),n=this._tileset,r=n.clippingPlanes;if((0,l.Z)(r)&&r.enabled){var o=r.computeIntersectionWithBoundingVolume(i,n.clippingPlanesOriginMatrix);if(this._isClipped=o!==d.Z.INSIDE,o===d.Z.OUTSIDE)return d.Z.OUTSIDE}return t.computeVisibility(i)},G.prototype.distanceToTile=function(e){var t=se(this,e);return t.distanceToCamera(e)};var ue=new r.Z;G.prototype.distanceToTileCenter=function(e){var t=se(this,e),i=t.boundingVolume,n=r.Z.subtract(i.center,e.camera.positionWC,ue);return r.Z.dot(e.camera.directionWC,n)},G.prototype.insideViewerRequestVolume=function(e){var t=this._viewerRequestVolume;return!(0,l.Z)(t)||0===t.distanceToCamera(e)};var le=new g.Z,ce=new r.Z,he=new g.Z,me=new r.Z,de=new y.Z,pe=new v.Z,_e=new f.Z;function ge(e,t,i){var n=r.Z.fromElements(e[0],e[1],e[2],me),o=g.Z.fromArray(e,3,he);n=f.Z.multiplyByPoint(t,n,n);var s=f.Z.getMatrix3(t,le);return o=g.Z.multiply(s,o,o),(0,l.Z)(i)?(i.update(n,o),i):new H.Z(n,o)}function fe(e,t,i,n){var r=y.Z.unpack(e,0,de),o=e[4],s=e[5],a=v.Z.fromRectangle(r,o,s,m.Z.WGS84,pe),u=a.center,c=a.halfAxes;t=f.Z.multiplyTransformation(t,f.Z.inverseTransformation(i,_e),_e),u=f.Z.multiplyByPoint(t,u,u);var h=f.Z.getMatrix3(t,le);return c=g.Z.multiply(h,c,c),(0,l.Z)(n)&&n instanceof H.Z?(n.update(u,c),n):new H.Z(u,c)}function ve(e,t,i,n){if(!f.Z.equalsEpsilon(t,i,_.Z.EPSILON8))return fe(e,t,i,n);if((0,l.Z)(n))return n;var r=y.Z.unpack(e,0,de);return new U.Z({rectangle:r,minimumHeight:e[4],maximumHeight:e[5]})}function Ze(e,t,i){var n=r.Z.fromElements(e[0],e[1],e[2],me),o=e[3];n=f.Z.multiplyByPoint(t,n,n);var s=f.Z.getScale(t,ce),a=r.Z.maximumComponent(s);return o*=a,(0,l.Z)(i)?(i.update(n,o),i):new q.Z(n,o)}function ye(e,t,i,n){if(n.isRender){var r=(0,l.Z)(e._header.content)&&(0,l.Z)(e._header.content.boundingVolume),a=e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent,u=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!r;if(u){var c;c=e._finalResolution?a?o.Z.DARKGRAY:o.Z.WHITE:o.Z.YELLOW,(0,l.Z)(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(c)),e._debugBoundingVolume.update(i);var h=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");h.color=s.Z.toValue(c,h.color)}else!u&&(0,l.Z)(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&r?((0,l.Z)(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(o.Z.BLUE)),e._debugContentBoundingVolume.update(i)):!t.debugShowContentBoundingVolume&&(0,l.Z)(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&(0,l.Z)(e._viewerRequestVolume)?((0,l.Z)(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(o.Z.YELLOW)),e._debugViewerRequestVolume.update(i)):!t.debugShowViewerRequestVolume&&(0,l.Z)(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());var m=t.debugColorizeTiles&&!e._debugColorizeTiles||(0,l.Z)(t._heatmap.tilePropertyName),d=!t.debugColorizeTiles&&e._debugColorizeTiles;m?(t._heatmap.colorize(e,i),e._debugColorizeTiles=!0,e.color=e._debugColor):d&&(e._debugColorizeTiles=!1,e.color=o.Z.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),d&&t.makeStyleDirty()}}function be(e,t,i){var n=e._content,r=e._expiredContent;if(!e.hasMultipleContents&&(0,l.Z)(r)){if(!e.contentReady)return void r.update(t,i);e._expiredContent.destroy(),e._expiredContent=void 0}n.update(t,i)}function Se(e,t){var i=t.clippingPlanes,n=0;(0,l.Z)(i)&&e._isClipped&&i.enabled&&(n=i.clippingPlanesState),n!==e._clippingPlanesState&&(e._clippingPlanesState=n,e.clippingPlanesDirty=!0)}G.prototype.createBoundingVolume=function(e,t,i){if(!(0,l.Z)(e))throw new P.Z("boundingVolume must be defined");if((0,F.Z)(e,"3DTILES_bounding_volume_S2"))return new k.Z(e.extensions["3DTILES_bounding_volume_S2"]);if((0,l.Z)(e.box))return ge(e.box,t,i);if((0,l.Z)(e.region))return ve(e.region,t,this._initialTransform,i);if((0,l.Z)(e.sphere))return Ze(e.sphere,t,i);throw new P.Z("boundingVolume must contain a sphere, region, or box")},G.prototype.updateTransform=function(e){e=(0,u.Z)(e,f.Z.IDENTITY);var t=f.Z.multiply(e,this.transform,_e),i=!f.Z.equals(t,this.computedTransform);if(i){f.Z.clone(t,this.computedTransform);var n=this._header,r=this._header.content;this._boundingVolume=this.createBoundingVolume(n.boundingVolume,this.computedTransform,this._boundingVolume),(0,l.Z)(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(r.boundingVolume,this.computedTransform,this._contentBoundingVolume)),(0,l.Z)(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(n.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()}},G.prototype.updateGeometricErrorScale=function(){var e=f.Z.getScale(this.computedTransform,ce),t=r.Z.maximumComponent(e);this.geometricError=this._geometricError*t},G.prototype.update=function(e,t,i){var n=t.commandList.length;Se(this,e),ye(this,e,t,i),be(this,e,t);var r=t.commandList.length,o=r-n;this._commandsLength=o;for(var s=0;s<o;++s){var a=t.commandList[n+s],u=a.pass===z.Z.TRANSLUCENT;a.depthForTranslucentClassification=u}this.clippingPlanesDirty=!1};var Te=[];function Ee(e,t,i){var n=e*Math.pow(10,t),r=parseInt(n);return r*Math.pow(10,i)}function Ce(e,t,i){return Math.max(_.Z.normalize(e,t,i)-_.Z.EPSILON7,0)}G.prototype.process=function(e,t){var i=t.commandList;t.commandList=Te,this._content.update(e,t),Te.length=0,t.commandList=i},G.prototype.updatePriority=function(){var e=this.tileset,t=e.preferLeaves,i=e._minimumPriority,n=e._maximumPriority,r=4,o=1,s=0,a=r,u=s+a,l=r,c=u+l,h=o,m=Math.pow(10,c),d=c+h,p=o,_=Math.pow(10,d),g=d+p,f=Math.pow(10,g),v=Ce(this._depth,i.depth,n.depth);v=t?1-v:v;var Z=!e._skipLevelOfDetail&&this.refine===O.Z.REPLACE,y=Z?Ce(this._priorityHolder._distanceToCamera,i.distance,n.distance):Ce(this._priorityReverseScreenSpaceError,i.reverseScreenSpaceError,n.reverseScreenSpaceError),b=Ee(y,a,s),S=this._priorityProgressiveResolution?0:m,T=Ce(this._priorityHolder._foveatedFactor,i.foveatedFactor,n.foveatedFactor),E=Ee(T,l,u),C=this.priorityDeferred?_:0,P=e._pass===V.Z.PRELOAD_FLIGHT?0:f;this._priority=v+b+S+E+C+P},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),(0,h.Z)(this)},t["Z"]=G},49104:function(e,t,i){var n=i(53773),r=i(60838),o=i(60216),s=i(51688),a=i(66553),u=i(8182),l=i(52975),c=i(62200),h=i(82982),m=i(11954),d=i(86511),p=i(12572),_=i(50491),g=i(14459),f=i(55293),v=i(67519),Z=i(99417),y=i(72248),b=i(68985),S=i(9407),T=i(95555),E=i(39899),C=i(8379),P=i(10667),L=i(13222),x=i(66577),D=i(59709),M=i(95401),w=i(96706),V=i(67796),O=i(97318),R=i(94170),A=i(36819),F=i(49494),B=i(68263),I=i(95883),N=i(79459),U=i(21809),k=i(81326),q=i(14255),W=i(75692),H=i(7017),z=i(29388),G=i(45393),X=i(38956),j=i(89917),Y=i(34125),K=i(87233),J=i(17106),Q=i(60516),$=i(43338);function ee(e){e=(0,c.Z)(e,c.Z.EMPTY_OBJECT),a.Z.defined("options.url",e.url),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._gltfUpAxis=void 0,this._cache=new F.Z,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._cullWithChildrenBounds=(0,c.Z)(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new v.Z,this._maximumScreenSpaceError=(0,c.Z)(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=(0,c.Z)(e.maximumMemoryUsage,512),this._styleEngine=new N.Z,this._modelMatrix=(0,h.Z)(e.modelMatrix)?y.Z.clone(e.modelMatrix):y.Z.clone(y.Z.IDENTITY),this._statistics=new I.Z,this._statisticsLast=new I.Z,this._statisticsPerPass=new Array(R.Z.NUMBER_OF_PASSES);for(var t=0;t<R.Z.NUMBER_OF_PASSES;++t)this._statisticsPerPass[t]=new I.Z;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new B.Z(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=(0,c.Z)(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=(0,c.Z)(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=Z.Z.clamp((0,c.Z)(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=(0,c.Z)(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._readyPromise=L.Z.defer(),this._classificationType=e.classificationType,this._ellipsoid=(0,c.Z)(e.ellipsoid,_.Z.WGS84),this._initialClippingPlanesOriginMatrix=y.Z.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=(0,c.Z)(e.vectorClassificationOnly,!1),this._vectorKeepDecodedPositions=(0,c.Z)(e.vectorKeepDecodedPositions,!1),this.preloadWhenHidden=(0,c.Z)(e.preloadWhenHidden,!1),this.preloadFlightDestinations=(0,c.Z)(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=(0,c.Z)(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=(0,c.Z)(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=(0,c.Z)(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=(0,c.Z)(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=(0,c.Z)(e.foveatedInterpolationCallback,Z.Z.lerp),this.foveatedTimeDelay=(0,c.Z)(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=(0,c.Z)(e.shadows,Y.Z.ENABLED),this.show=(0,c.Z)(e.show,!0),this.colorBlendMode=M.Z.HIGHLIGHT,this.colorBlendAmount=.5,this.pointCloudShading=new G.Z(e.pointCloudShading),this._pointCloudEyeDomeLighting=new z.Z,this.loadProgress=new g.Z,this.allTilesLoaded=new g.Z,this.initialTilesLoaded=new g.Z,this.tileLoad=new g.Z,this.tileUnload=new g.Z,this.tileFailed=new g.Z,this.tileVisible=new g.Z,this.skipLevelOfDetail=(0,c.Z)(e.skipLevelOfDetail,!1),this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=(0,c.Z)(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=(0,c.Z)(e.skipScreenSpaceErrorFactor,16),this.skipLevels=(0,c.Z)(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=(0,c.Z)(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=(0,c.Z)(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._imageBasedLightingFactor=new r.Z(1,1),r.Z.clone(e.imageBasedLightingFactor,this._imageBasedLightingFactor),this.lightColor=e.lightColor,this.luminanceAtZenith=(0,c.Z)(e.luminanceAtZenith,.2),this.sphericalHarmonicCoefficients=e.sphericalHarmonicCoefficients,this.specularEnvironmentMaps=e.specularEnvironmentMaps,this.backFaceCulling=(0,c.Z)(e.backFaceCulling,!0),this.showOutline=(0,c.Z)(e.showOutline,!0),this.debugFreezeFrame=(0,c.Z)(e.debugFreezeFrame,!1),this.debugColorizeTiles=(0,c.Z)(e.debugColorizeTiles,!1),this.debugWireframe=(0,c.Z)(e.debugWireframe,!1),this.debugShowBoundingVolume=(0,c.Z)(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=(0,c.Z)(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=(0,c.Z)(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=(0,c.Z)(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=(0,c.Z)(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=(0,c.Z)(e.debugShowMemoryUsage,!1),this.debugShowUrl=(0,c.Z)(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0,this.metadata=void 0,this.customShader=e.customShader,this._schemaLoader=void 0;var i,o=this;(0,L.Z)(e.url).then((function(e){var t;return i=b.Z.createIfNeeded(e),o._resource=i,o._credits=i.credits,"json"===i.extension?t=i.getBaseUri(!0):i.isDataUri&&(t=""),o._url=i.url,o._basePath=t,ee.loadJson(i)})).then((function(e){return ie(o,e)})).then((function(e){o._root=o.loadTileset(i,e);var t=(0,h.Z)(e.asset.gltfUpAxis)?x.Z.fromName(e.asset.gltfUpAxis):x.Z.Y,r=e.asset;o._asset=r,o._properties=e.properties,o._geometricError=e.geometricError,o._extensionsUsed=e.extensionsUsed,o._extensions=e.extensions,o._gltfUpAxis=t,o._extras=e.extras;var s=r.extras;if((0,h.Z)(s)&&(0,h.Z)(s.cesium)&&(0,h.Z)(s.cesium.credits)){var a=s.cesium.credits,u=o._credits;(0,h.Z)(u)||(u=[],o._credits=u);for(var c=0;c<a.length;++c){var m=a[c];u.push(new l.Z(m.html,m.showOnScreen))}}var d=o._root.createBoundingVolume(e.root.boundingVolume,y.Z.IDENTITY),p=d.boundingSphere.center,_=o._ellipsoid.cartesianToCartographic(p);(0,h.Z)(_)&&_.height>n.Z._defaultMinTerrainHeight&&(o._initialClippingPlanesOriginMatrix=T.Z.eastNorthUpToFixedFrame(p)),o._clippingPlanesOriginMatrix=y.Z.clone(o._initialClippingPlanesOriginMatrix),o._readyPromise.resolve(o)})).otherwise((function(e){o._readyPromise.reject(e)}))}function te(e,t,i,n){if((0,k.Z)(i,"3DTILES_implicit_tiling")){var r=(0,h.Z)(e.metadata)?e.metadata.schema:void 0,o=new q.Z(t,i,r),s=new W.Z({subdivisionScheme:o.subdivisionScheme,subtreeLevels:o.subtreeLevels,level:0,x:0,y:0,z:0}),a=o.subtreeUriTemplate.getDerivedResource({templateValues:s.getTemplateValues()}).url,l={content:{uri:a}},c=!0,m=(0,u.Z)(l,i,c);delete m.extensions;var d=new D.Z(e,t,m,n);return d.implicitTileset=o,d.implicitCoordinates=s,d}return new D.Z(e,t,i,n)}function ie(e,t){if(!(0,k.Z)(t,"3DTILES_metadata"))return L.Z.resolve(t);var i,n=t.extensions["3DTILES_metadata"];if((0,h.Z)(n.schemaUri)){var r=e._resource.getDerivedResource({url:n.schemaUri});i=X.Z.loadSchema({resource:r})}else i=X.Z.loadSchema({schema:n.schema});return e._schemaLoader=i,i.promise.then((function(i){return e.metadata=new V.Z({schema:i.schema,extension:n}),t}))}Object.defineProperties(ee.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){if(!this.ready)throw new p.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._asset}},extensions:{get:function(){if(!this.ready)throw new p.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){U.Z.setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){if(!this.ready)throw new p.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._properties}},ready:{get:function(){return(0,h.Z)(this._root)}},readyPromise:{get:function(){return this._readyPromise.promise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return(0,m.Z)("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("maximumScreenSpaceError",e,0),this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMemoryUsage=e}},root:{get:function(){if(!this.ready)throw new p.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._root}},boundingSphere:{get:function(){if(!this.ready)throw new p.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=y.Z.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){var e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return(0,h.Z)(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(y.Z.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):y.Z.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("foveatedConeSize",e,0),a.Z.typeOf.number.lessThanOrEquals("foveatedConeSize",e,1),this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,0),a.Z.typeOf.number.lessThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,this.maximumScreenSpaceError),this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){if(!this.ready)throw new p.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._extras}},imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){a.Z.typeOf.object("imageBasedLightingFactor",e),a.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),a.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),a.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),a.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1),r.Z.clone(e,this._imageBasedLightingFactor)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}}}),ee.loadJson=function(e){var t=b.Z.createIfNeeded(e);return t.fetchJson()},ee.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},ee.prototype.loadTileset=function(e,t,i){var n=t.asset;if(!(0,h.Z)(n))throw new S.Z("Tileset must have an asset property.");if("0.0"!==n.version&&"1.0"!==n.version)throw new S.Z("The tileset must be 3D Tiles version 0.0 or 1.0.");(0,h.Z)(t.extensionsRequired)&&ee.checkSupportedExtensions(t.extensionsRequired);var r=this._statistics,o=n.tilesetVersion;(0,h.Z)(o)&&(this._basePath+="?v="+o,e=e.clone(),e.setQueryParameters({v:o}));var s=te(this,e,t.root,i);(0,h.Z)(i)&&(i.children.push(s),s._depth=i._depth+1);var a=[];a.push(s);while(a.length>0){var u=a.pop();++r.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&u.refine===A.Z.ADD;var l=u._header.children;if((0,h.Z)(l))for(var c=l.length,m=0;m<c;++m){var d=l[m],p=te(this,e,d,u);u.children.push(p),p._depth=u._depth+1,a.push(p)}this._cullWithChildrenBounds&&O.Z.checkChildrenWithinParent(u)}return s};var ne=new o.Z,re=new s.Z,oe=new y.Z,se=new o.Z,ae=new o.Z,ue=new o.Z;function le(e,t){var i,n,r,a,u,l=t.camera,c=e._root,h=c.contentBoundingVolume;if(h instanceof J.Z)i=o.Z.normalize(l.positionWC,ne),n=l.directionWC,r=l.positionCartographic.height,a=h.minimumHeight,u=h.maximumHeight;else{var m=y.Z.inverseTransformation(c.computedTransform,oe),d=t.mapProjection.ellipsoid,p=h.boundingVolume,_=y.Z.multiplyByPoint(m,p.center,se);if(o.Z.magnitude(_)>d.minimumRadius){var g=s.Z.fromCartesian(_,d,re);i=o.Z.normalize(l.positionWC,ne),n=l.directionWC,r=l.positionCartographic.height,a=0,u=2*g.height}else{var f=y.Z.multiplyByPoint(m,l.positionWC,ae);if(i=o.Z.UNIT_Z,n=y.Z.multiplyByPointAsVector(m,l.directionWC,ue),n=o.Z.normalize(n,n),r=f.z,h instanceof $.Z){var v=c._header.boundingVolume.box[11];a=_.z-v,u=_.z+v}else if(h instanceof Q.Z){var b=p.radius;a=_.z-b,u=_.z+b}}}var S=e.dynamicScreenSpaceErrorHeightFalloff,T=a+(u-a)*S,E=u,C=Z.Z.clamp((r-T)/(E-T),0,1),P=Math.abs(o.Z.dot(n,i)),L=1-P;L*=1-C;var x=e.dynamicScreenSpaceErrorDensity;x*=L,e._dynamicScreenSpaceErrorComputedDensity=x}function ce(e,t){if(!t.hasEmptyContent){var i=e._statistics,n=t.contentExpired,r=t.requestContent();r>0?i.numberOfAttemptedRequests+=r:(n&&(t.hasTilesetContent||t.hasImplicitContent?Le(e,t):(i.decrementLoadCounts(t.content),--i.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t),t.contentReadyToProcessPromise.then(pe(e,t)),t.contentReadyPromise.then(ge(e,t)).otherwise(_e(e,t)))}}function he(e,t){return e._priority-t._priority}function me(e,t){for(var i=e._requestedTilesInFlight,n=0,r=i.length,o=0;o<r;++o){var s=i[o],a=t.frameNumber-s._touchedFrame>=1;s._contentState===w.Z.LOADING?a?(s.cancelRequests(),++n):n>0&&(i[o-n]=s):++n}i.length-=n}function de(e,t){var i=e._requestedTiles,n=i.length;i.sort(he);for(var r=0;r<n;++r)ce(e,i[r])}function pe(e,t){return function(){e._processingQueue.push(t),++e._statistics.numberOfTilesProcessing}}function _e(e,t){return function(i){var n=t._contentResource.url,r=(0,h.Z)(i.message)?i.message:i.toString();e.tileFailed.numberOfListeners>0?e.tileFailed.raiseEvent({url:n,message:r}):(console.log("A 3D tile failed to load: "+n),console.log("Error: "+r))}}function ge(e,t){return function(){--e._statistics.numberOfTilesProcessing,t.hasTilesetContent||t.hasImplicitContent||(e._statistics.incrementLoadCounts(t.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(t)),e.tileLoad.raiseEvent(t)}}function fe(e){for(var t=e._processingQueue,i=t.length,n=0,r=0;r<i;++r){var o=t[r];o._contentState===w.Z.PROCESSING?n>0&&(t[r-n]=o):++n}t.length-=n}function ve(e,t){fe(e);for(var i=e._processingQueue,n=i.length,r=0;r<n;++r)i[r].process(e,t)}ee.prototype.postPassesUpdate=function(e){this.ready&&(me(this,e),Me(this,e),this._cache.unloadTiles(this,xe),this._styleEngine.resetDirty())},ee.prototype.prePassesUpdate=function(e){if(this.ready){ve(this,e);var t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,(0,h.Z)(t)&&t.enabled&&t.update(e),(0,h.Z)(this._loadTimestamp)||(this._loadTimestamp=f.Z.clone(e.time)),this._timeSinceLoad=Math.max(1e3*f.Z.secondsDifference(e.time,this._loadTimestamp),0),this._skipLevelOfDetail=this.skipLevelOfDetail&&!(0,h.Z)(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive,this.dynamicScreenSpaceError&&le(this,e),e.newFrame&&this._cache.reset()}};var Ze=new o.Z,ye={maximumFractionDigits:3};function be(e){var t=e/1048576;return t<1?t.toLocaleString(void 0,ye):Math.round(t).toLocaleString()}function Se(e){var t=e.boundingVolume.boundingVolume,i=t.halfAxes,n=t.radius,r=o.Z.clone(t.center,Ze);if((0,h.Z)(i))r.x+=.75*(i[0]+i[3]+i[6]),r.y+=.75*(i[1]+i[4]+i[7]),r.z+=.75*(i[2]+i[5]+i[8]);else if((0,h.Z)(n)){var s=o.Z.normalize(t.center,Ze);s=o.Z.multiplyByScalar(s,.75*n,Ze),r=o.Z.add(s,t.center,Ze)}return r}function Te(e,t,i){var n="",r=0;if(t.debugShowGeometricError&&(n+="\nGeometric error: "+e.geometricError,r++),t.debugShowRenderingStatistics){n+="\nCommands: "+e.commandsLength,r++;var o=e.content.pointsLength;o>0&&(n+="\nPoints: "+e.content.pointsLength,r++);var s=e.content.trianglesLength;s>0&&(n+="\nTriangles: "+e.content.trianglesLength,r++),n+="\nFeatures: "+e.content.featuresLength,r++}if(t.debugShowMemoryUsage&&(n+="\nTexture Memory: "+be(e.content.texturesByteLength),n+="\nGeometry Memory: "+be(e.content.geometryByteLength),r+=2),t.debugShowUrl)if(e.hasMultipleContents){n+="\nUrls:";for(var a=e.content.innerContentUrls,u=0;u<a.length;u++)n+="\n- "+a[u];r+=a.length}else n+="\nUrl: "+e._header.content.uri,r++;var l={text:n.substring(1),position:i,font:19-r+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(l)}function Ee(e,t){var i,n,o=e._selectedTiles,s=o.length,a=e._emptyTiles,u=a.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if((0,h.Z)(e.debugPickedTile)){var l=(0,h.Z)(e.debugPickPosition)?e.debugPickPosition:Se(e.debugPickedTile),c=Te(e.debugPickedTile,e,l);c.pixelOffset=new r.Z(15,-15)}}else{for(i=0;i<s;++i)n=o[i],Te(n,e,Se(n));for(i=0;i<u;++i)n=a[i],(n.hasTilesetContent||n.hasImplicitContent)&&Te(n,e,Se(n))}e._tileDebugLabels.update(t)}function Ce(e,t,i){e._styleEngine.applyStyle(e);var n,r,o=i.isRender,s=e._statistics,a=t.commandList,u=a.length,l=e._selectedTiles,c=l.length,m=e._emptyTiles,d=m.length,p=e.tileVisible,_=e._skipLevelOfDetail&&e._hasMixedContent&&t.context.stencilBuffer&&c>0;e._backfaceCommands.length=0,_&&((0,h.Z)(e._stencilClearCommand)||(e._stencilClearCommand=new E.Z({stencil:0,pass:C.Z.CESIUM_3D_TILE,renderState:P.Z.fromCache({stencilMask:K.Z.SKIP_LOD_MASK})})),a.push(e._stencilClearCommand));var g=a.length;for(n=0;n<c;++n)r=l[n],o&&p.raiseEvent(r),r.update(e,t,i),s.incrementSelectionCounts(r.content),++s.selected;for(n=0;n<d;++n)r=m[n],r.update(e,t,i);var f=a.length-g;if(e._backfaceCommands.trim(),_){var v=e._backfaceCommands.values,Z=v.length;for(a.length+=Z,n=f-1;n>=0;--n)a[g+Z+n]=a[g+n];for(n=0;n<Z;++n)a[g+n]=v[n]}f=a.length-u,s.numberOfCommands=f,o&&e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&f>0&&e._pointCloudEyeDomeLighting.update(t,u,e.pointCloudShading,e.boundingSphere),o&&(e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?((0,h.Z)(e._tileDebugLabels)||(e._tileDebugLabels=new H.Z),Ee(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}var Pe=[];function Le(e,t){var i=t,n=Pe;n.push(t);while(n.length>0){t=n.pop();for(var r=t.children,o=r.length,s=0;s<o;++s)n.push(r[s]);t!==i&&(De(e,t),--e._statistics.numberOfTilesTotal)}i.children=[]}function xe(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function De(e,t){e._cache.unloadTile(e,t,xe),t.destroy()}function Me(e,t){var i=e._statistics,n=e._statisticsLast,r=i.numberOfPendingRequests,o=i.numberOfTilesProcessing,s=n.numberOfPendingRequests,a=n.numberOfTilesProcessing;I.Z.clone(i,n);var u=r!==s||o!==a;u&&t.afterRender.push((function(){e.loadProgress.raiseEvent(r,o)})),e._tilesLoaded=0===i.numberOfPendingRequests&&0===i.numberOfTilesProcessing&&0===i.numberOfAttemptedRequests,u&&e._tilesLoaded&&(t.afterRender.push((function(){e.allTilesLoaded.raiseEvent()})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){e.initialTilesLoaded.raiseEvent()}))))}function we(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function Ve(e,t){t.frameNumber===e._updatedModelMatrixFrame&&(0,h.Z)(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!y.Z.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=y.Z.clone(e.modelMatrix,e._previousModelMatrix)))}function Oe(e,t,i,n){if(t.mode===j.Z.MORPHING)return!1;if(!e.ready)return!1;var r=e._statistics;r.clear();var o=n.isRender;++e._updatedVisibilityFrame,we(e),Ve(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;var s=n.traversal.selectTiles(e,t);if(n.requestTiles&&de(e),Ce(e,t,n),I.Z.clone(r,i),o){var a=e._credits;if((0,h.Z)(a)&&0!==r.selected)for(var u=a.length,l=0;l<u;++l)t.creditDisplay.addCredit(a[l])}return s}ee.prototype.trimLoadedTiles=function(){this._cache.trim()},ee.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},ee.prototype.updateForPass=function(e,t){a.Z.typeOf.object("frameState",e),a.Z.typeOf.object("tilesetPassState",t);var i=t.pass;if((i!==R.Z.PRELOAD||this.preloadWhenHidden&&!this.show)&&(i!==R.Z.PRELOAD_FLIGHT||this.preloadFlightDestinations&&(this.show||this.preloadWhenHidden))&&(i!==R.Z.REQUEST_RENDER_MODE_DEFER_CHECK||!(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))){var n=e.commandList,r=e.camera,o=e.cullingVolume;t.ready=!1;var s=R.Z.getPassOptions(i),u=s.ignoreCommands,l=(0,c.Z)(t.commandList,n),h=l.length;e.commandList=l,e.camera=(0,c.Z)(t.camera,r),e.cullingVolume=(0,c.Z)(t.cullingVolume,o);var m=this._statisticsPerPass[i];(this.show||u)&&(this._pass=i,t.ready=Oe(this,e,m,s)),u&&(l.length=h),e.commandList=n,e.camera=r,e.cullingVolume=o}},ee.prototype.hasExtension=function(e){return!!(0,h.Z)(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},ee.prototype.isDestroyed=function(){return!1},ee.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,h.Z)(this._schemaLoader)&&X.Z.unload(this._schemaLoader),(0,h.Z)(this._root)){var e=Pe;e.push(this._root);while(e.length>0){var t=e.pop();t.destroy();for(var i=t.children,n=i.length,r=0;r<n;++r)e.push(i[r])}}return this._root=void 0,(0,d.Z)(this)},ee.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0},ee.checkSupportedExtensions=function(e){for(var t=0;t<e.length;t++)if(!ee.supportedExtensions[e[t]])throw new S.Z("Unsupported 3D Tiles Extension: "+e[t])},t["Z"]=ee},49494:function(e,t,i){var n=i(82982),r=i(96844);function o(){this._list=new r.Z,this._sentinel=this._list.add(),this._trimTiles=!1}o.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},o.prototype.touch=function(e){var t=e.cacheNode;(0,n.Z)(t)&&this._list.splice(this._sentinel,t)},o.prototype.add=function(e){(0,n.Z)(e.cacheNode)||(e.cacheNode=this._list.add(e))},o.prototype.unloadTile=function(e,t,i){var r=t.cacheNode;(0,n.Z)(r)&&(this._list.remove(r),t.cacheNode=void 0,i(e,t))},o.prototype.unloadTiles=function(e,t){var i=this._trimTiles;this._trimTiles=!1;var n=this._list,r=1024*e.maximumMemoryUsage*1024,o=this._sentinel,s=n.head;while(s!==o&&(e.totalMemoryUsageInBytes>r||i)){var a=s.item;s=s.next,this.unloadTile(e,a,t)}},o.prototype.trim=function(){this._trimTiles=!0},t["Z"]=o},68263:function(e,t,i){var n=i(59947),r=i(82982),o=i(55293),s=i(99417);function a(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function u(e,t){var i;return i="_loadTimestamp"===t?o.Z.toDate(e).getTime():e,i}function l(e,t){var i=e.tilePropertyName;if((0,r.Z)(i)){var n=u(t[i],i);return(0,r.Z)(n)?(e._maximum=Math.max(n,e._maximum),e._minimum=Math.min(n,e._minimum),n):(e.tilePropertyName=void 0,n)}}a.prototype.setReferenceMinimumMaximum=function(e,t,i){this._referenceMinimum[i]=u(e,i),this._referenceMaximum[i]=u(t,i)};var c=[new n.Z(.1,.1,.1,1),new n.Z(.153,.278,.878,1),new n.Z(.827,.231,.49,1),new n.Z(.827,.188,.22,1),new n.Z(1,.592,.259,1),new n.Z(1,.843,0,1)];a.prototype.colorize=function(e,t){var i=this.tilePropertyName;if((0,r.Z)(i)&&e.contentAvailable&&e._selectedFrame===t.frameNumber){var o=l(this,e),a=this._previousMinimum,u=this._previousMaximum;if(a!==Number.MAX_VALUE&&u!==-Number.MAX_VALUE){var h=u-a+s.Z.EPSILON7,m=s.Z.clamp(o-a,0,h),d=m/h,p=c.length-1,_=d*p,g=Math.floor(_),f=Math.ceil(_),v=_-g,Z=c[g],y=c[f],b=n.Z.clone(n.Z.WHITE);b.red=s.Z.lerp(Z.red,y.red,v),b.green=s.Z.lerp(Z.green,y.green,v),b.blue=s.Z.lerp(Z.blue,y.blue,v),e._debugColor=b}}},a.prototype.resetMinimumMaximum=function(){var e=this.tilePropertyName;if((0,r.Z)(e)){var t=this._referenceMinimum[e],i=this._referenceMaximum[e],n=(0,r.Z)(t)&&(0,r.Z)(i);this._previousMinimum=n?t:this._minimum,this._previousMaximum=n?i:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}},t["Z"]=a},67796:function(e,t,i){var n=i(66553),r=i(62200),o=i(82982),s=i(11654),a=i(38715);function u(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT);var t=e.extension,i=e.schema;n.Z.typeOf.object("options.extension",t),n.Z.typeOf.object("options.schema",i);var u,l={};if((0,o.Z)(t.groups))for(var c in t.groups)if(t.groups.hasOwnProperty(c)){var h=t.groups[c];l[c]=new s.Z({id:c,group:t.groups[c],class:i.classes[h.class]})}(0,o.Z)(t.tileset)&&(u=new a.Z({tileset:t.tileset,class:i.classes[t.tileset.class]})),this._schema=i,this._groups=l,this._tileset=u,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(u.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),t["Z"]=u},1793:function(e,t,i){var n=i(84935),r=i(67519),o=i(36819);function s(){}var a={stack:new r.Z,stackMaximumLength:0};function u(e){return e._visible&&e._inRequestVolume}function l(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function c(e){return!l(e)&&e.contentUnloaded}function h(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:(t.hasEmptyContent,!0))}function m(e,t,i,n){for(var r=t.children,o=r.length,s=0;s<o;++s){var a=r[s];a.updateVisibility(n),u(a)&&i.push(a)}}function d(e,t){(c(t)||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function p(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function _(e){++e.statistics.visited}function g(e,t,i){t.contentAvailable&&t.contentVisibility(i)!==n.Z.OUTSIDE&&e._selectedTiles.push(t)}s.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e._hasMixedContent=!1;var i=!0,n=e.root;if(n.updateVisibility(t),!u(n))return i;var r=a.stack;r.push(e.root);while(r.length>0){a.stackMaximumLength=Math.max(a.stackMaximumLength,r.length);var s=r.pop(),c=s.refine===o.Z.ADD,f=s.refine===o.Z.REPLACE,v=h(e,s);v&&m(e,s,r,t),(c||f&&!v)&&(d(e,s),p(e,s,t),g(e,s,t),l(s)||s.contentAvailable||(i=!1)),_(e)}return a.stack.trim(a.stackMaximumLength),i},t["Z"]=s},95883:function(e,t,i){var n=i(82982);function r(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function o(e,t,i,r){var s=t.innerContents,a=t.pointsLength,u=t.trianglesLength,l=t.featuresLength,c=t.geometryByteLength,h=t.texturesByteLength,m=t.batchTableByteLength;if(r?(e.numberOfFeaturesLoaded+=i?-l:l,e.numberOfPointsLoaded+=i?-a:a,e.geometryByteLength+=i?-c:c,e.texturesByteLength+=i?-h:h,e.batchTableByteLength+=i?-m:m):(e.numberOfFeaturesSelected+=i?-l:l,e.numberOfPointsSelected+=i?-a:a,e.numberOfTrianglesSelected+=i?-u:u),(0,n.Z)(s))for(var d=s.length,p=0;p<d;++p)o(e,s[p],i,r)}r.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},r.prototype.incrementSelectionCounts=function(e){o(this,e,!1,!1)},r.prototype.incrementLoadCounts=function(e){o(this,e,!1,!0)},r.prototype.decrementLoadCounts=function(e){o(this,e,!0,!0)},r.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength},t["Z"]=r},67346:function(e,t,i){var n=i(82982),r=i(84935),o=i(67519),s=i(1157),a=i(36819);function u(){}function l(e){return e._visible&&e._inRequestVolume}var c={stack:new o.Z,stackMaximumLength:0},h={stack:new o.Z,stackMaximumLength:0},m={stack:new o.Z,stackMaximumLength:0},d={stack:new o.Z,stackMaximumLength:0,ancestorStack:new o.Z,ancestorStackMaximumLength:0},p=2;function _(e,t,i){var n=e._maximumScreenSpaceError,r=e._maximumScreenSpaceError;k(e,t,n,r,i)}function g(e,t,i){var n=Number.MAX_VALUE,r=e._maximumScreenSpaceError;k(e,t,n,r,i),W(e,t,i)}function f(e,t,i){var n=Math.max(e.baseScreenSpaceError,e.maximumScreenSpaceError),r=e.maximumScreenSpaceError;k(e,t,n,r,i),W(e,t,i)}function v(e){return e._skipLevelOfDetail}function Z(e,t){e._emptyTiles.push(t)}function y(e,t,i){if(t.contentVisibility(i)!==r.Z.OUTSIDE){var n=t.content;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,t.lastStyleTime=0,e._selectedTilesToStyle.push(t)):t._selectedFrame<i.frameNumber-1&&e._selectedTilesToStyle.push(t),t._selectedFrame=i.frameNumber,e._selectedTiles.push(t)}}function b(e,t,i){var n=m.stack;n.push(t);while(n.length>0){m.stackMaximumLength=Math.max(m.stackMaximumLength,n.length);for(var r=n.pop(),o=r.children,s=o.length,a=0;a<s;++a){var u=o[a];l(u)&&(u.contentAvailable?(V(e,u,i),E(e,u,i),y(e,u,i)):u._depth-t._depth<p&&n.push(u))}}}function S(e,t,i){if(v(e)){var r=t.contentAvailable?t:t._ancestorWithContentAvailable;(0,n.Z)(r)?r._shouldSelect=!0:b(e,t,i)}else t.contentAvailable&&y(e,t,i)}function T(e,t,i){++e._statistics.visited,t._visitedFrame=i.frameNumber}function E(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function C(e,t){e._maximumPriority.distance=Math.max(t._priorityHolder._distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t._priorityHolder._distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t._depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t._depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t._priorityHolder._foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t._priorityHolder._foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.reverseScreenSpaceError=Math.max(t._priorityReverseScreenSpaceError,e._maximumPriority.reverseScreenSpaceError),e._minimumPriority.reverseScreenSpaceError=Math.min(t._priorityReverseScreenSpaceError,e._minimumPriority.reverseScreenSpaceError)}function P(e,t,i){if(!e._cullRequestsWhileMoving)return!0;var n=t.boundingSphere,r=Math.max(2*n.radius,1),o=i.camera,s=0!==o.positionWCDeltaMagnitude?o.positionWCDeltaMagnitude:o.positionWCDeltaMagnitudeLastFrame,a=e.cullRequestsWhileMovingMultiplier*s/r;return a<1}function L(e,t,i){if(t._requestedFrame!==i.frameNumber&&(A(t)||t.contentExpired)&&P(e,t,i)){var n=i.camera.timeSinceMoved<e.foveatedTimeDelay;t.priorityDeferred&&n||(t._requestedFrame=i.frameNumber,e._requestedTiles.push(t))}}function x(e,t,i){t._updatedVisibilityFrame!==e._updatedVisibilityFrame&&(t.updateVisibility(i),t._updatedVisibilityFrame=e._updatedVisibilityFrame)}function D(e,t,i){for(var n=!1,r=t.children,o=r.length,s=0;s<o;++s){var a=r[s];x(e,a,i),n=n||l(a)}return n}function M(e,t,i){var r=t.parent;return!(!(0,n.Z)(r)||r.hasTilesetContent||r.hasImplicitContent||r.refine!==a.Z.ADD)&&t.getScreenSpaceError(i,!0)<=e._maximumScreenSpaceError}function w(e,t,i){if(x(e,t,i),l(t)){var n=t.children.length>0;if((t.hasTilesetContent||t.hasImplicitContent)&&n){var r=t.children[0];return w(e,r,i),void(t._visible=r._visible)}if(!M(e,t,i)){var o=t.refine===a.Z.REPLACE,u=t._optimChildrenWithinParent===s.Z.USE_OPTIMIZATION;return o&&u&&n&&!D(e,t,i)?(++e._statistics.numberOfTilesCulledWithChildrenUnion,void(t._visible=!1)):void 0}t._visible=!1}}function V(e,t,i){w(e,t,i),t.updateExpiration(),t._wasMinPriorityChild=!1,t._priorityHolder=t,C(e,t),t._shouldSelect=!1,t._finalResolution=!0}function O(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;var i=e.parent;if((0,n.Z)(i)){var r=!A(i)||i._requestedFrame===t.frameNumber;e._ancestorWithContent=r?i:i._ancestorWithContent,e._ancestorWithContentAvailable=i.contentAvailable?i:i._ancestorWithContentAvailable}}function R(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function A(e){return!R(e)&&e.contentUnloaded}function F(e,t){var i=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||(0,n.Z)(i)&&t._screenSpaceError<i._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>i._depth+e.skipLevels)}function B(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}function I(e,t,i,n){var r,o=t.refine===a.Z.REPLACE,s=t.children,u=s.length;for(r=0;r<u;++r)V(e,s[r],n);s.sort(B);var c,h=!v(e)&&o&&!R(t),m=!0,d=!1,p=-1,_=Number.MAX_VALUE;for(r=0;r<u;++r){var g;if(c=s[r],l(c)?(i.push(c),c._foveatedFactor<_&&(p=r,_=c._foveatedFactor),d=!0):(h||e.loadSiblings)&&(c._foveatedFactor<_&&(p=r,_=c._foveatedFactor),L(e,c,n),E(e,c,n)),h)g=!!c._inRequestVolume&&(R(c)?q(e,c,n):c.contentAvailable),m=m&&g}if(d||(m=!1),-1!==p&&!v(e)&&o){var f=s[p];f._wasMinPriorityChild=!0;var Z=(t._wasMinPriorityChild||t===e.root)&&_<=t._priorityHolder._foveatedFactor?t._priorityHolder:t;for(Z._foveatedFactor=Math.min(f._foveatedFactor,Z._foveatedFactor),Z._distanceToCamera=Math.min(f._distanceToCamera,Z._distanceToCamera),r=0;r<u;++r)c=s[r],c._priorityHolder=Z}return m}function N(e,t,i){return!v(e)||!e.immediatelyLoadDesiredLevelOfDetail&&(!(0,n.Z)(t._ancestorWithContent)||(0===t._screenSpaceError?t.parent._screenSpaceError>i:t._screenSpaceError>i))}function U(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:t._screenSpaceError>e._maximumScreenSpaceError)}function k(e,t,i,r,o){var s=c.stack;s.push(t);while(s.length>0){c.stackMaximumLength=Math.max(c.stackMaximumLength,s.length);var u=s.pop();O(u,o);var l=N(e,u,i),h=u.refine===a.Z.ADD,m=u.refine===a.Z.REPLACE,d=u.parent,p=!(0,n.Z)(d)||d._refines,_=!1;U(e,u)&&(_=I(e,u,s,o)&&p);var g=!_&&p;R(u)?(Z(e,u,o),L(e,u,o),g&&S(e,u,o)):h?(S(e,u,o),L(e,u,o)):m&&(l?(L(e,u,o),g&&S(e,u,o)):g?(S(e,u,o),L(e,u,o)):F(e,u)&&L(e,u,o)),T(e,u,o),E(e,u,o),u._refines=_}}function q(e,t,i){var n=!0,r=h.stack;r.push(t);while(r.length>0){h.stackMaximumLength=Math.max(h.stackMaximumLength,r.length);var o=r.pop(),s=o.children,a=s.length,u=R(o),c=u&&U(e,o),m=u&&0===o.children.length;if(c||o.contentAvailable||m||(n=!1),V(e,o,i),l(o)||(L(e,o,i),E(e,o,i)),c)for(var d=0;d<a;++d){var p=s[d];r.push(p)}}return n}function W(e,t,i){var r,o=d.stack,s=d.ancestorStack;o.push(t);while(o.length>0||s.length>0){if(d.stackMaximumLength=Math.max(d.stackMaximumLength,o.length),d.ancestorStackMaximumLength=Math.max(d.ancestorStackMaximumLength,s.length),s.length>0){var u=s.peek();if(u._stackLength===o.length){s.pop(),u!==r&&(u._finalResolution=!1),y(e,u,i);continue}}var c=o.pop();if((0,n.Z)(c)){var h=c.refine===a.Z.ADD,m=c._shouldSelect,p=c.children,_=p.length,g=U(e,c);if(m)if(h)y(e,c,i);else{if(c._selectionDepth=s.length,c._selectionDepth>0&&(e._hasMixedContent=!0),r=c,!g){y(e,c,i);continue}s.push(c),c._stackLength=o.length}if(g)for(var f=0;f<_;++f){var v=p[f];l(v)&&o.push(v)}}}}u.selectTiles=function(e,t){if(e._requestedTiles.length=0,!e.debugFreezeFrame){e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e._hasMixedContent=!1;var i=e.root;if(V(e,i,t),l(i)&&!(i.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)){v(e)?e.immediatelyLoadDesiredLevelOfDetail?g(e,i,t):f(e,i,t):_(e,i,t),c.stack.trim(c.stackMaximumLength),h.stack.trim(h.stackMaximumLength),m.stack.trim(m.stackMaximumLength),d.stack.trim(d.stackMaximumLength),d.ancestorStack.trim(d.ancestorStackMaximumLength);for(var n=e._requestedTiles,r=n.length,o=0;o<r;++o)n[o].updatePriority()}}},t["Z"]=u},27377:function(e,t,i){var n=i(60216),r=i(66553),o=i(62200),s=i(99417);function a(e){e=(0,o.Z)(e,1),r.Z.typeOf.number.greaterThan("radius",e,0),this._radius=(0,o.Z)(e,1)}Object.defineProperties(a.prototype,{radius:{get:function(){return this._radius},set:function(e){r.Z.typeOf.number.greaterThan("value",e,0),this._radius=e}}}),a.prototype.emit=function(e){var t=s.Z.randomBetween(0,s.Z.TWO_PI),i=s.Z.randomBetween(0,this._radius),r=i*Math.cos(t),o=i*Math.sin(t),a=0;e.position=n.Z.fromElements(r,o,a,e.position),e.velocity=n.Z.clone(n.Z.UNIT_Z,e.velocity)},t["Z"]=a}}]);
//# sourceMappingURL=chunk-vendors-242a517d-legacy.004cc012.js.map