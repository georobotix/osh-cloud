/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 46700:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var map = {
	"./af": 42786,
	"./af.js": 42786,
	"./ar": 30867,
	"./ar-dz": 14130,
	"./ar-dz.js": 14130,
	"./ar-kw": 96135,
	"./ar-kw.js": 96135,
	"./ar-ly": 56440,
	"./ar-ly.js": 56440,
	"./ar-ma": 47702,
	"./ar-ma.js": 47702,
	"./ar-sa": 16040,
	"./ar-sa.js": 16040,
	"./ar-tn": 37100,
	"./ar-tn.js": 37100,
	"./ar.js": 30867,
	"./az": 31083,
	"./az.js": 31083,
	"./be": 9808,
	"./be.js": 9808,
	"./bg": 68338,
	"./bg.js": 68338,
	"./bm": 67438,
	"./bm.js": 67438,
	"./bn": 8905,
	"./bn-bd": 76225,
	"./bn-bd.js": 76225,
	"./bn.js": 8905,
	"./bo": 11560,
	"./bo.js": 11560,
	"./br": 1278,
	"./br.js": 1278,
	"./bs": 80622,
	"./bs.js": 80622,
	"./ca": 2468,
	"./ca.js": 2468,
	"./cs": 5822,
	"./cs.js": 5822,
	"./cv": 50877,
	"./cv.js": 50877,
	"./cy": 47373,
	"./cy.js": 47373,
	"./da": 24780,
	"./da.js": 24780,
	"./de": 59740,
	"./de-at": 60217,
	"./de-at.js": 60217,
	"./de-ch": 60894,
	"./de-ch.js": 60894,
	"./de.js": 59740,
	"./dv": 5300,
	"./dv.js": 5300,
	"./el": 50837,
	"./el.js": 50837,
	"./en-au": 78348,
	"./en-au.js": 78348,
	"./en-ca": 77925,
	"./en-ca.js": 77925,
	"./en-gb": 22243,
	"./en-gb.js": 22243,
	"./en-ie": 46436,
	"./en-ie.js": 46436,
	"./en-il": 47207,
	"./en-il.js": 47207,
	"./en-in": 44175,
	"./en-in.js": 44175,
	"./en-nz": 76319,
	"./en-nz.js": 76319,
	"./en-sg": 31662,
	"./en-sg.js": 31662,
	"./eo": 92915,
	"./eo.js": 92915,
	"./es": 55655,
	"./es-do": 55251,
	"./es-do.js": 55251,
	"./es-mx": 96112,
	"./es-mx.js": 96112,
	"./es-us": 71146,
	"./es-us.js": 71146,
	"./es.js": 55655,
	"./et": 5603,
	"./et.js": 5603,
	"./eu": 77763,
	"./eu.js": 77763,
	"./fa": 76959,
	"./fa.js": 76959,
	"./fi": 11897,
	"./fi.js": 11897,
	"./fil": 42549,
	"./fil.js": 42549,
	"./fo": 94694,
	"./fo.js": 94694,
	"./fr": 94470,
	"./fr-ca": 63049,
	"./fr-ca.js": 63049,
	"./fr-ch": 52330,
	"./fr-ch.js": 52330,
	"./fr.js": 94470,
	"./fy": 5044,
	"./fy.js": 5044,
	"./ga": 29295,
	"./ga.js": 29295,
	"./gd": 2101,
	"./gd.js": 2101,
	"./gl": 38794,
	"./gl.js": 38794,
	"./gom-deva": 27884,
	"./gom-deva.js": 27884,
	"./gom-latn": 23168,
	"./gom-latn.js": 23168,
	"./gu": 95349,
	"./gu.js": 95349,
	"./he": 24206,
	"./he.js": 24206,
	"./hi": 30094,
	"./hi.js": 30094,
	"./hr": 30316,
	"./hr.js": 30316,
	"./hu": 22138,
	"./hu.js": 22138,
	"./hy-am": 11423,
	"./hy-am.js": 11423,
	"./id": 29218,
	"./id.js": 29218,
	"./is": 90135,
	"./is.js": 90135,
	"./it": 90626,
	"./it-ch": 10150,
	"./it-ch.js": 10150,
	"./it.js": 90626,
	"./ja": 39183,
	"./ja.js": 39183,
	"./jv": 24286,
	"./jv.js": 24286,
	"./ka": 12105,
	"./ka.js": 12105,
	"./kk": 47772,
	"./kk.js": 47772,
	"./km": 18758,
	"./km.js": 18758,
	"./kn": 79282,
	"./kn.js": 79282,
	"./ko": 33730,
	"./ko.js": 33730,
	"./ku": 1408,
	"./ku.js": 1408,
	"./ky": 33291,
	"./ky.js": 33291,
	"./lb": 36841,
	"./lb.js": 36841,
	"./lo": 55466,
	"./lo.js": 55466,
	"./lt": 57010,
	"./lt.js": 57010,
	"./lv": 37595,
	"./lv.js": 37595,
	"./me": 39861,
	"./me.js": 39861,
	"./mi": 35493,
	"./mi.js": 35493,
	"./mk": 95966,
	"./mk.js": 95966,
	"./ml": 87341,
	"./ml.js": 87341,
	"./mn": 5115,
	"./mn.js": 5115,
	"./mr": 10370,
	"./mr.js": 10370,
	"./ms": 9847,
	"./ms-my": 41237,
	"./ms-my.js": 41237,
	"./ms.js": 9847,
	"./mt": 72126,
	"./mt.js": 72126,
	"./my": 56165,
	"./my.js": 56165,
	"./nb": 64924,
	"./nb.js": 64924,
	"./ne": 16744,
	"./ne.js": 16744,
	"./nl": 93901,
	"./nl-be": 59814,
	"./nl-be.js": 59814,
	"./nl.js": 93901,
	"./nn": 83877,
	"./nn.js": 83877,
	"./oc-lnc": 92135,
	"./oc-lnc.js": 92135,
	"./pa-in": 15858,
	"./pa-in.js": 15858,
	"./pl": 64495,
	"./pl.js": 64495,
	"./pt": 89520,
	"./pt-br": 57971,
	"./pt-br.js": 57971,
	"./pt.js": 89520,
	"./ro": 96459,
	"./ro.js": 96459,
	"./ru": 21793,
	"./ru.js": 21793,
	"./sd": 40950,
	"./sd.js": 40950,
	"./se": 10490,
	"./se.js": 10490,
	"./si": 90124,
	"./si.js": 90124,
	"./sk": 64249,
	"./sk.js": 64249,
	"./sl": 14985,
	"./sl.js": 14985,
	"./sq": 51104,
	"./sq.js": 51104,
	"./sr": 49131,
	"./sr-cyrl": 79915,
	"./sr-cyrl.js": 79915,
	"./sr.js": 49131,
	"./ss": 85893,
	"./ss.js": 85893,
	"./sv": 98760,
	"./sv.js": 98760,
	"./sw": 91172,
	"./sw.js": 91172,
	"./ta": 27333,
	"./ta.js": 27333,
	"./te": 23110,
	"./te.js": 23110,
	"./tet": 52095,
	"./tet.js": 52095,
	"./tg": 27321,
	"./tg.js": 27321,
	"./th": 9041,
	"./th.js": 9041,
	"./tk": 19005,
	"./tk.js": 19005,
	"./tl-ph": 75768,
	"./tl-ph.js": 75768,
	"./tlh": 89444,
	"./tlh.js": 89444,
	"./tr": 72397,
	"./tr.js": 72397,
	"./tzl": 28254,
	"./tzl.js": 28254,
	"./tzm": 51106,
	"./tzm-latn": 30699,
	"./tzm-latn.js": 30699,
	"./tzm.js": 51106,
	"./ug-cn": 9288,
	"./ug-cn.js": 9288,
	"./uk": 67691,
	"./uk.js": 67691,
	"./ur": 13795,
	"./ur.js": 13795,
	"./uz": 6791,
	"./uz-latn": 60588,
	"./uz-latn.js": 60588,
	"./uz.js": 6791,
	"./vi": 65666,
	"./vi.js": 65666,
	"./x-pseudo": 14378,
	"./x-pseudo.js": 14378,
	"./yo": 75805,
	"./yo.js": 75805,
	"./zh-cn": 83839,
	"./zh-cn.js": 83839,
	"./zh-hk": 55726,
	"./zh-hk.js": 55726,
	"./zh-mo": 99807,
	"./zh-mo.js": 99807,
	"./zh-tw": 74152,
	"./zh-tw.js": 74152
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 46700;

/***/ }),

/***/ 2994:
/***/ (function(__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) {

"use strict";

// UNUSED EXPORTS: emitter

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js
var es_array_iterator = __webpack_require__(66992);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js
var es_promise = __webpack_require__(88674);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.assign.js
var es_object_assign = __webpack_require__(19601);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.finally.js
var es_promise_finally = __webpack_require__(17727);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js
var es_object_keys = __webpack_require__(47941);
// EXTERNAL MODULE: ./node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js
var runtime_dom_esm_bundler = __webpack_require__(49963);
// EXTERNAL MODULE: ./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(66252);
// EXTERNAL MODULE: ./node_modules/@vue/shared/dist/shared.esm-bundler.js
var shared_esm_bundler = __webpack_require__(3577);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VBtn/VBtn.mjs + 2 modules
var VBtn = __webpack_require__(75101);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VSnackbar/VSnackbar.mjs + 1 modules
var VSnackbar = __webpack_require__(59671);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/App.vue?vue&type=template&id=2da88f8e

function render(_ctx, _cache, $props, $setup, $data, $options) {
                                                    
                                                              
  var _component_router_view = (0,runtime_core_esm_bundler/* resolveComponent */.up)("router-view");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSnackbar/* VSnackbar */.v, {
    modelValue: $setup.uiStore.ui.snack.message,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.uiStore.ui.snack.message = $event;
    }),
    color: $setup.uiStore.ui.snack.type
  }, {
    actions: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
        color: "dark",
        variant: "text",
        onClick: _cache[0] || (_cache[0] = function ($event) {
          return $setup.uiStore.ui.snack.message = undefined;
        })
      }, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" Close ")];
        }),
        _: 1
      })];
    }),
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)($setup.uiStore.ui.snack.message) + " ", 1)];
    }),
    _: 1
  }, 8, ["modelValue", "color"]), ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_router_view, {
    key: _ctx.$route.params.dashboardId
  }))], 64);
}

/* Vuetify */




// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(95082);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js
var createForOfIteratorHelper = __webpack_require__(66347);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js
var regeneratorRuntime = __webpack_require__(50124);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(48534);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.btoa.js
var web_btoa = __webpack_require__(27479);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.constructor.js
var web_dom_exception_constructor = __webpack_require__(87714);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.stack.js
var web_dom_exception_stack = __webpack_require__(82801);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.to-string-tag.js
var web_dom_exception_to_string_tag = __webpack_require__(1174);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js
var es_array_concat = __webpack_require__(92222);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var es_object_to_string = __webpack_require__(41539);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.stringify.js
var es_json_stringify = __webpack_require__(38862);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js
var es_array_push = __webpack_require__(57658);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js
var es_array_filter = __webpack_require__(57327);
// EXTERNAL MODULE: ./node_modules/pinia/dist/pinia.mjs + 6 modules
var pinia = __webpack_require__(96086);
// EXTERNAL MODULE: ./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js
var reactivity_esm_bundler = __webpack_require__(2262);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.error.cause.js
var es_error_cause = __webpack_require__(21703);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js
var es_function_name = __webpack_require__(68309);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(13087);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(62833);
;// CONCATENATED MODULE: ../../osh-js/source/core/datasource/Mode.js
/**
 * Enum for datasource mode.
 * @readonly
 * @enum {{name: string}}
 */
var Mode = {
  REPLAY: "replay",
  BATCH: "batch",
  REAL_TIME: "realTime"
};
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.constructor.js
var es_number_constructor = __webpack_require__(9653);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js
var es_string_iterator = __webpack_require__(78783);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js
var web_dom_collections_iterator = __webpack_require__(33948);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/typeof.js
var esm_typeof = __webpack_require__(3336);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(56084);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js
var es_array_map = __webpack_require__(21249);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js
var es_regexp_exec = __webpack_require__(74916);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js
var es_string_match = __webpack_require__(4723);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js
var es_array_slice = __webpack_require__(47042);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js
var es_string_replace = __webpack_require__(15306);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js
var es_regexp_to_string = __webpack_require__(39714);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.slice.js
var es_array_buffer_slice = __webpack_require__(39575);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.ends-with.js
var es_string_ends_with = __webpack_require__(27852);
;// CONCATENATED MODULE: ../../osh-js/source/core/utils/Utils.js

















/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/

/** * @module Utils */

/** Maximum value of a long */
var MAX_LONG = Math.pow(2, 53) + 1;

/**
 * Global helper method to test if a letiable or object attribute is defined
 */
function isDefined(v) {
  return typeof v !== 'undefined' && v !== null;
}

/**
 Global helper method to test if a letiable or object attribute has a value,
 that is it is defined and non null
 */
function hasValue(v) {
  return isDefined(v) && v !== null;
}

/**
 Global helper method to transform hex color into RGB
 */
function hex2rgb(hex) {
  var _hex$match$map = hex.match(/\w\w/g).map(function (x) {
      return parseInt(x, 16);
    }),
    _hex$match$map2 = (0,slicedToArray/* default */.Z)(_hex$match$map, 3),
    r = _hex$match$map2[0],
    g = _hex$match$map2[1],
    b = _hex$match$map2[2];
  return [r, g, b];
}
function hex2rgba(hex) {
  return [parseInt(hex.slice(1, 3), 16), parseInt(hex.slice(3, 5), 16), parseInt(hex.slice(5, 7), 16), parseInt(hex.slice(7, 9), 16) / 255];
}

/**
 Global helper method to test if a letiable or object attribute is of a particular type
 */
function hasType(v, expectedType) {
  var hasVal = hasValue(v);
  return hasVal && (0,esm_typeof/* default */.Z)(v) === expectedType;
}

/**
 Global helper method to test if a letiable or object attribute is an object
 */
function isObject(v, letName) {
  return hasType(v, 'object', letName);
}

/**
 Global helper method to test if a letiable or object attribute is an array
 */
function isArray(v) {
  return isDefined(v) && Array.isArray(v);
}

/**
 Global helper method to test if a letiable or object attribute is a function
 */
function isFunction(v, letName) {
  return hasType(v, 'function', letName);
}

/**
 Assert that a letiable or object attribute is defined
 **/
function assertDefined(v) {
  var letName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'letiable';
  if (!isDefined(v)) {
    throw letName + " must be defined";
  }
  return v;
}
function assertTrue(v) {
  var letName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'letiable';
  if (!isDefined(v) || !v) {
    throw letName;
  }
  return v;
}
/**
 Assert that a letiable or object attribute is defined and non-null
 **/
function assertType(v, expectedType) {
  var letName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'letiable';
  assertDefined(v, letName);
  if ((0,esm_typeof/* default */.Z)(v) !== expectedType) {
    throw letName + " must be of type " + expectedType;
  }
  return v;
}

/**
 Assert that a letiable or object attribute is a string
 **/
function assertBoolean(v, letName) {
  return assertType(v, 'boolean', letName);
}

/**
 Assert that a letiable or object attribute is a string
 **/
function assertString(v, letName) {
  return assertType(v, 'string', letName);
}

/**
 Assert that a letiable or object attribute is a number
 **/
function assertNumber(v, letName) {
  return assertType(v, 'number', letName);
}

/**
 Assert that a letiable or object attribute is a number
 **/
function assertPositive(v, letName) {
  assertNumber(v, letName);
  if (v <= 0) {
    throw letName + " must be a positive number";
  }
}

/**
 Assert that a letiable or object attribute is an object
 **/
function assertObject(v, letName) {
  return assertType(v, 'object', letName);
}

/**
 Assert that a letiable or object attribute is an object
 **/
function assertArray(v) {
  var letName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'letiable';
  assertDefined(v, letName);
  if (!Array.isArray(v)) {
    throw letName + " must be an array";
  }
  return v;
}

/**
 Assert that a letiable or object attribute is a function
 **/
function assertFunction(v, letName) {
  return assertType(v, 'function', letName);
}

/**
 Assert that a letiable or object attribute is defined and non-null
 **/
function assertHasValue(v) {
  var letName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'letiable';
  assertDefined(v, letName);
  if (!hasValue(v)) {
    throw letName + " must not be null";
  }
  return v;
}

/**
 *
 * @return {String}
 */
function randomUUID() {
  return 'xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
    var r = Math.random() * 16 | 0,
      v = c === 'x' ? r : r & 0x3 | 0x8;
    return v.toString(16);
  });
}

/**
 * This function stamps/embeds a UUID into an object and returns the UUID generated for it
 * @return {String}
 */
function stampUUID(obj) {
  obj._osh_id = obj._osh_id || randomUUID();
  return obj._osh_id;
}

//buffer is an ArrayBuffer object, the offset if specified in bytes, and the type is a string
//corresponding to an OGC data type.
//See http://def.seegrid.csiro.au/sissvoc/ogc-def/resource?uri=http://www.opengis.net/def/dataType/OGC/0/
/**
 *
 * @param buffer
 * @param offset
 * @param type
 * @return {*}
 */
function ParseBytes(buffer, offset, type) {
  var view = new DataView(buffer);

  //Note: There exist types not listed in the map below that have OGC definitions, but no appropriate
  //methods or corresponding types available for parsing in javascript. They are float128, float16, signedLong,
  //and unsignedLong
  var typeMap = {
    double: function double(offset) {
      return {
        val: view.getFloat64(offset),
        bytes: 8
      };
    },
    float64: function float64(offset) {
      return {
        val: view.getFloat64(offset),
        bytes: 8
      };
    },
    float32: function float32(offset) {
      return {
        val: view.getFloat32(offset),
        bytes: 4
      };
    },
    signedByte: function signedByte(offset) {
      return {
        val: view.getInt8(offset),
        bytes: 1
      };
    },
    signedInt: function signedInt(offset) {
      return {
        val: view.getInt32(offset),
        bytes: 4
      };
    },
    signedShort: function signedShort(offset) {
      return {
        val: view.getInt16(offset),
        bytes: 2
      };
    },
    unsignedByte: function unsignedByte(offset) {
      return {
        val: view.getUint8(offset),
        bytes: 1
      };
    },
    unsignedInt: function unsignedInt(offset) {
      return {
        val: view.getUint32(offset),
        bytes: 4
      };
    },
    unsignedShort: function unsignedShort(offset) {
      return {
        val: view.getUint16(offset),
        bytes: 2
      };
    }
    //TODO: string-utf-8:
  };

  return typeMap[type](offset);
}

//This function recursivley iterates over the resultStructure to fill in
//values read from data which should be an ArrayBuffer containing the payload from a websocket
/**
 *
 * @param struct
 * @param data
 * @param offsetBytes
 * @return {*}
 */
function ReadData(struct, data, offsetBytes) {
  var offset = offsetBytes;
  for (var i = 0; i < struct.fields.length; i++) {
    var currFieldStruct = struct.fields[i];
    if (isDefined(currFieldStruct.type) && currFieldStruct.type !== null) {
      var ret = ParseBytes(data, offset, currFieldStruct.type);
      currFieldStruct.val = ret.val;
      offset += ret.bytes;
    } else if (isDefined(currFieldStruct.count) && currFieldStruct.count !== null) {
      //check if count is a reference to another letiable
      if (isNaN(currFieldStruct.count)) {
        var id = currFieldStruct.count;
        var fieldName = struct.id2FieldMap[id];
        currFieldStruct.count = struct.findFieldByName(fieldName).val;
      }
      for (var c = 0; c < currFieldStruct.count; c++) {
        for (var j = 0; j < currFieldStruct.fields.length; j++) {
          var field = JSON.parse(JSON.stringify(currFieldStruct.fields[j]));
          offset = ReadData(field, data, offset);
          currFieldStruct.val.push(field);
        }
      }
    }
  }
  return offset;
}

/**
 *
 * @param resultStructure
 * @return {{}}
 */
function GetResultObject(resultStructure) {
  //TODO: handle cases for nested arrays / matrix data types
  var result = {};
  for (var i = 0; i < resultStructure.fields.length; i++) {
    if (isDefined(resultStructure.fields[i].count)) {
      result[resultStructure.fields[i].name] = [];
      for (var c = 0; c < resultStructure.fields[i].count; c++) {
        var item = {};
        for (var k = 0; k < resultStructure.fields[i].val[c].fields.length; k++) {
          item[resultStructure.fields[i].val[c].fields[k].name] = resultStructure.fields[i].val[c].fields[k].val;
        }
        result[resultStructure.fields[i].name].push(item);
      }
    } else {
      result[resultStructure.fields[i].name] = resultStructure.fields[i].val;
    }
  }
  return result;
}

/**
 *
 * @return {boolean}
 */
function isOpera() {
  return !!window.opr && !!opr.addons || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;
}

/**
 *
 * @return {boolean}
 */
function isFirefox() {
  return typeof InstallTrigger !== 'undefined';
}

/**
 *
 * @return {boolean}
 */
function isSafari() {
  return Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
}

/**
 *
 * @return {boolean}
 */
function isChrome() {
  return !!window.chrome && !!window.chrome.webstore;
}

/**
 *
 * @return {*|boolean}
 */
function isBlink() {
  return (isChrome || isOpera) && !!window.CSS;
}

/**
 *
 * @param a
 * @param b
 * @return {boolean}
 */
function isArrayIntersect(a, b) {
  return a.filter(function (element) {
    return b.indexOf(element) > -1;
  }).length > 0;
}

/**
 *
 * @param o
 * @return {boolean}
 */
function isElement(o) {
  return (typeof HTMLElement === "undefined" ? "undefined" : _typeof(HTMLElement)) === "object" ? o instanceof HTMLElement :
  //DOM2
  o && _typeof(o) === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName === "string";
}

/**
 *
 * @return {*}
 */
function isWebWorker() {
  return isDefined(Worker);
}

/**
 *
 * @param div
 */
function takeScreenShot(div) {}

/**
 * Remove a css class from a the div given as argument.
 * @param div the div to remove the class from
 * @param css the css class to remove
 */
function removeCss(div, css) {
  var divCss = div.className;
  css = divCss.replace(css, "");
  div.className = css;
}

/**
 * Add a css class to a the div given as argument.
 * @param div the div to add the class to
 * @param css the css class to add
 */
function addCss(div, css) {
  div.setAttribute("class", div.className + " " + css);
}

/**
 * Removes the last character of a {string} object.
 * @param {string} value - The input {string}
 * @return {string} The value without the last character
 */
function removeLastCharIfExist(value) {
  if (!isDefined(undefined) || value === null || value.length === 0 || !value.endsWith("/")) {
    return value;
  }
  return value.substring(0, value.length - 1);
}

/**
 * Capitalize the first letter of a given string
 * @param {String} str - the input string
 * @returns {String} the result
 */
function capitalizeFirstLetter(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

/**
 * Round off number to nearest 0.5
 * @param {Number} num - The number to round off
 * @return {number} The rounded number
 */
function roundHalf(num) {
  return Math.round(num * 2) / 2;
}

/**
 * Returns a function that, as long as it continues to be invoked,
 * will not be executed. The function will only be executed when
 * it will stop being called for more than N milliseconds.
 * If the `immediate` parameter is true, then the function
 * will be executed at the first call instead of the last.
 * Parameters :
 * - func: the function to `debouncer`.
 * - wait: the number of milliseconds (N) to wait before
 * call func()
 * - immediate (optional): Call func() at the first invocation
 * instead of the last one (Default false)
 * - context (optional): the context in which to call func()
 * (this by default)
 */

// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.
function debounce(func, wait, immediate) {
  var timeout, args, context, timestamp, result;
  var later = function later() {
    var now = new Date().getTime(),
      last = now - timestamp;
    if (last < wait && last >= 0) {
      timeout = setTimeout(later, wait - last);
    } else {
      timeout = null;
      if (!immediate) {
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      }
    }
  };
  return function () {
    context = this;
    args = arguments;
    timestamp = new Date().getTime();
    var callNow = immediate && !timeout;
    if (!timeout) timeout = setTimeout(later, wait);
    if (callNow) {
      result = func.apply(context, args);
      context = args = null;
    }
    return result;
  };
}
;
function throttle(func, wait, leading, trailing, context) {
  var ctx, args, result;
  var timeout = null;
  var previous = 0;
  var later = function later() {
    previous = new Date();
    timeout = null;
    result = func.apply(ctx, args);
  };
  return function () {
    var now = new Date();
    if (!previous && !leading) previous = now;
    var remaining = wait - (now - previous);
    ctx = context || this;
    args = arguments;
    if (remaining <= 0) {
      clearTimeout(timeout);
      timeout = null;
      previous = now;
      result = func.apply(ctx, args);
    } else if (!timeout && trailing) {
      timeout = setTimeout(later, remaining);
    }
    return result;
  };
}
;
function merge(target, source) {
  // Iterate through `source` properties and if an `Object` set property to merge of `target` and `source` properties
  for (var _i = 0, _Object$keys = Object.keys(source); _i < _Object$keys.length; _i++) {
    var key = _Object$keys[_i];
    if (source[key] instanceof Object && key in target) Object.assign(source[key], merge(target[key], source[key]));
  }

  // Join `target` and modified `source`
  Object.assign(target || {}, source);
  return target;
}
;
function rgbaToArray(str) {
  var startIdxValue = str.indexOf('(') + 1;
  var endIdxValue = str.indexOf(')');
  var values = str.substr(startIdxValue, endIdxValue - startIdxValue);
  return values.split(',').map(Number);
}
;// CONCATENATED MODULE: ../../osh-js/source/core/timesync/replay/DataSynchronizer.replay.worker.js
function Worker_fn() {
  return new Worker(__webpack_require__.p + "js/DataSynchronizer.replay.worker-legacy.5675dad8.worker.js");
}
;// CONCATENATED MODULE: ../../osh-js/source/core/Constants.js
var DATA_SYNCHRONIZER_TOPIC = 'data-synchronizer-';
var TIME_SYNCHRONIZER_TOPIC = 'data-synchronizer-time-';
var DATASOURCE_DATA_TOPIC = 'datasource-data-';
var DATASOURCE_TIME_TOPIC = 'datasource-time-';
var FFMPEG_VIEW_DECODE_TOPIC = 'ffmpeg-decode-';
var MAGIC_END_PACKET = 'magic-packet';
;// CONCATENATED MODULE: ../../osh-js/source/core/event/EventType.js
var EventType = {
  DATA: 'data',
  LAST_TIME: 'last-time',
  MASTER_TIME: 'master-time',
  STATUS: 'status',
  TIME_CHANGED: 'time-changed',
  CLOSED: 'closed'
};
;// CONCATENATED MODULE: ../../osh-js/source/core/worker/WorkerExt.js



var WorkerExt = /*#__PURE__*/function () {
  function WorkerExt(worker) {
    (0,classCallCheck/* default */.Z)(this, WorkerExt);
    this.worker = worker;
    this.onmessage = null;
  }
  (0,createClass/* default */.Z)(WorkerExt, [{
    key: "postMessage",
    value: function postMessage(message, transfer) {
      // console.log('post no ack');
      this.worker.postMessage(message, transfer);
    }
  }, {
    key: "postMessageWithAck",
    value: function postMessageWithAck(message, transfer) {
      var _this = this;
      var ackId = crypto.randomUUID();
      // console.log('post ack ' + ackId);

      return new Promise(function (resolve, reject) {
        var controller = new AbortController();
        _this.worker.addEventListener("message", function (e) {
          //console.log('resp ' + e.data.ackId);
          if (e.data.ackId === ackId) {
            delete e.data.ackId;
            controller.abort();
            if (e.error) {
              reject(e.error);
            } else {
              resolve(e.data);
            }
          }
        }, {
          signal: controller.signal
        });
        message.ackId = ackId;
        _this.worker.postMessage(message, transfer);
      });
    }
  }, {
    key: "onmessage",
    set: function set(f) {
      this.worker.onmessage = f;
    }
  }, {
    key: "terminate",
    value: function terminate() {
      if (this.worker) {
        this.worker.terminate();
      }
    }
  }]);
  return WorkerExt;
}();
/* harmony default export */ var worker_WorkerExt = (WorkerExt);
;// CONCATENATED MODULE: ../../osh-js/source/core/timesync/replay/DataSynchronizer.replay.js











/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/







var DataSynchronizerReplay = /*#__PURE__*/function () {
  /**
   * Creates The dataSynchronizer.
   * @param {Object} properties - the property of the object
   * @param {String} [properties.id=randomUUID] - id of the dataSynchronizer or random if not provided
   * @param {Number} [properties.replaySpeed=1] - replaySpeed value
   * @param {Number} [properties.timerResolution=5] - interval in which data is played (in milliseconds)
   * @param {Number} [properties.masterTimeRefreshRate=250] - interval in which time value is send through broadcast channel (in milliseconds)
   * @param {Number} [properties.mode=Mode.REPLAY] - mode of the data synchronizer
   * @param {String} properties.minTime - min range time as ISO date
   * @param {String} properties.maxTime - max range time as ISO date
   * @param {Datasource[]} properties.dataSources - the dataSource array
   * @param {DataSynchronizer} timeSync - dataSynchronizer
   */
  function DataSynchronizerReplay(properties, timeSync) {
    (0,classCallCheck/* default */.Z)(this, DataSynchronizerReplay);
    this.bufferingTime = 1000; // default
    this.id = properties.id || randomUUID();
    this.dataSources = properties.dataSources || [];
    this.replaySpeed = properties.replaySpeed || 1;
    this.timerResolution = properties.timerResolution || 5;
    this.masterTimeRefreshRate = properties.masterTimeRefreshRate || 250;
    this.initialized = false;
    this.timeSync = timeSync;
    this.properties = {};
    this.properties.replaySpeed = this.replaySpeed;
    this.properties.startTimestamp = undefined;
    this.properties.endTimestamp = undefined;
    this.properties.minTimestamp = undefined;
    this.properties.maxTimestamp = undefined;
    this.properties.version = 0;
    if (isDefined(properties)) {
      if (isDefined(properties.minTime)) {
        this.minTimestamp = new Date(properties.minTime).getTime();
      }
      if (isDefined(properties.maxTime)) {
        this.maxTimestamp = new Date(properties.maxTime).getTime();
      }
    }
    this.computeMinMax();
  }
  (0,createClass/* default */.Z)(DataSynchronizerReplay, [{
    key: "getId",
    value: function getId() {
      return this.id;
    }
  }, {
    key: "getTopicId",
    value: function getTopicId() {
      return DATA_SYNCHRONIZER_TOPIC + this.id;
    }
  }, {
    key: "getTimeTopicId",
    value: function getTimeTopicId() {
      return TIME_SYNCHRONIZER_TOPIC + this.id;
    }
  }, {
    key: "getDataSources",
    value: function getDataSources() {
      return this.dataSources;
    }
  }, {
    key: "computeMinMax",
    value: function computeMinMax() {
      if (this.dataSources.length > 0) {
        var minTimestamp = Number.MAX_VALUE,
          maxTimestamp = Number.MIN_VALUE;
        // default min/max will be adjusted on the most min/max DataSource
        var _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var ds = _step.value;
            // compute min/max range of dataSynchronizer
            var dsMinTimestamp = ds.getMinTimeAsTimestamp();
            var dsMaxTimestamp = ds.getMaxTimeAsTimestamp();
            if (dsMinTimestamp < minTimestamp) {
              minTimestamp = dsMinTimestamp;
            }
            if (dsMaxTimestamp > maxTimestamp) {
              maxTimestamp = dsMaxTimestamp;
            }
          }

          // check if a default Min/Max has been defined into DataSynchronizer forcing intersection with current computed ones
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        if (isDefined(this.minTimestamp) && this.minTimestamp > minTimestamp) {
          // intersect and takes the min of dataSynchronizer
          minTimestamp = this.minTimestamp;
        }
        if (isDefined(this.maxTimestamp) && this.maxTimestamp > maxTimestamp) {
          // intersect and takes the min of dataSynchronizer
          maxTimestamp = this.maxTimestamp;
        }
        this.properties.minTimestamp = minTimestamp;
        this.properties.maxTimestamp = maxTimestamp;
      } else {
        var st = new Date('1970-01-01T00:00:00Z').getTime();
        var end = new Date('2055-01-01T00:00:00Z').getTime();
        this.properties.minTimestamp = this.properties.startTimestamp = st;
        this.properties.maxTimestamp = this.properties.endTimestamp = end;
      }
    }

    /**
     * Gets the startTime of the first DataSource objet
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getStartTimeAsIsoDate",
    value: function getStartTimeAsIsoDate() {
      if (this.properties.startTimestamp) {
        return new Date(this.properties.startTimestamp).toISOString();
      } else {
        return this.getMinTimeAsIsoDate();
      }
    }

    /**
     * Gets the startTime of the first DataSource objet
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getStartTimeAsTimestamp",
    value: function getStartTimeAsTimestamp() {
      return this.properties.startTimestamp;
    }

    /**
     * Gets the endTime of the first DataSource objet
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getEndTimeAsIsoDate",
    value: function getEndTimeAsIsoDate() {
      if (this.properties.endTimestamp) {
        return new Date(this.properties.endTimestamp).toISOString();
      } else {
        return this.getMaxTimeAsIsoDate();
      }
    }
  }, {
    key: "getEndTimeAsTimestamp",
    value: function getEndTimeAsTimestamp() {
      return this.properties.endTimestamp;
    }

    /**
     * Gets the minTime of the first DataSource objet
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getMinTimeAsIsoDate",
    value: function getMinTimeAsIsoDate() {
      return new Date(this.properties.minTimestamp).toISOString();
    }

    /**
     * Gets the minTime of the first DataSource objet
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getMinTimeAsTimestamp",
    value: function getMinTimeAsTimestamp() {
      return this.properties.minTimestamp;
    }

    /**
     * Gets the maxTime of the first DataSource objet
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getMaxTimeAsIsoDate",
    value: function getMaxTimeAsIsoDate() {
      return new Date(this.properties.maxTimestamp).toISOString();
    }

    /**
     * Gets the maxTime of the first DataSource objet
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getMaxTimeAsTimestamp",
    value: function getMaxTimeAsTimestamp() {
      return this.properties.maxTimestamp;
    }
  }, {
    key: "setStartTime",
    value: function () {
      var _setStartTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(time) {
        var lazy,
          _args = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              lazy = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;
              this.properties.startTimestamp = new Date(time).getTime();
              if (lazy) {
                _context.next = 5;
                break;
              }
              _context.next = 5;
              return this.updateAlgo();
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setStartTime(_x) {
        return _setStartTime.apply(this, arguments);
      }
      return setStartTime;
    }()
  }, {
    key: "setEndTime",
    value: function () {
      var _setEndTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(time) {
        var lazy,
          _args2 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              lazy = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : false;
              this.properties.endTimestamp = new Date(time).getTime();
              if (lazy) {
                _context2.next = 5;
                break;
              }
              _context2.next = 5;
              return this.updateAlgo();
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function setEndTime(_x2) {
        return _setEndTime.apply(this, arguments);
      }
      return setEndTime;
    }()
  }, {
    key: "setMinTime",
    value: function () {
      var _setMinTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(minTime) {
        var resetStartTime,
          _args3 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              resetStartTime = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : false;
              this.minTimestamp = new Date(minTime).getTime();
              this.computeMinMax();
              this.timeChanged();
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function setMinTime(_x3) {
        return _setMinTime.apply(this, arguments);
      }
      return setMinTime;
    }()
  }, {
    key: "setMaxTime",
    value: function () {
      var _setMaxTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(maxTime) {
        var resetStartTime,
          _args4 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              resetStartTime = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : false;
              this.maxTimestamp = new Date(maxTime).getTime();
              this.computeMinMax();
              this.timeChanged();
            case 4:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function setMaxTime(_x4) {
        return _setMaxTime.apply(this, arguments);
      }
      return setMaxTime;
    }()
    /**
     * Gets the replaySpeed
     * @returns {Number} - the replay speed
     */
  }, {
    key: "getReplaySpeed",
    value: function getReplaySpeed() {
      return this.replaySpeed;
    }

    /**
     * Terminate the corresponding running WebWorker by calling terminate() on it.
     */
  }, {
    key: "terminate",
    value: function terminate() {
      if (this.synchronizerWorker !== null) {
        this.synchronizerWorker.terminate();
        this.synchronizerWorker = null;
      }
      var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var dataSource = _step2.value;
          dataSource.terminate();
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "getMode",
    value: function getMode() {
      return Mode.REPLAY;
    }

    //----------- ASYNCHRONOUS FUNCTIONS -----------------//
  }, {
    key: "initDataSources",
    value: function () {
      var _initDataSources = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5() {
        var _this = this;
        var dataSourcesForWorker, _iterator3, _step3, dataSource, dataSourceForWorker;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              dataSourcesForWorker = [];
              _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              _context5.prev = 3;
              _iterator3.s();
            case 5:
              if ((_step3 = _iterator3.n()).done) {
                _context5.next = 13;
                break;
              }
              dataSource = _step3.value;
              _context5.next = 9;
              return this.createDataSourceForWorker(dataSource);
            case 9:
              dataSourceForWorker = _context5.sent;
              dataSourcesForWorker.push(dataSourceForWorker);
            case 11:
              _context5.next = 5;
              break;
            case 13:
              _context5.next = 18;
              break;
            case 15:
              _context5.prev = 15;
              _context5.t0 = _context5["catch"](3);
              _iterator3.e(_context5.t0);
            case 18:
              _context5.prev = 18;
              _iterator3.f();
              return _context5.finish(18);
            case 21:
              this.synchronizerWorker = new worker_WorkerExt(new Worker_fn());
              return _context5.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'init',
                dataSources: dataSourcesForWorker,
                replaySpeed: this.replaySpeed,
                timerResolution: this.timerResolution,
                masterTimeRefreshRate: this.masterTimeRefreshRate,
                startTimestamp: this.getStartTimeAsTimestamp(),
                endTimestamp: this.getEndTimeAsTimestamp(),
                mode: this.getMode(),
                version: this.version(),
                topics: {
                  data: this.getTopicId(),
                  time: this.getTimeTopicId()
                }
              }).then(function () {
                _this.initialized = true;
              }));
            case 25:
              _context5.prev = 25;
              _context5.t1 = _context5["catch"](0);
              console.error(_context5.t1);
            case 28:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 25], [3, 15, 18, 21]]);
      }));
      function initDataSources() {
        return _initDataSources.apply(this, arguments);
      }
      return initDataSources;
    }()
    /**
     * @private
     * @param dataSource
     */
  }, {
    key: "createDataSourceForWorker",
    value: function () {
      var _createDataSourceForWorker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(dataSource) {
        var obj;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              obj = {
                bufferingTime: dataSource.properties.bufferingTime || 0,
                timeOut: dataSource.properties.timeOut || 0,
                id: dataSource.getId(),
                name: dataSource.getName(),
                minTimestamp: dataSource.getMinTimeAsTimestamp(),
                maxTimestamp: dataSource.getMaxTimeAsTimestamp()
              }; // bind dataSource data onto dataSynchronizer data
              _context6.prev = 1;
              _context6.next = 4;
              return dataSource.setDataSynchronizer(this.timeSync);
            case 4:
              dataSource.properties.replaySpeed = this.replaySpeed;
              _context6.next = 11;
              break;
            case 7:
              _context6.prev = 7;
              _context6.t0 = _context6["catch"](1);
              console.error("Cannot set the synchronizer to this DataSource", _context6.t0);
              throw _context6.t0;
            case 11:
              return _context6.abrupt("return", obj);
            case 12:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this, [[1, 7]]);
      }));
      function createDataSourceForWorker(_x5) {
        return _createDataSourceForWorker.apply(this, arguments);
      }
      return createDataSourceForWorker;
    }()
  }, {
    key: "timeChanged",
    value: function timeChanged() {
      this.onTimeChanged(this.getMinTimeAsTimestamp(), this.getMaxTimeAsTimestamp(), this.getStartTimeAsTimestamp(), this.getEndTimeAsTimestamp());
    }

    /**
     * Adds a new DataSource object to the list of datasources to synchronize.
     * note: don't forget to call reset() to be sure to re-init the synchronizer internal properties.
     * @param {TimeSeriesDataSource} dataSource - the new datasource to add
     */
  }, {
    key: "addDataSource",
    value: function () {
      var _addDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8(dataSource) {
        var _this2 = this;
        var dataSourceForWorker;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              this.dataSources.push(dataSource);
              this.computeMinMax();
              if (this.initialized) {
                _context8.next = 8;
                break;
              }
              console.log("DataSynchronizer not initialized yet, add DataSource ".concat(dataSource.id, " as it"));
              this.timeChanged();
              this.onAddedDataSource(dataSource.id);
              _context8.next = 14;
              break;
            case 8:
              dataSource.setStartTime(this.getStartTimeAsIsoDate());
              dataSource.setEndTime(this.getEndTimeAsIsoDate());
              _context8.next = 12;
              return this.createDataSourceForWorker(dataSource);
            case 12:
              dataSourceForWorker = _context8.sent;
              return _context8.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'add',
                dataSources: [dataSourceForWorker]
              }).then( /*#__PURE__*/(0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7() {
                return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
                  while (1) switch (_context7.prev = _context7.next) {
                    case 0:
                      _context7.next = 2;
                      return _this2.isConnected();
                    case 2:
                      if (!_context7.sent) {
                        _context7.next = 5;
                        break;
                      }
                      _context7.next = 5;
                      return dataSource.connect();
                    case 5:
                      _this2.onAddedDataSource(dataSource.id);
                      _this2.timeChanged();
                    case 7:
                    case "end":
                      return _context7.stop();
                  }
                }, _callee7);
              }))));
            case 14:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function addDataSource(_x6) {
        return _addDataSource.apply(this, arguments);
      }
      return addDataSource;
    }()
    /**
     * Removes a DataSource object from the list of datasources of the synchronizer.
     * @param {TimeSeriesDatasource} dataSource - the new datasource to add
     */
  }, {
    key: "removeDataSource",
    value: function () {
      var _removeDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9(dataSource) {
        var _this3 = this;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              this.dataSources = this.dataSources.filter(function (elt) {
                return elt.id !== dataSource.getId();
              });
              if (!(this.dataSources.length === 0)) {
                _context9.next = 4;
                break;
              }
              _context9.next = 4;
              return this.reset();
            case 4:
              this.computeMinMax();
              if (this.initialized) {
                _context9.next = 13;
                break;
              }
              console.log("DataSynchronizer not initialized yet, remove DataSource ".concat(dataSource.id, " as it"));
              _context9.next = 9;
              return dataSource.removeDataSynchronizer();
            case 9:
              this.timeChanged();
              this.onRemovedDataSource(dataSource.id);
              _context9.next = 18;
              break;
            case 13:
              _context9.next = 15;
              return dataSource.disconnect();
            case 15:
              _context9.next = 17;
              return dataSource.removeDataSynchronizer();
            case 17:
              return _context9.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'remove',
                dataSourceIds: [dataSource.getId()],
                startTimestamp: this.getStartTimeAsTimestamp(),
                endTimestamp: this.getEndTimeAsTimestamp()
              }).then(function () {
                _this3.timeChanged();
                _this3.onRemovedDataSource(dataSource.id);
              }));
            case 18:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function removeDataSource(_x7) {
        return _removeDataSource.apply(this, arguments);
      }
      return removeDataSource;
    }()
    /**
     * @param {String} dataSourceId - the dataSource id
     * @param {Object} data - the data to push into the data synchronizer
     */
  }, {
    key: "push",
    value: function () {
      var _push = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee10(dataSourceId, data) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              if (!this.synchronizerWorker) {
                _context10.next = 2;
                break;
              }
              return _context10.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                type: 'data',
                dataSourceId: dataSourceId,
                data: data
              }));
            case 2:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function push(_x8, _x9) {
        return _push.apply(this, arguments);
      }
      return push;
    }()
  }, {
    key: "version",
    value: function version() {
      return this.properties.version;
    }

    /**
     * Connects all dataSources
     */
  }, {
    key: "connect",
    value: function () {
      var _connect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee11() {
        var isConnected;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              if (!(this.dataSources.length === 0)) {
                _context11.next = 4;
                break;
              }
              return _context11.abrupt("return");
            case 4:
              _context11.next = 6;
              return this.checkInit();
            case 6:
              _context11.next = 8;
              return this.isConnected();
            case 8:
              isConnected = _context11.sent;
              if (isConnected) {
                _context11.next = 11;
                break;
              }
              return _context11.abrupt("return", this.doConnect());
            case 11:
              return _context11.abrupt("return", isConnected);
            case 12:
            case "end":
              return _context11.stop();
          }
        }, _callee11, this);
      }));
      function connect() {
        return _connect.apply(this, arguments);
      }
      return connect;
    }()
  }, {
    key: "checkInit",
    value: function () {
      var _checkInit = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee12() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              if (!isDefined(this.init)) {
                this.init = this.initDataSources();
              }
              return _context12.abrupt("return", this.init);
            case 2:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this);
      }));
      function checkInit() {
        return _checkInit.apply(this, arguments);
      }
      return checkInit;
    }()
  }, {
    key: "checkStartEndTime",
    value: function checkStartEndTime() {
      if (!this.properties.startTimestamp) {
        this.properties.startTimestamp = this.properties.minTimestamp;
      }
      if (!this.properties.endTimestamp) {
        this.properties.endTimestamp = this.properties.maxTimestamp;
      }
    }
  }, {
    key: "doConnect",
    value: function () {
      var _doConnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee13() {
        var _iterator4, _step4, dataSource;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              this.checkStartEndTime();
              _context13.next = 3;
              return this.updateAlgo();
            case 3:
              _iterator4 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              _context13.prev = 4;
              _iterator4.s();
            case 6:
              if ((_step4 = _iterator4.n()).done) {
                _context13.next = 12;
                break;
              }
              dataSource = _step4.value;
              _context13.next = 10;
              return dataSource.setTimeRange(this.getStartTimeAsIsoDate(), this.getEndTimeAsIsoDate(), this.getReplaySpeed(), true);
            case 10:
              _context13.next = 6;
              break;
            case 12:
              _context13.next = 17;
              break;
            case 14:
              _context13.prev = 14;
              _context13.t0 = _context13["catch"](4);
              _iterator4.e(_context13.t0);
            case 17:
              _context13.prev = 17;
              _iterator4.f();
              return _context13.finish(17);
            case 20:
              return _context13.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'connect',
                version: this.version()
              }));
            case 21:
            case "end":
              return _context13.stop();
          }
        }, _callee13, this, [[4, 14, 17, 20]]);
      }));
      function doConnect() {
        return _doConnect.apply(this, arguments);
      }
      return doConnect;
    }()
    /**
     * Disconnects all dataSources
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee14() {
        var promises, _iterator5, _step5, dataSource;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              _context14.next = 2;
              return this.reset();
            case 2:
              promises = [];
              _iterator5 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              try {
                for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
                  dataSource = _step5.value;
                  promises.push(dataSource.disconnect());
                }
              } catch (err) {
                _iterator5.e(err);
              } finally {
                _iterator5.f();
              }
              return _context14.abrupt("return", Promise.all(promises));
            case 6:
            case "end":
              return _context14.stop();
          }
        }, _callee14, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
    /**
     * Sets the replaySpeed
     */
  }, {
    key: "setReplaySpeed",
    value: function () {
      var _setReplaySpeed = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee15(replaySpeed) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              this.replaySpeed = replaySpeed;
              this.properties.replaySpeed = replaySpeed;
              return _context15.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'replay-speed',
                replaySpeed: replaySpeed
              }));
            case 3:
            case "end":
              return _context15.stop();
          }
        }, _callee15, this);
      }));
      function setReplaySpeed(_x10) {
        return _setReplaySpeed.apply(this, arguments);
      }
      return setReplaySpeed;
    }()
    /**
     * Sets the data source time range
     * @param {String} startTime - the startTime (in date ISO)
     * @param {String} endTime - the startTime (in date ISO)
     * @param {Number} replaySpeed - the replay speed
     * @param {boolean} reconnect - reconnect if was connected
     * @param {Mode} mode - default dataSource mode
     */
  }, {
    key: "setTimeRange",
    value: function () {
      var _setTimeRange = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee16() {
        var startTime,
          endTime,
          replaySpeed,
          reconnect,
          promises,
          _iterator6,
          _step6,
          ds,
          _args16 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee16$(_context16) {
          while (1) switch (_context16.prev = _context16.next) {
            case 0:
              startTime = _args16.length > 0 && _args16[0] !== undefined ? _args16[0] : this.getStartTimeAsIsoDate();
              endTime = _args16.length > 1 && _args16[1] !== undefined ? _args16[1] : this.getEndTimeAsIsoDate();
              replaySpeed = _args16.length > 2 && _args16[2] !== undefined ? _args16[2] : this.getReplaySpeed();
              reconnect = _args16.length > 3 && _args16[3] !== undefined ? _args16[3] : false;
              _context16.next = 6;
              return this.disconnect();
            case 6:
              this.incVersion();
              // update properties of DataSynchronizer
              this.replaySpeed = replaySpeed;
              _context16.next = 10;
              return this.setStartTime(startTime, false);
            case 10:
              _context16.next = 12;
              return this.setEndTime(endTime, false);
            case 12:
              promises = []; // update properties of each DataSource
              _iterator6 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              try {
                for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
                  ds = _step6.value;
                  promises.push(ds.setTimeRange(this.getStartTimeAsIsoDate(), this.getEndTimeAsIsoDate(), this.getReplaySpeed(), false, this.getMode(), this.version()));
                }
              } catch (err) {
                _iterator6.e(err);
              } finally {
                _iterator6.f();
              }
              return _context16.abrupt("return", Promise.all(promises));
            case 16:
            case "end":
              return _context16.stop();
          }
        }, _callee16, this);
      }));
      function setTimeRange() {
        return _setTimeRange.apply(this, arguments);
      }
      return setTimeRange;
    }()
  }, {
    key: "setStartTimestamp",
    value: function setStartTimestamp(timestamp) {
      this.properties.startTimestamp = timestamp;
    }
  }, {
    key: "updateAlgo",
    value: function () {
      var _updateAlgo = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee17() {
        var _iterator7, _step7, dataSource, dataSourcesForWorker, _iterator8, _step8, _dataSource, obj;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee17$(_context17) {
          while (1) switch (_context17.prev = _context17.next) {
            case 0:
              // synchronize startTimestamp of synchronizer to datasources
              _iterator7 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              try {
                for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
                  dataSource = _step7.value;
                  dataSource.setStartTimestamp(this.getStartTimeAsTimestamp());
                  dataSource.setEndTimestamp(this.getEndTimeAsTimestamp());
                }
                // re-compute new min/max of synchronizer
              } catch (err) {
                _iterator7.e(err);
              } finally {
                _iterator7.f();
              }
              this.computeMinMax();
              // provide new min/max of each dataSource to dataSynchronizer
              dataSourcesForWorker = [];
              _iterator8 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              try {
                for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
                  _dataSource = _step8.value;
                  obj = {
                    bufferingTime: _dataSource.properties.bufferingTime || 0,
                    timeOut: _dataSource.properties.timeOut || 0,
                    id: _dataSource.getId(),
                    name: _dataSource.getName(),
                    minTimestamp: _dataSource.getMinTimeAsTimestamp(),
                    maxTimestamp: _dataSource.getMaxTimeAsTimestamp()
                  };
                  dataSourcesForWorker.push(obj);
                }
              } catch (err) {
                _iterator8.e(err);
              } finally {
                _iterator8.f();
              }
              return _context17.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'time-range',
                mode: this.getMode(),
                replaySpeed: this.getReplaySpeed(),
                startTimestamp: this.getStartTimeAsTimestamp(),
                endTimestamp: this.getEndTimeAsTimestamp(),
                version: this.version(),
                dataSources: dataSourcesForWorker
              }));
            case 7:
            case "end":
              return _context17.stop();
          }
        }, _callee17, this);
      }));
      function updateAlgo() {
        return _updateAlgo.apply(this, arguments);
      }
      return updateAlgo;
    }()
  }, {
    key: "updateProperties",
    value: function () {
      var _updateProperties = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee18(properties) {
        var _iterator9, _step9, ds;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee18$(_context18) {
          while (1) switch (_context18.prev = _context18.next) {
            case 0:
              _iterator9 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              try {
                for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
                  ds = _step9.value;
                  ds.updateProperties(properties);
                }
              } catch (err) {
                _iterator9.e(err);
              } finally {
                _iterator9.f();
              }
            case 2:
            case "end":
              return _context18.stop();
          }
        }, _callee18, this);
      }));
      function updateProperties(_x11) {
        return _updateProperties.apply(this, arguments);
      }
      return updateProperties;
    }()
  }, {
    key: "resetTimes",
    value: function resetTimes() {
      this.computeMinMax();
    }

    /**
     * Resets reference time
     */
  }, {
    key: "reset",
    value: function () {
      var _reset = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee19() {
        var _this4 = this;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee19$(_context19) {
          while (1) switch (_context19.prev = _context19.next) {
            case 0:
              _context19.next = 2;
              return this.checkInit();
            case 2:
              return _context19.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'reset'
              }).then(function () {
                return _this4.resetTimes();
              }));
            case 3:
            case "end":
              return _context19.stop();
          }
        }, _callee19, this);
      }));
      function reset() {
        return _reset.apply(this, arguments);
      }
      return reset;
    }()
  }, {
    key: "getCurrentTime",
    value: function () {
      var _getCurrentTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee20() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee20$(_context20) {
          while (1) switch (_context20.prev = _context20.next) {
            case 0:
              return _context20.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'current-time'
              }));
            case 1:
            case "end":
              return _context20.stop();
          }
        }, _callee20, this);
      }));
      function getCurrentTime() {
        return _getCurrentTime.apply(this, arguments);
      }
      return getCurrentTime;
    }()
    /**
     * Connect the dataSource then the protocol will be opened as well.
     */
  }, {
    key: "isConnected",
    value: function () {
      var _isConnected = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee21() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee21$(_context21) {
          while (1) switch (_context21.prev = _context21.next) {
            case 0:
              if (!(this.dataSources.length === 0)) {
                _context21.next = 4;
                break;
              }
              return _context21.abrupt("return", false);
            case 4:
              _context21.next = 6;
              return this.checkInit();
            case 6:
              return _context21.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'is-connected'
              }).then(function (message) {
                return message.data;
              }));
            case 7:
            case "end":
              return _context21.stop();
          }
        }, _callee21, this);
      }));
      function isConnected() {
        return _isConnected.apply(this, arguments);
      }
      return isConnected;
    }()
  }, {
    key: "incVersion",
    value: function incVersion() {
      this.properties.version++;
    }
  }, {
    key: "onTimeChanged",
    value: function onTimeChanged(min, max, start, end) {}
  }, {
    key: "onRemovedDataSource",
    value: function onRemovedDataSource(dataSourceId) {}
  }, {
    key: "onAddedDataSource",
    value: function onAddedDataSource(dataSourceId) {}
  }]);
  return DataSynchronizerReplay;
}();
/* harmony default export */ var DataSynchronizer_replay = (DataSynchronizerReplay);
;// CONCATENATED MODULE: ../../osh-js/source/core/timesync/rt/DataSynchronizer.realtime.worker.js
function DataSynchronizer_realtime_worker_Worker_fn() {
  return new Worker(__webpack_require__.p + "js/DataSynchronizer.realtime.worker-legacy.de9e3fd4.worker.js");
}
;// CONCATENATED MODULE: ../../osh-js/source/core/timesync/rt/DataSynchronizer.realtime.js











/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






var DataSynchronizerRealtime = /*#__PURE__*/function () {
  /**
   * Creates The dataSynchronizer.
   * @param {Object} properties - the property of the object
   * @param {String} [properties.id=randomUUID] - id of the dataSynchronizer or random if not provided
   * @param {Number} [properties.timerResolution=5] - interval in which data is played (in milliseconds)
   * @param {Number} [properties.masterTimeRefreshRate=250] - interval in which time value is send through broadcast channel (in milliseconds)
   * @param {Datasource[]} properties.dataSources - the dataSource array
   * @param {DataSynchronizer} timeSync - dataSynchronizer
   */
  function DataSynchronizerRealtime(properties, timeSync) {
    (0,classCallCheck/* default */.Z)(this, DataSynchronizerRealtime);
    this.bufferingTime = 1000; // default
    this.id = properties.id || randomUUID();
    this.dataSources = properties.dataSources || [];
    this.timerResolution = properties.timerResolution || 5;
    this.masterTimeRefreshRate = properties.masterTimeRefreshRate || 250;
    this.initialized = false;
    this.timeSync = timeSync;
    this.properties = {};
    this.properties.version = 0;
  }
  (0,createClass/* default */.Z)(DataSynchronizerRealtime, [{
    key: "getId",
    value: function getId() {
      return this.id;
    }
  }, {
    key: "getDataSources",
    value: function getDataSources() {
      return this.dataSources;
    }
  }, {
    key: "getTopicId",
    value: function getTopicId() {
      return DATA_SYNCHRONIZER_TOPIC + this.id;
    }
  }, {
    key: "getTimeTopicId",
    value: function getTimeTopicId() {
      return TIME_SYNCHRONIZER_TOPIC + this.id;
    }
  }, {
    key: "setStartTimestamp",
    value: function setStartTimestamp(timestamp) {
      this.properties.startTimestamp = timestamp;
    }

    /**
     * Terminate the corresponding running WebWorker by calling terminate() on it.
     */
  }, {
    key: "terminate",
    value: function terminate() {
      if (this.synchronizerWorker !== null) {
        this.synchronizerWorker.terminate();
        this.synchronizerWorker = null;
      }
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var dataSource = _step.value;
          dataSource.terminate();
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "getMode",
    value: function getMode() {
      return Mode.REAL_TIME;
    }

    //----------- ASYNCHRONOUS FUNCTIONS -----------------//
  }, {
    key: "initDataSources",
    value: function () {
      var _initDataSources = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var _this = this;
        var dataSourcesForWorker, _iterator2, _step2, dataSource, dataSourceForWorker;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              dataSourcesForWorker = [];
              _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              _context.prev = 3;
              _iterator2.s();
            case 5:
              if ((_step2 = _iterator2.n()).done) {
                _context.next = 13;
                break;
              }
              dataSource = _step2.value;
              _context.next = 9;
              return this.createDataSourceForWorker(dataSource);
            case 9:
              dataSourceForWorker = _context.sent;
              dataSourcesForWorker.push(dataSourceForWorker);
            case 11:
              _context.next = 5;
              break;
            case 13:
              _context.next = 18;
              break;
            case 15:
              _context.prev = 15;
              _context.t0 = _context["catch"](3);
              _iterator2.e(_context.t0);
            case 18:
              _context.prev = 18;
              _iterator2.f();
              return _context.finish(18);
            case 21:
              this.synchronizerWorker = new worker_WorkerExt(new DataSynchronizer_realtime_worker_Worker_fn());
              this.synchronizerWorker.postMessageWithAck({
                message: 'init',
                dataSources: dataSourcesForWorker,
                timerResolution: this.timerResolution,
                masterTimeRefreshRate: this.masterTimeRefreshRate,
                mode: Mode.REAL_TIME,
                version: this.version(),
                topics: {
                  data: this.getTopicId(),
                  time: this.getTimeTopicId()
                }
              }).then(function () {
                _this.initialized = true;
              });
              _context.next = 28;
              break;
            case 25:
              _context.prev = 25;
              _context.t1 = _context["catch"](0);
              console.log(_context.t1);
            case 28:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 25], [3, 15, 18, 21]]);
      }));
      function initDataSources() {
        return _initDataSources.apply(this, arguments);
      }
      return initDataSources;
    }()
    /**
     * @private
     * @param dataSource
     */
  }, {
    key: "createDataSourceForWorker",
    value: function () {
      var _createDataSourceForWorker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(dataSource) {
        var obj;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              obj = {
                bufferingTime: dataSource.properties.bufferingTime || 0,
                timeOut: dataSource.properties.timeOut || 0,
                id: dataSource.id,
                name: dataSource.name
              }; // bind dataSource data onto dataSynchronizer data
              _context2.prev = 1;
              _context2.next = 4;
              return dataSource.setDataSynchronizer(this.timeSync);
            case 4:
              _context2.next = 10;
              break;
            case 6:
              _context2.prev = 6;
              _context2.t0 = _context2["catch"](1);
              console.error("Cannot set the synchronizer to this DataSource", _context2.t0);
              throw _context2.t0;
            case 10:
              return _context2.abrupt("return", obj);
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[1, 6]]);
      }));
      function createDataSourceForWorker(_x) {
        return _createDataSourceForWorker.apply(this, arguments);
      }
      return createDataSourceForWorker;
    }()
    /**
     * Adds a new DataSource object to the list of datasources to synchronize.
     * note: don't forget to call reset() to be sure to re-init the synchronizer internal properties.
     * @param {TimeSeriesDataSource} dataSource - the new datasource to add
     */
  }, {
    key: "addDataSource",
    value: function () {
      var _addDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(dataSource) {
        var _this2 = this;
        var dataSourceForWorker;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              this.dataSources.push(dataSource);
              if (this.initialized) {
                _context3.next = 5;
                break;
              }
              console.log("DataSynchronizer not initialized yet, add DataSource ".concat(dataSource.id, " as it"));
              _context3.next = 9;
              break;
            case 5:
              _context3.next = 7;
              return this.createDataSourceForWorker(dataSource);
            case 7:
              dataSourceForWorker = _context3.sent;
              // add dataSource to synchronizer algorithm
              this.synchronizerWorker.postMessageWithAck({
                message: 'add',
                dataSources: [dataSourceForWorker]
              }).then(function () {
                _this2.onAddedDataSource(dataSource.id);
              });
            case 9:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function addDataSource(_x2) {
        return _addDataSource.apply(this, arguments);
      }
      return addDataSource;
    }()
    /**
     * Removes a DataSource object from the list of datasources of the synchronizer.
     * @param {TimeSeriesDatasource} dataSource - the new datasource to add
     */
  }, {
    key: "removeDataSource",
    value: function () {
      var _removeDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(dataSource) {
        var _this3 = this;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return dataSource.removeDataSynchronizer();
            case 2:
              this.dataSources = this.dataSources.filter(function (elt) {
                return elt.id !== dataSource.getId();
              });
              if (!(this.dataSources.length === 0)) {
                _context4.next = 6;
                break;
              }
              _context4.next = 6;
              return this.reset();
            case 6:
              if (!this.initialized) {
                console.log("DataSynchronizer not initialized yet, remove DataSource ".concat(dataSource.id, " as it"));
              } else {
                this.synchronizerWorker.postMessageWithAck({
                  message: 'remove',
                  dataSourceIds: [dataSource.getId()]
                }).then(function () {
                  _this3.onRemovedDataSource(dataSource.id);
                });
              }
            case 7:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function removeDataSource(_x3) {
        return _removeDataSource.apply(this, arguments);
      }
      return removeDataSource;
    }()
    /**
     * @param {String} dataSourceId - the dataSource id
     * @param {Object} data - the data to push into the data synchronizer
     */
  }, {
    key: "push",
    value: function () {
      var _push = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(dataSourceId, data) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (!(this.synchronizerWorker !== null)) {
                _context5.next = 2;
                break;
              }
              return _context5.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                type: 'data',
                dataSourceId: dataSourceId,
                data: data
              }));
            case 2:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function push(_x4, _x5) {
        return _push.apply(this, arguments);
      }
      return push;
    }()
  }, {
    key: "version",
    value: function version() {
      return this.properties.version;
    }

    /**
     * Connects all dataSources
     */
  }, {
    key: "connect",
    value: function () {
      var _connect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this.checkInit();
            case 2:
              return _context6.abrupt("return", this.doConnect());
            case 3:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function connect() {
        return _connect.apply(this, arguments);
      }
      return connect;
    }()
  }, {
    key: "checkInit",
    value: function () {
      var _checkInit = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              if (!isDefined(this.init)) {
                this.init = this.initDataSources();
              }
              return _context7.abrupt("return", this.init);
            case 2:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function checkInit() {
        return _checkInit.apply(this, arguments);
      }
      return checkInit;
    }()
  }, {
    key: "doConnect",
    value: function () {
      var _doConnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8() {
        var _iterator3, _step3, dataSource;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              _context8.prev = 1;
              _iterator3.s();
            case 3:
              if ((_step3 = _iterator3.n()).done) {
                _context8.next = 9;
                break;
              }
              dataSource = _step3.value;
              _context8.next = 7;
              return dataSource.connect();
            case 7:
              _context8.next = 3;
              break;
            case 9:
              _context8.next = 14;
              break;
            case 11:
              _context8.prev = 11;
              _context8.t0 = _context8["catch"](1);
              _iterator3.e(_context8.t0);
            case 14:
              _context8.prev = 14;
              _iterator3.f();
              return _context8.finish(14);
            case 17:
              return _context8.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'connect',
                version: this.version()
              }));
            case 18:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this, [[1, 11, 14, 17]]);
      }));
      function doConnect() {
        return _doConnect.apply(this, arguments);
      }
      return doConnect;
    }()
    /**
     * Disconnects all dataSources
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9() {
        var promises, _iterator4, _step4, dataSource;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              _context9.next = 2;
              return this.reset();
            case 2:
              promises = [];
              _iterator4 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              try {
                for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
                  dataSource = _step4.value;
                  promises.push(dataSource.disconnect());
                }
              } catch (err) {
                _iterator4.e(err);
              } finally {
                _iterator4.f();
              }
              return _context9.abrupt("return", Promise.all(promises));
            case 6:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
  }, {
    key: "updateProperties",
    value: function () {
      var _updateProperties = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee10(properties) {
        var _iterator5, _step5, ds;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              _iterator5 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSources);
              try {
                for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
                  ds = _step5.value;
                  ds.updateProperties(properties);
                }
              } catch (err) {
                _iterator5.e(err);
              } finally {
                _iterator5.f();
              }
            case 2:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function updateProperties(_x6) {
        return _updateProperties.apply(this, arguments);
      }
      return updateProperties;
    }()
    /**
     * Resets reference time
     */
  }, {
    key: "reset",
    value: function () {
      var _reset = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee11() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              _context11.next = 2;
              return this.checkInit();
            case 2:
              return _context11.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'reset'
              }));
            case 3:
            case "end":
              return _context11.stop();
          }
        }, _callee11, this);
      }));
      function reset() {
        return _reset.apply(this, arguments);
      }
      return reset;
    }()
  }, {
    key: "getCurrentTime",
    value: function () {
      var _getCurrentTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee12() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              return _context12.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'current-time'
              }));
            case 1:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this);
      }));
      function getCurrentTime() {
        return _getCurrentTime.apply(this, arguments);
      }
      return getCurrentTime;
    }()
    /**
     * Connect the dataSource then the protocol will be opened as well.
     */
  }, {
    key: "isConnected",
    value: function () {
      var _isConnected = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee13() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              if (!(this.dataSources.length === 0)) {
                _context13.next = 4;
                break;
              }
              return _context13.abrupt("return", false);
            case 4:
              _context13.next = 6;
              return this.checkInit();
            case 6:
              return _context13.abrupt("return", this.synchronizerWorker.postMessageWithAck({
                message: 'is-connected'
              }).then(function (message) {
                return message.data;
              }));
            case 7:
            case "end":
              return _context13.stop();
          }
        }, _callee13, this);
      }));
      function isConnected() {
        return _isConnected.apply(this, arguments);
      }
      return isConnected;
    }()
  }, {
    key: "setMinTime",
    value: function setMinTime(minTime) {}
  }, {
    key: "setMaxTime",
    value: function setMaxTime(maxTime) {}
  }, {
    key: "incVersion",
    value: function incVersion() {
      this.properties.version++;
    }
  }, {
    key: "onTimeChanged",
    value: function onTimeChanged(start, min) {}
  }, {
    key: "onRemovedDataSource",
    value: function onRemovedDataSource(dataSourceId) {}
  }, {
    key: "onAddedDataSource",
    value: function onAddedDataSource(dataSourceId) {}
  }]);
  return DataSynchronizerRealtime;
}();
/* harmony default export */ var DataSynchronizer_realtime = (DataSynchronizerRealtime);
;// CONCATENATED MODULE: ../../osh-js/source/core/timesync/DataSynchronizer.js







/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






var DataSynchronizer = /*#__PURE__*/function () {
  /**
   * Creates The dataSynchronizer.
   * @param {Object} properties - the property of the object
   * @param {String} [properties.id=randomUUID] - id of the dataSynchronizer or random if not provided
   * @param {Number} [properties.replaySpeed=1] - replaySpeed value
   * @param {Number} [properties.timerResolution=5] - interval in which data is played (in milliseconds)
   * @param {Number} [properties.masterTimeRefreshRate=250] - interval in which time value is send through broadcast channel (in milliseconds)
   * @param {Number} [properties.mode=Mode.REPLAY] - mode of the data synchronizer
   * @param {String} properties.startTime - start time of the temporal run
   * @param {String} properties.endTime - end time of the temporal run
   * @param {Datasource[]} properties.dataSources - the dataSource array
   */
  function DataSynchronizer(properties) {
    var _this = this;
    (0,classCallCheck/* default */.Z)(this, DataSynchronizer);
    var id = properties.id || randomUUID();
    this.dataSynchronizerReplay = new DataSynchronizer_replay((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, properties), {}, {
      id: id + '-replay'
    }), this);
    this.dataSynchronizerRt = new DataSynchronizer_realtime((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, properties), {}, {
      id: id + '-realtime'
    }), this);
    this.broadcastChannels = [];
    this.setMode(properties.mode || Mode.REPLAY).then(function () {
      _this.dataSynchronizer.onTimeChanged = function (min, max, start, end) {
        return _this.onTimeChanged(min, max, start, end);
      };
      _this.dataSynchronizer.onAddedDataSource = function (dataSourceId) {
        return _this.onAddedDataSource(dataSourceId);
      };
      _this.dataSynchronizer.onRemovedDataSource = function (dataSourceId) {
        return _this.onRemovedDataSource(dataSourceId);
      };
    });
  }
  (0,createClass/* default */.Z)(DataSynchronizer, [{
    key: "getId",
    value: function getId() {
      return this.id;
    }
  }, {
    key: "setMode",
    value: function () {
      var _setMode = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(mode) {
        var _iterator, _step, bc, _iterator2, _step2, ds;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this.dataSynchronizer) {
                _context.next = 3;
                break;
              }
              _context.next = 3;
              return this.dataSynchronizer.disconnect();
            case 3:
              if (mode === Mode.REPLAY) {
                this.dataSynchronizer = this.dataSynchronizerReplay;
              } else if (mode === Mode.REAL_TIME) {
                this.dataSynchronizer = this.dataSynchronizerRt;
              }
              this.id = this.dataSynchronizer.id;
              _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.broadcastChannels);
              try {
                for (_iterator.s(); !(_step = _iterator.n()).done;) {
                  bc = _step.value;
                  bc.close();
                }
              } catch (err) {
                _iterator.e(err);
              } finally {
                _iterator.f();
              }
              this.initEventSubscription();
              this.broadcastChannels = [];
              _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(this.dataSynchronizer.getDataSources());
              _context.prev = 10;
              _iterator2.s();
            case 12:
              if ((_step2 = _iterator2.n()).done) {
                _context.next = 18;
                break;
              }
              ds = _step2.value;
              _context.next = 16;
              return ds.setMode(mode);
            case 16:
              _context.next = 12;
              break;
            case 18:
              _context.next = 23;
              break;
            case 20:
              _context.prev = 20;
              _context.t0 = _context["catch"](10);
              _iterator2.e(_context.t0);
            case 23:
              _context.prev = 23;
              _iterator2.f();
              return _context.finish(23);
            case 26:
              this.onChangedMode(mode);
            case 27:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[10, 20, 23, 26]]);
      }));
      function setMode(_x) {
        return _setMode.apply(this, arguments);
      }
      return setMode;
    }()
  }, {
    key: "initEventSubscription",
    value: function initEventSubscription() {
      var _this2 = this;
      this.eventSubscriptionMap = {};
      // listen for Events to callback to subscriptions
      this.broadcastChannels.push(new BroadcastChannel(this.getTopicId()).onmessage = function (message) {
        var type = message.data.type;
        if (type in _this2.eventSubscriptionMap) {
          for (var i = 0; i < _this2.eventSubscriptionMap[type].length; i++) {
            _this2.eventSubscriptionMap[type][i](message.data);
          }
        }
      });
      this.broadcastChannels.push(new BroadcastChannel(this.getTimeTopicId()).onmessage = function (message) {
        if (message.data.type === EventType.MASTER_TIME) {
          // this.properties.startTimestamp = message.data.timestamp; // save as last timestamp
          _this2.dataSynchronizer.setStartTimestamp(message.data.timestamp);
        }
        var type = message.data.type;
        if (type in _this2.eventSubscriptionMap) {
          for (var i = 0; i < _this2.eventSubscriptionMap[type].length; i++) {
            _this2.eventSubscriptionMap[type][i](message.data);
          }
        }
      });
    }
  }, {
    key: "subscribe",
    value: function subscribe(fn, eventTypes) {
      // associate function to eventType
      for (var i = 0; i < eventTypes.length; i++) {
        if (!(eventTypes[i] in this.eventSubscriptionMap)) {
          this.eventSubscriptionMap[eventTypes[i]] = [];
        }
        this.eventSubscriptionMap[eventTypes[i]].push(fn);
      }
    }
  }, {
    key: "getDataSources",
    value: function getDataSources() {
      return this.dataSynchronizer.getDataSources();
    }
  }, {
    key: "getTopicId",
    value: function getTopicId() {
      return this.dataSynchronizer.getTopicId();
    }
  }, {
    key: "getTimeTopicId",
    value: function getTimeTopicId() {
      return this.dataSynchronizer.getTimeTopicId();
    }

    /**
     * Gets the startTime of the first DataSource objet
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getStartTimeAsIsoDate",
    value: function getStartTimeAsIsoDate() {
      return this.dataSynchronizer.getStartTimeAsIsoDate();
    }

    /**
     * Gets the startTime of the first DataSource objet
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getStartTimeAsTimestamp",
    value: function getStartTimeAsTimestamp() {
      return this.dataSynchronizer.getStartTimeAsTimestamp();
    }

    /**
     * Gets the endTime of the first DataSource objet
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getEndTimeAsIsoDate",
    value: function getEndTimeAsIsoDate() {
      return this.dataSynchronizer.getEndTimeAsIsoDate();
    }
  }, {
    key: "getEndTimeAsTimestamp",
    value: function getEndTimeAsTimestamp() {
      return this.dataSynchronizer.getEndTimeAsTimestamp();
    }

    /**
     * Gets the minTime of the first DataSource objet
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getMinTimeAsIsoDate",
    value: function getMinTimeAsIsoDate() {
      return this.dataSynchronizer.getMinTimeAsIsoDate();
    }

    /**
     * Gets the minTime of the first DataSource objet
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getMinTimeAsTimestamp",
    value: function getMinTimeAsTimestamp() {
      return this.dataSynchronizer.getMinTimeAsTimestamp();
    }

    /**
     * Gets the maxTime of the first DataSource objet
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getMaxTimeAsIsoDate",
    value: function getMaxTimeAsIsoDate() {
      return this.dataSynchronizer.getMinTimeAsTimestamp();
    }

    /**
     * Gets the maxTime of the first DataSource objet
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getMaxTimeAsTimestamp",
    value: function getMaxTimeAsTimestamp() {
      return this.dataSynchronizer.getMaxTimeAsTimestamp();
    }

    /**
     * Gets the replaySpeed
     * @returns {Number} - the replay speed
     */
  }, {
    key: "getReplaySpeed",
    value: function getReplaySpeed() {
      return this.dataSynchronizer.getReplaySpeed();
    }

    /**
     * Terminate the corresponding running WebWorker by calling terminate() on it.
     */
  }, {
    key: "terminate",
    value: function terminate() {
      return this.dataSynchronizer.terminate();
    }

    // subscribe(fn, eventTypes) {
    //     this.dataSynchronizerRt.subscribe(fn,eventTypes);
    //     this.dataSynchronizerReplay.subscribe(fn,eventTypes);
    // }
  }, {
    key: "getMode",
    value: function getMode() {
      return this.dataSynchronizer.getMode();
    }

    //----------- ASYNCHRONOUS FUNCTIONS -----------------//
  }, {
    key: "initDataSources",
    value: function () {
      var _initDataSources = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", this.dataSynchronizer.initDataSources());
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function initDataSources() {
        return _initDataSources.apply(this, arguments);
      }
      return initDataSources;
    }()
    /**
     * Adds a new DataSource object to the list of datasources to synchronize.
     * note: don't forget to call reset() to be sure to re-init the synchronizer internal properties.
     * @param {TimeSeriesDataSource} dataSource - the new datasource to add
     */
  }, {
    key: "addDataSource",
    value: function () {
      var _addDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(dataSource) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.dataSynchronizerRt.addDataSource(dataSource);
            case 2:
              return _context3.abrupt("return", this.dataSynchronizerReplay.addDataSource(dataSource));
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function addDataSource(_x2) {
        return _addDataSource.apply(this, arguments);
      }
      return addDataSource;
    }()
    /**
     * Removes a DataSource object from the list of datasources of the synchronizer.
     * @param {TimeSeriesDatasource} dataSource - the new datasource to add
     */
  }, {
    key: "removeDataSource",
    value: function () {
      var _removeDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(dataSource) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return this.dataSynchronizerRt.removeDataSource(dataSource);
            case 2:
              return _context4.abrupt("return", this.dataSynchronizerReplay.removeDataSource(dataSource));
            case 3:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function removeDataSource(_x3) {
        return _removeDataSource.apply(this, arguments);
      }
      return removeDataSource;
    }()
    /**
     * @param {String} dataSourceId - the dataSource id
     * @param {Object} data - the data to push into the data synchronizer
     */
  }, {
    key: "push",
    value: function () {
      var _push = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(dataSourceId, data) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              return _context5.abrupt("return", this.dataSynchronizer.push(dataSourceId, data));
            case 1:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function push(_x4, _x5) {
        return _push.apply(this, arguments);
      }
      return push;
    }()
  }, {
    key: "version",
    value: function version() {
      return this.dataSynchronizer.version();
    }
    /**
     * Connects all dataSources
     */
  }, {
    key: "connect",
    value: function () {
      var _connect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this.dataSynchronizer.connect();
            case 2:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function connect() {
        return _connect.apply(this, arguments);
      }
      return connect;
    }()
  }, {
    key: "checkInit",
    value: function () {
      var _checkInit = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              return _context7.abrupt("return", this.dataSynchronizer.checkInit());
            case 1:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function checkInit() {
        return _checkInit.apply(this, arguments);
      }
      return checkInit;
    }()
  }, {
    key: "doConnect",
    value: function () {
      var _doConnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              return _context8.abrupt("return", this.dataSynchronizer.doConnect());
            case 1:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function doConnect() {
        return _doConnect.apply(this, arguments);
      }
      return doConnect;
    }()
    /**
     * Disconnects all dataSources
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              return _context9.abrupt("return", this.dataSynchronizer.disconnect());
            case 1:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
    /**
     * Sets the replaySpeed
     */
  }, {
    key: "setReplaySpeed",
    value: function () {
      var _setReplaySpeed = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee10(replaySpeed) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              return _context10.abrupt("return", this.dataSynchronizer.setReplaySpeed(replaySpeed));
            case 1:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function setReplaySpeed(_x6) {
        return _setReplaySpeed.apply(this, arguments);
      }
      return setReplaySpeed;
    }()
    /**
     * Sets the data source time range
     * @param {String} startTime - the startTime (in date ISO)
     * @param {String} endTime - the startTime (in date ISO)
     * @param {Number} replaySpeed - the replay speed
     * @param {boolean} reconnect - reconnect if was connected
     */
  }, {
    key: "setTimeRange",
    value: function () {
      var _setTimeRange = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee11() {
        var startTime,
          endTime,
          replaySpeed,
          reconnect,
          _args11 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              startTime = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : this.getStartTimeAsIsoDate();
              endTime = _args11.length > 1 && _args11[1] !== undefined ? _args11[1] : this.getEndTimeAsIsoDate();
              replaySpeed = _args11.length > 2 && _args11[2] !== undefined ? _args11[2] : this.getReplaySpeed();
              reconnect = _args11.length > 3 && _args11[3] !== undefined ? _args11[3] : false;
              return _context11.abrupt("return", this.dataSynchronizer.setTimeRange(startTime, endTime, replaySpeed, reconnect));
            case 5:
            case "end":
              return _context11.stop();
          }
        }, _callee11, this);
      }));
      function setTimeRange() {
        return _setTimeRange.apply(this, arguments);
      }
      return setTimeRange;
    }()
  }, {
    key: "updateProperties",
    value: function () {
      var _updateProperties = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee12(properties) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              return _context12.abrupt("return", this.dataSynchronizer.updateProperties(properties));
            case 1:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this);
      }));
      function updateProperties(_x7) {
        return _updateProperties.apply(this, arguments);
      }
      return updateProperties;
    }()
    /**
     * Resets reference time
     */
  }, {
    key: "reset",
    value: function () {
      var _reset = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee13() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              return _context13.abrupt("return", this.dataSynchronizer.reset());
            case 1:
            case "end":
              return _context13.stop();
          }
        }, _callee13, this);
      }));
      function reset() {
        return _reset.apply(this, arguments);
      }
      return reset;
    }()
  }, {
    key: "getCurrentTime",
    value: function () {
      var _getCurrentTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee14() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              return _context14.abrupt("return", this.dataSynchronizer.getCurrentTime());
            case 1:
            case "end":
              return _context14.stop();
          }
        }, _callee14, this);
      }));
      function getCurrentTime() {
        return _getCurrentTime.apply(this, arguments);
      }
      return getCurrentTime;
    }()
  }, {
    key: "setMinTime",
    value: function setMinTime(minTime) {
      this.dataSynchronizer.setMinTime(minTime);
    }
  }, {
    key: "setMaxTime",
    value: function setMaxTime(maxTime) {
      this.dataSynchronizer.setMaxTime(maxTime);
    }

    /**
    * Connect the dataSource then the protocol will be opened as well.
    */
  }, {
    key: "isConnected",
    value: function () {
      var _isConnected = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee15() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              return _context15.abrupt("return", this.dataSynchronizer.isConnected());
            case 1:
            case "end":
              return _context15.stop();
          }
        }, _callee15, this);
      }));
      function isConnected() {
        return _isConnected.apply(this, arguments);
      }
      return isConnected;
    }()
  }, {
    key: "minMaxChanged",
    value: function minMaxChanged() {
      var resetStartTimestamp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      if (resetStartTimestamp) {
        this.dataSynchronizerReplay.properties.startTimestamp = undefined;
        this.dataSynchronizerReplay.properties.endTimestamp = undefined;
      }
      this.dataSynchronizerReplay.computeMinMax();
      this.dataSynchronizerReplay.timeChanged();
    }
  }, {
    key: "onTimeChanged",
    value: function onTimeChanged(start, min) {}
  }, {
    key: "onRemovedDataSource",
    value: function onRemovedDataSource(dataSourceId) {}
  }, {
    key: "onAddedDataSource",
    value: function onAddedDataSource(dataSourceId) {}
  }, {
    key: "onChangedMode",
    value: function onChangedMode(mode) {}
  }]);
  return DataSynchronizer;
}();
/* harmony default export */ var timesync_DataSynchronizer = (DataSynchronizer);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(39110);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(24343);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/get.js + 1 modules
var get = __webpack_require__(26334);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(62040);
;// CONCATENATED MODULE: ../../osh-js/source/core/datasource/worker/DataSource.worker.js
function DataSource_worker_Worker_fn() {
  return new Worker(__webpack_require__.p + "js/DataSource.worker-legacy.7a34a939.worker.js");
}
;// CONCATENATED MODULE: ../../osh-js/source/core/datasource/DataSource.datasource.js







/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/







/**
 * The DataSource is the abstract class used to create different datasources.
 *
 */
var DataSource = /*#__PURE__*/function () {
  function DataSource(name, properties) {
    (0,classCallCheck/* default */.Z)(this, DataSource);
    this.id = properties.id || "DataSource-" + randomUUID();
    this.name = name;
    this.properties = properties;
    this.eventSubscriptionMap = {};
    this.init = undefined;
    this.mode = Mode.REAL_TIME;
    if (isDefined(properties.mode)) {
      this.mode = properties.mode;
    }
  }

  /**
   * Gets the datasource id.
   * @return {String} the datasource id
   */
  (0,createClass/* default */.Z)(DataSource, [{
    key: "getId",
    value: function getId() {
      return this.id;
    }

    /**
     * Gets the datasource name.
     * @return {String} the datasource name
     */
  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
  }, {
    key: "terminate",
    value: function terminate() {
      if (this.dataSourceWorker !== null) {
        this.dataSourceWorker.terminate();
      }
    }
  }, {
    key: "getTopicId",
    value: function getTopicId() {
      return DATASOURCE_DATA_TOPIC + this.id;
    }
  }, {
    key: "subscribe",
    value: function subscribe(fn, eventTypes) {
      // associate function to eventType
      for (var i = 0; i < eventTypes.length; i++) {
        if (!(eventTypes[i] in this.eventSubscriptionMap)) {
          this.eventSubscriptionMap[eventTypes[i]] = [];
        }
        this.eventSubscriptionMap[eventTypes[i]].push(fn);
      }
    }

    //----------- ASYNCHRONOUS FUNCTIONS -----------------//
  }, {
    key: "createWorker",
    value: function () {
      var _createWorker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(properties) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", new worker_WorkerExt(new DataSource_worker_Worker_fn()));
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function createWorker(_x) {
        return _createWorker.apply(this, arguments);
      }
      return createWorker;
    }()
    /**
     * Update properties
     * @param {String} name - the datasource name
     * @param {Object} properties - the datasource properties
     * @param {Number} properties.bufferingTime - defines the time during the data has to be buffered
     * @param {Number} properties.timeOut - defines the limit time before data has to be skipped
     * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}
     * @param {String} properties.endpointUrl the endpoint url
     * @param {String} properties.service the service
     * @param {Number} properties.responseFormat the response format (e.g video/mp4)
     * @param {Number} properties.reconnectTimeout - the timeout before reconnecting
     */
  }, {
    key: "updateProperties",
    value: function () {
      var _updateProperties = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(properties) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this.properties = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.properties), properties);
              return _context2.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'update-properties',
                data: properties
              }));
            case 2:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updateProperties(_x2) {
        return _updateProperties.apply(this, arguments);
      }
      return updateProperties;
    }()
    /**
     * Connect the dataSource then the protocol will be opened as well.
     */
  }, {
    key: "connect",
    value: function () {
      var _connect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.checkInit();
            case 2:
              return _context3.abrupt("return", this.doConnect());
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function connect() {
        return _connect.apply(this, arguments);
      }
      return connect;
    }()
  }, {
    key: "initDataSource",
    value: function () {
      var _initDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5() {
        var _this = this;
        var properties,
          _args5 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              properties = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : this.properties;
              _context5.next = 3;
              return this.createWorker(this.properties);
            case 3:
              this.dataSourceWorker = _context5.sent;
              return _context5.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'init',
                id: this.id,
                properties: properties,
                topics: {
                  data: this.getTopicId()
                }
              }).then(function () {
                // listen for Events to callback to subscriptions
                var datasourceBroadcastChannel = new BroadcastChannel(_this.getTopicId());
                datasourceBroadcastChannel.onmessage = /*#__PURE__*/function () {
                  var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(message) {
                    return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
                      while (1) switch (_context4.prev = _context4.next) {
                        case 0:
                          _context4.next = 2;
                          return _this.handleMessage(message);
                        case 2:
                        case "end":
                          return _context4.stop();
                      }
                    }, _callee4);
                  }));
                  return function (_x3) {
                    return _ref.apply(this, arguments);
                  };
                }();
                _this.isInitialized = true;
              }));
            case 5:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function initDataSource() {
        return _initDataSource.apply(this, arguments);
      }
      return initDataSource;
    }()
  }, {
    key: "handleMessage",
    value: function () {
      var _handleMessage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(message) {
        var type, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              type = message.data.type;
              if (type in this.eventSubscriptionMap) {
                for (i = 0; i < this.eventSubscriptionMap[type].length; i++) {
                  this.eventSubscriptionMap[type][i](message.data);
                }
              }
            case 2:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function handleMessage(_x4) {
        return _handleMessage.apply(this, arguments);
      }
      return handleMessage;
    }()
  }, {
    key: "checkInit",
    value: function () {
      var _checkInit = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              if (!isDefined(this.init)) {
                this.init = this.initDataSource();
              }
              return _context7.abrupt("return", this.init);
            case 2:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function checkInit() {
        return _checkInit.apply(this, arguments);
      }
      return checkInit;
    }()
  }, {
    key: "doConnect",
    value: function () {
      var _doConnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              return _context8.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'connect'
              }));
            case 1:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function doConnect() {
        return _doConnect.apply(this, arguments);
      }
      return doConnect;
    }()
  }, {
    key: "isConnected",
    value: function () {
      var _isConnected = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              if (this.init) {
                _context9.next = 4;
                break;
              }
              return _context9.abrupt("return", false);
            case 4:
              _context9.next = 6;
              return this.checkInit();
            case 6:
              return _context9.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'is-connected'
              }));
            case 7:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function isConnected() {
        return _isConnected.apply(this, arguments);
      }
      return isConnected;
    }()
    /**
     * Disconnect the dataSource then the protocol will be closed as well.
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee10() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              _context10.next = 2;
              return this.checkInit();
            case 2:
              return _context10.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'disconnect'
              }));
            case 3:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
  }, {
    key: "onDisconnect",
    value: function () {
      var _onDisconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee11() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
            case "end":
              return _context11.stop();
          }
        }, _callee11);
      }));
      function onDisconnect() {
        return _onDisconnect.apply(this, arguments);
      }
      return onDisconnect;
    }()
  }, {
    key: "reset",
    value: function reset() {
      this.init = undefined;
    }
  }, {
    key: "onRemovedDataSource",
    value: function onRemovedDataSource(dataSourceId) {}
  }, {
    key: "onAddedDataSource",
    value: function onAddedDataSource(dataSourceId) {}
  }]);
  return DataSource;
}();
/* harmony default export */ var DataSource_datasource = (DataSource);
;// CONCATENATED MODULE: ../../osh-js/source/core/datasource/TimeSeries.realtime.datasource.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






/**
 * The DataSource is the abstract class used to create different datasources.
 *
 */
var TimeSeriesRealtimeDatasource = /*#__PURE__*/function (_DataSource) {
  (0,inherits/* default */.Z)(TimeSeriesRealtimeDatasource, _DataSource);
  var _super = (0,createSuper/* default */.Z)(TimeSeriesRealtimeDatasource);
  function TimeSeriesRealtimeDatasource(name, properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, TimeSeriesRealtimeDatasource);
    _this = _super.call(this, name, properties);
    _this.dataSynchronizer = undefined;
    _this.properties.version = 0;
    return _this;
  }
  (0,createClass/* default */.Z)(TimeSeriesRealtimeDatasource, [{
    key: "getTimeTopicId",
    value: function getTimeTopicId() {
      return DATASOURCE_TIME_TOPIC + this.id;
    }

    /**
     * Gets the mode
     * @returns {Mode} - Datasource mode
     */
  }, {
    key: "getMode",
    value: function getMode() {
      return Mode.REAL_TIME;
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getStartTimeAsIsoDate",
    value: function getStartTimeAsIsoDate() {
      return 'now';
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getStartTimeAsTimestamp",
    value: function getStartTimeAsTimestamp() {
      return Date.now();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getEndTimeAsIsoDate",
    value: function getEndTimeAsIsoDate() {
      return this.getMaxTimeAsTimestamp();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getEndTimeAsTimestamp",
    value: function getEndTimeAsTimestamp() {
      return this.getMaxTimeAsTimestamp();
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getMinTimeAsIsoDate",
    value: function getMinTimeAsIsoDate() {
      return 'now';
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getMaxTimeAsIsoDate",
    value: function getMaxTimeAsIsoDate() {
      return '2055-01-01Z';
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getMinTimeAsTimestamp",
    value: function getMinTimeAsTimestamp() {
      return Date.now(); // or should we use first timestamp of last data received???
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getMaxTimeAsTimestamp",
    value: function getMaxTimeAsTimestamp() {
      return new Date('2055-01-01Z').toISOString();
    }

    /**
     * Sets the min time
     */
  }, {
    key: "setMinTime",
    value: function setMinTime(time) {}

    /**
     * Sets the max time
     */
  }, {
    key: "setMaxTime",
    value: function setMaxTime(time) {}

    /**
     * Sets the start time
     */
  }, {
    key: "setStartTimestamp",
    value: function setStartTimestamp(timestamp) {}

    /**
     * Sets the end time
     */
  }, {
    key: "setEndTimestamp",
    value: function setEndTimestamp(timestamp) {}

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getReplaySpeed",
    value: function getReplaySpeed() {
      return 1.0;
    }
  }, {
    key: "setReplaySpeed",
    value: function setReplaySpeed(replaySpeed) {}
  }, {
    key: "setVersion",
    value: function setVersion(version) {
      this.properties.version = version;
    }

    //----------- ASYNCHRONOUS FUNCTIONS -----------------//

    /**
     * @param dataSynchronizer
     * @returns {Promise}
     */
  }, {
    key: "setDataSynchronizer",
    value: function () {
      var _setDataSynchronizer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSynchronizer) {
        var topic;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.checkInit();
            case 2:
              topic = DATA_SYNCHRONIZER_TOPIC + dataSynchronizer.id;
              this.dataSynchronizer = dataSynchronizer;
              this.properties.version = this.dataSynchronizer.version();
              return _context.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'topics',
                topics: {
                  data: topic,
                  time: this.getTimeTopicId(),
                  sync: dataSynchronizer.getTimeTopicId()
                }
              }));
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setDataSynchronizer(_x) {
        return _setDataSynchronizer.apply(this, arguments);
      }
      return setDataSynchronizer;
    }()
  }, {
    key: "removeDataSynchronizer",
    value: function () {
      var _removeDataSynchronizer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (this.dataSourceWorker) {
                this.dataSourceWorker.terminate();
                this.dataSynchronizer = undefined;
              }
              // this.init = undefined;
              return _context2.abrupt("return", this.checkInit());
            case 2:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function removeDataSynchronizer() {
        return _removeDataSynchronizer.apply(this, arguments);
      }
      return removeDataSynchronizer;
    }()
    /**
     * Disconnect the dataSource then the protocol will be closed as well.
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.checkInit();
            case 2:
              return _context3.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'disconnect'
              }));
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
  }, {
    key: "doConnect",
    value: function () {
      var _doConnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              return _context4.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'connect',
                startTime: 'now',
                version: this.version()
              }));
            case 1:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function doConnect() {
        return _doConnect.apply(this, arguments);
      }
      return doConnect;
    }()
    /**
     * Inits the datasource with the constructor properties.
     * @protected
     * @param properties
     */
  }, {
    key: "initDataSource",
    value: function () {
      var _initDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(properties) {
        var _this2 = this;
        var topics;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(TimeSeriesRealtimeDatasource.prototype), "initDataSource", this).call(this, properties);
            case 2:
              topics = {
                data: this.getTopicId(),
                time: this.getTimeTopicId()
              };
              if (this.dataSynchronizer) {
                topics.sync = dataSynchronizer.getTimeTopicId();
              }
              return _context6.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'topics',
                topics: topics
              }).then(function () {
                // listen for Events to callback to subscriptions
                var datasourceBroadcastChannel = new BroadcastChannel(_this2.getTimeTopicId());
                datasourceBroadcastChannel.onmessage = /*#__PURE__*/function () {
                  var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(message) {
                    return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
                      while (1) switch (_context5.prev = _context5.next) {
                        case 0:
                          _context5.next = 2;
                          return _this2.handleTimeMessage(message);
                        case 2:
                        case "end":
                          return _context5.stop();
                      }
                    }, _callee5);
                  }));
                  return function (_x3) {
                    return _ref.apply(this, arguments);
                  };
                }();
              }));
            case 5:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function initDataSource(_x2) {
        return _initDataSource.apply(this, arguments);
      }
      return initDataSource;
    }()
  }, {
    key: "handleTimeMessage",
    value: function () {
      var _handleTimeMessage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7(message) {
        var type, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              type = message.data.type;
              if (type in this.eventSubscriptionMap) {
                for (i = 0; i < this.eventSubscriptionMap[type].length; i++) {
                  this.eventSubscriptionMap[type][i](message.data);
                }
              }
            case 2:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function handleTimeMessage(_x4) {
        return _handleTimeMessage.apply(this, arguments);
      }
      return handleTimeMessage;
    }()
  }, {
    key: "version",
    value: function version() {
      return this.properties.version;
    }
  }]);
  return TimeSeriesRealtimeDatasource;
}(DataSource_datasource);
/* harmony default export */ var TimeSeries_realtime_datasource = (TimeSeriesRealtimeDatasource);
;// CONCATENATED MODULE: ../../osh-js/source/core/datasource/TimeSeries.replay.datasource.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






/**
 * The DataSource is the abstract class used to create different datasources.
 *
 */
var TimeSeriesReplayDatasource = /*#__PURE__*/function (_DataSource) {
  (0,inherits/* default */.Z)(TimeSeriesReplayDatasource, _DataSource);
  var _super = (0,createSuper/* default */.Z)(TimeSeriesReplayDatasource);
  function TimeSeriesReplayDatasource(name, properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, TimeSeriesReplayDatasource);
    _this = _super.call(this, name, properties);
    _this.setMinTime(properties.startTime);
    _this.setMaxTime(properties.endTime);
    _this.properties.startTimestamp = new Date(properties.startTime).getTime();
    _this.properties.endTimestamp = new Date(properties.endTime).getTime();
    assertDefined(properties, 'Some properties must be defined');
    _this.dataSynchronizer = undefined;
    _this.properties.version = 0;
    return _this;
  }
  (0,createClass/* default */.Z)(TimeSeriesReplayDatasource, [{
    key: "getTimeTopicId",
    value: function getTimeTopicId() {
      return DATASOURCE_TIME_TOPIC + this.id;
    }

    /**
     * Gets the mode
     * @returns {Mode} - Datasource mode
     */
  }, {
    key: "getMode",
    value: function getMode() {
      return this.properties.mode;
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getStartTimeAsIsoDate",
    value: function getStartTimeAsIsoDate() {
      return new Date(this.getStartTimeAsTimestamp()).toISOString();
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getStartTimeAsTimestamp",
    value: function getStartTimeAsTimestamp() {
      return this.properties.startTimestamp;
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getEndTimeAsIsoDate",
    value: function getEndTimeAsIsoDate() {
      return new Date(this.getEndTimeAsTimestamp()).toISOString();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getEndTimeAsTimestamp",
    value: function getEndTimeAsTimestamp() {
      return this.properties.endTimestamp;
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getMinTimeAsIsoDate",
    value: function getMinTimeAsIsoDate() {
      return new Date(this.getMinTimeAsTimestamp()).toISOString();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getMaxTimeAsIsoDate",
    value: function getMaxTimeAsIsoDate() {
      return new Date(this.getMaxTimeAsTimestamp()).toISOString();
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getMinTimeAsTimestamp",
    value: function getMinTimeAsTimestamp() {
      return this.properties.minTimestamp;
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getMaxTimeAsTimestamp",
    value: function getMaxTimeAsTimestamp() {
      return this.properties.maxTimestamp;
    }

    /**
     * Sets the min time
     */
  }, {
    key: "setMinTime",
    value: function () {
      var _setMinTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(time) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.properties.minTimestamp = new Date(time).getTime();
              _context.next = 3;
              return this.computeMinMax();
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setMinTime(_x) {
        return _setMinTime.apply(this, arguments);
      }
      return setMinTime;
    }()
    /**
     * Sets the max time
     */
  }, {
    key: "setMaxTime",
    value: function () {
      var _setMaxTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(time) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this.properties.maxTimestamp = new Date(time).getTime();
              _context2.next = 3;
              return this.computeMinMax();
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function setMaxTime(_x2) {
        return _setMaxTime.apply(this, arguments);
      }
      return setMaxTime;
    }()
    /**
     * Sets the start time
     */
  }, {
    key: "setStartTimestamp",
    value: function () {
      var _setStartTimestamp = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(timestamp) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              this.properties.startTimestamp = timestamp;
              _context3.next = 3;
              return this.computeMinMax();
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function setStartTimestamp(_x3) {
        return _setStartTimestamp.apply(this, arguments);
      }
      return setStartTimestamp;
    }()
    /**
     * Sets the end time
     */
  }, {
    key: "setEndTimestamp",
    value: function () {
      var _setEndTimestamp = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(timestamp) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              this.properties.endTimestamp = timestamp;
              this.computeMinMax();
            case 2:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function setEndTimestamp(_x4) {
        return _setEndTimestamp.apply(this, arguments);
      }
      return setEndTimestamp;
    }()
    /**
     * Sets the start time
     */
  }, {
    key: "setStartTime",
    value: function () {
      var _setStartTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(time) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return this.setStartTimestamp(new Date(time).getTime());
            case 2:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function setStartTime(_x5) {
        return _setStartTime.apply(this, arguments);
      }
      return setStartTime;
    }()
    /**
     * Sets the end time
     */
  }, {
    key: "setEndTime",
    value: function () {
      var _setEndTime = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(time) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this.setEndTimestamp(new Date(time).getTime());
            case 2:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function setEndTime(_x6) {
        return _setEndTime.apply(this, arguments);
      }
      return setEndTime;
    }()
    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getReplaySpeed",
    value: function getReplaySpeed() {
      return this.properties.replaySpeed;
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "setReplaySpeed",
    value: function setReplaySpeed(replaySpeed) {
      this.properties.replaySpeed = replaySpeed;
    }
  }, {
    key: "setVersion",
    value: function setVersion(version) {
      this.properties.version = version;
    }

    //----------- ASYNCHRONOUS FUNCTIONS -----------------//

    /**
     * @param dataSynchronizer
     * @returns {Promise}
     */
  }, {
    key: "setDataSynchronizer",
    value: function () {
      var _setDataSynchronizer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7(dataSynchronizer) {
        var topic;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              _context7.next = 2;
              return this.checkInit();
            case 2:
              topic = DATA_SYNCHRONIZER_TOPIC + dataSynchronizer.getId();
              this.dataSynchronizer = dataSynchronizer;
              this.properties.version = this.dataSynchronizer.version();
              return _context7.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'topics',
                topics: {
                  data: topic,
                  time: this.getTimeTopicId(),
                  sync: dataSynchronizer.getTimeTopicId()
                }
              }));
            case 6:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function setDataSynchronizer(_x7) {
        return _setDataSynchronizer.apply(this, arguments);
      }
      return setDataSynchronizer;
    }()
  }, {
    key: "removeDataSynchronizer",
    value: function () {
      var _removeDataSynchronizer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              if (this.dataSourceWorker) {
                this.dataSourceWorker.terminate();
                this.dataSynchronizer = undefined;
              }
              this.init = undefined;
              this.dataSynchronizer = undefined;
              _context8.next = 5;
              return this.checkInit();
            case 5:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function removeDataSynchronizer() {
        return _removeDataSynchronizer.apply(this, arguments);
      }
      return removeDataSynchronizer;
    }()
    /**
     * Disconnect the dataSource then the protocol will be closed as well.
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              if (!isDefined(this.init)) {
                _context9.next = 8;
                break;
              }
              _context9.prev = 1;
              return _context9.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'disconnect'
              }));
            case 5:
              _context9.prev = 5;
              _context9.t0 = _context9["catch"](1);
              console.error(_context9.t0);
            case 8:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this, [[1, 5]]);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
  }, {
    key: "doConnect",
    value: function () {
      var _doConnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee10() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              return _context10.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'connect',
                startTime: this.getStartTimeAsIsoDate(),
                version: this.version()
              }));
            case 1:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function doConnect() {
        return _doConnect.apply(this, arguments);
      }
      return doConnect;
    }()
    /**
     * Inits the datasource with the constructor properties.
     * @protected
     * @param properties
     */
  }, {
    key: "initDataSource",
    value: function () {
      var _initDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee12(properties) {
        var _this2 = this;
        var topics;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              _context12.next = 2;
              return (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(TimeSeriesReplayDatasource.prototype), "initDataSource", this).call(this, properties);
            case 2:
              topics = {
                data: this.getTopicId(),
                time: this.getTimeTopicId()
              };
              if (this.dataSynchronizer) {
                topics.sync = dataSynchronizer.getTimeTopicId();
              }
              return _context12.abrupt("return", this.dataSourceWorker.postMessageWithAck({
                message: 'topics',
                topics: topics
              }).then(function () {
                // listen for Events to callback to subscriptions
                var datasourceBroadcastChannel = new BroadcastChannel(_this2.getTimeTopicId());
                datasourceBroadcastChannel.onmessage = /*#__PURE__*/function () {
                  var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee11(message) {
                    return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee11$(_context11) {
                      while (1) switch (_context11.prev = _context11.next) {
                        case 0:
                          _context11.next = 2;
                          return _this2.handleTimeMessage(message);
                        case 2:
                        case "end":
                          return _context11.stop();
                      }
                    }, _callee11);
                  }));
                  return function (_x9) {
                    return _ref.apply(this, arguments);
                  };
                }();
              }));
            case 5:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this);
      }));
      function initDataSource(_x8) {
        return _initDataSource.apply(this, arguments);
      }
      return initDataSource;
    }()
  }, {
    key: "handleTimeMessage",
    value: function () {
      var _handleTimeMessage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee13(message) {
        var type, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              type = message.data.type;
              if (type in this.eventSubscriptionMap) {
                for (i = 0; i < this.eventSubscriptionMap[type].length; i++) {
                  this.eventSubscriptionMap[type][i](message.data);
                }
              }
            case 2:
            case "end":
              return _context13.stop();
          }
        }, _callee13, this);
      }));
      function handleTimeMessage(_x10) {
        return _handleTimeMessage.apply(this, arguments);
      }
      return handleTimeMessage;
    }()
  }, {
    key: "version",
    value: function version() {
      return this.properties.version;
    }
  }, {
    key: "computeMinMax",
    value: function computeMinMax() {
      // intersect end/start depending on the min/max
      if (this.properties.startTimestamp < this.properties.minTimestamp) {
        this.properties.startTimestamp = this.properties.minTimestamp;
      }
      if (this.properties.endTimestamp > this.properties.maxTimestamp) {
        this.properties.endTimestamp = this.properties.maxTimestamp;
      }
    }

    /**
     * Sets the data source time range
     * @param {String} startTime - the startTime (in date ISO)
     * @param {String} endTime - the startTime (in date ISO)
     * @param {Number} replaySpeed - the replay speed
     * @param {boolean} reconnect - reconnect if was connected
     * @param {Mode} mode - default dataSource mode
     * @param {Number} version - version of data
     */
  }, {
    key: "setTimeRange",
    value: function () {
      var _setTimeRange = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee14() {
        var startTime,
          endTime,
          replaySpeed,
          reconnect,
          mode,
          version,
          _args14 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              startTime = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : this.getStartTimeAsIsoDate();
              endTime = _args14.length > 1 && _args14[1] !== undefined ? _args14[1] : this.getEndTimeAsIsoDate();
              replaySpeed = _args14.length > 2 && _args14[2] !== undefined ? _args14[2] : this.getReplaySpeed();
              reconnect = _args14.length > 3 && _args14[3] !== undefined ? _args14[3] : false;
              mode = _args14.length > 4 && _args14[4] !== undefined ? _args14[4] : this.getMode();
              version = _args14.length > 5 && _args14[5] !== undefined ? _args14[5] : this.version();
              _context14.next = 8;
              return this.checkInit();
            case 8:
              if (version !== this.version()) {
                // update version if come in from other input
                this.properties.version = version;
              }

              // compute intersection
              this.properties.startTimestamp = new Date(startTime).getTime();
              this.properties.endTimestamp = new Date(endTime).getTime();
              this.computeMinMax();
              return _context14.abrupt("return", this.updateProperties({
                startTime: this.getStartTimeAsIsoDate(),
                endTime: this.getEndTimeAsIsoDate(),
                replaySpeed: replaySpeed,
                reconnect: reconnect,
                mode: mode,
                version: version
              }));
            case 13:
            case "end":
              return _context14.stop();
          }
        }, _callee14, this);
      }));
      function setTimeRange() {
        return _setTimeRange.apply(this, arguments);
      }
      return setTimeRange;
    }()
  }]);
  return TimeSeriesReplayDatasource;
}(DataSource_datasource);
/* harmony default export */ var TimeSeries_replay_datasource = (TimeSeriesReplayDatasource);
;// CONCATENATED MODULE: ../../osh-js/source/core/datasource/TimeSeries.datasource.js






/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






/**
 * The DataSource is the abstract class used to create different datasources.
 *
 */
var TimeSeriesDatasource = /*#__PURE__*/function () {
  function TimeSeriesDatasource(name, properties) {
    (0,classCallCheck/* default */.Z)(this, TimeSeriesDatasource);
    var id = randomUUID();
    this.timeSeriesRealtimeDataSource = new TimeSeries_realtime_datasource(name, (0,objectSpread2/* default */.Z)({
      id: id
    }, properties));
    this.timeSeriesReplayDataSource = new TimeSeries_replay_datasource(name, (0,objectSpread2/* default */.Z)({
      id: id
    }, properties));
    this.setMode(properties.mode);
  }
  (0,createClass/* default */.Z)(TimeSeriesDatasource, [{
    key: "setMode",
    value: function () {
      var _setMode = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(mode) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this.timeSeriesDataSource) {
                _context.next = 3;
                break;
              }
              _context.next = 3;
              return this.timeSeriesDataSource.disconnect();
            case 3:
              if (!this.timeSeriesDataSource || mode !== this.timeSeriesDataSource.getMode()) {
                if (mode === Mode.REAL_TIME) {
                  this.timeSeriesDataSource = this.timeSeriesRealtimeDataSource;
                } else {
                  this.timeSeriesDataSource = this.timeSeriesReplayDataSource;
                }

                // bind properties
                this.properties = this.timeSeriesDataSource.properties;
                this.id = this.timeSeriesDataSource.id;
                this.name = this.timeSeriesDataSource.name;
                this.properties.mode = mode;
              }
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setMode(_x) {
        return _setMode.apply(this, arguments);
      }
      return setMode;
    }()
  }, {
    key: "getTimeTopicId",
    value: function getTimeTopicId() {
      return this.timeSeriesDataSource.getTimeTopicId();
    }

    /**
     * Gets the mode
     * @returns {Mode} - Datasource mode
     */
  }, {
    key: "getMode",
    value: function getMode() {
      return this.timeSeriesDataSource.getMode();
    }
  }, {
    key: "setVersion",
    value: function setVersion(version) {
      this.timeSeriesDataSource.setVersion(version);
    }
    /**
     * Gets the startTime
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getStartTimeAsIsoDate",
    value: function getStartTimeAsIsoDate() {
      return this.timeSeriesDataSource.getStartTimeAsIsoDate();
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getStartTimeAsTimestamp",
    value: function getStartTimeAsTimestamp() {
      return this.timeSeriesDataSource.getStartTimeAsTimestamp();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getEndTimeAsIsoDate",
    value: function getEndTimeAsIsoDate() {
      return this.timeSeriesDataSource.getEndTimeAsIsoDate();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getEndTimeAsTimestamp",
    value: function getEndTimeAsTimestamp() {
      return this.timeSeriesDataSource.getEndTimeAsTimestamp();
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as ISO date
     */
  }, {
    key: "getMinTimeAsIsoDate",
    value: function getMinTimeAsIsoDate() {
      return this.timeSeriesDataSource.getMinTimeAsIsoDate();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getMaxTimeAsIsoDate",
    value: function getMaxTimeAsIsoDate() {
      return this.timeSeriesDataSource.getMaxTimeAsIsoDate();
    }

    /**
     * Gets the startTime
     * @returns {String} - startTime as unix timestamp
     */
  }, {
    key: "getMinTimeAsTimestamp",
    value: function getMinTimeAsTimestamp() {
      return this.timeSeriesDataSource.getMinTimeAsTimestamp();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as unix timestamp
     */
  }, {
    key: "getMaxTimeAsTimestamp",
    value: function getMaxTimeAsTimestamp() {
      return this.timeSeriesDataSource.getMaxTimeAsTimestamp();
    }

    /**
     * Sets the min time
     */
  }, {
    key: "setMinTime",
    value: function setMinTime(time) {
      this.timeSeriesDataSource.setMinTime(time);
    }

    /**
     * Sets the max time
     */
  }, {
    key: "setMaxTime",
    value: function setMaxTime(time) {
      this.timeSeriesDataSource.setMaxTime(time);
    }

    /**
     * Sets the start time
     */
  }, {
    key: "setStartTimestamp",
    value: function setStartTimestamp(timestamp) {
      this.timeSeriesDataSource.setStartTimestamp(timestamp);
    }

    /**
     * Sets the end time
     */
  }, {
    key: "setEndTimestamp",
    value: function setEndTimestamp(timestamp) {
      this.timeSeriesDataSource.setEndTimestamp(timestamp);
    }

    /**
     * Sets the start time
     */
  }, {
    key: "setStartTime",
    value: function setStartTime(time) {
      this.timeSeriesDataSource.setStartTime(time);
    }

    /**
     * Sets the end time
     */
  }, {
    key: "setEndTime",
    value: function setEndTime(time) {
      this.timeSeriesDataSource.setEndTime(time);
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "getReplaySpeed",
    value: function getReplaySpeed() {
      return this.timeSeriesDataSource.getReplaySpeed();
    }

    /**
     * Gets the endTime
     * @returns {String} - endTime as ISO date
     */
  }, {
    key: "setReplaySpeed",
    value: function setReplaySpeed(replaySpeed) {
      this.timeSeriesDataSource.setReplaySpeed(replaySpeed);
    }
    //----------- ASYNCHRONOUS FUNCTIONS -----------------//

    /**
     * @param dataSynchronizer
     * @returns {Promise}
     */
  }, {
    key: "setDataSynchronizer",
    value: function () {
      var _setDataSynchronizer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(dataSynchronizer) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", this.timeSeriesDataSource.setDataSynchronizer(dataSynchronizer));
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function setDataSynchronizer(_x2) {
        return _setDataSynchronizer.apply(this, arguments);
      }
      return setDataSynchronizer;
    }()
  }, {
    key: "removeDataSynchronizer",
    value: function () {
      var _removeDataSynchronizer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              return _context3.abrupt("return", this.timeSeriesDataSource.removeDataSynchronizer());
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function removeDataSynchronizer() {
        return _removeDataSynchronizer.apply(this, arguments);
      }
      return removeDataSynchronizer;
    }()
    /**
     * Disconnect the dataSource then the protocol will be closed as well.
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              return _context4.abrupt("return", this.timeSeriesDataSource.disconnect());
            case 1:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
  }, {
    key: "doConnect",
    value: function () {
      var _doConnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              return _context5.abrupt("return", this.timeSeriesDataSource.doConnect());
            case 1:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function doConnect() {
        return _doConnect.apply(this, arguments);
      }
      return doConnect;
    }()
    /**
     * Inits the datasource with the constructor properties.
     * @protected
     * @param properties
     */
  }, {
    key: "initDataSource",
    value: function () {
      var _initDataSource = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(properties) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              return _context6.abrupt("return", this.timeSeriesDataSource.initDataSource(properties));
            case 1:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function initDataSource(_x3) {
        return _initDataSource.apply(this, arguments);
      }
      return initDataSource;
    }()
  }, {
    key: "version",
    value: function version() {
      return this.timeSeriesDataSource.version();
    }
    /**
     * Sets the data source time range
     * @param {String} startTime - the startTime (in date ISO)
     * @param {String} endTime - the startTime (in date ISO)
     * @param {Number} replaySpeed - the replay speed
     * @param {boolean} reconnect - reconnect if was connected
     * @param {Mode} mode - default dataSource mode
     * @param {Number} version - version of data
     */
  }, {
    key: "setTimeRange",
    value: function () {
      var _setTimeRange = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7() {
        var startTime,
          endTime,
          replaySpeed,
          reconnect,
          mode,
          version,
          _args7 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              startTime = _args7.length > 0 && _args7[0] !== undefined ? _args7[0] : this.getStartTimeAsIsoDate();
              endTime = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : this.getEndTimeAsIsoDate();
              replaySpeed = _args7.length > 2 && _args7[2] !== undefined ? _args7[2] : this.getReplaySpeed();
              reconnect = _args7.length > 3 && _args7[3] !== undefined ? _args7[3] : false;
              mode = _args7.length > 4 && _args7[4] !== undefined ? _args7[4] : this.getMode();
              version = _args7.length > 5 && _args7[5] !== undefined ? _args7[5] : this.version();
              return _context7.abrupt("return", this.timeSeriesDataSource.setTimeRange(startTime, endTime, replaySpeed, reconnect, mode, version));
            case 7:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function setTimeRange() {
        return _setTimeRange.apply(this, arguments);
      }
      return setTimeRange;
    }()
    /***********************************/
    /**
     * Gets the datasource id.
     * @return {String} the datasource id
     */
  }, {
    key: "getId",
    value: function getId() {
      return this.timeSeriesDataSource.getId();
    }

    /**
     * Gets the datasource name.
     * @return {String} the datasource name
     */
  }, {
    key: "getName",
    value: function getName() {
      return this.timeSeriesDataSource.getName();
    }
  }, {
    key: "terminate",
    value: function terminate() {
      this.timeSeriesDataSource.terminate();
    }
  }, {
    key: "getTopicId",
    value: function getTopicId() {
      return this.timeSeriesDataSource.getTopicId();
    }
  }, {
    key: "subscribe",
    value: function subscribe(fn, eventTypes) {
      this.timeSeriesDataSource.subscribe(fn, eventTypes);
    }

    /**
     * Update properties
     * @param {String} name - the datasource name
     * @param {Object} properties - the datasource properties
     * @param {Number} properties.bufferingTime - defines the time during the data has to be buffered
     * @param {Number} properties.timeOut - defines the limit time before data has to be skipped
     * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}
     * @param {String} properties.endpointUrl the endpoint url
     * @param {String} properties.service the service
     * @param {Number} properties.responseFormat the response format (e.g video/mp4)
     * @param {Number} properties.reconnectTimeout - the timeout before reconnecting
     */
  }, {
    key: "updateProperties",
    value: function () {
      var _updateProperties = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8(properties) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              return _context8.abrupt("return", this.timeSeriesDataSource.updateProperties(properties));
            case 1:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function updateProperties(_x4) {
        return _updateProperties.apply(this, arguments);
      }
      return updateProperties;
    }()
    /**
     * Connect the dataSource then the protocol will be opened as well.
     */
  }, {
    key: "connect",
    value: function () {
      var _connect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              return _context9.abrupt("return", this.timeSeriesDataSource.connect());
            case 1:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function connect() {
        return _connect.apply(this, arguments);
      }
      return connect;
    }()
  }, {
    key: "checkInit",
    value: function () {
      var _checkInit = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee10() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              return _context10.abrupt("return", this.timeSeriesDataSource.checkInit());
            case 1:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function checkInit() {
        return _checkInit.apply(this, arguments);
      }
      return checkInit;
    }()
  }, {
    key: "isConnected",
    value: function () {
      var _isConnected = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee11() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              return _context11.abrupt("return", this.timeSeriesDataSource.isConnected());
            case 1:
            case "end":
              return _context11.stop();
          }
        }, _callee11, this);
      }));
      function isConnected() {
        return _isConnected.apply(this, arguments);
      }
      return isConnected;
    }()
  }, {
    key: "reset",
    value: function reset() {
      this.timeSeriesDataSource.reset();
    }
  }, {
    key: "onTimeChanged",
    value: function onTimeChanged(min, max, start, end) {}
  }]);
  return TimeSeriesDatasource;
}();
/* harmony default export */ var TimeSeries_datasource = (TimeSeriesDatasource);
;// CONCATENATED MODULE: ../../osh-js/source/core/datasource/sweapi/SweApi.datasource.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/



var SweApi = /*#__PURE__*/function (_TimeSeriesDatasource) {
  (0,inherits/* default */.Z)(SweApi, _TimeSeriesDatasource);
  var _super = (0,createSuper/* default */.Z)(SweApi);
  /**
   * @param {String} name - the datasource name
   * @param {Object} properties - the datasource properties
   * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}, 'http', 'ws', 'mqtt', 'file', 'topic'
   * @param {String} properties.endpointUrl the endpoint url, this property is ignored in case of using 'mqtt' protocol, the properties.mqttOpts.endpointUrl will be used instead
   * @param {String} properties.resource the resource, /procedures, /fois, /observations, /tasks, /datastreams/4778/obs
   * @param {Boolean} properties.tls - defines if use secure TLS connection
   * @param {Boolean} properties.connectorOpts - connector specific Opts
   * @param {Object} [properties.mqttOpts={}] - the Mqtt options if protocol is 'mqtt'
   * @param {String} properties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} properties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   * @param {Number} [properties.responseFormat=application/om+json] the response format (e.g application/om+json)
   * @param {String[]} [properties.parentId=undefined] the parent id
   * @param {String[]} [properties.keywords=undefined] the keyword ids
   * @param {String[]} [properties.includedProps=undefined] the included properties
   * @param {String[]} [properties.excludedProps=undefined] the excluded properties
   * @param {string} [properties.roi=undefined] - WKT geometry and operator to filter resources on their location or geometry
   * @param {String[]} [properties.featureOfInterest=undefined] Comma separated list of feature of interest IDs to get observations for.
   * @param {String[]} [properties.observedProperty=undefined] Comma separated list of observed property URIs to get observations for.
   * @param {String[]} [properties.prefetchBatchSize=250] Number of elements to prefetch at a time
   * @param {String[]} [properties.prefetchBatchDuration=5000] Duration before prefetching the next batch. N.b the next batch will be prefetched at 80% of this duration
   */
  function SweApi(name, properties) {
    (0,classCallCheck/* default */.Z)(this, SweApi);
    return _super.call(this, name, (0,objectSpread2/* default */.Z)({
      reconnectTimeout: 1000 * 5,
      // default if not defined into properties
      reconnectRetry: 10,
      startTime: 'now',
      endTime: '2055-01-01T00:00:00Z',
      tls: false,
      responseFormat: 'application/swe+json',
      protocol: 'http',
      type: 'SweApiStream',
      mode: Mode.REAL_TIME,
      prefetchBatchSize: 250,
      prefetchBatchDuration: 5000,
      connectorOpts: {}
    }, properties));
  }
  return (0,createClass/* default */.Z)(SweApi);
}(TimeSeries_datasource);
/* harmony default export */ var SweApi_datasource = (SweApi);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(82482);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js
var es_symbol = __webpack_require__(82526);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.description.js
var es_symbol_description = __webpack_require__(41817);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.unshift.js
var es_array_unshift = __webpack_require__(30541);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/layer/Layer.js














/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/



/**
 * This class is in charge of defining a Layer object.
 */
var Layer = /*#__PURE__*/function () {
  /**
   *
   * @param {Object} properties - contains a list of properties
   * @param {string} properties.name - default name
   * @param {string} properties.description - default description
   * @param {string} properties.dataSourceId - default dataSourceId
   * @param {boolean} properties.visible - defines if the layer is visible
   * @param {Number} properties.timestamp - defines the timestamp of the data
   * @param {Function} properties.getTimestamp - function which defines the timestamp of the data
   * @param {Function} properties.onLeftClick - trigger onLeftClick marker event
   * @param {Function} properties.onRightClick - trigger onRightClick marker event
   * @param {Function} properties.onHover - trigger onHover marker event
   */
  function Layer(properties) {
    (0,classCallCheck/* default */.Z)(this, Layer);
    this.properties = properties;
    this.init(properties);
  }

  /**
   * Inits the layer.
   */
  (0,createClass/* default */.Z)(Layer, [{
    key: "init",
    value: function init() {
      var _this = this;
      var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.properties;
      this.data = [];
      this.propsById = {};
      this.dataSourcesToFn = undefined;
      this.props = {
        id: "layer-" + randomUUID(),
        filter: true,
        name: '',
        description: '',
        visible: true,
        timestamp: true
      };
      this.dataSourceIds = undefined;
      if (isDefined(properties.name)) {
        this.props.name = properties.name;
      }
      if (isDefined(properties.description)) {
        this.props.description = properties.description;
      }
      if (isDefined(properties.dataSourceId)) {
        this.dataSourceIds = [properties.dataSourceId];
      }
      if (isDefined(properties.dataSourceIds)) {
        this.dataSourceIds = properties.dataSourceIds;
      }
      if (!this.dataSourceIds) {
        this.dataSourceIds = [];
      }
      // assertDefined(this.dataSourceIds, '[Layer] dataSourceIds[] or dataSourceId');

      if (isDefined(properties.visible)) {
        this.props.visible = properties.visible;
      }
      if (isDefined(properties.timestamp)) {
        this.props.timestamp = properties.timestamp;
      }
      if (isDefined(properties.onLeftClick) && assertFunction(properties.onLeftClick)) {
        this.props.onLeftClick = properties.onLeftClick;
      }
      if (isDefined(properties.onRightClick) && assertFunction(properties.onRightClick)) {
        this.props.onRightClick = properties.onRightClick;
      }
      if (isDefined(properties.onHover) && assertFunction(properties.onHover)) {
        this.props.onHover = properties.onHover;
      }
      this.initEvents();
      if (this.checkFn("filter")) {
        var fn = function fn(rec, timestamp, options) {
          _this.props.filter = _this.getFunc('filter')(rec, timestamp, options);
        };
        this.addFn(this.getDataSourcesIdsByProperty('filter'), fn);
      } else {
        this.properties.filter = function (rec, timestamp, options) {
          return true;
        };
        var _fn = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return _this.getFunc('filter')(rec, timestamp, options);
                case 2:
                  _this.props.filter = _context.sent;
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function _fn(_x, _x2, _x3) {
            return _ref.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('filter'), _fn);
      }
      if (this.checkFn("getVisible")) {
        var _fn2 = /*#__PURE__*/function () {
          var _ref2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.t0 = _this;
                  _context2.next = 3;
                  return _this.getFunc('getVisible')(rec, timestamp, options);
                case 3:
                  _context2.t1 = _context2.sent;
                  _context2.t0.updateProperty.call(_context2.t0, 'visible', _context2.t1);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          return function _fn2(_x4, _x5, _x6) {
            return _ref2.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getVisible'), _fn2);
      }
      if (this.checkFn("getTimestamp")) {
        var _fn3 = /*#__PURE__*/function () {
          var _ref3 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  _context3.t0 = _this;
                  _context3.next = 3;
                  return _this.getFunc('getTimestamp')(rec, timestamp, options);
                case 3:
                  _context3.t1 = _context3.sent;
                  _context3.t0.updateProperty.call(_context3.t0, 'timestamp', _context3.t1);
                case 5:
                case "end":
                  return _context3.stop();
              }
            }, _callee3);
          }));
          return function _fn3(_x7, _x8, _x9) {
            return _ref3.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getTimestamp'), _fn3);
      }
      if (this.checkFn("getName")) {
        var _fn4 = /*#__PURE__*/function () {
          var _ref4 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  _context4.t0 = _this;
                  _context4.next = 3;
                  return _this.getFunc('getName')(rec, timestamp, options);
                case 3:
                  _context4.t1 = _context4.sent;
                  _context4.t0.updateProperty.call(_context4.t0, 'name', _context4.t1);
                case 5:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          }));
          return function _fn4(_x10, _x11, _x12) {
            return _ref4.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getName'), _fn4);
      }
      if (this.checkFn("getDescription")) {
        var _fn5 = /*#__PURE__*/function () {
          var _ref5 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  _context5.t0 = _this;
                  _context5.next = 3;
                  return _this.getFunc('getDescription')(rec, timestamp, options);
                case 3:
                  _context5.t1 = _context5.sent;
                  _context5.t0.updateProperty.call(_context5.t0, 'description', _context5.t1);
                case 5:
                case "end":
                  return _context5.stop();
              }
            }, _callee5);
          }));
          return function _fn5(_x13, _x14, _x15) {
            return _ref5.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getDescription'), _fn5);
      }
    }
  }, {
    key: "getFunc",
    value: function getFunc(funcName) {
      return this.properties[funcName].handler || this.properties[funcName];
    }

    /**
     * @private
     * @param funcName
     * @return {*}
     */
  }, {
    key: "checkFn",
    value: function checkFn(funcName) {
      var func = this.properties[funcName];
      if (isFunction(func)) {
        assertDefined(this.dataSourceIds, 'dataSourceIds');
        return true;
      } else {
        var isSet = hasValue(func);
        if (isSet) {
          assertArray(func.dataSourceIds, funcName + ".dataSourceIds");
          assertFunction(func.handler, funcName + ".handler");
        }
        return isSet;
      }
    }

    /**
     * @private
     */
  }, {
    key: "initEvents",
    value: function initEvents() {}

    /**
     * Clear the layer.
     */
  }, {
    key: "clear",
    value: function clear() {}

    /**
     * Gets the layer id.
     * @return {String} the layer id
     */
  }, {
    key: "getId",
    value: function getId() {
      return this.props.id;
    }

    /**
     * Selects the datasource contained into the list
     * @param {Array} dataSourceIds the list of datasources
     */
  }, {
    key: "select",
    value: function select(dataSourceIds) {}

    /**
     * Adds a function associated to a list of dataSource ids
     * @param {String[]} dataSourceIds - the list of datasources
     * @param {Function} fn - the function to add
     * @param {Boolean} [first=false] - set at the first position
     */
  }, {
    key: "addFn",
    value: function addFn(dataSourceIds, fn) {
      var first = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      if (!isDefined(this.dataSourcesToFn)) {
        this.dataSourcesToFn = {};
      }
      for (var i = 0; i < dataSourceIds.length; i++) {
        var dataSourceId = dataSourceIds[i];
        if (!isDefined(this.dataSourcesToFn[dataSourceId])) {
          this.dataSourcesToFn[dataSourceId] = [];
        }
        if (first) {
          this.dataSourcesToFn[dataSourceId].unshift(fn);
        } else {
          this.dataSourcesToFn[dataSourceId].push(fn);
        }
      }
    }

    /**
     *
     * @param dataSourceId
     * @param {Object[]} records
     * @param options
     */
  }, {
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(dataSourceId, records) {
        var options,
          fnArr,
          j,
          i,
          _args6 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              options = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : {};
              // store data into data props
              this.data = [];
              options.dataSourceId = dataSourceId;
              if (!isDefined(this.dataSourcesToFn)) {
                _context6.next = 22;
                break;
              }
              if (!(dataSourceId in this.dataSourcesToFn)) {
                _context6.next = 22;
                break;
              }
              fnArr = this.dataSourcesToFn[dataSourceId];
              this.props.filter = true;
              j = 0;
            case 8:
              if (!(j < records.length)) {
                _context6.next = 22;
                break;
              }
              i = 0;
            case 10:
              if (!(i < fnArr.length)) {
                _context6.next = 18;
                break;
              }
              _context6.next = 13;
              return fnArr[i](records[j].data, records[j].data.timestamp, options);
            case 13:
              if (this.props.filter) {
                _context6.next = 15;
                break;
              }
              return _context6.abrupt("break", 18);
            case 15:
              i++;
              _context6.next = 10;
              break;
            case 18:
              if (this.props.filter) {
                this.data.push((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.props), this.propsById[this.getId()]));
              }
            case 19:
              j++;
              _context6.next = 8;
              break;
            case 22:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function setData(_x16, _x17) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
    /**
     *
     * @return {String[]} The list of dataSource ids
     */
  }, {
    key: "getDataSourcesIds",
    value: function getDataSourcesIds() {
      if (isDefined(this.dataSourcesToFn)) {
        var res = [];
        for (var i in this.dataSourcesToFn) {
          res.push(i);
        }
        return res;
      } else {
        assertDefined(this.dataSourceIds, 'dataSourceId must be defined');
        return this.dataSourceIds;
      }
    }
  }, {
    key: "getDataSourcesIdsByProperty",
    value: function getDataSourcesIdsByProperty(name) {
      return this.properties[name].dataSourceIds || this.dataSourceIds;
    }

    /**
     * Clone current layer properties
     * @return {Object} a shallow copy of current properties
     */
  }, {
    key: "getProps",
    value: function getProps() {
      return {
        type: this.type,
        values: this.data
      };
    }

    /**
     * Reset to default Layer values
     */
  }, {
    key: "reset",
    value: function reset() {
      this.init(this.properties);
    }
  }, {
    key: "updateProperty",
    value: function updateProperty(propertyName, value) {
      this.propsById[this.getId()][propertyName] = value;
    }
  }, {
    key: "checkExistingProps",
    value: function checkExistingProps(id) {
      return id in this.propsById;
    }
  }, {
    key: "setProps",
    value: function setProps(id, props) {
      this.propsById[id] = props;
    }
  }, {
    key: "setId",
    value: function setId(id, defaultProps) {
      this.props.id = id;
      if (!this.checkExistingProps(id)) {
        this.setProps(id, defaultProps());
      }
    }
  }, {
    key: "definedId",
    value: function definedId(idName, props) {
      var _this2 = this;
      if (this.checkFn("get".concat(capitalizeFirstLetter(idName)))) {
        var fn = /*#__PURE__*/function () {
          var _ref6 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7(rec, timestamp, options) {
            var id;
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  _context7.next = 2;
                  return _this2.getFunc("get".concat(capitalizeFirstLetter(idName)))(rec, timestamp, options);
                case 2:
                  id = _context7.sent;
                  _this2.setId(id, function () {
                    return (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, props), {}, (0,defineProperty/* default */.Z)({}, idName, id));
                  });
                case 4:
                case "end":
                  return _context7.stop();
              }
            }, _callee7);
          }));
          return function fn(_x18, _x19, _x20) {
            return _ref6.apply(this, arguments);
          };
        }();
        // must be first to assign correctly the first location to the right id if it is defined
        this.addFn(this.getDataSourcesIdsByProperty("get".concat(capitalizeFirstLetter(idName))), fn, true);
      } else {
        this.setId(this.getId(), function () {
          return (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, props), {}, (0,defineProperty/* default */.Z)({}, idName, _this2.getId()));
        });
      }
    }
  }, {
    key: "getCurrentProps",
    value: function getCurrentProps() {
      return this.propsById[this.getId()];
    }
  }, {
    key: "getIds",
    value: function getIds() {
      return Object.keys(this.propsById);
    }
  }]);
  return Layer;
}();
/* harmony default export */ var layer_Layer = (Layer);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/layer/PointMarkerLayer.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2017 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * @extends Layer
 * @example
 *
 * import PointMarkerLayer from 'core/ui/layer/PointMarkerLayer.js';
 *
 * let pointMarkerLayer = new PointMarkerLayer({
        location : {
            x : 1.42376557,
            y : 43.61758626,
            z : 100
        },
        getLocation : {
            dataSourceIds : [androidPhoneGpsDataSource.getId()],
            handler : function(rec) {
                return {
                    x : rec.lon,
                    y : rec.lat,
                    z : rec.alt
                };
            }
        },
        getOrientation : {
            dataSourceIds : [androidPhoneOrientationDataSource.getId()],
            handler : function(rec) {
                return {
                    heading : rec.heading
                };
            }
        },
        icon : 'images/cameralook.png',
        getIcon : {
            dataSourceIds: [androidPhoneGpsDataSource.getId()],
            handler : function(rec,timeStamp,options) {
                if(options.selected) {
                    return 'images/cameralook-selected.png'
                } else {
                    return 'images/cameralook.png';
                };
            }
        }
    });
 */
var initialStates = {};
var PointMarkerLayer = /*#__PURE__*/function (_Layer) {
  (0,inherits/* default */.Z)(PointMarkerLayer, _Layer);
  var _super = (0,createSuper/* default */.Z)(PointMarkerLayer);
  /**
   * Create the PointMarker
   * @param {Object} properties
   * @param {Number[]} properties.location - [x,y,z]
   * @param {Number} [properties.orientation=0] -
   * @param {String} properties.icon -
   * @param {Number} [properties.iconScale=1] - the icon scale size
   * @param {String} [properties.iconColor="#000000"] - the icon color
   * @param {Number[]} [properties.iconAnchor=[16,16]] -
   * @param {Number[]} [properties.iconSize=[16,16]] -
   * @param {Number} [properties.iconOpacity=0.75] - icon opacity
   * @param {String} [properties.label=""] - the label to display
   * @param {String} [properties.labelColor="#000000"] - color
   * @param {String} [properties.labelOutlineColor=undefined] - color
   * @param {String} [properties.labelBackgroundColor=undefined] -  color
   * @param {Number} [properties.labelSize=16] -
   * @param {Number} [properties.labelScale=1.0] - label scale
   * @param {Number[]} [properties.labelOffset=[0,0]] -
   * @param {Number} [properties.zIndex=0] - z-ordering of markers
   * @param {Number} [properties.allowBillboardRotation=true] - allow billboard rotation
   * @param {Function} [properties.getLocation] -
   * @param {Function} [properties.getDescription] -
   * @param {Function} [properties.getOrientation] -
   * @param {Function} [properties.getIcon] -
   * @param {Function} [properties.getIconColor] -
   * @param {Function} [properties.getIconScale] -
   * @param {Function} [properties.getLabel] -
   * @param {Function} [properties.getLabelColor] -
   * @param {Function} [properties.getLabelSize] -
   * @param {Function} [properties.getZindex] - z-ordering of markers
   * @param {Function} [properties.getMarkerId] - map an id to a unique marker
   * @param {Number} [properties.zoomLevel=15] - Set the default zoom level
   * @param {Boolean} [properties.defaultToTerrainElevation=false] - Set the default to terrain elevation
   *
   */
  function PointMarkerLayer(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, PointMarkerLayer);
    _this = _super.call(this, properties);
    _this.type = 'marker';
    return _this;
  }

  // call by super class
  (0,createClass/* default */.Z)(PointMarkerLayer, [{
    key: "init",
    value: function init() {
      var _this2 = this;
      var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.properties;
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(PointMarkerLayer.prototype), "init", this).call(this, properties);
      var props = {
        markerId: function markerId() {
          return _this2.getId();
        },
        location: null,
        orientation: {
          heading: 0
        },
        icon: null,
        iconAnchor: [16, 16],
        iconSize: [16, 16],
        iconScale: 1.0,
        iconColor: undefined,
        iconOpacity: 0.75,
        label: null,
        labelColor: undefined,
        labelOutlineColor: undefined,
        labelBackgroundColor: undefined,
        labelSize: 16,
        labelScale: 1.0,
        labelOffset: [0, 0],
        zoomLevel: 15,
        defaultToTerrainElevation: false,
        zIndex: 0,
        allowBillboardRotation: true,
        options: {}
      };
      if (isDefined(properties.defaultToTerrainElevation)) {
        props.defaultToTerrainElevation = properties.defaultToTerrainElevation;
      }
      if (hasValue(properties.location)) {
        assertObject(properties.location, "location");
        props.location = properties.location;
      }
      if (hasValue(properties.orientation)) {
        assertObject(properties.orientation, "orientation");
        props.orientation = properties.orientation;
      }
      if (hasValue(properties.icon)) {
        assertString(properties.icon, "icon");
        props.icon = properties.icon;
      }
      if (hasValue(properties.iconAnchor)) {
        assertArray(properties.iconAnchor, "iconAnchor");
        props.iconAnchor = properties.iconAnchor;
      }
      if (hasValue(properties.iconSize)) {
        assertArray(properties.iconSize, "iconSize");
        props.iconSize = properties.iconSize;
      }
      if (hasValue(properties.iconScale)) {
        assertPositive(properties.iconScale, "iconScale");
        props.iconScale = properties.iconScale;
      }
      if (hasValue(properties.iconColor)) {
        assertString(properties.iconColor, "iconColor");
        props.iconColor = properties.iconColor;
      }
      if (hasValue(properties.iconOpacity)) {
        assertString(properties.iconOpacity, "iconOpacity");
        props.iconOpacity = properties.iconOpacity;
      }
      if (hasValue(properties.label)) {
        assertString(properties.label, "label");
        props.label = properties.label;
      }
      if (hasValue(properties.labelColor)) {
        assertString(properties.labelColor, "labelColor");
        props.labelColor = properties.labelColor;
      }
      if (hasValue(properties.labelOutlineColor)) {
        assertString(properties.labelOutlineColor, "labelOutlineColor");
        props.labelOutlineColor = properties.labelOutlineColor;
      }
      if (hasValue(properties.labelBackgroundColor)) {
        assertString(properties.labelBackgroundColor, "labelBackgroundColor");
        props.labelBackgroundColor = properties.labelBackgroundColor;
      }
      if (hasValue(properties.labelSize)) {
        assertPositive(properties.labelSize, "labelSize");
        props.labelSize = properties.labelSize;
      }
      if (hasValue(properties.labelScale)) {
        assertPositive(properties.labelScale, "labelScale");
        props.labelScale = properties.labelScale;
      }
      if (hasValue(properties.labelOffset)) {
        assertArray(properties.labelOffset, "labelOffset");
        props.labelOffset = properties.labelOffset;
      }
      if (hasValue(properties.zoomLevel)) {
        assertPositive(properties.zoomLevel, "zoomLevel");
        props.zoomLevel = properties.zoomLevel;
      }
      if (hasValue(properties.zIndex)) {
        assertNumber(properties.zIndex, "zIndex");
        props.zIndex = properties.zIndex;
      }
      if (hasValue(properties.allowBillboardRotation)) {
        assertBoolean(properties.allowBillboardRotation, "allowBillboardRotation");
        props.allowBillboardRotation = properties.allowBillboardRotation;
      }
      this.definedId('markerId', props);
      if (this.checkFn("getLocation")) {
        var fn = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = _this2;
                  _context.next = 3;
                  return _this2.getFunc('getLocation')(rec, timestamp, options);
                case 3:
                  _context.t1 = _context.sent;
                  _context.t0.updateProperty.call(_context.t0, 'location', _context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function fn(_x, _x2, _x3) {
            return _ref.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getLocation'), fn);
      }
      if (this.checkFn("getOrientation")) {
        var _fn = /*#__PURE__*/function () {
          var _ref2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.t0 = _this2;
                  _context2.next = 3;
                  return _this2.getFunc('getOrientation')(rec, timestamp, options);
                case 3:
                  _context2.t1 = _context2.sent;
                  _context2.t0.updateProperty.call(_context2.t0, 'orientation', _context2.t1);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          return function _fn(_x4, _x5, _x6) {
            return _ref2.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getOrientation'), _fn);
      }
      if (this.checkFn("getIcon")) {
        var _fn2 = /*#__PURE__*/function () {
          var _ref3 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  _context3.t0 = _this2;
                  _context3.next = 3;
                  return _this2.getFunc('getIcon')(rec, timestamp, options);
                case 3:
                  _context3.t1 = _context3.sent;
                  _context3.t0.updateProperty.call(_context3.t0, 'icon', _context3.t1);
                case 5:
                case "end":
                  return _context3.stop();
              }
            }, _callee3);
          }));
          return function _fn2(_x7, _x8, _x9) {
            return _ref3.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getIcon'), _fn2);
      }
      if (this.checkFn("getIconColor")) {
        var _fn3 = /*#__PURE__*/function () {
          var _ref4 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  _context4.t0 = _this2;
                  _context4.next = 3;
                  return _this2.getFunc('getIconColor')(rec, timestamp, options);
                case 3:
                  _context4.t1 = _context4.sent;
                  _context4.t0.updateProperty.call(_context4.t0, 'iconColor', _context4.t1);
                case 5:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          }));
          return function _fn3(_x10, _x11, _x12) {
            return _ref4.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getIconColor'), _fn3);
      }
      if (this.checkFn("getIconScale")) {
        var _fn4 = /*#__PURE__*/function () {
          var _ref5 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  _context5.t0 = _this2;
                  _context5.next = 3;
                  return _this2.getFunc('getIconScale')(rec, timestamp, options);
                case 3:
                  _context5.t1 = _context5.sent;
                  _context5.t0.updateProperty.call(_context5.t0, 'iconScale', _context5.t1);
                case 5:
                case "end":
                  return _context5.stop();
              }
            }, _callee5);
          }));
          return function _fn4(_x13, _x14, _x15) {
            return _ref5.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getIconScale'), _fn4);
      }
      if (this.checkFn("getLabel")) {
        var _fn5 = /*#__PURE__*/function () {
          var _ref6 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
              while (1) switch (_context6.prev = _context6.next) {
                case 0:
                  _context6.t0 = _this2;
                  _context6.next = 3;
                  return _this2.getFunc('getLabel')(rec, timestamp, options);
                case 3:
                  _context6.t1 = _context6.sent;
                  _context6.t0.updateProperty.call(_context6.t0, 'label', _context6.t1);
                case 5:
                case "end":
                  return _context6.stop();
              }
            }, _callee6);
          }));
          return function _fn5(_x16, _x17, _x18) {
            return _ref6.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getLabel'), _fn5);
      }
      if (this.checkFn("getLabelColor")) {
        var _fn6 = /*#__PURE__*/function () {
          var _ref7 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  _context7.t0 = _this2;
                  _context7.next = 3;
                  return _this2.getFunc('getLabelColor')(rec, timestamp, options);
                case 3:
                  _context7.t1 = _context7.sent;
                  _context7.t0.updateProperty.call(_context7.t0, 'labelColor', _context7.t1);
                case 5:
                case "end":
                  return _context7.stop();
              }
            }, _callee7);
          }));
          return function _fn6(_x19, _x20, _x21) {
            return _ref7.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getLabelColor'), _fn6);
      }
      if (this.checkFn("getLabelSize")) {
        var _fn7 = /*#__PURE__*/function () {
          var _ref8 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
              while (1) switch (_context8.prev = _context8.next) {
                case 0:
                  _context8.t0 = _this2;
                  _context8.next = 3;
                  return _this2.getFunc('getLabelSize')(rec, timestamp, options);
                case 3:
                  _context8.t1 = _context8.sent;
                  _context8.t0.updateProperty.call(_context8.t0, 'labelSize', _context8.t1);
                case 5:
                case "end":
                  return _context8.stop();
              }
            }, _callee8);
          }));
          return function _fn7(_x22, _x23, _x24) {
            return _ref8.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getLabelSize'), _fn7);
      }
      if (this.checkFn("getZindex")) {
        var _fn8 = /*#__PURE__*/function () {
          var _ref9 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
              while (1) switch (_context9.prev = _context9.next) {
                case 0:
                  _context9.t0 = _this2;
                  _context9.next = 3;
                  return _this2.getFunc('getZindex')(rec, timestamp, options);
                case 3:
                  _context9.t1 = _context9.sent;
                  _context9.t0.updateProperty.call(_context9.t0, 'zIndex', _context9.t1);
                case 5:
                case "end":
                  return _context9.stop();
              }
            }, _callee9);
          }));
          return function _fn8(_x25, _x26, _x27) {
            return _ref9.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getZindex'), _fn8);
      }
    }
  }]);
  return PointMarkerLayer;
}(layer_Layer);
/* harmony default export */ var layer_PointMarkerLayer = (PointMarkerLayer);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.fill.js
var es_array_fill = __webpack_require__(43290);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/layer/CurveLayer.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * @extends Layer
 */
var CurveLayer = /*#__PURE__*/function (_Layer) {
  (0,inherits/* default */.Z)(CurveLayer, _Layer);
  var _super = (0,createSuper/* default */.Z)(CurveLayer);
  /**
   * Create the CurveLayer
   * @param {Object} properties -
   * @param {String} [properties.xLabel=""] -
   * @param {String} [properties.yLabel=""] -
   * @param {String} [properties.lineColor="#000000"] - color in hex or rgba value
   * @param {String} [properties.backgroundColor="#000000"] - color in hex or rgba value
   * @param {String} [properties.fill=false] -
   * @param {Number} [properties.maxValues=10] - Defines the max values hold by the layer
   * @param {Number} [properties.stroke=1] -
   * @param {Number} [properties.x=0] -
   * @param {Number} [properties.y=[]] -
   * @param {Number} [properties.maxValues=10] - The maximum values to display
   * @param {Function} properties.getStroke -
   * @param {Function} properties.getLineColor -
   * @param {Function} properties.getValues -
   *
   */
  function CurveLayer(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, CurveLayer);
    _this = _super.call(this, properties);
    _this.type = 'curve';
    return _this;
  }
  // call by super class
  (0,createClass/* default */.Z)(CurveLayer, [{
    key: "init",
    value: function init() {
      var _this2 = this;
      var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.properties;
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(CurveLayer.prototype), "init", this).call(this, properties);
      var props = {
        xLabel: "",
        yLabel: "",
        lineColor: "#399ca5",
        backgroundColor: "#399ca5",
        fill: false,
        stroke: 1,
        curveId: randomUUID(),
        x: 0,
        y: 0,
        maxValues: 10
      };
      if (isDefined(properties.yLabel)) {
        props.yLabel = properties.yLabel;
      }
      if (isDefined(properties.stroke)) {
        props.stroke = properties.stroke;
      }
      if (isDefined(properties.maxValues)) {
        props.maxValues = properties.maxValues;
      }
      if (isDefined(properties.lineColor)) {
        props.lineColor = properties.lineColor;
      }
      if (isDefined(properties.backgroundColor)) {
        props.backgroundColor = properties.backgroundColor;
      }
      if (isDefined(properties.fill)) {
        props.fill = properties.fill;
      }
      if (isDefined(properties.x)) {
        props.x = properties.x;
      }
      if (isDefined(properties.y)) {
        props.y = properties.y;
      }
      this.definedId('curveId', props);
      if (isDefined(properties.getStroke)) {
        var fn = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = _this2;
                  _context.next = 3;
                  return _this2.getFunc('getStroke')(rec, timestamp, options);
                case 3:
                  _context.t1 = _context.sent;
                  _context.t0.updateProperty.call(_context.t0, 'stroke', _context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function fn(_x, _x2, _x3) {
            return _ref.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getStroke'), fn);
      }
      if (isDefined(properties.getLineColor)) {
        var _fn = /*#__PURE__*/function () {
          var _ref2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.t0 = _this2;
                  _context2.next = 3;
                  return _this2.getFunc('getLineColor')(rec, timestamp, options);
                case 3:
                  _context2.t1 = _context2.sent;
                  _context2.t0.updateProperty.call(_context2.t0, 'lineColor', _context2.t1);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          return function _fn(_x4, _x5, _x6) {
            return _ref2.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getLineColor'), _fn);
      }
      if (isDefined(properties.getBackgroundColor)) {
        var _fn2 = /*#__PURE__*/function () {
          var _ref3 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  _context3.t0 = _this2;
                  _context3.next = 3;
                  return _this2.getFunc('getBackgroundColor')(rec, timestamp, options);
                case 3:
                  _context3.t1 = _context3.sent;
                  _context3.t0.updateProperty.call(_context3.t0, 'backgroundColor', _context3.t1);
                case 5:
                case "end":
                  return _context3.stop();
              }
            }, _callee3);
          }));
          return function _fn2(_x7, _x8, _x9) {
            return _ref3.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getLineColor'), _fn2);
      }
      if (isDefined(properties.getValues)) {
        var _fn3 = /*#__PURE__*/function () {
          var _ref4 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(rec, timestamp, options) {
            var value;
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  _context4.next = 2;
                  return _this2.getFunc('getValues')(rec, timestamp, options);
                case 2:
                  value = _context4.sent;
                  _this2.updateProperty('x', value.x);
                  _this2.updateProperty('y', value.y);
                case 5:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          }));
          return function _fn3(_x10, _x11, _x12) {
            return _ref4.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getValues'), _fn3);
      }
    }
  }]);
  return CurveLayer;
}(layer_Layer);
/* harmony default export */ var layer_CurveLayer = (CurveLayer);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.freeze.js
var es_object_freeze = __webpack_require__(43371);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/layer/FrustumLayer.js












/**
 * Enumeration of the ways that the frustum's position and orientation can be
 * specified.
 */
var FrustumPositionMode = Object.freeze({
  /**
   * Constant indicating that the position provided to the frustum layer is
   * in the form of a latitude (in degrees), longitude (in degrees), and
   * altitude above ellipsoid (in meters). This also indicates that platform
   * orientation is provided as heading, pitch, and roll, in degrees; and
   * sensor orientation is provided as yaw, pitch, and roll, in degrees.
   */
  LONLATALT_WITH_EULER_ANGLES: 1,
  /**
   * Constant indicating that the position provided to the frustum layer is
   * in the form of ECEF 3-D coordinates (in meters). This also indicates that
   * the platform and sensor orientations are provided as 3x3 rotation
   * matrices.
   */
  ECEF_WITH_MATRICES: 2,
  /**
   * Constant indicating that the position provided to the frustum layer is
   * in the form of ECEF 3-D coordinates (in meters). This also indicates that
   * the platform and sensor orientations are provided as quaternions.
   */
  ECEF_WITH_QUATERNIONS: 3
});
var frustumLayer = /*#__PURE__*/function (_Layer) {
  (0,inherits/* default */.Z)(frustumLayer, _Layer);
  var _super = (0,createSuper/* default */.Z)(frustumLayer);
  /**
   */
  function frustumLayer(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, frustumLayer);
    _this = _super.call(this, properties);
    _this.type = 'frustum';
    return _this;
  }
  // call by super class
  (0,createClass/* default */.Z)(frustumLayer, [{
    key: "init",
    value: function init() {
      var _this2 = this;
      var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.properties;
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(frustumLayer.prototype), "init", this).call(this, properties);
      var props = {
        color: 'rgb(255,0,0)',
        opacity: 0.5,
        origin: null,
        fov: null,
        near: 0.009,
        range: null,
        platformOrientation: {
          heading: 0.0,
          pitch: 0.0,
          roll: 0.0
        },
        sensorOrientation: {
          yaw: 0.0,
          pitch: 0.0,
          roll: 0.0
        },
        positionMode: FrustumPositionMode.LONLATALT_WITH_EULER_ANGLES,
        aspectRatio: 4 / 3
      };
      if (isDefined(properties.color)) {
        props.color = properties.color;
      }
      if (isDefined(properties.opacity)) {
        props.opacity = properties.opacity;
      }
      if (isDefined(properties.near)) {
        props.near = properties.near;
      }
      if (isDefined(properties.range)) {
        props.range = properties.range;
      }
      if (isDefined(properties.fov)) {
        props.fov = properties.fov;
      }
      if (isDefined(properties.positionMode)) {
        props.positionMode = properties.positionMode;
      }
      if (isDefined(properties.aspectRatio)) {
        props.aspectRatio = properties.aspectRatio;
      }
      this.definedId('frustumId', props);
      if (isDefined(properties.getColor)) {
        var fn = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = _this2;
                  _context.next = 3;
                  return _this2.getFunc('getColor')(rec, timestamp, options);
                case 3:
                  _context.t1 = _context.sent;
                  _context.t0.updateProperty.call(_context.t0, 'color', _context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function fn(_x, _x2, _x3) {
            return _ref.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getColor'), fn);
      }
      if (isDefined(properties.getOrigin)) {
        var _fn = /*#__PURE__*/function () {
          var _ref2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.t0 = _this2;
                  _context2.next = 3;
                  return _this2.getFunc('getOrigin')(rec, timestamp, options);
                case 3:
                  _context2.t1 = _context2.sent;
                  _context2.t0.updateProperty.call(_context2.t0, 'origin', _context2.t1);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          return function _fn(_x4, _x5, _x6) {
            return _ref2.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getOrigin'), _fn);
      }
      if (isDefined(properties.getFov)) {
        var _fn2 = /*#__PURE__*/function () {
          var _ref3 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  _context3.t0 = _this2;
                  _context3.next = 3;
                  return _this2.getFunc('getFov')(rec, timestamp, options);
                case 3:
                  _context3.t1 = _context3.sent;
                  _context3.t0.updateProperty.call(_context3.t0, 'fov', _context3.t1);
                case 5:
                case "end":
                  return _context3.stop();
              }
            }, _callee3);
          }));
          return function _fn2(_x7, _x8, _x9) {
            return _ref3.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getFov'), _fn2);
      }
      if (isDefined(properties.getRange)) {
        var _fn3 = /*#__PURE__*/function () {
          var _ref4 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  _context4.t0 = _this2;
                  _context4.next = 3;
                  return _this2.getFunc('getRange')(rec, timestamp, options);
                case 3:
                  _context4.t1 = _context4.sent;
                  _context4.t0.updateProperty.call(_context4.t0, 'range', _context4.t1);
                case 5:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          }));
          return function _fn3(_x10, _x11, _x12) {
            return _ref4.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getRange'), _fn3);
      }
      if (isDefined(properties.getPlatformOrientation)) {
        var _fn4 = /*#__PURE__*/function () {
          var _ref5 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  _context5.t0 = _this2;
                  _context5.next = 3;
                  return _this2.getFunc('getPlatformOrientation')(rec, timestamp, options);
                case 3:
                  _context5.t1 = _context5.sent;
                  _context5.t0.updateProperty.call(_context5.t0, 'platformOrientation', _context5.t1);
                case 5:
                case "end":
                  return _context5.stop();
              }
            }, _callee5);
          }));
          return function _fn4(_x13, _x14, _x15) {
            return _ref5.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getPlatformOrientation'), _fn4);
      }
      if (isDefined(properties.getSensorOrientation)) {
        var _fn5 = /*#__PURE__*/function () {
          var _ref6 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
              while (1) switch (_context6.prev = _context6.next) {
                case 0:
                  _context6.t0 = _this2;
                  _context6.next = 3;
                  return _this2.getFunc('getSensorOrientation')(rec, timestamp, options);
                case 3:
                  _context6.t1 = _context6.sent;
                  _context6.t0.updateProperty.call(_context6.t0, 'sensorOrientation', _context6.t1);
                case 5:
                case "end":
                  return _context6.stop();
              }
            }, _callee6);
          }));
          return function _fn5(_x16, _x17, _x18) {
            return _ref6.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getSensorOrientation'), _fn5);
      }
      if (isDefined(properties.getAspectRatio)) {
        var _fn6 = /*#__PURE__*/function () {
          var _ref7 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  _context7.t0 = _this2;
                  _context7.next = 3;
                  return _this2.getFunc('getAspectRatio')(rec, timestamp, options);
                case 3:
                  _context7.t1 = _context7.sent;
                  _context7.t0.updateProperty.call(_context7.t0, 'aspectRatio', _context7.t1);
                case 5:
                case "end":
                  return _context7.stop();
              }
            }, _callee7);
          }));
          return function _fn6(_x19, _x20, _x21) {
            return _ref7.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getAspectRatio'), _fn6);
      }
    }
  }]);
  return frustumLayer;
}(layer_Layer);
/* harmony default export */ var FrustumLayer = (frustumLayer);

;// CONCATENATED MODULE: ../../osh-js/source/core/ui/layer/BinaryDataLayer.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * @extends Layer
 * @example
 *
 * import BinaryDataLayer from 'osh-js/core/ui/layer/BinaryDataLayer';
 *
 */
var BinaryDataLayer = /*#__PURE__*/function (_Layer) {
  (0,inherits/* default */.Z)(BinaryDataLayer, _Layer);
  var _super = (0,createSuper/* default */.Z)(BinaryDataLayer);
  function BinaryDataLayer(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, BinaryDataLayer);
    _this = _super.call(this, properties);
    _this.type = 'binaryData';
    return _this;
  }
  // call by super class
  (0,createClass/* default */.Z)(BinaryDataLayer, [{
    key: "init",
    value: function init() {
      var _this2 = this;
      var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.properties;
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(BinaryDataLayer.prototype), "init", this).call(this, properties);
      var props = {
        frameData: undefined
      };
      if (isDefined(properties.frameData)) {
        this.props.frameData = properties.frameData;
      }
      this.definedId('dataId', props);
      if (isDefined(properties.getFrameData)) {
        var fn = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = _this2;
                  _context.next = 3;
                  return _this2.getFunc('getFrameData')(rec, timestamp, options);
                case 3:
                  _context.t1 = _context.sent;
                  _context.t0.updateProperty.call(_context.t0, 'frameData', _context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function fn(_x, _x2, _x3) {
            return _ref.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getFrameData'), fn);
      }
    }
  }]);
  return BinaryDataLayer;
}(layer_Layer);
/* harmony default export */ var layer_BinaryDataLayer = (BinaryDataLayer);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/layer/VideoDataLayer.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * @extends BinaryDataLayer
 * @example
 *
 * import VideoDataLayer from 'osh-js/core/ui/layer/VideoDataLayer';
 *
 */
var VideoDataLayer = /*#__PURE__*/function (_BinaryDataLayer) {
  (0,inherits/* default */.Z)(VideoDataLayer, _BinaryDataLayer);
  var _super = (0,createSuper/* default */.Z)(VideoDataLayer);
  function VideoDataLayer(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, VideoDataLayer);
    _this = _super.call(this, properties);
    _this.type = 'videoData';
    return _this;
  }
  // call by super class
  (0,createClass/* default */.Z)(VideoDataLayer, [{
    key: "init",
    value: function init() {
      var _this2 = this;
      var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.properties;
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(VideoDataLayer.prototype), "init", this).call(this, properties);
      var props = {
        roll: 0
      };
      if (isDefined(properties.roll)) {
        props.roll = properties.roll;
      }
      this.definedId('videoDataId', props);
      if (isDefined(properties.getRoll)) {
        var fn = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = _this2;
                  _context.next = 3;
                  return _this2.getFunc('getRoll')(rec, timestamp, options);
                case 3:
                  _context.t1 = _context.sent;
                  _context.t0.updateProperty.call(_context.t0, 'roll', _context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function fn(_x, _x2, _x3) {
            return _ref.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getRoll'), fn);
      }
    }
  }]);
  return VideoDataLayer;
}(layer_BinaryDataLayer);
/* harmony default export */ var layer_VideoDataLayer = (VideoDataLayer);
// EXTERNAL MODULE: ./node_modules/leaflet/dist/leaflet-src.js
var leaflet_src = __webpack_require__(45243);
var leaflet_src_default = /*#__PURE__*/__webpack_require__.n(leaflet_src);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var web_dom_collections_for_each = __webpack_require__(54747);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
var es_array_includes = __webpack_require__(26699);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js
var es_string_includes = __webpack_require__(32023);
;// CONCATENATED MODULE: ../../osh-js/source/core/connector/Status.js
/**
 * Enum for connection status.
 * @readonly
 * @enum {{name: string}}
 */
var Status = {
  CONNECTING: "connecting",
  CONNECTED: "connected",
  DISCONNECTED: "disconnected",
  FETCH_STARTED: 'fetch-start',
  FETCH_ENDED: 'fetch-end',
  CLOSED: "closed",
  CLOSED_ERROR: "closed-error"
};
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/View.js












/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/

/**
 * The abstract object to represent a view.
 */





var View = /*#__PURE__*/function () {
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {string} properties.container - The div element to attach to
   * @param {boolean} [properties.destroyAfterMutation=true]  - call view destroy() function after detecting div root Mutation
   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces
   * @param {string[]} properties.supportedLayers - List the supported layers of this View. It is corresponding to the the 'type' Layer property
   * @param {boolean} properties.visible - set the default behavior of the visibility of the view
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   */
  function View(properties) {
    (0,classCallCheck/* default */.Z)(this, View);
    // list of layers
    this.layers = [];
    this.lastRec = {};
    this.dataSources = [];
    this.broadcastChannels = [];

    //this.divId = divId;
    this.id = "view-" + randomUUID();
    this.css = "";
    if (isDefined(properties) && isDefined(properties.css)) {
      this.css = properties.css;
    }
    assertDefined(properties && properties.supportedLayers, 'supportedLayers');
    assertArray(properties.supportedLayers, 'supportedLayers');
    assertTrue(properties.supportedLayers.length > 0, 'supportedLayers.length === 0');
    this.supportedLayers = properties.supportedLayers;

    // inits the view before adding the viewItem
    this.init(properties);
  }

  /**
   * Inits the view component.
   * @private
   */
  (0,createClass/* default */.Z)(View, [{
    key: "init",
    value: function init(properties) {
      this.properties = properties;
      this.elementDiv = document.createElement("div");
      this.elementDiv.setAttribute("id", this.id);
      this.elementDiv.setAttribute("class", this.css + " osh-view");
      this.divId = this.id;
      var parentDivId = isDefined(properties.container) ? properties.container : document.body;
      var destroyAfterMutation = isDefined(properties.destroyAfterMutation) ? properties.destroyAfterMutation : true;
      var div = document.getElementById(parentDivId);
      if (!isDefined(div) || div === null) {
        document.body.appendChild(this.elementDiv);
        this.hide();
        this.container = document.body;
      } else {
        div.appendChild(this.elementDiv);
        this.container = div;
      }
      this.beforeAddingItems(properties);
      if (isDefined(properties)) {
        if (isDefined(properties.layers)) {
          for (var i = 0; i < properties.layers.length; i++) {
            this.addLayer(properties.layers[i]);
          }
        }
        if (isDefined(properties.visible)) {
          document.getElementById(this.divId).style.display = properties.visible ? "block" : "none";
        }
      }
      var that = this;
      // observes the event associated to the dataSourceId

      var observer = new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
          // Was it the style attribute that changed? (Maybe a classname or other attribute change could do this too?
          // You might want to remove the attribute condition) Is display set to 'none'?
          if (mutation.attributeName === 'style') {
            that.onResize();
          }
        });
      });
      // Attach the mutation observer to blocker, and only when attribute values change
      observer.observe(this.elementDiv, {
        attributes: true
      });
      if (destroyAfterMutation) {
        var rootObserver = new MutationObserver(function (mutations) {
          // try to get the div element by the id to check if it is still owned by the document object
          if (!isDefined(document.getElementById(that.divId))) {
            this.disconnect();
            that.destroy();
          }
        });
        rootObserver.observe(document.body, {
          childList: true
        });
      }
    }

    /**
     * Hide the view
     */
  }, {
    key: "hide",
    value: function hide() {
      this.elementDiv.style.display = "none";
    }

    /**
     * Callback called when the view is resized
     * @event
     */
  }, {
    key: "onResize",
    value: function onResize() {}

    /**
     * Attach the view to a specific div. If the view has already been attached to a div, it will be removed
     * from its current parent and will be attached to new one.
     * Note: the onResize() is called at the end of the process.
     * @param {String} divId - The div element to attach to
     */
  }, {
    key: "attachTo",
    value: function attachTo(divId) {
      if (isDefined(this.elementDiv.parentNode)) {
        // detach from its parent
        this.elementDiv.parentNode.removeChild(this.elementDiv);
      }
      document.getElementById(divId).appendChild(this.elementDiv);
      if (this.elementDiv.style.display === "none") {
        this.elementDiv.style.display = "block";
      }
      this.onResize();
    }

    /**
     * This method is called before attaching any view items passed as arguments in the constructor of the view.
     * @event
     * @param {Object} options - A generic object to use
     */
  }, {
    key: "beforeAddingItems",
    value: function beforeAddingItems(options) {}

    /**
     * Gets the inner id of the view object.
     * @return {String} The id of the view
     */
  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }

    /**
     * Gets the div id of the DOM element.
     * @return {String} The div id of the view
     */
  }, {
    key: "getDivId",
    value: function getDivId() {
      return this.divId;
    }

    /**
     * Set the data to the view. Each view has to handle the kind of the data separately.
     * @param {String} dataSourceId - The dataSource id of the source providing the data
     * @param {any[]} data - The data array to set
     */
  }, {
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSourceId, data) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function setData(_x, _x2) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
    /**
     * Show the view.
     * @param  {Object} properties - A generic object
     */
  }, {
    key: "show",
    value: function show(properties) {}
  }, {
    key: "destroy",
    value: function destroy() {
      this.removeAllFromLayers();
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.broadcastChannels),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var bc = _step.value;
          bc.close();
          console.log("closing BC..");
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      this.broadcastChannels = [];
      // remove DOM element
      // this.elementDiv?.remove(); // does not compile with older webpack version ..
      if (isDefined(this.elementDiv)) {
        this.elementDiv.remove();
      }
    }
    /**
     * Adds a layer to the view. A broadcastChannel is going to listen the new dataSources
     * @param {Layer} layer - The layer object
     */
  }, {
    key: "addLayer",
    value: function addLayer(layer) {
      var _this = this;
      assertTrue(this.supportedLayers.includes(layer.type), 'this layer is not supported: ' + layer.type + ', should be ' + this.supportedLayers);
      this.layers.push(layer);
      var ds = layer.getDataSourcesIds();
      var _loop = function _loop() {
        var dataSourceId = ds[i];
        // this.setData(dataSourceId, [layer.getProps()]);
        // observes the data come in
        var self = _this;
        var broadcastChannel = new BroadcastChannel(DATASOURCE_DATA_TOPIC + dataSourceId);
        broadcastChannel.onmessage = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(event) {
            var that;
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  if (!(event.data.type === EventType.STATUS && event.data.status === Status.CLOSED_ERROR)) {
                    _context2.next = 4;
                    break;
                  }
                  self.reset();
                  _context2.next = 11;
                  break;
                case 4:
                  if (!(event.data.type === EventType.DATA)) {
                    _context2.next = 11;
                    break;
                  }
                  that = _this; // transform the data
                  _context2.next = 8;
                  return layer.setData(dataSourceId, event.data.values);
                case 8:
                  _context2.next = 10;
                  return that.setData(dataSourceId, layer.getProps());
                case 10:
                  // store as last record
                  self.lastRec[dataSourceId] = event.data;
                case 11:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          return function (_x3) {
            return _ref.apply(this, arguments);
          };
        }();
        var timeBroadcastChannel = new BroadcastChannel(DATASOURCE_TIME_TOPIC + dataSourceId);
        timeBroadcastChannel.onmessage = function (event) {
          // skip data reset events for now
          if (event.data.type === EventType.TIME_CHANGED) {
            self.reset(); // on time changed
          }
        };

        _this.broadcastChannels.push(broadcastChannel);
        _this.broadcastChannels.push(timeBroadcastChannel);
      };
      for (var i = 0; i < ds.length; i++) {
        _loop();
      }
    }

    /**
     * Removes a Layer from the view.
     * @param {Layer} layer - The layer object
     */
  }, {
    key: "removeAllFromLayer",
    value: function removeAllFromLayer(layer) {
      if (this.layers.includes(layer)) {
        // 1) remove from STYLER fn
        for (var ds in layer.dataSourcesToFn) {
          delete this.lastRec[ds];
        }
        layer.reset();
      }
    }

    /**
     * Removes all view item from the view.
     */
  }, {
    key: "removeAllFromLayers",
    value: function removeAllFromLayers() {
      var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(this.layers),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var layer = _step2.value;
          this.removeAllFromLayer(layer);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }

    /**
     * Gets the list of the dataSource ids contained into the view.
     * @return {String[]} The list of dataSource ids
     */
  }, {
    key: "getDataSourcesId",
    value: function getDataSourcesId() {
      var res = [];

      // check for layers
      for (var i = 0; i < this.layers.length; i++) {
        var layer = this.layers[i];
        res = res.concat(layer.getDataSourcesIds());
      }
      return res;
    }

    /**
     * Calls for resetting the view.
     */
  }, {
    key: "reset",
    value: function reset() {
      this.removeAllFromLayers();
    }
  }]);
  return View;
}();
/* harmony default export */ var view_View = (View);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/MapView.js












/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * This class is an abstract class in charge of handling common Map operations.
 * @extends View
 */
var MapView = /*#__PURE__*/function (_View) {
  (0,inherits/* default */.Z)(MapView, _View);
  var _super = (0,createSuper/* default */.Z)(MapView);
  function MapView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, MapView);
    _this = _super.call(this, properties);

    // map Layer id to array of corresponding markers
    _this.layerIdToMarkers = {};

    // map Layer id to array of corresponding polylines
    _this.layerIdToPolylines = {};

    // map Layer id to array of corresponding polylines
    _this.layerIdToEllipsoids = {};

    // map Layer id to array of corresponding polygons
    _this.layerIdToPolygon = {};

    // map Layer id to array of corresponding frustums
    _this.layerIdToFrustum = {};

    // map Layer id to array of corresponding draping
    _this.layerIdToDrapedImage = {};
    return _this;
  }
  (0,createClass/* default */.Z)(MapView, [{
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSourceId, data) {
        var values, i, d;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              values = data.values;
              for (i = 0; i < values.length; i++) {
                d = values[i];
                if (data.type === 'marker') {
                  this.updateMarker(d);
                } else if (data.type === 'polyline') {
                  this.updatePolyline(d);
                } else if (data.type === 'drapedImage') {
                  this.updateDrapedImage(d);
                } else if (data.type === 'ellipse') {
                  this.updateEllipse(d);
                } else if (data.type === 'polygon') {
                  this.updatePolygon(d);
                } else if (data.type === 'coplanarPolygon') {
                  this.updateCoPlanarPolygon(d);
                } else if (data.type === 'frustum') {
                  this.updateFrustum(d);
                }
              }
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setData(_x, _x2) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
  }, {
    key: "addPolygonToLayer",
    value: function () {
      var _addPolygonToLayer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props, polygon) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this.layerIdToPolygon[props.polygonId] = polygon;
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function addPolygonToLayer(_x3, _x4) {
        return _addPolygonToLayer.apply(this, arguments);
      }
      return addPolygonToLayer;
    }()
    /**
     * Associate a markerId to a Layer for a fast lookup
     * @protected
     * @param {PointMarkerLayer.props} layer - the Layer object
     * @param {Object} markerObject - the Map marker object
     */
  }, {
    key: "addMarkerToLayer",
    value: function () {
      var _addMarkerToLayer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(props, markerObject) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              this.layerIdToMarkers[props.markerId] = markerObject;
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function addMarkerToLayer(_x5, _x6) {
        return _addMarkerToLayer.apply(this, arguments);
      }
      return addMarkerToLayer;
    }()
    /**
     * Associate a polylineId to a Layer for a fast lookup
     * @protected
     * @param {Polyline.props} layer - the Layer object
     * @param {Object} polylineObject - the Map polyline object
     */
  }, {
    key: "addPolylineToLayer",
    value: function () {
      var _addPolylineToLayer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(props, polylineObject) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              this.layerIdToPolylines[props.polylineId] = polylineObject;
            case 1:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function addPolylineToLayer(_x7, _x8) {
        return _addPolylineToLayer.apply(this, arguments);
      }
      return addPolylineToLayer;
    }()
    /**
     * Associate a ellipseId to a Layer for a fast lookup
     * @protected
     * @param {Ellipse.props} layer - the Layer object
     * @param {Object} ellipseObject - the Map ellipse object
     */
  }, {
    key: "addEllipseToLayer",
    value: function () {
      var _addEllipseToLayer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(props, ellipseObject) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              this.layerIdToEllipsoids[props.ellipseId] = ellipseObject;
            case 1:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function addEllipseToLayer(_x9, _x10) {
        return _addEllipseToLayer.apply(this, arguments);
      }
      return addEllipseToLayer;
    }()
    /**
     * Associate a drapedImageId to a Layer for a fast lookup
     * @protected
     * @param {ImageDraping.props} layer - the Layer object
     * @param {Object} drapedImageObject - the Map drapedImage object
     */
  }, {
    key: "addDrapedImageToLayer",
    value: function () {
      var _addDrapedImageToLayer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(props, drapedImageObject) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              this.layerIdToDrapedImage[props.drapedImageId] = drapedImageObject;
            case 1:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function addDrapedImageToLayer(_x11, _x12) {
        return _addDrapedImageToLayer.apply(this, arguments);
      }
      return addDrapedImageToLayer;
    }()
  }, {
    key: "addFrustumToLayer",
    value: function () {
      var _addFrustumToLayer = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7(props, frustum) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              this.layerIdToFrustum[props.frustumId] = frustum;
            case 1:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function addFrustumToLayer(_x13, _x14) {
        return _addFrustumToLayer.apply(this, arguments);
      }
      return addFrustumToLayer;
    }()
  }, {
    key: "getPolygons",
    value: function getPolygons() {
      var array = [];
      for (var id in this.layerIdToPolygon) {
        array.push(this.layerIdToPolygon[id]);
      }
      return array;
    }
  }, {
    key: "getPolygon",
    value: function getPolygon(props) {
      if (!(props.polygonId in this.layerIdToPolygon)) {
        return null;
      }
      return this.layerIdToPolygon[props.polygonId];
    }

    /**
     * Get the markerId associate to the Layer
     * @protected
     * @param {PointMarkerLayer.props} props - the Layer Object
     */
  }, {
    key: "getMarker",
    value: function getMarker(props) {
      if (!(props.markerId in this.layerIdToMarkers)) {
        return null;
      }
      return this.layerIdToMarkers[props.markerId];
    }

    /**
     * Get all markers contained in this view
     * @protected
     */
  }, {
    key: "getMarkers",
    value: function getMarkers() {
      var array = [];
      for (var id in this.layerIdToMarkers) {
        array.push(this.layerIdToMarkers[id]);
      }
      return array;
    }

    /**
     * Get all polylines contained in this view
     * @protected
     */
  }, {
    key: "getPolylines",
    value: function getPolylines() {
      var array = [];
      for (var id in this.layerIdToPolylines) {
        array.push(this.layerIdToPolylines[id]);
      }
      return array;
    }

    /**
     * Get all ellpsoids contained in this view
     * @protected
     */
  }, {
    key: "getEllipsoids",
    value: function getEllipsoids() {
      var array = [];
      for (var id in this.layerIdToEllipsoids) {
        array.push(this.layerIdToEllipsoids[id]);
      }
      return array;
    }

    /**
     * Get the ellipse associate to the Layer
     * @protected
     * @param {Ellipse.props} layer - the Layer Object
     */
  }, {
    key: "getPolyline",
    value:
    /**
     * Get the polyline associate to the Layer
     * @protected
     * @param {Polyline.props} layer - the Layer Object
     */
    function getPolyline(props) {
      if (!(props.polylineId in this.layerIdToPolylines)) {
        return null;
      }
      return this.layerIdToPolylines[props.polylineId];
    }

    /**
     * Get the draped image associate to the Layer
     * @protected
     * @param {ImageDrapingLayer.props} layer - the Layer Object
     */
  }, {
    key: "getEllipse",
    value:
    /**
     * Get the ellipse associate to the Layer
     * @protected
     * @param {Ellipse.props} layer - the Layer Object
     */
    function getEllipse(props) {
      if (!(props.ellipseId in this.layerIdToEllipsoids)) {
        return null;
      }
      return this.layerIdToEllipsoids[props.ellipseId];
    }
  }, {
    key: "getDrapedImage",
    value: function getDrapedImage(props) {
      if (!(props.drapedImageId in this.layerIdToDrapedImage)) {
        return null;
      }
      return this.layerIdToDrapedImage[props.drapedImageId];
    }
  }, {
    key: "getFrustums",
    value: function getFrustums() {
      var array = [];
      for (var id in this.layerIdToFrustum) {
        array.push(this.layerIdToFrustum[id]);
      }
      return array;
    }
  }, {
    key: "getFrustum",
    value: function getFrustum(props) {
      if (!(props.frustumId in this.layerIdToFrustum)) {
        return null;
      }
      return this.layerIdToFrustum[props.frustumId];
    }

    /**
     * Get the Layer associated to its id
     * @param {String} layerId - the id of the Layer
     * @return {Layer} - the corresponding layer, null otherwise
     */
  }, {
    key: "getLayer",
    value: function getLayer(layerId) {
      // find corresponding layer
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.layers),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var currentLayer = _step.value;
          if (currentLayer.props.id === layerId) {
            return currentLayer;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return null;
    }

    /**
     * Remove Corresponding Layer
     * @param {Layer} layer - The layer object
     */
  }, {
    key: "removeAllFromLayer",
    value: function removeAllFromLayer(layer) {
      // check for marker
      this.removeMarkers(layer);

      // check for polylines
      this.removePolylines(layer);
      this.removeEllipsoids(layer);
      this.removePolygons(layer);
      this.removeDrapedImages(layer);
      this.removeFrustums(layer);
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(MapView.prototype), "removeAllFromLayer", this).call(this, layer);
    }
  }, {
    key: "removePolygons",
    value: function removePolygons(layer) {
      var ids = layer.getIds() || [];
      var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(ids),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var id = _step2.value;
          var polygon = this.layerIdToPolygon[id];
          if (isDefined(polygon)) {
            this.removePolygonFromLayer(polygon);
          }

          // remove markers ids from Layer map
          delete this.layerIdToPolygon[id];
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }

    /**
     * Remove the markers corresponding to a PointMarker Layer
     * @param {PointMarkerLayer} layer - the layer to remove the markers from
     */
  }, {
    key: "removeMarkers",
    value: function removeMarkers(layer) {
      var ids = layer.getIds() || [];
      var _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(ids),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var id = _step3.value;
          var marker = this.layerIdToMarkers[id];
          if (isDefined(marker)) {
            this.removeMarkerFromLayer(marker);
          }

          // remove markers ids from Layer map
          delete this.layerIdToMarkers[id];
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
    }

    /**
     * Remove the ellipsoids corresponding to a EllipseLayer Layer
     * @param {Ellipse} ellipse - the layer to remove the ellipsoids from
     */
  }, {
    key: "removeEllipsoids",
    value: function removeEllipsoids(ellipse) {
      var ids = ellipse.getIds() || [];
      var _iterator4 = (0,createForOfIteratorHelper/* default */.Z)(ids),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var id = _step4.value;
          var _ellipse = this.layerIdToEllipsoids[id];
          if (isDefined(_ellipse)) {
            this.removeEllipseFromLayer(_ellipse);
          }

          // remove polylines ids from Layer map
          delete this.layerIdToEllipsoids[id];
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
    }

    /**
     * Remove the polylines corresponding to a PolylineLayer Layer
     * @param {Polyline} polyline - the layer to remove the polylines from
     */
  }, {
    key: "removePolylines",
    value: function removePolylines(polyline) {
      var ids = polyline.getIds() || [];
      var _iterator5 = (0,createForOfIteratorHelper/* default */.Z)(ids),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var id = _step5.value;
          var _polyline = this.layerIdToPolylines[id];
          if (isDefined(_polyline)) {
            this.removePolylineFromLayer(_polyline);
          }

          // remove polylines ids from Layer map
          delete this.layerIdToPolylines[id];
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    }

    /**
     * Remove the drapedImage corresponding to a ImageDraping Layer
     * @param {ImageDraping} imageDraping - the layer to remove the drapedImage from
     */
  }, {
    key: "removeDrapedImages",
    value: function removeDrapedImages(drapedImage) {
      var ids = drapedImage.getIds() || [];
      var _iterator6 = (0,createForOfIteratorHelper/* default */.Z)(ids),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var id = _step6.value;
          var _drapedImage = this.layerIdToDrapedImage[id];
          if (isDefined(_drapedImage)) {
            this.removeDrapedImageFromLayer(_drapedImage);
          }

          // remove drapedImage ids from Layer map
          delete this.layerIdToDrapedImage[id];
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
    }

    /**
     * Remove the frustums corresponding to a Frustum Layer
     * @param {FrustumLayer} polyline - the layer to remove the Frustum from
     */
  }, {
    key: "removeFrustums",
    value: function removeFrustums(layer) {
      var ids = layer.getIds() || [];
      var _iterator7 = (0,createForOfIteratorHelper/* default */.Z)(ids),
        _step7;
      try {
        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
          var id = _step7.value;
          var frustum = this.layerIdToFrustum[id];
          if (isDefined(frustum)) {
            this.removeFrustumFromLayer(frustum);
          }

          // remove markers ids from Layer map
          delete this.layerIdToFrustum[id];
        }
      } catch (err) {
        _iterator7.e(err);
      } finally {
        _iterator7.f();
      }
    }
    /**
     * Abstract method to remove a marker from its corresponding layer.
     * This is library dependant.
     * @protected
     * @param {Object} marker - The Map marker object
     */
  }, {
    key: "removeMarkerFromLayer",
    value: function removeMarkerFromLayer(marker) {}

    /**
     * Abstract method to remove a polyline from its corresponding layer.
     * This is library dependant.
     * @protected
     * @param {Object} polyline - The Map polyline object
     */
  }, {
    key: "removePolylineFromLayer",
    value: function removePolylineFromLayer(polyline) {}

    /**
     * Abstract method to remove a draped image from its corresponding layer.
     * This is library dependant.
     * @protected
     * @param {Object} drapedImage - The Map drapedImage object
     */
  }, {
    key: "removeDrapedImageFromLayer",
    value: function removeDrapedImageFromLayer(drapedImage) {}

    /**
     * Abstract method to remove a polygon from its corresponding layer.
     * This is library dependant.
     * @protected
     * @param {Object} polygon - The Map polygon object
     */
  }, {
    key: "removePolygonFromLayer",
    value: function removePolygonFromLayer(marker) {}

    /**
     * Method to call onLeftClick Layer method if exists
     * @param {String} markerId - the Layer markerId
     * @param {Object} markerObject - the View marker object
     * @param {PointMarkerLayer} layer - the Layer object
     * @param {Object} event - the original Map View event
     */
  }, {
    key: "onMarkerLeftClick",
    value: function onMarkerLeftClick(markerId, markerObject, layer, event) {
      if (isDefined(layer.onLeftClick)) {
        layer.onLeftClick.call(layer, markerId, markerObject, event);
      }
    }

    /**
     * Method to call onRightClick Layer method if exists
     * @param {String} markerId - the Layer markerId
     * @param {Object} markerObject - the View marker object
     * @param {PointMarkerLayer} layer - the Layer object
     * @param {Object} event - the original Map View event
     */
  }, {
    key: "onMarkerRightClick",
    value: function onMarkerRightClick(markerId, markerObject, layer, event) {
      if (isDefined(layer.onRightClick)) {
        layer.onRightClick.call(layer, markerId, markerObject, event);
      }
    }

    /**
     * Method to call onMove Layer method if exists
     * @param {String} markerId - the Layer markerId
     * @param {Object} markerObject - the View marker object
     * @param {PointMarkerLayer} layer - the Layer object
     * @param {Object} event - the original Map View event
     */
  }, {
    key: "onMarkerMove",
    value: function onMarkerMove(markerId, markerObject, layer, event) {
      if (isDefined(layer.onMove)) {
        layer.onMove.call(layer, markerId, markerObject, event);
      }
    }

    /**
     * Method to call onHover Layer method if exists
     * @param {String} markerId - the Layer markerId
     * @param {Object} markerObject - the View marker object
     * @param {PointMarkerLayer} layer - the Layer object
     * @param {Object} event - the original Map View event
     */
  }, {
    key: "onMarkerHover",
    value: function onMarkerHover(markerId, markerObject, layer, event) {
      if (isDefined(layer.onHover)) {
        layer.onHover.call(layer, markerId, markerObject, event);
      }
    }

    /**
     * Gets the the Layer id from  a concatenated id
     * @param {String} id - the concatenated such as layerId$markerId
     * @return {null|String} the Layer id
     */
  }, {
    key: "getLayerId",
    value: function getLayerId(id) {
      var split = id.split('$');
      if (isDefined(split) && split.length === 2) {
        return split[0];
      }
      return null;
    }

    /**
     * Gets the the Marker id from  a concatenated id
     * @param {String} id - the concatenated such as layerId$markerId
     * @return {null|String} the marker id
     */
  }, {
    key: "getMarkerId",
    value: function getMarkerId(id) {
      if (!isDefined(id)) {
        return null;
      }
      var split = id.split('$');
      if (isDefined(split) && split.length === 2) {
        return split[1];
      }
      return null;
    }
  }, {
    key: "updateMarker",
    value: function () {
      var _updateMarker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
            case "end":
              return _context8.stop();
          }
        }, _callee8);
      }));
      function updateMarker() {
        return _updateMarker.apply(this, arguments);
      }
      return updateMarker;
    }()
  }, {
    key: "updatePolyline",
    value: function () {
      var _updatePolyline = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
            case "end":
              return _context9.stop();
          }
        }, _callee9);
      }));
      function updatePolyline() {
        return _updatePolyline.apply(this, arguments);
      }
      return updatePolyline;
    }()
  }, {
    key: "updatePolygon",
    value: function () {
      var _updatePolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee10() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
            case "end":
              return _context10.stop();
          }
        }, _callee10);
      }));
      function updatePolygon() {
        return _updatePolygon.apply(this, arguments);
      }
      return updatePolygon;
    }()
  }, {
    key: "updateEllipse",
    value: function () {
      var _updateEllipse = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee11() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
            case "end":
              return _context11.stop();
          }
        }, _callee11);
      }));
      function updateEllipse() {
        return _updateEllipse.apply(this, arguments);
      }
      return updateEllipse;
    }()
  }, {
    key: "updateCoPlanarPolygon",
    value: function () {
      var _updateCoPlanarPolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee12() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
            case "end":
              return _context12.stop();
          }
        }, _callee12);
      }));
      function updateCoPlanarPolygon() {
        return _updateCoPlanarPolygon.apply(this, arguments);
      }
      return updateCoPlanarPolygon;
    }()
  }, {
    key: "updateDrapedImage",
    value: function () {
      var _updateDrapedImage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee13() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
            case "end":
              return _context13.stop();
          }
        }, _callee13);
      }));
      function updateDrapedImage() {
        return _updateDrapedImage.apply(this, arguments);
      }
      return updateDrapedImage;
    }()
  }]);
  return MapView;
}(view_View);
/* harmony default export */ var map_MapView = (MapView);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/LeafletView.js














/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






/**
 * This class is in charge of displaying GPS/orientation data by adding a marker to the Leaflet Map object.
 * @extends MapView
 * @example

 import LeafletView from 'core/ui/view/map/LeafletView.js';

 let leafletMapView = new LeafletView({
	container: 'leafletMap',
	layers: [
	  new PointMarkerLayer({
      dataSourceId: gpsDataSource.id,
      getLocation: (rec) => ({
        x: rec.location.lon,
        y: rec.location.lat,
        z: rec.location.alt
      }),
      icon: './images/car-location.png',
      iconSize: [32, 64],
      iconAnchor: [16, 65],
      name: 'Car',
      description: 'GPS car Toulouse'
    })
  ],
	autoZoomOnFirstMarker: true
});
 */
var LeafletView = /*#__PURE__*/function (_MapView) {
  (0,inherits/* default */.Z)(LeafletView, _MapView);
  var _super = (0,createSuper/* default */.Z)(LeafletView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {String} properties.container - The div element to attach to
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker
   * @param {Boolean} [properties.follow=false] - follow the marker
   * @param {Object} [properties.initialView] - Sets the view of the map (geographical center and zoom) with the given animation options. [See details]{@link https://leafletjs.com/reference-1.7.1.html#map-setview}
   * @param {Object[]} [properties.overlayLayers] - [L.tileLayer]{@link https://leafletjs.com/reference-1.7.1.html#tilelayer-l-tilelayer} objects to use as overlay layer
   * @param {Object[]} [properties.baseLayers] - [L.tileLayer]{@link https://leafletjs.com/reference-1.7.1.html#tilelayer-l-tilelayer} objects to use as base layer
   *
   */
  function LeafletView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, LeafletView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['marker', 'draping', 'polyline', 'polygon']
    }, properties));
    var cssClass = document.getElementById(_this.divId).className;
    document.getElementById(_this.divId).setAttribute("class", cssClass + " " + _this.css);
    return _this;
  }
  (0,createClass/* default */.Z)(LeafletView, [{
    key: "beforeAddingItems",
    value: function beforeAddingItems(options) {
      // inits the map
      this.initMap(options);
    }

    //---------- MAP SETUP --------------//
    /**
     *
     * @private
     */
  }, {
    key: "initMap",
    value: function initMap(options) {
      // #region snippet_leafletview_initial_view
      var initialView = {
        location: new (leaflet_src_default()).LatLng(0, 0),
        zoom: 3
      };
      // #endregion snippet_leafletview_initial_view
      this.first = true;
      this.follow = false;
      this.autoZoomOnFirstMarker = false;
      var defaultLayers = this.getDefaultLayers();
      var defaultLayer = defaultLayers[0].layer;
      var baseLayers = {};
      var overlays = {};
      baseLayers[defaultLayers[0].name] = defaultLayers[0].layer;
      overlays[defaultLayers[1].name] = defaultLayers[1].layer;
      if (isDefined(options)) {
        if (isDefined(options.initialView)) {
          initialView = {
            location: new (leaflet_src_default()).LatLng(options.initialView.lat, options.initialView.lon),
            zoom: options.initialView.zoom
          };
        }
        // checks autoZoom
        if (isDefined(options.autoZoomOnFirstMarker)) {
          this.autoZoomOnFirstMarker = options.autoZoomOnFirstMarker;
        }

        // checks overlayers
        if (isDefined(options.overlayLayers)) {
          overlays = options.overlayLayers;
        }

        // checks baseLayer
        if (isDefined(options.baseLayers)) {
          baseLayers = options.baseLayers;
        }
        if (isDefined(options.follow)) {
          this.follow = options.follow;
        }

        // checks defaultLayer
        if (isDefined(options.defaultLayer)) {
          defaultLayer = options.defaultLayer;
        }
      }

      // sets layers to map
      this.map = new (leaflet_src_default()).Map(this.divId, {
        fullscreenControl: true,
        layers: defaultLayer
      });
      leaflet_src_default().control.layers(baseLayers, overlays).addTo(this.map);
      this.map.setView(initialView.location, initialView.zoom);

      //this.initLayers();
    }

    /**
     * Gets the list of default layers.
     * @return {Array}
     */
  }, {
    key: "getDefaultLayers",
    value: function getDefaultLayers(options) {
      var maxZoom = 22;
      if (isDefined(options) && options.maxZoom) {
        maxZoom = options.maxZoom;
      }
      // copyrights
      var mbAttr = 'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',
        mbUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      var esriLink = '<a href="http://www.esri.com/">Esri</a>';
      var esriWholink = 'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community';

      // leaflet layers
      var esriLayer = leaflet_src_default().tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '&copy; ' + esriLink + ', ' + esriWholink,
        maxZoom: maxZoom,
        maxNativeZoom: 19
      });
      var streets = leaflet_src_default().tileLayer(mbUrl, {
        id: 'mapbox.streets',
        attribution: mbAttr,
        maxZoom: maxZoom
      });
      return [{
        name: "OSM Streets",
        layer: streets
      }, {
        name: "Esri Satellite",
        layer: esriLayer
      }];
    }

    /**
     * @private
     */
  }, {
    key: "initLayers",
    value: function initLayers() {
      // create the tile layer with correct attribution
      var osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      var osmAttrib = 'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
      var osm = new (leaflet_src_default()).tileLayer(osmUrl, {
        minZoom: 1,
        maxZoom: 22,
        attribution: osmAttrib
      });
      this.map.addLayer(osm);
    }

    /**
     * Add a marker to the map.
     * @param {PointMarkerLayer.properties} properties - the layer properties
     * @return {Object} the the new created marker
     */
  }, {
    key: "addMarker",
    value: function addMarker(properties) {
      assertDefined(properties.location, 'location');
      //create marker
      var marker = null;
      if (properties.icon !== null) {
        var markerIcon = leaflet_src_default().icon({
          iconAnchor: properties.iconAnchor,
          iconUrl: properties.icon,
          iconSize: properties.iconSize
        });
        marker = leaflet_src_default().marker([properties.location.y, properties.location.x], {
          icon: markerIcon
        });
      } else {
        marker = leaflet_src_default().marker([properties.location.y, properties.location.x]);
      }
      if (properties.label !== null) {
        marker.bindTooltip(properties.label, {
          permanent: false,
          direction: 'center',
          offset: leaflet_src_default().point(properties.labelOffset[0], properties.labelOffset[1])
        });
      }
      var name = properties.hasOwnProperty("name") && properties.label != null ? properties.label : "";
      var desc = properties.hasOwnProperty("description") && properties.description != null ? properties.description : "";
      if (!isDefined(properties.onLeftClick) && (name.length > 0 || desc.length > 0)) {
        marker.bindPopup(name + '<div>' + desc + '</div>', {
          offset: leaflet_src_default().point(properties.labelOffset[0], properties.labelOffset[1])
        });
      }
      marker.setZIndexOffset(properties.zIndex);
      marker.id = properties.id + "$" + properties.markerId;
      marker.addTo(this.map);
      if (properties.hasOwnProperty(properties.orientation)) {
        marker.setRotationAngle(properties.orientation.heading);
      }
      return marker;
    }

    /**
     * Add a polyline to the map.
     * @param {Object} properties
     */
  }, {
    key: "addPolyline",
    value: function addPolyline(properties) {
      var locations = properties.locations;
      var polylinePoints = [];
      if (isDefined(locations) && locations.length > 0) {
        for (var i = 0; i < locations.length; i++) {
          polylinePoints.push(new (leaflet_src_default()).LatLng(locations[i].y, locations[i].x));
        }
      }

      //create path
      var polyline = new (leaflet_src_default()).Polyline(polylinePoints, {
        color: properties.color,
        weight: properties.weight,
        opacity: properties.opacity,
        smoothFactor: properties.smoothFactor
      }).addTo(this.map);
      return polyline;
    }

    /**
     * Updates the marker associated to the layer.
     * @param {PointMarkerLayer.props} props - The layer properties allowing the update of the marker
     */
  }, {
    key: "updateMarker",
    value: function () {
      var _updateMarker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(props) {
        var _this2 = this;
        var marker, mId, lon, lat, newLatLng, markerBounds, markerIcon;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              marker = this.getMarker(props);
              if (!isDefined(marker)) {
                // adds a new marker to the leaflet renderer
                marker = this.addMarker(props);
                this.addMarkerToLayer(props, marker);
                mId = props.markerId; //need to freeze
                marker.on('click', function (event) {
                  return _this2.onMarkerLeftClick(mId, marker, props, event);
                });
                marker.on('contextmenu', function (event) {
                  return _this2.onMarkerRightClick(mId, marker, props, event);
                });
                marker.on('mouseover', function (event) {
                  return _this2.onMarkerHover(mId, marker, props, event);
                });
              }

              // get the current marker corresponding to the current markerId value of the PointMarker
              // updates position
              lon = props.location.x;
              lat = props.location.y;
              if (!isNaN(lon) && !isNaN(lat)) {
                newLatLng = new (leaflet_src_default()).LatLng(lat, lon);
                marker.setLatLng(newLatLng);
                if (this.first && this.autoZoomOnFirstMarker || this.follow) {
                  markerBounds = leaflet_src_default().latLngBounds([newLatLng]);
                  this.map.fitBounds(markerBounds, {
                    maxZoom: props.zoomLevel
                  });
                  if (this.first) {
                    this.first = false;
                  }
                }
              }

              // updates orientation
              if (isDefined(props.orientation)) {
                marker.setRotationAngle(props.orientation.heading);
              }
              if (props.icon !== null && marker._icon.iconUrl !== props.icon) {
                // updates icon
                markerIcon = leaflet_src_default().icon({
                  iconAnchor: props.iconAnchor,
                  iconUrl: props.icon
                });
                marker.setIcon(markerIcon);
              }
              marker.setZIndexOffset(props.zIndex);
            case 8:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function updateMarker(_x) {
        return _updateMarker.apply(this, arguments);
      }
      return updateMarker;
    }()
    /**
     * Abstract method to remove a marker from its corresponding layer.
     * This is library dependant.
     * @param {Object} marker - The Map marker object
     */
  }, {
    key: "removeMarkerFromLayer",
    value: function removeMarkerFromLayer(marker) {
      this.map.removeLayer(marker);
    }

    /**
     * Abstract method to remove a polyline from its corresponding layer.
     * This is library dependant.
     * @param {Object} polyline - The Map polyline object
     */
  }, {
    key: "removePolylineFromLayer",
    value: function removePolylineFromLayer(polyline) {
      this.map.removeLayer(polyline);
    }

    /**
     * Updates the polyline associated to the layer.
     * @param {PolylineLayer.props} props - The layer properties allowing the update of the polyline
     */
  }, {
    key: "updatePolyline",
    value: function () {
      var _updatePolyline = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props) {
        var polyline, polylineObj, polylinePoints, locations, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              polyline = this.getPolyline(props);
              if (!isDefined(polyline)) {
                // adds a new polygon to the leaflet renderer
                polylineObj = this.addPolyline(props);
                this.addPolylineToLayer(props, polylineObj);
              } else {
                polylinePoints = [];
                locations = props.locations;
                if (isDefined(locations) && locations.length > 0) {
                  for (i = 0; i < locations.length; i++) {
                    polylinePoints.push(new (leaflet_src_default()).LatLng(locations[i].y, locations[i].x));
                  }
                }
                polyline.setLatLngs(polylinePoints);

                // update style
                polyline.setStyle({
                  color: props.color,
                  weight: props.weight,
                  opacity: props.opacity
                });
              }
            case 2:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updatePolyline(_x2) {
        return _updatePolyline.apply(this, arguments);
      }
      return updatePolyline;
    }()
    /**
     * Updates the polygon associated to the layer.
     * @param {Polygon.props} props - The layer properties allowing the update of the polygon
     */
  }, {
    key: "updatePolygon",
    value: function () {
      var _updatePolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(props) {
        var polygon, polygonObj, vertices, polygonPoints, i, latLon;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              polygon = this.getPolygon(props);
              if (!isDefined(polygon)) {
                // adds a new polygon to the leaflet renderer
                polygonObj = this.addPolygon(props);
                this.addPolygonToLayer(props, polygonObj);
              } else {
                // update location
                vertices = props.vertices;
                polygonPoints = [];
                if (isDefined(vertices) && vertices.length > 0) {
                  for (i = 0; i < vertices.length - 1; i = i + 2) {
                    latLon = new (leaflet_src_default()).LatLng(vertices[i + 1], vertices[i]);
                    polygonPoints.push([latLon.lat, latLon.lng]);
                  }
                }
                polygon.setLatLngs(polygonPoints);

                // update style
                polygon.setStyle({
                  color: props.outlineColor,
                  weight: props.outlineWidth,
                  fillColor: props.color,
                  fill: true,
                  fillOpacity: props.opacity
                });
              }
            case 2:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function updatePolygon(_x3) {
        return _updatePolygon.apply(this, arguments);
      }
      return updatePolygon;
    }()
    /**
     * Abstract method to remove a polygon from its corresponding layer.
     * This is library dependant.
     * @param {Object} polygon - The Map polygon object
     */
  }, {
    key: "removePolygonFromLayer",
    value: function removePolygonFromLayer(polygon) {
      this.map.removeLayer(polygon);
    }

    /**
     * Add a polygon to the map.
     * @param {Object} properties
     */
  }, {
    key: "addPolygon",
    value: function addPolygon(properties) {
      var vertices = properties.vertices;
      var polygonPoints = [];
      if (isDefined(vertices) && vertices.length > 0) {
        for (var i = 0; i < vertices.length - 1; i = i + 2) {
          var latLon = new (leaflet_src_default()).LatLng(vertices[i + 1], vertices[i]);
          polygonPoints.push([latLon.lat, latLon.lng]);
        }
      }

      //create polygon
      var polygon = new (leaflet_src_default()).polygon(polygonPoints, {
        color: properties.outlineColor,
        weight: properties.outlineWidth,
        fillColor: properties.color,
        fill: true,
        fillOpacity: properties.opacity
      }).addTo(this.map);
      return polygon;
    }
  }, {
    key: "attachTo",
    value: function attachTo(parentElement) {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(LeafletView.prototype), "attachTo", this).call(this, parentElement);
      // Fix leaflet bug when resizing the div parent container
      this.map.invalidateSize();
    }
  }, {
    key: "onResize",
    value: function onResize() {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(LeafletView.prototype), "onResize", this).call(this);
      var that = this;
      setTimeout(function () {
        that.map.invalidateSize();
      }, 100);
    }
  }, {
    key: "onChange",
    value: function onChange(data) {}
  }]);
  return LeafletView;
}(map_MapView);
/***  little hack starts here ***/
(leaflet_src_default()).Map = leaflet_src_default().Map.extend({
  openPopup: function openPopup(popup) {
    this._popup = popup;
    return this.addLayer(popup).fire('popupopen', {
      popup: this._popup
    });
  }
});

// Defines rotated marker
(function () {
  // save these original methods before they are overwritten
  var proto_initIcon = (leaflet_src_default()).Marker.prototype._initIcon;
  var proto_setPos = (leaflet_src_default()).Marker.prototype._setPos;
  var oldIE = (leaflet_src_default()).DomUtil.TRANSFORM === 'msTransform';
  leaflet_src_default().Marker.addInitHook(function () {
    var iconAnchor = this.options.icon.options.iconAnchor;
    if (iconAnchor) {
      iconAnchor = iconAnchor[0] + 'px ' + iconAnchor[1] + 'px';
    }
    this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center bottom';
    this.options.rotationAngle = this.options.rotationAngle || 0;
  });
  leaflet_src_default().Marker.include({
    _initIcon: function _initIcon() {
      proto_initIcon.call(this);
    },
    _setPos: function _setPos(pos) {
      proto_setPos.call(this, pos);
      if (this.options.rotationAngle) {
        this._icon.style[(leaflet_src_default()).DomUtil.TRANSFORM + 'Origin'] = this.options.rotationOrigin;
        if (oldIE) {
          // for IE 9, use the 2D rotation
          this._icon.style[(leaflet_src_default()).DomUtil.TRANSFORM] = ' rotate(' + this.options.rotationAngle + 'deg)';
        } else {
          // for modern browsers, prefer the 3D accelerated version
          this._icon.style[(leaflet_src_default()).DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';
        }
      }
    },
    setRotationAngle: function setRotationAngle(angle) {
      this.options.rotationAngle = angle;
      this.update();
      return this;
    },
    setRotationOrigin: function setRotationOrigin(origin) {
      this.options.rotationOrigin = origin;
      this.update();
      return this;
    }
  });
})();

/***  end of hack ***/

/* harmony default export */ var map_LeafletView = (LeafletView);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js
var web_url = __webpack_require__(60285);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.js
var web_url_search_params = __webpack_require__(41637);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/MjpegView.js












/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * @extends View
 * @example
 *
 import MjpegView from 'core/ui/view/video/MjpegView.js';

 let videoView = new MjpegView({
  container: 'container',
  css: 'video-h264',
  name: 'UAV Video',
  showTime: true,
  showStats: true,
  layers: [
      new DataLayer({
        dataSourceId: videoDataSource.id,
         getFrameData: (rec) => rec.videoFrame,
         getTimestamp: (rec) => rec.timestamp
      })
  ]
});
 */
var MjpegView = /*#__PURE__*/function (_View) {
  (0,inherits/* default */.Z)(MjpegView, _View);
  var _super = (0,createSuper/* default */.Z)(MjpegView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {string} properties.container - The div element to attach to
   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces
   * @param {String} properties.showTime - Display or not the time onto the view
   * @param {String} properties.rotation - Allow to define a rotation in degree
   *
   */
  function MjpegView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, MjpegView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['videoData']
    }, properties));

    // create timestamp slot
    _this.timestamp = null;
    if (isDefined(properties.showTime) && properties.showTime) {
      _this.timestamp = document.createElement("div");
      _this.timestamp.setAttribute("class", "video-time");
      document.getElementById(_this.divId).appendChild(_this.timestamp);
    }

    // creates video tag element
    _this.imgTag = document.createElement("img");
    _this.imgTag.setAttribute("class", "video-mjpeg");

    // rotation option
    _this.rotation = 0;
    if (typeof properties != "undefined" && typeof properties.rotation != "undefined") {
      _this.rotation = properties.rotation * Math.PI / 180;
      _this.canvas = document.createElement('canvas');
      _this.canvas.width = 640;
      _this.canvas.height = 480;
      var ctx = _this.canvas.getContext('2d');
      ctx.translate(0, 480);
      ctx.rotate(_this.rotation);
      document.getElementById(_this.divId).appendChild(_this.canvas);
    } else {
      // appends <img> tag to <div>
      document.getElementById(_this.divId).appendChild(_this.imgTag);
    }
    return _this;
  }
  (0,createClass/* default */.Z)(MjpegView, [{
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSourceId, data) {
        var values, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (data.type === 'videoData') {
                values = data.values;
                for (i = 0; i < values.length; i++) {
                  this.updateVideo(values[i]);
                }
              }
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setData(_x, _x2) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
  }, {
    key: "updateVideo",
    value: function updateVideo(props) {
      var imgBlob = new Blob([props.frameData.data]);
      var url = window.URL.createObjectURL(imgBlob);
      var oldBlobURL = this.imgTag.src;
      this.imgTag.src = url;
      if (this.timestamp !== null) {
        this.timestamp.innerHTML = new Date(props.timestamp).toISOString();
      }
      window.URL.revokeObjectURL(oldBlobURL);
    }
  }, {
    key: "selectDataView",
    value: function selectDataView(dataSourceIds, entityId) {
      if (dataSourceIds.indexOf(this.dataSourceId) > -1 || isDefined(this.entity) && this.entity.getId() === entityId) {
        document.getElementById(this.divId).setAttribute("class", this.css + " " + this.cssSelected);
      } else {
        document.getElementById(this.divId).setAttribute("class", this.css);
      }
    }
  }, {
    key: "reset",
    value: function reset() {
      this.imgTag.src = "";
    }
  }, {
    key: "getCanvas",
    value: function () {
      var _getCanvas = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", this.canvas);
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function getCanvas() {
        return _getCanvas.apply(this, arguments);
      }
      return getCanvas;
    }()
  }]);
  return MjpegView;
}(view_View);
/* harmony default export */ var video_MjpegView = (MjpegView);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.to-fixed.js
var es_number_to_fixed = __webpack_require__(56977);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js
var assertThisInitialized = __webpack_require__(52417);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/CanvasView.js









var CanvasView = /*#__PURE__*/function (_View) {
  (0,inherits/* default */.Z)(CanvasView, _View);
  var _super = (0,createSuper/* default */.Z)(CanvasView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {string} properties.container - The div element to attach to
   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces
   * @param {boolean} properties.visible - set the default behavior of the visibility of the view
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   */
  function CanvasView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, CanvasView);
    _this = _super.call(this, properties);
    _this.fps = 0;
    _this.width = 1920;
    _this.height = 1080;
    _this.showTime = false;
    _this.showStats = false;
    _this.statistics = {
      averageFps: 0,
      frames: 0,
      firstTime: 0,
      bitRate: 0,
      averageBitRate: 0
    };
    _this.framerate = 29.67;
    if (isDefined(properties)) {
      if (isDefined(properties.framerate)) {
        _this.framerate = properties.framerate;
      }
      if (isDefined(properties.directPlay)) {
        _this.directPlay = properties.directPlay;
      }
      if (isDefined(properties.codec)) {
        _this.codec = properties.codec;
      }
      if (isDefined(properties.showTime)) {
        _this.showTime = properties.showTime;
      }
      if (isDefined(properties.showStats)) {
        _this.showStats = properties.showStats;
      }
      if (isDefined(properties.width)) {
        _this.width = properties.width;
      }
      if (isDefined(properties.height)) {
        _this.height = properties.height;
      }
    }
    var domNode = document.getElementById(_this.divId);

    // if need to draw text
    if (_this.showTime || _this.showStats) {
      _this.textDiv = document.createElement("div");
      _this.textDiv.setAttribute("width", "" + _this.width);
      _this.textDiv.setAttribute("height", 15);
      _this.textDiv.setAttribute("class", "ffmpeg-info");
      if (_this.showTime) {
        _this.textFpsDiv = document.createElement("div");
        _this.textFpsDiv.setAttribute("class", "ffmpeg-fps");
        _this.textDiv.appendChild(_this.textFpsDiv);
      }
      if (_this.showStats) {
        _this.textStatsDiv = document.createElement("div");
        _this.textStatsDiv.setAttribute("class", "ffmpeg-stats");
        _this.textDiv.appendChild(_this.textStatsDiv);
      }
      domNode.appendChild(_this.textDiv);
    }

    // create webGL canvas
    _this.domNode = domNode;
    var hidden, visibilityChange;
    if (isDefined(document.hidden)) {
      // Opera 12.10 and Firefox 18 and later support
      hidden = "hidden";
      visibilityChange = "visibilitychange";
    } else if (isDefined(document.msHidden)) {
      hidden = "msHidden";
      visibilityChange = "msvisibilitychange";
    } else if (isDefined(document.webkitHidden)) {
      hidden = "webkitHidden";
      visibilityChange = "webkitvisibilitychange";
    }
    var that = (0,assertThisInitialized/* default */.Z)(_this);
    function handleVisibilityChange() {
      if (document.hidden) {
        that.skipFrame = true;
      } else {
        that.skipFrame = false;
      }
    }
    document.addEventListener(visibilityChange, handleVisibilityChange, false);
    return _this;
  }

  /**
   */
  (0,createClass/* default */.Z)(CanvasView, [{
    key: "updateStatistics",
    value: function updateStatistics(pktSize) {
      this.statistics.frames++;
      this.statistics.pktSize += pktSize;
      if (this.statistics.firstTime === 0) {
        this.statistics.firstTime = performance.now();
        return;
      }
      var currentTime = performance.now();
      if (currentTime - this.statistics.firstTime < 1000) {
        return;
      }

      // compute current time
      this.statistics.averageFps = (this.statistics.frames - 1) / ((currentTime - this.statistics.firstTime) / 1000);
      this.statistics.averageBitRate = (this.statistics.pktSize - pktSize) / ((currentTime - this.statistics.firstTime) / 1000);
      this.statistics.frames = 1;
      this.statistics.pktSize = pktSize;
      this.statistics.firstTime = currentTime;
    }
  }, {
    key: "onUpdated",
    value: function onUpdated(stats) {}
  }, {
    key: "destroy",
    value: function destroy() {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(CanvasView.prototype), "destroy", this).call(this);
    }

    /**
     * Called after each decoded frame.
     * @event
     */
  }, {
    key: "onAfterDecoded",
    value: function onAfterDecoded(decodedFrame, frameType) {}
  }]);
  return CanvasView;
}(view_View);
/* harmony default export */ var video_CanvasView = (CanvasView);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/FrameType.js
var FrameType = {
  BITMAP: 'bitmap',
  ARRAY: 'array'
};
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/WebCodecView.js















/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.
 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.
 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.
 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>
 ******************************* END LICENSE BLOCK ***************************/






/**
 * This class is in charge of displaying H264 data by decoding ffmpeg.js library and displaying into them a YUV canvas.
 * @extends CanvasView
 * @example
 *
 import WebCodecView from 'core/ui/view/video/WebCodecView.js';

 let videoView = new WebCodecView({
  container: 'video-h264-container',
  css: 'video-h264',
  name: 'UAV Video',
  layers: [
      new DataLayer({
        dataSourceId: videoDataSource.id,
        getFrameData: (rec) => rec.videoFrame,
        getTimestamp: (rec) => rec.timestamp
      })
  ]
});
 */
var WebCodecView = /*#__PURE__*/function (_CanvasView) {
  (0,inherits/* default */.Z)(WebCodecView, _CanvasView);
  var _super = (0,createSuper/* default */.Z)(WebCodecView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {string} properties.container - The div element to attach to
   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces
   * @param {boolean} properties.visible - set the default behavior of the visibility of the view
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Boolean} [properties.showTime=false] - Enable or ignore the show timestamp text onto the canvas
   * @param {Boolean} [properties.showStats=false] - Enable or ignore the display stats (FPS number) onto the canvas
   * @param {String} [properties.codec='h264'] - Video codec
   */
  function WebCodecView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, WebCodecView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['videoData']
    }, properties));
    if (!'VideoEncoder' in window) {
      // WebCodecs API is not supported.
      throw Error('WebCodec API is not supported');
    }

    //https://developer.mozilla.org/en-US/docs/Web/Media/Formats/codecs_parameter
    // common VP8/ VP9/ H264 profiles. May not work depending on the video encoding profile
    //        case "H264":
    //           config.codec = "avc1.42002A";  // baseline profile, level 4.2
    //           config.avc = { format: "annexb" };
    //           config.pt = 1;
    //           break;
    //         case "H265":
    //           config.codec = "hvc1.1.6.L123.00"; // Main profile, level 4.1, main Tier
    //           config.hevc = { format: "annexb" };
    //           config.pt = 2;
    //           break;
    //         case "VP8":
    //           config.codec = "vp8";
    //           config.pt = 3;
    //           break;
    //         case "VP9":
    //           config.codec = "vp09.00.10.08"; //VP9, Profile 0, level 1, bit depth 8
    //           config.pt = 4;
    //           break;
    //         case "AV1":
    //           config.codec = "av01.0.08M.10.0.110.09" // AV1 Main Profile, level 4.0, Main tier, 10-bit content, non-monochrome, with 4:2:0 chroma subsampling
    //           config.pt = 5;
    //           break;
    //       }
    _this.codecMap = {
      'vp9': 'vp09.02.10.10.01.09.16.09.01',
      'vp8': 'vp08.00.41.08',
      'h264': 'avc1.42e01e',
      'h265': 'hev1.1.6.L123.00'
    };

    // default use H264 codec
    _this.codec = _this.codecMap['h264'];
    if (isDefined(properties.codec)) {
      if (!properties.codec in _this.codecMap) {
        throw Error("The codec properties.codec is not supported, the list of supported codec: this.codecMap");
      } else {
        _this.codec = _this.codecMap[properties.codec];
      }
    }
    _this.compression = properties.codec;

    // create webGL canvas
    _this.canvasElt = _this.createCanvas(_this.width, _this.height);
    _this.domNode.appendChild(_this.canvasElt);
    _this.queue = [];
    return _this;
  }
  /**
   * Create <canvas> DOM element with some height/width/style
   * @protected
   * @param {String} width - the width
   * @param {String} height - the height
   * @param {String} style - the dom element style (Optional)
   */
  (0,createClass/* default */.Z)(WebCodecView, [{
    key: "createCanvas",
    value: function createCanvas(width, height, style) {
      var canvasElement = document.createElement('canvas');
      canvasElement.setAttribute('width', width);
      canvasElement.setAttribute('height', height);
      if (isDefined(style)) {
        canvasElement.setAttribute('style', style);
      }
      return canvasElement;
    }
  }, {
    key: "updateCanvasSize",
    value: function updateCanvasSize(width, height) {
      this.canvasElt.width = width;
      this.canvasElt.height = height;
    }
  }, {
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSourceId, data) {
        var values, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!(data.type === 'videoData')) {
                _context.next = 9;
                break;
              }
              values = data.values;
              i = 0;
            case 3:
              if (!(i < values.length)) {
                _context.next = 9;
                break;
              }
              _context.next = 6;
              return this.updateVideo(values[i]);
            case 6:
              i++;
              _context.next = 3;
              break;
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setData(_x, _x2) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
  }, {
    key: "updateVideo",
    value: function () {
      var _updateVideo = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (this.skipFrame) {
                _context2.next = 4;
                break;
              }
              if (!this.codecConfigured) {
                this.codec = this.codecMap[props.frameData.compression.toLowerCase()];
                this.initDecoder();
              }
              _context2.next = 4;
              return this.decode(props.frameData.data.length, props.frameData.data, props.timestamp, props.roll || 0);
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updateVideo(_x3) {
        return _updateVideo.apply(this, arguments);
      }
      return updateVideo;
    }()
    /**
     * Reset the view by drawing no data array into the YUV canvas.
     * @override
     */
  }, {
    key: "reset",
    value: function reset() {}
  }, {
    key: "initDecoder",
    value: function initDecoder() {
      var _this2 = this;
      this.gl = this.canvasElt.getContext("bitmaprenderer");
      var init = {
        output: function () {
          var _output = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(videoFrame) {
            var bitmap;
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  // check picture width
                  if (_this2.width !== videoFrame.codedWidth || _this2.height !== videoFrame.codedHeight) {
                    _this2.width = videoFrame.codedWidth;
                    _this2.height = videoFrame.codedHeight;
                    _this2.updateCanvasSize(_this2.width, _this2.height);
                    _this2.videoDecoder.configure({
                      codec: _this2.codec,
                      codedWidth: _this2.width,
                      codedHeight: _this2.height
                    });
                  }
                  _context3.next = 3;
                  return createImageBitmap(videoFrame);
                case 3:
                  bitmap = _context3.sent;
                  _context3.prev = 4;
                  _context3.next = 7;
                  return _this2.handleDocodedFrame(bitmap, _this2.width, _this2.height, videoFrame.timestamp, _this2.queue.shift());
                case 7:
                  _context3.prev = 7;
                  videoFrame.close();
                  return _context3.finish(7);
                case 10:
                case "end":
                  return _context3.stop();
              }
            }, _callee3, null, [[4,, 7, 10]]);
          }));
          function output(_x4) {
            return _output.apply(this, arguments);
          }
          return output;
        }(),
        error: function error(_error) {
          _this2.queue.shift();
          console.error(_error);
        }
      };
      try {
        this.videoDecoder = new VideoDecoder(init);
        this.videoDecoder.configure({
          codec: this.codec,
          codedWidth: this.width,
          codedHeight: this.height
        });
        this.codecConfigured = true;
      } catch (ex) {
        this.elementDiv.remove(); // remove reserved div element
        throw Error('Cannot configure WebCodec API VideoDecoder');
      }
    }
  }, {
    key: "handleDocodedFrame",
    value: function () {
      var _handleDocodedFrame = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(videoFrame, width, height) {
        var timestamp,
          queueElt,
          roll,
          scale,
          angleRad,
          _args4 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              timestamp = _args4.length > 3 && _args4[3] !== undefined ? _args4[3] : 0;
              queueElt = _args4.length > 4 && _args4[4] !== undefined ? _args4[4] : null;
              try {
                // draw image
                roll = Math.round(queueElt.roll / 90) * 90;
                if (roll > 180) roll -= 360;
                scale = 1.0;
                if (Math.abs(roll) === 90) {
                  scale = this.height / this.width;
                }
                angleRad = roll * Math.PI / 180.;
                if (this.angleRad && this.angleRad !== angleRad || this.scale && this.scale !== scale || !this.angleRad || !this.scale) {
                  this.canvasElt.style = "transform:rotate(".concat(angleRad, "rad) scale(").concat(scale, ")");
                  this.angleRad = angleRad;
                  this.scale = scale;
                }
                this.gl.transferFromImageBitmap(videoFrame);

                // update stats
                this.onAfterDecoded(videoFrame, FrameType.ARRAY);
                this.updateStatistics(queueElt.pktSize);
                if (this.showTime) {
                  this.textFpsDiv.innerText = new Date(timestamp).toISOString() + ' ';
                }
                if (this.showStats) {
                  this.textStatsDiv.innerText = this.statistics.averageFps.toFixed(2) + ' fps, ' + (this.statistics.averageBitRate / 1000).toFixed(2) + ' kB/s @' + width + "x" + height + '\n ' + this.compression;
                }
                this.onUpdated(this.statistics);
              } catch (exception) {
                console.error(exception);
                //continue;
              }
            case 3:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function handleDocodedFrame(_x5, _x6, _x7) {
        return _handleDocodedFrame.apply(this, arguments);
      }
      return handleDocodedFrame;
    }()
    /**
     * @private
     * @param pktSize
     * @param pktData
     * @param timestamp
     */
  }, {
    key: "decode",
    value: function () {
      var _decode = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(pktSize, pktData, timestamp, roll) {
        var key, chunk;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (this.codecConfigured) {
                key = false;
                if (this.codec === this.codecMap['h264']) {
                  // optimize for H264
                  // H264 logic
                  key = pktData[26] === 101 && pktData[25] === 1 && pktData[24] === 0 && pktData[23] === 0;
                }
                this.queue.push({
                  roll: roll,
                  pktSize: pktSize
                });
                chunk = new EncodedVideoChunk({
                  timestamp: timestamp,
                  type: key ? 'key' : 'delta',
                  data: pktData
                });
                this.videoDecoder.decode(chunk);
              } else {
                console.warn('decoder has not been initialized yet');
              }
            case 1:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function decode(_x8, _x9, _x10, _x11) {
        return _decode.apply(this, arguments);
      }
      return decode;
    }()
  }, {
    key: "destroy",
    value: function destroy() {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(WebCodecView.prototype), "destroy", this).call(this);
    }
  }, {
    key: "getCanvas",
    value: function () {
      var _getCanvas = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              return _context6.abrupt("return", this.canvasElt);
            case 1:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function getCanvas() {
        return _getCanvas.apply(this, arguments);
      }
      return getCanvas;
    }()
  }]);
  return WebCodecView;
}(video_CanvasView);
/* harmony default export */ var video_WebCodecView = (WebCodecView);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js
var es_typed_array_uint8_array = __webpack_require__(82472);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.at.js
var es_typed_array_at = __webpack_require__(48675);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.copy-within.js
var es_typed_array_copy_within = __webpack_require__(92990);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.every.js
var es_typed_array_every = __webpack_require__(18927);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js
var es_typed_array_fill = __webpack_require__(33105);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.filter.js
var es_typed_array_filter = __webpack_require__(35035);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find.js
var es_typed_array_find = __webpack_require__(74345);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-index.js
var es_typed_array_find_index = __webpack_require__(7174);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-last.js
var es_typed_array_find_last = __webpack_require__(63408);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-last-index.js
var es_typed_array_find_last_index = __webpack_require__(14590);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.for-each.js
var es_typed_array_for_each = __webpack_require__(32846);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.includes.js
var es_typed_array_includes = __webpack_require__(44731);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.index-of.js
var es_typed_array_index_of = __webpack_require__(77209);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js
var es_typed_array_iterator = __webpack_require__(96319);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.join.js
var es_typed_array_join = __webpack_require__(58867);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.last-index-of.js
var es_typed_array_last_index_of = __webpack_require__(37789);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.map.js
var es_typed_array_map = __webpack_require__(33739);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce.js
var es_typed_array_reduce = __webpack_require__(29368);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce-right.js
var es_typed_array_reduce_right = __webpack_require__(14483);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reverse.js
var es_typed_array_reverse = __webpack_require__(12056);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js
var es_typed_array_set = __webpack_require__(3462);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.slice.js
var es_typed_array_slice = __webpack_require__(30678);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.some.js
var es_typed_array_some = __webpack_require__(27462);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js
var es_typed_array_sort = __webpack_require__(33824);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.subarray.js
var es_typed_array_subarray = __webpack_require__(55021);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-locale-string.js
var es_typed_array_to_locale_string = __webpack_require__(12974);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js
var es_typed_array_to_string = __webpack_require__(15016);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.typed-array.to-reversed.js
var esnext_typed_array_to_reversed = __webpack_require__(23767);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.typed-array.to-sorted.js
var esnext_typed_array_to_sorted = __webpack_require__(8585);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.typed-array.with.js
var esnext_typed_array_with = __webpack_require__(68696);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/workers/ffmpeg.decode.video.worker.js
function ffmpeg_decode_video_worker_Worker_fn() {
  return new Worker(__webpack_require__.p + "js/ffmpeg.decode.video.worker-legacy.e2bc9bca.worker.js");
}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.float32-array.js
var es_typed_array_float32_array = __webpack_require__(44197);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.join.js
var es_array_join = __webpack_require__(69600);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/YUVCanvas.js




































var YUVCanvas = /*#__PURE__*/function () {
  function YUVCanvas(parOptions) {
    (0,classCallCheck/* default */.Z)(this, YUVCanvas);
    parOptions = parOptions || {};
    this.canvasElement = parOptions.canvas || document.createElement("canvas");
    this.canvasElement.setAttribute('id', randomUUID());
    this.contextOptions = parOptions.contextOptions;
    this.type = parOptions.type || "yuv420";
    this.customYUV444 = parOptions.customYUV444;
    this.conversionType = parOptions.conversionType || "rec601";
    this.width = parOptions.width || 640;
    this.height = parOptions.height || 320;
    this.animationTime = parOptions.animationTime || 0;
    this.canvasElement.width = this.width;
    this.canvasElement.height = this.height;
    this.init();
  }
  (0,createClass/* default */.Z)(YUVCanvas, [{
    key: "init",
    value: function init() {
      var _this = this;
      this.initContextGL();
      if (this.contextGL) {
        this.initProgram();
        this.initBuffers();
        this.initTextures();
      }

      /**
       * Draw the next output picture using WebGL
       */
      if (this.type === "yuv420") {
        this.drawNextOuptutPictureGL = function (par) {
          var gl = _this.contextGL;
          var texturePosBuffer = _this.texturePosBuffer;
          var uTexturePosBuffer = _this.uTexturePosBuffer;
          var vTexturePosBuffer = _this.vTexturePosBuffer;
          var yTextureRef = _this.yTextureRef;
          var uTextureRef = _this.uTextureRef;
          var vTextureRef = _this.vTextureRef;
          var yData = par.yData;
          var uData = par.uData;
          var vData = par.vData;
          var width = _this.width;
          var height = _this.height;
          var yDataPerRow = par.yDataPerRow || width;
          var yRowCnt = par.yRowCnt || height;
          var uDataPerRow = par.uDataPerRow || width / 2;
          var uRowCnt = par.uRowCnt || height / 2;
          var vDataPerRow = par.vDataPerRow || uDataPerRow;
          var vRowCnt = par.vRowCnt || uRowCnt;
          var roll = Math.round(par.roll / 90) * 90;
          if (roll > 180) roll -= 360;
          if (Math.abs(roll) == 90) {
            _this.canvasElement.width = _this.height;
            _this.canvasElement.height = _this.width;
            gl.viewport(0, 0, height, width);
          } else {
            _this.canvasElement.width = _this.width;
            _this.canvasElement.height = _this.height;
            gl.viewport(0, 0, width, height);
          }
          var tTop = 0;
          var tLeft = 0;
          var tBottom = height / yRowCnt;
          var tRight = width / yDataPerRow;
          var texturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);
          gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);
          gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);
          if (_this.customYUV444) {
            tBottom = height / uRowCnt;
            tRight = width / uDataPerRow;
          } else {
            tBottom = height / 2 / uRowCnt;
            tRight = width / 2 / uDataPerRow;
          }
          var uTexturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);
          gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);
          gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);
          if (_this.customYUV444) {
            tBottom = height / vRowCnt;
            tRight = width / vDataPerRow;
          } else {
            tBottom = height / 2 / vRowCnt;
            tRight = width / 2 / vDataPerRow;
          }
          var vTexturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);
          gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);
          gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);
          gl.activeTexture(gl.TEXTURE0);
          gl.bindTexture(gl.TEXTURE_2D, yTextureRef);
          gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);
          gl.activeTexture(gl.TEXTURE1);
          gl.bindTexture(gl.TEXTURE_2D, uTextureRef);
          gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);
          gl.activeTexture(gl.TEXTURE2);
          gl.bindTexture(gl.TEXTURE_2D, vTextureRef);
          gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);
          gl.uniform1f(_this.rollUniform, roll * Math.PI / 180.);
          gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        };
        this.drawNextOuptutPictureBitmapGL = function (par) {
          var gl = _this.contextGL;
          var texturePosBuffer = _this.texturePosBuffer;
          var yTextureRef = _this.yTextureRef;
          var yData = par.yData;
          var width = _this.width;
          var height = _this.height;
          var yDataPerRow = width;
          var yRowCnt = height;
          var tTop = 0;
          var tLeft = 0;
          var tBottom = height / yRowCnt;
          var tRight = width / yDataPerRow;
          var texturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);
          var roll = Math.round(par.roll / 90) * 90;
          if (roll > 180) roll -= 360;
          if (Math.abs(roll) == 90) {
            _this.canvasElement.width = _this.height;
            _this.canvasElement.height = _this.width;
            gl.viewport(0, 0, height, width);
          } else {
            _this.canvasElement.width = _this.width;
            _this.canvasElement.height = _this.height;
            gl.viewport(0, 0, width, height);
          }
          gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);
          gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);
          gl.activeTexture(gl.TEXTURE0);
          gl.bindTexture(gl.TEXTURE_2D, yTextureRef);
          // gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);
          gl.texImage2D(gl.TEXTURE_2D,
          // target
          0,
          // mip level
          gl.RGBA,
          // internal format
          gl.RGBA,
          //format
          gl.UNSIGNED_BYTE,
          // type
          yData);
          gl.uniform1f(_this.rollUniform, roll * Math.PI / 180.);
          gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        };
      } else if (this.type === "yuv422") {
        this.drawNextOuptutPictureGL = function (par) {
          var gl = _this.contextGL;
          var texturePosBuffer = _this.texturePosBuffer;
          var textureRef = _this.textureRef;
          var data = par.data;
          var width = _this.width;
          var height = _this.height;
          var dataPerRow = par.dataPerRow || width * 2;
          var rowCnt = par.rowCnt || height;
          gl.viewport(0, 0, width, height);
          var tTop = 0;
          var tLeft = 0;
          var tBottom = height / rowCnt;
          var tRight = width / (dataPerRow / 2);
          var texturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);
          gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);
          gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);
          gl.uniform2f(gl.getUniformLocation(_this.shaderProgram, 'resolution'), dataPerRow, height);
          gl.activeTexture(gl.TEXTURE0);
          gl.bindTexture(gl.TEXTURE_2D, textureRef);
          gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, dataPerRow, rowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, data);
          gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        };
      }
    }

    /**
     * Returns true if the canvas supports WebGL
     */
  }, {
    key: "isWebGL",
    value: function isWebGL() {
      return this.contextGL;
    }

    /**
     * Create the GL context from the canvas element
     */
  }, {
    key: "initContextGL",
    value: function initContextGL() {
      var canvas = this.canvasElement;
      var gl = null;
      var validContextNames = ["webgl", "experimental-webgl", "moz-webgl", "webkit-3d"];
      var nameIndex = 0;
      while (!gl && nameIndex < validContextNames.length) {
        var contextName = validContextNames[nameIndex];
        try {
          if (this.contextOptions) {
            gl = canvas.getContext(contextName, this.contextOptions);
          } else {
            gl = canvas.getContext(contextName);
          }
        } catch (e) {
          gl = null;
        }
        if (!gl || typeof gl.getParameter !== "function") {
          gl = null;
        }
        ++nameIndex;
      }
      this.contextGL = gl;
    }

    /**
     * Initialize GL shader program
     */
  }, {
    key: "initProgram",
    value: function initProgram() {
      var gl = this.contextGL;

      // vertex shader is the same for all types
      var vertexShaderScript;
      var fragmentShaderScript;
      if (this.type === "yuv420") {
        vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'attribute vec4 uTexturePos;', 'attribute vec4 vTexturePos;', 'varying vec2 textureCoord;', 'varying vec2 uTextureCoord;', 'varying vec2 vTextureCoord;', 'uniform float roll;', 'void main()', '{', '  vec4 ctr = vec4(0.5, 0.5, 0, 0);', '  mat4 rotMatrix = mat4( cos(roll), -sin(roll), 0, 0,', '                         sin(roll),  cos(roll), 0, 0,', '                         0,          0,         1, 0,', '                         0,          0,         0, 1);', '  gl_Position = vertexPos;', '  textureCoord = mat2(rotMatrix) * (texturePos.xy - vec2(ctr)) + vec2(ctr);', '  uTextureCoord = mat2(rotMatrix) * (uTexturePos.xy - vec2(ctr)) + vec2(ctr);', '  vTextureCoord = mat2(rotMatrix) * (vTexturePos.xy - vec2(ctr)) + vec2(ctr);', '}'].join('\n');
        fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'varying highp vec2 uTextureCoord;', 'varying highp vec2 vTextureCoord;', 'uniform sampler2D ySampler;', 'uniform sampler2D uSampler;', 'uniform sampler2D vSampler;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float y = texture2D(ySampler,  textureCoord).r;', '  highp float u = texture2D(uSampler,  uTextureCoord).r;', '  highp float v = texture2D(vSampler,  vTextureCoord).r;', '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;', '}'].join('\n');
      } else if (this.type === "yuv422") {
        vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'varying vec2 textureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '}'].join('\n');
        fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'uniform sampler2D sampler;', 'uniform highp vec2 resolution;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float texPixX = 1.0 / resolution.x;', '  highp float logPixX = 2.0 / resolution.x;',
        // half the resolution of the texture
        '  highp float logHalfPixX = 4.0 / resolution.x;',
        // half of the logical resolution so every 4th pixel
        '  highp float steps = floor(textureCoord.x / logPixX);', '  highp float uvSteps = floor(textureCoord.x / logHalfPixX);', '  highp float y = texture2D(sampler, vec2((logPixX * steps) + texPixX, textureCoord.y)).r;', '  highp float u = texture2D(sampler, vec2((logHalfPixX * uvSteps), textureCoord.y)).r;', '  highp float v = texture2D(sampler, vec2((logHalfPixX * uvSteps) + texPixX + texPixX, textureCoord.y)).r;',
        //'  highp float y = texture2D(sampler,  textureCoord).r;',
        //'  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;',
        '  gl_FragColor = vec4(y, u, v, 1.0) * YUV2RGB;', '}'].join('\n');
      }
      var YUV2RGB = [];
      if (this.conversionType === "rec709") {
        // ITU-T Rec. 709
        YUV2RGB = [1.16438, 0.00000, 1.79274, -0.97295, 1.16438, -0.21325, -0.53291, 0.30148, 1.16438, 2.11240, 0.00000, -1.13340, 0, 0, 0, 1];
      } else {
        // assume ITU-T Rec. 601
        YUV2RGB = [1.16438, 0.00000, 1.59603, -0.87079, 1.16438, -0.39176, -0.81297, 0.52959, 1.16438, 2.01723, 0.00000, -1.08139, 0, 0, 0, 1];
      }
      var vertexShader = gl.createShader(gl.VERTEX_SHADER);
      gl.shaderSource(vertexShader, vertexShaderScript);
      gl.compileShader(vertexShader);
      if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
        console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));
      }
      var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
      gl.shaderSource(fragmentShader, fragmentShaderScript);
      gl.compileShader(fragmentShader);
      if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
        console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));
      }
      var program = gl.createProgram();
      gl.attachShader(program, vertexShader);
      gl.attachShader(program, fragmentShader);
      gl.linkProgram(program);
      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
        console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));
      }
      gl.useProgram(program);
      var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');
      gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);
      this.rollUniform = gl.getUniformLocation(program, "roll");
      this.shaderProgram = program;
    }

    /**
     * Initialize vertex buffers and attach to shader program
     */
  }, {
    key: "initBuffers",
    value: function initBuffers() {
      var gl = this.contextGL;
      var program = this.shaderProgram;
      var vertexPosBuffer = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);
      var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');
      gl.enableVertexAttribArray(vertexPosRef);
      gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);
      if (this.animationTime) {
        var animationTime = this.animationTime;
        var timePassed = 0;
        var stepTime = 15;
        var aniFun = function aniFun() {
          timePassed += stepTime;
          var mul = 1 * timePassed / animationTime;
          if (timePassed >= animationTime) {
            mul = 1;
          } else {
            setTimeout(aniFun, stepTime);
          }
          var neg = -1 * mul;
          var pos = 1 * mul;
          var vertexPosBuffer = gl.createBuffer();
          gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);
          gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([pos, pos, neg, pos, pos, neg, neg, neg]), gl.STATIC_DRAW);
          var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');
          gl.enableVertexAttribArray(vertexPosRef);
          gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);
          try {
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
          } catch (e) {}
        };
        aniFun();
      }
      var texturePosBuffer = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);
      var texturePosRef = gl.getAttribLocation(program, 'texturePos');
      gl.enableVertexAttribArray(texturePosRef);
      gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);
      this.texturePosBuffer = texturePosBuffer;
      if (this.type === "yuv420") {
        var uTexturePosBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);
        var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');
        gl.enableVertexAttribArray(uTexturePosRef);
        gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);
        this.uTexturePosBuffer = uTexturePosBuffer;
        var vTexturePosBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);
        var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');
        gl.enableVertexAttribArray(vTexturePosRef);
        gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);
        this.vTexturePosBuffer = vTexturePosBuffer;
      }
    }

    /**
     * Initialize GL textures and attach to shader program
     */
  }, {
    key: "initTextures",
    value: function initTextures() {
      var gl = this.contextGL;
      var program = this.shaderProgram;
      if (this.type === "yuv420") {
        var yTextureRef = this.initTexture();
        var ySamplerRef = gl.getUniformLocation(program, 'ySampler');
        gl.uniform1i(ySamplerRef, 0);
        this.yTextureRef = yTextureRef;
        var uTextureRef = this.initTexture();
        var uSamplerRef = gl.getUniformLocation(program, 'uSampler');
        gl.uniform1i(uSamplerRef, 1);
        this.uTextureRef = uTextureRef;
        var vTextureRef = this.initTexture();
        var vSamplerRef = gl.getUniformLocation(program, 'vSampler');
        gl.uniform1i(vSamplerRef, 2);
        this.vTextureRef = vTextureRef;
      } else if (this.type === "yuv422") {
        // only one texture for 422
        var textureRef = this.initTexture();
        var samplerRef = gl.getUniformLocation(program, 'sampler');
        gl.uniform1i(samplerRef, 0);
        this.textureRef = textureRef;
      }
    }

    /**
     * Create and configure a single texture
     */
  }, {
    key: "initTexture",
    value: function initTexture() {
      var gl = this.contextGL;
      var textureRef = gl.createTexture();
      gl.bindTexture(gl.TEXTURE_2D, textureRef);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
      gl.bindTexture(gl.TEXTURE_2D, null);
      return textureRef;
    }

    /**
     * Draw picture data to the canvas.
     * If this object is using WebGL, the data must be an I420 formatted ArrayBuffer,
     * Otherwise, data must be an RGBA formatted ArrayBuffer.
     */
  }, {
    key: "drawNextOutputPicture",
    value: function drawNextOutputPicture(width, height, croppingParams, data) {
      var gl = this.contextGL;
      if (gl) {
        this.drawNextOuptutPictureGL(width, height, croppingParams, data);
      } else {
        this.drawNextOuptutPictureRGBA(width, height, croppingParams, data);
      }
    }

    /**
     * Draw next output picture using ARGB data on a 2d canvas.
     */
  }, {
    key: "drawNextOuptutPictureRGBA",
    value: function drawNextOuptutPictureRGBA(width, height, croppingParams, data) {
      var canvas = this.canvasElement;
      var argbData = data;
      var ctx = canvas.getContext('2d');
      var imageData = ctx.getImageData(0, 0, width, height);
      imageData.data.set(argbData);
      if (croppingParams === null) {
        ctx.putImageData(imageData, 0, 0);
      } else {
        ctx.putImageData(imageData, -croppingParams.left, -croppingParams.top, 0, 0, croppingParams.width, croppingParams.height);
      }
    }
  }, {
    key: "resize",
    value: function resize(width, height) {
      this.canvasElement.width = width;
      this.canvasElement.height = height;
      this.width = width;
      this.height = height;
    }
  }]);
  return YUVCanvas;
}();
/* harmony default export */ var video_YUVCanvas = (YUVCanvas);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/FFMPEGView.js











































/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.
 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.
 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.
 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>
 ******************************* END LICENSE BLOCK ***************************/








/**
 * This class is in charge of displaying H264 data by decoding ffmpeg.js library and displaying into them a YUV canvas.
 * @extends CanvasView
 * @example
 *
 import FFMPEGView from 'core/ui/view/video/FFMPEGView.js';

 let videoView = new FFMPEGView({
  container: 'video-h264-container',
  css: 'video-h264',
  name: 'UAV Video',
  framerate:25,
  showTime: true,
  showStats: true,
    layers: [
      new VideoDataLayer({
        dataSourceId: videoDataSource.id,
        getFrameData: (rec) => rec.videoFrame,
        getTimestamp: (rec) => rec.timestamp
      })
  ]
});
 */
var FFMPEGView = /*#__PURE__*/function (_CanvasView) {
  (0,inherits/* default */.Z)(FFMPEGView, _CanvasView);
  var _super = (0,createSuper/* default */.Z)(FFMPEGView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {string} properties.container - The div element to attach to
   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces
   * @param {boolean} properties.visible - set the default behavior of the visibility of the view
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Number} [properties.framerate=29.67] - The framerate to play 1s/framerate and get smooth display
   * @param {Boolean} [properties.directPlay=false] - Enable or ignore the framerate play
   * @param {Boolean} [properties.showTime=false] - Enable or ignore the show timestamp text onto the canvas
   * @param {Boolean} [properties.showStats=false] - Enable or ignore the display stats (FPS number) onto the canvas
   * @param {Number} [properties.width=1920] - Set the default canvas width
   * @param {Number} [properties.height=1080] - Set the default canvas height
   * @param {String} [properties.codec='h264'] - Video codec
   */
  function FFMPEGView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, FFMPEGView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['videoData']
    }, properties));
    _this.directPlay = false;
    _this.codec = 'h264';

    // create webGL canvas
    _this.yuvCanvas = _this.createCanvas(_this.width, _this.height);
    _this.domNode.appendChild(_this.yuvCanvas.canvasElement);
    _this.buf = [];
    _this.bufferingTime = 2 * 1000;
    return _this;
  }
  (0,createClass/* default */.Z)(FFMPEGView, [{
    key: "createCanvas",
    value: function createCanvas(width, height, style) {
      return new video_YUVCanvas({
        width: width,
        height: height,
        contextOptions: {
          preserveDrawingBuffer: true
        }
      });
    }
  }, {
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSourceId, data) {
        var values, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (data.type === 'videoData') {
                values = data.values;
                for (i = 0; i < values.length; i++) {
                  this.updateVideo(values[i]);
                }
              }
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setData(_x, _x2) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
  }, {
    key: "updateVideo",
    value: function () {
      var _updateVideo = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (this.skipFrame) {
                _context2.next = 3;
                break;
              }
              if (this.decodeWorker == null) {
                this.initFFMPEG_DECODER_WORKER(props.frameData.compression);
              }
              return _context2.abrupt("return", this.decode(props.frameData.data.length, props.frameData.data, props.timestamp, props.roll || 0));
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updateVideo(_x3) {
        return _updateVideo.apply(this, arguments);
      }
      return updateVideo;
    }()
    /**
     * Reset the view by drawing no data array into the YUV canvas.
     * @override
     */
  }, {
    key: "reset",
    value: function reset() {
      this.skipFrame = true;
      // if(isDefined(this.decodeWorker)) {
      //     this.decodeWorker.terminate();
      //     this.decodeWorker = null;
      // }
      if (this.decodeWorker) {
        this.decodeWorker.postMessage({
          message: 'release'
        });
      }
      var nodata = new Uint8Array(1);
      nodata[0] = 128;
      this.yuvCanvas.drawNextOuptutPictureGL({
        yData: nodata,
        yDataPerRow: 1,
        yRowCnt: 1,
        uData: nodata,
        uDataPerRow: 1,
        uRowCnt: 1,
        vData: nodata,
        vDataPerRow: 1,
        vRowCnt: 1
      });
      this.skipFrame = false;
    }

    //-- FFMPEG DECODING PART

    //-------------------------------------------------------//
    //---------- Web worker --------------------------------//
    //-----------------------------------------------------//

    /**
     * The worker code is located at the location js/workers/Ffmpeg.worker.js.
     * This location cannot be changed. Be sure to have the right file at the right place.
     * @private
     */
  }, {
    key: "initFFMPEG_DECODER_WORKER",
    value: function initFFMPEG_DECODER_WORKER(codec) {
      this.decodeWorker = new ffmpeg_decode_video_worker_Worker_fn();
      // const drawWorker = new DrawWorker();
      this.decodeWorker.id = randomUUID();
      this.decodeWorker.postMessage({
        'message': 'init',
        'codec': codec.toLowerCase()
      });
      // const offscreenCanvas = this.canvas.transferControlToOffscreen();
      // let canvas = document.createElement('canvas');
      // canvas.setAttribute('width', this.width);
      // canvas.setAttribute('height', this.height);
      // this.domNode.appendChild(canvas);

      // const offscreenCanvas = canvas.transferControlToOffscreen();
      // drawWorker.postMessage({
      //     canvas: offscreenCanvas,
      //     width: this.width,
      //     height: this.height,
      //     framerate: this.framerate,
      //     dataSourceId: this.dataSourceId
      // }, [offscreenCanvas]);

      var that = this;
      this.decodeWorker.onmessage = function (e) {
        var decodedFrame = e.data;
        that.drawFrame(decodedFrame);
        this.onAfterDecoded(decodedFrame, FrameType.ARRAY);
        this.updateStatistics(decodedFrame.pktSize);
        if (this.showTime) {
          this.textFpsDiv.innerText = new Date(decodedFrame.timestamp).toISOString() + ' ';
        }
        if (this.showStats) {
          this.textStatsDiv.innerText = this.statistics.averageFps.toFixed(2) + ' fps, ' + (this.statistics.averageBitRate / 1000).toFixed(2) + ' kB/s @' + that.yuvCanvas.width + "x" + that.yuvCanvas.height + '\n ' + this.codec;
        }
        this.onUpdated(this.statistics);
      }.bind(this);
    }
  }, {
    key: "drawFrame",
    value: function drawFrame(decodedFrame) {
      this.yuvCanvas.canvasElement.drawing = true;
      if (this.width !== decodedFrame.frame_width || this.height !== decodedFrame.frame_height) {
        //re-create the canvas
        this.yuvCanvas.resize(decodedFrame.frame_width, decodedFrame.frame_height);
        this.width = decodedFrame.frame_width;
        this.height = decodedFrame.frame_height;
      }
      this.yuvCanvas.drawNextOuptutPictureGL({
        yData: decodedFrame.frameYData,
        yDataPerRow: decodedFrame.frame_width,
        yRowCnt: decodedFrame.frame_height,
        uData: decodedFrame.frameUData,
        uDataPerRow: decodedFrame.frame_width / 2,
        uRowCnt: decodedFrame.frame_height / 2,
        vData: decodedFrame.frameVData,
        vDataPerRow: decodedFrame.frame_width / 2,
        vRowCnt: decodedFrame.frame_height / 2,
        roll: decodedFrame.roll
      });
      this.yuvCanvas.canvasElement.drawing = false;
    }
    /**
     * @private
     * @param pktSize
     * @param pktData
     * @param timestamp
     */
  }, {
    key: "decode",
    value: function () {
      var _decode = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(pktSize, pktData, timestamp, roll) {
        var arrayBuffer;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (pktSize > 0) {
                arrayBuffer = pktData.buffer;
                this.decodeWorker.postMessage({
                  message: 'data',
                  pktSize: pktSize,
                  pktData: arrayBuffer,
                  roll: roll,
                  byteOffset: pktData.byteOffset,
                  codec: this.codec,
                  timestamp: timestamp,
                  dataSourceId: this.dataSourceId
                }, [arrayBuffer]);
                pktData = null;
              }
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function decode(_x4, _x5, _x6, _x7) {
        return _decode.apply(this, arguments);
      }
      return decode;
    }()
  }, {
    key: "destroy",
    value: function destroy() {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(FFMPEGView.prototype), "destroy", this).call(this);
      if (isDefined(this.decodeWorker)) {
        this.decodeWorker.postMessage({
          message: 'release'
        });
        this.decodeWorker.terminate();
      }
    }
  }, {
    key: "getCanvas",
    value: function () {
      var _getCanvas = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              return _context4.abrupt("return", this.yuvCanvas.canvasElement);
            case 1:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function getCanvas() {
        return _getCanvas.apply(this, arguments);
      }
      return getCanvas;
    }()
  }, {
    key: "drawBlank",
    value: function drawBlank() {
      var nodata = new Uint8Array(1);
      this.yuvCanvas.drawNextOuptutPictureGL({
        yData: nodata,
        yDataPerRow: 1,
        yRowCnt: 1,
        uData: nodata,
        uDataPerRow: 1,
        uRowCnt: 1,
        vData: nodata,
        vDataPerRow: 1,
        vRowCnt: 1
      });
    }
  }]);
  return FFMPEGView;
}(video_CanvasView);
/* harmony default export */ var video_FFMPEGView = (FFMPEGView);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/video/VideoView.js

















/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.
 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>
 ******************************* END LICENSE BLOCK ***************************/
var VideoView = /*#__PURE__*/function (_View) {
  (0,inherits/* default */.Z)(VideoView, _View);
  var _super = (0,createSuper/* default */.Z)(VideoView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {string} properties.container - The div element to attach to
   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces
   * @param {boolean} properties.visible - set the default behavior of the visibility of the view
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Number} [properties.framerate=29.67] - The framerate to play 1s/framerate and get smooth display
   * @param {Boolean} [properties.directPlay=false] - Enable or ignore the framerate play
   * @param {Boolean} [properties.showTime=false] - Enable or ignore the show timestamp text onto the canvas
   * @param {Boolean} [properties.showStats=false] - Enable or ignore the display stats (FPS number) onto the canvas
   * @param {Number} [properties.width=1920] - Set the default canvas width
   * @param {Number} [properties.height=1080] - Set the default canvas height
   * @param {Number} [properties.useWebCodecApi=true] - Use experimental WebCodecApi
   */
  function VideoView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, VideoView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['videoData']
    }, properties));
    _this.videoView = undefined;
    _this.canvasResolve = undefined;
    _this.useWebCodecApi = true;
    if ('useWebCodecApi' in properties) {
      _this.useWebCodecApi = properties['useWebCodecApi'];
    }
    return _this;
  }
  (0,createClass/* default */.Z)(VideoView, [{
    key: "createVideoView",
    value: function createVideoView(compression) {
      var _this2 = this;
      if (compression === 'jpeg') {
        // create MJPEG View
        this.videoView = new video_MjpegView((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.properties), {}, {
          layers: []
        }));
      } else if (compression !== 'h265' && this.useWebCodecApi) {
        // because h265 there are some issues with h265
        try {
          this.videoView = new video_WebCodecView((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.properties), {}, {
            codec: compression,
            layers: []
          }));
          this.videoView.initDecoder();
        } catch (ex) {
          // use ffmpeg as fallback
          this.videoView = new video_FFMPEGView((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.properties), {}, {
            codec: compression,
            layers: []
          }));
        }
      } else {
        this.videoView = new video_FFMPEGView((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.properties), {}, {
          codec: compression,
          layers: []
        }));
      }
      this.hide();
      // this.elementDiv.replaceWith(this.videoView.elementDiv);
      if (this.canvasResolve) {
        this.canvasResolve(this.videoView.getCanvas());
      }
      this.videoView.onAfterDecoded = function (decodedFrame, frameType) {
        _this2.onDecode(decodedFrame, frameType);
      };
    }
  }, {
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSourceId, data) {
        var values, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!(data.type === 'videoData')) {
                _context.next = 10;
                break;
              }
              values = data.values;
              i = 0;
            case 3:
              if (!(i < values.length)) {
                _context.next = 10;
                break;
              }
              if (!isDefined(this.videoView)) {
                this.createVideoView(values[i].frameData.compression.toLowerCase());
              }
              _context.next = 7;
              return this.videoView.updateVideo(values[i]);
            case 7:
              i++;
              _context.next = 3;
              break;
            case 10:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setData(_x, _x2) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
  }, {
    key: "getVideoCanvas",
    value: function () {
      var _getVideoCanvas = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        var that;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (!isDefined(this.videoView)) {
                _context3.next = 4;
                break;
              }
              return _context3.abrupt("return", this.videoView.getCanvas());
            case 4:
              that = this;
              return _context3.abrupt("return", new Promise( /*#__PURE__*/function () {
                var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(resolve) {
                  return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
                    while (1) switch (_context2.prev = _context2.next) {
                      case 0:
                        that.canvasResolve = resolve;
                      case 1:
                      case "end":
                        return _context2.stop();
                    }
                  }, _callee2);
                }));
                return function (_x3) {
                  return _ref.apply(this, arguments);
                };
              }()));
            case 6:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getVideoCanvas() {
        return _getVideoCanvas.apply(this, arguments);
      }
      return getVideoCanvas;
    }()
  }, {
    key: "reset",
    value: function reset() {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(VideoView.prototype), "reset", this).call(this);
      if (isDefined(this.videoView)) {
        this.videoView.reset();
      }
    }
  }, {
    key: "destroy",
    value: function destroy() {
      console.warn('Destroying VideoView');
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(VideoView.prototype), "destroy", this).call(this);
      if (isDefined(this.videoView)) {
        this.videoView.destroy();
      }
    }
  }, {
    key: "onDecode",
    value: function onDecode(decodedFrame, frameType) {}
  }]);
  return VideoView;
}(view_View);
/* harmony default export */ var video_VideoView = (VideoView);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(89584);
// EXTERNAL MODULE: ./node_modules/chart.js/dist/chart.esm.js + 1 modules
var chart_esm = __webpack_require__(62728);
// EXTERNAL MODULE: ./node_modules/chartjs-adapter-moment/dist/chartjs-adapter-moment.esm.js
var chartjs_adapter_moment_esm = __webpack_require__(86961);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/chart/ChartJsView.js


















/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2021 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






/**
 * @extends View
 */
var ChartJsView = /*#__PURE__*/function (_View) {
  (0,inherits/* default */.Z)(ChartJsView, _View);
  var _super = (0,createSuper/* default */.Z)(ChartJsView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {String} properties.container - The div element to attach to
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {String} [properties.type='line'] - The  [type]{@link https://www.chartjs.org/docs/3.5.1/} of the graph
   * @param {Object} [properties.options={}] - Properties which can override the default framework ones
   * @param {Object} [properties.datasetOptions={}] - Properties which can override the default framework ones (as defined [dataset]{@link https://www.chartjs.org/docs/latest/configuration/#dataset-configuration}
   * @param {boolean} [properties.override=false] - Defines if options (as defined [Chart options]{@link https://www.chartjs.org/docs/3.5.1/general/options.html}) are completely overridden or merge only. Default is merge
   @param {boolean} [properties.refreshRate=1000] - Defines the refresh data rate (in millis)
   */
  function ChartJsView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, ChartJsView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['curve']
    }, properties));
    chart_esm/* Chart.register.apply */.kL.register.apply(chart_esm/* Chart */.kL, (0,toConsumableArray/* default */.Z)(chart_esm/* registerables */.zX));

    // #region snippet_chartjsview_default_chartprops
    _this.datasetOptions = {};
    var type = 'line';
    _this.options = {
      maintainAspectRatio: false,
      normalized: true,
      scales: {
        y: {
          title: {
            display: true,
            text: ''
          }
        },
        x: {
          type: 'time',
          time: {
            unit: 'second'
          }
        }
      },
      plugins: {},
      datasets: {},
      interaction: {},
      animations: {},
      layout: {},
      elements: {}
    };
    _this.refreshRate = 1000;
    // #endregion snippet_chartjsview_default_chartprops
    if (isDefined(properties)) {
      if (properties.hasOwnProperty('options')) {
        merge(properties.options, _this.options);
      }
      if (properties.hasOwnProperty('type')) {
        type = properties.type;
      }
      if (properties.hasOwnProperty('datasetOptions')) {
        _this.datasetOptions = properties.datasetOptions;
      }
      if (properties.hasOwnProperty('refreshRate')) {
        _this.refreshRate = properties.refreshRate;
      }
    }
    _this.type = type;
    var domNode = document.getElementById(_this.divId);
    _this.id = randomUUID();
    var ctx = document.createElement("canvas");
    ctx.setAttribute("id", _this.id);
    domNode.appendChild(ctx);
    _this.ctx = ctx;
    _this.resetting = false;
    _this.chart = new chart_esm/* Chart */.kL(_this.ctx, {
      type: type,
      options: _this.options
    });
    _this.datasets = {};
    _this.buffer = {};
    _this.lastTimestamp = -1;
    return _this;
  }
  (0,createClass/* default */.Z)(ChartJsView, [{
    key: "setData",
    value: function () {
      var _setData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(dataSourceId, data) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (data.type === 'curve') {
                this.updateCurve(data.values);
              }
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setData(_x, _x2) {
        return _setData.apply(this, arguments);
      }
      return setData;
    }()
  }, {
    key: "parseDate",
    value: function parseDate(intTimeStamp) {
      var date = new Date(intTimeStamp);
      return this.withLeadingZeros(date.getUTCHours()) + ":" + this.withLeadingZeros(date.getUTCMinutes()) + ":" + this.withLeadingZeros(date.getUTCSeconds());
    }
  }, {
    key: "withLeadingZeros",
    value: function withLeadingZeros(dt) {
      return (dt < 10 ? '0' : '') + dt;
    }

    /**
     * Updates the curve associated to the layer.
     * @param {Curve.props[]} props - The layer properties allowing the update of the curve
     */
  }, {
    key: "updateCurve",
    value: function () {
      var _updateCurve = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props) {
        var curveId, currentDataset, values, lineColor, bgColor, bufferKey, currentBuffer, nbToShift;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!this.resetting) {
                _context2.next = 2;
                break;
              }
              return _context2.abrupt("return");
            case 2:
              curveId = props[0].curveId;
              this.chart.options.scales.y.title.text = props[0].yLabel;
              currentDataset = this.datasets[curveId];
              values = props.map(function (item) {
                return {
                  'x': item.x,
                  'y': item.y
                };
              });
              lineColor = this.getColor(props[0].lineColor);
              bgColor = this.getColor(props[0].backgroundColor);
              if (!isDefined(currentDataset)) {
                currentDataset = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.datasetOptions), {}, {
                  label: props[0].name,
                  fill: props[0].fill,
                  backgroundColor: bgColor,
                  borderColor: lineColor,
                  borderWidth: props[0].stroke,
                  data: values
                });
                currentDataset = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.datasetsProps), currentDataset);
                this.datasets[curveId] = currentDataset;
                this.chart.data.datasets.push(currentDataset);
                this.buffer[curveId] = [];
              } else {
                this.datasets[curveId].backgroundColor = bgColor;
                this.datasets[curveId].borderColor = lineColor;
              }
              this.buffer[curveId] = this.buffer[curveId].concat(values);
              if (this.lastTimestamp === -1 || Date.now() - this.lastTimestamp >= this.refreshRate) {
                for (bufferKey in this.buffer) {
                  currentBuffer = this.buffer[bufferKey];
                  nbToShift = currentBuffer.length - props[0].maxValues;
                  if (nbToShift > 0) {
                    // double buffering
                    this.buffer[bufferKey] = currentBuffer.slice(nbToShift);
                  }
                  this.datasets[bufferKey].data = this.buffer[bufferKey];
                }
                this.lastTimestamp = Date.now();
                this.chart.update('none');
              }
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updateCurve(_x3) {
        return _updateCurve.apply(this, arguments);
      }
      return updateCurve;
    }()
  }, {
    key: "getColor",
    value: function getColor(value) {
      var v = value;
      if (v.length > 0 && v.charAt(0) === '#') {
        if (value.length === 9) {
          var rgba = hex2rgba(value);
          v = 'rgba(' + rgba[0] + ',' + rgba[1] + ',' + rgba[2] + ',' + rgba[3] + ')';
        } else {
          var rgb = hex2rgb(value);
          v = 'rgba(' + rgb[0] + ',' + rgb[1] + ',' + rgb[2] + ', 1.0)';
        }
      }
      return v;
    }
  }, {
    key: "reset",
    value: function reset() {
      this.resetting = true;
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(ChartJsView.prototype), "reset", this).call(this);
      this.datasets = {};
      this.chart.data.datasets = [];
      this.buffer = {};
      //
      this.lastTimestamp = -1;
      this.resetting = false;
    }
  }]);
  return ChartJsView;
}(view_View);
/* harmony default export */ var chart_ChartJsView = (ChartJsView);
// EXTERNAL MODULE: ./node_modules/ol/ol.css
var ol = __webpack_require__(71827);
// EXTERNAL MODULE: ./node_modules/ol/View.js + 3 modules
var ol_View = __webpack_require__(72241);
// EXTERNAL MODULE: ./node_modules/ol/Map.js + 24 modules
var Map = __webpack_require__(66153);
// EXTERNAL MODULE: ./node_modules/ol/layer/Tile.js + 3 modules
var Tile = __webpack_require__(91162);
// EXTERNAL MODULE: ./node_modules/ol/layer/Group.js
var Group = __webpack_require__(68734);
// EXTERNAL MODULE: ./node_modules/ol/proj.js + 7 modules
var proj = __webpack_require__(26835);
// EXTERNAL MODULE: ./node_modules/ol/interaction/DragRotateAndZoom.js
var DragRotateAndZoom = __webpack_require__(80447);
// EXTERNAL MODULE: ./node_modules/ol/control/FullScreen.js
var FullScreen = __webpack_require__(70097);
// EXTERNAL MODULE: ./node_modules/ol/control/ZoomSlider.js
var ZoomSlider = __webpack_require__(78168);
// EXTERNAL MODULE: ./node_modules/ol/source/Vector.js + 4 modules
var Vector = __webpack_require__(33376);
// EXTERNAL MODULE: ./node_modules/ol/layer/Vector.js + 19 modules
var layer_Vector = __webpack_require__(74818);
// EXTERNAL MODULE: ./node_modules/ol/geom/Point.js
var Point = __webpack_require__(60188);
// EXTERNAL MODULE: ./node_modules/ol/Feature.js
var Feature = __webpack_require__(81090);
// EXTERNAL MODULE: ./node_modules/ol/style/Style.js
var Style = __webpack_require__(47539);
// EXTERNAL MODULE: ./node_modules/ol/style/Icon.js + 1 modules
var Icon = __webpack_require__(81332);
// EXTERNAL MODULE: ./node_modules/ol/style/Text.js
var Text = __webpack_require__(21280);
// EXTERNAL MODULE: ./node_modules/ol/interaction/Select.js
var Select = __webpack_require__(7517);
// EXTERNAL MODULE: ./node_modules/ol/source/OSM.js + 11 modules
var OSM = __webpack_require__(4626);
// EXTERNAL MODULE: ./node_modules/ol/interaction/MouseWheelZoom.js
var MouseWheelZoom = __webpack_require__(20686);
// EXTERNAL MODULE: ./node_modules/ol-layerswitcher/dist/ol-layerswitcher.js
var ol_layerswitcher = __webpack_require__(66421);
var ol_layerswitcher_default = /*#__PURE__*/__webpack_require__.n(ol_layerswitcher);
// EXTERNAL MODULE: ./node_modules/ol/style/Stroke.js
var Stroke = __webpack_require__(58958);
// EXTERNAL MODULE: ./node_modules/ol/style/Fill.js
var Fill = __webpack_require__(51345);
// EXTERNAL MODULE: ./node_modules/ol/geom/LineString.js + 1 modules
var LineString = __webpack_require__(3904);
// EXTERNAL MODULE: ./node_modules/ol/events/condition.js
var condition = __webpack_require__(98683);
// EXTERNAL MODULE: ./node_modules/ol/geom/Polygon.js + 5 modules
var Polygon = __webpack_require__(39399);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/OpenLayerView.js












/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




























/**
 * This class is in charge of displaying GPS/orientation data by adding a marker to the OpenLayer Map object.
 * @extends MapView
 */
var OpenLayerView = /*#__PURE__*/function (_MapView) {
  (0,inherits/* default */.Z)(OpenLayerView, _MapView);
  var _super = (0,createSuper/* default */.Z)(OpenLayerView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {String} properties.container - The div element to attach to
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker
   * @param {Object} [properties.map] - the [Map]{@link https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html} object to use
   * @param {Number} [properties.maxZoom=19] - the max zoom value
   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker
   * @param {Object} [properties.initialView] - The initial View can be passed to override the default [View]{@link https://openlayers.org/en/latest/apidoc/module-ol_View-View.html}
   * @param {Object[]} [properties.overlayLayers] - OpenLayers objects to use as overlay layer
   * @param {Object[]} [properties.baseLayers] - OpenLayers objects to use as base layer
   *
   */
  function OpenLayerView(properties) {
    (0,classCallCheck/* default */.Z)(this, OpenLayerView);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['marker', 'polyline', 'polygon', 'ellipse']
    }, properties));
  }
  (0,createClass/* default */.Z)(OpenLayerView, [{
    key: "beforeAddingItems",
    value: function beforeAddingItems(options) {
      // inits the map
      this.initMap(options);
    }

    //---------- MAP SETUP --------------//
    /**
     * @private
     */
  }, {
    key: "initMap",
    value: function initMap(options) {
      this.map = null;
      this.first = true;
      var overlays = [];
      var baseLayers = this.getDefaultLayers();
      var maxZoom = 19;
      var view = new ol_View/* default */.ZP({
        center: [0, 0],
        zoom: 0
      });
      if (isDefined(options)) {
        //if the user passed in a map then use that one, don't make a new one
        if (options.map) {
          this.map = options.map;
        }

        // checks autoZoom
        if (!options.autoZoomOnFirstMarker) {
          this.first = false;
        }
        if (options.maxZoom) {
          maxZoom = options.maxZoom;
        }

        // checks overlayers
        if (options.overlayLayers) {
          overlays = options.overlayLayers;
        }

        // checks baseLayer
        if (options.baseLayers) {
          baseLayers = options.baseLayers;
        }
        if (options.initialView) {
          view = options.initialView;
        }
      }
      if (!isDefined(this.map)) {
        // sets layers to map
        //create map
        // #region snippet_openlayerview_initial_map
        this.map = new Map/* default */.Z();
        this.map.addInteraction(new DragRotateAndZoom/* default */.Z());
        this.map.addInteraction(new MouseWheelZoom/* default */.Z({
          constrainResolution: true,
          // force zooming to a integer zoom,
          duration: 200
        }));
        this.map.addControl(new FullScreen/* default */.Z());
        var layerSwitcher = new (ol_layerswitcher_default())({
          tipLabel: 'Legend',
          // Optional label for button
          groupSelectStyle: 'children' // Can be 'children' [default], 'group' or 'none'
        });

        this.map.addControl(layerSwitcher);
        this.map.addControl(new ZoomSlider/* default */.Z());

        // #endregion snippet_openlayerview_initial_map

        this.map.setTarget(this.divId);
        if (!isDefined(this.map.getView())) {
          this.map.setView(view);
        }
        this.map.getView().setMaxZoom(maxZoom);

        // only if the map was not created with default layers
        if (this.map.getLayers().getLength() === 0) {
          this.map.addLayer(new Group["default"]({
            'title': 'Base maps',
            layers: baseLayers
          }));
          this.map.addLayer(new Group["default"]({
            title: 'Overlays',
            layers: overlays
          }));
        }
      }

      // inits onLeftClick events
      // select interaction working on "click"
      var selectClick = new Select/* default */.Z({
        condition: condition/* click */.V4,
        style: null
      });
      var selectRightClick = new Select/* default */.Z({
        condition: function condition(e) {
          return e.type === 'contextmenu';
        },
        style: null
      });

      // select interaction working on "pointermove"
      var selectPointerMove = new Select/* default */.Z({
        condition: condition/* pointerMove */.MJ,
        style: null
      });
      this.map.addInteraction(selectClick);
      this.map.addInteraction(selectRightClick);
      this.map.addInteraction(selectPointerMove);
      this.projection = this.map.getView().getProjection();
      var that = this;
      selectRightClick.on('select', function (e) {
        if (e.selected.length > 0) {
          var feature = e.selected[0]; //the feature selected
          var mId = that.getMarkerId(feature.getId());
          if (!isDefined(mId)) {
            return;
          }
          var sId = that.getLayerId(feature.getId());
          if (!isDefined(sId)) {
            return;
          }
          var layer = that.getLayer(sId);
          if (!isDefined(layer)) {
            return;
          }
          that.onMarkerRightClick(mId, feature, layer.props, e);
        }
      });
      selectClick.on('select', function (e) {
        if (e.selected.length > 0) {
          var feature = e.selected[0]; //the feature selected
          var mId = that.getMarkerId(feature.getId());
          if (!isDefined(mId)) {
            return;
          }
          var sId = that.getLayerId(feature.getId());
          if (!isDefined(sId)) {
            return;
          }
          var layer = that.getLayer(sId);
          if (!isDefined(layer)) {
            return;
          }
          that.onMarkerLeftClick(mId, feature, layer.props, e);
        }
      });
      selectPointerMove.on('select', function (e) {
        if (e.selected.length > 0) {
          var feature = e.selected[0]; //the feature selected
          var mId = that.getMarkerId(feature.getId());
          if (!isDefined(mId)) {
            return;
          }
          var sId = that.getLayerId(feature.getId());
          if (!isDefined(sId)) {
            return;
          }
          var layer = that.getLayer(sId);
          if (!isDefined(layer)) {
            return;
          }
          that.onMarkerHover(mId, feature, layer.props, e);
        }
      });
      this.vectorSource = new Vector/* default */.Z({
        wrapX: false,
        features: []
      });
      this.vectorMarkerLayer = new layer_Vector/* default */.Z({
        source: this.vectorSource
      });
      this.vectorMarkerLayer.setZIndex(1);
      this.map.addLayer(this.vectorMarkerLayer);
      this.map.updateSize();
    }

    /**
     * Gets the list of default layers.
     * @return {Array}
     */
  }, {
    key: "getDefaultLayers",
    value: function getDefaultLayers() {
      var osm = new Tile/* default */.Z({
        source: new OSM/* default */.Z()
      });
      return [osm];
    }
  }, {
    key: "onResize",
    value: function onResize() {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(OpenLayerView.prototype), "onResize", this).call(this);
      if (isDefined(this.map) && this.map !== null) {
        this.map.updateSize();
      }
    }

    // ----------------------------------------------------//
    // ---------------------- LAYERS ---------------------//
    // --------------------------------------------------//

    /**
     * Add a marker to the map.
     * @param {Object} properties
     * @param {Number} properties.lon
     * @param {Number} properties.lat
     * @param {String} properties.icon - path of the icon
     * @param {Number} properties.orientation - orientation in degree
     * @param {String} properties.id - the id of the new created marker: layer.id$layer.markerId
     * @return {Object} the new marker object
     */
  }, {
    key: "addMarker",
    value: function addMarker(properties) {
      //create marker
      if (isDefined(this.map) && this.map !== null) {
        var marker = new Point/* default */.Z((0,proj/* transform */.vs)([properties.location.x, properties.location.y], 'EPSG:4326', this.projection));
        var markerFeature = new Feature/* default */.Z({
          geometry: marker,
          name: 'Marker' //TODO
        });

        if (isDefined(properties.icon) && properties.icon !== null) {
          var iconStyle = new Style/* default */.ZP({
            image: new Icon/* default */.Z({
              opacity: properties.iconOpacity,
              src: properties.icon,
              anchor: properties.iconAnchor,
              anchorYUnits: 'pixels',
              anchorXUnits: 'pixels',
              rotation: properties.orientation.heading * Math.PI / 180,
              scale: properties.iconScale,
              size: properties.iconSize,
              color: properties.iconColor
            }),
            zIndex: properties.zIndex,
            text: new Text/* default */.Z({
              text: properties.label,
              offsetX: properties.labelOffset[0],
              offsetY: properties.labelOffset[1],
              scale: properties.labelScale,
              fill: new Fill/* default */.Z({
                color: properties.labelColor
              })
            })
          });
          markerFeature.setStyle(iconStyle);
        }
        markerFeature.setId(properties.id + "$" + properties.markerId);
        this.vectorSource.addFeature(markerFeature);
        if (this.first) {
          this.first = false;
          this.map.getView().setCenter((0,proj/* transform */.vs)([properties.location.x, properties.location.y], 'EPSG:4326', this.projection));
          this.map.getView().setZoom(12);
        }
        this.vectorMarkerLayer.setZIndex(properties.zIndex);
        return markerFeature;
      }
      this.onResize();
      //TODO: exception
      return null;
    }

    /**
     * Updates the marker associated to the layer.
     * @param {PointMarkerLayer.props} props - The layer properties allowing the update of the marker
     */
  }, {
    key: "updateMarker",
    value: function () {
      var _updateMarker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(props) {
        var markerFeature, markerObj, lon, lat, coordinates, style, iconOpts;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (isDefined(props.location)) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              markerFeature = this.getMarker(props);
              if (!isDefined(markerFeature)) {
                // adds a new marker to the leaflet renderer
                markerObj = this.addMarker(props);
                this.addMarkerToLayer(props, markerObj);
              } else {
                // updates position
                lon = props.location.x;
                lat = props.location.y;
                if (!isNaN(lon) && !isNaN(lat)) {
                  coordinates = (0,proj/* transform */.vs)([lon, lat], 'EPSG:4326', this.projection);
                  markerFeature.getGeometry().setCoordinates(coordinates);
                }

                // update style
                style = markerFeature.getStyle(); // updates orientation
                if (props.icon !== null) {
                  // ol.style.Icon doesn't have a setSrc method so you would need to create one for each source.
                  // Then either set that in your ol.style.Style as required
                  if (style.getImage().getSrc() !== props.icon || style.getImage().color !== props.iconColor) {
                    iconOpts = {
                      anchorYUnits: 'pixels',
                      anchorXUnits: 'pixels',
                      src: props.icon,
                      color: props.iconColor
                    };
                    style.setImage(new Icon/* default */.Z(iconOpts));
                  }

                  // console.log(style.getImage().iconImage_)
                  // updates icon
                  style.getImage().setOpacity(props.iconOpacity);
                  style.getImage().setScale(props.iconScale);
                  style.getText().setText(props.label);
                  style.getText().setOffsetX(props.labelOffset[0]);
                  style.getText().setOffsetY(props.labelOffset[1]);
                  style.getText().setScale(props.labelScale);
                  style.getText().getFill().setColor(props.labelColor);
                  style.setZIndex(props.zIndex);
                  style.getImage().setAnchor(props.iconAnchor);
                  style.getImage().setRotation(props.orientation.heading * Math.PI / 180);
                }
              }
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function updateMarker(_x) {
        return _updateMarker.apply(this, arguments);
      }
      return updateMarker;
    }()
    /**
     * Abstract method to remove a marker from its corresponding layer.
     * This is library dependent.
     * @param {Object} marker - The Map marker object
     */
  }, {
    key: "removeMarkerFromLayer",
    value: function removeMarkerFromLayer(marker) {
      this.vectorSource.removeFeature(marker);
    }

    /**
     * Add a polyline to the map.
     * @param {Object} properties
     */
  }, {
    key: "addPolyline",
    value: function addPolyline(properties) {
      var polylinePoints = [];
      var locations = properties.locations;
      for (var i = 0; i < locations.length; i++) {
        polylinePoints.push((0,proj/* transform */.vs)([locations[i].x, locations[i].y], 'EPSG:4326', this.projection));
      }

      //create path
      var pathGeometry = new LineString/* default */.Z(polylinePoints);
      var feature = new Feature/* default */.Z({
        geometry: pathGeometry,
        name: 'Line'
      });
      var source = new Vector/* default */.Z({
        features: [feature]
      });
      var vectorPathLayer = new layer_Vector/* default */.Z({
        title: properties.name,
        source: source,
        style: new Style/* default */.ZP({
          fill: new Fill/* default */.Z({
            color: properties.color
          }),
          stroke: new Stroke/* default */.Z({
            color: properties.color,
            width: properties.weight
          })
        })
      });
      vectorPathLayer.setZIndex(0);
      this.map.addLayer(vectorPathLayer);
      return vectorPathLayer;
    }

    /**
     * Updates the polyline associated to the layer.
     * @param {PolylineLayer.properties} props - The layer allowing the update of the polyline
     */
  }, {
    key: "updatePolyline",
    value: function () {
      var _updatePolyline = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props) {
        var polyline, vectorSource, polylinePoints, locations, i, style;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!(!isDefined(props.locations) || props.locations.length < 2)) {
                _context2.next = 2;
                break;
              }
              return _context2.abrupt("return");
            case 2:
              polyline = this.getPolyline(props);
              if (!isDefined(polyline)) {
                // removes the layer
                polyline = this.addPolyline(props);
                this.addPolylineToLayer(props, polyline);
              } else {
                vectorSource = polyline.getSource(); // update locations
                polylinePoints = [];
                locations = props.locations;
                if (isDefined(locations) && locations.length > 0) {
                  for (i = 0; i < locations.length; i++) {
                    polylinePoints.push((0,proj/* transform */.vs)([locations[i].x, locations[i].y], 'EPSG:4326', this.projection));
                  }
                  vectorSource.getFeatures()[0].getGeometry().setCoordinates(polylinePoints);
                }

                // update style
                style = polyline.getStyle();
                style.getStroke().setColor(props.color);
                style.getStroke().setWidth(props.weight);
                style.getFill().setColor(props.color);
              }
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updatePolyline(_x2) {
        return _updatePolyline.apply(this, arguments);
      }
      return updatePolyline;
    }()
    /**
     * Abstract method to remove a polyline from its corresponding layer.
     * This is library dependant.
     * @param {Object} polyline - The Map polyline object
     */
  }, {
    key: "removePolylineFromLayer",
    value: function removePolylineFromLayer(polyline) {
      this.map.removeLayer(polyline);
    }

    /**
     * Add a polygon to the map.
     * @param {Object} properties
     */
  }, {
    key: "addPolygon",
    value: function addPolygon(properties) {
      var polygonPoints = [];
      var vertices = properties.vertices;
      for (var i = 0; i < vertices.length - 1; i = i + 2) {
        polygonPoints.push((0,proj/* transform */.vs)([vertices[i], vertices[i + 1]], 'EPSG:4326', this.projection));
      }
      //create path
      var pathGeometry = new Polygon/* default */.ZP([polygonPoints]);
      var feature = new Feature/* default */.Z({
        geometry: pathGeometry,
        name: 'Polygon'
      });
      var source = new Vector/* default */.Z({
        features: [feature]
      });
      var vectorPolygonLayer = new layer_Vector/* default */.Z({
        title: properties.name,
        source: source,
        style: new Style/* default */.ZP({
          fill: new Fill/* default */.Z({
            color: properties.color
          }),
          stroke: new Stroke/* default */.Z({
            color: properties.color,
            width: properties.outlineWidth
          })
        })
      });
      vectorPolygonLayer.setZIndex(0);
      this.map.addLayer(vectorPolygonLayer);
      return vectorPolygonLayer;
    }

    /**
     * Updates the polygon associated to the layer.
     * @param {Object} props - The layer allowing the update of the polygon
     */
  }, {
    key: "updatePolygon",
    value: function () {
      var _updatePolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(props) {
        var polygon, vectorSource, polygonPoints, vertices, i, style;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              polygon = this.getPolygon(props);
              if (!isDefined(polygon)) {
                // removes the layer
                polygon = this.addPolygon(props);
                this.addPolygonToLayer(props, polygon);
              } else {
                vectorSource = polygon.getSource(); // update locations
                polygonPoints = [];
                vertices = props.vertices;
                if (isDefined(vertices) && vertices.length > 0) {
                  for (i = 0; i < vertices.length - 1; i = i + 2) {
                    polygonPoints.push((0,proj/* transform */.vs)([vertices[i], vertices[i + 1]], 'EPSG:4326', this.projection));
                  }
                  vectorSource.getFeatures()[0].getGeometry().setCoordinates([polygonPoints]);
                }
                // update style
                style = polygon.getStyle();
                style.getStroke().setColor(props.outlineColor);
                style.getStroke().setWidth(props.outlineWidth);
                style.getFill().setColor(props.color);
              }
            case 2:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function updatePolygon(_x3) {
        return _updatePolygon.apply(this, arguments);
      }
      return updatePolygon;
    }()
    /**
     * Abstract method to remove a polygon from its corresponding layer.
     * This is library dependant.
     * @param {Object} polygon - The Map polygon object
     */
  }, {
    key: "removePolygonFromLayer",
    value: function removePolygonFromLayer(polygon) {
      this.map.removeLayer(polygon);
    }
  }, {
    key: "addEllipse",
    value: function addEllipse(properties) {
      var position = properties.position;
      var semiMajorAxis = properties.semiMajorAxis;
      var semiMinorAxis = properties.semiMinorAxis;
      var projPosition = (0,proj/* transform */.vs)([position.x, position.y], 'EPSG:4326', this.projection);
      var coordinates = [];
      var radinas = Math.PI / 180;
      for (var angle = 1; angle <= 360; angle++) {
        var px = semiMajorAxis * Math.cos(radinas * angle);
        var py = semiMinorAxis * Math.sin(radinas * angle);
        var pxii = projPosition[0] + px;
        var pyii = projPosition[1] + py;
        coordinates.push([pxii, pyii]);
      }

      //create path
      var pathGeometry = new Polygon/* default */.ZP([coordinates]);
      var feature = new Feature/* default */.Z({
        geometry: pathGeometry,
        name: 'Ellipse'
      });
      feature.setId(properties.id + "$" + properties.markerId);
      var source = new Vector/* default */.Z({
        features: [feature]
      });
      var vectorEllipseLayer = new layer_Vector/* default */.Z({
        title: properties.name,
        source: source,
        style: new Style/* default */.ZP({
          fill: new Fill/* default */.Z({
            color: properties.color
          }),
          stroke: new Stroke/* default */.Z({
            color: properties.color,
            width: 1
          })
        })
      });
      vectorEllipseLayer.setZIndex(properties.zIndex);
      this.map.addLayer(vectorEllipseLayer);
      return vectorEllipseLayer;
    }
  }, {
    key: "updateEllipse",
    value: function () {
      var _updateEllipse = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(props) {
        var ellipse, vectorSource, position, semiMajorAxis, semiMinorAxis, projPosition, coordinates, radinas, nbPoints, precision, angle, px, py, pxii, pyii, ellipseFeature, style;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (isDefined(props.position)) {
                _context4.next = 2;
                break;
              }
              return _context4.abrupt("return");
            case 2:
              ellipse = this.getEllipse(props);
              if (!isDefined(ellipse)) {
                // removes the layer
                ellipse = this.addEllipse(props);
                this.addEllipseToLayer(props, ellipse);
              } else {
                // updates position
                if (!isNaN(props.position.x) && !isNaN(props.position.y)) {
                  vectorSource = ellipse.getSource();
                  position = props.position;
                  semiMajorAxis = props.semiMajorAxis;
                  semiMinorAxis = props.semiMinorAxis;
                  projPosition = (0,proj/* transform */.vs)([position.x, position.y], 'EPSG:4326', this.projection);
                  coordinates = [];
                  radinas = Math.PI / 180;
                  nbPoints = 100;
                  precision = 360 / nbPoints;
                  for (angle = 1; angle <= 360; angle += precision) {
                    px = semiMajorAxis * Math.cos(radinas * angle);
                    py = semiMinorAxis * Math.sin(radinas * angle);
                    pxii = projPosition[0] + px;
                    pyii = projPosition[1] + py;
                    coordinates.push([pxii, pyii]);
                  }
                  ellipseFeature = vectorSource.getFeatures()[0];
                  ellipseFeature.getGeometry().setCoordinates([coordinates]);
                  style = ellipse.getStyle();
                  style.getStroke().setColor(props.color);
                  style.getStroke().setWidth(1);
                  style.getFill().setColor(props.color);
                }
              }
            case 4:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function updateEllipse(_x4) {
        return _updateEllipse.apply(this, arguments);
      }
      return updateEllipse;
    }()
  }, {
    key: "removeEllipseFromLayer",
    value: function removeEllipseFromLayer(ellipse) {
      this.map.removeLayer(ellipse);
    }
  }]);
  return OpenLayerView;
}(map_MapView);
/* harmony default export */ var map_OpenLayerView = (OpenLayerView);
// EXTERNAL MODULE: ./node_modules/mapbox-gl/dist/mapbox-gl.js
var mapbox_gl = __webpack_require__(6158);
var mapbox_gl_default = /*#__PURE__*/__webpack_require__.n(mapbox_gl);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/MapboxView.js










/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






/**
 * This class is in charge of displaying GPS/orientation data by adding a marker to the Mapbox-gl.js framework.
 * @extends MapView
 */
var MapboxView = /*#__PURE__*/function (_MapView) {
  (0,inherits/* default */.Z)(MapboxView, _MapView);
  var _super = (0,createSuper/* default */.Z)(MapboxView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {String} properties.container - The div element to attach to
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Object} [properties.mapProperties] - the [map properties]{@link https://docs.mapbox.com/mapbox-gl-js/api/map/}
   * @param {String} [properties.mapProperties.container='map'] - the default div container
   * @param {String} [properties.mapProperties.style='https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json'] - the default style URL
   * @param {Number} [properties.mapProperties.zoom=7] - the default zoom value
   * @param {Number[]} [properties.mapProperties.center=[0,0]] - the default center value
   * @param {Number[]} [properties.mapProperties.antialias=true] - create the gl context with MSAA antialiasing, so custom layers are antialiased
   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker
   *
   */
  function MapboxView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, MapboxView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['marker', 'polyline', 'polygon']
    }, properties));
    _this.loaded = false;
    _this.first = false;
    return _this;
  }

  //---------- MAP SETUP --------------//
  /**
   * @private
   */
  (0,createClass/* default */.Z)(MapboxView, [{
    key: "initMap",
    value: function initMap(options) {
      this.map = new mapbox_gl.Map((0,objectSpread2/* default */.Z)({
        container: 'map',
        style: 'https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json',
        center: [0, 0],
        zoom: 2,
        antialias: true
      }, options.mapProperties));
      var that = this;
      this.map.on('load', function () {
        that.loaded = true;
      });
    }
  }, {
    key: "beforeAddingItems",
    value: function beforeAddingItems(options) {
      // inits the map
      this.initMap(options);
    }

    /**
     * Updates the marker associated to the layer.
     * @param {PointMarkerLayer.props} props - The layer properties allowing the update of the marker
     */
  }, {
    key: "updateMarker",
    value: function () {
      var _updateMarker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(props) {
        var marker, markerObj, _marker, lon, lat, name;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (this.loaded) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              marker = this.getMarker(props);
              if (!isDefined(marker)) {
                // adds a new marker to the leaflet renderer
                markerObj = this.addMarker(props);
                this.addMarkerToLayer(props, markerObj);
              } else {
                _marker = this.getMarker(props); // updates position
                lon = props.location.x;
                lat = props.location.y;
                _marker.setLngLat([lon, lat]).setRotation(props.orientation.heading);

                // update style
                _marker.getElement().style.backgroundImage = "url(".concat(props.icon, ")");
                _marker.getElement().style.width = props.iconSize[0] + 'px';
                _marker.getElement().style.height = props.iconSize[1] + 'px';
                if (isDefined(props.orientation)) {
                  _marker.setRotation(props.orientation.heading);
                }
                name = 'Marker';
                if (isDefined(props.name) && props.name !== '') {
                  name = props.name;
                } else if (isDefined(props.label) && props.label !== '') {
                  name = props.label;
                }
                _marker.getPopup().setHTML("<strong>".concat(name, "</strong>"));
              }
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function updateMarker(_x) {
        return _updateMarker.apply(this, arguments);
      }
      return updateMarker;
    }()
    /**
     * Updates the polyline associated to the layer.
     * @param {Polyline.props} props - The layer allowing the update of the polyline
     */
  }, {
    key: "updatePolyline",
    value: function () {
      var _updatePolyline = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props) {
        var that, polyline, polylineObj, sourceId, layerId, polylineFeature, dataId, locationsPts, locations, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              that = this;
              if (this.loaded) {
                _context2.next = 3;
                break;
              }
              return _context2.abrupt("return");
            case 3:
              polyline = this.getPolyline(props);
              if (!isDefined(polyline)) {
                // adds a new marker to the leaflet renderer
                polylineObj = this.addPolyline(props);
                this.addPolylineToLayer(props, polylineObj);
              } else {
                sourceId = polyline.source;
                layerId = polyline.id;
                polylineFeature = this.map.getSource(sourceId);
                dataId = polylineFeature.id;
                locationsPts = []; // update locations
                locations = props.locations;
                for (i = 0; i < locations.length; i++) {
                  locationsPts.push([locations[i].x, locations[i].y]);
                }
                polylineFeature.setData({
                  'id': dataId,
                  'type': 'FeatureCollection',
                  'features': [{
                    'type': 'Feature',
                    'geometry': {
                      'type': 'LineString',
                      'coordinates': locationsPts
                    }
                  }]
                });
                this.map.setPaintProperty(layerId, 'line-color', props.color);
                this.map.setPaintProperty(layerId, 'line-width', props.weight);
                this.map.setPaintProperty(layerId, 'line-opacity', props.opacity);
              }
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updatePolyline(_x2) {
        return _updatePolyline.apply(this, arguments);
      }
      return updatePolyline;
    }()
    /**
     * Gets the list of default layers.
     * @return {Array}
     */
  }, {
    key: "getDefaultLayers",
    value: function getDefaultLayers() {}

    /**
     * Add a marker to the map.
     * @param {Object} properties
     * @param {Number} properties.lon
     * @param {Number} properties.lat
     * @param {Number} properties.label
     * @param {String} properties.icon - path of the icon
     * @param {Number} properties.orientation - orientation in degree
     * @param {String} properties.id - the id of the new created marker: layer.id$layer.markerId
     * @return {Object} the new marker object
     */
  }, {
    key: "addMarker",
    value: function addMarker(properties) {
      if (!this.loaded) {
        // map is not loaded yet
        return;
      }
      var name = 'Marker';
      if (isDefined(properties.name)) {
        name = properties.name;
      } else if (isDefined(properties.label)) {
        name = properties.label;
      }
      var el = document.createElement('div');
      el.className = 'marker';
      el.style.backgroundImage = "url(".concat(properties.icon, ")");
      el.style.width = properties.iconSize[0] + 'px';
      el.style.height = properties.iconSize[1] + 'px';
      el.style.backgroundSize = '100%';
      var marker = new mapbox_gl.Marker({
        element: el
      }).setLngLat([properties.location.x, properties.location.y]).setRotation(properties.orientation.heading).setPopup(new mapbox_gl.Popup().setHTML("<strong>".concat(name, "</strong>"))).addTo(this.map);
      marker.id = properties.id + "$" + properties.markerId;
      if (!this.first && this.properties.autoZoomOnFirstMarker) {
        this.map.flyTo({
          center: [properties.location.x, properties.location.y],
          zoom: properties.zoomLevel,
          speed: 3.5,
          curve: 2,
          easing: function easing(t) {
            return t;
          }
        });
        this.first = false;
      }
      return marker;
    }

    /**
     * Abstract method to remove a marker from its corresponding layer.
     * This is library dependent.
     * @param {Object} marker - The Map marker object
     */
  }, {
    key: "removeMarkerFromLayer",
    value: function removeMarkerFromLayer(marker) {
      if (!this.loaded) {
        // map is not loaded yet
        return;
      }
      marker.remove();
    }

    /**
     * Abstract method to remove a polyline from its corresponding layer.
     * This is library dependant.
     * @param {Object} polyline - The Map polyline object
     */
  }, {
    key: "removePolylineFromLayer",
    value: function removePolylineFromLayer(polyline) {
      this.map.removeLayer(polyline.id).removeSource(polyline.source);
    }

    /**
     * Abstract method to remove a polygon from its corresponding layer.
     * This is library dependant.
     * @param {Object} polygon - The Map polygon object
     */
  }, {
    key: "removePolygonFromLayer",
    value: function removePolygonFromLayer(polygon) {
      this.map.removeLayer(polygon.id + '-outline');
      this.map.removeLayer(polygon.id).removeSource(polygon.source);
    }

    /**
     * Add a polyline to the map.
     * @param {locations} locations - the coordinates [{x, y}]
     * @param {Object} properties
     * @param {String} properties.color
     * @param {Number} properties.weight
     * @param {String} properties.name
     * @return {string} the id of the new created polyline
     */
  }, {
    key: "addPolyline",
    value: function addPolyline(properties) {
      if (!this.loaded) {
        // map is not loaded yet
        return;
      }
      var layerId = randomUUID();
      var dataId = randomUUID();
      var sourceId = randomUUID();
      var geojson = {
        'id': dataId,
        'type': 'FeatureCollection',
        'features': [{
          'type': 'Feature',
          'geometry': {
            'type': 'LineString',
            'coordinates': [[0, 0]]
          }
        }]
      };
      this.map.addSource(sourceId, {
        'type': 'geojson',
        'data': geojson
      });

      // add the line which will be modified in the animation
      var layer = {
        'id': layerId,
        'type': 'line',
        'source': sourceId,
        'layout': {
          'line-cap': 'round',
          'line-join': 'round'
        },
        'paint': {
          'line-color': properties.color,
          'line-width': properties.weight,
          'line-opacity': properties.opacity
        }
      };
      this.map.addLayer(layer);
      return layer;
    }

    /**
     * Updates the polygon associated to the layer.
     * @param {Polygon.props} props - The layer allowing the update of the polygon
     */
  }, {
    key: "updatePolygon",
    value: function () {
      var _updatePolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(props) {
        var polygon, sourceId, layerId, polygonFeature, dataId, polygonPoints, vertices, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (this.loaded) {
                _context3.next = 2;
                break;
              }
              return _context3.abrupt("return");
            case 2:
              polygon = this.getPolygon(props);
              if (!isDefined(polygon)) {
                // adds a new marker to the leaflet renderer
                polygon = this.addPolygon(props);
                this.addPolygonToLayer(props, polygon);
              } else {
                sourceId = polygon.source;
                layerId = polygon.id;
                polygonFeature = this.map.getSource(sourceId);
                dataId = polygonFeature.id; // update locations
                polygonPoints = [];
                vertices = props.vertices;
                if (isDefined(vertices) && vertices.length > 0) {
                  for (i = 0; i < vertices.length - 1; i = i + 2) {
                    polygonPoints.push([vertices[i], vertices[i + 1]]);
                  }
                }
                polygonFeature.setData({
                  'id': dataId,
                  'type': 'FeatureCollection',
                  'features': [{
                    'type': 'Feature',
                    'geometry': {
                      'type': 'Polygon',
                      'coordinates': [polygonPoints]
                    }
                  }]
                });
                this.map.setPaintProperty(layerId, 'fill-color', props.color);
                this.map.setPaintProperty(layerId, 'fill-opacity', props.opacity);

                // change outline
                this.map.setPaintProperty(layerId + '-outline', 'line-color', props.outlineColor);
                this.map.setPaintProperty(layerId + '-outline', 'line-width', props.outlineWidth);
              }
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function updatePolygon(_x3) {
        return _updatePolygon.apply(this, arguments);
      }
      return updatePolygon;
    }()
    /**
     * Add a polygon to the map.
     * @param {Object} properties
     */
  }, {
    key: "addPolygon",
    value: function addPolygon(properties) {
      var id = properties.id + "$" + properties.polygonId;

      // update locations
      var polygonPoints = [];
      var vertices = properties.vertices;
      if (isDefined(vertices) && vertices.length > 0) {
        for (var i = 0; i < vertices.length - 1; i = i + 2) {
          polygonPoints.push([vertices[i], vertices[i + 1]]);
        }
      }
      var layerId = randomUUID();
      var dataId = randomUUID();
      var sourceId = randomUUID();
      var geojson = {
        'id': dataId,
        'type': 'FeatureCollection',
        'features': [{
          'type': 'Feature',
          'geometry': {
            'type': 'Polygon',
            'coordinates': [polygonPoints]
          }
        }]
      };
      this.map.addSource(sourceId, {
        'type': 'geojson',
        'data': geojson
      });

      // add the line which will be modified in the animation
      var layer = {
        'id': layerId,
        'type': 'fill',
        'source': sourceId,
        'layout': {},
        'paint': {
          'fill-color': properties.color,
          'fill-opacity': properties.opacity
        }
      };

      // Add an outline around the polygon.
      this.map.addLayer(layer);

      // Add an outline around the polygon.
      this.map.addLayer({
        'id': layerId + '-outline',
        'type': 'line',
        'source': sourceId,
        'layout': {},
        'paint': {
          'line-color': properties.outlineColor,
          'line-width': properties.outlineWidth
        }
      });
      return layer;
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }]);
  return MapboxView;
}(map_MapView);
/* harmony default export */ var map_MapboxView = (MapboxView);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.sort.js
var es_array_sort = __webpack_require__(2707);
// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/views/map-view.js + 8 modules
var map_view = __webpack_require__(24458);
// EXTERNAL MODULE: ./node_modules/@deck.gl/core/dist/esm/lib/deck.js + 39 modules
var deck = __webpack_require__(91024);
// EXTERNAL MODULE: ./node_modules/@deck.gl/layers/dist/esm/icon-layer/icon-layer.js + 3 modules
var icon_layer = __webpack_require__(13418);
// EXTERNAL MODULE: ./node_modules/@deck.gl/layers/dist/esm/bitmap-layer/bitmap-layer.js + 3 modules
var bitmap_layer = __webpack_require__(13863);
// EXTERNAL MODULE: ./node_modules/@deck.gl/layers/dist/esm/path-layer/path-layer.js + 4 modules
var path_layer = __webpack_require__(41990);
// EXTERNAL MODULE: ./node_modules/@deck.gl/layers/dist/esm/polygon-layer/polygon-layer.js
var polygon_layer = __webpack_require__(33121);
// EXTERNAL MODULE: ./node_modules/@deck.gl/geo-layers/dist/esm/tile-layer/tile-layer.js + 38 modules
var tile_layer = __webpack_require__(66105);
// EXTERNAL MODULE: ./node_modules/@deck.gl/mesh-layers/dist/esm/scenegraph-layer/scenegraph-layer.js + 15 modules
var scenegraph_layer = __webpack_require__(45217);
// EXTERNAL MODULE: ./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js
var register_loaders = __webpack_require__(6228);
// EXTERNAL MODULE: ./node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js + 51 modules
var gltf_loader = __webpack_require__(18880);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/DeckGlView.js
















/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/












/**
 * This class is in charge of displaying GPS/orientation data by adding a marker to the Deck.gl Map object.
 * @extends MapView
 */
var DeckGlView = /*#__PURE__*/function (_MapView) {
  (0,inherits/* default */.Z)(DeckGlView, _MapView);
  var _super = (0,createSuper/* default */.Z)(DeckGlView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {String} properties.container - The div element to attach to
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker
   * @param {Object} [properties.deckProps={}] - the properties of the [Deck]{@link https://deck.gl/docs/api-reference/core/deck} object
   *
   */
  function DeckGlView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, DeckGlView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['marker', 'polyline', 'polygon']
    }, properties));
    (0,register_loaders/* registerLoaders */.fh)(gltf_loader/* GLTFLoader */.E);
    var cssClass = document.getElementById(_this.divId).className;
    document.getElementById(_this.divId).setAttribute("class", cssClass + " " + _this.css);
    _this.autoZoomOnFirstMarker = false;
    if (isDefined(properties) && isDefined(properties.autoZoomOnFirstMarker)) {
      _this.autoZoomOnFirstMarker = properties.autoZoomOnFirstMarker;
    }
    return _this;
  }
  (0,createClass/* default */.Z)(DeckGlView, [{
    key: "beforeAddingItems",
    value: function beforeAddingItems(options) {
      // inits the map
      this.initMap(options);
    }

    //---------- MAP SETUP --------------//
    /**
     *
     * @private
     */
  }, {
    key: "initMap",
    value: function initMap(options) {
      this.INITIAL_VIEW_STATE = {
        longitude: 0,
        latitude: 0,
        zoom: 2,
        bearing: 0,
        pitch: 0
      };
      var canvasElt = document.createElement('canvas');
      canvasElt.setAttribute('id', randomUUID());
      canvasElt.setAttribute('style', 'width:100%;height:100%;position:relative;');
      var domNode = document.getElementById(this.divId);
      domNode.appendChild(canvasElt);

      // https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{x}/{y}
      // https://c.tile.openstreetmap.org/{z}/{x}/{y}.png
      this.deckLayers = [];
      if (isDefined(options) && isDefined(options.deckProps) && isDefined(options.deckProps.layers)) {
        for (var i = 0; i < options.deckProps.layers.length; i++) {
          var id = options.deckProps.layers[i].id ? options.deckProps.layers[i].id : 'base_' + id;
          this.deckLayers.push(options.deckProps.layers[i]);
        }
      } else {
        this.deckLayers.push(new tile_layer/* default */.Z({
          id: 'base',
          // https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Tile_servers
          data: 'https://c.tile.openstreetmap.org/{z}/{x}/{y}.png',
          minZoom: 0,
          maxZoom: 19,
          tileSize: 256,
          renderSubLayers: function renderSubLayers(props) {
            var _props$tile$bbox = props.tile.bbox,
              west = _props$tile$bbox.west,
              south = _props$tile$bbox.south,
              east = _props$tile$bbox.east,
              north = _props$tile$bbox.north;
            return new bitmap_layer/* default */.Z(props, {
              data: null,
              image: props.data,
              bounds: [west, south, east, north]
            });
          }
        }));
      }
      var deckProps = {
        canvas: canvasElt.id,
        width: '100%',
        height: '100%',
        controller: true,
        views: [new map_view/* default */.Z()],
        initialViewState: this.INITIAL_VIEW_STATE,
        onViewStateChange: function onViewStateChange(_ref) {
          var viewState = _ref.viewState;
        },
        layers: this.deckLayers
      };

      // overrides default conf by user defined one
      if (isDefined(options) && isDefined(deckProps)) {
        deckProps = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, deckProps), options.deckProps);
      }
      this.INITIAL_VIEW_STATE = deckProps.initialViewState;
      this.deckgl = new deck/* default */.Z(deckProps);
    }

    /**
     * Updates the marker associated to the layer.
     * @param {PointMarkerLayer.props} props - The layer properties allowing the update of the marker
     */
  }, {
    key: "updateMarker",
    value: function () {
      var _updateMarker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(props) {
        var _this2 = this;
        var id, mId, iconColor, iconLayer, extraProps;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              id = props.id + '$' + props.markerId;
              mId = props.markerId;
              iconColor = props.iconColor;
              if (isDefined(iconColor)) {
                iconColor = hex2rgb(props.iconColor);
              } else {
                iconColor = "#000000";
              }
              if (props.icon.endsWith('glb')) {
                iconLayer = new scenegraph_layer/* default */.Z({
                  id: id,
                  data: [{
                    position: [props.location.x, props.location.y, props.location.z]
                  }],
                  pickable: true,
                  scenegraph: props.icon,
                  getPosition: function getPosition(d) {
                    return d.position;
                  },
                  getOrientation: function getOrientation(d) {
                    return [0, props.orientation.yaw, 90];
                  },
                  _animations: {
                    '*': {
                      speed: 5
                    }
                  },
                  sizeScale: props.iconScale,
                  _lighting: 'pbr'
                });
              } else {
                // in deck we create a new layer everytime => reactive programming
                iconLayer = new icon_layer/* default */.Z({
                  id: id,
                  data: [{
                    position: [props.location.x, props.location.y, props.location.z]
                  }],
                  pickable: true,
                  // iconAtlas and iconMapping are required
                  // getIcon: return a string
                  iconAtlas: props.icon,
                  iconMapping: {
                    marker: {
                      x: 0,
                      y: 0,
                      anchorX: props.iconAnchor[0],
                      anchorY: props.iconAnchor[1],
                      width: props.iconSize[0],
                      height: props.iconSize[1],
                      mask: isDefined(props.iconColor) && props.iconColor !== '#000000'
                    }
                  },
                  getIcon: function getIcon(d) {
                    return 'marker';
                  },
                  getPosition: function getPosition(d) {
                    return d.position;
                  },
                  sizeScale: props.iconScale,
                  getSize: function getSize(d) {
                    return props.iconSize[1];
                  },
                  getColor: function getColor(d) {
                    return iconColor;
                  },
                  onHover: function onHover(info, event) {
                    return _this2.onMarkerHover(mId, info, props, event);
                  },
                  onClick: function onClick(info, event) {
                    return event.leftButton ? _this2.onMarkerLeftClick(mId, info, props, event) : _this2.onMarkerRightClick(mId, info, props, event);
                  },
                  zIndex: props.zIndex
                });
              }

              // is going to create or update the current entry into the layer map
              this.addMarkerToLayer(props, iconLayer);
              extraProps = {};
              if (this.autoZoomOnFirstMarker) {
                this.autoZoomOnFirstMarker = false;
                // Zoom to the object
                extraProps.initialViewState = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.INITIAL_VIEW_STATE), {}, {
                  longitude: props.location.x,
                  latitude: props.location.y,
                  zoom: props.zoomLevel
                });
              }
              this.render(extraProps);
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function updateMarker(_x) {
        return _updateMarker.apply(this, arguments);
      }
      return updateMarker;
    }()
    /**
     * Updates the polyline associated to the layer.
     * @param {Polyline} layer - The layer allowing the update of the polyline
     */
  }, {
    key: "updatePolyline",
    value: function () {
      var _updatePolyline = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(layer) {
        var id, path, PATH_DATA, pathLayer;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              id = layer.id + '$' + layer.polylineId;
              path = layer.locations.map(function (coordinate) {
                return [coordinate.x, coordinate.y, coordinate.z || 1];
              });
              PATH_DATA = [{
                weight: layer.weight,
                "name": layer.id,
                "color": this.rgbaToArray(layer.color),
                "path": path
              }];
              pathLayer = new path_layer/* default */.Z({
                id: id,
                data: PATH_DATA,
                widthUnits: 'pixels',
                widthMinPixels: 5,
                getPath: function getPath(d) {
                  return d.path;
                },
                getColor: function getColor(d) {
                  return d.color;
                },
                getWidth: function getWidth(d) {
                  return d.weight;
                }
              });
              this.addPolylineToLayer(layer, pathLayer);
              this.render({});
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updatePolyline(_x2) {
        return _updatePolyline.apply(this, arguments);
      }
      return updatePolyline;
    }()
    /**
     * Updates the polyline associated to the layer.
     * @param {Polyline} layer - The layer allowing the update of the polyline
     */
  }, {
    key: "updatePolygon",
    value: function () {
      var _updatePolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(layer) {
        var id, polygonPoints, vertices, i, outlineColor, color, PATH_DATA, pathLayer;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              id = layer.id + '$' + layer.polygonId; // update locations
              polygonPoints = [];
              vertices = layer.vertices;
              if (isDefined(vertices) && vertices.length > 0) {
                for (i = 0; i < vertices.length - 1; i = i + 2) {
                  polygonPoints.push([vertices[i], vertices[i + 1]]);
                }
              }
              outlineColor = rgbaToArray(layer.outlineColor).map(function (val, index, arr) {
                if (index >= 3) {
                  return parseInt(val * 255);
                } else {
                  return val;
                }
              });
              color = rgbaToArray(layer.color).map(function (val, index, arr) {
                if (index >= 3) {
                  return parseInt(val * 255);
                } else {
                  return val;
                }
              });
              PATH_DATA = [{
                outlineWidth: layer.outlineWidth,
                outlineColor: outlineColor,
                name: layer.label,
                color: color,
                contour: [polygonPoints]
              }];
              pathLayer = new polygon_layer/* default */.Z({
                id: id,
                data: PATH_DATA,
                widthUnits: 'pixels',
                lineWidthMinPixels: 1,
                stroked: true,
                filled: true,
                getPolygon: function getPolygon(d) {
                  return d.contour;
                },
                getFillColor: function getFillColor(d) {
                  return d.color;
                },
                getLineWidth: function getLineWidth(d) {
                  return d.outlineWidth;
                },
                getLineColor: function getLineColor(d) {
                  return d.outlineColor;
                }
              });
              this.addPolygonToLayer(layer, pathLayer);
              this.render({});
            case 10:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function updatePolygon(_x3) {
        return _updatePolygon.apply(this, arguments);
      }
      return updatePolygon;
    }()
    /**
     * Override super method to render() at the end
     * @param {Object} marker - The Map marker object
     */
  }, {
    key: "removeMarker",
    value: function removeMarker(marker) {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(DeckGlView.prototype), "removeMarkers", this).call(this, marker);
      this.render({});
    }

    /**
     * Override super method to render() at the end
     * @param {Object} polyline - The Map polyline object
     */
  }, {
    key: "removePolylines",
    value: function removePolylines(polyline) {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(DeckGlView.prototype), "removePolylines", this).call(this, polyline);
      this.render({});
    }

    /**
     * Override super method to render() at the end
     * @param {Object} polygon - The Map polygon object
     */
  }, {
    key: "removePolygons",
    value: function removePolygons(polygon) {
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(DeckGlView.prototype), "removePolygons", this).call(this, polygon);
      this.render({});
    }

    /**
     * Inner method to render in the order the different deck.gl layers
     * @private
     * @param {Object} extraProps - Extra deck props
     */
  }, {
    key: "render",
    value: function render(extraProps) {
      var markers = this.getMarkers();
      var polylines = this.getPolylines();
      var polygons = this.getPolygons();

      // draw in order base -> polygons -> polylines -> markers
      markers.sort(function (a, b) {
        return a.props.zIndex > b.props.zIndex ? 1 : b.props.zIndex > a.props.zIndex ? -1 : 0;
      });
      var props = {
        layers: [].concat((0,toConsumableArray/* default */.Z)(this.deckLayers), (0,toConsumableArray/* default */.Z)(polygons), (0,toConsumableArray/* default */.Z)(polylines), (0,toConsumableArray/* default */.Z)(markers))
      };
      this.deckgl.setProps((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, extraProps), props));
    }
  }, {
    key: "rgbaToArray",
    value: function rgbaToArray(str) {
      if (Array.isArray(str)) {
        return str;
      }
      var startIdxValue = str.indexOf('(') + 1;
      var endIdxValue = str.indexOf(')');
      var values = str.substr(startIdxValue, endIdxValue - startIdxValue);
      var rgba = values.split(',').map(Number);
      rgba[3] = parseInt(rgba[3] * 100);
      return rgba;
    }
  }]);
  return DeckGlView;
}(map_MapView);
/* harmony default export */ var map_DeckGlView = (DeckGlView);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.flat.js
var es_array_flat = __webpack_require__(84944);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.unscopables.flat.js
var es_array_unscopables_flat = __webpack_require__(33792);
// EXTERNAL MODULE: ./node_modules/cesium/Source/Cesium.js + 1066 modules
var Cesium = __webpack_require__(83321);
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/shaders/ImageDrapingVS.js
/* harmony default export */ var ImageDrapingVS = ("attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec2 st;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}");
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/shaders/ImageDrapingFS.js
/* harmony default export */ var ImageDrapingFS = ("varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\n\nvec4 windowToEye(vec4 fragCoord)\n{\n    vec2 uv = fragCoord.xy / czm_viewport.zw;\n    float z_window = czm_unpackDepth(texture2D(czm_globeDepthTexture, uv));\n\n    if (z_window == 0.0)\n        discard;\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(fragCoord.xy, z_window);\n\n    return eyeCoordinate / eyeCoordinate.w;\n}\n\n// Camera model and frames are based on OpenCV conventions:\n// http://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html\n// we pass in a normalized intrinsic matrix as uniform so we can compute the normalized texture coordinates directly\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    // get fragment 3D pos in eye coordinates using depth buffer value at fragment location\n    vec4 v_posEC = windowToEye(gl_FragCoord);\n\n    // translate to video cam frame\n    vec4 camPosEC = czm_modelViewRelativeToEye * czm_translateRelativeToEye(camPosHigh_1, camPosLow_2);\n    vec4 v_posCam = v_posEC - camPosEC;\n\n    // rotate to video cam frame\n    vec3 lookRay = camAtt_3 * czm_inverseViewRotation3D * v_posCam.xyz;\n\n    // discard if behind camera\n    if (lookRay.z < 0.1)\n        discard;\n\n    // undistort\n    float xn = lookRay.x / lookRay.z;\n    float yn = lookRay.y / lookRay.z;\n    float k1 = camDistR_5[0];\n    float k2 = camDistR_5[1];\n    float k3 = camDistR_5[2];\n    float p1 = camDistT_6[0];\n    float p2 = camDistT_6[1];\n\n    float r2 = xn * xn+ yn * yn;\n    float r4 = r2 * r2;\n    float r6 = r4 * r2;\n    float xd = xn * (1. + k1 * r2 + k2 * r4 + k3 * r6) + 2. * p1 * xn * yn + p2 * (r2 + 2. * xn * xn);\n    float yd = yn * (1. + k1 * r2 + k2 * r4 + k3 * r6) + 2. * p2 * xn * yn + p1 * (r2 + 2. * yn * yn);\n\n    // project with pinhole model\n    vec3 st = camProj_4 * vec3(xd, yd, 1.);\n    st.y = 1.0 - st.y;\n\n    if (st.x < 0.0 || st.x > 1.0 || st.y < 0.0 || st.y > 1.0)\n        discard;\n\n    // get color from material\n    czm_materialInput materialInput;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = vec2(st.x, st.y);\n    czm_material material = czm_getMaterial(materialInput);\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n\n    //float depth = pow(v_posEC.z * 0.5 + 0.5, 8.0);\n    //gl_FragColor = vec4(depth, depth, depth, 1.0);\n}");
;// CONCATENATED MODULE: ../../osh-js/source/core/ui/layer/ImageDrapingLayer.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Sensia Software LLC. All Rights Reserved.

 Author: Alex Robin <alex.robin@sensiasoft.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * Enumeration of the ways that the camera's position and orientation can be
 * specified for a draped image.
 */
var ImageDrapingPositionMode = Object.freeze({
  /**
   * Constant indicating that the position provided to the draping layer is
   * in the form of a latitude (in degrees), longitude (in degrees), and
   * altitude above ellipsoid (in meters). This also indicates that platform
   * orientation is provided as heading, pitch, and roll, in degrees; and
   * gimbal orientation is provided as yaw, pitch, and roll, in degrees.
   */
  LONLATALT_WITH_EULER_ANGLES: 1,
  /**
   * Constant indicating that the position provided to the draping layer is
   * in the form of ECEF 3-D coordinates (in meters). This also indicates that
   * the platform and gimbal orientations are provided as 3x3 rotation
   * matrices.
   */
  ECEF_WITH_MATRICES: 2,
  /**
   * Constant indicating that the position provided to the draping layer is
   * in the form of ECEF 3-D coordinates (in meters). This also indicates that
   * the platform and gimbal orientations are provided as quaternions.
   */
  ECEF_WITH_QUATERNIONS: 3
});

/**
 * When gimbal orientation is applied, which order do we apply the rotations?
 * This only matters when the position mode is LONLATALT_WITH_EULER_ANGLES.
 */
var GimbalEulerAngleOrder = Object.freeze({
  YAW_PITCH_ROLL: 1,
  YAW_ROLL_PITCH: 2,
  PITCH_YAW_ROLL: 3,
  PITCH_ROLL_YAW: 4,
  ROLL_YAW_PITCH: 5,
  ROLL_PITCH_YAW: 6
});

/**
 * @extends Layer
 * @example
 import ImageDrapingLayer from 'core/ui/layer/ImageDrapingLayer.js';

 let imageDrapingLayer = new ImageDrapingLayer({
      getPlatformLocation: {
        dataSourceIds: [platformLocationDataSource.getId()],
        handler: function (rec) {
          return {
            x: rec.loc.lon,
            y: rec.loc.lat,
            z: rec.loc.alt - 184
          };
        }
      },
      getPlatformOrientation: {
        dataSourceIds: [platformOrientationDataSource.getId()],
        handler: function (rec) {
          return {
            heading : rec.attitude.yaw,
            pitch: rec.attitude.pitch,
            roll: rec.attitude.roll
          };
        }
      },
      getGimbalOrientation: {
        dataSourceIds: [gimbalOrientationDataSource.getId()],
        handler: function (rec) {
          return {
            heading : rec.attitude.yaw,
            pitch: rec.attitude.pitch,
            roll: rec.attitude.roll
          };
        }
      },
      cameraModel: {
        camProj: new Matrix3(747.963/1280.,     0.0,       650.66/1280.,
          0.0,        769.576/738.,  373.206/738.,
          0.0,            0.0,          1.0),
        camDistR: new Cartesian3(-2.644e-01, 8.4e-02, 0.0),
        camDistT: new Cartesian2(-8.688e-04, 6.123e-04)
      },
      icon: 'images/car-location.png',
      iconAnchor: [16, 40],
      imageSrc: videoCanvas
    });
 */
var ImageDrapingLayer = /*#__PURE__*/function (_Layer) {
  (0,inherits/* default */.Z)(ImageDrapingLayer, _Layer);
  var _super = (0,createSuper/* default */.Z)(ImageDrapingLayer);
  /**
   * @param {Object} properties
   * @param {Number[]} properties.location - [x,y]
   * @param {Object} properties.orientation -
   * @param {Object} properties.gimbalOrientation -
   * @param {Object} properties.cameraModel -
   * @param {Matrix3} properties.cameraModel.camProj -
   * @param {Cartesian3} properties.cameraModel.camDistR -
   * @param {Cartesian2} properties.cameraModel.camDistT -
   * @param {String} properties.icon -
   * @param {Number[]} [properties.iconAnchor=[16,16]] -
   * @param {HTMLElement} properties.imageSrc - source canvas
   * @param {Function} properties.getPlatformLocation -
   * @param {Function} properties.getPlatformOrientation -
   * @param {Function} properties.getGimbalOrientation -
   * @param {Function} properties.getCameraModel -
   * @param {Function} properties.getSnapshot -
   * @param {Function} properties.getImageSrc -
   *
   * @param properties
   */
  function ImageDrapingLayer(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, ImageDrapingLayer);
    _this = _super.call(this, properties);
    _this.type = 'drapedImage';
    return _this;
  }
  // call by super class
  (0,createClass/* default */.Z)(ImageDrapingLayer, [{
    key: "init",
    value: function init() {
      var _this2 = this;
      var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.properties;
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(ImageDrapingLayer.prototype), "init", this).call(this, properties);
      var props = {
        cameraModel: null,
        imageSrc: null,
        getSnapshot: null,
        platformLocation: null,
        platformOrientation: null,
        gimbalOrientation: null,
        positionMode: ImageDrapingPositionMode.LONLATALT_WITH_EULER_ANGLES,
        gimbalEulerAngleOrder: GimbalEulerAngleOrder.YAW_ROLL_PITCH
      };
      if (isDefined(properties.platformLocation)) {
        props.platformLocation = properties.platformLocation;
      }
      if (isDefined(properties.platformOrientation)) {
        props.platformOrientation = properties.platformOrientation;
      }
      if (isDefined(properties.gimbalOrientation)) {
        props.gimbalOrientation = properties.gimbalOrientation;
      }
      if (isDefined(properties.cameraModel)) {
        props.cameraModel = properties.cameraModel;
      }
      if (isDefined(properties.imageSrc)) {
        props.imageSrc = properties.imageSrc;
      }
      if (isDefined(properties.getSnapshot)) {
        props.getSnapshot = properties.getSnapshot;
      }
      if (isDefined(properties.positionMode)) {
        props.positionMode = properties.positionMode;
      }
      if (isDefined(properties.gimbalEulerAngleOrder)) {
        props.gimbalEulerAngleOrder = properties.gimbalEulerAngleOrder;
      }
      this.definedId('drapedImageId', props);
      if (isDefined(properties.getPlatformLocation)) {
        var fn = /*#__PURE__*/function () {
          var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = _this2;
                  _context.next = 3;
                  return _this2.getFunc('getPlatformLocation')(rec, timestamp, options);
                case 3:
                  _context.t1 = _context.sent;
                  _context.t0.updateProperty.call(_context.t0, 'platformLocation', _context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function fn(_x, _x2, _x3) {
            return _ref.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getPlatformLocation'), fn);
      }
      if (isDefined(properties.getPlatformOrientation)) {
        var _fn = /*#__PURE__*/function () {
          var _ref2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.t0 = _this2;
                  _context2.next = 3;
                  return _this2.getFunc('getPlatformOrientation')(rec, timestamp, options);
                case 3:
                  _context2.t1 = _context2.sent;
                  _context2.t0.updateProperty.call(_context2.t0, 'platformOrientation', _context2.t1);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          return function _fn(_x4, _x5, _x6) {
            return _ref2.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getPlatformOrientation'), _fn);
      }
      if (isDefined(properties.getGimbalOrientation)) {
        var _fn2 = /*#__PURE__*/function () {
          var _ref3 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  _context3.t0 = _this2;
                  _context3.next = 3;
                  return _this2.getFunc('getGimbalOrientation')(rec, timestamp, options);
                case 3:
                  _context3.t1 = _context3.sent;
                  _context3.t0.updateProperty.call(_context3.t0, 'gimbalOrientation', _context3.t1);
                case 5:
                case "end":
                  return _context3.stop();
              }
            }, _callee3);
          }));
          return function _fn2(_x7, _x8, _x9) {
            return _ref3.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getGimbalOrientation'), _fn2);
      }
      if (isDefined(properties.getCameraModel)) {
        var _fn3 = /*#__PURE__*/function () {
          var _ref4 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  _context4.t0 = _this2;
                  _context4.next = 3;
                  return _this2.getFunc('getCameraModel')(rec, timestamp, options);
                case 3:
                  _context4.t1 = _context4.sent;
                  _context4.t0.updateProperty.call(_context4.t0, 'cameraModel', _context4.t1);
                case 5:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          }));
          return function _fn3(_x10, _x11, _x12) {
            return _ref4.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getCameraModel'), _fn3);
      }
      if (this.checkFn("getImageSrc")) {
        var _fn4 = /*#__PURE__*/function () {
          var _ref5 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(rec, timestamp, options) {
            return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  _context5.t0 = _this2;
                  _context5.next = 3;
                  return _this2.getFunc('getImageSrc')(rec, timestamp, options);
                case 3:
                  _context5.t1 = _context5.sent;
                  _context5.t0.updateProperty.call(_context5.t0, 'imageSrc', _context5.t1);
                case 5:
                case "end":
                  return _context5.stop();
              }
            }, _callee5);
          }));
          return function _fn4(_x13, _x14, _x15) {
            return _ref5.apply(this, arguments);
          };
        }();
        this.addFn(this.getDataSourcesIdsByProperty('getImageSrc'), _fn4);
      }
    }
  }]);
  return ImageDrapingLayer;
}(layer_Layer);
/* harmony default export */ var layer_ImageDrapingLayer = ((/* unused pure expression or super */ null && (ImageDrapingLayer)));

;// CONCATENATED MODULE: ../../osh-js/source/core/ui/view/map/CesiumView.js



















/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Sensia Software LLC. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>
 Author: Alex Robin <alex.robin@sensiasoft.com>

 ******************************* END LICENSE BLOCK ***************************/









/**
 * This class is in charge of displaying GPS/orientation data by adding a marker to the Cesium object.
 * @extends MapView
 * @example

 import CesiumView from 'core/ui/view/map/CesiumView.js';

 // style it with a moving point marker
 let pointMarker = new PointMarkerLayer({
	dataSourceId: gpsDataSource.id,
	getLocation: (rec) => ({
		x: rec.location.lon,
		y: rec.location.lat
	}),
	orientation: {
		heading: 0
	},
	icon: 'images/car-location.png',
	iconAnchor: [16, 40]
});

 // #region snippet_cesium_location_view
 // create Cesium view
 let cesiumView = new CesiumView({
	container: 'cesium-container',
	layers: [pointMarker]
});
 */
var CesiumView = /*#__PURE__*/function (_MapView) {
  (0,inherits/* default */.Z)(CesiumView, _MapView);
  var _super = (0,createSuper/* default */.Z)(CesiumView);
  /**
   * Create a View.
   * @param {Object} [properties={}] - the properties of the view
   * @param {String} properties.container - The div element to attach to
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker
   * @param {Object} [properties.options={}] - Properties which can override the default framework ones
   * @param {Object} [properties.options.viewer=undefined] - the Viewer object to pass [Cesium]{@link https://cesium.com/docs/cesiumjs-ref-doc/Viewer.html?classFilter=Viewer} Viewer object
   * @param {Object} [properties.options.viewerProps={}] - the properties of the [Cesium]{@link https://cesium.com/docs/cesiumjs-ref-doc/Viewer.html?classFilter=Viewer} Viewer object
   * @param {Object} [properties.options.location] - the default location to set
   * @param {Number} properties.options.location.longitude - the default location longitude (degree)
   * @param {Number} properties.options.location.latitude - the default location latitude (degree)
   * @param {Number} properties.options.location.altitude - the default location altitude (meter)
   * @param {Object} properties.options.orientation - the default map orientation
   * @param {Object} properties.options.orientation.heading - the default map orientation heading (degree)
   * @param {Object} properties.options.orientation.pitch - the default map orientation pitch (degree)
   */
  function CesiumView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, CesiumView);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      supportedLayers: ['marker', 'drapedImage', 'polyline', 'ellipse', 'polygon', 'coplanarPolygon', 'frustum'],
      autoZoomOnFirstMarker: true
    }, properties));
    var cssClass = document.getElementById(_this.divId).className;
    document.getElementById(_this.divId).setAttribute("class", cssClass + " " + _this.css);
    _this.captureCanvas = document.createElement('canvas');
    _this.captureCanvas.width = 640;
    _this.captureCanvas.height = 480;

    // for frustum
    _this.tmpHPR = new Cesium/* HeadingPitchRoll */.xix();
    _this.nedQuat = new Cesium/* Quaternion */._fP();
    _this.platformQuat = new Cesium/* Quaternion */._fP(0, 0, 0, 1);
    _this.sensorQuat = new Cesium/* Quaternion */._fP(0, 0, 0, 1);
    _this.camQuat = Cesium/* Quaternion.fromRotationMatrix */._fP.fromRotationMatrix(Cesium/* Matrix3.fromRowMajorArray */.Vkp.fromRowMajorArray([0, 0, 1, 1, 0, 0, 0, 1, 0])); // frustum is along Z
    return _this;
  }

  //---------- MAP SETUP
  (0,createClass/* default */.Z)(CesiumView, [{
    key: "beforeAddingItems",
    value: function beforeAddingItems(options) {
      this.first = true;

      // #region snippet_cesiumview_default_cesiumprops_viewer_props

      var imageryProviders = (0,Cesium/* createDefaultImageryProviderViewModels */.mqg)();
      if (options && options.options && options.options.layers) {
        var imageryFilter = options.options.layers;
        imageryProviders = imageryProviders.filter(function (el) {
          return imageryFilter.includes(el.name);
        });
      }
      var viewerProps = {
        baseLayerPicker: true,
        imageryProviderViewModels: imageryProviders,
        selectedImageryProviderViewModel: imageryProviders[0],
        timeline: false,
        homeButton: false,
        navigationInstructionsInitiallyVisible: false,
        navigationHelpButton: false,
        geocoder: true,
        fullscreenButton: false,
        showRenderLoopErrors: true,
        animation: false,
        scene3DOnly: true,
        // for draw layer,
        requestRenderMode: true,
        //https://cesium.com/blog/2018/01/24/cesium-scene-rendering-performance/,
        maximumRenderTimeChange: Infinity,
        targetFrameRate: 30
      };

      // #endregion snippet_cesiumview_default_cesiumprops_viewer_props

      var customViewer = undefined;
      if (isDefined(options)) {
        if (options.hasOwnProperty('options') && options.options.hasOwnProperty('viewerProps')) {
          viewerProps = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, viewerProps), options.options.viewerProps);
        }
        if (options.hasOwnProperty('options') && options.options.hasOwnProperty('viewer')) {
          customViewer = options.options.viewer;
        }
      }
      this.viewer = isDefined(customViewer) ? customViewer : new Cesium/* Viewer */.AEx(this.divId, viewerProps);
      this.viewer.terrainProvider = new Cesium/* EllipsoidTerrainProvider */.ZHx();
      this.viewer.scene.copyGlobeDepth = true;
      this.viewer.scene._environmentState.useGlobeDepthFramebuffer = true;
      this.viewer.scene.globe.depthTestAgainstTerrain = true;
      this.billboardCollection = new Cesium/* BillboardCollection */.vHr();
      this.labelCollection = new Cesium/* LabelCollection */.qiJ();
      this.viewer.scene.primitives.add(this.billboardCollection);
      this.viewer.scene.primitives.add(this.labelCollection);

      // inits callbacks
      // Get default left click handler for when a feature is not picked on left click
      this.initCallbackEvents();
      this.changeToPromptRender = false;
      var that = this;
      this.viewer.scene.postUpdate.addEventListener(function () {
        // This code will run at 60 FPS
        if (that.changeToPromptRender) {
          that.viewer.scene.requestRender();
          that.changeToPromptRender = false;
        }
      });
      var cameraOpts;
      if (options && options.options) {
        if (options.options.location && options.options.location.longitude && options.options.location.latitude && options.options.location.altitude) {
          if (!cameraOpts) {
            cameraOpts = {};
          }
          cameraOpts.destination = Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(options.options.location.longitude, options.options.location.latitude, options.options.location.altitude);
        }
        if (options.options.orientation && options.options.orientation.heading) {
          if (!cameraOpts) {
            cameraOpts = {};
          }
          cameraOpts.orientation = {
            heading: Cesium/* Math.toRadians */.ZX$.toRadians(options.options.orientation.heading),
            pitch: Cesium/* Math.toRadians */.ZX$.toRadians(options.options.orientation.pitch),
            roll: 0.0
          };
          console.log(cameraOpts.orientation);
        }
      }
      if (cameraOpts) {
        this.viewer.camera.flyTo((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, cameraOpts), {}, {
          duration: 1.0
        }));
      }
    }
  }, {
    key: "render",
    value: function render() {
      this.changeToPromptRender = true;
    }
  }, {
    key: "initCallbackEvents",
    value: function initCallbackEvents() {
      var that = this;
      // const infoBoxContainer = document.createElement('div');
      // infoBoxContainer.className = 'cesium-viewer-infoBoxContainer';
      // this.viewer.container.appendChild(infoBoxContainer);

      // const infoBox = new InfoBox(infoBoxContainer);
      // const infoBoxViewModel = infoBox.viewModel;

      // https://groups.google.com/g/cesium-dev/c/rzLrPY5ERJs/m/VYfUj-fYCgAJ
      var onClick = function onClick(movement) {
        try {
          // Pick a new feature
          var pickedFeature = that.viewer.scene.pick(movement.position);
          if (!isDefined(pickedFeature) || !isDefined(pickedFeature.id)) {
            // infoBoxViewModel.showInfo = false;
            return;
          }
          var entity;
          var primitive;
          if (pickedFeature._id instanceof Cesium/* Entity */.JHW) {
            entity = pickedFeature._id;
          } else if (pickedFeature.id instanceof Cesium/* Entity */.JHW) {
            entity = pickedFeature.id;
          } else {
            primitive = pickedFeature;
          }
          var featureId = entity && entity._id || primitive && primitive.id;
          var layerId = that.getLayerId(featureId);
          var layer = that.getLayer(layerId);
          if (isDefined(entity)) {
            that.viewer.selectedEntity = entity;
            pickedFeature.pixel = movement.position;
            that.onMarkerRightClick(layerId, pickedFeature, layer.props, {});
          } else {
            // is primitive
            //TODO: support primitive selection using tracking tool

            /* if (!isDefined(layer)) {
                 infoBoxViewModel.showInfo = false;
                 return;
             }
              infoBoxViewModel.showInfo = true;
             infoBoxViewModel.titleText = layer.props.label || layer.props.name;
             infoBoxViewModel.description = layer.props.description;
            }
            that.onMarkerLeftClick(layer.props.id, pickedFeature, layer.props, {});*/
          }
        } catch (exception) {
          // infoBoxViewModel.showInfo = false;
          console.error(exception);
        }
      };
      var onRightClick = function onRightClick(movement) {
        // Pick a new feature
        var pickedFeature = that.viewer.scene.pick(movement.position);
        if (!isDefined(pickedFeature) || !isDefined(pickedFeature.id)) {
          return;
        }
        var mId = that.getMarkerId(pickedFeature.id.id);
        if (!isDefined(mId)) {
          return;
        }
        var sId = that.getLayerId(pickedFeature.id.id);
        if (!isDefined(sId)) {
          return;
        }
        var layer = that.getLayer(sId);
        if (!isDefined(layer)) {
          return;
        }
        that.viewer.selectedEntity = pickedFeature.id;
        pickedFeature.pixel = movement.position;
        that.onMarkerRightClick(mId, pickedFeature, layer.props, {});
      };
      var onHover = function onHover(movement) {
        var pickedFeature = that.viewer.scene.pick(movement.endPosition);
        if (!isDefined(pickedFeature) || !isDefined(pickedFeature.id)) {
          return;
        }
        var mId = that.getMarkerId(pickedFeature.id.id);
        if (!isDefined(mId)) {
          return;
        }
        var sId = that.getLayerId(pickedFeature.id.id);
        if (!isDefined(sId)) {
          return;
        }
        var layer = that.getLayer(sId);
        if (!isDefined(layer)) {
          return;
        }
        pickedFeature.pixel = movement.endPosition;
        that.onMarkerHover(mId, pickedFeature, layer.props, {});
      };
      this.viewer.screenSpaceEventHandler.setInputAction(onClick, Cesium/* ScreenSpaceEventType.LEFT_CLICK */.Wvr.LEFT_CLICK);
      this.viewer.screenSpaceEventHandler.setInputAction(onRightClick, Cesium/* ScreenSpaceEventType.RIGHT_CLICK */.Wvr.RIGHT_CLICK);
      this.viewer.screenSpaceEventHandler.setInputAction(onHover, Cesium/* ScreenSpaceEventType.MOUSE_MOVE */.Wvr.MOUSE_MOVE);
    }
    /**
     *
     * @private
     */
  }, {
    key: "getGroundAltitude",
    value: function getGroundAltitude(lat, lon) {
      var position = Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(lon, lat, 0, this.viewer.scene.globe.ellipsoid, new Cesium/* Cartesian3 */.b91());
      var altitude = this.viewer.scene.globe.getHeight(Cesium/* Ellipsoid.WGS84.cartesianToCartographic */.Hnq.WGS84.cartesianToCartographic(position));
      if (altitude === undefined || altitude <= 0) altitude = 0.1;
      return altitude;
    }
  }, {
    key: "panToLayer",
    value: function panToLayer(layer) {
      var marker = this.getMarker(layer.props);
      this.viewer.zoomTo(marker, new Cesium/* HeadingPitchRange */.sUm(Cesium/* Math.toRadians */.ZX$.toRadians(0), Cesium/* Math.toRadians */.ZX$.toRadians(-90), 2000));
    }

    /**
     *
     * @param type
     * @param url
     * @param layers
     * @param imageFormat
     * @param options
     * @return {*}
     */
  }, {
    key: "addImageryProvider",
    value: function addImageryProvider(type, url, layers, imageFormat, options) {
      var minLOD = 0;
      var maxLOD;
      if (options.hasOwnProperty('minLOD')) {
        minLOD = options.minLOD;
      }
      if (options.hasOwnProperty('maxLOD')) {
        maxLOD = options.maxLOD;
      }
      var imageryProvider;
      if (type === 'wms') {
        imageryProvider = new Cesium/* WebMapServiceImageryProvider */.s0_({
          url: url,
          layers: layers,
          minimumLevel: minLOD,
          maximumLevel: maxLOD,
          parameters: {
            transparent: 'true',
            format: 'image/' + imageFormat
          }
        });
      }
      // imageryProvider.alpha = 0.5;
      this.viewer.imageryLayers.addImageryProvider(imageryProvider);
      return imageryProvider;
    }

    // ----------------------------------------------------//
    // ---------------------- LAYERS ---------------------//
    // --------------------------------------------------//

    // ----- MARKER
  }, {
    key: "addMarker",
    value: function addMarker(properties) {
      var entity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;
      // console.log(properties);
      var id = properties.id + "$" + properties.markerId;
      var isModel = properties.icon && properties.icon.endsWith(".glb") || false;
      var label = properties.hasOwnProperty("label") && properties.label != null ? properties.label : '';
      var iconOffset = new Cesium/* Cartesian2 */.pQ4(-properties.iconAnchor[0], -properties.iconAnchor[1]);
      var color = isDefined(properties.iconColor) ? Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.iconColor) : Cesium/* Color.YELLOW */.Ilk.YELLOW;
      var lonLatAlt = [0, 0, 0];
      if (isDefined(properties.location)) {
        lonLatAlt = [properties.location.x, properties.location.y, properties.location.z || 0];
      }

      // get ground altitude if non specified
      if (!isDefined(properties.location.z) || isNaN(properties.location.z)) {
        lonLatAlt[2] = this.getGroundAltitude(properties.location.x, properties.location.y);
        if (lonLatAlt[2] > 1) lonLatAlt[2] += 0.3;
      }
      var rot = 0;
      if (isDefined(properties.orientation) && isDefined(properties.orientation.heading)) {
        var heading = properties.orientation.heading;
        // const roll = 0.0;
        rot = Cesium/* Math.toRadians */.ZX$.toRadians(heading);
      }

      // cartesian position
      var position = Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(lonLatAlt[0], lonLatAlt[1], lonLatAlt[2]);
      var orientation = undefined;
      if (isDefined(properties.orientation) && isDefined(properties.orientation.heading)) {
        var DTR = Cesium/* Math.PI */.ZX$.PI / 180.0;
        var _heading = properties.orientation.heading;
        var pitch = 0.0;
        orientation = Cesium/* Transforms.headingPitchRollQuaternion */.YRB.headingPitchRollQuaternion(position, new Cesium/* HeadingPitchRoll */.xix(_heading * DTR, /*roll*DTR*/0.0, pitch * DTR)); // inverse roll and pitch to go from NED to ENU;
      }

      var billboardOpts = undefined;
      var modelOpts = undefined;
      if (!isModel) {
        billboardOpts = {
          id: undefined,
          name: label,
          description: undefined,
          position: undefined,
          image: properties.icon,
          scaleByDistance: new Cesium/* NearFarScalar */.g0P(1000, 1.0, 10e6, 0.0),
          alignedAxis: this.viewer.camera.pitch < -Cesium/* Math.PI */.ZX$.PI / 4 && properties.allowBillboardRotation ? Cesium/* Cartesian3.UNIT_Z */.b91.UNIT_Z : Cesium/* Cartesian3.ZERO */.b91.ZERO,
          // Z means rotation is from north
          rotation: rot,
          horizontalOrigin: Cesium/* HorizontalOrigin.LEFT */.I5p.LEFT,
          verticalOrigin: Cesium/* VerticalOrigin.TOP */.s2f.TOP,
          pixelOffset: iconOffset,
          pixelOffsetScaleByDistance: new Cesium/* NearFarScalar */.g0P(1000, 1.0, 10e6, 0.0),
          eyeOffset: new Cesium/* Cartesian3 */.b91(0, 0, -1 * properties.zIndex),
          // make sure icon always displays in front,
          show: properties.visible,
          heightReference: properties.defaultToTerrainElevation ? Cesium/* HeightReference.CLAMP_TO_GROUND */.MDq.CLAMP_TO_GROUND : Cesium/* HeightReference.NONE */.MDq.NONE,
          scale: properties.iconScale,
          imageSubRegion: undefined,
          color: color,
          width: properties.iconSize[0],
          height: properties.iconSize[1],
          translucencyByDistance: undefined,
          sizeInMeters: undefined,
          distanceDisplayCondition: undefined,
          disableDepthTestDistance: Number.POSITIVE_INFINITY
        };
      } else {
        modelOpts = {
          id: undefined,
          uri: properties.icon,
          scale: properties.iconScale,
          modelM: Cesium/* Matrix4.IDENTITY.clone */.yGw.IDENTITY.clone(),
          color: color,
          colorBlendMode: Cesium/* ColorBlendMode.MIX */.xp3.MIX,
          colorBlendAmount: 0.5,
          silhouetteColor: color,
          // silhouetteSize: 1.0, // cause image draping crash
          minimumPixelSize: 20,
          maximumScale: 20000,
          show: properties.visible,
          heightReference: properties.defaultToTerrainElevation ? Cesium/* HeightReference.CLAMP_TO_GROUND */.MDq.CLAMP_TO_GROUND : Cesium/* HeightReference.NONE */.MDq.NONE,
          alpha: properties.opacity,
          colorBlendAmountEnabled: true,
          imageBasedLightingFactor: undefined,
          lightColor: undefined,
          distanceDisplayCondition: undefined,
          nodeTransformations: undefined,
          articulations: undefined,
          clippingPlanes: undefined,
          disableDepthTestDistance: Number.POSITIVE_INFINITY
        };
      }
      // Add Label primitive
      var labelColor = properties.labelColor || '#FFFFFF';
      var labelSize = properties.labelSize || 16;
      var labelOffset = new Cesium/* Cartesian2 */.pQ4(properties.labelOffset[0], properties.labelOffset[1]);
      var labelBackgroundColor = properties.labelBackgroundColor && Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.labelBackgroundColor);
      var labelOutlineColor = properties.labelOutlineColor && Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.labelOutlineColor);
      var labelOpts = {
        backgroundColor: labelBackgroundColor || undefined,
        backgroundPadding: undefined,
        distanceDisplayCondition: undefined,
        eyeOffset: undefined,
        fillColor: Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(labelColor),
        font: labelSize + 'px sans-serif',
        heightReference: properties.defaultToTerrainElevation ? Cesium/* HeightReference.CLAMP_TO_GROUND */.MDq.CLAMP_TO_GROUND : Cesium/* HeightReference.NONE */.MDq.NONE,
        horizontalOrigin: Cesium/* HorizontalOrigin.CENTER */.I5p.CENTER,
        id: undefined,
        outlineColor: labelOutlineColor || undefined,
        outlineWidth: labelOutlineColor && 1.0 || undefined,
        pixelOffset: labelOffset,
        pixelOffsetScaleByDistance: new Cesium/* NearFarScalar */.g0P(150, 1.0, 1e6, 0.0),
        position: Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(lonLatAlt[0], lonLatAlt[1], lonLatAlt[2]),
        scale: undefined,
        scaleByDistance: new Cesium/* NearFarScalar */.g0P(150, 1.0, 1e6, 0.0),
        show: undefined,
        showBackground: labelBackgroundColor && true || false,
        style: Cesium/* LabelStyle.FILL_AND_OUTLINE */.gF4.FILL_AND_OUTLINE,
        text: label,
        totalScale: undefined,
        translucencyByDistance: undefined,
        verticalOrigin: Cesium/* VerticalOrigin.TOP */.s2f.TOP,
        disableDepthTestDistance: Number.POSITIVE_INFINITY
      };

      // zoom map if first marker update
      if (this.first && this.properties.autoZoomOnFirstMarker) {
        this.viewer.camera.flyTo({
          destination: Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(lonLatAlt[0], lonLatAlt[1], lonLatAlt[2] && lonLatAlt[2] + 1000 || 1000),
          duration: 1.0
        });
        this.first = false;
      }
      var entityOpts = {
        description: properties.description,
        position: Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(lonLatAlt[0], lonLatAlt[1], lonLatAlt[2]),
        orientation: orientation,
        id: id,
        billboard: billboardOpts,
        model: modelOpts,
        label: labelOpts
      };
      if (!isDefined(entity)) {
        var _entity = this.viewer.entities.add(entityOpts);
        if (properties.selected) {
          this.viewer.selectedEntity = _entity;
        }
        return _entity;
      } else {
        // update only properties
        entity.billboard = billboardOpts && (0,objectSpread2/* default */.Z)({}, billboardOpts) || undefined;
        entity.model = modelOpts && (0,objectSpread2/* default */.Z)({}, modelOpts) || undefined;
        entity.label = labelOpts && (0,objectSpread2/* default */.Z)({}, labelOpts) || undefined;
        entity.name = label;
        entity.position = entityOpts.position;
        entity.description = entityOpts.description;
        entity.orientation = entityOpts.orientation;
        return entity;
      }
    }
  }, {
    key: "updateMarker",
    value: function () {
      var _updateMarker = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(props) {
        var marker;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (isDefined(props.location)) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              marker = this.getMarker(props); // create one collection for marker entities
              // /!\ If we remove the marker every time such as Primitive, we loose selection tracking!
              // if (isDefined(marker)) {
              //     isSelected = this.viewer.selectedEntity === marker;
              // this.removeMarkerFromLayer(marker);
              // }
              this.addMarkerToLayer(props, this.addMarker(props, marker));
              this.render();
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function updateMarker(_x) {
        return _updateMarker.apply(this, arguments);
      }
      return updateMarker;
    }()
  }, {
    key: "removeMarkerFromLayer",
    value: function removeMarkerFromLayer(marker) {
      this.viewer.entities.remove(marker);
      this.render();
    }

    // ----- ELLIPSE
    /**
     * Add an Ellipse to the view
     * @param properties
     * @param properties.id The id of the ellipse
     * @param properties.name The assigned name of the ellipse
     * @param properties.position [] The ellipse's center point in the fixed frame.
     * @param properties.semiMajorAxis {Number} The length of the ellipse's semi-major axis in meters.
     * @param properties.semiMinorAxis {Number} The length of the ellipse's semi-minor axis in meters.
     * @param properties.height {Number} 0.0 optionalThe distance in meters between the ellipse and the ellipsoid surface.
     * @param properties.extrudedHeight {Number} optionalThe distance in meters between the ellipse's extruded face and the ellipsoid surface.
     * @param properties.rotation {Number} 0.0 optionalThe angle of rotation counter-clockwise from north.
     * @param properties.stRotation {Number} 0.0 optionalThe rotation of the texture coordinates counter-clockwise from north.
     * @param properties.granularity {Number}    CesiumMath.RADIANS_PER_DEGREE optionalThe angular distance between points on the ellipse in radians.
     * @param properties.clampToGround {boolean} Flag to indicate if ellipse needs to be clamped to ground
     * @param properties.color The color of the ellipse
     * @param properties.transparency The level of transparency or alpha value
     * @returns {Entity}
     */
  }, {
    key: "addEllipse",
    value: function addEllipse(properties) {
      // bind the object to the callback property
      var id = properties.id + "$" + properties.ellipseId;
      var position = properties.position;
      var semiMajorAxis = properties.semiMajorAxis;
      var semiMinorAxis = properties.semiMinorAxis;
      var height = isDefined(properties.height) ? properties.height : 0.0;
      var extrudedHeight = isDefined(properties.extrudedHeight) ? properties.extrudedHeight : 0.0;
      var rotation = isDefined(properties.rotation) ? properties.rotation : 0.0;
      var stRotation = isDefined(properties.stRotation) ? properties.stRotation : 0.0;
      var color = properties.color;
      var alpha = isDefined(properties.transparency) ? properties.transparency : 0.5;
      var ellipseInstance = new Cesium/* GeometryInstance */.aBy({
        geometry: new Cesium/* EllipseGeometry */.JF8({
          center: Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(position.x, position.y),
          semiMajorAxis: semiMajorAxis,
          semiMinorAxis: semiMinorAxis,
          height: height,
          extrudedHeight: extrudedHeight,
          rotation: rotation,
          stRotation: stRotation
        }),
        id: id
      });
      var ellipsePrimitive = new Cesium/* GroundPrimitive */.dUq({
        geometryInstances: ellipseInstance,
        appearance: new Cesium/* MaterialAppearance */.HKI({
          material: new Cesium/* Material */.F5T({
            fabric: {
              type: 'Color',
              uniforms: {
                color: Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(color).withAlpha(alpha)
              }
            }
          })
        }),
        asynchronous: false,
        show: properties.visible
      });
      this.viewer.scene.primitives.add(ellipsePrimitive);
      return ellipsePrimitive;
    }

    /**
     * Updates an Ellipse if it exists or adds a new one to the view
     * @param props
     * @param props.ellipseId
     * @param props.id The id of the ellipse
     * @param props.position [] The ellipse's center point in the fixed frame.
     * @param props.semiMajorAxis {Number} The length of the ellipse's semi-major axis in meters.
     * @param props.semiMinorAxis {Number} The length of the ellipse's semi-minor axis in meters.
     * @param props.height {Number} 0.0 optionalThe distance in meters between the ellipse and the ellipsoid surface.
     * @param props.extrudedHeight {Number} optionalThe distance in meters between the ellipse's extruded face and the ellipsoid surface.
     * @param props.rotation {Number} 0.0 optionalThe angle of rotation counter-clockwise from north.
     * @param props.stRotation {Number} 0.0 optionalThe rotation of the texture coordinates counter-clockwise from north.
     * @param props.granularity {Number}    CesiumMath.RADIANS_PER_DEGREE optionalThe angular distance between points on the ellipse in radians.
     * @param props.clampToGround {boolean} Flag to indicate if ellipse needs to be clamped to ground
     * @param props.transparency The level of transparency or alpha value
     * @param props.color The color of the ellipse
     */
  }, {
    key: "updateEllipse",
    value: function () {
      var _updateEllipse = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(props) {
        var ellipse;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (isDefined(props.position)) {
                _context2.next = 2;
                break;
              }
              return _context2.abrupt("return");
            case 2:
              ellipse = this.getEllipse(props);
              if (isDefined(ellipse)) {
                this.removeEllipseFromLayer(ellipse);
              }
              this.addEllipseToLayer(props, this.addEllipse(props));
              this.render();
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function updateEllipse(_x2) {
        return _updateEllipse.apply(this, arguments);
      }
      return updateEllipse;
    }()
    /**
     * Removes an ellipse
     * @param ellipse The ellipse to remove
     */
  }, {
    key: "removeEllipseFromLayer",
    value: function removeEllipseFromLayer(ellipse) {
      this.viewer.scene.primitives.remove(ellipse);
      this.render();
    }

    // ----- POLYLINE
    /**
     * Add a polyline to the map.
     * @param {Object} properties
     * @return {Object} the new created polyline
     */
  }, {
    key: "addPolyline",
    value: function addPolyline(properties) {
      var id = properties.id + "$" + properties.polylineId;
      var locations = properties.locations;
      var flatPositions = locations.map(function (element) {
        return Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(element.x, element.y, element.z);
      }).flat();

      // check if clamp to terrain
      var polylinePrimitive;
      if (properties.clampToGround) {
        var polylineInstance = new Cesium/* GeometryInstance */.aBy({
          geometry: new Cesium/* GroundPolylineGeometry */.gLh({
            id: id,
            positions: flatPositions,
            width: properties.weight,
            loop: false
          }),
          id: id
        });
        polylinePrimitive = new Cesium/* GroundPolylinePrimitive */.$gM({
          geometryInstances: polylineInstance,
          appearance: new Cesium/* MaterialAppearance */.HKI({
            material: new Cesium/* Material */.F5T({
              fabric: {
                type: 'Color',
                uniforms: {
                  color: Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.color)
                }
              }
            })
          }),
          asynchronous: false,
          show: properties.visible
        });
      } else {
        // use classic primitive
        var _polylineInstance = new Cesium/* GeometryInstance */.aBy({
          geometry: new Cesium/* PolylineGeometry */.rJf({
            id: id,
            positions: flatPositions,
            width: properties.weight,
            loop: false
          }),
          attributes: {
            color: Cesium/* ColorGeometryInstanceAttribute.fromColor */.vSX.fromColor(Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.color))
          },
          id: id
        });
        polylinePrimitive = new Cesium/* Primitive */.WV0({
          geometryInstances: _polylineInstance,
          appearance: new Cesium/* PolylineColorAppearance */.rnP(),
          asynchronous: false,
          show: properties.visible
        });
      }
      this.viewer.scene.primitives.add(polylinePrimitive);
      return polylinePrimitive;
    }

    /**
     * Updates a given polyline, or adds it if it does not currently exist
     * @param props The properties containing the updated data
     */
  }, {
    key: "updatePolyline",
    value: function () {
      var _updatePolyline = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(props) {
        var polyline;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (!(!isDefined(props.locations) || props.locations.length < 2)) {
                _context3.next = 2;
                break;
              }
              return _context3.abrupt("return");
            case 2:
              polyline = this.getPolyline(props);
              if (isDefined(polyline)) {
                this.removePolylineFromLayer(polyline);
              }
              this.addPolylineToLayer(props, this.addPolyline(props));
              this.render();
            case 6:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function updatePolyline(_x3) {
        return _updatePolyline.apply(this, arguments);
      }
      return updatePolyline;
    }()
    /**
     * Abstract method to remove a polyline from its corresponding layer.
     * This is library dependent.
     * @param {Object} polyline - The Map marker object
     */
  }, {
    key: "removePolylineFromLayer",
    value: function removePolylineFromLayer(polyline) {
      this.viewer.scene.primitives.remove(polyline);
      this.render();
    }

    // ----- POLYGON
    /**
     * Retrieves the polygon and updates it or creates a new instance
     * and adds with the given properties the polygon to the layer
     * @param {Object} properties properties to apply in updating polygon
     */
  }, {
    key: "updatePolygon",
    value: function () {
      var _updatePolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(props) {
        var polygonPrimitiveCollection;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              polygonPrimitiveCollection = this.getPolygon(props);
              if (isDefined(polygonPrimitiveCollection)) {
                this.removePolygonFromLayer(polygonPrimitiveCollection);
              }
              this.addPolygonToLayer(props, this.addPolygon(props));
              this.render();
            case 4:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function updatePolygon(_x4) {
        return _updatePolygon.apply(this, arguments);
      }
      return updatePolygon;
    }()
    /**
     * Adds a polygon to the polygon layer
     * @param {Object} properties the properties to use in constructing the polygon
     * @returns {PrimitiveCollection}
     */
  }, {
    key: "addPolygon",
    value: function addPolygon(properties) {
      // bind the object to the callback property
      var id = properties.id + "$" + properties.polygonId;
      // return this.viewer.entities.add(polygonObj);
      var polygonInstance = new Cesium/* GeometryInstance */.aBy({
        geometry: new Cesium/* PolygonGeometry */.i4B({
          polygonHierarchy: new Cesium/* PolygonHierarchy */.rVe(Cesium/* Cartesian3.fromDegreesArray */.b91.fromDegreesArray(properties.vertices)),
          attributes: {
            color: Cesium/* ColorGeometryInstanceAttribute.fromColor */.vSX.fromColor(Cesium/* Color.fromRandom */.Ilk.fromRandom({
              alpha: 0.5
            }))
          }
        }),
        id: id
      });
      var polygonPrimitive = new Cesium/* GroundPrimitive */.dUq({
        geometryInstances: polygonInstance,
        appearance: new Cesium/* MaterialAppearance */.HKI({
          material: new Cesium/* Material */.F5T({
            fabric: {
              type: 'Color',
              uniforms: {
                color: Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.color).withAlpha(properties.opacity)
              }
            }
          })
        }),
        asynchronous: false,
        show: properties.visible
      });

      // according to this example: https://sandcastle.cesium.com/?#c=pVRNj9MwEP0rVi9JpeIulAWU7VZULVrQLlq0IC6EgzeZthaOHY2dVAH1v2MncZq05YQPbebjzbw38aRkSEoOe0BySyTsyQo0LzL6vfaFQVKbKyUN4xIwGN/EMpalRSVKYaot6kcsiT0v3r6iVxPy+sr+eo97JrPrnue69pzn9Dxv3vk6sfx5bMfQWC5M2o4tx5V3zegGVbaGLQLoJSKrwoZdn61Q2IM6k66XT/dPH9Y3TYoqjLAaV5cy7x4f1l2tXIlqq+QX5Bk3vITh5Dp3+KcRtAWVgcHqk9SGSTvQqJ9+dxL1KHd4GpGg7RZMjn5fMep6Njm+Fk0QmAFvhkekO32uQ1y/tz9t+48ckGGyq6IL+C4Ydm9pPKx06Nnt42HcKmJ5Dgyd9kHtz1YBciaWXbhPL2ujFyH1dfhW5RAG9esLJuREWX0doubvGDmcUdOVTHaopCrsW9swoSGWh/HgJrg786+r0IYtCQGJ4UqGDnuGoixNvbhcae4ybb9umC2bPU/NLiKzblWEUnlEDBbQOv5jKu1E+kvghzGU7Em71W++HFQnIIEeI05jZ9TiTldmfDllMBWXM5qM5tpUAhYNmfc8yxUaUqAIKZ0ayHJh5enpc5H8AkMTXe/8fOpB85SXdo9u49HJlywekUQwrW1kUwjxlf+GeLSYT23+ACYUS7ncPpaAglUuZfdy8dA4KaXzqTXPUUYp8cywV/Ev
      var polygonOutlinePrimitive = new Cesium/* PolylineCollection */.Dos();
      polygonOutlinePrimitive.add({
        positions: Cesium/* Cartesian3.fromDegreesArray */.b91.fromDegreesArray(properties.vertices),
        width: properties.outlineWidth,
        loop: true,
        material: new Cesium/* Material */.F5T({
          fabric: {
            type: 'Color',
            uniforms: {
              color: Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.outlineColor)
            }
          }
        }),
        show: properties.visible
      });
      var collection = new Cesium/* PrimitiveCollection */.mL8();
      collection.add(polygonPrimitive);
      collection.add(polygonOutlinePrimitive);
      this.viewer.scene.primitives.add(collection);
      return collection;
    }

    /**
     * Abstract method to remove a polygon from its corresponding layer.
     * This is library dependent.
     * @param {Object} polygon - The Map polygon object
     */
  }, {
    key: "removePolygonFromLayer",
    value: function removePolygonFromLayer(polygonPrimitiveCollection) {
      polygonPrimitiveCollection.removeAll();
      this.viewer.scene.primitives.remove(polygonPrimitiveCollection);
      this.render();
    }

    /**
     * Retrieves the coplanar polygon and updates it or creates a new instance
     * and adds with the given properties the coplanar polygon to the layer
     * @param {Object} properties properties to apply in updating polygon
     */
  }, {
    key: "updateCoPlanarPolygon",
    value: function () {
      var _updateCoPlanarPolygon = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(props) {
        var polygonPrimitiveCollection;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              polygonPrimitiveCollection = this.getPolygon(props);
              if (isDefined(polygonPrimitiveCollection)) {
                polygonPrimitiveCollection.removeAll();
                this.viewer.scene.primitives.remove(polygonPrimitiveCollection);
              }
              this.addPolygonToLayer(props, this.addCoPlanarPolygon(props));
              this.render();
            case 4:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function updateCoPlanarPolygon(_x5) {
        return _updateCoPlanarPolygon.apply(this, arguments);
      }
      return updateCoPlanarPolygon;
    }()
    /**
     * Adds a coplanar polygon to the coplanar polygon layer
     * @param {Object} properties the properties to use in constructing the coplanar polygon
     * @returns {Entity}
     */
  }, {
    key: "addCoPlanarPolygon",
    value: function addCoPlanarPolygon(properties) {
      // bind the object to the callback property
      var id = properties.id + "$" + properties.polygonId;
      var polygonInstance = new Cesium/* GeometryInstance */.aBy({
        geometry: new Cesium/* CoplanarPolygonGeometry */.iip({
          polygonHierarchy: new Cesium/* PolygonHierarchy */.rVe(Cesium/* Cartesian3.fromDegreesArrayHeights */.b91.fromDegreesArrayHeights(properties.vertices))
        }),
        id: id
      });
      var polygonPrimitive = new Cesium/* Primitive */.WV0({
        geometryInstances: polygonInstance,
        appearance: new Cesium/* MaterialAppearance */.HKI({
          material: new Cesium/* Material */.F5T({
            fabric: {
              type: 'Color',
              uniforms: {
                color: Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.color).withAlpha(properties.opacity)
              }
            }
          })
        }),
        asynchronous: false,
        show: properties.visible
      });

      /* const polygonOutlineInstance = new GeometryInstance({
           geometry : new CoplanarPolygonOutlineGeometry({
               polygonHierarchy: new PolygonHierarchy(Cartesian3.fromDegreesArrayHeights(properties.vertices[properties.polygonId])),
           }),
           attributes : {
               color : ColorGeometryInstanceAttribute.fromColor(Color.fromRandom({alpha : 0.5}))
           },
           id: id,
       });
        const polygonOutlinePrimitive = new Primitive({
           geometryInstances : polygonOutlineInstance,
           appearance : new MaterialAppearance({
               material: new Material({
                   fabric: {
                       type: 'Color',
                       uniforms: {
                           color:  Color.fromCssColorString(properties.outlineColor)
                       }
                   }
               }),
           }),
           asynchronous: false
       });*/

      var collection = new Cesium/* PrimitiveCollection */.mL8();
      collection.add(polygonPrimitive);
      // collection.add(polygonOutlinePrimitive);

      this.viewer.scene.primitives.add(collection);
      return collection;
    }

    // ----- IMAGE_DRAPING
    /**
     * Updates the image draping associated to the layer.
     * @param {ImageDrapingLayer.props} props - The layer properties allowing the update of the image draping
     */
  }, {
    key: "updateDrapedImage",
    value: function () {
      var _updateDrapedImage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(props) {
        var drapedImagePrimitive;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              if (!(!isDefined(props.platformLocation) || !isDefined(props.imageSrc))) {
                _context6.next = 2;
                break;
              }
              return _context6.abrupt("return");
            case 2:
              drapedImagePrimitive = this.getDrapedImage(props);
              if (isDefined(drapedImagePrimitive)) {
                _context6.next = 12;
                break;
              }
              _context6.t0 = this;
              _context6.t1 = props;
              _context6.next = 8;
              return this.addDrapedImage(props);
            case 8:
              _context6.t2 = _context6.sent;
              _context6.t0.addDrapedImageToLayer.call(_context6.t0, _context6.t1, _context6.t2);
              _context6.next = 14;
              break;
            case 12:
              _context6.next = 14;
              return this.addDrapedImage(props, drapedImagePrimitive);
            case 14:
              this.render();
            case 15:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function updateDrapedImage(_x6) {
        return _updateDrapedImage.apply(this, arguments);
      }
      return updateDrapedImage;
    }()
  }, {
    key: "addDrapedImage",
    value: function () {
      var _addDrapedImage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7(props, existingDrapedImagePrimitive) {
        var camPos, camRot, rotM, DTR, platformOrientation, gimbalOrientation, yaw, pitch, roll, camProj, camDistR, camDistT, imgSrc, snapshot, ctx, encCamPos, appearance, drapedImageGeometry, drapedImagePrimitive;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              // Camera position as ECEF Cartesian3. Will be set in the switch statement below.
              // Camera rotation, relative to ECEF. Also will be set in the switch statement below.
              camRot = new Cesium/* Matrix3 */.Vkp(); // Temporary matrix used for performing rotations.
              rotM = new Cesium/* Matrix3 */.Vkp();
              DTR = Cesium/* Math.PI */.ZX$.PI / 180;
              _context7.t0 = props.positionMode;
              _context7.next = _context7.t0 === ImageDrapingPositionMode.LONLATALT_WITH_EULER_ANGLES ? 6 : _context7.t0 === ImageDrapingPositionMode.ECEF_WITH_MATRICES ? 45 : _context7.t0 === ImageDrapingPositionMode.ECEF_WITH_QUATERNIONS ? 49 : 53;
              break;
            case 6:
              // Get ECEF position from longitude, latitude, and altitude.
              camPos = Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(props.platformLocation.x, props.platformLocation.y, props.platformLocation.z);
              // Start building the camera rotation matrix. Start with the NED transformation.
              Cesium/* Matrix4.getMatrix3 */.yGw.getMatrix3(Cesium/* Transforms.northEastDownToFixedFrame */.YRB.northEastDownToFixedFrame(camPos), camRot);
              // Heading, pitch, and roll
              platformOrientation = props.platformOrientation;
              if (platformOrientation) {
                Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(platformOrientation.heading * DTR, rotM), camRot);
                Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationY */.Vkp.fromRotationY(platformOrientation.pitch * DTR, rotM), camRot);
                Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationX */.Vkp.fromRotationX(platformOrientation.roll * DTR, rotM), camRot);
              }
              gimbalOrientation = props.gimbalOrientation;
              if (!gimbalOrientation) {
                _context7.next = 42;
                break;
              }
              // Allow yaw to be specified either as "yaw" or "heading".
              yaw = "yaw" in gimbalOrientation ? gimbalOrientation.yaw : gimbalOrientation.heading; // The "+ 90" on the next line is a little mysterious to this author (CSD), but probably has to
              // do with orienting camera coordinates to world space.
              pitch = gimbalOrientation.pitch + 90;
              roll = gimbalOrientation.roll;
              _context7.t1 = props.gimbalEulerAngleOrder;
              _context7.next = _context7.t1 === GimbalEulerAngleOrder.YAW_PITCH_ROLL ? 18 : _context7.t1 === GimbalEulerAngleOrder.YAW_ROLL_PITCH ? 22 : _context7.t1 === GimbalEulerAngleOrder.PITCH_YAW_ROLL ? 26 : _context7.t1 === GimbalEulerAngleOrder.PITCH_ROLL_YAW ? 30 : _context7.t1 === GimbalEulerAngleOrder.ROLL_YAW_PITCH ? 34 : _context7.t1 === GimbalEulerAngleOrder.ROLL_PITCH_YAW ? 38 : 42;
              break;
            case 18:
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(yaw * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationY */.Vkp.fromRotationY(pitch * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationX */.Vkp.fromRotationX(roll * DTR, rotM), camRot);
              return _context7.abrupt("break", 42);
            case 22:
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(yaw * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationX */.Vkp.fromRotationX(roll * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationY */.Vkp.fromRotationY(pitch * DTR, rotM), camRot);
              return _context7.abrupt("break", 42);
            case 26:
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationY */.Vkp.fromRotationY(pitch * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(yaw * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationX */.Vkp.fromRotationX(roll * DTR, rotM), camRot);
              return _context7.abrupt("break", 42);
            case 30:
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationY */.Vkp.fromRotationY(pitch * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationX */.Vkp.fromRotationX(roll * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(yaw * DTR, rotM), camRot);
              return _context7.abrupt("break", 42);
            case 34:
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationX */.Vkp.fromRotationX(roll * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(yaw * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationY */.Vkp.fromRotationY(pitch * DTR, rotM), camRot);
              return _context7.abrupt("break", 42);
            case 38:
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationX */.Vkp.fromRotationX(roll * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationY */.Vkp.fromRotationY(pitch * DTR, rotM), camRot);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(yaw * DTR, rotM), camRot);
              return _context7.abrupt("break", 42);
            case 42:
              // transform to camera frame
              Cesium/* Matrix3.fromRotationZ */.Vkp.fromRotationZ(90 * DTR, rotM);
              Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, rotM, camRot);
              return _context7.abrupt("break", 54);
            case 45:
              camPos = new Cesium/* Cartesian3 */.b91(props.platformLocation.x, props.platformLocation.y, props.platformLocation.z);
              if (props.platformOrientation) {
                Cesium/* Matrix3.clone */.Vkp.clone(props.platformOrientation, camRot);
              } else {
                Cesium/* Matrix3.clone */.Vkp.clone(Cesium/* Matrix3.IDENTITY */.Vkp.IDENTITY, camRot);
              }
              if (props.gimbalOrientation) {
                Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, props.gimbalOrientation, camRot);
              }
              return _context7.abrupt("break", 54);
            case 49:
              camPos = new Cesium/* Cartesian3 */.b91(props.platformLocation.x, props.platformLocation.y, props.platformLocation.z);
              if (props.platformOrientation) {
                Cesium/* Matrix3.fromQuaternion */.Vkp.fromQuaternion(props.platformOrientation, camRot);
              } else {
                Cesium/* Matrix3.clone */.Vkp.clone(Cesium/* Matrix3.IDENTITY */.Vkp.IDENTITY, camRot);
              }
              if (props.gimbalOrientation) {
                Cesium/* Matrix3.multiply */.Vkp.multiply(camRot, Cesium/* Matrix3.fromQuaternion */.Vkp.fromQuaternion(props.gimbalOrientation, new Cesium/* Matrix3 */.Vkp()), camRot);
              }
              return _context7.abrupt("break", 54);
            case 53:
              return _context7.abrupt("return");
            case 54:
              camProj = props.cameraModel.camProj;
              camDistR = props.cameraModel.camDistR;
              camDistT = props.cameraModel.camDistT;
              imgSrc = props.imageSrc;
              snapshot = props.snapshot; // snapshot
              if (snapshot) {
                ctx = this.captureCanvas.getContext('2d');
                ctx.drawImage(imgSrc, 0, 0, this.captureCanvas.width, this.captureCanvas.height);
                imgSrc = this.captureCanvas;
              }
              encCamPos = Cesium/* EncodedCartesian3.fromCartesian */._2c.fromCartesian(camPos);
              appearance = new Cesium/* MaterialAppearance */.HKI({
                renderState: {
                  depthTest: {
                    enabled: false
                  }
                },
                material: new Cesium/* Material */.F5T({
                  fabric: {
                    type: 'Image',
                    uniforms: {
                      image: imgSrc,
                      camPosHigh: encCamPos.high,
                      camPosLow: encCamPos.low,
                      camAtt: Cesium/* Matrix3.toArray */.Vkp.toArray(Cesium/* Matrix3.transpose */.Vkp.transpose(camRot, new Cesium/* Matrix3 */.Vkp())),
                      camProj: Cesium/* Matrix3.toArray */.Vkp.toArray(camProj),
                      camDistR: camDistR,
                      camDistT: camDistT
                    }
                  }
                }),
                vertexShaderSource: ImageDrapingVS,
                fragmentShaderSource: ImageDrapingFS
              });
              if (!(!isDefined(existingDrapedImagePrimitive) || snapshot)) {
                _context7.next = 69;
                break;
              }
              // Render the draped primitive on the whole earth (discarding pixels that do not fall
              // in the draped image's bounds). This is inefficient, but the GPU is fast enough that
              // it does not matter right now.
              drapedImageGeometry = new Cesium/* RectangleGeometry */.DyV({
                ellipsoid: Cesium/* Ellipsoid.WGS84 */.Hnq.WGS84,
                rectangle: Cesium/* Rectangle.fromDegrees */.AeJ.fromDegrees(-180, -90, 180, 90)
              });
              drapedImagePrimitive = new Cesium/* Primitive */.WV0({
                geometryInstances: new Cesium/* GeometryInstance */.aBy({
                  geometry: drapedImageGeometry
                }),
                appearance: appearance,
                show: props.visible
              });
              this.viewer.scene.primitives.add(drapedImagePrimitive, 0);
              return _context7.abrupt("return", drapedImagePrimitive);
            case 69:
              existingDrapedImagePrimitive.appearance = appearance;
              existingDrapedImagePrimitive.show = props.visible;
              return _context7.abrupt("return", existingDrapedImagePrimitive);
            case 72:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function addDrapedImage(_x7, _x8) {
        return _addDrapedImage.apply(this, arguments);
      }
      return addDrapedImage;
    }()
  }, {
    key: "removeDrapedImageFromLayer",
    value: function removeDrapedImageFromLayer(drapedImagePrimitive) {
      this.viewer.scene.primitives.remove(drapedImagePrimitive);
      this.render();
    }

    // -- Frustum
  }, {
    key: "updateFrustum",
    value: function () {
      var _updateFrustum = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8(props) {
        var frustumPrimitiveCollection;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              if (!(!isDefined(props.origin) || !isDefined(props.fov) || !isDefined(props.range) || !isDefined(props.sensorOrientation) || !isDefined(props.platformOrientation))) {
                _context8.next = 2;
                break;
              }
              return _context8.abrupt("return");
            case 2:
              frustumPrimitiveCollection = this.getFrustum(props);
              if (isDefined(frustumPrimitiveCollection)) {
                frustumPrimitiveCollection.removeAll();
                this.viewer.scene.primitives.remove(frustumPrimitiveCollection);
              }
              this.addFrustumToLayer(props, this.addFrustum(props));
              this.render();
            case 6:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function updateFrustum(_x9) {
        return _updateFrustum.apply(this, arguments);
      }
      return updateFrustum;
    }()
  }, {
    key: "addFrustum",
    value: function addFrustum(properties) {
      // bind the object to the callback property
      var id = properties.id + "$" + properties.frustumId;

      // Compute the geometry and orientation. This depends on the position
      // mode specified to the FrustumLayer constructor.
      var origin, quat;
      switch (properties.positionMode) {
        case FrustumPositionMode.LONLATALT_WITH_EULER_ANGLES:
          origin = Cesium/* Cartesian3.fromDegrees */.b91.fromDegrees(properties.origin.x, properties.origin.y, properties.origin.z);
          Cesium/* Transforms.headingPitchRollQuaternion */.YRB.headingPitchRollQuaternion(origin, new Cesium/* HeadingPitchRoll */.xix(0, 0, 0), Cesium/* Ellipsoid.WGS84 */.Hnq.WGS84, Cesium/* Transforms.northEastDownToFixedFrame */.YRB.northEastDownToFixedFrame, this.nedQuat);

          // platform attitude w/r NED
          // see doc of Quaternion.fromHeadingPitchRoll, heading and roll are about negative z and y axes respectively
          var platformHPR = properties.platformOrientation;
          Cesium/* HeadingPitchRoll.fromDegrees */.xix.fromDegrees(-platformHPR.heading, -platformHPR.pitch, platformHPR.roll, this.tmpHPR);
          Cesium/* Quaternion.fromHeadingPitchRoll */._fP.fromHeadingPitchRoll(this.tmpHPR, this.platformQuat);

          // sensor orientation w/r platform
          var sensorYPR = properties.sensorOrientation;
          Cesium/* HeadingPitchRoll.fromDegrees */.xix.fromDegrees(-sensorYPR.yaw, -sensorYPR.pitch, sensorYPR.roll, this.tmpHPR);
          Cesium/* Quaternion.fromHeadingPitchRoll */._fP.fromHeadingPitchRoll(this.tmpHPR, this.sensorQuat);

          // compute combined transform
          // goal is to get orientation of frustum in ECEF directly, knowing that the frustum direction is along the Z axis
          Cesium/* Quaternion.multiply */._fP.multiply(this.nedQuat, this.platformQuat, this.platformQuat); // result is plaformQuat w/r ECEF
          Cesium/* Quaternion.multiply */._fP.multiply(this.platformQuat, this.sensorQuat, this.sensorQuat); // result is sensorQuat w/r ECEF
          quat = Cesium/* Quaternion.multiply */._fP.multiply(this.sensorQuat, this.camQuat, this.sensorQuat); // result is frustum quat w/r ECEF
          break;
        case FrustumPositionMode.ECEF_WITH_MATRICES:
          origin = properties.origin;
          Cesium/* Quaternion.fromRotationMatrix */._fP.fromRotationMatrix(properties.platformOrientation, this.platformQuat);
          Cesium/* Quaternion.fromRotationMatrix */._fP.fromRotationMatrix(properties.sensorOrientation, this.sensorQuat);
          quat = Cesium/* Quaternion.multiply */._fP.multiply(this.platformQuat, this.sensorQuat, new Cesium/* Quaternion */._fP());
          break;
        case FrustumPositionMode.ECEF_WITH_QUATERNIONS:
          origin = properties.origin;
          this.platformQuat = properties.platformOrientation;
          this.sensorQuat = properties.sensorOrientation;
          quat = Cesium/* Quaternion.multiply */._fP.multiply(this.platformQuat, this.sensorQuat, new Cesium/* Quaternion */._fP());
          break;
        default:
          return;
      }
      var frustum = new Cesium/* PerspectiveFrustum */.snB({
        fov: Cesium/* Math.toRadians */.ZX$.toRadians(properties.fov),
        aspectRatio: properties.aspectRatio,
        near: properties.near,
        far: properties.range
      });
      var frustumInstance = new Cesium/* GeometryInstance */.aBy({
        geometry: new Cesium/* FrustumGeometry */.fuF({
          frustum: frustum,
          origin: origin,
          orientation: quat,
          vertexFormat: Cesium/* VertexFormat.POSITION_ONLY */.gBM.POSITION_ONLY
        }),
        id: id
      });
      var frustumPrimitive = new Cesium/* Primitive */.WV0({
        geometryInstances: frustumInstance,
        appearance: new Cesium/* MaterialAppearance */.HKI({
          material: new Cesium/* Material */.F5T({
            fabric: {
              type: 'Color',
              uniforms: {
                color: Cesium/* Color.fromCssColorString */.Ilk.fromCssColorString(properties.color).withAlpha(properties.opacity)
              }
            }
          })
        }),
        asynchronous: false,
        show: properties.visible
      });
      var collection = new Cesium/* PrimitiveCollection */.mL8();
      collection.add(frustumPrimitive);
      this.viewer.scene.primitives.add(collection);
      return collection;
    }
  }, {
    key: "removeFrustumFromLayer",
    value: function removeFrustumFromLayer(frustumPrimitiveCollection) {
      if (isDefined(frustumPrimitiveCollection)) {
        frustumPrimitiveCollection.removeAll();
        this.viewer.scene.primitives.remove(frustumPrimitiveCollection);
        this.render();
      }
    }
  }]);
  return CesiumView;
}(map_MapView);
/* harmony default export */ var map_CesiumView = (CesiumView);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.js
var es_set = __webpack_require__(70189);
// EXTERNAL MODULE: ./node_modules/klona/dist/index.mjs
var dist = __webpack_require__(93024);
;// CONCATENATED MODULE: ./src/morpheusx/parser.js








/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/
// nodeList= 'recordSchema',
// scalarList = 'Quantity', 'Time', 'Category', 'Count', 'Boolean' , 'DataChoice'

function parseSweSchema(parent, node, results) {
  var path = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
  var scalarList = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : new Set(['Quantity', 'Time', 'Category', 'Count', 'Boolean', 'DataChoice', 'DataArray', 'Text']);
  var skipList = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : new Set(['elementCount', 'elementType']);
  var currentPath = path;
  var relativeParent = Array.isArray(node) ? parent : node;
  for (var eltKey in node) {
    var elt = node[eltKey];
    if (skipList.has(eltKey)) {
      break;
    }
    if (elt === 'Vector' || elt === 'DataRecord') {
      if ('name' in node) {
        currentPath += "/".concat(node.name);
      }
    }
    if (scalarList.has(elt)) {
      var pClone = (0,dist/* klona */.Y)(node);
      pClone.path = currentPath + "/".concat(node.name);
      if (!('label' in pClone) && 'label' in parent) {
        pClone.label = parent.label;
      }
      results.push(pClone);
    } else if ((0,esm_typeof/* default */.Z)(elt) === 'object') {
      parseSweSchema(relativeParent, elt, results, currentPath, scalarList, skipList);
    } else if (Array.isArray(elt)) {
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(elt),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var e = _step.value;
          parseSweSchema(relativeParent, e, results, currentPath, scalarList, skipList);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }
}
// EXTERNAL MODULE: ./src/utils.js
var utils = __webpack_require__(58661);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.search.js
var es_string_search = __webpack_require__(64765);
;// CONCATENATED MODULE: ../../osh-js/source/core/connector/DataConnector.js


/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




/**
 * The DataConnector is the abstract class used to create different connectors.
 */
var DataConnector = /*#__PURE__*/function () {
  /**
   * @param {String} url - The full url used to connect to the data stream
   */
  function DataConnector(url, properties) {
    (0,classCallCheck/* default */.Z)(this, DataConnector);
    this.url = url;
    this.properties = properties;
    this.id = "DataConnector-" + randomUUID();
    this.reconnectTimeout = 1000 * 20; // 20 sec
    this.status = Status.DISCONNECTED;
  }
  (0,createClass/* default */.Z)(DataConnector, [{
    key: "disconnect",
    value: function disconnect() {
      this.checkStatus(Status.DISCONNECTED);
      this.checkAndClearReconnection();
    }

    /**
     * Sets the url
     * @param url
     */
  }, {
    key: "setUrl",
    value: function setUrl(url) {
      this.url = url;
    }

    /**
     * The data protocol default id.
     * @return {String}
     */
  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }

    /**
     * The stream url.
     * @return {String}
     */
  }, {
    key: "getUrl",
    value: function getUrl() {
      return this.url;
    }

    /**
     * Sets the reconnection timeout
     * @param {Number} timeout - delay in milliseconds before reconnecting dataSource
     */
  }, {
    key: "setReconnectTimeout",
    value: function setReconnectTimeout(timeout) {
      this.reconnectTimeout = timeout;
    }
  }, {
    key: "onReconnect",
    value: function onReconnect() {
      return true;
    }
  }, {
    key: "connect",
    value: function connect() {}
  }, {
    key: "forceReconnect",
    value: function forceReconnect() {
      this.disconnect();
      this.connect();
    }

    /**
     * Called when the connection STATUS changes
     * @param {Status} status - the new status
     */
  }, {
    key: "onChangeStatus",
    value: function onChangeStatus(status) {}

    /**
     * Check a change of the status and call the corresponding callbacks if necessary
     * @param {Status} status - the currentStatus
     */
  }, {
    key: "checkStatus",
    value: function checkStatus(status) {
      if (status !== this.status) {
        this.onChangeStatus(status);
        this.status = status;
      }
    }
    /**
     * Called when the protocol has been disconnected
     */
  }, {
    key: "onDisconnect",
    value: function onDisconnect() {}

    /**
     * Called when the protocol has been connected
     */
  }, {
    key: "onConnect",
    value: function onConnect() {}
  }, {
    key: "postRequest",
    value: function postRequest() {}
  }, {
    key: "publishRequest",
    value: function publishRequest() {}
  }, {
    key: "reset",
    value: function reset() {}
  }, {
    key: "close",
    value: function close() {}
  }, {
    key: "onClose",
    value: function onClose(statusCode) {}
  }, {
    key: "onError",
    value: function onError(reason) {}
  }]);
  return DataConnector;
}();
/* harmony default export */ var connector_DataConnector = (DataConnector);
;// CONCATENATED MODULE: ../../osh-js/source/core/connector/WebSocketConnector.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/





/**
 * Defines the WebSocketConnector to connect to a remote server by creating a WebSocket channel.
 * @extends DataConnector
 * @example
 * import WebSocketConnector from 'osh-js/dataconnector/WebSocketConnector.js';
 *
 * let url = ...;
 * let connector = new WebSocketConnector(url);
 *
 * // connect
 * connector.connect();
 *
 * // disconnect
 * connector.disconnect();
 *
 * // close
 * connector.close();
 *
 */

var reconnectionInterval = -1;
var WebSocketConnector = /*#__PURE__*/function (_DataConnector) {
  (0,inherits/* default */.Z)(WebSocketConnector, _DataConnector);
  var _super = (0,createSuper/* default */.Z)(WebSocketConnector);
  /**
   *
   * @param url -
   * @param {Object} properties -
   */
  function WebSocketConnector(url, properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, WebSocketConnector);
    _this = _super.call(this, url, properties);
    _this.interval = -1;
    _this.lastReceiveTime = 0;
    _this.extraUrl = '';
    _this.reconnectRetry = properties && properties.reconnectRetry || 10;
    return _this;
  }

  /**
   * Connect to the webSocket. If the system supports WebWorker, it will automatically creates one otherwise use
   * the main thread.
   */
  (0,createClass/* default */.Z)(WebSocketConnector, [{
    key: "doRequest",
    value: function doRequest() {
      var _this2 = this;
      var extraUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.extraUrl;
      var queryString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.queryString;
      if (!this.init) {
        this.extraUrl = extraUrl;
        this.queryString = queryString;
        var fullUrl = this.getUrl() + extraUrl;
        if (isDefined(queryString)) {
          fullUrl += '?' + queryString;
        }
        this.closed = false;
        this.init = true;
        //creates Web Socket
        this.ws = new WebSocket(fullUrl);
        this.ws.binaryType = 'arraybuffer';
        this.checkStatus(Status.CONNECTING);
        console.warn('WebSocket stream connecting');
        this.ws.onopen = function (event) {
          this.checkAndClearReconnection();
          this.checkStatus(Status.CONNECTED);
          console.warn('WebSocket stream connected');
        }.bind(this);
        this.ws.onmessage = function (event) {
          this.lastReceiveTime = Date.now();
          //callback data on message received
          if (event.data.byteLength > 0) {
            this.onMessage(event.data);
          }
        }.bind(this);

        // closes socket if any errors occur
        this.ws.onerror = function (event) {
          console.error('WebSocket stream error');
          this.checkStatus(Status.CLOSED_ERROR);
          this.init = false;
          this.lastReceiveTime = -1;
          this.createReconnection();
          this.onError(event);
        }.bind(this);
        this.ws.onclose = function (event) {
          console.warn('WebSocket stream closed: ', event.reason, event.code);
          if (event.code !== 1000 && !_this2.closed) {
            _this2.checkStatus(Status.CLOSED_ERROR);
            _this2.createReconnection();
          } else {
            _this2.checkStatus(Status.DISCONNECTED);
          }
          _this2.onClose(event.code);
        };
        if (this.reconnectionInterval !== -1) {
          clearInterval(this.reconnectionInterval);
          this.reconnectionInterval = -1;
        }
      }
    }

    /**
     * Connect to the webSocket. If the system supports WebWorker, it will automatically creates one otherwise use
     * the main thread.
     */
  }, {
    key: "doAsyncRequest",
    value: function doAsyncRequest() {
      var _this3 = this;
      var extraUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.extraUrl;
      var queryString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.queryString;
      return new Promise( /*#__PURE__*/function () {
        var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(resolve, reject) {
          var fullUrl, results;
          return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                if (!_this3.init) {
                  _this3.extraUrl = extraUrl;
                  _this3.queryString = queryString;
                  fullUrl = _this3.getUrl() + extraUrl;
                  if (isDefined(queryString)) {
                    fullUrl += '?' + queryString;
                  }
                  _this3.closed = false;
                  _this3.init = true;
                  //creates Web Socket
                  _this3.ws = new WebSocket(fullUrl);
                  _this3.ws.binaryType = 'arraybuffer';
                  _this3.checkStatus(Status.CONNECTING);
                  console.warn('WebSocket stream connecting');
                  results = [];
                  _this3.ws.onopen = function (event) {
                    this.checkAndClearReconnection();
                    this.checkStatus(Status.CONNECTED);
                    console.warn('WebSocket stream connected');
                  }.bind(_this3);
                  _this3.ws.onmessage = function (event) {
                    this.lastReceiveTime = Date.now();
                    //callback data on message received
                    if (event.data.byteLength > 0) {
                      // this.onMessage(event.data);
                      results.push(event.data);
                    }
                  }.bind(_this3);

                  // closes socket if any errors occur
                  _this3.ws.onerror = function (event) {
                    console.error('WebSocket stream error');
                    this.checkStatus(Status.CLOSED_ERROR);
                    this.init = false;
                    this.lastReceiveTime = -1;
                    this.createReconnection();
                    this.onError(event);
                    reject("onError WS: ".concat(event));
                  }.bind(_this3);
                  _this3.ws.onclose = function (event) {
                    console.warn('WebSocket stream closed: ', event.reason, event.code);
                    if (event.code !== 1000 && !_this3.closed) {
                      _this3.checkStatus(Status.CLOSED_ERROR);
                      _this3.createReconnection();
                    } else {
                      _this3.checkStatus(Status.DISCONNECTED);
                    }
                    _this3.onClose(event.code);
                    resolve(results);
                  };
                  if (_this3.reconnectionInterval !== -1) {
                    clearInterval(_this3.reconnectionInterval);
                    _this3.reconnectionInterval = -1;
                  }
                }
              case 1:
              case "end":
                return _context.stop();
            }
          }, _callee);
        }));
        return function (_x, _x2) {
          return _ref.apply(this, arguments);
        };
      }());
    }
  }, {
    key: "connect",
    value: function connect() {
      this.doRequest();
    }
  }, {
    key: "publishRequest",
    value: function publishRequest(topic, payload) {
      if (isDefined(this.ws)) {
        this.ws.send(payload);
      }
    }
  }, {
    key: "checkAndClearReconnection",
    value: function checkAndClearReconnection() {
      if (reconnectionInterval !== -1) {
        clearInterval(reconnectionInterval);
        reconnectionInterval = -1;
      }
    }
  }, {
    key: "createReconnection",
    value: function createReconnection() {
      if (!this.closed && reconnectionInterval === -1 && this.onReconnect()) {
        var count = 0;
        var url = this.url;
        reconnectionInterval = setInterval(function () {
          var delta = Date.now() - this.lastReceiveTime;
          // -1 means the WS went in error
          if (this.lastReceiveTime === -1 || delta >= this.reconnectTimeout) {
            if (count++ >= this.reconnectRetry) {
              console.warn("Maximum reconnection retries attempted: ".concat(this.reconnectRetry));
              clearInterval(reconnectionInterval);
            } else {
              var fullUrl = url;
              if (isDefined(this.extraUrl)) {
                fullUrl += this.extraUrl;
              }
              if (isDefined(this.queryString)) {
                fullUrl += '?' + this.queryString;
              }
              console.warn("(".concat(count, "/").concat(this.reconnectRetry, ") trying to reconnect: ").concat(fullUrl));
              this.init = false;
              this.connect();
            }
          }
        }.bind(this), this.reconnectTimeout);
      }
    }

    /**
     * Disconnects and close the websocket.
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              // super.disconnect();
              this.init = false;
              this.closed = true;
              if (this.ws != null && this.ws.readyState !== WebSocket.CLOSED) {
                this.ws.close();
              }
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
    /**
     * The onMessage method used by the websocket to callback the data
     * @param data the callback data
     * @event
     */
  }, {
    key: "onMessage",
    value: function () {
      var _onMessage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(data) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }));
      function onMessage(_x3) {
        return _onMessage.apply(this, arguments);
      }
      return onMessage;
    }()
  }, {
    key: "isConnected",
    value: function isConnected() {
      return this.ws != null && this.ws.readyState === WebSocket.OPEN;
    }
  }]);
  return WebSocketConnector;
}(connector_DataConnector);
/* harmony default export */ var connector_WebSocketConnector = (WebSocketConnector);
// EXTERNAL MODULE: ../../osh-js/source/core/mqtt/mqtt.min.js
var mqtt_min = __webpack_require__(68475);
var mqtt_min_default = /*#__PURE__*/__webpack_require__.n(mqtt_min);
;// CONCATENATED MODULE: ../../osh-js/source/core/mqtt/MqttProvider.js










































/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2021 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/



var mqttCallbacks = {};
var MqttProvider = /*#__PURE__*/function () {
  /**
   * Build the MqttProvider.
   * @param {Object} properties - the object properties
   * @param {String} properties.endpoint - the mqtt endpoint[:port]
   * @param {String} properties.clientId - the clientId
   * @param {String} [properties.mqttPrefix='/api'] - a prefix to each topic
   * @param {Object} properties.options - the MQTT.js property options as defined  [mqtt.Client(streamBuilder, options)]{@link https://github.com/mqttjs/MQTT.js#mqttclientstreambuilder-options}
   * Note that the credentials are passed in the object options as for the mqtt.js client.
   */
  function MqttProvider(properties) {
    (0,classCallCheck/* default */.Z)(this, MqttProvider);
    this.properties = properties;
    if (!isDefined(properties)) {
      throw Error('endpoint and clientId are mandatory properties');
    }
    if (!isDefined(properties.endpoint)) {
      throw Error('endpoint is a mandatory property');
    }
    if (!isDefined(properties.clientId)) {
      throw Error('clientId is a mandatory property');
    }
    this.mqttPrefix = '/api';
    if (isDefined(properties.mqttPrefix)) {
      this.mqttPrefix = properties.mqttPrefix;
    }
    this.topics = [];
    var options = {
      reconnectPeriod: 30,
      connectTimeout: 30 * 1000,
      clientId: 'mqttjs_' + Math.random().toString(16).substr(2, 8),
      wsOptions: {
        binaryType: 'arraybuffer'
      }
    };

    // merge generic options
    if (isDefined(this.properties.options)) {
      options = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, options), this.properties.options);
    }
    this.options = options;
    this.endpoint = properties.endpoint + '/mqtt';
    this.clientId = properties.clientId;
    this.client = null;
  }
  (0,createClass/* default */.Z)(MqttProvider, [{
    key: "subscribe",
    value: function () {
      var _subscribe = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(topic, callback) {
        var _this = this;
        var interval, topicQuery;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!(topic in this.topics)) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              if (isDefined(this.client)) {
                _context.next = 4;
                break;
              }
              throw Error('You must connect the client before subscribing any topic');
            case 4:
              topicQuery = "".concat(this.mqttPrefix).concat(topic);
              this.topics.push(topic);
              return _context.abrupt("return", new Promise(function (resolve, error) {
                interval = setInterval(function () {
                  if (_this.client.connected) {
                    try {
                      // subscribe
                      // store callback for this topic
                      if (!(topicQuery in mqttCallbacks)) {
                        mqttCallbacks[topicQuery] = [];
                      }
                      mqttCallbacks[topicQuery].push(callback);
                      _this.client.subscribe("".concat(topicQuery), function (err) {
                        if (err) {
                          callback(err);
                          error(err);
                        } else {
                          console.warn("Subscribed to ".concat(topicQuery));
                          resolve();
                        }
                      });
                    } catch (exception) {
                      console.error(exception);
                    } finally {
                      clearInterval(interval);
                    }
                  }
                }, 100);
              }));
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function subscribe(_x, _x2) {
        return _subscribe.apply(this, arguments);
      }
      return subscribe;
    }()
  }, {
    key: "publish",
    value: function publish(topic, payload) {
      var topicQuery = "".concat(this.mqttPrefix).concat(topic);
      this.client.publish(topicQuery, payload);
    }

    /**
     * Check to unsuscribe to any topic listened by this dsId
     * If the topic is only subscribed by the dsId, unsubscribe from broken
     * Otherwise, remove from the list of subscribe topic/dsId
     * @param topic
     */
  }, {
    key: "unsubscribe",
    value: function () {
      var _unsubscribe = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(topic) {
        var _this2 = this;
        var topicQuery;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              topicQuery = "".concat(this.mqttPrefix).concat(topic);
              return _context2.abrupt("return", new Promise(function (resolve, error) {
                _this2.client.unsubscribe(topicQuery, function (err) {
                  delete mqttCallbacks[topicQuery];
                  if (err) {
                    var messageErr = "Cannot Unsubscribed topic: ".concat(topicQuery, " : ").concat(err);
                    console.error(messageErr);
                    error(messageErr);
                  } else {
                    console.warn("Unsubscribed topic: ".concat(topicQuery));
                    resolve();
                  }
                });
              }));
            case 2:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function unsubscribe(_x3) {
        return _unsubscribe.apply(this, arguments);
      }
      return unsubscribe;
    }()
  }, {
    key: "unsubscribeAll",
    value: function () {
      var _unsubscribeAll = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        var _iterator, _step, topic;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              // unsubscribe topic
              _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.topics);
              _context3.prev = 1;
              _iterator.s();
            case 3:
              if ((_step = _iterator.n()).done) {
                _context3.next = 9;
                break;
              }
              topic = _step.value;
              _context3.next = 7;
              return this.unsubscribe(topic);
            case 7:
              _context3.next = 3;
              break;
            case 9:
              _context3.next = 14;
              break;
            case 11:
              _context3.prev = 11;
              _context3.t0 = _context3["catch"](1);
              _iterator.e(_context3.t0);
            case 14:
              _context3.prev = 14;
              _iterator.f();
              return _context3.finish(14);
            case 17:
              this.topics = [];
            case 18:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[1, 11, 14, 17]]);
      }));
      function unsubscribeAll() {
        return _unsubscribeAll.apply(this, arguments);
      }
      return unsubscribeAll;
    }()
  }, {
    key: "connect",
    value: function connect() {
      if (!isDefined(this.client)) {
        // connects to the broker specified by the given url and options and returns a Client.
        this.client = mqtt_min_default().connect(this.endpoint, (0,objectSpread2/* default */.Z)({}, this.options));
        var that = this;
        this.client.on('connect', function (e) {
          console.info("Mqtt client is connected to ".concat(that.endpoint));
        });
        this.client.on('message', this.onMessage.bind(this));
        this.client.on('offline', function (e) {
          throw new Error("The server ".concat(that.endpoint, " seems offline"));
        });
        this.client.on('error', function (e) {
          throw new Error(error);
        });
      }
    }
  }, {
    key: "onMessage",
    value: function () {
      var _onMessage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(topic, message) {
        var _iterator2, _step2, callbackFn;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              // console.log(new DataView(message.buffer, message.byteOffset).getFloat64(0, false) * 1000)
              // console.log(new DataView(new Uint8Array(message).subarray(message.byteOffset).buffer).getFloat64(0, false) * 1000)
              // console.log(String.fromCharCode.apply(null, new Uint8Array(message)));
              if (topic in mqttCallbacks) {
                // callback for the corresponding topic
                _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(mqttCallbacks[topic]);
                try {
                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                    callbackFn = _step2.value;
                    // callback to all subscription registered
                    callbackFn(new Uint8Array(message).subarray(message.byteOffset).buffer);
                  }
                } catch (err) {
                  _iterator2.e(err);
                } finally {
                  _iterator2.f();
                }
              }
            case 1:
            case "end":
              return _context4.stop();
          }
        }, _callee4);
      }));
      function onMessage(_x4, _x5) {
        return _onMessage.apply(this, arguments);
      }
      return onMessage;
    }()
  }, {
    key: "disconnect",
    value: function disconnect() {
      if (!isDefined(this.client)) {
        throw Error('The client has not been created yet');
      }
      // close the client
      this.client.end();
      mqttCallbacks = {};
      this.client = null;
    }
  }, {
    key: "isConnected",
    value: function isConnected() {
      return isDefined(this.client) && this.client.connected;
    }
  }]);
  return MqttProvider;
}();
/* harmony default export */ var mqtt_MqttProvider = (MqttProvider);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace-all.js
var es_string_replace_all = __webpack_require__(68757);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/Filter.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2021 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var SensorWebApiFilter = /*#__PURE__*/function () {
  function SensorWebApiFilter(props) {
    (0,classCallCheck/* default */.Z)(this, SensorWebApiFilter);
    this.props = props;
  }

  /**
   *
   * @param {string[]} [includes=[]] list of parameters to include - all if omitted
   * @param  {string[]} [excludes=[]] list of parameters to exclude - none if omitted
   * @return {string}
   */
  (0,createClass/* default */.Z)(SensorWebApiFilter, [{
    key: "toQueryString",
    value: function toQueryString() {
      var includes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var excludes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var queryString = '';
      var separator = '';
      excludes.push('replaySpeed');
      for (var queryParameter in this.props) {
        if (excludes.includes(queryParameter)) {
          continue;
        }
        if ((includes.length === 0 || includes.includes(queryParameter)) && isDefined(this.props[queryParameter])) {
          // if(Array.isArray(this.props[queryParameter])) {
          //     queryString += separator + queryParameter + '=' + encodeURIComponent(this.props[queryParameter].join());
          /*} else*/
          if (queryParameter === 'f' || queryParameter === 'format' || queryParameter === 'responseFormat' || queryParameter === 'obsFormat') {
            queryString += separator + queryParameter + '=' + this.props[queryParameter].replaceAll('+', '%2B');
            // } else {
            //     queryString += separator + queryParameter + '=' + encodeURIComponent(this.props[queryParameter]);
          } else {
            queryString += separator + queryParameter + '=' + this.props[queryParameter];
          }
          separator = '&';
        }
      }
      return queryString;
    }
  }]);
  return SensorWebApiFilter;
}();
/* harmony default export */ var Filter = (SensorWebApiFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/observation/ObservationFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/

var ObservationFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(ObservationFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(ObservationFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {any} [properties.phenomenonTime='now'] - time range <00:00:00T00:00:00Z/00:00:00T00:00:00Z> | 'now' | 'latest'
   * @param {any} [properties.resultTime='now'] - time range <00:00:00T00:00:00Z/00:00:00T00:00:00Z> | 'latest'
   * @param {string[]} [properties.featureOfInterest=undefined] - Comma separated list of feature of interest IDs to get observations for
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {number[]} [properties.bbox=undefined] - BBOX to filter resources on their location
   * @param {string} [properties.location=undefined] - WKT geometry and operator to filter resources on their location or geometry
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {string} [properties.replaySpeed=undefined] - Mime type designating the format to use to encode the response.
   */
  function ObservationFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, ObservationFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      phenomenonTime: undefined,
      resultTime: undefined,
      featureOfInterest: undefined,
      select: undefined,
      bbox: undefined,
      location: undefined,
      format: 'application/om+json',
      replaySpeed: undefined
    }, properties));
  }
  return (0,createClass/* default */.Z)(ObservationFilter);
}(Filter);
/* harmony default export */ var observation_ObservationFilter = (ObservationFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/connector/MqttConnector.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2021 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/







/**
 * Defines the MqttConnector to connect to a remote server by creating a Mqtt channel.
 * @extends DataConnector
 * @example
 * import MqttConnector from 'osh-js/dataconnector/MqttConnector.js';
 *
 * let url = ...;
 * let connector = new MqttConnector(url);
 *
 * // connect
 * connector.connect();
 *
 * // disconnect
 * connector.disconnect();
 *
 * // close
 * connector.close();
 *
 */

// TODO: Useless in WebWorker since the WebWorker has its own context.
var mqttProviders = {};
var MqttConnector = /*#__PURE__*/function (_DataConnector) {
  (0,inherits/* default */.Z)(MqttConnector, _DataConnector);
  var _super = (0,createSuper/* default */.Z)(MqttConnector);
  /**
   *
   * @param properties -
   */
  function MqttConnector(url, properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, MqttConnector);
    _this = _super.call(this, url, (0,objectSpread2/* default */.Z)({
      mqttPrefix: properties.mqttOpts && properties.mqttOpts.prefix || '/api'
    }, properties));
    _this.interval = -1;
    return _this;
  }
  (0,createClass/* default */.Z)(MqttConnector, [{
    key: "getMqttProvider",
    value: function getMqttProvider() {
      var fullUrl = this.getUrl();

      // only 1 provider by URL
      if (!(fullUrl in mqttProviders)) {
        var options = {
          reconnectPeriod: this.reconnectTimeout,
          connectTimeout: 30 * 1000
        };
        if (isDefined(this.properties.mqttOpts)) {
          options = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, options), this.properties.mqttOpts);
        }
        mqttProviders[fullUrl] = new mqtt_MqttProvider({
          endpoint: fullUrl,
          clientId: randomUUID(),
          options: options,
          mqttPrefix: this.properties.mqttPrefix
        });
        console.warn("Stored MQTT provider into cache: ".concat(fullUrl));
        mqttProviders[fullUrl].connect();
        mqttProviders[fullUrl].checkStatus = this.checkStatus;
        this.checkStatus(Status.CONNECTED);
      } else {
        console.warn("Getting MQTT provider from cache: ".concat(fullUrl));
      }
      return mqttProviders[fullUrl];
    }
  }, {
    key: "checkStatus",
    value: function checkStatus(status) {
      this.onChangeStatus(status);
      this.status = status;
    }

    /**
     * Connect to the Mqtt broker.
     */
  }, {
    key: "doRequest",
    value: function doRequest() {
      var _this2 = this;
      var topic = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var queryString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;
      var mqttProvider = this.getMqttProvider();
      mqttProvider.subscribe("".concat(topic, "?").concat(queryString), this.onMessage).then(function () {
        _this2.onChangeStatus(Status.CONNECTED);
      });
    }
  }, {
    key: "publishRequest",
    value: function publishRequest(topic, payload) {
      var mqttProvider = this.getMqttProvider();
      mqttProvider.publish(topic, payload);
    }

    /**
     * Disconnects and close the mqtt client.
     */
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var client;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              // does not call super to avoid reconnection logic and use the one of the mqtt.js lib
              // this.checkStatus(Status.DISCONNECTED);
              // this.init = false;
              // this.closed = true;
              // find the client
              client = mqttProviders[this.getUrl()];
              if (!(isDefined(client) && client.isConnected())) {
                _context.next = 4;
                break;
              }
              _context.next = 4;
              return client.unsubscribeAll();
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
  }, {
    key: "connect",
    value: function connect() {
      this.doRequest(this.properties.topic || '');
    }

    /**
     * The onMessage method used by the mqtt client to callback the data
     * @param data the callback data
     * @event
     */
  }, {
    key: "onMessage",
    value: function onMessage(data) {}
  }, {
    key: "isConnected",
    value: function isConnected() {
      return isDefined(mqttProviders[this.getUrl()]) && mqttProviders[this.getUrl()].isConnected();
    }
  }, {
    key: "reset",
    value: function reset() {
      this.disconnect();
      console.log("Remove provider from cache: ".concat(this.getUrl()));
      delete mqttProviders[this.getUrl()];
    }
  }]);
  return MqttConnector;
}(connector_DataConnector);
/* harmony default export */ var connector_MqttConnector = (MqttConnector);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/SensorWebApi.js











/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/




var SensorWebApi = /*#__PURE__*/function () {
  /**
   * @param {Object} [networkProperties={}]
   * @param {String} networkProperties.endpointUrl - defines the Http(s) endpoint URL
   * @param {Boolean} networkProperties.tls - defines is use Http or Https secure protocol for fetching data
   * @param {String} [networkProperties.streamProtocol='ws'] - the Stream protocol to use: 'ws' pr 'mqtt'
   * @param {Object} [networkProperties.mqttOpts={}] - the Mqtt options if stream protocol is 'mqtt'
   * @param {String} networkProperties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} networkProperties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   * @param {Object} networkProperties.connectorOpts - Specific connector options
   */
  function SensorWebApi(networkProperties) {
    (0,classCallCheck/* default */.Z)(this, SensorWebApi);
    assertDefined(networkProperties.endpointUrl, 'endpointUrl');
    this.networkProperties = networkProperties;
    var endpoint = networkProperties.endpointUrl;
    if (endpoint.endsWith('/')) {
      endpoint = endpoint.substring(0, endpoint.length - 1);
    }
    var tls = networkProperties.tls ? 's' : '';
    this.url = 'http' + tls + '://' + endpoint;
    this._network = {};
    if (isDefined(networkProperties.connector)) {
      this._network.stream = {
        connector: networkProperties.connector
      };
    } else if (isDefined(networkProperties.streamProtocol)) {
      this._network.stream = {
        connector: this.createStreamConnector(networkProperties)
      };
    } else {
      // default Stream to WS
      this._network.stream = {
        connector: this.createStreamConnector((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, networkProperties), {}, {
          streamProtocol: 'ws'
        }))
      };
    }
  }
  (0,createClass/* default */.Z)(SensorWebApi, [{
    key: "baseUrl",
    value: function baseUrl() {
      return this.url;
    }
  }, {
    key: "stream",
    value: function stream() {
      return this._network.stream.connector;
    }
  }, {
    key: "createStreamConnector",
    value: function createStreamConnector(networkProperties) {
      assertDefined(networkProperties.streamProtocol, 'streamProtocol');
      var endpoint = networkProperties.endpointUrl;
      if (networkProperties.streamProtocol === 'mqtt' && isDefined(networkProperties.mqttOpts)) {
        endpoint = networkProperties.mqttOpts.endpointUrl;
      }
      if (endpoint.endsWith('/')) {
        endpoint = endpoint.substring(0, endpoint.length - 1);
      }
      var tls = networkProperties.tls ? 's' : '';
      var url = networkProperties.streamProtocol + tls + '://' + endpoint;
      if (networkProperties.streamProtocol === 'mqtt') {
        return new connector_MqttConnector(url, networkProperties);
      } else if (networkProperties.streamProtocol === 'ws') {
        return new connector_WebSocketConnector(url);
      }
    }
  }, {
    key: "connect",
    value: function connect() {
      this._network.stream.connector.connect();
    }
  }, {
    key: "getHeaders",
    value: function getHeaders() {
      var headers = {};
      if ('connectorOpts' in this.networkProperties) {
        if ('username' in this.networkProperties.connectorOpts && 'password' in this.networkProperties.connectorOpts) {
          headers['Authorization'] = 'Basic ' + btoa(this.networkProperties.connectorOpts.username + ":" + this.networkProperties.connectorOpts.password);
        } else {
          for (var key in this.networkProperties.connectorOpts) {
            headers[key] = this.networkProperties.connectorOpts[key];
          }
        }
      }
      return headers;
    }
  }, {
    key: "fetchAsJson",
    value: function fetchAsJson(apiUrl, queryString) {
      var fullUrl = this.baseUrl() + apiUrl + '?' + queryString;
      var headers = this.getHeaders();
      return fetch(fullUrl, {
        method: 'GET',
        headers: headers
      }).then(function (response) {
        if (!response.ok) {
          var err = new Error("Got ".concat(response.status, " response from ").concat(this.baseUrl()));
          err.response = response;
          throw err;
        }
        return response.json();
      });
    }
  }, {
    key: "postAsJson",
    value: function postAsJson(apiUrl, jsonPayload) {
      var fullUrl = this.baseUrl() + apiUrl;
      var headers = this.getHeaders();
      headers['Accept'] = 'application/json';
      headers['Content-Type'] = 'application/json';
      fetch(fullUrl, {
        method: 'POST',
        headers: headers,
        credentials: 'include',
        body: jsonPayload
      }).then(function (response) {
        if (!response.ok) {
          var err = new Error("Got ".concat(response.status, " response from ").concat(fullUrl));
          err.response = response;
          throw err;
        }
      });
    }
  }]);
  return SensorWebApi;
}();
/* harmony default export */ var sweapi_SensorWebApi = (SensorWebApi);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.constructor.js
var es_array_buffer_constructor = __webpack_require__(18264);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweCollectionDataParser.js




































var SweCollectionDataParser = /*#__PURE__*/function () {
  function SweCollectionDataParser() {
    var format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'application/json';
    (0,classCallCheck/* default */.Z)(this, SweCollectionDataParser);
    this.format = format;
  }
  (0,createClass/* default */.Z)(SweCollectionDataParser, [{
    key: "parseData",
    value: function parseData(data) {
      if (this.format === 'application/om+json' || this.format === 'application/json') {
        return this.parseOmJsonData(data);
      } else if (this.format === 'application/swe+json') {
        return this.parseSweJsonData(data);
      } else if (this.format === 'application/swe+csv') {
        return this.parseSweCsv(data);
      } else if (this.format === 'application/swe+xml') {
        return this.parseSweXml(data);
      } else {
        throw Error("Unsupported collection format ".concat(this.format));
      }
    }
  }, {
    key: "parseOmJsonData",
    value: function parseOmJsonData(data) {
      return data instanceof ArrayBuffer ? JSON.parse(String.fromCharCode.apply(null, new Uint8Array(data))).items : data.items;
    }
  }, {
    key: "parseSweJsonData",
    value: function parseSweJsonData(data) {
      return data instanceof ArrayBuffer ? JSON.parse(String.fromCharCode.apply(null, new Uint8Array(data))) : data;
    }
  }, {
    key: "parseSweCsv",
    value: function parseSweCsv(data) {
      var content = data instanceof ArrayBuffer ? String.fromCharCode.apply(null, new Uint8Array(data)) : data;
      return content.split('\n');
    }
  }, {
    key: "parseSweXml",
    value: function parseSweXml(data) {
      return data instanceof ArrayBuffer ? String.fromCharCode.apply(null, new Uint8Array(data)) : data;
    }
  }]);
  return SweCollectionDataParser;
}();
/* harmony default export */ var collection_SweCollectionDataParser = (SweCollectionDataParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/Collection.js










/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2021 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var Collection = /*#__PURE__*/function () {
  /**
   *
   */
  function Collection(url, filter, pageSize, parser) {
    var responseFormat = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'json';
    (0,classCallCheck/* default */.Z)(this, Collection);
    this.url = url;
    this.filter = filter;
    this.pageSize = pageSize;
    this.parser = parser;
    this.pageOffset = 0;
    this.init = false;
    this.total = 0;
    this.collectionDataParser = new collection_SweCollectionDataParser(filter.props.format);
    this.responseFormat = responseFormat;
    this.currentPage = -1;
  }

  /**
   * Check if has next page
   * @return {boolean}
   */
  (0,createClass/* default */.Z)(Collection, [{
    key: "hasNext",
    value: function hasNext() {
      return this.pageOffset !== -1;
    }
  }, {
    key: "fetchData",
    value: function () {
      var _fetchData = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(offset) {
        var _this = this;
        var queryString, fullUrl, jsonResponse;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              queryString = "".concat(this.filter.toQueryString(), "&offset=").concat(offset, "&limit=").concat(this.pageSize);
              fullUrl = this.url + '?' + queryString;
              _context.next = 4;
              return fetch(fullUrl, {
                method: 'GET',
                headers: {}
              }).then(function (response) {
                if (!response.ok) {
                  var err = new Error("Got ".concat(response.status, " response from ").concat(fullUrl));
                  err.response = response;
                  throw err;
                }
                if (_this.responseFormat === 'json') {
                  return response.json();
                } else if (_this.responseFormat === 'arraybuffer') {
                  return response.arrayBuffer();
                }
              });
            case 4:
              jsonResponse = _context.sent;
              return _context.abrupt("return", this.parseResponse(jsonResponse));
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function fetchData(_x) {
        return _fetchData.apply(this, arguments);
      }
      return fetchData;
    }()
  }, {
    key: "parseResponse",
    value: function () {
      var _parseResponse = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(jsonResponse) {
        var items, data, _iterator, _step, item;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              items = this.collectionDataParser.parseData(jsonResponse);
              data = [];
              if (Array.isArray(items)) {
                _iterator = (0,createForOfIteratorHelper/* default */.Z)(items);
                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    item = _step.value;
                    data.push(this.parser.parseData(item));
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }
              } else {
                data.push(items);
              }
              return _context2.abrupt("return", data);
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function parseResponse(_x2) {
        return _parseResponse.apply(this, arguments);
      }
      return parseResponse;
    }()
    /**
     * Fetches next page.
     * @param page - the number of page to fetch
     * @return {Promise<Array>}
     */
  }, {
    key: "nextPage",
    value: function () {
      var _nextPage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        var data;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (!this.hasNext()) {
                _context3.next = 10;
                break;
              }
              this.currentPage++;
              this.pageOffset = this.currentPage * this.pageSize;
              _context3.next = 5;
              return this.fetchData(this.pageOffset);
            case 5:
              data = _context3.sent;
              if (data.length === 0 || data.length < this.pageSize) {
                this.pageOffset = -1;
              }
              return _context3.abrupt("return", data);
            case 10:
              throw Error('Has no more pages');
            case 11:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function nextPage() {
        return _nextPage.apply(this, arguments);
      }
      return nextPage;
    }()
  }, {
    key: "page",
    value: function () {
      var _page2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4(_page) {
        var data;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              this.currentPage = _page;
              this.pageOffset = this.currentPage * this.pageSize;
              _context4.next = 4;
              return this.fetchData(this.pageOffset);
            case 4:
              data = _context4.sent;
              if (data.length === 0 || data.length < this.pageSize) {
                this.pageOffset = -1;
              }
              return _context4.abrupt("return", data);
            case 7:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function page(_x3) {
        return _page2.apply(this, arguments);
      }
      return page;
    }()
    /**
     * Fetches previous page.
     * @param page - the number of page to fetch
     * @return {Promise<Array>}
     */
  }, {
    key: "previousPage",
    value: function () {
      var _previousPage = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (!this.hasPrevious()) {
                _context5.next = 6;
                break;
              }
              this.currentPage--;
              this.pageOffset = this.currentPage * this.pageSize;
              return _context5.abrupt("return", this.fetchData(this.pageOffset));
            case 6:
              throw Error('Has no more pages');
            case 7:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function previousPage() {
        return _previousPage.apply(this, arguments);
      }
      return previousPage;
    }()
    /**
     * Check if has previous page
     * @return {boolean}
     */
  }, {
    key: "hasPrevious",
    value: function hasPrevious() {
      return this.currentPage > 0;
    }
  }]);
  return Collection;
}();
/* harmony default export */ var sweapi_Collection = (Collection);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/system/SystemFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var SystemFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(SystemFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(SystemFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {string[]} [properties.q=undefined] - Comma separated keywords used for full-text search
   * @param {number[]} [properties.bbox=undefined] - BBOX to filter resources on their location
   * @param {string} [properties.location=undefined] - WKT geometry and operator to filter resources on their location or geometry
   * @param {string[]} [properties.parent=undefined] - Comma separated list of parent resource IDs to restrict the search to or "*" to include nested resources at any level
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {string} [properties.validTime=undefined] - validTime - ISO 8601 time range to filter resources on their validity time.
   When this parameter is omitted, the implicit value is "now", except for "history" collections where the absence of this parameter means no filtering is applied.
   */
  function SystemFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, SystemFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      q: undefined,
      bbox: undefined,
      location: undefined,
      parent: undefined,
      select: undefined,
      format: 'application/json',
      validTime: undefined
    }, properties)); //TODO: assertions
  }
  return (0,createClass/* default */.Z)(SystemFilter);
}(Filter);
/* harmony default export */ var system_SystemFilter = (SystemFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/routes.conf.js
/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/

var API = {
  datastreams: {
    search: '/datastreams',
    by_id: '/datastreams/{id}',
    observations: '/datastreams/{id}/observations',
    schema: '/datastreams/{id}/schema'
  },
  systems: {
    search: '/systems',
    by_id: '/systems/{sysid}',
    details: '/systems/{sysid}/details',
    fois: '/systems/{sysid}/featuresOfInterest',
    members: '/systems/{sysid}/members',
    datastreams: '/systems/{sysid}/datastreams',
    history_ver: '/systems/{sysid}/history/{ver}',
    control_by_id: '/systems/{sysid}/controls/{dsid}',
    controls: '/systems/{sysid}/controls',
    events: '/systems/{sysid}/events',
    history: '/systems/{sysid}/history'
  },
  controls: {
    commands: '/systems/{sysid}/controls/{dsid}/commands',
    command_by_id: '/systems/{sysid}/controls/{dsid}/commands/{cmdid}',
    status: '/systems/{sysid}/controls/{dsid}/status',
    schema: '/systems/{sysid}/controls/{dsid}/schema'
  },
  commands: {
    status: '/systems/{sysid}/controls/{dsid}/commands/{cmdid}/status'
  },
  observations: {
    search: '/observations',
    by_id: '/observations/{id}'
  },
  fois: {
    search: '/featuresOfInterest',
    by_id: '/featuresOfInterest/{id}'
  }
};
/* harmony default export */ var routes_conf = (API);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiCollectionObjectParser.js


var SweApiCollectionObjectParser = /*#__PURE__*/function () {
  function SweApiCollectionObjectParser(networkProperties) {
    (0,classCallCheck/* default */.Z)(this, SweApiCollectionObjectParser);
    this.networkProperties = networkProperties;
  }
  (0,createClass/* default */.Z)(SweApiCollectionObjectParser, [{
    key: "parseData",
    value: function parseData(data) {}
  }]);
  return SweApiCollectionObjectParser;
}();
/* harmony default export */ var collection_SweApiCollectionObjectParser = (SweApiCollectionObjectParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/datastream/DataStreamFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var DataStreamFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(DataStreamFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(DataStreamFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {string[]} [properties.q=undefined] - Comma separated keywords used for full-text search
   * @param {number[]} [properties.bbox=undefined] - BBOX to filter resources on their location
   * @param {string} [properties.location=undefined] - WKT geometry and operator to filter resources on their location or geometry
   * @param {string[]} [properties.observedProperty=undefined] - Comma separated list of observed property URIs to get observations for
   * @param {string[]} [properties.featureOfInterest=undefined] - Comma separated list of feature of interest IDs to get observations for
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {string} [properties.validTime=undefined] - validTime - ISO 8601 time range to filter resources on their validity time.
   * When this parameter is omitted, the implicit value is "now", except for "history" collections where the absence of this parameter means no filtering is applied.
   * @param {string} [properties.resultTime=undefined] - validTime - ISO 8601 time range to filter observations on their result time.
   * When this parameter is omitted, no filtering on "resultTime" is applied.
   * @param {string} [properties.phenomenonTime=undefined] - validTime - ISO 8601 time range to filter observations on the phenomenon time.
   * When this parameter is omitted, no filtering on "phenomenonTime" is applied.
   */
  function DataStreamFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, DataStreamFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      q: undefined,
      bbox: undefined,
      location: undefined,
      observedProperty: undefined,
      featureOfInterest: undefined,
      select: undefined,
      format: 'application/json',
      obsFormat: 'application/om+json',
      validTime: undefined,
      phenomenonTime: undefined,
      resultTime: undefined
    }, properties)); //TODO: assertions
  }
  return (0,createClass/* default */.Z)(DataStreamFilter);
}(Filter);
/* harmony default export */ var datastream_DataStreamFilter = (DataStreamFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/featureofinterest/FeatureOfInterestFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var FeatureOfInterestFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(FeatureOfInterestFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(FeatureOfInterestFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {string[]} [properties.q=undefined] - Comma separated keywords used for full-text search
   * @param {number[]} [properties.bbox=undefined] - BBOX to filter resources on their location
   * @param {string} [properties.location=undefined] - WKT geometry and operator to filter resources on their location or geometry
   * @param {string} [properties.validTime=undefined] - validTime - ISO 8601 time range to filter resources on their validity time.
   * When this parameter is omitted, the implicit value is "now", except for "history" collections where the absence of this parameter means no filtering is applied.
   * @param {string[]} [properties.parent=undefined] - Comma separated list of parent resource IDs to restrict the search to or "*" to include nested resources at any level
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {String[]} [properties.featureOfInterest=undefined] Comma separated list of feature of interest IDs to get observations for.
   */
  function FeatureOfInterestFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, FeatureOfInterestFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      q: undefined,
      bbox: undefined,
      location: undefined,
      validTime: undefined,
      parent: undefined,
      select: undefined,
      featureOfInterest: undefined,
      format: 'application/json'
    }, properties)); //TODO: assertions
  }
  return (0,createClass/* default */.Z)(FeatureOfInterestFilter);
}(Filter);
/* harmony default export */ var featureofinterest_FeatureOfInterestFilter = (FeatureOfInterestFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/control/ControlFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var ControlFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(ControlFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(ControlFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {string[]} [properties.q=undefined] - Comma separated keywords used for full-text search
   * @param {string[]} [properties.actuableProperty=undefined] - Comma separated list of actuable property URIs to filter command streams
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {string} [properties.issueTime=undefined] - ISO 8601 time range to filter commands on their issue time. When this parameter is omitted,
   * no filtering on "issueTime" is applied.
   */
  function ControlFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, ControlFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      q: undefined,
      actuableProperty: undefined,
      observedProperty: undefined,
      issueTime: undefined,
      select: undefined,
      format: 'application/json'
    }, properties)); //TODO: assertions
  }
  return (0,createClass/* default */.Z)(ControlFilter);
}(Filter);
/* harmony default export */ var control_ControlFilter = (ControlFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/event/EventFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var EventFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(EventFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(EventFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {string[]} [properties.q=undefined] - Comma separated keywords used for full-text search
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {string} [properties.eventTime=undefined] - ISO 8601 time range to filter events on their timestamp. When this parameter
   * is omitted, no filtering on "eventTime" is applied.
   * @param {string} [properties.eventType=undefined] - Comma separated list of event type URIs to filter system events.
   */
  function EventFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, EventFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      q: undefined,
      eventTime: undefined,
      eventType: undefined,
      select: undefined,
      format: 'application/json'
    }, properties)); //TODO: assertions
  }
  return (0,createClass/* default */.Z)(EventFilter);
}(Filter);
/* harmony default export */ var event_EventFilter = (EventFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/history/SystemHistoryFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var SystemHistoryFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(SystemHistoryFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(SystemHistoryFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {string} [properties.validTime=undefined] - ISO 8601 time range to filter resources on their validity time.
   * When this parameter is omitted, the implicit value is "now", except for "history" collections where the absence of this parameter means no filtering is applied.
   */
  function SystemHistoryFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, SystemHistoryFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      select: undefined,
      validTime: undefined,
      format: 'application/json'
    }, properties)); //TODO: assertions
  }
  return (0,createClass/* default */.Z)(SystemHistoryFilter);
}(Filter);
/* harmony default export */ var history_SystemHistoryFilter = (SystemHistoryFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/ObservationsCollection.js








/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2021 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var ObservationsCollection = /*#__PURE__*/function (_Collection) {
  (0,inherits/* default */.Z)(ObservationsCollection, _Collection);
  var _super = (0,createSuper/* default */.Z)(ObservationsCollection);
  /**
   *
   */
  function ObservationsCollection(url, filter, pageSize, parser) {
    (0,classCallCheck/* default */.Z)(this, ObservationsCollection);
    return _super.call(this, url, filter, pageSize, parser, 'arraybuffer');
  }
  (0,createClass/* default */.Z)(ObservationsCollection, [{
    key: "parseResponse",
    value: function () {
      var _parseResponse = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(encodedResponse) {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", this.parser.parseDataBlock(encodedResponse, this.filter.props.format));
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function parseResponse(_x) {
        return _parseResponse.apply(this, arguments);
      }
      return parseResponse;
    }()
  }]);
  return ObservationsCollection;
}(sweapi_Collection);
/* harmony default export */ var sweapi_ObservationsCollection = (ObservationsCollection);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.values.js
var es_object_values = __webpack_require__(26833);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/AbstractParser.js













var AbstractParser = /*#__PURE__*/function () {
  function AbstractParser() {
    (0,classCallCheck/* default */.Z)(this, AbstractParser);
    this.stack = [];
    this.time = undefined;
    this.idRef = undefined;
  }
  (0,createClass/* default */.Z)(AbstractParser, [{
    key: "init",
    value: function init(element, props, path) {
      this.props = props;
      this.name = element.name;
      this.path = path;
      this.checkTime(element);
      this.checkId(element);
      this.build(element);
    }
  }, {
    key: "parseElement",
    value: function parseElement(element, path) {
      var parser;
      if (isDefined(path)) {
        this.path = path;
      }
      if (isDefined(this.path) && this.path in this.props.refs) {
        parser = new RefParser(this.props.refs[this.path]);
      } else if (element.name in this.props.refs) {
        parser = new RefParser(this.props.refs[element.name]);
      } else if (element.type in this.props.registeredParser) {
        parser = this.props.registeredParser[element.type]();
      } else if (element.hasOwnProperty('href')) {
        if ('href' in this.props.registeredParser) {
          parser = this.props.registeredParser['href']();
        } else {
          parser = new HRefParser();
        }
      } else if (element.type === 'DataRecord') {
        parser = new DataRecordParser(element, this.props);
      } else if (element.type === 'Vector') {
        parser = new VectorParser(element, this.props);
      } else if (element.type === 'DataArray') {
        parser = new DataArrayParser(element, this.props);
      }
      if (parser) {
        parser.init(element, this.props, this.path);
        this.stack.push(parser);
      }
    }
  }, {
    key: "build",
    value: function build(element) {}
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.stack),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var parser = _step.value;
          parser.parse(dataTypeParser, props, resultParent);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "checkId",
    value: function checkId(element) {
      if ('id' in element) {
        this.idRef = element['id'];
        this.props.nodesId[this.idRef] = this;
      }
    }
  }, {
    key: "checkIdValue",
    value: function checkIdValue(value) {
      if (this.idRef) {
        this.props.nodesIdValue[this.idRef] = value;
      }
    }

    // To be overridden by Time parser
  }, {
    key: "checkTime",
    value: function checkTime(element) {}
  }, {
    key: "getTimePropertyName",
    value: function getTimePropertyName() {
      if (!this.time) {
        // sub element, first level
        var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(this.stack),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var parser = _step2.value;
            this.time = parser.getTimePropertyName();
            if (this.time) {
              break;
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
      return this.time;
    }
  }, {
    key: "splitRefName",
    value: function splitRefName(ref) {
      var split = ref.split('/');
      if (split.length > 0) {
        return split[split.length - 1];
      } else {
        return ref;
      }
    }
  }]);
  return AbstractParser;
}();

var RefParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(RefParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(RefParser);
  function RefParser(parser) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, RefParser);
    _this = _super.call(this);
    _this.parser = parser;
    return _this;
  }
  (0,createClass/* default */.Z)(RefParser, [{
    key: "build",
    value: function build(element) {
      if (this.parser && this.parser.name) {
        this.name = this.parser.name;
      }
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      this.parser.parse(dataTypeParser, props, resultParent);
    }
  }]);
  return RefParser;
}(AbstractParser);
var DataRecordParser = /*#__PURE__*/function (_AbstractParser2) {
  (0,inherits/* default */.Z)(DataRecordParser, _AbstractParser2);
  var _super2 = (0,createSuper/* default */.Z)(DataRecordParser);
  function DataRecordParser() {
    (0,classCallCheck/* default */.Z)(this, DataRecordParser);
    return _super2.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(DataRecordParser, [{
    key: "build",
    value: function build(element) {
      // DataRecords + fields
      var fieldName = undefined;
      if (element.hasOwnProperty('fields')) {
        fieldName = 'fields';
      } else if (element.hasOwnProperty('field')) {
        fieldName = 'field';
      }
      if (!fieldName) {
        return;
      }
      var currentPath = this.path ? this.path + '/' : '/';
      if (Array.isArray(element[fieldName])) {
        var _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(element[fieldName]),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var field = _step3.value;
            this.parseElement(field, currentPath + field.name);
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
      } else {
        this.parseElement(element[fieldName], currentPath + element[fieldName].name);
      }
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      if (!this.name) {
        (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(DataRecordParser.prototype), "parse", this).call(this, dataTypeParser, props, resultParent);
      } else {
        // parse size of the array
        var result = {};
        var _iterator4 = (0,createForOfIteratorHelper/* default */.Z)(this.stack),
          _step4;
        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var parser = _step4.value;
            parser.parse(dataTypeParser, props, result);
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }
        resultParent[this.name] = result;
      }
    }
  }]);
  return DataRecordParser;
}(AbstractParser);
var DataArrayParser = /*#__PURE__*/function (_AbstractParser3) {
  (0,inherits/* default */.Z)(DataArrayParser, _AbstractParser3);
  var _super3 = (0,createSuper/* default */.Z)(DataArrayParser);
  function DataArrayParser() {
    (0,classCallCheck/* default */.Z)(this, DataArrayParser);
    return _super3.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(DataArrayParser, [{
    key: "build",
    value: function build(element) {
      // find elementCount parser
      this.parseElement(element['elementCount']);
      this.parseElement(element['elementType']);
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      // parse size of the array
      var objectSize = {};
      this.stack[0].parse(dataTypeParser, props, objectSize);
      var size = Object.values(objectSize)[0];
      var elementTypeParser = this.stack[1];
      var dataarrayResults = [];
      for (var i = 0; i < size; i++) {
        var subResult = {};
        elementTypeParser.parse(dataTypeParser, props, subResult);
        dataarrayResults.push(subResult);
      }
      resultParent[this.name] = dataarrayResults;
    }
  }]);
  return DataArrayParser;
}(AbstractParser);
var VectorParser = /*#__PURE__*/function (_AbstractParser4) {
  (0,inherits/* default */.Z)(VectorParser, _AbstractParser4);
  var _super4 = (0,createSuper/* default */.Z)(VectorParser);
  function VectorParser() {
    (0,classCallCheck/* default */.Z)(this, VectorParser);
    return _super4.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(VectorParser, [{
    key: "build",
    value: function build(element) {
      // Vector + coordinate
      var coordinatePropertyName = 'coordinates';
      if ('coordinate' in element) {
        coordinatePropertyName = 'coordinate';
      }
      var currentPath = this.path ? this.path + '/' : '/';
      var _iterator5 = (0,createForOfIteratorHelper/* default */.Z)(element[coordinatePropertyName]),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var coordinate = _step5.value;
          this.parseElement(coordinate, currentPath + coordinate.name);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      // parse size of the array
      var coordinates = {};
      var _iterator6 = (0,createForOfIteratorHelper/* default */.Z)(this.stack),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var parser = _step6.value;
          parser.parse(dataTypeParser, props, coordinates);
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      resultParent[this.name] = coordinates;
    }
  }]);
  return VectorParser;
}(AbstractParser);
var HRefParser = /*#__PURE__*/function (_AbstractParser5) {
  (0,inherits/* default */.Z)(HRefParser, _AbstractParser5);
  var _super5 = (0,createSuper/* default */.Z)(HRefParser);
  function HRefParser() {
    (0,classCallCheck/* default */.Z)(this, HRefParser);
    return _super5.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(HRefParser, [{
    key: "build",
    value: function build(element) {
      // find into href tree
      var hashLink = element.href;
      if (hashLink[0] !== '#') {
        throw Error("Href should start with #: ".concat(hashLink));
      }
      // remove first #
      var id = hashLink.slice(1);
      if (!(id in this.props.nodesId)) {
        throw Error("id ".concat(id, " not found in the id Tree"));
      }
      this.id = id;
      this.parser = this.props.nodesId[id];
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      // if (!(this.id in this.props.nodesIdValue)) {
      //     throw Error(`id ${this.id} not found in the idValue Tree`);
      // }
      // resultParent[this.parser.name] = this.props.nodesIdValue[this.id];
      if (this.id in this.props.nodesIdValue) {
        resultParent[this.parser.name] = this.props.nodesIdValue[this.id];
      } else {
        this.parser.parse(dataTypeParser, props, resultParent);
      }
    }
  }]);
  return HRefParser;
}(AbstractParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/TraverseParser.js





var TraverseParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(TraverseParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(TraverseParser);
  function TraverseParser() {
    (0,classCallCheck/* default */.Z)(this, TraverseParser);
    return _super.apply(this, arguments);
  }
  return (0,createClass/* default */.Z)(TraverseParser);
}(AbstractParser);
/* harmony default export */ var common_TraverseParser = (TraverseParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/RootParser.js





var RootParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(RootParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(RootParser);
  function RootParser() {
    (0,classCallCheck/* default */.Z)(this, RootParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(RootParser, [{
    key: "build",
    value: function build(element) {
      this.parseElement(element);
    }
  }]);
  return RootParser;
}(AbstractParser);
/* harmony default export */ var common_RootParser = (RootParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/GenericParser.js






var GenericParser = /*#__PURE__*/function () {
  function GenericParser(rootElement, props) {
    (0,classCallCheck/* default */.Z)(this, GenericParser);
    this.textDecoder = new TextDecoder();
    this.nodesId = {};
    this.parsers = [];
    this.count = 0;
    this.props = props;
    this.parser = new common_RootParser();
  }
  (0,createClass/* default */.Z)(GenericParser, [{
    key: "decode",
    value: function decode(input) {
      if (input instanceof ArrayBuffer) {
        return JSON.parse(this.textDecoder.decode(input));
      } else {
        try {
          return JSON.parse(input);
        } catch (e) {
          return input;
        }
      }
    }
  }]);
  return GenericParser;
}();
/* harmony default export */ var parsers_GenericParser = (GenericParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/TimeParser.js






var TimeParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(TimeParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(TimeParser);
  function TimeParser() {
    (0,classCallCheck/* default */.Z)(this, TimeParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(TimeParser, [{
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      var token = dataTypeParser.nextToken(this.path);
      resultParent[this.name] = new Date(token).toISOString();
    }
  }, {
    key: "checkTime",
    value: function checkTime(element) {
      if ('definition' in element && (element['definition'] === 'http://www.opengis.net/def/property/OGC/0/SamplingTime' || element['definition'] === 'http://www.opengis.net/def/property/OGC/0/PhenomenonTime')) {
        this.time = this.name;
      }
    }
  }]);
  return TimeParser;
}(AbstractParser);
/* harmony default export */ var common_TimeParser = (TimeParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/JsonDataParser.js












var JsonDataParser = /*#__PURE__*/function (_GenericParser) {
  (0,inherits/* default */.Z)(JsonDataParser, _GenericParser);
  var _super = (0,createSuper/* default */.Z)(JsonDataParser);
  function JsonDataParser(rootElement) {
    var _this;
    var properties = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      timeShift: 0
    };
    (0,classCallCheck/* default */.Z)(this, JsonDataParser);
    _this = _super.call(this, rootElement, (0,objectSpread2/* default */.Z)({
      nodesId: {},
      nodesIdValue: {},
      registeredParser: {
        'Time': function Time() {
          return new common_TimeParser();
        },
        'Category': function Category() {
          return new common_TraverseParser();
        },
        'Quantity': function Quantity() {
          return new common_TraverseParser();
        },
        'Count': function Count() {
          return new common_TraverseParser();
        },
        'Boolean': function Boolean() {
          return new common_TraverseParser();
        },
        'DataChoice': function DataChoice() {
          return new common_TraverseParser();
        }
      },
      refs: {}
    }, properties));
    _this.parser.init(rootElement, _this.props);
    return _this;
  }
  (0,createClass/* default */.Z)(JsonDataParser, [{
    key: "getTimeField",
    value: function getTimeField() {
      return this.parser.getTimePropertyName();
    }
  }, {
    key: "parseDataBlock",
    value: function parseDataBlock(input) {
      var jsonData;
      if (input instanceof ArrayBuffer) {
        jsonData = JSON.parse(this.textDecoder.decode(input));
      } else {
        try {
          jsonData = JSON.parse(input);
        } catch (e) {
          jsonData = input;
        }
      }
      if (Array.isArray(jsonData)) {
        var _iterator = (0,createForOfIteratorHelper/* default */.Z)(jsonData),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var d = _step.value;
            d['timestamp'] = new Date(d[this.getTimeField()]).getTime() + this.props.timeShift;
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        return jsonData;
      } else {
        jsonData['timestamp'] = new Date(jsonData[this.getTimeField()]).getTime() + this.props.timeShift;
        return [jsonData];
      }
    }
  }]);
  return JsonDataParser;
}(parsers_GenericParser);
/* harmony default export */ var parsers_JsonDataParser = (JsonDataParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/common/OmJsonParser.parser.js





var OmJsonParser = /*#__PURE__*/function (_JsonDataParser) {
  (0,inherits/* default */.Z)(OmJsonParser, _JsonDataParser);
  var _super = (0,createSuper/* default */.Z)(OmJsonParser);
  function OmJsonParser(rootElement) {
    (0,classCallCheck/* default */.Z)(this, OmJsonParser);
    return _super.call(this, rootElement);
  }
  (0,createClass/* default */.Z)(OmJsonParser, [{
    key: "getTimeField",
    value: function getTimeField() {
      return 'phenomenonTime';
    }
  }]);
  return OmJsonParser;
}(parsers_JsonDataParser);
/* harmony default export */ var OmJsonParser_parser = (OmJsonParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/observations/SweApiResult.parser.js








var SweApiResultParser = /*#__PURE__*/function () {
  function SweApiResultParser(dataObject) {
    (0,classCallCheck/* default */.Z)(this, SweApiResultParser);
    this.dataObject = dataObject;
    this.parsers = {
      'application/om+json': {
        schemaPromise: undefined,
        parser: undefined
      },
      'application/swe+json': {
        schemaPromise: undefined,
        parser: undefined
      },
      'application/swe+xml': {
        schemaPromise: undefined,
        parser: undefined
      },
      'application/swe+csv': {
        schemaPromise: undefined,
        parser: undefined
      },
      'application/swe+binary': {
        schemaPromise: undefined,
        parser: undefined
      }
    };
  }
  (0,createClass/* default */.Z)(SweApiResultParser, [{
    key: "checkParser",
    value: function () {
      var _checkParser = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(format) {
        var _this = this;
        var parser;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (format in this.parsers) {
                _context2.next = 2;
                break;
              }
              throw new Error("Not support format ".concat(format));
            case 2:
              parser = this.parsers[format];
              if (isDefined(parser.parser)) {
                _context2.next = 10;
                break;
              }
              if (!isDefined(parser.schemaPromise)) {
                this.parsers[format].schemaPromise = new Promise( /*#__PURE__*/function () {
                  var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(resolve, reject) {
                    var jsonSchema;
                    return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
                      while (1) switch (_context.prev = _context.next) {
                        case 0:
                          _context.prev = 0;
                          _context.next = 3;
                          return _this.dataObject.getSchema(new Filter({
                            obsFormat: format
                          }));
                        case 3:
                          jsonSchema = _context.sent;
                          _this.init(jsonSchema, format);
                          resolve();
                          _context.next = 12;
                          break;
                        case 8:
                          _context.prev = 8;
                          _context.t0 = _context["catch"](0);
                          console.error(_context.t0);
                          reject(_context.t0);
                        case 12:
                        case "end":
                          return _context.stop();
                      }
                    }, _callee, null, [[0, 8]]);
                  }));
                  return function (_x2, _x3) {
                    return _ref.apply(this, arguments);
                  };
                }());
              }
              _context2.next = 7;
              return parser.schemaPromise;
            case 7:
              return _context2.abrupt("return", this.parsers[format].parser);
            case 10:
              return _context2.abrupt("return", parser.parser);
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function checkParser(_x) {
        return _checkParser.apply(this, arguments);
      }
      return checkParser;
    }()
  }, {
    key: "init",
    value: function init(schema, format) {
      throw new Error('Unsupported Operation');
    }
  }, {
    key: "parseDataBlock",
    value: function () {
      var _parseDataBlock = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(arrayBuffer) {
        var format,
          parser,
          _args3 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              format = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : 'application/om+json';
              _context3.next = 3;
              return this.checkParser(format);
            case 3:
              parser = _context3.sent;
              return _context3.abrupt("return", parser.parseDataBlock(arrayBuffer));
            case 5:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function parseDataBlock(_x4) {
        return _parseDataBlock.apply(this, arguments);
      }
      return parseDataBlock;
    }()
  }]);
  return SweApiResultParser;
}();
/* harmony default export */ var SweApiResult_parser = (SweApiResultParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/common/SweJsonParser.parser.js





var SweJsonParser = /*#__PURE__*/function (_JsonDataParser) {
  (0,inherits/* default */.Z)(SweJsonParser, _JsonDataParser);
  var _super = (0,createSuper/* default */.Z)(SweJsonParser);
  function SweJsonParser(rootElement) {
    (0,classCallCheck/* default */.Z)(this, SweJsonParser);
    return _super.call(this, rootElement);
  }
  return (0,createClass/* default */.Z)(SweJsonParser);
}(parsers_JsonDataParser);
/* harmony default export */ var SweJsonParser_parser = (SweJsonParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/SkipParser.js





var SkipParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(SkipParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(SkipParser);
  function SkipParser() {
    (0,classCallCheck/* default */.Z)(this, SkipParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(SkipParser, [{
    key: "build",
    value: function build(element) {}
  }, {
    key: "parseElement",
    value: function parseElement(element) {}
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {}
  }, {
    key: "init",
    value: function init(element, props, path) {}
  }]);
  return SkipParser;
}(AbstractParser);
/* harmony default export */ var common_SkipParser = (SkipParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/BinaryEncodingParser.js






var BinaryEncodingParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(BinaryEncodingParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(BinaryEncodingParser);
  function BinaryEncodingParser() {
    (0,classCallCheck/* default */.Z)(this, BinaryEncodingParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(BinaryEncodingParser, [{
    key: "build",
    value: function build(element) {
      // iterate over member
      // old SOS property name
      var memberPropertyName = 'member';

      // new SWE property name
      if ('members' in element) {
        memberPropertyName = 'members';
      }
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(element[memberPropertyName]),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var member = _step.value;
          this.parseElement(member);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }]);
  return BinaryEncodingParser;
}(AbstractParser);
/* harmony default export */ var binary_BinaryEncodingParser = (BinaryEncodingParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/MemberParser.js





var MemberParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(MemberParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(MemberParser);
  function MemberParser() {
    (0,classCallCheck/* default */.Z)(this, MemberParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(MemberParser, [{
    key: "build",
    value: function build(element) {
      this.parseElement(element);
    }
  }]);
  return MemberParser;
}(AbstractParser);
/* harmony default export */ var binary_MemberParser = (MemberParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/dataType/BinaryDoubleDataTypeDecoder.js


// http://www.opengis.net/def/dataType/OGC/0/double
var BinaryDoubleDataTypeDecoder = /*#__PURE__*/function () {
  function BinaryDoubleDataTypeDecoder() {
    (0,classCallCheck/* default */.Z)(this, BinaryDoubleDataTypeDecoder);
  }
  (0,createClass/* default */.Z)(BinaryDoubleDataTypeDecoder, [{
    key: "decode",
    value: function decode(dataView, offset) {
      var littleEndian = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      return dataView.getFloat64(offset, littleEndian);
    }
  }, {
    key: "length",
    value: function length() {
      return 8;
    }
  }]);
  return BinaryDoubleDataTypeDecoder;
}();
/* harmony default export */ var dataType_BinaryDoubleDataTypeDecoder = (BinaryDoubleDataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/dataType/BinaryIntegerDataTypeDecoder.js


//http://www.opengis.net/def/dataType/OGC/0/signedInt
var BinaryIntegerDataTypeDecoder = /*#__PURE__*/function () {
  function BinaryIntegerDataTypeDecoder() {
    (0,classCallCheck/* default */.Z)(this, BinaryIntegerDataTypeDecoder);
  }
  (0,createClass/* default */.Z)(BinaryIntegerDataTypeDecoder, [{
    key: "decode",
    value: function decode(dataView, offset) {
      var littleEndian = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      return dataView.getUint32(offset, littleEndian);
    }
  }, {
    key: "length",
    value: function length() {
      return 4;
    }
  }]);
  return BinaryIntegerDataTypeDecoder;
}();
/* harmony default export */ var dataType_BinaryIntegerDataTypeDecoder = (BinaryIntegerDataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/dataType/BinaryShortDataTypeDecoder.js


//http://www.opengis.net/def/dataType/OGC/0/signedShort
var BinaryShortDataTypeDecoder = /*#__PURE__*/function () {
  function BinaryShortDataTypeDecoder() {
    (0,classCallCheck/* default */.Z)(this, BinaryShortDataTypeDecoder);
  }
  (0,createClass/* default */.Z)(BinaryShortDataTypeDecoder, [{
    key: "decode",
    value: function decode(dataView, offset) {
      var littleEndian = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      return dataView.getInt16(offset, littleEndian);
    }
  }, {
    key: "length",
    value: function length() {
      return 2;
    }
  }]);
  return BinaryShortDataTypeDecoder;
}();
/* harmony default export */ var dataType_BinaryShortDataTypeDecoder = (BinaryShortDataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/dataType/BinaryFloat32DataTypeDecoder.js


//http://www.opengis.net/def/dataType/OGC/0/float32
var BinaryFloat32DataTypeDecoder = /*#__PURE__*/function () {
  function BinaryFloat32DataTypeDecoder() {
    (0,classCallCheck/* default */.Z)(this, BinaryFloat32DataTypeDecoder);
  }
  (0,createClass/* default */.Z)(BinaryFloat32DataTypeDecoder, [{
    key: "decode",
    value: function decode(dataView, offset) {
      var littleEndian = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      return dataView.getFloat32(offset, littleEndian);
    }
  }, {
    key: "length",
    value: function length() {
      return 4;
    }
  }]);
  return BinaryFloat32DataTypeDecoder;
}();
/* harmony default export */ var dataType_BinaryFloat32DataTypeDecoder = (BinaryFloat32DataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/ComponentParser.js










var ComponentParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(ComponentParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(ComponentParser);
  function ComponentParser(binaryDataTypeDecoder) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, ComponentParser);
    _this = _super.call(this);
    _this.refs = {};
    _this.binaryDataTypeDecoder = binaryDataTypeDecoder;
    return _this;
  }
  (0,createClass/* default */.Z)(ComponentParser, [{
    key: "build",
    value: function build(element) {
      this.name = this.splitRefName(element.ref);
      if (element.dataType === 'http://www.opengis.net/def/dataType/OGC/0/double') {
        this.refs[element.ref] = new dataType_BinaryDoubleDataTypeDecoder();
      } else if (element.dataType === 'http://www.opengis.net/def/dataType/OGC/0/signedInt') {
        this.refs[element.ref] = new dataType_BinaryIntegerDataTypeDecoder();
      } else if (element.dataType === 'http://www.opengis.net/def/dataType/OGC/0/signedShort') {
        this.refs[element.ref] = new dataType_BinaryShortDataTypeDecoder();
      } else if (element.dataType === 'http://www.opengis.net/def/dataType/OGC/0/float32') {
        this.refs[element.ref] = new dataType_BinaryFloat32DataTypeDecoder();
      }
      if (element.ref in this.refs) {
        this.binaryDataTypeDecoder.addRef(element.ref, this.refs[element.ref]);
      }
    }
  }]);
  return ComponentParser;
}(AbstractParser);
/* harmony default export */ var binary_ComponentParser = (ComponentParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/dataType/BinaryBlockDataTypeDecoder.js



































var BinaryBlockDataTypeDecoder = /*#__PURE__*/function () {
  function BinaryBlockDataTypeDecoder() {
    (0,classCallCheck/* default */.Z)(this, BinaryBlockDataTypeDecoder);
  }
  (0,createClass/* default */.Z)(BinaryBlockDataTypeDecoder, [{
    key: "decode",
    value: function decode(dataView, offset) {
      var littleEndian = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var pktLength = dataView.getUint32(offset, littleEndian);
      // integer | 4 bytes | 32 bits
      var data = new Uint8Array(dataView.buffer.slice(offset + 4, offset + 4 + pktLength));
      this.length = function () {
        return pktLength + 4;
      };
      return data;
    }
  }, {
    key: "length",
    value: function length() {
      return 0;
    }
  }]);
  return BinaryBlockDataTypeDecoder;
}();
/* harmony default export */ var dataType_BinaryBlockDataTypeDecoder = (BinaryBlockDataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/BlockParser.js







var BlockParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(BlockParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(BlockParser);
  function BlockParser(binaryDataTypeDecoder) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, BlockParser);
    _this = _super.call(this);
    _this.binaryDataTypeDecoder = binaryDataTypeDecoder;
    return _this;
  }
  (0,createClass/* default */.Z)(BlockParser, [{
    key: "build",
    value: function build(element) {
      this.staticProps = {};
      // check for static props
      for (var prop in element) {
        if (prop !== 'ref' && prop !== 'type') {
          this.staticProps[prop] = element[prop];
        }
      }
      this.name = this.splitRefName(element.ref);
      this.path = element.ref;
      this.props.refs[element.ref] = this;
      this.binaryDataTypeDecoder.addRef(element.ref, new dataType_BinaryBlockDataTypeDecoder());
      this.binaryDataTypeDecoder.hasBlock = true;
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      // everytime a binaryblock is defined in the binary encoding, there will be a 4-bytes length field before it
      var block = {
        data: dataTypeParser.nextToken(this.path)
      };
      for (var prop in this.staticProps) {
        block[prop] = this.staticProps[prop];
      }
      resultParent[this.name] = block;
    }
  }]);
  return BlockParser;
}(AbstractParser);
/* harmony default export */ var binary_BlockParser = (BlockParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/AbstractDataTypeDecoder.js



var AbstractDataTypeDecoder = /*#__PURE__*/function () {
  function AbstractDataTypeDecoder(props) {
    (0,classCallCheck/* default */.Z)(this, AbstractDataTypeDecoder);
    this.props = props;
  }
  (0,createClass/* default */.Z)(AbstractDataTypeDecoder, [{
    key: "init",
    value: function init() {}
  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
      this.init();
    }
  }, {
    key: "checkInit",
    value: function checkInit() {
      throw Error('Unsupported Operation');
    }
  }, {
    key: "nextToken",
    value: function nextToken() {
      throw Error('Unsupported Operation');
    }
  }, {
    key: "hasNextBlock",
    value: function hasNextBlock() {
      throw Error('Unsupported Operation');
    }
  }]);
  return AbstractDataTypeDecoder;
}();
/* harmony default export */ var parsers_AbstractDataTypeDecoder = (AbstractDataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/dataType/BinaryDataTypeDecoder.js







var BinaryDataTypeDecoder = /*#__PURE__*/function (_AbstractDataTypeDeco) {
  (0,inherits/* default */.Z)(BinaryDataTypeDecoder, _AbstractDataTypeDeco);
  var _super = (0,createSuper/* default */.Z)(BinaryDataTypeDecoder);
  function BinaryDataTypeDecoder(props) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, BinaryDataTypeDecoder);
    _this = _super.call(this, props);
    _this.decoders = {};
    _this.componentsLength = 0;
    return _this;
  }
  (0,createClass/* default */.Z)(BinaryDataTypeDecoder, [{
    key: "init",
    value: function init() {
      this.data = new DataView(this.data);
      this.componentIdx = 0;
      this.tokenOffset = 0;
    }
  }, {
    key: "nextToken",
    value: function nextToken(path) {
      var decoder = this.decoders[path];
      // block Offset + token Offset
      var token = decoder.decode(this.data, this.tokenOffset, this.props.littleEndian);
      this.tokenOffset += decoder.length();
      return token;
    }
  }, {
    key: "hasNextBlock",
    value: function hasNextBlock() {
      return this.tokenOffset < this.data.buffer.byteLength;
    }
  }, {
    key: "addRef",
    value: function addRef(ref, decoder) {
      this.decoders[ref] = decoder;
      this.componentsLength += decoder.length();
    }
  }]);
  return BinaryDataTypeDecoder;
}(parsers_AbstractDataTypeDecoder);
/* harmony default export */ var dataType_BinaryDataTypeDecoder = (BinaryDataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/StringParser.js






var StringParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(StringParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(StringParser);
  function StringParser() {
    (0,classCallCheck/* default */.Z)(this, StringParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(StringParser, [{
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      resultParent[this.name] = dataTypeParser.nextToken(this.path);
    }
  }]);
  return StringParser;
}(AbstractParser);
/* harmony default export */ var common_StringParser = (StringParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/DecimalParser.js







var DecimalParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(DecimalParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(DecimalParser);
  function DecimalParser() {
    (0,classCallCheck/* default */.Z)(this, DecimalParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(DecimalParser, [{
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      var token = dataTypeParser.nextToken(this.path);
      var val;
      if ("INF" === token || "+INF" === token) val = Number.POSITIVE_INFINITY;else if ("-INF" === token) val = Number.NEGATIVE_INFINITY;else val = parseFloat(token);
      resultParent[this.name] = val;
    }
  }]);
  return DecimalParser;
}(AbstractParser);
/* harmony default export */ var common_DecimalParser = (DecimalParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/CountParser.js








var CountParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(CountParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(CountParser);
  function CountParser() {
    (0,classCallCheck/* default */.Z)(this, CountParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(CountParser, [{
    key: "build",
    value: function build(element) {
      if ('value' in element) {
        this.value = parseInt(element['value']);
      }
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      var value = this.value ? this.value : parseInt(dataTypeParser.nextToken(this.path));
      (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(CountParser.prototype), "checkIdValue", this).call(this, value);
      resultParent[this.name] = value;
    }
  }]);
  return CountParser;
}(AbstractParser);
/* harmony default export */ var common_CountParser = (CountParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/BooleanParser.js






var BooleanParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(BooleanParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(BooleanParser);
  function BooleanParser() {
    (0,classCallCheck/* default */.Z)(this, BooleanParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(BooleanParser, [{
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      var token = dataTypeParser.nextToken(this.path);
      resultParent[this.name] = token === '0' || token.toLowerCase() === 'true';
    }
  }]);
  return BooleanParser;
}(AbstractParser);
/* harmony default export */ var common_BooleanParser = (BooleanParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/AbstractDataChoiceParser.js








var AbstractDataChoiceParser = /*#__PURE__*/function (_AbstractParser) {
  (0,inherits/* default */.Z)(AbstractDataChoiceParser, _AbstractParser);
  var _super = (0,createSuper/* default */.Z)(AbstractDataChoiceParser);
  function AbstractDataChoiceParser() {
    (0,classCallCheck/* default */.Z)(this, AbstractDataChoiceParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(AbstractDataChoiceParser, [{
    key: "build",
    value: function build(element) {
      var itemName = undefined;
      if (element.hasOwnProperty('items')) {
        itemName = 'items';
      } else if (element.hasOwnProperty('item')) {
        itemName = 'item';
      }
      this.itemToParserMap = {};
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(element[itemName]),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var item = _step.value;
          this.parseElement(item);
        }
        // index parser depending on input name
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(this.stack),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var parser = _step2.value;
          this.itemToParserMap[parser.name] = parser;
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      throw new Error('Unsupported Operation');
    }
  }]);
  return AbstractDataChoiceParser;
}(AbstractParser);
/* harmony default export */ var common_AbstractDataChoiceParser = (AbstractDataChoiceParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/common/DataChoiceParser.js





var DataChoiceParser = /*#__PURE__*/function (_AbstractDataChoicePa) {
  (0,inherits/* default */.Z)(DataChoiceParser, _AbstractDataChoicePa);
  var _super = (0,createSuper/* default */.Z)(DataChoiceParser);
  function DataChoiceParser() {
    (0,classCallCheck/* default */.Z)(this, DataChoiceParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(DataChoiceParser, [{
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      var itemName = dataTypeParser.nextToken(this.path);
      this.itemToParserMap[itemName].parse(dataTypeParser, props, resultParent);
    }
  }]);
  return DataChoiceParser;
}(common_AbstractDataChoiceParser);
/* harmony default export */ var common_DataChoiceParser = (DataChoiceParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/binary/BinaryTimeParser.js






var BinaryTimeParser = /*#__PURE__*/function (_TimeParser) {
  (0,inherits/* default */.Z)(BinaryTimeParser, _TimeParser);
  var _super = (0,createSuper/* default */.Z)(BinaryTimeParser);
  function BinaryTimeParser() {
    (0,classCallCheck/* default */.Z)(this, BinaryTimeParser);
    return _super.call(this);
  }
  (0,createClass/* default */.Z)(BinaryTimeParser, [{
    key: "parse",
    value: function parse(dataTypeParser, props, resultParent) {
      var token = dataTypeParser.nextToken(this.path);
      resultParent[this.name] = new Date(token * 1000).toISOString();
    }
  }]);
  return BinaryTimeParser;
}(common_TimeParser);
/* harmony default export */ var binary_BinaryTimeParser = (BinaryTimeParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/BinaryDataParser.js




















var BinaryDataParser = /*#__PURE__*/function (_GenericParser) {
  (0,inherits/* default */.Z)(BinaryDataParser, _GenericParser);
  var _super = (0,createSuper/* default */.Z)(BinaryDataParser);
  function BinaryDataParser(rootElement, encoding) {
    var _this;
    var properties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {
      timeShift: 0
    };
    (0,classCallCheck/* default */.Z)(this, BinaryDataParser);
    _this = _super.call(this, rootElement, (0,objectSpread2/* default */.Z)({
      nodesId: {},
      nodesIdValue: {},
      registeredParser: {},
      refs: {}
    }, properties));
    _this.resultEncoding = encoding;
    _this.binaryDataTypeDecoder = new dataType_BinaryDataTypeDecoder((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, encoding), {}, {
      littleEndian: encoding.byteOrder === 'littleEndian'
    }));
    var propsEncoding = {
      nodesId: {},
      nodesIdValue: {},
      registeredParser: {
        'member': function member() {
          return new binary_MemberParser();
        },
        'Component': function Component() {
          return new binary_ComponentParser(_this.binaryDataTypeDecoder);
        },
        'Block': function Block() {
          return new binary_BlockParser(_this.binaryDataTypeDecoder);
        },
        'BinaryEncoding': function BinaryEncoding() {
          return new binary_BinaryEncodingParser();
        }
      },
      refs: {}
    };
    // parse ResultEncoding
    var rootElementEncoding = new common_RootParser();
    rootElementEncoding.init(encoding, propsEncoding);

    // parse schema
    _this.props.registeredParser = {
      'Time': function Time() {
        return new binary_BinaryTimeParser();
      },
      'Category': function Category() {
        return new common_StringParser();
      },
      'Quantity': function Quantity() {
        return new common_DecimalParser();
      },
      'Count': function Count() {
        return new common_CountParser();
      },
      'Boolean': function Boolean() {
        return new common_BooleanParser();
      },
      'DataChoice': function DataChoice() {
        return new common_DataChoiceParser();
      },
      'href': function href() {
        return new common_SkipParser();
      }
    };
    //
    _this.parser.init(rootElement, (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, _this.props), {}, {
      refs: propsEncoding.refs
    }), '');
    return _this;
  }
  (0,createClass/* default */.Z)(BinaryDataParser, [{
    key: "parseDataBlock",
    value: function parseDataBlock(arrayBuffer) {
      this.binaryDataTypeDecoder.setData(arrayBuffer);
      var results = [];
      while (this.binaryDataTypeDecoder.hasNextBlock()) {
        var res = {};
        this.parser.parse(this.binaryDataTypeDecoder, {}, res);
        res['timestamp'] = new Date(res[this.parser.getTimePropertyName()]).getTime() + this.props.timeShift;
        results.push(res);
      }
      return results;
    }
  }]);
  return BinaryDataParser;
}(parsers_GenericParser);
/* harmony default export */ var parsers_BinaryDataParser = (BinaryDataParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/common/SweBinaryParser.parser.js





var SweBinaryParser = /*#__PURE__*/function (_BinaryDataParser) {
  (0,inherits/* default */.Z)(SweBinaryParser, _BinaryDataParser);
  var _super = (0,createSuper/* default */.Z)(SweBinaryParser);
  function SweBinaryParser(rootElement, encoding) {
    (0,classCallCheck/* default */.Z)(this, SweBinaryParser);
    return _super.call(this, rootElement, encoding);
  }
  return (0,createClass/* default */.Z)(SweBinaryParser);
}(parsers_BinaryDataParser);
/* harmony default export */ var SweBinaryParser_parser = (SweBinaryParser);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js
var es_string_split = __webpack_require__(23123);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/text/TextDataTypeDecoder.js








var TextDataTypeDecoder = /*#__PURE__*/function (_AbstractDataTypeDeco) {
  (0,inherits/* default */.Z)(TextDataTypeDecoder, _AbstractDataTypeDeco);
  var _super = (0,createSuper/* default */.Z)(TextDataTypeDecoder);
  function TextDataTypeDecoder(props) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, TextDataTypeDecoder);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)({
      blockSeparator: ' ',
      collapseWhiteSpaces: true,
      decimalSeparator: '.',
      tokenSeparator: ','
    }, props));
    _this.init();
    return _this;
  }
  (0,createClass/* default */.Z)(TextDataTypeDecoder, [{
    key: "init",
    value: function init() {
      this.blocks = [];
      this.blocksIdx = -1;
      this.tokens = [];
      this.tokensIdx = 0;
    }
  }, {
    key: "checkInit",
    value: function checkInit() {
      if (this.blocksIdx === -1) {
        // split
        this.blocks = this.data.split(this.props.blockSeparator);
        this.blocksIdx = 0;
      }
    }
  }, {
    key: "nextToken",
    value: function nextToken() {
      this.checkInit();
      // if no more token in current block
      if (this.tokensIdx >= this.tokens.length) {
        // if no more block
        if (this.blocks.length === 0 || this.blocksIdx >= this.blocks.length) {
          return null;
        }
        // parse new token
        this.tokens = this.blocks[this.blocksIdx++].split(this.props.tokenSeparator);
        this.tokensIdx = 0;
      }
      return this.tokens[this.tokensIdx++];
    }
  }, {
    key: "hasNextBlock",
    value: function hasNextBlock() {
      this.checkInit();
      return this.blocks.length > 0 && this.blocksIdx < this.blocks.length && this.blocks[this.blocksIdx] !== '';
    }
  }]);
  return TextDataTypeDecoder;
}(parsers_AbstractDataTypeDecoder);
/* harmony default export */ var text_TextDataTypeDecoder = (TextDataTypeDecoder);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/TextDataParser.js

















var TextDataParser = /*#__PURE__*/function (_GenericParser) {
  (0,inherits/* default */.Z)(TextDataParser, _GenericParser);
  var _super = (0,createSuper/* default */.Z)(TextDataParser);
  function TextDataParser(rootElement, encoding) {
    var _this;
    var properties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {
      timeShift: 0
    };
    (0,classCallCheck/* default */.Z)(this, TextDataParser);
    _this = _super.call(this, rootElement, (0,objectSpread2/* default */.Z)({
      nodesId: {},
      nodesIdValue: {},
      registeredParser: {},
      refs: {}
    }, properties));
    _this.resultEncoding = encoding;
    _this.textDataTypeDecoder = new text_TextDataTypeDecoder(_this.resultEncoding);
    _this.props.registeredParser = {
      'Time': function Time() {
        return new common_TimeParser();
      },
      'Category': function Category() {
        return new common_StringParser();
      },
      'Quantity': function Quantity() {
        return new common_DecimalParser();
      },
      'Count': function Count() {
        return new common_CountParser();
      },
      'Boolean': function Boolean() {
        return new common_BooleanParser();
      },
      'DataChoice': function DataChoice() {
        return new common_DataChoiceParser();
      }
    };
    _this.parser.init(rootElement, _this.props, '');
    return _this;
  }
  (0,createClass/* default */.Z)(TextDataParser, [{
    key: "parseDataBlock",
    value: function parseDataBlock(input) {
      var dataBlocks;
      if (input instanceof ArrayBuffer) {
        dataBlocks = this.textDecoder.decode(input);
      } else {
        dataBlocks = input;
      }
      this.textDataTypeDecoder.setData(dataBlocks);
      var results = [];
      while (this.textDataTypeDecoder.hasNextBlock()) {
        var res = {};
        this.parser.parse(this.textDataTypeDecoder, {}, res);
        res['timestamp'] = new Date(res[this.parser.getTimePropertyName()]).getTime() + this.props.timeShift;
        results.push(res);
      }
      return results;
    }
  }]);
  return TextDataParser;
}(parsers_GenericParser);
/* harmony default export */ var parsers_TextDataParser = (TextDataParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/common/SweCsvParser.parser.js





var SweCsvParser = /*#__PURE__*/function (_TextDataParser) {
  (0,inherits/* default */.Z)(SweCsvParser, _TextDataParser);
  var _super = (0,createSuper/* default */.Z)(SweCsvParser);
  function SweCsvParser(rootElement, encoding) {
    (0,classCallCheck/* default */.Z)(this, SweCsvParser);
    return _super.call(this, rootElement, encoding);
  }
  return (0,createClass/* default */.Z)(SweCsvParser);
}(parsers_TextDataParser);
/* harmony default export */ var SweCsvParser_parser = (SweCsvParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/observations/SweApiResult.datastream.parser.js











var SweApiResultDatastreamParser = /*#__PURE__*/function (_SweApiResultParser) {
  (0,inherits/* default */.Z)(SweApiResultDatastreamParser, _SweApiResultParser);
  var _super = (0,createSuper/* default */.Z)(SweApiResultDatastreamParser);
  function SweApiResultDatastreamParser(dataObject) {
    (0,classCallCheck/* default */.Z)(this, SweApiResultDatastreamParser);
    return _super.call(this, dataObject);
  }
  (0,createClass/* default */.Z)(SweApiResultDatastreamParser, [{
    key: "init",
    value: function init(schema, format) {
      if (format in this.parsers && isDefined(this.parsers[format].parser)) {
        return this.parsers[format].parser;
      }
      if (format === 'application/om+json') {
        //resultSchema
        this.parsers[format].parser = new OmJsonParser_parser(schema.resultSchema);
      } else if (format === 'application/swe+json') {
        //recordSchema
        this.parsers[format].parser = new SweJsonParser_parser(schema.recordSchema);
      } /*else if(format === 'application/swe+xml') {
          //recordSchema
          this.parsers[format].parser = new SweXmlParser(schema.recordSchema);
        }*/else if (format === 'application/swe+binary') {
        //recordSchema
        this.parsers[format].parser = new SweBinaryParser_parser(schema.recordSchema, schema.recordEncoding);
      } else if (format === 'application/swe+csv') {
        //recordSchema
        this.parsers[format].parser = new SweCsvParser_parser(schema.recordSchema, schema.recordEncoding);
      } else {
        throw Error("Not supported parser format: ".concat(format));
      }
    }
  }]);
  return SweApiResultDatastreamParser;
}(SweApiResult_parser);
/* harmony default export */ var SweApiResult_datastream_parser = (SweApiResultDatastreamParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/CollectionOmJsonParser.parser.js







var OmJsonCollectionParser = /*#__PURE__*/function (_OmJsonParser) {
  (0,inherits/* default */.Z)(OmJsonCollectionParser, _OmJsonParser);
  var _super = (0,createSuper/* default */.Z)(OmJsonCollectionParser);
  function OmJsonCollectionParser(rootElement) {
    (0,classCallCheck/* default */.Z)(this, OmJsonCollectionParser);
    return _super.call(this, rootElement);
  }
  (0,createClass/* default */.Z)(OmJsonCollectionParser, [{
    key: "getTimeField",
    value: function getTimeField() {
      return 'phenomenonTime';
    }
  }, {
    key: "parseDataBlock",
    value: function parseDataBlock(arrayBuffer) {
      var dataBlock = this.textDecoder.decode(arrayBuffer);
      var jsonData = JSON.parse(dataBlock);
      var result = [];
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(jsonData.items),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var d = _step.value;
          d['timestamp'] = new Date(d[this.getTimeField()]).getTime();
          result.push(d);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return result;
    }
  }]);
  return OmJsonCollectionParser;
}(OmJsonParser_parser);
/* harmony default export */ var CollectionOmJsonParser_parser = (OmJsonCollectionParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/observations/SweApiResult.collection.datastream.parser.js









var SweApiResultCollectionDatastreamParser = /*#__PURE__*/function (_SweApiResultDatastre) {
  (0,inherits/* default */.Z)(SweApiResultCollectionDatastreamParser, _SweApiResultDatastre);
  var _super = (0,createSuper/* default */.Z)(SweApiResultCollectionDatastreamParser);
  function SweApiResultCollectionDatastreamParser(dataObject) {
    (0,classCallCheck/* default */.Z)(this, SweApiResultCollectionDatastreamParser);
    return _super.call(this, dataObject);
  }
  (0,createClass/* default */.Z)(SweApiResultCollectionDatastreamParser, [{
    key: "init",
    value: function init(schema, format) {
      if (format === 'application/om+json') {
        //resultSchema
        this.parsers[format].parser = new CollectionOmJsonParser_parser(schema.resultSchema);
      } else if (format === 'application/swe+xml') {
        //resultSchema
        throw new Error("Format not supported ".concat(format));
      } else {
        (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(SweApiResultCollectionDatastreamParser.prototype), "init", this).call(this, schema, format);
      }
    }
  }]);
  return SweApiResultCollectionDatastreamParser;
}(SweApiResult_datastream_parser);
/* harmony default export */ var SweApiResult_collection_datastream_parser = (SweApiResultCollectionDatastreamParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/datastream/DataStream.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/








var DataStream = /*#__PURE__*/function (_SensorWebApi) {
  (0,inherits/* default */.Z)(DataStream, _SensorWebApi);
  var _super = (0,createSuper/* default */.Z)(DataStream);
  /**
   * @param {Object} properties - the properties of the object
   * @param {Object} [networkProperties={}]
   * @param {String} networkProperties.endpointUrl - defines the Http(s) endpoint URL
   * @param {Boolean} networkProperties.tls - defines is use Http or Https secure protocol for fetching data
   * @param {String} [networkProperties.streamProtocol='ws'] - the Stream protocol to use: 'ws' pr 'mqtt'
   * @param {Object} [networkProperties.mqttOpts={}] - the Mqtt options if stream protocol is 'mqtt'
   * @param {String} networkProperties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} networkProperties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   */
  function DataStream(properties, networkProperties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, DataStream);
    _this = _super.call(this, networkProperties); // network properties
    _this.properties = properties;
    _this.sweApiResultParser = new SweApiResult_datastream_parser((0,assertThisInitialized/* default */.Z)(_this));
    _this.sweApiResultCollectionDatastreamParser = new SweApiResult_collection_datastream_parser((0,assertThisInitialized/* default */.Z)(_this));
    return _this;
  }

  /**
   * Retrieve historical observations from a datastream
   * route: /datastreams/{id}/observations
   * @param {ObservationFilter} [observationFilter=new ObservationFilter()] - default ObservationFilter
   * @param {Function} callback - A callback to get observations
   */
  (0,createClass/* default */.Z)(DataStream, [{
    key: "streamObservations",
    value: function streamObservations() {
      var _this2 = this;
      var observationFilter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new observation_ObservationFilter();
      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      this.stream().onMessage = /*#__PURE__*/function () {
        var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(message) {
          var dataBlock;
          return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return _this2.sweApiResultParser.parseDataBlock(message, observationFilter.props.format);
              case 2:
                dataBlock = _context.sent;
                callback(dataBlock);
              case 4:
              case "end":
                return _context.stop();
            }
          }, _callee);
        }));
        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }();
      return this.stream().doRequest(routes_conf.datastreams.observations.replace('{id}', this.properties.id), observationFilter.toQueryString([], ['phenomenonTime']), 'arraybuffer');
    }

    /**
     * Retrieve historical observations from a datastream
     * route: /datastreams/{id}/observations
     * @param {ObservationFilter} [observationFilter=new ObservationFilter()] - default ObservationFilter
     * @param {Number} [pageSize=10] - default page size
     * @param {DataSourceParser} [parser=new SweApiResultParser()] - default observations parser
     * @return {Collection<JSON>} - result observations as JSON
     */
  }, {
    key: "searchObservations",
    value: function () {
      var _searchObservations = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        var observationFilter,
          pageSize,
          parser,
          _args2 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              observationFilter = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : new observation_ObservationFilter();
              pageSize = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 10;
              parser = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : this.sweApiResultParser;
              return _context2.abrupt("return", new sweapi_ObservationsCollection(this.baseUrl() + routes_conf.datastreams.observations.replace('{id}', this.properties.id), observationFilter, pageSize, this.sweApiResultCollectionDatastreamParser));
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function searchObservations() {
        return _searchObservations.apply(this, arguments);
      }
      return searchObservations;
    }()
    /**
     * Get the schema of a datastream
     * route: /datastreams/{id}/schema
     * @param {DataStreamFilter} [dataStreamFilter=new DataStreamFilter()] - default datastream filter
     * @return {Promise<JSON>} - the JSON schema
     */
  }, {
    key: "getSchema",
    value: function () {
      var _getSchema = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        var dataStreamFilter,
          apiUrl,
          queryString,
          _args3 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              dataStreamFilter = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : new datastream_DataStreamFilter();
              apiUrl = routes_conf.datastreams.schema.replace('{id}', this.properties.id);
              queryString = dataStreamFilter.toQueryString(['select', 'obsFormat']);
              return _context3.abrupt("return", this.fetchAsJson(apiUrl, queryString));
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getSchema() {
        return _getSchema.apply(this, arguments);
      }
      return getSchema;
    }()
  }]);
  return DataStream;
}(sweapi_SensorWebApi);
/* harmony default export */ var datastream_DataStream = (DataStream);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiDataStream.parser.js







var SweApiDataStreamParser = /*#__PURE__*/function (_SweApiCollectionObje) {
  (0,inherits/* default */.Z)(SweApiDataStreamParser, _SweApiCollectionObje);
  var _super = (0,createSuper/* default */.Z)(SweApiDataStreamParser);
  function SweApiDataStreamParser() {
    (0,classCallCheck/* default */.Z)(this, SweApiDataStreamParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(SweApiDataStreamParser, [{
    key: "parseData",
    value: function parseData(data) {
      return new datastream_DataStream(data, (0,objectSpread2/* default */.Z)({
        streamProtocol: 'ws'
      }, this.networkProperties));
    }
  }]);
  return SweApiDataStreamParser;
}(collection_SweApiCollectionObjectParser);
/* harmony default export */ var SweApiDataStream_parser = (SweApiDataStreamParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/featureofinterest/FeatureOfInterest.js




/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var FeatureOfInterest = /*#__PURE__*/function (_SensorWebApi) {
  (0,inherits/* default */.Z)(FeatureOfInterest, _SensorWebApi);
  var _super = (0,createSuper/* default */.Z)(FeatureOfInterest);
  /**
   * @param {Object} properties - the properties of the object
   * @param {Object} [networkProperties={}]
   * @param {String} networkProperties.endpointUrl - defines the Http(s) endpoint URL
   * @param {Boolean} networkProperties.tls - defines is use Http or Https secure protocol for fetching data
   * @param {String} [networkProperties.streamProtocol='ws'] - the Stream protocol to use: 'ws' pr 'mqtt'
   * @param {Object} [networkProperties.mqttOpts={}] - the Mqtt options if stream protocol is 'mqtt'
   * @param {String} networkProperties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} networkProperties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   */
  function FeatureOfInterest(properties, networkProperties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, FeatureOfInterest);
    _this = _super.call(this, networkProperties); // network properties
    _this.properties = properties;
    return _this;
  }
  return (0,createClass/* default */.Z)(FeatureOfInterest);
}(sweapi_SensorWebApi);
/* harmony default export */ var featureofinterest_FeatureOfInterest = (FeatureOfInterest);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiFetchFeatureOfInterest.parser.js







var SweApiFetchFeatureOfInterestParser = /*#__PURE__*/function (_SweApiCollectionObje) {
  (0,inherits/* default */.Z)(SweApiFetchFeatureOfInterestParser, _SweApiCollectionObje);
  var _super = (0,createSuper/* default */.Z)(SweApiFetchFeatureOfInterestParser);
  function SweApiFetchFeatureOfInterestParser() {
    (0,classCallCheck/* default */.Z)(this, SweApiFetchFeatureOfInterestParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(SweApiFetchFeatureOfInterestParser, [{
    key: "parseData",
    value: function parseData(data) {
      return new featureofinterest_FeatureOfInterest((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, data), {}, {
        geometry: data.geometry || undefined,
        bbox: data.bbox || undefined
      }), this.networkProperties);
    }
  }]);
  return SweApiFetchFeatureOfInterestParser;
}(collection_SweApiCollectionObjectParser);
/* harmony default export */ var SweApiFetchFeatureOfInterest_parser = (SweApiFetchFeatureOfInterestParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiFetchEvent.parser.js





var SweApiFetchEventParser = /*#__PURE__*/function (_SweApiCollectionObje) {
  (0,inherits/* default */.Z)(SweApiFetchEventParser, _SweApiCollectionObje);
  var _super = (0,createSuper/* default */.Z)(SweApiFetchEventParser);
  function SweApiFetchEventParser() {
    (0,classCallCheck/* default */.Z)(this, SweApiFetchEventParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(SweApiFetchEventParser, [{
    key: "parseData",
    value: function parseData(data) {
      return new Event(data, this.networkProperties);
    }
  }]);
  return SweApiFetchEventParser;
}(collection_SweApiCollectionObjectParser);
/* harmony default export */ var SweApiFetchEvent_parser = (SweApiFetchEventParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/command/CommandFilter.js





/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2021 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/


var CommandFilter = /*#__PURE__*/function (_SensorWebApiFilter) {
  (0,inherits/* default */.Z)(CommandFilter, _SensorWebApiFilter);
  var _super = (0,createSuper/* default */.Z)(CommandFilter);
  /**
   *
   * @param {Object} properties - object properties
   * @param {string[]} [properties.q=undefined] - Comma separated keywords used for full-text search
   * @param {string[]} [properties.actuableProperty=undefined] - Comma separated list of actuable property URIs to filter command streams
   * @param {string[]} [properties.select=undefined] - Comma separated list of properties to include or exclude from results (use "!" prefix to exclude)
   * @param {string} [properties.format='application/json'] - Mime type designating the format to use to encode the response.
   * @param {string} [properties.issueTime=undefined] - ISO 8601 time range to filter commands on their issue time. When this parameter is omitted,
   * no filtering on "issueTime" is applied.
   * @param {string} [properties.executionTime=undefined] - ISO 8601 time range to filter commands on their execution time.
   * When this parameter is omitted, no filtering on "executionTime" is applied
   * @param {string} [properties.reportTime=undefined] - ISO 8601 time range to filter status messages on their report time. When this parameter is omitted,
   * no filtering on "reportTime" is applied.
   * @param {string[]} [properties.statusCode=undefined] - Comma separated list of status codes: PENDING, ACCEPTED, REJECTED, SCHEDULED, UPDATED, CANCELED, EXECUTING, FAILED, COMPLETED
   */
  function CommandFilter(properties) {
    (0,classCallCheck/* default */.Z)(this, CommandFilter);
    return _super.call(this, (0,objectSpread2/* default */.Z)({
      q: undefined,
      actuableProperty: undefined,
      select: undefined,
      format: 'application/json',
      issueTime: undefined,
      executionTime: undefined,
      reportTime: undefined,
      statusCode: undefined
    }, properties)); //TODO: assertions
  }
  return (0,createClass/* default */.Z)(CommandFilter);
}(Filter);
/* harmony default export */ var command_CommandFilter = (CommandFilter);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/observations/SweApiResult.control.parser.js










var SweApiResultControlParser = /*#__PURE__*/function (_SweApiResultParser) {
  (0,inherits/* default */.Z)(SweApiResultControlParser, _SweApiResultParser);
  var _super = (0,createSuper/* default */.Z)(SweApiResultControlParser);
  function SweApiResultControlParser(dataObject) {
    (0,classCallCheck/* default */.Z)(this, SweApiResultControlParser);
    return _super.call(this, dataObject);
  }
  (0,createClass/* default */.Z)(SweApiResultControlParser, [{
    key: "init",
    value: function init(schema, format) {
      if (format === 'application/om+json') {
        //resultSchema
        this.parsers[format].parser = new OmJsonParser_parser(schema.commandSchema);
      } else if (format === 'application/swe+json') {
        //recordSchema
        this.parsers[format].parser = new SweJsonParser_parser(schema.commandSchema);
      } /*else if(format === 'application/swe+xml') {
          //recordSchema
          this.parsers[format].parser = new SweXmlParser(schema.recordSchema);
        }*/else if (format === 'application/swe+binary') {
        //recordSchema
        this.parsers[format].parser = new SweBinaryParser_parser(schema.commandSchema, schema.commandEncoding);
      } else if (format === 'application/swe+csv') {
        //recordSchema
        this.parsers[format].parser = new SweCsvParser_parser(schema.commandSchema, schema.commandEncoding);
      } else {
        throw Error("Not supported parser format: ".concat(format));
      }
    }
  }]);
  return SweApiResultControlParser;
}(SweApiResult_parser);
/* harmony default export */ var SweApiResult_control_parser = (SweApiResultControlParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/command/Command.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/







var Command = /*#__PURE__*/function (_SensorWebApi) {
  (0,inherits/* default */.Z)(Command, _SensorWebApi);
  var _super = (0,createSuper/* default */.Z)(Command);
  /**
   * @param {Object} properties - the properties of the object
   * @param {Object} [networkProperties={}]
   * @param {String} networkProperties.endpointUrl - defines the Http(s) endpoint URL
   * @param {Boolean} networkProperties.tls - defines is use Http or Https secure protocol for fetching data
   * @param {String} [networkProperties.streamProtocol='ws'] - the Stream protocol to use: 'ws' pr 'mqtt'
   * @param {Object} [networkProperties.mqttOpts={}] - the Mqtt options if stream protocol is 'mqtt'
   * @param {String} networkProperties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} networkProperties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   */
  function Command(properties, networkProperties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, Command);
    _this = _super.call(this, networkProperties); // network properties
    _this.properties = properties;
    _this.jsonParser = new collection_SweCollectionDataParser(networkProperties);
    _this.sweParser = new SweApiResult_control_parser((0,assertThisInitialized/* default */.Z)(_this));
    return _this;
  }

  /**
   * Get all status messages associated to a specific command
   * route: /systems/{sysid}/controls/{dsid}/commands/{cmdid}/status
   * @param {CommandFilter} [commandFilter== new CommandFilter()] - default Command filter
   * @param {Number} [pageSize=10] - default page size
   * @return {Promise<Collection<JSON>>} - response as JSON
   */
  (0,createClass/* default */.Z)(Command, [{
    key: "searchStatus",
    value: function () {
      var _searchStatus = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var commandFilter,
          pageSize,
          _args = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              commandFilter = _args.length > 0 && _args[0] !== undefined ? _args[0] : new command_CommandFilter();
              pageSize = _args.length > 1 && _args[1] !== undefined ? _args[1] : 10;
              return _context.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.commands.status.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties['control@id']).replace('{cmdid}', this.properties.id), commandFilter, pageSize, this.jsonParser));
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function searchStatus() {
        return _searchStatus.apply(this, arguments);
      }
      return searchStatus;
    }()
    /**
     * Stream all status messages associated to a specific command
     * route: /systems/{sysid}/controls/{dsid}/commands/{cmdid}/status
     * @param {CommandFilter} [commandFilter== new CommandFilter()] - default Command filter
     * @param {Function} callback
     */
  }, {
    key: "streamStatus",
    value: function streamStatus() {
      var _this2 = this;
      var commandFilter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new command_CommandFilter();
      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      this.stream().onMessage = /*#__PURE__*/function () {
        var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(message) {
          var dataBlock;
          return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return _this2.sweParser.parseDataBlock(message, commandFilter.props.format);
              case 2:
                dataBlock = _context2.sent;
                callback(dataBlock);
              case 4:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        }));
        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }();
      this.stream().doRequest(routes_conf.commands.status.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties['control@id']).replace('{cmdid}', this.properties.id), commandFilter.toQueryString(), 'arraybuffer');
    }
  }]);
  return Command;
}(sweapi_SensorWebApi);
/* harmony default export */ var command_Command = (Command);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiFetchCommand.parser.js







var SweApiFetchCommandParser = /*#__PURE__*/function (_SweApiCollectionObje) {
  (0,inherits/* default */.Z)(SweApiFetchCommandParser, _SweApiCollectionObje);
  var _super = (0,createSuper/* default */.Z)(SweApiFetchCommandParser);
  function SweApiFetchCommandParser(networkProperties, systemId) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, SweApiFetchCommandParser);
    _this = _super.call(this, networkProperties);
    _this.systemId = systemId;
    return _this;
  }
  (0,createClass/* default */.Z)(SweApiFetchCommandParser, [{
    key: "parseData",
    value: function parseData(data) {
      return new command_Command((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, data), {}, {
        systemId: this.systemId
      }), this.networkProperties);
    }
  }]);
  return SweApiFetchCommandParser;
}(collection_SweApiCollectionObjectParser);
/* harmony default export */ var SweApiFetchCommand_parser = (SweApiFetchCommandParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/observations/SweApiResult.collection.control.parser.js








var SweApiResultCollectionControlParser = /*#__PURE__*/function (_SweApiResultControlP) {
  (0,inherits/* default */.Z)(SweApiResultCollectionControlParser, _SweApiResultControlP);
  var _super = (0,createSuper/* default */.Z)(SweApiResultCollectionControlParser);
  function SweApiResultCollectionControlParser(dataObject) {
    (0,classCallCheck/* default */.Z)(this, SweApiResultCollectionControlParser);
    return _super.call(this, dataObject);
  }
  (0,createClass/* default */.Z)(SweApiResultCollectionControlParser, [{
    key: "init",
    value: function init(schema, format) {
      if (format === 'application/swe+binary') {
        //resultSchema
        throw new Error("Format not supported ".concat(format));
      } else if (format === 'application/swe+xml') {
        //resultSchema
        throw new Error("Format not supported ".concat(format));
      } else {
        (0,get/* default */.Z)((0,getPrototypeOf/* default */.Z)(SweApiResultCollectionControlParser.prototype), "init", this).call(this, schema, format);
      }
    }
  }]);
  return SweApiResultCollectionControlParser;
}(SweApiResult_control_parser);
/* harmony default export */ var SweApiResult_collection_control_parser = (SweApiResultCollectionControlParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiControlStatus.parser.js





var SweApiControlStatus = /*#__PURE__*/function (_SweApiCollectionObje) {
  (0,inherits/* default */.Z)(SweApiControlStatus, _SweApiCollectionObje);
  var _super = (0,createSuper/* default */.Z)(SweApiControlStatus);
  function SweApiControlStatus(networkProperties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, SweApiControlStatus);
    _this = _super.call(this, networkProperties);
    _this.textDecoder = new TextDecoder();
    return _this;
  }
  (0,createClass/* default */.Z)(SweApiControlStatus, [{
    key: "parseData",
    value: function parseData(data, format) {
      var res;
      if (format === 'arraybuffer') {
        res = this.textDecoder.decode(data);
      } else {
        res = JSON.parse(data);
      }
      return JSON.parse(res);
    }
  }]);
  return SweApiControlStatus;
}(collection_SweApiCollectionObjectParser);
/* harmony default export */ var SweApiControlStatus_parser = (SweApiControlStatus);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/control/Control.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/











var Control = /*#__PURE__*/function (_SensorWebApi) {
  (0,inherits/* default */.Z)(Control, _SensorWebApi);
  var _super = (0,createSuper/* default */.Z)(Control);
  /**
   * @param {Object} properties - the properties of the object
   * @param {Object} [networkProperties={}]
   * @param {String} networkProperties.endpointUrl - defines the Http(s) endpoint URL
   * @param {Boolean} networkProperties.tls - defines is use Http or Https secure protocol for fetching data
   * @param {String} [networkProperties.streamProtocol='ws'] - the Stream protocol to use: 'ws' pr 'mqtt'
   * @param {Object} [networkProperties.mqttOpts={}] - the Mqtt options if stream protocol is 'mqtt'
   * @param {String} networkProperties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} networkProperties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   */
  function Control(properties, networkProperties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, Control);
    _this = _super.call(this, networkProperties); // network properties
    _this.properties = properties;
    _this.commandParser = new SweApiFetchCommand_parser(networkProperties, _this.properties['system@id']);
    _this.sweApiResultCollectionControlParser = new SweApiResult_collection_control_parser((0,assertThisInitialized/* default */.Z)(_this));
    _this.sweApiResultControlParser = new SweApiResult_control_parser((0,assertThisInitialized/* default */.Z)(_this));
    _this.sweApiControlStatusParser = new SweApiControlStatus_parser();
    return _this;
  }

  /**
   * Get the list of commands received by a particular control interface
   * route: /systems/{sysid}/controls/{dsid}/commands
   * @param {CommandFilter} [commandFilter=new CommandFilter()] - default Command filter
   * @param {Number} [pageSize=10] - default page size
   * @return {Promise<Collection<JSON>>} - result as JSON
   */
  (0,createClass/* default */.Z)(Control, [{
    key: "searchCommands",
    value: function () {
      var _searchCommands = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var commandFilter,
          pageSize,
          _args = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              commandFilter = _args.length > 0 && _args[0] !== undefined ? _args[0] : new command_CommandFilter();
              pageSize = _args.length > 1 && _args[1] !== undefined ? _args[1] : 10;
              return _context.abrupt("return", new sweapi_ObservationsCollection(this.baseUrl() + routes_conf.controls.commands.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id), commandFilter, pageSize, this.sweApiResultCollectionControlParser));
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function searchCommands() {
        return _searchCommands.apply(this, arguments);
      }
      return searchCommands;
    }()
    /**
     * Stream all commands received by a particular control interface
     * route: /systems/{sysid}/controls/{dsid}/commands
     * @param {ControlFilter} [controlFilter= new ControlFilter()] - default Control filter
     * @param {Function} callback - A callback to get observations
     */
  }, {
    key: "streamCommands",
    value: function streamCommands() {
      var _this2 = this;
      var controlFilter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new control_ControlFilter();
      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      this.stream().onMessage = /*#__PURE__*/function () {
        var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(message) {
          var dataBlock;
          return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return _this2.sweApiResultControlParser.parseDataBlock(message, controlFilter.props.format);
              case 2:
                dataBlock = _context2.sent;
                callback(dataBlock);
              case 4:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        }));
        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }();
      this.stream().doRequest(routes_conf.controls.commands.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id), controlFilter.toQueryString(), 'arraybuffer');
    }

    /**
     * Get a specific command resource by ID.
     * route: /systems/{sysid}/controls/{dsid}/commands/{cmdid}
     * @param {String} commandId - the ID of the Command resource
     * @param {CommandFilter} [commandFilter=new CommandFilter()] - default Command filter
     * @returns {Promise<Command>} - The corresponding Command
     */
  }, {
    key: "getCommandById",
    value: function () {
      var _getCommandById = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(commandId) {
        var commandFilter,
          apiUrl,
          queryString,
          jsonData,
          _args3 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              commandFilter = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : new command_CommandFilter();
              apiUrl = routes_conf.controls.command_by_id.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id).replace('{cmdid}', commandId);
              queryString = commandFilter.toQueryString(['select', 'obsFormat']); //TODO: check useless obsFormat
              _context3.next = 5;
              return this.fetchAsJson(apiUrl, queryString);
            case 5:
              jsonData = _context3.sent;
              return _context3.abrupt("return", this.commandParser.parseData(jsonData));
            case 7:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getCommandById(_x2) {
        return _getCommandById.apply(this, arguments);
      }
      return getCommandById;
    }()
    /**
     *  Send a new command to this control interface
     *  route: /systems/{sysid}/controls/{dsid}/commands
     * @param {JSON} jsonPayload - the JSON payload
     * @param {CommandFilter} [commandFilter=new CommandFilter()] - default Command filter specifying the 'sysid' and 'dsid'
     */
  }, {
    key: "postCommand",
    value: function postCommand(jsonPayload) {
      var commandFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new command_CommandFilter();
      var apiUrl = routes_conf.controls.commands.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id);
      this.postAsJson(apiUrl, jsonPayload);
    }

    /**
     * Send a new command to this control interface using streaming protocol such like WS or MQTT
     * route: /systems/{sysid}/controls/{dsid}/commands
     * @param {JSON} jsonPayload - the JSON payload
     * @param {CommandFilter} [commandFilter=new CommandFilter()] - default Command filter specifying the 'sysid' and 'dsid'
     */
  }, {
    key: "publishCommand",
    value: function publishCommand(payload) {
      var commandFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new command_CommandFilter();
      this.stream().publishRequest(routes_conf.controls.commands.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id), payload);
    }

    /**
     * Get all status messages sent by this control interface
     * route: /systems/{sysid}/controls/{dsid}/status
     * @param {ControlFilter} [controlFilter=new ControlFilter()] - default Control filter
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<JSON>>} - A Collection of JSON
     */
  }, {
    key: "searchStatus",
    value: function () {
      var _searchStatus = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        var controlFilter,
          pageSize,
          _args4 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              controlFilter = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : new control_ControlFilter();
              pageSize = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : 10;
              return _context4.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.controls.status.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id), controlFilter, pageSize, this.sweApiControlStatusParser));
            case 3:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function searchStatus() {
        return _searchStatus.apply(this, arguments);
      }
      return searchStatus;
    }()
    /**
     * Stream all status messages sent by this control interface
     * route: /systems/{sysid}/controls/{dsid}/status
     * @param {ControlFilter} [controlFilter= new ControlFilter()] - default Control filter
     * @param {Function} callback - A callback to get observations
     */
  }, {
    key: "streamStatus",
    value: function streamStatus() {
      var _this3 = this;
      var controlFilter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new control_ControlFilter();
      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      this.stream().onMessage = /*#__PURE__*/function () {
        var _ref2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5(message) {
          var dataBlock;
          return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                _context5.next = 2;
                return _this3.sweApiControlStatusParser.parseData(message, 'arraybuffer');
              case 2:
                dataBlock = _context5.sent;
                callback(dataBlock);
              case 4:
              case "end":
                return _context5.stop();
            }
          }, _callee5);
        }));
        return function (_x3) {
          return _ref2.apply(this, arguments);
        };
      }();
      this.stream().doRequest(routes_conf.controls.status.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id), controlFilter.toQueryString(), 'arraybuffer');
    }

    /**
     * Get the detailed schema of command messages in a command stream
     * route: /systems/{sysid}/controls/{dsid}/schema
     * @param {ControlFilter} [controlFilter= new ControlFilter()] - default Control filter, using 'commandFormat' to select response format
     * @returns {Promise<JSON>} - The schema as JSON
     */
  }, {
    key: "getSchema",
    value: function () {
      var _getSchema = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6() {
        var controlFilter,
          apiUrl,
          queryString,
          _args6 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              controlFilter = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : new control_ControlFilter();
              apiUrl = routes_conf.controls.schema.replace('{sysid}', this.properties['system@id']).replace('{dsid}', this.properties.id);
              queryString = controlFilter.toQueryString(['select', 'commandFormat']);
              return _context6.abrupt("return", this.fetchAsJson(apiUrl, queryString));
            case 4:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function getSchema() {
        return _getSchema.apply(this, arguments);
      }
      return getSchema;
    }()
  }]);
  return Control;
}(sweapi_SensorWebApi);
/* harmony default export */ var control_Control = (Control);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiFetchControl.parser.js







var SweApiFetchControlParser = /*#__PURE__*/function (_SweApiCollectionObje) {
  (0,inherits/* default */.Z)(SweApiFetchControlParser, _SweApiCollectionObje);
  var _super = (0,createSuper/* default */.Z)(SweApiFetchControlParser);
  function SweApiFetchControlParser() {
    (0,classCallCheck/* default */.Z)(this, SweApiFetchControlParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(SweApiFetchControlParser, [{
    key: "parseData",
    value: function parseData(data) {
      return new control_Control(data, (0,objectSpread2/* default */.Z)({
        streamProtocol: 'ws'
      }, this.networkProperties));
    }
  }]);
  return SweApiFetchControlParser;
}(collection_SweApiCollectionObjectParser);
/* harmony default export */ var SweApiFetchControl_parser = (SweApiFetchControlParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/system/System.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/















var System = /*#__PURE__*/function (_SensorWebApi) {
  (0,inherits/* default */.Z)(System, _SensorWebApi);
  var _super = (0,createSuper/* default */.Z)(System);
  /**
   * @param {Object} properties - the properties of the object
   * @param {Object} [networkProperties={}]
   * @param {String} networkProperties.endpointUrl - defines the Http(s) endpoint URL
   * @param {Boolean} networkProperties.tls - defines is use Http or Https secure protocol for fetching data
   * @param {String} [networkProperties.streamProtocol='ws'] - the Stream protocol to use: 'ws' pr 'mqtt'
   * @param {Object} [networkProperties.mqttOpts={}] - the Mqtt options if stream protocol is 'mqtt'
   * @param {String} networkProperties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} networkProperties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   */
  function System(properties, networkProperties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, System);
    _this = _super.call(this, networkProperties); // network properties
    _this.properties = properties;
    _this.sweApiFetchSystemParser = new SweApiFetchSystem_parser(networkProperties);
    _this.sweApiDataStreamParser = new SweApiDataStream_parser(networkProperties);
    _this.sweApiFetchFeatureOfInterestParser = new SweApiFetchFeatureOfInterest_parser(networkProperties);
    _this.sweApiFetchEventParser = new SweApiFetchEvent_parser(networkProperties);
    _this.sweApiFetchControlParser = new SweApiFetchControl_parser(networkProperties);
    return _this;
  }

  /**
   * Get the latest specsheet of a system
   * route: /systems/{sysid}/details
   * @param {SystemFilter} [systemFilter=new SystemFilter()] - the system filter
   * @return {Promise<JSON>} - SensorlML Description
   */
  (0,createClass/* default */.Z)(System, [{
    key: "getDetails",
    value: function () {
      var _getDetails = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var systemFilter,
          apiUrl,
          queryString,
          _args = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              systemFilter = _args.length > 0 && _args[0] !== undefined ? _args[0] : new system_SystemFilter();
              apiUrl = routes_conf.systems.details.replace('{sysid}', this.properties.id);
              queryString = systemFilter.toQueryString(['select', 'format']);
              return _context.abrupt("return", this.fetchAsJson(apiUrl, queryString));
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function getDetails() {
        return _getDetails.apply(this, arguments);
      }
      return getDetails;
    }()
    /**
     * Search for subsystems
     * route: /systems
     * @param {SystemFilter} [systemFilter= new SystemFilter()] - the system filter
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<System>>} - A collection of System
     */
  }, {
    key: "searchSubSystems",
    value: function () {
      var _searchSubSystems = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        var systemFilter,
          pageSize,
          _args2 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              systemFilter = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : new system_SystemFilter();
              pageSize = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 10;
              return _context2.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.search, systemFilter, pageSize, this.sweApiFetchSystemParser));
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function searchSubSystems() {
        return _searchSubSystems.apply(this, arguments);
      }
      return searchSubSystems;
    }()
    /**
     * List or search output datastreams of the selected system. Individual datastreams can be retrieved by ID directly on the root "datastreams" collection.
     * route: /systems/{sysid}/datastreams
     * @param {DataStreamFilter} [dataStreamFilter=new DataStreamFilter()] - default DataStream filter
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<DataStream>>}  - A collection of DataStream
     */
  }, {
    key: "searchDataStreams",
    value: function () {
      var _searchDataStreams = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        var dataStreamFilter,
          pageSize,
          _args3 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              dataStreamFilter = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : new datastream_DataStreamFilter();
              pageSize = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : 10;
              return _context3.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.datastreams.replace('{sysid}', this.properties.id), dataStreamFilter, pageSize, this.sweApiDataStreamParser));
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function searchDataStreams() {
        return _searchDataStreams.apply(this, arguments);
      }
      return searchDataStreams;
    }()
    /**
     * List or search features of interest of a system. Individual features can be retrieved by ID directly on the root "featuresOfInterest" collection
     * route: /systems/{sysid}/featuresOfInterest
     * @param {FeatureOfInterestFilter} [featureOfInterestFilter=new FeatureOfInterestFilter()] - FOI filter
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<FeatureOfInterest>>} - A collection of FeatureOfInterest
     */
  }, {
    key: "searchFeaturesOfInterest",
    value: function () {
      var _searchFeaturesOfInterest = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        var featureOfInterestFilter,
          pageSize,
          _args4 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              featureOfInterestFilter = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : new featureofinterest_FeatureOfInterestFilter();
              pageSize = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : 10;
              return _context4.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.fois.replace('{sysid}', this.properties.id), featureOfInterestFilter, pageSize, this.sweApiFetchFeatureOfInterestParser));
            case 3:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function searchFeaturesOfInterest() {
        return _searchFeaturesOfInterest.apply(this, arguments);
      }
      return searchFeaturesOfInterest;
    }()
    /**
     * Get a list of control interfaces of a system
     * route: /systems/{sysid}/controls
     * @param {ControlFilter} [controlFilter=new ControlFilter()] - the control filter
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<Control>>} - A collection of Control
     */
  }, {
    key: "searchControls",
    value: function () {
      var _searchControls = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5() {
        var controlFilter,
          pageSize,
          _args5 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              controlFilter = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : new control_ControlFilter();
              pageSize = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : 10;
              return _context5.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.controls.replace('{sysid}', this.properties.id), controlFilter, pageSize, this.sweApiFetchControlParser));
            case 3:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function searchControls() {
        return _searchControls.apply(this, arguments);
      }
      return searchControls;
    }()
    /**
     * Get a specific control interface description by ID
     * route: /systems/{sysid}/controls/{dsid}
     * @param {String} datastreamId - The ID of the datastream or command stream
     * @param {ControlFilter} [controlFilter= new ControlFilter()] - the control filter
     * @return {Control} - The corresponding Control
     */
  }, {
    key: "getControlById",
    value: function () {
      var _getControlById = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(datastreamId) {
        var controlFilter,
          apiUrl,
          queryString,
          jsonData,
          _args6 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              controlFilter = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : new control_ControlFilter();
              apiUrl = routes_conf.systems.control_by_id.replace('{sysid}', this.properties.id).replace('{dsid}', datastreamId);
              queryString = controlFilter.toQueryString(['select', 'format']);
              _context6.next = 5;
              return this.fetchAsJson(apiUrl, queryString);
            case 5:
              jsonData = _context6.sent;
              return _context6.abrupt("return", this.sweApiFetchControlParser.parseData(jsonData));
            case 7:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function getControlById(_x) {
        return _getControlById.apply(this, arguments);
      }
      return getControlById;
    }()
    /**
     * List or search events related to a system (e.g. maintenance events, contact change, etc.)
     * route: /systems/{sysid}/events
     * @param {EventFilter} [eventFilter= new EventFilter()] - the event filter
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<Event>>} - A collection of Event
     */
  }, {
    key: "searchEvents",
    value: function () {
      var _searchEvents = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7() {
        var eventFilter,
          pageSize,
          _args7 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              eventFilter = _args7.length > 0 && _args7[0] !== undefined ? _args7[0] : new event_EventFilter();
              pageSize = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : 10;
              return _context7.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.events.replace('{sysid}', this.properties.id), eventFilter, pageSize, this.sweApiFetchEventParser));
            case 3:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function searchEvents() {
        return _searchEvents.apply(this, arguments);
      }
      return searchEvents;
    }()
    /**
     * List or search for historical descriptions of a specific system (ordered by time of validity)
     * route: /systems/{sysid}/history
     * @param {SystemHistoryFilter} [systemHistoryFilter= new SystemHistoryFilter()] - the history filer
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<System>>} - A collection of System
     */
  }, {
    key: "searchHistory",
    value: function () {
      var _searchHistory = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8() {
        var systemHistoryFilter,
          pageSize,
          _args8 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              systemHistoryFilter = _args8.length > 0 && _args8[0] !== undefined ? _args8[0] : new history_SystemHistoryFilter();
              pageSize = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : 10;
              return _context8.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.history.replace('{sysid}', this.properties.id), systemHistoryFilter, pageSize, this.sweApiFetchSystemParser));
            case 3:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function searchHistory() {
        return _searchHistory.apply(this, arguments);
      }
      return searchHistory;
    }()
    /**
     * List or search members of a system group. Individual members can be retrieved by ID directly on the root "systems" collection
     * route: /systems/{sysid}/members
     * @param {SystemFilter} [systemFilter=new SystemFilter()] - the system filter
     * @param {Number} [pageSize=10] - default page size
     * @return {Promise<Collection<System>>} - A collection of System
     */
  }, {
    key: "searchMembers",
    value: function () {
      var _searchMembers = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee9() {
        var systemFilter,
          pageSize,
          _args9 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              systemFilter = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : new system_SystemFilter();
              pageSize = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : 10;
              return _context9.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.members.replace('{sysid}', this.properties.id), systemFilter, pageSize, this.sweApiFetchSystemParser));
            case 3:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function searchMembers() {
        return _searchMembers.apply(this, arguments);
      }
      return searchMembers;
    }()
  }]);
  return System;
}(sweapi_SensorWebApi);
/* harmony default export */ var system_System = (System);
;// CONCATENATED MODULE: ../../osh-js/source/core/parsers/sweapi/collection/SweApiFetchSystem.parser.js






var SweApiFetchSystemParser = /*#__PURE__*/function (_SweApiCollectionObje) {
  (0,inherits/* default */.Z)(SweApiFetchSystemParser, _SweApiCollectionObje);
  var _super = (0,createSuper/* default */.Z)(SweApiFetchSystemParser);
  function SweApiFetchSystemParser() {
    (0,classCallCheck/* default */.Z)(this, SweApiFetchSystemParser);
    return _super.apply(this, arguments);
  }
  (0,createClass/* default */.Z)(SweApiFetchSystemParser, [{
    key: "parseData",
    value: function parseData(data) {
      return new system_System(data, this.networkProperties);
    }
  }]);
  return SweApiFetchSystemParser;
}(collection_SweApiCollectionObjectParser);
/* harmony default export */ var SweApiFetchSystem_parser = (SweApiFetchSystemParser);
;// CONCATENATED MODULE: ../../osh-js/source/core/sweapi/system/Systems.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/






var Systems = /*#__PURE__*/function (_SensorWebApi) {
  (0,inherits/* default */.Z)(Systems, _SensorWebApi);
  var _super = (0,createSuper/* default */.Z)(Systems);
  /**
   * @param {Object} [networkProperties={}]
   * @param {String} networkProperties.endpointUrl - defines the Http(s) endpoint URL
   * @param {Boolean} networkProperties.tls - defines is use Http or Https secure protocol for fetching data
   * @param {String} [networkProperties.streamProtocol='ws'] - the Stream protocol to use: 'ws' pr 'mqtt'
   * @param {Object} [networkProperties.mqttOpts={}] - the Mqtt options if stream protocol is 'mqtt'
   * @param {String} networkProperties.mqttOpts.prefix - the Mqtt prefix value
   * @param {String} networkProperties.mqttOpts.endpointUrl - the Mqtt specific endpointUrl
   */
  function Systems(networkProperties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, Systems);
    _this = _super.call(this, networkProperties);
    _this.sweApiFetchSystemParser = new SweApiFetchSystem_parser(networkProperties);
    return _this;
  }

  /**
   * List or search all observing systems available through this API. By default, only top level systems are listed
   * (i.e. subsystems are ommitted) unless the "parent" query parameter is set
   * route: /systems
   * @param {SystemFilter} [systemFilter= new SystemFilter()] - the system filter
   * @param {Number} [pageSize=10] - default page size
   * @return {Promise<Collection<System>>} - A collection of System
   */
  (0,createClass/* default */.Z)(Systems, [{
    key: "searchSystems",
    value: function () {
      var _searchSystems = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var systemFilter,
          pageSize,
          _args = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              systemFilter = _args.length > 0 && _args[0] !== undefined ? _args[0] : new system_SystemFilter();
              pageSize = _args.length > 1 && _args[1] !== undefined ? _args[1] : 10;
              return _context.abrupt("return", new sweapi_Collection(this.baseUrl() + routes_conf.systems.search, systemFilter, pageSize, this.sweApiFetchSystemParser));
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function searchSystems() {
        return _searchSystems.apply(this, arguments);
      }
      return searchSystems;
    }()
    /**
     * Get a specific system resource by ID. Note that this will return the description of the system valid at the
     * current time. To get the description valid for a past (or future) time, use the "history" sub-collection.
     * route: /systems/{sysid}
     * @param {String} systemId - the ID of the System resource
     * @param {SystemFilter} [systemFilter=new SystemFilter()] - the system filter
     * @return {System} - The corresponding System
     */
  }, {
    key: "getSystemById",
    value: function () {
      var _getSystemById = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(systemId) {
        var systemFilter,
          apiUrl,
          queryString,
          jsonData,
          _args2 = arguments;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              systemFilter = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : new system_SystemFilter();
              apiUrl = routes_conf.systems.by_id.replace('{sysid}', systemId);
              queryString = systemFilter.toQueryString(['select', 'format']);
              _context2.next = 5;
              return this.fetchAsJson(apiUrl, queryString);
            case 5:
              jsonData = _context2.sent;
              return _context2.abrupt("return", this.sweApiFetchSystemParser.parseData(jsonData));
            case 7:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function getSystemById(_x) {
        return _getSystemById.apply(this, arguments);
      }
      return getSystemById;
    }()
  }]);
  return Systems;
}(sweapi_SensorWebApi);
/* harmony default export */ var system_Systems = (Systems);
;// CONCATENATED MODULE: ./src/core/ui/view/map/CesiumControlView.js










var CesiumControlView = /*#__PURE__*/function (_CesiumView) {
  (0,inherits/* default */.Z)(CesiumControlView, _CesiumView);
  var _super = (0,createSuper/* default */.Z)(CesiumControlView);
  function CesiumControlView(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, CesiumControlView);
    _this = _super.call(this, properties);
    _this.handleEvents();
    _this.initControl = false;
    return _this;
  }
  (0,createClass/* default */.Z)(CesiumControlView, [{
    key: "initSweApi",
    value: function () {
      var _initSweApi = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var systems, system;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (this.initControl) {
                _context.next = 9;
                break;
              }
              systems = new system_Systems(this.properties.control);
              _context.next = 4;
              return systems.getSystemById(this.properties.control.systemId);
            case 4:
              system = _context.sent;
              _context.next = 7;
              return system.getControlById(this.properties.control.cmdStreamId);
            case 7:
              this.control = _context.sent;
              this.initControl = true;
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function initSweApi() {
        return _initSweApi.apply(this, arguments);
      }
      return initSweApi;
    }()
  }, {
    key: "handleEvents",
    value: function handleEvents() {
      var _this2 = this;
      var onMouseClick = /*#__PURE__*/function () {
        var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(input) {
          var cartesian, carto, lonDegree, latDegree;
          return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                cartesian = _this2.viewer.scene.pickPosition(input.position);
                carto = Cesium/* Ellipsoid.WGS84.cartesianToCartographic */.Hnq.WGS84.cartesianToCartographic(cartesian);
                lonDegree = Cesium/* Math.toDegrees */.ZX$.toDegrees(carto.longitude);
                latDegree = Cesium/* Math.toDegrees */.ZX$.toDegrees(carto.latitude);
                _context2.next = 6;
                return _this2.postCommand(lonDegree, latDegree);
              case 6:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        }));
        return function onMouseClick(_x) {
          return _ref.apply(this, arguments);
        };
      }();
      this.viewer.screenSpaceEventHandler.setInputAction(onMouseClick, Cesium/* ScreenSpaceEventType.LEFT_CLICK */.Wvr.LEFT_CLICK);
    }
  }, {
    key: "postCommand",
    value: function () {
      var _postCommand = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3(lon, lat) {
        var goToCmd;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              goToCmd = {
                params: {
                  WAYPOINT: {
                    position: {
                      lat: lat,
                      lon: lon,
                      alt: 270
                    },
                    velocity: 100000
                  }
                }
              };
              _context3.next = 3;
              return this.initSweApi();
            case 3:
              _context3.next = 5;
              return this.control.postCommand(JSON.stringify(goToCmd));
            case 5:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function postCommand(_x2, _x3) {
        return _postCommand.apply(this, arguments);
      }
      return postCommand;
    }()
  }]);
  return CesiumControlView;
}(map_CesiumView);
/* harmony default export */ var map_CesiumControlView = (CesiumControlView);
;// CONCATENATED MODULE: ./src/morpheusx/factory.js





/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/



















window.CESIUM_BASE_URL = './';
Cesium/* Ion.defaultAccessToken */.f3v.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI1ODY0NTkzNS02NzI0LTQwNDktODk4Zi0zZDJjOWI2NTdmYTMiLCJpZCI6MTA1N' + 'zQsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NTY4NzI1ODJ9.IbAajOLYnsoyKy1BOd7fY1p6GH-wwNVMdMduA2IzGjA';
function mapToViews(jsonConfig) {
  var views = {};
  return views;
}
function mapToDataSources(clientConfig) {
  var datasources = {};
  var _iterator = (0,createForOfIteratorHelper/* default */.Z)(clientConfig.servers),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var jsonServerConfig = _step.value;
      var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(jsonServerConfig.dataSources),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var jsonDataSourceConfig = _step2.value;
          if (jsonDataSourceConfig.type === 'SweApiStream') {
            datasources[jsonDataSourceConfig.id] = mapToDataSourceSweApiResult(jsonDataSourceConfig, jsonServerConfig);
          } else if (jsonDataSourceConfig.type === 'SosGetResult') {
            datasources[jsonDataSourceConfig.id] = mapToDataSourceSosGetResult(jsonDataSourceConfig, jsonServerConfig);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return datasources;
}
function mapToDataSource(clientConfig, dataSourceProps) {
  var serverId = dataSourceProps.serverId;
  var jsonServerConfig;
  var _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(clientConfig.servers),
    _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var server = _step3.value;
      if (server.id === serverId) {
        jsonServerConfig = server;
        break;
      }
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  if (!jsonServerConfig) {
    throw Error("Cannot find Server config with id ".concat(dataSourceProps.serverId));
  }
  console.log(dataSourceProps);
  if (dataSourceProps.type === 'SweApiStream') {
    return mapToDataSourceSweApiResult(dataSourceProps, jsonServerConfig);
  } else if (dataSourceProps.type === 'SosGetResult') {
    return mapToDataSourceSosGetResult(dataSourceProps, jsonServerConfig);
  }
  throw Error("Not supported DataSource type ".concat(dataSourceProps.type));
}
function mapToDataSourceSosGetResult(jsonDataSourceConfig, jsonServerConfig) {
  return (0,reactivity_esm_bundler/* markRaw */.Xl)(new SweApi_datasource(jsonDataSourceConfig.name, (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, jsonDataSourceConfig), {}, {
    endpointUrl: jsonServerConfig.endpoint,
    tls: jsonServerConfig.tls
  })));
}
function mapToDataSourceSweApiResult(jsonDataSourceConfig, jsonServerConfig) {
  return (0,reactivity_esm_bundler/* markRaw */.Xl)(new SweApi_datasource(jsonDataSourceConfig.name, (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, jsonDataSourceConfig), {}, {
    endpointUrl: jsonServerConfig.endpoint,
    tls: jsonServerConfig.tls
  })));
}
function mapToSynchronizers(clientConfig) {
  var dataSources = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var synchronizers = [];
  var _iterator4 = (0,createForOfIteratorHelper/* default */.Z)(clientConfig.dataSynchronizers),
    _step4;
  try {
    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
      var timeSync = _step4.value;
      var dsArr = [];
      var _iterator5 = (0,createForOfIteratorHelper/* default */.Z)(dataSources),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var ds = _step5.value;
          if (ds.properties.synchronizerId === timeSync.id) {
            dsArr.push(ds);
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      var currentTimeSync = (0,reactivity_esm_bundler/* markRaw */.Xl)(new timesync_DataSynchronizer((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, timeSync), {}, {
        dataSources: dsArr,
        id: timeSync.id
      })));
      synchronizers.push(currentTimeSync);
    }
  } catch (err) {
    _iterator4.e(err);
  } finally {
    _iterator4.f();
  }
  return synchronizers;
}
function mapToView(widgetConfig) {
  var layers = [];
  var _iterator6 = (0,createForOfIteratorHelper/* default */.Z)(widgetConfig.layers),
    _step6;
  try {
    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
      var layer = _step6.value;
      layers.push(mapToLayer(layer));
    }
  } catch (err) {
    _iterator6.e(err);
  } finally {
    _iterator6.f();
  }
  var viewProperties = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, widgetConfig.properties), {}, {
    container: widgetConfig.id,
    destroyAfterMutation: false,
    layers: layers
  });
  if (widgetConfig.type === 'LeafletView') {
    return (0,reactivity_esm_bundler/* markRaw */.Xl)(new map_LeafletView(viewProperties));
  } else if (widgetConfig.type === 'CesiumView') {
    return new map_CesiumView(viewProperties);
  } else if (widgetConfig.type === 'OpenLayerView') {
    return new map_OpenLayerView(viewProperties);
  } else if (widgetConfig.type === 'MapboxView') {
    (mapbox_gl_default()).accessToken = 'pk.eyJ1IjoiZ2FrZXdhMzk0MCIsImEiOiJja2I4ZDZkdDAwMzc5MzFwazZubmFhNzVvIn0.i4O5Cls0aaVSVREIzK151w';
    return new map_MapboxView((0,objectSpread2/* default */.Z)({
      container: viewProperties.container,
      zoom: 3
    }, viewProperties));
  } else if (widgetConfig.type === 'DeckGlView') {
    return new map_DeckGlView(viewProperties);
  } else if (widgetConfig.type === 'VideoView') {
    return new video_VideoView((0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, viewProperties), {}, {
      css: 'video-view'
    }));
  } else if (widgetConfig.type === 'ChartView') {
    return new chart_ChartJsView(viewProperties);
  } else if (widgetConfig.type === 'CesiumControlView') {
    return new map_CesiumControlView(viewProperties);
  } else {
    throw Error("Unknown view type ".concat(widgetConfig.type));
  }
}
function mapToLayer(layerConfig) {
  if (layerConfig.class === 'PointMarkerLayer') {
    return new layer_PointMarkerLayer(getLayerProps(layerConfig));
  } else if (layerConfig.class === 'VideoDataLayer') {
    return new layer_VideoDataLayer(getLayerProps(layerConfig));
  } else if (layerConfig.class === 'CurveLayer') {
    return new layer_CurveLayer(getLayerProps(layerConfig));
  } else if (layerConfig.class === 'FrustumLayer') {
    return new FrustumLayer(getLayerProps(layerConfig));
  }
  throw Error("Layer unknown type ".concat(layerConfig.type));
}
function getLayerProps(layerConfig) {
  var props = {};
  // check functions as props
  for (var key in layerConfig) {
    var split = key.split('@func');
    if (split.length > 1) {
      // let funcName = split[0];
      // props[funcName] = parseFn(layerConfig[key]);
      props = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, props), (0,utils/* parseFn */.vk)(layerConfig[key]));
    } else {
      props[key] = layerConfig[key];
    }
  }
  return props;
}
//
function mapDataSourceSchemaToFieldTemplate(schema) {
  /*const dataSourceMappingMock = {
      '01': [
          {
              path: '/timestamp',
              label: 'Timestamp'
          },
          {
              path: '/location/lat',
              "name": "lat",
              "type": "Quantity",
              "definition": "http://sensorml.com/ont/swe/property/GeodeticLatitude",
              "axisID": "Lat",
              "label": "Geodetic Latitude",
              "uom": {
                  "code": "deg"
              }
          },
          {
              path: '/location/lon',
              "name": "lon",
              "type": "Quantity",
              "definition": "http://sensorml.com/ont/swe/property/Longitude",
              "axisID": "Lon",
              "label": "Longitude",
              "uom": {
                  "code": "deg"
              }
          },
          {
              "path": "/location/alt",
              "name": "alt",
              "type": "Quantity",
              "definition": "http://sensorml.com/ont/swe/property/HeightAboveMSL",
              "axisID": "h",
              "label": "MSL Height",
              "uom": {
                  "code": "m"
              }
          }
      ],
      '03' : [
          {
              path: '/timestamp',
              label: 'Timestamp'
          },
          {
              'path': '/img',
              "type": "DataRecord",
              "definition": "http://sensorml.com/ont/swe/property/VideoFrame",
              "label": "UAS Video",
              "description": "Video acquired by on-board image sensor"
          },
      ]
  };*/
  try {
    var mappings = [];
    parseSweSchema(schema, schema, mappings, []);
    return mappings;
  } catch (ex) {
    throw ex;
  }
}
;// CONCATENATED MODULE: ./src/store/defaultConfig.js
/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/

var DEFAULT_DATASOURCE = function DEFAULT_DATASOURCE() {
  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : randomUUID();
  return {
    synchronizerId: '01',
    id: id,
    type: undefined,
    // map to SweApiResult
    description: '',
    connected: false,
    tags: [],
    name: '',
    responseFormat: 'application/swe+json',
    prefetchBatchDuration: 5000,
    prefetchBatchSize: 250,
    mode: 'realTime',
    protocol: 'ws',
    mqttOpts: {
      prefix: '/api',
      endpointUrl: ''
    },
    connectorOpts: {}
  };
};
var DEFAULT_CONFIG = function DEFAULT_CONFIG() {
  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : randomUUID();
  var name = arguments.length > 1 ? arguments[1] : undefined;
  var timeSyncId = randomUUID();
  return {
    id: id,
    name: name,
    description: '',
    tags: [],
    dataSynchronizers: [{
      id: timeSyncId,
      name: 'DataSynchronizer',
      tags: [],
      description: '',
      replaySpeed: 2.6,
      //TODO: add
      masterTimeRefreshRate: 250,
      //TODO: add,
      mode: 'replay'
    }],
    servers: [{
      id: 'c5edc2e1-6666-c3de-b583-9e930c07a0ca',
      endpoint: 'api.georobotix.io:443/ogc/t18/api',
      type: 'rest',
      name: 'api.georobotix',
      description: '',
      tags: [],
      tls: true,
      dataSources: [{
        synchronizerId: timeSyncId,
        id: randomUUID(),
        type: 'SweApiStream',
        // map to SweApiResult
        description: '',
        connected: false,
        tags: [],
        name: 'MISB Drone - Sensor Location',
        resource: '/datastreams/o7pce3e60s0ie/observations',
        responseFormat: 'application/swe+json',
        prefetchBatchDuration: 5000,
        prefetchBatchSize: 250,
        mode: 'replay',
        startTime: new Date(Date.now() - 1000 * 60 * 10).toISOString(),
        //TODO: add
        endTime: new Date(Date.now()).toISOString(),
        //TODO: add,
        protocol: 'mqtt',
        mqttOpts: {
          prefix: '/api',
          endpointUrl: 'api.georobotix.io:443/ogc/t18'
        },
        connectorOpts: {},
        parentId: 'b2rju765gua3c'
      }, {
        synchronizerId: timeSyncId,
        id: randomUUID(),
        type: 'SweApiStream',
        // map to SweApiResult
        description: '',
        connected: false,
        tags: [],
        name: 'MISB Drone - Platform Attitude',
        resource: '/datastreams/mlme3gtdfepvc/observations',
        responseFormat: 'application/swe+json',
        prefetchBatchDuration: 5000,
        prefetchBatchSize: 250,
        mode: 'replay',
        startTime: new Date(Date.now() - 1000 * 60 * 10).toISOString(),
        //TODO: add
        endTime: new Date(Date.now()).toISOString(),
        //TODO: add,
        protocol: 'mqtt',
        mqttOpts: {
          prefix: '/api',
          endpointUrl: 'api.georobotix.io:443/ogc/t18'
        },
        connectorOpts: {},
        parentId: 'b2rju765gua3c'
      }, {
        synchronizerId: timeSyncId,
        id: randomUUID(),
        type: 'SweApiStream',
        // map to SweApiResult
        description: '',
        connected: false,
        tags: [],
        name: 'MISB Drone - UAS Video',
        resource: '/datastreams/h225hesual08g/observations',
        responseFormat: 'application/swe+binary',
        prefetchBatchDuration: 5000,
        prefetchBatchSize: 250,
        mode: 'replay',
        startTime: new Date(Date.now() - 1000 * 60 * 10).toISOString(),
        //TODO: add
        endTime: new Date(Date.now()).toISOString(),
        //TODO: add,
        protocol: 'mqtt',
        mqttOpts: {
          prefix: '/api',
          endpointUrl: 'api.georobotix.io:443/ogc/t18'
        },
        connectorOpts: {},
        parentId: 'b2rju765gua3c'
      }, {
        synchronizerId: timeSyncId,
        id: randomUUID(),
        type: 'SweApiStream',
        // map to SweApiResult
        description: '',
        connected: false,
        tags: [],
        name: 'MISB Drone - Gimbal Attitude',
        resource: '/datastreams/h75dmug8e3sae/observations',
        responseFormat: 'application/swe+binary',
        prefetchBatchDuration: 5000,
        prefetchBatchSize: 250,
        mode: 'replay',
        startTime: new Date(Date.now() - 1000 * 60 * 10).toISOString(),
        //TODO: add
        endTime: new Date(Date.now()).toISOString(),
        //TODO: add,
        protocol: 'mqtt',
        mqttOpts: {
          prefix: '/api',
          endpointUrl: 'api.georobotix.io:443/ogc/t18'
        },
        connectorOpts: {},
        parentId: 'b2rju765gua3c'
      }, {
        synchronizerId: timeSyncId,
        id: randomUUID(),
        type: 'SweApiStream',
        // map to SweApiResult
        description: '',
        connected: false,
        tags: [],
        name: 'MISB Drone - Imaging Sensor Parameters',
        resource: '/datastreams/nhcs9rp6713ka/observations',
        responseFormat: 'application/swe+binary',
        prefetchBatchDuration: 5000,
        prefetchBatchSize: 250,
        mode: 'replay',
        startTime: new Date(Date.now() - 1000 * 60 * 10).toISOString(),
        //TODO: add
        endTime: new Date(Date.now()).toISOString(),
        //TODO: add,
        protocol: 'mqtt',
        mqttOpts: {
          prefix: '/api',
          endpointUrl: 'api.georobotix.io:443/ogc/t18'
        },
        connectorOpts: {},
        parentId: 'b2rju765gua3c'
      }]
    }],
    windows: {}
  };
};
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.constructor.js
var es_regexp_constructor = __webpack_require__(24603);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.dot-all.js
var es_regexp_dot_all = __webpack_require__(28450);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.sticky.js
var es_regexp_sticky = __webpack_require__(88386);
;// CONCATENATED MODULE: ./src/store/defaults.js

/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/

function defaultGrids() {
  var grids = [];
  for (var i = 1; i < 50; i++) {
    grids.push({
      breakpoint: "x" + i,
      breakpointWidth: i * 50,
      numberOfCols: i,
      colWidth: 40,
      items: []
    });
  }
  /*
  grids.push({
      compact: false,
      breakpoint: "xl",
      numberOfCols: 10,
      items: [],
  });
   grids.push({
      compact: false,
      breakpoint: "lg",
      breakpointWidth: 1200,
      numberOfCols: 10,
      items: [],
  });
   grids.push({
      compact: false,
      breakpoint: "md",
      breakpointWidth: 996,
      numberOfCols: 10,
      items: [],
  });
   grids.push({
      compact: false,
      breakpoint: "sm",
      breakpointWidth: 768,
      numberOfCols: 2,
      items: [],
  });
   grids.push({
      compact: false,
      breakpoint: "xs",
      breakpointWidth: 480,
      numberOfCols: 2,
      items: [],
  });
   /*if(!window.opener) {
      grids.push({
          compact: false,
          breakpoint: "xxl",
          numberOfCols: 10,
          breakpointWidth: 10000,
          colWidth: dynamicColWidth,
          minColWidth: 50,
          items: [],
      });
       grids.push({
          compact: false,
          breakpoint: "smdd",
          breakpointWidth: 481,
          numberOfCols: 10,
          colWidth: dynamicColWidth,
          items: [],
      });
       grids.push({
          compact: false,
          breakpoint: "xs",
          breakpointWidth: 480,
          numberOfCols: 2,
          items: [],
      });
  } else {
      grids.push({
          compact: false,
          breakpoint: "xxl",
          numberOfCols: 10,
          breakpointWidth: 10000,
          colWidth: dynamicColWidth,
          items: [],
      });
       grids.push({
          compact: false,
          breakpoint: "smdd",
          breakpointWidth: 481,
          numberOfCols: 10,
          colWidth: dynamicColWidth,
          items: [],
      });
       grids.push({
          compact: false,
          breakpoint: "xs",
          breakpointWidth: 480,
          numberOfCols: 2,
          items: [],
      });
  }*/
  return grids;
}
;

/*export const defaultGrid = {
    'xl': {
        compact: false,
        breakpoint: "xl",
        numberOfCols: 12,
        items: [],
    },
    'lg': {
        compact: false,
        breakpoint: "lg",
        breakpointWidth: 1200,
        numberOfCols: 10,
        items: [],
    },
    'md': {
        compact: false,
        breakpoint: "md",
        breakpointWidth: 996,
        numberOfCols: 8,
        items: [],
    },
    'sm': {
        compact: false,
        breakpoint: "sm",
        breakpointWidth: 768,
        numberOfCols: 4,
        items: [],
    },
    'xs': {
        compact: false,
        breakpoint: "xs",
        breakpointWidth: 480,
        numberOfCols: 2,
        items: [],
    },
};*/

var defaults_defaultLayer = function defaultLayer() {
  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : randomUUID();
  return {
    id: id,
    type: undefined,
    ui: {}
  };
};
var defaultWidget = function defaultWidget() {
  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : randomUUID();
  return {
    id: id,
    type: undefined,
    name: undefined,
    description: 'test view',
    pos: {
      x: 0,
      y: 0
    },
    size: {
      width: 4,
      height: 4
    },
    visible: true,
    tags: [],
    layers: []
  };
};
var defaultWindow = function defaultWindow() {
  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : randomUUID();
  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'main-window';
  return {
    "id": id,
    "type": type,
    "description": "window",
    "bk": undefined,
    "tags": [],
    "visible": true,
    "pos": {
      "x": 0,
      "y": 0,
      "z": 0
    },
    "size": {
      "width": 100,
      "height": 100,
      "unit": "%"
    },
    "widgets": {}
  };
};
;// CONCATENATED MODULE: ./src/store/popups.js
/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/



var usePopupsStore = (0,pinia/* defineStore */.Q_)('popupsStore', {
  state: function state() {
    return {
      id: randomUUID(),
      popupWindows: {}
    };
  },
  getters: {},
  actions: {
    addPopupWindow: function addPopupWindow(id, browserWindow) {
      this.popupWindows[id] = browserWindow;
    },
    isPopupWindow: function isPopupWindow(id) {
      return id in this.popupWindows;
    },
    closePopups: function closePopups() {
      for (var key in this.popupWindows) {
        this.popupWindows[key].close();
      }
    },
    savePopupsPosition: function savePopupsPosition(dashboardId) {
      var uiStore = useUiStore();

      // clean up closed ones
      var newPopupWindows = {};
      for (var popupId in this.popupWindows) {
        var popup = this.popupWindows[popupId];
        if (!popup.closed) {
          newPopupWindows[popupId] = popup;
          uiStore.editLayout(dashboardId, popupId, {
            pos: {
              x: popup.screenLeft,
              y: popup.screenTop,
              z: 0
            },
            size: {
              width: popup.innerWidth,
              height: popup.outerHeight
            }
          });
        } else {
          uiStore.removeLayoutById(dashboardId, popupId);
        }
      }
      this.popupWindows = newPopupWindows;
    }
  }
});
;// CONCATENATED MODULE: ./src/store/ui.js





/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/







var clientStore;
var popupStore;
function getClientStore() {
  if (!isDefined(clientStore)) {
    clientStore = useClientStore();
  }
  return clientStore;
}
function getPopupStore() {
  if (!isDefined(popupStore)) {
    popupStore = usePopupsStore();
  }
  return popupStore;
}
var useUiStore = (0,pinia/* defineStore */.Q_)('uiStore', {
  state: function state() {
    return {
      id: randomUUID(),
      initialized: false,
      ui: {
        edit: false,
        connected: false,
        layouts: {},
        mode: 'replay',
        drawer: {
          server: false,
          datasource: false
        },
        snack: {
          message: undefined,
          type: undefined
        }
      },
      syncVersion: 0
    };
  },
  getters: {
    isEdit: function isEdit(state) {
      return state.ui.edit;
    }
  },
  actions: {
    // window from clientStore
    loadLayouts: function loadLayouts(windowsArr) {
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(windowsArr),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var window = _step.value;
          var items = [];
          for (var widgetId in window.widgets) {
            var widget = window.widgets[widgetId];
            items.push({
              id: widget.id,
              x: widget.pos.x,
              y: widget.pos.y,
              width: widget.size.width,
              height: widget.size.height
            });
          }
          var grids = (0,dist/* klona */.Y)(defaultGrids());
          this.ui.layouts[window.id] = grids;
          var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(grids),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var grid = _step2.value;
              grid.items = [];
              var _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(items),
                _step3;
              try {
                for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                  var item = _step3.value;
                  grid.items.push(item);
                }
              } catch (err) {
                _iterator3.e(err);
              } finally {
                _iterator3.f();
              }
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      this.initialized = true;
    },
    resetFromTimebar: function resetFromTimebar(dashboardId, windowId, props) {
      //
      var widgets = clientStore.getWidgets(dashboardId, windowId);
      for (var widgetKey in widgets) {
        var widget = widgets[widgetKey];
        this.hookReloadWidget('reset-from-timebar', widget);
      }
    },
    reset: function reset(dashboardId) {
      var clientStore = getClientStore();
      for (var windowId in this.ui.layouts) {
        if (getPopupStore().isPopupWindow(windowId)) {
          delete this.ui.layouts[windowId];
          clientStore.removeWindowById(dashboardId, windowId, false);
        } else {
          var grids = this.ui.layouts[windowId];
          // remove item from all grid
          var _iterator4 = (0,createForOfIteratorHelper/* default */.Z)(grids),
            _step4;
          try {
            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
              var grid = _step4.value;
              // remove item from all grids
              grid.items = [];
            }
          } catch (err) {
            _iterator4.e(err);
          } finally {
            _iterator4.f();
          }
          clientStore.removeAllWidgets(dashboardId, windowId, false);
        }
      }
    },
    setConnected: function setConnected(value) {
      this.ui.connected = value;
      this.updateVersion();
    },
    toggleConnect: function toggleConnect(dashboardId) {
      var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !this.ui.connected;
      var clientStore = getClientStore();
      if (value) {
        clientStore.connect(dashboardId);
      } else {
        clientStore.disconnect(dashboardId);
      }
      this.updateVersion();
    },
    setEditMode: function setEditMode(value) {
      this.ui.edit = value;
      this.updateVersion();
    },
    removeLayoutById: function removeLayoutById(dashboardId, layoutId) {
      delete this.ui.layouts[layoutId];
      var clientStore = getClientStore();
      clientStore.removeWindowById(dashboardId, layoutId);
      this.updateVersion();
    },
    addWindow: function addWindow(dashboardId, window) {
      var grids = defaultGrids();
      this.ui.layouts[window.id] = (0,dist/* klona */.Y)(grids);
      var clientStore = getClientStore();
      clientStore.addWindow(dashboardId, window);
      this.updateVersion();
      return this.ui.layouts[window.id];
    },
    editLayout: function editLayout(dashboardId, windowId, props) {
      this.ui.layouts[windowId].pos = props.pos;
      this.ui.layouts[windowId].size = props.size;
      var clientStore = getClientStore();
      clientStore.editWindow(dashboardId, windowId, props);
      this.updateVersion();
    },
    removeGridItem: function removeGridItem(dashboardId, windowId, widgetId) {
      var grids = this.ui.layouts[windowId];
      // remove item from all grid
      var _iterator5 = (0,createForOfIteratorHelper/* default */.Z)(grids),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var grid = _step5.value;
          // remove item from all grids
          grid.items = grid.items.filter(function (item) {
            return item.id !== widgetId;
          });
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      var clientStore = getClientStore();
      clientStore.removeWidget(dashboardId, windowId, widgetId);
      this.updateVersion();
    },
    editGridItemByBreakpoint: function editGridItemByBreakpoint(dashboardId, window, widget, layoutBreakpoint, props) {
      // update current item property
      var grids = this.ui.layouts[window.id];
      var i = 0;
      var _iterator6 = (0,createForOfIteratorHelper/* default */.Z)(grids),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var grid = _step6.value;
          for (var j = 0; j < grid.items.length; j++) {
            var item = grid.items[j];
            if (item.id === widget.id) {
              this.ui.layouts[window.id][i].items[j] = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, item), props);
              break;
            }
          }
          i++;
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      var clientStore = getClientStore();
      clientStore.setWidget(dashboardId, window, widget);
      this.updateVersion();
    },
    hookReloadWidget: function hookReloadWidget(name, widget) {
      return {
        name: name,
        widget: widget
      };
    },
    editGridItem: function editGridItem(dashboardId, window, widget) {
      var clientStore = getClientStore();
      clientStore.setWidget(dashboardId, window, widget);
      this.hookReloadWidget('editGridItem', widget);
      this.updateVersion();
      return widget;
    },
    addGridItem: function addGridItem(dashboardId, window, widget) {
      // create grid if no existing
      if (!(window.id in this.ui.layouts)) {
        this.loadLayouts([window]);
      }
      // add item to all grids
      var grids = this.ui.layouts[window.id];
      var _iterator7 = (0,createForOfIteratorHelper/* default */.Z)(grids),
        _step7;
      try {
        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
          var grid = _step7.value;
          // because of structuredClone transform Array to Object
          if (!Array.isArray(grid.items)) {
            grid.items = [];
          }
          // compute x/y position depending on others widgets
          var maxX = 0,
            maxY = 0;
          var _iterator8 = (0,createForOfIteratorHelper/* default */.Z)(grid.items),
            _step8;
          try {
            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
              var item = _step8.value;
              if (item.y >= maxY) {
                maxY = item.y + item.height;
              }
            }
          } catch (err) {
            _iterator8.e(err);
          } finally {
            _iterator8.f();
          }
          widget.pos.y = maxY;
          grid.items.push({
            id: widget.id,
            x: widget.pos.x,
            y: widget.pos.y,
            width: widget.size.width,
            height: widget.size.height
          });
        }
      } catch (err) {
        _iterator7.e(err);
      } finally {
        _iterator7.f();
      }
      var clientStore = getClientStore();
      clientStore.setWidget(dashboardId, window, widget);
      this.updateVersion();
    },
    addOrEditDataSource: function addOrEditDataSource(dashboardId, serverId, props) {
      var clientStore = getClientStore();
      clientStore.addOrEditDataSource(dashboardId, serverId, props, this.ui.connected);
      this.hookReloadWidget('addOrEditDataSource', props);
      this.updateVersion();
    },
    removeDataSource: function removeDataSource(dashboardId, serverId, props) {
      var clientStore = getClientStore();
      clientStore.removeDataSource(dashboardId, serverId, props, this.ui.connected);
      this.hookReloadWidget('removeDataSource', props);
      this.updateVersion();
    },
    updateVersion: function updateVersion() {
      this.syncVersion++;
    }
  }
});
;// CONCATENATED MODULE: ./src/store/swe.js
















/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/










var swe_clientStore;
var uiStore;
function swe_getClientStore() {
  if (!isDefined(swe_clientStore)) {
    swe_clientStore = useClientStore();
  }
  return swe_clientStore;
}
function getUiStore() {
  if (!isDefined(uiStore)) {
    uiStore = useUiStore();
  }
  return uiStore;
}
var useSweStore = (0,pinia/* defineStore */.Q_)('sweStore', {
  state: function state() {
    return {
      id: randomUUID(),
      servers: {},
      // serverId -> [List<System>]
      activeIntervalDataStreams: {}
    };
  },
  getters: {},
  actions: {
    checkSystems: function checkSystems(dashboardId, serverId) {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var _clientStore, server, systems, systemCollection, servers, page, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (serverId in _this.servers) {
                _context.next = 17;
                break;
              }
              _clientStore = swe_getClientStore();
              server = _clientStore.findServerById(dashboardId, serverId); // fetch systems
              systems = new system_Systems({
                protocol: 'http',
                tls: server.tls,
                endpointUrl: server.endpoint
              });
              _context.next = 6;
              return systems.searchSystems(new system_SystemFilter({}), 10);
            case 6:
              systemCollection = _context.sent;
              servers = {};
            case 8:
              if (!systemCollection.hasNext()) {
                _context.next = 15;
                break;
              }
              _context.next = 11;
              return systemCollection.nextPage();
            case 11:
              page = _context.sent;
              for (i = 0; i < page.length; i++) {
                servers[page[i].properties.id] = {
                  system: page[i],
                  dataStreams: []
                };
              }
              _context.next = 8;
              break;
            case 15:
              servers.timestamp = Date.now();
              _this.servers[server.id] = servers;
            case 17:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    getSystems: function getSystems(dashboardId, serverId) {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        var results, v, k;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return _this2.checkSystems(dashboardId, serverId);
            case 2:
              results = [];
              for (k in _this2.servers[serverId]) {
                if ((0,esm_typeof/* default */.Z)(_this2.servers[serverId][k]) === 'object' && 'system' in _this2.servers[serverId][k]) {
                  v = _this2.servers[serverId][k].system;
                  results.push({
                    id: v.properties.id,
                    name: v.properties.properties.name
                  });
                }
              }
              return _context2.abrupt("return", results);
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    },
    checkDataStreams: function checkDataStreams(dashboardId, serverId, systemId) {
      var _this3 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        var dataStreams, system, dataStreamFilter, collection, ds, page, i;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return _this3.checkSystems(dashboardId, serverId);
            case 2:
              if (!(serverId in _this3.servers && systemId in _this3.servers[serverId])) {
                _context3.next = 19;
                break;
              }
              dataStreams = _this3.servers[serverId][systemId].dataStreams;
              if (!(dataStreams.length === 0)) {
                _context3.next = 19;
                break;
              }
              system = _this3.servers[serverId][systemId].system; // fetch datastreams
              dataStreamFilter = new datastream_DataStreamFilter({});
              _context3.next = 9;
              return system.searchDataStreams(dataStreamFilter, 100);
            case 9:
              collection = _context3.sent;
              ds = [];
            case 11:
              if (!collection.hasNext()) {
                _context3.next = 18;
                break;
              }
              _context3.next = 14;
              return collection.nextPage();
            case 14:
              page = _context3.sent;
              for (i = 0; i < page.length; i++) {
                ds.push(page[i]);
              }
              _context3.next = 11;
              break;
            case 18:
              _this3.servers[serverId][systemId].dataStreams = ds;
            case 19:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }))();
    },
    getDataStreams: function getDataStreams(dashboardId, serverId, systemId) {
      var _this4 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return _this4.checkDataStreams(dashboardId, serverId, systemId);
            case 2:
              return _context4.abrupt("return", _this4.servers[serverId][systemId].dataStreams.map(function (elt) {
                return {
                  id: elt.properties.id,
                  name: elt.properties.name,
                  phenomenonTime: elt.properties.phenomenonTime
                };
              }));
            case 3:
            case "end":
              return _context4.stop();
          }
        }, _callee4);
      }))();
    },
    getSchema: function getSchema(dashboardId, serverId, systemId, dataStreamId, format) {
      var _this5 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5() {
        var dataStream, _iterator, _step, d, filter;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return _this5.checkSystems(dashboardId, serverId);
            case 2:
              _context5.next = 4;
              return _this5.checkDataStreams(dashboardId, serverId, systemId);
            case 4:
              _iterator = (0,createForOfIteratorHelper/* default */.Z)(_this5.servers[serverId][systemId].dataStreams);
              _context5.prev = 5;
              _iterator.s();
            case 7:
              if ((_step = _iterator.n()).done) {
                _context5.next = 14;
                break;
              }
              d = _step.value;
              if (!(d.properties.id === dataStreamId)) {
                _context5.next = 12;
                break;
              }
              dataStream = d;
              return _context5.abrupt("break", 14);
            case 12:
              _context5.next = 7;
              break;
            case 14:
              _context5.next = 19;
              break;
            case 16:
              _context5.prev = 16;
              _context5.t0 = _context5["catch"](5);
              _iterator.e(_context5.t0);
            case 19:
              _context5.prev = 19;
              _iterator.f();
              return _context5.finish(19);
            case 22:
              if (!dataStream) {
                _context5.next = 27;
                break;
              }
              // build the key based on server, dataStream and format
              filter = new datastream_DataStreamFilter({
                obsFormat: format
              });
              _context5.next = 26;
              return dataStream.getSchema(filter);
            case 26:
              return _context5.abrupt("return", _context5.sent);
            case 27:
            case "end":
              return _context5.stop();
          }
        }, _callee5, null, [[5, 16, 19, 22]]);
      }))();
    },
    setActiveUpdateDataSource: function setActiveUpdateDataSource(dashboardId, dataSourceId, timeSync) {
      var dataSourceConfig = swe_getClientStore().findDataSourceById(dashboardId, dataSourceId);
      if (dataSourceConfig) {
        var id = dataSourceConfig.id,
          parentId = dataSourceConfig.parentId,
          resource = dataSourceConfig.resource,
          responseFormat = dataSourceConfig.responseFormat,
          type = dataSourceConfig.type,
          serverId = dataSourceConfig.serverId;
        if (type === 'SweApiStream') {
          // SWE only
          var dataSource;
          var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(timeSync.getDataSources()),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var ds = _step2.value;
              if (ds.id === id) {
                dataSource = ds;
                break;
              }
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
          if (isDefined(dataSource)) {
            var regex = new RegExp("^(.*?)\/datastreams\/(.*)\/observations");
            var datastreamId = resource.match(regex)[2];
            var first = true;
            var datastreamInterval = setInterval( /*#__PURE__*/(0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee7() {
              return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee7$(_context7) {
                while (1) switch (_context7.prev = _context7.next) {
                  case 0:
                    fetch("http".concat(dataSource.properties.tls ? 's' : '', "://").concat(dataSource.properties.endpointUrl, "/datastreams?id=").concat(datastreamId, "&select=id,phenomenonTime&f=application%2Fjson")).then(function (response) {
                      if (!response.ok) {
                        // create error object and reject if not a 2xx response code
                        var err = new Error("HTTP status code: " + response.status);
                        err.response = response;
                        err.status = response.status;
                        throw err;
                      }
                      return response;
                    }).then(function (response) {
                      return response.json();
                    }).then( /*#__PURE__*/function () {
                      var _ref2 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6(response) {
                        var minTime, maxTime;
                        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
                          while (1) switch (_context6.prev = _context6.next) {
                            case 0:
                              // update datastream times
                              if (timeSync.getMode() === Mode.REPLAY) {
                                if (response && response.items.length > 0 && response.items[0].phenomenonTime && response.items[0].phenomenonTime.length > 1) {
                                  minTime = response.items[0].phenomenonTime[0];
                                  maxTime = response.items[0].phenomenonTime[1];
                                  if (first) {
                                    dataSource.setMinTime(minTime);
                                    first = false;
                                  }
                                  dataSource.setMaxTime(maxTime);
                                  timeSync.minMaxChanged(first);
                                }
                              }
                            case 1:
                            case "end":
                              return _context6.stop();
                          }
                        }, _callee6);
                      }));
                      return function (_x) {
                        return _ref2.apply(this, arguments);
                      };
                    }());
                  case 1:
                  case "end":
                    return _context7.stop();
                }
              }, _callee7);
            })), 5000);
            this.activeIntervalDataStreams[datastreamId] = datastreamInterval;
          }
        }
      }
    },
    getDataSourceMapping: function getDataSourceMapping(dashboardId, dataSourceId) {
      var _this6 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee8() {
        var dataSourceConfig, id, parentId, resource, responseFormat, type, serverId, regex, datastreamId, schema, template, results, _iterator3, _step3, data, res;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              dataSourceConfig = swe_getClientStore().findDataSourceById(dashboardId, dataSourceId);
              if (!dataSourceConfig) {
                _context8.next = 22;
                break;
              }
              id = dataSourceConfig.id, parentId = dataSourceConfig.parentId, resource = dataSourceConfig.resource, responseFormat = dataSourceConfig.responseFormat, type = dataSourceConfig.type, serverId = dataSourceConfig.serverId;
              if (!(type === 'SweApiStream')) {
                _context8.next = 20;
                break;
              }
              // SWE only
              regex = new RegExp("^(.*?)\/datastreams\/(.*)\/observations");
              datastreamId = resource.match(regex)[2];
              _context8.next = 8;
              return _this6.getSchema(dashboardId, serverId, parentId, datastreamId, responseFormat);
            case 8:
              schema = _context8.sent;
              _context8.prev = 9;
              template = mapDataSourceSchemaToFieldTemplate(schema);
              results = [];
              _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(template);
              try {
                for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                  data = _step3.value;
                  res = {
                    dataSource: {
                      name: dataSourceConfig.name,
                      id: dataSourceConfig.id
                    },
                    data: data,
                    tooltip: {}
                  }; // if no label, fallback using name
                  if (!'label' in res.data) {
                    res.data['label'] = res.data.name;
                  }
                  res.uiLabel = "".concat(res.data.label, "  (").concat(res.data.path, ")");
                  (0,utils/* flattenFilter */.$n)(data, ['name', 'definition', 'code', 'description'], res.tooltip);
                  results.push(res);
                }
              } catch (err) {
                _iterator3.e(err);
              } finally {
                _iterator3.f();
              }
              return _context8.abrupt("return", results);
            case 17:
              _context8.prev = 17;
              _context8.t0 = _context8["catch"](9);
              getUiStore().ui.snack = {
                message: _context8.t0.message,
                type: 'warning'
              };
            case 20:
              _context8.next = 23;
              break;
            case 22:
              throw Error("DataSource ".concat(dataSourceId, " not found for mapping "));
            case 23:
            case "end":
              return _context8.stop();
          }
        }, _callee8, null, [[9, 17]]);
      }))();
    }
  }
});
;// CONCATENATED MODULE: ./src/store/client.js













/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/







var sweStore;
var DASHBOARD_API = {
  user: 'webadmin',
  password: '6uw8vJ9awW+%7yM!',
  url: 'https://api.georobotix.io/ogc/t18/admin-api/dashboards'
};
function getSweStore() {
  if (!isDefined(sweStore)) {
    sweStore = useSweStore();
  }
  return sweStore;
}
var timeSynchronizers = {};
var useClientStore = (0,pinia/* defineStore */.Q_)('clientStore', {
  state: function state() {
    return {
      id: randomUUID(),
      clientConfig: {},
      initialized: false,
      syncVersion: 0
    };
  },
  getters: {},
  actions: {
    getDashboardByIdFromRemote: function getDashboardByIdFromRemote(dashboardId, isPopup) {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _this.checkConf(dashboardId, isPopup);
            case 2:
              return _context.abrupt("return", _this.clientConfig);
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    saveConf: function saveConf(dashboardId) {
      var headers = {};
      headers['Accept'] = '*/*';
      headers['Accept-Encoding'] = 'gzip, deflate, br';
      headers['Content-Type'] = 'application/json';
      headers['Authorization'] = 'Basic ' + window.btoa("".concat(DASHBOARD_API.user, ":").concat(DASHBOARD_API.password));
      fetch("".concat(DASHBOARD_API.url, "/").concat(dashboardId), {
        method: 'PUT',
        headers: headers,
        credentials: 'include',
        body: JSON.stringify(this.clientConfig)
      }).catch(function (error) {
        console.error('There was an error!', error);
      });
    },
    getDashboardById: function getDashboardById(dashboardId) {
      return this.clientConfig;
    },
    connect: function connect(dashboardId) {
      if (dashboardId in timeSynchronizers) {
        var _iterator = (0,createForOfIteratorHelper/* default */.Z)(timeSynchronizers),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var t = _step.value;
            t.connect();
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
    },
    disconnect: function disconnect(dashboardId) {
      if (dashboardId in timeSynchronizers) {
        var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(timeSynchronizers),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var t = _step2.value;
            t.disconnect();
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    },
    loadConf: function loadConf(clientConfig) {
      var isPopup = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      //
      try {
        if (!isPopup && 'servers' in clientConfig) {
          this.addTimeSynchronizers(clientConfig.id);
        }
      } catch (ex) {
        throw ex;
      }
    },
    addServer: function addServer(dashboardId, props) {
      this.clientConfig.servers.push(props);
      this.updateVersion();
    },
    removeServer: function removeServer(dashboardId, serverId) {
      this.clientConfig.servers = this.clientConfig.servers.filter(function (server) {
        return server.id !== serverId;
      });
      this.updateVersion();
    },
    editServer: function editServer(serverId, props) {
      var idx = 0;
      var _iterator3 = (0,createForOfIteratorHelper/* default */.Z)(this.clientConfig.servers),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var server = _step3.value;
          if (server.id === serverId) {
            this.clientConfig.servers[idx] = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, server), props);
          }
          idx++;
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      this.updateVersion();
    },
    getServersByDashboard: function getServersByDashboard(dashboardId) {
      return this.clientConfig.servers;
    },
    findServerById: function findServerById(dashboardId, serverId) {
      var _iterator4 = (0,createForOfIteratorHelper/* default */.Z)(this.clientConfig.servers),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var server = _step4.value;
          if (server.id === serverId) {
            return server;
          }
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      return undefined;
    },
    addTimeSynchronizers: function addTimeSynchronizers(dashboardId) {
      timeSynchronizers = [];
      var dataSourcesArr = [];
      var dataSources = mapToDataSources((0,reactivity_esm_bundler/* toRaw */.IU)(this.clientConfig));
      for (var dsId in dataSources) {
        // dataSources[ds].subscribe(message => console.log(message), [EventType.DATA]);
        dataSourcesArr.push(dataSources[dsId]);
      }
      timeSynchronizers = mapToSynchronizers((0,reactivity_esm_bundler/* toRaw */.IU)(this.clientConfig), dataSourcesArr);
      for (var _dsId2 in dataSources) {
        getSweStore().setActiveUpdateDataSource(dashboardId, _dsId2, timeSynchronizers[0]);
      }
    },
    getTimeSynchronizerIds: function getTimeSynchronizerIds() {
      var ids = [];
      var _iterator5 = (0,createForOfIteratorHelper/* default */.Z)(timeSynchronizers),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var timeSynchronizer = _step5.value;
          ids.push(timeSynchronizer.id);
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      return ids;
    },
    createNewDashboard: function createNewDashboard(id) {
      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var defaultDashboard = DEFAULT_CONFIG(id, name);
      this.clientConfig = defaultDashboard;

      //
      this.loadConf(this.clientConfig);
      this.updateVersion();
      return defaultDashboard;
    },
    addWindow: function addWindow(dashboardId, window) {
      this.clientConfig.windows[window.id] = window;
      this.updateVersion();
    },
    editWindow: function editWindow(dashboardId, windowId, props) {
      this.clientConfig.windows[windowId] = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.clientConfig.windows[windowId]), props);
      this.updateVersion();
    },
    removeWindowById: function removeWindowById(dashboardId, windowId) {
      var syncVersion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      delete this.clientConfig.windows[windowId];
      if (syncVersion) {
        this.updateVersion();
      }
    },
    getWindowById: function getWindowById(dashboardId, id) {
      return id in this.clientConfig.windows ? this.clientConfig.windows[id] : undefined;
    },
    getWidgetById: function getWidgetById(dashboardId, windowId, widgetId) {
      return windowId in this.clientConfig.windows && widgetId in this.clientConfig.windows[windowId].widgets ? this.clientConfig.windows[windowId].widgets[widgetId] : undefined;
    },
    removeWidget: function removeWidget(dashboardId, windowId, widgetId) {
      delete this.clientConfig.windows[windowId].widgets[widgetId];
      this.updateVersion();
    },
    removeAllWidgets: function removeAllWidgets(dashboardId, windowId) {
      var syncVersion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      this.clientConfig.windows[windowId].widgets = {};
      if (syncVersion) {
        this.updateVersion();
      }
    },
    loadFromServer: function loadFromServer(dashboardId) {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        var headers;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              headers = {};
              headers['Accept'] = '*/*';
              headers['Accept-Encoding'] = 'gzip, deflate, br';
              headers['Content-Type'] = 'application/json';
              headers['Authorization'] = 'Basic ' + btoa("".concat(DASHBOARD_API.user, ":").concat(DASHBOARD_API.password));
              _context2.next = 7;
              return fetch("".concat(DASHBOARD_API.url, "/").concat(dashboardId), {
                method: 'GET',
                headers: headers,
                credentials: 'include'
              }).then(function (response) {
                return response.json();
              }).catch(function (error) {
                console.error('There was an error!', error);
              });
            case 7:
              _this2.clientConfig = _context2.sent;
            case 8:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    },
    checkConf: function checkConf(dashboardId, isPopup) {
      var _this3 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (_this3.initialized) {
                _context3.next = 6;
                break;
              }
              _context3.next = 3;
              return _this3.loadFromServer(dashboardId);
            case 3:
              _this3.loadConf(_this3.clientConfig, isPopup);
              console.log(_this3.clientConfig);
              _this3.initialized = true;
            case 6:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }))();
    },
    getWindowsByType: function getWindowsByType(dashboardId, type) {
      return (0,utils/* toArray */.qo)(this.clientConfig.windows).filter(function (el) {
        return el.type === type;
      });
    },
    setWidget: function setWidget(dashboardId, window, widget) {
      if (!(window.id in this.clientConfig.windows)) {
        this.clientConfig.windows[window.id] = window;
      }
      this.clientConfig.windows[window.id].widgets[widget.id] = widget;
      this.updateVersion();
    },
    getWidgets: function getWidgets(dashboardId, windowId) {
      return this.clientConfig.windows[windowId].widgets;
    },
    //datasources
    findDataSourceById: function findDataSourceById(dashboardId, dataSourceId) {
      var _iterator6 = (0,createForOfIteratorHelper/* default */.Z)(this.clientConfig.servers),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var server = _step6.value;
          var _iterator7 = (0,createForOfIteratorHelper/* default */.Z)(server.dataSources),
            _step7;
          try {
            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
              var datasource = _step7.value;
              if (datasource.id === dataSourceId) {
                datasource.serverId = server.id; // inject serverId for faster find
                return datasource;
              }
            }
          } catch (err) {
            _iterator7.e(err);
          } finally {
            _iterator7.f();
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
      return undefined;
    },
    addOrEditDataSource: function addOrEditDataSource(dashboardId, serverId, props, isConnected) {
      var dataSynchronizer = this.getDefaultTimeSynchronizer(dashboardId);
      //TODO:support multi synchronizers
      props.synchronizerId = this.clientConfig.dataSynchronizers[0].id;
      for (var i = 0; i < this.clientConfig.servers.length; i++) {
        var server = this.clientConfig.servers[i];
        if (server.id === serverId) {
          // check if exists
          var addNew = true;
          var idx = 0;
          var _iterator8 = (0,createForOfIteratorHelper/* default */.Z)(server.dataSources),
            _step8;
          try {
            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
              var _dataSource = _step8.value;
              if (_dataSource.id === props.id) {
                // replace content
                this.clientConfig.servers[i].dataSources[idx] = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, _dataSource), props);
                addNew = false;
                break;
              }
              idx++;
            }
          } catch (err) {
            _iterator8.e(err);
          } finally {
            _iterator8.f();
          }
          if (addNew) {
            server.dataSources.push(props);
          }
          break;
        }
      }
      var dataSource = mapToDataSource((0,reactivity_esm_bundler/* toRaw */.IU)(this.clientConfig), (0,reactivity_esm_bundler/* toRaw */.IU)(props));
      dataSynchronizer.addDataSource(dataSource);
    },
    removeDataSource: function removeDataSource(dashboardId, serverId, props) {
      var _this4 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        var i, server, dataSynchronizer, dsArr, _iterator9, _step9, datasource;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              i = 0;
            case 1:
              if (!(i < _this4.clientConfig.servers.length)) {
                _context4.next = 9;
                break;
              }
              server = _this4.clientConfig.servers[i];
              if (!(server.id === serverId)) {
                _context4.next = 6;
                break;
              }
              _this4.clientConfig.servers[i].dataSources = _this4.clientConfig.servers[i].dataSources.filter(function (ds) {
                return ds.id !== props.id;
              });
              return _context4.abrupt("break", 9);
            case 6:
              i++;
              _context4.next = 1;
              break;
            case 9:
              dataSynchronizer = _this4.getDefaultTimeSynchronizer(dashboardId); // find datasource from dataSynchronizer properties
              dsArr = dataSynchronizer.getDataSources();
              _iterator9 = (0,createForOfIteratorHelper/* default */.Z)(dsArr);
              _context4.prev = 12;
              _iterator9.s();
            case 14:
              if ((_step9 = _iterator9.n()).done) {
                _context4.next = 22;
                break;
              }
              datasource = _step9.value;
              if (!(datasource.id === props.id)) {
                _context4.next = 20;
                break;
              }
              _context4.next = 19;
              return dataSynchronizer.removeDataSource(datasource);
            case 19:
              return _context4.abrupt("break", 22);
            case 20:
              _context4.next = 14;
              break;
            case 22:
              _context4.next = 27;
              break;
            case 24:
              _context4.prev = 24;
              _context4.t0 = _context4["catch"](12);
              _iterator9.e(_context4.t0);
            case 27:
              _context4.prev = 27;
              _iterator9.f();
              return _context4.finish(27);
            case 30:
              _this4.updateVersion();
            case 31:
            case "end":
              return _context4.stop();
          }
        }, _callee4, null, [[12, 24, 27, 30]]);
      }))();
    },
    reset: function reset(dashboardId) {
      for (var windowKey in this.clientConfig.windows) {
        // remove popups
        var _window = this.clientConfig.windows[windowKey];
        if (_window.type === 'popup') {
          delete this.clientConfig.windows[windowKey];
        } else {
          _window.widgets = {};
        }
      }
    },
    getDefaultTimeSynchronizer: function getDefaultTimeSynchronizer(dashboardId) {
      return timeSynchronizers[0];
    },
    updateVersion: function updateVersion() {
      this.syncVersion++;
    }
  }
});
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/App.vue?vue&type=script&lang=js





/* harmony default export */ var Appvue_type_script_lang_js = ({
  name: "App",
  setup: function setup() {
    // stores
    var clientStore = useClientStore();
    var uiStore = useUiStore();
    var popupsStore = usePopupsStore();
    var isPopup = isDefined(window.opener);
    // clientStore.loadConfFromLocalStorage(isPopup);
    // clientStore.loadConfFromSercer(isPopup);

    return {
      uiStore: uiStore,
      clientStore: clientStore,
      popupsStore: popupsStore,
      isPopup: isPopup
    };
  },
  created: function created() {
    var _this = this;
    if (!this.isPopup) {
      window.addEventListener('beforeunload', function (event) {
        // This method will be called when the user leaves the page or closes the tab

        // Optionally, you can show a confirmation dialog to the user
        event.preventDefault();
        _this.popupsStore.closePopups();
        event.returnValue = '';
      });
    }
  }
});
;// CONCATENATED MODULE: ./src/App.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/App.vue?vue&type=style&index=0&id=2da88f8e&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/App.vue?vue&type=style&index=0&id=2da88f8e&lang=css

// EXTERNAL MODULE: ./node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(83744);
;// CONCATENATED MODULE: ./src/App.vue




;


const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(Appvue_type_script_lang_js, [['render',render]])

/* harmony default export */ var App = (__exports__);
// EXTERNAL MODULE: ./node_modules/vue-router/dist/vue-router.mjs
var vue_router = __webpack_require__(22201);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VApp/VApp.mjs + 1 modules
var VApp = __webpack_require__(97718);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VMain/VMain.mjs + 1 modules
var VMain = __webpack_require__(73140);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VNavigationDrawer/VNavigationDrawer.mjs + 4 modules
var VNavigationDrawer = __webpack_require__(49657);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VProgressCircular/VProgressCircular.mjs + 1 modules
var VProgressCircular = __webpack_require__(13173);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Dashboard.vue?vue&type=template&id=dd05fdc8&scoped=true

function Dashboardvue_type_template_id_dd05fdc8_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_navbar = (0,runtime_core_esm_bundler/* resolveComponent */.up)("navbar");
  var _component_ServerList = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ServerList");
                                                                                
  var _component_Content = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Content");
                                                                                
                                                      
                                                    
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VApp/* VApp */.q, {
    class: "dashboard"
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_navbar, {
        popup: $setup.isPopup
      }, null, 8, ["popup"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VNavigationDrawer/* VNavigationDrawer */.V, {
        modelValue: $setup.uiStore.ui.drawer.server,
        "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
          return $setup.uiStore.ui.drawer.server = $event;
        }),
        temporary: "",
        class: "nav-drawer"
      }, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ServerList)];
        }),
        _: 1
      }, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VMain/* VMain */.O, {
        class: "main"
      }, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [$data.init ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_Content, {
            key: _ctx.$route.params.fullPath
          })) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VProgressCircular/* VProgressCircular */.L, {
            key: 1,
            size: 100,
            width: 5,
            indeterminate: "",
            color: "teal"
          }))];
        }),
        _: 1
      })];
    }),
    _: 1
  });
}

/* Vuetify */






;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Content.vue?vue&type=template&id=4377eb40

function Contentvue_type_template_id_4377eb40_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_Window = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Window");
  var _component_WidgetForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetForm");
  var _component_DialogForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("DialogForm");
  var _component_DataSourceForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("DataSourceForm");
  var _component_ServerForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ServerForm");
  var _component_router_view = (0,runtime_core_esm_bundler/* resolveComponent */.up)("router-view");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_router_view, null, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
      var Component = _ref.Component,
        route = _ref.route;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_Window, {
        is: Component,
        ref: "window"
      }, null, 8, ["is"]), $data.widgetEditorId ? (0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "default", {
        key: 0
      }, function () {
        return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DialogForm, {
          onOnClose: _cache[0] || (_cache[0] = function ($event) {
            return $data.widgetEditorId = undefined;
          }),
          cssClass: "widget-form-content",
          edit: $data.edit,
          name: "widget"
        }, {
          content: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
            var save = _ref2.save;
            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_WidgetForm, {
              id: $data.widgetEditorId,
              edit: $data.edit
            }, null, 8, ["id", "edit"])];
          }),
          _: 1
        }, 8, ["edit"])];
      }) : $data.dataSourceEditorId ? (0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "default", {
        key: 1
      }, function () {
        return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DialogForm, {
          title: "DataSource",
          onOnClose: _cache[1] || (_cache[1] = function ($event) {
            return $data.dataSourceEditorId = undefined;
          }),
          edit: $data.edit
        }, {
          content: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref3) {
            var save = _ref3.save;
            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceForm, {
              id: $data.dataSourceEditorId,
              "server-id": $data.serverId,
              edit: $data.edit
            }, null, 8, ["id", "server-id", "edit"])];
          }),
          _: 1
        }, 8, ["edit"])];
      }) : $data.serverEditorId ? (0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "default", {
        key: 2
      }, function () {
        return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DialogForm, {
          title: "Server",
          onOnClose: _cache[2] || (_cache[2] = function ($event) {
            return $data.serverEditorId = undefined;
          }),
          edit: $data.edit
        }, {
          content: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref4) {
            var save = _ref4.save;
            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ServerForm, {
              id: $data.serverEditorId
            }, null, 8, ["id"])];
          }),
          _: 1
        }, 8, ["edit"])];
      }) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)];
    }),
    _: 3
  });
}
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/Window.vue?vue&type=template&id=747c1598&scoped=true

function Windowvue_type_template_id_747c1598_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_Widget = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Widget");
  var _component_dash_item = (0,runtime_core_esm_bundler/* resolveComponent */.up)("dash-item");
  var _component_dash_layout = (0,runtime_core_esm_bundler/* resolveComponent */.up)("dash-layout");
  var _component_dashboard = (0,runtime_core_esm_bundler/* resolveComponent */.up)("dashboard");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_dashboard, {
    id: "dashApp",
    ref: "dashboard",
    key: _ctx.$route.params.windowId
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)($setup.uiStore.ui.layouts[$setup.windowId], function (layout) {
        return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_dash_layout, (0,runtime_core_esm_bundler/* mergeProps */.dG)(layout, {
          debug: false,
          key: layout.breakpoint,
          compact: false
        }), {
          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
            return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(layout.items, function (item) {
              return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_dash_item, {
                locked: !$setup.uiStore.ui.edit,
                key: item.id,
                id: item.id,
                x: item.x,
                y: item.y,
                width: item.width,
                height: item.height,
                onResizeEnd: $options.widgetMoveResizeEnd
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_Widget, {
                    ref_for: true,
                    ref: "widgets",
                    id: item.id,
                    key: item.id,
                    onMoveEnd: $options.moveEnd,
                    bk: $options.bk
                  }, null, 8, ["id", "onMoveEnd", "bk"]))];
                }),
                _: 2
              }, 1032, ["locked", "id", "x", "y", "width", "height", "onResizeEnd"]);
            }), 128))];
          }),
          _: 2
        }, 1040);
      }), 128))];
    }),
    _: 1
  });
}
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCard/VCard.mjs + 1 modules
var VCard = __webpack_require__(51489);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCard/VCardItem.mjs
var VCardItem = __webpack_require__(81209);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCard/VCardText.mjs
var VCardText = __webpack_require__(41888);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VIcon/VIcon.mjs + 1 modules
var VIcon = __webpack_require__(53289);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VTooltip/VTooltip.mjs + 1 modules
var VTooltip = __webpack_require__(80678);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/Widget.vue?vue&type=template&id=5b5959e6&scoped=true


var _withScopeId = function _withScopeId(n) {
  return _pushScopeId("data-v-5b5959e6"), n = n(), _popScopeId(), n;
};
var _hoisted_1 = {
  class: "action-button"
};
var _hoisted_2 = ["id"];
function Widgetvue_type_template_id_5b5959e6_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _this = this;
                                                      
                                                    
                                                            
  var _component_TimeController = (0,runtime_core_esm_bundler/* resolveComponent */.up)("TimeController");
  var _component_PtzView = (0,runtime_core_esm_bundler/* resolveComponent */.up)("PtzView");
                                                                
                                                                
                                                      
  var _component_ConfirmDialog = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ConfirmDialog");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, {
    elevation: 4,
    width: $options.width,
    height: $options.height,
    color: "#96a2ab52",
    class: "card"
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardItem/* VCardItem */._, {
        class: "card-item"
      }, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_1, [_this.uiStore.ui.edit ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VBtn/* VBtn */.T, {
            key: 0,
            class: "delete-view-button",
            rounded: 0,
            "x-small": "",
            onClick: (0,runtime_dom_esm_bundler/* withModifiers */.iM)($options.deleteView, ["stop"]),
            color: "red",
            density: "compact",
            flat: ""
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, {
                icon: "mdi-close",
                size: "large"
              })];
            }),
            _: 1
          }, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), _this.uiStore.ui.edit ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VBtn/* VBtn */.T, {
            key: 1,
            class: "edit-view-button",
            rounded: 0,
            "x-small": "",
            onClick: (0,runtime_dom_esm_bundler/* withModifiers */.iM)($options.editView, ["stop"]),
            density: "compact",
            flat: ""
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, {
                icon: "mdi-pencil",
                size: "large"
              })];
            }),
            _: 1
          }, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $data.widget && $data.widget.name && !$data.timeController && !$data.ptzControl ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VTooltip/* VTooltip */.N, {
            key: 2
          }, {
            activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
              var props = _ref.props;
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
                color: "grey-lighten-1",
                class: "info-icon"
              }), {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
                }),
                _: 2
              }, 1040)];
            }),
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)($data.widget.name), 1)];
            }),
            _: 1
          })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardText/* VCardText */.Z, null, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [$data.timeController ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_TimeController, {
                key: 0,
                dataSynchronizer: $options.dataSynchronizer,
                skipTimeStep: '10%',
                onControlEventFn: $options.onControlEvent,
                trackRealtime: $data.trackRealtime
              }, null, 8, ["dataSynchronizer", "onControlEventFn", "trackRealtime"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $data.ptzControl ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_PtzView, {
                key: 1,
                widget: $data.widget
              }, null, 8, ["widget"])) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
                key: 2,
                id: $setup.widgetId,
                class: "widget"
              }, null, 8, _hoisted_2))];
            }),
            _: 1
          })];
        }),
        _: 1
      })];
    }),
    _: 1
  }, 8, ["width", "height"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ConfirmDialog, {
    ref: "confirm"
  }, null, 512)], 64);
}

/* Vuetify */






;// CONCATENATED MODULE: ./src/morpheusx/Widget.vue?vue&type=template&id=5b5959e6&scoped=true

// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCard/VCardActions.mjs
var VCardActions = __webpack_require__(91334);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VDialog/VDialog.mjs + 1 modules
var VDialog = __webpack_require__(33601);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VGrid/VSpacer.mjs
var VSpacer = __webpack_require__(89234);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VToolbar/VToolbar.mjs + 1 modules
var VToolbar = __webpack_require__(27471);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VToolbar/VToolbarTitle.mjs
var VToolbarTitle = __webpack_require__(85030);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/ConfirmDialog.vue?vue&type=template&id=3aa74af4

function ConfirmDialogvue_type_template_id_3aa74af4_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                        
                                                            
                                                                
                                                          
                                                    
                                                                      
                                                      
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VDialog/* VDialog */.B, {
    modelValue: $data.dialog,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $data.dialog = $event;
    }),
    "max-width": $data.options.width,
    style: {
      zIndex: 99999999999999999
    },
    onKeydown: (0,runtime_dom_esm_bundler/* withKeys */.D2)($options.cancel, ["esc"])
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, null, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VToolbar/* VToolbar */.i, {
            dark: "",
            color: $data.options.color,
            dense: "",
            flat: ""
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VToolbarTitle/* VToolbarTitle */.q, {
                class: "text-body-2 font-weight-bold grey--text"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)($data.title), 1)];
                }),
                _: 1
              })];
            }),
            _: 1
          }, 8, ["color"]), (0,runtime_core_esm_bundler/* withDirectives */.wy)((0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardText/* VCardText */.Z, {
            class: "pa-4 black--text",
            innerHTML: $data.message
          }, null, 8, ["innerHTML"]), [[runtime_dom_esm_bundler/* vShow */.F8, !!$data.message]]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardActions/* VCardActions */.h, {
            class: "pt-3"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSpacer/* VSpacer */.C), !$data.options.noconfirm ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VBtn/* VBtn */.T, {
                key: 0,
                color: "grey",
                text: "",
                class: "body-2 font-weight-bold",
                onClick: $options.cancel
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("Cancel")];
                }),
                _: 1
              }, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
                color: "primary",
                class: "body-2 font-weight-bold",
                outlined: "",
                onClick: $options.yes
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("Yes")];
                }),
                _: 1
              }, 8, ["onClick"])];
            }),
            _: 1
          })];
        }),
        _: 1
      })];
    }),
    _: 1
  }, 8, ["modelValue", "max-width", "onKeydown"]);
}

/* Vuetify */







;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/ConfirmDialog.vue?vue&type=script&lang=js

/* harmony default export */ var ConfirmDialogvue_type_script_lang_js = ({
  name: "ConfirmDialog",
  data: function data() {
    return {
      dialog: false,
      resolve: null,
      reject: null,
      message: null,
      title: null,
      options: {
        color: "grey lighten-3",
        width: 400,
        zIndex: 200,
        noconfirm: false
      }
    };
  },
  methods: {
    open: function open(title, message, options) {
      var _this = this;
      this.dialog = true;
      this.title = title;
      this.message = message;
      this.options = Object.assign(this.options, options);
      return new Promise(function (resolve, reject) {
        _this.resolve = resolve;
        _this.reject = reject;
      });
    },
    yes: function yes() {
      this.resolve(true);
      this.dialog = false;
    },
    cancel: function cancel() {
      this.resolve(false);
      this.dialog = false;
    }
  }
});
;// CONCATENATED MODULE: ./src/components/ConfirmDialog.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/components/ConfirmDialog.vue




;
const ConfirmDialog_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ConfirmDialogvue_type_script_lang_js, [['render',ConfirmDialogvue_type_template_id_3aa74af4_render]])

/* harmony default export */ var ConfirmDialog = (ConfirmDialog_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.vue?vue&type=template&id=d0807538

var TimeControllervue_type_template_id_d0807538_hoisted_1 = {
  style: {
    "width": "100%"
  }
};
function TimeControllervue_type_template_id_d0807538_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_TimeControllerRealtime = (0,runtime_core_esm_bundler/* resolveComponent */.up)("TimeControllerRealtime");
  var _component_TimeControllerReplay = (0,runtime_core_esm_bundler/* resolveComponent */.up)("TimeControllerReplay");
  var _component_TimeControllerBatch = (0,runtime_core_esm_bundler/* resolveComponent */.up)("TimeControllerBatch");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", TimeControllervue_type_template_id_d0807538_hoisted_1, [$data.realTime ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_TimeControllerRealtime, {
    key: 0,
    dataSource: $props.dataSource,
    dataSynchronizer: $props.dataSynchronizer,
    debounce: $props.debounce,
    parseTime: $props.parseTime,
    onEvent: $options.onControlEvent
  }, null, 8, ["dataSource", "dataSynchronizer", "debounce", "parseTime", "onEvent"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $data.replay ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_TimeControllerReplay, {
    key: 1,
    dataSource: $props.dataSource,
    dataSynchronizer: $props.dataSynchronizer,
    debounce: $props.debounce,
    parseTime: $props.parseTime,
    skipTimeStep: $props.skipTimeStep,
    replaySpeedStep: $props.replaySpeedStep,
    onEvent: $options.onControlEvent,
    "support-realtime": $props.supportRealTime
  }, null, 8, ["dataSource", "dataSynchronizer", "debounce", "parseTime", "skipTimeStep", "replaySpeedStep", "onEvent", "support-realtime"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $data.batch ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_TimeControllerBatch, {
    key: 2,
    dataSource: $props.dataSource,
    debounce: $props.debounce,
    parseTime: $props.parseTime,
    onEvent: $options.onControlEvent
  }, null, 8, ["dataSource", "debounce", "parseTime", "onEvent"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)]);
}
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.vue?vue&type=template&id=d0807538

;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=template&id=55984fe2&scoped=true


var TimeController_replayvue_type_template_id_55984fe2_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-55984fe2"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var TimeController_replayvue_type_template_id_55984fe2_scoped_true_hoisted_1 = ["id"];
var TimeController_replayvue_type_template_id_55984fe2_scoped_true_hoisted_2 = {
  class: "buttons"
};
var _hoisted_3 = {
  class: "actions"
};
var _hoisted_4 = {
  class: "datasource-actions replay"
};
var _hoisted_5 = ["id"];
var _hoisted_6 = /*#__PURE__*/TimeController_replayvue_type_template_id_55984fe2_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-history"
  }, null, -1);
});
var _hoisted_7 = [_hoisted_6];
var _hoisted_8 = {
  class: "control-speed"
};
var _hoisted_9 = ["id"];
var _hoisted_10 = /*#__PURE__*/TimeController_replayvue_type_template_id_55984fe2_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-minus"
  }, null, -1);
});
var _hoisted_11 = [_hoisted_10];
var _hoisted_12 = ["id"];
var _hoisted_13 = ["id"];
var _hoisted_14 = /*#__PURE__*/TimeController_replayvue_type_template_id_55984fe2_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-plus"
  }, null, -1);
});
var _hoisted_15 = [_hoisted_14];
var _hoisted_16 = {
  class: "control-back-for"
};
var _hoisted_17 = ["id"];
var _hoisted_18 = /*#__PURE__*/TimeController_replayvue_type_template_id_55984fe2_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-fast-backward"
  }, null, -1);
});
var _hoisted_19 = [_hoisted_18];
var _hoisted_20 = ["id"];
var _hoisted_21 = /*#__PURE__*/TimeController_replayvue_type_template_id_55984fe2_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-pause"
  }, null, -1);
});
var _hoisted_22 = [_hoisted_21];
var _hoisted_23 = ["id"];
var _hoisted_24 = ["id"];
var _hoisted_25 = /*#__PURE__*/TimeController_replayvue_type_template_id_55984fe2_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-fast-forward"
  }, null, -1);
});
var _hoisted_26 = [_hoisted_25];
function TimeController_replayvue_type_template_id_55984fe2_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_RangeSliderReplay = (0,runtime_core_esm_bundler/* resolveComponent */.up)("RangeSliderReplay");
  var _component_ControlTimeReplay = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ControlTimeReplay");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
    id: 'control-component-' + this.id,
    class: "control"
  }, [$data.rangeSliderInit && $data.init ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_RangeSliderReplay, {
    key: 0,
    update: $data.update,
    interval: $data.interval,
    onEvent: $options.onRangeSliderEvent,
    minTimestamp: $options.minTimeStamp,
    maxTimestamp: $options.maxTimeStamp,
    "start-timestamp": $options.startTimeStamp,
    "end-timestamp": $options.endTimeStamp,
    dataSynchronizer: $props.dataSynchronizer,
    ref: "rangeSliderRef"
  }, null, 8, ["update", "interval", "onEvent", "minTimestamp", "maxTimestamp", "start-timestamp", "end-timestamp", "dataSynchronizer"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", TimeController_replayvue_type_template_id_55984fe2_scoped_true_hoisted_2, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_3, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [$props.supportRealTime ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
    key: 0,
    id: 'replay-btn-' + $data.id,
    class: "control-btn clicked",
    onClick: _cache[0] || (_cache[0] = function () {
      return $options.toggleRealtime && $options.toggleRealtime.apply($options, arguments);
    })
  }, _hoisted_7, 8, _hoisted_5)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_8, [(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
    id: 'speed-minus-btn-' + $data.id,
    class: "control-btn",
    onMouseup: _cache[1] || (_cache[1] = function () {
      return $options.stopSpeed && $options.stopSpeed.apply($options, arguments);
    }),
    onMouseleave: _cache[2] || (_cache[2] = function () {
      return $options.stopSpeed && $options.stopSpeed.apply($options, arguments);
    }),
    onClick: _cache[3] || (_cache[3] = function () {
      return $options.decSpeed && $options.decSpeed.apply($options, arguments);
    }),
    onMousedown: _cache[4] || (_cache[4] = function () {
      return $options.decSpeedDown && $options.decSpeedDown.apply($options, arguments);
    })
  }, _hoisted_11, 40, _hoisted_9), (0,runtime_core_esm_bundler/* createElementVNode */._)("span", {
    class: "chip control-speed-content",
    id: $data.speedId
  }, (0,shared_esm_bundler/* toDisplayString */.zw)($data.speed > 0 ? $data.speed.toFixed(2) + 'x' : 'none'), 9, _hoisted_12), (0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
    id: 'speed-plus-btn-' + $data.id,
    class: "control-btn",
    onMouseup: _cache[5] || (_cache[5] = function () {
      return $options.stopSpeed && $options.stopSpeed.apply($options, arguments);
    }),
    onMouseleave: _cache[6] || (_cache[6] = function () {
      return $options.stopSpeed && $options.stopSpeed.apply($options, arguments);
    }),
    onClick: _cache[7] || (_cache[7] = function () {
      return $options.incSpeed && $options.incSpeed.apply($options, arguments);
    }),
    onMousedown: _cache[8] || (_cache[8] = function () {
      return $options.incSpeedDown && $options.incSpeedDown.apply($options, arguments);
    })
  }, _hoisted_15, 40, _hoisted_13)]), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_16, [(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
    id: 'fast-back-btn-' + $data.id,
    class: "control-btn",
    onMouseup: _cache[9] || (_cache[9] = function () {
      return $options.stopBackward && $options.stopBackward.apply($options, arguments);
    }),
    onMouseleave: _cache[10] || (_cache[10] = function () {
      return $options.stopBackward && $options.stopBackward.apply($options, arguments);
    }),
    onMousedown: _cache[11] || (_cache[11] = function () {
      return $options.doBackward && $options.doBackward.apply($options, arguments);
    })
  }, _hoisted_19, 40, _hoisted_17), $data.connected ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
    key: 0,
    id: 'pause-btn-' + $data.id,
    class: "control-btn control-btn-pause",
    onClick: _cache[12] || (_cache[12] = function () {
      return $options.doPause && $options.doPause.apply($options, arguments);
    })
  }, _hoisted_22, 8, _hoisted_20)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
    key: 1,
    id: 'play-btn-' + $data.id,
    class: "control-btn control-btn-play"
  }, [(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-play",
    onClick: _cache[13] || (_cache[13] = function () {
      return $options.doPlay && $options.doPlay.apply($options, arguments);
    })
  })], 8, _hoisted_23)), (0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
    id: 'fast-forward-btn-' + $data.id,
    class: "control-btn",
    onMouseup: _cache[14] || (_cache[14] = function () {
      return $options.stopForward && $options.stopForward.apply($options, arguments);
    }),
    onMouseleave: _cache[15] || (_cache[15] = function () {
      return $options.stopForward && $options.stopForward.apply($options, arguments);
    }),
    onMousedown: _cache[16] || (_cache[16] = function () {
      return $options.doFastForward && $options.doFastForward.apply($options, arguments);
    })
  }, _hoisted_26, 40, _hoisted_24)]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ControlTimeReplay, {
    htmlCurrentTime: $options.htmlCurrentTime,
    htmlEndTime: $options.htmlEndTime
  }, null, 8, ["htmlCurrentTime", "htmlEndTime"])])])])], 8, TimeController_replayvue_type_template_id_55984fe2_scoped_true_hoisted_1);
}
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=template&id=55984fe2&scoped=true

;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/RangeSlider.replay.vue?vue&type=template&id=e377d9fe

var RangeSlider_replayvue_type_template_id_e377d9fe_hoisted_1 = ["id"];
function RangeSlider_replayvue_type_template_id_e377d9fe_render(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
    id: $data.id,
    class: "range"
  }, null, 8, RangeSlider_replayvue_type_template_id_e377d9fe_hoisted_1);
}
// EXTERNAL MODULE: ./node_modules/nouislider/distribute/nouislider.js
var nouislider = __webpack_require__(9365);
// EXTERNAL MODULE: ../../osh-js/node_modules/wnumb/wNumb.js
var wNumb = __webpack_require__(10303);
;// CONCATENATED MODULE: ../../osh-js/source/ext/ui/view/rangeslider/RangeSliderView.replay.js









/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2017 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/








/**
 * @extends View
 * @example
 *
 * import RangeSliderView from 'ext/view/RangeSliderView.js';
 *
 * let rangeSlider = new RangeSliderView("rangeSlider",{
    dataSourceId: dataSource.id,
    startTime: "2015-12-19T21:04:30Z",
    endTime: "2015-12-19T21:09:19Z"
});
 */
var RangeSliderViewReplay = /*#__PURE__*/function (_View) {
  (0,inherits/* default */.Z)(RangeSliderViewReplay, _View);
  var _super = (0,createSuper/* default */.Z)(RangeSliderViewReplay);
  /**
   * Create the discoveryView
   * @param {Object} [properties={}] - the properties of the view
   * @param {String} properties.container - The div element to attach to
   * @param {Object[]}  [properties.layers=[]] - The initial layers to add
   * @param {Number} properties.startTime - The start time (lower handle) as ISO date
   * @param {Number} properties.endTime - The end time (upper handle) as ISO date
   * @param {Number} properties.minTimeRange - The min range time as ISO date
   * @param {Number} properties.maxTimeRange - The max range as ISO date
   * @param {String} properties.dataSource - The dataSourceObject
   * @param {Number} [properties.debounce=0] - Debounce time after updating the slider
   * @param {Boolean} properties.disabled - disabled the range slider
   * @param {Object} properties.dataSynchronizer - a data synchronizer to get current data time for this set of datasources
   */
  function RangeSliderViewReplay(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, RangeSliderViewReplay);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, properties), {}, {
      supportedLayers: ['data']
    }));
    _this.slider = document.createElement("div");
    _this.slider.setAttribute("class", "core-rangeslider-slider");
    document.getElementById(_this.divId).appendChild(_this.slider);
    var startTimestamp = new Date().getTime();
    var endTimestamp = new Date("2055-01-01T00:00:00Z").getTime(); //01/01/2055

    var minTimeRangeTimestamp = startTimestamp;
    var maxTimeRangeTimestamp = endTimestamp;
    _this.update = false;
    _this.dataSourceObject = null;
    _this.debounce = 0;
    _this.options = {};
    _this.sliding = false;
    if (isDefined(properties)) {
      if (isDefined(properties.startTime)) {
        startTimestamp = new Date(properties.startTime).getTime();
      }
      if (isDefined(properties.endTime)) {
        endTimestamp = new Date(properties.endTime).getTime();
      }
      if (isDefined(properties.minTimeRange)) {
        minTimeRangeTimestamp = new Date(properties.minTimeRange).getTime();
      }
      if (isDefined(properties.maxTimeRange)) {
        maxTimeRangeTimestamp = new Date(properties.maxTimeRange).getTime();
      }
      if (isDefined(properties.dataSynchronizer)) {
        _this.dataSourceObject = properties.dataSynchronizer;
      }
      if (isDefined(properties.dataSource)) {
        _this.dataSourceObject = properties.dataSource;
      }
      if (isDefined(properties.debounce)) {
        _this.debounce = parseInt(properties.debounce);
      }
      if (isDefined(properties.options)) {
        _this.options = properties.options;
      }
      if (isDefined(properties.disabled)) {
        _this.slider.setAttribute('disabled', properties.disabled);
      }
    }
    var options = (0,objectSpread2/* default */.Z)({
      start: [startTimestamp, endTimestamp] /*,timestamp("2015-02-16T08:09:00Z")]*/,
      range: {
        min: minTimeRangeTimestamp,
        max: maxTimeRangeTimestamp
      },
      //step:  1000* 60* 60,
      format: wNumb({
        decimals: 0
      }),
      behaviour: 'drag',
      connect: true,
      animate: false,
      pips: {
        mode: 'positions',
        values: [5, 25, 50, 75],
        density: 1,
        //stepped: true,
        format: wNumb({
          edit: function edit(value) {
            return new Date(parseInt(value)).toISOString().replace(".000Z", "Z").split("T")[1].split("Z")[0].split(".")[0];
          }
        })
      }
    }, _this.options);

    // for above listeners
    _this.maxTimeRangeTimestamp = maxTimeRangeTimestamp;
    nouislider.create(_this.slider, options);
    _this.createEvents();
    if (isDefined(_this.dataSourceObject)) {
      // listen for BC
      var bc = new BroadcastChannel(_this.dataSourceObject.getTimeTopicId());
      bc.onmessage = function (message) {
        if (!_this.update) {
          _this.slider.noUiSlider.set([message.data.timestamp]);
          _this.onChange(message.data.timestamp, parseInt(_this.slider.noUiSlider.get()[1]), 'data');
        }
      };
      _this.bc = bc;
    }
    return _this;
  }
  (0,createClass/* default */.Z)(RangeSliderViewReplay, [{
    key: "createActivateButton",
    value: function createActivateButton() {
      var activateButtonDiv = document.createElement("div");
      var aTagActivateButton = document.createElement("a");
      activateButtonDiv.appendChild(aTagActivateButton);
      activateButtonDiv.setAttribute("class", "core-rangeslider-control");
      var self = this;
      activateButtonDiv.addEventListener("click", function (event) {
        if (activateButtonDiv.className.indexOf("core-rangeslider-control-select") > -1) {
          activateButtonDiv.setAttribute("class", "core-rangeslider-control");
          self.deactivate();
        } else {
          activateButtonDiv.setAttribute("class", "core-rangeslider-control-select");
          self.activate();
        }
      });
      document.getElementById(this.divId).appendChild(activateButtonDiv);
    }
  }, {
    key: "createEvents",
    value: function createEvents() {
      var that = this;
      //noUi-handle noUi-handle-lower
      // start->update->end
      this.slider.noUiSlider.on("start", function (values, handle) {
        that.update = true;
        that.sliding = true;
        var st = parseInt(values[0]);
        var end = parseInt(values[1]) || parseInt(that.maxTimeRangeTimestamp);
        that.onChange(st, end, 'start');
      });
      this.slider.noUiSlider.on("slide", function (values, handle) {
        that.sliding = true;
        that.update = true;
        var st = parseInt(values[0]);
        var end = parseInt(values[1]) || parseInt(that.maxTimeRangeTimestamp);
        that.onChange(st, end, 'slide');
      });
      this.slider.noUiSlider.on("end", function (values, handle) {
        if (that.sliding) {
          that.sliding = false;
          var st = parseInt(values[0]);
          var end = parseInt(values[1]) || parseInt(that.maxTimeRangeTimestamp);
          that.onChange(st, end, 'end');
          // that.update = false;
          setTimeout(function () {
            return that.update = false;
          }, that.debounce);
        }
      });
    }

    /**
     * Deactivate the timeline bar
     */
  }, {
    key: "deactivate",
    value: function deactivate() {
      this.slider.setAttribute('disabled', true);
    }

    /**
     * Activate the timeline nar
     */
  }, {
    key: "activate",
    value: function activate() {
      this.slider.removeAttribute('disabled');
    }
  }, {
    key: "setData",
    value: function setData(dataSourceId, data) {
      var values = data.values;
      for (var i = 0; i < values.length; i++) {
        if (!this.update) {
          this.slider.noUiSlider.set([values[i].timestamp]);
        }
      }
    }
  }, {
    key: "setStartTime",
    value: function setStartTime(timestamp) {
      if (!this.update) {
        this.slider.noUiSlider.set([timestamp]);
      }
    }
  }, {
    key: "setTime",
    value: function setTime(startTimestamp, endTimestamp) {
      if (!this.update) {
        this.slider.noUiSlider.set([startTimestamp, endTimestamp]);
      }
    }
  }, {
    key: "setTimeRange",
    value: function setTimeRange(minRangeTimestamp, maxRangeTimestamp) {
      if (!this.update) {
        this.slider.noUiSlider.updateOptions({
          range: {
            min: minRangeTimestamp,
            max: maxRangeTimestamp
          }
        });
      }
    }
  }, {
    key: "onChange",
    value: function onChange(startTime, endTime, type) {
      if (type === 'end') {
        this.dataSourceObject.setTimeRange(new Date(startTime).toISOString(), new Date(endTime).toISOString(), this.dataSourceObject.properties.replaySpeed, true);
      }
    }
  }, {
    key: "destroy",
    value: function destroy() {
      if (isDefined(this.slider) && isDefined(this.slider.noUiSlider)) {
        this.slider.noUiSlider.destroy();
      }
      if (isDefined(this.bc)) {
        this.bc.close();
      }
    }
  }, {
    key: "disable",
    value: function disable() {
      if (isDefined(this.slider)) {
        this.slider.setAttribute('disabled', true);
      }
    }
  }, {
    key: "enable",
    value: function enable() {
      if (isDefined(this.slider)) {
        this.slider.removeAttribute('disabled');
      }
    }
  }]);
  return RangeSliderViewReplay;
}(view_View);
/* harmony default export */ var RangeSliderView_replay = (RangeSliderViewReplay);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/RangeSlider.replay.vue?vue&type=script&lang=js



/* harmony default export */ var RangeSlider_replayvue_type_script_lang_js = ({
  name: "RangeSliderReplay",
  props: ['minTimestamp', 'maxTimestamp', 'startTimestamp', 'endTimestamp', 'interval', 'waitForTimeChangedEvent', 'dataSynchronizer'],
  watch: {
    minTimestamp: function minTimestamp() {
      this.rangeSlider.setTimeRange(this.minTimestamp, this.maxTimestamp);
    },
    maxTimestamp: function maxTimestamp() {
      this.rangeSlider.setTimeRange(this.minTimestamp, this.maxTimestamp);
    },
    startTimestamp: function startTimestamp() {
      this.rangeSlider.setTime(this.startTimestamp, this.endTimestamp);
    },
    endTimestamp: function endTimestamp() {
      this.rangeSlider.setTime(this.startTimestamp, this.endTimestamp);
    }
  },
  data: function data() {
    return {
      id: randomUUID(),
      rangeSlider: undefined
    };
  },
  mounted: function mounted() {
    var _this = this;
    this.rangeSlider = new RangeSliderView_replay({
      container: this.id,
      minTimeRange: new Date(this.minTimestamp).toISOString(),
      maxTimeRange: new Date(this.maxTimestamp).toISOString(),
      startTime: new Date(this.startTimestamp).toISOString(),
      endTime: new Date(this.endTimestamp).toISOString(),
      debounce: 200,
      options: {}
    });
    var update = this.update;
    this.rangeSlider.onChange = function (startTimestamp, endTimestamp, event) {
      if (event === 'slide') {
        update = true;
        _this.$emit('event', {
          name: 'model',
          update: true
        });
      } else if (event === 'end') {
        update = false;
        _this.$emit('event', {
          name: 'model',
          update: false
        });
      }
      if (!_this.interval) {
        _this.$emit('event', {
          name: event,
          startTimestamp: startTimestamp,
          endTimestamp: endTimestamp
        });
      }
      if (event === 'end') {
        _this.$emit('event', {
          name: 'doPlay'
        });
      }
    };
    if (isDefined(this.dataSynchronizer)) {
      // add listen on disabling if no datasources
      this.dataSynchronizer.onRemovedDataSource = function (dataSourceId) {
        if (this.dataSynchronizer.getDataSources().length === 0 && isDefined(this.rangeSlider)) {
          // To disable
          this.rangeSlider.disable();
        }
      }.bind(this);
      this.dataSynchronizer.onAddedDataSource = function (dataSourceId) {
        console.log('onAdded');
        if (this.dataSynchronizer.getDataSources().length > 0 && isDefined(this.rangeSlider)) {
          // To disable
          this.rangeSlider.enable();
        }
      }.bind(this);
    }
  },
  methods: {
    setStartTime: function setStartTime(timestamp) {
      this.rangeSlider.setStartTime(timestamp);
    }
  },
  // vuejs 3.x
  beforeUnmount: function beforeUnmount() {
    if (this.rangeSlider) {
      this.rangeSlider.destroy();
    }
  },
  // vuejs 2.x
  beforeDestroy: function beforeDestroy() {
    if (this.rangeSlider) {
      this.rangeSlider.destroy();
    }
  }
});
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/RangeSlider.replay.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/RangeSlider.replay.vue




;
const RangeSlider_replay_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(RangeSlider_replayvue_type_script_lang_js, [['render',RangeSlider_replayvue_type_template_id_e377d9fe_render]])

/* harmony default export */ var RangeSlider_replay = (RangeSlider_replay_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/ControlTime.replay.vue?vue&type=template&id=22f2bd72&scoped=true

var ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-22f2bd72"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_1 = {
  class: "control-time"
};
var ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_2 = ["innerHTML"];
var ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_3 = /*#__PURE__*/ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("span", {
    style: {
      "padding": "0 10px 0 10px"
    }
  }, "/", -1);
});
var ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_4 = ["innerHTML"];
function ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_1, [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", {
    innerHTML: $props.htmlCurrentTime
  }, null, 8, ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_2), ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_3, (0,runtime_core_esm_bundler/* createElementVNode */._)("span", {
    innerHTML: $props.htmlEndTime
  }, null, 8, ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_hoisted_4)]);
}
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/ControlTime.replay.vue?vue&type=template&id=22f2bd72&scoped=true

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/ControlTime.replay.vue?vue&type=script&lang=js
/* harmony default export */ var ControlTime_replayvue_type_script_lang_js = ({
  name: "ControlTimeReplay",
  props: ['htmlCurrentTime', 'htmlEndTime']
});
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/ControlTime.replay.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/ControlTime.replay.vue?vue&type=style&index=0&id=22f2bd72&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/ControlTime.replay.vue?vue&type=style&index=0&id=22f2bd72&scoped=true&lang=css

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/ControlTime.replay.vue




;


const ControlTime_replay_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ControlTime_replayvue_type_script_lang_js, [['render',ControlTime_replayvue_type_template_id_22f2bd72_scoped_true_render],['__scopeId',"data-v-22f2bd72"]])

/* harmony default export */ var ControlTime_replay = (ControlTime_replay_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=script&lang=js














/**
 * @module osh-vue/TimeController
 * @desc TimeController component to control timeline of the datasources
 * @vue-prop {DataSource}  [dataSource] - DataSource object
 * @vue-prop {DataSynchronizer} [dataSynchronizer] - DataSynchronizer object
 * @vue-prop {String} [skipTimeStep='5s'] Time to skip backward/forward. In seconds or percent of the total time
 * @vue-prop {Number} [replaySpeedStep=0.1] Time to decrease/increase replay speed value
 * @vue-prop {Number} [debounce=800] Debounce time before executing refresh while clicking on backward/forward/replaySpeed action. In millis
 * @vue-prop {Function} [parseTime] - Function used to parse the time and display next to the actions buttons. Return value can be text or HTML.
 * @vue-event {String} [event='change'/'slide'/'end'/'replaySpeed'/'toggle-realtime'] - Emit event's name after time change
 */
/* harmony default export */ var TimeController_replayvue_type_script_lang_js = ({
  name: "TimeControllerReplay",
  components: {
    ControlTimeReplay: ControlTime_replay,
    RangeSliderReplay: RangeSlider_replay
  },
  props: {
    supportRealTime: {
      type: Boolean,
      default: function _default() {
        return true;
      }
    },
    dataSource: {
      type: Object
    },
    dataSynchronizer: {
      type: Object
    },
    skipTimeStep: {
      type: String,
      default: function _default() {
        return '5s';
      } // 5sec
    },

    replaySpeedStep: {
      type: Number,
      default: function _default() {
        return 0.1;
      }
    },
    debounce: {
      type: Number,
      default: function _default() {
        return 800;
      } // 800ms
    },

    startTimeAsTimestamp: {
      type: Number
    },
    parseTime: {
      type: Function,
      default: function parseDate(timestamp) {
        var date = new Date(timestamp);
        var isoDate = date.toISOString();
        var smallDate = isoDate.substr(0, 10);
        var smallTime = isoDate.substr(11, 8);
        return '<div class="box-time"><div><strong>' + smallTime + '</strong></div><div><i><small>(' + smallDate + ')</small></i></div></div>';
      }
    }
  },
  data: function data() {
    return {
      id: randomUUID(),
      speedId: randomUUID(),
      event: null,
      dataSourceObject: null,
      connected: true,
      startTimestamp: null,
      endTimestamp: null,
      minTimestamp: null,
      maxTimestamp: null,
      speed: 1.0,
      interval: false,
      rangeSlider: null,
      skipTime: 0,
      init: false,
      update: false,
      lastSynchronizedTimestamp: -1,
      waitForTimeChangedEvent: false,
      rangeSliderInit: false
    };
  },
  watch: {
    event: function event(newValue) {
      this.$emit('event', {
        event: newValue,
        startTimestamp: this.startTimestamp,
        endTimestamp: this.endTimestamp
      });
    }
  },
  computed: {
    minTimeStamp: function minTimeStamp() {
      return this.minTimestamp;
    },
    maxTimeStamp: function maxTimeStamp() {
      return this.maxTimestamp;
    },
    startTimeStamp: function startTimeStamp() {
      return this.startTimestamp;
    },
    endTimeStamp: function endTimeStamp() {
      return this.endTimestamp;
    },
    htmlCurrentTime: function htmlCurrentTime() {
      return this.parseTime(this.startTimestamp);
    },
    htmlEndTime: function htmlEndTime() {
      return this.parseTime(this.endTimestamp);
    }
  },
  beforeMount: function beforeMount() {
    assertDefined(this.getDataSourceObject(), 'either dataSource properties or dataSynchronizer must be defined');
    this.dataSourceObject = this.getDataSourceObject();
  },
  updated: function updated() {
    // this.initComp();
  },
  mounted: function mounted() {
    this.initComp();
  },
  methods: {
    initComp: function initComp() {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              assertDefined(_this.getDataSourceObject(), 'either dataSource properties or dataSynchronizer must be defined');
              _context3.next = 3;
              return _this.checkInit();
            case 3:
              _this.createTimeBc();

              // listen for datasource status
              _this.dataSourceObject.subscribe( /*#__PURE__*/function () {
                var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(message) {
                  return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        if (!(message.status === Status.DISCONNECTED || message.status === Status.FETCH_ENDED || message.status === Status.FETCH_STARTED)) {
                          _context.next = 4;
                          break;
                        }
                        _context.next = 3;
                        return _this.dataSourceObject.isConnected();
                      case 3:
                        _this.connected = _context.sent;
                      case 4:
                      case "end":
                        return _context.stop();
                    }
                  }, _callee);
                }));
                return function (_x) {
                  return _ref.apply(this, arguments);
                };
              }(), [EventType.STATUS]);
              _this.updateTimeDebounce = debounce(_this.updateTime.bind(_this), _this.debounce);
              _this.setRangeSliderStartTimeThrottle = throttle(_this.setRangeSliderStartTime.bind(_this), _this.debounce);
              _this.displayConsoleWarningIncompatibleVersionThrottle = throttle(_this.displayConsoleWarningIncompatibleVersion.bind(_this), _this.debounce);
              if (isDefined(_this.dataSynchronizer)) {
                _this.dataSynchronizer.onAddedDataSource = /*#__PURE__*/(0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
                  return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
                    while (1) switch (_context2.prev = _context2.next) {
                      case 0:
                        _context2.next = 2;
                        return _this.checkInit();
                      case 2:
                      case "end":
                        return _context2.stop();
                    }
                  }, _callee2);
                }));
              }
            case 9:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }))();
    },
    checkInit: function checkInit() {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee4() {
        var totalTime, percent;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (!_this2.init && _this2.dataSourceObject.getDataSources().length > 0) {
                try {
                  _this2.dataSourceObject.isConnected().then(function (value) {
                    return _this2.connected = value;
                  });
                  _this2.minTimestamp = _this2.dataSourceObject.getMinTimeAsTimestamp();
                  _this2.maxTimestamp = _this2.dataSourceObject.getMaxTimeAsTimestamp();
                  _this2.speed = _this2.dataSourceObject.getReplaySpeed();
                  _this2.startTimestamp = _this2.dataSourceObject.getStartTimeAsTimestamp() ? _this2.dataSourceObject.getStartTimeAsTimestamp() : _this2.minTimestamp;
                  _this2.endTimestamp = _this2.dataSourceObject.getEndTimeAsTimestamp() ? _this2.dataSourceObject.getEndTimeAsTimestamp() : _this2.maxTimestamp;

                  // compute skip time
                  if (_this2.skipTimeStep.endsWith('s')) {
                    // time in second
                    _this2.skipTime = parseFloat(_this2.skipTimeStep.substring(0, _this2.skipTimeStep.length - 1)) * 1000;
                  } else if (_this2.skipTimeStep.endsWith('%')) {
                    // compute percent on the whole period
                    totalTime = _this2.maxTimestamp - _this2.minTimestamp;
                    percent = parseFloat(_this2.skipTimeStep.substring(0, _this2.skipTimeStep.length - 1));
                    _this2.skipTime = percent * totalTime / 100;
                  }
                  _this2.init = true;
                  _this2.createRangeSlider();
                } catch (ex) {
                  console.error(ex);
                }
              }
            case 1:
            case "end":
              return _context4.stop();
          }
        }, _callee4);
      }))();
    },
    displayConsoleWarningIncompatibleVersionThrottle: function displayConsoleWarningIncompatibleVersionThrottle() {},
    displayConsoleWarningIncompatibleVersion: function displayConsoleWarningIncompatibleVersion() {
      console.warn('Incompatible data version');
    },
    createTimeBc: function createTimeBc() {
      var _this3 = this;
      // listen for BC
      this.dataSourceObject.subscribe(function (message) {
        if (message.type === EventType.CLOSED) {
          _this3.connected = false;
        }
        if (_this3.waitForTimeChangedEvent) {
          if (message.type === EventType.MASTER_TIME) {
            _this3.displayConsoleWarningIncompatibleVersionThrottle();
          }
          if (message.type === EventType.TIME_CHANGED) {
            _this3.waitForTimeChangedEvent = false;
            return;
          }
        }
        if (_this3.waitForTimeChangedEvent) {
          return;
        }
        if (message.type === EventType.MASTER_TIME) {
          if (!_this3.connected) {
            _this3.connected = true;
          }
          // consider here datasynchronizer sends data in time order
          if (!_this3.interval && _this3.speed > 0.0 && !_this3.update) {
            // }
            _this3.setStartTimestamp(message.timestamp);
          }
        }
        if (message.type === EventType.MASTER_TIME) {
          // consider here datasynchronizer sends data in time order
          _this3.lastSynchronizedTimestamp = message.timestamp;
        }
      }, [EventType.TIME_CHANGED, EventType.MASTER_TIME, EventType.CLOSED]);
    },
    setStartTimestamp: function setStartTimestamp(timestamp) {
      this.startTimestamp = timestamp;
      var ref = this.$refs.rangeSliderRef;
      if (ref) {
        ref.setStartTime(timestamp);
      }
    },
    createRangeSlider: function createRangeSlider() {
      if (!this.rangeSliderInit) {
        var dataSourceObj = {};
        if (isDefined(this.dataSynchronizer)) {
          dataSourceObj.dataSynchronizer = this.dataSynchronizer;
          this.dataSynchronizer.onTimeChanged = function (minTimestamp, maxTimestamp, startTimestamp, endTimestamp) {
            this.minTimestamp = minTimestamp;
            this.maxTimestamp = maxTimestamp;
            this.startTimestamp = startTimestamp ? startTimestamp : minTimestamp;
            this.endTimestamp = endTimestamp ? endTimestamp : maxTimestamp;
          }.bind(this);
        } else {
          dataSourceObj.dataSource = this.dataSource;
        }
        this.rangeSliderInit = true;
        // HAS BEEN REPLACED
      }
    },
    doBackward: function doBackward() {
      var _this4 = this;
      if (!this.interval) {
        this.interval = setInterval(function () {
          var backwardTime = parseInt(_this4.startTimestamp - _this4.skipTime);
          if (backwardTime > _this4.minTimestamp) {
            _this4.startTimestamp = backwardTime;
          } else {
            _this4.startTimestamp = _this4.minTimestamp;
            backwardTime = _this4.minTimestamp;
          }
          _this4.setRangeSliderStartTime(backwardTime);
        }, 70);
      }
    },
    stopBackward: function stopBackward() {
      if (this.interval) {
        clearInterval(this.interval);
        this.interval = false;
        this.update = true;
        this.updateTimeDebounce('backward');
      }
    },
    onRangeSliderEvent: function onRangeSliderEvent(props) {
      if ('startTimestamp' in props) {
        this.startTimestamp = props.startTimestamp;
        this.waitForTimeChangedEvent = true;
      }
      if ('endTimestamp' in props) {
        this.endTimestamp = props.endTimestamp;
        this.waitForTimeChangedEvent = true;
      }
      if ('update' in props) {
        this.update = props.update;
        this.waitForTimeChangedEvent = true;
      }
      if ('waitForTimeChangedEvent' in props) {
        this.waitForTimeChangedEvent = props.waitForTimeChangedEvent;
      }
      if (props.name === 'doPlay') {
        this.doPlay();
      }
    },
    resetMasterTime: function resetMasterTime() {
      // reset master time
      this.waitForTimeChangedEvent = this.lastSynchronizedTimestamp !== -1;
      this.lastSynchronizedTimestamp = -1;
      this.on('time-changed');
      this.update = false;
    },
    updateTime: function updateTime(event) {
      var _this5 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee5() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _this5.resetMasterTime();
              _context5.next = 3;
              return _this5.dataSourceObject.setTimeRange(new Date(_this5.startTimestamp).toISOString(), new Date(_this5.endTimestamp).toISOString(), _this5.speed, true);
            case 3:
              _this5.on(event);
            case 4:
            case "end":
              return _context5.stop();
          }
        }, _callee5);
      }))();
    },
    updateTimeDebounce: function updateTimeDebounce() {},
    setRangeSliderStartTime: function setRangeSliderStartTime(timestamp) {
      var ref = this.$refs.rangeSliderRef;
      if (ref) {
        ref.setStartTime(timestamp);
      }
    },
    setRangeSliderStartTimeThrottle: function setRangeSliderStartTimeThrottle() {},
    stopForward: function stopForward() {
      if (this.interval) {
        this.update = true;
        this.updateTimeDebounce('forward');
        clearInterval(this.interval);
        this.interval = false;
      }
    },
    doFastForward: function doFastForward() {
      var _this6 = this;
      if (!this.interval) {
        this.interval = setInterval(function () {
          var forwardTime = parseInt(_this6.startTimestamp + _this6.skipTime);
          if (forwardTime < _this6.maxTimestamp) {
            _this6.startTimestamp = forwardTime;
          } else {
            _this6.startTimestamp = _this6.maxTimestamp;
            forwardTime = _this6.maxTimestamp;
          }
          _this6.setRangeSliderStartTime(forwardTime);
        }, 70);
      }
    },
    doPause: function doPause() {
      // this.connected = false;
      this.waitForTimeChangedEvent = true;
      this.dataSourceObject.disconnect();
      //save current time
      this.on('pause');
      this.on('time-changed');
    },
    doPlay: function doPlay() {
      this.updateTime('play');
    },
    getDataSourceObject: function getDataSourceObject() {
      return isDefined(this.dataSynchronizer) ? this.dataSynchronizer : this.dataSource;
    },
    toggleRealtime: function toggleRealtime() {
      var _this7 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee6() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _this7.on('toggle-realtime');
            case 1:
            case "end":
              return _context6.stop();
          }
        }, _callee6);
      }))();
    },
    incSpeed: function incSpeed() {
      if (this.speed > 10.0) {
        this.speed += this.replaySpeedStep * 10.0;
      } else {
        this.speed += this.replaySpeedStep;
      }
    },
    incSpeedDown: function incSpeedDown() {
      var _this8 = this;
      if (!this.interval) {
        this.incSpeedTimeout = setTimeout(function () {
          _this8.interval = setInterval(_this8.incSpeed, 70);
        }, 200);
      }
    },
    decSpeed: function decSpeed() {
      var laterSpeed;
      if (this.speed > 10.0) {
        laterSpeed = this.speed - this.replaySpeedStep * 10.0;
      } else {
        laterSpeed = this.speed - this.replaySpeedStep;
      }
      if (laterSpeed >= 0.1) {
        this.speed = laterSpeed;
      } else if (this.speed !== 0.1) {
        this.speed = 0.1;
      }
    },
    decSpeedDown: function decSpeedDown() {
      var _this9 = this;
      if (this.speed > 0.1) {
        if (!this.interval) {
          this.incSpeedTimeout = setTimeout(function () {
            _this9.interval = setInterval(_this9.decSpeed, 70);
          }, 200);
        }
      }
    },
    stopSpeed: function stopSpeed() {
      if (this.interval || isDefined(this.incSpeedTimeout)) {
        if (this.interval) {
          clearInterval(this.interval);
          this.interval = false;
        } else {
          clearTimeout(this.incSpeedTimeout);
          this.incSpeedTimeout = null;
        }
        this.updateTimeDebounce('end');
      }
    },
    on: function on(eventName) {
      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      this.$emit('event', (0,objectSpread2/* default */.Z)({
        name: eventName
      }, props));
    },
    withLeadingZeros: function withLeadingZeros(dt) {
      return (dt < 10 ? '0' : '') + dt;
    },
    // vuejs 3.x
    beforeUnmount: function beforeUnmount() {
      var ref = this.$refs.rangeSliderRef;
      if (ref) {
        ref.destroy();
      }
    },
    // vuejs 2.x
    beforeDestroy: function beforeDestroy() {
      var ref = this.$refs.rangeSliderRef;
      if (ref) {
        ref.destroy();
      }
    }
  }
});
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=style&index=0&id=55984fe2&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=style&index=0&id=55984fe2&scoped=true&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=style&index=1&id=55984fe2&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.replay.vue?vue&type=style&index=1&id=55984fe2&lang=css

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.replay.vue




;



const TimeController_replay_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(TimeController_replayvue_type_script_lang_js, [['render',TimeController_replayvue_type_template_id_55984fe2_scoped_true_render],['__scopeId',"data-v-55984fe2"]])

/* harmony default export */ var TimeController_replay = (TimeController_replay_exports_);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.entries.js
var es_object_entries = __webpack_require__(69720);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=template&id=528e1b34&scoped=true


var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-528e1b34"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_1 = ["id"];
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_2 = {
  class: "buttons"
};
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_3 = {
  class: "actions"
};
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_4 = {
  class: "datasource-actions live"
};
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_5 = ["id"];
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_6 = /*#__PURE__*/TimeController_realtimevue_type_template_id_528e1b34_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-history"
  }, null, -1);
});
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_7 = [TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_6];
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_8 = ["id", "innerHTML"];
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_9 = /*#__PURE__*/TimeController_realtimevue_type_template_id_528e1b34_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("span", {
    class: "chip live"
  }, "LIVE", -1);
});
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_10 = {
  key: 1,
  class: "out-of-sync"
};
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_11 = ["id"];
var TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_12 = ["title"];
function TimeController_realtimevue_type_template_id_528e1b34_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_RangeSliderRealtime = (0,runtime_core_esm_bundler/* resolveComponent */.up)("RangeSliderRealtime");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
    id: 'control-component-' + this.id,
    class: "control"
  }, [$data.rangeSliderInit && $data.init ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_RangeSliderRealtime, {
    key: 0,
    "start-timestamp": $data.masterTime,
    dataSynchronizer: $props.dataSynchronizer,
    ref: "rangeSliderRef"
  }, null, 8, ["start-timestamp", "dataSynchronizer"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_2, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_3, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_4, [(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
    id: 'replay-btn-' + $data.id,
    class: "control-btn replay",
    onClick: _cache[0] || (_cache[0] = function () {
      return $options.toggleReplay && $options.toggleReplay.apply($options, arguments);
    })
  }, TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_7, 8, TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_5)]), $data.masterTime ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("span", {
    key: 0,
    id: 'current-time-' + $data.id,
    innerHTML: $props.parseTime($data.masterTime)
  }, null, 8, TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_8)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_9, Object.entries($data.outOfSync).length > 0 ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_10, [(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
    id: 'out-of-sync-btn-' + $data.id,
    class: "control-btn out-of-sync"
  }, [(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-exclamation-triangle",
    "data-toggle": "tooltip",
    title: $options.renderOutOfSync()
  }, null, 8, TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_12)], 8, TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_11)])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)])])], 8, TimeController_realtimevue_type_template_id_528e1b34_scoped_true_hoisted_1);
}
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=template&id=528e1b34&scoped=true

;// CONCATENATED MODULE: ../../osh-js/source/ext/ui/view/rangeslider/RangeSliderView.realtime.js







/***************************** BEGIN LICENSE BLOCK ***************************

 The contents of this file are subject to the Mozilla Public License, v. 2.0.
 If a copy of the MPL was not distributed with this file, You can obtain one
 at http://mozilla.org/MPL/2.0/.

 Software distributed under the License is distributed on an "AS IS" basis,
 WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 for the specific language governing rights and limitations under the License.

 Copyright (C) 2015-2017 Mathieu Dhainaut. All Rights Reserved.

 Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>

 ******************************* END LICENSE BLOCK ***************************/









/**
 * @extends View
 * @example
 *
 * import RangeSliderView from 'ext/view/RangeSliderView.js';
 *
 * let rangeSlider = new RangeSliderView("rangeSlider",{
    dataSourceId: dataSource.id,
    startTime: "2015-12-19T21:04:30Z",
    endTime: "2015-12-19T21:09:19Z"
});
 */
var RangeSliderViewRealtime = /*#__PURE__*/function (_View) {
  (0,inherits/* default */.Z)(RangeSliderViewRealtime, _View);
  var _super = (0,createSuper/* default */.Z)(RangeSliderViewRealtime);
  /**
  	* Create the discoveryView
    * @param {Object} [properties={}] - the properties of the view
    * @param {String} properties.container - The div element to attach to
    * @param {Object[]}  [properties.layers=[]] - The initial layers to add
     * @param {String} properties.dataSource - The dataSourceObject
     * @param {Number} [properties.debounce=0] - Debounce time after updating the slider
     * @param {Boolean} properties.disabled - disabled the range slider
     * @param {Object} properties.dataSynchronizer - a data synchronizer to get current data time for this set of datasources
     * @param {Object} properties.startTimestamp - Starts the rangeSlider from this date
     */
  function RangeSliderViewRealtime(properties) {
    var _this;
    (0,classCallCheck/* default */.Z)(this, RangeSliderViewRealtime);
    _this = _super.call(this, (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, properties), {}, {
      supportedLayers: ['data']
    }));
    _this.slider = document.createElement("div");
    _this.slider.setAttribute("class", "core-rangeslider-slider");
    document.getElementById(_this.divId).appendChild(_this.slider);
    _this.update = false;
    _this.dataSourceObject = null;
    _this.debounce = 0;
    _this.options = {};
    _this.sliding = false;
    _this.startTimestamp = new Date().toISOString();
    if (isDefined(properties)) {
      if (isDefined(properties.dataSynchronizer)) {
        _this.dataSourceObject = properties.dataSynchronizer;
      }
      if (isDefined(properties.dataSource)) {
        _this.dataSourceObject = properties.dataSource;
      }
      if (isDefined(properties.debounce)) {
        _this.debounce = parseInt(properties.debounce);
      }
      if (isDefined(properties.startTimestamp)) {
        _this.startTimestamp = properties.startTimestamp;
      }
      if (isDefined(properties.options)) {
        _this.options = properties.options;
      }
      _this.slider.setAttribute('disabled', properties.disabled);
    }
    nouislider.create(_this.slider, (0,objectSpread2/* default */.Z)({
      start: _this.startTimestamp /*,timestamp("2015-02-16T08:09:00Z")]*/,
      range: {
        min: _this.startTimestamp,
        max: _this.startTimestamp + 1000 * 60 * 60 * 2 //  2 hours
      },

      //step:  1000* 60* 60,
      format: wNumb({
        decimals: 0
      }),
      behaviour: 'drag',
      connect: true,
      animate: false,
      pips: {
        mode: 'positions',
        values: [5, 25, 50, 75],
        density: 1,
        //stepped: true,
        format: wNumb({
          edit: function edit(value) {
            return new Date(parseInt(value)).toISOString().replace(".000Z", "Z").split("T")[1].split("Z")[0].split(".")[0];
          }
        })
      }
    }, _this.options));
    if (isDefined(_this.dataSourceObject)) {
      // listen for BC
      var bc = new BroadcastChannel(_this.dataSourceObject.getTimeTopicId());
      bc.onmessage = function (message) {
        if (!_this.update) {
          if (message.data.type === EventType.MASTER_TIME) {
            _this.slider.noUiSlider.set(message.data.timestamp);
            _this.onChange(message.data.timestamp, 'data');
          }
        }
      };
    }
    return _this;
  }
  (0,createClass/* default */.Z)(RangeSliderViewRealtime, [{
    key: "onChange",
    value: function onChange(timestamp, event) {}
  }, {
    key: "setData",
    value: function setData(dataSourceId, data) {}
  }]);
  return RangeSliderViewRealtime;
}(view_View);
/* harmony default export */ var RangeSliderView_realtime = (RangeSliderViewRealtime);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/RangeSlider.realtime.vue?vue&type=template&id=3f26b327

var RangeSlider_realtimevue_type_template_id_3f26b327_hoisted_1 = ["id"];
function RangeSlider_realtimevue_type_template_id_3f26b327_render(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
    id: $data.id,
    class: "range"
  }, null, 8, RangeSlider_realtimevue_type_template_id_3f26b327_hoisted_1);
}
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/RangeSlider.realtime.vue?vue&type=script&lang=js


/* harmony default export */ var RangeSlider_realtimevue_type_script_lang_js = ({
  name: "RangeSliderRealtime",
  props: ['startTimestamp', 'dataSynchronizer'],
  data: function data() {
    return {
      id: randomUUID(),
      rangeSlider: undefined
    };
  },
  mounted: function mounted() {
    this.rangeSlider = new RangeSliderView_realtime({
      container: this.id,
      debounce: 200,
      dataSynchronizer: this.dataSynchronizer,
      startTimestamp: Date.now(),
      options: {}
    });
  },
  methods: {
    setStartTime: function setStartTime(timestamp) {
      this.rangeSlider.setStartTime(timestamp);
    },
    destroy: function destroy() {
      if (this.rangeSlider) {
        this.rangeSlider.destroy();
      }
    }
  },
  // vuejs 3.x
  beforeUnmount: function beforeUnmount() {
    this.destroy();
  },
  // vuejs 2.x
  beforeDestroy: function beforeDestroy() {
    this.destroy();
  }
});
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/RangeSlider.realtime.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/RangeSlider.realtime.vue




;
const RangeSlider_realtime_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(RangeSlider_realtimevue_type_script_lang_js, [['render',RangeSlider_realtimevue_type_template_id_3f26b327_render]])

/* harmony default export */ var RangeSlider_realtime = (RangeSlider_realtime_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=script&lang=js














/**
 * @module osh-vue/TimeController
 * @desc TimeController component to control timeline of the datasources
 * @vue-prop {DataSource}  [dataSource] - DataSource object
 * @vue-prop {DataSynchronizer} [dataSynchronizer] - DataSynchronizer object
 * @vue-prop {Number} [debounce=800] Debounce time before executing refresh while clicking on backward/forward/replaySpeed action. In millis
 * @vue-prop {Function} [parseTime] - Function used to parse the time and display next to the actions buttons. Return value can be text or HTML.
 * @vue-event {String} [event='toggle-replay'] - Emit event's name after time change
 * @vue-event {Boolean} [supportReplay=false] - Defines if the timeController support replay mode (and display corresponding button)
 */
/* harmony default export */ var TimeController_realtimevue_type_script_lang_js = ({
  name: "TimeControllerRealtime",
  components: {
    RangeSliderRealtime: RangeSlider_realtime
  },
  props: {
    dataSource: {
      type: Object
    },
    dataSynchronizer: {
      type: Object
    },
    debounce: {
      type: Number,
      default: function _default() {
        return 800;
      } // 800ms
    },

    parseTime: {
      type: Function,
      default: function parseDate(timestamp) {
        var date = new Date(timestamp);
        var isoDate = date.toISOString();
        var smallDate = isoDate.substr(0, 10);
        var smallTime = isoDate.substr(11, 8);
        return '<div class="box-time"><div><strong>' + smallTime + '</strong></div><div><i><small>(' + smallDate + ')</small></i></div></div>';
      }
    }
  },
  data: function data() {
    return {
      id: randomUUID(),
      event: null,
      dataSourceObject: null,
      rangeSliderInit: false,
      init: false,
      lastSynchronizedTimestamp: -1,
      outOfSync: {},
      masterTime: undefined
    };
  },
  watch: {
    event: function event(newValue) {
      this.$emit('event', {
        event: newValue
      });
    }
  },
  beforeMount: function beforeMount() {
    assertDefined(this.getDataSourceObject(), 'either dataSource properties or dataSynchronizer must be defined');
    this.dataSourceObject = this.getDataSourceObject();
  },
  updated: function updated() {
    // this.initComp();
  },
  mounted: function mounted() {
    this.initComp();
  },
  methods: {
    initComp: function initComp() {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!_this.init) {
                assertDefined(_this.getDataSourceObject(), 'either dataSource properties or dataSynchronizer must be defined');
                _this.subscribeEvents();
                _this.displayConsoleWarningIncompatibleVersionThrottle = throttle(_this.displayConsoleWarningIncompatibleVersion.bind(_this), _this.debounce);
                _this.init = true;
              }
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    displayConsoleWarningIncompatibleVersionThrottle: function displayConsoleWarningIncompatibleVersionThrottle() {},
    displayConsoleWarningIncompatibleVersion: function displayConsoleWarningIncompatibleVersion() {
      console.warn('Incompatible data version');
    },
    subscribeEvents: function subscribeEvents() {
      var _this2 = this;
      // listen for BC
      var isDataSynchronizer = isDefined(this.dataSynchronizer);
      this.dataSourceObject.subscribe(function (message) {
        if (isDataSynchronizer) {
          if (message.type === EventType.MASTER_TIME) {
            // consider here dataSynchronizer sends data in time order
            var contains = (message.dataSourceId in _this2.outOfSync);
            if (message.timestamp < _this2.lastSynchronizedTimestamp) {
              if (!contains) {
                _this2.dataSynchronizer.getDataSources().forEach(function (datasource) {
                  if (datasource.id === message.dataSourceId) {
                    _this2.outOfSync[datasource.id] = datasource;
                  }
                });
              }
              return;
            } else if (contains) {
              // check that the datasource is not out of sync anymore
              delete _this2.outOfSync[message.dataSourceId];
            }
            _this2.lastSynchronizedTimestamp = message.timestamp;
            _this2.masterTime = message.timestamp;
            if (!_this2.rangeSliderInit) {
              _this2.rangeSliderInit = true;
            }
          }
        } else if (message.type === EventType.LAST_TIME) {
          // single dataSource
          _this2.masterTime = message.timestamp;
          if (!_this2.rangeSliderInit) {
            _this2.rangeSliderInit = true;
          }
        }
      }, [EventType.TIME_CHANGED, EventType.MASTER_TIME, EventType.LAST_TIME, EventType.DATA]);
    },
    resetMasterTime: function resetMasterTime() {
      // reset master time
      this.lastSynchronizedTimestamp = -1;
      this.outOfSync = {};
    },
    getDataSourceObject: function getDataSourceObject() {
      return isDefined(this.dataSynchronizer) ? this.dataSynchronizer : this.dataSource;
    },
    toggleReplay: function toggleReplay() {
      var _this3 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _this3.on();
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    },
    on: function on() {
      this.$emit('event', {
        name: 'toggle-replay',
        active: true,
        lastTimestamp: this.lastSynchronizedTimestamp
      });
    },
    withLeadingZeros: function withLeadingZeros(dt) {
      return (dt < 10 ? '0' : '') + dt;
    },
    renderOutOfSync: function renderOutOfSync() {
      var content = '';
      for (var key in this.outOfSync) {
        content += this.outOfSync[key].name + ' is out of sync\n';
      }
      return content;
    }
  },
  // vuejs 3.x
  beforeUnmount: function beforeUnmount() {
    var ref = this.$refs.rangeSliderRef;
    if (ref) {
      ref.destroy();
    }
  },
  // vuejs 2.x
  beforeDestroy: function beforeDestroy() {
    var ref = this.$refs.rangeSliderRef;
    if (ref) {
      ref.destroy();
    }
  }
});
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=style&index=0&id=528e1b34&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=style&index=0&id=528e1b34&scoped=true&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=style&index=1&id=528e1b34&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.realtime.vue?vue&type=style&index=1&id=528e1b34&lang=css

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.realtime.vue




;



const TimeController_realtime_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(TimeController_realtimevue_type_script_lang_js, [['render',TimeController_realtimevue_type_template_id_528e1b34_scoped_true_render],['__scopeId',"data-v-528e1b34"]])

/* harmony default export */ var TimeController_realtime = (TimeController_realtime_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=template&id=1237c57a&scoped=true

var TimeController_batchvue_type_template_id_1237c57a_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-1237c57a"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_1 = ["id"];
var TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_2 = {
  class: "buttons"
};
var TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_3 = {
  class: "actions"
};
var TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_4 = {
  class: "datasource-actions replay"
};
var TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_5 = ["id"];
var TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_6 = /*#__PURE__*/TimeController_batchvue_type_template_id_1237c57a_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-history"
  }, null, -1);
});
var TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_7 = [TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_6];
function TimeController_batchvue_type_template_id_1237c57a_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_RangeSliderReplay = (0,runtime_core_esm_bundler/* resolveComponent */.up)("RangeSliderReplay");
  var _component_ControlTimeReplay = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ControlTimeReplay");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
    id: 'control-component-' + this.id,
    class: "control"
  }, [$data.rangeSliderInit && $data.init ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_RangeSliderReplay, {
    key: 0,
    update: $data.update,
    interval: $data.interval,
    onEvent: $options.onRangeSliderEvent,
    minTimestamp: $options.minTimeStamp,
    maxTimestamp: $options.maxTimeStamp,
    "start-timestamp": $options.startTimeStamp,
    "end-timestamp": $options.endTimeStamp,
    ref: "rangeSliderRef"
  }, null, 8, ["update", "interval", "onEvent", "minTimestamp", "maxTimestamp", "start-timestamp", "end-timestamp"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_2, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_3, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_4, [(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
    id: 'replay-btn-' + $data.id,
    class: "control-btn clicked",
    onClick: _cache[0] || (_cache[0] = function () {
      return $options.toggleRealtime && $options.toggleRealtime.apply($options, arguments);
    })
  }, TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_7, 8, TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_5), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ControlTimeReplay, {
    htmlCurrentTime: $options.htmlCurrentTime,
    htmlEndTime: $options.htmlEndTime
  }, null, 8, ["htmlCurrentTime", "htmlEndTime"])])])])], 8, TimeController_batchvue_type_template_id_1237c57a_scoped_true_hoisted_1);
}
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=template&id=1237c57a&scoped=true

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=script&lang=js













/**
 * @module osh-vue/TimeController
 * @desc TimeController component to control timeline of the datasources
 * @vue-prop {DataSource}  [dataSource] - DataSource object
 * @vue-prop {DataSynchronizer} [dataSynchronizer] - DataSynchronizer object
 * @vue-prop {String} [skipTimeStep='5s'] Time to skip backward/forward. In seconds or percent of the total time
 * @vue-prop {Number} [replaySpeedStep=0.1] Time to decrease/increase replay speed value
 * @vue-prop {Number} [debounce=800] Debounce time before executing refresh while clicking on backward/forward/replaySpeed action. In millis
 * @vue-prop {Function} [parseTime] - Function used to parse the time and display next to the actions buttons. Return value can be text or HTML.
 * @vue-event {String} [event='change'/'slide'/'end'/'replaySpeed'/'toggle-realtime'] - Emit event's name after time change
 */
/* harmony default export */ var TimeController_batchvue_type_script_lang_js = ({
  name: "TimeControllerBatch",
  components: {
    ControlTimeReplay: ControlTime_replay,
    RangeSliderReplay: RangeSlider_replay
  },
  props: {
    dataSource: {
      type: Object
    },
    debounce: {
      type: Number,
      default: function _default() {
        return 800;
      } // 800ms
    },

    parseTime: {
      type: Function,
      default: function parseDate(timestamp) {
        var date = new Date(timestamp);
        var isoDate = date.toISOString();
        var smallDate = isoDate.substr(0, 10);
        var smallTime = isoDate.substr(11, 8);
        return '<div class="box-time"><div><strong>' + smallTime + '</strong></div><div><i><small>(' + smallDate + ')</small></i></div></div>';
      }
    },
    startTimeAsTimestamp: {
      type: String
    }
  },
  data: function data() {
    return {
      id: randomUUID(),
      speedId: randomUUID(),
      event: null,
      connected: true,
      startTimestamp: null,
      endTimestamp: null,
      minTimestamp: null,
      maxTimestamp: null,
      interval: false,
      bcTime: null,
      init: false,
      waitForTimeChangedEvent: false,
      update: false,
      rangeSliderInit: false
    };
  },
  watch: {
    event: function event(newValue) {
      this.$emit('event', {
        event: newValue,
        startTimestamp: this.startTimestamp,
        endTimestamp: this.endTimestamp
      });
    }
  },
  computed: {
    minTimeStamp: function minTimeStamp() {
      return this.minTimestamp;
    },
    maxTimeStamp: function maxTimeStamp() {
      return this.maxTimestamp;
    },
    startTimeStamp: function startTimeStamp() {
      return this.startTimestamp;
    },
    endTimeStamp: function endTimeStamp() {
      return this.endTimestamp;
    },
    htmlCurrentTime: function htmlCurrentTime() {
      return this.parseTime(this.startTimestamp);
    },
    htmlEndTime: function htmlEndTime() {
      return this.parseTime(this.endTimestamp);
    }
  },
  mounted: function mounted() {
    this.initComp();
  },
  methods: {
    initComp: function initComp() {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!_this.init) {
                _this.minTimestamp = _this.dataSource.getMinTimeAsTimestamp();
                _this.maxTimestamp = _this.dataSource.getMaxTimeAsTimestamp();
                _this.startTimestamp = _this.dataSource.getStartTimeAsTimestamp();
                _this.endTimestamp = _this.dataSource.getEndTimeAsTimestamp();
                _this.createTimeBc();

                // listen for datasource status
                _this.dataSource.subscribe(function (message) {
                  if (message.status === Status.DISCONNECTED || message.status === Status.FETCH_ENDED) {
                    _this.connected = false;
                  } else if (message.status === Status.FETCH_STARTED) {
                    _this.connected = true;
                  }
                }, [EventType.STATUS]);
                _this.createRangeSlider();
                _this.updateTimeDebounce = debounce(_this.updateTime.bind(_this), _this.debounce);
                _this.setRangeSliderStartTimeThrottle = throttle(_this.setRangeSliderStartTime.bind(_this), _this.debounce);
                _this.init = true;
                _this.dataSource.connect();
              }
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    destroyBc: function destroyBc() {
      if (isDefined(this.bcTime)) {
        this.bcTime.close();
      }
    },
    destroyTimeBc: function destroyTimeBc() {
      this.bcTime.close();
    },
    createTimeBc: function createTimeBc() {
      var _this2 = this;
      // listen for BC
      this.dataSource.subscribe(function (message) {
        if (_this2.waitForTimeChangedEvent) {
          console.log('Waiting for TIME CHANGED EVENT');
        }
        if (_this2.waitForTimeChangedEvent) {
          if (message.type === EventType.MASTER_TIME) {
            _this2.displayConsoleWarningIncompatibleVersionThrottle();
          } else if (message.type === EventType.TIME_CHANGED) {
            _this2.waitForTimeChangedEvent = false;
          }
          return;
        }
        if (message.type === EventType.MASTER_TIME) {
          // consider here datasynchronizer sends data in time order
          _this2.lastSynchronizedTimestamp = message.timestamp;
          if (!_this2.interval && _this2.speed > 0.0 && !_this2.update) {
            // }
            _this2.setStartTime(message.timestamp);
          }
        }
      }, [EventType.TIME_CHANGED, EventType.MASTER_TIME]);
    },
    setStartTime: function setStartTime(timestamp) {
      this.startTimestamp = timestamp;
      this.rangeSlider.setStartTime(this.startTimestamp, this.endTimestamp);
    },
    createRangeSlider: function createRangeSlider() {
      if (!this.rangeSliderInit) {
        var dataSourceObj = {};
        if (isDefined(this.dataSynchronizer)) {
          dataSourceObj.dataSynchronizer = this.dataSynchronizer;
          this.dataSynchronizer.onTimeChanged = function (minTime, maxTime) {
            this.minTimestamp = new Date(minTime).getTime();
            this.maxTimestamp = new Date(maxTime).getTime();
            this.endTimestamp = new Date(maxTime).getTime();
            if (new Date(minTime).getTime() > this.startTimestamp) {
              this.startTimestamp = new Date(minTime).getTime();
            }
            this.rangeStartDate = this.parseTime(this.startTimestamp);
            this.rangeEndDate = this.parseTime(this.maxTimestamp);
            // in case where we click on Pause, remove the DataSource, and doPlay again
            this.waitForTimeChangedEvent = false;
          }.bind(this);
        } else {
          dataSourceObj.dataSource = this.dataSource;
        }
        this.rangeSliderInit = true;
        // HAS BEEN REPLACED
      }
    },
    doPlay: function doPlay() {
      this.updateTime('play');
      this.connected = true;
    },
    resetMasterTime: function resetMasterTime() {
      // reset master time
      this.waitForTimeChangedEvent = this.lastSynchronizedTimestamp !== -1;
      this.lastSynchronizedTimestamp = -1;
      this.on('time-changed');
      this.update = false;
    },
    updateTime: function updateTime(event) {
      var _this3 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _this3.resetMasterTime();
              _this3.dataSource.setTimeRange(new Date(_this3.startTimestamp).toISOString(), new Date(_this3.endTimestamp).toISOString(), _this3.speed, true);
              _this3.on(event);
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    },
    updateTimeDebounce: function updateTimeDebounce() {},
    setRangeSliderStartTime: function setRangeSliderStartTime(timestamp) {
      this.rangeSlider.setStartTime(timestamp);
    },
    setRangeSliderStartTimeThrottle: function setRangeSliderStartTimeThrottle() {},
    toggleRealtime: function toggleRealtime() {
      var _this4 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _this4.on('toggle-realtime');
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }))();
    },
    on: function on(eventName) {
      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      this.$emit('event', (0,objectSpread2/* default */.Z)({
        name: eventName
      }, props));
    },
    withLeadingZeros: function withLeadingZeros(dt) {
      return (dt < 10 ? '0' : '') + dt;
    },
    onRangeSliderEvent: function onRangeSliderEvent(props) {
      if ('startTimestamp' in props) {
        this.startTimestamp = props.startTimestamp;
      }
      if ('endTimestamp' in props) {
        this.endTimestamp = props.endTimestamp;
      }
      if ('update' in props) {
        this.update = props.update;
      }
      if ('waitForTimeChangedEvent' in props) {
        this.waitForTimeChangedEvent = props.waitForTimeChangedEvent;
      }
      if (props.name === 'doPlay') {
        this.doPlay();
      }
    }
  }
});
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=style&index=0&id=1237c57a&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=style&index=0&id=1237c57a&scoped=true&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=style&index=1&id=1237c57a&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.batch.vue?vue&type=style&index=1&id=1237c57a&lang=css

;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.batch.vue




;



const TimeController_batch_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(TimeController_batchvue_type_script_lang_js, [['render',TimeController_batchvue_type_template_id_1237c57a_scoped_true_render],['__scopeId',"data-v-1237c57a"]])

/* harmony default export */ var TimeController_batch = (TimeController_batch_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!../../osh-js/source/vue/components/TimeController.vue?vue&type=script&lang=js










/**
 * @module osh-vue/TimeController
 * @desc TimeController component to control timeline of the datasources
 * @vue-prop {DataSource}  [dataSource] - DataSource object
 * @vue-prop {DataSynchronizer} [dataSynchronizer] - DataSynchronizer object
 * @vue-prop {Number} [replaySpeedStep=0.1] - Time to decrease/increase replay speed value
 * @vue-prop {String} trackRealtime - Track time before the given time (HH:MM:SS)
 * @vue-prop {Number} [debounce=800] - Debounce time before executing refresh while clicking on backward/forward/replaySpeed action. In millis
 * @vue-prop {Function} [parseTime] - Function used to parse the time and display next to the actions buttons. Return value can be text or HTML.
 * @vue-event {String} [event='change'/'slide'/'end'/'replaySpeed'] - Emit event's name after time change
 */
/* harmony default export */ var TimeControllervue_type_script_lang_js = ({
  name: "TimeController",
  components: {
    TimeControllerBatch: TimeController_batch,
    TimeControllerReplay: TimeController_replay,
    TimeControllerRealtime: TimeController_realtime
  },
  props: {
    supportRealTime: {
      type: Boolean,
      default: function _default() {
        return true;
      }
    },
    onControlEventFn: {
      type: Function
    },
    dataSource: {
      type: Object
    },
    dataSynchronizer: {
      type: Object
    },
    skipTimeStep: {
      type: String,
      default: function _default() {
        return '5s';
      } // 5sec
    },

    replaySpeedStep: {
      type: Number,
      default: function _default() {
        return 0.1;
      }
    },
    debounce: {
      type: Number,
      default: function _default() {
        return 800;
      } // 800ms
    },

    trackRealtime: {
      type: String
    },
    parseTime: {
      type: Function,
      default: function parseDate(timestamp) {
        var date = new Date(timestamp);
        var isoDate = date.toISOString();
        var smallDate = isoDate.substr(0, 10);
        var smallTime = isoDate.substr(11, 8);
        return '<div class="box-time"><div><strong>' + smallTime + '</strong></div><div><i><small>(' + smallDate + ')</small></i></div></div>';
      }
    }
  },
  data: function data() {
    return {
      id: randomUUID(),
      init: false,
      replayProps: {},
      replay: false,
      batch: false,
      realTime: false,
      mode: Mode.REPLAY,
      timeNow: -1
    };
  },
  beforeMount: function beforeMount() {
    var _this = this;
    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
      return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            _this.dataSourceObject = _this.getDataSourceObject();
            _this.mode = _this.dataSourceObject.getMode();
            _this.checkMode();
          case 3:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }))();
  },
  methods: {
    getDataSourceObject: function getDataSourceObject() {
      return isDefined(this.dataSynchronizer) ? this.dataSynchronizer : this.dataSource;
    },
    checkMode: function checkMode() {
      this.batch = false;
      this.replay = false;
      this.realTime = false;
      // find the dataSource mode
      if (this.dataSourceObject.getMode() === Mode.REPLAY) {
        this.replay = true;
      } else if (this.dataSourceObject.getMode() === Mode.BATCH) {
        this.batch = true;
      } else if (this.dataSourceObject.getMode() === Mode.REAL_TIME) {
        this.realTime = true;
      }
    },
    trackRt: function trackRt() {
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    } // const maxTime = new Date(Date.now()).toISOString();
    // await this.getDataSourceObject().disconnect();
    // await this.getDataSourceObject().setMaxTime(maxTime);
    ,
    onControlEvent: function onControlEvent(event) {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee3() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (!(event.name === 'toggle-replay')) {
                _context3.next = 23;
                break;
              }
              _this2.timeNow = event.lastTimestamp;
              _context3.next = 4;
              return _this2.dataSourceObject.disconnect();
            case 4:
              if (!(_this2.mode === Mode.BATCH)) {
                _context3.next = 10;
                break;
              }
              _context3.next = 7;
              return _this2.dataSourceObject.setMode(Mode.BATCH);
            case 7:
              _this2.dataSourceObject.connect(); // connect by default in batch mode
              _context3.next = 17;
              break;
            case 10:
              if (!(_this2.mode === Mode.REPLAY)) {
                _context3.next = 17;
                break;
              }
              _context3.next = 13;
              return _this2.dataSourceObject.setMode(Mode.REPLAY);
            case 13:
              if (!isDefined(_this2.trackRealtime)) {
                _context3.next = 16;
                break;
              }
              _context3.next = 16;
              return _this2.trackRt();
            case 16:
              _this2.dataSourceObject.connect(); // connect by default in replay mode
            case 17:
              _this2.checkMode();
              if (_this2.onControlEventFn) {
                _this2.onControlEventFn('play'); // backward compatibility
                _this2.onControlEventFn('mode', 'replay');
              }
              _this2.$emit('event', 'play'); // backward compatibility
              _this2.$emit('mode', 'replay');
              _context3.next = 33;
              break;
            case 23:
              if (!(event.name === 'toggle-realtime')) {
                _context3.next = 33;
                break;
              }
              _context3.next = 26;
              return _this2.dataSourceObject.disconnect();
            case 26:
              _context3.next = 28;
              return _this2.dataSourceObject.setMode(Mode.REAL_TIME);
            case 28:
              _this2.checkMode();
              _this2.dataSourceObject.connect(); // connect by default in realtime mode

              if (_this2.onControlEventFn) {
                _this2.onControlEventFn('play'); // backward compatibility
                _this2.onControlEventFn('mode', 'realtime');
              }
              _this2.$emit('event', 'play'); // backward compatibility
              _this2.$emit('mode', 'realtime');
            case 33:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }))();
    }
  }
});
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ../../osh-js/source/vue/components/TimeController.vue




;
const TimeController_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(TimeControllervue_type_script_lang_js, [['render',TimeControllervue_type_template_id_d0807538_render]])

/* harmony default export */ var TimeController = (TimeController_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/PtzView.vue?vue&type=template&id=1562efaf&scoped=true

var PtzViewvue_type_template_id_1562efaf_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-1562efaf"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_1 = ["id"];
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_2 = {
  class: "ptz-zoom"
};
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_3 = /*#__PURE__*/PtzViewvue_type_template_id_1562efaf_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-plus-circle",
    "aria-hidden": "true"
  }, null, -1);
});
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_4 = [PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_3];
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_5 = /*#__PURE__*/PtzViewvue_type_template_id_1562efaf_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "ptz-zoom-bar"
  }, null, -1);
});
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_6 = /*#__PURE__*/PtzViewvue_type_template_id_1562efaf_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("i", {
    class: "fa fa-minus-circle",
    "aria-hidden": "true"
  }, null, -1);
});
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_7 = [PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_6];
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_8 = {
  class: "ptz"
};
var PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_9 = /*#__PURE__*/PtzViewvue_type_template_id_1562efaf_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    cmd: "ptzReset",
    class: "reset",
    title: "Center",
    name: ""
  }, null, -1);
});
function PtzViewvue_type_template_id_1562efaf_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _this = this;
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
    id: $setup.id,
    class: "ptz-container"
  }, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_2, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "ptz-zoom-in",
    onClick: _cache[0] || (_cache[0] = function ($event) {
      return $options.onZoomClick($setup.zoomIncrement);
    })
  }, PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_4), PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_5, (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "ptz-zoom-out",
    onClick: _cache[1] || (_cache[1] = function ($event) {
      return $options.onZoomClick(-1 * $setup.zoomIncrement);
    })
  }, PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_7)]), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_8, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "0",
    class: "moveUp",
    onClick: _cache[2] || (_cache[2] = function ($event) {
      return $options.onTiltClick($setup.tiltIncrement);
    }),
    name: ""
  }), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "91",
    class: "moveTopLeft",
    onClick: _cache[3] || (_cache[3] = function ($event) {
      return $options.onTiltPanClick(-1 * $setup.tiltIncrement, $setup.panIncrement);
    }),
    name: ""
  }), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "90",
    class: "moveTopRight",
    onClick: _cache[4] || (_cache[4] = function ($event) {
      return $options.onTiltPanClick($setup.tiltIncrement, $setup.panIncrement);
    }),
    name: ""
  }), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "6",
    class: "moveLeft",
    onClick: _cache[5] || (_cache[5] = function ($event) {
      return $options.onPanClick(-1 * $setup.panIncrement);
    }),
    name: ""
  }), PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_9, (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "4",
    class: "moveRight",
    onClick: _cache[6] || (_cache[6] = function ($event) {
      return _this.onPanClick($setup.panIncrement);
    }),
    name: ""
  }), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "93",
    class: "moveBottomLeft",
    onClick: _cache[7] || (_cache[7] = function ($event) {
      return _this.onTiltPanClick(-1 * $setup.tiltIncrement, -1 * $setup.panIncrement);
    }),
    name: ""
  }), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "92",
    class: "moveBottomRight",
    onClick: _cache[8] || (_cache[8] = function ($event) {
      return $options.onTiltPanClick($setup.tiltIncrement, -1 * $setup.panIncrement);
    }),
    name: ""
  }), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    tag: "2",
    class: "moveDown",
    onClick: _cache[9] || (_cache[9] = function ($event) {
      return $options.onTiltClick(-1 * $setup.tiltIncrement);
    }),
    name: ""
  })])], 8, PtzViewvue_type_template_id_1562efaf_scoped_true_hoisted_1);
}
;// CONCATENATED MODULE: ./src/morpheusx/PtzView.vue?vue&type=template&id=1562efaf&scoped=true

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/PtzView.vue?vue&type=script&lang=js





/* harmony default export */ var PtzViewvue_type_script_lang_js = ({
  name: "PtzView",
  props: ['widget'],
  setup: function setup(props) {
    var id = randomUUID();
    var panIncrement = 10;
    var tiltIncrement = 10;
    var zoomIncrement = 0.1;
    return {
      id: id,
      panIncrement: panIncrement,
      tiltIncrement: tiltIncrement,
      zoomIncrement: zoomIncrement
    };
  },
  data: function data() {
    return {
      initSwe: false
    };
  },
  methods: {
    initSweApi: function initSweApi() {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        var properties, systems, system;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (_this.initSwe) {
                _context.next = 10;
                break;
              }
              properties = _this.widget.properties;
              systems = new system_Systems(properties.control);
              _context.next = 5;
              return systems.getSystemById(properties.control.systemId);
            case 5:
              system = _context.sent;
              _context.next = 8;
              return system.getControlById(properties.control.cmdStreamId);
            case 8:
              _this.control = _context.sent;
              _this.initSwe = true;
            case 10:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    /**
     * Changes the value on click
     * @private
     * @event
     * @param {Number} value - the new tilt value
     */
    onTiltClick: function onTiltClick(value) {
      this.onChange(null, value, null, null);
    },
    /**
     * @private
     * @param  {Number} tiltValue - the titl value
     * @param  {Number} panValue -  the panValue value
     * @event
     */
    onTiltPanClick: function onTiltPanClick(tiltValue, panValue) {
      this.onChange(tiltValue, panValue, null, null);
    },
    /**
     *
     * @private
     * @param value
     */
    onPanClick: function onPanClick(value) {
      this.onChange(value, null, null, null);
    },
    /**
     * @private
     * @param value
     */
    onZoomClick: function onZoomClick(value) {
      this.onChange(null, null, value, null);
    },
    /**
     * Event caught after clicking onto control buttons.
     * @event
     * @param {Number} rpan -
     * @param {Number} rtilt -
     * @param {Number} rzoom -
     */
    onChange: function onChange(rpan, rtilt, rzoom) {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        var cmd, _cmd, _cmd2;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return _this2.initSweApi();
            case 2:
              if (!isDefined(rpan)) {
                _context2.next = 7;
                break;
              }
              cmd = {
                params: {
                  rpan: rpan
                }
              };
              console.log(JSON.stringify(cmd));
              _context2.next = 7;
              return _this2.control.postCommand(JSON.stringify(cmd));
            case 7:
              if (!isDefined(rtilt)) {
                _context2.next = 12;
                break;
              }
              _cmd = {
                params: {
                  rtilt: rtilt
                }
              };
              console.log(JSON.stringify(_cmd));
              _context2.next = 12;
              return _this2.control.postCommand(JSON.stringify(_cmd));
            case 12:
              if (!isDefined(rzoom)) {
                _context2.next = 17;
                break;
              }
              _cmd2 = {
                params: {
                  rzoom: rzoom
                }
              };
              console.log(JSON.stringify(_cmd2));
              _context2.next = 17;
              return _this2.control.postCommand(JSON.stringify(_cmd2));
            case 17:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    }
  }
});
;// CONCATENATED MODULE: ./src/morpheusx/PtzView.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/PtzView.vue?vue&type=style&index=0&id=1562efaf&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/morpheusx/PtzView.vue?vue&type=style&index=0&id=1562efaf&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/morpheusx/PtzView.vue




;


const PtzView_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(PtzViewvue_type_script_lang_js, [['render',PtzViewvue_type_template_id_1562efaf_scoped_true_render],['__scopeId',"data-v-1562efaf"]])

/* harmony default export */ var PtzView = (PtzView_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/Widget.vue?vue&type=script&lang=js














/* harmony default export */ var Widgetvue_type_script_lang_js = ({
  name: "Widget",
  components: {
    PtzView: PtzView,
    ConfirmDialog: ConfirmDialog,
    TimeController: TimeController
  },
  inject: ["$item"],
  props: ['id', 'bk'],
  emits: ['moveEnd', 'resizeEnd'],
  setup: function setup(props) {
    var windowId = (0,runtime_core_esm_bundler/* inject */.f3)('windowId');
    var widgetId = props.id;
    var uiStore = useUiStore();
    var clientStore = useClientStore();
    var route = (0,vue_router/* useRoute */.yj)();
    var dashboardId = route.params.dashboardId;
    return {
      widgetId: widgetId,
      dashboardId: dashboardId,
      uiStore: uiStore,
      clientStore: clientStore,
      windowId: windowId
    };
  },
  data: function data() {
    return {
      widget: undefined,
      view: undefined,
      trackRealtime: '',
      subscriptions: [],
      lastPosition: {
        x: undefined,
        y: undefined
      },
      timeController: false,
      ptzControl: false,
      versionTimeController: 0
    };
  },
  mounted: function mounted() {
    var _this = this;
    try {
      this.widget = this.clientStore.getWidgetById(this.dashboardId, this.windowId, this.widgetId);
      if (isDefined(this.widget)) {
        if (this.widget.uiType === 'Timebar') {
          this.timeController = true;
        } else if (this.widget.uiType === 'PtzControl') {
          this.ptzControl = true;
        } else {
          this.timeController = false;
          this.ptzControl = false;
          // create OSH views
          // They are automatically bound by their ids
          this.view = mapToView((0,reactivity_esm_bundler/* toRaw */.IU)(this.widget));
        }
      } else {
        console.warn('widget not defined!');
      }
      var unsubscribe = this.uiStore.$onAction(function (_ref) {
        var name = _ref.name,
          store = _ref.store,
          args = _ref.args,
          after = _ref.after,
          onError = _ref.onError;
        if (name === 'hookReloadWidget') {
          after(function (props) {
            if ((props.name === 'addOrEditDataSource' || props.name === 'removeDataSource') && _this.timeController) {
              // this.versionTimeController++;
            } else if (props.name === 'reset-from-timebar') {
              _this.widget = props.widget;
              if (_this.widget.id === _this.widgetId && _this.view) {
                //TODO: use reset() instead => currently launch exception
                _this.view.destroy();
                _this.view = mapToView((0,reactivity_esm_bundler/* toRaw */.IU)(_this.widget));
              }
            } else {
              _this.widget = props.widget;
              if (_this.widget.id === _this.widgetId) {
                _this.view.destroy();
                _this.view = mapToView((0,reactivity_esm_bundler/* toRaw */.IU)(_this.widget));
              }
            }
          });
        }
      });
      this.subscriptions.push(unsubscribe);
    } catch (ex) {
      console.error(ex);
    }
  },
  beforeUnmount: function beforeUnmount() {
    if (isDefined(this.view)) {
      this.view.destroy();
    }
    // release action subscriptions
    var _iterator = (0,createForOfIteratorHelper/* default */.Z)(this.subscriptions),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var unsubscribe = _step.value;
        unsubscribe();
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  },
  watch: {
    // this happens when an item is set at the first positon {0; 0} and move an existing one.
    // In that case, we have to catch the move event from the existing one which is moved by vue dash responsive lib
    x: function x() {
      if (this.lastPosition.x !== this.item.x || this.lastPosition.y !== this.item.y) {
        this.lastPosition.x = this.item.x;
        this.lastPosition.y = this.item.y;
        this.$emit('moveEnd', this.item);
      }
    },
    y: function y() {
      if (this.lastPosition.x !== this.item.x || this.lastPosition.y !== this.item.y) {
        this.lastPosition.x = this.item.x;
        this.lastPosition.y = this.item.y;
        this.$emit('moveEnd', this.item);
      }
    }
  },
  computed: {
    dataSynchronizer: function dataSynchronizer() {
      return this.clientStore.getDefaultTimeSynchronizer(this.dashboardId);
    },
    show: function show() {
      return this.uiStore.ui.connected;
    },
    item: function item() {
      return this.$item();
    },
    x: function x() {
      if (this.item) {
        return this.item.x;
      }
      return 0;
    },
    y: function y() {
      if (this.item) {
        return this.item.y;
      }
    },
    width: function width() {
      if (this.item) {
        return this.item.widthPx;
      }
      return 0;
    },
    height: function height() {
      if (this.item) {
        return this.item.heightPx;
      }
      return 0;
    }
  },
  methods: {
    editView: function editView(event) {
      this.emitter.emit('show-widget-editor', {
        id: this.widgetId,
        edit: true
      });
    },
    onControlEvent: function onControlEvent(eventName) {
      if (eventName === 'forward' || eventName === 'backward' || eventName === 'end' || eventName === 'replaySpeed' || eventName === 'play') {
        this.uiStore.resetFromTimebar(this.dashboardId, this.windowId, {});
      }
    },
    deleteView: function deleteView(event) {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _this2.$refs.confirm.open("Confirm", "Are you sure you want to remove this view?");
            case 2:
              if (!_context.sent) {
                _context.next = 5;
                break;
              }
              console.log('removing ' + _this2.widgetId + 'from ' + _this2.windowId);
              _this2.uiStore.removeGridItem(_this2.dashboardId, _this2.windowId, _this2.widgetId);
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    }
  }
});
;// CONCATENATED MODULE: ./src/morpheusx/Widget.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/Widget.vue?vue&type=style&index=0&id=5b5959e6&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/morpheusx/Widget.vue?vue&type=style&index=0&id=5b5959e6&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/Widget.vue?vue&type=style&index=1&id=5b5959e6&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/morpheusx/Widget.vue?vue&type=style&index=1&id=5b5959e6&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/morpheusx/Widget.vue




;



const Widget_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(Widgetvue_type_script_lang_js, [['render',Widgetvue_type_template_id_5b5959e6_scoped_true_render],['__scopeId',"data-v-5b5959e6"]])

/* harmony default export */ var Widget = (Widget_exports_);
// EXTERNAL MODULE: ./node_modules/vue-responsive-dash/dist/vue-responsive-dash.common.js
var vue_responsive_dash_common = __webpack_require__(58469);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/Window.vue?vue&type=script&lang=js






/* harmony default export */ var Windowvue_type_script_lang_js = ({
  name: "Window",
  components: {
    Widget: Widget,
    Dashboard: vue_responsive_dash_common.Dashboard,
    DashLayout: vue_responsive_dash_common.DashLayout,
    DashItem: vue_responsive_dash_common.DashItem
  },
  setup: function setup(props) {
    var route = (0,vue_router/* useRoute */.yj)();
    var uiStore = useUiStore();
    var clientStore = useClientStore();

    // find the right layout
    var _route$params = route.params,
      dashboardId = _route$params.dashboardId,
      windowId = _route$params.windowId;
    var uuid = randomUUID();
    var windowState = clientStore.getWindowById(dashboardId, windowId);
    // let windowState = props.windowState;
    var style;
    return {
      style: style,
      uiStore: uiStore,
      uuid: uuid,
      clientStore: clientStore,
      dashboardId: dashboardId,
      windowState: windowState,
      windowId: windowId
    };
  },
  computed: {
    bk: function bk() {
      return this.getBreakpoint();
    }
  },
  methods: {
    getBreakpoint: function getBreakpoint() {
      return this.$refs.dashboard.currentBreakpoint;
    },
    moveEnd: function moveEnd(event) {
      this.moveItem({
        x: event.x,
        y: event.y,
        width: event.width,
        height: event.height,
        id: event.id
      });
    },
    widgetMoveResizeEnd: function widgetMoveResizeEnd(event) {
      console.log('resizeEnd');
      this.moveItem({
        x: event.x,
        y: event.y,
        width: event.width,
        height: event.height,
        id: event.id
      });
    },
    moveItem: function moveItem(pos) {
      var widget = this.clientStore.getWidgetById(this.dashboardId, this.windowState.id, pos.id);
      widget.size = {
        width: pos.width,
        height: pos.height
      };
      widget.pos = {
        x: pos.x,
        y: pos.y
      };
      var currentBreakpoint = this.getBreakpoint();
      // TODO: pass windowId instead of entire state
      this.uiStore.editGridItemByBreakpoint(this.dashboardId, this.windowState, widget, currentBreakpoint, {
        x: pos.x,
        y: pos.y,
        width: pos.width,
        height: pos.height
      });
    }
  }
});
;// CONCATENATED MODULE: ./src/morpheusx/Window.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/morpheusx/Window.vue?vue&type=style&index=0&id=747c1598&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/morpheusx/Window.vue?vue&type=style&index=0&id=747c1598&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/morpheusx/Window.vue




;


const Window_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(Windowvue_type_script_lang_js, [['render',Windowvue_type_template_id_747c1598_scoped_true_render],['__scopeId',"data-v-747c1598"]])

/* harmony default export */ var Window = (Window_exports_);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VBadge/VBadge.mjs + 1 modules
var VBadge = __webpack_require__(86562);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCarousel/VCarousel.mjs + 1 modules
var VCarousel = __webpack_require__(80977);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCarousel/VCarouselItem.mjs
var VCarouselItem = __webpack_require__(47477);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VSheet/VSheet.mjs + 1 modules
var VSheet = __webpack_require__(74286);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetForm.vue?vue&type=template&id=10b8d6f7&scoped=true

var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-10b8d6f7"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_1 = /*#__PURE__*/WidgetFormvue_type_template_id_10b8d6f7_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "d-flex justify-center align-center title"
  }, [/*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "text-h6"
  }, "View")], -1);
});
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_2 = {
  class: "form"
};
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_3 = {
  class: "d-flex justify-center align-center title"
};
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_4 = /*#__PURE__*/WidgetFormvue_type_template_id_10b8d6f7_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "text-h6"
  }, "Layers", -1);
});
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_5 = {
  class: "form"
};
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_6 = {
  class: "d-flex justify-center align-center title"
};
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_7 = /*#__PURE__*/WidgetFormvue_type_template_id_10b8d6f7_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "text-h6"
  }, "Layers", -1);
});
var WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_8 = {
  class: "form"
};
function WidgetFormvue_type_template_id_10b8d6f7_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_WidgetFormType = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormType");
                                                        
                                                                        
                                                      
                                                        
  var _component_WidgetFormLayers = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormLayers");
                                                    
                                                              
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VCarousel/* VCarousel */.k, {
    progress: "secondary",
    continuous: false,
    class: "caroussel",
    "hide-delimiters": ""
  }, {
    prev: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
      var props = _ref.props;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
        variant: "elevated",
        onClick: props.onClick,
        icon: "mdi-chevron-left",
        class: "caroussel-left"
      }, null, 8, ["onClick"])];
    }),
    next: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
      var props = _ref2.props;
      return [$setup.widget.uiType !== 'Timebar' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VBtn/* VBtn */.T, {
        key: 0,
        variant: "elevated",
        onClick: props.onClick,
        icon: "mdi-chevron-right"
      }, null, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)];
    }),
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCarouselItem/* VCarouselItem */.f, null, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSheet/* VSheet */.C, {
            class: "sheet"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_1, (0,runtime_core_esm_bundler/* createElementVNode */._)("div", WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_2, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_WidgetFormType)])];
            }),
            _: 1
          })];
        }),
        _: 1
      }), ((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)($setup.widget.layers, function (item, index) {
        return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VCarouselItem/* VCarouselItem */.f, null, {
          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSheet/* VSheet */.C, {
              class: "sheet"
            }, {
              default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                return [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_3, [WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_4, (0,runtime_core_esm_bundler/* createVNode */.Wm)(VBadge/* VBadge */.G, {
                  content: $setup.widget.layers.length,
                  color: "secondary",
                  class: "badge"
                }, {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                    return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, {
                      icon: "mdi-layers",
                      size: "32px"
                    })];
                  }),
                  _: 1
                }, 8, ["content"])]), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_5, [((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormLayers, {
                  key: item.id,
                  layer: item,
                  editing: true
                }, null, 8, ["layer"]))])];
              }),
              _: 2
            }, 1024)];
          }),
          _: 2
        }, 1024);
      }), 256)), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCarouselItem/* VCarouselItem */.f, null, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSheet/* VSheet */.C, {
            class: "sheet"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_6, [WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_7, (0,runtime_core_esm_bundler/* createVNode */.Wm)(VBadge/* VBadge */.G, {
                content: $setup.widget.layers.length,
                color: "secondary",
                class: "badge"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, {
                    icon: "mdi-layers",
                    size: "32px"
                  })];
                }),
                _: 1
              }, 8, ["content"])]), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", WidgetFormvue_type_template_id_10b8d6f7_scoped_true_hoisted_8, [((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormLayers, {
                key: $options.uuid(),
                ref: "viewFormLayers",
                layer: $options.defaultLayer(),
                editing: false
              }, null, 8, ["layer"]))])];
            }),
            _: 1
          })];
        }),
        _: 1
      })];
    }),
    _: 1
  });
}

/* Vuetify */







;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetForm.vue?vue&type=template&id=10b8d6f7&scoped=true

// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VSelect/VSelect.mjs + 1 modules
var VSelect = __webpack_require__(10240);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VTextField/VTextField.mjs
var VTextField = __webpack_require__(165);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormType.vue?vue&type=template&id=1678baf3


function WidgetFormTypevue_type_template_id_1678baf3_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                  
                                                          
  var _component_WidgetFormMap = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormMap");
  var _component_WidgetFormVideo = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormVideo");
  var _component_WidgetFormChart = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormChart");
  var _component_TimeBarForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("TimeBarForm");
  var _component_WidgetFormControlMap = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormControlMap");
  var _component_PtzForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("PtzForm");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Name",
    modelValue: $setup.widget.name,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.widget.name = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "View",
    items: $data.items,
    variant: "solo",
    modelValue: $data.selected,
    "onUpdate:modelValue": [_cache[1] || (_cache[1] = function ($event) {
      return $data.selected = $event;
    }), $options.onChange],
    density: "compact"
  }, null, 8, ["items", "modelValue", "onUpdate:modelValue"]), $data.selected === 'Map' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormMap, {
    key: 0
  })) : $data.selected === 'Video' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormVideo, {
    key: 1
  })) : $data.selected === 'Chart' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormChart, {
    key: 2
  })) : $data.selected === 'Timebar' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_TimeBarForm, {
    key: 3
  })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $data.selected === 'ControlMap' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormControlMap, {
    key: 4
  })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $data.selected === 'PtzControl' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_PtzForm, {
    key: 5
  })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormType.vue?vue&type=template&id=1678baf3

// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VSwitch/VSwitch.mjs + 1 modules
var VSwitch = __webpack_require__(93104);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormMap.vue?vue&type=template&id=aa2d158a

function WidgetFormMapvue_type_template_id_aa2d158a_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                          
  var _component_widget_form_cesium_map = (0,runtime_core_esm_bundler/* resolveComponent */.up)("widget-form-cesium-map");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Type",
    items: $data.items,
    variant: "solo",
    "onUpdate:modelValue": [$options.handleSelect, _cache[0] || (_cache[0] = function ($event) {
      return $data.selected = $event;
    })],
    modelValue: $data.selected,
    density: "compact"
  }, null, 8, ["items", "onUpdate:modelValue", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSwitch/* VSwitch */.G, {
    color: "info",
    label: "Zoom on first data",
    modelValue: $data.properties.autoZoomOnFirstMarker,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $data.properties.autoZoomOnFirstMarker = $event;
    }),
    onChange: $options.handleZoomChange,
    density: "compact"
  }, null, 8, ["modelValue", "onChange"]), $data.selected === 'Cesium' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_widget_form_cesium_map, {
    key: 0
  })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormCesiumMap.vue?vue&type=template&id=7e501fa8

function WidgetFormCesiumMapvue_type_template_id_7e501fa8_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_VTextFieldNumber = (0,runtime_core_esm_bundler/* resolveComponent */.up)("VTextFieldNumber");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Map Center Lat",
    modelValue: $setup.widget.properties.options.location.latitude,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.widget.properties.options.location.latitude = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Map Center Lon",
    modelValue: $setup.widget.properties.options.location.longitude,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.widget.properties.options.location.longitude = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Map Center Alt",
    modelValue: $setup.widget.properties.options.location.altitude,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $setup.widget.properties.options.location.altitude = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Map Orientation Heading",
    modelValue: $setup.widget.properties.options.orientation.heading,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $setup.widget.properties.options.orientation.heading = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Map Orientation Pitch",
    modelValue: $setup.widget.properties.options.orientation.pitch,
    "onUpdate:modelValue": _cache[4] || (_cache[4] = function ($event) {
      return $setup.widget.properties.options.orientation.pitch = $event;
    })
  }, null, 8, ["modelValue"])], 64);
}
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/VTextFieldNumber.vue?vue&type=template&id=1eb37924

function VTextFieldNumbervue_type_template_id_1eb37924_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                  
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VTextField/* VTextField */.h, {
    modelValue: $data.value,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $data.value = $event;
    }),
    type: "number",
    variant: "solo",
    label: $props.label
  }, null, 8, ["modelValue", "label"]);
}

/* Vuetify */



;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/VTextFieldNumber.vue?vue&type=script&lang=js
/* harmony default export */ var VTextFieldNumbervue_type_script_lang_js = ({
  name: "VTextFieldNumber",
  props: ['label'],
  data: function data() {
    return {
      value: 0
    };
  },
  watch: {
    value: function value() {
      this.$emit('update:modelValue', parseFloat(this.value));
    }
  }
});
;// CONCATENATED MODULE: ./src/components/VTextFieldNumber.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/components/VTextFieldNumber.vue




;
const VTextFieldNumber_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(VTextFieldNumbervue_type_script_lang_js, [['render',VTextFieldNumbervue_type_template_id_1eb37924_render]])

/* harmony default export */ var VTextFieldNumber = (VTextFieldNumber_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormCesiumMap.vue?vue&type=script&lang=js


/* harmony default export */ var WidgetFormCesiumMapvue_type_script_lang_js = ({
  name: "WidgetFormCesiumMap",
  setup: function setup(props) {
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    if (!widget.properties.options) {
      widget.properties.options = {};
    }
    if (!widget.properties.options.location) {
      widget.properties.options.location = {
        longitude: undefined,
        latitude: undefined,
        altitude: undefined
      };
    }
    if (!widget.properties.options.orientation) {
      widget.properties.options.orientation = {
        pitch: undefined,
        heading: undefined
      };
    }
    widget.properties.options.layers = ['Bing Maps Aerial', 'Bing Maps Aerial with Labels', 'Bing Maps Roads'];
    return {
      widget: widget
    };
  },
  components: {
    VTextFieldNumber: VTextFieldNumber
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormCesiumMap.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormCesiumMap.vue




;
const WidgetFormCesiumMap_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormCesiumMapvue_type_script_lang_js, [['render',WidgetFormCesiumMapvue_type_template_id_7e501fa8_render]])

/* harmony default export */ var WidgetFormCesiumMap = (WidgetFormCesiumMap_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormMap.vue?vue&type=script&lang=js







/* harmony default export */ var WidgetFormMapvue_type_script_lang_js = ({
  name: "WidgetFormMap",
  components: {
    WidgetFormCesiumMap: WidgetFormCesiumMap
  },
  data: function data() {
    return {
      items: ['Cesium', 'OpenLayer', 'DeckGl', 'CesiumControl'],
      selected: undefined,
      properties: {
        autoZoomOnFirstMarker: false
      }
    };
  },
  setup: function setup(props) {
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    return {
      widget: widget
    };
  },
  beforeMount: function beforeMount() {
    this.widget.supportedLayers = ['marker', 'draping', 'polyline', 'polygon', 'frustum'];
    this.widget.description = this.widget.description || 'Map view';
    this.widget.description = 'Map view';
    if (isDefined(this.widget.type)) {
      this.selected = this.widget.type.split('View')[0];
      this.properties = this.widget.properties;
    } else {
      this.widget.properties = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.widget.properties), this.properties);
    }
  },
  methods: {
    handleSelect: function handleSelect(event) {
      this.widget.layers = [];
      this.widget.type = event + 'View';
      this.widget.name = event;
    },
    handleZoomChange: function handleZoomChange(event, value) {
      this.widget.properties = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.widget.properties), this.properties);
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormMap.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormMap.vue




;
const WidgetFormMap_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormMapvue_type_script_lang_js, [['render',WidgetFormMapvue_type_template_id_aa2d158a_render]])

/* harmony default export */ var WidgetFormMap = (WidgetFormMap_exports_);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VSlider/VSlider.mjs
var VSlider = __webpack_require__(95999);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormChart.vue?vue&type=template&id=607d2e0a&scoped=true

function WidgetFormChartvue_type_template_id_607d2e0a_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                                  
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Type",
    items: $data.items,
    variant: "solo",
    "onUpdate:modelValue": [$options.handleSelect, _cache[0] || (_cache[0] = function ($event) {
      return $data.selected = $event;
    })],
    modelValue: $data.selected,
    density: "compact"
  }, null, 8, ["items", "onUpdate:modelValue", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSlider/* VSlider */.R, {
    modelValue: $data.properties.refreshRate,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $data.properties.refreshRate = $event;
    }),
    max: 5000,
    min: "250",
    step: 250,
    "show-ticks": "always",
    label: "Refresh Rate",
    "hide-details": "",
    class: "ma-0 refreshRate",
    density: "compact",
    variant: "solo"
  }, {
    append: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
        modelValue: $data.properties.refreshRate,
        "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
          return $data.properties.refreshRate = $event;
        }),
        type: "number",
        style: {
          "width": "85px"
        },
        density: "compact",
        "hide-details": "",
        variant: "outlined"
      }, null, 8, ["modelValue"])];
    }),
    _: 1
  }, 8, ["modelValue"])], 64);
}

/* Vuetify */





;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormChart.vue?vue&type=script&lang=js





/* harmony default export */ var WidgetFormChartvue_type_script_lang_js = ({
  name: "WidgetFormChart",
  data: function data() {
    return {
      items: ['Curve'],
      selected: undefined,
      properties: {
        refreshRate: 250
      }
    };
  },
  setup: function setup(props) {
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    return {
      widget: widget
    };
  },
  beforeMount: function beforeMount() {
    this.widget.supportedLayers = ['curve'];
    this.widget.description = this.widget.description || 'Chart View';
    this.widget.description = 'Chart view';
    if (isDefined(this.widget.subType)) {
      this.selected = this.widget.subType;
      this.properties = this.widget.properties;
    } else {
      this.widget.properties = this.properties;
    }
  },
  methods: {
    handleSelect: function handleSelect(event) {
      this.widget.layers = [];
      this.widget.subType = event;
      this.widget.type = 'ChartView';
      this.widget.name = 'ChartView';
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormChart.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormChart.vue?vue&type=style&index=0&id=607d2e0a&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormChart.vue?vue&type=style&index=0&id=607d2e0a&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormChart.vue




;


const WidgetFormChart_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormChartvue_type_script_lang_js, [['render',WidgetFormChartvue_type_template_id_607d2e0a_scoped_true_render],['__scopeId',"data-v-607d2e0a"]])

/* harmony default export */ var WidgetFormChart = (WidgetFormChart_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormVideo.vue?vue&type=template&id=ff2400a4

function WidgetFormVideovue_type_template_id_ff2400a4_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSwitch/* VSwitch */.G, {
    color: "info",
    label: "Show Stats",
    modelValue: $data.properties.showStats,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $data.properties.showStats = $event;
    }),
    density: "compact"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSwitch/* VSwitch */.G, {
    color: "info",
    label: "Show Time",
    modelValue: $data.properties.showTime,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $data.properties.showTime = $event;
    }),
    density: "compact"
  }, null, 8, ["modelValue"])], 64);
}

/* Vuetify */



;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormVideo.vue?vue&type=script&lang=js




/* harmony default export */ var WidgetFormVideovue_type_script_lang_js = ({
  name: "WidgetFormVideo",
  data: function data() {
    return {
      properties: {
        showStats: true,
        showTime: true,
        css: 'video-css'
      }
    };
  },
  setup: function setup(props) {
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    return {
      widget: widget
    };
  },
  mounted: function mounted() {
    this.widget.supportedLayers = ['videoData'];
    this.widget.type = 'VideoView';
    this.widget.name = 'video';
    this.widget.description = 'Video view';
    this.widget.properties = this.properties;
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormVideo.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormVideo.vue




;
const WidgetFormVideo_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormVideovue_type_script_lang_js, [['render',WidgetFormVideovue_type_template_id_ff2400a4_render]])

/* harmony default export */ var WidgetFormVideo = (WidgetFormVideo_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/timebar/TimebarForm.vue?vue&type=template&id=0f094392
function TimebarFormvue_type_template_id_0f094392_render(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/timebar/TimebarForm.vue?vue&type=script&lang=js
/* harmony default export */ var TimebarFormvue_type_script_lang_js = ({
  name: "TimebarForm"
});
;// CONCATENATED MODULE: ./src/views/forms/widget/timebar/TimebarForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/widget/timebar/TimebarForm.vue




;
const TimebarForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(TimebarFormvue_type_script_lang_js, [['render',TimebarFormvue_type_template_id_0f094392_render]])

/* harmony default export */ var TimebarForm = (TimebarForm_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormControlMap.vue?vue&type=template&id=f39060f8

function WidgetFormControlMapvue_type_template_id_f39060f8_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                          
                                                                  
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSwitch/* VSwitch */.G, {
    color: "info",
    label: "Zoom on first data",
    modelValue: $setup.widget.properties.autoZoomOnFirstMarker,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.widget.properties.autoZoomOnFirstMarker = $event;
    }),
    density: "compact"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Server",
    items: $setup.servers,
    variant: "solo",
    density: "compact",
    modelValue: $setup.widget.properties.control.endpointUrl,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.widget.properties.control.endpointUrl = $event;
    }),
    "item-title": "name",
    "item-value": "endpoint"
  }, null, 8, ["items", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "System Id",
    modelValue: $setup.widget.properties.control.systemId,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $setup.widget.properties.control.systemId = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Command Stream Id",
    modelValue: $setup.widget.properties.control.cmdStreamId,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $setup.widget.properties.control.cmdStreamId = $event;
    })
  }, null, 8, ["modelValue"])], 64);
}

/* Vuetify */





;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormControlMap.vue?vue&type=script&lang=js






/* harmony default export */ var WidgetFormControlMapvue_type_script_lang_js = ({
  name: "WidgetFormControlMap",
  setup: function setup(props) {
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    var clientStore = useClientStore();
    var route = (0,vue_router/* useRoute */.yj)();
    // check if the dashboard exists
    var dashboardId = route.params.dashboardId;
    var servers = clientStore.getServersByDashboard(dashboardId);
    if (!widget.properties) {
      widget.properties = {};
    }
    if (!widget.properties.control) {
      widget.properties.control = {
        endpointUrl: undefined,
        tls: true,
        connectorOpts: {
          username: 'uxs-team',
          password: 'WR6zlso9h#'
        },
        systemId: undefined,
        cmdStreamId: undefined
      };
    }
    widget.supportedLayers = ['marker', 'draping', 'polyline', 'polygon', 'frustum'];
    widget.type = 'CesiumControlView';
    widget.name = 'cesiumControl';
    widget.description = 'Cesium control';
    return {
      widget: widget,
      servers: servers
    };
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormControlMap.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormControlMap.vue




;
const WidgetFormControlMap_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormControlMapvue_type_script_lang_js, [['render',WidgetFormControlMapvue_type_template_id_f39060f8_render]])

/* harmony default export */ var WidgetFormControlMap = (WidgetFormControlMap_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/PtzForm.vue?vue&type=template&id=6371592e

function PtzFormvue_type_template_id_6371592e_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                                  
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Server",
    items: $setup.servers,
    variant: "solo",
    density: "compact",
    modelValue: $setup.widget.properties.control.endpointUrl,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.widget.properties.control.endpointUrl = $event;
    }),
    "item-title": "name",
    "item-value": "endpoint"
  }, null, 8, ["items", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "System Id",
    modelValue: $setup.widget.properties.control.systemId,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.widget.properties.control.systemId = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Command Stream Id",
    modelValue: $setup.widget.properties.control.cmdStreamId,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $setup.widget.properties.control.cmdStreamId = $event;
    })
  }, null, 8, ["modelValue"])], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/PtzForm.vue?vue&type=script&lang=js






/* harmony default export */ var PtzFormvue_type_script_lang_js = ({
  name: "PtzForm",
  setup: function setup(props) {
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    var clientStore = useClientStore();
    var route = (0,vue_router/* useRoute */.yj)();
    // check if the dashboard exists
    var dashboardId = route.params.dashboardId;
    var servers = clientStore.getServersByDashboard(dashboardId);
    if (!widget.properties) {
      widget.properties = {};
    }
    if (!widget.properties.control) {
      widget.properties.control = {
        endpointUrl: undefined,
        tls: true,
        connectorOpts: {
          username: 'uxs-team',
          password: 'WR6zlso9h#'
        },
        systemId: undefined,
        cmdStreamId: undefined
      };
    }
    widget.supportedLayers = [];
    widget.type = 'PtzControl';
    widget.name = 'ptzControl';
    widget.description = 'PTZ control';
    return {
      widget: widget,
      servers: servers
    };
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/PtzForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/widget/PtzForm.vue




;
const PtzForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(PtzFormvue_type_script_lang_js, [['render',PtzFormvue_type_template_id_6371592e_render]])

/* harmony default export */ var PtzForm = (PtzForm_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetFormType.vue?vue&type=script&lang=js







/* harmony default export */ var WidgetFormTypevue_type_script_lang_js = ({
  name: "WidgetFormType",
  components: {
    WidgetFormMap: WidgetFormMap,
    WidgetFormVideo: WidgetFormVideo,
    WidgetFormChart: WidgetFormChart,
    TimeBarForm: TimebarForm,
    WidgetFormControlMap: WidgetFormControlMap,
    PtzForm: PtzForm
  },
  data: function data() {
    return {
      key: 0,
      s: false,
      selected: undefined,
      version: 0,
      items: ['Map', 'Video', 'Chart', 'Timebar', 'ControlMap', 'PtzControl']
    };
  },
  setup: function setup(props) {
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    return {
      widget: widget
    };
  },
  beforeMount: function beforeMount() {
    this.selected = this.widget.uiType;
  },
  methods: {
    onChange: function onChange(event) {
      this.widget.uiType = event;
      this.widget.layers = [];
      this.widget.version++;
      this.widget.type = undefined;
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormType.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetFormType.vue




;
const WidgetFormType_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormTypevue_type_script_lang_js, [['render',WidgetFormTypevue_type_template_id_1678baf3_render]])

/* harmony default export */ var WidgetFormType = (WidgetFormType_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormLayers.vue?vue&type=template&id=6795a90b&scoped=true

var WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-6795a90b"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_hoisted_1 = /*#__PURE__*/WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, "Remove to View", -1);
});
var WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_hoisted_2 = /*#__PURE__*/WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, "Add to View", -1);
});
function WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
  var _component_WidgetFormPointMarkerLayer = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormPointMarkerLayer");
  var _component_WidgetFormVideoLayer = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormVideoLayer");
  var _component_WidgetFormCurveLayer = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormCurveLayer");
  var _component_WidgetFormFrustumLayer = (0,runtime_core_esm_bundler/* resolveComponent */.up)("WidgetFormFrustumLayer");
                                                    
                                                            
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Type",
    items: $setup.widget.supportedLayers,
    variant: "solo",
    modelValue: $setup.reactiveLayer.type,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.reactiveLayer.type = $event;
    }),
    density: "compact"
  }, null, 8, ["items", "modelValue"]), $setup.reactiveLayer.type ? (0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "default", {
    key: 0
  }, function () {
    return [$setup.reactiveLayer.type === 'marker' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormPointMarkerLayer, {
      key: 0
    })) : $setup.reactiveLayer.type === 'videoData' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormVideoLayer, {
      key: 1
    })) : $setup.reactiveLayer.type === 'curve' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormCurveLayer, {
      key: 2
    })) : $setup.reactiveLayer.type === 'frustum' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_WidgetFormFrustumLayer, {
      key: 3
    })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $props.editing ? (0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "default", {
      key: 4
    }, function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, {
        bottom: ""
      }, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
          var props = _ref.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, (0,runtime_core_esm_bundler/* mergeProps */.dG)({
            rounded: "",
            class: "elevation-6 add-layer-btn",
            icon: "mdi-minus",
            color: "red"
          }, props, {
            onClick: $options.removeFromWidget
          }), null, 16, ["onClick"])];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_hoisted_1];
        }),
        _: 1
      })];
    }, true) : (0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "default", {
      key: 5
    }, function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, {
        bottom: ""
      }, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
          var props = _ref2.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, (0,runtime_core_esm_bundler/* mergeProps */.dG)({
            rounded: "",
            class: "elevation-6 add-layer-btn",
            icon: "mdi-plus"
          }, props, {
            onClick: $options.addToWidget
          }), null, 16, ["onClick"])];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_hoisted_2];
        }),
        _: 1
      })];
    }, true)];
  }, true) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)], 64);
}

/* Vuetify */





;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=template&id=40007516&scoped=true



var WidgetFormPointMarkerLayervue_type_template_id_40007516_scoped_true_withScopeId = function _withScopeId(n) {
  return _pushScopeId("data-v-40007516"), n = n(), _popScopeId(), n;
};
var WidgetFormPointMarkerLayervue_type_template_id_40007516_scoped_true_hoisted_1 = {
  class: "label-anchor"
};
var WidgetFormPointMarkerLayervue_type_template_id_40007516_scoped_true_hoisted_2 = {
  class: "icon-anchor"
};
function WidgetFormPointMarkerLayervue_type_template_id_40007516_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_DataSourceMapping = (0,runtime_core_esm_bundler/* resolveComponent */.up)("DataSourceMapping");
                                                                  
  var _component_ColorPicker = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ColorPicker");
  var _component_VTextFieldNumber = (0,runtime_core_esm_bundler/* resolveComponent */.up)("VTextFieldNumber");
                                                          
  var _component_MdiIconPicker = (0,runtime_core_esm_bundler/* resolveComponent */.up)("MdiIconPicker");
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "Label DataSource",
    name: "Label",
    model: $setup.layer.ui.label,
    mapping: $options.labelDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.labelTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Description",
    modelValue: $setup.layer.description,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.layer.description = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "Location DataSource",
    name: "Location",
    model: $setup.layer.ui.location,
    mapping: $options.locationDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.locationTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "Orientation DataSource",
    name: "Orientation",
    model: $setup.layer.ui.orientation,
    mapping: $options.orientationDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.orientationTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "MarkerId DataSource",
    name: "MarkerId",
    model: $setup.layer.ui.markerId,
    mapping: $options.markerIdDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.markerIdTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColorPicker, {
    modelValue: $setup.layer.labelColor,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.layer.labelColor = $event;
    }),
    label: "Label color"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColorPicker, {
    modelValue: $setup.layer.labelOutlineColor,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $setup.layer.labelOutlineColor = $event;
    }),
    label: "Label outline color"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColorPicker, {
    modelValue: $setup.layer.labelBackgroundColor,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $setup.layer.labelBackgroundColor = $event;
    }),
    label: "Label background color"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Label size",
    modelValue: $setup.layer.labelSize,
    "onUpdate:modelValue": _cache[4] || (_cache[4] = function ($event) {
      return $setup.layer.labelSize = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", WidgetFormPointMarkerLayervue_type_template_id_40007516_scoped_true_hoisted_1, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Label Anchor X",
    modelValue: $setup.layer.labelOffset[0],
    "onUpdate:modelValue": _cache[5] || (_cache[5] = function ($event) {
      return $setup.layer.labelOffset[0] = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Label Anchor Y",
    modelValue: $setup.layer.labelOffset[1],
    "onUpdate:modelValue": _cache[6] || (_cache[6] = function ($event) {
      return $setup.layer.labelOffset[1] = $event;
    })
  }, null, 8, ["modelValue"])]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSwitch/* VSwitch */.G, {
    color: "info",
    label: "Url",
    modelValue: $setup.layer.ui.urlIcon,
    "onUpdate:modelValue": _cache[7] || (_cache[7] = function ($event) {
      return $setup.layer.ui.urlIcon = $event;
    }),
    density: "compact"
  }, null, 8, ["modelValue"]), $setup.layer.ui.urlIcon ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VTextField/* VTextField */.h, {
    key: 0,
    variant: "solo",
    density: "compact",
    label: "Model",
    modelValue: $setup.layer.icon,
    "onUpdate:modelValue": _cache[8] || (_cache[8] = function ($event) {
      return $setup.layer.icon = $event;
    })
  }, null, 8, ["modelValue"])) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_MdiIconPicker, {
    key: 1,
    onOnSelect: $options.onSelectIcon,
    defaultIcon: $setup.icon,
    label: "Icon"
  }, null, 8, ["onOnSelect", "defaultIcon"])), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSlider/* VSlider */.R, {
    modelValue: $setup.layer.iconScale,
    "onUpdate:modelValue": _cache[10] || (_cache[10] = function ($event) {
      return $setup.layer.iconScale = $event;
    }),
    max: 5.0,
    min: "0.1",
    step: 0.1,
    "show-ticks": "always",
    label: "Icon scale",
    "hide-details": "",
    class: "slider",
    density: "compact",
    variant: "solo"
  }, {
    append: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
        modelValue: $setup.layer.iconScale,
        "onUpdate:modelValue": _cache[9] || (_cache[9] = function ($event) {
          return $setup.layer.iconScale = $event;
        }),
        type: "number",
        style: {
          "width": "85px"
        },
        density: "compact",
        "hide-details": "",
        variant: "outlined"
      }, null, 8, ["modelValue"])];
    }),
    _: 1
  }, 8, ["modelValue", "max", "step"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColorPicker, {
    modelValue: $setup.layer.iconColor,
    "onUpdate:modelValue": _cache[11] || (_cache[11] = function ($event) {
      return $setup.layer.iconColor = $event;
    }),
    label: "Icon color"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", WidgetFormPointMarkerLayervue_type_template_id_40007516_scoped_true_hoisted_2, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Icon Anchor X",
    modelValue: $setup.layer.iconAnchor[0],
    "onUpdate:modelValue": _cache[12] || (_cache[12] = function ($event) {
      return $setup.layer.iconAnchor[0] = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_VTextFieldNumber, {
    label: "Icon Anchor Y",
    modelValue: $setup.layer.iconAnchor[1],
    "onUpdate:modelValue": _cache[13] || (_cache[13] = function ($event) {
      return $setup.layer.iconAnchor[1] = $event;
    })
  }, null, 8, ["modelValue"])])], 64);
}

/* Vuetify */





;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=template&id=40007516&scoped=true

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.starts-with.js
var es_string_starts_with = __webpack_require__(23157);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VGrid/VContainer.mjs
var VContainer = __webpack_require__(23369);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VGrid/VCol.mjs
var VCol = __webpack_require__(83070);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/directives/scroll/index.mjs
var directives_scroll = __webpack_require__(5547);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/MdiIconPicker.vue?vue&type=template&id=bfa0b52e&scoped=true

var MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-bfa0b52e"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_1 = {
  id: "container",
  ref: "container"
};
var MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_2 = {
  key: 0,
  id: "loading-wrapper"
};
var MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_3 = /*#__PURE__*/MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    class: "dots"
  }, [/*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    style: "background-color: #18191A"
  }), /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    style: "background-color: #18191A"
  }), /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
    style: "background-color: #18191A"
  })], -1);
});
var MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_4 = [MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_3];
var MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_5 = {
  id: "end-of-list",
  ref: "end-of-list"
};
function MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                  
                                                      
                                                    
                                                    
                                                        
                                                                
                                                      
                                                          
                                                      
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VDialog/* VDialog */.B, {
    modelValue: $data.showDialog,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $data.showDialog = $event;
    }),
    "close-on-content-click": false,
    "nudge-right": 40,
    transition: "scale-transition",
    "offset-y": "",
    "max-width": "700px",
    "max-height": "850px"
  }, {
    activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
      var props = _ref.props;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, (0,runtime_core_esm_bundler/* mergeProps */.dG)({
        modelValue: $data.selectedIcon,
        "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
          return $data.selectedIcon = $event;
        }),
        "prepend-inner-icon": "mdi-" + $data.selectedIcon,
        label: $props.label
      }, props, {
        readonly: "",
        variant: "solo",
        density: "compact",
        class: "input-text"
      }), null, 16, ["modelValue", "prepend-inner-icon", "label"])];
    }),
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, null, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VContainer/* VContainer */.K, null, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
                modelValue: $data.searchIcon,
                "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
                  return $data.searchIcon = $event;
                }),
                placeholder: "Search icon",
                "prepend-icon": "mdi-magnify",
                type: "text",
                onautocomplete: "off",
                density: "compact"
              }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* withDirectives */.wy)(((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VSheet/* VSheet */.C, {
                id: "scrolling-techniques-7",
                class: "overflow-y-auto",
                "max-height": "600"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
                    cols: "12"
                  }, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_1, [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)($data.itemsToDisplay, function (item) {
                        return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VBtn/* VBtn */.T, {
                          key: item,
                          title: item,
                          onClick: function onClick($event) {
                            return $options.saveIcon(item);
                          },
                          color: "white",
                          class: "mr-2 mb-2",
                          fab: "",
                          small: "",
                          depressed: ""
                        }, {
                          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, null, {
                              default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                                return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-" + (0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)];
                              }),
                              _: 2
                            }, 1024)];
                          }),
                          _: 2
                        }, 1032, ["title", "onClick"]);
                      }), 128)), $data.loading ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_2, MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_4)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* withDirectives */.wy)((0,runtime_core_esm_bundler/* createElementVNode */._)("div", MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_hoisted_5, null, 512), [[runtime_dom_esm_bundler/* vShow */.F8, $data.page !== $data.items.length - 1 || !$data.loading]])], 512)];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              })), [[directives_scroll/* Scroll */.X, $options.onScroll, void 0, {
                self: true
              }]])];
            }),
            _: 1
          })];
        }),
        _: 1
      })];
    }),
    _: 1
  }, 8, ["modelValue"]);
}

/* Vuetify */










;// CONCATENATED MODULE: ./src/components/MdiIconPicker.vue?vue&type=template&id=bfa0b52e&scoped=true

;// CONCATENATED MODULE: ./src/components/mdi-icons.js
/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/
var mdiIcons = ["abacus", "abjad-arabic", "abjad-hebrew", "ab-testing", "abugida-devanagari", "abugida-thai", "access-point-check", "access-point-minus", "access-point-network-off", "access-point-network", "access-point-off", "access-point-plus", "access-point-remove", "access-point", "account-alert-outline", "account-alert", "account-arrow-down-outline", "account-arrow-down", "account-arrow-left-outline", "account-arrow-left", "account-arrow-right-outline", "account-arrow-right", "account-arrow-up-outline", "account-arrow-up", "account-badge-outline", "account-badge", "account-box-multiple-outline", "account-box-multiple", "account-box-outline", "account-box", "account-cancel-outline", "account-cancel", "account-card-outline", "account-card", "account-cash-outline", "account-cash", "account-check-outline", "account-check", "account-child-circle", "account-child-outline", "account-child", "account-circle-outline", "account-circle", "account-clock-outline", "account-clock", "account-cog-outline", "account-cog", "account-convert-outline", "account-convert", "account-cowboy-hat-outline", "account-cowboy-hat", "account-credit-card-outline", "account-credit-card", "account-details-outline", "account-details", "account-edit-outline", "account-edit", "account-eye-outline", "account-eye", "account-filter-outline", "account-filter", "account-group-outline", "account-group", "account-hard-hat-outline", "account-hard-hat", "account-heart-outline", "account-heart", "account-injury-outline", "account-injury", "account-key-outline", "account-key", "account-lock-open-outline", "account-lock-open", "account-lock-outline", "account-lock", "account-minus-outline", "account-minus", "account-multiple-check-outline", "account-multiple-check", "account-multiple-minus-outline", "account-multiple-minus", "account-multiple-outline", "account-multiple-plus-outline", "account-multiple-plus", "account-multiple-remove-outline", "account-multiple-remove", "account-multiple", "account-music-outline", "account-music", "account-network-off-outline", "account-network-off", "account-network-outline", "account-network", "account-off-outline", "account-off", "account-outline", "account-plus-outline", "account-plus", "account-question-outline", "account-question", "account-reactivate-outline", "account-reactivate", "account-remove-outline", "account-remove", "account-school-outline", "account-school", "account-search-outline", "account-search", "account-settings-outline", "account-settings", "account-star-outline", "account-star", "account-supervisor-circle-outline", "account-supervisor-circle", "account-supervisor-outline", "account-supervisor", "account", "account-switch-outline", "account-switch", "account-sync-outline", "account-sync", "account-tag-outline", "account-tag", "account-tie-hat-outline", "account-tie-hat", "account-tie-outline", "account-tie", "account-tie-voice-off-outline", "account-tie-voice-off", "account-tie-voice-outline", "account-tie-voice", "account-tie-woman", "account-voice-off", "account-voice", "account-wrench-outline", "account-wrench", "adjust", "advertisements-off", "advertisements", "airbag", "airballoon-outline", "airballoon", "air-conditioner", "air-filter", "air-horn", "air-humidifier-off", "air-humidifier", "airplane-alert", "airplane-check", "airplane-clock", "airplane-cog", "airplane-edit", "airplane-landing", "airplane-marker", "airplane-minus", "airplane-off", "airplane-plus", "airplane-remove", "airplane-search", "airplane-settings", "airplane", "airplane-takeoff", "airport", "air-purifier-off", "air-purifier", "alarm-bell", "alarm-check", "alarm-light-off-outline", "alarm-light-off", "alarm-light-outline", "alarm-light", "alarm-multiple", "alarm-note-off", "alarm-note", "alarm-off", "alarm-panel-outline", "alarm-panel", "alarm-plus", "alarm-snooze", "alarm", "album", "alert-box-outline", "alert-box", "alert-circle-check-outline", "alert-circle-check", "alert-circle-outline", "alert-circle", "alert-decagram-outline", "alert-decagram", "alert-minus-outline", "alert-minus", "alert-octagon-outline", "alert-octagon", "alert-octagram-outline", "alert-octagram", "alert-outline", "alert-plus-outline", "alert-plus", "alert-remove-outline", "alert-remove", "alert-rhombus-outline", "alert-rhombus", "alert", "alien-outline", "alien", "align-horizontal-center", "align-horizontal-distribute", "align-horizontal-left", "align-horizontal-right", "align-vertical-bottom", "align-vertical-center", "align-vertical-distribute", "align-vertical-top", "allergy", "all-inclusive-box-outline", "all-inclusive-box", "all-inclusive", "alpha-a-box-outline", "alpha-a-box", "alpha-a-circle-outline", "alpha-a-circle", "alpha-a", "alpha-b-box-outline", "alpha-b-box", "alpha-b-circle-outline", "alpha-b-circle", "alphabet-aurebesh", "alphabet-cyrillic", "alphabet-greek", "alphabetical-off", "alphabetical", "alphabetical-variant-off", "alphabetical-variant", "alphabet-latin", "alphabet-piqad", "alphabet-tengwar", "alpha-b", "alpha-c-box-outline", "alpha-c-box", "alpha-c-circle-outline", "alpha-c-circle", "alpha-c", "alpha-d-box-outline", "alpha-d-box", "alpha-d-circle-outline", "alpha-d-circle", "alpha-d", "alpha-e-box-outline", "alpha-e-box", "alpha-e-circle-outline", "alpha-e-circle", "alpha-e", "alpha-f-box-outline", "alpha-f-box", "alpha-f-circle-outline", "alpha-f-circle", "alpha-f", "alpha-g-box-outline", "alpha-g-box", "alpha-g-circle-outline", "alpha-g-circle", "alpha-g", "alpha-h-box-outline", "alpha-h-box", "alpha-h-circle-outline", "alpha-h-circle", "alpha-h", "alpha-i-box-outline", "alpha-i-box", "alpha-i-circle-outline", "alpha-i-circle", "alpha-i", "alpha-j-box-outline", "alpha-j-box", "alpha-j-circle-outline", "alpha-j-circle", "alpha-j", "alpha-k-box-outline", "alpha-k-box", "alpha-k-circle-outline", "alpha-k-circle", "alpha-k", "alpha-l-box-outline", "alpha-l-box", "alpha-l-circle-outline", "alpha-l-circle", "alpha-l", "alpha-m-box-outline", "alpha-m-box", "alpha-m-circle-outline", "alpha-m-circle", "alpha-m", "alpha-n-box-outline", "alpha-n-box", "alpha-n-circle-outline", "alpha-n-circle", "alpha-n", "alpha-o-box-outline", "alpha-o-box", "alpha-o-circle-outline", "alpha-o-circle", "alpha-o", "alpha-p-box-outline", "alpha-p-box", "alpha-p-circle-outline", "alpha-p-circle", "alpha-p", "alpha-q-box-outline", "alpha-q-box", "alpha-q-circle-outline", "alpha-q-circle", "alpha-q", "alpha-r-box-outline", "alpha-r-box", "alpha-r-circle-outline", "alpha-r-circle", "alpha-r", "alpha-s-box-outline", "alpha-s-box", "alpha-s-circle-outline", "alpha-s-circle", "alpha-s", "alpha", "alpha-t-box-outline", "alpha-t-box", "alpha-t-circle-outline", "alpha-t-circle", "alpha-t", "alpha-u-box-outline", "alpha-u-box", "alpha-u-circle-outline", "alpha-u-circle", "alpha-u", "alpha-v-box-outline", "alpha-v-box", "alpha-v-circle-outline", "alpha-v-circle", "alpha-v", "alpha-w-box-outline", "alpha-w-box", "alpha-w-circle-outline", "alpha-w-circle", "alpha-w", "alpha-x-box-outline", "alpha-x-box", "alpha-x-circle-outline", "alpha-x-circle", "alpha-x", "alpha-y-box-outline", "alpha-y-box", "alpha-y-circle-outline", "alpha-y-circle", "alpha-y", "alpha-z-box-outline", "alpha-z-box", "alpha-z-circle-outline", "alpha-z-circle", "alpha-z", "altimeter", "ambulance", "ammunition", "ampersand", "amplifier-off", "amplifier", "anchor", "android-studio", "android", "angle-acute", "angle-obtuse", "angle-right", "angularjs", "angular", "animation-outline", "animation-play-outline", "animation-play", "animation", "ansible", "antenna", "anvil", "apache-kafka", "api-off", "api", "apple-finder", "apple-icloud", "apple-ios", "apple-keyboard-caps", "apple-keyboard-command", "apple-keyboard-control", "apple-keyboard-option", "apple-keyboard-shift", "apple-safari", "apple", "application-array-outline", "application-array", "application-braces-outline", "application-braces", "application-brackets-outline", "application-brackets", "application-cog-outline", "application-cog", "application-edit-outline", "application-edit", "application-export", "application-import", "application-outline", "application-parentheses-outline", "application-parentheses", "application-settings-outline", "application-settings", "application", "application-variable-outline", "application-variable", "approximately-equal-box", "approximately-equal", "apps-box", "apps", "archive-alert-outline", "archive-alert", "archive-arrow-down-outline", "archive-arrow-down", "archive-arrow-up-outline", "archive-arrow-up", "archive-cancel-outline", "archive-cancel", "archive-check-outline", "archive-check", "archive-clock-outline", "archive-clock", "archive-cog-outline", "archive-cog", "archive-edit-outline", "archive-edit", "archive-eye-outline", "archive-eye", "archive-lock-open-outline", "archive-lock-open", "archive-lock-outline", "archive-lock", "archive-marker-outline", "archive-marker", "archive-minus-outline", "archive-minus", "archive-music-outline", "archive-music", "archive-off-outline", "archive-off", "archive-outline", "archive-plus-outline", "archive-plus", "archive-refresh-outline", "archive-refresh", "archive-remove-outline", "archive-remove", "archive-search-outline", "archive-search", "archive-settings-outline", "archive-settings", "archive-star-outline", "archive-star", "archive", "archive-sync-outline", "archive-sync", "arch", "arm-flex-outline", "arm-flex", "arrange-bring-forward", "arrange-bring-to-front", "arrange-send-backward", "arrange-send-to-back", "arrow-all", "arrow-bottom-left-bold-box-outline", "arrow-bottom-left-bold-box", "arrow-bottom-left-bold-outline", "arrow-bottom-left", "arrow-bottom-left-thick", "arrow-bottom-left-thin-circle-outline", "arrow-bottom-left-thin", "arrow-bottom-right-bold-box-outline", "arrow-bottom-right-bold-box", "arrow-bottom-right-bold-outline", "arrow-bottom-right", "arrow-bottom-right-thick", "arrow-bottom-right-thin-circle-outline", "arrow-bottom-right-thin", "arrow-collapse-all", "arrow-collapse-down", "arrow-collapse-horizontal", "arrow-collapse-left", "arrow-collapse-right", "arrow-collapse", "arrow-collapse-up", "arrow-collapse-vertical", "arrow-decision-auto-outline", "arrow-decision-auto", "arrow-decision-outline", "arrow-decision", "arrow-down-bold-box-outline", "arrow-down-bold-box", "arrow-down-bold-circle-outline", "arrow-down-bold-circle", "arrow-down-bold-hexagon-outline", "arrow-down-bold-outline", "arrow-down-bold", "arrow-down-box", "arrow-down-circle-outline", "arrow-down-circle", "arrow-down-drop-circle-outline", "arrow-down-drop-circle", "arrow-down-left-bold", "arrow-down-left", "arrow-down-right-bold", "arrow-down-right", "arrow-down", "arrow-down-thick", "arrow-down-thin-circle-outline", "arrow-down-thin", "arrow-expand-all", "arrow-expand-down", "arrow-expand-horizontal", "arrow-expand-left", "arrow-expand-right", "arrow-expand", "arrow-expand-up", "arrow-expand-vertical", "arrow-horizontal-lock", "arrow-left-bold-box-outline", "arrow-left-bold-box", "arrow-left-bold-circle-outline", "arrow-left-bold-circle", "arrow-left-bold-hexagon-outline", "arrow-left-bold-outline", "arrow-left-bold", "arrow-left-bottom-bold", "arrow-left-bottom", "arrow-left-box", "arrow-left-circle-outline", "arrow-left-circle", "arrow-left-drop-circle-outline", "arrow-left-drop-circle", "arrow-left-right-bold-outline", "arrow-left-right-bold", "arrow-left-right", "arrow-left", "arrow-left-thick", "arrow-left-thin-circle-outline", "arrow-left-thin", "arrow-left-top-bold", "arrow-left-top", "arrow-projectile-multiple", "arrow-projectile", "arrow-right-bold-box-outline", "arrow-right-bold-box", "arrow-right-bold-circle-outline", "arrow-right-bold-circle", "arrow-right-bold-hexagon-outline", "arrow-right-bold-outline", "arrow-right-bold", "arrow-right-bottom-bold", "arrow-right-bottom", "arrow-right-box", "arrow-right-circle-outline", "arrow-right-circle", "arrow-right-drop-circle-outline", "arrow-right-drop-circle", "arrow-right", "arrow-right-thick", "arrow-right-thin-circle-outline", "arrow-right-thin", "arrow-right-top-bold", "arrow-right-top", "arrow-split-horizontal", "arrow-split-vertical", "arrow-top-left-bold-box-outline", "arrow-top-left-bold-box", "arrow-top-left-bold-outline", "arrow-top-left-bottom-right-bold", "arrow-top-left-bottom-right", "arrow-top-left", "arrow-top-left-thick", "arrow-top-left-thin-circle-outline", "arrow-top-left-thin", "arrow-top-right-bold-box-outline", "arrow-top-right-bold-box", "arrow-top-right-bold-outline", "arrow-top-right-bottom-left-bold", "arrow-top-right-bottom-left", "arrow-top-right", "arrow-top-right-thick", "arrow-top-right-thin-circle-outline", "arrow-top-right-thin", "arrow-u-down-left-bold", "arrow-u-down-left", "arrow-u-down-right-bold", "arrow-u-down-right", "arrow-u-left-bottom-bold", "arrow-u-left-bottom", "arrow-u-left-top-bold", "arrow-u-left-top", "arrow-up-bold-box-outline", "arrow-up-bold-box", "arrow-up-bold-circle-outline", "arrow-up-bold-circle", "arrow-up-bold-hexagon-outline", "arrow-up-bold-outline", "arrow-up-bold", "arrow-up-box", "arrow-up-circle-outline", "arrow-up-circle", "arrow-up-down-bold-outline", "arrow-up-down-bold", "arrow-up-down", "arrow-up-drop-circle-outline", "arrow-up-drop-circle", "arrow-up-left-bold", "arrow-up-left", "arrow-up-right-bold", "arrow-up-right", "arrow-up", "arrow-up-thick", "arrow-up-thin-circle-outline", "arrow-up-thin", "arrow-u-right-bottom-bold", "arrow-u-right-bottom", "arrow-u-right-top-bold", "arrow-u-right-top", "arrow-u-up-left-bold", "arrow-u-up-left", "arrow-u-up-right-bold", "arrow-u-up-right", "arrow-vertical-lock", "artboard", "artstation", "aspect-ratio", "assistant", "asterisk-circle-outline", "asterisk", "atlassian", "atm", "atom", "atom-variant", "at", "attachment-check", "attachment-lock", "attachment-minus", "attachment-off", "attachment-plus", "attachment-remove", "attachment", "atv", "audio-input-rca", "audio-input-stereo-minijack", "audio-input-xlr", "audio-video-off", "audio-video", "augmented-reality", "aurora", "auto-download", "auto-fix", "autorenew-off", "autorenew", "auto-upload", "av-timer", "awning-outline", "awning", "aws", "axe-battle", "axe", "axis-arrow-info", "axis-arrow-lock", "axis-arrow", "axis-lock", "axis", "axis-x-arrow-lock", "axis-x-arrow", "axis-x-rotate-clockwise", "axis-x-rotate-counterclockwise", "axis-x-y-arrow-lock", "axis-y-arrow-lock", "axis-y-arrow", "axis-y-rotate-clockwise", "axis-y-rotate-counterclockwise", "axis-z-arrow-lock", "axis-z-arrow", "axis-z-rotate-clockwise", "axis-z-rotate-counterclockwise", "babel", "baby-bottle-outline", "baby-bottle", "baby-buggy-off", "baby-buggy", "baby-carriage-off", "baby-carriage", "baby-face-outline", "baby-face", "baby", "backburger", "backspace-outline", "backspace-reverse-outline", "backspace-reverse", "backspace", "backup-restore", "bacteria-outline", "bacteria", "badge-account-alert-outline", "badge-account-alert", "badge-account-horizontal-outline", "badge-account-horizontal", "badge-account-outline", "badge-account", "badminton", "bag-carry-on-check", "bag-carry-on-off", "bag-carry-on", "bag-checked", "bag-personal-off-outline", "bag-personal-off", "bag-personal-outline", "bag-personal", "bag-personal-tag-outline", "bag-personal-tag", "bag-suitcase-off-outline", "bag-suitcase-off", "bag-suitcase-outline", "bag-suitcase", "baguette", "balcony", "balloon", "ballot-outline", "ballot-recount-outline", "ballot-recount", "ballot", "bandage", "bank-check", "bank-circle-outline", "bank-circle", "bank-minus", "bank-off-outline", "bank-off", "bank-outline", "bank-plus", "bank-remove", "bank", "bank-transfer-in", "bank-transfer-out", "bank-transfer", "barcode-off", "barcode-scan", "barcode", "barley-off", "barley", "barn", "barrel-outline", "barrel", "baseball-bat", "baseball-diamond-outline", "baseball-diamond", "baseball", "bash", "basketball-hoop-outline", "basketball-hoop", "basketball", "basket-check-outline", "basket-check", "basket-fill", "basket-minus-outline", "basket-minus", "basket-off-outline", "basket-off", "basket-outline", "basket-plus-outline", "basket-plus", "basket-remove-outline", "basket-remove", "basket", "basket-unfill", "bathtub-outline", "bathtub", "bat", "battery-10-bluetooth", "battery-10", "battery-20-bluetooth", "battery-20", "battery-30-bluetooth", "battery-30", "battery-40-bluetooth", "battery-40", "battery-50-bluetooth", "battery-50", "battery-60-bluetooth", "battery-60", "battery-70-bluetooth", "battery-70", "battery-80-bluetooth", "battery-80", "battery-90-bluetooth", "battery-90", "battery-alert-bluetooth", "battery-alert", "battery-alert-variant-outline", "battery-alert-variant", "battery-arrow-down-outline", "battery-arrow-down", "battery-arrow-up-outline", "battery-arrow-up", "battery-bluetooth", "battery-bluetooth-variant", "battery-charging-100", "battery-charging-10", "battery-charging-20", "battery-charging-30", "battery-charging-40", "battery-charging-50", "battery-charging-60", "battery-charging-70", "battery-charging-80", "battery-charging-90", "battery-charging-high", "battery-charging-low", "battery-charging-medium", "battery-charging-outline", "battery-charging", "battery-charging-wireless-10", "battery-charging-wireless-20", "battery-charging-wireless-30", "battery-charging-wireless-40", "battery-charging-wireless-50", "battery-charging-wireless-60", "battery-charging-wireless-70", "battery-charging-wireless-80", "battery-charging-wireless-90", "battery-charging-wireless-alert", "battery-charging-wireless-outline", "battery-charging-wireless", "battery-check-outline", "battery-check", "battery-clock-outline", "battery-clock", "battery-heart-outline", "battery-heart", "battery-heart-variant", "battery-high", "battery-lock-open", "battery-lock", "battery-low", "battery-medium", "battery-minus-outline", "battery-minus", "battery-minus-variant", "battery-negative", "battery-off-outline", "battery-off", "battery-outline", "battery-plus-outline", "battery-plus", "battery-plus-variant", "battery-positive", "battery-remove-outline", "battery-remove", "battery", "battery-sync-outline", "battery-sync", "battery-unknown-bluetooth", "battery-unknown", "beach", "beaker-alert-outline", "beaker-alert", "beaker-check-outline", "beaker-check", "beaker-minus-outline", "beaker-minus", "beaker-outline", "beaker-plus-outline", "beaker-plus", "beaker-question-outline", "beaker-question", "beaker-remove-outline", "beaker-remove", "beaker", "bed-clock", "bed-double-outline", "bed-double", "bed-empty", "bed-king-outline", "bed-king", "bed-outline", "bed-queen-outline", "bed-queen", "bed-single-outline", "bed-single", "bed", "bee-flower", "beehive-off-outline", "beehive-outline", "beekeeper", "beer-outline", "beer", "bee", "bell-alert-outline", "bell-alert", "bell-badge-outline", "bell-badge", "bell-cancel-outline", "bell-cancel", "bell-check-outline", "bell-check", "bell-circle-outline", "bell-circle", "bell-cog-outline", "bell-cog", "bell-minus-outline", "bell-minus", "bell-off-outline", "bell-off", "bell-outline", "bell-plus-outline", "bell-plus", "bell-remove-outline", "bell-remove", "bell-ring-outline", "bell-ring", "bell-sleep-outline", "bell-sleep", "bell", "betamax", "beta", "biathlon", "bicycle-basket", "bicycle-cargo", "bicycle-electric", "bicycle-penny-farthing", "bicycle", "bike-fast", "bike", "billboard", "billiards-rack", "billiards", "binoculars", "biohazard", "bio", "bird", "bitbucket", "bitcoin", "black-mesa", "blender-outline", "blender-software", "blender", "blinds-horizontal-closed", "blinds-horizontal", "blinds-open", "blinds", "blinds-vertical-closed", "blinds-vertical", "block-helper", "blood-bag", "bluetooth-audio", "bluetooth-connect", "bluetooth-off", "bluetooth-settings", "bluetooth", "bluetooth-transfer", "blur-linear", "blur-off", "blur-radial", "blur", "bolt", "bomb-off", "bomb", "bone-off", "bone", "book-account-outline", "book-account", "book-alert-outline", "book-alert", "book-alphabet", "book-arrow-down-outline", "book-arrow-down", "book-arrow-left-outline", "book-arrow-left", "book-arrow-right-outline", "book-arrow-right", "book-arrow-up-outline", "book-arrow-up", "book-cancel-outline", "book-cancel", "book-check-outline", "book-check", "book-clock-outline", "book-clock", "book-cog-outline", "book-cog", "book-cross", "book-edit-outline", "book-edit", "book-education-outline", "book-education", "book-heart-outline", "book-heart", "book-information-variant", "book-lock-open-outline", "book-lock-open", "book-lock-outline", "book-lock", "bookmark-box-multiple-outline", "bookmark-box-multiple", "bookmark-box-outline", "bookmark-box", "bookmark-check-outline", "bookmark-check", "book-marker-outline", "book-marker", "bookmark-minus-outline", "bookmark-minus", "bookmark-multiple-outline", "bookmark-multiple", "bookmark-music-outline", "bookmark-music", "bookmark-off-outline", "bookmark-off", "bookmark-outline", "bookmark-plus-outline", "bookmark-plus", "bookmark-remove-outline", "bookmark-remove", "bookmark", "book-minus-multiple-outline", "book-minus-multiple", "book-minus-outline", "book-minus", "book-multiple-outline", "book-multiple", "book-music-outline", "book-music", "book-off-outline", "book-off", "book-open-blank-variant", "book-open-outline", "book-open-page-variant-outline", "book-open-page-variant", "book-open", "book-open-variant", "book-outline", "book-play-outline", "book-play", "book-plus-multiple-outline", "book-plus-multiple", "book-plus-outline", "book-plus", "book-refresh-outline", "book-refresh", "book-remove-multiple-outline", "book-remove-multiple", "book-remove-outline", "book-remove", "book-search-outline", "book-search", "book-settings-outline", "book-settings", "bookshelf", "book", "book-sync-outline", "book-sync", "book-variant", "boombox", "boomerang", "boom-gate-alert-outline", "boom-gate-alert", "boom-gate-arrow-down-outline", "boom-gate-arrow-down", "boom-gate-arrow-up-outline", "boom-gate-arrow-up", "boom-gate-outline", "boom-gate", "boom-gate-up-outline", "boom-gate-up", "bootstrap", "border-all", "border-all-variant", "border-bottom", "border-bottom-variant", "border-color", "border-horizontal", "border-inside", "border-left", "border-left-variant", "border-none", "border-none-variant", "border-outside", "border-radius", "border-right", "border-right-variant", "border-style", "border-top", "border-top-variant", "border-vertical", "bottle-soda-classic-outline", "bottle-soda-classic", "bottle-soda-outline", "bottle-soda", "bottle-tonic-outline", "bottle-tonic-plus-outline", "bottle-tonic-plus", "bottle-tonic-skull-outline", "bottle-tonic-skull", "bottle-tonic", "bottle-wine-outline", "bottle-wine", "bow-arrow", "bowling", "bowl-mix-outline", "bowl-mix", "bowl-outline", "bowl", "bow-tie", "box-cutter-off", "box-cutter", "boxing-glove", "box-shadow", "box", "braille", "brain", "bread-slice-outline", "bread-slice", "bridge", "briefcase-account-outline", "briefcase-account", "briefcase-arrow-left-right-outline", "briefcase-arrow-left-right", "briefcase-arrow-up-down-outline", "briefcase-arrow-up-down", "briefcase-check-outline", "briefcase-check", "briefcase-clock-outline", "briefcase-clock", "briefcase-download-outline", "briefcase-download", "briefcase-edit-outline", "briefcase-edit", "briefcase-eye-outline", "briefcase-eye", "briefcase-minus-outline", "briefcase-minus", "briefcase-off-outline", "briefcase-off", "briefcase-outline", "briefcase-plus-outline", "briefcase-plus", "briefcase-remove-outline", "briefcase-remove", "briefcase-search-outline", "briefcase-search", "briefcase", "briefcase-upload-outline", "briefcase-upload", "briefcase-variant-off-outline", "briefcase-variant-off", "briefcase-variant-outline", "briefcase-variant", "brightness-1", "brightness-2", "brightness-3", "brightness-4", "brightness-5", "brightness-6", "brightness-7", "brightness-auto", "brightness-percent", "broadcast-off", "broadcast", "broom", "brush-off", "brush-outline", "brush", "brush-variant", "bucket-outline", "bucket", "buffet", "bug-check-outline", "bug-check", "bugle", "bug-outline", "bug-pause-outline", "bug-pause", "bug-play-outline", "bug-play", "bug-stop-outline", "bug-stop", "bug", "bulkhead-light", "bulldozer", "bulletin-board", "bullet", "bullhorn-outline", "bullhorn", "bullhorn-variant-outline", "bullhorn-variant", "bullseye-arrow", "bullseye", "bulma", "bunk-bed-outline", "bunk-bed", "bus-alert", "bus-articulated-end", "bus-articulated-front", "bus-clock", "bus-double-decker", "bus-electric", "bus-marker", "bus-multiple", "bus-school", "bus-side", "bus-stop-covered", "bus-stop", "bus-stop-uncovered", "bus", "butterfly-outline", "butterfly", "button-cursor", "button-pointer", "cabin-a-frame", "cable-data", "cached", "cactus", "cake-layered", "cake", "cake-variant-outline", "cake-variant", "calculator", "calculator-variant-outline", "calculator-variant", "calendar-account-outline", "calendar-account", "calendar-alert-outline", "calendar-alert", "calendar-arrow-left", "calendar-arrow-right", "calendar-badge-outline", "calendar-badge", "calendar-blank-multiple", "calendar-blank-outline", "calendar-blank", "calendar-check-outline", "calendar-check", "calendar-clock-outline", "calendar-clock", "calendar-collapse-horizontal-outline", "calendar-collapse-horizontal", "calendar-cursor-outline", "calendar-cursor", "calendar-edit-outline", "calendar-edit", "calendar-end-outline", "calendar-end", "calendar-expand-horizontal-outline", "calendar-expand-horizontal", "calendar-export-outline", "calendar-export", "calendar-filter-outline", "calendar-filter", "calendar-heart-outline", "calendar-heart", "calendar-import-outline", "calendar-import", "calendar-lock-open-outline", "calendar-lock-open", "calendar-lock-outline", "calendar-lock", "calendar-minus-outline", "calendar-minus", "calendar-month-outline", "calendar-month", "calendar-multiple-check", "calendar-multiple", "calendar-multiselect-outline", "calendar-multiselect", "calendar-outline", "calendar-plus-outline", "calendar-plus", "calendar-question-outline", "calendar-question", "calendar-range-outline", "calendar-range", "calendar-refresh-outline", "calendar-refresh", "calendar-remove-outline", "calendar-remove", "calendar-search-outline", "calendar-search", "calendar-star-outline", "calendar-star", "calendar-start-outline", "calendar-start", "calendar", "calendar-sync-outline", "calendar-sync", "calendar-text-outline", "calendar-text", "calendar-today-outline", "calendar-today", "calendar-week-begin-outline", "calendar-week-begin", "calendar-weekend-outline", "calendar-weekend", "calendar-week-outline", "calendar-week", "call-made", "call-merge", "call-missed", "call-received", "call-split", "camcorder-off", "camcorder", "camera-account", "camera-burst", "camera-control", "camera-document-off", "camera-document", "camera-enhance-outline", "camera-enhance", "camera-flip-outline", "camera-flip", "camera-front", "camera-front-variant", "camera-gopro", "camera-image", "camera-iris", "camera-lock-open-outline", "camera-lock-open", "camera-lock-outline", "camera-lock", "camera-marker-outline", "camera-marker", "camera-metering-center", "camera-metering-matrix", "camera-metering-partial", "camera-metering-spot", "camera-off-outline", "camera-off", "camera-outline", "camera-party-mode", "camera-plus-outline", "camera-plus", "camera-rear", "camera-rear-variant", "camera-retake-outline", "camera-retake", "camera", "camera-switch-outline", "camera-switch", "camera-timer", "camera-wireless-outline", "camera-wireless", "campfire", "cancel", "candelabra-fire", "candelabra", "candle", "candycane", "candy-off-outline", "candy-off", "candy-outline", "candy", "cannabis-off", "cannabis", "caps-lock", "car-2-plus", "car-3-plus", "carabiner", "car-arrow-left", "car-arrow-right", "caravan", "car-back", "car-battery", "car-brake-abs", "car-brake-alert", "car-brake-fluid-level", "car-brake-hold", "car-brake-low-pressure", "car-brake-parking", "car-brake-retarder", "car-brake-temperature", "car-brake-worn-linings", "car-child-seat", "car-clock", "car-clutch", "car-cog", "car-connected", "car-convertible", "car-coolant-level", "car-cruise-control", "card-account-details-outline", "card-account-details-star-outline", "card-account-details-star", "card-account-details", "card-account-mail-outline", "card-account-mail", "card-account-phone-outline", "card-account-phone", "card-bulleted-off-outline", "card-bulleted-off", "card-bulleted-outline", "card-bulleted-settings-outline", "card-bulleted-settings", "card-bulleted", "car-defrost-front", "car-defrost-rear", "card-minus-outline", "card-minus", "card-multiple-outline", "card-multiple", "card-off-outline", "card-off", "car-door-lock", "car-door", "card-outline", "card-plus-outline", "card-plus", "card-remove-outline", "card-remove", "cards-club-outline", "cards-club", "cards-diamond-outline", "cards-diamond", "card-search-outline", "card-search", "cards-heart-outline", "cards-heart", "cards-outline", "cards-playing-club-multiple-outline", "cards-playing-club-multiple", "cards-playing-club-outline", "cards-playing-club", "cards-playing-diamond-multiple-outline", "cards-playing-diamond-multiple", "cards-playing-diamond-outline", "cards-playing-diamond", "cards-playing-heart-multiple-outline", "cards-playing-heart-multiple", "cards-playing-heart-outline", "cards-playing-heart", "cards-playing-outline", "cards-playing-spade-multiple-outline", "cards-playing-spade-multiple", "cards-playing-spade-outline", "cards-playing-spade", "cards-playing", "cards-spade-outline", "cards-spade", "cards", "cards-variant", "card", "card-text-outline", "card-text", "car-electric-outline", "car-electric", "car-emergency", "car-esp", "car-estate", "car-hatchback", "car-info", "car-key", "car-lifted-pickup", "car-light-alert", "car-light-dimmed", "car-light-fog", "car-light-high", "car-limousine", "car-multiple", "car-off", "car-outline", "car-parking-lights", "car-pickup", "carrot", "car-search-outline", "car-search", "car-seat-cooler", "car-seat-heater", "car-seat", "car-select", "car-settings", "car-shift-pattern", "car-side", "car-speed-limiter", "car-sports", "car", "cart-arrow-down", "cart-arrow-right", "cart-arrow-up", "cart-check", "cart-heart", "car-tire-alert", "cart-minus", "cart-off", "cart-outline", "cart-percent", "cart-plus", "car-traction-control", "cart-remove", "cart", "car-turbocharger", "cart-variant", "car-wash", "car-windshield-outline", "car-windshield", "car-wireless", "car-wrench", "case-sensitive-alt", "cash-100", "cash-check", "cash-clock", "cash-fast", "cash-lock-open", "cash-lock", "cash-marker", "cash-minus", "cash-multiple", "cash-plus", "cash-refund", "cash-register", "cash-remove", "cash", "cash-sync", "cassette", "cast-audio", "cast-audio-variant", "cast-connected", "cast-education", "castle", "cast-off", "cast", "cast-variant", "cat", "cctv-off", "cctv", "ceiling-fan-light", "ceiling-fan", "ceiling-light-multiple-outline", "ceiling-light-multiple", "ceiling-light-outline", "ceiling-light", "cellphone-arrow-down", "cellphone-arrow-down-variant", "cellphone-basic", "cellphone-charging", "cellphone-check", "cellphone-cog", "cellphone-dock", "cellphone-information", "cellphone-key", "cellphone-link-off", "cellphone-link", "cellphone-lock", "cellphone-marker", "cellphone-message-off", "cellphone-message", "cellphone-nfc-off", "cellphone-nfc", "cellphone-off", "cellphone-play", "cellphone-remove", "cellphone-screenshot", "cellphone-settings", "cellphone-sound", "cellphone", "cellphone-text", "cellphone-wireless", "centos", "certificate-outline", "certificate", "chair-rolling", "chair-school", "chandelier", "charity", "chart-arc", "chart-areaspline", "chart-areaspline-variant", "chart-bar-stacked", "chart-bar", "chart-bell-curve-cumulative", "chart-bell-curve", "chart-box-outline", "chart-box-plus-outline", "chart-box", "chart-bubble", "chart-donut", "chart-donut-variant", "chart-gantt", "chart-histogram", "chart-line-stacked", "chart-line", "chart-line-variant", "chart-multiline", "chart-multiple", "chart-pie-outline", "chart-pie", "chart-ppf", "chart-sankey", "chart-sankey-variant", "chart-scatter-plot-hexbin", "chart-scatter-plot", "chart-timeline", "chart-timeline-variant-shimmer", "chart-timeline-variant", "chart-tree", "chart-waterfall", "chat-alert-outline", "chat-alert", "chat-minus-outline", "chat-minus", "chat-outline", "chat-plus-outline", "chat-plus", "chat-processing-outline", "chat-processing", "chat-question-outline", "chat-question", "chat-remove-outline", "chat-remove", "chat-sleep-outline", "chat-sleep", "chat", "check-all", "check-bold", "checkbook", "checkbox-blank-badge-outline", "checkbox-blank-badge", "checkbox-blank-circle-outline", "checkbox-blank-circle", "checkbox-blank-off-outline", "checkbox-blank-off", "checkbox-blank-outline", "checkbox-blank", "checkbox-intermediate", "checkbox-intermediate-variant", "checkbox-marked-circle-outline", "checkbox-marked-circle-plus-outline", "checkbox-marked-circle", "checkbox-marked-outline", "checkbox-marked", "checkbox-multiple-blank-circle-outline", "checkbox-multiple-blank-circle", "checkbox-multiple-blank-outline", "checkbox-multiple-blank", "checkbox-multiple-marked-circle-outline", "checkbox-multiple-marked-circle", "checkbox-multiple-marked-outline", "checkbox-multiple-marked", "checkbox-multiple-outline", "checkbox-outline", "check-circle-outline", "check-circle", "check-decagram-outline", "check-decagram", "checkerboard-minus", "checkerboard-plus", "checkerboard-remove", "checkerboard", "check-network-outline", "check-network", "check-outline", "check", "check-underline-circle-outline", "check-underline-circle", "check-underline", "cheese-off", "cheese", "chef-hat", "chemical-weapon", "chess-bishop", "chess-king", "chess-knight", "chess-pawn", "chess-queen", "chess-rook", "chevron-double-down", "chevron-double-left", "chevron-double-right", "chevron-double-up", "chevron-down-box-outline", "chevron-down-box", "chevron-down-circle-outline", "chevron-down-circle", "chevron-down", "chevron-left-box-outline", "chevron-left-box", "chevron-left-circle-outline", "chevron-left-circle", "chevron-left", "chevron-right-box-outline", "chevron-right-box", "chevron-right-circle-outline", "chevron-right-circle", "chevron-right", "chevron-triple-down", "chevron-triple-left", "chevron-triple-right", "chevron-triple-up", "chevron-up-box-outline", "chevron-up-box", "chevron-up-circle-outline", "chevron-up-circle", "chevron-up", "chili-alert-outline", "chili-alert", "chili-hot-outline", "chili-hot", "chili-medium-outline", "chili-medium", "chili-mild-outline", "chili-mild", "chili-off-outline", "chili-off", "chip", "church-outline", "church", "cigar-off", "cigar", "circle-box-outline", "circle-box", "circle-double", "circle-edit-outline", "circle-expand", "circle-half-full", "circle-half", "circle-medium", "circle-multiple-outline", "circle-multiple", "circle-off-outline", "circle-opacity", "circle-outline", "circle-slice-1", "circle-slice-2", "circle-slice-3", "circle-slice-4", "circle-slice-5", "circle-slice-6", "circle-slice-7", "circle-slice-8", "circle-small", "circle", "circular-saw", "city", "city-variant-outline", "city-variant", "clipboard-account-outline", "clipboard-account", "clipboard-alert-outline", "clipboard-alert", "clipboard-arrow-down-outline", "clipboard-arrow-down", "clipboard-arrow-left-outline", "clipboard-arrow-left", "clipboard-arrow-right-outline", "clipboard-arrow-right", "clipboard-arrow-up-outline", "clipboard-arrow-up", "clipboard-check-multiple-outline", "clipboard-check-multiple", "clipboard-check-outline", "clipboard-check", "clipboard-clock-outline", "clipboard-clock", "clipboard-edit-outline", "clipboard-edit", "clipboard-file-outline", "clipboard-file", "clipboard-flow-outline", "clipboard-flow", "clipboard-list-outline", "clipboard-list", "clipboard-minus-outline", "clipboard-minus", "clipboard-multiple-outline", "clipboard-multiple", "clipboard-off-outline", "clipboard-off", "clipboard-outline", "clipboard-play-multiple-outline", "clipboard-play-multiple", "clipboard-play-outline", "clipboard-play", "clipboard-plus-outline", "clipboard-plus", "clipboard-pulse-outline", "clipboard-pulse", "clipboard-remove-outline", "clipboard-remove", "clipboard-search-outline", "clipboard-search", "clipboard", "clipboard-text-clock-outline", "clipboard-text-clock", "clipboard-text-multiple-outline", "clipboard-text-multiple", "clipboard-text-off-outline", "clipboard-text-off", "clipboard-text-outline", "clipboard-text-play-outline", "clipboard-text-play", "clipboard-text-search-outline", "clipboard-text-search", "clipboard-text", "clippy", "clock-alert-outline", "clock-alert", "clock-check-outline", "clock-check", "clock-digital", "clock-edit-outline", "clock-edit", "clock-end", "clock-fast", "clock-in", "clock-minus-outline", "clock-minus", "clock-outline", "clock-out", "clock-plus-outline", "clock-plus", "clock-remove-outline", "clock-remove", "clock-start", "clock", "clock-time-eight-outline", "clock-time-eight", "clock-time-eleven-outline", "clock-time-eleven", "clock-time-five-outline", "clock-time-five", "clock-time-four-outline", "clock-time-four", "clock-time-nine-outline", "clock-time-nine", "clock-time-one-outline", "clock-time-one", "clock-time-seven-outline", "clock-time-seven", "clock-time-six-outline", "clock-time-six", "clock-time-ten-outline", "clock-time-ten", "clock-time-three-outline", "clock-time-three", "clock-time-twelve-outline", "clock-time-twelve", "clock-time-two-outline", "clock-time-two", "close-box-multiple-outline", "close-box-multiple", "close-box-outline", "close-box", "close-circle-multiple-outline", "close-circle-multiple", "close-circle-outline", "close-circle", "closed-caption-outline", "closed-caption", "close-network-outline", "close-network", "close-octagon-outline", "close-octagon", "close-outline", "close", "close-thick", "cloud-alert-outline", "cloud-alert", "cloud-arrow-down-outline", "cloud-arrow-down", "cloud-arrow-left-outline", "cloud-arrow-left", "cloud-arrow-right-outline", "cloud-arrow-right", "cloud-arrow-up-outline", "cloud-arrow-up", "cloud-braces", "cloud-cancel-outline", "cloud-cancel", "cloud-check-outline", "cloud-check", "cloud-check-variant-outline", "cloud-check-variant", "cloud-circle-outline", "cloud-circle", "cloud-clock-outline", "cloud-clock", "cloud-cog-outline", "cloud-cog", "cloud-download-outline", "cloud-download", "cloud-lock-open-outline", "cloud-lock-open", "cloud-lock-outline", "cloud-lock", "cloud-minus-outline", "cloud-minus", "cloud-off-outline", "cloud-off", "cloud-outline", "cloud-percent-outline", "cloud-percent", "cloud-plus-outline", "cloud-plus", "cloud-print-outline", "cloud-print", "cloud-question-outline", "cloud-question", "cloud-refresh-outline", "cloud-refresh", "cloud-refresh-variant-outline", "cloud-refresh-variant", "cloud-remove-outline", "cloud-remove", "cloud-search-outline", "cloud-search", "clouds", "cloud", "cloud-sync-outline", "cloud-sync", "cloud-tags", "cloud-upload-outline", "cloud-upload", "clover", "coach-lamp", "coach-lamp-variant", "coat-rack", "code-array", "code-braces-box", "code-braces", "code-brackets", "code-equal", "code-greater-than-or-equal", "code-greater-than", "code-json", "code-less-than-or-equal", "code-less-than", "code-not-equal", "code-not-equal-variant", "code-parentheses-box", "code-parentheses", "codepen", "code-string", "code-tags-check", "code-tags", "coffee-maker-check-outline", "coffee-maker-check", "coffee-maker-outline", "coffee-maker", "coffee-off-outline", "coffee-off", "coffee-outline", "coffee", "coffee-to-go-outline", "coffee-to-go", "coffin", "cog-box", "cog-clockwise", "cog-counterclockwise", "cog-off-outline", "cog-off", "cog-outline", "cog-pause-outline", "cog-pause", "cog-play-outline", "cog-play", "cog-refresh-outline", "cog-refresh", "cogs", "cog-stop-outline", "cog-stop", "cog", "cog-sync-outline", "cog-sync", "cog-transfer-outline", "cog-transfer", "collage", "collapse-all-outline", "collapse-all", "color-helper", "comma-box-outline", "comma-box", "comma-circle-outline", "comma-circle", "comma", "comment-account-outline", "comment-account", "comment-alert-outline", "comment-alert", "comment-arrow-left-outline", "comment-arrow-left", "comment-arrow-right-outline", "comment-arrow-right", "comment-bookmark-outline", "comment-bookmark", "comment-check-outline", "comment-check", "comment-edit-outline", "comment-edit", "comment-eye-outline", "comment-eye", "comment-flash-outline", "comment-flash", "comment-minus-outline", "comment-minus", "comment-multiple-outline", "comment-multiple", "comment-off-outline", "comment-off", "comment-outline", "comment-plus-outline", "comment-plus", "comment-processing-outline", "comment-processing", "comment-question-outline", "comment-question", "comment-quote-outline", "comment-quote", "comment-remove-outline", "comment-remove", "comment-search-outline", "comment-search", "comment", "comment-text-multiple-outline", "comment-text-multiple", "comment-text-outline", "comment-text", "compare-horizontal", "compare-remove", "compare", "compare-vertical", "compass-off-outline", "compass-off", "compass-outline", "compass-rose", "compass", "compost", "cone-off", "cone", "connection", "console-line", "console-network-outline", "console-network", "console", "consolidate", "contactless-payment-circle-outline", "contactless-payment-circle", "contactless-payment", "contacts-outline", "contacts", "contain-end", "contain-start", "contain", "content-copy", "content-cut", "content-duplicate", "content-paste", "content-save-alert-outline", "content-save-alert", "content-save-all-outline", "content-save-all", "content-save-check-outline", "content-save-check", "content-save-cog-outline", "content-save-cog", "content-save-edit-outline", "content-save-edit", "content-save-minus-outline", "content-save-minus", "content-save-move-outline", "content-save-move", "content-save-off-outline", "content-save-off", "content-save-outline", "content-save-plus-outline", "content-save-plus", "content-save-settings-outline", "content-save-settings", "content-save", "contrast-box", "contrast-circle", "contrast", "controller-classic-outline", "controller-classic", "controller-off", "controller", "cookie-alert-outline", "cookie-alert", "cookie-check-outline", "cookie-check", "cookie-clock-outline", "cookie-clock", "cookie-cog-outline", "cookie-cog", "cookie-edit-outline", "cookie-edit", "cookie-lock-outline", "cookie-lock", "cookie-minus-outline", "cookie-minus", "cookie-off-outline", "cookie-off", "cookie-outline", "cookie-plus-outline", "cookie-plus", "cookie-refresh-outline", "cookie-refresh", "cookie-remove-outline", "cookie-remove", "cookie-settings-outline", "cookie-settings", "cookie", "coolant-temperature", "copyleft", "copyright", "cordova", "corn-off", "corn", "cosine-wave", "counter", "countertop-outline", "countertop", "cow-off", "cow", "cpu-32-bit", "cpu-64-bit", "cradle-outline", "cradle", "crane", "creation", "creative-commons", "credit-card-check-outline", "credit-card-check", "credit-card-chip-outline", "credit-card-chip", "credit-card-clock-outline", "credit-card-clock", "credit-card-edit-outline", "credit-card-edit", "credit-card-fast-outline", "credit-card-fast", "credit-card-lock-outline", "credit-card-lock", "credit-card-marker-outline", "credit-card-marker", "credit-card-minus-outline", "credit-card-minus", "credit-card-multiple-outline", "credit-card-multiple", "credit-card-off-outline", "credit-card-off", "credit-card-outline", "credit-card-plus-outline", "credit-card-plus", "credit-card-refresh-outline", "credit-card-refresh", "credit-card-refund-outline", "credit-card-refund", "credit-card-remove-outline", "credit-card-remove", "credit-card-scan-outline", "credit-card-scan", "credit-card-search-outline", "credit-card-search", "credit-card-settings-outline", "credit-card-settings", "credit-card", "credit-card-sync-outline", "credit-card-sync", "credit-card-wireless-off-outline", "credit-card-wireless-off", "credit-card-wireless-outline", "credit-card-wireless", "cricket", "crop-free", "crop-landscape", "crop-portrait", "crop-rotate", "crop-square", "crop", "cross-bolnisi", "cross-celtic", "crosshairs-gps", "crosshairs-off", "crosshairs-question", "crosshairs", "cross-outline", "cross", "crowd", "crown-circle-outline", "crown-circle", "crown-outline", "crown", "cryengine", "crystal-ball", "cube-off-outline", "cube-off", "cube-outline", "cube-scan", "cube-send", "cube", "cube-unfolded", "cupboard-outline", "cupboard", "cupcake", "cup-off-outline", "cup-off", "cup-outline", "cup", "cup-water", "curling", "currency-bdt", "currency-brl", "currency-btc", "currency-cny", "currency-eth", "currency-eur-off", "currency-eur", "currency-fra", "currency-gbp", "currency-ils", "currency-inr", "currency-jpy", "currency-krw", "currency-kzt", "currency-mnt", "currency-ngn", "currency-php", "currency-rial", "currency-rub", "currency-rupee", "currency-sign", "currency-thb", "currency-try", "currency-twd", "currency-uah", "currency-usd-off", "currency-usd", "current-ac", "current-dc", "cursor-default-click-outline", "cursor-default-click", "cursor-default-gesture-outline", "cursor-default-gesture", "cursor-default-outline", "cursor-default", "cursor-move", "cursor-pointer", "cursor-text", "curtains-closed", "curtains", "cylinder-off", "cylinder", "dance-ballroom", "dance-pole", "database-alert-outline", "database-alert", "database-arrow-down-outline", "database-arrow-down", "database-arrow-left-outline", "database-arrow-left", "database-arrow-right-outline", "database-arrow-right", "database-arrow-up-outline", "database-arrow-up", "database-check-outline", "database-check", "database-clock-outline", "database-clock", "database-cog-outline", "database-cog", "database-edit-outline", "database-edit", "database-export-outline", "database-export", "database-eye-off-outline", "database-eye-off", "database-eye-outline", "database-eye", "database-import-outline", "database-import", "database-lock-outline", "database-lock", "database-marker-outline", "database-marker", "database-minus-outline", "database-minus", "database-off-outline", "database-off", "database-outline", "database-plus-outline", "database-plus", "database-refresh-outline", "database-refresh", "database-remove-outline", "database-remove", "database-search-outline", "database-search", "database-settings-outline", "database-settings", "database", "database-sync-outline", "database-sync", "data-matrix-edit", "data-matrix-minus", "data-matrix-plus", "data-matrix-remove", "data-matrix-scan", "data-matrix", "deathly-hallows", "death-star", "death-star-variant", "debian", "debug-step-into", "debug-step-out", "debug-step-over", "decagram-outline", "decagram", "decimal-comma-decrease", "decimal-comma-increase", "decimal-comma", "decimal-decrease", "decimal-increase", "decimal", "delete-alert-outline", "delete-alert", "delete-circle-outline", "delete-circle", "delete-clock-outline", "delete-clock", "delete-empty-outline", "delete-empty", "delete-forever-outline", "delete-forever", "delete-off-outline", "delete-off", "delete-outline", "delete-restore", "delete", "delete-sweep-outline", "delete-sweep", "delete-variant", "delta", "desk-lamp-off", "desk-lamp-on", "desk-lamp", "deskphone", "desk", "desktop-classic", "desktop-tower-monitor", "desktop-tower", "details", "developer-board", "deviantart", "devices", "dev-to", "dharmachakra", "diabetes", "dialpad", "diameter-outline", "diameter", "diameter-variant", "diamond-outline", "diamond-stone", "diamond", "dice-1-outline", "dice-1", "dice-2-outline", "dice-2", "dice-3-outline", "dice-3", "dice-4-outline", "dice-4", "dice-5-outline", "dice-5", "dice-6-outline", "dice-6", "dice-d10-outline", "dice-d10", "dice-d12-outline", "dice-d12", "dice-d20-outline", "dice-d20", "dice-d4-outline", "dice-d4", "dice-d6-outline", "dice-d6", "dice-d8-outline", "dice-d8", "dice-multiple-outline", "dice-multiple", "digital-ocean", "dip-switch", "directions-fork", "directions", "disc-alert", "disc-player", "disc", "dishwasher-alert", "dishwasher-off", "dishwasher", "disqus", "distribute-horizontal-center", "distribute-horizontal-left", "distribute-horizontal-right", "distribute-vertical-bottom", "distribute-vertical-center", "distribute-vertical-top", "diversify", "diving-flippers", "diving-helmet", "diving-scuba-flag", "diving-scuba-mask", "diving-scuba", "diving-scuba-tank-multiple", "diving-scuba-tank", "diving-snorkel", "diving", "division-box", "division", "dlna", "dna", "dns-outline", "dns", "dock-bottom", "docker", "dock-left", "dock-right", "dock-top", "dock-window", "doctor", "dog-service", "dog-side-off", "dog-side", "dog", "dolby", "dolly", "dolphin", "domain-off", "domain-plus", "domain-remove", "domain", "dome-light", "domino-mask", "donkey", "doorbell", "doorbell-video", "door-closed-lock", "door-closed", "door-open", "door-sliding-lock", "door-sliding-open", "door-sliding", "door", "dot-net", "dots-circle", "dots-grid", "dots-hexagon", "dots-horizontal-circle-outline", "dots-horizontal-circle", "dots-horizontal", "dots-square", "dots-triangle", "dots-vertical-circle-outline", "dots-vertical-circle", "dots-vertical", "download-box-outline", "download-box", "download-circle-outline", "download-circle", "download-lock-outline", "download-lock", "download-multiple", "download-network-outline", "download-network", "download-off-outline", "download-off", "download-outline", "download", "drag-horizontal", "drag-horizontal-variant", "drag", "drag-variant", "drag-vertical", "drag-vertical-variant", "drama-masks", "drawing-box", "drawing", "draw-pen", "draw", "dresser-outline", "dresser", "drone", "dropbox", "drupal", "duck", "dumbbell", "dump-truck", "earbuds-off-outline", "earbuds-off", "earbuds-outline", "earbuds", "ear-hearing-loop", "ear-hearing-off", "ear-hearing", "earth-arrow-right", "earth-box-minus", "earth-box-off", "earth-box-plus", "earth-box-remove", "earth-box", "earth-minus", "earth-off", "earth-plus", "earth-remove", "earth", "egg-easter", "egg-fried", "egg-off-outline", "egg-off", "egg-outline", "egg", "eiffel-tower", "eight-track", "eject-circle-outline", "eject-circle", "eject-outline", "eject", "electric-switch-closed", "electric-switch", "electron-framework", "elephant", "elevation-decline", "elevation-rise", "elevator-down", "elevator-passenger-off-outline", "elevator-passenger-off", "elevator-passenger-outline", "elevator-passenger", "elevator", "elevator-up", "ellipse-outline", "ellipse", "email-alert-outline", "email-alert", "email-arrow-left-outline", "email-arrow-left", "email-arrow-right-outline", "email-arrow-right", "email-box", "email-check-outline", "email-check", "email-edit-outline", "email-edit", "email-fast-outline", "email-fast", "email-lock-outline", "email-lock", "email-mark-as-unread", "email-minus-outline", "email-minus", "email-multiple-outline", "email-multiple", "email-newsletter", "email-off-outline", "email-off", "email-open-multiple-outline", "email-open-multiple", "email-open-outline", "email-open", "email-outline", "email-plus-outline", "email-plus", "email-remove-outline", "email-remove", "email-seal-outline", "email-seal", "email-search-outline", "email-search", "email", "email-sync-outline", "email-sync", "email-variant", "ember", "emby", "emoticon-angry-outline", "emoticon-angry", "emoticon-confused-outline", "emoticon-confused", "emoticon-cool-outline", "emoticon-cool", "emoticon-cry-outline", "emoticon-cry", "emoticon-dead-outline", "emoticon-dead", "emoticon-devil-outline", "emoticon-devil", "emoticon-excited-outline", "emoticon-excited", "emoticon-frown-outline", "emoticon-frown", "emoticon-happy-outline", "emoticon-happy", "emoticon-kiss-outline", "emoticon-kiss", "emoticon-lol-outline", "emoticon-lol", "emoticon-neutral-outline", "emoticon-neutral", "emoticon-outline", "emoticon-poop-outline", "emoticon-poop", "emoticon-sad-outline", "emoticon-sad", "emoticon-sick-outline", "emoticon-sick", "emoticon", "emoticon-tongue-outline", "emoticon-tongue", "emoticon-wink-outline", "emoticon-wink", "engine-off-outline", "engine-off", "engine-outline", "engine", "epsilon", "equal-box", "equalizer-outline", "equalizer", "equal", "eraser", "eraser-variant", "escalator-box", "escalator-down", "escalator", "escalator-up", "eslint", "ethereum", "ethernet-cable-off", "ethernet-cable", "ethernet", "et", "evernote", "ev-plug-ccs1", "ev-plug-ccs2", "ev-plug-chademo", "ev-plug-tesla", "ev-plug-type1", "ev-plug-type2", "ev-station", "excavator", "exclamation", "exclamation-thick", "exit-run", "exit-to-app", "expand-all-outline", "expand-all", "expansion-card", "expansion-card-variant", "exponent-box", "exponent", "export", "export-variant", "eye-arrow-left-outline", "eye-arrow-left", "eye-arrow-right-outline", "eye-arrow-right", "eye-check-outline", "eye-check", "eye-circle-outline", "eye-circle", "eyedropper-minus", "eyedropper-off", "eyedropper-plus", "eyedropper-remove", "eyedropper", "eyedropper-variant", "eye-lock-open-outline", "eye-lock-open", "eye-lock-outline", "eye-lock", "eye-minus-outline", "eye-minus", "eye-off-outline", "eye-off", "eye-outline", "eye-plus-outline", "eye-plus", "eye-refresh-outline", "eye-refresh", "eye-remove-outline", "eye-remove", "eye-settings-outline", "eye-settings", "eye", "face-agent", "facebook-gaming", "facebook-messenger", "facebook", "facebook-workplace", "face-man-outline", "face-man-profile", "face-man-shimmer-outline", "face-man-shimmer", "face-man", "face-mask-outline", "face-mask", "face-recognition", "face-woman-outline", "face-woman-profile", "face-woman-shimmer-outline", "face-woman-shimmer", "face-woman", "factory", "family-tree", "fan-alert", "fan-auto", "fan-chevron-down", "fan-chevron-up", "fan-clock", "fan-minus", "fan-off", "fan-plus", "fan-remove", "fan-speed-1", "fan-speed-2", "fan-speed-3", "fan", "fast-forward-10", "fast-forward-15", "fast-forward-30", "fast-forward-45", "fast-forward-5", "fast-forward-60", "fast-forward-outline", "fast-forward", "faucet", "faucet-variant", "fax", "feather", "feature-search-outline", "feature-search", "fedora", "fence-electric", "fence", "fencing", "ferris-wheel", "ferry", "file-account-outline", "file-account", "file-alert-outline", "file-alert", "file-arrow-left-right-outline", "file-arrow-left-right", "file-arrow-up-down-outline", "file-arrow-up-down", "file-cabinet", "file-cad-box", "file-cad", "file-cancel-outline", "file-cancel", "file-certificate-outline", "file-certificate", "file-chart-check-outline", "file-chart-check", "file-chart-outline", "file-chart", "file-check-outline", "file-check", "file-clock-outline", "file-clock", "file-cloud-outline", "file-cloud", "file-code-outline", "file-code", "file-cog-outline", "file-cog", "file-compare", "file-delimited-outline", "file-delimited", "file-document-alert-outline", "file-document-alert", "file-document-arrow-right-outline", "file-document-arrow-right", "file-document-check-outline", "file-document-check", "file-document-edit-outline", "file-document-edit", "file-document-minus-outline", "file-document-minus", "file-document-multiple-outline", "file-document-multiple", "file-document-outline", "file-document-plus-outline", "file-document-plus", "file-document-remove-outline", "file-document-remove", "file-document", "file-download-outline", "file-download", "file-edit-outline", "file-edit", "file-excel-box-outline", "file-excel-box", "file-excel-outline", "file-excel", "file-export-outline", "file-export", "file-eye-outline", "file-eye", "file-find-outline", "file-find", "file-gif-box", "file-hidden", "file-image-marker-outline", "file-image-marker", "file-image-minus-outline", "file-image-minus", "file-image-outline", "file-image-plus-outline", "file-image-plus", "file-image-remove-outline", "file-image-remove", "file-image", "file-import-outline", "file-import", "file-jpg-box", "file-key-outline", "file-key", "file-link-outline", "file-link", "file-lock-open-outline", "file-lock-open", "file-lock-outline", "file-lock", "file-marker-outline", "file-marker", "file-minus-outline", "file-minus", "file-move-outline", "file-move", "file-multiple-outline", "file-multiple", "file-music-outline", "file-music", "file-outline", "file-pdf-box", "file-percent-outline", "file-percent", "file-phone-outline", "file-phone", "file-plus-outline", "file-plus", "file-png-box", "file-powerpoint-box-outline", "file-powerpoint-box", "file-powerpoint-outline", "file-powerpoint", "file-presentation-box", "file-question-outline", "file-question", "file-refresh-outline", "file-refresh", "file-remove-outline", "file-remove", "file-replace-outline", "file-replace", "file-restore-outline", "file-restore", "file-rotate-left-outline", "file-rotate-left", "file-rotate-right-outline", "file-rotate-right", "files", "file-search-outline", "file-search", "file-send-outline", "file-send", "file-settings-outline", "file-settings", "file-sign", "file-star-outline", "file-star", "file", "file-swap-outline", "file-swap", "file-sync-outline", "file-sync", "file-table-box-multiple-outline", "file-table-box-multiple", "file-table-box-outline", "file-table-box", "file-table-outline", "file-table", "file-tree-outline", "file-tree", "file-undo-outline", "file-undo", "file-upload-outline", "file-upload", "file-video-outline", "file-video", "file-word-box-outline", "file-word-box", "file-word-outline", "file-word", "file-xml-box", "filmstrip-box-multiple", "filmstrip-box", "filmstrip-off", "filmstrip", "film", "filter-check-outline", "filter-check", "filter-cog-outline", "filter-cog", "filter-menu-outline", "filter-menu", "filter-minus-outline", "filter-minus", "filter-multiple-outline", "filter-multiple", "filter-off-outline", "filter-off", "filter-outline", "filter-plus-outline", "filter-plus", "filter-remove-outline", "filter-remove", "filter-settings-outline", "filter-settings", "filter", "filter-variant-minus", "filter-variant-plus", "filter-variant-remove", "filter-variant", "finance", "find-replace", "fingerprint-off", "fingerprint", "fire-alert", "firebase", "fire-circle", "fire-extinguisher", "firefox", "fire-hydrant-alert", "fire-hydrant-off", "fire-hydrant", "fire-off", "fireplace-off", "fireplace", "fire", "fire-truck", "firewire", "firework-off", "firework", "fishbowl-outline", "fishbowl", "fish-off", "fish", "fit-to-page-outline", "fit-to-page", "fit-to-screen-outline", "fit-to-screen", "flag-checkered", "flag-minus-outline", "flag-minus", "flag-off-outline", "flag-off", "flag-outline", "flag-plus-outline", "flag-plus", "flag-remove-outline", "flag-remove", "flag", "flag-triangle", "flag-variant-minus-outline", "flag-variant-minus", "flag-variant-off-outline", "flag-variant-off", "flag-variant-outline", "flag-variant-plus-outline", "flag-variant-plus", "flag-variant-remove-outline", "flag-variant-remove", "flag-variant", "flare", "flash-alert-outline", "flash-alert", "flash-auto", "flashlight-off", "flashlight", "flash-off-outline", "flash-off", "flash-outline", "flash-red-eye", "flash", "flash-triangle-outline", "flash-triangle", "flask-empty-minus-outline", "flask-empty-minus", "flask-empty-off-outline", "flask-empty-off", "flask-empty-outline", "flask-empty-plus-outline", "flask-empty-plus", "flask-empty-remove-outline", "flask-empty-remove", "flask-empty", "flask-minus-outline", "flask-minus", "flask-off-outline", "flask-off", "flask-outline", "flask-plus-outline", "flask-plus", "flask-remove-outline", "flask-remove", "flask-round-bottom-empty-outline", "flask-round-bottom-empty", "flask-round-bottom-outline", "flask-round-bottom", "flask", "fleur-de-lis", "flip-horizontal", "flip-to-back", "flip-to-front", "flip-vertical", "floor-lamp-dual-outline", "floor-lamp-dual", "floor-lamp-outline", "floor-lamp", "floor-lamp-torchiere-outline", "floor-lamp-torchiere", "floor-lamp-torchiere-variant-outline", "floor-lamp-torchiere-variant", "floor-plan", "floppy", "floppy-variant", "flower-outline", "flower-pollen-outline", "flower-pollen", "flower-poppy", "flower", "flower-tulip-outline", "flower-tulip", "focus-auto", "focus-field-horizontal", "focus-field", "focus-field-vertical", "folder-account-outline", "folder-account", "folder-alert-outline", "folder-alert", "folder-arrow-down-outline", "folder-arrow-down", "folder-arrow-left-outline", "folder-arrow-left-right-outline", "folder-arrow-left-right", "folder-arrow-left", "folder-arrow-right-outline", "folder-arrow-right", "folder-arrow-up-down-outline", "folder-arrow-up-down", "folder-arrow-up-outline", "folder-arrow-up", "folder-cancel-outline", "folder-cancel", "folder-check-outline", "folder-check", "folder-clock-outline", "folder-clock", "folder-cog-outline", "folder-cog", "folder-download-outline", "folder-download", "folder-edit-outline", "folder-edit", "folder-eye-outline", "folder-eye", "folder-file-outline", "folder-file", "folder-google-drive", "folder-heart-outline", "folder-heart", "folder-hidden", "folder-home-outline", "folder-home", "folder-image", "folder-information-outline", "folder-information", "folder-key-network-outline", "folder-key-network", "folder-key-outline", "folder-key", "folder-lock-open-outline", "folder-lock-open", "folder-lock-outline", "folder-lock", "folder-marker-outline", "folder-marker", "folder-minus-outline", "folder-minus", "folder-move-outline", "folder-move", "folder-multiple-image", "folder-multiple-outline", "folder-multiple-plus-outline", "folder-multiple-plus", "folder-multiple", "folder-music-outline", "folder-music", "folder-network-outline", "folder-network", "folder-off-outline", "folder-off", "folder-open-outline", "folder-open", "folder-outline", "folder-play-outline", "folder-play", "folder-plus-outline", "folder-plus", "folder-pound-outline", "folder-pound", "folder-question-outline", "folder-question", "folder-refresh-outline", "folder-refresh", "folder-remove-outline", "folder-remove", "folder-search-outline", "folder-search", "folder-settings-outline", "folder-settings", "folder-star-multiple-outline", "folder-star-multiple", "folder-star-outline", "folder-star", "folder", "folder-swap-outline", "folder-swap", "folder-sync-outline", "folder-sync", "folder-table-outline", "folder-table", "folder-text-outline", "folder-text", "folder-upload-outline", "folder-upload", "folder-wrench-outline", "folder-wrench", "folder-zip-outline", "folder-zip", "font-awesome", "food-apple-outline", "food-apple", "food-croissant", "food-drumstick-off-outline", "food-drumstick-off", "food-drumstick-outline", "food-drumstick", "food-fork-drink", "food-halal", "food-hot-dog", "food-kosher", "food-off-outline", "food-off", "food-outline", "food-steak-off", "food-steak", "food", "food-takeout-box-outline", "food-takeout-box", "food-turkey", "food-variant-off", "food-variant", "football-australian", "football-helmet", "football", "foot-print", "forest", "forklift", "format-align-bottom", "format-align-center", "format-align-justify", "format-align-left", "format-align-middle", "format-align-right", "format-align-top", "format-annotation-minus", "format-annotation-plus", "format-bold", "format-clear", "format-color-fill", "format-color-highlight", "format-color-marker-cancel", "format-color-text", "format-columns", "format-float-center", "format-float-left", "format-float-none", "format-float-right", "format-font-size-decrease", "format-font-size-increase", "format-font", "format-header-1", "format-header-2", "format-header-3", "format-header-4", "format-header-5", "format-header-6", "format-header-decrease", "format-header-equal", "format-header-increase", "format-header-pound", "format-horizontal-align-center", "format-horizontal-align-left", "format-horizontal-align-right", "format-indent-decrease", "format-indent-increase", "format-italic", "format-letter-case-lower", "format-letter-case", "format-letter-case-upper", "format-letter-ends-with", "format-letter-matches", "format-letter-spacing", "format-letter-spacing-variant", "format-letter-starts-with", "format-line-height", "format-line-spacing", "format-line-style", "format-line-weight", "format-list-bulleted-square", "format-list-bulleted", "format-list-bulleted-triangle", "format-list-bulleted-type", "format-list-checkbox", "format-list-checks", "format-list-group-plus", "format-list-group", "format-list-numbered-rtl", "format-list-numbered", "format-list-text", "format-overline", "format-page-break", "format-page-split", "format-paint", "format-paragraph-spacing", "format-paragraph", "format-pilcrow-arrow-left", "format-pilcrow-arrow-right", "format-pilcrow", "format-quote-close-outline", "format-quote-close", "format-quote-open-outline", "format-quote-open", "format-rotate-90", "format-section", "format-size", "format-strikethrough", "format-strikethrough-variant", "format-subscript", "format-superscript", "format-textbox", "format-text-rotation-angle-down", "format-text-rotation-angle-up", "format-text-rotation-down", "format-text-rotation-down-vertical", "format-text-rotation-none", "format-text-rotation-up", "format-text-rotation-vertical", "format-text", "format-text-variant-outline", "format-text-variant", "format-text-wrapping-clip", "format-text-wrapping-overflow", "format-text-wrapping-wrap", "format-title", "format-underline", "format-underline-wavy", "format-vertical-align-bottom", "format-vertical-align-center", "format-vertical-align-top", "format-wrap-inline", "format-wrap-square", "format-wrap-tight", "format-wrap-top-bottom", "form-dropdown", "form-select", "form-textarea", "form-textbox-lock", "form-textbox-password", "form-textbox", "forum-minus-outline", "forum-minus", "forum-outline", "forum-plus-outline", "forum-plus", "forum-remove-outline", "forum-remove", "forum", "forwardburger", "forward", "fountain-pen", "fountain-pen-tip", "fountain", "fraction-one-half", "freebsd", "french-fries", "frequently-asked-questions", "fridge-alert-outline", "fridge-alert", "fridge-bottom", "fridge-industrial-alert-outline", "fridge-industrial-alert", "fridge-industrial-off-outline", "fridge-industrial-off", "fridge-industrial-outline", "fridge-industrial", "fridge-off-outline", "fridge-off", "fridge-outline", "fridge", "fridge-top", "fridge-variant-alert-outline", "fridge-variant-alert", "fridge-variant-off-outline", "fridge-variant-off", "fridge-variant-outline", "fridge-variant", "fruit-cherries-off", "fruit-cherries", "fruit-citrus-off", "fruit-citrus", "fruit-grapes-outline", "fruit-grapes", "fruit-pear", "fruit-pineapple", "fruit-watermelon", "fuel-cell", "fuel", "fullscreen-exit", "fullscreen", "function", "function-variant", "furigana-horizontal", "furigana-vertical", "fuse-alert", "fuse-blade", "fuse-off", "fuse", "gamepad-circle-down", "gamepad-circle-left", "gamepad-circle-outline", "gamepad-circle-right", "gamepad-circle", "gamepad-circle-up", "gamepad-down", "gamepad-left", "gamepad-outline", "gamepad-right", "gamepad-round-down", "gamepad-round-left", "gamepad-round-outline", "gamepad-round-right", "gamepad-round", "gamepad-round-up", "gamepad-square-outline", "gamepad-square", "gamepad", "gamepad-up", "gamepad-variant-outline", "gamepad-variant", "gamma", "gantry-crane", "garage-alert", "garage-alert-variant", "garage-lock", "garage-open", "garage-open-variant", "garage", "garage-variant-lock", "garage-variant", "gas-burner", "gas-cylinder", "gas-station-off-outline", "gas-station-off", "gas-station-outline", "gas-station", "gate-alert", "gate-and", "gate-arrow-left", "gate-arrow-right", "gate-buffer", "gate-nand", "gate-nor", "gate-not", "gate-open", "gate-or", "gate", "gate-xnor", "gate-xor", "gatsby", "gauge-empty", "gauge-full", "gauge-low", "gauge", "gavel", "gender-female", "gender-male-female", "gender-male-female-variant", "gender-male", "gender-non-binary", "gender-transgender", "gentoo", "gesture-double-tap", "gesture-pinch", "gesture-spread", "gesture", "gesture-swipe-down", "gesture-swipe-horizontal", "gesture-swipe-left", "gesture-swipe-right", "gesture-swipe", "gesture-swipe-up", "gesture-swipe-vertical", "gesture-tap-box", "gesture-tap-button", "gesture-tap-hold", "gesture-tap", "gesture-two-double-tap", "gesture-two-tap", "ghost-off-outline", "ghost-off", "ghost-outline", "ghost", "gift-off-outline", "gift-off", "gift-open-outline", "gift-open", "gift-outline", "gift", "github", "gitlab", "git", "glass-cocktail-off", "glass-cocktail", "glasses", "glass-flute", "glass-fragile", "glass-mug-off", "glass-mug", "glass-mug-variant-off", "glass-mug-variant", "glass-pint-outline", "glass-stange", "glass-tulip", "glass-wine", "globe-light-outline", "globe-light", "globe-model", "gmail", "gnome", "gog", "go-kart", "go-kart-track", "gold", "golf-cart", "golf", "golf-tee", "gondola", "goodreads", "google-ads", "google-analytics", "google-assistant", "google-cardboard", "google-chrome", "google-circles-communities", "google-circles-extended", "google-circles-group", "google-circles", "google-classroom", "google-cloud", "google-downasaur", "google-drive", "google-earth", "google-fit", "google-glass", "google-hangouts", "google-keep", "google-lens", "google-maps", "google-my-business", "google-nearby", "google-play", "google-plus", "google-podcast", "google-spreadsheet", "google-street-view", "google", "google-translate", "gradient-horizontal", "gradient-vertical", "grain", "graph-outline", "graphql", "graph", "grass", "grave-stone", "grease-pencil", "greater-than-or-equal", "greater-than", "greenhouse", "grid-large", "grid-off", "grid", "grill-outline", "grill", "group", "guitar-acoustic", "guitar-electric", "guitar-pick-outline", "guitar-pick", "guy-fawkes-mask", "gymnastics", "hail", "hair-dryer-outline", "hair-dryer", "halloween", "hamburger-check", "hamburger-minus", "hamburger-off", "hamburger-plus", "hamburger-remove", "hamburger", "hammer-screwdriver", "hammer-sickle", "hammer", "hammer-wrench", "hand-back-left-off-outline", "hand-back-left-off", "hand-back-left-outline", "hand-back-left", "hand-back-right-off-outline", "hand-back-right-off", "hand-back-right-outline", "hand-back-right", "handball", "hand-clap-off", "hand-clap", "hand-coin-outline", "hand-coin", "handcuffs", "hand-cycle", "hand-extended-outline", "hand-extended", "hand-front-left-outline", "hand-front-left", "hand-front-right-outline", "hand-front-right", "hand-heart-outline", "hand-heart", "hand-okay", "hand-peace", "hand-peace-variant", "hand-pointing-down", "hand-pointing-left", "hand-pointing-right", "hand-pointing-up", "hand-saw", "handshake-outline", "handshake", "hands-pray", "hand-wash-outline", "hand-wash", "hand-water", "hand-wave-outline", "hand-wave", "hanger", "harddisk-plus", "harddisk-remove", "harddisk", "hard-hat", "hat-fedora", "hazard-lights", "hdmi-port", "hdr-off", "hdr", "head-alert-outline", "head-alert", "head-check-outline", "head-check", "head-cog-outline", "head-cog", "head-dots-horizontal-outline", "head-dots-horizontal", "head-flash-outline", "head-flash", "head-heart-outline", "head-heart", "head-lightbulb-outline", "head-lightbulb", "head-minus-outline", "head-minus", "head-outline", "headphones-bluetooth", "headphones-box", "headphones-off", "headphones-settings", "headphones", "head-plus-outline", "head-plus", "head-question-outline", "head-question", "head-remove-outline", "head-remove", "headset-dock", "headset-off", "headset", "head-snowflake-outline", "head-snowflake", "head", "head-sync-outline", "head-sync", "heart-box-outline", "heart-box", "heart-broken-outline", "heart-broken", "heart-circle-outline", "heart-circle", "heart-cog-outline", "heart-cog", "heart-flash", "heart-half-full", "heart-half-outline", "heart-half", "heart-minus-outline", "heart-minus", "heart-multiple-outline", "heart-multiple", "heart-off-outline", "heart-off", "heart-outline", "heart-plus-outline", "heart-plus", "heart-pulse", "heart-remove-outline", "heart-remove", "heart-settings-outline", "heart-settings", "heart", "heating-coil", "heat-pump-outline", "heat-pump", "heat-wave", "helicopter", "help-box-multiple-outline", "help-box-multiple", "help-box-outline", "help-box", "help-circle-outline", "help-circle", "help-network-outline", "help-network", "help-rhombus-outline", "help-rhombus", "help", "hexadecimal", "hexagon-multiple-outline", "hexagon-multiple", "hexagon-outline", "hexagon-slice-1", "hexagon-slice-2", "hexagon-slice-3", "hexagon-slice-4", "hexagon-slice-5", "hexagon-slice-6", "hexagon", "hexagram-outline", "hexagram", "high-definition-box", "high-definition", "highway", "hiking", "history", "hockey-puck", "hockey-sticks", "hololens", "home-account", "home-alert-outline", "home-alert", "home-analytics", "home-assistant", "home-automation", "home-battery-outline", "home-battery", "home-circle-outline", "home-circle", "home-city-outline", "home-city", "home-clock-outline", "home-clock", "home-edit-outline", "home-edit", "home-export-outline", "home-flood", "home-floor-0", "home-floor-1", "home-floor-2", "home-floor-3", "home-floor-a", "home-floor-b", "home-floor-g", "home-floor-l", "home-floor-negative-1", "home-group-minus", "home-group-plus", "home-group-remove", "home-group", "home-heart", "home-import-outline", "home-lightbulb-outline", "home-lightbulb", "home-lightning-bolt-outline", "home-lightning-bolt", "home-lock-open", "home-lock", "home-map-marker", "home-minus-outline", "home-minus", "home-modern", "home-off-outline", "home-off", "home-outline", "home-plus-outline", "home-plus", "home-remove-outline", "home-remove", "home-roof", "home-search-outline", "home-search", "home-silo-outline", "home-silo", "home", "home-switch-outline", "home-switch", "home-thermometer-outline", "home-thermometer", "home-variant-outline", "home-variant", "hook-off", "hook", "hoop-house", "hops", "horizontal-rotate-clockwise", "horizontal-rotate-counterclockwise", "horse-human", "horseshoe", "horse", "horse-variant-fast", "horse-variant", "hospital-box-outline", "hospital-box", "hospital-building", "hospital-marker", "hospital", "hot-tub", "hours-24", "hubspot", "hulu", "human-baby-changing-table", "human-cane", "human-capacity-decrease", "human-capacity-increase", "human-child", "human-dolly", "human-edit", "human-female-boy", "human-female-dance", "human-female-female", "human-female-girl", "human-female", "human-greeting-proximity", "human-greeting", "human-greeting-variant", "human-handsdown", "human-handsup", "human-male-board-poll", "human-male-board", "human-male-boy", "human-male-child", "human-male-female-child", "human-male-female", "human-male-girl", "human-male-height", "human-male-height-variant", "human-male-male", "human-male", "human-non-binary", "human-pregnant", "human-queue", "human-scooter", "human", "human-walker", "human-wheelchair", "human-white-cane", "humble-bundle", "hvac-off", "hvac", "hydraulic-oil-level", "hydraulic-oil-temperature", "hydrogen-station", "hydro-power", "ice-cream-off", "ice-cream", "ice-pop", "id-card", "identifier", "ideogram-cjk", "ideogram-cjk-variant", "image-album", "image-area-close", "image-area", "image-auto-adjust", "image-broken", "image-broken-variant", "image-check-outline", "image-check", "image-edit-outline", "image-edit", "image-filter-black-white", "image-filter-center-focus-strong-outline", "image-filter-center-focus-strong", "image-filter-center-focus", "image-filter-center-focus-weak", "image-filter-drama-outline", "image-filter-drama", "image-filter-frames", "image-filter-hdr", "image-filter-none", "image-filter-tilt-shift", "image-filter-vintage", "image-frame", "image-lock-outline", "image-lock", "image-marker-outline", "image-marker", "image-minus-outline", "image-minus", "image-move", "image-multiple-outline", "image-multiple", "image-off-outline", "image-off", "image-outline", "image-plus-outline", "image-plus", "image-refresh-outline", "image-refresh", "image-remove-outline", "image-remove", "image-search-outline", "image-search", "image-size-select-actual", "image-size-select-large", "image-size-select-small", "image", "image-sync-outline", "image-sync", "image-text", "import", "inbox-arrow-down-outline", "inbox-arrow-down", "inbox-arrow-up-outline", "inbox-arrow-up", "inbox-full-outline", "inbox-full", "inbox-multiple-outline", "inbox-multiple", "inbox-outline", "inbox-remove-outline", "inbox-remove", "inbox", "incognito-circle-off", "incognito-circle", "incognito-off", "incognito", "induction", "infinity", "information-off-outline", "information-off", "information-outline", "information", "information-variant", "instagram", "instrument-triangle", "integrated-circuit-chip", "invert-colors-off", "invert-colors", "iobroker", "ip-network-outline", "ip-network", "ipod", "ip-outline", "ip", "iron-board", "iron-outline", "iron", "island", "iv-bag", "jabber", "jeepney", "jellyfish-outline", "jellyfish", "jira", "jquery", "jsfiddle", "jump-rope", "kabaddi", "kangaroo", "karate", "kayaking", "keg", "kettle-alert-outline", "kettle-alert", "kettlebell", "kettle-off-outline", "kettle-off", "kettle-outline", "kettle-pour-over", "kettle-steam-outline", "kettle-steam", "kettle", "key-alert-outline", "key-alert", "key-arrow-right", "keyboard-backspace", "keyboard-caps", "keyboard-close-outline", "keyboard-close", "keyboard-esc", "keyboard-f10", "keyboard-f11", "keyboard-f12", "keyboard-f1", "keyboard-f2", "keyboard-f3", "keyboard-f4", "keyboard-f5", "keyboard-f6", "keyboard-f7", "keyboard-f8", "keyboard-f9", "keyboard-off-outline", "keyboard-off", "keyboard-outline", "keyboard-return", "keyboard-settings-outline", "keyboard-settings", "keyboard-space", "keyboard", "keyboard-tab-reverse", "keyboard-tab", "keyboard-variant", "key-chain", "key-chain-variant", "key-change", "key-link", "key-minus", "key-outline", "key-plus", "key-remove", "key-star", "key", "key-variant", "key-wireless", "khanda", "kickstarter", "kite-outline", "kitesurfing", "kite", "klingon", "knife-military", "knife", "knob", "koala", "kodi", "kubernetes", "label-multiple-outline", "label-multiple", "label-off-outline", "label-off", "label-outline", "label-percent-outline", "label-percent", "label", "label-variant-outline", "label-variant", "ladder", "ladybug", "lambda", "lamp-outline", "lamps-outline", "lamps", "lamp", "lan-check", "lan-connect", "land-fields", "lan-disconnect", "land-plots-circle", "land-plots-circle-variant", "land-plots", "land-rows-horizontal", "land-rows-vertical", "landslide-outline", "landslide", "language-cpp", "language-csharp", "language-css3", "language-c", "language-fortran", "language-go", "language-haskell", "language-html5", "language-javascript", "language-java", "language-kotlin", "language-lua", "language-markdown-outline", "language-markdown", "language-php", "language-python", "language-r", "language-ruby-on-rails", "language-ruby", "language-rust", "language-swift", "language-typescript", "language-xaml", "lan-pending", "lan", "laptop-account", "laptop-off", "laptop", "laravel", "laser-pointer", "lasso", "lastpass", "latitude", "launch", "lava-lamp", "layers-edit", "layers-minus", "layers-off-outline", "layers-off", "layers-outline", "layers-plus", "layers-remove", "layers-search-outline", "layers-search", "layers", "layers-triple-outline", "layers-triple", "lead-pencil", "leaf-circle-outline", "leaf-circle", "leaf-maple-off", "leaf-maple", "leaf-off", "leaf", "leak-off", "leak", "lectern", "led-off", "led-on", "led-outline", "led-strip", "led-strip-variant-off", "led-strip-variant", "led-variant-off", "led-variant-on", "led-variant-outline", "leek", "less-than-or-equal", "less-than", "library-outline", "library-shelves", "library", "license", "lifebuoy", "lightbulb-alert-outline", "lightbulb-alert", "lightbulb-auto-outline", "lightbulb-auto", "lightbulb-cfl-off", "lightbulb-cfl-spiral-off", "lightbulb-cfl-spiral", "lightbulb-cfl", "lightbulb-fluorescent-tube-outline", "lightbulb-fluorescent-tube", "lightbulb-group-off-outline", "lightbulb-group-off", "lightbulb-group-outline", "lightbulb-group", "lightbulb-multiple-off-outline", "lightbulb-multiple-off", "lightbulb-multiple-outline", "lightbulb-multiple", "lightbulb-night-outline", "lightbulb-night", "lightbulb-off-outline", "lightbulb-off", "lightbulb-on-10", "lightbulb-on-20", "lightbulb-on-30", "lightbulb-on-40", "lightbulb-on-50", "lightbulb-on-60", "lightbulb-on-70", "lightbulb-on-80", "lightbulb-on-90", "lightbulb-on-outline", "lightbulb-on", "lightbulb-outline", "lightbulb-question-outline", "lightbulb-question", "lightbulb-spot-off", "lightbulb-spot", "lightbulb", "lightbulb-variant-outline", "lightbulb-variant", "light-flood-down", "light-flood-up", "lighthouse-on", "lighthouse", "lightning-bolt-circle", "lightning-bolt-outline", "lightning-bolt", "light-recessed", "light-switch-off", "light-switch", "line-scan", "lingerie", "link-box-outline", "link-box", "link-box-variant-outline", "link-box-variant", "linkedin", "link-lock", "link-off", "link-plus", "link", "link-variant-minus", "link-variant-off", "link-variant-plus", "link-variant-remove", "link-variant", "linux-mint", "linux", "lipstick", "liquid-spot", "liquor", "list-box-outline", "list-box", "list-status", "litecoin", "loading", "location-enter", "location-exit", "lock-alert-outline", "lock-alert", "lock-check-outline", "lock-check", "lock-clock", "locker-multiple", "locker", "lock-minus-outline", "lock-minus", "lock-off-outline", "lock-off", "lock-open-alert-outline", "lock-open-alert", "lock-open-check-outline", "lock-open-check", "lock-open-minus-outline", "lock-open-minus", "lock-open-outline", "lock-open-plus-outline", "lock-open-plus", "lock-open-remove-outline", "lock-open-remove", "lock-open", "lock-open-variant-outline", "lock-open-variant", "lock-outline", "lock-pattern", "lock-percent-open-outline", "lock-percent-open", "lock-percent-open-variant-outline", "lock-percent-open-variant", "lock-percent-outline", "lock-percent", "lock-plus-outline", "lock-plus", "lock-question", "lock-remove-outline", "lock-remove", "lock-reset", "lock-smart", "lock", "login", "login-variant", "logout", "logout-variant", "longitude", "looks", "lotion-outline", "lotion-plus-outline", "lotion-plus", "lotion", "loupe", "lumx", "lungs", "mace", "magazine-pistol", "magazine-rifle", "magic-staff", "magnet-on", "magnet", "magnify-close", "magnify-expand", "magnify-minus-cursor", "magnify-minus-outline", "magnify-minus", "magnify-plus-cursor", "magnify-plus-outline", "magnify-plus", "magnify-remove-cursor", "magnify-remove-outline", "magnify-scan", "magnify", "mailbox-open-outline", "mailbox-open", "mailbox-open-up-outline", "mailbox-open-up", "mailbox-outline", "mailbox", "mailbox-up-outline", "mailbox-up", "mail", "manjaro", "mapbox", "map-check-outline", "map-check", "map-clock-outline", "map-clock", "map-legend", "map-marker-account-outline", "map-marker-account", "map-marker-alert-outline", "map-marker-alert", "map-marker-check-outline", "map-marker-check", "map-marker-circle", "map-marker-distance", "map-marker-down", "map-marker-left-outline", "map-marker-left", "map-marker-minus-outline", "map-marker-minus", "map-marker-multiple-outline", "map-marker-multiple", "map-marker-off-outline", "map-marker-off", "map-marker-outline", "map-marker-path", "map-marker-plus-outline", "map-marker-plus", "map-marker-question-outline", "map-marker-question", "map-marker-radius-outline", "map-marker-radius", "map-marker-remove-outline", "map-marker-remove", "map-marker-remove-variant", "map-marker-right-outline", "map-marker-right", "map-marker-star-outline", "map-marker-star", "map-marker", "map-marker-up", "map-minus", "map-outline", "map-plus", "map-search-outline", "map-search", "map", "margin", "marker-cancel", "marker-check", "marker", "mastodon", "material-design", "material-ui", "math-compass", "math-cos", "math-integral-box", "math-integral", "math-log", "math-norm-box", "math-norm", "math-sin", "math-tan", "matrix", "medal-outline", "medal", "medical-bag", "medical-cotton-swab", "medication-outline", "medication", "meditation", "memory", "menorah-fire", "menorah", "menu-down-outline", "menu-down", "menu-left-outline", "menu-left", "menu-open", "menu-right-outline", "menu-right", "menu", "menu-swap-outline", "menu-swap", "menu-up-outline", "menu-up", "merge", "message-alert-outline", "message-alert", "message-arrow-left-outline", "message-arrow-left", "message-arrow-right-outline", "message-arrow-right", "message-badge-outline", "message-badge", "message-bookmark-outline", "message-bookmark", "message-bulleted-off", "message-bulleted", "message-check-outline", "message-check", "message-cog-outline", "message-cog", "message-draw", "message-fast-outline", "message-fast", "message-flash-outline", "message-flash", "message-image-outline", "message-image", "message-lock-outline", "message-lock", "message-minus-outline", "message-minus", "message-off-outline", "message-off", "message-outline", "message-plus-outline", "message-plus", "message-processing-outline", "message-processing", "message-question-outline", "message-question", "message-reply-outline", "message-reply", "message-reply-text-outline", "message-reply-text", "message-settings-outline", "message-settings", "message-star-outline", "message-star", "message", "message-text-clock-outline", "message-text-clock", "message-text-fast-outline", "message-text-fast", "message-text-lock-outline", "message-text-lock", "message-text-outline", "message-text", "message-video", "meteor", "meter-electric-outline", "meter-electric", "meter-gas-outline", "meter-gas", "metronome", "metronome-tick", "microphone-message-off", "microphone-message", "microphone-minus", "microphone-off", "microphone-outline", "microphone-plus", "microphone-question-outline", "microphone-question", "microphone-settings", "microphone", "microphone-variant-off", "microphone-variant", "microscope", "micro-sd", "microsoft-access", "microsoft-azure-devops", "microsoft-azure", "microsoft-bing", "microsoft-dynamics-365", "microsoft-edge", "microsoft-excel", "microsoft-internet-explorer", "microsoft-office", "microsoft-onedrive", "microsoft-onenote", "microsoft-outlook", "microsoft-powerpoint", "microsoft-sharepoint", "microsoft", "microsoft-teams", "microsoft-visual-studio-code", "microsoft-visual-studio", "microsoft-windows-classic", "microsoft-windows", "microsoft-word", "microsoft-xbox-controller-battery-alert", "microsoft-xbox-controller-battery-charging", "microsoft-xbox-controller-battery-empty", "microsoft-xbox-controller-battery-full", "microsoft-xbox-controller-battery-low", "microsoft-xbox-controller-battery-medium", "microsoft-xbox-controller-battery-unknown", "microsoft-xbox-controller-menu", "microsoft-xbox-controller-off", "microsoft-xbox-controller", "microsoft-xbox-controller-view", "microsoft-xbox", "microwave-off", "microwave", "middleware-outline", "middleware", "midi-port", "midi", "minecraft", "mine", "minidisc", "mini-sd", "minus-box-multiple-outline", "minus-box-multiple", "minus-box-outline", "minus-box", "minus-circle-multiple-outline", "minus-circle-multiple", "minus-circle-off-outline", "minus-circle-off", "minus-circle-outline", "minus-circle", "minus-network-outline", "minus-network", "minus", "minus-thick", "mirror-rectangle", "mirror", "mirror-variant", "mixed-martial-arts", "mixed-reality", "molecule-co2", "molecule-co", "molecule", "monitor-account", "monitor-arrow-down", "monitor-arrow-down-variant", "monitor-cellphone-star", "monitor-cellphone", "monitor-dashboard", "monitor-edit", "monitor-eye", "monitor-lock", "monitor-multiple", "monitor-off", "monitor-screenshot", "monitor-share", "monitor-shimmer", "monitor-small", "monitor-speaker-off", "monitor-speaker", "monitor-star", "monitor", "moon-first-quarter", "moon-full", "moon-last-quarter", "moon-new", "moon-waning-crescent", "moon-waning-gibbous", "moon-waxing-crescent", "moon-waxing-gibbous", "moped-electric-outline", "moped-electric", "moped-outline", "moped", "more", "mortar-pestle-plus", "mortar-pestle", "mosque-outline", "mosque", "mother-heart", "mother-nurse", "motion-outline", "motion-pause-outline", "motion-pause", "motion-play-outline", "motion-play", "motion-sensor-off", "motion-sensor", "motion", "motorbike-electric", "motorbike-off", "motorbike", "mouse-bluetooth", "mouse-move-down", "mouse-move-up", "mouse-move-vertical", "mouse-off", "mouse", "mouse-variant-off", "mouse-variant", "move-resize", "move-resize-variant", "movie-check-outline", "movie-check", "movie-cog-outline", "movie-cog", "movie-edit-outline", "movie-edit", "movie-filter-outline", "movie-filter", "movie-minus-outline", "movie-minus", "movie-off-outline", "movie-off", "movie-open-check-outline", "movie-open-check", "movie-open-cog-outline", "movie-open-cog", "movie-open-edit-outline", "movie-open-edit", "movie-open-minus-outline", "movie-open-minus", "movie-open-off-outline", "movie-open-off", "movie-open-outline", "movie-open-play-outline", "movie-open-play", "movie-open-plus-outline", "movie-open-plus", "movie-open-remove-outline", "movie-open-remove", "movie-open-settings-outline", "movie-open-settings", "movie-open-star-outline", "movie-open-star", "movie-open", "movie-outline", "movie-play-outline", "movie-play", "movie-plus-outline", "movie-plus", "movie-remove-outline", "movie-remove", "movie-roll", "movie-search-outline", "movie-search", "movie-settings-outline", "movie-settings", "movie-star-outline", "movie-star", "movie", "mower-bag-on", "mower-bag", "mower-on", "mower", "muffin", "multicast", "multimedia", "multiplication-box", "multiplication", "mushroom-off-outline", "mushroom-off", "mushroom-outline", "mushroom", "music-accidental-double-flat", "music-accidental-double-sharp", "music-accidental-flat", "music-accidental-natural", "music-accidental-sharp", "music-box-multiple-outline", "music-box-multiple", "music-box-outline", "music-box", "music-circle-outline", "music-circle", "music-clef-alto", "music-clef-bass", "music-clef-treble", "music-note-bluetooth-off", "music-note-bluetooth", "music-note-eighth-dotted", "music-note-eighth", "music-note-half-dotted", "music-note-half", "music-note-minus", "music-note-off-outline", "music-note-off", "music-note-outline", "music-note-plus", "music-note-quarter-dotted", "music-note-quarter", "music-note-sixteenth-dotted", "music-note-sixteenth", "music-note", "music-note-whole-dotted", "music-note-whole", "music-off", "music-rest-eighth", "music-rest-half", "music-rest-quarter", "music-rest-sixteenth", "music-rest-whole", "music", "mustache", "nail", "nas", "nativescript", "nature-people", "nature", "navigation-outline", "navigation", "navigation-variant-outline", "navigation-variant", "near-me", "necklace", "needle-off", "needle", "netflix", "network-off-outline", "network-off", "network-outline", "network-pos", "network-strength-1-alert", "network-strength-1", "network-strength-2-alert", "network-strength-2", "network-strength-3-alert", "network-strength-3", "network-strength-4-alert", "network-strength-4-cog", "network-strength-4", "network-strength-off-outline", "network-strength-off", "network-strength-outline", "network", "new-box", "newspaper-check", "newspaper-minus", "newspaper-plus", "newspaper-remove", "newspaper", "newspaper-variant-multiple-outline", "newspaper-variant-multiple", "newspaper-variant-outline", "newspaper-variant", "nfc-search-variant", "nfc", "nfc-tap", "nfc-variant-off", "nfc-variant", "ninja", "nintendo-game-boy", "nintendo-switch", "nintendo-wii", "nintendo-wiiu", "nix", "nodejs", "noodles", "note-alert-outline", "note-alert", "notebook-check-outline", "notebook-check", "notebook-edit-outline", "notebook-edit", "notebook-heart-outline", "notebook-heart", "notebook-minus-outline", "notebook-minus", "notebook-multiple", "notebook-outline", "notebook-plus-outline", "notebook-plus", "notebook-remove-outline", "notebook-remove", "notebook", "note-check-outline", "note-check", "note-edit-outline", "note-edit", "note-minus-outline", "note-minus", "note-multiple-outline", "note-multiple", "note-off-outline", "note-off", "note-outline", "note-plus-outline", "note-plus", "not-equal", "not-equal-variant", "note-remove-outline", "note-remove", "note-search-outline", "note-search", "note", "note-text-outline", "note-text", "notification-clear-all", "npm", "nuke", "null", "numeric-0-box-multiple-outline", "numeric-0-box-multiple", "numeric-0-box-outline", "numeric-0-box", "numeric-0-circle-outline", "numeric-0-circle", "numeric-0", "numeric-10-box-multiple-outline", "numeric-10-box-multiple", "numeric-10-box-outline", "numeric-10-box", "numeric-10-circle-outline", "numeric-10-circle", "numeric-10", "numeric-1-box-multiple-outline", "numeric-1-box-multiple", "numeric-1-box-outline", "numeric-1-box", "numeric-1-circle-outline", "numeric-1-circle", "numeric-1", "numeric-2-box-multiple-outline", "numeric-2-box-multiple", "numeric-2-box-outline", "numeric-2-box", "numeric-2-circle-outline", "numeric-2-circle", "numeric-2", "numeric-3-box-multiple-outline", "numeric-3-box-multiple", "numeric-3-box-outline", "numeric-3-box", "numeric-3-circle-outline", "numeric-3-circle", "numeric-3", "numeric-4-box-multiple-outline", "numeric-4-box-multiple", "numeric-4-box-outline", "numeric-4-box", "numeric-4-circle-outline", "numeric-4-circle", "numeric-4", "numeric-5-box-multiple-outline", "numeric-5-box-multiple", "numeric-5-box-outline", "numeric-5-box", "numeric-5-circle-outline", "numeric-5-circle", "numeric-5", "numeric-6-box-multiple-outline", "numeric-6-box-multiple", "numeric-6-box-outline", "numeric-6-box", "numeric-6-circle-outline", "numeric-6-circle", "numeric-6", "numeric-7-box-multiple-outline", "numeric-7-box-multiple", "numeric-7-box-outline", "numeric-7-box", "numeric-7-circle-outline", "numeric-7-circle", "numeric-7", "numeric-8-box-multiple-outline", "numeric-8-box-multiple", "numeric-8-box-outline", "numeric-8-box", "numeric-8-circle-outline", "numeric-8-circle", "numeric-8", "numeric-9-box-multiple-outline", "numeric-9-box-multiple", "numeric-9-box-outline", "numeric-9-box", "numeric-9-circle-outline", "numeric-9-circle", "numeric-9-plus-box-multiple-outline", "numeric-9-plus-box-multiple", "numeric-9-plus-box-outline", "numeric-9-plus-box", "numeric-9-plus-circle-outline", "numeric-9-plus-circle", "numeric-9-plus", "numeric-9", "numeric-negative-1", "numeric-off", "numeric-positive-1", "numeric", "nutrition", "nut", "nuxt", "oar", "ocarina", "oci", "ocr", "octagon-outline", "octagon", "octagram-outline", "octagram", "octahedron-off", "octahedron", "odnoklassniki", "offer", "office-building-cog-outline", "office-building-cog", "office-building-marker-outline", "office-building-marker", "office-building-minus-outline", "office-building-minus", "office-building-outline", "office-building-plus-outline", "office-building-plus", "office-building-remove-outline", "office-building-remove", "office-building", "oil-lamp", "oil-level", "oil", "oil-temperature", "omega", "om", "onepassword", "one-up", "opacity", "openid", "open-in-app", "open-in-new", "open-source-initiative", "opera", "orbit", "orbit-variant", "order-alphabetical-ascending", "order-alphabetical-descending", "order-bool-ascending", "order-bool-ascending-variant", "order-bool-descending", "order-bool-descending-variant", "order-numeric-ascending", "order-numeric-descending", "origin", "ornament", "ornament-variant", "outdoor-lamp", "overscan", "owl", "package-check", "package-down", "package", "package-up", "package-variant-closed-check", "package-variant-closed-minus", "package-variant-closed-plus", "package-variant-closed-remove", "package-variant-closed", "package-variant-minus", "package-variant-plus", "package-variant-remove", "package-variant", "pac-man", "page-first", "page-last", "page-layout-body", "page-layout-footer", "page-layout-header-footer", "page-layout-header", "page-layout-sidebar-left", "page-layout-sidebar-right", "page-next-outline", "page-next", "page-previous-outline", "page-previous", "pail-minus-outline", "pail-minus", "pail-off-outline", "pail-off", "pail-outline", "pail-plus-outline", "pail-plus", "pail-remove-outline", "pail-remove", "pail", "palette-advanced", "palette-outline", "palette", "palette-swatch-outline", "palette-swatch", "palette-swatch-variant", "palm-tree", "pan-bottom-left", "pan-bottom-right", "panda", "pandora", "pan-down", "pan-horizontal", "pan-left", "panorama-fisheye", "panorama-horizontal-outline", "panorama-horizontal", "panorama-outline", "panorama-sphere-outline", "panorama-sphere", "panorama", "panorama-variant-outline", "panorama-variant", "panorama-vertical-outline", "panorama-vertical", "panorama-wide-angle-outline", "panorama-wide-angle", "pan-right", "pan", "pan-top-left", "pan-top-right", "pan-up", "pan-vertical", "paperclip-check", "paperclip-lock", "paperclip-minus", "paperclip-off", "paperclip-plus", "paperclip-remove", "paperclip", "paper-cut-vertical", "paper-roll-outline", "paper-roll", "parachute-outline", "parachute", "paragliding", "parking", "party-popper", "passport-biometric", "passport", "pasta", "patio-heater", "patreon", "pause-box-outline", "pause-box", "pause-circle-outline", "pause-circle", "pause-octagon-outline", "pause-octagon", "pause", "paw-off-outline", "paw-off", "paw-outline", "paw", "peace", "peanut-off-outline", "peanut-off", "peanut-outline", "peanut", "pencil-box-multiple-outline", "pencil-box-multiple", "pencil-box-outline", "pencil-box", "pencil-circle-outline", "pencil-circle", "pencil-lock-outline", "pencil-lock", "pencil-minus-outline", "pencil-minus", "pencil-off-outline", "pencil-off", "pencil-outline", "pencil-plus-outline", "pencil-plus", "pencil-remove-outline", "pencil-remove", "pencil-ruler-outline", "pencil-ruler", "pencil", "penguin", "pen-lock", "pen-minus", "pen-off", "pen-plus", "pen-remove", "pen", "pentagon-outline", "pentagon", "pentagram", "percent-box-outline", "percent-box", "percent-circle-outline", "percent-circle", "percent-outline", "percent", "periodic-table", "perspective-less", "perspective-more", "phone-alert-outline", "phone-alert", "phone-bluetooth-outline", "phone-bluetooth", "phone-cancel-outline", "phone-cancel", "phone-check-outline", "phone-check", "phone-classic-off", "phone-classic", "phone-clock", "phone-dial-outline", "phone-dial", "phone-forward-outline", "phone-forward", "phone-hangup-outline", "phone-hangup", "phone-incoming-outgoing-outline", "phone-incoming-outgoing", "phone-incoming-outline", "phone-incoming", "phone-in-talk-outline", "phone-in-talk", "phone-lock-outline", "phone-lock", "phone-log-outline", "phone-log", "phone-message-outline", "phone-message", "phone-minus-outline", "phone-minus", "phone-missed-outline", "phone-missed", "phone-off-outline", "phone-off", "phone-outgoing-outline", "phone-outgoing", "phone-outline", "phone-paused-outline", "phone-paused", "phone-plus-outline", "phone-plus", "phone-refresh-outline", "phone-refresh", "phone-remove-outline", "phone-remove", "phone-return-outline", "phone-return", "phone-ring-outline", "phone-ring", "phone-rotate-landscape", "phone-rotate-portrait", "phone-settings-outline", "phone-settings", "phone", "phone-sync-outline", "phone-sync", "phone-voip", "ph", "piano-off", "piano", "pi-box", "pickaxe", "picture-in-picture-bottom-right-outline", "picture-in-picture-bottom-right", "picture-in-picture-top-right-outline", "picture-in-picture-top-right", "pier-crane", "pier", "piggy-bank-outline", "piggy-bank", "pig", "pig-variant-outline", "pig-variant", "pi-hole", "pillar", "pill-multiple", "pill-off", "pill", "pine-tree-box", "pine-tree-fire", "pine-tree", "pin-off-outline", "pin-off", "pin-outline", "pin", "pinterest", "pinwheel-outline", "pinwheel", "pipe-disconnected", "pipe-leak", "pipe", "pipe-valve", "pipe-wrench", "pirate", "pistol", "piston", "pi", "pitchfork", "pizza", "plane-car", "plane-train", "play-box-lock-open-outline", "play-box-lock-open", "play-box-lock-outline", "play-box-lock", "play-box-multiple-outline", "play-box-multiple", "play-box-outline", "play-box", "play-circle-outline", "play-circle", "playlist-check", "playlist-edit", "playlist-minus", "playlist-music-outline", "playlist-music", "playlist-play", "playlist-plus", "playlist-remove", "playlist-star", "play-network-outline", "play-network", "play-outline", "play-pause", "play-protected-content", "play-speed", "play", "plex", "pliers", "plus-box-multiple-outline", "plus-box-multiple", "plus-box-outline", "plus-box", "plus-circle-multiple-outline", "plus-circle-multiple", "plus-circle-outline", "plus-circle", "plus-lock-open", "plus-lock", "plus-minus-box", "plus-minus", "plus-minus-variant", "plus-network-outline", "plus-network", "plus-outline", "plus", "plus-thick", "podcast", "podium-bronze", "podium-gold", "podium-silver", "podium", "point-of-sale", "pokeball", "pokemon-go", "poker-chip", "polaroid", "police-badge-outline", "police-badge", "police-station", "poll", "polo", "polymer", "pool", "pool-thermometer", "popcorn", "postage-stamp", "post-lamp", "post-outline", "post", "pot-mix-outline", "pot-mix", "pot-outline", "pot-steam-outline", "pot-steam", "pot", "pound-box-outline", "pound-box", "pound", "power-cycle", "power-off", "power-on", "power-plug-off-outline", "power-plug-off", "power-plug-outline", "power-plug", "power-settings", "powershell", "power-sleep", "power-socket-au", "power-socket-ch", "power-socket-de", "power-socket-eu", "power-socket-fr", "power-socket-it", "power-socket-jp", "power-socket", "power-socket-uk", "power-socket-us", "power-standby", "power", "prescription", "presentation-play", "presentation", "pretzel", "printer-3d-nozzle-alert-outline", "printer-3d-nozzle-alert", "printer-3d-nozzle-heat-outline", "printer-3d-nozzle-heat", "printer-3d-nozzle-off-outline", "printer-3d-nozzle-off", "printer-3d-nozzle-outline", "printer-3d-nozzle", "printer-3d-off", "printer-3d", "printer-alert", "printer-check", "printer-eye", "printer-off-outline", "printer-off", "printer-outline", "printer-pos-alert-outline", "printer-pos-alert", "printer-pos-cancel-outline", "printer-pos-cancel", "printer-pos-check-outline", "printer-pos-check", "printer-pos-cog-outline", "printer-pos-cog", "printer-pos-edit-outline", "printer-pos-edit", "printer-pos-minus-outline", "printer-pos-minus", "printer-pos-network-outline", "printer-pos-network", "printer-pos-off-outline", "printer-pos-off", "printer-pos-outline", "printer-pos-pause-outline", "printer-pos-pause", "printer-pos-play-outline", "printer-pos-play", "printer-pos-plus-outline", "printer-pos-plus", "printer-pos-refresh-outline", "printer-pos-refresh", "printer-pos-remove-outline", "printer-pos-remove", "printer-pos-star-outline", "printer-pos-star", "printer-pos-stop-outline", "printer-pos-stop", "printer-pos", "printer-pos-sync-outline", "printer-pos-sync", "printer-pos-wrench-outline", "printer-pos-wrench", "printer-search", "printer-settings", "printer", "printer-wireless", "priority-high", "priority-low", "professional-hexagon", "progress-alert", "progress-check", "progress-clock", "progress-close", "progress-download", "progress-helper", "progress-pencil", "progress-question", "progress-star", "progress-upload", "progress-wrench", "projector-off", "projector-screen-off-outline", "projector-screen-off", "projector-screen-outline", "projector-screen", "projector-screen-variant-off-outline", "projector-screen-variant-off", "projector-screen-variant-outline", "projector-screen-variant", "projector", "propane-tank-outline", "propane-tank", "protocol", "publish-off", "publish", "pulse", "pumpkin", "pump-off", "pump", "purse-outline", "purse", "puzzle-check-outline", "puzzle-check", "puzzle-edit-outline", "puzzle-edit", "puzzle-heart-outline", "puzzle-heart", "puzzle-minus-outline", "puzzle-minus", "puzzle-outline", "puzzle-plus-outline", "puzzle-plus", "puzzle-remove-outline", "puzzle-remove", "puzzle-star-outline", "puzzle-star", "puzzle", "pyramid-off", "pyramid", "qi", "qqchat", "qrcode-edit", "qrcode-minus", "qrcode-plus", "qrcode-remove", "qrcode-scan", "qrcode", "quadcopter", "quality-high", "quality-low", "quality-medium", "quora", "rabbit", "rabbit-variant-outline", "rabbit-variant", "racing-helmet", "racquetball", "radar", "radiator-disabled", "radiator-off", "radiator", "radioactive-circle-outline", "radioactive-circle", "radioactive-off", "radioactive", "radio-am", "radiobox-blank", "radiobox-marked", "radio-fm", "radio-handheld", "radiology-box-outline", "radiology-box", "radio-off", "radio", "radio-tower", "radius-outline", "radius", "railroad-light", "rake", "raspberry-pi", "raw-off", "raw", "ray-end-arrow", "ray-end", "ray-start-arrow", "ray-start-end", "ray-start", "ray-start-vertex-end", "ray-vertex", "razor-double-edge", "razor-single-edge", "react", "read", "receipt-outline", "receipt", "receipt-text-check-outline", "receipt-text-check", "receipt-text-minus-outline", "receipt-text-minus", "receipt-text-outline", "receipt-text-plus-outline", "receipt-text-plus", "receipt-text-remove-outline", "receipt-text-remove", "receipt-text", "record-circle-outline", "record-circle", "record-player", "record-rec", "record", "rectangle-outline", "rectangle", "recycle", "recycle-variant", "reddit", "redhat", "redo", "redo-variant", "reflect-horizontal", "reflect-vertical", "refresh-auto", "refresh-circle", "refresh", "regex", "registered-trademark", "reiterate", "relation-many-to-many", "relation-many-to-one-or-many", "relation-many-to-one", "relation-many-to-only-one", "relation-many-to-zero-or-many", "relation-many-to-zero-or-one", "relation-one-or-many-to-many", "relation-one-or-many-to-one-or-many", "relation-one-or-many-to-one", "relation-one-or-many-to-only-one", "relation-one-or-many-to-zero-or-many", "relation-one-or-many-to-zero-or-one", "relation-one-to-many", "relation-one-to-one-or-many", "relation-one-to-one", "relation-one-to-only-one", "relation-one-to-zero-or-many", "relation-one-to-zero-or-one", "relation-only-one-to-many", "relation-only-one-to-one-or-many", "relation-only-one-to-one", "relation-only-one-to-only-one", "relation-only-one-to-zero-or-many", "relation-only-one-to-zero-or-one", "relation-zero-or-many-to-many", "relation-zero-or-many-to-one-or-many", "relation-zero-or-many-to-one", "relation-zero-or-many-to-only-one", "relation-zero-or-many-to-zero-or-many", "relation-zero-or-many-to-zero-or-one", "relation-zero-or-one-to-many", "relation-zero-or-one-to-one-or-many", "relation-zero-or-one-to-one", "relation-zero-or-one-to-only-one", "relation-zero-or-one-to-zero-or-many", "relation-zero-or-one-to-zero-or-one", "relative-scale", "reload-alert", "reload", "reminder", "remote-desktop", "remote-off", "remote", "remote-tv-off", "remote-tv", "rename-box-outline", "rename-box", "rename-outline", "rename", "reorder-horizontal", "reorder-vertical", "repeat-off", "repeat-once", "repeat", "repeat-variant", "replay", "reply-all-outline", "reply-all", "reply-circle", "reply-outline", "reply", "reproduction", "resistor-nodes", "resistor", "resize-bottom-right", "resize", "responsive", "restart-alert", "restart-off", "restart", "restore-alert", "restore", "rewind-10", "rewind-15", "rewind-30", "rewind-45", "rewind-5", "rewind-60", "rewind-outline", "rewind", "rhombus-medium-outline", "rhombus-medium", "rhombus-outline", "rhombus-split-outline", "rhombus-split", "rhombus", "ribbon", "rice", "rickshaw-electric", "rickshaw", "ring", "rivet", "road", "road-variant", "robber", "robot-angry-outline", "robot-angry", "robot-confused-outline", "robot-confused", "robot-dead-outline", "robot-dead", "robot-excited-outline", "robot-excited", "robot-happy-outline", "robot-happy", "robot-industrial-outline", "robot-industrial", "robot-love-outline", "robot-love", "robot-mower-outline", "robot-mower", "robot-off-outline", "robot-off", "robot-outline", "robot", "robot-vacuum-alert", "robot-vacuum-off", "robot-vacuum", "robot-vacuum-variant-alert", "robot-vacuum-variant-off", "robot-vacuum-variant", "rocket-launch-outline", "rocket-launch", "rocket-outline", "rocket", "rodent", "rollerblade-off", "rollerblade", "roller-shade-closed", "roller-shade", "roller-skate-off", "roller-skate", "rollupjs", "rolodex-outline", "rolodex", "roman-numeral-10", "roman-numeral-1", "roman-numeral-2", "roman-numeral-3", "roman-numeral-4", "roman-numeral-5", "roman-numeral-6", "roman-numeral-7", "roman-numeral-8", "roman-numeral-9", "room-service-outline", "room-service", "rotate-360", "rotate-3d", "rotate-3d-variant", "rotate-left", "rotate-left-variant", "rotate-orbit", "rotate-right", "rotate-right-variant", "rounded-corner", "router-network", "router", "router-wireless-off", "router-wireless-settings", "router-wireless", "routes-clock", "routes", "rowing", "rss-box", "rss-off", "rss", "rugby", "rug", "ruler-square-compass", "ruler-square", "ruler", "run-fast", "run", "rv-truck", "sack-percent", "sack", "safe-square-outline", "safe-square", "safe", "safety-goggles", "sail-boat-sink", "sail-boat", "sale-outline", "salesforce", "sale", "sass", "satellite", "satellite-uplink", "satellite-variant", "sausage-off", "sausage", "saw-blade", "sawtooth-wave", "saxophone", "scale-balance", "scale-bathroom", "scale-off", "scale", "scale-unbalanced", "scan-helper", "scanner-off", "scanner", "scatter-plot-outline", "scatter-plot", "scent-off", "scent", "school-outline", "school", "scissors-cutting", "scooter-electric", "scooter", "scoreboard-outline", "scoreboard", "screen-rotation-lock", "screen-rotation", "screwdriver", "screw-flat-top", "screw-lag", "screw-machine-flat-top", "screw-machine-round-top", "screw-round-top", "script-outline", "script", "script-text-key-outline", "script-text-key", "script-text-outline", "script-text-play-outline", "script-text-play", "script-text", "sd", "seal", "seal-variant", "search-web", "seatbelt", "seat-flat-angled", "seat-flat", "seat-individual-suite", "seat-legroom-extra", "seat-legroom-normal", "seat-legroom-reduced", "seat-outline", "seat-passenger", "seat-recline-extra", "seat-recline-normal", "seat", "security-network", "security", "seed-off-outline", "seed-off", "seed-outline", "seed-plus-outline", "seed-plus", "seed", "seesaw", "segment", "select-all", "select-arrow-down", "select-arrow-up", "select-color", "select-compare", "select-drag", "select-group", "select-inverse", "selection-drag", "selection-ellipse-arrow-inside", "selection-ellipse-remove", "selection-ellipse", "selection-marker", "selection-multiple-marker", "selection-multiple", "selection-off", "selection-remove", "selection-search", "selection", "select-marker", "select-multiple-marker", "select-multiple", "select-off", "select-place", "select-remove", "select-search", "select", "semantic-web", "send-check-outline", "send-check", "send-circle-outline", "send-circle", "send-clock-outline", "send-clock", "send-lock-outline", "send-lock", "send-outline", "send", "serial-port", "server-minus", "server-network-off", "server-network", "server-off", "server-plus", "server-remove", "server-security", "server", "set-all", "set-center-right", "set-center", "set-left-center", "set-left-right", "set-left", "set-merge", "set-none", "set-right", "set-split", "set-square", "settings-helper", "set-top-box", "shaker-outline", "shaker", "shape-circle-plus", "shape-outline", "shape-oval-plus", "shape-plus", "shape-polygon-plus", "shape-rectangle-plus", "shape-square-plus", "shape-square-rounded-plus", "shape", "share-all-outline", "share-all", "share-circle", "share-off-outline", "share-off", "share-outline", "share", "share-variant-outline", "share-variant", "shark-fin-outline", "shark-fin", "shark-off", "shark", "sheep", "shield-account-outline", "shield-account", "shield-account-variant-outline", "shield-account-variant", "shield-airplane-outline", "shield-airplane", "shield-alert-outline", "shield-alert", "shield-bug-outline", "shield-bug", "shield-car", "shield-check-outline", "shield-check", "shield-cross-outline", "shield-cross", "shield-crown-outline", "shield-crown", "shield-edit-outline", "shield-edit", "shield-half-full", "shield-half", "shield-home-outline", "shield-home", "shield-key-outline", "shield-key", "shield-link-variant-outline", "shield-link-variant", "shield-lock-open-outline", "shield-lock-open", "shield-lock-outline", "shield-lock", "shield-moon-outline", "shield-moon", "shield-off-outline", "shield-off", "shield-outline", "shield-plus-outline", "shield-plus", "shield-refresh-outline", "shield-refresh", "shield-remove-outline", "shield-remove", "shield-search", "shield-star-outline", "shield-star", "shield-sun-outline", "shield-sun", "shield", "shield-sword-outline", "shield-sword", "shield-sync-outline", "shield-sync", "shimmer", "shipping-pallet", "ship-wheel", "shoe-ballet", "shoe-cleat", "shoe-formal", "shoe-heel", "shoe-print", "shoe-sneaker", "shopping-music", "shopping-outline", "shopping-search-outline", "shopping-search", "shopping", "shore", "shovel-off", "shovel", "shower-head", "shower", "shredder", "shuffle-disabled", "shuffle", "shuffle-variant", "shuriken", "sickle", "sigma-lower", "sigma", "signal-2g", "signal-3g", "signal-4g", "signal-5g", "signal-cellular-1", "signal-cellular-2", "signal-cellular-3", "signal-cellular-outline", "signal-distance-variant", "signal-hspa-plus", "signal-hspa", "signal-off", "signal", "signal-variant", "signature-freehand", "signature-image", "signature", "signature-text", "sign-caution", "sign-direction-minus", "sign-direction-plus", "sign-direction-remove", "sign-direction", "sign-language-outline", "sign-language", "sign-pole", "sign-real-estate", "sign-text", "sign-yield", "silo-outline", "silo", "silverware-clean", "silverware-fork-knife", "silverware-fork", "silverware-spoon", "silverware", "silverware-variant", "sim-alert-outline", "sim-alert", "sim-off-outline", "sim-off", "sim-outline", "simple-icons", "sim", "sina-weibo", "sine-wave", "sitemap-outline", "sitemap", "size-l", "size-m", "size-s", "size-xl", "size-xs", "size-xxl", "size-xxs", "size-xxxl", "skateboarding", "skateboard", "skate-off", "skate", "skew-less", "skew-more", "ski-cross-country", "skip-backward-outline", "skip-backward", "skip-forward-outline", "skip-forward", "skip-next-circle-outline", "skip-next-circle", "skip-next-outline", "skip-next", "skip-previous-circle-outline", "skip-previous-circle", "skip-previous-outline", "skip-previous", "ski", "ski-water", "skull-crossbones-outline", "skull-crossbones", "skull-outline", "skull-scan-outline", "skull-scan", "skull", "skype-business", "skype", "slack", "slash-forward-box", "slash-forward", "sledding", "sleep-off", "sleep", "slide", "slope-downhill", "slope-uphill", "slot-machine-outline", "slot-machine", "smart-card-off-outline", "smart-card-off", "smart-card-outline", "smart-card-reader-outline", "smart-card-reader", "smart-card", "smog", "smoke-detector-alert-outline", "smoke-detector-alert", "smoke-detector-off-outline", "smoke-detector-off", "smoke-detector-outline", "smoke-detector", "smoke-detector-variant-alert", "smoke-detector-variant-off", "smoke-detector-variant", "smoke", "smoking-off", "smoking-pipe-off", "smoking-pipe", "smoking", "snail", "snake", "snapchat", "snowboard", "snowflake-alert", "snowflake-check", "snowflake-melt", "snowflake-off", "snowflake", "snowflake-thermometer", "snowflake-variant", "snowman", "snowmobile", "snowshoeing", "soccer-field", "soccer", "social-distance-2-meters", "social-distance-6-feet", "sofa-outline", "sofa-single-outline", "sofa-single", "sofa", "solar-panel-large", "solar-panel", "solar-power", "solar-power-variant-outline", "solar-power-variant", "soldering-iron", "solid", "sony-playstation", "sort-alphabetical-ascending", "sort-alphabetical-ascending-variant", "sort-alphabetical-descending", "sort-alphabetical-descending-variant", "sort-alphabetical-variant", "sort-ascending", "sort-bool-ascending", "sort-bool-ascending-variant", "sort-bool-descending", "sort-bool-descending-variant", "sort-calendar-ascending", "sort-calendar-descending", "sort-clock-ascending-outline", "sort-clock-ascending", "sort-clock-descending-outline", "sort-clock-descending", "sort-descending", "sort-numeric-ascending", "sort-numeric-ascending-variant", "sort-numeric-descending", "sort-numeric-descending-variant", "sort-numeric-variant", "sort-reverse-variant", "sort", "sort-variant-lock-open", "sort-variant-lock", "sort-variant-off", "sort-variant-remove", "sort-variant", "soundbar", "soundcloud", "source-branch-check", "source-branch-minus", "source-branch-plus", "source-branch-refresh", "source-branch-remove", "source-branch", "source-branch-sync", "source-commit-end-local", "source-commit-end", "source-commit-local", "source-commit-next-local", "source-commit-start-next-local", "source-commit-start", "source-commit", "source-fork", "source-merge", "source-pull", "source-repository-multiple", "source-repository", "soy-sauce-off", "soy-sauce", "space-invaders", "space-station", "spade", "spa-outline", "spa", "speaker-bluetooth", "speaker-message", "speaker-multiple", "speaker-off", "speaker-pause", "speaker-play", "speaker-stop", "speaker", "speaker-wireless", "spear", "speedometer-medium", "speedometer-slow", "speedometer", "spellcheck", "sphere-off", "sphere", "spider", "spider-thread", "spider-web", "spirit-level", "spoon-sugar", "spotify", "spotlight-beam", "spotlight", "spray-bottle", "spray", "sprinkler-fire", "sprinkler", "sprinkler-variant", "sprout-outline", "sprout", "square-circle", "square-edit-outline", "square-medium-outline", "square-medium", "square-off-outline", "square-off", "square-opacity", "square-outline", "square-root-box", "square-root", "square-rounded-badge-outline", "square-rounded-badge", "square-rounded-outline", "square-rounded", "square-small", "square", "square-wave", "squeegee", "ssh", "stack-exchange", "stack-overflow", "stackpath", "stadium-outline", "stadium", "stadium-variant", "stairs-box", "stairs-down", "stairs", "stairs-up", "stamper", "standard-definition", "star-box-multiple-outline", "star-box-multiple", "star-box-outline", "star-box", "star-check-outline", "star-check", "star-circle-outline", "star-circle", "star-cog-outline", "star-cog", "star-crescent", "star-david", "star-face", "star-four-points-outline", "star-four-points", "star-half-full", "star-half", "star-minus-outline", "star-minus", "star-off-outline", "star-off", "star-outline", "star-plus-outline", "star-plus", "star-remove-outline", "star-remove", "star-settings-outline", "star-settings", "star-shooting-outline", "star-shooting", "star", "star-three-points-outline", "star-three-points", "state-machine", "steam", "steering-off", "steering", "step-backward-2", "step-backward", "step-forward-2", "step-forward", "stethoscope", "sticker-alert-outline", "sticker-alert", "sticker-check-outline", "sticker-check", "sticker-circle-outline", "sticker-emoji", "sticker-minus-outline", "sticker-minus", "sticker-outline", "sticker-plus-outline", "sticker-plus", "sticker-remove-outline", "sticker-remove", "sticker", "sticker-text-outline", "sticker-text", "stocking", "stomach", "stool-outline", "stool", "stop-circle-outline", "stop-circle", "stop", "storage-tank-outline", "storage-tank", "store-24-hour", "store-alert-outline", "store-alert", "store-check-outline", "store-check", "store-clock-outline", "store-clock", "store-cog-outline", "store-cog", "store-edit-outline", "store-edit", "storefront-check-outline", "storefront-check", "storefront-edit-outline", "storefront-edit", "storefront-minus-outline", "storefront-minus", "storefront-outline", "storefront-plus-outline", "storefront-plus", "storefront-remove-outline", "storefront-remove", "storefront", "store-marker-outline", "store-marker", "store-minus-outline", "store-minus", "store-off-outline", "store-off", "store-outline", "store-plus-outline", "store-plus", "store-remove-outline", "store-remove", "store-search-outline", "store-search", "store-settings-outline", "store-settings", "store", "stove", "strategy", "stretch-to-page-outline", "stretch-to-page", "string-lights-off", "string-lights", "subdirectory-arrow-left", "subdirectory-arrow-right", "submarine", "subtitles-outline", "subtitles", "subway-alert-variant", "subway", "subway-variant", "summit", "sun-angle-outline", "sun-angle", "sun-clock-outline", "sun-clock", "sun-compass", "sunglasses", "sun-snowflake", "sun-snowflake-variant", "sun-thermometer-outline", "sun-thermometer", "sun-wireless-outline", "sun-wireless", "surfing", "surround-sound-2-0", "surround-sound-2-1", "surround-sound-3-1", "surround-sound-5-1-2", "surround-sound-5-1", "surround-sound-7-1", "surround-sound", "svg", "swap-horizontal-bold", "swap-horizontal-circle-outline", "swap-horizontal-circle", "swap-horizontal", "swap-horizontal-variant", "swap-vertical-bold", "swap-vertical-circle-outline", "swap-vertical-circle", "swap-vertical", "swap-vertical-variant", "swim", "switch", "sword-cross", "sword", "syllabary-hangul", "syllabary-hiragana", "syllabary-katakana-halfwidth", "syllabary-katakana", "symbol", "symfony", "synagogue-outline", "synagogue", "sync-alert", "sync-circle", "sync-off", "sync", "table-account", "table-alert", "table-arrow-down", "table-arrow-left", "table-arrow-right", "table-arrow-up", "table-border", "table-cancel", "table-chair", "table-check", "table-clock", "table-cog", "table-column-plus-after", "table-column-plus-before", "table-column-remove", "table-column", "table-column-width", "table-edit", "table-eye-off", "table-eye", "table-filter", "table-furniture", "table-headers-eye-off", "table-headers-eye", "table-heart", "table-key", "table-large-plus", "table-large-remove", "table-large", "table-lock", "table-merge-cells", "table-minus", "table-multiple", "table-network", "table-of-contents", "table-off", "table-picnic", "table-pivot", "table-plus", "table-question", "table-refresh", "table-remove", "table-row-height", "table-row-plus-after", "table-row-plus-before", "table-row-remove", "table-row", "table-search", "table-settings", "table-split-cell", "table-star", "table", "table-sync", "tablet-cellphone", "tablet-dashboard", "table-tennis", "tablet", "tab-minus", "tab-plus", "tab-remove", "tab-search", "tab", "tab-unselected", "taco", "tag-arrow-down-outline", "tag-arrow-down", "tag-arrow-left-outline", "tag-arrow-left", "tag-arrow-right-outline", "tag-arrow-right", "tag-arrow-up-outline", "tag-arrow-up", "tag-check-outline", "tag-check", "tag-faces", "tag-heart-outline", "tag-heart", "tag-minus-outline", "tag-minus", "tag-multiple-outline", "tag-multiple", "tag-off-outline", "tag-off", "tag-outline", "tag-plus-outline", "tag-plus", "tag-remove-outline", "tag-remove", "tag-search-outline", "tag-search", "tag", "tag-text-outline", "tag-text", "tailwind", "tally-mark-1", "tally-mark-2", "tally-mark-3", "tally-mark-4", "tally-mark-5", "tangram", "tanker-truck", "tank", "tape-drive", "tape-measure", "target-account", "target", "target-variant", "taxi", "teamviewer", "tea-outline", "tea", "teddy-bear", "telescope", "television-ambient-light", "television-box", "television-classic-off", "television-classic", "television-guide", "television-off", "television-pause", "television-play", "television-shimmer", "television-speaker-off", "television-speaker", "television-stop", "television", "temperature-celsius", "temperature-fahrenheit", "temperature-kelvin", "temple-buddhist-outline", "temple-buddhist", "temple-hindu-outline", "temple-hindu", "tennis-ball", "tennis", "tent", "terraform", "terrain", "test-tube-empty", "test-tube-off", "test-tube", "text-account", "text-box-check-outline", "text-box-check", "text-box-edit-outline", "text-box-edit", "text-box-minus-outline", "text-box-minus", "text-box-multiple-outline", "text-box-multiple", "text-box-outline", "text-box-plus-outline", "text-box-plus", "text-box-remove-outline", "text-box-remove", "text-box-search-outline", "text-box-search", "text-box", "text-long", "text-recognition", "text-search", "text-search-variant", "text-shadow", "text-short", "text", "texture-box", "texture", "theater", "theme-light-dark", "thermometer-alert", "thermometer-auto", "thermometer-bluetooth", "thermometer-check", "thermometer-chevron-down", "thermometer-chevron-up", "thermometer-high", "thermometer-lines", "thermometer-low", "thermometer-minus", "thermometer-off", "thermometer-plus", "thermometer-probe-off", "thermometer-probe", "thermometer", "thermometer-water", "thermostat-auto", "thermostat-box-auto", "thermostat-box", "thermostat", "thought-bubble-outline", "thought-bubble", "thumb-down-outline", "thumb-down", "thumbs-up-down-outline", "thumbs-up-down", "thumb-up-outline", "thumb-up", "ticket-account", "ticket-confirmation-outline", "ticket-confirmation", "ticket-outline", "ticket-percent-outline", "ticket-percent", "ticket", "tie", "tilde-off", "tilde", "timelapse", "timeline-alert-outline", "timeline-alert", "timeline-check-outline", "timeline-check", "timeline-clock-outline", "timeline-clock", "timeline-minus-outline", "timeline-minus", "timeline-outline", "timeline-plus-outline", "timeline-plus", "timeline-question-outline", "timeline-question", "timeline-remove-outline", "timeline-remove", "timeline", "timeline-text-outline", "timeline-text", "timer-10", "timer-3", "timer-alert-outline", "timer-alert", "timer-cancel-outline", "timer-cancel", "timer-check-outline", "timer-check", "timer-cog-outline", "timer-cog", "timer-edit-outline", "timer-edit", "timer-lock-open-outline", "timer-lock-open", "timer-lock-outline", "timer-lock", "timer-marker-outline", "timer-marker", "timer-minus-outline", "timer-minus", "timer-music-outline", "timer-music", "timer-off-outline", "timer-off", "timer-outline", "timer-pause-outline", "timer-pause", "timer-play-outline", "timer-play", "timer-plus-outline", "timer-plus", "timer-refresh-outline", "timer-refresh", "timer-remove-outline", "timer-remove", "timer-sand-complete", "timer-sand-empty", "timer-sand-full", "timer-sand-paused", "timer-sand", "timer-settings-outline", "timer-settings", "timer-star-outline", "timer-star", "timer-stop-outline", "timer-stop", "timer", "timer-sync-outline", "timer-sync", "timetable", "tire", "toaster-off", "toaster-oven", "toaster", "toggle-switch-off-outline", "toggle-switch-off", "toggle-switch-outline", "toggle-switch", "toggle-switch-variant-off", "toggle-switch-variant", "toilet", "toolbox-outline", "toolbox", "tools", "tooltip-account", "tooltip-cellphone", "tooltip-check-outline", "tooltip-check", "tooltip-edit-outline", "tooltip-edit", "tooltip-image-outline", "tooltip-image", "tooltip-minus-outline", "tooltip-minus", "tooltip-outline", "tooltip-plus-outline", "tooltip-plus", "tooltip-question-outline", "tooltip-question", "tooltip-remove-outline", "tooltip-remove", "tooltip", "tooltip-text-outline", "tooltip-text", "toothbrush-electric", "toothbrush-paste", "toothbrush", "tooth-outline", "tooth", "torch", "tortoise", "toslink", "tournament", "tower-beach", "tower-fire", "town-hall", "tow-truck", "toy-brick-marker-outline", "toy-brick-marker", "toy-brick-minus-outline", "toy-brick-minus", "toy-brick-outline", "toy-brick-plus-outline", "toy-brick-plus", "toy-brick-remove-outline", "toy-brick-remove", "toy-brick-search-outline", "toy-brick-search", "toy-brick", "track-light-off", "track-light", "trackpad-lock", "trackpad", "tractor", "tractor-variant", "trademark", "traffic-cone", "traffic-light-outline", "traffic-light", "train-car-autorack", "train-car-box-full", "train-car-box-open", "train-car-box", "train-car-caboose", "train-car-centerbeam-full", "train-car-centerbeam", "train-car-container", "train-car-flatbed-car", "train-car-flatbed", "train-car-flatbed-tank", "train-car-gondola-full", "train-car-gondola", "train-car-hopper-covered", "train-car-hopper-full", "train-car-hopper", "train-car-intermodal", "train-car-passenger-door-open", "train-car-passenger-door", "train-car-passenger", "train-car-passenger-variant", "train-car", "train-car-tank", "train", "train-variant", "tram-side", "tram", "transcribe-close", "transcribe", "transfer-down", "transfer-left", "transfer-right", "transfer", "transfer-up", "transit-connection-horizontal", "transit-connection", "transit-connection-variant", "transit-detour", "transition-masked", "transition", "transit-skip", "transit-transfer", "translate-off", "translate", "translate-variant", "transmission-tower-export", "transmission-tower-import", "transmission-tower-off", "transmission-tower", "trash-can-outline", "trash-can", "tray-alert", "tray-arrow-down", "tray-arrow-up", "tray-full", "tray-minus", "tray-plus", "tray-remove", "tray", "treasure-chest", "tree-outline", "tree", "trello", "trending-down", "trending-neutral", "trending-up", "triangle-outline", "triangle-small-down", "triangle-small-up", "triangle", "triangle-wave", "triforce", "trophy-award", "trophy-broken", "trophy-outline", "trophy", "trophy-variant-outline", "trophy-variant", "truck-alert-outline", "truck-alert", "truck-cargo-container", "truck-check-outline", "truck-check", "truck-delivery-outline", "truck-delivery", "truck-fast-outline", "truck-fast", "truck-flatbed", "truck-minus-outline", "truck-minus", "truck-outline", "truck-plus-outline", "truck-plus", "truck-remove-outline", "truck-remove", "truck-snowflake", "truck", "truck-trailer", "trumpet", "tshirt-crew-outline", "tshirt-crew", "tshirt-v-outline", "tshirt-v", "tsunami", "tumble-dryer-alert", "tumble-dryer-off", "tumble-dryer", "tune", "tune-variant", "tune-vertical", "tune-vertical-variant", "tunnel-outline", "tunnel", "turbine", "turkey", "turnstile-outline", "turnstile", "turtle", "twitch", "twitter", "two-factor-authentication", "typewriter", "ubisoft", "ubuntu", "ufo-outline", "ufo", "ultra-high-definition", "umbraco", "umbrella-beach-outline", "umbrella-beach", "umbrella-closed-outline", "umbrella-closed", "umbrella-closed-variant", "umbrella-outline", "umbrella", "undo", "undo-variant", "unfold-less-horizontal", "unfold-less-vertical", "unfold-more-horizontal", "unfold-more-vertical", "ungroup", "unicode", "unicorn", "unicorn-variant", "unicycle", "unity", "unreal", "update", "upload-lock-outline", "upload-lock", "upload-multiple", "upload-network-outline", "upload-network", "upload-off-outline", "upload-off", "upload-outline", "upload", "usb-flash-drive-outline", "usb-flash-drive", "usb-port", "usb", "vacuum-outline", "vacuum", "valve-closed", "valve-open", "valve", "vanish-quarter", "vanish", "vanity-light", "van-passenger", "van-utility", "variable-box", "variable", "vector-arrange-above", "vector-arrange-below", "vector-bezier", "vector-circle", "vector-circle-variant", "vector-combine", "vector-curve", "vector-difference-ab", "vector-difference-ba", "vector-difference", "vector-ellipse", "vector-intersection", "vector-line", "vector-link", "vector-point-edit", "vector-point-minus", "vector-point-plus", "vector-point-select", "vector-point", "vector-polygon", "vector-polygon-variant", "vector-polyline-edit", "vector-polyline-minus", "vector-polyline-plus", "vector-polyline-remove", "vector-polyline", "vector-radius", "vector-rectangle", "vector-selection", "vector-square-close", "vector-square-edit", "vector-square-minus", "vector-square-open", "vector-square-plus", "vector-square-remove", "vector-square", "vector-triangle", "vector-union", "vhs", "vibrate-off", "vibrate", "video-2d", "video-3d-off", "video-3d", "video-3d-variant", "video-4k-box", "video-account", "video-box-off", "video-box", "video-check-outline", "video-check", "video-high-definition", "video-image", "video-input-antenna", "video-input-component", "video-input-hdmi", "video-input-scart", "video-input-svideo", "video-marker-outline", "video-marker", "video-minus-outline", "video-minus", "video-off-outline", "video-off", "video-outline", "video-plus-outline", "video-plus", "video-stabilization", "video", "video-switch-outline", "video-switch", "video-vintage", "video-wireless-outline", "video-wireless", "view-agenda-outline", "view-agenda", "view-array-outline", "view-array", "view-carousel-outline", "view-carousel", "view-column-outline", "view-column", "view-comfy-outline", "view-comfy", "view-compact-outline", "view-compact", "view-dashboard-edit-outline", "view-dashboard-edit", "view-dashboard-outline", "view-dashboard", "view-dashboard-variant-outline", "view-dashboard-variant", "view-day-outline", "view-day", "view-gallery-outline", "view-gallery", "view-grid-outline", "view-grid-plus-outline", "view-grid-plus", "view-grid", "view-headline", "view-list-outline", "view-list", "view-module-outline", "view-module", "view-parallel-outline", "view-parallel", "view-quilt-outline", "view-quilt", "view-sequential-outline", "view-sequential", "view-split-horizontal", "view-split-vertical", "view-stream-outline", "view-stream", "view-week-outline", "view-week", "vimeo", "violin", "virtual-reality", "virus-off-outline", "virus-off", "virus-outline", "virus", "vlc", "voicemail", "volcano-outline", "volcano", "volleyball", "volume-equal", "volume-high", "volume-low", "volume-medium", "volume-minus", "volume-mute", "volume-off", "volume-plus", "volume-source", "volume-variant-off", "volume-vibrate", "vote-outline", "vote", "vpn", "vuejs", "vuetify", "walk", "wallet-giftcard", "wallet-membership", "wallet-outline", "wallet-plus-outline", "wallet-plus", "wallet", "wallet-travel", "wall-fire", "wallpaper", "wall-sconce-flat-outline", "wall-sconce-flat", "wall-sconce-flat-variant-outline", "wall-sconce-flat-variant", "wall-sconce-outline", "wall-sconce-round-outline", "wall-sconce-round", "wall-sconce-round-variant-outline", "wall-sconce-round-variant", "wall-sconce", "wall", "wan", "wardrobe-outline", "wardrobe", "warehouse", "washing-machine-alert", "washing-machine-off", "washing-machine", "watch-export", "watch-export-variant", "watch-import", "watch-import-variant", "watch", "watch-variant", "watch-vibrate-off", "watch-vibrate", "water-alert-outline", "water-alert", "water-boiler-alert", "water-boiler-auto", "water-boiler-off", "water-boiler", "water-check-outline", "water-check", "water-circle", "waterfall", "watering-can-outline", "watering-can", "watermark", "water-minus-outline", "water-minus", "water-off-outline", "water-off", "water-opacity", "water-outline", "water-percent-alert", "water-percent", "water-plus-outline", "water-plus", "water-polo", "water-pump-off", "water-pump", "water-remove-outline", "water-remove", "water", "water-sync", "water-thermometer-outline", "water-thermometer", "water-well-outline", "water-well", "waveform", "waves-arrow-left", "waves-arrow-right", "waves-arrow-up", "waves", "wave", "waze", "weather-cloudy-alert", "weather-cloudy-arrow-right", "weather-cloudy-clock", "weather-cloudy", "weather-dust", "weather-fog", "weather-hail", "weather-hazy", "weather-hurricane", "weather-lightning-rainy", "weather-lightning", "weather-night-partly-cloudy", "weather-night", "weather-partly-cloudy", "weather-partly-lightning", "weather-partly-rainy", "weather-partly-snowy-rainy", "weather-partly-snowy", "weather-pouring", "weather-rainy", "weather-snowy-heavy", "weather-snowy-rainy", "weather-snowy", "weather-sunny-alert", "weather-sunny-off", "weather-sunny", "weather-sunset-down", "weather-sunset", "weather-sunset-up", "weather-tornado", "weather-windy", "weather-windy-variant", "web-box", "webcam-off", "webcam", "web-cancel", "web-check", "web-clock", "webhook", "web-minus", "web-off", "webpack", "web-plus", "web-refresh", "web-remove", "webrtc", "web", "web-sync", "wechat", "weight-gram", "weight-kilogram", "weight-lifter", "weight-pound", "weight", "whatsapp", "wheel-barrow", "wheelchair-accessibility", "wheelchair", "whistle-outline", "whistle", "white-balance-auto", "white-balance-incandescent", "white-balance-iridescent", "white-balance-sunny", "widgets-outline", "widgets", "wifi-alert", "wifi-arrow-down", "wifi-arrow-left-right", "wifi-arrow-left", "wifi-arrow-right", "wifi-arrow-up-down", "wifi-arrow-up", "wifi-cancel", "wifi-check", "wifi-cog", "wifi-lock-open", "wifi-lock", "wifi-marker", "wifi-minus", "wifi-off", "wifi-plus", "wifi-refresh", "wifi-remove", "wifi-settings", "wifi-star", "wifi-strength-1-alert", "wifi-strength-1-lock-open", "wifi-strength-1-lock", "wifi-strength-1", "wifi-strength-2-alert", "wifi-strength-2-lock-open", "wifi-strength-2-lock", "wifi-strength-2", "wifi-strength-3-alert", "wifi-strength-3-lock-open", "wifi-strength-3-lock", "wifi-strength-3", "wifi-strength-4-alert", "wifi-strength-4-lock-open", "wifi-strength-4-lock", "wifi-strength-4", "wifi-strength-alert-outline", "wifi-strength-lock-open-outline", "wifi-strength-lock-outline", "wifi-strength-off-outline", "wifi-strength-off", "wifi-strength-outline", "wifi", "wifi-sync", "wikipedia", "window-closed", "window-closed-variant", "window-close", "window-maximize", "window-minimize", "window-open", "window-open-variant", "window-restore", "window-shutter-alert", "window-shutter-auto", "window-shutter-cog", "window-shutter-open", "window-shutter-settings", "window-shutter", "wind-power-outline", "wind-power", "windsock", "wind-turbine-alert", "wind-turbine-check", "wind-turbine", "wiper", "wiper-wash-alert", "wiper-wash", "wizard-hat", "wordpress", "wrap-disabled", "wrap", "wrench-check-outline", "wrench-check", "wrench-clock-outline", "wrench-clock", "wrench-cog-outline", "wrench-cog", "wrench-outline", "wrench", "xamarin", "xml", "xmpp", "yahoo", "yeast", "yin-yang", "yoga", "youtube-gaming", "youtube-studio", "youtube-subscription", "youtube", "youtube-tv", "yurt", "zend", "zigbee", "zip-box-outline", "zip-box", "zip-disk", "zodiac-aquarius", "zodiac-aries", "zodiac-cancer", "zodiac-capricorn", "zodiac-gemini", "zodiac-leo", "zodiac-libra", "zodiac-pisces", "zodiac-sagittarius", "zodiac-scorpio", "zodiac-taurus", "zodiac-virgo", "z-wave"];
;// CONCATENATED MODULE: ./src/components/radix_tree.js








/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/



// (c) https://gist.github.com/mattroseman/bfd541d4ec98ddcd83f3845c31a69400
var RadixNode = /*#__PURE__*/(0,createClass/* default */.Z)(function RadixNode(edgeLabel) {
  var isWord = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  (0,classCallCheck/* default */.Z)(this, RadixNode);
  this.edgeLabel = edgeLabel;
  this.children = {};
  this.isWord = isWord;
});
var RadixTree = /*#__PURE__*/function () {
  function RadixTree(words) {
    (0,classCallCheck/* default */.Z)(this, RadixTree);
    this.root = new RadixNode('');
    if (words) {
      this.addWords(words);
    }
  }
  (0,createClass/* default */.Z)(RadixTree, [{
    key: "addWords",
    value: function addWords(words) {
      var _iterator = (0,createForOfIteratorHelper/* default */.Z)(words),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var word = _step.value;
          this.addWord(word);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "addWord",
    value: function addWord(word) {
      word = word.toLowerCase();
      var currentNode = this.root;

      // iterate over the characters of the given word
      for (var i = 0; i < word.length; i++) {
        var currentCharacter = word[i];

        // check to see if there is a child of the currentNode with an edge label starting with the currentCharacter
        if (currentCharacter in currentNode.children) {
          var edgeLabel = currentNode.children[currentCharacter].edgeLabel;

          // get the common prefix of this child's edge label and what's left of the word
          var commonPrefix = getCommonPrefix(edgeLabel, word.substr(i));

          // if the edge label and what's left of the word are the same
          if (edgeLabel === word.substr(i)) {
            // update this child's data with the given data
            currentNode.children[currentCharacter].isWord = true;
            return;
          }

          // if the edge label contains the entirety of what's left of the word plus some extra
          if (commonPrefix.length < edgeLabel.length && commonPrefix.length === word.substr(i).length) {
            // insert a new node (that's the new word) between the current node and the child, splitting up the edge label
            var newNode = new RadixNode(word.substr(i), true);

            // move the child so it's a child of the new node instead of the current node
            newNode.children[edgeLabel[commonPrefix.length]] = currentNode.children[currentCharacter];

            // make the edge label between the new node and it's child what's left of the edge label
            newNode.children[edgeLabel[commonPrefix.length]].edgeLabel = edgeLabel.substr(commonPrefix.length);

            // make the new node a child of current node
            currentNode.children[currentCharacter] = newNode;
            return;
          }

          // if the edge label and what's left of the word share a common prefix, but differ at some point
          if (commonPrefix.length < edgeLabel.length && commonPrefix.length < word.substr(i).length) {
            // insert a new inbetween node between current node and it's child, that will have children for the old child and a new node for the given word.
            var inbetweenNode = new RadixNode(commonPrefix);

            // move the child so it's a child of the inbetween node instead of the current node
            inbetweenNode.children[edgeLabel[commonPrefix.length]] = currentNode.children[currentCharacter];

            // make the edge label between the inbetween node and the child what's left of the edge label
            inbetweenNode.children[edgeLabel[commonPrefix.length]].edgeLabel = edgeLabel.substr(commonPrefix.length);

            // replace the child with the new inbetween node as a child of the current node
            currentNode.children[currentCharacter] = inbetweenNode;

            // add what's left of the word as another child for the inbetween node
            inbetweenNode.children[word.substr(i)[commonPrefix.length]] = new RadixNode(word.substr(i + commonPrefix.length), true);
            return;
          }

          // the last option is what's left of the word contains the entirety of the edge label plus some extra
          // follow the edge, and take off all the characters the edge has
          i += edgeLabel.length - 1;
          currentNode = currentNode.children[currentCharacter];
        } else {
          var _newNode = new RadixNode(word.substr(i), true);
          currentNode.children[currentCharacter] = _newNode;
          return;
        }
      }
    }
  }, {
    key: "getWords",
    value: function () {
      var _getWords = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(prefix) {
        var word, currentNode, i, character, edgeLabel, commonPrefix, words, dfs, _dfs;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _dfs = function _dfs3() {
                _dfs = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(startingNode, word) {
                  var _i, _Object$keys, _character;
                  return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        // if we are currently visitng a node that's a word
                        if (startingNode.isWord) {
                          // append the given prefix to the running array of words
                          words.push(word);
                        }

                        // if there are no child nodes return
                        if (!(Object.keys(startingNode.children).length === 0)) {
                          _context.next = 3;
                          break;
                        }
                        return _context.abrupt("return");
                      case 3:
                        _i = 0, _Object$keys = Object.keys(startingNode.children);
                      case 4:
                        if (!(_i < _Object$keys.length)) {
                          _context.next = 11;
                          break;
                        }
                        _character = _Object$keys[_i];
                        _context.next = 8;
                        return dfs(startingNode.children[_character], word.concat(startingNode.children[_character].edgeLabel));
                      case 8:
                        _i++;
                        _context.next = 4;
                        break;
                      case 11:
                      case "end":
                        return _context.stop();
                    }
                  }, _callee);
                }));
                return _dfs.apply(this, arguments);
              };
              dfs = function _dfs2(_x2, _x3) {
                return _dfs.apply(this, arguments);
              };
              prefix = prefix.toLowerCase();
              word = '';
              currentNode = this.root; // iterate over the characters of the given prefix, following the Radix Tree
              // to find which node it ends at
              i = 0;
            case 6:
              if (!(i < prefix.length)) {
                _context2.next = 22;
                break;
              }
              character = prefix[i];
              if (!(character in currentNode.children)) {
                _context2.next = 18;
                break;
              }
              edgeLabel = currentNode.children[character].edgeLabel;
              commonPrefix = getCommonPrefix(edgeLabel, prefix.substr(i)); // if the commonPrefix doesn't match the edge label or what's left of the given prefix
              // than what's left of the given prefix differs from the edgeLabel, and there aren't
              // any words in the RadixTree that begin with it.
              if (!(commonPrefix.length !== edgeLabel.length && commonPrefix.length !== prefix.substr(i).length)) {
                _context2.next = 13;
                break;
              }
              return _context2.abrupt("return", []);
            case 13:
              // add the selected child's characters to word
              word = word.concat(currentNode.children[character].edgeLabel);
              // increment i, taking off the edge label's characters
              i += currentNode.children[character].edgeLabel.length - 1;
              // update the current node to the selected child
              currentNode = currentNode.children[character];
              _context2.next = 19;
              break;
            case 18:
              return _context2.abrupt("return", []);
            case 19:
              i++;
              _context2.next = 6;
              break;
            case 22:
              // DFS starting at current node to get all possible words with the given prefix
              words = [];
              _context2.next = 25;
              return dfs(currentNode, word);
            case 25:
              return _context2.abrupt("return", words);
            case 26:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function getWords(_x) {
        return _getWords.apply(this, arguments);
      }
      return getWords;
    }()
  }, {
    key: "getSyncWords",
    value: function getSyncWords(prefix) {
      prefix = prefix.toLowerCase();
      var word = '';
      var currentNode = this.root;

      // iterate over the characters of the given prefix, following the Radix Tree
      // to find which node it ends at
      for (var i = 0; i < prefix.length; i++) {
        var character = prefix[i];
        if (character in currentNode.children) {
          var edgeLabel = currentNode.children[character].edgeLabel;
          var commonPrefix = getCommonPrefix(edgeLabel, prefix.substr(i));

          // if the commonPrefix doesn't match the edge label or what's left of the given prefix
          // than what's left of the given prefix differs from the edgeLabel, and there aren't
          // any words in the RadixTree that begin with it.
          if (commonPrefix.length !== edgeLabel.length && commonPrefix.length !== prefix.substr(i).length) {
            return [];
          }

          // add the selected child's characters to word
          word = word.concat(currentNode.children[character].edgeLabel);
          // increment i, taking off the edge label's characters
          i += currentNode.children[character].edgeLabel.length - 1;
          // update the current node to the selected child
          currentNode = currentNode.children[character];
        } else {
          // if there isn't an edge label that begins with the next prefix character
          // there are no words in the Radix tree that begin with the given prefix
          return [];
        }
      }

      // DFS starting at current node to get all possible words with the given prefix
      var words = [];
      function dfs(startingNode, word) {
        // if we are currently visitng a node that's a word
        if (startingNode.isWord) {
          // append the given prefix to the running array of words
          words.push(word);
        }

        // if there are no child nodes return
        if (Object.keys(startingNode.children).length === 0) {
          return;
        }

        // for each child of the given child node
        for (var _i2 = 0, _Object$keys2 = Object.keys(startingNode.children); _i2 < _Object$keys2.length; _i2++) {
          var _character2 = _Object$keys2[_i2];
          // recursively call dfs on each child, after concating that child's edge label with the given prefix
          // await setImmediatePromise()
          dfs(startingNode.children[_character2], word.concat(startingNode.children[_character2].edgeLabel));
        }
      }
      dfs(currentNode, word);
      return words;
    }
  }]);
  return RadixTree;
}();

/*
 * getCommonPrefix calculates the largest common prefix of two given strings
 */
function getCommonPrefix(a, b) {
  var commonPrefix = '';
  for (var i = 0; i < Math.min(a.length, b.length); i++) {
    if (a[i] !== b[i]) {
      return commonPrefix;
    }
    commonPrefix += a[i];
  }
  return commonPrefix;
}
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/MdiIconPicker.vue?vue&type=script&lang=js






/* harmony default export */ var MdiIconPickervue_type_script_lang_js = ({
  name: "MdiIconPicker",
  props: {
    defaultIcon: {
      type: String,
      default: function _default() {
        return 'map-marker';
      }
    },
    label: {
      type: String,
      default: function _default() {
        return 'Color';
      }
    }
  },
  data: function data() {
    return {
      loading: false,
      showDialog: false,
      searchIcon: '',
      selectedIcon: this.defaultIcon,
      radix: new RadixTree(mdiIcons),
      items: [],
      page: 0,
      // page represents the index of last small array in the list
      itemsToDisplay: [],
      // the list of items to be rendered
      itemsPerRender: 100,
      minLoadingDuration: 50,
      debouncedWatch: debounce(function (newValue, oldValue, cb) {
        cb(newValue);
      }, 255)
    };
  },
  created: function created() {
    this.updateList();
    this.$watch('data', function () {
      this.updateList();
    }, {
      deep: true
    });
  },
  mounted: function mounted() {
    this.loadItems();
  },
  methods: {
    onScroll: function onScroll() {
      this.loadItems();
    },
    saveIcon: function saveIcon(icon) {
      this.selectedIcon = icon;
      this.showDialog = false;
      this.$emit('onSelect', this.selectedIcon);
    },
    // set the list and update it when data changes
    updateList: function updateList() {
      var contentArr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : mdiIcons;
      var chunckedArray = (0,utils/* chunkArray */.F3)(contentArr, this.itemsPerRender); // chunkArray(data,itemsPerRender) to get array of small arrays
      this.items = chunckedArray;
      this.itemsToDisplay = chunckedArray[0];
    },
    // load more items when scrolling to the end of the list
    loadItems: function loadItems() {
      var _this = this;
      if (this.page === this.items.length - 1) return;
      var element = this.$refs["end-of-list"]; //this.endOfList;
      if (!element) return;
      var position = element.getBoundingClientRect();
      // checking whether fully visible
      if (position.top >= 0 && position.bottom <= window.innerHeight && !this.loading) {
        this.loading = true;
        this.page++;
        var st = performance.now();
        var results = [].concat((0,toConsumableArray/* default */.Z)(this.itemsToDisplay), (0,toConsumableArray/* default */.Z)(this.items[this.page]));
        var end = performance.now();
        var duration = end - st;
        var timeoutDuration = end - st > this.minLoadingDuration ? 0 : this.minLoadingDuration - duration;
        setTimeout(function () {
          _this.itemsToDisplay = results;
          _this.loading = false;
          _this.loadItems();
        }, timeoutDuration);
      }
    }
  },
  watch: {
    searchIcon: function searchIcon(newSearchIcon, oldSearchIcon) {
      var _this2 = this;
      this.loading = true;
      this.debouncedWatch(newSearchIcon, oldSearchIcon, function (newSearchIcon) {
        _this2.page = 0;
        _this2.updateList(_this2.radix.getSyncWords(newSearchIcon));
        _this2.loading = false;
      });
    }
  }
});
;// CONCATENATED MODULE: ./src/components/MdiIconPicker.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/MdiIconPicker.vue?vue&type=style&index=0&id=bfa0b52e&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/components/MdiIconPicker.vue?vue&type=style&index=0&id=bfa0b52e&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/components/MdiIconPicker.vue




;


const MdiIconPicker_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(MdiIconPickervue_type_script_lang_js, [['render',MdiIconPickervue_type_template_id_bfa0b52e_scoped_true_render],['__scopeId',"data-v-bfa0b52e"]])

/* harmony default export */ var MdiIconPicker = (MdiIconPicker_exports_);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VAvatar/VAvatar.mjs + 1 modules
var VAvatar = __webpack_require__(40652);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VColorPicker/VColorPicker.mjs + 11 modules
var VColorPicker = __webpack_require__(40668);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/ColorPicker.vue?vue&type=template&id=4f505a40&scoped=true

function ColorPickervue_type_template_id_4f505a40_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                                  
                                                                      
                                                                
                                                      
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VDialog/* VDialog */.B, {
    modelValue: $data.showDialog,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $data.showDialog = $event;
    }),
    "close-on-content-click": false,
    "nudge-right": 40,
    transition: "scale-transition",
    "offset-y": "",
    "max-width": "350px"
  }, {
    activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
      var props = _ref.props;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, (0,runtime_core_esm_bundler/* mergeProps */.dG)({
        modelValue: $data.selectedColor,
        "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
          return $data.selectedColor = $event;
        }),
        label: $props.label
      }, props, {
        readonly: "",
        variant: "solo",
        density: "compact",
        class: "input-text"
      }), {
        "prepend-inner": (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VAvatar/* VAvatar */.V, {
            color: $data.selectedColor,
            density: "compact",
            size: "small"
          }, null, 8, ["color"])];
        }),
        _: 2
      }, 1040, ["modelValue", "label"])];
    }),
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, null, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VContainer/* VContainer */.K, {
            class: "d-flex justify-md-space-between"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VColorPicker/* VColorPicker */.J, {
                "show-swatches": "",
                modelValue: $data.selectedColor,
                "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
                  return $data.selectedColor = $event;
                }),
                mode: "rgba",
                width: "300"
              }, null, 8, ["modelValue"])];
            }),
            _: 1
          })];
        }),
        _: 1
      })];
    }),
    _: 1
  }, 8, ["modelValue"]);
}

/* Vuetify */








;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/ColorPicker.vue?vue&type=script&lang=js
/* harmony default export */ var ColorPickervue_type_script_lang_js = ({
  name: "ColorPicker",
  props: {
    modelValue: String,
    label: {
      type: String,
      default: function _default() {
        return 'Color';
      }
    }
  },
  emits: ['update:modelValue', 'onSelect'],
  data: function data() {
    return {
      loading: false,
      showDialog: false,
      selectedColor: this.modelValue || '#000000'
    };
  },
  watch: {
    selectedColor: function selectedColor() {
      this.$emit('onSelect', this.selectedColor);
      this.$emit('update:modelValue', this.selectedColor);
    }
  }
});
;// CONCATENATED MODULE: ./src/components/ColorPicker.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/ColorPicker.vue?vue&type=style&index=0&id=4f505a40&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/components/ColorPicker.vue?vue&type=style&index=0&id=4f505a40&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/components/ColorPicker.vue




;


const ColorPicker_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ColorPickervue_type_script_lang_js, [['render',ColorPickervue_type_template_id_4f505a40_scoped_true_render],['__scopeId',"data-v-4f505a40"]])

/* harmony default export */ var ColorPicker = (ColorPicker_exports_);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCombobox/VCombobox.mjs + 1 modules
var VCombobox = __webpack_require__(68560);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VGrid/VRow.mjs
var VRow = __webpack_require__(16824);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VList/VListItem.mjs + 1 modules
var VListItem = __webpack_require__(23150);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VTextarea/VTextarea.mjs + 1 modules
var VTextarea = __webpack_require__(34842);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/DataSourceMapping.vue?vue&type=template&id=2e84f7b0&scoped=true


var DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_withScopeId = function _withScopeId(n) {
  return _pushScopeId("data-v-2e84f7b0"), n = n(), _popScopeId(), n;
};
var DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_hoisted_1 = {
  class: "select-container"
};
var DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_hoisted_2 = ["href"];
var DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_hoisted_3 = ["href"];
function DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                    
                                                              
  var _component_SaveDialog = (0,runtime_core_esm_bundler/* resolveComponent */.up)("SaveDialog");
                                                      
                                                    
                                                    
                                                            
                                                                
                                                              
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_hoisted_1, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: $props.label,
    items: $props.dataSources,
    "item-title": "name",
    "item-value": "id",
    variant: "solo",
    modelValue: $props.model.dataSourceId,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $props.model.dataSourceId = $event;
    }),
    density: "compact"
  }, null, 8, ["label", "items", "modelValue"]), $props.model.dataSourceId ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VBtn/* VBtn */.T, {
    key: 0,
    class: "btn-select-func",
    variant: "tonal",
    depressed: "",
    density: "compact",
    icon: "mdi-dots-horizontal",
    tile: "",
    small: "",
    onClick: (0,runtime_dom_esm_bundler/* withModifiers */.iM)($options.showFunctionDialog, ["stop"]),
    disabled: !($props.model.dataSourceId && $options.isValidMapping())
  }, null, 8, ["onClick", "disabled"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $data.showFuncDialog ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_SaveDialog, {
    key: 1,
    title: $setup.dialogFuncTitle,
    name: $setup.funcName,
    cssClass: "func-content",
    onOnClose: $options.onClose,
    onOnSave: $options.save
  }, {
    content: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextarea/* VTextarea */.z, {
        modelValue: $props.model[$setup.funcName],
        "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
          return $props.model[$setup.funcName] = $event;
        }),
        "auto-grow": "",
        label: $setup.dialogFuncTitle,
        rows: "20",
        density: "comfortable"
      }, null, 8, ["modelValue", "label"])];
    }),
    _: 1
  }, 8, ["title", "name", "onOnClose", "onOnSave"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)]), ((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)($props.model, function (value, key) {
    return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [key !== 'dataSourceId' && !key.startsWith('get') ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VCombobox/* VCombobox */.E, {
      key: 0,
      items: $props.mapping.value,
      label: key,
      variant: "solo",
      density: "compact",
      modelValue: $props.model[key],
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return $props.model[key] = $event;
      },
      "item-title": "uiLabel",
      "return-object": ""
    }, {
      selection: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
        var item = _ref.item;
        return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, {
          location: "start"
        }, {
          activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
            var props = _ref2.props;
            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
              color: "grey-lighten-1",
              class: "info-icon"
            }), {
              default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
              }),
              _: 2
            }, 1040)];
          }),
          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
            return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
              cols: "12",
              class: "flex",
              justify: "space-between"
            }, {
              default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(item.value.tooltip, function (item, key) {
                  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                        key: 0,
                        href: item,
                        target: "_blank",
                        rel: "noopener noreferrer"
                      }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_hoisted_2)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                        key: 1
                      }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                    }),
                    _: 2
                  }, 1024);
                }), 256))];
              }),
              _: 2
            }, 1024)])];
          }),
          _: 2
        }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.title), 1)];
      }),
      item: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (data) {
        return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, (0,shared_esm_bundler/* normalizeProps */.vs)((0,runtime_core_esm_bundler/* guardReactiveProps */.F4)(data.props)), {
          title: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref3) {
            var title = _ref3.title;
            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, {
              location: "start"
            }, {
              activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref4) {
                var props = _ref4.props;
                return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
                  color: "grey-lighten-1",
                  class: "info-icon"
                }), {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                    return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
                  }),
                  _: 2
                }, 1040)];
              }),
              default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
                  cols: "12",
                  class: "flex",
                  justify: "space-between"
                }, {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                    return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(data.item.value.tooltip, function (item, key) {
                      return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                          return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                            key: 0,
                            href: item,
                            target: "_blank",
                            rel: "noopener noreferrer"
                          }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_hoisted_3)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                            key: 1
                          }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                        }),
                        _: 2
                      }, 1024);
                    }), 256))];
                  }),
                  _: 2
                }, 1024)])];
              }),
              _: 2
            }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(title), 1)];
          }),
          _: 2
        }, 1040)];
      }),
      _: 2
    }, 1032, ["items", "label", "modelValue", "onUpdate:modelValue"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)], 64);
  }), 256))], 64);
}

/* Vuetify */










;// CONCATENATED MODULE: ./src/views/forms/widget/DataSourceMapping.vue?vue&type=template&id=2e84f7b0&scoped=true

// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VCard/VCardTitle.mjs
var VCardTitle = __webpack_require__(16572);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VToolbar/VToolbarItems.mjs
var VToolbarItems = __webpack_require__(31615);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/SaveDialog.vue?vue&type=template&id=4d75fa90&scoped=true

function SaveDialogvue_type_template_id_4d75fa90_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                
                                                      
                                                    
                                                    
                                                                  
                                                        
                                                      
                                                    
                                                          
                                                                        
                                                            
                                                                      
  var _component_ConfirmDialog = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ConfirmDialog");
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VDialog/* VDialog */.B, {
    "model-value": true,
    class: "dialog",
    "content-class": "content-dialog",
    persistent: ""
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, {
        elevation: "24",
        class: "mx-lg-n16 card form"
      }, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [$setup.title ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VCardTitle/* VCardTitle */.E, {
            key: 0
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VRow/* VRow */.o, {
                align: "center",
                justify: "center"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
                    cols: "12",
                    lg: "6",
                    md: "6",
                    class: "grey lighten-2 fill-height d-flex flex-column justify-center align-center"
                  }, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, {
                        flat: "",
                        tile: ""
                      }, {
                        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardText/* VCardText */.Z, {
                            class: "text-h6"
                          }, {
                            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                              return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)($setup.title), 1)];
                            }),
                            _: 1
                          })];
                        }),
                        _: 1
                      })];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              })];
            }),
            _: 1
          })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSheet/* VSheet */.C, {
            class: "sheet"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
                class: (0,shared_esm_bundler/* normalizeClass */.C_)('form-content ' + $props.cssClass)
              }, [(0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "content", {}, undefined, true)], 2)];
            }),
            _: 3
          }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardActions/* VCardActions */.h, {
            class: "actions"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
                icon: "",
                dark: "",
                onClick: $setup.close,
                density: "compact",
                class: "cancel",
                variant: "tonal"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("mdi-close")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VToolbar/* VToolbar */.i, {
                color: "#e4e4e4",
                class: "save-toolbar",
                density: "compact"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSpacer/* VSpacer */.C), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VToolbarItems/* VToolbarItems */.l, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
                        variant: "text",
                        onClick: $setup.save
                      }, {
                        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                          return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" Save ")];
                        }),
                        _: 1
                      }, 8, ["onClick"])];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              })];
            }),
            _: 1
          })];
        }),
        _: 3
      }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ConfirmDialog, {
        ref: "confirm"
      }, null, 512)];
    }),
    _: 3
  });
}

/* Vuetify */









;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/SaveDialog.vue?vue&type=script&lang=js



/* harmony default export */ var SaveDialogvue_type_script_lang_js = ({
  name: "SaveDialog",
  emits: ['onClose', 'onSave'],
  props: ['title', 'cssClass', 'name'],
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
      slots = _ref.slots,
      emit = _ref.emit,
      expose = _ref.expose;
    var title = props.title;
    var name = props.name || title;
    var callbacks = {
      onSave: function onSave() {},
      onDelete: function onDelete() {},
      onClose: function onClose() {}
    };
    var close = function close() {
      callbacks.onClose();
      emit('onClose');
    };
    var save = function save() {
      callbacks.onSave();
      emit('onSave');
      close();
    };
    //
    (0,runtime_core_esm_bundler/* provide */.JJ)('callbacks', callbacks);
    return {
      title: title,
      name: name,
      save: save,
      close: close
    };
  },
  components: {
    ConfirmDialog: ConfirmDialog
  },
  methods: {
    cancel: function cancel() {
      this.close();
    }
  }
});
;// CONCATENATED MODULE: ./src/components/SaveDialog.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/SaveDialog.vue?vue&type=style&index=0&id=4d75fa90&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/components/SaveDialog.vue?vue&type=style&index=0&id=4d75fa90&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/components/SaveDialog.vue




;


const SaveDialog_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(SaveDialogvue_type_script_lang_js, [['render',SaveDialogvue_type_template_id_4d75fa90_scoped_true_render],['__scopeId',"data-v-4d75fa90"]])

/* harmony default export */ var SaveDialog = (SaveDialog_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/DataSourceMapping.vue?vue&type=script&lang=js


/* harmony default export */ var DataSourceMappingvue_type_script_lang_js = ({
  name: "DataSourceMapping",
  props: ['label', 'name', 'dataSources', 'mapping', 'model', 'transformFunc'],
  components: {
    SaveDialog: SaveDialog
  },
  setup: function setup(props) {
    var dialogFuncTitle = "Function get".concat(props.name, "():");
    var funcName = "get".concat(props.name);
    return {
      dialogFuncTitle: dialogFuncTitle,
      funcName: funcName
    };
  },
  data: function data() {
    return {
      showFuncDialog: false
    };
  },
  methods: {
    onClose: function onClose() {
      this.showFuncDialog = false;
    },
    onSave: function onSave() {
      this.showFuncDialog = false;
    },
    isValidMapping: function isValidMapping() {
      for (var prop in this.model) {
        if (!this.model[prop]) {
          return false;
        }
      }
      return true;
    },
    showFunctionDialog: function showFunctionDialog() {
      if (!this.model[this.funcName]) {
        // inject custom content
        this.model[this.funcName] = this.transformFunc(this.model);
      }
      this.showFuncDialog = true;
    },
    save: function save() {
      this.showFuncDialog = false;
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/DataSourceMapping.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/DataSourceMapping.vue?vue&type=style&index=0&id=2e84f7b0&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/DataSourceMapping.vue?vue&type=style&index=0&id=2e84f7b0&scoped=true&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/DataSourceMapping.vue?vue&type=style&index=1&id=2e84f7b0&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/DataSourceMapping.vue?vue&type=style&index=1&id=2e84f7b0&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/DataSourceMapping.vue




;



const DataSourceMapping_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(DataSourceMappingvue_type_script_lang_js, [['render',DataSourceMappingvue_type_template_id_2e84f7b0_scoped_true_render],['__scopeId',"data-v-2e84f7b0"]])

/* harmony default export */ var DataSourceMapping = (DataSourceMapping_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=script&lang=js

















function defaultCesiumViewLayer() {
  return {
    icon: 'https://storage.googleapis.com/grx-morpheusx-icons/mdi-svg/map-marker.svg',
    iconScale: 1.0,
    zoomLevel: 10,
    iconColor: '#000000CC',
    iconAnchor: [16, 32],
    class: 'PointMarkerLayer',
    labelOffset: [5, 10],
    labelSize: 12,
    labelColor: undefined,
    labelOutlineColor: undefined,
    labelBackgroundColor: undefined
  };
}
function defaultOpenLayerViewLayer() {
  return {
    icon: 'https://storage.googleapis.com/grx-morpheusx-icons/mdi-svg/map-marker.svg',
    iconSize: [16, 16],
    iconAnchor: [16, 32],
    labelOffset: [5, 10],
    iconScale: 1.0,
    zoomLevel: 10,
    iconColor: '#000000CC',
    class: 'PointMarkerLayer'
  };
}
/* harmony default export */ var WidgetFormPointMarkerLayervue_type_script_lang_js = ({
  name: "WidgetFormPointMarkerLayer",
  components: {
    DataSourceMapping: DataSourceMapping,
    ColorPicker: ColorPicker,
    MdiIconPicker: MdiIconPicker,
    VTextFieldNumber: VTextFieldNumber
  },
  setup: function setup(props) {
    var sweStore = useSweStore();
    var route = (0,vue_router/* useRoute */.yj)();
    var dataSources = (0,runtime_core_esm_bundler/* inject */.f3)('dataSources');
    var layer = (0,runtime_core_esm_bundler/* inject */.f3)('reactiveLayer');
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    if (!layer.class) {
      if (widget.name.toLowerCase().startsWith('cesium')) {
        Object.assign(layer, defaultCesiumViewLayer());
      } else if (widget.name.toLowerCase() === 'openlayer') {
        Object.assign(layer, defaultOpenLayerViewLayer());
      }
    }
    if (!layer.ui.label) {
      layer.ui.label = {
        dataSourceId: undefined,
        data: undefined
      };
    }
    if (!layer.ui.location) {
      layer.ui.location = {
        dataSourceId: undefined,
        x: undefined,
        y: undefined,
        z: undefined
      };
    }
    if (!layer.ui.orientation) {
      layer.ui.orientation = {
        dataSourceId: undefined,
        heading: undefined
      };
    }
    if (!layer.ui.markerId) {
      layer.ui.markerId = {
        dataSourceId: undefined,
        markerId: undefined
      };
    }
    layer.ui.urlIcon = false;
    var icon;
    if ('icon' in layer) {
      icon = layer.icon.split('/');
      icon = icon[icon.length - 1].split('.svg')[0];
    } else {
      icon = 'https://storage.googleapis.com/grx-morpheusx-icons/mdi-svg/map-marker.svg'.split('/')[icon.length - 1].split('.svg')[0];
    }
    var dashboardId = route.params.dashboardId;
    return {
      layer: layer,
      icon: icon,
      sweStore: sweStore,
      dataSources: dataSources,
      dashboardId: dashboardId
    };
  },
  computed: {
    labelDataSourceMapping: function labelDataSourceMapping() {
      return this.getMapping(this.layer.ui.label.dataSourceId);
    },
    locationDataSourceMapping: function locationDataSourceMapping() {
      return this.getMapping(this.layer.ui.location.dataSourceId);
    },
    orientationDataSourceMapping: function orientationDataSourceMapping() {
      return this.getMapping(this.layer.ui.orientation.dataSourceId);
    },
    markerIdDataSourceMapping: function markerIdDataSourceMapping() {
      return this.getMapping(this.layer.ui.markerId.dataSourceId);
    }
  },
  watch: {
    'layer.ui.label.data': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'layer.ui.label.getLabel': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'labelDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.label = {
            dataSourceId: undefined,
            data: undefined
          };
        }
      }
    },
    'layer.ui.location.x': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'layer.ui.location.y': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'layer.ui.location.z': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'layer.ui.location.getLocation': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'locationDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.location = {
            dataSourceId: undefined,
            x: undefined,
            y: undefined,
            z: undefined
          };
        }
      }
    },
    'orientationDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.orientation = {
            dataSourceId: undefined,
            heading: undefined
          };
        }
      }
    },
    'layer.ui.orientation.heading': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'layer.ui.orientation.getOrientation': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'markerIdDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.markerId = {
            dataSourceId: undefined,
            markerId: undefined
          };
        }
      }
    },
    'layer.ui.markerId.markerId': {
      handler: function handler(val) {
        this.updateFunc();
      }
    }
  },
  methods: {
    onSelectIcon: function onSelectIcon(icon) {
      this.layer.icon = "https://storage.googleapis.com/grx-morpheusx-icons/mdi-svg/".concat(icon, ".svg");
    },
    updateFunc: function updateFunc() {
      if (this.layer.ui.location.x && this.layer.ui.location.y && this.layer.ui.location.z) {
        var labelFnAsStr, locationFnAsStr, orientationFnAsStr, markerIdFnAsStr;
        if (this.layer.ui.location.getLocation) {
          locationFnAsStr = this.layer.ui.location.getLocation;
        } else {
          // compute one
          locationFnAsStr = this.locationTransformFunc(this.layer.ui.location);
        }
        if (this.layer.ui.orientation.getOrientation) {
          orientationFnAsStr = this.layer.ui.orientation.getOrientation;
        } else {
          // compute one
          orientationFnAsStr = this.orientationTransformFunc(this.layer.ui.orientation);
        }
        if (this.layer.ui.markerId.getMarkerId) {
          markerIdFnAsStr = this.layer.ui.markerId.getMarkerId;
        } else {
          // compute one
          markerIdFnAsStr = this.markerIdTransformFunc(this.layer.ui.markerId);
        }
        if (this.layer.ui.label.getLabel) {
          labelFnAsStr = this.layer.ui.label.getLabel;
        } else {
          // compute one
          labelFnAsStr = this.labelTransformFunc(this.layer.ui.label);
        }
        var func = '';
        if (locationFnAsStr && locationFnAsStr !== '') {
          func = locationFnAsStr;
        }
        if (orientationFnAsStr && orientationFnAsStr !== '') {
          func = func.slice(0, -2) + ',' + orientationFnAsStr.slice(1);
        }
        if (markerIdFnAsStr && markerIdFnAsStr !== '') {
          func = func.slice(0, -2) + ',' + markerIdFnAsStr.slice(1);
        }
        if (labelFnAsStr && labelFnAsStr !== '') {
          func = func.slice(0, -2) + ',' + labelFnAsStr.slice(1);
        }
        this.layer['marker@func'] = func;
      }
    },
    locationTransformFunc: function locationTransformFunc(model) {
      var x, y, z;
      x = (0,esm_typeof/* default */.Z)(model.x) === 'object' ? "rec".concat(model.x.data.path.replaceAll('\/', '.')) : "".concat(model.x);
      y = (0,esm_typeof/* default */.Z)(model.y) === 'object' ? "rec".concat(model.y.data.path.replaceAll('\/', '.')) : "".concat(model.y);
      z = (0,esm_typeof/* default */.Z)(model.z) === 'object' ? "rec".concat(model.z.data.path.replaceAll('\/', '.')) : "".concat(model.z);
      var func = {
        getLocation: {
          dataSourceIds: [model.dataSourceId],
          handler: function handler(rec) {
            return {
              x: $x$,
              y: $y$,
              z: $z$
            };
          }
        }
      };
      var fnAsStr = (0,utils/* stringifyFn */.zr)(func);
      fnAsStr = fnAsStr.replace('$x$', x);
      fnAsStr = fnAsStr.replace('$y$', y);
      fnAsStr = fnAsStr.replace('$z$', z);
      return fnAsStr;
    },
    orientationTransformFunc: function orientationTransformFunc(model) {
      var fnAsStr = '';
      var isOrientation = model.heading;
      if (isOrientation) {
        var heading = (0,esm_typeof/* default */.Z)(model.heading) === 'object' ? "rec".concat(model.heading.data.path.replaceAll('\/', '.')) : "".concat(model.heading);
        var func = {
          getOrientation: {
            dataSourceIds: [model.dataSourceId],
            handler: function handler(rec) {
              return {
                heading: $heading$
              };
            }
          }
        };
        fnAsStr = (0,utils/* stringifyFn */.zr)(func);
        fnAsStr = fnAsStr.replace('$heading$', heading);
      }
      return fnAsStr;
    },
    markerIdTransformFunc: function markerIdTransformFunc(model) {
      var fnAsStr = '';
      var isMarkerId = model.markerId;
      if (isMarkerId) {
        var markerId = (0,esm_typeof/* default */.Z)(model.markerId) === 'object' ? "rec".concat(model.markerId.data.path.replaceAll('\/', '.')) : "".concat(model.markerId);
        var func = {
          getMarkerId: {
            dataSourceIds: [model.dataSourceId],
            handler: function handler(rec) {
              return $markerId$;
            }
          }
        };
        fnAsStr = (0,utils/* stringifyFn */.zr)(func);
        fnAsStr = fnAsStr.replace('$markerId$', markerId);
      }
      return fnAsStr;
    },
    labelTransformFunc: function labelTransformFunc(model) {
      var fnAsStr = '';
      var label = (0,esm_typeof/* default */.Z)(model.data) === 'object' ? "'' + rec".concat(model.data.data.path.replaceAll('\/', '.')) : "'".concat(model.data, "'");
      var func = {};
      func.getLabel = {
        dataSourceIds: [model.dataSourceId],
        handler: function handler(rec) {
          return $label$;
        }
      };
      fnAsStr = (0,utils/* stringifyFn */.zr)(func);
      fnAsStr = fnAsStr.replace('$label$', label);
      console.log(fnAsStr);
      return fnAsStr;
    },
    getMapping: function getMapping(id) {
      var values = (0,reactivity_esm_bundler/* reactive */.qj)({
        value: []
      });
      if (id) {
        this.sweStore.getDataSourceMapping(this.dashboardId, id).then(function (result) {
          values.value = result;
        });
      }
      return values;
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=style&index=0&id=40007516&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=style&index=0&id=40007516&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=style&index=1&id=40007516&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue?vue&type=style&index=1&id=40007516&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormPointMarkerLayer.vue




;



const WidgetFormPointMarkerLayer_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormPointMarkerLayervue_type_script_lang_js, [['render',WidgetFormPointMarkerLayervue_type_template_id_40007516_scoped_true_render],['__scopeId',"data-v-40007516"]])

/* harmony default export */ var WidgetFormPointMarkerLayer = (WidgetFormPointMarkerLayer_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormVideoLayer.vue?vue&type=template&id=03f64f93&scoped=true

var WidgetFormVideoLayervue_type_template_id_03f64f93_scoped_true_withScopeId = function _withScopeId(n) {
  return _pushScopeId("data-v-03f64f93"), n = n(), _popScopeId(), n;
};
var WidgetFormVideoLayervue_type_template_id_03f64f93_scoped_true_hoisted_1 = ["href"];
var WidgetFormVideoLayervue_type_template_id_03f64f93_scoped_true_hoisted_2 = ["href"];
function WidgetFormVideoLayervue_type_template_id_03f64f93_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                      
                                                    
                                                    
                                                            
                                                                
                                                              
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Data Source",
    items: $setup.dataSources,
    "item-title": "name",
    "item-value": "id",
    variant: "solo",
    modelValue: $setup.layer.ui.frameData.dataSourceId,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.layer.ui.frameData.dataSourceId = $event;
    }),
    density: "compact"
  }, null, 8, ["items", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCombobox/* VCombobox */.E, {
    items: $options.dataSourceMapping.value,
    label: "frameData",
    variant: "solo",
    density: "compact",
    modelValue: $setup.layer.ui.frameData.data,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.layer.ui.frameData.data = $event;
    }),
    "item-title": "uiLabel",
    "return-object": ""
  }, {
    selection: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
      var item = _ref.item;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, {
        location: "start"
      }, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
          var props = _ref2.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
            color: "grey-lighten-1",
            class: "info-icon"
          }), {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
            }),
            _: 2
          }, 1040)];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
            cols: "12",
            class: "flex",
            justify: "space-between"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(item.value.tooltip, function (item, key) {
                return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                    return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                      key: 0,
                      href: item,
                      target: "_blank",
                      rel: "noopener noreferrer"
                    }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, WidgetFormVideoLayervue_type_template_id_03f64f93_scoped_true_hoisted_1)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                      key: 1
                    }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                  }),
                  _: 2
                }, 1024);
              }), 256))];
            }),
            _: 2
          }, 1024)])];
        }),
        _: 2
      }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.title), 1)];
    }),
    item: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (data) {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, (0,shared_esm_bundler/* normalizeProps */.vs)((0,runtime_core_esm_bundler/* guardReactiveProps */.F4)(data.props)), {
        title: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref3) {
          var title = _ref3.title;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, {
            location: "start"
          }, {
            activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref4) {
              var props = _ref4.props;
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
                color: "grey-lighten-1",
                class: "info-icon"
              }), {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
                }),
                _: 2
              }, 1040)];
            }),
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
                cols: "12",
                class: "flex",
                justify: "space-between"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(data.item.value.tooltip, function (item, key) {
                    return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                        return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                          key: 0,
                          href: item,
                          target: "_blank",
                          rel: "noopener noreferrer"
                        }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, WidgetFormVideoLayervue_type_template_id_03f64f93_scoped_true_hoisted_2)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                          key: 1
                        }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                      }),
                      _: 2
                    }, 1024);
                  }), 256))];
                }),
                _: 2
              }, 1024)])];
            }),
            _: 2
          }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(title), 1)];
        }),
        _: 2
      }, 1040)];
    }),
    _: 1
  }, 8, ["items", "modelValue"])], 64);
}

/* Vuetify */








;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormVideoLayer.vue?vue&type=script&lang=js










/* harmony default export */ var WidgetFormVideoLayervue_type_script_lang_js = ({
  name: "WidgetFormVideoLayer",
  setup: function setup(props) {
    var sweStore = useSweStore();
    var route = (0,vue_router/* useRoute */.yj)();
    var dashboardId = route.params.dashboardId;
    var dataSources = (0,runtime_core_esm_bundler/* inject */.f3)('dataSources');
    var layer = (0,runtime_core_esm_bundler/* inject */.f3)('reactiveLayer');
    if (!layer.class) {
      layer.class = 'VideoDataLayer';
    }
    if (!layer.ui.frameData) {
      layer.ui.frameData = {
        dataSourceId: undefined,
        data: undefined
      };
    }
    return {
      layer: layer,
      sweStore: sweStore,
      dataSources: dataSources,
      dashboardId: dashboardId
    };
  },
  computed: {
    dataSourceMapping: function dataSourceMapping() {
      var values = (0,reactivity_esm_bundler/* reactive */.qj)({
        value: []
      });
      if (this.layer.ui.frameData.dataSourceId) {
        this.sweStore.getDataSourceMapping(this.dashboardId, this.layer.ui.frameData.dataSourceId).then(function (result) {
          values.value = result;
        });
      }
      return values;
    }
  },
  watch: {
    'layer.ui.frameData.data': {
      handler: function handler(val) {
        if (this.layer.ui.frameData.data) {
          var frameDataPath = (0,esm_typeof/* default */.Z)(this.layer.ui.frameData.data) === 'object' ? "rec".concat(this.layer.ui.frameData.data.data.path.replaceAll('\/', '.')) : "".concat(this.layer.ui.frameData.data);
          var fnAsStr = (0,utils/* stringifyFn */.zr)({
            getFrameData: function getFrameData(rec) {
              return $frameDataPath;
            },
            getTimestamp: function getTimestamp(rec) {
              return rec.timestamp;
            }
          });
          fnAsStr = fnAsStr.replace('$frameDataPath', frameDataPath);
          this.layer['getFrameData@func'] = fnAsStr;
          this.layer.dataSourceId = this.layer.ui.frameData.dataSourceId;
        } else {
          this.layer.ui.frameData = {
            dataSourceId: undefined,
            data: undefined
          };
        }
      },
      deep: true
    },
    'dataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.frameData = {
            dataSourceId: undefined,
            data: undefined
          };
        }
      }
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormVideoLayer.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormVideoLayer.vue?vue&type=style&index=0&id=03f64f93&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormVideoLayer.vue?vue&type=style&index=0&id=03f64f93&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormVideoLayer.vue?vue&type=style&index=1&id=03f64f93&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormVideoLayer.vue?vue&type=style&index=1&id=03f64f93&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormVideoLayer.vue




;



const WidgetFormVideoLayer_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormVideoLayervue_type_script_lang_js, [['render',WidgetFormVideoLayervue_type_template_id_03f64f93_scoped_true_render],['__scopeId',"data-v-03f64f93"]])

/* harmony default export */ var WidgetFormVideoLayer = (WidgetFormVideoLayer_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=template&id=1333c569&scoped=true




var WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_withScopeId = function _withScopeId(n) {
  return _pushScopeId("data-v-1333c569"), n = n(), _popScopeId(), n;
};
var WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_1 = ["href"];
var WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_2 = ["href"];
var WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_3 = ["href"];
var WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_4 = ["href"];
function WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                      
                                                    
                                                    
                                                            
                                                                
                                                              
                                                                  
  var _component_ColorPicker = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ColorPicker");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Data Source",
    items: $setup.dataSources,
    "item-title": "name",
    "item-value": "id",
    variant: "solo",
    modelValue: $setup.layer.ui.values.dataSourceId,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.layer.ui.values.dataSourceId = $event;
    }),
    density: "compact"
  }, null, 8, ["items", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCombobox/* VCombobox */.E, {
    items: $options.dataSourceMapping.value,
    label: "x",
    variant: "solo",
    density: "compact",
    modelValue: $setup.layer.ui.values.x,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.layer.ui.values.x = $event;
    }),
    "item-title": "uiLabel",
    "return-object": ""
  }, {
    selection: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
      var item = _ref.item;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, null, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
          var props = _ref2.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
            color: "grey-lighten-1",
            class: "info-icon"
          }), {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
            }),
            _: 2
          }, 1040)];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
            cols: "12",
            class: "flex",
            justify: "space-between"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(item.value.tooltip, function (item, key) {
                return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                    return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                      key: 0,
                      href: item,
                      target: "_blank",
                      rel: "noopener noreferrer"
                    }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_1)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                      key: 1
                    }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                  }),
                  _: 2
                }, 1024);
              }), 256))];
            }),
            _: 2
          }, 1024)])];
        }),
        _: 2
      }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.title), 1)];
    }),
    item: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (data) {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, (0,shared_esm_bundler/* normalizeProps */.vs)((0,runtime_core_esm_bundler/* guardReactiveProps */.F4)(data.props)), {
        title: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref3) {
          var title = _ref3.title;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, null, {
            activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref4) {
              var props = _ref4.props;
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
                color: "grey-lighten-1",
                class: "info-icon"
              }), {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
                }),
                _: 2
              }, 1040)];
            }),
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
                cols: "12",
                class: "flex",
                justify: "space-between"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(data.item.value.tooltip, function (item, key) {
                    return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                        return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                          key: 0,
                          href: item,
                          target: "_blank",
                          rel: "noopener noreferrer"
                        }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_2)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                          key: 1
                        }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                      }),
                      _: 2
                    }, 1024);
                  }), 256))];
                }),
                _: 2
              }, 1024)])];
            }),
            _: 2
          }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(title), 1)];
        }),
        _: 2
      }, 1040)];
    }),
    _: 1
  }, 8, ["items", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCombobox/* VCombobox */.E, {
    items: $options.dataSourceMapping.value,
    label: "y",
    variant: "solo",
    density: "compact",
    modelValue: $setup.layer.ui.values.y,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $setup.layer.ui.values.y = $event;
    }),
    "item-title": "uiLabel",
    "return-object": ""
  }, {
    selection: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref5) {
      var item = _ref5.item;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, null, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref6) {
          var props = _ref6.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
            color: "grey-lighten-1",
            class: "info-icon"
          }), {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
            }),
            _: 2
          }, 1040)];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
            cols: "12",
            class: "flex",
            justify: "space-between"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(item.value.tooltip, function (item, key) {
                return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                    return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                      key: 0,
                      href: item,
                      target: "_blank",
                      rel: "noopener noreferrer"
                    }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_3)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                      key: 1
                    }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                  }),
                  _: 2
                }, 1024);
              }), 256))];
            }),
            _: 2
          }, 1024)])];
        }),
        _: 2
      }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.title), 1)];
    }),
    item: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (data) {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, (0,shared_esm_bundler/* normalizeProps */.vs)((0,runtime_core_esm_bundler/* guardReactiveProps */.F4)(data.props)), {
        title: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref7) {
          var title = _ref7.title;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, null, {
            activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref8) {
              var props = _ref8.props;
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
                color: "grey-lighten-1",
                class: "info-icon"
              }), {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
                }),
                _: 2
              }, 1040)];
            }),
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
                cols: "12",
                class: "flex",
                justify: "space-between"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(data.item.value.tooltip, function (item, key) {
                    return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VRow/* VRow */.o, null, {
                      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                        return [(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, (0,shared_esm_bundler/* toDisplayString */.zw)(key), 1), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": "), key === 'definition' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("a", {
                          key: 0,
                          href: item,
                          target: "_blank",
                          rel: "noopener noreferrer"
                        }, (0,shared_esm_bundler/* toDisplayString */.zw)(item), 9, WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_hoisted_4)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
                          key: 1
                        }, [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(item), 1)], 64))];
                      }),
                      _: 2
                    }, 1024);
                  }), 256))];
                }),
                _: 2
              }, 1024)])];
            }),
            _: 2
          }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(title), 1)];
        }),
        _: 2
      }, 1040)];
    }),
    _: 1
  }, 8, ["items", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Legend",
    modelValue: $setup.layer.name,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $setup.layer.name = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Y axis label",
    modelValue: $setup.layer.yLabel,
    "onUpdate:modelValue": _cache[4] || (_cache[4] = function ($event) {
      return $setup.layer.yLabel = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Max values",
    modelValue: $setup.layer.maxValues,
    "onUpdate:modelValue": _cache[5] || (_cache[5] = function ($event) {
      return $setup.layer.maxValues = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Stroke width",
    modelValue: $setup.layer.stroke,
    "onUpdate:modelValue": _cache[6] || (_cache[6] = function ($event) {
      return $setup.layer.stroke = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColorPicker, {
    modelValue: $setup.layer.lineColor,
    "onUpdate:modelValue": _cache[7] || (_cache[7] = function ($event) {
      return $setup.layer.lineColor = $event;
    }),
    label: "Line color"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColorPicker, {
    modelValue: $setup.layer.backgroundColor,
    "onUpdate:modelValue": _cache[8] || (_cache[8] = function ($event) {
      return $setup.layer.backgroundColor = $event;
    }),
    label: "Background color"
  }, null, 8, ["modelValue"])], 64);
}

/* Vuetify */









;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=template&id=1333c569&scoped=true

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=script&lang=js















function defaultCurveLayer() {
  return {
    'getValues@func': 'return { x: rec.timestamp, y: rec.location.alt }',
    fill: true,
    backgroundColor: '#57c1ff80',
    lineColor: '#57c1ff80',
    maxValues: 25,
    stroke: 1,
    name: 'Chart',
    class: 'CurveLayer'
  };
}
/* harmony default export */ var WidgetFormCurveLayervue_type_script_lang_js = ({
  name: "WidgetFormCurveLayer",
  components: {
    ColorPicker: ColorPicker
  },
  setup: function setup(props) {
    var sweStore = useSweStore();
    var route = (0,vue_router/* useRoute */.yj)();
    var dashboardId = route.params.dashboardId;
    var layer = (0,runtime_core_esm_bundler/* inject */.f3)('reactiveLayer');
    var dataSources = (0,runtime_core_esm_bundler/* inject */.f3)('dataSources');
    if (!layer.class) {
      Object.assign(layer, defaultCurveLayer());
    }
    if (!layer.ui.values) {
      layer.ui.values = {
        x: undefined,
        y: undefined,
        dataSourceId: undefined
      };
    }
    return {
      layer: layer,
      dataSources: dataSources,
      sweStore: sweStore,
      dashboardId: dashboardId
    };
  },
  computed: {
    dataSourceMapping: function dataSourceMapping() {
      var values = (0,reactivity_esm_bundler/* reactive */.qj)({
        value: []
      });
      if (this.layer.ui.values.dataSourceId) {
        this.sweStore.getDataSourceMapping(this.dashboardId, this.layer.ui.values.dataSourceId).then(function (result) {
          values.value = result;
        });
      }
      return values;
    }
  },
  watch: {
    'layer.maxValues': {
      handler: function handler(val) {
        this.layer.maxValues = parseInt(val);
      }
    },
    'layer.stroke': {
      handler: function handler(val) {
        this.layer.stroke = parseInt(val);
      }
    },
    'layer.ui.values.x': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'layer.ui.values.y': {
      handler: function handler(val) {
        this.updateFunc();
      }
    },
    'dataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.values = {
            x: undefined,
            y: undefined,
            dataSourceId: undefined
          };
        }
      }
    }
  },
  methods: {
    updateFunc: function updateFunc() {
      if (this.layer.ui.values.x && this.layer.ui.values.y) {
        var x, y;
        x = (0,esm_typeof/* default */.Z)(this.layer.ui.values.x) === 'object' ? "rec".concat(this.layer.ui.values.x.data.path.replaceAll('\/', '.')) : "x: ".concat(this.layer.ui.values.x);
        y = (0,esm_typeof/* default */.Z)(this.layer.ui.values.y) === 'object' ? "rec".concat(this.layer.ui.values.y.data.path.replaceAll('\/', '.')) : "y: ".concat(this.layer.ui.values.y);
        var func = {
          getValues: {
            dataSourceIds: [this.layer.ui.values.dataSourceId],
            handler: function handler(rec) {
              return {
                x: $x$,
                y: $y$
              };
            }
          }
        };
        var fnAsStr = (0,utils/* stringifyFn */.zr)(func);
        fnAsStr = fnAsStr.replace('$x$', x);
        fnAsStr = fnAsStr.replace('$y$', y);
        this.layer['getValues@func'] = fnAsStr;
        // build label
        if (this.layer.ui.values.y && this.layer.ui.values.y.data.label && this.layer.ui.values.y.data.uom) {
          var yLabel = " ".concat(this.layer.ui.values.y.data.label, " (").concat(this.layer.ui.values.y.data.uom.code, ")");
          this.layer.yLabel = yLabel;
          this.layer.name = this.layer.ui.values.y.dataSource.name + ' - ' + this.layer.ui.values.y.data.label;
        }
      }
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=style&index=0&id=1333c569&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=style&index=0&id=1333c569&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=style&index=1&id=1333c569&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormCurveLayer.vue?vue&type=style&index=1&id=1333c569&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormCurveLayer.vue




;



const WidgetFormCurveLayer_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormCurveLayervue_type_script_lang_js, [['render',WidgetFormCurveLayervue_type_template_id_1333c569_scoped_true_render],['__scopeId',"data-v-1333c569"]])

/* harmony default export */ var WidgetFormCurveLayer = (WidgetFormCurveLayer_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue?vue&type=template&id=58a86dc6&scoped=true

function WidgetFormFrustumLayervue_type_template_id_58a86dc6_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_DataSourceMapping = (0,runtime_core_esm_bundler/* resolveComponent */.up)("DataSourceMapping");
  var _component_ColorPicker = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ColorPicker");
                                                                  
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "Origin DataSource",
    name: "Origin",
    model: $setup.layer.ui.origin,
    mapping: $options.originDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.originTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "Platform Orientation DataSource",
    name: "PlatformOrientation",
    model: $setup.layer.ui.platformOrientation,
    mapping: $options.platformOrientationDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.platformOrientationTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "Sensor Orientation DataSource",
    name: "SensorOrientation",
    model: $setup.layer.ui.sensorOrientation,
    mapping: $options.sensorOrientationDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.sensorOrientationTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "Range DataSource",
    name: "Range",
    model: $setup.layer.ui.range,
    mapping: $options.rangeDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.rangeTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_DataSourceMapping, {
    label: "FoV DataSource",
    name: "Fov",
    model: $setup.layer.ui.fov,
    mapping: $options.fovDataSourceMapping,
    dataSources: $setup.dataSources,
    transformFunc: $options.fovTransformFunc
  }, null, 8, ["model", "mapping", "dataSources", "transformFunc"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColorPicker, {
    modelValue: $setup.layer.color,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.layer.color = $event;
    }),
    label: "Color"
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSlider/* VSlider */.R, {
    modelValue: $setup.layer.opacity,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $setup.layer.opacity = $event;
    }),
    max: 1.0,
    min: "0",
    step: 0.1,
    "show-ticks": "always",
    label: "Opacity",
    "hide-details": "",
    class: "ma-0 opacity-slider",
    density: "compact",
    variant: "solo"
  }, {
    append: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
        modelValue: $setup.layer.opacity,
        "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
          return $setup.layer.opacity = $event;
        }),
        type: "number",
        style: {
          "width": "85px"
        },
        density: "compact",
        "hide-details": "",
        variant: "outlined"
      }, null, 8, ["modelValue"])];
    }),
    _: 1
  }, 8, ["modelValue", "max", "step"])], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue?vue&type=script&lang=js















function defaultCesiumFrustumLayer() {
  return {
    color: '#B0B0B0B3',
    opacity: 0.25,
    class: 'FrustumLayer'
  };
}
/* harmony default export */ var WidgetFormFrustumLayervue_type_script_lang_js = ({
  name: "WidgetFormFrustumLayer",
  components: {
    ColorPicker: ColorPicker,
    DataSourceMapping: DataSourceMapping
  },
  setup: function setup(props) {
    var sweStore = useSweStore();
    var route = (0,vue_router/* useRoute */.yj)();
    var dashboardId = route.params.dashboardId;
    var dataSources = (0,runtime_core_esm_bundler/* inject */.f3)('dataSources');
    var layer = (0,runtime_core_esm_bundler/* inject */.f3)('reactiveLayer');
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    if (!layer.class) {
      if (widget.name.toLowerCase() === 'cesium') {
        Object.assign(layer, defaultCesiumFrustumLayer());
      } else {
        throw Error("View ".concat(widget.name, " does not support Frustum Layer"));
      }
    }
    if (!layer.ui.origin) {
      layer.ui.origin = {
        x: undefined,
        y: undefined,
        z: undefined,
        dataSourceId: undefined
      };
    }
    if (!layer.ui.range) {
      layer.ui.range = {
        dataSourceId: undefined,
        data: undefined
      };
    }
    if (!layer.ui.fov) {
      layer.ui.fov = {
        dataSourceId: undefined,
        data: undefined
      };
    }
    if (!layer.ui.platformOrientation) {
      layer.ui.platformOrientation = {
        dataSourceId: undefined,
        pitch: undefined,
        heading: undefined,
        roll: undefined
      };
    }
    if (!layer.ui.sensorOrientation) {
      layer.ui.sensorOrientation = {
        dataSourceId: undefined,
        pitch: undefined,
        yaw: undefined,
        roll: undefined
      };
    }
    return {
      layer: layer,
      sweStore: sweStore,
      dataSources: dataSources,
      dashboardId: dashboardId
    };
  },
  computed: {
    originDataSourceMapping: function originDataSourceMapping() {
      return this.getMapping(this.layer.ui.origin.dataSourceId);
    },
    platformOrientationDataSourceMapping: function platformOrientationDataSourceMapping() {
      return this.getMapping(this.layer.ui.platformOrientation.dataSourceId);
    },
    sensorOrientationDataSourceMapping: function sensorOrientationDataSourceMapping() {
      return this.getMapping(this.layer.ui.sensorOrientation.dataSourceId);
    },
    fovDataSourceMapping: function fovDataSourceMapping() {
      return this.getMapping(this.layer.ui.fov.dataSourceId);
    },
    rangeDataSourceMapping: function rangeDataSourceMapping() {
      return this.getMapping(this.layer.ui.range.dataSourceId);
    }
  },
  watch: {
    'layer.ui.origin': {
      handler: function handler(val) {
        this.updateFunc();
      },
      deep: true
    },
    'originDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.origin = {
            dataSourceId: undefined,
            x: undefined,
            y: undefined,
            z: undefined
          };
        }
      }
    },
    'layer.ui.platformOrientation': {
      handler: function handler(val) {
        this.updateFunc();
      },
      deep: true
    },
    'platformOrientationDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.platformOrientation = {
            dataSourceId: undefined,
            heading: undefined,
            pitch: undefined,
            roll: undefined
          };
        }
      }
    },
    'layer.ui.sensorOrientation': {
      handler: function handler(val) {
        this.updateFunc();
      },
      deep: true
    },
    'sensorOrientationDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.sensorOrientation = {
            dataSourceId: undefined,
            yaw: undefined,
            pitch: undefined,
            roll: undefined
          };
        }
      }
    },
    'layer.ui.fov': {
      handler: function handler(val) {
        this.updateFunc();
      },
      deep: true
    },
    'fovDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.fov = {
            dataSourceId: undefined,
            data: undefined
          };
        }
      }
    },
    'layer.ui.range': {
      handler: function handler(val) {
        this.updateFunc();
      },
      deep: true
    },
    'rangeDataSourceMapping.value': {
      handler: function handler(val, oldVal) {
        if (isDefined(oldVal) && Object.keys(oldVal).length > 0) {
          this.layer.ui.range = {
            dataSourceId: undefined,
            data: undefined
          };
        }
      }
    }
  },
  methods: {
    updateFunc: function updateFunc() {
      if (this.layer.ui.origin.x && this.layer.ui.origin.y && this.layer.ui.origin.z && this.layer.ui.platformOrientation.heading && this.layer.ui.platformOrientation.pitch && this.layer.ui.platformOrientation.roll && this.layer.ui.sensorOrientation.yaw && this.layer.ui.sensorOrientation.pitch && this.layer.ui.sensorOrientation.roll && this.layer.ui.fov.data && this.layer.ui.range.data) {
        var originFnAsStr, platformOrientationFnAsStr, sensorOrientationFnAsStr, rangeFnAsStr, fovFnAsStr;
        if (this.layer.ui.origin.getOrigin) {
          originFnAsStr = this.layer.ui.origin.getOrigin;
        } else {
          // compute one
          originFnAsStr = this.originTransformFunc(this.layer.ui.origin);
        }
        if (this.layer.ui.platformOrientation.getPlatformOrientation) {
          platformOrientationFnAsStr = this.layer.ui.platformOrientation.getPlatformOrientation;
        } else {
          // compute one
          platformOrientationFnAsStr = this.platformOrientationTransformFunc(this.layer.ui.platformOrientation);
        }
        if (this.layer.ui.sensorOrientation.getSensorOrientation) {
          sensorOrientationFnAsStr = this.layer.ui.sensorOrientation.getSensorOrientation;
        } else {
          // compute one
          sensorOrientationFnAsStr = this.sensorOrientationTransformFunc(this.layer.ui.sensorOrientation);
        }
        if (this.layer.ui.range.getRange) {
          rangeFnAsStr = this.layer.ui.range.getRange;
        } else {
          // compute one
          rangeFnAsStr = this.rangeTransformFunc(this.layer.ui.range);
        }
        if (this.layer.ui.fov.getFov) {
          fovFnAsStr = this.layer.ui.fov.getFov;
        } else {
          // compute one
          fovFnAsStr = this.fovTransformFunc(this.layer.ui.fov);
        }
        var funcStr = originFnAsStr;
        funcStr = funcStr.slice(0, -2) + ',' + platformOrientationFnAsStr.slice(1);
        funcStr = funcStr.slice(0, -2) + ',' + sensorOrientationFnAsStr.slice(1);
        funcStr = funcStr.slice(0, -2) + ',' + rangeFnAsStr.slice(1);
        funcStr = funcStr.slice(0, -2) + ',' + fovFnAsStr.slice(1);
        this.layer['frustum@func'] = funcStr;
      }
    },
    originTransformFunc: function originTransformFunc(model) {
      var originXPath = (0,esm_typeof/* default */.Z)(model.x) === 'object' ? "rec".concat(model.x.data.path.replaceAll('\/', '.')) : "".concat(model.x);
      var originYPath = (0,esm_typeof/* default */.Z)(model.y) === 'object' ? "rec".concat(model.y.data.path.replaceAll('\/', '.')) : "".concat(model.y);
      var originZPath = (0,esm_typeof/* default */.Z)(model.z) === 'object' ? "rec".concat(model.z.data.path.replaceAll('\/', '.')) : "".concat(model.z);
      var func = {
        getOrigin: {
          dataSourceIds: [model.dataSourceId],
          handler: function handler(rec) {
            return {
              x: $originXPath$,
              y: $originYPath$,
              z: $originZPath$
            };
          }
        }
      };
      var fnAsStr = (0,utils/* stringifyFn */.zr)(func);
      fnAsStr = fnAsStr.replace('$originXPath$', originXPath);
      fnAsStr = fnAsStr.replace('$originYPath$', originYPath);
      fnAsStr = fnAsStr.replace('$originZPath$', originZPath);
      return fnAsStr;
    },
    platformOrientationTransformFunc: function platformOrientationTransformFunc(model) {
      var platformOrientationHeadingPath = (0,esm_typeof/* default */.Z)(model.heading) === 'object' ? "rec".concat(model.heading.data.path.replaceAll('\/', '.')) : "".concat(model.heading);
      var platformOrientationPitchPath = (0,esm_typeof/* default */.Z)(model.pitch) === 'object' ? "rec".concat(model.pitch.data.path.replaceAll('\/', '.')) : "".concat(model.pitch);
      var platformOrientationRollPath = (0,esm_typeof/* default */.Z)(model.roll) === 'object' ? "rec".concat(model.roll.data.path.replaceAll('\/', '.')) : "".concat(model.roll);
      var func = {
        getPlatformOrientation: {
          dataSourceIds: [model.dataSourceId],
          handler: function handler(rec) {
            return {
              heading: $platformOrientationHeading$,
              pitch: $platformOrientationPitch$,
              roll: $platformOrientationRoll$
            };
          }
        }
      };
      var fnAsStr = (0,utils/* stringifyFn */.zr)(func);
      fnAsStr = fnAsStr.replace('$platformOrientationHeading$', platformOrientationHeadingPath);
      fnAsStr = fnAsStr.replace('$platformOrientationPitch$', platformOrientationPitchPath);
      fnAsStr = fnAsStr.replace('$platformOrientationRoll$', platformOrientationRollPath);
      return fnAsStr;
    },
    sensorOrientationTransformFunc: function sensorOrientationTransformFunc(model) {
      var sensorOrientationYawPath = (0,esm_typeof/* default */.Z)(model.yaw) === 'object' ? "rec".concat(model.yaw.data.path.replaceAll('\/', '.')) : "".concat(model.yaw);
      var sensorOrientationPitchPath = (0,esm_typeof/* default */.Z)(model.pitch) === 'object' ? "rec".concat(model.pitch.data.path.replaceAll('\/', '.')) : "".concat(model.pitch);
      var sensorOrientationRollPath = (0,esm_typeof/* default */.Z)(model.roll) === 'object' ? "rec".concat(model.roll.data.path.replaceAll('\/', '.')) : "".concat(model.roll);
      var func = {
        getSensorOrientation: {
          dataSourceIds: [model.dataSourceId],
          handler: function handler(rec) {
            return {
              yaw: $sensorOrientationYaw$,
              pitch: $sensorOrientationPitch$,
              roll: $sensorOrientationRoll$
            };
          }
        }
      };
      var fnAsStr = (0,utils/* stringifyFn */.zr)(func);
      fnAsStr = fnAsStr.replace('$sensorOrientationYaw$', sensorOrientationYawPath);
      fnAsStr = fnAsStr.replace('$sensorOrientationPitch$', sensorOrientationPitchPath);
      fnAsStr = fnAsStr.replace('$sensorOrientationRoll$', sensorOrientationRollPath);
      return fnAsStr;
    },
    rangeTransformFunc: function rangeTransformFunc(model) {
      var rangePath = (0,esm_typeof/* default */.Z)(model.data) === 'object' ? "rec".concat(model.data.data.path.replaceAll('\/', '.')) : "".concat(model.data);
      var func = {
        getRange: {
          dataSourceIds: [model.dataSourceId],
          handler: function handler(rec) {
            return $range$;
          }
        }
      };
      var fnAsStr = (0,utils/* stringifyFn */.zr)(func);
      fnAsStr = fnAsStr.replace('$range$', rangePath);
      return fnAsStr;
    },
    fovTransformFunc: function fovTransformFunc(model) {
      var fovPath = (0,esm_typeof/* default */.Z)(model.data) === 'object' ? "rec".concat(model.data.data.path.replaceAll('\/', '.')) : "".concat(model.data);
      var func = {
        getFov: {
          dataSourceIds: [model.dataSourceId],
          handler: function handler(rec) {
            return $fov$;
          }
        }
      };
      var fnAsStr = (0,utils/* stringifyFn */.zr)(func);
      fnAsStr = fnAsStr.replace('$fov$', fovPath);
      return fnAsStr;
    },
    getMapping: function getMapping(id) {
      var values = (0,reactivity_esm_bundler/* reactive */.qj)({
        value: []
      });
      if (id) {
        this.sweStore.getDataSourceMapping(this.dashboardId, id).then(function (result) {
          values.value = result;
        });
      }
      return values;
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue?vue&type=style&index=0&id=58a86dc6&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue?vue&type=style&index=0&id=58a86dc6&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue?vue&type=style&index=1&id=58a86dc6&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue?vue&type=style&index=1&id=58a86dc6&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormFrustumLayer.vue




;



const WidgetFormFrustumLayer_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormFrustumLayervue_type_script_lang_js, [['render',WidgetFormFrustumLayervue_type_template_id_58a86dc6_scoped_true_render],['__scopeId',"data-v-58a86dc6"]])

/* harmony default export */ var WidgetFormFrustumLayer = (WidgetFormFrustumLayer_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormLayers.vue?vue&type=script&lang=js










/* harmony default export */ var WidgetFormLayersvue_type_script_lang_js = ({
  name: "WidgetFormLayers",
  components: {
    WidgetFormFrustumLayer: WidgetFormFrustumLayer,
    WidgetFormCurveLayer: WidgetFormCurveLayer,
    WidgetFormVideoLayer: WidgetFormVideoLayer,
    WidgetFormPointMarkerLayer: WidgetFormPointMarkerLayer
  },
  props: ['layer', 'editing'],
  setup: function setup(props) {
    var clientStore = useClientStore();
    var route = (0,vue_router/* useRoute */.yj)();
    var clientConfig = clientStore.clientConfig;
    var _route$params = route.params,
      widgetId = _route$params.widgetId,
      dashboardId = _route$params.dashboardId,
      windowId = _route$params.windowId;
    var dataSources = [];
    var _iterator = (0,createForOfIteratorHelper/* default */.Z)(clientConfig.servers),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var server = _step.value;
        dataSources.push.apply(dataSources, (0,toConsumableArray/* default */.Z)(server.dataSources));
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    var widget = (0,runtime_core_esm_bundler/* inject */.f3)('widget');
    var reactiveLayer = (0,reactivity_esm_bundler/* reactive */.qj)(props.layer);
    (0,runtime_core_esm_bundler/* provide */.JJ)('reactiveLayer', reactiveLayer);
    (0,runtime_core_esm_bundler/* provide */.JJ)('dataSources', dataSources);
    return {
      widget: widget,
      reactiveLayer: reactiveLayer
    };
  },
  methods: {
    removeFromWidget: function removeFromWidget(event) {
      var newLayers = [];
      var _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(this.widget.layers),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var layer = _step2.value;
          if (layer.id !== this.layer.id) {
            newLayers.push(layer);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      this.widget.layers = newLayers;
    },
    addToWidget: function addToWidget(event) {
      this.widget.layers.push(this.layer);
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormLayers.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/layers/WidgetFormLayers.vue?vue&type=style&index=0&id=6795a90b&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormLayers.vue?vue&type=style&index=0&id=6795a90b&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/layers/WidgetFormLayers.vue




;


const WidgetFormLayers_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormLayersvue_type_script_lang_js, [['render',WidgetFormLayersvue_type_template_id_6795a90b_scoped_true_render],['__scopeId',"data-v-6795a90b"]])

/* harmony default export */ var WidgetFormLayers = (WidgetFormLayers_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetForm.vue?vue&type=script&lang=js









/* harmony default export */ var WidgetFormvue_type_script_lang_js = ({
  name: "WidgetForm",
  emits: ['onClose'],
  inject: ['callbacks'],
  props: ['id', 'serverId', 'edit'],
  components: {
    WidgetFormLayers: WidgetFormLayers,
    WidgetFormType: WidgetFormType
  },
  setup: function setup(props) {
    var route = (0,vue_router/* useRoute */.yj)();
    var _route$params = route.params,
      dashboardId = _route$params.dashboardId,
      windowId = _route$params.windowId;
    var clientStore = useClientStore();
    var uiStore = useUiStore();
    var widget = (0,dist/* klona */.Y)(clientStore.getWidgetById(dashboardId, windowId, props.id));
    if (!isDefined(widget)) {
      widget = defaultWidget();
    }
    widget.version = 0;
    widget.supportedLayers = [];
    widget = (0,reactivity_esm_bundler/* reactive */.qj)(widget);
    (0,runtime_core_esm_bundler/* provide */.JJ)('widget', widget);
    var formType = '';
    return {
      widget: widget,
      clientStore: clientStore,
      uiStore: uiStore,
      windowId: windowId,
      dashboardId: dashboardId,
      formType: formType
    };
  },
  beforeMount: function beforeMount() {
    this.callbacks.onSave = this.save;
    this.callbacks.onDelete = this.deleteWidget;
  },
  methods: {
    defaultLayer: function defaultLayer() {
      return defaults_defaultLayer();
    },
    save: function save() {
      console.log('Saving widget form..');
      console.log(this.widget);
      var window = this.clientStore.getWindowById(this.dashboardId, this.windowId);
      if (!this.edit) {
        this.uiStore.addGridItem(this.dashboardId, window, this.widget);
      } else {
        this.uiStore.editGridItem(this.dashboardId, window, this.widget);
      }
      this.uiStore.setEditMode(true);
    },
    uuid: function uuid() {
      return randomUUID();
    },
    deleteWidget: function deleteWidget() {
      this.uiStore.removeGridItem(this.dashboardId, this.windowId, this.widget.id);
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetForm.vue?vue&type=style&index=0&id=10b8d6f7&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetForm.vue?vue&type=style&index=0&id=10b8d6f7&scoped=true&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/widget/WidgetForm.vue?vue&type=style&index=1&id=10b8d6f7&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetForm.vue?vue&type=style&index=1&id=10b8d6f7&lang=css

;// CONCATENATED MODULE: ./src/views/forms/widget/WidgetForm.vue




;



const WidgetForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(WidgetFormvue_type_script_lang_js, [['render',WidgetFormvue_type_template_id_10b8d6f7_scoped_true_render],['__scopeId',"data-v-10b8d6f7"]])

/* harmony default export */ var WidgetForm = (WidgetForm_exports_);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VForm/VForm.mjs
var VForm = __webpack_require__(96422);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/DataSourceForm.vue?vue&type=template&id=de741a22

function DataSourceFormvue_type_template_id_de741a22_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_Server = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Server");
                                                          
  var _component_DataSourceSweForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("DataSourceSweForm");
                                                      
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VForm/* VForm */.O, {
    "fast-fail": ""
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_Server, {
        modelValue: $setup.state.server,
        "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
          return $setup.state.server = $event;
        })
      }, null, 8, ["modelValue"]), $setup.state.server ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VSelect/* VSelect */.rL, {
        key: 0,
        label: "Type",
        items: $setup.types,
        variant: "solo",
        density: "compact",
        modelValue: $setup.state.dataSource.type,
        "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
          return $setup.state.dataSource.type = $event;
        })
      }, null, 8, ["items", "modelValue"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $setup.state.dataSource.type === 'SweApiStream' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_DataSourceSweForm, {
        key: $setup.state.server
      })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)];
    }),
    _: 1
  });
}

/* Vuetify */




;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/DataSourceSweForm.vue?vue&type=template&id=9135bc5e


function DataSourceSweFormvue_type_template_id_9135bc5e_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                  
                                                          
  var _component_ProtocolsForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ProtocolsForm");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Name",
    modelValue: $setup.state.dataSource.name,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.state.dataSource.name = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "System",
    items: $data.systems,
    variant: "solo",
    density: "compact",
    "item-title": "name",
    "item-value": "id",
    "return-object": "",
    "onUpdate:modelValue": [$options.updateSystem, _cache[1] || (_cache[1] = function ($event) {
      return $data.system = $event;
    })],
    modelValue: $data.system
  }, null, 8, ["items", "onUpdate:modelValue", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "DataStream",
    items: $data.dataStreams,
    variant: "solo",
    density: "compact",
    "return-object": "",
    "item-title": "name",
    "onUpdate:modelValue": [$options.updateDataStream, _cache[2] || (_cache[2] = function ($event) {
      return $data.datastream = $event;
    })],
    modelValue: $data.datastream
  }, null, 8, ["items", "onUpdate:modelValue", "modelValue"]), $setup.state.dataSource.resource ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
    key: 0
  }, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ProtocolsForm, {
    protocols: $data.protocols
  }, null, 8, ["protocols"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Response Format",
    items: $data.responseFormats,
    variant: "solo",
    density: "compact",
    modelValue: $setup.state.dataSource.responseFormat,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $setup.state.dataSource.responseFormat = $event;
    })
  }, null, 8, ["items", "modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Prefetch batch duration",
    modelValue: $setup.state.dataSource.prefetchBatchDuration,
    "onUpdate:modelValue": _cache[4] || (_cache[4] = function ($event) {
      return $setup.state.dataSource.prefetchBatchDuration = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Batch size",
    modelValue: $setup.state.dataSource.prefetchBatchSize,
    "onUpdate:modelValue": _cache[5] || (_cache[5] = function ($event) {
      return $setup.state.dataSource.prefetchBatchSize = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Time shift",
    modelValue: $setup.state.dataSource.timeShift,
    "onUpdate:modelValue": _cache[6] || (_cache[6] = function ($event) {
      return $setup.state.dataSource.timeShift = $event;
    })
  }, null, 8, ["modelValue"])], 64)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./src/views/forms/datasource/DataSourceSweForm.vue?vue&type=template&id=9135bc5e

;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/ProtocolsForm.vue?vue&type=template&id=2c9f92be&scoped=true

function ProtocolsFormvue_type_template_id_2c9f92be_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                                  
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Protocol",
    items: $props.protocols,
    variant: "solo",
    density: "compact",
    "item-title": "title",
    modelValue: $options.state.dataSource.protocol,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $options.state.dataSource.protocol = $event;
    })
  }, null, 8, ["items", "modelValue"]), $options.state.dataSource.protocol === 'mqtt' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
    key: 0
  }, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Username",
    modelValue: $options.state.dataSource.mqttOpts.username,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $options.state.dataSource.mqttOpts.username = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "password",
    modelValue: $options.state.dataSource.mqttOpts.password,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $options.state.dataSource.mqttOpts.password = $event;
    })
  }, null, 8, ["modelValue"])], 64)) : $options.state.dataSource.protocol === 'ws' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
    key: 1
  }, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "User name",
    modelValue: $options.state.dataSource.connectorOpts.username,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $options.state.dataSource.connectorOpts.username = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Password",
    modelValue: $options.state.dataSource.connectorOpts.password,
    "onUpdate:modelValue": _cache[4] || (_cache[4] = function ($event) {
      return $options.state.dataSource.connectorOpts.password = $event;
    })
  }, null, 8, ["modelValue"])], 64)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), $options.state.dataSource.protocol === 'mqtt' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
    key: 2
  }, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Prefix",
    modelValue: $options.state.dataSource.mqttOpts.prefix,
    "onUpdate:modelValue": _cache[5] || (_cache[5] = function ($event) {
      return $options.state.dataSource.mqttOpts.prefix = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Endpoint",
    modelValue: $options.state.dataSource.mqttOpts.endpointUrl,
    "onUpdate:modelValue": _cache[6] || (_cache[6] = function ($event) {
      return $options.state.dataSource.mqttOpts.endpointUrl = $event;
    })
  }, null, 8, ["modelValue"])], 64)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/ProtocolsForm.vue?vue&type=script&lang=js
/* harmony default export */ var ProtocolsFormvue_type_script_lang_js = ({
  name: "ProtocolsForm",
  props: ['protocols'],
  inject: ['state']
});
;// CONCATENATED MODULE: ./src/views/forms/datasource/ProtocolsForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/ProtocolsForm.vue?vue&type=style&index=0&id=2c9f92be&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/datasource/ProtocolsForm.vue?vue&type=style&index=0&id=2c9f92be&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/datasource/ProtocolsForm.vue




;


const ProtocolsForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ProtocolsFormvue_type_script_lang_js, [['render',ProtocolsFormvue_type_template_id_2c9f92be_scoped_true_render],['__scopeId',"data-v-2c9f92be"]])

/* harmony default export */ var ProtocolsForm = (ProtocolsForm_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/ModeForm.vue?vue&type=template&id=bc3b617e

function ModeFormvue_type_template_id_bc3b617e_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                          
                                                                  
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSelect/* VSelect */.rL, {
    label: "Modes",
    items: $setup.modes,
    variant: "solo",
    density: "compact",
    modelValue: $setup.state.dataSource.mode,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $setup.state.dataSource.mode = $event;
    })
  }, null, 8, ["items", "modelValue"]), $setup.state.dataSource.mode === 'replay' ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
    key: 0
  }, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Time shift",
    modelValue: $setup.state.dataSource.timeShift,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $setup.state.dataSource.timeShift = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Prefetch batch duration",
    modelValue: $setup.state.dataSource.prefetchBatchDuration,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $setup.state.dataSource.prefetchBatchDuration = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Prefetch batch size",
    modelValue: $setup.state.dataSource.prefetchBatchSize,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $setup.state.dataSource.prefetchBatchSize = $event;
    })
  }, null, 8, ["modelValue"])], 64)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/ModeForm.vue?vue&type=script&lang=js

/* harmony default export */ var ModeFormvue_type_script_lang_js = ({
  name: "ModeForm",
  setup: function setup(props) {
    var modes = [{
      title: 'Real Time',
      value: 'realTime'
    }, {
      title: 'Replay',
      value: 'replay'
    }, {
      title: 'Batch',
      value: 'batch'
    }];
    var state = (0,runtime_core_esm_bundler/* inject */.f3)('state');
    return {
      modes: modes,
      state: state
    };
  },
  data: function data() {
    return {
      mode: 'realTime',
      realTime: {
        startTime: 'now',
        // not mutated
        endTime: '2055-01-01T00:00:00Z',
        // not mutated
        timeShift: 0,
        // not mutated
        prefetchBatchDuration: 5000,
        // not mutated
        prefetchBatchSize: 250 // not mutated
      },

      replay: {
        startTime: '2000-01-01T00:00:00Z',
        endTime: '2055-01-01T00:00:00Z',
        timeShift: 0,
        prefetchBatchDuration: 5000,
        prefetchBatchSize: 250
      }
    };
  }
});
;// CONCATENATED MODULE: ./src/views/forms/datasource/ModeForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/datasource/ModeForm.vue




;
const ModeForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ModeFormvue_type_script_lang_js, [['render',ModeFormvue_type_template_id_bc3b617e_render]])

/* harmony default export */ var ModeForm = (ModeForm_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/DataSourceSweForm.vue?vue&type=script&lang=js
















/* harmony default export */ var DataSourceSweFormvue_type_script_lang_js = ({
  name: "DataSourceSweForm",
  components: {
    ProtocolsForm: ProtocolsForm,
    ModeForm: ModeForm
  },
  setup: function setup(props) {
    var uiStore = useUiStore();
    var sweStore = useSweStore();
    var route = (0,vue_router/* useRoute */.yj)();
    // check if the dashboard exists
    var dashboardId = route.params.dashboardId;
    var state = (0,runtime_core_esm_bundler/* inject */.f3)('state');
    state.dataSource.mode = 'replay';
    if (!state.dataSource.timeShift) {
      state.dataSource.timeShift = 0;
    }
    if (!state.dataSource.prefetchBatchDuration) {
      state.dataSource.prefetchBatchDuration = 5000;
    }
    if (!state.dataSource.prefetchBatchSize) {
      state.dataSource.prefetchBatchSize = 250;
    }
    // defines specific properties of SWE datasource
    state.specType = {
      resource: undefined,
      parentId: undefined,
      keywords: undefined,
      includedProps: undefined,
      excludeProps: undefined,
      roi: undefined,
      featureOfInterest: undefined,
      observedProperty: undefined,
      startTime: undefined,
      endTime: undefined
    };
    return {
      uiStore: uiStore,
      state: state,
      sweStore: sweStore,
      dashboardId: dashboardId
    };
  },
  data: function data() {
    return {
      dataStreams: [],
      systems: undefined,
      protocols: [{
        title: 'WebSocket',
        value: 'ws'
      }, {
        title: 'MQTT',
        value: 'mqtt'
      }],
      responseFormats: ['application/swe+json', 'application/om+json', 'application/swe+binary', 'application/swe+csv', 'application/swe+xml'],
      system: undefined,
      datastream: undefined
    };
  },
  watch: {
    datastream: function datastream(dataStream) {
      if (!this.state.dataSource.startTime) {
        // at this stage, we assign default start/end time of the datastream
        this.state.dataSource.startTime = dataStream.phenomenonTime[0];
        this.state.dataSource.endTime = dataStream.phenomenonTime[1];
      }
    }
  },
  mounted: function mounted() {
    var _this = this;
    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
      var _iterator, _step, s;
      return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (_this.systems) {
              _context.next = 32;
              break;
            }
            _context.prev = 1;
            _context.next = 4;
            return _this.sweStore.getSystems(_this.dashboardId, _this.state.server.id);
          case 4:
            _this.systems = _context.sent;
            if (!_this.state.dataSource.parentId) {
              _context.next = 27;
              break;
            }
            _iterator = (0,createForOfIteratorHelper/* default */.Z)(_this.systems);
            _context.prev = 7;
            _iterator.s();
          case 9:
            if ((_step = _iterator.n()).done) {
              _context.next = 16;
              break;
            }
            s = _step.value;
            if (!(s.id === _this.state.dataSource.parentId)) {
              _context.next = 14;
              break;
            }
            _this.system = s;
            return _context.abrupt("break", 16);
          case 14:
            _context.next = 9;
            break;
          case 16:
            _context.next = 21;
            break;
          case 18:
            _context.prev = 18;
            _context.t0 = _context["catch"](7);
            _iterator.e(_context.t0);
          case 21:
            _context.prev = 21;
            _iterator.f();
            return _context.finish(21);
          case 24:
            if (!_this.system) {
              _context.next = 27;
              break;
            }
            _context.next = 27;
            return _this.fetchDataStream(_this.state.dataSource.parentId);
          case 27:
            _context.next = 32;
            break;
          case 29:
            _context.prev = 29;
            _context.t1 = _context["catch"](1);
            _this.uiStore.ui.snack = {
              message: 'Cannot Fetch Systems',
              type: 'error'
            };
          case 32:
          case "end":
            return _context.stop();
        }
      }, _callee, null, [[1, 29], [7, 18, 21, 24]]);
    }))();
  },
  methods: {
    updateSystem: function updateSystem(system) {
      this.state.dataSource.parentId = system.id;
      this.fetchDataStream(system.id);
    },
    updateDataStream: function updateDataStream(dataStream) {
      this.state.dataSource.resource = "/api/datastreams/".concat(dataStream.id, "/observations");
      this.state.dataSource.name = dataStream.name;
    },
    fetchDataStream: function fetchDataStream(systemId) {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        var regex, id, _iterator2, _step2, d;
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return _this2.sweStore.getDataStreams(_this2.dashboardId, _this2.state.server.id, systemId);
            case 2:
              _this2.dataStreams = _context2.sent;
              if (!_this2.state.dataSource.resource) {
                _context2.next = 24;
                break;
              }
              regex = new RegExp("^(.*?)\/datastreams\/(.*)\/observations");
              id = _this2.state.dataSource.resource.match(regex)[2];
              _iterator2 = (0,createForOfIteratorHelper/* default */.Z)(_this2.dataStreams);
              _context2.prev = 7;
              _iterator2.s();
            case 9:
              if ((_step2 = _iterator2.n()).done) {
                _context2.next = 16;
                break;
              }
              d = _step2.value;
              if (!(d.id === id)) {
                _context2.next = 14;
                break;
              }
              _this2.datastream = d;
              return _context2.abrupt("break", 16);
            case 14:
              _context2.next = 9;
              break;
            case 16:
              _context2.next = 21;
              break;
            case 18:
              _context2.prev = 18;
              _context2.t0 = _context2["catch"](7);
              _iterator2.e(_context2.t0);
            case 21:
              _context2.prev = 21;
              _iterator2.f();
              return _context2.finish(21);
            case 24:
            case "end":
              return _context2.stop();
          }
        }, _callee2, null, [[7, 18, 21, 24]]);
      }))();
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/datasource/DataSourceSweForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/datasource/DataSourceSweForm.vue




;
const DataSourceSweForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(DataSourceSweFormvue_type_script_lang_js, [['render',DataSourceSweFormvue_type_template_id_9135bc5e_render]])

/* harmony default export */ var DataSourceSweForm = (DataSourceSweForm_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/Server.vue?vue&type=template&id=234a23f0&scoped=true


var Servervue_type_template_id_234a23f0_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-234a23f0"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var Servervue_type_template_id_234a23f0_scoped_true_hoisted_1 = /*#__PURE__*/Servervue_type_template_id_234a23f0_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, "id", -1);
});
var Servervue_type_template_id_234a23f0_scoped_true_hoisted_2 = /*#__PURE__*/Servervue_type_template_id_234a23f0_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, "name", -1);
});
var Servervue_type_template_id_234a23f0_scoped_true_hoisted_3 = /*#__PURE__*/Servervue_type_template_id_234a23f0_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, "endpoint", -1);
});
var Servervue_type_template_id_234a23f0_scoped_true_hoisted_4 = /*#__PURE__*/Servervue_type_template_id_234a23f0_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("b", null, "tls", -1);
});
function Servervue_type_template_id_234a23f0_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                      
                                                    
                                                    
                                                            
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VSelect/* VSelect */.rL, {
    label: "Server",
    items: $setup.servers,
    variant: "solo",
    density: "compact",
    "item-title": "name",
    "return-object": ""
  }, {
    selection: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
      var item = _ref.item;
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTooltip/* VTooltip */.N, {
        location: "start"
      }, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
          var props = _ref2.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, (0,runtime_core_esm_bundler/* mergeProps */.dG)(props, {
            color: "grey-lighten-1",
            class: "info-icon-server"
          }), {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" mdi-information ")];
            }),
            _: 2
          }, 1040)];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
            cols: "12",
            class: "flex",
            justify: "space-between"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VRow/* VRow */.o, null, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [Servervue_type_template_id_234a23f0_scoped_true_hoisted_1, (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.raw.id), 1)];
                }),
                _: 2
              }, 1024), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VRow/* VRow */.o, null, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [Servervue_type_template_id_234a23f0_scoped_true_hoisted_2, (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.raw.name), 1)];
                }),
                _: 2
              }, 1024), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VRow/* VRow */.o, null, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [Servervue_type_template_id_234a23f0_scoped_true_hoisted_3, (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.raw.endpoint), 1)];
                }),
                _: 2
              }, 1024), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VRow/* VRow */.o, null, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [Servervue_type_template_id_234a23f0_scoped_true_hoisted_4, (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(": " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.raw.tls), 1)];
                }),
                _: 2
              }, 1024)];
            }),
            _: 2
          }, 1024)])];
        }),
        _: 2
      }, 1024), (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" " + (0,shared_esm_bundler/* toDisplayString */.zw)(item.title), 1)];
    }),
    _: 1
  }, 8, ["items"]);
}

/* Vuetify */






;// CONCATENATED MODULE: ./src/views/forms/datasource/Server.vue?vue&type=template&id=234a23f0&scoped=true

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/Server.vue?vue&type=script&lang=js


/* harmony default export */ var Servervue_type_script_lang_js = ({
  name: "Server",
  setup: function setup(props) {
    var clientStore = useClientStore();
    var route = (0,vue_router/* useRoute */.yj)();
    // check if the dashboard exists
    var dashboardId = route.params.dashboardId;
    var servers = clientStore.getServersByDashboard(dashboardId);
    return {
      servers: servers
    };
  }
});
;// CONCATENATED MODULE: ./src/views/forms/datasource/Server.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/Server.vue?vue&type=style&index=0&id=234a23f0&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/datasource/Server.vue?vue&type=style&index=0&id=234a23f0&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/datasource/Server.vue




;


const Server_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(Servervue_type_script_lang_js, [['render',Servervue_type_template_id_234a23f0_scoped_true_render],['__scopeId',"data-v-234a23f0"]])

/* harmony default export */ var Server = (Server_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/datasource/DataSourceForm.vue?vue&type=script&lang=js











/* harmony default export */ var DataSourceFormvue_type_script_lang_js = ({
  name: "DataSourceForm",
  props: ['id', 'serverId', 'edit'],
  emits: ['onClose'],
  inject: ['callbacks'],
  components: {
    Server: Server,
    DataSourceSweForm: DataSourceSweForm
  },
  setup: function setup(props) {
    // stores
    var clientStore = useClientStore();
    var uiStore = useUiStore();
    var route = (0,vue_router/* useRoute */.yj)();
    // check if the dashboard exists
    var dashboardId = route.params.dashboardId;
    var timeSynchronizerIds = clientStore.getTimeSynchronizerIds();
    var dataSourceId = props.id;
    var serverId = props.serverId;
    var dataSource = clientStore.findDataSourceById(dashboardId, dataSourceId);
    if (!dataSource) {
      dataSource = DEFAULT_DATASOURCE();
    } else {
      dataSource = (0,dist/* klona */.Y)(dataSource);
    }
    var server = clientStore.findServerById(dashboardId, serverId);
    var s = {
      server: server,
      dataSource: dataSource
    };
    var state = (0,reactivity_esm_bundler/* reactive */.qj)(s);
    (0,runtime_core_esm_bundler/* provide */.JJ)('state', state);
    var types = [{
      title: 'SWE Rest API',
      value: 'SweApiStream'
    }, {
      title: 'SOS',
      value: 'SosGetResult'
    }];
    return {
      dashboardId: dashboardId,
      clientStore: clientStore,
      uiStore: uiStore,
      timeSynchronizerIds: timeSynchronizerIds,
      state: state,
      serverId: serverId,
      types: types
    };
  },
  beforeMount: function beforeMount() {
    this.callbacks.onSave = this.save;
    this.callbacks.onDelete = this.deleteDataSource;
  },
  methods: {
    save: function save() {
      if (this.edit) {
        console.log('editing dataSource..');
        // check if change serverId
        // if (this.state.server.id !== this.serverId) {
        // move dataSource
        this.uiStore.removeDataSource(this.dashboardId, this.serverId, this.state.dataSource);
        // }
      }

      this.state.dataSource.serverId = this.state.server.id;
      this.uiStore.addOrEditDataSource(this.dashboardId, this.state.server.id, this.state.dataSource);
    },
    deleteDataSource: function deleteDataSource() {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              console.log('removing ' + _this.state.dataSource.id + ', ' + _this.state.dataSource.name);
              _this.uiStore.removeDataSource(_this.dashboardId, _this.serverId, _this.state.dataSource);
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/datasource/DataSourceForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/datasource/DataSourceForm.vue




;
const DataSourceForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(DataSourceFormvue_type_script_lang_js, [['render',DataSourceFormvue_type_template_id_de741a22_render]])

/* harmony default export */ var DataSourceForm = (DataSourceForm_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/server/ServerForm.vue?vue&type=template&id=594cbede




function ServerFormvue_type_template_id_594cbede_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                  
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Name",
    modelValue: $data.props.name,
    "onUpdate:modelValue": _cache[0] || (_cache[0] = function ($event) {
      return $data.props.name = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Endpoint",
    modelValue: $data.props.endpoint,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $data.props.endpoint = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VTextField/* VTextField */.h, {
    variant: "solo",
    density: "compact",
    label: "Description",
    modelValue: $data.props.description,
    "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
      return $data.props.description = $event;
    })
  }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSwitch/* VSwitch */.G, {
    color: "info",
    label: "TLS",
    modelValue: $data.props.tls,
    "onUpdate:modelValue": _cache[3] || (_cache[3] = function ($event) {
      return $data.props.tls = $event;
    }),
    density: "compact"
  }, null, 8, ["modelValue"])], 64);
}

/* Vuetify */




;// CONCATENATED MODULE: ./src/views/forms/server/ServerForm.vue?vue&type=template&id=594cbede

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/server/ServerForm.vue?vue&type=script&lang=js









/* harmony default export */ var ServerFormvue_type_script_lang_js = ({
  name: "ServerForm",
  props: ['id'],
  emits: ['onClose'],
  inject: ['callbacks'],
  components: {
    ConfirmDialog: ConfirmDialog
  },
  setup: function setup(props) {
    // stores
    var clientStore = useClientStore();
    var route = (0,vue_router/* useRoute */.yj)();
    // check if the dashboard exists
    var dashboardId = route.params.dashboardId;
    return {
      dashboardId: dashboardId,
      clientStore: clientStore
    };
  },
  data: function data() {
    return {
      props: {
        id: this.id || randomUUID(),
        name: undefined,
        endpoint: undefined,
        tls: true,
        type: undefined,
        description: '',
        tags: [],
        dataSources: []
      },
      newServer: true
    };
  },
  beforeMount: function beforeMount() {
    // find existing server
    var server = this.clientStore.findServerById(this.dashboardId, this.id);
    if (server) {
      this.props = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, this.props), server);
      this.newServer = false;
    }
    this.callbacks.onSave = this.save;
    this.callbacks.onDelete = this.deleteServer;
  },
  methods: {
    save: function save() {
      if (this.newServer) {
        console.log("adding server ".concat(this.dashboardId, ", ").concat(this.props.name));
        this.clientStore.addServer(this.dashboardId, this.props);
      } else {
        console.log("editing server ".concat(this.id, ", ").concat(this.props.name));
        this.clientStore.editServer(this.id, this.props);
      }
    },
    deleteServer: function deleteServer() {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              console.log('removing ' + _this.props.id + ', ' + _this.props.name);
              _this.clientStore.removeServer(_this.dashboardId, _this.props.id);
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/server/ServerForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./src/views/forms/server/ServerForm.vue




;
const ServerForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ServerFormvue_type_script_lang_js, [['render',ServerFormvue_type_template_id_594cbede_render]])

/* harmony default export */ var ServerForm = (ServerForm_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/DialogForm.vue?vue&type=template&id=4faa0264&scoped=true

function DialogFormvue_type_template_id_4faa0264_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                                
                                                      
                                                    
                                                    
                                                                  
                                                        
                                                      
                                                    
                                                          
                                                                        
                                                            
                                                                      
  var _component_ConfirmDialog = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ConfirmDialog");
                                                          
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VDialog/* VDialog */.B, {
    "model-value": true,
    class: "dialog",
    "content-class": "content-dialog",
    persistent: ""
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, {
        elevation: "24",
        class: "mx-lg-n16 card form"
      }, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [$setup.title ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VCardTitle/* VCardTitle */.E, {
            key: 0
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VRow/* VRow */.o, {
                align: "center",
                justify: "center"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCol/* VCol */.D, {
                    cols: "12",
                    lg: "6",
                    md: "6",
                    class: "grey lighten-2 fill-height d-flex flex-column justify-center align-center"
                  }, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCard/* VCard */._, {
                        flat: "",
                        tile: ""
                      }, {
                        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardText/* VCardText */.Z, {
                            class: "text-h6"
                          }, {
                            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                              return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)($setup.title), 1)];
                            }),
                            _: 1
                          })];
                        }),
                        _: 1
                      })];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              })];
            }),
            _: 1
          })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSheet/* VSheet */.C, {
            class: "sheet"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
                class: (0,shared_esm_bundler/* normalizeClass */.C_)('form-content ' + $props.cssClass)
              }, [(0,runtime_core_esm_bundler/* renderSlot */.WI)(_ctx.$slots, "content", {}, undefined, true)], 2)];
            }),
            _: 3
          }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VCardActions/* VCardActions */.h, {
            class: "actions"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
                icon: "",
                dark: "",
                onClick: $setup.close,
                density: "compact",
                class: "cancel",
                variant: "tonal"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("mdi-close")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VToolbar/* VToolbar */.i, {
                color: "#e4e4e4",
                class: "save-toolbar",
                density: "compact"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VSpacer/* VSpacer */.C), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VToolbarItems/* VToolbarItems */.l, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [$props.edit ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VBtn/* VBtn */.T, {
                        key: 0,
                        variant: "text",
                        class: "delete-btn",
                        onClick: $options.deleteItemWithConfirm
                      }, {
                        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                          return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" Delete ")];
                        }),
                        _: 1
                      }, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
                        variant: "text",
                        onClick: $setup.save
                      }, {
                        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                          return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" Save ")];
                        }),
                        _: 1
                      }, 8, ["onClick"])];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              })];
            }),
            _: 1
          })];
        }),
        _: 3
      }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ConfirmDialog, {
        ref: "confirm"
      }, null, 512)];
    }),
    _: 3
  });
}

/* Vuetify */









;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/DialogForm.vue?vue&type=script&lang=js





/* harmony default export */ var DialogFormvue_type_script_lang_js = ({
  name: "DialogForm",
  emits: ['onClose'],
  props: ['title', 'edit', 'cssClass', 'name'],
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
      slots = _ref.slots,
      emit = _ref.emit,
      expose = _ref.expose;
    var title = props.title;
    var name = props.name || title;
    var callbacks = {
      onSave: function onSave() {},
      onDelete: function onDelete() {},
      onClose: function onClose() {}
    };
    var close = function close() {
      callbacks.onClose();
      emit('onClose');
    };
    var save = function save() {
      callbacks.onSave();
      close();
    };
    var deleteItem = function deleteItem() {
      callbacks.onDelete();
      close();
    };
    //
    (0,runtime_core_esm_bundler/* provide */.JJ)('callbacks', callbacks);
    return {
      title: title,
      name: name,
      save: save,
      deleteItem: deleteItem,
      close: close
    };
  },
  components: {
    ConfirmDialog: ConfirmDialog
  },
  methods: {
    deleteItemWithConfirm: function deleteItemWithConfirm() {
      var _this = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _this.$refs.confirm.open("Confirm", "Are you sure you want to remove this ".concat(_this.name, " ?"));
            case 2:
              if (!_context.sent) {
                _context.next = 4;
                break;
              }
              _this.deleteItem();
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    cancel: function cancel() {
      this.close();
    }
  }
});
;// CONCATENATED MODULE: ./src/views/forms/DialogForm.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/forms/DialogForm.vue?vue&type=style&index=0&id=4faa0264&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/forms/DialogForm.vue?vue&type=style&index=0&id=4faa0264&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/forms/DialogForm.vue




;


const DialogForm_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(DialogFormvue_type_script_lang_js, [['render',DialogFormvue_type_template_id_4faa0264_scoped_true_render],['__scopeId',"data-v-4faa0264"]])

/* harmony default export */ var DialogForm = (DialogForm_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Content.vue?vue&type=script&lang=js






/* harmony default export */ var Contentvue_type_script_lang_js = ({
  name: "Content",
  components: {
    DataSourceForm: DataSourceForm,
    ServerForm: ServerForm,
    DialogForm: DialogForm,
    WidgetForm: WidgetForm,
    Window: Window
  },
  setup: function setup(props) {
    var route = (0,vue_router/* useRoute */.yj)();
    var _route$params = route.params,
      widgetId = _route$params.widgetId,
      dashboardId = _route$params.dashboardId,
      windowId = _route$params.windowId;
    return {
      widgetId: widgetId,
      windowId: windowId,
      dashboardId: dashboardId
    };
  },
  data: function data() {
    return {
      dataSourceEditorId: undefined,
      serverId: undefined,
      serverEditorId: undefined,
      widgetEditorId: undefined,
      edit: false,
      ServerForm: ServerForm
    };
  },
  beforeMount: function beforeMount() {
    var _this = this;
    this.emitter.on("show-datasource-editor", function (props) {
      _this.dataSourceEditorId = props.id;
      _this.serverId = props.serverId;
      _this.edit = props.edit;
    });
    this.emitter.on("show-server-editor", function (props) {
      _this.serverEditorId = props.id;
      _this.edit = props.edit;
    });
    this.emitter.on("show-widget-editor", function (props) {
      _this.widgetEditorId = props.id;
      _this.edit = props.edit;
    });
  },
  beforeUnmount: function beforeUnmount() {
    // unsubscribe component events
    this.emitter.off("show-datasource-editor");
    this.emitter.off("show-server-editor");
    this.emitter.off("show-widget-editor");
  }
});
;// CONCATENATED MODULE: ./src/views/Content.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Content.vue?vue&type=style&index=0&id=4377eb40&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/Content.vue?vue&type=style&index=0&id=4377eb40&lang=css

;// CONCATENATED MODULE: ./src/views/Content.vue




;


const Content_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(Contentvue_type_script_lang_js, [['render',Contentvue_type_template_id_4377eb40_render]])

/* harmony default export */ var Content = (Content_exports_);
;// CONCATENATED MODULE: ./src/assets/logo-georobotix.png
var logo_georobotix_namespaceObject = __webpack_require__.p + "img/logo-georobotix.3f829919.png";
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VAppBar/VAppBar.mjs + 2 modules
var VAppBar = __webpack_require__(38106);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VList/VList.mjs + 2 modules
var VList = __webpack_require__(68275);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VList/VListItemTitle.mjs
var VListItemTitle = __webpack_require__(52127);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/VMenu/VMenu.mjs + 1 modules
var VMenu = __webpack_require__(4193);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/NavBar.vue?vue&type=template&id=1372117f&scoped=true


var NavBarvue_type_template_id_1372117f_scoped_true_withScopeId = function _withScopeId(n) {
  return (0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-1372117f"), n = n(), (0,runtime_core_esm_bundler/* popScopeId */.Cn)(), n;
};
var NavBarvue_type_template_id_1372117f_scoped_true_hoisted_1 = /*#__PURE__*/NavBarvue_type_template_id_1372117f_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("img", {
    alt: "logo",
    src: logo_georobotix_namespaceObject,
    style: {
      "max-height": "50%",
      "margin-right": "10px",
      "margin-left": "10px"
    }
  }, null, -1);
});
var NavBarvue_type_template_id_1372117f_scoped_true_hoisted_2 = /*#__PURE__*/NavBarvue_type_template_id_1372117f_scoped_true_withScopeId(function () {
  return /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, "MorpheusX", -1);
});
var NavBarvue_type_template_id_1372117f_scoped_true_hoisted_3 = {
  class: "actions"
};
function NavBarvue_type_template_id_1372117f_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  var _this = this;
                                                                        
                                                          
                                                    
                                                            
                                                      
                                                                            
                                                                
                                                      
                                                      
                                                            
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VAppBar/* VAppBar */.L, {
    app: "",
    color: "secondary",
    density: "compact",
    elevation: "3"
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
      return [NavBarvue_type_template_id_1372117f_scoped_true_hoisted_1, (0,runtime_core_esm_bundler/* createVNode */.Wm)(VToolbarTitle/* VToolbarTitle */.q, {
        class: "toolbar-title"
      }, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [NavBarvue_type_template_id_1372117f_scoped_true_hoisted_2];
        }),
        _: 1
      }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSpacer/* VSpacer */.C), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", NavBarvue_type_template_id_1372117f_scoped_true_hoisted_3, [$options.isRealTimeMode ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VTooltip/* VTooltip */.N, {
        key: 0,
        bottom: ""
      }, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
          var props = _ref.props;
          return [!$setup.popup ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, {
            key: 0
          }, [], 64)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, (0,runtime_core_esm_bundler/* mergeProps */.dG)({
            rounded: "",
            class: "elevation-0",
            icon: _this.uiStore.ui.connected ? "mdi-power-plug" : "mdi-power-plug-off",
            color: _this.uiStore.ui.connected ? "green" : "red"
          }, props, {
            onClick: $options.toggleConnection,
            disabled: !_this.clientStore.initialized
          }), null, 16, ["icon", "color", "onClick", "disabled"])];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createElementVNode */._)("span", null, (0,shared_esm_bundler/* toDisplayString */.zw)(_this.uiStore.ui.connected ? "Disconnect" : "Connect"), 1)];
        }),
        _: 1
      })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VMenu/* VMenu */.T, {
        "open-on-click": ""
      }, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref2) {
          var props = _ref2.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, (0,runtime_core_esm_bundler/* mergeProps */.dG)({
            variant: "text",
            depressed: "",
            icon: "",
            tile: "",
            small: ""
          }, props), {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, null, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("mdi-plus")];
                }),
                _: 1
              })];
            }),
            _: 2
          }, 1040)];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VList/* VList */.i, {
            class: "tile"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [!$setup.popup ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VListItem/* VListItem */.l, {
                key: 0,
                onClick: $options.handleAddServer,
                "append-icon": "mdi-server-plus",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("Server")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), !$setup.popup ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VListItem/* VListItem */.l, {
                key: 1,
                onClick: $options.handleAddDataSource,
                "append-icon": "mdi-database-plus",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("DataSource")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, {
                onClick: $options.handleAddView,
                "append-icon": "mdi-form-select",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("View")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"]), !$setup.popup ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VListItem/* VListItem */.l, {
                key: 2,
                onClick: $options.handleAddPopupWindow,
                "append-icon": "mdi-dock-window",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("Window")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)];
            }),
            _: 1
          })];
        }),
        _: 1
      }), !$setup.popup ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VMenu/* VMenu */.T, {
        key: 1,
        "open-on-click": ""
      }, {
        activator: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref3) {
          var props = _ref3.props;
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, (0,runtime_core_esm_bundler/* mergeProps */.dG)({
            variant: "text",
            depressed: "",
            icon: "",
            tile: "",
            small: ""
          }, props), {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VIcon/* VIcon */.t, null, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("mdi-dots-vertical")];
                }),
                _: 1
              })];
            }),
            _: 2
          }, 1040)];
        }),
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
          return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VList/* VList */.i, {
            class: "tile"
          }, {
            default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
              return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, {
                onClick: $options.handleServerDrawer,
                "append-icon": "mdi-server-network",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("DataSources")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, {
                onClick: $options.handleEdit,
                "append-icon": "mdi-pencil",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("Edit")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, {
                onClick: $options.handleSave,
                "append-icon": "mdi-content-save",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("Save")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, {
                onClick: $options.handleReset,
                "append-icon": "mdi-cancel",
                density: "compact",
                "min-height": "30",
                class: "sub-tile"
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItemTitle/* VListItemTitle */.V, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)("Reset")];
                    }),
                    _: 1
                  })];
                }),
                _: 1
              }, 8, ["onClick"])];
            }),
            _: 1
          })];
        }),
        _: 1
      })) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("", true)])];
    }),
    _: 1
  });
}

/* Vuetify */










;// CONCATENATED MODULE: ./src/components/NavBar.vue?vue&type=template&id=1372117f&scoped=true

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/NavBar.vue?vue&type=script&lang=js



/* harmony default export */ var NavBarvue_type_script_lang_js = ({
  components: {},
  data: function data() {
    return {
      connected: false
    };
  },
  props: ['popup'],
  setup: function setup(props) {
    var uiStore = useUiStore();
    var clientStore = useClientStore();
    var popup = props.popup;
    return {
      uiStore: uiStore,
      clientStore: clientStore,
      popup: popup
    };
  },
  computed: {
    isRealTimeMode: function isRealTimeMode() {
      return this.uiStore.ui.mode === 'realTime';
    }
  },
  methods: {
    handleServerDrawer: function handleServerDrawer(event) {
      this.uiStore.ui.drawer.server = true;
    },
    handleAddView: function handleAddView(event) {
      this.emitter.emit('show-widget-editor', {
        id: this.uuid(),
        edit: false
      });
    },
    handleAddDataSource: function handleAddDataSource(event) {
      this.emitter.emit('show-datasource-editor', {
        id: randomUUID(),
        edit: false
      });
    },
    handleAddServer: function handleAddServer(event) {
      this.emitter.emit('show-server-editor', {
        id: randomUUID(),
        edit: false
      });
    },
    handleSave: function handleSave(event) {
      this.emitter.emit('save');
    },
    handleLoad: function handleLoad(event) {
      this.emitter.emit('load');
    },
    handleReset: function handleReset(event) {
      this.emitter.emit('reset');
    },
    handleEdit: function handleEdit(event) {
      this.uiStore.setEditMode(!this.uiStore.ui.edit);
    },
    handleAddPopupWindow: function handleAddPopupWindow(event) {
      this.emitter.emit('add-popup');
    },
    uuid: function uuid() {
      return randomUUID();
    },
    toggleConnection: function toggleConnection() {
      this.emitter.emit('toggleConnect');
    }
  }
});
;// CONCATENATED MODULE: ./src/components/NavBar.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/components/NavBar.vue?vue&type=style&index=0&id=1372117f&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/components/NavBar.vue?vue&type=style&index=0&id=1372117f&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/components/NavBar.vue




;


const NavBar_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(NavBarvue_type_script_lang_js, [['render',NavBarvue_type_template_id_1372117f_scoped_true_render],['__scopeId',"data-v-1372117f"]])

/* harmony default export */ var NavBar = (NavBar_exports_);
;// CONCATENATED MODULE: ./node_modules/webpack-plugin-vuetify/dist/scriptLoader.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/ServerList.vue?vue&type=template&id=42be8f96&scoped=true


function ServerListvue_type_template_id_42be8f96_scoped_true_render(_ctx, _cache, $props, $setup, $data, $options) {
                                                    
                                                                
                                                    
                                                    
                                                                
                                                          
                                                      
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)($setup.dashboard.servers, function (server, index) {
    return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VList/* VList */.i, {
      key: index
    }, {
      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
        return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VListItem/* VListItem */.l, {
          value: server.id,
          variant: "text",
          onClick: function onClick($event) {
            return $options.select($setup.dashboard.id, server);
          }
        }, {
          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function (_ref) {
            var item = _ref.item;
            return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
              "prepend-icon": "mdi-server-network",
              variant: "text",
              color: "grey-darken-1"
            }, {
              default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(server.name), 1)];
              }),
              _: 2
            }, 1024)];
          }),
          _: 2
        }, 1032, ["value", "onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VContainer/* VContainer */.K, {
          class: "ds-container"
        }, {
          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
            return [((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(runtime_core_esm_bundler/* Fragment */.HY, null, (0,runtime_core_esm_bundler/* renderList */.Ko)(server.dataSources, function (dataSource, indexDs) {
              return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(VCol/* VCol */.D, {
                key: indexDs
              }, {
                default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                  return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VRow/* VRow */.o, null, {
                    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                      return [(0,runtime_core_esm_bundler/* createVNode */.Wm)(VBtn/* VBtn */.T, {
                        "prepend-icon": "mdi-database",
                        variant: "text",
                        onClick: function onClick($event) {
                          return $options.selectDs($setup.dashboard, dataSource, server);
                        },
                        class: "ds-btn"
                      }, {
                        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(function () {
                          return [(0,runtime_core_esm_bundler/* createTextVNode */.Uk)((0,shared_esm_bundler/* toDisplayString */.zw)(dataSource.name), 1)];
                        }),
                        _: 2
                      }, 1032, ["onClick"])];
                    }),
                    _: 2
                  }, 1024)];
                }),
                _: 2
              }, 1024);
            }), 128))];
          }),
          _: 2
        }, 1024), (0,runtime_core_esm_bundler/* createVNode */.Wm)(VSpacer/* VSpacer */.C, {
          class: "spacer"
        })];
      }),
      _: 2
    }, 1024);
  }), 128);
}

/* Vuetify */





;// CONCATENATED MODULE: ./src/views/ServerList.vue?vue&type=template&id=42be8f96&scoped=true

;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/ServerList.vue?vue&type=script&lang=js



/* harmony default export */ var ServerListvue_type_script_lang_js = ({
  name: "ServerList",
  data: function data() {
    return {
      selectedServer: undefined
    };
  },
  setup: function setup(props) {
    var route = (0,vue_router/* useRoute */.yj)();
    var clientStore = useClientStore();
    var dashboardId = route.params.dashboardId;
    var dashboard = clientStore.getDashboardById(dashboardId);
    return {
      clientStore: clientStore,
      dashboard: dashboard
    };
  },
  methods: {
    uuid: function uuid() {
      return randomUUID();
    },
    select: function select(dashboardId, server) {
      this.emitter.emit('show-server-editor', {
        id: server.id,
        edit: true
      });
    },
    selectDs: function selectDs(dashboard, dataSource, server) {
      this.emitter.emit('show-datasource-editor', {
        id: dataSource.id,
        serverId: server.id,
        edit: true
      });
    }
  }
});
;// CONCATENATED MODULE: ./src/views/ServerList.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/ServerList.vue?vue&type=style&index=0&id=42be8f96&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/ServerList.vue?vue&type=style&index=0&id=42be8f96&scoped=true&lang=css

;// CONCATENATED MODULE: ./src/views/ServerList.vue




;


const ServerList_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ServerListvue_type_script_lang_js, [['render',ServerListvue_type_template_id_42be8f96_scoped_true_render],['__scopeId',"data-v-42be8f96"]])

/* harmony default export */ var ServerList = (ServerList_exports_);
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Dashboard.vue?vue&type=script&lang=js




















/* harmony default export */ var Dashboardvue_type_script_lang_js = ({
  name: "Dashboard",
  components: {
    ServerList: ServerList,
    Content: Content,
    Window: Window,
    Navbar: NavBar
  },
  beforeRouteEnter: function beforeRouteEnter(to, from, next) {
    function createNewWindow() {
      var windowId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : randomUUID();
      var windowState = (0,reactivity_esm_bundler/* markRaw */.Xl)(defaultWindow(windowId, isDefined(window.opener) ? 'popup' : 'main-window'));
      uiStore.addWindow(dashboardId, windowState);
      console.log("created new window with id ".concat(windowState.id));
      return windowState;
    }
    var clientStore = useClientStore();
    var uiStore = useUiStore();
    var _to$params = to.params,
      dashboardId = _to$params.dashboardId,
      windowId = _to$params.windowId;
    var redirect = !isDefined(windowId);
    var isPopup = isDefined(window.opener);
    clientStore.getDashboardByIdFromRemote(dashboardId, isPopup).then(function (dashboard) {
      if (!isDefined(dashboard) || !isDefined(dashboard.windows)) {
        console.log("creating new dashboard with id ".concat(dashboardId));
        clientStore.createNewDashboard(dashboardId, dashboard.name);
      }

      // case 1: dashboard + no existing main window
      // case 2: dashboard + existing main window
      // case 3: dashboard + no existing popup
      // case 4: dashboard + existing popup

      var win = clientStore.getWindowById(dashboardId, windowId);
      if (!win) {
        // check if main window
        if (!window.opener) {
          // in that case, we can check if a main window already exist and load it
          var windows = clientStore.getWindowsByType(dashboardId, 'main-window');
          if (windows.length > 0) {
            console.log("Find existing main window with id ".concat(windows[0].id));
            win = windows[0];
            redirect = true;
          }
        }
      }
      if (!win) {
        win = createNewWindow(windowId);
      }
      if (redirect) {
        next({
          name: 'window',
          params: {
            dashboardId: dashboardId,
            windowId: win.id
          }
        });
      } else {
        next();
      }
    });
  },
  setup: function setup(props) {
    // stores
    var popupsStore = usePopupsStore();
    var clientStore = useClientStore();
    var uiStore = useUiStore();
    var isPopup = isDefined(window.opener);
    var route = (0,vue_router/* useRoute */.yj)();

    // check if the dashboard exists
    var _route$params = route.params,
      dashboardId = _route$params.dashboardId,
      windowId = _route$params.windowId;
    var dashboard = clientStore.getDashboardById(dashboardId);

    // we do not link directly to the store to have the ability to cancel any change until to click onto SAVE button
    (0,runtime_core_esm_bundler/* provide */.JJ)('windowId', windowId);

    // bind datasynchronizer to ui Store
    if (!isPopup) {
      var defaultDataSynchronizer = clientStore.getDefaultTimeSynchronizer(dashboardId);
      defaultDataSynchronizer.subscribe(function (message) {
        if (defaultDataSynchronizer.getMode() === Mode.REAL_TIME) {
          switch (message.status) {
            case 'connected':
              uiStore.setConnected(true);
              break;
            case 'disconnected':
              uiStore.setConnected(false);
              break;
            case 'not_running':
              uiStore.setConnected(false);
              break;
          }
        }
      }, [EventType.STATUS]);
      defaultDataSynchronizer.onChangedMode = function (mode) {
        uiStore.ui.mode = mode;
        console.log('setting mode=' + mode);
      };
    }
    return {
      isPopup: isPopup,
      popupsStore: popupsStore,
      clientStore: clientStore,
      uiStore: uiStore,
      windowId: windowId,
      dashboard: dashboard
    };
  },
  mounted: function mounted() {
    var _this = this;
    this.uiStore.setEditMode(false);
    // this.uiStore.toggleConnect(this.dashboard.id, false);

    // TODO: this is bad
    if (!this.isPopup) {
      this.emitter.on("load", function () {
        return _this.handleLoad();
      });
      this.emitter.on("save", function () {
        return _this.handleSave();
      });
      this.emitter.on("reset", function () {
        return _this.handleReset();
      });
      this.emitter.on("add-popup", function () {
        return _this.handleAddPopupWindow();
      });
      this.emitter.on("toggleConnect", function () {
        return _this.toggleConnect();
      });
      this.handleLoad((0,utils/* toArray */.qo)(this.dashboard.windows)).catch(console.error).then(this.init = true);
    } else {
      this.init = true;
    }
  },
  beforeUnmount: function beforeUnmount() {
    if (!this.isPopup) {
      // unsubscribe component events
      this.emitter.off("load");
      this.emitter.off("save");
      this.emitter.off("reset");
      this.emitter.off("add-popup");
      this.emitter.off("toggleConnect");
    }
  },
  data: function data() {
    return {
      init: false
    };
  },
  methods: {
    toggleConnect: function toggleConnect() {
      this.uiStore.toggleConnect(this.dashboard.id);
    },
    closePopups: function closePopups() {
      this.popupsStore.closePopups();
    },
    savePopupsPosition: function savePopupsPosition() {
      this.popupsStore.savePopupsPosition(this.dashboard.id);
    },
    handleSave: function handleSave() {
      this.savePopupsPosition();
      this.clientStore.saveConf(this.dashboard.id);
      this.uiStore.setEditMode(false);
    },
    handleLoad: function handleLoad(windowsArr) {
      var _this2 = this;
      return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2() {
        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _this2.closePopups();
              // this.uiStore.loadLayouts(toArray(this.clientStore.clientConfig.windows));
              _this2.uiStore.loadLayouts(windowsArr);
              return _context2.abrupt("return", new Promise( /*#__PURE__*/function () {
                var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(resolve) {
                  var popupsWindow, _iterator, _step, popupWindow, props, granted, _yield$navigator$perm, state, popup;
                  return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        popupsWindow = _this2.clientStore.getWindowsByType(_this2.dashboard.id, 'popup');
                        _iterator = (0,createForOfIteratorHelper/* default */.Z)(popupsWindow);
                        _context.prev = 2;
                        _iterator.s();
                      case 4:
                        if ((_step = _iterator.n()).done) {
                          _context.next = 29;
                          break;
                        }
                        popupWindow = _step.value;
                        // open new popup
                        props = "width=".concat(popupWindow.size.width, ", height=").concat(popupWindow.size.height, ", screenX=").concat(popupWindow.pos.x, ", ") + "screenY=".concat(popupWindow.pos.y, ", ") + "directories=no,titlebar=no,scrollbars=no,resizable=yes,status=no,location=no, " + "locationbar=no,toolbar=no,menubar=no";
                        if (!('getScreenDetails' in window)) {
                          _context.next = 23;
                          break;
                        }
                        // The Multi-Screen Window Placement API is supported.
                        console.log('Multi-Screen Window Placement API is supported');
                        _context.prev = 9;
                        // console.log(await window.getScreenDetails());
                        granted = false;
                        _context.next = 13;
                        return navigator.permissions.query({
                          name: 'window-placement'
                        });
                      case 13:
                        _yield$navigator$perm = _context.sent;
                        state = _yield$navigator$perm.state;
                        granted = state === 'granted';
                        _context.next = 21;
                        break;
                      case 18:
                        _context.prev = 18;
                        _context.t0 = _context["catch"](9);
                        throw _context.t0;
                      case 21:
                        _context.next = 24;
                        break;
                      case 23:
                        console.warn('Multi-Screen Window Placement API is not supported');
                      case 24:
                        popup = _this2.openNewWindow(props, popupWindow.id);
                        popup.moveTo(popupWindow.pos.x, popupWindow.pos.y);
                        resolve();
                      case 27:
                        _context.next = 4;
                        break;
                      case 29:
                        _context.next = 34;
                        break;
                      case 31:
                        _context.prev = 31;
                        _context.t1 = _context["catch"](2);
                        _iterator.e(_context.t1);
                      case 34:
                        _context.prev = 34;
                        _iterator.f();
                        return _context.finish(34);
                      case 37:
                      case "end":
                        return _context.stop();
                    }
                  }, _callee, null, [[2, 31, 34, 37], [9, 18]]);
                }));
                return function (_x) {
                  return _ref.apply(this, arguments);
                };
              }()));
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    },
    handleReset: function handleReset(event) {
      this.closePopups();
      this.uiStore.reset(this.dashboard.id);
    },
    handleAddPopupWindow: function handleAddPopupWindow(event) {
      this.openNewWindow();
    },
    openNewWindow: function openNewWindow() {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'width=800,' + 'height=800,' + 'resizable=yes,' + 'status=no,' + 'scrollbars=no,' + 'statusbar=no,' + 'sidebar=no,' + 'location=no,' + 'locationbar=no,' + 'toolbar=no,' + 'menubar=no,' + 'personalbar=no';
      var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : randomUUID();
      var routeData = this.$router.resolve({
        name: 'window',
        params: {
          dashboardId: this.dashboard.id,
          windowId: id
        }
      });
      var popupWindow = window.open(routeData.href, id, props);
      this.popupsStore.addPopupWindow(id, popupWindow);
      return popupWindow;
      // w.beforeunload = (event) => {
      //   alert("new window closed");
      // }
    }
  }
});
;// CONCATENATED MODULE: ./src/views/Dashboard.vue?vue&type=script&lang=js
 
;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Dashboard.vue?vue&type=style&index=0&id=dd05fdc8&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/Dashboard.vue?vue&type=style&index=0&id=dd05fdc8&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Dashboard.vue?vue&type=style&index=1&id=dd05fdc8&scoped=true&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/Dashboard.vue?vue&type=style&index=1&id=dd05fdc8&scoped=true&lang=css

;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/Dashboard.vue?vue&type=style&index=2&id=dd05fdc8&lang=css
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/views/Dashboard.vue?vue&type=style&index=2&id=dd05fdc8&lang=css

;// CONCATENATED MODULE: ./src/views/Dashboard.vue




;




const Dashboard_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(Dashboardvue_type_script_lang_js, [['render',Dashboardvue_type_template_id_dd05fdc8_scoped_true_render],['__scopeId',"data-v-dd05fdc8"]])

/* harmony default export */ var Dashboard = (Dashboard_exports_);
;// CONCATENATED MODULE: ./src/router/index.js



/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/





var routes = [{
  path: "/",
  name: "App",
  component: App,
  props: true,
  redirect: function redirect(to) {
    // the function receives the target route as the argument
    // we return a redirect path/location here.
    return {
      path: '/dashboard/' + randomUUID()
    };
  }
}, {
  path: "/dashboard/:dashboardId",
  name: "dashboard",
  component: Dashboard,
  props: true,
  children: [{
    path: "window/:windowId",
    name: "window",
    component: Content,
    props: true
  }]
}, {
  path: "/about",
  name: "About",
  // route level code-splitting
  // this generates a separate chunk (about.[hash].js) for this route
  // which is lazy-loaded when the route is visited.
  component: function component() {
    return __webpack_require__.e(/* import() | about */ 443).then(__webpack_require__.bind(__webpack_require__, 38423));
  }
}];
var router = (0,vue_router/* createRouter */.p7)({
  history: (0,vue_router/* createWebHashHistory */.r5)(),
  routes: routes
});
/* harmony default export */ var src_router = (router);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/styles/main.sass
var main = __webpack_require__(36375);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/framework.mjs + 2 modules
var framework = __webpack_require__(18727);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/components/index.mjs + 152 modules
var components = __webpack_require__(32172);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/directives/index.mjs + 2 modules
var directives = __webpack_require__(91615);
// EXTERNAL MODULE: ./node_modules/vuetify/lib/labs/components.mjs + 32 modules
var labs_components = __webpack_require__(22297);
;// CONCATENATED MODULE: ./src/plugins/vuetify.js

/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/






var myCustomLightTheme = {
  dark: false,
  colors: {
    background: '#b4c1cc',
    surface: '#FFFFFF',
    primary: '#6200EE',
    'primary-darken-1': '#3700B3',
    secondary: '#ffffff',
    'secondary-darken-1': '#018786',
    error: '#B00020',
    info: '#2196F3',
    success: '#4CAF50',
    warning: '#FB8C00'
  }
};
/* harmony default export */ var vuetify = ((0,framework/* createVuetify */.Rd)({
  theme: {
    defaultTheme: 'myCustomLightTheme',
    themes: {
      myCustomLightTheme: myCustomLightTheme
    }
  },
  components: (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, labs_components), components),
  directives: directives
}));
// EXTERNAL MODULE: ./node_modules/devalue/index.js + 5 modules
var devalue = __webpack_require__(52944);
// EXTERNAL MODULE: ./node_modules/mitt/dist/mitt.mjs
var mitt = __webpack_require__(59391);
;// CONCATENATED MODULE: ./src/main.js





/***************************** BEGIN LICENSE BLOCK ***************************
 The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
 All Rights Reserved. It cannot be duplicated, used, or distributed without
 the express written consent of Georobotix Inc.
 ******************************* END LICENSE BLOCK ***************************/










var emitter = (0,mitt/* default */.Z)();
var app = (0,runtime_dom_esm_bundler/* createApp */.ri)(App);
app.config.unwrapInjectedRef = false;
app.config.globalProperties.emitter = emitter;
var main_pinia = (0,pinia/* createPinia */.WB)();
window.pinia = main_pinia;
var main_clientStore = useClientStore(main_pinia);
var main_uiStore = useUiStore(main_pinia);
if (window.opener && window.opener.pinia) {
  // init clientStore from main window
  main_clientStore.$patch(window.opener.pinia.state.value[main_clientStore.$id]);
  main_uiStore.$patch(window.opener.pinia.state.value[main_uiStore.$id]);
}
function main_merge(target, source) {
  if (Array.isArray(source)) {
    target = source;
  } else {
    // Iterate through `source` properties and if an `Object` set property to merge of `target` and `source` properties
    for (var _i = 0, _Object$keys = Object.keys(source); _i < _Object$keys.length; _i++) {
      var key = _Object$keys[_i];
      if (source[key] instanceof Object && key in target) {
        Object.assign(source[key], main_merge(target[key], source[key]));
      }
    }

    // Join `target` and modified `source`
    Object.assign(target || {}, source);
  }
  return target;
}
;
function makeStoreReactive(store, key) {
  var channel = new BroadcastChannel('STORE_SYNC-' + store.$id);
  var lastVersion = -1;
  (0,runtime_core_esm_bundler/* watch */.YP)(function () {
    return store.syncVersion;
  },
  // () => store.$state,
  function (newVersion) {
    if (newVersion > lastVersion) {
      lastVersion = newVersion;
      channel.postMessage({
        id: store.id,
        version: newVersion,
        state: devalue/* parse */.Qc(devalue/* stringify */.Pz(store.$state))
      });
    }
  }, {
    deep: true
  });
  channel.onmessage = function (e) {
    var evt = e.data;
    if (evt.state.id === store.id) {
      main_merge(store, evt.state);
    }
  };
}
if (window.opener && window.opener.pinia) {
  makeStoreReactive(main_uiStore);
  makeStoreReactive(window.opener.pinia.state.value[main_clientStore.$id]);
  // makeStoreReactive(clientStore);
} else {
  makeStoreReactive(main_clientStore);
  makeStoreReactive(main_uiStore);
}
app.config.unwrapInjectedRef = true;
app.use(main_pinia);
app.use(src_router);
app.use(vuetify);
app.mount('#app');

/***/ }),

/***/ 58661:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$n": function() { return /* binding */ flattenFilter; },
/* harmony export */   "F3": function() { return /* binding */ chunkArray; },
/* harmony export */   "qo": function() { return /* binding */ toArray; },
/* harmony export */   "vk": function() { return /* binding */ parseFn; },
/* harmony export */   "zr": function() { return /* binding */ stringifyFn; }
/* harmony export */ });
/* unused harmony exports deepmerge, hex2rgba */
/* harmony import */ var _home_nevro_Progs_progs_local_git_repo_OSH_gitlab_morpheusx_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56084);
/* harmony import */ var _home_nevro_Progs_progs_local_git_repo_OSH_gitlab_morpheusx_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3336);
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(91038);
/* harmony import */ var core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(78783);
/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47042);
/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41539);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82526);
/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(41817);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(21249);
/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(92222);
/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(57327);
/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(47941);
/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(54747);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(21703);
/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(57658);
/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(74916);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(4723);
/* harmony import */ var core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(26699);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(32023);
/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(38862);
/* harmony import */ var core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(15306);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(39714);
/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(24603);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(28450);
/* harmony import */ var core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(88386);
/* harmony import */ var core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_24__);

























/***************************** BEGIN LICENSE BLOCK ***************************
The contents of this file are Copyright (C) 2017-2023 Georobotix Inc.
All Rights Reserved. It cannot be duplicated, used, or distributed without
the express written consent of Georobotix Inc.
******************************* END LICENSE BLOCK ***************************/

function isMergeableObject(value) {
  return isNonNullObject(value) && !isSpecial(value);
}
function chunkArray(arr, size) {
  return Array.from({
    length: Math.ceil(arr.length / size)
  }, function (v, i) {
    return arr.slice(i * size, i * size + size);
  });
}
function isNonNullObject(value) {
  return !!value && (0,_home_nevro_Progs_progs_local_git_repo_OSH_gitlab_morpheusx_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(value) === 'object';
}
function isSpecial(value) {
  var stringValue = Object.prototype.toString.call(value);
  return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isReactElement(value);
}

// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25
var canUseSymbol = typeof Symbol === 'function' && Symbol.for;
var REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;
function isReactElement(value) {
  return value.$$typeof === REACT_ELEMENT_TYPE;
}
function emptyTarget(val) {
  return Array.isArray(val) ? [] : {};
}
function cloneUnlessOtherwiseSpecified(value, options) {
  return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;
}
function defaultArrayMerge(target, source, options) {
  return target.concat(source).map(function (element) {
    return cloneUnlessOtherwiseSpecified(element, options);
  });
}
function getMergeFunction(key, options) {
  if (!options.customMerge) {
    return deepmerge;
  }
  var customMerge = options.customMerge(key);
  return typeof customMerge === 'function' ? customMerge : deepmerge;
}
function getEnumerableOwnPropertySymbols(target) {
  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {
    return target.propertyIsEnumerable(symbol);
  }) : [];
}
function getKeys(target) {
  return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));
}
function propertyIsOnObject(object, property) {
  try {
    return property in object;
  } catch (_) {
    return false;
  }
}

// Protects from prototype poisoning and unexpected merging up the prototype chain.
function propertyIsUnsafe(target, key) {
  return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,
  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,
  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.
}

function mergeObject(target, source, options) {
  var destination = {};
  if (options.isMergeableObject(target)) {
    getKeys(target).forEach(function (key) {
      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);
    });
  }
  getKeys(source).forEach(function (key) {
    if (propertyIsUnsafe(target, key)) {
      return;
    }
    if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {
      destination[key] = getMergeFunction(key, options)(target[key], source[key], options);
    } else {
      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);
    }
  });
  return destination;
}
function deepmerge(target, source, options) {
  options = options || {};
  options.arrayMerge = options.arrayMerge || defaultArrayMerge;
  options.isMergeableObject = options.isMergeableObject || isMergeableObject;
  // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()
  // implementations can use it. The caller may not replace it.
  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;
  var sourceIsArray = Array.isArray(source);
  var targetIsArray = Array.isArray(target);
  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;
  if (!sourceAndTargetTypesMatch) {
    return cloneUnlessOtherwiseSpecified(source, options);
  } else if (sourceIsArray) {
    return options.arrayMerge(target, source, options);
  } else {
    return mergeObject(target, source, options);
  }
}
deepmerge.all = function deepmergeAll(array, options) {
  if (!Array.isArray(array)) {
    throw new Error('first argument should be an array');
  }
  return array.reduce(function (prev, next) {
    return deepmerge(prev, next, options);
  }, {});
};
function toArray(obj) {
  var arr = [];
  for (var key in obj) {
    arr.push(obj[key]);
  }
  return arr;
}
function hex2rgba(hex) {
  var _hex$match$map = hex.match(/\w\w/g).map(function (x) {
      return parseInt(x, 16);
    }),
    _hex$match$map2 = (0,_home_nevro_Progs_progs_local_git_repo_OSH_gitlab_morpheusx_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z)(_hex$match$map, 4),
    r = _hex$match$map2[0],
    g = _hex$match$map2[1],
    b = _hex$match$map2[2],
    a = _hex$match$map2[3];
  return [r, g, b, a || 1.0];
}
function flattenFilter(data, keys) {
  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  for (var key in data) {
    if (keys.includes(key)) {
      result[key] = data[key];
    } else {
      if ((0,_home_nevro_Progs_progs_local_git_repo_OSH_gitlab_morpheusx_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(data[key]) === 'object') {
        // recursive
        flattenFilter(data[key], keys, result);
      }
    }
  }
}
function stringifyFn(obj) {
  return JSON.stringify(obj, function (key, value) {
    var fnBody;
    if (value instanceof Function || typeof value == 'function') {
      fnBody = value.toString().replace(/\n/g, '');
      if (fnBody.length < 8 || fnBody.substring(0, 8) !== 'function') {
        //this is ES6 Arrow Function
        return '_NuFrRa_' + fnBody;
      }
      return fnBody;
    }
    if (value instanceof RegExp) {
      return '_PxEgEr_' + value;
    }
    return value;
  }, 2);
}
;
function parseFn(str, date2obj) {
  var iso8061 = date2obj ? /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/ : false;
  return JSON.parse(str, function (key, value) {
    var prefix;
    if (typeof value != 'string') {
      return value;
    }
    if (value.length < 8) {
      return value;
    }
    prefix = value.substring(0, 8);
    if (iso8061 && value.match(iso8061)) {
      return new Date(value);
    }
    if (prefix === 'function') {
      return eval('(' + value + ')');
    }
    if (prefix === '_PxEgEr_') {
      return eval(value.slice(8));
    }
    if (prefix === '_NuFrRa_') {
      return eval(value.slice(8));
    }
    return value;
  });
}
;

/***/ }),

/***/ 68475:
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _regeneratorRuntime = (__webpack_require__(53898)["default"]);
var _inherits = (__webpack_require__(27539)["default"]);
var _createSuper = (__webpack_require__(45163)["default"]);
var _createClass = (__webpack_require__(20937)["default"]);
var _classCallCheck = (__webpack_require__(11469)["default"]);
var _toConsumableArray = (__webpack_require__(57920)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(46114)["default"]);
var _objectSpread = (__webpack_require__(96643)["default"]);
var _typeof = (__webpack_require__(54614)["default"]);
__webpack_require__(21703);
__webpack_require__(41539);
__webpack_require__(39714);
__webpack_require__(57658);
__webpack_require__(26699);
__webpack_require__(54747);
__webpack_require__(47941);
__webpack_require__(40561);
__webpack_require__(18264);
__webpack_require__(39575);
__webpack_require__(78783);
__webpack_require__(33948);
__webpack_require__(60285);
__webpack_require__(41637);
__webpack_require__(92222);
__webpack_require__(51532);
__webpack_require__(9653);
__webpack_require__(74916);
__webpack_require__(15306);
__webpack_require__(4723);
__webpack_require__(57327);
__webpack_require__(69600);
__webpack_require__(82472);
__webpack_require__(48675);
__webpack_require__(92990);
__webpack_require__(18927);
__webpack_require__(33105);
__webpack_require__(35035);
__webpack_require__(74345);
__webpack_require__(7174);
__webpack_require__(63408);
__webpack_require__(14590);
__webpack_require__(32846);
__webpack_require__(44731);
__webpack_require__(77209);
__webpack_require__(96319);
__webpack_require__(58867);
__webpack_require__(37789);
__webpack_require__(33739);
__webpack_require__(29368);
__webpack_require__(14483);
__webpack_require__(12056);
__webpack_require__(3462);
__webpack_require__(30678);
__webpack_require__(27462);
__webpack_require__(33824);
__webpack_require__(55021);
__webpack_require__(12974);
__webpack_require__(15016);
__webpack_require__(23767);
__webpack_require__(8585);
__webpack_require__(68696);
__webpack_require__(82526);
__webpack_require__(41817);
__webpack_require__(47042);
__webpack_require__(73689);
__webpack_require__(44048);
__webpack_require__(67987);
__webpack_require__(76938);
__webpack_require__(96649);
__webpack_require__(96078);
__webpack_require__(6982);
__webpack_require__(38706);
__webpack_require__(43290);
__webpack_require__(73210);
__webpack_require__(32023);
__webpack_require__(83753);
__webpack_require__(50545);
__webpack_require__(68309);
__webpack_require__(24603);
__webpack_require__(28450);
__webpack_require__(88386);
__webpack_require__(38862);
__webpack_require__(30541);
__webpack_require__(21249);
__webpack_require__(23123);
__webpack_require__(77601);
__webpack_require__(98145);
__webpack_require__(67556);
__webpack_require__(81299);
__webpack_require__(43371);
__webpack_require__(32165);
__webpack_require__(69826);
__webpack_require__(2707);
__webpack_require__(36210);
__webpack_require__(30489);
__webpack_require__(72443);
__webpack_require__(92401);
__webpack_require__(4855);
__webpack_require__(68304);
__webpack_require__(38880);
__webpack_require__(49337);
__webpack_require__(91038);
__webpack_require__(70189);
__webpack_require__(64765);
!function (e) {
  if ("object" == ( false ? 0 : _typeof(exports)) && "undefined" != "object") module.exports = e();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (e),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else {}
}(function () {
  return function () {
    return function e(t, r, n) {
      function i(s, a) {
        if (!r[s]) {
          if (!t[s]) {
            var l = undefined;
            if (!a && l) return require(s, !0);
            if (o) return o(s, !0);
            var u = new Error("Cannot find module '" + s + "'");
            throw u.code = "MODULE_NOT_FOUND", u;
          }
          var c = r[s] = {
            exports: {}
          };
          t[s][0].call(c.exports, function (e) {
            return i(t[s][1][e] || e);
          }, c, c.exports, e, t, r, n);
        }
        return r[s].exports;
      }
      for (var o = undefined, s = 0; s < n.length; s++) i(n[s]);
      return i;
    };
  }()({
    1: [function (e, t, r) {
      (function (r, n) {
        (function () {
          "use strict";

          var i = e("events").EventEmitter,
            o = e("./store"),
            s = e("./topic-alias-recv"),
            a = e("./topic-alias-send"),
            l = e("mqtt-packet"),
            u = e("./default-message-id-provider"),
            c = e("readable-stream").Writable,
            h = e("inherits"),
            f = e("reinterval"),
            p = e("rfdc/default"),
            d = e("./validations"),
            g = e("xtend"),
            y = e("debug")("mqttjs:client"),
            b = r ? r.nextTick : function (e) {
              setTimeout(e, 0);
            },
            m = n.setImmediate || function (e) {
              b(e);
            },
            v = {
              keepalive: 60,
              reschedulePings: !0,
              protocolId: "MQTT",
              protocolVersion: 4,
              reconnectPeriod: 1e3,
              connectTimeout: 3e4,
              clean: !0,
              resubscribe: !0
            },
            w = ["ECONNREFUSED", "EADDRINUSE", "ECONNRESET", "ENOTFOUND"],
            _ = {
              0: "",
              1: "Unacceptable protocol version",
              2: "Identifier rejected",
              3: "Server unavailable",
              4: "Bad username or password",
              5: "Not authorized",
              16: "No matching subscribers",
              17: "No subscription existed",
              128: "Unspecified error",
              129: "Malformed Packet",
              130: "Protocol Error",
              131: "Implementation specific error",
              132: "Unsupported Protocol Version",
              133: "Client Identifier not valid",
              134: "Bad User Name or Password",
              135: "Not authorized",
              136: "Server unavailable",
              137: "Server busy",
              138: "Banned",
              139: "Server shutting down",
              140: "Bad authentication method",
              141: "Keep Alive timeout",
              142: "Session taken over",
              143: "Topic Filter invalid",
              144: "Topic Name invalid",
              145: "Packet identifier in use",
              146: "Packet Identifier not found",
              147: "Receive Maximum exceeded",
              148: "Topic Alias invalid",
              149: "Packet too large",
              150: "Message rate too high",
              151: "Quota exceeded",
              152: "Administrative action",
              153: "Payload format invalid",
              154: "Retain not supported",
              155: "QoS not supported",
              156: "Use another server",
              157: "Server moved",
              158: "Shared Subscriptions not supported",
              159: "Connection rate exceeded",
              160: "Maximum connect time",
              161: "Subscription Identifiers not supported",
              162: "Wildcard Subscriptions not supported"
            };
          function k(e, t) {
            var r;
            t.properties && (r = t.properties.topicAlias);
            var n = t.topic.toString();
            if (0 === n.length) {
              if (void 0 === r) return new Error("Unregistered Topic Alias");
              if (void 0 === (n = e.topicAliasSend.getTopicByAlias(r))) return new Error("Unregistered Topic Alias");
              t.topic = n;
            }
            r && delete t.properties.topicAlias;
          }
          function S(e, t, r) {
            y("sendPacket :: packet: %O", t), y("sendPacket :: emitting `packetsend`"), e.emit("packetsend", t), y("sendPacket :: writing to stream");
            var n = l.writeToStream(t, e.stream, e.options);
            y("sendPacket :: writeToStream result %s", n), !n && r ? (y("sendPacket :: handle events on `drain` once through callback."), e.stream.once("drain", r)) : r && (y("sendPacket :: invoking cb"), r());
          }
          function E(e, t, r, n) {
            y("storeAndSend :: store packet with cmd %s to outgoingStore", t.cmd);
            var i,
              o = t;
            if ("publish" === o.cmd && (o = p(t), i = k(e, o))) return r && r(i);
            e.outgoingStore.put(o, function (i) {
              if (i) return r && r(i);
              n(), S(e, t, r);
            });
          }
          function C(e) {
            y("nop ::", e);
          }
          function T(e, t) {
            var r;
            var n = this;
            if (!(this instanceof T)) return new T(e, t);
            for (r in this.options = t || {}, v) void 0 === this.options[r] ? this.options[r] = v[r] : this.options[r] = t[r];
            y("MqttClient :: options.protocol", t.protocol), y("MqttClient :: options.protocolVersion", t.protocolVersion), y("MqttClient :: options.username", t.username), y("MqttClient :: options.keepalive", t.keepalive), y("MqttClient :: options.reconnectPeriod", t.reconnectPeriod), y("MqttClient :: options.rejectUnauthorized", t.rejectUnauthorized), y("MqttClient :: options.topicAliasMaximum", t.topicAliasMaximum), this.options.clientId = "string" == typeof t.clientId ? t.clientId : "mqttjs_" + Math.random().toString(16).substr(2, 8), y("MqttClient :: clientId", this.options.clientId), this.options.customHandleAcks = 5 === t.protocolVersion && t.customHandleAcks ? t.customHandleAcks : function () {
              arguments[3](0);
            }, this.streamBuilder = e, this.messageIdProvider = void 0 === this.options.messageIdProvider ? new u() : this.options.messageIdProvider, this.outgoingStore = t.outgoingStore || new o(), this.incomingStore = t.incomingStore || new o(), this.queueQoSZero = void 0 === t.queueQoSZero || t.queueQoSZero, this._resubscribeTopics = {}, this.messageIdToTopic = {}, this.pingTimer = null, this.connected = !1, this.disconnecting = !1, this.queue = [], this.connackTimer = null, this.reconnectTimer = null, this._storeProcessing = !1, this._packetIdsDuringStoreProcessing = {}, this._storeProcessingQueue = [], this.outgoing = {}, this._firstConnection = !0, t.topicAliasMaximum > 0 && (t.topicAliasMaximum > 65535 ? y("MqttClient :: options.topicAliasMaximum is out of range") : this.topicAliasRecv = new s(t.topicAliasMaximum)), this.on("connect", function () {
              var e = this.queue;
              y("connect :: sending queued packets"), function t() {
                var r = e.shift();
                y("deliver :: entry %o", r);
                var i = null;
                if (!r) return void n._resubscribe();
                i = r.packet, y("deliver :: call _sendPacket for %o", i);
                var o = !0;
                i.messageId && 0 !== i.messageId && (n.messageIdProvider.register(i.messageId) || (o = !1)), o ? n._sendPacket(i, function (e) {
                  r.cb && r.cb(e), t();
                }) : (y("messageId: %d has already used. The message is skipped and removed.", i.messageId), t());
              }();
            }), this.on("close", function () {
              y("close :: connected set to `false`"), this.connected = !1, y("close :: clearing connackTimer"), clearTimeout(this.connackTimer), y("close :: clearing ping timer"), null !== n.pingTimer && (n.pingTimer.clear(), n.pingTimer = null), this.topicAliasRecv && this.topicAliasRecv.clear(), y("close :: calling _setupReconnect"), this._setupReconnect();
            }), i.call(this), y("MqttClient :: setting up stream"), this._setupStream();
          }
          h(T, i), T.prototype._setupStream = function () {
            var _this = this;
            var e = this,
              t = new c(),
              r = l.parser(this.options);
            var n = null;
            var i = [];
            function o() {
              if (i.length) b(s);else {
                var _e = n;
                n = null, _e();
              }
            }
            function s() {
              y("work :: getting next packet in queue");
              var t = i.shift();
              if (t) y("work :: packet pulled from queue"), e._handlePacket(t, o);else {
                y("work :: no packets in queue");
                var _e2 = n;
                n = null, y("work :: done flag is %s", !!_e2), _e2 && _e2();
              }
            }
            y("_setupStream :: calling method to clear reconnect"), this._clearReconnect(), y("_setupStream :: using streamBuilder provided to client to create stream"), this.stream = this.streamBuilder(this), r.on("packet", function (e) {
              y("parser :: on packet push to packets array."), i.push(e);
            }), t._write = function (e, t, i) {
              n = i, y("writable stream :: parsing buffer"), r.parse(e), s();
            }, y("_setupStream :: pipe stream to writable stream"), this.stream.pipe(t), this.stream.on("error", function (t) {
              y("streamErrorHandler :: error", t.message), w.includes(t.code) ? (y("streamErrorHandler :: emitting error"), e.emit("error", t)) : C(t);
            }), this.stream.on("close", function () {
              var t;
              y("(%s)stream :: on close", e.options.clientId), (t = e.outgoing) && (y("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"), Object.keys(t).forEach(function (e) {
                t[e].volatile && "function" == typeof t[e].cb && (t[e].cb(new Error("Connection closed")), delete t[e]);
              })), y("stream: emit close to MqttClient"), e.emit("close");
            }), y("_setupStream: sending packet `connect`");
            var a = Object.create(this.options);
            if (a.cmd = "connect", this.topicAliasRecv && (a.properties || (a.properties = {}), this.topicAliasRecv && (a.properties.topicAliasMaximum = this.topicAliasRecv.max)), S(this, a), r.on("error", this.emit.bind(this, "error")), this.options.properties) {
              if (!this.options.properties.authenticationMethod && this.options.properties.authenticationData) return e.end(function () {
                return _this.emit("error", new Error("Packet has no Authentication Method"));
              }), this;
              if (this.options.properties.authenticationMethod && this.options.authPacket && "object" == _typeof(this.options.authPacket)) {
                S(this, g({
                  cmd: "auth",
                  reasonCode: 0
                }, this.options.authPacket));
              }
            }
            this.stream.setMaxListeners(1e3), clearTimeout(this.connackTimer), this.connackTimer = setTimeout(function () {
              y("!!connectTimeout hit!! Calling _cleanUp with force `true`"), e._cleanUp(!0);
            }, this.options.connectTimeout);
          }, T.prototype._handlePacket = function (e, t) {
            var r = this.options;
            if (5 === r.protocolVersion && r.properties && r.properties.maximumPacketSize && r.properties.maximumPacketSize < e.length) return this.emit("error", new Error("exceeding packets size " + e.cmd)), this.end({
              reasonCode: 149,
              properties: {
                reasonString: "Maximum packet size was exceeded"
              }
            }), this;
            switch (y("_handlePacket :: emitting packetreceive"), this.emit("packetreceive", e), e.cmd) {
              case "publish":
                this._handlePublish(e, t);
                break;
              case "puback":
              case "pubrec":
              case "pubcomp":
              case "suback":
              case "unsuback":
                this._handleAck(e), t();
                break;
              case "pubrel":
                this._handlePubrel(e, t);
                break;
              case "connack":
                this._handleConnack(e), t();
                break;
              case "auth":
                this._handleAuth(e), t();
                break;
              case "pingresp":
                this._handlePingresp(e), t();
                break;
              case "disconnect":
                this._handleDisconnect(e), t();
            }
          }, T.prototype._checkDisconnecting = function (e) {
            return this.disconnecting && (e ? e(new Error("client disconnecting")) : this.emit("error", new Error("client disconnecting"))), this.disconnecting;
          }, T.prototype.publish = function (e, t, r, n) {
            y("publish :: message `%s` to topic `%s`", t, e);
            var i = this.options;
            "function" == typeof r && (n = r, r = null);
            if (r = g({
              qos: 0,
              retain: !1,
              dup: !1
            }, r), this._checkDisconnecting(n)) return this;
            var o = this,
              s = function s() {
                var s = 0;
                if ((1 === r.qos || 2 === r.qos) && null === (s = o._nextId())) return y("No messageId left"), !1;
                var a = {
                  cmd: "publish",
                  topic: e,
                  payload: t,
                  qos: r.qos,
                  retain: r.retain,
                  messageId: s,
                  dup: r.dup
                };
                switch (5 === i.protocolVersion && (a.properties = r.properties), y("publish :: qos", r.qos), r.qos) {
                  case 1:
                  case 2:
                    o.outgoing[a.messageId] = {
                      volatile: !1,
                      cb: n || C
                    }, y("MqttClient:publish: packet cmd: %s", a.cmd), o._sendPacket(a, void 0, r.cbStorePut);
                    break;
                  default:
                    y("MqttClient:publish: packet cmd: %s", a.cmd), o._sendPacket(a, n, r.cbStorePut);
                }
                return !0;
              };
            return (this._storeProcessing || this._storeProcessingQueue.length > 0 || !s()) && this._storeProcessingQueue.push({
              invoke: s,
              cbStorePut: r.cbStorePut,
              callback: n
            }), this;
          }, T.prototype.subscribe = function () {
            var e = this,
              t = new Array(arguments.length);
            for (var _e3 = 0; _e3 < arguments.length; _e3++) t[_e3] = arguments[_e3];
            var r = [];
            var n = t.shift();
            var i = n.resubscribe;
            var o = t.pop() || C,
              s = t.pop();
            var a = this.options.protocolVersion;
            delete n.resubscribe, "string" == typeof n && (n = [n]), "function" != typeof o && (s = o, o = C);
            var l = d.validateTopics(n);
            if (null !== l) return m(o, new Error("Invalid topic " + l)), this;
            if (this._checkDisconnecting(o)) return y("subscribe: discconecting true"), this;
            var u = {
              qos: 0
            };
            if (5 === a && (u.nl = !1, u.rap = !1, u.rh = 0), s = g(u, s), Array.isArray(n) ? n.forEach(function (t) {
              if (y("subscribe: array topic %s", t), !Object.prototype.hasOwnProperty.call(e._resubscribeTopics, t) || e._resubscribeTopics[t].qos < s.qos || i) {
                var _e4 = {
                  topic: t,
                  qos: s.qos
                };
                5 === a && (_e4.nl = s.nl, _e4.rap = s.rap, _e4.rh = s.rh, _e4.properties = s.properties), y("subscribe: pushing topic `%s` and qos `%s` to subs list", _e4.topic, _e4.qos), r.push(_e4);
              }
            }) : Object.keys(n).forEach(function (t) {
              if (y("subscribe: object topic %s", t), !Object.prototype.hasOwnProperty.call(e._resubscribeTopics, t) || e._resubscribeTopics[t].qos < n[t].qos || i) {
                var _e5 = {
                  topic: t,
                  qos: n[t].qos
                };
                5 === a && (_e5.nl = n[t].nl, _e5.rap = n[t].rap, _e5.rh = n[t].rh, _e5.properties = s.properties), y("subscribe: pushing `%s` to subs list", _e5), r.push(_e5);
              }
            }), !r.length) return o(null, []), this;
            var c = function c() {
              var t = e._nextId();
              if (null === t) return y("No messageId left"), !1;
              var n = {
                cmd: "subscribe",
                subscriptions: r,
                qos: 1,
                retain: !1,
                dup: !1,
                messageId: t
              };
              if (s.properties && (n.properties = s.properties), e.options.resubscribe) {
                y("subscribe :: resubscribe true");
                var _t = [];
                r.forEach(function (r) {
                  if (e.options.reconnectPeriod > 0) {
                    var _n = {
                      qos: r.qos
                    };
                    5 === a && (_n.nl = r.nl || !1, _n.rap = r.rap || !1, _n.rh = r.rh || 0, _n.properties = r.properties), e._resubscribeTopics[r.topic] = _n, _t.push(r.topic);
                  }
                }), e.messageIdToTopic[n.messageId] = _t;
              }
              return e.outgoing[n.messageId] = {
                volatile: !0,
                cb: function cb(e, t) {
                  if (!e) {
                    var _e6 = t.granted;
                    for (var _t2 = 0; _t2 < _e6.length; _t2 += 1) r[_t2].qos = _e6[_t2];
                  }
                  o(e, r);
                }
              }, y("subscribe :: call _sendPacket"), e._sendPacket(n), !0;
            };
            return (this._storeProcessing || this._storeProcessingQueue.length > 0 || !c()) && this._storeProcessingQueue.push({
              invoke: c,
              callback: o
            }), this;
          }, T.prototype.unsubscribe = function () {
            var e = this,
              t = new Array(arguments.length);
            for (var _e7 = 0; _e7 < arguments.length; _e7++) t[_e7] = arguments[_e7];
            var r = t.shift(),
              n = t.pop() || C,
              i = t.pop();
            "string" == typeof r && (r = [r]), "function" != typeof n && (i = n, n = C);
            var o = d.validateTopics(r);
            if (null !== o) return m(n, new Error("Invalid topic " + o)), this;
            if (e._checkDisconnecting(n)) return this;
            var s = function s() {
              var t = e._nextId();
              if (null === t) return y("No messageId left"), !1;
              var o = {
                cmd: "unsubscribe",
                qos: 1,
                messageId: t
              };
              return "string" == typeof r ? o.unsubscriptions = [r] : Array.isArray(r) && (o.unsubscriptions = r), e.options.resubscribe && o.unsubscriptions.forEach(function (t) {
                delete e._resubscribeTopics[t];
              }), "object" == _typeof(i) && i.properties && (o.properties = i.properties), e.outgoing[o.messageId] = {
                volatile: !0,
                cb: n
              }, y("unsubscribe: call _sendPacket"), e._sendPacket(o), !0;
            };
            return (this._storeProcessing || this._storeProcessingQueue.length > 0 || !s()) && this._storeProcessingQueue.push({
              invoke: s,
              callback: n
            }), this;
          }, T.prototype.end = function (e, t, r) {
            var n = this;
            function i() {
              y("end :: (%s) :: finish :: calling _cleanUp with force %s", n.options.clientId, e), n._cleanUp(e, function () {
                y("end :: finish :: calling process.nextTick on closeStores"), b(function () {
                  y("end :: closeStores: closing incoming and outgoing stores"), n.disconnected = !0, n.incomingStore.close(function (e) {
                    n.outgoingStore.close(function (t) {
                      if (y("end :: closeStores: emitting end"), n.emit("end"), r) {
                        var _n2 = e || t;
                        y("end :: closeStores: invoking callback with args"), r(_n2);
                      }
                    });
                  }), n._deferredReconnect && n._deferredReconnect();
                }.bind(n));
              }, t);
            }
            return y("end :: (%s)", this.options.clientId), null != e && "boolean" == typeof e || (r = t || C, t = e, e = !1, "object" != _typeof(t) && (r = t, t = null, "function" != typeof r && (r = C))), "object" != _typeof(t) && (r = t, t = null), y("end :: cb? %s", !!r), r = r || C, this.disconnecting ? (r(), this) : (this._clearReconnect(), this.disconnecting = !0, !e && Object.keys(this.outgoing).length > 0 ? (y("end :: (%s) :: calling finish in 10ms once outgoing is empty", n.options.clientId), this.once("outgoingEmpty", setTimeout.bind(null, i, 10))) : (y("end :: (%s) :: immediately calling finish", n.options.clientId), i()), this);
          }, T.prototype.removeOutgoingMessage = function (e) {
            var t = this.outgoing[e] ? this.outgoing[e].cb : null;
            return delete this.outgoing[e], this.outgoingStore.del({
              messageId: e
            }, function () {
              t(new Error("Message removed"));
            }), this;
          }, T.prototype.reconnect = function (e) {
            y("client reconnect");
            var t = this,
              r = function r() {
                e ? (t.options.incomingStore = e.incomingStore, t.options.outgoingStore = e.outgoingStore) : (t.options.incomingStore = null, t.options.outgoingStore = null), t.incomingStore = t.options.incomingStore || new o(), t.outgoingStore = t.options.outgoingStore || new o(), t.disconnecting = !1, t.disconnected = !1, t._deferredReconnect = null, t._reconnect();
              };
            return this.disconnecting && !this.disconnected ? this._deferredReconnect = r : r(), this;
          }, T.prototype._reconnect = function () {
            var _this2 = this;
            y("_reconnect: emitting reconnect to client"), this.emit("reconnect"), this.connected ? (this.end(function () {
              _this2._setupStream();
            }), y("client already connected. disconnecting first.")) : (y("_reconnect: calling _setupStream"), this._setupStream());
          }, T.prototype._setupReconnect = function () {
            var e = this;
            !e.disconnecting && !e.reconnectTimer && e.options.reconnectPeriod > 0 ? (this.reconnecting || (y("_setupReconnect :: emit `offline` state"), this.emit("offline"), y("_setupReconnect :: set `reconnecting` to `true`"), this.reconnecting = !0), y("_setupReconnect :: setting reconnectTimer for %d ms", e.options.reconnectPeriod), e.reconnectTimer = setInterval(function () {
              y("reconnectTimer :: reconnect triggered!"), e._reconnect();
            }, e.options.reconnectPeriod)) : y("_setupReconnect :: doing nothing...");
          }, T.prototype._clearReconnect = function () {
            y("_clearReconnect : clearing reconnect timer"), this.reconnectTimer && (clearInterval(this.reconnectTimer), this.reconnectTimer = null);
          }, T.prototype._cleanUp = function (e, t) {
            var r = arguments[2];
            if (t && (y("_cleanUp :: done callback provided for on stream close"), this.stream.on("close", t)), y("_cleanUp :: forced? %s", e), e) 0 === this.options.reconnectPeriod && this.options.clean && (n = this.outgoing) && (y("flush: queue exists? %b", !!n), Object.keys(n).forEach(function (e) {
              "function" == typeof n[e].cb && (n[e].cb(new Error("Connection closed")), delete n[e]);
            })), y("_cleanUp :: (%s) :: destroying stream", this.options.clientId), this.stream.destroy();else {
              var _e8 = g({
                cmd: "disconnect"
              }, r);
              y("_cleanUp :: (%s) :: call _sendPacket with disconnect packet", this.options.clientId), this._sendPacket(_e8, m.bind(null, this.stream.end.bind(this.stream)));
            }
            var n;
            this.disconnecting || (y("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."), this._clearReconnect(), this._setupReconnect()), null !== this.pingTimer && (y("_cleanUp :: clearing pingTimer"), this.pingTimer.clear(), this.pingTimer = null), t && !this.connected && (y("_cleanUp :: (%s) :: removing stream `done` callback `close` listener", this.options.clientId), this.stream.removeListener("close", t), t());
          }, T.prototype._sendPacket = function (e, t, r) {
            y("_sendPacket :: (%s) ::  start", this.options.clientId), r = r || C, t = t || C;
            var n = function (e, t) {
              if (5 === e.options.protocolVersion && "publish" === t.cmd) {
                var _r;
                t.properties && (_r = t.properties.topicAlias);
                var _n3 = t.topic.toString();
                if (e.topicAliasSend) {
                  if (_r) {
                    if (0 !== _n3.length && (y("applyTopicAlias :: register topic: %s - alias: %d", _n3, _r), !e.topicAliasSend.put(_n3, _r))) return y("applyTopicAlias :: error out of range. topic: %s - alias: %d", _n3, _r), new Error("Sending Topic Alias out of range");
                  } else 0 !== _n3.length && (e.options.autoAssignTopicAlias ? (_r = e.topicAliasSend.getAliasByTopic(_n3)) ? (t.topic = "", t.properties = _objectSpread(_objectSpread({}, t.properties), {}, {
                    topicAlias: _r
                  }), y("applyTopicAlias :: auto assign(use) topic: %s - alias: %d", _n3, _r)) : (_r = e.topicAliasSend.getLruAlias(), e.topicAliasSend.put(_n3, _r), t.properties = _objectSpread(_objectSpread({}, t.properties), {}, {
                    topicAlias: _r
                  }), y("applyTopicAlias :: auto assign topic: %s - alias: %d", _n3, _r)) : e.options.autoUseTopicAlias && (_r = e.topicAliasSend.getAliasByTopic(_n3)) && (t.topic = "", t.properties = _objectSpread(_objectSpread({}, t.properties), {}, {
                    topicAlias: _r
                  }), y("applyTopicAlias :: auto use topic: %s - alias: %d", _n3, _r)));
                } else if (_r) return y("applyTopicAlias :: error out of range. topic: %s - alias: %d", _n3, _r), new Error("Sending Topic Alias out of range");
              }
            }(this, e);
            if (n) t(n);else {
              if (!this.connected) return "auth" === e.cmd ? (this._shiftPingInterval(), void S(this, e, t)) : (y("_sendPacket :: client not connected. Storing packet offline."), void this._storePacket(e, t, r));
              switch (this._shiftPingInterval(), e.cmd) {
                case "publish":
                  break;
                case "pubrel":
                  return void E(this, e, t, r);
                default:
                  return void S(this, e, t);
              }
              switch (e.qos) {
                case 2:
                case 1:
                  E(this, e, t, r);
                  break;
                case 0:
                default:
                  S(this, e, t);
              }
              y("_sendPacket :: (%s) ::  end", this.options.clientId);
            }
          }, T.prototype._storePacket = function (e, t, r) {
            y("_storePacket :: packet: %o", e), y("_storePacket :: cb? %s", !!t), r = r || C;
            var n = e;
            if ("publish" === n.cmd) {
              var _r2 = k(this, n = p(e));
              if (_r2) return t && t(_r2);
            }
            0 === (n.qos || 0) && this.queueQoSZero || "publish" !== n.cmd ? this.queue.push({
              packet: n,
              cb: t
            }) : n.qos > 0 ? (t = this.outgoing[n.messageId] ? this.outgoing[n.messageId].cb : null, this.outgoingStore.put(n, function (e) {
              if (e) return t && t(e);
              r();
            })) : t && t(new Error("No connection to broker"));
          }, T.prototype._setupPingTimer = function () {
            y("_setupPingTimer :: keepalive %d (seconds)", this.options.keepalive);
            var e = this;
            !this.pingTimer && this.options.keepalive && (this.pingResp = !0, this.pingTimer = f(function () {
              e._checkPing();
            }, 1e3 * this.options.keepalive));
          }, T.prototype._shiftPingInterval = function () {
            this.pingTimer && this.options.keepalive && this.options.reschedulePings && this.pingTimer.reschedule(1e3 * this.options.keepalive);
          }, T.prototype._checkPing = function () {
            y("_checkPing :: checking ping..."), this.pingResp ? (y("_checkPing :: ping response received. Clearing flag and sending `pingreq`"), this.pingResp = !1, this._sendPacket({
              cmd: "pingreq"
            })) : (y("_checkPing :: calling _cleanUp with force true"), this._cleanUp(!0));
          }, T.prototype._handlePingresp = function () {
            this.pingResp = !0;
          }, T.prototype._handleConnack = function (e) {
            y("_handleConnack");
            var t = this.options,
              r = 5 === t.protocolVersion ? e.reasonCode : e.returnCode;
            if (clearTimeout(this.connackTimer), delete this.topicAliasSend, e.properties) {
              if (e.properties.topicAliasMaximum) {
                if (e.properties.topicAliasMaximum > 65535) return void this.emit("error", new Error("topicAliasMaximum from broker is out of range"));
                e.properties.topicAliasMaximum > 0 && (this.topicAliasSend = new a(e.properties.topicAliasMaximum));
              }
              e.properties.serverKeepAlive && t.keepalive && (t.keepalive = e.properties.serverKeepAlive, this._shiftPingInterval()), e.properties.maximumPacketSize && (t.properties || (t.properties = {}), t.properties.maximumPacketSize = e.properties.maximumPacketSize);
            }
            if (0 === r) this.reconnecting = !1, this._onConnect(e);else if (r > 0) {
              var _e9 = new Error("Connection refused: " + _[r]);
              _e9.code = r, this.emit("error", _e9);
            }
          }, T.prototype._handleAuth = function (e) {
            var t = this.options.protocolVersion,
              r = 5 === t ? e.reasonCode : e.returnCode;
            if (5 !== t) {
              var _e10 = new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:" + t);
              return _e10.code = r, void this.emit("error", _e10);
            }
            var n = this;
            this.handleAuth(e, function (e, t) {
              if (e) n.emit("error", e);else if (24 === r) n.reconnecting = !1, n._sendPacket(t);else {
                var _t3 = new Error("Connection refused: " + _[r]);
                e.code = r, n.emit("error", _t3);
              }
            });
          }, T.prototype.handleAuth = function (e, t) {
            t();
          }, T.prototype._handlePublish = function (e, t) {
            y("_handlePublish: packet %o", e), t = void 0 !== t ? t : C;
            var r = e.topic.toString();
            var n = e.payload,
              i = e.qos,
              o = e.messageId,
              s = this,
              a = this.options,
              l = [0, 16, 128, 131, 135, 144, 145, 151, 153];
            if (5 === this.options.protocolVersion) {
              var _t4;
              if (e.properties && (_t4 = e.properties.topicAlias), void 0 !== _t4) if (0 === r.length) {
                if (!(_t4 > 0 && _t4 <= 65535)) return y("_handlePublish :: topic alias out of range. alias: %d", _t4), void this.emit("error", new Error("Received Topic Alias is out of range"));
                {
                  var _e11 = this.topicAliasRecv.getTopicByAlias(_t4);
                  if (!_e11) return y("_handlePublish :: unregistered topic alias. alias: %d", _t4), void this.emit("error", new Error("Received unregistered Topic Alias"));
                  y("_handlePublish :: topic complemented by alias. topic: %s - alias: %d", r = _e11, _t4);
                }
              } else {
                if (!this.topicAliasRecv.put(r, _t4)) return y("_handlePublish :: topic alias out of range. alias: %d", _t4), void this.emit("error", new Error("Received Topic Alias is out of range"));
                y("_handlePublish :: registered topic: %s - alias: %d", r, _t4);
              }
            }
            switch (y("_handlePublish: qos %d", i), i) {
              case 2:
                a.customHandleAcks(r, n, e, function (r, n) {
                  return r instanceof Error || (n = r, r = null), r ? s.emit("error", r) : -1 === l.indexOf(n) ? s.emit("error", new Error("Wrong reason code for pubrec")) : void (n ? s._sendPacket({
                    cmd: "pubrec",
                    messageId: o,
                    reasonCode: n
                  }, t) : s.incomingStore.put(e, function () {
                    s._sendPacket({
                      cmd: "pubrec",
                      messageId: o
                    }, t);
                  }));
                });
                break;
              case 1:
                a.customHandleAcks(r, n, e, function (i, a) {
                  return i instanceof Error || (a = i, i = null), i ? s.emit("error", i) : -1 === l.indexOf(a) ? s.emit("error", new Error("Wrong reason code for puback")) : (a || s.emit("message", r, n, e), void s.handleMessage(e, function (e) {
                    if (e) return t && t(e);
                    s._sendPacket({
                      cmd: "puback",
                      messageId: o,
                      reasonCode: a
                    }, t);
                  }));
                });
                break;
              case 0:
                this.emit("message", r, n, e), this.handleMessage(e, t);
                break;
              default:
                y("_handlePublish: unknown QoS. Doing nothing.");
            }
          }, T.prototype.handleMessage = function (e, t) {
            t();
          }, T.prototype._handleAck = function (e) {
            var t = e.messageId,
              r = e.cmd;
            var n = null;
            var i = this.outgoing[t] ? this.outgoing[t].cb : null,
              o = this;
            var s;
            if (i) {
              switch (y("_handleAck :: packet type", r), r) {
                case "pubcomp":
                case "puback":
                  {
                    var _r3 = e.reasonCode;
                    _r3 && _r3 > 0 && 16 !== _r3 && ((s = new Error("Publish error: " + _[_r3])).code = _r3, i(s, e)), delete this.outgoing[t], this.outgoingStore.del(e, i), this.messageIdProvider.deallocate(t), this._invokeStoreProcessingQueue();
                    break;
                  }
                case "pubrec":
                  {
                    n = {
                      cmd: "pubrel",
                      qos: 2,
                      messageId: t
                    };
                    var _r4 = e.reasonCode;
                    _r4 && _r4 > 0 && 16 !== _r4 ? ((s = new Error("Publish error: " + _[_r4])).code = _r4, i(s, e)) : this._sendPacket(n);
                    break;
                  }
                case "suback":
                  delete this.outgoing[t], this.messageIdProvider.deallocate(t);
                  for (var _r5 = 0; _r5 < e.granted.length; _r5++) if (0 != (128 & e.granted[_r5])) {
                    var _e12 = this.messageIdToTopic[t];
                    _e12 && _e12.forEach(function (e) {
                      delete o._resubscribeTopics[e];
                    });
                  }
                  this._invokeStoreProcessingQueue(), i(null, e);
                  break;
                case "unsuback":
                  delete this.outgoing[t], this.messageIdProvider.deallocate(t), this._invokeStoreProcessingQueue(), i(null);
                  break;
                default:
                  o.emit("error", new Error("unrecognized packet type"));
              }
              this.disconnecting && 0 === Object.keys(this.outgoing).length && this.emit("outgoingEmpty");
            } else y("_handleAck :: Server sent an ack in error. Ignoring.");
          }, T.prototype._handlePubrel = function (e, t) {
            y("handling pubrel packet"), t = void 0 !== t ? t : C;
            var r = this,
              n = {
                cmd: "pubcomp",
                messageId: e.messageId
              };
            r.incomingStore.get(e, function (e, i) {
              e ? r._sendPacket(n, t) : (r.emit("message", i.topic, i.payload, i), r.handleMessage(i, function (e) {
                if (e) return t(e);
                r.incomingStore.del(i, C), r._sendPacket(n, t);
              }));
            });
          }, T.prototype._handleDisconnect = function (e) {
            this.emit("disconnect", e);
          }, T.prototype._nextId = function () {
            return this.messageIdProvider.allocate();
          }, T.prototype.getLastMessageId = function () {
            return this.messageIdProvider.getLastAllocated();
          }, T.prototype._resubscribe = function () {
            y("_resubscribe");
            var e = Object.keys(this._resubscribeTopics);
            if (!this._firstConnection && (this.options.clean || 5 === this.options.protocolVersion && !this.connackPacket.sessionPresent) && e.length > 0) if (this.options.resubscribe) {
              if (5 === this.options.protocolVersion) {
                y("_resubscribe: protocolVersion 5");
                for (var _t5 = 0; _t5 < e.length; _t5++) {
                  var _r6 = {};
                  _r6[e[_t5]] = this._resubscribeTopics[e[_t5]], _r6.resubscribe = !0, this.subscribe(_r6, {
                    properties: _r6[e[_t5]].properties
                  });
                }
              } else this._resubscribeTopics.resubscribe = !0, this.subscribe(this._resubscribeTopics);
            } else this._resubscribeTopics = {};
            this._firstConnection = !1;
          }, T.prototype._onConnect = function (e) {
            if (this.disconnected) return void this.emit("connect", e);
            var t = this;
            this.connackPacket = e, this.messageIdProvider.clear(), this._setupPingTimer(), this.connected = !0, function r() {
              var n = t.outgoingStore.createStream();
              function i() {
                t._storeProcessing = !1, t._packetIdsDuringStoreProcessing = {};
              }
              function o() {
                n.destroy(), n = null, t._flushStoreProcessingQueue(), i();
              }
              t.once("close", o), n.on("error", function (e) {
                i(), t._flushStoreProcessingQueue(), t.removeListener("close", o), t.emit("error", e);
              }), n.on("end", function () {
                var n = !0;
                for (var _e13 in t._packetIdsDuringStoreProcessing) if (!t._packetIdsDuringStoreProcessing[_e13]) {
                  n = !1;
                  break;
                }
                n ? (i(), t.removeListener("close", o), t._invokeAllStoreProcessingQueue(), t.emit("connect", e)) : r();
              }), function e() {
                if (!n) return;
                t._storeProcessing = !0;
                var r = n.read(1);
                var i;
                r ? t._packetIdsDuringStoreProcessing[r.messageId] ? e() : t.disconnecting || t.reconnectTimer ? n.destroy && n.destroy() : (i = t.outgoing[r.messageId] ? t.outgoing[r.messageId].cb : null, t.outgoing[r.messageId] = {
                  volatile: !1,
                  cb: function cb(t, r) {
                    i && i(t, r), e();
                  }
                }, t._packetIdsDuringStoreProcessing[r.messageId] = !0, t.messageIdProvider.register(r.messageId) ? t._sendPacket(r) : y("messageId: %d has already used.", r.messageId)) : n.once("readable", e);
              }();
            }();
          }, T.prototype._invokeStoreProcessingQueue = function () {
            if (this._storeProcessingQueue.length > 0) {
              var _e14 = this._storeProcessingQueue[0];
              if (_e14 && _e14.invoke()) return this._storeProcessingQueue.shift(), !0;
            }
            return !1;
          }, T.prototype._invokeAllStoreProcessingQueue = function () {
            for (; this._invokeStoreProcessingQueue(););
          }, T.prototype._flushStoreProcessingQueue = function () {
            var _iterator = _createForOfIteratorHelper(this._storeProcessingQueue),
              _step;
            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                var _e15 = _step.value;
                _e15.cbStorePut && _e15.cbStorePut(new Error("Connection closed")), _e15.callback && _e15.callback(new Error("Connection closed"));
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
            this._storeProcessingQueue.splice(0);
          }, t.exports = T;
        }).call(this);
      }).call(this, e("_process"), "undefined" != typeof __webpack_require__.g ? __webpack_require__.g : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }, {
      "./default-message-id-provider": 7,
      "./store": 8,
      "./topic-alias-recv": 9,
      "./topic-alias-send": 10,
      "./validations": 11,
      _process: 50,
      debug: 18,
      events: 22,
      inherits: 24,
      "mqtt-packet": 40,
      "readable-stream": 69,
      reinterval: 70,
      "rfdc/default": 71,
      xtend: 81
    }],
    2: [function (e, t, r) {
      (function (r) {
        (function () {
          "use strict";

          var n = e("readable-stream").Transform,
            i = e("duplexify");
          var o,
            s,
            a,
            l = !1;
          t.exports = function (e, t) {
            if (t.hostname = t.hostname || t.host, !t.hostname) throw new Error("Could not determine host. Specify host manually.");
            var u = "MQIsdp" === t.protocolId && 3 === t.protocolVersion ? "mqttv3.1" : "mqtt";
            !function (e) {
              e.hostname || (e.hostname = "localhost"), e.path || (e.path = "/"), e.wsOptions || (e.wsOptions = {});
            }(t);
            var c = function (e, t) {
              var r = "alis" === e.protocol ? "wss" : "ws";
              var n = r + "://" + e.hostname + e.path;
              return e.port && 80 !== e.port && 443 !== e.port && (n = r + "://" + e.hostname + ":" + e.port + e.path), "function" == typeof e.transformWsUrl && (n = e.transformWsUrl(n, e, t)), n;
            }(t, e);
            return (o = t.my).connectSocket({
              url: c,
              protocols: u
            }), s = function () {
              var e = new n();
              return e._write = function (e, t, r) {
                o.sendSocketMessage({
                  data: e.buffer,
                  success: function success() {
                    r();
                  },
                  fail: function fail() {
                    r(new Error());
                  }
                });
              }, e._flush = function (e) {
                o.closeSocket({
                  success: function success() {
                    e();
                  }
                });
              }, e;
            }(), a = i.obj(), l || (l = !0, o.onSocketOpen(function () {
              a.setReadable(s), a.setWritable(s), a.emit("connect");
            }), o.onSocketMessage(function (e) {
              if ("string" == typeof e.data) {
                var _t6 = r.from(e.data, "base64");
                s.push(_t6);
              } else {
                var _t7 = new FileReader();
                _t7.addEventListener("load", function () {
                  var e = _t7.result;
                  e = e instanceof ArrayBuffer ? r.from(e) : r.from(e, "utf8"), s.push(e);
                }), _t7.readAsArrayBuffer(e.data);
              }
            }), o.onSocketClose(function () {
              a.end(), a.destroy();
            }), o.onSocketError(function (e) {
              a.destroy(e);
            })), a;
          };
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      buffer: 17,
      duplexify: 20,
      "readable-stream": 69
    }],
    3: [function (e, t, r) {
      "use strict";

      var n = e("net"),
        i = e("debug")("mqttjs:tcp");
      t.exports = function (e, t) {
        t.port = t.port || 1883, t.hostname = t.hostname || t.host || "localhost";
        var r = t.port,
          o = t.hostname;
        return i("port %d and host %s", r, o), n.createConnection(r, o);
      };
    }, {
      debug: 18,
      net: 16
    }],
    4: [function (e, t, r) {
      "use strict";

      var n = e("tls"),
        i = e("net"),
        o = e("debug")("mqttjs:tls");
      t.exports = function (e, t) {
        t.port = t.port || 8883, t.host = t.hostname || t.host || "localhost", 0 === i.isIP(t.host) && (t.servername = t.host), t.rejectUnauthorized = !1 !== t.rejectUnauthorized, delete t.path, o("port %d host %s rejectUnauthorized %b", t.port, t.host, t.rejectUnauthorized);
        var r = n.connect(t);
        function s(n) {
          t.rejectUnauthorized && e.emit("error", n), r.end();
        }
        return r.on("secureConnect", function () {
          t.rejectUnauthorized && !r.authorized ? r.emit("error", new Error("TLS not authorized")) : r.removeListener("error", s);
        }), r.on("error", s), r;
      };
    }, {
      debug: 18,
      net: 16,
      tls: 16
    }],
    5: [function (e, t, r) {
      (function (r, n) {
        (function () {
          "use strict";

          var i = e("ws"),
            o = e("debug")("mqttjs:ws"),
            s = e("duplexify"),
            a = e("readable-stream").Transform,
            l = ["rejectUnauthorized", "ca", "cert", "key", "pfx", "passphrase"],
            u = void 0 !== r && "browser" === r.title || "function" == typeof __webpack_require__;
          function c(e, t) {
            var r = e.protocol + "://" + e.hostname + ":" + e.port + e.path;
            return "function" == typeof e.transformWsUrl && (r = e.transformWsUrl(r, e, t)), r;
          }
          function h(e) {
            var t = e;
            return e.hostname || (t.hostname = "localhost"), e.port || ("wss" === e.protocol ? t.port = 443 : t.port = 80), e.path || (t.path = "/"), e.wsOptions || (t.wsOptions = {}), u || "wss" !== e.protocol || l.forEach(function (r) {
              Object.prototype.hasOwnProperty.call(e, r) && !Object.prototype.hasOwnProperty.call(e.wsOptions, r) && (t.wsOptions[r] = e[r]);
            }), t;
          }
          t.exports = u ? function (e, t) {
            var r;
            o("browserStreamBuilder");
            var i = function (e) {
                var t = h(e);
                if (t.hostname || (t.hostname = t.host), !t.hostname) {
                  if ("undefined" == typeof document) throw new Error("Could not determine host. Specify host manually.");
                  var _e16 = new URL(document.URL);
                  t.hostname = _e16.hostname, t.port || (t.port = _e16.port);
                }
                return void 0 === t.objectMode && (t.objectMode = !(!0 === t.binary || void 0 === t.binary)), t;
              }(t).browserBufferSize || 524288,
              l = t.browserBufferTimeout || 1e3,
              u = !t.objectMode,
              f = function (e, t) {
                var r = "MQIsdp" === t.protocolId && 3 === t.protocolVersion ? "mqttv3.1" : "mqtt",
                  n = c(t, e),
                  i = new WebSocket(n, [r]);
                return i.binaryType = "arraybuffer", i;
              }(e, t),
              p = function (e, t, r) {
                var n = new a({
                  objectModeMode: e.objectMode
                });
                return n._write = t, n._flush = r, n;
              }(t, function e(t, r, o) {
                f.bufferedAmount > i && setTimeout(e, l, t, r, o), u && "string" == typeof t && (t = n.from(t, "utf8"));
                try {
                  f.send(t);
                } catch (e) {
                  return o(e);
                }
                o();
              }, function (e) {
                f.close(), e();
              });
            t.objectMode || (p._writev = v), p.on("close", function () {
              f.close();
            });
            var d = void 0 !== f.addEventListener;
            function g() {
              r.setReadable(p), r.setWritable(p), r.emit("connect");
            }
            function y() {
              r.end(), r.destroy();
            }
            function b(e) {
              r.destroy(e);
            }
            function m(e) {
              var t = e.data;
              t = t instanceof ArrayBuffer ? n.from(t) : n.from(t, "utf8"), p.push(t);
            }
            function v(e, t) {
              var r = new Array(e.length);
              for (var _t8 = 0; _t8 < e.length; _t8++) "string" == typeof e[_t8].chunk ? r[_t8] = n.from(e[_t8], "utf8") : r[_t8] = e[_t8].chunk;
              this._write(n.concat(r), "binary", t);
            }
            return f.readyState === f.OPEN ? r = p : (r = r = s(void 0, void 0, t), t.objectMode || (r._writev = v), d ? f.addEventListener("open", g) : f.onopen = g), r.socket = f, d ? (f.addEventListener("close", y), f.addEventListener("error", b), f.addEventListener("message", m)) : (f.onclose = y, f.onerror = b, f.onmessage = m), r;
          } : function (e, t) {
            o("streamBuilder");
            var r = h(t),
              n = c(r, e),
              s = function (e, t, r) {
                o("createWebSocket"), o("protocol: " + r.protocolId + " " + r.protocolVersion);
                var n = "MQIsdp" === r.protocolId && 3 === r.protocolVersion ? "mqttv3.1" : "mqtt";
                return o("creating new Websocket for url: " + t + " and protocol: " + n), new i(t, [n], r.wsOptions);
              }(0, n, r),
              a = i.createWebSocketStream(s, r.wsOptions);
            return a.url = n, s.on("close", function () {
              a.destroy();
            }), a;
          };
        }).call(this);
      }).call(this, e("_process"), e("buffer").Buffer);
    }, {
      _process: 50,
      buffer: 17,
      debug: 18,
      duplexify: 20,
      "readable-stream": 69,
      ws: 80
    }],
    6: [function (e, t, r) {
      (function (r) {
        (function () {
          "use strict";

          var n = e("readable-stream").Transform,
            i = e("duplexify");
          var o, s, a;
          t.exports = function (e, t) {
            if (t.hostname = t.hostname || t.host, !t.hostname) throw new Error("Could not determine host. Specify host manually.");
            var l = "MQIsdp" === t.protocolId && 3 === t.protocolVersion ? "mqttv3.1" : "mqtt";
            !function (e) {
              e.hostname || (e.hostname = "localhost"), e.path || (e.path = "/"), e.wsOptions || (e.wsOptions = {});
            }(t);
            var u = function (e, t) {
              var r = "wxs" === e.protocol ? "wss" : "ws";
              var n = r + "://" + e.hostname + e.path;
              return e.port && 80 !== e.port && 443 !== e.port && (n = r + "://" + e.hostname + ":" + e.port + e.path), "function" == typeof e.transformWsUrl && (n = e.transformWsUrl(n, e, t)), n;
            }(t, e);
            o = wx.connectSocket({
              url: u,
              protocols: [l]
            }), s = function () {
              var e = new n();
              return e._write = function (e, t, r) {
                o.send({
                  data: e.buffer,
                  success: function success() {
                    r();
                  },
                  fail: function fail(e) {
                    r(new Error(e));
                  }
                });
              }, e._flush = function (e) {
                o.close({
                  success: function success() {
                    e();
                  }
                });
              }, e;
            }(), (a = i.obj())._destroy = function (e, t) {
              o.close({
                success: function success() {
                  t && t(e);
                }
              });
            };
            var c = a.destroy;
            return a.destroy = function () {
              a.destroy = c;
              var e = this;
              setTimeout(function () {
                o.close({
                  fail: function fail() {
                    e._destroy(new Error());
                  }
                });
              }, 0);
            }.bind(a), o.onOpen(function () {
              a.setReadable(s), a.setWritable(s), a.emit("connect");
            }), o.onMessage(function (e) {
              var t = e.data;
              t = t instanceof ArrayBuffer ? r.from(t) : r.from(t, "utf8"), s.push(t);
            }), o.onClose(function () {
              a.end(), a.destroy();
            }), o.onError(function (e) {
              a.destroy(new Error(e.errMsg));
            }), a;
          };
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      buffer: 17,
      duplexify: 20,
      "readable-stream": 69
    }],
    7: [function (e, t, r) {
      "use strict";

      function n() {
        if (!(this instanceof n)) return new n();
        this.nextId = Math.max(1, Math.floor(65535 * Math.random()));
      }
      n.prototype.allocate = function () {
        var e = this.nextId++;
        return 65536 === this.nextId && (this.nextId = 1), e;
      }, n.prototype.getLastAllocated = function () {
        return 1 === this.nextId ? 65535 : this.nextId - 1;
      }, n.prototype.register = function (e) {
        return !0;
      }, n.prototype.deallocate = function (e) {}, n.prototype.clear = function () {}, t.exports = n;
    }, {}],
    8: [function (e, t, r) {
      "use strict";

      var n = e("xtend"),
        i = e("readable-stream").Readable,
        o = {
          objectMode: !0
        },
        s = {
          clean: !0
        };
      function a(e) {
        if (!(this instanceof a)) return new a(e);
        this.options = e || {}, this.options = n(s, e), this._inflights = new Map();
      }
      a.prototype.put = function (e, t) {
        return this._inflights.set(e.messageId, e), t && t(), this;
      }, a.prototype.createStream = function () {
        var e = new i(o),
          t = [];
        var r = !1,
          n = 0;
        return this._inflights.forEach(function (e, r) {
          t.push(e);
        }), e._read = function () {
          !r && n < t.length ? this.push(t[n++]) : this.push(null);
        }, e.destroy = function () {
          if (r) return;
          var e = this;
          r = !0, setTimeout(function () {
            e.emit("close");
          }, 0);
        }, e;
      }, a.prototype.del = function (e, t) {
        return (e = this._inflights.get(e.messageId)) ? (this._inflights.delete(e.messageId), t(null, e)) : t && t(new Error("missing packet")), this;
      }, a.prototype.get = function (e, t) {
        return (e = this._inflights.get(e.messageId)) ? t(null, e) : t && t(new Error("missing packet")), this;
      }, a.prototype.close = function (e) {
        this.options.clean && (this._inflights = null), e && e();
      }, t.exports = a;
    }, {
      "readable-stream": 69,
      xtend: 81
    }],
    9: [function (e, t, r) {
      "use strict";

      function n(e) {
        if (!(this instanceof n)) return new n(e);
        this.aliasToTopic = {}, this.max = e;
      }
      n.prototype.put = function (e, t) {
        return !(0 === t || t > this.max) && (this.aliasToTopic[t] = e, this.length = Object.keys(this.aliasToTopic).length, !0);
      }, n.prototype.getTopicByAlias = function (e) {
        return this.aliasToTopic[e];
      }, n.prototype.clear = function () {
        this.aliasToTopic = {};
      }, t.exports = n;
    }, {}],
    10: [function (e, t, r) {
      "use strict";

      var n = e("lru-cache"),
        i = e("number-allocator").NumberAllocator;
      function o(e) {
        if (!(this instanceof o)) return new o(e);
        e > 0 && (this.aliasToTopic = new n({
          max: e
        }), this.topicToAlias = {}, this.numberAllocator = new i(1, e), this.max = e, this.length = 0);
      }
      o.prototype.put = function (e, t) {
        if (0 === t || t > this.max) return !1;
        var r = this.aliasToTopic.get(t);
        return r && delete this.topicToAlias[r], this.aliasToTopic.set(t, e), this.topicToAlias[e] = t, this.numberAllocator.use(t), this.length = this.aliasToTopic.length, !0;
      }, o.prototype.getTopicByAlias = function (e) {
        return this.aliasToTopic.get(e);
      }, o.prototype.getAliasByTopic = function (e) {
        var t = this.topicToAlias[e];
        return void 0 !== t && this.aliasToTopic.get(t), t;
      }, o.prototype.clear = function () {
        this.aliasToTopic.reset(), this.topicToAlias = {}, this.numberAllocator.clear(), this.length = 0;
      }, o.prototype.getLruAlias = function () {
        var e = this.numberAllocator.firstVacant();
        return e || this.aliasToTopic.keys()[this.aliasToTopic.length - 1];
      }, t.exports = o;
    }, {
      "lru-cache": 37,
      "number-allocator": 46
    }],
    11: [function (e, t, r) {
      "use strict";

      function n(e) {
        var t = e.split("/");
        for (var _e17 = 0; _e17 < t.length; _e17++) if ("+" !== t[_e17]) {
          if ("#" === t[_e17]) return _e17 === t.length - 1;
          if (-1 !== t[_e17].indexOf("+") || -1 !== t[_e17].indexOf("#")) return !1;
        }
        return !0;
      }
      t.exports = {
        validateTopics: function validateTopics(e) {
          if (0 === e.length) return "empty_topic_list";
          for (var _t9 = 0; _t9 < e.length; _t9++) if (!n(e[_t9])) return e[_t9];
          return null;
        }
      };
    }, {}],
    12: [function (e, t, r) {
      (function (r) {
        (function () {
          "use strict";

          var n = e("../client"),
            i = e("../store"),
            o = e("url"),
            s = e("xtend"),
            a = e("debug")("mqttjs"),
            l = {};
          function u(e, t) {
            if (a("connecting to an MQTT broker..."), "object" != _typeof(e) || t || (t = e, e = null), t = t || {}, e) {
              var _r7 = o.parse(e, !0);
              if (null != _r7.port && (_r7.port = Number(_r7.port)), null === (t = s(_r7, t)).protocol) throw new Error("Missing protocol");
              t.protocol = t.protocol.replace(/:$/, "");
            }
            if (function (e) {
              var t;
              e.auth && ((t = e.auth.match(/^(.+):(.+)$/)) ? (e.username = t[1], e.password = t[2]) : e.username = e.auth);
            }(t), t.query && "string" == typeof t.query.clientId && (t.clientId = t.query.clientId), t.cert && t.key) {
              if (!t.protocol) throw new Error("Missing secure protocol key");
              if (-1 === ["mqtts", "wss", "wxs", "alis"].indexOf(t.protocol)) switch (t.protocol) {
                case "mqtt":
                  t.protocol = "mqtts";
                  break;
                case "ws":
                  t.protocol = "wss";
                  break;
                case "wx":
                  t.protocol = "wxs";
                  break;
                case "ali":
                  t.protocol = "alis";
                  break;
                default:
                  throw new Error('Unknown protocol for secure connection: "' + t.protocol + '"!');
              }
            }
            if (!l[t.protocol]) {
              var _e18 = -1 !== ["mqtts", "wss"].indexOf(t.protocol);
              t.protocol = ["mqtt", "mqtts", "ws", "wss", "wx", "wxs", "ali", "alis"].filter(function (t, r) {
                return (!_e18 || r % 2 != 0) && "function" == typeof l[t];
              })[0];
            }
            if (!1 === t.clean && !t.clientId) throw new Error("Missing clientId for unclean clients");
            t.protocol && (t.defaultProtocol = t.protocol);
            var r = new n(function (e) {
              return t.servers && (e._reconnectCount && e._reconnectCount !== t.servers.length || (e._reconnectCount = 0), t.host = t.servers[e._reconnectCount].host, t.port = t.servers[e._reconnectCount].port, t.protocol = t.servers[e._reconnectCount].protocol ? t.servers[e._reconnectCount].protocol : t.defaultProtocol, t.hostname = t.host, e._reconnectCount++), a("calling streambuilder for", t.protocol), l[t.protocol](e, t);
            }, t);
            return r.on("error", function () {}), r;
          }
          void 0 !== r && "browser" !== r.title || "function" != typeof __webpack_require__ ? (l.mqtt = e("./tcp"), l.tcp = e("./tcp"), l.ssl = e("./tls"), l.tls = e("./tls"), l.mqtts = e("./tls")) : (l.wx = e("./wx"), l.wxs = e("./wx"), l.ali = e("./ali"), l.alis = e("./ali")), l.ws = e("./ws"), l.wss = e("./ws"), t.exports = u, t.exports.connect = u, t.exports.MqttClient = n, t.exports.Store = i;
        }).call(this);
      }).call(this, e("_process"));
    }, {
      "../client": 1,
      "../store": 8,
      "./ali": 2,
      "./tcp": 3,
      "./tls": 4,
      "./ws": 5,
      "./wx": 6,
      _process: 50,
      debug: 18,
      url: 76,
      xtend: 81
    }],
    13: [function (e, t, r) {
      "use strict";

      r.byteLength = function (e) {
        var t = u(e),
          r = t[0],
          n = t[1];
        return 3 * (r + n) / 4 - n;
      }, r.toByteArray = function (e) {
        var t,
          r,
          n = u(e),
          s = n[0],
          a = n[1],
          l = new o(function (e, t, r) {
            return 3 * (t + r) / 4 - r;
          }(0, s, a)),
          c = 0,
          h = a > 0 ? s - 4 : s;
        for (r = 0; r < h; r += 4) t = i[e.charCodeAt(r)] << 18 | i[e.charCodeAt(r + 1)] << 12 | i[e.charCodeAt(r + 2)] << 6 | i[e.charCodeAt(r + 3)], l[c++] = t >> 16 & 255, l[c++] = t >> 8 & 255, l[c++] = 255 & t;
        2 === a && (t = i[e.charCodeAt(r)] << 2 | i[e.charCodeAt(r + 1)] >> 4, l[c++] = 255 & t);
        1 === a && (t = i[e.charCodeAt(r)] << 10 | i[e.charCodeAt(r + 1)] << 4 | i[e.charCodeAt(r + 2)] >> 2, l[c++] = t >> 8 & 255, l[c++] = 255 & t);
        return l;
      }, r.fromByteArray = function (e) {
        for (var t, r = e.length, i = r % 3, o = [], s = 0, a = r - i; s < a; s += 16383) o.push(c(e, s, s + 16383 > a ? a : s + 16383));
        1 === i ? (t = e[r - 1], o.push(n[t >> 2] + n[t << 4 & 63] + "==")) : 2 === i && (t = (e[r - 2] << 8) + e[r - 1], o.push(n[t >> 10] + n[t >> 4 & 63] + n[t << 2 & 63] + "="));
        return o.join("");
      };
      for (var n = [], i = [], o = "undefined" != typeof Uint8Array ? Uint8Array : Array, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = 0, l = s.length; a < l; ++a) n[a] = s[a], i[s.charCodeAt(a)] = a;
      function u(e) {
        var t = e.length;
        if (t % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
        var r = e.indexOf("=");
        return -1 === r && (r = t), [r, r === t ? 0 : 4 - r % 4];
      }
      function c(e, t, r) {
        for (var i, o, s = [], a = t; a < r; a += 3) i = (e[a] << 16 & 16711680) + (e[a + 1] << 8 & 65280) + (255 & e[a + 2]), s.push(n[(o = i) >> 18 & 63] + n[o >> 12 & 63] + n[o >> 6 & 63] + n[63 & o]);
        return s.join("");
      }
      i["-".charCodeAt(0)] = 62, i["_".charCodeAt(0)] = 63;
    }, {}],
    14: [function (e, t, r) {
      "use strict";

      var _e19 = e("buffer"),
        n = _e19.Buffer,
        i = Symbol.for("BufferList");
      function o(e) {
        if (!(this instanceof o)) return new o(e);
        o._init.call(this, e);
      }
      o._init = function (e) {
        Object.defineProperty(this, i, {
          value: !0
        }), this._bufs = [], this.length = 0, e && this.append(e);
      }, o.prototype._new = function (e) {
        return new o(e);
      }, o.prototype._offset = function (e) {
        if (0 === e) return [0, 0];
        var t = 0;
        for (var _r8 = 0; _r8 < this._bufs.length; _r8++) {
          var _n4 = t + this._bufs[_r8].length;
          if (e < _n4 || _r8 === this._bufs.length - 1) return [_r8, e - t];
          t = _n4;
        }
      }, o.prototype._reverseOffset = function (e) {
        var t = e[0];
        var r = e[1];
        for (var _e20 = 0; _e20 < t; _e20++) r += this._bufs[_e20].length;
        return r;
      }, o.prototype.get = function (e) {
        if (e > this.length || e < 0) return;
        var t = this._offset(e);
        return this._bufs[t[0]][t[1]];
      }, o.prototype.slice = function (e, t) {
        return "number" == typeof e && e < 0 && (e += this.length), "number" == typeof t && t < 0 && (t += this.length), this.copy(null, 0, e, t);
      }, o.prototype.copy = function (e, t, r, i) {
        if (("number" != typeof r || r < 0) && (r = 0), ("number" != typeof i || i > this.length) && (i = this.length), r >= this.length) return e || n.alloc(0);
        if (i <= 0) return e || n.alloc(0);
        var o = !!e,
          s = this._offset(r),
          a = i - r;
        var l = a,
          u = o && t || 0,
          c = s[1];
        if (0 === r && i === this.length) {
          if (!o) return 1 === this._bufs.length ? this._bufs[0] : n.concat(this._bufs, this.length);
          for (var _t10 = 0; _t10 < this._bufs.length; _t10++) this._bufs[_t10].copy(e, u), u += this._bufs[_t10].length;
          return e;
        }
        if (l <= this._bufs[s[0]].length - c) return o ? this._bufs[s[0]].copy(e, t, c, c + l) : this._bufs[s[0]].slice(c, c + l);
        o || (e = n.allocUnsafe(a));
        for (var _t11 = s[0]; _t11 < this._bufs.length; _t11++) {
          var _r9 = this._bufs[_t11].length - c;
          if (!(l > _r9)) {
            this._bufs[_t11].copy(e, u, c, c + l), u += _r9;
            break;
          }
          this._bufs[_t11].copy(e, u, c), u += _r9, l -= _r9, c && (c = 0);
        }
        return e.length > u ? e.slice(0, u) : e;
      }, o.prototype.shallowSlice = function (e, t) {
        if (e = e || 0, t = "number" != typeof t ? this.length : t, e < 0 && (e += this.length), t < 0 && (t += this.length), e === t) return this._new();
        var r = this._offset(e),
          n = this._offset(t),
          i = this._bufs.slice(r[0], n[0] + 1);
        return 0 === n[1] ? i.pop() : i[i.length - 1] = i[i.length - 1].slice(0, n[1]), 0 !== r[1] && (i[0] = i[0].slice(r[1])), this._new(i);
      }, o.prototype.toString = function (e, t, r) {
        return this.slice(t, r).toString(e);
      }, o.prototype.consume = function (e) {
        if (e = Math.trunc(e), Number.isNaN(e) || e <= 0) return this;
        for (; this._bufs.length;) {
          if (!(e >= this._bufs[0].length)) {
            this._bufs[0] = this._bufs[0].slice(e), this.length -= e;
            break;
          }
          e -= this._bufs[0].length, this.length -= this._bufs[0].length, this._bufs.shift();
        }
        return this;
      }, o.prototype.duplicate = function () {
        var e = this._new();
        for (var _t12 = 0; _t12 < this._bufs.length; _t12++) e.append(this._bufs[_t12]);
        return e;
      }, o.prototype.append = function (e) {
        if (null == e) return this;
        if (e.buffer) this._appendBuffer(n.from(e.buffer, e.byteOffset, e.byteLength));else if (Array.isArray(e)) for (var _t13 = 0; _t13 < e.length; _t13++) this.append(e[_t13]);else if (this._isBufferList(e)) for (var _t14 = 0; _t14 < e._bufs.length; _t14++) this.append(e._bufs[_t14]);else "number" == typeof e && (e = e.toString()), this._appendBuffer(n.from(e));
        return this;
      }, o.prototype._appendBuffer = function (e) {
        this._bufs.push(e), this.length += e.length;
      }, o.prototype.indexOf = function (e, t, r) {
        if (void 0 === r && "string" == typeof t && (r = t, t = void 0), "function" == typeof e || Array.isArray(e)) throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');
        if ("number" == typeof e ? e = n.from([e]) : "string" == typeof e ? e = n.from(e, r) : this._isBufferList(e) ? e = e.slice() : Array.isArray(e.buffer) ? e = n.from(e.buffer, e.byteOffset, e.byteLength) : n.isBuffer(e) || (e = n.from(e)), t = Number(t || 0), isNaN(t) && (t = 0), t < 0 && (t = this.length + t), t < 0 && (t = 0), 0 === e.length) return t > this.length ? this.length : t;
        var i = this._offset(t);
        var o = i[0],
          s = i[1];
        for (; o < this._bufs.length; o++) {
          var _t15 = this._bufs[o];
          for (; s < _t15.length;) {
            if (_t15.length - s >= e.length) {
              var _r10 = _t15.indexOf(e, s);
              if (-1 !== _r10) return this._reverseOffset([o, _r10]);
              s = _t15.length - e.length + 1;
            } else {
              var _t16 = this._reverseOffset([o, s]);
              if (this._match(_t16, e)) return _t16;
              s++;
            }
          }
          s = 0;
        }
        return -1;
      }, o.prototype._match = function (e, t) {
        if (this.length - e < t.length) return !1;
        for (var _r11 = 0; _r11 < t.length; _r11++) if (this.get(e + _r11) !== t[_r11]) return !1;
        return !0;
      }, function () {
        var e = {
          readDoubleBE: 8,
          readDoubleLE: 8,
          readFloatBE: 4,
          readFloatLE: 4,
          readInt32BE: 4,
          readInt32LE: 4,
          readUInt32BE: 4,
          readUInt32LE: 4,
          readInt16BE: 2,
          readInt16LE: 2,
          readUInt16BE: 2,
          readUInt16LE: 2,
          readInt8: 1,
          readUInt8: 1,
          readIntBE: null,
          readIntLE: null,
          readUIntBE: null,
          readUIntLE: null
        };
        for (var _t17 in e) !function (t) {
          o.prototype[t] = null === e[t] ? function (e, r) {
            return this.slice(e, e + r)[t](0, r);
          } : function () {
            var r = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
            return this.slice(r, r + e[t])[t](0);
          };
        }(_t17);
      }(), o.prototype._isBufferList = function (e) {
        return e instanceof o || o.isBufferList(e);
      }, o.isBufferList = function (e) {
        return null != e && e[i];
      }, t.exports = o;
    }, {
      buffer: 17
    }],
    15: [function (e, t, r) {
      "use strict";

      var n = e("readable-stream").Duplex,
        i = e("inherits"),
        o = e("./BufferList");
      function s(e) {
        if (!(this instanceof s)) return new s(e);
        if ("function" == typeof e) {
          this._callback = e;
          var _t18 = function (e) {
            this._callback && (this._callback(e), this._callback = null);
          }.bind(this);
          this.on("pipe", function (e) {
            e.on("error", _t18);
          }), this.on("unpipe", function (e) {
            e.removeListener("error", _t18);
          }), e = null;
        }
        o._init.call(this, e), n.call(this);
      }
      i(s, n), Object.assign(s.prototype, o.prototype), s.prototype._new = function (e) {
        return new s(e);
      }, s.prototype._write = function (e, t, r) {
        this._appendBuffer(e), "function" == typeof r && r();
      }, s.prototype._read = function (e) {
        if (!this.length) return this.push(null);
        e = Math.min(e, this.length), this.push(this.slice(0, e)), this.consume(e);
      }, s.prototype.end = function (e) {
        n.prototype.end.call(this, e), this._callback && (this._callback(null, this.slice()), this._callback = null);
      }, s.prototype._destroy = function (e, t) {
        this._bufs.length = 0, this.length = 0, t(e);
      }, s.prototype._isBufferList = function (e) {
        return e instanceof s || e instanceof o || s.isBufferList(e);
      }, s.isBufferList = o.isBufferList, t.exports = s, t.exports.BufferListStream = s, t.exports.BufferList = o;
    }, {
      "./BufferList": 14,
      inherits: 24,
      "readable-stream": 69
    }],
    16: [function (e, t, r) {}, {}],
    17: [function (e, t, r) {
      (function (t) {
        (function () {
          "use strict";

          var t = e("base64-js"),
            n = e("ieee754");
          r.Buffer = s, r.SlowBuffer = function (e) {
            +e != e && (e = 0);
            return s.alloc(+e);
          }, r.INSPECT_MAX_BYTES = 50;
          var i = 2147483647;
          function o(e) {
            if (e > i) throw new RangeError('The value "' + e + '" is invalid for option "size"');
            var t = new Uint8Array(e);
            return t.__proto__ = s.prototype, t;
          }
          function s(e, t, r) {
            if ("number" == typeof e) {
              if ("string" == typeof t) throw new TypeError('The "string" argument must be of type string. Received type number');
              return u(e);
            }
            return a(e, t, r);
          }
          function a(e, t, r) {
            if ("string" == typeof e) return function (e, t) {
              "string" == typeof t && "" !== t || (t = "utf8");
              if (!s.isEncoding(t)) throw new TypeError("Unknown encoding: " + t);
              var r = 0 | f(e, t),
                n = o(r),
                i = n.write(e, t);
              i !== r && (n = n.slice(0, i));
              return n;
            }(e, t);
            if (ArrayBuffer.isView(e)) return c(e);
            if (null == e) throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + _typeof(e));
            if (q(e, ArrayBuffer) || e && q(e.buffer, ArrayBuffer)) return function (e, t, r) {
              if (t < 0 || e.byteLength < t) throw new RangeError('"offset" is outside of buffer bounds');
              if (e.byteLength < t + (r || 0)) throw new RangeError('"length" is outside of buffer bounds');
              var n;
              n = void 0 === t && void 0 === r ? new Uint8Array(e) : void 0 === r ? new Uint8Array(e, t) : new Uint8Array(e, t, r);
              return n.__proto__ = s.prototype, n;
            }(e, t, r);
            if ("number" == typeof e) throw new TypeError('The "value" argument must not be of type number. Received type number');
            var n = e.valueOf && e.valueOf();
            if (null != n && n !== e) return s.from(n, t, r);
            var i = function (e) {
              if (s.isBuffer(e)) {
                var t = 0 | h(e.length),
                  r = o(t);
                return 0 === r.length ? r : (e.copy(r, 0, 0, t), r);
              }
              if (void 0 !== e.length) return "number" != typeof e.length || D(e.length) ? o(0) : c(e);
              if ("Buffer" === e.type && Array.isArray(e.data)) return c(e.data);
            }(e);
            if (i) return i;
            if ("undefined" != typeof Symbol && null != Symbol.toPrimitive && "function" == typeof e[Symbol.toPrimitive]) return s.from(e[Symbol.toPrimitive]("string"), t, r);
            throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + _typeof(e));
          }
          function l(e) {
            if ("number" != typeof e) throw new TypeError('"size" argument must be of type number');
            if (e < 0) throw new RangeError('The value "' + e + '" is invalid for option "size"');
          }
          function u(e) {
            return l(e), o(e < 0 ? 0 : 0 | h(e));
          }
          function c(e) {
            for (var t = e.length < 0 ? 0 : 0 | h(e.length), r = o(t), n = 0; n < t; n += 1) r[n] = 255 & e[n];
            return r;
          }
          function h(e) {
            if (e >= i) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + i.toString(16) + " bytes");
            return 0 | e;
          }
          function f(e, t) {
            if (s.isBuffer(e)) return e.length;
            if (ArrayBuffer.isView(e) || q(e, ArrayBuffer)) return e.byteLength;
            if ("string" != typeof e) throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + _typeof(e));
            var r = e.length,
              n = arguments.length > 2 && !0 === arguments[2];
            if (!n && 0 === r) return 0;
            for (var i = !1;;) switch (t) {
              case "ascii":
              case "latin1":
              case "binary":
                return r;
              case "utf8":
              case "utf-8":
                return L(e).length;
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return 2 * r;
              case "hex":
                return r >>> 1;
              case "base64":
                return j(e).length;
              default:
                if (i) return n ? -1 : L(e).length;
                t = ("" + t).toLowerCase(), i = !0;
            }
          }
          function p(e, t, r) {
            var n = e[t];
            e[t] = e[r], e[r] = n;
          }
          function d(e, t, r, n, i) {
            if (0 === e.length) return -1;
            if ("string" == typeof r ? (n = r, r = 0) : r > 2147483647 ? r = 2147483647 : r < -2147483648 && (r = -2147483648), D(r = +r) && (r = i ? 0 : e.length - 1), r < 0 && (r = e.length + r), r >= e.length) {
              if (i) return -1;
              r = e.length - 1;
            } else if (r < 0) {
              if (!i) return -1;
              r = 0;
            }
            if ("string" == typeof t && (t = s.from(t, n)), s.isBuffer(t)) return 0 === t.length ? -1 : g(e, t, r, n, i);
            if ("number" == typeof t) return t &= 255, "function" == typeof Uint8Array.prototype.indexOf ? i ? Uint8Array.prototype.indexOf.call(e, t, r) : Uint8Array.prototype.lastIndexOf.call(e, t, r) : g(e, [t], r, n, i);
            throw new TypeError("val must be string, number or Buffer");
          }
          function g(e, t, r, n, i) {
            var o,
              s = 1,
              a = e.length,
              l = t.length;
            if (void 0 !== n && ("ucs2" === (n = String(n).toLowerCase()) || "ucs-2" === n || "utf16le" === n || "utf-16le" === n)) {
              if (e.length < 2 || t.length < 2) return -1;
              s = 2, a /= 2, l /= 2, r /= 2;
            }
            function u(e, t) {
              return 1 === s ? e[t] : e.readUInt16BE(t * s);
            }
            if (i) {
              var c = -1;
              for (o = r; o < a; o++) if (u(e, o) === u(t, -1 === c ? 0 : o - c)) {
                if (-1 === c && (c = o), o - c + 1 === l) return c * s;
              } else -1 !== c && (o -= o - c), c = -1;
            } else for (r + l > a && (r = a - l), o = r; o >= 0; o--) {
              for (var h = !0, f = 0; f < l; f++) if (u(e, o + f) !== u(t, f)) {
                h = !1;
                break;
              }
              if (h) return o;
            }
            return -1;
          }
          function y(e, t, r, n) {
            r = Number(r) || 0;
            var i = e.length - r;
            n ? (n = Number(n)) > i && (n = i) : n = i;
            var o = t.length;
            n > o / 2 && (n = o / 2);
            for (var s = 0; s < n; ++s) {
              var a = parseInt(t.substr(2 * s, 2), 16);
              if (D(a)) return s;
              e[r + s] = a;
            }
            return s;
          }
          function b(e, t, r, n) {
            return U(L(t, e.length - r), e, r, n);
          }
          function m(e, t, r, n) {
            return U(function (e) {
              for (var t = [], r = 0; r < e.length; ++r) t.push(255 & e.charCodeAt(r));
              return t;
            }(t), e, r, n);
          }
          function v(e, t, r, n) {
            return m(e, t, r, n);
          }
          function w(e, t, r, n) {
            return U(j(t), e, r, n);
          }
          function _(e, t, r, n) {
            return U(function (e, t) {
              for (var r, n, i, o = [], s = 0; s < e.length && !((t -= 2) < 0); ++s) r = e.charCodeAt(s), n = r >> 8, i = r % 256, o.push(i), o.push(n);
              return o;
            }(t, e.length - r), e, r, n);
          }
          function k(e, r, n) {
            return 0 === r && n === e.length ? t.fromByteArray(e) : t.fromByteArray(e.slice(r, n));
          }
          function S(e, t, r) {
            r = Math.min(e.length, r);
            for (var n = [], i = t; i < r;) {
              var o,
                s,
                a,
                l,
                u = e[i],
                c = null,
                h = u > 239 ? 4 : u > 223 ? 3 : u > 191 ? 2 : 1;
              if (i + h <= r) switch (h) {
                case 1:
                  u < 128 && (c = u);
                  break;
                case 2:
                  128 == (192 & (o = e[i + 1])) && (l = (31 & u) << 6 | 63 & o) > 127 && (c = l);
                  break;
                case 3:
                  o = e[i + 1], s = e[i + 2], 128 == (192 & o) && 128 == (192 & s) && (l = (15 & u) << 12 | (63 & o) << 6 | 63 & s) > 2047 && (l < 55296 || l > 57343) && (c = l);
                  break;
                case 4:
                  o = e[i + 1], s = e[i + 2], a = e[i + 3], 128 == (192 & o) && 128 == (192 & s) && 128 == (192 & a) && (l = (15 & u) << 18 | (63 & o) << 12 | (63 & s) << 6 | 63 & a) > 65535 && l < 1114112 && (c = l);
              }
              null === c ? (c = 65533, h = 1) : c > 65535 && (c -= 65536, n.push(c >>> 10 & 1023 | 55296), c = 56320 | 1023 & c), n.push(c), i += h;
            }
            return function (e) {
              var t = e.length;
              if (t <= E) return String.fromCharCode.apply(String, e);
              var r = "",
                n = 0;
              for (; n < t;) r += String.fromCharCode.apply(String, e.slice(n, n += E));
              return r;
            }(n);
          }
          r.kMaxLength = i, s.TYPED_ARRAY_SUPPORT = function () {
            try {
              var e = new Uint8Array(1);
              return e.__proto__ = {
                __proto__: Uint8Array.prototype,
                foo: function foo() {
                  return 42;
                }
              }, 42 === e.foo();
            } catch (e) {
              return !1;
            }
          }(), s.TYPED_ARRAY_SUPPORT || "undefined" == typeof console || "function" != typeof console.error || console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."), Object.defineProperty(s.prototype, "parent", {
            enumerable: !0,
            get: function get() {
              if (s.isBuffer(this)) return this.buffer;
            }
          }), Object.defineProperty(s.prototype, "offset", {
            enumerable: !0,
            get: function get() {
              if (s.isBuffer(this)) return this.byteOffset;
            }
          }), "undefined" != typeof Symbol && null != Symbol.species && s[Symbol.species] === s && Object.defineProperty(s, Symbol.species, {
            value: null,
            configurable: !0,
            enumerable: !1,
            writable: !1
          }), s.poolSize = 8192, s.from = function (e, t, r) {
            return a(e, t, r);
          }, s.prototype.__proto__ = Uint8Array.prototype, s.__proto__ = Uint8Array, s.alloc = function (e, t, r) {
            return function (e, t, r) {
              return l(e), e <= 0 ? o(e) : void 0 !== t ? "string" == typeof r ? o(e).fill(t, r) : o(e).fill(t) : o(e);
            }(e, t, r);
          }, s.allocUnsafe = function (e) {
            return u(e);
          }, s.allocUnsafeSlow = function (e) {
            return u(e);
          }, s.isBuffer = function (e) {
            return null != e && !0 === e._isBuffer && e !== s.prototype;
          }, s.compare = function (e, t) {
            if (q(e, Uint8Array) && (e = s.from(e, e.offset, e.byteLength)), q(t, Uint8Array) && (t = s.from(t, t.offset, t.byteLength)), !s.isBuffer(e) || !s.isBuffer(t)) throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
            if (e === t) return 0;
            for (var r = e.length, n = t.length, i = 0, o = Math.min(r, n); i < o; ++i) if (e[i] !== t[i]) {
              r = e[i], n = t[i];
              break;
            }
            return r < n ? -1 : n < r ? 1 : 0;
          }, s.isEncoding = function (e) {
            switch (String(e).toLowerCase()) {
              case "hex":
              case "utf8":
              case "utf-8":
              case "ascii":
              case "latin1":
              case "binary":
              case "base64":
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return !0;
              default:
                return !1;
            }
          }, s.concat = function (e, t) {
            if (!Array.isArray(e)) throw new TypeError('"list" argument must be an Array of Buffers');
            if (0 === e.length) return s.alloc(0);
            var r;
            if (void 0 === t) for (t = 0, r = 0; r < e.length; ++r) t += e[r].length;
            var n = s.allocUnsafe(t),
              i = 0;
            for (r = 0; r < e.length; ++r) {
              var o = e[r];
              if (q(o, Uint8Array) && (o = s.from(o)), !s.isBuffer(o)) throw new TypeError('"list" argument must be an Array of Buffers');
              o.copy(n, i), i += o.length;
            }
            return n;
          }, s.byteLength = f, s.prototype._isBuffer = !0, s.prototype.swap16 = function () {
            var e = this.length;
            if (e % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var t = 0; t < e; t += 2) p(this, t, t + 1);
            return this;
          }, s.prototype.swap32 = function () {
            var e = this.length;
            if (e % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var t = 0; t < e; t += 4) p(this, t, t + 3), p(this, t + 1, t + 2);
            return this;
          }, s.prototype.swap64 = function () {
            var e = this.length;
            if (e % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var t = 0; t < e; t += 8) p(this, t, t + 7), p(this, t + 1, t + 6), p(this, t + 2, t + 5), p(this, t + 3, t + 4);
            return this;
          }, s.prototype.toString = function () {
            var e = this.length;
            return 0 === e ? "" : 0 === arguments.length ? S(this, 0, e) : function (e, t, r) {
              var n = !1;
              if ((void 0 === t || t < 0) && (t = 0), t > this.length) return "";
              if ((void 0 === r || r > this.length) && (r = this.length), r <= 0) return "";
              if ((r >>>= 0) <= (t >>>= 0)) return "";
              for (e || (e = "utf8");;) switch (e) {
                case "hex":
                  return x(this, t, r);
                case "utf8":
                case "utf-8":
                  return S(this, t, r);
                case "ascii":
                  return C(this, t, r);
                case "latin1":
                case "binary":
                  return T(this, t, r);
                case "base64":
                  return k(this, t, r);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return A(this, t, r);
                default:
                  if (n) throw new TypeError("Unknown encoding: " + e);
                  e = (e + "").toLowerCase(), n = !0;
              }
            }.apply(this, arguments);
          }, s.prototype.toLocaleString = s.prototype.toString, s.prototype.equals = function (e) {
            if (!s.isBuffer(e)) throw new TypeError("Argument must be a Buffer");
            return this === e || 0 === s.compare(this, e);
          }, s.prototype.inspect = function () {
            var e = "",
              t = r.INSPECT_MAX_BYTES;
            return e = this.toString("hex", 0, t).replace(/(.{2})/g, "$1 ").trim(), this.length > t && (e += " ... "), "<Buffer " + e + ">";
          }, s.prototype.compare = function (e, t, r, n, i) {
            if (q(e, Uint8Array) && (e = s.from(e, e.offset, e.byteLength)), !s.isBuffer(e)) throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + _typeof(e));
            if (void 0 === t && (t = 0), void 0 === r && (r = e ? e.length : 0), void 0 === n && (n = 0), void 0 === i && (i = this.length), t < 0 || r > e.length || n < 0 || i > this.length) throw new RangeError("out of range index");
            if (n >= i && t >= r) return 0;
            if (n >= i) return -1;
            if (t >= r) return 1;
            if (t >>>= 0, r >>>= 0, n >>>= 0, i >>>= 0, this === e) return 0;
            for (var o = i - n, a = r - t, l = Math.min(o, a), u = this.slice(n, i), c = e.slice(t, r), h = 0; h < l; ++h) if (u[h] !== c[h]) {
              o = u[h], a = c[h];
              break;
            }
            return o < a ? -1 : a < o ? 1 : 0;
          }, s.prototype.includes = function (e, t, r) {
            return -1 !== this.indexOf(e, t, r);
          }, s.prototype.indexOf = function (e, t, r) {
            return d(this, e, t, r, !0);
          }, s.prototype.lastIndexOf = function (e, t, r) {
            return d(this, e, t, r, !1);
          }, s.prototype.write = function (e, t, r, n) {
            if (void 0 === t) n = "utf8", r = this.length, t = 0;else if (void 0 === r && "string" == typeof t) n = t, r = this.length, t = 0;else {
              if (!isFinite(t)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
              t >>>= 0, isFinite(r) ? (r >>>= 0, void 0 === n && (n = "utf8")) : (n = r, r = void 0);
            }
            var i = this.length - t;
            if ((void 0 === r || r > i) && (r = i), e.length > 0 && (r < 0 || t < 0) || t > this.length) throw new RangeError("Attempt to write outside buffer bounds");
            n || (n = "utf8");
            for (var o = !1;;) switch (n) {
              case "hex":
                return y(this, e, t, r);
              case "utf8":
              case "utf-8":
                return b(this, e, t, r);
              case "ascii":
                return m(this, e, t, r);
              case "latin1":
              case "binary":
                return v(this, e, t, r);
              case "base64":
                return w(this, e, t, r);
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return _(this, e, t, r);
              default:
                if (o) throw new TypeError("Unknown encoding: " + n);
                n = ("" + n).toLowerCase(), o = !0;
            }
          }, s.prototype.toJSON = function () {
            return {
              type: "Buffer",
              data: Array.prototype.slice.call(this._arr || this, 0)
            };
          };
          var E = 4096;
          function C(e, t, r) {
            var n = "";
            r = Math.min(e.length, r);
            for (var i = t; i < r; ++i) n += String.fromCharCode(127 & e[i]);
            return n;
          }
          function T(e, t, r) {
            var n = "";
            r = Math.min(e.length, r);
            for (var i = t; i < r; ++i) n += String.fromCharCode(e[i]);
            return n;
          }
          function x(e, t, r) {
            var n = e.length;
            (!t || t < 0) && (t = 0), (!r || r < 0 || r > n) && (r = n);
            for (var i = "", o = t; o < r; ++o) i += N(e[o]);
            return i;
          }
          function A(e, t, r) {
            for (var n = e.slice(t, r), i = "", o = 0; o < n.length; o += 2) i += String.fromCharCode(n[o] + 256 * n[o + 1]);
            return i;
          }
          function I(e, t, r) {
            if (e % 1 != 0 || e < 0) throw new RangeError("offset is not uint");
            if (e + t > r) throw new RangeError("Trying to access beyond buffer length");
          }
          function P(e, t, r, n, i, o) {
            if (!s.isBuffer(e)) throw new TypeError('"buffer" argument must be a Buffer instance');
            if (t > i || t < o) throw new RangeError('"value" argument is out of bounds');
            if (r + n > e.length) throw new RangeError("Index out of range");
          }
          function O(e, t, r, n, i, o) {
            if (r + n > e.length) throw new RangeError("Index out of range");
            if (r < 0) throw new RangeError("Index out of range");
          }
          function B(e, t, r, i, o) {
            return t = +t, r >>>= 0, o || O(e, 0, r, 4), n.write(e, t, r, i, 23, 4), r + 4;
          }
          function R(e, t, r, i, o) {
            return t = +t, r >>>= 0, o || O(e, 0, r, 8), n.write(e, t, r, i, 52, 8), r + 8;
          }
          s.prototype.slice = function (e, t) {
            var r = this.length;
            e = ~~e, t = void 0 === t ? r : ~~t, e < 0 ? (e += r) < 0 && (e = 0) : e > r && (e = r), t < 0 ? (t += r) < 0 && (t = 0) : t > r && (t = r), t < e && (t = e);
            var n = this.subarray(e, t);
            return n.__proto__ = s.prototype, n;
          }, s.prototype.readUIntLE = function (e, t, r) {
            e >>>= 0, t >>>= 0, r || I(e, t, this.length);
            for (var n = this[e], i = 1, o = 0; ++o < t && (i *= 256);) n += this[e + o] * i;
            return n;
          }, s.prototype.readUIntBE = function (e, t, r) {
            e >>>= 0, t >>>= 0, r || I(e, t, this.length);
            for (var n = this[e + --t], i = 1; t > 0 && (i *= 256);) n += this[e + --t] * i;
            return n;
          }, s.prototype.readUInt8 = function (e, t) {
            return e >>>= 0, t || I(e, 1, this.length), this[e];
          }, s.prototype.readUInt16LE = function (e, t) {
            return e >>>= 0, t || I(e, 2, this.length), this[e] | this[e + 1] << 8;
          }, s.prototype.readUInt16BE = function (e, t) {
            return e >>>= 0, t || I(e, 2, this.length), this[e] << 8 | this[e + 1];
          }, s.prototype.readUInt32LE = function (e, t) {
            return e >>>= 0, t || I(e, 4, this.length), (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3];
          }, s.prototype.readUInt32BE = function (e, t) {
            return e >>>= 0, t || I(e, 4, this.length), 16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]);
          }, s.prototype.readIntLE = function (e, t, r) {
            e >>>= 0, t >>>= 0, r || I(e, t, this.length);
            for (var n = this[e], i = 1, o = 0; ++o < t && (i *= 256);) n += this[e + o] * i;
            return n >= (i *= 128) && (n -= Math.pow(2, 8 * t)), n;
          }, s.prototype.readIntBE = function (e, t, r) {
            e >>>= 0, t >>>= 0, r || I(e, t, this.length);
            for (var n = t, i = 1, o = this[e + --n]; n > 0 && (i *= 256);) o += this[e + --n] * i;
            return o >= (i *= 128) && (o -= Math.pow(2, 8 * t)), o;
          }, s.prototype.readInt8 = function (e, t) {
            return e >>>= 0, t || I(e, 1, this.length), 128 & this[e] ? -1 * (255 - this[e] + 1) : this[e];
          }, s.prototype.readInt16LE = function (e, t) {
            e >>>= 0, t || I(e, 2, this.length);
            var r = this[e] | this[e + 1] << 8;
            return 32768 & r ? 4294901760 | r : r;
          }, s.prototype.readInt16BE = function (e, t) {
            e >>>= 0, t || I(e, 2, this.length);
            var r = this[e + 1] | this[e] << 8;
            return 32768 & r ? 4294901760 | r : r;
          }, s.prototype.readInt32LE = function (e, t) {
            return e >>>= 0, t || I(e, 4, this.length), this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24;
          }, s.prototype.readInt32BE = function (e, t) {
            return e >>>= 0, t || I(e, 4, this.length), this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3];
          }, s.prototype.readFloatLE = function (e, t) {
            return e >>>= 0, t || I(e, 4, this.length), n.read(this, e, !0, 23, 4);
          }, s.prototype.readFloatBE = function (e, t) {
            return e >>>= 0, t || I(e, 4, this.length), n.read(this, e, !1, 23, 4);
          }, s.prototype.readDoubleLE = function (e, t) {
            return e >>>= 0, t || I(e, 8, this.length), n.read(this, e, !0, 52, 8);
          }, s.prototype.readDoubleBE = function (e, t) {
            return e >>>= 0, t || I(e, 8, this.length), n.read(this, e, !1, 52, 8);
          }, s.prototype.writeUIntLE = function (e, t, r, n) {
            (e = +e, t >>>= 0, r >>>= 0, n) || P(this, e, t, r, Math.pow(2, 8 * r) - 1, 0);
            var i = 1,
              o = 0;
            for (this[t] = 255 & e; ++o < r && (i *= 256);) this[t + o] = e / i & 255;
            return t + r;
          }, s.prototype.writeUIntBE = function (e, t, r, n) {
            (e = +e, t >>>= 0, r >>>= 0, n) || P(this, e, t, r, Math.pow(2, 8 * r) - 1, 0);
            var i = r - 1,
              o = 1;
            for (this[t + i] = 255 & e; --i >= 0 && (o *= 256);) this[t + i] = e / o & 255;
            return t + r;
          }, s.prototype.writeUInt8 = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 1, 255, 0), this[t] = 255 & e, t + 1;
          }, s.prototype.writeUInt16LE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 2, 65535, 0), this[t] = 255 & e, this[t + 1] = e >>> 8, t + 2;
          }, s.prototype.writeUInt16BE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 2, 65535, 0), this[t] = e >>> 8, this[t + 1] = 255 & e, t + 2;
          }, s.prototype.writeUInt32LE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 4, 4294967295, 0), this[t + 3] = e >>> 24, this[t + 2] = e >>> 16, this[t + 1] = e >>> 8, this[t] = 255 & e, t + 4;
          }, s.prototype.writeUInt32BE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 4, 4294967295, 0), this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = 255 & e, t + 4;
          }, s.prototype.writeIntLE = function (e, t, r, n) {
            if (e = +e, t >>>= 0, !n) {
              var i = Math.pow(2, 8 * r - 1);
              P(this, e, t, r, i - 1, -i);
            }
            var o = 0,
              s = 1,
              a = 0;
            for (this[t] = 255 & e; ++o < r && (s *= 256);) e < 0 && 0 === a && 0 !== this[t + o - 1] && (a = 1), this[t + o] = (e / s >> 0) - a & 255;
            return t + r;
          }, s.prototype.writeIntBE = function (e, t, r, n) {
            if (e = +e, t >>>= 0, !n) {
              var i = Math.pow(2, 8 * r - 1);
              P(this, e, t, r, i - 1, -i);
            }
            var o = r - 1,
              s = 1,
              a = 0;
            for (this[t + o] = 255 & e; --o >= 0 && (s *= 256);) e < 0 && 0 === a && 0 !== this[t + o + 1] && (a = 1), this[t + o] = (e / s >> 0) - a & 255;
            return t + r;
          }, s.prototype.writeInt8 = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 1, 127, -128), e < 0 && (e = 255 + e + 1), this[t] = 255 & e, t + 1;
          }, s.prototype.writeInt16LE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 2, 32767, -32768), this[t] = 255 & e, this[t + 1] = e >>> 8, t + 2;
          }, s.prototype.writeInt16BE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 2, 32767, -32768), this[t] = e >>> 8, this[t + 1] = 255 & e, t + 2;
          }, s.prototype.writeInt32LE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 4, 2147483647, -2147483648), this[t] = 255 & e, this[t + 1] = e >>> 8, this[t + 2] = e >>> 16, this[t + 3] = e >>> 24, t + 4;
          }, s.prototype.writeInt32BE = function (e, t, r) {
            return e = +e, t >>>= 0, r || P(this, e, t, 4, 2147483647, -2147483648), e < 0 && (e = 4294967295 + e + 1), this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = 255 & e, t + 4;
          }, s.prototype.writeFloatLE = function (e, t, r) {
            return B(this, e, t, !0, r);
          }, s.prototype.writeFloatBE = function (e, t, r) {
            return B(this, e, t, !1, r);
          }, s.prototype.writeDoubleLE = function (e, t, r) {
            return R(this, e, t, !0, r);
          }, s.prototype.writeDoubleBE = function (e, t, r) {
            return R(this, e, t, !1, r);
          }, s.prototype.copy = function (e, t, r, n) {
            if (!s.isBuffer(e)) throw new TypeError("argument should be a Buffer");
            if (r || (r = 0), n || 0 === n || (n = this.length), t >= e.length && (t = e.length), t || (t = 0), n > 0 && n < r && (n = r), n === r) return 0;
            if (0 === e.length || 0 === this.length) return 0;
            if (t < 0) throw new RangeError("targetStart out of bounds");
            if (r < 0 || r >= this.length) throw new RangeError("Index out of range");
            if (n < 0) throw new RangeError("sourceEnd out of bounds");
            n > this.length && (n = this.length), e.length - t < n - r && (n = e.length - t + r);
            var i = n - r;
            if (this === e && "function" == typeof Uint8Array.prototype.copyWithin) this.copyWithin(t, r, n);else if (this === e && r < t && t < n) for (var o = i - 1; o >= 0; --o) e[o + t] = this[o + r];else Uint8Array.prototype.set.call(e, this.subarray(r, n), t);
            return i;
          }, s.prototype.fill = function (e, t, r, n) {
            if ("string" == typeof e) {
              if ("string" == typeof t ? (n = t, t = 0, r = this.length) : "string" == typeof r && (n = r, r = this.length), void 0 !== n && "string" != typeof n) throw new TypeError("encoding must be a string");
              if ("string" == typeof n && !s.isEncoding(n)) throw new TypeError("Unknown encoding: " + n);
              if (1 === e.length) {
                var i = e.charCodeAt(0);
                ("utf8" === n && i < 128 || "latin1" === n) && (e = i);
              }
            } else "number" == typeof e && (e &= 255);
            if (t < 0 || this.length < t || this.length < r) throw new RangeError("Out of range index");
            if (r <= t) return this;
            var o;
            if (t >>>= 0, r = void 0 === r ? this.length : r >>> 0, e || (e = 0), "number" == typeof e) for (o = t; o < r; ++o) this[o] = e;else {
              var a = s.isBuffer(e) ? e : s.from(e, n),
                l = a.length;
              if (0 === l) throw new TypeError('The value "' + e + '" is invalid for argument "value"');
              for (o = 0; o < r - t; ++o) this[o + t] = a[o % l];
            }
            return this;
          };
          var M = /[^+/0-9A-Za-z-_]/g;
          function N(e) {
            return e < 16 ? "0" + e.toString(16) : e.toString(16);
          }
          function L(e, t) {
            var r;
            t = t || 1 / 0;
            for (var n = e.length, i = null, o = [], s = 0; s < n; ++s) {
              if ((r = e.charCodeAt(s)) > 55295 && r < 57344) {
                if (!i) {
                  if (r > 56319) {
                    (t -= 3) > -1 && o.push(239, 191, 189);
                    continue;
                  }
                  if (s + 1 === n) {
                    (t -= 3) > -1 && o.push(239, 191, 189);
                    continue;
                  }
                  i = r;
                  continue;
                }
                if (r < 56320) {
                  (t -= 3) > -1 && o.push(239, 191, 189), i = r;
                  continue;
                }
                r = 65536 + (i - 55296 << 10 | r - 56320);
              } else i && (t -= 3) > -1 && o.push(239, 191, 189);
              if (i = null, r < 128) {
                if ((t -= 1) < 0) break;
                o.push(r);
              } else if (r < 2048) {
                if ((t -= 2) < 0) break;
                o.push(r >> 6 | 192, 63 & r | 128);
              } else if (r < 65536) {
                if ((t -= 3) < 0) break;
                o.push(r >> 12 | 224, r >> 6 & 63 | 128, 63 & r | 128);
              } else {
                if (!(r < 1114112)) throw new Error("Invalid code point");
                if ((t -= 4) < 0) break;
                o.push(r >> 18 | 240, r >> 12 & 63 | 128, r >> 6 & 63 | 128, 63 & r | 128);
              }
            }
            return o;
          }
          function j(e) {
            return t.toByteArray(function (e) {
              if ((e = (e = e.split("=")[0]).trim().replace(M, "")).length < 2) return "";
              for (; e.length % 4 != 0;) e += "=";
              return e;
            }(e));
          }
          function U(e, t, r, n) {
            for (var i = 0; i < n && !(i + r >= t.length || i >= e.length); ++i) t[i + r] = e[i];
            return i;
          }
          function q(e, t) {
            return e instanceof t || null != e && null != e.constructor && null != e.constructor.name && e.constructor.name === t.name;
          }
          function D(e) {
            return e != e;
          }
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      "base64-js": 13,
      buffer: 17,
      ieee754: 23
    }],
    18: [function (e, t, r) {
      (function (n) {
        (function () {
          r.formatArgs = function (e) {
            if (e[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + e[0] + (this.useColors ? "%c " : " ") + "+" + t.exports.humanize(this.diff), !this.useColors) return;
            var r = "color: " + this.color;
            e.splice(1, 0, r, "color: inherit");
            var n = 0,
              i = 0;
            e[0].replace(/%[a-zA-Z%]/g, function (e) {
              "%%" !== e && "%c" === e && (i = ++n);
            }), e.splice(i, 0, r);
          }, r.save = function (e) {
            try {
              e ? r.storage.setItem("debug", e) : r.storage.removeItem("debug");
            } catch (e) {}
          }, r.load = function () {
            var e;
            try {
              e = r.storage.getItem("debug");
            } catch (e) {}
            !e && void 0 !== n && "env" in n && (e = n.env.DEBUG);
            return e;
          }, r.useColors = function () {
            if ("undefined" != typeof window && window.process && ("renderer" === window.process.type || window.process.__nwjs)) return !0;
            if ("undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) return !1;
            return "undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
          }, r.storage = function () {
            try {
              return localStorage;
            } catch (e) {}
          }(), r.destroy = function () {
            var e = !1;
            return function () {
              e || (e = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
            };
          }(), r.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"], r.log = console.debug || console.log || function () {}, t.exports = e("./common")(r);
          var i = t.exports.formatters;
          i.j = function (e) {
            try {
              return JSON.stringify(e);
            } catch (e) {
              return "[UnexpectedJSONParseError]: " + e.message;
            }
          };
        }).call(this);
      }).call(this, e("_process"));
    }, {
      "./common": 19,
      _process: 50
    }],
    19: [function (e, t, r) {
      t.exports = function (t) {
        function r(e) {
          var t,
            i,
            o,
            s = null;
          function a() {
            for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {
              e[_key] = arguments[_key];
            }
            if (!a.enabled) return;
            var n = a,
              i = Number(new Date()),
              o = i - (t || i);
            n.diff = o, n.prev = t, n.curr = i, t = i, e[0] = r.coerce(e[0]), "string" != typeof e[0] && e.unshift("%O");
            var s = 0;
            e[0] = e[0].replace(/%([a-zA-Z%])/g, function (t, i) {
              if ("%%" === t) return "%";
              s++;
              var o = r.formatters[i];
              if ("function" == typeof o) {
                var _r12 = e[s];
                t = o.call(n, _r12), e.splice(s, 1), s--;
              }
              return t;
            }), r.formatArgs.call(n, e), (n.log || r.log).apply(n, e);
          }
          return a.namespace = e, a.useColors = r.useColors(), a.color = r.selectColor(e), a.extend = n, a.destroy = r.destroy, Object.defineProperty(a, "enabled", {
            enumerable: !0,
            configurable: !1,
            get: function get() {
              return null !== s ? s : (i !== r.namespaces && (i = r.namespaces, o = r.enabled(e)), o);
            },
            set: function set(e) {
              s = e;
            }
          }), "function" == typeof r.init && r.init(a), a;
        }
        function n(e, t) {
          var n = r(this.namespace + (void 0 === t ? ":" : t) + e);
          return n.log = this.log, n;
        }
        function i(e) {
          return e.toString().substring(2, e.toString().length - 2).replace(/\.\*\?$/, "*");
        }
        return r.debug = r, r.default = r, r.coerce = function (e) {
          return e instanceof Error ? e.stack || e.message : e;
        }, r.disable = function () {
          var e = [].concat(_toConsumableArray(r.names.map(i)), _toConsumableArray(r.skips.map(i).map(function (e) {
            return "-" + e;
          }))).join(",");
          return r.enable(""), e;
        }, r.enable = function (e) {
          var t;
          r.save(e), r.namespaces = e, r.names = [], r.skips = [];
          var n = ("string" == typeof e ? e : "").split(/[\s,]+/),
            i = n.length;
          for (t = 0; t < i; t++) n[t] && ("-" === (e = n[t].replace(/\*/g, ".*?"))[0] ? r.skips.push(new RegExp("^" + e.substr(1) + "$")) : r.names.push(new RegExp("^" + e + "$")));
        }, r.enabled = function (e) {
          if ("*" === e[e.length - 1]) return !0;
          var t, n;
          for (t = 0, n = r.skips.length; t < n; t++) if (r.skips[t].test(e)) return !1;
          for (t = 0, n = r.names.length; t < n; t++) if (r.names[t].test(e)) return !0;
          return !1;
        }, r.humanize = e("ms"), r.destroy = function () {
          console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
        }, Object.keys(t).forEach(function (e) {
          r[e] = t[e];
        }), r.names = [], r.skips = [], r.formatters = {}, r.selectColor = function (e) {
          var t = 0;
          for (var _r13 = 0; _r13 < e.length; _r13++) t = (t << 5) - t + e.charCodeAt(_r13), t |= 0;
          return r.colors[Math.abs(t) % r.colors.length];
        }, r.enable(r.load()), r;
      };
    }, {
      ms: 45
    }],
    20: [function (e, t, r) {
      (function (r, n) {
        (function () {
          var i = e("readable-stream"),
            o = e("end-of-stream"),
            s = e("inherits"),
            a = e("stream-shift"),
            l = n.from && n.from !== Uint8Array.from ? n.from([0]) : new n([0]),
            u = function u(e, t) {
              e._corked ? e.once("uncork", t) : t();
            },
            c = function c(e, t) {
              return function (r) {
                r ? function (e, t) {
                  e._autoDestroy && e.destroy(t);
                }(e, "premature close" === r.message ? null : r) : t && !e._ended && e.end();
              };
            },
            h = function h() {},
            f = function f(e, t, r) {
              if (!(this instanceof f)) return new f(e, t, r);
              i.Duplex.call(this, r), this._writable = null, this._readable = null, this._readable2 = null, this._autoDestroy = !r || !1 !== r.autoDestroy, this._forwardDestroy = !r || !1 !== r.destroy, this._forwardEnd = !r || !1 !== r.end, this._corked = 1, this._ondrain = null, this._drained = !1, this._forwarding = !1, this._unwrite = null, this._unread = null, this._ended = !1, this.destroyed = !1, e && this.setWritable(e), t && this.setReadable(t);
            };
          s(f, i.Duplex), f.obj = function (e, t, r) {
            return r || (r = {}), r.objectMode = !0, r.highWaterMark = 16, new f(e, t, r);
          }, f.prototype.cork = function () {
            1 == ++this._corked && this.emit("cork");
          }, f.prototype.uncork = function () {
            this._corked && 0 == --this._corked && this.emit("uncork");
          }, f.prototype.setWritable = function (e) {
            if (this._unwrite && this._unwrite(), this.destroyed) e && e.destroy && e.destroy();else if (null !== e && !1 !== e) {
              var t = this,
                n = o(e, {
                  writable: !0,
                  readable: !1
                }, c(this, this._forwardEnd)),
                i = function i() {
                  var e = t._ondrain;
                  t._ondrain = null, e && e();
                };
              this._unwrite && r.nextTick(i), this._writable = e, this._writable.on("drain", i), this._unwrite = function () {
                t._writable.removeListener("drain", i), n();
              }, this.uncork();
            } else this.end();
          }, f.prototype.setReadable = function (e) {
            if (this._unread && this._unread(), this.destroyed) e && e.destroy && e.destroy();else {
              if (null === e || !1 === e) return this.push(null), void this.resume();
              var t,
                r = this,
                n = o(e, {
                  writable: !1,
                  readable: !0
                }, c(this)),
                s = function s() {
                  r._forward();
                },
                a = function a() {
                  r.push(null);
                };
              this._drained = !0, this._readable = e, this._readable2 = e._readableState ? e : (t = e, new i.Readable({
                objectMode: !0,
                highWaterMark: 16
              }).wrap(t)), this._readable2.on("readable", s), this._readable2.on("end", a), this._unread = function () {
                r._readable2.removeListener("readable", s), r._readable2.removeListener("end", a), n();
              }, this._forward();
            }
          }, f.prototype._read = function () {
            this._drained = !0, this._forward();
          }, f.prototype._forward = function () {
            if (!this._forwarding && this._readable2 && this._drained) {
              var e;
              for (this._forwarding = !0; this._drained && null !== (e = a(this._readable2));) this.destroyed || (this._drained = this.push(e));
              this._forwarding = !1;
            }
          }, f.prototype.destroy = function (e, t) {
            if (t || (t = h), this.destroyed) return t(null);
            this.destroyed = !0;
            var n = this;
            r.nextTick(function () {
              n._destroy(e), t(null);
            });
          }, f.prototype._destroy = function (e) {
            if (e) {
              var t = this._ondrain;
              this._ondrain = null, t ? t(e) : this.emit("error", e);
            }
            this._forwardDestroy && (this._readable && this._readable.destroy && this._readable.destroy(), this._writable && this._writable.destroy && this._writable.destroy()), this.emit("close");
          }, f.prototype._write = function (e, t, r) {
            if (!this.destroyed) return this._corked ? u(this, this._write.bind(this, e, t, r)) : e === l ? this._finish(r) : this._writable ? void (!1 === this._writable.write(e) ? this._ondrain = r : this.destroyed || r()) : r();
          }, f.prototype._finish = function (e) {
            var t = this;
            this.emit("preend"), u(this, function () {
              var r, n;
              r = t._forwardEnd && t._writable, n = function n() {
                !1 === t._writableState.prefinished && (t._writableState.prefinished = !0), t.emit("prefinish"), u(t, e);
              }, r ? r._writableState && r._writableState.finished ? n() : r._writableState ? r.end(n) : (r.end(), n()) : n();
            });
          }, f.prototype.end = function (e, t, r) {
            return "function" == typeof e ? this.end(null, null, e) : "function" == typeof t ? this.end(e, null, t) : (this._ended = !0, e && this.write(e), this._writableState.ending || this._writableState.destroyed || this.write(l), i.Writable.prototype.end.call(this, r));
          }, t.exports = f;
        }).call(this);
      }).call(this, e("_process"), e("buffer").Buffer);
    }, {
      _process: 50,
      buffer: 17,
      "end-of-stream": 21,
      inherits: 24,
      "readable-stream": 69,
      "stream-shift": 74
    }],
    21: [function (e, t, r) {
      (function (r) {
        (function () {
          var n = e("once"),
            i = function i() {},
            o = function o(e, t, s) {
              if ("function" == typeof t) return o(e, null, t);
              t || (t = {}), s = n(s || i);
              var a = e._writableState,
                l = e._readableState,
                u = t.readable || !1 !== t.readable && e.readable,
                c = t.writable || !1 !== t.writable && e.writable,
                h = !1,
                f = function f() {
                  e.writable || p();
                },
                p = function p() {
                  c = !1, u || s.call(e);
                },
                d = function d() {
                  u = !1, c || s.call(e);
                },
                g = function g(t) {
                  s.call(e, t ? new Error("exited with error code: " + t) : null);
                },
                y = function y(t) {
                  s.call(e, t);
                },
                b = function b() {
                  r.nextTick(m);
                },
                m = function m() {
                  if (!h) return (!u || l && l.ended && !l.destroyed) && (!c || a && a.ended && !a.destroyed) ? void 0 : s.call(e, new Error("premature close"));
                },
                v = function v() {
                  e.req.on("finish", p);
                };
              return !function (e) {
                return e.setHeader && "function" == typeof e.abort;
              }(e) ? c && !a && (e.on("end", f), e.on("close", f)) : (e.on("complete", p), e.on("abort", b), e.req ? v() : e.on("request", v)), function (e) {
                return e.stdio && Array.isArray(e.stdio) && 3 === e.stdio.length;
              }(e) && e.on("exit", g), e.on("end", d), e.on("finish", p), !1 !== t.error && e.on("error", y), e.on("close", b), function () {
                h = !0, e.removeListener("complete", p), e.removeListener("abort", b), e.removeListener("request", v), e.req && e.req.removeListener("finish", p), e.removeListener("end", f), e.removeListener("close", f), e.removeListener("finish", p), e.removeListener("exit", g), e.removeListener("end", d), e.removeListener("error", y), e.removeListener("close", b);
              };
            };
          t.exports = o;
        }).call(this);
      }).call(this, e("_process"));
    }, {
      _process: 50,
      once: 48
    }],
    22: [function (e, t, r) {
      var n = Object.create || function (e) {
          var t = function t() {};
          return t.prototype = e, new t();
        },
        i = Object.keys || function (e) {
          var t = [];
          for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.push(r);
          return r;
        },
        o = Function.prototype.bind || function (e) {
          var t = this;
          return function () {
            return t.apply(e, arguments);
          };
        };
      function s() {
        this._events && Object.prototype.hasOwnProperty.call(this, "_events") || (this._events = n(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
      }
      t.exports = s, s.EventEmitter = s, s.prototype._events = void 0, s.prototype._maxListeners = void 0;
      var a,
        l = 10;
      try {
        var u = {};
        Object.defineProperty && Object.defineProperty(u, "x", {
          value: 0
        }), a = 0 === u.x;
      } catch (e) {
        a = !1;
      }
      function c(e) {
        return void 0 === e._maxListeners ? s.defaultMaxListeners : e._maxListeners;
      }
      function h(e, t, r, i) {
        var o, s, a;
        if ("function" != typeof r) throw new TypeError('"listener" argument must be a function');
        if ((s = e._events) ? (s.newListener && (e.emit("newListener", t, r.listener ? r.listener : r), s = e._events), a = s[t]) : (s = e._events = n(null), e._eventsCount = 0), a) {
          if ("function" == typeof a ? a = s[t] = i ? [r, a] : [a, r] : i ? a.unshift(r) : a.push(r), !a.warned && (o = c(e)) && o > 0 && a.length > o) {
            a.warned = !0;
            var l = new Error("Possible EventEmitter memory leak detected. " + a.length + ' "' + String(t) + '" listeners added. Use emitter.setMaxListeners() to increase limit.');
            l.name = "MaxListenersExceededWarning", l.emitter = e, l.type = t, l.count = a.length, "object" == (typeof console === "undefined" ? "undefined" : _typeof(console)) && console.warn && console.warn("%s: %s", l.name, l.message);
          }
        } else a = s[t] = r, ++e._eventsCount;
        return e;
      }
      function f() {
        if (!this.fired) switch (this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length) {
          case 0:
            return this.listener.call(this.target);
          case 1:
            return this.listener.call(this.target, arguments[0]);
          case 2:
            return this.listener.call(this.target, arguments[0], arguments[1]);
          case 3:
            return this.listener.call(this.target, arguments[0], arguments[1], arguments[2]);
          default:
            for (var e = new Array(arguments.length), t = 0; t < e.length; ++t) e[t] = arguments[t];
            this.listener.apply(this.target, e);
        }
      }
      function p(e, t, r) {
        var n = {
            fired: !1,
            wrapFn: void 0,
            target: e,
            type: t,
            listener: r
          },
          i = o.call(f, n);
        return i.listener = r, n.wrapFn = i, i;
      }
      function d(e, t, r) {
        var n = e._events;
        if (!n) return [];
        var i = n[t];
        return i ? "function" == typeof i ? r ? [i.listener || i] : [i] : r ? function (e) {
          for (var t = new Array(e.length), r = 0; r < t.length; ++r) t[r] = e[r].listener || e[r];
          return t;
        }(i) : y(i, i.length) : [];
      }
      function g(e) {
        var t = this._events;
        if (t) {
          var r = t[e];
          if ("function" == typeof r) return 1;
          if (r) return r.length;
        }
        return 0;
      }
      function y(e, t) {
        for (var r = new Array(t), n = 0; n < t; ++n) r[n] = e[n];
        return r;
      }
      a ? Object.defineProperty(s, "defaultMaxListeners", {
        enumerable: !0,
        get: function get() {
          return l;
        },
        set: function set(e) {
          if ("number" != typeof e || e < 0 || e != e) throw new TypeError('"defaultMaxListeners" must be a positive number');
          l = e;
        }
      }) : s.defaultMaxListeners = l, s.prototype.setMaxListeners = function (e) {
        if ("number" != typeof e || e < 0 || isNaN(e)) throw new TypeError('"n" argument must be a positive number');
        return this._maxListeners = e, this;
      }, s.prototype.getMaxListeners = function () {
        return c(this);
      }, s.prototype.emit = function (e) {
        var t,
          r,
          n,
          i,
          o,
          s,
          a = "error" === e;
        if (s = this._events) a = a && null == s.error;else if (!a) return !1;
        if (a) {
          if (arguments.length > 1 && (t = arguments[1]), t instanceof Error) throw t;
          var l = new Error('Unhandled "error" event. (' + t + ")");
          throw l.context = t, l;
        }
        if (!(r = s[e])) return !1;
        var u = "function" == typeof r;
        switch (n = arguments.length) {
          case 1:
            !function (e, t, r) {
              if (t) e.call(r);else for (var n = e.length, i = y(e, n), o = 0; o < n; ++o) i[o].call(r);
            }(r, u, this);
            break;
          case 2:
            !function (e, t, r, n) {
              if (t) e.call(r, n);else for (var i = e.length, o = y(e, i), s = 0; s < i; ++s) o[s].call(r, n);
            }(r, u, this, arguments[1]);
            break;
          case 3:
            !function (e, t, r, n, i) {
              if (t) e.call(r, n, i);else for (var o = e.length, s = y(e, o), a = 0; a < o; ++a) s[a].call(r, n, i);
            }(r, u, this, arguments[1], arguments[2]);
            break;
          case 4:
            !function (e, t, r, n, i, o) {
              if (t) e.call(r, n, i, o);else for (var s = e.length, a = y(e, s), l = 0; l < s; ++l) a[l].call(r, n, i, o);
            }(r, u, this, arguments[1], arguments[2], arguments[3]);
            break;
          default:
            for (i = new Array(n - 1), o = 1; o < n; o++) i[o - 1] = arguments[o];
            !function (e, t, r, n) {
              if (t) e.apply(r, n);else for (var i = e.length, o = y(e, i), s = 0; s < i; ++s) o[s].apply(r, n);
            }(r, u, this, i);
        }
        return !0;
      }, s.prototype.addListener = function (e, t) {
        return h(this, e, t, !1);
      }, s.prototype.on = s.prototype.addListener, s.prototype.prependListener = function (e, t) {
        return h(this, e, t, !0);
      }, s.prototype.once = function (e, t) {
        if ("function" != typeof t) throw new TypeError('"listener" argument must be a function');
        return this.on(e, p(this, e, t)), this;
      }, s.prototype.prependOnceListener = function (e, t) {
        if ("function" != typeof t) throw new TypeError('"listener" argument must be a function');
        return this.prependListener(e, p(this, e, t)), this;
      }, s.prototype.removeListener = function (e, t) {
        var r, i, o, s, a;
        if ("function" != typeof t) throw new TypeError('"listener" argument must be a function');
        if (!(i = this._events)) return this;
        if (!(r = i[e])) return this;
        if (r === t || r.listener === t) 0 == --this._eventsCount ? this._events = n(null) : (delete i[e], i.removeListener && this.emit("removeListener", e, r.listener || t));else if ("function" != typeof r) {
          for (o = -1, s = r.length - 1; s >= 0; s--) if (r[s] === t || r[s].listener === t) {
            a = r[s].listener, o = s;
            break;
          }
          if (o < 0) return this;
          0 === o ? r.shift() : function (e, t) {
            for (var r = t, n = r + 1, i = e.length; n < i; r += 1, n += 1) e[r] = e[n];
            e.pop();
          }(r, o), 1 === r.length && (i[e] = r[0]), i.removeListener && this.emit("removeListener", e, a || t);
        }
        return this;
      }, s.prototype.removeAllListeners = function (e) {
        var t, r, o;
        if (!(r = this._events)) return this;
        if (!r.removeListener) return 0 === arguments.length ? (this._events = n(null), this._eventsCount = 0) : r[e] && (0 == --this._eventsCount ? this._events = n(null) : delete r[e]), this;
        if (0 === arguments.length) {
          var s,
            a = i(r);
          for (o = 0; o < a.length; ++o) "removeListener" !== (s = a[o]) && this.removeAllListeners(s);
          return this.removeAllListeners("removeListener"), this._events = n(null), this._eventsCount = 0, this;
        }
        if ("function" == typeof (t = r[e])) this.removeListener(e, t);else if (t) for (o = t.length - 1; o >= 0; o--) this.removeListener(e, t[o]);
        return this;
      }, s.prototype.listeners = function (e) {
        return d(this, e, !0);
      }, s.prototype.rawListeners = function (e) {
        return d(this, e, !1);
      }, s.listenerCount = function (e, t) {
        return "function" == typeof e.listenerCount ? e.listenerCount(t) : g.call(e, t);
      }, s.prototype.listenerCount = g, s.prototype.eventNames = function () {
        return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];
      };
    }, {}],
    23: [function (e, t, r) {
      r.read = function (e, t, r, n, i) {
        var o,
          s,
          a = 8 * i - n - 1,
          l = (1 << a) - 1,
          u = l >> 1,
          c = -7,
          h = r ? i - 1 : 0,
          f = r ? -1 : 1,
          p = e[t + h];
        for (h += f, o = p & (1 << -c) - 1, p >>= -c, c += a; c > 0; o = 256 * o + e[t + h], h += f, c -= 8);
        for (s = o & (1 << -c) - 1, o >>= -c, c += n; c > 0; s = 256 * s + e[t + h], h += f, c -= 8);
        if (0 === o) o = 1 - u;else {
          if (o === l) return s ? NaN : 1 / 0 * (p ? -1 : 1);
          s += Math.pow(2, n), o -= u;
        }
        return (p ? -1 : 1) * s * Math.pow(2, o - n);
      }, r.write = function (e, t, r, n, i, o) {
        var s,
          a,
          l,
          u = 8 * o - i - 1,
          c = (1 << u) - 1,
          h = c >> 1,
          f = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
          p = n ? 0 : o - 1,
          d = n ? 1 : -1,
          g = t < 0 || 0 === t && 1 / t < 0 ? 1 : 0;
        for (t = Math.abs(t), isNaN(t) || t === 1 / 0 ? (a = isNaN(t) ? 1 : 0, s = c) : (s = Math.floor(Math.log(t) / Math.LN2), t * (l = Math.pow(2, -s)) < 1 && (s--, l *= 2), (t += s + h >= 1 ? f / l : f * Math.pow(2, 1 - h)) * l >= 2 && (s++, l /= 2), s + h >= c ? (a = 0, s = c) : s + h >= 1 ? (a = (t * l - 1) * Math.pow(2, i), s += h) : (a = t * Math.pow(2, h - 1) * Math.pow(2, i), s = 0)); i >= 8; e[r + p] = 255 & a, p += d, a /= 256, i -= 8);
        for (s = s << i | a, u += i; u > 0; e[r + p] = 255 & s, p += d, s /= 256, u -= 8);
        e[r + p - d] |= 128 * g;
      };
    }, {}],
    24: [function (e, t, r) {
      "function" == typeof Object.create ? t.exports = function (e, t) {
        t && (e.super_ = t, e.prototype = Object.create(t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }));
      } : t.exports = function (e, t) {
        if (t) {
          e.super_ = t;
          var r = function r() {};
          r.prototype = t.prototype, e.prototype = new r(), e.prototype.constructor = e;
        }
      };
    }, {}],
    25: [function (e, t, r) {
      "use strict";

      Object.defineProperty(r, "__esModule", {
        value: !0
      });
      var n = function () {
        function e(e, t) {
          this.color = !0, this.key = void 0, this.value = void 0, this.parent = void 0, this.brother = void 0, this.leftChild = void 0, this.rightChild = void 0, this.key = e, this.value = t;
        }
        return e.prototype.rotateLeft = function () {
          var e = this.parent,
            t = this.brother,
            r = this.leftChild,
            n = this.rightChild;
          if (!n) throw new Error("unknown error");
          var i = n.leftChild,
            o = n.rightChild;
          return e && (e.leftChild === this ? e.leftChild = n : e.rightChild === this && (e.rightChild = n)), n.parent = e, n.brother = t, n.leftChild = this, n.rightChild = o, t && (t.brother = n), this.parent = n, this.brother = o, this.leftChild = r, this.rightChild = i, o && (o.parent = n, o.brother = this), r && (r.parent = this, r.brother = i), i && (i.parent = this, i.brother = r), n;
        }, e.prototype.rotateRight = function () {
          var e = this.parent,
            t = this.brother,
            r = this.leftChild;
          if (!r) throw new Error("unknown error");
          var n = this.rightChild,
            i = r.leftChild,
            o = r.rightChild;
          return e && (e.leftChild === this ? e.leftChild = r : e.rightChild === this && (e.rightChild = r)), r.parent = e, r.brother = t, r.leftChild = i, r.rightChild = this, t && (t.brother = r), i && (i.parent = r, i.brother = this), this.parent = r, this.brother = i, this.leftChild = o, this.rightChild = n, o && (o.parent = this, o.brother = n), n && (n.parent = this, n.brother = o), r;
        }, e.prototype.remove = function () {
          if (this.leftChild || this.rightChild) throw new Error("can only remove leaf node");
          this.parent && (this === this.parent.leftChild ? this.parent.leftChild = void 0 : this === this.parent.rightChild && (this.parent.rightChild = void 0)), this.brother && (this.brother.brother = void 0), this.key = void 0, this.value = void 0, this.parent = void 0, this.brother = void 0;
        }, e.TreeNodeColorType = {
          red: !0,
          black: !1
        }, e;
      }();
      Object.freeze(n), r.default = n;
    }, {}],
    26: [function (e, t, r) {
      "use strict";

      var n = this && this.__generator || function (e, t) {
        var r,
          n,
          i,
          o,
          s = {
            label: 0,
            sent: function sent() {
              if (1 & i[0]) throw i[1];
              return i[1];
            },
            trys: [],
            ops: []
          };
        return o = {
          next: a(0),
          throw: a(1),
          return: a(2)
        }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
          return this;
        }), o;
        function a(o) {
          return function (a) {
            return function (o) {
              if (r) throw new TypeError("Generator is already executing.");
              for (; s;) try {
                if (r = 1, n && (i = 2 & o[0] ? n.return : o[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;
                switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                  case 0:
                  case 1:
                    i = o;
                    break;
                  case 4:
                    return s.label++, {
                      value: o[1],
                      done: !1
                    };
                  case 5:
                    s.label++, n = o[1], o = [0];
                    continue;
                  case 7:
                    o = s.ops.pop(), s.trys.pop();
                    continue;
                  default:
                    if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                      s = 0;
                      continue;
                    }
                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                      s.label = o[1];
                      break;
                    }
                    if (6 === o[0] && s.label < i[1]) {
                      s.label = i[1], i = o;
                      break;
                    }
                    if (i && s.label < i[2]) {
                      s.label = i[2], s.ops.push(o);
                      break;
                    }
                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }
                o = t.call(e, s);
              } catch (e) {
                o = [6, e], n = 0;
              } finally {
                r = i = 0;
              }
              if (5 & o[0]) throw o[1];
              return {
                value: o[0] ? o[1] : void 0,
                done: !0
              };
            }([o, a]);
          };
        }
      };
      function i(e) {
        var t = this;
        void 0 === e && (e = []);
        var r = [],
          o = 0,
          s = 0,
          a = 0,
          l = 0,
          u = 0,
          c = 0;
        this.size = function () {
          return c;
        }, this.empty = function () {
          return 0 === c;
        }, this.clear = function () {
          o = a = s = l = u = c = 0, f.call(this, i.bucketSize), c = 0;
        }, this.front = function () {
          return r[o][s];
        }, this.back = function () {
          return r[a][l];
        }, this.forEach = function (e) {
          if (!this.empty()) {
            var t = 0;
            if (o !== a) {
              for (u = s; u < i.bucketSize; ++u) e(r[o][u], t++);
              for (u = o + 1; u < a; ++u) for (var n = 0; n < i.bucketSize; ++n) e(r[u][n], t++);
              for (u = 0; u <= l; ++u) e(r[a][u], t++);
            } else for (var u = s; u <= l; ++u) e(r[o][u], t++);
          }
        };
        var h = function h(e) {
          var t = o * i.bucketSize + s,
            r = t + e,
            n = a * i.bucketSize + l;
          if (r < t || r > n) throw new Error("pos should more than 0 and less than queue's size");
          return {
            curNodeBucketIndex: Math.floor(r / i.bucketSize),
            curNodePointerIndex: r % i.bucketSize
          };
        };
        this.getElementByPos = function (e) {
          var t = h(e),
            n = t.curNodeBucketIndex,
            i = t.curNodePointerIndex;
          return r[n][i];
        }, this.eraseElementByPos = function (e) {
          var t = this;
          if (e < 0 || e > c) throw new Error("pos should more than 0 and less than queue's size");
          if (0 === e) this.popFront();else if (e === this.size()) this.popBack();else {
            for (var r = [], n = e + 1; n < c; ++n) r.push(this.getElementByPos(n));
            this.cut(e), this.popBack(), r.forEach(function (e) {
              return t.pushBack(e);
            });
          }
        }, this.eraseElementByValue = function (e) {
          if (!this.empty()) {
            var t = [];
            this.forEach(function (r) {
              r !== e && t.push(r);
            });
            for (var r = t.length, n = 0; n < r; ++n) this.setElementByPos(n, t[n]);
            this.cut(r - 1);
          }
        };
        var f = function f(e) {
          for (var t = [], n = e * i.sigma, h = Math.max(Math.ceil(n / i.bucketSize), 2), f = 0; f < h; ++f) t.push(new Array(i.bucketSize));
          var p = Math.ceil(e / i.bucketSize),
            d = Math.floor(h / 2) - Math.floor(p / 2),
            g = d,
            y = 0;
          if (this.size()) for (f = 0; f < p; ++f) {
            for (var b = 0; b < i.bucketSize; ++b) if (t[d + f][b] = this.front(), this.popFront(), this.empty()) {
              g = d + f, y = b;
              break;
            }
            if (this.empty()) break;
          }
          r = t, o = d, s = 0, a = g, l = y, u = h, c = e;
        };
        this.pushBack = function (e) {
          this.empty() || (a === u - 1 && l === i.bucketSize - 1 && f.call(this, this.size()), l < i.bucketSize - 1 ? ++l : a < u - 1 && (++a, l = 0)), ++c, r[a][l] = e;
        }, this.popBack = function () {
          this.empty() || (1 !== this.size() && (l > 0 ? --l : o < a && (--a, l = i.bucketSize - 1)), c > 0 && --c);
        }, this.setElementByPos = function (e, t) {
          var n = h(e),
            i = n.curNodeBucketIndex,
            o = n.curNodePointerIndex;
          r[i][o] = t;
        }, this.insert = function (e, t, r) {
          var n = this;
          if (void 0 === r && (r = 1), 0 === e) for (; r--;) this.pushFront(t);else if (e === this.size()) for (; r--;) this.pushBack(t);else {
            for (var i = [], o = e; o < c; ++o) i.push(this.getElementByPos(o));
            this.cut(e - 1);
            for (o = 0; o < r; ++o) this.pushBack(t);
            i.forEach(function (e) {
              return n.pushBack(e);
            });
          }
        }, this.find = function (e) {
          if (o === a) {
            for (var t = s; t <= l; ++t) if (r[o][t] === e) return !0;
            return !1;
          }
          for (t = s; t < i.bucketSize; ++t) if (r[o][t] === e) return !0;
          for (t = o + 1; t < a; ++t) for (var n = 0; n < i.bucketSize; ++n) if (r[t][n] === e) return !0;
          for (t = 0; t <= l; ++t) if (r[a][t] === e) return !0;
          return !1;
        }, this.reverse = function () {
          for (var e = 0, t = c - 1; e < t;) {
            var r = this.getElementByPos(e);
            this.setElementByPos(e, this.getElementByPos(t)), this.setElementByPos(t, r), ++e, --t;
          }
        }, this.unique = function () {
          if (!this.empty()) {
            var e = [],
              t = this.front();
            this.forEach(function (r, n) {
              0 !== n && r === t || (e.push(r), t = r);
            });
            for (var r = 0; r < c; ++r) this.setElementByPos(r, e[r]);
            this.cut(e.length - 1);
          }
        }, this.sort = function (e) {
          var t = [];
          this.forEach(function (e) {
            t.push(e);
          }), t.sort(e);
          for (var r = 0; r < c; ++r) this.setElementByPos(r, t[r]);
        }, this.pushFront = function (e) {
          this.empty() || (0 === o && 0 === s && f.call(this, this.size()), s > 0 ? --s : o > 0 && (--o, s = i.bucketSize - 1)), ++c, r[o][s] = e;
        }, this.popFront = function () {
          this.empty() || (1 !== this.size() && (s < i.bucketSize - 1 ? ++s : o < a && (++o, s = 0)), c > 0 && --c);
        }, this.shrinkToFit = function () {
          var e = this,
            t = [];
          this.forEach(function (e) {
            t.push(e);
          });
          var n = t.length;
          r = [];
          for (var o = Math.ceil(n / i.bucketSize), s = 0; s < o; ++s) r.push(new Array(i.bucketSize));
          this.clear(), t.forEach(function (t) {
            return e.pushBack(t);
          });
        }, this.cut = function (e) {
          if (e < 0) this.clear();else {
            var t = h(e),
              r = t.curNodeBucketIndex,
              n = t.curNodePointerIndex;
            a = r, l = n, c = e + 1;
          }
        }, this[Symbol.iterator] = function () {
          return function () {
            var e, t;
            return n(this, function (n) {
              switch (n.label) {
                case 0:
                  if (0 === c) return [2];
                  if (o !== a) return [3, 5];
                  t = s, n.label = 1;
                case 1:
                  return t <= l ? [4, r[o][t]] : [3, 4];
                case 2:
                  n.sent(), n.label = 3;
                case 3:
                  return ++t, [3, 1];
                case 4:
                  return [2];
                case 5:
                  t = s, n.label = 6;
                case 6:
                  return t < i.bucketSize ? [4, r[o][t]] : [3, 9];
                case 7:
                  n.sent(), n.label = 8;
                case 8:
                  return ++t, [3, 6];
                case 9:
                  t = o + 1, n.label = 10;
                case 10:
                  if (!(t < a)) return [3, 15];
                  e = 0, n.label = 11;
                case 11:
                  return e < i.bucketSize ? [4, r[t][e]] : [3, 14];
                case 12:
                  n.sent(), n.label = 13;
                case 13:
                  return ++e, [3, 11];
                case 14:
                  return ++t, [3, 10];
                case 15:
                  t = 0, n.label = 16;
                case 16:
                  return t <= l ? [4, r[a][t]] : [3, 19];
                case 17:
                  n.sent(), n.label = 18;
                case 18:
                  return ++t, [3, 16];
                case 19:
                  return [2];
              }
            });
          }();
        }, function () {
          var n = i.bucketSize;
          e.size ? n = e.size() : e.length && (n = e.length);
          var s = n * i.sigma;
          u = Math.ceil(s / i.bucketSize), u = Math.max(u, 3);
          for (var l = 0; l < u; ++l) r.push(new Array(i.bucketSize));
          var c = Math.ceil(n / i.bucketSize);
          o = Math.floor(u / 2) - Math.floor(c / 2), a = o, e.forEach(function (e) {
            return t.pushBack(e);
          });
        }(), Object.freeze(this);
      }
      Object.defineProperty(r, "__esModule", {
        value: !0
      }), i.sigma = 3, i.bucketSize = 5e3, Object.freeze(i), r.default = i;
    }, {}],
    27: [function (e, t, r) {
      "use strict";

      var n = this && this.__generator || function (e, t) {
          var r,
            n,
            i,
            o,
            s = {
              label: 0,
              sent: function sent() {
                if (1 & i[0]) throw i[1];
                return i[1];
              },
              trys: [],
              ops: []
            };
          return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
          }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
            return this;
          }), o;
          function a(o) {
            return function (a) {
              return function (o) {
                if (r) throw new TypeError("Generator is already executing.");
                for (; s;) try {
                  if (r = 1, n && (i = 2 & o[0] ? n.return : o[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;
                  switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                    case 0:
                    case 1:
                      i = o;
                      break;
                    case 4:
                      return s.label++, {
                        value: o[1],
                        done: !1
                      };
                    case 5:
                      s.label++, n = o[1], o = [0];
                      continue;
                    case 7:
                      o = s.ops.pop(), s.trys.pop();
                      continue;
                    default:
                      if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                        s = 0;
                        continue;
                      }
                      if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                        s.label = o[1];
                        break;
                      }
                      if (6 === o[0] && s.label < i[1]) {
                        s.label = i[1], i = o;
                        break;
                      }
                      if (i && s.label < i[2]) {
                        s.label = i[2], s.ops.push(o);
                        break;
                      }
                      i[2] && s.ops.pop(), s.trys.pop();
                      continue;
                  }
                  o = t.call(e, s);
                } catch (e) {
                  o = [6, e], n = 0;
                } finally {
                  r = i = 0;
                }
                if (5 & o[0]) throw o[1];
                return {
                  value: o[0] ? o[1] : void 0,
                  done: !0
                };
              }([o, a]);
            };
          }
        },
        i = this && this.__values || function (e) {
          var t = "function" == typeof Symbol && Symbol.iterator,
            r = t && e[t],
            n = 0;
          if (r) return r.call(e);
          if (e && "number" == typeof e.length) return {
            next: function next() {
              return e && n >= e.length && (e = void 0), {
                value: e && e[n++],
                done: !e
              };
            }
          };
          throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
        };
      Object.defineProperty(r, "__esModule", {
        value: !0
      });
      var o = e("../LinkList/LinkList"),
        s = e("../Map/Map");
      function a(e, t, r) {
        var l = this;
        if (void 0 === e && (e = []), void 0 === t && (t = a.initSize), r = r || function (e) {
          var t,
            r,
            n = 0,
            o = "";
          if ("number" == typeof e) n = ((n = Math.floor(e)) << 5) - n, n &= n;else {
            o = "string" != typeof e ? JSON.stringify(e) : e;
            try {
              for (var s = i(o), a = s.next(); !a.done; a = s.next()) {
                n = (n << 5) - n + a.value.charCodeAt(0), n &= n;
              }
            } catch (e) {
              t = {
                error: e
              };
            } finally {
              try {
                a && !a.done && (r = s.return) && r.call(s);
              } finally {
                if (t) throw t.error;
              }
            }
          }
          return n ^= n >>> 16;
        }, 0 != (t & t - 1)) throw new Error("initBucketNum must be 2 to the power of n");
        var u = 0,
          c = [],
          h = Math.max(a.initSize, Math.min(a.maxSize, t));
        this.size = function () {
          return u;
        }, this.empty = function () {
          return 0 === u;
        }, this.clear = function () {
          u = 0, h = t, c = [];
        }, this.forEach = function (e) {
          var t = 0;
          c.forEach(function (r) {
            r.forEach(function (r) {
              e(r, t++);
            });
          });
        };
        this.setElement = function (e, t) {
          var n, l;
          if (null === e || void 0 === e) throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");
          if (null !== t && void 0 !== t) {
            var f = r(e) & h - 1;
            if (c[f]) {
              var p = c[f].size();
              if (c[f] instanceof o.default) {
                try {
                  for (var d = i(c[f]), g = d.next(); !g.done; g = d.next()) {
                    var y = g.value;
                    if (y.key === e) return void (y.value = t);
                  }
                } catch (e) {
                  n = {
                    error: e
                  };
                } finally {
                  try {
                    g && !g.done && (l = d.return) && l.call(d);
                  } finally {
                    if (n) throw n.error;
                  }
                }
                c[f].pushBack({
                  key: e,
                  value: t
                }), c[f].size() >= a.treeifyThreshold && (c[f] = new s.default(c[f]));
              } else c[f].setElement(e, t);
              var b = c[f].size();
              u += b - p;
            } else ++u, c[f] = new o.default([{
              key: e,
              value: t
            }]);
            u > h * a.sigma && function (e) {
              if (!(e >= a.maxSize)) {
                h = 2 * e;
                var t = [];
                c.forEach(function (n, i) {
                  if (!n.empty()) {
                    if (n instanceof o.default && 1 === n.size()) {
                      var l = n.front(),
                        u = l.key,
                        f = l.value;
                      t[r(u) & h - 1] = new o.default([{
                        key: u,
                        value: f
                      }]);
                    } else if (n instanceof s.default) {
                      var p = new o.default(),
                        d = new o.default();
                      n.forEach(function (t) {
                        0 == (r(t.key) & e) ? p.pushBack(t) : d.pushBack(t);
                      }), p.size() > a.untreeifyThreshold ? t[i] = new s.default(p) : p.size() && (t[i] = p), d.size() > a.untreeifyThreshold ? t[i + e] = new s.default(d) : d.size() && (t[i + e] = d);
                    } else {
                      var g = new o.default(),
                        y = new o.default();
                      n.forEach(function (t) {
                        0 == (r(t.key) & e) ? g.pushBack(t) : y.pushBack(t);
                      }), g.size() && (t[i] = g), y.size() && (t[i + e] = y);
                    }
                    c[i].clear();
                  }
                }), c = t;
              }
            }.call(this, h);
          } else this.eraseElementByKey(e);
        }, this.getElementByKey = function (e) {
          var t,
            n,
            o = r(e) & h - 1;
          if (c[o]) {
            if (c[o] instanceof s.default) return c[o].getElementByKey(e);
            try {
              for (var a = i(c[o]), l = a.next(); !l.done; l = a.next()) {
                var u = l.value;
                if (u.key === e) return u.value;
              }
            } catch (e) {
              t = {
                error: e
              };
            } finally {
              try {
                l && !l.done && (n = a.return) && n.call(a);
              } finally {
                if (t) throw t.error;
              }
            }
          }
        }, this.eraseElementByKey = function (e) {
          var t,
            n,
            l = r(e) & h - 1;
          if (c[l]) {
            var f = c[l].size();
            if (c[l] instanceof s.default) c[l].eraseElementByKey(e), c[l].size() <= a.untreeifyThreshold && (c[l] = new o.default(c[l]));else {
              var p = -1;
              try {
                for (var d = i(c[l]), g = d.next(); !g.done; g = d.next()) {
                  if (++p, g.value.key === e) {
                    c[l].eraseElementByPos(p);
                    break;
                  }
                }
              } catch (e) {
                t = {
                  error: e
                };
              } finally {
                try {
                  g && !g.done && (n = d.return) && n.call(d);
                } finally {
                  if (t) throw t.error;
                }
              }
            }
            var y = c[l].size();
            u += y - f;
          }
        }, this.find = function (e) {
          var t,
            n,
            o = r(e) & h - 1;
          if (!c[o]) return !1;
          if (c[o] instanceof s.default) return c[o].find(e);
          try {
            for (var a = i(c[o]), l = a.next(); !l.done; l = a.next()) {
              if (l.value.key === e) return !0;
            }
          } catch (e) {
            t = {
              error: e
            };
          } finally {
            try {
              l && !l.done && (n = a.return) && n.call(a);
            } finally {
              if (t) throw t.error;
            }
          }
          return !1;
        }, this[Symbol.iterator] = function () {
          return function () {
            var e, t, r, o, s, a;
            return n(this, function (n) {
              switch (n.label) {
                case 0:
                  e = 0, n.label = 1;
                case 1:
                  if (!(e < h)) return [3, 10];
                  for (; e < h && !c[e];) ++e;
                  if (e >= h) return [3, 10];
                  n.label = 2;
                case 2:
                  n.trys.push([2, 7, 8, 9]), s = void 0, t = i(c[e]), r = t.next(), n.label = 3;
                case 3:
                  return r.done ? [3, 6] : [4, r.value];
                case 4:
                  n.sent(), n.label = 5;
                case 5:
                  return r = t.next(), [3, 3];
                case 6:
                  return [3, 9];
                case 7:
                  return o = n.sent(), s = {
                    error: o
                  }, [3, 9];
                case 8:
                  try {
                    r && !r.done && (a = t.return) && a.call(t);
                  } finally {
                    if (s) throw s.error;
                  }
                  return [7];
                case 9:
                  return ++e, [3, 1];
                case 10:
                  return [2];
              }
            });
          }();
        }, e.forEach(function (e) {
          var t = e.key,
            r = e.value;
          return l.setElement(t, r);
        }), Object.freeze(this);
      }
      a.initSize = 16, a.maxSize = 1 << 30, a.sigma = .75, a.treeifyThreshold = 8, a.untreeifyThreshold = 6, a.minTreeifySize = 64, Object.freeze(a), r.default = a;
    }, {
      "../LinkList/LinkList": 29,
      "../Map/Map": 30
    }],
    28: [function (e, t, r) {
      "use strict";

      var n = this && this.__generator || function (e, t) {
          var r,
            n,
            i,
            o,
            s = {
              label: 0,
              sent: function sent() {
                if (1 & i[0]) throw i[1];
                return i[1];
              },
              trys: [],
              ops: []
            };
          return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
          }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
            return this;
          }), o;
          function a(o) {
            return function (a) {
              return function (o) {
                if (r) throw new TypeError("Generator is already executing.");
                for (; s;) try {
                  if (r = 1, n && (i = 2 & o[0] ? n.return : o[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;
                  switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                    case 0:
                    case 1:
                      i = o;
                      break;
                    case 4:
                      return s.label++, {
                        value: o[1],
                        done: !1
                      };
                    case 5:
                      s.label++, n = o[1], o = [0];
                      continue;
                    case 7:
                      o = s.ops.pop(), s.trys.pop();
                      continue;
                    default:
                      if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                        s = 0;
                        continue;
                      }
                      if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                        s.label = o[1];
                        break;
                      }
                      if (6 === o[0] && s.label < i[1]) {
                        s.label = i[1], i = o;
                        break;
                      }
                      if (i && s.label < i[2]) {
                        s.label = i[2], s.ops.push(o);
                        break;
                      }
                      i[2] && s.ops.pop(), s.trys.pop();
                      continue;
                  }
                  o = t.call(e, s);
                } catch (e) {
                  o = [6, e], n = 0;
                } finally {
                  r = i = 0;
                }
                if (5 & o[0]) throw o[1];
                return {
                  value: o[0] ? o[1] : void 0,
                  done: !0
                };
              }([o, a]);
            };
          }
        },
        i = this && this.__values || function (e) {
          var t = "function" == typeof Symbol && Symbol.iterator,
            r = t && e[t],
            n = 0;
          if (r) return r.call(e);
          if (e && "number" == typeof e.length) return {
            next: function next() {
              return e && n >= e.length && (e = void 0), {
                value: e && e[n++],
                done: !e
              };
            }
          };
          throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
        };
      Object.defineProperty(r, "__esModule", {
        value: !0
      });
      var o = e("../Set/Set"),
        s = e("../LinkList/LinkList");
      function a(e, t, r) {
        var l = this;
        if (void 0 === e && (e = []), void 0 === t && (t = a.initSize), r = r || function (e) {
          var t = 0,
            r = "";
          if ("number" == typeof e) t = ((t = Math.floor(e)) << 5) - t, t &= t;else {
            r = "string" != typeof e ? JSON.stringify(e) : e;
            for (var n = 0; n < r.length; n++) {
              t = (t << 5) - t + r.charCodeAt(n), t &= t;
            }
          }
          return t ^= t >>> 16;
        }, 0 != (t & t - 1)) throw new Error("initBucketNum must be 2 to the power of n");
        var u = 0,
          c = [],
          h = Math.max(a.initSize, Math.min(a.maxSize, t));
        this.size = function () {
          return u;
        }, this.empty = function () {
          return 0 === u;
        }, this.clear = function () {
          u = 0, h = t, c = [];
        }, this.forEach = function (e) {
          var t = 0;
          c.forEach(function (r) {
            r.forEach(function (r) {
              e(r, t++);
            });
          });
        };
        this.insert = function (e) {
          if (null === e || void 0 === e) throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");
          var t = r(e) & h - 1;
          if (c[t]) {
            var n = c[t].size();
            if (c[t] instanceof s.default) {
              if (c[t].find(e)) return;
              c[t].pushBack(e), c[t].size() >= a.treeifyThreshold && (c[t] = new o.default(c[t]));
            } else c[t].insert(e);
            var i = c[t].size();
            u += i - n;
          } else c[t] = new s.default([e]), ++u;
          u > h * a.sigma && function (e) {
            if (!(e >= a.maxSize)) {
              h = 2 * e;
              var t = [];
              c.forEach(function (n, i) {
                if (!n.empty()) {
                  if (n instanceof s.default && 1 === n.size()) {
                    var l = n.front();
                    if (void 0 === l) throw new Error("unknown error");
                    t[r(l) & h - 1] = new s.default([l]);
                  } else if (n instanceof o.default) {
                    var u = new s.default(),
                      f = new s.default();
                    n.forEach(function (t) {
                      0 == (r(t) & e) ? u.pushBack(t) : f.pushBack(t);
                    }), u.size() > a.untreeifyThreshold ? t[i] = new o.default(u) : u.size() && (t[i] = u), f.size() > a.untreeifyThreshold ? t[i + e] = new o.default(f) : f.size() && (t[i + e] = f);
                  } else {
                    var p = new s.default(),
                      d = new s.default();
                    n.forEach(function (t) {
                      0 == (r(t) & e) ? p.pushBack(t) : d.pushBack(t);
                    }), p.size() && (t[i] = p), d.size() && (t[i + e] = d);
                  }
                  c[i].clear();
                }
              }), c = t;
            }
          }.call(this, h);
        }, this.eraseElementByValue = function (e) {
          var t = r(e) & h - 1;
          if (c[t]) {
            var n = c[t].size();
            c[t].eraseElementByValue(e), c[t] instanceof o.default && c[t].size() <= a.untreeifyThreshold && (c[t] = new s.default(c[t]));
            var i = c[t].size();
            u += i - n;
          }
        }, this.find = function (e) {
          var t = r(e) & h - 1;
          return !!c[t] && c[t].find(e);
        }, this[Symbol.iterator] = function () {
          return function () {
            var e, t, r, o, s, a;
            return n(this, function (n) {
              switch (n.label) {
                case 0:
                  e = 0, n.label = 1;
                case 1:
                  if (!(e < h)) return [3, 10];
                  for (; e < h && !c[e];) ++e;
                  if (e >= h) return [3, 10];
                  n.label = 2;
                case 2:
                  n.trys.push([2, 7, 8, 9]), s = void 0, t = i(c[e]), r = t.next(), n.label = 3;
                case 3:
                  return r.done ? [3, 6] : [4, r.value];
                case 4:
                  n.sent(), n.label = 5;
                case 5:
                  return r = t.next(), [3, 3];
                case 6:
                  return [3, 9];
                case 7:
                  return o = n.sent(), s = {
                    error: o
                  }, [3, 9];
                case 8:
                  try {
                    r && !r.done && (a = t.return) && a.call(t);
                  } finally {
                    if (s) throw s.error;
                  }
                  return [7];
                case 9:
                  return ++e, [3, 1];
                case 10:
                  return [2];
              }
            });
          }();
        }, e.forEach(function (e) {
          return l.insert(e);
        }), Object.freeze(this);
      }
      a.initSize = 16, a.maxSize = 1 << 30, a.sigma = .75, a.treeifyThreshold = 8, a.untreeifyThreshold = 6, a.minTreeifySize = 64, Object.freeze(a), r.default = a;
    }, {
      "../LinkList/LinkList": 29,
      "../Set/Set": 33
    }],
    29: [function (e, t, r) {
      "use strict";

      var n = this && this.__generator || function (e, t) {
        var r,
          n,
          i,
          o,
          s = {
            label: 0,
            sent: function sent() {
              if (1 & i[0]) throw i[1];
              return i[1];
            },
            trys: [],
            ops: []
          };
        return o = {
          next: a(0),
          throw: a(1),
          return: a(2)
        }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
          return this;
        }), o;
        function a(o) {
          return function (a) {
            return function (o) {
              if (r) throw new TypeError("Generator is already executing.");
              for (; s;) try {
                if (r = 1, n && (i = 2 & o[0] ? n.return : o[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;
                switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                  case 0:
                  case 1:
                    i = o;
                    break;
                  case 4:
                    return s.label++, {
                      value: o[1],
                      done: !1
                    };
                  case 5:
                    s.label++, n = o[1], o = [0];
                    continue;
                  case 7:
                    o = s.ops.pop(), s.trys.pop();
                    continue;
                  default:
                    if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                      s = 0;
                      continue;
                    }
                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                      s.label = o[1];
                      break;
                    }
                    if (6 === o[0] && s.label < i[1]) {
                      s.label = i[1], i = o;
                      break;
                    }
                    if (i && s.label < i[2]) {
                      s.label = i[2], s.ops.push(o);
                      break;
                    }
                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }
                o = t.call(e, s);
              } catch (e) {
                o = [6, e], n = 0;
              } finally {
                r = i = 0;
              }
              if (5 & o[0]) throw o[1];
              return {
                value: o[0] ? o[1] : void 0,
                done: !0
              };
            }([o, a]);
          };
        }
      };
      Object.defineProperty(r, "__esModule", {
        value: !0
      });
      var i = function () {
        return function (e) {
          this.value = void 0, this.pre = void 0, this.next = void 0, this.value = e;
        };
      }();
      function o(e) {
        var t = this;
        void 0 === e && (e = []);
        var r = 0,
          o = void 0,
          s = void 0;
        this.size = function () {
          return r;
        }, this.empty = function () {
          return 0 === r;
        }, this.clear = function () {
          o = s = void 0, r = 0;
        }, this.front = function () {
          return null === o || void 0 === o ? void 0 : o.value;
        }, this.back = function () {
          return null === s || void 0 === s ? void 0 : s.value;
        }, this.forEach = function (e) {
          for (var t = o, r = 0; t;) {
            if (void 0 === t.value) throw new Error("unknown error");
            e(t.value, r++), t = t.next;
          }
        }, this.getElementByPos = function (e) {
          if (e < 0 || e >= r) throw new Error("pos must more then 0 and less then the list length");
          for (var t = o; e-- && t;) t = t.next;
          if (!t || void 0 === t.value) throw new Error("unknown error");
          return t.value;
        }, this.eraseElementByPos = function (e) {
          if (e < 0 || e >= r) throw new Error("erase pos must more then 0 and less then the list length");
          if (0 === e) this.popFront();else if (e === r - 1) this.popBack();else {
            for (var t = o; e--;) {
              if (!(null === t || void 0 === t ? void 0 : t.next)) throw new Error("unknown error");
              t = t.next;
            }
            if (!t || !t.pre || !t.next) throw new Error("unknown error");
            var n = t.pre,
              i = t.next;
            i.pre = n, n.next = i, r > 0 && --r;
          }
        }, this.eraseElementByValue = function (e) {
          for (; o && o.value === e;) this.popFront();
          for (; s && s.value === e;) this.popBack();
          if (o) for (var t = o; t;) {
            if (t.value === e) {
              var n = t.pre,
                i = t.next;
              i && (i.pre = n), n && (n.next = i), r > 0 && --r;
            }
            t = t.next;
          }
        }, this.pushBack = function (e) {
          if (null === e || void 0 === e) throw new Error("you can't push null or undefined here");
          ++r;
          var t = new i(e);
          s ? (s.next = t, t.pre = s, s = t) : o = s = t;
        }, this.popBack = function () {
          s && (r > 0 && --r, s && (o === s ? o = s = void 0 : (s = s.pre) && (s.next = void 0)));
        }, this.setElementByPos = function (e, t) {
          if (null === t || void 0 === t) throw new Error("you can't set null or undefined here");
          if (e < 0 || e >= r) throw new Error("pos must more then 0 and less then the list length");
          for (var n = o; e--;) {
            if (!n) throw new Error("unknown error");
            n = n.next;
          }
          n && (n.value = t);
        }, this.insert = function (e, t, n) {
          if (void 0 === n && (n = 1), null === t || void 0 === t) throw new Error("you can't insert null or undefined here");
          if (e < 0 || e > r) throw new Error("insert pos must more then 0 and less then or equal to the list length");
          if (n < 0) throw new Error("insert size must more than 0");
          if (0 === e) for (; n--;) this.pushFront(t);else if (e === r) for (; n--;) this.pushBack(t);else {
            for (var s = o, a = 1; a < e; ++a) {
              if (!(null === s || void 0 === s ? void 0 : s.next)) throw new Error("unknown error");
              s = null === s || void 0 === s ? void 0 : s.next;
            }
            if (!s) throw new Error("unknown error");
            var l = s.next;
            for (r += n; n--;) s.next = new i(t), s.next.pre = s, s = s.next;
            s.next = l, l && (l.pre = s);
          }
        }, this.find = function (e) {
          for (var t = o; t;) {
            if (t.value === e) return !0;
            t = t.next;
          }
          return !1;
        }, this.reverse = function () {
          for (var e = o, t = s, n = 0; e && t && 2 * n < r;) {
            var i = e.value;
            e.value = t.value, t.value = i, e = e.next, t = t.pre, ++n;
          }
        }, this.unique = function () {
          for (var e = o; e;) {
            for (var t = e; t && t.next && t.value === t.next.value;) t = t.next, r > 0 && --r;
            e.next = t.next, e.next && (e.next.pre = e), e = e.next;
          }
        }, this.sort = function (e) {
          var t = [];
          this.forEach(function (e) {
            t.push(e);
          }), t.sort(e);
          var r = o;
          t.forEach(function (e) {
            r && (r.value = e, r = r.next);
          });
        }, this.pushFront = function (e) {
          if (null === e || void 0 === e) throw new Error("you can't push null or undefined here");
          ++r;
          var t = new i(e);
          o ? (t.next = o, o.pre = t, o = t) : o = s = t;
        }, this.popFront = function () {
          o && (r > 0 && --r, o && (o === s ? o = s = void 0 : (o = o.next) && (o.pre = void 0)));
        }, this.merge = function (e) {
          var t = this,
            n = o;
          e.forEach(function (e) {
            for (; n && void 0 !== n.value && n.value <= e;) n = n.next;
            if (void 0 === n) t.pushBack(e), n = s;else if (n === o) t.pushFront(e), n = o;else {
              ++r;
              var a = n.pre;
              a && (a.next = new i(e), a.next.pre = a, a.next.next = n, n && (n.pre = a.next));
            }
          });
        }, this[Symbol.iterator] = function () {
          return function () {
            var e;
            return n(this, function (t) {
              switch (t.label) {
                case 0:
                  e = o, t.label = 1;
                case 1:
                  if (void 0 === e) return [3, 3];
                  if (!e.value) throw new Error("unknown error");
                  return [4, e.value];
                case 2:
                  return t.sent(), e = e.next, [3, 1];
                case 3:
                  return [2];
              }
            });
          }();
        }, e.forEach(function (e) {
          return t.pushBack(e);
        }), Object.freeze(this);
      }
      Object.freeze(o), r.default = o;
    }, {}],
    30: [function (e, t, r) {
      "use strict";

      var n = this && this.__generator || function (e, t) {
          var r,
            n,
            i,
            o,
            s = {
              label: 0,
              sent: function sent() {
                if (1 & i[0]) throw i[1];
                return i[1];
              },
              trys: [],
              ops: []
            };
          return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
          }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
            return this;
          }), o;
          function a(o) {
            return function (a) {
              return function (o) {
                if (r) throw new TypeError("Generator is already executing.");
                for (; s;) try {
                  if (r = 1, n && (i = 2 & o[0] ? n.return : o[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;
                  switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                    case 0:
                    case 1:
                      i = o;
                      break;
                    case 4:
                      return s.label++, {
                        value: o[1],
                        done: !1
                      };
                    case 5:
                      s.label++, n = o[1], o = [0];
                      continue;
                    case 7:
                      o = s.ops.pop(), s.trys.pop();
                      continue;
                    default:
                      if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                        s = 0;
                        continue;
                      }
                      if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                        s.label = o[1];
                        break;
                      }
                      if (6 === o[0] && s.label < i[1]) {
                        s.label = i[1], i = o;
                        break;
                      }
                      if (i && s.label < i[2]) {
                        s.label = i[2], s.ops.push(o);
                        break;
                      }
                      i[2] && s.ops.pop(), s.trys.pop();
                      continue;
                  }
                  o = t.call(e, s);
                } catch (e) {
                  o = [6, e], n = 0;
                } finally {
                  r = i = 0;
                }
                if (5 & o[0]) throw o[1];
                return {
                  value: o[0] ? o[1] : void 0,
                  done: !0
                };
              }([o, a]);
            };
          }
        },
        i = this && this.__values || function (e) {
          var t = "function" == typeof Symbol && Symbol.iterator,
            r = t && e[t],
            n = 0;
          if (r) return r.call(e);
          if (e && "number" == typeof e.length) return {
            next: function next() {
              return e && n >= e.length && (e = void 0), {
                value: e && e[n++],
                done: !e
              };
            }
          };
          throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
        };
      Object.defineProperty(r, "__esModule", {
        value: !0
      });
      var o = e("../Base/TreeNode");
      function s(e, t) {
        var r = this;
        void 0 === e && (e = []), t = t || function (e, t) {
          return e < t ? -1 : e > t ? 1 : 0;
        };
        var s = 0,
          a = new o.default();
        a.color = o.default.TreeNodeColorType.black, this.size = function () {
          return s;
        }, this.empty = function () {
          return 0 === s;
        }, this.clear = function () {
          s = 0, a.key = a.value = void 0, a.leftChild = a.rightChild = a.brother = void 0;
        };
        var l = function l(e) {
            if (!e || void 0 === e.key) throw new Error("unknown error");
            return e.leftChild ? l(e.leftChild) : e;
          },
          u = function u(e) {
            if (!e || void 0 === e.key) throw new Error("unknown error");
            return e.rightChild ? u(e.rightChild) : e;
          };
        this.front = function () {
          if (!this.empty()) {
            var e = l(a);
            if (void 0 === e.key || void 0 === e.value) throw new Error("unknown error");
            return {
              key: e.key,
              value: e.value
            };
          }
        }, this.back = function () {
          if (!this.empty()) {
            var e = u(a);
            if (void 0 === e.key || void 0 === e.value) throw new Error("unknown error");
            return {
              key: e.key,
              value: e.value
            };
          }
        }, this.forEach = function (e) {
          var t,
            r,
            n = 0;
          try {
            for (var o = i(this), s = o.next(); !s.done; s = o.next()) {
              e(s.value, n++);
            }
          } catch (e) {
            t = {
              error: e
            };
          } finally {
            try {
              s && !s.done && (r = o.return) && r.call(o);
            } finally {
              if (t) throw t.error;
            }
          }
        }, this.getElementByPos = function (e) {
          var t, r;
          if (e < 0 || e >= this.size()) throw new Error("pos must more than 0 and less than set's size");
          var n = 0;
          try {
            for (var o = i(this), s = o.next(); !s.done; s = o.next()) {
              var a = s.value;
              if (n === e) return a;
              ++n;
            }
          } catch (e) {
            t = {
              error: e
            };
          } finally {
            try {
              s && !s.done && (r = o.return) && r.call(o);
            } finally {
              if (t) throw t.error;
            }
          }
          throw new Error("unknown Error");
        };
        var c = function c(e, r) {
          if (e && void 0 !== e.key && void 0 !== e.value) {
            var n = t(e.key, r);
            return 0 === n ? {
              key: e.key,
              value: e.value
            } : n < 0 ? c(e.rightChild, r) : c(e.leftChild, r) || {
              key: e.key,
              value: e.value
            };
          }
        };
        this.lowerBound = function (e) {
          return c(a, e);
        };
        var h = function h(e, r) {
          if (e && void 0 !== e.key && void 0 !== e.value) return t(e.key, r) <= 0 ? h(e.rightChild, r) : h(e.leftChild, r) || {
            key: e.key,
            value: e.value
          };
        };
        this.upperBound = function (e) {
          return h(a, e);
        };
        var f = function f(e, r) {
          if (e && void 0 !== e.key && void 0 !== e.value) {
            var n = t(e.key, r);
            return 0 === n ? {
              key: e.key,
              value: e.value
            } : n > 0 ? f(e.leftChild, r) : f(e.rightChild, r) || {
              key: e.key,
              value: e.value
            };
          }
        };
        this.reverseLowerBound = function (e) {
          return f(a, e);
        };
        var p = function p(e, r) {
          if (e && void 0 !== e.key && void 0 !== e.value) return t(e.key, r) >= 0 ? p(e.leftChild, r) : p(e.rightChild, r) || {
            key: e.key,
            value: e.value
          };
        };
        this.reverseUpperBound = function (e) {
          return p(a, e);
        };
        var d = function d(e) {
            var t = e.parent;
            if (!t) {
              if (e === a) return;
              throw new Error("unknown error");
            }
            if (e.color !== o.default.TreeNodeColorType.red) {
              var r = e.brother;
              if (!r) throw new Error("unknown error");
              if (e === t.leftChild) {
                if (r.color === o.default.TreeNodeColorType.red) {
                  r.color = o.default.TreeNodeColorType.black, t.color = o.default.TreeNodeColorType.red;
                  var n = t.rotateLeft();
                  a === t && (a = n), d(e);
                } else if (r.color === o.default.TreeNodeColorType.black) if (r.rightChild && r.rightChild.color === o.default.TreeNodeColorType.red) {
                  r.color = t.color, t.color = o.default.TreeNodeColorType.black, r.rightChild && (r.rightChild.color = o.default.TreeNodeColorType.black);
                  n = t.rotateLeft();
                  a === t && (a = n), e.color = o.default.TreeNodeColorType.black;
                } else if (r.rightChild && r.rightChild.color !== o.default.TreeNodeColorType.black || !r.leftChild || r.leftChild.color !== o.default.TreeNodeColorType.red) r.leftChild && r.leftChild.color !== o.default.TreeNodeColorType.black || r.rightChild && r.rightChild.color !== o.default.TreeNodeColorType.black || (r.color = o.default.TreeNodeColorType.red, d(t));else {
                  r.color = o.default.TreeNodeColorType.red, r.leftChild && (r.leftChild.color = o.default.TreeNodeColorType.black);
                  n = r.rotateRight();
                  a === r && (a = n), d(e);
                }
              } else if (e === t.rightChild) if (r.color === o.default.TreeNodeColorType.red) {
                r.color = o.default.TreeNodeColorType.black, t.color = o.default.TreeNodeColorType.red;
                n = t.rotateRight();
                a === t && (a = n), d(e);
              } else if (r.color === o.default.TreeNodeColorType.black) if (r.leftChild && r.leftChild.color === o.default.TreeNodeColorType.red) {
                r.color = t.color, t.color = o.default.TreeNodeColorType.black, r.leftChild && (r.leftChild.color = o.default.TreeNodeColorType.black);
                n = t.rotateRight();
                a === t && (a = n), e.color = o.default.TreeNodeColorType.black;
              } else if (r.leftChild && r.leftChild.color !== o.default.TreeNodeColorType.black || !r.rightChild || r.rightChild.color !== o.default.TreeNodeColorType.red) r.leftChild && r.leftChild.color !== o.default.TreeNodeColorType.black || r.rightChild && r.rightChild.color !== o.default.TreeNodeColorType.black || (r.color = o.default.TreeNodeColorType.red, d(t));else {
                r.color = o.default.TreeNodeColorType.red, r.rightChild && (r.rightChild.color = o.default.TreeNodeColorType.black);
                n = r.rotateLeft();
                a === r && (a = n), d(e);
              }
            } else e.color = o.default.TreeNodeColorType.black;
          },
          g = function g(e) {
            for (var t = e; t.leftChild || t.rightChild;) {
              if (t.rightChild) {
                t = l(t.rightChild);
                var r = e.key;
                e.key = t.key, t.key = r;
                var n = e.value;
                e.value = t.value, t.value = n, e = t;
              }
              if (t.leftChild) {
                t = u(t.leftChild);
                r = e.key;
                e.key = t.key, t.key = r;
                n = e.value;
                e.value = t.value, t.value = n, e = t;
              }
            }
            d(t), t && t.remove(), --s, a.color = o.default.TreeNodeColorType.black;
          },
          y = function y(e, t) {
            return !(!e || void 0 === e.key) && (!!y(e.leftChild, t) || !!t(e) || y(e.rightChild, t));
          };
        this.eraseElementByPos = function (e) {
          if (e < 0 || e >= s) throw new Error("pos must more than 0 and less than set's size");
          var t = 0;
          y(a, function (r) {
            return e === t ? (g(r), !0) : (++t, !1);
          });
        }, this.eraseElementByKey = function (e) {
          if (!this.empty()) {
            var r = v(a, e);
            void 0 !== r && void 0 !== r.key && 0 === t(r.key, e) && g(r);
          }
        };
        var b = function b(e, r) {
            if (!e || void 0 === e.key) throw new Error("unknown error");
            var n = t(r, e.key);
            return n < 0 ? e.leftChild ? b(e.leftChild, r) : (e.leftChild = new o.default(), e.leftChild.parent = e, e.leftChild.brother = e.rightChild, e.rightChild && (e.rightChild.brother = e.leftChild), e.leftChild) : n > 0 ? e.rightChild ? b(e.rightChild, r) : (e.rightChild = new o.default(), e.rightChild.parent = e, e.rightChild.brother = e.leftChild, e.leftChild && (e.leftChild.brother = e.rightChild), e.rightChild) : e;
          },
          m = function m(e) {
            var t = e.parent;
            if (!t) {
              if (e === a) return;
              throw new Error("unknown error");
            }
            if (t.color !== o.default.TreeNodeColorType.black && t.color === o.default.TreeNodeColorType.red) {
              var r = t.brother,
                n = t.parent;
              if (!n) throw new Error("unknown error");
              if (r && r.color === o.default.TreeNodeColorType.red) r.color = t.color = o.default.TreeNodeColorType.black, n.color = o.default.TreeNodeColorType.red, m(n);else if (!r || r.color === o.default.TreeNodeColorType.black) if (t === n.leftChild) {
                if (e === t.leftChild) {
                  t.color = o.default.TreeNodeColorType.black, n.color = o.default.TreeNodeColorType.red;
                  var i = n.rotateRight();
                  n === a && (a = i);
                } else if (e === t.rightChild) {
                  i = t.rotateLeft();
                  n === a && (a = i), m(t);
                }
              } else if (t === n.rightChild) if (e === t.leftChild) {
                i = t.rotateRight();
                n === a && (a = i), m(t);
              } else if (e === t.rightChild) {
                t.color = o.default.TreeNodeColorType.black, n.color = o.default.TreeNodeColorType.red;
                i = n.rotateLeft();
                n === a && (a = i);
              }
            }
          };
        this.setElement = function (e, r) {
          if (null === e || void 0 === e) throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");
          if (null !== r && void 0 !== r) {
            if (this.empty()) return ++s, a.key = e, a.value = r, void (a.color = o.default.TreeNodeColorType.black);
            var n = b(a, e);
            void 0 === n.key || 0 !== t(n.key, e) ? (++s, n.key = e, n.value = r, m(n), a.color = o.default.TreeNodeColorType.black) : n.value = r;
          } else this.eraseElementByKey(e);
        };
        var v = function v(e, r) {
          if (e && void 0 !== e.key) {
            var n = t(r, e.key);
            return n < 0 ? v(e.leftChild, r) : n > 0 ? v(e.rightChild, r) : e;
          }
        };
        this.find = function (e) {
          return !!v(a, e);
        }, this.getElementByKey = function (e) {
          var t = v(a, e);
          if (void 0 === (null === t || void 0 === t ? void 0 : t.key) || void 0 === (null === t || void 0 === t ? void 0 : t.value)) throw new Error("unknown error");
          return t.value;
        }, this.union = function (e) {
          var t = this;
          e.forEach(function (e) {
            var r = e.key,
              n = e.value;
            return t.setElement(r, n);
          });
        }, this.getHeight = function () {
          if (this.empty()) return 0;
          var e = function e(t) {
            return t ? Math.max(e(t.leftChild), e(t.rightChild)) + 1 : 1;
          };
          return e(a);
        };
        var w = function w(e) {
          return n(this, function (t) {
            switch (t.label) {
              case 0:
                return e && void 0 !== e.key && void 0 !== e.value ? [5, i(w(e.leftChild))] : [2];
              case 1:
                return t.sent(), [4, {
                  key: e.key,
                  value: e.value
                }];
              case 2:
                return t.sent(), [5, i(w(e.rightChild))];
              case 3:
                return t.sent(), [2];
            }
          });
        };
        this[Symbol.iterator] = function () {
          return w(a);
        }, e.forEach(function (e) {
          var t = e.key,
            n = e.value;
          return r.setElement(t, n);
        }), Object.freeze(this);
      }
      Object.freeze(s), r.default = s;
    }, {
      "../Base/TreeNode": 25
    }],
    31: [function (e, t, r) {
      "use strict";

      function n(e, t) {
        void 0 === e && (e = []), t = t || function (e, t) {
          return e > t ? -1 : e < t ? 1 : 0;
        };
        var r = [];
        e.forEach(function (e) {
          return r.push(e);
        });
        var n = r.length,
          i = function i(e, t) {
            if (e < 0 || e >= n) throw new Error("unknown error");
            if (t < 0 || t >= n) throw new Error("unknown error");
            var i = r[e];
            r[e] = r[t], r[t] = i;
          },
          o = function o(e) {
            if (e < 0 || e >= n) throw new Error("unknown error");
            var o = 2 * e + 1,
              s = 2 * e + 2;
            o < n && t(r[e], r[o]) > 0 && i(e, o), s < n && t(r[e], r[s]) > 0 && i(e, s);
          };
        !function () {
          for (var e = Math.floor((n - 1) / 2); e >= 0; --e) for (var o = e, s = 2 * o + 1; s < n;) {
            var a = s + 1,
              l = s;
            if (a < n && t(r[s], r[a]) > 0 && (l = a), t(r[o], r[l]) <= 0) break;
            i(o, l), s = 2 * (o = l) + 1;
          }
        }(), this.size = function () {
          return n;
        }, this.empty = function () {
          return 0 === n;
        }, this.clear = function () {
          n = 0, r.length = 0;
        }, this.push = function (e) {
          if (r.push(e), 1 !== ++n) for (var i = n - 1; i > 0;) {
            var s = Math.floor((i - 1) / 2);
            if (t(r[s], e) <= 0) break;
            o(s), i = s;
          }
        }, this.pop = function () {
          if (!this.empty()) if (1 !== this.size()) {
            var e = r[n - 1];
            --n;
            for (var i = 0; i < this.size();) {
              var o = 2 * i + 1,
                s = 2 * i + 2;
              if (o >= this.size()) break;
              var a = o;
              if (s < this.size() && t(r[o], r[s]) > 0 && (a = s), t(r[a], e) >= 0) break;
              r[i] = r[a], i = a;
            }
            r[i] = e;
          } else --n;
        }, this.top = function () {
          return r[0];
        }, Object.freeze(this);
      }
      Object.defineProperty(r, "__esModule", {
        value: !0
      }), Object.freeze(n), r.default = n;
    }, {}],
    32: [function (e, t, r) {
      "use strict";

      Object.defineProperty(r, "__esModule", {
        value: !0
      });
      var n = e("../LinkList/LinkList");
      function i(e) {
        void 0 === e && (e = []);
        var t = new n.default(e);
        this.size = function () {
          return t.size();
        }, this.empty = function () {
          return t.empty();
        }, this.clear = function () {
          t.clear();
        }, this.push = function (e) {
          t.pushBack(e);
        }, this.pop = function () {
          t.popFront();
        }, this.front = function () {
          return t.front();
        }, Object.freeze(this);
      }
      Object.freeze(i), r.default = i;
    }, {
      "../LinkList/LinkList": 29
    }],
    33: [function (e, t, r) {
      "use strict";

      var n = this && this.__generator || function (e, t) {
          var r,
            n,
            i,
            o,
            s = {
              label: 0,
              sent: function sent() {
                if (1 & i[0]) throw i[1];
                return i[1];
              },
              trys: [],
              ops: []
            };
          return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
          }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
            return this;
          }), o;
          function a(o) {
            return function (a) {
              return function (o) {
                if (r) throw new TypeError("Generator is already executing.");
                for (; s;) try {
                  if (r = 1, n && (i = 2 & o[0] ? n.return : o[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;
                  switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                    case 0:
                    case 1:
                      i = o;
                      break;
                    case 4:
                      return s.label++, {
                        value: o[1],
                        done: !1
                      };
                    case 5:
                      s.label++, n = o[1], o = [0];
                      continue;
                    case 7:
                      o = s.ops.pop(), s.trys.pop();
                      continue;
                    default:
                      if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                        s = 0;
                        continue;
                      }
                      if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                        s.label = o[1];
                        break;
                      }
                      if (6 === o[0] && s.label < i[1]) {
                        s.label = i[1], i = o;
                        break;
                      }
                      if (i && s.label < i[2]) {
                        s.label = i[2], s.ops.push(o);
                        break;
                      }
                      i[2] && s.ops.pop(), s.trys.pop();
                      continue;
                  }
                  o = t.call(e, s);
                } catch (e) {
                  o = [6, e], n = 0;
                } finally {
                  r = i = 0;
                }
                if (5 & o[0]) throw o[1];
                return {
                  value: o[0] ? o[1] : void 0,
                  done: !0
                };
              }([o, a]);
            };
          }
        },
        i = this && this.__values || function (e) {
          var t = "function" == typeof Symbol && Symbol.iterator,
            r = t && e[t],
            n = 0;
          if (r) return r.call(e);
          if (e && "number" == typeof e.length) return {
            next: function next() {
              return e && n >= e.length && (e = void 0), {
                value: e && e[n++],
                done: !e
              };
            }
          };
          throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
        };
      Object.defineProperty(r, "__esModule", {
        value: !0
      });
      var o = e("../Base/TreeNode");
      function s(e, t) {
        var r = this;
        void 0 === e && (e = []), t = t || function (e, t) {
          return e < t ? -1 : e > t ? 1 : 0;
        };
        var s = 0,
          a = new o.default();
        a.color = o.default.TreeNodeColorType.black, this.size = function () {
          return s;
        }, this.empty = function () {
          return 0 === s;
        }, this.clear = function () {
          s = 0, a.key = void 0, a.leftChild = a.rightChild = a.brother = a.parent = void 0, a.color = o.default.TreeNodeColorType.black;
        };
        var l = function l(e) {
            if (!e || void 0 === e.key) throw new Error("unknown error");
            return e.leftChild ? l(e.leftChild) : e;
          },
          u = function u(e) {
            if (!e || void 0 === e.key) throw new Error("unknown error");
            return e.rightChild ? u(e.rightChild) : e;
          };
        this.front = function () {
          if (!this.empty()) return l(a).key;
        }, this.back = function () {
          if (!this.empty()) return u(a).key;
        }, this.forEach = function (e) {
          var t,
            r,
            n = 0;
          try {
            for (var o = i(this), s = o.next(); !s.done; s = o.next()) {
              e(s.value, n++);
            }
          } catch (e) {
            t = {
              error: e
            };
          } finally {
            try {
              s && !s.done && (r = o.return) && r.call(o);
            } finally {
              if (t) throw t.error;
            }
          }
        }, this.getElementByPos = function (e) {
          var t, r;
          if (e < 0 || e >= this.size()) throw new Error("pos must more than 0 and less than set's size");
          var n = 0;
          try {
            for (var o = i(this), s = o.next(); !s.done; s = o.next()) {
              var a = s.value;
              if (n === e) return a;
              ++n;
            }
          } catch (e) {
            t = {
              error: e
            };
          } finally {
            try {
              s && !s.done && (r = o.return) && r.call(o);
            } finally {
              if (t) throw t.error;
            }
          }
          throw new Error("unknown error");
        };
        var c = function c(e) {
            var t = e.parent;
            if (!t) {
              if (e === a) return;
              throw new Error("unknown error");
            }
            if (e.color !== o.default.TreeNodeColorType.red) {
              var r = e.brother;
              if (!r) throw new Error("unknown error");
              if (e === t.leftChild) {
                if (r.color === o.default.TreeNodeColorType.red) {
                  r.color = o.default.TreeNodeColorType.black, t.color = o.default.TreeNodeColorType.red;
                  var n = t.rotateLeft();
                  a === t && (a = n), c(e);
                } else if (r.color === o.default.TreeNodeColorType.black) if (r.rightChild && r.rightChild.color === o.default.TreeNodeColorType.red) {
                  r.color = t.color, t.color = o.default.TreeNodeColorType.black, r.rightChild && (r.rightChild.color = o.default.TreeNodeColorType.black);
                  n = t.rotateLeft();
                  a === t && (a = n), e.color = o.default.TreeNodeColorType.black;
                } else if (r.rightChild && r.rightChild.color !== o.default.TreeNodeColorType.black || !r.leftChild || r.leftChild.color !== o.default.TreeNodeColorType.red) r.leftChild && r.leftChild.color !== o.default.TreeNodeColorType.black || r.rightChild && r.rightChild.color !== o.default.TreeNodeColorType.black || (r.color = o.default.TreeNodeColorType.red, c(t));else {
                  r.color = o.default.TreeNodeColorType.red, r.leftChild && (r.leftChild.color = o.default.TreeNodeColorType.black);
                  n = r.rotateRight();
                  a === r && (a = n), c(e);
                }
              } else if (e === t.rightChild) if (r.color === o.default.TreeNodeColorType.red) {
                r.color = o.default.TreeNodeColorType.black, t.color = o.default.TreeNodeColorType.red;
                n = t.rotateRight();
                a === t && (a = n), c(e);
              } else if (r.color === o.default.TreeNodeColorType.black) if (r.leftChild && r.leftChild.color === o.default.TreeNodeColorType.red) {
                r.color = t.color, t.color = o.default.TreeNodeColorType.black, r.leftChild && (r.leftChild.color = o.default.TreeNodeColorType.black);
                n = t.rotateRight();
                a === t && (a = n), e.color = o.default.TreeNodeColorType.black;
              } else if (r.leftChild && r.leftChild.color !== o.default.TreeNodeColorType.black || !r.rightChild || r.rightChild.color !== o.default.TreeNodeColorType.red) r.leftChild && r.leftChild.color !== o.default.TreeNodeColorType.black || r.rightChild && r.rightChild.color !== o.default.TreeNodeColorType.black || (r.color = o.default.TreeNodeColorType.red, c(t));else {
                r.color = o.default.TreeNodeColorType.red, r.rightChild && (r.rightChild.color = o.default.TreeNodeColorType.black);
                n = r.rotateLeft();
                a === r && (a = n), c(e);
              }
            } else e.color = o.default.TreeNodeColorType.black;
          },
          h = function h(e) {
            for (var t = e; t.leftChild || t.rightChild;) {
              if (t.rightChild) {
                t = l(t.rightChild);
                var r = e.key;
                e.key = t.key, t.key = r, e = t;
              }
              if (t.leftChild) {
                t = u(t.leftChild);
                r = e.key;
                e.key = t.key, t.key = r, e = t;
              }
            }
            c(t), t && t.remove(), --s, a.color = o.default.TreeNodeColorType.black;
          },
          f = function f(e, t) {
            return !(!e || void 0 === e.key) && (!!f(e.leftChild, t) || !!t(e) || f(e.rightChild, t));
          };
        this.eraseElementByPos = function (e) {
          if (e < 0 || e >= s) throw new Error("pos must more than 0 and less than set's size");
          var t = 0;
          f(a, function (r) {
            return e === t ? (h(r), !0) : (++t, !1);
          });
        }, this.eraseElementByValue = function (e) {
          if (!this.empty()) {
            var r = g(a, e);
            void 0 !== r && void 0 !== r.key && 0 === t(r.key, e) && h(r);
          }
        };
        var p = function p(e, r) {
            if (!e || void 0 === e.key) throw new Error("unknown error");
            var n = t(r, e.key);
            return n < 0 ? e.leftChild ? p(e.leftChild, r) : (e.leftChild = new o.default(), e.leftChild.parent = e, e.leftChild.brother = e.rightChild, e.rightChild && (e.rightChild.brother = e.leftChild), e.leftChild) : n > 0 ? e.rightChild ? p(e.rightChild, r) : (e.rightChild = new o.default(), e.rightChild.parent = e, e.rightChild.brother = e.leftChild, e.leftChild && (e.leftChild.brother = e.rightChild), e.rightChild) : e;
          },
          d = function d(e) {
            var t = e.parent;
            if (!t) {
              if (e === a) return;
              throw new Error("unknown error");
            }
            if (t.color !== o.default.TreeNodeColorType.black && t.color === o.default.TreeNodeColorType.red) {
              var r = t.brother,
                n = t.parent;
              if (!n) throw new Error("unknown error");
              if (r && r.color === o.default.TreeNodeColorType.red) r.color = t.color = o.default.TreeNodeColorType.black, n.color = o.default.TreeNodeColorType.red, d(n);else if (!r || r.color === o.default.TreeNodeColorType.black) if (t === n.leftChild) {
                if (e === t.leftChild) {
                  t.color = o.default.TreeNodeColorType.black, n.color = o.default.TreeNodeColorType.red;
                  var i = n.rotateRight();
                  n === a && (a = i);
                } else if (e === t.rightChild) {
                  i = t.rotateLeft();
                  n === a && (a = i), d(t);
                }
              } else if (t === n.rightChild) if (e === t.leftChild) {
                i = t.rotateRight();
                n === a && (a = i), d(t);
              } else if (e === t.rightChild) {
                t.color = o.default.TreeNodeColorType.black, n.color = o.default.TreeNodeColorType.red;
                i = n.rotateLeft();
                n === a && (a = i);
              }
            }
          };
        this.insert = function (e) {
          if (null === e || void 0 === e) throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");
          if (this.empty()) return ++s, a.key = e, void (a.color = o.default.TreeNodeColorType.black);
          var r = p(a, e);
          void 0 !== r.key && 0 === t(r.key, e) || (++s, r.key = e, d(r), a.color = o.default.TreeNodeColorType.black);
        };
        var g = function g(e, r) {
          if (e && void 0 !== e.key) {
            var n = t(r, e.key);
            return n < 0 ? g(e.leftChild, r) : n > 0 ? g(e.rightChild, r) : e;
          }
        };
        this.find = function (e) {
          var r = g(a, e);
          return void 0 !== r && void 0 !== r.key && 0 === t(r.key, e);
        };
        var y = function y(e, r) {
          if (e && void 0 !== e.key) {
            var n = t(e.key, r);
            return 0 === n ? e.key : n < 0 ? y(e.rightChild, r) : y(e.leftChild, r) || e.key;
          }
        };
        this.lowerBound = function (e) {
          return y(a, e);
        };
        var b = function b(e, r) {
          if (e && void 0 !== e.key) return t(e.key, r) <= 0 ? b(e.rightChild, r) : b(e.leftChild, r) || e.key;
        };
        this.upperBound = function (e) {
          return b(a, e);
        };
        var m = function m(e, r) {
          if (e && void 0 !== e.key) {
            var n = t(e.key, r);
            return 0 === n ? e.key : n > 0 ? m(e.leftChild, r) : m(e.rightChild, r) || e.key;
          }
        };
        this.reverseLowerBound = function (e) {
          return m(a, e);
        };
        var v = function v(e, r) {
          if (e && void 0 !== e.key) return t(e.key, r) >= 0 ? v(e.leftChild, r) : v(e.rightChild, r) || e.key;
        };
        this.reverseUpperBound = function (e) {
          return v(a, e);
        }, this.union = function (e) {
          var t = this;
          e.forEach(function (e) {
            return t.insert(e);
          });
        }, this.getHeight = function () {
          if (this.empty()) return 0;
          var e = function e(t) {
            return t ? Math.max(e(t.leftChild), e(t.rightChild)) + 1 : 1;
          };
          return e(a);
        };
        var w = function w(e) {
          return n(this, function (t) {
            switch (t.label) {
              case 0:
                return e && void 0 !== e.key ? [5, i(w(e.leftChild))] : [2];
              case 1:
                return t.sent(), [4, e.key];
              case 2:
                return t.sent(), [5, i(w(e.rightChild))];
              case 3:
                return t.sent(), [2];
            }
          });
        };
        this[Symbol.iterator] = function () {
          return w(a);
        }, e.forEach(function (e) {
          return r.insert(e);
        }), Object.freeze(this);
      }
      Object.freeze(s), r.default = s;
    }, {
      "../Base/TreeNode": 25
    }],
    34: [function (e, t, r) {
      "use strict";

      function n(e) {
        var t = this;
        void 0 === e && (e = []);
        var r = 0,
          n = [];
        this.size = function () {
          return r;
        }, this.empty = function () {
          return 0 === r;
        }, this.clear = function () {
          r = 0, n.length = 0;
        }, this.push = function (e) {
          n.push(e), ++r;
        }, this.pop = function () {
          n.pop(), r > 0 && --r;
        }, this.top = function () {
          return n[r - 1];
        }, e.forEach(function (e) {
          return t.push(e);
        }), Object.freeze(this);
      }
      Object.defineProperty(r, "__esModule", {
        value: !0
      }), Object.freeze(n), r.default = n;
    }, {}],
    35: [function (e, t, r) {
      "use strict";

      var n = this && this.__generator || function (e, t) {
          var r,
            n,
            i,
            o,
            s = {
              label: 0,
              sent: function sent() {
                if (1 & i[0]) throw i[1];
                return i[1];
              },
              trys: [],
              ops: []
            };
          return o = {
            next: a(0),
            throw: a(1),
            return: a(2)
          }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
            return this;
          }), o;
          function a(o) {
            return function (a) {
              return function (o) {
                if (r) throw new TypeError("Generator is already executing.");
                for (; s;) try {
                  if (r = 1, n && (i = 2 & o[0] ? n.return : o[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;
                  switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                    case 0:
                    case 1:
                      i = o;
                      break;
                    case 4:
                      return s.label++, {
                        value: o[1],
                        done: !1
                      };
                    case 5:
                      s.label++, n = o[1], o = [0];
                      continue;
                    case 7:
                      o = s.ops.pop(), s.trys.pop();
                      continue;
                    default:
                      if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                        s = 0;
                        continue;
                      }
                      if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                        s.label = o[1];
                        break;
                      }
                      if (6 === o[0] && s.label < i[1]) {
                        s.label = i[1], i = o;
                        break;
                      }
                      if (i && s.label < i[2]) {
                        s.label = i[2], s.ops.push(o);
                        break;
                      }
                      i[2] && s.ops.pop(), s.trys.pop();
                      continue;
                  }
                  o = t.call(e, s);
                } catch (e) {
                  o = [6, e], n = 0;
                } finally {
                  r = i = 0;
                }
                if (5 & o[0]) throw o[1];
                return {
                  value: o[0] ? o[1] : void 0,
                  done: !0
                };
              }([o, a]);
            };
          }
        },
        i = this && this.__read || function (e, t) {
          var r = "function" == typeof Symbol && e[Symbol.iterator];
          if (!r) return e;
          var n,
            i,
            o = r.call(e),
            s = [];
          try {
            for (; (void 0 === t || t-- > 0) && !(n = o.next()).done;) s.push(n.value);
          } catch (e) {
            i = {
              error: e
            };
          } finally {
            try {
              n && !n.done && (r = o.return) && r.call(o);
            } finally {
              if (i) throw i.error;
            }
          }
          return s;
        },
        o = this && this.__spreadArray || function (e, t, r) {
          if (r || 2 === arguments.length) for (var n, i = 0, o = t.length; i < o; i++) !n && i in t || (n || (n = Array.prototype.slice.call(t, 0, i)), n[i] = t[i]);
          return e.concat(n || Array.prototype.slice.call(t));
        },
        s = this && this.__values || function (e) {
          var t = "function" == typeof Symbol && Symbol.iterator,
            r = t && e[t],
            n = 0;
          if (r) return r.call(e);
          if (e && "number" == typeof e.length) return {
            next: function next() {
              return e && n >= e.length && (e = void 0), {
                value: e && e[n++],
                done: !e
              };
            }
          };
          throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
        };
      function a(e) {
        var t = this;
        void 0 === e && (e = []);
        var r = 0,
          a = [];
        this.size = function () {
          return r;
        }, this.empty = function () {
          return 0 === r;
        }, this.clear = function () {
          r = 0, a.length = 0;
        }, this.front = function () {
          if (!this.empty()) return a[0];
        }, this.back = function () {
          if (!this.empty()) return a[r - 1];
        }, this.forEach = function (e) {
          a.forEach(e);
        }, this.getElementByPos = function (e) {
          if (e < 0 || e >= r) throw new Error("pos must more than 0 and less than vector's size");
          return a[e];
        }, this.eraseElementByPos = function (e) {
          if (e < 0 || e >= r) throw new Error("pos must more than 0 and less than vector's size");
          for (var t = e; t < r - 1; ++t) a[t] = a[t + 1];
          this.popBack();
        }, this.eraseElementByValue = function (e) {
          var t = [];
          this.forEach(function (r) {
            r !== e && t.push(r);
          }), t.forEach(function (e, t) {
            a[t] = e;
          });
          for (var n = t.length; r > n;) this.popBack();
        }, this.pushBack = function (e) {
          a.push(e), ++r;
        }, this.popBack = function () {
          a.pop(), r > 0 && --r;
        }, this.setElementByPos = function (e, t) {
          if (e < 0 || e >= r) throw new Error("pos must more than 0 and less than vector's size");
          a[e] = t;
        }, this.insert = function (e, t, n) {
          if (void 0 === n && (n = 1), e < 0 || e > r) throw new Error("pos must more than 0 and less than or equal to vector's size");
          a.splice.apply(a, o([e, 0], i(new Array(n).fill(t)), !1)), r += n;
        }, this.find = function (e) {
          return a.includes(e);
        }, this.reverse = function () {
          a.reverse();
        }, this.unique = function () {
          var e,
            t = [];
          this.forEach(function (r, n) {
            0 !== n && r === e || (t.push(r), e = r);
          }), t.forEach(function (e, t) {
            a[t] = e;
          });
          for (var n = t.length; r > n;) this.popBack();
        }, this.sort = function (e) {
          a.sort(e);
        }, this[Symbol.iterator] = function () {
          return function () {
            return n(this, function (e) {
              switch (e.label) {
                case 0:
                  return [5, s(a)];
                case 1:
                  return [2, e.sent()];
              }
            });
          }();
        }, e.forEach(function (e) {
          return t.pushBack(e);
        }), Object.freeze(this);
      }
      Object.defineProperty(r, "__esModule", {
        value: !0
      }), Object.freeze(a), r.default = a;
    }, {}],
    36: [function (e, t, r) {
      "use strict";

      Object.defineProperty(r, "__esModule", {
        value: !0
      }), r.HashMap = r.HashSet = r.Map = r.Set = r.PriorityQueue = r.Deque = r.LinkList = r.Queue = r.Stack = r.Vector = void 0;
      var n = e("./Vector/Vector");
      r.Vector = n.default;
      var i = e("./Stack/Stack");
      r.Stack = i.default;
      var o = e("./Queue/Queue");
      r.Queue = o.default;
      var s = e("./LinkList/LinkList");
      r.LinkList = s.default;
      var a = e("./Deque/Deque");
      r.Deque = a.default;
      var l = e("./PriorityQueue/PriorityQueue");
      r.PriorityQueue = l.default;
      var u = e("./Set/Set");
      r.Set = u.default;
      var c = e("./Map/Map");
      r.Map = c.default;
      var h = e("./HashSet/HashSet");
      r.HashSet = h.default;
      var f = e("./HashMap/HashMap");
      r.HashMap = f.default;
    }, {
      "./Deque/Deque": 26,
      "./HashMap/HashMap": 27,
      "./HashSet/HashSet": 28,
      "./LinkList/LinkList": 29,
      "./Map/Map": 30,
      "./PriorityQueue/PriorityQueue": 31,
      "./Queue/Queue": 32,
      "./Set/Set": 33,
      "./Stack/Stack": 34,
      "./Vector/Vector": 35
    }],
    37: [function (e, t, r) {
      "use strict";

      var n = e("yallist"),
        i = Symbol("max"),
        o = Symbol("length"),
        s = Symbol("lengthCalculator"),
        a = Symbol("allowStale"),
        l = Symbol("maxAge"),
        u = Symbol("dispose"),
        c = Symbol("noDisposeOnSet"),
        h = Symbol("lruList"),
        f = Symbol("cache"),
        p = Symbol("updateAgeOnGet"),
        d = function d() {
          return 1;
        };
      var g = function g(e, t, r) {
          var n = e[f].get(t);
          if (n) {
            var _t19 = n.value;
            if (y(e, _t19)) {
              if (m(e, n), !e[a]) return;
            } else r && (e[p] && (n.value.now = Date.now()), e[h].unshiftNode(n));
            return _t19.value;
          }
        },
        y = function y(e, t) {
          if (!t || !t.maxAge && !e[l]) return !1;
          var r = Date.now() - t.now;
          return t.maxAge ? r > t.maxAge : e[l] && r > e[l];
        },
        b = function b(e) {
          if (e[o] > e[i]) for (var _t20 = e[h].tail; e[o] > e[i] && null !== _t20;) {
            var _r14 = _t20.prev;
            m(e, _t20), _t20 = _r14;
          }
        },
        m = function m(e, t) {
          if (t) {
            var _r15 = t.value;
            e[u] && e[u](_r15.key, _r15.value), e[o] -= _r15.length, e[f].delete(_r15.key), e[h].removeNode(t);
          }
        };
      var v = /*#__PURE__*/_createClass(function v(e, t, r, n, i) {
        _classCallCheck(this, v);
        this.key = e, this.value = t, this.length = r, this.now = n, this.maxAge = i || 0;
      });
      var w = function w(e, t, r, n) {
        var i = r.value;
        y(e, i) && (m(e, r), e[a] || (i = void 0)), i && t.call(n, i.value, i.key, e);
      };
      t.exports = /*#__PURE__*/function () {
        function _class(e) {
          _classCallCheck(this, _class);
          if ("number" == typeof e && (e = {
            max: e
          }), e || (e = {}), e.max && ("number" != typeof e.max || e.max < 0)) throw new TypeError("max must be a non-negative number");
          this[i] = e.max || 1 / 0;
          var t = e.length || d;
          if (this[s] = "function" != typeof t ? d : t, this[a] = e.stale || !1, e.maxAge && "number" != typeof e.maxAge) throw new TypeError("maxAge must be a number");
          this[l] = e.maxAge || 0, this[u] = e.dispose, this[c] = e.noDisposeOnSet || !1, this[p] = e.updateAgeOnGet || !1, this.reset();
        }
        _createClass(_class, [{
          key: "max",
          get: function get() {
            return this[i];
          },
          set: function set(e) {
            if ("number" != typeof e || e < 0) throw new TypeError("max must be a non-negative number");
            this[i] = e || 1 / 0, b(this);
          }
        }, {
          key: "allowStale",
          get: function get() {
            return this[a];
          },
          set: function set(e) {
            this[a] = !!e;
          }
        }, {
          key: "maxAge",
          get: function get() {
            return this[l];
          },
          set: function set(e) {
            if ("number" != typeof e) throw new TypeError("maxAge must be a non-negative number");
            this[l] = e, b(this);
          }
        }, {
          key: "lengthCalculator",
          get: function get() {
            return this[s];
          },
          set: function set(e) {
            var _this3 = this;
            "function" != typeof e && (e = d), e !== this[s] && (this[s] = e, this[o] = 0, this[h].forEach(function (e) {
              e.length = _this3[s](e.value, e.key), _this3[o] += e.length;
            })), b(this);
          }
        }, {
          key: "length",
          get: function get() {
            return this[o];
          }
        }, {
          key: "itemCount",
          get: function get() {
            return this[h].length;
          }
        }, {
          key: "rforEach",
          value: function rforEach(e, t) {
            t = t || this;
            for (var _r16 = this[h].tail; null !== _r16;) {
              var _n5 = _r16.prev;
              w(this, e, _r16, t), _r16 = _n5;
            }
          }
        }, {
          key: "forEach",
          value: function forEach(e, t) {
            t = t || this;
            for (var _r17 = this[h].head; null !== _r17;) {
              var _n6 = _r17.next;
              w(this, e, _r17, t), _r17 = _n6;
            }
          }
        }, {
          key: "keys",
          value: function keys() {
            return this[h].toArray().map(function (e) {
              return e.key;
            });
          }
        }, {
          key: "values",
          value: function values() {
            return this[h].toArray().map(function (e) {
              return e.value;
            });
          }
        }, {
          key: "reset",
          value: function reset() {
            var _this4 = this;
            this[u] && this[h] && this[h].length && this[h].forEach(function (e) {
              return _this4[u](e.key, e.value);
            }), this[f] = new Map(), this[h] = new n(), this[o] = 0;
          }
        }, {
          key: "dump",
          value: function dump() {
            var _this5 = this;
            return this[h].map(function (e) {
              return !y(_this5, e) && {
                k: e.key,
                v: e.value,
                e: e.now + (e.maxAge || 0)
              };
            }).toArray().filter(function (e) {
              return e;
            });
          }
        }, {
          key: "dumpLru",
          value: function dumpLru() {
            return this[h];
          }
        }, {
          key: "set",
          value: function set(e, t, r) {
            if ((r = r || this[l]) && "number" != typeof r) throw new TypeError("maxAge must be a number");
            var n = r ? Date.now() : 0,
              a = this[s](t, e);
            if (this[f].has(e)) {
              if (a > this[i]) return m(this, this[f].get(e)), !1;
              var _s = this[f].get(e).value;
              return this[u] && (this[c] || this[u](e, _s.value)), _s.now = n, _s.maxAge = r, _s.value = t, this[o] += a - _s.length, _s.length = a, this.get(e), b(this), !0;
            }
            var p = new v(e, t, a, n, r);
            return p.length > this[i] ? (this[u] && this[u](e, t), !1) : (this[o] += p.length, this[h].unshift(p), this[f].set(e, this[h].head), b(this), !0);
          }
        }, {
          key: "has",
          value: function has(e) {
            if (!this[f].has(e)) return !1;
            var t = this[f].get(e).value;
            return !y(this, t);
          }
        }, {
          key: "get",
          value: function get(e) {
            return g(this, e, !0);
          }
        }, {
          key: "peek",
          value: function peek(e) {
            return g(this, e, !1);
          }
        }, {
          key: "pop",
          value: function pop() {
            var e = this[h].tail;
            return e ? (m(this, e), e.value) : null;
          }
        }, {
          key: "del",
          value: function del(e) {
            m(this, this[f].get(e));
          }
        }, {
          key: "load",
          value: function load(e) {
            this.reset();
            var t = Date.now();
            for (var _r18 = e.length - 1; _r18 >= 0; _r18--) {
              var _n7 = e[_r18],
                _i = _n7.e || 0;
              if (0 === _i) this.set(_n7.k, _n7.v);else {
                var _e21 = _i - t;
                _e21 > 0 && this.set(_n7.k, _n7.v, _e21);
              }
            }
          }
        }, {
          key: "prune",
          value: function prune() {
            var _this6 = this;
            this[f].forEach(function (e, t) {
              return g(_this6, t, !1);
            });
          }
        }]);
        return _class;
      }();
    }, {
      yallist: 83
    }],
    38: [function (e, t, r) {
      (function (e) {
        (function () {
          var r = t.exports;
          r.types = {
            0: "reserved",
            1: "connect",
            2: "connack",
            3: "publish",
            4: "puback",
            5: "pubrec",
            6: "pubrel",
            7: "pubcomp",
            8: "subscribe",
            9: "suback",
            10: "unsubscribe",
            11: "unsuback",
            12: "pingreq",
            13: "pingresp",
            14: "disconnect",
            15: "auth"
          }, r.codes = {};
          for (var _e22 in r.types) {
            var _t21 = r.types[_e22];
            r.codes[_t21] = _e22;
          }
          r.CMD_SHIFT = 4, r.CMD_MASK = 240, r.DUP_MASK = 8, r.QOS_MASK = 3, r.QOS_SHIFT = 1, r.RETAIN_MASK = 1, r.VARBYTEINT_MASK = 127, r.VARBYTEINT_FIN_MASK = 128, r.VARBYTEINT_MAX = 268435455, r.SESSIONPRESENT_MASK = 1, r.SESSIONPRESENT_HEADER = e.from([r.SESSIONPRESENT_MASK]), r.CONNACK_HEADER = e.from([r.codes.connack << r.CMD_SHIFT]), r.USERNAME_MASK = 128, r.PASSWORD_MASK = 64, r.WILL_RETAIN_MASK = 32, r.WILL_QOS_MASK = 24, r.WILL_QOS_SHIFT = 3, r.WILL_FLAG_MASK = 4, r.CLEAN_SESSION_MASK = 2, r.CONNECT_HEADER = e.from([r.codes.connect << r.CMD_SHIFT]), r.properties = {
            sessionExpiryInterval: 17,
            willDelayInterval: 24,
            receiveMaximum: 33,
            maximumPacketSize: 39,
            topicAliasMaximum: 34,
            requestResponseInformation: 25,
            requestProblemInformation: 23,
            userProperties: 38,
            authenticationMethod: 21,
            authenticationData: 22,
            payloadFormatIndicator: 1,
            messageExpiryInterval: 2,
            contentType: 3,
            responseTopic: 8,
            correlationData: 9,
            maximumQoS: 36,
            retainAvailable: 37,
            assignedClientIdentifier: 18,
            reasonString: 31,
            wildcardSubscriptionAvailable: 40,
            subscriptionIdentifiersAvailable: 41,
            sharedSubscriptionAvailable: 42,
            serverKeepAlive: 19,
            responseInformation: 26,
            serverReference: 28,
            topicAlias: 35,
            subscriptionIdentifier: 11
          }, r.propertiesCodes = {};
          for (var _e23 in r.properties) {
            var _t22 = r.properties[_e23];
            r.propertiesCodes[_t22] = _e23;
          }
          function n(t) {
            return [0, 1, 2].map(function (n) {
              return [0, 1].map(function (i) {
                return [0, 1].map(function (o) {
                  var s = e.alloc(1);
                  return s.writeUInt8(r.codes[t] << r.CMD_SHIFT | (i ? r.DUP_MASK : 0) | n << r.QOS_SHIFT | o, 0, !0), s;
                });
              });
            });
          }
          r.propertiesTypes = {
            sessionExpiryInterval: "int32",
            willDelayInterval: "int32",
            receiveMaximum: "int16",
            maximumPacketSize: "int32",
            topicAliasMaximum: "int16",
            requestResponseInformation: "byte",
            requestProblemInformation: "byte",
            userProperties: "pair",
            authenticationMethod: "string",
            authenticationData: "binary",
            payloadFormatIndicator: "byte",
            messageExpiryInterval: "int32",
            contentType: "string",
            responseTopic: "string",
            correlationData: "binary",
            maximumQoS: "int8",
            retainAvailable: "byte",
            assignedClientIdentifier: "string",
            reasonString: "string",
            wildcardSubscriptionAvailable: "byte",
            subscriptionIdentifiersAvailable: "byte",
            sharedSubscriptionAvailable: "byte",
            serverKeepAlive: "int16",
            responseInformation: "string",
            serverReference: "string",
            topicAlias: "int16",
            subscriptionIdentifier: "var"
          }, r.PUBLISH_HEADER = n("publish"), r.SUBSCRIBE_HEADER = n("subscribe"), r.SUBSCRIBE_OPTIONS_QOS_MASK = 3, r.SUBSCRIBE_OPTIONS_NL_MASK = 1, r.SUBSCRIBE_OPTIONS_NL_SHIFT = 2, r.SUBSCRIBE_OPTIONS_RAP_MASK = 1, r.SUBSCRIBE_OPTIONS_RAP_SHIFT = 3, r.SUBSCRIBE_OPTIONS_RH_MASK = 3, r.SUBSCRIBE_OPTIONS_RH_SHIFT = 4, r.SUBSCRIBE_OPTIONS_RH = [0, 16, 32], r.SUBSCRIBE_OPTIONS_NL = 4, r.SUBSCRIBE_OPTIONS_RAP = 8, r.SUBSCRIBE_OPTIONS_QOS = [0, 1, 2], r.UNSUBSCRIBE_HEADER = n("unsubscribe"), r.ACKS = {
            unsuback: n("unsuback"),
            puback: n("puback"),
            pubcomp: n("pubcomp"),
            pubrel: n("pubrel"),
            pubrec: n("pubrec")
          }, r.SUBACK_HEADER = e.from([r.codes.suback << r.CMD_SHIFT]), r.VERSION3 = e.from([3]), r.VERSION4 = e.from([4]), r.VERSION5 = e.from([5]), r.VERSION131 = e.from([131]), r.VERSION132 = e.from([132]), r.QOS = [0, 1, 2].map(function (t) {
            return e.from([t]);
          }), r.EMPTY = {
            pingreq: e.from([r.codes.pingreq << 4, 0]),
            pingresp: e.from([r.codes.pingresp << 4, 0]),
            disconnect: e.from([r.codes.disconnect << 4, 0])
          };
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      buffer: 17
    }],
    39: [function (e, t, r) {
      (function (r) {
        (function () {
          var n = e("./writeToStream"),
            i = e("events");
          var o = /*#__PURE__*/function (_i2) {
            "use strict";

            _inherits(o, _i2);
            var _super = _createSuper(o);
            function o() {
              var _this7;
              _classCallCheck(this, o);
              _this7 = _super.call(this), _this7._array = new Array(20), _this7._i = 0;
              return _this7;
            }
            _createClass(o, [{
              key: "write",
              value: function write(e) {
                return this._array[this._i++] = e, !0;
              }
            }, {
              key: "concat",
              value: function concat() {
                var e = 0;
                var t = new Array(this._array.length),
                  n = this._array;
                var i,
                  _o = 0;
                for (i = 0; i < n.length && void 0 !== n[i]; i++) "string" != typeof n[i] ? t[i] = n[i].length : t[i] = r.byteLength(n[i]), e += t[i];
                var s = r.allocUnsafe(e);
                for (i = 0; i < n.length && void 0 !== n[i]; i++) "string" != typeof n[i] ? (n[i].copy(s, _o), _o += t[i]) : (s.write(n[i], _o), _o += t[i]);
                return s;
              }
            }]);
            return o;
          }(i);
          t.exports = function (e, t) {
            var r = new o();
            return n(e, r, t), r.concat();
          };
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      "./writeToStream": 44,
      buffer: 17,
      events: 22
    }],
    40: [function (e, t, r) {
      r.parser = e("./parser").parser, r.generate = e("./generate"), r.writeToStream = e("./writeToStream");
    }, {
      "./generate": 39,
      "./parser": 43,
      "./writeToStream": 44
    }],
    41: [function (e, t, r) {
      (function (e) {
        (function () {
          var r = 65536,
            n = {},
            i = e.isBuffer(e.from([1, 2]).subarray(0, 1));
          function o(t) {
            var r = e.allocUnsafe(2);
            return r.writeUInt8(t >> 8, 0), r.writeUInt8(255 & t, 1), r;
          }
          t.exports = {
            cache: n,
            generateCache: function generateCache() {
              for (var _e24 = 0; _e24 < r; _e24++) n[_e24] = o(_e24);
            },
            generateNumber: o,
            genBufVariableByteInt: function genBufVariableByteInt(t) {
              var r = 0,
                n = 0;
              var o = e.allocUnsafe(4);
              do {
                r = t % 128 | 0, (t = t / 128 | 0) > 0 && (r |= 128), o.writeUInt8(r, n++);
              } while (t > 0 && n < 4);
              return t > 0 && (n = 0), i ? o.subarray(0, n) : o.slice(0, n);
            },
            generate4ByteBuffer: function generate4ByteBuffer(t) {
              var r = e.allocUnsafe(4);
              return r.writeUInt32BE(t, 0), r;
            }
          };
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      buffer: 17
    }],
    42: [function (e, t, r) {
      t.exports = /*#__PURE__*/function () {
        "use strict";

        function _class2() {
          _classCallCheck(this, _class2);
          this.cmd = null, this.retain = !1, this.qos = 0, this.dup = !1, this.length = -1, this.topic = null, this.payload = null;
        }
        return _createClass(_class2);
      }();
    }, {}],
    43: [function (e, t, r) {
      var n = e("bl"),
        i = e("events"),
        o = e("./packet"),
        s = e("./constants"),
        a = e("debug")("mqtt-packet:parser");
      var l = /*#__PURE__*/function (_i3) {
        "use strict";

        _inherits(l, _i3);
        var _super2 = _createSuper(l);
        function l() {
          var _this8;
          _classCallCheck(this, l);
          _this8 = _super2.call(this), _this8.parser = _this8.constructor.parser;
          return _this8;
        }
        _createClass(l, [{
          key: "_resetState",
          value: function _resetState() {
            a("_resetState: resetting packet, error, _list, and _stateCounter"), this.packet = new o(), this.error = null, this._list = n(), this._stateCounter = 0;
          }
        }, {
          key: "parse",
          value: function parse(e) {
            for (this.error && this._resetState(), this._list.append(e), a("parse: current state: %s", this._states[this._stateCounter]); (-1 !== this.packet.length || this._list.length > 0) && this[this._states[this._stateCounter]]() && !this.error;) this._stateCounter++, a("parse: state complete. _stateCounter is now: %d", this._stateCounter), a("parse: packet.length: %d, buffer list length: %d", this.packet.length, this._list.length), this._stateCounter >= this._states.length && (this._stateCounter = 0);
            return a("parse: exited while loop. packet: %d, buffer list length: %d", this.packet.length, this._list.length), this._list.length;
          }
        }, {
          key: "_parseHeader",
          value: function _parseHeader() {
            var e = this._list.readUInt8(0);
            return this.packet.cmd = s.types[e >> s.CMD_SHIFT], this.packet.retain = 0 != (e & s.RETAIN_MASK), this.packet.qos = e >> s.QOS_SHIFT & s.QOS_MASK, this.packet.dup = 0 != (e & s.DUP_MASK), a("_parseHeader: packet: %o", this.packet), this._list.consume(1), !0;
          }
        }, {
          key: "_parseLength",
          value: function _parseLength() {
            var e = this._parseVarByteNum(!0);
            return e && (this.packet.length = e.value, this._list.consume(e.bytes)), a("_parseLength %d", e.value), !!e;
          }
        }, {
          key: "_parsePayload",
          value: function _parsePayload() {
            a("_parsePayload: payload %O", this._list);
            var e = !1;
            if (0 === this.packet.length || this._list.length >= this.packet.length) {
              switch (this._pos = 0, this.packet.cmd) {
                case "connect":
                  this._parseConnect();
                  break;
                case "connack":
                  this._parseConnack();
                  break;
                case "publish":
                  this._parsePublish();
                  break;
                case "puback":
                case "pubrec":
                case "pubrel":
                case "pubcomp":
                  this._parseConfirmation();
                  break;
                case "subscribe":
                  this._parseSubscribe();
                  break;
                case "suback":
                  this._parseSuback();
                  break;
                case "unsubscribe":
                  this._parseUnsubscribe();
                  break;
                case "unsuback":
                  this._parseUnsuback();
                  break;
                case "pingreq":
                case "pingresp":
                  break;
                case "disconnect":
                  this._parseDisconnect();
                  break;
                case "auth":
                  this._parseAuth();
                  break;
                default:
                  this._emitError(new Error("Not supported"));
              }
              e = !0;
            }
            return a("_parsePayload complete result: %s", e), e;
          }
        }, {
          key: "_parseConnect",
          value: function _parseConnect() {
            var e, t, r, n;
            a("_parseConnect");
            var i = {},
              o = this.packet,
              _l = this._parseString();
            if (null === _l) return this._emitError(new Error("Cannot parse protocolId"));
            if ("MQTT" !== _l && "MQIsdp" !== _l) return this._emitError(new Error("Invalid protocolId"));
            if (o.protocolId = _l, this._pos >= this._list.length) return this._emitError(new Error("Packet too short"));
            if (o.protocolVersion = this._list.readUInt8(this._pos), o.protocolVersion >= 128 && (o.bridgeMode = !0, o.protocolVersion = o.protocolVersion - 128), 3 !== o.protocolVersion && 4 !== o.protocolVersion && 5 !== o.protocolVersion) return this._emitError(new Error("Invalid protocol version"));
            if (this._pos++, this._pos >= this._list.length) return this._emitError(new Error("Packet too short"));
            if (i.username = this._list.readUInt8(this._pos) & s.USERNAME_MASK, i.password = this._list.readUInt8(this._pos) & s.PASSWORD_MASK, i.will = this._list.readUInt8(this._pos) & s.WILL_FLAG_MASK, i.will && (o.will = {}, o.will.retain = 0 != (this._list.readUInt8(this._pos) & s.WILL_RETAIN_MASK), o.will.qos = (this._list.readUInt8(this._pos) & s.WILL_QOS_MASK) >> s.WILL_QOS_SHIFT), o.clean = 0 != (this._list.readUInt8(this._pos) & s.CLEAN_SESSION_MASK), this._pos++, o.keepalive = this._parseNum(), -1 === o.keepalive) return this._emitError(new Error("Packet too short"));
            if (5 === o.protocolVersion) {
              var _e25 = this._parseProperties();
              Object.getOwnPropertyNames(_e25).length && (o.properties = _e25);
            }
            var u = this._parseString();
            if (null === u) return this._emitError(new Error("Packet too short"));
            if (o.clientId = u, a("_parseConnect: packet.clientId: %s", o.clientId), i.will) {
              if (5 === o.protocolVersion) {
                var _e26 = this._parseProperties();
                Object.getOwnPropertyNames(_e26).length && (o.will.properties = _e26);
              }
              if (null === (e = this._parseString())) return this._emitError(new Error("Cannot parse will topic"));
              if (o.will.topic = e, a("_parseConnect: packet.will.topic: %s", o.will.topic), null === (t = this._parseBuffer())) return this._emitError(new Error("Cannot parse will payload"));
              o.will.payload = t, a("_parseConnect: packet.will.paylaod: %s", o.will.payload);
            }
            if (i.username) {
              if (null === (n = this._parseString())) return this._emitError(new Error("Cannot parse username"));
              o.username = n, a("_parseConnect: packet.username: %s", o.username);
            }
            if (i.password) {
              if (null === (r = this._parseBuffer())) return this._emitError(new Error("Cannot parse password"));
              o.password = r;
            }
            return this.settings = o, a("_parseConnect: complete"), o;
          }
        }, {
          key: "_parseConnack",
          value: function _parseConnack() {
            a("_parseConnack");
            var e = this.packet;
            if (this._list.length < 1) return null;
            if (e.sessionPresent = !!(this._list.readUInt8(this._pos++) & s.SESSIONPRESENT_MASK), 5 === this.settings.protocolVersion) this._list.length >= 2 ? e.reasonCode = this._list.readUInt8(this._pos++) : e.reasonCode = 0;else {
              if (this._list.length < 2) return null;
              e.returnCode = this._list.readUInt8(this._pos++);
            }
            if (-1 === e.returnCode || -1 === e.reasonCode) return this._emitError(new Error("Cannot parse return code"));
            if (5 === this.settings.protocolVersion) {
              var _t23 = this._parseProperties();
              Object.getOwnPropertyNames(_t23).length && (e.properties = _t23);
            }
            a("_parseConnack: complete");
          }
        }, {
          key: "_parsePublish",
          value: function _parsePublish() {
            a("_parsePublish");
            var e = this.packet;
            if (e.topic = this._parseString(), null === e.topic) return this._emitError(new Error("Cannot parse topic"));
            if (!(e.qos > 0) || this._parseMessageId()) {
              if (5 === this.settings.protocolVersion) {
                var _t24 = this._parseProperties();
                Object.getOwnPropertyNames(_t24).length && (e.properties = _t24);
              }
              e.payload = this._list.slice(this._pos, e.length), a("_parsePublish: payload from buffer list: %o", e.payload);
            }
          }
        }, {
          key: "_parseSubscribe",
          value: function _parseSubscribe() {
            a("_parseSubscribe");
            var e = this.packet;
            var t, r, n, i, o, _l2, u;
            if (1 !== e.qos) return this._emitError(new Error("Wrong subscribe header"));
            if (e.subscriptions = [], this._parseMessageId()) {
              if (5 === this.settings.protocolVersion) {
                var _t25 = this._parseProperties();
                Object.getOwnPropertyNames(_t25).length && (e.properties = _t25);
              }
              for (; this._pos < e.length;) {
                if (null === (t = this._parseString())) return this._emitError(new Error("Cannot parse topic"));
                if (this._pos >= e.length) return this._emitError(new Error("Malformed Subscribe Payload"));
                n = (r = this._parseByte()) & s.SUBSCRIBE_OPTIONS_QOS_MASK, _l2 = 0 != (r >> s.SUBSCRIBE_OPTIONS_NL_SHIFT & s.SUBSCRIBE_OPTIONS_NL_MASK), o = 0 != (r >> s.SUBSCRIBE_OPTIONS_RAP_SHIFT & s.SUBSCRIBE_OPTIONS_RAP_MASK), i = r >> s.SUBSCRIBE_OPTIONS_RH_SHIFT & s.SUBSCRIBE_OPTIONS_RH_MASK, u = {
                  topic: t,
                  qos: n
                }, 5 === this.settings.protocolVersion ? (u.nl = _l2, u.rap = o, u.rh = i) : this.settings.bridgeMode && (u.rh = 0, u.rap = !0, u.nl = !0), a("_parseSubscribe: push subscription `%s` to subscription", u), e.subscriptions.push(u);
              }
            }
          }
        }, {
          key: "_parseSuback",
          value: function _parseSuback() {
            a("_parseSuback");
            var e = this.packet;
            if (this.packet.granted = [], this._parseMessageId()) {
              if (5 === this.settings.protocolVersion) {
                var _t26 = this._parseProperties();
                Object.getOwnPropertyNames(_t26).length && (e.properties = _t26);
              }
              for (; this._pos < this.packet.length;) this.packet.granted.push(this._list.readUInt8(this._pos++));
            }
          }
        }, {
          key: "_parseUnsubscribe",
          value: function _parseUnsubscribe() {
            a("_parseUnsubscribe");
            var e = this.packet;
            if (e.unsubscriptions = [], this._parseMessageId()) {
              if (5 === this.settings.protocolVersion) {
                var _t27 = this._parseProperties();
                Object.getOwnPropertyNames(_t27).length && (e.properties = _t27);
              }
              for (; this._pos < e.length;) {
                var _t28 = this._parseString();
                if (null === _t28) return this._emitError(new Error("Cannot parse topic"));
                a("_parseUnsubscribe: push topic `%s` to unsubscriptions", _t28), e.unsubscriptions.push(_t28);
              }
            }
          }
        }, {
          key: "_parseUnsuback",
          value: function _parseUnsuback() {
            a("_parseUnsuback");
            var e = this.packet;
            if (!this._parseMessageId()) return this._emitError(new Error("Cannot parse messageId"));
            if (5 === this.settings.protocolVersion) {
              var _t29 = this._parseProperties();
              for (Object.getOwnPropertyNames(_t29).length && (e.properties = _t29), e.granted = []; this._pos < this.packet.length;) this.packet.granted.push(this._list.readUInt8(this._pos++));
            }
          }
        }, {
          key: "_parseConfirmation",
          value: function _parseConfirmation() {
            a("_parseConfirmation: packet.cmd: `%s`", this.packet.cmd);
            var e = this.packet;
            if (this._parseMessageId(), 5 === this.settings.protocolVersion && (e.length > 2 ? (e.reasonCode = this._parseByte(), a("_parseConfirmation: packet.reasonCode `%d`", e.reasonCode)) : e.reasonCode = 0, e.length > 3)) {
              var _t30 = this._parseProperties();
              Object.getOwnPropertyNames(_t30).length && (e.properties = _t30);
            }
            return !0;
          }
        }, {
          key: "_parseDisconnect",
          value: function _parseDisconnect() {
            var e = this.packet;
            if (a("_parseDisconnect"), 5 === this.settings.protocolVersion) {
              this._list.length > 0 ? e.reasonCode = this._parseByte() : e.reasonCode = 0;
              var _t31 = this._parseProperties();
              Object.getOwnPropertyNames(_t31).length && (e.properties = _t31);
            }
            return a("_parseDisconnect result: true"), !0;
          }
        }, {
          key: "_parseAuth",
          value: function _parseAuth() {
            a("_parseAuth");
            var e = this.packet;
            if (5 !== this.settings.protocolVersion) return this._emitError(new Error("Not supported auth packet for this version MQTT"));
            e.reasonCode = this._parseByte();
            var t = this._parseProperties();
            return Object.getOwnPropertyNames(t).length && (e.properties = t), a("_parseAuth: result: true"), !0;
          }
        }, {
          key: "_parseMessageId",
          value: function _parseMessageId() {
            var e = this.packet;
            return e.messageId = this._parseNum(), null === e.messageId ? (this._emitError(new Error("Cannot parse messageId")), !1) : (a("_parseMessageId: packet.messageId %d", e.messageId), !0);
          }
        }, {
          key: "_parseString",
          value: function _parseString(e) {
            var t = this._parseNum(),
              r = t + this._pos;
            if (-1 === t || r > this._list.length || r > this.packet.length) return null;
            var n = this._list.toString("utf8", this._pos, r);
            return this._pos += t, a("_parseString: result: %s", n), n;
          }
        }, {
          key: "_parseStringPair",
          value: function _parseStringPair() {
            return a("_parseStringPair"), {
              name: this._parseString(),
              value: this._parseString()
            };
          }
        }, {
          key: "_parseBuffer",
          value: function _parseBuffer() {
            var e = this._parseNum(),
              t = e + this._pos;
            if (-1 === e || t > this._list.length || t > this.packet.length) return null;
            var r = this._list.slice(this._pos, t);
            return this._pos += e, a("_parseBuffer: result: %o", r), r;
          }
        }, {
          key: "_parseNum",
          value: function _parseNum() {
            if (this._list.length - this._pos < 2) return -1;
            var e = this._list.readUInt16BE(this._pos);
            return this._pos += 2, a("_parseNum: result: %s", e), e;
          }
        }, {
          key: "_parse4ByteNum",
          value: function _parse4ByteNum() {
            if (this._list.length - this._pos < 4) return -1;
            var e = this._list.readUInt32BE(this._pos);
            return this._pos += 4, a("_parse4ByteNum: result: %s", e), e;
          }
        }, {
          key: "_parseVarByteNum",
          value: function _parseVarByteNum(e) {
            a("_parseVarByteNum");
            var t,
              r = 0,
              n = 1,
              i = 0,
              o = !1;
            var _l3 = this._pos ? this._pos : 0;
            for (; r < 4 && _l3 + r < this._list.length;) {
              if (i += n * ((t = this._list.readUInt8(_l3 + r++)) & s.VARBYTEINT_MASK), n *= 128, 0 == (t & s.VARBYTEINT_FIN_MASK)) {
                o = !0;
                break;
              }
              if (this._list.length <= r) break;
            }
            return !o && 4 === r && this._list.length >= r && this._emitError(new Error("Invalid variable byte integer")), _l3 && (this._pos += r), a("_parseVarByteNum: result: %o", o = !!o && (e ? {
              bytes: r,
              value: i
            } : i)), o;
          }
        }, {
          key: "_parseByte",
          value: function _parseByte() {
            var e;
            return this._pos < this._list.length && (e = this._list.readUInt8(this._pos), this._pos++), a("_parseByte: result: %o", e), e;
          }
        }, {
          key: "_parseByType",
          value: function _parseByType(e) {
            switch (a("_parseByType: type: %s", e), e) {
              case "byte":
                return 0 !== this._parseByte();
              case "int8":
                return this._parseByte();
              case "int16":
                return this._parseNum();
              case "int32":
                return this._parse4ByteNum();
              case "var":
                return this._parseVarByteNum();
              case "string":
                return this._parseString();
              case "pair":
                return this._parseStringPair();
              case "binary":
                return this._parseBuffer();
            }
          }
        }, {
          key: "_parseProperties",
          value: function _parseProperties() {
            a("_parseProperties");
            var e = this._parseVarByteNum(),
              t = this._pos + e,
              r = {};
            for (; this._pos < t;) {
              var _e27 = this._parseByte();
              if (!_e27) return this._emitError(new Error("Cannot parse property code type")), !1;
              var _t32 = s.propertiesCodes[_e27];
              if (!_t32) return this._emitError(new Error("Unknown property")), !1;
              if ("userProperties" !== _t32) r[_t32] ? Array.isArray(r[_t32]) ? r[_t32].push(this._parseByType(s.propertiesTypes[_t32])) : (r[_t32] = [r[_t32]], r[_t32].push(this._parseByType(s.propertiesTypes[_t32]))) : r[_t32] = this._parseByType(s.propertiesTypes[_t32]);else {
                r[_t32] || (r[_t32] = Object.create(null));
                var _e28 = this._parseByType(s.propertiesTypes[_t32]);
                if (r[_t32][_e28.name]) {
                  if (Array.isArray(r[_t32][_e28.name])) r[_t32][_e28.name].push(_e28.value);else {
                    var _n8 = r[_t32][_e28.name];
                    r[_t32][_e28.name] = [_n8], r[_t32][_e28.name].push(_e28.value);
                  }
                } else r[_t32][_e28.name] = _e28.value;
              }
            }
            return r;
          }
        }, {
          key: "_newPacket",
          value: function _newPacket() {
            return a("_newPacket"), this.packet && (this._list.consume(this.packet.length), a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d", this.packet.cmd, this.packet.payload, this.packet.length), this.emit("packet", this.packet)), a("_newPacket: new packet"), this.packet = new o(), this._pos = 0, !0;
          }
        }, {
          key: "_emitError",
          value: function _emitError(e) {
            a("_emitError"), this.error = e, this.emit("error", e);
          }
        }], [{
          key: "parser",
          value: function parser(e) {
            return this instanceof l ? (this.settings = e || {}, this._states = ["_parseHeader", "_parseLength", "_parsePayload", "_newPacket"], this._resetState(), this) : new l().parser(e);
          }
        }]);
        return l;
      }(i);
      t.exports = l;
    }, {
      "./constants": 38,
      "./packet": 42,
      bl: 15,
      debug: 18,
      events: 22
    }],
    44: [function (e, t, r) {
      (function (r) {
        (function () {
          var n = e("./constants"),
            i = r.allocUnsafe(0),
            o = r.from([0]),
            s = e("./numbers"),
            a = e("process-nextick-args").nextTick,
            l = e("debug")("mqtt-packet:writeToStream"),
            u = s.cache,
            c = s.generateNumber,
            h = s.generateCache,
            f = s.genBufVariableByteInt,
            p = s.generate4ByteBuffer;
          var d = k,
            g = !0;
          function y(e, t, s) {
            switch (l("generate called"), t.cork && (t.cork(), a(b, t)), g && (g = !1, h()), l("generate: packet.cmd: %s", e.cmd), e.cmd) {
              case "connect":
                return function (e, t, i) {
                  var o = e || {},
                    s = o.protocolId || "MQTT";
                  var a = o.protocolVersion || 4;
                  var l = o.will;
                  var u = o.clean;
                  var c = o.keepalive || 0,
                    h = o.clientId || "",
                    f = o.username,
                    p = o.password,
                    g = o.properties;
                  void 0 === u && (u = !0);
                  var y = 0;
                  if (!s || "string" != typeof s && !r.isBuffer(s)) return t.emit("error", new Error("Invalid protocolId")), !1;
                  y += s.length + 2;
                  if (3 !== a && 4 !== a && 5 !== a) return t.emit("error", new Error("Invalid protocol version")), !1;
                  y += 1;
                  if (("string" == typeof h || r.isBuffer(h)) && (h || a >= 4) && (h || u)) y += r.byteLength(h) + 2;else {
                    if (a < 4) return t.emit("error", new Error("clientId must be supplied before 3.1.1")), !1;
                    if (1 * u == 0) return t.emit("error", new Error("clientId must be given if cleanSession set to 0")), !1;
                  }
                  if ("number" != typeof c || c < 0 || c > 65535 || c % 1 != 0) return t.emit("error", new Error("Invalid keepalive")), !1;
                  y += 2;
                  if (y += 1, 5 === a) {
                    var b = C(t, g);
                    if (!b) return !1;
                    y += b.length;
                  }
                  if (l) {
                    if ("object" != _typeof(l)) return t.emit("error", new Error("Invalid will")), !1;
                    if (!l.topic || "string" != typeof l.topic) return t.emit("error", new Error("Invalid will topic")), !1;
                    if (y += r.byteLength(l.topic) + 2, y += 2, l.payload) {
                      if (!(l.payload.length >= 0)) return t.emit("error", new Error("Invalid will payload")), !1;
                      "string" == typeof l.payload ? y += r.byteLength(l.payload) : y += l.payload.length;
                    }
                    var m = {};
                    if (5 === a) {
                      if (!(m = C(t, l.properties))) return !1;
                      y += m.length;
                    }
                  }
                  var _ = !1;
                  if (null != f) {
                    if (!P(f)) return t.emit("error", new Error("Invalid username")), !1;
                    _ = !0, y += r.byteLength(f) + 2;
                  }
                  if (null != p) {
                    if (!_) return t.emit("error", new Error("Username is required to use password")), !1;
                    if (!P(p)) return t.emit("error", new Error("Invalid password")), !1;
                    y += I(p) + 2;
                  }
                  t.write(n.CONNECT_HEADER), v(t, y), E(t, s), o.bridgeMode && (a += 128);
                  t.write(131 === a ? n.VERSION131 : 132 === a ? n.VERSION132 : 4 === a ? n.VERSION4 : 5 === a ? n.VERSION5 : n.VERSION3);
                  var k = 0;
                  k |= null != f ? n.USERNAME_MASK : 0, k |= null != p ? n.PASSWORD_MASK : 0, k |= l && l.retain ? n.WILL_RETAIN_MASK : 0, k |= l && l.qos ? l.qos << n.WILL_QOS_SHIFT : 0, k |= l ? n.WILL_FLAG_MASK : 0, k |= u ? n.CLEAN_SESSION_MASK : 0, t.write(r.from([k])), d(t, c), 5 === a && b.write();
                  E(t, h), l && (5 === a && m.write(), w(t, l.topic), E(t, l.payload));
                  null != f && E(t, f);
                  null != p && E(t, p);
                  return !0;
                }(e, t);
              case "connack":
                return function (e, t, i) {
                  var s = i ? i.protocolVersion : 4,
                    a = e || {},
                    l = 5 === s ? a.reasonCode : a.returnCode,
                    u = a.properties;
                  var c = 2;
                  if ("number" != typeof l) return t.emit("error", new Error("Invalid return code")), !1;
                  var h = null;
                  if (5 === s) {
                    if (!(h = C(t, u))) return !1;
                    c += h.length;
                  }
                  t.write(n.CONNACK_HEADER), v(t, c), t.write(a.sessionPresent ? n.SESSIONPRESENT_HEADER : o), t.write(r.from([l])), null != h && h.write();
                  return !0;
                }(e, t, s);
              case "publish":
                return function (e, t, o) {
                  l("publish: packet: %o", e);
                  var s = o ? o.protocolVersion : 4,
                    a = e || {},
                    u = a.qos || 0,
                    c = a.retain ? n.RETAIN_MASK : 0,
                    h = a.topic,
                    f = a.payload || i,
                    p = a.messageId,
                    g = a.properties;
                  var y = 0;
                  if ("string" == typeof h) y += r.byteLength(h) + 2;else {
                    if (!r.isBuffer(h)) return t.emit("error", new Error("Invalid topic")), !1;
                    y += h.length + 2;
                  }
                  r.isBuffer(f) ? y += f.length : y += r.byteLength(f);
                  if (u && "number" != typeof p) return t.emit("error", new Error("Invalid messageId")), !1;
                  u && (y += 2);
                  var b = null;
                  if (5 === s) {
                    if (!(b = C(t, g))) return !1;
                    y += b.length;
                  }
                  t.write(n.PUBLISH_HEADER[u][a.dup ? 1 : 0][c ? 1 : 0]), v(t, y), d(t, I(h)), t.write(h), u > 0 && d(t, p);
                  null != b && b.write();
                  return l("publish: payload: %o", f), t.write(f);
                }(e, t, s);
              case "puback":
              case "pubrec":
              case "pubrel":
              case "pubcomp":
                return function (e, t, i) {
                  var o = i ? i.protocolVersion : 4,
                    s = e || {},
                    a = s.cmd || "puback",
                    l = s.messageId,
                    u = s.dup && "pubrel" === a ? n.DUP_MASK : 0;
                  var c = 0;
                  var h = s.reasonCode,
                    f = s.properties;
                  var p = 5 === o ? 3 : 2;
                  "pubrel" === a && (c = 1);
                  if ("number" != typeof l) return t.emit("error", new Error("Invalid messageId")), !1;
                  var g = null;
                  if (5 === o && "object" == _typeof(f)) {
                    if (!(g = T(t, f, i, p))) return !1;
                    p += g.length;
                  }
                  t.write(n.ACKS[a][c][u][0]), v(t, p), d(t, l), 5 === o && t.write(r.from([h]));
                  null !== g && g.write();
                  return !0;
                }(e, t, s);
              case "subscribe":
                return function (e, t, i) {
                  l("subscribe: packet: ");
                  var o = i ? i.protocolVersion : 4,
                    s = e || {},
                    a = s.dup ? n.DUP_MASK : 0,
                    u = s.messageId,
                    c = s.subscriptions,
                    h = s.properties;
                  var f = 0;
                  if ("number" != typeof u) return t.emit("error", new Error("Invalid messageId")), !1;
                  f += 2;
                  var p = null;
                  if (5 === o) {
                    if (!(p = C(t, h))) return !1;
                    f += p.length;
                  }
                  if ("object" != _typeof(c) || !c.length) return t.emit("error", new Error("Invalid subscriptions")), !1;
                  for (var _e29 = 0; _e29 < c.length; _e29 += 1) {
                    var _n9 = c[_e29].topic,
                      _i4 = c[_e29].qos;
                    if ("string" != typeof _n9) return t.emit("error", new Error("Invalid subscriptions - invalid topic")), !1;
                    if ("number" != typeof _i4) return t.emit("error", new Error("Invalid subscriptions - invalid qos")), !1;
                    if (5 === o) {
                      var _r19 = c[_e29].nl || !1;
                      if ("boolean" != typeof _r19) return t.emit("error", new Error("Invalid subscriptions - invalid No Local")), !1;
                      var _n10 = c[_e29].rap || !1;
                      if ("boolean" != typeof _n10) return t.emit("error", new Error("Invalid subscriptions - invalid Retain as Published")), !1;
                      var _i5 = c[_e29].rh || 0;
                      if ("number" != typeof _i5 || _i5 > 2) return t.emit("error", new Error("Invalid subscriptions - invalid Retain Handling")), !1;
                    }
                    f += r.byteLength(_n9) + 2 + 1;
                  }
                  l("subscribe: writing to stream: %o", n.SUBSCRIBE_HEADER), t.write(n.SUBSCRIBE_HEADER[1][a ? 1 : 0][0]), v(t, f), d(t, u), null !== p && p.write();
                  var g = !0;
                  var _iterator2 = _createForOfIteratorHelper(c),
                    _step2;
                  try {
                    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                      var _e30 = _step2.value;
                      var _i6 = _e30.topic,
                        _s2 = _e30.qos,
                        _a = +_e30.nl,
                        _l4 = +_e30.rap,
                        _u = _e30.rh;
                      var _c = void 0;
                      w(t, _i6), _c = n.SUBSCRIBE_OPTIONS_QOS[_s2], 5 === o && (_c |= _a ? n.SUBSCRIBE_OPTIONS_NL : 0, _c |= _l4 ? n.SUBSCRIBE_OPTIONS_RAP : 0, _c |= _u ? n.SUBSCRIBE_OPTIONS_RH[_u] : 0), g = t.write(r.from([_c]));
                    }
                  } catch (err) {
                    _iterator2.e(err);
                  } finally {
                    _iterator2.f();
                  }
                  return g;
                }(e, t, s);
              case "suback":
                return function (e, t, i) {
                  var o = i ? i.protocolVersion : 4,
                    s = e || {},
                    a = s.messageId,
                    l = s.granted,
                    u = s.properties;
                  var c = 0;
                  if ("number" != typeof a) return t.emit("error", new Error("Invalid messageId")), !1;
                  c += 2;
                  if ("object" != _typeof(l) || !l.length) return t.emit("error", new Error("Invalid qos vector")), !1;
                  for (var _e31 = 0; _e31 < l.length; _e31 += 1) {
                    if ("number" != typeof l[_e31]) return t.emit("error", new Error("Invalid qos vector")), !1;
                    c += 1;
                  }
                  var h = null;
                  if (5 === o) {
                    if (!(h = T(t, u, i, c))) return !1;
                    c += h.length;
                  }
                  t.write(n.SUBACK_HEADER), v(t, c), d(t, a), null !== h && h.write();
                  return t.write(r.from(l));
                }(e, t, s);
              case "unsubscribe":
                return function (e, t, i) {
                  var o = i ? i.protocolVersion : 4,
                    s = e || {},
                    a = s.messageId,
                    l = s.dup ? n.DUP_MASK : 0,
                    u = s.unsubscriptions,
                    c = s.properties;
                  var h = 0;
                  if ("number" != typeof a) return t.emit("error", new Error("Invalid messageId")), !1;
                  h += 2;
                  if ("object" != _typeof(u) || !u.length) return t.emit("error", new Error("Invalid unsubscriptions")), !1;
                  for (var _e32 = 0; _e32 < u.length; _e32 += 1) {
                    if ("string" != typeof u[_e32]) return t.emit("error", new Error("Invalid unsubscriptions")), !1;
                    h += r.byteLength(u[_e32]) + 2;
                  }
                  var f = null;
                  if (5 === o) {
                    if (!(f = C(t, c))) return !1;
                    h += f.length;
                  }
                  t.write(n.UNSUBSCRIBE_HEADER[1][l ? 1 : 0][0]), v(t, h), d(t, a), null !== f && f.write();
                  var p = !0;
                  for (var _e33 = 0; _e33 < u.length; _e33++) p = w(t, u[_e33]);
                  return p;
                }(e, t, s);
              case "unsuback":
                return function (e, t, i) {
                  var o = i ? i.protocolVersion : 4,
                    s = e || {},
                    a = s.messageId,
                    l = s.dup ? n.DUP_MASK : 0,
                    u = s.granted,
                    c = s.properties,
                    h = s.cmd;
                  var f = 2;
                  if ("number" != typeof a) return t.emit("error", new Error("Invalid messageId")), !1;
                  if (5 === o) {
                    if ("object" != _typeof(u) || !u.length) return t.emit("error", new Error("Invalid qos vector")), !1;
                    for (var _e34 = 0; _e34 < u.length; _e34 += 1) {
                      if ("number" != typeof u[_e34]) return t.emit("error", new Error("Invalid qos vector")), !1;
                      f += 1;
                    }
                  }
                  var p = null;
                  if (5 === o) {
                    if (!(p = T(t, c, i, f))) return !1;
                    f += p.length;
                  }
                  t.write(n.ACKS[h][0][l][0]), v(t, f), d(t, a), null !== p && p.write();
                  5 === o && t.write(r.from(u));
                  return !0;
                }(e, t, s);
              case "pingreq":
              case "pingresp":
                return function (e, t, r) {
                  return t.write(n.EMPTY[e.cmd]);
                }(e, t);
              case "disconnect":
                return function (e, t, i) {
                  var o = i ? i.protocolVersion : 4,
                    s = e || {},
                    a = s.reasonCode,
                    l = s.properties;
                  var u = 5 === o ? 1 : 0,
                    c = null;
                  if (5 === o) {
                    if (!(c = T(t, l, i, u))) return !1;
                    u += c.length;
                  }
                  t.write(r.from([n.codes.disconnect << 4])), v(t, u), 5 === o && t.write(r.from([a]));
                  null !== c && c.write();
                  return !0;
                }(e, t, s);
              case "auth":
                return function (e, t, i) {
                  var o = i ? i.protocolVersion : 4,
                    s = e || {},
                    a = s.reasonCode,
                    l = s.properties;
                  var u = 5 === o ? 1 : 0;
                  5 !== o && t.emit("error", new Error("Invalid mqtt version for auth packet"));
                  var c = T(t, l, i, u);
                  if (!c) return !1;
                  u += c.length, t.write(r.from([n.codes.auth << 4])), v(t, u), t.write(r.from([a])), null !== c && c.write();
                  return !0;
                }(e, t, s);
              default:
                return t.emit("error", new Error("Unknown command")), !1;
            }
          }
          function b(e) {
            e.uncork();
          }
          Object.defineProperty(y, "cacheNumbers", {
            get: function get() {
              return d === k;
            },
            set: function set(e) {
              e ? (u && 0 !== Object.keys(u).length || (g = !0), d = k) : (g = !1, d = S);
            }
          });
          var m = {};
          function v(e, t) {
            if (t > n.VARBYTEINT_MAX) return e.emit("error", new Error("Invalid variable byte integer: ".concat(t))), !1;
            var r = m[t];
            return r || (r = f(t), t < 16384 && (m[t] = r)), l("writeVarByteInt: writing to stream: %o", r), e.write(r);
          }
          function w(e, t) {
            var n = r.byteLength(t);
            return d(e, n), l("writeString: %s", t), e.write(t, "utf8");
          }
          function _(e, t, r) {
            w(e, t), w(e, r);
          }
          function k(e, t) {
            return l("writeNumberCached: number: %d", t), l("writeNumberCached: %o", u[t]), e.write(u[t]);
          }
          function S(e, t) {
            var r = c(t);
            return l("writeNumberGenerated: %o", r), e.write(r);
          }
          function E(e, t) {
            "string" == typeof t ? w(e, t) : t ? (d(e, t.length), e.write(t)) : d(e, 0);
          }
          function C(e, t) {
            if ("object" != _typeof(t) || null != t.length) return {
              length: 1,
              write: function write() {
                A(e, {}, 0);
              }
            };
            var i = 0;
            function o(t, i) {
              var o = 0;
              switch (n.propertiesTypes[t]) {
                case "byte":
                  if ("boolean" != typeof i) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += 2;
                  break;
                case "int8":
                  if ("number" != typeof i || i < 0 || i > 255) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += 2;
                  break;
                case "binary":
                  if (i && null === i) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += 1 + r.byteLength(i) + 2;
                  break;
                case "int16":
                  if ("number" != typeof i || i < 0 || i > 65535) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += 3;
                  break;
                case "int32":
                  if ("number" != typeof i || i < 0 || i > 4294967295) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += 5;
                  break;
                case "var":
                  if ("number" != typeof i || i < 0 || i > 268435455) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += 1 + r.byteLength(f(i));
                  break;
                case "string":
                  if ("string" != typeof i) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += 3 + r.byteLength(i.toString());
                  break;
                case "pair":
                  if ("object" != _typeof(i)) return e.emit("error", new Error("Invalid ".concat(t, ": ").concat(i))), !1;
                  o += Object.getOwnPropertyNames(i).reduce(function (e, t) {
                    var n = i[t];
                    return Array.isArray(n) ? e += n.reduce(function (e, n) {
                      return e += 3 + r.byteLength(t.toString()) + 2 + r.byteLength(n.toString());
                    }, 0) : e += 3 + r.byteLength(t.toString()) + 2 + r.byteLength(i[t].toString()), e;
                  }, 0);
                  break;
                default:
                  return e.emit("error", new Error("Invalid property ".concat(t, ": ").concat(i))), !1;
              }
              return o;
            }
            if (t) for (var _e35 in t) {
              var _r20 = 0,
                _n11 = 0;
              var _s3 = t[_e35];
              if (Array.isArray(_s3)) for (var _t33 = 0; _t33 < _s3.length; _t33++) {
                if (!(_n11 = o(_e35, _s3[_t33]))) return !1;
                _r20 += _n11;
              } else {
                if (!(_n11 = o(_e35, _s3))) return !1;
                _r20 = _n11;
              }
              if (!_r20) return !1;
              i += _r20;
            }
            return {
              length: r.byteLength(f(i)) + i,
              write: function write() {
                A(e, t, i);
              }
            };
          }
          function T(e, t, r, n) {
            var i = ["reasonString", "userProperties"],
              o = r && r.properties && r.properties.maximumPacketSize ? r.properties.maximumPacketSize : 0;
            var s = C(e, t);
            if (o) for (; n + s.length > o;) {
              var _r21 = i.shift();
              if (!_r21 || !t[_r21]) return !1;
              delete t[_r21], s = C(e, t);
            }
            return s;
          }
          function x(e, t, i) {
            switch (n.propertiesTypes[t]) {
              case "byte":
                e.write(r.from([n.properties[t]])), e.write(r.from([+i]));
                break;
              case "int8":
                e.write(r.from([n.properties[t]])), e.write(r.from([i]));
                break;
              case "binary":
                e.write(r.from([n.properties[t]])), E(e, i);
                break;
              case "int16":
                e.write(r.from([n.properties[t]])), d(e, i);
                break;
              case "int32":
                e.write(r.from([n.properties[t]])), function (e, t) {
                  var r = p(t);
                  l("write4ByteNumber: %o", r), e.write(r);
                }(e, i);
                break;
              case "var":
                e.write(r.from([n.properties[t]])), v(e, i);
                break;
              case "string":
                e.write(r.from([n.properties[t]])), w(e, i);
                break;
              case "pair":
                Object.getOwnPropertyNames(i).forEach(function (o) {
                  var s = i[o];
                  Array.isArray(s) ? s.forEach(function (i) {
                    e.write(r.from([n.properties[t]])), _(e, o.toString(), i.toString());
                  }) : (e.write(r.from([n.properties[t]])), _(e, o.toString(), s.toString()));
                });
                break;
              default:
                return e.emit("error", new Error("Invalid property ".concat(t, " value: ").concat(i))), !1;
            }
          }
          function A(e, t, r) {
            v(e, r);
            for (var _r22 in t) if (Object.prototype.hasOwnProperty.call(t, _r22) && null !== t[_r22]) {
              var _n12 = t[_r22];
              if (Array.isArray(_n12)) for (var _t34 = 0; _t34 < _n12.length; _t34++) x(e, _r22, _n12[_t34]);else x(e, _r22, _n12);
            }
          }
          function I(e) {
            return e ? e instanceof r ? e.length : r.byteLength(e) : 0;
          }
          function P(e) {
            return "string" == typeof e || e instanceof r;
          }
          t.exports = y;
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      "./constants": 38,
      "./numbers": 41,
      buffer: 17,
      debug: 18,
      "process-nextick-args": 49
    }],
    45: [function (e, t, r) {
      var n = 1e3,
        i = 60 * n,
        o = 60 * i,
        s = 24 * o,
        a = 7 * s,
        l = 365.25 * s;
      function u(e, t, r, n) {
        var i = t >= 1.5 * r;
        return Math.round(e / r) + " " + n + (i ? "s" : "");
      }
      t.exports = function (e, t) {
        t = t || {};
        var r = _typeof(e);
        if ("string" === r && e.length > 0) return function (e) {
          if ((e = String(e)).length > 100) return;
          var t = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);
          if (!t) return;
          var r = parseFloat(t[1]);
          switch ((t[2] || "ms").toLowerCase()) {
            case "years":
            case "year":
            case "yrs":
            case "yr":
            case "y":
              return r * l;
            case "weeks":
            case "week":
            case "w":
              return r * a;
            case "days":
            case "day":
            case "d":
              return r * s;
            case "hours":
            case "hour":
            case "hrs":
            case "hr":
            case "h":
              return r * o;
            case "minutes":
            case "minute":
            case "mins":
            case "min":
            case "m":
              return r * i;
            case "seconds":
            case "second":
            case "secs":
            case "sec":
            case "s":
              return r * n;
            case "milliseconds":
            case "millisecond":
            case "msecs":
            case "msec":
            case "ms":
              return r;
            default:
              return;
          }
        }(e);
        if ("number" === r && isFinite(e)) return t.long ? function (e) {
          var t = Math.abs(e);
          if (t >= s) return u(e, t, s, "day");
          if (t >= o) return u(e, t, o, "hour");
          if (t >= i) return u(e, t, i, "minute");
          if (t >= n) return u(e, t, n, "second");
          return e + " ms";
        }(e) : function (e) {
          var t = Math.abs(e);
          if (t >= s) return Math.round(e / s) + "d";
          if (t >= o) return Math.round(e / o) + "h";
          if (t >= i) return Math.round(e / i) + "m";
          if (t >= n) return Math.round(e / n) + "s";
          return e + "ms";
        }(e);
        throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(e));
      };
    }, {}],
    46: [function (e, t, r) {
      var n = e("./lib/number-allocator.js");
      t.exports.NumberAllocator = n;
    }, {
      "./lib/number-allocator.js": 47
    }],
    47: [function (e, t, r) {
      "use strict";

      var n = e("js-sdsl").Set,
        i = e("debug")("number-allocator:trace"),
        o = e("debug")("number-allocator:error");
      function s(e, t) {
        this.low = e, this.high = t;
      }
      function a(e, t) {
        if (!(this instanceof a)) return new a(e, t);
        this.min = e, this.max = t, this.ss = new n([], function (e, t) {
          return e.compare(t);
        }), i("Create"), this.clear();
      }
      s.prototype.equals = function (e) {
        return this.low === e.low && this.high === e.high;
      }, s.prototype.compare = function (e) {
        return this.low < e.low && this.high < e.low ? -1 : e.low < this.low && e.high < this.low ? 1 : 0;
      }, a.prototype.firstVacant = function () {
        return 0 === this.ss.size() ? null : this.ss.front().low;
      }, a.prototype.alloc = function () {
        if (0 === this.ss.size()) return i("alloc():empty"), null;
        var e = this.ss.front(),
          t = e.low;
        return t + 1 <= e.high ? ++e.low : this.ss.eraseElementByPos(0), i("alloc():" + t), t;
      }, a.prototype.use = function (e) {
        var t = new s(e, e),
          r = this.ss.lowerBound(t);
        if (r) {
          if (r.equals(t)) return this.ss.eraseElementByValue(r), i("use():" + e), !0;
          if (r.low > e) return !1;
          if (r.low === e) return ++r.low, i("use():" + e), !0;
          if (r.high === e) return --r.high, i("use():" + e), !0;
          var _n13 = r.low;
          return r.low = e + 1, this.ss.insert(new s(_n13, e - 1)), i("use():" + e), !0;
        }
        return i("use():failed"), !1;
      }, a.prototype.free = function (e) {
        if (e < this.min || e > this.max) return void o("free():" + e + " is out of range");
        var t = new s(e, e),
          r = this.ss.lowerBound(t);
        if (r) {
          if (r.low <= e && e <= r.high) return void o("free():" + e + " has already been vacant");
          if (r === this.ss.front()) e + 1 === r.low ? --r.low : this.ss.insert(t);else {
            var _n14 = this.ss.reverseLowerBound(t);
            _n14.high + 1 === e ? e + 1 === r.low ? (this.ss.eraseElementByValue(_n14), r.low = _n14.low) : _n14.high = e : e + 1 === r.low ? r.low = e : this.ss.insert(t);
          }
        } else {
          if (r === this.ss.front()) return void this.ss.insert(t);
          var _n15 = this.ss.reverseLowerBound(t);
          _n15.high + 1 === e ? _n15.high = e : this.ss.insert(t);
        }
        i("free():" + e);
      }, a.prototype.clear = function () {
        i("clear()"), this.ss.clear(), this.ss.insert(new s(this.min, this.max));
      }, a.prototype.intervalCount = function () {
        return this.ss.size();
      }, a.prototype.dump = function () {
        console.log("length:" + this.ss.size());
        var _iterator3 = _createForOfIteratorHelper(this.ss),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var _e36 = _step3.value;
            console.log(_e36);
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
      }, t.exports = a;
    }, {
      debug: 18,
      "js-sdsl": 36
    }],
    48: [function (e, t, r) {
      var n = e("wrappy");
      function i(e) {
        var t = function t() {
          return t.called ? t.value : (t.called = !0, t.value = e.apply(this, arguments));
        };
        return t.called = !1, t;
      }
      function o(e) {
        var t = function t() {
            if (t.called) throw new Error(t.onceError);
            return t.called = !0, t.value = e.apply(this, arguments);
          },
          r = e.name || "Function wrapped with `once`";
        return t.onceError = r + " shouldn't be called more than once", t.called = !1, t;
      }
      t.exports = n(i), t.exports.strict = n(o), i.proto = i(function () {
        Object.defineProperty(Function.prototype, "once", {
          value: function value() {
            return i(this);
          },
          configurable: !0
        }), Object.defineProperty(Function.prototype, "onceStrict", {
          value: function value() {
            return o(this);
          },
          configurable: !0
        });
      });
    }, {
      wrappy: 79
    }],
    49: [function (e, t, r) {
      (function (e) {
        (function () {
          "use strict";

          void 0 === e || !e.version || 0 === e.version.indexOf("v0.") || 0 === e.version.indexOf("v1.") && 0 !== e.version.indexOf("v1.8.") ? t.exports = {
            nextTick: function nextTick(t, r, n, i) {
              if ("function" != typeof t) throw new TypeError('"callback" argument must be a function');
              var o,
                s,
                a = arguments.length;
              switch (a) {
                case 0:
                case 1:
                  return e.nextTick(t);
                case 2:
                  return e.nextTick(function () {
                    t.call(null, r);
                  });
                case 3:
                  return e.nextTick(function () {
                    t.call(null, r, n);
                  });
                case 4:
                  return e.nextTick(function () {
                    t.call(null, r, n, i);
                  });
                default:
                  for (o = new Array(a - 1), s = 0; s < o.length;) o[s++] = arguments[s];
                  return e.nextTick(function () {
                    t.apply(null, o);
                  });
              }
            }
          } : t.exports = e;
        }).call(this);
      }).call(this, e("_process"));
    }, {
      _process: 50
    }],
    50: [function (e, t, r) {
      var n,
        i,
        o = t.exports = {};
      function s() {
        throw new Error("setTimeout has not been defined");
      }
      function a() {
        throw new Error("clearTimeout has not been defined");
      }
      function l(e) {
        if (n === setTimeout) return setTimeout(e, 0);
        if ((n === s || !n) && setTimeout) return n = setTimeout, setTimeout(e, 0);
        try {
          return n(e, 0);
        } catch (t) {
          try {
            return n.call(null, e, 0);
          } catch (t) {
            return n.call(this, e, 0);
          }
        }
      }
      !function () {
        try {
          n = "function" == typeof setTimeout ? setTimeout : s;
        } catch (e) {
          n = s;
        }
        try {
          i = "function" == typeof clearTimeout ? clearTimeout : a;
        } catch (e) {
          i = a;
        }
      }();
      var u,
        c = [],
        h = !1,
        f = -1;
      function p() {
        h && u && (h = !1, u.length ? c = u.concat(c) : f = -1, c.length && d());
      }
      function d() {
        if (!h) {
          var e = l(p);
          h = !0;
          for (var t = c.length; t;) {
            for (u = c, c = []; ++f < t;) u && u[f].run();
            f = -1, t = c.length;
          }
          u = null, h = !1, function (e) {
            if (i === clearTimeout) return clearTimeout(e);
            if ((i === a || !i) && clearTimeout) return i = clearTimeout, clearTimeout(e);
            try {
              i(e);
            } catch (t) {
              try {
                return i.call(null, e);
              } catch (t) {
                return i.call(this, e);
              }
            }
          }(e);
        }
      }
      function g(e, t) {
        this.fun = e, this.array = t;
      }
      function y() {}
      o.nextTick = function (e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1) for (var r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
        c.push(new g(e, t)), 1 !== c.length || h || l(d);
      }, g.prototype.run = function () {
        this.fun.apply(null, this.array);
      }, o.title = "browser", o.browser = !0, o.env = {}, o.argv = [], o.version = "", o.versions = {}, o.on = y, o.addListener = y, o.once = y, o.off = y, o.removeListener = y, o.removeAllListeners = y, o.emit = y, o.prependListener = y, o.prependOnceListener = y, o.listeners = function (e) {
        return [];
      }, o.binding = function (e) {
        throw new Error("process.binding is not supported");
      }, o.cwd = function () {
        return "/";
      }, o.chdir = function (e) {
        throw new Error("process.chdir is not supported");
      }, o.umask = function () {
        return 0;
      };
    }, {}],
    51: [function (e, t, r) {
      (function (e) {
        (function () {
          !function (n) {
            var i = "object" == _typeof(r) && r && !r.nodeType && r,
              o = "object" == _typeof(t) && t && !t.nodeType && t,
              s = "object" == _typeof(e) && e;
            s.global !== s && s.window !== s && s.self !== s || (n = s);
            var a,
              l,
              u = 2147483647,
              c = 36,
              h = 1,
              f = 26,
              p = 38,
              d = 700,
              g = 72,
              y = 128,
              b = "-",
              m = /^xn--/,
              v = /[^\x20-\x7E]/,
              w = /[\x2E\u3002\uFF0E\uFF61]/g,
              _ = {
                overflow: "Overflow: input needs wider integers to process",
                "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                "invalid-input": "Invalid input"
              },
              k = c - h,
              S = Math.floor,
              E = String.fromCharCode;
            function C(e) {
              throw new RangeError(_[e]);
            }
            function T(e, t) {
              for (var r = e.length, n = []; r--;) n[r] = t(e[r]);
              return n;
            }
            function x(e, t) {
              var r = e.split("@"),
                n = "";
              return r.length > 1 && (n = r[0] + "@", e = r[1]), n + T((e = e.replace(w, ".")).split("."), t).join(".");
            }
            function A(e) {
              for (var t, r, n = [], i = 0, o = e.length; i < o;) (t = e.charCodeAt(i++)) >= 55296 && t <= 56319 && i < o ? 56320 == (64512 & (r = e.charCodeAt(i++))) ? n.push(((1023 & t) << 10) + (1023 & r) + 65536) : (n.push(t), i--) : n.push(t);
              return n;
            }
            function I(e) {
              return T(e, function (e) {
                var t = "";
                return e > 65535 && (t += E((e -= 65536) >>> 10 & 1023 | 55296), e = 56320 | 1023 & e), t += E(e);
              }).join("");
            }
            function P(e, t) {
              return e + 22 + 75 * (e < 26) - ((0 != t) << 5);
            }
            function O(e, t, r) {
              var n = 0;
              for (e = r ? S(e / d) : e >> 1, e += S(e / t); e > k * f >> 1; n += c) e = S(e / k);
              return S(n + (k + 1) * e / (e + p));
            }
            function B(e) {
              var t,
                r,
                n,
                i,
                o,
                s,
                a,
                l,
                p,
                d,
                m,
                v = [],
                w = e.length,
                _ = 0,
                k = y,
                E = g;
              for ((r = e.lastIndexOf(b)) < 0 && (r = 0), n = 0; n < r; ++n) e.charCodeAt(n) >= 128 && C("not-basic"), v.push(e.charCodeAt(n));
              for (i = r > 0 ? r + 1 : 0; i < w;) {
                for (o = _, s = 1, a = c; i >= w && C("invalid-input"), ((l = (m = e.charCodeAt(i++)) - 48 < 10 ? m - 22 : m - 65 < 26 ? m - 65 : m - 97 < 26 ? m - 97 : c) >= c || l > S((u - _) / s)) && C("overflow"), _ += l * s, !(l < (p = a <= E ? h : a >= E + f ? f : a - E)); a += c) s > S(u / (d = c - p)) && C("overflow"), s *= d;
                E = O(_ - o, t = v.length + 1, 0 == o), S(_ / t) > u - k && C("overflow"), k += S(_ / t), _ %= t, v.splice(_++, 0, k);
              }
              return I(v);
            }
            function R(e) {
              var t,
                r,
                n,
                i,
                o,
                s,
                a,
                l,
                p,
                d,
                m,
                v,
                w,
                _,
                k,
                T = [];
              for (v = (e = A(e)).length, t = y, r = 0, o = g, s = 0; s < v; ++s) (m = e[s]) < 128 && T.push(E(m));
              for (n = i = T.length, i && T.push(b); n < v;) {
                for (a = u, s = 0; s < v; ++s) (m = e[s]) >= t && m < a && (a = m);
                for (a - t > S((u - r) / (w = n + 1)) && C("overflow"), r += (a - t) * w, t = a, s = 0; s < v; ++s) if ((m = e[s]) < t && ++r > u && C("overflow"), m == t) {
                  for (l = r, p = c; !(l < (d = p <= o ? h : p >= o + f ? f : p - o)); p += c) k = l - d, _ = c - d, T.push(E(P(d + k % _, 0))), l = S(k / _);
                  T.push(E(P(l, 0))), o = O(r, w, n == i), r = 0, ++n;
                }
                ++r, ++t;
              }
              return T.join("");
            }
            if (a = {
              version: "1.4.1",
              ucs2: {
                decode: A,
                encode: I
              },
              decode: B,
              encode: R,
              toASCII: function toASCII(e) {
                return x(e, function (e) {
                  return v.test(e) ? "xn--" + R(e) : e;
                });
              },
              toUnicode: function toUnicode(e) {
                return x(e, function (e) {
                  return m.test(e) ? B(e.slice(4).toLowerCase()) : e;
                });
              }
            }, i && o) {
              if (t.exports == i) o.exports = a;else for (l in a) a.hasOwnProperty(l) && (i[l] = a[l]);
            } else n.punycode = a;
          }(this);
        }).call(this);
      }).call(this, "undefined" != typeof __webpack_require__.g ? __webpack_require__.g : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }, {}],
    52: [function (e, t, r) {
      "use strict";

      function n(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t);
      }
      t.exports = function (e, t, r, o) {
        t = t || "&", r = r || "=";
        var s = {};
        if ("string" != typeof e || 0 === e.length) return s;
        var a = /\+/g;
        e = e.split(t);
        var l = 1e3;
        o && "number" == typeof o.maxKeys && (l = o.maxKeys);
        var u = e.length;
        l > 0 && u > l && (u = l);
        for (var c = 0; c < u; ++c) {
          var h,
            f,
            p,
            d,
            g = e[c].replace(a, "%20"),
            y = g.indexOf(r);
          y >= 0 ? (h = g.substr(0, y), f = g.substr(y + 1)) : (h = g, f = ""), p = decodeURIComponent(h), d = decodeURIComponent(f), n(s, p) ? i(s[p]) ? s[p].push(d) : s[p] = [s[p], d] : s[p] = d;
        }
        return s;
      };
      var i = Array.isArray || function (e) {
        return "[object Array]" === Object.prototype.toString.call(e);
      };
    }, {}],
    53: [function (e, t, r) {
      "use strict";

      var n = function n(e) {
        switch (_typeof(e)) {
          case "string":
            return e;
          case "boolean":
            return e ? "true" : "false";
          case "number":
            return isFinite(e) ? e : "";
          default:
            return "";
        }
      };
      t.exports = function (e, t, r, a) {
        return t = t || "&", r = r || "=", null === e && (e = void 0), "object" == _typeof(e) ? o(s(e), function (s) {
          var a = encodeURIComponent(n(s)) + r;
          return i(e[s]) ? o(e[s], function (e) {
            return a + encodeURIComponent(n(e));
          }).join(t) : a + encodeURIComponent(n(e[s]));
        }).join(t) : a ? encodeURIComponent(n(a)) + r + encodeURIComponent(n(e)) : "";
      };
      var i = Array.isArray || function (e) {
        return "[object Array]" === Object.prototype.toString.call(e);
      };
      function o(e, t) {
        if (e.map) return e.map(t);
        for (var r = [], n = 0; n < e.length; n++) r.push(t(e[n], n));
        return r;
      }
      var s = Object.keys || function (e) {
        var t = [];
        for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.push(r);
        return t;
      };
    }, {}],
    54: [function (e, t, r) {
      "use strict";

      r.decode = r.parse = e("./decode"), r.encode = r.stringify = e("./encode");
    }, {
      "./decode": 52,
      "./encode": 53
    }],
    55: [function (e, t, r) {
      "use strict";

      var n = {};
      function i(e, t, r) {
        r || (r = Error);
        var i = function (e) {
          var r, n;
          function i(r, n, i) {
            return e.call(this, function (e, r, n) {
              return "string" == typeof t ? t : t(e, r, n);
            }(r, n, i)) || this;
          }
          return n = e, (r = i).prototype = Object.create(n.prototype), r.prototype.constructor = r, r.__proto__ = n, i;
        }(r);
        i.prototype.name = r.name, i.prototype.code = e, n[e] = i;
      }
      function o(e, t) {
        if (Array.isArray(e)) {
          var r = e.length;
          return e = e.map(function (e) {
            return String(e);
          }), r > 2 ? "one of ".concat(t, " ").concat(e.slice(0, r - 1).join(", "), ", or ") + e[r - 1] : 2 === r ? "one of ".concat(t, " ").concat(e[0], " or ").concat(e[1]) : "of ".concat(t, " ").concat(e[0]);
        }
        return "of ".concat(t, " ").concat(String(e));
      }
      i("ERR_INVALID_OPT_VALUE", function (e, t) {
        return 'The value "' + t + '" is invalid for option "' + e + '"';
      }, TypeError), i("ERR_INVALID_ARG_TYPE", function (e, t, r) {
        var n, i, s, a;
        if ("string" == typeof t && (i = "not ", t.substr(!s || s < 0 ? 0 : +s, i.length) === i) ? (n = "must not be", t = t.replace(/^not /, "")) : n = "must be", function (e, t, r) {
          return (void 0 === r || r > e.length) && (r = e.length), e.substring(r - t.length, r) === t;
        }(e, " argument")) a = "The ".concat(e, " ").concat(n, " ").concat(o(t, "type"));else {
          var l = function (e, t, r) {
            return "number" != typeof r && (r = 0), !(r + t.length > e.length) && -1 !== e.indexOf(t, r);
          }(e, ".") ? "property" : "argument";
          a = 'The "'.concat(e, '" ').concat(l, " ").concat(n, " ").concat(o(t, "type"));
        }
        return a += ". Received type ".concat(_typeof(r));
      }, TypeError), i("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF"), i("ERR_METHOD_NOT_IMPLEMENTED", function (e) {
        return "The " + e + " method is not implemented";
      }), i("ERR_STREAM_PREMATURE_CLOSE", "Premature close"), i("ERR_STREAM_DESTROYED", function (e) {
        return "Cannot call " + e + " after a stream was destroyed";
      }), i("ERR_MULTIPLE_CALLBACK", "Callback called multiple times"), i("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable"), i("ERR_STREAM_WRITE_AFTER_END", "write after end"), i("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError), i("ERR_UNKNOWN_ENCODING", function (e) {
        return "Unknown encoding: " + e;
      }, TypeError), i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event"), t.exports.codes = n;
    }, {}],
    56: [function (e, t, r) {
      (function (r) {
        (function () {
          "use strict";

          var n = Object.keys || function (e) {
            var t = [];
            for (var r in e) t.push(r);
            return t;
          };
          t.exports = u;
          var i = e("./_stream_readable"),
            o = e("./_stream_writable");
          e("inherits")(u, i);
          for (var s = n(o.prototype), a = 0; a < s.length; a++) {
            var l = s[a];
            u.prototype[l] || (u.prototype[l] = o.prototype[l]);
          }
          function u(e) {
            if (!(this instanceof u)) return new u(e);
            i.call(this, e), o.call(this, e), this.allowHalfOpen = !0, e && (!1 === e.readable && (this.readable = !1), !1 === e.writable && (this.writable = !1), !1 === e.allowHalfOpen && (this.allowHalfOpen = !1, this.once("end", c)));
          }
          function c() {
            this._writableState.ended || r.nextTick(h, this);
          }
          function h(e) {
            e.end();
          }
          Object.defineProperty(u.prototype, "writableHighWaterMark", {
            enumerable: !1,
            get: function get() {
              return this._writableState.highWaterMark;
            }
          }), Object.defineProperty(u.prototype, "writableBuffer", {
            enumerable: !1,
            get: function get() {
              return this._writableState && this._writableState.getBuffer();
            }
          }), Object.defineProperty(u.prototype, "writableLength", {
            enumerable: !1,
            get: function get() {
              return this._writableState.length;
            }
          }), Object.defineProperty(u.prototype, "destroyed", {
            enumerable: !1,
            get: function get() {
              return void 0 !== this._readableState && void 0 !== this._writableState && this._readableState.destroyed && this._writableState.destroyed;
            },
            set: function set(e) {
              void 0 !== this._readableState && void 0 !== this._writableState && (this._readableState.destroyed = e, this._writableState.destroyed = e);
            }
          });
        }).call(this);
      }).call(this, e("_process"));
    }, {
      "./_stream_readable": 58,
      "./_stream_writable": 60,
      _process: 50,
      inherits: 24
    }],
    57: [function (e, t, r) {
      "use strict";

      t.exports = i;
      var n = e("./_stream_transform");
      function i(e) {
        if (!(this instanceof i)) return new i(e);
        n.call(this, e);
      }
      e("inherits")(i, n), i.prototype._transform = function (e, t, r) {
        r(null, e);
      };
    }, {
      "./_stream_transform": 59,
      inherits: 24
    }],
    58: [function (e, t, r) {
      (function (r, n) {
        (function () {
          "use strict";

          var i;
          t.exports = C, C.ReadableState = E;
          e("events").EventEmitter;
          var o = function o(e, t) {
              return e.listeners(t).length;
            },
            s = e("./internal/streams/stream"),
            a = e("buffer").Buffer,
            l = n.Uint8Array || function () {};
          var u,
            c = e("util");
          u = c && c.debuglog ? c.debuglog("stream") : function () {};
          var h,
            f,
            p,
            d = e("./internal/streams/buffer_list"),
            g = e("./internal/streams/destroy"),
            y = e("./internal/streams/state").getHighWaterMark,
            b = e("../errors").codes,
            m = b.ERR_INVALID_ARG_TYPE,
            v = b.ERR_STREAM_PUSH_AFTER_EOF,
            w = b.ERR_METHOD_NOT_IMPLEMENTED,
            _ = b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;
          e("inherits")(C, s);
          var k = g.errorOrDestroy,
            S = ["error", "close", "destroy", "pause", "resume"];
          function E(t, r, n) {
            i = i || e("./_stream_duplex"), t = t || {}, "boolean" != typeof n && (n = r instanceof i), this.objectMode = !!t.objectMode, n && (this.objectMode = this.objectMode || !!t.readableObjectMode), this.highWaterMark = y(this, t, "readableHighWaterMark", n), this.buffer = new d(), this.length = 0, this.pipes = null, this.pipesCount = 0, this.flowing = null, this.ended = !1, this.endEmitted = !1, this.reading = !1, this.sync = !0, this.needReadable = !1, this.emittedReadable = !1, this.readableListening = !1, this.resumeScheduled = !1, this.paused = !0, this.emitClose = !1 !== t.emitClose, this.autoDestroy = !!t.autoDestroy, this.destroyed = !1, this.defaultEncoding = t.defaultEncoding || "utf8", this.awaitDrain = 0, this.readingMore = !1, this.decoder = null, this.encoding = null, t.encoding && (h || (h = e("string_decoder/").StringDecoder), this.decoder = new h(t.encoding), this.encoding = t.encoding);
          }
          function C(t) {
            if (i = i || e("./_stream_duplex"), !(this instanceof C)) return new C(t);
            var r = this instanceof i;
            this._readableState = new E(t, this, r), this.readable = !0, t && ("function" == typeof t.read && (this._read = t.read), "function" == typeof t.destroy && (this._destroy = t.destroy)), s.call(this);
          }
          function T(e, t, r, n, i) {
            u("readableAddChunk", t);
            var o,
              s = e._readableState;
            if (null === t) s.reading = !1, function (e, t) {
              if (u("onEofChunk"), t.ended) return;
              if (t.decoder) {
                var r = t.decoder.end();
                r && r.length && (t.buffer.push(r), t.length += t.objectMode ? 1 : r.length);
              }
              t.ended = !0, t.sync ? P(e) : (t.needReadable = !1, t.emittedReadable || (t.emittedReadable = !0, O(e)));
            }(e, s);else if (i || (o = function (e, t) {
              var r;
              n = t, a.isBuffer(n) || n instanceof l || "string" == typeof t || void 0 === t || e.objectMode || (r = new m("chunk", ["string", "Buffer", "Uint8Array"], t));
              var n;
              return r;
            }(s, t)), o) k(e, o);else if (s.objectMode || t && t.length > 0) {
              if ("string" == typeof t || s.objectMode || Object.getPrototypeOf(t) === a.prototype || (t = function (e) {
                return a.from(e);
              }(t)), n) s.endEmitted ? k(e, new _()) : x(e, s, t, !0);else if (s.ended) k(e, new v());else {
                if (s.destroyed) return !1;
                s.reading = !1, s.decoder && !r ? (t = s.decoder.write(t), s.objectMode || 0 !== t.length ? x(e, s, t, !1) : B(e, s)) : x(e, s, t, !1);
              }
            } else n || (s.reading = !1, B(e, s));
            return !s.ended && (s.length < s.highWaterMark || 0 === s.length);
          }
          function x(e, t, r, n) {
            t.flowing && 0 === t.length && !t.sync ? (t.awaitDrain = 0, e.emit("data", r)) : (t.length += t.objectMode ? 1 : r.length, n ? t.buffer.unshift(r) : t.buffer.push(r), t.needReadable && P(e)), B(e, t);
          }
          Object.defineProperty(C.prototype, "destroyed", {
            enumerable: !1,
            get: function get() {
              return void 0 !== this._readableState && this._readableState.destroyed;
            },
            set: function set(e) {
              this._readableState && (this._readableState.destroyed = e);
            }
          }), C.prototype.destroy = g.destroy, C.prototype._undestroy = g.undestroy, C.prototype._destroy = function (e, t) {
            t(e);
          }, C.prototype.push = function (e, t) {
            var r,
              n = this._readableState;
            return n.objectMode ? r = !0 : "string" == typeof e && ((t = t || n.defaultEncoding) !== n.encoding && (e = a.from(e, t), t = ""), r = !0), T(this, e, t, !1, r);
          }, C.prototype.unshift = function (e) {
            return T(this, e, null, !0, !1);
          }, C.prototype.isPaused = function () {
            return !1 === this._readableState.flowing;
          }, C.prototype.setEncoding = function (t) {
            h || (h = e("string_decoder/").StringDecoder);
            var r = new h(t);
            this._readableState.decoder = r, this._readableState.encoding = this._readableState.decoder.encoding;
            for (var n = this._readableState.buffer.head, i = ""; null !== n;) i += r.write(n.data), n = n.next;
            return this._readableState.buffer.clear(), "" !== i && this._readableState.buffer.push(i), this._readableState.length = i.length, this;
          };
          var A = 1073741824;
          function I(e, t) {
            return e <= 0 || 0 === t.length && t.ended ? 0 : t.objectMode ? 1 : e != e ? t.flowing && t.length ? t.buffer.head.data.length : t.length : (e > t.highWaterMark && (t.highWaterMark = function (e) {
              return e >= A ? e = A : (e--, e |= e >>> 1, e |= e >>> 2, e |= e >>> 4, e |= e >>> 8, e |= e >>> 16, e++), e;
            }(e)), e <= t.length ? e : t.ended ? t.length : (t.needReadable = !0, 0));
          }
          function P(e) {
            var t = e._readableState;
            u("emitReadable", t.needReadable, t.emittedReadable), t.needReadable = !1, t.emittedReadable || (u("emitReadable", t.flowing), t.emittedReadable = !0, r.nextTick(O, e));
          }
          function O(e) {
            var t = e._readableState;
            u("emitReadable_", t.destroyed, t.length, t.ended), t.destroyed || !t.length && !t.ended || (e.emit("readable"), t.emittedReadable = !1), t.needReadable = !t.flowing && !t.ended && t.length <= t.highWaterMark, j(e);
          }
          function B(e, t) {
            t.readingMore || (t.readingMore = !0, r.nextTick(R, e, t));
          }
          function R(e, t) {
            for (; !t.reading && !t.ended && (t.length < t.highWaterMark || t.flowing && 0 === t.length);) {
              var r = t.length;
              if (u("maybeReadMore read 0"), e.read(0), r === t.length) break;
            }
            t.readingMore = !1;
          }
          function M(e) {
            var t = e._readableState;
            t.readableListening = e.listenerCount("readable") > 0, t.resumeScheduled && !t.paused ? t.flowing = !0 : e.listenerCount("data") > 0 && e.resume();
          }
          function N(e) {
            u("readable nexttick read 0"), e.read(0);
          }
          function L(e, t) {
            u("resume", t.reading), t.reading || e.read(0), t.resumeScheduled = !1, e.emit("resume"), j(e), t.flowing && !t.reading && e.read(0);
          }
          function j(e) {
            var t = e._readableState;
            for (u("flow", t.flowing); t.flowing && null !== e.read(););
          }
          function U(e, t) {
            return 0 === t.length ? null : (t.objectMode ? r = t.buffer.shift() : !e || e >= t.length ? (r = t.decoder ? t.buffer.join("") : 1 === t.buffer.length ? t.buffer.first() : t.buffer.concat(t.length), t.buffer.clear()) : r = t.buffer.consume(e, t.decoder), r);
            var r;
          }
          function q(e) {
            var t = e._readableState;
            u("endReadable", t.endEmitted), t.endEmitted || (t.ended = !0, r.nextTick(D, t, e));
          }
          function D(e, t) {
            if (u("endReadableNT", e.endEmitted, e.length), !e.endEmitted && 0 === e.length && (e.endEmitted = !0, t.readable = !1, t.emit("end"), e.autoDestroy)) {
              var r = t._writableState;
              (!r || r.autoDestroy && r.finished) && t.destroy();
            }
          }
          function z(e, t) {
            for (var r = 0, n = e.length; r < n; r++) if (e[r] === t) return r;
            return -1;
          }
          C.prototype.read = function (e) {
            u("read", e), e = parseInt(e, 10);
            var t = this._readableState,
              r = e;
            if (0 !== e && (t.emittedReadable = !1), 0 === e && t.needReadable && ((0 !== t.highWaterMark ? t.length >= t.highWaterMark : t.length > 0) || t.ended)) return u("read: emitReadable", t.length, t.ended), 0 === t.length && t.ended ? q(this) : P(this), null;
            if (0 === (e = I(e, t)) && t.ended) return 0 === t.length && q(this), null;
            var n,
              i = t.needReadable;
            return u("need readable", i), (0 === t.length || t.length - e < t.highWaterMark) && u("length less than watermark", i = !0), t.ended || t.reading ? u("reading or ended", i = !1) : i && (u("do read"), t.reading = !0, t.sync = !0, 0 === t.length && (t.needReadable = !0), this._read(t.highWaterMark), t.sync = !1, t.reading || (e = I(r, t))), null === (n = e > 0 ? U(e, t) : null) ? (t.needReadable = t.length <= t.highWaterMark, e = 0) : (t.length -= e, t.awaitDrain = 0), 0 === t.length && (t.ended || (t.needReadable = !0), r !== e && t.ended && q(this)), null !== n && this.emit("data", n), n;
          }, C.prototype._read = function (e) {
            k(this, new w("_read()"));
          }, C.prototype.pipe = function (e, t) {
            var n = this,
              i = this._readableState;
            switch (i.pipesCount) {
              case 0:
                i.pipes = e;
                break;
              case 1:
                i.pipes = [i.pipes, e];
                break;
              default:
                i.pipes.push(e);
            }
            i.pipesCount += 1, u("pipe count=%d opts=%j", i.pipesCount, t);
            var s = (!t || !1 !== t.end) && e !== r.stdout && e !== r.stderr ? l : y;
            function a(t, r) {
              u("onunpipe"), t === n && r && !1 === r.hasUnpiped && (r.hasUnpiped = !0, u("cleanup"), e.removeListener("close", d), e.removeListener("finish", g), e.removeListener("drain", c), e.removeListener("error", p), e.removeListener("unpipe", a), n.removeListener("end", l), n.removeListener("end", y), n.removeListener("data", f), h = !0, !i.awaitDrain || e._writableState && !e._writableState.needDrain || c());
            }
            function l() {
              u("onend"), e.end();
            }
            i.endEmitted ? r.nextTick(s) : n.once("end", s), e.on("unpipe", a);
            var c = function (e) {
              return function () {
                var t = e._readableState;
                u("pipeOnDrain", t.awaitDrain), t.awaitDrain && t.awaitDrain--, 0 === t.awaitDrain && o(e, "data") && (t.flowing = !0, j(e));
              };
            }(n);
            e.on("drain", c);
            var h = !1;
            function f(t) {
              u("ondata");
              var r = e.write(t);
              u("dest.write", r), !1 === r && ((1 === i.pipesCount && i.pipes === e || i.pipesCount > 1 && -1 !== z(i.pipes, e)) && !h && (u("false write response, pause", i.awaitDrain), i.awaitDrain++), n.pause());
            }
            function p(t) {
              u("onerror", t), y(), e.removeListener("error", p), 0 === o(e, "error") && k(e, t);
            }
            function d() {
              e.removeListener("finish", g), y();
            }
            function g() {
              u("onfinish"), e.removeListener("close", d), y();
            }
            function y() {
              u("unpipe"), n.unpipe(e);
            }
            return n.on("data", f), function (e, t, r) {
              if ("function" == typeof e.prependListener) return e.prependListener(t, r);
              e._events && e._events[t] ? Array.isArray(e._events[t]) ? e._events[t].unshift(r) : e._events[t] = [r, e._events[t]] : e.on(t, r);
            }(e, "error", p), e.once("close", d), e.once("finish", g), e.emit("pipe", n), i.flowing || (u("pipe resume"), n.resume()), e;
          }, C.prototype.unpipe = function (e) {
            var t = this._readableState,
              r = {
                hasUnpiped: !1
              };
            if (0 === t.pipesCount) return this;
            if (1 === t.pipesCount) return e && e !== t.pipes ? this : (e || (e = t.pipes), t.pipes = null, t.pipesCount = 0, t.flowing = !1, e && e.emit("unpipe", this, r), this);
            if (!e) {
              var n = t.pipes,
                i = t.pipesCount;
              t.pipes = null, t.pipesCount = 0, t.flowing = !1;
              for (var o = 0; o < i; o++) n[o].emit("unpipe", this, {
                hasUnpiped: !1
              });
              return this;
            }
            var s = z(t.pipes, e);
            return -1 === s ? this : (t.pipes.splice(s, 1), t.pipesCount -= 1, 1 === t.pipesCount && (t.pipes = t.pipes[0]), e.emit("unpipe", this, r), this);
          }, C.prototype.on = function (e, t) {
            var n = s.prototype.on.call(this, e, t),
              i = this._readableState;
            return "data" === e ? (i.readableListening = this.listenerCount("readable") > 0, !1 !== i.flowing && this.resume()) : "readable" === e && (i.endEmitted || i.readableListening || (i.readableListening = i.needReadable = !0, i.flowing = !1, i.emittedReadable = !1, u("on readable", i.length, i.reading), i.length ? P(this) : i.reading || r.nextTick(N, this))), n;
          }, C.prototype.addListener = C.prototype.on, C.prototype.removeListener = function (e, t) {
            var n = s.prototype.removeListener.call(this, e, t);
            return "readable" === e && r.nextTick(M, this), n;
          }, C.prototype.removeAllListeners = function (e) {
            var t = s.prototype.removeAllListeners.apply(this, arguments);
            return "readable" !== e && void 0 !== e || r.nextTick(M, this), t;
          }, C.prototype.resume = function () {
            var e = this._readableState;
            return e.flowing || (u("resume"), e.flowing = !e.readableListening, function (e, t) {
              t.resumeScheduled || (t.resumeScheduled = !0, r.nextTick(L, e, t));
            }(this, e)), e.paused = !1, this;
          }, C.prototype.pause = function () {
            return u("call pause flowing=%j", this._readableState.flowing), !1 !== this._readableState.flowing && (u("pause"), this._readableState.flowing = !1, this.emit("pause")), this._readableState.paused = !0, this;
          }, C.prototype.wrap = function (e) {
            var t = this,
              r = this._readableState,
              n = !1;
            for (var i in e.on("end", function () {
              if (u("wrapped end"), r.decoder && !r.ended) {
                var e = r.decoder.end();
                e && e.length && t.push(e);
              }
              t.push(null);
            }), e.on("data", function (i) {
              (u("wrapped data"), r.decoder && (i = r.decoder.write(i)), !r.objectMode || null !== i && void 0 !== i) && (r.objectMode || i && i.length) && (t.push(i) || (n = !0, e.pause()));
            }), e) void 0 === this[i] && "function" == typeof e[i] && (this[i] = function (t) {
              return function () {
                return e[t].apply(e, arguments);
              };
            }(i));
            for (var o = 0; o < S.length; o++) e.on(S[o], this.emit.bind(this, S[o]));
            return this._read = function (t) {
              u("wrapped _read", t), n && (n = !1, e.resume());
            }, this;
          }, "function" == typeof Symbol && (C.prototype[Symbol.asyncIterator] = function () {
            return void 0 === f && (f = e("./internal/streams/async_iterator")), f(this);
          }), Object.defineProperty(C.prototype, "readableHighWaterMark", {
            enumerable: !1,
            get: function get() {
              return this._readableState.highWaterMark;
            }
          }), Object.defineProperty(C.prototype, "readableBuffer", {
            enumerable: !1,
            get: function get() {
              return this._readableState && this._readableState.buffer;
            }
          }), Object.defineProperty(C.prototype, "readableFlowing", {
            enumerable: !1,
            get: function get() {
              return this._readableState.flowing;
            },
            set: function set(e) {
              this._readableState && (this._readableState.flowing = e);
            }
          }), C._fromList = U, Object.defineProperty(C.prototype, "readableLength", {
            enumerable: !1,
            get: function get() {
              return this._readableState.length;
            }
          }), "function" == typeof Symbol && (C.from = function (t, r) {
            return void 0 === p && (p = e("./internal/streams/from")), p(C, t, r);
          });
        }).call(this);
      }).call(this, e("_process"), "undefined" != typeof __webpack_require__.g ? __webpack_require__.g : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }, {
      "../errors": 55,
      "./_stream_duplex": 56,
      "./internal/streams/async_iterator": 61,
      "./internal/streams/buffer_list": 62,
      "./internal/streams/destroy": 63,
      "./internal/streams/from": 65,
      "./internal/streams/state": 67,
      "./internal/streams/stream": 68,
      _process: 50,
      buffer: 17,
      events: 22,
      inherits: 24,
      "string_decoder/": 75,
      util: 16
    }],
    59: [function (e, t, r) {
      "use strict";

      t.exports = u;
      var n = e("../errors").codes,
        i = n.ERR_METHOD_NOT_IMPLEMENTED,
        o = n.ERR_MULTIPLE_CALLBACK,
        s = n.ERR_TRANSFORM_ALREADY_TRANSFORMING,
        a = n.ERR_TRANSFORM_WITH_LENGTH_0,
        l = e("./_stream_duplex");
      function u(e) {
        if (!(this instanceof u)) return new u(e);
        l.call(this, e), this._transformState = {
          afterTransform: function (e, t) {
            var r = this._transformState;
            r.transforming = !1;
            var n = r.writecb;
            if (null === n) return this.emit("error", new o());
            r.writechunk = null, r.writecb = null, null != t && this.push(t), n(e);
            var i = this._readableState;
            i.reading = !1, (i.needReadable || i.length < i.highWaterMark) && this._read(i.highWaterMark);
          }.bind(this),
          needTransform: !1,
          transforming: !1,
          writecb: null,
          writechunk: null,
          writeencoding: null
        }, this._readableState.needReadable = !0, this._readableState.sync = !1, e && ("function" == typeof e.transform && (this._transform = e.transform), "function" == typeof e.flush && (this._flush = e.flush)), this.on("prefinish", c);
      }
      function c() {
        var e = this;
        "function" != typeof this._flush || this._readableState.destroyed ? h(this, null, null) : this._flush(function (t, r) {
          h(e, t, r);
        });
      }
      function h(e, t, r) {
        if (t) return e.emit("error", t);
        if (null != r && e.push(r), e._writableState.length) throw new a();
        if (e._transformState.transforming) throw new s();
        return e.push(null);
      }
      e("inherits")(u, l), u.prototype.push = function (e, t) {
        return this._transformState.needTransform = !1, l.prototype.push.call(this, e, t);
      }, u.prototype._transform = function (e, t, r) {
        r(new i("_transform()"));
      }, u.prototype._write = function (e, t, r) {
        var n = this._transformState;
        if (n.writecb = r, n.writechunk = e, n.writeencoding = t, !n.transforming) {
          var i = this._readableState;
          (n.needTransform || i.needReadable || i.length < i.highWaterMark) && this._read(i.highWaterMark);
        }
      }, u.prototype._read = function (e) {
        var t = this._transformState;
        null === t.writechunk || t.transforming ? t.needTransform = !0 : (t.transforming = !0, this._transform(t.writechunk, t.writeencoding, t.afterTransform));
      }, u.prototype._destroy = function (e, t) {
        l.prototype._destroy.call(this, e, function (e) {
          t(e);
        });
      };
    }, {
      "../errors": 55,
      "./_stream_duplex": 56,
      inherits: 24
    }],
    60: [function (e, t, r) {
      (function (r, n) {
        (function () {
          "use strict";

          function i(e) {
            var t = this;
            this.next = null, this.entry = null, this.finish = function () {
              !function (e, t, r) {
                var n = e.entry;
                e.entry = null;
                for (; n;) {
                  var i = n.callback;
                  t.pendingcb--, i(r), n = n.next;
                }
                t.corkedRequestsFree.next = e;
              }(t, e);
            };
          }
          var o;
          t.exports = C, C.WritableState = E;
          var s = {
              deprecate: e("util-deprecate")
            },
            a = e("./internal/streams/stream"),
            l = e("buffer").Buffer,
            u = n.Uint8Array || function () {};
          var c,
            h = e("./internal/streams/destroy"),
            f = e("./internal/streams/state").getHighWaterMark,
            p = e("../errors").codes,
            d = p.ERR_INVALID_ARG_TYPE,
            g = p.ERR_METHOD_NOT_IMPLEMENTED,
            y = p.ERR_MULTIPLE_CALLBACK,
            b = p.ERR_STREAM_CANNOT_PIPE,
            m = p.ERR_STREAM_DESTROYED,
            v = p.ERR_STREAM_NULL_VALUES,
            w = p.ERR_STREAM_WRITE_AFTER_END,
            _ = p.ERR_UNKNOWN_ENCODING,
            k = h.errorOrDestroy;
          function S() {}
          function E(t, n, s) {
            o = o || e("./_stream_duplex"), t = t || {}, "boolean" != typeof s && (s = n instanceof o), this.objectMode = !!t.objectMode, s && (this.objectMode = this.objectMode || !!t.writableObjectMode), this.highWaterMark = f(this, t, "writableHighWaterMark", s), this.finalCalled = !1, this.needDrain = !1, this.ending = !1, this.ended = !1, this.finished = !1, this.destroyed = !1;
            var a = !1 === t.decodeStrings;
            this.decodeStrings = !a, this.defaultEncoding = t.defaultEncoding || "utf8", this.length = 0, this.writing = !1, this.corked = 0, this.sync = !0, this.bufferProcessing = !1, this.onwrite = function (e) {
              !function (e, t) {
                var n = e._writableState,
                  i = n.sync,
                  o = n.writecb;
                if ("function" != typeof o) throw new y();
                if (function (e) {
                  e.writing = !1, e.writecb = null, e.length -= e.writelen, e.writelen = 0;
                }(n), t) !function (e, t, n, i, o) {
                  --t.pendingcb, n ? (r.nextTick(o, i), r.nextTick(O, e, t), e._writableState.errorEmitted = !0, k(e, i)) : (o(i), e._writableState.errorEmitted = !0, k(e, i), O(e, t));
                }(e, n, i, t, o);else {
                  var s = I(n) || e.destroyed;
                  s || n.corked || n.bufferProcessing || !n.bufferedRequest || A(e, n), i ? r.nextTick(x, e, n, s, o) : x(e, n, s, o);
                }
              }(n, e);
            }, this.writecb = null, this.writelen = 0, this.bufferedRequest = null, this.lastBufferedRequest = null, this.pendingcb = 0, this.prefinished = !1, this.errorEmitted = !1, this.emitClose = !1 !== t.emitClose, this.autoDestroy = !!t.autoDestroy, this.bufferedRequestCount = 0, this.corkedRequestsFree = new i(this);
          }
          function C(t) {
            var r = this instanceof (o = o || e("./_stream_duplex"));
            if (!r && !c.call(C, this)) return new C(t);
            this._writableState = new E(t, this, r), this.writable = !0, t && ("function" == typeof t.write && (this._write = t.write), "function" == typeof t.writev && (this._writev = t.writev), "function" == typeof t.destroy && (this._destroy = t.destroy), "function" == typeof t.final && (this._final = t.final)), a.call(this);
          }
          function T(e, t, r, n, i, o, s) {
            t.writelen = n, t.writecb = s, t.writing = !0, t.sync = !0, t.destroyed ? t.onwrite(new m("write")) : r ? e._writev(i, t.onwrite) : e._write(i, o, t.onwrite), t.sync = !1;
          }
          function x(e, t, r, n) {
            r || function (e, t) {
              0 === t.length && t.needDrain && (t.needDrain = !1, e.emit("drain"));
            }(e, t), t.pendingcb--, n(), O(e, t);
          }
          function A(e, t) {
            t.bufferProcessing = !0;
            var r = t.bufferedRequest;
            if (e._writev && r && r.next) {
              var n = t.bufferedRequestCount,
                o = new Array(n),
                s = t.corkedRequestsFree;
              s.entry = r;
              for (var a = 0, l = !0; r;) o[a] = r, r.isBuf || (l = !1), r = r.next, a += 1;
              o.allBuffers = l, T(e, t, !0, t.length, o, "", s.finish), t.pendingcb++, t.lastBufferedRequest = null, s.next ? (t.corkedRequestsFree = s.next, s.next = null) : t.corkedRequestsFree = new i(t), t.bufferedRequestCount = 0;
            } else {
              for (; r;) {
                var u = r.chunk,
                  c = r.encoding,
                  h = r.callback;
                if (T(e, t, !1, t.objectMode ? 1 : u.length, u, c, h), r = r.next, t.bufferedRequestCount--, t.writing) break;
              }
              null === r && (t.lastBufferedRequest = null);
            }
            t.bufferedRequest = r, t.bufferProcessing = !1;
          }
          function I(e) {
            return e.ending && 0 === e.length && null === e.bufferedRequest && !e.finished && !e.writing;
          }
          function P(e, t) {
            e._final(function (r) {
              t.pendingcb--, r && k(e, r), t.prefinished = !0, e.emit("prefinish"), O(e, t);
            });
          }
          function O(e, t) {
            var n = I(t);
            if (n && (function (e, t) {
              t.prefinished || t.finalCalled || ("function" != typeof e._final || t.destroyed ? (t.prefinished = !0, e.emit("prefinish")) : (t.pendingcb++, t.finalCalled = !0, r.nextTick(P, e, t)));
            }(e, t), 0 === t.pendingcb && (t.finished = !0, e.emit("finish"), t.autoDestroy))) {
              var i = e._readableState;
              (!i || i.autoDestroy && i.endEmitted) && e.destroy();
            }
            return n;
          }
          e("inherits")(C, a), E.prototype.getBuffer = function () {
            for (var e = this.bufferedRequest, t = []; e;) t.push(e), e = e.next;
            return t;
          }, function () {
            try {
              Object.defineProperty(E.prototype, "buffer", {
                get: s.deprecate(function () {
                  return this.getBuffer();
                }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003")
              });
            } catch (e) {}
          }(), "function" == typeof Symbol && Symbol.hasInstance && "function" == typeof Function.prototype[Symbol.hasInstance] ? (c = Function.prototype[Symbol.hasInstance], Object.defineProperty(C, Symbol.hasInstance, {
            value: function value(e) {
              return !!c.call(this, e) || this === C && e && e._writableState instanceof E;
            }
          })) : c = function c(e) {
            return e instanceof this;
          }, C.prototype.pipe = function () {
            k(this, new b());
          }, C.prototype.write = function (e, t, n) {
            var i,
              o = this._writableState,
              s = !1,
              a = !o.objectMode && (i = e, l.isBuffer(i) || i instanceof u);
            return a && !l.isBuffer(e) && (e = function (e) {
              return l.from(e);
            }(e)), "function" == typeof t && (n = t, t = null), a ? t = "buffer" : t || (t = o.defaultEncoding), "function" != typeof n && (n = S), o.ending ? function (e, t) {
              var n = new w();
              k(e, n), r.nextTick(t, n);
            }(this, n) : (a || function (e, t, n, i) {
              var o;
              return null === n ? o = new v() : "string" == typeof n || t.objectMode || (o = new d("chunk", ["string", "Buffer"], n)), !o || (k(e, o), r.nextTick(i, o), !1);
            }(this, o, e, n)) && (o.pendingcb++, s = function (e, t, r, n, i, o) {
              if (!r) {
                var s = function (e, t, r) {
                  e.objectMode || !1 === e.decodeStrings || "string" != typeof t || (t = l.from(t, r));
                  return t;
                }(t, n, i);
                n !== s && (r = !0, i = "buffer", n = s);
              }
              var a = t.objectMode ? 1 : n.length;
              t.length += a;
              var u = t.length < t.highWaterMark;
              u || (t.needDrain = !0);
              if (t.writing || t.corked) {
                var c = t.lastBufferedRequest;
                t.lastBufferedRequest = {
                  chunk: n,
                  encoding: i,
                  isBuf: r,
                  callback: o,
                  next: null
                }, c ? c.next = t.lastBufferedRequest : t.bufferedRequest = t.lastBufferedRequest, t.bufferedRequestCount += 1;
              } else T(e, t, !1, a, n, i, o);
              return u;
            }(this, o, a, e, t, n)), s;
          }, C.prototype.cork = function () {
            this._writableState.corked++;
          }, C.prototype.uncork = function () {
            var e = this._writableState;
            e.corked && (e.corked--, e.writing || e.corked || e.bufferProcessing || !e.bufferedRequest || A(this, e));
          }, C.prototype.setDefaultEncoding = function (e) {
            if ("string" == typeof e && (e = e.toLowerCase()), !(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((e + "").toLowerCase()) > -1)) throw new _(e);
            return this._writableState.defaultEncoding = e, this;
          }, Object.defineProperty(C.prototype, "writableBuffer", {
            enumerable: !1,
            get: function get() {
              return this._writableState && this._writableState.getBuffer();
            }
          }), Object.defineProperty(C.prototype, "writableHighWaterMark", {
            enumerable: !1,
            get: function get() {
              return this._writableState.highWaterMark;
            }
          }), C.prototype._write = function (e, t, r) {
            r(new g("_write()"));
          }, C.prototype._writev = null, C.prototype.end = function (e, t, n) {
            var i = this._writableState;
            return "function" == typeof e ? (n = e, e = null, t = null) : "function" == typeof t && (n = t, t = null), null !== e && void 0 !== e && this.write(e, t), i.corked && (i.corked = 1, this.uncork()), i.ending || function (e, t, n) {
              t.ending = !0, O(e, t), n && (t.finished ? r.nextTick(n) : e.once("finish", n));
              t.ended = !0, e.writable = !1;
            }(this, i, n), this;
          }, Object.defineProperty(C.prototype, "writableLength", {
            enumerable: !1,
            get: function get() {
              return this._writableState.length;
            }
          }), Object.defineProperty(C.prototype, "destroyed", {
            enumerable: !1,
            get: function get() {
              return void 0 !== this._writableState && this._writableState.destroyed;
            },
            set: function set(e) {
              this._writableState && (this._writableState.destroyed = e);
            }
          }), C.prototype.destroy = h.destroy, C.prototype._undestroy = h.undestroy, C.prototype._destroy = function (e, t) {
            t(e);
          };
        }).call(this);
      }).call(this, e("_process"), "undefined" != typeof __webpack_require__.g ? __webpack_require__.g : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }, {
      "../errors": 55,
      "./_stream_duplex": 56,
      "./internal/streams/destroy": 63,
      "./internal/streams/state": 67,
      "./internal/streams/stream": 68,
      _process: 50,
      buffer: 17,
      inherits: 24,
      "util-deprecate": 78
    }],
    61: [function (e, t, r) {
      (function (r) {
        (function () {
          "use strict";

          var n;
          function i(e, t, r) {
            return t in e ? Object.defineProperty(e, t, {
              value: r,
              enumerable: !0,
              configurable: !0,
              writable: !0
            }) : e[t] = r, e;
          }
          var o = e("./end-of-stream"),
            s = Symbol("lastResolve"),
            a = Symbol("lastReject"),
            l = Symbol("error"),
            u = Symbol("ended"),
            c = Symbol("lastPromise"),
            h = Symbol("handlePromise"),
            f = Symbol("stream");
          function p(e, t) {
            return {
              value: e,
              done: t
            };
          }
          function d(e) {
            var t = e[s];
            if (null !== t) {
              var r = e[f].read();
              null !== r && (e[c] = null, e[s] = null, e[a] = null, t(p(r, !1)));
            }
          }
          var g = Object.getPrototypeOf(function () {}),
            y = Object.setPrototypeOf((i(n = {
              get stream() {
                return this[f];
              },
              next: function next() {
                var e = this,
                  t = this[l];
                if (null !== t) return Promise.reject(t);
                if (this[u]) return Promise.resolve(p(void 0, !0));
                if (this[f].destroyed) return new Promise(function (t, n) {
                  r.nextTick(function () {
                    e[l] ? n(e[l]) : t(p(void 0, !0));
                  });
                });
                var n,
                  i = this[c];
                if (i) n = new Promise(function (e, t) {
                  return function (r, n) {
                    e.then(function () {
                      t[u] ? r(p(void 0, !0)) : t[h](r, n);
                    }, n);
                  };
                }(i, this));else {
                  var o = this[f].read();
                  if (null !== o) return Promise.resolve(p(o, !1));
                  n = new Promise(this[h]);
                }
                return this[c] = n, n;
              }
            }, Symbol.asyncIterator, function () {
              return this;
            }), i(n, "return", function () {
              var e = this;
              return new Promise(function (t, r) {
                e[f].destroy(null, function (e) {
                  e ? r(e) : t(p(void 0, !0));
                });
              });
            }), n), g);
          t.exports = function (e) {
            var t,
              n = Object.create(y, (i(t = {}, f, {
                value: e,
                writable: !0
              }), i(t, s, {
                value: null,
                writable: !0
              }), i(t, a, {
                value: null,
                writable: !0
              }), i(t, l, {
                value: null,
                writable: !0
              }), i(t, u, {
                value: e._readableState.endEmitted,
                writable: !0
              }), i(t, h, {
                value: function value(e, t) {
                  var r = n[f].read();
                  r ? (n[c] = null, n[s] = null, n[a] = null, e(p(r, !1))) : (n[s] = e, n[a] = t);
                },
                writable: !0
              }), t));
            return n[c] = null, o(e, function (e) {
              if (e && "ERR_STREAM_PREMATURE_CLOSE" !== e.code) {
                var t = n[a];
                return null !== t && (n[c] = null, n[s] = null, n[a] = null, t(e)), void (n[l] = e);
              }
              var r = n[s];
              null !== r && (n[c] = null, n[s] = null, n[a] = null, r(p(void 0, !0))), n[u] = !0;
            }), e.on("readable", function (e) {
              r.nextTick(d, e);
            }.bind(null, n)), n;
          };
        }).call(this);
      }).call(this, e("_process"));
    }, {
      "./end-of-stream": 64,
      _process: 50
    }],
    62: [function (e, t, r) {
      "use strict";

      function n(e, t) {
        var r = Object.keys(e);
        if (Object.getOwnPropertySymbols) {
          var n = Object.getOwnPropertySymbols(e);
          t && (n = n.filter(function (t) {
            return Object.getOwnPropertyDescriptor(e, t).enumerable;
          })), r.push.apply(r, n);
        }
        return r;
      }
      function i(e, t, r) {
        return t in e ? Object.defineProperty(e, t, {
          value: r,
          enumerable: !0,
          configurable: !0,
          writable: !0
        }) : e[t] = r, e;
      }
      function o(e, t) {
        for (var r = 0; r < t.length; r++) {
          var n = t[r];
          n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
        }
      }
      var s = e("buffer").Buffer,
        a = e("util").inspect,
        l = a && a.custom || "inspect";
      t.exports = function () {
        function e() {
          !function (e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
          }(this, e), this.head = null, this.tail = null, this.length = 0;
        }
        var t, r, u;
        return t = e, (r = [{
          key: "push",
          value: function value(e) {
            var t = {
              data: e,
              next: null
            };
            this.length > 0 ? this.tail.next = t : this.head = t, this.tail = t, ++this.length;
          }
        }, {
          key: "unshift",
          value: function value(e) {
            var t = {
              data: e,
              next: this.head
            };
            0 === this.length && (this.tail = t), this.head = t, ++this.length;
          }
        }, {
          key: "shift",
          value: function value() {
            if (0 !== this.length) {
              var e = this.head.data;
              return 1 === this.length ? this.head = this.tail = null : this.head = this.head.next, --this.length, e;
            }
          }
        }, {
          key: "clear",
          value: function value() {
            this.head = this.tail = null, this.length = 0;
          }
        }, {
          key: "join",
          value: function value(e) {
            if (0 === this.length) return "";
            for (var t = this.head, r = "" + t.data; t = t.next;) r += e + t.data;
            return r;
          }
        }, {
          key: "concat",
          value: function value(e) {
            if (0 === this.length) return s.alloc(0);
            for (var t, r, n, i = s.allocUnsafe(e >>> 0), o = this.head, a = 0; o;) t = o.data, r = i, n = a, s.prototype.copy.call(t, r, n), a += o.data.length, o = o.next;
            return i;
          }
        }, {
          key: "consume",
          value: function value(e, t) {
            var r;
            return e < this.head.data.length ? (r = this.head.data.slice(0, e), this.head.data = this.head.data.slice(e)) : r = e === this.head.data.length ? this.shift() : t ? this._getString(e) : this._getBuffer(e), r;
          }
        }, {
          key: "first",
          value: function value() {
            return this.head.data;
          }
        }, {
          key: "_getString",
          value: function value(e) {
            var t = this.head,
              r = 1,
              n = t.data;
            for (e -= n.length; t = t.next;) {
              var i = t.data,
                o = e > i.length ? i.length : e;
              if (o === i.length ? n += i : n += i.slice(0, e), 0 === (e -= o)) {
                o === i.length ? (++r, t.next ? this.head = t.next : this.head = this.tail = null) : (this.head = t, t.data = i.slice(o));
                break;
              }
              ++r;
            }
            return this.length -= r, n;
          }
        }, {
          key: "_getBuffer",
          value: function value(e) {
            var t = s.allocUnsafe(e),
              r = this.head,
              n = 1;
            for (r.data.copy(t), e -= r.data.length; r = r.next;) {
              var i = r.data,
                o = e > i.length ? i.length : e;
              if (i.copy(t, t.length - e, 0, o), 0 === (e -= o)) {
                o === i.length ? (++n, r.next ? this.head = r.next : this.head = this.tail = null) : (this.head = r, r.data = i.slice(o));
                break;
              }
              ++n;
            }
            return this.length -= n, t;
          }
        }, {
          key: l,
          value: function value(e, t) {
            return a(this, function (e) {
              for (var t = 1; t < arguments.length; t++) {
                var r = null != arguments[t] ? arguments[t] : {};
                t % 2 ? n(Object(r), !0).forEach(function (t) {
                  i(e, t, r[t]);
                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : n(Object(r)).forEach(function (t) {
                  Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));
                });
              }
              return e;
            }({}, t, {
              depth: 0,
              customInspect: !1
            }));
          }
        }]) && o(t.prototype, r), u && o(t, u), e;
      }();
    }, {
      buffer: 17,
      util: 16
    }],
    63: [function (e, t, r) {
      (function (e) {
        (function () {
          "use strict";

          function r(e, t) {
            i(e, t), n(e);
          }
          function n(e) {
            e._writableState && !e._writableState.emitClose || e._readableState && !e._readableState.emitClose || e.emit("close");
          }
          function i(e, t) {
            e.emit("error", t);
          }
          t.exports = {
            destroy: function destroy(t, o) {
              var s = this,
                a = this._readableState && this._readableState.destroyed,
                l = this._writableState && this._writableState.destroyed;
              return a || l ? (o ? o(t) : t && (this._writableState ? this._writableState.errorEmitted || (this._writableState.errorEmitted = !0, e.nextTick(i, this, t)) : e.nextTick(i, this, t)), this) : (this._readableState && (this._readableState.destroyed = !0), this._writableState && (this._writableState.destroyed = !0), this._destroy(t || null, function (t) {
                !o && t ? s._writableState ? s._writableState.errorEmitted ? e.nextTick(n, s) : (s._writableState.errorEmitted = !0, e.nextTick(r, s, t)) : e.nextTick(r, s, t) : o ? (e.nextTick(n, s), o(t)) : e.nextTick(n, s);
              }), this);
            },
            undestroy: function undestroy() {
              this._readableState && (this._readableState.destroyed = !1, this._readableState.reading = !1, this._readableState.ended = !1, this._readableState.endEmitted = !1), this._writableState && (this._writableState.destroyed = !1, this._writableState.ended = !1, this._writableState.ending = !1, this._writableState.finalCalled = !1, this._writableState.prefinished = !1, this._writableState.finished = !1, this._writableState.errorEmitted = !1);
            },
            errorOrDestroy: function errorOrDestroy(e, t) {
              var r = e._readableState,
                n = e._writableState;
              r && r.autoDestroy || n && n.autoDestroy ? e.destroy(t) : e.emit("error", t);
            }
          };
        }).call(this);
      }).call(this, e("_process"));
    }, {
      _process: 50
    }],
    64: [function (e, t, r) {
      "use strict";

      var n = e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;
      function i() {}
      t.exports = function e(t, r, o) {
        if ("function" == typeof r) return e(t, null, r);
        r || (r = {}), o = function (e) {
          var t = !1;
          return function () {
            if (!t) {
              t = !0;
              for (var r = arguments.length, n = new Array(r), i = 0; i < r; i++) n[i] = arguments[i];
              e.apply(this, n);
            }
          };
        }(o || i);
        var s = r.readable || !1 !== r.readable && t.readable,
          a = r.writable || !1 !== r.writable && t.writable,
          l = function l() {
            t.writable || c();
          },
          u = t._writableState && t._writableState.finished,
          c = function c() {
            a = !1, u = !0, s || o.call(t);
          },
          h = t._readableState && t._readableState.endEmitted,
          f = function f() {
            s = !1, h = !0, a || o.call(t);
          },
          p = function p(e) {
            o.call(t, e);
          },
          d = function d() {
            var e;
            return s && !h ? (t._readableState && t._readableState.ended || (e = new n()), o.call(t, e)) : a && !u ? (t._writableState && t._writableState.ended || (e = new n()), o.call(t, e)) : void 0;
          },
          g = function g() {
            t.req.on("finish", c);
          };
        return function (e) {
          return e.setHeader && "function" == typeof e.abort;
        }(t) ? (t.on("complete", c), t.on("abort", d), t.req ? g() : t.on("request", g)) : a && !t._writableState && (t.on("end", l), t.on("close", l)), t.on("end", f), t.on("finish", c), !1 !== r.error && t.on("error", p), t.on("close", d), function () {
          t.removeListener("complete", c), t.removeListener("abort", d), t.removeListener("request", g), t.req && t.req.removeListener("finish", c), t.removeListener("end", l), t.removeListener("close", l), t.removeListener("finish", c), t.removeListener("end", f), t.removeListener("error", p), t.removeListener("close", d);
        };
      };
    }, {
      "../../../errors": 55
    }],
    65: [function (e, t, r) {
      t.exports = function () {
        throw new Error("Readable.from is not available in the browser");
      };
    }, {}],
    66: [function (e, t, r) {
      "use strict";

      var n;
      var i = e("../../../errors").codes,
        o = i.ERR_MISSING_ARGS,
        s = i.ERR_STREAM_DESTROYED;
      function a(e) {
        if (e) throw e;
      }
      function l(e) {
        e();
      }
      function u(e, t) {
        return e.pipe(t);
      }
      t.exports = function () {
        for (var t = arguments.length, r = new Array(t), i = 0; i < t; i++) r[i] = arguments[i];
        var c,
          h = function (e) {
            return e.length ? "function" != typeof e[e.length - 1] ? a : e.pop() : a;
          }(r);
        if (Array.isArray(r[0]) && (r = r[0]), r.length < 2) throw new o("streams");
        var f = r.map(function (t, i) {
          var o = i < r.length - 1;
          return function (t, r, i, o) {
            o = function (e) {
              var t = !1;
              return function () {
                t || (t = !0, e.apply(void 0, arguments));
              };
            }(o);
            var a = !1;
            t.on("close", function () {
              a = !0;
            }), void 0 === n && (n = e("./end-of-stream")), n(t, {
              readable: r,
              writable: i
            }, function (e) {
              if (e) return o(e);
              a = !0, o();
            });
            var l = !1;
            return function (e) {
              if (!a && !l) return l = !0, function (e) {
                return e.setHeader && "function" == typeof e.abort;
              }(t) ? t.abort() : "function" == typeof t.destroy ? t.destroy() : void o(e || new s("pipe"));
            };
          }(t, o, i > 0, function (e) {
            c || (c = e), e && f.forEach(l), o || (f.forEach(l), h(c));
          });
        });
        return r.reduce(u);
      };
    }, {
      "../../../errors": 55,
      "./end-of-stream": 64
    }],
    67: [function (e, t, r) {
      "use strict";

      var n = e("../../../errors").codes.ERR_INVALID_OPT_VALUE;
      t.exports = {
        getHighWaterMark: function getHighWaterMark(e, t, r, i) {
          var o = function (e, t, r) {
            return null != e.highWaterMark ? e.highWaterMark : t ? e[r] : null;
          }(t, i, r);
          if (null != o) {
            if (!isFinite(o) || Math.floor(o) !== o || o < 0) throw new n(i ? r : "highWaterMark", o);
            return Math.floor(o);
          }
          return e.objectMode ? 16 : 16384;
        }
      };
    }, {
      "../../../errors": 55
    }],
    68: [function (e, t, r) {
      t.exports = e("events").EventEmitter;
    }, {
      events: 22
    }],
    69: [function (e, t, r) {
      (r = t.exports = e("./lib/_stream_readable.js")).Stream = r, r.Readable = r, r.Writable = e("./lib/_stream_writable.js"), r.Duplex = e("./lib/_stream_duplex.js"), r.Transform = e("./lib/_stream_transform.js"), r.PassThrough = e("./lib/_stream_passthrough.js"), r.finished = e("./lib/internal/streams/end-of-stream.js"), r.pipeline = e("./lib/internal/streams/pipeline.js");
    }, {
      "./lib/_stream_duplex.js": 56,
      "./lib/_stream_passthrough.js": 57,
      "./lib/_stream_readable.js": 58,
      "./lib/_stream_transform.js": 59,
      "./lib/_stream_writable.js": 60,
      "./lib/internal/streams/end-of-stream.js": 64,
      "./lib/internal/streams/pipeline.js": 66
    }],
    70: [function (e, t, r) {
      "use strict";

      t.exports = function () {
        if ("function" != typeof arguments[0]) throw new Error("callback needed");
        if ("number" != typeof arguments[1]) throw new Error("interval needed");
        var e;
        if (arguments.length > 0) {
          e = new Array(arguments.length - 2);
          for (var t = 0; t < e.length; t++) e[t] = arguments[t + 2];
        }
        return new function (e, t, r) {
          var n = this;
          this._callback = e, this._args = r, this._interval = setInterval(e, t, this._args), this.reschedule = function (e) {
            e || (e = n._interval), n._interval && clearInterval(n._interval), n._interval = setInterval(n._callback, e, n._args);
          }, this.clear = function () {
            n._interval && (clearInterval(n._interval), n._interval = void 0);
          }, this.destroy = function () {
            n._interval && clearInterval(n._interval), n._callback = void 0, n._interval = void 0, n._args = void 0;
          };
        }(arguments[0], arguments[1], e);
      };
    }, {}],
    71: [function (e, t, r) {
      "use strict";

      t.exports = e("./index.js")();
    }, {
      "./index.js": 72
    }],
    72: [function (e, t, r) {
      (function (e) {
        (function () {
          "use strict";

          function r(t) {
            return t instanceof e ? e.from(t) : new t.constructor(t.buffer.slice(), t.byteOffset, t.length);
          }
          t.exports = function (e) {
            return (e = e || {}).circles ? function (e) {
              var t = [],
                n = [];
              return e.proto ? function e(o) {
                if ("object" != _typeof(o) || null === o) return o;
                if (o instanceof Date) return new Date(o);
                if (Array.isArray(o)) return i(o, e);
                if (o instanceof Map) return new Map(i(Array.from(o), e));
                if (o instanceof Set) return new Set(i(Array.from(o), e));
                var s = {};
                for (var a in t.push(o), n.push(s), o) {
                  var l = o[a];
                  if ("object" != _typeof(l) || null === l) s[a] = l;else if (l instanceof Date) s[a] = new Date(l);else if (l instanceof Map) s[a] = new Map(i(Array.from(l), e));else if (l instanceof Set) s[a] = new Set(i(Array.from(l), e));else if (ArrayBuffer.isView(l)) s[a] = r(l);else {
                    var u = t.indexOf(l);
                    s[a] = -1 !== u ? n[u] : e(l);
                  }
                }
                return t.pop(), n.pop(), s;
              } : function e(o) {
                if ("object" != _typeof(o) || null === o) return o;
                if (o instanceof Date) return new Date(o);
                if (Array.isArray(o)) return i(o, e);
                if (o instanceof Map) return new Map(i(Array.from(o), e));
                if (o instanceof Set) return new Set(i(Array.from(o), e));
                var s = {};
                for (var a in t.push(o), n.push(s), o) if (!1 !== Object.hasOwnProperty.call(o, a)) {
                  var l = o[a];
                  if ("object" != _typeof(l) || null === l) s[a] = l;else if (l instanceof Date) s[a] = new Date(l);else if (l instanceof Map) s[a] = new Map(i(Array.from(l), e));else if (l instanceof Set) s[a] = new Set(i(Array.from(l), e));else if (ArrayBuffer.isView(l)) s[a] = r(l);else {
                    var u = t.indexOf(l);
                    s[a] = -1 !== u ? n[u] : e(l);
                  }
                }
                return t.pop(), n.pop(), s;
              };
              function i(e, i) {
                for (var o = Object.keys(e), s = new Array(o.length), a = 0; a < o.length; a++) {
                  var l = o[a],
                    u = e[l];
                  if ("object" != _typeof(u) || null === u) s[l] = u;else if (u instanceof Date) s[l] = new Date(u);else if (ArrayBuffer.isView(u)) s[l] = r(u);else {
                    var c = t.indexOf(u);
                    s[l] = -1 !== c ? n[c] : i(u);
                  }
                }
                return s;
              }
            }(e) : e.proto ? function e(n) {
              if ("object" != _typeof(n) || null === n) return n;
              if (n instanceof Date) return new Date(n);
              if (Array.isArray(n)) return t(n, e);
              if (n instanceof Map) return new Map(t(Array.from(n), e));
              if (n instanceof Set) return new Set(t(Array.from(n), e));
              var i = {};
              for (var o in n) {
                var s = n[o];
                "object" != _typeof(s) || null === s ? i[o] = s : s instanceof Date ? i[o] = new Date(s) : s instanceof Map ? i[o] = new Map(t(Array.from(s), e)) : s instanceof Set ? i[o] = new Set(t(Array.from(s), e)) : ArrayBuffer.isView(s) ? i[o] = r(s) : i[o] = e(s);
              }
              return i;
            } : function e(n) {
              if ("object" != _typeof(n) || null === n) return n;
              if (n instanceof Date) return new Date(n);
              if (Array.isArray(n)) return t(n, e);
              if (n instanceof Map) return new Map(t(Array.from(n), e));
              if (n instanceof Set) return new Set(t(Array.from(n), e));
              var i = {};
              for (var o in n) if (!1 !== Object.hasOwnProperty.call(n, o)) {
                var s = n[o];
                "object" != _typeof(s) || null === s ? i[o] = s : s instanceof Date ? i[o] = new Date(s) : s instanceof Map ? i[o] = new Map(t(Array.from(s), e)) : s instanceof Set ? i[o] = new Set(t(Array.from(s), e)) : ArrayBuffer.isView(s) ? i[o] = r(s) : i[o] = e(s);
              }
              return i;
            };
            function t(e, t) {
              for (var n = Object.keys(e), i = new Array(n.length), o = 0; o < n.length; o++) {
                var s = n[o],
                  a = e[s];
                "object" != _typeof(a) || null === a ? i[s] = a : a instanceof Date ? i[s] = new Date(a) : ArrayBuffer.isView(a) ? i[s] = r(a) : i[s] = t(a);
              }
              return i;
            }
          };
        }).call(this);
      }).call(this, e("buffer").Buffer);
    }, {
      buffer: 17
    }],
    73: [function (e, t, r) {
      var n = e("buffer"),
        i = n.Buffer;
      function o(e, t) {
        for (var r in e) t[r] = e[r];
      }
      function s(e, t, r) {
        return i(e, t, r);
      }
      i.from && i.alloc && i.allocUnsafe && i.allocUnsafeSlow ? t.exports = n : (o(n, r), r.Buffer = s), s.prototype = Object.create(i.prototype), o(i, s), s.from = function (e, t, r) {
        if ("number" == typeof e) throw new TypeError("Argument must not be a number");
        return i(e, t, r);
      }, s.alloc = function (e, t, r) {
        if ("number" != typeof e) throw new TypeError("Argument must be a number");
        var n = i(e);
        return void 0 !== t ? "string" == typeof r ? n.fill(t, r) : n.fill(t) : n.fill(0), n;
      }, s.allocUnsafe = function (e) {
        if ("number" != typeof e) throw new TypeError("Argument must be a number");
        return i(e);
      }, s.allocUnsafeSlow = function (e) {
        if ("number" != typeof e) throw new TypeError("Argument must be a number");
        return n.SlowBuffer(e);
      };
    }, {
      buffer: 17
    }],
    74: [function (e, t, r) {
      t.exports = function (e) {
        var t = e._readableState;
        return t ? t.objectMode || "number" == typeof e._duplexState ? e.read() : e.read((r = t, r.buffer.length ? r.buffer.head ? r.buffer.head.data.length : r.buffer[0].length : r.length)) : null;
        var r;
      };
    }, {}],
    75: [function (e, t, r) {
      "use strict";

      var n = e("safe-buffer").Buffer,
        i = n.isEncoding || function (e) {
          switch ((e = "" + e) && e.toLowerCase()) {
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "binary":
            case "base64":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
            case "raw":
              return !0;
            default:
              return !1;
          }
        };
      function o(e) {
        var t;
        switch (this.encoding = function (e) {
          var t = function (e) {
            if (!e) return "utf8";
            for (var t;;) switch (e) {
              case "utf8":
              case "utf-8":
                return "utf8";
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return "utf16le";
              case "latin1":
              case "binary":
                return "latin1";
              case "base64":
              case "ascii":
              case "hex":
                return e;
              default:
                if (t) return;
                e = ("" + e).toLowerCase(), t = !0;
            }
          }(e);
          if ("string" != typeof t && (n.isEncoding === i || !i(e))) throw new Error("Unknown encoding: " + e);
          return t || e;
        }(e), this.encoding) {
          case "utf16le":
            this.text = l, this.end = u, t = 4;
            break;
          case "utf8":
            this.fillLast = a, t = 4;
            break;
          case "base64":
            this.text = c, this.end = h, t = 3;
            break;
          default:
            return this.write = f, void (this.end = p);
        }
        this.lastNeed = 0, this.lastTotal = 0, this.lastChar = n.allocUnsafe(t);
      }
      function s(e) {
        return e <= 127 ? 0 : e >> 5 == 6 ? 2 : e >> 4 == 14 ? 3 : e >> 3 == 30 ? 4 : e >> 6 == 2 ? -1 : -2;
      }
      function a(e) {
        var t = this.lastTotal - this.lastNeed,
          r = function (e, t, r) {
            if (128 != (192 & t[0])) return e.lastNeed = 0, "�";
            if (e.lastNeed > 1 && t.length > 1) {
              if (128 != (192 & t[1])) return e.lastNeed = 1, "�";
              if (e.lastNeed > 2 && t.length > 2 && 128 != (192 & t[2])) return e.lastNeed = 2, "�";
            }
          }(this, e);
        return void 0 !== r ? r : this.lastNeed <= e.length ? (e.copy(this.lastChar, t, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal)) : (e.copy(this.lastChar, t, 0, e.length), void (this.lastNeed -= e.length));
      }
      function l(e, t) {
        if ((e.length - t) % 2 == 0) {
          var r = e.toString("utf16le", t);
          if (r) {
            var n = r.charCodeAt(r.length - 1);
            if (n >= 55296 && n <= 56319) return this.lastNeed = 2, this.lastTotal = 4, this.lastChar[0] = e[e.length - 2], this.lastChar[1] = e[e.length - 1], r.slice(0, -1);
          }
          return r;
        }
        return this.lastNeed = 1, this.lastTotal = 2, this.lastChar[0] = e[e.length - 1], e.toString("utf16le", t, e.length - 1);
      }
      function u(e) {
        var t = e && e.length ? this.write(e) : "";
        if (this.lastNeed) {
          var r = this.lastTotal - this.lastNeed;
          return t + this.lastChar.toString("utf16le", 0, r);
        }
        return t;
      }
      function c(e, t) {
        var r = (e.length - t) % 3;
        return 0 === r ? e.toString("base64", t) : (this.lastNeed = 3 - r, this.lastTotal = 3, 1 === r ? this.lastChar[0] = e[e.length - 1] : (this.lastChar[0] = e[e.length - 2], this.lastChar[1] = e[e.length - 1]), e.toString("base64", t, e.length - r));
      }
      function h(e) {
        var t = e && e.length ? this.write(e) : "";
        return this.lastNeed ? t + this.lastChar.toString("base64", 0, 3 - this.lastNeed) : t;
      }
      function f(e) {
        return e.toString(this.encoding);
      }
      function p(e) {
        return e && e.length ? this.write(e) : "";
      }
      r.StringDecoder = o, o.prototype.write = function (e) {
        if (0 === e.length) return "";
        var t, r;
        if (this.lastNeed) {
          if (void 0 === (t = this.fillLast(e))) return "";
          r = this.lastNeed, this.lastNeed = 0;
        } else r = 0;
        return r < e.length ? t ? t + this.text(e, r) : this.text(e, r) : t || "";
      }, o.prototype.end = function (e) {
        var t = e && e.length ? this.write(e) : "";
        return this.lastNeed ? t + "�" : t;
      }, o.prototype.text = function (e, t) {
        var r = function (e, t, r) {
          var n = t.length - 1;
          if (n < r) return 0;
          var i = s(t[n]);
          if (i >= 0) return i > 0 && (e.lastNeed = i - 1), i;
          if (--n < r || -2 === i) return 0;
          if ((i = s(t[n])) >= 0) return i > 0 && (e.lastNeed = i - 2), i;
          if (--n < r || -2 === i) return 0;
          if ((i = s(t[n])) >= 0) return i > 0 && (2 === i ? i = 0 : e.lastNeed = i - 3), i;
          return 0;
        }(this, e, t);
        if (!this.lastNeed) return e.toString("utf8", t);
        this.lastTotal = r;
        var n = e.length - (r - this.lastNeed);
        return e.copy(this.lastChar, 0, n), e.toString("utf8", t, n);
      }, o.prototype.fillLast = function (e) {
        if (this.lastNeed <= e.length) return e.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal);
        e.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, e.length), this.lastNeed -= e.length;
      };
    }, {
      "safe-buffer": 73
    }],
    76: [function (e, t, r) {
      "use strict";

      var n = e("punycode"),
        i = e("./util");
      function o() {
        this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null;
      }
      r.parse = v, r.resolve = function (e, t) {
        return v(e, !1, !0).resolve(t);
      }, r.resolveObject = function (e, t) {
        return e ? v(e, !1, !0).resolveObject(t) : t;
      }, r.format = function (e) {
        i.isString(e) && (e = v(e));
        return e instanceof o ? e.format() : o.prototype.format.call(e);
      }, r.Url = o;
      var s = /^([a-z0-9.+-]+:)/i,
        a = /:[0-9]*$/,
        l = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
        u = ["{", "}", "|", "\\", "^", "`"].concat(["<", ">", '"', "`", " ", "\r", "\n", "\t"]),
        c = ["'"].concat(u),
        h = ["%", "/", "?", ";", "#"].concat(c),
        f = ["/", "?", "#"],
        p = /^[+a-z0-9A-Z_-]{0,63}$/,
        d = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
        g = {
          javascript: !0,
          "javascript:": !0
        },
        y = {
          javascript: !0,
          "javascript:": !0
        },
        b = {
          http: !0,
          https: !0,
          ftp: !0,
          gopher: !0,
          file: !0,
          "http:": !0,
          "https:": !0,
          "ftp:": !0,
          "gopher:": !0,
          "file:": !0
        },
        m = e("querystring");
      function v(e, t, r) {
        if (e && i.isObject(e) && e instanceof o) return e;
        var n = new o();
        return n.parse(e, t, r), n;
      }
      o.prototype.parse = function (e, t, r) {
        if (!i.isString(e)) throw new TypeError("Parameter 'url' must be a string, not " + _typeof(e));
        var o = e.indexOf("?"),
          a = -1 !== o && o < e.indexOf("#") ? "?" : "#",
          u = e.split(a);
        u[0] = u[0].replace(/\\/g, "/");
        var v = e = u.join(a);
        if (v = v.trim(), !r && 1 === e.split("#").length) {
          var w = l.exec(v);
          if (w) return this.path = v, this.href = v, this.pathname = w[1], w[2] ? (this.search = w[2], this.query = t ? m.parse(this.search.substr(1)) : this.search.substr(1)) : t && (this.search = "", this.query = {}), this;
        }
        var _ = s.exec(v);
        if (_) {
          var k = (_ = _[0]).toLowerCase();
          this.protocol = k, v = v.substr(_.length);
        }
        if (r || _ || v.match(/^\/\/[^@\/]+@[^@\/]+/)) {
          var S = "//" === v.substr(0, 2);
          !S || _ && y[_] || (v = v.substr(2), this.slashes = !0);
        }
        if (!y[_] && (S || _ && !b[_])) {
          for (var E, C, T = -1, x = 0; x < f.length; x++) {
            -1 !== (A = v.indexOf(f[x])) && (-1 === T || A < T) && (T = A);
          }
          -1 !== (C = -1 === T ? v.lastIndexOf("@") : v.lastIndexOf("@", T)) && (E = v.slice(0, C), v = v.slice(C + 1), this.auth = decodeURIComponent(E)), T = -1;
          for (x = 0; x < h.length; x++) {
            var A;
            -1 !== (A = v.indexOf(h[x])) && (-1 === T || A < T) && (T = A);
          }
          -1 === T && (T = v.length), this.host = v.slice(0, T), v = v.slice(T), this.parseHost(), this.hostname = this.hostname || "";
          var I = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
          if (!I) for (var P = this.hostname.split(/\./), O = (x = 0, P.length); x < O; x++) {
            var B = P[x];
            if (B && !B.match(p)) {
              for (var R = "", M = 0, N = B.length; M < N; M++) B.charCodeAt(M) > 127 ? R += "x" : R += B[M];
              if (!R.match(p)) {
                var L = P.slice(0, x),
                  j = P.slice(x + 1),
                  U = B.match(d);
                U && (L.push(U[1]), j.unshift(U[2])), j.length && (v = "/" + j.join(".") + v), this.hostname = L.join(".");
                break;
              }
            }
          }
          this.hostname.length > 255 ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), I || (this.hostname = n.toASCII(this.hostname));
          var q = this.port ? ":" + this.port : "",
            D = this.hostname || "";
          this.host = D + q, this.href += this.host, I && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), "/" !== v[0] && (v = "/" + v));
        }
        if (!g[k]) for (x = 0, O = c.length; x < O; x++) {
          var z = c[x];
          if (-1 !== v.indexOf(z)) {
            var F = encodeURIComponent(z);
            F === z && (F = escape(z)), v = v.split(z).join(F);
          }
        }
        var V = v.indexOf("#");
        -1 !== V && (this.hash = v.substr(V), v = v.slice(0, V));
        var H = v.indexOf("?");
        if (-1 !== H ? (this.search = v.substr(H), this.query = v.substr(H + 1), t && (this.query = m.parse(this.query)), v = v.slice(0, H)) : t && (this.search = "", this.query = {}), v && (this.pathname = v), b[k] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
          q = this.pathname || "";
          var W = this.search || "";
          this.path = q + W;
        }
        return this.href = this.format(), this;
      }, o.prototype.format = function () {
        var e = this.auth || "";
        e && (e = (e = encodeURIComponent(e)).replace(/%3A/i, ":"), e += "@");
        var t = this.protocol || "",
          r = this.pathname || "",
          n = this.hash || "",
          o = !1,
          s = "";
        this.host ? o = e + this.host : this.hostname && (o = e + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"), this.port && (o += ":" + this.port)), this.query && i.isObject(this.query) && Object.keys(this.query).length && (s = m.stringify(this.query));
        var a = this.search || s && "?" + s || "";
        return t && ":" !== t.substr(-1) && (t += ":"), this.slashes || (!t || b[t]) && !1 !== o ? (o = "//" + (o || ""), r && "/" !== r.charAt(0) && (r = "/" + r)) : o || (o = ""), n && "#" !== n.charAt(0) && (n = "#" + n), a && "?" !== a.charAt(0) && (a = "?" + a), t + o + (r = r.replace(/[?#]/g, function (e) {
          return encodeURIComponent(e);
        })) + (a = a.replace("#", "%23")) + n;
      }, o.prototype.resolve = function (e) {
        return this.resolveObject(v(e, !1, !0)).format();
      }, o.prototype.resolveObject = function (e) {
        if (i.isString(e)) {
          var t = new o();
          t.parse(e, !1, !0), e = t;
        }
        for (var r = new o(), n = Object.keys(this), s = 0; s < n.length; s++) {
          var a = n[s];
          r[a] = this[a];
        }
        if (r.hash = e.hash, "" === e.href) return r.href = r.format(), r;
        if (e.slashes && !e.protocol) {
          for (var l = Object.keys(e), u = 0; u < l.length; u++) {
            var c = l[u];
            "protocol" !== c && (r[c] = e[c]);
          }
          return b[r.protocol] && r.hostname && !r.pathname && (r.path = r.pathname = "/"), r.href = r.format(), r;
        }
        if (e.protocol && e.protocol !== r.protocol) {
          if (!b[e.protocol]) {
            for (var h = Object.keys(e), f = 0; f < h.length; f++) {
              var p = h[f];
              r[p] = e[p];
            }
            return r.href = r.format(), r;
          }
          if (r.protocol = e.protocol, e.host || y[e.protocol]) r.pathname = e.pathname;else {
            for (var d = (e.pathname || "").split("/"); d.length && !(e.host = d.shift()););
            e.host || (e.host = ""), e.hostname || (e.hostname = ""), "" !== d[0] && d.unshift(""), d.length < 2 && d.unshift(""), r.pathname = d.join("/");
          }
          if (r.search = e.search, r.query = e.query, r.host = e.host || "", r.auth = e.auth, r.hostname = e.hostname || e.host, r.port = e.port, r.pathname || r.search) {
            var g = r.pathname || "",
              m = r.search || "";
            r.path = g + m;
          }
          return r.slashes = r.slashes || e.slashes, r.href = r.format(), r;
        }
        var v = r.pathname && "/" === r.pathname.charAt(0),
          w = e.host || e.pathname && "/" === e.pathname.charAt(0),
          _ = w || v || r.host && e.pathname,
          k = _,
          S = r.pathname && r.pathname.split("/") || [],
          E = (d = e.pathname && e.pathname.split("/") || [], r.protocol && !b[r.protocol]);
        if (E && (r.hostname = "", r.port = null, r.host && ("" === S[0] ? S[0] = r.host : S.unshift(r.host)), r.host = "", e.protocol && (e.hostname = null, e.port = null, e.host && ("" === d[0] ? d[0] = e.host : d.unshift(e.host)), e.host = null), _ = _ && ("" === d[0] || "" === S[0])), w) r.host = e.host || "" === e.host ? e.host : r.host, r.hostname = e.hostname || "" === e.hostname ? e.hostname : r.hostname, r.search = e.search, r.query = e.query, S = d;else if (d.length) S || (S = []), S.pop(), S = S.concat(d), r.search = e.search, r.query = e.query;else if (!i.isNullOrUndefined(e.search)) {
          if (E) r.hostname = r.host = S.shift(), (I = !!(r.host && r.host.indexOf("@") > 0) && r.host.split("@")) && (r.auth = I.shift(), r.host = r.hostname = I.shift());
          return r.search = e.search, r.query = e.query, i.isNull(r.pathname) && i.isNull(r.search) || (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.href = r.format(), r;
        }
        if (!S.length) return r.pathname = null, r.search ? r.path = "/" + r.search : r.path = null, r.href = r.format(), r;
        for (var C = S.slice(-1)[0], T = (r.host || e.host || S.length > 1) && ("." === C || ".." === C) || "" === C, x = 0, A = S.length; A >= 0; A--) "." === (C = S[A]) ? S.splice(A, 1) : ".." === C ? (S.splice(A, 1), x++) : x && (S.splice(A, 1), x--);
        if (!_ && !k) for (; x--; x) S.unshift("..");
        !_ || "" === S[0] || S[0] && "/" === S[0].charAt(0) || S.unshift(""), T && "/" !== S.join("/").substr(-1) && S.push("");
        var I,
          P = "" === S[0] || S[0] && "/" === S[0].charAt(0);
        E && (r.hostname = r.host = P ? "" : S.length ? S.shift() : "", (I = !!(r.host && r.host.indexOf("@") > 0) && r.host.split("@")) && (r.auth = I.shift(), r.host = r.hostname = I.shift()));
        return (_ = _ || r.host && S.length) && !P && S.unshift(""), S.length ? r.pathname = S.join("/") : (r.pathname = null, r.path = null), i.isNull(r.pathname) && i.isNull(r.search) || (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.auth = e.auth || r.auth, r.slashes = r.slashes || e.slashes, r.href = r.format(), r;
      }, o.prototype.parseHost = function () {
        var e = this.host,
          t = a.exec(e);
        t && (":" !== (t = t[0]) && (this.port = t.substr(1)), e = e.substr(0, e.length - t.length)), e && (this.hostname = e);
      };
    }, {
      "./util": 77,
      punycode: 51,
      querystring: 54
    }],
    77: [function (e, t, r) {
      "use strict";

      t.exports = {
        isString: function isString(e) {
          return "string" == typeof e;
        },
        isObject: function isObject(e) {
          return "object" == _typeof(e) && null !== e;
        },
        isNull: function isNull(e) {
          return null === e;
        },
        isNullOrUndefined: function isNullOrUndefined(e) {
          return null == e;
        }
      };
    }, {}],
    78: [function (e, t, r) {
      (function (e) {
        (function () {
          function r(t) {
            try {
              if (!e.localStorage) return !1;
            } catch (e) {
              return !1;
            }
            var r = e.localStorage[t];
            return null != r && "true" === String(r).toLowerCase();
          }
          t.exports = function (e, t) {
            if (r("noDeprecation")) return e;
            var n = !1;
            return function () {
              if (!n) {
                if (r("throwDeprecation")) throw new Error(t);
                r("traceDeprecation") ? console.trace(t) : console.warn(t), n = !0;
              }
              return e.apply(this, arguments);
            };
          };
        }).call(this);
      }).call(this, "undefined" != typeof __webpack_require__.g ? __webpack_require__.g : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }, {}],
    79: [function (e, t, r) {
      t.exports = function e(t, r) {
        if (t && r) return e(t)(r);
        if ("function" != typeof t) throw new TypeError("need wrapper function");
        Object.keys(t).forEach(function (e) {
          n[e] = t[e];
        });
        return n;
        function n() {
          for (var e = new Array(arguments.length), r = 0; r < e.length; r++) e[r] = arguments[r];
          var n = t.apply(this, e),
            i = e[e.length - 1];
          return "function" == typeof n && n !== i && Object.keys(i).forEach(function (e) {
            n[e] = i[e];
          }), n;
        }
      };
    }, {}],
    80: [function (e, t, r) {
      "use strict";

      t.exports = function () {
        throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object");
      };
    }, {}],
    81: [function (e, t, r) {
      t.exports = function () {
        for (var e = {}, t = 0; t < arguments.length; t++) {
          var r = arguments[t];
          for (var i in r) n.call(r, i) && (e[i] = r[i]);
        }
        return e;
      };
      var n = Object.prototype.hasOwnProperty;
    }, {}],
    82: [function (e, t, r) {
      "use strict";

      t.exports = function (e) {
        e.prototype[Symbol.iterator] = /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
          var _e37;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _e37 = this.head;
              case 1:
                if (!_e37) {
                  _context.next = 7;
                  break;
                }
                _context.next = 4;
                return _e37.value;
              case 4:
                _e37 = _e37.next;
                _context.next = 1;
                break;
              case 7:
              case "end":
                return _context.stop();
            }
          }, _callee, this);
        });
      };
    }, {}],
    83: [function (e, t, r) {
      "use strict";

      function n(e) {
        var t = this;
        if (t instanceof n || (t = new n()), t.tail = null, t.head = null, t.length = 0, e && "function" == typeof e.forEach) e.forEach(function (e) {
          t.push(e);
        });else if (arguments.length > 0) for (var r = 0, i = arguments.length; r < i; r++) t.push(arguments[r]);
        return t;
      }
      function i(e, t, r) {
        var n = t === e.head ? new a(r, null, t, e) : new a(r, t, t.next, e);
        return null === n.next && (e.tail = n), null === n.prev && (e.head = n), e.length++, n;
      }
      function o(e, t) {
        e.tail = new a(t, e.tail, null, e), e.head || (e.head = e.tail), e.length++;
      }
      function s(e, t) {
        e.head = new a(t, null, e.head, e), e.tail || (e.tail = e.head), e.length++;
      }
      function a(e, t, r, n) {
        if (!(this instanceof a)) return new a(e, t, r, n);
        this.list = n, this.value = e, t ? (t.next = this, this.prev = t) : this.prev = null, r ? (r.prev = this, this.next = r) : this.next = null;
      }
      t.exports = n, n.Node = a, n.create = n, n.prototype.removeNode = function (e) {
        if (e.list !== this) throw new Error("removing node which does not belong to this list");
        var t = e.next,
          r = e.prev;
        return t && (t.prev = r), r && (r.next = t), e === this.head && (this.head = t), e === this.tail && (this.tail = r), e.list.length--, e.next = null, e.prev = null, e.list = null, t;
      }, n.prototype.unshiftNode = function (e) {
        if (e !== this.head) {
          e.list && e.list.removeNode(e);
          var t = this.head;
          e.list = this, e.next = t, t && (t.prev = e), this.head = e, this.tail || (this.tail = e), this.length++;
        }
      }, n.prototype.pushNode = function (e) {
        if (e !== this.tail) {
          e.list && e.list.removeNode(e);
          var t = this.tail;
          e.list = this, e.prev = t, t && (t.next = e), this.tail = e, this.head || (this.head = e), this.length++;
        }
      }, n.prototype.push = function () {
        for (var e = 0, t = arguments.length; e < t; e++) o(this, arguments[e]);
        return this.length;
      }, n.prototype.unshift = function () {
        for (var e = 0, t = arguments.length; e < t; e++) s(this, arguments[e]);
        return this.length;
      }, n.prototype.pop = function () {
        if (this.tail) {
          var e = this.tail.value;
          return this.tail = this.tail.prev, this.tail ? this.tail.next = null : this.head = null, this.length--, e;
        }
      }, n.prototype.shift = function () {
        if (this.head) {
          var e = this.head.value;
          return this.head = this.head.next, this.head ? this.head.prev = null : this.tail = null, this.length--, e;
        }
      }, n.prototype.forEach = function (e, t) {
        t = t || this;
        for (var r = this.head, n = 0; null !== r; n++) e.call(t, r.value, n, this), r = r.next;
      }, n.prototype.forEachReverse = function (e, t) {
        t = t || this;
        for (var r = this.tail, n = this.length - 1; null !== r; n--) e.call(t, r.value, n, this), r = r.prev;
      }, n.prototype.get = function (e) {
        for (var t = 0, r = this.head; null !== r && t < e; t++) r = r.next;
        if (t === e && null !== r) return r.value;
      }, n.prototype.getReverse = function (e) {
        for (var t = 0, r = this.tail; null !== r && t < e; t++) r = r.prev;
        if (t === e && null !== r) return r.value;
      }, n.prototype.map = function (e, t) {
        t = t || this;
        for (var r = new n(), i = this.head; null !== i;) r.push(e.call(t, i.value, this)), i = i.next;
        return r;
      }, n.prototype.mapReverse = function (e, t) {
        t = t || this;
        for (var r = new n(), i = this.tail; null !== i;) r.push(e.call(t, i.value, this)), i = i.prev;
        return r;
      }, n.prototype.reduce = function (e, t) {
        var r,
          n = this.head;
        if (arguments.length > 1) r = t;else {
          if (!this.head) throw new TypeError("Reduce of empty list with no initial value");
          n = this.head.next, r = this.head.value;
        }
        for (var i = 0; null !== n; i++) r = e(r, n.value, i), n = n.next;
        return r;
      }, n.prototype.reduceReverse = function (e, t) {
        var r,
          n = this.tail;
        if (arguments.length > 1) r = t;else {
          if (!this.tail) throw new TypeError("Reduce of empty list with no initial value");
          n = this.tail.prev, r = this.tail.value;
        }
        for (var i = this.length - 1; null !== n; i--) r = e(r, n.value, i), n = n.prev;
        return r;
      }, n.prototype.toArray = function () {
        for (var e = new Array(this.length), t = 0, r = this.head; null !== r; t++) e[t] = r.value, r = r.next;
        return e;
      }, n.prototype.toArrayReverse = function () {
        for (var e = new Array(this.length), t = 0, r = this.tail; null !== r; t++) e[t] = r.value, r = r.prev;
        return e;
      }, n.prototype.slice = function (e, t) {
        (t = t || this.length) < 0 && (t += this.length), (e = e || 0) < 0 && (e += this.length);
        var r = new n();
        if (t < e || t < 0) return r;
        e < 0 && (e = 0), t > this.length && (t = this.length);
        for (var i = 0, o = this.head; null !== o && i < e; i++) o = o.next;
        for (; null !== o && i < t; i++, o = o.next) r.push(o.value);
        return r;
      }, n.prototype.sliceReverse = function (e, t) {
        (t = t || this.length) < 0 && (t += this.length), (e = e || 0) < 0 && (e += this.length);
        var r = new n();
        if (t < e || t < 0) return r;
        e < 0 && (e = 0), t > this.length && (t = this.length);
        for (var i = this.length, o = this.tail; null !== o && i > t; i--) o = o.prev;
        for (; null !== o && i > e; i--, o = o.prev) r.push(o.value);
        return r;
      }, n.prototype.splice = function (e, t) {
        e > this.length && (e = this.length - 1), e < 0 && (e = this.length + e);
        for (var n = 0, o = this.head; null !== o && n < e; n++) o = o.next;
        var s = [];
        for (n = 0; o && n < t; n++) s.push(o.value), o = this.removeNode(o);
        null === o && (o = this.tail), o !== this.head && o !== this.tail && (o = o.prev);
        for (n = 0; n < (arguments.length <= 2 ? 0 : arguments.length - 2); n++) o = i(this, o, n + 2 < 2 || arguments.length <= n + 2 ? undefined : arguments[n + 2]);
        return s;
      }, n.prototype.reverse = function () {
        for (var e = this.head, t = this.tail, r = e; null !== r; r = r.prev) {
          var n = r.prev;
          r.prev = r.next, r.next = n;
        }
        return this.head = t, this.tail = e, this;
      };
      try {
        e("./iterator.js")(n);
      } catch (e) {}
    }, {
      "./iterator.js": 82
    }]
  }, {}, [12])(12);
});

/***/ }),

/***/ 9521:
/***/ (function() {

/* (ignored) */

/***/ }),

/***/ 49125:
/***/ (function() {

/* (ignored) */

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	!function() {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = function(result, chunkIds, fn, priority) {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var chunkIds = deferred[i][0];
/******/ 				var fn = deferred[i][1];
/******/ 				var priority = deferred[i][2];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	!function() {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = function(chunkId) {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	!function() {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = function(chunkId) {
/******/ 			// return url for filenames based on template
/******/ 			return "js/" + "about" + "-legacy." + "9158d75b" + ".js";
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/get mini-css chunk filename */
/******/ 	!function() {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.miniCssF = function(chunkId) {
/******/ 			// return url for filenames based on template
/******/ 			return undefined;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	!function() {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "vue3-webpack5:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = function(url, done, key, chunkId) {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = function(prev, event) {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach(function(fn) { return fn(event); });
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	!function() {
/******/ 		__webpack_require__.nmd = function(module) {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	!function() {
/******/ 		__webpack_require__.p = "/osh-cloud/morpheusx/";
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	!function() {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			143: 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = function(chunkId, promises) {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = function(event) {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						} else installedChunks[chunkId] = 0;
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {
/******/ 			var chunkIds = data[0];
/******/ 			var moreModules = data[1];
/******/ 			var runtime = data[2];
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkvue3_webpack5"] = self["webpackChunkvue3_webpack5"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2994); })
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;
//# sourceMappingURL=app-legacy.a9d0115c.js.map